const _0x151ca5=(function(){let _0x2107aa=!![];return function(_0x1a2c73,_0x53061e){const _0x2988d3=_0x2107aa?function(){if(_0x53061e){const _0x8c07ae=_0x53061e['apply'](_0x1a2c73,arguments);return _0x53061e=null,_0x8c07ae;}}:function(){};return _0x2107aa=![],_0x2988d3;};}()),_0x458a70=_0x151ca5(this,function(){return _0x458a70['toString']()['search']('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](_0x458a70)['search']('(((.+)+)+)'+'+$');});_0x458a70();const _0x59f509=(function(){let _0x433a54=!![];return function(_0x346109,_0x39e20d){const _0x1dbc89=_0x433a54?function(){if(_0x39e20d){const _0x333ca6=_0x39e20d['apply'](_0x346109,arguments);return _0x39e20d=null,_0x333ca6;}}:function(){};return _0x433a54=![],_0x1dbc89;};}());(function(){_0x59f509(this,function(){const _0x2c0807=new RegExp('function\x20*'+'\x5c(\x20*\x5c)'),_0x224a17=new RegExp('\x5c+\x5c+\x20*(?:['+'a-zA-Z_$]['+'0-9a-zA-Z_'+'$]*)','i'),_0x5749b7=_0xac72ea('init');!_0x2c0807['test'](_0x5749b7+'chain')||!_0x224a17['test'](_0x5749b7+'input')?_0x5749b7('0'):_0xac72ea();})();}());const _0x57b2fa=(function(){let _0x2a5104=!![];return function(_0x3cb0c4,_0x1a23a9){const _0xc4d514=_0x2a5104?function(){if(_0x1a23a9){const _0x818660=_0x1a23a9['apply'](_0x3cb0c4,arguments);return _0x1a23a9=null,_0x818660;}}:function(){};return _0x2a5104=![],_0xc4d514;};}()),_0x1854e3=_0x57b2fa(this,function(){let _0x2cb92e;try{const _0x445f7e=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');');_0x2cb92e=_0x445f7e();}catch(_0x63f355){_0x2cb92e=window;}const _0x56af13=_0x2cb92e['console']=_0x2cb92e['console']||{},_0x3b93e1=['log','warn','info','error','exception','table','trace'];for(let _0x24ec82=0xd21+-0x10e+-0x1*0xc13;_0x24ec82<_0x3b93e1['length'];_0x24ec82++){const _0x55f44a=_0x57b2fa['constructo'+'r']['prototype']['bind'](_0x57b2fa),_0x5536b2=_0x3b93e1[_0x24ec82],_0x2ced89=_0x56af13[_0x5536b2]||_0x55f44a;_0x55f44a['__proto__']=_0x57b2fa['bind'](_0x57b2fa),_0x55f44a['toString']=_0x2ced89['toString']['bind'](_0x2ced89),_0x56af13[_0x5536b2]=_0x55f44a;}});_0x1854e3();var k0=Object['defineProp'+'erty'],U0=(_0x204016,_0x23257f,_0x294041)=>_0x23257f in _0x204016?k0(_0x204016,_0x23257f,{'enumerable':!(0x25*0x4a+0x1491+-0x1f43),'configurable':!(0x1*0x673+-0x3*-0xa8e+-0x261d),'writable':!(-0x2*-0x126+-0xa*0x75+0x246),'value':_0x294041}):_0x204016[_0x23257f]=_0x294041,h=(_0x3441ba,_0x319662,_0x48ddd7)=>U0(_0x3441ba,typeof _0x319662!='symbol'?_0x319662+'':_0x319662,_0x48ddd7),B0=(_0x3b64f0=>(_0x3b64f0['HIGH']='high',_0x3b64f0['MEDIUM']='medium',_0x3b64f0['LOW']='low',_0x3b64f0['LOW_VR']='lowVR',_0x3b64f0))(B0||{});const z0=()=>!HS()&&!WS()&&!GS()&&!V0(),GS=()=>{const _0x467234=navigator['userAgent']['includes']('Macintosh'),_0x24ee52=navigator['maxTouchPo'+'ints']===0x1b5c+-0x1ded*-0x1+-0x5ba*0xa,_0x3fe3f9=/^((?!chrome|android).)*safari/i['test'](navigator['userAgent']);return _0x467234&&_0x24ee52&&_0x3fe3f9;},HS=()=>navigator['userAgent']['includes']('Quest'),V0=()=>{const _0x2125c9=navigator['userAgent']['toLowerCas'+'e']();return _0x2125c9['includes']('pico')||_0x2125c9['includes']('picolrowse'+'r');},WS=()=>['iOS','Android']['includes'](G0()),FU=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),NU=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),G0=()=>{const _0x1633ac=window['navigator']['userAgent']['toLowerCas'+'e'](),_0x57b5fd=window['navigator']['platform']['toLowerCas'+'e']();return/iphone|ipad|ipod/['test'](_0x1633ac)?'iOS':/android/['test'](_0x1633ac)?'Android':/mac/['test'](_0x57b5fd)?'macOS':/win/['test'](_0x57b5fd)?'Windows':/linux/['test'](_0x57b5fd)?'Linux':'Unknown';};class kU{constructor(){this['HIGH_FPS_T'+'HRESHOLD']=-0xf5c+0x1b08+-0xb7f,this['MEDIUM_FPS'+'_THRESHOLD']=0x2dc+0x1701+-0x19bf*0x1,this['HIGH_MEMOR'+'Y_THRESHOL'+'D']=(-0x1b9a+0x1d8*0x1+-0x2*-0xce3)*(-0x16*0x45+0xfc2*0x2+-0x1596)*(0x244a+0x1cc0+-0x3d0a)*(0x1*0xe35+-0xde7*0x2+0x1199),this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']=(0x1332+-0x22c9+0xf99)*(-0x2*0xc91+0x3d8*-0x2+0x24d2)*(0x56c+-0x1e96+-0x1*-0x1d2a)*(0x2324+-0x32d*-0x9+-0x3bb9),this['SCORE_THRE'+'SHOLDS']={'HIGH':0x46,'MEDIUM':0x32,'LOW':0x1e},this['VENDOR_WEI'+'GHTS']={'nvidia':0x1,'amd':0.9,'apple':0.8,'intel':0.6,'qualcomm':0.5,'arm':0.4},this['HIGH_END_P'+'ATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*[3-4]|titan\s*(?:rtx|xp|v))|quadro\s+(?:rtx|a[0-9]+)/i,/a[1-9][0-9]+/i],'amd':[/radeon\s+(?:rx\s*[6-9]|rx\s*7[0-9]+|pro\s*w[5-9])|instinct\s+mi[2-9]/i],'apple':[/m[1-3]\s+(?:pro|max|ultra)?/i]},this['MEDIUM_END'+'_PATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*2|gtx\s*1[6-9])|quadro\s+(?:p[2-9]|t[1-9])/i],'amd':[/radeon\s+(?:rx\s*[4-5]|vega\s*[5-9])|pro\s*w[2-4]/i],'apple':[/a[1-9][0-9]+\s+(?:x|z)?/i]},this['LOW_END_PA'+'TTERNS']={'intel':[/(?:hd|uhd|iris|xe)\s*graphics\s*(?:[6-9][0-9]+|[1-9][0-9]+g)/i],'qualcomm':[/adreno\s*[6-9][0-9]+/i],'arm':[/mali\s*-?(?:g[7-9][0-9]|t[8-9][0-9])/i]};}['getVendorS'+'core'](_0x4451ce){const _0x1d4e72=_0x4451ce['toLowerCas'+'e']();for(const [_0x1d9e0f,_0x51696a]of Object['entries'](this['VENDOR_WEI'+'GHTS']))if(_0x1d4e72['includes'](_0x1d9e0f))return _0x51696a*(0x1*-0x1b85+-0x3*-0xad+0x19e2);return 0x57*0x66+-0x233*-0x2+-0x26de;}['getModelSc'+'ore'](_0x4233cc,_0x1f3f1e){const _0x3694d5=_0x4233cc['toLowerCas'+'e'](),_0x3eedda=_0x1f3f1e['toLowerCas'+'e']();for(const [_0x22fa9c,_0x4c1160]of Object['entries'](this['HIGH_END_P'+'ATTERNS']))if(_0x3694d5['includes'](_0x22fa9c)&&_0x4c1160['some'](_0x39cb4e=>_0x39cb4e['test'](_0x3eedda)))return-0x7*-0xb+0x1f89+-0x1f7c;for(const [_0x323d6f,_0x2f91d9]of Object['entries'](this['MEDIUM_END'+'_PATTERNS']))if(_0x3694d5['includes'](_0x323d6f)&&_0x2f91d9['some'](_0x248d0e=>_0x248d0e['test'](_0x3eedda)))return-0xff5+-0x8f*0x17+0x1*0x1d14;for(const [_0x3c6548,_0x40d6c2]of Object['entries'](this['LOW_END_PA'+'TTERNS']))if(_0x3694d5['includes'](_0x3c6548)&&_0x40d6c2['some'](_0x2b2dde=>_0x2b2dde['test'](_0x3eedda)))return-0xaee*0x1+0xbc8+0xe*-0xc;return 0x446*0x9+0x124c+-0x3886;}['getMemoryS'+'core'](_0x563ba7){return _0x563ba7?_0x563ba7>=-0x3*0x16cd+-0x39a1+0x5674*0x2?-0x1e3*0x4+-0x1*-0x1003+0x3*-0x2b1:_0x563ba7>=0x25ee+0x1cb+0x1*-0x879?-0x213f+0xb93+-0xb03*-0x2:_0x563ba7>=-0x7*-0xcc+0x2*0xe56+0xad0*-0x1?-0x337*-0x7+-0x1881+0x10*0x25:_0x563ba7>=0x158c+0x63a*-0x2+-0x13*-0x58?-0x3*0x3bd+-0x35*-0x33+0xee:_0x563ba7>=0xce9+-0xdaa+0x1*0x891?0x3*0x496+-0xae*0x18+0x2ca:0xa8b*-0x2+0xa52*0x1+0xaf6:-0x140b+-0xa2*0x6+0x1809*0x1;}['getDriverS'+'core'](_0x446dc9){if(!_0x446dc9)return 0x10e*0x1+-0x26db+0x25ff;const _0x1b7782=_0x446dc9['match'](/20[2-9][0-9]/);if(_0x1b7782){const _0xf7fd3d=parseInt(_0x1b7782[0x142b+0x77*-0x3b+0x742]);if(_0xf7fd3d>=0xf2f+-0x238d+0x1*0x1c45)return 0x3*0x17+0x11*-0xef+0xb2*0x17;if(_0xf7fd3d>=-0x2*0x196+0x10ad+0x1*-0x59b)return 0x141*0xc+-0x32f*-0x6+-0x21d6;if(_0xf7fd3d>=0x2241+-0x1a1b+-0x41)return-0x1*0xcdf+-0x1d6*-0x5+0x3*0x14f;}return 0x5*-0x535+-0x202d+0x3a68;}['evaluateGP'+'U'](_0x5972fc){const _0x5deaba=this['getVendorS'+'core'](_0x5972fc['vendor']),_0x55cca7=this['getModelSc'+'ore'](_0x5972fc['vendor'],_0x5972fc['renderer']),_0xb30e13=this['getMemoryS'+'core'](_0x5972fc['memory']),_0x125d8b=this['getDriverS'+'core'](_0x5972fc['driverVers'+'ion']);return console['log']('GPU:',_0x5972fc['vendor']),console['log']('GPU:',_0x5972fc['renderer']),console['log']('GPU:',_0x5972fc['driverVers'+'ion']),console['table'](_0x5972fc),_0x5deaba*(-0xc8+0xc02+-0xb3a+0.3)+_0x55cca7*(0x1*0x11c+-0x167*0x13+0x1*0x1989+0.4)+_0xb30e13*(-0x59*0x2f+0x1a0a+0x9b3*-0x1+0.2)+_0x125d8b*(-0x246a+-0x3*-0x560+0x144a+0.1);}['evaluateCP'+'U'](){const _0x3de352=navigator['hardwareCo'+'ncurrency'];return _0x3de352>=0x9aa*-0x4+0x20ae+-0x1*-0x602?0x1507+-0x191e+0x41a:_0x3de352>=-0x1152+-0x1e28+0x2*0x17bf?0x3*0x84+0x15db*-0x1+0x1451:-0x13b2+0x5*-0x79d+0x39c4*0x1;}['evaluateMe'+'mory'](_0x56c3db){return typeof _0x56c3db=='string'?-0x5*0xfe+-0x124e+0x1744:_0x56c3db['totalJSHea'+'pSize'];}['evaluatePe'+'rformance'](_0x7609c9){const _0x28e97c=WS(),_0x162b32=GS(),_0x428687=HS();if(_0x162b32)return'medium';if(_0x428687)return'lowVR';if(_0x28e97c)return'low';const _0x59b98b=_0x7609c9['fps']>=this['HIGH_FPS_T'+'HRESHOLD']?-0x419+0x100a*-0x1+-0x2*-0xa13:_0x7609c9['fps']>=this['MEDIUM_FPS'+'_THRESHOLD']?-0xd9b+0xa6d*-0x3+-0x22*-0x152:0x103d*-0x2+0x7f*0x15+0x1610;let _0xf33f16=0x2*-0xcc8+0x26ed+-0xd5c;typeof _0x7609c9['gpuInfo']!='string'&&(_0xf33f16=this['evaluateGP'+'U'](_0x7609c9['gpuInfo']));const _0x5a92d0=this['evaluateCP'+'U'](),_0x484aef=this['evaluateMe'+'mory'](_0x7609c9['memoryInfo'])>=this['HIGH_MEMOR'+'Y_THRESHOL'+'D']?-0x589+-0x1*-0x1884+0x1*-0x12f8:this['evaluateMe'+'mory'](_0x7609c9['memoryInfo'])>=this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']?0x617+-0x11b5+0xba0:-0x1de3+0x2556+-0x772,_0x38b374=_0x59b98b+_0xf33f16+_0x5a92d0+_0x484aef;return console['log']('GPU:',_0x59b98b,_0xf33f16,_0x5a92d0,_0x484aef),_0x38b374>=this['SCORE_THRE'+'SHOLDS']['HIGH']?'high':_0x38b374>=this['SCORE_THRE'+'SHOLDS']['MEDIUM']?'medium':'low';}['getModelQu'+'alitySetti'+'ngs'](_0xa420c3){return{'high':{'textureQuality':'high'},'medium':{'textureQuality':'medium'},'low':{'textureQuality':'low'},'lowVR':{'textureQuality':'lowVR'}}[_0xa420c3];}}const H0=()=>{globalThis['requestIdl'+'eCallback']=globalThis['requestIdl'+'eCallback']||function(_0x4a1b94){var _0xd6bd81=Date['now']();return setTimeout(function(){_0x4a1b94({'didTimeout':!(0x1*-0x799+-0xdd2+0x156c),'timeRemaining':function(){return Math['max'](0xf73+0x2164*0x1+-0x1*0x30d7,-0xda3*-0x1+-0x213d+-0x16a*-0xe-(Date['now']()-_0xd6bd81));}});},-0xacc+-0x1007+0x1ad4);},globalThis['cancelIdle'+'Callback']=globalThis['cancelIdle'+'Callback']||function(_0x3145f9){clearTimeout(_0x3145f9);};},W0='RenderFram'+'e',Ld='RenderFram'+'eTime',Pm='RenderPass',cn='RenderPass'+'Detail',Vl='RenderActi'+'on',Mm='RenderTarg'+'etAlloc',Dm='TextureAll'+'oc',Im='ShaderAllo'+'c',$0='ShaderComp'+'ile',X0='VRAM.Textu'+'re',q0='VRAM.Vb',j0='VRAM.Ib',Y0='BindGroupA'+'lloc',K0='BindGroupF'+'ormatAlloc',Vs='Element',Z0='Textures',Gl='GpuTimings',hn='$_CURRENT_'+'SDK_VERSIO'+'N',$S='$_CURRENT_'+'SDK_REVISI'+'ON';function ah(_0x517568,_0x3b6d98){for(const _0x28b187 in _0x3b6d98){const _0x23d29d=_0x3b6d98[_0x28b187];Array['isArray'](_0x23d29d)?_0x517568[_0x28b187]=ah([],_0x23d29d):_0x23d29d&&typeof _0x23d29d=='object'?_0x517568[_0x28b187]=ah({},_0x23d29d):_0x517568[_0x28b187]=_0x23d29d;}return _0x517568;}const Q0={'create'(){return('xxxxxxxx-x'+'xxx-4xxx-y'+'xxx-xxxxxx'+'xxxxxx')['replace'](/[xy]/g,_0x4f1c32=>{const _0x5c2040=Math['random']()*(-0x1161+-0x1827+-0x1e4*-0x16)|-0x4*0x382+0x174f+-0x947;return(_0x4f1c32==='x'?_0x5c2040:_0x5c2040&0x1*0x69d+-0x2405*0x1+0x1d6b|-0x1e0b*0x1+-0x3da*-0xa+-0x871)['toString'](-0x1*-0x67f+-0x241b+0x1dac);});}},xe={'delimiter':'/','join'(..._0x39a64d){let _0x49d1ba=_0x39a64d[0x602+-0x1554+0xf52];for(let _0x43b0e2=-0x57e+0x3*0x22d+0x5*-0x35;_0x43b0e2<_0x39a64d['length']-(0xf2e+0xef*-0x1d+-0x1*-0xbe6);_0x43b0e2++){const _0x345192=_0x39a64d[_0x43b0e2],_0x200308=_0x39a64d[_0x43b0e2+(-0x18ab+0x3*0x107+0x1597)];if(_0x200308[-0xb*0x185+-0xc06+0x1cbd]===xe['delimiter']){_0x49d1ba=_0x200308;continue;}_0x345192&&_0x200308&&_0x345192[_0x345192['length']-(-0x22f6+-0x7*0x1b+-0x4*-0x8ed)]!==xe['delimiter']&&_0x200308[0x1*0x251+-0xb6c+0x91b]!==xe['delimiter']?_0x49d1ba+=xe['delimiter']+_0x200308:_0x49d1ba+=_0x200308;}return _0x49d1ba;},'normalize'(_0x2495b8){const _0x45d59d=_0x2495b8['startsWith'](xe['delimiter']),_0xf1a853=_0x2495b8['endsWith'](xe['delimiter']),_0x176e4e=_0x2495b8['split']('/');let _0x3ab95b='',_0x41a031=[];for(let _0x494b73=0x165e+0x204e+0x2*-0x1b56;_0x494b73<_0x176e4e['length'];_0x494b73++)if(_0x176e4e[_0x494b73]!==''&&_0x176e4e[_0x494b73]!=='.'){if(_0x176e4e[_0x494b73]==='..'&&_0x41a031['length']>-0x1*0x709+-0x1db0+0x24b9*0x1){_0x41a031=_0x41a031['slice'](0x1ea6+-0x70d+-0x7*0x35f,_0x41a031['length']-(-0x8b5+0x841*-0x1+0x10f8*0x1));continue;}_0x494b73>0x2*0xfb3+-0x3*0x903+0x1*-0x45d&&_0x41a031['push'](xe['delimiter']),_0x41a031['push'](_0x176e4e[_0x494b73]);}return _0x3ab95b=_0x41a031['join'](''),!_0x45d59d&&_0x3ab95b[-0x2521*-0x1+-0x71c+-0x1e05]===xe['delimiter']&&(_0x3ab95b=_0x3ab95b['slice'](-0x704+0x33*-0x61+0x34b*0x8)),_0xf1a853&&_0x3ab95b[_0x3ab95b['length']-(-0x129a+0x1*0x20cc+-0x1*0xe31)]!==xe['delimiter']&&(_0x3ab95b+=xe['delimiter']),_0x3ab95b;},'split'(_0x297b12){const _0xb371e=_0x297b12['lastIndexO'+'f'](xe['delimiter']);return _0xb371e!==-(-0x26*0xc9+-0xd4*0x9+0x1*0x254b)?[_0x297b12['substring'](0x2*0x473+-0x1815+0xd*0x12b,_0xb371e),_0x297b12['substring'](_0xb371e+(-0x9d1*0x3+0x1*-0x7a0+-0x54*-0x71))]:['',_0x297b12];},'getBasename'(_0x5b672b){return xe['split'](_0x5b672b)[0x1741+-0x71b+-0x1025];},'getDirectory'(_0x325148){return xe['split'](_0x325148)[-0xdc3+0xf5d*0x2+-0x10f7];},'getExtension'(_0x2475d5){const _0x1e6881=_0x2475d5['split']('?')[0x1fea+-0x1*-0x2273+-0x161f*0x3]['split']('.')['pop']();return _0x1e6881!==_0x2475d5?'.'+_0x1e6881:'';},'isRelativePath'(_0x4078fa){return _0x4078fa['charAt'](-0x1457+0x128d+0x1ca)!=='/'&&_0x4078fa['match'](/:\/\//)===null;},'extractPath'(_0x494b8d){let _0x5eb0b2='';const _0x47552e=_0x494b8d['split']('/');let _0x4cb1d2=0x2532+-0x9*0x2d5+0x6f*-0x1b;if(_0x47552e['length']>-0x6*0x613+-0x1*0x1a87+-0x3*-0x14fe){if(xe['isRelative'+'Path'](_0x494b8d)){if(_0x47552e[-0x23ae+-0x1*-0x197e+0xa30]==='.'){for(_0x4cb1d2=-0xd5*0x8+0x1803+-0x5c9*0x3;_0x4cb1d2<_0x47552e['length']-(0x1*-0xf20+-0x14eb+-0xc*-0x301);++_0x4cb1d2)_0x5eb0b2+=_0x4cb1d2===-0x4*0x945+0x1*-0x21f5+-0x4709*-0x1?_0x47552e[_0x4cb1d2]:'/'+_0x47552e[_0x4cb1d2];}else{if(_0x47552e[0x9*0x301+-0x224f+0x1*0x746]==='..'){for(_0x4cb1d2=0x128b+0x1210+-0x249b;_0x4cb1d2<_0x47552e['length']-(0x2*-0x1180+0xd6f*0x1+0x1592);++_0x4cb1d2)_0x5eb0b2+=_0x4cb1d2===0x1*-0xc73+0x11a+-0x5*-0x245?_0x47552e[_0x4cb1d2]:'/'+_0x47552e[_0x4cb1d2];}else{for(_0x5eb0b2='.',_0x4cb1d2=-0x941+0x9*0x2d7+-0x104e;_0x4cb1d2<_0x47552e['length']-(-0x1d6f+-0xe15+0x2b85);++_0x4cb1d2)_0x5eb0b2+='/'+_0x47552e[_0x4cb1d2];}}}else{for(_0x4cb1d2=0xb33*-0x3+0x8b6+0x18e3*0x1;_0x4cb1d2<_0x47552e['length']-(0x668+-0x1b95+0x152e);++_0x4cb1d2)_0x5eb0b2+=_0x4cb1d2===0x119b+0xaa7+-0x2*0xe21?_0x47552e[_0x4cb1d2]:'/'+_0x47552e[_0x4cb1d2];}}return _0x5eb0b2;}},J0=()=>{let _0x55daf3=!(-0x1*0xa3+-0xe65+0xf09);try{const _0x19d05e=Object['defineProp'+'erty']({},'passive',{'get':function(){return _0x55daf3=!(0x153d+0xb8f*0x1+-0x20cc),!(-0x1*0x24c5+-0x1009+-0xb*-0x4cd);}});window['addEventLi'+'stener']('testpassiv'+'e',null,_0x19d05e),window['removeEven'+'tListener']('testpassiv'+'e',null,_0x19d05e);}catch{}return _0x55daf3;},Bi=typeof navigator<'u'?navigator['userAgent']:'',nh=typeof window<'u'?'browser':typeof global<'u'?'node':'worker',Lm=/android/i['test'](Bi)?'android':/ip(?:[ao]d|hone)/i['test'](Bi)?'ios':/windows/i['test'](Bi)?'windows':/mac os/i['test'](Bi)?'osx':/linux/i['test'](Bi)?'linux':/cros/i['test'](Bi)?'cros':null,ex=nh!=='browser'?null:/Chrome\/|Chromium\/|Edg.*\//['test'](Bi)?'chrome':/Safari\//['test'](Bi)?'safari':/Firefox\//['test'](Bi)?'firefox':'other',tx=nh==='browser'&&('ontouchsta'+'rt'in window||'maxTouchPo'+'ints'in navigator&&navigator['maxTouchPo'+'ints']>0x5*0xdf+-0x11*0xad+-0x53*-0x16),sx=J0(),Ae={'name':Lm,'browser':nh==='browser','worker':nh==='worker','android':Lm==='android','touch':tx,'passiveEvents':sx,'browserName':ex},XS='abcdefghij'+'klmnopqrst'+'uvwxyz',qS='ABCDEFGHIJ'+'KLMNOPQRST'+'UVWXYZ',ix=XS+qS,Bf=0x1f62+0xae*0x39+-0x6*-0x1850,jS=0x1709a+0x13226+-0x1c6c1,Rm=0x10187*-0x1+-0xf804+0x12f*0x265,rx=0x118e7+0x9ace+-0xd3b6,ax=0x1*0x198b+-0xe3*0x2+0x848,Om=0x25492+0x2*0x1476e+-0x178c4*0x2,Fm=0x3a85*-0x4+-0x30172+-0x4f07*-0x13,nx=-0x5fb*0x8b+-0x6e1a+-0xa*-0x9023,ox=-0x13177*-0x1+0x2162c+-0x153a4,lx=0x2b*-0xfd+-0x9*0x179+0x1b4*0x34,cx=0x1*0x1d4b+0x7a1+-0x3ed,zf=-0xd9db+0x64*0x1c5+0x126e7,Vf=-0x7*-0x2725+0x54f*0x57+-0x1*0x1e1cd;function Gf(_0x507e56,_0xb0928d=-0x2105+0x1e77+0x28e){const _0x141058=_0x507e56['length'];if(_0xb0928d<-0x2c+-0xc*-0x1d1+0x2*-0xad0||_0xb0928d>=_0x141058)return null;const _0x2e46d8=_0x507e56['charCodeAt'](_0xb0928d);if(_0x141058>-0x1*-0xda9+-0x1ba5+0xdfd&&_0x2e46d8>=Bf&&_0x2e46d8<=jS){const _0x3c16a8=_0x507e56['charCodeAt'](_0xb0928d+(0x1cf7+-0x49*0x4a+-0x7dc));if(_0x3c16a8>=Rm&&_0x3c16a8<=rx)return{'code':(_0x2e46d8-Bf)*(-0x327+0x13a2+-0xc7b)+_0x3c16a8-Rm+(0x1055f+-0x14a25+-0x2*-0xa263),'long':!(-0x2*0xc6c+-0x1b08+0x20*0x19f)};}return{'code':_0x2e46d8,'long':!(0x1*-0x221b+0xbc9+-0x7f*-0x2d)};}function fr(_0x3f7ddd,_0x50b620,_0x21de8c){if(!_0x3f7ddd)return!(-0x22f5+-0x8fd*-0x1+-0x6d*-0x3d);const _0x22a63e=Gf(_0x3f7ddd);if(_0x22a63e){const _0xd4f827=_0x22a63e['code'];return _0xd4f827>=_0x50b620&&_0xd4f827<=_0x21de8c;}return!(-0x105e+0x1a6e+-0x67*0x19);}function hx(_0x4c1aa9,_0x450999){if(_0x450999===_0x4c1aa9['length']-(-0x1095*0x1+-0x116e+-0x26e*-0xe))return 0x17c2+0x2*0x1055+-0x386b;if(fr(_0x4c1aa9[_0x450999],Bf,jS)){const _0x2e860a=_0x4c1aa9['substring'](_0x450999,_0x450999+(0x258d+-0x376+-0x2215)),_0x26c119=_0x4c1aa9['substring'](_0x450999+(0x1e34+0x1*0xf07+-0x2d39),_0x450999+(0x105c+0x7c2+0x1*-0x181a));return fr(_0x26c119,nx,ox)||fr(_0x2e860a,Om,Fm)&&fr(_0x26c119,Om,Fm)?-0x187d+0xebc*-0x1+-0x11f*-0x23:fr(_0x26c119,zf,Vf)?0x1*0xa88+0x1*-0x1a9b+0x1016:0x123c+0x15*0x10c+-0x2836*0x1;}return fr(_0x4c1aa9[_0x450999+(0x5*-0x756+-0xf01+-0x4*-0xcec)],zf,Vf)?0x132*0x2+-0x25e5+0x2383:0x81*0x3c+0x11f*-0x1+0x36*-0x8a;}const Hc={'ASCII_LOWERCASE':XS,'ASCII_UPPERCASE':qS,'ASCII_LETTERS':ix,'format'(_0x10e4ed,..._0x108339){for(let _0x36d3c2=-0x1fd7+0x79d*-0x4+-0x3e4b*-0x1;_0x36d3c2<_0x108339['length'];_0x36d3c2++)_0x10e4ed=_0x10e4ed['replace']('{'+_0x36d3c2+'}',_0x108339[_0x36d3c2]);return _0x10e4ed;},'getCodePoint'(_0xbade3c,_0x1ac5b1){const _0x2d9bd0=Gf(_0xbade3c,_0x1ac5b1);return _0x2d9bd0&&_0x2d9bd0['code'];},'getCodePoints'(_0x3a9450){if(typeof _0x3a9450!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x243d5d=-0x2303*-0x1+0x1*-0x13a1+-0x2*0x7b1;const _0xcd0b43=[];let _0x468031;for(;_0x468031=Gf(_0x3a9450,_0x243d5d);)_0xcd0b43['push'](_0x468031['code']),_0x243d5d+=_0x468031['long']?0x4b9+-0x8b+-0x42c:-0x1d38+0x2*0x49d+-0x13ff*-0x1;return _0xcd0b43;},'getSymbols'(_0x3f1fd9){if(typeof _0x3f1fd9!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x12ee32=-0x1ecf+-0x1bbf+-0x2*-0x1d47;const _0x1c095a=_0x3f1fd9['length'],_0x360e9e=[];let _0x54bd2f=-0x4c*0x6+-0x5*0x1c4+-0x2a7*-0x4,_0x1c50d3;for(;_0x12ee32<_0x1c095a;){if(_0x54bd2f+=hx(_0x3f1fd9,_0x12ee32+_0x54bd2f),_0x1c50d3=_0x3f1fd9[_0x12ee32+_0x54bd2f],fr(_0x1c50d3,lx,cx)&&(_0x1c50d3=_0x3f1fd9[_0x12ee32+_0x54bd2f++]),fr(_0x1c50d3,zf,Vf)&&(_0x1c50d3=_0x3f1fd9[_0x12ee32+_0x54bd2f++]),_0x1c50d3&&_0x1c50d3['charCodeAt'](-0x6*-0x22f+0x1*-0x20c7+0x13ad)===ax){_0x1c50d3=_0x3f1fd9[_0x12ee32+_0x54bd2f++];continue;}const _0x1c146c=_0x3f1fd9['substring'](_0x12ee32,_0x12ee32+_0x54bd2f);_0x360e9e['push'](_0x1c146c),_0x12ee32+=_0x54bd2f,_0x54bd2f=-0x1d55+-0x172b+-0x30*-0x118;}return _0x360e9e;},'fromCodePoint'(..._0x5e0192){return _0x5e0192['map'](_0x4b2389=>_0x4b2389>-0x45*0x44a+0xc8b4+-0x15f3d*-0x1?(_0x4b2389-=0x653b+0xf756+0x3*-0x1edb,String['fromCharCo'+'de']((_0x4b2389>>0xe26+0x448+-0x1264)+(0xb6d0+-0x4ddc+0x6f0c),_0x4b2389%(0x2013+0x227c*-0x1+0x3*0x223)+(0x8de*-0x19+-0x160*0x8f+0x27e4e))):String['fromCharCo'+'de'](_0x4b2389))['join']('');}},Zr=class Zr{static['set'](_0x568411,_0x562530=!(-0x5*0x265+0x1af1+-0xef8)){_0x562530?Zr['_traceChan'+'nels']['add'](_0x568411):Zr['_traceChan'+'nels']['delete'](_0x568411);}static['get'](_0x14a569){return Zr['_traceChan'+'nels']['has'](_0x14a569);}};h(Zr,'_traceChan'+'nels',new Set()),h(Zr,'stack',!(-0x12*-0x1fc+0x78d*0x5+-0x4978));let mi=Zr;const Vt=class Vt{static['deprecated'](_0x511ee9){Vt['_loggedMes'+'sages']['has'](_0x511ee9)||(Vt['_loggedMes'+'sages']['add'](_0x511ee9),console['warn']('DEPRECATED'+':\x20'+_0x511ee9));}static['removed'](_0x163a94){Vt['_loggedMes'+'sages']['has'](_0x163a94)||(Vt['_loggedMes'+'sages']['add'](_0x163a94),console['error']('REMOVED:\x20'+_0x163a94));}static['assertDepr'+'ecated'](_0x2c93eb,_0x53d4a3){_0x2c93eb||Vt['deprecated'](_0x53d4a3);}static['assert'](_0xe40c47,..._0x464ef2){_0xe40c47||console['error']('ASSERT\x20FAI'+'LED:\x20',..._0x464ef2);}static['assertDest'+'royed'](_0x4dfd4c){var _0x252413;if(_0x4dfd4c!=null&&_0x4dfd4c['__alreadyD'+'estroyed']){const _0x39cb65='['+((_0x252413=_0x4dfd4c['constructo'+'r'])==null?void(-0x1c3c+0x20cc+0x124*-0x4):_0x252413['name'])+(']\x20with\x20nam'+'e\x20[')+_0x4dfd4c['name']+(']\x20has\x20alre'+'ady\x20been\x20d'+'estroyed,\x20'+'and\x20cannot'+'\x20be\x20used.');Vt['_loggedMes'+'sages']['has'](_0x39cb65)||(Vt['_loggedMes'+'sages']['add'](_0x39cb65),console['error']('ASSERT\x20FAI'+'LED:\x20',_0x39cb65,_0x4dfd4c));}}static['call'](_0x33d326){_0x33d326();}static['log'](..._0x9bafa8){console['log'](..._0x9bafa8);}static['logOnce'](_0x49381b,..._0x2fcd78){Vt['_loggedMes'+'sages']['has'](_0x49381b)||(Vt['_loggedMes'+'sages']['add'](_0x49381b),console['log'](_0x49381b,..._0x2fcd78));}static['warn'](..._0x5a5730){console['warn'](..._0x5a5730);}static['warnOnce'](_0x44f4d3,..._0x2f2a43){Vt['_loggedMes'+'sages']['has'](_0x44f4d3)||(Vt['_loggedMes'+'sages']['add'](_0x44f4d3),console['warn'](_0x44f4d3,..._0x2f2a43));}static['error'](..._0x5639f3){console['error'](..._0x5639f3);}static['errorOnce'](_0x5e8f25,..._0x4f9ac3){Vt['_loggedMes'+'sages']['has'](_0x5e8f25)||(Vt['_loggedMes'+'sages']['add'](_0x5e8f25),console['error'](_0x5e8f25,..._0x4f9ac3));}static['trace'](_0x46dd99,..._0x4e9451){mi['get'](_0x46dd99)&&(console['groupColla'+'psed'](_0x46dd99['padEnd'](-0x7c6*-0x5+0x6*0xcf+-0x4c*0x93,'\x20')+'|',..._0x4e9451),console['groupEnd']());}};h(Vt,'_loggedMes'+'sages',new Set());let w=Vt;class Ea{static['setName'](_0x55ae7f,_0x3ea54f){_0x55ae7f&&(_0x55ae7f['name']=_0x3ea54f);}static['setLabel'](_0x28398a,_0x66acbd){_0x28398a&&(_0x28398a['label']=_0x66acbd);}static['setDestroy'+'ed'](_0x12c307){_0x12c307&&(_0x12c307['__alreadyD'+'estroyed']=!(-0x2154+-0x1*-0x471+0x1ce3));}}class dx{constructor(_0x3f734b,_0x5d38c7,_0x2b9728,_0x1981ed,_0x37cbab=!(0x1d*0xc7+0x24b7+-0x3b41)){h(this,'handler'),h(this,'name'),h(this,'callback'),h(this,'scope'),h(this,'_once'),h(this,'_removed',!(-0x1976+0x1*-0xf05+0x4*0xa1f)),(this['handler']=_0x3f734b,this['name']=_0x5d38c7,this['callback']=_0x2b9728,this['scope']=_0x1981ed,this['_once']=_0x37cbab);}['off'](){this['_removed']||this['handler']['offByHandl'+'e'](this);}['on'](_0x2e7066,_0x5f468,_0x38880c=this){return w['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.on\x20is\x20d'+'eprecated,'+'\x20subscribe'+'\x20to\x20an\x20eve'+'nt\x20from\x20Ev'+'entHandler'+'\x20directly\x20'+'instead.'),this['handler']['_addCallba'+'ck'](_0x2e7066,_0x5f468,_0x38880c,!(-0x73d*0x1+-0x15*-0x18d+-0x1953));}['once'](_0x2bc978,_0x293539,_0x2e777a=this){return w['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.once\x20is'+'\x20deprecate'+'d,\x20subscri'+'be\x20to\x20an\x20e'+'vent\x20from\x20'+'EventHandl'+'er\x20directl'+'y\x20instead.'),this['handler']['_addCallba'+'ck'](_0x2bc978,_0x293539,_0x2e777a,!(0x1e79+0x187e+-0x36f7*0x1));}set['removed'](_0x1c6a47){_0x1c6a47&&(this['_removed']=!(0x1e0f+-0x379*0x8+0x35*-0xb));}get['removed'](){return this['_removed'];}['toJSON'](_0x10c0ad){}}class me{constructor(){h(this,'_callbacks',new Map()),h(this,'_callbackA'+'ctive',new Map());}['initEventH'+'andler'](){this['_callbacks']=new Map(),this['_callbackA'+'ctive']=new Map();}['_addCallba'+'ck'](_0x275b65,_0x9a4145,_0xa42511,_0x5247ba){if((!_0x275b65||typeof _0x275b65!='string'||!_0x9a4145)&&console['warn']('EventHandl'+'er:\x20subscr'+'ibing\x20to\x20a'+'n\x20event\x20('+_0x275b65+(')\x20with\x20mis'+'sing\x20argum'+'ents'),_0x9a4145),this['_callbacks']['has'](_0x275b65)||this['_callbacks']['set'](_0x275b65,[]),this['_callbackA'+'ctive']['has'](_0x275b65)){const _0x12e93a=this['_callbackA'+'ctive']['get'](_0x275b65);_0x12e93a&&_0x12e93a===this['_callbacks']['get'](_0x275b65)&&this['_callbackA'+'ctive']['set'](_0x275b65,_0x12e93a['slice']());}const _0x4c0064=new dx(this,_0x275b65,_0x9a4145,_0xa42511,_0x5247ba);return this['_callbacks']['get'](_0x275b65)['push'](_0x4c0064),_0x4c0064;}['on'](_0x3fac61,_0xd93a27,_0xac69f8=this){return this['_addCallba'+'ck'](_0x3fac61,_0xd93a27,_0xac69f8,!(-0x655*-0x4+0xd63+-0x1*0x26b6));}['once'](_0x4dbf92,_0x272106,_0x44fb52=this){return this['_addCallba'+'ck'](_0x4dbf92,_0x272106,_0x44fb52,!(-0x7d8*0x2+-0x2f3*0x8+0x2748));}['off'](_0x2ed4ac,_0x5ac145,_0xc43f07){if(_0x2ed4ac)this['_callbackA'+'ctive']['has'](_0x2ed4ac)&&this['_callbackA'+'ctive']['get'](_0x2ed4ac)===this['_callbacks']['get'](_0x2ed4ac)&&this['_callbackA'+'ctive']['set'](_0x2ed4ac,this['_callbackA'+'ctive']['get'](_0x2ed4ac)['slice']());else{for(const [_0x4a4b49,_0x21488c]of this['_callbackA'+'ctive'])this['_callbacks']['has'](_0x4a4b49)&&this['_callbacks']['get'](_0x4a4b49)===_0x21488c&&this['_callbackA'+'ctive']['set'](_0x4a4b49,_0x21488c['slice']());}if(_0x2ed4ac){if(_0x5ac145){const _0x44d650=this['_callbacks']['get'](_0x2ed4ac);if(!_0x44d650)return this;for(let _0x2649de=-0x1e07+0x15c9+0x41f*0x2;_0x2649de<_0x44d650['length'];_0x2649de++)_0x44d650[_0x2649de]['callback']===_0x5ac145&&(_0xc43f07&&_0x44d650[_0x2649de]['scope']!==_0xc43f07||(_0x44d650[_0x2649de]['removed']=!(-0x1f32+-0x167c+0x35ae),_0x44d650['splice'](_0x2649de,-0x24f4+-0x1*-0x1639+0xebc),_0x2649de--));_0x44d650['length']===0x502+-0x1*-0x407+-0x909&&this['_callbacks']['delete'](_0x2ed4ac);}else{const _0x129f67=this['_callbacks']['get'](_0x2ed4ac);if(_0x129f67){for(let _0x481a18=-0xbaf+-0x1795+0x2344;_0x481a18<_0x129f67['length'];_0x481a18++)_0x129f67[_0x481a18]['removed']=!(-0x222+-0x1e3e+0x1*0x2060);this['_callbacks']['delete'](_0x2ed4ac);}}}else{for(const _0xc07826 of this['_callbacks']['values']())for(let _0x52db6b=0xf*-0x25b+-0x1879+0x3bce;_0x52db6b<_0xc07826['length'];_0x52db6b++)_0xc07826[_0x52db6b]['removed']=!(-0x1*0x23d5+-0x1*-0xd65+0x2*0xb38);this['_callbacks']['clear']();}return this;}['offByHandl'+'e'](_0x590289){const _0x54f642=_0x590289['name'];_0x590289['removed']=!(0x1e4b+0x904+0x1d*-0x15b),this['_callbackA'+'ctive']['has'](_0x54f642)&&this['_callbackA'+'ctive']['get'](_0x54f642)===this['_callbacks']['get'](_0x54f642)&&this['_callbackA'+'ctive']['set'](_0x54f642,this['_callbackA'+'ctive']['get'](_0x54f642)['slice']());const _0x5d29ea=this['_callbacks']['get'](_0x54f642);if(!_0x5d29ea)return this;const _0x2627e2=_0x5d29ea['indexOf'](_0x590289);return _0x2627e2!==-(0x646+0x3*0x907+-0x215a)&&(_0x5d29ea['splice'](_0x2627e2,-0x29*-0x5d+-0x791*0x2+-0x2*-0x1f),_0x5d29ea['length']===-0x71a+-0x1*0x2405+0x2b1f&&this['_callbacks']['delete'](_0x54f642)),this;}['fire'](_0x19f4ec,_0x3daa3c,_0x157a95,_0x32d93a,_0x15ca30,_0x5e9d8f,_0x3bd28b,_0x2beac5,_0x486fa8){if(!_0x19f4ec)return this;const _0x359663=this['_callbacks']['get'](_0x19f4ec);if(!_0x359663)return this;let _0x168b9e;this['_callbackA'+'ctive']['has'](_0x19f4ec)?this['_callbackA'+'ctive']['get'](_0x19f4ec)!==_0x359663&&(_0x168b9e=_0x359663['slice']()):this['_callbackA'+'ctive']['set'](_0x19f4ec,_0x359663);for(let _0x46cc40=-0x10*0x146+-0x859*-0x1+0xc07*0x1;(_0x168b9e||this['_callbackA'+'ctive']['get'](_0x19f4ec))&&_0x46cc40<(_0x168b9e||this['_callbackA'+'ctive']['get'](_0x19f4ec))['length'];_0x46cc40++){const _0x4a0105=(_0x168b9e||this['_callbackA'+'ctive']['get'](_0x19f4ec))[_0x46cc40];if(_0x4a0105['callback']&&(_0x4a0105['callback']['call'](_0x4a0105['scope'],_0x3daa3c,_0x157a95,_0x32d93a,_0x15ca30,_0x5e9d8f,_0x3bd28b,_0x2beac5,_0x486fa8),_0x4a0105['_once'])){const _0x2e8ed2=this['_callbacks']['get'](_0x19f4ec),_0x155e54=_0x2e8ed2?_0x2e8ed2['indexOf'](_0x4a0105):-(0x23b6+-0x6*0x305+-0x13*0xed);if(_0x155e54!==-(0x1c3c+-0x18a*-0x1+-0x1*0x1dc5)){this['_callbackA'+'ctive']['get'](_0x19f4ec)===_0x2e8ed2&&this['_callbackA'+'ctive']['set'](_0x19f4ec,this['_callbackA'+'ctive']['get'](_0x19f4ec)['slice']());const _0x17126e=this['_callbacks']['get'](_0x19f4ec);if(!_0x17126e)continue;_0x17126e[_0x155e54]['removed']=!(0x15*-0x71+-0x3*-0x37c+-0x12f),_0x17126e['splice'](_0x155e54,-0x16a3*0x1+0x2264+-0xbc0),_0x17126e['length']===-0x194*0xe+-0xfa*-0x23+-0xc16&&this['_callbacks']['delete'](_0x19f4ec);}}}return _0x168b9e||this['_callbackA'+'ctive']['delete'](_0x19f4ec),this;}['hasEvent'](_0x45cc64){var _0x44b3f1;return!!((_0x44b3f1=this['_callbacks']['get'](_0x45cc64))!=null&&_0x44b3f1['length']);}}class fx{constructor(){h(this,'_list',[]),h(this,'_index',{});}['push'](_0x402cab,_0x19f383){if(this['_index'][_0x402cab])throw Error('Key\x20alread'+'y\x20in\x20index'+'\x20'+_0x402cab);const _0x3b6734=this['_list']['push'](_0x19f383)-(0x19d5*0x1+-0x3*0xbfb+0x35f*0x3);this['_index'][_0x402cab]=_0x3b6734;}['has'](_0x271771){return this['_index'][_0x271771]!==void(-0x578+-0x1487*0x1+0x79*0x37);}['get'](_0x57cd6c){const _0x5118ee=this['_index'][_0x57cd6c];return _0x5118ee!==void(0x4b5*0x3+-0x9*-0x365+-0xc*0x3b9)?this['_list'][_0x5118ee]:null;}['remove'](_0x3accc0){const _0xb2986f=this['_index'][_0x3accc0];if(_0xb2986f!==void(-0x224e+0x104d*-0x1+0x1*0x329b)){this['_list']['splice'](_0xb2986f,-0x11c7+-0x9*-0x61+0xe5f),delete this['_index'][_0x3accc0];for(_0x3accc0 in this['_index']){const _0x5679d2=this['_index'][_0x3accc0];_0x5679d2>_0xb2986f&&(this['_index'][_0x3accc0]=_0x5679d2-(-0x19e7*-0x1+-0x4*-0x55e+0xfca*-0x3));}return!(0x18c4*0x1+-0x200c+0x748);}return!(0x1f2b+-0x15a2+0x4c4*-0x2);}['list'](){return this['_list'];}['clear'](){this['_list']['length']=-0x1da7+0x1*-0x1166+0xa5*0x49;for(const _0xd47f2c in this['_index'])delete this['_index'][_0xd47f2c];}}const ux=_0xced460=>{const _0x24a003={};let _0x5e88a6=_0x24a003;return()=>(_0x5e88a6===_0x24a003&&(_0x5e88a6=_0xced460()),_0x5e88a6);},ii=class ii{static['loadScript'](_0x18b599,_0x554828){const _0x31a559=document['createElem'+'ent']('script');_0x31a559['setAttribu'+'te']('src',_0x18b599),_0x31a559['onload']=()=>{_0x554828(null);},_0x31a559['onerror']=()=>{_0x554828('Failed\x20to\x20'+'load\x20scrip'+'t=\x27'+_0x18b599+'\x27');},document['body']['appendChil'+'d'](_0x31a559);}static['loadWasm'](_0x106eac,_0x42fca4,_0x4c9318){const _0x4e52e1=ii['wasmSuppor'+'ted']()&&_0x42fca4['glueUrl']&&_0x42fca4['wasmUrl']?_0x42fca4['glueUrl']:_0x42fca4['fallbackUr'+'l'];_0x4e52e1?ii['loadScript'](_0x4e52e1,_0x187cf0=>{if(_0x187cf0)_0x4c9318(_0x187cf0,null);else{const _0xc10035=window[_0x106eac];window[_0x106eac]=void(-0x55*-0x52+-0xdfa+-0x40*0x35),_0xc10035({'locateFile':()=>_0x42fca4['wasmUrl'],'onAbort':()=>{_0x4c9318('wasm\x20modul'+'e\x20aborted.');}})['then'](_0x3dbe09=>{_0x4c9318(null,_0x3dbe09);});}}):_0x4c9318('No\x20support'+'ed\x20wasm\x20mo'+'dules\x20foun'+'d.',null);}static['getModule'](_0x4207d8){return ii['modules']['hasOwnProp'+'erty'](_0x4207d8)||(ii['modules'][_0x4207d8]={'config':null,'initializing':!(-0x7bd+0x1*0x21b3+-0x19f5),'instance':null,'callbacks':[]}),ii['modules'][_0x4207d8];}static['initialize'](_0x3ce7ac,_0x14ccf5){if(_0x14ccf5['initializi'+'ng'])return;const _0x1aa35c=_0x14ccf5['config'];(_0x1aa35c['glueUrl']||_0x1aa35c['wasmUrl']||_0x1aa35c['fallbackUr'+'l'])&&(_0x14ccf5['initializi'+'ng']=!(0x2614+0x11*-0x164+-0x1c*0x84),ii['loadWasm'](_0x3ce7ac,_0x1aa35c,(_0x3f1179,_0x2b8f9b)=>{_0x3f1179?_0x1aa35c['errorHandl'+'er']?_0x1aa35c['errorHandl'+'er'](_0x3f1179):console['error']('failed\x20to\x20'+'initialize'+'\x20module='+_0x3ce7ac+'\x20error='+_0x3f1179):(_0x14ccf5['instance']=_0x2b8f9b,_0x14ccf5['callbacks']['forEach'](_0x3688c1=>{_0x3688c1(_0x2b8f9b);}));}));}};h(ii,'modules',{}),h(ii,'wasmSuppor'+'ted',ux(()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x1c9f4f=new WebAssembly['Module'](Uint8Array['of'](0x137b+-0x1ad5+0x75a*0x1,0x8a5*0x3+-0x95*0x20+0x1*-0x6ee,0x529*-0x5+0x58*-0x42+-0x105*-0x30,-0x166b+-0x7a*-0x26+0x4bc,-0x1dbf+-0x353+0x2113,-0xb*-0x11+0x461+-0x147*0x4,0x481+0x1001+-0x1482,0x3a5*-0x5+-0xbe5*0x3+0x35e8));if(_0x1c9f4f instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x1c9f4f)instanceof WebAssembly['Instance'];}}catch{}return!(-0xf16+0x195d+-0xa46);}));let Yr=ii;class YS{static['setConfig'](_0x4e4be8,_0x16ef01){const _0xcc6e84=Yr['getModule'](_0x4e4be8);_0xcc6e84['config']=_0x16ef01,_0xcc6e84['callbacks']['length']>0xa53+-0x16f*-0xd+0x1*-0x1cf6&&Yr['initialize'](_0x4e4be8,_0xcc6e84);}static['getConfig'](_0x5a9170){var _0x461211,_0x4ad2c5;return(_0x4ad2c5=(_0x461211=Yr['modules'])==null?void(-0x4*0x4d6+0x4c*-0x4+-0x6*-0x36c):_0x461211[_0x5a9170])==null?void(-0x11*0x11+0x119+0x8):_0x4ad2c5['config'];}static['getInstanc'+'e'](_0x2d90c2,_0x1790a3){const _0x48287a=Yr['getModule'](_0x2d90c2);_0x48287a['instance']?_0x1790a3(_0x48287a['instance']):(_0x48287a['callbacks']['push'](_0x1790a3),_0x48287a['config']&&Yr['initialize'](_0x2d90c2,_0x48287a));}}class KS{constructor(_0x15181f){h(this,'arraybuffe'+'r'),h(this,'dataView'),h(this,'offset',0x21ad*0x1+0x6b2+-0x285f),(this['arraybuffe'+'r']=_0x15181f,this['dataView']=new DataView(_0x15181f));}get['remainingB'+'ytes'](){return this['dataView']['byteLength']-this['offset'];}['reset'](_0x438351=-0x19*-0x130+0x71e+-0x24ce){this['offset']=_0x438351;}['skip'](_0x837d08){this['offset']+=_0x837d08;}['align'](_0x5b5920){this['offset']=this['offset']+_0x5b5920-(-0x186d+-0x347+0x1bb5)&~(_0x5b5920-(0x35a*0xb+0x2*-0xef1+-0x6fb));}['_inc'](_0x58b33c){return this['offset']+=_0x58b33c,this['offset']-_0x58b33c;}['readChar'](){return String['fromCharCo'+'de'](this['dataView']['getUint8'](this['offset']++));}['readChars'](_0x389860){let _0x3555a8='';for(let _0x5b900d=-0x1*0x1f46+-0x1*-0x1317+0xc2f;_0x5b900d<_0x389860;++_0x5b900d)_0x3555a8+=this['readChar']();return _0x3555a8;}['readU8'](){return this['dataView']['getUint8'](this['offset']++);}['readU16'](){return this['dataView']['getUint16'](this['_inc'](0x127e+-0x13c5+0x149),!(0x383+-0x177b+0x1aa*0xc));}['readU32'](){return this['dataView']['getUint32'](this['_inc'](0x103c+0xf98+-0x1fd0),!(-0x4ea+-0x52*0x19+-0x1*-0xcec));}['readU64'](){return this['readU32']()+(0x1294+0x2c2*-0x1+-0xfd0*0x1)**(0x21b5+-0x1*0x20a1+-0xf4)*this['readU32']();}['readU32be'](){return this['dataView']['getUint32'](this['_inc'](0x193a+0x2628+-0x3f5e*0x1),!(-0x2086+-0x78e+0x2815));}['readArray'](_0x1d3d72){for(let _0x445b5f=0x11a4*-0x1+0x443*-0x1+0x15e7;_0x445b5f<_0x1d3d72['length'];++_0x445b5f)_0x1d3d72[_0x445b5f]=this['readU8']();}['readLine'](){const _0x2fc137=this['dataView'];let _0x2af36c='';for(;!(this['offset']>=_0x2fc137['byteLength']);){const _0x53b6ce=String['fromCharCo'+'de'](this['readU8']());if(_0x53b6ce==='\x0a')break;_0x2af36c+=_0x53b6ce;}return _0x2af36c;}}class oh{constructor(_0x59b248){h(this,'items',[]),h(this,'length',0x657+-0x21b1*0x1+0x1b5a),h(this,'loopIndex',-(0x9c3+0x40*0x22+-0xf6*0x13)),h(this,'_sortBy'),h(this,'_sortHandl'+'er'),(this['_sortBy']=_0x59b248['sortBy'],this['_sortHandl'+'er']=this['_doSort']['bind'](this));}['_binarySea'+'rch'](_0x83b1fc){let _0x7a538c=0x135+-0x21*0x5f+0xb0a,_0x5085ff=this['items']['length']-(0x3cb*0x2+0x2*0x6fb+0x158b*-0x1);const _0x290748=_0x83b1fc[this['_sortBy']];let _0x480719,_0x18feeb;for(;_0x7a538c<=_0x5085ff;)_0x480719=Math['floor']((_0x7a538c+_0x5085ff)/(-0x5*-0x13a+-0x23*-0xef+-0x26cd)),_0x18feeb=this['items'][_0x480719][this['_sortBy']],_0x18feeb<=_0x290748?_0x7a538c=_0x480719+(0x128+-0x1*-0x101+-0x228):_0x18feeb>_0x290748&&(_0x5085ff=_0x480719-(0xe12+0x1292+0x1*-0x20a3));return _0x7a538c;}['_doSort'](_0x1293e1,_0x1494a6){const _0x480d41=this['_sortBy'];return _0x1293e1[_0x480d41]-_0x1494a6[_0x480d41];}['insert'](_0x112d00){const _0x56ff52=this['_binarySea'+'rch'](_0x112d00);this['items']['splice'](_0x56ff52,0x15c6+0x1*-0x1e23+-0x1*-0x85d,_0x112d00),this['length']++,this['loopIndex']>=_0x56ff52&&this['loopIndex']++;}['append'](_0x30b030){this['items']['push'](_0x30b030),this['length']++;}['remove'](_0x115d89){const _0x270d83=this['items']['indexOf'](_0x115d89);_0x270d83<0x1ca*-0xb+0x1*-0x1507+-0x28b5*-0x1||(this['items']['splice'](_0x270d83,-0x26de+0x1*-0x1619+0x3cf8),this['length']--,this['loopIndex']>=_0x270d83&&this['loopIndex']--);}['sort'](){const _0x17f2a0=this['loopIndex']>=0xa9*0x8+-0x9*0x355+0x18b5*0x1?this['items'][this['loopIndex']]:null;this['items']['sort'](this['_sortHandl'+'er']),_0x17f2a0!==null&&(this['loopIndex']=this['items']['indexOf'](_0x17f2a0));}}class Oo extends me{constructor(_0x41005a){super(),h(this,'_index',{}),h(this,'_list',[]),this['_parent']=_0x41005a;}['add'](..._0x40773c){let _0x32c499=!(0x11bf*-0x2+-0x689*-0x1+-0x2a2*-0xb);const _0x4e6723=this['_processAr'+'guments'](_0x40773c,!(0xe7b+-0xb*0x175+0xb*0x24));if(!_0x4e6723['length'])return _0x32c499;for(let _0x3df70d=0x1244+-0x156+0x877*-0x2;_0x3df70d<_0x4e6723['length'];_0x3df70d++)this['_index'][_0x4e6723[_0x3df70d]]||(_0x32c499=!(0x1*0x16e4+0x39c+0x8*-0x350),this['_index'][_0x4e6723[_0x3df70d]]=!(0x1*-0x226c+0x1c9+0x20a3),this['_list']['push'](_0x4e6723[_0x3df70d]),this['fire']('add',_0x4e6723[_0x3df70d],this['_parent']));return _0x32c499&&this['fire']('change',this['_parent']),_0x32c499;}['remove'](..._0x3ca47d){let _0x5963b9=!(-0x6d*-0x1b+-0x1*-0xe67+-0x19e5);if(!this['_list']['length'])return _0x5963b9;const _0x136c9e=this['_processAr'+'guments'](_0x3ca47d,!(-0x14*-0xe2+-0x2694+0x14ec));if(!_0x136c9e['length'])return _0x5963b9;for(let _0x4ca3b0=0x2*0xbd4+0x1*0x26de+-0x3e86;_0x4ca3b0<_0x136c9e['length'];_0x4ca3b0++)this['_index'][_0x136c9e[_0x4ca3b0]]&&(_0x5963b9=!(0x264b+-0x23a8+-0x2a3),delete this['_index'][_0x136c9e[_0x4ca3b0]],this['_list']['splice'](this['_list']['indexOf'](_0x136c9e[_0x4ca3b0]),0x118b+0x1f27+-0x30b1),this['fire']('remove',_0x136c9e[_0x4ca3b0],this['_parent']));return _0x5963b9&&this['fire']('change',this['_parent']),_0x5963b9;}['clear'](){if(!this['_list']['length'])return;const _0xaf291b=this['_list']['slice'](-0x8*-0x17e+0xe1+-0xc1*0x11);this['_list']=[],this['_index']={};for(let _0x3de9e1=0x21e0*-0x1+0x611*0x2+0x15be;_0x3de9e1<_0xaf291b['length'];_0x3de9e1++)this['fire']('remove',_0xaf291b[_0x3de9e1],this['_parent']);this['fire']('change',this['_parent']);}['has'](..._0x3c1acb){return this['_list']['length']?this['_has'](this['_processAr'+'guments'](_0x3c1acb)):!(0x20d*-0xd+-0x10a7+-0x2b51*-0x1);}['_has'](_0x354c26){if(!this['_list']['length']||!_0x354c26['length'])return!(0xee3+-0x1*0x1cf+0x1*-0xd13);for(let _0x3e91b7=-0x48e+0x111*0x1+0x2f*0x13;_0x3e91b7<_0x354c26['length'];_0x3e91b7++)if(_0x354c26[_0x3e91b7]['length']===-0x10ab+-0x97a*-0x1+0x266*0x3){if(this['_index'][_0x354c26[_0x3e91b7][0x2517+0x158e+-0x3aa5]])return!(0x14d4+-0x25af+0x10db);}else{let _0x558986=!(0x20e1+0x1*-0x18e4+-0x199*0x5);for(let _0x16fd2b=-0x76e+0x18*-0x86+0x9ff*0x2;_0x16fd2b<_0x354c26[_0x3e91b7]['length'];_0x16fd2b++)if(!this['_index'][_0x354c26[_0x3e91b7][_0x16fd2b]]){_0x558986=!(-0x43*0x8e+-0xee3+-0x6*-0x8ad);break;}if(_0x558986)return!(-0x26d3+0xcf1*0x2+0xcf1);}return!(0x8c*0x19+-0x1477+0x15c*0x5);}['list'](){return this['_list']['slice'](0x26c+0x2333+0x259f*-0x1);}['_processAr'+'guments'](_0x4f325d,_0x26a2c8){const _0x32aabe=[];let _0x10f764=[];if(!_0x4f325d||!_0x4f325d['length'])return _0x32aabe;for(let _0x3501f2=0x1*-0x1844+0x1*0x113f+0x705;_0x3501f2<_0x4f325d['length'];_0x3501f2++)if(_0x4f325d[_0x3501f2]instanceof Array){_0x26a2c8||(_0x10f764=[]);for(let _0xe4658d=0x1e12+0x1*0x1687+-0x3499;_0xe4658d<_0x4f325d[_0x3501f2]['length'];_0xe4658d++)typeof _0x4f325d[_0x3501f2][_0xe4658d]=='string'&&(_0x26a2c8?_0x32aabe['push'](_0x4f325d[_0x3501f2][_0xe4658d]):_0x10f764['push'](_0x4f325d[_0x3501f2][_0xe4658d]));!_0x26a2c8&&_0x10f764['length']&&_0x32aabe['push'](_0x10f764);}else typeof _0x4f325d[_0x3501f2]=='string'&&(_0x26a2c8?_0x32aabe['push'](_0x4f325d[_0x3501f2]):_0x32aabe['push']([_0x4f325d[_0x3501f2]]));return _0x32aabe;}get['size'](){return this['_list']['length'];}}h(Oo,'EVENT_ADD','add'),h(Oo,'EVENT_REMO'+'VE','remove'),h(Oo,'EVENT_CHAN'+'GE','change');const de=typeof window<'u'&&window['performanc'+'e']&&window['performanc'+'e']['now']?performance['now']['bind'](performance):Date['now'],px=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Rd{constructor(_0x1855cb){h(this,'scheme'),h(this,'authority'),h(this,'path'),h(this,'query'),h(this,'fragment');const _0x5688a6=_0x1855cb['match'](px);this['scheme']=_0x5688a6[-0x16c9+-0x339+-0x2*-0xd02],this['authority']=_0x5688a6[-0x602*0x5+0x20c*-0x7+0x2c62],this['path']=_0x5688a6[-0x2340+0x1*0x2b7+-0x6*-0x56d],this['query']=_0x5688a6[0x1*0x1217+-0x2323+0x1113],this['fragment']=_0x5688a6[-0x3b*0xa9+-0x224d+0x1*0x4949];}['toString'](){let _0x2f4427='';return this['scheme']&&(_0x2f4427+=this['scheme']+':'),this['authority']&&(_0x2f4427+='//'+this['authority']),_0x2f4427+=this['path'],this['query']&&(_0x2f4427+='?'+this['query']),this['fragment']&&(_0x2f4427+='#'+this['fragment']),_0x2f4427;}['getQuery'](){const _0x5df79c={};if(this['query']){const _0xbca2e1=decodeURIComponent(this['query'])['split']('&');for(const _0x3380e8 of _0xbca2e1){const _0x16d4de=_0x3380e8['split']('=');_0x5df79c[_0x16d4de[-0x13*0x26+-0x1a6b+-0x1d3d*-0x1]]=_0x16d4de[0xf9b+-0x1*-0x1349+-0x22e3*0x1];}}return _0x5df79c;}['setQuery'](_0x1759d3){let _0x7d1f80='';for(const _0x41ad59 in _0x1759d3)_0x1759d3['hasOwnProp'+'erty'](_0x41ad59)&&(_0x7d1f80!==''&&(_0x7d1f80+='&'),_0x7d1f80+=encodeURIComponent(_0x41ad59)+'='+encodeURIComponent(_0x1759d3[_0x41ad59]));this['query']=_0x7d1f80;}}const mx=-0x1a4b+0x24c+0x17ff,tp=-0xb6c+-0x1*0xf32+0x2f*0x91,Nm=0xb3f*-0x1+-0x19bd+0x2500,_x=0x3*0x4dc+-0x5d1+0x2*-0x45f,Y={'DEG_TO_RAD':Math['PI']/(-0x394*0x2+-0x1a*0x109+0x22c6),'RAD_TO_DEG':(-0x1*-0x213+-0x8a6+0x1*0x747)/Math['PI'],'clamp'(_0x56d839,_0x15157c,_0x3393b8){return _0x56d839>=_0x3393b8?_0x3393b8:_0x56d839<=_0x15157c?_0x15157c:_0x56d839;},'intToBytes24'(_0x14290d){const _0x33f2c0=_0x14290d>>0x6*0x49e+-0xc3b+-0xf69&-0x180a+0xc18+0xcf1,_0x1d3aac=_0x14290d>>-0x10*-0xc5+-0x1777+0xb2f&0x4c0+0x18dd+-0x1c9e,_0x6516dc=_0x14290d&-0x1110+0x5*0xb6+0xe81;return[_0x33f2c0,_0x1d3aac,_0x6516dc];},'intToBytes32'(_0x46367c){const _0x20c11f=_0x46367c>>0xfc4+-0x142d*0x1+0x481*0x1&-0x62d+0x1733*-0x1+-0x19*-0x137,_0x19f68b=_0x46367c>>0x20ae+-0x1cda+-0x3c4&0xebc+-0x486+-0x937,_0x105756=_0x46367c>>-0x20a7+-0xc*0x2b4+0x411f&-0x78d+0x3*-0xcf7+0x2f71,_0x387548=_0x46367c&0x25b8+0xb3a*-0x3+-0x1*0x30b;return[_0x20c11f,_0x19f68b,_0x105756,_0x387548];},'bytesToInt24'(_0x5017dd,_0x393b2e,_0x44d8e0){return _0x5017dd['length']&&(_0x44d8e0=_0x5017dd[-0x3*0xafa+-0x56a*-0x1+0x1*0x1b86],_0x393b2e=_0x5017dd[0x3d2+0x1c21+-0x1ff2],_0x5017dd=_0x5017dd[0x180d+0x3*0x5b4+-0x2929]),_0x5017dd<<-0x19fd+-0xde2*0x1+-0x27ef*-0x1|_0x393b2e<<-0x718*0x2+0x203b+0x35*-0x57|_0x44d8e0;},'bytesToInt32'(_0x14ae14,_0xc2fc4,_0x41c696,_0x674b0b){return _0x14ae14['length']&&(_0x674b0b=_0x14ae14[0x93a+-0x1f93+0x165c],_0x41c696=_0x14ae14[0x2048+0x1bc3+0x6d*-0x8d],_0xc2fc4=_0x14ae14[0x7c6*0x2+0x5*0x59e+-0x11*0x291],_0x14ae14=_0x14ae14[0x592*0x5+-0x1d1d*-0x1+-0x38f7*0x1]),(_0x14ae14<<0x2ce*-0x7+0x2*-0x508+0x6*0x4f7|_0xc2fc4<<0x8e1*0x3+-0x6b*-0x59+-0x1fe3*0x2|_0x41c696<<-0x2358+0x584*0x3+0x12d4|_0x674b0b)>>>0x2540+0xcf4*-0x3+0x19c*0x1;},'lerp'(_0x4d061b,_0x2b3f64,_0x4f4ff0){return _0x4d061b+(_0x2b3f64-_0x4d061b)*Y['clamp'](_0x4f4ff0,-0x1*-0x226a+-0x2*0x1023+0x4*-0x89,-0x1*0xa00+0x1190+0x5*-0x183);},'lerpAngle'(_0x2c0af4,_0x45db9a,_0x3f9819){return _0x45db9a-_0x2c0af4>-0x71*-0x2b+0x118a+-0x23d1&&(_0x45db9a-=-0xece+-0x1*0xf51+0x1f87),_0x45db9a-_0x2c0af4<-(0x162b*-0x1+0x3b*-0x6b+-0xbe2*-0x4)&&(_0x45db9a+=-0x11ae+-0x23bc+-0x2*-0x1b69),Y['lerp'](_0x2c0af4,_0x45db9a,Y['clamp'](_0x3f9819,0x29*-0xdf+-0x76f+-0x1593*-0x2,0x35*0x67+-0x871*0x1+0x44b*-0x3));},'powerOfTwo'(_0x1248f0){return _0x1248f0!==0x219*0x2+0x9ee+0x1c4*-0x8&&!(_0x1248f0&_0x1248f0-(-0x1883*0x1+0x1af8+-0x274));},'nextPowerOfTwo'(_0x3db67a){return _0x3db67a--,_0x3db67a|=_0x3db67a>>-0x2ad+0x1c5a*0x1+-0x1*0x19ac,_0x3db67a|=_0x3db67a>>-0x1211+0x1202+0x11,_0x3db67a|=_0x3db67a>>-0x182+-0x337+0x4bd,_0x3db67a|=_0x3db67a>>-0x234f+0x2*-0xf7d+0x4251,_0x3db67a|=_0x3db67a>>0x3*-0x161+0x15b1+0x8bf*-0x2,_0x3db67a++,_0x3db67a;},'nearestPowerOfTwo'(_0x174d31){return Math['pow'](0x2b6+-0xeac+0xbf8,Math['round'](Math['log2'](_0x174d31)));},'random'(_0x2d4bf1,_0x1c5361){const _0x121e47=_0x1c5361-_0x2d4bf1;return Math['random']()*_0x121e47+_0x2d4bf1;},'smoothstep'(_0x506311,_0x2a9deb,_0xe48e53){return _0xe48e53<=_0x506311?-0x4df*0x6+0x32c+0x1a0e:_0xe48e53>=_0x2a9deb?0x1*0xc91+0x442+-0x10d2:(_0xe48e53=(_0xe48e53-_0x506311)/(_0x2a9deb-_0x506311),_0xe48e53*_0xe48e53*(-0x3cb+0x538+-0x16a-(-0x1ffc+0xd0*0xf+-0x1fb*-0xa)*_0xe48e53));},'smootherstep'(_0x1cc9fc,_0x5bfb55,_0x268bac){return _0x268bac<=_0x1cc9fc?0x11*-0x191+0x196a+0x1*0x137:_0x268bac>=_0x5bfb55?-0xbe7*-0x2+-0x164a+0x9*-0x2b:(_0x268bac=(_0x268bac-_0x1cc9fc)/(_0x5bfb55-_0x1cc9fc),_0x268bac*_0x268bac*_0x268bac*(_0x268bac*(_0x268bac*(0x88*0x28+0xc84+0xe*-0x269)-(-0x526*-0x1+0x531+-0xa48))+(-0x26d0+0x3*-0x949+0x42b5)));},'roundUp'(_0x4a7898,_0x3c0efd){return _0x3c0efd===-0x2*-0x9a4+-0x38b*0x6+-0xfd*-0x2?_0x4a7898:Math['ceil'](_0x4a7898/_0x3c0efd)*_0x3c0efd;},'between'(_0x24cd6d,_0x4e25ed,_0x4ff000,_0x4e24fc){const _0x3afdfd=Math['min'](_0x4e25ed,_0x4ff000),_0x8f84b7=Math['max'](_0x4e25ed,_0x4ff000);return _0x4e24fc?_0x24cd6d>=_0x3afdfd&&_0x24cd6d<=_0x8f84b7:_0x24cd6d>_0x3afdfd&&_0x24cd6d<_0x8f84b7;}},Tt=class Tt{constructor(_0x326de0=-0x893*0x1+-0x2b*0x91+0xf*0x232,_0x5b0972=0xa*0x16c+-0x3a0*-0x7+-0x2798,_0x42940f=-0x9+-0x3*0x163+-0x3*-0x166,_0x1e9738=-0x1b65+-0xce1*0x3+0x4209){h(this,'r'),h(this,'g'),h(this,'b'),h(this,'a');const _0x1b8b61=_0x326de0['length'];_0x1b8b61===0x210f*0x1+0xc33*0x2+-0x3972||_0x1b8b61===0x1bbe+0x4d9*-0x3+-0xd2f?(this['r']=_0x326de0[-0x22e1+-0x685+-0x2f5*-0xe],this['g']=_0x326de0[0x14a0+0x4a1+-0x1940],this['b']=_0x326de0[-0x13d3+-0xc70+0xb*0x2ef],this['a']=_0x326de0[-0x953+0x1*-0x1407+0x1d5d]??0x126*0x2+-0x13*-0x32+-0x601):(this['r']=_0x326de0,this['g']=_0x5b0972,this['b']=_0x42940f,this['a']=_0x1e9738);}['clone'](){const _0x9b3e18=this['constructo'+'r'];return new _0x9b3e18(this['r'],this['g'],this['b'],this['a']);}['copy'](_0x17cc6d){return this['r']=_0x17cc6d['r'],this['g']=_0x17cc6d['g'],this['b']=_0x17cc6d['b'],this['a']=_0x17cc6d['a'],this;}['equals'](_0x3b1902){return this['r']===_0x3b1902['r']&&this['g']===_0x3b1902['g']&&this['b']===_0x3b1902['b']&&this['a']===_0x3b1902['a'];}['set'](_0x5c3337,_0x149ebb,_0x36ef66,_0x54a20b=-0x25*0xd3+-0x22ee+0x32*0x14f){return this['r']=_0x5c3337,this['g']=_0x149ebb,this['b']=_0x36ef66,this['a']=_0x54a20b,this;}['lerp'](_0x59e69d,_0x4f235a,_0x21a2dc){return this['r']=_0x59e69d['r']+_0x21a2dc*(_0x4f235a['r']-_0x59e69d['r']),this['g']=_0x59e69d['g']+_0x21a2dc*(_0x4f235a['g']-_0x59e69d['g']),this['b']=_0x59e69d['b']+_0x21a2dc*(_0x4f235a['b']-_0x59e69d['b']),this['a']=_0x59e69d['a']+_0x21a2dc*(_0x4f235a['a']-_0x59e69d['a']),this;}['linear'](_0x2c81c0=this){return this['r']=Math['pow'](_0x2c81c0['r'],-0x1*0xd57+-0x4*0x8c6+0x3071*0x1+0.20000000000000018),this['g']=Math['pow'](_0x2c81c0['g'],-0x1b7*-0x1+0x71e*-0x4+0xd*0x20f+0.20000000000000018),this['b']=Math['pow'](_0x2c81c0['b'],0x20f4+-0x165b+-0xa97+0.20000000000000018),this['a']=_0x2c81c0['a'],this;}['gamma'](_0xd6f587=this){return this['r']=Math['pow'](_0xd6f587['r'],(0xf42+-0x14c*-0x11+-0x254d)/(-0x1*-0xf03+0x1036+-0x1f37+0.20000000000000018)),this['g']=Math['pow'](_0xd6f587['g'],(-0x1c5b+-0x7de+0x243a*0x1)/(0x2+-0x38b+-0x38b*-0x1+0.20000000000000018)),this['b']=Math['pow'](_0xd6f587['b'],(0xcbe+0x4da+0xed*-0x13)/(-0x1561+-0x35*0x7b+0x176d*0x2+0.20000000000000018)),this['a']=_0xd6f587['a'],this;}['mulScalar'](_0x2ad8cb){return this['r']*=_0x2ad8cb,this['g']*=_0x2ad8cb,this['b']*=_0x2ad8cb,this;}['fromString'](_0x3e2d15){const _0x1c9927=parseInt(_0x3e2d15['replace']('#','0x'),-0x26e0+-0x1dd6+0x44c6);let _0x4b55d9;return _0x3e2d15['length']>0xe0*0x1d+-0x1c*-0x57+-0x22dd?_0x4b55d9=Y['intToBytes'+'32'](_0x1c9927):(_0x4b55d9=Y['intToBytes'+'24'](_0x1c9927),_0x4b55d9[-0x2150+-0xcee+0x2e41]=0x262a+0x1517+-0x3a42*0x1),this['set'](_0x4b55d9[0x6*0x329+-0x22ad+-0x3*-0x53d]/(-0xeb8*-0x1+-0x3b*0x15+-0x8e2),_0x4b55d9[0x7*0x1c9+-0x9e4+-0x2*0x14d]/(0x1aff+-0x1*0x553+-0x4f*0x43),_0x4b55d9[-0x2603+-0xa6*-0x29+0xb6f]/(0x3*0x283+-0x6*-0x3a6+-0x1c6e),_0x4b55d9[-0x493*-0x4+0x1ac1+0x902*-0x5]/(-0x19eb+0xb*0x349+-0x939)),this;}['fromArray'](_0x1e2dee,_0x3c084b=-0x1ff9+0x9ba+0x163f*0x1){return this['r']=_0x1e2dee[_0x3c084b]??this['r'],this['g']=_0x1e2dee[_0x3c084b+(-0x4f1+-0x18d3+0x1dc5)]??this['g'],this['b']=_0x1e2dee[_0x3c084b+(-0x1333*-0x2+0x16af*0x1+-0x3d13)]??this['b'],this['a']=_0x1e2dee[_0x3c084b+(-0x1847+0xa2f+0xe1b)]??this['a'],this;}['toString'](_0x373f7a,_0x10c9c9){const {r:_0x1da686,g:_0x1b1c27,b:_0x542244,a:_0x1b7342}=this;if(_0x10c9c9||_0x1da686>-0x847+-0x2c8+0xb10||_0x1b1c27>0x1c76+-0x257+-0x1a1e*0x1||_0x542244>0x31c+-0x1a80+0x1765)return _0x1da686['toFixed'](0x14e7+0x1361+-0x3d*0xa9)+',\x20'+_0x1b1c27['toFixed'](0x16a9+-0x25c2*0x1+0xf1c)+',\x20'+_0x542244['toFixed'](0x209+0x1be+-0x3c4)+',\x20'+_0x1b7342['toFixed'](0x1*0x261b+-0x5*0x3b5+-0x138f);let _0x310d0c='#'+((-0xd0a+0x1d3f+0x7a*-0x22<<-0x1*-0xf3+-0x13*0x1bb+-0x2006*-0x1)+(Math['round'](_0x1da686*(0x1e3d*-0x1+-0x4cc+-0x2*-0x1204))<<0x208+-0x29*-0xbd+-0x203d)+(Math['round'](_0x1b1c27*(-0x2225+-0x25ef+0x4913))<<0x3*0xa57+-0x1d37*-0x1+-0x3c34)+Math['round'](_0x542244*(-0x1*0x1b7d+-0x1c*0x3a+0xb9c*0x3)))['toString'](-0x13f*-0x2+0x53+-0x8d*0x5)['slice'](0x1e5*-0xd+-0x1da+0x1a7c);if(_0x373f7a===!(0xa9*-0xd+0x8b*-0x3a+-0x1*-0x2813)){const _0x24b0fe=Math['round'](_0x1b7342*(-0x165c+-0xc54+0x23af))['toString'](0x2*0x10d9+0x1*-0x11c+0x16a*-0x17);this['a']<(0x1*0x23ed+-0x25c3+0xa2*0x3)/(-0x1bec+-0x12dd+0x2fc8)?_0x310d0c+='0'+_0x24b0fe:_0x310d0c+=_0x24b0fe;}return _0x310d0c;}['toArray'](_0x45e354=[],_0x203d6f=-0x20f7+-0x103c+0x3133,_0x4ec105=!(-0x4e*-0xd+-0x89a+0x4a4*0x1)){return _0x45e354[_0x203d6f]=this['r'],_0x45e354[_0x203d6f+(0x872+0x5ad*-0x1+-0x2c4)]=this['g'],_0x45e354[_0x203d6f+(0x120a*-0x1+-0x1*0x1218+-0x24*-0x101)]=this['b'],_0x4ec105&&(_0x45e354[_0x203d6f+(0x1420+-0x355+-0x2cc*0x6)]=this['a']),_0x45e354;}};h(Tt,'BLACK',Object['freeze'](new Tt(-0x2*-0x36d+-0x469*0x5+0xf33*0x1,0x1fcb+0x1894+-0x385f,0x2*0x6a9+-0x1cd4+0xf82,0x1e47+0x1ec1+-0x3d07))),h(Tt,'BLUE',Object['freeze'](new Tt(-0x983+0x5fd*0x1+0x2*0x1c3,-0x16bd+0x1*-0xa93+0x10a8*0x2,-0x453*0x3+0xa07+0x2f3,0x18d+0xbf4+-0xd80))),h(Tt,'CYAN',Object['freeze'](new Tt(0x55*-0x54+-0x7ee+0x23d2*0x1,-0x176e+-0x1*0x1829+0x2f98,-0x24f*-0x1+-0xd57+0x19*0x71,0xe5*-0xe+-0x16c0*-0x1+-0xa39*0x1))),h(Tt,'GRAY',Object['freeze'](new Tt(-0xc4a+0x10e2+-0x8*0x93+0.5,-0x96d+-0x1*-0x18eb+-0xf7e+0.5,0x13*-0x187+-0x143d+0x3142+0.5,0x25fe+-0x1*-0x1afe+-0x3*0x15a9))),h(Tt,'GREEN',Object['freeze'](new Tt(-0x26fe+0x1c47*-0x1+0x4345,-0x1304+-0x67e+0x1983,-0x17*0xbf+-0xe9+0x1212,-0x56f*-0x1+0x3f*0x97+-0x1*0x2a97))),h(Tt,'MAGENTA',Object['freeze'](new Tt(0x1*-0x490+0x240*-0xc+-0x1f91*-0x1,-0x8*-0x9f+-0x1*0x238e+0xae*0x2d,0x1*0x19a3+-0x1d4b+0x3a9,0x1a+0x1e97+-0x1eb0))),h(Tt,'RED',Object['freeze'](new Tt(0x24f2+-0x1016+-0x13*0x119,0x107*-0x1+0x2663*0x1+-0x255c,-0x259*-0x5+0x316+-0xed3,-0x1461+0x4a*-0x37+-0x2b*-0xd8))),h(Tt,'WHITE',Object['freeze'](new Tt(0xd*-0x1d9+0x1*-0x1dcd+0x1*0x35d3,-0x2156+-0xb*0x6c+0x7*0x56d,-0x1*-0xfa9+-0x16*-0x100+-0xa*0x3c4,-0x7d5*-0x2+-0xd5a+-0xc5*0x3))),h(Tt,'YELLOW',Object['freeze'](new Tt(-0x59*-0x40+0x21e8+-0x3827,-0x22d3+0xa3*-0x1+0x2377,0x5a*0x11+0x2645+-0x2c3f,-0x61a+-0x100a+0x1625)));let ie=Tt;class ZS{constructor(_0x199c89,_0xaf90cf=0x3*-0x4a1+0x887*0x2+-0x32b){h(this,'_curve'),h(this,'_left',-(0x1120+-0x43*-0x3b+-0x2090)/(-0x5b3+0x10*0xa6+0x1*-0x4ad)),h(this,'_right',(0x1856+0x198a+-0x31df)/(0x1567*0x1+0xf97+-0x24fe)),h(this,'_recip',0x1*-0x651+0x5c*0x50+0x166f*-0x1),h(this,'_p0',-0x1a*0xd6+0x1*0xb65+0xa57),h(this,'_p1',-0x1*-0x7+0x54b+-0x552),h(this,'_m0',0x192b*0x1+-0x1f5a+-0x1*-0x62f),h(this,'_m1',0x3e7+-0x5a*-0x11+-0x119*0x9),(this['_curve']=_0x199c89,this['_reset'](_0xaf90cf));}['evaluate'](_0xccd9cc,_0x5313a3=!(0x2093*-0x1+-0x761*-0x2+0x11d2)){(_0x5313a3||_0xccd9cc<this['_left']||_0xccd9cc>=this['_right'])&&this['_reset'](_0xccd9cc);let _0x5590e9;const _0x5bfc9c=this['_curve']['type'];if(_0x5bfc9c===_x)_0x5590e9=this['_p0'];else{const _0x3b953a=this['_recip']===-0x1d5+-0x49*-0x6f+-0x1dd2?-0x2*-0xafe+-0xa9b*-0x3+-0x35cd:(_0xccd9cc-this['_left'])*this['_recip'];_0x5bfc9c===mx?_0x5590e9=Y['lerp'](this['_p0'],this['_p1'],_0x3b953a):_0x5bfc9c===tp?_0x5590e9=Y['lerp'](this['_p0'],this['_p1'],_0x3b953a*_0x3b953a*(-0xa78+0x57*0x5f+-0x15ce-(0x12d3+-0x1d*-0x128+-0x3459*0x1)*_0x3b953a)):_0x5590e9=this['_evaluateH'+'ermite'](this['_p0'],this['_p1'],this['_m0'],this['_m1'],_0x3b953a);}return _0x5590e9;}['_reset'](_0x4e6f51){const _0x155d81=this['_curve']['keys'],_0x351082=_0x155d81['length'];if(!_0x351082)this['_left']=-(0x6*0x131+-0x249c+-0x1*-0x1d77)/(-0x353*-0x1+0x143b*0x1+-0x178e),this['_right']=(-0x115+0x10a*0x1c+-0xe01*0x2)/(0x1a43+0x8a0+-0x22e3),this['_recip']=0x1ff+-0x5*0x7a1+-0x1213*-0x2,this['_p0']=this['_p1']=this['_m0']=this['_m1']=-0x11b1+0x1*-0x11f5+0x1b*0x152;else{if(_0x4e6f51<_0x155d81[0x5a5+0xc22+0x29*-0x6f][0xac9+-0x18b7+0xdee])this['_left']=-(-0xb56+-0x26ad*0x1+0x1*0x3204)/(-0x81f+0x1*-0xeb+0x1*0x90a),this['_right']=_0x155d81[-0x515*0x4+0xe3c+0x618][-0x5*0x3be+0x2*-0x9dc+0x266e],this['_recip']=-0x6cc+-0xda*-0x1+0x5f2,this['_p0']=this['_p1']=_0x155d81[-0x7d*0x22+-0x3*0x721+0x1*0x25fd][-0x4bb+0xd1+0x3eb*0x1],this['_m0']=this['_m1']=0x130d*0x2+0x131b+-0x5*0xb71;else{if(_0x4e6f51>=_0x155d81[_0x351082-(-0xb2*0x15+-0x1e72+0x2d0d)][0x50*0x1b+-0x1691+-0x1*-0xe21])this['_left']=_0x155d81[_0x351082-(0x6*0x3a3+-0x2*-0xa12+-0x17*0x1d3)][-0x1*0xda3+0x3*-0x202+0x13a9],this['_right']=(0x1*0x186b+-0x234f+0xae5)/(0x19f5+-0x1623+-0x3d2),this['_recip']=-0x1*-0x170f+0x2051+-0x3760,this['_p0']=this['_p1']=_0x155d81[_0x351082-(0x1997+0x2*-0x2ba+-0x1422)][-0x1b63+0x685*-0x5+0x3bfd],this['_m0']=this['_m1']=0x9d*-0x16+0xd*-0x1+0xd8b;else{let _0x59eb52=0xd14+0x8bc+-0x15d0;for(;_0x4e6f51>=_0x155d81[_0x59eb52+(0x1812+-0x5*0x2b1+-0x61*0x1c)][-0x224*0x12+0x2267+0x421];)_0x59eb52++;this['_left']=_0x155d81[_0x59eb52][-0x1f71+0x599*-0x1+0x1af*0x16],this['_right']=_0x155d81[_0x59eb52+(0x17f6+0x3*0x592+0x167*-0x1d)][0x1*-0x5e3+0xe44+0x27*-0x37];const _0x2730f8=(0x133+-0xd1a+0xbe8)/(this['_right']-this['_left']);this['_recip']=isFinite(_0x2730f8)?_0x2730f8:-0x1a95+-0x520+0x1fb5,this['_p0']=_0x155d81[_0x59eb52][0x14da+-0x79*-0x20+0x1*-0x23f9],this['_p1']=_0x155d81[_0x59eb52+(-0x1cb0+-0xc77*0x3+-0x210b*-0x2)][-0xde9+-0x5b1+-0xef*-0x15],this['_curve']['type']===Nm&&this['_calcTange'+'nts'](_0x155d81,_0x59eb52);}}}}['_calcTange'+'nts'](_0x54d3f0,_0x3d0f58){let _0x2fe4af;const _0x3626f7=_0x54d3f0[_0x3d0f58],_0x18bdae=_0x54d3f0[_0x3d0f58+(-0x1bea*-0x1+-0x6*-0x662+0x4235*-0x1)];let _0x5ac594;if(_0x3d0f58===0x197+0x7bb+0x2*-0x4a9?_0x2fe4af=[_0x54d3f0[0x1a*-0x118+0x7*0x206+0xe46][-0x30c+0x17a2+0x5*-0x41e]+(_0x54d3f0[-0x293+-0xcd8+0x1*0xf6b][-0xe5+0x6f9+0x2*-0x30a]-_0x54d3f0[-0xf3f+0x76*0x1+-0x765*-0x2][-0x55c+-0x3*0xad7+-0x1*-0x25e1]),_0x54d3f0[-0x1422*-0x1+0x1932+-0x3*0xf1c][-0x1352+0x2524+0x11d1*-0x1]+(_0x54d3f0[0xdf*-0x14+0x19c+0x17*0xb0][0x1*0x1f23+0x4b1*0x4+-0x2*0x18f3]-_0x54d3f0[0xc29*0x2+0x1c78+-0x1*0x34c9][-0xe*0x1b1+-0x6*-0x3a9+0x1b9])]:_0x2fe4af=_0x54d3f0[_0x3d0f58-(-0x1*0x1c96+0x25e8+0x31b*-0x3)],_0x3d0f58===_0x54d3f0['length']-(0x200f*-0x1+0x2*0x3e9+-0x3*-0x815)?_0x5ac594=[_0x54d3f0[_0x3d0f58+(0x1106+0x21b*0x9+-0x2*0x11fc)][-0x103*-0xf+0x87b+-0x2f5*0x8]+(_0x54d3f0[_0x3d0f58+(-0x1*0x12db+-0x2d1*0xc+0x34a8)][-0x1c23+-0x3*0xc51+0x4116]-_0x54d3f0[_0x3d0f58][0xa6a+0x1a82+0x116*-0x22]),_0x54d3f0[_0x3d0f58+(0x133a+0x11f0+-0x2529)][0x192*-0x13+-0x6*-0x5c8+-0x4d9]+(_0x54d3f0[_0x3d0f58+(0x19e4+-0x1*-0x24f+-0x1c32)][-0x40*-0x40+-0x8*0x21d+0xe9*0x1]-_0x54d3f0[_0x3d0f58][-0x1cae+-0x2*-0x7db+0x9*0x171])]:_0x5ac594=_0x54d3f0[_0x3d0f58+(-0x19*-0x9b+0x1f48+0x2e69*-0x1)],this['_curve']['type']===Nm){const _0x120e06=(-0x133c+-0x21c8+-0x4d2*-0xb)*(_0x18bdae[-0xb43+0x1342+0x7ff*-0x1]-_0x3626f7[0x1a46*-0x1+0x11d6+0x870])/(_0x18bdae[-0xe64+0xd3b+0x9*0x21]-_0x2fe4af[0x1e*-0xa2+-0x7d7+0x1ad3]),_0x5a9c68=(0x3d9+-0x15d2+0x11fb)*(_0x18bdae[0x713+-0xe0d+0x2f*0x26]-_0x3626f7[-0x2*0x293+0x239e+-0x1e78])/(_0x5ac594[-0x1536+0x3e*-0x18+0x1b06]-_0x3626f7[-0xa59+-0xf5*-0x15+-0x9c0]);this['_m0']=this['_curve']['tension']*(isFinite(_0x120e06)?_0x120e06:0x17f*0x6+-0x169e+-0xc2*-0x12)*(_0x18bdae[0x897+0x9d*-0x24+-0x1*-0xd7e]-_0x2fe4af[0x1168+-0xce3+0x484*-0x1]),this['_m1']=this['_curve']['tension']*(isFinite(_0x5a9c68)?_0x5a9c68:0x1fcd+-0xc2a*-0x3+-0x444b)*(_0x5ac594[-0x4f*-0x4f+-0x1*0x1149+0xf*-0x79]-_0x3626f7[-0x1354+-0x92d+0xe41*0x2]);}else{const _0x22a970=(_0x18bdae[0x1f4a+0x132*0x16+-0x999*0x6]-_0x3626f7[0x2462+0x961+-0x47*0xa5])/(_0x3626f7[0x256b+-0x11*0x1b1+-0x455*0x2]-_0x2fe4af[-0x26f2+-0x1*-0x1f48+0x7aa]),_0xea9567=(_0x18bdae[-0x2*0xd24+0x11*-0x224+0x3eac*0x1]-_0x3626f7[-0x5*0x3be+0x1d*0x90+-0x1*-0x266])/(_0x5ac594[0x1*0x11b9+-0x1*0x20d7+0x183*0xa]-_0x18bdae[-0x2ca+-0xd59+0x9*0x1cb]),_0x3c97db=_0x3626f7[0x1*0x1de1+0x2c0*-0x7+0x550*-0x2]+(_0x2fe4af[0x1*0xa11+0xb1*-0x25+0x1*0xf85]-_0x3626f7[-0x192*0xd+-0x1*0x10cf+0x129d*0x2])*(isFinite(_0x22a970)?_0x22a970:0x19ea+-0x212b*-0x1+-0x19*0x25d),_0x510bd7=_0x18bdae[-0xd*-0x16f+0x1fe1*-0x1+-0xd3f*-0x1]+(_0x5ac594[-0x15d4+0x9*0x7b+0x1182]-_0x18bdae[-0x10f4+0x953*-0x1+0x2*0xd24])*(isFinite(_0xea9567)?_0xea9567:0x1*0x12be+0x1*-0x1d69+-0x1*-0xaab),_0x43b72a=this['_curve']['tension'];this['_m0']=_0x43b72a*(_0x18bdae[-0x1456+-0x11a5+0x97f*0x4]-_0x3c97db),this['_m1']=_0x43b72a*(_0x510bd7-_0x3626f7[-0x489+0x109+0x381]);}}['_evaluateH'+'ermite'](_0x336f71,_0x49f5bc,_0x342ca7,_0x569567,_0x28b1b3){const _0x548f31=_0x28b1b3*_0x28b1b3,_0x35dc9c=_0x28b1b3+_0x28b1b3,_0x14e540=-0x215d+-0xd39+0x2e97-_0x28b1b3,_0x27df03=_0x14e540*_0x14e540;return _0x336f71*((-0x1121*-0x1+0x1e*-0x46+-0x23b*0x4+_0x35dc9c)*_0x27df03)+_0x342ca7*(_0x28b1b3*_0x27df03)+_0x49f5bc*(_0x548f31*(-0xe83+0x2c*-0x3b+0xc55*0x2-_0x35dc9c))+_0x569567*(_0x548f31*(_0x28b1b3-(0x2c5*0xd+0x51b*-0x4+0x4*-0x3e5)));}}class qs{constructor(_0x129200){h(this,'keys',[]),h(this,'type',tp),h(this,'tension',0x1c88+0x2*-0xce6+-0x2bc+0.5),h(this,'_eval',new ZS(this));if(_0x129200){for(let _0x369019=-0x1efa*-0x1+-0x4e7+-0x1a13;_0x369019<_0x129200['length']-(0xc*-0x1+0x203d+0x10*-0x203);_0x369019+=-0x71e+-0x51+0x771)this['keys']['push']([_0x129200[_0x369019],_0x129200[_0x369019+(0x6ea+0x98d*0x1+0x7*-0x25a)]]);}this['sort']();}get['length'](){return this['keys']['length'];}['add'](_0x4ad335,_0x46e076){const _0xc2b7bc=this['keys'],_0x5748db=_0xc2b7bc['length'];let _0x4fdea7=-0x11*0x22e+-0x2*-0x885+0xc*0x1ab;for(;_0x4fdea7<_0x5748db&&!(_0xc2b7bc[_0x4fdea7][0x1763+-0x8*0x4db+0xf75]>_0x4ad335);_0x4fdea7++);const _0x962ff4=[_0x4ad335,_0x46e076];return this['keys']['splice'](_0x4fdea7,0x1d1f+-0xc3b+-0x2f*0x5c,_0x962ff4),_0x962ff4;}['get'](_0x254782){return this['keys'][_0x254782];}['sort'](){this['keys']['sort']((_0x1f60d0,_0x6efe7d)=>_0x1f60d0[-0xfef+-0xa*0x304+0x2e17]-_0x6efe7d[0x185*0x1+-0x66*0x50+0x1e5b]);}['value'](_0x125fe5){return this['_eval']['evaluate'](_0x125fe5,!(-0x77*0x49+-0xb*-0x257+0x832*0x1));}['closest'](_0x4149ac){const _0x22e83d=this['keys'],_0x3f17fd=_0x22e83d['length'];let _0x4e8af5=0x3*-0x7f5+-0x2*-0x137d+-0xf19,_0x58714c=null;for(let _0x34cd76=-0x111e+0x15e1+-0x4c3;_0x34cd76<_0x3f17fd;_0x34cd76++){const _0x590fa9=Math['abs'](_0x4149ac-_0x22e83d[_0x34cd76][0xfeb*-0x1+0x2243+-0x1258]);if(_0x4e8af5>=_0x590fa9)_0x4e8af5=_0x590fa9,_0x58714c=_0x22e83d[_0x34cd76];else break;}return _0x58714c;}['clone'](){const _0x29a2e7=new this['constructo'+'r']();return _0x29a2e7['keys']=this['keys']['map'](_0x2c62c7=>[..._0x2c62c7]),_0x29a2e7['type']=this['type'],_0x29a2e7['tension']=this['tension'],_0x29a2e7;}['quantize'](_0x4f75ac){_0x4f75ac=Math['max'](_0x4f75ac,-0xe43+0xd6e+0xd7);const _0x35eaec=new Float32Array(_0x4f75ac),_0x5221c3=(0x26f+-0x6*0x121+-0x1*-0x458)/(_0x4f75ac-(0x170c+0x159d+-0x2ca8));_0x35eaec[-0x1426*-0x1+-0x1f52+0xb2c]=this['_eval']['evaluate'](0x72e*0x4+-0xe92+-0xe26,!(0x202+0xb38+0x69d*-0x2));for(let _0x20cd49=-0x124b+0x7f6+0xa56;_0x20cd49<_0x4f75ac;_0x20cd49++)_0x35eaec[_0x20cd49]=this['_eval']['evaluate'](_0x5221c3*_0x20cd49);return _0x35eaec;}['quantizeCl'+'amped'](_0x58c988,_0x119cb6,_0x283f62){const _0x14fcc1=this['quantize'](_0x58c988);for(let _0x56ea27=0x2a*0xd5+0x2fd+-0xca5*0x3;_0x56ea27<_0x14fcc1['length'];++_0x56ea27)_0x14fcc1[_0x56ea27]=Math['min'](_0x283f62,Math['max'](_0x119cb6,_0x14fcc1[_0x56ea27]));return _0x14fcc1;}}class na{constructor(..._0x3e0039){h(this,'curves',[]),h(this,'_type',tp);if(_0x3e0039['length']>0x8c6*-0x3+-0x1de1*0x1+0x4*0xe0d){for(let _0x45a6df=0x6a*0x49+-0x1567+-0x8d3*0x1;_0x45a6df<_0x3e0039['length'];_0x45a6df++)this['curves']['push'](new qs(_0x3e0039[_0x45a6df]));}else{if(_0x3e0039['length']===0x4d+-0xaf1*-0x3+0x14*-0x1a8)this['curves']['push'](new qs());else{const _0x441502=_0x3e0039[0x1b52+0x217e+-0x3cd0];if(typeof _0x441502=='number'){for(let _0x475cc4=0x6b*0x44+-0x228+-0x691*0x4;_0x475cc4<_0x441502;_0x475cc4++)this['curves']['push'](new qs());}else{for(let _0x229aaf=0xc*0x25e+0xbe1+0x2849*-0x1;_0x229aaf<_0x441502['length'];_0x229aaf++)this['curves']['push'](new qs(_0x441502[_0x229aaf]));}}}}get['length'](){return this['curves']['length'];}set['type'](_0x3d4e80){this['_type']=_0x3d4e80;for(let _0x38902f=0x19*-0x72+0xe41+-0x1*0x31f;_0x38902f<this['curves']['length'];_0x38902f++)this['curves'][_0x38902f]['type']=_0x3d4e80;}get['type'](){return this['_type'];}['get'](_0x422ce4){return this['curves'][_0x422ce4];}['value'](_0xe759b1,_0x2c8884=[]){const _0x26fa4d=this['curves']['length'];_0x2c8884['length']=_0x26fa4d;for(let _0x41daf9=0x7ae*-0x2+-0x24ba+-0x71*-0x76;_0x41daf9<_0x26fa4d;_0x41daf9++)_0x2c8884[_0x41daf9]=this['curves'][_0x41daf9]['value'](_0xe759b1);return _0x2c8884;}['clone'](){const _0x58ab3d=new this['constructo'+'r']();_0x58ab3d['curves']=[];for(let _0x364cf1=0x254a+-0x1*0x14db+0x7*-0x259;_0x364cf1<this['curves']['length'];_0x364cf1++)_0x58ab3d['curves']['push'](this['curves'][_0x364cf1]['clone']());return _0x58ab3d['_type']=this['_type'],_0x58ab3d;}['quantize'](_0xe9257f){_0xe9257f=Math['max'](_0xe9257f,-0x1471+-0x168+-0x15db*-0x1);const _0x131651=this['curves']['length'],_0x380194=new Float32Array(_0xe9257f*_0x131651),_0x51f724=(-0x24da*0x1+0x2069+-0x1*-0x472)/(_0xe9257f-(-0x8ee+0xc+-0x5b*-0x19));for(let _0x34a1eb=0x9b9*-0x3+-0x245d+-0x8*-0x831;_0x34a1eb<_0x131651;_0x34a1eb++){const _0x1fa2ec=new ZS(this['curves'][_0x34a1eb]);for(let _0x412f88=-0x1330+0x9cb+-0x41*-0x25;_0x412f88<_0xe9257f;_0x412f88++)_0x380194[_0x412f88*_0x131651+_0x34a1eb]=_0x1fa2ec['evaluate'](_0x51f724*_0x412f88);}return _0x380194;}['quantizeCl'+'amped'](_0x496d1e,_0x25f3b9,_0x1dba75){const _0x3290ce=this['quantize'](_0x496d1e);for(let _0x374bb7=0x22d*-0x4+-0x300+0xbb4;_0x374bb7<_0x3290ce['length'];++_0x374bb7)_0x3290ce[_0x374bb7]=Math['min'](_0x1dba75,Math['max'](_0x25f3b9,_0x3290ce[_0x374bb7]));return _0x3290ce;}}const Hf=new Float32Array(-0x1fcd+-0x5*-0x301+0x10c9),km=new Int32Array(Hf['buffer']);class Mn{static['float2Half'](_0xea2bc6){Hf[0x2*-0x1011+-0x5*0x719+0x439f]=_0xea2bc6;const _0x3bba4c=km[-0x11*0x19+0x13*-0x26+0x47b];let _0x41a79c=_0x3bba4c>>-0x1396+-0x1620+0x14e3*0x2&-0x5a24+0x93fd+0x1*0x4627,_0x4bffe3=_0x3bba4c>>0x22e3*-0x1+0x3*0x7e6+0xb3d*0x1&0x2017+0x1a3+-0x19bb;const _0x339729=_0x3bba4c>>0x1cf+-0x17f6+0x163e&0x1*-0x1613+0x629+0x25*0x75;return _0x339729<-0x1434+0x2*0x11b+0x115*0x11?_0x41a79c:_0x339729>-0x24b4+0x1e11+0x731?(_0x41a79c|=-0x14c*-0x45+0x225*-0xb+0x1a9*0x23,_0x41a79c|=(_0x339729===0xf9*-0x11+-0x2405+0x358d?0x1*-0x735+-0x236d+0x2aa2:-0x1*-0x1a56+-0x21e9*-0x1+-0x3c3e)&&_0x3bba4c&0x623*-0x1449+0xbcb87d+0x3fc37d,_0x41a79c):_0x339729<0x28f*-0x5+0x1793+-0x1*0xa57?(_0x4bffe3|=-0xa48+0x1039*-0x1+0x2281,_0x41a79c|=(_0x4bffe3>>-0x3d4+0xeb9*-0x1+-0x12ff*-0x1-_0x339729)+(_0x4bffe3>>-0x1f59+0x1ce5*0x1+0x2e5-_0x339729&0x1531+-0x13*0x52+-0xf1a),_0x41a79c):(_0x41a79c|=_0x339729-(0x23e3+-0x2292+-0x3*0x4b)<<-0x2*-0x395+0x2425+-0x3ef*0xb|_0x4bffe3>>-0x3*-0x582+-0x1*-0x2205+-0x328a,_0x41a79c+=_0x4bffe3&-0x1e25+0x8ee+-0xa9c*-0x2,_0x41a79c);}static['float2RGBA'+'8'](_0x1d4f48,_0x173a4d){Hf[-0xa08+-0x10d3+0x1adb]=_0x1d4f48;const _0x1a242e=km[0x399+-0x25e2+0x2249];_0x173a4d['r']=(_0x1a242e>>0x745*0x1+-0x8a9+-0x17c*-0x1&0x1c9b+0x7*0x3a7+-0x352d)/(-0x18bd+0x37*0x8c+0x2*-0x22c),_0x173a4d['g']=(_0x1a242e>>-0x3fd+-0x1*-0x23f+0x4d*0x6&-0x2632+-0x112e+-0x385f*-0x1)/(-0x2674+-0x2541+0x2*0x265a),_0x173a4d['b']=(_0x1a242e>>-0x28*0x4f+-0x2446+-0x1a*-0x1df&0x1e75+-0x1bc5+-0x1*0x1b1)/(0x24ff+-0x1*-0x2253+0x1771*-0x3),_0x173a4d['a']=(_0x1a242e&-0xb8d+0x35*0x59+-0x5e1)/(0x1700*-0x1+0x7ee+-0x1011*-0x1);}}const wt=class wt{constructor(_0x19509d=-0x1*0x1dfd+-0xd84+0x2b81,_0x53bd49=-0x1*-0x13da+0x9c2+-0x17b*0x14,_0x22748d=-0x1ed1+0x2*-0x11d5+0x427b){h(this,'x'),h(this,'y'),h(this,'z'),_0x19509d['length']===-0x3*-0x7c9+-0x20*-0x100+0x3758*-0x1?(this['x']=_0x19509d[-0xea0+0x1*-0x23b1+0x3251],this['y']=_0x19509d[0x7*0x343+0x267e+-0x3d52],this['z']=_0x19509d[-0x1*-0x1161+-0x13a2+0x243]):(this['x']=_0x19509d,this['y']=_0x53bd49,this['z']=_0x22748d);}['add'](_0x35413b){return this['x']+=_0x35413b['x'],this['y']+=_0x35413b['y'],this['z']+=_0x35413b['z'],this;}['add2'](_0x589873,_0x39ad1d){return this['x']=_0x589873['x']+_0x39ad1d['x'],this['y']=_0x589873['y']+_0x39ad1d['y'],this['z']=_0x589873['z']+_0x39ad1d['z'],this;}['addScalar'](_0xd1ef12){return this['x']+=_0xd1ef12,this['y']+=_0xd1ef12,this['z']+=_0xd1ef12,this;}['addScaled'](_0x4084da,_0x187544){return this['x']+=_0x4084da['x']*_0x187544,this['y']+=_0x4084da['y']*_0x187544,this['z']+=_0x4084da['z']*_0x187544,this;}['clone'](){const _0x2fe51a=this['constructo'+'r'];return new _0x2fe51a(this['x'],this['y'],this['z']);}['copy'](_0x32258e){return this['x']=_0x32258e['x'],this['y']=_0x32258e['y'],this['z']=_0x32258e['z'],this;}['cross'](_0x128bba,_0x1b059e){const _0x471336=_0x128bba['x'],_0x2f36b5=_0x128bba['y'],_0x507989=_0x128bba['z'],_0x1c7997=_0x1b059e['x'],_0x3e9d68=_0x1b059e['y'],_0x40609a=_0x1b059e['z'];return this['x']=_0x2f36b5*_0x40609a-_0x3e9d68*_0x507989,this['y']=_0x507989*_0x1c7997-_0x40609a*_0x471336,this['z']=_0x471336*_0x3e9d68-_0x1c7997*_0x2f36b5,this;}['distance'](_0x4dc0ec){const _0x33c7a9=this['x']-_0x4dc0ec['x'],_0x1c0555=this['y']-_0x4dc0ec['y'],_0x5a77b1=this['z']-_0x4dc0ec['z'];return Math['sqrt'](_0x33c7a9*_0x33c7a9+_0x1c0555*_0x1c0555+_0x5a77b1*_0x5a77b1);}['div'](_0xf68164){return this['x']/=_0xf68164['x'],this['y']/=_0xf68164['y'],this['z']/=_0xf68164['z'],this;}['div2'](_0x55c098,_0x17e4d8){return this['x']=_0x55c098['x']/_0x17e4d8['x'],this['y']=_0x55c098['y']/_0x17e4d8['y'],this['z']=_0x55c098['z']/_0x17e4d8['z'],this;}['divScalar'](_0xdb0763){return this['x']/=_0xdb0763,this['y']/=_0xdb0763,this['z']/=_0xdb0763,this;}['dot'](_0x1503d0){return this['x']*_0x1503d0['x']+this['y']*_0x1503d0['y']+this['z']*_0x1503d0['z'];}['equals'](_0x10b22e){return this['x']===_0x10b22e['x']&&this['y']===_0x10b22e['y']&&this['z']===_0x10b22e['z'];}['equalsAppr'+'ox'](_0x124b6e,_0x4b76f0=-0x1*-0x11a9+-0x51d+0x49*-0x2c+0.000001){return Math['abs'](this['x']-_0x124b6e['x'])<_0x4b76f0&&Math['abs'](this['y']-_0x124b6e['y'])<_0x4b76f0&&Math['abs'](this['z']-_0x124b6e['z'])<_0x4b76f0;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z'];}['lerp'](_0x1e89fa,_0x23dcee,_0x227bd2){return this['x']=_0x1e89fa['x']+_0x227bd2*(_0x23dcee['x']-_0x1e89fa['x']),this['y']=_0x1e89fa['y']+_0x227bd2*(_0x23dcee['y']-_0x1e89fa['y']),this['z']=_0x1e89fa['z']+_0x227bd2*(_0x23dcee['z']-_0x1e89fa['z']),this;}['mul'](_0x1ab0f8){return this['x']*=_0x1ab0f8['x'],this['y']*=_0x1ab0f8['y'],this['z']*=_0x1ab0f8['z'],this;}['mul2'](_0x18e409,_0x1436f8){return this['x']=_0x18e409['x']*_0x1436f8['x'],this['y']=_0x18e409['y']*_0x1436f8['y'],this['z']=_0x18e409['z']*_0x1436f8['z'],this;}['mulScalar'](_0x3292eb){return this['x']*=_0x3292eb,this['y']*=_0x3292eb,this['z']*=_0x3292eb,this;}['normalize'](_0x1d4b6f=this){const _0x195f6d=_0x1d4b6f['x']*_0x1d4b6f['x']+_0x1d4b6f['y']*_0x1d4b6f['y']+_0x1d4b6f['z']*_0x1d4b6f['z'];if(_0x195f6d>0xfb7+0x4*0x8fb+0x1*-0x33a3){const _0x7dbbfc=(-0x2422+-0x212*-0x4+0x1bdb)/Math['sqrt'](_0x195f6d);this['x']=_0x1d4b6f['x']*_0x7dbbfc,this['y']=_0x1d4b6f['y']*_0x7dbbfc,this['z']=_0x1d4b6f['z']*_0x7dbbfc;}return this;}['floor'](_0x13fd37=this){return this['x']=Math['floor'](_0x13fd37['x']),this['y']=Math['floor'](_0x13fd37['y']),this['z']=Math['floor'](_0x13fd37['z']),this;}['ceil'](_0x548aff=this){return this['x']=Math['ceil'](_0x548aff['x']),this['y']=Math['ceil'](_0x548aff['y']),this['z']=Math['ceil'](_0x548aff['z']),this;}['round'](_0x228616=this){return this['x']=Math['round'](_0x228616['x']),this['y']=Math['round'](_0x228616['y']),this['z']=Math['round'](_0x228616['z']),this;}['min'](_0x5a65c8){return _0x5a65c8['x']<this['x']&&(this['x']=_0x5a65c8['x']),_0x5a65c8['y']<this['y']&&(this['y']=_0x5a65c8['y']),_0x5a65c8['z']<this['z']&&(this['z']=_0x5a65c8['z']),this;}['max'](_0x42f6f7){return _0x42f6f7['x']>this['x']&&(this['x']=_0x42f6f7['x']),_0x42f6f7['y']>this['y']&&(this['y']=_0x42f6f7['y']),_0x42f6f7['z']>this['z']&&(this['z']=_0x42f6f7['z']),this;}['project'](_0x127e6e){const _0x595486=this['x']*_0x127e6e['x']+this['y']*_0x127e6e['y']+this['z']*_0x127e6e['z'],_0x4754aa=_0x127e6e['x']*_0x127e6e['x']+_0x127e6e['y']*_0x127e6e['y']+_0x127e6e['z']*_0x127e6e['z'],_0x21c014=_0x595486/_0x4754aa;return this['x']=_0x127e6e['x']*_0x21c014,this['y']=_0x127e6e['y']*_0x21c014,this['z']=_0x127e6e['z']*_0x21c014,this;}['set'](_0x52aebf,_0x3ed8f2,_0x1545a6){return this['x']=_0x52aebf,this['y']=_0x3ed8f2,this['z']=_0x1545a6,this;}['sub'](_0x155711){return this['x']-=_0x155711['x'],this['y']-=_0x155711['y'],this['z']-=_0x155711['z'],this;}['sub2'](_0x36ee60,_0x6f0006){return this['x']=_0x36ee60['x']-_0x6f0006['x'],this['y']=_0x36ee60['y']-_0x6f0006['y'],this['z']=_0x36ee60['z']-_0x6f0006['z'],this;}['subScalar'](_0x2692f9){return this['x']-=_0x2692f9,this['y']-=_0x2692f9,this['z']-=_0x2692f9,this;}['fromArray'](_0x248ebc,_0x20a5ae=0x1*-0x16a9+0x1*0x6b9+-0x4*-0x3fc){return this['x']=_0x248ebc[_0x20a5ae]??this['x'],this['y']=_0x248ebc[_0x20a5ae+(-0x1e74+0xe7+0x1d8e*0x1)]??this['y'],this['z']=_0x248ebc[_0x20a5ae+(0x2575+-0xff6+-0x157d)]??this['z'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+']';}['toArray'](_0x4f2abe=[],_0x39b134=-0x11ee+-0x2*0x4d2+-0x1*-0x1b92){return _0x4f2abe[_0x39b134]=this['x'],_0x4f2abe[_0x39b134+(-0xefd+-0x26d1+0x35cf)]=this['y'],_0x4f2abe[_0x39b134+(0x1*0x13d1+0x8fd+-0x1ccc)]=this['z'],_0x4f2abe;}};h(wt,'ZERO',Object['freeze'](new wt(-0xd0+-0x22c3+0x1*0x2393,-0x2*0xc74+-0xec5+-0x27ad*-0x1,-0x25f3+0x8+0x1*0x25eb))),h(wt,'HALF',Object['freeze'](new wt(0x19e+-0x56*-0x56+-0x1e82+0.5,-0x1b31+-0x1*0x1cbf+0x37f0+0.5,-0x26fb+-0x611+-0xf04*-0x3+0.5))),h(wt,'ONE',Object['freeze'](new wt(0x18*-0x1c+-0x35*0x5c+0x15ad,0x63*-0x1c+-0x20a*0xd+0x2557,0x1586+0xfd*-0xe+-0x7af))),h(wt,'UP',Object['freeze'](new wt(-0x31*0x6e+0x2287+-0xd79,-0x3d*-0x7d+0xcb0+0xa9e*-0x4,0x1b*0xc1+0x137*-0xb+-0x6fe))),h(wt,'DOWN',Object['freeze'](new wt(-0x8*-0x1c4+-0x89*-0x21+-0x1*0x1fc9,-(-0x78*0x3f+0x20e4+-0x35b),-0x1b*-0x88+0x6f1+-0x1549))),h(wt,'RIGHT',Object['freeze'](new wt(-0xb50+-0xc1e+-0x359*-0x7,0x205e+0x23f9*-0x1+-0x47*-0xd,0x5e*-0x28+-0x26c4+-0x137*-0x2c))),h(wt,'LEFT',Object['freeze'](new wt(-(0x1*-0x66f+0x19a7+-0x1337),-0x1f16*0x1+-0x3*0x7f9+0x3701,0xb*-0x292+-0x3*0xbdf+-0x1*-0x3fe3))),h(wt,'FORWARD',Object['freeze'](new wt(0xfa6*0x2+0x1f26+0x3e72*-0x1,-0x1e26+-0xe3f+0x2c65,-(0x1295+-0x2282+0xfee)))),h(wt,'BACK',Object['freeze'](new wt(-0x7*0x42b+-0x1e34+0x3b61,0x2a5*-0x8+0x852+0x66b*0x2,0x9*0x405+-0x1*0x212e+0x1*-0x2fe)));let D=wt;const gn=class gn{constructor(){h(this,'data',new Float32Array(0x1f13+-0x1f39*-0x1+-0x4d*0xcf)),this['data'][-0x1c6b+0x869*0x1+0x1402]=this['data'][-0xf7d*-0x2+0x5f4+-0x276*0xf]=this['data'][-0x3f*-0x86+0x5*0xa7+-0x2435]=-0x561+0x54b+0x17;}['clone'](){const _0x361322=this['constructo'+'r'];return new _0x361322()['copy'](this);}['copy'](_0x936417){const _0x48b098=_0x936417['data'],_0x255d23=this['data'];return _0x255d23[0x5b3*-0x3+-0xd0f*0x1+0x5*0x608]=_0x48b098[-0xfb3*0x1+0x260b+0x41*-0x58],_0x255d23[0x3a*0x21+0xfc2+-0x173b*0x1]=_0x48b098[0x1cff+0x4*-0x254+-0x1*0x13ae],_0x255d23[-0x7*-0x345+-0x199a+0x2b9]=_0x48b098[0x1905+0x84c+-0x214f],_0x255d23[0x1426+-0x231+0x11f2*-0x1]=_0x48b098[0x3b3*0x8+-0xd3*-0x2f+0xa5*-0x6a],_0x255d23[0x1*-0x1979+0xd43+-0x139*-0xa]=_0x48b098[-0x18*0xaa+-0x74f*0x4+0x2d30],_0x255d23[-0xa83+-0x79+-0x3*-0x3ab]=_0x48b098[0x1e*-0x83+-0x2267+0x31c6*0x1],_0x255d23[-0xd55+-0x13*-0x147+0xaea*-0x1]=_0x48b098[-0x2c6*0x4+-0x2132+0x1628*0x2],_0x255d23[0x19f*-0x17+-0x3ad+-0x28fd*-0x1]=_0x48b098[0x3ce+0x1da6+0x1*-0x216d],_0x255d23[0xab7+-0xaf0+0x1*0x41]=_0x48b098[0x1487+0x2bc*0x6+0x43*-0x8d],this;}['set'](_0x52d5af){const _0x2190d3=this['data'];return _0x2190d3[-0x2*0x6dd+0x1364+-0x1d*0x32]=_0x52d5af[0x121*-0x2+0x3b9*0x1+-0x3*0x7d],_0x2190d3[-0x1*-0x14c2+0x5*-0xe5+-0x1048]=_0x52d5af[-0x1035+0xd76+0x1*0x2c0],_0x2190d3[-0x94+-0x204b+-0x1*-0x20e1]=_0x52d5af[0x5a5+0xed2+0x1*-0x1475],_0x2190d3[0x2114+-0x2*0xfe9+-0x13f]=_0x52d5af[-0x1*0x1a8d+0x1db*0x14+-0xa8c],_0x2190d3[0xc7c+-0x18b2+0xc3a]=_0x52d5af[0x1df9*-0x1+0x1018*0x1+0xde5],_0x2190d3[0x64b+0x43*0x52+0x4*-0x6ef]=_0x52d5af[-0x184a+-0x11c0+0x2a0f],_0x2190d3[-0x763+0x8b4+-0x14b]=_0x52d5af[-0x7a*0x3e+0xd3*-0x1+0x1e65],_0x2190d3[-0xf16*0x2+0xb17+0x4*0x4c7]=_0x52d5af[-0x2597+0x23cb+-0x1*-0x1d3],_0x2190d3[0x1e37+0x126e+-0x309d]=_0x52d5af[0x16b*0x10+0x1d55+-0x33fd],this;}['getX'](_0x3946dd=new D()){return _0x3946dd['set'](this['data'][-0x1e5*-0x11+0x1*0x5cf+-0x2604],this['data'][-0x921+0x832+0xf0],this['data'][0xcb8+-0x1*-0xe57+-0x1b0d]);}['getY'](_0x50a438=new D()){return _0x50a438['set'](this['data'][-0x24d5+0x1d79*0x1+0x75f],this['data'][0x1822+0x1*-0x56b+-0x1*0x12b3],this['data'][0x380+-0xe52+0xad7]);}['getZ'](_0xa8899f=new D()){return _0xa8899f['set'](this['data'][-0x10d5+-0x7bb+0x2*0xc4b],this['data'][-0x22f*0x2+-0xe1d*0x1+0x1282],this['data'][0x1b7+0x3*-0x3a1+0x934]);}['equals'](_0x3d5eb5){const _0x4b838b=this['data'],_0x53605b=_0x3d5eb5['data'];return _0x4b838b[-0x307*0x3+0x912+-0x3*-0x1]===_0x53605b[-0x1a21+-0x1*-0x21a9+-0x788]&&_0x4b838b[0x18fd+0x75*-0x1+-0x1887]===_0x53605b[0x12cd+-0x2*0x4e1+-0xd*0xb2]&&_0x4b838b[0xef*0x14+0x1cf1+0x7*-0x6cd]===_0x53605b[0x1b62+0xd87+-0x28e7]&&_0x4b838b[-0xba*0x1+0x8ff+-0x842]===_0x53605b[-0x8a6+-0xd79*-0x1+-0x4*0x134]&&_0x4b838b[-0xc1+0x6a4*0x5+-0x17*0x169]===_0x53605b[0x4*0x97a+-0x1683+-0x1f*0x7f]&&_0x4b838b[0x25a1+-0x5c6+-0x1fd6]===_0x53605b[-0x7*-0x392+0x20ac+0x1337*-0x3]&&_0x4b838b[0x3*0xbad+0x114d+-0xd*0x406]===_0x53605b[-0x144f+-0x1*0x1166+0x1*0x25bb]&&_0x4b838b[-0x1b*-0x80+-0x1*0x643+-0x736]===_0x53605b[-0x1ace+-0x7*0x26b+0x2bc2]&&_0x4b838b[0x7e0+0x2b*0x23+-0xdb9]===_0x53605b[-0x10d*0x1+0x38f+-0x27a];}['isIdentity'](){const _0x17cc11=this['data'];return _0x17cc11[0x2256+0xf28*-0x1+-0x132e]===-0x97*-0x25+0x1991*0x1+0x1*-0x2f63&&_0x17cc11[-0x1*0x24ce+-0x8ed*0x1+0x2*0x16de]===0x875*0x2+0x9*0x3f1+0x1*-0x3463&&_0x17cc11[-0x1*0x121d+-0x1*0x156b+-0x1e2*-0x15]===-0x1*-0xd4f+-0xc9e+-0x3*0x3b&&_0x17cc11[-0x1*-0x15a3+-0xd47*-0x2+-0x302e]===0x133d+0xf4b+-0x2288&&_0x17cc11[0x46*0x54+0x429*0x5+0x17*-0x1e7]===0x2f*0x2+0x56*-0x5c+0x7*0x45d&&_0x17cc11[-0x29*0xcd+-0x4*0x450+0x321a]===-0x52*-0x6b+-0x1dff*-0x1+-0x4045&&_0x17cc11[-0x76*0x29+-0x1*0xb6f+0x1e5b]===-0x327*-0x6+0x1ac2+-0x2dac&&_0x17cc11[-0xe18+0x43*-0x59+0x256a]===0xad*0xd+-0x6d*0x29+0x8ac&&_0x17cc11[0x1f*-0x37+-0x639+0x57*0x26]===-0x251*0x4+-0x277+-0xbbc*-0x1;}['setIdentit'+'y'](){const _0x1bab0d=this['data'];return _0x1bab0d[0xe*-0x3c+-0x47*-0x5f+-0x49d*0x5]=0xe3f*-0x1+0x1*-0x5b7+0x10d*0x13,_0x1bab0d[-0x4*-0x2ee+0x8d8+-0x148f]=-0x111c+-0x5c9*-0x1+-0x1*-0xb53,_0x1bab0d[-0x1*0x116f+0x103d+0xe*0x16]=-0x6d9+0x20ac+-0x19d3,_0x1bab0d[-0x13aa+0x6f1*0x1+0xcbc]=0xa*0x1bf+-0x2415+0x129f,_0x1bab0d[0x4*0x91d+0x6*-0x5cf+0x1*-0x196]=0xdc3+-0xd81*-0x1+-0x7*0x3e5,_0x1bab0d[0x213c*0x1+-0x92*-0x35+-0x3f71]=-0x2449+-0x1a9f+-0x2dc*-0x16,_0x1bab0d[-0x13*0x155+-0x72d+0x2082]=0xb*0x27a+-0x18c7*0x1+0x1*-0x277,_0x1bab0d[-0x4f*0x35+0x11*0x15b+-0x1*0x6a9]=-0x21c6+0xed0+0x12f6,_0x1bab0d[-0x1f*0x13d+0x1651+0x1ca*0x9]=0x1*0x1a25+0x4*-0x300+-0xe24,this;}['toString'](){return'['+this['data']['join'](',\x20')+']';}['transpose'](_0x42c7fb=this){const _0x500cfd=_0x42c7fb['data'],_0x3ff091=this['data'];if(_0x500cfd===_0x3ff091){let _0x39673d;_0x39673d=_0x500cfd[-0x1*-0x9d+0x66*0x4+-0x234],_0x3ff091[-0x1eb0*-0x1+-0x1feb+0x13c]=_0x500cfd[0x3*0x169+-0x997+-0x37*-0x19],_0x3ff091[-0x2540+-0x22d*-0x11+-0x1*-0x46]=_0x39673d,_0x39673d=_0x500cfd[0x1*-0x1644+-0x1994+-0x46*-0xaf],_0x3ff091[-0x4*0x493+-0x97b+0x1bc9]=_0x500cfd[0xae3+-0xe+-0xacf],_0x3ff091[0x9*0x33f+-0x16c0+-0x671]=_0x39673d,_0x39673d=_0x500cfd[0x1*-0x38f+-0x16e+0x502],_0x3ff091[0x1*-0x1b41+-0x1*0x1505+0x304b]=_0x500cfd[0x1c66+-0xfe3+0x22*-0x5e],_0x3ff091[0x1*-0x5f4+0x75c+-0x1*0x161]=_0x39673d;}else _0x3ff091[-0x1408+-0x12b9*0x1+-0x3*-0xceb]=_0x500cfd[0x37*-0x8b+-0x1b32+0x390f],_0x3ff091[0x50*0x7a+-0x883+0x2*-0xece]=_0x500cfd[0x141*0xb+-0x21dd+0x1415],_0x3ff091[0xce9+-0x779+-0x56e]=_0x500cfd[-0x16*0x49+-0x12a*0x1f+0xe*0x307],_0x3ff091[0x1bb*0xc+0x23fa+-0x38bb]=_0x500cfd[-0x650+-0x865+0xeb6],_0x3ff091[0x11*-0x131+-0xf7*-0x13+0x1f0]=_0x500cfd[0x24c6+0x25d*-0x10+0x10e],_0x3ff091[0x2*-0xc0b+0x25f8+0xa9*-0x15]=_0x500cfd[0x27*0x16+-0x1*-0x1b32+-0x1e85],_0x3ff091[-0x2011+-0x2170+0x4187]=_0x500cfd[-0x2*0x86+-0x1fc1+0x1*0x20cf],_0x3ff091[0xa36*0x1+0x4a1+-0x10*0xed]=_0x500cfd[-0x29*-0x73+-0x12ad+-0x47*-0x1],_0x3ff091[0x592+0x6f*-0x4a+0x1a8c]=_0x500cfd[-0x17f5+0x6e1*0x1+0x2da*0x6];return this;}['setFromMat'+'4'](_0x5756d7){const _0x2c5ac9=_0x5756d7['data'],_0xb753be=this['data'];return _0xb753be[-0xaa*0x1+-0x22cd+0x2377]=_0x2c5ac9[-0x1*0xb51+-0xe48*0x1+-0x1999*-0x1],_0xb753be[0x10db+-0x1*0x1247+0x16d]=_0x2c5ac9[0x1d73+-0x23b8+0x646],_0xb753be[-0xfb7+0x28*0xf5+-0x168f]=_0x2c5ac9[-0x239e+0x19ca+0x9d6],_0xb753be[-0x17ea+-0x14ce+0x21*0x15b]=_0x2c5ac9[-0x5*0x335+0x17f8+-0x7eb],_0xb753be[-0x227f+-0xee0+-0x3163*-0x1]=_0x2c5ac9[0x1288+-0x1279+-0x5*0x2],_0xb753be[-0x1*0x1fb9+0x24e8+-0x52a]=_0x2c5ac9[0x23e1+0xf7d+-0xd4*0x3e],_0xb753be[0x1a2*0xe+0x27f*0x5+-0x2351]=_0x2c5ac9[0x2c*0x1f+-0x2222+0x1cd6],_0xb753be[-0x80f+0x1902+-0x10ec]=_0x2c5ac9[0x22ce+0x13d3+-0x3698],_0xb753be[-0x19ab*-0x1+0x1723*0x1+-0x821*0x6]=_0x2c5ac9[0x252b+-0xc44+-0x18dd],this;}['setFromQua'+'t'](_0x2d4f75){const _0x25dd26=_0x2d4f75['x'],_0x12b9d2=_0x2d4f75['y'],_0x2c68cf=_0x2d4f75['z'],_0x43aa4b=_0x2d4f75['w'],_0xfdc990=_0x25dd26+_0x25dd26,_0x54f0aa=_0x12b9d2+_0x12b9d2,_0x19a2f4=_0x2c68cf+_0x2c68cf,_0x8d6604=_0x25dd26*_0xfdc990,_0x2daaba=_0x25dd26*_0x54f0aa,_0xc8b8a5=_0x25dd26*_0x19a2f4,_0x1e73ca=_0x12b9d2*_0x54f0aa,_0x2e1c20=_0x12b9d2*_0x19a2f4,_0x438e52=_0x2c68cf*_0x19a2f4,_0x3f3918=_0x43aa4b*_0xfdc990,_0x52c5c8=_0x43aa4b*_0x54f0aa,_0x2f24e8=_0x43aa4b*_0x19a2f4,_0x52f7e6=this['data'];return _0x52f7e6[-0x19d+-0x1d8e+0x1f2b*0x1]=0x1807+0x223a*-0x1+0xa34-(_0x1e73ca+_0x438e52),_0x52f7e6[0x791+0xc06+-0x17*0xda]=_0x2daaba+_0x2f24e8,_0x52f7e6[-0x188d+-0xc8e*0x1+0x251d]=_0xc8b8a5-_0x52c5c8,_0x52f7e6[0x470*0x4+-0x190b+0x74e]=_0x2daaba-_0x2f24e8,_0x52f7e6[0x1004+0x2331+-0x5*0xa3d]=0x5db*-0x1+-0x1fa3+0x257f-(_0x8d6604+_0x438e52),_0x52f7e6[0xc92*0x1+-0x26e1+0x1a54]=_0x2e1c20+_0x3f3918,_0x52f7e6[0x1*0x3eb+-0x13c3*-0x1+-0x17a8*0x1]=_0xc8b8a5+_0x52c5c8,_0x52f7e6[-0x11f0+0x12a9+0x2*-0x59]=_0x2e1c20-_0x3f3918,_0x52f7e6[-0x1*-0x1ed6+0x3b1*0x3+-0x1*0x29e1]=0x30b*-0x7+-0x20df+-0x9*-0x605-(_0x8d6604+_0x1e73ca),this;}['invertMat4'](_0x13f5ab){const _0x140b50=_0x13f5ab['data'],_0x246023=_0x140b50[-0x6f1+0x1*0x11a9+0x62*-0x1c],_0x29be7c=_0x140b50[-0x1a*-0xef+0x1*0x33b+-0x1b80],_0x217b4a=_0x140b50[-0x3ad+0x16cb*-0x1+-0xd3d*-0x2],_0x4c6465=_0x140b50[0x3d*-0x47+0xdff+0x2f0],_0x43f9db=_0x140b50[0x11ee+0x1*0x679+-0x1862],_0x144505=_0x140b50[-0xa4*-0x2b+-0xa5e*-0x3+-0x3aa0],_0x424541=_0x140b50[-0xff8+0x2248+-0x1248],_0x1f60d5=_0x140b50[0x624+0x1b8d+-0x4*0x86a],_0x5e7c1d=_0x140b50[0x1a42*0x1+0x144b+0xf3*-0x31],_0x426dd4=_0x5e7c1d*_0x43f9db-_0x144505*_0x1f60d5,_0x4f8dd0=-_0x5e7c1d*_0x29be7c+_0x217b4a*_0x1f60d5,_0x333d96=_0x144505*_0x29be7c-_0x217b4a*_0x43f9db,_0xe964b4=-_0x5e7c1d*_0x4c6465+_0x144505*_0x424541,_0x32edcf=_0x5e7c1d*_0x246023-_0x217b4a*_0x424541,_0x23a32c=-_0x144505*_0x246023+_0x217b4a*_0x4c6465,_0x549dba=_0x1f60d5*_0x4c6465-_0x43f9db*_0x424541,_0x4ebdff=-_0x1f60d5*_0x246023+_0x29be7c*_0x424541,_0x3c5e97=_0x43f9db*_0x246023-_0x29be7c*_0x4c6465,_0x4babea=_0x246023*_0x426dd4+_0x29be7c*_0xe964b4+_0x217b4a*_0x549dba;if(_0x4babea===0x2*0x114e+0x127*0x17+-0x3d1d)this['setIdentit'+'y']();else{const _0x307f52=(0x172c+-0x18f4*0x1+0x1c9*0x1)/_0x4babea,_0x427dbb=this['data'];_0x427dbb[0x1*0x192a+-0x1*-0x2276+-0xee8*0x4]=_0x426dd4*_0x307f52,_0x427dbb[0x19b+0xb*-0x31b+0x208f]=_0x4f8dd0*_0x307f52,_0x427dbb[-0x24bb+-0x1e0e+0x42cb*0x1]=_0x333d96*_0x307f52,_0x427dbb[-0x241b+-0x1992*-0x1+0xa8c]=_0xe964b4*_0x307f52,_0x427dbb[0x664*0x3+0x12b5+-0x9*0x435]=_0x32edcf*_0x307f52,_0x427dbb[-0x5*0xa7+-0x469*-0x5+-0x1*0x12c5]=_0x23a32c*_0x307f52,_0x427dbb[0x1f3f+0xb8*0x11+0x3f3*-0xb]=_0x549dba*_0x307f52,_0x427dbb[0x73b+-0x58d+0x2f*-0x9]=_0x4ebdff*_0x307f52,_0x427dbb[0x1050+-0x1948*0x1+0x900]=_0x3c5e97*_0x307f52;}return this;}['transformV'+'ector'](_0x403bc2,_0x1a56bb=new D()){const _0x1caa8b=this['data'],{x:_0x3d93e0,y:_0x46a49c,z:_0x579c8b}=_0x403bc2;return _0x1a56bb['x']=_0x3d93e0*_0x1caa8b[0x1*0x1233+0x2611+0xd*-0x454]+_0x46a49c*_0x1caa8b[0x4a*-0x59+0x9ff*0x1+0xfbe]+_0x579c8b*_0x1caa8b[-0x2*0x1343+0x761*-0x4+0x790*0x9],_0x1a56bb['y']=_0x3d93e0*_0x1caa8b[-0x9c7*0x1+0x206a+-0x2*0xb51]+_0x46a49c*_0x1caa8b[0x5*0x4a+0x10e5+-0x1253]+_0x579c8b*_0x1caa8b[0x2*-0x66d+-0x2c*-0xda+-0x1897*0x1],_0x1a56bb['z']=_0x3d93e0*_0x1caa8b[-0xdd3+-0xa3*0x29+0x27f0]+_0x46a49c*_0x1caa8b[-0x697+0x2*-0x1b3+0xa02]+_0x579c8b*_0x1caa8b[-0x3d*-0x34+0x5*0x665+-0x2c55],_0x1a56bb;}};h(gn,'IDENTITY',Object['freeze'](new gn())),h(gn,'ZERO',Object['freeze'](new gn()['set']([-0x4*0x43c+0x208c+-0x4a*0x36,0x237+-0x13de+0x11a7,-0x5*-0x74b+-0x266c+-0x3*-0xa7,0x12aa*-0x1+-0x1931*-0x1+-0x687,0x577*0x3+0x1a4d+-0x1559*0x2,0x5e+0x1*0x24c5+-0x2523*0x1,-0xc2f+0x1*0x458+0x29d*0x3,-0x15e+0x2fe*-0xd+0x2844,-0x14a6+0x3*-0x9b+-0x77d*-0x3])));let _i=gn;const Gt=class Gt{constructor(_0x4d7739=-0x59*-0xb+0x995+-0xd68,_0x151c6a=0x59*-0x1c+0x573+0x449){h(this,'x'),h(this,'y'),_0x4d7739['length']===0x1*0x1811+-0x15eb+-0x224?(this['x']=_0x4d7739[0xcec+-0x5e8+-0x704],this['y']=_0x4d7739[0x492+0x40*-0x90+0xd*0x26b]):(this['x']=_0x4d7739,this['y']=_0x151c6a);}['add'](_0x24e1af){return this['x']+=_0x24e1af['x'],this['y']+=_0x24e1af['y'],this;}['add2'](_0x18a307,_0x3ba3bb){return this['x']=_0x18a307['x']+_0x3ba3bb['x'],this['y']=_0x18a307['y']+_0x3ba3bb['y'],this;}['addScalar'](_0x5e7f70){return this['x']+=_0x5e7f70,this['y']+=_0x5e7f70,this;}['addScaled'](_0x37675e,_0x599e34){return this['x']+=_0x37675e['x']*_0x599e34,this['y']+=_0x37675e['y']*_0x599e34,this;}['clone'](){const _0x22d00e=this['constructo'+'r'];return new _0x22d00e(this['x'],this['y']);}['copy'](_0x3bef0f){return this['x']=_0x3bef0f['x'],this['y']=_0x3bef0f['y'],this;}['cross'](_0x43a892){return this['x']*_0x43a892['y']-this['y']*_0x43a892['x'];}['distance'](_0x34c04e){const _0x2b1fb9=this['x']-_0x34c04e['x'],_0x57aaea=this['y']-_0x34c04e['y'];return Math['sqrt'](_0x2b1fb9*_0x2b1fb9+_0x57aaea*_0x57aaea);}['div'](_0xad2830){return this['x']/=_0xad2830['x'],this['y']/=_0xad2830['y'],this;}['div2'](_0x29c0e0,_0x1800a3){return this['x']=_0x29c0e0['x']/_0x1800a3['x'],this['y']=_0x29c0e0['y']/_0x1800a3['y'],this;}['divScalar'](_0x1ce2f8){return this['x']/=_0x1ce2f8,this['y']/=_0x1ce2f8,this;}['dot'](_0x505436){return this['x']*_0x505436['x']+this['y']*_0x505436['y'];}['equals'](_0x3d1905){return this['x']===_0x3d1905['x']&&this['y']===_0x3d1905['y'];}['equalsAppr'+'ox'](_0x2540d5,_0x20a321=-0xf*-0xf1+0x1*0x1e97+-0x2cb6+0.000001){return Math['abs'](this['x']-_0x2540d5['x'])<_0x20a321&&Math['abs'](this['y']-_0x2540d5['y'])<_0x20a321;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y'];}['lerp'](_0x385b7f,_0x3d7c63,_0x15a4af){return this['x']=_0x385b7f['x']+_0x15a4af*(_0x3d7c63['x']-_0x385b7f['x']),this['y']=_0x385b7f['y']+_0x15a4af*(_0x3d7c63['y']-_0x385b7f['y']),this;}['mul'](_0x534d61){return this['x']*=_0x534d61['x'],this['y']*=_0x534d61['y'],this;}['mul2'](_0x48b3c7,_0x302ad0){return this['x']=_0x48b3c7['x']*_0x302ad0['x'],this['y']=_0x48b3c7['y']*_0x302ad0['y'],this;}['mulScalar'](_0xbd7af){return this['x']*=_0xbd7af,this['y']*=_0xbd7af,this;}['normalize'](_0x19722a=this){const _0x416f0f=_0x19722a['x']*_0x19722a['x']+_0x19722a['y']*_0x19722a['y'];if(_0x416f0f>0x14e9+0x475*-0x5+-0x8*-0x2c){const _0x4665ea=(0x147*0x15+0x31d+0x61*-0x4f)/Math['sqrt'](_0x416f0f);this['x']=_0x19722a['x']*_0x4665ea,this['y']=_0x19722a['y']*_0x4665ea;}return this;}['rotate'](_0x22a811){const _0x50fe5c=Math['atan2'](this['x'],this['y'])+_0x22a811*Y['DEG_TO_RAD'],_0x5bf792=Math['sqrt'](this['x']*this['x']+this['y']*this['y']);return this['x']=Math['sin'](_0x50fe5c)*_0x5bf792,this['y']=Math['cos'](_0x50fe5c)*_0x5bf792,this;}['angle'](){return Math['atan2'](this['x'],this['y'])*Y['RAD_TO_DEG'];}['angleTo'](_0x1a6820){return Math['atan2'](this['x']*_0x1a6820['y']+this['y']*_0x1a6820['x'],this['x']*_0x1a6820['x']+this['y']*_0x1a6820['y'])*Y['RAD_TO_DEG'];}['floor'](_0x35ab93=this){return this['x']=Math['floor'](_0x35ab93['x']),this['y']=Math['floor'](_0x35ab93['y']),this;}['ceil'](_0x3dfeef=this){return this['x']=Math['ceil'](_0x3dfeef['x']),this['y']=Math['ceil'](_0x3dfeef['y']),this;}['round'](_0x5ea2d6=this){return this['x']=Math['round'](_0x5ea2d6['x']),this['y']=Math['round'](_0x5ea2d6['y']),this;}['min'](_0x19d7c2){return _0x19d7c2['x']<this['x']&&(this['x']=_0x19d7c2['x']),_0x19d7c2['y']<this['y']&&(this['y']=_0x19d7c2['y']),this;}['max'](_0x35650f){return _0x35650f['x']>this['x']&&(this['x']=_0x35650f['x']),_0x35650f['y']>this['y']&&(this['y']=_0x35650f['y']),this;}['set'](_0x2724d8,_0x54b83c){return this['x']=_0x2724d8,this['y']=_0x54b83c,this;}['sub'](_0x523c1f){return this['x']-=_0x523c1f['x'],this['y']-=_0x523c1f['y'],this;}['sub2'](_0x383af5,_0x159b67){return this['x']=_0x383af5['x']-_0x159b67['x'],this['y']=_0x383af5['y']-_0x159b67['y'],this;}['subScalar'](_0x44eb7b){return this['x']-=_0x44eb7b,this['y']-=_0x44eb7b,this;}['fromArray'](_0x389cfc,_0x173ce9=0x3b*-0x55+-0x2168+0x1*0x34ff){return this['x']=_0x389cfc[_0x173ce9]??this['x'],this['y']=_0x389cfc[_0x173ce9+(-0x120+-0x1d0+-0x3*-0xfb)]??this['y'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+']';}['toArray'](_0x423a23=[],_0xd96986=-0xc*-0x29c+-0x856+-0x16fa){return _0x423a23[_0xd96986]=this['x'],_0x423a23[_0xd96986+(-0x125b+-0x2448+-0x4*-0xda9)]=this['y'],_0x423a23;}static['angleRad'](_0x276bc0,_0x3b580c){return Math['atan2'](_0x276bc0['x']*_0x3b580c['y']-_0x276bc0['y']*_0x3b580c['x'],_0x276bc0['x']*_0x3b580c['x']+_0x276bc0['y']*_0x3b580c['y']);}};h(Gt,'ZERO',Object['freeze'](new Gt(-0xde0+-0x17*-0x17e+0x1*-0x1472,0x133*0x1d+0x1316+-0x35dd))),h(Gt,'HALF',Object['freeze'](new Gt(0x1d4d*-0x1+-0x4a7*-0x5+0x60a+0.5,-0x74c*0x2+0x1bce+-0xd36*0x1+0.5))),h(Gt,'ONE',Object['freeze'](new Gt(0x13*0xec+0x261e+-0x12f*0x2f,0x2f*0x10+-0x1e*-0x31+-0x8ad))),h(Gt,'UP',Object['freeze'](new Gt(-0x10c5+0xb02+0x5c3,0x262+-0x183b+0x15da))),h(Gt,'DOWN',Object['freeze'](new Gt(-0x2627*-0x1+-0x12b*-0x1+-0x2752,-(0x17d2+-0x193*-0xd+-0x1b4*0x1a)))),h(Gt,'RIGHT',Object['freeze'](new Gt(-0x440*0x1+-0x3b*0x53+-0x29*-0x92,0x9*-0x6b+-0x902*0x3+-0xa43*-0x3))),h(Gt,'LEFT',Object['freeze'](new Gt(-(0x1a3d+-0x13f5+-0x1*0x647),-0x452*0x1+-0x4f*0x6a+-0xed*-0x28)));let J=Gt;const pr=class pr{constructor(_0x4bf4a0=0x465+-0x1794+0x665*0x3,_0x1d7926=-0xf41+0xafb*-0x1+0x92*0x2e,_0x4a45ff=0x2*-0x9a1+0x36e+0xfd4,_0x5e9e1b=-0x995+-0x13*-0x11+0x163*0x6){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x4bf4a0['length']===-0xb*0x7e+0x22d3+-0x1d65?(this['x']=_0x4bf4a0[0x11*0x1cf+-0x1*-0x249b+-0x435a],this['y']=_0x4bf4a0[0x22ab+-0x2db*0xb+-0x341],this['z']=_0x4bf4a0[0x99*-0x9+0x2ab*0x1+-0x3a*-0xc],this['w']=_0x4bf4a0[-0x2*0x905+0x24+0x11e9]):(this['x']=_0x4bf4a0,this['y']=_0x1d7926,this['z']=_0x4a45ff,this['w']=_0x5e9e1b);}['add'](_0x2b52c9){return this['x']+=_0x2b52c9['x'],this['y']+=_0x2b52c9['y'],this['z']+=_0x2b52c9['z'],this['w']+=_0x2b52c9['w'],this;}['add2'](_0x19f69b,_0x4bf2b3){return this['x']=_0x19f69b['x']+_0x4bf2b3['x'],this['y']=_0x19f69b['y']+_0x4bf2b3['y'],this['z']=_0x19f69b['z']+_0x4bf2b3['z'],this['w']=_0x19f69b['w']+_0x4bf2b3['w'],this;}['addScalar'](_0x1120bd){return this['x']+=_0x1120bd,this['y']+=_0x1120bd,this['z']+=_0x1120bd,this['w']+=_0x1120bd,this;}['addScaled'](_0x5c8678,_0x2af6eb){return this['x']+=_0x5c8678['x']*_0x2af6eb,this['y']+=_0x5c8678['y']*_0x2af6eb,this['z']+=_0x5c8678['z']*_0x2af6eb,this['w']+=_0x5c8678['w']*_0x2af6eb,this;}['clone'](){const _0x1c6b1c=this['constructo'+'r'];return new _0x1c6b1c(this['x'],this['y'],this['z'],this['w']);}['copy'](_0x4485a3){return this['x']=_0x4485a3['x'],this['y']=_0x4485a3['y'],this['z']=_0x4485a3['z'],this['w']=_0x4485a3['w'],this;}['div'](_0x55f7f6){return this['x']/=_0x55f7f6['x'],this['y']/=_0x55f7f6['y'],this['z']/=_0x55f7f6['z'],this['w']/=_0x55f7f6['w'],this;}['div2'](_0x46a11b,_0x16d333){return this['x']=_0x46a11b['x']/_0x16d333['x'],this['y']=_0x46a11b['y']/_0x16d333['y'],this['z']=_0x46a11b['z']/_0x16d333['z'],this['w']=_0x46a11b['w']/_0x16d333['w'],this;}['divScalar'](_0x54bc7e){return this['x']/=_0x54bc7e,this['y']/=_0x54bc7e,this['z']/=_0x54bc7e,this['w']/=_0x54bc7e,this;}['dot'](_0x394857){return this['x']*_0x394857['x']+this['y']*_0x394857['y']+this['z']*_0x394857['z']+this['w']*_0x394857['w'];}['equals'](_0x108bc1){return this['x']===_0x108bc1['x']&&this['y']===_0x108bc1['y']&&this['z']===_0x108bc1['z']&&this['w']===_0x108bc1['w'];}['equalsAppr'+'ox'](_0x1def9b,_0x4e1adf=0x10*0x1d3+-0x1f5a+0x1*0x22a+0.000001){return Math['abs'](this['x']-_0x1def9b['x'])<_0x4e1adf&&Math['abs'](this['y']-_0x1def9b['y'])<_0x4e1adf&&Math['abs'](this['z']-_0x1def9b['z'])<_0x4e1adf&&Math['abs'](this['w']-_0x1def9b['w'])<_0x4e1adf;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x22fca1,_0x5a79b1,_0x2f7d04){return this['x']=_0x22fca1['x']+_0x2f7d04*(_0x5a79b1['x']-_0x22fca1['x']),this['y']=_0x22fca1['y']+_0x2f7d04*(_0x5a79b1['y']-_0x22fca1['y']),this['z']=_0x22fca1['z']+_0x2f7d04*(_0x5a79b1['z']-_0x22fca1['z']),this['w']=_0x22fca1['w']+_0x2f7d04*(_0x5a79b1['w']-_0x22fca1['w']),this;}['mul'](_0x4f36d8){return this['x']*=_0x4f36d8['x'],this['y']*=_0x4f36d8['y'],this['z']*=_0x4f36d8['z'],this['w']*=_0x4f36d8['w'],this;}['mul2'](_0xeea0a7,_0x5df3f9){return this['x']=_0xeea0a7['x']*_0x5df3f9['x'],this['y']=_0xeea0a7['y']*_0x5df3f9['y'],this['z']=_0xeea0a7['z']*_0x5df3f9['z'],this['w']=_0xeea0a7['w']*_0x5df3f9['w'],this;}['mulScalar'](_0x509ea5){return this['x']*=_0x509ea5,this['y']*=_0x509ea5,this['z']*=_0x509ea5,this['w']*=_0x509ea5,this;}['normalize'](_0x53b518=this){const _0x462e55=_0x53b518['x']*_0x53b518['x']+_0x53b518['y']*_0x53b518['y']+_0x53b518['z']*_0x53b518['z']+_0x53b518['w']*_0x53b518['w'];if(_0x462e55>0x16f3+-0x9af+-0xd44){const _0x2b8eb2=(0x23c5+0x242f+-0xa3*0x71)/Math['sqrt'](_0x462e55);this['x']=_0x53b518['x']*_0x2b8eb2,this['y']=_0x53b518['y']*_0x2b8eb2,this['z']=_0x53b518['z']*_0x2b8eb2,this['w']=_0x53b518['w']*_0x2b8eb2;}return this;}['floor'](_0x5ba59a=this){return this['x']=Math['floor'](_0x5ba59a['x']),this['y']=Math['floor'](_0x5ba59a['y']),this['z']=Math['floor'](_0x5ba59a['z']),this['w']=Math['floor'](_0x5ba59a['w']),this;}['ceil'](_0x30cf9b=this){return this['x']=Math['ceil'](_0x30cf9b['x']),this['y']=Math['ceil'](_0x30cf9b['y']),this['z']=Math['ceil'](_0x30cf9b['z']),this['w']=Math['ceil'](_0x30cf9b['w']),this;}['round'](_0xf9c2d2=this){return this['x']=Math['round'](_0xf9c2d2['x']),this['y']=Math['round'](_0xf9c2d2['y']),this['z']=Math['round'](_0xf9c2d2['z']),this['w']=Math['round'](_0xf9c2d2['w']),this;}['min'](_0x55be3f){return _0x55be3f['x']<this['x']&&(this['x']=_0x55be3f['x']),_0x55be3f['y']<this['y']&&(this['y']=_0x55be3f['y']),_0x55be3f['z']<this['z']&&(this['z']=_0x55be3f['z']),_0x55be3f['w']<this['w']&&(this['w']=_0x55be3f['w']),this;}['max'](_0x16b674){return _0x16b674['x']>this['x']&&(this['x']=_0x16b674['x']),_0x16b674['y']>this['y']&&(this['y']=_0x16b674['y']),_0x16b674['z']>this['z']&&(this['z']=_0x16b674['z']),_0x16b674['w']>this['w']&&(this['w']=_0x16b674['w']),this;}['set'](_0x1acd19,_0x58cffb,_0x3891b7,_0x579ff5){return this['x']=_0x1acd19,this['y']=_0x58cffb,this['z']=_0x3891b7,this['w']=_0x579ff5,this;}['sub'](_0x1f7c0e){return this['x']-=_0x1f7c0e['x'],this['y']-=_0x1f7c0e['y'],this['z']-=_0x1f7c0e['z'],this['w']-=_0x1f7c0e['w'],this;}['sub2'](_0x2d681a,_0xf85821){return this['x']=_0x2d681a['x']-_0xf85821['x'],this['y']=_0x2d681a['y']-_0xf85821['y'],this['z']=_0x2d681a['z']-_0xf85821['z'],this['w']=_0x2d681a['w']-_0xf85821['w'],this;}['subScalar'](_0x4e0170){return this['x']-=_0x4e0170,this['y']-=_0x4e0170,this['z']-=_0x4e0170,this['w']-=_0x4e0170,this;}['fromArray'](_0x625299,_0x22349a=-0x7de+-0x331*0x6+0x6c1*0x4){return this['x']=_0x625299[_0x22349a]??this['x'],this['y']=_0x625299[_0x22349a+(-0x1ed8+-0x865+-0x2*-0x139f)]??this['y'],this['z']=_0x625299[_0x22349a+(0x25e1+0xa1d+0x4*-0xbff)]??this['z'],this['w']=_0x625299[_0x22349a+(-0x24c+0x18ed*0x1+0x3*-0x78a)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x21d2de=[],_0x44ea3e=-0x1e4a*-0x1+0x926*0x2+-0x3096){return _0x21d2de[_0x44ea3e]=this['x'],_0x21d2de[_0x44ea3e+(0x972+0x2130+-0x2aa1)]=this['y'],_0x21d2de[_0x44ea3e+(0x6fe+-0x1c00+0x1504)]=this['z'],_0x21d2de[_0x44ea3e+(-0xf9c+0x2*-0x503+0x19a5)]=this['w'],_0x21d2de;}};h(pr,'ZERO',Object['freeze'](new pr(-0x1*-0x1ef1+0x22ab+-0x286*0x1a,0xb*0x2f2+0x510*-0x6+0x7*-0x4a,-0x1*-0xed7+-0x7d8+-0x3*0x255,-0xbb4+-0x21ea+-0x16cf*-0x2))),h(pr,'HALF',Object['freeze'](new pr(0x260a+-0x1086+-0x1584+0.5,-0x3*0x283+0xe9*0x23+-0xb*0x236+0.5,-0x3*-0x93c+0x2dc*-0x1+0x109*-0x18+0.5,-0x13d*0x19+-0x15f1*-0x1+0x904*0x1+0.5))),h(pr,'ONE',Object['freeze'](new pr(0x88f*-0x4+0xeed+0x1350,0x136d*-0x1+0x3e*0x42+0x372,0xe3*0x17+0x5*-0x146+-0x2ce*0x5,-0xa0e+-0xd45*-0x2+0x1*-0x107b)));let re=pr;const to=new J(),Os=new D(),Js=new D(),ei=new D(),Hl=new D(),Qr=class Qr{constructor(){h(this,'data',new Float32Array(0x8*-0x437+0x61b+0x1bad)),this['data'][0xbce*0x1+-0x185*-0x3+-0x3b*0x47]=this['data'][-0x20ec+0xfbd+-0x1*-0x1134]=this['data'][0x13e0+-0x239d+0xfc7*0x1]=this['data'][-0x1*0x254b+0x19a5+0xbb5]=0x161d+0x6f*0x12+-0x446*0x7;}static['_getPerspe'+'ctiveHalfS'+'ize'](_0x17d6a5,_0x3626fc,_0x511c5e,_0x39f403,_0xe7acc8){_0xe7acc8?(_0x17d6a5['x']=_0x39f403*Math['tan'](_0x3626fc*Math['PI']/(-0x196d+-0xf01+0x29d6)),_0x17d6a5['y']=_0x17d6a5['x']/_0x511c5e):(_0x17d6a5['y']=_0x39f403*Math['tan'](_0x3626fc*Math['PI']/(-0x1cc5+-0x938+0x2765)),_0x17d6a5['x']=_0x17d6a5['y']*_0x511c5e);}['add2'](_0x57f306,_0x356161){const _0x5d6fdb=_0x57f306['data'],_0x41b3d1=_0x356161['data'],_0x2f07d9=this['data'];return _0x2f07d9[0x1*0xfc4+-0x1274+0x2b0]=_0x5d6fdb[0xfb*-0x20+-0x1ea3+-0x5*-0xc67]+_0x41b3d1[0xd4*0x11+0xbba+-0x19ce],_0x2f07d9[-0x1c41+-0x1*0x1da3+-0x1*-0x39e5]=_0x5d6fdb[-0xa96+-0xb39+0x15d0]+_0x41b3d1[0x2dd*-0x9+-0xcff+0x1*0x26c5],_0x2f07d9[0x26ef+0x184d*-0x1+0x1a0*-0x9]=_0x5d6fdb[0x7*0x2ba+0x1*0x1a15+-0x2d29]+_0x41b3d1[0x1*0xc83+-0xa05+0x1*-0x27c],_0x2f07d9[0xf05*0x1+-0x1894+0x992]=_0x5d6fdb[0x18ff+0x1dc0+-0x36bc]+_0x41b3d1[0x23b3+0x1913+0x11*-0x393],_0x2f07d9[0x1220+-0x2*-0x7bb+-0x2192]=_0x5d6fdb[0x409*-0x3+-0xbbe+0x29*0x95]+_0x41b3d1[-0xe81+-0x8a1+0x1*0x1726],_0x2f07d9[0x8e0+0x303*-0x3+0x1*0x2e]=_0x5d6fdb[0x200d*-0x1+0x236b*-0x1+0x437d]+_0x41b3d1[-0x2b6+-0x2349*-0x1+0x2*-0x1047],_0x2f07d9[0x1d*-0x18+0x18b5+0x1*-0x15f7]=_0x5d6fdb[0x266*0x4+0x455*-0x1+0x53d*-0x1]+_0x41b3d1[-0x188c+-0x194b+0x31dd],_0x2f07d9[0x12df+-0x1686+0x1*0x3ae]=_0x5d6fdb[0x1*-0x4ae+-0x37*-0x8a+-0x18f1]+_0x41b3d1[-0x2*-0x679+-0x9b7+-0x334*0x1],_0x2f07d9[0x1bb2+-0x73c*0x1+0x416*-0x5]=_0x5d6fdb[-0x3*-0x9ba+0x397*-0x1+-0x198f]+_0x41b3d1[0x39*-0x3b+-0xc*0x79+0x12d7],_0x2f07d9[0x1*0xe8+-0x7*-0x31c+-0x487*0x5]=_0x5d6fdb[-0x474+0x1750+-0x12d3]+_0x41b3d1[0xfda+0x3*0xc77+0x79a*-0x7],_0x2f07d9[-0x1f98+0x8f9+0x16a9]=_0x5d6fdb[0x1*-0x1f7f+0x767+0x1822*0x1]+_0x41b3d1[0x11b6+0x5f*0x65+-0x1*0x3727],_0x2f07d9[0x228c+0x150a+0xf1*-0x3b]=_0x5d6fdb[-0x1356+0x2*0x3e6+0xb95]+_0x41b3d1[0x2030+-0x64*0x1f+-0x17*0xdf],_0x2f07d9[-0xfc+-0x59f*-0x6+-0x5d*0x5a]=_0x5d6fdb[-0x281*0xd+-0x1*0x4a2+0x1b*0x161]+_0x41b3d1[-0x26de+0x2*-0xb38+0x3d5a],_0x2f07d9[0x12c8+-0x2426+0x116b]=_0x5d6fdb[-0xc47+0x7ee+0x466]+_0x41b3d1[-0xa*-0x25c+0x33f+-0x1aca],_0x2f07d9[0x1*-0x224d+-0x1*0x1387+0x79*0x72]=_0x5d6fdb[-0x6d9+-0x3*0xcb3+0x2d00]+_0x41b3d1[-0xb*0x9c+0x2*0x37c+0x36*-0x1],_0x2f07d9[0x153+0x1663*0x1+-0x17a7]=_0x5d6fdb[-0x254c+-0xb8a+0x1*0x30e5]+_0x41b3d1[0xc7*-0x1c+-0x2*0x482+0x1ed7],this;}['add'](_0x4258ae){return this['add2'](this,_0x4258ae);}['clone'](){const _0x878eb9=this['constructo'+'r'];return new _0x878eb9()['copy'](this);}['copy'](_0x433f5a){const _0x355fb9=_0x433f5a['data'],_0x55585b=this['data'];return _0x55585b[0x155+0x2696+-0x27eb]=_0x355fb9[0x24ef+-0x1051+-0x2*0xa4f],_0x55585b[0x85f*-0x1+0x1d*0x10f+-0x477*0x5]=_0x355fb9[0x2319+0x2*0x128c+-0x15*0x370],_0x55585b[0xbb1+-0x1068+0x4b9]=_0x355fb9[0x244b+-0x1e73*-0x1+-0x215e*0x2],_0x55585b[-0x604+0x3*0x59b+-0x1*0xaca]=_0x355fb9[-0x11*0x2f+-0x14e7*-0x1+-0x11c5],_0x55585b[-0x8e0+-0x268f*0x1+0x1*0x2f73]=_0x355fb9[0x5a*-0x8+0x133d*-0x2+0x294e],_0x55585b[0x157d+-0x1822+0x2aa]=_0x355fb9[0xef7+-0x1cb8+0xdc6],_0x55585b[-0xf88+-0x1*-0x317+-0x1*-0xc77]=_0x355fb9[0xb7c+0x1e90+-0x2a06],_0x55585b[-0xd90+-0x3b7+0x8a7*0x2]=_0x355fb9[-0x267a+-0xc1*-0x2e+0x3d3],_0x55585b[-0xccf*-0x3+-0x869*0x1+-0x65*0x4c]=_0x355fb9[-0x1c89+0x38c+-0x1ab*-0xf],_0x55585b[0x1271*0x1+0x12*0x135+-0x2822]=_0x355fb9[-0x144d+-0xd*-0x91+0x171*0x9],_0x55585b[0x1*0x1e51+-0x3b*0xa9+0x8ac]=_0x355fb9[0x3be*0x4+0x73*0x4+-0x10ba],_0x55585b[-0x1c55*0x1+-0xa09+-0x2669*-0x1]=_0x355fb9[0x220b+-0x1dff+-0x401],_0x55585b[0x54*-0x70+0x15c1+0xf0b]=_0x355fb9[-0x1*-0xc52+0x2*-0x593+-0x120],_0x55585b[0x1ec9+-0x1*0x1b77+-0x9*0x5d]=_0x355fb9[-0x1699+0x2*0x69a+0x972],_0x55585b[0xdfd*-0x1+0x180c+-0xa01]=_0x355fb9[0x1f*0x131+0x1ff0+-0x44d1],_0x55585b[-0x2d*0x96+0xf64+0x5*0x235]=_0x355fb9[-0x25df+0x4b1*0x1+-0x7f*-0x43],this;}['equals'](_0x3021b5){const _0x93b723=this['data'],_0x3175f9=_0x3021b5['data'];return _0x93b723[-0xaf5*0x1+0x1*0x1261+-0x4*0x1db]===_0x3175f9[0x1c13+-0x7a3+-0x1470]&&_0x93b723[-0xcce+0x17f5+-0xb26]===_0x3175f9[0x31*0x28+-0x13e1+0xc3a]&&_0x93b723[-0x2321+-0x1a1c+0x3d3f*0x1]===_0x3175f9[0xc5*-0x3+-0x2*0xcb5+0x1bbb]&&_0x93b723[-0x39a*0x7+0xe52+0xae7*0x1]===_0x3175f9[-0x1ca6+-0x3*0x5f3+0x2e82]&&_0x93b723[-0x1984+0x300*0x5+-0x151*-0x8]===_0x3175f9[0x26e+-0x1afb+0x1891]&&_0x93b723[0x271*-0x8+0x1017+-0x1*-0x376]===_0x3175f9[-0x2179+-0x6e6+-0x814*-0x5]&&_0x93b723[-0x152b+-0x1935+0x2e66]===_0x3175f9[0xd8f+0x4*-0x101+0x1*-0x985]&&_0x93b723[0xa86+-0x2062+-0xd*-0x1af]===_0x3175f9[0xad9+-0xd*0x2d5+0x19ff]&&_0x93b723[-0x192d+-0x14*0x6d+0x59*0x61]===_0x3175f9[0x53*0x2+0xbe1*-0x1+0xb43]&&_0x93b723[-0x1d41+0x1c66+-0x4c*-0x3]===_0x3175f9[-0x2*-0x420+0x250d+-0x2d44]&&_0x93b723[-0x56*0x66+0x4*-0x1dd+0x42d*0xa]===_0x3175f9[-0x1bc7*0x1+0x2*-0xdc1+-0x1271*-0x3]&&_0x93b723[-0x1*0x13e9+-0x5b3+-0x19a7*-0x1]===_0x3175f9[0x22bf+-0xd19+-0x159b]&&_0x93b723[-0x15f1*0x1+0x5*-0x5ea+0x338f]===_0x3175f9[-0x2621+0x21e6+0x5*0xdb]&&_0x93b723[-0x2693+-0x3*0x7bf+0x1*0x3ddd]===_0x3175f9[0x57*0x56+0x121*0x5+-0x22d2]&&_0x93b723[-0x19*-0x29+0x23ad*-0x1+0x106*0x1f]===_0x3175f9[-0x1055*-0x1+0x313*0x8+-0x1*0x28df]&&_0x93b723[-0x1429+-0x6ab*0x1+0x1ae3]===_0x3175f9[0x2674+-0x1eb*0x2+-0x228f];}['isIdentity'](){const _0x462bc7=this['data'];return _0x462bc7[0x270+-0x24c0+-0xf4*-0x24]===-0x2180+-0x862+0x29e3&&_0x462bc7[-0xf5d+-0x1d*-0x42+0x4*0x1f9]===0x5f9*0x2+0x14c4+-0x20b6&&_0x462bc7[0x1401+0xb46+-0x1f45]===0xbb3+-0x14b5+0x902&&_0x462bc7[0xf93+-0x1*0x1796+0x806]===0xc49+-0xd3*0x1+0x5bb*-0x2&&_0x462bc7[-0x1fb4+-0x2*-0x102d+-0xa2]===-0x3*0x94b+-0x2*0x104e+0x32f*0x13&&_0x462bc7[-0x117f+0x1db*0x1+-0x13*-0xd3]===0x23d1+-0x2*0x3ee+-0x2*0xdfa&&_0x462bc7[0xce*-0x2+0x2029+0x1*-0x1e87]===0x1c3b+0x1c42+-0x387d&&_0x462bc7[0x9d*-0x31+-0x14fb+0x330f]===-0x25*-0x13+0x1415+-0x16d4&&_0x462bc7[-0x4*-0x4c6+0xa3*-0x1f+0xad]===0x1*-0xcd4+0xe93+-0x1bf*0x1&&_0x462bc7[-0x44d+-0xa*0xc5+0xc08]===-0x4de+-0x9e*-0x33+-0x106*0x1a&&_0x462bc7[-0x1b*0xc7+0x1651+0xf*-0x16]===-0x226e+0xce*-0x8+0x28df&&_0x462bc7[0x1d22+-0x197*-0x15+-0x1*0x3e7a]===0xbb1*0x1+-0x105a+0x4a9&&_0x462bc7[-0x1167+0x25*0x99+-0x3*0x18e]===0x129*0x9+0x2282+-0x1*0x2cf3&&_0x462bc7[0x11f+-0xced+0xbdb]===0xc0d*-0x3+0x26*-0x103+-0xa9*-0x71&&_0x462bc7[0x87+0x80*0x4c+-0xc9*0x31]===-0x38*-0x24+-0x16bc+-0x3*-0x4f4&&_0x462bc7[0x1*-0x655+-0x23*0x16+-0x2*-0x4b3]===-0xe*-0xc5+-0x569*-0x7+-0x16*0x236;}['mul2'](_0x26daa9,_0x210c89){const _0x45c8bb=_0x26daa9['data'],_0x44b9a6=_0x210c89['data'],_0x30bd16=this['data'],_0x4e4b14=_0x45c8bb[0x1c75+0x4*0x344+-0x2985],_0x315723=_0x45c8bb[0x201e*-0x1+-0x1f2*-0x4+0x43*0x5d],_0x45032b=_0x45c8bb[0x256c+-0xf86+-0x15e4],_0x4e3619=_0x45c8bb[-0x1c*-0xbe+0x13*-0x98+-0x97d*0x1],_0x1c0844=_0x45c8bb[0x4cb*0x3+-0x2*0x37e+-0x761],_0xb92093=_0x45c8bb[0x133e+0x172b*0x1+-0x2*0x1532],_0x6a9df3=_0x45c8bb[-0x74f*-0x2+0xda1*-0x1+-0xf7],_0x374197=_0x45c8bb[0x1*0x45f+0x57*0x35+0x1*-0x165b],_0x2e72b4=_0x45c8bb[-0x2232+0x20c5+0x175],_0x54fd90=_0x45c8bb[-0x1*0x1df+0x1881+-0x1699],_0x972f11=_0x45c8bb[0x9*0x115+-0x1*0x9e8+0x35],_0x4258c3=_0x45c8bb[0x11ba*0x1+-0xc7a+-0x535],_0x33cf66=_0x45c8bb[0x15b2*0x1+-0x960+0xc46*-0x1],_0x524288=_0x45c8bb[0x225b+0x1*0x13f9+0xadb*-0x5],_0x218737=_0x45c8bb[-0x23f0+-0x26a1+-0x4a9f*-0x1],_0x51c534=_0x45c8bb[0x1*0x1aad+0x17a5*0x1+-0x3243];let _0x2d6238,_0x24208d,_0x54dc04,_0x52d67b;return _0x2d6238=_0x44b9a6[0x875+0x1795*0x1+-0x557*0x6],_0x24208d=_0x44b9a6[0x4*0x15f+0x647+-0xbc2],_0x54dc04=_0x44b9a6[-0x26cc+-0x4*0x636+0x2*0x1fd3],_0x52d67b=_0x44b9a6[-0x12a9*-0x1+-0xb1*0x34+0x114e],_0x30bd16[-0x7*-0x351+0x1c13+0x19a5*-0x2]=_0x4e4b14*_0x2d6238+_0x1c0844*_0x24208d+_0x2e72b4*_0x54dc04+_0x33cf66*_0x52d67b,_0x30bd16[0x31c+-0x577*-0x6+0x1*-0x23e5]=_0x315723*_0x2d6238+_0xb92093*_0x24208d+_0x54fd90*_0x54dc04+_0x524288*_0x52d67b,_0x30bd16[0x110f*0x1+-0xe9a+-0x273]=_0x45032b*_0x2d6238+_0x6a9df3*_0x24208d+_0x972f11*_0x54dc04+_0x218737*_0x52d67b,_0x30bd16[-0xa3*-0xf+-0x2*0x10f1+0x8*0x30b]=_0x4e3619*_0x2d6238+_0x374197*_0x24208d+_0x4258c3*_0x54dc04+_0x51c534*_0x52d67b,_0x2d6238=_0x44b9a6[-0x4*0x6d2+-0x2*-0x1175+-0x79e],_0x24208d=_0x44b9a6[0x1*-0x53c+-0x1c*-0xd7+-0x5*0x3a7],_0x54dc04=_0x44b9a6[0x118*-0x15+0xb*0x37+0x14a1*0x1],_0x52d67b=_0x44b9a6[0xe15*-0x1+-0x1bb6+0x1*0x29d2],_0x30bd16[-0x1220+0xc61*-0x3+0x3747]=_0x4e4b14*_0x2d6238+_0x1c0844*_0x24208d+_0x2e72b4*_0x54dc04+_0x33cf66*_0x52d67b,_0x30bd16[-0x1c39+0x1d0a+-0xcc]=_0x315723*_0x2d6238+_0xb92093*_0x24208d+_0x54fd90*_0x54dc04+_0x524288*_0x52d67b,_0x30bd16[0x20a5+-0x6e5*0x3+0xbf0*-0x1]=_0x45032b*_0x2d6238+_0x6a9df3*_0x24208d+_0x972f11*_0x54dc04+_0x218737*_0x52d67b,_0x30bd16[0x14*0x1+0x15d2+-0x15df]=_0x4e3619*_0x2d6238+_0x374197*_0x24208d+_0x4258c3*_0x54dc04+_0x51c534*_0x52d67b,_0x2d6238=_0x44b9a6[0x1*0x147d+0x1ffd*0x1+-0x3472],_0x24208d=_0x44b9a6[-0x22*-0x68+-0x76+-0xd51],_0x54dc04=_0x44b9a6[-0x77+0x1d2*-0x15+0x26bb],_0x52d67b=_0x44b9a6[-0x1cb5*-0x1+0x1*0x1c22+-0x38cc],_0x30bd16[0x1846+0x1723+-0xd*0x3a5]=_0x4e4b14*_0x2d6238+_0x1c0844*_0x24208d+_0x2e72b4*_0x54dc04+_0x33cf66*_0x52d67b,_0x30bd16[0x2fd+0xd7a+0x2*-0x837]=_0x315723*_0x2d6238+_0xb92093*_0x24208d+_0x54fd90*_0x54dc04+_0x524288*_0x52d67b,_0x30bd16[-0x4*-0x849+-0x1*-0x1d62+-0x3e7c]=_0x45032b*_0x2d6238+_0x6a9df3*_0x24208d+_0x972f11*_0x54dc04+_0x218737*_0x52d67b,_0x30bd16[-0x131d+0x2de+0x825*0x2]=_0x4e3619*_0x2d6238+_0x374197*_0x24208d+_0x4258c3*_0x54dc04+_0x51c534*_0x52d67b,_0x2d6238=_0x44b9a6[-0x70f+0xd40+-0x625],_0x24208d=_0x44b9a6[0x25*0xed+-0x5b5+0x5b3*-0x5],_0x54dc04=_0x44b9a6[0x138+0xe36+-0xf60],_0x52d67b=_0x44b9a6[-0x586+-0x71*0x11+0xd16],_0x30bd16[-0x1cb5*0x1+0x4*0x71+0x1afd]=_0x4e4b14*_0x2d6238+_0x1c0844*_0x24208d+_0x2e72b4*_0x54dc04+_0x33cf66*_0x52d67b,_0x30bd16[-0xec6+0xb9f+0x14*0x29]=_0x315723*_0x2d6238+_0xb92093*_0x24208d+_0x54fd90*_0x54dc04+_0x524288*_0x52d67b,_0x30bd16[0x87b+0x1077+-0x18e4]=_0x45032b*_0x2d6238+_0x6a9df3*_0x24208d+_0x972f11*_0x54dc04+_0x218737*_0x52d67b,_0x30bd16[-0x1*0xcbd+0x499+0x833]=_0x4e3619*_0x2d6238+_0x374197*_0x24208d+_0x4258c3*_0x54dc04+_0x51c534*_0x52d67b,this;}['mulAffine2'](_0x25e74a,_0x300669){const _0xcd390e=_0x25e74a['data'],_0x11f1e5=_0x300669['data'],_0x54eda6=this['data'],_0x28ebad=_0xcd390e[0x9ea+0x88e+-0x1278],_0x48ec64=_0xcd390e[-0x554+-0x2*0x95f+0x1813],_0x23dda9=_0xcd390e[-0x1134+0x9*-0x44f+0x37fd],_0x301ded=_0xcd390e[-0x7*0x40b+0x512+0x173f*0x1],_0x266542=_0xcd390e[0x9fb+0x1746+-0x6*0x58a],_0x3dfa4c=_0xcd390e[0x1f3f+-0x1bf*-0x3+-0x167*0x1a],_0x2846f0=_0xcd390e[-0x2*-0xb03+-0x118c+-0x1*0x472],_0x25b5fa=_0xcd390e[0xca1+0x19ea+-0x2682],_0x3dbee5=_0xcd390e[-0xef*-0x19+-0xfdf+-0x2*0x3b7],_0x53d090=_0xcd390e[0xc*0x189+-0x246e*0x1+-0x120e*-0x1],_0x1688de=_0xcd390e[0x1763+0xa69+-0x21bf],_0x5300ce=_0xcd390e[0x1269+-0x192a*0x1+0x6cf];let _0x36684e,_0x2a5dd5,_0x76cfdd;return _0x36684e=_0x11f1e5[-0xd3*-0x24+-0x256+-0x1b56],_0x2a5dd5=_0x11f1e5[-0xb*0x17f+0x52*-0x8+0x5*0x3ce],_0x76cfdd=_0x11f1e5[0x14f3+0x5*-0x19f+-0xcd6],_0x54eda6[-0x109+-0x65*0x3+0x238]=_0x28ebad*_0x36684e+_0x301ded*_0x2a5dd5+_0x2846f0*_0x76cfdd,_0x54eda6[0x12*-0x18d+0x26e9*0x1+-0xe*0xc9]=_0x48ec64*_0x36684e+_0x266542*_0x2a5dd5+_0x25b5fa*_0x76cfdd,_0x54eda6[-0x1*0x107+0x1*0x1181+-0x1078]=_0x23dda9*_0x36684e+_0x3dfa4c*_0x2a5dd5+_0x3dbee5*_0x76cfdd,_0x54eda6[0x6c*-0x3b+0x211a+-0x833*0x1]=0x1701+-0x329+0x13d8*-0x1,_0x36684e=_0x11f1e5[-0x2b*-0xe+0x13de+-0xcb*0x1c],_0x2a5dd5=_0x11f1e5[0x166f+0x447*-0x5+-0x107*0x1],_0x76cfdd=_0x11f1e5[-0x5f*0x1+-0x1e9d+-0x1f02*-0x1],_0x54eda6[0x13e5*-0x1+-0x1*0x12df+0x88*0x49]=_0x28ebad*_0x36684e+_0x301ded*_0x2a5dd5+_0x2846f0*_0x76cfdd,_0x54eda6[-0x2b*0xb+0x1501+-0x1323]=_0x48ec64*_0x36684e+_0x266542*_0x2a5dd5+_0x25b5fa*_0x76cfdd,_0x54eda6[-0x3b*-0x3+0x1724+0x73*-0x35]=_0x23dda9*_0x36684e+_0x3dfa4c*_0x2a5dd5+_0x3dbee5*_0x76cfdd,_0x54eda6[-0x535+-0xb*0x137+0x1299]=-0x2*-0xfc4+-0x1*-0x5fb+-0x63*0x61,_0x36684e=_0x11f1e5[-0x12f+-0x1*-0x1f01+-0x1dca],_0x2a5dd5=_0x11f1e5[-0x16d3+-0x40*0x79+-0xce*-0x42],_0x76cfdd=_0x11f1e5[-0x26f*-0xb+0x1675+-0x3130],_0x54eda6[-0x1da0+-0x1a72+-0xa7*-0x56]=_0x28ebad*_0x36684e+_0x301ded*_0x2a5dd5+_0x2846f0*_0x76cfdd,_0x54eda6[0xa*-0x3b+-0x35*-0x83+-0x18c8]=_0x48ec64*_0x36684e+_0x266542*_0x2a5dd5+_0x25b5fa*_0x76cfdd,_0x54eda6[-0x212e+-0xb*0x9a+0x27d6*0x1]=_0x23dda9*_0x36684e+_0x3dfa4c*_0x2a5dd5+_0x3dbee5*_0x76cfdd,_0x54eda6[0x3*0x38c+-0x1565+-0x2b3*-0x4]=0x1bad+-0x6*-0x475+-0x366b,_0x36684e=_0x11f1e5[-0x16b3+-0x2190+0x384f],_0x2a5dd5=_0x11f1e5[-0x1970+0x1*-0x1e89+0x3806],_0x76cfdd=_0x11f1e5[-0x743*-0x1+0x3ab*-0x1+-0x38a],_0x54eda6[0x3*0xa85+0x12b9+-0x323c]=_0x28ebad*_0x36684e+_0x301ded*_0x2a5dd5+_0x2846f0*_0x76cfdd+_0x53d090,_0x54eda6[0x173c+0x1db3*0x1+-0x34e2]=_0x48ec64*_0x36684e+_0x266542*_0x2a5dd5+_0x25b5fa*_0x76cfdd+_0x1688de,_0x54eda6[0x1*0x1c39+-0xe9a+-0xd91]=_0x23dda9*_0x36684e+_0x3dfa4c*_0x2a5dd5+_0x3dbee5*_0x76cfdd+_0x5300ce,_0x54eda6[-0x1*-0x2629+0xd*-0x59+-0x2195*0x1]=-0x1afe*-0x1+0x2c*0x7+-0x1*0x1c31,this;}['mul'](_0x596c14){return this['mul2'](this,_0x596c14);}['transformP'+'oint'](_0x169d6f,_0x54e937=new D()){const _0x2bdbd0=this['data'],{x:_0x20f7ad,y:_0x655f22,z:_0x564a05}=_0x169d6f;return _0x54e937['x']=_0x20f7ad*_0x2bdbd0[-0x2b*-0x25+-0x128*0x4+-0x197]+_0x655f22*_0x2bdbd0[-0x17ee+-0x4e*-0x4d+0x7c]+_0x564a05*_0x2bdbd0[-0xb5*0x33+0x5*0x1cf+0x1b0c]+_0x2bdbd0[0x2586+0x3a5+-0x291f],_0x54e937['y']=_0x20f7ad*_0x2bdbd0[-0x1359+0x7f*0x10+0xb6a]+_0x655f22*_0x2bdbd0[-0x409*0x3+-0x55*-0x13+0x1*0x5d1]+_0x564a05*_0x2bdbd0[-0x6*-0x1b2+-0x362+-0x6c1*0x1]+_0x2bdbd0[-0x1*-0x4fd+0x1713*-0x1+-0x1*-0x1223],_0x54e937['z']=_0x20f7ad*_0x2bdbd0[0x1878+0xf0*-0x13+-0x6a6]+_0x655f22*_0x2bdbd0[-0x7*-0x35f+-0x1*0x765+-0x102e]+_0x564a05*_0x2bdbd0[0x20b8+0x1855+-0x3903]+_0x2bdbd0[-0x15f7+0x1e79+0x874*-0x1],_0x54e937;}['transformV'+'ector'](_0x5d42ed,_0x1e7048=new D()){const _0x1f27fd=this['data'],{x:_0x238d15,y:_0x405251,z:_0x237587}=_0x5d42ed;return _0x1e7048['x']=_0x238d15*_0x1f27fd[-0x7e0+-0x14f1*0x1+0x1*0x1cd1]+_0x405251*_0x1f27fd[0x1*0x26ed+-0x1*0xbe0+-0x1b09]+_0x237587*_0x1f27fd[-0xa30+0x1*-0x686+0x10be*0x1],_0x1e7048['y']=_0x238d15*_0x1f27fd[-0x28*0x47+-0x101d+0x1b36]+_0x405251*_0x1f27fd[0x17bf*-0x1+-0xee*-0x1d+-0x332]+_0x237587*_0x1f27fd[0x21a9+-0x2130+-0x70],_0x1e7048['z']=_0x238d15*_0x1f27fd[0x2*-0x5f9+-0x1770+0x6*0x5e6]+_0x405251*_0x1f27fd[0x203b+0xbf*-0x2e+0x21d]+_0x237587*_0x1f27fd[-0xb75*-0x2+0xeb2+0x15*-0x1ca],_0x1e7048;}['transformV'+'ec4'](_0x4f951f,_0x15910d=new re()){const _0x36cc1a=this['data'],{x:_0x1e2d27,y:_0x981dab,z:_0x169e6b,w:_0x467e7f}=_0x4f951f;return _0x15910d['x']=_0x1e2d27*_0x36cc1a[0x198d+-0x223+0x25*-0xa2]+_0x981dab*_0x36cc1a[0x6aa*-0x1+-0x1218+0x18c6]+_0x169e6b*_0x36cc1a[-0xaad*0x2+-0x3*-0xb10+0x2*-0x5e7]+_0x467e7f*_0x36cc1a[-0x200e+0x1cf9+0x321],_0x15910d['y']=_0x1e2d27*_0x36cc1a[0x2*-0xfac+-0x1*0x189d+-0x1bfb*-0x2]+_0x981dab*_0x36cc1a[0x8f1*0x4+-0x103e+0x1381*-0x1]+_0x169e6b*_0x36cc1a[-0x26c3+-0x6d5+0x2da1]+_0x467e7f*_0x36cc1a[-0x2*0xab0+-0x1*-0x23f3+-0xe86],_0x15910d['z']=_0x1e2d27*_0x36cc1a[0x1*0x127f+-0x1882+0x17*0x43]+_0x981dab*_0x36cc1a[-0x1*0x51b+0x85*-0x13+0x40*0x3c]+_0x169e6b*_0x36cc1a[0x1b92+-0x1*-0x110a+-0x2c92]+_0x467e7f*_0x36cc1a[-0x14d+0x210e*0x1+-0x1fb3],_0x15910d['w']=_0x1e2d27*_0x36cc1a[0x1*0xb88+-0x61f*0x2+0xb9]+_0x981dab*_0x36cc1a[-0x519+-0x1*0xa9+0x5c9]+_0x169e6b*_0x36cc1a[0x1d1d+0x388*0x1+0x6*-0x56f]+_0x467e7f*_0x36cc1a[-0x1*0x1044+-0x1cbd+0x1688*0x2],_0x15910d;}['setLookAt'](_0x3ea070,_0x4a509e,_0x28c1a0){ei['sub2'](_0x3ea070,_0x4a509e)['normalize'](),Js['copy'](_0x28c1a0)['normalize'](),Os['cross'](Js,ei)['normalize'](),Js['cross'](ei,Os);const _0x47d865=this['data'];return _0x47d865[-0x15cf+0x59*-0x3d+-0xac1*-0x4]=Os['x'],_0x47d865[0x2597+0x1e59+0x21*-0x20f]=Os['y'],_0x47d865[-0x1926+0xb21+0xe07]=Os['z'],_0x47d865[0x1840+-0xc88+0x1b*-0x6f]=0x1*0x837+-0x1edf+0x16a8,_0x47d865[-0x17b*0x15+0x193f+-0x96*-0xa]=Js['x'],_0x47d865[0x80*0x40+0x1*0x245b+0x4456*-0x1]=Js['y'],_0x47d865[-0xbf5*0x2+-0x506+0x1cf6]=Js['z'],_0x47d865[0x2ef*0x1+-0x40c+0x124]=-0x5*0xe5+0x6e0+-0x267*0x1,_0x47d865[0x5*-0xb3+0xb*0x2b1+-0x1a14*0x1]=ei['x'],_0x47d865[0x2*-0xbaf+-0x710+-0x2c5*-0xb]=ei['y'],_0x47d865[-0x1*0x68d+0x10d+-0x2*-0x2c5]=ei['z'],_0x47d865[-0xfc*-0x19+0x71d+-0x1fae]=-0x13*-0x2b+0x20d2+-0xc01*0x3,_0x47d865[-0x1091+0x31*0xa6+0xf29*-0x1]=_0x3ea070['x'],_0x47d865[-0x540+-0x1d62+-0xd*-0x2ab]=_0x3ea070['y'],_0x47d865[-0x22*0xa6+0x10a7+-0x573*-0x1]=_0x3ea070['z'],_0x47d865[0x13b+0x25d*-0x1+0x131]=0x1253+0x118f*0x1+-0x72d*0x5,this;}['setFrustum'](_0x4a45dc,_0x32c4fb,_0x3492d3,_0x2e6077,_0x3bd592,_0x3d6d22){const _0x5634fd=(-0x1*0x1257+0x354+0xf05)*_0x3bd592,_0x8c574f=_0x32c4fb-_0x4a45dc,_0x302dba=_0x2e6077-_0x3492d3,_0x1f5402=_0x3d6d22-_0x3bd592,_0x7c31b8=this['data'];return _0x7c31b8[-0x1271*-0x2+-0x172*-0x11+0x72*-0x8a]=_0x5634fd/_0x8c574f,_0x7c31b8[-0x25b1*0x1+0x23e8+0x1ca]=-0x1352*-0x1+-0x108a+-0x2c8*0x1,_0x7c31b8[0x1c22+0x16a9*-0x1+0x577*-0x1]=0x1907+0x101*-0x17+-0x1f0,_0x7c31b8[0xe12*-0x2+0x24e7+-0x1c0*0x5]=0x977+0x1297+-0x1c0e,_0x7c31b8[-0xbfb*-0x3+0x18*-0xf+-0x2285]=0x193*0x5+-0xd8c+0x5ad*0x1,_0x7c31b8[0x18f6+0x7f*0x4a+-0x148d*0x3]=_0x5634fd/_0x302dba,_0x7c31b8[0x1a77+-0x136c+-0x705*0x1]=0x62f+0x252e+-0x2b5d,_0x7c31b8[0x5e*-0x1+-0x26*0x87+0x146f]=0x154e+-0x135*0x1f+0x101d,_0x7c31b8[-0x1132+0xc9*-0x1b+0x266d]=(_0x32c4fb+_0x4a45dc)/_0x8c574f,_0x7c31b8[-0x10cb*0x1+0x4*-0x176+0x1*0x16ac]=(_0x2e6077+_0x3492d3)/_0x302dba,_0x7c31b8[-0x9*0x41f+-0x2d3+0x27f4]=(-_0x3d6d22-_0x3bd592)/_0x1f5402,_0x7c31b8[-0x1*-0xebf+0x277*0xd+-0xf95*0x3]=-(0x17bb+0x11a8+-0x2962),_0x7c31b8[-0x2*0xf22+0x7*0x42c+-0x2*-0x8e]=-0x1*0x2173+0x1148+0x1*0x102b,_0x7c31b8[0x221f+-0x12f5+-0x35*0x49]=-0x8b*-0x2f+-0xe*-0x2ab+-0x3edf,_0x7c31b8[0x4a*0x1b+0x1764+-0x1f24]=-_0x5634fd*_0x3d6d22/_0x1f5402,_0x7c31b8[0x9f*0xa+0x1*0x1601+-0x1c28]=0x73*0x12+0x15a*-0x1a+0x2*0xd87,this;}['setPerspec'+'tive'](_0x5078c1,_0x4e53fb,_0x260382,_0x3940be,_0x241fcf){return Qr['_getPerspe'+'ctiveHalfS'+'ize'](to,_0x5078c1,_0x4e53fb,_0x260382,_0x241fcf),this['setFrustum'](-to['x'],to['x'],-to['y'],to['y'],_0x260382,_0x3940be);}['setOrtho'](_0x167170,_0x1911b0,_0x5a91a9,_0x3d577c,_0x21fef4,_0x4c64a3){const _0x25ce2d=this['data'];return _0x25ce2d[-0xa2f*-0x1+-0x1791+-0xd62*-0x1]=(0xd*0x107+-0x438+0x13*-0x7b)/(_0x1911b0-_0x167170),_0x25ce2d[-0x267d+-0x1454*-0x1+0x122a]=-0x5*-0x5d5+0x4d9*-0x5+0xa*-0x7e,_0x25ce2d[-0x1*-0x1fff+0x15*-0x187+-0xb*-0x2]=0xa35*-0x1+0x3*0x885+-0xf5a,_0x25ce2d[-0x18c6+-0x17d4+-0x28f*-0x13]=-0x1c2e*0x1+-0x17c4+0x33f2,_0x25ce2d[0x1f6a+0x4*0x32e+-0x2c1e]=0x202f+-0xc87+-0x13a8,_0x25ce2d[-0xf01+-0x1cf*-0x8+-0x8e*-0x1]=(-0x16fc+-0x271+0x196f)/(_0x3d577c-_0x5a91a9),_0x25ce2d[0xe8*0x1+0x4b2+0x3*-0x1dc]=-0x1580+0x26f+0x1311,_0x25ce2d[0x1*0x20b3+-0x6*0x57d+0x42]=0x131e+-0x2448+-0x2*-0x895,_0x25ce2d[-0x1580+-0x32*-0xae+-0xc74]=-0x20a7*0x1+-0x50d*-0x3+0x1180,_0x25ce2d[0xd10+0x25bc+0x17*-0x235]=-0x217f+0x10b8+0x10c7,_0x25ce2d[-0x1f64+0x1011*0x1+0xf5d]=-(-0x1bab+-0x1c8+0x1d75)/(_0x4c64a3-_0x21fef4),_0x25ce2d[0x63*0x1f+-0x1e*-0x10e+0x63a*-0x7]=-0x84c*0x2+-0x2*0x279+-0x2*-0xac5,_0x25ce2d[0x1de*0x13+-0x1852+-0xb1c]=-(_0x1911b0+_0x167170)/(_0x1911b0-_0x167170),_0x25ce2d[-0xfc9*0x2+0x20*-0xbc+0x371f]=-(_0x3d577c+_0x5a91a9)/(_0x3d577c-_0x5a91a9),_0x25ce2d[-0x156+0x645*0x1+-0x4e1]=-(_0x4c64a3+_0x21fef4)/(_0x4c64a3-_0x21fef4),_0x25ce2d[0x250f+-0x3*0xcde+0x19a]=-0x270a+-0x205c+0x4767,this;}['setFromAxi'+'sAngle'](_0x3f69b8,_0x5cf0c4){_0x5cf0c4*=Y['DEG_TO_RAD'];const {x:_0x368cd9,y:_0x180c78,z:_0x3a2cc0}=_0x3f69b8,_0x4d0af7=Math['cos'](_0x5cf0c4),_0x57b051=Math['sin'](_0x5cf0c4),_0x45de13=-0x5d9+0x1f20+-0x1946-_0x4d0af7,_0xaa69b5=_0x45de13*_0x368cd9,_0x398b67=_0x45de13*_0x180c78,_0x34b9bf=this['data'];return _0x34b9bf[-0x1*-0x542+-0x2*0x1165+0x1d88]=_0xaa69b5*_0x368cd9+_0x4d0af7,_0x34b9bf[0x3*-0xb8c+-0x2459+0x6*0xbd5]=_0xaa69b5*_0x180c78+_0x57b051*_0x3a2cc0,_0x34b9bf[-0x11be+-0x48f*0x5+0x288b]=_0xaa69b5*_0x3a2cc0-_0x57b051*_0x180c78,_0x34b9bf[-0x1*-0x2357+-0x1*-0x1b53+-0x3ea7]=-0x1e0e*0x1+0x3*-0x575+0x2e6d,_0x34b9bf[0x21ba+0x2*-0xc56+0xd*-0xb2]=_0xaa69b5*_0x180c78-_0x57b051*_0x3a2cc0,_0x34b9bf[-0x812*0x1+0x8e3+-0xcc]=_0x398b67*_0x180c78+_0x4d0af7,_0x34b9bf[-0x1b67+-0x7c*0x5+0x1dd9]=_0x398b67*_0x3a2cc0+_0x57b051*_0x368cd9,_0x34b9bf[0x35a+0x1b74+0x1*-0x1ec7]=-0x17*-0x1a5+-0x25e7+0x14,_0x34b9bf[0x3*-0x534+0x1*0x518+0xa8c]=_0xaa69b5*_0x3a2cc0+_0x57b051*_0x180c78,_0x34b9bf[-0x23bb+-0x3*0x15+0x2403]=_0x398b67*_0x3a2cc0-_0x368cd9*_0x57b051,_0x34b9bf[-0x1*0x1e9d+0x1ac1+-0x1f3*-0x2]=_0x45de13*_0x3a2cc0*_0x3a2cc0+_0x4d0af7,_0x34b9bf[-0x7b7*0x1+0x12aa*0x1+0x2*-0x574]=-0x2c1*-0xd+0x1b22+-0x3eef,_0x34b9bf[-0x1cf*-0x5+-0x242+-0x6bd]=-0x7e*-0x12+0x1*-0x1882+-0xfa6*-0x1,_0x34b9bf[-0x18bc*-0x1+0x1*-0x1d75+-0x263*-0x2]=-0x1*-0xbb7+0x3c7*0x8+-0x29ef,_0x34b9bf[-0x26a3+-0x1eca+0x457b]=-0x201a+-0x34*0x4e+-0x1*-0x2ff2,_0x34b9bf[0xfa8+-0x8ce+0x2f*-0x25]=0xcb3+0x2228+-0x2eda,this;}['setTransla'+'te'](_0xe22826,_0x5359d6,_0x1e4be3){const _0x55b6ba=this['data'];return _0x55b6ba[0x4a*0x2+-0xc9f+-0xc0b*-0x1]=-0x1b1*0xe+0x1*0x204d+-0x89e,_0x55b6ba[0xd9e+0x1*0x6fb+-0x1498]=0x234b+0x541+-0x288c,_0x55b6ba[0x947+-0x257*0xe+0x177d]=-0x4d1+0x5ae*-0x1+0xa7f,_0x55b6ba[-0x515+-0x5ad*-0x3+-0x1*0xbef]=-0x552*-0x6+-0x264f+0x663,_0x55b6ba[0x1*0x1bd7+-0x237+0x667*-0x4]=-0x484+0xbe8+-0x764,_0x55b6ba[0x308+-0x237*0x3+0x3a2]=0x16c9*-0x1+-0x2416+0x20*0x1d7,_0x55b6ba[-0x4f*0xb+0x43*-0x4+0x3*0x17d]=0xd79+-0x14f5+0x77c,_0x55b6ba[0x3e0*0x5+0x2*-0x53e+0x1*-0x8dd]=0x3bb+0x24c+0x607*-0x1,_0x55b6ba[0xbfe+0x95e+-0xc3*0x1c]=0x3a5+0x2126+-0x24cb*0x1,_0x55b6ba[-0x1e38+-0x15be+0x33ff]=0x791*0x3+0x96f+0x2*-0x1011,_0x55b6ba[0x1d36+0x1774+-0x34a0]=0x83c+-0x1e2d*0x1+0x15f2,_0x55b6ba[-0x78a+-0x179b+0x1f30]=0x3b3*-0x4+-0x2431+0x39*0xe5,_0x55b6ba[0x1*-0xea4+-0xc5f+0x1b0f]=_0xe22826,_0x55b6ba[-0x1*0x939+0x13f3+-0xaad]=_0x5359d6,_0x55b6ba[-0x7*-0x3fe+-0x1101+-0xae3]=_0x1e4be3,_0x55b6ba[0x43*0x28+-0x10bb*-0x1+-0x1b24]=0x10c3+0x2623+-0x2f*0x12b,this;}['setScale'](_0x4b0be7,_0x55b584,_0x2de091){const _0x136e87=this['data'];return _0x136e87[0x1a9*-0x13+-0x3a3+0x232e]=_0x4b0be7,_0x136e87[-0x1e14+0x1a72+-0x7*-0x85]=-0x2e9*0x5+-0x2a*-0x2b+0x1*0x77f,_0x136e87[-0x128f*-0x2+-0x1*0xe74+-0x16a8]=-0x1*0x1fb5+-0x2577+-0x4*-0x114b,_0x136e87[-0x1b14+0x3*0x30b+-0x1a2*-0xb]=-0x14a2+0x9b*0x1+0x1407,_0x136e87[-0x4f*-0x23+0x166c+-0x2135]=0x22e2+-0x1*0xbd7+0x170b*-0x1,_0x136e87[0xb93*0x2+-0x94d*-0x4+-0x3c55*0x1]=_0x55b584,_0x136e87[0x26b6+0xaba+-0x316a]=-0x1*-0x1b6+0x1134+0x327*-0x6,_0x136e87[0x1*0x1cfa+0x505+-0x1*0x21f8]=0x8fd*0x3+0xa61*-0x1+-0x1096,_0x136e87[0x22f*0x3+-0x1*-0x1741+-0x1dc6]=0x83d*-0x3+-0x5*0x3b9+-0x2b54*-0x1,_0x136e87[0x75*-0xf+0x1*-0xdad+-0x27*-0x87]=-0x5*-0x3af+-0x181d*-0x1+-0x4*0xaa2,_0x136e87[0x14dc+0xef5+-0x23c7]=_0x2de091,_0x136e87[-0x1a32+-0xc09*-0x1+0x4bc*0x3]=-0x20fb*0x1+0xac2+0x1639,_0x136e87[0x277*-0xc+0x1d*-0x9+0x1ea5]=0x138e+0x82*-0x8+-0xf7e,_0x136e87[-0x1fc0+0x3eb+-0x1*-0x1be2]=-0x109+-0x3*-0x25+-0x9a*-0x1,_0x136e87[-0x1531+-0x3*0x823+0x2da8]=0xd88+0x2681+0x7*-0x76f,_0x136e87[0x3*0x106+-0x1ad8+0x17d5]=0x25cb+-0xaca+0x36*-0x80,this;}['setViewpor'+'t'](_0x53ce1a,_0x5559ba,_0x137e30,_0x40f3e7){const _0x4c69cf=this['data'];return _0x4c69cf[-0x23d5+-0x4a4+0x31d*0xd]=_0x137e30*(0x78f*-0x3+0x1618+0x95+0.5),_0x4c69cf[-0x1ff9+0xbf*0x2b+-0x9*0x3]=-0x1*0x1ee2+-0x4*0x1de+0x265a,_0x4c69cf[-0xf73+-0x82f+0x17a4]=-0x149d*0x1+-0x1faf+0x344c,_0x4c69cf[0x1594+0x3d4+0xc5*-0x21]=-0x1*-0x19e8+-0xe*0x75+-0x1382,_0x4c69cf[0x342*-0x1+0x183b+-0x14f5]=-0xf4*-0x2+0x17f8+-0x19e0,_0x4c69cf[-0x203*-0x1+-0x2c*0xd3+-0x6b*-0x52]=_0x40f3e7*(-0x65*-0x63+0x30*0x50+0x15*-0x293+0.5),_0x4c69cf[-0x16d7*-0x1+-0x41*0x27+0x227*-0x6]=0x158+0xbfb+0xd53*-0x1,_0x4c69cf[0x2*-0xfa3+-0x1690+0x35dd*0x1]=0x1*-0x727+-0xc8e*0x2+0x3*0xac1,_0x4c69cf[-0x8d6+-0x1141+0x1a1f]=-0xdd1*0x1+-0x1*0x515+0x12e6,_0x4c69cf[-0x2459+-0x84+0x24e6]=-0x9aa*-0x1+-0x1*0x806+0x4*-0x69,_0x4c69cf[0x27*0x1+0x17*-0x91+-0x57*-0x26]=-0x1ad*0xe+0x1323+0x453+0.5,_0x4c69cf[-0xa0+-0x20cf+0x2*0x10bd]=-0x2b*0x59+0x9c5+0x52e,_0x4c69cf[0x4*-0x5bc+0x1*0x21b2+-0x1*0xab6]=_0x53ce1a+_0x137e30*(-0xfec+-0x1618*-0x1+-0x4f*0x14+0.5),_0x4c69cf[-0x147b*-0x1+0xa9*-0x2a+-0x74c*-0x1]=_0x5559ba+_0x40f3e7*(-0x3c1*-0x1+-0x209f+0x1cde*0x1+0.5),_0x4c69cf[0xd21+0x2*0x8a9+-0x1e65]=0xf3*-0x12+0x5b*0x12+0x1c8*0x6+0.5,_0x4c69cf[-0x2bd*-0xa+-0x2562+-0x67*-0x19]=-0x1*-0x2493+-0xf4e*0x1+-0x1544,this;}['setReflect'+'ion'](_0x84a04d,_0x5e86d2){const _0x3a5c60=_0x84a04d['x'],_0x34bd94=_0x84a04d['y'],_0x4914b6=_0x84a04d['z'],_0x385ee5=this['data'];return _0x385ee5[-0xb*-0xb5+0x679*0x2+-0x14b9]=-0x2449+-0x1*0x2613+0x1*0x4a5d-(0x1e15+-0x1f70+0x15d)*_0x3a5c60*_0x3a5c60,_0x385ee5[0x1e5a+0x54d+0xa9*-0x36]=-(0x15c*0x1+-0x19c1+0x1867)*_0x3a5c60*_0x34bd94,_0x385ee5[-0x181b+0xb36+0x1*0xce7]=-(-0x22be+-0xd6*-0x19+-0x18a*-0x9)*_0x3a5c60*_0x4914b6,_0x385ee5[-0x4f3+0x1f69+0x8d1*-0x3]=-0x2ec*0x1+-0x17*-0xe3+-0x3f*0x47,_0x385ee5[-0x204c+0x222*-0x9+0x26*0x15b]=-(-0xcc+-0x5a+0x128)*_0x3a5c60*_0x34bd94,_0x385ee5[-0x94d*0x1+0x1ced+-0x139b]=-0x1915*-0x1+0x172e+0x2*-0x1821-(0x212*0x11+0x19c*-0x4+-0x1cc0)*_0x34bd94*_0x34bd94,_0x385ee5[0x1*-0x1a89+-0x1ce6+-0x3775*-0x1]=-(-0x9*0x220+0x222f+-0xf0d*0x1)*_0x34bd94*_0x4914b6,_0x385ee5[-0x1*-0x97+-0x850+0x7c0]=0x1*-0x177b+-0xec3*0x1+0x263e,_0x385ee5[-0xcc4+-0xb88+-0x15a*-0x12]=-(0xb89+0x2041*-0x1+0x14ba)*_0x3a5c60*_0x4914b6,_0x385ee5[-0x1*0x1131+0x18c5+0x78b*-0x1]=-(0x214e+0x43f*0x8+-0xa4*0x69)*_0x34bd94*_0x4914b6,_0x385ee5[-0x2078+0x1582*-0x1+-0x3604*-0x1]=-0x3*0x9ef+0x1759*-0x1+0x3527-(-0x14d+0x4ed*-0x5+0x19f0)*_0x4914b6*_0x4914b6,_0x385ee5[-0x1c5b+0x2*0x2f9+-0x77c*-0x3]=0x637*0x2+0x1*0x21cd+-0x2e3b,_0x385ee5[0x6ac*0x2+-0x634+-0x718]=-(0x20ae+0x170d+-0x37b9)*_0x3a5c60*_0x5e86d2,_0x385ee5[-0x3*0x745+0x4cd*-0x5+0x2ddd]=-(0x85b+-0x19cc+0x1173)*_0x34bd94*_0x5e86d2,_0x385ee5[0xf5c*0x2+0x2*0x8a5+0x155*-0x24]=-(0x47d*0x6+-0x2641+0xb55)*_0x4914b6*_0x5e86d2,_0x385ee5[0x179*0x7+-0x1379+0x313*0x3]=0x1*-0x1123+-0xb04+-0x1a8*-0x11,this;}['invert'](_0x57b63d=this){const _0x43d602=_0x57b63d['data'],_0x551bc1=_0x43d602[0x3*0x1d4+-0x18f3*0x1+-0x67d*-0x3],_0x2da1d3=_0x43d602[-0xbfa+-0x1*-0x18d7+-0xcdc],_0x4bfa7=_0x43d602[-0x1ea4+0x1f0c+-0x2*0x33],_0x4e56f1=_0x43d602[0x12bc+-0x2c*0x31+-0xa4d],_0x47684d=_0x43d602[0x132d*0x1+0x5*0x5cf+0x14*-0x269],_0x19ed75=_0x43d602[-0x46c+-0x573+0x1*0x9e4],_0x572757=_0x43d602[-0x21f5+-0x20f*0x11+0x36*0x147],_0x525a20=_0x43d602[0x1*0x1965+0x269c+0x35e*-0x13],_0x5067e4=_0x43d602[-0x990+-0xb1f+0x1*0x14b7],_0x4f2948=_0x43d602[-0x1*-0x9fd+-0x12a3+0x8af],_0x5b1d16=_0x43d602[0x5ab*-0x4+-0x1*-0x12d6+0x3e0],_0x22daa3=_0x43d602[-0x3*-0x37f+-0x1559*0x1+0x1*0xae7],_0x1b5bc4=_0x43d602[-0x1a*0x150+0x11a9+0x1083],_0x3ec684=_0x43d602[0x879+-0x4*-0x848+-0x298c],_0x3af9dc=_0x43d602[-0xb8+-0x509+0x5cf],_0x31a4f3=_0x43d602[0x2103+-0x1da7+-0x34d],_0x9c0dfa=_0x551bc1*_0x19ed75-_0x2da1d3*_0x47684d,_0x41d183=_0x551bc1*_0x572757-_0x4bfa7*_0x47684d,_0x31e519=_0x551bc1*_0x525a20-_0x4e56f1*_0x47684d,_0x365a5b=_0x2da1d3*_0x572757-_0x4bfa7*_0x19ed75,_0x35a8c5=_0x2da1d3*_0x525a20-_0x4e56f1*_0x19ed75,_0x26fa60=_0x4bfa7*_0x525a20-_0x4e56f1*_0x572757,_0x55314d=_0x5067e4*_0x3ec684-_0x4f2948*_0x1b5bc4,_0x17d857=_0x5067e4*_0x3af9dc-_0x5b1d16*_0x1b5bc4,_0x1a1bfb=_0x5067e4*_0x31a4f3-_0x22daa3*_0x1b5bc4,_0x243f57=_0x4f2948*_0x3af9dc-_0x5b1d16*_0x3ec684,_0x13f79c=_0x4f2948*_0x31a4f3-_0x22daa3*_0x3ec684,_0x31b67e=_0x5b1d16*_0x31a4f3-_0x22daa3*_0x3af9dc,_0x40ca54=_0x9c0dfa*_0x31b67e-_0x41d183*_0x13f79c+_0x31e519*_0x243f57+_0x365a5b*_0x1a1bfb-_0x35a8c5*_0x17d857+_0x26fa60*_0x55314d;if(_0x40ca54===-0x1985+0x1*0x6e6+-0x129f*-0x1)this['setIdentit'+'y']();else{const _0x29d876=(0x128*-0x18+-0x21fb*-0x1+-0x63a)/_0x40ca54,_0x471ffa=this['data'];_0x471ffa[0x4d*-0x2+0xeb6+0x2*-0x70e]=(_0x19ed75*_0x31b67e-_0x572757*_0x13f79c+_0x525a20*_0x243f57)*_0x29d876,_0x471ffa[0x1*-0x17e1+0x1c16+0x4*-0x10d]=(-_0x2da1d3*_0x31b67e+_0x4bfa7*_0x13f79c-_0x4e56f1*_0x243f57)*_0x29d876,_0x471ffa[-0x13b+0x101c+0x1a7*-0x9]=(_0x3ec684*_0x26fa60-_0x3af9dc*_0x35a8c5+_0x31a4f3*_0x365a5b)*_0x29d876,_0x471ffa[-0x1*-0x108d+0x67*-0x19+-0x67b*0x1]=(-_0x4f2948*_0x26fa60+_0x5b1d16*_0x35a8c5-_0x22daa3*_0x365a5b)*_0x29d876,_0x471ffa[-0x45*-0x6+0xd94+-0x86*0x1d]=(-_0x47684d*_0x31b67e+_0x572757*_0x1a1bfb-_0x525a20*_0x17d857)*_0x29d876,_0x471ffa[-0x2b*-0x7b+0x1*0x19ea+-0x2e8e*0x1]=(_0x551bc1*_0x31b67e-_0x4bfa7*_0x1a1bfb+_0x4e56f1*_0x17d857)*_0x29d876,_0x471ffa[-0xcd8+0x63*0x54+-0x9*0x22e]=(-_0x1b5bc4*_0x26fa60+_0x3af9dc*_0x31e519-_0x31a4f3*_0x41d183)*_0x29d876,_0x471ffa[-0x1*0xe17+0x9d*0xa+0x7*0x124]=(_0x5067e4*_0x26fa60-_0x5b1d16*_0x31e519+_0x22daa3*_0x41d183)*_0x29d876,_0x471ffa[0x5bf+-0x781*-0x3+-0x1c3a]=(_0x47684d*_0x13f79c-_0x19ed75*_0x1a1bfb+_0x525a20*_0x55314d)*_0x29d876,_0x471ffa[-0x1064+-0x67d*0x4+0x2a61]=(-_0x551bc1*_0x13f79c+_0x2da1d3*_0x1a1bfb-_0x4e56f1*_0x55314d)*_0x29d876,_0x471ffa[0x88*-0x1d+0x37*0x40+0xd9*0x2]=(_0x1b5bc4*_0x35a8c5-_0x3ec684*_0x31e519+_0x31a4f3*_0x9c0dfa)*_0x29d876,_0x471ffa[0x9a1+-0x4c2+0x6*-0xce]=(-_0x5067e4*_0x35a8c5+_0x4f2948*_0x31e519-_0x22daa3*_0x9c0dfa)*_0x29d876,_0x471ffa[-0x2020+-0x22c2+0x42ee]=(-_0x47684d*_0x243f57+_0x19ed75*_0x17d857-_0x572757*_0x55314d)*_0x29d876,_0x471ffa[-0x14d5+0x6d*0x49+-0xa33*0x1]=(_0x551bc1*_0x243f57-_0x2da1d3*_0x17d857+_0x4bfa7*_0x55314d)*_0x29d876,_0x471ffa[-0x1*-0x750+0x1245+0x1*-0x1987]=(-_0x1b5bc4*_0x365a5b+_0x3ec684*_0x41d183-_0x3af9dc*_0x9c0dfa)*_0x29d876,_0x471ffa[-0x1*0x3a3+0x416*-0x3+0xff4]=(_0x5067e4*_0x365a5b-_0x4f2948*_0x41d183+_0x5b1d16*_0x9c0dfa)*_0x29d876;}return this;}['set'](_0x2b21b0){const _0x3a49ae=this['data'];return _0x3a49ae[-0x1*0xb6b+0x14d+0xa1e]=_0x2b21b0[-0x2*-0x7eb+0x1bfa+-0x4*0xaf4],_0x3a49ae[0x45+0x14*0xef+-0x12f0]=_0x2b21b0[0x7*-0x4ff+0x2183+0x177],_0x3a49ae[0x7*0xf7+-0x8a3*-0x1+-0xf62]=_0x2b21b0[-0x1086+0x2a2*0x8+-0x488],_0x3a49ae[0x7b*0x13+-0x26ea+0x1dcc]=_0x2b21b0[0x2092+-0x1bc6+-0x4c9],_0x3a49ae[-0x3*0x7bf+-0xe57*-0x1+-0x1*-0x8ea]=_0x2b21b0[-0x2535+-0x1b8c+0x40c5],_0x3a49ae[-0x25b9+0xcdf*0x2+0xc00]=_0x2b21b0[0x1ed4+0x2*-0x24c+-0x1a37],_0x3a49ae[-0xad5*0x3+0x22*-0x37+0x5*0x7f7]=_0x2b21b0[0x115d+0x2c*-0x61+-0xab*0x1],_0x3a49ae[0x1ba2+0x7fe+-0x2399]=_0x2b21b0[0x4*0x904+-0x178f+-0xc7a],_0x3a49ae[-0x1c55+-0x60d+0x226a]=_0x2b21b0[0x3*-0x886+0x8e4*-0x2+0x2b62],_0x3a49ae[0x209*-0xb+-0x233*0x1+0x1*0x189f]=_0x2b21b0[-0x1*-0x105c+-0x134d+0x2fa],_0x3a49ae[0x863+0x33*-0x92+0x14bd*0x1]=_0x2b21b0[-0x16*-0xf0+-0x13c4+-0xd2],_0x3a49ae[-0x1700+0x1*-0xa57+0x2*0x10b1]=_0x2b21b0[-0x8b+-0x1a2b+0x1ac1*0x1],_0x3a49ae[0x342+-0x2d*-0x97+-0x1dc1]=_0x2b21b0[0x1*-0x255f+0x6*-0x3e5+-0x7*-0x8af],_0x3a49ae[-0x15b7+0x45a*-0x5+0x2b86]=_0x2b21b0[0x1*-0x1549+0xa6*-0x6+-0x2*-0xc9d],_0x3a49ae[-0x14b*0x19+0x193b+0x726]=_0x2b21b0[0x19e*0x11+0x4*0x12e+-0x2028],_0x3a49ae[-0xa30+0x13a5+-0x966]=_0x2b21b0[-0x5e6+-0x1*-0x1225+0x6*-0x208],this;}['setIdentit'+'y'](){const _0x1a8d70=this['data'];return _0x1a8d70[-0x776+0x1*-0xf9f+0x1715]=-0x25c0*-0x1+-0x2376+-0x5*0x75,_0x1a8d70[-0x26c0+-0x2*0xf19+-0x1*-0x44f3]=0xf76*-0x1+0x17*0x13a+-0xcc0,_0x1a8d70[0x24dc+0x1*-0x2098+-0x442*0x1]=-0x1*0x17e1+-0x728+0x1f09,_0x1a8d70[0x1f3d*0x1+-0x577*0x6+-0x2*-0xc8]=0x12d+-0x1*-0x23d9+-0x2506,_0x1a8d70[0x1550+-0x53*-0x45+-0x2bab]=0x4c*-0x7+-0x1e1a+0x202e,_0x1a8d70[-0x911*0x1+-0x3*0x5df+0x557*0x5]=-0x1646+0x1b40+0x13*-0x43,_0x1a8d70[0x14b1+-0x16eb+0x240]=-0xb0*-0xd+-0xb54+0x2*0x132,_0x1a8d70[0x3ff+0x1*0x176e+-0x1b66]=0x83+-0x2675*0x1+0xca6*0x3,_0x1a8d70[-0x1310+-0x25c1+-0x31*-0x129]=0x35*0x6a+0x1cc4+0x1*-0x32b6,_0x1a8d70[0xb29+0x144e+-0x6*0x53d]=-0x1d07+-0x1d6*0x13+0x3fe9*0x1,_0x1a8d70[-0x10c*0x20+-0x6b9*-0x2+0x1418]=0x1b9b+-0x3*0xa11+0x23*0x13,_0x1a8d70[0x73*-0x2f+0x53*0x4a+0x16*-0x21]=0x41*-0x24+-0x19c9+0x1*0x22ed,_0x1a8d70[-0x12ae+0x2*0x127a+-0x2*0x91d]=0x2*-0xe4d+0x1*-0x1499+0xb*0x479,_0x1a8d70[-0x12e6+-0x65*-0x2+-0x1*-0x1229]=-0x110a+0x23b1+0x19*-0xbf,_0x1a8d70[-0xe72+0x1*-0x12f7+0x2177*0x1]=0x8a*-0x34+-0x25ef+-0x27*-0x1b1,_0x1a8d70[-0x3*0x219+0x2*0xb92+0x2*-0x865]=0x112*0x2+-0x2*-0x74b+-0x593*0x3,this;}['setTRS'](_0x1203d2,_0x6806fb,_0x30fecc){const _0x3b9e8a=_0x6806fb['x'],_0x1b400a=_0x6806fb['y'],_0x41efb8=_0x6806fb['z'],_0x2fcfbc=_0x6806fb['w'],_0xee1f16=_0x30fecc['x'],_0x3fe3a9=_0x30fecc['y'],_0x267183=_0x30fecc['z'],_0x5cba4a=_0x3b9e8a+_0x3b9e8a,_0xe13612=_0x1b400a+_0x1b400a,_0x497059=_0x41efb8+_0x41efb8,_0x3e99d7=_0x3b9e8a*_0x5cba4a,_0x2bfcc3=_0x3b9e8a*_0xe13612,_0x45ff8e=_0x3b9e8a*_0x497059,_0x1cfe5d=_0x1b400a*_0xe13612,_0x5702bb=_0x1b400a*_0x497059,_0x20c11c=_0x41efb8*_0x497059,_0x2358a1=_0x2fcfbc*_0x5cba4a,_0x4e9e4d=_0x2fcfbc*_0xe13612,_0x4dc679=_0x2fcfbc*_0x497059,_0x1b4358=this['data'];return _0x1b4358[-0x248*0x7+-0x4ba+0x14b2]=(-0x7e7*-0x4+-0x1*0x168d+-0x90e-(_0x1cfe5d+_0x20c11c))*_0xee1f16,_0x1b4358[0xc51+0x86e*0x1+-0x14be]=(_0x2bfcc3+_0x4dc679)*_0xee1f16,_0x1b4358[-0x92*0x39+-0x1328+0x4*0xceb]=(_0x45ff8e-_0x4e9e4d)*_0xee1f16,_0x1b4358[0x2339*-0x1+-0x105c+0x1*0x3398]=0x1*0xd45+-0x3c2+0x1e7*-0x5,_0x1b4358[-0x44b+-0x19eb+-0x92*-0x35]=(_0x2bfcc3-_0x4dc679)*_0x3fe3a9,_0x1b4358[-0xeaf+-0xe27+0x1cdb]=(-0x1e4f+0x1172+0xcde-(_0x3e99d7+_0x20c11c))*_0x3fe3a9,_0x1b4358[-0x13e9*-0x1+0x8bd+0xe5*-0x20]=(_0x5702bb+_0x2358a1)*_0x3fe3a9,_0x1b4358[-0x1fc0+-0x13b7+0x337e]=-0x156*0x18+0x225b+-0x24b*0x1,_0x1b4358[0x4a*0x57+-0x1*0x89c+-0x2*0x841]=(_0x45ff8e+_0x4e9e4d)*_0x267183,_0x1b4358[-0xbf9+-0x139*0x1e+0x4*0xc2c]=(_0x5702bb-_0x2358a1)*_0x267183,_0x1b4358[-0x18b3*0x1+-0x5c7+0x1e84]=(-0x2*0x335+0x35f+0x9c*0x5-(_0x3e99d7+_0x1cfe5d))*_0x267183,_0x1b4358[-0x1*-0x71d+-0x10de+-0xe4*-0xb]=0x1c67+-0x3*-0x21f+-0x1bd*0x14,_0x1b4358[-0x1fd6+-0x236f+0x4351]=_0x1203d2['x'],_0x1b4358[0x112c+0x6f8+-0x1817]=_0x1203d2['y'],_0x1b4358[-0x1ce7+-0x1903+0x35f8]=_0x1203d2['z'],_0x1b4358[-0x3a6*-0x3+-0x1ca5+-0x8e1*-0x2]=-0x10f4+-0x11a3+0x2298,this;}['transpose'](_0x519868=this){const _0x370a78=_0x519868['data'],_0x469eee=this['data'];if(_0x370a78===_0x469eee){let _0x4fd528;_0x4fd528=_0x370a78[-0x1*-0x2bd+0x5df+-0x89b*0x1],_0x469eee[-0x251d*-0x1+0x2c*-0x4b+-0x1838]=_0x370a78[-0x1608+-0x12f1*0x1+0x7*0x5db],_0x469eee[0x1*-0xbb6+0x2627+-0x1a6d]=_0x4fd528,_0x4fd528=_0x370a78[-0x4*-0x4e7+0x3ad*-0x2+-0xc40],_0x469eee[0x4d*0x70+-0x1*-0x529+-0x26d7]=_0x370a78[-0x1c*-0xe5+-0x1f36+-0x1a*-0x3d],_0x469eee[-0xbe+0x1cf6+-0x1c30]=_0x4fd528,_0x4fd528=_0x370a78[-0x143*0x1a+-0x250f+-0x2*-0x22f0],_0x469eee[-0xe1d*-0x2+0x8e1+-0x2518]=_0x370a78[0x1fcd*0x1+-0xb16*0x1+0xb*-0x1e1],_0x469eee[0xdec+0x198d+-0x276d]=_0x4fd528,_0x4fd528=_0x370a78[0x9b*0x1+-0xc7*0x1a+0x13a1],_0x469eee[-0xfc4+0x1768+-0x186*0x5]=_0x370a78[0x1*0x14ce+0x2c*-0x1c+-0x13*0xd7],_0x469eee[0x1969+-0x8*0x15d+-0xe78]=_0x4fd528,_0x4fd528=_0x370a78[0x62f*0x2+-0x5*0x347+0x4a*0xe],_0x469eee[-0x32*0x19+0xf*0x15d+0x2*-0x7c5]=_0x370a78[-0x3*0x64+-0x3*-0xcaa+-0x24c5],_0x469eee[0x1eb8+-0x4b*-0x5f+-0x3a80]=_0x4fd528,_0x4fd528=_0x370a78[0x49a*0x4+0x7e*-0x2f+0x4c5],_0x469eee[-0x681*0x1+0xb14+0x4*-0x122]=_0x370a78[0xd*-0x1ac+-0x1e9d+0x3467],_0x469eee[-0x15*-0x1f+-0x1a5a+0x17dd*0x1]=_0x4fd528;}else _0x469eee[0x751+0xbcf+-0x1320]=_0x370a78[-0x345*-0x1+0x1c17+0x1f5c*-0x1],_0x469eee[-0x109a+-0xb18+-0x1bb3*-0x1]=_0x370a78[-0x1f*-0xb8+-0x23e3*0x1+0xd9f],_0x469eee[-0x58a*0x7+-0x295*0x6+-0x3646*-0x1]=_0x370a78[-0x1*0x2285+0x19c4+0x8c9],_0x469eee[0xb96+-0x1*-0x5cf+-0x1162]=_0x370a78[0x45+0x1f90*0x1+0x67*-0x4f],_0x469eee[0x237f+-0xb*0x14c+-0x1*0x1537]=_0x370a78[-0x16ee+0x4*0x7ba+-0x7f9*0x1],_0x469eee[0x1862+0xa7d*0x1+-0x22da]=_0x370a78[0x106d+0x8b*-0x32+0xabe],_0x469eee[-0x151*-0x11+0x7a7+-0x1e02]=_0x370a78[0x19*-0x8+0xfda+-0xf09],_0x469eee[0xa40+0xc75*0x3+-0x2f98]=_0x370a78[-0x32c*-0x1+0xe*0x2c2+-0x29bb],_0x469eee[0x18*0x10e+-0xe0e+-0x6*0x1df]=_0x370a78[0x307*-0x4+-0x2119+-0x1*-0x2d37],_0x469eee[-0x5e*0x2c+0x1bb*0x14+-0x126b]=_0x370a78[-0x968+0x133a*0x2+-0x1d06],_0x469eee[0x1abe+-0x1*-0x167d+-0x3131]=_0x370a78[-0x17*-0x1b2+0x54d*-0x7+0x1d9*-0x1],_0x469eee[-0x1a3b+-0x70a+0x2150]=_0x370a78[0x23f6+-0x1*-0x12a5+-0x368d],_0x469eee[-0xb6a+-0x4e1+-0x59*-0x2f]=_0x370a78[0x5*0x45c+0xd53+-0x231c],_0x469eee[-0x11bb+0x1*0x1772+-0x5aa]=_0x370a78[0x1981*0x1+-0x15a7+0x1*-0x3d3],_0x469eee[-0x3d*-0x31+0x633+-0x1*0x11d2]=_0x370a78[0x1f*-0xf1+0x5eb+0x9*0x297],_0x469eee[-0x146*-0x15+0x26f*-0x6+-0xc15]=_0x370a78[-0x181+0x4*-0x805+-0x4*-0x869];return this;}['getTransla'+'tion'](_0xbc12e8=new D()){return _0xbc12e8['set'](this['data'][0x563*-0x2+-0xe5a+-0x192c*-0x1],this['data'][0x1*0x178d+0x1283+0xef*-0x2d],this['data'][-0x177b+-0x1*0x2632+0x3dbb]);}['getX'](_0x1d66eb=new D()){return _0x1d66eb['set'](this['data'][0x1eff+-0x6f7*0x5+0x3d4],this['data'][0xf55+0xe16+-0x1d6a],this['data'][-0xb*0x121+-0x1*-0xf06+0x299*-0x1]);}['getY'](_0x54a964=new D()){return _0x54a964['set'](this['data'][0x6ce+-0x1931+0x1267],this['data'][0x1*-0x2417+-0x1271*0x2+0x2*0x247f],this['data'][0x1*0x2527+0x1*0x2296+-0x47b7]);}['getZ'](_0x3971c0=new D()){return _0x3971c0['set'](this['data'][-0x7*0x303+0x6*-0x61f+-0x43*-0xdd],this['data'][-0x3*0xcc5+-0x283+0x28db],this['data'][-0x124f+-0x2*-0x1253+0x5*-0x3a9]);}['getScale'](_0x5c0248=new D()){return this['getX'](Os),this['getY'](Js),this['getZ'](ei),_0x5c0248['set'](Os['length'](),Js['length'](),ei['length']()),_0x5c0248;}get['scaleSign'](){return this['getX'](Os),this['getY'](Js),this['getZ'](ei),Os['cross'](Os,Js),Os['dot'](ei)<-0x20c8+0x24ea+-0x422?-(0x8ab+0x1f82*0x1+-0x282c):0x1075+-0x23bf*-0x1+-0x3433;}['setFromEul'+'erAngles'](_0x5889c2,_0x23f967,_0x2969e5){_0x5889c2*=Y['DEG_TO_RAD'],_0x23f967*=Y['DEG_TO_RAD'],_0x2969e5*=Y['DEG_TO_RAD'];const _0x1d666f=Math['sin'](-_0x5889c2),_0x1e3b1d=Math['cos'](-_0x5889c2),_0x3bee55=Math['sin'](-_0x23f967),_0x3a17c7=Math['cos'](-_0x23f967),_0x2191c5=Math['sin'](-_0x2969e5),_0x4e291c=Math['cos'](-_0x2969e5),_0x48c6bb=this['data'];return _0x48c6bb[-0x20c9+0x2*-0x131+0x232b]=_0x3a17c7*_0x4e291c,_0x48c6bb[0x23eb+-0x21f9+-0x1f1]=-_0x3a17c7*_0x2191c5,_0x48c6bb[0x1*0x1aed+0x1*-0x2114+-0x53*-0x13]=_0x3bee55,_0x48c6bb[0xef*-0xb+-0x1fd4+0x2a1c]=-0x1424+-0x252f+-0xb77*-0x5,_0x48c6bb[-0x1*-0x494+0x21df+-0x266f]=_0x1e3b1d*_0x2191c5+_0x4e291c*_0x1d666f*_0x3bee55,_0x48c6bb[0x53*-0x35+-0x25f4+0x3728]=_0x1e3b1d*_0x4e291c-_0x1d666f*_0x3bee55*_0x2191c5,_0x48c6bb[-0x8b4*0x3+0x4f+0x19d3]=-_0x3a17c7*_0x1d666f,_0x48c6bb[-0xed5+0x1c9c*-0x1+-0x2b78*-0x1]=0x1b02+-0x3a*-0x17+-0x2038,_0x48c6bb[0xe24+-0x2*-0x3c2+0x8*-0x2b4]=_0x1d666f*_0x2191c5-_0x1e3b1d*_0x4e291c*_0x3bee55,_0x48c6bb[0xd06+-0x253e+0x1841]=_0x4e291c*_0x1d666f+_0x1e3b1d*_0x3bee55*_0x2191c5,_0x48c6bb[-0x1fb5*-0x1+0x140e+-0x33b9]=_0x1e3b1d*_0x3a17c7,_0x48c6bb[-0xe26+0x14ee+-0xf*0x73]=0x747+-0x4*0xaa+-0x49f,_0x48c6bb[-0x1fda+-0x38b+0x1*0x2371]=-0x1eab+0x6*-0x341+-0x3*-0x10bb,_0x48c6bb[0x2099+-0x175*-0x6+-0x294a]=-0x1860+-0x1*0x1d9f+0x1*0x35ff,_0x48c6bb[-0x1f38+-0xbf*-0x5+0x1b8b]=0x9*0x3d5+0x35e+-0x25db,_0x48c6bb[-0x1*0x8e2+-0x43a+0xd2b]=0x211*-0xb+-0x1938+0x2ff4,this;}['getEulerAn'+'gles'](_0x43cea3=new D()){this['getScale'](Hl);const _0xff472e=Hl['x'],_0x45a293=Hl['y'],_0x250d0a=Hl['z'];if(_0xff472e===0x1*-0x97f+-0x757+0x10d6||_0x45a293===0x1ce2+-0x11*0x61+-0x1671||_0x250d0a===0x1*0x19a3+-0x789*0x4+-0x481*-0x1)return _0x43cea3['set'](0x578+-0xa9f+0x527*0x1,0x266c*0x1+-0x2407+-0x265,0x2551+-0x21e8+-0x369);const _0x5e31f6=this['data'],_0x5a51ae=Math['asin'](-_0x5e31f6[0x1ddf*0x1+0x152b+0x17*-0x238]/_0xff472e),_0x156ee7=Math['PI']*(0x1ca4+0x2015+-0x5*0xc25+0.5);let _0x5a1030,_0x1bcd85;return _0x5a51ae<_0x156ee7?_0x5a51ae>-_0x156ee7?(_0x5a1030=Math['atan2'](_0x5e31f6[-0x18c2+0x2092+-0x7ca]/_0x45a293,_0x5e31f6[0xae7+0x22fe+0x2b*-0x111]/_0x250d0a),_0x1bcd85=Math['atan2'](_0x5e31f6[-0x29*-0x2+0xe6e*-0x2+0x1c8b]/_0xff472e,_0x5e31f6[-0x5*-0x337+-0x29*0x4d+-0x1df*0x2]/_0xff472e)):(_0x1bcd85=0xea3*0x1+-0x250e+-0x779*-0x3,_0x5a1030=-Math['atan2'](_0x5e31f6[0x2*0x13f+-0x2275+0x1ffb]/_0x45a293,_0x5e31f6[0xae7+-0xc2+-0x24*0x48]/_0x45a293)):(_0x1bcd85=0x7*-0x4a3+0x2*-0x347+0x2703,_0x5a1030=Math['atan2'](_0x5e31f6[-0x412+-0x2284+0x269a]/_0x45a293,_0x5e31f6[-0xb54+-0x1*0xd57+0x18b0]/_0x45a293)),_0x43cea3['set'](_0x5a1030,_0x5a51ae,_0x1bcd85)['mulScalar'](Y['RAD_TO_DEG']);}['toString'](){return'['+this['data']['join'](',\x20')+']';}};h(Qr,'IDENTITY',Object['freeze'](new Qr())),h(Qr,'ZERO',Object['freeze'](new Qr()['set']([0x8c1+0xbbc+-0x1*0x147d,-0x1*0x23ab+0xe6b+-0x20*-0xaa,-0xfbb+0x2fb*0xb+0x4a*-0x3b,-0x80b+-0x4d5+0xce0,0x16a*-0xb+0x4bf+-0x1*-0xacf,0x1eed+-0x2314+0x427,-0x9ef*-0x1+-0x1*-0x1bc5+0x12da*-0x2,0x1*-0x1589+-0x1a5b+0x4ca*0xa,-0x2199+0x1*-0x207d+-0x16*-0x301,0x1a58+-0x1*-0x1f1f+-0x3977,0x27f+-0x7a9+0x52a,0x702+-0x3*-0x371+-0x1155,-0x1*-0x157d+0x103*0x20+-0x1*0x35dd,0xb18+0x7c9+-0x12e1,-0x10*0x225+0x5e*-0x3a+0x379c*0x1,0x3*0x9cf+-0x7*-0x590+0x637*-0xb])));let te=Qr;const Sn=class Sn{constructor(_0x1ba7c1=-0x90*-0x12+0x18f+-0xbaf*0x1,_0xa0ba27=-0x1981+-0x61c+0x1*0x1f9d,_0x36863a=-0x1*-0x8e1+0x16*-0x7a+-0x3*-0x89,_0x4eff1d=-0x7*0x1c6+-0x14ac+-0x2b*-0xc5){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x1ba7c1['length']===-0x5*0x2e7+0x1*0x9cb+0x4bc?(this['x']=_0x1ba7c1[-0x11a0+-0xdfb+-0x105*-0x1f],this['y']=_0x1ba7c1[0x481+-0x1f6+-0x41*0xa],this['z']=_0x1ba7c1[-0x1*0x1cf3+0x1edd*-0x1+-0x3bd2*-0x1],this['w']=_0x1ba7c1[0x25b*0xb+0x215c+-0x3b42]):(this['x']=_0x1ba7c1,this['y']=_0xa0ba27,this['z']=_0x36863a,this['w']=_0x4eff1d);}['clone'](){const _0x277ac1=this['constructo'+'r'];return new _0x277ac1(this['x'],this['y'],this['z'],this['w']);}['conjugate'](_0x570b8c=this){return this['x']=_0x570b8c['x']*-(0x7b3*0x3+-0x2374+0x62e*0x2),this['y']=_0x570b8c['y']*-(0x269f*0x1+0x18e3+0x152b*-0x3),this['z']=_0x570b8c['z']*-(-0x10be+-0x1cc8+0x2d87*0x1),this['w']=_0x570b8c['w'],this;}['copy'](_0x32f582){return this['x']=_0x32f582['x'],this['y']=_0x32f582['y'],this['z']=_0x32f582['z'],this['w']=_0x32f582['w'],this;}['dot'](_0x355eea){return this['x']*_0x355eea['x']+this['y']*_0x355eea['y']+this['z']*_0x355eea['z']+this['w']*_0x355eea['w'];}['equals'](_0x5af5dc){return this['x']===_0x5af5dc['x']&&this['y']===_0x5af5dc['y']&&this['z']===_0x5af5dc['z']&&this['w']===_0x5af5dc['w'];}['equalsAppr'+'ox'](_0x4930ba,_0x509b2a=0x1*-0x529+-0x1*-0x18f3+-0x1*0x13ca+0.000001){return Math['abs'](this['x']-_0x4930ba['x'])<_0x509b2a&&Math['abs'](this['y']-_0x4930ba['y'])<_0x509b2a&&Math['abs'](this['z']-_0x4930ba['z'])<_0x509b2a&&Math['abs'](this['w']-_0x4930ba['w'])<_0x509b2a;}['getAxisAng'+'le'](_0x5779fc){let _0x3a5296=Math['acos'](this['w'])*(0x4d*0x6+0x67*0x5+-0x3cf);const _0x5b25aa=Math['sin'](_0x3a5296/(0x1fb7+0x1d*0x8b+-0x2f74));return _0x5b25aa!==-0x18b4+-0xd47+0x25fb?(_0x5779fc['x']=this['x']/_0x5b25aa,_0x5779fc['y']=this['y']/_0x5b25aa,_0x5779fc['z']=this['z']/_0x5b25aa,(_0x5779fc['x']<-0x1169*0x1+0x2195*0x1+-0x102c||_0x5779fc['y']<0xd5a*-0x2+-0x621+-0x5*-0x691||_0x5779fc['z']<0x1fc4+0x1*-0x2302+0x33e)&&(_0x5779fc['x']*=-(-0x1ff9+-0xb1*-0x2f+-0x85),_0x5779fc['y']*=-(0x7c0+0x10*0xb+0x11*-0x7f),_0x5779fc['z']*=-(-0x615+-0x1*-0xd39+-0x1*0x723),_0x3a5296*=-(-0x149+0x1*-0xe59+-0xfa3*-0x1))):(_0x5779fc['x']=0x17e8*-0x1+0xe0+0x1*0x1709,_0x5779fc['y']=0x81d+0x6e+-0x88b,_0x5779fc['z']=0x22b7*-0x1+-0x736*-0x2+0x144b*0x1),_0x3a5296*Y['RAD_TO_DEG'];}['getEulerAn'+'gles'](_0x5030a4=new D()){let _0x25eb08,_0x231551,_0x4c1736;const _0xce6576=this['x'],_0x4b2c03=this['y'],_0x40003f=this['z'],_0x18e878=this['w'],_0x2d1a3d=(-0xc9*0x18+-0x21bf+0xa85*0x5)*(_0x18e878*_0x4b2c03-_0xce6576*_0x40003f);return _0x2d1a3d<=-(0x1d0b+0x4df+-0x21ea+0.99999)?(_0x25eb08=(0xf*-0x81+-0xa58+0x5*0x395)*Math['atan2'](_0xce6576,_0x18e878),_0x231551=-Math['PI']/(-0x19b*-0x3+0x24*-0x43+0x49d),_0x4c1736=0x25*-0x7+-0x3*0x484+0xe8f):_0x2d1a3d>=0x145c*0x1+-0x20ca*0x1+0x25*0x56+0.99999?(_0x25eb08=(-0x25d1+-0x510+-0x2ae3*-0x1)*Math['atan2'](_0xce6576,_0x18e878),_0x231551=Math['PI']/(-0xec*-0x10+-0x2706+0x1848),_0x4c1736=-0x191d+0x203a+0x3*-0x25f):(_0x25eb08=Math['atan2']((0xd6d+-0x1d09+0x1*0xf9e)*(_0x18e878*_0xce6576+_0x4b2c03*_0x40003f),-0xa*0x5b+0x744+-0x3b5-(0xac*-0x32+-0x4a0+-0x1*-0x263a)*(_0xce6576*_0xce6576+_0x4b2c03*_0x4b2c03)),_0x231551=Math['asin'](_0x2d1a3d),_0x4c1736=Math['atan2']((-0x2122+0x2ea*0x8+-0x9d4*-0x1)*(_0x18e878*_0x40003f+_0xce6576*_0x4b2c03),0x791+0x15a4+-0xe9a*0x2-(-0x421*-0x6+-0x1*-0x89+-0x194d)*(_0x4b2c03*_0x4b2c03+_0x40003f*_0x40003f))),_0x5030a4['set'](_0x25eb08,_0x231551,_0x4c1736)['mulScalar'](Y['RAD_TO_DEG']);}['invert'](_0x254b8b=this){return this['conjugate'](_0x254b8b)['normalize']();}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x239c38,_0x5bc0b8,_0x283865){const _0x25c041=(0x148+0x248b+-0x5e*0x67-_0x283865)*(_0x239c38['dot'](_0x5bc0b8)<-0x6f7+0x155*-0x11+-0x5ec*-0x5?-(-0x1124+0x1cac+-0xb87):0xec9+0x2c7+-0x1f*0x91);return this['x']=_0x239c38['x']*_0x25c041+_0x5bc0b8['x']*_0x283865,this['y']=_0x239c38['y']*_0x25c041+_0x5bc0b8['y']*_0x283865,this['z']=_0x239c38['z']*_0x25c041+_0x5bc0b8['z']*_0x283865,this['w']=_0x239c38['w']*_0x25c041+_0x5bc0b8['w']*_0x283865,this['normalize']();}['mul'](_0x3e174e){const _0x107d9b=this['x'],_0x343b9b=this['y'],_0x5513c6=this['z'],_0x229286=this['w'],_0x4f7004=_0x3e174e['x'],_0x5bead3=_0x3e174e['y'],_0x293df7=_0x3e174e['z'],_0x470bf9=_0x3e174e['w'];return this['x']=_0x229286*_0x4f7004+_0x107d9b*_0x470bf9+_0x343b9b*_0x293df7-_0x5513c6*_0x5bead3,this['y']=_0x229286*_0x5bead3+_0x343b9b*_0x470bf9+_0x5513c6*_0x4f7004-_0x107d9b*_0x293df7,this['z']=_0x229286*_0x293df7+_0x5513c6*_0x470bf9+_0x107d9b*_0x5bead3-_0x343b9b*_0x4f7004,this['w']=_0x229286*_0x470bf9-_0x107d9b*_0x4f7004-_0x343b9b*_0x5bead3-_0x5513c6*_0x293df7,this;}['mulScalar'](_0x1f80ef,_0x2d6df1=this){return this['x']=_0x2d6df1['x']*_0x1f80ef,this['y']=_0x2d6df1['y']*_0x1f80ef,this['z']=_0x2d6df1['z']*_0x1f80ef,this['w']=_0x2d6df1['w']*_0x1f80ef,this;}['mul2'](_0x5b4476,_0x37410e){const _0x47b278=_0x5b4476['x'],_0x1d796c=_0x5b4476['y'],_0x3653cd=_0x5b4476['z'],_0x54eb6e=_0x5b4476['w'],_0x771aa7=_0x37410e['x'],_0x350fd8=_0x37410e['y'],_0x48caae=_0x37410e['z'],_0x4a57f5=_0x37410e['w'];return this['x']=_0x54eb6e*_0x771aa7+_0x47b278*_0x4a57f5+_0x1d796c*_0x48caae-_0x3653cd*_0x350fd8,this['y']=_0x54eb6e*_0x350fd8+_0x1d796c*_0x4a57f5+_0x3653cd*_0x771aa7-_0x47b278*_0x48caae,this['z']=_0x54eb6e*_0x48caae+_0x3653cd*_0x4a57f5+_0x47b278*_0x350fd8-_0x1d796c*_0x771aa7,this['w']=_0x54eb6e*_0x4a57f5-_0x47b278*_0x771aa7-_0x1d796c*_0x350fd8-_0x3653cd*_0x48caae,this;}['normalize'](_0x384343=this){let _0xde9ff9=_0x384343['length']();return _0xde9ff9===-0x880+0x24+0x85c?(this['x']=this['y']=this['z']=-0x13df*-0x1+-0x1c2d+0x84e,this['w']=-0xe3*0x1+0x1316*0x1+-0x1232):(_0xde9ff9=(0x5be*-0x3+-0x20*-0x11e+-0x1285*0x1)/_0xde9ff9,this['x']=_0x384343['x']*_0xde9ff9,this['y']=_0x384343['y']*_0xde9ff9,this['z']=_0x384343['z']*_0xde9ff9,this['w']=_0x384343['w']*_0xde9ff9),this;}['set'](_0x26c811,_0x30b974,_0x4e6d30,_0x4d58f0){return this['x']=_0x26c811,this['y']=_0x30b974,this['z']=_0x4e6d30,this['w']=_0x4d58f0,this;}['setFromAxi'+'sAngle'](_0x54d926,_0x2164b8){_0x2164b8*=(-0x2000+0x130c+0xcf4+0.5)*Y['DEG_TO_RAD'];const _0x341ea3=Math['sin'](_0x2164b8),_0x45c1d6=Math['cos'](_0x2164b8);return this['x']=_0x341ea3*_0x54d926['x'],this['y']=_0x341ea3*_0x54d926['y'],this['z']=_0x341ea3*_0x54d926['z'],this['w']=_0x45c1d6,this;}['setFromEul'+'erAngles'](_0x418817,_0x23030b,_0x22edc2){if(_0x418817 instanceof D){const _0xbe3011=_0x418817;_0x418817=_0xbe3011['x'],_0x23030b=_0xbe3011['y'],_0x22edc2=_0xbe3011['z'];}const _0x1c63ff=(-0xcf0+-0x5*0x1f9+0x16cd+0.5)*Y['DEG_TO_RAD'];_0x418817*=_0x1c63ff,_0x23030b*=_0x1c63ff,_0x22edc2*=_0x1c63ff;const _0x31539e=Math['sin'](_0x418817),_0x8f14c6=Math['cos'](_0x418817),_0x18ba97=Math['sin'](_0x23030b),_0x2407fb=Math['cos'](_0x23030b),_0x100d22=Math['sin'](_0x22edc2),_0x219264=Math['cos'](_0x22edc2);return this['x']=_0x31539e*_0x2407fb*_0x219264-_0x8f14c6*_0x18ba97*_0x100d22,this['y']=_0x8f14c6*_0x18ba97*_0x219264+_0x31539e*_0x2407fb*_0x100d22,this['z']=_0x8f14c6*_0x2407fb*_0x100d22-_0x31539e*_0x18ba97*_0x219264,this['w']=_0x8f14c6*_0x2407fb*_0x219264+_0x31539e*_0x18ba97*_0x100d22,this;}['setFromMat'+'4'](_0x3e69a8){const _0x42769f=_0x3e69a8['data'];let _0x31b8e8=_0x42769f[0x1b*-0x108+-0x37d*0x3+0x264f],_0x1d6a6e=_0x42769f[0x1*-0x3d0+0xdf7+0x2*-0x513],_0xfd1c78=_0x42769f[-0x3*0x723+0x7*0x62+-0x215*-0x9],_0x101426=_0x42769f[-0x4f9+-0x2*0x50c+0xf15],_0x1ab6fd=_0x42769f[-0x393*0x1+0x58d*-0x3+-0x1*-0x143f],_0x30e768=_0x42769f[-0x15e1+-0x1*0x7db+0xd*0x24a],_0x277083=_0x42769f[-0x2628+0x9f*0xf+0x1cdf],_0x2530b0=_0x42769f[-0xc92*-0x3+0x5de+-0x2b8b],_0x5ba9f3=_0x42769f[-0x3*-0x3c3+0x2197*-0x1+0x1658],_0x4b5cc2;return _0x4b5cc2=_0x31b8e8*_0x31b8e8+_0x1d6a6e*_0x1d6a6e+_0xfd1c78*_0xfd1c78,_0x4b5cc2===-0x1*-0x955+0x1601+-0x1f56?this['set'](-0x7e5*-0x1+0x403+-0x17d*0x8,-0x8ad*0x2+0xb50+0x60a,0x1*-0xe3f+-0x1*0x1e43+0x2c82,-0x3a*-0x55+0x1807+-0x2b48):(_0x4b5cc2=(0x24b2+0x2578+0x1*-0x4a29)/Math['sqrt'](_0x4b5cc2),_0x31b8e8*=_0x4b5cc2,_0x1d6a6e*=_0x4b5cc2,_0xfd1c78*=_0x4b5cc2,_0x4b5cc2=_0x101426*_0x101426+_0x1ab6fd*_0x1ab6fd+_0x30e768*_0x30e768,_0x4b5cc2===-0xf09+0x1332+-0x3*0x163?this['set'](-0x13d*0x3+-0x7*0x3ec+-0x1*-0x1f2b,-0x34a*-0x1+0x613+-0x1*0x95d,-0x121*-0x13+-0x10d7+-0x49c,-0xe33+0x5*0x3e3+-0xd*0x67):(_0x4b5cc2=(-0x5*0x31c+0xad5+0x4b8)/Math['sqrt'](_0x4b5cc2),_0x101426*=_0x4b5cc2,_0x1ab6fd*=_0x4b5cc2,_0x30e768*=_0x4b5cc2,_0x4b5cc2=_0x277083*_0x277083+_0x2530b0*_0x2530b0+_0x5ba9f3*_0x5ba9f3,_0x4b5cc2===0x25c1+0x14ca+-0x3a8b?this['set'](0x1*0x1a51+0x253e+-0x3f8f,0x849+-0x207e+0x1*0x1835,0x1eae+-0xcec+0x1*-0x11c2,0x24ce+0x1*0x143b+0x32*-0x124):(_0x4b5cc2=(-0x21b3+0x197d+0x837*0x1)/Math['sqrt'](_0x4b5cc2),_0x277083*=_0x4b5cc2,_0x2530b0*=_0x4b5cc2,_0x5ba9f3*=_0x4b5cc2,_0x5ba9f3<0xc2*-0x15+-0x7f*-0x5+0x13*0xb5?_0x31b8e8>_0x1ab6fd?this['set'](0x1966+-0x4*0x158+-0x1405+_0x31b8e8-_0x1ab6fd-_0x5ba9f3,_0x1d6a6e+_0x101426,_0x277083+_0xfd1c78,_0x30e768-_0x2530b0):this['set'](_0x1d6a6e+_0x101426,-0x1fc+0x1ba8+0x19ab*-0x1-_0x31b8e8+_0x1ab6fd-_0x5ba9f3,_0x30e768+_0x2530b0,_0x277083-_0xfd1c78):_0x31b8e8<-_0x1ab6fd?this['set'](_0x277083+_0xfd1c78,_0x30e768+_0x2530b0,0x1*-0x1868+0x181d*0x1+-0x26*-0x2-_0x31b8e8-_0x1ab6fd+_0x5ba9f3,_0x1d6a6e-_0x101426):this['set'](_0x30e768-_0x2530b0,_0x277083-_0xfd1c78,_0x1d6a6e-_0x101426,0x51*0x37+0x1b*0xa3+-0x2297+_0x31b8e8+_0x1ab6fd+_0x5ba9f3),this['mulScalar']((-0x881+-0x5b*0x65+0x2c69)/this['length']()))));}['setFromDir'+'ections'](_0xa2295,_0x4e1d8b){const _0xa91dfa=-0x10f6+-0x1887+0x297e+_0xa2295['dot'](_0x4e1d8b);return _0xa91dfa<Number['EPSILON']?Math['abs'](_0xa2295['x'])>Math['abs'](_0xa2295['y'])?(this['x']=-_0xa2295['z'],this['y']=0x19dc+0x2a1*0xd+-0x3c09,this['z']=_0xa2295['x'],this['w']=0x1a10+-0x1cdf*0x1+-0x1*-0x2cf):(this['x']=-0x3*0x281+-0x1636*0x1+0x7*0x43f,this['y']=-_0xa2295['z'],this['z']=_0xa2295['y'],this['w']=0x365*-0x3+-0x113f*0x1+0x1*0x1b6e):(this['x']=_0xa2295['y']*_0x4e1d8b['z']-_0xa2295['z']*_0x4e1d8b['y'],this['y']=_0xa2295['z']*_0x4e1d8b['x']-_0xa2295['x']*_0x4e1d8b['z'],this['z']=_0xa2295['x']*_0x4e1d8b['y']-_0xa2295['y']*_0x4e1d8b['x'],this['w']=_0xa91dfa),this['normalize']();}['slerp'](_0x505a91,_0x225f0b,_0x422ce1){const _0x48b2e2=_0x505a91['x'],_0x5e94e2=_0x505a91['y'],_0x167b90=_0x505a91['z'],_0x56f852=_0x505a91['w'];let _0xfd13a3=_0x225f0b['x'],_0x4d5eea=_0x225f0b['y'],_0x459a32=_0x225f0b['z'],_0xa90c9f=_0x225f0b['w'],_0x17327c=_0x56f852*_0xa90c9f+_0x48b2e2*_0xfd13a3+_0x5e94e2*_0x4d5eea+_0x167b90*_0x459a32;if(_0x17327c<-0x1*-0x1cfa+-0x601+0x16f9*-0x1&&(_0xa90c9f=-_0xa90c9f,_0xfd13a3=-_0xfd13a3,_0x4d5eea=-_0x4d5eea,_0x459a32=-_0x459a32,_0x17327c=-_0x17327c),Math['abs'](_0x17327c)>=-0x16*-0x163+-0x23de+0x55d)return this['w']=_0x56f852,this['x']=_0x48b2e2,this['y']=_0x5e94e2,this['z']=_0x167b90,this;const _0x576a6b=Math['acos'](_0x17327c),_0x471ac6=Math['sqrt'](0x36c+-0x19d2+0x1667-_0x17327c*_0x17327c);if(Math['abs'](_0x471ac6)<0x225c+-0x12d0+-0xf8c+0.001)return this['w']=_0x56f852*(-0xc8c+-0x1*0x1c3a+0x28c6+0.5)+_0xa90c9f*(0x3*-0xb4b+-0x2101+0x42e2+0.5),this['x']=_0x48b2e2*(0x18a2+0x2327*-0x1+-0x1*-0xa85+0.5)+_0xfd13a3*(0x1bda+0xcba*0x1+0x35*-0xc4+0.5),this['y']=_0x5e94e2*(-0x22e8+0x1*0x1ea2+-0x223*-0x2+0.5)+_0x4d5eea*(0x2*0x90+0x1*0x20c8+-0x21e8+0.5),this['z']=_0x167b90*(-0x1d68+-0x22d1*-0x1+0x115*-0x5+0.5)+_0x459a32*(0x10*0x225+-0x19a8*-0x1+-0x3bf8+0.5),this;const _0x11bb2d=Math['sin']((0xb26+-0x931+-0x1f4-_0x422ce1)*_0x576a6b)/_0x471ac6,_0x367585=Math['sin'](_0x422ce1*_0x576a6b)/_0x471ac6;return this['w']=_0x56f852*_0x11bb2d+_0xa90c9f*_0x367585,this['x']=_0x48b2e2*_0x11bb2d+_0xfd13a3*_0x367585,this['y']=_0x5e94e2*_0x11bb2d+_0x4d5eea*_0x367585,this['z']=_0x167b90*_0x11bb2d+_0x459a32*_0x367585,this;}['transformV'+'ector'](_0x519e6d,_0x33ebe1=new D()){const _0x15fea5=_0x519e6d['x'],_0x5803f=_0x519e6d['y'],_0x46afad=_0x519e6d['z'],_0x39cd84=this['x'],_0x3b1ae2=this['y'],_0x383777=this['z'],_0x4046f3=this['w'],_0x24f703=_0x4046f3*_0x15fea5+_0x3b1ae2*_0x46afad-_0x383777*_0x5803f,_0x590db8=_0x4046f3*_0x5803f+_0x383777*_0x15fea5-_0x39cd84*_0x46afad,_0x9e216d=_0x4046f3*_0x46afad+_0x39cd84*_0x5803f-_0x3b1ae2*_0x15fea5,_0x5183c0=-_0x39cd84*_0x15fea5-_0x3b1ae2*_0x5803f-_0x383777*_0x46afad;return _0x33ebe1['x']=_0x24f703*_0x4046f3+_0x5183c0*-_0x39cd84+_0x590db8*-_0x383777-_0x9e216d*-_0x3b1ae2,_0x33ebe1['y']=_0x590db8*_0x4046f3+_0x5183c0*-_0x3b1ae2+_0x9e216d*-_0x39cd84-_0x24f703*-_0x383777,_0x33ebe1['z']=_0x9e216d*_0x4046f3+_0x5183c0*-_0x383777+_0x24f703*-_0x3b1ae2-_0x590db8*-_0x39cd84,_0x33ebe1;}['fromArray'](_0x5f478c,_0x13c149=0x1*-0x1a2a+0x12*0x1f3+-0x23b*0x4){return this['x']=_0x5f478c[_0x13c149]??this['x'],this['y']=_0x5f478c[_0x13c149+(0x63+0x107b+-0x10dd)]??this['y'],this['z']=_0x5f478c[_0x13c149+(0x6f2+0x9ad*-0x2+0xc6a)]??this['z'],this['w']=_0x5f478c[_0x13c149+(-0x10e5+-0xa*-0x25+0xf76)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0xf3a854=[],_0x26607e=0x1*0x9f+-0x87d*-0x1+-0x91c){return _0xf3a854[_0x26607e]=this['x'],_0xf3a854[_0x26607e+(-0x853+0x17b5*0x1+0x7f*-0x1f)]=this['y'],_0xf3a854[_0x26607e+(0x2*-0xa6f+-0x1f*0xbf+0x2c01)]=this['z'],_0xf3a854[_0x26607e+(-0x16*0x153+-0x4*0x8c7+0x4041)]=this['w'],_0xf3a854;}};h(Sn,'IDENTITY',Object['freeze'](new Sn(-0x1*-0xd5a+0x2309+0x1021*-0x3,0x8d7+0x9*0xb4+-0x161*0xb,0x757*-0x1+0x2*-0x24d+0x3*0x3fb,0x256e+0xb53+0x14*-0x270))),h(Sn,'ZERO',Object['freeze'](new Sn(0xebb+0x1*-0x287+-0xc34,-0x13*-0x82+0x4*-0x8e9+-0x19fe*-0x1,0x8a*-0x15+0x2029+-0x42b*0x5,0x107b+0x15*-0x115+0x11*0x5e)));let le=Sn;const Pa=new D(),Ma=new D(),Um=new D(),Bm=new D(),gx=new D();class De{constructor(_0x21bb44,_0x6bb22f){h(this,'center',new D()),h(this,'halfExtent'+'s',new D(0xbfe*0x3+0x22d6*-0x1+-0x4*0x49+0.5,-0x1d83+-0x6*0xc7+0x222d+0.5,-0x116e+-0x2*0x112e+0x33ca+0.5)),h(this,'_min',new D()),h(this,'_max',new D()),(_0x21bb44&&this['center']['copy'](_0x21bb44),_0x6bb22f&&this['halfExtent'+'s']['copy'](_0x6bb22f));}['add'](_0x96cfc7){const _0x11a8b3=this['center'],_0x31e3e3=_0x11a8b3['x'],_0x1a490f=_0x11a8b3['y'],_0xc0d235=_0x11a8b3['z'],_0x4fd804=this['halfExtent'+'s'],_0x31f284=_0x4fd804['x'],_0x2f2c74=_0x4fd804['y'],_0x2f3014=_0x4fd804['z'];let _0x3b0281=_0x31e3e3-_0x31f284,_0x3d6ffe=_0x31e3e3+_0x31f284,_0x1866fc=_0x1a490f-_0x2f2c74,_0x2e008a=_0x1a490f+_0x2f2c74,_0x4e4327=_0xc0d235-_0x2f3014,_0x12cb1d=_0xc0d235+_0x2f3014;const _0xd883bd=_0x96cfc7['center'],_0x43aba0=_0xd883bd['x'],_0x3cff34=_0xd883bd['y'],_0x295602=_0xd883bd['z'],_0x24e376=_0x96cfc7['halfExtent'+'s'],_0x3a7d15=_0x24e376['x'],_0x28cb0b=_0x24e376['y'],_0x3956c1=_0x24e376['z'],_0x4d7140=_0x43aba0-_0x3a7d15,_0x34b6ad=_0x43aba0+_0x3a7d15,_0x34e11d=_0x3cff34-_0x28cb0b,_0x5b4d55=_0x3cff34+_0x28cb0b,_0x535a0a=_0x295602-_0x3956c1,_0x19f6a5=_0x295602+_0x3956c1;_0x4d7140<_0x3b0281&&(_0x3b0281=_0x4d7140),_0x34b6ad>_0x3d6ffe&&(_0x3d6ffe=_0x34b6ad),_0x34e11d<_0x1866fc&&(_0x1866fc=_0x34e11d),_0x5b4d55>_0x2e008a&&(_0x2e008a=_0x5b4d55),_0x535a0a<_0x4e4327&&(_0x4e4327=_0x535a0a),_0x19f6a5>_0x12cb1d&&(_0x12cb1d=_0x19f6a5),_0x11a8b3['x']=(_0x3b0281+_0x3d6ffe)*(0xc36+-0x2*-0x12a6+-0x3182+0.5),_0x11a8b3['y']=(_0x1866fc+_0x2e008a)*(0x165c+0x1cb2+-0x330e+0.5),_0x11a8b3['z']=(_0x4e4327+_0x12cb1d)*(-0x248b+-0x7*0x2b4+-0x3777*-0x1+0.5),_0x4fd804['x']=(_0x3d6ffe-_0x3b0281)*(-0x1c74+0x1cac*-0x1+0x3920+0.5),_0x4fd804['y']=(_0x2e008a-_0x1866fc)*(-0x55b*-0x5+0x1569+-0x3030+0.5),_0x4fd804['z']=(_0x12cb1d-_0x4e4327)*(-0x23a2*-0x1+-0x221*0x11+-0x8f*-0x1+0.5);}['copy'](_0x193cda){this['center']['copy'](_0x193cda['center']),this['halfExtent'+'s']['copy'](_0x193cda['halfExtent'+'s']);}['clone'](){return new De(this['center'],this['halfExtent'+'s']);}['intersects'](_0x1c812c){const _0x15b11f=this['getMax'](),_0x380576=this['getMin'](),_0x19b42e=_0x1c812c['getMax'](),_0x3cf789=_0x1c812c['getMin']();return _0x380576['x']<=_0x19b42e['x']&&_0x15b11f['x']>=_0x3cf789['x']&&_0x380576['y']<=_0x19b42e['y']&&_0x15b11f['y']>=_0x3cf789['y']&&_0x380576['z']<=_0x19b42e['z']&&_0x15b11f['z']>=_0x3cf789['z'];}['_intersect'+'sRay'](_0x5825d2,_0x5c9ef7){const _0x18ed96=Pa['copy'](this['getMin']())['sub'](_0x5825d2['origin']),_0x469df9=Ma['copy'](this['getMax']())['sub'](_0x5825d2['origin']),_0x1077c7=_0x5825d2['direction'];_0x1077c7['x']===0x67*0x3b+0x8*0x13+-0x1855?(_0x18ed96['x']=_0x18ed96['x']<-0xf9+-0xad2+0xbcb?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x469df9['x']=_0x469df9['x']<-0x4fe+-0x1f55+-0x2453*-0x1?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x18ed96['x']/=_0x1077c7['x'],_0x469df9['x']/=_0x1077c7['x']),_0x1077c7['y']===0x1e4c+-0x2217*-0x1+0x137*-0x35?(_0x18ed96['y']=_0x18ed96['y']<-0x1218+0xfc1*-0x2+-0x716*-0x7?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x469df9['y']=_0x469df9['y']<0x1843+0x1a72+-0x32b5?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x18ed96['y']/=_0x1077c7['y'],_0x469df9['y']/=_0x1077c7['y']),_0x1077c7['z']===-0xd66+-0xbaf+0x1915?(_0x18ed96['z']=_0x18ed96['z']<0x1*0x63e+-0xcf5+-0x9*-0xbf?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x469df9['z']=_0x469df9['z']<-0x132a+0xd3*0x1d+-0x4bd?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x18ed96['z']/=_0x1077c7['z'],_0x469df9['z']/=_0x1077c7['z']);const _0x1a05e6=Um['set'](Math['min'](_0x18ed96['x'],_0x469df9['x']),Math['min'](_0x18ed96['y'],_0x469df9['y']),Math['min'](_0x18ed96['z'],_0x469df9['z'])),_0x4a122d=Bm['set'](Math['max'](_0x18ed96['x'],_0x469df9['x']),Math['max'](_0x18ed96['y'],_0x469df9['y']),Math['max'](_0x18ed96['z'],_0x469df9['z'])),_0x304e43=Math['min'](Math['min'](_0x4a122d['x'],_0x4a122d['y']),_0x4a122d['z']),_0x56a291=Math['max'](Math['max'](_0x1a05e6['x'],_0x1a05e6['y']),_0x1a05e6['z']),_0x837d6f=_0x304e43>=_0x56a291&&_0x56a291>=0x156a+-0x479*-0x3+0x1*-0x22d5;return _0x837d6f&&_0x5c9ef7['copy'](_0x5825d2['direction'])['mulScalar'](_0x56a291)['add'](_0x5825d2['origin']),_0x837d6f;}['_fastInter'+'sectsRay'](_0x2bafb8){const _0x1fe957=Pa,_0xac0c2b=Ma,_0x2558c4=Um,_0x10d0b8=Bm,_0x3ba0e3=gx,_0x2085d6=_0x2bafb8['direction'];return _0x1fe957['sub2'](_0x2bafb8['origin'],this['center']),_0x10d0b8['set'](Math['abs'](_0x1fe957['x']),Math['abs'](_0x1fe957['y']),Math['abs'](_0x1fe957['z'])),_0x2558c4['mul2'](_0x1fe957,_0x2085d6),!(_0x10d0b8['x']>this['halfExtent'+'s']['x']&&_0x2558c4['x']>=0x13*0x25+-0xb9*-0x27+-0x6b*0x4a||_0x10d0b8['y']>this['halfExtent'+'s']['y']&&_0x2558c4['y']>=0x25*-0xc5+0xf70*-0x2+-0x1*-0x3b59||_0x10d0b8['z']>this['halfExtent'+'s']['z']&&_0x2558c4['z']>=-0x78f+0xcf3+-0x564||(_0x3ba0e3['set'](Math['abs'](_0x2085d6['x']),Math['abs'](_0x2085d6['y']),Math['abs'](_0x2085d6['z'])),_0xac0c2b['cross'](_0x2085d6,_0x1fe957),_0xac0c2b['set'](Math['abs'](_0xac0c2b['x']),Math['abs'](_0xac0c2b['y']),Math['abs'](_0xac0c2b['z'])),_0xac0c2b['x']>this['halfExtent'+'s']['y']*_0x3ba0e3['z']+this['halfExtent'+'s']['z']*_0x3ba0e3['y'])||_0xac0c2b['y']>this['halfExtent'+'s']['x']*_0x3ba0e3['z']+this['halfExtent'+'s']['z']*_0x3ba0e3['x']||_0xac0c2b['z']>this['halfExtent'+'s']['x']*_0x3ba0e3['y']+this['halfExtent'+'s']['y']*_0x3ba0e3['x']);}['intersects'+'Ray'](_0x50eb7c,_0x333e57){return _0x333e57?this['_intersect'+'sRay'](_0x50eb7c,_0x333e57):this['_fastInter'+'sectsRay'](_0x50eb7c);}['setMinMax'](_0x1b6700,_0x28a5a7){this['center']['add2'](_0x28a5a7,_0x1b6700)['mulScalar'](-0x331+-0x167*-0x1a+-0x2145+0.5),this['halfExtent'+'s']['sub2'](_0x28a5a7,_0x1b6700)['mulScalar'](0x2*-0xc36+0x12a+-0xd*-0x1ca+0.5);}['getMin'](){return this['_min']['copy'](this['center'])['sub'](this['halfExtent'+'s']);}['getMax'](){return this['_max']['copy'](this['center'])['add'](this['halfExtent'+'s']);}['containsPo'+'int'](_0x306490){const _0x1502a4=this['getMin'](),_0x316cb2=this['getMax']();return!(_0x306490['x']<_0x1502a4['x']||_0x306490['x']>_0x316cb2['x']||_0x306490['y']<_0x1502a4['y']||_0x306490['y']>_0x316cb2['y']||_0x306490['z']<_0x1502a4['z']||_0x306490['z']>_0x316cb2['z']);}['setFromTra'+'nsformedAa'+'bb'](_0x31379b,_0x5a0bad,_0x5c6a7f=!(0x5fb*0x2+-0x7a6+-0x44f*0x1)){const _0x240d25=_0x31379b['center'],_0x115d35=_0x31379b['halfExtent'+'s'],_0x2c5a6f=_0x5a0bad['data'];let _0x5ea10d=_0x2c5a6f[-0x257*0x5+0x1*0x929+0x1*0x28a],_0x6a43a8=_0x2c5a6f[0x1d*0x29+-0xb*0x37c+0x1*0x21b3],_0x53573b=_0x2c5a6f[0x60a*0x5+0x20b5*-0x1+0x28b],_0x3e814b=_0x2c5a6f[-0x256a+0x1a3*0xd+0x1024],_0x8c971e=_0x2c5a6f[0xf7+0x1aec+-0x1bde],_0x56fcdb=_0x2c5a6f[0x37+0xa07+-0xa35],_0x640976=_0x2c5a6f[0xa*-0x277+0x1cff+0x1*-0x457],_0x10fdd9=_0x2c5a6f[-0x2337+0x9*-0x225+0x368a],_0x4d7447=_0x2c5a6f[-0x37b+-0x40*-0x2f+0x1*-0x83b];if(_0x5c6a7f){let _0x4c400c=_0x5ea10d*_0x5ea10d+_0x6a43a8*_0x6a43a8+_0x53573b*_0x53573b;if(_0x4c400c>-0x1*-0x2284+-0xd29*-0x1+-0x2fad*0x1){const _0x427692=(0x1d1b+0xa66+-0x2780)/Math['sqrt'](_0x4c400c);_0x5ea10d*=_0x427692,_0x6a43a8*=_0x427692,_0x53573b*=_0x427692;}if(_0x4c400c=_0x3e814b*_0x3e814b+_0x8c971e*_0x8c971e+_0x56fcdb*_0x56fcdb,_0x4c400c>0x1ccf+0x1*-0x53e+-0x1791){const _0x1cb298=(0x11c*0x2+0x944*-0x2+0x1*0x1051)/Math['sqrt'](_0x4c400c);_0x3e814b*=_0x1cb298,_0x8c971e*=_0x1cb298,_0x56fcdb*=_0x1cb298;}if(_0x4c400c=_0x640976*_0x640976+_0x10fdd9*_0x10fdd9+_0x4d7447*_0x4d7447,_0x4c400c>-0x40b*-0x4+-0x2aa*-0x4+-0x1ad4){const _0x192ec1=(0x1990+0x1*0x422+-0x1db1)/Math['sqrt'](_0x4c400c);_0x640976*=_0x192ec1,_0x10fdd9*=_0x192ec1,_0x4d7447*=_0x192ec1;}}this['center']['set'](_0x2c5a6f[0x4*0x61b+0x1679+0x43*-0xb3]+_0x5ea10d*_0x240d25['x']+_0x6a43a8*_0x240d25['y']+_0x53573b*_0x240d25['z'],_0x2c5a6f[-0x2569+0x1ad*0x17+0x115*-0x1]+_0x3e814b*_0x240d25['x']+_0x8c971e*_0x240d25['y']+_0x56fcdb*_0x240d25['z'],_0x2c5a6f[-0x2*-0x883+0x241+-0x1339*0x1]+_0x640976*_0x240d25['x']+_0x10fdd9*_0x240d25['y']+_0x4d7447*_0x240d25['z']),this['halfExtent'+'s']['set'](Math['abs'](_0x5ea10d)*_0x115d35['x']+Math['abs'](_0x6a43a8)*_0x115d35['y']+Math['abs'](_0x53573b)*_0x115d35['z'],Math['abs'](_0x3e814b)*_0x115d35['x']+Math['abs'](_0x8c971e)*_0x115d35['y']+Math['abs'](_0x56fcdb)*_0x115d35['z'],Math['abs'](_0x640976)*_0x115d35['x']+Math['abs'](_0x10fdd9)*_0x115d35['y']+Math['abs'](_0x4d7447)*_0x115d35['z']);}static['computeMin'+'Max'](_0x118507,_0x4d87ff,_0x2e1a4d,_0x2af854=_0x118507['length']/(-0x216+-0x4*-0x525+-0x127b)){if(_0x2af854>0x1b*-0x91+0x62d+0x91e){let _0x32e8d8=_0x118507[0x9*-0x39b+0x815*0x3+0x4*0x20d],_0x11d8dc=_0x118507[-0x65*0x9+0x9ee+-0x1*0x660],_0x3f13cf=_0x118507[-0x3*-0xc87+0x2006+-0x4599],_0x419a61=_0x32e8d8,_0x2a0693=_0x11d8dc,_0xc66df0=_0x3f13cf;const _0x1efb23=_0x2af854*(0x46d+-0x4c3+-0x1*-0x59);for(let _0x5a50b1=-0x10f9+0x9a4+0xa*0xbc;_0x5a50b1<_0x1efb23;_0x5a50b1+=0x1*0xefb+-0x3*0xbb+0xcc7*-0x1){const _0x5e4287=_0x118507[_0x5a50b1],_0x5455e8=_0x118507[_0x5a50b1+(0x22fd*0x1+0x8*-0x43a+-0x12c)],_0x32644d=_0x118507[_0x5a50b1+(-0xe05+-0x52d+0x1334)];_0x5e4287<_0x32e8d8&&(_0x32e8d8=_0x5e4287),_0x5455e8<_0x11d8dc&&(_0x11d8dc=_0x5455e8),_0x32644d<_0x3f13cf&&(_0x3f13cf=_0x32644d),_0x5e4287>_0x419a61&&(_0x419a61=_0x5e4287),_0x5455e8>_0x2a0693&&(_0x2a0693=_0x5455e8),_0x32644d>_0xc66df0&&(_0xc66df0=_0x32644d);}_0x4d87ff['set'](_0x32e8d8,_0x11d8dc,_0x3f13cf),_0x2e1a4d['set'](_0x419a61,_0x2a0693,_0xc66df0);}}['compute'](_0x2537bb,_0x17c2c9){De['computeMin'+'Max'](_0x2537bb,Pa,Ma,_0x17c2c9),this['setMinMax'](Pa,Ma);}['intersects'+'BoundingSp'+'here'](_0x1a68dd){return this['_distanceT'+'oBoundingS'+'phereSq'](_0x1a68dd)<=_0x1a68dd['radius']*_0x1a68dd['radius'];}['_distanceT'+'oBoundingS'+'phereSq'](_0x4b0d02){const _0x1e406a=this['getMin'](),_0x161943=this['getMax']();let _0xad66db=0x2*-0xee9+0x21f3+-0x421;const _0x4bb234=['x','y','z'];for(let _0x13f265=0x1*0xdd0+-0x1*0x12d+-0xca3;_0x13f265<-0xcb3+-0x2e+0xce4;++_0x13f265){let _0xbc52b3=-0x1eeb+0x395*0x3+-0x142c*-0x1;const _0x1d0dd8=_0x4b0d02['center'][_0x4bb234[_0x13f265]],_0x45a8c0=_0x1e406a[_0x4bb234[_0x13f265]],_0x48771c=_0x161943[_0x4bb234[_0x13f265]];let _0x293b8c=-0x163e*-0x1+-0x7*0x42b+0x163*0x5;_0x1d0dd8<_0x45a8c0&&(_0x293b8c=_0x45a8c0-_0x1d0dd8,_0xbc52b3+=_0x293b8c*_0x293b8c),_0x1d0dd8>_0x48771c&&(_0x293b8c=_0x1d0dd8-_0x48771c,_0xbc52b3+=_0x293b8c*_0x293b8c),_0xad66db+=_0xbc52b3;}return _0xad66db;}['_expand'](_0x4ca1a9,_0x4e4a6b){Pa['add2'](this['getMin'](),_0x4ca1a9),Ma['add2'](this['getMax'](),_0x4e4a6b),this['setMinMax'](Pa,Ma);}}const Wl=new D(),Sx=new D();class sp{constructor(_0x25e5b3=new D(),_0x4d0563=-0x18ee+0x2*0xaa1+-0x14*-0x2f+0.5){h(this,'center'),h(this,'radius'),(w['assert'](!Object['isFrozen'](_0x25e5b3),'The\x20constr'+'uctor\x20of\x20\x27'+'BoundingSp'+'here\x27\x20does'+'\x20not\x20accep'+'t\x20a\x20consta'+'nt\x20(frozen'+')\x20object\x20a'+'s\x20a\x20\x27cente'+'r\x27\x20paramet'+'er'),this['center']=_0x25e5b3,this['radius']=_0x4d0563);}['containsPo'+'int'](_0x265219){const _0x4e1748=Wl['sub2'](_0x265219,this['center'])['lengthSq'](),_0x408729=this['radius'];return _0x4e1748<_0x408729*_0x408729;}['intersects'+'Ray'](_0x24ca7e,_0x55cd07){const _0x3876b3=Wl['copy'](_0x24ca7e['origin'])['sub'](this['center']),_0x500da5=_0x3876b3['dot'](Sx['copy'](_0x24ca7e['direction'])['normalize']()),_0x557fe8=_0x3876b3['dot'](_0x3876b3)-this['radius']*this['radius'];if(_0x557fe8>-0x1*-0x204b+0x1651+-0x369c&&_0x500da5>-0x156+0x206f*0x1+0x1*-0x1f19)return!(0xd61*0x1+-0x8*0x246+-0x58*-0xe);const _0xad1088=_0x500da5*_0x500da5-_0x557fe8;if(_0xad1088<-0x5*0x791+-0xf*-0x272+0x5*0x3b)return!(0x1*0x523+0x2*-0xe5e+0x179a*0x1);const _0x4b2ecd=Math['abs'](-_0x500da5-Math['sqrt'](_0xad1088));return _0x55cd07&&_0x55cd07['copy'](_0x24ca7e['direction'])['mulScalar'](_0x4b2ecd)['add'](_0x24ca7e['origin']),!(-0x1080+-0xaa*-0x15+0x28e);}['intersects'+'BoundingSp'+'here'](_0x2d3d61){Wl['sub2'](_0x2d3d61['center'],this['center']);const _0x5b7cf0=_0x2d3d61['radius']+this['radius'];return Wl['lengthSq']()<=_0x5b7cf0*_0x5b7cf0;}}class QS{constructor(_0x3309f0=D['UP'],_0x2a6cae=-0xa3*0xb+0x1*-0x1c2d+0x232e){h(this,'normal',new D()),h(this,'distance'),(this['normal']['copy'](_0x3309f0),this['distance']=_0x2a6cae);}['clone'](){const _0x5aced4=this['constructo'+'r'];return new _0x5aced4()['copy'](this);}['copy'](_0x1e82eb){return this['normal']['copy'](_0x1e82eb['normal']),this['distance']=_0x1e82eb['distance'],this;}['intersects'+'Line'](_0x5eb520,_0x4c0711,_0x2b800c){const _0x3e9b73=this['distance'],_0x2b1268=this['normal']['dot'](_0x5eb520)+_0x3e9b73,_0x3eb5da=this['normal']['dot'](_0x4c0711)+_0x3e9b73,_0x192ffa=_0x2b1268/(_0x2b1268-_0x3eb5da),_0x41c72d=_0x192ffa>=0x11f9+-0x3*-0xb1d+-0x3350&&_0x192ffa<=-0x3db*0x8+-0x35*0xbb+0x4590;return _0x41c72d&&_0x2b800c&&_0x2b800c['lerp'](_0x5eb520,_0x4c0711,_0x192ffa),_0x41c72d;}['intersects'+'Ray'](_0x4999a4,_0x1cc0ac){const _0x25ddba=this['normal']['dot'](_0x4999a4['direction']);if(_0x25ddba===-0x2159+0x5*0x3b6+0xecb)return!(-0x2293+0xaf+-0x21e5*-0x1);const _0x2431ae=-(this['normal']['dot'](_0x4999a4['origin'])+this['distance'])/_0x25ddba;return _0x2431ae>=-0x22ef+0xe98+0x1457&&_0x1cc0ac&&_0x1cc0ac['copy'](_0x4999a4['direction'])['mulScalar'](_0x2431ae)['add'](_0x4999a4['origin']),_0x2431ae>=0x1774+0x1f68+-0x36dc;}['normalize'](){const _0x23cd22=(-0x45*-0x8a+0x1*-0x11e3+0x2c2*-0x7)/this['normal']['length']();return this['normal']['mulScalar'](_0x23cd22),this['distance']*=_0x23cd22,this;}['set'](_0x11eb35,_0x26d987,_0x3a2019,_0x3bab97){return this['normal']['set'](_0x11eb35,_0x26d987,_0x3a2019),this['distance']=_0x3bab97,this;}['setFromPoi'+'ntNormal'](_0x190d59,_0x3a25c0){return this['normal']['copy'](_0x3a25c0),this['distance']=-this['normal']['dot'](_0x190d59),this;}}class yx{constructor(){h(this,'planes',[]);for(let _0x3fb5b9=0x114+-0x1130+0x101c;_0x3fb5b9<0x1*0x1f29+0x1a4e+-0x3971;_0x3fb5b9++)this['planes'][_0x3fb5b9]=new QS();}['clone'](){const _0x19ea5e=this['constructo'+'r'];return new _0x19ea5e()['copy'](this);}['copy'](_0x7d2f11){for(let _0x4973d5=-0x2456*-0x1+0x1faf*-0x1+-0x1*0x4a7;_0x4973d5<0x2*-0x84b+-0xfcc+-0x2*-0x1034;_0x4973d5++)this['planes'][_0x4973d5]['copy'](_0x7d2f11['planes'][_0x4973d5]);return this;}['setFromMat'+'4'](_0x2cf4c0){const [_0x53bb63,_0x3a12fd,_0x4d2558,_0x21f555,_0x1c8d15,_0x1668e9,_0x32c529,_0x1bfa36,_0x350a03,_0xe9d98d,_0xfc5c3f,_0x59c885,_0x135d04,_0x4c0197,_0x31e3d2,_0x2b400f]=_0x2cf4c0['data'],_0x21197d=this['planes'];_0x21197d[0x25e5+0x1862+-0x1*0x3e47]['set'](_0x21f555-_0x53bb63,_0x1bfa36-_0x1c8d15,_0x59c885-_0x350a03,_0x2b400f-_0x135d04)['normalize'](),_0x21197d[-0x8eb+0x1ddc+-0x86*0x28]['set'](_0x21f555+_0x53bb63,_0x1bfa36+_0x1c8d15,_0x59c885+_0x350a03,_0x2b400f+_0x135d04)['normalize'](),_0x21197d[-0x2047+-0x5c9+0x2612]['set'](_0x21f555+_0x3a12fd,_0x1bfa36+_0x1668e9,_0x59c885+_0xe9d98d,_0x2b400f+_0x4c0197)['normalize'](),_0x21197d[0x8dd*-0x4+-0x227d+0x79*0x94]['set'](_0x21f555-_0x3a12fd,_0x1bfa36-_0x1668e9,_0x59c885-_0xe9d98d,_0x2b400f-_0x4c0197)['normalize'](),_0x21197d[0x27*-0xfe+0x1*0x1352+0x1364]['set'](_0x21f555-_0x4d2558,_0x1bfa36-_0x32c529,_0x59c885-_0xfc5c3f,_0x2b400f-_0x31e3d2)['normalize'](),_0x21197d[0x1*0x416+0xc8b+-0x109c]['set'](_0x21f555+_0x4d2558,_0x1bfa36+_0x32c529,_0x59c885+_0xfc5c3f,_0x2b400f+_0x31e3d2)['normalize']();}['containsPo'+'int'](_0x260bb0){for(let _0x2b07da=-0x23ce+0x1b53+0x1*0x87b;_0x2b07da<-0x26e*0x7+0x83a+0x467*0x2;_0x2b07da++){const {normal:_0x2d0723,distance:_0x49f345}=this['planes'][_0x2b07da];if(_0x2d0723['dot'](_0x260bb0)+_0x49f345<=0x1*-0x2d1+-0x52*-0x1d+-0x679)return!(-0x1*0x8f9+-0x7*0x4eb+0x10f*0x29);}return!(0x73+-0x2561+0x24ee);}['containsSp'+'here'](_0x19246d){const {center:_0x125f50,radius:_0x529aa3}=_0x19246d;let _0x2c4c34=0x2*0xccb+0xd2+-0x1a68;for(let _0x2dc31f=0x1f1d+0x1e2b+-0x25*0x1a8;_0x2dc31f<0x17*0x71+-0x12c3+0x22*0x41;_0x2dc31f++){const {normal:_0x5c8a48,distance:_0x1c6728}=this['planes'][_0x2dc31f],_0x5a80d2=_0x5c8a48['dot'](_0x125f50)+_0x1c6728;if(_0x5a80d2<=-_0x529aa3)return 0xa16+-0x8c3+-0x153*0x1;_0x5a80d2>_0x529aa3&&_0x2c4c34++;}return _0x2c4c34===-0x244d*0x1+-0x1def*-0x1+0x664?0x15f6+0x45*0x39+-0x2551:-0x1383+-0x1011+0x2395;}}class Dn{constructor(_0x2de92a,_0x443656){h(this,'origin',new D()),h(this,'direction',D['FORWARD']['clone']()),(_0x2de92a&&this['origin']['copy'](_0x2de92a),_0x443656&&this['direction']['copy'](_0x443656));}['set'](_0x4fd35d,_0x3dd17d){return this['origin']['copy'](_0x4fd35d),this['direction']['copy'](_0x3dd17d),this;}['copy'](_0x4466a9){return this['set'](_0x4466a9['origin'],_0x4466a9['direction']);}['clone'](){return new this['constructo'+'r'](this['origin'],this['direction']);}}const yt=-0x1eb8+0x4f6+0x19c2,ue=-0x3*-0xa59+-0x129f+0x1*-0xc6b,ip=-0x1b24+-0x2051+0x3b77,rp=0x964+0x1a22+0x11c3*-0x2,Ft=-0x1*-0x7c9+0x1381+-0x1b49,vx=0x489+0x4ee+-0x975*0x1,JS=-0x34b*0x8+-0x32*0x8f+-0x364a*-0x1,xx=-0x11*0x197+0x2273+-0x767,jh=-0xcb6+0xbfb+0xc1,Yh=0x1*-0x177b+-0x7b*0x1+0x17fe,fs=0xb1e*-0x1+-0x1461+0xb*0x2dd,Tx=0x4*-0x609+-0x26b7+0x3edd,wx=-0x6d6+0x103*0x23+-0x1c90,Ex=-0x291+0x20b1+-0x1e1c,ms=0xe8+-0x1*0xd89+-0x35*-0x3d,lh=-0x1*-0x112+0x285*0x1+-0x396,ey=0x4*0x5c6+-0x1*0x12fd+-0x419,bx=0x1d3f+-0x75*0x11+0x9d*-0x23,jo=-0x419*-0x6+0x1aba+0xa43*-0x5,Yo=0x25bd+0xdc8+-0x3383,ch=0xf*-0x9+0x1196+-0x110b,bt=-0x1063*0x2+0x9*-0x210+0x3356,pa=0x169e+-0x1063*0x2+0x121*0x9,Fo=-0x2507*0x1+0x343*0x2+0x1*0x1e83,Ax=0x2178+-0x1f2f+-0x1*0x246,Te=0x43*-0x1+0x26b0+0x9*-0x445,vt=-0x407*0x1+-0x165*-0x7+-0x5bb,Kh=-0x2ef*0x5+-0x14a4+0x1*0x2351,Zh=-0x1f7*-0x1+-0x26cd+0x24d9,Qh=-0x1*-0x407+0x6*0x2bf+-0x147d,ma=0x1*-0x2108+0x3*-0xb27+0x4282,Cx=0x1a15+-0xd35+-0xce0,hh=0x26f5+-0x1db4+-0x250*0x4,dh=0x908+-0x24b8+0x1bb2,Wf=-0x6bf+0xc0*0x14+-0xa*0xd3,Px=0x136e+-0x828+-0x83*0x16,Mx=0x2df*0x1+0x1a9*0xd+-0x186f,Dx=0x17cc+-0xb*-0x322+-0x3a3c,Wi=-0x15f4+0x25eb+-0xff0,$f=-0x53b+-0x2199+-0x8c*-0x47,Yi=0x1b8e+0x4bd*0x1+-0x204a,wr=0x22d*0x5+0x1*0xb4a+-0x1629,ty=-0x1b9d+0xd4a+0x1*0xe53,sy=-0x1*-0x7e5+0xae1*-0x1+-0x2d*-0x11,ap=0xa30+0x146b+-0x1e99*0x1,Jh=0x1c7a+0x9f*0x22+-0x3195,np=0xb93+0x1082+-0x1*0x1c11,ed=0x1c*-0x67+-0x15ef+0x2138,Cr=-0x1d5*0x12+-0x1e17+-0x1f*-0x209,Ne=0x1e*0x35+0x37e+-0x9ad,td=-0x1c06+-0xe33+-0x1*-0x2a41,op=-0x1f9b+-0x2*0x8ec+0x18be*0x2,vl=0x2d3+-0x270d+0x2444,ui=-0x1*0x1c6f+0x20a5+0x42b*-0x1,nt=0x47*-0x81+-0x4c0+0x2893,Ye=0x2048+-0x1d3d+-0x2fe,Xt=0x1339*-0x1+-0x406+-0x1*-0x174d,Ji=0x8*0x233+0xad*-0x1+0x10dc*-0x1,$i=-0x5f3+-0xc6e+0x1271,sd=0x23be+0x1d87+0x27*-0x1ac,In=0x1*0x764+-0x3*-0x200+-0xd52,lp=-0x1b14+0x1613+-0x14*-0x41,_s=0x1*-0xc8e+0x1c81*-0x1+0x1*0x2923,id=-0x1171*-0x1+0x1ad3+0x1*-0x2c2f,cp=-0x9f0+0x1*0x1073+-0x149*0x5,hp=0x1*0x71d+-0x160c+0xf06,xl=0x17e0+-0x2324+0xb5c,Tl=-0x1ec3+0x2603+0x1*-0x727,rd=0x123e+-0x1c41+0x1*0xa1d,ad=0x1a27+-0x23*-0xc5+-0x34fb,iy=0x209b*-0x1+-0x10*-0x200+-0x3*-0x3d,ry=0x205a+0x3*-0xb9c+0x297,ay=0x226+0x2392+-0x259a,ny=-0x557*-0x1+0x5*0x3f4+-0xc*0x215,dp=-0x4*-0x467+-0x1c49*0x1+0x229*0x5,oy=-0x76*-0x19+-0x1b5d+-0x38*-0x49,fp=0x1*0x2665+0xcb8+-0x32fb,up=-0x11bb*-0x1+0x637+-0x17cf,pp=0x13*-0x16f+-0x1373*-0x2+-0xb85,Ki=-0x174+0x1d17+-0x1b7e,mp=-0x1ad8+-0x1e3b+-0x101*-0x39,ly=0x379*-0x1+0x1abb+-0x171b,_p=0xd*-0x184+0xed+0x1*0x12ef,gp=0x1*-0x856+-0x1d25+0x25a4,Sp=-0x1263+0x48c+0xe01,yp=-0x1db4+0x2210+-0x431,vp=0xffa+-0x8*0x484+-0x6c6*-0x3,cy=-0x4c3*0x1+-0x26a0+-0x44*-0xa4,xp=-0x17*-0xfb+0x1*0x12d+-0x178c,nd=-0x543+0x1bab+0x1639*-0x1,Tp=-0x1c20+-0x67*0x31+-0x99b*-0x5,Ue=0x21*0x7e+-0x23d*-0x6+-0x1d7b,od=-0x31e+-0x525*-0x1+-0x1d5,wp=-0x258+0x1290+-0x3*0x557,Ep=-0xdde+0x2448+-0x1636,bp=-0x1569+0x1f2e*0x1+-0x990,Xf=-0x6b7+-0x1a9c+0x2189,qf=-0x2*0xa86+0x1d0d+-0x7ca*0x1,jf=0x12af+0x3a6*0x8+-0x2fa7,Yf=-0xb8+0x1171+-0x41f*0x4,Kf=-0x5e7*-0x5+0x9*-0x41b+0x7ae,Zf=0x4f+0x1*0x1cb6+0xfe*-0x1d,hy=-0x1816*0x1+0x119d+0x6b9*0x1,dy=0x1*-0x431+-0x213d+0x25af,fy=0xde6+0x70c+-0x14b0,uy=-0x2478+0xa95+-0x1a26*-0x1,Qf=0x1889+0x5c3+-0x4*0x782,vn=0x1344+-0x269c+0x139d,Nt=new Map([[ty,{'name':'A8','size':0x1,'ldr':!(0x4*0x489+-0x22ba+-0x182*-0xb)}],[Ep,{'name':'R8','size':0x1,'ldr':!(-0x16f7+-0xc91+0x2388)}],[sy,{'name':'L8','size':0x1,'ldr':!(0x189a+0x2*0x875+-0xa61*0x4)}],[ap,{'name':'LA8','size':0x2,'ldr':!(0xd99+0x5*-0x3df+0x2e1*0x2)}],[bp,{'name':'RG8','size':0x2,'ldr':!(0x2606+0x702*0x2+-0x340a)}],[Jh,{'name':'RGB565','size':0x2,'ldr':!(0xb14+0x1*-0x3fb+-0x719)}],[np,{'name':'RGBA5551','size':0x2,'ldr':!(-0x150f+-0xa*-0xf2+0xb9b)}],[ed,{'name':'RGBA4','size':0x2,'ldr':!(-0xf8b+-0x3*0x4e1+0x2*0xf17)}],[Cr,{'name':'RGB8','size':0x4,'ldr':!(0x239e+-0x1b23+-0x87b)}],[Ne,{'name':'RGBA8','size':0x4,'ldr':!(0x17d0+0x1*-0x1d2a+-0xa*-0x89),'srgbFormat':_s}],[od,{'name':'R16F','size':0x2}],[wp,{'name':'RG16F','size':0x4}],[ui,{'name':'RGB16F','size':0x8}],[nt,{'name':'RGBA16F','size':0x8}],[Ye,{'name':'RGB32F','size':0x10}],[Xt,{'name':'RGBA32F','size':0x10}],[Ji,{'name':'R32F','size':0x4}],[$i,{'name':'DEPTH','size':0x4}],[vn,{'name':'DEPTH16','size':0x2}],[sd,{'name':'DEPTHSTENC'+'IL','size':0x4}],[In,{'name':'111110F','size':0x4}],[lp,{'name':'SRGB8','size':0x4,'ldr':!(-0x217*0x12+-0x4*-0x63+0x2412),'srgb':!(0x5*0x529+0xd0c+-0xc3*0x33)}],[_s,{'name':'SRGBA8','size':0x4,'ldr':!(0xd03+0x462+-0x1165),'srgb':!(-0x17b6+0x1d2c+-0x576)}],[ny,{'name':'BGRA8','size':0x4,'ldr':!(-0xe44+-0x1*-0x22c2+-0x147e)}],[hy,{'name':'SBGRA8','size':0x4,'ldr':!(-0x2521+-0x24c9+0x24f5*0x2),'srgb':!(0xc33+-0xe*-0x68+-0x11e3)}],[td,{'name':'DXT1','blockSize':0x8,'ldr':!(0x1fd+0x6*0xd6+0x1*-0x701),'srgbFormat':Xf}],[op,{'name':'DXT3','blockSize':0x10,'ldr':!(0x2327*0x1+0x1a56+-0x3d7d),'srgbFormat':qf}],[vl,{'name':'DXT5','blockSize':0x10,'ldr':!(-0xcfd+-0x4c9*0x7+0x2e7c),'srgbFormat':jf}],[id,{'name':'ETC1','blockSize':0x8,'ldr':!(-0x50d+0xc55*-0x2+0x1db7)}],[cp,{'name':'ETC2_RGB','blockSize':0x8,'ldr':!(-0xf1c+-0x1*-0x21fb+-0x12df*0x1),'srgbFormat':Yf}],[hp,{'name':'ETC2_RGBA','blockSize':0x10,'ldr':!(-0x396+-0x7*0x3ee+0x1f18),'srgbFormat':Kf}],[xl,{'name':'PVRTC_2BPP'+'_RGB_1','ldr':!(0x1b55+-0x15cc+-0x589*0x1),'blockSize':0x8}],[Tl,{'name':'PVRTC_2BPP'+'_RGBA_1','ldr':!(0x2321+0x70d+-0x2a2e),'blockSize':0x8}],[rd,{'name':'PVRTC_4BPP'+'_RGB_1','ldr':!(0x169b+-0x264b+0x3ec*0x4),'blockSize':0x8}],[ad,{'name':'PVRTC_4BPP'+'_RGBA_1','ldr':!(0x2621+-0x19*-0x33+-0x2b1c),'blockSize':0x8}],[iy,{'name':'ASTC_4x4','blockSize':0x10,'ldr':!(-0x11d*0x1e+-0x26da+0x4840),'srgbFormat':Zf}],[ry,{'name':'ATC_RGB','blockSize':0x8,'ldr':!(-0x25ce+-0x55*-0x1b+0x6b*0x45)}],[ay,{'name':'ATC_RGBA','blockSize':0x10,'ldr':!(0x1*-0x422+0x1*0x221b+-0x1df9)}],[dy,{'name':'BC6H_RGBF','blockSize':0x10}],[fy,{'name':'BC6H_RGBUF','blockSize':0x10}],[uy,{'name':'BC7_RGBA','blockSize':0x10,'ldr':!(0xfcf+0x5c*-0x1f+-0x4ab),'srgbFormat':Qf}],[Xf,{'name':'DXT1_SRGB','blockSize':0x8,'ldr':!(-0x1b2b*0x1+-0xd2b+-0x2856*-0x1),'srgb':!(0x35*0x8b+0xf0c+-0x2bd3)}],[qf,{'name':'DXT3_SRGBA','blockSize':0x10,'ldr':!(0xf13+0x136d*-0x2+-0x1*-0x17c7),'srgb':!(0x2*0x124a+0x1e69+-0x42fd)}],[jf,{'name':'DXT5_SRGBA','blockSize':0x10,'ldr':!(-0xab2*-0x3+0x23f+0x11*-0x205),'srgb':!(0x2231*-0x1+-0x1*0x2701+0x4932)}],[Yf,{'name':'ETC2_SRGB','blockSize':0x8,'ldr':!(0x183a+0x415+-0x1c4f),'srgb':!(0x400*-0x8+-0x21*0x2c+0x25ac)}],[Kf,{'name':'ETC2_SRGBA','blockSize':0x10,'ldr':!(-0x173f+0x24ef+-0xdb0),'srgb':!(-0x12d1+-0xda3+0x1*0x2074)}],[Zf,{'name':'ASTC_4x4_S'+'RGB','blockSize':0x10,'ldr':!(0x160c+-0x1*-0x215f+-0x376b),'srgb':!(-0x2037+0x2*0xdc9+0x4a5)}],[Qf,{'name':'BC7_SRGBA','blockSize':0x10,'ldr':!(-0x21b2+0x1*-0x10dd+0x328f),'srgb':!(-0x1c5f+0x10a+0x1b55)}],[dp,{'name':'R8I','size':0x1,'isInt':!(0x26ec+-0x711+-0x23*0xe9)}],[oy,{'name':'R8U','size':0x1,'isInt':!(0x1*0x204d+-0x19a7+0x6a6*-0x1)}],[fp,{'name':'R16I','size':0x2,'isInt':!(-0xd*-0x7b+-0x1aa0+0x1461)}],[up,{'name':'R16U','size':0x2,'isInt':!(0x2*-0xca3+-0x2*0x59f+-0x4c*-0x7b)}],[pp,{'name':'R32I','size':0x4,'isInt':!(-0x3*-0xa9c+-0x3b1+-0x7*0x405)}],[Ki,{'name':'R32U','size':0x4,'isInt':!(-0x1*0xb31+0x1107+-0x5d6)}],[mp,{'name':'RG8I','size':0x2,'isInt':!(0x1*0x167+-0x1ffb+-0x26*-0xce)}],[ly,{'name':'RG8U','size':0x2,'isInt':!(0x1243+0x1c9*-0x1+-0x107a)}],[_p,{'name':'RG16I','size':0x4,'isInt':!(0xc5f+-0x7ca+-0x495)}],[gp,{'name':'RG16U','size':0x4,'isInt':!(0xc9a+0x38a*-0xb+0x1a54)}],[Sp,{'name':'RG32I','size':0x8,'isInt':!(-0xa9b+0xcb*0x31+0xe20*-0x2)}],[yp,{'name':'RG32U','size':0x8,'isInt':!(0x236d+-0x21c1*0x1+-0x1ac)}],[vp,{'name':'RGBA8I','size':0x4,'isInt':!(0xf7*0x1f+0x134d+-0x2*0x189b)}],[cy,{'name':'RGBA8U','size':0x4,'isInt':!(0x1ccb+0xd*-0x2dd+0x86e)}],[xp,{'name':'RGBA16I','size':0x8,'isInt':!(0x157d*0x1+-0x1e3*-0x2+-0x1943)}],[nd,{'name':'RGBA16U','size':0x8,'isInt':!(-0x14ec+0x2683*-0x1+0x3b6f)}],[Tp,{'name':'RGBA32I','size':0x10,'isInt':!(0x4a9*-0x1+0x13*0xd+0x3b2)}],[Ue,{'name':'RGBA32U','size':0x10,'isInt':!(0x159*0x11+-0x1bb4*0x1+0x3*0x199)}]]),Ix=_0x447962=>{var _0x41d898;return((_0x41d898=Nt['get'](_0x447962))==null?void(0x183d+0x119+0x3*-0x872):_0x41d898['blockSize'])!==void(-0x9*-0x1a5+0x8c2+-0x178f);},fh=_0x50c6d3=>{var _0x2be835;return((_0x2be835=Nt['get'](_0x50c6d3))==null?void(-0x1*-0x7ca+0x1d1a*0x1+-0x24e4):_0x2be835['srgb'])===!(0x2*-0x148+0x20bb+0x1e2b*-0x1);},dn=_0xac173c=>{var _0xe83693;return((_0xe83693=Nt['get'](_0xac173c))==null?void(-0x49*-0x19+0x1c38+0x1*-0x2359):_0xe83693['isInt'])===!(0x499+-0xc07+0x76e);},ld=_0x394e5a=>{var _0x523474;return((_0x523474=Nt['get'](_0x394e5a))==null?void(-0x50e*0x1+0x837+-0x329):_0x523474['srgbFormat'])||_0x394e5a;},Lx=_0x168b7b=>{for(const [_0x17c0a0,_0x5c1d3c]of Nt)if(_0x5c1d3c['srgbFormat']===_0x168b7b)return _0x17c0a0;return _0x168b7b;},py=_0x101cbb=>{const _0x13b434=Nt['get'](_0x101cbb);return!!(_0x13b434!=null&&_0x13b434['ldr']&&!(_0x13b434!=null&&_0x13b434['srgb']));},my=_0x5dc656=>{switch(_0x5dc656){case Ji:case Ye:case Xt:return Float32Array;case pp:case Sp:case Tp:return Int32Array;case Ki:case yp:case Ue:return Uint32Array;case fp:case _p:case xp:return Int16Array;case bp:case up:case gp:case nd:case Jh:case np:case ed:case od:case wp:case ui:case nt:return Uint16Array;case dp:case mp:case vp:return Int8Array;default:return Uint8Array;}},cd=-0x1693+-0x581+-0x257*-0xc,hd=-0x4d4*0x4+-0x2*-0xfc7+-0xc3d,_y=-0xab*0x26+-0xb*-0x289+-0x27f,gy=-0x9e5*-0x1+0x2317+-0x2cf9,js=-0x1*-0x871+0x16d9+0x1*-0x1f46,Er=0x1*-0x207b+-0xdf1+0x2e71,oa=-0x4eb*-0x2+-0xdbc+-0xfb*-0x4,Me='POSITION',gs='NORMAL',yi='TANGENT',gi='BLENDWEIGH'+'T',us='BLENDINDIC'+'ES',Wt='COLOR',zm='TEXCOORD',is='TEXCOORD0',ba='TEXCOORD1',wl='TEXCOORD2',El='TEXCOORD3',bl='TEXCOORD4',Al='TEXCOORD5',Cl='TEXCOORD6',Pl='TEXCOORD7',Jf='ATTR0',uh='ATTR1',Ap='ATTR2',Cp='ATTR3',Pp='ATTR4',Rx='ATTR5',Ox='ATTR6',Fx='ATTR7',Ko='ATTR8',Zo='ATTR9',Nx='ATTR10',Mp='ATTR11',Dp='ATTR12',ph='ATTR13',Ip='ATTR14',Ln='ATTR15',Sy=-0x77c*0x2+0x84e+0x6ab,xn=0x5*-0x7a2+0x3*-0xbc8+0xc2*0x61,kx=0x1609*0x1+-0x11b1+0x4a*-0xf,Ux=0x2*-0x26e+-0x3d7*0xa+0x2b45,Bx=0x1864+0xb1b+0x237a*-0x1,$l=-0xd6*-0x1+0x7*-0x506+0x2254,yy=-0x916+0x141*-0x7+0x2*0x8ef,Od=0x1a87*-0x1+0x32b*0x8+0x131,Ds='default',Zi='rgbm',mh='rgbe',Qo='rgbp',Jo='swizzleGGG'+'R',eu=0x3bf*0x4+0x1296+-0x2191,Pr=0x2*0x356+0x230+-0x8da,vy=-0x122c+-0xc4f*0x2+0x2acd*0x1,xy='2d',zx=-0x3*-0xad+0x16ff+-0x1906*0x1,Vx='none',tu='cube',Vm='equirect',Gx='octahedral',Fe='glsl',it='wgsl',dd=0x1*-0x15e7+-0x1c22+0x3209,la=-0xa9c+0x2703+-0x5ae*0x5,fd=0x2328+-0xa9c+0x12*-0x15d,Ml=0x22b1+0x1*0x1619+-0xf*0x3c9,Ty=0x1fb6+-0x254d+0x59b,el=-0xbd0+0x49c*0x6+-0xfd3,Ve=-0x1bc*-0x12+0x1774+-0x36a6,Tn=-0x59*-0x2b+0x1dac+-0x2c9f,_a=0x245d+0xa*0x3d9+0x26a*-0x1f,Xs=0x12c+-0x22a5+-0x3*-0xb29,ga=0x49*-0x21+0x396*-0x3+0x142e,ds=-0x4*-0x761+-0x57a+0x1e*-0xcd,Rn=0x2a9+-0x1689+0x13e5,ca=0x232d*0x1+-0x3*-0x915+0x62*-0xa3,ha=-0x2eb*-0x9+0x24e3+0x1*-0x3f1f,da=-0xa21+-0x215a+-0x1*-0x2b83,tl=-0x89*-0x1b+-0x2ca+-0x5d0*0x2,sl=-0x2518+0xc17*-0x1+0x3139*0x1,il=0x1e42+0x170f*-0x1+0x2*-0x394,_h=-0x81*-0x5+-0x34a+0xd1,On=0x4ca*-0x3+-0x229b+-0x5*-0x9ce,li=0x8*0x48f+-0x114a+0x9*-0x220,Hx=-0x1f*-0x4b+-0x25*-0xc4+0x2*-0x12ad,Wx=0x2173*-0x1+0x1822+0x961,ud=0x6*-0x10d+-0x43*0x7a+0x264d*0x1,$x=-0x1313*-0x1+0x214f+0x9*-0x5d0,Xx=0x1d5a+-0x19c6+-0x381,qx=-0x90e+-0xf*-0x11b+-0x773,pd=0x88c*0x1+-0x122a+0xbf*0xd,md=-0x12b5+-0x68*0x15+0x1b53,Lp=-0x670+-0xf83*0x2+0x1*0x258d,wy=-0xd4*-0xe+0xe25*0x1+0x521*-0x5,jx=0x4*0x980+0x3*-0xad9+-0x55c,Fn=0x230*-0x10+0x602+0x1d18,Nn=0xd72*-0x2+-0x1*-0x167f+-0x40*-0x12,kn=-0x46*-0x49+0x201b*-0x1+-0xc41*-0x1,Un=0x984+0x199a+-0x2301,Bn=0x455*0x4+-0x1*-0x704+-0x183a,_d=0x188b+0x77c*-0x5+0xd00,gd=-0x115*-0x9+-0x2509+0x1b6c*0x1,zn=-0x53f*-0x7+0x476*-0x2+0x1fa*-0xe,Sd=0x11a8+0x109c*-0x2+-0x2*-0x7d9,yd=-0xc26+-0x32b*-0x1+0x91e,Vn=0x1*0x89b+0xa18+0x1*-0x128f,vd=-0x3e0+0x2*-0x72a+0x1259,xd=-0x9a0+0x5*-0x727+-0x1*-0x2d89,gh=0x2*0x1355+0x2153+0xbf9*-0x6,Rp=-0x1156+0x14b1*-0x1+0x262f,Op=0xcf5+-0x222a+0xa*0x223,Yx=0xf2*-0x16+0x43*0x8a+-0x61*0x28,Kx=-0x14b5+0xb*-0x10d+0x206f,Zx=-0x4*0x2ce+0x3b5*0xa+-0x19ae,Qx=-0x10ea*0x2+-0x183e*0x1+-0x25*-0x193,Jx=-0x2702+0x15f6+0x15*0xd2,eT=0x85e+0x2643+-0x1d*0x19a,tT=-0x532+0x10fe+-0xb9c,sT=-0x14d1*-0x1+-0x2566+0x10c6,Ey=['bool','int','float','vec2','vec3','vec4','ivec2','ivec3','ivec4','bvec2','bvec3','bvec4','mat2','mat3','mat4','sampler2D','samplerCub'+'e','','sampler2DS'+'hadow','samplerCub'+'eShadow','sampler3D','','','','','sampler2DA'+'rray','uint','uvec2','uvec3','uvec4','','','','','','','','','','','','','isampler2D','usampler2D','isamplerCu'+'be','usamplerCu'+'be','isampler3D','usampler3D','isampler2D'+'Array','usampler2D'+'Array'],iT=[['bool'],['i32'],['f32'],['vec2f','vec2<f32>'],['vec3f','vec3<f32>'],['vec4f','vec4<f32>'],['vec2i','vec2<i32>'],['vec3i','vec3<i32>'],['vec4i','vec4<i32>'],['vec2<bool>'],['vec3<bool>'],['vec4<bool>'],['mat2x2f','mat2x2<f32'+'>'],['mat3x3f','mat3x3<f32'+'>'],['mat4x4f','mat4x4<f32'+'>'],['texture_2d'+'<f32>'],['texture_cu'+'be<f32>'],['array<f32>'],['texture_de'+'pth_2d'],['texture_de'+'pth_cube'],['texture_3d'+'<f32>'],['array<vec2'+'<f32>>'],['array<vec3'+'<f32>>'],['array<vec4'+'<f32>>'],['array<mat4'+'x4<f32>>'],['texture_2d'+'_array<f32'+'>'],['u32'],['vec2u','vec2<u32>'],['vec3u','vec3<u32>'],['vec4u','vec4<u32>'],['array<i32>'],['array<u32>'],['array<bool'+'>'],['array<vec2'+'i>','array<vec2'+'<i32>>'],['array<vec2'+'u>','array<vec2'+'<u32>>'],['array<vec2'+'b>','array<vec2'+'<bool>>'],['array<vec3'+'i>','array<vec3'+'<i32>>'],['array<vec3'+'u>','array<vec3'+'<u32>>'],['array<vec3'+'b>','array<vec3'+'<bool>>'],['array<vec4'+'i>','array<vec4'+'<i32>>'],['array<vec4'+'u>','array<vec4'+'<u32>>'],['array<vec4'+'b>','array<vec4'+'<bool>>'],['texture_2d'+'<i32>'],['texture_2d'+'<u32>'],['texture_cu'+'be<i32>'],['texture_cu'+'be<u32>'],['texture_3d'+'<i32>'],['texture_3d'+'<u32>'],['texture_2d'+'_array<i32'+'>'],['texture_2d'+'_array<u32'+'>']],rT=new Map();iT['forEach']((_0x183610,_0x580243)=>{_0x183610['forEach'](_0x162c36=>rT['set'](_0x162c36,_0x580243));});const aT='webgl2',Fp=0x9e*0x3a+-0x1*-0x23f3+0x1*-0x47be,by=-0xa3*0x2f+-0x1049+0x2e38,nT=-0x2*0x1124+0xc16*-0x3+-0x66a*-0xb,oT='ldr',Ay=0x4ec*-0x1+-0x221+0x70e,Cy=0x32*0x6d+0x905*0x1+0x1e4d*-0x1,Py=-0x3f3+-0x1*0xdd3+0xb*0x19e,My=-0x5*-0x67e+-0x42c+-0x1c42,Dy=0xf1*0x3+0x11b+0x37*-0x12,Iy=0x32a+-0x1186+-0xc*-0x135,Ly=-0x3ab*0x4+0x2*-0x539+-0x2*-0xcaf,Ry=-0x20c3*0x1+-0x1503+0x3646*0x1,lT=-0x1d87*0x1+0x2041+-0x1*0x1bb,rl=0x2*-0xd22+-0x23*-0x7a+-0x1*-0x996,Oy=0x1290+-0x2*0xdab+-0x8c7*-0x1,su=-0x1bc4*-0x1+0xaf*0x17+-0x2b7b,Np='default',wn=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Uint16Array],No=[-0x1a*0x177+0x120e+0x17*0xdf,-0x8*0x70+-0x1cc2*0x1+0x3*0xac1,0x196b+0x3*0x617+-0x2bae,-0x262d+-0x1f*-0x11d+-0x2f*-0x14,-0x10bf+0x8fe+0x7c5,-0x21f9+0x14ef+0x687*0x2,-0x531*0x7+0x159c+-0x1*-0xebf,-0xadd+0x5ed+0x4f2],cT=['INT8','UINT8','INT16','UINT16','INT32','UINT32','FLOAT32','FLOAT16'],Sh=[Uint8Array,Uint16Array,Uint32Array],hT=[-0x4*0x56b+-0x2670+0x3c1d,0x24eb*-0x1+-0x2*-0xb2f+0xe8f,-0xc94+-0x227f+0x2f17*0x1],Fy=new Map([['float','f32'],['vec2','vec2f'],['vec3','vec3f'],['vec4','vec4f'],['int','i32'],['ivec2','vec2i'],['ivec3','vec3i'],['ivec4','vec4i'],['uint','u32'],['uvec2','vec2u'],['uvec3','vec3u'],['uvec4','vec4u']]),Le={};Le[Me]=0x1fde+0x8cf+-0x28ad,Le[gs]=-0x1*0x1d07+-0x1d3a+-0x3a42*-0x1,Le[gi]=0x6d5+-0x2d5*0x4+-0x1*-0x481,Le[us]=0x82e+0x43+-0x1a*0x53,Le[Wt]=-0xaac*-0x2+0xb52+0x571*-0x6,Le[is]=0x1c14+-0x1f6*0x2+0x25*-0xa7,Le[ba]=-0x296*-0x1+-0x260f+0x237f,Le[wl]=0xa67*0x1+-0x2*-0x67+-0xb2e,Le[El]=-0x1*-0x21d8+-0x2225+-0x55*-0x1,Le[bl]=-0x43*0x1+0x115*0x4+-0x408,Le[Al]=0x1172+-0xe93+-0x2d5,Le[Cl]=-0x10*-0x128+-0x22*0x4f+-0x7f7,Le[Pl]=-0x133f+0x1919+0x2e7*-0x2,Le[yi]=0x1*0x1bec+-0x2420+-0x1*-0x841,Le[Jf]=0x306*-0xa+0x2b8+-0xc*-0x24b,Le[uh]=0x1fcd+-0xfd5+-0xff7,Le[Ap]=-0x264d+0x1d23+-0x2*-0x496,Le[Cp]=-0x1744+-0x2*-0x1159+0x4f*-0x25,Le[Pp]=0x237+0x25a9*-0x1+0x2376,Le[Rx]=0x2465+0x57f*-0x2+-0x1962,Le[Ox]=0x2416+0x1f3*-0xf+0x1*-0x6d3,Le[Fx]=0xdaa+0x1b91+-0x2934,Le[Ko]=0x22e9+-0x11*-0x1a3+0xfad*-0x4,Le[Zo]=-0x108e+-0x1f*-0x126+-0x1303,Le[Nx]=0x16ca*-0x1+-0x1f*0x2d+-0x96d*-0x3,Le[Mp]=0x16bf+-0x1*0xd87+-0x1b*0x57,Le[Dp]=-0x98*0x28+-0x3*-0xbdd+-0xbcb*0x1,Le[ph]=0xe8d+-0x47c+-0x502*0x2,Le[Ip]=-0x997*-0x1+-0x44*0x3b+0x623,Le[Ln]=0x1398+-0x71d+0xf*-0xd4;const mr=class mr{static['clearGpuMa'+'rkers'](){mr['markers']['length']=0xa7*0x38+-0x236b+0x1*-0x11d;}static['pushGpuMar'+'ker'](_0x33837d,_0x1341fa){mr['markers']['push'](_0x1341fa),_0x33837d['pushMarker'](_0x1341fa);}static['popGpuMark'+'er'](_0x4237d2){mr['markers']['length']&&mr['markers']['pop'](),_0x4237d2['popMarker']();}static['toString'](){return mr['markers']['join']('\x20|\x20');}};h(mr,'markers',[]);let Q=mr,dT=0x1*-0x19c3+-0x311*-0x5+-0x1bd*-0x6;class Td{constructor(_0x4afe82,_0x21bdec){h(this,'slot',-(0x67*0x41+-0x21eb+0x7c5)),h(this,'scopeId',null),(this['name']=_0x4afe82,this['visibility']=_0x21bdec);}}class kp extends Td{}class fT extends Td{constructor(_0x2ed739,_0x2db22b,_0x4c1a6d=!(-0x73c+0x1a7*-0xb+0x1*0x196a)){super(_0x2ed739,_0x2db22b),h(this,'format',''),(this['readOnly']=_0x4c1a6d,w['assert'](_0x4c1a6d||!(_0x2db22b&Fp),'Storage\x20bu'+'ffer\x20can\x20o'+'nly\x20be\x20use'+'d\x20in\x20read-'+'only\x20mode\x20'+'in\x20SHADERS'+'TAGE_VERTE'+'X.'));}}class Gm extends Td{constructor(_0x4dd21f,_0x40440a,_0x1ebf34=xy,_0x86a715=zx,_0xeea7b2=!(-0xb2b+0x4a9+0x22*0x31),_0x1e32dc=null){super(_0x4dd21f,_0x40440a),this['textureDim'+'ension']=_0x1ebf34,this['sampleType']=_0x86a715,this['hasSampler']=_0xeea7b2,this['samplerNam'+'e']=_0x1e32dc??_0x4dd21f+'_sampler';}}class uT extends Td{constructor(_0xf734a9,_0x34210a=Ne,_0x3cf669=xy,_0x5ed1e2=!(0x21f3+-0x106b+-0x1188),_0x113258=!(0x12e3+0x14c3+-0xc7*0x33)){super(_0xf734a9,nT),this['format']=_0x34210a,this['textureDim'+'ension']=_0x3cf669,this['write']=_0x5ed1e2,this['read']=_0x113258;}}class Ny{constructor(_0x1e1080,_0x18622c){h(this,'uniformBuf'+'ferFormats',[]),h(this,'textureFor'+'mats',[]),h(this,'storageTex'+'tureFormat'+'s',[]),h(this,'storageBuf'+'ferFormats',[]),(this['id']=dT++,Ea['setName'](this,'BindGroupF'+'ormat_'+this['id']),w['assert'](_0x18622c));let _0x1c3013=-0x1e6b+0x25fe+0x1*-0x793;_0x18622c['forEach'](_0x45aca1=>{_0x45aca1['slot']=_0x1c3013++,_0x45aca1 instanceof Gm&&_0x45aca1['hasSampler']&&_0x1c3013++,_0x45aca1 instanceof kp?this['uniformBuf'+'ferFormats']['push'](_0x45aca1):_0x45aca1 instanceof Gm?this['textureFor'+'mats']['push'](_0x45aca1):_0x45aca1 instanceof uT?this['storageTex'+'tureFormat'+'s']['push'](_0x45aca1):_0x45aca1 instanceof fT?this['storageBuf'+'ferFormats']['push'](_0x45aca1):w['assert']('Invalid\x20bi'+'nd\x20format',_0x45aca1);}),this['device']=_0x1e1080;const _0x2663d2=_0x1e1080['scope'];this['bufferForm'+'atsMap']=new Map(),this['uniformBuf'+'ferFormats']['forEach']((_0x5e361f,_0x66c7ab)=>this['bufferForm'+'atsMap']['set'](_0x5e361f['name'],_0x66c7ab)),this['textureFor'+'matsMap']=new Map(),this['textureFor'+'mats']['forEach']((_0x1873a5,_0x240720)=>{this['textureFor'+'matsMap']['set'](_0x1873a5['name'],_0x240720),_0x1873a5['scopeId']=_0x2663d2['resolve'](_0x1873a5['name']);}),this['storageTex'+'tureFormat'+'sMap']=new Map(),this['storageTex'+'tureFormat'+'s']['forEach']((_0x4e41d7,_0x16b776)=>{this['storageTex'+'tureFormat'+'sMap']['set'](_0x4e41d7['name'],_0x16b776),_0x4e41d7['scopeId']=_0x2663d2['resolve'](_0x4e41d7['name']);}),this['storageBuf'+'ferFormats'+'Map']=new Map(),this['storageBuf'+'ferFormats']['forEach']((_0x293c9b,_0x2d18aa)=>{this['storageBuf'+'ferFormats'+'Map']['set'](_0x293c9b['name'],_0x2d18aa),_0x293c9b['scopeId']=_0x2663d2['resolve'](_0x293c9b['name']);}),this['impl']=_0x1e1080['createBind'+'GroupForma'+'tImpl'](this),w['trace'](K0,'Alloc:\x20Id\x20'+this['id']+(',\x20while\x20re'+'ndering\x20[')+Q['toString']()+']',this);}['destroy'](){this['impl']['destroy']();}['getTexture'](_0x1a4d7c){const _0x13d98e=this['textureFor'+'matsMap']['get'](_0x1a4d7c);return _0x13d98e!==void(0xd59+-0xee3+0x18a)?this['textureFor'+'mats'][_0x13d98e]:null;}['getStorage'+'Texture'](_0x4a9390){const _0x42b710=this['storageTex'+'tureFormat'+'sMap']['get'](_0x4a9390);return _0x42b710!==void(-0x20a7+0x7b5*-0x2+0x1*0x3011)?this['storageTex'+'tureFormat'+'s'][_0x42b710]:null;}['loseContex'+'t'](){}}class Kt{constructor(){h(this,'_cache',new Map());}['get'](_0xf64f1e,_0x23e05a){return this['_cache']['has'](_0xf64f1e)||(this['_cache']['set'](_0xf64f1e,_0x23e05a()),_0xf64f1e['on']('destroy',()=>{this['remove'](_0xf64f1e);}),_0xf64f1e['on']('devicelost',()=>{var _0x3724b2,_0x2d48ce;(_0x2d48ce=(_0x3724b2=this['_cache']['get'](_0xf64f1e))==null?void(-0x65*-0x47+0xdb*-0x1b+-0x4ea):_0x3724b2['loseContex'+'t'])==null||_0x2d48ce['call'](_0x3724b2,_0xf64f1e);})),this['_cache']['get'](_0xf64f1e);}['remove'](_0x2c47c3){var _0x189c29,_0xef2469;(_0xef2469=(_0x189c29=this['_cache']['get'](_0x2c47c3))==null?void(-0x26f8+0x1175+0x1583):_0x189c29['destroy'])==null||_0xef2469['call'](_0x189c29,_0x2c47c3),this['_cache']['delete'](_0x2c47c3);}}class Xi{static['calcLevelD'+'imension'](_0x1ef115,_0xfa6214){return Math['max'](_0x1ef115>>_0xfa6214,-0x54f+0x10e5+0x1*-0xb95);}static['calcMipLev'+'elsCount'](_0x47dc43,_0x10cc52,_0x3302f3=0x5a*0x1e+0x139*0xe+-0x1ba9){return 0xd62+-0x3cb*-0x5+-0x2058+Math['floor'](Math['log2'](Math['max'](_0x47dc43,_0x10cc52,_0x3302f3)));}static['calcLevelG'+'puSize'](_0x1df580,_0x161a19,_0x4ce719,_0x10357b){var _0x27412d;const _0x3ce0f6=Nt['get'](_0x10357b);w['assert'](_0x3ce0f6!==void(-0x3*-0x1ed+-0xc20*-0x2+-0x1e07),'Invalid\x20pi'+'xel\x20format'+'\x20'+_0x10357b);const _0x5ebf10=((_0x27412d=Nt['get'](_0x10357b))==null?void(0x43d*-0x1+0x16*-0x152+-0x1*-0x2149):_0x27412d['size'])??0x1c12+0x10*-0x1de+0x1ce;if(_0x5ebf10>0x1a05+-0x174b+-0x15d*0x2)return _0x1df580*_0x161a19*_0x4ce719*_0x5ebf10;const _0x5084aa=_0x3ce0f6['blockSize']??0x766*0x1+-0x2396+0x8*0x386;let _0xe804d8=Math['floor']((_0x1df580+(-0x1e01*-0x1+0x1*0x4f+-0x1e4d))/(0x3a*0x7a+-0xe4*-0x18+-0x3100));const _0x5f10f1=Math['floor']((_0x161a19+(0x2f4+0x43*0x43+0x2*-0xa3d))/(-0xf4a*0x2+-0xa4*0x2b+0x3a24)),_0x5f421d=Math['floor']((_0x4ce719+(-0x9*0xd+0x10cb+-0x7*0x255))/(0x1828+-0xc10+0x60a*-0x2));return(_0x10357b===xl||_0x10357b===Tl)&&(_0xe804d8=Math['max'](Math['floor'](_0xe804d8/(0xa*0x202+-0x1f88+-0x5bb*-0x2)),-0x264d+0x24*-0x8b+0x5*0xb92)),_0xe804d8*_0x5f10f1*_0x5f421d*_0x5084aa;}static['calcGpuSiz'+'e'](_0x1b2868,_0x1e31b3,_0xffeed3,_0x19beed,_0x15b73f,_0x3c164f){let _0x1e146e=0x11fd+0xbe4+-0x1de1*0x1;for(;_0x1e146e+=Xi['calcLevelG'+'puSize'](_0x1b2868,_0x1e31b3,_0xffeed3,_0x19beed),!(!_0x15b73f||_0x1b2868===-0x26dc+0x1762+-0x1*-0xf7b&&_0x1e31b3===0x11f8+0x18ad+0xaa9*-0x4&&_0xffeed3===-0x437+-0x304*0x3+0xd44);)_0x1b2868=Math['max'](_0x1b2868>>0x1f*0x2e+0x8a9*0x4+-0x2835,0x808*0x4+-0x97a+-0x155*0x11),_0x1e31b3=Math['max'](_0x1e31b3>>-0x5*-0x63f+0x265a+-0x4594,0x1*-0x7d3+0x72*0x45+-0x16e6),_0xffeed3=Math['max'](_0xffeed3>>-0x12c2+0x1*0x1821+0x2af*-0x2,-0x1*-0x1ca+0x2b*-0xcd+0x18e*0x15);return _0x1e146e*(_0x3c164f?0x262c+-0x3d7*-0x3+-0x31ab:0x2683*0x1+0x2*-0xceb+0x4*-0x32b);}}let pT=-0xf0d*0x2+0x1862+-0x4*-0x16e;class _e{constructor(_0x3ddd0f,_0x88346d={}){h(this,'name'),h(this,'_gpuSize',-0x1291+-0x1*-0x38c+-0x5*-0x301),h(this,'id',pT++),h(this,'_invalid',!(0x185f+0x12da+-0x3*0xe68)),h(this,'_lockedLev'+'el',-(0x471*0x1+0x54f+-0x9bf*0x1)),h(this,'_lockedMod'+'e',$l),h(this,'renderVers'+'ionDirty',0x978+-0x155b+0xbe3),h(this,'_storage',!(-0x24bb*0x1+-0x5a9*-0x2+0x196a)),h(this,'_numLevels',-0x56f+-0x4e9*-0x5+-0x131e),h(this,'_numLevels'+'Requested');var _0x2028fc;this['device']=_0x3ddd0f,w['assert'](this['device'],'Texture\x20co'+'nstructor\x20'+'requires\x20a'+'\x20graphicsD'+'evice\x20to\x20b'+'e\x20valid'),w['assert'](!_0x88346d['width']||Number['isInteger'](_0x88346d['width']),'Texture\x20wi'+'dth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0x88346d),w['assert'](!_0x88346d['height']||Number['isInteger'](_0x88346d['height']),'Texture\x20he'+'ight\x20must\x20'+'be\x20an\x20inte'+'ger\x20number'+',\x20got',_0x88346d),w['assert'](!_0x88346d['depth']||Number['isInteger'](_0x88346d['depth']),'Texture\x20de'+'pth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0x88346d),this['name']=_0x88346d['name']??'',this['_width']=Math['floor'](_0x88346d['width']??-0x1fc1+0x4df*-0x3+0x2e62),this['_height']=Math['floor'](_0x88346d['height']??0x3*-0x7eb+0xa5b*-0x1+0xd0*0x2a),this['_format']=_0x88346d['format']??Ne,this['_compresse'+'d']=Ix(this['_format']),this['_integerFo'+'rmat']=dn(this['_format']),this['_integerFo'+'rmat']&&(_0x88346d['minFilter']=Te,_0x88346d['magFilter']=Te),this['_volume']=_0x88346d['volume']??!(-0x3b*0xc+0x1f5d+-0x1c98),this['_depth']=Math['floor'](_0x88346d['depth']??-0x1fea+-0x1*-0x24d2+0x5*-0xfb),this['_arrayLeng'+'th']=Math['floor'](_0x88346d['arrayLengt'+'h']??0x4dc+-0x6e4+0x68*0x5),this['_storage']=_0x88346d['storage']??!(0xdcf+-0x7c8+-0x2*0x303),this['_cubemap']=_0x88346d['cubemap']??!(-0x6b*-0x9+0xd83+-0x1145),this['_flipY']=_0x88346d['flipY']??!(-0x22*0x3d+-0xa7*0x2c+0x9*0x417),this['_premultip'+'lyAlpha']=_0x88346d['premultipl'+'yAlpha']??!(-0x26e3+0x1389+0x135b),this['_mipmaps']=_0x88346d['mipmaps']??!(0x162f+0xc3d+-0x1*0x226c),this['_numLevels'+'Requested']=_0x88346d['numLevels'],_0x88346d['numLevels']!==void(0x2534+-0x1174+-0x13c0)&&(this['_numLevels']=_0x88346d['numLevels']),this['_updateNum'+'Level'](),this['_minFilter']=_0x88346d['minFilter']??ma,this['_magFilter']=_0x88346d['magFilter']??vt,this['_anisotrop'+'y']=_0x88346d['anisotropy']??0x2*0x4ba+0x58d+-0xf00,this['_addressU']=_0x88346d['addressU']??yt,this['_addressV']=_0x88346d['addressV']??yt,this['_addressW']=_0x88346d['addressW']??yt,this['_compareOn'+'Read']=_0x88346d['compareOnR'+'ead']??!(-0xbfa+-0x2a7+0xea2),this['_compareFu'+'nc']=_0x88346d['compareFun'+'c']??hh,this['_type']=_0x88346d['type']??Ds,w['assert'](!_0x88346d['hasOwnProp'+'erty']('rgbm'),'Use\x20option'+'s.type.'),w['assert'](!_0x88346d['hasOwnProp'+'erty']('swizzleGGG'+'R'),'Use\x20option'+'s.type.'),this['projection']=Vx,this['_cubemap']?this['projection']=tu:_0x88346d['projection']&&_0x88346d['projection']!==tu&&(this['projection']=_0x88346d['projection']),this['profilerHi'+'nt']=_0x88346d['profilerHi'+'nt']??0x1830+0x15b*0x3+0x1*-0x1c41,this['_levels']=_0x88346d['levels'];const _0x305aad=!!_0x88346d['levels'];this['_levels']||this['_clearLeve'+'ls'](),this['recreateIm'+'pl'](_0x305aad),_0x3ddd0f['textures']['push'](this),w['trace'](Dm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+'\x20['+((_0x2028fc=Nt['get'](this['format']))==null?void(-0x6c4+-0x61*-0x49+0x6f7*-0x3):_0x2028fc['name'])+']'+(this['cubemap']?'[Cubemap]':'')+(this['volume']?'[Volume]':'')+(this['array']?'[Array]':'')+('[MipLevels'+':')+this['numLevels']+']',this);}['destroy'](){w['trace'](Dm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x476e9a=this['device'];if(_0x476e9a){const _0x44514e=_0x476e9a['textures']['indexOf'](this);_0x44514e!==-(-0x6ad+0xf*-0x147+0x19d7)&&_0x476e9a['textures']['splice'](_0x44514e,0x1b31*0x1+0x7b7+-0x22e7),_0x476e9a['scope']['removeValu'+'e'](this),this['impl']['destroy'](_0x476e9a),this['adjustVram'+'SizeTracki'+'ng'](_0x476e9a['_vram'],-this['_gpuSize']),this['_levels']=null,this['device']=null;}}['recreateIm'+'pl'](_0xed257=!(-0x11a6+0x5f0+0xbb6)){var _0x462103;const {device:_0x2b7f36}=this;(_0x462103=this['impl'])==null||_0x462103['destroy'](_0x2b7f36),this['impl']=null,this['impl']=_0x2b7f36['createText'+'ureImpl'](this),this['dirtyAll'](),_0xed257&&this['upload']();}['_clearLeve'+'ls'](){this['_levels']=this['_cubemap']?[[null,null,null,null,null,null]]:[null];}['resize'](_0x3f1e1c,_0x1ffbf0,_0x1af7b6=-0x91e+-0x5a0+0x97*0x19){const _0x6aa1a2=this['device'];this['adjustVram'+'SizeTracki'+'ng'](_0x6aa1a2['_vram'],-this['_gpuSize']),this['impl']['destroy'](_0x6aa1a2),this['_clearLeve'+'ls'](),this['_width']=Math['floor'](_0x3f1e1c),this['_height']=Math['floor'](_0x1ffbf0),this['_depth']=Math['floor'](_0x1af7b6),this['_updateNum'+'Level'](),this['impl']=_0x6aa1a2['createText'+'ureImpl'](this),this['dirtyAll']();}['loseContex'+'t'](){this['impl']['loseContex'+'t'](),this['dirtyAll']();}['adjustVram'+'SizeTracki'+'ng'](_0x5d080e,_0x54a406){w['trace'](X0,this['id']+'\x20'+this['name']+'\x20size:\x20'+_0x54a406+('\x20vram.text'+'ure:\x20')+_0x5d080e['tex']+'\x20=>\x20'+(_0x5d080e['tex']+_0x54a406)),_0x5d080e['tex']+=_0x54a406,this['profilerHi'+'nt']===eu?_0x5d080e['texShadow']+=_0x54a406:this['profilerHi'+'nt']===Pr?_0x5d080e['texAsset']+=_0x54a406:this['profilerHi'+'nt']===vy&&(_0x5d080e['texLightma'+'p']+=_0x54a406);}['propertyCh'+'anged'](_0x48a2b3){this['impl']['propertyCh'+'anged'](_0x48a2b3),this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion'];}['_updateNum'+'Level'](){const _0x421aea=this['mipmaps']?Xi['calcMipLev'+'elsCount'](this['width'],this['height']):0x2*0x40+-0x892+0x813,_0x47e144=this['_numLevels'+'Requested'];_0x47e144!==void(0x1531+0x36c*-0x1+0x1*-0x11c5)&&_0x47e144>_0x421aea&&w['warn']('Texture#nu'+'mLevels:\x20r'+'equested\x20m'+'ip\x20level\x20c'+'ount\x20is\x20gr'+'eater\x20than'+'\x20the\x20maxim'+'um\x20possibl'+'e,\x20will\x20be'+'\x20clamped\x20t'+'o',_0x421aea,this),this['_numLevels']=Math['min'](_0x47e144??_0x421aea,_0x421aea),this['_mipmaps']=this['_numLevels']>0x1238+0x3*0xc9b+-0x3808;}get['lockedMode'](){return this['_lockedMod'+'e'];}set['minFilter'](_0x29f100){this['_minFilter']!==_0x29f100&&(dn(this['_format'])?w['warn']('Texture#mi'+'nFilter:\x20m'+'inFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_minFilter']=_0x29f100,this['propertyCh'+'anged'](Ay)));}get['minFilter'](){return this['_minFilter'];}set['magFilter'](_0x13cab5){this['_magFilter']!==_0x13cab5&&(dn(this['_format'])?w['warn']('Texture#ma'+'gFilter:\x20m'+'agFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_magFilter']=_0x13cab5,this['propertyCh'+'anged'](Cy)));}get['magFilter'](){return this['_magFilter'];}set['addressU'](_0x47e3e1){this['_addressU']!==_0x47e3e1&&(this['_addressU']=_0x47e3e1,this['propertyCh'+'anged'](Py));}get['addressU'](){return this['_addressU'];}set['addressV'](_0x3afa75){this['_addressV']!==_0x3afa75&&(this['_addressV']=_0x3afa75,this['propertyCh'+'anged'](My));}get['addressV'](){return this['_addressV'];}set['addressW'](_0x229f7c){if(!this['_volume']){w['warn']('pc.Texture'+'#addressW:'+'\x20Can\x27t\x20set'+'\x20W\x20address'+'ing\x20mode\x20f'+'or\x20a\x20non-3'+'D\x20texture.');return;}_0x229f7c!==this['_addressW']&&(this['_addressW']=_0x229f7c,this['propertyCh'+'anged'](Dy));}get['addressW'](){return this['_addressW'];}set['compareOnR'+'ead'](_0x16a246){this['_compareOn'+'Read']!==_0x16a246&&(this['_compareOn'+'Read']=_0x16a246,this['propertyCh'+'anged'](Iy));}get['compareOnR'+'ead'](){return this['_compareOn'+'Read'];}set['compareFun'+'c'](_0x241ec5){this['_compareFu'+'nc']!==_0x241ec5&&(this['_compareFu'+'nc']=_0x241ec5,this['propertyCh'+'anged'](Ly));}get['compareFun'+'c'](){return this['_compareFu'+'nc'];}set['anisotropy'](_0x494f0b){this['_anisotrop'+'y']!==_0x494f0b&&(this['_anisotrop'+'y']=_0x494f0b,this['propertyCh'+'anged'](Ry));}get['anisotropy'](){return this['_anisotrop'+'y'];}set['mipmaps'](_0x424c9e){this['_mipmaps']!==_0x424c9e&&(this['device']['isWebGPU']?w['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20is\x20curr'+'ently\x20not\x20'+'allowed\x20to'+'\x20be\x20change'+'d\x20on\x20WebGP'+'U,\x20create\x20'+'the\x20textur'+'e\x20appropri'+'ately.',this):dn(this['_format'])?w['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20cannot\x20'+'be\x20changed'+'\x20on\x20an\x20int'+'eger\x20textu'+'re,\x20will\x20r'+'emain\x20fals'+'e',this):this['_mipmaps']=_0x424c9e,_0x424c9e&&(this['_needsMipm'+'apsUpload']=!(0x80f+0x1*0x1253+-0x1*0x1a62)));}get['mipmaps'](){return this['_mipmaps'];}get['numLevels'](){return this['_numLevels'];}get['storage'](){return this['_storage'];}get['width'](){return this['_width'];}get['height'](){return this['_height'];}get['depth'](){return this['_depth'];}get['format'](){return this['_format'];}get['cubemap'](){return this['_cubemap'];}get['gpuSize'](){const _0x2c0cf9=this['pot']&&this['_mipmaps']&&!(this['_compresse'+'d']&&this['_levels']['length']===0xbb4*-0x1+0x1426+-0x871*0x1);return Xi['calcGpuSiz'+'e'](this['_width'],this['_height'],this['_depth'],this['_format'],_0x2c0cf9,this['_cubemap']);}get['array'](){return this['_arrayLeng'+'th']>0x260+0x4*0x377+-0x103c;}get['arrayLengt'+'h'](){return this['_arrayLeng'+'th'];}get['volume'](){return this['_volume'];}set['type'](_0x5de7ad){this['_type']!==_0x5de7ad&&(this['_type']=_0x5de7ad,this['device']['_shadersDi'+'rty']=!(0x180c+-0x11ea+-0x622));}get['type'](){return this['_type'];}set['srgb'](_0xb79146){var _0x23bdf9,_0x155207,_0x4904b6,_0x2060db;const _0xc85130=fh(this['format']);if(_0xb79146!==_0xc85130){if(_0xb79146){const _0x1d0e2c=ld(this['format']);this['_format']!==_0x1d0e2c&&(w['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20sRGB\x20'+'equivalent'+':\x20')+((_0x23bdf9=Nt['get'](this['format']))==null?void(-0x3*-0x6ae+0x13f*0x6+-0x1*0x1b84):_0x23bdf9['name'])+'\x20->\x20'+((_0x155207=Nt['get'](_0x1d0e2c))==null?void(0x4ed*-0x4+-0x2*-0x6+0x13a8):_0x155207['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x1d0e2c,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(0x1*0x15b5+-0x2476+0x1*0xec1));}else{const _0x5cbc30=Lx(this['format']);this['_format']!==_0x5cbc30&&(w['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20linea'+'r\x20equivale'+'nt:\x20')+((_0x4904b6=Nt['get'](this['format']))==null?void(-0xd8e*0x1+-0x1*-0xbfb+0x193):_0x4904b6['name'])+'\x20->\x20'+((_0x2060db=Nt['get'](_0x5cbc30))==null?void(-0x1*-0x2c7+0x2e*0x85+-0x1aad*0x1):_0x2060db['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x5cbc30,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(-0x2*0xeb9+-0xb21*0x2+-0xced*-0x4));}}}get['srgb'](){return fh(this['format']);}set['flipY'](_0x4cf894){this['_flipY']!==_0x4cf894&&(this['_flipY']=_0x4cf894,this['_needsUplo'+'ad']=!(-0x31*0x3+-0x6*0x242+0xf1*0xf));}get['flipY'](){return this['_flipY'];}set['premultipl'+'yAlpha'](_0x481c13){this['_premultip'+'lyAlpha']!==_0x481c13&&(this['_premultip'+'lyAlpha']=_0x481c13,this['_needsUplo'+'ad']=!(0xe2*0x17+0xa*-0x36d+0xdf4));}get['premultipl'+'yAlpha'](){return this['_premultip'+'lyAlpha'];}get['pot'](){return Y['powerOfTwo'](this['_width'])&&Y['powerOfTwo'](this['_height']);}get['encoding'](){switch(this['type']){case Zi:return'rgbm';case mh:return'rgbe';case Qo:return'rgbp';}return py(this['format'])?'srgb':'linear';}['dirtyAll'](){this['_levelsUpd'+'ated']=this['_cubemap']?[[!(0x3*-0xd3+0x39*0x8e+-0x1d25),!(-0x2*0x28+-0x1c3a+0x1c8a),!(0x1416*0x1+0x1*0x557+-0x196d),!(-0x1718+0x177d+-0x65),!(0x1956+0x1e8+0x16*-0x13d),!(-0xf6a+-0x2429+-0x1b*-0x1e9)]]:[!(-0x1b1a+0x117+0x1a03)],this['_needsUplo'+'ad']=!(-0x23d1+0x21a6*-0x1+0x1*0x4577),this['_needsMipm'+'apsUpload']=this['_mipmaps'],this['_mipmapsUp'+'loaded']=!(-0xed5*-0x2+0x2f7+0x48*-0x74),this['propertyCh'+'anged'](lT);}['lock'](_0x3cd953={}){_0x3cd953['level']??(_0x3cd953['level']=-0x2*0xb57+-0x53b*0x5+-0x1047*-0x3),_0x3cd953['face']??(_0x3cd953['face']=0x1266*-0x1+-0x113d+0x23a3),_0x3cd953['mode']??(_0x3cd953['mode']=Od),w['assert'](this['_lockedMod'+'e']===$l,'The\x20textur'+'e\x20is\x20alrea'+'dy\x20locked.'+'\x20Call\x20`tex'+'ture.unloc'+'k()`\x20befor'+'e\x20attempti'+'ng\x20to\x20lock'+'\x20again.',this),w['assert'](_0x3cd953['mode']===yy||_0x3cd953['mode']===Od,'Cannot\x20loc'+'k\x20a\x20textur'+'e\x20with\x20TEX'+'TURELOCK_N'+'ONE.\x20To\x20un'+'lock\x20a\x20tex'+'ture,\x20call'+'\x20`texture.'+'unlock()`.',this),this['_lockedMod'+'e']=_0x3cd953['mode'],this['_lockedLev'+'el']=_0x3cd953['level'];const _0x83c8d1=this['cubemap']?this['_levels'][_0x3cd953['face']]:this['_levels'];if((_0x83c8d1==null?void(-0x4*0x955+0x3ce*0x2+-0x1*-0x1db8):_0x83c8d1[_0x3cd953['level']])===null){const _0x10ee1a=Math['max'](0x22b0+-0x1070+-0x9*0x207,this['_width']>>_0x3cd953['level']),_0xbbb344=Math['max'](-0x3f4*0x4+-0x6*0x3ab+0x25d3,this['_height']>>_0x3cd953['level']),_0x6a4b35=Math['max'](0x29*0xe9+-0x2587+0x37,this['_depth']>>_0x3cd953['level']),_0x29958e=new ArrayBuffer(Xi['calcLevelG'+'puSize'](_0x10ee1a,_0xbbb344,_0x6a4b35,this['_format']));_0x83c8d1[_0x3cd953['level']]=new(my(this['_format']))(_0x29958e);}return _0x83c8d1==null?void(0x1a78+0x9ba+0x52*-0x71):_0x83c8d1[_0x3cd953['level']];}['setSource'](_0x5a41ab,_0x419f9e=0x1f11+-0x1c06+-0x30b){let _0x27b33b=!(-0x1752+0x2041+-0x8ee),_0x5a7d59,_0x3d5abc;if(this['_cubemap']){if(_0x5a41ab[0x1d00+0x47*-0xe+0x1*-0x191e]){_0x5a7d59=_0x5a41ab[0x1*-0x1f1f+-0x1873*-0x1+0x6ac]['width']||0x70*-0x3e+-0xb6*0x1+-0x1bd6*-0x1,_0x3d5abc=_0x5a41ab[0x2483+-0x2567+0xe4]['height']||0x2*-0x124+0x1*0x1f1e+-0xe6b*0x2;for(let _0x3c91ce=-0x1538+-0x1304+-0x141e*-0x2;_0x3c91ce<0xac+0x247+-0x2ed*0x1;_0x3c91ce++){const _0x14bc83=_0x5a41ab[_0x3c91ce];if(!_0x14bc83||_0x14bc83['width']!==_0x5a7d59||_0x14bc83['height']!==_0x3d5abc||!this['device']['_isBrowser'+'Interface'](_0x14bc83)){_0x27b33b=!(0x2624+0x1*0x15c5+-0x3be9);break;}}}else _0x27b33b=!(0x166+-0xf23+0xdbd);if(!_0x27b33b){for(let _0x3bfc4c=0x1*-0x1023+0x34c+0x13*0xad;_0x3bfc4c<0x1*-0x54f+0x1*-0xc63+0x11b8;_0x3bfc4c++)this['_levels'][_0x419f9e][_0x3bfc4c]!==_0x5a41ab[_0x3bfc4c]&&(this['_levelsUpd'+'ated'][_0x419f9e][_0x3bfc4c]=!(0xb85*0x1+0x3a*0x1+-0x1*0xbbf));}}else this['device']['_isBrowser'+'Interface'](_0x5a41ab)||(_0x27b33b=!(-0x14f5+0x16a+0x138b)),_0x27b33b||(_0x5a41ab!==this['_levels'][_0x419f9e]&&(this['_levelsUpd'+'ated'][_0x419f9e]=!(0x11f2+-0x2080+0xe8e)),_0x5a41ab instanceof HTMLVideoElement?(_0x5a7d59=_0x5a41ab['videoWidth'],_0x3d5abc=_0x5a41ab['videoHeigh'+'t']):(_0x5a7d59=_0x5a41ab['width'],_0x3d5abc=_0x5a41ab['height']));if(_0x27b33b){if(this['_width']=-0xc73+-0x1817+0x2*0x1247,this['_height']=-0x1e38*0x1+0x1232+0xc0a,this['_cubemap']){for(let _0x46dfc5=-0x323+0xd62+0xa3f*-0x1;_0x46dfc5<0xdb5+0x1*-0x1115+0x366;_0x46dfc5++)this['_levels'][_0x419f9e][_0x46dfc5]=null,this['_levelsUpd'+'ated'][_0x419f9e][_0x46dfc5]=!(0x51+0x8f*0x8+-0x4c9);}else this['_levels'][_0x419f9e]=null,this['_levelsUpd'+'ated'][_0x419f9e]=!(-0x89b*0x1+-0x38a+0xc25*0x1);}else _0x419f9e===-0x24dc+-0x1c5d+0x4139&&(this['_width']=_0x5a7d59,this['_height']=_0x3d5abc),this['_levels'][_0x419f9e]=_0x5a41ab;(this['_invalid']!==_0x27b33b||!_0x27b33b)&&(this['_invalid']=_0x27b33b,this['upload']());}['getSource'](_0xfe4a11=-0x1*0xca6+-0x1*0x2390+0x3036){return this['_levels'][_0xfe4a11];}['unlock'](){this['_lockedMod'+'e']===$l&&w['warn']('pc.Texture'+'#unlock:\x20A'+'ttempting\x20'+'to\x20unlock\x20'+'a\x20texture\x20'+'that\x20is\x20no'+'t\x20locked.',this),this['_lockedMod'+'e']===Od&&this['upload'](),this['_lockedLev'+'el']=-(-0x3f5+0x3+-0x151*-0x3),this['_lockedMod'+'e']=$l;}['upload'](){var _0x295345,_0x3b4536;this['_needsUplo'+'ad']=!(-0x2702+0x3d*0x94+-0x3be*-0x1),this['_needsMipm'+'apsUpload']=this['_mipmaps'],(_0x3b4536=(_0x295345=this['impl'])['uploadImme'+'diate'])==null||_0x3b4536['call'](_0x295345,this['device'],this);}['read'](_0x440bed,_0x23fa62,_0x5ead71,_0x53a183,_0xeace8e={}){var _0x1fe9e9,_0x341581;return(_0x341581=(_0x1fe9e9=this['impl'])['read'])==null?void(0xdf4+-0xdfc+0x8):_0x341581['call'](_0x1fe9e9,_0x440bed,_0x23fa62,_0x5ead71,_0x53a183,_0xeace8e);}['write'](_0x1bc6bd,_0x3ad2ef,_0x441f40,_0xd8dbe6,_0x546c9b){var _0x5d6fc5,_0x49a53c;return(_0x49a53c=(_0x5d6fc5=this['impl'])['write'])==null?void(-0x2090+-0x8*0x2d5+-0x4c*-0xba):_0x49a53c['call'](_0x5d6fc5,_0x1bc6bd,_0x3ad2ef,_0x441f40,_0xd8dbe6,_0x546c9b);}}const mT={'white':[-0x300*-0x8+0x14e5+-0x2be6,0x2*0x11b5+0x6*0x4e1+-0x1*0x3fb1,0xe*0x184+-0x2*0x81+-0x1*0x1337,0x1*-0x15a7+-0x1874+-0x2f1a*-0x1],'gray':[-0x1*-0xe06+0x77*0x25+-0x25d*0xd,0x72d*-0x1+-0x1*-0x43d+0x370,0x1*-0x242e+-0x13cc+0x387a,0x10*0x146+-0x35*0xa3+-0x3*-0x4ca],'black':[0x1a57+-0x255f*0x1+0x1*0xb08,-0x5ba*-0x3+0xec3*0x1+0x11*-0x1e1,-0x77e*0x4+0x270d+-0x915,-0x2*-0x1c5+0xa42+0x71*-0x1d],'normal':[0x1*-0x26b9+-0x25ab*0x1+-0x4a*-0x10a,-0x21ec+-0x237d+0x65b*0xb,0xf41+-0x6*-0x5c1+-0x38*0xdf,0x1713+0x1ef6+-0x350a],'pink':[-0x231*0xb+0x3b*-0x21+0x20b5,0x4*0x543+-0x2011+0xb85,-0x3*0xc81+-0x8*0x91+0x2b0a,-0x1*-0xc5f+-0x63e+0x2*-0x291]};class _T{constructor(){h(this,'map',new Map());}['destroy'](){this['map']['forEach'](_0x1412c0=>{_0x1412c0['destroy']();});}}const gT=new Kt(),fa=(_0x175983,_0x4b561b)=>{const _0x3ffd14=gT['get'](_0x175983,()=>new _T());if(!_0x3ffd14['map']['has'](_0x4b561b)){const _0x364641=new _e(_0x175983,{'name':'built-in-t'+'exture-'+_0x4b561b,'width':0x1,'height':0x1,'format':Ne}),_0x590781=_0x364641['lock'](),_0x152588=mT[_0x4b561b];w['assert'](_0x152588,'Data\x20for\x20b'+'uilt-in\x20te'+'xture\x20\x27'+_0x4b561b+('\x27\x20not\x20foun'+'d')),_0x590781['set'](_0x152588),_0x364641['unlock'](),_0x3ffd14['map']['set'](_0x4b561b,_0x364641);}return _0x3ffd14['map']['get'](_0x4b561b);};let ST=-0xcea+0x2117+-0x142d;class ky{constructor(){h(this,'bindGroup'),h(this,'offsets',[]);}}class Up{constructor(_0x385979,_0xafbc34,_0x57661d){h(this,'renderVers'+'ionUpdated',-(0x82+0x252a+0x25ab*-0x1)),h(this,'uniformBuf'+'fers'),h(this,'uniformBuf'+'ferOffsets',[]),(this['id']=ST++,this['device']=_0x385979,this['format']=_0xafbc34,this['dirty']=!(-0x2e9*0x2+0x1*0x2605+-0x2033*0x1),this['impl']=_0x385979['createBind'+'GroupImpl'](this),this['textures']=[],this['storageTex'+'tures']=[],this['storageBuf'+'fers']=[],this['uniformBuf'+'fers']=[],this['defaultUni'+'formBuffer']=_0x57661d,_0x57661d&&this['setUniform'+'Buffer'](Np,_0x57661d),w['trace'](Y0,'Alloc:\x20Id\x20'+this['id'],this,_0xafbc34));}['destroy'](){this['impl']['destroy'](),this['impl']=null,this['format']=null,this['defaultUni'+'formBuffer']=null;}['setUniform'+'Buffer'](_0x16ffa4,_0x2b55e2){const _0x64ad36=this['format']['bufferForm'+'atsMap']['get'](_0x16ffa4);w['assert'](_0x64ad36!==void(-0x2180+0xb9d*0x2+0xa46),'Setting\x20a\x20'+'uniform\x20['+_0x16ffa4+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['uniformBuf'+'fers'][_0x64ad36]!==_0x2b55e2&&(this['uniformBuf'+'fers'][_0x64ad36]=_0x2b55e2,this['dirty']=!(-0x13c4+-0x1*0x1a0f+0x1*0x2dd3));}['setStorage'+'Buffer'](_0x32d842,_0x5d2558){const _0x1d458a=this['format']['storageBuf'+'ferFormats'+'Map']['get'](_0x32d842);w['assert'](_0x1d458a!==void(-0x39*0xd+-0x28*0xcb+0x229d),'Setting\x20a\x20'+'storage\x20bu'+'ffer\x20['+_0x32d842+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageBuf'+'fers'][_0x1d458a]!==_0x5d2558&&(this['storageBuf'+'fers'][_0x1d458a]=_0x5d2558,this['dirty']=!(0x268b+0x4*-0x141+0xb2d*-0x3));}['setTexture'](_0x263b46,_0x200158){const _0x3ae3f0=this['format']['textureFor'+'matsMap']['get'](_0x263b46);w['assert'](_0x3ae3f0!==void(0x2280+-0x2*-0x4a3+-0x2bc6*0x1),'Setting\x20a\x20'+'texture\x20['+_0x263b46+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['textures'][_0x3ae3f0]!==_0x200158?(this['textures'][_0x3ae3f0]=_0x200158,this['dirty']=!(-0x97*0xb+-0x23e5+0x2a62)):this['renderVers'+'ionUpdated']<_0x200158['renderVers'+'ionDirty']&&(this['dirty']=!(-0x13d*0x3+0x1*0xef7+0x2d*-0x40));}['setStorage'+'Texture'](_0x3bd2e0,_0x4becbc){const _0x1ea041=this['format']['storageTex'+'tureFormat'+'sMap']['get'](_0x3bd2e0);w['assert'](_0x1ea041!==void(-0xfa*0xc+0x18a5+-0xced),'Setting\x20a\x20'+'storage\x20te'+'xture\x20['+_0x3bd2e0+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageTex'+'tures'][_0x1ea041]!==_0x4becbc?(this['storageTex'+'tures'][_0x1ea041]=_0x4becbc,this['dirty']=!(-0x1d6e+0x2*-0x3e+0xe*0x223)):this['renderVers'+'ionUpdated']<_0x4becbc['renderVers'+'ionDirty']&&(this['dirty']=!(0x2263+-0x1*-0x517+-0x277a));}['updateUnif'+'ormBuffers'](){for(let _0x595f8e=-0x1085*0x1+-0x1*0x1523+-0x12d4*-0x2;_0x595f8e<this['uniformBuf'+'fers']['length'];_0x595f8e++)this['uniformBuf'+'fers'][_0x595f8e]['update']();}['update'](){const {textureFormats:_0x47554b,storageTextureFormats:_0x191916,storageBufferFormats:_0x5e3519}=this['format'];for(let _0x959db4=0x7*0x25+-0x2*-0x90e+-0x131f;_0x959db4<_0x47554b['length'];_0x959db4++){const _0x370ae3=_0x47554b[_0x959db4];let _0xc89342=_0x370ae3['scopeId']['value'];_0xc89342||(_0x370ae3['name']==='uSceneDept'+'hMap'&&(w['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0xc89342=fa(this['device'],'white')),_0x370ae3['name']==='uSceneColo'+'rMap'&&(w['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0xc89342=fa(this['device'],'pink')),_0xc89342||(w['errorOnce']('Texture\x20'+_0x370ae3['name']+('\x20is\x20requir'+'ed\x20for\x20ren'+'dering\x20but'+'\x20was\x20not\x20s'+'et.\x20Render'+'ing\x20[')+Q['toString']()+']'),_0xc89342=fa(this['device'],'pink'))),this['setTexture'](_0x370ae3['name'],_0xc89342);}for(let _0x54af27=0x95a+0x117d*0x1+-0x1ad7;_0x54af27<_0x191916['length'];_0x54af27++){const _0x131956=_0x191916[_0x54af27],_0x4038e9=_0x131956['scopeId']['value'];w['assert'](_0x4038e9,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20texture\x20s'+'lot\x20['+_0x131956['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Texture'](_0x131956['name'],_0x4038e9);}for(let _0x2e5949=0x1c8*0xe+0x931+-0x2221;_0x2e5949<_0x5e3519['length'];_0x2e5949++){const _0x4bf264=_0x5e3519[_0x2e5949],_0x1a80ab=_0x4bf264['scopeId']['value'];w['assert'](_0x1a80ab,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20buffer\x20sl'+'ot\x20['+_0x4bf264['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Buffer'](_0x4bf264['name'],_0x1a80ab);}this['uniformBuf'+'ferOffsets']['length']=this['uniformBuf'+'fers']['length'];for(let _0x5dd62d=0x25c0+-0x2a6+-0x231a;_0x5dd62d<this['uniformBuf'+'fers']['length'];_0x5dd62d++){const _0xef2568=this['uniformBuf'+'fers'][_0x5dd62d];this['uniformBuf'+'ferOffsets'][_0x5dd62d]=_0xef2568['offset'],this['renderVers'+'ionUpdated']<_0xef2568['renderVers'+'ionDirty']&&(this['dirty']=!(-0x143f+-0x14dd+0x291c));}this['dirty']&&(this['dirty']=!(0x13ed+-0x615*0x2+-0x7c2),this['renderVers'+'ionUpdated']=this['device']['renderVers'+'ion'],this['impl']['update'](this));}}const qe={'set'(_0x3e4819,_0x200d0f,_0x1a268c,_0xe66176=-0x1*0xea6+0x1762+-0x5*0x1bf){return _0x3e4819&~(_0xe66176<<_0x1a268c)|_0x200d0f<<_0x1a268c;},'get'(_0x94f5b,_0x167c4a,_0x4e6bd9=-0x8*0x3b+0xe*-0x20d+0x1e8f*0x1){return _0x94f5b>>_0x167c4a&_0x4e6bd9;},'all'(_0x584de6,_0x173191,_0x869b93=-0x179*-0x9+-0x1*-0x71+-0xdb1){const _0x35a5aa=_0x869b93<<_0x173191;return(_0x584de6&_0x35a5aa)===_0x35a5aa;},'any'(_0x51570f,_0x7342d4,_0x24f51c=-0x3*0xc7f+-0x1988+0x3f06){return(_0x51570f&_0x24f51c<<_0x7342d4)!==-0x1*0x1959+-0x2ab+0x1c04;}},Xl=0x2551+-0x1*0x6c6+0x6*-0x516,ir=-0x5*0x144+-0x26e+-0x25*-0x3d,Hm=-0x670+0x5*0x2e+0x58a,Wm=0xf6f+0x1a91*-0x1+-0x1*-0xb25,$m=0xae7*-0x2+-0x975+0xa6e*0x3,Xm=-0x1*-0x1299+0x1*0x1a7b+-0x2d09,qm=-0x5*0x4d4+0x7bf+0x1073,jm=0x2582+-0xf7a+-0x15f6,iu=0x2149+-0x9fc+-0x1737,Ym=0x2b2*0x2+-0x1c4b*-0x1+0x14*-0x1ae,Km=0x54b+0x127*0x17+0x7ed*-0x4,Zm=0x15e3+0x4e*-0x5+-0x1444,Qm=-0x68f*0x5+-0x1*0x1434+0x3519,yT=-0x2478+0x196*0x2+0x215b,vT=iu,ri=class ri{constructor(_0x5722e0=!(0x2*0x50c+0x1399+-0x1db0),_0x45a807=fs,_0x783df7=Ft,_0x2bc262=rp,_0x43ec07,_0x1a4bca,_0x525acb,_0x1d24a4=!(-0xb56+0x10a6*0x1+-0x28*0x22),_0x29db7b=!(0x3*0x412+0x22e7+-0x2f1d),_0x48cd16=!(0x3*0x2b+0x689*0x5+0x212e*-0x1),_0x3213c6=!(-0x515*0x2+-0x15e0+-0x3*-0xaae)){h(this,'target0',0x116e*0x2+-0x1926+-0x9b6),(this['setColorBl'+'end'](_0x45a807,_0x783df7,_0x2bc262),this['setAlphaBl'+'end'](_0x43ec07??_0x45a807,_0x1a4bca??_0x783df7,_0x525acb??_0x2bc262),this['setColorWr'+'ite'](_0x1d24a4,_0x29db7b,_0x48cd16,_0x3213c6),this['blend']=_0x5722e0);}set['blend'](_0x223faa){this['target0']=qe['set'](this['target0'],_0x223faa?0x709*0x3+-0x1*-0x144d+-0x3*0xdcd:-0x2026+0xa3b+-0x1*-0x15eb,Qm);}get['blend'](){return qe['all'](this['target0'],Qm);}['setColorBl'+'end'](_0x54caf6,_0x362276,_0xa7c324){this['target0']=qe['set'](this['target0'],_0x54caf6,Hm,Xl),this['target0']=qe['set'](this['target0'],_0x362276,Wm,ir),this['target0']=qe['set'](this['target0'],_0xa7c324,$m,ir);}['setAlphaBl'+'end'](_0x53c3b7,_0x1fb62e,_0x28958e){this['target0']=qe['set'](this['target0'],_0x53c3b7,Xm,Xl),this['target0']=qe['set'](this['target0'],_0x1fb62e,qm,ir),this['target0']=qe['set'](this['target0'],_0x28958e,jm,ir);}['setColorWr'+'ite'](_0x21d16a,_0xf1d0a3,_0x1cb67c,_0x395c28){this['redWrite']=_0x21d16a,this['greenWrite']=_0xf1d0a3,this['blueWrite']=_0x1cb67c,this['alphaWrite']=_0x395c28;}get['colorOp'](){return qe['get'](this['target0'],Hm,Xl);}get['colorSrcFa'+'ctor'](){return qe['get'](this['target0'],Wm,ir);}get['colorDstFa'+'ctor'](){return qe['get'](this['target0'],$m,ir);}get['alphaOp'](){return qe['get'](this['target0'],Xm,Xl);}get['alphaSrcFa'+'ctor'](){return qe['get'](this['target0'],qm,ir);}get['alphaDstFa'+'ctor'](){return qe['get'](this['target0'],jm,ir);}set['redWrite'](_0x10830d){this['target0']=qe['set'](this['target0'],_0x10830d?-0x2315+0x12d+0x21e9*0x1:-0x1555*-0x1+0x1ab*-0x3+-0x1054,iu);}get['redWrite'](){return qe['all'](this['target0'],iu);}set['greenWrite'](_0x2fb245){this['target0']=qe['set'](this['target0'],_0x2fb245?-0x812+-0x1*0x26ad+0x2ec0:-0xe6d*-0x2+0x7e4+-0x24be*0x1,Ym);}get['greenWrite'](){return qe['all'](this['target0'],Ym);}set['blueWrite'](_0x58aaa9){this['target0']=qe['set'](this['target0'],_0x58aaa9?-0x93*0x40+0x1519+0x3*0x538:-0x1686+-0x60a+-0x1c9*-0x10,Km);}get['blueWrite'](){return qe['all'](this['target0'],Km);}set['alphaWrite'](_0x354eb7){this['target0']=qe['set'](this['target0'],_0x354eb7?-0x43*-0x58+-0x3bf+0x4*-0x4d2:0x2225*0x1+-0x24fd+0x2d8,Zm);}get['alphaWrite'](){return qe['all'](this['target0'],Zm);}get['allWrite'](){return qe['get'](this['target0'],vT,yT);}['copy'](_0x7eb4d6){return this['target0']=_0x7eb4d6['target0'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}get['key'](){return this['target0'];}['equals'](_0x1b03d2){return this['target0']===_0x1b03d2['target0'];}};h(ri,'NOBLEND',Object['freeze'](new ri())),h(ri,'NOWRITE',Object['freeze'](new ri(void(-0x379*0x9+0x834+-0x170d*-0x1),void(-0x3*-0x3d1+0x2*0x6bd+-0x18ed),void(0x12d3+-0x1*-0x19be+-0x2c91),void(-0x260d+-0x2465+0x4a72),void(0x1*-0x19da+-0x25cb+0x1537*0x3),void(0x137a+-0xf82+-0x3f8),void(-0x24b1+0x266e*0x1+-0x1bd),!(0x3*-0xae1+-0x1*-0x2655+-0x5b1),!(-0x1a30+-0x11d9+0x2c0a),!(0x495+-0xd37+-0x21*-0x43),!(0x259*0x7+0x6d6+-0x5d1*0x4)))),h(ri,'ALPHABLEND',Object['freeze'](new ri(!(0xa24+0x6*0x486+-0x1*0x2548),fs,jh,Yh))),h(ri,'ADDBLEND',Object['freeze'](new ri(!(-0x1*0x39f+-0x7ab*0x3+0x1aa0),fs,Ft,Ft)));let pt=ri;class Bp{constructor(){h(this,'map',new Map()),h(this,'id',-0xf*0x1e9+0x1a97+0x210);}['get'](_0x1129ad){let _0x37efe1=this['map']['get'](_0x1129ad);return _0x37efe1===void(-0xc46+-0x1f39+0x2b7f)&&(_0x37efe1=this['id']++,this['map']['set'](_0x1129ad,_0x37efe1)),_0x37efe1;}}const xT=new Bp(),Jm=-0xb9c+0x1ed*-0xe+0x2699,e_=0x1*-0x1d2f+-0xaf*0x15+0x2*0x15c5,t_=0x260*0x10+-0x13*0x10e+-0x1*0x11f3,_r=class _r{constructor(_0x11b78f=Wf,_0x689d20=!(-0x13e0+-0x2669+-0x2b*-0x15b)){h(this,'data',0x5b+0x232f+-0x11c5*0x2),h(this,'_depthBias',-0x37*-0x2b+-0x1114+-0x7d7*-0x1),h(this,'_depthBias'+'Slope',-0x27b+0x42*0x92+-0x2329),h(this,'key',0x1c68+-0xf0+-0x1b78),(this['func']=_0x11b78f,this['write']=_0x689d20);}set['test'](_0x58d35a){this['func']=_0x58d35a?Wf:Wi,this['updateKey']();}get['test'](){return this['func']!==Wi;}set['write'](_0x2209fe){this['data']=qe['set'](this['data'],_0x2209fe?0x5ef+-0x16*-0x7f+-0x2*0x86c:-0x1bb9*0x1+0x2121+-0x2b4*0x2,t_),this['updateKey']();}get['write'](){return qe['all'](this['data'],t_);}set['func'](_0x10146d){this['data']=qe['set'](this['data'],_0x10146d,e_,Jm),this['updateKey']();}get['func'](){return qe['get'](this['data'],e_,Jm);}set['depthBias'](_0x1a0685){this['_depthBias']=_0x1a0685,this['updateKey']();}get['depthBias'](){return this['_depthBias'];}set['depthBiasS'+'lope'](_0x584d67){this['_depthBias'+'Slope']=_0x584d67,this['updateKey']();}get['depthBiasS'+'lope'](){return this['_depthBias'+'Slope'];}['copy'](_0x77426f){return this['data']=_0x77426f['data'],this['_depthBias']=_0x77426f['_depthBias'],this['_depthBias'+'Slope']=_0x77426f['_depthBias'+'Slope'],this['key']=_0x77426f['key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['updateKey'](){const {data:_0x1a3143,_depthBias:_0x1c81f2,_depthBiasSlope:_0x4b087c}=this,_0x1658da=_0x1a3143+'-'+_0x1c81f2+'-'+_0x4b087c;this['key']=xT['get'](_0x1658da);}['equals'](_0x423326){return this['key']===_0x423326['key'];}};h(_r,'DEFAULT',Object['freeze'](new _r())),h(_r,'NODEPTH',Object['freeze'](new _r(Wi,!(0x20d9+0x1*-0xd60+-0x7*0x2c8)))),h(_r,'WRITEDEPTH',Object['freeze'](new _r(Wi,!(-0x8ad*0x1+0x17cf+0x12a*-0xd))));let Yt=_r;class Uy{constructor(){h(this,'globalId',0x24b3*-0x1+0x6f*0xf+-0xf19*-0x2),h(this,'revision',0x7*-0x515+-0x2404+0x4797);}['equals'](_0x14ff12){return this['globalId']===_0x14ff12['globalId']&&this['revision']===_0x14ff12['revision'];}['copy'](_0x26a72a){this['globalId']=_0x26a72a['globalId'],this['revision']=_0x26a72a['revision'];}['reset'](){this['globalId']=-0x2*0x695+0x204+0x593*0x2,this['revision']=-0x6ab+-0x24af*0x1+-0x2*-0x15ad;}}let s_=-0x2*-0xc66+-0x5a*-0x4f+-0x3492;class TT{constructor(){s_++,this['version']=new Uy(),this['version']['globalId']=s_;}['increment'](){this['version']['revision']++;}}class wT{constructor(_0x7a38bd){this['name']=_0x7a38bd,this['value']=null,this['versionObj'+'ect']=new TT();}['toJSON'](_0x4b3f05){}['setValue'](_0xc846af){this['value']=_0xc846af,this['versionObj'+'ect']['increment']();}['getValue'](){return this['value'];}}class ET{constructor(_0x56a132){this['name']=_0x56a132,this['variables']=new Map();}['resolve'](_0x2f1f5a){return this['variables']['has'](_0x2f1f5a)||this['variables']['set'](_0x2f1f5a,new wT(_0x2f1f5a)),this['variables']['get'](_0x2f1f5a);}['removeValu'+'e'](_0xb5b00a){for(const _0x436bfe in this['variables']){const _0x295e55=this['variables'][_0x436bfe];_0x295e55['value']===_0xb5b00a&&(_0x295e55['value']=null);}}}let bT=-0x20f5*0x1+-0x1*-0x1e39+0x2bc;class Is{constructor(_0x513470,_0xb6850a,_0x3ee1fd,_0x1a0721){h(this,'usage',ms),(w['assert'](arguments['length']<=0xf67*0x2+0x24bb+-0x5*0xd81&&(!_0x1a0721||typeof _0x1a0721=='object'),'incorrect\x20'+'arguments'),this['usage']=(_0x1a0721==null?void(-0x4d5*0x6+0xee*-0x29+0x431c):_0x1a0721['usage'])??ms,this['device']=_0x513470,this['format']=_0xb6850a,this['numVertice'+'s']=_0x3ee1fd,this['id']=bT++,this['impl']=_0x513470['createVert'+'exBufferIm'+'pl'](this,_0xb6850a,_0x1a0721),this['numBytes']=_0xb6850a['verticesBy'+'teSize']?_0xb6850a['verticesBy'+'teSize']:_0xb6850a['size']*_0x3ee1fd,this['adjustVram'+'SizeTracki'+'ng'](_0x513470['_vram'],this['numBytes']));const _0x3f64b6=_0x1a0721==null?void(0x1a82+-0x1531+0x551*-0x1):_0x1a0721['data'];_0x3f64b6?this['setData'](_0x3f64b6):this['storage']=new ArrayBuffer(this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x2f4c56=this['device'],_0x3fca97=_0x2f4c56['buffers']['indexOf'](this);_0x3fca97!==-(-0x18ee+-0xbe8+0x24d7)&&_0x2f4c56['buffers']['splice'](_0x3fca97,0x7f*-0x49+-0xf93+0x33cb),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x2f4c56),this['adjustVram'+'SizeTracki'+'ng'](_0x2f4c56['_vram'],-this['storage']['byteLength'])),this['storage']=null;}['adjustVram'+'SizeTracki'+'ng'](_0x20d3a9,_0x5c3100){w['trace'](q0,this['id']+'\x20size:\x20'+_0x5c3100+'\x20vram.vb:\x20'+_0x20d3a9['vb']+'\x20=>\x20'+(_0x20d3a9['vb']+_0x5c3100)),_0x20d3a9['vb']+=_0x5c3100;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getUsage'](){return this['usage'];}['getNumVert'+'ices'](){return this['numVertice'+'s'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x100616){return _0x100616['byteLength']!==this['numBytes']?(w['error']('VertexBuff'+'er:\x20wrong\x20'+'initial\x20da'+'ta\x20size:\x20e'+'xpected\x20'+this['numBytes']+',\x20got\x20'+_0x100616['byteLength']),!(0x1cc8+-0x1*-0x2214+0x3edb*-0x1)):(this['storage']=_0x100616,this['unlock'](),!(0x62f*-0x1+-0xf30+0x155f));}}function hi(_0x57af10){if(_0x57af10==null)return-0x103d+0x1230+0x1*-0x1f3;let _0x16860b=-0x21d0+0x103*-0x25+0x473f;for(let _0x516375=-0x10*-0x166+0x176f+0x2dcf*-0x1,_0x12c95e=_0x57af10['length'];_0x516375<_0x12c95e;_0x516375++)_0x16860b=(_0x16860b<<0x1216+-0x18cf*0x1+0x6be)-_0x16860b+_0x57af10['charCodeAt'](_0x516375),_0x16860b|=0x1cf*0x11+0x1*0x1be5+-0x3aa4;return _0x16860b;}function By(_0x4943b6){let _0x5b3196=-0x59548e7e+-0x78bc20da+0x1532d4d1d;for(let _0x31442a=-0x1*-0x1024+-0x2*-0xf53+-0x1*0x2eca;_0x31442a<_0x4943b6['length'];_0x31442a++)_0x5b3196^=_0x4943b6[_0x31442a],_0x5b3196*=-0x6bf015*-0x4+-0xb1f6af+0xa*0x38cb;return _0x5b3196>>>0xdb5+-0x37f*0xa+0x1541;}const AT=new Bp(),CT=[-0x1*-0x1879+-0x7e1*0x2+-0x8b5,-0x1*0x30f+0x1f1*0x1+0x122,-0x1*0x217+-0x1*-0x191+0x1*0x8e,-0x5*0x91+-0x5*-0x447+0x2e*-0x67,0x744+0x1*-0xb85+-0xd*-0x55],PT=new Kt();class kt{constructor(_0x489ce1,_0x547838,_0x2fb0d0){this['device']=_0x489ce1,this['_elements']=[],this['hasUv0']=!(0x12be+0x1cea+-0x2fa7),this['hasUv1']=!(0x1f9f+0x40a+-0x23a8),this['hasColor']=!(-0x1d11+-0x1*0x1e29+-0x1*-0x3b3b),this['hasTangent'+'s']=!(0x2406+0x138+-0x253d),this['verticesBy'+'teSize']=-0x1160+0x1c*-0xad+0x244c,this['vertexCoun'+'t']=_0x2fb0d0,this['interleave'+'d']=_0x2fb0d0===void(-0x302*0xb+0x26f0+-0x5da),this['instancing']=!(0xea6+-0xa9*-0x4+-0x1149),this['size']=_0x547838['reduce']((_0x2f4dd1,_0xcf25a2)=>_0x2f4dd1+Math['ceil'](_0xcf25a2['components']*No[_0xcf25a2['type']]/(0xd*-0x11d+0x732*0x1+0x74b))*(-0x1*0x383+-0x6f1*-0x1+0x2e*-0x13),-0x875+-0x221b+0x2a90);let _0x5a00c8=0x3*-0xc7+0x18*0x137+-0x1ad3,_0x1e4666;for(let _0x455f12=-0x909+-0x457*0x7+0x276a,_0x46ea53=_0x547838['length'];_0x455f12<_0x46ea53;_0x455f12++){const _0x254f7e=_0x547838[_0x455f12];_0x1e4666=_0x254f7e['components']*No[_0x254f7e['type']],w['assert'](kt['isElementV'+'alid'](_0x489ce1,_0x254f7e),'WebGPU\x20doe'+'s\x20not\x20supp'+'ort\x20the\x20fo'+'rmat\x20of\x20ve'+'rtex\x20eleme'+'nt\x20'+_0x254f7e['semantic']+'\x20:\x20'+cT[_0x254f7e['type']]+'\x20x\x20'+_0x254f7e['components']),_0x2fb0d0&&(_0x5a00c8=Y['roundUp'](_0x5a00c8,_0x1e4666),w['assert'](_0x1e4666%(0x125a+-0x183+0x1*-0x10d3)===0x46*-0xe+-0xd20+0x10f4,'Non-interl'+'eaved\x20vert'+'ex\x20format\x20'+'with\x20eleme'+'nt\x20size\x20no'+'t\x20multiple'+'\x20of\x204\x20can\x20'+'have\x20perfo'+'rmance\x20imp'+'act\x20on\x20som'+'e\x20platform'+'s.\x20Element'+'\x20size:\x20'+_0x1e4666));const _0xc70219=_0x254f7e['asInt']??!(0x945+-0x7*0x3e6+0x1206),_0x5dfffd=_0xc70219?!(-0x1c8f*0x1+0x21f2+0x1a*-0x35):_0x254f7e['normalize']??!(-0x23d6+-0x2*0x468+-0x7*-0x661),_0x5ab9c7={'name':_0x254f7e['semantic'],'offset':_0x2fb0d0?_0x5a00c8:_0x254f7e['hasOwnProp'+'erty']('offset')?_0x254f7e['offset']:_0x5a00c8,'stride':_0x2fb0d0?_0x1e4666:_0x254f7e['hasOwnProp'+'erty']('stride')?_0x254f7e['stride']:this['size'],'dataType':_0x254f7e['type'],'numComponents':_0x254f7e['components'],'normalize':_0x5dfffd,'size':_0x1e4666,'asInt':_0xc70219};this['_elements']['push'](_0x5ab9c7),_0x2fb0d0?_0x5a00c8+=_0x1e4666*_0x2fb0d0:_0x5a00c8+=Math['ceil'](_0x1e4666/(0x1ea4+-0xc11+0x1*-0x128f))*(0xb76+-0x1*-0x16eb+0x225d*-0x1),_0x254f7e['semantic']===is?this['hasUv0']=!(0x1*0x119b+-0x1101+-0x9a):_0x254f7e['semantic']===ba?this['hasUv1']=!(0x7*0x11c+-0x2*-0x858+-0x1874):_0x254f7e['semantic']===Wt?this['hasColor']=!(-0xa25+0x5f7*0x3+0x7c0*-0x1):_0x254f7e['semantic']===yi&&(this['hasTangent'+'s']=!(0x122d+0x20a+-0x1437));}_0x2fb0d0&&(this['verticesBy'+'teSize']=_0x5a00c8),this['_evaluateH'+'ash']();}get['elements'](){return this['_elements'];}static['getDefault'+'Instancing'+'Format'](_0x350f86){return PT['get'](_0x350f86,()=>new kt(_0x350f86,[{'semantic':Mp,'components':0x4,'type':Ve},{'semantic':Dp,'components':0x4,'type':Ve},{'semantic':Ip,'components':0x4,'type':Ve},{'semantic':Ln,'components':0x4,'type':Ve}]));}static['isElementV'+'alid'](_0x1a291e,_0x15cde0){const _0x5e1f66=_0x15cde0['components']*No[_0x15cde0['type']];return!(_0x1a291e['isWebGPU']&&!CT['includes'](_0x5e1f66));}['update'](){w['assert'](!this['device']['isWebGPU'],'VertexForm'+'at#update\x20'+'is\x20not\x20sup'+'ported\x20on\x20'+'WebGPU\x20and'+'\x20VertexFor'+'mat\x20cannot'+'\x20be\x20modifi'+'ed.'),this['_evaluateH'+'ash']();}['_evaluateH'+'ash'](){const _0x14bee3=[],_0x2d73b3=[],_0x5d8998=this['_elements']['length'];for(let _0x3a8cc6=-0x198+0x1a*0x21+-0x1c2;_0x3a8cc6<_0x5d8998;_0x3a8cc6++){const {name:_0x5efae8,dataType:_0x199ef3,numComponents:_0x1edc32,normalize:_0x3b7c7b,offset:_0x6f247a,stride:_0x2c248e,size:_0x1125da,asInt:_0x3cc336}=this['_elements'][_0x3a8cc6],_0x16fb99=_0x5efae8+_0x199ef3+_0x1edc32+_0x3b7c7b+_0x3cc336;_0x14bee3['push'](_0x16fb99);const _0x21243e=_0x16fb99+_0x6f247a+_0x2c248e+_0x1125da;_0x2d73b3['push'](_0x21243e);}_0x14bee3['sort']();const _0x3b25e2=_0x14bee3['join']();this['batchingHa'+'sh']=hi(_0x3b25e2),this['shaderProc'+'essingHash'+'String']=_0x3b25e2,this['renderingH'+'ashString']=_0x2d73b3['join']('_'),this['renderingH'+'ash']=AT['get'](this['renderingH'+'ashString']);}}const MT=new Bp(),zh=class zh{constructor(_0x10aa6e={}){h(this,'_func'),h(this,'_ref'),h(this,'_fail'),h(this,'_zfail'),h(this,'_zpass'),h(this,'_readMask'),h(this,'_writeMask'),h(this,'_dirty',!(-0x2*0x63f+0x1e3c+-0x11be)),h(this,'_key'),(this['_func']=_0x10aa6e['func']??Wi,this['_ref']=_0x10aa6e['ref']??0x1c1a+0x9c6+0x12f0*-0x2,this['_readMask']=_0x10aa6e['readMask']??-0x239+-0x1cb2+0x1fea,this['_writeMask']=_0x10aa6e['writeMask']??0x9*0x1b+0x2*-0xa1+0x2*0xa7,this['_fail']=_0x10aa6e['fail']??xn,this['_zfail']=_0x10aa6e['zfail']??xn,this['_zpass']=_0x10aa6e['zpass']??xn,this['_evalKey']());}set['func'](_0x39e03c){this['_func']=_0x39e03c,this['_dirty']=!(0x1d21+-0x26d2*-0x1+-0x43f3);}get['func'](){return this['_func'];}set['ref'](_0x5ca0e1){this['_ref']=_0x5ca0e1,this['_dirty']=!(0x1*-0x92d+0x1ab2+-0x1185);}get['ref'](){return this['_ref'];}set['fail'](_0x3724a5){this['_fail']=_0x3724a5,this['_dirty']=!(0xd61+-0x770+0x1*-0x5f1);}get['fail'](){return this['_fail'];}set['zfail'](_0x301194){this['_zfail']=_0x301194,this['_dirty']=!(0x13*0x143+0x1935+-0x9d6*0x5);}get['zfail'](){return this['_zfail'];}set['zpass'](_0x184d61){this['_zpass']=_0x184d61,this['_dirty']=!(0x11b*-0x2+0x1d03+-0x1acd);}get['zpass'](){return this['_zpass'];}set['readMask'](_0x2d2913){this['_readMask']=_0x2d2913,this['_dirty']=!(0x92d*0x1+0xa*-0x2f3+0x1451);}get['readMask'](){return this['_readMask'];}set['writeMask'](_0x17464f){this['_writeMask']=_0x17464f,this['_dirty']=!(0x24ff+-0x1ec3*-0x1+0x19d*-0x2a);}get['writeMask'](){return this['_writeMask'];}['_evalKey'](){const {_func:_0x538d95,_ref:_0x71708a,_fail:_0x3f6981,_zfail:_0x35d612,_zpass:_0x9e7a6d,_readMask:_0x133dbd,_writeMask:_0x3b4005}=this,_0x18efa0=_0x538d95+','+_0x71708a+','+_0x3f6981+','+_0x35d612+','+_0x9e7a6d+','+_0x133dbd+','+_0x3b4005;this['_key']=MT['get'](_0x18efa0),this['_dirty']=!(-0x1*0x1291+-0x15e3+0x2875);}get['key'](){return this['_dirty']&&this['_evalKey'](),this['_key'];}['copy'](_0x509d36){return this['_func']=_0x509d36['_func'],this['_ref']=_0x509d36['_ref'],this['_readMask']=_0x509d36['_readMask'],this['_writeMask']=_0x509d36['_writeMask'],this['_fail']=_0x509d36['_fail'],this['_zfail']=_0x509d36['_zfail'],this['_zpass']=_0x509d36['_zpass'],this['_dirty']=_0x509d36['_dirty'],this['_key']=_0x509d36['_key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}};h(zh,'DEFAULT',Object['freeze'](new zh()));let pi=zh;const ql=new Set(),Vh=class Vh extends me{constructor(_0x1ef339,_0x4d6f7b){var _0x5b9412,_0x47f25c,_0x2922cc,_0x34efc8,_0x16fae0,_0x35df8f;super(),h(this,'canvas'),h(this,'backBuffer',null),h(this,'backBuffer'+'Size',new J()),h(this,'backBuffer'+'Format'),h(this,'backBuffer'+'Antialias',!(0x8ae+-0x24f6+0x1c49)),h(this,'isWebGPU',!(-0x2123+-0x13c+0x2260)),h(this,'isWebGL2',!(-0x730+-0x1f8f+0x26c0)),h(this,'isHdr',!(-0xb9b+0x269*0x3+0x3b*0x13)),h(this,'scope'),h(this,'maxIndirec'+'tDrawCount',-0x1c21+0xd1a+0x1307*0x1),h(this,'maxAnisotr'+'opy'),h(this,'maxCubeMap'+'Size'),h(this,'maxTexture'+'Size'),h(this,'maxVolumeS'+'ize'),h(this,'maxColorAt'+'tachments',-0x57b+0x5*0x449+-0xff1),h(this,'precision'),h(this,'samples'),h(this,'maxSamples',0x106*-0x24+-0x2163+0x706*0xa),h(this,'supportsSt'+'encil'),h(this,'supportsCo'+'mpute',!(-0x19a7+0x1*-0x1369+-0x53*-0x8b)),h(this,'supportsSt'+'orageTextu'+'reRead',!(0x13*0x65+-0x1*-0x1f85+0xd01*-0x3)),h(this,'renderTarg'+'et',null),h(this,'shaders',[]),h(this,'textures',[]),h(this,'targets',new Set()),h(this,'renderVers'+'ion',-0x70*-0x3+0x146a*-0x1+0x131a),h(this,'renderPass'+'Index'),h(this,'insideRend'+'erPass',!(-0x3*-0xbc6+0x1*-0x1193+-0x11be)),h(this,'supportsUn'+'iformBuffe'+'rs',!(0x3*0xc4c+0x46*-0x7f+0x7*-0x4f)),h(this,'supportsCl'+'ipDistance'+'s',!(-0x1*-0x619+-0x7*0xc1+-0xb*0x13)),h(this,'textureFlo'+'atRenderab'+'le'),h(this,'textureHal'+'fFloatRend'+'erable'),h(this,'textureRG1'+'1B10Render'+'able',!(-0x1ed3+-0xe2*0x2b+0x44ca)),h(this,'textureFlo'+'atFilterab'+'le',!(0x17d*-0xd+0x1*-0xeb5+-0x220f*-0x1)),h(this,'quadVertex'+'Buffer'),h(this,'blendState',new pt()),h(this,'depthState',new Yt()),h(this,'stencilEna'+'bled',!(0x1*0x47f+0x389*0x9+0x37*-0xa9)),h(this,'stencilFro'+'nt',new pi()),h(this,'stencilBac'+'k',new pi()),h(this,'dynamicBuf'+'fers'),h(this,'gpuProfile'+'r'),h(this,'defaultCle'+'arOptions',{'color':[0x65a+-0x89b*-0x1+0x1*-0xef5,-0x331+-0xa*0x1d+0x453,0x1548+0x448*0x4+-0x99a*0x4,-0x87c*0x2+-0x1*0x2065+0x315e],'depth':0x1,'stencil':0x0,'flags':jo|Yo}),h(this,'clientRect',{'width':0x0,'height':0x0}),h(this,'_shadersDi'+'rty',!(-0x3cb*-0x3+0x2*0x1181+-0x1*0x2e62)),h(this,'capsDefine'+'s',new Map()),h(this,'mapsToClea'+'r',new Set()),(this['canvas']=_0x1ef339,'setAttribu'+'te'in _0x1ef339&&_0x1ef339['setAttribu'+'te']('data-engin'+'e','PlayCanvas'+'\x20'+hn),this['initOption'+'s']={..._0x4d6f7b},(_0x5b9412=this['initOption'+'s'])['alpha']??(_0x5b9412['alpha']=!(-0x21*-0x41+0x28d*-0xb+0x13ae)),(_0x47f25c=this['initOption'+'s'])['depth']??(_0x47f25c['depth']=!(-0xa54+-0xef*0x5+-0x15d*-0xb)),(_0x2922cc=this['initOption'+'s'])['stencil']??(_0x2922cc['stencil']=!(-0x185+0x353*0x2+0x1*-0x521)),(_0x34efc8=this['initOption'+'s'])['antialias']??(_0x34efc8['antialias']=!(0x2406+-0xd54+-0x16b2)),(_0x16fae0=this['initOption'+'s'])['powerPrefe'+'rence']??(_0x16fae0['powerPrefe'+'rence']='high-perfo'+'rmance'),(_0x35df8f=this['initOption'+'s'])['displayFor'+'mat']??(_0x35df8f['displayFor'+'mat']=oT),this['_maxPixelR'+'atio']=Ae['browser']?Math['min'](-0x1acc+-0x2157+0x3c24,window['devicePixe'+'lRatio']):0x19bc+-0x220*0x8+0x5*-0x1bf,this['buffers']=[],this['_vram']={'texShadow':0x0,'texAsset':0x0,'texLightmap':0x0,'tex':0x0,'vb':0x0,'ib':0x0,'ub':0x0,'sb':0x0},this['_shaderSta'+'ts']={'vsCompiled':0x0,'fsCompiled':0x0,'linked':0x0,'materialShaders':0x0,'compileTime':0x0},this['initialize'+'ContextCac'+'hes'](),this['_drawCalls'+'PerFrame']=0x1cb*-0xb+-0xc36+-0x147*-0x19,this['_shaderSwi'+'tchesPerFr'+'ame']=0xed4+0x2581+0x3455*-0x1,this['_primsPerF'+'rame']=[]);for(let _0x5c9313=cd;_0x5c9313<=oa;_0x5c9313++)this['_primsPerF'+'rame'][_0x5c9313]=0x466*0x4+-0x1f08+0xd70;this['_renderTar'+'getCreatio'+'nTime']=0x1743+-0x264e*0x1+0xf0b,this['scope']=new ET('Device'),this['textureBia'+'s']=this['scope']['resolve']('textureBia'+'s'),this['textureBia'+'s']['setValue'](-0x23e5+-0x26a7+-0xd*-0x5bc);}['postInit'](){const _0x486c65=new kt(this,[{'semantic':Me,'components':0x2,'type':Ve}]),_0x100d94=new Float32Array([-(-0x683*0x1+-0x1751+-0x1dd5*-0x1),-(-0x3*-0x5b3+0xd1*0xa+-0x1942),0x33+0x2639+-0x266b,-(0x1a40+-0xae4+-0xf5b),-(-0xdd+0x1957+0x4e5*-0x5),0xd32+0x124f+-0x1f80,-0x4d*-0x69+-0xe9d+-0x10f7,0x1b57*-0x1+0x2*-0x648+-0x8*-0x4fd]);this['quadVertex'+'Buffer']=new Is(this,_0x486c65,0x13a3+-0x31*-0xa9+-0x67f*0x8,{'data':_0x100d94});}['initCapsDe'+'fines'](){const {capsDefines:_0xc342e0}=this;_0xc342e0['clear'](),this['textureFlo'+'atFilterab'+'le']&&_0xc342e0['set']('CAPS_TEXTU'+'RE_FLOAT_F'+'ILTERABLE',''),this['textureFlo'+'atRenderab'+'le']&&_0xc342e0['set']('CAPS_TEXTU'+'RE_FLOAT_R'+'ENDERABLE','');}['destroy'](){var _0x136572,_0x113fbe,_0x549806;this['fire']('destroy'),(_0x136572=this['quadVertex'+'Buffer'])==null||_0x136572['destroy'](),this['quadVertex'+'Buffer']=null,(_0x113fbe=this['dynamicBuf'+'fers'])==null||_0x113fbe['destroy'](),this['dynamicBuf'+'fers']=null,(_0x549806=this['gpuProfile'+'r'])==null||_0x549806['destroy'](),this['gpuProfile'+'r']=null;}['onDestroyS'+'hader'](_0x5083a8){this['fire']('destroy:sh'+'ader',_0x5083a8);const _0x4870a5=this['shaders']['indexOf'](_0x5083a8);_0x4870a5!==-(0x2552+0x2604+-0x4b55)&&this['shaders']['splice'](_0x4870a5,-0x4*0x37f+-0x34b*-0x1+0xab2);}['postDestro'+'y'](){this['scope']=null,this['canvas']=null;}['loseContex'+'t'](){var _0x4423b8;this['contextLos'+'t']=!(-0x2646+0x52e+0x2118),this['backBuffer'+'Size']['set'](-(-0x5f9+0x1*0xaf1+-0x4f7),-(0x1797+-0x29e+0xb*-0x1e8));for(const _0x43574a of this['textures'])_0x43574a['loseContex'+'t']();for(const _0x47d323 of this['buffers'])_0x47d323['loseContex'+'t']();for(const _0x4d5587 of this['targets'])_0x4d5587['loseContex'+'t']();(_0x4423b8=this['gpuProfile'+'r'])==null||_0x4423b8['loseContex'+'t']();}['restoreCon'+'text'](){var _0x59fbef,_0x194ddd;this['contextLos'+'t']=!(0x6ff+-0x101*-0x18+0x17*-0x15a),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes']();for(const _0xc84860 of this['buffers'])_0xc84860['unlock']();(_0x194ddd=(_0x59fbef=this['gpuProfile'+'r'])==null?void(0x1*-0x1abf+-0x13e8+0x2ea7):_0x59fbef['restoreCon'+'text'])==null||_0x194ddd['call'](_0x59fbef);}['toJSON'](_0x16cbad){}['initialize'+'ContextCac'+'hes'](){this['vertexBuff'+'ers']=[],this['shader']=null,this['shaderVali'+'d']=void(0x2044+0x10da+-0x2*0x188f),this['shaderAsyn'+'cCompile']=!(-0x10c0+0xb68*-0x1+0x1c29),this['renderTarg'+'et']=null;}['initialize'+'RenderStat'+'e'](){this['blendState']=new pt(),this['depthState']=new Yt(),this['cullMode']=pa,this['vx']=this['vy']=this['vw']=this['vh']=0x523+0xd69*-0x1+0x846,this['sx']=this['sy']=this['sw']=this['sh']=0xb3*-0x1f+-0x47b*0x3+0x1*0x231e,this['blendColor']=new ie(0x133e+-0x27*-0xc7+0x318f*-0x1,0x17b7+-0x1da9*0x1+0x5f2,0x8*-0x2+-0x15ed+-0x15fd*-0x1,-0xab6+-0x10c*0x1d+0x2912);}['setStencil'+'State'](_0x1af25b,_0x55c697){w['assert'](!(0x341*0x4+0x2337+-0x303a));}['setBlendSt'+'ate'](_0x2c3d03){w['assert'](!(0x10ab*0x2+0x97e+0x13*-0x241));}['setBlendCo'+'lor'](_0x448da4,_0x5128e1,_0x14e80f,_0x39de34){w['assert'](!(-0xbe2+0x149a+-0x61*0x17));}['setDepthSt'+'ate'](_0x599c9c){w['assert'](!(0x103e+0x332+-0x136f));}['setCullMod'+'e'](_0x559a4a){w['assert'](!(-0x1bac+0x373*-0x7+-0x3*-0x1146));}['setRenderT'+'arget'](_0x85525b){this['renderTarg'+'et']=_0x85525b;}['setVertexB'+'uffer'](_0x24faaf){_0x24faaf&&this['vertexBuff'+'ers']['push'](_0x24faaf);}['clearVerte'+'xBuffer'](){this['vertexBuff'+'ers']['length']=-0x797*-0x1+-0x9be+-0x1d*-0x13;}['getIndirec'+'tDrawSlot'](){return 0x1881+-0x24a4+0xc23;}get['indirectDr'+'awBuffer'](){return null;}['getRenderT'+'arget'](){return this['renderTarg'+'et'];}['initRender'+'Target'](_0x3f037a){if(_0x3f037a['initialize'+'d'])return;const _0x2985a8=de();this['fire']('fbo:create',{'timestamp':_0x2985a8,'target':this}),_0x3f037a['init'](),this['targets']['add'](_0x3f037a),this['_renderTar'+'getCreatio'+'nTime']+=de()-_0x2985a8;}['draw'](_0x2f29e8,_0x2a634c,_0x9057c5,_0x1673b2,_0x8ee0b3=!(0x35*-0x65+0x943+-0xba6*-0x1),_0x38f3e0=!(-0x12c1*0x1+-0x1c03*-0x1+0x2*-0x4a1)){w['assert'](!(-0x1d*-0xbf+0x31*0x52+-0x2554));}['_isBrowser'+'Interface'](_0x165d5a){return this['_isImageBr'+'owserInter'+'face'](_0x165d5a)||this['_isImageCa'+'nvasInterf'+'ace'](_0x165d5a)||this['_isImageVi'+'deoInterfa'+'ce'](_0x165d5a);}['_isImageBr'+'owserInter'+'face'](_0x430e1e){return typeof ImageBitmap<'u'&&_0x430e1e instanceof ImageBitmap||typeof HTMLImageElement<'u'&&_0x430e1e instanceof HTMLImageElement;}['_isImageCa'+'nvasInterf'+'ace'](_0x3f57c2){return typeof HTMLCanvasElement<'u'&&_0x3f57c2 instanceof HTMLCanvasElement;}['_isImageVi'+'deoInterfa'+'ce'](_0x233cb0){return typeof HTMLVideoElement<'u'&&_0x233cb0 instanceof HTMLVideoElement;}['resizeCanv'+'as'](_0x4ded99,_0x5253be){const _0x41e34e=Math['min'](this['_maxPixelR'+'atio'],Ae['browser']?window['devicePixe'+'lRatio']:0x6*0x4bb+-0xe6c+0x1*-0xdf5),_0x1e2cf1=Math['floor'](_0x4ded99*_0x41e34e),_0x263c17=Math['floor'](_0x5253be*_0x41e34e);(_0x1e2cf1!==this['canvas']['width']||_0x263c17!==this['canvas']['height'])&&this['setResolut'+'ion'](_0x1e2cf1,_0x263c17);}['setResolut'+'ion'](_0x87f0e,_0x27afc1){this['canvas']['width']=_0x87f0e,this['canvas']['height']=_0x27afc1,this['fire'](Vh['EVENT_RESI'+'ZE'],_0x87f0e,_0x27afc1);}['update'](){this['updateClie'+'ntRect']();}['updateClie'+'ntRect'](){if(Ae['worker'])this['clientRect']['width']=this['canvas']['width'],this['clientRect']['height']=this['canvas']['height'];else{const _0xac52d8=this['canvas']['getBoundin'+'gClientRec'+'t']();this['clientRect']['width']=_0xac52d8['width'],this['clientRect']['height']=_0xac52d8['height'];}}get['width'](){return this['canvas']['width'];}get['height'](){return this['canvas']['height'];}set['fullscreen'](_0x1ac40d){w['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.');}get['fullscreen'](){return w['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.'),!(-0x208*0x2+-0x1*0x12ad+0x16be);}set['maxPixelRa'+'tio'](_0x74f7be){this['_maxPixelR'+'atio']=_0x74f7be;}get['maxPixelRa'+'tio'](){return this['_maxPixelR'+'atio'];}get['deviceType'](){return this['_deviceTyp'+'e'];}['startRende'+'rPass'](_0x3a8a2a){}['endRenderP'+'ass'](_0xe06ecb){}['startCompu'+'tePass'](_0x39c004){}['endCompute'+'Pass'](){}['frameStart'](){this['renderPass'+'Index']=-0x280+-0x1*0x2501+0x3*0xd2b,this['renderVers'+'ion']++,w['call'](()=>{if(mi['get'](Z0)){const _0x1dc1e8=this['textures']['slice']();_0x1dc1e8['sort']((_0x424a20,_0x533395)=>_0x533395['gpuSize']-_0x424a20['gpuSize']),w['log']('Textures:\x20'+_0x1dc1e8['length']);let _0x346404=-0x1aaf+-0x103*0x2+0x1cb5*0x1;_0x1dc1e8['forEach']((_0x2fa706,_0x4963fc)=>{const _0x188291=_0x2fa706['gpuSize'];_0x346404+=_0x188291,w['log'](_0x4963fc+'.\x20'+_0x2fa706['name']+'\x20'+_0x2fa706['width']+'x'+_0x2fa706['height']+'\x20VRAM:\x20'+(_0x188291/(-0x1*0x1079+0x1*-0x9bb+-0x4*-0x78d)/(0x1*-0x1273+0x26e1+0x1*-0x106e))['toFixed'](0x1692+-0x30f*-0x7+-0x2bf9)+'\x20MB');}),w['log']('Total:\x20'+(_0x346404/(-0x1d3d*0x1+-0x595+0x1*0x26d2)/(0x246+-0xe0e*-0x1+-0xc54))['toFixed'](0xddd+0xe13*-0x1+0x38)+'MB');}});}['frameEnd'](){this['mapsToClea'+'r']['forEach'](_0x501df4=>_0x501df4['clear']()),this['mapsToClea'+'r']['clear']();}['computeDis'+'patch'](_0x16b044,_0x3085bf='Unnamed'){}['getRendera'+'bleHdrForm'+'at'](_0x4718bb=[In,nt,Xt],_0x2fb0a1=!(0x1106+0x13d6+-0x24dc*0x1),_0x2d9884=0x14de+-0x21fa+-0x3*-0x45f){for(let _0x15c4bf=0x14e4+-0x3a3+-0x1141;_0x15c4bf<_0x4718bb['length'];_0x15c4bf++){const _0x5772ac=_0x4718bb[_0x15c4bf];switch(_0x5772ac){case In:{if(this['textureRG1'+'1B10Render'+'able'])return _0x5772ac;break;}case nt:if(this['textureHal'+'fFloatRend'+'erable'])return _0x5772ac;break;case Xt:if(this['isWebGPU']&&_0x2d9884>0x224f+0xadf+-0x2d2d)continue;if(this['textureFlo'+'atRenderab'+'le']&&(!_0x2fb0a1||this['textureFlo'+'atFilterab'+'le']))return _0x5772ac;break;}}}['validateAt'+'tributes'](_0x4774dc,_0x297a56,_0x585812){w['call'](()=>{ql['clear'](),_0x297a56==null||_0x297a56['elements']['forEach'](_0x1cb55a=>ql['add'](Le[_0x1cb55a['name']])),_0x585812==null||_0x585812['elements']['forEach'](_0x2f4bad=>ql['add'](Le[_0x2f4bad['name']]));for(const [_0x2a1c88,_0x58c03f]of _0x4774dc['attributes'])ql['has'](_0x2a1c88)||w['errorOnce']('Vertex\x20att'+'ribute\x20['+_0x58c03f+(']\x20at\x20locat'+'ion\x20')+_0x2a1c88+('\x20required\x20'+'by\x20the\x20sha'+'der\x20is\x20not'+'\x20present\x20i'+'n\x20the\x20curr'+'ently\x20assi'+'gned\x20verte'+'x\x20buffers,'+'\x20while\x20ren'+'dering\x20[')+Q['toString']()+']',{'shader':_0x4774dc,'vb0Format':_0x297a56,'vb1Format':_0x585812});});}};h(Vh,'EVENT_RESI'+'ZE','resizecanv'+'as');let $e=Vh,DT=0x21d+-0x602+0x3e5;class gt{constructor(_0x29b15b={}){h(this,'name'),h(this,'_device'),h(this,'_colorBuff'+'er'),h(this,'_colorBuff'+'ers'),h(this,'_depthBuff'+'er'),h(this,'_depth'),h(this,'_stencil'),h(this,'_samples'),h(this,'autoResolv'+'e'),h(this,'_face'),h(this,'_mipLevel'),h(this,'_mipmaps'),h(this,'flipY');var _0x3850bf,_0x4b7254,_0x4509c7,_0x4d9ea8,_0x2a70b8,_0x11e9cb;w['assert'](!(_0x29b15b instanceof $e),'pc.RenderT'+'arget\x20cons'+'tructor\x20no'+'\x20longer\x20ac'+'cepts\x20Grap'+'hicsDevice'+'\x20parameter'+'.'),this['id']=DT++;const _0x404fd1=((_0x3850bf=_0x29b15b['colorBuffe'+'r'])==null?void(-0x1*0x1115+-0x11b2+0x22c7):_0x3850bf['device'])??((_0x4b7254=_0x29b15b['colorBuffe'+'rs'])==null?void(-0x1*-0xd19+-0x1*0x9eb+-0x32e):_0x4b7254[-0x219f+-0xa5*-0x20+-0x1*-0xcff]['device'])??((_0x4509c7=_0x29b15b['depthBuffe'+'r'])==null?void(-0xebc+-0x1118+0x1fd4):_0x4509c7['device'])??_0x29b15b['graphicsDe'+'vice'];w['assert'](_0x404fd1,'Failed\x20to\x20'+'obtain\x20the'+'\x20device,\x20c'+'olorBuffer'+'\x20nor\x20depth'+'Buffer\x20sto'+'re\x20it.'),this['_device']=_0x404fd1;const {maxSamples:_0x411579}=this['_device'];if(this['_samples']=Math['min'](_0x29b15b['samples']??0x1f*0x135+0x10*-0x197+0xbfa*-0x1,_0x411579),_0x404fd1['isWebGPU']&&(this['_samples']=this['_samples']>-0x5b5*0x3+0x27*0xe5+-0x11c3?_0x411579:-0x265*0xd+0x1*0xad+0x1e75),this['_colorBuff'+'er']=_0x29b15b['colorBuffe'+'r'],_0x29b15b['colorBuffe'+'r']&&(this['_colorBuff'+'ers']=[_0x29b15b['colorBuffe'+'r']]),this['_depthBuff'+'er']=_0x29b15b['depthBuffe'+'r'],this['_face']=_0x29b15b['face']??-0x2*-0x3cb+-0x1ff7+-0x1*-0x1861,this['_depthBuff'+'er']){const _0x3c57e8=this['_depthBuff'+'er']['_format'];_0x3c57e8===$i||_0x3c57e8===vn?(this['_depth']=!(-0xfb6+0xe9a+0x11c),this['_stencil']=!(-0x595*-0x1+0x7*-0x43f+-0x1*-0x1825)):_0x3c57e8===sd?(this['_depth']=!(0x6*-0x461+0x1158+0x8ee),this['_stencil']=!(0x2*0xe4+0x2d7*-0x8+0x430*0x5)):_0x3c57e8===Ji&&this['_depthBuff'+'er']['device']['isWebGPU']&&this['_samples']>-0xb2e+0x1*-0x98e+0x14bd?(this['_depth']=!(-0x2*-0xf2c+0x1*-0x2477+-0x61f*-0x1),this['_stencil']=!(0x5*-0xc0+-0xd8+0x499)):(w['warn']('Incorrect\x20'+'depthBuffe'+'r\x20format.\x20'+'Must\x20be\x20pc'+'.PIXELFORM'+'AT_DEPTH\x20o'+'r\x20pc.PIXEL'+'FORMAT_DEP'+'THSTENCIL'),this['_depth']=!(-0x352+-0xdf5+-0x4f*-0x38),this['_stencil']=!(-0x1*0x25ee+0x1e67*0x1+0x788*0x1));}else this['_depth']=_0x29b15b['depth']??!(0x1397+-0x4f5+-0xea2),this['_stencil']=_0x29b15b['stencil']??!(-0x25*0xdb+-0xd*-0x2b4+-0x1*0x37c);_0x29b15b['colorBuffe'+'rs']&&(w['assert'](!this['_colorBuff'+'ers'],'When\x20const'+'ructing\x20Re'+'nderTarget'+'\x20and\x20optio'+'ns.colorBu'+'ffers\x20is\x20u'+'sed,\x20optio'+'ns.colorBu'+'ffer\x20must\x20'+'not\x20be\x20use'+'d.'),this['_colorBuff'+'ers']||(this['_colorBuff'+'ers']=[..._0x29b15b['colorBuffe'+'rs']],this['_colorBuff'+'er']=_0x29b15b['colorBuffe'+'rs'][0xcb3+0x4*0x10d+-0x10e7*0x1])),this['autoResolv'+'e']=_0x29b15b['autoResolv'+'e']??!(-0x10b*-0x2+-0xa25+-0x1*-0x80f),this['name']=_0x29b15b['name'],this['name']||(this['name']=(_0x4d9ea8=this['_colorBuff'+'er'])==null?void(-0x91*-0x38+-0x7*-0x194+-0x2ac4):_0x4d9ea8['name']),this['name']||(this['name']=(_0x2a70b8=this['_depthBuff'+'er'])==null?void(-0x7b*0x35+0x1907*0x1+0x70):_0x2a70b8['name']),this['name']||(this['name']='Untitled'),this['flipY']=_0x29b15b['flipY']??!(0x69f*-0x3+0x89a+0xb44),this['_mipLevel']=_0x29b15b['mipLevel']??-0x11af+0xdb4+0x3fb*0x1,this['_mipLevel']>0x1a9b*-0x1+0x33*-0x3a+0x2629*0x1&&this['_depth']&&(w['error']('Rendering\x20'+'to\x20a\x20mipLe'+'vel\x20is\x20not'+'\x20supported'+'\x20when\x20rend'+'er\x20target\x20'+'uses\x20a\x20dep'+'th\x20buffer.'+'\x20Ignoring\x20'+'mipLevel\x20'+this['_mipLevel']+('\x20for\x20rende'+'r\x20target\x20')+this['name'],{'renderTarget':this,'options':_0x29b15b}),this['_mipLevel']=0x121f*0x2+-0xbfa+0xc22*-0x2),this['_mipmaps']=_0x29b15b['mipLevel']===void(-0xb*-0x59+-0x2110+0x1d3d),this['validateMr'+'t'](),this['impl']=_0x404fd1['createRend'+'erTargetIm'+'pl'](this),w['trace'](Mm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+('\x20[samples:'+'\x20')+this['samples']+']'+((_0x11e9cb=this['_colorBuff'+'ers'])!=null&&_0x11e9cb['length']?'[MRT:\x20'+this['_colorBuff'+'ers']['length']+']':'')+(this['colorBuffe'+'r']?'[Color]':'')+(this['depth']?'[Depth]':'')+(this['stencil']?'[Stencil]':'')+'[Face:'+this['face']+']');}['destroy'](){w['trace'](Mm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x29509d=this['_device'];_0x29509d&&(_0x29509d['targets']['delete'](this),_0x29509d['renderTarg'+'et']===this&&_0x29509d['setRenderT'+'arget'](null),this['destroyFra'+'meBuffers']());}['destroyFra'+'meBuffers'](){const _0x5d9c70=this['_device'];_0x5d9c70&&this['impl']['destroy'](_0x5d9c70);}['destroyTex'+'tureBuffer'+'s'](){var _0x3f80a5,_0x2621ed;(_0x3f80a5=this['_depthBuff'+'er'])==null||_0x3f80a5['destroy'](),this['_depthBuff'+'er']=null,(_0x2621ed=this['_colorBuff'+'ers'])==null||_0x2621ed['forEach'](_0x326ec8=>{_0x326ec8['destroy']();}),this['_colorBuff'+'ers']=null,this['_colorBuff'+'er']=null;}['resize'](_0x3b0775,_0x56cc82){var _0x35bcf4,_0x1a00d2;if(this['width']!==_0x3b0775||this['height']!==_0x56cc82){if(this['mipLevel']>0x2d6*0x8+0x14cf*-0x1+-0x1e1*0x1){w['warn']('Only\x20a\x20ren'+'der\x20target'+'\x20rendering'+'\x20to\x20mipLev'+'el\x200\x20can\x20b'+'e\x20resized,'+'\x20ignoring.',this);return;}const _0x3d590f=this['_device'];this['destroyFra'+'meBuffers'](),_0x3d590f['renderTarg'+'et']===this&&_0x3d590f['setRenderT'+'arget'](null),(_0x35bcf4=this['_depthBuff'+'er'])==null||_0x35bcf4['resize'](_0x3b0775,_0x56cc82),(_0x1a00d2=this['_colorBuff'+'ers'])==null||_0x1a00d2['forEach'](_0x3a86cb=>{_0x3a86cb['resize'](_0x3b0775,_0x56cc82);}),this['validateMr'+'t'](),this['impl']=_0x3d590f['createRend'+'erTargetIm'+'pl'](this);}}['validateMr'+'t'](){w['call'](()=>{if(this['_colorBuff'+'ers']){const {width:_0x7160c4,height:_0x25496e,cubemap:_0xbb1c49,volume:_0x4bc95f}=this['_colorBuff'+'ers'][-0x11a1+-0xd*0x2+-0x3*-0x5e9];for(let _0x584587=-0x1b5*-0x3+0x5af+-0x1*0xacd;_0x584587<this['_colorBuff'+'ers']['length'];_0x584587++){const _0x48ce58=this['_colorBuff'+'ers'][_0x584587];w['assert'](_0x48ce58['width']===_0x7160c4,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20width',this),w['assert'](_0x48ce58['height']===_0x25496e,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20height',this),w['assert'](_0x48ce58['cubemap']===_0xbb1c49,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20cubemap\x20s'+'etting',this),w['assert'](_0x48ce58['volume']===_0x4bc95f,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20volume\x20se'+'tting',this);}}});}['init'](){this['impl']['init'](this['_device'],this);}get['initialize'+'d'](){return this['impl']['initialize'+'d'];}get['device'](){return this['_device'];}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['resolve'](_0x4d0651=!(-0x2f*0x8b+0x13a*-0x1f+0x3f8b),_0x1c6166=!!this['_depthBuff'+'er']){this['_device']&&this['_samples']>-0x11*-0x7d+-0x1*0x1d5f+0x1513&&(Q['pushGpuMar'+'ker'](this['_device'],'RESOLVE-RT'+':'+this['name']+':'+(_0x4d0651?'[color]':'')+':'+(_0x1c6166?'[depth]':'')),this['impl']['resolve'](this['_device'],this,_0x4d0651,_0x1c6166),Q['popGpuMark'+'er'](this['_device']));}['copy'](_0x160a50,_0x3cf119,_0x4620d5){if(!this['_device']){if(_0x160a50['_device'])this['_device']=_0x160a50['_device'];else return w['error']('Render\x20tar'+'gets\x20are\x20n'+'ot\x20initial'+'ized'),!(0x1147+-0x1250*0x2+0x135a);}Q['pushGpuMar'+'ker'](this['_device'],'COPY-RT:'+_0x160a50['name']+'->'+this['name']);const _0x21873f=this['_device']['copyRender'+'Target'](_0x160a50,this,_0x3cf119,_0x4620d5);return Q['popGpuMark'+'er'](this['_device']),_0x21873f;}get['samples'](){return this['_samples'];}get['depth'](){return this['_depth'];}get['stencil'](){return this['_stencil'];}get['colorBuffe'+'r'](){return this['_colorBuff'+'er'];}['getColorBu'+'ffer'](_0x35d371){var _0x4aabbc;return(_0x4aabbc=this['_colorBuff'+'ers'])==null?void(-0x14f*0x16+-0x1ae5+0x37af):_0x4aabbc[_0x35d371];}get['depthBuffe'+'r'](){return this['_depthBuff'+'er'];}get['face'](){return this['_face'];}get['mipLevel'](){return this['_mipLevel'];}get['mipmaps'](){return this['_mipmaps'];}get['width'](){var _0x450e8b,_0x4a17e5;let _0x98139f=((_0x450e8b=this['_colorBuff'+'er'])==null?void(0x43c+-0x1868+-0x142c*-0x1):_0x450e8b['width'])||((_0x4a17e5=this['_depthBuff'+'er'])==null?void(0x1*-0x1997+0x1ec5+-0x52e):_0x4a17e5['width'])||this['_device']['width'];return this['_mipLevel']>0x1*-0x21dd+0x1*-0xc23+0x2e00&&(_0x98139f=Xi['calcLevelD'+'imension'](_0x98139f,this['_mipLevel'])),_0x98139f;}get['height'](){var _0x581aa6,_0x282bbb;let _0x744d81=((_0x581aa6=this['_colorBuff'+'er'])==null?void(-0x4f*-0x25+-0x18*-0xd+-0x287*0x5):_0x581aa6['height'])||((_0x282bbb=this['_depthBuff'+'er'])==null?void(0x2*0x801+-0x1f85*0x1+-0x13*-0xd1):_0x282bbb['height'])||this['_device']['height'];return this['_mipLevel']>-0x49*0x77+-0x5e1+0x34*0xc4&&(_0x744d81=Xi['calcLevelD'+'imension'](_0x744d81,this['_mipLevel'])),_0x744d81;}['isColorBuf'+'ferSrgb'](_0x59749e=-0x2000+-0x653*0x1+0x2653*0x1){if(this['device']['backBuffer']===this)return fh(this['device']['backBuffer'+'Format']);const _0x1dfd0b=this['getColorBu'+'ffer'](_0x59749e);return _0x1dfd0b?fh(_0x1dfd0b['format']):!(-0x1cd0+0xde+0x1bf3);}}const IT={'equals'(_0x272547,_0x20db6b){if(_0x272547['length']!==_0x20db6b['length'])return!(-0x12f7+0xaaa+0x1*0x84e);for(let _0xcb7332=-0x1b1c+0x1*-0x26ab+-0x15ed*-0x3;_0xcb7332<_0x272547['length'];_0xcb7332++)if(_0x272547[_0xcb7332]!==_0x20db6b[_0xcb7332])return!(0xf26*0x2+0x43*-0x9+-0x1bf0);return!(-0x1bfb+-0x5c2+0x21bd);}};class wd{constructor(){h(this,'_refCount',0x8bd+0xb*0x37a+-0x2efb);}['incRefCoun'+'t'](){this['_refCount']++;}['decRefCoun'+'t'](){this['_refCount']--;}get['refCount'](){return this['_refCount'];}}class LT extends wd{constructor(_0x810f26){super(),h(this,'object'),(this['object']=_0x810f26,this['incRefCoun'+'t']());}}class RT{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach'](_0xde2ca7=>{var _0xb6708c;(_0xb6708c=_0xde2ca7['object'])==null||_0xb6708c['destroy']();}),this['cache']['clear']();}['clear'](){this['cache']['clear']();}['get'](_0x4d7a33){const _0x3839ac=this['cache']['get'](_0x4d7a33);return _0x3839ac?(_0x3839ac['incRefCoun'+'t'](),_0x3839ac['object']):null;}['set'](_0x4afb25,_0x4bed46){w['assert'](!this['cache']['has'](_0x4afb25),'RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'put\x20object'+'\x20with\x20key\x20'+'that\x20alrea'+'dy\x20exists\x20'+'in\x20the\x20cac'+'he',{'key':_0x4afb25,'object':_0x4bed46}),this['cache']['set'](_0x4afb25,new LT(_0x4bed46));}['release'](_0xa41c3a){var _0x5d2a21;const _0x4d66be=this['cache']['get'](_0xa41c3a);_0x4d66be?(_0x4d66be['decRefCoun'+'t'](),_0x4d66be['refCount']===-0x12e*-0x7+0xbf1*-0x1+0x1*0x3af&&(this['cache']['delete'](_0xa41c3a),(_0x5d2a21=_0x4d66be['object'])==null||_0x5d2a21['destroy']())):w['warn']('RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'release\x20ob'+'ject\x20that\x20'+'is\x20not\x20in\x20'+'the\x20cache',{'key':_0xa41c3a});}}class OT extends RT{['loseContex'+'t'](_0x264991){this['clear']();}}const FT=new Kt(),Fd=_0x37d0e2=>FT['get'](_0x37d0e2,()=>new OT()),At=[];At[Xs]=-0x1343*-0x1+0x1a39+-0x3*0xf29,At[ga]=0x1e89+-0x562*-0x2+-0x1*0x294b,At[ds]=0x1dd6+0x144c+-0x27*0x149,At[Rn]=0x1*0x1ac4+-0x2a+-0x1a96,At[_a]=-0x1705+0xb08*-0x3+0x381e,At[ca]=-0x31*0x6d+0x5f*-0x59+0x35e6,At[ha]=0x2*0x7e9+0x1*0x5c9+-0x4*0x566,At[da]=0xa*-0xf0+-0x1*0x79f+0x1103,At[Tn]=0x208e+0x1*0xbc5+0x1f*-0x16e,At[tl]=0x1cee+-0x64a+-0x16a2,At[sl]=0x34*0x9e+-0xe39+-0x2*0x8ee,At[il]=0x25b2+0x81b+-0x2dc9,At[_h]=0x1a15+0x1*0xe7d+-0x288a*0x1,At[On]=-0x2ab*0x9+-0x319+0x1b28,At[li]=0xd*0x1c4+-0x6*-0x2fa+0x2*-0x1460,At[Fn]=-0x1ea9+0x74*-0x2+0x1f92,At[Nn]=-0x14a1+-0x16db+0x2b7e,At[kn]=-0x10c7+-0x192d+0x1*0x29f7,At[Un]=0x13b7+-0x120b+-0x1a8;class dt{constructor(_0x4eb9ab,_0x471309,_0xca3fc0=0xadf*0x3+0x12e3+0x40*-0xce){h(this,'name'),h(this,'type'),h(this,'byteSize'),h(this,'offset'),h(this,'scopeId'),h(this,'count'),h(this,'numCompone'+'nts');if(this['shortName']=_0x4eb9ab,this['name']=_0xca3fc0?_0x4eb9ab+'[0]':_0x4eb9ab,this['type']=_0x471309,this['numCompone'+'nts']=At[_0x471309],w['assert'](this['numCompone'+'nts'],'Unhandled\x20'+'uniform\x20fo'+'rmat\x20'+_0x471309+'\x20used\x20for\x20'+_0x4eb9ab),this['updateType']=_0x471309,_0xca3fc0>-0xefc+-0x2630+0x352c)switch(_0x471309){case Xs:this['updateType']=ud;break;case _a:this['updateType']=Bn;break;case Fn:this['updateType']=_d;break;case Tn:this['updateType']=gd;break;case ga:this['updateType']=pd;break;case ca:this['updateType']=zn;break;case Nn:this['updateType']=Sd;break;case tl:this['updateType']=yd;break;case ds:this['updateType']=md;break;case ha:this['updateType']=Vn;break;case kn:this['updateType']=vd;break;case sl:this['updateType']=xd;break;case Rn:this['updateType']=Lp;break;case da:this['updateType']=gh;break;case Un:this['updateType']=Rp;break;case il:this['updateType']=Op;break;case li:this['updateType']=wy;break;default:w['error']('Uniform\x20ar'+'ray\x20of\x20typ'+'e\x20'+Ey[_0x471309]+('\x20is\x20not\x20su'+'pported\x20wh'+'en\x20process'+'ing\x20unifor'+'m\x20\x27')+_0x4eb9ab+'\x27.'),w['call'](()=>{this['invalid']=!(-0x6d8+-0x12*0x10+-0x14*-0x66);});break;}this['count']=_0xca3fc0,w['assert'](!isNaN(_0xca3fc0),'Unsupporte'+'d\x20uniform:'+'\x20'+_0x4eb9ab+'['+_0xca3fc0+']'),w['call'](()=>{isNaN(_0xca3fc0)&&(this['invalid']=!(0x18fe+-0x3d6+-0x8*0x2a5));});let _0x74c706=this['numCompone'+'nts'];_0xca3fc0&&(_0x74c706=Y['roundUp'](_0x74c706,0x1*-0x226b+-0x63d+0x28ac)),this['byteSize']=_0x74c706*(0xbfd+0x1*-0x1dcd+0x11d4),_0xca3fc0&&(this['byteSize']*=_0xca3fc0),w['assert'](this['byteSize'],'Unknown\x20by'+'te\x20size\x20fo'+'r\x20uniform\x20'+'format\x20'+_0x471309+'\x20used\x20for\x20'+_0x4eb9ab);}get['isArrayTyp'+'e'](){return this['count']>-0x205e*0x1+-0xa77+0x5*0x891;}['calculateO'+'ffset'](_0x161dd7){let _0x1ac6c8=this['byteSize']<=-0x1209+-0x1b*-0xf1+-0x75a?this['byteSize']:-0x1f*-0xf5+-0x1*0x2653+0x8b8;this['count']&&(_0x1ac6c8=-0x1486+0x10*0x15b+-0x11a),_0x161dd7=Y['roundUp'](_0x161dd7,_0x1ac6c8),this['offset']=_0x161dd7/(-0x1f+0x22fa+-0x22d7);}}class zy{constructor(_0x2c2599,_0x5c7ce6){h(this,'byteSize',-0x1af5+0x3*-0x1ac+0x1ff9),h(this,'map',new Map()),(this['scope']=_0x2c2599['scope'],this['uniforms']=_0x5c7ce6);let _0x2a1812=0xdab+0x271*0x5+-0x19e0;for(let _0x153503=-0x9*-0x2bf+-0x16d5+-0x1e2;_0x153503<_0x5c7ce6['length'];_0x153503++){const _0x2170d4=_0x5c7ce6[_0x153503];_0x2170d4['calculateO'+'ffset'](_0x2a1812),_0x2a1812=_0x2170d4['offset']*(0x1a13+-0x133+0x18dc*-0x1)+_0x2170d4['byteSize'],_0x2170d4['scopeId']=this['scope']['resolve'](_0x2170d4['name']),this['map']['set'](_0x2170d4['name'],_0x2170d4);}this['byteSize']=Y['roundUp'](_0x2a1812,-0x58*-0x16+0x1440+-0x1bc0);}['get'](_0x4ae380){return this['map']['get'](_0x4ae380);}}const Lr='Preprocess'+'or',Fs=/[ \t]*#(ifn?def|if|endif|else|elif|define|undef|extension|include)/g,Nd=/define[ \t]+([^\n]+)\r?(?:\n|$)/g,i_=/extension[ \t]+([\w-]+)[ \t]*:[ \t]*(enable|require)/g,kd=/undef[ \t]+([^\n]+)\r?(?:\n|$)/g,Ud=/(ifdef|ifndef|if)[ \t]*([^\r\n]+)\r?\n/g,Bd=/(endif|else|elif)(?:[ \t]+([^\r\n]*))?\r?\n?/g,r_=/\{?[\w-]+\}?/,NT=/(!|\s)?defined\(([\w-]+)\)/,kT=/!?defined\s*\([^)]*\)/g,UT=/!?defined\s*$/,BT=/([a-z_]\w*)\s*(==|!=|<|<=|>|>=)\s*([\w"']+)/i,zT=/[+\-]/g,zd=/include[ \t]+"([\w-]+)(?:\s*,\s*([\w-]+))?"/g,VT=/\{i\}/g,a_=/(pcFragColor[1-8])\b/g,Lt=class Lt{static['run'](_0x35cc1a,_0x566389=new Map(),_0x5ee5c8={}){Lt['sourceName']=_0x5ee5c8['sourceName'],_0x35cc1a=this['stripComme'+'nts'](_0x35cc1a),_0x35cc1a=_0x35cc1a['split'](/\r?\n/)['map'](_0x17e003=>_0x17e003['trimEnd']())['join']('\x0a');const _0x427de7=new Map(),_0x5c83ca=new Map();if(_0x35cc1a=this['_preproces'+'s'](_0x35cc1a,_0x427de7,_0x5c83ca,_0x566389,_0x5ee5c8['stripDefin'+'es']),_0x35cc1a===null)return null;const _0x425226=new Map();return _0x427de7['forEach']((_0x30f4cb,_0x25d541)=>{Number['isInteger'](parseFloat(_0x30f4cb))&&!_0x30f4cb['includes']('.')&&_0x425226['set'](_0x25d541,_0x30f4cb);}),_0x35cc1a=this['stripComme'+'nts'](_0x35cc1a),_0x35cc1a=this['stripUnuse'+'dColorAtta'+'chments'](_0x35cc1a,_0x5ee5c8),_0x35cc1a=this['RemoveEmpt'+'yLines'](_0x35cc1a),_0x35cc1a=this['processArr'+'aySize'](_0x35cc1a,_0x425226),_0x35cc1a=this['injectDefi'+'nes'](_0x35cc1a,_0x5c83ca),_0x35cc1a;}static['stripUnuse'+'dColorAtta'+'chments'](_0x386d47,_0x109c9a){if(_0x109c9a['stripUnuse'+'dColorAtta'+'chments']){const _0xe8b69c=new Map(),_0x4b9543=_0x386d47['match'](a_);if(_0x4b9543==null||_0x4b9543['forEach'](_0xe90fc8=>{const _0x14faf3=parseInt(_0xe90fc8['charAt'](_0xe90fc8['length']-(-0x1*0xee1+-0x1286*0x1+0x2168)),0x1f12+-0x1c8c+-0x27c);_0xe8b69c['set'](_0x14faf3,(_0xe8b69c['get'](_0x14faf3)??0x9ad+0x2486+-0x1*0x2e33)+(0x2411+0x1083+-0x3493));}),Array['from'](_0xe8b69c['values']())['some'](_0x1ad74c=>_0x1ad74c===-0x52+-0x11c6+0x1219*0x1)){const _0x49125e=_0x386d47['split']('\x0a'),_0x3c0ed8=[];for(let _0x378770=-0x1b01+0xbf0*-0x2+0x32e1;_0x378770<_0x49125e['length'];_0x378770++){const _0x209a40=_0x49125e[_0x378770]['match'](a_);if(_0x209a40){const _0x26e14a=parseInt(_0x209a40[-0x1*-0x251+0x167*-0x3+0x1e4]['charAt'](_0x209a40[0x2bd*-0x1+0x16*0x31+0xd*-0x1d]['length']-(-0xa7*-0x1d+-0x3*-0xf6+-0x15cc)),0x1405+0x2029*-0x1+0x2*0x617);if(_0x26e14a>-0x1ac2+0x1c99*-0x1+0x375b&&_0xe8b69c['get'](_0x26e14a)===0x1e75+-0x371+-0x1b03)continue;}_0x3c0ed8['push'](_0x49125e[_0x378770]);}_0x386d47=_0x3c0ed8['join']('\x0a');}}return _0x386d47;}static['stripComme'+'nts'](_0x5169f1){return _0x5169f1['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1');}static['processArr'+'aySize'](_0x35536e,_0x5929bf){return _0x35536e!==null&&_0x5929bf['forEach']((_0x3d28d0,_0x37779d)=>{_0x35536e=_0x35536e['replace'](new RegExp('\x5c['+_0x37779d+'\x5c]','g'),'['+_0x3d28d0+']');}),_0x35536e;}static['injectDefi'+'nes'](_0x277f1a,_0x1e845c){if(_0x277f1a!==null&&_0x1e845c['size']>0x1*-0x158f+0x1*-0x58d+0x4*0x6c7){const _0x416778=_0x277f1a['split']('\x0a');_0x1e845c['forEach']((_0x39e90c,_0x4c9559)=>{const _0x552226=new RegExp(_0x4c9559,'g');for(let _0x31eccf=0x518+0x1913*-0x1+-0x9b*-0x21;_0x31eccf<_0x416778['length'];_0x31eccf++)_0x416778[_0x31eccf]['includes']('#')||(_0x416778[_0x31eccf]=_0x416778[_0x31eccf]['replace'](_0x552226,_0x39e90c));}),_0x277f1a=_0x416778['join']('\x0a');}return _0x277f1a;}static['RemoveEmpt'+'yLines'](_0x1e3e29){return _0x1e3e29!==null&&(_0x1e3e29=_0x1e3e29['split'](/\r?\n/)['map'](_0x398965=>_0x398965['trim']()===''?'':_0x398965)['join']('\x0a'),_0x1e3e29=_0x1e3e29['replace'](/(\n\n){3,}/g,'\x0a\x0a')),_0x1e3e29;}static['_preproces'+'s'](_0x39591d,_0x58144b=new Map(),_0x25801e,_0x3aa8ae,_0x4e6a64){var _0x1708c7;const _0xd67f56=_0x39591d,_0x20d493=[];let _0xac04da=!(0x17f5+-0x15b*0x13+0x1cd*0x1),_0x53da7e;for(;(_0x53da7e=Fs['exec'](_0x39591d))!==null&&!_0xac04da;){const _0x3a0fd1=_0x53da7e[0x1b*0x85+0x207a+-0x5d0*0x8];switch(_0x3a0fd1){case'define':{Nd['lastIndex']=_0x53da7e['index'];const _0x2f1541=Nd['exec'](_0x39591d);w['assert'](_0x2f1541,'Invalid\x20['+_0x3a0fd1+']:\x20'+_0x39591d['substring'](_0x53da7e['index'],_0x53da7e['index']+(0x201e+-0x2584+0x5ca))+'...'),_0xac04da||(_0xac04da=_0x2f1541===null);const _0x1332b4=_0x2f1541[-0x3*-0x64d+-0x2628+0x1342];r_['lastIndex']=_0x2f1541['index'];const _0x1cfa05=r_['exec'](_0x1332b4)[-0x389*-0x9+0x119*0xb+-0x2be4];let _0x5f4db7=_0x1332b4['substring'](_0x1cfa05['length'])['trim']();_0x5f4db7===''&&(_0x5f4db7='true');const _0x4aacba=Lt['_keep'](_0x20d493);let _0x470f9c=_0x4e6a64;if(_0x4aacba){const _0x3ab1c9=_0x1cfa05['startsWith']('{')&&_0x1cfa05['endsWith']('}');_0x3ab1c9&&(_0x470f9c=!(0x11b4+0x5a2+-0x1756)),_0x3ab1c9?_0x25801e['set'](_0x1cfa05,_0x5f4db7):_0x58144b['set'](_0x1cfa05,_0x5f4db7),_0x470f9c&&(_0x39591d=_0x39591d['substring'](-0x207d+-0x1*0x9d0+0x2a4d,_0x2f1541['index']-(-0xcfc+-0x63*0x45+0x27ac))+_0x39591d['substring'](Nd['lastIndex']),Fs['lastIndex']=_0x2f1541['index']-(-0xc88*-0x1+-0x217*-0x9+-0x17e*0x15));}w['trace'](Lr,_0x3a0fd1+':\x20['+_0x1cfa05+']\x20'+_0x5f4db7+'\x20'+(_0x4aacba?'':'IGNORED')),_0x470f9c||(Fs['lastIndex']=_0x2f1541['index']+_0x2f1541[0x2*-0x11a0+-0x909+0x2c49]['length']);break;}case'undef':{kd['lastIndex']=_0x53da7e['index'];const _0x2509f1=kd['exec'](_0x39591d),_0x2f0cb6=_0x2509f1[-0x19cb*-0x1+-0x2e2+-0x5ba*0x4]['trim'](),_0x67247a=Lt['_keep'](_0x20d493);_0x67247a&&(_0x58144b['delete'](_0x2f0cb6),_0x4e6a64&&(_0x39591d=_0x39591d['substring'](0x1d17*-0x1+0x251a+-0x803,_0x2509f1['index']-(-0x2152+-0x25e1+-0x3*-0x17bc))+_0x39591d['substring'](kd['lastIndex']),Fs['lastIndex']=_0x2509f1['index']-(-0x2*0xb59+-0xc9*0x5+0x354*0x8))),w['trace'](Lr,_0x3a0fd1+':\x20['+_0x2f0cb6+']\x20'+(_0x67247a?'':'IGNORED')),_0x4e6a64||(Fs['lastIndex']=_0x2509f1['index']+_0x2509f1[0x1c76*-0x1+-0x9*-0x241+0x82d]['length']);break;}case'extension':{i_['lastIndex']=_0x53da7e['index'];const _0x30900d=i_['exec'](_0x39591d);if(w['assert'](_0x30900d,'Invalid\x20['+_0x3a0fd1+']:\x20'+_0x39591d['substring'](_0x53da7e['index'],_0x53da7e['index']+(-0x4fc+0x208d+-0x1b2d))+'...'),_0xac04da||(_0xac04da=_0x30900d===null),_0x30900d){const _0x49330b=_0x30900d[0xc9a+0x10a7+-0x1d40],_0x243890=Lt['_keep'](_0x20d493);_0x243890&&_0x58144b['set'](_0x49330b,'true'),w['trace'](Lr,_0x3a0fd1+':\x20['+_0x49330b+']\x20'+(_0x243890?'':'IGNORED'));}Fs['lastIndex']=_0x30900d['index']+_0x30900d[0x18cd+-0x69d+0x48c*-0x4]['length'];break;}case'ifdef':case'ifndef':case'if':{Ud['lastIndex']=_0x53da7e['index'];const _0x1fe9ff=Ud['exec'](_0x39591d),_0x41f976=_0x1fe9ff[0x898+-0x173a+0xea4],_0x44d505=Lt['evaluate'](_0x41f976,_0x58144b);_0xac04da||(_0xac04da=_0x44d505['error']);let _0x1a1af9=_0x44d505['result'];_0x3a0fd1==='ifndef'&&(_0x1a1af9=!_0x1a1af9),_0x20d493['push']({'anyKeep':_0x1a1af9,'keep':_0x1a1af9,'start':_0x53da7e['index'],'end':Ud['lastIndex']}),w['trace'](Lr,_0x3a0fd1+':\x20['+_0x41f976+']\x20=>\x20'+_0x1a1af9),Fs['lastIndex']=_0x1fe9ff['index']+_0x1fe9ff[-0x1f82+0x185e+0x724]['length'];break;}case'endif':case'else':case'elif':{Bd['lastIndex']=_0x53da7e['index'];const _0x26280e=Bd['exec'](_0x39591d),_0x2f167c=_0x20d493['pop']();if(!_0x2f167c){console['error']('Shader\x20pre'+'processing'+'\x20encounter'+'ed\x20\x22#'+_0x26280e[0x68*0x17+0x4f7+-0x2*0x727]+('\x22\x20without\x20'+'a\x20precedin'+'g\x20#if\x20#ifd'+'ef\x20#ifndef'+'\x20while\x20pre'+'processing'+'\x20')+Lt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x39591d['substring'](_0x53da7e['index'],_0x53da7e['index']+(-0xb*-0x115+-0x32d*0x7+0xab8))+'...',{'source':_0xd67f56}),_0xac04da=!(0x183e+-0xc07+-0xc37);continue;}const _0x81141d=_0x2f167c['keep']?_0x39591d['substring'](_0x2f167c['end'],_0x53da7e['index']):'';w['trace'](Lr,_0x3a0fd1+(':\x20[previou'+'s\x20block]\x20='+'>\x20')+(_0x81141d!=='')),_0x39591d=_0x39591d['substring'](-0x8*-0x17c+-0x1d*0x31+-0x653,_0x2f167c['start'])+_0x81141d+_0x39591d['substring'](Bd['lastIndex']),Fs['lastIndex']=_0x2f167c['start']+_0x81141d['length'];const _0x12c260=_0x26280e[0x17f7+-0x2d8+-0x151e];if(_0x12c260==='else'||_0x12c260==='elif'){let _0x4936ca=!(-0xe*0x224+0x18ec+0x50d);if(!_0x2f167c['anyKeep']){if(_0x12c260==='else')_0x4936ca=!_0x2f167c['keep'];else{const _0x679ee5=Lt['evaluate'](_0x26280e[0x1*-0x240a+0x1*0x1f23+-0x1a3*-0x3],_0x58144b);_0x4936ca=_0x679ee5['result'],_0xac04da||(_0xac04da=_0x679ee5['error']);}}_0x20d493['push']({'anyKeep':_0x2f167c['anyKeep']||_0x4936ca,'keep':_0x4936ca,'start':Fs['lastIndex'],'end':Fs['lastIndex']}),w['trace'](Lr,_0x3a0fd1+':\x20['+_0x26280e[-0x1*-0x247d+0x1186*-0x1+-0x12f5]+']\x20=>\x20'+_0x4936ca);}break;}case'include':{zd['lastIndex']=_0x53da7e['index'];const _0xf314ea=zd['exec'](_0x39591d);if(_0xac04da||(_0xac04da=_0xf314ea===null),!_0xf314ea){w['assert'](_0xf314ea,'Invalid\x20['+_0x3a0fd1+(']\x20while\x20pr'+'eprocessin'+'g\x20')+Lt['sourceName']+':\x0a'+_0x39591d['substring'](_0x53da7e['index'],_0x53da7e['index']+(0x3a+0x15b*0x1+0x3d*-0x5))+'...'),_0xac04da=!(-0xb3d+0x13f1+-0x8b4);continue;}const _0x5cf608=_0xf314ea[0xd93+0x593+0xa9*-0x1d]['trim'](),_0x1b9973=(_0x1708c7=_0xf314ea[-0x1a67+-0x1*0xc25+0x268e*0x1])==null?void(0x1a98+0x1dfa+0x3892*-0x1):_0x1708c7['trim'](),_0x2767f2=Lt['_keep'](_0x20d493);if(_0x2767f2){let _0x18c7c5=_0x3aa8ae==null?void(-0x2*0x20b+0x1274+0x6*-0x265):_0x3aa8ae['get'](_0x5cf608);if(_0x18c7c5!==void(0x2478+-0x572+-0x1f06)){if(_0x18c7c5=this['stripComme'+'nts'](_0x18c7c5),_0x1b9973){const _0x161478=_0x58144b['get'](_0x1b9973),_0x3b6dc7=parseFloat(_0x161478);if(Number['isInteger'](_0x3b6dc7)){let _0x2cda18='';for(let _0x54502f=0x73*0x2b+-0x14f2*-0x1+0x3a9*-0xb;_0x54502f<_0x3b6dc7;_0x54502f++)_0x2cda18+=_0x18c7c5['replace'](VT,String(_0x54502f));_0x18c7c5=_0x2cda18;}else console['error']('Include\x20Co'+'unt\x20identi'+'fier\x20\x22'+_0x1b9973+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Lt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x39591d['substring'](_0x53da7e['index'],_0x53da7e['index']+(0x20a1*0x1+-0x4*-0x2b4+-0x2b0d))+'...',{'originalSource':_0xd67f56,'source':_0x39591d}),_0xac04da=!(-0x1c6*0x11+0x20b3+0x28d*-0x1);}_0x39591d=_0x39591d['substring'](-0x91f+-0x2*-0xb66+0x1*-0xdad,_0xf314ea['index']-(-0x24ed+0x2*0x135a+0x2*-0xe3))+_0x18c7c5+_0x39591d['substring'](zd['lastIndex']),Fs['lastIndex']=_0xf314ea['index']-(-0xb89+-0x34*-0x9e+0x6*-0x36d);}else{console['error']('Include\x20\x22'+_0x5cf608+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Lt['sourceName'],{'originalSource':_0xd67f56,'source':_0x39591d}),_0xac04da=!(0xe9b*0x1+0x1*-0x2d1+0x1f7*-0x6);continue;}}w['trace'](Lr,_0x3a0fd1+':\x20['+_0x5cf608+']\x20'+(_0x2767f2?'':'IGNORED'));break;}}}return _0x20d493['length']>-0x1d93+0x1*0x1990+0x403&&(console['error']('Shader\x20pre'+'processing'+'\x20reached\x20t'+'he\x20end\x20of\x20'+'the\x20file\x20w'+'ithout\x20enc'+'ountering\x20'+'the\x20necess'+'ary\x20#endif'+'\x20to\x20close\x20'+'a\x20precedin'+'g\x20#if,\x20#if'+'def,\x20or\x20#i'+'fndef\x20bloc'+'k.\x20'+Lt['sourceName']),_0xac04da=!(-0x335*-0x6+-0x1d4+-0x116a)),_0xac04da?(console['error']('Failed\x20to\x20'+'preprocess'+'\x20shader:\x20',{'source':_0xd67f56}),null):_0x39591d;}static['_keep'](_0x23cb0f){for(let _0x250f91=-0xd*-0x185+-0xb91+-0x830;_0x250f91<_0x23cb0f['length'];_0x250f91++)if(!_0x23cb0f[_0x250f91]['keep'])return!(0xcdb+0x7d5+0x423*-0x5);return!(0xdcc+0x1525+-0x1*0x22f1);}static['evaluateAt'+'omicExpres'+'sion'](_0x46ba57,_0xb1cf0c){let _0xba3d3a=!(0x847+0xb*-0x11+0x78b*-0x1);_0x46ba57=_0x46ba57['trim']();let _0x1304ba=!(-0x1*-0x1bff+-0x13d7+-0x827);if(_0x46ba57==='true')return{'result':!(0x17d*0x19+-0x40e+-0x2127),'error':_0xba3d3a};if(_0x46ba57==='false')return{'result':!(0x1*-0x1edd+-0x22c4+0x2*0x20d1),'error':_0xba3d3a};const _0x3ab824=NT['exec'](_0x46ba57);if(_0x3ab824){_0x1304ba=_0x3ab824[-0x2*0x2d7+-0x1da7*0x1+-0x11ab*-0x2]==='!',_0x46ba57=_0x3ab824[0x2*0xbf0+0x3be*0x7+-0x3210]['trim']();const _0x4df706=_0xb1cf0c['has'](_0x46ba57);return{'result':_0x1304ba?!_0x4df706:_0x4df706,'error':_0xba3d3a};}const _0x606633=BT['exec'](_0x46ba57);if(_0x606633){const _0x1db2ba=_0xb1cf0c['get'](_0x606633[0x1*0x17cb+-0x26b*0x1+-0x155f]['trim']())??_0x606633[0x355+0x2ed*0xb+-0x2383*0x1]['trim'](),_0x3cd2b4=_0xb1cf0c['get'](_0x606633[0x529+-0x11d5+-0xcaf*-0x1]['trim']())??_0x606633[0xdd5*-0x1+0x17e*0x6+0x4e4]['trim'](),_0x3dceb8=_0x606633[0xda1*0x2+0x1f6b+-0x3aab]['trim']();let _0x3ee9ce=!(-0x712+0x4f*-0x5d+0x23c6);switch(_0x3dceb8){case'==':_0x3ee9ce=_0x1db2ba===_0x3cd2b4;break;case'!=':_0x3ee9ce=_0x1db2ba!==_0x3cd2b4;break;case'<':_0x3ee9ce=_0x1db2ba<_0x3cd2b4;break;case'<=':_0x3ee9ce=_0x1db2ba<=_0x3cd2b4;break;case'>':_0x3ee9ce=_0x1db2ba>_0x3cd2b4;break;case'>=':_0x3ee9ce=_0x1db2ba>=_0x3cd2b4;break;default:_0xba3d3a=!(0x25c4+0x25d6+-0x25cd*0x2);}return{'result':_0x3ee9ce,'error':_0xba3d3a};}return{'result':_0xb1cf0c['has'](_0x46ba57),'error':_0xba3d3a};}static['processPar'+'entheses'](_0x3aaf64,_0x49b1bf){let _0x535206=!(-0xc63*0x1+-0xd73+-0x89d*-0x3),_0x41f489=_0x3aaf64['trim']();for(;_0x41f489['startsWith']('(')&&_0x41f489['endsWith'](')');){let _0x4fe5b3=0x1828+-0x442*-0x7+-0x35f6,_0x4c53b2=!(0x1*0x11df+-0x1b2*-0x5+-0x1a59);for(let _0x383789=-0x19c9+-0x3*0x495+0x14*0x1fa;_0x383789<_0x41f489['length']-(0xfe0*-0x2+0x19cc+0x5f5);_0x383789++)if(_0x41f489[_0x383789]==='(')_0x4fe5b3++;else{if(_0x41f489[_0x383789]===')'&&(_0x4fe5b3--,_0x4fe5b3===0x1b9b+-0x1*-0x2193+-0x29*0x17e)){_0x4c53b2=!(-0xde2+0x30b*0x2+-0x7cd*-0x1);break;}}if(_0x4c53b2)_0x41f489=_0x41f489['slice'](0x160b+-0x3*-0xa0a+-0x3428,-(-0x6a7+-0x118+0x7c0))['trim']();else break;}for(;;){let _0x2a5fd5=!(-0xc2*-0x13+0x4*0x8c8+-0x3185),_0x335bea=0xcfb+0x13c6+-0x20c1,_0x553772=-0x913+-0x4de*-0x1+0x435,_0x59bd2d=-(-0x98e*0x1+-0x36+-0x3d*-0x29),_0x383d94=-(-0xa7b*0x2+-0x2332+-0x3829*-0x1),_0x2918f2=-0xf4+-0xea9+0x23b*0x7;for(let _0x5aaddb=-0x4*-0x819+-0x1*0x34a+-0x1d1a;_0x5aaddb<_0x41f489['length'];_0x5aaddb++)if(_0x41f489[_0x5aaddb]==='('){const _0x1beaef=_0x41f489['substring'](-0x1*0x1f7b+-0x6b4+0x262f*0x1,_0x5aaddb);UT['test'](_0x1beaef)?_0x2918f2++:_0x2918f2===0x18c0+-0x2a*0x61+-0x8d6&&(_0x335bea++,_0x335bea>_0x553772&&(_0x553772=_0x335bea,_0x59bd2d=_0x5aaddb),_0x2a5fd5=!(-0x68+0x106d*-0x1+0x10d5));}else _0x41f489[_0x5aaddb]===')'&&(_0x2918f2>-0x2397+0xa*-0x10d+-0x2e19*-0x1?_0x2918f2--:_0x335bea>-0x8f1*-0x3+0x1*0xf76+0x2a49*-0x1&&(_0x335bea===_0x553772&&_0x59bd2d!==-(-0x25d5+-0x12e2+0x38b8)&&(_0x383d94=_0x5aaddb),_0x335bea--));if(!_0x2a5fd5||_0x59bd2d===-(0x858+0x9af+0x3*-0x602)||_0x383d94===-(0x3d*-0x6b+0xa27+-0xf59*-0x1))break;const _0x17a3e3=_0x41f489['substring'](_0x59bd2d+(0xedb*-0x1+-0x19a*-0x11+-0xc5e),_0x383d94),{result:_0x34b0e6,error:_0x31a6a1}=Lt['evaluate'](_0x17a3e3,_0x49b1bf);_0x535206=_0x535206||_0x31a6a1,_0x41f489=_0x41f489['substring'](0x47c+-0x248e+0x2012,_0x59bd2d)+(_0x34b0e6?'true':'false')+_0x41f489['substring'](_0x383d94+(-0x1abc+-0x1*-0xdeb+-0x1*-0xcd2));}return{'expression':_0x41f489,'error':_0x535206};}static['evaluate'](_0x468b65,_0x3ff918){const _0x7c1396=zT['exec'](_0x468b65)===null;w['assert'](_0x7c1396,'Resolving\x20'+'expression'+'\x20like\x20this'+'\x20is\x20not\x20su'+'pported:\x20'+_0x468b65);let _0x20aa5f=_0x468b65,_0x2cc4a5=!(-0x1*-0x8a8+-0x163c+0xd95);if(_0x468b65['replace'](kT,'')['indexOf']('(')!==-(-0x1a34+0x5*0x69d+-0x6dc)){const _0x11a471=Lt['processPar'+'entheses'](_0x468b65,_0x3ff918);_0x20aa5f=_0x11a471['expression'],_0x2cc4a5=_0x11a471['error'];}if(_0x2cc4a5)return w['log']('Parenthesi'+'s\x20parsing\x20'+'error\x20in\x20e'+'xpression:'+'\x20\x22'+_0x468b65+'\x22'),{'result':!(0x36*-0x1f+-0x1*0x22fa+0x3*0xdd7),'error':!(0xe82+0x24e3+0x3365*-0x1)};const _0x4bb43d=_0x20aa5f['split']('||');for(const _0x58bea9 of _0x4bb43d){const _0x9d5b7d=_0x58bea9['split']('&&');let _0x2666cd=!(-0x1cd7+-0x77c*0x4+0x3ac7);for(const _0x49d9cd of _0x9d5b7d){const {result:_0x4ee1b0,error:_0x3e457b}=Lt['evaluateAt'+'omicExpres'+'sion'](_0x49d9cd['trim'](),_0x3ff918);if(!_0x4ee1b0||_0x3e457b){_0x2666cd=!(0x26e5+-0x1*0xe+-0x26d6);break;}}if(_0x2666cd)return{'result':!(-0x1f7b+0x2*-0x1cd+-0x7*-0x503),'error':!_0x7c1396};}return{'result':!(0xb3c*0x3+0x1a93+-0x607*0xa),'error':!_0x7c1396};}};h(Lt,'sourceName');let ko=Lt;const Vy='\x0a\x0a#ifndef\x20'+'outType_0\x0a'+'#define\x20ou'+'tType_0\x20ve'+'c4\x0a#endif\x0a'+'\x0alayout(lo'+'cation\x20=\x200'+')\x20out\x20high'+'p\x20outType_'+'0\x20pcFragCo'+'lor0;\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_1\x0a'+'layout(loc'+'ation\x20=\x201)'+'\x20out\x20highp'+'\x20outType_1'+'\x20pcFragCol'+'or1;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_2\x0alayo'+'ut(locatio'+'n\x20=\x202)\x20out'+'\x20highp\x20out'+'Type_2\x20pcF'+'ragColor2;'+'\x0a#endif\x0a\x0a#'+'if\x20COLOR_A'+'TTACHMENT_'+'3\x0alayout(l'+'ocation\x20=\x20'+'3)\x20out\x20hig'+'hp\x20outType'+'_3\x20pcFragC'+'olor3;\x0a#en'+'dif\x0a\x0a#if\x20C'+'OLOR_ATTAC'+'HMENT_4\x0ala'+'yout(locat'+'ion\x20=\x204)\x20o'+'ut\x20highp\x20o'+'utType_4\x20p'+'cFragColor'+'4;\x0a#endif\x0a'+'\x0a#if\x20COLOR'+'_ATTACHMEN'+'T_5\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0a#'+'endif\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_6\x0a'+'layout(loc'+'ation\x20=\x206)'+'\x20out\x20highp'+'\x20outType_6'+'\x20pcFragCol'+'or6;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_7\x0alayo'+'ut(locatio'+'n\x20=\x207)\x20out'+'\x20highp\x20out'+'Type_7\x20pcF'+'ragColor7;'+'\x0a#endif\x0a\x0a#'+'define\x20gl_'+'FragColor\x20'+'pcFragColo'+'r0\x0a\x0a#defin'+'e\x20varying\x20'+'in\x0a\x0a#defin'+'e\x20texture2'+'D\x20texture\x0a'+'#define\x20te'+'xture2DBia'+'s\x20texture\x0a'+'#define\x20te'+'xtureCube\x20'+'texture\x0a#d'+'efine\x20text'+'ure2DProj\x20'+'texturePro'+'j\x0a#define\x20'+'texture2DL'+'od\x20texture'+'Lod\x0a#defin'+'e\x20texture2'+'DProjLod\x20t'+'extureProj'+'Lod\x0a#defin'+'e\x20textureC'+'ubeLod\x20tex'+'tureLod\x0a#d'+'efine\x20text'+('ure2DGrad\x20'+'textureGra'+'d\x0a#define\x20'+'texture2DP'+'rojGrad\x20te'+'xtureProjG'+'rad\x0a#defin'+'e\x20textureC'+'ubeGrad\x20te'+'xtureGrad\x0a'+'#define\x20ut'+'exture2D\x20t'+'exture\x0a#de'+'fine\x20itext'+'ure2D\x20text'+'ure\x0a\x0a//\x20de'+'precated\x20d'+'efines\x0a#de'+'fine\x20textu'+'re2DLodEXT'+'\x20texture2D'+'LodEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DLod_ins'+'tead\x0a#defi'+'ne\x20texture'+'2DProjLodE'+'XT\x20texture'+'2DProjLodE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DP'+'rojLod\x0a#de'+'fine\x20textu'+'reCubeLodE'+'XT\x20texture'+'CubeLodEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeL'+'od_instead'+'\x0a#define\x20t'+'exture2DGr'+'adEXT\x20text'+'ure2DGradE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DG'+'rad_instea'+'d\x0a#define\x20'+'texture2DP'+'rojGradEXT'+'\x20texture2D'+'ProjGradEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DPr'+'ojGrad_ins'+'tead\x0a#defi'+'ne\x20texture'+'CubeGradEX'+'T\x20textureC'+'ubeGradEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeG'+'rad_instea'+'d\x0a\x0a//\x20samp'+'le\x20shadows'+'\x20using\x20tex'+'tureGrad\x20t'+'o\x20remove\x20d'+'erivatives'+'\x20in\x20the\x20dy'+'namic\x20loop'+'s\x20(which\x20a'+'re\x20used\x20by'+'\x0a//\x20cluste'+'red\x20lighti'+'ng)\x20-\x20as\x20D'+'irectX\x20sha'+'der\x20compil'+'er\x20tries\x20t'+'o\x20unroll\x20t'+'he\x20loops\x20a'+'nd\x20takes\x20l'+'ong\x20time\x0a/'+'/\x20to\x20compi'+'le\x20the\x20sha'+'der.\x20Using'+'\x20textureLo'+'d\x20would\x20be'+'\x20even\x20bett')+('er,\x20but\x20We'+'bGl\x20does\x20n'+'ot\x20transla'+'te\x20it\x20to\x0a/'+'/\x20lod\x20inst'+'ruction\x20fo'+'r\x20DirectX\x20'+'correctly\x20'+'and\x20uses\x20S'+'ampleCmp\x20i'+'nstead\x20of\x20'+'SampleCmpL'+'evelZero\x20o'+'r\x20similar.'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureG'+'rad(res,\x20u'+'v,\x20vec2(1,'+'\x201),\x20vec2('+'1,\x201))\x0a\x0a//'+'\x20pass\x20/\x20ac'+'cept\x20shado'+'w\x20map\x20or\x20t'+'exture\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20on\x20webgl'+'\x20this\x20is\x20s'+'imply\x20pass'+'ed\x20as\x20is\x0a/'+'/\x20but\x20this'+'\x20is\x20needed'+'\x20for\x20WebGP'+'U\x0a#define\x20'+'SHADOWMAP_'+'PASS(name)'+'\x20name\x0a#def'+'ine\x20SHADOW'+'MAP_ACCEPT'+'(name)\x20sam'+'pler2DShad'+'ow\x20name\x0a#d'+'efine\x20TEXT'+'URE_PASS(n'+'ame)\x20name\x0a'+'#define\x20TE'+'XTURE_ACCE'+'PT(name)\x20s'+'ampler2D\x20n'+'ame\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP(name)\x20h'+'ighp\x20sampl'+'er2D\x20name\x0a'+'\x0a#define\x20G'+'L2\x0a'),Gy='\x0a#define\x20a'+'ttribute\x20i'+'n\x0a#define\x20'+'varying\x20ou'+'t\x0a#define\x20'+'texture2D\x20'+'texture\x0a#d'+'efine\x20utex'+'ture2D\x20tex'+'ture\x0a#defi'+'ne\x20itextur'+'e2D\x20textur'+'e\x0a#define\x20'+'GL2\x0a#defin'+'e\x20VERTEXSH'+'ADER\x0a\x0a#def'+'ine\x20TEXTUR'+'E_PASS(nam'+'e)\x20name\x0a#d'+'efine\x20TEXT'+'URE_ACCEPT'+'(name)\x20sam'+'pler2D\x20nam'+'e\x0a#define\x20'+'TEXTURE_AC'+'CEPT_HIGHP'+'(name)\x20hig'+'hp\x20sampler'+'2D\x20name\x0a',Hy='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#ifnde'+'f\x20outType_'+'0\x0a#define\x20'+'outType_0\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_1\x0a'+'#define\x20ou'+'tType_1\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_2\x0a#d'+'efine\x20outT'+'ype_2\x20vec4'+'\x0a#endif\x0a#i'+'fndef\x20outT'+'ype_3\x0a#def'+'ine\x20outTyp'+'e_3\x20vec4\x0a#'+'endif\x0a#ifn'+'def\x20outTyp'+'e_4\x0a#defin'+'e\x20outType_'+'4\x20vec4\x0a#en'+'dif\x0a#ifnde'+'f\x20outType_'+'5\x0a#define\x20'+'outType_5\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_6\x0a'+'#define\x20ou'+'tType_6\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_7\x0a#d'+'efine\x20outT'+'ype_7\x20vec4'+'\x0a#endif\x0a\x0al'+'ayout(loca'+'tion\x20=\x200)\x20'+'out\x20highp\x20'+'outType_0\x20'+'pcFragColo'+'r0;\x0alayout'+'(location\x20'+'=\x201)\x20out\x20h'+'ighp\x20outTy'+'pe_1\x20pcFra'+'gColor1;\x0al'+'ayout(loca'+'tion\x20=\x202)\x20'+'out\x20highp\x20'+'outType_2\x20'+'pcFragColo'+'r2;\x0alayout'+'(location\x20'+'=\x203)\x20out\x20h'+'ighp\x20outTy'+'pe_3\x20pcFra'+'gColor3;\x0al'+'ayout(loca'+'tion\x20=\x204)\x20'+'out\x20highp\x20'+'outType_4\x20'+'pcFragColo'+'r4;\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0al'+'ayout(loca'+'tion\x20=\x206)\x20'+'out\x20highp\x20'+'outType_6\x20'+'pcFragColo'+'r6;\x0alayout'+'(location\x20'+'=\x207)\x20out\x20h'+'ighp\x20outTy'+'pe_7\x20pcFra'+'gColor7;\x0a\x0a'+'#define\x20gl'+'_FragColor'+'\x20pcFragCol'+'or0\x0a\x0a#defi'+'ne\x20texture'+'2D(res,\x20uv'+')\x20texture('+'sampler2D('+('res,\x20res\x20#'+'#\x20_sampler'+'),\x20uv)\x0a#de'+'fine\x20textu'+'re2DBias(r'+'es,\x20uv,\x20bi'+'as)\x20textur'+'e(sampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv,\x20b'+'ias)\x0a#defi'+'ne\x20texture'+'2DLod(res,'+'\x20uv,\x20lod)\x20'+'textureLod'+'(sampler2D'+'(res,\x20res\x20'+'##\x20_sample'+'r),\x20uv,\x20lo'+'d)\x0a#define'+'\x20textureCu'+'be(res,\x20uv'+')\x20texture('+'samplerCub'+'e(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a#'+'define\x20tex'+'tureCubeLo'+'d(res,\x20uv,'+'\x20lod)\x20text'+'ureLod(sam'+'plerCube(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x20lod)'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureL'+'od(sampler'+'2DShadow(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x200.0)'+'\x0a#define\x20i'+'texture2D('+'res,\x20uv)\x20t'+'exture(isa'+'mpler2D(re'+'s,\x20res\x20##\x20'+'_sampler),'+'\x20uv)\x0a#defi'+'ne\x20utextur'+'e2D(res,\x20u'+'v)\x20texture'+'(usampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a\x0a'+'//\x20depreca'+'ted\x20define'+'s\x0a#define\x20'+'texture2DL'+'odEXT\x20text'+'ure2DLodEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DLo'+'d_instead\x0a'+'#define\x20te'+'xture2DPro'+'jLodEXT\x20te'+'xture2DPro'+'jLodEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DProjLo'+'d\x0a#define\x20'+'textureCub'+'eLodEXT\x20te'+'xtureCubeL'+'odEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeLod_in'+'stead\x0a#def'+'ine\x20textur'+'e2DGradEXT'+'\x20texture2D'+'GradEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DGrad_i'+'nstead\x0a#de')+('fine\x20textu'+'re2DProjGr'+'adEXT\x20text'+'ure2DProjG'+'radEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DProjGra'+'d_instead\x0a'+'#define\x20te'+'xtureCubeG'+'radEXT\x20tex'+'tureCubeGr'+'adEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeGrad_i'+'nstead\x0a\x0a//'+'\x20TODO:\x20imp'+'lement\x20oth'+'er\x20texture'+'\x20sampling\x20'+'macros\x0a//\x20'+'#define\x20te'+'xture2DPro'+'j\x20textureP'+'roj\x0a//\x20#de'+'fine\x20textu'+'re2DProjLo'+'d\x20textureP'+'rojLod\x0a//\x20'+'#define\x20te'+'xture2DGra'+'d\x20textureG'+'rad\x0a//\x20#de'+'fine\x20textu'+'re2DProjGr'+'ad\x20texture'+'ProjGrad\x0a/'+'/\x20#define\x20'+'textureCub'+'eGrad\x20text'+'ureGrad\x0a\x0a/'+'/\x20pass\x20/\x20a'+'ccept\x20shad'+'ow\x20map\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20passes\x20b'+'oth\x20the\x20te'+'xture\x20as\x20w'+'ell\x20as\x20sam'+'pler\x0a//\x20as'+'\x20the\x20combi'+'ned\x20sample'+'r\x20can\x20be\x20o'+'nly\x20create'+'d\x20at\x20a\x20poi'+'nt\x20of\x20use\x0a'+'#define\x20SH'+'ADOWMAP_PA'+'SS(name)\x20n'+'ame,\x20name\x20'+'##\x20_sample'+'r\x0a#define\x20'+'SHADOWMAP_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'PASS(name)'+'\x20name,\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP\x20TEXTURE'+'_ACCEPT\x0a\x0a#'+'define\x20GL2'+'\x0a#define\x20W'+'EBGPU\x0a'),Wy='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#defin'+'e\x20texture2'+'D(res,\x20uv)'+'\x20texture(s'+'ampler2D(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv)\x0a#def'+'ine\x20itextu'+'re2D(res,\x20'+'uv)\x20textur'+'e(isampler'+'2D(res,\x20re'+'s\x20##\x20_samp'+'ler),\x20uv)\x0a'+'#define\x20ut'+'exture2D(r'+'es,\x20uv)\x20te'+'xture(usam'+'pler2D(res'+',\x20res\x20##\x20_'+'sampler),\x20'+'uv)\x0a\x0a#defi'+'ne\x20TEXTURE'+'_PASS(name'+')\x20name,\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT(na'+'me)\x20textur'+'e2D\x20name,\x20'+'sampler\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT_HI'+'GHP\x20TEXTUR'+'E_ACCEPT\x0a\x0a'+'#define\x20GL'+'2\x0a#define\x20'+'WEBGPU\x0a#de'+'fine\x20VERTE'+'XSHADER\x0a#d'+'efine\x20gl_V'+'ertexID\x20gl'+'_VertexInd'+'ex\x0a#define'+'\x20gl_Instan'+'ceID\x20gl_In'+'stanceInde'+'x\x0a',$y='\x0a',Xy='\x0a#define\x20V'+'ERTEXSHADE'+'R\x0a',n_='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20to'+'\x20sample\x20sc'+'ene\x20grab\x20t'+'extures\x0ave'+'c2\x20getGrab'+'ScreenPos('+'vec4\x20clipP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x200.5;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'WEBGPU\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv.y\x20'+'=\x201.0\x20-\x20uv'+'.y;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a\x0a//\x20con'+'vert\x20uv\x20co'+'ordinates\x20'+'to\x20sample\x20'+'image\x20effe'+'ct\x20texture'+'\x20(render\x20t'+'arget\x20text'+'ure\x20render'+'ed\x20without'+'\x0a//\x20forwar'+'d\x20renderer'+'\x20which\x20doe'+'s\x20the\x20flip'+'\x20in\x20the\x20pr'+'ojection\x20m'+'atrix)\x0avec'+'2\x20getImage'+'EffectUV(v'+'ec2\x20uv)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv.y'+'\x20=\x201.0\x20-\x20u'+'v.y;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20uv'+';\x0a}\x0a',o_='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20fo'+'r\x20sampling'+'\x20scene\x20gra'+'b\x20textures'+'\x0afn\x20getGra'+'bScreenPos'+'(clipPos:\x20'+'vec4<f32>)'+'\x20->\x20vec2<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'var\x20uv:\x20ve'+'c2<f32>\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x20vec2<f3'+'2>(0.5);\x0a\x20'+'\x20\x20\x20uv.y\x20=\x20'+'1.0\x20-\x20uv.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'//\x20convert'+'\x20uv\x20coordi'+'nates\x20to\x20s'+'ample\x20imag'+'e\x20effect\x20t'+'exture\x20(re'+'nder\x20targe'+'t\x20texture\x20'+'rendered\x20w'+'ithout\x0a//\x20'+'forward\x20re'+'nderer\x20whi'+'ch\x20does\x20th'+'e\x20flip\x20in\x20'+'the\x20projec'+'tion\x20matri'+'x)\x0afn\x20getI'+'mageEffect'+'UV(uv:\x20vec'+'2<f32>)\x20->'+'\x20vec2<f32>'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20modifiedU'+'V:\x20vec2<f3'+'2>\x20=\x20uv;\x0a\x20'+'\x20\x20\x20modifie'+'dUV.y\x20=\x201.'+'0\x20-\x20modifi'+'edUV.y;\x0a\x20\x20'+'\x20\x20return\x20m'+'odifiedUV;'+'\x0a}\x0a\x0a//\x20typ'+'es\x20wrapped'+'\x20in\x20size\x20a'+'ligned\x20str'+'uctures\x20to'+'\x20ensure\x20co'+'rrect\x20alig'+'nment\x20in\x20u'+'niform\x20buf'+'fer\x20arrays'+'\x0astruct\x20Wr'+'appedF32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'f32\x20}\x0astru'+'ct\x20Wrapped'+'I32\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20i32\x20}'+'\x0astruct\x20Wr'+'appedU32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'u32\x20}\x0astru'+'ct\x20Wrapped'+'Vec2F\x20{\x20@s'+'ize(16)\x20el'+'ement:\x20vec'+'2f\x20}\x0astruc'+'t\x20WrappedV'+'ec2I\x20{\x20@si'+'ze(16)\x20ele'+'ment:\x20vec2'+'i\x20}\x0astruct'+'\x20WrappedVe'+'c2U\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20vec2u'+'\x20}\x0a',GT={'vertex_position':Me,'vertex_normal':gs,'vertex_tangent':yi,'vertex_texCoord0':is,'vertex_texCoord1':ba,'vertex_texCoord2':wl,'vertex_texCoord3':El,'vertex_texCoord4':bl,'vertex_texCoord5':Al,'vertex_texCoord6':Cl,'vertex_texCoord7':Pl,'vertex_color':Wt,'vertex_boneIndices':us,'vertex_boneWeights':gi};class Jt{static['createDefi'+'nition'](_0x542700,_0x461cb){w['assert'](_0x461cb),w['assert'](!_0x461cb['vertexDefi'+'nes']||_0x461cb['vertexDefi'+'nes']instanceof Map),w['assert'](!_0x461cb['vertexIncl'+'udes']||_0x461cb['vertexIncl'+'udes']instanceof Map),w['assert'](!_0x461cb['fragmentDe'+'fines']||_0x461cb['fragmentDe'+'fines']instanceof Map),w['assert'](!_0x461cb['fragmentIn'+'cludes']||_0x461cb['fragmentIn'+'cludes']instanceof Map);const _0x5ecabc=_0x43f7f9=>{let _0xd5a98c=_0x43f7f9['fragmentOu'+'tputTypes']??'vec4';return Array['isArray'](_0xd5a98c)||(_0xd5a98c=[_0xd5a98c]),_0xd5a98c;},_0x23ae59=(_0x2c5913,_0x2f9d4b,_0x42e977,_0x1c31f2)=>{const _0x35f9a2=_0x542700['isWebGPU']?_0x2c5913:_0x2f9d4b;let _0x362224='';if(!_0x42e977){const _0x2535db=_0x5ecabc(_0x1c31f2);for(let _0x3105e0=-0x1dcf+-0x1*-0x1949+0x486;_0x3105e0<_0x542700['maxColorAt'+'tachments'];_0x3105e0++){_0x362224+='#define\x20CO'+'LOR_ATTACH'+'MENT_'+_0x3105e0+'\x0a';const _0x17cfab=_0x2535db[_0x3105e0]??'vec4';_0x362224+='#define\x20ou'+'tType_'+_0x3105e0+'\x20'+_0x17cfab+'\x0a';}}return _0x362224+_0x35f9a2;},_0x290680=(_0x11963d,_0x194b98)=>{let _0x2d0e56='';if(!_0x11963d){const _0x1ab543=_0x5ecabc(_0x194b98);for(let _0x48a014=-0x4*0x807+-0x3b0+0x23cc;_0x48a014<_0x542700['maxColorAt'+'tachments'];_0x48a014++){const _0x5bb033=_0x1ab543[_0x48a014]??'vec4',_0x3a69fa=Fy['get'](_0x5bb033);w['assert'](_0x3a69fa,'Unknown\x20ou'+'tput\x20type\x20'+'translatio'+'n:\x20'+_0x5bb033+'\x20->\x20'+_0x3a69fa),_0x2d0e56+='alias\x20pcOu'+'tType'+_0x48a014+'\x20=\x20'+_0x3a69fa+';\x0a';}}return _0x2d0e56;},_0x3a0b0d=_0x461cb['name']??'Untitled';let _0x3e7e07,_0x3b2deb;const _0x4a9b6b=Jt['getDefines'+'Code'](_0x542700,_0x461cb['vertexDefi'+'nes']),_0x521269=Jt['getDefines'+'Code'](_0x542700,_0x461cb['fragmentDe'+'fines']);return _0x461cb['shaderLang'+'uage']===it?(_0x3e7e07='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x290680(!(-0x1cba+-0x113f+0xf53*0x3),_0x461cb)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Xy+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+o_+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x4a9b6b+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x461cb['vertexCode']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20'),_0x3b2deb='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x290680(!(0x26dd+-0x1*0x109d+0x55*-0x43),_0x461cb)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+$y+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+o_+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x521269+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x461cb['fragmentCo'+'de']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20')):(w['assert'](_0x461cb['vertexCode']),_0x3e7e07=Jt['versionCod'+'e'](_0x542700)+_0x23ae59(Wy,Gy,!(-0x7fd+-0x41c+0xc19),_0x461cb)+_0x4a9b6b+Jt['precisionC'+'ode'](_0x542700)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+n_+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Jt['getShaderN'+'ameCode'](_0x3a0b0d)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x461cb['vertexCode'],w['assert'](_0x461cb['fragmentCo'+'de']),_0x3b2deb=(_0x461cb['fragmentPr'+'eamble']||'')+Jt['versionCod'+'e'](_0x542700)+_0x23ae59(Hy,Vy,!(-0x563*0x7+0x403*-0x2+0x2dbc),_0x461cb)+_0x521269+Jt['precisionC'+'ode'](_0x542700)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+n_+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Jt['getShaderN'+'ameCode'](_0x3a0b0d)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x461cb['fragmentCo'+'de']),{'name':_0x3a0b0d,'shaderLanguage':_0x461cb['shaderLang'+'uage']??Fe,'attributes':_0x461cb['attributes'],'vshader':_0x3e7e07,'vincludes':_0x461cb['vertexIncl'+'udes'],'fincludes':_0x461cb['fragmentIn'+'cludes'],'fshader':_0x3b2deb,'useTransformFeedback':_0x461cb['useTransfo'+'rmFeedback'],'meshUniformBufferFormat':_0x461cb['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x461cb['meshBindGr'+'oupFormat']};}static['getDefines'+'Code'](_0x435201,_0x556ef0){let _0x5e4ccf='';return _0x435201['capsDefine'+'s']['forEach']((_0x4889f1,_0x2403ac)=>{_0x5e4ccf+='#define\x20'+_0x2403ac+'\x20'+_0x4889f1+'\x0a';}),_0x5e4ccf+='\x0a',_0x556ef0==null||_0x556ef0['forEach']((_0x53d280,_0x437318)=>{_0x5e4ccf+='#define\x20'+_0x437318+'\x20'+_0x53d280+'\x0a';}),_0x5e4ccf+='\x0a',_0x5e4ccf;}static['getShaderN'+'ameCode'](_0x307e26){return'#define\x20SH'+'ADER_NAME\x20'+_0x307e26+'\x0a';}static['versionCod'+'e'](_0x59a03f){return _0x59a03f['isWebGPU']?'#version\x204'+'50\x0a':'#version\x203'+'00\x20es\x0a';}static['precisionC'+'ode'](_0x5ca0ac,_0x103677){_0x103677&&_0x103677!=='highp'&&_0x103677!=='mediump'&&_0x103677!=='lowp'&&(_0x103677=null),_0x103677&&(_0x103677==='highp'&&_0x5ca0ac['maxPrecisi'+'on']!=='highp'&&(_0x103677='mediump'),_0x103677==='mediump'&&_0x5ca0ac['maxPrecisi'+'on']==='lowp'&&(_0x103677='lowp'));const _0x446401=_0x103677||_0x5ca0ac['precision'];return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20precisi'+'on\x20'+_0x446401+('\x20float;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x446401+('\x20int;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20pr'+'ecision\x20')+_0x446401+('\x20usampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x446401+('\x20isampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x446401+('\x20sampler2D'+'Shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x446401+('\x20samplerCu'+'beShadow;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20precisio'+'n\x20')+_0x446401+('\x20sampler2D'+'Array;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}static['collectAtt'+'ributes'](_0x32c83c){const _0x2ae46f={};let _0xbfe993=-0x41a+0x1322*-0x2+0x2a5e,_0x1fda0c=_0x32c83c['indexOf']('attribute');for(;_0x1fda0c>=-0x26*-0x6a+0x14b6*0x1+-0x2*0x1239&&!(_0x1fda0c>0x5c*0x34+0xcfa+-0x1faa&&_0x32c83c[_0x1fda0c-(0x3c7*-0x2+0x20c9+-0x193a)]==='/');){let _0x261c6a=!(-0x345*-0xa+0x6*0x323+0x3383*-0x1);if(_0x1fda0c>0x1*0x4a2+-0xc07*-0x1+-0x5*0x355){let _0x549e75=_0x32c83c['lastIndexO'+'f']('\x0a',_0x1fda0c);_0x549e75=_0x549e75!==-(-0x1b84*0x1+-0x1ac7+0x64*0x8b)?_0x549e75+(0xb*0x295+-0xb43*-0x1+0x1*-0x27a9):0x2e2*-0x8+-0xa40*0x1+0x2150,_0x32c83c['substring'](_0x549e75,_0x1fda0c)['includes']('#')&&(_0x261c6a=!(0x677+-0x2d*-0xc6+-0x2945));}if(!_0x261c6a){const _0x30e8c0=_0x32c83c['indexOf'](';',_0x1fda0c),_0x1cf2fa=_0x32c83c['lastIndexO'+'f']('\x20',_0x30e8c0),_0x5261a2=_0x32c83c['substring'](_0x1cf2fa+(-0x1*0x1720+0x222a*0x1+0x235*-0x5),_0x30e8c0);if(_0x2ae46f[_0x5261a2])w['warn']('Attribute\x20'+'['+_0x5261a2+(']\x20already\x20'+'exists\x20whe'+'n\x20extracti'+'ng\x20the\x20att'+'ributes\x20fr'+'om\x20the\x20ver'+'tex\x20shader'+',\x20ignoring'+'.'),{'vsCode':_0x32c83c});else{const _0x2f50a9=GT[_0x5261a2];_0x2f50a9!==void(-0x395*0x4+-0x35*-0x25+0x6ab)?_0x2ae46f[_0x5261a2]=_0x2f50a9:(_0x2ae46f[_0x5261a2]='ATTR'+_0xbfe993,_0xbfe993++);}}_0x1fda0c=_0x32c83c['indexOf']('attribute',_0x1fda0c+(-0x66*0x43+0x2537+-0x2a1*0x4));}return _0x2ae46f;}}let HT=-0x20a7*-0x1+0x265+0x1186*-0x2;class qy{constructor(_0x1f0635,_0x4ccc4d){h(this,'meshUnifor'+'mBufferFor'+'mat'),h(this,'meshBindGr'+'oupFormat'),h(this,'attributes',new Map());if(this['id']=HT++,this['device']=_0x1f0635,this['definition']=_0x4ccc4d,this['name']=_0x4ccc4d['name']||'Untitled',this['init'](),_0x4ccc4d['cshader'])w['assert'](_0x1f0635['supportsCo'+'mpute'],'Compute\x20sh'+'aders\x20are\x20'+'not\x20suppor'+'ted\x20on\x20thi'+'s\x20device.'),w['assert'](!_0x4ccc4d['vshader']&&!_0x4ccc4d['fshader'],'Vertex\x20and'+'\x20fragment\x20'+'shaders\x20ar'+'e\x20not\x20supp'+'orted\x20when'+'\x20creating\x20'+'a\x20compute\x20'+'shader.'),_0x4ccc4d['cshader']=ko['run'](_0x4ccc4d['cshader'],_0x4ccc4d['cincludes'],{'sourceName':'compute\x20sh'+'ader\x20for\x20'+this['label'],'stripDefines':!(-0x1bb2+-0x15*0x14b+0x36d9*0x1)});else{w['assert'](_0x4ccc4d['vshader'],'No\x20vertex\x20'+'shader\x20has'+'\x20been\x20spec'+'ified\x20when'+'\x20creating\x20'+'a\x20shader.'),w['assert'](_0x4ccc4d['fshader'],'No\x20fragmen'+'t\x20shader\x20h'+'as\x20been\x20sp'+'ecified\x20wh'+'en\x20creatin'+'g\x20a\x20shader'+'.'),w['call'](()=>{this['vUnmodifie'+'d']=_0x4ccc4d['vshader'],this['fUnmodifie'+'d']=_0x4ccc4d['fshader'];});const _0x4729c4=_0x4ccc4d['shaderLang'+'uage']===it;_0x4ccc4d['vshader']=ko['run'](_0x4ccc4d['vshader'],_0x4ccc4d['vincludes'],{'sourceName':'vertex\x20sha'+'der\x20for\x20'+this['label'],'stripDefines':_0x4729c4}),_0x4ccc4d['shaderLang'+'uage']===Fe&&(_0x4ccc4d['attributes']??(_0x4ccc4d['attributes']=Jt['collectAtt'+'ributes'](_0x4ccc4d['vshader'])));const _0x16fd59=_0x1f0635['isWebGL2']&&(Ae['name']==='osx'||Ae['name']==='ios');if(_0x4ccc4d['fshader']=ko['run'](_0x4ccc4d['fshader'],_0x4ccc4d['fincludes'],{'stripUnusedColorAttachments':_0x16fd59,'stripDefines':_0x4729c4,'sourceName':'fragment\x20s'+'hader\x20for\x20'+this['label']}),!_0x4ccc4d['vshader']||!_0x4ccc4d['fshader']){w['error']('Shader:\x20Fa'+'iled\x20to\x20cr'+'eate\x20shade'+'r\x20'+this['label']+('.\x20Vertex\x20o'+'r\x20fragment'+'\x20shader\x20so'+'urce\x20is\x20em'+'pty.'),this),this['failed']=!(-0x2*0x1360+-0x14b1*-0x1+0x120f);return;}}this['impl']=_0x1f0635['createShad'+'erImpl'](this),w['trace'](Im,'Alloc:\x20'+this['label']+',\x20stack:\x20'+Q['toString'](),{'instance':this});}['init'](){this['ready']=!(-0x1*-0x2252+-0x12a*0x2+-0x1ffd),this['failed']=!(-0x87d+0xa10+-0x86*0x3);}get['label'](){return'Shader\x20Id\x20'+this['id']+'\x20('+(this['definition']['shaderLang'+'uage']===it?'WGSL':'GLSL')+')\x20'+this['name'];}['destroy'](){w['trace'](Im,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']),this['device']['onDestroyS'+'hader'](this),this['impl']['destroy'](this);}['loseContex'+'t'](){this['init'](),this['impl']['loseContex'+'t']();}['restoreCon'+'text'](){this['impl']['restoreCon'+'text'](this['device'],this);}}class WT{constructor(){h(this,'storage'),h(this,'gpuBuffer'),h(this,'offset');}}const Be=[];Be[Xs]=function(_0x574a8d,_0x215ed9,_0x416ce3){const _0x2eb247=_0x574a8d['storageFlo'+'at32'];_0x2eb247[_0x416ce3]=_0x215ed9;},Be[ga]=(_0x532381,_0x203cea,_0x1f7552)=>{const _0x1531b1=_0x532381['storageFlo'+'at32'];_0x1531b1[_0x1f7552]=_0x203cea[-0x376*0x1+0x830+-0x4ba],_0x1531b1[_0x1f7552+(0x1*0xe6f+-0x220*-0xf+-0x2e4e)]=_0x203cea[-0x15cc+0x21*-0x19+0x1906*0x1];},Be[ds]=(_0x162fe4,_0x3029b3,_0x46ad5e)=>{const _0x18e2b8=_0x162fe4['storageFlo'+'at32'];_0x18e2b8[_0x46ad5e]=_0x3029b3[0x5*-0x24+0xf2*-0xb+0xb1a],_0x18e2b8[_0x46ad5e+(0x1f*-0xe9+-0x1*-0xf4d+0x1*0xceb)]=_0x3029b3[0x26c6*-0x1+0x265a*-0x1+-0xb*-0x703],_0x18e2b8[_0x46ad5e+(0x60a+-0xffb*0x1+0x9f3)]=_0x3029b3[0x56*0x6b+0x817+0x11*-0x297];},Be[Rn]=(_0x1adbfd,_0x5a8c0c,_0x1f77b4)=>{const _0x3340a6=_0x1adbfd['storageFlo'+'at32'];_0x3340a6[_0x1f77b4]=_0x5a8c0c[0xca9*0x2+0x1*-0x17ce+-0x184],_0x3340a6[_0x1f77b4+(0x24f2+0x69*0x54+-0x4765)]=_0x5a8c0c[-0x3dd*-0x5+-0x1*0x1f06+0x5db*0x2],_0x3340a6[_0x1f77b4+(-0xce9*-0x3+-0x87+0x2632*-0x1)]=_0x5a8c0c[0x1a*-0xf5+0x1bf1+0x1*-0x30d],_0x3340a6[_0x1f77b4+(-0x31*0x14+0xdf*-0x1b+0xce*0x22)]=_0x5a8c0c[-0x177f+-0x102b+0x5ab*0x7];},Be[_a]=function(_0x66c6e9,_0x4d834e,_0x448bf8){const _0x166745=_0x66c6e9['storageInt'+'32'];_0x166745[_0x448bf8]=_0x4d834e;},Be[ca]=function(_0x1e2e05,_0x222ec7,_0x39bb62){const _0x4e7a5a=_0x1e2e05['storageInt'+'32'];_0x4e7a5a[_0x39bb62]=_0x222ec7[0x1ff6+-0x1d6e*-0x1+0x2*-0x1eb2],_0x4e7a5a[_0x39bb62+(-0x11*-0x247+0x1719*-0x1+-0xf9d*0x1)]=_0x222ec7[0x1157*0x1+0x1cd+-0x1323*0x1];},Be[ha]=function(_0x304b0b,_0x3eb672,_0x4b0f09){const _0xf578a1=_0x304b0b['storageInt'+'32'];_0xf578a1[_0x4b0f09]=_0x3eb672[0x64a+-0x1d9d+0x1753],_0xf578a1[_0x4b0f09+(-0x3*-0x70f+-0x17d4+-0x2*-0x154)]=_0x3eb672[0x1372+-0x254a+0x11d9],_0xf578a1[_0x4b0f09+(-0x1991+0x7*-0x277+0x4*0xab5)]=_0x3eb672[-0x101*0x1+0x1*0x1115+0xb*-0x176];},Be[da]=function(_0x191c80,_0x44c3eb,_0x101cd0){const _0xd875b5=_0x191c80['storageInt'+'32'];_0xd875b5[_0x101cd0]=_0x44c3eb[-0x7*0xd3+-0x1c8d+-0x17e*-0x17],_0xd875b5[_0x101cd0+(-0x1705+0xf62+-0x4*-0x1e9)]=_0x44c3eb[0x20c6+-0x6b*-0x3b+-0x396e],_0xd875b5[_0x101cd0+(-0x22*0xe9+0x2637+0x8f*-0xd)]=_0x44c3eb[-0xa81+-0x1244+-0x1cc7*-0x1],_0xd875b5[_0x101cd0+(-0x3*0xb58+0x1771+0xa9a)]=_0x44c3eb[-0xe63+0xa7e+0x3e8];},Be[_h]=(_0x4ce3e2,_0x4d1c73,_0x13597f)=>{const _0x4cc19b=_0x4ce3e2['storageFlo'+'at32'];_0x4cc19b[_0x13597f]=_0x4d1c73[0x3c8+-0x1*-0xd13+-0x10db],_0x4cc19b[_0x13597f+(0x20f+0x1*0x1c67+-0x1e75)]=_0x4d1c73[0x842+-0x8fe*-0x2+-0x1a3d*0x1],_0x4cc19b[_0x13597f+(0x68a+-0x1923+-0x129d*-0x1)]=_0x4d1c73[-0x3*0x771+0x9*-0x17f+0x11e6*0x2],_0x4cc19b[_0x13597f+(0xb76+0xa9f+-0xb08*0x2)]=_0x4d1c73[0x1*-0x111b+0xec4+-0x25a*-0x1],_0x4cc19b[_0x13597f+(0x1ca1+0x2e3+0x1f*-0x104)]=_0x4d1c73[-0x1161*0x2+-0x1ea1+0x1*0x4167],_0x4cc19b[_0x13597f+(-0x1*-0x1529+-0x61*0xb+-0x5a7*0x3)]=_0x4d1c73[0xb0d+-0x682+-0x486];},Be[On]=(_0x1ba38a,_0xde0f20,_0x3cff0c)=>{const _0x5d2b71=_0x1ba38a['storageFlo'+'at32'];_0x5d2b71[_0x3cff0c]=_0xde0f20[-0x93e+0x8*0x12e+0x1*-0x32],_0x5d2b71[_0x3cff0c+(0x23ad+0x3bd+-0xb1*0x39)]=_0xde0f20[0xb9*0x1b+-0xa18+-0x96a],_0x5d2b71[_0x3cff0c+(-0xda6*-0x1+0x1*-0x8f+0x1*-0xd15)]=_0xde0f20[-0x493+0x12a1+-0xe0c*0x1],_0x5d2b71[_0x3cff0c+(-0x3a*0xe+0x1b*0x1a+0x6*0x13)]=_0xde0f20[0x4*-0x56d+-0x150b*-0x1+0x1*0xac],_0x5d2b71[_0x3cff0c+(-0x41*0x74+-0x22a6+0x401f)]=_0xde0f20[0x73*0x4b+0x598+-0x45d*0x9],_0x5d2b71[_0x3cff0c+(0x23a*0x8+0x1e96+-0x24*0x158)]=_0xde0f20[-0x481*-0x2+0x47a+-0x9*0x17f],_0x5d2b71[_0x3cff0c+(0x2fc*-0x6+0x3cb*0x1+-0xd5*-0x11)]=_0xde0f20[0x1f1e*-0x1+0xd05+-0x121f*-0x1],_0x5d2b71[_0x3cff0c+(-0x1*-0x56e+-0x1e7*0xd+0x1356)]=_0xde0f20[-0x1f3*-0x2+-0x7*0x434+0x198d],_0x5d2b71[_0x3cff0c+(0x1e9*0x2+-0x2f*-0x66+0xb41*-0x2)]=_0xde0f20[0x77e+0x1433*0x1+-0x61*0x49];},Be[ud]=function(_0x45812a,_0x388034,_0x32cb58,_0x495b5c){const _0x5eb729=_0x45812a['storageFlo'+'at32'];for(let _0x11e08d=-0x1db5+0x17*0x6a+0x142f*0x1;_0x11e08d<_0x495b5c;_0x11e08d++)_0x5eb729[_0x32cb58+_0x11e08d*(-0x15b3+-0xd32+0x14b*0x1b)]=_0x388034[_0x11e08d];},Be[pd]=(_0x4a8c93,_0x1b5118,_0x501b89,_0x563a9e)=>{const _0x472091=_0x4a8c93['storageFlo'+'at32'];for(let _0x74abe2=-0x637*-0x2+-0x11ac+-0x2*-0x29f;_0x74abe2<_0x563a9e;_0x74abe2++)_0x472091[_0x501b89+_0x74abe2*(0x2634+0xb0*0x6+-0x2a50)]=_0x1b5118[_0x74abe2*(-0x22db+-0x1f63+0x4240)],_0x472091[_0x501b89+_0x74abe2*(-0x17a7+-0x1*0x7cf+0x1f7a)+(-0x497+-0xf*-0x31+-0x1b9*-0x1)]=_0x1b5118[_0x74abe2*(0xa6c+0x1605+-0x206f)+(0x7*-0x3f1+0x2f*-0x26+0x2292)];},Be[md]=(_0x4b6af2,_0x243f80,_0x5be4a0,_0x544e2f)=>{const _0x5b99f1=_0x4b6af2['storageFlo'+'at32'];for(let _0x368332=0x10*-0x1d8+0x2c1+0x1abf*0x1;_0x368332<_0x544e2f;_0x368332++)_0x5b99f1[_0x5be4a0+_0x368332*(-0x1*0x266b+-0x3c8+0x2a37)]=_0x243f80[_0x368332*(-0x14*-0x6+-0x26a4+-0x17*-0x1a9)],_0x5b99f1[_0x5be4a0+_0x368332*(0x1*-0x14bd+-0x3aa+0x186b)+(-0x1*0xfd9+-0x19*-0xf5+0xd*-0x9f)]=_0x243f80[_0x368332*(0xe5f+-0xb91*-0x2+-0x2*0x12bf)+(0x705*-0x1+0x7*0x472+0x1*-0x1818)],_0x5b99f1[_0x5be4a0+_0x368332*(0x5*-0x19+-0x892*0x2+-0x11a5*-0x1)+(-0x138a+-0x261e+0x39aa)]=_0x243f80[_0x368332*(-0x3d*-0x20+0x16fb+-0xb2*0x2c)+(0x33*-0xb1+0x7f3+0x1b52)];},Be[Fn]=(_0x369f07,_0x5439bc,_0x7d3c07,_0x20a275)=>{const _0x4bb016=_0x369f07['storageUin'+'t32'];_0x4bb016[_0x7d3c07]=_0x5439bc;},Be[Nn]=(_0x375bf8,_0x5c6693,_0xbcef95,_0x2386bc)=>{const _0x429018=_0x375bf8['storageUin'+'t32'];_0x429018[_0xbcef95]=_0x5c6693[-0xc4b+0x471*-0x4+-0x87*-0x39],_0x429018[_0xbcef95+(0x1983+-0x1*-0x122+0x4*-0x6a9)]=_0x5c6693[0xaf0+-0x16*-0x1d+0x1*-0xd6d];},Be[kn]=(_0x5389ad,_0x1c3b53,_0x300daa,_0x4041a1)=>{const _0x30774f=_0x5389ad['storageUin'+'t32'];_0x30774f[_0x300daa]=_0x1c3b53[0xaab*-0x2+-0x1ce6+-0xc8f*-0x4],_0x30774f[_0x300daa+(-0x1e65+-0x9ec+0x2852)]=_0x1c3b53[-0xed3+0x55e*0x5+0x6a*-0x1d],_0x30774f[_0x300daa+(0x2*-0xa0c+0x2329+-0x3*0x505)]=_0x1c3b53[-0x1347+-0x25c6+0x657*0x9];},Be[Un]=(_0x4503de,_0x420edf,_0x47c5cf,_0x528b07)=>{const _0x3b29e9=_0x4503de['storageUin'+'t32'];_0x3b29e9[_0x47c5cf]=_0x420edf[0x66d+-0x23*0xca+-0x23*-0x9b],_0x3b29e9[_0x47c5cf+(-0x4eb*-0x6+-0x109e+0xce3*-0x1)]=_0x420edf[0x1*-0x1765+-0x17*0xa9+0x53*0x77],_0x3b29e9[_0x47c5cf+(0x1*-0x21d2+-0x2*0xc17+0x3a02)]=_0x420edf[0x618+-0x8*0x77+-0x25e],_0x3b29e9[_0x47c5cf+(0x1*0x2429+0x59f+0x275*-0x11)]=_0x420edf[-0x7*-0x473+-0x1f49*0x1+0x27];},Be[Bn]=function(_0x25be11,_0x33a22d,_0x40b81b,_0x2f2dba){const _0x30aab7=_0x25be11['storageInt'+'32'];for(let _0x21559f=-0x5*-0x158+0x1575+0x1c2d*-0x1;_0x21559f<_0x2f2dba;_0x21559f++)_0x30aab7[_0x40b81b+_0x21559f*(0x6b2+0x180f+-0xb7*0x2b)]=_0x33a22d[_0x21559f];},Be[gd]=Be[Bn],Be[_d]=function(_0x921ec,_0x4e3c0f,_0x343d3b,_0x465018){const _0x81d41f=_0x921ec['storageUin'+'t32'];for(let _0x23d736=0x1499*0x1+-0x1*0x73f+0x6ad*-0x2;_0x23d736<_0x465018;_0x23d736++)_0x81d41f[_0x343d3b+_0x23d736*(0x52*0x39+-0x2281*0x1+0x1043)]=_0x4e3c0f[_0x23d736];},Be[zn]=(_0x3d3a96,_0x5c16df,_0x1b0d56,_0x577fe9)=>{const _0x97fe88=_0x3d3a96['storageInt'+'32'];for(let _0xca66=0xc5*0x28+0x1cc*0xb+-0xa1c*0x5;_0xca66<_0x577fe9;_0xca66++)_0x97fe88[_0x1b0d56+_0xca66*(0x66e*0x6+-0x266e+-0x1*0x22)]=_0x5c16df[_0xca66*(-0x22cf+0x1d4f+0x582)],_0x97fe88[_0x1b0d56+_0xca66*(0x4cd*0x1+-0x241+-0x288)+(-0x3d*-0x5f+-0x1*0x182e+0x12*0x16)]=_0x5c16df[_0xca66*(-0x14*0x36+0x4f*0x67+-0x53*0x55)+(-0x1*-0x1d6e+-0x1*0x5c6+-0x7*0x361)];},Be[yd]=Be[zn],Be[Sd]=(_0x209516,_0x6f0206,_0x416003,_0x4b1a9a)=>{const _0x50df7b=_0x209516['storageUin'+'t32'];for(let _0x3b540f=-0xf38*-0x1+0x1*0x153d+0x33*-0xb7;_0x3b540f<_0x4b1a9a;_0x3b540f++)_0x50df7b[_0x416003+_0x3b540f*(-0x522+-0x1867*-0x1+-0x1341)]=_0x6f0206[_0x3b540f*(-0x10c8+0x16de+-0x614)],_0x50df7b[_0x416003+_0x3b540f*(-0x1db5+-0x1*0x82e+0x25e7)+(-0xcbd+-0x1*0x24a3+0x3161*0x1)]=_0x6f0206[_0x3b540f*(0xe66+-0xc66+-0x1fe)+(-0x7*-0x35+-0x2405+-0x35*-0xa7)];},Be[Vn]=(_0x429b65,_0x371213,_0x48d602,_0x519b71)=>{const _0x1fd006=_0x429b65['storageInt'+'32'];for(let _0x20cb6c=-0x185a+-0xa*0x4f+0x1b70;_0x20cb6c<_0x519b71;_0x20cb6c++)_0x1fd006[_0x48d602+_0x20cb6c*(0xc11*0x2+-0x168+-0x16b6)]=_0x371213[_0x20cb6c*(0x1*-0x213b+-0x1*-0x18e+0x138*0x1a)],_0x1fd006[_0x48d602+_0x20cb6c*(0x6*-0x4d2+0x9f8+0x12f8)+(-0x67*0x61+-0x1ded+0x44f5)]=_0x371213[_0x20cb6c*(0x1bb5+-0x4d4*0x8+0xaee)+(0x4*-0x459+-0x847+0x19ac)],_0x1fd006[_0x48d602+_0x20cb6c*(-0x1*0x3+0x15a2+-0x159b)+(-0xb5*0x13+0x17d2+0x1*-0xa61)]=_0x371213[_0x20cb6c*(-0x1300+-0xdeb+0x20ee)+(0xe0c+0x13*0x7d+-0x1751)];},Be[xd]=Be[Vn],Be[vd]=(_0xb6b5de,_0x56604a,_0x1350f0,_0x416579)=>{const _0x29f959=_0xb6b5de['storageUin'+'t32'];for(let _0x2f94fc=-0x2*0x18a+0x1f61*-0x1+0x2275;_0x2f94fc<_0x416579;_0x2f94fc++)_0x29f959[_0x1350f0+_0x2f94fc*(0x1f61+-0x641+0xc8e*-0x2)]=_0x56604a[_0x2f94fc*(-0x36*-0x8b+-0x1*-0xc1+0x25*-0xd0)],_0x29f959[_0x1350f0+_0x2f94fc*(-0x227+-0x14fa+0x1725)+(-0x2412+-0x5b9+0xa73*0x4)]=_0x56604a[_0x2f94fc*(-0xde*-0x1a+-0x2467+-0x2*-0x6ef)+(-0x4*-0x368+-0xe*-0x271+0x2fcd*-0x1)],_0x29f959[_0x1350f0+_0x2f94fc*(0x139+-0x1af*0x6+0x8e5)+(0x6df*-0x1+-0x10e0+0x17c1)]=_0x56604a[_0x2f94fc*(0x1757+0x1ceb+-0x343f)+(0x8a8+0x1166+-0x1a0c)];};class zp{constructor(_0x6d62df,_0x3e724b,_0x574868=!(0x1fd*0x13+-0xe72+-0x1755)){h(this,'device'),h(this,'persistent'),h(this,'allocation'),h(this,'storageFlo'+'at32'),h(this,'storageInt'+'32'),h(this,'storageUin'+'t32'),h(this,'renderVers'+'ionDirty',0x22cc+-0x1192+-0x46*0x3f);if(this['device']=_0x6d62df,this['format']=_0x3e724b,this['persistent']=_0x574868,w['assert'](_0x3e724b),_0x574868){this['impl']=_0x6d62df['createUnif'+'ormBufferI'+'mpl'](this);const _0x2e67ae=new ArrayBuffer(_0x3e724b['byteSize']);this['assignStor'+'age'](new Int32Array(_0x2e67ae)),_0x6d62df['_vram']['ub']+=this['format']['byteSize'];}else this['allocation']=new WT();}['destroy'](){if(this['persistent']){const _0x15cf62=this['device'];this['impl']['destroy'](_0x15cf62),_0x15cf62['_vram']['ub']-=this['format']['byteSize'];}}get['offset'](){return this['persistent']?-0x5*-0x305+0x5ad+-0x14c6:this['allocation']['offset'];}['assignStor'+'age'](_0x14eeea){this['storageInt'+'32']=_0x14eeea,this['storageUin'+'t32']=new Uint32Array(_0x14eeea['buffer'],_0x14eeea['byteOffset'],_0x14eeea['byteLength']/(0x132e+0x1508+0x2ae*-0xf)),this['storageFlo'+'at32']=new Float32Array(_0x14eeea['buffer'],_0x14eeea['byteOffset'],_0x14eeea['byteLength']/(0xd*0x18b+-0x1ec1+0xab6));}['loseContex'+'t'](){var _0xa0c82c;(_0xa0c82c=this['impl'])==null||_0xa0c82c['loseContex'+'t']();}['setUniform'](_0x5245b9,_0x16b76c){w['assert'](_0x5245b9);const _0x18d3d4=_0x5245b9['offset'];if(_0x16b76c!=null){const _0x432b50=Be[_0x5245b9['updateType']];_0x432b50?_0x432b50(this,_0x16b76c,_0x18d3d4,_0x5245b9['count']):this['storageFlo'+'at32']['set'](_0x16b76c,_0x18d3d4);}else w['warnOnce']('Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20to\x20unif'+'orm\x20['+_0x5245b9['name']+('],\x20expecte'+'d\x20type\x20')+Ey[_0x5245b9['type']]+('\x20while\x20ren'+'dering\x20')+Q['toString']());}['set'](_0x3dc1d0,_0x542047){const _0xe80e1f=this['format']['map']['get'](_0x3dc1d0);w['assert'](_0xe80e1f,'Uniform\x20na'+'me\x20['+_0x3dc1d0+(']\x20is\x20not\x20p'+'art\x20of\x20the'+'\x20Uniform\x20b'+'uffer.')),_0xe80e1f&&this['setUniform'](_0xe80e1f,_0x542047);}['startUpdat'+'e'](_0x2fc6db){if(!this['persistent']){const _0x493dbb=this['allocation'],_0x3eb0b1=_0x493dbb['gpuBuffer'];this['device']['dynamicBuf'+'fers']['alloc'](_0x493dbb,this['format']['byteSize']),this['assignStor'+'age'](_0x493dbb['storage']),_0x2fc6db&&(_0x2fc6db['bindGroup']=_0x493dbb['gpuBuffer']['getBindGro'+'up'](this),_0x2fc6db['offsets'][-0x919+0x4*0x3ef+-0x6a3*0x1]=_0x493dbb['offset']),_0x3eb0b1!==_0x493dbb['gpuBuffer']&&(this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion']);}}['endUpdate'](){this['persistent']?this['impl']['unlock'](this):(this['storageFlo'+'at32']=null,this['storageInt'+'32']=null);}['update'](_0x4e85b5){this['startUpdat'+'e'](_0x4e85b5);const _0x4acb8b=this['format']['uniforms'];for(let _0x21dd0f=-0x1e15+-0x9a7*0x1+0x27bc;_0x21dd0f<_0x4acb8b['length'];_0x21dd0f++){const _0x26f9e8=_0x4acb8b[_0x21dd0f]['scopeId']['value'];this['setUniform'](_0x4acb8b[_0x21dd0f],_0x26f9e8);}this['endUpdate']();}}class $T{constructor(){h(this,'frameAlloc'+'ations',[]),h(this,'pastFrameA'+'llocations',new Map()),h(this,'_enabled',!(0x1*0xf95+0x1542+-0x24d6)),h(this,'_enableReq'+'uest',!(0x2f0+-0xc9a*0x2+0x1*0x1645)),h(this,'_frameTime',0x1020+0x4d*-0x6b+0x100f);}['loseContex'+'t'](){this['pastFrameA'+'llocations']['clear']();}set['enabled'](_0x1f036c){this['_enableReq'+'uest']=_0x1f036c;}get['enabled'](){return this['_enableReq'+'uest'];}['processEna'+'bleRequest'](){this['_enableReq'+'uest']!==this['_enabled']&&(this['_enabled']=this['_enableReq'+'uest'],this['_enabled']||(this['_frameTime']=0xe44+-0x16e1+0x89d));}['request'](_0x401493){this['pastFrameA'+'llocations']['set'](_0x401493,this['frameAlloc'+'ations']),this['frameAlloc'+'ations']=[];}['report'](_0x5baa16,_0x519cad){if(_0x519cad){const _0x20acc7=this['pastFrameA'+'llocations']['get'](_0x5baa16);if(w['assert'](_0x20acc7['length']===_0x519cad['length']),_0x519cad['length']>-0x55c+-0x3*-0xb66+-0x2*0xe6b&&(this['_frameTime']=_0x519cad['reduce']((_0x58900c,_0x1e2a0f)=>_0x58900c+_0x1e2a0f,0x1dec+0x21aa+-0x3f96)),mi['get'](Gl)){w['trace'](Gl,'--\x20GPU\x20tim'+'ings\x20for\x20f'+'rame\x20'+_0x5baa16+'\x20--');let _0x1ea52b=-0x77*-0x2b+0x1*0x448+-0x1845;for(let _0x4ec537=-0x25c0+-0x14ab+0x3a6b;_0x4ec537<_0x20acc7['length'];++_0x4ec537){const _0x52d8c6=_0x20acc7[_0x4ec537];_0x1ea52b+=_0x519cad[_0x4ec537],w['trace'](Gl,_0x519cad[_0x4ec537]['toFixed'](0x1*0xa57+-0x5b1*0x4+-0xc6f*-0x1)+'\x20ms\x20'+_0x52d8c6);}w['trace'](Gl,_0x1ea52b['toFixed'](0x1*-0x93a+0xcc+0x870)+'\x20ms\x20TOTAL');}}this['pastFrameA'+'llocations']['delete'](_0x5baa16);}['getSlot'](_0x299fba){const _0x4db9d7=this['frameAlloc'+'ations']['length'];return this['frameAlloc'+'ations']['push'](_0x299fba),_0x4db9d7;}get['slotCount'](){return this['frameAlloc'+'ations']['length'];}}class jy{constructor(){h(this,'bufferId',null);}['destroy'](_0x580c80){this['bufferId']&&(_0x580c80['gl']['deleteBuff'+'er'](this['bufferId']),this['bufferId']=null);}get['initialize'+'d'](){return!!this['bufferId'];}['loseContex'+'t'](){this['bufferId']=null;}['unlock'](_0x105c4b,_0xca00fa,_0x195828,_0x5808d2){const _0xb748fa=_0x105c4b['gl'];if(this['bufferId'])_0xb748fa['bindBuffer'](_0x195828,this['bufferId']),_0xb748fa['bufferSubD'+'ata'](_0x195828,0xb59*0x1+0x1c9a*-0x1+0x1141,_0x5808d2);else{let _0x5eaa42;switch(_0xca00fa){case ms:_0x5eaa42=_0xb748fa['STATIC_DRA'+'W'];break;case lh:_0x5eaa42=_0xb748fa['DYNAMIC_DR'+'AW'];break;case ey:_0x5eaa42=_0xb748fa['STREAM_DRA'+'W'];break;case bx:_0x5eaa42=_0xb748fa['DYNAMIC_CO'+'PY'];break;}this['bufferId']=_0xb748fa['createBuff'+'er'](),_0xb748fa['bindBuffer'](_0x195828,this['bufferId']),_0xb748fa['bufferData'](_0x195828,_0x5808d2,_0x5eaa42);}}}class XT extends jy{constructor(){super(...arguments),h(this,'vao',null);}['destroy'](_0xb19c0d){super['destroy'](_0xb19c0d),_0xb19c0d['unbindVert'+'exArray']();}['loseContex'+'t'](){super['loseContex'+'t'](),this['vao']=null;}['unlock'](_0x1d0c13){const _0x259820=_0x1d0c13['device'];super['unlock'](_0x259820,_0x1d0c13['usage'],_0x259820['gl']['ARRAY_BUFF'+'ER'],_0x1d0c13['storage']);}}class qT extends jy{constructor(_0x2ab72f){super();const _0x3907a6=_0x2ab72f['device']['gl'],_0xb919f7=_0x2ab72f['format'];_0xb919f7===$f?this['glFormat']=_0x3907a6['UNSIGNED_B'+'YTE']:_0xb919f7===Yi?this['glFormat']=_0x3907a6['UNSIGNED_S'+'HORT']:_0xb919f7===wr&&(this['glFormat']=_0x3907a6['UNSIGNED_I'+'NT']);}['unlock'](_0x438c4e){const _0x4a4a88=_0x438c4e['device'];super['unlock'](_0x4a4a88,_0x438c4e['usage'],_0x4a4a88['gl']['ELEMENT_AR'+'RAY_BUFFER'],_0x438c4e['storage']);}}class jT{constructor(_0x1455f5,_0x370b8c,_0x5952ac,_0x357df0){if(this['locationId']=_0x357df0,this['scopeId']=_0x1455f5['scope']['resolve'](_0x370b8c),this['version']=new Uy(),_0x370b8c['substring'](_0x370b8c['length']-(0xfa*-0x25+0x29*0x6d+0x12b0))==='[0]')switch(_0x5952ac){case Xs:_0x5952ac=ud;break;case _a:_0x5952ac=Bn;break;case Fn:_0x5952ac=_d;break;case Tn:_0x5952ac=gd;break;case ga:_0x5952ac=pd;break;case ca:_0x5952ac=zn;break;case Nn:_0x5952ac=Sd;break;case tl:_0x5952ac=yd;break;case ds:_0x5952ac=md;break;case ha:_0x5952ac=Vn;break;case kn:_0x5952ac=vd;break;case sl:_0x5952ac=xd;break;case Rn:_0x5952ac=Lp;break;case da:_0x5952ac=gh;break;case Un:_0x5952ac=Rp;break;case il:_0x5952ac=Op;break;}this['dataType']=_0x5952ac,this['value']=[null,null,null,null],this['array']=[];}}let l_=0x2039*-0x1+-0x341+0x237a;const YT=new Set(['gl_VertexI'+'D','gl_Instanc'+'eID','gl_DrawID','gl_BaseVer'+'tex','gl_BaseIns'+'tance']);class KT{constructor(){h(this,'map',new Map());}['destroy'](_0x4d8fdd){this['map']['forEach'](_0x483e80=>{_0x4d8fdd['gl']['deleteShad'+'er'](_0x483e80);});}['loseContex'+'t'](_0x4a3f2f){this['map']['clear']();}}const ZT=new Kt(),QT=new Kt();class JT{constructor(_0x36b784){h(this,'compileDur'+'ation',0x18bd+0x10*0x61+-0x1ecd),(this['init'](),this['compile'](_0x36b784['device'],_0x36b784),this['link'](_0x36b784['device'],_0x36b784),_0x36b784['device']['shaders']['push'](_0x36b784));}['destroy'](_0x1e109d){this['glProgram']&&(_0x1e109d['device']['gl']['deleteProg'+'ram'](this['glProgram']),this['glProgram']=null);}['init'](){this['uniforms']=[],this['samplers']=[],this['attributes']=[],this['glProgram']=null,this['glVertexSh'+'ader']=null,this['glFragment'+'Shader']=null;}['loseContex'+'t'](){this['init']();}['restoreCon'+'text'](_0x5a2801,_0x245d75){this['compile'](_0x5a2801,_0x245d75),this['link'](_0x5a2801,_0x245d75);}['compile'](_0x368bb5,_0xde3fad){const _0x21ea45=_0xde3fad['definition'];this['glVertexSh'+'ader']=this['_compileSh'+'aderSource'](_0x368bb5,_0x21ea45['vshader'],!(-0x4*0x188+0x77c+-0x15c)),this['glFragment'+'Shader']=this['_compileSh'+'aderSource'](_0x368bb5,_0x21ea45['fshader'],!(0x21+0x32+-0x52));}['link'](_0x1510cb,_0x53400e){if(this['glProgram'])return;const _0x4d22e4=_0x1510cb['gl'];if(_0x4d22e4['isContextL'+'ost']())return;let _0x2343c0=-0x16*-0xdc+0x399*0x2+-0x1a1a*0x1;w['call'](()=>{this['compileDur'+'ation']=-0x1*0x26ad+0x1*0x49d+0x2210,_0x2343c0=de();});const _0x3dbcef=_0x4d22e4['createProg'+'ram']();this['glProgram']=_0x3dbcef,_0x4d22e4['attachShad'+'er'](_0x3dbcef,this['glVertexSh'+'ader']),_0x4d22e4['attachShad'+'er'](_0x3dbcef,this['glFragment'+'Shader']);const _0x5dc0c6=_0x53400e['definition'],_0x17eb0c=_0x5dc0c6['attributes'];if(_0x5dc0c6['useTransfo'+'rmFeedback']){const _0xb7334e=[];for(const _0x4452ed in _0x17eb0c)_0x17eb0c['hasOwnProp'+'erty'](_0x4452ed)&&_0xb7334e['push']('out_'+_0x4452ed);_0x4d22e4['transformF'+'eedbackVar'+'yings'](_0x3dbcef,_0xb7334e,_0x4d22e4['INTERLEAVE'+'D_ATTRIBS']);}const _0xd667d2={};for(const _0x3511c4 in _0x17eb0c)if(_0x17eb0c['hasOwnProp'+'erty'](_0x3511c4)){const _0xcac6f9=_0x17eb0c[_0x3511c4],_0x6d867=Le[_0xcac6f9];w['assert'](!_0xd667d2['hasOwnProp'+'erty'](_0x6d867),'WARNING:\x20T'+'wo\x20attribu'+'tes\x20are\x20ma'+'pped\x20to\x20th'+'e\x20same\x20loc'+'ation\x20in\x20a'+'\x20shader:\x20'+_0xd667d2[_0x6d867]+'\x20and\x20'+_0x3511c4),_0xd667d2[_0x6d867]=_0x3511c4,_0x4d22e4['bindAttrib'+'Location'](_0x3dbcef,_0x6d867,_0x3511c4);}_0x4d22e4['linkProgra'+'m'](_0x3dbcef),w['call'](()=>{this['compileDur'+'ation']=de()-_0x2343c0;}),_0x1510cb['_shaderSta'+'ts']['linked']++,_0x5dc0c6['tag']===Sy&&_0x1510cb['_shaderSta'+'ts']['materialSh'+'aders']++;}['_compileSh'+'aderSource'](_0x281afb,_0x11b189,_0x224e4e){const _0x1c8731=_0x281afb['gl'];if(_0x1c8731['isContextL'+'ost']())return null;const _0xe05a6a=(_0x224e4e?ZT:QT)['get'](_0x281afb,()=>new KT());let _0x3f8a25=_0xe05a6a['map']['get'](_0x11b189);if(!_0x3f8a25){const _0x24bb3c=de();_0x281afb['fire']('shader:com'+'pile:start',{'timestamp':_0x24bb3c,'target':_0x281afb}),_0x3f8a25=_0x1c8731['createShad'+'er'](_0x224e4e?_0x1c8731['VERTEX_SHA'+'DER']:_0x1c8731['FRAGMENT_S'+'HADER']),_0x1c8731['shaderSour'+'ce'](_0x3f8a25,_0x11b189),_0x1c8731['compileSha'+'der'](_0x3f8a25),_0xe05a6a['map']['set'](_0x11b189,_0x3f8a25);const _0x39fee4=de();_0x281afb['fire']('shader:com'+'pile:end',{'timestamp':_0x39fee4,'target':_0x281afb}),_0x281afb['_shaderSta'+'ts']['compileTim'+'e']+=_0x39fee4-_0x24bb3c,_0x224e4e?_0x281afb['_shaderSta'+'ts']['vsCompiled']++:_0x281afb['_shaderSta'+'ts']['fsCompiled']++;}return _0x3f8a25;}['finalize'](_0x32c4ca,_0x505ccb){var _0x5e12a9,_0x332dcd;const _0x20ac1a=_0x32c4ca['gl'];if(_0x20ac1a['isContextL'+'ost']())return!(0x2*0x85c+0xc35+0x1ced*-0x1);const _0xa29a66=this['glProgram'],_0x3d0653=_0x505ccb['definition'],_0x3e8f03=de();_0x32c4ca['fire']('shader:lin'+'k:start',{'timestamp':_0x3e8f03,'target':_0x32c4ca});let _0x10f0f0=-0x179*0x10+0x22e7+-0xb57;if(w['call'](()=>{_0x10f0f0=de();}),!_0x20ac1a['getProgram'+'Parameter'](_0xa29a66,_0x20ac1a['LINK_STATU'+'S'])){if(!this['_isCompile'+'d'](_0x32c4ca,_0x505ccb,this['glVertexSh'+'ader'],_0x3d0653['vshader'],'vertex')||!this['_isCompile'+'d'](_0x32c4ca,_0x505ccb,this['glFragment'+'Shader'],_0x3d0653['fshader'],'fragment'))return!(0x1f5e+0x9*-0x330+-0x2ad);const _0x5aa977='Failed\x20to\x20'+'link\x20shade'+'r\x20program.'+'\x20Error:\x20'+_0x20ac1a['getProgram'+'InfoLog'](_0xa29a66);return _0x3d0653['translated'+'Frag']=(_0x5e12a9=_0x20ac1a['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(0x1*-0xc49+0x1ec4+0xf9*-0x13):_0x5e12a9['getTransla'+'tedShaderS'+'ource'](this['glFragment'+'Shader']),_0x3d0653['translated'+'Vert']=(_0x332dcd=_0x20ac1a['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(0x144f+0xc*-0x2e5+0xe6d):_0x332dcd['getTransla'+'tedShaderS'+'ource'](this['glVertexSh'+'ader']),console['error'](_0x5aa977,_0x3d0653),console['error'](_0x5aa977),!(0x9e4+-0x3a9*-0x3+-0x14de);}const _0x4fcacd=_0x20ac1a['getProgram'+'Parameter'](_0xa29a66,_0x20ac1a['ACTIVE_ATT'+'RIBUTES']);_0x505ccb['attributes']['clear']();for(let _0x865109=0xb90+-0x7*-0x526+-0xfde*0x3;_0x865109<_0x4fcacd;_0x865109++){const _0x236b43=_0x20ac1a['getActiveA'+'ttrib'](_0xa29a66,_0x865109),_0x33ce9c=_0x20ac1a['getAttribL'+'ocation'](_0xa29a66,_0x236b43['name']);YT['has'](_0x236b43['name'])||(_0x3d0653['attributes'][_0x236b43['name']]===void(-0xb1*-0x12+-0x1ef5+0x1283)?(console['error']('Vertex\x20sha'+'der\x20attrib'+'ute\x20\x22'+_0x236b43['name']+('\x22\x20is\x20not\x20m'+'apped\x20to\x20a'+'\x20semantic\x20'+'in\x20shader\x20'+'definition'+',\x20shader\x20[')+_0x505ccb['label']+']',_0x505ccb),_0x505ccb['failed']=!(0x2*0x567+-0x838*0x4+0x1612)):_0x505ccb['attributes']['set'](_0x33ce9c,_0x236b43['name']));}const _0x27756d=_0x32c4ca['_samplerTy'+'pes'],_0x56b9d4=_0x20ac1a['getProgram'+'Parameter'](_0xa29a66,_0x20ac1a['ACTIVE_UNI'+'FORMS']);for(let _0x39932b=0xe2*0x1+0x152d+-0x1*0x160f;_0x39932b<_0x56b9d4;_0x39932b++){const _0x3eae8e=_0x20ac1a['getActiveU'+'niform'](_0xa29a66,_0x39932b),_0xf35657=_0x20ac1a['getUniform'+'Location'](_0xa29a66,_0x3eae8e['name']),_0x36c3dc=new jT(_0x32c4ca,_0x3eae8e['name'],_0x32c4ca['pcUniformT'+'ype'][_0x3eae8e['type']],_0xf35657);_0x27756d['has'](_0x3eae8e['type'])?this['samplers']['push'](_0x36c3dc):this['uniforms']['push'](_0x36c3dc);}_0x505ccb['ready']=!(-0x94*0x34+0x479*-0x2+0x2702);const _0x4fa04b=de();return _0x32c4ca['fire']('shader:lin'+'k:end',{'timestamp':_0x4fa04b,'target':_0x32c4ca}),_0x32c4ca['_shaderSta'+'ts']['compileTim'+'e']+=_0x4fa04b-_0x3e8f03,w['call'](()=>{const _0x39f2e7=de()-_0x10f0f0;this['compileDur'+'ation']+=_0x39f2e7,l_+=this['compileDur'+'ation'],w['trace']($0,'[id:\x20'+_0x505ccb['id']+']\x20'+_0x505ccb['name']+':\x20'+this['compileDur'+'ation']['toFixed'](-0x1b5d+-0xe15+-0x51*-0x83)+('ms,\x20TOTAL:'+'\x20')+l_['toFixed'](0x2414+-0x12cb+-0x1*0x1148)+'ms');}),!(0x14c6+0x8e1+0x1*-0x1da7);}['_isCompile'+'d'](_0xe031c4,_0x4e51d0,_0x318a6b,_0x122824,_0x58fb38){const _0x2fdad2=_0xe031c4['gl'];if(!_0x2fdad2['getShaderP'+'arameter'](_0x318a6b,_0x2fdad2['COMPILE_ST'+'ATUS'])){const _0x19bc0a=_0x2fdad2['getShaderI'+'nfoLog'](_0x318a6b),[_0x56941e,_0x2af5d3]=this['_processEr'+'ror'](_0x122824,_0x19bc0a),_0x2cb9e4='Failed\x20to\x20'+'compile\x20'+_0x58fb38+'\x20shader:\x0a\x0a'+_0x19bc0a+'\x0a'+_0x56941e+('\x20while\x20ren'+'dering\x20')+Q['toString']();return _0x2af5d3['shader']=_0x4e51d0,console['error'](_0x2cb9e4,_0x2af5d3),console['error'](_0x2cb9e4),!(-0x47*0x1+0x2af*0x8+-0x1530);}return!(0x25fb+0x1*0xe23+0x3b9*-0xe);}['isLinked'](_0x422569){const {extParallelShaderCompile:_0x5a516b}=_0x422569;return _0x5a516b?_0x422569['gl']['getProgram'+'Parameter'](this['glProgram'],_0x5a516b['COMPLETION'+'_STATUS_KH'+'R']):!(-0x20d3+0x184c+0x887);}['_processEr'+'ror'](_0x5e8a2a,_0x17dbb9){const _0x3793c0={};let _0xc3c88c='';if(_0x5e8a2a){const _0x431742=_0x5e8a2a['split']('\x0a');let _0x2f9adb=-0x70f*-0x1+0x8*-0x3bf+0x73*0x33,_0x4a2f5d=_0x431742['length'];if(_0x17dbb9&&_0x17dbb9['startsWith']('ERROR:')){const _0x4aaa56=_0x17dbb9['match'](/^ERROR:\s(\d+):(\d+):\s*(.+)/);_0x4aaa56&&(_0x3793c0['message']=_0x4aaa56[-0x11f8+-0x1bdf+-0x1*-0x2dda],_0x3793c0['line']=parseInt(_0x4aaa56[-0xf*0x67+0x3a6*0x7+0xd9*-0x17],-0x9bb+0x7*0x1+0x4df*0x2),_0x2f9adb=Math['max'](0x16*-0xe6+0x268b+0x17*-0xd1,_0x3793c0['line']-(0xf0e+0x531+-0x1f*0xa7)),_0x4a2f5d=Math['min'](_0x431742['length'],_0x3793c0['line']+(0x35*-0xb3+0x1091+0x59*0x3b)));}for(let _0x5e2622=_0x2f9adb;_0x5e2622<_0x4a2f5d;_0x5e2622++){const _0x1a24ef=_0x5e2622+(-0x25d2*-0x1+-0x12d6+-0x12fb)===_0x3793c0['line']?'>\x20':'\x20\x20';_0xc3c88c+=''+_0x1a24ef+(_0x5e2622+(0x1*-0xf61+-0x1ae+-0x10*-0x111))+':\x09'+_0x431742[_0x5e2622]+'\x0a';}_0x3793c0['source']=_0x5e8a2a;}return[_0xc3c88c,_0x3793c0];}}function c_(_0x1ae300,_0xf42ed2){const _0x4d9878=_0x1ae300['width'],_0x285865=_0x1ae300['height'];if(_0x4d9878>_0xf42ed2||_0x285865>_0xf42ed2){const _0xe85e8e=_0xf42ed2/Math['max'](_0x4d9878,_0x285865),_0x32090d=Math['floor'](_0x4d9878*_0xe85e8e),_0x1765ca=Math['floor'](_0x285865*_0xe85e8e);w['warn']('Image\x20dime'+'nsions\x20lar'+'ger\x20than\x20m'+'ax\x20support'+'ed\x20texture'+'\x20size\x20of\x20'+_0xf42ed2+('.\x20Resizing'+'\x20from\x20')+_0x4d9878+',\x20'+_0x285865+'\x20to\x20'+_0x32090d+',\x20'+_0x1765ca+'.');const _0xb05aea=document['createElem'+'ent']('canvas');return _0xb05aea['width']=_0x32090d,_0xb05aea['height']=_0x1765ca,_0xb05aea['getContext']('2d')['drawImage'](_0x1ae300,0xc7*-0x12+-0x3ce*0x6+0x623*0x6,0x6*-0x3ec+0x40*0x3+0x16c8,_0x4d9878,_0x285865,-0x3*-0x902+0xc*0x22a+-0x34fe,-0x1488+0x233b*0x1+-0xeb3*0x1,_0x32090d,_0x1765ca),_0xb05aea;}return _0x1ae300;}class ew{constructor(_0x35be85){h(this,'_glTexture',null),h(this,'_glTarget'),h(this,'_glFormat'),h(this,'_glInterna'+'lFormat'),h(this,'_glPixelTy'+'pe'),h(this,'_glCreated'),h(this,'dirtyParam'+'eterFlags',-0xbe9+0x1153+-0x56a),this['texture']=_0x35be85;}['destroy'](_0x49b9fb){if(this['_glTexture']){for(let _0x399e67=0x105c+-0x42*0x53+0x50a;_0x399e67<_0x49b9fb['textureUni'+'ts']['length'];_0x399e67++){const _0x28cbe2=_0x49b9fb['textureUni'+'ts'][_0x399e67];for(let _0x9306cf=0x141e+0x1394+0x1*-0x27b2;_0x9306cf<_0x28cbe2['length'];_0x9306cf++)_0x28cbe2[_0x9306cf]===this['_glTexture']&&(_0x28cbe2[_0x9306cf]=null);}_0x49b9fb['gl']['deleteText'+'ure'](this['_glTexture']),this['_glTexture']=null;}}['loseContex'+'t'](){this['_glTexture']=null;}['propertyCh'+'anged'](_0x3e9563){this['dirtyParam'+'eterFlags']|=_0x3e9563;}['initialize'](_0x6094c3,_0x8eaf53){const _0xe8604=_0x6094c3['gl'];switch(this['_glTexture']=_0xe8604['createText'+'ure'](),this['_glTarget']=_0x8eaf53['_cubemap']?_0xe8604['TEXTURE_CU'+'BE_MAP']:_0x8eaf53['_volume']?_0xe8604['TEXTURE_3D']:_0x8eaf53['array']?_0xe8604['TEXTURE_2D'+'_ARRAY']:_0xe8604['TEXTURE_2D'],_0x8eaf53['_format']){case ty:this['_glFormat']=_0xe8604['ALPHA'],this['_glInterna'+'lFormat']=_0xe8604['ALPHA'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_B'+'YTE'];break;case sy:this['_glFormat']=_0xe8604['LUMINANCE'],this['_glInterna'+'lFormat']=_0xe8604['LUMINANCE'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_B'+'YTE'];break;case ap:this['_glFormat']=_0xe8604['LUMINANCE_'+'ALPHA'],this['_glInterna'+'lFormat']=_0xe8604['LUMINANCE_'+'ALPHA'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_B'+'YTE'];break;case Ep:this['_glFormat']=_0xe8604['RED'],this['_glInterna'+'lFormat']=_0xe8604['R8'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_B'+'YTE'];break;case bp:this['_glFormat']=_0xe8604['RG'],this['_glInterna'+'lFormat']=_0xe8604['RG8'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_B'+'YTE'];break;case Jh:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0xe8604['RGB565'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_S'+'HORT_5_6_5'];break;case np:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0xe8604['RGB5_A1'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_S'+'HORT_5_5_5'+'_1'];break;case ed:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0xe8604['RGBA4'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_S'+'HORT_4_4_4'+'_4'];break;case Cr:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0xe8604['RGB8'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_B'+'YTE'];break;case Ne:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0xe8604['RGBA8'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_B'+'YTE'];break;case ny:case hy:w['error']('BGRA8\x20and\x20'+'SBGRA8\x20tex'+'ture\x20forma'+'ts\x20are\x20not'+'\x20supported'+'\x20by\x20WebGL.');break;case td:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGB_S3TC_'+'DXT1_EXT'];break;case op:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT3_EXT'];break;case vl:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT5_EXT'];break;case id:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'ETC1']['COMPRESSED'+'_RGB_ETC1_'+'WEBGL'];break;case xl:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_2BPPV1_IM'+'G'];break;case Tl:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_2BPPV1_I'+'MG'];break;case rd:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_4BPPV1_IM'+'G'];break;case ad:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_4BPPV1_I'+'MG'];break;case cp:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGB8_ETC2'];break;case hp:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGBA8_ETC'+'2_EAC'];break;case iy:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_RGBA_ASTC'+'_4x4_KHR'];break;case ry:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGB_ATC_W'+'EBGL'];break;case ay:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGBA_ATC_'+'INTERPOLAT'+'ED_ALPHA_W'+'EBGL'];break;case dy:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0x6094c3['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'SIGNED_FLO'+'AT_EXT'];break;case fy:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0x6094c3['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'UNSIGNED_F'+'LOAT_EXT'];break;case uy:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0x6094c3['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGBA_BPTC'+'_UNORM_EXT'];break;case Xf:this['_glFormat']=_0xe8604['SRGB'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_S3TC'+'_DXT1_EXT'];break;case qf:this['_glFormat']=_0xe8604['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'3_EXT'];break;case jf:this['_glFormat']=_0xe8604['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'5_EXT'];break;case Yf:this['_glFormat']=_0xe8604['SRGB'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ETC'+'2'];break;case Kf:this['_glFormat']=_0xe8604['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ETC2_E'+'AC'];break;case Zf:this['_glFormat']=_0xe8604['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x6094c3['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ASTC_4'+'x4_KHR'];break;case Qf:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0x6094c3['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_SRGB_ALPH'+'A_BPTC_UNO'+'RM_EXT'];break;case od:this['_glFormat']=_0xe8604['RED'],this['_glInterna'+'lFormat']=_0xe8604['R16F'],this['_glPixelTy'+'pe']=_0xe8604['HALF_FLOAT'];break;case wp:this['_glFormat']=_0xe8604['RG'],this['_glInterna'+'lFormat']=_0xe8604['RG16F'],this['_glPixelTy'+'pe']=_0xe8604['HALF_FLOAT'];break;case ui:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0xe8604['RGB16F'],this['_glPixelTy'+'pe']=_0xe8604['HALF_FLOAT'];break;case nt:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0xe8604['RGBA16F'],this['_glPixelTy'+'pe']=_0xe8604['HALF_FLOAT'];break;case Ye:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0xe8604['RGB32F'],this['_glPixelTy'+'pe']=_0xe8604['FLOAT'];break;case Xt:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0xe8604['RGBA32F'],this['_glPixelTy'+'pe']=_0xe8604['FLOAT'];break;case Ji:this['_glFormat']=_0xe8604['RED'],this['_glInterna'+'lFormat']=_0xe8604['R32F'],this['_glPixelTy'+'pe']=_0xe8604['FLOAT'];break;case $i:this['_glFormat']=_0xe8604['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0xe8604['DEPTH_COMP'+'ONENT32F'],this['_glPixelTy'+'pe']=_0xe8604['FLOAT'];break;case vn:this['_glFormat']=_0xe8604['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0xe8604['DEPTH_COMP'+'ONENT16'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_S'+'HORT'];break;case sd:this['_glFormat']=_0xe8604['DEPTH_STEN'+'CIL'],this['_glInterna'+'lFormat']=_0xe8604['DEPTH24_ST'+'ENCIL8'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_I'+'NT_24_8'];break;case In:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0xe8604['R11F_G11F_'+'B10F'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_I'+'NT_10F_11F'+'_11F_REV'];break;case lp:this['_glFormat']=_0xe8604['RGB'],this['_glInterna'+'lFormat']=_0xe8604['SRGB8'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_B'+'YTE'];break;case _s:this['_glFormat']=_0xe8604['RGBA'],this['_glInterna'+'lFormat']=_0xe8604['SRGB8_ALPH'+'A8'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_B'+'YTE'];break;case dp:this['_glFormat']=_0xe8604['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0xe8604['R8I'],this['_glPixelTy'+'pe']=_0xe8604['BYTE'];break;case oy:this['_glFormat']=_0xe8604['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0xe8604['R8UI'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_B'+'YTE'];break;case fp:this['_glFormat']=_0xe8604['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0xe8604['R16I'],this['_glPixelTy'+'pe']=_0xe8604['SHORT'];break;case up:this['_glFormat']=_0xe8604['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0xe8604['R16UI'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_S'+'HORT'];break;case pp:this['_glFormat']=_0xe8604['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0xe8604['R32I'],this['_glPixelTy'+'pe']=_0xe8604['INT'];break;case Ki:this['_glFormat']=_0xe8604['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0xe8604['R32UI'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_I'+'NT'];break;case mp:this['_glFormat']=_0xe8604['RG_INTEGER'],this['_glInterna'+'lFormat']=_0xe8604['RG8I'],this['_glPixelTy'+'pe']=_0xe8604['BYTE'];break;case ly:this['_glFormat']=_0xe8604['RG_INTEGER'],this['_glInterna'+'lFormat']=_0xe8604['RG8UI'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_B'+'YTE'];break;case _p:this['_glFormat']=_0xe8604['RG_INTEGER'],this['_glInterna'+'lFormat']=_0xe8604['RG16I'],this['_glPixelTy'+'pe']=_0xe8604['SHORT'];break;case gp:this['_glFormat']=_0xe8604['RG_INTEGER'],this['_glInterna'+'lFormat']=_0xe8604['RG16UI'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_S'+'HORT'];break;case Sp:this['_glFormat']=_0xe8604['RG_INTEGER'],this['_glInterna'+'lFormat']=_0xe8604['RG32I'],this['_glPixelTy'+'pe']=_0xe8604['INT'];break;case yp:this['_glFormat']=_0xe8604['RG_INTEGER'],this['_glInterna'+'lFormat']=_0xe8604['RG32UI'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_I'+'NT'];break;case vp:this['_glFormat']=_0xe8604['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0xe8604['RGBA8I'],this['_glPixelTy'+'pe']=_0xe8604['BYTE'];break;case cy:this['_glFormat']=_0xe8604['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0xe8604['RGBA8UI'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_B'+'YTE'];break;case xp:this['_glFormat']=_0xe8604['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0xe8604['RGBA16I'],this['_glPixelTy'+'pe']=_0xe8604['SHORT'];break;case nd:this['_glFormat']=_0xe8604['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0xe8604['RGBA16UI'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_S'+'HORT'];break;case Tp:this['_glFormat']=_0xe8604['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0xe8604['RGBA32I'],this['_glPixelTy'+'pe']=_0xe8604['INT'];break;case Ue:this['_glFormat']=_0xe8604['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0xe8604['RGBA32UI'],this['_glPixelTy'+'pe']=_0xe8604['UNSIGNED_I'+'NT'];break;}this['_glCreated']=!(0x9d*0x1+0x5*-0x4c7+-0x65*-0x3b);}['upload'](_0x53ca24,_0x240871){w['assert'](_0x240871['device'],'Attempting'+'\x20to\x20use\x20a\x20'+'texture\x20th'+'at\x20has\x20bee'+'n\x20destroye'+'d.',_0x240871);const _0x3c0cf1=_0x53ca24['gl'];if(!_0x240871['_needsUplo'+'ad']&&(_0x240871['_needsMipm'+'apsUpload']&&_0x240871['_mipmapsUp'+'loaded']||!_0x240871['pot']))return;let _0x487928=-0x1*-0xb1d+-0xfd0+0x4b3*0x1,_0x598977,_0x47eef9;const _0x4bcb49=_0x240871['numLevels'];for(_0x240871['array']&&_0x3c0cf1['texStorage'+'3D'](_0x3c0cf1['TEXTURE_2D'+'_ARRAY'],_0x4bcb49,this['_glInterna'+'lFormat'],_0x240871['_width'],_0x240871['_height'],_0x240871['_arrayLeng'+'th']);_0x240871['_levels'][_0x487928]||_0x487928===0x5a6+0x33f*-0x7+-0x2f*-0x5d;){if(!_0x240871['_needsUplo'+'ad']&&_0x487928===-0x190f+0x43a*-0x5+0x2e31){_0x487928++;continue;}else{if(_0x487928&&(!_0x240871['_needsMipm'+'apsUpload']||!_0x240871['_mipmaps']))break;}if(_0x598977=_0x240871['_levels'][_0x487928],_0x47eef9=(-0x33e*0x6+-0xdf6+-0x91*-0x3b)/Math['pow'](-0x1*0x25ed+0xd*0x244+-0xa7*-0xd,_0x487928),_0x487928===0x64c+0xa4f+-0x352*0x5&&!_0x240871['_compresse'+'d']&&!_0x240871['_integerFo'+'rmat']&&_0x240871['_levels']['length']<_0x4bcb49&&(_0x3c0cf1['generateMi'+'pmap'](this['_glTarget']),_0x240871['_mipmapsUp'+'loaded']=!(-0x1789+-0x16df+0x2e68)),_0x240871['_cubemap']){let _0x4137ef;if(_0x53ca24['_isBrowser'+'Interface'](_0x598977[0x1937+-0x25df+-0xc*-0x10e]))for(_0x4137ef=0x123e+0x8ad*-0x2+-0x26*0x6;_0x4137ef<0x305*-0x1+-0x108e+0x1399;_0x4137ef++){if(!_0x240871['_levelsUpd'+'ated'][-0x1*-0x125+-0x1*-0x1df+-0x1*0x304][_0x4137ef])continue;let _0x16dda5=_0x598977[_0x4137ef];_0x53ca24['_isImageBr'+'owserInter'+'face'](_0x16dda5)&&(_0x16dda5['width']>_0x53ca24['maxCubeMap'+'Size']||_0x16dda5['height']>_0x53ca24['maxCubeMap'+'Size'])&&(_0x16dda5=c_(_0x16dda5,_0x53ca24['maxCubeMap'+'Size']),_0x487928===-0x1f71+-0x11a1+0x3112&&(_0x240871['_width']=_0x16dda5['width'],_0x240871['_height']=_0x16dda5['height'])),_0x53ca24['setUnpackF'+'lipY'](!(0x1c0a+0xaad*0x3+0x10*-0x3c1)),_0x53ca24['setUnpackP'+'remultiply'+'Alpha'](_0x240871['_premultip'+'lyAlpha']),this['_glCreated']?_0x3c0cf1['texSubImag'+'e2D'](_0x3c0cf1['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x4137ef,_0x487928,0xb51*-0x3+0x1*0x1215+0xfde,-0x6a2+0x3c7*0x7+-0x13cf*0x1,this['_glFormat'],this['_glPixelTy'+'pe'],_0x16dda5):_0x3c0cf1['texImage2D'](_0x3c0cf1['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x4137ef,_0x487928,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x16dda5);}else for(_0x47eef9=(-0x47*-0x29+-0x5b*0xd+-0x6bf)/Math['pow'](0x1eb*0x13+0xb01*0x2+-0x137b*0x3,_0x487928),_0x4137ef=0x17f*0x1a+-0x567*0x7+-0x115;_0x4137ef<-0x145c+0x1a12+0x8*-0xb6;_0x4137ef++){if(!_0x240871['_levelsUpd'+'ated'][0x7*0x9b+-0x1e88+0x1a4b][_0x4137ef])continue;const _0x4b29e5=_0x598977[_0x4137ef];_0x240871['_compresse'+'d']?this['_glCreated']&&_0x4b29e5?_0x3c0cf1['compressed'+'TexSubImag'+'e2D'](_0x3c0cf1['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x4137ef,_0x487928,0x1d2*-0x7+-0x1*-0x223+0xa9b,-0x26*0x1f+0x559*0x1+-0xbf,Math['max'](_0x240871['_width']*_0x47eef9,-0x15a4+-0x11d5+0x277a),Math['max'](_0x240871['_height']*_0x47eef9,-0x10e3+-0x1a69*0x1+0x2b4d),this['_glInterna'+'lFormat'],_0x4b29e5):_0x3c0cf1['compressed'+'TexImage2D'](_0x3c0cf1['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x4137ef,_0x487928,this['_glInterna'+'lFormat'],Math['max'](_0x240871['_width']*_0x47eef9,0x838*0x3+0x1dee+-0x3695),Math['max'](_0x240871['_height']*_0x47eef9,0x1*-0xeb1+-0x7e9+0x169b),-0x1*-0x2203+0x1826+0x15*-0x2c5,_0x4b29e5):(_0x53ca24['setUnpackF'+'lipY'](!(-0xa*0x2f9+-0x270b+0x44c6)),_0x53ca24['setUnpackP'+'remultiply'+'Alpha'](_0x240871['_premultip'+'lyAlpha']),this['_glCreated']&&_0x4b29e5?_0x3c0cf1['texSubImag'+'e2D'](_0x3c0cf1['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x4137ef,_0x487928,-0x4c*0x71+0x784+0x1a08,-0x1c4b*0x1+-0x2c*0x67+-0x2dff*-0x1,Math['max'](_0x240871['_width']*_0x47eef9,-0xdca+-0x124*-0x8+0x5*0xef),Math['max'](_0x240871['_height']*_0x47eef9,0x1*-0xbab+-0x18af*0x1+0x245b),this['_glFormat'],this['_glPixelTy'+'pe'],_0x4b29e5):_0x3c0cf1['texImage2D'](_0x3c0cf1['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x4137ef,_0x487928,this['_glInterna'+'lFormat'],Math['max'](_0x240871['_width']*_0x47eef9,0x40*0x68+0x1c60+-0x1f*0x1c1),Math['max'](_0x240871['_height']*_0x47eef9,-0x2645+0xa*-0x107+0x308c),-0x1*-0x137+-0x13f4+0x12bd,this['_glFormat'],this['_glPixelTy'+'pe'],_0x4b29e5));}}else{if(_0x240871['_volume'])_0x240871['_compresse'+'d']?_0x3c0cf1['compressed'+'TexImage3D'](_0x3c0cf1['TEXTURE_3D'],_0x487928,this['_glInterna'+'lFormat'],Math['max'](_0x240871['_width']*_0x47eef9,0x434+-0x139*0x1+0x2fa*-0x1),Math['max'](_0x240871['_height']*_0x47eef9,0x203c*0x1+0x994+-0x8b*0x4d),Math['max'](_0x240871['_depth']*_0x47eef9,0x1*0x1ac+-0x3*-0x3df+-0xd48),-0x5*-0x5a5+0x1df7+-0x850*0x7,_0x598977):(_0x53ca24['setUnpackF'+'lipY'](!(-0x25a+-0x1eb9*0x1+-0x3a*-0x92)),_0x53ca24['setUnpackP'+'remultiply'+'Alpha'](_0x240871['_premultip'+'lyAlpha']),_0x3c0cf1['texImage3D'](_0x3c0cf1['TEXTURE_3D'],_0x487928,this['_glInterna'+'lFormat'],Math['max'](_0x240871['_width']*_0x47eef9,0x1504+-0x11d3+-0x330),Math['max'](_0x240871['_height']*_0x47eef9,-0x1*-0xc73+-0x8b3*0x3+0x48d*0x3),Math['max'](_0x240871['_depth']*_0x47eef9,-0x8fc+0x1bad+-0xd*0x170),-0xb*0x123+-0x1e1*0x13+0x2*0x181a,this['_glFormat'],this['_glPixelTy'+'pe'],_0x598977));else{if(_0x240871['array']&&typeof _0x598977=='object'){if(_0x240871['_arrayLeng'+'th']===_0x598977['length']){if(_0x240871['_compresse'+'d']){for(let _0x32d438=-0x26dc+-0x137*-0x10+0x1*0x136c;_0x32d438<_0x240871['_arrayLeng'+'th'];_0x32d438++)_0x3c0cf1['compressed'+'TexSubImag'+'e3D'](_0x3c0cf1['TEXTURE_2D'+'_ARRAY'],_0x487928,-0xe6d+-0x5*0x45a+-0x1*-0x242f,0x4d*0x1c+-0x17cb+0xf5f,_0x32d438,Math['max'](Math['floor'](_0x240871['_width']*_0x47eef9),0x216a+-0x17ea+-0x97f),Math['max'](Math['floor'](_0x240871['_height']*_0x47eef9),0x12c5*-0x1+0x146b+-0x1a5),-0x1ba1+-0x127*-0xd+0xca7,this['_glInterna'+'lFormat'],_0x598977[_0x32d438]);}else{for(let _0x128da9=-0x12c4+0x24a5+-0x11e1;_0x128da9<_0x240871['_arrayLeng'+'th'];_0x128da9++)_0x3c0cf1['texSubImag'+'e3D'](_0x3c0cf1['TEXTURE_2D'+'_ARRAY'],_0x487928,0x21b8+-0x1*-0xa89+-0x1*0x2c41,-0x9bf+0x7e+0x1*0x941,_0x128da9,Math['max'](Math['floor'](_0x240871['_width']*_0x47eef9),0x1*0x1e4a+0x7c9*-0x5+0x1*0x8a4),Math['max'](Math['floor'](_0x240871['_height']*_0x47eef9),-0x2*0x599+0x1405+-0x469*0x2),0x289+0x1d*0x86+-0x2*0x8db,this['_glFormat'],this['_glPixelTy'+'pe'],_0x598977[_0x128da9]);}}}else{if(_0x53ca24['_isBrowser'+'Interface'](_0x598977)){_0x53ca24['_isImageBr'+'owserInter'+'face'](_0x598977)&&(_0x598977['width']>_0x53ca24['maxTexture'+'Size']||_0x598977['height']>_0x53ca24['maxTexture'+'Size'])&&(_0x598977=c_(_0x598977,_0x53ca24['maxTexture'+'Size']),_0x487928===-0x2*-0xd63+-0x1242+-0x884&&(_0x240871['_width']=_0x598977['width'],_0x240871['_height']=_0x598977['height']));const _0x4c306c=_0x598977['width']||_0x598977['videoWidth'],_0x544bbe=_0x598977['height']||_0x598977['videoHeigh'+'t'];_0x53ca24['setUnpackF'+'lipY'](_0x240871['_flipY']),_0x53ca24['setUnpackP'+'remultiply'+'Alpha'](_0x240871['_premultip'+'lyAlpha']),this['_glCreated']&&_0x240871['_width']===_0x4c306c&&_0x240871['_height']===_0x544bbe&&!_0x53ca24['_isImageVi'+'deoInterfa'+'ce'](_0x598977)?_0x3c0cf1['texSubImag'+'e2D'](_0x3c0cf1['TEXTURE_2D'],_0x487928,0xa34+-0x1*0x123+-0x911,0x287+-0x1e56+-0x945*-0x3,this['_glFormat'],this['_glPixelTy'+'pe'],_0x598977):(_0x3c0cf1['texImage2D'](_0x3c0cf1['TEXTURE_2D'],_0x487928,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x598977),_0x487928===-0x99b*0x2+-0x1180+0x24b6&&(_0x240871['_width']=_0x4c306c,_0x240871['_height']=_0x544bbe));}else _0x47eef9=(0x20*-0x12f+-0x5*-0x6b9+0x444)/Math['pow'](0x1958*0x1+-0xa*-0xd8+-0x189*0x16,_0x487928),_0x240871['_compresse'+'d']?this['_glCreated']&&_0x598977?_0x3c0cf1['compressed'+'TexSubImag'+'e2D'](_0x3c0cf1['TEXTURE_2D'],_0x487928,0x1633+-0x2167+0xb34,-0x3*-0x6c2+0x92*-0x22+-0xe2,Math['max'](Math['floor'](_0x240871['_width']*_0x47eef9),0x2*0x31d+0x24bd+0x1*-0x2af6),Math['max'](Math['floor'](_0x240871['_height']*_0x47eef9),0x862+0xa8d*0x2+-0x1d7b),this['_glInterna'+'lFormat'],_0x598977):_0x3c0cf1['compressed'+'TexImage2D'](_0x3c0cf1['TEXTURE_2D'],_0x487928,this['_glInterna'+'lFormat'],Math['max'](Math['floor'](_0x240871['_width']*_0x47eef9),0x17a2*0x1+0x13a6+-0x2b47),Math['max'](Math['floor'](_0x240871['_height']*_0x47eef9),-0xaa+-0x976+0xa21*0x1),0x6a*0x47+-0x13d*0x1d+0x683,_0x598977):(_0x53ca24['setUnpackF'+'lipY'](!(-0x3*-0x39f+-0xd71+0x295)),_0x53ca24['setUnpackP'+'remultiply'+'Alpha'](_0x240871['_premultip'+'lyAlpha']),this['_glCreated']&&_0x598977?_0x3c0cf1['texSubImag'+'e2D'](_0x3c0cf1['TEXTURE_2D'],_0x487928,0x9*0x24f+-0x4*0x204+-0xcb7,-0x29c*-0x8+-0x641*-0x3+0x1*-0x27a3,Math['max'](_0x240871['_width']*_0x47eef9,-0xe2a+0xf0+0xd3b),Math['max'](_0x240871['_height']*_0x47eef9,0x85c+0x27*0x8a+0x45*-0x6d),this['_glFormat'],this['_glPixelTy'+'pe'],_0x598977):_0x3c0cf1['texImage2D'](_0x3c0cf1['TEXTURE_2D'],_0x487928,this['_glInterna'+'lFormat'],Math['max'](_0x240871['_width']*_0x47eef9,0x427*0x7+-0x2c*-0x77+0x18c2*-0x2),Math['max'](_0x240871['_height']*_0x47eef9,0x1931+0x1c87*0x1+-0x35b7),-0xe2*0x20+-0x13*-0xef+0xa83,this['_glFormat'],this['_glPixelTy'+'pe'],_0x598977));_0x487928===0x6*0x375+0x13*-0x191+0x905*0x1?_0x240871['_mipmapsUp'+'loaded']=!(-0xd27+0xd72+-0x1*0x4a):_0x240871['_mipmapsUp'+'loaded']=!(0xfd4*0x1+0x11a3+0x1*-0x2177);}}}_0x487928++;}if(_0x240871['_needsUplo'+'ad']){if(_0x240871['_cubemap']){for(let _0x3d203c=0x1459*0x1+-0xf3d*0x2+0xa21;_0x3d203c<-0x7*0x413+-0x793+-0x86*-0x45;_0x3d203c++)_0x240871['_levelsUpd'+'ated'][-0x1e1f+-0x1*-0xca6+0x1179][_0x3d203c]=!(0x32b*-0x4+0x9d*0x14+0x69);}else _0x240871['_levelsUpd'+'ated'][0x1*-0x1601+-0x1f53+0xd55*0x4]=!(-0x312+-0x1552+0x5*0x4e1);}!_0x240871['_compresse'+'d']&&!_0x240871['_integerFo'+'rmat']&&_0x240871['_mipmaps']&&_0x240871['_needsMipm'+'apsUpload']&&_0x240871['_levels']['length']===0x2*-0x647+-0xef5+0x1b84&&(_0x3c0cf1['generateMi'+'pmap'](this['_glTarget']),_0x240871['_mipmapsUp'+'loaded']=!(0x1*0x9aa+0x1f30+-0x2*0x146d)),_0x240871['_gpuSize']&&_0x240871['adjustVram'+'SizeTracki'+'ng'](_0x53ca24['_vram'],-_0x240871['_gpuSize']),_0x240871['_gpuSize']=_0x240871['gpuSize'],_0x240871['adjustVram'+'SizeTracki'+'ng'](_0x53ca24['_vram'],_0x240871['_gpuSize']),this['_glCreated']=!(-0x231e+-0x539*0x1+0x2857*0x1);}['read'](_0x2b43c9,_0x48d5a3,_0x1c5242,_0x5f3b1f,_0x2d90cd){const _0x363970=this['texture'];return _0x363970['device']['readTextur'+'eAsync'](_0x363970,_0x2b43c9,_0x48d5a3,_0x1c5242,_0x5f3b1f,_0x2d90cd);}['write'](_0x34babd,_0x24c6e1,_0x12f9f0,_0x35b045,_0x56f524){const {texture:_0x3515ed}=this,{device:_0x14ab7a}=_0x3515ed;return _0x14ab7a['setTexture'](_0x3515ed,0x22d7+0x1*-0x177d+-0xb5a),_0x14ab7a['writeTextu'+'reAsync'](_0x3515ed,_0x34babd,_0x24c6e1,_0x12f9f0,_0x35b045,_0x56f524);}}class tw{constructor(_0x36b553,_0x320b39){h(this,'msaaFB'),h(this,'resolveFB'),(this['msaaFB']=_0x36b553,this['resolveFB']=_0x320b39);}['destroy'](_0x4a61d8){this['msaaFB']&&(_0x4a61d8['deleteRend'+'erbuffer'](this['msaaFB']),this['msaaFB']=null),this['resolveFB']&&(_0x4a61d8['deleteRend'+'erbuffer'](this['resolveFB']),this['resolveFB']=null);}}class sw{constructor(){h(this,'_glFrameBu'+'ffer',null),h(this,'_glDepthBu'+'ffer',null),h(this,'_glResolve'+'FrameBuffe'+'r',null),h(this,'colorMrtFr'+'amebuffers',null),h(this,'_glMsaaCol'+'orBuffers',[]),h(this,'_glMsaaDep'+'thBuffer',null),h(this,'msaaDepthB'+'ufferKey'),h(this,'suppliedCo'+'lorFramebu'+'ffer'),h(this,'_isInitial'+'ized',!(-0x132*-0x1a+-0x13*0x148+-0x6bb));}['destroy'](_0x483bd4){var _0x195fd9;const _0x3ed636=_0x483bd4['gl'];this['_isInitial'+'ized']=!(-0x2*-0x50f+0x3a*0x4d+-0x1b8f),this['_glFrameBu'+'ffer']&&(this['_glFrameBu'+'ffer']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x3ed636['deleteFram'+'ebuffer'](this['_glFrameBu'+'ffer']),this['_glFrameBu'+'ffer']=null),this['_glDepthBu'+'ffer']&&(_0x3ed636['deleteRend'+'erbuffer'](this['_glDepthBu'+'ffer']),this['_glDepthBu'+'ffer']=null),this['_glResolve'+'FrameBuffe'+'r']&&(this['_glResolve'+'FrameBuffe'+'r']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x3ed636['deleteFram'+'ebuffer'](this['_glResolve'+'FrameBuffe'+'r']),this['_glResolve'+'FrameBuffe'+'r']=null),this['_glMsaaCol'+'orBuffers']['forEach'](_0x5122ed=>{_0x3ed636['deleteRend'+'erbuffer'](_0x5122ed);}),this['_glMsaaCol'+'orBuffers']['length']=-0x6fa+-0x1576+0x1a*0x118,(_0x195fd9=this['colorMrtFr'+'amebuffers'])==null||_0x195fd9['forEach'](_0x112d7a=>{_0x112d7a['destroy'](_0x3ed636);}),this['colorMrtFr'+'amebuffers']=null,this['_glMsaaDep'+'thBuffer']&&(this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']&&Fd(_0x483bd4)['release'](this['msaaDepthB'+'ufferKey'])),this['suppliedCo'+'lorFramebu'+'ffer']=void(-0x24fa+-0x1e4c+0x1*0x4346);}get['initialize'+'d'](){return this['_isInitial'+'ized'];}['init'](_0x4b0dec,_0x17ada0){var _0x4f9343,_0x2443ad;const _0x474b6f=_0x4b0dec['gl'];w['assert'](!this['_isInitial'+'ized'],'Render\x20tar'+'get\x20alread'+'y\x20initiali'+'zed.'),this['_isInitial'+'ized']=!(-0x2*-0xa61+0x363*0x2+-0x1b88);const _0x357508=[];if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(-0x32b*-0x9+-0x1f53+0x2d0))this['_glFrameBu'+'ffer']=this['suppliedCo'+'lorFramebu'+'ffer'];else{w['call'](()=>{(_0x17ada0['width']<=0x35f*0xa+0x4*-0x7a+-0x1fce||_0x17ada0['height']<=0x6af*0x3+-0x21*0xb9+0x36*0x12)&&w['warnOnce']('Invalid\x20re'+'nder\x20targe'+'t\x20size:\x20'+_0x17ada0['width']+'\x20x\x20'+_0x17ada0['height'],_0x17ada0);}),this['_glFrameBu'+'ffer']=_0x474b6f['createFram'+'ebuffer'](),_0x4b0dec['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x20ae94=((_0x4f9343=_0x17ada0['_colorBuff'+'ers'])==null?void(0x5a7*0x6+0xe67+-0x3051):_0x4f9343['length'])??-0x2*0xba4+-0xb*-0x182+-0x6b2*-0x1,_0x59ad12=_0x474b6f['COLOR_ATTA'+'CHMENT0'];for(let _0x490383=0x226d*0x1+-0x32*0x13+-0x1*0x1eb7;_0x490383<_0x20ae94;++_0x490383){const _0x32d368=_0x17ada0['getColorBu'+'ffer'](_0x490383);_0x32d368&&(_0x32d368['impl']['_glTexture']||(_0x32d368['_width']=Math['min'](_0x32d368['width'],_0x4b0dec['maxRenderB'+'ufferSize']),_0x32d368['_height']=Math['min'](_0x32d368['height'],_0x4b0dec['maxRenderB'+'ufferSize']),_0x4b0dec['setTexture'](_0x32d368,0x96a+0xf07*-0x1+0x59d)),_0x474b6f['framebuffe'+'rTexture2D'](_0x474b6f['FRAMEBUFFE'+'R'],_0x59ad12+_0x490383,_0x32d368['_cubemap']?_0x474b6f['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x17ada0['_face']:_0x474b6f['TEXTURE_2D'],_0x32d368['impl']['_glTexture'],_0x17ada0['mipLevel']),_0x357508['push'](_0x59ad12+_0x490383));}_0x474b6f['drawBuffer'+'s'](_0x357508);const _0x1ed9c0=_0x17ada0['_depthBuff'+'er'];if(_0x1ed9c0||_0x17ada0['_depth']){const _0x53d26c=_0x17ada0['_stencil']?_0x474b6f['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x474b6f['DEPTH_ATTA'+'CHMENT'];if(_0x1ed9c0)_0x1ed9c0['impl']['_glTexture']||(_0x1ed9c0['_width']=Math['min'](_0x1ed9c0['width'],_0x4b0dec['maxRenderB'+'ufferSize']),_0x1ed9c0['_height']=Math['min'](_0x1ed9c0['height'],_0x4b0dec['maxRenderB'+'ufferSize']),_0x4b0dec['setTexture'](_0x1ed9c0,-0x14*0x8e+0x1221+-0x709*0x1)),_0x474b6f['framebuffe'+'rTexture2D'](_0x474b6f['FRAMEBUFFE'+'R'],_0x53d26c,_0x1ed9c0['_cubemap']?_0x474b6f['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x17ada0['_face']:_0x474b6f['TEXTURE_2D'],_0x17ada0['_depthBuff'+'er']['impl']['_glTexture'],_0x17ada0['mipLevel']);else{if(!(_0x17ada0['_samples']>0xd0e+-0x3*-0xa99+0x668*-0x7)){this['_glDepthBu'+'ffer']||(this['_glDepthBu'+'ffer']=_0x474b6f['createRend'+'erbuffer']());const _0x3d9db4=_0x17ada0['_stencil']?_0x474b6f['DEPTH24_ST'+'ENCIL8']:_0x474b6f['DEPTH_COMP'+'ONENT32F'];_0x474b6f['bindRender'+'buffer'](_0x474b6f['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x474b6f['renderbuff'+'erStorage'](_0x474b6f['RENDERBUFF'+'ER'],_0x3d9db4,_0x17ada0['width'],_0x17ada0['height']),_0x474b6f['framebuffe'+'rRenderbuf'+'fer'](_0x474b6f['FRAMEBUFFE'+'R'],_0x53d26c,_0x474b6f['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x474b6f['bindRender'+'buffer'](_0x474b6f['RENDERBUFF'+'ER'],null);}}}w['call'](()=>this['_checkFbo'](_0x4b0dec,_0x17ada0));}if(_0x17ada0['_samples']>-0x2*0x732+0x12b*0x7+0x638){this['_glResolve'+'FrameBuffe'+'r']=this['_glFrameBu'+'ffer'],this['_glFrameBu'+'ffer']=_0x474b6f['createFram'+'ebuffer'](),_0x4b0dec['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x36dcbe=((_0x2443ad=_0x17ada0['_colorBuff'+'ers'])==null?void(0x1f*0x35+0x42*0x80+-0x1*0x276b):_0x2443ad['length'])??-0xc45+-0xf61+0x1ba6;if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(0x66*-0xd+-0x23bd+-0x1*-0x28eb)){const _0x7bcee7=_0x474b6f['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x7bcee7);const _0x9efb8d=_0x4b0dec['backBuffer'+'Format']===Ne?_0x474b6f['RGBA8']:_0x474b6f['RGB8'];_0x474b6f['bindRender'+'buffer'](_0x474b6f['RENDERBUFF'+'ER'],_0x7bcee7),_0x474b6f['renderbuff'+'erStorageM'+'ultisample'](_0x474b6f['RENDERBUFF'+'ER'],_0x17ada0['_samples'],_0x9efb8d,_0x17ada0['width'],_0x17ada0['height']),_0x474b6f['framebuffe'+'rRenderbuf'+'fer'](_0x474b6f['FRAMEBUFFE'+'R'],_0x474b6f['COLOR_ATTA'+'CHMENT0'],_0x474b6f['RENDERBUFF'+'ER'],_0x7bcee7);}else for(let _0x1dbe51=0x1*0xfef+-0x2016+0x33b*0x5;_0x1dbe51<_0x36dcbe;++_0x1dbe51){const _0x595ef1=_0x17ada0['getColorBu'+'ffer'](_0x1dbe51);if(_0x595ef1){const _0x57d272=_0x474b6f['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x57d272),_0x474b6f['bindRender'+'buffer'](_0x474b6f['RENDERBUFF'+'ER'],_0x57d272),_0x474b6f['renderbuff'+'erStorageM'+'ultisample'](_0x474b6f['RENDERBUFF'+'ER'],_0x17ada0['_samples'],_0x595ef1['impl']['_glInterna'+'lFormat'],_0x17ada0['width'],_0x17ada0['height']),_0x474b6f['framebuffe'+'rRenderbuf'+'fer'](_0x474b6f['FRAMEBUFFE'+'R'],_0x474b6f['COLOR_ATTA'+'CHMENT0']+_0x1dbe51,_0x474b6f['RENDERBUFF'+'ER'],_0x57d272);}}if(_0x17ada0['_depth']){w['assert'](!this['_glMsaaDep'+'thBuffer']);const _0x1f713e=_0x17ada0['_stencil']?_0x474b6f['DEPTH24_ST'+'ENCIL8']:_0x474b6f['DEPTH_COMP'+'ONENT32F'],_0x398d7b=_0x17ada0['_stencil']?_0x474b6f['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x474b6f['DEPTH_ATTA'+'CHMENT'];let _0x3eeb56;const _0x13b18e=_0x17ada0['_depthBuff'+'er'];_0x13b18e&&(_0x3eeb56=_0x13b18e['id']+':'+_0x17ada0['width']+':'+_0x17ada0['height']+':'+_0x17ada0['_samples']+':'+_0x1f713e+':'+_0x398d7b,this['_glMsaaDep'+'thBuffer']=Fd(_0x4b0dec)['get'](_0x3eeb56)),this['_glMsaaDep'+'thBuffer']||(this['_glMsaaDep'+'thBuffer']=_0x474b6f['createRend'+'erbuffer'](),_0x474b6f['bindRender'+'buffer'](_0x474b6f['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']),_0x474b6f['renderbuff'+'erStorageM'+'ultisample'](_0x474b6f['RENDERBUFF'+'ER'],_0x17ada0['_samples'],_0x1f713e,_0x17ada0['width'],_0x17ada0['height']),this['_glMsaaDep'+'thBuffer']['destroy']=function(){_0x474b6f['deleteRend'+'erbuffer'](this);},_0x13b18e&&Fd(_0x4b0dec)['set'](_0x3eeb56,this['_glMsaaDep'+'thBuffer'])),this['msaaDepthB'+'ufferKey']=_0x3eeb56,_0x474b6f['framebuffe'+'rRenderbuf'+'fer'](_0x474b6f['FRAMEBUFFE'+'R'],_0x398d7b,_0x474b6f['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']);}w['call'](()=>this['_checkFbo'](_0x4b0dec,_0x17ada0,'MSAA')),_0x36dcbe>-0x1f48+0x35*0x79+0x63c&&(this['_createMsa'+'aMrtFrameb'+'uffers'](_0x4b0dec,_0x17ada0,_0x36dcbe),_0x4b0dec['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']),_0x474b6f['drawBuffer'+'s'](_0x357508));}}['_createMsa'+'aMrtFrameb'+'uffers'](_0x20eb78,_0x2fb2db,_0x2949b4){const _0x7bf373=_0x20eb78['gl'];this['colorMrtFr'+'amebuffers']=[];for(let _0x3669f3=0x1*-0x1187+-0x455+0x15dc;_0x3669f3<_0x2949b4;++_0x3669f3){const _0x3b1f7d=_0x2fb2db['getColorBu'+'ffer'](_0x3669f3),_0x19e1fa=_0x7bf373['createFram'+'ebuffer']();_0x20eb78['setFramebu'+'ffer'](_0x19e1fa);const _0x26c1ca=this['_glMsaaCol'+'orBuffers'][_0x3669f3];_0x7bf373['bindRender'+'buffer'](_0x7bf373['RENDERBUFF'+'ER'],_0x26c1ca),_0x7bf373['renderbuff'+'erStorageM'+'ultisample'](_0x7bf373['RENDERBUFF'+'ER'],_0x2fb2db['_samples'],_0x3b1f7d['impl']['_glInterna'+'lFormat'],_0x2fb2db['width'],_0x2fb2db['height']),_0x7bf373['framebuffe'+'rRenderbuf'+'fer'](_0x7bf373['FRAMEBUFFE'+'R'],_0x7bf373['COLOR_ATTA'+'CHMENT0'],_0x7bf373['RENDERBUFF'+'ER'],_0x26c1ca),_0x7bf373['drawBuffer'+'s']([_0x7bf373['COLOR_ATTA'+'CHMENT0']]),w['call'](()=>this['_checkFbo'](_0x20eb78,_0x2fb2db,'MSAA-MRT-s'+'rc'+_0x3669f3));const _0x4f833a=_0x7bf373['createFram'+'ebuffer']();_0x20eb78['setFramebu'+'ffer'](_0x4f833a),_0x7bf373['framebuffe'+'rTexture2D'](_0x7bf373['FRAMEBUFFE'+'R'],_0x7bf373['COLOR_ATTA'+'CHMENT0'],_0x3b1f7d['_cubemap']?_0x7bf373['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x2fb2db['_face']:_0x7bf373['TEXTURE_2D'],_0x3b1f7d['impl']['_glTexture'],-0xd3*-0x2f+0x1d20+0x169f*-0x3),this['colorMrtFr'+'amebuffers'][_0x3669f3]=new tw(_0x19e1fa,_0x4f833a),w['call'](()=>this['_checkFbo'](_0x20eb78,_0x2fb2db,'MSAA-MRT-d'+'st'+_0x3669f3));}}['_checkFbo'](_0x2d5afc,_0x57769f,_0x13138c=''){const _0x385a2d=_0x2d5afc['gl'],_0xbe48db=_0x385a2d['checkFrame'+'bufferStat'+'us'](_0x385a2d['FRAMEBUFFE'+'R']);let _0x49d00e;switch(_0xbe48db){case _0x385a2d['FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT']:_0x49d00e='FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT';break;case _0x385a2d['FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T']:_0x49d00e='FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T';break;case _0x385a2d['FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS']:_0x49d00e='FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS';break;case _0x385a2d['FRAMEBUFFE'+'R_UNSUPPOR'+'TED']:_0x49d00e='FRAMEBUFFE'+'R_UNSUPPOR'+'TED';break;}w['assert'](!_0x49d00e,'Framebuffe'+'r\x20creation'+'\x20failed\x20wi'+'th\x20error\x20c'+'ode\x20'+_0x49d00e+(',\x20render\x20t'+'arget:\x20')+_0x57769f['name']+'\x20'+_0x13138c,_0x57769f);}['loseContex'+'t'](){this['_glFrameBu'+'ffer']=null,this['_glDepthBu'+'ffer']=null,this['_glResolve'+'FrameBuffe'+'r']=null,this['_glMsaaCol'+'orBuffers']['length']=0x928+0xb5*0x1e+0x256*-0xd,this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']=void(-0x49*-0xd+0x11cd+0x1*-0x1582),this['colorMrtFr'+'amebuffers']=null,this['suppliedCo'+'lorFramebu'+'ffer']=void(-0x1*0x25af+0x1*0x1537+-0x22*-0x7c),this['_isInitial'+'ized']=!(0x6b*0x12+0x466*0x2+-0x1051);}['internalRe'+'solve'](_0x36d01e,_0x3564f1,_0x2d20c2,_0x5e5bf7,_0x1067c9){w['assert'](_0x3564f1!==_0x2d20c2,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x36d01e['setScissor'](-0x19*0x11d+0x1*-0x29+0x1*0x1bfe,-0xe3*0x14+-0x1*-0x1d63+-0x13*0x9d,_0x5e5bf7['width'],_0x5e5bf7['height']);const _0x47ba97=_0x36d01e['gl'];_0x47ba97['bindFrameb'+'uffer'](_0x47ba97['READ_FRAME'+'BUFFER'],_0x3564f1),_0x47ba97['bindFrameb'+'uffer'](_0x47ba97['DRAW_FRAME'+'BUFFER'],_0x2d20c2),_0x47ba97['blitFrameb'+'uffer'](0x653*0x4+0x675+-0x1fc1,-0x162f*0x1+0x40*0x7c+-0x8d1,_0x5e5bf7['width'],_0x5e5bf7['height'],-0x1*0x757+0x7ca+-0x73,0x1*0xe11+0x3c*0x27+-0x1735,_0x5e5bf7['width'],_0x5e5bf7['height'],_0x1067c9,_0x47ba97['NEAREST']);}['resolve'](_0x533604,_0x32d717,_0x146a46,_0x258f20){const _0x3de2ba=_0x533604['gl'];if(this['colorMrtFr'+'amebuffers']){if(_0x146a46)for(let _0x3a8db7=-0x1ef6+0x146f+0xa87*0x1;_0x3a8db7<this['colorMrtFr'+'amebuffers']['length'];_0x3a8db7++){const _0x354837=this['colorMrtFr'+'amebuffers'][_0x3a8db7];Q['pushGpuMar'+'ker'](_0x533604,'RESOLVE-MR'+'T'+_0x3a8db7),this['internalRe'+'solve'](_0x533604,_0x354837['msaaFB'],_0x354837['resolveFB'],_0x32d717,_0x3de2ba['COLOR_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x533604);}_0x258f20&&(Q['pushGpuMar'+'ker'](_0x533604,'RESOLVE-MR'+'T-DEPTH'),this['internalRe'+'solve'](_0x533604,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x32d717,_0x3de2ba['DEPTH_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x533604));}else Q['pushGpuMar'+'ker'](_0x533604,'RESOLVE'),this['internalRe'+'solve'](_0x533604,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x32d717,(_0x146a46?_0x3de2ba['COLOR_BUFF'+'ER_BIT']:-0x1*-0x1a91+-0x1218+0x3*-0x2d3)|(_0x258f20?_0x3de2ba['DEPTH_BUFF'+'ER_BIT']:-0x2441+-0x48f*-0x8+-0x5*0xb)),Q['popGpuMark'+'er'](_0x533604);_0x3de2ba['bindFrameb'+'uffer'](_0x3de2ba['FRAMEBUFFE'+'R'],this['_glFrameBu'+'ffer']);}}class iw{constructor(){h(this,'renderVers'+'ion'),h(this,'queries',[]);}['destroy'](_0xe2e502){this['queries']['forEach'](_0x16e892=>_0xe2e502['deleteQuer'+'y'](_0x16e892)),this['queries']=null;}}class rw extends $T{constructor(_0x1334b4){super(),h(this,'device'),h(this,'freeQuerie'+'s',[]),h(this,'frameQueri'+'es',[]),h(this,'previousFr'+'ameQueries',[]),h(this,'timings',[]),(this['device']=_0x1334b4,this['ext']=_0x1334b4['extDisjoin'+'tTimerQuer'+'y']);}['destroy'](){this['freeQuerie'+'s']['forEach'](_0x43210c=>this['device']['gl']['deleteQuer'+'y'](_0x43210c)),this['frameQueri'+'es']['forEach'](_0x21e5be=>this['device']['gl']['deleteQuer'+'y'](_0x21e5be)),this['previousFr'+'ameQueries']['forEach'](_0xbf7f88=>_0xbf7f88['destroy'](this['device']['gl'])),this['freeQuerie'+'s']=null,this['frameQueri'+'es']=null,this['previousFr'+'ameQueries']=null;}['loseContex'+'t'](){super['loseContex'+'t'](),this['freeQuerie'+'s']=[],this['frameQueri'+'es']=[],this['previousFr'+'ameQueries']=[];}['restoreCon'+'text'](){this['ext']=this['device']['extDisjoin'+'tTimerQuer'+'y'];}['getQuery'](){return this['freeQuerie'+'s']['pop']()??this['device']['gl']['createQuer'+'y']();}['start'](_0x11e973){if(this['ext']){const _0x36f314=this['getSlot'](_0x11e973),_0x39923e=this['getQuery']();return this['frameQueri'+'es'][_0x36f314]=_0x39923e,this['device']['gl']['beginQuery'](this['ext']['TIME_ELAPS'+'ED_EXT'],_0x39923e),_0x36f314;}}['end'](_0x2d0479){_0x2d0479!==void(-0x161+-0xeda+0x103b)&&this['device']['gl']['endQuery'](this['ext']['TIME_ELAPS'+'ED_EXT']);}['frameStart'](){this['processEna'+'bleRequest'](),this['_enabled']&&(this['frameGPUMa'+'rkerSlot']=this['start']('GpuFrame'));}['frameEnd'](){this['_enabled']&&this['end'](this['frameGPUMa'+'rkerSlot']);}['request'](){if(this['_enabled']){const _0x3f6522=this['ext'],_0x1cfc44=this['device']['gl'],_0x2707aa=this['device']['renderVers'+'ion'],_0x319687=this['frameQueri'+'es'];if(_0x319687['length']>-0x1b*0xb+-0x2664+0x278d){this['frameQueri'+'es']=[];const _0xde2a8e=new iw();_0xde2a8e['queries']=_0x319687,_0xde2a8e['renderVers'+'ion']=_0x2707aa,this['previousFr'+'ameQueries']['push'](_0xde2a8e);}if(this['previousFr'+'ameQueries']['length']>0x392*-0x7+-0x1bb2+-0x34b*-0x10){const _0x352a14=this['previousFr'+'ameQueries'][-0x32f*0x7+0x1*-0x20cf+0x3718],_0x4860a9=_0x352a14['queries'],_0xaa2e00=_0x4860a9[_0x4860a9['length']-(-0x13f6+0x18ae+0x47*-0x11)],_0x5dc2b3=_0x1cfc44['getQueryPa'+'rameter'](_0xaa2e00,_0x1cfc44['QUERY_RESU'+'LT_AVAILAB'+'LE']),_0x43acd6=_0x1cfc44['getParamet'+'er'](_0x3f6522['GPU_DISJOI'+'NT_EXT']);if(_0x5dc2b3&&!_0x43acd6){this['previousFr'+'ameQueries']['shift']();const _0x414c0=this['timings'];_0x414c0['length']=0x7f*0x2+0x177c+-0xd*0x1e2;for(let _0x140fa0=-0x1eee+-0x1997+0x3885;_0x140fa0<_0x4860a9['length'];_0x140fa0++){const _0x349f69=_0x4860a9[_0x140fa0],_0x42b9ef=_0x1cfc44['getQueryPa'+'rameter'](_0x349f69,_0x1cfc44['QUERY_RESU'+'LT']);_0x414c0[_0x140fa0]=_0x42b9ef*(0xe0*0x8+-0x402+-0x17f*0x2+0.000001),this['freeQuerie'+'s']['push'](_0x349f69);}this['report'](_0x352a14['renderVers'+'ion'],_0x414c0);}_0x43acd6&&(this['previousFr'+'ameQueries']['forEach'](_0x9a72dc=>{this['report'](_0x9a72dc['renderVers'+'ion'],null),_0x9a72dc['destroy'](_0x1cfc44);}),this['previousFr'+'ameQueries']['length']=0x97*-0x1+0x214e+-0x20b7);}super['request'](_0x2707aa);}}}const Da=[];class aw extends $e{constructor(_0x2286e7,_0x2e5003={}){super(_0x2286e7,_0x2e5003),h(this,'gl'),h(this,'_defaultFr'+'amebuffer',null),h(this,'_defaultFr'+'amebufferC'+'hanged',!(0x1916+0x5*0x6c0+-0x1*0x3ad5)),(_0x2e5003=this['initOption'+'s'],this['updateClie'+'ntRect'](),this['initTextur'+'eUnits'](),this['contextLos'+'t']=!(0xc6f*0x1+-0x85d+-0x411*0x1),this['_contextLo'+'stHandler']=_0x26a44a=>{_0x26a44a['preventDef'+'ault'](),this['loseContex'+'t'](),w['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20lost.'),this['fire']('devicelost');},this['_contextRe'+'storedHand'+'ler']=()=>{w['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20restore'+'d.'),this['restoreCon'+'text'](),this['fire']('devicerest'+'ored');});const _0x44c636=typeof navigator<'u'&&navigator['userAgent'];if(this['forceDisab'+'leMultisam'+'pling']=_0x44c636&&_0x44c636['includes']('AppleWebKi'+'t')&&(_0x44c636['includes']('15.4')||_0x44c636['includes']('15_4')),this['forceDisab'+'leMultisam'+'pling']&&(_0x2e5003['antialias']=!(0x5*-0x45f+-0x796+0xeb9*0x2),w['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'AppleWebKi'+'t\x2015.4')),Ae['browserNam'+'e']==='firefox'){const _0x4442b9=(typeof navigator<'u'?navigator['userAgent']:'')['match'](/Firefox\/(\d+(\.\d+)*)/),_0x3849f7=_0x4442b9?_0x4442b9[0xa8d+0x1*-0x20ef+-0x1663*-0x1]:null;if(_0x3849f7){const _0x3e2058=parseFloat(_0x3849f7);(Ae['name']==='windows'&&(_0x3e2058>=-0x47*-0x69+0x19*-0x10f+-0x14*0x1c||_0x3e2058===0xb*0x2ea+-0x1*-0x733+-0x26ce)||Ae['name']==='android'&&_0x3e2058>=-0x1c*0x86+-0x191*0x7+0x1*0x1a23)&&(_0x2e5003['antialias']=!(-0x164e+0x1*0x1552+0xfd),w['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'Firefox\x20'+Ae['name']+('\x20platform\x20'+'version\x20')+_0x3849f7));}}this['backBuffer'+'Antialias']=_0x2e5003['antialias']??!(0x1922*0x1+0xce3*0x1+-0x2604),_0x2e5003['antialias']=!(0x3*0xa67+0x2bb*-0x8+0x4ae*-0x2);const _0x533c14=_0x2e5003['gl']??_0x2286e7['getContext']('webgl2',_0x2e5003);if(!_0x533c14)throw new Error('WebGL\x20not\x20'+'supported');this['gl']=_0x533c14,this['isWebGL2']=!(0x13c3*-0x1+-0xd1e+0x20e1),this['_deviceTyp'+'e']=aT,this['updateBack'+'bufferForm'+'at'](null);const _0x38bea2=Ae['browserNam'+'e']==='chrome',_0x4d6a93=Ae['browserNam'+'e']==='safari',_0x344393=Ae['browser']&&navigator['appVersion']['indexOf']('Mac')!==-(-0x2b*-0xaf+0x1922*-0x1+-0x442);this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']=_0x4d6a93,this['_tempMacCh'+'romeBlitFr'+'amebufferW'+'orkaround']=_0x344393&&_0x38bea2&&!_0x2e5003['alpha'],_0x2286e7['addEventLi'+'stener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(0x2562+-0x22ae+-0x2b3*0x1)),_0x2286e7['addEventLi'+'stener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(-0x1*0x190c+-0x1bc9+-0x1*-0x34d6)),this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes'](),this['createBack'+'buffer'](null),this['supportsIm'+'ageBitmap']=!_0x4d6a93&&typeof ImageBitmap<'u',this['_samplerTy'+'pes']=new Set([_0x533c14['SAMPLER_2D'],_0x533c14['SAMPLER_CU'+'BE'],_0x533c14['UNSIGNED_I'+'NT_SAMPLER'+'_2D'],_0x533c14['INT_SAMPLE'+'R_2D'],_0x533c14['SAMPLER_2D'+'_SHADOW'],_0x533c14['SAMPLER_CU'+'BE_SHADOW'],_0x533c14['SAMPLER_3D'],_0x533c14['INT_SAMPLE'+'R_3D'],_0x533c14['UNSIGNED_I'+'NT_SAMPLER'+'_3D'],_0x533c14['SAMPLER_2D'+'_ARRAY'],_0x533c14['INT_SAMPLE'+'R_2D_ARRAY'],_0x533c14['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]),this['glAddress']=[_0x533c14['REPEAT'],_0x533c14['CLAMP_TO_E'+'DGE'],_0x533c14['MIRRORED_R'+'EPEAT']],this['glBlendEqu'+'ation']=[_0x533c14['FUNC_ADD'],_0x533c14['FUNC_SUBTR'+'ACT'],_0x533c14['FUNC_REVER'+'SE_SUBTRAC'+'T'],_0x533c14['MIN'],_0x533c14['MAX']],this['glBlendFun'+'ctionColor']=[_0x533c14['ZERO'],_0x533c14['ONE'],_0x533c14['SRC_COLOR'],_0x533c14['ONE_MINUS_'+'SRC_COLOR'],_0x533c14['DST_COLOR'],_0x533c14['ONE_MINUS_'+'DST_COLOR'],_0x533c14['SRC_ALPHA'],_0x533c14['SRC_ALPHA_'+'SATURATE'],_0x533c14['ONE_MINUS_'+'SRC_ALPHA'],_0x533c14['DST_ALPHA'],_0x533c14['ONE_MINUS_'+'DST_ALPHA'],_0x533c14['CONSTANT_C'+'OLOR'],_0x533c14['ONE_MINUS_'+'CONSTANT_C'+'OLOR']],this['glBlendFun'+'ctionAlpha']=[_0x533c14['ZERO'],_0x533c14['ONE'],_0x533c14['SRC_COLOR'],_0x533c14['ONE_MINUS_'+'SRC_COLOR'],_0x533c14['DST_COLOR'],_0x533c14['ONE_MINUS_'+'DST_COLOR'],_0x533c14['SRC_ALPHA'],_0x533c14['SRC_ALPHA_'+'SATURATE'],_0x533c14['ONE_MINUS_'+'SRC_ALPHA'],_0x533c14['DST_ALPHA'],_0x533c14['ONE_MINUS_'+'DST_ALPHA'],_0x533c14['CONSTANT_A'+'LPHA'],_0x533c14['ONE_MINUS_'+'CONSTANT_A'+'LPHA']],this['glComparis'+'on']=[_0x533c14['NEVER'],_0x533c14['LESS'],_0x533c14['EQUAL'],_0x533c14['LEQUAL'],_0x533c14['GREATER'],_0x533c14['NOTEQUAL'],_0x533c14['GEQUAL'],_0x533c14['ALWAYS']],this['glStencilO'+'p']=[_0x533c14['KEEP'],_0x533c14['ZERO'],_0x533c14['REPLACE'],_0x533c14['INCR'],_0x533c14['INCR_WRAP'],_0x533c14['DECR'],_0x533c14['DECR_WRAP'],_0x533c14['INVERT']],this['glClearFla'+'g']=[0xe9*-0x29+-0x357*-0x1+0x21fa,_0x533c14['COLOR_BUFF'+'ER_BIT'],_0x533c14['DEPTH_BUFF'+'ER_BIT'],_0x533c14['COLOR_BUFF'+'ER_BIT']|_0x533c14['DEPTH_BUFF'+'ER_BIT'],_0x533c14['STENCIL_BU'+'FFER_BIT'],_0x533c14['STENCIL_BU'+'FFER_BIT']|_0x533c14['COLOR_BUFF'+'ER_BIT'],_0x533c14['STENCIL_BU'+'FFER_BIT']|_0x533c14['DEPTH_BUFF'+'ER_BIT'],_0x533c14['STENCIL_BU'+'FFER_BIT']|_0x533c14['COLOR_BUFF'+'ER_BIT']|_0x533c14['DEPTH_BUFF'+'ER_BIT']],this['glCull']=[0x17f3+-0x1aab*0x1+-0x18*-0x1d,_0x533c14['BACK'],_0x533c14['FRONT'],_0x533c14['FRONT_AND_'+'BACK']],this['glFilter']=[_0x533c14['NEAREST'],_0x533c14['LINEAR'],_0x533c14['NEAREST_MI'+'PMAP_NEARE'+'ST'],_0x533c14['NEAREST_MI'+'PMAP_LINEA'+'R'],_0x533c14['LINEAR_MIP'+'MAP_NEARES'+'T'],_0x533c14['LINEAR_MIP'+'MAP_LINEAR']],this['glPrimitiv'+'e']=[_0x533c14['POINTS'],_0x533c14['LINES'],_0x533c14['LINE_LOOP'],_0x533c14['LINE_STRIP'],_0x533c14['TRIANGLES'],_0x533c14['TRIANGLE_S'+'TRIP'],_0x533c14['TRIANGLE_F'+'AN']],this['glType']=[_0x533c14['BYTE'],_0x533c14['UNSIGNED_B'+'YTE'],_0x533c14['SHORT'],_0x533c14['UNSIGNED_S'+'HORT'],_0x533c14['INT'],_0x533c14['UNSIGNED_I'+'NT'],_0x533c14['FLOAT'],_0x533c14['HALF_FLOAT']],this['pcUniformT'+'ype']={},this['pcUniformT'+'ype'][_0x533c14['BOOL']]=Tn,this['pcUniformT'+'ype'][_0x533c14['INT']]=_a,this['pcUniformT'+'ype'][_0x533c14['FLOAT']]=Xs,this['pcUniformT'+'ype'][_0x533c14['FLOAT_VEC2']]=ga,this['pcUniformT'+'ype'][_0x533c14['FLOAT_VEC3']]=ds,this['pcUniformT'+'ype'][_0x533c14['FLOAT_VEC4']]=Rn,this['pcUniformT'+'ype'][_0x533c14['INT_VEC2']]=ca,this['pcUniformT'+'ype'][_0x533c14['INT_VEC3']]=ha,this['pcUniformT'+'ype'][_0x533c14['INT_VEC4']]=da,this['pcUniformT'+'ype'][_0x533c14['BOOL_VEC2']]=tl,this['pcUniformT'+'ype'][_0x533c14['BOOL_VEC3']]=sl,this['pcUniformT'+'ype'][_0x533c14['BOOL_VEC4']]=il,this['pcUniformT'+'ype'][_0x533c14['FLOAT_MAT2']]=_h,this['pcUniformT'+'ype'][_0x533c14['FLOAT_MAT3']]=On,this['pcUniformT'+'ype'][_0x533c14['FLOAT_MAT4']]=li,this['pcUniformT'+'ype'][_0x533c14['SAMPLER_2D']]=Hx,this['pcUniformT'+'ype'][_0x533c14['SAMPLER_CU'+'BE']]=Wx,this['pcUniformT'+'ype'][_0x533c14['UNSIGNED_I'+'NT']]=Fn,this['pcUniformT'+'ype'][_0x533c14['UNSIGNED_I'+'NT_VEC2']]=Nn,this['pcUniformT'+'ype'][_0x533c14['UNSIGNED_I'+'NT_VEC3']]=kn,this['pcUniformT'+'ype'][_0x533c14['UNSIGNED_I'+'NT_VEC4']]=Un,this['pcUniformT'+'ype'][_0x533c14['SAMPLER_2D'+'_SHADOW']]=$x,this['pcUniformT'+'ype'][_0x533c14['SAMPLER_CU'+'BE_SHADOW']]=Xx,this['pcUniformT'+'ype'][_0x533c14['SAMPLER_2D'+'_ARRAY']]=jx,this['pcUniformT'+'ype'][_0x533c14['SAMPLER_3D']]=qx,this['pcUniformT'+'ype'][_0x533c14['INT_SAMPLE'+'R_2D']]=Yx,this['pcUniformT'+'ype'][_0x533c14['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=Kx,this['pcUniformT'+'ype'][_0x533c14['INT_SAMPLE'+'R_CUBE']]=Zx,this['pcUniformT'+'ype'][_0x533c14['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=Qx,this['pcUniformT'+'ype'][_0x533c14['INT_SAMPLE'+'R_3D']]=Jx,this['pcUniformT'+'ype'][_0x533c14['UNSIGNED_I'+'NT_SAMPLER'+'_3D']]=eT,this['pcUniformT'+'ype'][_0x533c14['INT_SAMPLE'+'R_2D_ARRAY']]=tT,this['pcUniformT'+'ype'][_0x533c14['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]=sT,this['targetToSl'+'ot']={},this['targetToSl'+'ot'][_0x533c14['TEXTURE_2D']]=-0xec9+-0x25ed+0x34b6,this['targetToSl'+'ot'][_0x533c14['TEXTURE_CU'+'BE_MAP']]=-0x10*-0xd5+-0x1285*-0x2+-0x3259,this['targetToSl'+'ot'][_0x533c14['TEXTURE_3D']]=0x144+0x13f5+-0x1537*0x1;let _0x93aeba,_0xbfa255,_0xc32451,_0x196365,_0x1587c9;this['commitFunc'+'tion']=[],this['commitFunc'+'tion'][Tn]=function(_0x4e62de,_0x55baa0){_0x4e62de['value']!==_0x55baa0&&(_0x533c14['uniform1i'](_0x4e62de['locationId'],_0x55baa0),_0x4e62de['value']=_0x55baa0);},this['commitFunc'+'tion'][_a]=this['commitFunc'+'tion'][Tn],this['commitFunc'+'tion'][Xs]=function(_0x31169c,_0x4e4c9b){_0x31169c['value']!==_0x4e4c9b&&(_0x533c14['uniform1f'](_0x31169c['locationId'],_0x4e4c9b),_0x31169c['value']=_0x4e4c9b);},this['commitFunc'+'tion'][ga]=function(_0x47f592,_0x46051d){_0x1587c9=_0x47f592['value'],_0x93aeba=_0x46051d[-0x6*-0x614+-0x2*-0xb29+0x2b*-0x15e],_0xbfa255=_0x46051d[-0x161+0x2*0x90a+-0x10b2],(_0x1587c9[-0x63b+-0x21a+-0x855*-0x1]!==_0x93aeba||_0x1587c9[-0x18fb+-0x23b*0xb+0x3185]!==_0xbfa255)&&(_0x533c14['uniform2fv'](_0x47f592['locationId'],_0x46051d),_0x1587c9[-0x3f5+0x335*0x1+-0x2*-0x60]=_0x93aeba,_0x1587c9[-0x6eb+0x7e1*-0x3+0x1e8f]=_0xbfa255);},this['commitFunc'+'tion'][ds]=function(_0x3b6950,_0x5e88c8){_0x1587c9=_0x3b6950['value'],_0x93aeba=_0x5e88c8[0x1002+-0xd9*0x19+0x52f],_0xbfa255=_0x5e88c8[-0x1184+-0x1253+0x23d8],_0xc32451=_0x5e88c8[-0x404+-0x20ad+-0x24b3*-0x1],(_0x1587c9[0x1926+0x1a00+-0x3326]!==_0x93aeba||_0x1587c9[0x782*0x3+0x1d6+-0x185b]!==_0xbfa255||_0x1587c9[0x188c+-0x880+-0x100a]!==_0xc32451)&&(_0x533c14['uniform3fv'](_0x3b6950['locationId'],_0x5e88c8),_0x1587c9[0x185c+0x4a*0x47+0x6*-0x77b]=_0x93aeba,_0x1587c9[0x1a45+-0x1374+-0x6d0]=_0xbfa255,_0x1587c9[0x5*-0x28a+0x193*0x6+0x342]=_0xc32451);},this['commitFunc'+'tion'][Rn]=function(_0x59e054,_0x565009){_0x1587c9=_0x59e054['value'],_0x93aeba=_0x565009[0x2101+0x10e4+-0x31e5],_0xbfa255=_0x565009[0x1b8f*-0x1+0x1e8b+-0x6d*0x7],_0xc32451=_0x565009[0x1d*-0x40+0x10f*-0x13+0x1b5f],_0x196365=_0x565009[-0x20df+-0x824*-0x1+0x1*0x18be],(_0x1587c9[-0xb07*-0x2+-0x1*0x2d6+0x4ce*-0x4]!==_0x93aeba||_0x1587c9[-0x1*-0x1e12+0x119b+-0x2fac]!==_0xbfa255||_0x1587c9[-0x26a*-0x5+0x626+-0x103*0x12]!==_0xc32451||_0x1587c9[-0x273+-0x166f*-0x1+0x13f9*-0x1]!==_0x196365)&&(_0x533c14['uniform4fv'](_0x59e054['locationId'],_0x565009),_0x1587c9[0x7*0x4c1+-0x195a+0x7ed*-0x1]=_0x93aeba,_0x1587c9[0x3*0xc43+0x3*0xbdc+0x242e*-0x2]=_0xbfa255,_0x1587c9[-0x6a*0x2b+0x1f0+0x20*0x7f]=_0xc32451,_0x1587c9[-0x1*0xe55+-0x1eaf+0x2d07*0x1]=_0x196365);},this['commitFunc'+'tion'][ca]=function(_0x957db4,_0x4004d5){_0x1587c9=_0x957db4['value'],_0x93aeba=_0x4004d5[-0xf6e*-0x1+-0xd6b+0x67*-0x5],_0xbfa255=_0x4004d5[0x20f6+-0x259d*0x1+0x4a8],(_0x1587c9[-0x5*-0x716+0x26ff*0x1+0x1d*-0x291]!==_0x93aeba||_0x1587c9[0xf23+-0x5*0x5f+-0x21*0x67]!==_0xbfa255)&&(_0x533c14['uniform2iv'](_0x957db4['locationId'],_0x4004d5),_0x1587c9[0x14ad*-0x1+0x1*-0x12b9+-0x6*-0x691]=_0x93aeba,_0x1587c9[0x1801+-0x5ac+-0x1254]=_0xbfa255);},this['commitFunc'+'tion'][tl]=this['commitFunc'+'tion'][ca],this['commitFunc'+'tion'][ha]=function(_0x48f0a3,_0x138b89){_0x1587c9=_0x48f0a3['value'],_0x93aeba=_0x138b89[0x1f66*-0x1+0x3c2*0x7+0xa3*0x8],_0xbfa255=_0x138b89[0x1*0x9d5+-0x463*0x1+-0xc7*0x7],_0xc32451=_0x138b89[-0x646+0x7*-0x179+0x1097],(_0x1587c9[0x26bd*0x1+-0xd4a+-0x1973]!==_0x93aeba||_0x1587c9[0x75b+-0x244d+0x1cf3*0x1]!==_0xbfa255||_0x1587c9[0xe4b*0x2+-0x978+-0x1*0x131c]!==_0xc32451)&&(_0x533c14['uniform3iv'](_0x48f0a3['locationId'],_0x138b89),_0x1587c9[0x119e+0x1*0x2077+-0x3215]=_0x93aeba,_0x1587c9[0x1*-0x213f+-0x11*-0x1f3+0x1d]=_0xbfa255,_0x1587c9[0x750*0x1+0xda1*-0x1+0x653]=_0xc32451);},this['commitFunc'+'tion'][sl]=this['commitFunc'+'tion'][ha],this['commitFunc'+'tion'][da]=function(_0xa19ab8,_0x43e19e){_0x1587c9=_0xa19ab8['value'],_0x93aeba=_0x43e19e[0xaf9*-0x1+-0x1222+0x1d1b],_0xbfa255=_0x43e19e[0x1364*0x2+0x82a+-0x2ef1],_0xc32451=_0x43e19e[0x1fac+-0xf*-0x84+-0x2766],_0x196365=_0x43e19e[-0x5c*0x51+0x17ab+0x574],(_0x1587c9[0x1df6+0x101a+-0x2e10]!==_0x93aeba||_0x1587c9[-0x1d70+0x2309*0x1+-0x2cc*0x2]!==_0xbfa255||_0x1587c9[-0x1f7*0x3+0x2*0x395+0x11*-0x13]!==_0xc32451||_0x1587c9[-0xe9a+0x937*-0x1+0x17d4]!==_0x196365)&&(_0x533c14['uniform4iv'](_0xa19ab8['locationId'],_0x43e19e),_0x1587c9[-0x1*-0x6a3+0x17*-0x17c+0x3*0x92b]=_0x93aeba,_0x1587c9[0x190e+0x676+-0x1*0x1f83]=_0xbfa255,_0x1587c9[0x146*-0x1d+0x1045+0x14ab]=_0xc32451,_0x1587c9[-0x242f*0x1+-0x2647+0x4a79]=_0x196365);},this['commitFunc'+'tion'][il]=this['commitFunc'+'tion'][da],this['commitFunc'+'tion'][_h]=function(_0x320f2d,_0x28c742){_0x533c14['uniformMat'+'rix2fv'](_0x320f2d['locationId'],!(-0x3*-0xc5e+0x318*0x7+-0xa9*0x59),_0x28c742);},this['commitFunc'+'tion'][On]=function(_0x3a36d9,_0x4b62d7){_0x533c14['uniformMat'+'rix3fv'](_0x3a36d9['locationId'],!(0x1f*0xed+-0xec3+-0xdef),_0x4b62d7);},this['commitFunc'+'tion'][li]=function(_0x1d5800,_0x4e9fd3){_0x533c14['uniformMat'+'rix4fv'](_0x1d5800['locationId'],!(0xff5+-0x1*-0x1fc9+-0x2fbd),_0x4e9fd3);},this['commitFunc'+'tion'][ud]=function(_0x384c55,_0x5cbe7c){_0x533c14['uniform1fv'](_0x384c55['locationId'],_0x5cbe7c);},this['commitFunc'+'tion'][pd]=function(_0x4107d0,_0x5452fd){_0x533c14['uniform2fv'](_0x4107d0['locationId'],_0x5452fd);},this['commitFunc'+'tion'][md]=function(_0x2a8148,_0x107ecc){_0x533c14['uniform3fv'](_0x2a8148['locationId'],_0x107ecc);},this['commitFunc'+'tion'][Lp]=function(_0x19bd9f,_0x5c6be7){_0x533c14['uniform4fv'](_0x19bd9f['locationId'],_0x5c6be7);},this['commitFunc'+'tion'][Fn]=function(_0x1606d5,_0xede555){_0x1606d5['value']!==_0xede555&&(_0x533c14['uniform1ui'](_0x1606d5['locationId'],_0xede555),_0x1606d5['value']=_0xede555);},this['commitFunc'+'tion'][Nn]=function(_0x320067,_0x29a6ba){_0x1587c9=_0x320067['value'],_0x93aeba=_0x29a6ba[0x1fd3+-0x12a8*0x2+0x57d],_0xbfa255=_0x29a6ba[-0x1*-0xd9f+0x1*-0x140c+0x337*0x2],(_0x1587c9[-0x6cb*0x4+0x3bf*0xa+-0xa4a]!==_0x93aeba||_0x1587c9[0x96a+0x59*0x31+-0x5*0x54a]!==_0xbfa255)&&(_0x533c14['uniform2ui'+'v'](_0x320067['locationId'],_0x29a6ba),_0x1587c9[0x15e3*0x1+-0x374+-0xd*0x16b]=_0x93aeba,_0x1587c9[-0x1*-0x1dbf+0x2*0xdc2+-0x15d*0x2a]=_0xbfa255);},this['commitFunc'+'tion'][kn]=function(_0x547dab,_0x31ca33){_0x1587c9=_0x547dab['value'],_0x93aeba=_0x31ca33[-0x694+-0x1f42+-0xa7*-0x3a],_0xbfa255=_0x31ca33[-0x1*0x55+0x5*0xfb+-0x7*0xa7],_0xc32451=_0x31ca33[-0x10e7+-0x5d9*0x4+0x284d],(_0x1587c9[-0x2*0x605+0x1879+-0xc6f]!==_0x93aeba||_0x1587c9[-0x172a*-0x1+0x466+-0x1b8f]!==_0xbfa255||_0x1587c9[-0x1ae*-0xf+-0x1a6+-0xbc5*0x2]!==_0xc32451)&&(_0x533c14['uniform3ui'+'v'](_0x547dab['locationId'],_0x31ca33),_0x1587c9[0x10a0+0x692+-0x1732]=_0x93aeba,_0x1587c9[0x1beb+-0x1f63*-0x1+-0x143*0x2f]=_0xbfa255,_0x1587c9[0x1d94+-0x16e7+0x6ab*-0x1]=_0xc32451);},this['commitFunc'+'tion'][Un]=function(_0x176f75,_0x504df5){_0x1587c9=_0x176f75['value'],_0x93aeba=_0x504df5[-0x2ce*0x2+-0x1195+0x1*0x1731],_0xbfa255=_0x504df5[-0x1d73+-0x2*0x522+-0x1f*-0x148],_0xc32451=_0x504df5[-0x2181+0xb*-0x2b7+0x9c*0x68],_0x196365=_0x504df5[0xff0+-0x55b+-0xa92],(_0x1587c9[-0x2452+0x4cb+0x1f87]!==_0x93aeba||_0x1587c9[0x1c46+0xb*0x296+-0x1*0x38b7]!==_0xbfa255||_0x1587c9[0x2dd+-0x621+0x346]!==_0xc32451||_0x1587c9[0x2*0xb3e+0x4b5*0x1+-0x1b2e]!==_0x196365)&&(_0x533c14['uniform4ui'+'v'](_0x176f75['locationId'],_0x504df5),_0x1587c9[-0x1*-0x6d5+0x1ce1+-0x23b6]=_0x93aeba,_0x1587c9[-0x7fc+0x1*0x1d75+-0x728*0x3]=_0xbfa255,_0x1587c9[0x7*-0x135+-0xd*-0x10b+0x51a*-0x1]=_0xc32451,_0x1587c9[-0x1*-0x25cd+0xb*0xcb+-0x1b9*0x1b]=_0x196365);},this['commitFunc'+'tion'][Bn]=function(_0x3849c3,_0x5a87cc){_0x533c14['uniform1iv'](_0x3849c3['locationId'],_0x5a87cc);},this['commitFunc'+'tion'][_d]=function(_0x148e80,_0x2dde26){_0x533c14['uniform1ui'+'v'](_0x148e80['locationId'],_0x2dde26);},this['commitFunc'+'tion'][gd]=this['commitFunc'+'tion'][Bn],this['commitFunc'+'tion'][zn]=function(_0x2e07eb,_0x236c2b){_0x533c14['uniform2iv'](_0x2e07eb['locationId'],_0x236c2b);},this['commitFunc'+'tion'][Sd]=function(_0x5f2838,_0xa5ccd5){_0x533c14['uniform2ui'+'v'](_0x5f2838['locationId'],_0xa5ccd5);},this['commitFunc'+'tion'][yd]=this['commitFunc'+'tion'][zn],this['commitFunc'+'tion'][Vn]=function(_0x4730bb,_0x44a0f4){_0x533c14['uniform3iv'](_0x4730bb['locationId'],_0x44a0f4);},this['commitFunc'+'tion'][vd]=function(_0x204493,_0x845fa3){_0x533c14['uniform3ui'+'v'](_0x204493['locationId'],_0x845fa3);},this['commitFunc'+'tion'][xd]=this['commitFunc'+'tion'][Vn],this['commitFunc'+'tion'][gh]=function(_0x4c8773,_0x26f513){_0x533c14['uniform4iv'](_0x4c8773['locationId'],_0x26f513);},this['commitFunc'+'tion'][Rp]=function(_0x48a66e,_0x2c426e){_0x533c14['uniform4ui'+'v'](_0x48a66e['locationId'],_0x2c426e);},this['commitFunc'+'tion'][Op]=this['commitFunc'+'tion'][gh],this['commitFunc'+'tion'][wy]=function(_0x26c0f7,_0x479a62){_0x533c14['uniformMat'+'rix4fv'](_0x26c0f7['locationId'],!(-0xee2+0x3f*-0x83+0x2f20),_0x479a62);},this['constantTe'+'xSource']=this['scope']['resolve']('source'),this['postInit']();}['postInit'](){super['postInit'](),this['gpuProfile'+'r']=new rw(this);}['destroy'](){super['destroy']();const _0x110f4a=this['gl'];this['feedback']&&_0x110f4a['deleteTran'+'sformFeedb'+'ack'](this['feedback']),this['clearVerte'+'xArrayObje'+'ctCache'](),this['canvas']['removeEven'+'tListener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(-0x3*0xf+-0x1*0x1fb4+0x1fe2)),this['canvas']['removeEven'+'tListener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(-0x3*0x4a7+0x1*0x23df+0x47*-0x4f)),this['_contextLo'+'stHandler']=null,this['_contextRe'+'storedHand'+'ler']=null,this['gl']=null,super['postDestro'+'y']();}['createBack'+'buffer'](_0x4ad49a){this['supportsSt'+'encil']=this['initOption'+'s']['stencil'],this['backBuffer']=new gt({'name':'WebglFrame'+'buffer','graphicsDevice':this,'depth':this['initOption'+'s']['depth'],'stencil':this['supportsSt'+'encil'],'samples':this['samples']}),this['backBuffer']['impl']['suppliedCo'+'lorFramebu'+'ffer']=_0x4ad49a;}['updateBack'+'bufferForm'+'at'](_0x16787f){const _0x159387=this['gl'];_0x159387['bindFrameb'+'uffer'](_0x159387['FRAMEBUFFE'+'R'],_0x16787f);const _0x1aa228=this['gl']['getParamet'+'er'](this['gl']['ALPHA_BITS']);this['backBuffer'+'Format']=_0x1aa228?Ne:Cr;}['updateBack'+'buffer'](){const _0x42a1a5=this['canvas']['width']!==this['backBuffer'+'Size']['x']||this['canvas']['height']!==this['backBuffer'+'Size']['y'];(this['_defaultFr'+'amebufferC'+'hanged']||_0x42a1a5)&&(this['_defaultFr'+'amebufferC'+'hanged']&&this['updateBack'+'bufferForm'+'at'](this['_defaultFr'+'amebuffer']),this['_defaultFr'+'amebufferC'+'hanged']=!(0x3a9*0x1+-0x1521+0x1179),this['backBuffer'+'Size']['set'](this['canvas']['width'],this['canvas']['height']),this['backBuffer']['destroy'](),this['createBack'+'buffer'](this['_defaultFr'+'amebuffer']));}['createVert'+'exBufferIm'+'pl'](_0x3649c2,_0x1f21d8){return new XT();}['createInde'+'xBufferImp'+'l'](_0x54bbdc){return new qT(_0x54bbdc);}['createShad'+'erImpl'](_0x2955f2){return new JT(_0x2955f2);}['createText'+'ureImpl'](_0x16ee8e){return new ew(_0x16ee8e);}['createRend'+'erTargetIm'+'pl'](_0x4ce8c7){return new sw();}['pushMarker'](_0x4aa4da){if(Ae['browser']&&window['spector']){const _0x2613fe=Q['toString']();window['spector']['setMarker'](_0x2613fe+'\x20#');}}['popMarker'](){if(Ae['browser']&&window['spector']){const _0x52058e=Q['toString']();_0x52058e['length']?window['spector']['setMarker'](_0x52058e+'\x20#'):window['spector']['clearMarke'+'r']();}}['getPrecisi'+'on'](){const _0x16ca94=this['gl'];let _0x33dce1='highp';if(_0x16ca94['getShaderP'+'recisionFo'+'rmat']){const _0x54412b=_0x16ca94['getShaderP'+'recisionFo'+'rmat'](_0x16ca94['VERTEX_SHA'+'DER'],_0x16ca94['HIGH_FLOAT']),_0x47264c=_0x16ca94['getShaderP'+'recisionFo'+'rmat'](_0x16ca94['VERTEX_SHA'+'DER'],_0x16ca94['MEDIUM_FLO'+'AT']),_0x14e74f=_0x16ca94['getShaderP'+'recisionFo'+'rmat'](_0x16ca94['FRAGMENT_S'+'HADER'],_0x16ca94['HIGH_FLOAT']),_0x3becc8=_0x16ca94['getShaderP'+'recisionFo'+'rmat'](_0x16ca94['FRAGMENT_S'+'HADER'],_0x16ca94['MEDIUM_FLO'+'AT']);if(_0x54412b&&_0x47264c&&_0x14e74f&&_0x3becc8){const _0x4f4a5f=_0x54412b['precision']>0x1f*-0x2b+0xf*0x185+-0x1196&&_0x14e74f['precision']>-0x4*-0x955+-0x91b+-0x1c39,_0x40a950=_0x47264c['precision']>-0x1*0x9e+0x2*0xa61+-0x1424&&_0x3becc8['precision']>0x23e2+-0x18b*0x8+-0xbc5*0x2;_0x4f4a5f||(_0x40a950?(_0x33dce1='mediump',w['warn']('WARNING:\x20h'+'ighp\x20not\x20s'+'upported,\x20'+'using\x20medi'+'ump')):(_0x33dce1='lowp',w['warn']('WARNING:\x20h'+'ighp\x20and\x20m'+'ediump\x20not'+'\x20supported'+',\x20using\x20lo'+'wp')));}}return _0x33dce1;}['getExtensi'+'on'](){for(let _0x5468db=0x137*-0x9+0xa48*-0x1+0x1537*0x1;_0x5468db<arguments['length'];_0x5468db++)if(this['supportedE'+'xtensions']['indexOf'](arguments[_0x5468db])!==-(-0xe1f+-0x13f6+0x110b*0x2))return this['gl']['getExtensi'+'on'](arguments[_0x5468db]);return null;}get['extDisjoin'+'tTimerQuer'+'y'](){return this['_extDisjoi'+'ntTimerQue'+'ry']||(this['_extDisjoi'+'ntTimerQue'+'ry']=this['getExtensi'+'on']('EXT_disjoi'+'nt_timer_q'+'uery_webgl'+'2','EXT_disjoi'+'nt_timer_q'+'uery')),this['_extDisjoi'+'ntTimerQue'+'ry'];}['initialize'+'Extensions'](){const _0x4af861=this['gl'];this['supportedE'+'xtensions']=_0x4af861['getSupport'+'edExtensio'+'ns']()??[],this['_extDisjoi'+'ntTimerQue'+'ry']=null,this['textureRG1'+'1B10Render'+'able']=!(0x168c+-0x18dd+0x251),this['extColorBu'+'fferFloat']=this['getExtensi'+'on']('EXT_color_'+'buffer_flo'+'at'),this['textureFlo'+'atRenderab'+'le']=!!this['extColorBu'+'fferFloat'],this['extColorBu'+'fferHalfFl'+'oat']=this['getExtensi'+'on']('EXT_color_'+'buffer_hal'+'f_float'),this['textureHal'+'fFloatRend'+'erable']=!!this['extColorBu'+'fferHalfFl'+'oat']||!!this['extColorBu'+'fferFloat'],this['extDebugRe'+'ndererInfo']=this['getExtensi'+'on']('WEBGL_debu'+'g_renderer'+'_info'),this['extTexture'+'FloatLinea'+'r']=this['getExtensi'+'on']('OES_textur'+'e_float_li'+'near'),this['textureFlo'+'atFilterab'+'le']=!!this['extTexture'+'FloatLinea'+'r'],this['extFloatBl'+'end']=this['getExtensi'+'on']('EXT_float_'+'blend'),this['extTexture'+'FilterAnis'+'otropic']=this['getExtensi'+'on']('EXT_textur'+'e_filter_a'+'nisotropic','WEBKIT_EXT'+'_texture_f'+'ilter_anis'+'otropic'),this['extParalle'+'lShaderCom'+'pile']=this['getExtensi'+'on']('KHR_parall'+'el_shader_'+'compile'),this['extCompres'+'sedTexture'+'ETC1']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc1'),this['extCompres'+'sedTexture'+'ETC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc'),this['extCompres'+'sedTexture'+'PVRTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_pvrtc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_pvrtc'),this['extCompres'+'sedTexture'+'S3TC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_s3tc'),this['extCompres'+'sedTexture'+'S3TC_SRGB']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc_'+'srgb'),this['extCompres'+'sedTexture'+'ATC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_atc'),this['extCompres'+'sedTexture'+'ASTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_astc'),this['extTexture'+'Compressio'+'nBPTC']=this['getExtensi'+'on']('EXT_textur'+'e_compress'+'ion_bptc');}['initialize'+'Capabiliti'+'es'](){const _0x473d59=this['gl'];let _0x490524;const _0x493e71=typeof navigator<'u'?navigator['userAgent']:'';this['maxPrecisi'+'on']=this['precision']=this['getPrecisi'+'on']();const _0x840838=_0x473d59['getContext'+'Attributes']();this['supportsMs'+'aa']=(_0x840838==null?void(-0x25b1+-0xff0+0x35a1):_0x840838['antialias'])??!(0x72e+-0x1dc+-0x551),this['supportsSt'+'encil']=(_0x840838==null?void(0x3f3+-0xffa*0x1+0xc07):_0x840838['stencil'])??!(0x37c+0x22a1+0x987*-0x4),this['maxTexture'+'Size']=_0x473d59['getParamet'+'er'](_0x473d59['MAX_TEXTUR'+'E_SIZE']),this['maxCubeMap'+'Size']=_0x473d59['getParamet'+'er'](_0x473d59['MAX_CUBE_M'+'AP_TEXTURE'+'_SIZE']),this['maxRenderB'+'ufferSize']=_0x473d59['getParamet'+'er'](_0x473d59['MAX_RENDER'+'BUFFER_SIZ'+'E']),this['maxTexture'+'s']=_0x473d59['getParamet'+'er'](_0x473d59['MAX_TEXTUR'+'E_IMAGE_UN'+'ITS']),this['maxCombine'+'dTextures']=_0x473d59['getParamet'+'er'](_0x473d59['MAX_COMBIN'+'ED_TEXTURE'+'_IMAGE_UNI'+'TS']),this['maxVertexT'+'extures']=_0x473d59['getParamet'+'er'](_0x473d59['MAX_VERTEX'+'_TEXTURE_I'+'MAGE_UNITS']),this['vertexUnif'+'ormsCount']=_0x473d59['getParamet'+'er'](_0x473d59['MAX_VERTEX'+'_UNIFORM_V'+'ECTORS']),this['fragmentUn'+'iformsCoun'+'t']=_0x473d59['getParamet'+'er'](_0x473d59['MAX_FRAGME'+'NT_UNIFORM'+'_VECTORS']),this['maxColorAt'+'tachments']=_0x473d59['getParamet'+'er'](_0x473d59['MAX_COLOR_'+'ATTACHMENT'+'S']),this['maxVolumeS'+'ize']=_0x473d59['getParamet'+'er'](_0x473d59['MAX_3D_TEX'+'TURE_SIZE']),_0x490524=this['extDebugRe'+'ndererInfo'],this['unmaskedRe'+'nderer']=_0x490524?_0x473d59['getParamet'+'er'](_0x490524['UNMASKED_R'+'ENDERER_WE'+'BGL']):'',this['unmaskedVe'+'ndor']=_0x490524?_0x473d59['getParamet'+'er'](_0x490524['UNMASKED_V'+'ENDOR_WEBG'+'L']):'';const _0x6c47f0=/\bMali-G52+/,_0x2d7015=/SM-[a-zA-Z0-9]+/;this['supportsGp'+'uParticles']=!(this['unmaskedVe'+'ndor']==='ARM'&&_0x493e71['match'](_0x2d7015))&&!this['unmaskedRe'+'nderer']['match'](_0x6c47f0),_0x490524=this['extTexture'+'FilterAnis'+'otropic'],this['maxAnisotr'+'opy']=_0x490524?_0x473d59['getParamet'+'er'](_0x490524['MAX_TEXTUR'+'E_MAX_ANIS'+'OTROPY_EXT']):0xf*0x11b+0x9*-0xb6+0x1*-0xa2e;const _0x3ec001=!this['forceDisab'+'leMultisam'+'pling'];this['maxSamples']=_0x3ec001?_0x473d59['getParamet'+'er'](_0x473d59['MAX_SAMPLE'+'S']):0xf17*-0x1+0x2c1*-0x8+0x36*0xb0,this['maxSamples']=Math['min'](this['maxSamples'],-0xd01*0x1+-0x206f+0x16ba*0x2),this['samples']=_0x3ec001&&this['backBuffer'+'Antialias']?this['maxSamples']:0x3*0xadd+0x1364+0x33fa*-0x1,this['supportsAr'+'eaLights']=!Ae['android'],this['maxTexture'+'s']<=-0x4*0x8e+0x1*-0x224f+-0x539*-0x7&&(this['supportsAr'+'eaLights']=!(-0x56*0x2f+0x2*0x1103+-0xd*0x167)),this['initCapsDe'+'fines']();}['initialize'+'RenderStat'+'e'](){super['initialize'+'RenderStat'+'e']();const _0x580f31=this['gl'];_0x580f31['disable'](_0x580f31['BLEND']),_0x580f31['blendFunc'](_0x580f31['ONE'],_0x580f31['ZERO']),_0x580f31['blendEquat'+'ion'](_0x580f31['FUNC_ADD']),_0x580f31['colorMask'](!(-0x55*0x27+-0xcfb*-0x2+-0xd03),!(-0x2151*-0x1+0x1b0*-0x4+-0x1a91),!(-0x1670+0x18fe*0x1+-0x28e),!(0x1b6c+0x4cc*0x3+0x1be*-0x18)),_0x580f31['blendColor'](0x17*0x89+0x2bb+-0xa*0x181,0x73*-0x4e+-0x1f02+-0x6*-0xb02,0x2298+-0x20b3*-0x1+-0x434b,-0xbc3+-0x21d7+-0x1*-0x2d9a),_0x580f31['enable'](_0x580f31['CULL_FACE']),this['cullFace']=_0x580f31['BACK'],_0x580f31['cullFace'](_0x580f31['BACK']),_0x580f31['enable'](_0x580f31['DEPTH_TEST']),_0x580f31['depthFunc'](_0x580f31['LEQUAL']),_0x580f31['depthMask'](!(0x6*0x443+0x2ef*-0x2+0x4*-0x4ed)),this['stencil']=!(0x1e83*-0x1+0xe88+0xffc),_0x580f31['disable'](_0x580f31['STENCIL_TE'+'ST']),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=Wi,this['stencilRef'+'Front']=this['stencilRef'+'Back']=-0x672+-0x791+0xe03,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=-0x1353+-0x160+-0x1*-0x15b2,_0x580f31['stencilFun'+'c'](_0x580f31['ALWAYS'],0xe3b*0x2+0x1cf1+-0x3967,-0x18c9+-0x4*-0x958+-0xb98),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=xn,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=xn,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=xn,this['stencilWri'+'teMaskFron'+'t']=-0x190b*-0x1+-0xee*-0xa+-0x2158,this['stencilWri'+'teMaskBack']=-0x1cec+0x274+0x1b77,_0x580f31['stencilOp'](_0x580f31['KEEP'],_0x580f31['KEEP'],_0x580f31['KEEP']),_0x580f31['stencilMas'+'k'](-0x17f6*-0x1+-0x270d+0x1016),this['alphaToCov'+'erage']=!(0x531+-0x3b2*0xa+0x1fc4),this['raster']=!(-0x9*0x3d6+-0x138+0x23be),_0x580f31['disable'](_0x580f31['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']),_0x580f31['disable'](_0x580f31['RASTERIZER'+'_DISCARD']),this['depthBiasE'+'nabled']=!(-0x11*-0x89+-0x1ab8+0x11a0),_0x580f31['disable'](_0x580f31['POLYGON_OF'+'FSET_FILL']),this['clearDepth']=0xb55+0x1187*-0x1+0x633,_0x580f31['clearDepth'](0x1*-0x659+0xea2+-0x848),this['clearColor']=new ie(-0x13f*-0xd+-0x6d9*0x3+0x458,0x4a2*-0x1+0x21e6*-0x1+-0x66c*-0x6,0xe0*0x4+-0x17e9+-0x1db*-0xb,-0x25a5*0x1+0x15a7+-0xffe*-0x1),_0x580f31['clearColor'](0x9*0x1d1+0xc69+-0x1cc2,0x7a7+0x1b58+-0x22ff,-0x2*0x1174+0x1a5*-0xc+0x36a4*0x1,-0xb*-0x34f+-0x1645+0xe20*-0x1),this['clearStenc'+'il']=0x47*0x83+0x941+-0x2d96,_0x580f31['clearStenc'+'il'](0xc2f+0xe48+0x1a77*-0x1),_0x580f31['hint'](_0x580f31['FRAGMENT_S'+'HADER_DERI'+'VATIVE_HIN'+'T'],_0x580f31['NICEST']),_0x580f31['enable'](_0x580f31['SCISSOR_TE'+'ST']),_0x580f31['pixelStore'+'i'](_0x580f31['UNPACK_COL'+'ORSPACE_CO'+'NVERSION_W'+'EBGL'],_0x580f31['NONE']),this['unpackFlip'+'Y']=!(0x6c*-0xa+-0xb4+-0x1*-0x4ed),_0x580f31['pixelStore'+'i'](_0x580f31['UNPACK_FLI'+'P_Y_WEBGL'],!(0x23b0+0x14b1+-0x3860)),this['unpackPrem'+'ultiplyAlp'+'ha']=!(-0x13*-0x141+0x1feb*-0x1+0x819*0x1),_0x580f31['pixelStore'+'i'](_0x580f31['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],!(0x5fd+-0x55+-0x5a7*0x1)),_0x580f31['pixelStore'+'i'](_0x580f31['UNPACK_ALI'+'GNMENT'],0x3b*-0xa+0x1f40+-0xef*0x1f);}['initTextur'+'eUnits'](_0x445581=0x26ed+-0xbf*0x10+-0x1aed){this['textureUni'+'ts']=[];for(let _0x2b28b4=0x1460+-0x26c4+-0x1264*-0x1;_0x2b28b4<_0x445581;_0x2b28b4++)this['textureUni'+'ts']['push']([null,null,null]);}['initialize'+'ContextCac'+'hes'](){super['initialize'+'ContextCac'+'hes'](),this['_vaoMap']=new Map(),this['boundVao']=null,this['activeFram'+'ebuffer']=null,this['feedback']=null,this['transformF'+'eedbackBuf'+'fer']=null,this['textureUni'+'t']=0x1eeb*0x1+-0xb8a+-0x1*0x1361,this['initTextur'+'eUnits'](this['maxCombine'+'dTextures']);}['loseContex'+'t'](){super['loseContex'+'t']();for(const _0x408024 of this['shaders'])_0x408024['loseContex'+'t']();}['restoreCon'+'text'](){this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),super['restoreCon'+'text']();for(const _0x1844db of this['shaders'])_0x1844db['restoreCon'+'text']();}['setViewpor'+'t'](_0x125b2b,_0x32e591,_0x3a7e77,_0x12f3c5){(this['vx']!==_0x125b2b||this['vy']!==_0x32e591||this['vw']!==_0x3a7e77||this['vh']!==_0x12f3c5)&&(this['gl']['viewport'](_0x125b2b,_0x32e591,_0x3a7e77,_0x12f3c5),this['vx']=_0x125b2b,this['vy']=_0x32e591,this['vw']=_0x3a7e77,this['vh']=_0x12f3c5);}['setScissor'](_0x321ac5,_0x43712d,_0x2eb25c,_0xdf0f38){(this['sx']!==_0x321ac5||this['sy']!==_0x43712d||this['sw']!==_0x2eb25c||this['sh']!==_0xdf0f38)&&(this['gl']['scissor'](_0x321ac5,_0x43712d,_0x2eb25c,_0xdf0f38),this['sx']=_0x321ac5,this['sy']=_0x43712d,this['sw']=_0x2eb25c,this['sh']=_0xdf0f38);}['setFramebu'+'ffer'](_0x33f813){if(this['activeFram'+'ebuffer']!==_0x33f813){const _0x340562=this['gl'];_0x340562['bindFrameb'+'uffer'](_0x340562['FRAMEBUFFE'+'R'],_0x33f813),this['activeFram'+'ebuffer']=_0x33f813;}}['copyRender'+'Target'](_0x4680e3,_0x3ddead,_0x1746c5,_0x46075e){var _0x453f65,_0x5aee94;const _0x32ea92=this['gl'];if(_0x4680e3===this['backBuffer']&&(_0x4680e3=null),_0x1746c5){if(_0x3ddead){if(_0x4680e3){if(!_0x4680e3['_colorBuff'+'er']||!_0x3ddead['_colorBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20color\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(0xa32+0x9ad*-0x2+-0x23*-0x43);if(_0x4680e3['_colorBuff'+'er']['_format']!==_0x3ddead['_colorBuff'+'er']['_format'])return w['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20c'+'olor\x20forma'+'ts'),!(-0x539+-0x94c+0xe86);}}else{if(!_0x4680e3['_colorBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20empty\x20col'+'or\x20buffer\x20'+'to\x20backbuf'+'fer'),!(-0x23b5+0x1*-0x16d4+0x3a8a);}}if(_0x46075e&&_0x4680e3&&!_0x4680e3['_depth']){if(!_0x4680e3['_depthBuff'+'er']||!_0x3ddead['_depthBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20depth\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(0x8df*0x1+0x81b+0x37*-0x4f);if(_0x4680e3['_depthBuff'+'er']['_format']!==_0x3ddead['_depthBuff'+'er']['_format'])return w['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20d'+'epth\x20forma'+'ts'),!(0x15af+-0x16b*-0x8+0x2*-0x1083);}Q['pushGpuMar'+'ker'](this,'COPY-RT');const _0x35883e=this['renderTarg'+'et'];this['renderTarg'+'et']=_0x3ddead,this['updateBegi'+'n']();const _0x655a83=_0x4680e3?_0x4680e3['impl']['_glFrameBu'+'ffer']:(_0x453f65=this['backBuffer'])==null?void(0x1395+-0x1bfb+0x866):_0x453f65['impl']['_glFrameBu'+'ffer'],_0x3421e2=_0x3ddead?_0x3ddead['impl']['_glFrameBu'+'ffer']:(_0x5aee94=this['backBuffer'])==null?void(0x1*-0xf7c+-0xa89*-0x3+-0x101f):_0x5aee94['impl']['_glFrameBu'+'ffer'];w['assert'](_0x655a83!==_0x3421e2,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x32ea92['bindFrameb'+'uffer'](_0x32ea92['READ_FRAME'+'BUFFER'],_0x655a83),_0x32ea92['bindFrameb'+'uffer'](_0x32ea92['DRAW_FRAME'+'BUFFER'],_0x3421e2);const _0x185d4=_0x4680e3?_0x4680e3['width']:_0x3ddead?_0x3ddead['width']:this['width'],_0x274e74=_0x4680e3?_0x4680e3['height']:_0x3ddead?_0x3ddead['height']:this['height'];return _0x32ea92['blitFrameb'+'uffer'](-0x5d9*-0x1+0xdd9+-0x13b2,-0x1743+0x57*0x29+0x31c*0x3,_0x185d4,_0x274e74,-0x132b+-0x14*-0x16f+0x3*-0x32b,-0x2*0x98b+0xe16+-0x100*-0x5,_0x185d4,_0x274e74,(_0x1746c5?_0x32ea92['COLOR_BUFF'+'ER_BIT']:-0x1562+-0x2707+0x3c69)|(_0x46075e?_0x32ea92['DEPTH_BUFF'+'ER_BIT']:-0xc0b*0x1+-0x2*0x8f1+-0x2f*-0xa3),_0x32ea92['NEAREST']),this['renderTarg'+'et']=_0x35883e,_0x32ea92['bindFrameb'+'uffer'](_0x32ea92['FRAMEBUFFE'+'R'],_0x35883e?_0x35883e['impl']['_glFrameBu'+'ffer']:null),Q['popGpuMark'+'er'](this),!(0x7*-0x407+-0x1bf+-0x4*-0x77c);}['frameStart'](){super['frameStart'](),this['updateBack'+'buffer'](),this['gpuProfile'+'r']['frameStart']();}['frameEnd'](){super['frameEnd'](),this['gpuProfile'+'r']['frameEnd'](),this['gpuProfile'+'r']['request']();}['startRende'+'rPass'](_0x1d0ed8){const _0x3bb92c=_0x1d0ed8['renderTarg'+'et']??this['backBuffer'];this['renderTarg'+'et']=_0x3bb92c,w['assert'](_0x3bb92c),Q['pushGpuMar'+'ker'](this,'Pass:'+_0x1d0ed8['name']+'\x20RT:'+_0x3bb92c['name']),Q['pushGpuMar'+'ker'](this,'START-PASS'),this['updateBegi'+'n']();const {width:_0x5f1bb4,height:_0x6471bf}=_0x3bb92c;this['setViewpor'+'t'](-0x14c4+-0x1bf4+0x30b8,0xb6f*0x2+0x1ea3+-0x3581,_0x5f1bb4,_0x6471bf),this['setScissor'](0x7c4+-0xd*-0xc5+-0x11c5*0x1,-0x203c+-0xd17*0x1+-0x2d53*-0x1,_0x5f1bb4,_0x6471bf);const _0xf12e7=_0x1d0ed8['colorOps'],_0x3b93fe=_0x1d0ed8['depthStenc'+'ilOps'];if(_0xf12e7!=null&&_0xf12e7['clear']||_0x3b93fe['clearDepth']||_0x3b93fe['clearStenc'+'il']){let _0x549104=-0x2*0x31d+-0xf8e+0x15c8;const _0x478432={};_0xf12e7!=null&&_0xf12e7['clear']&&(_0x549104|=jo,_0x478432['color']=[_0xf12e7['clearValue']['r'],_0xf12e7['clearValue']['g'],_0xf12e7['clearValue']['b'],_0xf12e7['clearValue']['a']]),_0x3b93fe['clearDepth']&&(_0x549104|=Yo,_0x478432['depth']=_0x3b93fe['clearDepth'+'Value']),_0x3b93fe['clearStenc'+'il']&&(_0x549104|=ch,_0x478432['stencil']=_0x3b93fe['clearStenc'+'ilValue']),_0x478432['flags']=_0x549104,this['clear'](_0x478432);}w['call'](()=>{this['insideRend'+'erPass']&&w['errorOnce']('RenderPass'+'\x20cannot\x20be'+'\x20started\x20w'+'hile\x20insid'+'e\x20another\x20'+'render\x20pas'+'s.');}),this['insideRend'+'erPass']=!(-0x1c06*0x1+-0x21d3+-0x3dd9*-0x1),Q['popGpuMark'+'er'](this);}['endRenderP'+'ass'](_0x135fd7){var _0x22ddd7;Q['pushGpuMar'+'ker'](this,'END-PASS'),this['unbindVert'+'exArray']();const _0x5859ae=this['renderTarg'+'et'],_0x4481d2=_0x135fd7['colorArray'+'Ops']['length'];if(_0x5859ae){Da['length']=-0xeb1+0xb72+-0x1*-0x33f;const _0x48e957=this['gl'];for(let _0x442320=0x3*-0xa65+-0x114f+0x307e;_0x442320<_0x4481d2;_0x442320++){const _0x14944b=_0x135fd7['colorArray'+'Ops'][_0x442320];_0x14944b['store']||_0x14944b['resolve']||Da['push'](_0x48e957['COLOR_ATTA'+'CHMENT0']+_0x442320);}_0x5859ae!==this['backBuffer']&&(_0x135fd7['depthStenc'+'ilOps']['storeDepth']||Da['push'](_0x48e957['DEPTH_ATTA'+'CHMENT']),_0x135fd7['depthStenc'+'ilOps']['storeStenc'+'il']||Da['push'](_0x48e957['STENCIL_AT'+'TACHMENT'])),Da['length']>-0xc0f*-0x1+-0x1*-0x13cf+-0x1fde&&_0x135fd7['fullSizeCl'+'earRect']&&_0x48e957['invalidate'+'Framebuffe'+'r'](_0x48e957['DRAW_FRAME'+'BUFFER'],Da),_0x4481d2&&((_0x22ddd7=_0x135fd7['colorOps'])!=null&&_0x22ddd7['resolve'])&&_0x135fd7['samples']>-0x1*0x2151+0x23bd+-0x26b*0x1&&_0x5859ae['autoResolv'+'e']&&_0x5859ae['resolve'](!(0x8*0x13+-0x2*0x1285+0x2472),!(-0x13b1+-0x5*0x1c9+0x1c9f)),_0x5859ae['depthBuffe'+'r']&&_0x135fd7['depthStenc'+'ilOps']['resolveDep'+'th']&&_0x135fd7['samples']>0x2c*0xc5+0xdd+-0x22b8&&_0x5859ae['autoResolv'+'e']&&_0x5859ae['resolve'](!(-0x22ae+0x1de*-0x7+0x2fc1),!(0x4*0x231+-0x21bc+0x88*0x2f));for(let _0x4465c6=0x7dc*-0x4+-0x1295*-0x1+0x449*0x3;_0x4465c6<_0x4481d2;_0x4465c6++)if(_0x135fd7['colorArray'+'Ops'][_0x4465c6]['genMipmaps']){const _0x5580ea=_0x5859ae['_colorBuff'+'ers'][_0x4465c6];_0x5580ea&&_0x5580ea['impl']['_glTexture']&&_0x5580ea['mipmaps']&&(Q['pushGpuMar'+'ker'](this,'MIPS'+_0x4465c6),this['activeText'+'ure'](this['maxCombine'+'dTextures']-(-0x9c4+-0x140*-0xa+-0x3*0xe9)),this['bindTextur'+'e'](_0x5580ea),this['gl']['generateMi'+'pmap'](_0x5580ea['impl']['_glTarget']),Q['popGpuMark'+'er'](this));}}this['insideRend'+'erPass']=!(0x22c8+-0xb*-0x2fe+-0x43b1),Q['popGpuMark'+'er'](this),Q['popGpuMark'+'er'](this);}set['defaultFra'+'mebuffer'](_0x5c9fa6){this['_defaultFr'+'amebuffer']!==_0x5c9fa6&&(this['_defaultFr'+'amebuffer']=_0x5c9fa6,this['_defaultFr'+'amebufferC'+'hanged']=!(-0x73*-0xa+-0x1d5b+0x18dd));}get['defaultFra'+'mebuffer'](){return this['_defaultFr'+'amebuffer'];}['updateBegi'+'n'](){if(Q['pushGpuMar'+'ker'](this,'UPDATE-BEG'+'IN'),this['boundVao']=null,this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']){for(let _0x3c2907=-0x528+0xcbe+-0x2*0x3cb;_0x3c2907<this['textureUni'+'ts']['length'];++_0x3c2907)for(let _0x8a4b0b=0x7db*0x1+0x212*0x4+-0x1023;_0x8a4b0b<-0x3*0x849+-0x1c41+0x351f;++_0x8a4b0b)this['textureUni'+'ts'][_0x3c2907][_0x8a4b0b]=null;}const _0x1844d8=this['renderTarg'+'et']??this['backBuffer'];w['assert'](_0x1844d8);const _0x28a7c2=_0x1844d8['impl'];_0x28a7c2['initialize'+'d']||this['initRender'+'Target'](_0x1844d8),this['setFramebu'+'ffer'](_0x28a7c2['_glFrameBu'+'ffer']),Q['popGpuMark'+'er'](this);}['updateEnd'](){Q['pushGpuMar'+'ker'](this,'UPDATE-END'),this['unbindVert'+'exArray']();const _0x2cc142=this['renderTarg'+'et'];if(_0x2cc142&&_0x2cc142!==this['backBuffer']){_0x2cc142['_samples']>-0x1156+0xa28*-0x1+0x1b7f*0x1&&_0x2cc142['autoResolv'+'e']&&_0x2cc142['resolve']();const _0x19517f=_0x2cc142['_colorBuff'+'er'];_0x19517f&&_0x19517f['impl']['_glTexture']&&_0x19517f['mipmaps']&&(this['activeText'+'ure'](this['maxCombine'+'dTextures']-(-0x7f*0x14+-0x2*-0x9de+-0x51*0x1f)),this['bindTextur'+'e'](_0x19517f),this['gl']['generateMi'+'pmap'](_0x19517f['impl']['_glTarget']));}Q['popGpuMark'+'er'](this);}['setUnpackF'+'lipY'](_0x302881){if(this['unpackFlip'+'Y']!==_0x302881){this['unpackFlip'+'Y']=_0x302881;const _0xec8a6b=this['gl'];_0xec8a6b['pixelStore'+'i'](_0xec8a6b['UNPACK_FLI'+'P_Y_WEBGL'],_0x302881);}}['setUnpackP'+'remultiply'+'Alpha'](_0x43e22f){if(this['unpackPrem'+'ultiplyAlp'+'ha']!==_0x43e22f){this['unpackPrem'+'ultiplyAlp'+'ha']=_0x43e22f;const _0x8c8b7=this['gl'];_0x8c8b7['pixelStore'+'i'](_0x8c8b7['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],_0x43e22f);}}['activeText'+'ure'](_0x3d8770){this['textureUni'+'t']!==_0x3d8770&&(this['gl']['activeText'+'ure'](this['gl']['TEXTURE0']+_0x3d8770),this['textureUni'+'t']=_0x3d8770);}['bindTextur'+'e'](_0x1b34b9){const _0x50abc5=_0x1b34b9['impl'],_0x5d6266=_0x50abc5['_glTarget'],_0x192549=_0x50abc5['_glTexture'],_0x148071=this['textureUni'+'t'],_0x547894=this['targetToSl'+'ot'][_0x5d6266];this['textureUni'+'ts'][_0x148071][_0x547894]!==_0x192549&&(this['gl']['bindTextur'+'e'](_0x5d6266,_0x192549),this['textureUni'+'ts'][_0x148071][_0x547894]=_0x192549);}['bindTextur'+'eOnUnit'](_0x591eab,_0x4d4596){const _0x106b17=_0x591eab['impl'],_0x50ef63=_0x106b17['_glTarget'],_0x256207=_0x106b17['_glTexture'],_0x5adace=this['targetToSl'+'ot'][_0x50ef63];this['textureUni'+'ts'][_0x4d4596][_0x5adace]!==_0x256207&&(this['activeText'+'ure'](_0x4d4596),this['gl']['bindTextur'+'e'](_0x50ef63,_0x256207),this['textureUni'+'ts'][_0x4d4596][_0x5adace]=_0x256207);}['setTexture'+'Parameters'](_0x2e97cc){const _0x290cec=this['gl'],_0x49282a=_0x2e97cc['impl']['dirtyParam'+'eterFlags'],_0x1fb142=_0x2e97cc['impl']['_glTarget'];if(_0x49282a&Ay){let _0x174148=_0x2e97cc['_minFilter'];(!_0x2e97cc['_mipmaps']||_0x2e97cc['_compresse'+'d']&&_0x2e97cc['_levels']['length']===-0x1f8+0x5f*-0x9+0x550)&&(_0x174148===Kh||_0x174148===Zh?_0x174148=Te:(_0x174148===Qh||_0x174148===ma)&&(_0x174148=vt)),_0x290cec['texParamet'+'eri'](_0x1fb142,_0x290cec['TEXTURE_MI'+'N_FILTER'],this['glFilter'][_0x174148]);}if(_0x49282a&Cy&&_0x290cec['texParamet'+'eri'](_0x1fb142,_0x290cec['TEXTURE_MA'+'G_FILTER'],this['glFilter'][_0x2e97cc['_magFilter']]),_0x49282a&Py&&_0x290cec['texParamet'+'eri'](_0x1fb142,_0x290cec['TEXTURE_WR'+'AP_S'],this['glAddress'][_0x2e97cc['_addressU']]),_0x49282a&My&&_0x290cec['texParamet'+'eri'](_0x1fb142,_0x290cec['TEXTURE_WR'+'AP_T'],this['glAddress'][_0x2e97cc['_addressV']]),_0x49282a&Dy&&_0x290cec['texParamet'+'eri'](_0x1fb142,_0x290cec['TEXTURE_WR'+'AP_R'],this['glAddress'][_0x2e97cc['_addressW']]),_0x49282a&Iy&&_0x290cec['texParamet'+'eri'](_0x1fb142,_0x290cec['TEXTURE_CO'+'MPARE_MODE'],_0x2e97cc['_compareOn'+'Read']?_0x290cec['COMPARE_RE'+'F_TO_TEXTU'+'RE']:_0x290cec['NONE']),_0x49282a&Ly&&_0x290cec['texParamet'+'eri'](_0x1fb142,_0x290cec['TEXTURE_CO'+'MPARE_FUNC'],this['glComparis'+'on'][_0x2e97cc['_compareFu'+'nc']]),_0x49282a&Ry){const _0x494d10=this['extTexture'+'FilterAnis'+'otropic'];_0x494d10&&_0x290cec['texParamet'+'erf'](_0x1fb142,_0x494d10['TEXTURE_MA'+'X_ANISOTRO'+'PY_EXT'],Y['clamp'](Math['round'](_0x2e97cc['_anisotrop'+'y']),0xce7+-0x166b+0x1*0x985,this['maxAnisotr'+'opy']));}}['setTexture'](_0x3ea835,_0x50eedd){const _0x28d189=_0x3ea835['impl'];_0x28d189['_glTexture']||_0x28d189['initialize'](this,_0x3ea835),_0x28d189['dirtyParam'+'eterFlags']>-0xcbb+-0xa1*-0x11+0x20a||_0x3ea835['_needsUplo'+'ad']||_0x3ea835['_needsMipm'+'apsUpload']?(this['activeText'+'ure'](_0x50eedd),this['bindTextur'+'e'](_0x3ea835),_0x28d189['dirtyParam'+'eterFlags']&&(this['setTexture'+'Parameters'](_0x3ea835),_0x28d189['dirtyParam'+'eterFlags']=-0x129a+0x3*-0x2a7+0x1a8f*0x1),(_0x3ea835['_needsUplo'+'ad']||_0x3ea835['_needsMipm'+'apsUpload'])&&(_0x28d189['upload'](this,_0x3ea835),_0x3ea835['_needsUplo'+'ad']=!(0x2490+-0x1*-0x1922+-0x3db1),_0x3ea835['_needsMipm'+'apsUpload']=!(0x208+0xb5c+-0xd63))):this['bindTextur'+'eOnUnit'](_0x3ea835,_0x50eedd);}['createVert'+'exArray'](_0x4749c9){let _0x5c9bfb,_0x145e7c;const _0x1b80e9=_0x4749c9['length']>-0x22e8+-0xc*-0x24+0xf*0x237;if(_0x1b80e9){_0x5c9bfb='';for(let _0x44e687=-0x394+0x17c6+0x6e*-0x2f;_0x44e687<_0x4749c9['length'];_0x44e687++){const _0x39a143=_0x4749c9[_0x44e687];_0x5c9bfb+=_0x39a143['id']+_0x39a143['format']['renderingH'+'ash'];}_0x145e7c=this['_vaoMap']['get'](_0x5c9bfb);}if(!_0x145e7c){const _0x48410b=this['gl'];_0x145e7c=_0x48410b['createVert'+'exArray'](),_0x48410b['bindVertex'+'Array'](_0x145e7c),_0x48410b['bindBuffer'](_0x48410b['ELEMENT_AR'+'RAY_BUFFER'],null);let _0x17f78a=!(0x1ecb*-0x1+0x2*-0xd3b+0x3*0x1316);for(let _0x1dd0d0=-0x2*-0xb56+-0x1*0xa06+-0xca6;_0x1dd0d0<_0x4749c9['length'];_0x1dd0d0++){const _0x5bfa02=_0x4749c9[_0x1dd0d0];_0x48410b['bindBuffer'](_0x48410b['ARRAY_BUFF'+'ER'],_0x5bfa02['impl']['bufferId']);const _0x11f7c1=_0x5bfa02['format']['elements'];for(let _0x1ecfaf=0x7*0x8a+-0x1*-0xb5c+-0xf22;_0x1ecfaf<_0x11f7c1['length'];_0x1ecfaf++){const _0x5360b5=_0x11f7c1[_0x1ecfaf],_0x2ca1a6=Le[_0x5360b5['name']];_0x2ca1a6===-0x11*0xc7+0x2071+-0x1*0x133a&&(_0x17f78a=!(-0x109*0x4+0x11*-0x153+0x1aa7)),_0x5360b5['asInt']?_0x48410b['vertexAttr'+'ibIPointer'](_0x2ca1a6,_0x5360b5['numCompone'+'nts'],this['glType'][_0x5360b5['dataType']],_0x5360b5['stride'],_0x5360b5['offset']):_0x48410b['vertexAttr'+'ibPointer'](_0x2ca1a6,_0x5360b5['numCompone'+'nts'],this['glType'][_0x5360b5['dataType']],_0x5360b5['normalize'],_0x5360b5['stride'],_0x5360b5['offset']),_0x48410b['enableVert'+'exAttribAr'+'ray'](_0x2ca1a6),_0x5bfa02['format']['instancing']&&_0x48410b['vertexAttr'+'ibDivisor'](_0x2ca1a6,-0x2be+0xc5*-0x1b+0x1786);}}_0x48410b['bindVertex'+'Array'](null),_0x48410b['bindBuffer'](_0x48410b['ARRAY_BUFF'+'ER'],null),_0x1b80e9&&this['_vaoMap']['set'](_0x5c9bfb,_0x145e7c),_0x17f78a||w['warn']('No\x20vertex\x20'+'attribute\x20'+'is\x20mapped\x20'+'to\x20locatio'+'n\x200,\x20which'+'\x20might\x20cau'+'se\x20compati'+'bility\x20iss'+'ues\x20on\x20Saf'+'ari\x20on\x20Mac'+'OS\x20-\x20pleas'+'e\x20use\x20attr'+'ibute\x20SEMA'+'NTIC_POSIT'+'ION\x20or\x20SEM'+'ANTIC_ATTR'+'15');}return _0x145e7c;}['unbindVert'+'exArray'](){this['boundVao']&&(this['boundVao']=null,this['gl']['bindVertex'+'Array'](null));}['setBuffers'](_0x54f7a6){const _0x9e8df6=this['gl'];let _0x4304e5;if(this['vertexBuff'+'ers']['length']===-0x20a5+-0x1ca4+0x3d4a){const _0x18d3f5=this['vertexBuff'+'ers'][0x4ed*0x2+-0x1*0x1d24+0x337*0x6];w['assert'](_0x18d3f5['device']===this,'The\x20Vertex'+'Buffer\x20was'+'\x20not\x20creat'+'ed\x20using\x20c'+'urrent\x20Gra'+'phicsDevic'+'e'),_0x18d3f5['impl']['vao']||(_0x18d3f5['impl']['vao']=this['createVert'+'exArray'](this['vertexBuff'+'ers'])),_0x4304e5=_0x18d3f5['impl']['vao'];}else _0x4304e5=this['createVert'+'exArray'](this['vertexBuff'+'ers']);this['boundVao']!==_0x4304e5&&(this['boundVao']=_0x4304e5,_0x9e8df6['bindVertex'+'Array'](_0x4304e5));const _0x40e66c=_0x54f7a6?_0x54f7a6['impl']['bufferId']:null;_0x9e8df6['bindBuffer'](_0x9e8df6['ELEMENT_AR'+'RAY_BUFFER'],_0x40e66c);}['draw'](_0x55c073,_0x4138e7,_0x38587d,_0x338553,_0x283325=!(-0x16e0+0x1c45*0x1+0x1*-0x565),_0x54561c=!(0xcd2+0x195a+-0x1c*0x15d)){const _0x2a6768=this['shader'];if(_0x2a6768&&(this['activateSh'+'ader'](),this['shaderVali'+'d'])){const _0x5572f5=this['gl'];_0x283325&&(w['call'](()=>{var _0x1670d7,_0x222ecb;return this['validateAt'+'tributes'](this['shader'],(_0x1670d7=this['vertexBuff'+'ers'][-0x1eaf+-0x6ab*0x3+0x32b0])==null?void(0x2519+-0x8*0x23b+-0x66b*0x3):_0x1670d7['format'],(_0x222ecb=this['vertexBuff'+'ers'][-0x3f5*-0x1+0x154c+-0x65*0x40])==null?void(0x26f0+-0x11ed*-0x1+-0x1*0x38dd):_0x222ecb['format']);}),this['setBuffers'](_0x4138e7));let _0x444cb8=0x4*-0x83d+-0x21d2+-0x2a*-0x197;const _0x274aea=_0x2a6768['impl']['samplers'];for(let _0x21f84a=0x114a*0x1+-0x982+-0x7c8,_0x20f239=_0x274aea['length'];_0x21f84a<_0x20f239;_0x21f84a++){const _0x4a6b64=_0x274aea[_0x21f84a];let _0x476670=_0x4a6b64['scopeId']['value'];if(!_0x476670){const _0x4607eb=_0x4a6b64['scopeId']['name'];w['assert'](_0x4607eb!=='texture_gr'+'abPass','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27texture'+'_grabPass\x27'+'\x20is\x20not\x20lo'+'nger\x20suppo'+'rted,\x20use\x20'+'\x27uSceneCol'+'orMap\x27\x20ins'+'tead'),w['assert'](_0x4607eb!=='uDepthMap','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27uDepthM'+'ap\x27\x20is\x20not'+'\x20longer\x20su'+'pported,\x20u'+'se\x20\x27uScene'+'DepthMap\x27\x20'+'instead'),_0x4607eb==='uSceneDept'+'hMap'&&(w['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x476670=fa(this,'white')),_0x4607eb==='uSceneColo'+'rMap'&&(w['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x476670=fa(this,'pink')),_0x476670||(w['errorOnce']('Shader\x20'+_0x2a6768['name']+'\x20requires\x20'+_0x4607eb+('\x20texture\x20w'+'hich\x20was\x20n'+'ot\x20set.\x20Re'+'ndering\x20[')+Q['toString']()+']',_0x2a6768),_0x476670=fa(this,'pink'));}if(_0x476670 instanceof _e){const _0x12556f=_0x476670;this['setTexture'](_0x12556f,_0x444cb8),this['renderTarg'+'et']&&this['renderTarg'+'et']['_samples']<0x1566+0x49c+-0x1a00&&(this['renderTarg'+'et']['colorBuffe'+'r']&&this['renderTarg'+'et']['colorBuffe'+'r']===_0x12556f?w['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20color\x20b'+'uffer\x20as\x20a'+'\x20texture',{'renderTarget':this['renderTarg'+'et'],'texture':_0x12556f}):this['renderTarg'+'et']['depthBuffe'+'r']&&this['renderTarg'+'et']['depthBuffe'+'r']===_0x12556f&&w['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20depth\x20b'+'uffer\x20as\x20a'+'\x20texture',{'texture':_0x12556f})),_0x4a6b64['slot']!==_0x444cb8&&(_0x5572f5['uniform1i'](_0x4a6b64['locationId'],_0x444cb8),_0x4a6b64['slot']=_0x444cb8),_0x444cb8++;}else{_0x4a6b64['array']['length']=-0x1569+0x1*-0xf6c+-0x15*-0x1c1;const _0x978ade=_0x476670['length'];for(let _0x2a3037=0x460+0x135b+0x4b*-0x51;_0x2a3037<_0x978ade;_0x2a3037++){const _0x54fc30=_0x476670[_0x2a3037];this['setTexture'](_0x54fc30,_0x444cb8),_0x4a6b64['array'][_0x2a3037]=_0x444cb8,_0x444cb8++;}_0x5572f5['uniform1iv'](_0x4a6b64['locationId'],_0x4a6b64['array']);}}const _0xab06f2=_0x2a6768['impl']['uniforms'];for(let _0x3a6a64=-0x1fe4+0x69*0x4d+-0x1*-0x4f,_0x502b73=_0xab06f2['length'];_0x3a6a64<_0x502b73;_0x3a6a64++){const _0x247d80=_0xab06f2[_0x3a6a64],_0x1e8c28=_0x247d80['scopeId'],_0x228001=_0x247d80['version'],_0x4ac8ea=_0x1e8c28['versionObj'+'ect']['version'];if(_0x228001['globalId']!==_0x4ac8ea['globalId']||_0x228001['revision']!==_0x4ac8ea['revision']){_0x228001['globalId']=_0x4ac8ea['globalId'],_0x228001['revision']=_0x4ac8ea['revision'];const _0x56272d=_0x1e8c28['value'];_0x56272d!=null?this['commitFunc'+'tion'][_0x247d80['dataType']](_0x247d80,_0x56272d):w['warnOnce']('Shader\x20['+_0x2a6768['label']+(']\x20requires'+'\x20uniform\x20[')+_0x247d80['scopeId']['name']+(']\x20which\x20ha'+'s\x20not\x20been'+'\x20set,\x20whil'+'e\x20renderin'+'g\x20[')+Q['toString']()+']');}}this['transformF'+'eedbackBuf'+'fer']&&(_0x5572f5['bindBuffer'+'Base'](_0x5572f5['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],-0x1e23*0x1+-0x4*-0x31f+-0x11a7*-0x1,this['transformF'+'eedbackBuf'+'fer']['impl']['bufferId']),_0x5572f5['beginTrans'+'formFeedba'+'ck'](_0x5572f5['POINTS']));const _0x6901bb=this['glPrimitiv'+'e'][_0x55c073['type']],_0x1d44cd=_0x55c073['count'];if(_0x55c073['indexed']){w['assert'](_0x4138e7['device']===this,'The\x20IndexB'+'uffer\x20was\x20'+'not\x20create'+'d\x20using\x20cu'+'rrent\x20Grap'+'hicsDevice');const _0x18437e=_0x4138e7['impl']['glFormat'],_0x397717=_0x55c073['base']*_0x4138e7['bytesPerIn'+'dex'];_0x38587d>0xa28+0x419+0x29*-0x59?_0x5572f5['drawElemen'+'tsInstance'+'d'](_0x6901bb,_0x1d44cd,_0x18437e,_0x397717,_0x38587d):_0x5572f5['drawElemen'+'ts'](_0x6901bb,_0x1d44cd,_0x18437e,_0x397717);}else{const _0x4d1924=_0x55c073['base'];_0x38587d>-0x2c8+-0x1*-0x1e79+0x1a1*-0x11?_0x5572f5['drawArrays'+'Instanced'](_0x6901bb,_0x4d1924,_0x1d44cd,_0x38587d):_0x5572f5['drawArrays'](_0x6901bb,_0x4d1924,_0x1d44cd);}this['transformF'+'eedbackBuf'+'fer']&&(_0x5572f5['endTransfo'+'rmFeedback'](),_0x5572f5['bindBuffer'+'Base'](_0x5572f5['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],-0x5a7*-0x1+-0x14b*0x1+0x24*-0x1f,null)),this['_drawCalls'+'PerFrame']++,this['_primsPerF'+'rame'][_0x55c073['type']]+=_0x55c073['count']*(_0x38587d>0x476*0x2+0x654+-0xf3f?_0x38587d:-0x5db+0x16f1+-0x1115);}_0x54561c&&this['clearVerte'+'xBuffer']();}['clear'](_0x1162ac){const _0x1b64bb=this['defaultCle'+'arOptions'];_0x1162ac=_0x1162ac||_0x1b64bb;const _0x3a5bd2=_0x1162ac['flags']??_0x1b64bb['flags'];if(_0x3a5bd2!==0x11d+-0x13f*0x19+0x1e0a){const _0xcc78c2=this['gl'];if(_0x3a5bd2&jo){const _0x3cee11=_0x1162ac['color']??_0x1b64bb['color'],_0x8335d2=_0x3cee11[0xa16+0x37*-0x91+0x1511*0x1],_0x2e1829=_0x3cee11[-0x1855+-0x1847+0x83*0x5f],_0x5e8d13=_0x3cee11[0x3f1*-0x1+0x2cf+-0x1*-0x124],_0x56b89b=_0x3cee11[0x6b1+0xcd*0x6+-0xb7c],_0x242073=this['clearColor'];(_0x8335d2!==_0x242073['r']||_0x2e1829!==_0x242073['g']||_0x5e8d13!==_0x242073['b']||_0x56b89b!==_0x242073['a'])&&(this['gl']['clearColor'](_0x8335d2,_0x2e1829,_0x5e8d13,_0x56b89b),this['clearColor']['set'](_0x8335d2,_0x2e1829,_0x5e8d13,_0x56b89b)),this['setBlendSt'+'ate'](pt['NOBLEND']);}if(_0x3a5bd2&Yo){const _0x14b9bf=_0x1162ac['depth']??_0x1b64bb['depth'];_0x14b9bf!==this['clearDepth']&&(this['gl']['clearDepth'](_0x14b9bf),this['clearDepth']=_0x14b9bf),this['setDepthSt'+'ate'](Yt['WRITEDEPTH']);}if(_0x3a5bd2&ch){const _0x2db142=_0x1162ac['stencil']??_0x1b64bb['stencil'];_0x2db142!==this['clearStenc'+'il']&&(this['gl']['clearStenc'+'il'](_0x2db142),this['clearStenc'+'il']=_0x2db142),_0xcc78c2['stencilMas'+'k'](-0x7b5+0x85*0x17+0x1*-0x33f),this['stencilWri'+'teMaskFron'+'t']=-0x100d+-0x268b+0x3797,this['stencilWri'+'teMaskBack']=0xe0*-0xc+0x9f5*-0x3+-0x423*-0xa;}_0xcc78c2['clear'](this['glClearFla'+'g'][_0x3a5bd2]);}}['submit'](){this['gl']['flush']();}['readPixels'](_0x23befa,_0x1d4f12,_0x22cc59,_0x530aa9,_0x50a91a){const _0x5b2eac=this['gl'];_0x5b2eac['readPixels'](_0x23befa,_0x1d4f12,_0x22cc59,_0x530aa9,_0x5b2eac['RGBA'],_0x5b2eac['UNSIGNED_B'+'YTE'],_0x50a91a);}['clientWait'+'Async'](_0x1df0eb,_0x587f83){const _0x4166f6=this['gl'],_0x3c2164=_0x4166f6['fenceSync'](_0x4166f6['SYNC_GPU_C'+'OMMANDS_CO'+'MPLETE'],0x1*-0xc7e+0x1*0x14ea+-0x86c);return this['submit'](),new Promise((_0x3d270e,_0x146781)=>{function _0x2015ce(){const _0x1d2995=_0x4166f6['clientWait'+'Sync'](_0x3c2164,_0x1df0eb,-0x1d88+-0x2211+0x3f99);_0x1d2995===_0x4166f6['TIMEOUT_EX'+'PIRED']?setTimeout(_0x2015ce,_0x587f83):(_0x4166f6['deleteSync'](_0x3c2164),_0x1d2995===_0x4166f6['WAIT_FAILE'+'D']?_0x146781(new Error('webgl\x20clie'+'ntWaitSync'+'\x20sync\x20fail'+'ed')):_0x3d270e());}_0x2015ce();});}async['readPixels'+'Async'](_0x35877c,_0x4bb776,_0x471677,_0x470d3e,_0x40b60a){var _0xfef4b7;const _0x36adef=this['gl'],_0x5a92c9=(_0xfef4b7=this['renderTarg'+'et']['colorBuffe'+'r'])==null?void(0x24ec+-0xb43+0x1*-0x19a9):_0xfef4b7['impl'],_0x3e3bdc=(_0x5a92c9==null?void(0x24de+0x1636+0x1d8a*-0x2):_0x5a92c9['_glFormat'])??_0x36adef['RGBA'],_0x354952=(_0x5a92c9==null?void(0x13*-0x1d+0x2*-0x9e6+0x15f3):_0x5a92c9['_glPixelTy'+'pe'])??_0x36adef['UNSIGNED_B'+'YTE'],_0x1234f1=_0x36adef['createBuff'+'er']();return _0x36adef['bindBuffer'](_0x36adef['PIXEL_PACK'+'_BUFFER'],_0x1234f1),_0x36adef['bufferData'](_0x36adef['PIXEL_PACK'+'_BUFFER'],_0x40b60a['byteLength'],_0x36adef['STREAM_REA'+'D']),_0x36adef['readPixels'](_0x35877c,_0x4bb776,_0x471677,_0x470d3e,_0x3e3bdc,_0x354952,0x1*0x4db+-0x59e+-0x41*-0x3),_0x36adef['bindBuffer'](_0x36adef['PIXEL_PACK'+'_BUFFER'],null),await this['clientWait'+'Async'](-0x1f0f+-0x196*-0x13+-0x1*-0xed,0x1822*-0x1+-0x28+0x3*0x81e),_0x36adef['bindBuffer'](_0x36adef['PIXEL_PACK'+'_BUFFER'],_0x1234f1),_0x36adef['getBufferS'+'ubData'](_0x36adef['PIXEL_PACK'+'_BUFFER'],-0x113b+-0xa3c+0x1b77,_0x40b60a),_0x36adef['bindBuffer'](_0x36adef['PIXEL_PACK'+'_BUFFER'],null),_0x36adef['deleteBuff'+'er'](_0x1234f1),_0x40b60a;}['readTextur'+'eAsync'](_0x3705a0,_0x330d4f,_0x2dbb67,_0x327b0a,_0x3afdf1,_0x429181){const _0x1c4bd2=_0x429181['face']??-0x1855*0x1+0x4*-0x769+0x29*0x151,_0x5e899d=_0x429181['renderTarg'+'et']??new gt({'colorBuffer':_0x3705a0,'depth':!(0xde7*-0x1+-0x20a4+0x2e8c),'face':_0x1c4bd2});w['assert'](_0x5e899d['colorBuffe'+'r']===_0x3705a0);const _0x1a325b=new ArrayBuffer(Xi['calcLevelG'+'puSize'](_0x327b0a,_0x3afdf1,0x2404+-0x1f*-0x73+-0x31f0,_0x3705a0['_format'])),_0x1a861a=_0x429181['data']??new(my(_0x3705a0['_format']))(_0x1a325b);return this['setRenderT'+'arget'](_0x5e899d),this['initRender'+'Target'](_0x5e899d),new Promise((_0x21f77d,_0x428f54)=>{this['readPixels'+'Async'](_0x330d4f,_0x2dbb67,_0x327b0a,_0x3afdf1,_0x1a861a)['then'](_0x10afb2=>{_0x429181['renderTarg'+'et']||_0x5e899d['destroy'](),_0x21f77d(_0x10afb2);})['catch'](_0x428f54);});}async['writeTextu'+'reAsync'](_0x26c2e9,_0x591b13,_0x53a426,_0x257dda,_0x5e19db,_0x3ba729){const _0x1e27e7=this['gl'],_0x4fc737=_0x26c2e9['impl'],_0x1b8191=(_0x4fc737==null?void(0x24a*0xd+0xed4+-0x2c96):_0x4fc737['_glFormat'])??_0x1e27e7['RGBA'],_0x8384b6=(_0x4fc737==null?void(-0x6*-0x193+0x1727+-0x2099):_0x4fc737['_glPixelTy'+'pe'])??_0x1e27e7['UNSIGNED_B'+'YTE'],_0x4f4f6f=_0x1e27e7['createBuff'+'er']();_0x1e27e7['bindBuffer'](_0x1e27e7['PIXEL_UNPA'+'CK_BUFFER'],_0x4f4f6f),_0x1e27e7['bufferData'](_0x1e27e7['PIXEL_UNPA'+'CK_BUFFER'],_0x3ba729,_0x1e27e7['STREAM_DRA'+'W']),_0x1e27e7['bindTextur'+'e'](_0x1e27e7['TEXTURE_2D'],_0x4fc737['_glTexture']),_0x1e27e7['texSubImag'+'e2D'](_0x1e27e7['TEXTURE_2D'],0x1*0x1835+0x18de*-0x1+-0xd*-0xd,_0x591b13,_0x53a426,_0x257dda,_0x5e19db,_0x1b8191,_0x8384b6,-0x43*-0x4f+0x58c*-0x5+0xd*0x8b),_0x1e27e7['bindBuffer'](_0x1e27e7['PIXEL_UNPA'+'CK_BUFFER'],null),_0x26c2e9['_needsUplo'+'ad']=!(0x8*-0x2f9+-0xf5d+-0x2726*-0x1),_0x26c2e9['_mipmapsUp'+'loaded']=!(-0xd13+0x163c+-0x928),await this['clientWait'+'Async'](-0x1d*-0x106+0x14e9+-0x3297,0x21*-0xfd+0x1*-0x19d+0x2a*0xd1);}['setAlphaTo'+'Coverage'](_0x1b91f7){this['alphaToCov'+'erage']!==_0x1b91f7&&(this['alphaToCov'+'erage']=_0x1b91f7,_0x1b91f7?this['gl']['enable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']):this['gl']['disable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']));}['setTransfo'+'rmFeedback'+'Buffer'](_0x50a337){if(this['transformF'+'eedbackBuf'+'fer']!==_0x50a337){this['transformF'+'eedbackBuf'+'fer']=_0x50a337;const _0xab9aef=this['gl'];_0x50a337?(this['feedback']||(this['feedback']=_0xab9aef['createTran'+'sformFeedb'+'ack']()),_0xab9aef['bindTransf'+'ormFeedbac'+'k'](_0xab9aef['TRANSFORM_'+'FEEDBACK'],this['feedback'])):_0xab9aef['bindTransf'+'ormFeedbac'+'k'](_0xab9aef['TRANSFORM_'+'FEEDBACK'],null);}}['setRaster'](_0x4d7778){this['raster']!==_0x4d7778&&(this['raster']=_0x4d7778,_0x4d7778?this['gl']['disable'](this['gl']['RASTERIZER'+'_DISCARD']):this['gl']['enable'](this['gl']['RASTERIZER'+'_DISCARD']));}['setStencil'+'Test'](_0x19b5b3){if(this['stencil']!==_0x19b5b3){const _0x14568f=this['gl'];_0x19b5b3?_0x14568f['enable'](_0x14568f['STENCIL_TE'+'ST']):_0x14568f['disable'](_0x14568f['STENCIL_TE'+'ST']),this['stencil']=_0x19b5b3;}}['setStencil'+'Func'](_0x238f80,_0x8d8cff,_0x49afb9){(this['stencilFun'+'cFront']!==_0x238f80||this['stencilRef'+'Front']!==_0x8d8cff||this['stencilMas'+'kFront']!==_0x49afb9||this['stencilFun'+'cBack']!==_0x238f80||this['stencilRef'+'Back']!==_0x8d8cff||this['stencilMas'+'kBack']!==_0x49afb9)&&(this['gl']['stencilFun'+'c'](this['glComparis'+'on'][_0x238f80],_0x8d8cff,_0x49afb9),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=_0x238f80,this['stencilRef'+'Front']=this['stencilRef'+'Back']=_0x8d8cff,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=_0x49afb9);}['setStencil'+'FuncFront'](_0x44450c,_0x50c031,_0x95acc3){if(this['stencilFun'+'cFront']!==_0x44450c||this['stencilRef'+'Front']!==_0x50c031||this['stencilMas'+'kFront']!==_0x95acc3){const _0x5eee37=this['gl'];_0x5eee37['stencilFun'+'cSeparate'](_0x5eee37['FRONT'],this['glComparis'+'on'][_0x44450c],_0x50c031,_0x95acc3),this['stencilFun'+'cFront']=_0x44450c,this['stencilRef'+'Front']=_0x50c031,this['stencilMas'+'kFront']=_0x95acc3;}}['setStencil'+'FuncBack'](_0x4fe4f4,_0x2236bf,_0x4aafbe){if(this['stencilFun'+'cBack']!==_0x4fe4f4||this['stencilRef'+'Back']!==_0x2236bf||this['stencilMas'+'kBack']!==_0x4aafbe){const _0x350cda=this['gl'];_0x350cda['stencilFun'+'cSeparate'](_0x350cda['BACK'],this['glComparis'+'on'][_0x4fe4f4],_0x2236bf,_0x4aafbe),this['stencilFun'+'cBack']=_0x4fe4f4,this['stencilRef'+'Back']=_0x2236bf,this['stencilMas'+'kBack']=_0x4aafbe;}}['setStencil'+'Operation'](_0x51c7e7,_0x480492,_0x36ed1d,_0x2af34e){(this['stencilFai'+'lFront']!==_0x51c7e7||this['stencilZfa'+'ilFront']!==_0x480492||this['stencilZpa'+'ssFront']!==_0x36ed1d||this['stencilFai'+'lBack']!==_0x51c7e7||this['stencilZfa'+'ilBack']!==_0x480492||this['stencilZpa'+'ssBack']!==_0x36ed1d)&&(this['gl']['stencilOp'](this['glStencilO'+'p'][_0x51c7e7],this['glStencilO'+'p'][_0x480492],this['glStencilO'+'p'][_0x36ed1d]),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=_0x51c7e7,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=_0x480492,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=_0x36ed1d),(this['stencilWri'+'teMaskFron'+'t']!==_0x2af34e||this['stencilWri'+'teMaskBack']!==_0x2af34e)&&(this['gl']['stencilMas'+'k'](_0x2af34e),this['stencilWri'+'teMaskFron'+'t']=_0x2af34e,this['stencilWri'+'teMaskBack']=_0x2af34e);}['setStencil'+'OperationF'+'ront'](_0x2e6a6b,_0xa7f47e,_0x3f35e6,_0x525def){(this['stencilFai'+'lFront']!==_0x2e6a6b||this['stencilZfa'+'ilFront']!==_0xa7f47e||this['stencilZpa'+'ssFront']!==_0x3f35e6)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['FRONT'],this['glStencilO'+'p'][_0x2e6a6b],this['glStencilO'+'p'][_0xa7f47e],this['glStencilO'+'p'][_0x3f35e6]),this['stencilFai'+'lFront']=_0x2e6a6b,this['stencilZfa'+'ilFront']=_0xa7f47e,this['stencilZpa'+'ssFront']=_0x3f35e6),this['stencilWri'+'teMaskFron'+'t']!==_0x525def&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['FRONT'],_0x525def),this['stencilWri'+'teMaskFron'+'t']=_0x525def);}['setStencil'+'OperationB'+'ack'](_0xa74386,_0x4cc4b4,_0x248464,_0x5125f2){(this['stencilFai'+'lBack']!==_0xa74386||this['stencilZfa'+'ilBack']!==_0x4cc4b4||this['stencilZpa'+'ssBack']!==_0x248464)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['BACK'],this['glStencilO'+'p'][_0xa74386],this['glStencilO'+'p'][_0x4cc4b4],this['glStencilO'+'p'][_0x248464]),this['stencilFai'+'lBack']=_0xa74386,this['stencilZfa'+'ilBack']=_0x4cc4b4,this['stencilZpa'+'ssBack']=_0x248464),this['stencilWri'+'teMaskBack']!==_0x5125f2&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['BACK'],_0x5125f2),this['stencilWri'+'teMaskBack']=_0x5125f2);}['setBlendSt'+'ate'](_0x5d5ed1){const _0x11a545=this['blendState'];if(!_0x11a545['equals'](_0x5d5ed1)){const _0x472df3=this['gl'],{blend:_0x22bd9c,colorOp:_0xbe7a46,alphaOp:_0x40f43b,colorSrcFactor:_0x4999f7,colorDstFactor:_0x43bbb5,alphaSrcFactor:_0x5a1908,alphaDstFactor:_0x5d3fd9}=_0x5d5ed1;if(_0x11a545['blend']!==_0x22bd9c&&(_0x22bd9c?_0x472df3['enable'](_0x472df3['BLEND']):_0x472df3['disable'](_0x472df3['BLEND'])),_0x11a545['colorOp']!==_0xbe7a46||_0x11a545['alphaOp']!==_0x40f43b){const _0x151afb=this['glBlendEqu'+'ation'];_0x472df3['blendEquat'+'ionSeparat'+'e'](_0x151afb[_0xbe7a46],_0x151afb[_0x40f43b]);}(_0x11a545['colorSrcFa'+'ctor']!==_0x4999f7||_0x11a545['colorDstFa'+'ctor']!==_0x43bbb5||_0x11a545['alphaSrcFa'+'ctor']!==_0x5a1908||_0x11a545['alphaDstFa'+'ctor']!==_0x5d3fd9)&&_0x472df3['blendFuncS'+'eparate'](this['glBlendFun'+'ctionColor'][_0x4999f7],this['glBlendFun'+'ctionColor'][_0x43bbb5],this['glBlendFun'+'ctionAlpha'][_0x5a1908],this['glBlendFun'+'ctionAlpha'][_0x5d3fd9]),_0x11a545['allWrite']!==_0x5d5ed1['allWrite']&&this['gl']['colorMask'](_0x5d5ed1['redWrite'],_0x5d5ed1['greenWrite'],_0x5d5ed1['blueWrite'],_0x5d5ed1['alphaWrite']),_0x11a545['copy'](_0x5d5ed1);}}['setBlendCo'+'lor'](_0x19beec,_0x32d6a,_0x1079f1,_0x1dd73b){const _0x149905=this['blendColor'];(_0x19beec!==_0x149905['r']||_0x32d6a!==_0x149905['g']||_0x1079f1!==_0x149905['b']||_0x1dd73b!==_0x149905['a'])&&(this['gl']['blendColor'](_0x19beec,_0x32d6a,_0x1079f1,_0x1dd73b),_0x149905['set'](_0x19beec,_0x32d6a,_0x1079f1,_0x1dd73b));}['setStencil'+'State'](_0x595cce,_0x2a1a8d){_0x595cce||_0x2a1a8d?(this['setStencil'+'Test'](!(0x1ba0+0x227e+0x2*-0x1f0f)),_0x595cce===_0x2a1a8d?(this['setStencil'+'Func'](_0x595cce['func'],_0x595cce['ref'],_0x595cce['readMask']),this['setStencil'+'Operation'](_0x595cce['fail'],_0x595cce['zfail'],_0x595cce['zpass'],_0x595cce['writeMask'])):(_0x595cce??(_0x595cce=pi['DEFAULT']),this['setStencil'+'FuncFront'](_0x595cce['func'],_0x595cce['ref'],_0x595cce['readMask']),this['setStencil'+'OperationF'+'ront'](_0x595cce['fail'],_0x595cce['zfail'],_0x595cce['zpass'],_0x595cce['writeMask']),_0x2a1a8d??(_0x2a1a8d=pi['DEFAULT']),this['setStencil'+'FuncBack'](_0x2a1a8d['func'],_0x2a1a8d['ref'],_0x2a1a8d['readMask']),this['setStencil'+'OperationB'+'ack'](_0x2a1a8d['fail'],_0x2a1a8d['zfail'],_0x2a1a8d['zpass'],_0x2a1a8d['writeMask']))):this['setStencil'+'Test'](!(-0x1*0x851+0x1d26+-0x14d4));}['setDepthSt'+'ate'](_0x305d30){const _0x100817=this['depthState'];if(!_0x100817['equals'](_0x305d30)){const _0x3bd8ca=this['gl'],_0x719e51=_0x305d30['write'];_0x100817['write']!==_0x719e51&&_0x3bd8ca['depthMask'](_0x719e51);let {func:_0x2b9231,test:_0x5ef075}=_0x305d30;!_0x5ef075&&_0x719e51&&(_0x5ef075=!(-0xacd+0xd47+-0x1*0x27a),_0x2b9231=Wi),_0x100817['func']!==_0x2b9231&&_0x3bd8ca['depthFunc'](this['glComparis'+'on'][_0x2b9231]),_0x100817['test']!==_0x5ef075&&(_0x5ef075?_0x3bd8ca['enable'](_0x3bd8ca['DEPTH_TEST']):_0x3bd8ca['disable'](_0x3bd8ca['DEPTH_TEST']));const {depthBias:_0x22d489,depthBiasSlope:_0x48d49d}=_0x305d30;_0x22d489||_0x48d49d?(this['depthBiasE'+'nabled']||(this['depthBiasE'+'nabled']=!(0x1fb4+0x950+-0x1a4*0x19),this['gl']['enable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x3bd8ca['polygonOff'+'set'](_0x48d49d,_0x22d489)):this['depthBiasE'+'nabled']&&(this['depthBiasE'+'nabled']=!(-0x1311+0x5*-0x3a4+0x12a3*0x2),this['gl']['disable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x100817['copy'](_0x305d30);}}['setCullMod'+'e'](_0x12b47c){if(this['cullMode']!==_0x12b47c){if(_0x12b47c===bt)this['gl']['disable'](this['gl']['CULL_FACE']);else{this['cullMode']===bt&&this['gl']['enable'](this['gl']['CULL_FACE']);const _0x589a9c=this['glCull'][_0x12b47c];this['cullFace']!==_0x589a9c&&(this['gl']['cullFace'](_0x589a9c),this['cullFace']=_0x589a9c);}this['cullMode']=_0x12b47c;}}['setShader'](_0x4de939,_0x4e5a76=!(-0x46e+0x664*-0x3+0x179b*0x1)){_0x4de939!==this['shader']&&(this['shader']=_0x4de939,this['shaderAsyn'+'cCompile']=_0x4e5a76,this['shaderVali'+'d']=void(0x19a9+0x1a7b*-0x1+-0x2*-0x69),this['_shaderSwi'+'tchesPerFr'+'ame']++);}['activateSh'+'ader'](){const {shader:_0x2ebc3d}=this,{impl:_0x411141}=_0x2ebc3d;this['shaderVali'+'d']===void(-0x19d0+0x26f*0xe+-0x842)&&(_0x2ebc3d['failed']?this['shaderVali'+'d']=!(0x2667+0x4dc+-0xe*0x317):_0x2ebc3d['ready']||(this['shaderAsyn'+'cCompile']?_0x411141['isLinked'](this)?_0x411141['finalize'](this,_0x2ebc3d)||(_0x2ebc3d['failed']=!(-0x24*-0xe+0x1d4f+-0x1f47),this['shaderVali'+'d']=!(0x7fa*-0x4+-0xcaa+0x1*0x2c93)):this['shaderVali'+'d']=!(-0x104*0xb+0x26a1+-0x1b74):_0x411141['finalize'](this,_0x2ebc3d)||(_0x2ebc3d['failed']=!(-0x1*-0x1912+0xbe8+-0x24fa),this['shaderVali'+'d']=!(0x172a+-0x2451+0xd28)))),this['shaderVali'+'d']===void(-0x355*0x3+0x119c+-0x1*0x79d)&&(this['gl']['useProgram'](_0x411141['glProgram']),this['shaderVali'+'d']=!(-0x80a+-0x771+-0x529*-0x3));}['clearVerte'+'xArrayObje'+'ctCache'](){const _0x1599e1=this['gl'];this['_vaoMap']['forEach']((_0x8acb8d,_0x537b87,_0x54061b)=>{_0x1599e1['deleteVert'+'exArray'](_0x8acb8d);}),this['_vaoMap']['clear']();}set['fullscreen'](_0x5567fa){_0x5567fa?this['gl']['canvas']['requestFul'+'lscreen']():document['exitFullsc'+'reen']();}get['fullscreen'](){return!!document['fullscreen'+'Element'];}['debugLoseC'+'ontext'](_0x4a54f4=0x3*0xc89+-0x1*0x95+-0x2*0x1251){const _0x29583f=this['gl']['getExtensi'+'on']('WEBGL_lose'+'_context');_0x29583f['loseContex'+'t'](),setTimeout(()=>_0x29583f['restoreCon'+'text'](),_0x4a54f4);}}let nw=-0xb*0x171+-0x69b+0x7d*0x2e;class br{constructor(_0x520a17,_0x210495,_0x14c34a,_0x1049d6=ms,_0x18153f,_0x2dcece){this['device']=_0x520a17,this['format']=_0x210495,this['numIndices']=_0x14c34a,this['usage']=_0x1049d6,this['id']=nw++,this['impl']=_0x520a17['createInde'+'xBufferImp'+'l'](this,_0x2dcece);const _0x470813=hT[_0x210495];this['bytesPerIn'+'dex']=_0x470813,this['numBytes']=this['numIndices']*_0x470813,_0x18153f?this['setData'](_0x18153f):this['storage']=new ArrayBuffer(this['numBytes']),this['adjustVram'+'SizeTracki'+'ng'](_0x520a17['_vram'],this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x17ba12=this['device'],_0x1c326d=_0x17ba12['buffers']['indexOf'](this);_0x1c326d!==-(0x26*-0x101+-0x304+0x292b)&&_0x17ba12['buffers']['splice'](_0x1c326d,0x251a+0x7*0x49c+-0x3*0x171f),this['device']['indexBuffe'+'r']===this&&(this['device']['indexBuffe'+'r']=null),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x17ba12),this['adjustVram'+'SizeTracki'+'ng'](_0x17ba12['_vram'],-this['storage']['byteLength']));}['adjustVram'+'SizeTracki'+'ng'](_0x59391f,_0x407738){w['trace'](j0,this['id']+'\x20size:\x20'+_0x407738+'\x20vram.ib:\x20'+_0x59391f['ib']+'\x20=>\x20'+(_0x59391f['ib']+_0x407738)),_0x59391f['ib']+=_0x407738;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getNumIndi'+'ces'](){return this['numIndices'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x957b8){return _0x957b8['byteLength']!==this['numBytes']?(w['error']('IndexBuffe'+'r:\x20wrong\x20i'+'nitial\x20dat'+'a\x20size:\x20ex'+'pected\x20'+this['numBytes']+',\x20got\x20'+_0x957b8['byteLength']),!(0x1e4c+-0x104+-0x1d47)):(this['storage']=_0x957b8,this['unlock'](),!(0xd*0xeb+-0x8f*-0x45+-0x327a));}['_lockTyped'+'Array'](){const _0x3cc6dc=this['lock']();return this['format']===wr?new Uint32Array(_0x3cc6dc):this['format']===Yi?new Uint16Array(_0x3cc6dc):new Uint8Array(_0x3cc6dc);}['writeData'](_0x414d7d,_0x391833){const _0x3bfa7a=this['_lockTyped'+'Array']();if(_0x414d7d['length']>_0x391833){if(ArrayBuffer['isView'](_0x414d7d))_0x414d7d=_0x414d7d['subarray'](-0x2*-0xaa9+-0x391*-0x5+-0x2727,_0x391833),_0x3bfa7a['set'](_0x414d7d);else{for(let _0x2bdb32=-0x2*0xd3a+-0x1107+-0x1*-0x2b7b;_0x2bdb32<_0x391833;_0x2bdb32++)_0x3bfa7a[_0x2bdb32]=_0x414d7d[_0x2bdb32];}}else _0x3bfa7a['set'](_0x414d7d);this['unlock']();}['readData'](_0x5411f6){const _0x34b89a=this['_lockTyped'+'Array'](),_0x3abbb4=this['numIndices'];if(ArrayBuffer['isView'](_0x5411f6))_0x5411f6['set'](_0x34b89a);else{_0x5411f6['length']=0x1b9a+0x95e+0x2*-0x127c;for(let _0x1c5531=-0x1*-0xb4a+0x7f*0x3+-0xcc7;_0x1c5531<_0x3abbb4;_0x1c5531++)_0x5411f6[_0x1c5531]=_0x34b89a[_0x1c5531];}return _0x3abbb4;}}class ow{constructor(){h(this,'clearValue',new ie(-0x11d7*0x1+-0x131d*-0x2+0x1463*-0x1,-0x1*-0xfb3+-0xc34+0xb3*-0x5,-0x1f12+0x1ab1+0x461,-0x665*0x1+0x1*0x23a8+-0x1d42)),h(this,'clearValue'+'Linear',new ie(0x2665*0x1+0x10*0x7f+-0x1d*0x199,-0x1f05+-0x29*0x1+0x266*0xd,-0xccf*0x2+-0x12fb+0x2c99,-0x3*-0x713+0x1cce+-0x3206)),h(this,'clear',!(0x17b4+-0x2b*-0x48+-0x77*0x4d)),h(this,'store',!(0x1c0+0x1*0x2368+-0x2527*0x1)),h(this,'resolve',!(0x4*0x3e5+0xaa+-0x103e)),h(this,'genMipmaps',!(0x22de*0x1+0x86c+-0x62f*0x7));}}class lw{constructor(){h(this,'clearDepth'+'Value',-0x1*-0x407+0x85*0x15+-0xeef),h(this,'clearStenc'+'ilValue',0x20e3+0xcfe+-0x2d*0x105),h(this,'clearDepth',!(0x1*0x12fb+0xbf*0xd+-0x1cad)),h(this,'clearStenc'+'il',!(0x104c+-0x2b7+-0xd94)),h(this,'storeDepth',!(-0xc09+0x1b66+-0x2*0x7ae)),h(this,'resolveDep'+'th',!(-0xe3c+0x2*-0xf6a+-0x2d11*-0x1)),h(this,'storeStenc'+'il',!(-0x1511+-0x2249+-0x17f*-0x25));}}class ys{constructor(_0x14a2cb){h(this,'_name'),h(this,'device'),h(this,'_enabled',!(-0x659+-0x1c5*0xc+0x1b95)),h(this,'_skipStart',!(-0x21dc+0xf35*-0x1+0x16*0x23b)),h(this,'_skipEnd',!(0x60*-0x3c+-0x1074+0x26f5)),h(this,'executeEna'+'bled',!(0x16cc+0x4*0x8ac+-0x11b*0x34)),h(this,'renderTarg'+'et'),h(this,'_options'),h(this,'samples',0xec0*0x2+-0x5*0x15d+-0x16af*0x1),h(this,'colorArray'+'Ops',[]),h(this,'depthStenc'+'ilOps'),h(this,'requiresCu'+'bemaps',!(-0x5*0x515+-0x153*-0xa+0xc2b)),h(this,'fullSizeCl'+'earRect',!(0x8ae+0x2443+-0x2cf1)),h(this,'beforePass'+'es',[]),h(this,'afterPasse'+'s',[]),(w['assert'](_0x14a2cb),this['device']=_0x14a2cb);}get['colorOps'](){return this['colorArray'+'Ops'][-0xcc3+0xf6e+-0x2ab*0x1];}set['name'](_0x48c677){this['_name']=_0x48c677;}get['name'](){return this['_name']||(this['_name']=this['constructo'+'r']['name']),this['_name'];}set['scaleX'](_0x2b1b4a){w['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleX']=_0x2b1b4a;}get['scaleX'](){return this['_options']['scaleX'];}set['scaleY'](_0x3a0bc6){w['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleY']=_0x3a0bc6;}get['scaleY'](){return this['_options']['scaleY'];}set['options'](_0x2dc216){this['_options']=_0x2dc216,_0x2dc216&&(this['scaleX']=this['scaleX']??0x57a+-0x17f0+0x1277,this['scaleY']=this['scaleY']??-0x1*-0xf0b+0x27f*0x6+-0x1e04);}get['options'](){return this['_options'];}['init'](_0x5c5c68=null,_0x575a0f){this['options']=_0x575a0f,this['renderTarg'+'et']=_0x5c5c68,this['samples']=Math['max'](this['renderTarg'+'et']?this['renderTarg'+'et']['samples']:this['device']['samples'],-0xb0b+-0x1*-0x24a+0x8c2),this['allocateAt'+'tachments'](),this['postInit']();}['allocateAt'+'tachments'](){var _0xca1f92,_0xccc2fa,_0x994531,_0x312c01;const _0x5edebc=this['renderTarg'+'et'];this['depthStenc'+'ilOps']=new lw(),_0x5edebc!=null&&_0x5edebc['depthBuffe'+'r']&&(this['depthStenc'+'ilOps']['storeDepth']=!(-0xeca+-0x1c61+0x2b2b));const _0x2afa31=_0x5edebc?((_0xca1f92=_0x5edebc['_colorBuff'+'ers'])==null?void(-0xff*0x12+-0x1*0x2329+-0x1*-0x3517):_0xca1f92['length'])??0x1201*-0x1+-0x6*-0x52f+0x1*-0xd19:-0x1*0x2415+-0x3*0xa04+0x4222;this['colorArray'+'Ops']['length']=-0x1*-0x8cb+0x1d13+-0x25de;for(let _0x5334f6=-0x1c77+0x23a0+-0x729*0x1;_0x5334f6<_0x2afa31;_0x5334f6++){const _0x16b74e=new ow();this['colorArray'+'Ops'][_0x5334f6]=_0x16b74e,this['samples']===-0x2*-0xbf7+0x1*-0xc52+-0xb9b*0x1&&(_0x16b74e['store']=!(0x296+0x4*0x35b+-0x1002),_0x16b74e['resolve']=!(0x35*0x32+0x3*0x6d7+-0x1ede));const _0x37095a=(_0x994531=(_0xccc2fa=this['renderTarg'+'et'])==null?void(0x257d+-0x2*-0x1021+-0x45bf):_0xccc2fa['_colorBuff'+'ers'])==null?void(0x6*0x484+-0x21fd+0x6e5*0x1):_0x994531[_0x5334f6];if((_0x312c01=this['renderTarg'+'et'])!=null&&_0x312c01['mipmaps']&&(_0x37095a!=null&&_0x37095a['mipmaps'])){const _0xead901=dn(_0x37095a['_format']);_0x16b74e['genMipmaps']=!_0xead901;}}}['destroy'](){}['postInit'](){}['frameUpdat'+'e'](){if(this['_options']&&this['renderTarg'+'et']){const _0x340120=this['_options']['resizeSour'+'ce']??this['device']['backBuffer'],_0x2d8f5a=Math['floor'](_0x340120['width']*this['scaleX']),_0x41dd3b=Math['floor'](_0x340120['height']*this['scaleY']);this['renderTarg'+'et']['resize'](_0x2d8f5a,_0x41dd3b);}}['before'](){}['execute'](){}['after'](){}['onEnable'](){}['onDisable'](){}set['enabled'](_0x1f388d){this['_enabled']!==_0x1f388d&&(this['_enabled']=_0x1f388d,_0x1f388d?this['onEnable']():this['onDisable']());}get['enabled'](){return this['_enabled'];}['setClearCo'+'lor'](_0x32dd16){const _0x338634=this['colorArray'+'Ops']['length'];for(let _0x58ef22=0xc47*-0x1+-0x2*0xdee+0x2823;_0x58ef22<_0x338634;_0x58ef22++){const _0x18717d=this['colorArray'+'Ops'][_0x58ef22];_0x32dd16&&(_0x18717d['clearValue']['copy'](_0x32dd16),_0x18717d['clearValue'+'Linear']['linear'](_0x32dd16)),_0x18717d['clear']=!!_0x32dd16;}}['setClearDe'+'pth'](_0x29de0f){_0x29de0f&&(this['depthStenc'+'ilOps']['clearDepth'+'Value']=_0x29de0f),this['depthStenc'+'ilOps']['clearDepth']=_0x29de0f!==void(-0x1*0xecb+0x902+-0x1*-0x5c9);}['setClearSt'+'encil'](_0x43f650){_0x43f650&&(this['depthStenc'+'ilOps']['clearStenc'+'ilValue']=_0x43f650),this['depthStenc'+'ilOps']['clearStenc'+'il']=_0x43f650!==void(-0x2460+-0x1a29+-0x7*-0x8ef);}['render'](){if(this['enabled']){const _0x1b8c41=this['device'],_0x2a98e8=this['renderTarg'+'et']!==void(0x518+0x1*0x40d+-0x925);w['call'](()=>{this['log'](_0x1b8c41,_0x1b8c41['renderPass'+'Index']);}),this['before'](),this['executeEna'+'bled']&&(_0x2a98e8&&!this['_skipStart']&&_0x1b8c41['startRende'+'rPass'](this),this['execute'](),_0x2a98e8&&!this['_skipEnd']&&_0x1b8c41['endRenderP'+'ass'](this)),this['after'](),_0x1b8c41['renderPass'+'Index']++;}}['log'](_0x9a963e,_0x101f46=0x256f+0x1c69+-0x1*0x41d8){var _0x124f3d,_0x2b76d0,_0x4bd496;if(mi['get'](Pm)||mi['get'](cn)){const _0x1ddc1f=this['renderTarg'+'et']??(this['renderTarg'+'et']===null?_0x9a963e['backBuffer']:null),_0x16297b=!!(_0x1ddc1f!=null&&_0x1ddc1f['impl']['assignedCo'+'lorTexture'])||(_0x1ddc1f==null?void(0x11b6+-0x3*-0x12e+-0x1540):_0x1ddc1f['impl']['suppliedCo'+'lorFramebu'+'ffer'])!==void(-0x13*0x2f+0x1e6e+0x1af1*-0x1),_0x3b4103=((_0x124f3d=_0x1ddc1f==null?void(0xb42+-0xd4a*-0x1+0xc46*-0x2):_0x1ddc1f['_colorBuff'+'ers'])==null?void(-0x2230*-0x1+0x1*-0x75+0x21bb*-0x1):_0x124f3d['length'])??(_0x16297b?0x2*-0x82f+-0x1*-0x9bd+0x6a2:0x5b9*0x2+-0x1*0x2131+0x15bf),_0x5b9575=_0x1ddc1f==null?void(-0x19ff+-0xdeb+-0x189*-0x1a):_0x1ddc1f['depth'],_0x4cc3a2=_0x1ddc1f==null?void(-0x1c50+-0x23cb+0x401b):_0x1ddc1f['stencil'],_0xab7f47=_0x1ddc1f==null?void(-0x905*0x4+-0x1cf1+0xd01*0x5):_0x1ddc1f['mipLevel'],_0x42149b=_0x1ddc1f?'\x20RT:\x20'+(_0x1ddc1f?_0x1ddc1f['name']:'NULL')+'\x20'+(_0x3b4103>-0x11ea+0x1b34+0x52*-0x1d?'[Color'+(_0x3b4103>-0xd*0x265+0xd49*-0x1+0x2c6b?'\x20x\x20'+_0x3b4103:'')+']':'')+(_0x5b9575?'[Depth]':'')+(_0x4cc3a2?'[Stencil]':'')+'\x20'+_0x1ddc1f['width']+'\x20x\x20'+_0x1ddc1f['height']+(this['samples']>0x2fe*-0x5+0xde9*0x2+0x337*-0x4?'\x20samples:\x20'+this['samples']:'')+(_0xab7f47>0x17d0+0x19ec+-0x31bc?'\x20mipLevel:'+'\x20'+_0xab7f47:''):'',_0x11babf=this['_skipStart']?'++':_0x101f46['toString']()['padEnd'](-0x192+-0x2174+0x2308,'\x20');w['trace'](Pm,_0x11babf+':\x20'+this['name']['padEnd'](-0x24d1+0x1*0x13db+0x110a,'\x20')+(this['executeEna'+'bled']?'':'\x20DISABLED\x20')+_0x42149b['padEnd'](0x1196+0x1*-0x17c9+0x651));for(let _0x4a1641=-0x1*-0x17d2+-0x549+-0x1289;_0x4a1641<_0x3b4103;_0x4a1641++){const _0x5bcdf1=this['colorArray'+'Ops'][_0x4a1641],_0x4bfd95=(_0x2b76d0=Nt['get'](_0x16297b?_0x9a963e['backBuffer'+'Format']:_0x1ddc1f['getColorBu'+'ffer'](_0x4a1641)['format']))==null?void(0x83f*0x1+0x15*0x1a5+0x2*-0x1564):_0x2b76d0['name'];w['trace'](cn,'\x20\x20\x20\x20color['+_0x4a1641+']:\x20'+(_0x5bcdf1['clear']?'clear':'load')+'->'+(_0x5bcdf1['store']?'store':'discard')+'\x20'+(_0x5bcdf1['resolve']?'resolve\x20':'')+(_0x5bcdf1['genMipmaps']?'mipmaps\x20':'')+'\x20[format:\x20'+_0x4bfd95+']\x20'+(_0x5bcdf1['clear']?'[clear:\x20'+_0x5bcdf1['clearValue']['toString'](!(0x2*0x44d+-0xdb7*0x1+0x51d),!(-0x1f20+0x53f+0x109*0x19))+']':''));}if(this['depthStenc'+'ilOps']){const _0x4293bd=''+(_0x1ddc1f['depthBuffe'+'r']?'\x20[format:\x20'+((_0x4bd496=Nt['get'](_0x1ddc1f['depthBuffe'+'r']['format']))==null?void(-0x1d4b*-0x1+-0x25a2+0x857):_0x4bd496['name'])+']':'');_0x5b9575&&w['trace'](cn,'\x20\x20\x20\x20depthO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearDepth']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeDepth']?'store':'discard')+(this['depthStenc'+'ilOps']['resolveDep'+'th']?'\x20resolve':'')+_0x4293bd+(this['depthStenc'+'ilOps']['clearDepth']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearDepth'+'Value']+']':'')),_0x4cc3a2&&w['trace'](cn,'\x20\x20\x20\x20stencO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeStenc'+'il']?'store':'discard')+_0x4293bd+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearStenc'+'ilValue']+']':''));}}}}function cw(_0x364fba){this['array'][this['index']]=_0x364fba;}function hw(_0x116f70,_0x132948){this['array'][this['index']]=_0x116f70,this['array'][this['index']+(-0x25*-0x50+-0x2e*-0x25+-0x1235)]=_0x132948;}function dw(_0x54297a,_0x25a20,_0x43057c){this['array'][this['index']]=_0x54297a,this['array'][this['index']+(-0x2a*0x5+0x385*0x8+0x1*-0x1b55)]=_0x25a20,this['array'][this['index']+(0x152b+-0x299+-0x1290)]=_0x43057c;}function fw(_0x42985c,_0x308424,_0x20798a,_0x3c30cc){this['array'][this['index']]=_0x42985c,this['array'][this['index']+(-0x7ff*-0x4+-0x24b8+0x4bd)]=_0x308424,this['array'][this['index']+(-0x2*-0xf01+-0x129e+-0x2f*0x3e)]=_0x20798a,this['array'][this['index']+(-0x19a8+-0x8d7+-0x1*-0x2282)]=_0x3c30cc;}function uw(_0x2ea51e,_0x7c584c,_0x2ded9b){this['array'][_0x2ea51e]=_0x7c584c[_0x2ded9b];}function pw(_0x47406b,_0x1ce99b,_0x3cb8c0){this['array'][_0x47406b]=_0x1ce99b[_0x3cb8c0],this['array'][_0x47406b+(-0x1*-0xf37+0x2678*0x1+-0x35ae*0x1)]=_0x1ce99b[_0x3cb8c0+(-0xf02*-0x2+-0x5*-0x181+-0x1*0x2588)];}function mw(_0x57f7d5,_0xd5544c,_0xf43d51){this['array'][_0x57f7d5]=_0xd5544c[_0xf43d51],this['array'][_0x57f7d5+(-0x1f61+-0x1f31+0x3e93)]=_0xd5544c[_0xf43d51+(0x2a3+0x1*-0x1161+0xebf)],this['array'][_0x57f7d5+(-0x258d+-0x4*0xf+0x25cb)]=_0xd5544c[_0xf43d51+(-0x25b9+-0x14*-0x167+0x9af)];}function _w(_0x2d2946,_0x52af0e,_0xf37379){this['array'][_0x2d2946]=_0x52af0e[_0xf37379],this['array'][_0x2d2946+(-0x43*-0x3d+0x25fa+-0x8*0x6be)]=_0x52af0e[_0xf37379+(-0xa*0x206+0x5*0x1df+0xae2)],this['array'][_0x2d2946+(-0x26fe+0x191b*0x1+0xde5)]=_0x52af0e[_0xf37379+(0x3*0x2d1+-0x5*-0x119+-0xdee)],this['array'][_0x2d2946+(0xe24+-0x16fc+0x8db)]=_0x52af0e[_0xf37379+(-0xb17+0x1198+-0x67e)];}function gw(_0x33ea64,_0x2443db,_0x4a8fa9){_0x2443db[_0x4a8fa9]=this['array'][_0x33ea64];}function Sw(_0xd7f4ca,_0x38621d,_0x505249){_0x38621d[_0x505249]=this['array'][_0xd7f4ca],_0x38621d[_0x505249+(-0x10da+0xe*-0x1d7+0x2a9d)]=this['array'][_0xd7f4ca+(-0xe2c*-0x1+0x2039+-0x2e64)];}function yw(_0x3821bf,_0x5085eb,_0x268497){_0x5085eb[_0x268497]=this['array'][_0x3821bf],_0x5085eb[_0x268497+(-0xdd+0xa*0xdc+-0x7ba)]=this['array'][_0x3821bf+(-0x16d6+-0x1416+0x2aed)],_0x5085eb[_0x268497+(-0x1d03*0x1+-0x1741+-0x3446*-0x1)]=this['array'][_0x3821bf+(-0x22b0+0xb7e*0x1+0x3*0x7bc)];}function vw(_0x3f662b,_0x47bde5,_0x14ba70){_0x47bde5[_0x14ba70]=this['array'][_0x3f662b],_0x47bde5[_0x14ba70+(-0x2619*-0x1+-0x31d+-0x22fb)]=this['array'][_0x3f662b+(0x559*0x1+-0x7d5*-0x1+-0xd2d)],_0x47bde5[_0x14ba70+(-0x8f*-0x35+-0x4c*0x2e+0x35*-0x4d)]=this['array'][_0x3f662b+(0x11c4+-0x3b2*-0x6+0x26*-0x10d)],_0x47bde5[_0x14ba70+(-0x147+-0x2621+-0x276b*-0x1)]=this['array'][_0x3f662b+(-0x1*0x1663+-0x11ec+0x2852)];}class xw{constructor(_0x4eb35e,_0xbc2849,_0x1d7117){switch(this['index']=0x1997*-0x1+-0xe9c+0x2833,this['numCompone'+'nts']=_0xbc2849['numCompone'+'nts'],_0x1d7117['interleave'+'d']?this['array']=new wn[_0xbc2849['dataType']](_0x4eb35e,_0xbc2849['offset']):this['array']=new wn[_0xbc2849['dataType']](_0x4eb35e,_0xbc2849['offset'],_0x1d7117['vertexCoun'+'t']*_0xbc2849['numCompone'+'nts']),this['stride']=_0xbc2849['stride']/this['array']['constructo'+'r']['BYTES_PER_'+'ELEMENT'],_0xbc2849['numCompone'+'nts']){case 0x1*0xa2a+0x31f*0xa+0x5e9*-0x7:this['set']=cw,this['getToArray']=gw,this['setFromArr'+'ay']=uw;break;case 0x168+-0x48a*0x6+-0x2*-0xceb:this['set']=hw,this['getToArray']=Sw,this['setFromArr'+'ay']=pw;break;case 0x1509+-0x1493+-0x73:this['set']=dw,this['getToArray']=yw,this['setFromArr'+'ay']=mw;break;case 0x564+0x220d+-0x1*0x276d:this['set']=fw,this['getToArray']=vw,this['setFromArr'+'ay']=_w;break;}}['get'](_0x1c45dd){return this['array'][this['index']+_0x1c45dd];}['set'](_0x36400c,_0x1c2a9f,_0x3055c8,_0x171547){}['getToArray'](_0xd3a93d,_0x419624,_0x217730){}['setFromArr'+'ay'](_0x363cd3,_0x4c490e,_0x54700b){}}class Uo{constructor(_0x249ba1){this['vertexBuff'+'er']=_0x249ba1,this['vertexForm'+'atSize']=_0x249ba1['getFormat']()['size'],this['buffer']=this['vertexBuff'+'er']['lock'](),this['accessors']=[],this['element']={};const _0x36995c=this['vertexBuff'+'er']['getFormat']();for(let _0x228b7f=0x178f+-0xb26+-0x1*0xc69;_0x228b7f<_0x36995c['elements']['length'];_0x228b7f++){const _0x294f04=_0x36995c['elements'][_0x228b7f];this['accessors'][_0x228b7f]=new xw(this['buffer'],_0x294f04,_0x36995c),this['element'][_0x294f04['name']]=this['accessors'][_0x228b7f];}}['next'](_0x8dc5a8=-0x1*0x2219+-0x616+0x2830){let _0x5ba653=0x55*0x11+0x1*-0x2239+0x1c94;const _0x4d9a27=this['accessors'],_0x131e5b=this['accessors']['length'];for(;_0x5ba653<_0x131e5b;){const _0x359f83=_0x4d9a27[_0x5ba653++];_0x359f83['index']+=_0x8dc5a8*_0x359f83['stride'];}}['end'](){this['vertexBuff'+'er']['unlock']();}['writeData'](_0x26a376,_0x322eab,_0x2b4ae9){const _0x2cbfee=this['element'][_0x26a376];if(_0x2cbfee){_0x2b4ae9>this['vertexBuff'+'er']['numVertice'+'s']&&(w['error']('NumVertice'+'s\x20provided'+'\x20to\x20setDat'+'a:\x20'+_0x2b4ae9+('\x20is\x20larger'+'\x20than\x20spac'+'e\x20in\x20Verte'+'xBuffer:\x20')+this['vertexBuff'+'er']['numVertice'+'s']),_0x2b4ae9=this['vertexBuff'+'er']['numVertice'+'s']);const _0x1acdf0=_0x2cbfee['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){let _0xf51b79=-0x98f*-0x1+0x1995+-0x2324;for(let _0x54561b=0x7f*0x7+-0x1*0x877+0x4fe;_0x54561b<_0x2b4ae9;_0x54561b++)_0x2cbfee['setFromArr'+'ay'](_0xf51b79,_0x322eab,_0x54561b*_0x1acdf0),_0xf51b79+=_0x2cbfee['stride'];}else{if(_0x322eab['length']>_0x2b4ae9*_0x1acdf0){const _0x15d42d=_0x2b4ae9*_0x1acdf0;if(ArrayBuffer['isView'](_0x322eab))_0x322eab=_0x322eab['subarray'](-0xadb*0x2+-0x130b+0x28c1,_0x15d42d),_0x2cbfee['array']['set'](_0x322eab);else{for(let _0x54d79c=0x3*-0xa6f+-0x911+0x285e;_0x54d79c<_0x15d42d;_0x54d79c++)_0x2cbfee['array'][_0x54d79c]=_0x322eab[_0x54d79c];}}else _0x2cbfee['array']['set'](_0x322eab);}}}['readData'](_0x139cce,_0x300b1f){const _0x89fbde=this['element'][_0x139cce];let _0x26a54c=0x1a69+-0x3a*-0x21+-0x21e3;if(_0x89fbde){_0x26a54c=this['vertexBuff'+'er']['numVertice'+'s'];let _0x38e689;const _0x2f6bce=_0x89fbde['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){Array['isArray'](_0x300b1f)&&(_0x300b1f['length']=0x8c*-0x15+0x157a+-0x9fe),_0x89fbde['index']=-0x1*-0x179f+0x798+0x1*-0x1f37;let _0x4de56b=-0xee*0x1+-0x100+0x1ee;for(_0x38e689=0x2*0xffe+0x6c9*0x5+-0x2f*0x167;_0x38e689<_0x26a54c;_0x38e689++)_0x89fbde['getToArray'](_0x4de56b,_0x300b1f,_0x38e689*_0x2f6bce),_0x4de56b+=_0x89fbde['stride'];}else{if(ArrayBuffer['isView'](_0x300b1f))_0x300b1f['set'](_0x89fbde['array']);else{_0x300b1f['length']=0x1a6d+0x1125+0x1*-0x2b92;const _0x1237f7=_0x26a54c*_0x2f6bce;for(_0x38e689=0x1997*-0x1+0x61f*0x3+0x5*0x172;_0x38e689<_0x1237f7;_0x38e689++)_0x300b1f[_0x38e689]=_0x89fbde['array'][_0x38e689];}}}return _0x26a54c;}}const Tw=-(-0xa83+-0x3*-0x61d+-0x7d3);class ww{constructor(_0x316486,_0x510847){h(this,'key',null),h(this,'element',null),h(this,'event',null),_0x510847&&(this['key']=_0x510847['keyCode'],this['element']=_0x510847['target'],this['event']=_0x510847);}}const jl=new ww();function Vd(_0x1fd1dc){return jl['key']=_0x1fd1dc['keyCode'],jl['element']=_0x1fd1dc['target'],jl['event']=_0x1fd1dc,jl;}function Yl(_0x2142d1){return typeof _0x2142d1=='string'?_0x2142d1['toUpperCas'+'e']()['charCodeAt'](0x1*-0x160f+-0x11*0x42+0x3c7*0x7):_0x2142d1;}const Ew={0x9:'Tab',0xd:'Enter',0x10:'Shift',0x11:'Control',0x12:'Alt',0x1b:'Escape',0x25:'Left',0x26:'Up',0x27:'Right',0x28:'Down',0x2e:'Delete',0x5b:'Win'};class h_ extends me{constructor(_0x29b768,_0x191a8d={}){super(),h(this,'_element',null),h(this,'_keymap',{}),h(this,'_lastmap',{}),(this['_keyDownHa'+'ndler']=this['_handleKey'+'Down']['bind'](this),this['_keyUpHand'+'ler']=this['_handleKey'+'Up']['bind'](this),this['_keyPressH'+'andler']=this['_handleKey'+'Press']['bind'](this),this['_visibilit'+'yChangeHan'+'dler']=this['_handleVis'+'ibilityCha'+'nge']['bind'](this),this['_windowBlu'+'rHandler']=this['_handleWin'+'dowBlur']['bind'](this),_0x29b768&&this['attach'](_0x29b768),this['preventDef'+'ault']=_0x191a8d['preventDef'+'ault']||!(0xe49+0x2*0x1039+-0x2eba),this['stopPropag'+'ation']=_0x191a8d['stopPropag'+'ation']||!(0x1592+0x173b+0xb33*-0x4));}['attach'](_0x4c5731){this['_element']&&this['detach'](),this['_element']=_0x4c5731,this['_element']['addEventLi'+'stener']('keydown',this['_keyDownHa'+'ndler'],!(-0x5c9+0x637*0x3+-0xcdb)),this['_element']['addEventLi'+'stener']('keypress',this['_keyPressH'+'andler'],!(0x90e*0x4+-0x900+-0x1b37)),this['_element']['addEventLi'+'stener']('keyup',this['_keyUpHand'+'ler'],!(0x26c0+-0x3e8+-0x3df*0x9)),document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x3*-0x971+-0x2072+0x420)),window['addEventLi'+'stener']('blur',this['_windowBlu'+'rHandler'],!(-0x1*-0x1c55+-0x1802+0x4f*-0xe));}['detach'](){if(!this['_element']){w['warn']('Unable\x20to\x20'+'detach\x20key'+'board.\x20It\x20'+'is\x20not\x20att'+'ached\x20to\x20a'+'n\x20element.');return;}this['_element']['removeEven'+'tListener']('keydown',this['_keyDownHa'+'ndler']),this['_element']['removeEven'+'tListener']('keypress',this['_keyPressH'+'andler']),this['_element']['removeEven'+'tListener']('keyup',this['_keyUpHand'+'ler']),this['_element']=null,document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(0xf94+0x1*0x268a+-0x7*0x7bb)),window['removeEven'+'tListener']('blur',this['_windowBlu'+'rHandler'],!(-0x2f*0x7a+0x17e*-0xd+0x29cd));}['toKeyIdent'+'ifier'](_0xbdfb56){_0xbdfb56=Yl(_0xbdfb56);const _0x230a5b=Ew[_0xbdfb56['toString']()];if(_0x230a5b)return _0x230a5b;let _0x270bea=_0xbdfb56['toString'](-0xdba*0x2+0x8ae+-0x96b*-0x2)['toUpperCas'+'e']();const _0x5490b5=_0x270bea['length'];for(let _0x448452=0xb15*-0x1+-0xedb*-0x1+-0x3c6;_0x448452<-0xb38+-0x42a+0x36*0x49-_0x5490b5;_0x448452++)_0x270bea='0'+_0x270bea;return'U+'+_0x270bea;}['_handleKey'+'Down'](_0x855575){const _0xc191c7=_0x855575['keyCode']||_0x855575['charCode'];if(_0xc191c7===void(0xc58+0x1*0x2507+-0x315f))return;const _0x268f18=this['toKeyIdent'+'ifier'](_0xc191c7);this['_keymap'][_0x268f18]=!(0x1014+0x2081+0x3095*-0x1),this['fire']('keydown',Vd(_0x855575)),this['preventDef'+'ault']&&_0x855575['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x855575['stopPropag'+'ation']();}['_handleKey'+'Up'](_0x549533){const _0x4883c6=_0x549533['keyCode']||_0x549533['charCode'];if(_0x4883c6===void(0x1*-0x1f5+-0xde9+0xfde))return;const _0x34f667=this['toKeyIdent'+'ifier'](_0x4883c6);delete this['_keymap'][_0x34f667],this['fire']('keyup',Vd(_0x549533)),this['preventDef'+'ault']&&_0x549533['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x549533['stopPropag'+'ation']();}['_handleKey'+'Press'](_0x2dba73){this['fire']('keypress',Vd(_0x2dba73)),this['preventDef'+'ault']&&_0x2dba73['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x2dba73['stopPropag'+'ation']();}['_handleVis'+'ibilityCha'+'nge'](){document['visibility'+'State']==='hidden'&&this['_handleWin'+'dowBlur']();}['_handleWin'+'dowBlur'](){this['_keymap']={},this['_lastmap']={};}['update'](){for(const _0x91d73e in this['_lastmap'])delete this['_lastmap'][_0x91d73e];for(const _0x99e727 in this['_keymap'])this['_keymap']['hasOwnProp'+'erty'](_0x99e727)&&(this['_lastmap'][_0x99e727]=this['_keymap'][_0x99e727]);}['isPressed'](_0x50ea91){const _0x231937=Yl(_0x50ea91),_0x523154=this['toKeyIdent'+'ifier'](_0x231937);return!!this['_keymap'][_0x523154];}['wasPressed'](_0x1a3a1e){const _0x2a8d04=Yl(_0x1a3a1e),_0x1c94f5=this['toKeyIdent'+'ifier'](_0x2a8d04);return!!this['_keymap'][_0x1c94f5]&&!this['_lastmap'][_0x1c94f5];}['wasRelease'+'d'](_0x1a43c4){const _0x4e24ca=Yl(_0x1a43c4),_0x533d2a=this['toKeyIdent'+'ifier'](_0x4e24ca);return!this['_keymap'][_0x533d2a]&&!!this['_lastmap'][_0x533d2a];}}h(h_,'EVENT_KEYD'+'OWN','keydown'),h(h_,'EVENT_KEYU'+'P','keyup');function ru(){return!!(document['pointerLoc'+'kElement']||document['mozPointer'+'LockElemen'+'t']||document['webkitPoin'+'terLockEle'+'ment']);}class ta{constructor(_0x5db8a4,_0x5f3480){h(this,'x',-0x3e*-0x8+0x1*0x107e+-0x126e),h(this,'y',-0x9b4+0x21ca+-0x1816*0x1),h(this,'dx',0x2*-0xfa6+-0x79+0xa97*0x3),h(this,'dy',-0x2179+0x2c3*0x1+0x1eb6),h(this,'button',Tw),h(this,'wheelDelta',0x13dc+-0x9c7*-0x2+-0x276a),h(this,'element'),h(this,'ctrlKey',!(-0x2*-0xf92+-0x1e1b*-0x1+-0x3d3e)),h(this,'altKey',!(0x1409+0x574*-0x2+-0x920)),h(this,'shiftKey',!(-0x33d*0x1+0x25e1*0x1+0x1*-0x22a3)),h(this,'metaKey',!(0x1552*-0x1+0x25ed+-0x7d*0x22)),h(this,'event');let _0x5c7539={'x':0x0,'y':0x0};if(_0x5f3480){if(_0x5f3480 instanceof ta)throw Error('Expected\x20M'+'ouseEvent');_0x5c7539=_0x5db8a4['_getTarget'+'Coords'](_0x5f3480);}else _0x5f3480={};if(_0x5c7539)this['x']=_0x5c7539['x'],this['y']=_0x5c7539['y'];else{if(ru())this['x']=-0x19e0+0xee*0x11+0xa12*0x1,this['y']=-0x80f*0x1+0x23*-0x1f+0xc4c;else return;}_0x5f3480['type']==='wheel'&&(_0x5f3480['deltaY']>-0x1b4a+-0xb87*0x1+0x26d1?this['wheelDelta']=-0x4f*-0x2c+-0x853+-0x1*0x540:_0x5f3480['deltaY']<0x1*0x2248+0xb*-0x22+-0x20d2&&(this['wheelDelta']=-(-0x1b4d+-0x2500+0x404e))),ru()?(this['dx']=_0x5f3480['movementX']||_0x5f3480['webkitMove'+'mentX']||_0x5f3480['mozMovemen'+'tX']||-0x2109+-0x6dd*0x1+0x13f3*0x2,this['dy']=_0x5f3480['movementY']||_0x5f3480['webkitMove'+'mentY']||_0x5f3480['mozMovemen'+'tY']||0xd*0x2af+0x24af*-0x1+0xe6*0x2):(this['dx']=this['x']-_0x5db8a4['_lastX'],this['dy']=this['y']-_0x5db8a4['_lastY']),(_0x5f3480['type']==='mousedown'||_0x5f3480['type']==='mouseup')&&(this['button']=_0x5f3480['button']),this['buttons']=_0x5db8a4['_buttons']['slice'](0x6c5*-0x3+-0x1f*-0xf+0x127e),this['element']=_0x5f3480['target'],this['ctrlKey']=_0x5f3480['ctrlKey']??!(0x2*0x8e6+0x78d+0x2*-0xcac),this['altKey']=_0x5f3480['altKey']??!(-0x208f+-0x1f71+-0x71*-0x91),this['shiftKey']=_0x5f3480['shiftKey']??!(-0x41b*0x8+-0x959*-0x2+-0xe27*-0x1),this['metaKey']=_0x5f3480['metaKey']??!(0x2321+0x78*-0x10+-0x1ba0),this['event']=_0x5f3480;}}class sa extends me{constructor(_0x553295){super(),h(this,'_lastX',0x25*-0xb9+0x7ec+0x12d1),h(this,'_lastY',0x3*0x362+0x1*0x243+-0xc69),h(this,'_buttons',[!(-0x165*0xf+0x313+-0x11d9*-0x1),!(0x1*-0x251b+-0x25*0x6b+0x3493*0x1),!(-0x220d+0x1396+0xe78)]),h(this,'_lastbutto'+'ns',[!(-0x1*-0x7bf+-0x78*-0x1b+-0x1466),!(-0x250e+0xd3*-0x1d+0x3cf6),!(0x125e+0x2bf+-0x304*0x7)]),h(this,'_target',null),h(this,'_attached',!(0x326*0x7+-0x1c43+0x2*0x31d)),(this['_upHandler']=this['_handleUp']['bind'](this),this['_downHandl'+'er']=this['_handleDow'+'n']['bind'](this),this['_moveHandl'+'er']=this['_handleMov'+'e']['bind'](this),this['_wheelHand'+'ler']=this['_handleWhe'+'el']['bind'](this),this['_contextMe'+'nuHandler']=_0x5c3d6c=>{_0x5c3d6c['preventDef'+'ault']();},this['attach'](_0x553295));}static['isPointerL'+'ocked'](){return ru();}['attach'](_0x22c35f){if(this['_target']=_0x22c35f,this['_attached'])return;this['_attached']=!(-0x295*0xd+0x24a8+-0x317);const _0x170186={'passive':!(-0x18dc+0x2*-0xd0f+0x32fb)},_0x4572a2=Ae['passiveEve'+'nts']?_0x170186:!(0x112d*-0x2+-0x1f3a+0x4195);window['addEventLi'+'stener']('mouseup',this['_upHandler'],_0x4572a2),window['addEventLi'+'stener']('mousedown',this['_downHandl'+'er'],_0x4572a2),window['addEventLi'+'stener']('mousemove',this['_moveHandl'+'er'],_0x4572a2),window['addEventLi'+'stener']('wheel',this['_wheelHand'+'ler'],_0x4572a2);}['detach'](){if(!this['_attached'])return;this['_attached']=!(0x20dd*0x1+-0xb0f+-0x15cd*0x1),this['_target']=null;const _0x499231={'passive':!(-0x925+0xfd*-0x23+-0x2bbd*-0x1)},_0x3c101b=Ae['passiveEve'+'nts']?_0x499231:!(0x37e*0x1+-0x1*0x1664+0x12e7);window['removeEven'+'tListener']('mouseup',this['_upHandler'],_0x3c101b),window['removeEven'+'tListener']('mousedown',this['_downHandl'+'er'],_0x3c101b),window['removeEven'+'tListener']('mousemove',this['_moveHandl'+'er'],_0x3c101b),window['removeEven'+'tListener']('wheel',this['_wheelHand'+'ler'],_0x3c101b);}['disableCon'+'textMenu'](){this['_target']&&this['_target']['addEventLi'+'stener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enableCont'+'extMenu'](){this['_target']&&this['_target']['removeEven'+'tListener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enablePoin'+'terLock'](_0x429d92,_0x4dd531){if(!document['body']['requestPoi'+'nterLock']){_0x4dd531&&_0x4dd531();return;}const _0x4d683f=()=>{_0x429d92(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x4d683f);},_0xb02247=()=>{_0x4dd531(),document['removeEven'+'tListener']('pointerloc'+'kerror',_0xb02247);};_0x429d92&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x4d683f,!(0x7*0x39b+0x14ba+-0x6*0x7a9)),_0x4dd531&&document['addEventLi'+'stener']('pointerloc'+'kerror',_0xb02247,!(0x2019+-0x1102+-0xf16)),document['body']['requestPoi'+'nterLock']();}['disablePoi'+'nterLock'](_0x29ea40){if(!document['exitPointe'+'rLock'])return;const _0x45a57d=()=>{_0x29ea40(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x45a57d);};_0x29ea40&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x45a57d,!(-0x2666+-0x21d3*-0x1+0x494)),document['exitPointe'+'rLock']();}['update'](){this['_lastbutto'+'ns'][-0x1*0x1272+-0x5ec+0x185e*0x1]=this['_buttons'][0x17bd*0x1+-0x146e+-0x7*0x79],this['_lastbutto'+'ns'][-0xefe+0x423*0x7+-0xdf6]=this['_buttons'][0x10f6+-0x1ec4+0xdcf],this['_lastbutto'+'ns'][0x1a84+0x386*0x4+0x1*-0x289a]=this['_buttons'][0x2*-0x7e7+-0xb6*0x11+-0x1*-0x1be6];}['isPressed'](_0x3c47f2){return this['_buttons'][_0x3c47f2];}['wasPressed'](_0x1d0be4){return this['_buttons'][_0x1d0be4]&&!this['_lastbutto'+'ns'][_0x1d0be4];}['wasRelease'+'d'](_0x53d452){return!this['_buttons'][_0x53d452]&&this['_lastbutto'+'ns'][_0x53d452];}['_handleUp'](_0x809954){this['_buttons'][_0x809954['button']]=!(0xf8+0x19*-0xfd+0x17be);const _0x3551f0=new ta(this,_0x809954);_0x3551f0['event']&&this['fire']('mouseup',_0x3551f0);}['_handleDow'+'n'](_0x542e11){this['_buttons'][_0x542e11['button']]=!(0x8*0x107+0x16fd+-0x1f35);const _0x49136d=new ta(this,_0x542e11);_0x49136d['event']&&this['fire']('mousedown',_0x49136d);}['_handleMov'+'e'](_0x3c6771){const _0x1d186e=new ta(this,_0x3c6771);_0x1d186e['event']&&(this['fire']('mousemove',_0x1d186e),this['_lastX']=_0x1d186e['x'],this['_lastY']=_0x1d186e['y']);}['_handleWhe'+'el'](_0x25713f){const _0x1e535a=new ta(this,_0x25713f);_0x1e535a['event']&&this['fire']('mousewheel',_0x1e535a);}['_getTarget'+'Coords'](_0x4b931e){const _0x28e03e=this['_target']['getBoundin'+'gClientRec'+'t'](),_0x91d4be=Math['floor'](_0x28e03e['left']),_0x18ebd9=Math['floor'](_0x28e03e['top']);return _0x4b931e['clientX']<_0x91d4be||_0x4b931e['clientX']>=_0x91d4be+this['_target']['clientWidt'+'h']||_0x4b931e['clientY']<_0x18ebd9||_0x4b931e['clientY']>=_0x18ebd9+this['_target']['clientHeig'+'ht']?null:{'x':_0x4b931e['clientX']-_0x91d4be,'y':_0x4b931e['clientY']-_0x18ebd9};}}h(sa,'EVENT_MOUS'+'EMOVE','mousemove'),h(sa,'EVENT_MOUS'+'EDOWN','mousedown'),h(sa,'EVENT_MOUS'+'EUP','mouseup'),h(sa,'EVENT_MOUS'+'EWHEEL','mousewheel');function Wc(_0x48f206){let _0x3dc216=-0x6df+0x1971+0x2*-0x949,_0x44d8ad=-0x1f28+0x2130+-0x208,_0xdb27f5=_0x48f206['target'];for(;!(_0xdb27f5 instanceof HTMLElement)&&_0xdb27f5;)_0xdb27f5=_0xdb27f5['parentNode'];for(;_0xdb27f5;)_0x3dc216+=_0xdb27f5['offsetLeft']-_0xdb27f5['scrollLeft'],_0x44d8ad+=_0xdb27f5['offsetTop']-_0xdb27f5['scrollTop'],_0xdb27f5=_0xdb27f5['offsetPare'+'nt'];return{'x':_0x48f206['pageX']-_0x3dc216,'y':_0x48f206['pageY']-_0x44d8ad};}class d_{constructor(_0x23ddfe){h(this,'id'),h(this,'x'),h(this,'y'),h(this,'target'),h(this,'touch');const _0x3da26b=Wc(_0x23ddfe);this['id']=_0x23ddfe['identifier'],this['x']=_0x3da26b['x'],this['y']=_0x3da26b['y'],this['target']=_0x23ddfe['target'],this['touch']=_0x23ddfe;}}class Kl{constructor(_0xf33a72,_0x2528d8){h(this,'element'),h(this,'event'),h(this,'touches',[]),h(this,'changedTou'+'ches',[]),(this['element']=_0x2528d8['target'],this['event']=_0x2528d8,this['touches']=Array['from'](_0x2528d8['touches'])['map'](_0x44d585=>new d_(_0x44d585)),this['changedTou'+'ches']=Array['from'](_0x2528d8['changedTou'+'ches'])['map'](_0x13025e=>new d_(_0x13025e)));}['getTouchBy'+'Id'](_0x9e44ab,_0x11165b){return _0x11165b['find'](_0x5c2923=>_0x5c2923['id']===_0x9e44ab)||null;}}class Zl extends me{constructor(_0x1dc6f9){super(),this['_element']=null,this['_startHand'+'ler']=this['_handleTou'+'chStart']['bind'](this),this['_endHandle'+'r']=this['_handleTou'+'chEnd']['bind'](this),this['_moveHandl'+'er']=this['_handleTou'+'chMove']['bind'](this),this['_cancelHan'+'dler']=this['_handleTou'+'chCancel']['bind'](this),this['attach'](_0x1dc6f9);}['attach'](_0x5a3f47){this['_element']&&this['detach'](),this['_element']=_0x5a3f47,this['_element']['addEventLi'+'stener']('touchstart',this['_startHand'+'ler'],!(-0x93b+0x2*-0x30+-0x1ec*-0x5)),this['_element']['addEventLi'+'stener']('touchend',this['_endHandle'+'r'],!(0x10da+0x22ed+-0x33c6)),this['_element']['addEventLi'+'stener']('touchmove',this['_moveHandl'+'er'],!(0x1*0x1422+-0x5f*0x61+0xfde*0x1)),this['_element']['addEventLi'+'stener']('touchcance'+'l',this['_cancelHan'+'dler'],!(0x51*0x11+-0x25*0x1d+0x3*-0x65));}['detach'](){this['_element']&&(this['_element']['removeEven'+'tListener']('touchstart',this['_startHand'+'ler'],!(-0x10*0x2b+0x40*-0x25+0x1*0xbf1)),this['_element']['removeEven'+'tListener']('touchend',this['_endHandle'+'r'],!(-0x1ad+-0x21bc+0x236a)),this['_element']['removeEven'+'tListener']('touchmove',this['_moveHandl'+'er'],!(-0x226c+-0x145c+0xa5*0x55)),this['_element']['removeEven'+'tListener']('touchcance'+'l',this['_cancelHan'+'dler'],!(0x24c*0x8+0x3*0x699+-0x262a))),this['_element']=null;}['_handleTou'+'chStart'](_0x3aba23){this['fire']('touchstart',new Kl(this,_0x3aba23));}['_handleTou'+'chEnd'](_0x113d53){this['fire']('touchend',new Kl(this,_0x113d53));}['_handleTou'+'chMove'](_0x461277){_0x461277['preventDef'+'ault'](),this['fire']('touchmove',new Kl(this,_0x461277));}['_handleTou'+'chCancel'](_0x273433){this['fire']('touchcance'+'l',new Kl(this,_0x273433));}}h(Zl,'EVENT_TOUC'+'HSTART','touchstart'),h(Zl,'EVENT_TOUC'+'HEND','touchend'),h(Zl,'EVENT_TOUC'+'HMOVE','touchmove'),h(Zl,'EVENT_TOUC'+'HCANCEL','touchcance'+'l');const Oe=class Oe{['get'](_0x4920d4,_0x36faa9,_0x479914){typeof _0x36faa9=='function'&&(_0x479914=_0x36faa9,_0x36faa9={});const _0xc8736b=this['request']('GET',_0x4920d4,_0x36faa9,_0x479914),{progress:_0x465b2f}=_0x36faa9;if(_0x465b2f){const _0x253b92=_0x6d380=>{_0x6d380['lengthComp'+'utable']&&_0x465b2f['fire']('progress',_0x6d380['loaded'],_0x6d380['total']);},_0x5073d1=_0x504f21=>{_0x253b92(_0x504f21),_0xc8736b['removeEven'+'tListener']('loadstart',_0x253b92),_0xc8736b['removeEven'+'tListener']('progress',_0x253b92),_0xc8736b['removeEven'+'tListener']('loadend',_0x5073d1);};_0xc8736b['addEventLi'+'stener']('loadstart',_0x253b92),_0xc8736b['addEventLi'+'stener']('progress',_0x253b92),_0xc8736b['addEventLi'+'stener']('loadend',_0x5073d1);}return _0xc8736b;}['post'](_0x38ff4b,_0x3d2a9c,_0x21bab9,_0x3038ce){return typeof _0x21bab9=='function'&&(_0x3038ce=_0x21bab9,_0x21bab9={}),_0x21bab9['postdata']=_0x3d2a9c,this['request']('POST',_0x38ff4b,_0x21bab9,_0x3038ce);}['put'](_0x11fd5e,_0x29f934,_0x3bf1ca,_0x11c4c3){return typeof _0x3bf1ca=='function'&&(_0x11c4c3=_0x3bf1ca,_0x3bf1ca={}),_0x3bf1ca['postdata']=_0x29f934,this['request']('PUT',_0x11fd5e,_0x3bf1ca,_0x11c4c3);}['del'](_0x125624,_0x35182f,_0x1ec0fc){return typeof _0x35182f=='function'&&(_0x1ec0fc=_0x35182f,_0x35182f={}),this['request']('DELETE',_0x125624,_0x35182f,_0x1ec0fc);}['request'](_0x57e9f5,_0x460f3e,_0x5bc75c,_0x579304){let _0x390d5f,_0x5cca14,_0x4ca049,_0x19914c=!(-0x197e+-0x1*0x13+0x1992);if(typeof _0x5bc75c=='function'&&(_0x579304=_0x5bc75c,_0x5bc75c={}),_0x5bc75c['retry']&&(_0x5bc75c=Object['assign']({'retries':0x0,'maxRetries':0x5},_0x5bc75c)),_0x5bc75c['callback']=_0x579304,_0x5bc75c['async']==null&&(_0x5bc75c['async']=!(-0x1a4d+-0x2382+0x3dcf)),_0x5bc75c['headers']==null&&(_0x5bc75c['headers']={}),_0x5bc75c['postdata']!=null){if(_0x5bc75c['postdata']instanceof Document)_0x4ca049=_0x5bc75c['postdata'];else{if(_0x5bc75c['postdata']instanceof FormData)_0x4ca049=_0x5bc75c['postdata'];else{if(_0x5bc75c['postdata']instanceof Object){let _0x27b40c=_0x5bc75c['headers']['Content-Ty'+'pe'];switch(_0x27b40c===void(0x132d*-0x2+0x1b22*0x1+0xb38)&&(_0x5bc75c['headers']['Content-Ty'+'pe']=Oe['ContentTyp'+'e']['FORM_URLEN'+'CODED'],_0x27b40c=_0x5bc75c['headers']['Content-Ty'+'pe']),_0x27b40c){case Oe['ContentTyp'+'e']['FORM_URLEN'+'CODED']:{_0x4ca049='';let _0x5e8053=!(-0x4f9*0x5+-0x2165+-0x2*-0x1d21);for(const _0x3924eb in _0x5bc75c['postdata'])if(_0x5bc75c['postdata']['hasOwnProp'+'erty'](_0x3924eb)){_0x5e8053?_0x5e8053=!(-0xc*0x20f+0x7*-0x2f5+-0x2*-0x16b4):_0x4ca049+='&';const _0x2a7f2f=encodeURIComponent(_0x3924eb),_0x39007f=encodeURIComponent(_0x5bc75c['postdata'][_0x3924eb]);_0x4ca049+=_0x2a7f2f+'='+_0x39007f;}break;}default:case Oe['ContentTyp'+'e']['JSON']:_0x27b40c==null&&(_0x5bc75c['headers']['Content-Ty'+'pe']=Oe['ContentTyp'+'e']['JSON']),_0x4ca049=JSON['stringify'](_0x5bc75c['postdata']);break;}}else _0x4ca049=_0x5bc75c['postdata'];}}}if(_0x5bc75c['cache']===!(0x93a+-0x35*-0x12+0xc3*-0x11)){const _0x513c5d=de();_0x390d5f=new Rd(_0x460f3e),_0x390d5f['query']?_0x390d5f['query']=_0x390d5f['query']+'&ts='+_0x513c5d:_0x390d5f['query']='ts='+_0x513c5d,_0x460f3e=_0x390d5f['toString']();}_0x5bc75c['query']&&(_0x390d5f=new Rd(_0x460f3e),_0x5cca14=ah(_0x390d5f['getQuery'](),_0x5bc75c['query']),_0x390d5f['setQuery'](_0x5cca14),_0x460f3e=_0x390d5f['toString']());const _0x17d3e4=new XMLHttpRequest();_0x17d3e4['open'](_0x57e9f5,_0x460f3e,_0x5bc75c['async']),_0x17d3e4['withCreden'+'tials']=_0x5bc75c['withCreden'+'tials']!==void(0x6*0x5fa+-0x3f+-0x239d)?_0x5bc75c['withCreden'+'tials']:!(-0x1756+0x14f9+0x12f*0x2),_0x17d3e4['responseTy'+'pe']=_0x5bc75c['responseTy'+'pe']||this['_guessResp'+'onseType'](_0x460f3e);for(const _0x2dd4fe in _0x5bc75c['headers'])_0x5bc75c['headers']['hasOwnProp'+'erty'](_0x2dd4fe)&&_0x17d3e4['setRequest'+'Header'](_0x2dd4fe,_0x5bc75c['headers'][_0x2dd4fe]);_0x17d3e4['onreadysta'+'techange']=()=>{this['_onReadySt'+'ateChange'](_0x57e9f5,_0x460f3e,_0x5bc75c,_0x17d3e4);},_0x17d3e4['onerror']=()=>{this['_onError'](_0x57e9f5,_0x460f3e,_0x5bc75c,_0x17d3e4),_0x19914c=!(-0x2a6*-0x5+0x2319+-0x63*0x7d);};try{_0x17d3e4['send'](_0x4ca049);}catch(_0x18d2ca){_0x19914c||_0x5bc75c['error'](_0x17d3e4['status'],_0x17d3e4,_0x18d2ca);}return _0x17d3e4;}['_guessResp'+'onseType'](_0x1a32b7){const _0x19ab35=new Rd(_0x1a32b7),_0x141806=xe['getExtensi'+'on'](_0x19ab35['path'])['toLowerCas'+'e']();return Oe['binaryExte'+'nsions']['indexOf'](_0x141806)>=-0x2c9*-0x2+-0xbde+0x64c?Oe['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x141806==='.json'?Oe['ResponseTy'+'pe']['JSON']:_0x141806==='.xml'?Oe['ResponseTy'+'pe']['DOCUMENT']:Oe['ResponseTy'+'pe']['TEXT'];}['_isBinaryC'+'ontentType'](_0x5ccf2f){return[Oe['ContentTyp'+'e']['BASIS'],Oe['ContentTyp'+'e']['BIN'],Oe['ContentTyp'+'e']['DDS'],Oe['ContentTyp'+'e']['GLB'],Oe['ContentTyp'+'e']['MP3'],Oe['ContentTyp'+'e']['MP4'],Oe['ContentTyp'+'e']['OGG'],Oe['ContentTyp'+'e']['OPUS'],Oe['ContentTyp'+'e']['WAV']]['indexOf'](_0x5ccf2f)>=-0x1*-0x4d5+-0x770+-0x1d*-0x17;}['_isBinaryR'+'esponseTyp'+'e'](_0x174095){return _0x174095===Oe['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']||_0x174095===Oe['ResponseTy'+'pe']['BLOB']||_0x174095===Oe['ResponseTy'+'pe']['JSON'];}['_onReadySt'+'ateChange'](_0x1b1c19,_0x2da326,_0x41e91b,_0x23cb41){if(_0x23cb41['readyState']===-0x1369+0x1*-0x1607+-0x1c*-0x17b)switch(_0x23cb41['status']){case 0x35*-0x67+0x1be1+-0x68e:{_0x23cb41['responseUR'+'L']&&_0x23cb41['responseUR'+'L']['startsWith']('file:///')?this['_onSuccess'](_0x1b1c19,_0x2da326,_0x41e91b,_0x23cb41):this['_onError'](_0x1b1c19,_0x2da326,_0x41e91b,_0x23cb41);break;}case 0x2447+-0x9f*-0x20+-0x375f:case-0x1ea1+-0xa16*-0x2+0xb3e:case-0x527*0x4+-0xa78+0xb*0x2e6:case-0x2fb*-0x7+-0x1179+-0x234:{this['_onSuccess'](_0x1b1c19,_0x2da326,_0x41e91b,_0x23cb41);break;}default:{this['_onError'](_0x1b1c19,_0x2da326,_0x41e91b,_0x23cb41);break;}}}['_onSuccess'](_0x27fc79,_0x10da5a,_0x52da31,_0x2f3bcd){let _0x381914,_0x1a4fbc;const _0x499baa=_0x2f3bcd['getRespons'+'eHeader']('Content-Ty'+'pe');_0x499baa&&(_0x1a4fbc=_0x499baa['split'](';')[0x821+-0x1c0d+0x13ec]['trim']());try{this['_isBinaryC'+'ontentType'](_0x1a4fbc)||this['_isBinaryR'+'esponseTyp'+'e'](_0x2f3bcd['responseTy'+'pe'])?_0x381914=_0x2f3bcd['response']:_0x1a4fbc===Oe['ContentTyp'+'e']['JSON']||_0x10da5a['split']('?')[0x10da+0x17a6+-0xc0*0x36]['endsWith']('.json')?_0x381914=JSON['parse'](_0x2f3bcd['responseTe'+'xt']):_0x2f3bcd['responseTy'+'pe']===Oe['ResponseTy'+'pe']['DOCUMENT']||_0x1a4fbc===Oe['ContentTyp'+'e']['XML']?_0x381914=_0x2f3bcd['responseXM'+'L']:_0x381914=_0x2f3bcd['responseTe'+'xt'],_0x52da31['callback'](null,_0x381914);}catch(_0x3745e7){_0x52da31['callback'](_0x3745e7);}}['_onError'](_0x37fbdd,_0x1a116d,_0x4fd79b,_0x19caf9){if(!_0x4fd79b['retrying']){if(_0x4fd79b['retry']&&_0x4fd79b['retries']<_0x4fd79b['maxRetries']){_0x4fd79b['retries']++,_0x4fd79b['retrying']=!(0xd86+0x3c*-0x85+0x11a6);const _0x53f93d=Y['clamp'](Math['pow'](-0x13da+0x13*0x13d+-0x3ab,_0x4fd79b['retries'])*Oe['retryDelay'],-0xab+-0x1776+-0x80b*-0x3,_0x4fd79b['maxRetryDe'+'lay']||0x1c89+-0x2271+0x1970);console['log'](_0x37fbdd+':\x20'+_0x1a116d+'\x20-\x20Error\x20'+_0x19caf9['status']+('.\x20Retrying'+'\x20in\x20')+_0x53f93d+'\x20ms'),setTimeout(()=>{_0x4fd79b['retrying']=!(0x6f3+0x1*-0x1a51+-0x675*-0x3),this['request'](_0x37fbdd,_0x1a116d,_0x4fd79b,_0x4fd79b['callback']);},_0x53f93d);}else _0x4fd79b['callback'](_0x19caf9['status']===0xfd*0xb+0x1e3a+-0x7*0x5df?'Network\x20er'+'ror':_0x19caf9['status'],null);}}};h(Oe,'ContentTyp'+'e',{'AAC':'audio/aac','BASIS':'image/basi'+'s','BIN':'applicatio'+'n/octet-st'+'ream','DDS':'image/dds','FORM_URLENCODED':'applicatio'+'n/x-www-fo'+'rm-urlenco'+'ded','GIF':'image/gif','GLB':'model/gltf'+'-binary','JPEG':'image/jpeg','JSON':'applicatio'+'n/json','MP3':'audio/mpeg','MP4':'audio/mp4','OGG':'audio/ogg','OPUS':'audio/ogg;'+'\x20codecs=\x22o'+'pus\x22','PNG':'image/png','TEXT':'text/plain','WAV':'audio/x-wa'+'v','XML':'applicatio'+'n/xml'}),h(Oe,'ResponseTy'+'pe',{'TEXT':'text','ARRAY_BUFFER':'arraybuffe'+'r','BLOB':'blob','DOCUMENT':'document','JSON':'json'}),h(Oe,'binaryExte'+'nsions',['.model','.wav','.ogg','.mp3','.mp4','.m4a','.aac','.dds','.basis','.glb','.opus']),h(Oe,'retryDelay',0xcc+0x22c6+-0x232e);let Ls=Oe;const ot=new Ls(),Vp='linear',bw='inverse',Aw='exponentia'+'l';class Cw{constructor(_0x5c61e2){h(this,'_manager'),h(this,'position',new D()),h(this,'orientatio'+'n',new te()),this['_manager']=_0x5c61e2;}['getPositio'+'n'](){return this['position'];}['setPositio'+'n'](_0x1be18d){this['position']['copy'](_0x1be18d);const _0x3c9e7a=this['listener'];_0x3c9e7a&&('positionX'in _0x3c9e7a?(_0x3c9e7a['positionX']['value']=_0x1be18d['x'],_0x3c9e7a['positionY']['value']=_0x1be18d['y'],_0x3c9e7a['positionZ']['value']=_0x1be18d['z']):_0x3c9e7a['setPositio'+'n']&&_0x3c9e7a['setPositio'+'n'](_0x1be18d['x'],_0x1be18d['y'],_0x1be18d['z']));}['setOrienta'+'tion'](_0x1d0e61){this['orientatio'+'n']['copy'](_0x1d0e61);const _0x56e719=this['listener'];if(_0x56e719){const _0x52099b=_0x1d0e61['data'];'forwardX'in _0x56e719?(_0x56e719['forwardX']['value']=-_0x52099b[-0x1e07+0x1588+0x887],_0x56e719['forwardY']['value']=-_0x52099b[0x1e03+-0x5*-0x7c3+-0x44c9],_0x56e719['forwardZ']['value']=-_0x52099b[0x2e*-0x7+0x1fdf+0x1*-0x1e93],_0x56e719['upX']['value']=_0x52099b[0x4*0x378+0x1b95+-0x1*0x2971],_0x56e719['upY']['value']=_0x52099b[0x1ff2+0x905+0x3*-0xda6],_0x56e719['upZ']['value']=_0x52099b[-0x4*-0x272+0xb04+-0x14c6]):_0x56e719['setOrienta'+'tion']&&_0x56e719['setOrienta'+'tion'](-_0x52099b[0x12d6*0x2+0x1a93*-0x1+-0xb11*0x1],-_0x52099b[0x1*0x1ab+-0x751*-0x1+-0x1d*0x4f],-_0x52099b[-0x201b+0x1*-0x1e5+0x220a],_0x52099b[-0x1*-0x238d+-0x2298+-0xf1],_0x52099b[0x1*-0x2b+0x1e3f+-0x2d*0xab],_0x52099b[-0x1*-0x598+0xef6+-0x1488]);}}['getOrienta'+'tion'](){return this['orientatio'+'n'];}get['listener'](){const _0x46d3cd=this['_manager']['context'];return _0x46d3cd?_0x46d3cd['listener']:null;}}const Ql='running',f_=['click','touchstart','mousedown'];class Pw extends me{constructor(){super(),this['_context']=null,this['AudioConte'+'xt']=typeof AudioContext<'u'&&AudioContext||typeof webkitAudioContext<'u'&&webkitAudioContext,this['AudioConte'+'xt']||w['warn']('No\x20support'+'\x20for\x203D\x20au'+'dio\x20found'),this['_unlockHan'+'dlerFunc']=this['_unlockHan'+'dler']['bind'](this),this['_userSuspe'+'nded']=!(-0x189a+0x221d+-0x982),this['listener']=new Cw(this),this['_volume']=0x2067+-0x257c+0x516;}set['volume'](_0x3f805d){_0x3f805d=Y['clamp'](_0x3f805d,0x888*0x3+0x5a6+-0xa6a*0x3,0x40d+0x41*-0x35+0x969),this['_volume']=_0x3f805d,this['fire']('volumechan'+'ge',_0x3f805d);}get['volume'](){return this['_volume'];}get['suspended'](){return this['_userSuspe'+'nded'];}get['context'](){return!this['_context']&&this['AudioConte'+'xt']&&(this['_context']=new this['AudioConte'+'xt'](),this['_context']['state']!==Ql&&this['_registerU'+'nlockListe'+'ners']()),this['_context'];}['suspend'](){this['_userSuspe'+'nded']||(this['_userSuspe'+'nded']=!(0x15bc+0x30d+-0x18c9),this['_context']&&this['_context']['state']===Ql&&this['_suspend']());}['resume'](){this['_userSuspe'+'nded']&&(this['_userSuspe'+'nded']=!(0x17e4+0x137*-0x9+0x4*-0x33d),this['_context']&&this['_context']['state']!==Ql&&this['_resume']());}['destroy'](){var _0x5affa2;this['fire']('destroy'),this['_context']&&(this['_removeUnl'+'ockListene'+'rs'](),(_0x5affa2=this['_context'])==null||_0x5affa2['close'](),this['_context']=null);}['_resume'](){this['_context']['resume']()['then'](()=>{const _0x135b62=this['_context']['createBuff'+'erSource']();_0x135b62['buffer']=this['_context']['createBuff'+'er'](0x23f*0x4+-0x1*-0x1285+-0x1b80,0x3*0x9a7+0x15*-0x25+-0x5*0x52f,this['_context']['sampleRate']),_0x135b62['connect'](this['_context']['destinatio'+'n']),_0x135b62['start'](-0x1*0x176e+-0xa33+-0x21a1*-0x1),_0x135b62['onended']=_0x3f2184=>{_0x135b62['disconnect'](-0x5*0x405+-0x3*0x841+0x2cdc),this['fire']('resume');};},_0x29d474=>{w['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20it\x20'+'was\x20reject'+'ed\x20'+_0x29d474);})['catch'](_0x16b380=>{w['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20thr'+'ew\x20an\x20exce'+'ption\x20'+_0x16b380);});}['_suspend'](){this['_context']['suspend']()['then'](()=>{this['fire']('suspend');},_0x1c0e7f=>{w['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20i'+'t\x20was\x20reje'+'cted\x20'+_0x1c0e7f);})['catch'](_0x5a994e=>{w['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20t'+'hrew\x20an\x20ex'+'ception\x20'+_0x5a994e);});}['_unlockHan'+'dler'](){this['_removeUnl'+'ockListene'+'rs'](),!this['_userSuspe'+'nded']&&this['_context']['state']!==Ql&&this['_resume']();}['_registerU'+'nlockListe'+'ners'](){f_['forEach'](_0x38a54f=>{window['addEventLi'+'stener'](_0x38a54f,this['_unlockHan'+'dlerFunc'],!(-0x2*-0x779+-0x227c+-0x138b*-0x1));});}['_removeUnl'+'ockListene'+'rs'](){f_['forEach'](_0x28c272=>{window['removeEven'+'tListener'](_0x28c272,this['_unlockHan'+'dlerFunc'],!(0x4*-0x151+0x4*-0x101+-0x949*-0x1));});}}class Mw{constructor(_0x489110){h(this,'audio'),h(this,'buffer'),_0x489110 instanceof Audio?this['audio']=_0x489110:this['buffer']=_0x489110;}get['duration'](){let _0x1ba5a4=0x2*0x45d+0x1694+-0xfa7*0x2;return this['buffer']?_0x1ba5a4=this['buffer']['duration']:this['audio']&&(_0x1ba5a4=this['audio']['duration']),_0x1ba5a4||-0x17*-0x6d+0x8ee+-0x12b9;}}function Dl(){return typeof AudioContext<'u'||typeof webkitAudioContext<'u';}const Zt=-0x1918+0x20a+-0x1*-0x170e,fn=0x22a7+-0xd23+0x1*-0x1583,Hs=-0x247b+-0x653+0x2ad0;function es(_0x2aec2f,_0x3704a9){return _0x2aec2f%_0x3704a9||-0x1*-0x1a7e+0x16*0x15e+0x22d*-0x1a;}class As extends me{constructor(_0x5d560d,_0x18eb8b,_0x14b96c){super(),h(this,'source',null),(this['_manager']=_0x5d560d,this['_volume']=_0x14b96c['volume']!==void(0x245e+-0x1a6*0x1+-0x22b8)?Y['clamp'](Number(_0x14b96c['volume'])||-0x11d3+-0x3*0x549+0x21ae,-0xedc*0x1+0x19*-0xca+0x2296,0x12a+0x1*-0x1622+0x14f9*0x1):0x17*0x119+-0x45d*-0x5+-0x2f0f,this['_pitch']=_0x14b96c['pitch']!==void(0x13a6+-0x1*0x30b+-0x589*0x3)?Math['max'](-0x6a*0x2b+-0x1c1*-0x9+-0xb*-0x2f+0.01,Number(_0x14b96c['pitch'])||0x1720+0x777+-0x1e97):0x2d1*-0xb+0xa9*-0x14+-0xb0c*-0x4,this['_loop']=!!(_0x14b96c['loop']!==void(0x1599+0x2053+-0x35ec)&&_0x14b96c['loop']),this['_sound']=_0x18eb8b,this['_state']=Hs,this['_suspended']=!(0x29d*-0xe+-0x355+-0x49*-0x8c),this['_suspendEn'+'dEvent']=0x419*-0x6+0x1*0x1913+-0x7d,this['_suspendIn'+'stanceEven'+'ts']=!(0x1c59+-0xb*0x19d+-0xa99),this['_playWhenL'+'oaded']=!(0x1*0x147d+-0x1c55*-0x1+-0x30d2),this['_startTime']=Math['max'](-0xb79+0x21ce+0x1*-0x1655,Number(_0x14b96c['startTime'])||-0x1b3a+0x2*0xaac+0x5e2),this['_duration']=Math['max'](0x2*0x16a+0x2*-0xec+-0xfc,Number(_0x14b96c['duration'])||0x232*-0xf+0x10c*0x11+0xf22*0x1),this['_startOffs'+'et']=null,this['_onPlayCal'+'lback']=_0x14b96c['onPlay'],this['_onPauseCa'+'llback']=_0x14b96c['onPause'],this['_onResumeC'+'allback']=_0x14b96c['onResume'],this['_onStopCal'+'lback']=_0x14b96c['onStop'],this['_onEndCall'+'back']=_0x14b96c['onEnd'],Dl()?(this['_startedAt']=-0x4e*-0x16+0x1774+0x28*-0xc1,this['_currentTi'+'me']=0xd96+0x7*0x15d+-0x1721,this['_currentOf'+'fset']=0x935+0x1*-0x8f9+-0x3c,this['_inputNode']=null,this['_connector'+'Node']=null,this['_firstNode']=null,this['_lastNode']=null,this['_waitingCo'+'ntextSuspe'+'nsion']=!(0x1181+-0x918+-0x868),this['_initializ'+'eNodes'](),this['_endedHand'+'ler']=this['_onEnded']['bind'](this)):(this['_isReady']=!(0x1b7*-0x3+0x547+-0x21),this['_loadedMet'+'adataHandl'+'er']=this['_onLoadedM'+'etadata']['bind'](this),this['_timeUpdat'+'eHandler']=this['_onTimeUpd'+'ate']['bind'](this),this['_endedHand'+'ler']=this['_onEnded']['bind'](this),this['_createSou'+'rce']()));}set['currentTim'+'e'](_0x2126b9){if(!(_0x2126b9<-0x8aa+0x2330+-0x1a86)){if(this['_state']===Zt){const _0x1159ff=this['_suspendIn'+'stanceEven'+'ts'];this['_suspendIn'+'stanceEven'+'ts']=!(0x5*-0x1a7+0x1230+-0xb*0xe7),this['stop'](),this['_startOffs'+'et']=_0x2126b9,this['play'](),this['_suspendIn'+'stanceEven'+'ts']=_0x1159ff;}else this['_startOffs'+'et']=_0x2126b9,this['_currentTi'+'me']=_0x2126b9;}}get['currentTim'+'e'](){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===fn?this['_currentTi'+'me']:this['_state']===Hs||!this['source']?-0x2363*-0x1+-0x6f7*0x1+-0x1c6c:(this['_updateCur'+'rentTime'](),this['_currentTi'+'me']);}set['duration'](_0x352228){this['_duration']=Math['max'](0x198d+0x111d+-0x2b*0xfe,Number(_0x352228)||0x142c+0x214c+-0x3578);const _0x47d701=this['_state']===Zt;this['stop'](),_0x47d701&&this['play']();}get['duration'](){return this['_sound']?this['_duration']?es(this['_duration'],this['_sound']['duration']):this['_sound']['duration']:0x2447*-0x1+-0x1f0b*0x1+0x4352;}get['isPaused'](){return this['_state']===fn;}get['isPlaying'](){return this['_state']===Zt;}get['isStopped'](){return this['_state']===Hs;}get['isSuspende'+'d'](){return this['_suspended'];}set['loop'](_0x1683ae){this['_loop']=!!_0x1683ae,this['source']&&(this['source']['loop']=this['_loop']);}get['loop'](){return this['_loop'];}set['pitch'](_0x26b127){this['_currentOf'+'fset']=this['currentTim'+'e'],this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_pitch']=Math['max'](Number(_0x26b127)||0x7*0x4ed+0xd60+0x2fdb*-0x1,0x23e4+-0xd6*-0x22+0x62*-0xa8+0.01),this['source']&&(this['source']['playbackRa'+'te']['value']=this['_pitch']);}get['pitch'](){return this['_pitch'];}set['sound'](_0x30181b){this['_sound']=_0x30181b,this['_state']!==Hs?this['stop']():this['_createSou'+'rce']();}get['sound'](){return this['_sound'];}set['startTime'](_0x5c88bd){this['_startTime']=Math['max'](0x13dc*-0x1+0x37*0x74+-0xa2*0x8,Number(_0x5c88bd)||-0x7*0x504+0x1*-0x221b+-0x179*-0x2f);const _0x51f38d=this['_state']===Zt;this['stop'](),_0x51f38d&&this['play']();}get['startTime'](){return this['_startTime'];}set['volume'](_0x527895){_0x527895=Y['clamp'](_0x527895,0x1662+0x2c3*-0x5+-0x893,0x1*0xa07+0x1575+0x1*-0x1f7b),this['_volume']=_0x527895,this['gain']&&(this['gain']['gain']['value']=_0x527895*this['_manager']['volume']);}get['volume'](){return this['_volume'];}['_onPlay'](){this['fire']('play'),this['_onPlayCal'+'lback']&&this['_onPlayCal'+'lback'](this);}['_onPause'](){this['fire']('pause'),this['_onPauseCa'+'llback']&&this['_onPauseCa'+'llback'](this);}['_onResume'](){this['fire']('resume'),this['_onResumeC'+'allback']&&this['_onResumeC'+'allback'](this);}['_onStop'](){this['fire']('stop'),this['_onStopCal'+'lback']&&this['_onStopCal'+'lback'](this);}['_onEnded'](){if(this['_suspendEn'+'dEvent']>-0xa42*-0x2+-0x5*0x586+0x25e*0x3){this['_suspendEn'+'dEvent']--;return;}this['fire']('end'),this['_onEndCall'+'back']&&this['_onEndCall'+'back'](this),this['stop']();}['_onManager'+'VolumeChan'+'ge'](){this['volume']=this['_volume'];}['_onManager'+'Suspend'](){this['_state']===Zt&&!this['_suspended']&&(this['_suspended']=!(-0x67*-0x40+-0x107+-0x18b9),this['pause']());}['_onManager'+'Resume'](){this['_suspended']&&(this['_suspended']=!(-0x192+-0x5fa+-0x78d*-0x1),this['resume']());}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['_inputNode']=this['gain'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}['play'](){return this['_state']!==Hs&&this['stop'](),this['_state']=Zt,this['_playWhenL'+'oaded']=!(0x2276+-0xd08+-0x156d),this['_waitingCo'+'ntextSuspe'+'nsion']?!(-0x1*0x2313+-0x686+0x299a):this['_manager']['suspended']?(this['_manager']['once']('resume',this['_playAudio'+'Immediate'],this),this['_waitingCo'+'ntextSuspe'+'nsion']=!(0xa4*-0x1+-0xd5b+0xdff),!(-0x17b3+0x2295+-0xae1)):(this['_playAudio'+'Immediate'](),!(0x168c+0x1c9*0xb+-0x2a2f*0x1));}['_playAudio'+'Immediate'](){if(this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0xdcb+0x3c8*0x2+0x63c),this['_state']!==Zt)return;this['source']||this['_createSou'+'rce']();let _0x51ed6e=es(this['_startOffs'+'et'],this['duration']);_0x51ed6e=es(this['_startTime']+_0x51ed6e,this['_sound']['duration']),this['_startOffs'+'et']=null,this['_duration']?this['source']['start'](0x1399+-0x5d*-0x4e+-0x6d9*0x7,_0x51ed6e,this['_duration']):this['source']['start'](-0x1921+-0xd1*-0x2+0x177f,_0x51ed6e),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentTi'+'me']=0x6*-0xd3+0x97e+-0x123*0x4,this['_currentOf'+'fset']=_0x51ed6e,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay']();}['pause'](){return this['_playWhenL'+'oaded']=!(0x7e+0x2092+-0x210f),this['_state']!==Zt?!(0x13bd*0x1+-0xbf3+0x7c9*-0x1):(this['_state']=fn,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_updateCur'+'rentTime'](),this['_suspendEn'+'dEvent']++,this['source']['stop'](0x427*0x1+-0x1724+0x12fd),this['source']=null,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause']()),!(-0x11*0x16a+-0x1dcd+0x35d7));}['resume'](){if(this['_state']!==fn)return!(-0x5c9*-0x3+-0x69*-0x31+0x2573*-0x1);let _0x3e03ac=this['currentTim'+'e'];return this['_state']=Zt,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['source']||this['_createSou'+'rce'](),this['_startOffs'+'et']!==null&&(_0x3e03ac=es(this['_startOffs'+'et'],this['duration']),_0x3e03ac=es(this['_startTime']+_0x3e03ac,this['_sound']['duration']),this['_startOffs'+'et']=null),this['_duration']?this['source']['start'](-0x1*-0x33b+-0x1315+0x7ed*0x2,_0x3e03ac,this['_duration']):this['source']['start'](-0x593*-0x4+-0x125a+-0x3f2,_0x3e03ac),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentOf'+'fset']=_0x3e03ac,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_playWhenL'+'oaded']=!(0x7*-0x1f1+-0x1*0x23d+0xfd5),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(-0x427*-0x7+-0x1e7d+0x16c);}['stop'](){if(this['_playWhenL'+'oaded']=!(-0x1a27+-0x5ae+0x1fd6),this['_state']===Hs)return!(0x58*-0x1d+0x7f*-0x2+-0x7*-0x191);const _0x2697cc=this['_state']===Zt;return this['_state']=Hs,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_startedAt']=0x13a1*-0x1+-0x24bf+-0xa4*-0x58,this['_currentTi'+'me']=-0x1cd8+-0xdb*-0x1d+-0x409*-0x1,this['_currentOf'+'fset']=-0x1493+0x3*0x28b+0x679*0x2,this['_startOffs'+'et']=null,this['_suspendEn'+'dEvent']++,_0x2697cc&&this['source']&&this['source']['stop'](-0x10*-0x26b+0x2*-0x10bf+-0x532),this['source']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop']()),!(-0x3*-0x76b+-0x2*-0x77f+-0x253f);}['setExterna'+'lNodes'](_0x1e492a,_0x237f85){if(!_0x1e492a){console['error']('The\x20firstN'+'ode\x20must\x20b'+'e\x20a\x20valid\x20'+'Audio\x20Node');return;}_0x237f85||(_0x237f85=_0x1e492a);const _0x27f045=this['_manager']['context']['destinatio'+'n'];this['_firstNode']!==_0x1e492a&&(this['_firstNode']?this['_connector'+'Node']['disconnect'](this['_firstNode']):this['_connector'+'Node']['disconnect'](_0x27f045),this['_firstNode']=_0x1e492a,this['_connector'+'Node']['connect'](_0x1e492a)),this['_lastNode']!==_0x237f85&&(this['_lastNode']&&this['_lastNode']['disconnect'](_0x27f045),this['_lastNode']=_0x237f85,this['_lastNode']['connect'](_0x27f045));}['clearExter'+'nalNodes'](){const _0x5d44fd=this['_manager']['context']['destinatio'+'n'];this['_firstNode']&&(this['_connector'+'Node']['disconnect'](this['_firstNode']),this['_firstNode']=null),this['_lastNode']&&(this['_lastNode']['disconnect'](_0x5d44fd),this['_lastNode']=null),this['_connector'+'Node']['connect'](_0x5d44fd);}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_createSou'+'rce'](){if(!this['_sound'])return null;const _0x3cdd2f=this['_manager']['context'];return this['_sound']['buffer']&&(this['source']=_0x3cdd2f['createBuff'+'erSource'](),this['source']['buffer']=this['_sound']['buffer'],this['source']['connect'](this['_inputNode']),this['source']['onended']=this['_endedHand'+'ler'],this['source']['loopStart']=es(this['_startTime'],this['source']['buffer']['duration']),this['_duration']&&(this['source']['loopEnd']=Math['max'](this['source']['loopStart'],es(this['_startTime']+this['_duration'],this['source']['buffer']['duration'])))),this['source'];}['_updateCur'+'rentTime'](){this['_currentTi'+'me']=es((this['_manager']['context']['currentTim'+'e']-this['_startedAt'])*this['_pitch']+this['_currentOf'+'fset'],this['duration']);}['_onManager'+'Destroy'](){this['source']&&this['_state']===Zt&&(this['source']['stop'](0x78f+-0x1*0x18bb+0x112c),this['source']=null);}}h(As,'EVENT_PLAY','play'),h(As,'EVENT_PAUS'+'E','pause'),h(As,'EVENT_RESU'+'ME','resume'),h(As,'EVENT_STOP','stop'),h(As,'EVENT_END','end'),Dl()||(Object['assign'](As['prototype'],{'play':function(){return this['_state']!==Hs&&this['stop'](),!this['source']&&!this['_createSou'+'rce']()?!(0xd*-0x20b+0x1e7a+-0x14e*0x3):(this['volume']=this['_volume'],this['pitch']=this['_pitch'],this['loop']=this['_loop'],this['source']['play'](),this['_state']=Zt,this['_playWhenL'+'oaded']=!(-0xa58+0x1567*0x1+-0xb0e),this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_manager']['suspended']&&this['_onManager'+'Suspend'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay'](),!(-0x1f82+-0x5d2+-0x1*-0x2554));},'pause':function(){return!this['source']||this['_state']!==Zt?!(0x5*-0x61d+0x2*0xed1+-0x5*-0x30):(this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(0x31d*0x7+-0xc98*-0x2+-0x7*0x6b6),this['_state']=fn,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause'](),!(-0x4aa+0x33c+0x16e));},'resume':function(){return!this['source']||this['_state']!==fn?!(0x16*0xc+0x1*0x1ea1+0x8*-0x3f5):(this['_state']=Zt,this['_playWhenL'+'oaded']=!(-0x123e+0x2*-0x8a1+0x2381),this['source']['paused']&&(this['source']['play'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(-0xc2*-0xf+0x1b76+-0x7*0x58c));},'stop':function(){return!this['source']||this['_state']===Hs?!(0x157a*0x1+-0x5*-0x49f+0x2*-0x164a):(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(-0x1175+0x22b2+-0x44f*0x4),this['_state']=Hs,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop'](),!(0x1c18+0x1*-0x1f61+-0x349*-0x1));},'setExternalNodes':function(){},'clearExternalNodes':function(){},'getExternalNodes':function(){return[null,null];},'_onLoadedMetadata':function(){this['source']['removeEven'+'tListener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['_isReady']=!(-0x1aa6*-0x1+-0x1*0x1426+-0x40*0x1a);let _0x2aaefe=es(this['_startOffs'+'et'],this['duration']);_0x2aaefe=es(this['_startTime']+_0x2aaefe,this['_sound']['duration']),this['_startOffs'+'et']=null,this['source']['currentTim'+'e']=_0x2aaefe;},'_createSource':function(){return this['_sound']&&this['_sound']['audio']&&(this['_isReady']=!(-0xa34*0x1+0x23ea+-0x19b5),this['source']=this['_sound']['audio']['cloneNode'](!(-0x87*0x47+0x3d1+0x21a*0x10)),this['source']['addEventLi'+'stener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['source']['addEventLi'+'stener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['onended']=this['_endedHand'+'ler']),this['source'];},'_onTimeUpdate':function(){this['_duration']&&this['source']['currentTim'+'e']>es(this['_startTime']+this['_duration'],this['source']['duration'])&&(this['loop']?this['source']['currentTim'+'e']=es(this['_startTime'],this['source']['duration']):(this['source']['removeEven'+'tListener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['pause'](),this['_onEnded']()));},'_onManagerDestroy':function(){this['source']&&this['source']['pause']();}}),Object['defineProp'+'erty'](As['prototype'],'volume',{'get':function(){return this['_volume'];},'set':function(_0x5d8283){_0x5d8283=Y['clamp'](_0x5d8283,0x22c5+-0x1da7+-0x51e,-0x7f*-0xf+-0x4d1+-0x29f),this['_volume']=_0x5d8283,this['source']&&(this['source']['volume']=_0x5d8283*this['_manager']['volume']);}}),Object['defineProp'+'erty'](As['prototype'],'pitch',{'get':function(){return this['_pitch'];},'set':function(_0x2a7f31){this['_pitch']=Math['max'](Number(_0x2a7f31)||-0x24*-0x53+-0x21df+0x1*0x1633,-0x218+-0x1925*0x1+0x1b3d+0.01),this['source']&&(this['source']['playbackRa'+'te']=this['_pitch']);}}),Object['defineProp'+'erty'](As['prototype'],'sound',{'get':function(){return this['_sound'];},'set':function(_0x3d2f49){this['stop'](),this['_sound']=_0x3d2f49;}}),Object['defineProp'+'erty'](As['prototype'],'currentTim'+'e',{'get':function(){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===Hs||!this['source']?-0x21ae+-0x2053+0x4201:this['source']['currentTim'+'e']-this['_startTime'];},'set':function(_0x2dea4a){_0x2dea4a<0x1d7b*0x1+-0x25ee+0x873||(this['_startOffs'+'et']=_0x2dea4a,this['source']&&this['_isReady']&&(this['source']['currentTim'+'e']=es(this['_startTime']+es(_0x2dea4a,this['duration']),this['_sound']['duration']),this['_startOffs'+'et']=null));}}));const Dw=-0x41f*0x1+0x23*-0x22d+0x1d6*0x41;class sn extends As{constructor(_0x15465e,_0x288de2,_0x188a98={}){super(_0x15465e,_0x288de2,_0x188a98),h(this,'_position',new D()),h(this,'_velocity',new D()),(_0x188a98['position']&&(this['position']=_0x188a98['position']),this['maxDistanc'+'e']=_0x188a98['maxDistanc'+'e']!==void(-0xd95+-0x1734+-0xdb*-0x2b)?Number(_0x188a98['maxDistanc'+'e']):Dw,this['refDistanc'+'e']=_0x188a98['refDistanc'+'e']!==void(0x18c1+-0x1eff+0x2*0x31f)?Number(_0x188a98['refDistanc'+'e']):0x1ff1+0x1606*0x1+-0x2*0x1afb,this['rollOffFac'+'tor']=_0x188a98['rollOffFac'+'tor']!==void(0xdf7+-0x2654+-0x37b*-0x7)?Number(_0x188a98['rollOffFac'+'tor']):-0x4d*0x1a+-0xf95+-0x7*-0x358,this['distanceMo'+'del']=_0x188a98['distanceMo'+'del']!==void(-0x1a1*-0x1+0x3*0x5ae+-0x9*0x213)?_0x188a98['distanceMo'+'del']:Vp);}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['panner']=this['_manager']['context']['createPann'+'er'](),this['panner']['connect'](this['gain']),this['_inputNode']=this['panner'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}set['position'](_0x7d2dc0){this['_position']['copy'](_0x7d2dc0);const _0x15646f=this['panner'];'positionX'in _0x15646f?(_0x15646f['positionX']['value']=_0x7d2dc0['x'],_0x15646f['positionY']['value']=_0x7d2dc0['y'],_0x15646f['positionZ']['value']=_0x7d2dc0['z']):_0x15646f['setPositio'+'n']&&_0x15646f['setPositio'+'n'](_0x7d2dc0['x'],_0x7d2dc0['y'],_0x7d2dc0['z']);}get['position'](){return this['_position'];}set['velocity'](_0x2318df){w['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity']['copy'](_0x2318df);}get['velocity'](){return w['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity'];}set['maxDistanc'+'e'](_0x8dfe48){this['panner']['maxDistanc'+'e']=_0x8dfe48;}get['maxDistanc'+'e'](){return this['panner']['maxDistanc'+'e'];}set['refDistanc'+'e'](_0x5a9308){this['panner']['refDistanc'+'e']=_0x5a9308;}get['refDistanc'+'e'](){return this['panner']['refDistanc'+'e'];}set['rollOffFac'+'tor'](_0x4e4df8){this['panner']['rolloffFac'+'tor']=_0x4e4df8;}get['rollOffFac'+'tor'](){return this['panner']['rolloffFac'+'tor'];}set['distanceMo'+'del'](_0x54e347){this['panner']['distanceMo'+'del']=_0x54e347;}get['distanceMo'+'del'](){return this['panner']['distanceMo'+'del'];}}if(!Dl()){let l=new D();const t=function(_0x3e6bbb,_0x30a19a,_0x97c852,_0x2bafdc,_0x5191ea,_0x50f1d2){l=l['sub2'](_0x3e6bbb,_0x30a19a);const _0x36b4fa=l['length']();if(_0x36b4fa<_0x97c852)return-0x22*-0xab+-0x16f*-0x2+-0x1993;if(_0x36b4fa>_0x2bafdc)return 0x19fb+0x1f*0xad+0x1777*-0x2;let _0x2ec4d9=-0x1c53+0x1255+-0x9fe*-0x1;return _0x50f1d2===Vp?_0x2ec4d9=0x9c0+0x1894*0x1+0x1*-0x2253-_0x5191ea*(_0x36b4fa-_0x97c852)/(_0x2bafdc-_0x97c852):_0x50f1d2===bw?_0x2ec4d9=_0x97c852/(_0x97c852+_0x5191ea*(_0x36b4fa-_0x97c852)):_0x50f1d2===Aw&&(_0x2ec4d9=Math['pow'](_0x36b4fa/_0x97c852,-_0x5191ea)),Y['clamp'](_0x2ec4d9,0x1*-0x4e+-0x3f1+0x43f*0x1,0x2*0x9d9+0x1*0x1cef+-0x30a0);};Object['defineProp'+'erty'](sn['prototype'],'position',{'get':function(){return this['_position'];},'set':function(_0x543645){if(this['_position']['copy'](_0x543645),this['source']){const _0x529baf=this['_manager']['listener']['getPositio'+'n'](),_0x2adfa1=t(_0x529baf,this['_position'],this['refDistanc'+'e'],this['maxDistanc'+'e'],this['rollOffFac'+'tor'],this['distanceMo'+'del']),_0xeaa910=this['volume'];this['source']['volume']=_0xeaa910*_0x2adfa1*this['_manager']['volume'];}}}),Object['defineProp'+'erty'](sn['prototype'],'maxDistanc'+'e',{'get':function(){return this['_maxDistan'+'ce'];},'set':function(_0x5b5966){this['_maxDistan'+'ce']=_0x5b5966;}}),Object['defineProp'+'erty'](sn['prototype'],'refDistanc'+'e',{'get':function(){return this['_refDistan'+'ce'];},'set':function(_0x20f7d0){this['_refDistan'+'ce']=_0x20f7d0;}}),Object['defineProp'+'erty'](sn['prototype'],'rollOffFac'+'tor',{'get':function(){return this['_rollOffFa'+'ctor'];},'set':function(_0x14001f){this['_rollOffFa'+'ctor']=_0x14001f;}}),Object['defineProp'+'erty'](sn['prototype'],'distanceMo'+'del',{'get':function(){return this['_distanceM'+'odel'];},'set':function(_0x368ccb){this['_distanceM'+'odel']=_0x368ccb;}});}const Gp=-0x1935+0x10*0x17d+0x165,Hp=0x1f79+0x1364+-0x1*0x32dc,Zs=-0xbf*-0x11+-0x99*0x19+0x244,Cs=0x1faf+0x20e3+0x1585*-0x3,Gn=0x1d0a+0x7d0+-0xcd*0x2e,Wp=0x3*-0xb6f+-0x2*0x1173+-0x4538*-0x1,Ed=-0xcb6*0x2+-0xc*-0x12e+-0x121*-0xa,$p=-0x1659+-0x13*0x176+0x3222,Xp=-0xccb+0xb57*0x1+0xbe*0x2,qp=0x11*-0x1d2+-0x1*0x46c+0x2367,jp=-0x3*-0x417+0x671+0x3bc*-0x5,Yy={[Gp]:'SUBTRACTIV'+'E',[Hp]:'ADDITIVE',[Zs]:'NORMAL',[Cs]:'NONE',[Gn]:'PREMULTIPL'+'IED',[Wp]:'MULTIPLICA'+'TIVE',[Ed]:'ADDITIVEAL'+'PHA',[$p]:'MULTIPLICA'+'TIVE2X',[Xp]:'SCREEN',[qp]:'MIN',[jp]:'MAX'},Kn='none',Iw='linear',Lw=-0x1004*0x1+-0x1c9f+0x2ca3,Yp=0x6b*0x3e+0x21*-0xc1+-0x107,Rw={[Lw]:'NONE',[Yp]:'SCHLICK'},Ow=0x61b+0x251e*0x1+0x2b39*-0x1,Ky=0x1*-0x248e+0x2e2+-0x1*-0x21bb,er=-0x11de*-0x1+0x1c5d+-0x2e3b,ps=0x1*-0xe62+-0x1e40+0x2ca3,Kp=-0x1201+0x58*-0x1+0x125b*0x1,Zp=0x49*-0x3c+0x1d*-0x5f+0x1be2,Il=0x15ff*-0x1+0x4*-0x3ba+0x24eb*0x1,ve=-0xddd+-0xfdf+0x1dbc,Ke=0x2*0x7e0+-0x1*0x5b3+-0xa0c,Ze=0x854+-0x2679+0x1e27,u_={[ve]:'DIRECTIONA'+'L',[Ke]:'OMNI',[Ze]:'SPOT'},$c=-0x155c+0x1fb*-0x4+-0x34c*-0x9,Ys=-0x63f*0x2+-0x7dd+0x145b,Zy=-0x2*-0xef+0x1067+-0x1244,Qy=-0xce2+0x22*0xad+-0xa16,Jy=0x1486+-0x1763*0x1+0x2e*0x10,Fw={[Ys]:'PUNCTUAL',[Zy]:'RECT',[Qy]:'DISK',[Jy]:'SPHERE'},Qp=-0x25*-0xb3+-0x4ce+0x1*-0x1511,ev=0x257+0x1*0x1478+-0x3cd*0x6,Nw={[Qp]:'LINEAR',[ev]:'INVERSESQU'+'ARED'},$s=-0x6*0x441+-0x219c+0x3b22,au=-0x84f+0x1dd*-0xf+0xb*0x34c,Jp=-0x1c84+0x92+0x1bf5,kw=0x4*-0xcd+0x593*-0x6+0x1a*0x169,tv=-0x1f*0x3b+0x1234+-0xb0a,al=0xfd0+0x2452+-0x341c,sv=-0x1*0x15c5+0x1*0x1532+0x9a,iv=-0x1*0x122d+0x26e1+0x3*-0x6e4,Uw=-0xeda*0x1+0x21f6+-0x1*0x1313,qi=new Map([[tv,{'name':'PCF1_32F','kind':'PCF1','format':$i,'pcf':!(-0x192a+-0x645*-0x2+-0xca*-0x10)}],[$s,{'name':'PCF3_32F','kind':'PCF3','format':$i,'pcf':!(-0x1*-0x1c99+0x25b2+-0x424b)}],[kw,{'name':'PCF5_32F','kind':'PCF5','format':$i,'pcf':!(-0x1*0x2534+-0x1*0x146f+-0xb87*-0x5)}],[sv,{'name':'PCF1_16F','kind':'PCF1','format':vn,'pcf':!(-0x1f6f+-0x25ea+-0x1*-0x4559)}],[iv,{'name':'PCF3_16F','kind':'PCF3','format':vn,'pcf':!(0x222e+0x1ca2+0x3ed*-0x10)}],[Uw,{'name':'PCF5_16F','kind':'PCF5','format':vn,'pcf':!(-0x173e+-0x130*0x7+0x1f8e)}],[au,{'name':'VSM_16F','kind':'VSM','format':nt,'vsm':!(0x543+-0x1*-0x25c6+-0x2b09)}],[Jp,{'name':'VSM_32F','kind':'VSM','format':Xt,'vsm':!(0x13d*0x3+-0x1*0xa6+-0x311)}],[al,{'name':'PCSS_32F','kind':'PCSS','format':Ji,'pcss':!(-0x4b*-0x56+-0x21d1*-0x1+-0x3b03)}]]),Bw=0x1dd3+-0x2*-0x25c+-0x218c,em=0x1234+-0xae0+-0x177*0x5,nu=0x51*0xd+0x7*-0x52f+0x202c,rv=-0x16db+0x1c8d+0x3*-0x1e6,ai=0x2*-0x54e+0x2f3*-0xa+-0x162*-0x1d,zw=-0xec3+-0x4*-0x9a9+-0x17e0*0x1,yh=-0x2124+-0xddd+0x2f01*0x1,Vw=0xa1+-0x12f6*-0x1+-0x1396,ni=0xd*0x166+-0x13ab+0x17d,En=-0xca6+-0x114a+0x1df1,un=0xdcc+0x35*0xd+-0x107d,$r=-0x16*-0x125+0x185a+-0x3187,Jl=-0x1*0xab6+-0x34*-0x53+-0x1*0x624,tm=-0x1135*0x1+0x1*0x192d+-0x7f8,av=0x1363+-0x814+-0xb4e,Gw={[tm]:'NONE',[av]:'BOX'},p_='mul',Ll=0x1e*0xa3+-0x9e8*0x2+0xb6,Xc=0x1188+-0xbbf+0x14*-0x4a,Hw={[Ll]:'NONE',[Xc]:'SRGB'},sm=-0x20fd+0x7c+0x2081,UU=-0x17b6+0x3f7+0x13c0,BU=-0x5*0x2b3+-0x1*-0x9f7+0x38a,zU=0x2058+-0x14*-0xd0+-0x3095,VU=-0x239c+0x2169+0x237,GU=0x18ff*0x1+0x1173+-0x1*0x2a6d,nv=-0x1cf*-0x7+-0x12ee*-0x1+-0x1f91,ov=['LINEAR','FILMIC','HEJL','ACES','ACES2','NEUTRAL','NONE'],lv=-0x232+-0x1084+0xa*0x1df,bd=0x1*0x11b5+-0x1*-0x1f4d+0x3c5*-0xd,cv=0x227d+0xe6c+-0x27*0x141,Ww={[lv]:'NONE',[bd]:'AO',[cv]:'GLOSSDEPEN'+'DENT'},vr='none',vh='envAtlas',xh='envAtlasHQ',Th='cubeMap',hv='sphereMap',$w={[vr]:'NONE',[vh]:'ENVATLAS',[xh]:'ENVATLASHQ',[Th]:'CUBEMAP',[hv]:'SPHEREMAP'},im='ambientSH',rm='envAtlas',am='constant',Xw={[im]:'AMBIENTSH',[rm]:'ENVALATLAS',[am]:'CONSTANT'},wh=0x199f+-0xcb*0xb+-0x10e5,nl=0x596*-0x3+-0x17cd+0x2891*0x1,nm=0x2331+-0x1*-0x14ac+-0x37d9,dv=0x169f*-0x1+-0x7*-0x413+-0x5de,fv=0x4d0+0x847+-0xd07,ol=-0x15e+-0x9ab+-0x1*-0xb29,ou=-0x26d5+0x130f+-0xe9*-0x16,uv=0x25b*-0xc+-0x5*-0x3a9+0xa77,Eh=0x2336+0x2470+0x2*-0x2353,om=-0x1aa0+-0x55d+0x1*0x21fd,ll=0x6e+0x3b*-0x3b+0x112b,cl=-0x26fc+-0x20e3*0x1+0x4fdf,pv=-0x1cf*-0x1+0x307+-0x595*-0x2,hl=-0x1*-0x1b7d+-0x1477*0x1+0x18fa,qc=0x2312*-0x1+0x51d8+-0x113a*-0x1,Ps=0x1a*-0xb1+0x1fe1*0x1+-0xde7,xr=0x288*0x1+-0x671+-0x1*-0x3ea,lm=0x65d+0xc*0x175+0x11*-0x167,Ss=-0x223f+-0x1d9c+0x3fdc,di=-0x3*0x317+0xb99+-0x252,fi=0xeba*0x2+0x1d*-0x129+0x435,Aa=0x10a5+-0x2185+-0x28*-0x6c,Rl=0x1a8+-0x29*-0xf+0x207*-0x2,cm=0x665*0x1+0x1*0x1a4d+-0x20b0*0x1,Zn=0x11a6+0x3*0x383+0x70b*-0x4,ci=0x140b+-0x45c+-0x1*0xfaf,Pt=0x1d2f+-0x5b4+-0x177a,Mt=-0x493*-0x1+0x1886*0x1+0x1d17*-0x1,qw={[ci]:'SIMPLE',[Pt]:'SLICED',[Mt]:'TILED'},jc=0x1e90+0x263d+-0x25*0x1dc,ec=0x1e5b+-0xde6+-0x1075,Yc=-0x76b+0x79*0x1b+-0x558,jw=0xfc*0x20+-0xb7a+0xcd*-0x19,Yw=-0xb9*0xa+-0xd*0x1eb+-0xab9*-0x3,m_=0x9*-0x115+0xb3f+-0x17f,Kw=-0x3*0xa05+-0x71+0x1e84,Zw=-0x21d3+-0x1*0x1f2f+0x4107,hm=0x24fd+0x1791+-0x3c8e,lu=-0x1e5d+0x4*-0x5ca+-0x1f*-0x1ba,Ce=-0x103b+0x12d0*0x2+-0x1565,je=-0x1*0xb75+-0x3*0x8a3+-0x1*-0x255f,Bo='infinite',Qw='box',Jw='dome',Sa='none',eE='bayer8',tE='bluenoise',sE='ignnoise',iE={[Sa]:'NONE',[eE]:'BAYER8',[tE]:'BLUENOISE',[sE]:'IGNNOISE'},rE='prerender',aE='postrender',nE='prerender:'+'layer',oE='postrender'+':layer',mv='precull',_v='postcull',lE='cull:end';class Ad{constructor(_0x8ae8fa,_0xf0d7db,_0x28d4ee){h(this,'uniformFor'+'mats',[]),h(this,'bindGroupF'+'ormats',[]),h(this,'vertexForm'+'at'),(this['uniformFor'+'mats'][rl]=_0x8ae8fa,this['bindGroupF'+'ormats'][rl]=_0xf0d7db,this['vertexForm'+'at']=_0x28d4ee);}['hasUniform'](_0x2a7786){for(let _0x532e59=0x16ec+0x1*-0x654+-0x2*0x84c;_0x532e59<this['uniformFor'+'mats']['length'];_0x532e59++){const _0x453238=this['uniformFor'+'mats'][_0x532e59];if(_0x453238!=null&&_0x453238['get'](_0x2a7786))return!(0x1702+0x1*0x1f6f+-0x3671);}return!(0x1a6a+0x258d*0x1+-0x3ff6);}['hasTexture'](_0x4a0206){for(let _0x4415ef=-0x53*-0x4f+-0xb8f+-0xe0e;_0x4415ef<this['bindGroupF'+'ormats']['length'];_0x4415ef++){const _0x42d4db=this['bindGroupF'+'ormats'][_0x4415ef];if(_0x42d4db!=null&&_0x42d4db['getTexture'](_0x4a0206))return!(0x243e+-0x19ce+-0x2*0x538);}return!(0xbf8+-0xae5+-0x2*0x89);}['getVertexE'+'lement'](_0x146f18){var _0x52842d;return(_0x52842d=this['vertexForm'+'at'])==null?void(0x7ed*-0x2+-0x1f95+0x2f6f):_0x52842d['elements']['find'](_0x8eca8e=>_0x8eca8e['name']===_0x146f18);}['generateKe'+'y'](_0x218b95){var _0x43a17f;let _0x5218d6=JSON['stringify'](this['uniformFor'+'mats'])+JSON['stringify'](this['bindGroupF'+'ormats']);return _0x218b95['isWebGPU']&&(_0x5218d6+=(_0x43a17f=this['vertexForm'+'at'])==null?void(0x2f1*-0xb+-0x37f*-0xb+-0x61a):_0x43a17f['shaderProc'+'essingHash'+'String']),_0x5218d6;}}const gv=new Kt();function Hn(_0x3456bc){const _0x66bc1c=gv['get'](_0x3456bc);return w['assert'](_0x66bc1c),_0x66bc1c;}function cE(_0x412cb0,_0x1d4784){w['assert'](_0x1d4784),gv['get'](_0x412cb0,()=>_0x1d4784);}class ya{static['definesHas'+'h'](_0x2946d7){const _0x309a02=Array['from'](_0x2946d7)['sort']((_0x38fdbb,_0x57a43d)=>_0x38fdbb[-0x817+0x15ea+-0xdd3]>_0x57a43d[0x1e6+-0x8f4+0x70e]?-0xd09+0x11*0xda+-0x170:-(-0x108e+0x1095+-0x6));return hi(JSON['stringify'](_0x309a02));}}const hE=new Kt();class dE{constructor(_0x1a7074,_0xe35c36,_0x2fee08={}){h(this,'index'),h(this,'name'),h(this,'defines',new Map()),(w['assert'](/^[a-z]\w*$/i['test'](_0x1a7074),'ShaderPass'+'\x20name\x20can\x20'+'only\x20conta'+'in\x20letters'+',\x20numbers\x20'+'and\x20unders'+'cores\x20and\x20'+'start\x20with'+'\x20a\x20letter:'+'\x20'+_0x1a7074),this['name']=_0x1a7074,this['index']=_0xe35c36,Object['assign'](this,_0x2fee08),this['buildShade'+'rDefines']());}['buildShade'+'rDefines'](){let _0x42754f;this['isShadow']?_0x42754f='SHADOW':this['isForward']?_0x42754f='FORWARD':this['index']===Zn&&(_0x42754f='PICK'),this['defines']['set'](_0x42754f+'_PASS',''),this['defines']['set'](this['name']['toUpperCas'+'e']()+'_PASS','');}}class Si{constructor(){h(this,'passesName'+'d',new Map()),h(this,'passesInde'+'xed',[]),h(this,'nextIndex',0x4c7*-0x2+-0x20b*0x7+0x17db*0x1);const _0x434a02=(_0xf9ba7a,_0x22ddf1,_0x574934)=>{const _0x10d63a=this['allocate'](_0xf9ba7a,_0x574934);w['assert'](_0x10d63a['index']===_0x22ddf1);};_0x434a02('forward',Aa,{'isForward':!(0x107d+-0x2*-0x10db+-0x47*0xb5)}),_0x434a02('prepass',Rl),_0x434a02('shadow',cm),_0x434a02('pick',Zn);}static['get'](_0x2e55a5){return w['assert'](_0x2e55a5),hE['get'](_0x2e55a5,()=>new Si());}['allocate'](_0x24a090,_0x51fd04){let _0x2ce024=this['passesName'+'d']['get'](_0x24a090);return _0x2ce024===void(-0xf86+-0x26b5+-0x363b*-0x1)&&(_0x2ce024=new dE(_0x24a090,this['nextIndex'],_0x51fd04),this['passesName'+'d']['set'](_0x2ce024['name'],_0x2ce024),this['passesInde'+'xed'][_0x2ce024['index']]=_0x2ce024,this['nextIndex']++),_0x2ce024;}['getByIndex'](_0x2062d6){const _0x349226=this['passesInde'+'xed'][_0x2062d6];return w['assert'](_0x349226),_0x349226;}['getByName'](_0x26d6d6){return this['passesName'+'d']['get'](_0x26d6d6);}}class __ extends Map{constructor(){super(...arguments),h(this,'_keyDirty',!(0x37*-0x95+-0x103f*-0x2+-0x7a)),h(this,'_key','');}['set'](_0x48dde5,_0x1e5d24){return(!this['has'](_0x48dde5)||this['get'](_0x48dde5)!==_0x1e5d24)&&this['markDirty'](),super['set'](_0x48dde5,_0x1e5d24);}['add'](_0x495146){for(const [_0x3c2768,_0xaebc1d]of Object['entries'](_0x495146))this['set'](_0x3c2768,_0xaebc1d);return this;}['delete'](_0x1f781e){const _0x5b210b=this['has'](_0x1f781e),_0x207ff4=super['delete'](_0x1f781e);return _0x5b210b&&_0x207ff4&&this['markDirty'](),_0x207ff4;}['clear'](){this['size']>0x1d*0xed+0x719*0x4+0x1*-0x373d&&this['markDirty'](),super['clear']();}['markDirty'](){this['_dirty']=!(-0x1aa9+-0x1*0x1813+0x32bc*0x1),this['_keyDirty']=!(-0x1983+-0x262c+0x3faf);}['isDirty'](){return this['_dirty'];}['resetDirty'](){this['_dirty']=!(0x2187+0x2052+0x8*-0x83b);}get['key'](){return this['_keyDirty']&&(this['_keyDirty']=!(0x1aea*-0x1+-0xd38+0xf*0x2ad),this['_key']=Array['from'](this['entries']())['sort'](([_0x5c96c8],[_0x323fd5])=>_0x5c96c8<_0x323fd5?-(0x128a+-0x409+-0xe80):_0x5c96c8>_0x323fd5?0xb8d+0x35c+-0xee8:0xe4a+-0xec1+-0x77*-0x1)['map'](([_0x226109,_0xf24025])=>_0x226109+'='+hi(_0xf24025))['join'](',')),this['_key'];}['copy'](_0x2a60cc){this['clear']();for(const [_0x15ef8d,_0x14de7e]of _0x2a60cc)this['set'](_0x15ef8d,_0x14de7e);return this;}}const fE=new Kt();class Pe{constructor(){h(this,'glsl',new __()),h(this,'wgsl',new __()),h(this,'version','');}static['get'](_0x212163,_0x1759a7=Fe){const _0x1ef0e6=fE['get'](_0x212163,()=>new Pe());return _0x1759a7===Fe?_0x1ef0e6['glsl']:_0x1ef0e6['wgsl'];}get['useWGSL'](){return this['glsl']['size']===0x14d1+-0x5*0x413+0x13*-0x6||this['wgsl']['size']>0x24f9+-0xd39*-0x1+-0xa*0x505;}get['key'](){return'GLSL:'+this['glsl']['key']+'|WGSL:'+this['wgsl']['key']+'|API:'+this['version'];}['isDirty'](){return this['glsl']['isDirty']()||this['wgsl']['isDirty']();}['resetDirty'](){this['glsl']['resetDirty'](),this['wgsl']['resetDirty']();}['copy'](_0x276dd6){return this['version']=_0x276dd6['version'],this['glsl']['copy'](_0x276dd6['glsl']),this['wgsl']['copy'](_0x276dd6['wgsl']),this;}}class bh{static['merge'](..._0x14a834){const _0xcb03fe=new Map(_0x14a834[-0x25fe+0x1b7+0x2447]??[]);for(let _0x5d9db2=-0x19a8+-0x23b2+0x1*0x3d5b;_0x5d9db2<_0x14a834['length'];_0x5d9db2++){const _0x86a005=_0x14a834[_0x5d9db2];if(_0x86a005){for(const [_0x45457b,_0x5c8877]of _0x86a005)_0xcb03fe['set'](_0x45457b,_0x5c8877);}}return _0xcb03fe;}}class uE extends ya{constructor(_0x3e721b,_0x4e23f2){super(),this['key']=_0x3e721b,this['shaderDefi'+'nition']=_0x4e23f2;}['generateKe'+'y'](_0x3d1911){return this['key'];}['createShad'+'erDefiniti'+'on'](_0x5971d0,_0x24b953){return this['shaderDefi'+'nition'];}}class $t{static['createShad'+'er'](_0x3a3bcc,_0x136ae7){const _0xea58bf=Hn(_0x3a3bcc);let _0x9427e6=_0xea58bf['getCachedS'+'hader'](_0x136ae7['uniqueName']);if(!_0x9427e6){const _0xd337b6=_0x3a3bcc['isWebGPU']&&(!!_0x136ae7['vertexWGSL']||!!_0x136ae7['vertexChun'+'k'])&&(!!_0x136ae7['fragmentWG'+'SL']||!!_0x136ae7['fragmentCh'+'unk']),_0x51f933=Pe['get'](_0x3a3bcc,_0xd337b6?it:Fe),_0x364230=_0x136ae7['vertexChun'+'k']?_0x51f933['get'](_0x136ae7['vertexChun'+'k']):_0xd337b6?_0x136ae7['vertexWGSL']:_0x136ae7['vertexGLSL'],_0x3e1b52=_0x136ae7['fragmentCh'+'unk']?_0x51f933['get'](_0x136ae7['fragmentCh'+'unk']):_0xd337b6?_0x136ae7['fragmentWG'+'SL']:_0x136ae7['fragmentGL'+'SL'];w['assert'](_0x364230,'ShaderUtil'+'s.createSh'+'ader:\x20vert'+'ex\x20shader\x20'+'code\x20not\x20p'+'rovided',_0x136ae7),w['assert'](_0x3e1b52,'ShaderUtil'+'s.createSh'+'ader:\x20frag'+'ment\x20shade'+'r\x20code\x20not'+'\x20provided',_0x136ae7);const _0x1fa419=bh['merge'](_0x51f933,_0x136ae7['fragmentIn'+'cludes']),_0x16aeb0=bh['merge'](_0x51f933,_0x136ae7['vertexIncl'+'udes']);_0x9427e6=new qy(_0x3a3bcc,Jt['createDefi'+'nition'](_0x3a3bcc,{'name':_0x136ae7['uniqueName'],'shaderLanguage':_0xd337b6?it:Fe,'attributes':_0x136ae7['attributes'],'vertexCode':_0x364230,'fragmentCode':_0x3e1b52,'useTransformFeedback':_0x136ae7['useTransfo'+'rmFeedback'],'vertexIncludes':_0x16aeb0,'vertexDefines':_0x136ae7['vertexDefi'+'nes'],'fragmentIncludes':_0x1fa419,'fragmentDefines':_0x136ae7['fragmentDe'+'fines'],'fragmentOutputTypes':_0x136ae7['fragmentOu'+'tputTypes']})),_0xea58bf['setCachedS'+'hader'](_0x136ae7['uniqueName'],_0x9427e6);}return _0x9427e6;}static['getCoreDef'+'ines'](_0xd3d1c4,_0x1aaac8){const _0x5d9c4d=new Map(_0xd3d1c4['defines']);return _0x1aaac8['cameraShad'+'erParams']['defines']['forEach']((_0x5aae2f,_0x2ec013)=>_0x5d9c4d['set'](_0x2ec013,_0x5aae2f)),Si['get'](_0x1aaac8['device'])['getByIndex'](_0x1aaac8['pass'])['defines']['forEach']((_0x46a0ff,_0x40192c)=>_0x5d9c4d['set'](_0x40192c,_0x46a0ff)),_0x5d9c4d;}static['processSha'+'der'](_0x16d1e7,_0x5a0522){w['assert'](_0x16d1e7);const _0x3f8411=_0x16d1e7['definition'],_0x265658=(_0x3f8411['name']??'shader')+'-id-'+_0x16d1e7['id'],_0x250b84=new uE(_0x265658,_0x3f8411),_0x22b974='shader',_0x222ad9=Hn(_0x16d1e7['device']);w['assert'](!_0x222ad9['isRegister'+'ed'](_0x22b974)),_0x222ad9['register'](_0x22b974,_0x250b84);const _0x578a6b=_0x222ad9['getProgram'](_0x22b974,{},_0x5a0522);return _0x222ad9['unregister'](_0x22b974),_0x578a6b;}static['addScreenD'+'epthChunkD'+'efines'](_0x229fa3,_0x1e12b8,_0x159430){_0x1e12b8['sceneDepth'+'MapLinear']&&_0x159430['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',''),_0x229fa3['textureFlo'+'atRenderab'+'le']&&_0x159430['set']('SCENE_DEPT'+'HMAP_FLOAT','');}}const pE={'type':Er,'base':0x0,'baseVertex':0x0,'count':0x4,'indexed':!(-0x85e+0x46*-0x83+0x2c31)},so=new re(),io=new re(),Gd=new ky();class Ah{constructor(_0x3dae45){h(this,'uniformBuf'+'fer'),h(this,'bindGroup');const _0x18df51=_0x3dae45['device'];if(this['shader']=_0x3dae45,w['assert'](_0x3dae45),_0x18df51['supportsUn'+'iformBuffe'+'rs']){const _0xcef311=new Ad();this['shader']=$t['processSha'+'der'](_0x3dae45,_0xcef311);const _0x166b9c=this['shader']['meshUnifor'+'mBufferFor'+'mat'];_0x166b9c&&(this['uniformBuf'+'fer']=new zp(_0x18df51,_0x166b9c,!(-0x5*-0x799+0x10*0x23b+-0x49ac*0x1)));const _0x3eb950=this['shader']['meshBindGr'+'oupFormat'];w['assert'](_0x3eb950),this['bindGroup']=new Up(_0x18df51,_0x3eb950),Ea['setName'](this['bindGroup'],'QuadRender'+'-MeshBindG'+'roup_'+this['bindGroup']['id']);}}['destroy'](){var _0x276044,_0x202905;(_0x276044=this['uniformBuf'+'fer'])==null||_0x276044['destroy'](),this['uniformBuf'+'fer']=null,(_0x202905=this['bindGroup'])==null||_0x202905['destroy'](),this['bindGroup']=null;}['render'](_0x44f400,_0x4d73b6){const _0x368262=this['shader']['device'];Q['pushGpuMar'+'ker'](_0x368262,'QuadRender'),_0x44f400&&(so['set'](_0x368262['vx'],_0x368262['vy'],_0x368262['vw'],_0x368262['vh']),io['set'](_0x368262['sx'],_0x368262['sy'],_0x368262['sw'],_0x368262['sh']),_0x4d73b6=_0x4d73b6??_0x44f400,_0x368262['setViewpor'+'t'](_0x44f400['x'],_0x44f400['y'],_0x44f400['z'],_0x44f400['w']),_0x368262['setScissor'](_0x4d73b6['x'],_0x4d73b6['y'],_0x4d73b6['z'],_0x4d73b6['w'])),_0x368262['setVertexB'+'uffer'](_0x368262['quadVertex'+'Buffer'],-0xa45+0xd69+-0x43*0xc);const _0xa45ffa=this['shader'];if(_0x368262['setShader'](_0xa45ffa),_0x368262['supportsUn'+'iformBuffe'+'rs']){_0x368262['setBindGro'+'up'](rl,_0x368262['emptyBindG'+'roup']);const _0xd1a89c=this['bindGroup'];_0xd1a89c['update'](),_0x368262['setBindGro'+'up'](Oy,_0xd1a89c);const _0x5d190b=this['uniformBuf'+'fer'];_0x5d190b?(_0x5d190b['update'](Gd),_0x368262['setBindGro'+'up'](su,Gd['bindGroup'],Gd['offsets'])):_0x368262['setBindGro'+'up'](su,_0x368262['emptyBindG'+'roup']);}_0x368262['draw'](pE),_0x44f400&&(_0x368262['setViewpor'+'t'](so['x'],so['y'],so['z'],so['w']),_0x368262['setScissor'](io['x'],io['y'],io['z'],io['w'])),Q['popGpuMark'+'er'](_0x368262);}}class mE extends ys{constructor(_0x24e35a,_0x48bb0a,_0x23ba63,_0x28d56e){super(_0x24e35a),this['quad']=_0x48bb0a,this['rect']=_0x23ba63,this['scissorRec'+'t']=_0x28d56e;}['execute'](){const {device:_0x5a567f}=this;Q['pushGpuMar'+'ker'](_0x5a567f,this['name']+':'+this['quad']['shader']['name']),_0x5a567f['setCullMod'+'e'](bt),_0x5a567f['setDepthSt'+'ate'](Yt['NODEPTH']),_0x5a567f['setStencil'+'State'](null,null),this['quad']['render'](this['rect'],this['scissorRec'+'t']),Q['popGpuMark'+'er'](_0x5a567f);}}const _E=new re();function Ar(_0x11a99e,_0x511bae,_0x2d5735,_0x3f349c,_0x26b870){w['assert'](_0x511bae!==void(0x1bd*0x7+-0x22b8+0x168d));const _0x2773d1=arguments[-0x1c1*-0xb+-0x2113+-0xdcd*-0x1];w['call'](()=>{_0x2773d1!==void(0x1eee+-0x1*-0xc23+0x15*-0x20d)&&w['warnOnce']('pc.drawQua'+'dWithShade'+'r\x20no\x20longe'+'r\x20accepts\x20'+'useBlend\x20p'+'arameter,\x20'+'and\x20blendi'+'ng\x20state\x20n'+'eeds\x20to\x20be'+'\x20set\x20up\x20us'+'ing\x20Graphi'+'csDevice.s'+'etBlendSta'+'te.');});const _0x3be20c=new Ah(_0x2d5735);_0x3f349c||(_0x3f349c=_E,_0x3f349c['x']=0x16bf+0x24e6+0x3ba5*-0x1,_0x3f349c['y']=-0x70*0xb+-0xcd3*0x1+0x12d*0xf,_0x3f349c['z']=_0x511bae?_0x511bae['width']:_0x11a99e['width'],_0x3f349c['w']=_0x511bae?_0x511bae['height']:_0x11a99e['height']);const _0x2f6236=new mE(_0x11a99e,_0x3be20c,_0x3f349c,_0x26b870);_0x2f6236['init'](_0x511bae),_0x2f6236['colorOps']['clear']=!(-0x1*-0x1b2d+-0x1918+-0x214),_0x2f6236['depthStenc'+'ilOps']['clearDepth']=!(-0x1d*-0x131+0xd*0x29b+-0xdaf*0x5),_0x11a99e['isWebGPU']&&_0x511bae===null&&_0x11a99e['samples']>0x327*-0x1+0x14e6+-0x11be&&(_0x2f6236['colorOps']['store']=!(0x1dd9*-0x1+-0x13df+0x31b8)),_0x2f6236['render'](),_0x3be20c['destroy']();}class g_{constructor(_0x4bd4cc,_0xa9fd28,_0x166279){h(this,'_aabb',new De()),h(this,'origMeshIn'+'stances'),h(this,'meshInstan'+'ce',null),h(this,'dynamic'),h(this,'batchGroup'+'Id'),(this['origMeshIn'+'stances']=_0x4bd4cc,this['dynamic']=_0xa9fd28,this['batchGroup'+'Id']=_0x166279);}['destroy'](_0xce7c72,_0xc90013){this['meshInstan'+'ce']&&(this['removeFrom'+'Layers'](_0xce7c72,_0xc90013),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}['addToLayer'+'s'](_0x20a6fe,_0x204664){for(let _0x3e70cc=-0x15b0+0x19f6*-0x1+0x2fa6;_0x3e70cc<_0x204664['length'];_0x3e70cc++){const _0x54e953=_0x20a6fe['layers']['getLayerBy'+'Id'](_0x204664[_0x3e70cc]);_0x54e953&&_0x54e953['addMeshIns'+'tances']([this['meshInstan'+'ce']]);}}['removeFrom'+'Layers'](_0x195bd1,_0x2ae115){for(let _0x1c9860=0x1e09+0xac*0x5+-0x2165;_0x1c9860<_0x2ae115['length'];_0x1c9860++){const _0x30d8b3=_0x195bd1['layers']['getLayerBy'+'Id'](_0x2ae115[_0x1c9860]);_0x30d8b3&&_0x30d8b3['removeMesh'+'Instances']([this['meshInstan'+'ce']]);}}['updateBoun'+'dingBox'](){this['_aabb']['copy'](this['origMeshIn'+'stances'][-0x1*-0x1b97+0x48d+0xf2*-0x22]['aabb']);for(let _0x4b98a0=-0xb2*0x25+0x8ed+-0x12*-0xef;_0x4b98a0<this['origMeshIn'+'stances']['length'];_0x4b98a0++)this['_aabb']['add'](this['origMeshIn'+'stances'][_0x4b98a0]['aabb']);this['meshInstan'+'ce']['aabb']=this['_aabb'],this['meshInstan'+'ce']['_aabbVer']=-0x8f1+-0x50b*0x5+0x1*0x2228;}get['model'](){w['removed']('pc.Batch#m'+'odel\x20was\x20r'+'emoved.\x20Us'+'e\x20pc.Batch'+'#meshInsta'+'nce\x20to\x20acc'+'ess\x20batche'+'d\x20mesh\x20ins'+'tead.');}}class St{constructor(_0x5ae9d5,_0x2504a1,_0x1bf399,_0x31cca5,_0x5b21ae=[er]){h(this,'_ui',!(0x29*0x7b+-0x158*-0x5+-0x2a*0xa1)),h(this,'_sprite',!(-0x14ad+0x1*-0x18f+0x163d*0x1)),h(this,'_obj',{'model':[],'element':[],'sprite':[],'render':[]}),h(this,'id'),h(this,'name'),h(this,'dynamic'),h(this,'maxAabbSiz'+'e'),h(this,'layers'),(this['id']=_0x5ae9d5,this['name']=_0x2504a1,this['dynamic']=_0x1bf399,this['maxAabbSiz'+'e']=_0x31cca5,this['layers']=_0x5b21ae);}}h(St,'MODEL','model'),h(St,'ELEMENT','element'),h(St,'SPRITE','sprite'),h(St,'RENDER','render');const S_=new te();class Ol{constructor(_0x364b31){h(this,'bones'),(this['_dirty']=!(0x1da5+-0x13ac+-0x9f9),this['_rootBone']=null,this['_skinUpdat'+'eIndex']=-(-0x6e0*-0x4+0x3b5+-0xf9a*0x2),this['_updateBef'+'oreCull']=!(0x19*0x17+0x1765*0x1+-0x19a4),_0x364b31&&this['initSkin'](_0x364b31));}set['rootBone'](_0x3072d7){this['_rootBone']=_0x3072d7;}get['rootBone'](){return this['_rootBone'];}['init'](_0x99feb1,_0x3721fb){const _0x524d37=_0x3721fb*(-0x1*0xf5e+-0x1*0x1d35+0x2c96);let _0x5851fb=Math['ceil'](Math['sqrt'](_0x524d37));_0x5851fb=Y['roundUp'](_0x5851fb,0x2360+0xc89+-0x2*0x17f3);const _0xfac419=Math['ceil'](_0x524d37/_0x5851fb);this['boneTextur'+'e']=new _e(_0x99feb1,{'width':_0x5851fb,'height':_0xfac419,'format':Xt,'mipmaps':!(-0x1f44+-0x1217+0x315c),'minFilter':Te,'magFilter':Te,'name':'skin'}),this['matrixPale'+'tte']=this['boneTextur'+'e']['lock']({'mode':yy}),this['boneTextur'+'e']['unlock']();}['destroy'](){this['boneTextur'+'e']&&(this['boneTextur'+'e']['destroy'](),this['boneTextur'+'e']=null);}['resolve'](_0x592dcc,_0x213c13){this['rootBone']=_0x592dcc;const _0x8020f9=this['skin'],_0x970f55=[];for(let _0x25d56f=0x1dcb+0x1*0x19b9+-0x344*0x11;_0x25d56f<_0x8020f9['boneNames']['length'];_0x25d56f++){const _0x1a310a=_0x8020f9['boneNames'][_0x25d56f];let _0x151663=_0x592dcc['findByName'](_0x1a310a);_0x151663||(w['error']('Failed\x20to\x20'+'find\x20bone\x20'+'['+_0x1a310a+(']\x20in\x20the\x20e'+'ntity\x20hier'+'archy,\x20Ren'+'derCompone'+'nt\x20on\x20')+_0x213c13['name']+(',\x20rootBone'+':\x20')+_0x592dcc['name']),_0x151663=_0x213c13),_0x970f55['push'](_0x151663);}this['bones']=_0x970f55;}['initSkin'](_0x58eaae){this['skin']=_0x58eaae,this['bones']=[];const _0x281890=_0x58eaae['inverseBin'+'dPose']['length'];this['init'](_0x58eaae['device'],_0x281890),this['matrices']=[];for(let _0x3380d9=-0xbb7*-0x3+0x1*-0x7db+0x1f3*-0xe;_0x3380d9<_0x281890;_0x3380d9++)this['matrices'][_0x3380d9]=new te();}['uploadBone'+'s'](_0x3a7ffe){this['boneTextur'+'e']['upload']();}['_updateMat'+'rices'](_0x2d89f9,_0x5c1e9e){if(this['_skinUpdat'+'eIndex']!==_0x5c1e9e){this['_skinUpdat'+'eIndex']=_0x5c1e9e,S_['copy'](_0x2d89f9['getWorldTr'+'ansform']())['invert']();for(let _0xee9379=this['bones']['length']-(0x19a6+0x1f10+-0x38b5);_0xee9379>=0x3*0x595+0x1*0x1727+0x13f3*-0x2;_0xee9379--)this['matrices'][_0xee9379]['mulAffine2'](S_,this['bones'][_0xee9379]['getWorldTr'+'ansform']()),this['matrices'][_0xee9379]['mulAffine2'](this['matrices'][_0xee9379],this['skin']['inverseBin'+'dPose'][_0xee9379]);}}['updateMatr'+'ices'](_0x5621d9,_0x325fe2){this['_updateBef'+'oreCull']&&this['_updateMat'+'rices'](_0x5621d9,_0x325fe2);}['updateMatr'+'ixPalette'](_0x21d85c,_0x561d93){this['_updateMat'+'rices'](_0x21d85c,_0x561d93);const _0x5ed944=this['matrixPale'+'tte'],_0x1263a3=this['bones']['length'];for(let _0x41d400=-0x152+-0x2*0x573+0xc38;_0x41d400<_0x1263a3;_0x41d400++){const _0x33148e=this['matrices'][_0x41d400]['data'],_0x434250=_0x41d400*(-0x2bb*-0x5+0x1220+-0x1fbb);_0x5ed944[_0x434250]=_0x33148e[0x49*-0x15+0x89*-0x2b+-0x20*-0xe8],_0x5ed944[_0x434250+(-0xa*0xe+-0x1*0x572+0x5ff)]=_0x33148e[0x1b6*0x11+-0x6a7+0x1*-0x166b],_0x5ed944[_0x434250+(0x1*-0x716+0x1*-0x209c+0x27b4)]=_0x33148e[0x96d+-0x1172+0x80d],_0x5ed944[_0x434250+(-0x1ca6+0x834+-0x1*-0x1475)]=_0x33148e[-0x3e*-0x6+0x602+-0x76a],_0x5ed944[_0x434250+(-0x1638+0x1*0x851+0xdeb)]=_0x33148e[0x12f4+-0x9b1+-0x942],_0x5ed944[_0x434250+(-0x30*-0x39+0x1*-0xb6b+0xc0)]=_0x33148e[0xd4b+0x15b+-0xea1],_0x5ed944[_0x434250+(-0xe0d*-0x2+0xb8d*-0x2+-0x4fa)]=_0x33148e[0x40*-0x3a+0x224a+-0x13c1],_0x5ed944[_0x434250+(-0x11*-0x23f+-0x1d67+-0x53*0x1b)]=_0x33148e[-0xcc0+0x33*0xa+0xacf],_0x5ed944[_0x434250+(0x2*-0xa49+-0x1*0x246c+-0x3*-0x1302)]=_0x33148e[0x4c2+0x2cd*-0xa+0xd*0x1ca],_0x5ed944[_0x434250+(0xbc*0x9+-0x139e+-0x459*-0x3)]=_0x33148e[0x45*0x4c+0x1813+-0x2c89],_0x5ed944[_0x434250+(-0x1827*-0x1+0xb4d*-0x1+-0xcd0)]=_0x33148e[0x20a4+-0x731+0x5*-0x515],_0x5ed944[_0x434250+(0x21d*-0x10+0x1d8+-0x37*-0x95)]=_0x33148e[0x1be0+-0x1*-0x15c4+-0x3196];}this['uploadBone'+'s'](this['skin']['device']);}}class y_ extends Ol{constructor(_0x451c6d,_0x2e4ebc,_0x3ae692){super();const _0xd39098=_0x2e4ebc['length'];this['init'](_0x451c6d,_0xd39098),this['device']=_0x451c6d,this['rootNode']=_0x3ae692,this['bones']=_0x2e4ebc;}['updateMatr'+'ices'](_0x1d63ab,_0x321f39){}['updateMatr'+'ixPalette'](_0x3c3cf3,_0x5c91bd){const _0x4ec6e4=this['matrixPale'+'tte'],_0x4a7365=this['bones']['length'];for(let _0x4668e2=0x667+0x1*-0x5b+-0x60c;_0x4668e2<_0x4a7365;_0x4668e2++){const _0x4a1fd9=this['bones'][_0x4668e2]['getWorldTr'+'ansform']()['data'],_0x47145a=_0x4668e2*(-0x1065+-0x1ee6+0x2f57);_0x4ec6e4[_0x47145a]=_0x4a1fd9[-0x219+0x195+-0x6*-0x16],_0x4ec6e4[_0x47145a+(0x7bf*-0x3+0x12c4+0x47a)]=_0x4a1fd9[0x5*0x5a1+0x13ae+-0x2fcf],_0x4ec6e4[_0x47145a+(0xb*0x175+0x81c+-0xd5*0x1d)]=_0x4a1fd9[-0x1*-0x955+0x4f*-0x45+0xbfe],_0x4ec6e4[_0x47145a+(-0x35*0x1d+-0x2612+0x2c16)]=_0x4a1fd9[0x3*-0x9c9+-0x12*-0xac+0x114f],_0x4ec6e4[_0x47145a+(-0x173e+0x1*0xecb+0x877)]=_0x4a1fd9[-0xfe7+-0x624+0x160c],_0x4ec6e4[_0x47145a+(-0xd*0x15+0x612+0x1*-0x4fc)]=_0x4a1fd9[0x3f*0x93+0x11c2+-0x35ea],_0x4ec6e4[_0x47145a+(0x1*0x19a9+0x13eb+-0xe*0x341)]=_0x4a1fd9[-0x6*-0xc1+0x2460+-0x3*0xd9f],_0x4ec6e4[_0x47145a+(0x7*0x58c+-0x214a+-0x583)]=_0x4a1fd9[-0x71*0xb+-0x3*-0x899+0x14e3*-0x1],_0x4ec6e4[_0x47145a+(-0x2267+0x1b35+0xb9*0xa)]=_0x4a1fd9[-0x6fd*0x5+-0x3*0xa6+0x24e5*0x1],_0x4ec6e4[_0x47145a+(0x1d3*-0x5+-0x12c9+0x1bf1)]=_0x4a1fd9[0x195a+0x2e3*0xb+-0x3*0x1307],_0x4ec6e4[_0x47145a+(0x4ff*0x4+-0x54a*0x4+-0x136*-0x1)]=_0x4a1fd9[-0x19ac+-0x1*0x163c+-0x169*-0x22],_0x4ec6e4[_0x47145a+(0x14d+-0x1*-0x2065+-0x21a7)]=_0x4a1fd9[-0x10e2+0x1fa*-0x4+0x212*0xc];}this['uploadBone'+'s'](this['device']);}}let gE=-0x83+0x1*-0x21a6+0x2229;class oi{constructor(){this['initDefaul'+'ts']();}['initDefaul'+'ts'](){this['recreate']=!(-0x7a6*0x5+-0x5ab+0x2bea),this['verticesUs'+'age']=ms,this['indicesUsa'+'ge']=ms,this['maxVertice'+'s']=-0x93a*0x1+-0x1d15+0x264f,this['maxIndices']=0x8b0+-0xdbe*-0x1+-0x63*0x3a,this['vertexCoun'+'t']=-0xd48+0x21b5*0x1+-0x146d,this['indexCount']=-0x31c+-0x101b*-0x1+-0xcff,this['vertexStre'+'amsUpdated']=!(0x17*-0x11f+0x1e83+-0x4b9),this['indexStrea'+'mUpdated']=!(-0x5b1+0x1c1c+-0x166a),this['vertexStre'+'amDictiona'+'ry']={},this['indices']=null;}['_changeVer'+'texCount'](_0x4d4d3f,_0x18d792){this['vertexCoun'+'t']?w['assert'](this['vertexCoun'+'t']===_0x4d4d3f,'Vertex\x20str'+'eam\x20'+_0x18d792+'\x20has\x20'+_0x4d4d3f+('\x20vertices,'+'\x20which\x20doe'+'s\x20not\x20matc'+'h\x20already\x20'+'set\x20stream'+'s\x20with\x20')+this['vertexCoun'+'t']+'\x20vertices.'):this['vertexCoun'+'t']=_0x4d4d3f;}}h(oi,'DEFAULT_CO'+'MPONENTS_P'+'OSITION',0x1e58+0x3*-0xace+0x215),h(oi,'DEFAULT_CO'+'MPONENTS_N'+'ORMAL',-0x12a2+0x1a6e+-0x7c9),h(oi,'DEFAULT_CO'+'MPONENTS_U'+'V',-0x229b+-0x2291+0x302*0x17),h(oi,'DEFAULT_CO'+'MPONENTS_C'+'OLORS',-0xac9*-0x1+0xd2b*-0x1+0x266);class SE{constructor(_0x5d24db,_0x109571,_0x3edf1e,_0x3c109f,_0x545a89){this['data']=_0x5d24db,this['componentC'+'ount']=_0x109571,this['dataType']=_0x3edf1e,this['dataTypeNo'+'rmalize']=_0x3c109f,this['asInt']=_0x545a89;}}class Ge extends wd{constructor(_0x4c3b70,_0x2833fb){super(),h(this,'indexBuffe'+'r',[null]),h(this,'vertexBuff'+'er',null),h(this,'primitive',[{'type':0x0,'base':0x0,'baseVertex':0x0,'count':0x0}]),h(this,'skin',null),h(this,'boneAabb',null),h(this,'_aabbVer',-0x9*0x204+0x1*-0x8a1+0x4d*0x59),h(this,'_aabb',new De()),h(this,'_geometryD'+'ata',null),h(this,'_morph',null),h(this,'_storageIn'+'dex',!(0x1f7*-0x7+0x2191+-0x13cf)),h(this,'_storageVe'+'rtex',!(0x1e8f+0xd9b+-0x2c29)),(this['id']=gE++,w['assert'](_0x4c3b70,'Mesh\x20const'+'ructor\x20tak'+'es\x20a\x20Graph'+'icsDevice\x20'+'as\x20a\x20param'+'eter,\x20and\x20'+'it\x20was\x20not'+'\x20provided.'),this['device']=_0x4c3b70,this['_storageIn'+'dex']=(_0x2833fb==null?void(0xb3+-0x2411+0x235e):_0x2833fb['storageInd'+'ex'])||!(0x4ff*-0x2+-0xf9c+0x199b),this['_storageVe'+'rtex']=(_0x2833fb==null?void(-0x1*-0x1685+-0x11ab*-0x1+-0x2830):_0x2833fb['storageVer'+'tex'])||!(-0x40c*-0x3+0x1e66+-0x2a89));}static['fromGeomet'+'ry'](_0x2ee10d,_0x532105,_0x28ba47={}){const _0x5b252d=new Ge(_0x2ee10d,_0x28ba47),{positions:_0x386c7d,normals:_0x327896,tangents:_0x4155b6,colors:_0x13f6f0,uvs:_0x30827f,uvs1:_0x3bf732,blendIndices:_0x61d3c8,blendWeights:_0x398d46,indices:_0x32f2bb}=_0x532105;return _0x386c7d&&_0x5b252d['setPositio'+'ns'](_0x386c7d),_0x327896&&_0x5b252d['setNormals'](_0x327896),_0x4155b6&&_0x5b252d['setVertexS'+'tream'](yi,_0x4155b6,-0x33*-0x7f+-0x13*0x65+-0x11ca),_0x13f6f0&&_0x5b252d['setColors3'+'2'](_0x13f6f0),_0x30827f&&_0x5b252d['setUvs'](0x1b96+-0xbf8+-0xf9e,_0x30827f),_0x3bf732&&_0x5b252d['setUvs'](0x355*-0x1+-0x1ce6+0x203c,_0x3bf732),_0x61d3c8&&_0x5b252d['setVertexS'+'tream'](us,_0x61d3c8,0xdc9*-0x1+-0x239a+0x1*0x3167,_0x61d3c8['length']/(0xf96+0xb1c+-0x2*0xd57),la),_0x398d46&&_0x5b252d['setVertexS'+'tream'](gi,_0x398d46,-0x173b+-0x28a*-0x1+-0x1*-0x14b5),_0x32f2bb&&_0x5b252d['setIndices'](_0x32f2bb),_0x5b252d['update'](),_0x5b252d;}set['morph'](_0x2f2615){_0x2f2615!==this['_morph']&&(this['_morph']&&this['_morph']['decRefCoun'+'t'](),this['_morph']=_0x2f2615,_0x2f2615&&_0x2f2615['incRefCoun'+'t']());}get['morph'](){return this['_morph'];}set['aabb'](_0x3af6c6){this['_aabb']=_0x3af6c6,this['_aabbVer']++;}get['aabb'](){return this['_aabb'];}['destroy'](){const _0x4a4376=this['morph'];_0x4a4376&&(this['morph']=null,_0x4a4376['refCount']<-0x1*0x21fd+0x7*-0x449+0x3ffd&&_0x4a4376['destroy']()),this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);for(let _0x4539ab=0x52*0x5a+-0x1bc7+0x10d*-0x1;_0x4539ab<this['indexBuffe'+'r']['length'];_0x4539ab++)this['_destroyIn'+'dexBuffer'](_0x4539ab);this['indexBuffe'+'r']['length']=-0x10*0xe3+-0x2*0x1384+-0x1a9c*-0x2,this['_geometryD'+'ata']=null;}['_destroyIn'+'dexBuffer'](_0x22d243){this['indexBuffe'+'r'][_0x22d243]&&(this['indexBuffe'+'r'][_0x22d243]['destroy'](),this['indexBuffe'+'r'][_0x22d243]=null);}['_initBoneA'+'abbs'](_0x1bcc52){this['boneAabb']=[],this['boneUsed']=[];let _0x2e398c,_0x5c9150,_0x29c1f0,_0x4c6011,_0x1e9d53;const _0x53ec69=[],_0x44702c=[],_0x1e6d48=this['boneUsed'],_0x635a60=this['skin']['boneNames']['length'];let _0x4c7e73,_0x413de6,_0x226250;for(let _0x3eef57=-0x25b+-0x8c8+0xb23*0x1;_0x3eef57<_0x635a60;_0x3eef57++)_0x53ec69[_0x3eef57]=new D(Number['MAX_VALUE'],Number['MAX_VALUE'],Number['MAX_VALUE']),_0x44702c[_0x3eef57]=new D(-Number['MAX_VALUE'],-Number['MAX_VALUE'],-Number['MAX_VALUE']);const _0x2fd04d=new Uo(this['vertexBuff'+'er']),_0x143ee9=_0x2fd04d['element'][Me],_0x4d8d26=_0x2fd04d['element'][gi],_0x4f83e6=_0x2fd04d['element'][us],_0x29df5d=this['vertexBuff'+'er']['numVertice'+'s'];for(let _0x3242c9=-0x2138+-0x18f+0x22c7;_0x3242c9<_0x29df5d;_0x3242c9++){for(let _0x2ed5e2=-0x7d*-0x49+0x2666+-0x4a0b;_0x2ed5e2<0x3e*-0x4+0x28*-0xdf+-0x1*-0x23d4;_0x2ed5e2++)if(_0x4d8d26['array'][_0x4d8d26['index']+_0x2ed5e2]>-0x3ce*0x5+0x1a9f+-0x185*0x5){const _0x502cc3=_0x4f83e6['array'][_0x4f83e6['index']+_0x2ed5e2];if(_0x1e6d48[_0x502cc3]=!(0x254*0xb+-0xdd9*0x1+0xbc3*-0x1),_0x2e398c=_0x143ee9['array'][_0x143ee9['index']],_0x5c9150=_0x143ee9['array'][_0x143ee9['index']+(0x65b*0x1+-0x75a+-0x20*-0x8)],_0x29c1f0=_0x143ee9['array'][_0x143ee9['index']+(0x1e37+0x48e+0x329*-0xb)],_0x4c6011=_0x44702c[_0x502cc3],_0x1e9d53=_0x53ec69[_0x502cc3],_0x1e9d53['x']>_0x2e398c&&(_0x1e9d53['x']=_0x2e398c),_0x1e9d53['y']>_0x5c9150&&(_0x1e9d53['y']=_0x5c9150),_0x1e9d53['z']>_0x29c1f0&&(_0x1e9d53['z']=_0x29c1f0),_0x4c6011['x']<_0x2e398c&&(_0x4c6011['x']=_0x2e398c),_0x4c6011['y']<_0x5c9150&&(_0x4c6011['y']=_0x5c9150),_0x4c6011['z']<_0x29c1f0&&(_0x4c6011['z']=_0x29c1f0),_0x1bcc52){let _0x14c5a4=_0x4c7e73=_0x2e398c,_0x51f3ce=_0x413de6=_0x5c9150,_0x1227e2=_0x226250=_0x29c1f0;for(let _0x224c30=0x203*-0xf+0x8*-0x1f3+0x2dc5;_0x224c30<_0x1bcc52['length'];_0x224c30++){const _0x548315=_0x1bcc52[_0x224c30],_0x3731fa=_0x548315['deltaPosit'+'ions'][_0x3242c9*(-0xae4+-0x158e+-0x4a3*-0x7)],_0xeac279=_0x548315['deltaPosit'+'ions'][_0x3242c9*(-0x210d*0x1+0x19a9+0x5*0x17b)+(-0x85d+0xd06*-0x1+0x1564)],_0x4a7c7f=_0x548315['deltaPosit'+'ions'][_0x3242c9*(0x47*0x57+-0x13c3+-0xdf*0x5)+(0x3a*-0x18+-0xd73*0x2+-0x114*-0x1e)];_0x3731fa<-0xffe+0x1*0x17d6+0xfb*-0x8?_0x14c5a4+=_0x3731fa:_0x4c7e73+=_0x3731fa,_0xeac279<-0x2*-0x8b5+-0x41f+0x1*-0xd4b?_0x51f3ce+=_0xeac279:_0x413de6+=_0xeac279,_0x4a7c7f<-0x1267+-0x2704+0x1*0x396b?_0x1227e2+=_0x4a7c7f:_0x226250+=_0x4a7c7f;}_0x1e9d53['x']>_0x14c5a4&&(_0x1e9d53['x']=_0x14c5a4),_0x1e9d53['y']>_0x51f3ce&&(_0x1e9d53['y']=_0x51f3ce),_0x1e9d53['z']>_0x1227e2&&(_0x1e9d53['z']=_0x1227e2),_0x4c6011['x']<_0x4c7e73&&(_0x4c6011['x']=_0x4c7e73),_0x4c6011['y']<_0x413de6&&(_0x4c6011['y']=_0x413de6),_0x4c6011['z']<_0x226250&&(_0x4c6011['z']=_0x226250);}}_0x2fd04d['next']();}const _0x3588c4=this['vertexBuff'+'er']['getFormat']()['elements']['find'](_0x193ea1=>_0x193ea1['name']===Me);if(_0x3588c4&&_0x3588c4['normalize']){const _0x1b4f1d=((()=>{switch(_0x3588c4['dataType']){case dd:return _0x165c0c=>Math['max'](_0x165c0c/(-0xd*-0xbd+0x10f*-0x1e+0xa*0x244),-(0xf13+-0xa5b*0x2+0x5a4));case la:return _0x3186e3=>_0x3186e3/(-0xde5*0x1+0xa*-0x3b3+0x33e2);case fd:return _0x5e6154=>Math['max'](_0x5e6154/(-0xa861+0x5b7c+-0xba*-0x11a),-(0x14ef+-0xe*0x259+0xbf0));case Ml:return _0x3a2074=>_0x3a2074/(-0x29a2+0x1*0x1d6a2+-0xad01);default:return _0x58ffc4=>_0x58ffc4;}})());for(let _0x55761d=-0x93*-0x1d+0x11b0+-0x2257*0x1;_0x55761d<_0x635a60;_0x55761d++)if(_0x1e6d48[_0x55761d]){const _0x4fa1c1=_0x53ec69[_0x55761d],_0x37600f=_0x44702c[_0x55761d];_0x4fa1c1['set'](_0x1b4f1d(_0x4fa1c1['x']),_0x1b4f1d(_0x4fa1c1['y']),_0x1b4f1d(_0x4fa1c1['z'])),_0x37600f['set'](_0x1b4f1d(_0x37600f['x']),_0x1b4f1d(_0x37600f['y']),_0x1b4f1d(_0x37600f['z']));}}for(let _0x5d60c3=-0x5*-0x673+-0x1*-0xa4c+-0x2a8b;_0x5d60c3<_0x635a60;_0x5d60c3++){const _0x5271d0=new De();_0x5271d0['setMinMax'](_0x53ec69[_0x5d60c3],_0x44702c[_0x5d60c3]),this['boneAabb']['push'](_0x5271d0);}}['_initGeome'+'tryData'](){this['_geometryD'+'ata']||(this['_geometryD'+'ata']=new oi(),this['vertexBuff'+'er']&&(this['_geometryD'+'ata']['vertexCoun'+'t']=this['vertexBuff'+'er']['numVertice'+'s'],this['_geometryD'+'ata']['maxVertice'+'s']=this['vertexBuff'+'er']['numVertice'+'s']),this['indexBuffe'+'r']['length']>0x29*0x2+0x5*-0x79f+0x25c9&&this['indexBuffe'+'r'][0x19f*-0xc+-0xf92+0x2306]&&(this['_geometryD'+'ata']['indexCount']=this['indexBuffe'+'r'][-0x710+0x3*-0x125+-0xa7f*-0x1]['numIndices'],this['_geometryD'+'ata']['maxIndices']=this['indexBuffe'+'r'][0x2*0x98e+-0x5*0x494+0x3c8]['numIndices']));}['clear'](_0x3a4726,_0x3c40fc,_0x46407d=0x1*0x4af+0x203*-0xb+-0x4d*-0x3a,_0x15b702=-0xd*0x9f+0x58b*-0x7+0xc8*0x3c){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['initDefaul'+'ts'](),this['_geometryD'+'ata']['recreate']=!(0x1da9+-0xe59*-0x1+-0x1*0x2c02),this['_geometryD'+'ata']['maxVertice'+'s']=_0x46407d,this['_geometryD'+'ata']['maxIndices']=_0x15b702,this['_geometryD'+'ata']['verticesUs'+'age']=_0x3a4726?ms:lh,this['_geometryD'+'ata']['indicesUsa'+'ge']=_0x3c40fc?ms:lh;}['setVertexS'+'tream'](_0x16d585,_0x55fb1b,_0x537f9b,_0x312e58,_0x3d1edb=Ve,_0x4d3cd4=!(-0x1d4*-0xd+-0x1fa0+0xb7*0xb),_0x2c1479=!(0x2285+0x1567+-0x5*0xb2f)){this['_initGeome'+'tryData']();const _0xe66073=_0x312e58||_0x55fb1b['length']/_0x537f9b;this['_geometryD'+'ata']['_changeVer'+'texCount'](_0xe66073,_0x16d585),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(-0x2*0x907+0x207*-0x4+0x1a2a),this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x16d585]=new SE(_0x55fb1b,_0x537f9b,_0x3d1edb,_0x4d3cd4,_0x2c1479);}['getVertexS'+'tream'](_0x3e7ad9,_0x24c346){let _0x5678ca=-0x50*-0x7c+-0x1*-0xf3f+0x1*-0x35ff,_0x2cb280=!(-0x40f*-0x2+0x1225+-0x1*0x1a42);if(this['_geometryD'+'ata']){const _0x10af38=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x3e7ad9];_0x10af38&&(_0x2cb280=!(0x14a3+0x10b8+-0x1*0x255b),_0x5678ca=this['_geometryD'+'ata']['vertexCoun'+'t'],ArrayBuffer['isView'](_0x24c346)?_0x24c346['set'](_0x10af38['data']):(_0x24c346['length']=-0xb7e+0x62a*0x2+-0xd6,_0x24c346['push'](_0x10af38['data'])));}return _0x2cb280||this['vertexBuff'+'er']&&(_0x5678ca=new Uo(this['vertexBuff'+'er'])['readData'](_0x3e7ad9,_0x24c346)),_0x5678ca;}['setPositio'+'ns'](_0x49b751,_0x45aec2=oi['DEFAULT_CO'+'MPONENTS_P'+'OSITION'],_0x38062a){this['setVertexS'+'tream'](Me,_0x49b751,_0x45aec2,_0x38062a,Ve,!(0x972+0x140a+-0x1d7b));}['setNormals'](_0x488466,_0x2790c2=oi['DEFAULT_CO'+'MPONENTS_N'+'ORMAL'],_0x125fb2){this['setVertexS'+'tream'](gs,_0x488466,_0x2790c2,_0x125fb2,Ve,!(-0xa7*-0xd+0x1c4e+0x932*-0x4));}['setUvs'](_0x533bfb,_0x3320b5,_0xb4d803=oi['DEFAULT_CO'+'MPONENTS_U'+'V'],_0x1bafa0){this['setVertexS'+'tream'](zm+_0x533bfb,_0x3320b5,_0xb4d803,_0x1bafa0,Ve,!(-0x2474+-0x998+0x2e0d*0x1));}['setColors'](_0x24eb79,_0x50b2e4=oi['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x3abba1){this['setVertexS'+'tream'](Wt,_0x24eb79,_0x50b2e4,_0x3abba1,Ve,!(-0x2272+0x259a+-0x10d*0x3));}['setColors3'+'2'](_0x323b6b,_0x5b28d5){this['setVertexS'+'tream'](Wt,_0x323b6b,oi['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x5b28d5,la,!(0xb45+0x1d2b+0x10*-0x287));}['setIndices'](_0x51ba33,_0x43d23f){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(-0x2ee*-0x5+-0x6*0x5e5+0x14b8),this['_geometryD'+'ata']['indices']=_0x51ba33,this['_geometryD'+'ata']['indexCount']=_0x43d23f||_0x51ba33['length'];}['getPositio'+'ns'](_0x5f17ed){return this['getVertexS'+'tream'](Me,_0x5f17ed);}['getNormals'](_0x14c417){return this['getVertexS'+'tream'](gs,_0x14c417);}['getUvs'](_0x3bfe23,_0x6ab44f){return this['getVertexS'+'tream'](zm+_0x3bfe23,_0x6ab44f);}['getColors'](_0x1194dc){return this['getVertexS'+'tream'](Wt,_0x1194dc);}['getIndices'](_0xd95d86){let _0x571c61=-0xbf0+-0x38d+0x5*0x319;if(this['_geometryD'+'ata']&&this['_geometryD'+'ata']['indices']){const _0x5113c6=this['_geometryD'+'ata']['indices'];if(_0x571c61=this['_geometryD'+'ata']['indexCount'],ArrayBuffer['isView'](_0xd95d86))_0xd95d86['set'](_0x5113c6);else{_0xd95d86['length']=-0xc70+0x65d*-0x5+0x2c41;for(let _0x426bea=0x1*-0x1fff+0xa34*-0x1+0x2a33,_0x5c38fc=_0x5113c6['length'];_0x426bea<_0x5c38fc;_0x426bea++)_0xd95d86['push'](_0x5113c6[_0x426bea]);}}else this['indexBuffe'+'r']['length']>0x71*-0x4+-0x1*-0x142b+-0x1267&&this['indexBuffe'+'r'][0x1f91+0x2512+0x3*-0x16e1]&&(_0x571c61=this['indexBuffe'+'r'][0xfe1+-0xa5*0x25+-0x66*-0x14]['readData'](_0xd95d86));return _0x571c61;}['update'](_0x1358a4=js,_0x4205a9=!(-0x8f2+0xb62+-0x270)){if(this['_geometryD'+'ata']){if(_0x4205a9){const _0x5ddbf7=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][Me];_0x5ddbf7&&_0x5ddbf7['componentC'+'ount']===0x1a*-0xe5+-0x7da*0x1+-0x1f*-0x101&&(this['_aabb']['compute'](_0x5ddbf7['data'],this['_geometryD'+'ata']['vertexCoun'+'t']),this['_aabbVer']++);}let _0x1d4c42=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['vertexCoun'+'t']>this['_geometryD'+'ata']['maxVertice'+'s']&&(_0x1d4c42=!(-0x130d*0x2+0x847*0x1+-0x5f7*-0x5),this['_geometryD'+'ata']['maxVertice'+'s']=this['_geometryD'+'ata']['vertexCoun'+'t']),_0x1d4c42&&this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);let _0x4108b5=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['indexCount']>this['_geometryD'+'ata']['maxIndices']&&(_0x4108b5=!(-0x416*-0x1+0x884+-0xc9a),this['_geometryD'+'ata']['maxIndices']=this['_geometryD'+'ata']['indexCount']),_0x4108b5&&this['indexBuffe'+'r']['length']>-0x3*-0x6b9+0xdaa*0x2+0x3f*-0xc1&&this['indexBuffe'+'r'][-0xf4*-0x8+0x14ab+-0x1*0x1c4b]&&(this['indexBuffe'+'r'][0x125*-0x1e+0x9c1*-0x3+0x3f99]['destroy'](),this['indexBuffe'+'r'][-0xa3d+0xba5*-0x1+-0x1*-0x15e2]=null),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&this['_updateVer'+'texBuffer'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&this['_updateInd'+'exBuffer'](),this['primitive'][0x182f+0x16fe+-0xd*0x3a1]['type']=_0x1358a4,this['indexBuffe'+'r']['length']>-0xd7c+0x2*0xb08+-0x12*0x7a&&this['indexBuffe'+'r'][0x18ec+-0x108b*0x1+-0x861]?this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&(this['primitive'][0x9*-0x2b4+0x2*0x16+-0x305*-0x8]['count']=this['_geometryD'+'ata']['indexCount'],this['primitive'][0x8c6+0x2129+-0x29ef]['indexed']=!(-0x16f*-0x17+-0x2b*0xe6+0x17*0x3f)):this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&(this['primitive'][0x1acd+0x1*-0xb61+0x234*-0x7]['count']=this['_geometryD'+'ata']['vertexCoun'+'t'],this['primitive'][0x11*-0x1fd+0x1be0+0x5ed]['indexed']=!(0xcc7*-0x3+0x2444+0x6a*0x5)),this['_geometryD'+'ata']['vertexCoun'+'t']=-0xad5+0x1*-0x2261+0x169b*0x2,this['_geometryD'+'ata']['indexCount']=0x4*-0xad+-0xf61+0x1215*0x1,this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(-0x1388+0x2b*-0xa9+-0x17f6*-0x2),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(0x667+0x222+-0x888),this['_geometryD'+'ata']['recreate']=!(0x172*-0x11+-0x6c2+0x1f55),this['updateRend'+'erStates']();}}['_buildVert'+'exFormat'](_0x526953){const _0x43ba6b=[];for(const _0x491bb7 in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x46c192=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x491bb7];_0x43ba6b['push']({'semantic':_0x491bb7,'components':_0x46c192['componentC'+'ount'],'type':_0x46c192['dataType'],'normalize':_0x46c192['dataTypeNo'+'rmalize'],'asInt':_0x46c192['asInt']});}return new kt(this['device'],_0x43ba6b,_0x526953);}['_updateVer'+'texBuffer'](){if(!this['vertexBuff'+'er']){const _0x20b09a=this['_geometryD'+'ata']['maxVertice'+'s'],_0xd98b3b=this['_buildVert'+'exFormat'](_0x20b09a);this['vertexBuff'+'er']=new Is(this['device'],_0xd98b3b,_0x20b09a,{'usage':this['_geometryD'+'ata']['verticesUs'+'age'],'storage':this['_storageVe'+'rtex']});}const _0x3b981d=new Uo(this['vertexBuff'+'er']),_0x18e39f=this['_geometryD'+'ata']['vertexCoun'+'t'];for(const _0xa2fa9d in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x2dc2df=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0xa2fa9d];_0x3b981d['writeData'](_0xa2fa9d,_0x2dc2df['data'],_0x18e39f),delete this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0xa2fa9d];}_0x3b981d['end']();}['_updateInd'+'exBuffer'](){if(this['indexBuffe'+'r']['length']<=0xcef+0x1*-0x20a4+0x5*0x3f1||!this['indexBuffe'+'r'][0x265a+-0xd1e*-0x2+0x49d*-0xe]){const _0x4d9a59=this['_geometryD'+'ata']['maxVertice'+'s'],_0x41442d=_0x4d9a59>-0x7*-0x2981+0xfe55+0x49*-0x3f5||_0x4d9a59===-0x51*0x25+-0x4d3*0x3+0x1a2e?wr:Yi,_0x4ad2fc=this['_storageIn'+'dex']?{'storage':!(-0x17c2+0x7*-0x51d+0x3b8d)}:void(0x45*0x2f+0x231f+-0x17e5*0x2);this['indexBuffe'+'r'][0x108e+0x219f+-0x322d]=new br(this['device'],_0x41442d,this['_geometryD'+'ata']['maxIndices'],this['_geometryD'+'ata']['indicesUsa'+'ge'],void(0x2*0x1226+0x1c5c+-0x40a8),_0x4ad2fc);}const _0x5713b6=this['_geometryD'+'ata']['indices'];_0x5713b6&&(this['indexBuffe'+'r'][-0x141c+-0x1036+-0x1229*-0x2]['writeData'](_0x5713b6,this['_geometryD'+'ata']['indexCount']),this['_geometryD'+'ata']['indices']=null);}['prepareRen'+'derState'](_0x19f908){_0x19f908===$r?this['generateWi'+'reframe']():_0x19f908===Jl&&(this['primitive'][Jl]={'type':cd,'base':0x0,'baseVertex':0x0,'count':this['vertexBuff'+'er']?this['vertexBuff'+'er']['numVertice'+'s']:-0x96e*0x1+-0x12f5*0x1+-0x2b*-0xa9,'indexed':!(-0xe56*-0x1+-0x2a5*-0x1+-0x10fa)});}['updateRend'+'erStates'](){this['primitive'][Jl]&&this['prepareRen'+'derState'](Jl),this['primitive'][$r]&&this['prepareRen'+'derState']($r);}['generateWi'+'reframe'](){this['_destroyIn'+'dexBuffer']($r);const _0x20bae8=this['vertexBuff'+'er']['numVertice'+'s'],_0xc54c22=[];let _0x5bfc28;if(this['indexBuffe'+'r']['length']>0xdf*0x2+0x4*0x29f+-0x61d*0x2&&this['indexBuffe'+'r'][0x9c7*-0x1+0x1b93+0x1*-0x11cc]){const _0x43cd34=[[-0x79b+0x56*-0x43+-0x1e1d*-0x1,0x1ed9+-0x1b52+-0x386],[-0xd6d*-0x2+-0x14e7+-0x1*0x5f2,0x88a+0x839+-0x10c1],[0x63a+0x14c9+0x1f*-0xdf,0x4*0x821+-0x13d*0x5+-0x1a53]],_0x1c382b=this['primitive'][un]['base'],_0xe7a2ed=this['primitive'][un]['count'],_0x4c4cf1=this['primitive'][un]['baseVertex']||0x185f+0x473+-0x1cd2,_0x42767b=this['indexBuffe'+'r'][un],_0x21ba40=new Sh[_0x42767b['format']](_0x42767b['storage']),_0x5bda55=new Set();for(let _0x22b389=_0x1c382b;_0x22b389<_0x1c382b+_0xe7a2ed;_0x22b389+=0x1*-0x1e8e+0x37*0x59+0xb72)for(let _0x4ea30d=0x2504+0x249*-0x5+-0x1997;_0x4ea30d<-0x6*0x44c+0x22c3+-0x38*0x29;_0x4ea30d++){const _0x40eee0=_0x21ba40[_0x22b389+_0x43cd34[_0x4ea30d][0x1896+0x872*-0x1+-0x1024]]+_0x4c4cf1,_0x1d1491=_0x21ba40[_0x22b389+_0x43cd34[_0x4ea30d][-0xb9*0x4+-0x1*0x21cf+0x6*0x61e]]+_0x4c4cf1,_0x431809=_0x40eee0>_0x1d1491?_0x1d1491*_0x20bae8+_0x40eee0:_0x40eee0*_0x20bae8+_0x1d1491;_0x5bda55['has'](_0x431809)||(_0x5bda55['add'](_0x431809),_0xc54c22['push'](_0x40eee0,_0x1d1491));}_0x5bfc28=_0x42767b['format'];}else{for(let _0x53a4c4=0x1e71+0x32*0xc3+-0x4487;_0x53a4c4<_0x20bae8;_0x53a4c4+=0x16*-0xd+-0xd*0x79+0x746)_0xc54c22['push'](_0x53a4c4,_0x53a4c4+(-0x98c+0x855*-0x3+0x42*0x86),_0x53a4c4+(0x1ba3+-0x7*0x265+-0xadf),_0x53a4c4+(-0x156a*0x1+-0x2*0x5af+-0xaee*-0x3),_0x53a4c4+(-0x199c+-0x1f80+-0x3*-0x130a),_0x53a4c4);_0x5bfc28=_0xc54c22['length']>0x1*0x9095+-0x1b760+0x226ca?wr:Yi;}const _0x2d2620=new br(this['vertexBuff'+'er']['device'],_0x5bfc28,_0xc54c22['length']);new Sh[_0x2d2620['format']](_0x2d2620['storage'])['set'](_0xc54c22),_0x2d2620['unlock'](),this['primitive'][$r]={'type':hd,'base':0x0,'baseVertex':0x0,'count':_0xc54c22['length'],'indexed':!(0x156c+-0x12bf*0x1+-0x2ad)},this['indexBuffe'+'r'][$r]=_0x2d2620;}}const v_=new te(),Hd=new D(),x_=new le(),Wd=new le(),T_=new D(),w_=new D(),yE=new te(),vE=new le(),rs=new D(),ro=new te(),as=new le(),Ia=new le(),E_=new te(),$d=new D(),tc=new D();function b_(_0x198cbc,_0x30437f){return _0x198cbc instanceof Function?_0x198cbc:_0x9e4763=>{let _0x3b119a=_0x9e4763[_0x198cbc];return _0x3b119a instanceof Function&&(_0x3b119a=_0x3b119a()),_0x3b119a===_0x30437f;};}function Sv(_0x22396d,_0x4675b1){if(_0x4675b1(_0x22396d))return _0x22396d;const _0xb643c=_0x22396d['_children'],_0x3b8c02=_0xb643c['length'];for(let _0x51d5fb=0x1b49+0xf02*0x1+-0x1b*0x191;_0x51d5fb<_0x3b8c02;++_0x51d5fb){const _0x56de08=Sv(_0xb643c[_0x51d5fb],_0x4675b1);if(_0x56de08)return _0x56de08;}return null;}class Ie extends me{constructor(_0x16fa07='Untitled'){super(),h(this,'name'),h(this,'tags',new Oo(this)),h(this,'localPosit'+'ion',new D()),h(this,'localRotat'+'ion',new le()),h(this,'localScale',new D(0x1*-0x147b+-0x23b8+-0x6*-0x95e,0x1*-0x1a05+0x47*0x32+0xc28,-0x283+-0x16d0+0x1954)),h(this,'localEuler'+'Angles',new D()),h(this,'position',new D()),h(this,'rotation',new le()),h(this,'eulerAngle'+'s',new D()),h(this,'_scale',null),h(this,'localTrans'+'form',new te()),h(this,'_dirtyLoca'+'l',!(-0x2115*-0x1+-0x1cde+-0x436*0x1)),h(this,'_aabbVer',0x11e3+0xdb9*-0x1+-0x42a),h(this,'_frozen',!(-0x7c*-0x25+0x65b+-0x1846)),h(this,'worldTrans'+'form',new te()),h(this,'_dirtyWorl'+'d',!(-0x1*-0x62b+0x1*-0x417+-0x9*0x3b)),h(this,'_worldScal'+'eSign',0x72*-0x3+0x2108+0x2*-0xfd9),h(this,'_normalMat'+'rix',new _i()),h(this,'_dirtyNorm'+'al',!(0x257a+-0xa1+-0x24d9)),h(this,'_right',null),h(this,'_up',null),h(this,'_forward',null),h(this,'_parent',null),h(this,'_children',[]),h(this,'_graphDept'+'h',-0x242d+-0x1927+0x3d54),h(this,'_enabled',!(-0xa7+0x5*0x4+0x93)),h(this,'_enabledIn'+'Hierarchy',!(0xacc+0x1951+-0x1*0x241c)),h(this,'scaleCompe'+'nsation',!(-0x7ea+-0x5d8+0x10f*0xd)),this['name']=_0x16fa07;}get['right'](){return this['_right']||(this['_right']=new D()),this['getWorldTr'+'ansform']()['getX'](this['_right'])['normalize']();}get['up'](){return this['_up']||(this['_up']=new D()),this['getWorldTr'+'ansform']()['getY'](this['_up'])['normalize']();}get['forward'](){return this['_forward']||(this['_forward']=new D()),this['getWorldTr'+'ansform']()['getZ'](this['_forward'])['normalize']()['mulScalar'](-(0x20a3+-0x18d2+-0x7d0));}get['normalMatr'+'ix'](){const _0x5d3d21=this['_normalMat'+'rix'];return this['_dirtyNorm'+'al']&&(_0x5d3d21['invertMat4'](this['getWorldTr'+'ansform']())['transpose'](),this['_dirtyNorm'+'al']=!(0x18ea+0x4be+-0x1da7)),_0x5d3d21;}set['enabled'](_0x545250){var _0x42ebb8;this['_enabled']!==_0x545250&&(this['_enabled']=_0x545250,(_0x545250&&((_0x42ebb8=this['_parent'])!=null&&_0x42ebb8['enabled'])||!_0x545250)&&this['_notifyHie'+'rarchyStat'+'eChanged'](this,_0x545250));}get['enabled'](){return this['_enabled']&&this['_enabledIn'+'Hierarchy'];}get['parent'](){return this['_parent'];}get['path'](){let _0x18d9cd=this['_parent'];if(!_0x18d9cd)return'';let _0x3acca8=this['name'];for(;_0x18d9cd&&_0x18d9cd['_parent'];)_0x3acca8=_0x18d9cd['name']+'/'+_0x3acca8,_0x18d9cd=_0x18d9cd['_parent'];return _0x3acca8;}get['root'](){let _0x320e08=this;for(;_0x320e08['_parent'];)_0x320e08=_0x320e08['_parent'];return _0x320e08;}get['children'](){return this['_children'];}get['graphDepth'](){return this['_graphDept'+'h'];}['_notifyHie'+'rarchyStat'+'eChanged'](_0x274086,_0x12f0e0){_0x274086['_onHierarc'+'hyStateCha'+'nged'](_0x12f0e0);const _0x5f0844=_0x274086['_children'];for(let _0x4b8bad=0x2*-0xd9f+0x17d2+0x36c,_0x303b07=_0x5f0844['length'];_0x4b8bad<_0x303b07;_0x4b8bad++)_0x5f0844[_0x4b8bad]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x5f0844[_0x4b8bad],_0x12f0e0);}['_onHierarc'+'hyStateCha'+'nged'](_0x14fbbf){this['_enabledIn'+'Hierarchy']=_0x14fbbf,_0x14fbbf&&!this['_frozen']&&this['_unfreezeP'+'arentToRoo'+'t']();}['_cloneInte'+'rnal'](_0x216e4a){_0x216e4a['name']=this['name'];const _0x47f3e6=this['tags']['_list'];_0x216e4a['tags']['clear']();for(let _0xf396f0=0x6f3*-0x1+-0x2*-0x1223+-0x1d53;_0xf396f0<_0x47f3e6['length'];_0xf396f0++)_0x216e4a['tags']['add'](_0x47f3e6[_0xf396f0]);_0x216e4a['localPosit'+'ion']['copy'](this['localPosit'+'ion']),_0x216e4a['localRotat'+'ion']['copy'](this['localRotat'+'ion']),_0x216e4a['localScale']['copy'](this['localScale']),_0x216e4a['localEuler'+'Angles']['copy'](this['localEuler'+'Angles']),_0x216e4a['position']['copy'](this['position']),_0x216e4a['rotation']['copy'](this['rotation']),_0x216e4a['eulerAngle'+'s']['copy'](this['eulerAngle'+'s']),_0x216e4a['localTrans'+'form']['copy'](this['localTrans'+'form']),_0x216e4a['_dirtyLoca'+'l']=this['_dirtyLoca'+'l'],_0x216e4a['worldTrans'+'form']['copy'](this['worldTrans'+'form']),_0x216e4a['_dirtyWorl'+'d']=this['_dirtyWorl'+'d'],_0x216e4a['_dirtyNorm'+'al']=this['_dirtyNorm'+'al'],_0x216e4a['_aabbVer']=this['_aabbVer']+(-0x7ca*-0x3+0x1*-0x10b+-0x1652),_0x216e4a['_enabled']=this['_enabled'],_0x216e4a['scaleCompe'+'nsation']=this['scaleCompe'+'nsation'],_0x216e4a['_enabledIn'+'Hierarchy']=!(0x57a*0x1+-0x21c3+0x8e*0x33);}['clone'](){const _0x52c2d3=new this['constructo'+'r']();return this['_cloneInte'+'rnal'](_0x52c2d3),_0x52c2d3;}['copy'](_0x5adca4){return _0x5adca4['_cloneInte'+'rnal'](this),this;}['destroy'](){this['remove']();const _0x43dce8=this['_children'];for(;_0x43dce8['length'];){const _0x2586f5=_0x43dce8['pop']();_0x2586f5['_parent']=null,_0x2586f5['destroy']();}this['fire']('destroy',this),this['off']();}['find'](_0xcb88f6,_0x16c226){const _0x48965b=[],_0x42dfa9=b_(_0xcb88f6,_0x16c226);return this['forEach'](_0x2c95c7=>{_0x42dfa9(_0x2c95c7)&&_0x48965b['push'](_0x2c95c7);}),_0x48965b;}['findOne'](_0x55260e,_0x154e3b){const _0x3b29a4=b_(_0x55260e,_0x154e3b);return Sv(this,_0x3b29a4);}['findByTag'](..._0x45f299){const _0x2941eb=[],_0x2fdc5f=(_0x4e8dba,_0x1d458b)=>{_0x1d458b&&_0x4e8dba['tags']['has'](..._0x45f299)&&_0x2941eb['push'](_0x4e8dba);for(let _0x2829a3=-0x76f*0x2+0x1*0x125f+-0x381;_0x2829a3<_0x4e8dba['_children']['length'];_0x2829a3++)_0x2fdc5f(_0x4e8dba['_children'][_0x2829a3],!(-0x3b8*0x9+0x169d*-0x1+0x3815));};return _0x2fdc5f(this,!(-0x2093+0x818+0x187c)),_0x2941eb;}['findByName'](_0x527705){return this['findOne']('name',_0x527705);}['findByPath'](_0x57bc1a){const _0x230925=Array['isArray'](_0x57bc1a)?_0x57bc1a:_0x57bc1a['split']('/');let _0x4a6c99=this;for(let _0x50995d=0xea6+0x1dbc+-0x26*0x12b,_0xa2c36d=_0x230925['length'];_0x50995d<_0xa2c36d;++_0x50995d)if(_0x4a6c99=_0x4a6c99['children']['find'](_0x518947=>_0x518947['name']===_0x230925[_0x50995d]),!_0x4a6c99)return null;return _0x4a6c99;}['forEach'](_0x57d403,_0x253ca6){_0x57d403['call'](_0x253ca6,this);const _0x27d1da=this['_children'],_0x28e3c8=_0x27d1da['length'];for(let _0x1b425c=0xd*0x144+0x7c6*-0x3+0x6de;_0x1b425c<_0x28e3c8;++_0x1b425c)_0x27d1da[_0x1b425c]['forEach'](_0x57d403,_0x253ca6);}['isDescenda'+'ntOf'](_0x4ce153){let _0x5a21fe=this['_parent'];for(;_0x5a21fe;){if(_0x5a21fe===_0x4ce153)return!(0x815+0x2489+-0x2c9e);_0x5a21fe=_0x5a21fe['_parent'];}return!(-0x8b*0x13+0xfa*0x27+-0x1bc4);}['isAncestor'+'Of'](_0x5c7851){return _0x5c7851['isDescenda'+'ntOf'](this);}['getEulerAn'+'gles'](){return this['getWorldTr'+'ansform']()['getEulerAn'+'gles'](this['eulerAngle'+'s']),this['eulerAngle'+'s'];}['getLocalEu'+'lerAngles'](){return this['localRotat'+'ion']['getEulerAn'+'gles'](this['localEuler'+'Angles']),this['localEuler'+'Angles'];}['getLocalPo'+'sition'](){return this['localPosit'+'ion'];}['getLocalRo'+'tation'](){return this['localRotat'+'ion'];}['getLocalSc'+'ale'](){return this['localScale'];}['getLocalTr'+'ansform'](){return this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(0x1*-0x15fb+0x467*0x7+-0x7*0x143)),this['localTrans'+'form'];}['getPositio'+'n'](){return this['getWorldTr'+'ansform']()['getTransla'+'tion'](this['position']),this['position'];}['getRotatio'+'n'](){return this['rotation']['setFromMat'+'4'](this['getWorldTr'+'ansform']()),this['rotation'];}['getScale'](){return this['_scale']||(this['_scale']=new D()),this['getWorldTr'+'ansform']()['getScale'](this['_scale']);}['getWorldTr'+'ansform'](){return!this['_dirtyLoca'+'l']&&!this['_dirtyWorl'+'d']?this['worldTrans'+'form']:(this['_parent']&&this['_parent']['getWorldTr'+'ansform'](),this['_sync'](),this['worldTrans'+'form']);}get['worldScale'+'Sign'](){return this['_worldScal'+'eSign']===0x172b+-0x1a0*0x9+-0xf3*0x9&&(this['_worldScal'+'eSign']=this['getWorldTr'+'ansform']()['scaleSign']),this['_worldScal'+'eSign'];}['remove'](){var _0x498c97;(_0x498c97=this['_parent'])==null||_0x498c97['removeChil'+'d'](this);}['reparent'](_0x4a568e,_0x4374fb){this['remove'](),_0x4a568e&&(_0x4374fb>=-0x156+0x1bb*0x2+0x88*-0x4?_0x4a568e['insertChil'+'d'](this,_0x4374fb):_0x4a568e['addChild'](this));}['setLocalEu'+'lerAngles'](_0x279f4e,_0x3fae85,_0x233b35){this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x279f4e,_0x3fae85,_0x233b35),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalPo'+'sition'](_0x473df7,_0x279314,_0x458f85){_0x473df7 instanceof D?this['localPosit'+'ion']['copy'](_0x473df7):this['localPosit'+'ion']['set'](_0x473df7,_0x279314,_0x458f85),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalRo'+'tation'](_0x162b66,_0x302dfe,_0x178b5d,_0x71ce56){_0x162b66 instanceof le?this['localRotat'+'ion']['copy'](_0x162b66):this['localRotat'+'ion']['set'](_0x162b66,_0x302dfe,_0x178b5d,_0x71ce56),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalSc'+'ale'](_0x223004,_0x19a65f,_0x1e4e9c){_0x223004 instanceof D?this['localScale']['copy'](_0x223004):this['localScale']['set'](_0x223004,_0x19a65f,_0x1e4e9c),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_dirtifyLo'+'cal'](){this['_dirtyLoca'+'l']||(this['_dirtyLoca'+'l']=!(-0x1b4e*-0x1+0x16a9+0x31f7*-0x1),this['_dirtyWorl'+'d']||this['_dirtifyWo'+'rld']());}['_unfreezeP'+'arentToRoo'+'t'](){let _0x262f3f=this['_parent'];for(;_0x262f3f;)_0x262f3f['_frozen']=!(0xae3+-0x7b2+0x18*-0x22),_0x262f3f=_0x262f3f['_parent'];}['_dirtifyWo'+'rld'](){this['_dirtyWorl'+'d']||this['_unfreezeP'+'arentToRoo'+'t'](),this['_dirtifyWo'+'rldInterna'+'l']();}['_dirtifyWo'+'rldInterna'+'l'](){if(!this['_dirtyWorl'+'d']){this['_frozen']=!(0x1*0x2325+0x2442+-0x57e*0xd),this['_dirtyWorl'+'d']=!(0x8a5*0x4+0x767+-0x29fb);for(let _0x2fcbeb=-0x1680+-0x170+-0x2*-0xbf8;_0x2fcbeb<this['_children']['length'];_0x2fcbeb++)this['_children'][_0x2fcbeb]['_dirtyWorl'+'d']||this['_children'][_0x2fcbeb]['_dirtifyWo'+'rldInterna'+'l']();}this['_dirtyNorm'+'al']=!(0x581*0x1+-0x16*0x86+0x1*0x603),this['_worldScal'+'eSign']=-0x9*-0x383+0x943*0x3+-0x3b64,this['_aabbVer']++;}['setPositio'+'n'](_0x18f8c7,_0x3a893c,_0x2d6be0){_0x18f8c7 instanceof D?rs['copy'](_0x18f8c7):rs['set'](_0x18f8c7,_0x3a893c,_0x2d6be0),this['_parent']===null?this['localPosit'+'ion']['copy'](rs):(ro['copy'](this['_parent']['getWorldTr'+'ansform']())['invert'](),ro['transformP'+'oint'](rs,this['localPosit'+'ion'])),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setRotatio'+'n'](_0x179e83,_0xa1339d,_0x2ff4cb,_0x319172){if(_0x179e83 instanceof le?as['copy'](_0x179e83):as['set'](_0x179e83,_0xa1339d,_0x2ff4cb,_0x319172),this['_parent']===null)this['localRotat'+'ion']['copy'](as);else{const _0x57cb7b=this['_parent']['getRotatio'+'n']();Ia['copy'](_0x57cb7b)['invert'](),this['localRotat'+'ion']['copy'](Ia)['mul'](as);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setPositio'+'nAndRotati'+'on'](_0x423c75,_0x102586){if(this['_parent']===null)this['localPosit'+'ion']['copy'](_0x423c75),this['localRotat'+'ion']['copy'](_0x102586);else{const _0x329b4b=this['_parent']['getWorldTr'+'ansform']();ro['copy'](_0x329b4b)['invert'](),ro['transformP'+'oint'](_0x423c75,this['localPosit'+'ion']),this['localRotat'+'ion']['setFromMat'+'4'](ro)['mul'](_0x102586);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setEulerAn'+'gles'](_0x490461,_0x2eb539,_0x251428){if(this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x490461,_0x2eb539,_0x251428),this['_parent']!==null){const _0x377a18=this['_parent']['getRotatio'+'n']();Ia['copy'](_0x377a18)['invert'](),this['localRotat'+'ion']['mul2'](Ia,this['localRotat'+'ion']);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['addChild'](_0x31bdf1){this['_prepareIn'+'sertChild'](_0x31bdf1),this['_children']['push'](_0x31bdf1),this['_onInsertC'+'hild'](_0x31bdf1);}['addChildAn'+'dSaveTrans'+'form'](_0x2ca70f){const _0x154cb0=_0x2ca70f['getPositio'+'n'](),_0x588a7a=_0x2ca70f['getRotatio'+'n']();this['_prepareIn'+'sertChild'](_0x2ca70f),_0x2ca70f['setPositio'+'n'](yE['copy'](this['worldTrans'+'form'])['invert']()['transformP'+'oint'](_0x154cb0)),_0x2ca70f['setRotatio'+'n'](vE['copy'](this['getRotatio'+'n']())['invert']()['mul'](_0x588a7a)),this['_children']['push'](_0x2ca70f),this['_onInsertC'+'hild'](_0x2ca70f);}['insertChil'+'d'](_0x4096cc,_0x50723b){this['_prepareIn'+'sertChild'](_0x4096cc),this['_children']['splice'](_0x50723b,-0x1*0x6de+0x14e5+-0x18f*0x9,_0x4096cc),this['_onInsertC'+'hild'](_0x4096cc);}['_prepareIn'+'sertChild'](_0x275997){_0x275997['remove'](),w['assert'](_0x275997!==this,'GraphNode\x20'+(_0x275997==null?void(0x1b6f+0x9ed+0x2*-0x12ae):_0x275997['name'])+('\x20cannot\x20be'+'\x20a\x20child\x20o'+'f\x20itself')),w['assert'](!this['isDescenda'+'ntOf'](_0x275997),'GraphNode\x20'+(_0x275997==null?void(0x3*-0xb3d+0x2212+0x7*-0xd):_0x275997['name'])+('\x20cannot\x20ad'+'d\x20an\x20ances'+'tor\x20as\x20a\x20c'+'hild'));}['_fireOnHie'+'rarchy'](_0x32c106,_0x1ca47e,_0x178280){this['fire'](_0x32c106,_0x178280);for(let _0x132aa3=0x2*0x27+-0x1*-0x19a0+-0x19ee;_0x132aa3<this['_children']['length'];_0x132aa3++)this['_children'][_0x132aa3]['_fireOnHie'+'rarchy'](_0x1ca47e,_0x1ca47e,_0x178280);}['_onInsertC'+'hild'](_0x2f4bc9){_0x2f4bc9['_parent']=this;const _0x5bfea7=_0x2f4bc9['_enabled']&&this['enabled'];_0x2f4bc9['_enabledIn'+'Hierarchy']!==_0x5bfea7&&(_0x2f4bc9['_enabledIn'+'Hierarchy']=_0x5bfea7,_0x2f4bc9['_notifyHie'+'rarchyStat'+'eChanged'](_0x2f4bc9,_0x5bfea7)),_0x2f4bc9['_updateGra'+'phDepth'](),_0x2f4bc9['_dirtifyWo'+'rld'](),this['_frozen']&&_0x2f4bc9['_unfreezeP'+'arentToRoo'+'t'](),_0x2f4bc9['_fireOnHie'+'rarchy']('insert','inserthier'+'archy',this),this['fire']&&this['fire']('childinser'+'t',_0x2f4bc9);}['_updateGra'+'phDepth'](){this['_graphDept'+'h']=this['_parent']?this['_parent']['_graphDept'+'h']+(-0x201e*0x1+0x18a0+0x77f):-0x32b*0x1+-0x29c*-0xe+0xd*-0x291;for(let _0x466da7=0x112*0x19+-0x1dc1*0x1+-0xd*-0x3b,_0x322deb=this['_children']['length'];_0x466da7<_0x322deb;_0x466da7++)this['_children'][_0x466da7]['_updateGra'+'phDepth']();}['removeChil'+'d'](_0x3dcd1a){const _0xc9280c=this['_children']['indexOf'](_0x3dcd1a);_0xc9280c!==-(-0xcd6+0x26cd+-0xcfb*0x2)&&(this['_children']['splice'](_0xc9280c,-0xf24+-0x9*0x337+-0x326*-0xe),_0x3dcd1a['_parent']=null,_0x3dcd1a['_fireOnHie'+'rarchy']('remove','removehier'+'archy',this),this['fire']('childremov'+'e',_0x3dcd1a));}['_sync'](){if(this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(-0x5fa+0x28c*-0xb+-0xb55*-0x3)),this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['scaleCompe'+'nsation']){let _0x5dd009;const _0x304c72=this['_parent'];let _0x475d7c=this['localScale'],_0x23512d=_0x304c72;if(_0x23512d){for(;_0x23512d&&_0x23512d['scaleCompe'+'nsation'];)_0x23512d=_0x23512d['_parent'];_0x23512d&&(_0x23512d=_0x23512d['_parent'],_0x23512d&&(_0x5dd009=_0x23512d['worldTrans'+'form']['getScale'](),T_['mul2'](_0x5dd009,this['localScale']),_0x475d7c=T_));}Wd['setFromMat'+'4'](_0x304c72['worldTrans'+'form']),x_['mul2'](Wd,this['localRotat'+'ion']);let _0x4fc4a1=_0x304c72['worldTrans'+'form'];_0x304c72['scaleCompe'+'nsation']&&(w_['mul2'](_0x5dd009,_0x304c72['getLocalSc'+'ale']()),v_['setTRS'](_0x304c72['worldTrans'+'form']['getTransla'+'tion'](Hd),Wd,w_),_0x4fc4a1=v_),_0x4fc4a1['transformP'+'oint'](this['localPosit'+'ion'],Hd),this['worldTrans'+'form']['setTRS'](Hd,x_,_0x475d7c);}else this['worldTrans'+'form']['mulAffine2'](this['_parent']['worldTrans'+'form'],this['localTrans'+'form']);}this['_dirtyWorl'+'d']=!(-0x56b*0x4+0x158e+-0x1f*-0x1);}}['syncHierar'+'chy'](){if(!this['_enabled']||this['_frozen'])return;this['_frozen']=!(0x192d*0x1+0x4e4*0x2+-0x22f5),(this['_dirtyLoca'+'l']||this['_dirtyWorl'+'d'])&&this['_sync']();const _0x3746db=this['_children'];for(let _0x5e977e=0x2361+-0x19f*-0x5+-0x2b7c,_0x11e170=_0x3746db['length'];_0x5e977e<_0x11e170;_0x5e977e++)_0x3746db[_0x5e977e]['syncHierar'+'chy']();}['lookAt'](_0x3db33c,_0x518432,_0x2a1327,_0x25bf19=0x9b2+0x1ab8+-0x246a,_0x44b80d=-0x1639*-0x1+-0x22c3*0x1+0xc8b,_0x14b100=0x1f4e+-0xb84+-0x13ca){if(_0x3db33c instanceof D)$d['copy'](_0x3db33c),_0x518432 instanceof D?tc['copy'](_0x518432):tc['copy'](D['UP']);else{if(_0x2a1327===void(0xfdf+0x22c1+-0x32a0))return;$d['set'](_0x3db33c,_0x518432,_0x2a1327),tc['set'](_0x25bf19,_0x44b80d,_0x14b100);}E_['setLookAt'](this['getPositio'+'n'](),$d,tc),as['setFromMat'+'4'](E_),this['setRotatio'+'n'](as);}['translate'](_0x37478f,_0x12a817,_0x952a8c){_0x37478f instanceof D?rs['copy'](_0x37478f):rs['set'](_0x37478f,_0x12a817,_0x952a8c),rs['add'](this['getPositio'+'n']()),this['setPositio'+'n'](rs);}['translateL'+'ocal'](_0x2289aa,_0x4287ac,_0x2a7ca0){_0x2289aa instanceof D?rs['copy'](_0x2289aa):rs['set'](_0x2289aa,_0x4287ac,_0x2a7ca0),this['localRotat'+'ion']['transformV'+'ector'](rs,rs),this['localPosit'+'ion']['add'](rs),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotate'](_0x2b866e,_0x10ef5a,_0x3f3a2b){if(as['setFromEul'+'erAngles'](_0x2b866e,_0x10ef5a,_0x3f3a2b),this['_parent']===null)this['localRotat'+'ion']['mul2'](as,this['localRotat'+'ion']);else{const _0x5cd688=this['getRotatio'+'n'](),_0x463773=this['_parent']['getRotatio'+'n']();Ia['copy'](_0x463773)['invert'](),as['mul2'](Ia,as),this['localRotat'+'ion']['mul2'](as,_0x5cd688);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotateLoca'+'l'](_0x3378ce,_0x56b86e,_0x44ebbd){as['setFromEul'+'erAngles'](_0x3378ce,_0x56b86e,_0x44ebbd),this['localRotat'+'ion']['mul'](as),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}}const yv=new Kt();function Qn(_0x1cd8b6){const _0x15e96c=yv['get'](_0x1cd8b6);return w['assert'](_0x15e96c),_0x15e96c;}function xE(_0x409b6e,_0x7d534f){w['assert'](_0x7d534f),yv['get'](_0x409b6e,()=>_0x7d534f);}class TE{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach']((_0x24e4c0,_0x33ef0d)=>{_0x33ef0d['destroy']();}),this['cache']['clear']();}['incRef'](_0x4a24d0){const _0x20623a=(this['cache']['get'](_0x4a24d0)||0xa*-0x1e+0x3*0xaf1+0x49*-0x6f)+(-0x1c00+0x773*0x5+0x5b*-0x1a);this['cache']['set'](_0x4a24d0,_0x20623a);}['decRef'](_0x1c257a){if(_0x1c257a){let _0x1b36e8=this['cache']['get'](_0x1c257a);_0x1b36e8&&(_0x1b36e8--,_0x1b36e8===0x23ee+0x11c9+0x1*-0x35b7?(this['cache']['delete'](_0x1c257a),_0x1c257a['destroy']()):this['cache']['set'](_0x1c257a,_0x1b36e8));}}}class zi{static['incRef'](_0x49a52f){this['cache']['incRef'](_0x49a52f);}static['decRef'](_0x3cd750){this['cache']['decRef'](_0x3cd750);}static['destroy'](){this['cache']['destroy']();}}h(zi,'cache',new TE());let wE=-0x1d6f+-0x1*-0x1587+-0x2*-0x3f4;const EE=new De(),sc=new De(),Xd=new sp(),qd=new Set(),Rr=new Uint32Array(-0x1*0x1ca3+0xb5*-0x22+0x11f*0x2f);class bE{constructor(_0x42889b){h(this,'vertexBuff'+'er',null),h(this,'_destroyVe'+'rtexBuffer',!(-0x1*0xe8f+0x17c5*-0x1+0x2655)),this['count']=_0x42889b;}['destroy'](){var _0x421be3;this['_destroyVe'+'rtexBuffer']&&((_0x421be3=this['vertexBuff'+'er'])==null||_0x421be3['destroy']()),this['vertexBuff'+'er']=null;}}class AE{constructor(){h(this,'map',new Map()),h(this,'meshMetaDa'+'ta',new Int32Array(0x2b*-0x67+0x47*-0x47+0x2502));}['get'](_0x36734a){return this['map']['get'](_0x36734a)??this['map']['get'](null);}}class CE{constructor(){h(this,'shader'),h(this,'bindGroup',null),h(this,'uniformBuf'+'fer',null),h(this,'hashes');}['getBindGro'+'up'](_0x2d78f8){if(!this['bindGroup']){const _0xdda8aa=this['shader'];w['assert'](_0xdda8aa);const _0x441900=_0xdda8aa['meshBindGr'+'oupFormat'];w['assert'](_0x441900),this['bindGroup']=new Up(_0x2d78f8,_0x441900),Ea['setName'](this['bindGroup'],'MeshBindGr'+'oup_'+this['bindGroup']['id']);}return this['bindGroup'];}['getUniform'+'Buffer'](_0x31fbb1){if(!this['uniformBuf'+'fer']){const _0x324fde=this['shader'];w['assert'](_0x324fde);const _0x4f663b=_0x324fde['meshUnifor'+'mBufferFor'+'mat'];w['assert'](_0x4f663b),this['uniformBuf'+'fer']=new zp(_0x31fbb1,_0x4f663b,!(0x8b6+0x1010+0x11*-0x175));}return this['uniformBuf'+'fer'];}['destroy'](){var _0x534acb,_0x47500a;(_0x534acb=this['bindGroup'])==null||_0x534acb['destroy'](),this['bindGroup']=null,(_0x47500a=this['uniformBuf'+'fer'])==null||_0x47500a['destroy'](),this['uniformBuf'+'fer']=null;}}const Jr=class Jr{constructor(_0x3fdfe4,_0x1b683b,_0x374e85=null){h(this,'castShadow',!(-0x1087+0xc1*-0x10+0x1c98)),h(this,'shadowCasc'+'adeMask',Bw),h(this,'cull',!(-0x8b7+-0x10*0x1f2+0x149*0x1f)),h(this,'drawOrder',0x403*-0x6+0x214f+-0x93d),h(this,'_drawBucke'+'t',-0x2*-0xd5d+-0x1*-0x8b1+-0x8bb*0x4),h(this,'node'),h(this,'visible',!(0x1*-0x759+0xbb*-0x5+0xb0*0x10)),h(this,'visibleThi'+'sFrame',!(-0x2*0x128f+0x1c9+-0x2*-0x11ab)),h(this,'flipFacesF'+'actor',-0x3*0xb17+0x1*-0x551+-0x1*-0x2697),h(this,'gsplatInst'+'ance',null),h(this,'id',wE++),h(this,'isVisibleF'+'unc',null),h(this,'instancing'+'Data',null),h(this,'indirectDa'+'ta',null),h(this,'parameters',{}),h(this,'pick',!(0xa34*-0x2+0x1979+-0x511)),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'transparen'+'t',!(-0x3a6*0x9+0x1*0x21af+-0xd8)),h(this,'_aabb',new De()),h(this,'_aabbVer',-(0xdf*-0x15+0x71f+0xb2d)),h(this,'_aabbMeshV'+'er',-(0x15*0x105+0x1c21+0x9*-0x581)),h(this,'_customAab'+'b',null),h(this,'_updateAab'+'b',!(0x30*-0x3a+-0x1b23+-0x1*-0x2603)),h(this,'_updateAab'+'bFunc',null),h(this,'_sortKeySh'+'adow',0x6*-0x20e+-0x1*-0x1cde+-0x108a),h(this,'_sortKeyFo'+'rward',-0x4c*-0x6e+0x14c+0xd4*-0x29),h(this,'_sortKeyDy'+'namic',0x1*-0x1f20+0x16d3*-0x1+0x35f3),h(this,'_layer',Ky),h(this,'_material',null),h(this,'_skinInsta'+'nce',null),h(this,'_morphInst'+'ance',null),h(this,'_receiveSh'+'adow',!(0xa*0x3a6+0xddb+-0x3257*0x1)),h(this,'_renderSty'+'le',un),h(this,'_screenSpa'+'ce',!(0xd*-0x26b+-0x21b1+-0x1*-0x4121)),h(this,'_shaderCac'+'he',new Map()),h(this,'_shaderDef'+'s',Ss<<-0x1*0x2529+0x14*-0x1bf+0x4825),h(this,'_calculate'+'SortDistan'+'ce',null);if(w['assert'](!(_0x3fdfe4 instanceof Ie),'Incorrect\x20'+'parameters'+'\x20for\x20MeshI'+'nstance\x27s\x20'+'constructo'+'r.\x20Use\x20new'+'\x20MeshInsta'+'nce(mesh,\x20'+'material,\x20'+'node)'),this['node']=_0x374e85,this['_mesh']=_0x3fdfe4,_0x3fdfe4['incRefCoun'+'t'](),this['material']=_0x1b683b,_0x3fdfe4['vertexBuff'+'er']){const _0x454191=_0x3fdfe4['vertexBuff'+'er']['format'];this['_shaderDef'+'s']|=_0x454191['hasUv0']?nm:0x8c9+0x4*0x82c+0xdd3*-0x3,this['_shaderDef'+'s']|=_0x454191['hasUv1']?dv:0xb43+-0x163f+0xafc,this['_shaderDef'+'s']|=_0x454191['hasColor']?fv:-0x1b47*-0x1+0xa46+0x1*-0x258d,this['_shaderDef'+'s']|=_0x454191['hasTangent'+'s']?om:0x2316+0x10d7+-0x114f*0x3;}this['updateKey']();}set['drawBucket'](_0x47c54d){this['_drawBucke'+'t']=Math['floor'](_0x47c54d)&-0x1fd*0xd+0x14e8+-0x8*-0xbe,this['updateKey']();}get['drawBucket'](){return this['_drawBucke'+'t'];}set['renderStyl'+'e'](_0x4f68ba){this['_renderSty'+'le']=_0x4f68ba,this['mesh']['prepareRen'+'derState'](_0x4f68ba);}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['mesh'](_0x4f8c66){_0x4f8c66!==this['_mesh']&&(this['_mesh']&&this['_mesh']['decRefCoun'+'t'](),this['_mesh']=_0x4f8c66,_0x4f8c66&&_0x4f8c66['incRefCoun'+'t']());}get['mesh'](){return this['_mesh'];}set['aabb'](_0x3198b5){this['_aabb']=_0x3198b5;}get['aabb'](){if(!this['_updateAab'+'b'])return this['_aabb'];if(this['_updateAab'+'bFunc'])return this['_updateAab'+'bFunc'](this['_aabb']);let _0x528bcf=this['_customAab'+'b'],_0x5df833=!!_0x528bcf;if(!_0x528bcf){if(_0x528bcf=EE,this['skinInstan'+'ce']){if(!this['mesh']['boneAabb']){const _0x152225=this['_morphInst'+'ance']?this['_morphInst'+'ance']['morph']['_targets']:null;this['mesh']['_initBoneA'+'abbs'](_0x152225);}const _0x5accf0=this['mesh']['boneUsed'];let _0x435043=!(-0x11c6+0x2b*0x3e+0x75c);for(let _0x5d91b7=-0x128e+0x3d1+0xebd;_0x5d91b7<this['mesh']['boneAabb']['length'];_0x5d91b7++)_0x5accf0[_0x5d91b7]&&(sc['setFromTra'+'nsformedAa'+'bb'](this['mesh']['boneAabb'][_0x5d91b7],this['skinInstan'+'ce']['matrices'][_0x5d91b7]),_0x435043?(_0x435043=!(-0x43*0x7f+0x319*-0x1+0x1*0x2457),_0x528bcf['center']['copy'](sc['center']),_0x528bcf['halfExtent'+'s']['copy'](sc['halfExtent'+'s'])):_0x528bcf['add'](sc));_0x5df833=!(-0x1122+-0x8*-0x2e+0xfb2);}else{if(this['node']['_aabbVer']!==this['_aabbVer']||this['mesh']['_aabbVer']!==this['_aabbMeshV'+'er']){if(this['mesh']?(_0x528bcf['center']['copy'](this['mesh']['aabb']['center']),_0x528bcf['halfExtent'+'s']['copy'](this['mesh']['aabb']['halfExtent'+'s'])):(_0x528bcf['center']['set'](0x481*0x1+0xee6+-0x1367,-0x6*0x9e+-0xc4*-0x30+-0x210c,0x1*0x1801+-0x61*-0x43+-0x3164),_0x528bcf['halfExtent'+'s']['set'](0x1eef*-0x1+0x6f*-0x4f+-0x4*-0x104c,-0x2b8+-0x154b+0x2ab*0x9,0x16d5+-0x265d+0x4*0x3e2)),this['mesh']&&this['mesh']['morph']){const _0x4ab8b0=this['mesh']['morph']['aabb'];_0x528bcf['_expand'](_0x4ab8b0['getMin'](),_0x4ab8b0['getMax']());}_0x5df833=!(-0x451+0xb1b*0x1+-0x6ca),this['_aabbVer']=this['node']['_aabbVer'],this['_aabbMeshV'+'er']=this['mesh']['_aabbVer'];}}}return _0x5df833&&this['_aabb']['setFromTra'+'nsformedAa'+'bb'](_0x528bcf,this['node']['getWorldTr'+'ansform']()),this['_aabb'];}['clearShade'+'rs'](){this['_shaderCac'+'he']['forEach'](_0x60a185=>{_0x60a185['destroy']();}),this['_shaderCac'+'he']['clear']();}['getShaderI'+'nstance'](_0x2ab56b,_0x34b409,_0x181852,_0x3d166c,_0x98ba8d,_0x179c55,_0x4e2af5){var _0x47cb41;const _0x4323a4=this['_shaderDef'+'s'];Rr[-0xf6a*0x1+-0x80e+0x1778]=_0x2ab56b,Rr[-0x1ad7+0x40f*0x7+-0x191]=_0x34b409,Rr[-0x5*-0x4c5+-0xb*-0x275+-0x32de]=_0x4323a4,Rr[0x2*0x57c+0xbf*0x16+0xb*-0x27d]=_0x3d166c['hash'];const _0x4b6d99=By(Rr);let _0x445a79=this['_shaderCac'+'he']['get'](_0x4b6d99);if(!_0x445a79){const _0xd18aa9=this['_material'];if(_0x445a79=new CE(),_0x445a79['shader']=_0xd18aa9['variants']['get'](_0x4b6d99),_0x445a79['hashes']=new Uint32Array(Rr),!_0x445a79['shader']){Q['pushGpuMar'+'ker'](this['mesh']['device'],'Node:\x20'+this['node']['name']);const _0x8a3b75=_0xd18aa9['getShaderV'+'ariant']({'device':this['mesh']['device'],'scene':_0x181852,'objDefs':_0x4323a4,'cameraShaderParams':_0x3d166c,'pass':_0x2ab56b,'sortedLights':_0x4e2af5,'viewUniformFormat':_0x98ba8d,'viewBindGroupFormat':_0x179c55,'vertexFormat':(_0x47cb41=this['mesh']['vertexBuff'+'er'])==null?void(0x1ec5*0x1+0x8*-0x178+-0x1305):_0x47cb41['format']});Q['popGpuMark'+'er'](this['mesh']['device']),_0xd18aa9['variants']['set'](_0x4b6d99,_0x8a3b75),_0x445a79['shader']=_0x8a3b75;}this['_shaderCac'+'he']['set'](_0x4b6d99,_0x445a79);}return w['call'](()=>{IT['equals'](_0x445a79['hashes'],Rr)||w['errorOnce']('Hash\x20colli'+'sion\x20in\x20th'+'e\x20shader\x20c'+'ache\x20for\x20m'+'esh\x20instan'+'ce.\x20This\x20i'+'s\x20very\x20unl'+'ikely\x20but\x20'+'still\x20poss'+'ible.\x20Plea'+'se\x20report\x20'+'this\x20issue'+'.');}),_0x445a79;}set['material'](_0x26ab71){this['clearShade'+'rs']();const _0x296b46=this['_material'];_0x296b46&&_0x296b46['removeMesh'+'InstanceRe'+'f'](this),this['_material']=_0x26ab71,_0x26ab71&&(_0x26ab71['addMeshIns'+'tanceRef'](this),this['transparen'+'t']=_0x26ab71['transparen'+'t'],this['updateKey']());}get['material'](){return this['_material'];}['_updateSha'+'derDefs'](_0x778dd1){_0x778dd1!==this['_shaderDef'+'s']&&(this['_shaderDef'+'s']=_0x778dd1,this['clearShade'+'rs']());}set['calculateS'+'ortDistanc'+'e'](_0x537648){this['_calculate'+'SortDistan'+'ce']=_0x537648;}get['calculateS'+'ortDistanc'+'e'](){return this['_calculate'+'SortDistan'+'ce'];}set['receiveSha'+'dow'](_0x5b628b){this['_receiveSh'+'adow']!==_0x5b628b&&(this['_receiveSh'+'adow']=_0x5b628b,this['_updateSha'+'derDefs'](_0x5b628b?this['_shaderDef'+'s']&~wh:this['_shaderDef'+'s']|wh));}get['receiveSha'+'dow'](){return this['_receiveSh'+'adow'];}set['batching'](_0x174248){this['_updateSha'+'derDefs'](_0x174248?this['_shaderDef'+'s']|qc:this['_shaderDef'+'s']&~qc);}get['batching'](){return(this['_shaderDef'+'s']&qc)!==0x1bc*-0x5+-0x23b3*-0x1+0x197*-0x11;}set['skinInstan'+'ce'](_0x4ac299){this['_skinInsta'+'nce']=_0x4ac299,this['_updateSha'+'derDefs'](_0x4ac299?this['_shaderDef'+'s']|nl:this['_shaderDef'+'s']&~nl),this['_setupSkin'+'Update']();}get['skinInstan'+'ce'](){return this['_skinInsta'+'nce'];}set['morphInsta'+'nce'](_0x45c3a4){var _0x4d8052;(_0x4d8052=this['_morphInst'+'ance'])==null||_0x4d8052['destroy'](),this['_morphInst'+'ance']=_0x45c3a4;let _0x2095ad=this['_shaderDef'+'s'];_0x2095ad=_0x45c3a4&&_0x45c3a4['morph']['morphPosit'+'ions']?_0x2095ad|ll:_0x2095ad&~ll,_0x2095ad=_0x45c3a4&&_0x45c3a4['morph']['morphNorma'+'ls']?_0x2095ad|cl:_0x2095ad&~cl,_0x2095ad=_0x45c3a4&&_0x45c3a4['morph']['intRenderF'+'ormat']?_0x2095ad|hl:_0x2095ad&~hl,this['_updateSha'+'derDefs'](_0x2095ad);}get['morphInsta'+'nce'](){return this['_morphInst'+'ance'];}set['screenSpac'+'e'](_0x4ad5a2){this['_screenSpa'+'ce']!==_0x4ad5a2&&(this['_screenSpa'+'ce']=_0x4ad5a2,this['_updateSha'+'derDefs'](_0x4ad5a2?this['_shaderDef'+'s']|Eh:this['_shaderDef'+'s']&~Eh));}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['key'](_0x135a15){this['_sortKeyFo'+'rward']=_0x135a15;}get['key'](){return this['_sortKeyFo'+'rward'];}set['mask'](_0x50e0ee){const _0x3d732e=this['_shaderDef'+'s']&-0xb5*0x272+0x1*0x1afa5+0x473*0x3c;this['_updateSha'+'derDefs'](_0x3d732e|_0x50e0ee<<-0x587+-0x32*0x13+0x1*0x94d);}get['mask'](){return this['_shaderDef'+'s']>>-0x1*-0x19d6+-0x1c9d+0x2d7;}set['instancing'+'Count'](_0x543737){this['instancing'+'Data']&&(this['instancing'+'Data']['count']=_0x543737);}get['instancing'+'Count'](){return this['instancing'+'Data']?this['instancing'+'Data']['count']:0x2431+-0x92e+-0x1b03;}['destroy'](){var _0xb4ed58,_0x4385e7,_0x33b133;const _0x43d8a1=this['mesh'];_0x43d8a1&&(this['mesh']=null,_0x43d8a1['refCount']<-0x49d*0x4+-0x144+0x13b9&&_0x43d8a1['destroy']()),this['setRealtim'+'eLightmap'](Jr['lightmapPa'+'ramNames'][-0x1*0x1ad7+0x114b+0x4*0x263],null),this['setRealtim'+'eLightmap'](Jr['lightmapPa'+'ramNames'][-0x1*0x9df+0x177a*-0x1+0x3*0xb1e],null),(_0xb4ed58=this['_skinInsta'+'nce'])==null||_0xb4ed58['destroy'](),this['_skinInsta'+'nce']=null,(_0x4385e7=this['morphInsta'+'nce'])==null||_0x4385e7['destroy'](),this['morphInsta'+'nce']=null,this['clearShade'+'rs'](),this['material']=null,(_0x33b133=this['instancing'+'Data'])==null||_0x33b133['destroy']();}static['_prepareRe'+'nderStyleF'+'orArray'](_0x2e60ee,_0x277e25){if(_0x2e60ee){for(let _0x32e69f=0x1*-0x2543+-0x216c+0x46af;_0x32e69f<_0x2e60ee['length'];_0x32e69f++){_0x2e60ee[_0x32e69f]['_renderSty'+'le']=_0x277e25;const _0x1133c3=_0x2e60ee[_0x32e69f]['mesh'];qd['has'](_0x1133c3)||(qd['add'](_0x1133c3),_0x1133c3['prepareRen'+'derState'](_0x277e25));}qd['clear']();}}['_isVisible'](_0x1e08ae){return this['visible']?this['isVisibleF'+'unc']?this['isVisibleF'+'unc'](_0x1e08ae):(Xd['center']=this['aabb']['center'],Xd['radius']=this['_aabb']['halfExtent'+'s']['length'](),_0x1e08ae['frustum']['containsSp'+'here'](Xd)>0x1*0x1891+0xfcf+0x130*-0x22):!(0x1*0xc45+-0x1*-0x187b+-0x24bf);}['updateKey'](){const {material:_0x3a3dd3}=this;this['_sortKeyFo'+'rward']=this['_drawBucke'+'t']<<0x1022+-0x58d+-0xa7e|(_0x3a3dd3['alphaToCov'+'erage']||_0x3a3dd3['alphaTest']?0x3945de+0x96afa*-0x8+-0xc635*-0x6a:0x3d6*-0x5+-0x200f*0x1+0x333d)|_0x3a3dd3['id']&0x85*0x1602+-0x59fd*-0x28+-0x3*-0xcd5cf;}['setInstanc'+'ing'](_0xf4bb1c,_0x315db9=!(0x12d8+0xc89+0x1*-0x1f60)){_0xf4bb1c?(this['instancing'+'Data']=new bE(_0xf4bb1c['numVertice'+'s']),this['instancing'+'Data']['vertexBuff'+'er']=_0xf4bb1c,_0xf4bb1c['format']['instancing']=!(-0x12fe+0xb*-0x79+0x1831),this['cull']=_0x315db9):(this['instancing'+'Data']=null,this['cull']=!(-0x2a1*-0x8+-0x220f+0x1d*0x73)),this['_updateSha'+'derDefs'](_0xf4bb1c?this['_shaderDef'+'s']|ol:this['_shaderDef'+'s']&~ol);}['setIndirec'+'t'](_0x9459e3,_0x2158da){this['_allocIndi'+'rectData'](),this['indirectDa'+'ta']['map']['set']((_0x9459e3==null?void(-0x72*-0x51+-0x64*-0x3c+-0x3b82):_0x9459e3['camera'])??null,_0x2158da),this['mesh']['device']['mapsToClea'+'r']['add'](this['indirectDa'+'ta']['map']);}['getIndirec'+'tMetaData'](){var _0x259753;this['_allocIndi'+'rectData']();const _0x4ef5b7=(_0x259753=this['mesh'])==null?void(-0x3c0*0x6+0x1871*0x1+-0x47*0x7):_0x259753['primitive'][this['renderStyl'+'e']],_0x4624df=this['indirectDa'+'ta']['meshMetaDa'+'ta'];return _0x4624df[0x5*-0x250+-0x1*-0xf59+-0x3c9]=_0x4ef5b7['count'],_0x4624df[-0x164d+0x1*0x2456+-0xe08]=_0x4ef5b7['base'],_0x4624df[0x9ef+0x7b9+0x11a6*-0x1]=_0x4ef5b7['baseVertex'],_0x4624df;}['_allocIndi'+'rectData'](){this['indirectDa'+'ta']||(this['indirectDa'+'ta']=new AE());}['ensureMate'+'rial'](_0x1c0668){this['material']||(w['warn']('Mesh\x20attac'+'hed\x20to\x20ent'+'ity\x20\x27'+this['node']['name']+('\x27\x20does\x20not'+'\x20have\x20a\x20ma'+'terial,\x20us'+'ing\x20a\x20defa'+'ult\x20one.')),this['material']=Qn(_0x1c0668));}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['getParamet'+'er'](_0x31c0cc){return this['parameters'][_0x31c0cc];}['setParamet'+'er'](_0x20f6ad,_0x467b60,_0x1966f5=0x18d199377+-0x5b530e60+-0x31c68518){const _0x103212=this['parameters'][_0x20f6ad];_0x103212?(_0x103212['data']=_0x467b60,_0x103212['passFlags']=_0x1966f5):this['parameters'][_0x20f6ad]={'scopeId':null,'data':_0x467b60,'passFlags':_0x1966f5};}['setRealtim'+'eLightmap'](_0x45be53,_0x418523){const _0x4b88c5=this['getParamet'+'er'](_0x45be53);_0x4b88c5!==_0x418523&&(_0x4b88c5&&zi['decRef'](_0x4b88c5['data']),_0x418523?(zi['incRef'](_0x418523),this['setParamet'+'er'](_0x45be53,_0x418523)):this['deletePara'+'meter'](_0x45be53));}['deletePara'+'meter'](_0x4489bd){this['parameters'][_0x4489bd]&&delete this['parameters'][_0x4489bd];}['setParamet'+'ers'](_0x5b539f,_0x28a216){const _0x1940e6=this['parameters'];for(const _0x6cb804 in _0x1940e6){const _0x4ce7d3=_0x1940e6[_0x6cb804];_0x4ce7d3['passFlags']&_0x28a216&&(_0x4ce7d3['scopeId']||(_0x4ce7d3['scopeId']=_0x5b539f['scope']['resolve'](_0x6cb804)),_0x4ce7d3['scopeId']['setValue'](_0x4ce7d3['data']));}}['setLightma'+'pped'](_0x119b1b){_0x119b1b?this['mask']=(this['mask']|di)&-(0x6*0x679+-0x808*0x2+0x34*-0x70):(this['setRealtim'+'eLightmap'](Jr['lightmapPa'+'ramNames'][-0x1fb3+-0x1c3*0x3+-0x3*-0xc54],null),this['setRealtim'+'eLightmap'](Jr['lightmapPa'+'ramNames'][-0x13d7+-0x130d*-0x1+0xcb],null),this['_shaderDef'+'s']&=-(0x12a6+-0x1fc4+0x1*0x1ddf),this['mask']=(this['mask']|Ss)&-(-0x8ee+-0x1*0x623+0x8a*0x1c));}['setCustomA'+'abb'](_0x1a92c0){_0x1a92c0?this['_customAab'+'b']?this['_customAab'+'b']['copy'](_0x1a92c0):this['_customAab'+'b']=_0x1a92c0['clone']():(this['_customAab'+'b']=null,this['_aabbVer']=-(-0xb0*-0x12+0x1361+-0x1fc0)),this['_setupSkin'+'Update']();}['_setupSkin'+'Update'](){this['_skinInsta'+'nce']&&(this['_skinInsta'+'nce']['_updateBef'+'oreCull']=!this['_customAab'+'b']);}};h(Jr,'lightmapPa'+'ramNames',['texture_li'+'ghtMap','texture_di'+'rLightMap']);let He=Jr;const PE=[0x1*0x1d71+-0x1829+-0x34*0x1a,-0x15*0x179+-0x1145+0x3033,0x1d7a*-0x1+-0x12b1*0x2+0x42df,-0x13b7+-0x479+0x1832,0x17b2+0x2605+-0x3db4,0x621*-0x3+0xd*-0xeb+0x455*0x7],ME=[0x2037+-0x22*0xa6+-0xa2b*0x1,0x674+-0x1c17+0x15a4,-0x9b*0x1b+0x994+-0x7c*-0xe,0x1377+0x20c9+-0x1*0x3440,0x656+0x177f+0x15b*-0x16,-0x1653+-0x225b+0x38b0],A_=new _i();function C_(_0x1a881f,_0x32e68e){if(_0x1a881f&&!_0x32e68e||!_0x1a881f&&_0x32e68e)return!(-0x13e7*-0x1+0x3*0x5bd+-0x251d);if(_0x1a881f=_0x1a881f['data'],_0x32e68e=_0x32e68e['data'],_0x1a881f===_0x32e68e)return!(-0x227e+0x1*-0xd15+0x2f93);if(_0x1a881f instanceof Float32Array&&_0x32e68e instanceof Float32Array){if(_0x1a881f['length']!==_0x32e68e['length'])return!(-0x1b6f+0x6f9+-0x1477*-0x1);for(let _0x412ecc=-0x167*-0xc+-0x1883*-0x1+-0x13*0x22d;_0x412ecc<_0x1a881f['length'];_0x412ecc++)if(_0x1a881f[_0x412ecc]!==_0x32e68e[_0x412ecc])return!(-0x2460+0x1*0x17c1+0x194*0x8);return!(-0x1802+-0xb65*0x1+-0x35*-0xab);}return!(0x2*0x838+-0x26de+-0x1*-0x166f);}function DE(_0xea4b0e,_0x293f0e){for(const _0x34a43d in _0xea4b0e)if(_0xea4b0e['hasOwnProp'+'erty'](_0x34a43d)&&!C_(_0xea4b0e[_0x34a43d],_0x293f0e[_0x34a43d]))return!(-0x14e2+-0x1fe8+0xf*0x385);for(const _0x2582bd in _0x293f0e)if(_0x293f0e['hasOwnProp'+'erty'](_0x2582bd)&&!C_(_0x293f0e[_0x2582bd],_0xea4b0e[_0x2582bd]))return!(-0x1*-0x809+0x8c4+-0x10cc);return!(-0x1127+0x1d32+-0xc0b);}function jd(_0x44a7f9){return _0x44a7f9['node']['worldTrans'+'form']['scaleSign'];}class IE{constructor(_0x43c18f,_0x13f724,_0x545fb){this['device']=_0x43c18f,this['rootNode']=_0x13f724,this['scene']=_0x545fb,this['_init']=!(0x2*0x12ff+-0x1578+-0x1085),this['_batchGrou'+'ps']={},this['_batchGrou'+'pCounter']=0x2688+0x2*0x7f7+-0x3676,this['_batchList']=[],this['_dirtyGrou'+'ps']=[],this['_stats']={'createTime':0x0,'updateLastFrameTime':0x0};}['destroy'](){this['device']=null,this['rootNode']=null,this['scene']=null,this['_batchGrou'+'ps']={},this['_batchList']=[],this['_dirtyGrou'+'ps']=[];}['addGroup'](_0x2a1741,_0x525855,_0x18e22e,_0x4b0715,_0x54ecf8){if(_0x4b0715===void(-0x162d*-0x1+-0x1d12+0x6e5)&&(_0x4b0715=this['_batchGrou'+'pCounter'],this['_batchGrou'+'pCounter']++),this['_batchGrou'+'ps'][_0x4b0715]){w['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x4b0715+('\x20already\x20e'+'xists.'));return;}const _0x27ce52=new St(_0x4b0715,_0x2a1741,_0x525855,_0x18e22e,_0x54ecf8);return this['_batchGrou'+'ps'][_0x4b0715]=_0x27ce52,_0x27ce52;}['removeGrou'+'p'](_0x44ea9d){if(!this['_batchGrou'+'ps'][_0x44ea9d]){w['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x44ea9d+('\x20doesn\x27t\x20e'+'xist.'));return;}const _0x595cb6=[];for(let _0x4d98b5=-0x1*-0x1b6b+0x1f33+-0x3a9e;_0x4d98b5<this['_batchList']['length'];_0x4d98b5++)this['_batchList'][_0x4d98b5]['batchGroup'+'Id']===_0x44ea9d?this['destroyBat'+'ch'](this['_batchList'][_0x4d98b5]):_0x595cb6['push'](this['_batchList'][_0x4d98b5]);this['_batchList']=_0x595cb6,this['_removeMod'+'elsFromBat'+'chGroup'](this['rootNode'],_0x44ea9d),delete this['_batchGrou'+'ps'][_0x44ea9d];}['markGroupD'+'irty'](_0x24b4f7){this['_dirtyGrou'+'ps']['indexOf'](_0x24b4f7)<-0xc7*0xa+-0x4d6*-0x1+0x2f0&&this['_dirtyGrou'+'ps']['push'](_0x24b4f7);}['getGroupBy'+'Name'](_0xa4aed8){const _0x33a9a9=this['_batchGrou'+'ps'];for(const _0x156366 in _0x33a9a9)if(_0x33a9a9['hasOwnProp'+'erty'](_0x156366)&&_0x33a9a9[_0x156366]['name']===_0xa4aed8)return _0x33a9a9[_0x156366];return null;}['getBatches'](_0x598e25){const _0x23b30e=[],_0x3e2e2=this['_batchList']['length'];for(let _0xd054ff=-0x1699+0x1c92+-0x1*0x5f9;_0xd054ff<_0x3e2e2;_0xd054ff++){const _0x15d86a=this['_batchList'][_0xd054ff];_0x15d86a['batchGroup'+'Id']===_0x598e25&&_0x23b30e['push'](_0x15d86a);}return _0x23b30e;}['_removeMod'+'elsFromBat'+'chGroup'](_0x276773,_0x3d6c3a){if(_0x276773['enabled']){_0x276773['model']&&_0x276773['model']['batchGroup'+'Id']===_0x3d6c3a&&(_0x276773['model']['batchGroup'+'Id']=-(0xdab*-0x1+0xb*0x20b+0x3*-0x2ef)),_0x276773['render']&&_0x276773['render']['batchGroup'+'Id']===_0x3d6c3a&&(_0x276773['render']['batchGroup'+'Id']=-(0x694+-0x1*-0x2112+-0x27a5)),_0x276773['element']&&_0x276773['element']['batchGroup'+'Id']===_0x3d6c3a&&(_0x276773['element']['batchGroup'+'Id']=-(0x1*-0x158a+0x186+0x1405)),_0x276773['sprite']&&_0x276773['sprite']['batchGroup'+'Id']===_0x3d6c3a&&(_0x276773['sprite']['batchGroup'+'Id']=-(-0x1*-0x405+0x209e+-0x24a2));for(let _0x12522f=-0x154e+-0x1*0x23ad+-0x1f7*-0x1d;_0x12522f<_0x276773['_children']['length'];_0x12522f++)this['_removeMod'+'elsFromBat'+'chGroup'](_0x276773['_children'][_0x12522f],_0x3d6c3a);}}['insert'](_0x27e436,_0x38e07e,_0x14af38){const _0x3af06e=this['_batchGrou'+'ps'][_0x38e07e];w['assert'](_0x3af06e,'Invalid\x20ba'+'tch\x20'+_0x38e07e+'\x20insertion'),_0x3af06e&&_0x3af06e['_obj'][_0x27e436]['indexOf'](_0x14af38)<-0x32f*-0x9+-0xeaf+-0x4a8*0x3&&(_0x3af06e['_obj'][_0x27e436]['push'](_0x14af38),this['markGroupD'+'irty'](_0x38e07e));}['remove'](_0x41d54d,_0x3d9b65,_0x1b3708){const _0x143499=this['_batchGrou'+'ps'][_0x3d9b65];if(w['assert'](_0x143499,'Invalid\x20ba'+'tch\x20'+_0x3d9b65+'\x20insertion'),_0x143499){const _0x198675=_0x143499['_obj'][_0x41d54d]['indexOf'](_0x1b3708);_0x198675>=0x355*0x4+0x2*-0x3b3+-0xb*0x8a&&(_0x143499['_obj'][_0x41d54d]['splice'](_0x198675,0x8d5+-0x1569+0xc95),this['markGroupD'+'irty'](_0x3d9b65));}}['_extractRe'+'nder'](_0x53cf53,_0x2a556b,_0x3a3d16,_0x23fcc4){return _0x53cf53['render']&&(_0x2a556b=_0x23fcc4[_0x53cf53['render']['batchGroup'+'Id']]=_0x2a556b['concat'](_0x53cf53['render']['meshInstan'+'ces']),_0x53cf53['render']['removeFrom'+'Layers']()),_0x2a556b;}['_extractMo'+'del'](_0x428860,_0x451484,_0x474ec3,_0x44aefb){return _0x428860['model']&&_0x428860['model']['model']&&(_0x451484=_0x44aefb[_0x428860['model']['batchGroup'+'Id']]=_0x451484['concat'](_0x428860['model']['meshInstan'+'ces']),_0x428860['model']['removeMode'+'lFromLayer'+'s'](),_0x428860['model']['_batchGrou'+'p']=_0x474ec3),_0x451484;}['_extractEl'+'ement'](_0x4df188,_0x35434f,_0x2c2cd0){if(!_0x4df188['element'])return;let _0x108396=!(-0x210+-0x119d+0x13ae);_0x4df188['element']['_text']&&_0x4df188['element']['_text']['_model']['meshInstan'+'ces']['length']>-0x244a+-0x54c+0x2996*0x1?(_0x35434f['push'](_0x4df188['element']['_text']['_model']['meshInstan'+'ces'][0x15af+0xbc9*-0x2+-0x15*-0x17]),_0x4df188['element']['removeMode'+'lFromLayer'+'s'](_0x4df188['element']['_text']['_model']),_0x108396=!(0x3d*0x80+0x853+0x1*-0x26d3)):_0x4df188['element']['_image']&&(_0x35434f['push'](_0x4df188['element']['_image']['_renderabl'+'e']['meshInstan'+'ce']),_0x4df188['element']['removeMode'+'lFromLayer'+'s'](_0x4df188['element']['_image']['_renderabl'+'e']['model']),_0x4df188['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']&&(_0x35434f['push'](_0x4df188['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']),(!_0x4df188['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']||!_0x4df188['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k'])&&(_0x4df188['element']['_dirtifyMa'+'sk'](),_0x4df188['element']['_onPrerend'+'er']())),_0x108396=!(0x386*-0x7+-0x2040+0x136*0x2f)),_0x108396&&(_0x2c2cd0['_ui']=!(0x3*-0x80f+0x3d9+0x2*0xa2a),_0x4df188['element']['_batchGrou'+'p']=_0x2c2cd0);}['_collectAn'+'dRemoveMes'+'hInstances'](_0x1958dc,_0x4e3bf7){for(let _0x138edc=0xb*0x34a+0xbae+-0x17ee*0x2;_0x138edc<_0x4e3bf7['length'];_0x138edc++){const _0x1a0286=_0x4e3bf7[_0x138edc],_0x1be348=this['_batchGrou'+'ps'][_0x1a0286];if(!_0x1be348)continue;let _0x197cb4=_0x1958dc[_0x1a0286];_0x197cb4||(_0x197cb4=_0x1958dc[_0x1a0286]=[]);for(let _0x24dddf=0x25d5+0x10ae+0x5*-0xae7;_0x24dddf<_0x1be348['_obj']['model']['length'];_0x24dddf++)_0x197cb4=this['_extractMo'+'del'](_0x1be348['_obj']['model'][_0x24dddf],_0x197cb4,_0x1be348,_0x1958dc);for(let _0x4a32f1=-0x3*-0xc77+0x1e80+0x539*-0xd;_0x4a32f1<_0x1be348['_obj']['render']['length'];_0x4a32f1++)_0x197cb4=this['_extractRe'+'nder'](_0x1be348['_obj']['render'][_0x4a32f1],_0x197cb4,_0x1be348,_0x1958dc);for(let _0x19040f=-0x1c3a+0x1*0x839+-0x1*-0x1401;_0x19040f<_0x1be348['_obj']['element']['length'];_0x19040f++)this['_extractEl'+'ement'](_0x1be348['_obj']['element'][_0x19040f],_0x197cb4,_0x1be348);for(let _0x48a3b9=0xc83+-0x364*0x2+-0x5bb;_0x48a3b9<_0x1be348['_obj']['sprite']['length'];_0x48a3b9++){const _0x3981fe=_0x1be348['_obj']['sprite'][_0x48a3b9];_0x3981fe['sprite']&&_0x3981fe['sprite']['_meshInsta'+'nce']&&(_0x1be348['dynamic']||_0x3981fe['sprite']['sprite']['_renderMod'+'e']===ci)&&(_0x197cb4['push'](_0x3981fe['sprite']['_meshInsta'+'nce']),_0x3981fe['sprite']['removeMode'+'lFromLayer'+'s'](),_0x1be348['_sprite']=!(0x1*-0x6b6+-0xf5*-0xc+-0x1*0x4c6),_0x3981fe['sprite']['_batchGrou'+'p']=_0x1be348);}}}['generate'](_0x2009ec){const _0x208402={};_0x2009ec||(_0x2009ec=Object['keys'](this['_batchGrou'+'ps']));const _0x54adcc=[];for(let _0x2bc676=-0x4*0x8f+0x12e2*-0x2+0x2800;_0x2bc676<this['_batchList']['length'];_0x2bc676++){if(_0x2009ec['indexOf'](this['_batchList'][_0x2bc676]['batchGroup'+'Id'])<0x1*0x2608+-0x6*0x2a3+0xb1b*-0x2){_0x54adcc['push'](this['_batchList'][_0x2bc676]);continue;}this['destroyBat'+'ch'](this['_batchList'][_0x2bc676]);}if(this['_batchList']=_0x54adcc,this['_collectAn'+'dRemoveMes'+'hInstances'](_0x208402,_0x2009ec),_0x2009ec===this['_dirtyGrou'+'ps'])this['_dirtyGrou'+'ps']['length']=-0x3*-0xceb+0xa52+-0x1*0x3113;else{const _0x4bfa98=[];for(let _0x368593=0x17c6+0x2*0x1229+-0x3c18;_0x368593<this['_dirtyGrou'+'ps']['length'];_0x368593++)_0x2009ec['indexOf'](this['_dirtyGrou'+'ps'][_0x368593])<-0x153*-0xb+-0x296*0x3+-0x3*0x245&&_0x4bfa98['push'](this['_dirtyGrou'+'ps'][_0x368593]);this['_dirtyGrou'+'ps']=_0x4bfa98;}let _0x132107,_0xebc7d6,_0xa80a1,_0x279f54;for(const _0x4059af in _0x208402)if(_0x208402['hasOwnProp'+'erty'](_0x4059af)){if(_0x132107=_0x208402[_0x4059af],_0xa80a1=this['_batchGrou'+'ps'][_0x4059af],!_0xa80a1){w['error']('batch\x20grou'+'p\x20'+_0x4059af+'\x20not\x20found');continue;}_0xebc7d6=this['prepare'](_0x132107,_0xa80a1['dynamic'],_0xa80a1['maxAabbSiz'+'e'],_0xa80a1['_ui']||_0xa80a1['_sprite']);for(let _0x301049=-0x1874+0x1fa1+0xb*-0xa7;_0x301049<_0xebc7d6['length'];_0x301049++)_0x279f54=this['create'](_0xebc7d6[_0x301049],_0xa80a1['dynamic'],parseInt(_0x4059af,0x96e+0x1150*-0x1+0x7ec)),_0x279f54&&_0x279f54['addToLayer'+'s'](this['scene'],_0xa80a1['layers']);}}['prepare'](_0x4b0ab4,_0x538486,_0x435c13=Number['POSITIVE_I'+'NFINITY'],_0x33e82b){if(_0x4b0ab4['length']===-0x72*0x39+0x386+0x15dc)return[];const _0x58111e=_0x435c13*(-0xf5d+0x100f+-0xb2+0.5),_0x4becae=0x1242+0x257+-0x1099,_0x595db5=0x13d0c9637+-0x168659f1f+-0x72f*-0x29abc9,_0x36b6ff=new De(),_0x2792ca=new De();let _0x517d71=null,_0x3314a6;const _0x575aec=[];let _0xe9ab96=-0x1c41*-0x1+-0x12fa+0x5*-0x1db;_0x33e82b&&_0x4b0ab4['sort']((_0x37fcee,_0x326165)=>_0x37fcee['drawOrder']-_0x326165['drawOrder']);let _0x591bf3=_0x4b0ab4,_0x1e329e;const _0x19c750=_0x33e82b?function(_0x1f6fb0){_0x517d71?_0x517d71['add'](_0x1f6fb0['aabb']):_0x517d71=_0x1f6fb0['aabb']['clone'](),_0x1e329e['push'](_0x1f6fb0);}:function(_0x13f0c4){_0x1e329e['push'](_0x13f0c4);};for(;_0x591bf3['length']>0x140*0x12+0xa65*0x1+-0x1*0x20e5;){_0x575aec[_0xe9ab96]=[_0x591bf3[0x1c39+-0x69a*-0x4+-0x36a1]],_0x1e329e=[];const _0x2e8652=_0x591bf3[0x2da+0x453+-0x1*0x72d]['material'],_0x16b535=_0x591bf3[-0x7f1+0x133*0x3+-0x1*-0x458]['layer'],_0x4dece4=_0x591bf3[0x18f*0x18+-0x22f4+0x4*-0x9d]['_shaderDef'+'s'],_0xe934c4=_0x591bf3[0x156f+0x6e5*0x3+0x1*-0x2a1e]['parameters'],_0x1d4ef5=_0x591bf3[0x1*-0x1471+-0x12f5+-0x52*-0x7b]['stencilFro'+'nt'];let _0x1d7f9c=_0x591bf3[-0x20d1+0x55*0x17+0x192e]['mesh']['vertexBuff'+'er']['getNumVert'+'ices']();const _0x2a681a=_0x591bf3[-0x22dc+-0x8c3*-0x3+0x1b7*0x5]['drawOrder'];_0x36b6ff['copy'](_0x591bf3[0x7*0x53b+-0x13*-0x115+-0x392c]['aabb']);const _0x2d99b9=jd(_0x591bf3[0xae+0x1e91+-0x1f3f*0x1]),_0x3029f1=_0x591bf3[0x10f3*0x2+-0x18d0+-0x916]['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh'],_0x439a21=_0x591bf3[0x2*-0x3b9+-0x114f+0x18c1]['mesh']['primitive'][-0xd93+-0x63c*-0x6+-0x17d5]['indexed'];_0x517d71=null;for(let _0x294bf0=0xab2+0x143*-0x7+-0x1dc;_0x294bf0<_0x591bf3['length'];_0x294bf0++){const _0x1cef6a=_0x591bf3[_0x294bf0];if(_0x538486&&_0x575aec[_0xe9ab96]['length']>=_0x4becae){_0x1e329e=_0x1e329e['concat'](_0x591bf3['slice'](_0x294bf0));break;}if(_0x2e8652!==_0x1cef6a['material']||_0x16b535!==_0x1cef6a['layer']||_0x3029f1!==_0x1cef6a['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh']||_0x439a21!==_0x1cef6a['mesh']['primitive'][-0x2e*0x80+-0xc55+-0x14f*-0x1b]['indexed']||_0x4dece4!==_0x1cef6a['_shaderDef'+'s']||_0x1d7f9c+_0x1cef6a['mesh']['vertexBuff'+'er']['getNumVert'+'ices']()>_0x595db5){_0x19c750(_0x1cef6a);continue;}if(_0x2792ca['copy'](_0x36b6ff),_0x2792ca['add'](_0x1cef6a['aabb']),_0x2792ca['halfExtent'+'s']['x']>_0x58111e||_0x2792ca['halfExtent'+'s']['y']>_0x58111e||_0x2792ca['halfExtent'+'s']['z']>_0x58111e){_0x19c750(_0x1cef6a);continue;}if(_0x1d4ef5&&(!(_0x3314a6=_0x1cef6a['stencilFro'+'nt'])||_0x1d4ef5['func']!==_0x3314a6['func']||_0x1d4ef5['zpass']!==_0x3314a6['zpass'])){_0x19c750(_0x1cef6a);continue;}if(_0x2d99b9!==jd(_0x1cef6a)){_0x19c750(_0x1cef6a);continue;}if(!DE(_0xe934c4,_0x1cef6a['parameters'])){_0x19c750(_0x1cef6a);continue;}if(_0x33e82b&&_0x517d71&&_0x517d71['intersects'](_0x1cef6a['aabb'])&&_0x1cef6a['drawOrder']!==_0x2a681a){_0x19c750(_0x1cef6a);continue;}_0x36b6ff['add'](_0x1cef6a['aabb']),_0x1d7f9c+=_0x1cef6a['mesh']['vertexBuff'+'er']['getNumVert'+'ices'](),_0x575aec[_0xe9ab96]['push'](_0x1cef6a);}_0xe9ab96++,_0x591bf3=_0x1e329e;}return _0x575aec;}['collectBat'+'chedMeshDa'+'ta'](_0x56e66e,_0x4c2499){let _0x5163a0=null,_0x440396=-0x2*0x773+-0x13a7+0x228d,_0x47073a=0x41*0x1f+0x1964+-0x83*0x41,_0x347e77=null;for(let _0x55dace=-0x14e3*0x1+0x17*0x1ac+0x5db*-0x3;_0x55dace<_0x56e66e['length'];_0x55dace++)if(_0x56e66e[_0x55dace]['visible']){const _0x1c4eb1=_0x56e66e[_0x55dace]['mesh'],_0x21bfa5=_0x1c4eb1['vertexBuff'+'er']['numVertice'+'s'];if(_0x440396+=_0x21bfa5,_0x1c4eb1['primitive'][0x14c5+-0x109d+0x4c*-0xe]['indexed'])_0x47073a+=_0x1c4eb1['primitive'][0x70+-0x2*0x700+0xd90]['count'];else{const _0x4b12bf=_0x1c4eb1['primitive'][0x11*0x1b9+0x1*0x186d+0xb*-0x4e2]['type'];(_0x4b12bf===oa||_0x4b12bf===Er)&&_0x1c4eb1['primitive'][0x2096+-0x1*0x10db+0x1*-0xfbb]['count']===-0x220+0x1*-0x1cd+-0x1*-0x3f1&&(_0x47073a+=0x1818+0x2*-0xd0f+-0x20c*-0x1);}if(!_0x5163a0){_0x347e77=_0x56e66e[_0x55dace]['material'],_0x5163a0={};const _0x964733=_0x1c4eb1['vertexBuff'+'er']['format']['elements'];for(let _0x4b94fc=0x9f5+0x1a0+-0xb95;_0x4b94fc<_0x964733['length'];_0x4b94fc++){const _0x1ad057=_0x964733[_0x4b94fc]['name'];_0x5163a0[_0x1ad057]={'numComponents':_0x964733[_0x4b94fc]['numCompone'+'nts'],'dataType':_0x964733[_0x4b94fc]['dataType'],'normalize':_0x964733[_0x4b94fc]['normalize'],'count':0x0};}_0x4c2499&&(_0x5163a0[us]={'numComponents':0x1,'dataType':Ve,'normalize':!(0x6*-0x496+0x6c*0x34+0x595),'count':0x0});}}return{'streams':_0x5163a0,'batchNumVerts':_0x440396,'batchNumIndices':_0x47073a,'material':_0x347e77};}['create'](_0x3283d4,_0x317781,_0x5d9ff4){const _0x7a270b=de();this['_init']||(this['vertexForm'+'ats']={},this['_init']=!(0x103*0x9+0x22c+0xb47*-0x1));let _0x4050cb=null,_0x4e8941,_0x191821,_0x164be2,_0x26046b=null;const _0x5d1f52=this['collectBat'+'chedMeshDa'+'ta'](_0x3283d4,_0x317781);if(_0x5d1f52['streams']){const _0x386aa4=_0x5d1f52['streams'];let _0x3901c4=_0x5d1f52['material'];const _0x154d46=_0x5d1f52['batchNumVe'+'rts'],_0x2f61a3=_0x5d1f52['batchNumIn'+'dices'];_0x26046b=new g_(_0x3283d4,_0x317781,_0x5d9ff4),this['_batchList']['push'](_0x26046b);let _0x5c5619,_0x1d6a5e,_0x410f15,_0x3ed965,_0x35b38a=-0x73f+-0x4c9+0xc08,_0xe9a962=0x23ba+-0x2052+-0x1b4*0x2,_0xc55be3;const _0x10c0c2=_0x154d46<=0x11445+-0x1*0x13c87+-0x1*-0x12841?Uint16Array:Uint32Array,_0x506586=new _0x10c0c2(_0x2f61a3);for(_0x4e8941 in _0x386aa4)_0x4050cb=_0x386aa4[_0x4e8941],_0x4050cb['typeArrayT'+'ype']=wn[_0x4050cb['dataType']],_0x4050cb['elementByt'+'eSize']=No[_0x4050cb['dataType']],_0x4050cb['buffer']=new _0x4050cb['typeArrayT'+'ype'](_0x154d46*_0x4050cb['numCompone'+'nts']);for(let _0x1e7399=0x2347+-0x3*-0x3c2+-0x2e8d;_0x1e7399<_0x3283d4['length'];_0x1e7399++)if(_0x3283d4[_0x1e7399]['visible']){_0x191821=_0x3283d4[_0x1e7399]['mesh'],_0x164be2=_0x191821['vertexBuff'+'er']['numVertice'+'s'],_0x317781||(_0xc55be3=_0x3283d4[_0x1e7399]['node']['getWorldTr'+'ansform']());for(_0x4e8941 in _0x386aa4)if(_0x4e8941!==us){_0x4050cb=_0x386aa4[_0x4e8941];const _0x4f2bc7=new _0x4050cb['typeArrayT'+'ype'](_0x4050cb['buffer']['buffer'],_0x4050cb['elementByt'+'eSize']*_0x4050cb['count']),_0x517c84=_0x191821['getVertexS'+'tream'](_0x4e8941,_0x4f2bc7)*_0x4050cb['numCompone'+'nts'];if(_0x4050cb['count']+=_0x517c84,!_0x317781&&_0x4050cb['numCompone'+'nts']>=0x1c8b+0x1*0x1d4a+-0x1346*0x3){if(_0x4e8941===Me){const _0xf768ec=_0xc55be3['data'],_0x2aa554=_0xf768ec[-0xa3f*0x1+0x1ac2+-0x1083],_0x1faef2=_0xf768ec[0x1c9e+0x16fd+-0x339a],_0x5037c5=_0xf768ec[-0x1d78+0x8*0x19+0x1cb2],_0x53265f=_0xf768ec[-0xd96+0x19d4+-0xc3a],_0x5648b4=_0xf768ec[-0x834+-0x69c+0xed5],_0x172cb6=_0xf768ec[-0x1fc8+-0x1*0xff7+0x7*0x6d3],_0x6ca68a=_0xf768ec[0x57*0x2a+-0x2*-0x10d+-0x1058],_0x576152=_0xf768ec[-0xb*0x9d+0x59a+0x12e],_0x40d532=_0xf768ec[0xb60+-0xc8*-0x11+-0xc4f*0x2],_0x13f145=_0xf768ec[0x21e5+-0x26e9+-0x1b0*-0x3],_0x4d3817=_0xf768ec[0x1*0x7d+0x1963+-0x19d3],_0x471644=_0xf768ec[0x1*0x23ce+0x7*0x2ef+-0x3849];let _0x251f3f,_0x247e62,_0x3cca7e;for(let _0x2a2b61=-0x10*0xe5+-0x1*0x1273+0x20c3*0x1;_0x2a2b61<_0x517c84;_0x2a2b61+=_0x4050cb['numCompone'+'nts'])_0x251f3f=_0x4f2bc7[_0x2a2b61],_0x247e62=_0x4f2bc7[_0x2a2b61+(0x197*0xe+-0x2*-0x1354+0x1f7*-0x1f)],_0x3cca7e=_0x4f2bc7[_0x2a2b61+(0xe72*0x1+0x1138+0x1fa8*-0x1)],_0x4f2bc7[_0x2a2b61]=_0x251f3f*_0x2aa554+_0x247e62*_0x53265f+_0x3cca7e*_0x6ca68a+_0x13f145,_0x4f2bc7[_0x2a2b61+(0x4ac+-0xa9*0x3+0x4*-0xac)]=_0x251f3f*_0x1faef2+_0x247e62*_0x5648b4+_0x3cca7e*_0x576152+_0x4d3817,_0x4f2bc7[_0x2a2b61+(0x2144+0xd76*-0x1+-0x1*0x13cc)]=_0x251f3f*_0x5037c5+_0x247e62*_0x172cb6+_0x3cca7e*_0x40d532+_0x471644;}else{if(_0x4e8941===gs||_0x4e8941===yi){A_['invertMat4'](_0xc55be3)['transpose']();const [_0x8f0a62,_0x26ce0e,_0x3959c2,_0x258191,_0x381ccf,_0x4055b5,_0x4d78a9,_0x1f31b2,_0x8dcee3]=A_['data'];let _0x22b6b4,_0xcc6965,_0x4b4799;for(let _0x34ea88=0x267e+0xce8+0x1*-0x3366;_0x34ea88<_0x517c84;_0x34ea88+=_0x4050cb['numCompone'+'nts'])_0x22b6b4=_0x4f2bc7[_0x34ea88],_0xcc6965=_0x4f2bc7[_0x34ea88+(0x143d*-0x1+0x10d0+0x2*0x1b7)],_0x4b4799=_0x4f2bc7[_0x34ea88+(-0x1*-0x1f1a+0x1c7+-0x99*0x37)],_0x4f2bc7[_0x34ea88]=_0x22b6b4*_0x8f0a62+_0xcc6965*_0x258191+_0x4b4799*_0x4d78a9,_0x4f2bc7[_0x34ea88+(0x1862*0x1+0x100a+-0x286b)]=_0x22b6b4*_0x26ce0e+_0xcc6965*_0x381ccf+_0x4b4799*_0x1f31b2,_0x4f2bc7[_0x34ea88+(-0x4*0x4f0+-0x9f1+0x1db3)]=_0x22b6b4*_0x3959c2+_0xcc6965*_0x4055b5+_0x4b4799*_0x8dcee3;}}}}if(_0x317781){_0x4050cb=_0x386aa4[us];for(let _0x40be91=0xac7+-0xb47+0x80;_0x40be91<_0x164be2;_0x40be91++)_0x4050cb['buffer'][_0x4050cb['count']++]=_0x1e7399;}if(_0x191821['primitive'][0x5a2+0x1*-0x1a2f+-0x1*-0x148d]['indexed']){_0x5c5619=_0x191821['primitive'][-0x1*0x1463+0x1336+-0x2b*-0x7]['base'],_0x1d6a5e=_0x191821['primitive'][-0x3*-0x111+0x332*-0x4+0xdf*0xb]['baseVertex']||0xcf2+0xb57+-0x1849,_0x410f15=_0x191821['primitive'][-0x167c+0x193a+-0x2be]['count'];const _0x302348=_0x191821['indexBuffe'+'r'][-0xcf6+-0x5ad*-0x1+0x749*0x1]['getFormat']();_0x3ed965=new Sh[_0x302348](_0x191821['indexBuffe'+'r'][-0x1*0x1a72+-0x2528+0x3f9a]['storage']);}else{_0x1d6a5e=0x5f5+0xe24+-0x1419;const _0x48ce40=_0x191821['primitive'][-0x6d0+0x18e*-0x7+-0x6*-0x2f3]['type'];if(_0x48ce40===oa||_0x48ce40===Er){if(_0x191821['primitive'][-0x4e5*0x2+0x256f+-0x3f3*0x7]['count']===-0x11*-0x16a+0x2597+-0x3d9d)_0x5c5619=-0x1*0x337+0xc4*0xd+-0x19*0x45,_0x410f15=-0x1816+0x1fc+0x1620,_0x3ed965=_0x48ce40===oa?PE:ME;else{_0x410f15=0x1dcb+-0x1*0x1fe4+0x219;continue;}}}for(let _0x50c423=0xe84+-0x25*0x53+-0x285;_0x50c423<_0x410f15;_0x50c423++)_0x506586[_0x50c423+_0xe9a962]=_0x3ed965[_0x5c5619+_0x50c423]+_0x1d6a5e+_0x35b38a;_0xe9a962+=_0x410f15,_0x35b38a+=_0x164be2;}_0x191821=new Ge(this['device']);for(_0x4e8941 in _0x386aa4)_0x4050cb=_0x386aa4[_0x4e8941],_0x191821['setVertexS'+'tream'](_0x4e8941,_0x4050cb['buffer'],_0x4050cb['numCompone'+'nts'],void(-0x1aff*-0x1+-0x1edd*-0x1+-0x1cee*0x2),_0x4050cb['dataType'],_0x4050cb['normalize']);_0x506586['length']>0x22e6+-0x9ab*0x4+0x1*0x3c6&&_0x191821['setIndices'](_0x506586),_0x191821['update'](js,!(0x371*0x1+0x2d*0x8e+-0x1c66)),_0x317781&&(_0x3901c4=_0x3901c4['clone'](),_0x3901c4['update']());const _0x5bf187=new He(_0x191821,_0x3901c4,this['rootNode']);_0x5bf187['castShadow']=_0x26046b['origMeshIn'+'stances'][-0x3ee+-0x1*0x413+0x801]['castShadow'],_0x5bf187['parameters']=_0x26046b['origMeshIn'+'stances'][-0xb63*-0x1+-0xa61*0x1+-0x102]['parameters'],_0x5bf187['layer']=_0x26046b['origMeshIn'+'stances'][-0x9*-0xa1+-0x5*-0x57b+-0x2110]['layer'],_0x5bf187['_shaderDef'+'s']=_0x26046b['origMeshIn'+'stances'][0xe5*0x18+-0x1592+0x1*0x1a]['_shaderDef'+'s'],_0x5bf187['batching']=!(-0x5*0x661+0x24b2+0x1*-0x4cd),_0x5bf187['cull']=_0x26046b['origMeshIn'+'stances'][-0xc2a*0x3+0x2*0x80b+0x1468]['cull'];const _0x274f29=this['_batchGrou'+'ps'][_0x5d9ff4];if(_0x274f29&&_0x274f29['_ui']&&(_0x5bf187['cull']=!(-0x1af*-0x15+0x559*0x1+0x28b3*-0x1)),_0x317781){const _0x304d73=[];for(let _0x1e60f6=0x79*0x2c+0x1c68+0x1*-0x3134;_0x1e60f6<_0x26046b['origMeshIn'+'stances']['length'];_0x1e60f6++)_0x304d73['push'](_0x26046b['origMeshIn'+'stances'][_0x1e60f6]['node']);_0x5bf187['skinInstan'+'ce']=new y_(this['device'],_0x304d73,this['rootNode']);}_0x5bf187['_updateAab'+'b']=!(-0x1e7a+0x202b+-0x1b0),_0x5bf187['drawOrder']=_0x26046b['origMeshIn'+'stances'][-0x961+0x8*-0x2e9+-0x9*-0x3a1]['drawOrder'],_0x5bf187['stencilFro'+'nt']=_0x26046b['origMeshIn'+'stances'][0xa*0x386+-0x1133+-0x1209]['stencilFro'+'nt'],_0x5bf187['stencilBac'+'k']=_0x26046b['origMeshIn'+'stances'][0x2b*-0x6b+-0x1349*0x1+0x2542]['stencilBac'+'k'],_0x5bf187['flipFacesF'+'actor']=jd(_0x26046b['origMeshIn'+'stances'][-0xc7d+-0x123+0xda0]),_0x5bf187['castShadow']=_0x26046b['origMeshIn'+'stances'][0x1c6+0x44d*-0x3+-0xb21*-0x1]['castShadow'],_0x26046b['meshInstan'+'ce']=_0x5bf187,_0x26046b['updateBoun'+'dingBox']();}return this['_stats']['createTime']+=de()-_0x7a270b,_0x26046b;}['updateAll'](){this['_dirtyGrou'+'ps']['length']>-0x38*0xa4+-0x84+-0x89*-0x44&&this['generate'](this['_dirtyGrou'+'ps']);const _0x29b5d6=de();for(let _0x571d6b=0x2dd*-0x3+0x6d*-0x1+-0x4*-0x241;_0x571d6b<this['_batchList']['length'];_0x571d6b++)this['_batchList'][_0x571d6b]['dynamic']&&this['_batchList'][_0x571d6b]['updateBoun'+'dingBox']();this['_stats']['updateLast'+'FrameTime']=de()-_0x29b5d6;}['clone'](_0x2cda77,_0x44e6fe){const _0x497275=new g_(_0x44e6fe,_0x2cda77['dynamic'],_0x2cda77['batchGroup'+'Id']);this['_batchList']['push'](_0x497275);const _0x2c05f6=[];for(let _0x69bc08=0x9aa+0x871+-0x609*0x3;_0x69bc08<_0x44e6fe['length'];_0x69bc08++)_0x2c05f6['push'](_0x44e6fe[_0x69bc08]['node']);return _0x497275['meshInstan'+'ce']=new He(_0x2cda77['meshInstan'+'ce']['mesh'],_0x2cda77['meshInstan'+'ce']['material'],_0x2cda77['meshInstan'+'ce']['node']),_0x497275['meshInstan'+'ce']['_updateAab'+'b']=!(0x1*-0x1546+-0xa17+0x2da*0xb),_0x497275['meshInstan'+'ce']['parameters']=_0x44e6fe[0x2435+0x17e*0xe+-0x3919]['parameters'],_0x497275['meshInstan'+'ce']['cull']=_0x44e6fe[0x2215+-0xb7d+-0x4*0x5a6]['cull'],_0x497275['meshInstan'+'ce']['layer']=_0x44e6fe[-0x1*-0x1892+-0x1*-0x2627+0x3eb9*-0x1]['layer'],_0x2cda77['dynamic']&&(_0x497275['meshInstan'+'ce']['skinInstan'+'ce']=new y_(this['device'],_0x2c05f6,this['rootNode'])),_0x497275['meshInstan'+'ce']['castShadow']=_0x2cda77['meshInstan'+'ce']['castShadow'],_0x497275;}['destroyBat'+'ch'](_0x47783c){_0x47783c['destroy'](this['scene'],this['_batchGrou'+'ps'][_0x47783c['batchGroup'+'Id']]['layers']);}}const P_='uSceneColo'+'rMap';class LE extends ys{constructor(){super(...arguments),h(this,'colorRende'+'rTarget',null),h(this,'source',null);}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']);}['shouldReal'+'locate'](_0x5201fa,_0x33400e,_0x47bbe2){if((_0x5201fa==null?void(0x39*0x95+-0xc*0x17f+-0xf39):_0x5201fa['colorBuffe'+'r']['format'])!==_0x47bbe2)return!(0x9b8+0x1f60+-0x2918);const _0x3076e7=(_0x33400e==null?void(-0x1a*0xa3+0x26b*0x7+0x1*-0x5f):_0x33400e['width'])||this['device']['width'],_0x2fc7b0=(_0x33400e==null?void(0x1329+0xa84+-0x1dad):_0x33400e['height'])||this['device']['height'];return!_0x5201fa||_0x3076e7!==_0x5201fa['width']||_0x2fc7b0!==_0x5201fa['height'];}['allocateRe'+'nderTarget'](_0x480ad5,_0x2aac45,_0x24e39a,_0x27607f){const _0x3985ad=new _e(_0x24e39a,{'name':P_,'format':_0x27607f,'width':_0x2aac45?_0x2aac45['colorBuffe'+'r']['width']:_0x24e39a['width'],'height':_0x2aac45?_0x2aac45['colorBuffe'+'r']['height']:_0x24e39a['height'],'mipmaps':!(-0x2*-0xbb6+0x258c+0x1*-0x3cf8),'minFilter':ma,'magFilter':vt,'addressU':ue,'addressV':ue});return _0x480ad5?(_0x480ad5['destroyFra'+'meBuffers'](),_0x480ad5['_colorBuff'+'er']=_0x3985ad,_0x480ad5['_colorBuff'+'ers']=[_0x3985ad]):_0x480ad5=new gt({'name':'ColorGrabR'+'T','colorBuffer':_0x3985ad,'depth':!(-0x6*-0xa5+0xb51+0x1*-0xf2e),'stencil':!(-0x19da+-0x1ce3+0x36be),'autoResolve':!(-0x5*-0x269+-0x19b6+0xdaa)}),_0x480ad5;}['releaseRen'+'derTarget'](_0x58ab88){_0x58ab88&&(_0x58ab88['destroyTex'+'tureBuffer'+'s'](),_0x58ab88['destroy']());}['frameUpdat'+'e'](){const _0x570640=this['device'],_0x288634=this['source'],_0x246042=(_0x288634==null?void(-0x2278+-0xb5c*-0x2+-0x5e*-0x20):_0x288634['colorBuffe'+'r']['format'])??this['device']['backBuffer'+'Format'];this['shouldReal'+'locate'](this['colorRende'+'rTarget'],_0x288634==null?void(0x75f+-0x1*0x140e+0xcaf):_0x288634['colorBuffe'+'r'],_0x246042)&&(this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']),this['colorRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['colorRende'+'rTarget'],_0x288634,_0x570640,_0x246042));const _0x3c3eab=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x570640['scope']['resolve'](P_)['setValue'](_0x3c3eab);}['execute'](){const _0x5653c1=this['device'];Q['pushGpuMar'+'ker'](_0x5653c1,'GRAB-COLOR');const _0x562af7=this['source'],_0x4a18aa=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x5653c1['isWebGPU']?(_0x5653c1['copyRender'+'Target'](_0x562af7,this['colorRende'+'rTarget'],!(-0x2430+-0x1f*-0x11f+0x16f),!(-0x10d1+0x41c+-0x65b*-0x2)),_0x5653c1['mipmapRend'+'erer']['generate'](this['colorRende'+'rTarget']['colorBuffe'+'r']['impl'])):(_0x5653c1['copyRender'+'Target'](_0x562af7,this['colorRende'+'rTarget'],!(-0x2062+0x36*0x69+0xa3c),!(0x1c*0x9+-0x2*-0x11ad+-0x2455)),_0x5653c1['activeText'+'ure'](_0x5653c1['maxCombine'+'dTextures']-(-0x23b2*0x1+-0x78c+-0x2b3f*-0x1)),_0x5653c1['bindTextur'+'e'](_0x4a18aa),_0x5653c1['gl']['generateMi'+'pmap'](_0x4a18aa['impl']['_glTarget'])),Q['popGpuMark'+'er'](_0x5653c1);}}const M_='uSceneDept'+'hMap';class RE extends ys{constructor(_0x3df048,_0x1cac3a){super(_0x3df048),h(this,'depthRende'+'rTarget',null),h(this,'camera',null),this['camera']=_0x1cac3a;}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']);}['shouldReal'+'locate'](_0x536343,_0x171eec){const _0x45e572=(_0x171eec==null?void(-0x2556+-0x231c+0x34b*0x16):_0x171eec['width'])||this['device']['width'],_0x32f5ab=(_0x171eec==null?void(-0x23a1+0x1*0x12ad+0x10f4):_0x171eec['height'])||this['device']['height'];return!_0x536343||_0x45e572!==_0x536343['width']||_0x32f5ab!==_0x536343['height'];}['allocateRe'+'nderTarget'](_0x813bce,_0x5967e6,_0x444a49,_0x2aa6ce,_0x14bbc7){const _0x46ea60=new _e(_0x444a49,{'name':M_,'format':_0x2aa6ce,'width':_0x5967e6?_0x5967e6['colorBuffe'+'r']['width']:_0x444a49['width'],'height':_0x5967e6?_0x5967e6['colorBuffe'+'r']['height']:_0x444a49['height'],'mipmaps':!(-0x440+-0x1d*0x91+0x14ae),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});return _0x813bce?(_0x813bce['destroyFra'+'meBuffers'](),_0x14bbc7?_0x813bce['_depthBuff'+'er']=_0x46ea60:(_0x813bce['_colorBuff'+'er']=_0x46ea60,_0x813bce['_colorBuff'+'ers']=[_0x46ea60])):_0x813bce=new gt({'name':'DepthGrabR'+'T','colorBuffer':_0x14bbc7?null:_0x46ea60,'depthBuffer':_0x14bbc7?_0x46ea60:null,'depth':!_0x14bbc7,'stencil':_0x444a49['supportsSt'+'encil'],'autoResolve':!(-0x467+0x1*0x64d+-0x1e5*0x1)}),_0x813bce;}['releaseRen'+'derTarget'](_0x9b55f9){_0x9b55f9&&(_0x9b55f9['destroyTex'+'tureBuffer'+'s'](),_0x9b55f9['destroy']());}['before'](){var _0xa581ea,_0x3284ff;const _0x3cc8b4=this['camera'],_0x4c4bbe=this['device'],_0xc30e1c=(_0x3cc8b4==null?void(0x2*0x6d9+-0x1*0xb45+0x1*-0x26d):_0x3cc8b4['renderTarg'+'et'])??_0x4c4bbe['backBuffer'];let _0x440bd0=!(0x61a+0x1a3*-0x17+-0x1f8b*-0x1),_0x221d4b=_0xc30e1c['stencil']?sd:$i;_0x4c4bbe['isWebGPU']&&_0xc30e1c['samples']>0xbf*-0x1d+-0xe03+0x23a7*0x1&&(_0x221d4b=Ji,_0x440bd0=!(-0x9*0x38c+-0x1b3e+-0x11*-0x37b));const _0x1b0ae6=((_0xa581ea=_0x3cc8b4['renderTarg'+'et'])==null?void(-0x391*0x3+0x4d5*-0x1+-0x38*-0x47):_0xa581ea['depthBuffe'+'r'])??((_0x3284ff=_0x3cc8b4['renderTarg'+'et'])==null?void(0x1*-0x1e49+0x1fc3+-0x17a):_0x3284ff['colorBuffe'+'r']);this['shouldReal'+'locate'](this['depthRende'+'rTarget'],_0x1b0ae6)&&(this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']),this['depthRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['depthRende'+'rTarget'],_0x3cc8b4['renderTarg'+'et'],_0x4c4bbe,_0x221d4b,_0x440bd0));const _0x2733f0=_0x440bd0?this['depthRende'+'rTarget']['depthBuffe'+'r']:this['depthRende'+'rTarget']['colorBuffe'+'r'];_0x4c4bbe['scope']['resolve'](M_)['setValue'](_0x2733f0);}['execute'](){const _0x380a8c=this['device'];if(Q['pushGpuMar'+'ker'](_0x380a8c,'GRAB-DEPTH'),_0x380a8c['isWebGL2']&&_0x380a8c['renderTarg'+'et']['samples']>-0x2e2+0x193+0x18*0xe){const _0x106d89=_0x380a8c['renderTarg'+'et']['impl']['_glFrameBu'+'ffer'],_0x25bcb2=this['depthRende'+'rTarget'];_0x380a8c['renderTarg'+'et']=_0x25bcb2,_0x380a8c['updateBegi'+'n'](),this['depthRende'+'rTarget']['impl']['internalRe'+'solve'](_0x380a8c,_0x106d89,_0x25bcb2['impl']['_glFrameBu'+'ffer'],this['depthRende'+'rTarget'],_0x380a8c['gl']['DEPTH_BUFF'+'ER_BIT']);}else _0x380a8c['copyRender'+'Target'](_0x380a8c['renderTarg'+'et'],this['depthRende'+'rTarget'],!(-0xfa1+0x1fd7+-0x3*0x567),!(-0x4d*-0x27+0x29*0xc7+-0x2b9a*0x1));Q['popGpuMark'+'er'](_0x380a8c);}}class vv{constructor(){h(this,'_gammaCorr'+'ection',Xc),h(this,'_toneMappi'+'ng',sm),h(this,'_srgbRende'+'rTarget',!(-0x25e5+0x476+-0x1ac*-0x14)),h(this,'_ssaoEnabl'+'ed',!(-0x11b0+0x8dc+-0x11*-0x85)),h(this,'_fog',Kn),h(this,'_sceneDept'+'hMapLinear',!(-0x1627+-0x1f80+-0x4*-0xd6a)),h(this,'_hash'),h(this,'_defines',new Map()),h(this,'_definesDi'+'rty',!(-0x1*0x1e9e+0x1*-0x264f+0x44ed));}get['hash'](){if(this['_hash']===void(-0x181f+0x1930+-0x111)){const _0x765cd0=this['gammaCorre'+'ction']+'_'+this['toneMappin'+'g']+'_'+this['srgbRender'+'Target']+'_'+this['fog']+'_'+this['ssaoEnable'+'d']+'_'+this['sceneDepth'+'MapLinear'];this['_hash']=hi(_0x765cd0);}return this['_hash'];}get['defines'](){const _0x29a806=this['_defines'];return this['_definesDi'+'rty']&&(this['_definesDi'+'rty']=!(-0x22e7+0xb+0x22dd),_0x29a806['clear'](),this['_sceneDept'+'hMapLinear']&&_0x29a806['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',!(-0x75*-0x1+-0x81*-0x21+-0x1116)),_0x29a806['set']('FOG',this['_fog']['toUpperCas'+'e']()),_0x29a806['set']('TONEMAP',ov[this['_toneMappi'+'ng']]),_0x29a806['set']('GAMMA',Hw[this['shaderOutp'+'utGamma']])),_0x29a806;}['markDirty'](){this['_hash']=void(-0x28c*-0xc+-0x3*0xb8d+-0x417*-0x1),this['_definesDi'+'rty']=!(0x3*-0x557+0x1e09+-0xe04);}set['fog'](_0x53a251){this['_fog']!==_0x53a251&&(this['_fog']=_0x53a251,this['markDirty']());}get['fog'](){return this['_fog'];}set['ssaoEnable'+'d'](_0x8ccf3){this['_ssaoEnabl'+'ed']!==_0x8ccf3&&(this['_ssaoEnabl'+'ed']=_0x8ccf3,this['markDirty']());}get['ssaoEnable'+'d'](){return this['_ssaoEnabl'+'ed'];}set['gammaCorre'+'ction'](_0x433e5f){this['_gammaCorr'+'ectionAssi'+'gned']=!(0x21d5+-0x24ac+-0x1*-0x2d7),this['_gammaCorr'+'ection']!==_0x433e5f&&(this['_gammaCorr'+'ection']=_0x433e5f,this['markDirty']());}get['gammaCorre'+'ction'](){return this['_gammaCorr'+'ection'];}set['toneMappin'+'g'](_0x3e13a3){this['_toneMappi'+'ng']!==_0x3e13a3&&(this['_toneMappi'+'ng']=_0x3e13a3,this['markDirty']());}get['toneMappin'+'g'](){return this['_toneMappi'+'ng'];}set['srgbRender'+'Target'](_0x407ed3){this['_srgbRende'+'rTarget']!==_0x407ed3&&(this['_srgbRende'+'rTarget']=_0x407ed3,this['markDirty']());}get['srgbRender'+'Target'](){return this['_srgbRende'+'rTarget'];}set['sceneDepth'+'MapLinear'](_0x237443){this['_sceneDept'+'hMapLinear']!==_0x237443&&(this['_sceneDept'+'hMapLinear']=_0x237443,this['markDirty']());}get['sceneDepth'+'MapLinear'](){return this['_sceneDept'+'hMapLinear'];}get['shaderOutp'+'utGamma'](){return this['_gammaCorr'+'ection']===Xc&&!this['_srgbRende'+'rTarget']?Xc:Ll;}}const La=new D(),ao=new D(),D_=new D(),I_=new te(),OE=[new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D()];class Fl{constructor(){h(this,'shaderPass'+'Info',null),h(this,'renderPass'+'ColorGrab',null),h(this,'renderPass'+'DepthGrab',null),h(this,'fogParams',null),h(this,'shaderPara'+'ms',new vv()),h(this,'renderPass'+'es',[]),h(this,'jitter',-0x1495+-0x221d*0x1+0x36b2),(this['_aspectRat'+'io']=(0x14f*-0xf+0x7ad+0x4*0x301)/(0x395*-0x3+-0x1973+0x35*0xaf),this['_aspectRat'+'ioMode']=hm,this['_calculate'+'Projection']=null,this['_calculate'+'Transform']=null,this['_clearColo'+'r']=new ie(-0x839+-0x1*-0x533+-0x2b*-0x12+0.75,0x1124+-0x692*0x3+0x292+0.75,0x1aeb+0xc4f+-0x273a+0.75,0x3*-0xa42+0x181d+0x6aa),this['_clearColo'+'rBuffer']=!(-0x20da*0x1+-0x22bd+0x4397*0x1),this['_clearDept'+'h']=0xa*-0x277+0x1225+-0x341*-0x2,this['_clearDept'+'hBuffer']=!(-0x1*-0x1124+-0x14*-0x19c+-0x4*0xc55),this['_clearSten'+'cil']=0xe15+0x3*0xc61+-0x3338,this['_clearSten'+'cilBuffer']=!(0x25a+0x1*0x263c+-0x2896),this['_cullFaces']=!(-0x2236+0x2ce+0x1f68),this['_farClip']=-0x1*0x211+0x1*0xcbb+-0x15a*0x5,this['_flipFaces']=!(0x81*-0x31+0x1*-0x731+0x38b*0x9),this['_fov']=-0x1*0x165a+0x5*0xd+0x1646,this['_frustumCu'+'lling']=!(0x5f*0x16+0x7f7+-0x1021),this['_horizonta'+'lFov']=!(-0x1568+0x3*-0x7f+0x16e6),this['_layers']=[er,ps,Kp,Il,Zp],this['_layersSet']=new Set(this['_layers']),this['_nearClip']=-0x1bb0*0x1+0x1*-0x7c9+-0x9*-0x3f1+0.1,this['_node']=null,this['_orthoHeig'+'ht']=-0x10e9+0x1266+-0x35*0x7,this['_projectio'+'n']=ni,this['_rect']=new re(-0x1*0x1a15+0x1445*-0x1+-0x22*-0x15d,0xe6f+-0x11*-0x227+-0x1102*0x3,-0x3*-0x5a8+0x1412+0x1*-0x2509,0x2415*0x1+-0x2495+-0x1*-0x81),this['_renderTar'+'get']=null,this['_scissorRe'+'ct']=new re(0xa61*-0x2+-0x1ad5+-0xfdd*-0x3,0x9*-0x1e1+0x14*0x38+-0xc89*-0x1,0x1*0x1c58+-0x92b+0x4*-0x4cb,0x2057+0x655+-0x26ab),this['_scissorRe'+'ctClear']=!(0x2*-0x396+0x1c*0x100+0x3*-0x6f1),this['_aperture']=-0x11a7+-0x628+0x17df,this['_shutter']=(0x1999+0x1748*0x1+0x20*-0x187)/(0x50d*0x7+-0xfe*-0x21+-0x1*0x4031),this['_sensitivi'+'ty']=-0x2703*0x1+0x1726+0x15*0xf1,this['_projMat']=new te(),this['_projMatDi'+'rty']=!(0x4f*-0x5d+0xfeb*0x1+-0x2*-0x664),this['_projMatSk'+'ybox']=new te(),this['_viewMat']=new te(),this['_viewMatDi'+'rty']=!(0xccb*0x1+-0x2471*0x1+0x17a6),this['_viewProjM'+'at']=new te(),this['_viewProjM'+'atDirty']=!(-0xa*-0x3cb+0xee0+-0x34ce),this['_shaderMat'+'ricesVersi'+'on']=-0x1*-0x619+-0x14*-0x1cf+0xe17*-0x3,this['_viewProjI'+'nverse']=new te(),this['_viewProjC'+'urrent']=null,this['_viewProjP'+'revious']=new te(),this['_jitters']=[0x2364+0xefa+0x10ca*-0x3,0x17f7+-0xce+-0x1729,-0x2c*0x20+-0x25d+0x7dd,-0x1c7+-0x2f*-0x26+-0x79*0xb],this['frustum']=new yx(),this['_xr']=null,this['_xrPropert'+'ies']={'horizontalFov':this['_horizonta'+'lFov'],'fov':this['_fov'],'aspectRatio':this['_aspectRat'+'io'],'farClip':this['_farClip'],'nearClip':this['_nearClip']});}['destroy'](){var _0x353d97,_0x2aea61;(_0x353d97=this['renderPass'+'ColorGrab'])==null||_0x353d97['destroy'](),this['renderPass'+'ColorGrab']=null,(_0x2aea61=this['renderPass'+'DepthGrab'])==null||_0x2aea61['destroy'](),this['renderPass'+'DepthGrab']=null,this['renderPass'+'es']['length']=0xa34+0xd8e*0x1+0x17c2*-0x1;}['_storeShad'+'erMatrices'](_0x2245cf,_0x4ba9fc,_0x2ac7d3,_0x334fa7){this['_shaderMat'+'ricesVersi'+'on']!==_0x334fa7&&(this['_shaderMat'+'ricesVersi'+'on']=_0x334fa7,this['_viewProjP'+'revious']['copy'](this['_viewProjC'+'urrent']??_0x2245cf),this['_viewProjC'+'urrent']??(this['_viewProjC'+'urrent']=new te()),this['_viewProjC'+'urrent']['copy'](_0x2245cf),this['_viewProjI'+'nverse']['invert'](_0x2245cf),this['_jitters'][0x14b*0xe+-0x772+-0x553*0x2]=this['_jitters'][0x808+-0x9*0x297+-0x1*-0xf47],this['_jitters'][-0x897*-0x1+0x18a8+-0x213c]=this['_jitters'][0x67a+-0x2*-0x4ca+0x7*-0x24b],this['_jitters'][0xeb5+-0x1ee7+-0x819*-0x2]=_0x4ba9fc,this['_jitters'][0x1cce+0x1*-0x1afe+-0x1*0x1cf]=_0x2ac7d3);}get['fullSizeCl'+'earRect'](){const _0x3612a6=this['_scissorRe'+'ctClear']?this['scissorRec'+'t']:this['_rect'];return _0x3612a6['x']===0x29*0xd+0x1ea7+0x20bc*-0x1&&_0x3612a6['y']===-0x1*-0x6d9+-0x141*-0x1+0x3d*-0x22&&_0x3612a6['z']===-0x258e+0x491*-0x1+-0x2a20*-0x1&&_0x3612a6['w']===-0x3c*-0x63+0x1054+0xd2d*-0x3;}set['aspectRati'+'o'](_0x1ead69){this['_aspectRat'+'io']!==_0x1ead69&&(this['_aspectRat'+'io']=_0x1ead69,this['_projMatDi'+'rty']=!(-0x17c5+0x65d+-0x45a*-0x4));}get['aspectRati'+'o'](){var _0x5473e9;return(_0x5473e9=this['xr'])!=null&&_0x5473e9['active']?this['_xrPropert'+'ies']['aspectRati'+'o']:this['_aspectRat'+'io'];}set['aspectRati'+'oMode'](_0x3b4d58){this['_aspectRat'+'ioMode']!==_0x3b4d58&&(this['_aspectRat'+'ioMode']=_0x3b4d58,this['_projMatDi'+'rty']=!(-0x839*0x4+-0x1*-0xf88+0x115c));}get['aspectRati'+'oMode'](){return this['_aspectRat'+'ioMode'];}set['calculateP'+'rojection'](_0x307674){this['_calculate'+'Projection']=_0x307674,this['_projMatDi'+'rty']=!(-0x60*0x2+0x2664+-0x25a4);}get['calculateP'+'rojection'](){return this['_calculate'+'Projection'];}set['calculateT'+'ransform'](_0x285090){this['_calculate'+'Transform']=_0x285090;}get['calculateT'+'ransform'](){return this['_calculate'+'Transform'];}set['clearColor'](_0xe7efa5){this['_clearColo'+'r']['copy'](_0xe7efa5);}get['clearColor'](){return this['_clearColo'+'r'];}set['clearColor'+'Buffer'](_0x50ac32){this['_clearColo'+'rBuffer']=_0x50ac32;}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'](_0x5de406){this['_clearDept'+'h']=_0x5de406;}get['clearDepth'](){return this['_clearDept'+'h'];}set['clearDepth'+'Buffer'](_0x47057c){this['_clearDept'+'hBuffer']=_0x47057c;}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'il'](_0x597f55){this['_clearSten'+'cil']=_0x597f55;}get['clearStenc'+'il'](){return this['_clearSten'+'cil'];}set['clearStenc'+'ilBuffer'](_0x4c39f8){this['_clearSten'+'cilBuffer']=_0x4c39f8;}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}set['cullFaces'](_0x5ead64){this['_cullFaces']=_0x5ead64;}get['cullFaces'](){return this['_cullFaces'];}set['farClip'](_0x21de18){this['_farClip']!==_0x21de18&&(this['_farClip']=_0x21de18,this['_projMatDi'+'rty']=!(0x67*-0x49+0x2a7*-0xb+-0x6*-0x9c2));}get['farClip'](){var _0x41945e;return(_0x41945e=this['xr'])!=null&&_0x41945e['active']?this['_xrPropert'+'ies']['farClip']:this['_farClip'];}set['flipFaces'](_0x41d55f){this['_flipFaces']=_0x41d55f;}get['flipFaces'](){return this['_flipFaces'];}set['fov'](_0x436309){this['_fov']!==_0x436309&&(this['_fov']=_0x436309,this['_projMatDi'+'rty']=!(-0xff*-0x1b+-0xca5+0x40*-0x39));}get['fov'](){var _0xbda2be;return(_0xbda2be=this['xr'])!=null&&_0xbda2be['active']?this['_xrPropert'+'ies']['fov']:this['_fov'];}set['frustumCul'+'ling'](_0x8f143e){this['_frustumCu'+'lling']=_0x8f143e;}get['frustumCul'+'ling'](){return this['_frustumCu'+'lling'];}set['horizontal'+'Fov'](_0x19d905){this['_horizonta'+'lFov']!==_0x19d905&&(this['_horizonta'+'lFov']=_0x19d905,this['_projMatDi'+'rty']=!(-0x1015+0x1*-0x22de+0x32f3*0x1));}get['horizontal'+'Fov'](){var _0x16083e;return(_0x16083e=this['xr'])!=null&&_0x16083e['active']?this['_xrPropert'+'ies']['horizontal'+'Fov']:this['_horizonta'+'lFov'];}set['layers'](_0x1c5aa0){this['_layers']=_0x1c5aa0['slice'](-0x1d40+-0x234f+0x939*0x7),this['_layersSet']=new Set(this['_layers']);}get['layers'](){return this['_layers'];}get['layersSet'](){return this['_layersSet'];}set['nearClip'](_0x25e683){this['_nearClip']!==_0x25e683&&(this['_nearClip']=_0x25e683,this['_projMatDi'+'rty']=!(-0x25d7*-0x1+0x1514+-0x1*0x3aeb));}get['nearClip'](){var _0x26f33c;return(_0x26f33c=this['xr'])!=null&&_0x26f33c['active']?this['_xrPropert'+'ies']['nearClip']:this['_nearClip'];}set['node'](_0x2203ac){this['_node']=_0x2203ac;}get['node'](){return this['_node'];}set['orthoHeigh'+'t'](_0x5ab6c8){this['_orthoHeig'+'ht']!==_0x5ab6c8&&(this['_orthoHeig'+'ht']=_0x5ab6c8,this['_projMatDi'+'rty']=!(-0x2*0x2c9+-0x848+0x6ed*0x2));}get['orthoHeigh'+'t'](){return this['_orthoHeig'+'ht'];}set['projection'](_0x138823){this['_projectio'+'n']!==_0x138823&&(this['_projectio'+'n']=_0x138823,this['_projMatDi'+'rty']=!(0x1c*-0xd4+-0xc04+0x2334));}get['projection'](){return this['_projectio'+'n'];}get['projection'+'Matrix'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMat'];}set['rect'](_0x549053){this['_rect']['copy'](_0x549053);}get['rect'](){return this['_rect'];}set['renderTarg'+'et'](_0x2bad71){this['_renderTar'+'get']=_0x2bad71;}get['renderTarg'+'et'](){return this['_renderTar'+'get'];}set['scissorRec'+'t'](_0x37f7b9){this['_scissorRe'+'ct']['copy'](_0x37f7b9);}get['scissorRec'+'t'](){return this['_scissorRe'+'ct'];}get['viewMatrix'](){if(this['_viewMatDi'+'rty']){const _0x557f66=this['_node']['getWorldTr'+'ansform']();this['_viewMat']['copy'](_0x557f66)['invert'](),this['_viewMatDi'+'rty']=!(0x6b*0x22+0x1*-0xfe9+0x1b4);}return this['_viewMat'];}set['aperture'](_0x5b4957){this['_aperture']=_0x5b4957;}get['aperture'](){return this['_aperture'];}set['sensitivit'+'y'](_0x233b09){this['_sensitivi'+'ty']=_0x233b09;}get['sensitivit'+'y'](){return this['_sensitivi'+'ty'];}set['shutter'](_0x158e07){this['_shutter']=_0x158e07;}get['shutter'](){return this['_shutter'];}set['xr'](_0x3829e4){this['_xr']!==_0x3829e4&&(this['_xr']=_0x3829e4,this['_projMatDi'+'rty']=!(0x200c+-0x98*0x3e+0x4c4));}get['xr'](){return this['_xr'];}['clone'](){return new Fl()['copy'](this);}['copy'](_0x28efd7){return this['_aspectRat'+'io']=_0x28efd7['_aspectRat'+'io'],this['_farClip']=_0x28efd7['_farClip'],this['_fov']=_0x28efd7['_fov'],this['_horizonta'+'lFov']=_0x28efd7['_horizonta'+'lFov'],this['_nearClip']=_0x28efd7['_nearClip'],this['_xrPropert'+'ies']['aspectRati'+'o']=_0x28efd7['_xrPropert'+'ies']['aspectRati'+'o'],this['_xrPropert'+'ies']['farClip']=_0x28efd7['_xrPropert'+'ies']['farClip'],this['_xrPropert'+'ies']['fov']=_0x28efd7['_xrPropert'+'ies']['fov'],this['_xrPropert'+'ies']['horizontal'+'Fov']=_0x28efd7['_xrPropert'+'ies']['horizontal'+'Fov'],this['_xrPropert'+'ies']['nearClip']=_0x28efd7['_xrPropert'+'ies']['nearClip'],this['aspectRati'+'oMode']=_0x28efd7['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x28efd7['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x28efd7['calculateT'+'ransform'],this['clearColor']=_0x28efd7['clearColor'],this['clearColor'+'Buffer']=_0x28efd7['clearColor'+'Buffer'],this['clearDepth']=_0x28efd7['clearDepth'],this['clearDepth'+'Buffer']=_0x28efd7['clearDepth'+'Buffer'],this['clearStenc'+'il']=_0x28efd7['clearStenc'+'il'],this['clearStenc'+'ilBuffer']=_0x28efd7['clearStenc'+'ilBuffer'],this['cullFaces']=_0x28efd7['cullFaces'],this['flipFaces']=_0x28efd7['flipFaces'],this['frustumCul'+'ling']=_0x28efd7['frustumCul'+'ling'],this['layers']=_0x28efd7['layers'],this['orthoHeigh'+'t']=_0x28efd7['orthoHeigh'+'t'],this['projection']=_0x28efd7['projection'],this['rect']=_0x28efd7['rect'],this['renderTarg'+'et']=_0x28efd7['renderTarg'+'et'],this['scissorRec'+'t']=_0x28efd7['scissorRec'+'t'],this['aperture']=_0x28efd7['aperture'],this['shutter']=_0x28efd7['shutter'],this['sensitivit'+'y']=_0x28efd7['sensitivit'+'y'],this['shaderPass'+'Info']=_0x28efd7['shaderPass'+'Info'],this['jitter']=_0x28efd7['jitter'],this['_projMatDi'+'rty']=!(-0x254d+-0x7aa+0x2cf7),this;}['_enableRen'+'derPassCol'+'orGrab'](_0x38f7e9,_0x2f4dac){var _0x41b7c6;_0x2f4dac?this['renderPass'+'ColorGrab']||(this['renderPass'+'ColorGrab']=new LE(_0x38f7e9)):((_0x41b7c6=this['renderPass'+'ColorGrab'])==null||_0x41b7c6['destroy'](),this['renderPass'+'ColorGrab']=null);}['_enableRen'+'derPassDep'+'thGrab'](_0x45c94b,_0x35648a,_0x2714da){var _0x55e0d3;_0x2714da?this['renderPass'+'DepthGrab']||(this['renderPass'+'DepthGrab']=new RE(_0x45c94b,this)):((_0x55e0d3=this['renderPass'+'DepthGrab'])==null||_0x55e0d3['destroy'](),this['renderPass'+'DepthGrab']=null);}['_updateVie'+'wProjMat'](){(this['_projMatDi'+'rty']||this['_viewMatDi'+'rty']||this['_viewProjM'+'atDirty'])&&(this['_viewProjM'+'at']['mul2'](this['projection'+'Matrix'],this['viewMatrix']),this['_viewProjM'+'atDirty']=!(0xeb7*0x1+-0x7a5*-0x1+0x165b*-0x1));}['worldToScr'+'een'](_0x3f0f74,_0x24da36,_0x301dbd,_0x285033=new D()){this['_updateVie'+'wProjMat'](),this['_viewProjM'+'at']['transformP'+'oint'](_0x3f0f74,_0x285033);const _0x16aea5=this['_viewProjM'+'at']['data'],_0xc86c37=_0x3f0f74['x']*_0x16aea5[0xbd*-0x8+-0xb15+0x220*0x8]+_0x3f0f74['y']*_0x16aea5[0xbcb+-0x18b9*-0x1+-0x247d]+_0x3f0f74['z']*_0x16aea5[0x1cb3+-0x1019+-0xc8f]+(-0xd*-0x11f+-0x157*-0x2+-0x1140)*_0x16aea5[-0x2*-0xcf2+0x14d8+0x15*-0x239];_0x285033['x']=(_0x285033['x']/_0xc86c37+(-0x21*-0xf+0x2*-0xdff+0x1a10))*(0xf*0x26+-0x111d+-0x67*-0x25+0.5),_0x285033['y']=(0x1*0xef5+-0x226+-0xcce-_0x285033['y']/_0xc86c37)*(0x42*0x8f+0x44*-0xc+-0x21ae+0.5);const {x:_0x397bc9,y:_0x4ab507,z:_0x17bc40,w:_0x17c3e8}=this['_rect'];return _0x285033['x']=_0x285033['x']*_0x17bc40*_0x24da36+_0x397bc9*_0x24da36,_0x285033['y']=_0x285033['y']*_0x17c3e8*_0x301dbd+(-0x1677+0x2156+0xd6*-0xd-_0x4ab507-_0x17c3e8)*_0x301dbd,_0x285033;}['screenToWo'+'rld'](_0xea3ad4,_0x2f1904,_0x16e7ff,_0x46fbca,_0x1557a2,_0x12fcc9=new D()){const {x:_0x31216e,y:_0x18776d,z:_0x2f8e8b,w:_0x225646}=this['_rect'],_0x4ebd80=this['farClip']-this['nearClip'];if(La['set']((_0xea3ad4-_0x31216e*_0x46fbca)/(_0x2f8e8b*_0x46fbca),0x1*0x1c7b+-0x2c2*-0x6+0x2a6*-0x11-(_0x2f1904-(0x1*-0xf73+-0x1*0xe1d+0x1d91-_0x18776d-_0x225646)*_0x1557a2)/(_0x225646*_0x1557a2),_0x16e7ff/_0x4ebd80),La['mulScalar'](-0x154d+-0x13*0xd3+0x24f8),La['sub'](D['ONE']),this['_projectio'+'n']===ni){te['_getPerspe'+'ctiveHalfS'+'ize'](ao,this['fov'],this['aspectRati'+'o'],this['nearClip'],this['horizontal'+'Fov']),ao['x']*=La['x'],ao['y']*=La['y'];const _0x248d3b=this['_node']['getWorldTr'+'ansform']();ao['z']=-this['nearClip'],_0x248d3b['transformP'+'oint'](ao,D_);const _0x36eeab=this['_node']['getPositio'+'n']();_0x12fcc9['sub2'](D_,_0x36eeab),_0x12fcc9['normalize'](),_0x12fcc9['mulScalar'](_0x16e7ff),_0x12fcc9['add'](_0x36eeab);}else this['_updateVie'+'wProjMat'](),I_['copy'](this['_viewProjM'+'at'])['invert'](),I_['transformP'+'oint'](La,_0x12fcc9);return _0x12fcc9;}['_evaluateP'+'rojectionM'+'atrix'](){if(this['_projMatDi'+'rty']){if(this['_projectio'+'n']===ni)this['_projMat']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip'],this['horizontal'+'Fov']),this['_projMatSk'+'ybox']['copy'](this['_projMat']);else{const _0x207e9e=this['_orthoHeig'+'ht'],_0x4e49ec=_0x207e9e*this['aspectRati'+'o'];this['_projMat']['setOrtho'](-_0x4e49ec,_0x4e49ec,-_0x207e9e,_0x207e9e,this['nearClip'],this['farClip']),this['_projMatSk'+'ybox']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip']);}this['_projMatDi'+'rty']=!(0x812*-0x2+-0x3c1*-0x9+-0x8d2*0x2);}}['getProject'+'ionMatrixS'+'kybox'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMatSk'+'ybox'];}['getExposur'+'e'](){const _0x2ea2cd=Math['log2'](this['_aperture']*this['_aperture']/this['_shutter']*(0x22*-0x9c+0x2bc+0xe0*0x15)/this['_sensitivi'+'ty']);return(-0x3*-0x692+-0x1*-0x527+-0x18dc)/(Math['pow'](-0x243+-0x1d*0xe2+0x1bdf*0x1,_0x2ea2cd)*(0xfb+0x181c*0x1+-0xf7*0x1a+0.19999999999999996));}['getScreenS'+'ize'](_0x5a5091){if(this['_projectio'+'n']===ni){const _0x57cb8e=this['_node']['getPositio'+'n']()['distance'](_0x5a5091['center']);if(_0x57cb8e<_0x5a5091['radius'])return-0x241*0xe+-0x21*-0x3b+-0x2*-0xbfa;const _0x3ec559=Math['asin'](_0x5a5091['radius']/_0x57cb8e),_0x259027=Math['tan'](_0x3ec559),_0x100226=Math['tan'](this['fov']/(-0x2*-0x1b2+0x8b2+-0x305*0x4)*Y['DEG_TO_RAD']);return Math['min'](_0x259027/_0x100226,0x2465+-0x1a69+-0x9fb);}return Y['clamp'](_0x5a5091['radius']/this['_orthoHeig'+'ht'],0x57*-0x62+-0x13ea+0x3538,0x17f*-0xc+-0x47*0x39+0x21c4);}['getFrustum'+'Corners'](_0x51106f=this['nearClip'],_0xfa9098=this['farClip']){const _0x2e1ce9=this['fov']*Math['PI']/(0x47a+0x5c0*0x5+0x16a*-0x17);let _0x2ccd15,_0x5c9c71;this['projection']===ni?this['horizontal'+'Fov']?(_0x2ccd15=_0x51106f*Math['tan'](_0x2e1ce9/(0x2279+-0x158b+-0xcec)),_0x5c9c71=_0x2ccd15/this['aspectRati'+'o']):(_0x5c9c71=_0x51106f*Math['tan'](_0x2e1ce9/(0x13cc+-0x240e+0x1044)),_0x2ccd15=_0x5c9c71*this['aspectRati'+'o']):(_0x5c9c71=this['_orthoHeig'+'ht'],_0x2ccd15=_0x5c9c71*this['aspectRati'+'o']);const _0x32c157=OE;return _0x32c157[-0x1*-0x13c6+0x60*0x42+-0x2c86]['x']=_0x2ccd15,_0x32c157[0x89d+-0x15fc+0xd5f]['y']=-_0x5c9c71,_0x32c157[-0xe6f+0x6b5+-0x3dd*-0x2]['z']=-_0x51106f,_0x32c157[-0x2*0x724+-0x61f*0x1+0x1468]['x']=_0x2ccd15,_0x32c157[-0x106*0x4+0xdbd*-0x1+-0x2*-0x8eb]['y']=_0x5c9c71,_0x32c157[-0x2395*-0x1+0x1*-0x222f+-0x165]['z']=-_0x51106f,_0x32c157[0x1*0x1017+0x18d3+-0x7*0x5d8]['x']=-_0x2ccd15,_0x32c157[-0x67*-0x13+0x9a9+-0x9*0x1ec]['y']=_0x5c9c71,_0x32c157[0x921+-0xcb*0x16+0x853]['z']=-_0x51106f,_0x32c157[-0x1*0x2516+-0x2022+0x453b]['x']=-_0x2ccd15,_0x32c157[-0x2d7+0x1b2d+-0x1853*0x1]['y']=-_0x5c9c71,_0x32c157[0x12e9+0xa0a+-0x1cf0]['z']=-_0x51106f,this['_projectio'+'n']===ni&&(this['horizontal'+'Fov']?(_0x2ccd15=_0xfa9098*Math['tan'](_0x2e1ce9/(0x2406+0x3*0x1a3+-0x28ed)),_0x5c9c71=_0x2ccd15/this['aspectRati'+'o']):(_0x5c9c71=_0xfa9098*Math['tan'](_0x2e1ce9/(0xf7*0x4+0x260a+-0x29e4)),_0x2ccd15=_0x5c9c71*this['aspectRati'+'o'])),_0x32c157[0x1676+0x427+-0x1*0x1a99]['x']=_0x2ccd15,_0x32c157[0x1c44+0x3de+-0x100f*0x2]['y']=-_0x5c9c71,_0x32c157[0x4*0x9b3+0x1*0x1925+-0x3fed*0x1]['z']=-_0xfa9098,_0x32c157[0x36*0x66+0x14*0x4d+-0x1*0x1b83]['x']=_0x2ccd15,_0x32c157[0x61f+-0x1*0x1311+0x1*0xcf7]['y']=_0x5c9c71,_0x32c157[0x993+-0x7a*-0x7+0x2c*-0x4b]['z']=-_0xfa9098,_0x32c157[0x121a+-0x3*-0xa6a+-0x3152]['x']=-_0x2ccd15,_0x32c157[-0xa91*-0x1+-0xdf5+0x2e*0x13]['y']=_0x5c9c71,_0x32c157[-0x16f+0x453*0x4+-0xfd7]['z']=-_0xfa9098,_0x32c157[-0x1931*-0x1+-0xf1d+0x53*-0x1f]['x']=-_0x2ccd15,_0x32c157[-0x1eb4+0xa1d*0x3+0x64]['y']=-_0x5c9c71,_0x32c157[-0xdf*0xa+-0x2543+0x2e00]['z']=-_0xfa9098,_0x32c157;}['setXrPrope'+'rties'](_0x373984){Object['assign'](this['_xrPropert'+'ies'],_0x373984),this['_projMatDi'+'rty']=!(0x13b1+-0x2368+0xfb7);}}const L_=new te(),R_=new te(),O_=new te(),gr=class gr{static['create'](_0x141fce,_0xce46f2,_0x373b35){const _0x250185=new Fl();switch(_0x250185['node']=new Ie(_0x141fce),_0x250185['aspectRati'+'o']=0x1ec0+0x29*0x18+-0x2297,_0x250185['aspectRati'+'oMode']=lu,_0x250185['_scissorRe'+'ctClear']=!(0x2474+-0xa4*-0x1f+0x35*-0x110),_0xce46f2){case Ke:_0x250185['node']['setRotatio'+'n'](gr['pointLight'+'Rotations'][_0x373b35]),_0x250185['fov']=0x1bb3*-0x1+0x1c1*0x1+0x1a4c,_0x250185['projection']=ni;break;case Ze:_0x250185['projection']=ni;break;case ve:_0x250185['projection']=En;break;}return _0x250185;}static['evalSpotCo'+'okieMatrix'](_0x36bf96){let _0x3d0bde=gr['_spotCooki'+'eCamera'];_0x3d0bde||(_0x3d0bde=gr['create']('SpotCookie'+'Camera',Ze),gr['_spotCooki'+'eCamera']=_0x3d0bde),_0x3d0bde['fov']=_0x36bf96['_outerCone'+'Angle']*(-0x1c59+-0xba3+0x27fe);const _0x4c41ae=_0x3d0bde['_node'];_0x4c41ae['setPositio'+'n'](_0x36bf96['_node']['getPositio'+'n']()),_0x4c41ae['setRotatio'+'n'](_0x36bf96['_node']['getRotatio'+'n']()),_0x4c41ae['rotateLoca'+'l'](-(-0x7*-0x3d1+-0x1ec6+0x469),-0x1*-0x107f+-0x1*-0x10b0+-0x212f,0xb*-0x82+-0x61b*0x2+0x8e6*0x2),L_['setTRS'](_0x4c41ae['getPositio'+'n'](),_0x4c41ae['getRotatio'+'n'](),D['ONE'])['invert'](),R_['mul2'](_0x3d0bde['projection'+'Matrix'],L_);const _0x10cd77=_0x36bf96['cookieMatr'+'ix'],_0x6e8ea=_0x36bf96['atlasViewp'+'ort'];return O_['setViewpor'+'t'](_0x6e8ea['x'],_0x6e8ea['y'],_0x6e8ea['z'],_0x6e8ea['w']),_0x10cd77['mul2'](O_,R_),_0x10cd77;}};h(gr,'pointLight'+'Rotations',[new le()['setFromEul'+'erAngles'](-0x243d+-0x1d27+-0x3e*-0x10e,0x13b+0x1*0x19b1+-0x166*0x13,0x85d*-0x3+0x16*0xfe+0x3f7),new le()['setFromEul'+'erAngles'](-0x908+-0x941*0x1+0x1249,-(0x5*0x15d+0x198d+-0x2004),0x1533+-0x1*0x12f5+-0x18a),new le()['setFromEul'+'erAngles'](-0x3*0x608+-0x1*-0x183+0x10ef,-0x1*-0x151+-0x125c+0x110b*0x1,0x42e+-0x1a98+0x166a),new le()['setFromEul'+'erAngles'](-(0xd93+0x95*0x3d+-0x30ba),0xd94+-0x255d+0x17c9,0x1e1+-0x1*0x1006+0xe25),new le()['setFromEul'+'erAngles'](-0x62*-0x52+-0x159e*-0x1+-0x3502,-0x9*-0x5+-0x1*0xd03+0xd8a*0x1,0x1*-0x1adc+-0x1*-0x728+0x4*0x51a),new le()['setFromEul'+'erAngles'](0x23a0+0x1ff2+-0x1686*0x3,0x5*0x175+-0x17f+-0x5ca,0xfa7+-0x173f+-0x76*-0x12)]),h(gr,'_spotCooki'+'eCamera',null);let Wn=gr;const vs=new D(),Or=new Float32Array(-0x2140+-0x2359*-0x1+-0x213),FE=new D(-(0x2543*-0x1+0x7fb+0x3a9*0x8+0.5),-0x22d*0x1+0xd*-0x2f+-0x8*-0x92,-0x1*-0x1d3f+-0x2*-0x679+-0x2a31),NE=new D(0x5*-0x401+-0x1587+-0x14c6*-0x2,0x144f+-0x1af7*0x1+0x6a8,0x615+-0x7*-0x4a9+-0x26b4+0.5),at={'POSITION_RANGE':0x0,'DIRECTION_FLAGS':0x1,'COLOR_ANGLES_BIAS':0x2,'PROJ_MAT_0':0x3,'ATLAS_VIEWPORT':0x3,'PROJ_MAT_1':0x4,'PROJ_MAT_2':0x5,'PROJ_MAT_3':0x6,'AREA_DATA_WIDTH':0x7,'AREA_DATA_HEIGHT':0x8,'COUNT':0x9},kE={'LIGHTSHAPE_PUNCTUAL':Ys+'u','LIGHTSHAPE_RECT':Zy+'u','LIGHTSHAPE_DISK':Qy+'u','LIGHTSHAPE_SPHERE':Jy+'u','LIGHT_COLOR_DIVIDER':$c+'.0'},F_=(_0x4157aa,_0x38ee11)=>Object['keys'](_0x4157aa)['map'](_0x2bfe8f=>'#define\x20{'+_0x38ee11+_0x2bfe8f+'}\x20'+_0x4157aa[_0x2bfe8f])['join']('\x0a'),N_='\x0a\x0a\x20\x20\x20\x20'+F_(at,'CLUSTER_TE'+'XTURE_')+'\x0a\x20\x20\x20\x20'+F_(kE,'')+'\x0a';class UE{constructor(_0x1b120f){h(this,'areaLights'+'Enabled',!(0x1a*-0x1a+-0x135b*0x2+-0x3*-0xdc9)),(this['device']=_0x1b120f,Pe['get'](_0x1b120f,Fe)['set']('lightBuffe'+'rDefinesPS',N_),Pe['get'](_0x1b120f,it)['set']('lightBuffe'+'rDefinesPS',N_),this['cookiesEna'+'bled']=!(0x156+-0x51*-0x1a+-0x98f),this['shadowsEna'+'bled']=!(0x1acf*-0x1+0x1e92+-0x3c2),this['areaLights'+'Enabled']=!(0x2489+0x2570+-0x49f8),this['maxLights']=0x1*-0x203+-0x250d*0x1+0x5b9*0x7);const _0x5f0920=at['COUNT'];this['lightsFloa'+'t']=new Float32Array((0x3*0x340+0x4*-0x366+0x3dc)*_0x5f0920*this['maxLights']),this['lightsUint']=new Uint32Array(this['lightsFloa'+'t']['buffer']),this['lightsText'+'ure']=this['createText'+'ure'](this['device'],_0x5f0920,this['maxLights'],Xt,'LightsText'+'ure'),this['_lightsTex'+'tureId']=this['device']['scope']['resolve']('lightsText'+'ure'),this['invMaxColo'+'rValue']=-0x1f4c*-0x1+-0xcbf+-0x128d,this['invMaxAtte'+'nuation']=-0x1afe+-0x23c3+-0x253*-0x1b,this['boundsMin']=new D(),this['boundsDelt'+'a']=new D();}['destroy'](){var _0x4695d7;(_0x4695d7=this['lightsText'+'ure'])==null||_0x4695d7['destroy'](),this['lightsText'+'ure']=null;}['createText'+'ure'](_0x12ac19,_0x46750,_0x4a8698,_0x44d008,_0x222953){return new _e(_0x12ac19,{'name':_0x222953,'width':_0x46750,'height':_0x4a8698,'mipmaps':!(0x15c*0xb+-0x33*-0x4d+0xf25*-0x2),'format':_0x44d008,'addressU':ue,'addressV':ue,'type':Ds,'magFilter':Te,'minFilter':Te,'anisotropy':0x1});}['setBounds'](_0x2dba6a,_0x336839){this['boundsMin']['copy'](_0x2dba6a),this['boundsDelt'+'a']['copy'](_0x336839);}['uploadText'+'ures'](){this['lightsText'+'ure']['lock']()['set'](this['lightsFloa'+'t']),this['lightsText'+'ure']['unlock']();}['updateUnif'+'orms'](){this['_lightsTex'+'tureId']['setValue'](this['lightsText'+'ure']);}['getSpotDir'+'ection'](_0x2cea21,_0x16dc31){_0x16dc31['_node']['getWorldTr'+'ansform']()['getY'](_0x2cea21)['mulScalar'](-(0x238*0x8+-0x1e40+0xc81)),_0x2cea21['normalize']();}['getLightAr'+'eaSizes'](_0x5602cd){const _0x103adb=_0x5602cd['_node']['getWorldTr'+'ansform']();return _0x103adb['transformV'+'ector'](FE,vs),Or[0x1*0x1205+-0x3a*-0x3b+-0x1f63]=vs['x'],Or[0xdcf+0x559*-0x1+0x875*-0x1]=vs['y'],Or[-0x936+-0x165b*-0x1+-0xd23]=vs['z'],_0x103adb['transformV'+'ector'](NE,vs),Or[0x236c+-0xd35*-0x2+-0x3dd3]=vs['x'],Or[0xb*0x351+-0x49*0x41+-0x1e*0x99]=vs['y'],Or[-0x1*-0x10e7+-0x5*-0x67e+-0x3158]=vs['z'],Or;}['addLightDa'+'ta'](_0xb819bc,_0x288dd8){const _0x29ff37=_0xb819bc['_type']===Ze,_0x23ee59=_0xb819bc['atlasViewp'+'ortAllocat'+'ed'],_0x5e2b13=this['cookiesEna'+'bled']&&!!_0xb819bc['_cookie']&&_0x23ee59,_0xf8fddd=this['areaLights'+'Enabled']&&_0xb819bc['shape']!==Ys,_0x13d731=this['shadowsEna'+'bled']&&_0xb819bc['castShadow'+'s']&&_0x23ee59,_0x3de6b3=_0xb819bc['_node']['getPositio'+'n']();let _0x24cea2=null,_0x41e8d9=null;_0x29ff37?_0x13d731?_0x24cea2=_0xb819bc['getRenderD'+'ata'](null,-0x1f7*-0x1+-0x244f+-0x44b*-0x8)['shadowMatr'+'ix']:_0x5e2b13&&(_0x24cea2=Wn['evalSpotCo'+'okieMatrix'](_0xb819bc)):(_0x13d731||_0x5e2b13)&&(_0x41e8d9=_0xb819bc['atlasViewp'+'ort']);const _0x281fab=this['lightsFloa'+'t'],_0x269164=this['lightsUint'],_0x3caff0=_0x288dd8*this['lightsText'+'ure']['width']*(-0x1e*-0xe+0x1*0x17b+-0x31b);_0x281fab[_0x3caff0+(0x17*0xb6+0x1*0x110f+-0x2165*0x1)*at['POSITION_R'+'ANGE']+(-0x1d41+0xc40+0x1101)]=_0x3de6b3['x'],_0x281fab[_0x3caff0+(0x1ee1+0x48*-0x87+0x71b)*at['POSITION_R'+'ANGE']+(-0x9db+-0x1a16+0x1*0x23f2)]=_0x3de6b3['y'],_0x281fab[_0x3caff0+(0x10a7+-0x37*-0x9f+-0x32cc)*at['POSITION_R'+'ANGE']+(0x129*-0x9+-0x1a2d+0x24a0)]=_0x3de6b3['z'],_0x281fab[_0x3caff0+(-0x1*-0x13bc+-0x10*-0x4+-0x13f8)*at['POSITION_R'+'ANGE']+(0x3c7*0x3+0x2354+0x1753*-0x2)]=_0xb819bc['attenuatio'+'nEnd'];const _0x139d78=_0xb819bc['clusteredD'+'ata'];if(_0x269164[_0x3caff0+(-0xc9*-0x2b+-0x67*0x5+-0xc*0x2a5)*at['COLOR_ANGL'+'ES_BIAS']+(-0x418+0x2251+-0x1e39)]=_0x139d78[0x19db+0x7*0x58d+0x42*-0xfb],_0x269164[_0x3caff0+(-0x5bd+-0x8*-0x4d5+0x20e7*-0x1)*at['COLOR_ANGL'+'ES_BIAS']+(0x509*0x4+0x15fa*-0x1+0x1*0x1d7)]=_0x139d78[0x1*-0x1891+0x1b72+0xb8*-0x4],_0x269164[_0x3caff0+(-0x1db1+-0xd8c+0x2b41)*at['COLOR_ANGL'+'ES_BIAS']+(-0x152b+-0x541*-0x4+0x29)]=_0x139d78[-0x2127+0x1ba*-0xf+-0x3b0f*-0x1],_0xb819bc['castShadow'+'s']){const _0x2fb76a=_0xb819bc['getRenderD'+'ata'](null,0x2e0*-0xd+0x1*0x2477+0xe9),_0x141dab=_0xb819bc['_getUnifor'+'mBiasValue'+'s'](_0x2fb76a),_0x4a882d=Mn['float2Half'](_0x141dab['bias']),_0x3bfc97=Mn['float2Half'](_0x141dab['normalBias']);_0x269164[_0x3caff0+(-0x1a92+-0x1617+0x30ad)*at['COLOR_ANGL'+'ES_BIAS']+(-0x1316*-0x1+-0x1a0b+0x6f8)]=_0x4a882d|_0x3bfc97<<0xb78*0x3+-0x2*0x1093+-0x132;}if(_0x29ff37&&(this['getSpotDir'+'ection'](vs,_0xb819bc),_0x281fab[_0x3caff0+(0x1*0x121f+0xff*-0x3+0x9*-0x1ae)*at['DIRECTION_'+'FLAGS']+(0x3a4+0x5*-0xa+-0x372)]=vs['x'],_0x281fab[_0x3caff0+(0x4bc+-0x1655*0x1+-0x1*-0x119d)*at['DIRECTION_'+'FLAGS']+(0xe1a+-0x1*-0x10e1+-0x1efa)]=vs['y'],_0x281fab[_0x3caff0+(0xa9*-0xd+-0x11a*-0xa+0x1*-0x26b)*at['DIRECTION_'+'FLAGS']+(-0x152+-0x3*-0x27d+-0x623*0x1)]=vs['z']),_0x269164[_0x3caff0+(0x1795*-0x1+-0x1bed+-0x5*-0xa4e)*at['DIRECTION_'+'FLAGS']+(-0x1278+-0x11c5+0x1d0*0x14)]=_0xb819bc['getCluster'+'edFlags'](_0x13d731,_0x5e2b13),_0x24cea2){const _0x8fca32=_0x24cea2['data'];for(let _0x2552c2=0x1cb5+0x1*-0x1954+-0x361;_0x2552c2<-0x17*0xa5+0x4*0x517+-0x579*0x1;_0x2552c2++)_0x281fab[_0x3caff0+(-0x1*-0x178f+-0x1d63*-0x1+-0x2*0x1a77)*at['PROJ_MAT_0']+_0x2552c2]=_0x8fca32[_0x2552c2];}if(_0x41e8d9&&(_0x281fab[_0x3caff0+(-0x1*-0xda3+-0xb*-0xdf+0x1734*-0x1)*at['ATLAS_VIEW'+'PORT']+(-0x181c+-0xe38*-0x2+0x115*-0x4)]=_0x41e8d9['x'],_0x281fab[_0x3caff0+(-0x2f4+0x1fc*-0x1+-0x27a*-0x2)*at['ATLAS_VIEW'+'PORT']+(-0x134*-0x8+-0x1802+-0x1*-0xe63)]=_0x41e8d9['y'],_0x281fab[_0x3caff0+(0x59*-0x3+-0x1*0x1e34+0x35*0x97)*at['ATLAS_VIEW'+'PORT']+(0x561+-0x2024+-0x1ac5*-0x1)]=_0x41e8d9['z']/(0x192e+-0x1939+0x2*0x7)),_0xf8fddd){const _0x4f1385=this['getLightAr'+'eaSizes'](_0xb819bc);_0x281fab[_0x3caff0+(-0x1b65+-0x7*-0x373+-0x4c*-0xb)*at['AREA_DATA_'+'WIDTH']+(0x2004+-0x13b1+-0xc53)]=_0x4f1385[0x62a+-0xb47+0x77*0xb],_0x281fab[_0x3caff0+(0xaf1*-0x3+0x159f+0xb38)*at['AREA_DATA_'+'WIDTH']+(0xce0*-0x1+-0x2390+0x3071)]=_0x4f1385[-0x1*-0xce5+0x2*0x1be+-0x1060],_0x281fab[_0x3caff0+(0x1d*0x101+-0x23a2*0x1+0x689)*at['AREA_DATA_'+'WIDTH']+(-0xaf8+-0x3*-0x1ab+-0xb*-0x8b)]=_0x4f1385[0xadd*0x1+-0x13f*-0x3+-0xe98],_0x281fab[_0x3caff0+(-0x983+0x26eb+0xe4*-0x21)*at['AREA_DATA_'+'HEIGHT']+(0x5*-0x4e5+0x249*-0x9+0x2d0a)]=_0x4f1385[-0x12a*-0xb+-0x340*-0x1+0x25*-0x6f],_0x281fab[_0x3caff0+(0x5*-0x607+0x175+0x1cb2)*at['AREA_DATA_'+'HEIGHT']+(-0x2432+0x13f1+0x1042)]=_0x4f1385[0x1f*0x11b+-0x1d03+0x2*-0x29f],_0x281fab[_0x3caff0+(0x8*0x4bd+-0xc*0x1a5+0x1*-0x1228)*at['AREA_DATA_'+'HEIGHT']+(-0x1da2+0x1987+0x41d)]=_0x4f1385[-0xb*0x94+0xd0d+-0x2*0x356];}}}const ic=new D(),rc=new D(),ac=new D(),Yd=new De(),k_=-0x2da*0x3+0xebd+-0x9d1*-0x1;class U_{constructor(){this['light']=null,this['min']=new D(),this['max']=new D();}}class cu{constructor(_0x130cee){h(this,'clusterTex'+'ture'),(this['device']=_0x130cee,this['name']='Untitled',this['reportCoun'+'t']=0x2*-0xa2f+0x1844*-0x1+0x2ca2*0x1,this['boundsMin']=new D(),this['boundsMax']=new D(),this['boundsDelt'+'a']=new D(),this['_cells']=new D(-0x15b+-0x261b*0x1+0x2777*0x1,-0x13f9*-0x1+-0x158c+0x194,-0x170c+-0x16d3+-0x8*-0x5bc),this['_cellsLimi'+'t']=new D(),this['cells']=this['_cells'],this['maxCellLig'+'htCount']=0x1dde*-0x1+0x12dd*-0x2+0x439c,this['_usedLight'+'s']=[],this['_usedLight'+'s']['push'](new U_()),this['lightsBuff'+'er']=new UE(_0x130cee),this['registerUn'+'iforms'](_0x130cee));}set['maxCellLig'+'htCount'](_0x42d99e){_0x42d99e!==this['_maxCellLi'+'ghtCount']&&(this['_maxCellLi'+'ghtCount']=_0x42d99e,this['_cellsDirt'+'y']=!(0x1452+-0x102a+-0x428*0x1));}get['maxCellLig'+'htCount'](){return this['_maxCellLi'+'ghtCount'];}set['cells'](_0x4a8281){ic['copy'](_0x4a8281)['floor'](),this['_cells']['equals'](ic)||(this['_cells']['copy'](ic),this['_cellsLimi'+'t']['copy'](ic)['sub'](D['ONE']),this['_cellsDirt'+'y']=!(-0xe61+0x89*-0x37+0x57a*0x8));}get['cells'](){return this['_cells'];}['destroy'](){this['lightsBuff'+'er']['destroy'](),this['releaseClu'+'sterTextur'+'e']();}['releaseClu'+'sterTextur'+'e'](){this['clusterTex'+'ture']&&(this['clusterTex'+'ture']['destroy'](),this['clusterTex'+'ture']=null);}['registerUn'+'iforms'](_0x5f22bc){this['_clusterSk'+'ipId']=_0x5f22bc['scope']['resolve']('clusterSki'+'p'),this['_clusterMa'+'xCellsId']=_0x5f22bc['scope']['resolve']('clusterMax'+'Cells'),this['_clusterWo'+'rldTexture'+'Id']=_0x5f22bc['scope']['resolve']('clusterWor'+'ldTexture'),this['_clusterTe'+'xtureSizeI'+'d']=_0x5f22bc['scope']['resolve']('clusterTex'+'tureSize'),this['_clusterTe'+'xtureSizeD'+'ata']=new Float32Array(0x9*0x413+-0x1*-0x183b+0x6d*-0x8f),this['_clusterBo'+'undsMinId']=_0x5f22bc['scope']['resolve']('clusterBou'+'ndsMin'),this['_clusterBo'+'undsMinDat'+'a']=new Float32Array(-0x1d43+0x72e*0x2+0xeea),this['_clusterBo'+'undsDeltaI'+'d']=_0x5f22bc['scope']['resolve']('clusterBou'+'ndsDelta'),this['_clusterBo'+'undsDeltaD'+'ata']=new Float32Array(0xede*0x1+0x1063+-0x1f*0x102),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']=_0x5f22bc['scope']['resolve']('clusterCel'+'lsCountByB'+'oundsSize'),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']=new Float32Array(-0x1*-0x2009+0x19a9*-0x1+0xb5*-0x9),this['_clusterCe'+'llsDotId']=_0x5f22bc['scope']['resolve']('clusterCel'+'lsDot'),this['_clusterCe'+'llsDotData']=new Float32Array(0xb79*-0x3+-0x883+0x2af1),this['_clusterCe'+'llsMaxId']=_0x5f22bc['scope']['resolve']('clusterCel'+'lsMax'),this['_clusterCe'+'llsMaxData']=new Float32Array(0xdce+0x4*-0x7f9+0x1219);}['updatePara'+'ms'](_0x574c2a){_0x574c2a&&(this['cells']=_0x574c2a['cells'],this['maxCellLig'+'htCount']=_0x574c2a['maxLightsP'+'erCell'],this['lightsBuff'+'er']['cookiesEna'+'bled']=_0x574c2a['cookiesEna'+'bled'],this['lightsBuff'+'er']['shadowsEna'+'bled']=_0x574c2a['shadowsEna'+'bled'],this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x574c2a['areaLights'+'Enabled']);}['updateCell'+'s'](){if(this['_cellsDirt'+'y']){this['_cellsDirt'+'y']=!(-0x9*0x1a8+-0x565*0x2+-0x99*-0x2b);const _0x322b33=this['_cells']['x'],_0x3432ed=this['_cells']['y'],_0xb64991=this['_cells']['z'],_0x2f6c76=_0x322b33*_0x3432ed*_0xb64991,_0x47c04e=this['maxCellLig'+'htCount']*_0x2f6c76;let _0x2ec204=Math['ceil'](Math['sqrt'](_0x47c04e));_0x2ec204=Y['roundUp'](_0x2ec204,this['maxCellLig'+'htCount']);const _0x1be153=Math['ceil'](_0x47c04e/_0x2ec204);w['assert'](_0x2ec204<=k_&&_0x1be153<=k_,'Clustered\x20'+'lights\x20par'+'ameters\x20ca'+'use\x20the\x20te'+'xture\x20size'+'\x20to\x20be\x20ove'+'r\x20the\x20limi'+'t,\x20please\x20'+'adjust\x20the'+'m.'),this['_clusterCe'+'llsMaxData'][0x75*0xb+0x2*0x84a+-0x159b]=_0x322b33,this['_clusterCe'+'llsMaxData'][-0x18e*0x9+0x153f+0x20*-0x3a]=_0x3432ed,this['_clusterCe'+'llsMaxData'][-0x16e1*-0x1+0x1271+-0x2950]=_0xb64991,this['_clusterCe'+'llsDotData'][0x14f0+-0x8dc+-0xc14]=this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][0x22*-0x10c+0x1452+-0xf47*-0x1]=_0x322b33*_0xb64991*this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][-0x6ec*0x2+0x1*0x18fb+-0xb21]=_0x322b33*this['maxCellLig'+'htCount'],this['clusters']=new Uint8ClampedArray(_0x47c04e),this['counts']=new Int32Array(_0x2f6c76),this['_clusterTe'+'xtureSizeD'+'ata'][-0x97c*0x2+0x24a*-0xf+0x354e]=_0x2ec204,this['_clusterTe'+'xtureSizeD'+'ata'][0xd5f+-0x3c9+-0x995]=(0xd*-0x28e+0x23e2+0x1*-0x2ab)/_0x2ec204,this['_clusterTe'+'xtureSizeD'+'ata'][-0x1e33+0x50d*0x2+0x141b]=(-0x12e0+-0x9a5+0x1c86)/_0x1be153,this['releaseClu'+'sterTextur'+'e'](),this['clusterTex'+'ture']=this['lightsBuff'+'er']['createText'+'ure'](this['device'],_0x2ec204,_0x1be153,Ep,'ClusterTex'+'ture');}}['uploadText'+'ures'](){this['clusterTex'+'ture']['lock']()['set'](this['clusters']),this['clusterTex'+'ture']['unlock'](),this['lightsBuff'+'er']['uploadText'+'ures']();}['updateUnif'+'orms'](){this['_clusterSk'+'ipId']['setValue'](this['_usedLight'+'s']['length']>0x783+0x1f6f+-0x26f1?-0x1241*0x2+0x120a*0x2+0xb*0xa:-0x1*-0x1087+-0xf1f+0x167*-0x1),this['lightsBuff'+'er']['updateUnif'+'orms'](),this['_clusterWo'+'rldTexture'+'Id']['setValue'](this['clusterTex'+'ture']),this['_clusterMa'+'xCellsId']['setValue'](this['maxCellLig'+'htCount']);const _0x54f895=this['boundsDelt'+'a'];this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0xb78*-0x2+0x10e2+-0x1f*-0x32]=this['_cells']['x']/_0x54f895['x'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][-0x1bcd*0x1+-0x1b54+-0x1*-0x3722]=this['_cells']['y']/_0x54f895['y'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0x23bc+0x63*-0x51+-0x467]=this['_cells']['z']/_0x54f895['z'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']['setValue'](this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']),this['_clusterBo'+'undsMinDat'+'a'][0x84f+0x11e4+-0x1a33]=this['boundsMin']['x'],this['_clusterBo'+'undsMinDat'+'a'][-0x1d21+0x13be+0x259*0x4]=this['boundsMin']['y'],this['_clusterBo'+'undsMinDat'+'a'][0xc89*-0x1+0x3*0x50d+-0x29c]=this['boundsMin']['z'],this['_clusterBo'+'undsDeltaD'+'ata'][0x3a*-0x6a+-0x9f2+0x21f6]=_0x54f895['x'],this['_clusterBo'+'undsDeltaD'+'ata'][0x18d9*-0x1+-0x1*0x1e1d+-0x1*-0x36f7]=_0x54f895['y'],this['_clusterBo'+'undsDeltaD'+'ata'][0x2122+0x2*-0x315+-0x1af6]=_0x54f895['z'],this['_clusterTe'+'xtureSizeI'+'d']['setValue'](this['_clusterTe'+'xtureSizeD'+'ata']),this['_clusterBo'+'undsMinId']['setValue'](this['_clusterBo'+'undsMinDat'+'a']),this['_clusterBo'+'undsDeltaI'+'d']['setValue'](this['_clusterBo'+'undsDeltaD'+'ata']),this['_clusterCe'+'llsDotId']['setValue'](this['_clusterCe'+'llsDotData']),this['_clusterCe'+'llsMaxId']['setValue'](this['_clusterCe'+'llsMaxData']);}['evalLightC'+'ellMinMax'](_0x103127,_0xc7c11e,_0x5e61b8){_0xc7c11e['copy'](_0x103127['min']),_0xc7c11e['sub'](this['boundsMin']),_0xc7c11e['div'](this['boundsDelt'+'a']),_0xc7c11e['mul2'](_0xc7c11e,this['cells']),_0xc7c11e['floor'](),_0x5e61b8['copy'](_0x103127['max']),_0x5e61b8['sub'](this['boundsMin']),_0x5e61b8['div'](this['boundsDelt'+'a']),_0x5e61b8['mul2'](_0x5e61b8,this['cells']),_0x5e61b8['ceil'](),_0xc7c11e['max'](D['ZERO']),_0x5e61b8['min'](this['_cellsLimi'+'t']);}['collectLig'+'hts'](_0x5dafc1){const _0x4f2781=this['lightsBuff'+'er']['maxLights'],_0x114c8d=this['_usedLight'+'s'];let _0x5e69da=0x8ad+-0x2*0x910+0x974;_0x5dafc1['forEach'](_0x3394f9=>{const _0x26116a=!!(_0x3394f9['mask']&(Ss|di)),_0x18408f=_0x3394f9['type']===Ze&&_0x3394f9['_outerCone'+'Angle']===-0x1ca3*-0x1+-0x1b4c+-0x157;if(_0x3394f9['enabled']&&_0x3394f9['type']!==ve&&_0x3394f9['visibleThi'+'sFrame']&&_0x3394f9['intensity']>0x38a+0x1727*-0x1+0x139d*0x1&&_0x26116a&&!_0x18408f){if(_0x5e69da<_0x4f2781){let _0x22f4a1;_0x5e69da<_0x114c8d['length']?_0x22f4a1=_0x114c8d[_0x5e69da]:(_0x22f4a1=new U_(),_0x114c8d['push'](_0x22f4a1)),_0x22f4a1['light']=_0x3394f9,_0x3394f9['getBoundin'+'gBox'](Yd),_0x22f4a1['min']['copy'](Yd['getMin']()),_0x22f4a1['max']['copy'](Yd['getMax']()),_0x5e69da++;}else w['warnOnce']('Clustered\x20'+'lighting:\x20'+'more\x20than\x20'+(_0x4f2781-(-0x34d*-0xb+-0x5c1+-0xb*0x2c7))+('\x20lights\x20in'+'\x20the\x20frame'+',\x20ignoring'+'\x20some.'));}}),_0x114c8d['length']=_0x5e69da;}['evaluateBo'+'unds'](){const _0xa46e15=this['_usedLight'+'s'],_0x2219c8=this['boundsMin'],_0x557c79=this['boundsMax'];if(_0xa46e15['length']>-0x7ca+0x1062+-0x897){_0x2219c8['copy'](_0xa46e15[-0x1*-0xf97+-0x1*-0x1f75+0x1*-0x2f0b]['min']),_0x557c79['copy'](_0xa46e15[0xc22+0x11*-0x187+0xdd6]['max']);for(let _0x12352d=0x6e3*-0x3+0x4b1*-0x5+-0x2*-0x1610;_0x12352d<_0xa46e15['length'];_0x12352d++)_0x2219c8['min'](_0xa46e15[_0x12352d]['min']),_0x557c79['max'](_0xa46e15[_0x12352d]['max']);}else _0x2219c8['set'](-0xb3e+0x1*-0x29e+0x1*0xddc,0xcf3+-0x135d+0x66a,0x43*-0x7a+0xbc4+-0xa15*-0x2),_0x557c79['set'](-0x2*0x3df+0x22*-0x67+-0x5*-0x449,0x4f8+-0x19d2*-0x1+-0x1ec9,-0x5da+0x1011+-0xa36);this['boundsDelt'+'a']['sub2'](_0x557c79,_0x2219c8),this['lightsBuff'+'er']['setBounds'](_0x2219c8,this['boundsDelt'+'a']);}['updateClus'+'ters'](_0x5c5f7e){this['counts']['fill'](0xc45+0x11+0x62b*-0x2),this['clusters']['fill'](0x1dc3+0xff4+-0xf3d*0x3),this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x5c5f7e?_0x5c5f7e['areaLights'+'Enabled']:!(0xc1a+0x8*-0x2e2+-0x1*-0xaf7);const _0x18f1b5=this['_cells']['x'],_0x144757=this['_cells']['z'],_0x144e72=this['counts'],_0x16cca2=this['_maxCellLi'+'ghtCount'],_0x4c7d24=this['clusters'],_0x1d7216=this['maxCellLig'+'htCount'];let _0x29caa9=!(-0x1*-0xf13+0x2477+0x3389*-0x1);const _0x411399=this['_usedLight'+'s'];for(let _0xcf2db0=-0x1a0*0xb+0x88b+-0x5*-0x1de;_0xcf2db0<_0x411399['length'];_0xcf2db0++){const _0x1660f4=_0x411399[_0xcf2db0],_0x62ec65=_0x1660f4['light'];this['lightsBuff'+'er']['addLightDa'+'ta'](_0x62ec65,_0xcf2db0),this['evalLightC'+'ellMinMax'](_0x1660f4,rc,ac);const _0x211366=rc['x'],_0x5b28d2=ac['x'],_0x2d9294=rc['y'],_0x2f6b92=ac['y'],_0x497a3e=rc['z'],_0x242af5=ac['z'];for(let _0x2f68b2=_0x211366;_0x2f68b2<=_0x5b28d2;_0x2f68b2++)for(let _0x5801cc=_0x497a3e;_0x5801cc<=_0x242af5;_0x5801cc++)for(let _0x286983=_0x2d9294;_0x286983<=_0x2f6b92;_0x286983++){const _0x1a252c=_0x2f68b2+_0x18f1b5*(_0x5801cc+_0x286983*_0x144757),_0x5cee6f=_0x144e72[_0x1a252c];_0x5cee6f<_0x16cca2?(_0x4c7d24[_0x1d7216*_0x1a252c+_0x5cee6f]=_0xcf2db0,_0x144e72[_0x1a252c]=_0x5cee6f+(-0x198f+-0x25a3*0x1+-0x1511*-0x3)):_0x29caa9=!(0x1e7b+-0x71*-0x4d+0x2*-0x203c);}}_0x29caa9&&this['reportCoun'+'t']<0x212d+-0x9f1+-0x1737&&(console['warn']('Too\x20many\x20l'+'ights\x20in\x20l'+'ight\x20clust'+'er\x20'+this['name']+(',\x20please\x20a'+'djust\x20para'+'meters.')+(this['reportCoun'+'t']===0x2050+-0x2275+0x229?'\x20Giving\x20up'+'\x20on\x20report'+'ing\x20it.':'')),this['reportCoun'+'t']++);}['update'](_0x848cbc,_0x5c3af6=null){this['updatePara'+'ms'](_0x5c3af6),this['updateCell'+'s'](),this['collectLig'+'hts'](_0x848cbc),this['evaluateBo'+'unds'](),this['updateClus'+'ters'](_0x5c3af6),this['uploadText'+'ures']();}['activate'](){this['updateUnif'+'orms']();}}const B_=0x23f+0x23f*0xd+-0x1f70+0.39996322972865306,Nl={'circlePoint'(_0x25eb20){const _0x11a77d=Math['sqrt'](Math['random']()),_0x5db247=Math['random']()*(0x116d+-0xa42+0x1*-0x729)*Math['PI'];_0x25eb20['x']=_0x11a77d*Math['cos'](_0x5db247),_0x25eb20['y']=_0x11a77d*Math['sin'](_0x5db247);},'circlePointDeterministic'(_0xd47541,_0x20353c,_0x2bec74){const _0x2822bb=_0x20353c*B_,_0x14236d=Math['sqrt'](_0x20353c)/Math['sqrt'](_0x2bec74);_0xd47541['x']=_0x14236d*Math['cos'](_0x2822bb),_0xd47541['y']=_0x14236d*Math['sin'](_0x2822bb);},'spherePointDeterministic'(_0x3e3e54,_0x615824,_0x5d0062,_0x5a5c9c=0x3*-0x1b4+0x225d*0x1+0x1d41*-0x1,_0x311d56=-0x1*-0x44f+-0x1443+0x2b*0x5f){_0x5a5c9c=0x26b*-0x5+0x13df+-0x7c7*0x1-(-0x75b+-0x2*0x71d+0x1*0x1597)*_0x5a5c9c,_0x311d56=-0x1953+-0x1*0x2aa+-0x2*-0xdff-(-0xbd8+-0x9f4+-0x1*-0x15ce)*_0x311d56;const _0x3a49aa=Y['lerp'](_0x5a5c9c,_0x311d56,_0x615824/_0x5d0062),_0x3608fe=Math['sqrt'](-0xbe6*0x3+-0x16f6+0x3aa9-_0x3a49aa*_0x3a49aa),_0x172d2d=B_*_0x615824;_0x3e3e54['x']=Math['cos'](_0x172d2d)*_0x3608fe,_0x3e3e54['y']=_0x3a49aa,_0x3e3e54['z']=Math['sin'](_0x172d2d)*_0x3608fe;},'radicalInverse'(_0x81d806){let _0x473bfa=(_0x81d806<<-0x103*0xd+0x1a9+0x3a*0x33|_0x81d806>>>0x116f*0x2+0x1d41+-0x2c9*0x17)>>>0x17*-0xf6+-0x1747+-0x2d61*-0x1;return _0x473bfa=((_0x473bfa&0x48696568+0x4dfd0cc1*0x1+0x2*-0x20888e6a)<<0x42*0x96+0x636+-0x2ce1|(_0x473bfa&-0x1554dd957+0xc250df15+0x4abe08b*0x44)>>>-0x1*-0x1931+0x18*0x6a+-0x4*0x8c8)>>>-0x1*0x14e+-0xf94+0x10e2,_0x473bfa=((_0x473bfa&0x358832a+-0x30697d7b+-0x60442d84*-0x1)<<0x3*0x745+0x4b*0x61+0x1*-0x3238|(_0x473bfa&0x1*0x16ba8de0c+0x11eddd0af+-0x1bdb9e1ef)>>>-0x221b*0x1+-0x410+0x262d)>>>0xe0a+0x108+-0xf12,_0x473bfa=((_0x473bfa&-0x1cc970e3*-0x1+-0x1cbd08e5+0xf02a711)<<-0x1370+0x194e+0xe*-0x6b|(_0x473bfa&0xf8d77c*-0x194+-0x1b9ffc799*0x1+0x188d12d*0x2bd)>>>-0xec+0x1a9c+0x66b*-0x4)>>>-0xf38+-0x39*-0x94+-0x11bc,_0x473bfa=((_0x473bfa&0x11a6f04+0x62ff36*-0x1+0x479131)<<0x40d+0x8*-0x308+0x143b|(_0x473bfa&0x4*0x4d1957c5+0x1e2bddac*0x2+0x38de0db6*-0x2)>>>-0x9*0x3d3+0x1882*0x1+0x9f1)>>>-0x360+-0xb58+0x9d*0x18,_0x473bfa*(-0x196a+0x1648+-0x322*-0x1+2.3283064365386963e-10);}},BE={'linear':'decodeLine'+'ar','srgb':'decodeGamm'+'a','rgbm':'decodeRGBM','rgbe':'decodeRGBE','rgbp':'decodeRGBP','xy':'unpackNorm'+'alXY','xyz':'unpackNorm'+'alXYZ'},zE={'linear':'encodeLine'+'ar','srgb':'encodeGamm'+'a','rgbm':'encodeRGBM','rgbe':'encodeRGBE','rgbp':'encodeRGBP'};class Tr{static['decodeFunc'](_0x2ccddf){return BE[_0x2ccddf]??'decodeGamm'+'a';}static['encodeFunc'](_0x23f697){return zE[_0x23f697]??'encodeGamm'+'a';}}const z_=_0x5978f9=>{switch(_0x5978f9){case tu:return'Cubemap';case Gx:return'Octahedral';default:return'Equirect';}},nc=(_0x4dbec4,_0x4b51e0,_0x23fee5)=>{if(_0x4dbec4<=0x3*-0x515+0x171f+-0x7e0)_0x4b51e0[_0x23fee5+(0x214f+0x1*-0x2365+0x216)]=0x2dc*0x2+0x37*0x32+-0x1076,_0x4b51e0[_0x23fee5+(0x56*-0x1d+0x995*-0x1+0x1*0x1354)]=0x2405+-0x45+0x11e*-0x20,_0x4b51e0[_0x23fee5+(-0xbe0*0x1+-0x2607+-0x31e9*-0x1)]=-0x1a8f+0x1*0x1126+-0x21*-0x49,_0x4b51e0[_0x23fee5+(-0x1d31+0x1d99*-0x1+-0x1*-0x3acd)]=-0x1cb5+-0x739+0x23ee;else{if(_0x4dbec4>=-0x109*0x1+-0x1*-0x1fc7+0x3*-0xa3f)_0x4b51e0[_0x23fee5+(0x1898+-0x571+-0x1327)]=-0x1*-0x59+0x550+-0x2*0x255,_0x4b51e0[_0x23fee5+(0xc92*0x1+0x176b+-0x23fc)]=0x1da0+-0x1235*0x1+-0xb6b,_0x4b51e0[_0x23fee5+(0x1*0x1c+0x5e*0x66+-0x258e)]=-0xad9*-0x2+0xb45+-0x20f7,_0x4b51e0[_0x23fee5+(0x11ef+0x1*0x113d+-0x2329)]=0x2*-0x853+-0x1045+0x20eb;else{let _0xe85ebf=(-0x95c+-0x1*-0x23ca+-0x267*0xb)*_0x4dbec4%(0x1*-0x1ccd+0x25ff+-0xb5*0xd),_0x54872a=(-0x8c1+0x1*0x1db9+-0x13f9)*_0x4dbec4%(0x1*0x25c1+0x388+-0x2948),_0x16e1d9=(0x6f*-0x1e1+-0x17179+0x34009)*_0x4dbec4%(-0x1b3e+-0x4c*0x39+0xeb9*0x3);const _0x16ea15=(0x3*-0x2c00e4+0x1b0d84*0x4+0x114cf9b)*_0x4dbec4%(-0x2608*0x1+0x503*0x2+0x65*0x47);_0xe85ebf-=_0x54872a/(0xcaa+-0x5ca*-0x2+-0x173f*0x1),_0x54872a-=_0x16e1d9/(0x10*-0x9f+0xe8d+-0x39e),_0x16e1d9-=_0x16ea15/(-0x443*-0x5+-0x243a+0x54e*0x3),_0x4b51e0[_0x23fee5+(-0x1a9b+-0x307+0x1da2)]=Math['min'](0x3a5*0x6+0xe8e+-0xbcf*0x3,Math['floor'](_0xe85ebf*(0x6*-0x391+0x1104+0x1*0x562))),_0x4b51e0[_0x23fee5+(0x954*-0x1+0x1867+-0xf12)]=Math['min'](-0x74*0x40+-0x1b47+-0x1ca3*-0x2,Math['floor'](_0x54872a*(-0x117*0x9+0x13ee+-0x91f))),_0x4b51e0[_0x23fee5+(0x919*0x2+-0x1*0x23b+0x13*-0xd7)]=Math['min'](0x2*0x10f+-0x2388+0x2269,Math['floor'](_0x16e1d9*(-0x924+-0x1eaa+0x1*0x28ce))),_0x4b51e0[_0x23fee5+(-0x178b+-0x39f*-0x2+0x1050)]=Math['min'](0xa35+-0x23*-0x71+0x18a9*-0x1,Math['floor'](_0x16ea15*(-0xd44+0xb0e+0x336)));}}},VE=_0x5c92a0=>{const _0xb5d59b=_0x5c92a0['length'],_0x1f8638=Math['min'](_0xb5d59b,0xee+-0x224a+0x235c),_0x4aa63e=Math['ceil'](_0xb5d59b/_0x1f8638),_0x6a91fd=new Uint8Array(_0x1f8638*_0x4aa63e*(0x40d*0x2+0x284+-0x17*0x76));let _0x2929ed=0x98*0x3+-0x1*0xa3c+0x874;for(let _0x354984=-0x3*-0x8cc+-0x117*0x17+-0x1*0x153;_0x354984<_0xb5d59b;_0x354984+=-0x1f89+0xc52+-0x1*-0x133b)nc(_0x5c92a0[_0x354984+(0x4*0x3f1+-0x2136+0x2*0x8b9)]*(-0x24cc+0x1abb*-0x1+-0x27*-0x1a1+0.5)+(0xeb1*-0x1+-0xd03+0x1bb4+0.5),_0x6a91fd,_0x2929ed+(0xb3*0x8+-0x1191+0xbf9)),nc(_0x5c92a0[_0x354984+(-0x22df+-0x3*-0x4d2+0x146a)]*(-0x1799+-0x16d3*-0x1+0x2*0x63+0.5)+(-0xd80+-0x12d3+0x2053+0.5),_0x6a91fd,_0x2929ed+(0x25e8*-0x1+-0x11*-0x248+-0x2*0x6e)),nc(_0x5c92a0[_0x354984+(0xd37*-0x1+-0x196c+0x26a5)]*(0x462+-0x38a*-0x7+-0x1d28+0.5)+(-0x1cc6+0xd0*0x16+-0xa*-0x117+0.5),_0x6a91fd,_0x2929ed+(0x10cf*0x1+0x52c+-0x751*0x3)),nc(_0x5c92a0[_0x354984+(0x17*0xd1+0x1*0x1fa9+0x14b*-0x27)]/(0x693+-0xcd5+0x64a),_0x6a91fd,_0x2929ed+(-0x1a77+-0x1e1f+-0x1c51*-0x2)),_0x2929ed+=0x2*-0xc37+0x196e+-0xf0;return{'width':_0x1f8638,'height':_0x4aa63e,'data':_0x6a91fd};},GE=(_0x53ab8c,_0x1878e5,_0x54bd2a,_0x39e8ae)=>{const _0x30b2e9=_0x54bd2a*(-0x1002+-0x133a+0x233e)*Math['PI'],_0x2a9bf1=Math['pow'](-0x207e*0x1+-0x5*-0xac+0x1d23-_0x1878e5,(-0x2c5*0xd+0x6e9+0x1d19)/(_0x39e8ae+(-0xd6*0x19+-0x9*0x2fb+0x12a*0x29))),_0x59a2a1=Math['sqrt'](0x1530+0x2*-0xc8e+0x3ed-_0x2a9bf1*_0x2a9bf1);_0x53ab8c['set'](Math['cos'](_0x30b2e9)*_0x59a2a1,Math['sin'](_0x30b2e9)*_0x59a2a1,_0x2a9bf1)['normalize']();},HE=(_0x59481b,_0x267689,_0x29a4f8)=>{const _0x48f361=_0x29a4f8*(-0xe78+-0x9b*0xd+-0x3*-0x773)*Math['PI'],_0x1ef745=Math['sqrt'](-0x13f3+0x255a+0x106*-0x11-_0x267689),_0x16901a=Math['sqrt'](_0x267689);_0x59481b['set'](Math['cos'](_0x48f361)*_0x16901a,Math['sin'](_0x48f361)*_0x16901a,_0x1ef745)['normalize']();},WE=(_0x5876c8,_0x3ae875,_0x2807cf,_0x22f78e)=>{const _0x3442e0=_0x2807cf*(-0x1*0x4b2+0x53*-0x74+0x2a50)*Math['PI'],_0x402343=Math['sqrt']((0x15ee+-0x1*-0x206d+-0x2*0x1b2d-_0x3ae875)/(0xccd+-0xa27*0x2+-0x2*-0x3c1+(_0x22f78e*_0x22f78e-(0x5*-0x5e1+-0x97*-0x2b+0x409))*_0x3ae875)),_0x435513=Math['sqrt'](-0x610+-0x2a1*-0xc+-0x197b-_0x402343*_0x402343);_0x5876c8['set'](Math['cos'](_0x3442e0)*_0x435513,Math['sin'](_0x3442e0)*_0x435513,_0x402343)['normalize']();},$E=(_0x34a701,_0x3fae74)=>{const _0x5ceeb4=_0x34a701*_0x3fae74,_0x3567cf=_0x3fae74/(0xb*-0x233+-0x1f3c+0x37*0x102-_0x34a701*_0x34a701+_0x5ceeb4*_0x5ceeb4);return _0x3567cf*_0x3567cf*((0x5*-0x258+-0x11*-0xd3+0x24a*-0x1)/Math['PI']);},XE=(_0x42bb77,_0x3a032c)=>{const _0x2241cb=new D(),_0x4bac84=[];for(let _0x2b12fc=0xdae+-0x4*-0x247+-0x16ca;_0x2b12fc<_0x42bb77;++_0x2b12fc)GE(_0x2241cb,_0x2b12fc/_0x42bb77,Nl['radicalInv'+'erse'](_0x2b12fc),_0x3a032c),_0x4bac84['push'](_0x2241cb['x'],_0x2241cb['y'],_0x2241cb['z'],0xdcd+0x12ad+-0x207a);return _0x4bac84;},qE=(_0x306b86,_0x267bad)=>{const _0x646c59=_0x267bad/_0x306b86,_0x14d5e4=new D(),_0x51f4e9=[];for(let _0x459adb=0x1880+0x1d37+-0x35b7;_0x459adb<_0x306b86;++_0x459adb){HE(_0x14d5e4,_0x459adb/_0x306b86,Nl['radicalInv'+'erse'](_0x459adb));const _0x2f9e9b=_0x14d5e4['z']/Math['PI'],_0x510d52=(0xfac+0x9f1+-0x199d+0.5)*Math['log2'](_0x646c59/_0x2f9e9b);_0x51f4e9['push'](_0x14d5e4['x'],_0x14d5e4['y'],_0x14d5e4['z'],_0x510d52);}return _0x51f4e9;},jE={0x10:{0x2:0x1a,0x8:0x14,0x20:0x11,0x80:0x10,0x200:0x10},0x20:{0x2:0x35,0x8:0x28,0x20:0x22,0x80:0x20,0x200:0x20},0x80:{0x2:0xd6,0x8:0xa3,0x20:0x8b,0x80:0x82,0x200:0x80},0x400:{0x2:0x6ba,0x8:0x51e,0x20:0x45a,0x80:0x411,0x200:0x401}},YE=(_0xa74b47,_0x1111cc)=>{const _0x6adc1c=jE[_0xa74b47];return _0x6adc1c&&_0x6adc1c[_0x1111cc]||_0xa74b47;},KE=(_0x4dae5f,_0x3d6502,_0x126e50)=>{const _0x57f9c1=_0x126e50/_0x4dae5f,_0x4285a9=0x8a1+-0x900+-0x8*-0xc-Math['log2'](_0x3d6502)/(-0x3*0x18d+-0x1761+0x1c13),_0x19c0ce=_0x4285a9*_0x4285a9,_0x68cd92=new D(),_0xbb8e54=new D(),_0x1e47fa=new D(0x2625+0x104b+-0x3670,-0xc*-0x19a+-0x1d7b*-0x1+-0x30b3,-0x1*0x765+-0x1*-0x1556+-0x2*0x6f8),_0x17c2f9=[],_0x1a1cdf=YE(_0x4dae5f,_0x3d6502);for(let _0x9ad902=0x1532*0x1+-0x593+-0xf9f;_0x9ad902<_0x1a1cdf;++_0x9ad902){WE(_0x68cd92,_0x9ad902/_0x1a1cdf,Nl['radicalInv'+'erse'](_0x9ad902),_0x19c0ce);const _0x56500=_0x68cd92['z'];if(_0xbb8e54['set'](_0x68cd92['x'],_0x68cd92['y'],_0x68cd92['z'])['mulScalar']((0x267b*0x1+-0x7*0x155+-0x1d26)*_0x56500)['sub'](_0x1e47fa),_0xbb8e54['z']>0x5b*0x7+-0xf1+-0x18c){const _0x2cfb2d=$E(Math['min'](-0xead+-0x4*0x291+0x18f2,_0x56500),_0x19c0ce)/(0x88d+0x2637+0x40*-0xbb)+(0x2458+-0x17b*0x8+-0x1880+0.001),_0x21d011=(-0xc15*-0x3+0x896*-0x3+0x5*-0x219+0.5)*Math['log2'](_0x57f9c1/_0x2cfb2d);_0x17c2f9['push'](_0xbb8e54['x'],_0xbb8e54['y'],_0xbb8e54['z'],_0x21d011);}}for(;_0x17c2f9['length']<_0x4dae5f*(-0x84a*-0x2+0xdef+-0x1e7f);)_0x17c2f9['push'](0xf5a+0x1*-0x10d3+0x179,0xbff+-0xb*0x311+0x15bc,-0x2*0xc51+0x1882+0x20,-0x21*0xaf+0x10b7*0x1+-0x2ec*-0x2);return _0x17c2f9;},ZE=(_0x5de383,_0x48b0c5,_0x4bcf32)=>{const _0x3aa525=VE(_0x4bcf32);return new _e(_0x5de383,{'name':_0x48b0c5,'width':_0x3aa525['width'],'height':_0x3aa525['height'],'mipmaps':!(0x1d82+0xa3*0x10+-0x3*0xd3b),'minFilter':Te,'magFilter':Te,'levels':[_0x3aa525['data']]});};class xv{constructor(_0x30a131=!(0x423+-0x1*-0x19e5+0x1f*-0xf8)){h(this,'map',new Map()),this['destroyCon'+'tent']=_0x30a131;}['destroy'](){this['destroyCon'+'tent']&&this['map']['forEach']((_0x15dd6d,_0x1f6702)=>{_0x15dd6d['destroy']();});}['get'](_0x2842cf,_0x8b6726){if(!this['map']['has'](_0x2842cf)){const _0x18b55f=_0x8b6726();return this['map']['set'](_0x2842cf,_0x18b55f),_0x18b55f;}return this['map']['get'](_0x2842cf);}}const QE=new xv(!(-0x1c85+0xd*-0x248+-0x16*-0x2a5)),JE=new Kt(),dm=(_0x4309a3,_0x1009c2,_0x3a89d4)=>JE['get'](_0x4309a3,()=>new xv())['get'](_0x1009c2,()=>ZE(_0x4309a3,_0x1009c2,QE['get'](_0x1009c2,_0x3a89d4))),eb=(_0x35bbff,_0x4cf56b,_0x4d15c2)=>{const _0x419a17='lambert-sa'+'mples-'+_0x4cf56b+'-'+_0x4d15c2;return dm(_0x35bbff,_0x419a17,()=>qE(_0x4cf56b,_0x4d15c2));},tb=(_0x415600,_0x1d448b,_0x1ca2aa)=>{const _0x2b5ddb='phong-samp'+'les-'+_0x1d448b+'-'+_0x1ca2aa;return dm(_0x415600,_0x2b5ddb,()=>XE(_0x1d448b,_0x1ca2aa));},sb=(_0x5f1343,_0x58f496,_0x3fb89c,_0x4d160a)=>{const _0x568f6b='ggx-sample'+'s-'+_0x58f496+'-'+_0x3fb89c+'-'+_0x4d160a;return dm(_0x5f1343,_0x568f6b,()=>KE(_0x58f496,_0x3fb89c,_0x4d160a));};function vi(_0x37bb57,_0x9a693c,_0x4799d4={}){var _0x560393,_0x58579e;w['assert'](_0x37bb57 instanceof _e&&_0x9a693c instanceof _e,'source\x20and'+'\x20target\x20mu'+'st\x20be\x20text'+'ures');const _0x1dc054=_0x4799d4['seamPixels']??-0x260a+0x1123+0x14e7*0x1,_0x4bc211=(((_0x560393=_0x4799d4['rect'])==null?void(0xc93+0x3*0xb76+0x1*-0x2ef5):_0x560393['z'])??_0x9a693c['width'])-_0x1dc054*(0x1971+0x427*0x1+-0xecb*0x2),_0x2d1bc8=(((_0x58579e=_0x4799d4['rect'])==null?void(-0x1f36+-0x1b3d+0x3a73):_0x58579e['w'])??_0x9a693c['height'])-_0x1dc054*(0x31*0x2a+0xe99*0x2+-0xa*0x3b9);if(_0x4bc211<0x74a+-0x1*-0x2047+-0x2790||_0x2d1bc8<0x2494+0x1321+-0x37b4)return!(-0x53*0x2+-0x2367+0x8e*0x41);const _0x3a255a={'none':'reproject','lambert':'prefilterS'+'amplesUnwe'+'ighted','phong':'prefilterS'+'amplesUnwe'+'ighted','ggx':'prefilterS'+'amples'},_0x3eddbf=_0x4799d4['hasOwnProp'+'erty']('specularPo'+'wer')?_0x4799d4['specularPo'+'wer']:0xc8b+-0x12fa+0x670,_0x294e03=_0x4799d4['hasOwnProp'+'erty']('face')?_0x4799d4['face']:null,_0x11e687=_0x4799d4['hasOwnProp'+'erty']('distributi'+'on')?_0x4799d4['distributi'+'on']:_0x3eddbf===0x2*0x1369+0x159b+-0x3c6c?'none':'phong',_0xc57d0f=_0x3a255a[_0x11e687]||'reproject',_0x5ad0ed=_0xc57d0f['startsWith']('prefilterS'+'amples'),_0x5a732d=Tr['decodeFunc'](_0x37bb57['encoding']),_0x162c37=Tr['encodeFunc'](_0x9a693c['encoding']),_0x22f8af='sample'+z_(_0x37bb57['projection']),_0x31c023='getDirecti'+'on'+z_(_0x9a693c['projection']),_0x325bee=_0x4799d4['hasOwnProp'+'erty']('numSamples')?_0x4799d4['numSamples']:-0x3b9*0x6+0xf56+0xb00,_0x10fad5='ReprojectS'+'hader:'+_0xc57d0f+'_'+_0x5a732d+'_'+_0x162c37+'_'+_0x22f8af+'_'+_0x31c023+'_'+_0x325bee,_0x9c2a28=_0x37bb57['device'];let _0x1e0d43=Hn(_0x9c2a28)['getCachedS'+'hader'](_0x10fad5);if(!_0x1e0d43){const _0x14f753=new Map();_0x5ad0ed&&_0x14f753['set']('USE_SAMPLE'+'S_TEX',''),_0x37bb57['cubemap']&&_0x14f753['set']('CUBEMAP_SO'+'URCE',''),_0x14f753['set']('{PROCESS_F'+'UNC}',_0xc57d0f),_0x14f753['set']('{DECODE_FU'+'NC}',_0x5a732d),_0x14f753['set']('{ENCODE_FU'+'NC}',_0x162c37),_0x14f753['set']('{SOURCE_FU'+'NC}',_0x22f8af),_0x14f753['set']('{TARGET_FU'+'NC}',_0x31c023),_0x14f753['set']('{NUM_SAMPL'+'ES}',_0x325bee),_0x14f753['set']('{NUM_SAMPL'+'ES_SQRT}',Math['round'](Math['sqrt'](_0x325bee))['toFixed'](0x737+0x1*0x9f7+-0x112d));const _0x8dab94=_0x9c2a28['isWebGPU'],_0x546add=Pe['get'](_0x9c2a28,_0x8dab94?it:Fe),_0x36dcc4=new Map();_0x36dcc4['set']('decodePS',_0x546add['get']('decodePS')),_0x36dcc4['set']('encodePS',_0x546add['get']('encodePS')),_0x1e0d43=$t['createShad'+'er'](_0x9c2a28,{'uniqueName':_0x10fad5,'attributes':{'vertex_position':Me},'vertexChunk':'reprojectV'+'S','fragmentChunk':'reprojectP'+'S','fragmentIncludes':_0x36dcc4,'fragmentDefines':_0x14f753});}Q['pushGpuMar'+'ker'](_0x9c2a28,'ReprojectT'+'exture'),_0x9c2a28['setBlendSt'+'ate'](pt['NOBLEND']);const _0x20ad18=_0x9c2a28['scope']['resolve'](_0x37bb57['cubemap']?'sourceCube':'sourceTex');w['assert'](_0x20ad18),_0x20ad18['setValue'](_0x37bb57);const _0x343962=_0x9c2a28['scope']['resolve']('params'),_0xfad28f=_0x9c2a28['scope']['resolve']('uvMod');_0x1dc054>0x1*0x16df+-0x1026+-0x6b9?_0xfad28f['setValue']([(_0x4bc211+_0x1dc054*(0x1235+0x1*0xa2a+-0x1c5d*0x1))/_0x4bc211,(_0x2d1bc8+_0x1dc054*(0x10*-0x5d+-0xb*0x233+0x1*0x1e03))/_0x2d1bc8,-_0x1dc054/_0x4bc211,-_0x1dc054/_0x2d1bc8]):_0xfad28f['setValue']([-0x26e6+0x5ba+-0x1bf*-0x13,0x101f+0x2458+-0x3476,0x1f*-0x116+0x99e+0x180c,0x1*0x773+-0xd6b+-0x1*-0x5f8]);const _0x3c9350=[0x2*-0xd23+0x1*0x1855+0x1f1,_0x9a693c['width']*_0x9a693c['height']*(_0x9a693c['cubemap']?0x150d*-0x1+0xcc7+0x84c:-0x1e61+0x9ac+0x14b6),_0x37bb57['width']*_0x37bb57['height']*(_0x37bb57['cubemap']?0x1572+0x13cc+-0x149c*0x2:-0x167e+0x2ab+0x13d4)];if(_0x5ad0ed){const _0x131813=_0x37bb57['width']*_0x37bb57['height']*(_0x37bb57['cubemap']?0xd61+0xe0+-0xe3b:-0x120d+-0x13c9*0x1+-0x25d7*-0x1),_0x4a1db2=_0x11e687==='ggx'?sb(_0x9c2a28,_0x325bee,_0x3eddbf,_0x131813):_0x11e687==='lambert'?eb(_0x9c2a28,_0x325bee,_0x131813):tb(_0x9c2a28,_0x325bee,_0x3eddbf);_0x9c2a28['scope']['resolve']('samplesTex')['setValue'](_0x4a1db2),_0x9c2a28['scope']['resolve']('samplesTex'+'InverseSiz'+'e')['setValue']([(-0x167*0xe+0x1a6d+-0x6ca)/_0x4a1db2['width'],(0x1f*-0xb7+-0x698+0x1cc2)/_0x4a1db2['height']]);}for(let _0x9f7112=0x1*0xe5d+-0x1c9*0x1+0x14*-0xa1;_0x9f7112<(_0x9a693c['cubemap']?0x17*0xbf+-0x243e+0x131b:0x13e0+0x25a8+-0x3987);_0x9f7112++)if(_0x294e03===null||_0x9f7112===_0x294e03){const _0x230e8c=new gt({'colorBuffer':_0x9a693c,'face':_0x9f7112,'depth':!(-0x1*-0x18e6+0x1956+-0x323b),'flipY':_0x9c2a28['isWebGPU']});_0x3c9350[0x2*0x82+-0xb*-0x305+0x3*-0xb69]=_0x9f7112,_0x343962['setValue'](_0x3c9350),Ar(_0x9c2a28,_0x230e8c,_0x1e0d43,_0x4799d4==null?void(-0xf55+0x2*0x788+-0x1*-0x45):_0x4799d4['rect']),_0x230e8c['destroy']();}return Q['popGpuMark'+'er'](_0x9c2a28),!(-0x8b*0x3d+0x4*0x5ad+0xa6b*0x1);}const Kd=(_0x2f6600,_0x8fbfb1=0xf*-0x7+0x35*0x1+0x34)=>0x18e8+-0xc5*-0x3+-0x183*0x12+Math['floor'](Math['log2'](Math['max'](_0x2f6600,_0x8fbfb1))),ib=_0x21b92e=>_0x21b92e['textureHal'+'fFloatRend'+'erable'],rb=_0x1e8a7d=>_0x1e8a7d['textureFlo'+'atRenderab'+'le'],ab=_0x52e548=>ib(_0x52e548)?nt:rb(_0x52e548)?Xt:Ne,nb=_0x59d610=>Ne,ob=(_0x10c404,_0x564e84,_0x525d1f,_0x2de606)=>new _e(_0x10c404,{'name':'lighting-'+_0x564e84,'cubemap':!(-0x1321+-0xb1*-0x34+-0x10d3*0x1),'width':_0x564e84,'height':_0x564e84,'format':_0x525d1f,'type':Qo,'addressU':ue,'addressV':ue,'mipmaps':!(0x22a3+0x6f1*0x2+-0x3084)});class Tv{static['generateSk'+'yboxCubema'+'p'](_0x21c735,_0x552394){const _0x5ebfd0=_0x21c735['device'];Q['pushGpuMar'+'ker'](_0x5ebfd0,'genSkyboxC'+'ubemap');const _0x4ea8c5=ob(_0x5ebfd0,_0x552394||(_0x21c735['cubemap']?_0x21c735['width']:_0x21c735['width']/(0x2400+0x1fae+-0x3*0x168e)),Ne);return vi(_0x21c735,_0x4ea8c5,{'numSamples':0x400}),Q['popGpuMark'+'er'](_0x5ebfd0),_0x4ea8c5;}static['generateLi'+'ghtingSour'+'ce'](_0x30cc74,_0x4c69a5){const _0x1c2960=_0x30cc74['device'];Q['pushGpuMar'+'ker'](_0x1c2960,'genLightin'+'gSource');const _0x3f0241=ab(_0x1c2960),_0x513d73=(_0x4c69a5==null?void(0xa61*-0x1+0x5*0x3d+0x15*0x70):_0x4c69a5['target'])||new _e(_0x1c2960,{'name':'lighting-s'+'ource','cubemap':!(0x1dba+-0x1454+0x1*-0x966),'width':(_0x4c69a5==null?void(-0x399*0x1+0x12*0x22a+0x3*-0xbc9):_0x4c69a5['size'])||0x20af+0x2*0x1189+-0x4341,'height':(_0x4c69a5==null?void(-0xf19+0x16ef+0x2*-0x3eb):_0x4c69a5['size'])||-0x8*0x16d+-0x2f*-0x69+-0x75f,'format':_0x3f0241,'type':_0x3f0241===Ne?Qo:Ds,'addressU':ue,'addressV':ue,'mipmaps':!(-0x11b+0x140f*-0x1+0x152a)});return vi(_0x30cc74,_0x513d73,{'numSamples':_0x30cc74['mipmaps']?0x8b*-0x41+-0x1*-0x1273+0x10d9*0x1:-0x229f+0x19a3+0x1*0xcfc}),Q['popGpuMark'+'er'](_0x1c2960),_0x513d73;}static['generateAt'+'las'](_0x158928,_0x366ba4){const _0x7e5d22=_0x158928['device'],_0x57be14=nb();Q['pushGpuMar'+'ker'](_0x7e5d22,'genAtlas');const _0x18f89c=(_0x366ba4==null?void(0xbce+0x23fe+0x284*-0x13):_0x366ba4['target'])||new _e(_0x7e5d22,{'name':'envAtlas','width':(_0x366ba4==null?void(-0x7*0x382+-0x58*-0x13+0x301*0x6):_0x366ba4['size'])||0x2*0x128f+-0x1be0+0x67*-0x12,'height':(_0x366ba4==null?void(-0x1*-0xd9+-0x1cb8*0x1+0x1bdf):_0x366ba4['size'])||0x1550+-0x12a5+-0xab,'format':_0x57be14,'type':Qo,'projection':Vm,'addressU':ue,'addressV':ue,'mipmaps':!(0x11*0x219+0x1*0xaf9+-0xad*0x45)});Q['pushGpuMar'+'ker'](_0x7e5d22,'mipmaps');const _0x5343e5=_0x18f89c['width']/(0x1a12+0xe78+-0x1345*0x2),_0x2c1fce=new re(-0x5dc+-0x3*-0xa9b+-0x19f5,0x1*-0x1807+0x5*0x149+-0x5de*-0x3,(-0x21*-0x84+-0xe8f+-0x75)*_0x5343e5,(-0x2454+-0x84*-0x1+0xf8*0x26)*_0x5343e5),_0x4a8002=Kd(0x1d33+0x3*0xd5+-0xf59*0x2)-Kd(-0x82e+-0x26c0+0x2ef2);for(let _0x28a6ca=-0x2e7*-0xd+-0xe6e+-0x174d;_0x28a6ca<_0x4a8002;++_0x28a6ca)vi(_0x158928,_0x18f89c,{'numSamples':0x1,'rect':_0x2c1fce,'seamPixels':_0x5343e5}),_0x2c1fce['x']+=_0x2c1fce['w'],_0x2c1fce['y']+=_0x2c1fce['w'],_0x2c1fce['z']=Math['max'](-0x7*0xf1+-0x1*0xbd5+0x126d,Math['floor'](_0x2c1fce['z']*(0xd12+0xb8*0x1+-0xdca*0x1+0.5))),_0x2c1fce['w']=Math['max'](-0x1e5*-0x9+-0x1d*-0x7c+-0x1f18,Math['floor'](_0x2c1fce['w']*(0x6*0xfb+-0xef3+-0x911*-0x1+0.5)));Q['popGpuMark'+'er'](_0x7e5d22),Q['pushGpuMar'+'ker'](_0x7e5d22,'reflection'+'s'),_0x2c1fce['set'](0xc23+-0x7*0x376+0xc17,(-0x21e9+-0xcae+-0x1f*-0x189)*_0x5343e5,(-0x8*-0x285+-0x131d+0xb*-0x1)*_0x5343e5,(-0x5*0x169+0x2433+0x13*-0x182)*_0x5343e5);for(let _0x232ac6=0x1b9f*0x1+0x1b1b+-0x36b9;_0x232ac6<-0x1*0x18f5+0x46+0x18b6*0x1;++_0x232ac6)vi(_0x158928,_0x18f89c,{'numSamples':(_0x366ba4==null?void(0x1*-0x359+-0x129f+0x15f8):_0x366ba4['numReflect'+'ionSamples'])||0x1c*-0x86+0x1e27*-0x1+0x30cf,'distribution':(_0x366ba4==null?void(0x181b+0x1f3e+0x1*-0x3759):_0x366ba4['distributi'+'on'])||'ggx','specularPower':Math['max'](0x1fe7+-0x1b65+-0x481,-0x150*-0x2+-0x1eb1+0x2411>>_0x232ac6*(-0x2636*-0x1+0x1606+-0x3c3a)),'rect':_0x2c1fce,'seamPixels':_0x5343e5}),_0x2c1fce['y']+=_0x2c1fce['w'],_0x2c1fce['z']=Math['max'](-0x4*0x1cf+0x1*-0x1da5+0x24e2,Math['floor'](_0x2c1fce['z']*(0x2467*0x1+0x1b6b+-0x7*0x91e+0.5))),_0x2c1fce['w']=Math['max'](0x2251+0x25d*-0x1+0x1*-0x1ff3,Math['floor'](_0x2c1fce['w']*(0xa*-0x266+0x19c3+0x5b*-0x5+0.5)));return Q['popGpuMark'+'er'](_0x7e5d22),Q['pushGpuMar'+'ker'](_0x7e5d22,'ambient'),_0x2c1fce['set']((0x1*0x803+0x2*0x53b+-0x11f9*0x1)*_0x5343e5,(-0x1f*-0x5d+-0x7ed*0x3+0xe04)*_0x5343e5,(-0x19a+-0x9*0x202+-0x66*-0x32)*_0x5343e5,(0xf3d+0x67*0x3b+0x2*-0x136d)*_0x5343e5),vi(_0x158928,_0x18f89c,{'numSamples':(_0x366ba4==null?void(0x1*-0x617+0x1afa+-0x14e3):_0x366ba4['numAmbient'+'Samples'])||-0x4c1+-0x122a+-0x5*-0x62f,'distribution':'lambert','rect':_0x2c1fce,'seamPixels':_0x5343e5}),Q['popGpuMark'+'er'](_0x7e5d22),Q['popGpuMark'+'er'](_0x7e5d22),_0x18f89c;}static['generatePr'+'efilteredA'+'tlas'](_0xa03fc6,_0x23eaf5){const _0x210774=_0xa03fc6[0xa*-0x142+-0x111d*0x1+0x1db1]['device'],_0x3180fb=_0xa03fc6[0x1*0x50e+0x1*0x1a75+0x1*-0x1f83]['format'],_0x52efee=_0xa03fc6[-0x202e+-0x7*0x241+0x2ff5]['type'];Q['pushGpuMar'+'ker'](_0x210774,'genPrefilt'+'eredAtlas');const _0x3817d7=(_0x23eaf5==null?void(-0x778+0x859*0x4+-0x19ec):_0x23eaf5['target'])||new _e(_0x210774,{'name':'envPrefilt'+'eredAtlas','width':(_0x23eaf5==null?void(0x1887+0x17*-0xb2+-0x889):_0x23eaf5['size'])||0x1*-0x921+0x397*-0x7+0x2442,'height':(_0x23eaf5==null?void(-0x4e5+-0x55b+-0x148*-0x8):_0x23eaf5['size'])||0x3*0xf6+0x23e8*-0x1+0x2306,'format':_0x3180fb,'type':_0x52efee,'projection':Vm,'addressU':ue,'addressV':ue,'mipmaps':!(-0x1*-0x43a+0x1*-0x139+-0xc*0x40)});Q['pushGpuMar'+'ker'](_0x210774,'mipmaps');const _0x44fedd=_0x3817d7['width']/(0x1*-0x1327+-0x13*-0xbb+0x746),_0x3a3874=new re(-0x23*-0x31+0x1fa3+-0x2656,0x1228+-0x9c5+-0x1*0x863,(-0xb9*-0x8+-0x1660*-0x1+0x36*-0x7c)*_0x44fedd,(-0x8*0x2a5+0xa*0x16c+0x7f0)*_0x44fedd),_0x4fc28e=Kd(0x4dd*-0x4+-0x1bd5+0x3149);for(let _0x2063aa=-0x8*-0x3b3+-0x55e+-0xe*0x1bb;_0x2063aa<_0x4fc28e;++_0x2063aa)vi(_0xa03fc6[-0x7*-0x10d+-0x836*0x3+-0x1*-0x1147],_0x3817d7,{'numSamples':0x1,'rect':_0x3a3874,'seamPixels':_0x44fedd}),_0x3a3874['x']+=_0x3a3874['w'],_0x3a3874['y']+=_0x3a3874['w'],_0x3a3874['z']=Math['max'](-0x75a+0x3a7+0xed*0x4,Math['floor'](_0x3a3874['z']*(0x1a80+-0xdda+-0x1*0xca6+0.5))),_0x3a3874['w']=Math['max'](-0x1f22+0xb58+0x9*0x233,Math['floor'](_0x3a3874['w']*(0x459+-0x1d3*0x10+0x18d7+0.5)));Q['popGpuMark'+'er'](_0x210774),Q['pushGpuMar'+'ker'](_0x210774,'reflection'+'s'),_0x3a3874['set'](0x3cb*0x1+0xf40+-0x130b,(0x1b52+-0x2*0x1093+0x17*0x4c)*_0x44fedd,(0x1e69+-0x1b91*0x1+-0x1d8)*_0x44fedd,(0x10f+-0xcca+-0x1f*-0x65)*_0x44fedd);for(let _0x1e0248=-0x102d*0x1+0x1*0x1f83+-0x9d*0x19;_0x1e0248<_0xa03fc6['length'];++_0x1e0248)vi(_0xa03fc6[_0x1e0248],_0x3817d7,{'numSamples':0x1,'rect':_0x3a3874,'seamPixels':_0x44fedd}),_0x3a3874['y']+=_0x3a3874['w'],_0x3a3874['z']=Math['max'](-0x3*-0x84b+-0xc66+-0xc7a,Math['floor'](_0x3a3874['z']*(-0x1f79+-0x12ca+0x3243+0.5))),_0x3a3874['w']=Math['max'](-0x1129*-0x1+0x7f+0x1*-0x11a7,Math['floor'](_0x3a3874['w']*(-0x254*0x4+0x1a2a+-0x10da+0.5)));return Q['popGpuMark'+'er'](_0x210774),Q['pushGpuMar'+'ker'](_0x210774,'ambient'),_0x3a3874['set']((-0xdb1+-0x308+0x1*0x1139)*_0x44fedd,(-0xdb*0x5+-0x1e32+0x23f9)*_0x44fedd,(0x1*-0x1e38+0x1c*0xce+0x8*0xfe)*_0x44fedd,(-0x9c3+-0x145+0x66*0x1c)*_0x44fedd),_0x23eaf5!=null&&_0x23eaf5['legacyAmbi'+'ent']?vi(_0xa03fc6[0x146*0x2+-0x71b+0x494],_0x3817d7,{'numSamples':0x1,'rect':_0x3a3874,'seamPixels':_0x44fedd}):vi(_0xa03fc6[-0x217b+0x52*-0x58+0x3dab*0x1],_0x3817d7,{'numSamples':(_0x23eaf5==null?void(-0xddb+-0x9d*0x2a+0x279d):_0x23eaf5['numSamples'])||0x1*0x25d5+-0x1091*0x1+0x6a2*-0x2,'distribution':'lambert','rect':_0x3a3874,'seamPixels':_0x44fedd}),Q['popGpuMark'+'er'](_0x210774),Q['popGpuMark'+'er'](_0x210774),_0x3817d7;}}const lb={'aoPS':'1.57','clearCoatPS':'1.57','clearCoatGlossPS':'1.60','clearCoatNormalPS':'1.57','diffusePS':'1.57','emissivePS':'1.57','glossPS':'1.60','metalnessPS':'1.57','normalMapPS':'1.57','opacityPS':'1.57','parallaxPS':'1.57','sheenPS':'1.57','sheenGlossPS':'1.60','specularPS':'1.57','specularityFactorPS':'1.57','thicknessPS':'1.57','transmissionPS':'1.57','normalVertexPS':'1.55','aoDiffuseOccPS':'1.62','aoSpecOccPS':'2.6','clusteredLightPS':'1.62','clusteredLightShadowPS':'1.62','combinePS':'1.62','falloffInvSquaredPS':'1.62','falloffLinearPS':'1.62','lightDiffuseLambertPS':'1.62','lightSheenPS':'1.62','lightSpecularAnisoGGXPS':'1.62','lightSpecularBlinnPS':'1.62','ltcPS':'1.62','reflDirPS':'1.62','reflDirAnisoPS':'1.62','reflectionCCPS':'1.62','reflectionCubePS':'2.6','reflectionEnvPS':'2.6','reflectionEnvHQPS':'2.6','reflectionSpherePS':'2.6','reflectionSheenPS':'1.62','shadowCommonPS':'1.62','shadowCoordPS':'1.62','shadowCoordPerspZBufferPS':'1.62','shadowEVSMPS':'1.62','spotPS':'1.62','TBNPS':'1.62','endPS':'1.65','metalnessModulatePS':'1.65','outputAlphaPS':'1.65','outputAlphaPremulPS':'1.65','fresnelSchlickPS':'1.65','iridescenceDiffractionPS':'1.65','lightmapAddPS':'1.65','refractionCubePS':'1.70','refractionDynamicPS':'1.70'},V_={'ambientPrefilteredCubePS':'1.51','ambientPrefilteredCubeLodPS':'1.51','dpAtlasQuadPS':'1.51','genParaboloidPS':'1.51','prefilterCubemapPS':'1.51','reflectionDpAtlasPS':'1.51','reflectionPrefilteredCubePS':'1.51','reflectionPrefilteredCubeLodPS':'1.51','refractionPS':'1.56','combineClearCoatPS':'1.56','combineDiffusePS':'1.56','combineDiffuseSpecularPS':'1.56','combineDiffuseSpecularNoReflPS':'1.56','combineDiffuseSpecularNoReflSeparateAmbientPS':'1.56','combineDiffuseSpecularOldPS':'1.56','lightmapSingleVertPS':'1.55','normalMapFastPS':'1.55','specularAaNonePS':'1.55','specularAaToksvigPS':'1.55','specularAaToksvigFastPS':'1.55','skyboxEnvPS':'2.1','skyboxHDRPS':'2.1','shadowVSM8PS':'2.3','fogExpPS':'2.5','fogExp2PS':'2.5','fogLinearPS':'2.5','fogNonePS':'2.5','gamma1_0PS':'2.5','gamma2_2PS':'2.5','storeEVSMPS':'2.6','shadowEVSMnPS':'2.6','shadowVSM_commonPS':'2.6','shadowStandardPS':'2.6','shadowStandardGL2PS':'2.6','startVS':'2.6','endVS':'2.6','baseVS':'2.6','baseNineSlicedVS':'2.6','viewNormalVS':'2.6','lightmapDirAddPS':'2.6','TBNObjectSpacePS':'2.6','TBNderivativePS':'2.6','startPS':'2.6','outputAlphaOpaque':'2.6','outputAlphaPremul':'2.6','cubeMapProjectBoxPS':'2.6','cubeMapProjectNonePS':'2.6','envMultiplyPS':'2.6','envConstPS':'2.6','aoSpecOccConstPS':'2.6','aoSpecOccConstSimplePS':'2.6','aoSpecOccSimplePS':'2.6','ambientConstantPS':'2.6','ambientEnvPS':'2.6','ambientSHPS':'2.6','shadowSampleCoordPS':'2.6','diffuseDetailMapPS':'2.7','normalDetailMapPS':'2.7','normalXYPS':'2.7','normalXYZPS':'2.7','aoDetailMapPS':'2.7','lightmapDirPS':'2.7','lightmapSinglePS':'2.7','tangentBinormalVS':'2.7'},cb=(_0x44e335,_0x3e7ab9)=>{const _0x89fc7e=_0x44e335['split']('.')['map'](_0x206ae5=>parseInt(_0x206ae5,0x10d*0x23+0x5be+-0x2a7b)),_0xa647e2=_0x3e7ab9['split']('.')['map'](_0xa4c442=>parseInt(_0xa4c442,0x1*-0xb96+-0x6ea+0x128a));return _0x89fc7e[0x1*-0x123f+0xd24*-0x2+-0x1*-0x2c87]<_0xa647e2[-0x3e6*0x5+-0x1*-0x599+0xde5]||_0x89fc7e[-0x11cc+0x19b*-0x3+0x169d]===_0xa647e2[0xb35+0x4a*-0x1a+0x13b*-0x3]&&_0x89fc7e[-0x5*-0x66a+0x1336+-0x3347]<_0xa647e2[-0x6*0x71+0xb16*-0x1+0xdbd];},hb=(_0x585056,_0x210a9e)=>{for(const _0x471cfc of _0x585056['keys']())if(V_['hasOwnProp'+'erty'](_0x471cfc)){const _0x19816d=V_[_0x471cfc];w['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x471cfc+('\x27\x20was\x20remo'+'ved\x20in\x20API'+'\x20')+_0x19816d+('\x20and\x20is\x20no'+'\x20longer\x20su'+'pported.'));}else{const _0x70bde6=lb[_0x471cfc];_0x70bde6&&(!_0x210a9e||cb(_0x210a9e,_0x70bde6))&&w['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x471cfc+('\x27\x20is\x20API\x20v'+'ersion\x20')+_0x70bde6+(',\x20but\x20the\x20'+'supplied\x20c'+'hunk\x20is\x20ve'+'rsion\x20')+(_0x210a9e||'undefined')+('.\x20Please\x20u'+'pdate\x20to\x20t'+'he\x20latest\x20'+'API:\x20https'+'://develop'+'er.playcan'+'vas.com/us'+'er-manual/'+'graphics/s'+'hader-chun'+'k-migratio'+'ns/'));}},Zd={'vertex_normal':gs,'vertex_tangent':yi,'vertex_texCoord0':is,'vertex_texCoord1':ba,'vertex_color':Wt,'vertex_boneWeights':gi,'vertex_boneIndices':us};class db{constructor(_0x593e7f,_0xee5e58,_0x4d55a3=!(0x1*0x12d5+0xa3a+-0x1d0f)){h(this,'varyingsCo'+'de',''),h(this,'device'),h(this,'options'),h(this,'shaderLang'+'uage'),h(this,'vDefines',new Map()),h(this,'fDefines',new Map()),h(this,'includes',new Map()),h(this,'chunks',null),(this['device']=_0x593e7f,this['options']=_0xee5e58);const _0x2713c5=_0xee5e58['shaderChun'+'ks'];if(this['shaderLang'+'uage']=_0x593e7f['isWebGPU']&&_0x4d55a3&&(_0x2713c5!=null&&_0x2713c5['useWGSL'])?it:Fe,this['attributes']={'vertex_position':Me},_0xee5e58['userAttrib'+'utes']){for(const [_0x3fcbab,_0x2b7aaa]of Object['entries'](_0xee5e58['userAttrib'+'utes']))this['attributes'][_0x2b7aaa]=_0x3fcbab;}const _0x3a99d0=Pe['get'](_0x593e7f,this['shaderLang'+'uage']);if(this['chunks']=new Map(_0x3a99d0),_0x2713c5){const _0x58585e=this['shaderLang'+'uage']===Fe?_0x2713c5['glsl']:_0x2713c5['wgsl'];w['call'](()=>{hb(_0x58585e,_0x2713c5['version']);}),_0x58585e['forEach']((_0x2274e8,_0x3bc60e)=>{for(const _0x3ff15c in Zd)Zd['hasOwnProp'+'erty'](_0x3ff15c)&&_0x2274e8['indexOf'](_0x3ff15c)>=-0x269a+-0x1193+0x382d*0x1&&(this['attributes'][_0x3ff15c]=Zd[_0x3ff15c]);this['chunks']['set'](_0x3bc60e,_0x2274e8);});}this['shaderPass'+'Info']=Si['get'](this['device'])['getByIndex'](_0xee5e58['pass']),this['shadowPass']=this['shaderPass'+'Info']['isShadow'],this['lighting']=_0xee5e58['lights']['length']>-0xb02+0x52*-0x44+0x1*0x20ca||_0xee5e58['dirLightMa'+'pEnabled']||_0xee5e58['clusteredL'+'ightingEna'+'bled'],this['reflection'+'s']=_0xee5e58['reflection'+'Source']!==vr,this['needsNorma'+'l']=this['lighting']||this['reflection'+'s']||_0xee5e58['useSpecula'+'r']||_0xee5e58['ambientSH']||_0xee5e58['useHeights']||_0xee5e58['enableGGXS'+'pecular']||_0xee5e58['clusteredL'+'ightingEna'+'bled']&&!this['shadowPass']||_0xee5e58['useClearCo'+'atNormals'],this['needsNorma'+'l']=this['needsNorma'+'l']&&!this['shadowPass'],this['needsScene'+'Color']=_0xee5e58['useDynamic'+'Refraction'],this['needsScree'+'nSize']=_0xee5e58['useDynamic'+'Refraction'],this['needsTrans'+'forms']=_0xee5e58['useDynamic'+'Refraction'],this['vshader']=null,this['fshader']=null;}['fDefineSet'](_0x3441c7,_0x5a16cd,_0x2595a6=''){_0x3441c7&&this['fDefines']['set'](_0x5a16cd,_0x2595a6);}['generateVe'+'rtexShader'](_0x319dde,_0x421159,_0x283a2c){const {options:_0x1ab313,vDefines:_0x451b92,attributes:_0x239f36}=this,_0x5c957b=new Map();if(_0x5c957b['set']('vPositionW','vec3'),(_0x1ab313['nineSliced'+'Mode']===Pt||_0x1ab313['nineSliced'+'Mode']===Mt)&&_0x451b92['set']('NINESLICED',!(0x79+0x1bc2+-0x1c3b)),this['options']['linearDept'+'h']&&(_0x451b92['set']('LINEAR_DEP'+'TH',!(-0x5b8+0x57a*0x1+0x3e)),_0x5c957b['set']('vLinearDep'+'th','float')),this['needsNorma'+'l']&&_0x451b92['set']('NORMALS',!(0x11ea+-0xc9*-0xd+0x1c1f*-0x1)),this['options']['useInstanc'+'ing']){const _0x146f7b=Pe['get'](this['device'],this['shaderLang'+'uage']);this['chunks']['get']('transformI'+'nstancingV'+'S')===_0x146f7b['get']('transformI'+'nstancingV'+'S')&&(_0x239f36['instance_l'+'ine1']=Mp,_0x239f36['instance_l'+'ine2']=Dp,_0x239f36['instance_l'+'ine3']=Ip,_0x239f36['instance_l'+'ine4']=Ln);}this['needsNorma'+'l']&&(_0x239f36['vertex_nor'+'mal']=gs,_0x5c957b['set']('vNormalW','vec3'),_0x1ab313['hasTangent'+'s']&&(_0x1ab313['useHeights']||_0x1ab313['useNormals']||_0x1ab313['useClearCo'+'atNormals']||_0x1ab313['enableGGXS'+'pecular'])?(_0x451b92['set']('TANGENTS',!(-0x224d+0xf6d+0x12e0)),_0x239f36['vertex_tan'+'gent']=yi,_0x5c957b['set']('vTangentW','vec3'),_0x5c957b['set']('vBinormalW','vec3')):_0x1ab313['enableGGXS'+'pecular']&&(_0x451b92['set']('GGX_SPECUL'+'AR',!(-0xd5b+0x394*0x5+-0x489)),_0x5c957b['set']('vObjectSpa'+'ceUpW','vec3')));const _0x4a97f3=0x61f*0x1+0x2*0x78e+-0x1539;for(let _0x58d6a5=0x63d*0x2+0x1d2f+-0xf*0x2c7;_0x58d6a5<_0x4a97f3;_0x58d6a5++)_0x319dde[_0x58d6a5]&&(_0x451b92['set']('UV'+_0x58d6a5,!(-0x23*-0x7c+-0x66*0x47+0x5ab*0x2)),_0x239f36['vertex_tex'+'Coord'+_0x58d6a5]='TEXCOORD'+_0x58d6a5),_0x421159[_0x58d6a5]&&(_0x451b92['set']('UV'+_0x58d6a5+('_UNMODIFIE'+'D'),!(-0xddd+-0x28b*0xe+0x3177)),_0x5c957b['set']('vUv'+_0x58d6a5,'vec2'));let _0x1143b8=-0x8fe*0x1+-0x1*0x16c3+-0x1*-0x1fc1;const _0x28d4fe=new Set();_0x283a2c['forEach'](_0x4d64fe=>{const {id:_0xcd2c5b,uv:_0xc60d75,name:_0x37d5d6}=_0x4d64fe,_0xed05f1=_0xcd2c5b+_0xc60d75*(0x9*0x31a+0x6d3*-0x2+-0xde0);if(!_0x28d4fe['has'](_0xed05f1)){_0x28d4fe['add'](_0xed05f1),_0x5c957b['set']('vUV'+_0xc60d75+'_'+_0xcd2c5b,'vec2');const _0x296b6a='texture_'+_0x37d5d6+('MapTransfo'+'rm');_0x451b92['set']('{TRANSFORM'+'_NAME_'+_0x1143b8+'}',_0x296b6a),_0x451b92['set']('{TRANSFORM'+'_UV_'+_0x1143b8+'}',_0xc60d75),_0x451b92['set']('{TRANSFORM'+'_ID_'+_0x1143b8+'}',_0xcd2c5b),_0x1143b8++;}}),_0x451b92['set']('UV_TRANSFO'+'RMS_COUNT',_0x1143b8),_0x1ab313['vertexColo'+'rs']&&(_0x239f36['vertex_col'+'or']=Wt,_0x451b92['set']('VERTEX_COL'+'OR',!(-0x1ec2+0x1751+-0x17d*-0x5)),_0x5c957b['set']('vVertexCol'+'or','vec4')),_0x1ab313['useMsdf']&&_0x1ab313['msdfTextAt'+'tribute']&&(_0x239f36['vertex_out'+'lineParame'+'ters']=Ko,_0x239f36['vertex_sha'+'dowParamet'+'ers']=Zo,_0x451b92['set']('MSDF',!(-0xad5+-0x184f+0x2324))),(_0x1ab313['useMorphPo'+'sition']||_0x1ab313['useMorphNo'+'rmal'])&&(_0x451b92['set']('MORPHING',!(-0x1*0x201e+-0x9*0x3d+0x2243)),_0x1ab313['useMorphTe'+'xtureBased'+'Int']&&_0x451b92['set']('MORPHING_I'+'NT',!(0x14a1+0xd56+0x1*-0x21f7)),_0x1ab313['useMorphPo'+'sition']&&_0x451b92['set']('MORPHING_P'+'OSITION',!(0x1*-0x1ec7+0x101*0x1+0x1dc6)),_0x1ab313['useMorphNo'+'rmal']&&_0x451b92['set']('MORPHING_N'+'ORMAL',!(-0x1fcb+0x1*0x78d+-0xc1f*-0x2)),_0x239f36['morph_vert'+'ex_id']=Ln),_0x1ab313['skin']&&(_0x239f36['vertex_bon'+'eIndices']=us,_0x1ab313['batch']?_0x451b92['set']('BATCH',!(-0xef+-0x1d7*-0xf+-0x1aaa)):(_0x239f36['vertex_bon'+'eWeights']=gi,_0x451b92['set']('SKIN',!(-0xb*0x25f+-0x1c7+-0x1*-0x1bdc)))),_0x1ab313['useInstanc'+'ing']&&_0x451b92['set']('INSTANCING',!(-0x24ca+-0x2635+-0x107*-0x49)),_0x1ab313['screenSpac'+'e']&&_0x451b92['set']('SCREENSPAC'+'E',!(0x998+0x1802+-0x219a)),_0x1ab313['pixelSnap']&&_0x451b92['set']('PIXELSNAP',!(0xa9f*-0x1+0x41d*0x5+-0x9f2)),_0x5c957b['forEach']((_0xb9943,_0x44593b)=>{this['varyingsCo'+'de']+='#define\x20VA'+'RYING_'+_0x44593b['toUpperCas'+'e']()+'\x0a',this['varyingsCo'+'de']+=this['shaderLang'+'uage']===it?'varying\x20'+_0x44593b+':\x20'+Fy['get'](_0xb9943)+';\x0a':'varying\x20'+_0xb9943+'\x20'+_0x44593b+';\x0a';}),this['includes']['set']('varyingsVS',this['varyingsCo'+'de']),this['includes']['set']('varyingsPS',this['varyingsCo'+'de']),this['vshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}['_setupLigh'+'tingDefine'+'s'](_0x1b4e72,_0x361eff){const _0x179b97=this['fDefines'],_0x16282e=this['options'];if(this['fDefines']['set']('LIGHT_COUN'+'T',_0x16282e['lights']['length']),_0x1b4e72&&_0x179b97['set']('AREA_LIGHT'+'S',!(-0x47*-0x3d+0xbb9+0x4e*-0x5e)),_0x361eff&&this['lighting']&&(_0x179b97['set']('LIT_CLUSTE'+'RED_LIGHTS',!(-0xed6+-0x1556+0x242c)),_0x16282e['clusteredL'+'ightingCoo'+'kiesEnable'+'d']&&_0x179b97['set']('CLUSTER_CO'+'OKIES',!(-0x12*-0x16f+0x1ee1+-0x819*0x7)),_0x16282e['clusteredL'+'ightingAre'+'aLightsEna'+'bled']&&_0x179b97['set']('CLUSTER_AR'+'EALIGHTS',!(0x13f3+-0x1*0x5e5+-0xe0e)),_0x16282e['lightMaskD'+'ynamic']&&_0x179b97['set']('CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS',!(0x69*-0x5b+-0x1*-0x1f1f+0x634)),_0x16282e['clusteredL'+'ightingSha'+'dowsEnable'+'d']&&!_0x16282e['noShadow'])){const _0x2f356b=qi['get'](_0x16282e['clusteredL'+'ightingSha'+'dowType']);_0x179b97['set']('CLUSTER_SH'+'ADOWS',!(-0x8ab*-0x2+0x1ee8+-0x303e)),_0x179b97['set']('SHADOW_KIN'+'D_'+_0x2f356b['kind'],!(-0x8*-0x22c+0x1a*-0xe+0x1*-0xff4)),_0x179b97['set']('CLUSTER_SH'+'ADOW_TYPE_'+_0x2f356b['kind'],!(-0x2*-0x10e5+-0xc63*-0x1+-0x2e2d));}for(let _0x4f3780=-0xc2+-0x6e*-0x21+-0xd6c*0x1;_0x4f3780<_0x16282e['lights']['length'];_0x4f3780++){const _0x22835f=_0x16282e['lights'][_0x4f3780],_0x22f97e=_0x22835f['_type'];if(_0x361eff&&_0x22f97e!==ve)continue;const _0x1219bf=_0x1b4e72&&_0x22835f['_shape']?_0x22835f['_shape']:Ys,_0x2d9e3d=_0x22835f['_shadowTyp'+'e'],_0x422ed4=_0x22835f['castShadow'+'s']&&!_0x16282e['noShadow'],_0x5990cb=qi['get'](_0x2d9e3d);w['assert'](_0x5990cb),_0x179b97['set']('LIGHT'+_0x4f3780,!(-0x256e+0x16f*0xb+0x5*0x455)),_0x179b97['set']('LIGHT'+_0x4f3780+'TYPE',''+u_[_0x22f97e]),_0x179b97['set']('LIGHT'+_0x4f3780+'SHADOWTYPE',''+_0x5990cb['name']),_0x179b97['set']('LIGHT'+_0x4f3780+'SHAPE',''+Fw[_0x1219bf]),_0x179b97['set']('LIGHT'+_0x4f3780+'FALLOFF',''+Nw[_0x22835f['_falloffMo'+'de']]),_0x22835f['affectSpec'+'ularity']&&_0x179b97['set']('LIGHT'+_0x4f3780+('AFFECT_SPE'+'CULARITY'),!(0x25d4+0x2*0x12ee+0x25d8*-0x2)),_0x22835f['_cookie']&&(_0x22f97e===Ze&&!_0x22835f['_cookie']['_cubemap']||_0x22f97e===Ke&&_0x22835f['_cookie']['_cubemap'])&&(_0x179b97['set']('LIGHT'+_0x4f3780+'COOKIE',!(0xcf0*0x2+-0x1375*-0x2+-0x40ca)),_0x179b97['set']('{LIGHT'+_0x4f3780+('COOKIE_CHA'+'NNEL}'),_0x22835f['_cookieCha'+'nnel']),_0x22f97e===Ze&&(_0x22835f['_cookieTra'+'nsform']&&_0x179b97['set']('LIGHT'+_0x4f3780+('COOKIE_TRA'+'NSFORM'),!(-0x18bc+0x1*0x1be8+-0x74*0x7)),_0x22835f['_cookieFal'+'loff']&&_0x179b97['set']('LIGHT'+_0x4f3780+('COOKIE_FAL'+'LOFF'),!(0xd38+-0x1525+0x7ed)))),_0x422ed4&&(_0x179b97['set']('LIGHT'+_0x4f3780+'CASTSHADOW',!(-0x572*0x5+-0x1697*-0x1+0x1*0x4a3)),_0x5990cb['pcf']&&_0x179b97['set']('LIGHT'+_0x4f3780+'SHADOW_PCF',!(0x35*-0x95+-0x3*-0xb3d+0x1*-0x2de)),_0x22835f['_normalOff'+'setBias']&&!_0x22835f['_isVsm']&&_0x179b97['set']('LIGHT'+_0x4f3780+('_SHADOW_SA'+'MPLE_NORMA'+'L_OFFSET'),!(0x2280+0x32b*-0x6+-0xf7e)),_0x22f97e===ve&&(_0x179b97['set']('LIGHT'+_0x4f3780+('_SHADOW_SA'+'MPLE_ORTHO'),!(-0xfe2+-0x225*-0x7+0x1*0xdf)),_0x22835f['cascadeBle'+'nd']>0x8b*0x2+-0x1*0x31d+0x207&&_0x179b97['set']('LIGHT'+_0x4f3780+('_SHADOW_CA'+'SCADE_BLEN'+'D'),!(0x1476+-0x1537+-0xc1*-0x1)),_0x22835f['numCascade'+'s']>0x26e7+0x13b8+-0x3a9e&&_0x179b97['set']('LIGHT'+_0x4f3780+('_SHADOW_CA'+'SCADES'),!(-0x4*0x11e+-0x25ab*-0x1+-0x2133))),(_0x5990cb['pcf']||_0x5990cb['pcss']||this['device']['isWebGPU'])&&_0x179b97['set']('LIGHT'+_0x4f3780+('_SHADOW_SA'+'MPLE_SOURC'+'E_ZBUFFER'),!(0x1b*-0x7b+-0x1181+0x1e7a)),_0x22f97e===Ke&&_0x179b97['set']('LIGHT'+_0x4f3780+('_SHADOW_SA'+'MPLE_POINT'),!(-0x45*-0x45+-0xb3*0x7+-0xdb4))),_0x422ed4&&(_0x179b97['set']('SHADOW_KIN'+'D_'+_0x5990cb['kind'],!(0x1*0x9b1+-0x971*-0x3+0x6*-0x656)),_0x22f97e===ve&&_0x179b97['set']('SHADOW_DIR'+'ECTIONAL',!(0x6d*-0x3a+0x521*0x7+-0xb35)));}}['prepareFor'+'wardPass'](_0x42832c){const {options:_0x3c4873}=this,_0x49eb0c=_0x3c4873['clusteredL'+'ightingEna'+'bled']&&_0x3c4873['clusteredL'+'ightingAre'+'aLightsEna'+'bled']||_0x3c4873['lights']['some'](_0x5a259f=>_0x5a259f['_shape']&&_0x5a259f['_shape']!==Ys),_0x5018e8=!_0x3c4873['lightMapEn'+'abled']||_0x3c4873['lightMapWi'+'thoutAmbie'+'nt'],_0x4c98b9=this['needsNorma'+'l']&&(_0x3c4873['useNormals']||_0x3c4873['useClearCo'+'atNormals']||_0x3c4873['enableGGXS'+'pecular']&&!_0x3c4873['useHeights']);_0x3c4873['useSpecula'+'r']&&(this['fDefineSet'](!(-0x9fa+-0x1192+0x1b8c),'LIT_SPECUL'+'AR'),this['fDefineSet'](this['reflection'+'s'],'LIT_REFLEC'+'TIONS'),this['fDefineSet'](_0x3c4873['useClearCo'+'at'],'LIT_CLEARC'+'OAT'),this['fDefineSet'](_0x3c4873['fresnelMod'+'el']>0x108*0x1+-0x117b+0x1073,'LIT_SPECUL'+'AR_FRESNEL'),this['fDefineSet'](_0x3c4873['useSheen'],'LIT_SHEEN'),this['fDefineSet'](_0x3c4873['useIridesc'+'ence'],'LIT_IRIDES'+'CENCE')),this['fDefineSet'](this['lighting']&&_0x3c4873['useSpecula'+'r']||this['reflection'+'s'],'LIT_SPECUL'+'AR_OR_REFL'+'ECTION'),this['fDefineSet'](this['needsScene'+'Color'],'LIT_SCENE_'+'COLOR'),this['fDefineSet'](this['needsScree'+'nSize'],'LIT_SCREEN'+'_SIZE'),this['fDefineSet'](this['needsTrans'+'forms'],'LIT_TRANSF'+'ORMS'),this['fDefineSet'](this['needsNorma'+'l'],'LIT_NEEDS_'+'NORMAL'),this['fDefineSet'](this['lighting'],'LIT_LIGHTI'+'NG'),this['fDefineSet'](_0x3c4873['useMetalne'+'ss'],'LIT_METALN'+'ESS'),this['fDefineSet'](_0x3c4873['enableGGXS'+'pecular'],'LIT_GGX_SP'+'ECULAR'),this['fDefineSet'](_0x3c4873['useSpecula'+'rityFactor'],'LIT_SPECUL'+'ARITY_FACT'+'OR'),this['fDefineSet'](_0x3c4873['useCubeMap'+'Rotation'],'CUBEMAP_RO'+'TATION'),this['fDefineSet'](_0x3c4873['occludeSpe'+'cularFloat'],'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT'),this['fDefineSet'](_0x3c4873['separateAm'+'bient'],'LIT_SEPARA'+'TE_AMBIENT'),this['fDefineSet'](_0x3c4873['twoSidedLi'+'ghting'],'LIT_TWO_SI'+'DED_LIGHTI'+'NG'),this['fDefineSet'](_0x3c4873['lightMapEn'+'abled'],'LIT_LIGHTM'+'AP'),this['fDefineSet'](_0x3c4873['dirLightMa'+'pEnabled'],'LIT_DIR_LI'+'GHTMAP'),this['fDefineSet'](_0x3c4873['skyboxInte'+'nsity']>0x88b+0x47*0x2b+-0x1478,'LIT_SKYBOX'+'_INTENSITY'),this['fDefineSet'](_0x3c4873['clusteredL'+'ightingSha'+'dowsEnable'+'d'],'LIT_CLUSTE'+'RED_SHADOW'+'S'),this['fDefineSet'](_0x3c4873['clusteredL'+'ightingAre'+'aLightsEna'+'bled'],'LIT_CLUSTE'+'RED_AREA_L'+'IGHTS'),this['fDefineSet'](_0x4c98b9,'LIT_TBN'),this['fDefineSet'](_0x5018e8,'LIT_ADD_AM'+'BIENT'),this['fDefineSet'](_0x3c4873['hasTangent'+'s'],'LIT_TANGEN'+'TS'),this['fDefineSet'](_0x3c4873['useNormals'],'LIT_USE_NO'+'RMALS'),this['fDefineSet'](_0x3c4873['useClearCo'+'atNormals'],'LIT_USE_CL'+'EARCOAT_NO'+'RMALS'),this['fDefineSet'](_0x3c4873['useRefract'+'ion'],'LIT_REFRAC'+'TION'),this['fDefineSet'](_0x3c4873['useDynamic'+'Refraction'],'LIT_DYNAMI'+'C_REFRACTI'+'ON'),this['fDefineSet'](_0x3c4873['dispersion'],'LIT_DISPER'+'SION'),this['fDefineSet'](_0x3c4873['useHeights'],'LIT_HEIGHT'+'S'),this['fDefineSet'](_0x3c4873['opacityFad'+'esSpecular'],'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR'),this['fDefineSet'](_0x3c4873['alphaToCov'+'erage'],'LIT_ALPHA_'+'TO_COVERAG'+'E'),this['fDefineSet'](_0x3c4873['alphaTest'],'LIT_ALPHA_'+'TEST'),this['fDefineSet'](_0x3c4873['useMsdf'],'LIT_MSDF'),this['fDefineSet'](_0x3c4873['ssao'],'LIT_SSAO'),this['fDefineSet'](_0x3c4873['useAo'],'LIT_AO'),this['fDefineSet'](_0x3c4873['occludeDir'+'ect'],'LIT_OCCLUD'+'E_DIRECT'),this['fDefineSet'](_0x3c4873['msdfTextAt'+'tribute'],'LIT_MSDF_T'+'EXT_ATTRIB'+'UTE'),this['fDefineSet'](_0x3c4873['diffuseMap'+'Enabled'],'LIT_DIFFUS'+'E_MAP'),this['fDefineSet'](_0x3c4873['shadowCatc'+'her'],'LIT_SHADOW'+'_CATCHER'),this['fDefineSet'](!(-0x1*0x18c6+-0x716*0x2+0x26f2),'LIT_FRESNE'+'L_MODEL',Rw[_0x3c4873['fresnelMod'+'el']]),this['fDefineSet'](!(-0xaed*-0x3+0xb66+0x2b*-0x107),'LIT_NONE_S'+'LICE_MODE',qw[_0x3c4873['nineSliced'+'Mode']]),this['fDefineSet'](!(-0x11e1+0x235b+-0x117a),'LIT_BLEND_'+'TYPE',Yy[_0x3c4873['blendType']]),this['fDefineSet'](!(0x1932+-0x127*-0x18+-0x34da),'LIT_CUBEMA'+'P_PROJECTI'+'ON',Gw[_0x3c4873['cubeMapPro'+'jection']]),this['fDefineSet'](!(0x176b+0x2554+-0x3cbf),'LIT_OCCLUD'+'E_SPECULAR',Ww[_0x3c4873['occludeSpe'+'cular']]),this['fDefineSet'](!(-0xcf6+-0x1*-0xcb5+0x41),'LIT_REFLEC'+'TION_SOURC'+'E',$w[_0x3c4873['reflection'+'Source']]),this['fDefineSet'](!(0x16*0x49+-0x65e+0x18),'LIT_AMBIEN'+'T_SOURCE',Xw[_0x3c4873['ambientSou'+'rce']]),this['fDefineSet'](!(0x1c5d+-0xbf*0x2b+0x11*0x38),'{lightingU'+'v}',_0x42832c??''),this['fDefineSet'](!(-0x2636+0x151*-0x1+-0x3*-0xd2d),'{reflectio'+'nDecode}',Tr['decodeFunc'](_0x3c4873['reflection'+'Encoding'])),this['fDefineSet'](!(0x555+-0x15*-0xb6+-0x1443),'{reflectio'+'nCubemapDe'+'code}',Tr['decodeFunc'](_0x3c4873['reflection'+'CubemapEnc'+'oding'])),this['fDefineSet'](!(0x2050+0x9e*0x3+-0x1*0x222a),'{ambientDe'+'code}',Tr['decodeFunc'](_0x3c4873['ambientEnc'+'oding'])),this['_setupLigh'+'tingDefine'+'s'](_0x49eb0c,_0x3c4873['clusteredL'+'ightingEna'+'bled']);}['prepareSha'+'dowPass'](){const {options:_0x4d69a6}=this,_0x23a851=this['shaderPass'+'Info']['lightType'],_0x31f593=this['shaderPass'+'Info']['shadowType'],_0x592719=qi['get'](_0x31f593);w['assert'](_0x592719);const _0x12578c=_0x23a851===ve||!_0x592719['vsm']&&_0x23a851===Ze;this['fDefineSet'](_0x12578c,'PERSPECTIV'+'E_DEPTH'),this['fDefineSet'](!(-0x1aa6+0x897*-0x2+-0x33*-0xdc),'LIGHT_TYPE',''+u_[_0x23a851]),this['fDefineSet'](!(0x6b*-0x59+0x1446+0x1*0x10ed),'SHADOW_TYP'+'E',''+_0x592719['name']),this['fDefineSet'](_0x4d69a6['alphaTest'],'LIT_ALPHA_'+'TEST');}['generateFr'+'agmentShad'+'er'](_0x40528d,_0x5134a7,_0x4d2925){const _0xa161dc=this['options'];this['includes']['set']('frontendDe'+'clPS',_0x40528d??''),this['includes']['set']('frontendCo'+'dePS',_0x5134a7??''),_0xa161dc['pass']===Zn||_0xa161dc['pass']===Rl||(this['shadowPass']?this['prepareSha'+'dowPass']():this['prepareFor'+'wardPass'](_0x4d2925)),this['fshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}}class wv{constructor(){h(this,'hasTangent'+'s',!(0x622+-0x342+-0xf*0x31)),h(this,'shaderChun'+'ks',null),h(this,'pass',0x73*-0x2d+-0x3f*-0x5a+-0xf*0x21),h(this,'alphaTest',!(0x838+0x1534+-0x1d6b)),h(this,'blendType',Cs),h(this,'separateAm'+'bient',!(-0x23*0xa3+-0x4*-0xce+0x1312)),h(this,'screenSpac'+'e',!(0x5*0x6dc+-0x1*-0x253b+-0x4786)),h(this,'skin',!(-0x1857+0xd2d*-0x2+0x32b2)),h(this,'batch',!(0x6e7+0x1935*0x1+-0x201b*0x1)),h(this,'useInstanc'+'ing',!(0x2d*0xae+-0xf8f+-0xf06)),h(this,'useMorphPo'+'sition',!(-0x21ef*0x1+0x33*0x51+-0xd9*-0x15)),h(this,'useMorphNo'+'rmal',!(0x1a8*0x14+-0x10f7+-0x1028)),h(this,'useMorphTe'+'xtureBased'+'Int',!(0x64*-0x3e+0x4ff*-0x1+-0xdc*-0x22)),h(this,'nineSliced'+'Mode',0x92c+0x1*-0x236b+-0x1a3f*-0x1),h(this,'clusteredL'+'ightingEna'+'bled',!(-0xceb+0x247d*0x1+0x35e*-0x7)),h(this,'clusteredL'+'ightingCoo'+'kiesEnable'+'d',!(-0x24e+-0x1765*-0x1+-0x1516)),h(this,'clusteredL'+'ightingSha'+'dowsEnable'+'d',!(-0x23*-0x93+-0xb*0x2d6+-0xe*-0xcb)),h(this,'clusteredL'+'ightingSha'+'dowType',-0x21cf+0x1269*-0x2+0x3f*0x11f),h(this,'clusteredL'+'ightingAre'+'aLightsEna'+'bled',!(0x10e7*-0x1+0xce5*0x2+-0x2f6*0x3)),h(this,'vertexColo'+'rs',!(0x9*-0x36d+-0xebd+0x2d93)),h(this,'lightMapEn'+'abled',!(0x2a1*0x1+-0x3c6*-0x6+0x86c*-0x3)),h(this,'dirLightMa'+'pEnabled',!(-0x182a+0x2509+-0xcde)),h(this,'useHeights',!(0xd17+-0x187f+0xb69)),h(this,'useNormals',!(0xbd6+-0x1568+0x993)),h(this,'useClearCo'+'atNormals',!(-0xc79+-0x229a+-0x20c*-0x17)),h(this,'useAo',!(0x65b*0x3+0xe83+-0x2193)),h(this,'diffuseMap'+'Enabled',!(-0x4f*-0x3+0x630+-0x8c*0xd)),h(this,'pixelSnap',!(-0x2013+-0x129+0x213d)),h(this,'ambientSH',!(-0xc1f+0x3*0x2dd+0x5*0xb5)),h(this,'ssao',!(0xb14*-0x1+0x78*0x51+0x1*-0x1ae3)),h(this,'twoSidedLi'+'ghting',!(-0xa4*-0x31+0x2de+-0xb6b*0x3)),h(this,'occludeDir'+'ect',!(-0x1d90+0x248d+-0x1bf*0x4)),h(this,'occludeSpe'+'cular',0x1dc6+0x7*0x2d2+-0x3184),h(this,'occludeSpe'+'cularFloat',!(-0x4fe+-0x18d*-0x12+0x16eb*-0x1)),h(this,'useMsdf',!(0x118f+-0x617*0x2+-0x560)),h(this,'msdfTextAt'+'tribute',!(0xa1*0x4+0xe18+0x147*-0xd)),h(this,'alphaToCov'+'erage',!(0x9cf+-0x1*-0x211f+-0x2aed)),h(this,'opacityFad'+'esSpecular',!(0x2d5*0x8+0x1642+0x1*-0x2ce9)),h(this,'opacityDit'+'her',Sa),h(this,'opacitySha'+'dowDither',Sa),h(this,'cubeMapPro'+'jection',-0x4e+0x1*-0x7a0+0x122*0x7),h(this,'useSpecula'+'r',!(-0x246e+-0x55+0xd*0x2d4)),h(this,'useSpecula'+'rityFactor',!(-0x2432+0xa*-0x1c+0x254b)),h(this,'enableGGXS'+'pecular',!(0x10*0x1f0+0x399*-0x1+-0x1*0x1b66)),h(this,'fresnelMod'+'el',-0x23b9+0xb*-0x2e1+-0x13*-0x38c),h(this,'useRefract'+'ion',!(0xb3a+-0xa40*0x2+0x1*0x947)),h(this,'useClearCo'+'at',!(0x14c2+0x1f62*0x1+-0x3423)),h(this,'useSheen',!(0x103*0x19+0x1f50+-0x389a)),h(this,'useIridesc'+'ence',!(0x1*0x12e9+-0x1*-0x2427+0x1*-0x370f)),h(this,'useMetalne'+'ss',!(-0x1459*0x1+0x128f+0x1cb)),h(this,'useDynamic'+'Refraction',!(-0x461*-0x5+-0x7a7+-0x2d9*0x5)),h(this,'dispersion',!(-0x19ca+0x2691+-0xcc6)),h(this,'fog',Kn),h(this,'gamma',Ll),h(this,'toneMap',-(0x618+-0x189a+0x1283*0x1)),h(this,'reflection'+'Source',vr),h(this,'reflection'+'Encoding',null),h(this,'reflection'+'CubemapEnc'+'oding',null),h(this,'ambientSou'+'rce','constant'),h(this,'ambientEnc'+'oding',null),h(this,'skyboxInte'+'nsity',-0xc12+-0x9af+0x15c2),h(this,'useCubeMap'+'Rotation',!(0x1cc2+-0x871+-0x1450)),h(this,'lightMapWi'+'thoutAmbie'+'nt',!(0xd*0x49+0xd84+0x13*-0xe8)),h(this,'lights',[]),h(this,'noShadow',!(0x65*0x28+0x10bd*0x1+-0x2084)),h(this,'lightMaskD'+'ynamic',0x20a4*-0x1+-0x1*0xaa1+0x2b45),h(this,'userAttrib'+'utes',{}),h(this,'linearDept'+'h',!(0x21c5+-0xbe9+-0x175*0xf)),h(this,'shadowCatc'+'her',!(0xb27+-0xb1c+-0xa));}}class dl{constructor(){h(this,'defines',new Map()),h(this,'forceUv1',!(-0x1559+0xf1a+0x640)),h(this,'specularTi'+'nt',!(-0x15b7+0x2b*-0x3e+0x392*0x9)),h(this,'metalnessT'+'int',!(0x91d+0x2589*-0x1+0x1c6d)),h(this,'glossTint',!(0x2266+0x9ae+-0x2c13)),h(this,'emissiveEn'+'coding','linear'),h(this,'lightMapEn'+'coding','linear'),h(this,'packedNorm'+'al',!(0x240f+-0x1c9b+0x773*-0x1)),h(this,'normalDeta'+'ilPackedNo'+'rmal',!(0x889*-0x3+-0xa3b+0x23d7)),h(this,'clearCoatP'+'ackedNorma'+'l',!(0x1f16+0x1*0x33b+-0x2250)),h(this,'glossInver'+'t',!(0xff+0x3c*0x71+-0x1b7a*0x1)),h(this,'sheenGloss'+'Invert',!(0x15db+-0x1e06+0x82c)),h(this,'clearCoatG'+'lossInvert',!(-0x105e+-0xd03+0x1d62)),h(this,'useAO',!(-0xa8f+0x1*0x1cf5+-0x1*0x1265)),h(this,'litOptions',new wv());}get['pass'](){return this['litOptions']['pass'];}}const Ev={'generateKey'(_0x45c1a9){return'lit'+Object['keys'](_0x45c1a9)['sort']()['map'](_0x4ab3c9=>{var _0x5420df;return _0x4ab3c9==='shaderChun'+'ks'?((_0x5420df=_0x45c1a9['shaderChun'+'ks'])==null?void(0x2050+0x1377+-0x33c7):_0x5420df['key'])??'':_0x4ab3c9==='lights'?Ev['generateLi'+'ghtsKey'](_0x45c1a9):_0x4ab3c9+_0x45c1a9[_0x4ab3c9];})['join']('\x0a');},'generateLightsKey'(_0x35548b){return'lights:'+_0x35548b['lights']['map'](_0x8dec5c=>!_0x35548b['clusteredL'+'ightingEna'+'bled']||_0x8dec5c['_type']===ve?_0x8dec5c['key']+',':'')['join']('');}},bn=[],Qd=_0x99e0c0=>Object['keys'](_0x99e0c0)['filter'](_0x6532c8=>_0x6532c8!=='litOptions')['sort']();class fb extends ya{constructor(){super(...arguments),h(this,'optionsCon'+'text',new dl()),h(this,'optionsCon'+'textMin',new dl());}['generateKe'+'y'](_0x458587){let _0x2fbd12;return _0x458587===this['optionsCon'+'textMin']?(this['propsMin']||(this['propsMin']=Qd(_0x458587)),_0x2fbd12=this['propsMin']):_0x458587===this['optionsCon'+'text']?(this['props']||(this['props']=Qd(_0x458587)),_0x2fbd12=this['props']):_0x2fbd12=Qd(_0x458587),'standard:\x0a'+ya['definesHas'+'h'](_0x458587['defines'])+'\x0a'+_0x2fbd12['map'](_0x123426=>_0x123426+_0x458587[_0x123426])['join']('\x0a')+Ev['generateKe'+'y'](_0x458587['litOptions']);}['_getUvSour'+'ceExpressi'+'on'](_0x49d6bb,_0x3f6f29,_0x67a720){const _0x3f0d09=_0x67a720[_0x49d6bb],_0x13831a=_0x67a720[_0x3f6f29],_0x84ec1a=_0x67a720['litOptions']['pass']===Aa;let _0x4534f0;return _0x84ec1a&&_0x67a720['litOptions']['nineSliced'+'Mode']===Pt||_0x84ec1a&&_0x67a720['litOptions']['nineSliced'+'Mode']===Mt?_0x4534f0='nineSliced'+'Uv':(_0x3f0d09===-0x8ef*0x1+-0x41c*-0x1+0xd*0x5f?_0x4534f0='vUv'+_0x13831a:_0x4534f0='vUV'+_0x13831a+'_'+_0x3f0d09,_0x67a720['heightMap']&&_0x49d6bb!=='heightMapT'+'ransform'&&(_0x4534f0+='\x20+\x20dUvOffs'+'et')),_0x4534f0;}['_validateM'+'apChunk'](_0x20cbc1,_0x521e00,_0x16e0de){w['call'](()=>{const _0x5975fa=_0x16e0de['get'](_0x521e00)['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1'),_0x303ab8=[],_0x469bbd=(_0xc470f6,_0x45b38c)=>{_0x5975fa['includes'](_0xc470f6)&&_0x303ab8['push']('\x20\x20'+_0xc470f6+'\x20->\x20'+_0x45b38c);};[['$UV','{STD_'+_0x20cbc1+('_TEXTURE_U'+'V}')],['$CH','{STD_'+_0x20cbc1+('_TEXTURE_C'+'HANNEL}')],['$SAMPLER','{STD_'+_0x20cbc1+('_TEXTURE_N'+'AME}')],['$DECODE','{STD_'+_0x20cbc1+('_TEXTURE_D'+'ECODE}')],['$VC','{STD_'+_0x20cbc1+('_VERTEX_CH'+'ANNEL}')],['$DETAILMOD'+'E','{STD_'+_0x20cbc1+('_DETAILMOD'+'E}')],['unpackNorm'+'al(','{STD_'+_0x20cbc1+('_TEXTURE_D'+'ECODE}(')]]['forEach'](([_0x10cfcc,_0x2a3e2e])=>_0x469bbd(_0x10cfcc,_0x2a3e2e)),[['MAPFLOAT','STD_'+_0x20cbc1+'_CONSTANT'],['MAPCOLOR','STD_'+_0x20cbc1+'_CONSTANT'],['MAPVERTEX','STD_'+_0x20cbc1+'_VERTEX'],['MAPTEXTURE','STD_'+_0x20cbc1+'_TEXTURE'],['MAPINVERT','STD_'+_0x20cbc1+'_INVERT']]['forEach'](([_0x35f3e5,_0x428209])=>_0x469bbd(_0x35f3e5,_0x428209)),_0x5975fa['includes']('$texture2D'+'SAMPLE')&&_0x469bbd('$texture2D'+'SAMPLE','(Macro\x20no\x20'+'longer\x20sup'+'ported\x20-\x20r'+'emove/refa'+'ctor)'),_0x303ab8['length']>-0x4*0x689+0x1ae5+-0xc1&&w['errorOnce']('Shader\x20chu'+'nk\x20'+_0x521e00+('\x20is\x20in\x20no\x20'+'longer\x20com'+'patible\x20fo'+'rmat.\x20Plea'+'se\x20make\x20th'+'ese\x20replac'+'ements\x20to\x20'+'bring\x20it\x20t'+'o\x20the\x20curr'+'ent\x20versio'+'n:\x0a')+_0x303ab8['join']('\x0a'),{'code':_0x5975fa});});}['_addMapDef'+'ines'](_0x55ec12,_0xc40609,_0xe9d8f7,_0x93e0ff,_0x184a93,_0x7ffd51,_0x4b0a08=null){const _0x49e5dd=_0xc40609+'Map',_0x42561b=_0xc40609['toUpperCas'+'e'](),_0x1cdb74=_0x49e5dd+'Uv',_0x29ccb2=_0x49e5dd+'Identifier',_0x2c30c3=_0x49e5dd+'Transform',_0xc521dd=_0x49e5dd+'Channel',_0x1c89e1=_0xc40609+('VertexColo'+'rChannel'),_0x3c6bd6=_0xc40609+'Tint',_0x7f529f=_0xc40609+('VertexColo'+'r'),_0x53200c=_0xc40609+'Mode',_0x561378=_0xc40609+'Invert',_0x5ecf02=_0x93e0ff[_0x3c6bd6],_0x430f1d=_0x93e0ff[_0x7f529f],_0x5f33ac=_0x93e0ff[_0x49e5dd],_0x1fa283=_0x93e0ff[_0x29ccb2],_0x4abad4=_0x93e0ff[_0x53200c],_0xeb28a1=_0x184a93['get'](_0xe9d8f7);if(w['assert'](_0xeb28a1,'Shader\x20chu'+'nk\x20'+_0xe9d8f7+('\x20not\x20found'+'.')),w['call'](()=>{_0xeb28a1&&this['_validateM'+'apChunk'](_0x42561b,_0xe9d8f7,_0x184a93);}),_0x5f33ac){_0x55ec12['set']('STD_'+_0x42561b+'_TEXTURE','');const _0x5f1b95=this['_getUvSour'+'ceExpressi'+'on'](_0x2c30c3,_0x1cdb74,_0x93e0ff);_0x55ec12['set']('{STD_'+_0x42561b+('_TEXTURE_U'+'V}'),_0x5f1b95),_0x55ec12['set']('{STD_'+_0x42561b+('_TEXTURE_C'+'HANNEL}'),_0x93e0ff[_0xc521dd]);const _0x5f5528='{STD_'+_0x42561b+('_TEXTURE_N'+'AME}');if(_0xeb28a1['includes'](_0x5f5528)){let _0x151582='texture_'+_0x49e5dd;const _0xd96bef=_0x7ffd51[_0x1fa283];_0xd96bef?_0x151582=_0xd96bef:(_0x7ffd51[_0x1fa283]=_0x151582,_0x55ec12['set']('STD_'+_0x42561b+('_TEXTURE_A'+'LLOCATE'),'')),_0x55ec12['set'](_0x5f5528,_0x151582);}if(_0x4b0a08){const _0x244530=_0x93e0ff[_0xc521dd]==='aaa'?'passThroug'+'h':Tr['decodeFunc'](_0x4b0a08);_0x55ec12['set']('{STD_'+_0x42561b+('_TEXTURE_D'+'ECODE}'),_0x244530);}}_0x430f1d&&(_0x55ec12['set']('STD_'+_0x42561b+'_VERTEX',''),_0x55ec12['set']('{STD_'+_0x42561b+('_VERTEX_CH'+'ANNEL}'),_0x93e0ff[_0x1c89e1])),_0x4abad4&&_0x55ec12['set']('{STD_'+_0x42561b+('_DETAILMOD'+'E}'),_0x4abad4),_0x5ecf02&&_0x55ec12['set']('STD_'+_0x42561b+'_CONSTANT',''),_0x93e0ff[_0x561378]&&_0x55ec12['set']('STD_'+_0x42561b+'_INVERT','');}['_correctCh'+'annel'](_0x34f488,_0x4910db,_0x4a60d0){if(_0x4a60d0[_0x34f488]>-0x1*-0xf9e+-0x21*0x5+-0xef9){if(_0x4a60d0[_0x34f488]<_0x4910db['length'])return _0x4910db['substring'](0x1*-0xe25+0xe1c+-0x3*-0x3,_0x4a60d0[_0x34f488]);if(_0x4a60d0[_0x34f488]>_0x4910db['length']){let _0x331bd1=_0x4910db;const _0x455db7=_0x331bd1['charAt'](_0x331bd1['length']-(0x1471*-0x1+0x22b+0x1247)),_0x2646e0=_0x4a60d0[_0x34f488]-_0x331bd1['length'];for(let _0x31bd85=-0x9d2+-0x7*0x341+0x2099;_0x31bd85<_0x2646e0;_0x31bd85++)_0x331bd1+=_0x455db7;return _0x331bd1;}return _0x4910db;}}['createVert'+'exShader'](_0x32b94c,_0x14481c){const _0x28c7d8=[],_0x3db071=[],_0x3ee0cf=[];for(const _0x127520 in bn){const _0x5663aa=_0x127520+'Map';if(_0x14481c[_0x127520+('VertexColo'+'r')]){const _0x2534b4=_0x127520+('VertexColo'+'rChannel');_0x14481c[_0x2534b4]=this['_correctCh'+'annel'](_0x127520,_0x14481c[_0x2534b4],bn);}if(_0x14481c[_0x5663aa]){const _0x5e40fa=_0x5663aa+'Channel',_0x4959e9=_0x5663aa+'Transform',_0x868606=_0x5663aa+'Uv';_0x14481c[_0x868606]=Math['min'](_0x14481c[_0x868606],0x10*0x1a8+-0xf48+-0x63*0x1d),_0x14481c[_0x5e40fa]=this['_correctCh'+'annel'](_0x127520,_0x14481c[_0x5e40fa],bn);const _0x353343=_0x14481c[_0x868606];_0x28c7d8[_0x353343]=!(-0x1*0x31d+0x1cf*0x6+-0x7bd),_0x3db071[_0x353343]=_0x3db071[_0x353343]||_0x14481c[_0x5663aa]&&!_0x14481c[_0x4959e9],_0x14481c[_0x4959e9]&&_0x3ee0cf['push']({'name':_0x127520,'id':_0x14481c[_0x4959e9],'uv':_0x14481c[_0x868606]});}}_0x14481c['forceUv1']&&(_0x28c7d8[-0x3*0x36d+0x1217+-0x7cf]=!(0x1*-0x1093+-0x24b6*-0x1+-0x1423),_0x3db071[-0x1918+-0x1*-0x1af0+0x1*-0x1d7]=_0x3db071[-0x13c9+-0x1*0xc92+0x205c]!==void(0x27*-0xde+0x166+0x14c*0x19)?_0x3db071[0x2c*-0xa2+-0x229e+-0x1*-0x3e77]:!(0x7c3*-0x1+0x24c1+-0x1cfe)),_0x32b94c['generateVe'+'rtexShader'](_0x28c7d8,_0x3db071,_0x3ee0cf);}['prepareFra'+'gmentDefin'+'es'](_0x553572,_0x1a816b,_0x3c7844){const _0x5c9cb2=(_0x2f5104,_0x2eb471,_0x575780='')=>{_0x2f5104&&_0x1a816b['set'](_0x2eb471,_0x575780);};_0x5c9cb2(_0x553572['lightMap'],'STD_LIGHTM'+'AP',''),_0x5c9cb2(_0x553572['lightVerte'+'xColor'],'STD_LIGHT_'+'VERTEX_COL'+'OR',''),_0x5c9cb2(_0x553572['dirLightMa'+'p']&&_0x553572['litOptions']['useSpecula'+'r'],'STD_LIGHTM'+'AP_DIR',''),_0x5c9cb2(_0x553572['heightMap'],'STD_HEIGHT'+'_MAP',''),_0x5c9cb2(_0x553572['useSpecula'+'rColor'],'STD_SPECUL'+'AR_COLOR',''),_0x5c9cb2(_0x553572['aoMap']||_0x553572['aoVertexCo'+'lor']||_0x553572['useAO'],'STD_AO',''),_0x5c9cb2(!(0x1c4d+-0x329*-0x1+-0x1f76*0x1),'STD_OPACIT'+'Y_DITHER',iE[_0x3c7844['isForward']?_0x553572['litOptions']['opacityDit'+'her']:_0x553572['litOptions']['opacitySha'+'dowDither']]);}['createShad'+'erDefiniti'+'on'](_0x34552d,_0x5947f6){const _0x48d903=Si['get'](_0x34552d)['getByIndex'](_0x5947f6['litOptions']['pass']),_0xb9c13b=_0x48d903['isForward'],_0x1f3c27=new db(_0x34552d,_0x5947f6['litOptions']);this['createVert'+'exShader'](_0x1f3c27,_0x5947f6);const _0x51f3e4={};_0x5947f6['litOptions']['fresnelMod'+'el']=_0x5947f6['litOptions']['fresnelMod'+'el']===-0x2e*0x17+-0x124*0x11+-0x2*-0xbc3?Yp:_0x5947f6['litOptions']['fresnelMod'+'el'];const _0x16726f=_0x1f3c27['fDefines'];this['prepareFra'+'gmentDefin'+'es'](_0x5947f6,_0x16726f,_0x48d903);let _0x37837f='';if(_0xb9c13b){if(_0x5947f6['heightMap']&&this['_addMapDef'+'ines'](_0x16726f,'height','parallaxPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4),(_0x5947f6['litOptions']['blendType']!==Cs||_0x5947f6['litOptions']['alphaTest']||_0x5947f6['litOptions']['alphaToCov'+'erage']||_0x5947f6['litOptions']['opacityDit'+'her']!==Sa)&&this['_addMapDef'+'ines'](_0x16726f,'opacity','opacityPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4),_0x1f3c27['needsNorma'+'l']){if((_0x5947f6['normalMap']||_0x5947f6['clearCoatN'+'ormalMap'])&&!_0x5947f6['litOptions']['hasTangent'+'s']){const _0x31e394=_0x5947f6['normalMap']?'normalMap':'clearCoatN'+'ormalMap';_0x37837f=this['_getUvSour'+'ceExpressi'+'on'](_0x31e394+'Transform',_0x31e394+'Uv',_0x5947f6);}this['_addMapDef'+'ines'](_0x16726f,'normalDeta'+'il','normalMapP'+'S',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4,_0x5947f6['normalDeta'+'ilPackedNo'+'rmal']?'xy':'xyz'),this['_addMapDef'+'ines'](_0x16726f,'normal','normalMapP'+'S',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4,_0x5947f6['packedNorm'+'al']?'xy':'xyz');}_0x5947f6['diffuseDet'+'ail']&&this['_addMapDef'+'ines'](_0x16726f,'diffuseDet'+'ail','diffusePS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4,_0x5947f6['diffuseDet'+'ailEncodin'+'g']),this['_addMapDef'+'ines'](_0x16726f,'diffuse','diffusePS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4,_0x5947f6['diffuseEnc'+'oding']),_0x5947f6['litOptions']['useRefract'+'ion']&&(this['_addMapDef'+'ines'](_0x16726f,'refraction','transmissi'+'onPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4),this['_addMapDef'+'ines'](_0x16726f,'thickness','thicknessP'+'S',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4)),_0x5947f6['litOptions']['useIridesc'+'ence']&&(this['_addMapDef'+'ines'](_0x16726f,'iridescenc'+'e','iridescenc'+'ePS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4),this['_addMapDef'+'ines'](_0x16726f,'iridescenc'+'eThickness','iridescenc'+'eThickness'+'PS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4)),(_0x1f3c27['lighting']&&_0x5947f6['litOptions']['useSpecula'+'r']||_0x1f3c27['reflection'+'s'])&&(_0x5947f6['litOptions']['useSheen']&&(this['_addMapDef'+'ines'](_0x16726f,'sheen','sheenPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4,_0x5947f6['sheenEncod'+'ing']),this['_addMapDef'+'ines'](_0x16726f,'sheenGloss','sheenGloss'+'PS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4)),_0x5947f6['litOptions']['useMetalne'+'ss']&&(this['_addMapDef'+'ines'](_0x16726f,'metalness','metalnessP'+'S',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4),this['_addMapDef'+'ines'](_0x16726f,'ior','iorPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4)),_0x5947f6['litOptions']['useSpecula'+'rityFactor']&&this['_addMapDef'+'ines'](_0x16726f,'specularit'+'yFactor','specularit'+'yFactorPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4),_0x5947f6['useSpecula'+'rColor']&&this['_addMapDef'+'ines'](_0x16726f,'specular','specularPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4,_0x5947f6['specularEn'+'coding']),this['_addMapDef'+'ines'](_0x16726f,'gloss','glossPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4)),_0x5947f6['aoDetail']&&this['_addMapDef'+'ines'](_0x16726f,'aoDetail','aoPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4),(_0x5947f6['aoMap']||_0x5947f6['aoVertexCo'+'lor']||_0x5947f6['useAO'])&&this['_addMapDef'+'ines'](_0x16726f,'ao','aoPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4),this['_addMapDef'+'ines'](_0x16726f,'emissive','emissivePS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4,_0x5947f6['emissiveEn'+'coding']),_0x5947f6['litOptions']['useClearCo'+'at']&&(this['_addMapDef'+'ines'](_0x16726f,'clearCoat','clearCoatP'+'S',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4),this['_addMapDef'+'ines'](_0x16726f,'clearCoatG'+'loss','clearCoatG'+'lossPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4),this['_addMapDef'+'ines'](_0x16726f,'clearCoatN'+'ormal','clearCoatN'+'ormalPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4,_0x5947f6['clearCoatP'+'ackedNorma'+'l']?'xy':'xyz')),_0x5947f6['litOptions']['enableGGXS'+'pecular']&&this['_addMapDef'+'ines'](_0x16726f,'anisotropy','anisotropy'+'PS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4),(_0x5947f6['lightMap']||_0x5947f6['lightVerte'+'xColor'])&&this['_addMapDef'+'ines'](_0x16726f,'light','lightmapPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4,_0x5947f6['lightMapEn'+'coding']);}else{const _0x115e94=_0x5947f6['litOptions']['opacitySha'+'dowDither'];(_0x5947f6['litOptions']['alphaTest']||_0x115e94)&&this['_addMapDef'+'ines'](_0x16726f,'opacity','opacityPS',_0x5947f6,_0x1f3c27['chunks'],_0x51f3e4);}_0x1f3c27['generateFr'+'agmentShad'+'er'](_0x1f3c27['chunks']['get']('stdDeclara'+'tionPS'),_0x1f3c27['chunks']['get']('stdFrontEn'+'dPS'),_0x37837f);const _0x3b9a2d=bh['merge'](_0x1f3c27['chunks'],_0x1f3c27['includes']),_0x21db92=_0x1f3c27['vDefines'];_0x5947f6['defines']['forEach']((_0x32f4bd,_0x899de7)=>_0x21db92['set'](_0x899de7,_0x32f4bd)),_0x5947f6['defines']['forEach']((_0x560db1,_0x97cfd0)=>_0x16726f['set'](_0x97cfd0,_0x560db1));const _0xf907d3=Jt['createDefi'+'nition'](_0x34552d,{'name':'StandardSh'+'ader','attributes':_0x1f3c27['attributes'],'shaderLanguage':_0x1f3c27['shaderLang'+'uage'],'vertexCode':_0x1f3c27['vshader'],'fragmentCode':_0x1f3c27['fshader'],'vertexIncludes':_0x3b9a2d,'fragmentIncludes':_0x3b9a2d,'fragmentDefines':_0x16726f,'vertexDefines':_0x21db92});return _0x1f3c27['shaderPass'+'Info']['isForward']&&(_0xf907d3['tag']=Sy),_0xf907d3;}}const Jd=new fb(),ss=[];ss[Gp]={'src':Ft,'dst':Ft,'op':Tx},ss[Cs]={'src':Ft,'dst':rp,'op':fs},ss[Zs]={'src':jh,'dst':Yh,'op':fs,'alphaSrc':Ft},ss[Gn]={'src':Ft,'dst':Yh,'op':fs},ss[Hp]={'src':Ft,'dst':Ft,'op':fs},ss[Ed]={'src':jh,'dst':Ft,'op':fs},ss[$p]={'src':JS,'dst':vx,'op':fs},ss[Xp]={'src':xx,'dst':Ft,'op':fs},ss[Wp]={'src':JS,'dst':rp,'op':fs},ss[qp]={'src':Ft,'dst':Ft,'op':wx},ss[jp]={'src':Ft,'dst':Ft,'op':Ex};let ub=0x1e23+0x1eef*0x1+-0x3d12;class tr{constructor(){h(this,'meshInstan'+'ces',[]),h(this,'name','Untitled'),h(this,'userId',''),h(this,'id',ub++),h(this,'variants',new Map()),h(this,'defines',new Map()),h(this,'_definesDi'+'rty',!(-0x1de1+-0x1*-0x89+-0xb*-0x2ab)),h(this,'parameters',{}),h(this,'alphaTest',0x16a*0x9+0x17*0xda+-0x2050),h(this,'alphaToCov'+'erage',!(0xe*0x6b+-0x7*-0x1b1+0x1*-0x11b0)),h(this,'_blendStat'+'e',new pt()),h(this,'_depthStat'+'e',new Yt()),h(this,'cull',pa),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'_shaderChu'+'nks',null),h(this,'_oldChunks',{}),h(this,'_dirtyShad'+'er',!(0xce9+-0xa*0x2a1+0xd61)),h(this,'_shaderVer'+'sion',0x7c0*0x5+-0x412*0x7+-0xa42),h(this,'_scene',null),h(this,'dirty',!(-0x164e+-0xbf*-0xb+-0x191*-0x9)),new.target===tr&&w['error']('Material\x20c'+'lass\x20canno'+'t\x20be\x20insta'+'ntiated,\x20u'+'se\x20ShaderM'+'aterial\x20in'+'stead');}get['hasShaderC'+'hunks'](){return this['_shaderChu'+'nks']!=null;}get['shaderChun'+'ks'](){return this['_shaderChu'+'nks']||(this['_shaderChu'+'nks']=new Pe()),this['_shaderChu'+'nks'];}['getShaderC'+'hunks'](_0x25b952=Fe){const _0x250265=this['shaderChun'+'ks'];return _0x25b952===Fe?_0x250265['glsl']:_0x250265['wgsl'];}set['shaderChun'+'ksVersion'](_0x432985){this['shaderChun'+'ks']['version']=_0x432985;}get['shaderChun'+'ksVersion'](){return this['shaderChun'+'ks']['version'];}set['chunks'](_0x5a5029){w['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),this['_oldChunks']=_0x5a5029;}get['chunks'](){return w['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),Object['assign'](this['_oldChunks'],Object['fromEntrie'+'s'](this['shaderChun'+'ks']['glsl'])),this['_oldChunks'];}set['depthBias'](_0x114c50){this['_depthStat'+'e']['depthBias']=_0x114c50;}get['depthBias'](){return this['_depthStat'+'e']['depthBias'];}set['slopeDepth'+'Bias'](_0x280dc1){this['_depthStat'+'e']['depthBiasS'+'lope']=_0x280dc1;}get['slopeDepth'+'Bias'](){return this['_depthStat'+'e']['depthBiasS'+'lope'];}set['redWrite'](_0x231e1b){this['_blendStat'+'e']['redWrite']=_0x231e1b;}get['redWrite'](){return this['_blendStat'+'e']['redWrite'];}set['greenWrite'](_0x32cee1){this['_blendStat'+'e']['greenWrite']=_0x32cee1;}get['greenWrite'](){return this['_blendStat'+'e']['greenWrite'];}set['blueWrite'](_0x197646){this['_blendStat'+'e']['blueWrite']=_0x197646;}get['blueWrite'](){return this['_blendStat'+'e']['blueWrite'];}set['alphaWrite'](_0x23501c){this['_blendStat'+'e']['alphaWrite']=_0x23501c;}get['alphaWrite'](){return this['_blendStat'+'e']['alphaWrite'];}get['transparen'+'t'](){return this['_blendStat'+'e']['blend'];}['_updateTra'+'nsparency'](){const _0x4b9dab=this['transparen'+'t'],_0x23ee7f=this['meshInstan'+'ces'];for(let _0x105c7b=0xd64+-0x1f7c+0x1218;_0x105c7b<_0x23ee7f['length'];_0x105c7b++)_0x23ee7f[_0x105c7b]['transparen'+'t']=_0x4b9dab;}set['blendState'](_0x47dd19){this['_blendStat'+'e']['copy'](_0x47dd19),this['_updateTra'+'nsparency']();}get['blendState'](){return this['_blendStat'+'e'];}set['blendType'](_0x1bd617){const _0x28ce05=ss[_0x1bd617];w['assert'](_0x28ce05,'Unknown\x20bl'+'end\x20mode\x20'+_0x1bd617),this['_blendStat'+'e']['setColorBl'+'end'](_0x28ce05['op'],_0x28ce05['src'],_0x28ce05['dst']),this['_blendStat'+'e']['setAlphaBl'+'end'](_0x28ce05['alphaOp']??_0x28ce05['op'],_0x28ce05['alphaSrc']??_0x28ce05['src'],_0x28ce05['alphaDst']??_0x28ce05['dst']);const _0x61c461=_0x1bd617!==Cs;this['_blendStat'+'e']['blend']!==_0x61c461&&(this['_blendStat'+'e']['blend']=_0x61c461,this['_updateTra'+'nsparency']()),this['_updateMes'+'hInstanceK'+'eys']();}get['blendType'](){if(!this['transparen'+'t'])return Cs;const {colorOp:_0x2fc9fb,colorSrcFactor:_0x589b73,colorDstFactor:_0x3d4ac6,alphaOp:_0x3d08c2,alphaSrcFactor:_0x2f2eb2,alphaDstFactor:_0xc4ba95}=this['_blendStat'+'e'];for(let _0x3a354a=0x4f5+-0x796+0x2a1*0x1;_0x3a354a<ss['length'];_0x3a354a++){const _0x4defab=ss[_0x3a354a];if(_0x4defab['src']===_0x589b73&&_0x4defab['dst']===_0x3d4ac6&&_0x4defab['op']===_0x2fc9fb&&_0x4defab['src']===_0x2f2eb2&&_0x4defab['dst']===_0xc4ba95&&_0x4defab['op']===_0x3d08c2)return _0x3a354a;}return Zs;}set['depthState'](_0x1ad5f3){this['_depthStat'+'e']['copy'](_0x1ad5f3);}get['depthState'](){return this['_depthStat'+'e'];}set['depthTest'](_0x527de7){this['_depthStat'+'e']['test']=_0x527de7;}get['depthTest'](){return this['_depthStat'+'e']['test'];}set['depthFunc'](_0x5a2901){this['_depthStat'+'e']['func']=_0x5a2901;}get['depthFunc'](){return this['_depthStat'+'e']['func'];}set['depthWrite'](_0x46a31e){this['_depthStat'+'e']['write']=_0x46a31e;}get['depthWrite'](){return this['_depthStat'+'e']['write'];}['copy'](_0x4e4849){var _0x4b6c4d,_0x3b2817;this['name']=_0x4e4849['name'],this['alphaTest']=_0x4e4849['alphaTest'],this['alphaToCov'+'erage']=_0x4e4849['alphaToCov'+'erage'],this['_blendStat'+'e']['copy'](_0x4e4849['_blendStat'+'e']),this['_depthStat'+'e']['copy'](_0x4e4849['_depthStat'+'e']),this['cull']=_0x4e4849['cull'],this['stencilFro'+'nt']=(_0x4b6c4d=_0x4e4849['stencilFro'+'nt'])==null?void(-0x15a1+0x106b+0x2*0x29b):_0x4b6c4d['clone'](),_0x4e4849['stencilBac'+'k']&&(this['stencilBac'+'k']=_0x4e4849['stencilFro'+'nt']===_0x4e4849['stencilBac'+'k']?this['stencilFro'+'nt']:_0x4e4849['stencilBac'+'k']['clone']()),this['clearParam'+'eters']();for(const _0x339c28 in _0x4e4849['parameters'])_0x4e4849['parameters']['hasOwnProp'+'erty'](_0x339c28)&&this['_setParame'+'terSimple'](_0x339c28,_0x4e4849['parameters'][_0x339c28]['data']);return this['defines']['clear'](),_0x4e4849['defines']['forEach']((_0x5d17ea,_0x4acb38)=>this['defines']['set'](_0x4acb38,_0x5d17ea)),this['_shaderChu'+'nks']=_0x4e4849['hasShaderC'+'hunks']?new Pe():null,(_0x3b2817=this['_shaderChu'+'nks'])==null||_0x3b2817['copy'](_0x4e4849['_shaderChu'+'nks']),this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['_updateMes'+'hInstanceK'+'eys'](){const _0x562731=this['meshInstan'+'ces'];for(let _0x51317c=-0x38b*0x9+-0x26c0+-0x1*-0x46a3;_0x51317c<_0x562731['length'];_0x51317c++)_0x562731[_0x51317c]['updateKey']();}['updateUnif'+'orms'](_0x10f006,_0x289b60){this['_dirtyShad'+'er']&&this['clearVaria'+'nts']();}['getShaderV'+'ariant'](_0x465a35){w['assert'](!(-0x21d1+-0x1a2b*-0x1+-0x3*-0x28d),'Not\x20implem'+'ented');}['update'](){var _0x270e51,_0x5d512a;if(Object['keys'](this['_oldChunks'])['length']>-0x7a1+0x14b1*0x1+0xb*-0x130){for(const [_0x673853,_0x58c2c2]of Object['entries'](this['_oldChunks']))this['shaderChun'+'ks']['glsl']['set'](_0x673853,_0x58c2c2),delete this['_oldChunks'][_0x673853];}(this['_definesDi'+'rty']||(_0x270e51=this['_shaderChu'+'nks'])!=null&&_0x270e51['isDirty']())&&(this['_definesDi'+'rty']=!(-0x1*-0x26a5+-0x20d1+-0x5d3),(_0x5d512a=this['_shaderChu'+'nks'])==null||_0x5d512a['resetDirty'](),this['clearVaria'+'nts']()),this['dirty']=!(0x3*0x9c4+-0x1a13+-0xa5*0x5);}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['clearVaria'+'nts'](){this['variants']['clear']();const _0x51b968=this['meshInstan'+'ces'],_0x13abeb=_0x51b968['length'];for(let _0x48c2ee=0x3e1*0x5+0x1f66+0x32cb*-0x1;_0x48c2ee<_0x13abeb;_0x48c2ee++)_0x51b968[_0x48c2ee]['clearShade'+'rs']();}['getParamet'+'er'](_0xe1c480){return this['parameters'][_0xe1c480];}['_setParame'+'terSimple'](_0x268aeb,_0x5f1586){w['call'](()=>{_0x5f1586===void(0x724+0x11*0x4b+0x6b*-0x1d)&&w['warnOnce']('Material#s'+'etParamete'+'r:\x20Attempt'+'ing\x20to\x20set'+'\x20undefined'+'\x20data\x20for\x20'+'parameter\x20'+'\x22'+_0x268aeb+('\x22,\x20this\x20is'+'\x20likely\x20no'+'t\x20expected'+'.'),this);});const _0x1c7ae4=this['parameters'][_0x268aeb];_0x1c7ae4?_0x1c7ae4['data']=_0x5f1586:this['parameters'][_0x268aeb]={'scopeId':null,'data':_0x5f1586};}['setParamet'+'er'](_0x7c8849,_0x5b0446){if(_0x5b0446===void(0x1d10+-0x1913*0x1+-0x1*0x3fd)&&typeof _0x7c8849=='object'){const _0x4cec53=_0x7c8849;if(_0x4cec53['length']){for(let _0xd09b4b=0xa7*0x26+0x1b1*0x15+-0x3c4f;_0xd09b4b<_0x4cec53['length'];_0xd09b4b++)this['setParamet'+'er'](_0x4cec53[_0xd09b4b]);return;}_0x7c8849=_0x4cec53['name'],_0x5b0446=_0x4cec53['value'];}this['_setParame'+'terSimple'](_0x7c8849,_0x5b0446);}['deletePara'+'meter'](_0x3a0d38){this['parameters'][_0x3a0d38]&&delete this['parameters'][_0x3a0d38];}['setParamet'+'ers'](_0x418b69,_0x3d2969){const _0x562647=this['parameters'];_0x3d2969===void(-0x86*0x2e+0x7f1*-0x2+0x27f6)&&(_0x3d2969=_0x562647);for(const _0x5b2601 in _0x3d2969){const _0x2868ed=_0x562647[_0x5b2601];_0x2868ed&&(_0x2868ed['scopeId']||(_0x2868ed['scopeId']=_0x418b69['scope']['resolve'](_0x5b2601)),_0x2868ed['scopeId']['setValue'](_0x2868ed['data']));}}['setDefine'](_0x5720dd,_0x2489b8){let _0x5b8b7a=!(0x955*-0x1+0x23+-0x311*-0x3);const {defines:_0x9983d5}=this;_0x2489b8!==void(-0xdcd*0x2+-0x1*-0xb7e+0x80e*0x2)&&_0x2489b8!==!(0x10*-0x125+0x1*-0x1b9c+0x1*0x2ded)?(_0x5b8b7a=!_0x9983d5['has'](_0x5720dd)||_0x9983d5['get'](_0x5720dd)!==_0x2489b8,_0x9983d5['set'](_0x5720dd,_0x2489b8)):(_0x5b8b7a=_0x9983d5['has'](_0x5720dd),_0x9983d5['delete'](_0x5720dd)),this['_definesDi'+'rty']||(this['_definesDi'+'rty']=_0x5b8b7a);}['getDefine'](_0x2485f2){return this['defines']['has'](_0x2485f2);}['destroy'](){this['variants']['clear']();for(let _0x55ca67=0x1*0x196d+-0x9b0+-0x53f*0x3;_0x55ca67<this['meshInstan'+'ces']['length'];_0x55ca67++){const _0x1ac559=this['meshInstan'+'ces'][_0x55ca67];if(_0x1ac559['clearShade'+'rs'](),_0x1ac559['_material']=null,_0x1ac559['mesh']){const _0x558fdf=Qn(_0x1ac559['mesh']['device']);this!==_0x558fdf&&(_0x1ac559['material']=_0x558fdf);}else w['warn']('pc.Materia'+'l:\x20MeshIns'+'tance.mesh'+'\x20is\x20null,\x20'+'default\x20ma'+'terial\x20can'+'not\x20be\x20ass'+'igned\x20to\x20t'+'he\x20MeshIns'+'tance');}this['meshInstan'+'ces']['length']=0x1bdf+-0x2*-0x398+0x1*-0x230f;}['addMeshIns'+'tanceRef'](_0x1009a7){this['meshInstan'+'ces']['push'](_0x1009a7);}['removeMesh'+'InstanceRe'+'f'](_0x4b37ce){const _0x55e321=this['meshInstan'+'ces'],_0x47a835=_0x55e321['indexOf'](_0x4b37ce);_0x47a835!==-(-0x54f+-0x580+0x8*0x15a)&&_0x55e321['splice'](_0x47a835,0x1*-0x6d9+-0x1*-0x26ed+-0x15*0x187);}}class Ws{static['update'](_0x306f55,_0x357bdd,_0x553df4,_0x1c8e37,_0x4c1403,_0x46dcc1,_0x3bad02){Ws['updateShar'+'edOptions'](_0x306f55,_0x357bdd,_0x553df4,_0x4c1403,_0x46dcc1),Ws['updateMate'+'rialOption'+'s'](_0x306f55,_0x357bdd),Ws['updateEnvO'+'ptions'](_0x306f55,_0x357bdd,_0x553df4,_0x1c8e37),Ws['updateLigh'+'tingOption'+'s'](_0x306f55,_0x357bdd,_0x553df4,_0x4c1403,_0x3bad02);}static['updateShar'+'edOptions'](_0x480e3a,_0x93c0fe,_0x5535cb,_0x413c3b,_0x250bd0){_0x480e3a['shaderChun'+'ks']=_0x93c0fe['shaderChun'+'ks'],_0x480e3a['pass']=_0x250bd0,_0x480e3a['alphaTest']=_0x93c0fe['alphaTest']>0x11*-0x23b+-0x22b+0x2816,_0x480e3a['blendType']=_0x93c0fe['blendType'],_0x480e3a['screenSpac'+'e']=_0x413c3b&&(_0x413c3b&Eh)!==0x2243+0x649*-0x1+-0x1bfa,_0x480e3a['skin']=_0x413c3b&&(_0x413c3b&nl)!==0x6d4+-0x1*0xd2d+-0x7d*-0xd,_0x480e3a['useInstanc'+'ing']=_0x413c3b&&(_0x413c3b&ol)!==0xca6+-0x1775+-0xacf*-0x1,_0x480e3a['useMorphPo'+'sition']=_0x413c3b&&(_0x413c3b&ll)!==-0x1e90+0x2123*-0x1+-0x3fb3*-0x1,_0x480e3a['useMorphNo'+'rmal']=_0x413c3b&&(_0x413c3b&cl)!==0x752*-0x1+0x6f*-0x12+0xf20,_0x480e3a['useMorphTe'+'xtureBased'+'Int']=_0x413c3b&&(_0x413c3b&hl)!==0x5*-0x624+-0x4a*0x20+0x27f4,_0x480e3a['hasTangent'+'s']=_0x413c3b&&(_0x413c3b&om)!==-0x1*-0x737+0x1d9*-0x7+0x5b8,_0x480e3a['nineSliced'+'Mode']=_0x93c0fe['nineSliced'+'Mode']||ci,_0x93c0fe['useLightin'+'g']&&_0x5535cb['clusteredL'+'ightingEna'+'bled']?(_0x480e3a['clusteredL'+'ightingEna'+'bled']=!(0x6b*0x4b+0x251e+-0x407*0x11),_0x480e3a['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x5535cb['lighting']['cookiesEna'+'bled'],_0x480e3a['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x5535cb['lighting']['shadowsEna'+'bled'],_0x480e3a['clusteredL'+'ightingSha'+'dowType']=_0x5535cb['lighting']['shadowType'],_0x480e3a['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x5535cb['lighting']['areaLights'+'Enabled']):(_0x480e3a['clusteredL'+'ightingEna'+'bled']=!(0x1c36+0x2*0x20+-0x1c75),_0x480e3a['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(-0x2555+-0x1*0x14fb+0x3a51),_0x480e3a['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(0x1*0x474+-0x1*-0x23db+0x4d*-0x86),_0x480e3a['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(0x5d*-0x2e+-0x1d88+0x2e3f));}static['updateMate'+'rialOption'+'s'](_0x4963fd,_0x522b6e){_0x4963fd['separateAm'+'bient']=!(-0x1608+0x3*0x235+0xf6a),_0x4963fd['pixelSnap']=_0x522b6e['pixelSnap'],_0x4963fd['ambientSH']=_0x522b6e['ambientSH'],_0x4963fd['twoSidedLi'+'ghting']=_0x522b6e['twoSidedLi'+'ghting'],_0x4963fd['occludeDir'+'ect']=_0x522b6e['occludeDir'+'ect'],_0x4963fd['occludeSpe'+'cular']=_0x522b6e['occludeSpe'+'cular'],_0x4963fd['occludeSpe'+'cularFloat']=_0x522b6e['occludeSpe'+'cularInten'+'sity']!==0xa55+-0x2*0xfe8+0x157c,_0x4963fd['useMsdf']=!(-0x2*0x1329+0xef*0x1f+0x962),_0x4963fd['msdfTextAt'+'tribute']=!(-0x2481+-0x5d1*-0x4+0x69f*0x2),_0x4963fd['alphaToCov'+'erage']=_0x522b6e['alphaToCov'+'erage'],_0x4963fd['opacityFad'+'esSpecular']=_0x522b6e['opacityFad'+'esSpecular'],_0x4963fd['opacityDit'+'her']=_0x522b6e['opacityDit'+'her'],_0x4963fd['cubeMapPro'+'jection']=tm,_0x4963fd['useSpecula'+'r']=_0x522b6e['hasSpecula'+'r'],_0x4963fd['useSpecula'+'rityFactor']=_0x522b6e['hasSpecula'+'rityFactor'],_0x4963fd['enableGGXS'+'pecular']=_0x522b6e['ggxSpecula'+'r'],_0x4963fd['fresnelMod'+'el']=_0x522b6e['fresnelMod'+'el'],_0x4963fd['useRefract'+'ion']=_0x522b6e['hasRefract'+'ion'],_0x4963fd['useClearCo'+'at']=_0x522b6e['hasClearCo'+'at'],_0x4963fd['useSheen']=_0x522b6e['hasSheen'],_0x4963fd['useIridesc'+'ence']=_0x522b6e['hasIrrides'+'cence'],_0x4963fd['useMetalne'+'ss']=_0x522b6e['hasMetalne'+'ss'],_0x4963fd['useDynamic'+'Refraction']=_0x522b6e['dynamicRef'+'raction'],_0x4963fd['dispersion']=_0x522b6e['dispersion']>0xc7*0x22+-0xc4a+-0xe24,_0x4963fd['vertexColo'+'rs']=!(0xa6b+-0x1cbd+-0x1253*-0x1),_0x4963fd['lightMapEn'+'abled']=_0x522b6e['hasLightin'+'g'],_0x4963fd['dirLightMa'+'pEnabled']=_0x522b6e['dirLightMa'+'p'],_0x4963fd['useHeights']=_0x522b6e['hasHeights'],_0x4963fd['useNormals']=_0x522b6e['hasNormals'],_0x4963fd['useClearCo'+'atNormals']=_0x522b6e['hasClearCo'+'atNormals'],_0x4963fd['useAo']=_0x522b6e['hasAo'],_0x4963fd['diffuseMap'+'Enabled']=_0x522b6e['hasDiffuse'+'Map'];}static['updateEnvO'+'ptions'](_0x2f9d10,_0x5ede1c,_0x264430,_0x366f8a){_0x2f9d10['fog']=_0x5ede1c['useFog']?_0x366f8a['fog']:Kn,_0x2f9d10['gamma']=_0x366f8a['shaderOutp'+'utGamma'],_0x2f9d10['toneMap']=_0x5ede1c['useTonemap']?_0x366f8a['toneMappin'+'g']:nv,_0x5ede1c['useSkybox']&&_0x264430['envAtlas']&&_0x264430['skybox']?(_0x2f9d10['reflection'+'Source']=xh,_0x2f9d10['reflection'+'Encoding']=_0x264430['envAtlas']['encoding'],_0x2f9d10['reflection'+'CubemapEnc'+'oding']=_0x264430['skybox']['encoding']):_0x5ede1c['useSkybox']&&_0x264430['envAtlas']?(_0x2f9d10['reflection'+'Source']=vh,_0x2f9d10['reflection'+'Encoding']=_0x264430['envAtlas']['encoding']):_0x5ede1c['useSkybox']&&_0x264430['skybox']?(_0x2f9d10['reflection'+'Source']=Th,_0x2f9d10['reflection'+'Encoding']=_0x264430['skybox']['encoding']):(_0x2f9d10['reflection'+'Source']=vr,_0x2f9d10['reflection'+'Encoding']=null),_0x5ede1c['ambientSH']?(_0x2f9d10['ambientSou'+'rce']=im,_0x2f9d10['ambientEnc'+'oding']=null):_0x2f9d10['reflection'+'Source']!==vr&&_0x264430['envAtlas']?(_0x2f9d10['ambientSou'+'rce']=rm,_0x2f9d10['ambientEnc'+'oding']=_0x264430['envAtlas']['encoding']):(_0x2f9d10['ambientSou'+'rce']=am,_0x2f9d10['ambientEnc'+'oding']=null);const _0x458b92=_0x2f9d10['reflection'+'Source']!==vr;_0x2f9d10['skyboxInte'+'nsity']=_0x458b92,_0x2f9d10['useCubeMap'+'Rotation']=_0x458b92&&_0x264430['_skyboxRot'+'ationShade'+'rInclude'];}static['updateLigh'+'tingOption'+'s'](_0x4f5247,_0x570d81,_0x459f63,_0x58a53c,_0x201fd3){if(_0x4f5247['lightMapWi'+'thoutAmbie'+'nt']=!(-0x46*-0x30+-0x269*0x3+-0x5e4),_0x570d81['useLightin'+'g']){const _0x37abc0=[],_0x48a3ef=_0x58a53c?_0x58a53c>>-0x1e77+-0x13fe+-0x3285*-0x1:Ss;_0x4f5247['lightMaskD'+'ynamic']=!!(_0x48a3ef&Ss),_0x4f5247['lightMapWi'+'thoutAmbie'+'nt']=!(0x1b66+0x1304+-0x2e69),_0x201fd3&&(Ws['collectLig'+'hts'](ve,_0x201fd3[ve],_0x37abc0,_0x48a3ef),_0x459f63['clusteredL'+'ightingEna'+'bled']||(Ws['collectLig'+'hts'](Ke,_0x201fd3[Ke],_0x37abc0,_0x48a3ef),Ws['collectLig'+'hts'](Ze,_0x201fd3[Ze],_0x37abc0,_0x48a3ef))),_0x4f5247['lights']=_0x37abc0;}else _0x4f5247['lights']=[];(_0x4f5247['lights']['length']===0x242a+-0x1*0xe21+-0x1*0x1609&&!_0x459f63['clusteredL'+'ightingEna'+'bled']||(_0x58a53c&wh)!==-0x58*-0x6d+0x23f+0xd3d*-0x3)&&(_0x4f5247['noShadow']=!(-0x513*0x6+-0x12*0x39+0x2274));}static['collectLig'+'hts'](_0x38d9c4,_0x5ea7d7,_0x40d1b8,_0x14dc9a){for(let _0x58f420=0xb85+-0xb*0x298+-0x43*-0x41;_0x58f420<_0x5ea7d7['length'];_0x58f420++){const _0x2eb0c1=_0x5ea7d7[_0x58f420];_0x2eb0c1['enabled']&&_0x2eb0c1['mask']&_0x14dc9a&&_0x40d1b8['push'](_0x2eb0c1);}}}const G_=(_0x3e80ac,_0x572251)=>{if(_0x3e80ac['length']!==_0x572251['length'])return!(-0x10cc+0x9a*0x7+0xc97);for(let _0x1e2bb9=0x3*0x335+-0x2437+0x1a98;_0x1e2bb9<_0x3e80ac['length'];++_0x1e2bb9)if(_0x3e80ac[_0x1e2bb9]!==_0x572251[_0x1e2bb9])return!(-0x226e+0x28c+-0x9*-0x38b);return!(0x1c0d+-0x58d+-0x1680);},pb=_0x1ebda1=>_0x1ebda1['r']!==-0x77*-0xb+-0x1122+0xc06||_0x1ebda1['g']!==-0x1e84+0x1ed8+-0x53||_0x1ebda1['b']!==-0x124*-0xe+0x25ca*-0x1+-0x1*-0x15d3,mb=_0x216458=>_0x216458['r']!==0x26d0+0x2362+0x2*-0x2519||_0x216458['g']!==0x1f+-0x19b9+0x199a*0x1||_0x216458['b']!==0x3a5*0x1+0x2ee+-0x693;class _b{constructor(){this['_mapXForms']=null;}['updateMinR'+'ef'](_0x4fff4d,_0x306d7a,_0x21b317,_0x34e127,_0x508298,_0x1950cb){this['_updateSha'+'redOptions'](_0x4fff4d,_0x306d7a,_0x21b317,_0x34e127,_0x508298),this['_updateMin'+'Options'](_0x4fff4d,_0x21b317,_0x508298),this['_updateUVO'+'ptions'](_0x4fff4d,_0x21b317,_0x34e127,!(0x2065+0x1f2b+-0x1fc8*0x2));}['updateRef'](_0x5e85f9,_0x241c39,_0x19301d,_0x443cfc,_0x2d2fa6,_0x3ee135,_0x2506bb){this['_updateSha'+'redOptions'](_0x5e85f9,_0x241c39,_0x443cfc,_0x2d2fa6,_0x3ee135),this['_updateEnv'+'Options'](_0x5e85f9,_0x443cfc,_0x241c39,_0x19301d),this['_updateMat'+'erialOptio'+'ns'](_0x5e85f9,_0x443cfc,_0x241c39),_0x5e85f9['litOptions']['hasTangent'+'s']=_0x2d2fa6&&(_0x2d2fa6&om)!==0xd2e+-0x1*0x34f+-0x9df,this['_updateLig'+'htOptions'](_0x5e85f9,_0x241c39,_0x443cfc,_0x2d2fa6,_0x2506bb),this['_updateUVO'+'ptions'](_0x5e85f9,_0x443cfc,_0x2d2fa6,!(0x173b*0x1+-0x1385+0x1*-0x3b5),_0x19301d);}['_updateSha'+'redOptions'](_0x1a8f9a,_0x58bd10,_0x7bc7db,_0x42e951,_0x3fb240){_0x1a8f9a['forceUv1']=_0x7bc7db['forceUv1'],_0x7bc7db['userAttrib'+'utes']&&(_0x1a8f9a['litOptions']['userAttrib'+'utes']=Object['fromEntrie'+'s'](_0x7bc7db['userAttrib'+'utes']['entries']())),_0x1a8f9a['litOptions']['shaderChun'+'ks']=_0x7bc7db['shaderChun'+'ks'],_0x1a8f9a['litOptions']['pass']=_0x3fb240,_0x1a8f9a['litOptions']['alphaTest']=_0x7bc7db['alphaTest']>0x5b5*0x1+0x243+-0x7f8,_0x1a8f9a['litOptions']['blendType']=_0x7bc7db['blendType'],_0x1a8f9a['litOptions']['screenSpac'+'e']=_0x42e951&&(_0x42e951&Eh)!==0x17da+0x1bb*0x3+-0x5cf*0x5,_0x1a8f9a['litOptions']['skin']=_0x42e951&&(_0x42e951&nl)!==-0x480+0x47*-0x72+0xc0a*0x3,_0x1a8f9a['litOptions']['batch']=_0x42e951&&(_0x42e951&qc)!==0x20e*0x1+-0x4d*0xa+0xf4,_0x1a8f9a['litOptions']['useInstanc'+'ing']=_0x42e951&&(_0x42e951&ol)!==-0x38a*-0x4+-0x1e45+0xa5*0x19,_0x1a8f9a['litOptions']['useMorphPo'+'sition']=_0x42e951&&(_0x42e951&ll)!==-0x17d1+0x2077*0x1+-0x8a6,_0x1a8f9a['litOptions']['useMorphNo'+'rmal']=_0x42e951&&(_0x42e951&cl)!==0x6b8+0xab5*0x1+-0x3*0x5cf,_0x1a8f9a['litOptions']['useMorphTe'+'xtureBased'+'Int']=_0x42e951&&(_0x42e951&hl)!==-0x2127+0x2520+-0x9*0x71,_0x1a8f9a['litOptions']['nineSliced'+'Mode']=_0x7bc7db['nineSliced'+'Mode']||-0x2326+0xfad+0x1379,_0x58bd10['clusteredL'+'ightingEna'+'bled']&&_0x7bc7db['useLightin'+'g']?(_0x1a8f9a['litOptions']['clusteredL'+'ightingEna'+'bled']=!(0x216*0x1+0x1*-0x5dd+0x3c7),_0x1a8f9a['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x58bd10['lighting']['cookiesEna'+'bled'],_0x1a8f9a['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x58bd10['lighting']['shadowsEna'+'bled'],_0x1a8f9a['litOptions']['clusteredL'+'ightingSha'+'dowType']=_0x58bd10['lighting']['shadowType'],_0x1a8f9a['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x58bd10['lighting']['areaLights'+'Enabled']):(_0x1a8f9a['litOptions']['clusteredL'+'ightingEna'+'bled']=!(-0xa32+-0xedd+-0x191*-0x10),_0x1a8f9a['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(0x9e*0x37+0x1dc9+-0x3fba),_0x1a8f9a['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(0x5b3*-0x5+-0x253a+0x41ba),_0x1a8f9a['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(0x38d+0x18*0x18d+-0x28c4));}['_updateUVO'+'ptions'](_0x2bfb50,_0x361024,_0x4abd86,_0x881f4b,_0x4d37b2){let _0x48e2aa=!(-0x1274+0x187c*-0x1+0x2af1),_0x5e0e64=!(0x335+0xb*-0x20b+0x1345),_0x31c91f=!(0xff+-0xc01+0xb03);_0x4abd86&&(_0x48e2aa=(_0x4abd86&nm)!==0x1172+-0x9*0x1cb+-0x14f,_0x5e0e64=(_0x4abd86&dv)!==-0x297*-0x1+-0x2*0x8e5+0x511*0x3,_0x31c91f=(_0x4abd86&fv)!==0xece*0x1+0x1d4c*-0x1+0x109*0xe),_0x2bfb50['litOptions']['vertexColo'+'rs']=!(0xa*-0x8a+-0xd*0xc5+0xf66),this['_mapXForms']=[];const _0x3b8e20={};for(const _0x24610e in bn)this['_updateTex'+'Options'](_0x2bfb50,_0x361024,_0x24610e,_0x48e2aa,_0x5e0e64,_0x31c91f,_0x881f4b,_0x3b8e20);this['_mapXForms']=null,_0x2bfb50['litOptions']['ssao']=_0x4d37b2==null?void(0x5c5*0x1+0x575+-0xb3a):_0x4d37b2['ssaoEnable'+'d'],_0x2bfb50['useAO']=_0x2bfb50['litOptions']['ssao'],_0x2bfb50['litOptions']['lightMapEn'+'abled']=_0x2bfb50['lightMap'],_0x2bfb50['litOptions']['dirLightMa'+'pEnabled']=_0x2bfb50['dirLightMa'+'p'],_0x2bfb50['litOptions']['useHeights']=_0x2bfb50['heightMap'],_0x2bfb50['litOptions']['useNormals']=_0x2bfb50['normalMap'],_0x2bfb50['litOptions']['useClearCo'+'atNormals']=_0x2bfb50['clearCoatN'+'ormalMap'],_0x2bfb50['litOptions']['useAo']=_0x2bfb50['aoMap']||_0x2bfb50['aoVertexCo'+'lor']||_0x2bfb50['litOptions']['ssao'],_0x2bfb50['litOptions']['diffuseMap'+'Enabled']=_0x2bfb50['diffuseMap'];}['_updateTex'+'Options'](_0x259343,_0x277b37,_0x2e5054,_0x2caf52,_0x1169f3,_0x3130a4,_0x4b24ef,_0x4a2448){const _0x14818a=_0x2e5054==='opacity';if(!_0x4b24ef||_0x14818a){const _0x2bcfa6=_0x2e5054+'Map',_0x6009a0=_0x2e5054+('VertexColo'+'r'),_0x5f13fc=_0x2e5054+('VertexColo'+'rChannel'),_0x5bf242=_0x2bcfa6+'Channel',_0x3de874=_0x2bcfa6+'Transform',_0x290c51=_0x2bcfa6+'Uv',_0x216e5e=_0x2bcfa6+'Identifier';if(_0x2e5054!=='light'&&(_0x259343[_0x2bcfa6]=!(-0x804+-0x1*0x56b+0x4*0x35c),_0x259343[_0x216e5e]=void(0x1a2*0x2+0x2220+-0x2*0x12b2),_0x259343[_0x5bf242]='',_0x259343[_0x3de874]=0x255*-0x1+0xa0e+-0x7b9,_0x259343[_0x290c51]=0x56c*0x2+0x13*-0xe1+-0x1*-0x5db),_0x259343[_0x6009a0]=!(0x7f*0xb+0x8*0x4e1+-0x1a*0x1b6),_0x259343[_0x5f13fc]='',_0x14818a&&_0x277b37['blendType']===Cs&&_0x277b37['alphaTest']===0x20*0x68+-0x17c1+-0xac1*-0x1&&!_0x277b37['alphaToCov'+'erage']&&_0x277b37['opacityDit'+'her']===Sa)return;if(_0x2e5054!=='height'&&_0x277b37[_0x6009a0]&&_0x3130a4&&(_0x259343[_0x6009a0]=_0x277b37[_0x6009a0],_0x259343[_0x5f13fc]=_0x277b37[_0x5f13fc],_0x259343['litOptions']['vertexColo'+'rs']=!(0x277+-0x2e7*-0x1+-0x55e)),_0x277b37[_0x2bcfa6]){let _0x4c7d7a=!(-0x1bbb+-0x55*-0x6f+-0x920);if(_0x277b37[_0x290c51]===0x2368+-0xd*-0x273+0x37*-0x139&&!_0x2caf52&&(_0x4c7d7a=!(-0xef*0x1d+0x12*0x219+-0x557*0x2)),_0x277b37[_0x290c51]===0x25a8+-0x13*0x5b+-0xa*0x317&&!_0x1169f3&&(_0x4c7d7a=!(-0x2334*-0x1+0x3b5*0xa+0x15*-0x371)),_0x4c7d7a){const _0x57570e=_0x277b37[_0x2bcfa6]['id'];let _0x1889c9=_0x4a2448[_0x57570e];_0x1889c9===void(0x1*0x82c+0x75*-0x28+-0x50e*-0x2)&&(_0x4a2448[_0x57570e]=_0x2e5054,_0x1889c9=_0x2e5054),_0x259343[_0x2bcfa6]=!!_0x277b37[_0x2bcfa6],_0x259343[_0x216e5e]=_0x1889c9,_0x259343[_0x3de874]=this['_getMapTra'+'nsformID'](_0x277b37['getUniform'](_0x3de874),_0x277b37[_0x290c51]),_0x259343[_0x5bf242]=_0x277b37[_0x5bf242],_0x259343[_0x290c51]=_0x277b37[_0x290c51];}}}}['_updateMin'+'Options'](_0x653540,_0x4114b7,_0x160cd2){const _0x5cb775=_0x160cd2===Rl;_0x653540['litOptions']['opacitySha'+'dowDither']=_0x5cb775?_0x4114b7['opacityDit'+'her']:_0x4114b7['opacitySha'+'dowDither'],_0x653540['litOptions']['linearDept'+'h']=_0x5cb775,_0x653540['litOptions']['lights']=[];}['_updateMat'+'erialOptio'+'ns'](_0x702dc8,_0x5e2845,_0x51637c){var _0x4299c9,_0x53c143,_0x230529,_0x945fc,_0x4df447,_0x263127;const _0x352b20=!!(_0x5e2845['useMetalne'+'ss']||_0x5e2845['specularMa'+'p']||_0x5e2845['sphereMap']||_0x5e2845['cubeMap']||mb(_0x5e2845['specular'])||_0x5e2845['specularit'+'yFactor']>-0xa*0xb7+0x45e+-0x2*-0x164&&_0x5e2845['useMetalne'+'ss']||_0x5e2845['enableGGXS'+'pecular']||_0x5e2845['clearCoat']>-0x1*0xb9+-0x1*-0xf10+-0xe57*0x1),_0x3919ff=!_0x5e2845['useMetalne'+'ss']||_0x5e2845['useMetalne'+'ssSpecular'+'Color'],_0xe7cbe4=_0x352b20&&(_0x5e2845['specularTi'+'nt']||!_0x5e2845['specularMa'+'p']&&!_0x5e2845['specularVe'+'rtexColor'])&&pb(_0x5e2845['specular']),_0x3c5232=_0x352b20&&_0x5e2845['useMetalne'+'ssSpecular'+'Color']&&(_0x5e2845['specularit'+'yFactorTin'+'t']||_0x5e2845['specularit'+'yFactor']<-0x2*0x1e5+-0x29a*-0x1+0x131&&!_0x5e2845['specularit'+'yFactorMap']),_0x1475a3=_0x2d3d1c=>_0x2d3d1c?_0x2d3d1c['format']===vl||_0x2d3d1c['type']===Jo:!(0x2050+-0x5c6*0x1+-0x1a89),_0xcaf61e=(_0x2bc1c9,_0x532983)=>Math['abs'](_0x2bc1c9-_0x532983)<0x96f+0x227+-0x5cb*0x2+0.0001;_0x702dc8['specularTi'+'nt']=_0xe7cbe4,_0x702dc8['specularit'+'yFactorTin'+'t']=_0x3c5232,_0x702dc8['metalnessT'+'int']=_0x5e2845['useMetalne'+'ss']&&_0x5e2845['metalness']<-0x481*0x2+-0x125b*0x2+0x2db9*0x1,_0x702dc8['glossTint']=!(0x199b+0x293+-0x2*0xe17),_0x702dc8['diffuseEnc'+'oding']=(_0x4299c9=_0x5e2845['diffuseMap'])==null?void(0x1de*0xb+0x1d0*-0x2+-0x10ea):_0x4299c9['encoding'],_0x702dc8['diffuseDet'+'ailEncodin'+'g']=(_0x53c143=_0x5e2845['diffuseDet'+'ailMap'])==null?void(0x89*-0x25+0x51d+0x5*0x2f0):_0x53c143['encoding'],_0x702dc8['emissiveEn'+'coding']=(_0x230529=_0x5e2845['emissiveMa'+'p'])==null?void(0xb8a+0xa92+-0x161c):_0x230529['encoding'],_0x702dc8['lightMapEn'+'coding']=(_0x945fc=_0x5e2845['lightMap'])==null?void(-0x8*-0x11a+-0x1dea+0xa8d*0x2):_0x945fc['encoding'],_0x702dc8['packedNorm'+'al']=_0x1475a3(_0x5e2845['normalMap']),_0x702dc8['refraction'+'Tint']=_0xcaf61e(_0x5e2845['refraction'],-0x8a7*-0x2+-0x9f2*0x3+0xc89),_0x702dc8['refraction'+'IndexTint']=_0xcaf61e(_0x5e2845['refraction'+'Index'],(0x25*-0x103+0x7*0x569+-0x3*0x25)/(-0x5e5+0xcfa+-0x714+0.5)),_0x702dc8['thicknessT'+'int']=_0x5e2845['useDynamic'+'Refraction']&&_0x5e2845['thickness']!==0x75*-0x53+-0x1539+-0x1*-0x3b29,_0x702dc8['specularEn'+'coding']=(_0x4df447=_0x5e2845['specularMa'+'p'])==null?void(0x1*0xd09+-0x14+-0xcf5):_0x4df447['encoding'],_0x702dc8['sheenEncod'+'ing']=(_0x263127=_0x5e2845['sheenMap'])==null?void(-0x1*0x1933+0x12dc+0x657):_0x263127['encoding'],_0x702dc8['aoMapUv']=_0x5e2845['aoUvSet'],_0x702dc8['aoDetail']=!!_0x5e2845['aoDetailMa'+'p'],_0x702dc8['diffuseDet'+'ail']=!!_0x5e2845['diffuseDet'+'ailMap'],_0x702dc8['normalDeta'+'il']=!!_0x5e2845['normalMap'],_0x702dc8['normalDeta'+'ilPackedNo'+'rmal']=_0x1475a3(_0x5e2845['normalDeta'+'ilMap']),_0x702dc8['diffuseDet'+'ailMode']=_0x5e2845['diffuseDet'+'ailMode'],_0x702dc8['aoDetailMo'+'de']=_0x5e2845['aoDetailMo'+'de'],_0x702dc8['clearCoatG'+'loss']=!!_0x5e2845['clearCoatG'+'loss'],_0x702dc8['clearCoatP'+'ackedNorma'+'l']=_0x1475a3(_0x5e2845['clearCoatN'+'ormalMap']),_0x702dc8['iorTint']=_0xcaf61e(_0x5e2845['refraction'+'Index'],(-0xb0e+0x2417*0x1+-0x48*0x59)/(-0x5e7+0x14*0x10d+0x2*-0x78e+0.5)),_0x51637c['forcePassT'+'hroughSpec'+'ular']&&(_0x702dc8['specularEn'+'coding']='linear',_0x702dc8['sheenEncod'+'ing']='linear'),_0x702dc8['iridescenc'+'eTint']=_0x5e2845['iridescenc'+'e']!==0xcd1*0x1+0x1448+-0x2118,_0x702dc8['glossInver'+'t']=_0x5e2845['glossInver'+'t'],_0x702dc8['sheenGloss'+'Invert']=_0x5e2845['sheenGloss'+'Invert'],_0x702dc8['clearCoatG'+'lossInvert']=_0x5e2845['clearCoatG'+'lossInvert'],_0x702dc8['useSpecula'+'rColor']=_0x3919ff,_0x702dc8['litOptions']['separateAm'+'bient']=!(0x1e18+-0x1e78+0x61),_0x702dc8['litOptions']['pixelSnap']=_0x5e2845['pixelSnap'],_0x702dc8['litOptions']['ambientSH']=!!_0x5e2845['ambientSH'],_0x702dc8['litOptions']['twoSidedLi'+'ghting']=_0x5e2845['twoSidedLi'+'ghting'],_0x702dc8['litOptions']['occludeSpe'+'cular']=_0x5e2845['occludeSpe'+'cular'],_0x702dc8['litOptions']['occludeSpe'+'cularFloat']=_0x5e2845['occludeSpe'+'cularInten'+'sity']!==-0x1*0x1910+-0x262e+0x3*0x1515,_0x702dc8['litOptions']['useMsdf']=!!_0x5e2845['msdfMap'],_0x702dc8['litOptions']['msdfTextAt'+'tribute']=!!_0x5e2845['msdfTextAt'+'tribute'],_0x702dc8['litOptions']['alphaToCov'+'erage']=_0x5e2845['alphaToCov'+'erage'],_0x702dc8['litOptions']['opacityFad'+'esSpecular']=_0x5e2845['opacityFad'+'esSpecular'],_0x702dc8['litOptions']['opacityDit'+'her']=_0x5e2845['opacityDit'+'her'],_0x702dc8['litOptions']['cubeMapPro'+'jection']=_0x5e2845['cubeMapPro'+'jection'],_0x702dc8['litOptions']['occludeDir'+'ect']=_0x5e2845['occludeDir'+'ect'],_0x702dc8['litOptions']['useSpecula'+'r']=_0x352b20,_0x702dc8['litOptions']['useSpecula'+'rityFactor']=(_0x3c5232||!!_0x5e2845['specularit'+'yFactorMap'])&&_0x5e2845['useMetalne'+'ssSpecular'+'Color'],_0x702dc8['litOptions']['enableGGXS'+'pecular']=_0x5e2845['enableGGXS'+'pecular'],_0x702dc8['litOptions']['fresnelMod'+'el']=_0x5e2845['fresnelMod'+'el'],_0x702dc8['litOptions']['useRefract'+'ion']=(_0x5e2845['refraction']||!!_0x5e2845['refraction'+'Map'])&&(_0x5e2845['useDynamic'+'Refraction']||_0x702dc8['litOptions']['reflection'+'Source']!==vr),_0x702dc8['litOptions']['useClearCo'+'at']=!!_0x5e2845['clearCoat'],_0x702dc8['litOptions']['useSheen']=_0x5e2845['useSheen'],_0x702dc8['litOptions']['useIridesc'+'ence']=_0x5e2845['useIridesc'+'ence']&&_0x5e2845['iridescenc'+'e']!==-0x3f3+0x1100+0x1*-0xd0d,_0x702dc8['litOptions']['useMetalne'+'ss']=_0x5e2845['useMetalne'+'ss'],_0x702dc8['litOptions']['useDynamic'+'Refraction']=_0x5e2845['useDynamic'+'Refraction'],_0x702dc8['litOptions']['dispersion']=_0x5e2845['dispersion']>0x1618+-0xde7*0x1+-0x831,_0x702dc8['litOptions']['shadowCatc'+'her']=_0x5e2845['shadowCatc'+'her'];}['_updateEnv'+'Options'](_0x23d6cb,_0x279dcd,_0x4281da,_0x413e94){_0x23d6cb['litOptions']['fog']=_0x279dcd['useFog']?_0x413e94['fog']:Kn,_0x23d6cb['litOptions']['gamma']=_0x413e94['shaderOutp'+'utGamma'],_0x23d6cb['litOptions']['toneMap']=_0x279dcd['useTonemap']?_0x413e94['toneMappin'+'g']:nv;let _0x2d543c=!(-0x16aa*-0x1+-0x7f7*-0x2+-0x6f*0x59);if(_0x279dcd['envAtlas']&&_0x279dcd['cubeMap']?(_0x23d6cb['litOptions']['reflection'+'Source']=xh,_0x23d6cb['litOptions']['reflection'+'Encoding']=_0x279dcd['envAtlas']['encoding'],_0x23d6cb['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x279dcd['cubeMap']['encoding']):_0x279dcd['envAtlas']?(_0x23d6cb['litOptions']['reflection'+'Source']=vh,_0x23d6cb['litOptions']['reflection'+'Encoding']=_0x279dcd['envAtlas']['encoding']):_0x279dcd['cubeMap']?(_0x23d6cb['litOptions']['reflection'+'Source']=Th,_0x23d6cb['litOptions']['reflection'+'Encoding']=_0x279dcd['cubeMap']['encoding']):_0x279dcd['sphereMap']?(_0x23d6cb['litOptions']['reflection'+'Source']=hv,_0x23d6cb['litOptions']['reflection'+'Encoding']=_0x279dcd['sphereMap']['encoding']):_0x279dcd['useSkybox']&&_0x4281da['envAtlas']&&_0x4281da['skybox']?(_0x23d6cb['litOptions']['reflection'+'Source']=xh,_0x23d6cb['litOptions']['reflection'+'Encoding']=_0x4281da['envAtlas']['encoding'],_0x23d6cb['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x4281da['skybox']['encoding'],_0x2d543c=!(-0x4a*0x19+-0x211*0xc+0x2006)):_0x279dcd['useSkybox']&&_0x4281da['envAtlas']?(_0x23d6cb['litOptions']['reflection'+'Source']=vh,_0x23d6cb['litOptions']['reflection'+'Encoding']=_0x4281da['envAtlas']['encoding'],_0x2d543c=!(-0x67*0x31+0x1*0xa6f+0x948)):_0x279dcd['useSkybox']&&_0x4281da['skybox']?(_0x23d6cb['litOptions']['reflection'+'Source']=Th,_0x23d6cb['litOptions']['reflection'+'Encoding']=_0x4281da['skybox']['encoding'],_0x2d543c=!(0xbb*-0x1a+-0x61d*-0x5+-0xb93*0x1)):(_0x23d6cb['litOptions']['reflection'+'Source']=vr,_0x23d6cb['litOptions']['reflection'+'Encoding']=null),_0x279dcd['ambientSH'])_0x23d6cb['litOptions']['ambientSou'+'rce']=im,_0x23d6cb['litOptions']['ambientEnc'+'oding']=null;else{const _0x232346=_0x279dcd['envAtlas']||(_0x279dcd['useSkybox']&&_0x4281da['envAtlas']?_0x4281da['envAtlas']:null);_0x232346&&!_0x279dcd['sphereMap']?(_0x23d6cb['litOptions']['ambientSou'+'rce']=rm,_0x23d6cb['litOptions']['ambientEnc'+'oding']=_0x232346['encoding']):(_0x23d6cb['litOptions']['ambientSou'+'rce']=am,_0x23d6cb['litOptions']['ambientEnc'+'oding']=null);}_0x23d6cb['litOptions']['skyboxInte'+'nsity']=_0x2d543c,_0x23d6cb['litOptions']['useCubeMap'+'Rotation']=_0x2d543c&&_0x4281da['_skyboxRot'+'ationShade'+'rInclude'];}['_updateLig'+'htOptions'](_0x369009,_0x2567e3,_0x1db766,_0x3b3b8c,_0xb5d83b){if(_0x369009['lightMap']=!(-0x4a*0x4c+-0xf13+0x943*0x4),_0x369009['lightMapCh'+'annel']='',_0x369009['lightMapUv']=0x1687+-0xad+0x2*-0xaed,_0x369009['lightMapTr'+'ansform']=0x11+0x902+-0x913,_0x369009['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(-0xe3f+0x1177*-0x1+0x1fb7),_0x369009['dirLightMa'+'p']=!(-0x2a4+0x1f66*0x1+-0x1cc1),_0x3b3b8c&&(_0x369009['litOptions']['noShadow']=(_0x3b3b8c&wh)!==-0x11d1+-0x4*-0x363+0x445,(_0x3b3b8c&ou)!==-0x17a3+0x1107+-0x34e*-0x2&&(_0x369009['lightMapEn'+'coding']=_0x2567e3['lightmapPi'+'xelFormat']===Ne?'rgbm':'linear',_0x369009['lightMap']=!(-0xde*-0x9+-0x5*-0x669+0xd49*-0x3),_0x369009['lightMapCh'+'annel']='rgb',_0x369009['lightMapUv']=-0x164f+-0x58a*-0x1+-0x863*-0x2,_0x369009['lightMapTr'+'ansform']=0x2b*-0x4d+-0xef*0x1f+0x29e0,_0x369009['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!_0x1db766['lightMap'],(_0x3b3b8c&uv)!==0x1b50+-0x1af1+0x5f*-0x1&&(_0x369009['dirLightMa'+'p']=!(-0x54f+0x19*0x182+0x2063*-0x1)),(_0x3b3b8c&pv)!==0x1288*0x2+0x13e2+-0x18a*0x25&&(_0x369009['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0x1*-0x1b7+0x57+-0x161*-0x1)))),_0x1db766['useLightin'+'g']){const _0x491c98=[],_0x504913=_0x3b3b8c?_0x3b3b8c>>-0xeee+0xfe5+-0x1*0xe7:Ss;_0x369009['litOptions']['lightMaskD'+'ynamic']=!!(_0x504913&Ss),_0xb5d83b&&(Ws['collectLig'+'hts'](ve,_0xb5d83b[ve],_0x491c98,_0x504913),_0x2567e3['clusteredL'+'ightingEna'+'bled']||(Ws['collectLig'+'hts'](Ke,_0xb5d83b[Ke],_0x491c98,_0x504913),Ws['collectLig'+'hts'](Ze,_0xb5d83b[Ze],_0x491c98,_0x504913))),_0x369009['litOptions']['lights']=_0x491c98;}else _0x369009['litOptions']['lights']=[];_0x369009['litOptions']['lights']['length']===-0x57f+0x7d3*-0x3+0x4d4*0x6&&!_0x2567e3['clusteredL'+'ightingEna'+'bled']&&(_0x369009['litOptions']['noShadow']=!(-0x1dcf+0x11bb+0xc14));}['_getMapTra'+'nsformID'](_0x15661c,_0x48cab9){if(!_0x15661c)return 0x1b*-0x49+0xef4+-0x741;let _0x4db260=this['_mapXForms'][_0x48cab9];_0x4db260||(_0x4db260=[],this['_mapXForms'][_0x48cab9]=_0x4db260);for(let _0x27c70f=-0x95*0x1c+-0x3*-0x9b7+-0xcd9;_0x27c70f<_0x4db260['length'];_0x27c70f++)if(G_(_0x4db260[_0x27c70f][0x92*-0x13+0x1353+0x35*-0x29]['value'],_0x15661c[0x13c2+-0x323*0xb+0x19*0x97]['value'])&&G_(_0x4db260[_0x27c70f][-0xc2d+0xbb6*0x1+-0x28*-0x3]['value'],_0x15661c[-0x11*-0xb1+0x1e80+-0x2a40]['value']))return _0x27c70f+(0x1*0x10d+0x4*-0x935+0x23c8);return _0x4db260['push'](_0x15661c);}}function rt(_0x40e47a,_0x4f3a31=!(-0x1*-0x1539+-0x1*0x8ef+-0xc4a),_0x5f201f=!(-0x4ab+0x6*0x4dc+-0x187d*0x1)){const _0x3d3c19={};return _0x3d3c19[_0x40e47a+'Map']='texture',_0x3d3c19[_0x40e47a+'MapTiling']='vec2',_0x3d3c19[_0x40e47a+'MapOffset']='vec2',_0x3d3c19[_0x40e47a+('MapRotatio'+'n')]='number',_0x3d3c19[_0x40e47a+'MapUv']='number',_0x4f3a31&&(_0x3d3c19[_0x40e47a+'MapChannel']='string',_0x5f201f&&(_0x3d3c19[_0x40e47a+('VertexColo'+'r')]='boolean',_0x3d3c19[_0x40e47a+('VertexColo'+'rChannel')]='string')),_0x3d3c19;}const $n={'name':'string','chunks':'chunks','mappingFormat':'string','_engine':'boolean','ambient':'rgb',...rt('ao'),...rt('aoDetail',!(-0x1c4c*-0x1+0x10*-0xd7+0x13d*-0xc),!(0x442+-0x7*0x445+0x19a2)),'aoDetailMode':'string','aoIntensity':'number','diffuse':'rgb',...rt('diffuse'),...rt('diffuseDet'+'ail',!(-0x1*0x1a67+0x13d+0x192a),!(-0x18*0x7e+0x1a4a+0x3*-0x4d3)),'diffuseDetailMode':'string','specular':'rgb','specularTint':'boolean',...rt('specular'),'occludeSpecular':'enum:occlu'+'deSpecular','specularityFactor':'number','specularityFactorTint':'boolean',...rt('specularit'+'yFactor'),'useMetalness':'boolean','metalness':'number','enableGGXSpecular':'boolean','metalnessTint':'boolean',...rt('metalness'),'useMetalnessSpecularColor':'boolean','anisotropyIntensity':'number','anisotropyRotation':'number',...rt('anisotropy'),'shininess':'number','gloss':'number','glossInvert':'boolean',...rt('gloss'),'clearCoat':'number',...rt('clearCoat'),'clearCoatGloss':'number','clearCoatGlossInvert':'boolean',...rt('clearCoatG'+'loss'),'clearCoatBumpiness':'number',...rt('clearCoatN'+'ormal',!(-0x4c1*-0x5+0x2047+-0x380b*0x1)),'useSheen':'boolean','sheen':'rgb',...rt('sheen'),'sheenGloss':'number','sheenGlossInvert':'boolean',...rt('sheenGloss'),'fresnelModel':'number','emissive':'rgb',...rt('emissive'),'emissiveIntensity':'number',...rt('normal',!(0x1efe+0x26ad+-0x22d5*0x2)),'bumpiness':'number',...rt('normalDeta'+'il',!(-0x1d0e*-0x1+-0xc99*0x1+-0x1074)),'normalDetailMapBumpiness':'number',...rt('height',!(0x76+-0xadb+0xa65),!(-0x12ca*-0x1+0x1eea+0x1*-0x31b3)),'heightMapFactor':'number','alphaToCoverage':'boolean','alphaTest':'number','alphaFade':'number','opacity':'number',...rt('opacity'),'opacityFadesSpecular':'boolean','opacityDither':'string','opacityShadowDither':'string','reflectivity':'number','refraction':'number','refractionTint':'boolean',...rt('refraction'),'refractionIndex':'number','dispersion':'number','thickness':'number','thicknessTint':'boolean',...rt('thickness'),'attenuation':'rgb','attenuationDistance':'number','useDynamicRefraction':'boolean','sphereMap':'texture','cubeMap':'cubemap','cubeMapProjection':'number','cubeMapProjectionBox':'boundingbo'+'x','useIridescence':'boolean','iridescence':'number','iridescenceTint':'boolean',...rt('iridescenc'+'e'),'iridescenceThicknessTint':'boolean','iridescenceThicknessMin':'number','iridescenceThicknessMax':'number','iridescenceRefractionIndex':'number',...rt('iridescenc'+'eThickness'),...rt('light'),'depthTest':'boolean','depthFunc':'enum:depth'+'Func','depthWrite':'boolean','depthBias':'number','slopeDepthBias':'number','cull':'enum:cull','blendType':'enum:blend'+'Type','useFog':'boolean','useLighting':'boolean','useSkybox':'boolean','useTonemap':'boolean','envAtlas':'texture','twoSidedLighting':'boolean','shadowCatcher':'boolean'},Cd=[];for(const l in $n)$n[l]==='texture'&&Cd['push'](l);const fm=[];for(const l in $n)$n[l]==='cubemap'&&fm['push'](l);const gb={'aoMapVertexColor':'boolean','diffuseMapTint':'boolean','diffuseMapVertexColor':'boolean','emissiveMapTint':'boolean','emissiveMapVertexColor':'boolean','glossMapVertexColor':'boolean','metalnessMapVertexColor':'boolean','opacityMapVertexColor':'boolean','specularAntialias':'boolean','specularMapTint':'boolean','specularMapVertexColor':'boolean','ambientTint':'boolean','emissiveTint':'boolean','diffuseTint':'boolean','sheenTint':'boolean','conserveEnergy':'boolean','useGamma':'boolean','useGammaTonemap':'boolean','sheenGlossTint':'boolean','anisotropy':'boolean'},Kc={},bv={};let no=new Set();const oc=new ie();class Ut extends tr{constructor(){super(),h(this,'userAttrib'+'utes',new Map()),h(this,'onUpdateSh'+'ader'),(this['_assetRefe'+'rences']={},this['_activePar'+'ams']=new Set(),this['_activeLig'+'htingParam'+'s']=new Set(),this['shaderOptB'+'uilder']=new _b(),this['reset']());}['reset'](){Object['keys'](Kc)['forEach'](_0x37f5d5=>{this['_'+_0x37f5d5]=Kc[_0x37f5d5]['value']();}),this['_uniformCa'+'che']={};}['copy'](_0x37255f){return super['copy'](_0x37255f),Object['keys'](Kc)['forEach'](_0x205abd=>{this[_0x205abd]=_0x37255f[_0x205abd];}),this['userAttrib'+'utes']=new Map(_0x37255f['userAttrib'+'utes']),this;}['setAttribu'+'te'](_0x4a44b5,_0x59c0a7){this['userAttrib'+'utes']['set'](_0x59c0a7,_0x4a44b5);}['_setParame'+'ter'](_0x56c960,_0x216cc8){no['add'](_0x56c960),this['setParamet'+'er'](_0x56c960,_0x216cc8);}['_setParame'+'ters'](_0x54eec9){_0x54eec9['forEach'](_0x40b944=>{this['_setParame'+'ter'](_0x40b944['name'],_0x40b944['value']);});}['_processPa'+'rameters'](_0x30da16){const _0x8600e5=this[_0x30da16];_0x8600e5['forEach'](_0x10b06b=>{no['has'](_0x10b06b)||delete this['parameters'][_0x10b06b];}),this[_0x30da16]=no,no=_0x8600e5,no['clear']();}['_updateMap'](_0x231438){const _0x427988=_0x231438+'Map',_0x46723a=this[_0x427988];if(_0x46723a){this['_setParame'+'ter']('texture_'+_0x427988,_0x46723a);const _0x3bcc6b=_0x427988+'Transform',_0xe7738f=this['getUniform'](_0x3bcc6b);_0xe7738f&&this['_setParame'+'ters'](_0xe7738f);}}['_allocUnif'+'orm'](_0x2dfd56,_0x5574d8){let _0xa0b6e9=this['_uniformCa'+'che'][_0x2dfd56];return _0xa0b6e9||(_0xa0b6e9=_0x5574d8(),this['_uniformCa'+'che'][_0x2dfd56]=_0xa0b6e9),_0xa0b6e9;}['getUniform'](_0x102a0d,_0x27a086,_0xef674d){return bv[_0x102a0d](this,_0x27a086,_0xef674d);}['updateUnif'+'orms'](_0xa3d54,_0x5476f8){const _0x1b83d1=_0x2b3cfa=>this['getUniform'](_0x2b3cfa,_0xa3d54,_0x5476f8);this['_setParame'+'ter']('material_a'+'mbient',_0x1b83d1('ambient')),this['_setParame'+'ter']('material_d'+'iffuse',_0x1b83d1('diffuse')),this['_setParame'+'ter']('material_a'+'oIntensity',this['aoIntensit'+'y']),this['useMetalne'+'ss']?((!this['metalnessM'+'ap']||this['metalness']<0x18ab*-0x1+0x8e5+-0x241*-0x7)&&this['_setParame'+'ter']('material_m'+'etalness',this['metalness']),(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x1b83d1('specular')),(!this['specularit'+'yFactorMap']||this['specularit'+'yFactorTin'+'t'])&&this['_setParame'+'ter']('material_s'+'pecularity'+'Factor',this['specularit'+'yFactor']),this['_setParame'+'ter']('material_s'+'heen',_0x1b83d1('sheen')),this['_setParame'+'ter']('material_s'+'heenGloss',this['sheenGloss']),this['_setParame'+'ter']('material_r'+'efractionI'+'ndex',this['refraction'+'Index'])):(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x1b83d1('specular')),this['enableGGXS'+'pecular']&&(this['_setParame'+'ter']('material_a'+'nisotropyI'+'ntensity',this['anisotropy'+'Intensity']),this['_setParame'+'ter']('material_a'+'nisotropyR'+'otation',[Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']),Math['sin'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD'])])),this['clearCoat']>0x1*0xef6+0x1*-0x601+-0x1*0x8f5&&(this['_setParame'+'ter']('material_c'+'learCoat',this['clearCoat']),this['_setParame'+'ter']('material_c'+'learCoatGl'+'oss',this['clearCoatG'+'loss']),this['_setParame'+'ter']('material_c'+'learCoatBu'+'mpiness',this['clearCoatB'+'umpiness'])),this['_setParame'+'ter']('material_g'+'loss',this['gloss']),w['call'](()=>{this['emissiveMa'+'p']&&this['emissive']['r']===-0x4*-0x66c+-0x1ebf*0x1+0x23*0x25&&this['emissive']['g']===0x5*0x15a+-0x1*0x1e0a+0x254*0xa&&this['emissive']['b']===0x1697+0x21+0x8*-0x2d7&&w['warnOnce']('Emissive\x20m'+'ap\x20is\x20set\x20'+'but\x20emissi'+'ve\x20color\x20i'+'s\x20black,\x20m'+'aking\x20the\x20'+'map\x20invisi'+'ble.\x20Set\x20e'+'missive\x20co'+'lor\x20to\x20whi'+'te\x20to\x20make'+'\x20the\x20map\x20v'+'isible.\x20Re'+'ndering\x20['+Q['toString']()+']',this);}),this['_setParame'+'ter']('material_e'+'missive',_0x1b83d1('emissive')),this['_setParame'+'ter']('material_e'+'missiveInt'+'ensity',this['emissiveIn'+'tensity']),this['refraction']>0x92b*-0x4+-0x6a0*-0x1+-0xa04*-0x3&&this['_setParame'+'ter']('material_r'+'efraction',this['refraction']),this['dispersion']>0x23f1+0x4d*-0x4b+-0xd62&&this['_setParame'+'ter']('material_d'+'ispersion',this['dispersion']),this['useDynamic'+'Refraction']&&(this['_setParame'+'ter']('material_t'+'hickness',this['thickness']),this['_setParame'+'ter']('material_a'+'ttenuation',_0x1b83d1('attenuatio'+'n')),this['_setParame'+'ter']('material_i'+'nvAttenuat'+'ionDistanc'+'e',this['attenuatio'+'nDistance']===0xb6a+-0x13*-0x19f+-0x2a37?0x19a0+0x2405+-0x3da5:(-0x1079+-0x1*-0x1369+0x1*-0x2ef)/this['attenuatio'+'nDistance'])),this['useIridesc'+'ence']&&(this['_setParame'+'ter']('material_i'+'ridescence',this['iridescenc'+'e']),this['_setParame'+'ter']('material_i'+'ridescence'+'Refraction'+'Index',this['iridescenc'+'eRefractio'+'nIndex']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'in',this['iridescenc'+'eThickness'+'Min']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'ax',this['iridescenc'+'eThickness'+'Max'])),this['_setParame'+'ter']('material_o'+'pacity',this['opacity']),this['opacityFad'+'esSpecular']===!(-0x830+0x25*-0x5f+0x3d*0x5c)&&this['_setParame'+'ter']('material_a'+'lphaFade',this['alphaFade']),this['occludeSpe'+'cular']&&this['_setParame'+'ter']('material_o'+'ccludeSpec'+'ularIntens'+'ity',this['occludeSpe'+'cularInten'+'sity']),this['cubeMapPro'+'jection']===av&&this['_setParame'+'ter'](_0x1b83d1('cubeMapPro'+'jectionBox'));for(const _0x38dafa in bn)this['_updateMap'](_0x38dafa);this['ambientSH']&&this['_setParame'+'ter']('ambientSH['+'0]',this['ambientSH']),this['normalMap']&&this['_setParame'+'ter']('material_b'+'umpiness',this['bumpiness']),this['normalMap']&&this['normalDeta'+'ilMap']&&this['_setParame'+'ter']('material_n'+'ormalDetai'+'lMapBumpin'+'ess',this['normalDeta'+'ilMapBumpi'+'ness']),this['heightMap']&&this['_setParame'+'ter']('material_h'+'eightMapFa'+'ctor',_0x1b83d1('heightMapF'+'actor')),this['envAtlas']&&this['cubeMap']?(this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap'])):this['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']):this['cubeMap']?this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap']):this['sphereMap']&&this['_setParame'+'ter']('texture_sp'+'hereMap',this['sphereMap']),this['_setParame'+'ter']('material_r'+'eflectivit'+'y',this['reflectivi'+'ty']),this['_processPa'+'rameters']('_activePar'+'ams'),super['updateUnif'+'orms'](_0xa3d54,_0x5476f8);}['updateEnvU'+'niforms'](_0x124e1a,_0xe29692){!(this['envAtlas']||this['cubeMap']||this['sphereMap'])&&this['useSkybox']&&(_0xe29692['envAtlas']&&_0xe29692['skybox']?(this['_setParame'+'ter']('texture_en'+'vAtlas',_0xe29692['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',_0xe29692['skybox'])):_0xe29692['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',_0xe29692['envAtlas']):_0xe29692['skybox']&&this['_setParame'+'ter']('texture_cu'+'beMap',_0xe29692['skybox'])),this['_processPa'+'rameters']('_activeLig'+'htingParam'+'s');}['getShaderV'+'ariant'](_0x5acfe6){const {device:_0x4313a2,scene:_0xa0cf12,pass:_0x23d70a,objDefs:_0x47f181,sortedLights:_0x3b5828,cameraShaderParams:_0x2eb8d3}=_0x5acfe6;this['updateEnvU'+'niforms'](_0x4313a2,_0xa0cf12);const _0x4c01cf=Si['get'](_0x4313a2)['getByIndex'](_0x23d70a),_0xc60e5e=_0x23d70a===Zn||_0x23d70a===Rl||_0x4c01cf['isShadow'];let _0x3a014e=_0xc60e5e?Jd['optionsCon'+'textMin']:Jd['optionsCon'+'text'];_0x3a014e['defines']=$t['getCoreDef'+'ines'](this,_0x5acfe6),_0xc60e5e?this['shaderOptB'+'uilder']['updateMinR'+'ef'](_0x3a014e,_0xa0cf12,this,_0x47f181,_0x23d70a,_0x3b5828):this['shaderOptB'+'uilder']['updateRef'](_0x3a014e,_0xa0cf12,_0x2eb8d3,this,_0x47f181,_0x23d70a,_0x3b5828),this['useFog']||_0x3a014e['defines']['set']('FOG','NONE'),_0x3a014e['defines']['set']('TONEMAP',ov[_0x3a014e['litOptions']['toneMap']]),this['onUpdateSh'+'ader']&&(_0x3a014e=this['onUpdateSh'+'ader'](_0x3a014e));const _0x4cceab=new Ad(_0x5acfe6['viewUnifor'+'mFormat'],_0x5acfe6['viewBindGr'+'oupFormat'],_0x5acfe6['vertexForm'+'at']),_0xf12689=Hn(_0x4313a2);_0xf12689['register']('standard',Jd);const _0x13199d=_0xf12689['getProgram']('standard',_0x3a014e,_0x4cceab,this['userId']);return this['_dirtyShad'+'er']=!(-0x136f*-0x1+0xe89+-0x21f7*0x1),_0x13199d;}['destroy'](){for(const _0x30abaf in this['_assetRefe'+'rences'])this['_assetRefe'+'rences'][_0x30abaf]['_unbind']();this['_assetRefe'+'rences']=null,super['destroy']();}}h(Ut,'TEXTURE_PA'+'RAMETERS',Cd),h(Ut,'CUBEMAP_PA'+'RAMETERS',fm);const Pd=(_0x4174c7,_0x1de865)=>{bv[_0x4174c7]=_0x1de865;},um=(_0x8f5bf6,_0x1f25c5,_0x19763b,_0x9fddd0)=>{Object['defineProp'+'erty'](Ut['prototype'],_0x8f5bf6,{'get':_0x9fddd0||function(){return this['_'+_0x8f5bf6];},'set':_0x19763b}),Kc[_0x8f5bf6]={'value':_0x1f25c5};},Sb=_0x1b70f8=>{const _0x390e88='_'+_0x1b70f8['name'],_0x2c3b1f=_0x1b70f8['dirtyShade'+'rFunc']||(()=>!(0xac5+-0xe9*-0x20+-0x7*0x5b3)),_0x40de1a=function(_0x3ea428){const _0x43c39d=this[_0x390e88];_0x43c39d!==_0x3ea428&&(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x2c3b1f(_0x43c39d,_0x3ea428),this[_0x390e88]=_0x3ea428);};um(_0x1b70f8['name'],()=>_0x1b70f8['defaultVal'+'ue'],_0x40de1a,_0x1b70f8['getterFunc']);},yb=_0x438f41=>{const _0x23ad86='_'+_0x438f41['name'],_0x3628ef=_0x438f41['dirtyShade'+'rFunc']||(()=>!(0x128b+0x11da+0x2465*-0x1)),_0x1728af=function(_0x5891ee){const _0x4ab9f8=this[_0x23ad86];_0x4ab9f8['equals'](_0x5891ee)||(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x3628ef(_0x4ab9f8,_0x5891ee),this[_0x23ad86]=_0x4ab9f8['copy'](_0x5891ee));};um(_0x438f41['name'],()=>_0x438f41['defaultVal'+'ue']['clone'](),_0x1728af,_0x438f41['getterFunc']);},Es=_0x205c81=>_0x205c81['defaultVal'+'ue']&&_0x205c81['defaultVal'+'ue']['clone']?yb(_0x205c81):Sb(_0x205c81);function et(_0x210ebe,_0x2c0447='rgb',_0x4c9b91=!(-0x131a+-0xc*0x1c1+0x2826),_0x159d29=-0xd7+-0x175+0x24c){bn[_0x210ebe]=_0x2c0447['length']||-(-0x23dc+0xdb7+0x1626),Es({'name':_0x210ebe+'Map','defaultValue':null,'dirtyShaderFunc':(_0x43015f,_0x1b6374)=>!!_0x43015f!=!!_0x1b6374||_0x43015f&&(_0x43015f['type']!==_0x1b6374['type']||_0x43015f['format']!==_0x1b6374['format'])}),Es({'name':_0x210ebe+'MapTiling','defaultValue':new J(-0xd3*-0x10+0x1*-0x1b27+0xdf8,0x2523+-0x24d0+-0x52)}),Es({'name':_0x210ebe+'MapOffset','defaultValue':new J(-0x2fc*-0x1+-0x241*0x9+0x114d,-0x1*0x2590+-0xaae+0x1db*0x1a)}),Es({'name':_0x210ebe+('MapRotatio'+'n'),'defaultValue':0x0}),Es({'name':_0x210ebe+'MapUv','defaultValue':_0x159d29}),_0x2c0447&&(Es({'name':_0x210ebe+'MapChannel','defaultValue':_0x2c0447}),_0x4c9b91&&(Es({'name':_0x210ebe+('VertexColo'+'r'),'defaultValue':!(0x2d5+-0x869+0x595)}),Es({'name':_0x210ebe+('VertexColo'+'rChannel'),'defaultValue':_0x2c0447})));const _0x326b34=_0x210ebe+'MapTiling',_0x376540=_0x210ebe+'MapOffset',_0x506c14=_0x210ebe+('MapRotatio'+'n'),_0xe33d60=_0x210ebe+('MapTransfo'+'rm');Pd(_0xe33d60,(_0x13493c,_0x4b49c1,_0x249695)=>{const _0x4a2cf=_0x13493c[_0x326b34],_0x43d769=_0x13493c[_0x376540],_0x166f22=_0x13493c[_0x506c14];if(_0x4a2cf['x']===0xa*0x30a+-0xcbe*-0x3+-0x449d&&_0x4a2cf['y']===-0x3*0xc86+-0x261e+0x4bb1&&_0x43d769['x']===0x2*0xe53+0x1*-0x1eab+-0x1*-0x205&&_0x43d769['y']===-0x193f+0x2c*0x2f+0x1*0x112b&&_0x166f22===0x995*0x2+-0x1*-0x18b9+-0x1*0x2be3)return null;const _0x7ae55a=_0x13493c['_allocUnif'+'orm'](_0xe33d60,()=>[{'name':'texture_'+_0xe33d60+'0','value':new Float32Array(-0x36*0x8f+0x222d+-0x400*0x1)},{'name':'texture_'+_0xe33d60+'1','value':new Float32Array(0x1835+0xe*-0x9+-0x17b4)}]),_0x234c9a=Math['cos'](_0x166f22*Y['DEG_TO_RAD']),_0x5c575f=Math['sin'](_0x166f22*Y['DEG_TO_RAD']),_0x5a3881=_0x7ae55a[-0x1b9*-0xb+0x38c*0xb+-0x47*0xd1]['value'];_0x5a3881[0x2*0x1c6+-0x1cb5+0x1*0x1929]=_0x234c9a*_0x4a2cf['x'],_0x5a3881[0x1ef7+0x1834+-0x372a*0x1]=-_0x5c575f*_0x4a2cf['y'],_0x5a3881[-0x26*-0x99+-0x2f1*-0x7+-0x2b4b*0x1]=_0x43d769['x'];const _0x405f48=_0x7ae55a[0x2248+-0x20d*-0x7+-0x30a2]['value'];return _0x405f48[-0xd2+-0x21bd+0x228f]=_0x5c575f*_0x4a2cf['x'],_0x405f48[0x1525*0x1+0x1450+-0x2974]=_0x234c9a*_0x4a2cf['y'],_0x405f48[-0x107*-0xd+-0x253*0x5+-0x11*0x1a]=0x8*-0x139+-0x24fd+0x2ec6-_0x4a2cf['y']-_0x43d769['y'],_0x7ae55a;});}function Ra(_0x269d5d,_0x1e781d){Es({'name':_0x269d5d,'defaultValue':_0x1e781d,'getterFunc':function(){return this['_dirtyShad'+'er']=!(-0x32*-0x4c+-0x1aa9+-0x113*-0xb),this['_'+_0x269d5d];}}),Pd(_0x269d5d,(_0x2be0b5,_0x3c0271,_0x3fee5f)=>{const _0x298b69=_0x2be0b5['_allocUnif'+'orm'](_0x269d5d,()=>new Float32Array(0x1346+0x1*0x230c+-0x364f)),_0x2024de=_0x2be0b5[_0x269d5d];return oc['linear'](_0x2024de),_0x298b69[-0x56b*0x3+0x1293+-0x252]=oc['r'],_0x298b69[0x31*0x11+0x6*0x583+0x1*-0x2452]=oc['g'],_0x298b69[-0x8f6+0x665+0x293]=oc['b'],_0x298b69;});}function ze(_0x436b66,_0x5868aa,_0xa7799){Es({'name':_0x436b66,'defaultValue':_0x5868aa,'dirtyShaderFunc':(_0x1d6735,_0x277f98)=>(_0x1d6735===-0x1*0xb9+0x1811+-0x1758||_0x1d6735===0x3*0xfe+0x11fd+-0x14f6)!=(_0x277f98===-0x3*0x7bb+0x263+0x14ce||_0x277f98===0x2516+0x372*-0x1+0x4f*-0x6d)}),Pd(_0x436b66,_0xa7799);}function oo(_0x3a49ef,_0x651787){Es({'name':_0x3a49ef,'defaultValue':null,'dirtyShaderFunc':(_0xea1daa,_0x9b768f)=>!!_0xea1daa==!!_0x9b768f}),Pd(_0x3a49ef,_0x651787);}function ke(_0x39ec94,_0x5c26f8){Es({'name':_0x39ec94,'defaultValue':_0x5c26f8});}function vb(){Ra('ambient',new ie(0x1d8f+0x28b*-0x1+-0x1*0x1b03,-0x1bd5+0x19b5+-0x1*-0x221,0x83d+0x1*-0x877+0x3b)),Ra('diffuse',new ie(-0x1*0x83f+-0x1356+0x1b96,0x1*-0xa85+-0xd91+0x7*0x371,0x1*0x3b6+0x572+-0x927)),Ra('specular',new ie(-0x1*0x1008+0xca5+0x363,-0x1e7f*0x1+-0x6f4+0x1*0x2573,-0x10*0x14+0x236c+-0x3cc*0x9)),Ra('emissive',new ie(-0x18cd+-0xc17+0x24e4,-0xb*0x7f+-0xb9b+0x4*0x444,-0x1473+0x599*-0x5+0x3070)),Ra('sheen',new ie(0x4e6+-0x1374+0xe8f*0x1,-0x6cd*0x4+0x1*0x308+0x80f*0x3,0x1fd4+0x796+-0xab*0x3b)),Ra('attenuatio'+'n',new ie(-0x7*0x42b+-0x7f1*-0x2+0x4a*0x2e,-0x891+-0xe7f*0x2+0x259*0x10,-0x27*-0xae+0x1*-0xaf2+-0xf8f*0x1)),ze('emissiveIn'+'tensity',-0x1a94+0x1aa0+0x1*-0xb),ze('specularit'+'yFactor',0x1969*0x1+-0x4f*-0x2f+-0x27e9),ze('sheenGloss',-0x575+-0x5*0x5cf+0x2e*0xc0),ze('gloss',0x2052+-0x9c0+-0x1*0x1692+0.25),ze('aoIntensit'+'y',-0x13f1+0x4be+0xf34),ze('heightMapF'+'actor',0x2*0xa67+-0x2168+0xc9b,(_0x510b13,_0x4cb68d,_0x32c541)=>_0x510b13['heightMapF'+'actor']*(0x1*0x489+-0x1214+-0xd8b*-0x1+0.025)),ze('opacity',0x1*-0x19bd+0x14e6+0x4d8),ze('alphaFade',-0x1d77+0xea7+-0x1*-0xed1),ze('alphaTest',-0x716+-0xfc7*-0x2+-0x1878),ze('bumpiness',-0x14c1*-0x1+-0x214*-0x9+0x13ba*-0x2),ze('normalDeta'+'ilMapBumpi'+'ness',-0x1*0x22ed+0x594+0x1d5a),ze('reflectivi'+'ty',-0x2683+-0x2460+0x12b9*0x4),ze('occludeSpe'+'cularInten'+'sity',0x2ab*0xb+-0x2*-0xbf+0x1*-0x1ed6),ze('refraction',-0x223c+-0x1*0x8d3+0x2b0f),ze('refraction'+'Index',(-0x1*0x147+-0x938+0xa80)/(0xfe9*0x2+-0x2313*0x1+0x116*0x3+0.5)),ze('dispersion',0x70*0x3f+0x1b6e+0x1b7f*-0x2),ze('thickness',-0x26cf*0x1+0x25be+0x111),ze('attenuatio'+'nDistance',0x91a+-0x1d93+-0x6d3*-0x3),ze('metalness',0x157+0x9f5+-0x31*0x3b),ze('anisotropy'+'Intensity',-0x2b+0x669*-0x1+0x694),ze('anisotropy'+'Rotation',-0x3f*-0x1+-0x1*0x17b7+-0x8*-0x2ef),ze('clearCoat',0x20a7*-0x1+-0xa3b+0x2ae2),ze('clearCoatG'+'loss',-0xbaf+0x1*0x187c+-0x666*0x2),ze('clearCoatB'+'umpiness',-0x9ad*0x3+-0x51b*0x2+0x2*0x139f),ze('aoUvSet',0x11*-0x73+0x21*-0xd3+0x22d6,null),ze('iridescenc'+'e',-0x503+0x7c5*-0x3+0x91*0x32),ze('iridescenc'+'eRefractio'+'nIndex',(0xf3e+-0x162c+0x6ef)/(0x1ffa+0x2482+-0x447b+0.5)),ze('iridescenc'+'eThickness'+'Min',0xac7+0x1*0x147b+-0x1f42),ze('iridescenc'+'eThickness'+'Max',-0x6a8+0xe38+0x58*-0x16),oo('ambientSH'),oo('cubeMapPro'+'jectionBox',(_0x3723ef,_0x203671,_0x4b2c51)=>{const _0x317f41=_0x3723ef['_allocUnif'+'orm']('cubeMapPro'+'jectionBox',()=>[{'name':'envBoxMin','value':new Float32Array(0x6*-0x532+0x5*0x1af+0x16c4)},{'name':'envBoxMax','value':new Float32Array(0x8b2+0x1*-0x152b+0x4*0x31f)}]),_0x5e21a1=_0x3723ef['cubeMapPro'+'jectionBox']['getMin'](),_0x4bfdce=_0x317f41[0x859*-0x1+-0x1*0x1c69+0x24c2]['value'];_0x4bfdce[0x12f8*-0x1+-0x1818+-0x2*-0x1588]=_0x5e21a1['x'],_0x4bfdce[0x234+-0x99f*0x2+0x110b]=_0x5e21a1['y'],_0x4bfdce[-0x171e+0x14*0x1f4+-0x30*0x55]=_0x5e21a1['z'];const _0x75aa17=_0x3723ef['cubeMapPro'+'jectionBox']['getMax'](),_0x44b056=_0x317f41[-0x3ee*0x2+-0xa*-0x191+-0x7cd]['value'];return _0x44b056[0xc0f+0x2245+-0x251*0x14]=_0x75aa17['x'],_0x44b056[-0x2f*-0xc1+0x138f+-0x36fd*0x1]=_0x75aa17['y'],_0x44b056[0x1bfe*0x1+0x239f+-0x3f9b]=_0x75aa17['z'],_0x317f41;}),ke('specularTi'+'nt',!(0x58a+0xfd3*-0x2+0x1a1d)),ke('specularit'+'yFactorTin'+'t',!(-0x2*0x10b2+-0x1*0xf62+0x30c7*0x1)),ke('useMetalne'+'ss',!(0x1321+0x461*0x8+-0x4*0xd8a)),ke('useMetalne'+'ssSpecular'+'Color',!(0x1b99+0x1c78+-0x3810)),ke('useSheen',!(0x368+-0x12f4+0xf8d)),ke('enableGGXS'+'pecular',!(-0x1395+0x1e4d*-0x1+0x31e3)),ke('occludeDir'+'ect',!(-0x196*-0xe+-0xf1*-0x1f+-0x3362)),ke('opacityFad'+'esSpecular',!(0x55f+-0x278+0x1*-0x2e7)),ke('occludeSpe'+'cular',bd),ke('fresnelMod'+'el',Yp),ke('useDynamic'+'Refraction',!(0x910+-0x504+-0x2d*0x17)),ke('cubeMapPro'+'jection',tm),ke('useFog',!(0x1*0x7a7+-0x235*-0x1+-0x9dc)),ke('useLightin'+'g',!(-0x270+-0x4*-0x4ea+0x1d*-0x98)),ke('useTonemap',!(0x5ba+0x4*0x938+0x11f*-0x26)),ke('useSkybox',!(-0xb3c+0xd6*-0x11+0x1972*0x1)),ke('forceUv1',!(-0xe46+0xcaa+0x19d)),ke('pixelSnap',!(0x15e4+0x1374+-0x22d*0x13)),ke('twoSidedLi'+'ghting',!(-0x51d*-0x7+0xfb7+-0x3381)),ke('nineSliced'+'Mode',void(-0x11fe+-0x1c99+0x2e97)),ke('msdfTextAt'+'tribute',!(-0x1f17+0x28f*-0xf+0x4579*0x1)),ke('useIridesc'+'ence',!(0x3*-0xbc4+-0x7bc+0x2b09)),ke('glossInver'+'t',!(0xc33+0x12ed+-0x1f1f)),ke('sheenGloss'+'Invert',!(0x1946+0x23e4+-0x1463*0x3)),ke('clearCoatG'+'lossInvert',!(-0x53f*0x5+-0x4f8+-0x4*-0x7cd)),ke('opacityDit'+'her',Sa),ke('opacitySha'+'dowDither',Sa),ke('shadowCatc'+'her',!(-0x65*-0x3e+-0x76d*-0x1+-0x1fe2)),et('diffuse'),et('specular'),et('emissive'),et('thickness','g'),et('specularit'+'yFactor','g'),et('normal',''),et('metalness','g'),et('gloss','g'),et('opacity','a'),et('refraction','g'),et('height','g',!(-0xa*0xf2+-0x1547+-0x7af*-0x4)),et('ao','g'),et('light','rgb',!(-0x1581+0x61f*0x5+-0x91a),-0x2*0x6b+-0x1f39+0x26*0xd8),et('msdf',''),et('diffuseDet'+'ail','rgb',!(-0x5*-0x68b+-0x5*-0x41+-0x1*0x21fb)),et('normalDeta'+'il',''),et('aoDetail','g',!(-0x212d+-0x2202*0x1+0x4330)),et('clearCoat','g'),et('clearCoatG'+'loss','g'),et('clearCoatN'+'ormal',''),et('sheen','rgb'),et('sheenGloss','g'),et('iridescenc'+'e','g'),et('iridescenc'+'eThickness','g'),et('anisotropy',''),ke('diffuseDet'+'ailMode',p_),ke('aoDetailMo'+'de',p_),oo('cubeMap'),oo('sphereMap'),oo('envAtlas');const _0xc59fe0=function(){return this['_prefilter'+'edCubemaps'];},_0x3da92f=function(_0x5a371b){const _0x3c7864=this['_prefilter'+'edCubemaps'];_0x5a371b=_0x5a371b||[];let _0x596fe4=!(-0xf8+-0xa5*-0x13+-0x1*0xb46),_0xddbeee=!(0x1*0x6e9+-0x1230+0xb47);for(let _0x7f8020=-0x1*0x1ba9+0x1*0x18b+0xd0f*0x2;_0x7f8020<-0xff2+0x159+0xe9f*0x1;++_0x7f8020){const _0x52399f=_0x5a371b[_0x7f8020]||null;_0x3c7864[_0x7f8020]!==_0x52399f&&(_0x3c7864[_0x7f8020]=_0x52399f,_0x596fe4=!(0x22fc+-0x12ce+-0x26*0x6d)),_0xddbeee=_0xddbeee&&!!_0x3c7864[_0x7f8020];}_0x596fe4&&(_0xddbeee?this['envAtlas']=Tv['generatePr'+'efilteredA'+'tlas'](_0x3c7864,{'target':this['envAtlas']}):this['envAtlas']&&(this['envAtlas']['destroy'](),this['envAtlas']=null),this['_dirtyShad'+'er']=!(0x2288+0x566+-0x27ee));},_0x1d94f5=[null,null,null,null,null,null];um('prefiltere'+'dCubemaps',()=>_0x1d94f5['slice'](),_0x3da92f,_0xc59fe0);}vb();const Rt=class Rt{static['render'](_0x57423a,_0x9be151){const _0x46aa7b=_0x9be151['device'],_0x22a0a4=_0x57423a['cells'],_0x42fedc=_0x57423a['lightsBuff'+'er'],_0x344bb7=_0x42fedc['boundsMin'],_0xfa600=_0x42fedc['boundsDelt'+'a'],_0x3ae13b=_0x344bb7['clone']()['add'](_0xfa600),_0x3e121a=_0x42fedc['boundsDelt'+'a']['clone']()['div'](_0x22a0a4),_0xe9db6=Rt['gridPositi'+'ons'],_0x43b9c5=Rt['gridColors'],_0x11364a=new ie(-0x16*0x79+-0x5ec*0x1+0x1052+0.3,-0x3e1+0x24*-0x60+0x1161+0.3,0xd3b+-0x1*0x318+-0xa23+0.3),_0x306425=(_0x24a97e,_0x59fbd2,_0x364fed,_0x3ac8b5,_0x2d9399,_0x1abecd,_0x5e565c,_0x398733,_0x39e32d)=>{for(let _0x549dda=0x614+-0x1*-0x70+0x1a1*-0x4;_0x549dda<=_0x24a97e;_0x549dda++)for(let _0x572cfc=-0x679*0x3+0x24d2+0x195*-0xb;_0x572cfc<=_0x59fbd2;_0x572cfc++){const _0x37bdda=_0x364fed+_0x549dda*_0x3ac8b5,_0x3ac16d=_0x2d9399+_0x572cfc*_0x1abecd;_0x39e32d===-0x1*-0x24ca+-0x32f*0x1+-0x219b?_0xe9db6['push'](_0x37bdda,_0x5e565c,_0x3ac16d,_0x37bdda,_0x398733,_0x3ac16d):_0x39e32d===0x2d2*-0xa+-0x987+0x25bc?_0xe9db6['push'](_0x37bdda,_0x3ac16d,_0x5e565c,_0x37bdda,_0x3ac16d,_0x398733):_0x39e32d===-0x1eb3+0x12*-0x1d2+0x3f79&&_0xe9db6['push'](_0x5e565c,_0x37bdda,_0x3ac16d,_0x398733,_0x37bdda,_0x3ac16d);}};if(_0x306425(_0x22a0a4['x'],_0x22a0a4['z'],_0x344bb7['x'],_0x3e121a['x'],_0x344bb7['z'],_0x3e121a['z'],_0x344bb7['y'],_0x3ae13b['y'],0x1994+-0x213b*0x1+0x7a7),_0x306425(_0x22a0a4['x'],_0x22a0a4['y'],_0x344bb7['x'],_0x3e121a['x'],_0x344bb7['y'],_0x3e121a['y'],_0x344bb7['z'],_0x3ae13b['z'],0x21a6+-0x355+-0x1e50),_0x306425(_0x22a0a4['y'],_0x22a0a4['z'],_0x344bb7['y'],_0x3e121a['y'],_0x344bb7['z'],_0x3e121a['z'],_0x344bb7['x'],_0x3ae13b['x'],0x2*-0x8c8+-0x1137+-0x22c9*-0x1),_0xe9db6['length']){const _0x25e3bb=_0xe9db6['length']/(-0x1*-0x4d3+0x24f1+0x15*-0x1fd);if(_0x25e3bb!==_0x43b9c5['length']/(-0x1047+-0x1f55*0x1+0x1*0x2fa0)){_0x43b9c5['length']=-0x1763*0x1+-0x14d0+0x2c33;for(let _0xc71f92=0x17*-0x61+0x1ee3*0x1+0x16*-0x102;_0xc71f92<_0x25e3bb;_0xc71f92++)_0x43b9c5['push'](_0x11364a['r'],_0x11364a['g'],_0x11364a['b'],_0x11364a['a']);}_0x9be151['drawLineAr'+'rays'](_0xe9db6,_0x43b9c5),_0xe9db6['length']=-0x1eae+-0xe7a+-0xaa*-0x44;}let _0x1d9775=Rt['mesh'];_0x1d9775||(_0x1d9775=new Ge(_0x46aa7b),_0x1d9775['clear'](!(0x67f*-0x2+0x4*-0x463+-0xa2e*-0x3),!(-0x20a9*0x1+0x8b7+0x2*0xbf9)),Rt['mesh']=_0x1d9775);const _0x1cc562=[],_0x3025a0=[],_0x38c422=[],_0x3d1046=_0x57423a['_cells']['x'],_0x3eb158=_0x57423a['_cells']['z'],_0x123b06=_0x57423a['counts'],_0x588aea=_0x57423a['_maxCellLi'+'ghtCount'],_0x57e5c4=new D(),_0x4a2f16=new D(),_0xa9819e=new D(),_0x3e7b75=_0xfa600['clone']()['div'](_0x22a0a4);let _0x53d338=-0x1833+0x2071*0x1+-0x83e;for(let _0x71906e=-0xe4*0xf+-0x8e7+0x29*0x8b;_0x71906e<_0x22a0a4['x'];_0x71906e++)for(let _0x4ff4a0=-0x1480+0x11*0x159+-0x269;_0x4ff4a0<_0x22a0a4['z'];_0x4ff4a0++)for(let _0x4ca1c6=0x3*0xb0d+0xb3*0x7+-0x260c;_0x4ca1c6<_0x22a0a4['y'];_0x4ca1c6++){const _0x1ed4b0=_0x71906e+_0x3d1046*(_0x4ff4a0+_0x4ca1c6*_0x3eb158),_0x3a1a5d=_0x123b06[_0x1ed4b0];if(_0x3a1a5d>-0xaa7+-0x1055+0x4*0x6bf){_0x57e5c4['x']=_0x344bb7['x']+_0x3e7b75['x']*_0x71906e,_0x57e5c4['y']=_0x344bb7['y']+_0x3e7b75['y']*_0x4ca1c6,_0x57e5c4['z']=_0x344bb7['z']+_0x3e7b75['z']*_0x4ff4a0,_0x4a2f16['add2'](_0x57e5c4,_0x3e7b75),_0x1cc562['push'](_0x57e5c4['x'],_0x57e5c4['y'],_0x4a2f16['z']),_0x1cc562['push'](_0x4a2f16['x'],_0x57e5c4['y'],_0x4a2f16['z']),_0x1cc562['push'](_0x4a2f16['x'],_0x4a2f16['y'],_0x4a2f16['z']),_0x1cc562['push'](_0x57e5c4['x'],_0x4a2f16['y'],_0x4a2f16['z']),_0x1cc562['push'](_0x4a2f16['x'],_0x57e5c4['y'],_0x57e5c4['z']),_0x1cc562['push'](_0x57e5c4['x'],_0x57e5c4['y'],_0x57e5c4['z']),_0x1cc562['push'](_0x57e5c4['x'],_0x4a2f16['y'],_0x57e5c4['z']),_0x1cc562['push'](_0x4a2f16['x'],_0x4a2f16['y'],_0x57e5c4['z']),_0xa9819e['lerp'](Rt['colorLow'],Rt['colorHigh'],_0x3a1a5d/_0x588aea)['round']();for(let _0x16d1e1=0x8d1*-0x1+-0x126a*0x2+0x2da5;_0x16d1e1<0x337+0x2d8*0x1+-0x1*0x607;_0x16d1e1++)_0x3025a0['push'](_0xa9819e['x'],_0xa9819e['y'],_0xa9819e['z'],-0x1bba+-0x1de2+0x7*0x83b);_0x38c422['push'](_0x53d338*(-0x135+0x2387+0xe7*-0x26)+(-0x1df*-0x1+-0x11*-0x223+-0x2632),_0x53d338*(-0x1*-0x346+0x1ae1+-0x1e1f)+(0xc0a*0x1+0x65b+-0x1264),_0x53d338*(-0x115b+0x926*-0x4+-0xd*-0x427)+(0x8*0x173+-0x76e*-0x5+-0x30bb)),_0x38c422['push'](_0x53d338*(-0x59*-0x5+-0xca0+0xaeb)+(0xf0b*0x2+0x2*0x118d+0x163*-0x2f),_0x53d338*(0xf9*0x1f+-0x167*-0xe+0x10f*-0x2f)+(-0x5*0x4b+0x1*-0x107f+0x11f7),_0x53d338*(-0x1a3*-0x10+0x1537*0x1+-0xb5*0x43)+(-0x272+-0x20db+0x234f*0x1)),_0x38c422['push'](_0x53d338*(-0x1cb6+-0xfd6*0x2+0x3c6a*0x1)+(0xd9+0x15c6+-0x1*0x169b),_0x53d338*(0x3a9+0x115*0xd+-0x2f3*0x6)+(-0x5b*-0x7+0x2210+-0x2488),_0x53d338*(0x1f29+-0x1bf1+0x198*-0x2)+(0x1c4f+0x2ce*-0x1+-0x43f*0x6)),_0x38c422['push'](_0x53d338*(-0x26aa+-0x1*0x254a+0x4bfc)+(-0x1f3c+0x1e47*0x1+0xfc),_0x53d338*(-0x1*-0x2669+0x1*-0xd83+0x1*-0x18de)+(0x818+0x1*-0x2609+-0x76*-0x41),_0x53d338*(0x1eaf*-0x1+-0xa7a+0x5*0x83d)+(0x315*-0x7+-0x2*-0x1181+-0xd69*0x1)),_0x38c422['push'](_0x53d338*(-0x11fe+0x1582*-0x1+-0x5c*-0x6e)+(-0x1f1*-0x5+-0x6c6+-0x16*0x22),_0x53d338*(-0x202d+-0x30e+-0xbc1*-0x3)+(-0xab*-0x5+-0x1*-0x49d+-0x71*0x12),_0x53d338*(0x125a+0x1*0x1e11+-0x3063)+(0x79*0x5+-0x89b+-0x322*-0x2)),_0x38c422['push'](_0x53d338*(0x5fd+0x4a*0x29+-0x11cf)+(0x7*-0x496+-0x88d*0x1+0x28a9),_0x53d338*(-0xa16+0x17*-0xa7+-0x191f*-0x1)+(-0x1c07+0x1776+0x188*0x3),_0x53d338*(-0xfe*-0xf+0x264f+-0x3529)+(0x1f34*-0x1+-0xd72+0x2cac)),_0x38c422['push'](_0x53d338*(0x1c67+-0x179*-0x9+0x48*-0x94)+(-0x1*-0x1f31+-0x1e2d+0x1*-0x103),_0x53d338*(0x2*-0xb99+0x11bd+0x119*0x5)+(-0x2*-0x869+-0x17*-0x17e+-0x1*0x3324),_0x53d338*(-0x12a7+-0x2430+-0x1*-0x36df)+(0xf3f+0x22f4+-0x322f)),_0x38c422['push'](_0x53d338*(-0x1c52+0x1b13+0x6d*0x3)+(0x1a30+-0x49*-0x49+0x3f*-0xbf),_0x53d338*(0x5*0x60a+0x1617+-0x3441)+(-0x1868+0x59*0xd+0x13e8),_0x53d338*(-0x3*-0xcd4+-0x165*-0x7+0x3037*-0x1)+(-0x73c+0x975*-0x3+0x239f)),_0x38c422['push'](_0x53d338*(-0xf6*0x11+0x1*0x14df+-0x481*0x1)+(0x10*-0x46+-0x4d5*-0x7+0x2*-0xeb9),_0x53d338*(-0x20d+-0x1800+-0xb*-0x25f)+(0x959*0x1+0x2*-0x11fb+0x1*0x1aa1),_0x53d338*(-0xc3f+0x2*-0xe4e+-0x48b*-0x9)+(-0x479*-0x1+-0x596+0x11f)),_0x38c422['push'](_0x53d338*(0x12c*0x17+0x1*-0x1f17+0x1*0x42b)+(0x5*-0x1f9+-0x2*0xb9+-0xb53*-0x1),_0x53d338*(0xb8*-0x19+0x6f6*0x1+0xb0a)+(-0x95f*-0x2+0xead+0x2164*-0x1),_0x53d338*(-0x355*0xa+0x16f3+-0xa67*-0x1)+(-0x1984+0x1e6d*0x1+-0x4e7)),_0x38c422['push'](_0x53d338*(-0x1ae6+0x24f1+-0xe9*0xb)+(0xa*-0x212+-0x1588+-0x1d*-0x175),_0x53d338*(-0x26c2+0x84b+0x1e7f)+(-0x31c+-0x1a1c+-0x37*-0x88),_0x53d338*(0x20e9+0x18cc+-0x39ad)+(-0x1328+0x13bd+-0x8f)),_0x38c422['push'](_0x53d338*(-0x1268+0x526+0x9*0x17a)+(-0xf60+0xa2b*0x2+-0x4f6),_0x53d338*(-0x13*0xc2+0x28*-0x71+-0xde*-0x25)+(-0xead+0x1b*0x167+-0x1*0x172d),_0x53d338*(0xe3c+0x1071+-0x1ea5)+(-0x1313+-0x1b6*-0x12+-0xbb3)),_0x53d338++;}}if(_0x53d338){if(_0x1d9775['setPositio'+'ns'](_0x1cc562),_0x1d9775['setNormals'](new Float32Array(_0x1cc562['length'])),_0x1d9775['setColors3'+'2'](_0x3025a0),_0x1d9775['setIndices'](_0x38c422),_0x1d9775['update'](js,!(0x45*0x4b+0x1f3*-0x1+-0x1243)),!Rt['meshInstan'+'ce']){const _0x2db2f9=new Ut();_0x2db2f9['useLightin'+'g']=!(0x5e*0x2+-0x333+0x278),_0x2db2f9['emissive']=new ie(-0x5f3*0x5+-0x1a58+-0x2ce*-0x14,-0x1*0x1c66+-0x178+0x3*0x9f5,0x3*-0x57d+0x4*0x388+0x258),_0x2db2f9['emissiveVe'+'rtexColor']=!(0x9*0x450+-0x1*0x1471+0x125f*-0x1),_0x2db2f9['blendType']=Ed,_0x2db2f9['depthWrite']=!(-0x837*-0x1+-0xb8*0x2b+0x16b2),_0x2db2f9['update']();const _0x1d1de8=new Ie('WorldClust'+'ersDebug');_0x1d1de8['worldTrans'+'form']=te['IDENTITY'],_0x1d1de8['_dirtyWorl'+'d']=_0x1d1de8['_dirtyNorm'+'al']=!(-0x12*0x1c4+0xa*0x26b+0x79b),Rt['meshInstan'+'ce']=new He(_0x1d9775,_0x2db2f9,_0x1d1de8),Rt['meshInstan'+'ce']['cull']=!(-0xf5d*0x2+0x63*-0x3+-0x2*-0xff2);}const _0x626c67=Rt['meshInstan'+'ce'];_0x9be151['immediate']['drawMesh'](_0x626c67['material'],_0x626c67['node']['worldTrans'+'form'],null,_0x626c67,_0x9be151['defaultDra'+'wLayer']);}}};h(Rt,'gridPositi'+'ons',[]),h(Rt,'gridColors',[]),h(Rt,'mesh',null),h(Rt,'meshInstan'+'ce',null),h(Rt,'colorLow',new D(-0x1e9c+0x268b+-0x7ee,0x1a36+-0x19f9+0x1e*-0x2,0x2358+-0xbbe+0x1*-0x1799)),h(Rt,'colorHigh',new D(-0x1f6f+0x1935+-0x662*-0x1,-0x19df+0x371*-0x7+-0x4ff*-0xa,0x1dbb+-0x102e+-0xd8d*0x1));let hu=Rt;const xb='muPIHORMLN'+'DCz4DxVR/Z'+'vYfAUVEFR4'+'7KRIC4nwAA'+'AAAP7WxlhD'+'6Ci+2HCe7B'+'F8jRAPZwdH'+'2UPpI5PdLC'+'JdkvG4UTaN'+'DJ/0crAzne'+'71GCrb4kbd'+'MjjCEGzdX6'+'fNxDMLJq5x'+'keoIVTdfiZ'+'kodEeArmZm'+'p/FQzFjD4x'+'8iOW7Dg64n'+'+3mWqyEwLx'+'XT8zoJXfbw'+'8QJKDCaarU'+'YyTlMzNFHb'+'gUe9IQV7g4'+'YOgtSKpIFZ'+'J0qERm7u4P'+'pmiF89ktHW'+'CywaGmD6h+'+'hfh2/Zd8KY'+'lKqqo4Cem4'+'T42bT/Z9Fp'+'CQF1hhSjfB'+'zZ5XFn/y3j'+'egWC6u86Ku'+'ELRundQS/1'+'Rp+XuKKGIg'+'Rv3CvP5y74'+'9yqLlFO495'+'JOT3+f2CXg'+'d71npU0/Kj'+'jpkZucbJ5m'+'78IVyuSrSo'+'zc9jgBUhDr'+'z0hFsyb7LF'+'UH9//wJbBg'+'LdNWJZObfK'+'xrNt8TliLA'+'9w9sXFv6g2'+'6iXpf6r/Bq'+'cAusj/QzGB'+'ZuoUGeEtw8'+'BCXCZ3jUiw'+'4hvM18ZVql'+'UD3C40LAFX'+'W6FRjuAZGR'+'Nstb0/qVk4'+'skwyT+MHrv'+'RorI4rKHVM'+'WZmKyAkzL/'+'78u/9pMQuX'+'14pZN50b2P'+'Hn6fRxeaCQ'+'LsfT4dpvIk'+'WWFuFVENZI'+'h+8xgR6lU+'+'85W0PPdAu1'+'j99kcCG40J'+'BQa4JMyRzq'+'6qriOBLtqF'+'87vpCJan0W'+'EduVr/mOYk'+'S00urVA0mA'+'6M3031+GmG'+'mW48PaJDYO'+'EIb3bIXWPa'+'LoAOEinX1T'+'N3+/vwhG6n'+'qJu0TdHped'+'S7QsGZIoxH'+'3nQYYjQP1j'+'mbahlbNngw'+'5ogsGk1y50'+'XZyUmQBY+/'+'JBJ3Unu4dA'+'pm+WmPwHPU'+'9gLb+4mHh4'+'BiY6M86pq+'+'WeTyWdI3s0'+'CXPEtHGXZ8'+'zMZgUoyRom'+'Bi1VdazzuN'+'+WOmQ9Pa0Z'+'0tlNopUi8A'+'J4x2Xn4mmO'+'KEbXLxlbVs'+'Wu8XhuDGYF'+'OGCRVdSqDP'+'XrHU5SDdUl'+'ti3k5///SB'+'wzTMwK3L4a'+'1H7w4lnpEa'+'s6////AfX8'+('asyIBfeFXV'+'J3tgvxQ/bl'+'ZuUKyIODIf'+'r/UzdWNu7p'+'ciLBpdZRZ4'+'pIfZ1R6szq'+'+XNxkGG///'+'8EZFpu7VHA'+'hFWqHEOrB9'+'unw+YQa5o8'+'/9IR/V5/zq'+'+986rJSyfg'+'JKt2u9hxU1'+'wzyQWPjJGv'+'zG9+eWWxGF'+'OHVKqI4jBQ'+'ALwZZswesn'+'vZ2UmmkEXd'+'iRpz8B+oWE'+'7PY70ZTMnd'+'isYSXg2Tqo'+'I+3y9BxbnY'+'2Y4EfbdcRh'+'AvG59NqDEN'+'NYbxKvK5HJ'+'fPG5M+Wi2A'+'cpLVJrD6ca'+'iEOzgSoVNS'+'gQK8fm2M3z'+'GcF4xtClv/'+'8Hs9oD7C3j'+'itTATYNQxm'+'KqKf1LhIxz'+'f1bmfiNn7U'+'KFmcJu4sLq'+'VLwxGSue3t'+'aBEyknkw5h'+'XTsUCvqmmL'+'/f8n/w0giR'+'7Hu/9EHvpk'+'z3yuu64Tio'+'MkzdTJ30i0'+'+hFnQqW1+v'+'9mMwq+z9qG'+'X0UFu9Momv'+'VG2xod6vc1'+'2AAAAACq7s'+'Ga5qptFR0j'+'F3nQt/D+7P'+'ibKYahaxP3'+'hEixPbGi9n'+'wNf2LAa7Lk'+'EZRKxzXeCD'+'64Xpii5n+8'+'Kpg8eHIv7A'+'WXZltgMoGl'+'tmoJ0XGdOC'+'L8WkzphvR9'+'N2o3ARSZ42'+'l5e5Pe4B58'+'MCRlP3EKv+'+'mcloknH+ft'+'o5BWsmEutW'+'6KvjOVsznF'+'CktkSczVk4'+'aGvj9VXlRc'+'LeDoKG8RkB'+'gdcNG2bf8H'+'UL4MT2DM+a'+'r7NImJhKpx'+'akX4Vk0CnP'+'+/XNhl5UsP'+'0lXgeZXPoD'+'BMSW5An+DX'+'lTCO5FQGwS'+'PYwHLKYVIi'+'mEdAoVe49r'+'QLaaNcye5L'+'xU2/c5TijT'+'gJtD5eQQIe'+'1snxauj5jZ'+'sxJBUJdoP/'+'zqpjqv8qBr'+'uoPsVsP8N4'+'4PCUW5Dd0D'+'zqjSS/Dl5m'+'I9cn1w2ndN'+'/0KAEm1QAA'+'AACwu6KM/0'+'83IBbH5bPa'+'/9oHUwcU8I'+'9v3j6/v18Q'+'Yammrf+P6V'+'L///8BrpuM'+'3fOLCxaLNO'+'FNF1zPbPYT'+'P65ni6njft'+'4eVcyrVXRQ'+'Frs52tr35S'+'tiSp55edVD')+('CBC0H5rIfa'+'c6nzUwxQSt'+'7y15QoKb+5'+'zebEQUmVbr'+'PjXuUa19Ey'+'7sqXMiSUKH'+'aw72PJKDdr'+'utJoQr3u6l'+'EYJ8K0MakW'+'Kj9zjTFi4X'+'94TsKYco0G'+'rLeB60M6D8'+'M/80rhXUW8'+'iMequg8y5F'+'838WI0+gp3'+'GBN5Kj/xIO'+'xTWQuUaPV/'+'LwvARr1VH9'+'3BFgGZR1MF'+'W0Ua30GbYm'+'dnAgo9VWy8'+'SQtpDUgGE2'+'r2zq2eTEMC'+'L7sMKmE1hc'+'hVhuF/TCq9'+'iXKEm86kzO'+'f3Rp9ZnCxb'+'pDUj+FKNxV'+'yXe6pVZkRX'+'v/m95SnB/E'+'B8aME29N85'+'MtAcDoXWlo'+'r8De2Q5Dg1'+'tar+8wgiZu'+'fbMam81j//'+'ASUohoR/zS'+'h2KG4bvT6m'+'kIPz6C5/98'+'DC3LaWlaEZ'+'1zA5JORZRu'+'6J/a0GY285'+'sEYzw71YqO'+'T1ihAG0z5S'+'Dt1xNiDQWZ'+'dFpndArp6x'+'WhqSDkRb4k'+'SJEHb9liPv'+'w7uLV/6i5M'+'Vf//A9Qjr8'+'xkAEUh+KDI'+'+zdtJ68d6M'+'BOktg1iyp/'+'SCq8O9f5pb'+'amn1VVVQPR'+'TWqNBvhQKa'+'07s6P0lc9L'+'uu/3gw4Hey'+'OUfz8MxMwV'+'4UQhua+t9c'+'r4bz/nIB2w'+'nDSK1K7I94'+'M+s6C84hta'+'X/CNlMQUSs'+'2KJO+yaebf'+'TbkNX5yWcq'+'EJevo0vbKU'+'iETuFXiL01'+'9A3E+lmsyZ'+'MwXrXLLiQA'+'Z5t9+jI3Jo'+'bhJTMiDH5Z'+'OQ+8Jau555'+'5NMjHSscP9'+'qCVaa40doh'+'+1a3Ukf6jq'+'BmLddgh79/'+'fwTfCyqiul'+'dNkUoy+nUp'+'+4nerwg0Oj'+'tGv2x485PJ'+'OJvUEokNhY'+'IdWjpx7BWk'+'0VZGWOp3jS'+'FTJ2bnu6KC'+'duZtG/UcBC'+'9RZ3W/jMSf'+'SMw4Etr/Do'+'D/XYP2V5Ov'+'w+YoM3F5g2'+'dGLdvuG6Zk'+'VGLE6Dk5Zr'+'+sdSyGliJP'+'1y2OFf/KFO'+'0RWO+3gsGh'+'esTnfZVpTd'+'8/HwgO216g'+'waqo+vY3Tl'+'jfJWowY+i0'+'p0Os4SLn/1'+'wLqDHMlszg')+('gmT/D8MRFz'+'s+pLv6LNJS'+'sNZ/r41mWi'+'/rF6ZcKp/y'+'zJdK0VU44h'+'skq3RGpgO6'+'mIpJDsf/mZ'+'kFrz0yYOML'+'buaj/wp1v7'+'JMFM5eqvBh'+'mTd7U8frQA'+'tHtys4zgpj'+'ZmzUhOVTfN'+'NLifElGXAD'+'lqHGKrkBT/'+'nYwX8ZRm3R'+'jvyPvjKyEq'+'EGKUpVnvOG'+'x+NKPHiWM/'+'/ZDpDVGvvr'+'jmk8RPF/wi'+'YZD3+Us8YC'+'XjrVOfjdd1'+'UPAfjLp8jg'+'Sn4me7DPTp'+'z1Ggy9XL80'+'guFO7ECT10'+'AvILKfD18Q'+'x+KY/f8aRq'+'u0oOO8hfKR'+'FZa9PUJwCs'+'p6VdZz6LFk'+'m2b9Pl2LIi'+'fCwzRy7Tpd'+'G2uAtOxP2O'+'emY26bJMa9'+'ZGSLIRlMsg'+'pDpnDJwd0o'+'a5pQ13x1hr'+'Hf52HpulUW'+'onGWsfXZbS'+'QYKu9bnEN7'+'6ciQih0opN'+'3deDVrbrxo'+'rfVlnCmL1R'+'9zq3ePGWIv'+'21c7pW8kEi'+'FTM5JX8dAw'+'867s/60cf7'+'9/BH+MDFCZ'+'BHlz1L+qGO'+'Jf/1txhhmr'+'f3//As+RIJ'+'wevDb+fgNX'+'VeHw67QptZ'+'egayhrEwr5'+'Gy+EPo1RLa'+'MtPbqOZYoV'+'zXzwzjMFWZ'+'xyUG9YUIf6'+'////AQWy84'+'iAygLk9COt'+'Xt92+0mT/x'+'g0zMzMBeLk'+'b8y9SL2TDX'+'gSX422hDgp'+'GNLJyuPioA'+'+YJ91G8znr'+'pNqHkwYysc'+'aJDEc9Vc+j'+'4cXle3hvcd'+'2JqDQH2lBZ'+'xDn6mUTs0b'+'75raMvbs72'+'7codX01Anj'+'8f3wir9P2x'+'QaQ22v/TxC'+'MglKDFoTja'+'P01XTLgxnT'+'vPv02JgEUr'+'W6UDgOnobF'+'pLdvKdlypg'+'IzPcq14fgX'+'U5tvVW0FEs'+'7VRlsG1IyA'+'69fN4n+awH'+'hT34cE+xUv'+'dj86C8LgAs'+'FheTjI9Ht9'+'EyYAAAAAAV'+'BVKRx2wLgU'+'TI0/2QfyJo'+'2riRw3JDqz'+'EShmx/Lifo'+'6mRkQVbS7X'+'53t+EvKxcX'+'ogtdts31e9'+'MRHdcHgsA8'+'rt4/mt2unl'+'zQ/wsU8Gu7')+('+W6Oj7eD8E'+'QdDp5XlCsV'+'aS/AV/t5Zp'+'POHR3rGpyA'+'Je9IPV+xMr'+'BL1Oz/8MQh'+'Fs31h0N1cV'+'nq371uqIJY'+'HyafKH1jte'+'AK3VpMXBcu'+'C+yt0ZeKyR'+'UY4QhdrJJ4'+'tJ1wg3Hu6k'+'DsbovxupTM'+'kGdRrm8oZS'+'oYPbJ+PwH/'+'xotgTdkA12'+'05vUEfnqkI'+'04T/fnnd1f'+'iZW5AwNcgg'+'d7fi4j5zas'+'mcntZexIxq'+'FZQMzMJpfn'+'dmI5jn17cg'+'n5EV5t9XN0'+'C///8Q9wlJ'+'pMGXdoiaMT'+'G2sVyHQsn8'+'mWRISCLNG7'+'77S0OuDRP2'+'GlLcJ2UeOg'+'7Fo8hTNPeJ'+'//iTJhyqxh'+'KRUntdXOih'+'q2wfKfH///'+'8B0GGrwT+f'+'SOQRdctKxj'+'jGCSS11d6B'+'lQ9BDfE0J6'+'Z25FaNTKGp'+'FKNCMr2G/0'+'41KpWwBLVe'+'1k08vncseQ'+'bKZdXi8x1t'+'9XA45U/Wd4'+'3D9wAh3Tal'+'0aiLVzGPus'+'OZ1F+W3TWo'+'qlX/A95+dN'+'ef11TsuGfu'+'l+ctGssldk'+'3fqpfqh+43'+'XTxL42+leS'+'HoF/dWHYGX'+'6maqUEuLX7'+'UB+r/6Llr4'+'LKocbVIeu+'+'hB9QTPfz9f'+'CP8RyWmX4S'+'mbhMFsNtCi'+'jV7lVcwejL'+'Klvl0GfCnd'+'nWV7/39VBr'+'tTRuUx92ok'+'e3GBgKkC5f'+'dGK0YvNK+x'+'enKaDmsHDj'+'NFUM3NMz3Z'+'iXXFuLgojo'+'sPVCDEl2W5'+'BjX3Ms+j0G'+'SqACHmh0+R'+'PWyuNm/Qe8'+'vFf9AW7N1u'+'RaxWirrUyt'+'qEJnJ4/Flm'+'8hSoiZ2NQB'+'sS6w/yQlC4'+'gCaFo8q4ny'+'Y6AFdo4hiw'+'hBXzbNKKvZ'+'vktCjSCukR'+'R/BbYVbNwZ'+'i2Yh3hGodE'+'acLW8qijiW'+'JODf0P2bhf'+'aiPspPT4lY'+'JBgi/KfcFw'+'CfvyUIgkJO'+'v///8CG/JE'+'epRBLaMFE+'+'2TgrqsJXOV'+'OWHt6g/bFw'+'VLLMVBsMR5'+'0dis/39/Al'+'BX+/rMTJkU'+'QrnlxpR2iu'+'0Tp8tATkRY'+'GmDIrcAiRP'+'8PjoWIlb7/')+('0ecTdSCE9Y'+'58+a+n/Fov'+'JQTVF4F2jA'+'xMZhTgrM/K'+'VS5BQu6bVb'+'kWY5HXnxRs'+'hks3urDdW4'+'RkWp4M4TeL'+'mFK5KF/uHk'+'kiO5Kv96Ri'+'oH984v/CSD'+'BnG+BwlnU9'+'B+o7Y+0X0N'+'ob+0pLsStx'+'jvPXMy2eCp'+'zhOWV4XbOb'+'BHN4UE2sLQ'+'/DIqXhOzxV'+'f38GlTi6aG'+'7EnePO7TRJ'+'m9yOfUUcqq'+'1I2iQHrVDq'+'n3TUNRi/lM'+'w8KbMW/3/n'+'qCz/Ef8PoW'+'5Qxcz2yHR/'+'f78EPB2Stb'+'d+ZFmfNTUY'+'ILzsb9YNhp'+'aHcaymYrBi'+'NHmFE3Y4cc'+'YJ25Prqm7z'+'HobGHED8/9'+'3ZNlWro9vc'+'KivGZs31Ui'+'K1k5zjUhex'+'UgbqJb+fUT'+'jxce/7Zly8'+'a5KMC1fX5n'+'fjPgibdvzb'+'XV1jRT2asX'+'vmSAusaLdq'+'1TSIJ8fXIN'+'k5AtT34EWP'+'AsfP9IFQqM'+'5K11O6saoH'+'JA==');let Vi=null;const Av=()=>{if(!Vi){const _0x17dde4=atob(xb);Vi=Uint8Array['from'](_0x17dde4,_0x56cda2=>_0x56cda2['charCodeAt'](0xb11+0x1891+-0x11d1*0x2));}},Tb=()=>(Av(),Vi);class wb{constructor(_0x2a50c2=0xcc4+0x18a*-0x1+-0x3*0x3be){h(this,'seed',-0x2686*0x1+0x1*-0x11ea+0x3870),(this['seed']=_0x2a50c2*(-0x2453+0x14b8+0xf9f),Av());}['_next'](){this['seed']=(this['seed']+(0x19f4+0xbbd+-0x25ad))%Vi['length'];}['value'](){return this['_next'](),Vi[this['seed']]/(-0x1c33*0x1+-0x215d+0x3e8f);}['vec4'](_0x59399e=new re()){return this['_next'](),_0x59399e['set'](Vi[this['seed']],Vi[this['seed']+(-0x10f1*-0x2+-0x83*0x5+-0x1f52)],Vi[this['seed']+(-0x23fb+0x23a8+0x55)],Vi[this['seed']+(0x156b+0x2*-0x85+-0x145e)])['mulScalar']((-0x979+0x1*-0x83c+0x11b6)/(-0x724+0x12a1*0x1+-0xa7e));}}const Eb=[new D(-(-0x95*-0x16+-0xa4*-0x3+-0x1*0xeb9),-0x17ff*-0x1+0x702+0x1*-0x1f01,-0x2115+0x1cf0+0x425),new D(0x535*-0x4+-0x1702+0x2bd7,-0x2cf*0x1+-0x1f03+0x21d2,-0x2*0x11e+-0xa8+0x2*0x172),new D(0x7c*-0x4+0x1322+-0x1132,-(-0x49*0x16+-0x12*-0xc4+-0x781),-0x884+0xdc9+-0x1*0x545),new D(0xf8f+0x1981+-0x2910,0x1*-0x1646+-0x151f+0x2b66,-0x3*0xcfb+-0xbee+-0x9*-0x5a7),new D(0x2ca+-0x242d+0x2163,0xa62+-0x855+-0x20d,-(0x24f0+0xfd3+-0x34c2)),new D(-0x936+0x724+0x212,0x1fa7+0x4e*-0x3b+-0x185*0x9,-0x13e5+0xfcf*0x2+-0x5*0x258)];class bb{constructor(){h(this,'colors',new Float32Array(-0x1ca9*-0x1+0x23de+-0x4075));}['update'](_0xd6b2d3,_0x45a9a2){const _0x5e6cf7=this['colors'],{r:_0x561161,g:_0x582b4c,b:_0x2aa2e1}=_0xd6b2d3;for(let _0x333dfd=-0x17*-0x151+-0x8*0x4a2+0x243*0x3;_0x333dfd<-0x1fe7*0x1+0x366+0x1c87;_0x333dfd++)_0x5e6cf7[_0x333dfd*(0x14f7+0x1bab+-0x309f)]=_0x561161,_0x5e6cf7[_0x333dfd*(-0xaa5+-0x1832+-0x2*-0x116d)+(-0xa4*-0x1d+0x2336+0x1*-0x35c9)]=_0x582b4c,_0x5e6cf7[_0x333dfd*(-0xf2b+-0xd*0x293+-0x7*-0x6f3)+(-0x2221*-0x1+-0x9*0x39e+-0x191)]=_0x2aa2e1;for(let _0x4216dc=0x2*0x11a6+-0xf*0x1df+-0x73b;_0x4216dc<_0x45a9a2['length'];_0x4216dc++){const _0x26fb3f=_0x45a9a2[_0x4216dc];if(_0x26fb3f['_type']===ve)for(let _0x4f88e9=0x104b+0x1964+-0x29af;_0x4f88e9<-0x11f6+-0x111*-0x8+-0x37*-0x2c;_0x4f88e9++){const _0x53da7a=Math['max'](Eb[_0x4f88e9]['dot'](_0x26fb3f['_direction']),-0xc66+0x13c6+-0x760)*_0x26fb3f['_intensity'],_0x108417=_0x26fb3f['_color'];_0x5e6cf7[_0x4f88e9*(0x1ab1*0x1+-0x7d0+-0x1*0x12de)]+=_0x108417['r']*_0x53da7a,_0x5e6cf7[_0x4f88e9*(-0x1293+-0xb4e+-0xef2*-0x2)+(-0x3*0x6c9+-0xd9*-0xa+-0x3*-0x3f6)]+=_0x108417['g']*_0x53da7a,_0x5e6cf7[_0x4f88e9*(0x56*0x4c+-0x160a+-0x9*0x63)+(-0x1ffc+-0x430*-0x4+-0x79f*-0x2)]+=_0x108417['b']*_0x53da7a;}}}}const Ab=(_0x3077c6,_0x44544b,_0x40e93f,_0x4892a3)=>{const _0x57dcae=new _e(_0x3077c6,{'name':''+_0x44544b+_0x40e93f,'width':_0x40e93f,'height':_0x40e93f,'format':Ne,'addressU':yt,'addressV':yt,'type':Ds,'magFilter':Te,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(0x20*-0x15+-0x7f5+0xa96)});return _0x57dcae['lock']()['set'](_0x4892a3),_0x57dcae['unlock'](),_0x57dcae;},Cb=new Kt(),Pb=_0x56c230=>Cb['get'](_0x56c230,()=>{const _0x4b7cde=Tb(),_0x29ec0e=Math['sqrt'](_0x4b7cde['length']/(-0xaca+-0x2065+-0x1*-0x2b33));return Ab(_0x56c230,'BlueNoise',_0x29ec0e,_0x4b7cde);});class va{constructor(_0x1f716c,_0x557ff8){this['texture']=_0x1f716c,this['cached']=!(-0x8*-0x2e+-0x1868+0x16f9),this['renderTarg'+'ets']=_0x557ff8;}['destroy'](){this['texture']&&(this['texture']['destroy'](),this['texture']=null);const _0x13a2a6=this['renderTarg'+'ets'];for(let _0x300e97=0x80d+-0x19f4+0x11e7;_0x300e97<_0x13a2a6['length'];_0x300e97++)_0x13a2a6[_0x300e97]['destroy']();this['renderTarg'+'ets']['length']=0x1234+0x236*-0xe+0xcc0;}static['create'](_0xfe7c54,_0x822227){let _0x14188f=null;return _0x822227['_type']===Ke?_0x14188f=this['createCube'+'map'](_0xfe7c54,_0x822227['_shadowRes'+'olution'],_0x822227['_shadowTyp'+'e']):_0x14188f=this['create2dMa'+'p'](_0xfe7c54,_0x822227['_shadowRes'+'olution'],_0x822227['_shadowTyp'+'e']),_0x14188f;}static['createAtla'+'s'](_0x18705a,_0x3e5c53,_0x14583b){const _0x41cfd0=this['create2dMa'+'p'](_0x18705a,_0x3e5c53,_0x14583b),_0x222a61=_0x41cfd0['renderTarg'+'ets'],_0x4d0e53=_0x222a61[0x923*-0x1+-0x1ed2+0x27f5];for(let _0x2d7fec=-0x15dd*-0x1+0x25dc+0x1*-0x3bb9;_0x2d7fec<0x55c*0x4+-0x1f9a+-0x365*-0x3;_0x2d7fec++)_0x222a61['push'](_0x4d0e53);return _0x41cfd0;}static['create2dMa'+'p'](_0x10faa0,_0xa1696d,_0x231c41){var _0x2232dd;const _0x5cdb54=qi['get'](_0x231c41);w['assert'](_0x5cdb54);let _0x2b6ee2=_0x5cdb54['format'];_0x2b6ee2===Ji&&!_0x10faa0['textureFlo'+'atRenderab'+'le']&&_0x10faa0['textureHal'+'fFloatRend'+'erable']&&(_0x2b6ee2=od);const _0x362c0f=(_0x2232dd=Nt['get'](_0x2b6ee2))==null?void(0x224b+0x1dc6+-0x4011):_0x2232dd['name'];let _0x392e94=vt;_0x231c41===Jp&&(_0x392e94=_0x10faa0['extTexture'+'FloatLinea'+'r']?vt:Te),_0x231c41===al&&(_0x392e94=Te);const _0xc96eb7=new _e(_0x10faa0,{'profilerHint':eu,'format':_0x2b6ee2,'width':_0xa1696d,'height':_0xa1696d,'mipmaps':!(0x5*-0x775+-0xd50+0x329a),'minFilter':_0x392e94,'magFilter':_0x392e94,'addressU':ue,'addressV':ue,'name':'ShadowMap2'+'D_'+_0x362c0f});let _0x18e227=null;return _0x5cdb54!=null&&_0x5cdb54['pcf']?(_0xc96eb7['compareOnR'+'ead']=!(-0x1146+-0x18ad+0x29f3),_0xc96eb7['compareFun'+'c']=hh,_0x18e227=new gt({'depthBuffer':_0xc96eb7})):_0x18e227=new gt({'colorBuffer':_0xc96eb7,'depth':!(-0x1a15*-0x1+-0xc7a*0x2+-0x121)}),_0x10faa0['isWebGPU']&&(_0x18e227['flipY']=!(-0xb*0xbe+-0x5*-0x1bb+0x7d*-0x1)),new va(_0xc96eb7,[_0x18e227]);}static['createCube'+'map'](_0x6b9ab,_0x211b82,_0x58b4be){var _0x35cd86;const _0x25ff94=qi['get'](_0x58b4be);w['assert'](_0x25ff94);const _0x2f3291=(_0x35cd86=Nt['get'](_0x25ff94['format']))==null?void(0x1*-0x1055+-0x1c33+-0x72*-0x64):_0x35cd86['name'],_0x4d1200=_0x58b4be===al,_0x5cdb38=_0x4d1200?Te:vt,_0x3d7945=new _e(_0x6b9ab,{'profilerHint':eu,'format':_0x25ff94==null?void(-0x2479+-0x1d0b+-0x1c*-0x257):_0x25ff94['format'],'width':_0x211b82,'height':_0x211b82,'cubemap':!(0x1*0x1760+0x2c7*-0x5+0x1*-0x97d),'mipmaps':!(0x717+-0xe0+0x5*-0x13e),'minFilter':_0x5cdb38,'magFilter':_0x5cdb38,'addressU':ue,'addressV':ue,'name':'ShadowMapC'+'ube_'+_0x2f3291});_0x4d1200||(_0x3d7945['compareOnR'+'ead']=!(0x597*0x6+0x23*0x97+-0x362f),_0x3d7945['compareFun'+'c']=hh);const _0x108ba9=[];for(let _0x5b10b2=0x25*-0x31+-0xf13*0x2+0x1*0x253b;_0x5b10b2<-0x382*0x1+0x4b*-0x2b+0x1021;_0x5b10b2++)_0x4d1200?_0x108ba9['push'](new gt({'colorBuffer':_0x3d7945,'face':_0x5b10b2,'depth':!(0x5ad+-0x93e+0x391*0x1)})):_0x108ba9['push'](new gt({'depthBuffer':_0x3d7945,'face':_0x5b10b2}));return new va(_0x3d7945,_0x108ba9);}}const Mb=[],Db=[],xi=new re(),ef=new re();class tf{constructor(_0x5e37fc){this['size']=Math['floor'](_0x5e37fc['w']*(-0x25*-0xf4+0x171a+-0x2*0x1b2f)),this['used']=!(0xcca*0x1+-0x16a3+0x9da),this['lightId']=-(-0x100d+0x1d03+0x1*-0xcf5),this['rect']=_0x5e37fc;}}class Ib{constructor(_0x37f618){this['device']=_0x37f618,this['version']=0x1916+-0x173*-0x5+-0x2054,this['shadowAtla'+'sResolutio'+'n']=0x1d5e+-0x2621+0x1*0x10c3,this['shadowAtla'+'s']=null,this['shadowEdge'+'Pixels']=-0x157f+-0xe*0x169+0x2940,this['cookieAtla'+'sResolutio'+'n']=-0x15*-0x26+-0x65f+0x345,this['cookieAtla'+'s']=new _e(this['device'],{'name':'CookieAtla'+'s','width':this['cookieAtla'+'sResolutio'+'n'],'height':this['cookieAtla'+'sResolutio'+'n'],'format':_s,'cubemap':!(-0x11f7+0x1aac+0x45a*-0x2),'mipmaps':!(-0xa*0x2c9+0x17*0x1f+0x1912),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue}),this['cookieRend'+'erTarget']=new gt({'colorBuffer':this['cookieAtla'+'s'],'depth':!(-0x1f00+-0x17fc+0x7*0x7db),'flipY':!(0x3d*-0x94+0x1b69+0x7db)}),this['slots']=[],this['atlasSplit']=[],this['cubeSlotsO'+'ffsets']=[new J(-0x2b0+-0x27a+0x52a,0x91*0x30+0x9a*0x3a+-0x3e14),new J(-0x1011+0x22d2+-0x12c1,-0x8de*0x4+0x28*0x66+-0x1*-0x1389),new J(0x37*0x3e+0x764+-0x1f*0xab,0xe0*0x25+0x1f69+0x1*-0x3fc9),new J(0x6*-0x1bb+0x79*-0x39+0x2554,0x142d*-0x1+-0x19a2+-0x10*-0x2dd),new J(-0xe6a+-0x1*-0x81c+0x650,0x1e07+-0x136e+0x1*-0xa99),new J(0x1bc2+-0x10a7+-0xb19,0x127e+0x1298+0x35f*-0xb)],this['scissorVec']=new re(),this['allocateSh'+'adowAtlas'](0x1c9f+0x31a+0x658*-0x5),this['allocateCo'+'okieAtlas'](-0x1788+-0x3b9*-0x9+-0x9f8),this['allocateUn'+'iforms']();}['destroy'](){this['destroySha'+'dowAtlas'](),this['destroyCoo'+'kieAtlas']();}['destroySha'+'dowAtlas'](){var _0x66d5a0;(_0x66d5a0=this['shadowAtla'+'s'])==null||_0x66d5a0['destroy'](),this['shadowAtla'+'s']=null;}['destroyCoo'+'kieAtlas'](){var _0x30bb56,_0x4ef335;(_0x30bb56=this['cookieAtla'+'s'])==null||_0x30bb56['destroy'](),this['cookieAtla'+'s']=null,(_0x4ef335=this['cookieRend'+'erTarget'])==null||_0x4ef335['destroy'](),this['cookieRend'+'erTarget']=null;}['allocateSh'+'adowAtlas'](_0x3a83fc,_0x12d1eb=$s){var _0x44145c;const _0x9b591=(_0x44145c=this['shadowAtla'+'s'])==null?void(-0xeb2+0xbc*-0x21+0x26ee):_0x44145c['texture']['format'],_0x34a7cb=qi['get'](_0x12d1eb)['format'];if(!this['shadowAtla'+'s']||this['shadowAtla'+'s']['texture']['width']!==_0x3a83fc||_0x9b591!==_0x34a7cb){this['version']++,this['destroySha'+'dowAtlas'](),this['shadowAtla'+'s']=va['createAtla'+'s'](this['device'],_0x3a83fc,_0x12d1eb),this['shadowAtla'+'s']['cached']=!(0x1*-0x2de+-0x222f+0x769*0x5);const _0x21b70e=(0x127b+0xe63+-0x20da)/this['shadowAtla'+'sResolutio'+'n'];this['scissorVec']['set'](_0x21b70e,_0x21b70e,-(-0x266*0xe+-0x2bb*0x1+0xc1b*0x3)*_0x21b70e,-(-0x157f+-0xc1d*-0x2+-0x2b9)*_0x21b70e);}}['allocateCo'+'okieAtlas'](_0x2a3730){this['cookieAtla'+'s']['width']!==_0x2a3730&&(this['cookieRend'+'erTarget']['resize'](_0x2a3730,_0x2a3730),this['version']++);}['allocateUn'+'iforms'](){this['_shadowAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('shadowAtla'+'sTexture'),this['_shadowAtl'+'asParamsId']=this['device']['scope']['resolve']('shadowAtla'+'sParams'),this['_shadowAtl'+'asParams']=new Float32Array(-0x81d+-0xcbf+0x14de),this['_cookieAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('cookieAtla'+'sTexture');}['updateUnif'+'orms'](){const _0x32977d=this['shadowAtla'+'s']['renderTarg'+'ets'][0x6*-0x83+0x7ff+-0x4ed]['depthBuffe'+'r'];this['_shadowAtl'+'asTextureI'+'d']['setValue'](_0x32977d),this['_shadowAtl'+'asParams'][-0x1988+-0x1fab+0x3933]=this['shadowAtla'+'sResolutio'+'n'],this['_shadowAtl'+'asParams'][0x263e+-0xfc6+-0x1677]=this['shadowEdge'+'Pixels'],this['_shadowAtl'+'asParamsId']['setValue'](this['_shadowAtl'+'asParams']),this['_cookieAtl'+'asTextureI'+'d']['setValue'](this['cookieAtla'+'s']);}['subdivide'](_0x1d3230,_0x5585ac){let _0x169492=_0x5585ac['atlasSplit'];if(!_0x169492){const _0x2deb68=Math['ceil'](Math['sqrt'](_0x1d3230));_0x169492=Db,_0x169492[0x1999*0x1+0x1848+-0x31e1]=_0x2deb68,_0x169492['length']=0x1*-0x2ff+0x1d62+0x133*-0x16;}if(!((_0x2815ea,_0x393def)=>_0x2815ea['length']===_0x393def['length']&&_0x2815ea['every']((_0x454ba7,_0x44b404)=>_0x454ba7===_0x393def[_0x44b404]))(_0x169492,this['atlasSplit'])){this['version']++,this['slots']['length']=-0x5*0x2ab+-0xea2*-0x1+-0x14b,this['atlasSplit']['length']=-0xdac+-0x2513+0x32bf,this['atlasSplit']['push'](..._0x169492);const _0x581f03=this['atlasSplit'][-0x1f50+0x186d+0x2b*0x29];if(_0x581f03>0x1*0x25f3+0x3b*0xa6+-0x4c34){const _0x2cc4fa=(0x2548+-0x1331*-0x1+-0xd*0x458)/_0x581f03;for(let _0x67c05a=-0xb*-0x283+-0x1*-0x115f+-0x2d00;_0x67c05a<_0x581f03;_0x67c05a++)for(let _0x36d43e=0x2196+0x1*0xee1+-0x13*0x28d;_0x36d43e<_0x581f03;_0x36d43e++){const _0x1facab=new re(_0x67c05a*_0x2cc4fa,_0x36d43e*_0x2cc4fa,_0x2cc4fa,_0x2cc4fa),_0x36935c=this['atlasSplit'][-0xc27+0x2*0xde7+0x7d3*-0x2+_0x67c05a*_0x581f03+_0x36d43e];if(_0x36935c>0x1*0x2595+-0x3*-0xff+-0x2891){for(let _0x12e192=-0x4f*0x4d+0xba2+0xc21;_0x12e192<_0x36935c;_0x12e192++)for(let _0x343c14=0x16a*-0x16+-0x19be*-0x1+0x55e;_0x343c14<_0x36935c;_0x343c14++){const _0x50d63a=_0x2cc4fa/_0x36935c,_0x26ee64=new re(_0x1facab['x']+_0x12e192*_0x50d63a,_0x1facab['y']+_0x343c14*_0x50d63a,_0x50d63a,_0x50d63a);this['slots']['push'](new tf(_0x26ee64));}}else this['slots']['push'](new tf(_0x1facab));}}else this['slots']['push'](new tf(new re(-0x203b+-0x224*0x3+0x26a7,0x1937+0xd8a+-0xceb*0x3,0x213f*-0x1+-0x99d+0x2add,0x7c9*-0x2+0xd8+0xebb*0x1)));this['slots']['sort']((_0x5b2fa2,_0x2c51ec)=>_0x2c51ec['size']-_0x5b2fa2['size']);}}['collectLig'+'hts'](_0x1ce16d,_0x5bfb04){const _0x473c70=_0x5bfb04['cookiesEna'+'bled'],_0x4f93d3=_0x5bfb04['shadowsEna'+'bled'];let _0x30ea6f=!(0x197b+0x26d9+-0x1f3*0x21),_0x51f3b0=!(-0x28*0x8a+-0xd5a+-0x7*-0x4fd);const _0x4b9ce6=Mb;return _0x4b9ce6['length']=-0x22e4+-0xfb8+0x13c*0x29,(_0x473c70||_0x4f93d3)&&(_0x1ac305=>{for(let _0x84d1a2=-0x606+0x61*0x35+0x3b*-0x3d;_0x84d1a2<_0x1ac305['length'];_0x84d1a2++){const _0x5728ee=_0x1ac305[_0x84d1a2];if(_0x5728ee['visibleThi'+'sFrame']){const _0x20b2dc=_0x4f93d3&&_0x5728ee['castShadow'+'s'],_0x588027=_0x473c70&&!!_0x5728ee['cookie'];_0x30ea6f||(_0x30ea6f=_0x20b2dc),_0x51f3b0||(_0x51f3b0=_0x588027),(_0x20b2dc||_0x588027)&&_0x4b9ce6['push'](_0x5728ee);}}})(_0x1ce16d),_0x4b9ce6['sort']((_0x51a657,_0x1eb6a4)=>_0x1eb6a4['maxScreenS'+'ize']-_0x51a657['maxScreenS'+'ize']),_0x30ea6f&&this['allocateSh'+'adowAtlas'](this['shadowAtla'+'sResolutio'+'n'],_0x5bfb04['shadowType']),_0x51f3b0&&this['allocateCo'+'okieAtlas'](this['cookieAtla'+'sResolutio'+'n']),(_0x30ea6f||_0x51f3b0)&&this['subdivide'](_0x4b9ce6['length'],_0x5bfb04),_0x4b9ce6;}['setupSlot'](_0x2b239a,_0x58958){_0x2b239a['atlasViewp'+'ort']['copy'](_0x58958);const _0x50463a=_0x2b239a['numShadowF'+'aces'];for(let _0x2f4c3b=-0x1*-0x155d+-0x238+0x1325*-0x1;_0x2f4c3b<_0x50463a;_0x2f4c3b++)if(_0x2b239a['castShadow'+'s']||_0x2b239a['_cookie']){if(xi['copy'](_0x58958),ef['copy'](_0x58958),_0x2b239a['_type']===Ze&&xi['add'](this['scissorVec']),_0x2b239a['_type']===Ke){const _0x26215a=xi['z']/(0xba7+0x65*-0x61+0x1aa1),_0x1c2e1d=this['cubeSlotsO'+'ffsets'][_0x2f4c3b];xi['x']+=_0x26215a*_0x1c2e1d['x'],xi['y']+=_0x26215a*_0x1c2e1d['y'],xi['z']=_0x26215a,xi['w']=_0x26215a,ef['copy'](xi);}if(_0x2b239a['castShadow'+'s']){const _0xb158ce=_0x2b239a['getRenderD'+'ata'](null,_0x2f4c3b);_0xb158ce['shadowView'+'port']['copy'](xi),_0xb158ce['shadowScis'+'sor']['copy'](ef);}}}['assignSlot'](_0x1c5b17,_0x4c48ef,_0x222a24){_0x1c5b17['atlasViewp'+'ortAllocat'+'ed']=!(-0x6*0x472+0x1*-0x42b+-0x1*-0x1ed7);const _0x1d0c18=this['slots'][_0x4c48ef];_0x1d0c18['lightId']=_0x1c5b17['id'],_0x1d0c18['used']=!(0x268f*0x1+0x6*0x121+-0x2d55*0x1),_0x222a24&&(_0x1c5b17['atlasSlotU'+'pdated']=!(0x28d+-0x23b7+-0x11b*-0x1e),_0x1c5b17['atlasVersi'+'on']=this['version'],_0x1c5b17['atlasSlotI'+'ndex']=_0x4c48ef);}['update'](_0x10b5ca,_0x2e975a){this['shadowAtla'+'sResolutio'+'n']=_0x2e975a['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x2e975a['cookieAtla'+'sResolutio'+'n'];const _0x4bbee7=this['collectLig'+'hts'](_0x10b5ca,_0x2e975a);if(_0x4bbee7['length']>0xa3+0x2*0x16f+-0xd*0x45){const _0x49c322=this['slots'];for(let _0x439a76=0x8*0x1ab+0x1*0x150a+-0x2262;_0x439a76<_0x49c322['length'];_0x439a76++)_0x49c322[_0x439a76]['used']=!(0x257f*-0x1+0x18fd+-0x1*-0xc83);const _0x20a28d=Math['min'](_0x4bbee7['length'],_0x49c322['length']);for(let _0x10094b=0x1415+0x74a+0x3e9*-0x7;_0x10094b<_0x20a28d;_0x10094b++){const _0x44e9b6=_0x4bbee7[_0x10094b];_0x44e9b6['castShadow'+'s']&&(_0x44e9b6['_shadowMap']=this['shadowAtla'+'s']);const _0x421c2d=_0x49c322[_0x44e9b6['atlasSlotI'+'ndex']];if(_0x44e9b6['atlasVersi'+'on']===this['version']&&_0x44e9b6['id']===(_0x421c2d==null?void(0x565*-0x4+0x16e6+-0x2*0xa9):_0x421c2d['lightId'])){const _0x4a733b=_0x49c322[_0x44e9b6['atlasSlotI'+'ndex']];_0x4a733b['size']===_0x49c322[_0x10094b]['size']&&!_0x4a733b['used']&&this['assignSlot'](_0x44e9b6,_0x44e9b6['atlasSlotI'+'ndex'],!(-0x5*0x55d+0x9*-0x40e+0x3f50));}}let _0x1423fe=0x3b*0x94+0x1*0xd9+-0x1*0x22f5;for(let _0x56c707=0x1c10+-0x10b*0x3+-0x18ef;_0x56c707<_0x20a28d;_0x56c707++){for(;_0x1423fe<_0x49c322['length']&&_0x49c322[_0x1423fe]['used'];)_0x1423fe++;const _0x232a82=_0x4bbee7[_0x56c707];_0x232a82['atlasViewp'+'ortAllocat'+'ed']||this['assignSlot'](_0x232a82,_0x1423fe,!(-0x1ab*0x13+-0x1fa2+-0xd*-0x4df));const _0x32943d=_0x49c322[_0x232a82['atlasSlotI'+'ndex']];this['setupSlot'](_0x232a82,_0x32943d['rect']);}}this['updateUnif'+'orms']();}}class Lb{constructor(){this['cache']=new Map();}['destroy'](){this['clear'](),this['cache']=null;}['clear'](){this['cache']['forEach'](_0x235f1c=>{_0x235f1c['forEach'](_0x3d1699=>{_0x3d1699['destroy']();});}),this['cache']['clear']();}['getKey'](_0xb3ed2a){const _0xf45f79=_0xb3ed2a['_type']===Ke,_0x201c92=_0xb3ed2a['_shadowTyp'+'e'],_0x6cb630=_0xb3ed2a['_shadowRes'+'olution'];return _0xf45f79+'-'+_0x201c92+'-'+_0x6cb630;}['get'](_0x13719a,_0x92c0f5){const _0x1632cd=this['getKey'](_0x92c0f5),_0x25befb=this['cache']['get'](_0x1632cd);if(_0x25befb&&_0x25befb['length'])return _0x25befb['pop']();const _0x5cede2=va['create'](_0x13719a,_0x92c0f5);return _0x5cede2['cached']=!(0xc92+0xfef+0x1c81*-0x1),_0x5cede2;}['add'](_0x1b242b,_0x497706){const _0x1cfe3f=this['getKey'](_0x1b242b),_0x4cbcfd=this['cache']['get'](_0x1cfe3f);_0x4cbcfd?_0x4cbcfd['push'](_0x497706):this['cache']['set'](_0x1cfe3f,[_0x497706]);}}class Rb extends ys{constructor(_0x47d82a,_0x4f2776,_0x5267a2,_0x4d24e0,_0x386fd6){super(_0x47d82a),Ea['setName'](this,this['name']+'-'+_0x5267a2['_node']['name']),this['requiresCu'+'bemaps']=!(0x25f6+0x5*0x603+0xb56*-0x6),this['shadowRend'+'erer']=_0x4f2776,this['light']=_0x5267a2,this['face']=_0x4d24e0,this['applyVsm']=_0x386fd6,this['shadowCame'+'ra']=_0x4f2776['prepareFac'+'e'](_0x5267a2,null,_0x4d24e0),_0x4f2776['setupRende'+'rPass'](this,this['shadowCame'+'ra'],!(-0x1*-0xefb+0xdf6+0x1cf1*-0x1));}['execute'](){this['shadowRend'+'erer']['renderFace'](this['light'],null,this['face'],!(-0x46d+-0x2148+0x1*0x25b6));}['after'](){this['applyVsm']&&this['shadowRend'+'erer']['renderVsm'](this['light'],this['shadowCame'+'ra']);}}class Ob{constructor(_0x297f45,_0x55b740){h(this,'shadowLigh'+'ts',[]),h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x297f45,this['shadowRend'+'erer']=_0x55b740,this['device']=_0x297f45['device']);}['cull'](_0x112829,_0x2491ac,_0x26caa1=null){const _0xf87c3b=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled'];_0x112829['visibleThi'+'sFrame']=!(0x1eae+0x835*0x3+-0x374d),_0xf87c3b||_0x112829['_shadowMap']||(_0x112829['_shadowMap']=va['create'](this['device'],_0x112829));const _0x1ff443=_0x112829['_type'],_0x19e083=_0x1ff443===Ze?-0x48f*-0x7+-0x266*0x10+0x678:-0xe88+-0x1*-0x136+0xd58;for(let _0x3b63c6=0x7da+0xe35+-0x160f*0x1;_0x3b63c6<_0x19e083;_0x3b63c6++){const _0x401fa3=_0x112829['getRenderD'+'ata'](null,_0x3b63c6),_0x41362a=_0x401fa3['shadowCame'+'ra'];_0x41362a['nearClip']=_0x112829['attenuatio'+'nEnd']/(-0x16*0x37+0xc3*-0xa+0x1040),_0x41362a['farClip']=_0x112829['attenuatio'+'nEnd'];const _0x1c7cfc=_0x41362a['_node'],_0x5ef003=_0x112829['_node'];if(_0x1c7cfc['setPositio'+'n'](_0x5ef003['getPositio'+'n']()),_0x1ff443===Ze)_0x41362a['fov']=_0x112829['_outerCone'+'Angle']*(0x20eb+0xc*0x297+0x3ffd*-0x1),_0x1c7cfc['setRotatio'+'n'](_0x5ef003['getRotatio'+'n']()),_0x1c7cfc['rotateLoca'+'l'](-(-0x1c03+0x5*-0x762+0x4147),0x1d4b+0x310+0xac9*-0x3,0x2134*0x1+0x29*-0xbb+-0x341);else{if(_0x1ff443===Ke){if(_0xf87c3b){const _0x4e3a62=(0x20c0*0x1+-0x263*-0x1+-0x211*0x11)/(this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowAtla'+'sResolutio'+'n']*_0x112829['atlasViewp'+'ort']['z']/(0x13*-0xcd+0x31*0x5e+-0x2c4))*this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowEdge'+'Pixels'];_0x41362a['fov']=Math['atan'](0x18d*-0xd+-0x248a+0x38b4+_0x4e3a62)*Y['RAD_TO_DEG']*(-0x5b4*-0x2+-0x3*0x57b+-0x50b*-0x1);}else _0x41362a['fov']=0x81*0x2a+0x172c+-0x233*0x14;}}this['renderer']['updateCame'+'raFrustum'](_0x41362a),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x2491ac,_0x112829,_0x401fa3['visibleCas'+'ters'],_0x41362a,_0x26caa1);}}['prepareLig'+'hts'](_0x2f7b10,_0x40ef53){let _0x2064ea;for(let _0x50f723=-0x149+-0xe*0x24f+0x219b;_0x50f723<_0x40ef53['length'];_0x50f723++){const _0x171164=_0x40ef53[_0x50f723];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x171164)&&_0x171164['atlasViewp'+'ortAllocat'+'ed']){_0x2f7b10['push'](_0x171164);for(let _0x34e965=0x2089*0x1+-0xe16+-0x1273*0x1;_0x34e965<_0x171164['numShadowF'+'aces'];_0x34e965++)_0x2064ea=this['shadowRend'+'erer']['prepareFac'+'e'](_0x171164,null,_0x34e965);}}return _0x2064ea;}['buildNonCl'+'usteredRen'+'derPasses'](_0x313ed,_0x415b42){for(let _0x191662=-0x26bc+0x150+0x256c;_0x191662<_0x415b42['length'];_0x191662++){const _0x2c4792=_0x415b42[_0x191662];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x2c4792)){const _0x1b0cd5=_0x2c4792['_type']===Ze,_0x2e8318=_0x2c4792['numShadowF'+'aces'];for(let _0x2db660=0x1ff2*-0x1+-0x31*0x5c+0x318e;_0x2db660<_0x2e8318;_0x2db660++){const _0x461102=new Rb(this['device'],this['shadowRend'+'erer'],_0x2c4792,_0x2db660,_0x1b0cd5);_0x313ed['addRenderP'+'ass'](_0x461102);}}}}}class Fb extends ys{constructor(_0x5ee2f5,_0x331c3f,_0x39da77,_0x2f8d9d,_0x311a64){super(_0x5ee2f5),Ea['setName'](this,this['name']+'-'+_0x39da77['_node']['name']),this['shadowRend'+'erer']=_0x331c3f,this['light']=_0x39da77,this['camera']=_0x2f8d9d,this['allCascade'+'sRendering']=_0x311a64;}['execute'](){const {light:_0x2df4ce,camera:_0x3af4c6,shadowRenderer:_0x4b0e90,allCascadesRendering:_0x21b8ae}=this,_0x5309fe=_0x2df4ce['numShadowF'+'aces'],_0x2c92a3=_0x2df4ce['shadowUpda'+'teOverride'+'s'];for(let _0x5918f2=-0x26*0xfd+-0x12dd+-0x521*-0xb;_0x5918f2<_0x5309fe;_0x5918f2++)(_0x2c92a3==null?void(-0x7*-0x26+0xb6c+-0xc76):_0x2c92a3[_0x5918f2])!==Ps&&_0x4b0e90['renderFace'](_0x2df4ce,_0x3af4c6,_0x5918f2,!_0x21b8ae),(_0x2c92a3==null?void(0xbc4+0x86f+-0x1*0x1433):_0x2c92a3[_0x5918f2])===xr&&(_0x2c92a3[_0x5918f2]=Ps);}['after'](){this['shadowRend'+'erer']['renderVsm'](this['light'],this['camera']);}}const lc=new De(),Ti=new D(),H_=new te(),Xe=[new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D()],sf={'min':0x0,'max':0x0};function Nb(_0x135d21,_0x239723,_0x49f5cc){Xe[-0xb56*0x1+0xa00+0x3*0x72]['x']=Xe[0x1190+-0x931*-0x4+0x1*-0x3653]['x']=Xe[-0xabc+-0x1*-0x1b2a+-0x106c]['x']=Xe[0x2479*0x1+-0xb33+-0x1943]['x']=_0x239723['x'],Xe[-0x1f80+-0x1953+0x1c6a*0x2]['y']=Xe[-0x1*0x1b59+0x1*0xd5a+0xe02]['y']=Xe[-0x16*-0x16a+-0x3*-0x17b+0x11c3*-0x2]['y']=Xe[-0x1bcb+0x602*0x1+0x2*0xae7]['y']=_0x239723['y'],Xe[0x596+-0xbc0+-0x2*-0x316]['z']=Xe[0x1dfa+-0x1856+-0x83*0xb]['z']=Xe[0x21a9+0x772*-0x1+-0x1a31]['z']=Xe[-0xf6*-0x1c+0x16f7*-0x1+-0x3ea]['z']=_0x239723['z'],Xe[0x1e6e+0x1d7+-0x2041]['x']=Xe[-0xd8a*-0x2+0xc19*-0x1+-0xef6]['x']=Xe[0x739*0x5+0x251a+-0x4931]['x']=Xe[0x897+0x4b*-0x63+0x1471]['x']=_0x49f5cc['x'],Xe[-0xba*0x21+-0xc51+0x244b]['y']=Xe[0x1887+-0x1529+-0x2*0x1ae]['y']=Xe[-0x1*0x1061+-0x22df+-0x2*-0x19a2]['y']=Xe[-0x1784+-0x1*0x805+0x1f8f*0x1]['y']=_0x49f5cc['y'],Xe[-0x1f3f+0x2426+0x1*-0x4e7]['z']=Xe[-0xd33*0x2+-0x67e+-0x191*-0x15]['z']=Xe[-0x6ea*0x2+-0x254*-0x4+0x1d*0x28]['z']=Xe[0x1bee+-0xe15+-0x2c4*0x5]['z']=_0x49f5cc['z'];let _0x3d4191=-0x2e659499*0x17+-0x1f5967c8b+-0x874c2ba49*-0x1,_0x44ece9=-(-0x5202e04*0xbf+0xae6f306b+0x5789f0890);for(let _0x2229c5=-0x2b8+-0x59e*-0x1+-0x2e6;_0x2229c5<0x217f+0x15b2*-0x1+0x83*-0x17;++_0x2229c5){_0x135d21['transformP'+'oint'](Xe[_0x2229c5],Xe[_0x2229c5]);const _0x3650de=Xe[_0x2229c5]['z'];_0x3650de<_0x3d4191&&(_0x3d4191=_0x3650de),_0x3650de>_0x44ece9&&(_0x44ece9=_0x3650de);}return sf['min']=_0x3d4191,sf['max']=_0x44ece9,sf;}class kb{constructor(_0x28d70e,_0x9dcf8c){h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x28d70e,this['shadowRend'+'erer']=_0x9dcf8c,this['device']=_0x28d70e['device']);}['cull'](_0x1f2ee1,_0x9d15dc,_0x2f3e39,_0x40d892=null){_0x1f2ee1['visibleThi'+'sFrame']=!(-0x2160+-0xef0+0x3050),_0x1f2ee1['_shadowMap']||(_0x1f2ee1['_shadowMap']=va['create'](this['device'],_0x1f2ee1));const _0x66e91f=_0x2f3e39['_nearClip'];this['generateSp'+'litDistanc'+'es'](_0x1f2ee1,_0x66e91f,Math['min'](_0x2f3e39['_farClip'],_0x1f2ee1['shadowDist'+'ance']));const _0xbf0812=_0x1f2ee1['shadowUpda'+'teOverride'+'s'];for(let _0x53050a=-0x1*0x206f+0x1fc7+-0x2a*-0x4;_0x53050a<_0x1f2ee1['numCascade'+'s']&&(_0xbf0812==null?void(0xd*0xc3+0x3*0x8c3+-0x2430):_0xbf0812[_0x53050a])!==Ps;_0x53050a++){const _0x18f0b3=_0x1f2ee1['getRenderD'+'ata'](_0x2f3e39,_0x53050a),_0x5097f1=_0x18f0b3['shadowCame'+'ra'];_0x5097f1['renderTarg'+'et']=_0x1f2ee1['_shadowMap']['renderTarg'+'ets'][0x4e1+0xa69+-0xf4a],_0x18f0b3['shadowView'+'port']['copy'](_0x1f2ee1['cascades'][_0x53050a]),_0x18f0b3['shadowScis'+'sor']['copy'](_0x1f2ee1['cascades'][_0x53050a]);const _0x1a5b7b=_0x5097f1['_node'],_0x1adb0d=_0x1f2ee1['_node'];_0x1a5b7b['setPositio'+'n'](_0x1adb0d['getPositio'+'n']()),_0x1a5b7b['setRotatio'+'n'](_0x1adb0d['getRotatio'+'n']()),_0x1a5b7b['rotateLoca'+'l'](-(-0x1072*0x1+0x1*0x1d7+0x223*0x7),-0x757*0x1+0xd48+-0x5f1,-0x1cfd+-0x19f7+0x36f4);const _0x25b5e0=_0x53050a===0x2*-0xafc+0x1*-0x1f2b+0x1*0x3523?_0x66e91f:_0x1f2ee1['_shadowCas'+'cadeDistan'+'ces'][_0x53050a-(0x1*0x265c+0x30f+-0x296a)],_0x60155b=_0x1f2ee1['_shadowCas'+'cadeDistan'+'ces'][_0x53050a],_0x2ecd26=_0x2f3e39['getFrustum'+'Corners'](_0x25b5e0,_0x60155b);Ti['set'](-0x21aa+0xc29+0x1581,0x1366+-0x1*-0xda5+-0xb*0x301,-0xa78+-0x24e4+0x2f5c);const _0x5dab8b=_0x2f3e39['node']['getWorldTr'+'ansform']();for(let _0x6b7a86=0x1bb+-0x1*-0x773+-0x92e;_0x6b7a86<-0x2055+0x57*0x3d+0xba2;_0x6b7a86++)_0x5dab8b['transformP'+'oint'](_0x2ecd26[_0x6b7a86],_0x2ecd26[_0x6b7a86]),Ti['add'](_0x2ecd26[_0x6b7a86]);Ti['mulScalar']((-0x4ce+-0x2322+0x27f1)/(-0x25ae+0x34*-0xac+0x48a6));let _0x1eb19b=-0x265a+0x1*-0x35+0x268f*0x1;for(let _0xdc6167=-0xeb3+-0x3*-0xce3+-0x17f6;_0xdc6167<-0x11*-0x171+-0x986+-0xef3;_0xdc6167++){const _0x48acdf=_0x2ecd26[_0xdc6167]['sub'](Ti)['length']();_0x48acdf>_0x1eb19b&&(_0x1eb19b=_0x48acdf);}const _0xa945d4=_0x1a5b7b['right'],_0x55cee6=_0x1a5b7b['up'],_0x235864=_0x1a5b7b['forward'],_0x5b36ff=(-0x1*-0x9f5+0x908+0x12fd*-0x1+0.25)*_0x1f2ee1['_shadowRes'+'olution']/_0x1eb19b,_0x259dde=Math['ceil'](Ti['dot'](_0x55cee6)*_0x5b36ff)/_0x5b36ff,_0x41b155=Math['ceil'](Ti['dot'](_0xa945d4)*_0x5b36ff)/_0x5b36ff,_0x329a04=_0x55cee6['mulScalar'](_0x259dde),_0x5cd211=_0xa945d4['mulScalar'](_0x41b155),_0x259c02=Ti['dot'](_0x235864),_0x568ea7=_0x235864['mulScalar'](_0x259c02);Ti['add2'](_0x329a04,_0x5cd211)['add'](_0x568ea7),_0x1a5b7b['setPositio'+'n'](Ti),_0x1a5b7b['translateL'+'ocal'](0xc2*0x5+0x1a2c+-0x1df6,-0x14c*-0x1+-0x729+0x4f*0x13,0x879a6+-0x5e480+-0x211d*-0x62),_0x5097f1['nearClip']=0xb*-0x17e+-0x2665*0x1+0x36cf+0.01,_0x5097f1['farClip']=-0x1*-0x25a5c5+-0x13a261+0xc811c,_0x5097f1['orthoHeigh'+'t']=_0x1eb19b,this['renderer']['updateCame'+'raFrustum'](_0x5097f1),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x9d15dc,_0x1f2ee1,_0x18f0b3['visibleCas'+'ters'],_0x5097f1,_0x40d892);const _0x1fa161=-0x1a3e+-0x3*-0x55d+0xa28<<_0x53050a,_0x293597=_0x18f0b3['visibleCas'+'ters'],_0x4052cc=_0x293597['length'];let _0x3d2f64=-0xd72*0x1+-0x1e7e+-0x4*-0xafc;for(let _0x4b78bd=-0x2457+-0x14b*0x17+0x1085*0x4;_0x4b78bd<_0x4052cc;_0x4b78bd++){const _0x168668=_0x293597[_0x4b78bd];_0x168668['shadowCasc'+'adeMask']&_0x1fa161&&(_0x293597[_0x3d2f64++]=_0x168668,_0x3d2f64===0x17d3*-0x1+0xde9+0x1*0x9eb?lc['copy'](_0x168668['aabb']):lc['add'](_0x168668['aabb']));}_0x4052cc!==_0x3d2f64&&(_0x293597['length']=_0x3d2f64),H_['copy'](_0x1a5b7b['getWorldTr'+'ansform']())['invert']();const _0x363f76=Nb(H_,lc['getMin'](),lc['getMax']());_0x1a5b7b['translateL'+'ocal'](0x5*0x124+-0x615*-0x5+-0x1*0x241d,-0xee2+-0x1*-0x1d89+-0xea7,_0x363f76['max']+(-0x43*0x3e+0x40*-0x4+-0x2df*-0x6+0.1)),_0x5097f1['farClip']=_0x363f76['max']-_0x363f76['min']+(0x1bf*-0x1+0x1ca1+0xd71*-0x2+0.2),_0x18f0b3['projection'+'Compensati'+'on']=_0x1eb19b;}}['generateSp'+'litDistanc'+'es'](_0x1d2aec,_0x35e95d,_0xf9a7e6){_0x1d2aec['_shadowCas'+'cadeDistan'+'ces']['fill'](_0xf9a7e6);for(let _0x2eae75=-0xbe0+-0x137*-0x5+0x5ce;_0x2eae75<_0x1d2aec['numCascade'+'s'];_0x2eae75++){const _0x52d9f5=_0x2eae75/_0x1d2aec['numCascade'+'s'],_0x6d02ae=_0x35e95d+(_0xf9a7e6-_0x35e95d)*_0x52d9f5,_0x4e2910=_0x35e95d*(_0xf9a7e6/_0x35e95d)**_0x52d9f5,_0x1a5c76=Y['lerp'](_0x6d02ae,_0x4e2910,_0x1d2aec['cascadeDis'+'tribution']);_0x1d2aec['_shadowCas'+'cadeDistan'+'ces'][_0x2eae75-(-0x3*0xa77+0x174d+0x819)]=_0x1a5c76;}}['getLightRe'+'nderPass'](_0x201772,_0x22724d){w['assert'](_0x201772&&_0x201772['_type']===ve);let _0x51b23c=null;if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x201772)){const _0x1dc5e2=_0x201772['numShadowF'+'aces'],_0x213911=_0x201772['shadowUpda'+'teOverride'+'s'];let _0x217a18=!(-0x22a7+0x85b*-0x1+0x2b02),_0x3f054c;for(let _0x18774e=0x2*-0x10a3+-0x313*-0xa+0x6c*0x6;_0x18774e<_0x1dc5e2;_0x18774e++)(_0x213911==null?void(-0x28*0xb3+0x179+-0x8d5*-0x3):_0x213911[_0x18774e])===Ps&&(_0x217a18=!(0xba4+-0x822*0x3+0xcc3)),_0x3f054c=this['shadowRend'+'erer']['prepareFac'+'e'](_0x201772,_0x22724d,_0x18774e);_0x51b23c=new Fb(this['device'],this['shadowRend'+'erer'],_0x201772,_0x22724d,_0x217a18),this['shadowRend'+'erer']['setupRende'+'rPass'](_0x51b23c,_0x3f054c,_0x217a18);}return _0x51b23c;}}const rf=new Set(),W_=new te(),$_=new te(),Fr=new Float32Array(-0x2517+0xe4b+0x16ce),lo=new re(0x200f+0x1e32+-0x3e40,0x1051+0xb*-0xb5+-0x889,0x4*-0x687+0x1*-0x1aed+0x3509,-0x1*0x2668+0x29d+0x23cb),X_=new te();function Ub(_0x2fcdc1,_0x49c985){return Math['exp'](-(_0x2fcdc1*_0x2fcdc1)/((-0x359*-0x6+0x63*-0x6+0x2*-0x8e1)*_0x49c985*_0x49c985));}function Bb(_0x2923d9){const _0x130bb8=(_0x2923d9-(0x2534+-0x296*0x6+0x1ab*-0xd))/(0x1915*-0x1+-0x18*0xd4+0x2cfb),_0x40360a=(_0x2923d9-(0xd5f*-0x2+-0x144b+0x2f0a))*(0x7*-0x7+-0x1706+0x7bd*0x3+0.5),_0x2e0c04=new Array(_0x2923d9);let _0x9432a6=0x162b+-0x1*-0x1091+-0x26bc;for(let _0x32af33=-0x1*0x23c2+-0x542+0x2904;_0x32af33<_0x2923d9;++_0x32af33)_0x2e0c04[_0x32af33]=Ub(_0x32af33-_0x40360a,_0x130bb8),_0x9432a6+=_0x2e0c04[_0x32af33];for(let _0x4adede=0xf20+0x7e1*0x3+0x1*-0x26c3;_0x4adede<_0x2923d9;++_0x4adede)_0x2e0c04[_0x4adede]/=_0x9432a6;return _0x2e0c04;}class Cv{constructor(_0x3f12c0,_0x474b8d){h(this,'shadowPass'+'Cache',[]),(this['device']=_0x3f12c0['device'],this['renderer']=_0x3f12c0,this['lightTextu'+'reAtlas']=_0x474b8d);const _0x1e7372=this['device']['scope'];this['sourceId']=_0x1e7372['resolve']('source'),this['pixelOffse'+'tId']=_0x1e7372['resolve']('pixelOffse'+'t'),this['weightId']=_0x1e7372['resolve']('weight[0]'),this['blurVsmSha'+'der']=[{},{}],this['blurVsmWei'+'ghts']={},this['shadowMapL'+'ightRadius'+'Id']=_0x1e7372['resolve']('light_radi'+'us'),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['blendState'+'Write']=new pt(),this['blendState'+'NoWrite']=new pt(),this['blendState'+'NoWrite']['setColorWr'+'ite'](!(-0xa5e+0x264*0xf+0x105*-0x19),!(-0x5*-0x16b+-0x1538+0x711*0x2),!(0x58f+0xa*-0x23c+0x10ca),!(0x10*0x180+0xd7a+-0x2579));}static['createShad'+'owCamera'](_0x5a6811,_0x2c7b2e,_0xf5a454){const _0x5710b5=Wn['create']('ShadowCame'+'ra',_0x2c7b2e,_0xf5a454),_0x4fcb25=qi['get'](_0x5a6811);w['assert'](_0x4fcb25);const _0x2ef87a=(_0x4fcb25==null?void(0x474+-0x1856+0x13e2):_0x4fcb25['vsm'])??!(-0x1*0x1091+0x80*0x35+-0x9ee),_0x2d4ed3=(_0x4fcb25==null?void(0x7b2+-0xaa1*0x1+0x2ef*0x1):_0x4fcb25['pcf'])??!(0x11b3+-0x36f*0x7+0x1*0x657);return _0x2ef87a?_0x5710b5['clearColor']=new ie(0x6*0x2e+0x24d8+0x6*-0x652,-0x16f3+-0x2*-0xc8d+0x13*-0x1d,-0x730+-0x40f*0x7+-0xd*-0x2bd,-0xd42*-0x1+-0x1f2c+0x11ea*0x1):_0x5710b5['clearColor']=new ie(-0x2f*0x6b+0x64+0x1342,0x31*-0xbc+-0x41d+-0x57*-0x76,0x1*-0x1d3c+-0x1b66+0x38a3,0x152b*-0x1+0x4ec+0x1040),_0x5710b5['clearDepth'+'Buffer']=!(0x1ea7+-0x1060+0x2b*-0x55),_0x5710b5['clearStenc'+'ilBuffer']=!(0x424+0x4*-0x5e0+0x135d),_0x5710b5['clearColor'+'Buffer']=!_0x2d4ed3,_0x5710b5;}['_cullShado'+'wCastersIn'+'ternal'](_0x1317b4,_0x178385,_0x425d93){const _0x182805=_0x1317b4['length'];for(let _0x23d412=-0x1b*-0xc3+0x21*-0xbc+0x3ab;_0x23d412<_0x182805;_0x23d412++){const _0x6b0dd1=_0x1317b4[_0x23d412];_0x6b0dd1['castShadow']&&(!_0x6b0dd1['cull']||_0x6b0dd1['_isVisible'](_0x425d93))&&(_0x6b0dd1['visibleThi'+'sFrame']=!(0x1027+0xd05+0x4*-0x74b),_0x178385['push'](_0x6b0dd1));}}['cullShadow'+'Casters'](_0x522651,_0x3ca493,_0x57d3ab,_0x1c6011,_0x165de7){var _0x5c2cce,_0x1a2ade;if((_0x5c2cce=this['renderer']['scene'])==null||_0x5c2cce['fire'](mv,_0x1c6011),_0x57d3ab['length']=-0x1bfa*-0x1+-0x1ceb+-0x1*-0xf1,_0x165de7)this['_cullShado'+'wCastersIn'+'ternal'](_0x165de7,_0x57d3ab,_0x1c6011);else{const _0x502128=_0x522651['layerList'],_0x1f461b=_0x502128['length'];for(let _0x5c45f0=-0x13cf+-0x1db1+-0x2*-0x18c0;_0x5c45f0<_0x1f461b;_0x5c45f0++){const _0x130118=_0x502128[_0x5c45f0];_0x130118['_lightsSet']['has'](_0x3ca493)&&(rf['has'](_0x130118)||(rf['add'](_0x130118),this['_cullShado'+'wCastersIn'+'ternal'](_0x130118['shadowCast'+'ers'],_0x57d3ab,_0x1c6011)));}rf['clear']();}_0x57d3ab['sort'](this['sortCompar'+'eShader']),(_0x1a2ade=this['renderer']['scene'])==null||_0x1a2ade['fire'](_v,_0x1c6011);}['sortCompar'+'eShader'](_0x5aa896,_0x2e6550){const _0x9bdd7f=_0x5aa896['_sortKeySh'+'adow'],_0x567a89=_0x2e6550['_sortKeySh'+'adow'];return _0x9bdd7f===_0x567a89?_0x2e6550['mesh']['id']-_0x5aa896['mesh']['id']:_0x567a89-_0x9bdd7f;}['setupRende'+'rState'](_0x34e9ab,_0x3d85f2){const _0x11c5ec=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']?_0x3d85f2['_isPcf']:_0x3d85f2['_isPcf']&&_0x3d85f2['_type']!==Ke;_0x34e9ab['setBlendSt'+'ate'](_0x11c5ec?this['blendState'+'NoWrite']:this['blendState'+'Write']),_0x34e9ab['setDepthSt'+'ate'](_0x3d85f2['shadowDept'+'hState']),_0x34e9ab['setStencil'+'State'](null,null);}['dispatchUn'+'iforms'](_0x450e63,_0x51401b,_0x46b5b2,_0x11bf3d){const _0x21bbc6=_0x51401b['_node'];_0x450e63['_type']!==ve&&(this['renderer']['dispatchVi'+'ewPos'](_0x21bbc6['getPositio'+'n']()),this['shadowMapL'+'ightRadius'+'Id']['setValue'](_0x450e63['attenuatio'+'nEnd'])),W_['setTRS'](_0x21bbc6['getPositio'+'n'](),_0x21bbc6['getRotatio'+'n'](),D['ONE'])['invert'](),$_['mul2'](_0x51401b['projection'+'Matrix'],W_);const _0x521a85=_0x46b5b2['shadowView'+'port'];_0x51401b['rect']=_0x521a85,_0x51401b['scissorRec'+'t']=_0x46b5b2['shadowScis'+'sor'],X_['setViewpor'+'t'](_0x521a85['x'],_0x521a85['y'],_0x521a85['z'],_0x521a85['w']),_0x46b5b2['shadowMatr'+'ix']['mul2'](X_,$_),_0x450e63['_type']===ve&&_0x450e63['_shadowMat'+'rixPalette']['set'](_0x46b5b2['shadowMatr'+'ix']['data'],_0x11bf3d*(-0x253d*0x1+-0x11fc+-0x3749*-0x1));}['getShadowP'+'ass'](_0x4ba03d){var _0x543e2f;const _0x48a81a=_0x4ba03d['_type'],_0x3eb240=_0x4ba03d['_shadowTyp'+'e'];let _0xafe0aa=(_0x543e2f=this['shadowPass'+'Cache'][_0x48a81a])==null?void(0x3*0x14c+0x3*0x9a5+0x3*-0xaf1):_0x543e2f[_0x3eb240];if(!_0xafe0aa){const _0x4cfc1c='ShadowPass'+'_'+_0x48a81a+'_'+_0x3eb240;_0xafe0aa=Si['get'](this['device'])['allocate'](_0x4cfc1c,{'isShadow':!(0xef*0x3+-0x167*0x11+0x150a),'lightType':_0x48a81a,'shadowType':_0x3eb240}),this['shadowPass'+'Cache'][_0x48a81a]||(this['shadowPass'+'Cache'][_0x48a81a]=[]),this['shadowPass'+'Cache'][_0x48a81a][_0x3eb240]=_0xafe0aa;}return _0xafe0aa['index'];}['submitCast'+'ers'](_0x5ce86c,_0xbe6370,_0x279c40){var _0x1f83e5;const _0x1a21fd=this['device'],_0x3fef63=this['renderer'],_0x333dc4=_0x3fef63['scene'],_0x122953=0x2140+-0x152b+-0xc14<<cm,_0x529f96=this['getShadowP'+'ass'](_0xbe6370),_0x3df0be=_0x279c40['shaderPara'+'ms'],_0x56032f=_0x279c40['renderTarg'+'et']['flipY']?-(0x163+0x312*0x7+-0x16e0):-0x84*-0x48+0xac*0x10+-0x1*0x2fdf,_0x1ace5e=_0x5ce86c['length'];for(let _0x4a56fe=0xb56+-0x4*-0x3a+-0xc3e;_0x4a56fe<_0x1ace5e;_0x4a56fe++){const _0x2d6e07=_0x5ce86c[_0x4a56fe],_0x5c0d08=_0x2d6e07['mesh'],_0x41a405=_0x2d6e07['instancing'+'Data'];if(_0x41a405&&_0x41a405['count']<=0x105c+0xadd+0x65*-0x45)continue;_0x2d6e07['ensureMate'+'rial'](_0x1a21fd);const _0x14cdb2=_0x2d6e07['material'];Q['pushGpuMar'+'ker'](_0x1a21fd,'Node:\x20'+_0x2d6e07['node']['name']+(',\x20Material'+':\x20')+_0x14cdb2['name']),_0x3fef63['setBaseCon'+'stants'](_0x1a21fd,_0x14cdb2),_0x3fef63['setSkinnin'+'g'](_0x1a21fd,_0x2d6e07),_0x14cdb2['dirty']&&(_0x14cdb2['updateUnif'+'orms'](_0x1a21fd,_0x333dc4),_0x14cdb2['dirty']=!(0x24c4+-0x1*0x26ce+0x20b)),_0x3fef63['setupCullM'+'ode'](!(0xd59*0x1+0x1b48*-0x1+0xdef),_0x56032f,_0x2d6e07),_0x14cdb2['setParamet'+'ers'](_0x1a21fd),_0x2d6e07['setParamet'+'ers'](_0x1a21fd,_0x122953);const _0x1f5742=_0x2d6e07['getShaderI'+'nstance'](_0x529f96,-0x2*-0xf3d+0x17d7+-0x3651,_0x333dc4,_0x3df0be,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat']),_0x1b84f9=_0x1f5742['shader'];if(w['assert'](_0x1b84f9,'no\x20shader\x20'+'for\x20pass\x20'+_0x529f96,_0x14cdb2),_0x1b84f9['failed'])continue;_0x2d6e07['_sortKeySh'+'adow']=_0x1b84f9['id'],_0x1a21fd['setShader'](_0x1b84f9),_0x3fef63['setVertexB'+'uffers'](_0x1a21fd,_0x5c0d08),_0x3fef63['setMorphin'+'g'](_0x1a21fd,_0x2d6e07['morphInsta'+'nce']),_0x41a405&&_0x1a21fd['setVertexB'+'uffer'](_0x41a405['vertexBuff'+'er']),_0x3fef63['setMeshIns'+'tanceMatri'+'ces'](_0x2d6e07),_0x3fef63['setupMeshU'+'niformBuff'+'ers'](_0x1f5742);const _0x3bb91b=_0x2d6e07['renderStyl'+'e'],_0x454bf0=(_0x1f83e5=_0x2d6e07['indirectDa'+'ta'])==null?void(-0x37*-0x11+0xa7*0x19+-0x13f6):_0x1f83e5['get'](_0x279c40);_0x1a21fd['draw'](_0x5c0d08['primitive'][_0x3bb91b],_0x5c0d08['indexBuffe'+'r'][_0x3bb91b],_0x41a405==null?void(-0x151b+-0x1071*0x2+0x35fd):_0x41a405['count'],_0x454bf0),_0x3fef63['_shadowDra'+'wCalls']++,_0x41a405&&_0x3fef63['_instanced'+'DrawCalls']++,Q['popGpuMark'+'er'](_0x1a21fd);}}['needsShado'+'wRendering'](_0x216ab9){const _0x4ee26b=_0x216ab9['enabled']&&_0x216ab9['castShadow'+'s']&&_0x216ab9['shadowUpda'+'teMode']!==Ps&&_0x216ab9['visibleThi'+'sFrame'];return _0x216ab9['shadowUpda'+'teMode']===xr&&(_0x216ab9['shadowUpda'+'teMode']=Ps),_0x4ee26b&&(this['renderer']['_shadowMap'+'Updates']+=_0x216ab9['numShadowF'+'aces']),_0x4ee26b;}['getLightRe'+'nderData'](_0x1b9634,_0x33ddc9,_0x15c32c){return _0x1b9634['getRenderD'+'ata'](_0x1b9634['_type']===ve?_0x33ddc9:null,_0x15c32c);}['setupRende'+'rPass'](_0x43192c,_0x1e799b,_0x5d5662){const _0x38d4e7=_0x1e799b['renderTarg'+'et'];_0x43192c['init'](_0x38d4e7),_0x43192c['depthStenc'+'ilOps']['clearDepth'+'Value']=-0x29*0x63+-0x11be+0x219a,_0x43192c['depthStenc'+'ilOps']['clearDepth']=_0x5d5662,_0x38d4e7['depthBuffe'+'r']?_0x43192c['depthStenc'+'ilOps']['storeDepth']=!(0x202b+-0xaa*0x25+-0x799):(_0x43192c['colorOps']['clearValue']['copy'](_0x1e799b['clearColor']),_0x43192c['colorOps']['clear']=_0x5d5662,_0x43192c['depthStenc'+'ilOps']['storeDepth']=!(-0x12ca+0x25ae+-0x12e3)),_0x43192c['requiresCu'+'bemaps']=!(-0x8*0x5+-0xc3c+0xc65);}['prepareFac'+'e'](_0x30e5bf,_0x5035bb,_0x531ce0){const _0x49cc6a=_0x30e5bf['_type'],_0x27cc74=this['getLightRe'+'nderData'](_0x30e5bf,_0x5035bb,_0x531ce0)['shadowCame'+'ra'],_0x4d6996=_0x49cc6a===ve?-0x1*-0xa46+0x1*0x1ad5+-0x251b:_0x531ce0;return _0x27cc74['renderTarg'+'et']=_0x30e5bf['_shadowMap']['renderTarg'+'ets'][_0x4d6996],_0x27cc74;}['renderFace'](_0x56d634,_0x32ef3b,_0x314d85,_0x46f471,_0x13b27f=!(0x833*-0x4+-0x17a*-0xc+0x4*0x3c5)){const _0x150da5=this['device'],_0x4daf0c=de();Q['pushGpuMar'+'ker'](_0x150da5,'SHADOW\x20'+_0x56d634['_node']['name']+'\x20FACE\x20'+_0x314d85);const _0xb625e9=this['getLightRe'+'nderData'](_0x56d634,_0x32ef3b,_0x314d85),_0x2c690b=_0xb625e9['shadowCame'+'ra'];this['dispatchUn'+'iforms'](_0x56d634,_0x2c690b,_0xb625e9,_0x314d85);const _0x4b613b=_0x2c690b['renderTarg'+'et'],_0x499362=this['renderer'];_0x499362['setCameraU'+'niforms'](_0x2c690b,_0x4b613b),_0x150da5['supportsUn'+'iformBuffe'+'rs']&&_0x499362['setupViewU'+'niformBuff'+'ers'](_0xb625e9['viewBindGr'+'oups'],this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],null),_0x13b27f?(_0x499362['setupViewp'+'ort'](_0x2c690b,_0x4b613b),_0x46f471&&_0x499362['clear'](_0x2c690b)):_0x499362['clearView'](_0x2c690b,_0x4b613b,!(-0x1cf7*-0x1+0x228e+-0x3f85),!(0x176b+0x1*-0xad+-0x16bd)),this['setupRende'+'rState'](_0x150da5,_0x56d634),this['submitCast'+'ers'](_0xb625e9['visibleCas'+'ters'],_0x56d634,_0x2c690b),Q['popGpuMark'+'er'](_0x150da5),_0x499362['_shadowMap'+'Time']+=de()-_0x4daf0c;}['render'](_0x27dd87,_0x3d6beb,_0xcb2c65=!(0x103c+-0x1fbd+0xf81)){if(this['needsShado'+'wRendering'](_0x27dd87)){const _0x3f5c18=_0x27dd87['numShadowF'+'aces'];for(let _0x46ec24=-0x251c+0x18be+0xc5e*0x1;_0x46ec24<_0x3f5c18;_0x46ec24++)this['prepareFac'+'e'](_0x27dd87,_0x3d6beb,_0x46ec24),this['renderFace'](_0x27dd87,_0x3d6beb,_0x46ec24,!(-0x851*0x2+-0xa61*0x1+-0xf*-0x1cd),_0xcb2c65);this['renderVsm'](_0x27dd87,_0x3d6beb);}}['renderVsm'](_0x355a33,_0xc9e8ad){_0x355a33['_isVsm']&&_0x355a33['_vsmBlurSi'+'ze']>-0x667+-0x3*0x275+-0x1*-0xdc7&&(!this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']||_0x355a33['_type']===ve)&&this['applyVsmBl'+'ur'](_0x355a33,_0xc9e8ad);}['getVsmBlur'+'Shader'](_0x567d62,_0x2df09f){const _0xd1abea=this['blurVsmSha'+'der'];let _0x159fe4=_0xd1abea[_0x567d62][_0x2df09f];if(!_0x159fe4){this['blurVsmWei'+'ghts'][_0x2df09f]=Bb(_0x2df09f);const _0x279bd5=new Map();_0x279bd5['set']('{SAMPLES}',_0x2df09f),_0x567d62===-0x4*0x1c9+-0x1248+0x196d&&_0x279bd5['set']('GAUSS',''),_0x159fe4=$t['createShad'+'er'](this['device'],{'uniqueName':'blurVsm'+_0x567d62+_0x2df09f,'attributes':{'vertex_position':Me},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'blurVSMPS','fragmentDefines':_0x279bd5}),_0xd1abea[_0x567d62][_0x2df09f]=_0x159fe4;}return _0x159fe4;}['applyVsmBl'+'ur'](_0x48af37,_0x4d845f){const _0x2ef4d4=this['device'];Q['pushGpuMar'+'ker'](_0x2ef4d4,'VSM\x20'+_0x48af37['_node']['name']),_0x2ef4d4['setBlendSt'+'ate'](pt['NOBLEND']);const _0xcb38c2=_0x48af37['getRenderD'+'ata'](_0x48af37['_type']===ve?_0x4d845f:null,0x180b+0x19e2+-0x31ed*0x1)['shadowCame'+'ra']['renderTarg'+'et'],_0x1e4566=this['renderer']['shadowMapC'+'ache']['get'](_0x2ef4d4,_0x48af37),_0x14e6c8=_0x1e4566['renderTarg'+'ets'][0x14d1*-0x1+0x1017+0x2*0x25d],_0x1ccdda=_0x48af37['vsmBlurMod'+'e'],_0x482a31=_0x48af37['_vsmBlurSi'+'ze'],_0x907bb7=this['getVsmBlur'+'Shader'](_0x1ccdda,_0x482a31);lo['z']=_0x48af37['_shadowRes'+'olution']-(-0x487*-0x2+-0x3ee+-0x51e),lo['w']=lo['z'],this['sourceId']['setValue'](_0xcb38c2['colorBuffe'+'r']),Fr[-0x8d*-0x3+-0x12c2*-0x2+0x10f*-0x25]=(0x1*0x221+0x2485+-0x26a5)/_0x48af37['_shadowRes'+'olution'],Fr[0x2*0xec5+0x2496+-0x421f*0x1]=-0x1ea0+-0x62d+0x24cd,this['pixelOffse'+'tId']['setValue'](Fr),_0x1ccdda===em&&this['weightId']['setValue'](this['blurVsmWei'+'ghts'][_0x482a31]),Ar(_0x2ef4d4,_0x14e6c8,_0x907bb7,null,lo),this['sourceId']['setValue'](_0x14e6c8['colorBuffe'+'r']),Fr[0xb90+0x2218+-0x2da7]=Fr[-0x76*0x1e+0x1f72+0x2*-0x8cf],Fr[-0xb3*-0x37+0x898+0x16d*-0x21]=-0x223d+-0x2053+-0xf*-0x470,this['pixelOffse'+'tId']['setValue'](Fr),Ar(_0x2ef4d4,_0xcb38c2,_0x907bb7,null,lo),this['renderer']['shadowMapC'+'ache']['add'](_0x48af37,_0x1e4566),Q['popGpuMark'+'er'](_0x2ef4d4);}['initViewBi'+'ndGroupFor'+'mat'](){this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']&&(this['viewUnifor'+'mFormat']=new zy(this['device'],[new dt('matrix_vie'+'wProjectio'+'n',li)]),this['viewBindGr'+'oupFormat']=new Ny(this['device'],[new kp(Np,Fp|by)]));}['frameUpdat'+'e'](){this['initViewBi'+'ndGroupFor'+'mat']();}}const cc=[];class zb{constructor(_0x3afb9b){h(this,'_empty',null),h(this,'_allocated',[]),h(this,'_clusters',new Map()),this['device']=_0x3afb9b;}['destroy'](){this['_empty']&&(this['_empty']['destroy'](),this['_empty']=null),this['_allocated']['forEach'](_0x52eb39=>{_0x52eb39['destroy']();}),this['_allocated']['length']=0x7*-0x553+0xf2d+0x1618;}get['count'](){return this['_allocated']['length'];}get['empty'](){if(!this['_empty']){const _0x4e77c0=new cu(this['device']);_0x4e77c0['name']='ClusterEmp'+'ty',_0x4e77c0['update']([]),this['_empty']=_0x4e77c0;}return this['_empty'];}['assign'](_0x4b6ea5){const _0x35295b=this['empty'];cc['push'](...this['_allocated']),this['_allocated']['length']=-0x23c5+0x11*-0x1ff+0x45b4*0x1,this['_clusters']['clear']();const _0x2d762d=_0x4b6ea5['length'];for(let _0x37217a=0x5*0x181+-0x1b11+-0x2*-0x9c6;_0x37217a<_0x2d762d;_0x37217a++){const _0x27a774=_0x4b6ea5[_0x37217a]['renderActi'+'ons'];if(_0x27a774){const _0x3d018c=_0x27a774['length'];for(let _0x99419=-0x1e8e+-0x3ac+-0x111d*-0x2;_0x99419<_0x3d018c;_0x99419++){const _0x10d543=_0x27a774[_0x99419];_0x10d543['lightClust'+'ers']=null;const _0x112021=_0x10d543['layer'];if(_0x112021['hasCluster'+'edLights']&&_0x112021['meshInstan'+'ces']['length']){const _0x1ff192=_0x112021['getLightId'+'Hash'](),_0x3a8dc7=this['_clusters']['get'](_0x1ff192);let _0x142304=_0x3a8dc7==null?void(0xc*0x2f8+0xe5*-0xb+-0x19c9):_0x3a8dc7['lightClust'+'ers'];_0x142304||(_0x142304=cc['pop']()??new cu(this['device']),Ea['setName'](_0x142304,'Cluster-'+this['_allocated']['length']),this['_allocated']['push'](_0x142304),this['_clusters']['set'](_0x1ff192,_0x10d543)),_0x10d543['lightClust'+'ers']=_0x142304;}_0x10d543['lightClust'+'ers']||(_0x10d543['lightClust'+'ers']=_0x35295b);}}}cc['forEach'](_0x110493=>_0x110493['destroy']()),cc['length']=0x1*0x667+0x1*-0x4b1+0x49*-0x6;}['update'](_0x417eac,_0x350444){this['assign'](_0x417eac),this['_clusters']['forEach'](_0x2c0790=>{const _0x5eb0f9=_0x2c0790['layer'];_0x2c0790['lightClust'+'ers']['update'](_0x5eb0f9['clusteredL'+'ightsSet'],_0x350444);});}}const rr=new re(),af=[];class pm extends ys{constructor(_0xce33e,_0x3b7b8e){super(_0xce33e),h(this,'_quadRende'+'rer2D',null),h(this,'_quadRende'+'rerCube',null),h(this,'_filteredL'+'ights',[]),h(this,'_forceCopy',!(-0x1792+-0x1cf3*0x1+0xa2*0x53)),h(this,'_evtDevice'+'Restored',null),(this['_cubeSlots'+'Offsets']=_0x3b7b8e,this['requiresCu'+'bemaps']=!(0x16d*0x11+0xdc1+0x799*-0x5),this['blitTextur'+'eId']=_0xce33e['scope']['resolve']('blitTextur'+'e'),this['invViewPro'+'jId']=_0xce33e['scope']['resolve']('invViewPro'+'j'),this['_evtDevice'+'Restored']=_0xce33e['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this));}['destroy'](){var _0x4d3126,_0x3c65a3,_0x25eccb;(_0x4d3126=this['_quadRende'+'rer2D'])==null||_0x4d3126['destroy'](),this['_quadRende'+'rer2D']=null,(_0x3c65a3=this['_quadRende'+'rerCube'])==null||_0x3c65a3['destroy'](),this['_quadRende'+'rerCube']=null,(_0x25eccb=this['_evtDevice'+'Restored'])==null||_0x25eccb['off'](),this['_evtDevice'+'Restored']=null;}static['create'](_0x293f6f,_0x11eae7){w['assert'](_0x293f6f);const _0x43140e=new pm(_0x293f6f['device'],_0x11eae7);return _0x43140e['init'](_0x293f6f),_0x43140e['colorOps']['clear']=!(0x5*-0x61f+0x544+0x1958),_0x43140e['depthStenc'+'ilOps']['clearDepth']=!(0x194+0x40f+-0x5a2),_0x43140e;}['onDeviceRe'+'stored'](){this['_forceCopy']=!(0x1437+0x3*-0x69e+-0x5d);}['update'](_0x490976){const _0x2c7c89=this['_filteredL'+'ights'];this['filter'](_0x490976,_0x2c7c89),this['executeEna'+'bled']=_0x2c7c89['length']>-0x2a9*0x5+0x1529+0x2*-0x3ee;}['filter'](_0x57d043,_0x8e8ced){for(let _0x1476a6=0x1c2b+0x1*-0x69d+-0x158e*0x1;_0x1476a6<_0x57d043['length'];_0x1476a6++){const _0x25652a=_0x57d043[_0x1476a6];_0x25652a['_type']!==ve&&_0x25652a['atlasViewp'+'ortAllocat'+'ed']&&(!_0x25652a['atlasSlotU'+'pdated']&&!this['_forceCopy']||_0x25652a['enabled']&&_0x25652a['cookie']&&_0x25652a['visibleThi'+'sFrame']&&_0x8e8ced['push'](_0x25652a));}this['_forceCopy']=!(0xf51+-0x1b0e+0xbbe);}['initInvVie'+'wProjMatri'+'ces'](){if(!af['length'])for(let _0x3df25a=0x605*-0x6+0xe*-0x171+-0x384c*-0x1;_0x3df25a<0x1882+0x90e+-0x51*0x6a;_0x3df25a++){const _0x51785d=Wn['create'](null,Ke,_0x3df25a),_0x30961e=_0x51785d['projection'+'Matrix'],_0x10184c=_0x51785d['node']['getLocalTr'+'ansform']()['clone']()['invert']();af[_0x3df25a]=new te()['mul2'](_0x30961e,_0x10184c)['invert']();}}get['quadRender'+'er2D'](){if(!this['_quadRende'+'rer2D']){const _0x331c0b=$t['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'erer2d','attributes':{'vertex_position':Me},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'2DPS'});this['_quadRende'+'rer2D']=new Ah(_0x331c0b);}return this['_quadRende'+'rer2D'];}get['quadRender'+'erCube'](){if(!this['_quadRende'+'rerCube']){const _0x13e914=$t['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'ererCube','attributes':{'vertex_position':Me},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'CubePS'});this['_quadRende'+'rerCube']=new Ah(_0x13e914);}return this['_quadRende'+'rerCube'];}['execute'](){const _0x5a4f0a=this['device'];_0x5a4f0a['setBlendSt'+'ate'](pt['NOBLEND']),_0x5a4f0a['setCullMod'+'e'](bt),_0x5a4f0a['setDepthSt'+'ate'](Yt['NODEPTH']),_0x5a4f0a['setStencil'+'State']();const _0x340fe8=this['renderTarg'+'et']['colorBuffe'+'r']['width'],_0x128218=this['_cubeSlots'+'Offsets'],_0x20840c=this['_filteredL'+'ights'];for(let _0x3f54e3=-0x1*-0xe5d+0x1*-0x1391+-0x25*-0x24;_0x3f54e3<_0x20840c['length'];_0x3f54e3++){const _0x1666f3=_0x20840c[_0x3f54e3];Q['pushGpuMar'+'ker'](this['device'],'COOKIE\x20'+_0x1666f3['_node']['name']);const _0x41c00c=_0x1666f3['numShadowF'+'aces'],_0x4ab1f4=_0x41c00c>0xc9f*-0x1+-0x25*0x20+0x1140?this['quadRender'+'erCube']:this['quadRender'+'er2D'];_0x41c00c>-0x483+-0x1350+0x4c4*0x5&&this['initInvVie'+'wProjMatri'+'ces'](),this['blitTextur'+'eId']['setValue'](_0x1666f3['cookie']);for(let _0x3f67e7=-0xf6a+0x1cdc+0xd72*-0x1;_0x3f67e7<_0x41c00c;_0x3f67e7++){if(rr['copy'](_0x1666f3['atlasViewp'+'ort']),_0x41c00c>-0x32*-0x4a+0xa7*0x29+-0x1*0x2932){const _0x5d5151=rr['z']/(0x331*0x1+-0x59e*-0x2+-0xe6a),_0x4d1e0b=_0x128218[_0x3f67e7];rr['x']+=_0x5d5151*_0x4d1e0b['x'],rr['y']+=_0x5d5151*_0x4d1e0b['y'],rr['z']=_0x5d5151,rr['w']=_0x5d5151,this['invViewPro'+'jId']['setValue'](af[_0x3f67e7]['data']);}rr['mulScalar'](_0x340fe8),_0x4ab1f4['render'](rr);}Q['popGpuMark'+'er'](_0x5a4f0a);}_0x20840c['length']=-0x23*-0xcf+0x1b68*-0x1+-0xe5;}}class Vb extends ys{constructor(_0x40c426,_0x162430,_0x2ae50b){super(_0x40c426),this['requiresCu'+'bemaps']=!(0x1502+0x14cc+0x105*-0x29),this['shadowRend'+'erer']=_0x162430,this['shadowRend'+'ererLocal']=_0x2ae50b;}['update'](_0x549336){const _0x93dedb=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x5dd35b=this['shadowRend'+'ererLocal']['prepareLig'+'hts'](_0x93dedb,_0x549336),_0x2b4c1a=_0x93dedb['length'];this['enabled']=_0x2b4c1a>0x1e*-0xd3+-0xda6+0x8*0x4cc,_0x2b4c1a&&this['shadowRend'+'erer']['setupRende'+'rPass'](this,_0x5dd35b,!(0x26c+-0x1a59+0x17ee));}['execute'](){const _0x2fd469=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x58a98f=_0x2fd469['length'];for(let _0x3354a4=0x5*0x3d2+-0x1*0xca9+-0x671;_0x3354a4<_0x58a98f;_0x3354a4++){const _0x1ae99a=_0x2fd469[_0x3354a4];for(let _0x1b2faa=0x136+-0x1337+-0x1201*-0x1;_0x1b2faa<_0x1ae99a['numShadowF'+'aces'];_0x1b2faa++)this['shadowRend'+'erer']['renderFace'](_0x1ae99a,null,_0x1b2faa,!(0x10b9+-0x1884+0x7cb));}_0x2fd469['length']=-0x19c7+-0x59*0x35+0x2c34;}}class Gb extends ys{constructor(_0x5e9a23,_0x565e7a,_0x55c937,_0x28c932,_0x2115d1){super(_0x5e9a23),this['renderer']=_0x565e7a,this['frameGraph']=null,this['cookiesRen'+'derPass']=pm['create'](_0x2115d1['cookieRend'+'erTarget'],_0x2115d1['cubeSlotsO'+'ffsets']),this['beforePass'+'es']['push'](this['cookiesRen'+'derPass']),this['shadowRend'+'erPass']=new Vb(_0x5e9a23,_0x55c937,_0x28c932),this['beforePass'+'es']['push'](this['shadowRend'+'erPass']);}['update'](_0x181b56,_0x117db7,_0x32c61a,_0x175127,_0x351c21){this['frameGraph']=_0x181b56,this['cookiesRen'+'derPass']['enabled']=_0x32c61a,_0x32c61a&&this['cookiesRen'+'derPass']['update'](_0x175127),this['shadowRend'+'erPass']['enabled']=_0x117db7,_0x117db7&&this['shadowRend'+'erPass']['update'](_0x351c21);}['destroy'](){this['cookiesRen'+'derPass']['destroy'](),this['cookiesRen'+'derPass']=null;}['execute'](){const _0x18c089=de(),{renderer:_0x44d3ee}=this,{scene:_0x41e99f}=_0x44d3ee;_0x44d3ee['worldClust'+'ersAllocat'+'or']['update'](this['frameGraph']['renderPass'+'es'],_0x41e99f['lighting']),_0x44d3ee['_lightClus'+'tersTime']+=de()-_0x18c089,_0x44d3ee['_lightClus'+'ters']=_0x44d3ee['worldClust'+'ersAllocat'+'or']['count'];}}let nf=0x121*-0x11+-0x233c+0x366d*0x1;const ar=new te(),nr=new te(),Oa=new te(),q_=new _i(),of=new sp(),j_=new te()['setScale'](0x4*-0x60e+0x1b5b+0x191*-0x2,-(-0x227d+0x661+0x1*0x1c1d),-0xd*0x6e+0x12c4+0xd2d*-0x1),lf=new Set(),cf=new Set(),hf=new ky(),Y_=new te()['set']([0x1b18+0x3f4+-0x1*0x1f0b,-0x16b+0x20e4+0x7*-0x47f,-0xaf5+0x2507*-0x1+0x2ffc,-0x1932+0x6b6+-0xe*-0x152,0x15ca+-0x208b+0xac1,-0x15d+0x107d+-0x4f*0x31,-0x232*0xa+-0x19*0x15b+0x3b9*0xf,-0x1*0xd17+0x9b*0x1f+-0x5ae,-0x16d5+0xa7*-0x39+0x3c04,-0x2039+0x12f3+0x1*0xd46,0x988+0x7cd*0x5+-0x3089+0.5,0x101d+0x2417*0x1+-0x3434,-0x2*0xa9a+0x1*-0xd29+0x225d*0x1,-0x23e7+0x1*0xc7f+-0x5da*-0x4,0x4*0x3e7+0xab5+-0x1*0x1a51+0.5,0x1841+-0x38*-0x98+-0x1cc0*0x2]),K_=[new J(0x8b*0x29+-0x7*-0x295+-0x2856+0.5,-0x946+0x1*0x1cda+-0x1394+0.333333),new J(0x1999+0x3a1*0x2+-0x20db+0.25,0xb65*-0x1+0x11c*0x7+0x3a1*0x1+0.666667),new J(-0x2*-0x284+0x24fa+-0x1501*0x2+0.75,0x155c+0x26b3+-0x5*0xc03+0.111111),new J(0x1f67+0xab7*-0x1+-0x14b0+0.125,-0xee6+0x2b5*0xc+-0x1196+0.444444),new J(0x12c7+0x184f+-0x2b16+0.625,0x29*0x13+0x1369+0x1674*-0x1+0.777778),new J(0x59e+0x1*0x19c7+-0x1f65+0.375,0x33*0x29+0x6*0x657+-0x2e35+0.222222),new J(-0x1ee3+0x1110+0xdd3+0.875,0x12c1+-0x2*0x76f+-0x3e3+0.555556),new J(-0x1734+-0x1*0x1c63+0x3397+0.0625,0x1815+0x1b97+-0x33ac+0.888889),new J(0x1948+-0x1*-0x449+-0x1d91+0.5625,0x254e+0x129*0x12+-0x3a30+0.037037),new J(-0x71f*0x5+0x22*0x109+0x69+0.3125,0x2*-0x7f9+-0x12c3+-0x6f1*-0x5+0.37037),new J(-0x1a6*-0x4+0x8f9+0x31d*-0x5+0.8125,0xa1a*-0x3+0x241c+-0x2*0x2e7+0.703704),new J(0x1*0x10e1+-0x15*0x1b7+-0x1322*-0x1+0.1875,-0x3*-0x46d+0x1*0x117f+-0x1ec6+0.148148),new J(0x1*-0x8e7+-0x3d*0x2+0x961+0.6875,0x10ad+-0x23*-0xf+0x1*-0x12ba+0.481481),new J(0x1cf3+0x1*0xff4+-0x2ce7+0.4375,-0x2*-0xf84+0x1*-0x25af+0xd*0x83+0.814815),new J(-0x177a+-0x7*-0xa7+-0x1*-0x12e9+0.9375,-0x7*-0x257+0xe28+-0x1*0x1e89+0.259259),new J(-0x21f9+-0x2*-0xb89+-0x1*-0xae7+0.03125,0x6*0x568+0xafa+-0x2b6a+0.592593)],Hb=new te(),Wb=new te(),$b=new te(),Xb=new te(),qb=new te(),jb=new te(),Fa=new Set(),df=[],ff=[];class Yb{constructor(_0x4bbbdc){h(this,'clustersDe'+'bugRendere'+'d',!(0x56c+-0x1*0xb35+0x5ca)),h(this,'processing'+'MeshInstan'+'ces',new Set()),h(this,'worldClust'+'ersAllocat'+'or'),h(this,'lights',[]),h(this,'localLight'+'s',[]),h(this,'cameraDirS'+'hadowLight'+'s',new Map()),h(this,'dirLightSh'+'adows',new Map()),h(this,'blueNoise',new wb(-0x85f*0x4+-0x35e*-0x1+-0x15*-0x175)),(this['device']=_0x4bbbdc,this['scene']=null,this['worldClust'+'ersAllocat'+'or']=new zb(_0x4bbbdc),this['lightTextu'+'reAtlas']=new Ib(_0x4bbbdc),this['shadowMapC'+'ache']=new Lb(),this['shadowRend'+'erer']=new Cv(this,this['lightTextu'+'reAtlas']),this['_shadowRen'+'dererLocal']=new Ob(this,this['shadowRend'+'erer']),this['_shadowRen'+'dererDirec'+'tional']=new kb(this,this['shadowRend'+'erer']),this['_renderPas'+'sUpdateClu'+'stered']=new Gb(this['device'],this,this['shadowRend'+'erer'],this['_shadowRen'+'dererLocal'],this['lightTextu'+'reAtlas']),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['_skinTime']=-0x1*-0x14b+-0x1*0x23a7+0x225c,this['_morphTime']=-0xf93+-0x1f8d+0x2f20,this['_cullTime']=0x1*0x1202+-0x71*-0x51+-0x35c3,this['_shadowMap'+'Time']=-0x4d3+0x3*0x1b1+-0x20*0x2,this['_lightClus'+'tersTime']=0x1294+0x1669+0x7*-0x5db,this['_layerComp'+'ositionUpd'+'ateTime']=0x1845+0x24d1+0x1*-0x3d16,this['_shadowDra'+'wCalls']=-0x4*-0x767+0xe12+0x2bae*-0x1,this['_skinDrawC'+'alls']=0xb09*0x2+-0x9e4+0x1*-0xc2e,this['_instanced'+'DrawCalls']=-0x2371+-0x14bc+-0x1*-0x382d,this['_shadowMap'+'Updates']=-0x21eb+0x43e*0x4+0x10f3,this['_numDrawCa'+'llsCulled']=0x1615*-0x1+0x16fd+-0x4*0x3a,this['_camerasRe'+'ndered']=-0x253f+0x9ae+0x1b91,this['_lightClus'+'ters']=0x7*0x2f5+-0x1658+0x1a5*0x1);const _0x390fd1=_0x4bbbdc['scope'];this['boneTextur'+'eId']=_0x390fd1['resolve']('texture_po'+'seMap'),this['modelMatri'+'xId']=_0x390fd1['resolve']('matrix_mod'+'el'),this['normalMatr'+'ixId']=_0x390fd1['resolve']('matrix_nor'+'mal'),this['viewInvId']=_0x390fd1['resolve']('matrix_vie'+'wInverse'),this['viewPos']=new Float32Array(-0x1*-0x264c+0x64a+0x1*-0x2c93),this['viewPosId']=_0x390fd1['resolve']('view_posit'+'ion'),this['projId']=_0x390fd1['resolve']('matrix_pro'+'jection'),this['projSkybox'+'Id']=_0x390fd1['resolve']('matrix_pro'+'jectionSky'+'box'),this['viewId']=_0x390fd1['resolve']('matrix_vie'+'w'),this['viewId3']=_0x390fd1['resolve']('matrix_vie'+'w3'),this['viewProjId']=_0x390fd1['resolve']('matrix_vie'+'wProjectio'+'n'),this['flipYId']=_0x390fd1['resolve']('projection'+'FlipY'),this['tbnBasis']=_0x390fd1['resolve']('tbnBasis'),this['nearClipId']=_0x390fd1['resolve']('camera_nea'+'r'),this['farClipId']=_0x390fd1['resolve']('camera_far'),this['cameraPara'+'ms']=new Float32Array(-0x217d*0x1+-0x1c73+-0x41*-0xf4),this['cameraPara'+'msId']=_0x390fd1['resolve']('camera_par'+'ams'),this['viewIndexI'+'d']=_0x390fd1['resolve']('view_index'),this['viewIndexI'+'d']['setValue'](-0x1*0x353+-0x1081+0x13d4),this['blueNoiseJ'+'itterVersi'+'on']=-0x712+-0x224*0x1+0x6*0x189,this['blueNoiseJ'+'itterVec']=new re(),this['blueNoiseJ'+'itterData']=new Float32Array(-0x16*0x8d+0x56*0x2b+0x10*-0x25),this['blueNoiseJ'+'itterId']=_0x390fd1['resolve']('blueNoiseJ'+'itter'),this['blueNoiseT'+'extureId']=_0x390fd1['resolve']('blueNoiseT'+'ex32'),this['alphaTestI'+'d']=_0x390fd1['resolve']('alpha_ref'),this['opacityMap'+'Id']=_0x390fd1['resolve']('texture_op'+'acityMap'),this['exposureId']=_0x390fd1['resolve']('exposure'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']=_0x390fd1['resolve']('twoSidedLi'+'ghtingNegS'+'caleFactor'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](0x105a+0x1*0x1c0f+0x1*-0x2c69),this['morphPosit'+'ionTex']=_0x390fd1['resolve']('morphPosit'+'ionTex'),this['morphNorma'+'lTex']=_0x390fd1['resolve']('morphNorma'+'lTex'),this['morphTexPa'+'rams']=_0x390fd1['resolve']('morph_tex_'+'params'),this['lightCube']=new bb(),this['constantLi'+'ghtCube']=_0x390fd1['resolve']('lightCube['+'0]');}['destroy'](){this['shadowRend'+'erer']=null,this['_shadowRen'+'dererLocal']=null,this['_shadowRen'+'dererDirec'+'tional']=null,this['shadowMapC'+'ache']['destroy'](),this['shadowMapC'+'ache']=null,this['_renderPas'+'sUpdateClu'+'stered']['destroy'](),this['_renderPas'+'sUpdateClu'+'stered']=null,this['lightTextu'+'reAtlas']['destroy'](),this['lightTextu'+'reAtlas']=null;}['setupViewp'+'ort'](_0x41d182,_0x1c14f1){const _0x1b055f=this['device'],_0x3c0536=_0x1c14f1?_0x1c14f1['width']:_0x1b055f['width'],_0x3ac007=_0x1c14f1?_0x1c14f1['height']:_0x1b055f['height'],_0x271bce=_0x41d182['rect'];let _0x53c74a=Math['floor'](_0x271bce['x']*_0x3c0536),_0x1a4376=Math['floor'](_0x271bce['y']*_0x3ac007),_0x387a0e=Math['floor'](_0x271bce['z']*_0x3c0536),_0x105d74=Math['floor'](_0x271bce['w']*_0x3ac007);if(_0x1b055f['setViewpor'+'t'](_0x53c74a,_0x1a4376,_0x387a0e,_0x105d74),_0x41d182['_scissorRe'+'ctClear']){const _0x1a9186=_0x41d182['scissorRec'+'t'];_0x53c74a=Math['floor'](_0x1a9186['x']*_0x3c0536),_0x1a4376=Math['floor'](_0x1a9186['y']*_0x3ac007),_0x387a0e=Math['floor'](_0x1a9186['z']*_0x3c0536),_0x105d74=Math['floor'](_0x1a9186['w']*_0x3ac007);}_0x1b055f['setScissor'](_0x53c74a,_0x1a4376,_0x387a0e,_0x105d74);}['setCameraU'+'niforms'](_0x31bc1b,_0x23e73f){var _0x5de814,_0x3070a5;const _0x2fbb58=_0x23e73f==null?void(0x1193+-0x2306+-0x1173*-0x1):_0x23e73f['flipY'];let _0x5d7d75=null;if(_0x31bc1b['xr']&&_0x31bc1b['xr']['session']){const _0x4fce1b=((_0x3070a5=(_0x5de814=_0x31bc1b['_node'])==null?void(0x832+-0x680+-0x1b2):_0x5de814['parent'])==null?void(-0x6*-0xf6+-0x1f30+0x196c):_0x3070a5['getWorldTr'+'ansform']())||null;_0x5d7d75=_0x31bc1b['xr']['views']['list'];for(let _0x181edb=0x86*0x2a+-0x1*-0x17a3+0x2d9f*-0x1;_0x181edb<_0x5d7d75['length'];_0x181edb++){const _0x17f241=_0x5d7d75[_0x181edb];_0x17f241['updateTran'+'sforms'](_0x4fce1b),_0x31bc1b['frustum']['setFromMat'+'4'](_0x17f241['projViewOf'+'fMat']);}}else{let _0x530666=_0x31bc1b['projection'+'Matrix'];_0x31bc1b['calculateP'+'rojection']&&_0x31bc1b['calculateP'+'rojection'](_0x530666,ec);let _0x355c1b=_0x31bc1b['getProject'+'ionMatrixS'+'kybox']();_0x2fbb58&&(_0x530666=Hb['mul2'](j_,_0x530666),_0x355c1b=Wb['mul2'](j_,_0x355c1b)),this['device']['isWebGPU']&&(_0x530666=$b['mul2'](Y_,_0x530666),_0x355c1b=Xb['mul2'](Y_,_0x355c1b));const {jitter:_0x47481a}=_0x31bc1b;let _0x3f8c1a=0x2c*-0x9d+-0x5*0x541+0x3541,_0x10d0c2=0x1f0c+-0x7fe+0x1a*-0xe3;if(_0x47481a>-0x9*0x30b+-0x15e+-0x1*-0x1cc1){const _0x2e7f6e=_0x23e73f?_0x23e73f['width']:this['device']['width'],_0x2d483d=_0x23e73f?_0x23e73f['height']:this['device']['height'],_0xf29d89=K_[this['device']['renderVers'+'ion']%K_['length']];_0x3f8c1a=_0x47481a*(_0xf29d89['x']*(0x337*0x7+-0x71f*0x1+-0x1*0xf60)-(0x1*-0x121a+0x2546+0x7*-0x2bd))/_0x2e7f6e,_0x10d0c2=_0x47481a*(_0xf29d89['y']*(-0xd2e+0x18dd+-0xbad)-(0x1*0x1aa3+-0x1523+-0x57f))/_0x2d483d,_0x530666=qb['copy'](_0x530666),_0x530666['data'][0x809+-0x1*-0x221f+0x2*-0x1510]=_0x3f8c1a,_0x530666['data'][-0x2*-0x135b+0xe3d+-0x34ea]=_0x10d0c2,_0x355c1b=jb['copy'](_0x355c1b),_0x355c1b['data'][-0x2*0x139+-0x3*-0x5a3+-0x2e3*0x5]=_0x3f8c1a,_0x355c1b['data'][0x3*0x20b+-0x214b*-0x1+-0x2763]=_0x10d0c2,this['blueNoiseJ'+'itterVersi'+'on']!==this['device']['renderVers'+'ion']&&(this['blueNoiseJ'+'itterVersi'+'on']=this['device']['renderVers'+'ion'],this['blueNoise']['vec4'](this['blueNoiseJ'+'itterVec']));}const _0x3efbdd=_0x47481a>-0x45*-0x56+-0x1*0x1747+0x19?this['blueNoiseJ'+'itterVec']:re['ZERO'];if(this['blueNoiseJ'+'itterData'][-0x3f1+-0x22b7+-0x2*-0x1354]=_0x3efbdd['x'],this['blueNoiseJ'+'itterData'][0xcb*-0x17+0x789*-0x5+0x37eb]=_0x3efbdd['y'],this['blueNoiseJ'+'itterData'][-0x6a+-0x4d2+0x53e]=_0x3efbdd['z'],this['blueNoiseJ'+'itterData'][-0x135*-0x15+-0x21af+-0x1*-0x859]=_0x3efbdd['w'],this['blueNoiseJ'+'itterId']['setValue'](this['blueNoiseJ'+'itterData']),this['projId']['setValue'](_0x530666['data']),this['projSkybox'+'Id']['setValue'](_0x355c1b['data']),_0x31bc1b['calculateT'+'ransform'])_0x31bc1b['calculateT'+'ransform'](nr,ec);else{const _0x3d4305=_0x31bc1b['_node']['getPositio'+'n'](),_0x4aa00b=_0x31bc1b['_node']['getRotatio'+'n']();nr['setTRS'](_0x3d4305,_0x4aa00b,D['ONE']);}this['viewInvId']['setValue'](nr['data']),Oa['copy'](nr)['invert'](),this['viewId']['setValue'](Oa['data']),q_['setFromMat'+'4'](Oa),this['viewId3']['setValue'](q_['data']),ar['mul2'](_0x530666,Oa),this['viewProjId']['setValue'](ar['data']),_0x31bc1b['_storeShad'+'erMatrices'](ar,_0x3f8c1a,_0x10d0c2,this['device']['renderVers'+'ion']),this['flipYId']['setValue'](_0x2fbb58?-(0x9ca+-0x2009+-0x590*-0x4):-0x1087*0x1+0x14*0x1a1+-0x4f*0x34),this['dispatchVi'+'ewPos'](_0x31bc1b['_node']['getPositio'+'n']()),_0x31bc1b['frustum']['setFromMat'+'4'](ar);}this['tbnBasis']['setValue'](_0x2fbb58?-(0x1c2b+-0x4e9+-0x1*0x1741):-0x1868+-0x139*-0x11+-0x3a0*-0x1);const _0x4f8208=_0x31bc1b['_nearClip'],_0x5559c2=_0x31bc1b['_farClip'];return this['nearClipId']['setValue'](_0x4f8208),this['farClipId']['setValue'](_0x5559c2),this['cameraPara'+'ms'][-0x65*-0x53+0x1f*0x134+-0x460b]=(0x78d*0x4+0x7+-0x1e3a)/_0x5559c2,this['cameraPara'+'ms'][0x2*0x243+-0x116d+0xce8]=_0x5559c2,this['cameraPara'+'ms'][-0x224d+0x414+0x1e3b]=_0x4f8208,this['cameraPara'+'ms'][0x55a+0x17df+-0xe9b*0x2]=_0x31bc1b['projection']===En?-0x17*0xc1+-0x6d9+0x1831:-0x4*0x33+-0x1468+0x1534,this['cameraPara'+'msId']['setValue'](this['cameraPara'+'ms']),this['exposureId']['setValue'](this['scene']['physicalUn'+'its']?_0x31bc1b['getExposur'+'e']():this['scene']['exposure']),_0x5d7d75;}['clear'](_0x5bfd3e,_0x38ff0b,_0x268322,_0x275cac){const _0x4e01ed=(_0x38ff0b??_0x5bfd3e['_clearColo'+'rBuffer']?jo:0x1132+-0x22a2+0x1170)|(_0x268322??_0x5bfd3e['_clearDept'+'hBuffer']?Yo:0x2de*0x9+-0x14c0+-0x50e)|(_0x275cac??_0x5bfd3e['_clearSten'+'cilBuffer']?ch:-0x50*-0xd+-0x42*0x1f+-0x1f7*-0x2);if(_0x4e01ed){const _0x534dcb=this['device'];Q['pushGpuMar'+'ker'](_0x534dcb,'CLEAR'),_0x534dcb['clear']({'color':[_0x5bfd3e['_clearColo'+'r']['r'],_0x5bfd3e['_clearColo'+'r']['g'],_0x5bfd3e['_clearColo'+'r']['b'],_0x5bfd3e['_clearColo'+'r']['a']],'depth':_0x5bfd3e['_clearDept'+'h'],'stencil':_0x5bfd3e['_clearSten'+'cil'],'flags':_0x4e01ed}),Q['popGpuMark'+'er'](_0x534dcb);}}['setCamera'](_0x433762,_0x47ada0,_0x40bb41,_0x5ebe56=null){this['setCameraU'+'niforms'](_0x433762,_0x47ada0),this['clearView'](_0x433762,_0x47ada0,_0x40bb41,!(0x93+-0x124+0x92*0x1));}['clearView'](_0x2ede31,_0x1a1c42,_0xc9b921,_0x3d9a58){const _0x200b32=this['device'];if(Q['pushGpuMar'+'ker'](_0x200b32,'CLEAR-VIEW'),_0x200b32['setRenderT'+'arget'](_0x1a1c42),_0x200b32['updateBegi'+'n'](),_0x3d9a58&&(_0x200b32['setColorWr'+'ite'](!(0x13b8+-0x28d+-0x1*0x112b),!(-0x19*-0x61+0x3cb+-0x6*0x236),!(0x2664+-0xc7a+0x1f*-0xd6),!(0x49f*0x7+0x1f28+0x1*-0x3f81)),_0x200b32['setDepthWr'+'ite'](!(0x5e*-0x4+0x2156+-0x2*0xfef))),this['setupViewp'+'ort'](_0x2ede31,_0x1a1c42),_0xc9b921){const _0x49d0b4=_0x2ede31['_clearOpti'+'ons'];_0x200b32['clear'](_0x49d0b4||{'color':[_0x2ede31['_clearColo'+'r']['r'],_0x2ede31['_clearColo'+'r']['g'],_0x2ede31['_clearColo'+'r']['b'],_0x2ede31['_clearColo'+'r']['a']],'depth':_0x2ede31['_clearDept'+'h'],'flags':(_0x2ede31['_clearColo'+'rBuffer']?jo:-0x13ff*-0x1+0x13a0+-0xd35*0x3)|(_0x2ede31['_clearDept'+'hBuffer']?Yo:0x141+-0xf1f+0x47*0x32)|(_0x2ede31['_clearSten'+'cilBuffer']?ch:0x135*0x1+-0x23*0x101+0x21ee),'stencil':_0x2ede31['_clearSten'+'cil']});}Q['popGpuMark'+'er'](_0x200b32);}['setupCullM'+'ode'](_0x2d2882,_0x2fdc5d,_0x1aded1){const _0xa4e4e0=_0x1aded1['material'];let _0x14fa16=bt;if(_0x2d2882){let _0x4227c8=0xfb*0xc+0x736+-0x12f9;(_0xa4e4e0['cull']===Fo||_0xa4e4e0['cull']===pa)&&(_0x4227c8=_0x2fdc5d*_0x1aded1['flipFacesF'+'actor']*_0x1aded1['node']['worldScale'+'Sign']),_0x4227c8<0x1caa+-0x135c+-0x2*0x4a7?_0x14fa16=_0xa4e4e0['cull']===Fo?pa:Fo:_0x14fa16=_0xa4e4e0['cull'];}this['device']['setCullMod'+'e'](_0x14fa16),_0x14fa16===bt&&_0xa4e4e0['cull']===bt&&this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](_0x1aded1['node']['worldScale'+'Sign']);}['updateCame'+'raFrustum'](_0x5c720d){if(_0x5c720d['xr']&&_0x5c720d['xr']['views']['list']['length']){const _0x9cf6e3=_0x5c720d['xr']['views']['list'][0xffb+-0x1f*-0xae+0x7*-0x54b];ar['mul2'](_0x9cf6e3['projMat'],_0x9cf6e3['viewOffMat']),_0x5c720d['frustum']['setFromMat'+'4'](ar);return;}const _0x296fbd=_0x5c720d['projection'+'Matrix'];if(_0x5c720d['calculateP'+'rojection']&&_0x5c720d['calculateP'+'rojection'](_0x296fbd,ec),_0x5c720d['calculateT'+'ransform'])_0x5c720d['calculateT'+'ransform'](nr,ec);else{const _0x1fd0e0=_0x5c720d['_node']['getPositio'+'n'](),_0x5bd508=_0x5c720d['_node']['getRotatio'+'n']();nr['setTRS'](_0x1fd0e0,_0x5bd508,D['ONE']),this['viewInvId']['setValue'](nr['data']);}Oa['copy'](nr)['invert'](),ar['mul2'](_0x296fbd,Oa),_0x5c720d['frustum']['setFromMat'+'4'](ar);}['setBaseCon'+'stants'](_0x217b99,_0x42e6ce){_0x217b99['setCullMod'+'e'](_0x42e6ce['cull']),_0x42e6ce['opacityMap']&&this['opacityMap'+'Id']['setValue'](_0x42e6ce['opacityMap']),(_0x42e6ce['opacityMap']||_0x42e6ce['alphaTest']>0x964+0x311+0x427*-0x3)&&this['alphaTestI'+'d']['setValue'](_0x42e6ce['alphaTest']);}['updateCpuS'+'kinMatrice'+'s'](_0xe59a22){nf++;const _0x21bcd9=_0xe59a22['length'];if(_0x21bcd9===-0x25af+-0x344*-0x2+-0x2d5*-0xb)return;const _0x1bc370=de();for(let _0x2adecc=-0x63a+-0x195*-0x6+-0x344;_0x2adecc<_0x21bcd9;_0x2adecc++){const _0x5d6a2c=_0xe59a22[_0x2adecc]['skinInstan'+'ce'];_0x5d6a2c&&(_0x5d6a2c['updateMatr'+'ices'](_0xe59a22[_0x2adecc]['node'],nf),_0x5d6a2c['_dirty']=!(0x1628+0x2458+-0x3a80));}this['_skinTime']+=de()-_0x1bc370;}['updateGpuS'+'kinMatrice'+'s'](_0x20d1b0){const _0x4dd44c=de();for(const _0x1d1b1d of _0x20d1b0){const _0x361ecf=_0x1d1b1d['skinInstan'+'ce'];_0x361ecf&&_0x361ecf['_dirty']&&(_0x361ecf['updateMatr'+'ixPalette'](_0x1d1b1d['node'],nf),_0x361ecf['_dirty']=!(0xcab+0x8ab*-0x2+0x2e*0x1a));}this['_skinTime']+=de()-_0x4dd44c;}['updateMorp'+'hing'](_0x34fc2b){const _0x440748=de();for(const _0x4a780e of _0x34fc2b){const _0x5f461f=_0x4a780e['morphInsta'+'nce'];_0x5f461f&&_0x5f461f['_dirty']&&_0x5f461f['update']();}this['_morphTime']+=de()-_0x440748;}['updateGSpl'+'ats'](_0x408153){var _0x570fe8;for(const _0x2d36fe of _0x408153)(_0x570fe8=_0x2d36fe['gsplatInst'+'ance'])==null||_0x570fe8['update']();}['gpuUpdate'](_0x1698b0){this['updateGpuS'+'kinMatrice'+'s'](_0x1698b0),this['updateMorp'+'hing'](_0x1698b0),this['updateGSpl'+'ats'](_0x1698b0);}['setVertexB'+'uffers'](_0x209730,_0x24d852){_0x209730['setVertexB'+'uffer'](_0x24d852['vertexBuff'+'er']);}['setMorphin'+'g'](_0x5844dd,_0x1bfe1d){_0x1bfe1d&&(_0x1bfe1d['prepareRen'+'dering'](_0x5844dd),_0x5844dd['setVertexB'+'uffer'](_0x1bfe1d['morph']['vertexBuff'+'erIds']),this['morphPosit'+'ionTex']['setValue'](_0x1bfe1d['texturePos'+'itions']),this['morphNorma'+'lTex']['setValue'](_0x1bfe1d['textureNor'+'mals']),this['morphTexPa'+'rams']['setValue'](_0x1bfe1d['_texturePa'+'rams']));}['setSkinnin'+'g'](_0x4a5105,_0xbc1e85){const _0x2f8135=_0xbc1e85['skinInstan'+'ce'];if(_0x2f8135){this['_skinDrawC'+'alls']++;const _0x26c37c=_0x2f8135['boneTextur'+'e'];this['boneTextur'+'eId']['setValue'](_0x26c37c);}}['dispatchVi'+'ewPos'](_0xa9c7d7){const _0x322177=this['viewPos'];_0x322177[0xde1*-0x1+0x19c*-0x14+0x2e11]=_0xa9c7d7['x'],_0x322177[0x21bf+-0xa3*0x19+0x3*-0x5f1]=_0xa9c7d7['y'],_0x322177[0x3*0x369+-0x43*0xc+0x1*-0x715]=_0xa9c7d7['z'],this['viewPosId']['setValue'](_0x322177);}['initViewBi'+'ndGroupFor'+'mat'](_0x2e2273){if(this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']){const _0x505b1e=[new dt('matrix_vie'+'w',li),new dt('matrix_vie'+'wInverse',li),new dt('matrix_pro'+'jection',li),new dt('matrix_pro'+'jectionSky'+'box',li),new dt('matrix_vie'+'wProjectio'+'n',li),new dt('matrix_vie'+'w3',On),new dt('cubeMapRot'+'ationMatri'+'x',On),new dt('view_posit'+'ion',ds),new dt('skyboxInte'+'nsity',Xs),new dt('exposure',Xs),new dt('textureBia'+'s',Xs),new dt('view_index',Xs)];_0x2e2273&&_0x505b1e['push'](new dt('clusterCel'+'lsCountByB'+'oundsSize',ds),new dt('clusterTex'+'tureSize',ds),new dt('clusterBou'+'ndsMin',ds),new dt('clusterBou'+'ndsDelta',ds),new dt('clusterCel'+'lsDot',ds),new dt('clusterCel'+'lsMax',ds),new dt('shadowAtla'+'sParams',ga),new dt('clusterMax'+'Cells',_a),new dt('clusterSki'+'p',Xs)),this['viewUnifor'+'mFormat']=new zy(this['device'],_0x505b1e);const _0x562bc9=[new kp(Np,Fp|by)];this['viewBindGr'+'oupFormat']=new Ny(this['device'],_0x562bc9);}}['setupViewU'+'niforms'](_0x3cf96e,_0x3fd093){this['projId']['setValue'](_0x3cf96e['projMat']['data']),this['projSkybox'+'Id']['setValue'](_0x3cf96e['projMat']['data']),this['viewId']['setValue'](_0x3cf96e['viewOffMat']['data']),this['viewInvId']['setValue'](_0x3cf96e['viewInvOff'+'Mat']['data']),this['viewId3']['setValue'](_0x3cf96e['viewMat3']['data']),this['viewProjId']['setValue'](_0x3cf96e['projViewOf'+'fMat']['data']),this['viewPosId']['setValue'](_0x3cf96e['positionDa'+'ta']),this['viewIndexI'+'d']['setValue'](_0x3fd093);}['setupViewU'+'niformBuff'+'ers'](_0x2578b4,_0x13a19a,_0x24b1f9,_0x23a854){w['assert'](Array['isArray'](_0x2578b4),'viewBindGr'+'oups\x20must\x20'+'be\x20an\x20arra'+'y');const {device:_0x3eea7d}=this,_0x388664=(_0x23a854==null?void(-0x1ee7+-0x1a*0x1+0x1f01):_0x23a854['length'])??-0x1c9*0x3+-0x16d2+0x1c2e;for(;_0x2578b4['length']<_0x388664;){const _0x5c20d5=new zp(_0x3eea7d,_0x13a19a,!(0x164a+0x235e+0x39a7*-0x1)),_0x42d034=new Up(_0x3eea7d,_0x24b1f9,_0x5c20d5);Ea['setName'](_0x42d034,'ViewBindGr'+'oup_'+_0x42d034['id']),_0x2578b4['push'](_0x42d034);}if(_0x23a854)for(let _0x1a4711=0x1fde+-0xe*0x2c8+0x712;_0x1a4711<_0x388664;_0x1a4711++){const _0x469368=_0x23a854[_0x1a4711];this['setupViewU'+'niforms'](_0x469368,_0x1a4711);const _0x5bc793=_0x2578b4[_0x1a4711];_0x5bc793['defaultUni'+'formBuffer']['update'](),_0x5bc793['update']();}else{const _0x4f823a=_0x2578b4[-0x22eb*0x1+0x15c5+0xd26];_0x4f823a['defaultUni'+'formBuffer']['update'](),_0x4f823a['update']();}_0x23a854||_0x3eea7d['setBindGro'+'up'](rl,_0x2578b4[0xc56+-0x1b10+-0xa*-0x179]);}['setupMeshU'+'niformBuff'+'ers'](_0x5b846b){const _0x4ac9f4=this['device'];if(_0x4ac9f4['supportsUn'+'iformBuffe'+'rs']){const _0x1a4573=_0x5b846b['getBindGro'+'up'](_0x4ac9f4);_0x1a4573['update'](),_0x4ac9f4['setBindGro'+'up'](Oy,_0x1a4573),_0x5b846b['getUniform'+'Buffer'](_0x4ac9f4)['update'](hf),_0x4ac9f4['setBindGro'+'up'](su,hf['bindGroup'],hf['offsets']);}}['setMeshIns'+'tanceMatri'+'ces'](_0x7def57,_0x39dc55=!(-0x1ac2+0x125*-0x7+0x22c6)){const _0x27d855=_0x7def57['node']['worldTrans'+'form'];this['modelMatri'+'xId']['setValue'](_0x27d855['data']),_0x39dc55&&this['normalMatr'+'ixId']['setValue'](_0x7def57['node']['normalMatr'+'ix']['data']);}['cull'](_0x1c8dd9,_0xe6bc20,_0x34c53b){const _0x28e9d3=de(),_0x3c0d91=_0x34c53b['opaque'];_0x3c0d91['length']=0x20ba+-0x2069+-0x9*0x9;const _0x216294=_0x34c53b['transparen'+'t'];_0x216294['length']=-0x2519+-0xb29*-0x1+0x19f0;const _0x5186de=_0x1c8dd9['frustumCul'+'ling'],_0x25840b=_0xe6bc20['length'];for(let _0x1ccd61=-0xd80+0x153c+-0x3*0x294;_0x1ccd61<_0x25840b;_0x1ccd61++){const _0x375ab6=_0xe6bc20[_0x1ccd61];_0x375ab6['visible']&&(!_0x5186de||!_0x375ab6['cull']||_0x375ab6['_isVisible'](_0x1c8dd9))&&(_0x375ab6['visibleThi'+'sFrame']=!(-0x3c1+0x943*0x2+-0xc7*0x13),(_0x375ab6['transparen'+'t']?_0x216294:_0x3c0d91)['push'](_0x375ab6),(_0x375ab6['skinInstan'+'ce']||_0x375ab6['morphInsta'+'nce']||_0x375ab6['gsplatInst'+'ance'])&&(this['processing'+'MeshInstan'+'ces']['add'](_0x375ab6),_0x375ab6['gsplatInst'+'ance']&&_0x375ab6['gsplatInst'+'ance']['cameras']['push'](_0x1c8dd9)));}this['_cullTime']+=de()-_0x28e9d3,this['_numDrawCa'+'llsCulled']+=_0x5186de?_0x25840b:-0x6e7+-0x3*0x3ce+0x1251;}['collectLig'+'hts'](_0x45d849){this['lights']['length']=-0xd82+0x8d+0x1*0xcf5,this['localLight'+'s']['length']=-0x5*0x1a5+0x5c3+0x276;const _0x35093c=this['scene']['_stats'];_0x35093c['dynamicLig'+'hts']=-0x9dc+-0x56f*0x6+0x2a76,_0x35093c['bakedLight'+'s']=-0x1f5a+0x2*-0x857+-0x8*-0x601;const _0x14cd07=_0x45d849['layerList']['length'];for(let _0x29143c=-0xa*0x19+-0x136*-0x17+-0x2b*0xa0;_0x29143c<_0x14cd07;_0x29143c++){const _0xf70f8b=_0x45d849['layerList'][_0x29143c];if(!cf['has'](_0xf70f8b)){cf['add'](_0xf70f8b);const _0x4c24d3=_0xf70f8b['_lights'];for(let _0x59da4a=-0x20a4+-0x1374+0x8*0x683;_0x59da4a<_0x4c24d3['length'];_0x59da4a++){const _0x15c6d1=_0x4c24d3[_0x59da4a];lf['has'](_0x15c6d1)||(lf['add'](_0x15c6d1),this['lights']['push'](_0x15c6d1),_0x15c6d1['_type']!==ve&&this['localLight'+'s']['push'](_0x15c6d1),(_0x15c6d1['mask']&Ss||_0x15c6d1['mask']&di)&&_0x35093c['dynamicLig'+'hts']++,_0x15c6d1['mask']&fi&&_0x35093c['bakedLight'+'s']++);}}}_0x35093c['lights']=this['lights']['length'],lf['clear'](),cf['clear']();}['cullLights'](_0x732736,_0x311773){const _0x278b4c=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x1dcb6a=this['scene']['physicalUn'+'its'];for(let _0x44b692=-0x26d8+-0x237a+-0x38a*-0x15;_0x44b692<_0x311773['length'];_0x44b692++){const _0x52f277=_0x311773[_0x44b692];if(_0x52f277['enabled']){if(_0x52f277['_type']!==ve){if(_0x52f277['getBoundin'+'gSphere'](of),_0x732736['frustum']['containsSp'+'here'](of)){_0x52f277['visibleThi'+'sFrame']=!(0x559*-0x5+-0x95b+0x2418),_0x52f277['usePhysica'+'lUnits']=_0x1dcb6a;const _0x51a744=_0x732736['getScreenS'+'ize'](of);_0x52f277['maxScreenS'+'ize']=Math['max'](_0x52f277['maxScreenS'+'ize'],_0x51a744);}else _0x278b4c||_0x52f277['castShadow'+'s']&&!_0x52f277['shadowMap']&&(_0x52f277['visibleThi'+'sFrame']=!(-0x106b+-0x8*0x21d+0x2153));}else _0x52f277['usePhysica'+'lUnits']=this['scene']['physicalUn'+'its'];}}}['cullShadow'+'maps'](_0x2ad344){const _0x8ae5a5=this['scene']['clusteredL'+'ightingEna'+'bled'];for(let _0x5c33c3=0x2a0+-0x55b*-0x7+-0x1e9*0x15;_0x5c33c3<this['localLight'+'s']['length'];_0x5c33c3++){const _0x50c413=this['localLight'+'s'][_0x5c33c3];_0x50c413['_type']!==ve&&(_0x8ae5a5?_0x50c413['atlasSlotU'+'pdated']&&_0x50c413['shadowUpda'+'teMode']===Ps&&(_0x50c413['shadowUpda'+'teMode']=xr):_0x50c413['shadowUpda'+'teMode']===Ps&&_0x50c413['castShadow'+'s']&&(_0x50c413['getRenderD'+'ata'](null,0x1*-0x144b+0x2144+-0xcf9)['shadowCame'+'ra']['renderTarg'+'et']||(_0x50c413['shadowUpda'+'teMode']=xr)),_0x50c413['visibleThi'+'sFrame']&&_0x50c413['castShadow'+'s']&&_0x50c413['shadowUpda'+'teMode']!==Ps&&this['_shadowRen'+'dererLocal']['cull'](_0x50c413,_0x2ad344));}this['cameraDirS'+'hadowLight'+'s']['clear']();const _0x461539=_0x2ad344['cameras'];for(let _0x2873e2=-0x107e+0x1*0x1265+0x1*-0x1e7;_0x2873e2<_0x461539['length'];_0x2873e2++){const _0x1c96de=_0x461539[_0x2873e2];if(_0x1c96de['enabled']){const _0x470936=_0x1c96de['camera'];let _0x25521c;const _0x4431ac=_0x470936['layers'];for(let _0x17851f=-0x113+-0x11b5+-0x964*-0x2;_0x17851f<_0x4431ac['length'];_0x17851f++){const _0x17fa31=_0x2ad344['getLayerBy'+'Id'](_0x4431ac[_0x17851f]);if(_0x17fa31){const _0x5abf7d=_0x17fa31['splitLight'+'s'][ve];for(let _0xca1bd5=-0x55b+-0x13f4+0x194f;_0xca1bd5<_0x5abf7d['length'];_0xca1bd5++){const _0x53b6d2=_0x5abf7d[_0xca1bd5];_0x53b6d2['castShadow'+'s']&&!Fa['has'](_0x53b6d2)&&(Fa['add'](_0x53b6d2),_0x25521c=_0x25521c??[],_0x25521c['push'](_0x53b6d2),this['_shadowRen'+'dererDirec'+'tional']['cull'](_0x53b6d2,_0x2ad344,_0x470936));}}}_0x25521c&&this['cameraDirS'+'hadowLight'+'s']['set'](_0x470936,_0x25521c),Fa['clear']();}}}['cullCompos'+'ition'](_0x472f8b){const _0x4f1181=de(),{scene:_0x327dc8}=this;this['processing'+'MeshInstan'+'ces']['clear']();const _0x9af86f=_0x472f8b['cameras']['length'];this['_camerasRe'+'ndered']+=_0x9af86f;for(let _0x39c953=-0x2360+0x1a72+-0x1*-0x8ee;_0x39c953<_0x9af86f;_0x39c953++){const _0x11dfdd=_0x472f8b['cameras'][_0x39c953];_0x327dc8==null||_0x327dc8['fire'](mv,_0x11dfdd);const _0x4529ad=_0x11dfdd['renderTarg'+'et'];_0x11dfdd['frameUpdat'+'e'](_0x4529ad),this['updateCame'+'raFrustum'](_0x11dfdd['camera']);const _0x15c643=_0x11dfdd['layers'];for(let _0x4c3cea=-0x1*-0x10c9+-0x7f0+-0x8d9;_0x4c3cea<_0x15c643['length'];_0x4c3cea++){const _0xef2346=_0x472f8b['getLayerBy'+'Id'](_0x15c643[_0x4c3cea]);if(_0xef2346&&_0xef2346['enabled']){this['cullLights'](_0x11dfdd['camera'],_0xef2346['_lights']);const _0x56d086=_0xef2346['getCulledI'+'nstances'](_0x11dfdd['camera']);this['cull'](_0x11dfdd['camera'],_0xef2346['meshInstan'+'ces'],_0x56d086);}}_0x327dc8==null||_0x327dc8['fire'](_v,_0x11dfdd);}_0x327dc8['clusteredL'+'ightingEna'+'bled']&&this['updateLigh'+'tTextureAt'+'las'](),this['cullShadow'+'maps'](_0x472f8b),_0x327dc8==null||_0x327dc8['fire'](lE),this['_cullTime']+=de()-_0x4f1181;}['updateShad'+'ers'](_0x58cd75,_0x1e5b90){const _0x417a54=_0x58cd75['length'];for(let _0x48d99f=-0x1*-0x23ce+0x1*-0x1421+-0xfad;_0x48d99f<_0x417a54;_0x48d99f++){const _0x21b5f4=_0x58cd75[_0x48d99f]['material'];if(_0x21b5f4&&!Fa['has'](_0x21b5f4)&&(Fa['add'](_0x21b5f4),_0x21b5f4['getShaderV'+'ariant']!==tr['prototype']['getShaderV'+'ariant'])){if(_0x1e5b90&&(!_0x21b5f4['useLightin'+'g']||_0x21b5f4['emitter']&&!_0x21b5f4['emitter']['lighting']))continue;_0x21b5f4['clearVaria'+'nts']();}}Fa['clear']();}['updateFram'+'eUniforms'](){this['blueNoiseT'+'extureId']['setValue'](Pb(this['device']));}['beginFrame'](_0x34d9c2){const _0x2a3f35=this['scene'],_0x376314=_0x2a3f35['updateShad'+'ers']||this['device']['_shadersDi'+'rty'];let _0x4e7516=0x27f+0x2523+-0x27a2;const _0x2e5e5d=_0x34d9c2['layerList'],_0x55861f=_0x2e5e5d['length'];for(let _0x410f01=0x6*-0x25+-0xd07+0xde5;_0x410f01<_0x55861f;_0x410f01++){const _0x50a88d=_0x2e5e5d[_0x410f01]['meshInstan'+'ces'],_0x1b7682=_0x50a88d['length'];_0x4e7516+=_0x1b7682;for(let _0x42ef5=0x1a7+-0x200e+0x1e67;_0x42ef5<_0x1b7682;_0x42ef5++){const _0x31ec67=_0x50a88d[_0x42ef5];_0x31ec67['visibleThi'+'sFrame']=!(-0xcd+0x1fe7+0x13*-0x1a3),_0x376314&&df['push'](_0x31ec67),_0x31ec67['skinInstan'+'ce']&&ff['push'](_0x31ec67);}}if(_0x2a3f35['_stats']['meshInstan'+'ces']=_0x4e7516,_0x376314){const _0x4e8ad3=!_0x2a3f35['updateShad'+'ers']||!this['device']['_shadersDi'+'rty'];this['updateShad'+'ers'](df,_0x4e8ad3),_0x2a3f35['updateShad'+'ers']=!(0x1*0x892+-0x13de+0xb*0x107),this['device']['_shadersDi'+'rty']=!(-0x9b2+0x2503+-0x1b50),_0x2a3f35['_shaderVer'+'sion']++;}this['updateFram'+'eUniforms'](),this['updateCpuS'+'kinMatrice'+'s'](ff),df['length']=0x2c*0x9d+0x4db+0x2e5*-0xb,ff['length']=-0x102+-0x7*0x233+-0x11*-0xf7;const _0x464bd=this['lights'],_0x210992=_0x464bd['length'];for(let _0x293d81=-0x658+-0x1374+-0x19cc*-0x1;_0x293d81<_0x210992;_0x293d81++)_0x464bd[_0x293d81]['beginFrame']();}['updateLigh'+'tTextureAt'+'las'](){this['lightTextu'+'reAtlas']['update'](this['localLight'+'s'],this['scene']['lighting']);}['updateLaye'+'rCompositi'+'on'](_0x530569){const _0x3f91bd=de(),_0x7e7e42=_0x530569['layerList']['length'],_0x465f0a=this['scene']['_shaderVer'+'sion'];for(let _0xf2858c=0x1448+-0xd9*0xb+-0xaf5;_0xf2858c<_0x7e7e42;_0xf2858c++){const _0x538cc3=_0x530569['layerList'][_0xf2858c];_0x538cc3['_shaderVer'+'sion']=_0x465f0a,_0x538cc3['_skipRende'+'rCounter']=-0x26e2+-0x1921+0x4003,_0x538cc3['_forwardDr'+'awCalls']=0x5a2+-0xbbc*0x3+0x5ea*0x5,_0x538cc3['_shadowDra'+'wCalls']=-0x3*-0x1c1+0x1f6d+0x2*-0x1258,_0x538cc3['_renderTim'+'e']=0x14d*0x3+0xc89*0x1+-0x1070;}_0x530569['_update'](),this['_layerComp'+'ositionUpd'+'ateTime']+=de()-_0x3f91bd;}['frameUpdat'+'e'](){this['clustersDe'+'bugRendere'+'d']=!(-0x132*0x13+-0x1aad+-0x4*-0xc59),this['initViewBi'+'ndGroupFor'+'mat'](this['scene']['clusteredL'+'ightingEna'+'bled']),this['dirLightSh'+'adows']['clear']();}}class Pv{constructor(){h(this,'camera',null),(this['layer']=null,this['transparen'+'t']=!(0xb0*0x4+-0x147c+0x11bd),this['renderTarg'+'et']=null,this['lightClust'+'ers']=null,this['clearColor']=!(-0xf44+-0x1*-0x975+0x5d0),this['clearDepth']=!(0x250*-0x10+0x1*-0x5d+0x255e),this['clearStenc'+'il']=!(-0x1e45+0x3*-0x236+-0x93a*-0x4),this['triggerPos'+'tprocess']=!(-0x1*-0x775+-0x355+-0x5*0xd3),this['firstCamer'+'aUse']=!(0x1*0x86b+-0x17*0x143+0x149b),this['lastCamera'+'Use']=!(0x169+0x15c1+-0x1729),this['viewBindGr'+'oups']=[],this['useCameraP'+'asses']=!(0x2aa+0x97*0x1f+-0x17f*0xe));}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x2ee824=>{_0x2ee824['defaultUni'+'formBuffer']['destroy'](),_0x2ee824['destroy']();}),this['viewBindGr'+'oups']['length']=-0x16aa+-0x39*0x7f+0x32f1;}['setupClear'+'s'](_0x70397e,_0x300af3){this['clearColor']=(_0x70397e==null?void(0x1d*0xcf+-0x861+-0xf12):_0x70397e['clearColor'+'Buffer'])||_0x300af3['clearColor'+'Buffer'],this['clearDepth']=(_0x70397e==null?void(0x33*0x55+0x3*-0x975+0xb70):_0x70397e['clearDepth'+'Buffer'])||_0x300af3['clearDepth'+'Buffer'],this['clearStenc'+'il']=(_0x70397e==null?void(0x553+-0x36d+-0x1e6):_0x70397e['clearStenc'+'ilBuffer'])||_0x300af3['clearStenc'+'ilBuffer'];}}class Kb extends ys{constructor(_0x52c89a,_0x2eea72,_0x6c35d7,_0x2845c6){super(_0x52c89a),h(this,'layerCompo'+'sition'),h(this,'scene'),h(this,'renderer'),h(this,'renderActi'+'ons',[]),h(this,'gammaCorre'+'ction'),h(this,'toneMappin'+'g'),h(this,'noDepthCle'+'ar',!(0x7*-0x541+-0x1e7c+0x7b*0x8c)),(this['layerCompo'+'sition']=_0x2eea72,this['scene']=_0x6c35d7,this['renderer']=_0x2845c6);}get['rendersAny'+'thing'](){return this['renderActi'+'ons']['length']>0x5e9+0x1551+0x2b9*-0xa;}['addRenderA'+'ction'](_0x4e8e29){this['renderActi'+'ons']['push'](_0x4e8e29);}['addLayer'](_0x5e09c2,_0x5709ca,_0x8c1db3,_0x4e83fd=!(-0xc89+-0x27*0xdf+0x2*0x1741)){w['assert'](_0x5e09c2),w['assert'](this['renderTarg'+'et']!==void(-0xc*-0x2fc+0x25ce*-0x1+0xf*0x22),'Render\x20pas'+'s\x20needs\x20to'+'\x20be\x20initia'+'lized\x20befo'+'re\x20adding\x20'+'layers'),w['assert'](_0x5e09c2['camera']['layersSet']['has'](_0x5709ca['id']),'Camera\x20'+_0x5e09c2['entity']['name']+('\x20does\x20not\x20'+'render\x20lay'+'er\x20')+_0x5709ca['name']+'.');const _0x3f76cf=new Pv();if(_0x3f76cf['renderTarg'+'et']=this['renderTarg'+'et'],_0x3f76cf['camera']=_0x5e09c2,_0x3f76cf['layer']=_0x5709ca,_0x3f76cf['transparen'+'t']=_0x8c1db3,_0x4e83fd){const _0x4635dd=this['renderActi'+'ons']['length']===0x1*0xd0f+0x2611+-0x10*0x332;_0x3f76cf['setupClear'+'s'](_0x4635dd?_0x5e09c2:void(-0x2323+-0xc1*0x3+0x2566),_0x5709ca);}this['addRenderA'+'ction'](_0x3f76cf);}['addLayers'](_0x4a9491,_0x4565c1,_0x252534,_0x1e24a3,_0x330aec,_0x35cefc=!(-0x1f42+0x10fd+-0x1*-0xe45)){const {layerList:_0x5eee06,subLayerList:_0x5cbcfc}=_0x4a9491;let _0x1f71d8=_0x1e24a3,_0x1d9bfc=_0x252534;for(;_0x1d9bfc<_0x5eee06['length'];){const _0x553301=_0x5eee06[_0x1d9bfc],_0x332d57=_0x5cbcfc[_0x1d9bfc];if(_0x4565c1['camera']['layersSet']['has'](_0x553301['id'])&&(this['addLayer'](_0x4565c1,_0x553301,_0x332d57,_0x1f71d8),_0x1f71d8=!(-0x17*-0xad+0x3*0x215+-0x15c9)),_0x1d9bfc++,_0x553301['id']===_0x330aec&&_0x332d57===_0x35cefc)break;}return _0x1d9bfc;}['updateDire'+'ctionalSha'+'dows'](){const {renderer:_0x4af85a,renderActions:_0x2445b3}=this;for(let _0x1e2da2=0xd*-0x1be+-0x1*0xa67+-0x1*-0x210d;_0x1e2da2<_0x2445b3['length'];_0x1e2da2++){const _0xaedda7=_0x2445b3[_0x1e2da2]['camera']['camera'],_0x55e526=this['renderer']['cameraDirS'+'hadowLight'+'s']['get'](_0xaedda7);if(_0x55e526)for(let _0x1da418=-0x12f*-0x13+0x97e+-0x1ffb;_0x1da418<_0x55e526['length'];_0x1da418++){const _0x2845de=_0x55e526[_0x1da418];if(_0x4af85a['dirLightSh'+'adows']['get'](_0x2845de)!==_0xaedda7){_0x4af85a['dirLightSh'+'adows']['set'](_0x2845de,_0xaedda7);const _0x4d7450=_0x4af85a['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x2845de,_0xaedda7);_0x4d7450&&this['beforePass'+'es']['push'](_0x4d7450);}}}}['updateClea'+'rs'](){const _0x26e803=this['renderActi'+'ons'][0x76d*-0x5+0x950+0x1bd1];if(_0x26e803){const _0x1fa488=_0x26e803['camera']['camera'],_0x43fdbe=_0x1fa488['fullSizeCl'+'earRect'];this['setClearCo'+'lor'](_0x43fdbe&&_0x26e803['clearColor']?_0x1fa488['clearColor']:void(0x11a7*0x2+0x3*0xb85+-0x1*0x45dd)),this['setClearDe'+'pth'](_0x43fdbe&&_0x26e803['clearDepth']&&!this['noDepthCle'+'ar']?_0x1fa488['clearDepth']:void(0x314+-0x23a6+-0x1049*-0x2)),this['setClearSt'+'encil'](_0x43fdbe&&_0x26e803['clearStenc'+'il']?_0x1fa488['clearStenc'+'il']:void(-0x2494*-0x1+-0x1b9d*-0x1+-0x4031));}}['frameUpdat'+'e'](){super['frameUpdat'+'e'](),this['updateDire'+'ctionalSha'+'dows'](),this['updateClea'+'rs']();}['before'](){const {renderActions:_0x49e168}=this;for(let _0x1f4ea2=-0x39f*0x5+0x1*-0x240d+0x3628;_0x1f4ea2<_0x49e168['length'];_0x1f4ea2++){const _0x50c882=_0x49e168[_0x1f4ea2];_0x50c882['firstCamer'+'aUse']&&this['scene']['fire'](rE,_0x50c882['camera']);}}['execute'](){const {layerComposition:_0x33cf9a,renderActions:_0x1813fa}=this;for(let _0x4e13d4=0x27b*-0xb+-0x2655*-0x1+0x194*-0x7;_0x4e13d4<_0x1813fa['length'];_0x4e13d4++){const _0x5687b9=_0x1813fa[_0x4e13d4],_0x3b567c=_0x5687b9['layer'];w['call'](()=>{_0x33cf9a['getLayerBy'+'Name'](_0x3b567c['name'])||w['warnOnce']('Layer\x20'+_0x3b567c['name']+('\x20is\x20not\x20fo'+'und\x20in\x20the'+'\x20scene\x20and'+'\x20will\x20not\x20'+'be\x20rendere'+'d.\x20Your\x20re'+'nder\x20pass\x20'+'setup\x20migh'+'t\x20need\x20to\x20'+'be\x20updated'+'.'));}),_0x33cf9a['isEnabled'](_0x3b567c,_0x5687b9['transparen'+'t'])&&this['renderRend'+'erAction'](_0x5687b9,_0x4e13d4===-0x15eb+-0xe*0x223+0x33d5);}}['after'](){for(let _0x4e8377=0x20f3+-0x1859+-0x89a;_0x4e8377<this['renderActi'+'ons']['length'];_0x4e8377++){const _0x10425a=this['renderActi'+'ons'][_0x4e8377];_0x10425a['lastCamera'+'Use']&&this['scene']['fire'](aE,_0x10425a['camera']);}this['beforePass'+'es']['length']=-0x5*-0x50b+-0x3cc+0x156b*-0x1;}['renderRend'+'erAction'](_0x100f6f,_0x1b0460){var _0xc0165c;const {renderer:_0x9d3a64,scene:_0x477e67}=this,_0x12a00e=_0x9d3a64['device'],{layer:_0x552aac,transparent:_0x19ba44,camera:_0x15a1b9}=_0x100f6f;Q['pushGpuMar'+'ker'](this['device'],'Camera:\x20'+(_0x15a1b9?_0x15a1b9['entity']['name']:'Unnamed')+',\x20Layer:\x20'+_0x552aac['name']+'('+(_0x19ba44?'TRANSP':'OPAQUE')+')');const _0x1546ca=de();if(_0x15a1b9){const _0x16407a=_0x15a1b9['gammaCorre'+'ction'],_0x15b4b6=_0x15a1b9['toneMappin'+'g'];this['gammaCorre'+'ction']!==void(-0xacc*-0x1+0x7fa+0x2*-0x963)&&(_0x15a1b9['gammaCorre'+'ction']=this['gammaCorre'+'ction']),this['toneMappin'+'g']!==void(0x1ce6+0x2620+-0x4306)&&(_0x15a1b9['toneMappin'+'g']=this['toneMappin'+'g']),_0x477e67['fire'](nE,_0x15a1b9,_0x552aac,_0x19ba44);const _0x5a5716={'lightClusters':_0x100f6f['lightClust'+'ers']},_0x39b4b6=((_0xc0165c=_0x15a1b9['camera']['shaderPass'+'Info'])==null?void(0x9ae+0x250f+-0x2ebd):_0xc0165c['index'])??Aa;(!_0x1b0460||!_0x15a1b9['camera']['fullSizeCl'+'earRect'])&&(_0x5a5716['clearColor']=_0x100f6f['clearColor'],_0x5a5716['clearDepth']=_0x100f6f['clearDepth'],_0x5a5716['clearStenc'+'il']=_0x100f6f['clearStenc'+'il']);const _0x164257=_0x100f6f['renderTarg'+'et']??_0x12a00e['backBuffer'];_0x9d3a64['renderForw'+'ardLayer'](_0x15a1b9['camera'],_0x164257,_0x552aac,_0x19ba44,_0x39b4b6,_0x100f6f['viewBindGr'+'oups'],_0x5a5716),_0x12a00e['setBlendSt'+'ate'](pt['NOBLEND']),_0x12a00e['setStencil'+'State'](null,null),_0x12a00e['setAlphaTo'+'Coverage'](!(0x14db+-0x156c+0x92)),_0x477e67['fire'](oE,_0x15a1b9,_0x552aac,_0x19ba44),this['gammaCorre'+'ction']!==void(-0xc3+-0x149*-0x1+-0x86)&&(_0x15a1b9['gammaCorre'+'ction']=_0x16407a),this['toneMappin'+'g']!==void(-0x15fe+0x16*-0x50+0xa*0x2e3)&&(_0x15a1b9['toneMappin'+'g']=_0x15b4b6);}Q['popGpuMark'+'er'](this['device']),_0x552aac['_renderTim'+'e']+=de()-_0x1546ca;}['log'](_0x2b2ac0,_0x4dde6b){if(super['log'](_0x2b2ac0,_0x4dde6b),mi['get'](cn)){const {layerComposition:_0x46c90f}=this;this['renderActi'+'ons']['forEach']((_0xa9ef,_0x82d5c3)=>{const _0x244ec0=_0xa9ef['layer'],_0x4a6739=_0x244ec0['enabled']&&_0x46c90f['isEnabled'](_0x244ec0,_0xa9ef['transparen'+'t']),_0x3078d8=_0xa9ef['camera'];w['trace'](cn,'\x20\x20\x20\x20'+_0x82d5c3+':'+('\x20Cam:\x20'+(_0x3078d8?_0x3078d8['entity']['name']:'-'))['padEnd'](0x1947+-0xdaf*0x1+-0x2*0x5c1,'\x20')+('\x20Lay:\x20'+_0x244ec0['name'])['padEnd'](-0x1da4+0x19c8+0x3f2*0x1,'\x20')+(_0xa9ef['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x4a6739?'\x20ENABLED':'\x20DISABLED')+('\x20Meshes:\x20'+_0x244ec0['meshInstan'+'ces']['length'])['padEnd'](-0x197*0x16+-0x184e+0x11*0x37d,'\x20'));});}}}class Zb extends ys{constructor(_0x121aa3,_0x398371,_0x233a27){super(_0x121aa3),this['renderer']=_0x398371,this['renderActi'+'on']=_0x233a27,this['requiresCu'+'bemaps']=!(0x1658+0x104d+-0x26a4);}['execute'](){const _0x18dc47=this['renderActi'+'on'],_0x1258bf=_0x18dc47['camera'];w['assert'](_0x18dc47['triggerPos'+'tprocess']&&_0x1258bf['onPostproc'+'essing']),_0x1258bf['onPostproc'+'essing']();}}const Qb=[[],[],[]],or=new ie(),Nr={'drawCalls':[],'shaderInstances':[],'isNewMaterial':[],'lightMaskChanged':[],'clear':function(){this['drawCalls']['length']=0x1*-0x25ab+-0xcc7*-0x1+-0x18e4*-0x1,this['shaderInst'+'ances']['length']=0x1*-0x19a+0x118d+-0x3*0x551,this['isNewMater'+'ial']['length']=0x596+-0x360+-0x236,this['lightMaskC'+'hanged']['length']=-0x2b*-0xa9+-0x382*-0x9+0x1*-0x3bf5;}};function Jb(_0xb597d9){const _0x103b6f=[];for(let _0x49240a=-0x87f+-0x110*0x1f+-0x296f*-0x1;_0x49240a<_0xb597d9;++_0x49240a){const _0x1ddc00=Math['sqrt'](_0x49240a+(0x17*-0x3d+0x254f+-0x1fd4+0.5))/Math['sqrt'](_0xb597d9);_0x103b6f['push'](_0x1ddc00);}return _0x103b6f;}function eA(_0x4ff740){const _0x4592fe=[];for(let _0x4394bf=-0x1c8b*-0x1+-0x1*-0x1b85+0x256*-0x18;_0x4394bf<_0x4ff740;_0x4394bf++){const _0x55a931=_0x4394bf/_0x4ff740,_0x21f3ea=Math['sqrt'](_0x55a931*_0x55a931);_0x4592fe['push'](_0x21f3ea);}return _0x4592fe;}const Ni=class Ni extends Yb{constructor(_0x27cfdd){super(_0x27cfdd);const _0x21a1db=this['device'];this['_forwardDr'+'awCalls']=0x4fa*-0x7+0xf54+0x16*0xe3,this['_materialS'+'witches']=-0x493*-0x5+0x193c+0x5*-0x99f,this['_depthMapT'+'ime']=0x3*-0x48f+0x166e+-0x53*0x1b,this['_forwardTi'+'me']=0x1e4f*0x1+-0x24ab+-0xb*-0x94,this['_sortTime']=0x134e+-0x1*0x178d+-0x43f*-0x1;const _0x3e7f98=_0x21a1db['scope'];this['fogColorId']=_0x3e7f98['resolve']('fog_color'),this['fogStartId']=_0x3e7f98['resolve']('fog_start'),this['fogEndId']=_0x3e7f98['resolve']('fog_end'),this['fogDensity'+'Id']=_0x3e7f98['resolve']('fog_densit'+'y'),this['ambientId']=_0x3e7f98['resolve']('light_glob'+'alAmbient'),this['skyboxInte'+'nsityId']=_0x3e7f98['resolve']('skyboxInte'+'nsity'),this['cubeMapRot'+'ationMatri'+'xId']=_0x3e7f98['resolve']('cubeMapRot'+'ationMatri'+'x'),this['pcssDiskSa'+'mplesId']=_0x3e7f98['resolve']('pcssDiskSa'+'mples[0]'),this['pcssSphere'+'SamplesId']=_0x3e7f98['resolve']('pcssSphere'+'Samples[0]'),this['lightColor'+'Id']=[],this['lightDir']=[],this['lightDirId']=[],this['lightShado'+'wMapId']=[],this['lightShado'+'wMatrixId']=[],this['lightShado'+'wParamsId']=[],this['lightShado'+'wIntensity']=[],this['lightRadiu'+'sId']=[],this['lightPos']=[],this['lightPosId']=[],this['lightWidth']=[],this['lightWidth'+'Id']=[],this['lightHeigh'+'t']=[],this['lightHeigh'+'tId']=[],this['lightInAng'+'leId']=[],this['lightOutAn'+'gleId']=[],this['lightCooki'+'eId']=[],this['lightCooki'+'eIntId']=[],this['lightCooki'+'eMatrixId']=[],this['lightCooki'+'eOffsetId']=[],this['lightShado'+'wSearchAre'+'aId']=[],this['lightCamer'+'aParamsId']=[],this['lightSoftS'+'hadowParam'+'sId']=[],this['shadowMatr'+'ixPaletteI'+'d']=[],this['shadowCasc'+'adeDistanc'+'esId']=[],this['shadowCasc'+'adeCountId']=[],this['shadowCasc'+'adeBlendId']=[],this['screenSize'+'Id']=_0x3e7f98['resolve']('uScreenSiz'+'e'),this['_screenSiz'+'e']=new Float32Array(-0x1*-0x7c1+-0x8c*0x1f+0x937),this['fogColor']=new Float32Array(0x4*-0x245+-0x19a1+0x22b8),this['ambientCol'+'or']=new Float32Array(-0x28*-0xb0+-0x7e7+-0x1396),this['pcssDiskSa'+'mples']=Jb(0x1*-0x1db7+-0x13e8+0x31af),this['pcssSphere'+'Samples']=eA(-0x2666+0x1fcc+0x6aa);}['destroy'](){super['destroy']();}['dispatchGl'+'obalLights'](_0x38e47f){const _0x10d427=this['ambientCol'+'or'];if(or['linear'](_0x38e47f['ambientLig'+'ht']),_0x10d427[0xd3b+0x1d9*-0x2+-0x1*0x989]=or['r'],_0x10d427[-0x10a4+-0x25*0x65+0x1f3e]=or['g'],_0x10d427[-0x105f+0x4*-0x239+0x1945]=or['b'],_0x38e47f['physicalUn'+'its']){for(let _0x45091e=-0x106+-0x98e+-0x1*-0xa94;_0x45091e<-0x4d2*-0x8+0x11bd*-0x2+-0x313;_0x45091e++)_0x10d427[_0x45091e]*=_0x38e47f['ambientLum'+'inance'];}this['ambientId']['setValue'](_0x10d427),this['skyboxInte'+'nsityId']['setValue'](_0x38e47f['physicalUn'+'its']?_0x38e47f['skyboxLumi'+'nance']:_0x38e47f['skyboxInte'+'nsity']),this['cubeMapRot'+'ationMatri'+'xId']['setValue'](_0x38e47f['_skyboxRot'+'ationMat3']['data']);}['_resolveLi'+'ght'](_0x555792,_0x5ef854){const _0x183b9f='light'+_0x5ef854;this['lightColor'+'Id'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+'_color'),this['lightDir'][_0x5ef854]=new Float32Array(0x6d4+0x3*0xa71+0x989*-0x4),this['lightDirId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+'_direction'),this['lightShado'+'wMapId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+'_shadowMap'),this['lightShado'+'wMatrixId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_shadowMat'+'rix')),this['lightShado'+'wParamsId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_shadowPar'+'ams')),this['lightShado'+'wIntensity'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_shadowInt'+'ensity')),this['lightShado'+'wSearchAre'+'aId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_shadowSea'+'rchArea')),this['lightRadiu'+'sId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+'_radius'),this['lightPos'][_0x5ef854]=new Float32Array(-0x2164+0x2*-0xa1f+0x1f*0x1bb),this['lightPosId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+'_position'),this['lightWidth'][_0x5ef854]=new Float32Array(0x95*-0x3+-0x9fe+0xbc0),this['lightWidth'+'Id'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+'_halfWidth'),this['lightHeigh'+'t'][_0x5ef854]=new Float32Array(-0x56f+-0x27*-0xba+0x24a*-0xa),this['lightHeigh'+'tId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_halfHeigh'+'t')),this['lightInAng'+'leId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_innerCone'+'Angle')),this['lightOutAn'+'gleId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_outerCone'+'Angle')),this['lightCooki'+'eId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+'_cookie'),this['lightCooki'+'eIntId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_cookieInt'+'ensity')),this['lightCooki'+'eMatrixId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_cookieMat'+'rix')),this['lightCooki'+'eOffsetId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_cookieOff'+'set')),this['lightCamer'+'aParamsId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_cameraPar'+'ams')),this['lightSoftS'+'hadowParam'+'sId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_softShado'+'wParams')),this['shadowMatr'+'ixPaletteI'+'d'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_shadowMat'+'rixPalette'+'[0]')),this['shadowCasc'+'adeDistanc'+'esId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_shadowCas'+'cadeDistan'+'ces')),this['shadowCasc'+'adeCountId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_shadowCas'+'cadeCount')),this['shadowCasc'+'adeBlendId'][_0x5ef854]=_0x555792['resolve'](_0x183b9f+('_shadowCas'+'cadeBlend'));}['setLTCDire'+'ctionalLig'+'ht'](_0x338b69,_0x34211e,_0xc2a6d4,_0x982bff,_0x451114){this['lightPos'][_0x34211e][0x2*0xb7+0x19ed*0x1+-0x1b5b]=_0x982bff['x']-_0xc2a6d4['x']*_0x451114,this['lightPos'][_0x34211e][-0x2526+-0x23a2+0x48c9]=_0x982bff['y']-_0xc2a6d4['y']*_0x451114,this['lightPos'][_0x34211e][0x15a4+0x90b*-0x2+-0x38c]=_0x982bff['z']-_0xc2a6d4['z']*_0x451114,this['lightPosId'][_0x34211e]['setValue'](this['lightPos'][_0x34211e]);const _0x175249=_0x338b69['transformV'+'ector'](new D(-(0x992*-0x4+-0x2f*-0x4+0x258c+0.5),-0x129*-0x5+-0x1c06+0x1*0x1639,0x6fd+-0x1*0xc0+-0x63d));this['lightWidth'][_0x34211e][-0x26c1+0x4ed*-0x3+0x3588]=_0x175249['x']*_0x451114,this['lightWidth'][_0x34211e][-0x120e*-0x1+-0x1387+0x17a]=_0x175249['y']*_0x451114,this['lightWidth'][_0x34211e][-0x1a31+-0x16d5+0x3108]=_0x175249['z']*_0x451114,this['lightWidth'+'Id'][_0x34211e]['setValue'](this['lightWidth'][_0x34211e]);const _0x5ad51f=_0x338b69['transformV'+'ector'](new D(0x4*-0xd+-0x799+0x7cd,-0x1*-0x1b47+-0x254d+-0x503*-0x2,-0x1553+-0x7a2*0x3+0x1*0x2c39+0.5));this['lightHeigh'+'t'][_0x34211e][-0x1f0f+-0x411*-0x1+0x1afe]=_0x5ad51f['x']*_0x451114,this['lightHeigh'+'t'][_0x34211e][0x2a3+0x55a+0xe*-0x92]=_0x5ad51f['y']*_0x451114,this['lightHeigh'+'t'][_0x34211e][-0x16d+0x4a2+-0x27*0x15]=_0x5ad51f['z']*_0x451114,this['lightHeigh'+'tId'][_0x34211e]['setValue'](this['lightHeigh'+'t'][_0x34211e]);}['dispatchDi'+'rectLights'](_0x343222,_0x4d6e2c,_0x422b56){let _0x544921=0x761*0x4+0x7fc*0x4+-0x39*0x114;const _0x38bb78=this['device']['scope'];for(let _0x52d48a=0x13b*0xd+0x2*-0xef+-0xe21;_0x52d48a<_0x343222['length'];_0x52d48a++){if(!(_0x343222[_0x52d48a]['mask']&_0x4d6e2c))continue;const _0x1863dd=_0x343222[_0x52d48a],_0x94c070=_0x1863dd['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x544921]||this['_resolveLi'+'ght'](_0x38bb78,_0x544921),this['lightColor'+'Id'][_0x544921]['setValue'](_0x1863dd['_colorLine'+'ar']),_0x94c070['getY'](_0x1863dd['_direction'])['mulScalar'](-(0xa2*0x7+0xf74+-0x13e1)),_0x1863dd['_direction']['normalize'](),this['lightDir'][_0x544921][-0x282+0x86*-0x1f+0x2*0x95e]=_0x1863dd['_direction']['x'],this['lightDir'][_0x544921][-0xb66+-0x1e3f+0x14d3*0x2]=_0x1863dd['_direction']['y'],this['lightDir'][_0x544921][0x194d+0x2532+0x1*-0x3e7d]=_0x1863dd['_direction']['z'],this['lightDirId'][_0x544921]['setValue'](this['lightDir'][_0x544921]),_0x1863dd['shape']!==Ys&&this['setLTCDire'+'ctionalLig'+'ht'](_0x94c070,_0x544921,_0x1863dd['_direction'],_0x422b56['_node']['getPositio'+'n'](),_0x422b56['farClip']),_0x1863dd['castShadow'+'s']){const _0x1ef530=_0x1863dd['getRenderD'+'ata'](_0x422b56,-0xa80*-0x3+0x3*0xb4e+-0x15ce*0x3),_0x3f06c1=_0x1863dd['_getUnifor'+'mBiasValue'+'s'](_0x1ef530);this['lightShado'+'wMapId'][_0x544921]['setValue'](_0x1ef530['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x544921]['setValue'](_0x1ef530['shadowMatr'+'ix']['data']),this['shadowMatr'+'ixPaletteI'+'d'][_0x544921]['setValue'](_0x1863dd['_shadowMat'+'rixPalette']),this['shadowCasc'+'adeDistanc'+'esId'][_0x544921]['setValue'](_0x1863dd['_shadowCas'+'cadeDistan'+'ces']),this['shadowCasc'+'adeCountId'][_0x544921]['setValue'](_0x1863dd['numCascade'+'s']),this['shadowCasc'+'adeBlendId'][_0x544921]['setValue'](-0x32+0x1805+0xbe9*-0x2-_0x1863dd['cascadeBle'+'nd']),this['lightShado'+'wIntensity'][_0x544921]['setValue'](_0x1863dd['shadowInte'+'nsity']),this['lightSoftS'+'hadowParam'+'sId'][_0x544921]['setValue'](_0x1863dd['_softShado'+'wParams']),_0x1ef530['shadowCame'+'ra']['renderTarg'+'et']&&this['lightShado'+'wSearchAre'+'aId'][_0x544921]['setValue'](_0x1863dd['penumbraSi'+'ze']/_0x1ef530['shadowCame'+'ra']['renderTarg'+'et']['width']*_0x1ef530['projection'+'Compensati'+'on']);const _0x4a2b18=_0x1863dd['_shadowCam'+'eraParams'];_0x4a2b18['length']=0x4ab*0x1+0x25f6+-0x1*0x2a9d,_0x4a2b18[0x94a+0x12ba+-0x1c04]=-0x878+-0x5db*0x6+0x2b9a,_0x4a2b18[0xf2a+0x469*0x3+0x9e*-0x2e]=_0x1ef530['shadowCame'+'ra']['_farClip'],_0x4a2b18[0x81b+-0x1f97+0x177e]=_0x1ef530['shadowCame'+'ra']['_nearClip'],_0x4a2b18[-0xaa*-0x3a+0x3cb+-0x2a4c]=-0x1af0+-0x288*0xf+0x57*0xbf,this['lightCamer'+'aParamsId'][_0x544921]['setValue'](_0x4a2b18);const _0x3086a9=_0x1863dd['_shadowRen'+'derParams'];_0x3086a9['length']=0x9c6+0x249b+-0x2e5d*0x1,_0x3086a9[-0x2*-0xce8+-0x1fc*0x11+-0x27*-0x34]=_0x1863dd['_shadowRes'+'olution'],_0x3086a9[-0x11*-0x1ee+-0x13*-0x35+-0x24bc]=_0x3f06c1['normalBias'],_0x3086a9[0x183*-0x8+-0x9*0x3b+0x1*0xe2d]=_0x3f06c1['bias'],_0x3086a9[0xcef*0x3+0x11*0xf7+-0x3731*0x1]=-0x226+-0x2*0x760+0x135*0xe,this['lightShado'+'wParamsId'][_0x544921]['setValue'](_0x3086a9);}_0x544921++;}return _0x544921;}['setLTCPosi'+'tionalLigh'+'t'](_0x1db6b2,_0x179b53){const _0x4af9a6=_0x1db6b2['transformV'+'ector'](new D(-(0x13af*-0x1+-0x10f2+0x24a1*0x1+0.5),0x14a3+-0x208f+0xbec,0x67d+-0x48*-0x1+-0x6c5));this['lightWidth'][_0x179b53][0x65*0x25+0x98c+-0x1825]=_0x4af9a6['x'],this['lightWidth'][_0x179b53][0x8b4*-0x1+-0x18f6+0x21ab]=_0x4af9a6['y'],this['lightWidth'][_0x179b53][0x17a5*0x1+0x35c*-0x4+-0xa33]=_0x4af9a6['z'],this['lightWidth'+'Id'][_0x179b53]['setValue'](this['lightWidth'][_0x179b53]);const _0x596e66=_0x1db6b2['transformV'+'ector'](new D(0x256b+-0x1970+-0xbfb,-0x147*0x8+-0x17*0x14f+-0x2851*-0x1,0x74c*0x1+-0x2298+0x1b4c+0.5));this['lightHeigh'+'t'][_0x179b53][-0x50*0x41+-0x81*-0x5+0x1*0x11cb]=_0x596e66['x'],this['lightHeigh'+'t'][_0x179b53][-0x3cf+-0x239b+0x1*0x276b]=_0x596e66['y'],this['lightHeigh'+'t'][_0x179b53][0x12*0x27+0x7ae*0x2+-0x182*0xc]=_0x596e66['z'],this['lightHeigh'+'tId'][_0x179b53]['setValue'](this['lightHeigh'+'t'][_0x179b53]);}['dispatchOm'+'niLight'](_0x22edc7,_0x25330d,_0x2e6314){const _0xaf44c2=_0x25330d['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x2e6314]||this['_resolveLi'+'ght'](_0x22edc7,_0x2e6314),this['lightRadiu'+'sId'][_0x2e6314]['setValue'](_0x25330d['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x2e6314]['setValue'](_0x25330d['_colorLine'+'ar']),_0xaf44c2['getTransla'+'tion'](_0x25330d['_position']),this['lightPos'][_0x2e6314][0x8b9+-0x1f5*0x7+-0x1*-0x4fa]=_0x25330d['_position']['x'],this['lightPos'][_0x2e6314][0x79f+0x2306+-0x2aa4]=_0x25330d['_position']['y'],this['lightPos'][_0x2e6314][0x6c4+-0x6ab*0x5+-0x5*-0x551]=_0x25330d['_position']['z'],this['lightPosId'][_0x2e6314]['setValue'](this['lightPos'][_0x2e6314]),_0x25330d['shape']!==Ys&&this['setLTCPosi'+'tionalLigh'+'t'](_0xaf44c2,_0x2e6314),_0x25330d['castShadow'+'s']){const _0x13bd56=_0x25330d['getRenderD'+'ata'](null,-0xa*-0x385+0x1165+-0x3497);this['lightShado'+'wMapId'][_0x2e6314]['setValue'](_0x13bd56['shadowBuff'+'er']);const _0x542b95=_0x25330d['_getUnifor'+'mBiasValue'+'s'](_0x13bd56),_0x3f8633=_0x25330d['_shadowRen'+'derParams'];_0x3f8633['length']=-0x1*0x19fe+0x7*-0x55f+0x3f9b,_0x3f8633[-0x57*0x57+-0x16ae+0x343f]=_0x25330d['_shadowRes'+'olution'],_0x3f8633[0x16ce+0x193e*0x1+-0x1*0x300b]=_0x542b95['normalBias'],_0x3f8633[0x1*0x11f5+-0x4c7*-0x2+-0x1b81]=_0x542b95['bias'],_0x3f8633[-0xba+0xa6*0x34+-0x1*0x20fb]=(0xb9c+-0xf2*0x25+0x175f)/_0x25330d['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x2e6314]['setValue'](_0x3f8633),this['lightShado'+'wIntensity'][_0x2e6314]['setValue'](_0x25330d['shadowInte'+'nsity']);const _0x1f5c1a=_0x25330d['penumbraSi'+'ze']/_0x13bd56['shadowCame'+'ra']['renderTarg'+'et']['width'];this['lightShado'+'wSearchAre'+'aId'][_0x2e6314]['setValue'](_0x1f5c1a);const _0x429a55=_0x25330d['_shadowCam'+'eraParams'];_0x429a55['length']=0x2131+0x6*-0x25e+-0x12f9,_0x429a55[-0x3*-0xb9e+0xace+-0x1e7*0x18]=0x2db+-0xc80+0x9a5,_0x429a55[0x2211+0x4c*0x78+0x116c*-0x4]=_0x13bd56['shadowCame'+'ra']['_farClip'],_0x429a55[-0x995+-0x1fea+0x1a9*0x19]=_0x13bd56['shadowCame'+'ra']['_nearClip'],_0x429a55[0x1894+0xd3*-0x20+0x1cf]=0xddb*0x1+-0x1*0x1164+0x389,this['lightCamer'+'aParamsId'][_0x2e6314]['setValue'](_0x429a55);}_0x25330d['_cookie']&&(this['lightCooki'+'eId'][_0x2e6314]['setValue'](_0x25330d['_cookie']),this['lightShado'+'wMatrixId'][_0x2e6314]['setValue'](_0xaf44c2['data']),this['lightCooki'+'eIntId'][_0x2e6314]['setValue'](_0x25330d['cookieInte'+'nsity']));}['dispatchSp'+'otLight'](_0x468a75,_0x152fec,_0x1ecede){const _0x4d5495=_0x152fec['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x1ecede]||this['_resolveLi'+'ght'](_0x468a75,_0x1ecede),this['lightInAng'+'leId'][_0x1ecede]['setValue'](_0x152fec['_innerCone'+'AngleCos']),this['lightOutAn'+'gleId'][_0x1ecede]['setValue'](_0x152fec['_outerCone'+'AngleCos']),this['lightRadiu'+'sId'][_0x1ecede]['setValue'](_0x152fec['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x1ecede]['setValue'](_0x152fec['_colorLine'+'ar']),_0x4d5495['getTransla'+'tion'](_0x152fec['_position']),this['lightPos'][_0x1ecede][-0xf0e+0x129a+-0x38c]=_0x152fec['_position']['x'],this['lightPos'][_0x1ecede][0x179+-0x35*-0x4a+-0x10ca]=_0x152fec['_position']['y'],this['lightPos'][_0x1ecede][-0x13c6*-0x1+-0x3*-0x749+-0x5*0x853]=_0x152fec['_position']['z'],this['lightPosId'][_0x1ecede]['setValue'](this['lightPos'][_0x1ecede]),_0x152fec['shape']!==Ys&&this['setLTCPosi'+'tionalLigh'+'t'](_0x4d5495,_0x1ecede),_0x4d5495['getY'](_0x152fec['_direction'])['mulScalar'](-(-0x2c+-0x1cdf+-0x16*-0x152)),_0x152fec['_direction']['normalize'](),this['lightDir'][_0x1ecede][-0x2389+-0x720+0x2aa9]=_0x152fec['_direction']['x'],this['lightDir'][_0x1ecede][-0x1*-0xc8+-0x15dd+0x1516]=_0x152fec['_direction']['y'],this['lightDir'][_0x1ecede][0x17b9+0x6a5+-0x1e5c]=_0x152fec['_direction']['z'],this['lightDirId'][_0x1ecede]['setValue'](this['lightDir'][_0x1ecede]),_0x152fec['castShadow'+'s']){const _0x204707=_0x152fec['getRenderD'+'ata'](null,0x1942+-0x392*-0x2+0x8f*-0x3a);this['lightShado'+'wMapId'][_0x1ecede]['setValue'](_0x204707['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x1ecede]['setValue'](_0x204707['shadowMatr'+'ix']['data']);const _0x2016fe=_0x152fec['_getUnifor'+'mBiasValue'+'s'](_0x204707),_0x2a2d0a=_0x152fec['_shadowRen'+'derParams'];_0x2a2d0a['length']=-0x3*-0x20e+-0x1*0x39d+-0x289,_0x2a2d0a[0x1c42+-0x338*-0x1+0xfbd*-0x2]=_0x152fec['_shadowRes'+'olution'],_0x2a2d0a[-0x1352+0xc73*0x2+0x1*-0x593]=_0x2016fe['normalBias'],_0x2a2d0a[-0x1*0x2224+-0x890+0x2ab6]=_0x2016fe['bias'],_0x2a2d0a[0x17a5+-0x202+-0x15a0]=(0x87d+-0xc31*0x1+0x3b5)/_0x152fec['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x1ecede]['setValue'](_0x2a2d0a),this['lightShado'+'wIntensity'][_0x1ecede]['setValue'](_0x152fec['shadowInte'+'nsity']);const _0x20e606=_0x152fec['penumbraSi'+'ze']/_0x204707['shadowCame'+'ra']['renderTarg'+'et']['width'],_0x154815=_0x204707['shadowCame'+'ra']['_fov']*Math['PI']/(-0x726*-0x2+-0x1190+0x2*0x1fc),_0x2d455f=(0x1*0xfcb+0x12e6+-0x456*0x8)/Math['tan'](_0x154815/(-0xb12+0x7d4+-0x20*-0x1a));this['lightShado'+'wSearchAre'+'aId'][_0x1ecede]['setValue'](_0x20e606*_0x2d455f);const _0x14dd05=_0x152fec['_shadowCam'+'eraParams'];_0x14dd05['length']=-0x25ee+0xcc*0x25+-0x6*-0x169,_0x14dd05[-0x12e7+0x1*0x1de4+-0xafd]=-0x5b9+0x4f*-0x38+-0x1701*-0x1,_0x14dd05[0x8ad+-0x5*-0x6f5+-0x7d*0x59]=_0x204707['shadowCame'+'ra']['_farClip'],_0x14dd05[0x63f*0x4+-0x1a*0x6d+-0xde8]=_0x204707['shadowCame'+'ra']['_nearClip'],_0x14dd05[-0x13bf+0x1*-0x1d1b+0x30dd]=0x21c2*-0x1+0x505*-0x3+0x30d1,this['lightCamer'+'aParamsId'][_0x1ecede]['setValue'](_0x14dd05);}if(_0x152fec['_cookie']){if(!_0x152fec['castShadow'+'s']){const _0x52c11c=Wn['evalSpotCo'+'okieMatrix'](_0x152fec);this['lightShado'+'wMatrixId'][_0x1ecede]['setValue'](_0x52c11c['data']);}this['lightCooki'+'eId'][_0x1ecede]['setValue'](_0x152fec['_cookie']),this['lightCooki'+'eIntId'][_0x1ecede]['setValue'](_0x152fec['cookieInte'+'nsity']),_0x152fec['_cookieTra'+'nsform']&&(_0x152fec['_cookieTra'+'nsformUnif'+'orm'][0x1*0x1bff+0x2541+-0x4140]=_0x152fec['_cookieTra'+'nsform']['x'],_0x152fec['_cookieTra'+'nsformUnif'+'orm'][0x9*0x173+0xe27+-0x1b31]=_0x152fec['_cookieTra'+'nsform']['y'],_0x152fec['_cookieTra'+'nsformUnif'+'orm'][-0xbb0+0x92*0x42+-0x19f2*0x1]=_0x152fec['_cookieTra'+'nsform']['z'],_0x152fec['_cookieTra'+'nsformUnif'+'orm'][-0x6bb+-0x1ec1+0x14b*0x1d]=_0x152fec['_cookieTra'+'nsform']['w'],this['lightCooki'+'eMatrixId'][_0x1ecede]['setValue'](_0x152fec['_cookieTra'+'nsformUnif'+'orm']),_0x152fec['_cookieOff'+'setUniform'][0x4*-0x529+0x1*-0x20ed+0x3591]=_0x152fec['_cookieOff'+'set']['x'],_0x152fec['_cookieOff'+'setUniform'][0x2*-0x435+0x1f77+0x14*-0x127]=_0x152fec['_cookieOff'+'set']['y'],this['lightCooki'+'eOffsetId'][_0x1ecede]['setValue'](_0x152fec['_cookieOff'+'setUniform']));}}['dispatchLo'+'calLights'](_0x91d802,_0x1fd69c,_0xe84630){let _0x248957=_0xe84630;const _0x4dee68=this['device']['scope'],_0x70074b=_0x91d802[Ke],_0x19a386=_0x70074b['length'];for(let _0x568ea8=-0xd87+-0xb*-0xde+-0x3fd*-0x1;_0x568ea8<_0x19a386;_0x568ea8++){const _0x762a1a=_0x70074b[_0x568ea8];_0x762a1a['mask']&_0x1fd69c&&(this['dispatchOm'+'niLight'](_0x4dee68,_0x762a1a,_0x248957),_0x248957++);}const _0x1cff18=_0x91d802[Ze],_0x2db830=_0x1cff18['length'];for(let _0x28d15f=0x1a14+-0x95*-0x3+-0x1bd3;_0x28d15f<_0x2db830;_0x28d15f++){const _0x293952=_0x1cff18[_0x28d15f];_0x293952['mask']&_0x1fd69c&&(this['dispatchSp'+'otLight'](_0x4dee68,_0x293952,_0x248957),_0x248957++);}}['renderForw'+'ardPrepare'+'Materials'](_0x491950,_0x32f5f7,_0x1cfaeb,_0x2578f6,_0x370221,_0x11b597){const _0x446574=_0x491950['fogParams']??this['scene']['fog'],_0x175d7e=_0x491950['shaderPara'+'ms'];_0x175d7e['fog']=_0x446574['type'],_0x175d7e['srgbRender'+'Target']=(_0x32f5f7==null?void(0x158*0x2+-0x159+-0x157):_0x32f5f7['isColorBuf'+'ferSrgb'](-0x1e*-0x123+-0x1*-0x3df+-0x25f9))??!(-0x539+-0x13*0xa3+0x1153);const _0x5b2594=(_0x39e7e9,_0x2005b4,_0x3215ec,_0x90d074)=>{Nr['drawCalls']['push'](_0x39e7e9),Nr['shaderInst'+'ances']['push'](_0x2005b4),Nr['isNewMater'+'ial']['push'](_0x3215ec),Nr['lightMaskC'+'hanged']['push'](_0x90d074);};Nr['clear']();const _0x1c7d6c=this['device'],_0x253e4e=this['scene'],_0x3c3121=_0x253e4e['clusteredL'+'ightingEna'+'bled'],_0x11536f=(_0x370221==null?void(-0xcf1+-0x1ffd+0x2cee):_0x370221['getLightHa'+'sh'](_0x3c3121))??0x1e4e+-0x2103+0x7*0x63;let _0x276bac=null,_0x49a8a3,_0x4b7d0e;const _0x4209ee=_0x1cfaeb['length'];for(let _0x408062=-0x1*-0xfaa+0x41*0x94+-0x353e;_0x408062<_0x4209ee;_0x408062++){const _0x547a00=_0x1cfaeb[_0x408062];if(_0x491950===Ni['skipRender'+'Camera']){if(Ni['_skipRende'+'rCounter']>=Ni['skipRender'+'After'])continue;Ni['_skipRende'+'rCounter']++;}if(_0x370221){if(_0x370221['_skipRende'+'rCounter']>=_0x370221['skipRender'+'After'])continue;_0x370221['_skipRende'+'rCounter']++;}const _0x51ef27=_0x547a00['instancing'+'Data'];if(_0x51ef27&&_0x51ef27['count']<=0x1*-0xcac+-0x1880+0x319*0xc)continue;_0x547a00['ensureMate'+'rial'](_0x1c7d6c);const _0x112cf7=_0x547a00['material'],_0x4d4740=_0x547a00['_shaderDef'+'s'],_0x39b8d2=_0x547a00['mask'];_0x112cf7&&_0x112cf7===_0x276bac&&_0x4d4740!==_0x49a8a3&&(_0x276bac=null),_0x112cf7!==_0x276bac&&(this['_materialS'+'witches']++,_0x112cf7['_scene']=_0x253e4e,_0x112cf7['dirty']&&(Q['pushGpuMar'+'ker'](_0x1c7d6c,'Node:\x20'+_0x547a00['node']['name']+(',\x20Material'+':\x20')+_0x112cf7['name']),_0x112cf7['updateUnif'+'orms'](_0x1c7d6c,_0x253e4e),_0x112cf7['dirty']=!(0x2*0x20c+0x16*0x15a+0x21d3*-0x1),Q['popGpuMark'+'er'](_0x1c7d6c)));const _0x582266=_0x547a00['getShaderI'+'nstance'](_0x11b597,_0x11536f,_0x253e4e,_0x175d7e,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x2578f6);_0x5b2594(_0x547a00,_0x582266,_0x112cf7!==_0x276bac,!_0x276bac||_0x39b8d2!==_0x4b7d0e),_0x276bac=_0x112cf7,_0x49a8a3=_0x4d4740,_0x4b7d0e=_0x39b8d2;}return Nr;}['renderForw'+'ardInterna'+'l'](_0x47adc8,_0x40e0ab,_0x49948c,_0x41fb1e,_0x1bdff5,_0x53f0f7,_0x5d825b){var _0x544ea3,_0x38734b;const _0x276935=this['device'],_0x68eafc=this['scene'],_0x1b3cf7=-0xa32+0xdb*-0x24+0x1*0x28ff<<_0x41fb1e,_0x1c933f=_0x53f0f7?-(-0x22d6+0x160d+0x1*0xcca):0x1b46*0x1+-0xc57+-0x3*0x4fa,_0x29b639=_0x68eafc['clusteredL'+'ightingEna'+'bled'],_0x4354a1=(_0x544ea3=_0x47adc8['xr'])!=null&&_0x544ea3['session']&&_0x47adc8['xr']['views']['list']['length']?_0x47adc8['xr']['views']['list']:null,_0x504a10=_0x40e0ab['drawCalls']['length'];for(let _0x50bc79=0x1528+0x2594+-0x3abc;_0x50bc79<_0x504a10;_0x50bc79++){const _0x31d723=_0x40e0ab['drawCalls'][_0x50bc79],_0xa720a7=_0x40e0ab['isNewMater'+'ial'][_0x50bc79],_0x3b5afd=_0x40e0ab['lightMaskC'+'hanged'][_0x50bc79],_0x22a97e=_0x40e0ab['shaderInst'+'ances'][_0x50bc79],_0x5d59b8=_0x31d723['material'],_0x243ded=_0x31d723['mask'];if(_0x22a97e['shader']['failed'])continue;if(_0xa720a7){if(_0x276935['setShader'](_0x22a97e['shader'],!(0x2e7*-0x4+-0x1531+-0x1ba*-0x13)),_0x5d59b8['setParamet'+'ers'](_0x276935),_0x3b5afd){const _0x27cfdc=this['dispatchDi'+'rectLights'](_0x49948c[ve],_0x243ded,_0x47adc8);_0x29b639||this['dispatchLo'+'calLights'](_0x49948c,_0x243ded,_0x27cfdc);}this['alphaTestI'+'d']['setValue'](_0x5d59b8['alphaTest']),_0x276935['setBlendSt'+'ate'](_0x5d59b8['blendState']),_0x276935['setDepthSt'+'ate'](_0x5d59b8['depthState']),_0x276935['setAlphaTo'+'Coverage'](_0x5d59b8['alphaToCov'+'erage']);}Q['pushGpuMar'+'ker'](_0x276935,'Node:\x20'+_0x31d723['node']['name']+(',\x20Material'+':\x20')+_0x5d59b8['name']),this['setupCullM'+'ode'](_0x47adc8['_cullFaces'],_0x1c933f,_0x31d723);const _0x114c98=_0x31d723['stencilFro'+'nt']??_0x5d59b8['stencilFro'+'nt'],_0x200b9a=_0x31d723['stencilBac'+'k']??_0x5d59b8['stencilBac'+'k'];_0x276935['setStencil'+'State'](_0x114c98,_0x200b9a),_0x31d723['setParamet'+'ers'](_0x276935,_0x1b3cf7),_0x276935['scope']['resolve']('meshInstan'+'ceId')['setValue'](_0x31d723['id']);const _0x3d9c5d=_0x31d723['mesh'];this['setVertexB'+'uffers'](_0x276935,_0x3d9c5d),this['setMorphin'+'g'](_0x276935,_0x31d723['morphInsta'+'nce']),this['setSkinnin'+'g'](_0x276935,_0x31d723);const _0x22cfc3=_0x31d723['instancing'+'Data'];_0x22cfc3&&_0x276935['setVertexB'+'uffer'](_0x22cfc3['vertexBuff'+'er']),this['setMeshIns'+'tanceMatri'+'ces'](_0x31d723,!(0x3*-0xc70+-0x10c6+-0xa1*-0x56)),this['setupMeshU'+'niformBuff'+'ers'](_0x22a97e);const _0x18a4d4=_0x31d723['renderStyl'+'e'],_0x3bf587=_0x3d9c5d['indexBuffe'+'r'][_0x18a4d4];_0x1bdff5==null||_0x1bdff5(_0x31d723,_0x50bc79);const _0x1a008d=(_0x38734b=_0x31d723['indirectDa'+'ta'])==null?void(0x104b+-0x6fc+0x94f*-0x1):_0x38734b['get'](_0x47adc8);if(_0x4354a1)for(let _0x2da360=-0x661*-0x1+-0xeac+0x84b*0x1;_0x2da360<_0x4354a1['length'];_0x2da360++){const _0x35d9dc=_0x4354a1[_0x2da360];if(_0x276935['setViewpor'+'t'](_0x35d9dc['viewport']['x'],_0x35d9dc['viewport']['y'],_0x35d9dc['viewport']['z'],_0x35d9dc['viewport']['w']),_0x276935['supportsUn'+'iformBuffe'+'rs']){const _0x47e7a5=_0x5d825b[_0x2da360];_0x276935['setBindGro'+'up'](rl,_0x47e7a5);}else this['setupViewU'+'niforms'](_0x35d9dc,_0x2da360);const _0x978a6b=_0x2da360===-0xc9*0x4+0x2*0x10fd+-0x1ed6,_0x236c9a=_0x2da360===_0x4354a1['length']-(0x1568+0x1*0x743+-0x98e*0x3);_0x276935['draw'](_0x3d9c5d['primitive'][_0x18a4d4],_0x3bf587,_0x22cfc3==null?void(-0x1c*-0x1+-0x736+0x71a):_0x22cfc3['count'],_0x1a008d,_0x978a6b,_0x236c9a),this['_forwardDr'+'awCalls']++,_0x31d723['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;}else _0x276935['draw'](_0x3d9c5d['primitive'][_0x18a4d4],_0x3bf587,_0x22cfc3==null?void(0x1674+-0x22*-0x63+-0x239a):_0x22cfc3['count'],_0x1a008d),this['_forwardDr'+'awCalls']++,_0x31d723['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;_0x50bc79<_0x504a10-(-0x1017+0x37*0xa6+0x1392*-0x1)&&!_0x40e0ab['isNewMater'+'ial'][_0x50bc79+(-0x20*-0x8+0x204f+0x15*-0x196)]&&_0x5d59b8['setParamet'+'ers'](_0x276935,_0x31d723['parameters']),Q['popGpuMark'+'er'](_0x276935);}}['renderForw'+'ard'](_0x23957e,_0x864a8f,_0x4fbdd4,_0x30c2f0,_0x3351f3,_0x57a9dc,_0x6bda77,_0x4fbcab,_0x313be0){const _0x167350=de(),_0x1241b5=this['renderForw'+'ardPrepare'+'Materials'](_0x23957e,_0x864a8f,_0x4fbdd4,_0x30c2f0,_0x6bda77,_0x3351f3);this['renderForw'+'ardInterna'+'l'](_0x23957e,_0x1241b5,_0x30c2f0,_0x3351f3,_0x57a9dc,_0x4fbcab,_0x313be0),Nr['clear'](),this['_forwardTi'+'me']+=de()-_0x167350;}['renderForw'+'ardLayer'](_0x252264,_0x3212df,_0x4c7a8b,_0x8fe108,_0x3161e2,_0x3f2954,_0x1d6ece={}){const {scene:_0x53ab7d,device:_0x43039c}=this,_0xb95a91=_0x53ab7d['clusteredL'+'ightingEna'+'bled'];this['setupViewp'+'ort'](_0x252264,_0x3212df);let _0x36aa51,_0x2a3948;if(_0x4c7a8b){const _0x43c59a=de();_0x4c7a8b['sortVisibl'+'e'](_0x252264,_0x8fe108),this['_sortTime']+=de()-_0x43c59a;const _0x5d65e3=_0x4c7a8b['getCulledI'+'nstances'](_0x252264);_0x36aa51=_0x8fe108?_0x5d65e3['transparen'+'t']:_0x5d65e3['opaque'],_0x53ab7d['immediate']['onPreRende'+'rLayer'](_0x4c7a8b,_0x36aa51,_0x8fe108),_0x4c7a8b['requiresLi'+'ghtCube']&&(this['lightCube']['update'](_0x53ab7d['ambientLig'+'ht'],_0x4c7a8b['_lights']),this['constantLi'+'ghtCube']['setValue'](this['lightCube']['colors'])),_0x2a3948=_0x4c7a8b['splitLight'+'s'];}else _0x36aa51=_0x1d6ece['meshInstan'+'ces'],_0x2a3948=_0x1d6ece['splitLight'+'s']??Qb;if(w['assert'](_0x36aa51,'Either\x20lay'+'er\x20or\x20opti'+'ons.meshIn'+'stances\x20mu'+'st\x20be\x20prov'+'ided'),_0xb95a91){const _0x3d5538=_0x1d6ece['lightClust'+'ers']??this['worldClust'+'ersAllocat'+'or']['empty'];_0x3d5538['activate'](),_0x4c7a8b&&!this['clustersDe'+'bugRendere'+'d']&&_0x53ab7d['lighting']['debugLayer']===_0x4c7a8b['id']&&(this['clustersDe'+'bugRendere'+'d']=!(0xe2f*0x1+-0x6*0x44e+-0xba5*-0x1),hu['render'](_0x3d5538,this['scene']));}_0x53ab7d['_activeCam'+'era']=_0x252264;const _0x545a7e=_0x252264['fogParams']??this['scene']['fog'];this['setFogCons'+'tants'](_0x545a7e);const _0x2611bb=this['setCameraU'+'niforms'](_0x252264,_0x3212df);_0x43039c['supportsUn'+'iformBuffe'+'rs']&&this['setupViewU'+'niformBuff'+'ers'](_0x3f2954,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x2611bb);const _0x4c47ac=_0x1d6ece['clearColor']??!(0x1985*0x1+0xd3*0x2f+-0x4041*0x1),_0x3eb555=_0x1d6ece['clearDepth']??!(-0x51*0x45+0x1*-0x1b25+0x30fb),_0x1876bf=_0x1d6ece['clearStenc'+'il']??!(-0x4*0x996+-0x4fb*-0x4+-0x1*-0x126d);(_0x4c47ac||_0x3eb555||_0x1876bf)&&this['clear'](_0x252264,_0x4c47ac,_0x3eb555,_0x1876bf);const _0x4e8eb8=!!(_0x252264['_flipFaces']^(_0x3212df==null?void(-0xc6b*0x1+-0x30*0x4d+0x1adb):_0x3212df['flipY'])),_0x1f3361=this['_forwardDr'+'awCalls'];this['renderForw'+'ard'](_0x252264,_0x3212df,_0x36aa51,_0x2a3948,_0x3161e2,null,_0x4c7a8b,_0x4e8eb8,_0x3f2954),_0x4c7a8b&&(_0x4c7a8b['_forwardDr'+'awCalls']+=this['_forwardDr'+'awCalls']-_0x1f3361);}['setFogCons'+'tants'](_0xc80a60){if(_0xc80a60['type']!==Kn){or['linear'](_0xc80a60['color']);const _0x1027b4=this['fogColor'];_0x1027b4[0x1aa4+0x1*-0x120d+0x897*-0x1]=or['r'],_0x1027b4[0x1d8a+-0x24e4+-0x7*-0x10d]=or['g'],_0x1027b4[0x4ab*-0x7+0x1719+0x996]=or['b'],this['fogColorId']['setValue'](_0x1027b4),_0xc80a60['type']===Iw?(this['fogStartId']['setValue'](_0xc80a60['start']),this['fogEndId']['setValue'](_0xc80a60['end'])):this['fogDensity'+'Id']['setValue'](_0xc80a60['density']);}}['setSceneCo'+'nstants'](){const _0x4f979f=this['scene'];this['dispatchGl'+'obalLights'](_0x4f979f);const _0x360816=this['device'];this['_screenSiz'+'e'][0x2182+-0x284*-0xa+-0x3aaa]=_0x360816['width'],this['_screenSiz'+'e'][0x1880+-0x3*0x3d0+-0xd0f]=_0x360816['height'],this['_screenSiz'+'e'][-0x1e17+0x1bd0+0x249]=(-0x23f3+-0x1*-0x65+0x238f)/_0x360816['width'],this['_screenSiz'+'e'][0x1*-0x1465+-0x1bb3*0x1+0x301b]=(0x31*0xa7+-0x15*-0x123+0x37d5*-0x1)/_0x360816['height'],this['screenSize'+'Id']['setValue'](this['_screenSiz'+'e']),this['pcssDiskSa'+'mplesId']['setValue'](this['pcssDiskSa'+'mples']),this['pcssSphere'+'SamplesId']['setValue'](this['pcssSphere'+'Samples']);}['buildFrame'+'Graph'](_0x241088,_0x50d781){const _0x1bf773=this['scene'];if(_0x241088['reset'](),_0x1bf773['clusteredL'+'ightingEna'+'bled']){const {shadowsEnabled:_0x253996,cookiesEnabled:_0x35a14f}=_0x1bf773['lighting'];this['_renderPas'+'sUpdateClu'+'stered']['update'](_0x241088,_0x253996,_0x35a14f,this['lights'],this['localLight'+'s']),_0x241088['addRenderP'+'ass'](this['_renderPas'+'sUpdateClu'+'stered']);}else this['_shadowRen'+'dererLocal']['buildNonCl'+'usteredRen'+'derPasses'](_0x241088,this['localLight'+'s']);let _0x442cfc=0x1929+0x1056+-0x297f,_0x312796=!(-0x36+-0x3*0x4c0+0xe76),_0x19b4fc=null;const _0x1638e2=_0x50d781['_renderAct'+'ions'];for(let _0x129db8=_0x442cfc;_0x129db8<_0x1638e2['length'];_0x129db8++){const _0x2d76a5=_0x1638e2[_0x129db8],{layer:_0x346158,camera:_0x4fc254}=_0x2d76a5;if(_0x2d76a5['useCameraP'+'asses'])w['call'](()=>{_0x4fc254['postEffect'+'s']['effects']['length']>-0x3c9+-0x121e+0x15e7&&w['warnOnce']('Camera\x20\x27'+_0x4fc254['entity']['name']+('\x27\x20uses\x20ren'+'der\x20passes'+',\x20which\x20ar'+'e\x20not\x20comp'+'atible\x20wit'+'h\x20post-eff'+'ects\x20scrip'+'ts.\x20Render'+'ing\x20of\x20the'+'\x20post-effe'+'cts\x20is\x20ign'+'ored,\x20but\x20'+'they\x20shoul'+'d\x20not\x20be\x20a'+'ttached\x20to'+'\x20the\x20camer'+'a.'));}),_0x4fc254['camera']['renderPass'+'es']['forEach'](_0x50761b=>{_0x241088['addRenderP'+'ass'](_0x50761b);});else{const _0x3ca183=_0x346158['id']===ps,_0x240345=_0x3ca183&&(_0x4fc254['renderScen'+'eColorMap']||_0x4fc254['renderScen'+'eDepthMap']);_0x312796&&(_0x312796=!(-0x13b+-0x8a6*0x3+-0x1f1*-0xe),_0x442cfc=_0x129db8,_0x19b4fc=_0x2d76a5['renderTarg'+'et']);const _0x10faa4=_0x1638e2[_0x129db8+(0x1695+-0x1bd1*-0x1+-0x2a7*0x13)],_0x42c350=(_0x10faa4?!_0x10faa4['useCameraP'+'asses']&&_0x10faa4['layer']['id']===ps:!(-0x1ff*0x8+-0xff7+0x1ff0))&&(_0x4fc254['renderScen'+'eColorMap']||_0x4fc254['renderScen'+'eDepthMap']),_0xf1986c=_0x10faa4?_0x10faa4['firstCamer'+'aUse']&&this['cameraDirS'+'hadowLight'+'s']['has'](_0x10faa4['camera']['camera']):!(-0xa7*0xb+0x160+-0x2e7*-0x2);if(!_0x10faa4||_0x10faa4['renderTarg'+'et']!==_0x19b4fc||_0xf1986c||_0x42c350||_0x240345){if(_0x3ca183&&_0x442cfc===_0x129db8||this['addMainRen'+'derPass'](_0x241088,_0x50d781,_0x19b4fc,_0x442cfc,_0x129db8),_0x3ca183){if(_0x4fc254['renderScen'+'eColorMap']){const _0x3b3528=_0x4fc254['camera']['renderPass'+'ColorGrab'];_0x3b3528['source']=_0x4fc254['renderTarg'+'et'],_0x241088['addRenderP'+'ass'](_0x3b3528);}_0x4fc254['renderScen'+'eDepthMap']&&_0x241088['addRenderP'+'ass'](_0x4fc254['camera']['renderPass'+'DepthGrab']);}if(_0x2d76a5['triggerPos'+'tprocess']&&(_0x4fc254!=null&&_0x4fc254['onPostproc'+'essing'])){const _0x389165=new Zb(this['device'],this,_0x2d76a5);_0x241088['addRenderP'+'ass'](_0x389165);}_0x312796=!(0x158c+0x2a9*0xd+0x1*-0x3821);}}}}['addMainRen'+'derPass'](_0x144646,_0x4f13d6,_0x2fb837,_0x3bf54d,_0x1ad6d3){const _0x5c4474=new Kb(this['device'],_0x4f13d6,this['scene'],this);_0x5c4474['init'](_0x2fb837);const _0x27e4eb=_0x4f13d6['_renderAct'+'ions'];for(let _0xfc262a=_0x3bf54d;_0xfc262a<=_0x1ad6d3;_0xfc262a++)_0x5c4474['addRenderA'+'ction'](_0x27e4eb[_0xfc262a]);_0x144646['addRenderP'+'ass'](_0x5c4474);}['update'](_0x3e21d0){this['frameUpdat'+'e'](),this['shadowRend'+'erer']['frameUpdat'+'e'](),this['scene']['_updateSky'+'Mesh'](),this['updateLaye'+'rCompositi'+'on'](_0x3e21d0),this['collectLig'+'hts'](_0x3e21d0),this['beginFrame'](_0x3e21d0),this['setSceneCo'+'nstants'](),this['cullCompos'+'ition'](_0x3e21d0),this['gpuUpdate'](this['processing'+'MeshInstan'+'ces']);}};h(Ni,'skipRender'+'Camera',null),h(Ni,'_skipRende'+'rCounter',0x7d5*0x1+-0x1e44+0x166f),h(Ni,'skipRender'+'After',0x23b*-0xa+-0x23b4+0x3a02);let fl=Ni,uf=0x1*-0x2309+0x1b56+-0xdb*-0x9;const co=[],hc=new Set();function tA(_0x36549c,_0x5ddb38){return _0x36549c['drawOrder']-_0x5ddb38['drawOrder'];}function sA(_0x5a9be3,_0x164bd6){const _0x161a37=_0x5a9be3['_sortKeyFo'+'rward'],_0x4708a8=_0x164bd6['_sortKeyFo'+'rward'];return _0x161a37===_0x4708a8?_0x164bd6['mesh']['id']-_0x5a9be3['mesh']['id']:_0x4708a8-_0x161a37;}function iA(_0x2818fc,_0x4145a4){return _0x4145a4['_sortKeyDy'+'namic']-_0x2818fc['_sortKeyDy'+'namic'];}function rA(_0x5d9a6f,_0x4ea953){return _0x5d9a6f['_sortKeyDy'+'namic']-_0x4ea953['_sortKeyDy'+'namic'];}const aA=[null,tA,sA,iA,rA];class nA{constructor(){h(this,'opaque',[]),h(this,'transparen'+'t',[]);}}class Ot{constructor(_0x108373={}){h(this,'meshInstan'+'ces',[]),h(this,'meshInstan'+'cesSet',new Set()),h(this,'shadowCast'+'ers',[]),h(this,'shadowCast'+'ersSet',new Set()),h(this,'_visibleIn'+'stances',new WeakMap()),h(this,'_lights',[]),h(this,'_lightsSet',new Set()),h(this,'_clustered'+'LightsSet',new Set()),h(this,'_splitLigh'+'ts',[[],[],[]]),h(this,'_splitLigh'+'tsDirty',!(-0x8dd*-0x1+-0x1a46+0x1169)),h(this,'requiresLi'+'ghtCube',!(-0x200b*-0x1+-0x572+-0x1a98)),h(this,'cameras',[]),h(this,'camerasSet',new Set()),h(this,'_dirtyComp'+'osition',!(-0x122a+-0x90a+-0x1*-0x1b35)),(_0x108373['id']!==void(0x199f+0x183*0xd+0xbe*-0x3d)?(this['id']=_0x108373['id'],uf=Math['max'](this['id']+(-0x3ad+-0x74*-0x23+0x1*-0xc2e),uf)):this['id']=uf++,this['name']=_0x108373['name'],this['_enabled']=_0x108373['enabled']??!(0x1b52+-0x2707+0xbb5),this['_refCounte'+'r']=this['_enabled']?0x2*-0x68e+0x1b58+-0xe3b:0xfca+-0x109b+0xd1,this['opaqueSort'+'Mode']=_0x108373['opaqueSort'+'Mode']??Yw,this['transparen'+'tSortMode']=_0x108373['transparen'+'tSortMode']??m_,_0x108373['renderTarg'+'et']&&(this['renderTarg'+'et']=_0x108373['renderTarg'+'et']),this['_clearColo'+'rBuffer']=!!_0x108373['clearColor'+'Buffer'],this['_clearDept'+'hBuffer']=!!_0x108373['clearDepth'+'Buffer'],this['_clearSten'+'cilBuffer']=!!_0x108373['clearStenc'+'ilBuffer'],this['onEnable']=_0x108373['onEnable'],this['onDisable']=_0x108373['onDisable'],this['_enabled']&&this['onEnable']&&this['onEnable'](),this['customSort'+'Callback']=null,this['customCalc'+'ulateSortV'+'alues']=null,this['_lightHash']=-0xc*-0x32d+0xa67*0x1+-0x3083*0x1,this['_lightHash'+'Dirty']=!(0x47+-0xf92+0xf4c),this['_lightIdHa'+'sh']=-0x2*0x9cb+-0x2e3*-0x1+0x10b3,this['_lightIdHa'+'shDirty']=!(0x8*-0x315+0x38d+0x304*0x7),this['skipRender'+'After']=Number['MAX_VALUE'],this['_skipRende'+'rCounter']=-0x16ed+0x1229*0x2+-0xd65,this['_renderTim'+'e']=-0x2d1+-0x3*-0x84f+0x5*-0x46c,this['_forwardDr'+'awCalls']=0x15*0x2e+0x3e*-0x1d+0x340,this['_shadowDra'+'wCalls']=-0x53e*0x3+-0x2429*-0x1+-0x146f,this['_shaderVer'+'sion']=-(-0x3*-0x61b+0x2*0x586+-0x2*0xeae));}set['enabled'](_0x1d6307){_0x1d6307!==this['_enabled']&&(this['_dirtyComp'+'osition']=!(0x64*-0xb+0x178f+-0x1343),this['_enabled']=_0x1d6307,_0x1d6307?(this['incrementC'+'ounter'](),this['onEnable']&&this['onEnable']()):(this['decrementC'+'ounter'](),this['onDisable']&&this['onDisable']()));}get['enabled'](){return this['_enabled'];}set['clearColor'+'Buffer'](_0x1692c3){this['_clearColo'+'rBuffer']=_0x1692c3,this['_dirtyComp'+'osition']=!(-0x715+0x1bb0+0xd3*-0x19);}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'+'Buffer'](_0x398354){this['_clearDept'+'hBuffer']=_0x398354,this['_dirtyComp'+'osition']=!(0xeee+0xe6d*0x2+-0x15e4*0x2);}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'ilBuffer'](_0x21ee19){this['_clearSten'+'cilBuffer']=_0x21ee19,this['_dirtyComp'+'osition']=!(-0x9*-0x155+0x23d7*0x1+-0x2*0x17ea);}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}get['hasCluster'+'edLights'](){return this['_clustered'+'LightsSet']['size']>0x12c6*-0x1+0x62*-0x25+-0x41e*-0x8;}get['clusteredL'+'ightsSet'](){return this['_clustered'+'LightsSet'];}['incrementC'+'ounter'](){this['_refCounte'+'r']===-0xa33*-0x2+0xd*0x22d+0x79*-0x67&&(this['_enabled']=!(-0xefa+0x241a+-0x1520),this['onEnable']&&this['onEnable']()),this['_refCounte'+'r']++;}['decrementC'+'ounter'](){if(this['_refCounte'+'r']===0x1c09*0x1+0x3*0x419+-0x2853)this['_enabled']=!(-0x2*-0x1381+0xb*0x1a8+-0x3939),this['onDisable']&&this['onDisable']();else{if(this['_refCounte'+'r']===0x1d4e*0x1+-0x576*-0x2+0x10f*-0x26){w['warn']('Trying\x20to\x20'+'decrement\x20'+'layer\x20coun'+'ter\x20below\x20'+'0');return;}}this['_refCounte'+'r']--;}['addMeshIns'+'tances'](_0x5eaf34,_0x5f0cd9){const _0x3d0803=this['meshInstan'+'ces'],_0x4d2657=this['meshInstan'+'cesSet'];for(let _0x4118fb=0x1415+0x23a*-0x1+-0x11db;_0x4118fb<_0x5eaf34['length'];_0x4118fb++){const _0x3e5e88=_0x5eaf34[_0x4118fb];_0x4d2657['has'](_0x3e5e88)||(_0x3d0803['push'](_0x3e5e88),_0x4d2657['add'](_0x3e5e88),hc['add'](_0x3e5e88['material']));}if(_0x5f0cd9||this['addShadowC'+'asters'](_0x5eaf34),hc['size']>0x8*-0xd9+-0x1*0x1ae9+0x21b1){const _0xbeb1df=this['_shaderVer'+'sion'];hc['forEach'](_0x3d23bd=>{_0xbeb1df>=0x82*-0x45+-0xbf3+0x2efd&&_0x3d23bd['_shaderVer'+'sion']!==_0xbeb1df&&(_0x3d23bd['getShaderV'+'ariant']!==tr['prototype']['getShaderV'+'ariant']&&_0x3d23bd['clearVaria'+'nts'](),_0x3d23bd['_shaderVer'+'sion']=_0xbeb1df);}),hc['clear']();}}['removeMesh'+'Instances'](_0x4c3968,_0xdc35ed){const _0x901bf3=this['meshInstan'+'ces'],_0x174d65=this['meshInstan'+'cesSet'];for(let _0x714742=-0x1bc5*-0x1+0x978+0x1*-0x253d;_0x714742<_0x4c3968['length'];_0x714742++){const _0x5e1f06=_0x4c3968[_0x714742];if(_0x174d65['has'](_0x5e1f06)){_0x174d65['delete'](_0x5e1f06);const _0x148345=_0x901bf3['indexOf'](_0x5e1f06);_0x148345>=0x1898+0xa9f+-0x2337&&_0x901bf3['splice'](_0x148345,0x35b+0x6b*-0x59+0x21d9);}}_0xdc35ed||this['removeShad'+'owCasters'](_0x4c3968);}['addShadowC'+'asters'](_0x50d63c){const _0x500842=this['shadowCast'+'ers'],_0x1f99ee=this['shadowCast'+'ersSet'];for(let _0x266946=0x4e*0x2f+0x2250+-0x30a2;_0x266946<_0x50d63c['length'];_0x266946++){const _0x1df5b5=_0x50d63c[_0x266946];_0x1df5b5['castShadow']&&!_0x1f99ee['has'](_0x1df5b5)&&(_0x1f99ee['add'](_0x1df5b5),_0x500842['push'](_0x1df5b5));}}['removeShad'+'owCasters'](_0x1af33c){const _0x26e5e0=this['shadowCast'+'ers'],_0x333c52=this['shadowCast'+'ersSet'];for(let _0xdaca5=-0xdc*-0x23+0xf1d+0x17*-0x1f7;_0xdaca5<_0x1af33c['length'];_0xdaca5++){const _0xbfce6a=_0x1af33c[_0xdaca5];if(_0x333c52['has'](_0xbfce6a)){_0x333c52['delete'](_0xbfce6a);const _0x147b12=_0x26e5e0['indexOf'](_0xbfce6a);_0x147b12>=-0x1*-0x1ed5+0x2*-0xfcd+-0x1*-0xc5&&_0x26e5e0['splice'](_0x147b12,-0xbaf+-0x890*-0x4+-0xb48*0x2);}}}['clearMeshI'+'nstances'](_0x205e76=!(0x1f*-0xb4+-0xf7a+0x2547)){this['meshInstan'+'ces']['length']=0xf*-0x18b+0xd04+0xa21,this['meshInstan'+'cesSet']['clear'](),_0x205e76||(this['shadowCast'+'ers']['length']=-0x211e+0x1*0x21eb+-0x5*0x29,this['shadowCast'+'ersSet']['clear']());}['markLights'+'Dirty'](){this['_lightHash'+'Dirty']=!(-0xacb+0x583+0x8*0xa9),this['_lightIdHa'+'shDirty']=!(-0x1*0x3f8+0x7b*0x39+-0x176b),this['_splitLigh'+'tsDirty']=!(0x1beb+-0x1417+-0x7d4);}['hasLight'](_0xea0d2d){return this['_lightsSet']['has'](_0xea0d2d);}['addLight'](_0x4f82c5){const _0xf35ae9=_0x4f82c5['light'];this['_lightsSet']['has'](_0xf35ae9)||(this['_lightsSet']['add'](_0xf35ae9),this['_lights']['push'](_0xf35ae9),this['markLights'+'Dirty']()),_0xf35ae9['type']!==ve&&this['_clustered'+'LightsSet']['add'](_0xf35ae9);}['removeLigh'+'t'](_0x5b459e){const _0x4e705b=_0x5b459e['light'];this['_lightsSet']['has'](_0x4e705b)&&(this['_lightsSet']['delete'](_0x4e705b),this['_lights']['splice'](this['_lights']['indexOf'](_0x4e705b),-0x1*0x1f4e+-0xc70+-0x2bbf*-0x1),this['markLights'+'Dirty']()),_0x4e705b['type']!==ve&&this['_clustered'+'LightsSet']['delete'](_0x4e705b);}['clearLight'+'s'](){this['_lightsSet']['forEach'](_0x1dfeb8=>_0x1dfeb8['removeLaye'+'r'](this)),this['_lightsSet']['clear'](),this['_clustered'+'LightsSet']['clear'](),this['_lights']['length']=0x1*0x1d15+0x1101*0x2+-0x3f17,this['markLights'+'Dirty']();}get['splitLight'+'s'](){if(this['_splitLigh'+'tsDirty']){this['_splitLigh'+'tsDirty']=!(-0x365*-0x1+-0x16aa+0x2*0x9a3);const _0xe562ab=this['_splitLigh'+'ts'];for(let _0x2f2565=0x4e5*-0x7+0xe68+0x13db;_0x2f2565<_0xe562ab['length'];_0x2f2565++)_0xe562ab[_0x2f2565]['length']=0x62*0x51+-0x1df0+-0x112;const _0x5ce723=this['_lights'];for(let _0xffffc9=-0x35*0x71+-0x11*0xb3+-0x8*-0x469;_0xffffc9<_0x5ce723['length'];_0xffffc9++){const _0x5a1a91=_0x5ce723[_0xffffc9];_0x5a1a91['enabled']&&_0xe562ab[_0x5a1a91['_type']]['push'](_0x5a1a91);}for(let _0x463aaa=0x108*-0x4+0x25c3+-0x21a3*0x1;_0x463aaa<_0xe562ab['length'];_0x463aaa++)_0xe562ab[_0x463aaa]['sort']((_0x201e29,_0x2b594f)=>_0x201e29['key']-_0x2b594f['key']);}return this['_splitLigh'+'ts'];}['evaluateLi'+'ghtHash'](_0x96a25c,_0x1c30b6,_0x2539d9){let _0x5df8f5=-0x228d*0x1+0x2*0x1312+-0x397;const _0x1b0f40=this['_lights'];for(let _0x22f972=-0x33b+-0xb13+0xe4e*0x1;_0x22f972<_0x1b0f40['length'];_0x22f972++){const _0x56390f=_0x1b0f40[_0x22f972]['type']!==ve;(_0x96a25c&&_0x56390f||_0x1c30b6&&!_0x56390f)&&co['push'](_0x2539d9?_0x1b0f40[_0x22f972]['id']:_0x1b0f40[_0x22f972]['key']);}return co['length']>-0x1850+0x323*0x8+-0xc8&&(co['sort'](),_0x5df8f5=By(co),co['length']=-0x472+-0xb2d*-0x1+-0x6bb),_0x5df8f5;}['getLightHa'+'sh'](_0x3b1aa9){return this['_lightHash'+'Dirty']&&(this['_lightHash'+'Dirty']=!(0x1ced*0x1+0x37e+0x12*-0x1cd),this['_lightHash']=this['evaluateLi'+'ghtHash'](!_0x3b1aa9,!(-0x7bd*0x5+-0x5*-0x6bf+0x4f6),!(-0x136*0x2+0x1e01*-0x1+0x206e))),this['_lightHash'];}['getLightId'+'Hash'](){return this['_lightIdHa'+'shDirty']&&(this['_lightIdHa'+'shDirty']=!(0xb0f+-0x1*-0xf75+-0x1a83),this['_lightIdHa'+'sh']=this['evaluateLi'+'ghtHash'](!(-0x1744+-0x371*-0x4+0x980),!(-0x13*0x8b+-0x15*0x166+0x7f0*0x5),!(-0x16d7*0x1+-0x415+0x1aec))),this['_lightIdHa'+'sh'];}['addCamera'](_0xc7e406){this['camerasSet']['has'](_0xc7e406['camera'])||(this['camerasSet']['add'](_0xc7e406['camera']),this['cameras']['push'](_0xc7e406),this['_dirtyComp'+'osition']=!(-0x1ea4+0x73e+0x1766));}['removeCame'+'ra'](_0x5bf0f1){if(this['camerasSet']['has'](_0x5bf0f1['camera'])){this['camerasSet']['delete'](_0x5bf0f1['camera']);const _0x4f0249=this['cameras']['indexOf'](_0x5bf0f1);this['cameras']['splice'](_0x4f0249,0x943+0x1bf2+-0x2*0x129a),this['_dirtyComp'+'osition']=!(0xb5*0x10+-0x13f2+0x8a2);}}['clearCamer'+'as'](){this['cameras']['length']=-0xfc0+0x1356+-0x396,this['camerasSet']['clear'](),this['_dirtyComp'+'osition']=!(-0x4*0x90f+0x4*0x6df+0x8c0);}['_calculate'+'SortDistan'+'ces'](_0x148f53,_0xd0ee2b,_0x54bf5b){const _0x188c9c=_0x148f53['length'],{x:_0x39258f,y:_0x2600dd,z:_0x1e1319}=_0xd0ee2b,{x:_0x3fdcfa,y:_0x3e1c32,z:_0x2b816f}=_0x54bf5b;for(let _0x49b13b=-0x5*-0x609+-0x1495+-0x4cc*0x2;_0x49b13b<_0x188c9c;_0x49b13b++){const _0x33f4db=_0x148f53[_0x49b13b];let _0x4f893c;if(_0x33f4db['calculateS'+'ortDistanc'+'e'])_0x4f893c=_0x33f4db['calculateS'+'ortDistanc'+'e'](_0x33f4db,_0xd0ee2b,_0x54bf5b);else{const _0x130662=_0x33f4db['aabb']['center'];_0x4f893c=(_0x130662['x']-_0x39258f)*_0x3fdcfa+(_0x130662['y']-_0x2600dd)*_0x3e1c32+(_0x130662['z']-_0x1e1319)*_0x2b816f;}const _0xff0152=_0x33f4db['_drawBucke'+'t']*(0x3ccdeb*-0xd3+-0x666feac4+-0xd*-0x1051e109);_0x33f4db['_sortKeyDy'+'namic']=_0xff0152+_0x4f893c;}}['getCulledI'+'nstances'](_0x34ba34){let _0x44a7bb=this['_visibleIn'+'stances']['get'](_0x34ba34);return _0x44a7bb||(_0x44a7bb=new nA(),this['_visibleIn'+'stances']['set'](_0x34ba34,_0x44a7bb)),_0x44a7bb;}['sortVisibl'+'e'](_0x5f8f1b,_0x17d820){const _0x5d1e74=_0x17d820?this['transparen'+'tSortMode']:this['opaqueSort'+'Mode'];if(_0x5d1e74===Yc)return;const _0x24858a=this['getCulledI'+'nstances'](_0x5f8f1b),_0x3ee9cb=_0x17d820?_0x24858a['transparen'+'t']:_0x24858a['opaque'],_0x1d376d=_0x5f8f1b['node'];if(_0x5d1e74===Zw){const _0x54c881=_0x1d376d['getPositio'+'n'](),_0x3fdf24=_0x1d376d['forward'];this['customCalc'+'ulateSortV'+'alues']&&this['customCalc'+'ulateSortV'+'alues'](_0x3ee9cb,_0x3ee9cb['length'],_0x54c881,_0x3fdf24),this['customSort'+'Callback']&&_0x3ee9cb['sort'](this['customSort'+'Callback']);}else{if(_0x5d1e74===m_||_0x5d1e74===Kw){const _0x39d939=_0x1d376d['getPositio'+'n'](),_0x25b9d4=_0x1d376d['forward'];this['_calculate'+'SortDistan'+'ces'](_0x3ee9cb,_0x39d939,_0x25b9d4);}_0x3ee9cb['sort'](aA[_0x5d1e74]);}}}const oA=(_0x2b12e1,_0x44e684)=>_0x2b12e1['priority']-_0x44e684['priority'],ul=_0x344ff7=>_0x344ff7['sort'](oA);class du extends me{constructor(_0x3fc0ca='Untitled'){super(),h(this,'layerList',[]),h(this,'layerIdMap',new Map()),h(this,'layerNameM'+'ap',new Map()),h(this,'layerOpaqu'+'eIndexMap',new Map()),h(this,'layerTrans'+'parentInde'+'xMap',new Map()),h(this,'subLayerLi'+'st',[]),h(this,'subLayerEn'+'abled',[]),h(this,'cameras',[]),h(this,'_renderAct'+'ions',[]),h(this,'_dirty',!(-0xd6*0x25+-0xf21*-0x1+-0x121*-0xe)),(this['name']=_0x3fc0ca,this['_opaqueOrd'+'er']={},this['_transpare'+'ntOrder']={});}['destroy'](){this['destroyRen'+'derActions']();}['destroyRen'+'derActions'](){this['_renderAct'+'ions']['forEach'](_0x41ce6a=>_0x41ce6a['destroy']()),this['_renderAct'+'ions']['length']=0x156f+0x8*0x399+-0x3237;}['markDirty'](){this['_dirty']=!(-0xc5*-0x17+0x1ba2*0x1+-0x2d55);}['_update'](){const _0xb340ae=this['layerList']['length'];if(!this['_dirty']){for(let _0x577cce=0x2*-0x5a5+-0x1817+0x3*0xbcb;_0x577cce<_0xb340ae;_0x577cce++)if(this['layerList'][_0x577cce]['_dirtyComp'+'osition']){this['_dirty']=!(-0x7*0xcb+0xb1f*0x1+-0x592);break;}}if(this['_dirty']){this['_dirty']=!(-0x14b*0x5+0xc94+-0x61c),this['cameras']['length']=0x1a2c+-0xd7+-0x1955;for(let _0x4fb3e6=0x9*0x1bb+-0x95b+0x2*-0x31c;_0x4fb3e6<_0xb340ae;_0x4fb3e6++){const _0x3cee18=this['layerList'][_0x4fb3e6];_0x3cee18['_dirtyComp'+'osition']=!(-0x1c1+-0x6*-0x2cc+-0xf06*0x1);for(let _0x3803a9=0x1*-0xd48+-0x1*-0xade+-0x135*-0x2;_0x3803a9<_0x3cee18['cameras']['length'];_0x3803a9++){const _0x44417c=_0x3cee18['cameras'][_0x3803a9];this['cameras']['indexOf'](_0x44417c)<-0x3*0xb29+0x3*0x193+0x1cc2&&this['cameras']['push'](_0x44417c);}}this['cameras']['length']>-0x88b+-0x1*0x6bc+0xf48&&ul(this['cameras']);let _0x4b4462=0x2555+0x15a3+-0x3af8;this['destroyRen'+'derActions']();for(let _0x5e8a61=0x2082+0x8d*-0x1d+-0x33*0x53;_0x5e8a61<this['cameras']['length'];_0x5e8a61++){const _0x33a0e3=this['cameras'][_0x5e8a61];if(_0x33a0e3['camera']['renderPass'+'es']['length']>0x1*-0x1e67+-0x1*0x2671+-0x2*-0x226c){this['addDummyRe'+'nderAction'](_0x4b4462,_0x33a0e3),_0x4b4462++;continue;}let _0x4e8cab=!(-0xf2c+0xe46+-0x5*-0x2e);const _0x6135de=_0x4b4462;let _0x2c8ac3=null,_0x21dac0=!(-0x148b+-0x1*-0x19f+0x12ed);for(let _0x30910f=-0x2f9+0x1df7*-0x1+0x20f*0x10;_0x30910f<_0xb340ae;_0x30910f++){const _0x22b697=this['layerList'][_0x30910f];if(_0x22b697['enabled']&&this['subLayerEn'+'abled'][_0x30910f]&&_0x22b697['cameras']['length']>0x6d*0xb+0x557*-0x2+-0x5*-0x133&&_0x33a0e3['layers']['indexOf'](_0x22b697['id'])>=0x1302*-0x1+-0xd63+0x2065){!_0x21dac0&&_0x22b697['id']===_0x33a0e3['disablePos'+'tEffectsLa'+'yer']&&(_0x21dac0=!(0x20a7*0x1+-0xe3*0x16+0x5*-0x2a1),_0x2c8ac3&&(_0x2c8ac3['triggerPos'+'tprocess']=!(0x2de*-0x8+0x1*0xa7d+0x1*0xc73)));const _0x16c2a3=this['subLayerLi'+'st'][_0x30910f];_0x2c8ac3=this['addRenderA'+'ction'](_0x4b4462,_0x22b697,_0x16c2a3,_0x33a0e3,_0x4e8cab,_0x21dac0),_0x4b4462++,_0x4e8cab=!(0x44*-0x34+0x6*-0x1ab+0x17d3);}}_0x6135de<_0x4b4462&&(_0x2c8ac3['lastCamera'+'Use']=!(-0x181e+0x8c3*-0x1+-0x13*-0x1bb)),!_0x21dac0&&_0x2c8ac3&&(_0x2c8ac3['triggerPos'+'tprocess']=!(-0x1f95+-0xa9*-0x29+0x484)),_0x33a0e3['renderTarg'+'et']&&_0x33a0e3['postEffect'+'sEnabled']&&this['propagateR'+'enderTarge'+'t'](_0x6135de-(0x1a89*-0x1+-0x87f+-0x1*-0x2309),_0x33a0e3);}this['_logRender'+'Actions']();}}['getNextRen'+'derAction'](_0xd53677){w['assert'](this['_renderAct'+'ions']['length']===_0xd53677);const _0x3692bd=new Pv();return this['_renderAct'+'ions']['push'](_0x3692bd),_0x3692bd;}['addDummyRe'+'nderAction'](_0x453b22,_0x3236c8){const _0x5e68b6=this['getNextRen'+'derAction'](_0x453b22);_0x5e68b6['camera']=_0x3236c8,_0x5e68b6['useCameraP'+'asses']=!(-0x177d+0x1*0x2434+0xd9*-0xf);}['addRenderA'+'ction'](_0xff3af,_0x3ef7b7,_0x23b68c,_0x5bf4f6,_0x3f12da,_0x4c4f17){let _0xec1923=_0x3ef7b7['id']!==ps?_0x5bf4f6['renderTarg'+'et']:null,_0x1119d5=!(0x1*0x157a+-0x3a5*0x1+-0x11d4);const _0x1ad805=this['_renderAct'+'ions'];for(let _0x574911=_0xff3af-(0x1*0xa9+-0x16c7+0x161f);_0x574911>=-0x11cd+-0x26f*-0x6+0x7*0x75;_0x574911--)if(_0x1ad805[_0x574911]['camera']===_0x5bf4f6&&_0x1ad805[_0x574911]['renderTarg'+'et']===_0xec1923){_0x1119d5=!(-0x19e9+-0x1d48*0x1+-0x3731*-0x1);break;}_0x4c4f17&&_0x5bf4f6['postEffect'+'sEnabled']&&(_0xec1923=null);const _0x3821cb=this['getNextRen'+'derAction'](_0xff3af);_0x3821cb['triggerPos'+'tprocess']=!(-0x2625+-0x1b27+-0x49*-0xe5),_0x3821cb['layer']=_0x3ef7b7,_0x3821cb['transparen'+'t']=_0x23b68c,_0x3821cb['camera']=_0x5bf4f6,_0x3821cb['renderTarg'+'et']=_0xec1923,_0x3821cb['firstCamer'+'aUse']=_0x3f12da,_0x3821cb['lastCamera'+'Use']=!(-0x21f6+0x1*-0x24fb+-0x3*-0x17a6);const _0x3de26f=_0x3f12da||!_0x1119d5,_0x39d7e0=_0x3ef7b7['clearColor'+'Buffer']||_0x3ef7b7['clearDepth'+'Buffer']||_0x3ef7b7['clearStenc'+'ilBuffer'];return(_0x3de26f||_0x39d7e0)&&_0x3821cb['setupClear'+'s'](_0x3de26f?_0x5bf4f6:void(0x1a6a*-0x1+-0x1*-0xbc5+0xea5),_0x3ef7b7),_0x3821cb;}['propagateR'+'enderTarge'+'t'](_0x204b39,_0x5aef9a){for(let _0x320aca=_0x204b39;_0x320aca>=0x37*0xb+0x172b+-0x1988;_0x320aca--){const _0x2adc03=this['_renderAct'+'ions'][_0x320aca],_0x572b62=_0x2adc03['layer'];if(_0x2adc03['renderTarg'+'et']&&_0x572b62['id']!==ps)break;if(_0x572b62['id']===ps)continue;if(_0x2adc03['useCameraP'+'asses'])break;const _0x4fa622=_0x2adc03==null?void(0xa*0x25f+0x11f*-0x1+0x1*-0x1697):_0x2adc03['camera']['camera'];if(_0x4fa622&&(!_0x5aef9a['camera']['rect']['equals'](_0x4fa622['rect'])||!_0x5aef9a['camera']['scissorRec'+'t']['equals'](_0x4fa622['scissorRec'+'t'])))break;_0x2adc03['renderTarg'+'et']=_0x5aef9a['renderTarg'+'et'];}}['_logRender'+'Actions'](){if(mi['get'](Vl)){w['trace'](Vl,'Render\x20Act'+'ions\x20for\x20c'+'omposition'+':\x20'+this['name']);for(let _0x112af1=-0x6d*0x59+0x26da+0x1*-0xf5;_0x112af1<this['_renderAct'+'ions']['length'];_0x112af1++){const _0x3bad45=this['_renderAct'+'ions'][_0x112af1],_0x1f51fa=_0x3bad45['camera'];if(_0x3bad45['useCameraP'+'asses'])w['trace'](Vl,_0x112af1+('CustomPass'+'es\x20Cam:\x20')+(_0x1f51fa?_0x1f51fa['entity']['name']:'-'));else{const _0x5388b2=_0x3bad45['layer'],_0x4a9987=_0x5388b2['enabled']&&this['isEnabled'](_0x5388b2,_0x3bad45['transparen'+'t']),_0x1a34b8=(_0x3bad45['clearColor']?'Color\x20':'.....\x20')+(_0x3bad45['clearDepth']?'Depth\x20':'.....\x20')+(_0x3bad45['clearStenc'+'il']?'Stencil':'.......');w['trace'](Vl,_0x112af1+('\x20Cam:\x20'+(_0x1f51fa?_0x1f51fa['entity']['name']:'-'))['padEnd'](0x34*-0xbf+0xd73+0x196f*0x1,'\x20')+('\x20Lay:\x20'+_0x5388b2['name'])['padEnd'](-0x721+0x10e*-0x2+-0x4d*-0x1f,'\x20')+(_0x3bad45['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x4a9987?'\x20ENABLED\x20':'\x20DISABLED')+('\x20RT:\x20'+(_0x3bad45['renderTarg'+'et']?_0x3bad45['renderTarg'+'et']['name']:'-'))['padEnd'](0x1*0xe87+-0x17d0+0x967,'\x20')+'\x20Clear:\x20'+_0x1a34b8+(_0x3bad45['firstCamer'+'aUse']?'\x20CAM-FIRST':'')+(_0x3bad45['lastCamera'+'Use']?'\x20CAM-LAST':'')+(_0x3bad45['triggerPos'+'tprocess']?'\x20POSTPROCE'+'SS':''));}}}}['_isLayerAd'+'ded'](_0x5ee5b0){const _0x15826c=this['layerIdMap']['get'](_0x5ee5b0['id'])===_0x5ee5b0;return w['assert'](!_0x15826c,'Layer\x20is\x20a'+'lready\x20add'+'ed:\x20'+_0x5ee5b0['name']),_0x15826c;}['_isSublaye'+'rAdded'](_0x1abca0,_0x10d33b){return(_0x10d33b?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['get'](_0x1abca0)!==void(-0xeb9*-0x2+-0x9d*0x37+0x1*0x449)?(w['error']('Sublayer\x20'+_0x1abca0['name']+(',\x20transpar'+'ent:\x20')+_0x10d33b+('\x20is\x20alread'+'y\x20added.')),!(-0x12fd*-0x1+0x4c3*0x7+-0x3452)):!(0x1b20+0x55a+-0x2079);}['push'](_0x23aa41){this['_isLayerAd'+'ded'](_0x23aa41)||(this['layerList']['push'](_0x23aa41),this['layerList']['push'](_0x23aa41),this['_opaqueOrd'+'er'][_0x23aa41['id']]=this['subLayerLi'+'st']['push'](!(-0x19cd+-0x1*0x1a3c+-0x1*-0x340a))-(0x1d00+0x642+0x5*-0x70d),this['_transpare'+'ntOrder'][_0x23aa41['id']]=this['subLayerLi'+'st']['push'](!(0x2516+0x1*0x37+-0x254d))-(-0x19f+-0x1*-0x1d4d+-0x1bad),this['subLayerEn'+'abled']['push'](!(0x1*0x1cab+0x1578+-0x3223)),this['subLayerEn'+'abled']['push'](!(-0x1524+0x109*-0x15+-0x3*-0xe4b)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x4aa+0x540+-0x9ea),this['fire']('add',_0x23aa41));}['insert'](_0xb84cec,_0x8c7cdb){if(this['_isLayerAd'+'ded'](_0xb84cec))return;this['layerList']['splice'](_0x8c7cdb,-0x23ac+-0x47f*-0x7+0x433,_0xb84cec,_0xb84cec),this['subLayerLi'+'st']['splice'](_0x8c7cdb,0x61+-0x2e7+0x286,!(-0x1f9*0x1+0x6bb+-0x1*0x4c1),!(-0x17c*-0x13+-0x17aa+-0x245*0x2));const _0x343384=this['layerList']['length'];this['_updateOpa'+'queOrder'](_0x8c7cdb,_0x343384-(-0x1a94+0x11*0x28+0x36b*0x7)),this['_updateTra'+'nsparentOr'+'der'](_0x8c7cdb,_0x343384-(0x1*0xe6e+0x179*0x9+-0xdd7*0x2)),this['subLayerEn'+'abled']['splice'](_0x8c7cdb,-0x1841*-0x1+0x239e+0x27*-0x189,!(0x1*0x43+0x22*-0x8d+0x1277),!(-0xc*-0x15a+-0xcd8+-0x360)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x4*-0x9aa+-0x1a07*-0x1+-0x40af*0x1),this['fire']('add',_0xb84cec);}['remove'](_0x5427df){let _0x56ee69=this['layerList']['indexOf'](_0x5427df);for(delete this['_opaqueOrd'+'er'][_0x56ee69],delete this['_transpare'+'ntOrder'][_0x56ee69];_0x56ee69>=0x204c+-0x1b*-0x132+-0x4092;)this['layerList']['splice'](_0x56ee69,-0x1bb7+-0x162c+-0x18f2*-0x2),this['subLayerLi'+'st']['splice'](_0x56ee69,0x21de+-0x1fc5*0x1+0x8*-0x43),this['subLayerEn'+'abled']['splice'](_0x56ee69,-0x1216*-0x1+-0x16d7+0x4c2),_0x56ee69=this['layerList']['indexOf'](_0x5427df),this['_dirty']=!(0x2169*0x1+-0x81*0x29+-0xcc0),this['fire']('remove',_0x5427df);const _0x14847d=this['layerList']['length'];this['_updateOpa'+'queOrder'](-0x8b*-0x2e+0x17f5+-0x30ef,_0x14847d-(-0x1872+0x5*-0x15a+0x1f35)),this['_updateTra'+'nsparentOr'+'der'](0x17*0x163+-0x3*0x717+-0xaa0,_0x14847d-(-0xe5*0x9+0x100b+0x199*-0x5)),this['_updateLay'+'erMaps']();}['pushOpaque'](_0x4572f3){this['_isSublaye'+'rAdded'](_0x4572f3,!(0x3a9*0x9+-0x2404+0x314))||(this['layerList']['push'](_0x4572f3),this['_opaqueOrd'+'er'][_0x4572f3['id']]=this['subLayerLi'+'st']['push'](!(-0x48b*0x5+0x1*-0x1953+0x300b))-(0x24ed+-0x8a+-0x1*0x2462),this['subLayerEn'+'abled']['push'](!(-0x5ab*0x3+-0x269e+0x379f)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x1f99+-0x20c3*0x1+0x12a),this['fire']('add',_0x4572f3));}['insertOpaq'+'ue'](_0xf0f6cd,_0x17dbaf){if(this['_isSublaye'+'rAdded'](_0xf0f6cd,!(0x1efb+0x155a+-0x3454)))return;this['layerList']['splice'](_0x17dbaf,0x2597+-0x1775+0x3*-0x4b6,_0xf0f6cd),this['subLayerLi'+'st']['splice'](_0x17dbaf,-0x7fb*0x3+-0x1ae*0x14+0xb*0x53b,!(0x74+0x6ba+-0xb*0xa7));const _0xe4f022=this['subLayerLi'+'st']['length'];this['_updateOpa'+'queOrder'](_0x17dbaf,_0xe4f022-(-0x269b*-0x1+-0x1*-0x1ad9+-0x3*0x15d1)),this['subLayerEn'+'abled']['splice'](_0x17dbaf,0x1*0xf6b+-0x23ce+0x1463,!(0x1*-0x89b+-0x8e6+0x1181)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x269*0xf+-0x523+0x634*-0x5),this['fire']('add',_0xf0f6cd);}['removeOpaq'+'ue'](_0x5c94cb){for(let _0x55aca0=-0x1196*-0x2+-0xeac+0x148*-0x10,_0x51665d=this['layerList']['length'];_0x55aca0<_0x51665d;_0x55aca0++)if(this['layerList'][_0x55aca0]===_0x5c94cb&&!this['subLayerLi'+'st'][_0x55aca0]){this['layerList']['splice'](_0x55aca0,0x23*-0x37+-0x2393+0x3eb*0xb),this['subLayerLi'+'st']['splice'](_0x55aca0,-0xa08+-0x2467*-0x1+-0x1a5e),_0x51665d--,this['_updateOpa'+'queOrder'](_0x55aca0,_0x51665d-(-0x1*-0xf1b+0x1d09*-0x1+0xdef)),this['subLayerEn'+'abled']['splice'](_0x55aca0,0x1946+0x1c4c+0x3591*-0x1),this['_dirty']=!(0xd*-0x1bb+0x157*-0xe+0x2941),this['layerList']['indexOf'](_0x5c94cb)<-0x1d83+0x29c+-0x47*-0x61&&this['fire']('remove',_0x5c94cb);break;}this['_updateLay'+'erMaps']();}['pushTransp'+'arent'](_0xbedd83){this['_isSublaye'+'rAdded'](_0xbedd83,!(0xf0b+0x47*-0x3e+0x13*0x1d))||(this['layerList']['push'](_0xbedd83),this['_transpare'+'ntOrder'][_0xbedd83['id']]=this['subLayerLi'+'st']['push'](!(-0x4*-0x982+-0x2*0xc1f+-0xdca))-(-0x15d7*0x1+0xc30+0x9a8),this['subLayerEn'+'abled']['push'](!(0x4f*0x55+0x1f62+0x7*-0x83b)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x460+-0xd76+0x8eb*0x2),this['fire']('add',_0xbedd83));}['insertTran'+'sparent'](_0x5a0f07,_0x2e8207){if(this['_isSublaye'+'rAdded'](_0x5a0f07,!(0x255e+0x7*-0x12d+-0x1d23*0x1)))return;this['layerList']['splice'](_0x2e8207,-0x193f+-0x67c+0x1fbb,_0x5a0f07),this['subLayerLi'+'st']['splice'](_0x2e8207,0x121*0x1+-0x8c2+0x7a1,!(-0x5a*0xc+-0x1fc8+0x2400));const _0x45f215=this['subLayerLi'+'st']['length'];this['_updateTra'+'nsparentOr'+'der'](_0x2e8207,_0x45f215-(0xc9e+-0x11*0x1e9+0x13dc)),this['subLayerEn'+'abled']['splice'](_0x2e8207,-0x3ae+0x25c3+0x15d*-0x19,!(0xaa+0xb*0xaf+-0x82f)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x1*0x2291+-0x8ad+-0x2e2*-0xf),this['fire']('add',_0x5a0f07);}['removeTran'+'sparent'](_0x355f65){for(let _0x5b31c4=0x1a88+0x31*0x1f+-0x2077,_0x1ae9e4=this['layerList']['length'];_0x5b31c4<_0x1ae9e4;_0x5b31c4++)if(this['layerList'][_0x5b31c4]===_0x355f65&&this['subLayerLi'+'st'][_0x5b31c4]){this['layerList']['splice'](_0x5b31c4,0x1*-0x853+-0x1ca6+0x24fa),this['subLayerLi'+'st']['splice'](_0x5b31c4,-0x2a3+0x19a2+-0x16fe),_0x1ae9e4--,this['_updateTra'+'nsparentOr'+'der'](_0x5b31c4,_0x1ae9e4-(0x1959+-0x306*-0x8+0x28*-0x13d)),this['subLayerEn'+'abled']['splice'](_0x5b31c4,-0xf01+0x1529*-0x1+0x242b),this['_dirty']=!(-0x1bd6*0x1+-0x9*-0x109+0x1285*0x1),this['layerList']['indexOf'](_0x355f65)<0x1*0x8dc+0x1*0xc0e+-0x14ea&&this['fire']('remove',_0x355f65);break;}this['_updateLay'+'erMaps']();}['getOpaqueI'+'ndex'](_0x4952e6){return this['layerOpaqu'+'eIndexMap']['get'](_0x4952e6)??-(-0x8e*0x11+-0x5ee*-0x5+-0x1437);}['getTranspa'+'rentIndex'](_0xdfa65b){return this['layerTrans'+'parentInde'+'xMap']['get'](_0xdfa65b)??-(-0x1781+0x1197+0x5eb);}['isEnabled'](_0x190023,_0x2a9347){if(_0x190023['enabled']){const _0x34aaf5=_0x2a9347?this['getTranspa'+'rentIndex'](_0x190023):this['getOpaqueI'+'ndex'](_0x190023);if(_0x34aaf5>=0xd2b+0x1089+-0x1db4)return this['subLayerEn'+'abled'][_0x34aaf5];}return!(-0x1766+-0x501*0x2+0x2169);}['_updateLay'+'erMaps'](){this['layerIdMap']['clear'](),this['layerNameM'+'ap']['clear'](),this['layerOpaqu'+'eIndexMap']['clear'](),this['layerTrans'+'parentInde'+'xMap']['clear']();for(let _0x577151=0x19*-0x6e+-0x2515+0x2fd3;_0x577151<this['layerList']['length'];_0x577151++){const _0x287598=this['layerList'][_0x577151];this['layerIdMap']['set'](_0x287598['id'],_0x287598),this['layerNameM'+'ap']['set'](_0x287598['name'],_0x287598),(this['subLayerLi'+'st'][_0x577151]?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['set'](_0x287598,_0x577151);}}['getLayerBy'+'Id'](_0x27ba32){return this['layerIdMap']['get'](_0x27ba32)??null;}['getLayerBy'+'Name'](_0x170956){return this['layerNameM'+'ap']['get'](_0x170956)??null;}['_updateOpa'+'queOrder'](_0x45db79,_0x52a6a7){for(let _0x42b4fb=_0x45db79;_0x42b4fb<=_0x52a6a7;_0x42b4fb++)this['subLayerLi'+'st'][_0x42b4fb]===!(0x3*-0x4e9+-0x269f*0x1+0x9d*0x57)&&(this['_opaqueOrd'+'er'][this['layerList'][_0x42b4fb]['id']]=_0x42b4fb);}['_updateTra'+'nsparentOr'+'der'](_0x276190,_0x3de218){for(let _0x511310=_0x276190;_0x511310<=_0x3de218;_0x511310++)this['subLayerLi'+'st'][_0x511310]===!(-0x85d+0x1087+-0x82a)&&(this['_transpare'+'ntOrder'][this['layerList'][_0x511310]['id']]=_0x511310);}['_sortLayer'+'sDescendin'+'g'](_0x41d9f1,_0x2bc8e6,_0xdad181){let _0x2b3286=-(-0x1bb2+-0x7ff+0x23b2),_0x4516f7=-(-0x24fd+-0x15bd+-0x1f*-0x1e5);for(let _0x22dfea=0xb7+0x11*-0x95+0x92e,_0x5eebf8=_0x41d9f1['length'];_0x22dfea<_0x5eebf8;_0x22dfea++){const _0x4e4363=_0x41d9f1[_0x22dfea];_0xdad181['hasOwnProp'+'erty'](_0x4e4363)&&(_0x2b3286=Math['max'](_0x2b3286,_0xdad181[_0x4e4363]));}for(let _0x502cd8=0x19*-0x49+-0x798+0xeb9,_0x3dfa3d=_0x2bc8e6['length'];_0x502cd8<_0x3dfa3d;_0x502cd8++){const _0x520d3a=_0x2bc8e6[_0x502cd8];_0xdad181['hasOwnProp'+'erty'](_0x520d3a)&&(_0x4516f7=Math['max'](_0x4516f7,_0xdad181[_0x520d3a]));}return _0x2b3286===-(0x1*-0x1ba4+-0x3*0x1b1+0x20b8)&&_0x4516f7!==-(-0x2557*0x1+0x9*0x2a5+0xd8b)?0x9f1+0xb32*0x1+-0x2*0xa91:_0x4516f7===-(-0x1*-0x167+0x2523+-0x1*0x2689)&&_0x2b3286!==-(0x517*0x2+-0x40+-0x9ed)?-(-0x1*-0x527+-0x47*0x7b+0x1cf7):_0x4516f7-_0x2b3286;}['sortTransp'+'arentLayer'+'s'](_0x2c1b26,_0x12cc1a){return this['_sortLayer'+'sDescendin'+'g'](_0x2c1b26,_0x12cc1a,this['_transpare'+'ntOrder']);}['sortOpaque'+'Layers'](_0x32fda2,_0x58bc86){return this['_sortLayer'+'sDescendin'+'g'](_0x32fda2,_0x58bc86,this['_opaqueOrd'+'er']);}}const dc=new D(),wi={'bias':0x0,'normalBias':0x0},ho=new ie(),pf={'r':0x0,'g':0x1,'b':0x2,'a':0x3},fu={'directional':ve,'omni':Ke,'point':Ke,'spot':Ze},lA=[[new re(-0xc55+-0x5b8*0x3+0x1d7d,0x18c2*-0x1+-0x24c6+0x3d88,-0xc+-0x290+0x29d,-0xb*0x45+0x29*0xd3+-0x1*0x1ed3)],[new re(-0x2648+-0x2*-0xb32+0x4*0x3f9,0x1*0x1ef7+-0x221b+-0x6*-0x86,0x1d2a+0x679+-0x23a3+0.5,-0x25b+0x13ef+-0xa*0x1c2+0.5),new re(0x2*-0x28+-0x1*-0x124f+-0x11ff,0x710*0x2+0x44*-0x2+-0xd98+0.5,-0x1aa+0x162+0x48+0.5,0x6f0+-0x10d1+0x9e1+0.5)],[new re(0x2*0xd9f+-0x2f5*0x7+0x19*-0x43,0x25c0+0x15b*0x1c+-0x12ed*0x4,0x1fd5+-0x1d8+-0x355*0x9+0.5,-0x20a2+-0x5*-0x12a+0x1ad0+0.5),new re(-0x206a+-0x1*-0x13eb+0xc7f,-0x1164+-0x1a0c+0x56e*0x8+0.5,0x2399+0x1*0x1594+0x130f*-0x3+0.5,0x213+-0x10c0+-0xdd*-0x11+0.5),new re(0x23b6+-0x3c*0x22+0x86*-0x35+0.5,-0x114+-0xac6+0xbda,-0x1*0x1489+-0x12*0xbf+0x21f7+0.5,0x10ef+-0x92*0x2e+0x94d+0.5)],[new re(-0x1d9c+-0x1fd3+-0x3d6f*-0x1,-0x4f3+-0x439+-0x1*-0x92c,0x18a6+-0x11*-0x10+0x3*-0x892+0.5,-0x49f+-0x3*0x33+0x538+0.5),new re(0x7*0x1b1+0x5*-0x314+-0x3*-0x12f,-0x1442+0x1*0x1e4f+-0x53*0x1f+0.5,0x1*0xf1+-0x3*-0x3ec+0x1*-0xcb5+0.5,-0x2*0x775+-0x1248+-0x2*-0x1099+0.5),new re(-0x47*0x1f+0x97*0x11+0x16e*-0x1+0.5,0xb93*-0x3+0x7c7*-0x2+0x3247,0x1*-0x1652+0x17f*0x14+-0x79a+0.5,0x1*-0x183a+-0x1*-0x2356+-0xb1c+0.5),new re(0x140+-0x3*0x4dc+0xd54+0.5,0x22ed+-0x9d*0xf+0x1*-0x19ba+0.5,0x2*0xb25+0x38b*-0x6+-0x108+0.5,-0x131c+-0xcaa+0x48a*0x7+0.5)]],cA={'rrr':0x1,'ggg':0x2,'bbb':0x4,'aaa':0x8,'rgb':0x7};let hA=-0x2da*0x4+0x85b*0x4+-0x1604*0x1;class dA{constructor(_0x56a0f4,_0x533bdf,_0x254623){this['light']=_0x254623,this['camera']=_0x56a0f4,this['shadowCame'+'ra']=Cv['createShad'+'owCamera'](_0x254623['_shadowTyp'+'e'],_0x254623['_type'],_0x533bdf),this['shadowMatr'+'ix']=new te(),this['shadowView'+'port']=new re(-0x49*-0x6b+-0x16e8+-0x21*0x3b,-0x17f*0x1+-0x1eb*0x14+-0x39*-0xb3,0x1*0x1c18+0xab3+-0x1365*0x2,0xa61+0x1136*-0x2+0x180c),this['shadowScis'+'sor']=new re(0x1*0xcfe+-0x697+-0x667,0x1b7b+0x1bdf+-0x41*0xda,0x6e9+-0xa61+0x1*0x379,0xa*-0xe+0x8ae+0x1*-0x821),this['projection'+'Compensati'+'on']=-0x7ed*-0x2+-0x4b9+-0x7*0x197,this['face']=_0x533bdf,this['visibleCas'+'ters']=[],this['viewBindGr'+'oups']=[];}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x8a3a2=>{_0x8a3a2['defaultUni'+'formBuffer']['destroy'](),_0x8a3a2['destroy']();}),this['viewBindGr'+'oups']['length']=-0x452+-0x4*0xa+0x47a;}get['shadowBuff'+'er'](){const _0x5aba6c=this['shadowCame'+'ra']['renderTarg'+'et'];return _0x5aba6c?this['light']['_isPcf']?_0x5aba6c['depthBuffe'+'r']:_0x5aba6c['colorBuffe'+'r']:null;}}class pl{constructor(_0x3b049f,_0x42a402){h(this,'layers',new Set()),h(this,'clusteredL'+'ighting'),h(this,'shadowDept'+'hState',Yt['DEFAULT']['clone']()),h(this,'clusteredF'+'lags',0xae8+0x1*0x2162+0x1*-0x2c4a),h(this,'clusteredD'+'ata',new Uint32Array(-0x22cf+0x552+-0xec0*-0x2)),h(this,'clusteredD'+'ata16',new Uint16Array(this['clusteredD'+'ata']['buffer'])),h(this,'_evtDevice'+'Restored',null),(this['device']=_0x3b049f,this['clusteredL'+'ighting']=_0x42a402,this['id']=hA++,this['_evtDevice'+'Restored']=_0x3b049f['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this),this['_type']=ve,this['_color']=new ie(0x16ae+0x4*0x268+-0x204e+0.8,0x142d+0x2*0x199+-0x175f+0.8,-0x659+0xe3b*-0x1+0xc*0x1b7+0.8),this['_intensity']=0x1af8+-0x1f18+0x421,this['_affectSpe'+'cularity']=!(-0x19df+-0x12b2*0x1+0x2c91*0x1),this['_luminance']=-0x3b*-0x1d+0x5f*0x1a+0x1055*-0x1,this['_castShado'+'ws']=!(-0x3aa+-0x23b*-0x7+-0xb*0x116),this['_enabled']=!(0x2522+0x280+0x5*-0x7ed),this['_mask']=Ss,this['isStatic']=!(-0x9*-0x21b+0x97f+-0x1c71),this['key']=0x11f3+0x71a+-0x1*0x190d,this['bakeDir']=!(0x274*0x8+0x929+-0x1cc9),this['bakeNumSam'+'ples']=0x22bd+0x7*0x115+-0x2a4f*0x1,this['bakeArea']=0x1c0e+0x1*-0x214c+0x53e,this['attenuatio'+'nStart']=0x2*0x7d3+-0x1*0xe2f+-0x16d*0x1,this['attenuatio'+'nEnd']=-0x726+0x1f6d+-0x183d,this['_falloffMo'+'de']=Qp,this['_shadowTyp'+'e']=$s,this['_vsmBlurSi'+'ze']=-0xfbc*0x1+-0x152c+0x41b*0x9,this['vsmBlurMod'+'e']=em,this['vsmBias']=(-0x1*0x252e+-0x9b0+0x2ede+0.01)*(0x4*-0x278+0x1*0xed7+-0x4f7+0.25),this['_cookie']=null,this['cookieInte'+'nsity']=0xe15*-0x2+0x993+0x1298,this['_cookieFal'+'loff']=!(-0x1*-0x1999+0x93*0x9+0x16*-0x166),this['_cookieCha'+'nnel']='rgb',this['_cookieTra'+'nsform']=null,this['_cookieTra'+'nsformUnif'+'orm']=new Float32Array(-0x3*0x417+-0xed6*-0x1+0x1*-0x28d),this['_cookieOff'+'set']=null,this['_cookieOff'+'setUniform']=new Float32Array(0x5*-0x3d7+0xe50+0x1*0x4e5),this['_cookieTra'+'nsformSet']=!(0x5*-0x5ed+0xe3b*-0x2+0x1a*0x23c),this['_cookieOff'+'setSet']=!(-0x32b*0x5+0x26e4+0x5*-0x49c),this['_innerCone'+'Angle']=0xca4+0x23*-0x108+-0x1*-0x179c,this['_outerCone'+'Angle']=-0xcda+0xe*-0x22b+0x2b61,this['cascades']=null,this['_shadowMat'+'rixPalette']=null,this['_shadowCas'+'cadeDistan'+'ces']=null,this['numCascade'+'s']=-0x18*-0xd7+-0x69d+0x2*-0x6c5,this['_cascadeBl'+'end']=0x246+-0x716*-0x1+0x257*-0x4,this['cascadeDis'+'tribution']=0x1*0x22cb+0x919+-0x2be4+0.5,this['_shape']=Ys,this['_colorLine'+'ar']=new Float32Array(-0x2e9*-0x2+-0x8ba*0x1+0x9*0x53),this['_updateLin'+'earColor'](),this['_position']=new D(0x16*-0x169+-0xd3e+0xb11*0x4,-0x1*-0x12ba+-0x4*0x47a+-0xd2,-0xe4*0x2+-0x1590+0x1758),this['_direction']=new D(0xa78+0xcf4*0x3+-0x3154,-0x107e+0x25*0xd1+0xdb7*-0x1,-0x2109*-0x1+0x427*0x4+-0x47*0xb3),this['_innerCone'+'AngleCos']=Math['cos'](this['_innerCone'+'Angle']*Math['PI']/(-0x89b+0xf1*-0x2+0xbf*0xf)),this['_updateOut'+'erAngle'](this['_outerCone'+'Angle']),this['_usePhysic'+'alUnits']=void(-0x2eb+0x1*0x1e13+0x365*-0x8),this['_shadowMap']=null,this['_shadowRen'+'derParams']=[],this['_shadowCam'+'eraParams']=[],this['shadowDist'+'ance']=0x241+-0xa*-0x65+-0x60b,this['_shadowRes'+'olution']=-0x13*0x1d3+0x2*0x5a1+0x1b67,this['_shadowBia'+'s']=-(0x10d8+0x183e+-0x2916+0.0005),this['_shadowInt'+'ensity']=0x2*0x637+-0x3c*-0x95+-0x2f59,this['_normalOff'+'setBias']=0x29f*-0xa+0x2167+-0x731,this['shadowUpda'+'teMode']=lm,this['shadowUpda'+'teOverride'+'s']=null,this['_isVsm']=!(-0xec3*0x2+0x1*-0x111d+0x954*0x5),this['_isPcf']=!(-0x41b+-0x1a2*-0xd+-0x1*0x111f),this['_softShado'+'wParams']=new Float32Array(0x16a3+0x1*-0x1012+-0x68d),this['shadowSamp'+'les']=0x1511+0xd1e+0x5*-0x6d3,this['shadowBloc'+'kerSamples']=-0x2155*-0x1+0x1ace*0x1+-0x3c13,this['penumbraSi'+'ze']=-0xb3b+0x20b0+0x1574*-0x1,this['penumbraFa'+'lloff']=-0x23d9+-0x6d*-0x31+0xefd,this['_cookieMat'+'rix']=null,this['_atlasView'+'port']=null,this['atlasViewp'+'ortAllocat'+'ed']=!(0x264a+0xa*0x26b+-0x3e77),this['atlasVersi'+'on']=-0x1423*0x1+0x258b+0x1168*-0x1,this['atlasSlotI'+'ndex']=0x1*0x7a+-0x15*-0xfd+0x1*-0x153b,this['atlasSlotU'+'pdated']=!(0x1535+-0x267e*-0x1+-0x3bb2),this['_node']=null,this['_renderDat'+'a']=[],this['visibleThi'+'sFrame']=!(0x49*0x1b+-0x109e+0x8ec),this['maxScreenS'+'ize']=-0x2*-0x3ab+0x1f53+0x26a9*-0x1,this['_updateSha'+'dowBias']());}['destroy'](){var _0x2d3593;(_0x2d3593=this['_evtDevice'+'Restored'])==null||_0x2d3593['off'](),this['_evtDevice'+'Restored']=null,this['_destroySh'+'adowMap'](),this['releaseRen'+'derData'](),this['_renderDat'+'a']=null;}['onDeviceRe'+'stored'](){this['shadowUpda'+'teMode']===Ps&&(this['shadowUpda'+'teMode']=xr);}['releaseRen'+'derData'](){if(this['_renderDat'+'a']){for(let _0x5b3ece=0x1fcb+-0x67*-0x13+-0x2770;_0x5b3ece<this['_renderDat'+'a']['length'];_0x5b3ece++)this['_renderDat'+'a'][_0x5b3ece]['destroy']();this['_renderDat'+'a']['length']=-0x16d7*-0x1+-0x5ce*0x2+0xb3b*-0x1;}}['addLayer'](_0x28fe28){this['layers']['add'](_0x28fe28);}['removeLaye'+'r'](_0xe8076){this['layers']['delete'](_0xe8076);}set['shadowSamp'+'les'](_0x3edf3a){this['_softShado'+'wParams'][0xa24+0x6b9*0x1+0x10dd*-0x1]=_0x3edf3a;}get['shadowSamp'+'les'](){return this['_softShado'+'wParams'][0x243d+0x52*0xd+-0x2867];}set['shadowBloc'+'kerSamples'](_0x203444){this['_softShado'+'wParams'][-0x15*-0x1cd+-0x88c+-0x1d44]=_0x203444;}get['shadowBloc'+'kerSamples'](){return this['_softShado'+'wParams'][0x24d+-0x6d*0x1f+0xae7];}set['shadowBias'](_0x374add){this['_shadowBia'+'s']!==_0x374add&&(this['_shadowBia'+'s']=_0x374add,this['_updateSha'+'dowBias']());}get['shadowBias'](){return this['_shadowBia'+'s'];}set['numCascade'+'s'](_0x3db131){(!this['cascades']||this['numCascade'+'s']!==_0x3db131)&&(this['cascades']=lA[_0x3db131-(-0x1fa8+0x12a8+-0x1*-0xd01)],this['_shadowMat'+'rixPalette']=new Float32Array(0x1f05+0x1477+-0x333c),this['_shadowCas'+'cadeDistan'+'ces']=new Float32Array(-0x126b+-0x74f*0x4+-0x1*-0x2fab),this['_destroySh'+'adowMap'](),this['updateKey']());}get['numCascade'+'s'](){return this['cascades']['length'];}set['cascadeBle'+'nd'](_0x134206){this['_cascadeBl'+'end']!==_0x134206&&(this['_cascadeBl'+'end']=_0x134206,this['updateKey']());}get['cascadeBle'+'nd'](){return this['_cascadeBl'+'end'];}set['shadowMap'](_0x359234){this['_shadowMap']!==_0x359234&&(this['_destroySh'+'adowMap'](),this['_shadowMap']=_0x359234);}get['shadowMap'](){return this['_shadowMap'];}set['mask'](_0x27402f){this['_mask']!==_0x27402f&&(this['_mask']=_0x27402f,this['updateKey'](),this['updateClus'+'teredFlags']());}get['mask'](){return this['_mask'];}get['numShadowF'+'aces'](){const _0x28ed67=this['_type'];return _0x28ed67===ve?this['numCascade'+'s']:_0x28ed67===Ke?-0x147e*0x1+-0x52*0x1a+0x1*0x1cd8:0x2*0xd5d+-0x119a+-0x1*0x91f;}set['type'](_0x1fb975){if(this['_type']===_0x1fb975)return;this['_type']=_0x1fb975,this['_destroySh'+'adowMap'](),this['_updateSha'+'dowBias'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x46bc59=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowUpda'+'teOverride'+'s']=null,this['shadowType']=_0x46bc59;}get['type'](){return this['_type'];}set['shape'](_0x3e1802){if(this['_shape']===_0x3e1802)return;this['_shape']=_0x3e1802,this['_destroySh'+'adowMap'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x56d7ba=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowType']=_0x56d7ba;}get['shape'](){return this['_shape'];}set['usePhysica'+'lUnits'](_0x483198){this['_usePhysic'+'alUnits']!==_0x483198&&(this['_usePhysic'+'alUnits']=_0x483198,this['_updateLin'+'earColor']());}get['usePhysica'+'lUnits'](){return this['_usePhysic'+'alUnits'];}set['shadowType'](_0x150794){if(this['_shadowTyp'+'e']===_0x150794)return;let _0x43e3de=qi['get'](_0x150794);_0x43e3de||(_0x150794=$s);const _0x34beed=this['device'];_0x150794===al&&!_0x34beed['textureFlo'+'atRenderab'+'le']&&!_0x34beed['textureHal'+'fFloatRend'+'erable']&&(_0x150794=$s),this['_type']===Ke&&_0x150794!==tv&&_0x150794!==$s&&_0x150794!==sv&&_0x150794!==iv&&_0x150794!==al&&(_0x150794=$s),_0x150794===Jp&&(!_0x34beed['textureFlo'+'atRenderab'+'le']||!_0x34beed['textureFlo'+'atFilterab'+'le'])&&(_0x150794=au),_0x150794===au&&!_0x34beed['textureHal'+'fFloatRend'+'erable']&&(_0x150794=$s),_0x43e3de=qi['get'](_0x150794),this['_isVsm']=(_0x43e3de==null?void(-0x1e*-0x120+-0x3*0x517+0x39*-0x53):_0x43e3de['vsm'])??!(-0x157a*-0x1+-0xe72+0x7*-0x101),this['_isPcf']=(_0x43e3de==null?void(-0x1df9+-0x1*0x2514+0x430d):_0x43e3de['pcf'])??!(0x19b6+0x4a*0xb+-0x1ce3),this['_shadowTyp'+'e']=_0x150794,this['_destroySh'+'adowMap'](),this['updateKey']();}get['shadowType'](){return this['_shadowTyp'+'e'];}set['enabled'](_0x8dc174){this['_enabled']!==_0x8dc174&&(this['_enabled']=_0x8dc174,this['layersDirt'+'y']());}get['enabled'](){return this['_enabled'];}set['castShadow'+'s'](_0x97c711){this['_castShado'+'ws']!==_0x97c711&&(this['_castShado'+'ws']=_0x97c711,this['_destroySh'+'adowMap'](),this['layersDirt'+'y'](),this['updateKey']());}get['castShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']!==fi&&this['_mask']!==0x7*-0x44d+-0x33f*-0xb+0x2cd*-0x2;}set['shadowInte'+'nsity'](_0x592c29){this['_shadowInt'+'ensity']!==_0x592c29&&(this['_shadowInt'+'ensity']=_0x592c29,this['updateKey']());}get['shadowInte'+'nsity'](){return this['_shadowInt'+'ensity'];}get['bakeShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']===fi;}set['shadowReso'+'lution'](_0x18a60b){this['_shadowRes'+'olution']!==_0x18a60b&&(this['_type']===Ke?_0x18a60b=Math['min'](_0x18a60b,this['device']['maxCubeMap'+'Size']):_0x18a60b=Math['min'](_0x18a60b,this['device']['maxTexture'+'Size']),this['_shadowRes'+'olution']=_0x18a60b,this['_destroySh'+'adowMap']());}get['shadowReso'+'lution'](){return this['_shadowRes'+'olution'];}set['vsmBlurSiz'+'e'](_0x34bb22){this['_vsmBlurSi'+'ze']!==_0x34bb22&&(_0x34bb22%(-0x1cf1+-0x1528+0x321b)===-0x5e*0x11+0x487+-0x1*-0x1b7&&_0x34bb22++,this['_vsmBlurSi'+'ze']=_0x34bb22);}get['vsmBlurSiz'+'e'](){return this['_vsmBlurSi'+'ze'];}set['normalOffs'+'etBias'](_0x3daf98){if(this['_normalOff'+'setBias']!==_0x3daf98){const _0x411457=!this['_normalOff'+'setBias']&&_0x3daf98||this['_normalOff'+'setBias']&&!_0x3daf98;this['_normalOff'+'setBias']=_0x3daf98,_0x411457&&this['updateKey']();}}get['normalOffs'+'etBias'](){return this['_normalOff'+'setBias'];}set['falloffMod'+'e'](_0x478ea8){this['_falloffMo'+'de']!==_0x478ea8&&(this['_falloffMo'+'de']=_0x478ea8,this['updateKey'](),this['updateClus'+'teredFlags']());}get['falloffMod'+'e'](){return this['_falloffMo'+'de'];}set['innerConeA'+'ngle'](_0x4fc52c){this['_innerCone'+'Angle']!==_0x4fc52c&&(this['_innerCone'+'Angle']=_0x4fc52c,this['_innerCone'+'AngleCos']=Math['cos'](_0x4fc52c*Math['PI']/(-0x49*-0x2a+-0x11*-0x20b+-0x2e01*0x1)),this['updateClus'+'terData'](!(0x2fc+0x2af*-0x8+-0x127d*-0x1),!(-0xccc+0x1*-0xea0+0x1b6c)),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['innerConeA'+'ngle'](){return this['_innerCone'+'Angle'];}set['outerConeA'+'ngle'](_0x3f73e8){this['_outerCone'+'Angle']!==_0x3f73e8&&(this['_outerCone'+'Angle']=_0x3f73e8,this['_updateOut'+'erAngle'](_0x3f73e8),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['outerConeA'+'ngle'](){return this['_outerCone'+'Angle'];}set['penumbraSi'+'ze'](_0x440e30){this['_penumbraS'+'ize']=_0x440e30,this['_softShado'+'wParams'][-0x1*-0x1949+0x1f6f+-0x81a*0x7]=_0x440e30;}get['penumbraSi'+'ze'](){return this['_penumbraS'+'ize'];}set['penumbraFa'+'lloff'](_0x19d07e){this['_softShado'+'wParams'][0x26a7+0xf6f+-0x3613]=_0x19d07e;}get['penumbraFa'+'lloff'](){return this['_softShado'+'wParams'][0x2596+0x3*-0x873+-0xc3a];}['_updateOut'+'erAngle'](_0xb063b){const _0x297c38=_0xb063b*Math['PI']/(-0x1*0x6eb+0x26e0+0x1f41*-0x1);this['_outerCone'+'AngleCos']=Math['cos'](_0x297c38),this['_outerCone'+'AngleSin']=Math['sin'](_0x297c38),this['updateClus'+'terData'](!(0x17e3+-0x225a+0xa78),!(0xebc+-0x734+-0x8*0xf1));}set['intensity'](_0x440bce){this['_intensity']!==_0x440bce&&(this['_intensity']=_0x440bce,this['_updateLin'+'earColor']());}get['intensity'](){return this['_intensity'];}set['affectSpec'+'ularity'](_0x28bb28){this['_type']===ve&&(this['_affectSpe'+'cularity']=_0x28bb28,this['updateKey']());}get['affectSpec'+'ularity'](){return this['_affectSpe'+'cularity'];}set['luminance'](_0x5e536a){this['_luminance']!==_0x5e536a&&(this['_luminance']=_0x5e536a,this['_updateLin'+'earColor']());}get['luminance'](){return this['_luminance'];}get['cookieMatr'+'ix'](){return this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new te()),this['_cookieMat'+'rix'];}get['atlasViewp'+'ort'](){return this['_atlasView'+'port']||(this['_atlasView'+'port']=new re(-0x1ab1+0x1047+0xa6a,-0x10ad+0x4c0*-0x5+0x4f*0x83,-0x1*0xc8c+0x1aa*-0x1+0xe37,0x190f+-0x1026+0x23a*-0x4)),this['_atlasView'+'port'];}set['cookie'](_0x40fc17){this['_cookie']!==_0x40fc17&&(this['_cookie']=_0x40fc17,this['updateKey']());}get['cookie'](){return this['_cookie'];}set['cookieFall'+'off'](_0x3a231a){this['_cookieFal'+'loff']!==_0x3a231a&&(this['_cookieFal'+'loff']=_0x3a231a,this['updateKey']());}get['cookieFall'+'off'](){return this['_cookieFal'+'loff'];}set['cookieChan'+'nel'](_0x5ccae1){if(this['_cookieCha'+'nnel']!==_0x5ccae1){if(_0x5ccae1['length']<0x1*-0xd27+-0x1072+-0x2*-0xece){const _0x5d5f4f=_0x5ccae1['charAt'](_0x5ccae1['length']-(-0x29d+0x20d6+-0x1e38)),_0x52faad=0x1d*-0x13+0x2e*0x5c+-0xe5e-_0x5ccae1['length'];for(let _0x4d642f=-0xf51*-0x1+-0x14b9+0x568;_0x4d642f<_0x52faad;_0x4d642f++)_0x5ccae1+=_0x5d5f4f;}this['_cookieCha'+'nnel']=_0x5ccae1,this['updateKey'](),this['updateClus'+'teredFlags']();}}get['cookieChan'+'nel'](){return this['_cookieCha'+'nnel'];}set['cookieTran'+'sform'](_0x1bf575){this['_cookieTra'+'nsform']!==_0x1bf575&&(this['_cookieTra'+'nsform']=_0x1bf575,this['_cookieTra'+'nsformSet']=!!_0x1bf575,_0x1bf575&&!this['_cookieOff'+'set']&&(this['cookieOffs'+'et']=new J(),this['_cookieOff'+'setSet']=!(0x1*-0xe5+-0xb08*0x1+-0xbee*-0x1)),this['updateKey']());}get['cookieTran'+'sform'](){return this['_cookieTra'+'nsform'];}set['cookieOffs'+'et'](_0x15d382){if(this['_cookieOff'+'set']===_0x15d382)return;!!(this['_cookieTra'+'nsformSet']||_0x15d382)&&!_0x15d382&&this['_cookieOff'+'set']?this['_cookieOff'+'set']['set'](-0x6fd*0x3+0x347*-0x4+-0x319*-0xb,-0xbd6+-0xef7+0x1*0x1acd):this['_cookieOff'+'set']=_0x15d382,this['_cookieOff'+'setSet']=!!_0x15d382,_0x15d382&&!this['_cookieTra'+'nsform']&&(this['cookieTran'+'sform']=new re(0x5*0x2e2+-0x8c9+-0x5a0,-0x2173*0x1+-0x611*0x5+0x3*0x1543,0xacc+0x5*0x217+-0x153f,-0x16d1+0x1591+0x1*0x140),this['_cookieTra'+'nsformSet']=!(0x1e0e*0x1+0x1*-0xe6+-0x1d27)),this['updateKey']();}get['cookieOffs'+'et'](){return this['_cookieOff'+'set'];}['beginFrame'](){this['visibleThi'+'sFrame']=this['_type']===ve&&this['_enabled'],this['maxScreenS'+'ize']=-0x1a00+0x62c+-0x34e*-0x6,this['atlasViewp'+'ortAllocat'+'ed']=!(-0xd76+0xe28+0x3*-0x3b),this['atlasSlotU'+'pdated']=!(0x172c+0x3f1*-0x7+0x2*0x236);}['_destroySh'+'adowMap'](){if(this['releaseRen'+'derData'](),this['_shadowMap']&&(this['_shadowMap']['cached']||this['_shadowMap']['destroy'](),this['_shadowMap']=null),this['shadowUpda'+'teMode']===Ps&&(this['shadowUpda'+'teMode']=xr),this['shadowUpda'+'teOverride'+'s']){for(let _0x120536=0x6ff*-0x3+0x14d0+-0x2d*-0x1;_0x120536<this['shadowUpda'+'teOverride'+'s']['length'];_0x120536++)this['shadowUpda'+'teOverride'+'s'][_0x120536]===Ps&&(this['shadowUpda'+'teOverride'+'s'][_0x120536]=xr);}}['getRenderD'+'ata'](_0x967e08,_0x741278){for(let _0x356891=-0x1*-0x18f1+0x8e6*-0x1+0x100b*-0x1;_0x356891<this['_renderDat'+'a']['length'];_0x356891++){const _0x1da99e=this['_renderDat'+'a'][_0x356891];if(_0x1da99e['camera']===_0x967e08&&_0x1da99e['face']===_0x741278)return _0x1da99e;}const _0x48a9b2=new dA(_0x967e08,_0x741278,this);return this['_renderDat'+'a']['push'](_0x48a9b2),_0x48a9b2;}['clone'](){const _0x5cd052=new pl(this['device'],this['clusteredL'+'ighting']);return _0x5cd052['type']=this['_type'],_0x5cd052['setColor'](this['_color']),_0x5cd052['intensity']=this['_intensity'],_0x5cd052['affectSpec'+'ularity']=this['_affectSpe'+'cularity'],_0x5cd052['luminance']=this['_luminance'],_0x5cd052['castShadow'+'s']=this['castShadow'+'s'],_0x5cd052['_enabled']=this['_enabled'],_0x5cd052['attenuatio'+'nStart']=this['attenuatio'+'nStart'],_0x5cd052['attenuatio'+'nEnd']=this['attenuatio'+'nEnd'],_0x5cd052['falloffMod'+'e']=this['_falloffMo'+'de'],_0x5cd052['shadowType']=this['_shadowTyp'+'e'],_0x5cd052['vsmBlurSiz'+'e']=this['_vsmBlurSi'+'ze'],_0x5cd052['vsmBlurMod'+'e']=this['vsmBlurMod'+'e'],_0x5cd052['vsmBias']=this['vsmBias'],_0x5cd052['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x5cd052['mask']=this['mask'],this['shadowUpda'+'teOverride'+'s']&&(_0x5cd052['shadowUpda'+'teOverride'+'s']=this['shadowUpda'+'teOverride'+'s']['slice']()),_0x5cd052['innerConeA'+'ngle']=this['_innerCone'+'Angle'],_0x5cd052['outerConeA'+'ngle']=this['_outerCone'+'Angle'],_0x5cd052['numCascade'+'s']=this['numCascade'+'s'],_0x5cd052['cascadeDis'+'tribution']=this['cascadeDis'+'tribution'],_0x5cd052['cascadeBle'+'nd']=this['_cascadeBl'+'end'],_0x5cd052['shape']=this['_shape'],_0x5cd052['shadowDept'+'hState']['copy'](this['shadowDept'+'hState']),_0x5cd052['shadowBias']=this['shadowBias'],_0x5cd052['normalOffs'+'etBias']=this['_normalOff'+'setBias'],_0x5cd052['shadowReso'+'lution']=this['_shadowRes'+'olution'],_0x5cd052['shadowDist'+'ance']=this['shadowDist'+'ance'],_0x5cd052['shadowInte'+'nsity']=this['shadowInte'+'nsity'],_0x5cd052['shadowSamp'+'les']=this['shadowSamp'+'les'],_0x5cd052['shadowBloc'+'kerSamples']=this['shadowBloc'+'kerSamples'],_0x5cd052['penumbraSi'+'ze']=this['penumbraSi'+'ze'],_0x5cd052['penumbraFa'+'lloff']=this['penumbraFa'+'lloff'],_0x5cd052;}static['getLightUn'+'itConversi'+'on'](_0x2c7d93,_0x21fb36=Math['PI']/(-0x1*0x19d3+-0x16f*0x4+0x1f93),_0x2b4331=-0x33*0x67+0xa49+0xa3c){switch(_0x2c7d93){case Ze:{const _0x5b1e4c=Math['cos'](_0x21fb36),_0x5c8565=Math['cos'](_0x2b4331);return(-0x112a*0x1+-0x910+0x1a3c)*Math['PI']*(-0x3aa+-0x2314+0x26bf-_0x5c8565+(_0x5c8565-_0x5b1e4c)/(-0xb3*-0xc+-0x19b1+0x114f));}case Ke:return(-0x16*-0x44+0x232b+-0x833*0x5)*Math['PI'];case ve:return-0x6f*-0x4f+0x1*-0x1a48+-0x7f8;}}['_getUnifor'+'mBiasValue'+'s'](_0x12fe63){const _0x404af3=_0x12fe63['shadowCame'+'ra']['_farClip'];switch(this['_type']){case Ke:wi['bias']=this['shadowBias'],wi['normalBias']=this['_normalOff'+'setBias'];break;case Ze:this['_isVsm']?wi['bias']=-(0x1bbd+0x1*-0x838+0x1385*-0x1+0.00001)*(0x27*-0xf9+-0x19*-0x183+0x38):wi['bias']=this['shadowBias']*(-0x257b+-0x43f+0x29ce),wi['normalBias']=this['_isVsm']?this['vsmBias']/(this['attenuatio'+'nEnd']/(-0x1*-0x1ed9+0x18d7+-0x37a9)):this['_normalOff'+'setBias'];break;case ve:this['_isVsm']?wi['bias']=-(-0x3a9*0x5+-0x103f+0x228c+0.00001)*(-0x1*-0x18f4+0xd*0xc9+-0x2315):wi['bias']=this['shadowBias']/_0x404af3*(0x494*0x3+-0x25a*0xa+0xa2c),wi['normalBias']=this['_isVsm']?this['vsmBias']/(_0x404af3/(0x1869+0x18*0xd9+-0xa*0x479)):this['_normalOff'+'setBias'];break;}return wi;}['getColor'](){return this['_color'];}['getBoundin'+'gSphere'](_0x4b5002){if(this['_type']===Ze){const _0x424963=this['attenuatio'+'nEnd'],_0x340528=this['_outerCone'+'Angle'],_0xd8539d=this['_outerCone'+'AngleCos'],_0x5b464b=this['_node'];dc['copy'](_0x5b464b['up']),_0x340528>-0x916+0x2597+0x7*-0x40c?(_0x4b5002['radius']=_0x424963*this['_outerCone'+'AngleSin'],dc['mulScalar'](-_0x424963*_0xd8539d)):(_0x4b5002['radius']=_0x424963/((0xb70+-0x6*0x3a1+0xa58)*_0xd8539d),dc['mulScalar'](-_0x4b5002['radius'])),_0x4b5002['center']['add2'](_0x5b464b['getPositio'+'n'](),dc);}else this['_type']===Ke&&(_0x4b5002['center']=this['_node']['getPositio'+'n'](),_0x4b5002['radius']=this['attenuatio'+'nEnd']);}['getBoundin'+'gBox'](_0x27899e){if(this['_type']===Ze){const _0x2d1a10=this['attenuatio'+'nEnd'],_0x5ac866=this['_outerCone'+'Angle'],_0x48913c=this['_node'],_0x107a5d=Math['abs'](Math['sin'](_0x5ac866*Y['DEG_TO_RAD'])*_0x2d1a10);_0x27899e['center']['set'](0x20b3+0x1bf6+-0x3ca9,-_0x2d1a10*(-0x9*0x34a+0x353+0x3c1*0x7+0.5),-0x2363*0x1+-0x8*0xa+0x23b3),_0x27899e['halfExtent'+'s']['set'](_0x107a5d,_0x2d1a10*(0x26cf+-0x34d+-0x2382+0.5),_0x107a5d),_0x27899e['setFromTra'+'nsformedAa'+'bb'](_0x27899e,_0x48913c['getWorldTr'+'ansform'](),!(-0x203d+0x16f4+0x1*0x949));}else this['_type']===Ke&&(_0x27899e['center']['copy'](this['_node']['getPositio'+'n']()),_0x27899e['halfExtent'+'s']['set'](this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd']));}['_updateSha'+'dowBias'](){if(this['_type']===Ke&&!this['clusteredL'+'ighting'])this['shadowDept'+'hState']['depthBias']=-0x2dd+-0x1f76+0x2253,this['shadowDept'+'hState']['depthBiasS'+'lope']=-0x43c*-0x1+0x136c+-0x17a8;else{const _0x53722d=this['shadowBias']*-(-0xcab+0x18f8+-0x1*0x865);this['shadowDept'+'hState']['depthBias']=_0x53722d,this['shadowDept'+'hState']['depthBiasS'+'lope']=_0x53722d;}}['_updateLin'+'earColor'](){let _0xce8f57=this['_intensity'];this['_usePhysic'+'alUnits']&&(_0xce8f57=this['_luminance']/pl['getLightUn'+'itConversi'+'on'](this['_type'],this['_outerCone'+'Angle']*Y['DEG_TO_RAD'],this['_innerCone'+'Angle']*Y['DEG_TO_RAD']));const _0x3c75df=this['_color'],_0x380511=this['_colorLine'+'ar'];_0xce8f57>=-0x1*0x971+0x2c9+-0x9b*-0xb?ho['linear'](_0x3c75df)['mulScalar'](_0xce8f57):ho['copy'](_0x3c75df)['mulScalar'](_0xce8f57)['linear'](),_0x380511[0x1ed5*0x1+-0x6c5*-0x2+-0x2c5f]=ho['r'],_0x380511[0xd03*-0x2+0x3*0x7d8+0x27f]=ho['g'],_0x380511[0x9b*-0x24+-0x2699+0x3c67]=ho['b'],this['updateClus'+'terData'](!(0x4*-0x1cf+0x26b7+-0x1f7b*0x1));}['setColor'](){arguments['length']===0x8a*0x3e+-0x837+-0x1934?this['_color']['set'](arguments[0x5*0x569+0x1d02+-0x380f]['r'],arguments[0x1b6b*-0x1+-0x1d9d+-0x2*-0x1c84]['g'],arguments[-0x140c+0x2a5+0x195*0xb]['b']):arguments['length']===-0x1573+0x119*-0x15+-0x35*-0xd7&&this['_color']['set'](arguments[0x27b*0xe+-0x59*0x43+-0x1*0xb6f],arguments[0x114+-0x1*0x123a+0x1127*0x1],arguments[-0x1945+0x18d*-0x6+-0x3*-0xb87]),this['_updateLin'+'earColor']();}['layersDirt'+'y'](){this['layers']['forEach'](_0x35aff7=>{_0x35aff7['hasLight'](this)&&_0x35aff7['markLights'+'Dirty']();});}['updateKey'](){let _0x462051=this['_type']<<-0xe5*0x16+-0xc95+0x2060|this['_shadowTyp'+'e']<<-0x25*-0xe3+-0x1cf+-0x1ee7|this['_falloffMo'+'de']<<-0xce*0x16+0x40f*-0x7+0x2e34|(this['_normalOff'+'setBias']!==-0x332+-0x16e+0x4a0?-0x8a8*-0x2+-0xa15+-0x25*0x32:-0x177b*-0x1+-0x1941+0xe3*0x2)<<-0x4*-0x372+-0xfc7+0x1*0x215|(this['_cookie']?0x5*-0x283+0x10c5+-0x435:0x191a+0x146+-0xd3*0x20)<<0x7*0x4a+-0x1*-0x1a26+-0x1c17|(this['_cookieFal'+'loff']?0x907+0xc*-0xf8+0x12*0x25:0xbab+0x2424+0x2fcf*-0x1)<<0x11ff+-0x1*-0x268a+0x61*-0x95|pf[this['_cookieCha'+'nnel']['charAt'](-0x1*-0x14e3+-0x265b+0x45e*0x4)]<<0x17*-0x53+-0x23b4+0x2b3b|(this['_cookieTra'+'nsform']?0x23a1+-0x2498*0x1+0xf8:-0x446+0x1c3a+-0x17f4)<<-0x1869*0x1+0x1b82+0x1*-0x30d|this['_shape']<<-0xe5*-0x14+-0xd0c+-0xcd*0x6|(this['numCascade'+'s']>0x1821+0x13c4+-0x2be5*0x1?-0x4*-0x23b+0x17db+-0x20c6:0x1c99+-0x661+-0x1638)<<-0x184c+-0x1*-0x23a1+-0xb4c|(this['_cascadeBl'+'end']>0x186b+-0x1a6+-0x16c5?-0x19aa*-0x1+0x17cf+-0x8*0x62f:-0x1035+-0x1*-0x1ef9+-0xec4)<<0x1771+-0x1*-0x15e2+0x2d4b*-0x1|(this['affectSpec'+'ularity']?0x156*0x2+-0x1045+-0x6cd*-0x2:0x2*0x1041+-0xb*-0x74+-0x12bf*0x2)<<0x23cb+0x1beb*0x1+0x3faf*-0x1|this['mask']<<0x13a*0x10+0xd31+-0x20cb|(this['_castShado'+'ws']?0xa49*-0x2+-0x1bd7+0x306a:-0x1e7a+-0x37*0x18+-0x11d1*-0x2)<<-0x18*-0x130+0x2201+0x1a5*-0x26;this['_cookieCha'+'nnel']['length']===0x2550+0x13*-0x1bb+-0x46c&&(_0x462051|=pf[this['_cookieCha'+'nnel']['charAt'](0x1*0x662+0x1a66+-0x20c7)]<<0x209d*-0x1+0x2*-0x247+-0x253b*-0x1,_0x462051|=pf[this['_cookieCha'+'nnel']['charAt'](-0x100c+-0x18d*0x10+0x28de)]<<-0x7f0+-0x7c*0x4+0x9ee),_0x462051!==this['key']&&this['layersDirt'+'y'](),this['key']=_0x462051;}['updateClus'+'teredFlags'](){const _0x1fc1d7=!!(this['mask']&Ss),_0x4b1975=!!(this['mask']&di);this['clusteredF'+'lags']=(this['type']===Ze?-0x1a71+0x111b+0x957:0x505+0x43*-0x7f+0x1c38)<<-0x56d+-0x9*-0x171+-0x76e|(this['_shape']&-0x2646+-0x5bd+-0xa*-0x467)<<-0x1243+0x1167+0x7c*0x2|(this['_falloffMo'+'de']&0x152+0xbc1+-0xd12)<<-0x20b*0x6+0x962+0x6d*0x7|(cA[this['_cookieCha'+'nnel']]??0x8c0+0x1b02+0x18e*-0x17)<<-0x10c9+0x3d9+0x91*0x17|(_0x1fc1d7?-0xa1d*0x1+-0x1*0x1c4f+0x266d:-0x97a*0x4+-0x2*0x10ad+0x4742)<<0x8*-0x1a2+0x156b+-0x845|(_0x4b1975?-0x1948+-0x512*0x5+-0x57*-0x95:-0x1*0xebb+-0x1d*0x131+0x14c*0x26)<<0x85+0x1d26+-0x1d96;}['getCluster'+'edFlags'](_0x318f29,_0x351dc0){return this['clusteredF'+'lags']|((_0x318f29?Math['floor'](this['shadowInte'+'nsity']*(0x11a2+-0x4ad+0x1*-0xbf6)):-0x3*0x5f3+-0x5c*0x1+0x1235)&0x18db+0xa6*0x25+0x7d*-0x62)<<-0x10c1+0x18ab+-0x7ea|((_0x351dc0?Math['floor'](this['cookieInte'+'nsity']*(-0x27+-0x1277+0x1*0x139d)):0x3*0xb51+0x1dad+-0x2*0x1fd0)&-0x16*0xa0+-0x1*0x134f+0x220e)<<0xe7e+-0xff1*-0x2+0x8*-0x5cb;}['updateClus'+'terData'](_0x296d1e,_0x26e4cc){const {clusteredData16:_0x3459c1}=this,_0x335d12=Mn['float2Half'];_0x296d1e&&(_0x3459c1[-0x1813+-0x1*-0x160d+-0x103*-0x2]=_0x335d12(Y['clamp'](this['_colorLine'+'ar'][-0xf2c*-0x2+-0x23ed*0x1+0x595*0x1]/$c,0xa84+0x6a*0x4d+-0x3*0xe22,-0x10bbd+0x1e1a0+0x29fd)),_0x3459c1[0x2290+0x7b2+-0x2a41]=_0x335d12(Y['clamp'](this['_colorLine'+'ar'][0x2*-0xfec+0x7ef*0x3+-0x5*-0x19c]/$c,0x155c+0x1d89+-0x32e5,0x115a7+-0x8*0x32fe+0x18229)),_0x3459c1[0x82d+0x1bce+-0x23f9]=_0x335d12(Y['clamp'](this['_colorLine'+'ar'][0xd6a+0x2*0x12fd+-0x3362]/$c,0x5b3*0x5+-0x39a*-0x5+-0x5*0x94d,-0x14558+-0x18410+0x3c948))),_0x26e4cc&&(_0x3459c1[0x4*0x115+0x21d*-0x3+0x1*0x207]=_0x335d12(this['_innerCone'+'AngleCos']),_0x3459c1[-0x1a5c+0x641*-0x5+0x39a6]=_0x335d12(this['_outerCone'+'AngleCos']));}}class Mv{constructor(_0x476c14,_0x5f2a1b,_0x1c5ceb){h(this,'_areaLight'+'sEnabled',!(-0x188+-0x1016+-0x119f*-0x1)),h(this,'_cells',new D(-0x3*-0x814+-0x9f*-0x7+-0x1*0x1c8b,0x1*0x208b+-0x1b84+0x1ac*-0x3,-0x10b*0xf+0x1a3*-0x3+0x1498)),h(this,'_maxLights'+'PerCell',0x16*0x10+0xeca+0x161*-0xb),h(this,'_shadowsEn'+'abled',!(-0x1f*0xcf+0x1660+0x2b1*0x1)),h(this,'_shadowTyp'+'e',$s),h(this,'_shadowAtl'+'asResoluti'+'on',0x17a+0x25a6+0xf9*-0x20),h(this,'_cookiesEn'+'abled',!(0x2493+0x292+-0x2724)),h(this,'_cookieAtl'+'asResoluti'+'on',0x117*-0x2+-0xe*0x137+-0x4*-0x6cc),h(this,'debugLayer'),h(this,'atlasSplit',null),(this['_supportsA'+'reaLights']=_0x476c14,this['_maxTextur'+'eSize']=_0x5f2a1b,this['_dirtyLigh'+'tsFnc']=_0x1c5ceb);}['applySetti'+'ngs'](_0x1e1814){this['shadowsEna'+'bled']=_0x1e1814['lightingSh'+'adowsEnabl'+'ed']??this['shadowsEna'+'bled'],this['cookiesEna'+'bled']=_0x1e1814['lightingCo'+'okiesEnabl'+'ed']??this['cookiesEna'+'bled'],this['areaLights'+'Enabled']=_0x1e1814['lightingAr'+'eaLightsEn'+'abled']??this['areaLights'+'Enabled'],this['shadowAtla'+'sResolutio'+'n']=_0x1e1814['lightingSh'+'adowAtlasR'+'esolution']??this['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x1e1814['lightingCo'+'okieAtlasR'+'esolution']??this['cookieAtla'+'sResolutio'+'n'],this['maxLightsP'+'erCell']=_0x1e1814['lightingMa'+'xLightsPer'+'Cell']??this['maxLightsP'+'erCell'],this['shadowType']=_0x1e1814['lightingSh'+'adowType']??this['shadowType'],_0x1e1814['lightingCe'+'lls']&&(this['cells']=new D(_0x1e1814['lightingCe'+'lls']));}set['cells'](_0x51d681){this['_cells']['copy'](_0x51d681);}get['cells'](){return this['_cells'];}set['maxLightsP'+'erCell'](_0x4f8fc8){this['_maxLights'+'PerCell']=Y['clamp'](_0x4f8fc8,-0xdf*0x5+0x1075+0xc19*-0x1,-0x2043+-0x3*0x17f+0x25bf);}get['maxLightsP'+'erCell'](){return this['_maxLights'+'PerCell'];}set['cookieAtla'+'sResolutio'+'n'](_0x1de7e8){this['_cookieAtl'+'asResoluti'+'on']=Y['clamp'](_0x1de7e8,0xc*-0x198+-0xb*0x39+-0x65*-0x37,this['_maxTextur'+'eSize']);}get['cookieAtla'+'sResolutio'+'n'](){return this['_cookieAtl'+'asResoluti'+'on'];}set['shadowAtla'+'sResolutio'+'n'](_0x20b134){this['_shadowAtl'+'asResoluti'+'on']=Y['clamp'](_0x20b134,0x216b+-0xc9b+0x2*-0xa58,this['_maxTextur'+'eSize']);}get['shadowAtla'+'sResolutio'+'n'](){return this['_shadowAtl'+'asResoluti'+'on'];}set['shadowType'](_0x22481a){this['_shadowTyp'+'e']!==_0x22481a&&(this['_shadowTyp'+'e']=_0x22481a,this['_dirtyLigh'+'tsFnc']());}get['shadowType'](){return this['_shadowTyp'+'e'];}set['cookiesEna'+'bled'](_0x5232c7){this['_cookiesEn'+'abled']!==_0x5232c7&&(this['_cookiesEn'+'abled']=_0x5232c7,this['_dirtyLigh'+'tsFnc']());}get['cookiesEna'+'bled'](){return this['_cookiesEn'+'abled'];}set['areaLights'+'Enabled'](_0x3c2896){this['_supportsA'+'reaLights']&&this['_areaLight'+'sEnabled']!==_0x3c2896&&(this['_areaLight'+'sEnabled']=_0x3c2896,this['_dirtyLigh'+'tsFnc']());}get['areaLights'+'Enabled'](){return this['_areaLight'+'sEnabled'];}set['shadowsEna'+'bled'](_0x190739){this['_shadowsEn'+'abled']!==_0x190739&&(this['_shadowsEn'+'abled']=_0x190739,this['_dirtyLigh'+'tsFnc']());}get['shadowsEna'+'bled'](){return this['_shadowsEn'+'abled'];}}class xa{constructor(_0x23d617){this['morph']=_0x23d617,_0x23d617['incRefCoun'+'t'](),this['device']=_0x23d617['device'];const _0x481889=_0x23d617['_targets']['length'];this['shader']=this['_createSha'+'der'](_0x481889),this['_weights']=[],this['_weightMap']=new Map();for(let _0x41ebf3=0x239a+0x1*0x1655+-0x39ef;_0x41ebf3<_0x23d617['_targets']['length'];_0x41ebf3++){const _0x163f56=_0x23d617['_targets'][_0x41ebf3];_0x163f56['name']&&this['_weightMap']['set'](_0x163f56['name'],_0x41ebf3),this['setWeight'](_0x41ebf3,_0x163f56['defaultWei'+'ght']);}this['_shaderMor'+'phWeights']=new Float32Array(_0x481889),this['_shaderMor'+'phIndex']=new Uint32Array(_0x481889);const _0x8b3876=(_0xb2a465,_0x474a5a)=>(this[_0x474a5a]=_0x23d617['_createTex'+'ture'](_0xb2a465,_0x23d617['_renderTex'+'tureFormat']),new gt({'colorBuffer':this[_0x474a5a],'depth':!(-0x1*0x1933+0x504+0x4*0x50c)}));_0x23d617['morphPosit'+'ions']&&(this['rtPosition'+'s']=_0x8b3876('MorphRTPos','texturePos'+'itions')),_0x23d617['morphNorma'+'ls']&&(this['rtNormals']=_0x8b3876('MorphRTNrm','textureNor'+'mals')),this['_texturePa'+'rams']=new Float32Array([_0x23d617['morphTextu'+'reWidth'],_0x23d617['morphTextu'+'reHeight']]);const _0x1abd44=_0x23d617['aabb']['halfExtent'+'s'];this['_aabbSize']=new Float32Array([_0x1abd44['x']*(-0x4bd*-0x4+-0x1*-0x6a3+-0x1993),_0x1abd44['y']*(-0x1e6d+0x225c+-0x11*0x3b),_0x1abd44['z']*(0xd*-0x29f+0x8f2*-0x4+-0x1*-0x45df)]);const _0x3a1126=_0x23d617['aabb']['getMin']();this['_aabbMin']=new Float32Array([_0x3a1126['x']*(0x22f7+-0x2b3*-0x1+-0x25a8),_0x3a1126['y']*(0x1d*0xd3+0xa70+-0x2255),_0x3a1126['z']*(-0x9bd+0x11b1+-0x7f2)]),this['_aabbNrmSi'+'ze']=new Float32Array([0x82e*-0x3+-0x1*-0x1f3+0x1699,0xa*0x293+-0xa*-0x3a6+0xf8e*-0x4,0x1eb+0x7*0x589+-0x4*0xa2a]),this['_aabbNrmMi'+'n']=new Float32Array([-(-0x18c4+0xcd6+0xbef),-(-0x1c53*0x1+0x15c4+0x690),-(0x304+0x68d+0x99*-0x10)]),this['aabbSizeId']=this['device']['scope']['resolve']('aabbSize'),this['aabbMinId']=this['device']['scope']['resolve']('aabbMin'),this['morphTextu'+'reId']=this['device']['scope']['resolve']('morphTextu'+'re'),this['morphFacto'+'r']=this['device']['scope']['resolve']('morphFacto'+'r[0]'),this['morphIndex']=this['device']['scope']['resolve']('morphIndex'+'[0]'),this['countId']=this['device']['scope']['resolve']('count'),this['zeroTextur'+'es']=!(0x157f+-0x4fc*-0x4+0x14b7*-0x2);}['destroy'](){var _0x2e7315,_0x1bcc19,_0x21801f,_0x2f8240;this['shader']=null;const _0x4f5c79=this['morph'];_0x4f5c79&&(this['morph']=null,_0x4f5c79['decRefCoun'+'t'](),_0x4f5c79['refCount']<-0x7c9+-0x20b*0x9+0x1*0x1a2d&&_0x4f5c79['destroy']()),(_0x2e7315=this['rtPosition'+'s'])==null||_0x2e7315['destroy'](),this['rtPosition'+'s']=null,(_0x1bcc19=this['texturePos'+'itions'])==null||_0x1bcc19['destroy'](),this['texturePos'+'itions']=null,(_0x21801f=this['rtNormals'])==null||_0x21801f['destroy'](),this['rtNormals']=null,(_0x2f8240=this['textureNor'+'mals'])==null||_0x2f8240['destroy'](),this['textureNor'+'mals']=null;}['clone'](){return new xa(this['morph']);}['_getWeight'+'Index'](_0x473c9b){if(typeof _0x473c9b=='string'){const _0x138a78=this['_weightMap']['get'](_0x473c9b);return _0x138a78===void(0x255b+-0xccc+-0x188f*0x1)&&w['errorOnce']('Cannot\x20fin'+'d\x20morph\x20ta'+'rget\x20with\x20'+'name:\x20'+_0x473c9b+'.'),_0x138a78;}return _0x473c9b;}['getWeight'](_0x16e882){const _0x45a343=this['_getWeight'+'Index'](_0x16e882);return this['_weights'][_0x45a343];}['setWeight'](_0x2206dd,_0x488198){const _0x229cef=this['_getWeight'+'Index'](_0x2206dd);w['assert'](_0x229cef>=0x56*-0x59+0x5df+0x1*0x1807&&_0x229cef<this['morph']['_targets']['length']),this['_weights'][_0x229cef]=_0x488198,this['_dirty']=!(-0x1*-0x25cd+0x10b9+-0x3686);}['_createSha'+'der'](_0xc6b2b9){const _0xa57550=new Map();_0xa57550['set']('{MORPH_TEX'+'TURE_MAX_C'+'OUNT}',_0xc6b2b9),this['morph']['intRenderF'+'ormat']&&_0xa57550['set']('MORPH_INT','');const _0x5411e5=this['morph']['intRenderF'+'ormat']?'uvec4':'vec4';return $t['createShad'+'er'](this['device'],{'uniqueName':'TextureMor'+'phShader_'+_0xc6b2b9+'-'+(this['morph']['intRenderF'+'ormat']?'int':'float'),'attributes':{'vertex_position':Me},'vertexChunk':'morphVS','fragmentChunk':'morphPS','fragmentDefines':_0xa57550,'fragmentOutputTypes':[_0x5411e5]});}['_updateTex'+'tureRender'+'Target'](_0x5e7839,_0x23cfc8,_0x1200c0){const {morph:_0x1006bb,device:_0x4fa9e0}=this;this['setAabbUni'+'forms'](_0x1200c0),this['morphTextu'+'reId']['setValue'](_0x1200c0?_0x1006bb['targetsTex'+'turePositi'+'ons']:_0x1006bb['targetsTex'+'tureNormal'+'s']),_0x4fa9e0['setBlendSt'+'ate'](pt['NOBLEND']),this['countId']['setValue'](_0x23cfc8),this['morphFacto'+'r']['setValue'](this['_shaderMor'+'phWeights']),this['morphIndex']['setValue'](this['_shaderMor'+'phIndex']),Ar(_0x4fa9e0,_0x5e7839,this['shader']);}['_updateTex'+'tureMorph'](_0x2be36d){const _0x2e634e=this['device'];Q['pushGpuMar'+'ker'](_0x2e634e,'MorphUpdat'+'e'),(_0x2be36d>0x140c+0x21ac*-0x1+0x2*0x6d0||!this['zeroTextur'+'es'])&&(this['rtPosition'+'s']&&this['_updateTex'+'tureRender'+'Target'](this['rtPosition'+'s'],_0x2be36d,!(0x1*0xc5f+0x8f+-0xcee)),this['rtNormals']&&this['_updateTex'+'tureRender'+'Target'](this['rtNormals'],_0x2be36d,!(-0x144+-0x1*-0xc19+-0x63*0x1c)),this['zeroTextur'+'es']=_0x2be36d===0x1cbc+0x1dea+0x3aa6*-0x1),Q['popGpuMark'+'er'](_0x2e634e);}['setAabbUni'+'forms'](_0x3ef949=!(0x261d+-0x55*-0x10+-0x2b6d*0x1)){this['aabbSizeId']['setValue'](_0x3ef949?this['_aabbSize']:this['_aabbNrmSi'+'ze']),this['aabbMinId']['setValue'](_0x3ef949?this['_aabbMin']:this['_aabbNrmMi'+'n']);}['prepareRen'+'dering'](_0x3ed744){this['setAabbUni'+'forms']();}['update'](){this['_dirty']=!(-0xbb*-0xa+0x61d*-0x2+0x4ed);const _0xe30c5f=this['morph']['_targets'],_0x429e82=0x2050+-0x1*-0x7cd+-0x281d+0.00001,_0x47b4b1=this['_shaderMor'+'phWeights'],_0x2ca816=this['_shaderMor'+'phIndex'];let _0x119999=0x199+-0x13be+-0x3a1*-0x5;for(let _0xc12cd6=0x10c6+0x1*0x707+-0x3*0x7ef;_0xc12cd6<_0xe30c5f['length'];_0xc12cd6++)Math['abs'](this['getWeight'](_0xc12cd6))>_0x429e82&&(_0x47b4b1[_0x119999]=this['getWeight'](_0xc12cd6),_0x2ca816[_0x119999]=_0xc12cd6,_0x119999++);this['_updateTex'+'tureMorph'](_0x119999);}}class sr{constructor(){h(this,'graph',null),h(this,'meshInstan'+'ces',[]),h(this,'skinInstan'+'ces',[]),h(this,'morphInsta'+'nces',[]),(this['cameras']=[],this['lights']=[],this['_shadersVe'+'rsion']=0x1428*-0x1+-0x1*0x9c2+0x1dea,this['_immutable']=!(-0xd71*0x2+0xe9*-0x19+-0x3*-0x108c));}['getGraph'](){return this['graph'];}['setGraph'](_0x1c0750){this['graph']=_0x1c0750;}['getCameras'](){return this['cameras'];}['setCameras'](_0x27e993){this['cameras']=_0x27e993;}['getLights'](){return this['lights'];}['setLights'](_0x31ca6d){this['lights']=_0x31ca6d;}['getMateria'+'ls'](){const _0x110910=[];for(let _0x228bc6=-0xcc3*0x3+-0x1e8+-0x1*-0x2831;_0x228bc6<this['meshInstan'+'ces']['length'];_0x228bc6++){const _0x235abf=this['meshInstan'+'ces'][_0x228bc6];_0x110910['indexOf'](_0x235abf['material'])===-(-0x576*-0x1+-0x519+-0x5c)&&_0x110910['push'](_0x235abf['material']);}return _0x110910;}['clone'](){const _0x523af5=[],_0x550579=[],_0x493576=function(_0x5efc78){const _0x4144eb=_0x5efc78['clone']();_0x523af5['push'](_0x5efc78),_0x550579['push'](_0x4144eb);for(let _0x38dc6a=0x1*0xf98+0x21ad+0x3145*-0x1;_0x38dc6a<_0x5efc78['_children']['length'];_0x38dc6a++)_0x4144eb['addChild'](_0x493576(_0x5efc78['_children'][_0x38dc6a]));return _0x4144eb;},_0x495139=_0x493576(this['graph']),_0x496d43=[],_0x2ad6da=[],_0x39da66=[];for(let _0x3d7a11=0x16*0xfa+-0xe06+0x2*-0x3bb;_0x3d7a11<this['skinInstan'+'ces']['length'];_0x3d7a11++){const _0x2c0f42=this['skinInstan'+'ces'][_0x3d7a11]['skin'],_0x17f38a=new Ol(_0x2c0f42),_0x3fc030=[];for(let _0x510128=-0xd27+0x47b+0x8ac;_0x510128<_0x2c0f42['boneNames']['length'];_0x510128++){const _0x560665=_0x2c0f42['boneNames'][_0x510128],_0x2afd23=_0x495139['findByName'](_0x560665);_0x3fc030['push'](_0x2afd23);}_0x17f38a['bones']=_0x3fc030,_0x2ad6da['push'](_0x17f38a);}for(let _0x3e8f34=-0xd5b+-0x83e+-0x123*-0x13;_0x3e8f34<this['morphInsta'+'nces']['length'];_0x3e8f34++){const _0x4d5ea4=this['morphInsta'+'nces'][_0x3e8f34]['morph'],_0x35ff3e=new xa(_0x4d5ea4);_0x39da66['push'](_0x35ff3e);}for(let _0x3ce24b=0x633*0x1+-0x35*-0xb3+0xe2*-0x31;_0x3ce24b<this['meshInstan'+'ces']['length'];_0x3ce24b++){const _0x4fc8d4=this['meshInstan'+'ces'][_0x3ce24b],_0x5d88af=_0x523af5['indexOf'](_0x4fc8d4['node']),_0xf9ca3d=new He(_0x4fc8d4['mesh'],_0x4fc8d4['material'],_0x550579[_0x5d88af]);if(_0x4fc8d4['skinInstan'+'ce']){const _0xe9b234=this['skinInstan'+'ces']['indexOf'](_0x4fc8d4['skinInstan'+'ce']);_0xf9ca3d['skinInstan'+'ce']=_0x2ad6da[_0xe9b234];}if(_0x4fc8d4['morphInsta'+'nce']){const _0x256d19=this['morphInsta'+'nces']['indexOf'](_0x4fc8d4['morphInsta'+'nce']);_0xf9ca3d['morphInsta'+'nce']=_0x39da66[_0x256d19];}_0x496d43['push'](_0xf9ca3d);}const _0x3b6028=new sr();return _0x3b6028['graph']=_0x495139,_0x3b6028['meshInstan'+'ces']=_0x496d43,_0x3b6028['skinInstan'+'ces']=_0x2ad6da,_0x3b6028['morphInsta'+'nces']=_0x39da66,_0x3b6028['getGraph']()['syncHierar'+'chy'](),_0x3b6028;}['destroy'](){const _0x3a06ab=this['meshInstan'+'ces'];for(let _0x537480=0x5f4+0x149b+-0x20b*0xd;_0x537480<_0x3a06ab['length'];_0x537480++)_0x3a06ab[_0x537480]['destroy']();this['meshInstan'+'ces']['length']=0x245b+0x8*-0x3ad+0x251*-0x3;}['generateWi'+'reframe'](){He['_prepareRe'+'nderStyleF'+'orArray'](this['meshInstan'+'ces'],$r);}}class mm extends wd{constructor(_0x1fa92c,_0xdc74c7,{preferHighPrecision:_0x2d749d=!(-0xcba+-0xe55+-0x1*-0x1b10)}={}){super(),h(this,'_aabb'),h(this,'preferHigh'+'Precision'),(w['assert'](_0xdc74c7,'Morph\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0xdc74c7);const _0xa8455d=_0xdc74c7;this['preferHigh'+'Precision']=_0x2d749d,w['assert'](_0x1fa92c['every'](_0x55f22a=>!_0x55f22a['used']),'A\x20specifie'+'d\x20target\x20h'+'as\x20already'+'\x20been\x20used'+'\x20to\x20create'+'\x20a\x20Morph,\x20'+'use\x20its\x20cl'+'one\x20instea'+'d.'),this['_targets']=_0x1fa92c['slice']();const _0x5d5d8b=_0xa8455d['textureHal'+'fFloatRend'+'erable']?nt:void(0x1ece+0x26ad*0x1+-0x7*0x9ed),_0x4792db=_0xa8455d['textureFlo'+'atRenderab'+'le']?Xt:void(-0x2*-0x275+0x220d*0x1+-0x26f7);this['_renderTex'+'tureFormat']=this['preferHigh'+'Precision']?_0x4792db??_0x5d5d8b:_0x5d5d8b??_0x4792db,this['_renderTex'+'tureFormat']=this['_renderTex'+'tureFormat']??nd,this['intRenderF'+'ormat']=dn(this['_renderTex'+'tureFormat']),this['_textureFo'+'rmat']=this['preferHigh'+'Precision']?Xt:nt,this['_init'](),this['_updateMor'+'phFlags']();}['destroy'](){var _0x4efbb4,_0x1fd644,_0x367ddf;(_0x4efbb4=this['vertexBuff'+'erIds'])==null||_0x4efbb4['destroy'](),this['vertexBuff'+'erIds']=null,(_0x1fd644=this['targetsTex'+'turePositi'+'ons'])==null||_0x1fd644['destroy'](),this['targetsTex'+'turePositi'+'ons']=null,(_0x367ddf=this['targetsTex'+'tureNormal'+'s'])==null||_0x367ddf['destroy'](),this['targetsTex'+'tureNormal'+'s']=null;}get['aabb'](){if(!this['_aabb']){const _0x4e1a11=new D(),_0x1b116e=new D();for(let _0x2dd8bf=-0x6b*-0x51+-0x109*-0x19+-0xeef*0x4;_0x2dd8bf<this['_targets']['length'];_0x2dd8bf++){const _0x441fe5=this['_targets'][_0x2dd8bf]['aabb'];_0x4e1a11['min'](_0x441fe5['getMin']()),_0x1b116e['max'](_0x441fe5['getMax']());}this['_aabb']=new De(),this['_aabb']['setMinMax'](_0x4e1a11,_0x1b116e);}return this['_aabb'];}get['morphPosit'+'ions'](){return this['_morphPosi'+'tions'];}get['morphNorma'+'ls'](){return this['_morphNorm'+'als'];}['_init'](){this['_initTextu'+'reBased']();for(let _0x23580c=0xb*-0xe9+-0x1*0xb8a+0x158d;_0x23580c<this['_targets']['length'];_0x23580c++)this['_targets'][_0x23580c]['_postInit']();}['_findSpars'+'eSet'](_0x351351,_0x48d5f2,_0x39b90a){let _0x361425=0x2117+-0x69b*0x3+0x1*-0xd45;const _0x4dec51=_0x351351[0x1aaa+-0x2e*-0x1c+-0x1fb2]['length'];for(let _0x24b014=-0x1afc+0x1422+0x36d*0x2;_0x24b014<_0x4dec51;_0x24b014+=-0x1*0x1ff9+-0x9e*0x20+0x16*0x25a){let _0x374aca=!(-0x1*-0x194f+0xc7e+-0x25cc);for(let _0x54c9f3=-0x29*0xc7+0x1*-0x225f+0x423e;_0x54c9f3<_0x351351['length'];_0x54c9f3++){const _0x469c62=_0x351351[_0x54c9f3];if(_0x469c62[_0x24b014]!==0x1e3d+-0xc2e+-0x120f||_0x469c62[_0x24b014+(-0x1f*0x123+0x5*0xbf+0xa81*0x3)]!==0x2*0xbe4+0x1321+0x895*-0x5||_0x469c62[_0x24b014+(0x2337+-0xb86*-0x2+-0x1*0x3a41)]!==0x2668+-0x5bd+-0x20ab){_0x374aca=!(-0x192+-0x223+0x49*0xd);break;}}_0x374aca?(_0x48d5f2['push'](_0x361425),_0x39b90a['push'](_0x24b014/(-0x371*0x6+-0x114b+0x97d*0x4)),_0x361425++):_0x48d5f2['push'](-0x25e3+0x3*-0xc46+0x4ab5);}return _0x361425;}['_initTextu'+'reBased'](){const _0x2748b5=[],_0x1dd811=[],_0x11cf7c=this['_targets'];for(let _0x570bdb=0xcb2+0x214f+-0x2e01;_0x570bdb<_0x11cf7c['length'];_0x570bdb++){const _0x30074a=_0x11cf7c[_0x570bdb];_0x30074a['options']['deltaPosit'+'ions']&&(_0x2748b5['push'](_0x30074a['options']['deltaPosit'+'ions']),_0x1dd811['push'](!(0x1*0x12e5+-0x241f+0x113a))),_0x30074a['options']['deltaNorma'+'ls']&&(_0x2748b5['push'](_0x30074a['options']['deltaNorma'+'ls']),_0x1dd811['push'](!(-0x1251+-0x188c+0x2ade)));}const _0x93231=[],_0x389d9e=[],_0x43cd6e=this['_findSpars'+'eSet'](_0x2748b5,_0x93231,_0x389d9e),_0x5c4f79=this['device']['maxTexture'+'Size'];let _0x59b140=Math['ceil'](Math['sqrt'](_0x43cd6e));_0x59b140=Math['min'](_0x59b140,_0x5c4f79);const _0x20ae20=Math['ceil'](_0x43cd6e/_0x59b140);if(_0x20ae20>_0x5c4f79){w['warnOnce']('Morph\x20targ'+'et\x20data\x20is'+'\x20too\x20large'+'\x20to\x20fit\x20in'+'to\x20a\x20textu'+'re\x20array.\x20'+'Required\x20t'+'exture\x20siz'+'e:\x20'+_0x59b140+'x'+_0x20ae20+(',\x20max\x20text'+'ure\x20size:\x20')+_0x5c4f79+'x'+_0x5c4f79+'.');return;}this['morphTextu'+'reWidth']=_0x59b140,this['morphTextu'+'reHeight']=_0x20ae20;let _0x429d8a=!(0x3*-0x290+0x21e2+0x3*-0x8bb);const _0x1547df=Mn['float2Half'];this['_textureFo'+'rmat']===nt&&(_0x429d8a=!(0x3da+-0x2072+0x1c98));const _0x8d3720=[],_0x5f4637=[],_0x4a12cc=_0x59b140*_0x20ae20*(-0x230d+0x1*-0x1938+-0x3d*-0xfd);for(let _0x310774=-0x1f43*-0x1+0x1*0x6a8+0x25eb*-0x1;_0x310774<_0x2748b5['length'];_0x310774++){const _0x185340=_0x2748b5[_0x310774],_0x4e2de3=this['_textureFo'+'rmat']===nt?new Uint16Array(_0x4a12cc):new Float32Array(_0x4a12cc);if((_0x1dd811[_0x310774]?_0x8d3720:_0x5f4637)['push'](_0x4e2de3),_0x429d8a)for(let _0x51a148=-0x111d*-0x2+-0xb5*0x35+0x33f;_0x51a148<_0x389d9e['length'];_0x51a148++){const _0x3ee74c=_0x389d9e[_0x51a148]*(-0x5d5*0x4+0x3*0x243+0x108e),_0x2ec039=_0x51a148*(-0x73c*0x1+-0x99*-0x11+-0x2e9)+(-0xb38*-0x1+0x31b+-0x14d*0xb);_0x4e2de3[_0x2ec039]=_0x1547df(_0x185340[_0x3ee74c]),_0x4e2de3[_0x2ec039+(0x1*-0x12a8+0x18b8+-0x60f)]=_0x1547df(_0x185340[_0x3ee74c+(-0xa7*0x7+-0x81*0x46+0x27d8)]),_0x4e2de3[_0x2ec039+(0x37*-0x8b+-0xa*-0x1d9+0xb65)]=_0x1547df(_0x185340[_0x3ee74c+(0x149f+0x2b*0x4b+-0x589*0x6)]);}else for(let _0x3c7d8c=0x25c5+0xac8*-0x2+-0x1035;_0x3c7d8c<_0x389d9e['length'];_0x3c7d8c++){const _0x7c3a75=_0x389d9e[_0x3c7d8c]*(-0x2*-0x32f+-0x267c+0x2021),_0x27301d=_0x3c7d8c*(0x24ca+-0x1*-0x8d+0xd*-0x2df)+(-0x5*-0x3a9+-0x1d*-0x10+-0x2df*0x7);_0x4e2de3[_0x27301d]=_0x185340[_0x7c3a75],_0x4e2de3[_0x27301d+(-0x8d2+0xd0b+-0x438)]=_0x185340[_0x7c3a75+(-0xebf+-0xe03+0xc7*0x25)],_0x4e2de3[_0x27301d+(0x6*-0x2e8+0x142d+0x2bb*-0x1)]=_0x185340[_0x7c3a75+(-0x1*0x2141+0x5b7*0x6+-0x107*0x1)];}}_0x8d3720['length']>0x38*0xaf+0x874+-0x2ebc&&(this['targetsTex'+'turePositi'+'ons']=this['_createTex'+'ture']('MorphPosit'+'ionsTextur'+'e',this['_textureFo'+'rmat'],_0x11cf7c['length'],[_0x8d3720]),this['targetsTex'+'turePositi'+'ons']['upload']()),_0x5f4637['length']>-0x1*-0x1c7d+0x1c39+-0x38b6&&(this['targetsTex'+'tureNormal'+'s']=this['_createTex'+'ture']('MorphNorma'+'lsTexture',this['_textureFo'+'rmat'],_0x11cf7c['length'],[_0x5f4637]),this['targetsTex'+'tureNormal'+'s']['upload']());const _0x2bf571=[{'semantic':Ln,'components':0x1,'type':el,'asInt':!(-0x372*-0xb+0x24*-0xfd+-0x252)}];return this['vertexBuff'+'erIds']=new Is(this['device'],new kt(this['device'],_0x2bf571,_0x93231['length']),_0x93231['length'],{'data':new Uint32Array(_0x93231)}),!(0x84c+-0xcf3+0x4a7*0x1);}get['targets'](){return this['_targets'];}['_updateMor'+'phFlags'](){this['_morphPosi'+'tions']=!(0x1*0x839+0x49*0x24+-0x127c),this['_morphNorm'+'als']=!(-0x2623+-0x25b6+0x4bda);for(let _0x4d9757=0x2*-0x3bf+0x3*-0xa0b+0x259f;_0x4d9757<this['_targets']['length'];_0x4d9757++){const _0x191ed5=this['_targets'][_0x4d9757];_0x191ed5['morphPosit'+'ions']&&(this['_morphPosi'+'tions']=!(-0x9*-0x431+-0x5a5*-0x5+0x17*-0x2de)),_0x191ed5['morphNorma'+'ls']&&(this['_morphNorm'+'als']=!(0x228a*-0x1+-0x1362+0x35ec));}}['_createTex'+'ture'](_0xa60551,_0x4086ea,_0x1c0d85,_0xd05946){return new _e(this['device'],{'levels':_0xd05946,'arrayLength':_0x1c0d85,'width':this['morphTextu'+'reWidth'],'height':this['morphTextu'+'reHeight'],'format':_0x4086ea,'cubemap':!(-0x683*-0x3+0xd*-0x25c+0x5c*0x1f),'mipmaps':!(0x1*-0x26d1+0x3*-0x5fc+0x38c6),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0xa60551});}}class Md{constructor(_0x3f91de){h(this,'used',!(0x1*0x1cee+-0x2352+-0x1*-0x665)),(w['assert'](arguments['length']===-0x18c6+0xd*0x4b+-0x3d*-0x58),this['options']=_0x3f91de,this['_name']=_0x3f91de['name'],this['_defaultWe'+'ight']=_0x3f91de['defaultWei'+'ght']||-0x103a+-0x781+0x17bb,this['_aabb']=_0x3f91de['aabb'],this['deltaPosit'+'ions']=_0x3f91de['deltaPosit'+'ions'],this['morphPosit'+'ions']=!!_0x3f91de['deltaPosit'+'ions'],this['morphNorma'+'ls']=!!_0x3f91de['deltaNorma'+'ls']);}get['name'](){return this['_name'];}get['defaultWei'+'ght'](){return this['_defaultWe'+'ight'];}get['aabb'](){return this['_aabb']||(this['_aabb']=new De(),this['deltaPosit'+'ions']&&this['_aabb']['compute'](this['deltaPosit'+'ions'])),this['_aabb'];}['clone'](){return w['assert'](this['options'],'MorphTarge'+'t\x20cannot\x20b'+'e\x20cloned,\x20'+'was\x20it\x20cre'+'ated\x20with\x20'+'a\x20preserve'+'Data\x20optio'+'n?'),new Md(this['options']);}['_postInit'](){this['options']['preserveDa'+'ta']||(this['options']=null),this['used']=!(0x9f5+0x527*-0x2+0x1*0x59);}}let Ei,Z_=-0x8dd*0x1+0x18af+0x1*-0xfd1;const ce=0x1fe4+-0xdf4*0x1+-0x47b*0x4,mf=new te(),_f=new te(),ti=new D(),tt=new D(),Ns=new D(),Na=new D(),ns=new D(),_t=new D(),ka=new D(),Ua=new D(),fo=new D(),Q_=new D(),zt=new D(),fc=new D(),kr=new D();function pn(_0x13561b){return _0x13561b-Math['floor'](_0x13561b);}function fA(_0x3a1573){return Math['max'](Math['min'](_0x3a1573,-0x1*0x1399+0x1b31+0x1d*-0x43),0x937+-0x2b*-0x2d+-0x1*0x10c6);}function gf(_0x39d20d,_0x42af49){return _0x39d20d-_0x42af49*Math['floor'](_0x39d20d/_0x42af49);}function uA(_0x28da73){let _0x545390=pn(_0x28da73),_0xb5dc8f=pn((0x1*-0xbba+-0x14c*0x5+0x1335)*_0x28da73),_0x50a72e=pn((-0x1dbf4+-0x14054+0x41a49)*_0x28da73),_0x59a4ff=pn((0xd76be21+-0x1311134c+0xf2c9c2a)*_0x28da73);return _0x545390-=_0xb5dc8f/(-0x5*-0x1af+0x1c4b+-0x23b7),_0xb5dc8f-=_0x50a72e/(0x1*0x6d0+0x1f*-0x12b+-0x5*-0x614),_0x50a72e-=_0x59a4ff/(0x2348+-0x8a6+-0x19a3*0x1),_0x59a4ff-=_0x59a4ff/(0x1*0x1ff9+0x214e+-0x4048),[_0x545390,_0xb5dc8f,_0x50a72e,_0x59a4ff];}function uc(_0x3716d3){let _0x41f813=pn(_0x3716d3),_0x11aa1f=pn((0x4eb*0x3+-0xd5*-0x2e+-0x22b*0x18)*_0x3716d3);return _0x41f813-=_0x11aa1f/(0x1*-0x1651+-0x3*0x493+-0x1*-0x2509),_0x11aa1f-=_0x11aa1f/(-0x1c24+-0x270d*0x1+0x4430),[_0x41f813,_0x11aa1f];}class pA{constructor(_0x31a02a){this['_emitter']=_0x31a02a;}['calcSpawnP'+'osition'](_0x3c9cb7,_0x38174d,_0x47eb82,_0x58fc06,_0x128236){const _0x560a03=this['_emitter'],_0x377e03=Math['random'](),_0x23aaa3=Math['random'](),_0x525534=Math['random'](),_0x190b04=Math['random']();if(_0x560a03['useCpu']&&(_0x3c9cb7[_0x128236*ce+(0xc74+0xf*-0xb3+-0x1f7)+_0x560a03['numParticl'+'esPot']*(-0x1*-0x19b1+0xda1+-0x110*0x25)*ce]=_0x377e03,_0x3c9cb7[_0x128236*ce+(-0x2002+0x1d08+0x2fb)+_0x560a03['numParticl'+'esPot']*(-0x18f4+0x134f+-0x1*-0x5a7)*ce]=_0x23aaa3,_0x3c9cb7[_0x128236*ce+(-0x5*0x745+0x5ad*-0x5+0x40bc)+_0x560a03['numParticl'+'esPot']*(0x599+-0x8c5*-0x2+-0x1*0x1721)*ce]=_0x525534),tt['x']=_0x377e03-(0x4a*0x47+0x3be*-0x9+0xd28+0.5),tt['y']=_0x23aaa3-(-0x1081*0x2+-0x254*0x3+0x2*0x13ff+0.5),tt['z']=_0x525534-(0x5*0x148+-0x2cc+0x84*-0x7+0.5),_0x560a03['emitterSha'+'pe']===ai){const _0x1c5ef9=Math['max'](Math['abs'](tt['x']),Math['max'](Math['abs'](tt['y']),Math['abs'](tt['z']))),_0x3c9321=_0x1c5ef9+(-0x1583*-0x1+0x266e+-0x3bf1+0.5-_0x1c5ef9)*_0x47eb82[0x1*0x220c+-0xd06+-0x1506],_0x9c1b4d=_0x1c5ef9+(-0x1863+-0x32d*-0x9+-0xb3*0x6+0.5-_0x1c5ef9)*_0x47eb82[0x438+-0x4*-0x1ae+0x1*-0xaef],_0x43a420=_0x1c5ef9+(-0x31*-0xa3+-0x2dd*-0xd+-0x446c+0.5-_0x1c5ef9)*_0x47eb82[-0x1*-0x403+-0x311+0x30*-0x5];tt['x']=_0x3c9321*(_0x1c5ef9===Math['abs'](tt['x'])?Math['sign'](tt['x']):(0x13f7+-0x1*0xc61+-0x794)*tt['x']),tt['y']=_0x9c1b4d*(_0x1c5ef9===Math['abs'](tt['y'])?Math['sign'](tt['y']):(-0x25*0x51+0xb29+0x8e)*tt['y']),tt['z']=_0x43a420*(_0x1c5ef9===Math['abs'](tt['z'])?Math['sign'](tt['z']):(-0x20a9+0x2703+-0x658)*tt['z']),_0x560a03['localSpace']?ti['copy'](_0x38174d['transformP'+'oint'](tt)):ti['copy'](_0x58fc06)['add'](_0x38174d['transformP'+'oint'](tt));}else{tt['normalize']();const _0x483986=_0x560a03['emitterRad'+'ius']===-0x1*-0x207b+-0x2+-0x11*0x1e9?-0x12eb+-0x1ece+-0x1*-0x31b9:_0x560a03['emitterRad'+'iusInner']/_0x560a03['emitterRad'+'ius'],_0x181984=_0x190b04*(0xdd2*-0x1+0x1efc+0x17*-0xbf-_0x483986)+_0x483986;_0x560a03['localSpace']?ti['copy'](tt['mulScalar'](_0x181984*_0x560a03['emitterRad'+'ius'])):ti['copy'](_0x58fc06)['add'](tt['mulScalar'](_0x181984*_0x560a03['emitterRad'+'ius']));}let _0x19863a=-Y['lerp'](_0x560a03['rate'],_0x560a03['rate2'],_0x377e03)*_0x128236;if(_0x560a03['pack8']){const _0x2e8ac0=(ti['x']-_0x560a03['worldBound'+'s']['center']['x'])/_0x560a03['worldBound'+'sSize']['x']+(-0x1*0x81c+0x194a+-0x112e+0.5),_0x478b20=(ti['y']-_0x560a03['worldBound'+'s']['center']['y'])/_0x560a03['worldBound'+'sSize']['y']+(-0x1a82+0x605*-0x2+0x268c+0.5),_0x241a1a=(ti['z']-_0x560a03['worldBound'+'s']['center']['z'])/_0x560a03['worldBound'+'sSize']['z']+(0x1*-0x1c31+0x267*0xb+0x71*0x4+0.5);let _0x419657=Y['lerp'](_0x560a03['startAngle']*Y['DEG_TO_RAD'],_0x560a03['startAngle'+'2']*Y['DEG_TO_RAD'],_0x377e03);_0x419657=_0x419657%(Math['PI']*(-0x1*0x1d63+0xde6+0xf7f))/(Math['PI']*(0x11a0+-0x1680+-0x2*-0x271));const _0x30a030=uc(_0x2e8ac0);_0x3c9cb7[_0x128236*ce]=_0x30a030[-0xd*0xf+-0x1813*0x1+-0xbb*-0x22],_0x3c9cb7[_0x128236*ce+(0xb*0x206+-0x1*0x2572+0x1*0xf31)]=_0x30a030[0x6fb+0x115a*-0x1+-0x8*-0x14c];const _0x2033e8=uc(_0x478b20);_0x3c9cb7[_0x128236*ce+(-0x2f*-0xa2+-0x3de+0x4d*-0x56)]=_0x2033e8[-0x17db+0x100f*-0x1+0x27ea*0x1],_0x3c9cb7[_0x128236*ce+(-0x205b+-0x23fe*0x1+0x445c)]=_0x2033e8[-0x83a+-0x59a+0xdd5*0x1];const _0x5944b2=uc(_0x241a1a);_0x3c9cb7[_0x128236*ce+(-0xdf*-0x14+-0xa*-0x3a3+0x132*-0x2d)+_0x560a03['numParticl'+'esPot']*ce]=_0x5944b2[0x124*0xb+0x51d+-0x11a9],_0x3c9cb7[_0x128236*ce+(-0x1d2+0x1ca2+-0x1acf)+_0x560a03['numParticl'+'esPot']*ce]=_0x5944b2[0x2407+-0x16*-0x18d+0x1189*-0x4];const _0x2a3015=uc(_0x419657);_0x3c9cb7[_0x128236*ce+(0x1430+-0x20*-0x1f+-0x180e)+_0x560a03['numParticl'+'esPot']*ce]=_0x2a3015[-0x1d3d+-0x13d5*-0x1+0x968],_0x3c9cb7[_0x128236*ce+(-0x1200+-0x21d9+-0x4*-0xcf7)+_0x560a03['numParticl'+'esPot']*ce]=_0x2a3015[-0xe9e*0x1+0x1ed+0xcb2];const _0x37b234=-0x1f30+-0xb2f*0x1+-0x60*-0x71;_0x3c9cb7[_0x128236*ce+(-0x1d09*-0x1+0x19*-0xc5+-0x9c9)+_0x560a03['numParticl'+'esPot']*ce*(-0x255*0xe+0x236b+0x65*-0x7)]=_0x37b234;const _0x222e36=Math['max'](_0x560a03['lifetime'],(_0x560a03['numParticl'+'es']-(0x9*0x170+0x87d*-0x2+0x40b))*Math['max'](_0x560a03['rate'],_0x560a03['rate2'])),_0x1ba92e=_0x560a03['lifetime']+(0x4db*-0x2+-0x55e+-0x15f*-0xb);_0x19863a=(_0x19863a+_0x222e36)/(_0x222e36+_0x1ba92e);const _0x1aee82=uA(_0x19863a);_0x3c9cb7[_0x128236*ce+(-0x1*0x235f+0x141b+0xf44)+_0x560a03['numParticl'+'esPot']*ce*(0xad9+-0x95*-0x25+-0x205f)]=_0x1aee82[0x1391*-0x1+0x1*-0xd1f+-0x82c*-0x4],_0x3c9cb7[_0x128236*ce+(0x1bcd+0xb11+-0x26dd*0x1)+_0x560a03['numParticl'+'esPot']*ce*(0x11cb+-0x5*0xf1+-0xd13)]=_0x1aee82[-0xc*0x29d+0x235b+-0x3fe],_0x3c9cb7[_0x128236*ce+(0x231c+-0x59*0x59+-0x429*0x1)+_0x560a03['numParticl'+'esPot']*ce*(-0xbc*-0x10+0x1*-0x623+-0x59a)]=_0x1aee82[-0xa88+-0x44d*0x7+0x28a5],_0x3c9cb7[_0x128236*ce+(0x2*-0xdf6+0x1*0x1c01+-0x12)+_0x560a03['numParticl'+'esPot']*ce*(-0x1ab6+0x2299+-0x7e0)]=_0x1aee82[0x1b3f+0x25c7+-0x4103];}else _0x3c9cb7[_0x128236*ce]=ti['x'],_0x3c9cb7[_0x128236*ce+(-0x437+0x50+0x3e8)]=ti['y'],_0x3c9cb7[_0x128236*ce+(-0x1ee5+0x22c3+-0x2*0x1ee)]=ti['z'],_0x3c9cb7[_0x128236*ce+(0x8b1*-0x1+0x11*0x109+-0x8e5)]=Y['lerp'](_0x560a03['startAngle']*Y['DEG_TO_RAD'],_0x560a03['startAngle'+'2']*Y['DEG_TO_RAD'],_0x377e03),_0x3c9cb7[_0x128236*ce+(0x10f2+0x13fe+-0x24ed)+_0x560a03['numParticl'+'esPot']*ce]=_0x19863a;}['update'](_0x2f6c43,_0x16142b,_0x4809ea,_0x28b56d,_0x297999,_0x26fdff,_0x323ca7,_0x2c23b2){let _0x3c4e3d,_0x1d295c,_0x105b36;const _0x35112e=this['_emitter'];if(_0x35112e['meshInstan'+'ce']['node']){const _0x39878f=_0x35112e['meshInstan'+'ce']['node']['worldTrans'+'form'];for(let _0x535f40=-0x9f*-0x21+-0x48b*-0x1+-0x190a;_0x535f40<-0x291+0x24a7+-0x220a;_0x535f40++)mf['data'][_0x535f40]=_0x39878f['data'][_0x535f40];_f['copy'](mf),_f['invert'](),Ei=_0x35112e['meshInstan'+'ce']['node']['localScale'],Z_=Math['max'](Math['max'](Ei['x'],Ei['y']),Ei['z']);}_0x26fdff=_0x35112e['meshInstan'+'ce']['node']===null||_0x35112e['localSpace']?D['ZERO']:_0x35112e['meshInstan'+'ce']['node']['getPositio'+'n']();const _0x2f5e7c=_0x35112e['camera']?_0x35112e['camera']['_node']['getPositio'+'n']():D['ZERO'],_0x30483a=_0x35112e['useMesh']?-0x1ed6+-0x1598+0x347f:0x5b*-0x5f+-0xd*0x33+0x246b;let _0x5c9e0d,_0x5e8962,_0x314ff7,_0x3eca99,_0x561a74,_0x23b10c,_0x23b3c2,_0x23fd90,_0x1c3194;const _0x26bde8=_0x35112e['precision']-(-0x95*-0x2d+-0x13d3+-0x65d);for(let _0x1cb76f=0xa5*0x10+-0x1*0x1f83+-0x51*-0x43;_0x1cb76f<_0x35112e['numParticl'+'es'];_0x1cb76f++){const _0x271e99=Math['floor'](_0x35112e['vbCPU'][_0x1cb76f*_0x35112e['numParticl'+'eVerts']*(_0x35112e['useMesh']?-0x1*0x2275+0x3a*-0x7b+0x3e59:0x902+0x1eb6+-0xc*0x34f)+(-0x118b+-0xdfd*0x1+0x1f8b)]),_0x3a5e41=_0x4809ea[_0x271e99*ce+(-0x1703+-0x22fd*-0x1+-0xbfa)+_0x35112e['numParticl'+'esPot']*(0x8c5+-0x1081+0x7be)*ce];Ns['x']=_0x3a5e41,Ns['y']=_0x4809ea[_0x271e99*ce+(0x24b0+0x21b2+-0x4661)+_0x35112e['numParticl'+'esPot']*(-0x1873+-0x1ca9+0x1a8f*0x2)*ce],Ns['z']=_0x4809ea[_0x271e99*ce+(-0x1a26+0x1*0x1813+0x1*0x215)+_0x35112e['numParticl'+'esPot']*(0x171f+0x1*0x1602+-0x2d1f)*ce];const _0x4291dc=_0x35112e['rate']+(_0x35112e['rate2']-_0x35112e['rate'])*_0x3a5e41,_0x1803b8=_0x35112e['lifetime'];let _0x2aaf17=_0x4809ea[_0x271e99*ce+(-0x8*-0x11f+0x2*0x184+-0xb*0x117)+_0x35112e['numParticl'+'esPot']*ce]+_0x323ca7;const _0x1ec25e=fA(_0x2aaf17/_0x1803b8);let _0x20441e=0x11cd+-0x126e+-0xa1*-0x1,_0x278235=-0x1e96+-0x8a7+0xf5*0x29;const _0x340fe3=-0x73f+0x131b*-0x1+0x1a5a*0x1;(_0x2aaf17-_0x323ca7<=-0x52d+0x103b+0x236*-0x5||_0x2aaf17>=_0x1803b8)&&this['calcSpawnP'+'osition'](_0x4809ea,_0x28b56d,_0x297999,_0x26fdff,_0x271e99);let _0x10083c=_0x2aaf17>-0x1*0x955+-0x72*-0x53+0x1ba1*-0x1&&_0x2aaf17<_0x1803b8;_0x10083c&&(_0x105b36=_0x1ec25e*_0x26bde8,_0x5c9e0d=Math['floor'](_0x105b36),_0x5e8962=Math['ceil'](_0x105b36),_0x105b36%=0x6a0*-0x4+0x229a+0x1*-0x819,_0x3c4e3d=_0x35112e['qRotSpeed'][_0x5c9e0d],_0x1d295c=_0x35112e['qRotSpeed'][_0x5e8962],_0x314ff7=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qRotSpeed2'][_0x5c9e0d],_0x1d295c=_0x35112e['qRotSpeed2'][_0x5e8962],_0x3eca99=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qScale'][_0x5c9e0d],_0x1d295c=_0x35112e['qScale'][_0x5e8962],_0x20441e=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qScale2'][_0x5c9e0d],_0x1d295c=_0x35112e['qScale2'][_0x5e8962],_0x561a74=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qAlpha'][_0x5c9e0d],_0x1d295c=_0x35112e['qAlpha'][_0x5e8962],_0x23b10c=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qAlpha2'][_0x5c9e0d],_0x1d295c=_0x35112e['qAlpha2'][_0x5e8962],_0x23b3c2=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qRadialSpe'+'ed'][_0x5c9e0d],_0x1d295c=_0x35112e['qRadialSpe'+'ed'][_0x5e8962],_0x23fd90=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qRadialSpe'+'ed2'][_0x5c9e0d],_0x1d295c=_0x35112e['qRadialSpe'+'ed2'][_0x5e8962],_0x1c3194=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x23fd90+=(_0x1c3194-_0x23fd90)*(_0x3a5e41*(-0x2497+-0x44*-0x8d+-0x79)%(-0x16c9+-0x16a2*0x1+0x2d6c)),Na['x']=_0x4809ea[_0x271e99*ce],Na['y']=_0x4809ea[_0x271e99*ce+(-0x8ed+0x1d7b+-0x148d)],Na['z']=_0x4809ea[_0x271e99*ce+(-0xffa*-0x2+0x1b46+-0x3b38)],_0x35112e['localSpace']?fo['copy'](Na):fo['copy'](Na)['sub'](_0x26fdff),fo['normalize']()['mulScalar'](_0x23fd90),_0x5c9e0d*=-0x925+0x1fea+-0x16c2,_0x5e8962*=0x7*-0x57d+0x1*-0xf9e+0x360c,_0x3c4e3d=_0x35112e['qLocalVelo'+'city'][_0x5c9e0d],_0x1d295c=_0x35112e['qLocalVelo'+'city'][_0x5e8962],_t['x']=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qLocalVelo'+'city'][_0x5c9e0d+(-0xd2e+0x63a*0x2+0xbb)],_0x1d295c=_0x35112e['qLocalVelo'+'city'][_0x5e8962+(0x826+0x32*-0x9f+0x16e9)],_t['y']=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qLocalVelo'+'city'][_0x5c9e0d+(0x1042*-0x1+-0x216*0xc+0x294c)],_0x1d295c=_0x35112e['qLocalVelo'+'city'][_0x5e8962+(0xe88+-0x4dc+-0x9aa)],_t['z']=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qLocalVelo'+'city2'][_0x5c9e0d],_0x1d295c=_0x35112e['qLocalVelo'+'city2'][_0x5e8962],Ua['x']=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qLocalVelo'+'city2'][_0x5c9e0d+(-0x649*-0x2+0x19f6+-0x581*0x7)],_0x1d295c=_0x35112e['qLocalVelo'+'city2'][_0x5e8962+(-0x4*0x751+0x5*-0x23b+0x286c)],Ua['y']=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qLocalVelo'+'city2'][_0x5c9e0d+(0x28*0xf2+-0xf*-0x161+-0x3a7d)],_0x1d295c=_0x35112e['qLocalVelo'+'city2'][_0x5e8962+(-0x8ba+0x163*0x1a+0x1b52*-0x1)],Ua['z']=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qVelocity'][_0x5c9e0d],_0x1d295c=_0x35112e['qVelocity'][_0x5e8962],ns['x']=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qVelocity'][_0x5c9e0d+(-0xad0+0x1*0xf7b+-0x6*0xc7)],_0x1d295c=_0x35112e['qVelocity'][_0x5e8962+(0x5ce+-0xe*0x76+0xa7)],ns['y']=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qVelocity'][_0x5c9e0d+(-0x6*0x5bd+0xe4d+0x1423)],_0x1d295c=_0x35112e['qVelocity'][_0x5e8962+(0x7*-0x4a9+0x2065+0x3*0x14)],ns['z']=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qVelocity2'][_0x5c9e0d],_0x1d295c=_0x35112e['qVelocity2'][_0x5e8962],ka['x']=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qVelocity2'][_0x5c9e0d+(-0x14cb+-0x18ad+0x2d79)],_0x1d295c=_0x35112e['qVelocity2'][_0x5e8962+(-0x3*-0x959+0x2*-0x443+-0x1384)],ka['y']=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_0x3c4e3d=_0x35112e['qVelocity2'][_0x5c9e0d+(0x1c5*0xf+0x6e5+-0x30a*0xb)],_0x1d295c=_0x35112e['qVelocity2'][_0x5e8962+(-0x1*0x116d+0x5a6+0xbc9)],ka['z']=_0x3c4e3d+(_0x1d295c-_0x3c4e3d)*_0x105b36,_t['x']+=(Ua['x']-_t['x'])*Ns['x'],_t['y']+=(Ua['y']-_t['y'])*Ns['y'],_t['z']+=(Ua['z']-_t['z'])*Ns['z'],_0x35112e['initialVel'+'ocity']>0x1f80+0x970*0x4+-0x4540&&(_0x35112e['emitterSha'+'pe']===zw?(tt['copy'](Ns)['mulScalar'](0x13e+-0x2659+0xc5f*0x3)['sub'](D['ONE'])['normalize'](),_t['add'](tt['mulScalar'](_0x35112e['initialVel'+'ocity']))):_t['add'](D['FORWARD']['mulScalar'](_0x35112e['initialVel'+'ocity']))),ns['x']+=(ka['x']-ns['x'])*Ns['x'],ns['y']+=(ka['y']-ns['y'])*Ns['y'],ns['z']+=(ka['z']-ns['z'])*Ns['z'],_0x314ff7+=(_0x3eca99-_0x314ff7)*Ns['y'],_0x20441e=(_0x20441e+(_0x561a74-_0x20441e)*(_0x3a5e41*(0x2a29+0x4309+0x1*-0x4622)%(-0x1*0x23bf+0x246c+-0xac)))*Z_,_0x278235=(_0x23b3c2-_0x23b10c)*(_0x3a5e41*(0x25c3+-0x20*0x65+-0x153b*0x1)%(-0x1229*0x1+-0x1991+0x2bbb)),_0x35112e['meshInstan'+'ce']['node']&&(_0x35112e['localSpace']?(_t['x']/=Ei['x'],_t['y']/=Ei['y'],_t['z']/=Ei['z']):mf['transformP'+'oint'](_t,_t)),_0x35112e['localSpace']?(_f['transformP'+'oint'](ns,ns),_t['add'](ns)['add'](fo)):(_t['add'](ns['mul'](Ei)),_t['add'](fo['mul'](Ei))),fc['copy'](_t),Q_['copy'](Na)['add'](_t['mulScalar'](_0x323ca7)),zt['copy'](Q_),_0x4809ea[_0x271e99*ce]=zt['x'],_0x4809ea[_0x271e99*ce+(-0x1fc+-0x10cb+0x12c8)]=zt['y'],_0x4809ea[_0x271e99*ce+(0x1110+0x1*-0x491+0xc7d*-0x1)]=zt['z'],_0x4809ea[_0x271e99*ce+(0xa*-0x34c+0x1e90+0x1*0x26b)]+=_0x314ff7*_0x323ca7,_0x35112e['wrap']&&_0x35112e['wrapBounds']&&(_0x35112e['localSpace']||zt['sub'](_0x26fdff),zt['x']=gf(zt['x'],_0x35112e['wrapBounds']['x'])-_0x35112e['wrapBounds']['x']*(0x2*-0x251+-0x1ea8+-0x234a*-0x1+0.5),zt['y']=gf(zt['y'],_0x35112e['wrapBounds']['y'])-_0x35112e['wrapBounds']['y']*(0x1ec5+0x261f+-0x44e4+0.5),zt['z']=gf(zt['z'],_0x35112e['wrapBounds']['z'])-_0x35112e['wrapBounds']['z']*(0x1*0x103d+-0x1cbb+-0x42a*-0x3+0.5),_0x35112e['localSpace']||zt['add'](_0x26fdff)),_0x35112e['sort']>-0xc59*0x1+0xd8+0xb81&&(_0x35112e['sort']===-0x2579*0x1+-0x1e03+0xd*0x531?(kr['copy'](zt)['sub'](_0x2f5e7c),_0x35112e['particleDi'+'stance'][_0x271e99]=-(kr['x']*kr['x']+kr['y']*kr['y']+kr['z']*kr['z'])):_0x35112e['sort']===-0x71*-0x52+-0x265b+0x22b?_0x35112e['particleDi'+'stance'][_0x271e99]=_0x2aaf17:_0x35112e['sort']===0x6f*0x11+-0x4d0+-0x28c&&(_0x35112e['particleDi'+'stance'][_0x271e99]=-_0x2aaf17))),_0x2c23b2?_0x2aaf17<-0x2*0x12b8+0x473+0x20fd&&(_0x4809ea[_0x271e99*ce+(-0x2*-0x10e5+-0x1527+0x20*-0x65)+_0x35112e['numParticl'+'esPot']*(-0x2*0xe51+-0xb*0xd+0x1d33)*ce]=-(-0x775+0x18aa+-0x2de*0x6)):(_0x2aaf17>=_0x1803b8&&(_0x2aaf17-=Math['max'](_0x1803b8,(_0x35112e['numParticl'+'es']-(0xcea+0x432+-0x111b))*_0x4291dc),_0x4809ea[_0x271e99*ce+(-0x16c8+-0x1fa7+0x3672)+_0x35112e['numParticl'+'esPot']*(-0x1*-0x1376+-0x821*0x1+0x1*-0xb53)*ce]=_0x35112e['loop']?-0xad2*-0x2+0x3*-0x8f9+0x548:-(0x1*-0x1a5+-0xdc7+0xf6d)),_0x2aaf17<0x508+0x1422*0x1+-0x192a*0x1&&_0x35112e['loop']&&(_0x4809ea[_0x271e99*ce+(0x6a8*-0x2+-0xf02+0x1c55)+_0x35112e['numParticl'+'esPot']*(0x25a5+0x18d*0xe+0x1*-0x3b59)*ce]=-0xc11*0x1+-0x32*0x5c+0x1e0a)),_0x4809ea[_0x271e99*ce+(0x338+0xf92*0x1+-0x12c7)+_0x35112e['numParticl'+'esPot']*(0x22f7*0x1+0x242*-0xd+0x1*-0x59b)*ce]<0x4f9*-0x7+-0x218f+0x445e&&(_0x10083c=!(-0x92b+-0x1cba+0x6*0x651)),_0x4809ea[_0x271e99*ce+(0x211+-0xd5d*0x1+0x3*0x3c5)+_0x35112e['numParticl'+'esPot']*ce]=_0x2aaf17;for(let _0xa2a838=-0xdd5*-0x2+0x266f*-0x1+0xac5*0x1;_0xa2a838<_0x35112e['numParticl'+'eVerts'];_0xa2a838++){const _0x4d26e9=(_0x1cb76f*_0x35112e['numParticl'+'eVerts']+_0xa2a838)*(_0x35112e['useMesh']?0x1af*0x1+-0x3*0x4bf+0x142*0xa:-0x46e+0xb9f*0x3+0x257*-0xd);let _0x47d86c=_0x35112e['vbCPU'][_0x4d26e9],_0x573e9b=_0x35112e['vbCPU'][_0x4d26e9+(-0x3d7+-0x21*0x5c+0xfb4)],_0x22842d=_0x35112e['vbCPU'][_0x4d26e9+(0x18b8+-0x474+-0x1442)];_0x10083c||(_0x47d86c=_0x573e9b=_0x22842d=0xcfb*0x1+-0x76e+-0x58d);const _0x55878a=_0x1cb76f*_0x35112e['numParticl'+'eVerts']*_0x30483a+_0xa2a838*_0x30483a;_0x2f6c43[_0x55878a]=zt['x'],_0x2f6c43[_0x55878a+(0x181d*-0x1+0x425+0x13f9)]=zt['y'],_0x2f6c43[_0x55878a+(-0x1b21+0x161a+0x509)]=zt['z'],_0x2f6c43[_0x55878a+(0x2029*-0x1+0x405+-0x1*-0x1c27)]=_0x1ec25e,_0x2f6c43[_0x55878a+(-0x16bd+0x10b4+0x60d*0x1)]=_0x35112e['alignToMot'+'ion']?_0x340fe3:_0x4809ea[_0x271e99*ce+(0x23e3+0x1*0x8eb+-0x2ccb)],_0x2f6c43[_0x55878a+(0x6b7*-0x4+0x509*0x1+0x15d8)]=_0x20441e,_0x2f6c43[_0x55878a+(-0x303+0x3*0x6a+0x1cb)]=_0x278235,_0x2f6c43[_0x55878a+(-0x1*-0x19cb+0x26da+-0x409e)]=fc['x'],_0x2f6c43[_0x55878a+(0x71*-0x41+-0x24e1+0x419a)]=_0x47d86c,_0x2f6c43[_0x55878a+(0x2710+0x1*-0x105f+-0x16a8)]=_0x573e9b,_0x2f6c43[_0x55878a+(0xae5*-0x3+0x47*-0x1+-0x3*-0xb00)]=_0x22842d,_0x2f6c43[_0x55878a+(0xdda+-0x4*0x682+-0x413*-0x3)]=fc['y'],_0x2f6c43[_0x55878a+(-0x1903+-0x153e+-0xf6f*-0x3)]=_0x271e99,_0x2f6c43[_0x55878a+(-0x12f3+0x1*0xa8+-0x4*-0x496)]=fc['z'],_0x2f6c43[_0x55878a+(0x1d45+0x1*0x22c+-0x5*0x647)]=_0x35112e['vbCPU'][_0x4d26e9+(0x5*-0x50b+-0x292*-0x4+0xef2*0x1)],_0x35112e['useMesh']&&(_0x2f6c43[_0x55878a+(-0x9ee+-0x95c+0x1359)]=_0x35112e['vbCPU'][_0x4d26e9+(0x7*-0x109+-0x139+-0xb5*-0xc)],_0x2f6c43[_0x55878a+(-0x145c+-0x6*0x22d+0x217a)]=_0x35112e['vbCPU'][_0x4d26e9+(-0x1189+0x1ed8+-0xd4a)]);}}if(_0x35112e['sort']>nu&&_0x35112e['camera']){const _0x5ab5fa=_0x35112e['useMesh']?-0x19*0xb6+-0x2566+-0x12*-0x311:0x2701+-0x7ad*0x3+-0x1*0xff6,_0x23f8ca=_0x35112e['particleDi'+'stance'];for(let _0x31a803=0x8e1+-0x1e1+0x2*-0x380;_0x31a803<_0x35112e['numParticl'+'es'];_0x31a803++)_0x16142b[_0x31a803][-0x26e5+0x13b1+-0x2*-0x99a]=_0x31a803,_0x16142b[_0x31a803][-0x2*-0x50d+0x95*0x23+0xa28*-0x3]=_0x23f8ca[Math['floor'](_0x35112e['vbCPU'][_0x31a803*_0x35112e['numParticl'+'eVerts']*_0x5ab5fa+(0x25*-0x46+0x1243+0x6*-0x15b)])];_0x35112e['vbOld']['set'](_0x35112e['vbCPU']),_0x16142b['sort']((_0xf86e0c,_0xf75189)=>_0xf86e0c[0x1ce4+0xd09*-0x1+-0xfda]-_0xf75189[0x763+-0x4*-0xdf+0xd6*-0xd]);for(let _0x50e445=0x35c*-0x4+0x19bd+-0xc4d;_0x50e445<_0x35112e['numParticl'+'es'];_0x50e445++){const _0x300fce=_0x16142b[_0x50e445][-0x55e*-0x1+-0x113*-0x13+-0x19c7*0x1]*_0x35112e['numParticl'+'eVerts']*_0x5ab5fa,_0x10cd79=_0x50e445*_0x35112e['numParticl'+'eVerts']*_0x5ab5fa;for(let _0x65159a=-0x225d+-0x396+-0x5*-0x797;_0x65159a<_0x35112e['numParticl'+'eVerts']*_0x5ab5fa;_0x65159a++)_0x35112e['vbCPU'][_0x10cd79+_0x65159a]=_0x35112e['vbOld'][_0x300fce+_0x65159a];}}}}const J_=new _i(),eg=new _i(),tg=new _i();class mA{constructor(_0x53dcf8,_0x20d16f){this['_emitter']=_0x53dcf8,this['frameRando'+'mUniform']=new Float32Array(0x17*-0xc9+0x10aa+0x168),this['emitterPos'+'Uniform']=new Float32Array(-0x5f1+0xc81+-0x81*0xd),this['emitterSca'+'leUniform']=new Float32Array([0x19*0x17b+-0x874+-0x1c8e,-0x29*-0x41+-0x3c0*0x5+-0x18*-0x59,-0x10a5*-0x1+0xbe6+-0x1c8a]),this['worldBound'+'sMulUnifor'+'m']=new Float32Array(-0x2*0x12df+0x13ca+-0x3*-0x5fd),this['worldBound'+'sAddUnifor'+'m']=new Float32Array(0x1e+0xfd2+0x3*-0x54f),this['inBoundsSi'+'zeUniform']=new Float32Array(-0xe89+-0xed9+-0x5*-0x5e1),this['inBoundsCe'+'nterUnifor'+'m']=new Float32Array(0x1*-0x112b+0x1e1a+-0xcec*0x1),this['constantPa'+'rticleTexI'+'N']=_0x20d16f['scope']['resolve']('particleTe'+'xIN'),this['constantPa'+'rticleTexO'+'UT']=_0x20d16f['scope']['resolve']('particleTe'+'xOUT'),this['constantEm'+'itterPos']=_0x20d16f['scope']['resolve']('emitterPos'),this['constantEm'+'itterScale']=_0x20d16f['scope']['resolve']('emitterSca'+'le'),this['constantSp'+'awnBounds']=_0x20d16f['scope']['resolve']('spawnBound'+'s'),this['constantSp'+'awnPosInne'+'rRatio']=_0x20d16f['scope']['resolve']('spawnPosIn'+'nerRatio'),this['constantSp'+'awnBoundsS'+'phere']=_0x20d16f['scope']['resolve']('spawnBound'+'sSphere'),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']=_0x20d16f['scope']['resolve']('spawnBound'+'sSphereInn'+'erRatio'),this['constantIn'+'itialVeloc'+'ity']=_0x20d16f['scope']['resolve']('initialVel'+'ocity'),this['constantFr'+'ameRandom']=_0x20d16f['scope']['resolve']('frameRando'+'m'),this['constantDe'+'lta']=_0x20d16f['scope']['resolve']('delta'),this['constantRa'+'te']=_0x20d16f['scope']['resolve']('rate'),this['constantRa'+'teDiv']=_0x20d16f['scope']['resolve']('rateDiv'),this['constantLi'+'fetime']=_0x20d16f['scope']['resolve']('lifetime'),this['constantGr'+'aphSampleS'+'ize']=_0x20d16f['scope']['resolve']('graphSampl'+'eSize'),this['constantGr'+'aphNumSamp'+'les']=_0x20d16f['scope']['resolve']('graphNumSa'+'mples'),this['constantIn'+'ternalTex0']=_0x20d16f['scope']['resolve']('internalTe'+'x0'),this['constantIn'+'ternalTex1']=_0x20d16f['scope']['resolve']('internalTe'+'x1'),this['constantIn'+'ternalTex2']=_0x20d16f['scope']['resolve']('internalTe'+'x2'),this['constantIn'+'ternalTex3']=_0x20d16f['scope']['resolve']('internalTe'+'x3'),this['constantEm'+'itterMatri'+'x']=_0x20d16f['scope']['resolve']('emitterMat'+'rix'),this['constantEm'+'itterMatri'+'xInv']=_0x20d16f['scope']['resolve']('emitterMat'+'rixInv'),this['constantNu'+'mParticles']=_0x20d16f['scope']['resolve']('numParticl'+'es'),this['constantNu'+'mParticles'+'Pot']=_0x20d16f['scope']['resolve']('numParticl'+'esPot'),this['constantLo'+'calVelocit'+'yDivMult']=_0x20d16f['scope']['resolve']('localVeloc'+'ityDivMult'),this['constantVe'+'locityDivM'+'ult']=_0x20d16f['scope']['resolve']('velocityDi'+'vMult'),this['constantRo'+'tSpeedDivM'+'ult']=_0x20d16f['scope']['resolve']('rotSpeedDi'+'vMult'),this['constantSe'+'ed']=_0x20d16f['scope']['resolve']('seed'),this['constantSt'+'artAngle']=_0x20d16f['scope']['resolve']('startAngle'),this['constantSt'+'artAngle2']=_0x20d16f['scope']['resolve']('startAngle'+'2'),this['constantOu'+'tBoundsMul']=_0x20d16f['scope']['resolve']('outBoundsM'+'ul'),this['constantOu'+'tBoundsAdd']=_0x20d16f['scope']['resolve']('outBoundsA'+'dd'),this['constantIn'+'BoundsSize']=_0x20d16f['scope']['resolve']('inBoundsSi'+'ze'),this['constantIn'+'BoundsCent'+'er']=_0x20d16f['scope']['resolve']('inBoundsCe'+'nter'),this['constantMa'+'xVel']=_0x20d16f['scope']['resolve']('maxVel'),this['constantFa'+'ceTangent']=_0x20d16f['scope']['resolve']('faceTangen'+'t'),this['constantFa'+'ceBinorm']=_0x20d16f['scope']['resolve']('faceBinorm');}['_setInputB'+'ounds'](){this['inBoundsSi'+'zeUniform'][0x12dd+-0xe45+-0x188*0x3]=this['_emitter']['prevWorldB'+'oundsSize']['x'],this['inBoundsSi'+'zeUniform'][-0x23ed+-0x876+0x2c64]=this['_emitter']['prevWorldB'+'oundsSize']['y'],this['inBoundsSi'+'zeUniform'][0x2673+-0x1e7*-0x1+-0x2858]=this['_emitter']['prevWorldB'+'oundsSize']['z'],this['constantIn'+'BoundsSize']['setValue'](this['inBoundsSi'+'zeUniform']),this['inBoundsCe'+'nterUnifor'+'m'][0x6b0+0x1338+-0x1*0x19e8]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['x'],this['inBoundsCe'+'nterUnifor'+'m'][0xd1a+-0xddb+0xc2]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['y'],this['inBoundsCe'+'nterUnifor'+'m'][0xb6f+-0xd*0x2a1+0x16c0]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['z'],this['constantIn'+'BoundsCent'+'er']['setValue'](this['inBoundsCe'+'nterUnifor'+'m']);}['randomize'](){this['frameRando'+'mUniform'][0x53*-0x59+0x6e+0x1c6d]=Math['random'](),this['frameRando'+'mUniform'][0x5*0x2de+0x2151+-0x2fa6]=Math['random'](),this['frameRando'+'mUniform'][0x3*-0x6f5+0x7a7*0x3+-0x214]=Math['random']();}['update'](_0x328e8c,_0x3145a0,_0xe456d4,_0x486d8e,_0x25d014){Q['pushGpuMar'+'ker'](_0x328e8c,'ParticleGP'+'U');const _0x3ca6b0=this['_emitter'];_0x328e8c['setBlendSt'+'ate'](pt['NOBLEND']),_0x328e8c['setDepthSt'+'ate'](Yt['NODEPTH']),_0x328e8c['setCullMod'+'e'](bt),this['randomize'](),this['constantGr'+'aphSampleS'+'ize']['setValue']((-0x20a9+-0x31b+0x23c5*0x1)/_0x3ca6b0['precision']),this['constantGr'+'aphNumSamp'+'les']['setValue'](_0x3ca6b0['precision']),this['constantNu'+'mParticles']['setValue'](_0x3ca6b0['numParticl'+'es']),this['constantNu'+'mParticles'+'Pot']['setValue'](_0x3ca6b0['numParticl'+'esPot']),this['constantIn'+'ternalTex0']['setValue'](_0x3ca6b0['internalTe'+'x0']),this['constantIn'+'ternalTex1']['setValue'](_0x3ca6b0['internalTe'+'x1']),this['constantIn'+'ternalTex2']['setValue'](_0x3ca6b0['internalTe'+'x2']),this['constantIn'+'ternalTex3']['setValue'](_0x3ca6b0['internalTe'+'x3']);const _0x3fe438=_0x3ca6b0['meshInstan'+'ce']['node'],_0x5ed189=_0x3fe438===null?D['ONE']:_0x3fe438['localScale'];if(_0x3ca6b0['pack8']){this['worldBound'+'sMulUnifor'+'m'][-0x32*0x16+0x2*-0x2a2+0x990]=_0x3ca6b0['worldBound'+'sMul']['x'],this['worldBound'+'sMulUnifor'+'m'][0x24c0+0x1*0x15fb+-0x2*0x1d5d]=_0x3ca6b0['worldBound'+'sMul']['y'],this['worldBound'+'sMulUnifor'+'m'][0x2*-0x879+-0xb1d*-0x3+-0x1063]=_0x3ca6b0['worldBound'+'sMul']['z'],this['constantOu'+'tBoundsMul']['setValue'](this['worldBound'+'sMulUnifor'+'m']),this['worldBound'+'sAddUnifor'+'m'][-0x18c3+0x27*0xe7+-0xa6e]=_0x3ca6b0['worldBound'+'sAdd']['x'],this['worldBound'+'sAddUnifor'+'m'][-0x1*0x5b6+-0x796+0xd4d]=_0x3ca6b0['worldBound'+'sAdd']['y'],this['worldBound'+'sAddUnifor'+'m'][0x3*-0x7b4+0x5*0x4f9+-0x1bf]=_0x3ca6b0['worldBound'+'sAdd']['z'],this['constantOu'+'tBoundsAdd']['setValue'](this['worldBound'+'sAddUnifor'+'m']),this['_setInputB'+'ounds']();let _0x519dbb=_0x3ca6b0['maxVel']*Math['max'](Math['max'](_0x5ed189['x'],_0x5ed189['y']),_0x5ed189['z']);_0x519dbb=Math['max'](_0x519dbb,0x14c4*0x1+-0x2*-0x128f+-0x39e1),this['constantMa'+'xVel']['setValue'](_0x519dbb);}const _0x55d5bb=_0x3fe438===null||_0x3ca6b0['localSpace']?D['ZERO']:_0x3fe438['getPositio'+'n'](),_0x5de948=_0x3fe438===null?te['IDENTITY']:_0x3fe438['getWorldTr'+'ansform']();_0x3ca6b0['emitterSha'+'pe']===ai?(J_['setFromMat'+'4'](_0x3145a0),this['constantSp'+'awnBounds']['setValue'](J_['data']),this['constantSp'+'awnPosInne'+'rRatio']['setValue'](_0xe456d4)):(this['constantSp'+'awnBoundsS'+'phere']['setValue'](_0x3ca6b0['emitterRad'+'ius']),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']['setValue'](_0x3ca6b0['emitterRad'+'ius']===-0x31*0x6+0xfad+-0xe87?0x1d7b+-0x25*-0x8b+-0x3192:_0x3ca6b0['emitterRad'+'iusInner']/_0x3ca6b0['emitterRad'+'ius'])),this['constantIn'+'itialVeloc'+'ity']['setValue'](_0x3ca6b0['initialVel'+'ocity']),eg['setFromMat'+'4'](_0x5de948),tg['invertMat4'](_0x5de948),this['emitterPos'+'Uniform'][-0x1d2+-0x1054+0x1226*0x1]=_0x55d5bb['x'],this['emitterPos'+'Uniform'][-0x1f9c+0x117e+0x3*0x4b5]=_0x55d5bb['y'],this['emitterPos'+'Uniform'][-0x2400+0x4a6+0xa74*0x3]=_0x55d5bb['z'],this['constantEm'+'itterPos']['setValue'](this['emitterPos'+'Uniform']),this['constantFr'+'ameRandom']['setValue'](this['frameRando'+'mUniform']),this['constantDe'+'lta']['setValue'](_0x486d8e),this['constantRa'+'te']['setValue'](_0x3ca6b0['rate']),this['constantRa'+'teDiv']['setValue'](_0x3ca6b0['rate2']-_0x3ca6b0['rate']),this['constantSt'+'artAngle']['setValue'](_0x3ca6b0['startAngle']*Y['DEG_TO_RAD']),this['constantSt'+'artAngle2']['setValue'](_0x3ca6b0['startAngle'+'2']*Y['DEG_TO_RAD']),this['constantSe'+'ed']['setValue'](_0x3ca6b0['seed']),this['constantLi'+'fetime']['setValue'](_0x3ca6b0['lifetime']),this['emitterSca'+'leUniform'][0x8ff+0x1*-0x1a3c+0x113d]=_0x5ed189['x'],this['emitterSca'+'leUniform'][-0x21cd+-0x15ce+-0x1bce*-0x2]=_0x5ed189['y'],this['emitterSca'+'leUniform'][-0x11*-0x59+0xd76+-0x135d]=_0x5ed189['z'],this['constantEm'+'itterScale']['setValue'](this['emitterSca'+'leUniform']),this['constantEm'+'itterMatri'+'x']['setValue'](eg['data']),this['constantEm'+'itterMatri'+'xInv']['setValue'](tg['data']),this['constantLo'+'calVelocit'+'yDivMult']['setValue'](_0x3ca6b0['localVeloc'+'ityUMax']),this['constantVe'+'locityDivM'+'ult']['setValue'](_0x3ca6b0['velocityUM'+'ax']),this['constantRo'+'tSpeedDivM'+'ult']['setValue'](_0x3ca6b0['rotSpeedUM'+'ax'][-0x3*0x11d+0xbb1*-0x2+0x1*0x1ab9]);let _0x3b8e6e=_0x3ca6b0['swapTex']?_0x3ca6b0['particleTe'+'xOUT']:_0x3ca6b0['particleTe'+'xIN'];_0x3b8e6e=_0x3ca6b0['beenReset']?_0x3ca6b0['particleTe'+'xStart']:_0x3b8e6e;const _0x5ee89a=_0x3ca6b0['swapTex']?_0x3ca6b0['particleTe'+'xIN']:_0x3ca6b0['particleTe'+'xOUT'];this['constantPa'+'rticleTexI'+'N']['setValue'](_0x3b8e6e),Ar(_0x328e8c,_0x3ca6b0['swapTex']?_0x3ca6b0['rtParticle'+'TexIN']:_0x3ca6b0['rtParticle'+'TexOUT'],_0x25d014?_0x3ca6b0['shaderPart'+'icleUpdate'+'OnStop']:_0x3ca6b0['loop']?_0x3ca6b0['shaderPart'+'icleUpdate'+'Respawn']:_0x3ca6b0['shaderPart'+'icleUpdate'+'NoRespawn']),_0x3ca6b0['material']['setParamet'+'er']('particleTe'+'xOUT',_0x3b8e6e),_0x3ca6b0['material']['setParamet'+'er']('particleTe'+'xIN',_0x5ee89a),_0x3ca6b0['beenReset']=!(0x1*-0x949+0x1928+0x2*-0x7ef),_0x3ca6b0['swapTex']=!_0x3ca6b0['swapTex'],_0x3ca6b0['prevWorldB'+'oundsSize']['copy'](_0x3ca6b0['worldBound'+'sSize']),_0x3ca6b0['prevWorldB'+'oundsCente'+'r']['copy'](_0x3ca6b0['worldBound'+'s']['center']),_0x3ca6b0['pack8']&&this['_setInputB'+'ounds'](),Q['popGpuMark'+'er'](_0x328e8c);}}const sg=['NONE','VERTEX','MAP'];class _A extends ya{['generateKe'+'y'](_0x4a704a){let _0x29d867='particle_'+ya['definesHas'+'h'](_0x4a704a['defines'])+'_';for(const _0x2ed5ea in _0x4a704a)_0x4a704a['hasOwnProp'+'erty'](_0x2ed5ea)&&(_0x29d867+=_0x4a704a[_0x2ed5ea]);return _0x29d867;}['createVert'+'exDefines'](_0x25d2ec,_0x46cf8e){const _0x17ee38=new Map(_0x25d2ec['defines']);return _0x25d2ec['mesh']&&_0x17ee38['set']('USE_MESH',''),_0x25d2ec['meshUv']&&_0x17ee38['set']('USE_MESH_U'+'V',''),_0x25d2ec['localSpace']&&_0x17ee38['set']('LOCAL_SPAC'+'E',''),_0x25d2ec['screenSpac'+'e']&&_0x17ee38['set']('SCREEN_SPA'+'CE',''),_0x25d2ec['animTex']&&_0x17ee38['set']('ANIMTEX',''),_0x25d2ec['soft']>0x682+0x2051+0x3*-0xcf1&&_0x17ee38['set']('SOFT',''),_0x25d2ec['stretch']>0x1fd0+0xb*0x2bf+-0x3e05&&_0x17ee38['set']('STRETCH',''),_0x25d2ec['customFace']&&_0x17ee38['set']('CUSTOM_FAC'+'E',''),_0x25d2ec['pack8']&&_0x17ee38['set']('PACK8',''),_0x25d2ec['localSpace']&&_0x17ee38['set']('LOCAL_SPAC'+'E',''),_0x25d2ec['animTexLoo'+'p']&&_0x17ee38['set']('ANIMTEX_LO'+'OP',''),_0x25d2ec['wrap']&&_0x17ee38['set']('WRAP',''),_0x25d2ec['alignToMot'+'ion']&&_0x17ee38['set']('ALIGN_TO_M'+'OTION',''),_0x17ee38['set']('NORMAL',sg[_0x25d2ec['normal']]),_0x46cf8e['particle_v'+'ertexData']=Me,_0x25d2ec['mesh']&&_0x25d2ec['meshUv']&&(_0x46cf8e['particle_u'+'v']=is),_0x25d2ec['useCpu']&&(_0x46cf8e['particle_v'+'ertexData2']=uh,_0x46cf8e['particle_v'+'ertexData3']=Ap,_0x46cf8e['particle_v'+'ertexData4']=Cp,_0x46cf8e['particle_v'+'ertexData5']=Pp),_0x17ee38;}['createFrag'+'mentDefine'+'s'](_0x158542){const _0x42ef52=new Map(_0x158542['defines']);return _0x158542['soft']>0x1*-0x1282+-0x178d+0x2a0f&&_0x42ef52['set']('SOFT',''),_0x158542['halflamber'+'t']&&_0x42ef52['set']('HALF_LAMBE'+'RT',''),_0x42ef52['set']('NORMAL',sg[_0x158542['normal']]),_0x42ef52['set']('BLEND',Yy[_0x158542['blend']]),_0x42ef52;}['createShad'+'erDefiniti'+'on'](_0x4a1a77,_0x53817f){const _0xa36dff=_0x4a1a77['isWebGPU']?it:Fe,_0x27cb50=Pe['get'](_0x4a1a77,_0xa36dff),_0x325153={},_0x5da14d=this['createVert'+'exDefines'](_0x53817f,_0x325153),_0x190bf8=this['createFrag'+'mentDefine'+'s'](_0x53817f),_0x1bd936='PARTICLE_'+(_0x53817f['useCpu']?'CPU':'GPU')+'\x0a';_0x5da14d['set'](_0x1bd936,''),_0x190bf8['set'](_0x1bd936,'');const _0x14a92a=new Map(_0x27cb50);return Jt['createDefi'+'nition'](_0x4a1a77,{'name':'ParticleSh'+'ader','shaderLanguage':_0xa36dff,'attributes':_0x325153,'vertexCode':_0x27cb50['get']('particle_s'+'haderVS'),'fragmentCode':_0x27cb50['get']('particle_s'+'haderPS'),'fragmentDefines':_0x190bf8,'fragmentIncludes':_0x14a92a,'vertexIncludes':_0x14a92a,'vertexDefines':_0x5da14d});}}const gA=new _A();class SA extends tr{constructor(_0x2223e9){super(),h(this,'emitter',null),(this['emitter']=_0x2223e9,w['assert'](_0x2223e9));}['getShaderV'+'ariant'](_0x1d4c66){const {device:_0x3c71a1,scene:_0x874e7b,cameraShaderParams:_0x31261d,objDefs:_0x413176}=_0x1d4c66,{emitter:_0x3bdb37}=this,_0x2cb743={'defines':$t['getCoreDef'+'ines'](this,_0x1d4c66),'pass':Aa,'useCpu':this['emitter']['useCpu'],'normal':_0x3bdb37['lighting']?_0x3bdb37['normalMap']!==null?-0x155*0x1a+-0x1afa+0x3d9e:-0x1b55+0x973+0x11e3:0x85*0x21+-0x2*0xdd8+-0x1*-0xa8b,'halflambert':this['emitter']['halfLamber'+'t'],'stretch':this['emitter']['stretch'],'alignToMotion':this['emitter']['alignToMot'+'ion'],'soft':this['emitter']['depthSofte'+'ning'],'mesh':this['emitter']['useMesh'],'meshUv':_0x413176&nm,'gamma':(_0x31261d==null?void(0x1*-0x211a+0x1c21+0x4f9):_0x31261d['shaderOutp'+'utGamma'])??Ll,'toneMap':(_0x31261d==null?void(-0x1f2a+-0x45e+0x2388):_0x31261d['toneMappin'+'g'])??sm,'fog':_0x874e7b&&!this['emitter']['noFog']?_0x874e7b['fog']['type']:'none','wrap':this['emitter']['wrap']&&this['emitter']['wrapBounds'],'localSpace':this['emitter']['localSpace'],'screenSpace':_0x3bdb37['inTools']?!(0x1*-0x1d1f+-0x1061*0x1+0x2d81):this['emitter']['screenSpac'+'e'],'blend':this['emitter']['blendType'],'animTex':this['emitter']['_isAnimate'+'d'](),'animTexLoop':this['emitter']['animLoop'],'pack8':this['emitter']['pack8'],'customFace':this['emitter']['orientatio'+'n']!==yh},_0x2d7906=new Ad(_0x1d4c66['viewUnifor'+'mFormat'],_0x1d4c66['viewBindGr'+'oupFormat'],_0x1d4c66['vertexForm'+'at']),_0x15e0d1=Hn(_0x3c71a1);return _0x15e0d1['register']('particle',gA),_0x15e0d1['getProgram']('particle',_0x2cb743,_0x2d7906,this['userId']);}}const ig=[[-(0x1ab7+-0x1b9*0x6+-0x1060),-(0x4b1*-0x1+-0x144f*0x1+-0x1901*-0x1)],[0x1d9a+0x1*-0x175f+-0x63a,-(-0x1dcf+-0x4a2+0x2272)],[0x1*-0x1ec7+0x25*-0xcc+0x196*0x26,-0x8c3+0x1450+-0xb8c],[-(0x1f22+0x1*-0x1aab+-0x476),-0x18dd*0x1+-0x3df*0x1+0x1cbd*0x1]];function xs(_0x10214f,_0x1fb628,_0x58a492,_0x871be1,_0x70bb14=Xt,_0x59c905,_0x23a294){let _0x2bf044=Te;_0x23a294&&(_0x70bb14===Ne||_0x70bb14===_s)&&(_0x2bf044=vt);const _0x40d19a=new _e(_0x10214f,{'width':_0x1fb628,'height':_0x58a492,'format':_0x70bb14,'cubemap':!(-0x1f1*0x2+0x12aa+-0x123*0xd),'mipmaps':!(0x1ac8+-0x1ebd+0x3f6*0x1),'minFilter':_0x2bf044,'magFilter':_0x2bf044,'addressU':ue,'addressV':ue,'name':'ParticleSy'+'stemTextur'+'e'}),_0x54dbb0=_0x40d19a['lock']();if(_0x70bb14===Ne||_0x70bb14===_s){const _0x3b6f33=new Uint8Array(_0x871be1['length']);for(let _0x11303a=0xd12+-0x106*-0x2+-0xf1e;_0x11303a<_0x871be1['length'];_0x11303a++)_0x3b6f33[_0x11303a]=_0x871be1[_0x11303a]*_0x59c905*(-0x96f+-0xe86+0x63d*0x4);_0x871be1=_0x3b6f33;}return _0x54dbb0['set'](_0x871be1),_0x40d19a['unlock'](),_0x40d19a;}function rg(_0x3ef940){return Math['max'](Math['min'](_0x3ef940,0x25ab+0x15d+-0x2707),0x1*0xa6b+0x1*-0x4f5+0x1*-0x576);}const ag=new qs([-0xcfb*-0x1+-0x1*0x5a2+0x759*-0x1,0x1*-0x1f61+0x5e*-0x4a+0x3a8d,0x2441*0x1+-0x15f*-0xd+0x1*-0x3613,-0xd81*-0x1+-0xc87*-0x1+-0x1a08]),ng=new qs([-0x252d+-0x12f9*-0x1+0x1234,0x47*0x3f+-0x1*-0x241c+-0x3594,0x2620+0x1*0x124a+-0x3869,-0x17*-0x77+0x2c2+-0xd72*0x1]),og=new na([-0x10f3*0x2+0x268b+-0x4a5,0x35*-0x9b+-0x24b2*-0x1+0x189*-0x3,-0x540+0xd84+-0xeb*0x9,-0x1*0x1b41+-0x1257+0x1*0x2d98],[-0xa3a+0x45*-0x3a+0x19dc,0x1e32+0xe*0x1a6+-0x1aa3*0x2,-0xf1*-0x27+-0x494+-0x2022,-0x67f*-0x2+0x3a*-0x76+0xdbe],[0x1*-0x239f+0x2a*-0x93+0x3bbd,0x21c2+0x10b1+-0x11f*0x2d,0x1*-0x2398+-0x1a7a+0x3e13,0x5*-0x67f+0x1c69*-0x1+-0x3*-0x144c]),yA=new na([-0x217d+-0x1*-0x21c7+-0x4a,-0x3e5*-0x7+0x1b*-0x40+-0x1482,-0x18f5+-0xd6*-0x10+0xb96,0x3f5+-0x679*0x3+0xf77],[0x228b+-0x7e8+-0x1aa3,0x1f1a+0x2159+-0x4072,-0x1a2*0x13+0xb4b+0xc*0x1a5,-0x1265+-0x2304+0x102*0x35],[-0x20fc+0x2c5*0x1+0x5*0x60b,0x318*0x8+0x2158+-0x3a17,0x1c9d+0x3*0x72f+0x3229*-0x1,-0x697+0x1006+-0x96e]);let bi=-0x199a+-0xb*-0x2b9+0x65*-0xb;const pc=0xa59+-0x3*0x248+-0x37d*0x1,Ai=new Float32Array(-0xd5d+0xcbd+0xa3),Ur=new te(),lg=new D(),mc=new D(),_c=new D();let uu,Zc;function he(_0x133074,_0x4418de){Zc[_0x133074]!==void(0x7*-0x215+-0x5*-0x43f+-0x6a8)&&Zc[_0x133074]!==null?uu[_0x133074]=Zc[_0x133074]:uu[_0x133074]=_0x4418de;}function Dv(_0xed3d29,_0x478a1e,_0x24d395){return(_0xed3d29*(0x1df3*-0x1+-0x11*0x6d+0x262f)<<0xe*-0x1f3+0x1*-0x2151+-0x5d*-0xa7|_0x478a1e*(-0xac0+0x131b*-0x2+-0x105*-0x31)<<-0x1*-0x238a+-0x199a+-0x4f4*0x2|_0x24d395*(0x23fc+-0xa*-0xe1+0x641*-0x7))/(0x1184+-0x1d69+-0x5f3*-0x2<<0xbed+-0x1a63+0xe8e);}function cg(_0x5778aa,_0x514977){const _0x1a1850=_0x5778aa['length']/(0x2061+-0x9a1+-0x16bd*0x1),_0x1e8dab=new Array(_0x1a1850*(-0x8de+-0x1*-0xe41+0xb*-0x7d));for(let _0x3641f0=-0x17a1+0x3*0x250+-0x1*-0x10b1;_0x3641f0<_0x1a1850;_0x3641f0++)_0x1e8dab[_0x3641f0*(-0xb59+0x128e+-0x7*0x107)]=_0x5778aa[_0x3641f0*(0x6*-0x53e+0x1*-0x1+0x1f78)],_0x1e8dab[_0x3641f0*(0xde+0x163b*-0x1+0x1561)+(-0x79*-0x2f+0x678+0x1*-0x1cae)]=_0x5778aa[_0x3641f0*(0x3b*-0x1f+-0x1276+0x199e)+(0x3be*-0x8+-0x6*-0x463+0x39f)],_0x1e8dab[_0x3641f0*(0x1a99+0x15a1+-0x3036)+(-0x18d9+-0x24*-0xe5+-0x759)]=_0x5778aa[_0x3641f0*(-0x1bdd+-0x3*-0x3d1+0x106d)+(0x6a3+-0x26d9+0x2038)],_0x1e8dab[_0x3641f0*(-0x13*0xcf+0x883*0x1+0x3*0x24a)+(0x1*-0x1dc5+-0x702+0x24ca)]=Dv(_0x514977[_0x3641f0*(0xa7*0x14+0x255*0x7+0x1d5c*-0x1)],_0x514977[_0x3641f0*(-0x8f*-0x13+0x2071*0x1+0xe59*-0x3)+(0x7*0x3b9+-0xa22+0x1*-0xfec)],_0x514977[_0x3641f0*(-0x12bd+0x169*0x11+0x1*-0x539)+(0x23ef+-0x654+-0x1d99)]);return _0x1e8dab;}function vA(_0x3ce8fb,_0x48d200){const _0x113d83=new Array(_0x48d200['length']*(-0x1*0x15fb+0x12e6+0x319));for(let _0x509f7b=-0x321+-0x70*0x34+0x1*0x19e1;_0x509f7b<_0x48d200['length'];_0x509f7b++)_0x113d83[_0x509f7b*(-0x1*0x19db+0x1*0x184a+0x9*0x2d)]=_0x3ce8fb[_0x509f7b*(0x1*-0xb7a+-0x29*-0xa9+-0xf94)],_0x113d83[_0x509f7b*(-0xc69+0x9b*0xb+-0xf6*-0x6)+(-0x2*0xd73+-0x1*0x609+0x1f0*0x11)]=_0x3ce8fb[_0x509f7b*(-0x1a69*-0x1+0x871*-0x1+0x11f5*-0x1)+(-0xb86*0x3+0x7e9*-0x1+0x2*0x153e)],_0x113d83[_0x509f7b*(-0x2*-0x40+-0xff7+0x529*0x3)+(-0x54a+-0x26c3+0x2c0f)]=_0x3ce8fb[_0x509f7b*(0x146b*0x1+-0x2140+0x2*0x66c)+(-0x3*0x189+0x1c58+-0x3*0x7e9)],_0x113d83[_0x509f7b*(-0x287*0x1+0x4*-0x5b5+-0x1*-0x195f)+(0x99f*-0x4+0x12b1+-0x69a*-0x3)]=_0x48d200[_0x509f7b];return _0x113d83;}function xA(_0x346d36,_0x29052c,_0x429a9f,_0x5f43c1,_0x1847f8){const _0x3e071a=new Array(_0x346d36['length']*(-0x2*-0x1a1+0xf0*-0x28+0x2242));for(let _0x7e177b=-0x1f3a+0x2*-0x708+-0x1*-0x2d4a;_0x7e177b<_0x346d36['length'];_0x7e177b++)_0x3e071a[_0x7e177b*(-0x11c+-0x6cd+0x7ed)]=_0x346d36[_0x7e177b],_0x3e071a[_0x7e177b*(0x1*0x1da7+-0x1669+-0x73a)+(0x13*-0xb+-0x2*0xde4+0x1c9a*0x1)]=_0x29052c[_0x7e177b],_0x3e071a[_0x7e177b*(-0x4a1*-0x5+-0x1610+-0x27*0x7)+(-0x97d+-0x80*-0x32+-0xf81)]=0x6ea+-0x12c+-0x5be,_0x3e071a[_0x7e177b*(0x125b+-0x1607*0x1+0x3b0)+(-0xe96*-0x1+0x3fb+-0x128e)]=Dv(_0x429a9f[_0x7e177b],_0x5f43c1[_0x7e177b],_0x1847f8[_0x7e177b]);return _0x3e071a;}function TA(_0x4614cb,_0x493bf1){const _0x31c588=new Array(_0x4614cb['length']*(-0x7*0x37e+-0x219*0x5+0x22f3));for(let _0x43e96b=-0x99b*-0x1+-0x14*0x1cb+-0x1*-0x1a41;_0x43e96b<_0x4614cb['length'];_0x43e96b++)_0x31c588[_0x43e96b*(-0x2667+-0xad*0x7+0x2b26)]=_0x4614cb[_0x43e96b],_0x31c588[_0x43e96b*(0x1862*-0x1+0x1b93+-0x1*0x32d)+(-0x24b8+0x10db+0x13de)]=_0x493bf1[_0x43e96b],_0x31c588[_0x43e96b*(0x1b72+0x11ab*-0x1+-0x9c3*0x1)+(0x1c6a*0x1+0xb*-0x2dd+0x317)]=0x13*0x1d3+-0xf47+-0x1362,_0x31c588[_0x43e96b*(0x1*0x5d1+0xd2*-0x2+-0x3*0x163)+(0x1053+0x1913+0xa3*-0x41)]=-0x3*-0xb49+-0x1a61+0x13f*-0x6;return _0x31c588;}function wA(_0x5bc1b2){const _0x218725=Math['max'](_0x5bc1b2['rate'],_0x5bc1b2['rate2'])*_0x5bc1b2['numParticl'+'es']+_0x5bc1b2['lifetime'];return Date['now']()+_0x218725*(-0xd1a+-0x2180+0x3282);}function EA(_0x3251d5,_0x1597b5){const _0x13a8e6=new Float32Array(_0x3251d5['length']);for(let _0x534546=0x5*0x51b+0x5cc+-0x2d9*0xb;_0x534546<_0x3251d5['length'];_0x534546++)_0x13a8e6[_0x534546]=_0x3251d5[_0x534546]-_0x1597b5[_0x534546];return _0x13a8e6;}function Xr(_0x374cc9,_0x141619){const _0x86e06e=_0x141619['length'],_0xc39b20=_0x374cc9['length']/_0x86e06e;for(let _0x120fc5=0xc90+-0x2bd*-0xd+-0x3029;_0x120fc5<_0xc39b20;_0x120fc5++)for(let _0x33abf6=-0xbba+0x40d*0x1+-0x5*-0x189;_0x33abf6<_0x86e06e;_0x33abf6++){const _0x40729c=Math['abs'](_0x374cc9[_0x120fc5*_0x86e06e+_0x33abf6]);_0x141619[_0x33abf6]=Math['max'](_0x141619[_0x33abf6],_0x40729c);}}function bA(_0x6732f4,_0x42b9ce){const _0x216e04=_0x42b9ce['length'],_0x3b2c8d=_0x6732f4['length']/_0x216e04;for(let _0x37dfac=-0x5*0x43+-0x919+0xa68;_0x37dfac<_0x3b2c8d;_0x37dfac++)for(let _0x1b8b18=-0xa4b+-0xdc7*0x1+0x1812;_0x1b8b18<_0x216e04;_0x1b8b18++)_0x6732f4[_0x37dfac*_0x216e04+_0x1b8b18]/=_0x42b9ce[_0x1b8b18]===0xe*0x240+-0xff4+-0xf8c?-0x18d1+0xe0+0x17f2:_0x42b9ce[_0x1b8b18],_0x6732f4[_0x37dfac*_0x216e04+_0x1b8b18]*=-0x127+-0xdd3*-0x2+0x33*-0x85+0.5,_0x6732f4[_0x37dfac*_0x216e04+_0x1b8b18]+=0x1cee+0x1230+-0x1*0x2f1e+0.5;}function Br(_0x447fcf,_0x45c472,_0x2b3cf9){const _0x5a1475=EA(_0x45c472,_0x447fcf);return Xr(_0x5a1475,_0x2b3cf9),bA(_0x5a1475,_0x2b3cf9),_0x5a1475;}const AA=new Kt();class CA{constructor(_0x17d03a,_0x6fba8){h(this,'material',null),h(this,'internalTe'+'x0',null),h(this,'internalTe'+'x1',null),h(this,'internalTe'+'x2',null),h(this,'colorParam',null),this['graphicsDe'+'vice']=_0x17d03a;const _0x467a4d=_0x17d03a,_0x11cd92=0x1385+0x85*0x13+-0x1d44;this['precision']=_0x11cd92,this['_addTimeTi'+'me']=0x2*-0xffd+0x1e1f*-0x1+0x3e19,uu=this,Zc=_0x6fba8,he('numParticl'+'es',0x1c8d+-0x2281+0x5f5),this['numParticl'+'es']>_0x17d03a['maxTexture'+'Size']&&(w['warn']('WARNING:\x20c'+'an\x27t\x20creat'+'e\x20more\x20tha'+'n\x20'+_0x17d03a['maxTexture'+'Size']+('\x20particles'+'\x20on\x20this\x20d'+'evice.')),this['numParticl'+'es']=_0x17d03a['maxTexture'+'Size']),he('rate',-0x1*0x22a5+-0x228c+-0x2*-0x2299),he('rate2',this['rate']),he('lifetime',-0x2226+0x5*-0x31+0x234d),he('emitterExt'+'ents',new D(-0xc*-0x27+0x1a98+0x22*-0xd6,-0x1*0x17e3+-0x1de9*0x1+0x35cc,0xebb+-0x1628+0x76d*0x1)),he('emitterExt'+'entsInner',new D(0x2226+0x7b0+-0x29d6,0x322*-0xc+-0xd5a+0x32f2,-0x1*0x16e1+-0x1c6*-0x2+-0x31*-0x65)),he('emitterRad'+'ius',-0x2*-0x1d3+0x1181+-0x1527),he('emitterRad'+'iusInner',0x2*-0x18d+0xbaf+-0x895),he('emitterSha'+'pe',ai),he('initialVel'+'ocity',-0x821*0x3+-0x1*0x455+0x1*0x1cb9),he('wrap',!(0x174*0xe+-0x5*0x2dd+-0x606)),he('localSpace',!(-0xdad+0x2508+-0x62*0x3d)),he('screenSpac'+'e',!(-0x10fb+0x2701+0x1605*-0x1)),he('wrapBounds',null),he('colorMap',this['defaultPar'+'amTexture']),he('normalMap',null),he('loop',!(0x15c5*0x1+0x811+-0x26*0xc9)),he('preWarm',!(0x26f1*0x1+0x2*-0x10fc+-0x4*0x13e)),he('sort',nu),he('mode',rv),he('scene',null),he('lighting',!(0x11*0x89+0x2058+-0x68*0x66)),he('halfLamber'+'t',!(-0x1fa1+-0x10*-0x1e2+-0x1*-0x182)),he('intensity',-0x2214+0x26e2+-0x4cd*0x1),he('stretch',0x1522+0x2*0x12e9+-0x2*0x1d7a),he('alignToMot'+'ion',!(0x136d+-0x1*0x11d+-0x124f)),he('depthSofte'+'ning',0x8de+0x577*0x1+-0xe55),he('mesh',null),he('particleNo'+'rmal',new D(-0x1373+0x16ba+-0x347*0x1,0xa5b+-0x40+-0x50d*0x2,0xd65+-0x56*-0xb+-0x19*0xaf)),he('orientatio'+'n',yh),he('depthWrite',!(-0x1*-0x21a4+-0x1f9a+-0x209)),he('noFog',!(-0x1*-0xd55+0x371*-0xa+-0x1516*-0x1)),he('blendType',Zs),he('node',null),he('startAngle',-0xb*0x315+-0xe5*0x4+0x257b),he('startAngle'+'2',this['startAngle']),he('animTilesX',-0xa1*-0x3d+-0x4b3*-0x7+0x25*-0x1ed),he('animTilesY',0x72*0x4a+-0x3d*0x71+0x303*-0x2),he('animStartF'+'rame',-0xe16*0x2+-0x2480+0x40ac),he('animNumFra'+'mes',0x24dc+-0x1145*0x1+0x9cb*-0x2),he('animNumAni'+'mations',0x245b+-0xa25+-0x1a35),he('animIndex',-0x1*-0x2333+-0x5e*-0x17+-0x2ba5),he('randomizeA'+'nimIndex',!(0x182d+0xb78+0x2*-0x11d2)),he('animSpeed',0x13e0+-0x9f*-0x3e+-0x3a61),he('animLoop',!(-0xc7f+-0x1012+0x1c91)),this['_gpuUpdate'+'r']=new mA(this,_0x467a4d),this['_cpuUpdate'+'r']=new pA(this),this['emitterPos'+'Uniform']=new Float32Array(0x19*0x6c+-0xd9*-0x2b+-0x2efc),this['wrapBounds'+'Uniform']=new Float32Array(0x1af0+0x1*0x61f+0x5*-0x69c),this['emitterSca'+'leUniform']=new Float32Array([-0x18a6+0x1*-0x18b9+-0xc58*-0x4,0x1bff*0x1+0x1*0x411+-0x200f,-0x23ea+-0x4*-0x823+0x35f]),he('colorGraph',yA),he('colorGraph'+'2',this['colorGraph']),he('scaleGraph',ng),he('scaleGraph'+'2',this['scaleGraph']),he('alphaGraph',ng),he('alphaGraph'+'2',this['alphaGraph']),he('localVeloc'+'ityGraph',og),he('localVeloc'+'ityGraph2',this['localVeloc'+'ityGraph']),he('velocityGr'+'aph',og),he('velocityGr'+'aph2',this['velocityGr'+'aph']),he('rotationSp'+'eedGraph',ag),he('rotationSp'+'eedGraph2',this['rotationSp'+'eedGraph']),he('radialSpee'+'dGraph',ag),he('radialSpee'+'dGraph2',this['radialSpee'+'dGraph']),this['animTilesP'+'arams']=new Float32Array(-0x21*0xcf+-0x9e8+0x9*0x411),this['animParams']=new Float32Array(-0x416+0x1a98+0x2*-0xb3f),this['animIndexP'+'arams']=new Float32Array(0x1e5e+-0x710+-0x15*0x11c),this['vbToSort']=null,this['vbOld']=null,this['particleDi'+'stance']=null,this['camera']=null,this['swapTex']=!(-0x776+0x8ed+0xbb*-0x2),this['useMesh']=!(-0x10c2+-0x8d2*-0x4+-0x1286),this['useCpu']=!_0x17d03a['supportsGp'+'uParticles'],this['pack8']=!(-0x189c+-0x3dc+0x1c78),this['localBound'+'s']=new De(),this['worldBound'+'sNoTrail']=new De(),this['worldBound'+'sTrail']=[new De(),new De()],this['worldBound'+'s']=new De(),this['worldBound'+'sSize']=new D(),this['prevWorldB'+'oundsSize']=new D(),this['prevWorldB'+'oundsCente'+'r']=new D(),this['prevEmitte'+'rExtents']=this['emitterExt'+'ents'],this['prevEmitte'+'rRadius']=this['emitterRad'+'ius'],this['worldBound'+'sMul']=new D(),this['worldBound'+'sAdd']=new D(),this['timeToSwit'+'chBounds']=0x15*-0x131+0x1c6d+0x2*-0x1b4,this['shaderPart'+'icleUpdate'+'Respawn']=null,this['shaderPart'+'icleUpdate'+'NoRespawn']=null,this['shaderPart'+'icleUpdate'+'OnStop']=null,this['numParticl'+'eVerts']=0x15cc+-0x1184+-0x448,this['numParticl'+'eIndices']=-0x2c*0x49+0x1*-0x1db3+0x2a3f,this['material']=null,this['meshInstan'+'ce']=null,this['drawOrder']=-0x373*-0x7+-0x131*0x11+0xa6*-0x6,this['seed']=Math['random'](),this['fixedTimeS'+'tep']=(-0xc8e+-0x4*0x232+-0x3*-0x71d)/(-0x6*0x471+-0x2b*0x2e+0x229c),this['maxSubStep'+'s']=-0x1261*-0x1+-0x224d*-0x1+-0x34a4,this['simTime']=-0x2e0+-0x8*-0x2a7+0x8*-0x24b,this['simTimeTot'+'al']=-0x2c5*-0x2+-0x1*-0x4bb+-0xa45,this['beenReset']=!(0x1*0x2531+0xa46*-0x3+-0x65e),this['_layer']=null,this['rebuild']();}get['defaultPar'+'amTexture'](){return w['assert'](this['graphicsDe'+'vice']),AA['get'](this['graphicsDe'+'vice'],()=>{const _0x5b2ede=new Float32Array(-0x1*-0x96b+0x37+0xe*-0x67);for(let _0x3bfea8=-0xa*-0x244+0x158+-0x1800;_0x3bfea8<0xf6+-0x2a1*-0x9+-0x188f;_0x3bfea8++)for(let _0x15bd46=0x1e93+-0xce5+-0x11ae;_0x15bd46<0x1606+0x2*-0xb8f+-0x1*-0x128;_0x15bd46++){const _0x5e66e2=_0x15bd46+(0x1057+-0x16a*-0x4+0x1*-0x15fe)-(-0x5*0x2e+-0x128c+0x67e*0x3+0.5),_0x43f051=_0x3bfea8+(0x2400+-0x4f3*0x6+-0x1*0x64d)-(0x1470+0x1f22*-0x1+0x1*0xaba+0.5),_0x6cc1a2=rg(0x1051+0xd1d+0x51*-0x5d-rg(Math['sqrt'](_0x5e66e2*_0x5e66e2+_0x43f051*_0x43f051)/(0xce4+0x11d1+-0x3*0xa37))-(0x35*0x4d+-0x25b0+-0x13*-0x125+0.5)),_0x271675=_0x3bfea8*(-0x83*-0x32+0x257e+0x4*-0xfc1)+_0x15bd46;_0x5b2ede[_0x271675*(0x23fa+0x2223*0x1+-0x61*0xb9)]=0x155d+0x58b+-0x47*0x61,_0x5b2ede[_0x271675*(-0x1*-0x13ed+-0xb22+-0x8c7)+(-0x109*-0x25+-0xc37+-0x25f*0xb)]=-0xbb7*0x2+0x3e*0x97+-0xd23,_0x5b2ede[_0x271675*(0x220f+0x11d7+-0x33e2)+(0x1143+-0x174b*0x1+0x60a)]=-0x1*-0x1ad7+0x1*-0xb57+0x1*-0xf7f,_0x5b2ede[_0x271675*(-0x704*0x1+0x158*0x5+0x28*0x2)+(-0x148b+0x24b8+-0x102a*0x1)]=_0x6cc1a2;}const _0xbcdbd=xs(this['graphicsDe'+'vice'],-0x2690+-0x181d*0x1+0x3ebd,-0x1227+-0x12c8+0x24ff,_0x5b2ede,_s,0x1*0x37d+-0x238+0x12*-0x12,!(0xfd4+-0x18eb+-0x1*-0x917));return _0xbcdbd['minFilter']=vt,_0xbcdbd['magFilter']=vt,_0xbcdbd;});}['onChangeCa'+'mera'](){this['resetMater'+'ial']();}['calculateB'+'oundsMad'](){this['worldBound'+'sMul']['x']=(0x3*-0x163+0xc*0x1a5+-0xf92)/this['worldBound'+'sSize']['x'],this['worldBound'+'sMul']['y']=(-0x26ee+0xd36+-0x1*-0x19b9)/this['worldBound'+'sSize']['y'],this['worldBound'+'sMul']['z']=(-0x1*0x419+-0x3b6*-0x9+-0x1d4c)/this['worldBound'+'sSize']['z'],this['worldBound'+'sAdd']['copy'](this['worldBound'+'s']['center'])['mul'](this['worldBound'+'sMul'])['mulScalar'](-(-0x1e3*0xa+-0x1*-0x5ab+0xd34)),this['worldBound'+'sAdd']['x']+=0x5*0x329+0x17*0x12b+0x2*-0x1555+0.5,this['worldBound'+'sAdd']['y']+=0x2*-0x281+0x1f88+-0x46*0x61+0.5,this['worldBound'+'sAdd']['z']+=-0x1995+0xfd9+0x9bc+0.5;}['calculateW'+'orldBounds'](){if(!this['node'])return;if(this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),!this['useCpu']){let _0x4d2c11=!(0x1*-0x6e5+-0xda5+0x1*0x148b);this['emitterSha'+'pe']===ai?_0x4d2c11=!this['emitterExt'+'ents']['equals'](this['prevEmitte'+'rExtents']):_0x4d2c11=this['emitterRad'+'ius']!==this['prevEmitte'+'rRadius'],_0x4d2c11&&this['calculateL'+'ocalBounds']();}const _0x5e891e=this['node']['getWorldTr'+'ansform']();this['localSpace']?this['worldBound'+'sNoTrail']['copy'](this['localBound'+'s']):this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],_0x5e891e),this['worldBound'+'sTrail'][0x6ff+0x2*0x709+-0x1511]['add'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][0x1b6c+0x20e5+0x5*-0xc10]['add'](this['worldBound'+'sNoTrail']);const _0x214cca=this['simTimeTot'+'al'];_0x214cca>=this['timeToSwit'+'chBounds']&&(this['worldBound'+'sTrail'][0x1ced+0xfe6+-0x2cd3]['copy'](this['worldBound'+'sTrail'][-0xadd+0x1*0x6d3+0x3*0x159]),this['worldBound'+'sTrail'][-0x866+-0x1b61+-0xe5*-0x28]['copy'](this['worldBound'+'sNoTrail']),this['timeToSwit'+'chBounds']=_0x214cca+this['lifetime']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][-0x79*-0x5+0x1*-0x1b55+-0x18f8*-0x1]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0x1*-0xaf+-0x665*-0x2+-0xc19),this['localSpace']?(this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x5e891e),this['meshInstan'+'ce']['mesh']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x5e891e)):(this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['mesh']['aabb']['copy'](this['worldBound'+'s'])),this['meshInstan'+'ce']['_aabbVer']=0xfb+-0x1*0x6a3+0x3*0x1e3-this['meshInstan'+'ce']['_aabbVer'],this['pack8']&&this['calculateB'+'oundsMad']();}['resetWorld'+'Bounds'](){this['node']&&(this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][-0x20b*0x6+-0x1*-0x1d1b+-0x10d9]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][0xc*0x2bb+-0x612*-0x4+-0x390b]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][0xb*-0x1f3+-0x1b4+0x1725]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0xf0a+-0x2f5+0xb*-0x119),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['simTimeTot'+'al']=0x1993*0x1+0x1ba3+-0xe*0x3cd,this['timeToSwit'+'chBounds']=0x191*-0x9+-0x25eb+0x3404);}['calculateL'+'ocalBounds'](){let _0x1a52ea=Number['MAX_VALUE'],_0x39767b=Number['MAX_VALUE'],_0x3ebc6b=Number['MAX_VALUE'],_0x51987f=-Number['MAX_VALUE'],_0x53b144=-Number['MAX_VALUE'],_0x5aa8cb=-Number['MAX_VALUE'],_0x263c19=-0x1*0x16d+0x2351*-0x1+-0x2*-0x125f,_0x1c5a3e=0x2*-0xa51+-0xd09+0x21ab;const _0x4c0952=this['lifetime']/this['precision'],_0x2524ce=[this['qVelocity'],this['qVelocity2']],_0x3de6ee=[this['qLocalVelo'+'city'],this['qLocalVelo'+'city2']],_0x1052be=[-0x3*-0x3cc+0x1c50+-0x27b4,-0xdfa+0x4*0x338+0x8d*0x2],_0xa404c7=[0x3*0x956+0x142c+-0x1817*0x2,-0x727*-0x5+0x79d*-0x1+-0x1c26],_0x498359=[-0x1d2b+-0x492+0x21bd*0x1,-0x240f+0x100f+0x1400],_0x505be8=[0xad2+0x1*0x188c+-0x6*0x5e5,-0x1f28+0x1*-0x1d27+0x3c4f*0x1],_0x27fd32=[0x18d*-0x3+-0x8*-0xcf+0x9b*-0x3,0x1ac5+-0x1*0xf9+-0x19cc];let _0xc75c6b,_0x9eaa6c,_0xe4c116;for(let _0x17109e=0x2db*0x1+0x3*-0x52e+0xcaf;_0x17109e<this['precision']+(-0x67f*0x6+0x133f+0x13bc);_0x17109e++){const _0x4ab1df=Math['min'](_0x17109e,this['precision']-(-0x1*-0x7e1+-0x1202+0xa22));for(let _0x10a130=0x1824+0x1*-0x18a1+-0x1*-0x7d;_0x10a130<-0x85e+0x663*0x1+0x1fd;_0x10a130++)_0xc75c6b=_0x3de6ee[_0x10a130][_0x4ab1df*(0x1e9+0x7*-0x54b+0x2327)+(-0x1479+0x279*-0xd+0x349e)]*_0x4c0952+_0x1052be[_0x10a130],_0x9eaa6c=_0x3de6ee[_0x10a130][_0x4ab1df*(0x1*-0x9d+0xef*0x16+-0x13ea)+(0x182c+0x4*0x6fb+-0x3417)]*_0x4c0952+_0xa404c7[_0x10a130],_0xe4c116=_0x3de6ee[_0x10a130][_0x4ab1df*(0x4*-0x6e9+0xa2d*0x1+-0x8bd*-0x2)+(-0x83*0x21+-0x1f7*0xa+-0x5*-0x74f)]*_0x4c0952+_0x498359[_0x10a130],_0x1a52ea=Math['min'](_0xc75c6b,_0x1a52ea),_0x39767b=Math['min'](_0x9eaa6c,_0x39767b),_0x3ebc6b=Math['min'](_0xe4c116,_0x3ebc6b),_0x51987f=Math['max'](_0xc75c6b,_0x51987f),_0x53b144=Math['max'](_0x9eaa6c,_0x53b144),_0x5aa8cb=Math['max'](_0xe4c116,_0x5aa8cb),_0x1052be[_0x10a130]=_0xc75c6b,_0xa404c7[_0x10a130]=_0x9eaa6c,_0x498359[_0x10a130]=_0xe4c116;for(let _0x34653a=-0x224f+0x16a4+0xbab;_0x34653a<-0x1984+-0x1*-0x1ec7+-0x1*0x541;_0x34653a++)_0x27fd32[_0x34653a]+=_0x4c0952*Math['sqrt'](_0x2524ce[_0x34653a][_0x4ab1df*(-0x1b3c+-0x3a*-0xaa+0x5*-0x241)+(0x136+0x68e*0x1+-0x2*0x3e2)]*_0x2524ce[_0x34653a][_0x4ab1df*(0x1686+-0x1772+0xef)+(-0x43*0x1f+-0x1de0+0x25fd)]+_0x2524ce[_0x34653a][_0x4ab1df*(0x161b*-0x1+0x13fe+0x220*0x1)+(0x23ba+0x1197+-0x3550)]*_0x2524ce[_0x34653a][_0x4ab1df*(0x293*-0x3+0x16*-0x162+0x2628)+(0xbb*-0x35+-0x1d94+0x444c)]+_0x2524ce[_0x34653a][_0x4ab1df*(0x4*0x10d+0x223c+-0x445*0x9)+(-0x1a2c+0x215f+-0x1*0x731)]*_0x2524ce[_0x34653a][_0x4ab1df*(0x1*-0x22a0+-0x90*0x20+0x34a3)+(0x1*0x13c4+0x1216+-0x2b4*0xe)]);_0x505be8[-0x1*-0x1de5+0x80+-0x1e65]+=this['qRadialSpe'+'ed'][_0x4ab1df]*_0x4c0952,_0x505be8[-0x16e4+0xb06+0xbdf*0x1]+=this['qRadialSpe'+'ed2'][_0x4ab1df]*_0x4c0952,_0x263c19=Math['max'](_0x263c19,Math['max'](Math['abs'](_0x505be8[-0x92b*0x1+-0xb*0x2c2+0x2781]),Math['abs'](_0x505be8[-0x1921+-0xe9a+0x2*0x13de]))),_0x1c5a3e=Math['max'](_0x1c5a3e,this['qScale'][_0x4ab1df]);}this['emitterSha'+'pe']===ai?(_0xc75c6b=this['emitterExt'+'ents']['x']*(-0xf0e*0x2+-0x63f+0x245b+0.5),_0x9eaa6c=this['emitterExt'+'ents']['y']*(-0x1669*0x1+-0x1*-0x265+0x1404+0.5),_0xe4c116=this['emitterExt'+'ents']['z']*(0x1*-0x5d3+0x2*-0x9d5+-0x197d*-0x1+0.5)):(_0xc75c6b=this['emitterRad'+'ius'],_0x9eaa6c=this['emitterRad'+'ius'],_0xe4c116=this['emitterRad'+'ius']);const _0xe0f468=Math['max'](_0x27fd32[-0xdc5+0x2*-0x9c4+0x214d],_0x27fd32[-0x234a*-0x1+-0x2*-0x134f+-0x49e7]);mc['x']=_0x1a52ea-_0x1c5a3e-_0xc75c6b-_0x263c19-_0xe0f468,mc['y']=_0x39767b-_0x1c5a3e-_0x9eaa6c-_0x263c19-_0xe0f468,mc['z']=_0x3ebc6b-_0x1c5a3e-_0xe4c116-_0x263c19-_0xe0f468,_c['x']=_0x51987f+_0x1c5a3e+_0xc75c6b+_0x263c19+_0xe0f468,_c['y']=_0x53b144+_0x1c5a3e+_0x9eaa6c+_0x263c19+_0xe0f468,_c['z']=_0x5aa8cb+_0x1c5a3e+_0xe4c116+_0x263c19+_0xe0f468,this['localBound'+'s']['setMinMax'](mc,_c);}['rebuild'](){const _0x3d8fb0=this['graphicsDe'+'vice'];this['colorMap']===null&&(this['colorMap']=this['defaultPar'+'amTexture']),this['spawnBound'+'s']=this['emitterSha'+'pe']===ai?this['emitterExt'+'ents']:this['emitterRad'+'ius'],this['useCpu']=this['useCpu']||this['sort']>nu||_0x3d8fb0['maxVertexT'+'extures']<=0x1*0x21a1+0xa8d*0x3+-0x4147||_0x3d8fb0['fragmentUn'+'iformsCoun'+'t']<-0x183+0x1779*-0x1+0xa*0x286||_0x3d8fb0['forceCpuPa'+'rticles'],this['_destroyRe'+'sources'](),this['pack8']=(this['pack8']||!_0x3d8fb0['textureFlo'+'atRenderab'+'le'])&&!this['useCpu'],bi=this['useCpu']||this['pack8']?-0x1ff5+-0x1d30+0x3*0x1463:-0x2325+-0x14b2+-0x37d9*-0x1,this['useMesh']=!!this['mesh'],this['numParticl'+'esPot']=Y['nextPowerO'+'fTwo'](this['numParticl'+'es']),this['rebuildGra'+'phs'](),this['calculateL'+'ocalBounds'](),this['resetWorld'+'Bounds'](),this['node']&&(this['worldBound'+'s']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][0x7*-0x539+0x1123*-0x1+0x6*0x8f3]['copy'](this['worldBound'+'s']),this['worldBound'+'sTrail'][0x18f*-0x4+-0x2*-0x430+-0x223]['copy'](this['worldBound'+'s']),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0x1295*0x2+-0x1*-0xd23+-0x19*0x203),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['pack8']&&this['calculateB'+'oundsMad']()),this['vbToSort']=new Array(this['numParticl'+'es']);for(let _0x3c15df=0x1*-0xa3d+0x21bb+-0x2*0xbbf;_0x3c15df<this['numParticl'+'es'];_0x3c15df++)this['vbToSort'][_0x3c15df]=[-0x23a+-0x587*0x7+0x28eb,0x9*0x233+-0xb*0x384+0xb3*0x1b];this['particleDi'+'stance']=new Float32Array(this['numParticl'+'es']),this['_gpuUpdate'+'r']['randomize'](),this['particleTe'+'x']=new Float32Array(this['numParticl'+'esPot']*bi*pc);const _0x3974b8=this['node']===null||this['localSpace']?D['ZERO']:this['node']['getPositio'+'n']();this['emitterSha'+'pe']===ai&&(this['node']===null||this['localSpace']?Ur['setTRS'](D['ZERO'],le['IDENTITY'],this['spawnBound'+'s']):Ur['setTRS'](D['ZERO'],this['node']['getRotatio'+'n'](),lg['copy'](this['spawnBound'+'s'])['mul'](this['node']['localScale'])),Ai[0x12cf+0x106*-0x26+0x1415]=this['emitterExt'+'ents']['x']!==0x4*-0xb3+0x1537+-0x29*0x73?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:-0x4*0x959+0x37d*-0x4+0x3358,Ai[-0x1*0x1211+0x5*0x76d+-0x130f]=this['emitterExt'+'ents']['y']!==0x2024+-0x18f2+-0x266*0x3?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:0x1*-0x1259+0x1cd2+-0x17f*0x7,Ai[-0xa3*-0x20+0xd3f*0x1+0x219d*-0x1]=this['emitterExt'+'ents']['z']!==0xe1+-0xe2e+0xd4d?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:-0x267+0xedf+-0xc78);for(let _0x206195=0x1b1d+0x128b*0x1+-0x2da8;_0x206195<this['numParticl'+'es'];_0x206195++)this['_cpuUpdate'+'r']['calcSpawnP'+'osition'](this['particleTe'+'x'],Ur,Ai,_0x3974b8,_0x206195),this['useCpu']&&(this['particleTe'+'x'][_0x206195*pc+(0x114*0x13+0x1*0x2a2+-0x34d*0x7)+this['numParticl'+'esPot']*(-0x1a11+0x543+0x6*0x378)*pc]=0x5*0x8b+-0x21d5+0x1*0x1f1f);this['particleTe'+'xStart']=new Float32Array(this['numParticl'+'esPot']*bi*pc);for(let _0x3c03e0=0xb5f+-0xb*0xf9+-0xac;_0x3c03e0<this['particleTe'+'xStart']['length'];_0x3c03e0++)this['particleTe'+'xStart'][_0x3c03e0]=this['particleTe'+'x'][_0x3c03e0];this['useCpu']||(this['pack8']?(this['particleTe'+'xIN']=xs(_0x3d8fb0,this['numParticl'+'esPot'],bi,this['particleTe'+'x'],Ne,0x1ffc+0x7f8+-0x27f3,!(0x77*0x52+-0xccd*-0x2+0x3fb7*-0x1)),this['particleTe'+'xOUT']=xs(_0x3d8fb0,this['numParticl'+'esPot'],bi,this['particleTe'+'x'],Ne,0x8fd+0x220d+-0x2b09,!(0x2*-0xda5+-0x1b81+-0x1f5*-0x1c)),this['particleTe'+'xStart']=xs(_0x3d8fb0,this['numParticl'+'esPot'],bi,this['particleTe'+'xStart'],Ne,-0xcaa*-0x2+-0xe6d*-0x2+-0x362d,!(0x8e*-0x3d+-0x13b7+0x358e))):(this['particleTe'+'xIN']=xs(_0x3d8fb0,this['numParticl'+'esPot'],bi,this['particleTe'+'x']),this['particleTe'+'xOUT']=xs(_0x3d8fb0,this['numParticl'+'esPot'],bi,this['particleTe'+'x']),this['particleTe'+'xStart']=xs(_0x3d8fb0,this['numParticl'+'esPot'],bi,this['particleTe'+'xStart'])),this['rtParticle'+'TexIN']=new gt({'colorBuffer':this['particleTe'+'xIN'],'depth':!(0xd*0x91+-0x14d1+0x2b1*0x5)}),this['rtParticle'+'TexOUT']=new gt({'colorBuffer':this['particleTe'+'xOUT'],'depth':!(0xe84+-0x17a3+0x920)}),this['swapTex']=!(-0x24ce*0x1+-0x48*-0x47+0x10d7));const _0x5dc90d=new Map();this['localSpace']&&_0x5dc90d['set']('LOCAL_SPAC'+'E',''),this['pack8']&&_0x5dc90d['set']('PACK8',''),this['emitterSha'+'pe']===ai&&_0x5dc90d['set']('EMITTERSHA'+'PE_BOX','');const _0x2c073d='Shape:'+this['emitterSha'+'pe']+'-Pack:'+this['pack8']+'-Local:'+this['localSpace'],_0x406ebe=Pe['get'](_0x3d8fb0,_0x3d8fb0['isWebGPU']?it:Fe),_0x49485=new Map(_0x406ebe),_0x497c9b={'attributes':{'vertex_position':Me},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'particle_s'+'imulationP'+'S','fragmentDefines':_0x5dc90d,'fragmentIncludes':_0x49485};_0x497c9b['uniqueName']='ParticleUp'+'dateRespaw'+'n-'+_0x2c073d,_0x5dc90d['set']('RESPAWN',''),this['shaderPart'+'icleUpdate'+'Respawn']=$t['createShad'+'er'](_0x3d8fb0,_0x497c9b),_0x5dc90d['delete']('RESPAWN'),_0x497c9b['uniqueName']='ParticleUp'+'dateNoResp'+'awn-'+_0x2c073d,_0x5dc90d['set']('NO_RESPAWN',''),this['shaderPart'+'icleUpdate'+'NoRespawn']=$t['createShad'+'er'](_0x3d8fb0,_0x497c9b),_0x5dc90d['delete']('NO_RESPAWN'),_0x497c9b['uniqueName']='ParticleUp'+'dateStop-'+_0x2c073d,_0x5dc90d['set']('ON_STOP',''),this['shaderPart'+'icleUpdate'+'OnStop']=$t['createShad'+'er'](_0x3d8fb0,_0x497c9b),this['numParticl'+'eVerts']=this['useMesh']?this['mesh']['vertexBuff'+'er']['numVertice'+'s']:0xf1c+-0x187a+-0x4b1*-0x2,this['numParticl'+'eIndices']=this['useMesh']?this['mesh']['indexBuffe'+'r'][0x3*0x20f+0x9*0x3ed+-0x2982]['numIndices']:0x21ef+-0x1f*-0x121+-0x15*0x348,this['_allocate'](this['numParticl'+'es']);const _0x4ac52c=new Ge(_0x3d8fb0);_0x4ac52c['vertexBuff'+'er']=this['vertexBuff'+'er'],_0x4ac52c['indexBuffe'+'r'][-0x1*-0x1391+0x2c4+-0x1*0x1655]=this['indexBuffe'+'r'],_0x4ac52c['primitive'][-0xa4b*-0x1+-0x3*0xab5+-0x2*-0xaea]['type']=js,_0x4ac52c['primitive'][-0xcac*-0x3+0x1*0x185+-0x2789]['base']=-0x20f+0x5*0xec+-0x28d,_0x4ac52c['primitive'][0x5*0x4+-0x43*0x86+0x22fe]['count']=this['numParticl'+'es']*this['numParticl'+'eIndices'],_0x4ac52c['primitive'][-0x1*-0x72b+0x1173+-0x89*0x2e]['indexed']=!(-0x1368+-0x7c0*0x1+-0x4*-0x6ca),this['material']=this['_createMat'+'erial'](),this['resetMater'+'ial']();const _0x3dbbaa=this['meshInstan'+'ce']?this['meshInstan'+'ce']['visible']:!(-0x1de9+0xc82+0x1167);this['meshInstan'+'ce']=new He(_0x4ac52c,this['material'],this['node']),this['meshInstan'+'ce']['pick']=!(0x2024+0x1*0xe84+-0x2ea7),this['meshInstan'+'ce']['updateKey'](),this['meshInstan'+'ce']['cull']=!(0xe18+0x1614+-0x90b*0x4),this['localSpace']?this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],this['node']['getWorldTr'+'ansform']()):this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['_updateAab'+'b']=!(0x1*0xe09+-0x3ce*0x3+-0x29e),this['meshInstan'+'ce']['visible']=_0x3dbbaa,this['_setMateri'+'alTextures'](),this['resetTime'](),this['addTime'](-0x1*-0x5cf+-0x1d50+0xb*0x223,!(-0x2046+-0x965+0xde4*0x3)),this['preWarm']&&this['prewarm'](this['lifetime']);}['_isAnimate'+'d'](){return this['animNumFra'+'mes']>=-0x813+-0x1*0x1dae+0x9*0x432&&(this['animTilesX']>-0x1f*-0x113+0x5*0x2ef+-0x2ff7||this['animTilesY']>0x1727+0xca0+-0x23c6)&&(this['colorMap']&&this['colorMap']!==this['defaultPar'+'amTexture']||this['normalMap']);}['rebuildGra'+'phs'](){const _0x49cb1e=this['precision'],_0x29f6b2=this['graphicsDe'+'vice'];this['qLocalVelo'+'city']=this['localVeloc'+'ityGraph']['quantize'](_0x49cb1e),this['qVelocity']=this['velocityGr'+'aph']['quantize'](_0x49cb1e),this['qColor']=this['colorGraph']['quantizeCl'+'amped'](_0x49cb1e,0x2*0x1357+0x8f8*-0x2+-0x14be,0x1*-0x6d9+0x1be7+0x1*-0x150d),this['qRotSpeed']=this['rotationSp'+'eedGraph']['quantize'](_0x49cb1e),this['qScale']=this['scaleGraph']['quantize'](_0x49cb1e),this['qAlpha']=this['alphaGraph']['quantize'](_0x49cb1e),this['qRadialSpe'+'ed']=this['radialSpee'+'dGraph']['quantize'](_0x49cb1e),this['qLocalVelo'+'city2']=this['localVeloc'+'ityGraph2']['quantize'](_0x49cb1e),this['qVelocity2']=this['velocityGr'+'aph2']['quantize'](_0x49cb1e),this['qColor2']=this['colorGraph'+'2']['quantizeCl'+'amped'](_0x49cb1e,0x22*0x6d+0x1*-0x25b+-0x6b*0x1d,-0xa2d+-0x1*0xb85+-0x65*-0x37),this['qRotSpeed2']=this['rotationSp'+'eedGraph2']['quantize'](_0x49cb1e),this['qScale2']=this['scaleGraph'+'2']['quantize'](_0x49cb1e),this['qAlpha2']=this['alphaGraph'+'2']['quantize'](_0x49cb1e),this['qRadialSpe'+'ed2']=this['radialSpee'+'dGraph2']['quantize'](_0x49cb1e);for(let _0x498ec0=-0x1893+-0x14fd+0x18*0x1e6;_0x498ec0<_0x49cb1e;_0x498ec0++)this['qRotSpeed'][_0x498ec0]*=Y['DEG_TO_RAD'],this['qRotSpeed2'][_0x498ec0]*=Y['DEG_TO_RAD'];if(this['localVeloc'+'ityUMax']=new Float32Array(0x1*0x1ea6+-0x20c8+0x225),this['velocityUM'+'ax']=new Float32Array(0x6*0x2f4+0x3*0x46f+0x237*-0xe),this['colorUMax']=new Float32Array(-0xa*-0x113+0x3*0x9ad+-0x13e1*0x2),this['rotSpeedUM'+'ax']=[-0xa07*-0x2+-0xfe+-0x1310],this['scaleUMax']=[-0x77*0x3+-0x1*-0xd76+0xc11*-0x1],this['alphaUMax']=[0x1*-0xa3+-0x3da*0x7+-0x933*-0x3],this['radialSpee'+'dUMax']=[0x415*-0x1+-0x8*0x473+-0x27ad*-0x1],this['qLocalVelo'+'cityDiv']=Br(this['qLocalVelo'+'city'],this['qLocalVelo'+'city2'],this['localVeloc'+'ityUMax']),this['qVelocityD'+'iv']=Br(this['qVelocity'],this['qVelocity2'],this['velocityUM'+'ax']),this['qColorDiv']=Br(this['qColor'],this['qColor2'],this['colorUMax']),this['qRotSpeedD'+'iv']=Br(this['qRotSpeed'],this['qRotSpeed2'],this['rotSpeedUM'+'ax']),this['qScaleDiv']=Br(this['qScale'],this['qScale2'],this['scaleUMax']),this['qAlphaDiv']=Br(this['qAlpha'],this['qAlpha2'],this['alphaUMax']),this['qRadialSpe'+'edDiv']=Br(this['qRadialSpe'+'ed'],this['qRadialSpe'+'ed2'],this['radialSpee'+'dUMax']),this['pack8']){const _0xd7f0c3=[-0x2*0xc22+0x385*-0x3+0x5*0x6f7,0x107*-0xb+-0x5a4+-0x10f1*-0x1,0x1972+-0x2b7*-0x1+-0x1c29];Xr(this['qVelocity'],_0xd7f0c3);const _0x90d8c1=[-0x1*-0x1b49+-0x1a58*0x1+-0xf1,0x1dd9+0x6d5+0x756*-0x5,-0x14e8+0x1be1+-0xff*0x7];Xr(this['qVelocity2'],_0x90d8c1);const _0x4cada3=[-0x1*-0x13ea+0xd2d*-0x2+0x670,-0x13*-0x35+0x682+-0xa71,0x11ca+0x1*0x2149+-0x20b*0x19];Xr(this['qLocalVelo'+'city'],_0x4cada3);const _0x3acb2c=[-0x86*-0x23+-0xb7b+-0x6d7,-0xec8+0x1b57+-0xc8f,0x15*0xe3+0x1*0x323+-0xae1*0x2];Xr(this['qLocalVelo'+'city2'],_0x3acb2c);const _0x4e77fe=[-0x20bf+-0x1*-0x156f+0x2*0x5a8];Xr(this['qRadialSpe'+'ed'],_0x4e77fe);const _0x4adda4=[0x317*0x6+0x47b+-0x1705];Xr(this['qRadialSpe'+'ed2'],_0x4adda4);let _0x485727=Math['max'](_0xd7f0c3[-0x2ae*0x1+-0x1*0x1c3d+0x1eeb],_0x90d8c1[-0x1282*0x1+-0xc15*0x2+-0x2*-0x1556]);_0x485727=Math['max'](_0x485727,_0xd7f0c3[0x6a3*-0x3+-0xb88+-0x5*-0x64a]),_0x485727=Math['max'](_0x485727,_0x90d8c1[-0x2*0x107+0xe7*-0xc+0x1*0xce3]),_0x485727=Math['max'](_0x485727,_0xd7f0c3[-0x9*0x283+0x1274+0x429]),_0x485727=Math['max'](_0x485727,_0x90d8c1[0x4d8*0x4+0x6a5+-0x1*0x1a03]);let _0x44bc34=Math['max'](_0x4cada3[-0x107*-0x1f+-0x3*-0x113+-0x2312],_0x3acb2c[-0x54*-0x50+-0xb1*-0x37+-0x4047]);_0x44bc34=Math['max'](_0x44bc34,_0x4cada3[-0x343*0x1+-0x1252*-0x2+-0x2160]),_0x44bc34=Math['max'](_0x44bc34,_0x3acb2c[0xebb+0x3e5*0x7+-0x29fd]),_0x44bc34=Math['max'](_0x44bc34,_0x4cada3[0x35*0x65+0x1d0f+0xa*-0x4ff]),_0x44bc34=Math['max'](_0x44bc34,_0x3acb2c[-0x125+-0x52*0x4f+-0x1*-0x1a75]);const _0x2cb172=Math['max'](_0x4e77fe[-0x3*-0x5ed+-0x7*0x41f+0xb12*0x1],_0x4adda4[0x2ab+0xd74+-0x101f*0x1]);this['maxVel']=_0x485727+_0x44bc34+_0x2cb172;}this['useCpu']||(this['internalTe'+'x0']=xs(_0x29f6b2,_0x49cb1e,-0x2*-0xb87+-0x8ea*0x4+0xc9b,cg(this['qLocalVelo'+'city'],this['qLocalVelo'+'cityDiv'])),this['internalTe'+'x1']=xs(_0x29f6b2,_0x49cb1e,-0x5c7+0x19*-0xe5+0x37*0x83,cg(this['qVelocity'],this['qVelocityD'+'iv'])),this['internalTe'+'x2']=xs(_0x29f6b2,_0x49cb1e,-0x1b2b+-0x1*0x15d+-0x983*-0x3,xA(this['qRotSpeed'],this['qScale'],this['qScaleDiv'],this['qRotSpeedD'+'iv'],this['qAlphaDiv'])),this['internalTe'+'x3']=xs(_0x29f6b2,_0x49cb1e,-0x397*0x3+-0x1497+0x1f5d,TA(this['qRadialSpe'+'ed'],this['qRadialSpe'+'edDiv']))),this['colorParam']=xs(_0x29f6b2,_0x49cb1e,-0x975+-0x24ac+-0x1*-0x2e22,vA(this['qColor'],this['qAlpha']),_s,0x99c+0x1b4d+-0x24e8,!(0x198f+0x217c+0x1*-0x3b0b));}['_setMateri'+'alTextures'](){this['colorMap']&&(w['call'](()=>{py(this['colorMap']['format'])&&w['warnOnce']('ParticleEm'+'itter:\x20col'+'orMap\x20text'+'ure\x20['+this['colorMap']['name']+(']\x20is\x20not\x20u'+'sing\x20sRGB\x20'+'format.\x20Pl'+'ease\x20corre'+'ct\x20it\x20for\x20'+'the\x20correc'+'t\x20renderin'+'g.'),this['colorMap']);}),this['material']['setParamet'+'er']('colorMap',this['colorMap']),this['lighting']&&this['normalMap']&&this['material']['setParamet'+'er']('normalMap',this['normalMap']));}['_createMat'+'erial'](){const _0x2c9964=new SA(this);return _0x2c9964['name']='EmitterMat'+'erial:'+this['node']['name'],_0x2c9964['cull']=bt,_0x2c9964['alphaWrite']=!(0x22a7+-0x1*-0x12f7+-0x359d),_0x2c9964['blendType']=this['blendType'],_0x2c9964['depthWrite']=this['depthWrite'],_0x2c9964;}['resetMater'+'ial'](){const _0x1d1cbd=this['material'];_0x1d1cbd['setParamet'+'er']('stretch',this['stretch']),this['_isAnimate'+'d']()&&(_0x1d1cbd['setParamet'+'er']('animTexTil'+'esParams',this['animTilesP'+'arams']),_0x1d1cbd['setParamet'+'er']('animTexPar'+'ams',this['animParams']),_0x1d1cbd['setParamet'+'er']('animTexInd'+'exParams',this['animIndexP'+'arams'])),_0x1d1cbd['setParamet'+'er']('colorMult',this['intensity']),this['useCpu']||(_0x1d1cbd['setParamet'+'er']('internalTe'+'x0',this['internalTe'+'x0']),_0x1d1cbd['setParamet'+'er']('internalTe'+'x1',this['internalTe'+'x1']),_0x1d1cbd['setParamet'+'er']('internalTe'+'x2',this['internalTe'+'x2']),_0x1d1cbd['setParamet'+'er']('internalTe'+'x3',this['internalTe'+'x3'])),_0x1d1cbd['setParamet'+'er']('colorParam',this['colorParam']),_0x1d1cbd['setParamet'+'er']('numParticl'+'es',this['numParticl'+'es']),_0x1d1cbd['setParamet'+'er']('numParticl'+'esPot',this['numParticl'+'esPot']),_0x1d1cbd['setParamet'+'er']('lifetime',this['lifetime']),_0x1d1cbd['setParamet'+'er']('rate',this['rate']),_0x1d1cbd['setParamet'+'er']('rateDiv',this['rate2']-this['rate']),_0x1d1cbd['setParamet'+'er']('seed',this['seed']),_0x1d1cbd['setParamet'+'er']('scaleDivMu'+'lt',this['scaleUMax'][-0x1c01+0x5b9+0x1648]),_0x1d1cbd['setParamet'+'er']('alphaDivMu'+'lt',this['alphaUMax'][-0x1*0x1a0b+-0x996+-0x517*-0x7]),_0x1d1cbd['setParamet'+'er']('radialSpee'+'dDivMult',this['radialSpee'+'dUMax'][0x1*-0x1505+0xbf*-0x4+0x5*0x4cd]),_0x1d1cbd['setParamet'+'er']('graphNumSa'+'mples',this['precision']),_0x1d1cbd['setParamet'+'er']('graphSampl'+'eSize',(0x1953+0x4d*0x1f+-0x22a5)/this['precision']),_0x1d1cbd['setParamet'+'er']('emitterSca'+'le',new Float32Array([0x951*0x4+0x1c0+-0x3*0xd01,-0x175d+-0x1597*-0x1+0x1*0x1c7,0x11b1*0x2+-0x133*-0x2+-0x25c7])),this['pack8']&&(this['_gpuUpdate'+'r']['_setInputB'+'ounds'](),_0x1d1cbd['setParamet'+'er']('inBoundsSi'+'ze',this['_gpuUpdate'+'r']['inBoundsSi'+'zeUniform']),_0x1d1cbd['setParamet'+'er']('inBoundsCe'+'nter',this['_gpuUpdate'+'r']['inBoundsCe'+'nterUnifor'+'m']),_0x1d1cbd['setParamet'+'er']('maxVel',this['maxVel'])),this['wrap']&&this['wrapBounds']&&(this['wrapBounds'+'Uniform'][0x4*0x240+0x705+0x3*-0x557]=this['wrapBounds']['x'],this['wrapBounds'+'Uniform'][-0x2441+-0x1df5+0x4237]=this['wrapBounds']['y'],this['wrapBounds'+'Uniform'][0x1bf*0x12+-0xbb1+-0x1*0x13bb]=this['wrapBounds']['z'],_0x1d1cbd['setParamet'+'er']('wrapBounds',this['wrapBounds'+'Uniform'])),this['_setMateri'+'alTextures'](),this['depthSofte'+'ning']>0x1398+-0x3b*-0x2e+-0x1e32&&_0x1d1cbd['setParamet'+'er']('softening',(-0x1*-0xfee+-0x1*-0x1ec7+-0x2eb4)/(this['depthSofte'+'ning']*this['depthSofte'+'ning']*(0x1b8e+-0x2bc+0x35*-0x76))),this['stretch']>-0xaea*-0x2+0x1b4c+-0x18*0x20c&&(_0x1d1cbd['cull']=bt),this['_compParti'+'cleFacePar'+'ams']();}['_compParti'+'cleFacePar'+'ams'](){let _0x1f2c8f,_0x130e14;if(this['orientatio'+'n']===yh)_0x1f2c8f=new Float32Array([-0x49*0xc+-0x11*-0xe5+-0xbc8,0x9*0x305+-0x8*-0x52+-0x1dbd,0x1*-0xda9+-0x1e96+-0x2f*-0xf1]),_0x130e14=new Float32Array([0x1b1a+-0x1*0x1ab1+-0x69,0xcb3*-0x3+-0x33b*-0x7+0x1*0xf7c,-0x3a*-0x2b+0x7aa*0x3+0xab*-0x31]);else{let _0x3c80ce;this['orientatio'+'n']===Vw?_0x3c80ce=this['particleNo'+'rmal']['normalize']():_0x3c80ce=(this['node']===null?te['IDENTITY']:this['node']['getWorldTr'+'ansform']())['transformV'+'ector'](this['particleNo'+'rmal'])['normalize']();const _0x431a13=new D(-0xd*0x83+0x6a1*-0x3+-0x1a8b*-0x1,0x13b3*0x1+0x13e*-0x3+0xff9*-0x1,0x2615*-0x1+-0x125*-0x8+-0x1*-0x1ced);Math['abs'](_0x431a13['dot'](_0x3c80ce))===0x4*-0x425+-0x12*0x1ef+0x5*0xa47&&_0x431a13['set'](-0x1523+0x364+0x11bf,0xe17*-0x1+-0x1616+0x1b*0x157,0x32*0x8+-0x1ed6+0x1d47);const _0x119179=new D()['cross'](_0x3c80ce,_0x431a13)['normalize']();_0x431a13['cross'](_0x119179,_0x3c80ce)['normalize'](),_0x1f2c8f=new Float32Array([_0x431a13['x'],_0x431a13['y'],_0x431a13['z']]),_0x130e14=new Float32Array([_0x119179['x'],_0x119179['y'],_0x119179['z']]);}this['material']['setParamet'+'er']('faceTangen'+'t',_0x1f2c8f),this['material']['setParamet'+'er']('faceBinorm',_0x130e14);}['getVertexI'+'nfo'](){const _0x3b9e0b=[];return this['useCpu']?_0x3b9e0b['push']({'semantic':Jf,'components':0x4,'type':Ve},{'semantic':uh,'components':0x4,'type':Ve},{'semantic':Ap,'components':0x4,'type':Ve},{'semantic':Cp,'components':0x1,'type':Ve},{'semantic':Pp,'components':this['useMesh']?-0x151c+0x9da+0xb46:0x1168+-0x83*-0x1b+-0x1*0x1f37,'type':Ve}):(_0x3b9e0b['push']({'semantic':Jf,'components':0x4,'type':Ve}),this['useMesh']&&_0x3b9e0b['push']({'semantic':uh,'components':0x2,'type':Ve})),_0x3b9e0b;}['_allocate'](_0x2e3ec9){const _0x3697be=_0x2e3ec9*this['numParticl'+'eVerts'],_0x446656=_0x2e3ec9*this['numParticl'+'eIndices'];if(this['vertexBuff'+'er']===void(0x2b*-0x6f+-0x1c0*0x13+0x33e5)||this['vertexBuff'+'er']['getNumVert'+'ices']()!==_0x3697be){const _0x3b56e3=this['getVertexI'+'nfo'](),_0x3c9c0a=new kt(this['graphicsDe'+'vice'],_0x3b56e3);this['vertexBuff'+'er']=new Is(this['graphicsDe'+'vice'],_0x3c9c0a,_0x3697be,{'usage':lh}),this['indexBuffe'+'r']=new br(this['graphicsDe'+'vice'],wr,_0x446656);const _0x3df331=new Float32Array(this['vertexBuff'+'er']['lock']());let _0x379ce6,_0x20dbe0,_0x384f8b;if(this['useMesh']){_0x379ce6=new Float32Array(this['mesh']['vertexBuff'+'er']['lock']()),_0x20dbe0=_0x379ce6['length']/this['mesh']['vertexBuff'+'er']['numVertice'+'s'];for(let _0x2103ff=-0x84f*-0x2+-0x2*-0xa57+0xb*-0x364;_0x2103ff<this['mesh']['vertexBuff'+'er']['format']['elements']['length'];_0x2103ff++)if(this['mesh']['vertexBuff'+'er']['format']['elements'][_0x2103ff]['name']===is){_0x384f8b=this['mesh']['vertexBuff'+'er']['format']['elements'][_0x2103ff]['offset']/(0x2*-0xf5+0x223*0x10+-0x2042);break;}}for(let _0x1ec83a=-0x391+-0x2*-0x5c+0x2d9;_0x1ec83a<_0x3697be;_0x1ec83a++){const _0x24a698=Math['floor'](_0x1ec83a/this['numParticl'+'eVerts']);if(this['useMesh']){const _0x44b2d3=_0x1ec83a%this['numParticl'+'eVerts'];_0x3df331[_0x1ec83a*(-0x1be*0xf+-0xfd5+0x29fd)]=_0x379ce6[_0x44b2d3*_0x20dbe0],_0x3df331[_0x1ec83a*(-0x1141*-0x1+0x2*-0xbf5+0x6af)+(0x3*0xaf1+-0x1949+-0x789)]=_0x379ce6[_0x44b2d3*_0x20dbe0+(0x53*-0x57+-0xc1a*0x1+0x2850)],_0x3df331[_0x1ec83a*(0x1c9b+-0x1605+-0x690)+(0x51*-0x73+-0x15f1+0x3a56)]=_0x379ce6[_0x44b2d3*_0x20dbe0+(-0x1ff*-0x13+0xe*0x39+-0x2909)],_0x3df331[_0x1ec83a*(-0xe33+-0x6da+0x1513)+(0x1*0x268f+-0x1a72+-0xc1a)]=_0x24a698,_0x3df331[_0x1ec83a*(0x44c+0x13*0xf+0xc5*-0x7)+(0x2116+-0x22ee+-0x22*-0xe)]=_0x379ce6[_0x44b2d3*_0x20dbe0+_0x384f8b+(0x114b*-0x2+0x24b4+-0x21e)],_0x3df331[_0x1ec83a*(-0x11aa+-0xc79+0x7*0x44f)+(0xa1*-0x11+-0xc7f*0x1+0x1735)]=0x25*0x11+-0x1*0xce5+-0xf3*-0xb-_0x379ce6[_0x44b2d3*_0x20dbe0+_0x384f8b+(0x1064+-0x1e6*0x3+-0x11*0xa1)];}else{const _0x3e4620=_0x1ec83a%(-0x17b8+-0x6c7*-0x3+-0x1*-0x367);_0x3df331[_0x1ec83a*(-0x17c3*-0x1+0x2212+-0x39d1)]=ig[_0x3e4620][0x24ba+0xa8f+-0x2f49],_0x3df331[_0x1ec83a*(0x34e+-0x2397+0x204d)+(-0xcce+0x7*0x17f+0x256)]=ig[_0x3e4620][-0x9e+-0xa6a+0xb09],_0x3df331[_0x1ec83a*(-0xb*-0x27e+0xd1+0x1c37*-0x1)+(0x9af+-0x954+-0x59)]=0x331*-0x4+0x115*-0x1a+0x2*0x1473,_0x3df331[_0x1ec83a*(-0x10a*0x16+0x1*0x2057+-0x977)+(0x1e4a+0x358+0x13*-0x1c5)]=_0x24a698;}}this['useCpu']&&(this['vbCPU']=new Float32Array(_0x3df331),this['vbOld']=new Float32Array(this['vbCPU']['length'])),this['vertexBuff'+'er']['unlock'](),this['useMesh']&&this['mesh']['vertexBuff'+'er']['unlock']();let _0x2f1430=0x3*-0x335+-0x7e6+-0x12b*-0xf;const _0x169c51=new Uint32Array(this['indexBuffe'+'r']['lock']());if(this['useMesh']){const _0x5c7fa3=this['mesh']['indexBuffe'+'r'][-0xb75*-0x1+-0x6e*-0x2e+-0x1f39];_0x379ce6=new Sh[_0x5c7fa3['format']](_0x5c7fa3['lock']());}for(let _0x5cf31d=0xd1*0x13+-0x2273+0x328*0x6;_0x5cf31d<_0x2e3ec9;_0x5cf31d++)if(this['useMesh']){for(let _0xf97f12=0xe6c+0x14*-0x197+-0x1160*-0x1;_0xf97f12<this['numParticl'+'eIndices'];_0xf97f12++)_0x169c51[_0x5cf31d*this['numParticl'+'eIndices']+_0xf97f12]=_0x379ce6[_0xf97f12]+_0x5cf31d*this['numParticl'+'eVerts'];}else{const _0x2a4923=_0x5cf31d*(-0x1836+0x4b4*0x1+0x1386);_0x169c51[_0x2f1430++]=_0x2a4923,_0x169c51[_0x2f1430++]=_0x2a4923+(0x11ab*0x1+-0x1*-0x1853+-0x1*0x29fd),_0x169c51[_0x2f1430++]=_0x2a4923+(-0x1*-0x1528+-0x16f2+0x1cc),_0x169c51[_0x2f1430++]=_0x2a4923,_0x169c51[_0x2f1430++]=_0x2a4923+(0x9*0x163+-0x1b71+0xef8),_0x169c51[_0x2f1430++]=_0x2a4923+(-0x1*-0x1057+-0x1225+0x1d1);}this['indexBuffe'+'r']['unlock'](),this['useMesh']&&this['mesh']['indexBuffe'+'r'][-0x152b+0xa7*0xe+-0x403*-0x3]['unlock']();}}['reset'](){if(this['beenReset']=!(0xfb*-0x13+-0x2*-0x7+0x1293),this['seed']=Math['random'](),this['material']['setParamet'+'er']('seed',this['seed']),this['useCpu']){for(let _0x1996cf=-0xf0*0x2+0x2358+-0x2178;_0x1996cf<this['particleTe'+'xStart']['length'];_0x1996cf++)this['particleTe'+'x'][_0x1996cf]=this['particleTe'+'xStart'][_0x1996cf];}else this['_setMateri'+'alTextures']();this['resetWorld'+'Bounds'](),this['resetTime']();const _0x333e76=this['loop'];this['loop']=!(-0x5*0x254+0x1*0x17d2+-0xc2e),this['addTime'](0xd*-0x6b+-0x1bd0+0x213f*0x1,!(-0xc2d+-0x1718+0x2346)),this['loop']=_0x333e76,this['preWarm']&&this['prewarm'](this['lifetime']);}['prewarm'](_0x18e8a9){const _0x36b33b=_0x18e8a9/this['lifetime'],_0x5d0d7d=Math['min'](Math['floor'](_0x36b33b*this['precision']),this['precision']),_0x4903e9=_0x18e8a9/_0x5d0d7d;for(let _0x581c6f=-0x5e8+-0x1a89*-0x1+-0x14a1;_0x581c6f<_0x5d0d7d;_0x581c6f++)this['addTime'](_0x4903e9,!(-0x6cc+0x147+0x7*0xca));}['resetTime'](){this['endTime']=wA(this);}['finishFram'+'e'](){this['useCpu']&&this['vertexBuff'+'er']['unlock']();}['addTime'](_0x2e1100,_0x22f675){const _0x56e829=this['graphicsDe'+'vice'],_0x5120b2=de();if(this['simTimeTot'+'al']+=_0x2e1100,this['calculateW'+'orldBounds'](),this['_isAnimate'+'d']()){const _0x49f290=this['animTilesP'+'arams'];_0x49f290[-0x59*-0xf+-0x270+0x3*-0xed]=(0x1928+0x4*-0x1fd+0x77*-0x25)/this['animTilesX'],_0x49f290[0xbaa+0x1768+0x2f*-0xbf]=(0x846+0x30a*-0x1+0x67*-0xd)/this['animTilesY'];const _0x164696=this['animParams'];_0x164696[0x1675*-0x1+-0x20e+0x1883]=this['animStartF'+'rame'],_0x164696[-0x1f+0x187a+-0x185a]=this['animNumFra'+'mes']*this['animSpeed'],_0x164696[-0x25ab+0x1f8a+0x623]=this['animNumFra'+'mes']-(-0x1*-0xd85+0x12b9+-0x203d*0x1),_0x164696[0x506*0x4+0x1fc8+0x11*-0x30d]=this['animNumAni'+'mations']-(0x1505+-0x1e38+0x1f*0x4c);const _0x335475=this['animIndexP'+'arams'];_0x335475[0x2a*-0x71+0x119e+0xec]=this['animIndex'],_0x335475[-0xaba*-0x1+0xe*-0x114+0x45f]=this['randomizeA'+'nimIndex'];}this['scene']&&this['camera']!==this['scene']['_activeCam'+'era']&&(this['camera']=this['scene']['_activeCam'+'era'],this['onChangeCa'+'mera']()),this['emitterSha'+'pe']===ai&&(Ai[0x55a*-0x4+0x203a+-0xad2]=this['emitterExt'+'ents']['x']!==-0xcca+0x6f*-0x2b+0x1f6f?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:0x1*0x103a+0x16d+0x11a7*-0x1,Ai[0x73*-0x24+0x21*0xfd+-0x1070]=this['emitterExt'+'ents']['y']!==0x1*0x1cb3+-0xa1*-0x2e+-0x39a1?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:-0x1f23*0x1+-0xc05*0x3+-0x7a*-0x8d,Ai[0x23e3*0x1+-0x1a88+-0x959]=this['emitterExt'+'ents']['z']!==-0x11bf+0xf86+-0x1*-0x239?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:0x8b3+0x9ae+-0x1261,this['meshInstan'+'ce']['node']===null?Ur['setTRS'](D['ZERO'],le['IDENTITY'],this['emitterExt'+'ents']):Ur['setTRS'](D['ZERO'],this['meshInstan'+'ce']['node']['getRotatio'+'n'](),lg['copy'](this['emitterExt'+'ents'])['mul'](this['meshInstan'+'ce']['node']['localScale'])));let _0x21d87;const _0x15f194=this['meshInstan'+'ce']['node']===null?D['ONE']:this['meshInstan'+'ce']['node']['localScale'];if(this['emitterSca'+'leUniform'][0x1615*-0x1+0xadd+0xb38]=_0x15f194['x'],this['emitterSca'+'leUniform'][0x209f+0x7b1+0x1*-0x284f]=_0x15f194['y'],this['emitterSca'+'leUniform'][-0x145f+0x1d13*-0x1+-0xa*-0x4f2]=_0x15f194['z'],this['material']['setParamet'+'er']('emitterSca'+'le',this['emitterSca'+'leUniform']),this['localSpace']&&this['meshInstan'+'ce']['node']&&(_0x21d87=this['meshInstan'+'ce']['node']['getPositio'+'n'](),this['emitterPos'+'Uniform'][-0x366+-0x16a*-0x1+0x1*0x1fc]=_0x21d87['x'],this['emitterPos'+'Uniform'][0x1709+-0x1*-0x13ea+0x17*-0x1de]=_0x21d87['y'],this['emitterPos'+'Uniform'][0x1f75+0x1586+-0x1*0x34f9]=_0x21d87['z'],this['material']['setParamet'+'er']('emitterPos',this['emitterPos'+'Uniform'])),this['_compParti'+'cleFacePar'+'ams'](),!this['useCpu'])this['_gpuUpdate'+'r']['update'](_0x56e829,Ur,Ai,_0x2e1100,_0x22f675);else{const _0x3e8a62=new Float32Array(this['vertexBuff'+'er']['lock']());this['_cpuUpdate'+'r']['update'](_0x3e8a62,this['vbToSort'],this['particleTe'+'x'],Ur,Ai,_0x21d87,_0x2e1100,_0x22f675);}this['loop']||Date['now']()>this['endTime']&&(this['onFinished']&&this['onFinished'](),this['meshInstan'+'ce']['visible']=!(-0x3*-0xadf+0x593*0x5+-0x3c7b)),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['drawOrder']=this['drawOrder']),this['_addTimeTi'+'me']+=de()-_0x5120b2;}['_destroyRe'+'sources'](){var _0x485ba2,_0x456bd7,_0x5dbd2a,_0x567b78,_0x4b01ef,_0x37443c,_0x5887da,_0x406d77,_0x163161,_0x5a251e,_0x403726,_0x2b80f7;(_0x485ba2=this['particleTe'+'xIN'])==null||_0x485ba2['destroy'](),this['particleTe'+'xIN']=null,(_0x456bd7=this['particleTe'+'xOUT'])==null||_0x456bd7['destroy'](),this['particleTe'+'xOUT']=null,this['particleTe'+'xStart']&&this['particleTe'+'xStart']['destroy']&&(this['particleTe'+'xStart']['destroy'](),this['particleTe'+'xStart']=null),(_0x5dbd2a=this['rtParticle'+'TexIN'])==null||_0x5dbd2a['destroy'](),this['rtParticle'+'TexIN']=null,(_0x567b78=this['rtParticle'+'TexOUT'])==null||_0x567b78['destroy'](),this['rtParticle'+'TexOUT']=null,(_0x4b01ef=this['internalTe'+'x0'])==null||_0x4b01ef['destroy'](),this['internalTe'+'x0']=null,(_0x37443c=this['internalTe'+'x1'])==null||_0x37443c['destroy'](),this['internalTe'+'x1']=null,(_0x5887da=this['internalTe'+'x2'])==null||_0x5887da['destroy'](),this['internalTe'+'x2']=null,(_0x406d77=this['internalTe'+'x3'])==null||_0x406d77['destroy'](),this['internalTe'+'x3']=null,(_0x163161=this['colorParam'])==null||_0x163161['destroy'](),this['colorParam']=null,(_0x5a251e=this['vertexBuff'+'er'])==null||_0x5a251e['destroy'](),this['vertexBuff'+'er']=void(0x1bd9+-0x1ba6+-0x33),(_0x403726=this['indexBuffe'+'r'])==null||_0x403726['destroy'](),this['indexBuffe'+'r']=void(0x180d+-0x864+-0xfa9),(_0x2b80f7=this['material'])==null||_0x2b80f7['destroy'](),this['material']=null;}['destroy'](){this['camera']=null,this['_destroyRe'+'sources']();}}class PA extends ya{['generateKe'+'y'](_0xf9e679){var _0x39bd0a;const _0xc1fcf9=_0xf9e679['shaderDesc'],_0x322709=_0xc1fcf9['vertexGLSL']?hi(_0xc1fcf9['vertexGLSL']):-0x2076+0x1690+0x7*0x16a,_0x54aa16=_0xc1fcf9['fragmentGL'+'SL']?hi(_0xc1fcf9['fragmentGL'+'SL']):-0x7*-0x194+-0x1f10+0x1404,_0x151d99=_0xc1fcf9['vertexWGSL']?hi(_0xc1fcf9['vertexWGSL']):-0x130a+-0x83*-0x3f+-0xd33,_0x529811=_0xc1fcf9['fragmentWG'+'SL']?hi(_0xc1fcf9['fragmentWG'+'SL']):-0x527*0x5+-0x3a*0x2b+0x2381,_0x19a73f=ya['definesHas'+'h'](_0xf9e679['defines']),_0x55891f=((_0x39bd0a=_0xf9e679['shaderChun'+'ks'])==null?void(-0xf0+0x1300+-0x242*0x8):_0x39bd0a['key'])??'';let _0x1f8c61=_0xc1fcf9['uniqueName']+'_'+_0x19a73f+'_'+_0x322709+'_'+_0x54aa16+'_'+_0x151d99+'_'+_0x529811+'_'+_0x55891f;return _0xf9e679['skin']&&(_0x1f8c61+='_skin'),_0xf9e679['useInstanc'+'ing']&&(_0x1f8c61+='_inst'),_0xf9e679['useMorphPo'+'sition']&&(_0x1f8c61+='_morphp'),_0xf9e679['useMorphNo'+'rmal']&&(_0x1f8c61+='_morphn'),_0xf9e679['useMorphTe'+'xtureBased'+'Int']&&(_0x1f8c61+='_morphi'),_0x1f8c61;}['createAttr'+'ibutesDefi'+'nition'](_0x340056,_0x1ffff5){const _0x2d20e7=_0x1ffff5['shaderDesc']['attributes'],_0xdd5849=_0x2d20e7?{..._0x2d20e7}:void(-0x1939+0x192b+0xe);_0x1ffff5['skin']&&(_0xdd5849['vertex_bon'+'eWeights']=gi,_0xdd5849['vertex_bon'+'eIndices']=us),(_0x1ffff5['useMorphPo'+'sition']||_0x1ffff5['useMorphNo'+'rmal'])&&(_0xdd5849['morph_vert'+'ex_id']=Ln),_0x340056['attributes']=_0xdd5849;}['createVert'+'exDefiniti'+'on'](_0x272afe,_0x242241,_0x21a6a3,_0x2024ad){const _0x32eaa8=_0x242241['shaderDesc'],_0x23ba54=new Map(_0x21a6a3);_0x23ba54['set']('transformI'+'nstancingV'+'S','');const _0x16c2f0=new Map(_0x242241['defines']);_0x242241['skin']&&_0x16c2f0['set']('SKIN',!(0x3de+0x23e*-0xc+0x170a)),_0x242241['useInstanc'+'ing']&&_0x16c2f0['set']('INSTANCING',!(0x9f3+-0x1276+0x883*0x1)),(_0x242241['useMorphPo'+'sition']||_0x242241['useMorphNo'+'rmal'])&&(_0x16c2f0['set']('MORPHING',!(0x68b+0x14d1*0x1+-0x1b5c)),_0x242241['useMorphTe'+'xtureBased'+'Int']&&_0x16c2f0['set']('MORPHING_I'+'NT',!(-0x1*0x11ae+-0x416*-0x4+0x156)),_0x242241['useMorphPo'+'sition']&&_0x16c2f0['set']('MORPHING_P'+'OSITION',!(-0x1*0x21c1+-0x10*0xa7+-0x1b*-0x1a3)),_0x242241['useMorphNo'+'rmal']&&_0x16c2f0['set']('MORPHING_N'+'ORMAL',!(-0xebc+0xfa3+-0xe7))),_0x272afe['vertexCode']=_0x2024ad?_0x32eaa8['vertexWGSL']:_0x32eaa8['vertexGLSL'],_0x272afe['vertexIncl'+'udes']=_0x23ba54,_0x272afe['vertexDefi'+'nes']=_0x16c2f0;}['createFrag'+'mentDefini'+'tion'](_0x1370ed,_0x2d6be3,_0x59cb57,_0x26725b){const _0x4fe134=_0x2d6be3['shaderDesc'],_0x54a09d=new Map(_0x59cb57),_0x3bd22a=new Map(_0x2d6be3['defines']);_0x1370ed['fragmentCo'+'de']=_0x26725b?_0x4fe134['fragmentWG'+'SL']:_0x4fe134['fragmentGL'+'SL'],_0x1370ed['fragmentIn'+'cludes']=_0x54a09d,_0x1370ed['fragmentDe'+'fines']=_0x3bd22a;}['createShad'+'erDefiniti'+'on'](_0x4255ba,_0x2e57c3){var _0x20d047;const _0x503c2b=_0x2e57c3['shaderDesc'],_0x1829de=_0x4255ba['isWebGPU']&&!!_0x503c2b['vertexWGSL']&&!!_0x503c2b['fragmentWG'+'SL']&&(((_0x20d047=_0x2e57c3['shaderChun'+'ks'])==null?void(-0xc90+0x191e+-0xc8e):_0x20d047['useWGSL'])??!(0x22c7+0x20d6+-0x439d)),_0x14ca10={'name':'ShaderMate'+'rial-'+_0x503c2b['uniqueName'],'shaderLanguage':_0x1829de?it:Fe,'fragmentOutputTypes':_0x503c2b['fragmentOu'+'tputTypes'],'meshUniformBufferFormat':_0x503c2b['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x503c2b['meshBindGr'+'oupFormat']},_0x265ea6=_0x1829de?it:Fe,_0x3699a2=bh['merge'](Pe['get'](_0x4255ba,_0x265ea6),_0x2e57c3['shaderChun'+'ks'][_0x265ea6]);return this['createAttr'+'ibutesDefi'+'nition'](_0x14ca10,_0x2e57c3),this['createVert'+'exDefiniti'+'on'](_0x14ca10,_0x2e57c3,_0x3699a2,_0x1829de),this['createFrag'+'mentDefini'+'tion'](_0x14ca10,_0x2e57c3,_0x3699a2,_0x1829de),Jt['createDefi'+'nition'](_0x4255ba,_0x14ca10);}}const MA=new PA();class Xn extends tr{constructor(_0x4156eb){super(),h(this,'_shaderDes'+'c'),this['shaderDesc']=_0x4156eb;}set['shaderDesc'](_0x51bdaf){if(this['_shaderDes'+'c']=void(0x3*0x8d7+-0x81*-0x39+-0x1*0x373e),_0x51bdaf&&(this['_shaderDes'+'c']={'uniqueName':_0x51bdaf['uniqueName'],'attributes':_0x51bdaf['attributes'],'fragmentOutputTypes':_0x51bdaf['fragmentOu'+'tputTypes'],'vertexGLSL':_0x51bdaf['vertexGLSL'],'fragmentGLSL':_0x51bdaf['fragmentGL'+'SL'],'vertexWGSL':_0x51bdaf['vertexWGSL'],'fragmentWGSL':_0x51bdaf['fragmentWG'+'SL']},_0x51bdaf['vertexCode']||_0x51bdaf['fragmentCo'+'de']||_0x51bdaf['shaderLang'+'uage'])){w['deprecated']('ShaderMate'+'rial\x20['+_0x51bdaf['uniqueName']+(']:\x20vertexC'+'ode,\x20fragm'+'entCode\x20an'+'d\x20shaderLa'+'nguage\x20pro'+'perties\x20of'+'\x20ShaderDes'+'c\x20is\x20depre'+'cated.\x20Use'+'\x20vertexGLS'+'L,\x20fragmen'+'tGLSL,\x20ver'+'texWGSL\x20or'+'\x20fragmentW'+'GSL\x20instea'+'d.'));const _0x32fbd3=_0x51bdaf['shaderLang'+'uage']??Fe;_0x32fbd3===Fe?(this['_shaderDes'+'c']['vertexGLSL']=_0x51bdaf['vertexCode'],this['_shaderDes'+'c']['fragmentGL'+'SL']=_0x51bdaf['fragmentCo'+'de']):_0x32fbd3===it&&(this['_shaderDes'+'c']['vertexWGSL']=_0x51bdaf['vertexCode'],this['_shaderDes'+'c']['fragmentWG'+'SL']=_0x51bdaf['fragmentCo'+'de']);}this['clearVaria'+'nts']();}get['shaderDesc'](){return this['_shaderDes'+'c'];}['copy'](_0x4ba920){return super['copy'](_0x4ba920),this['shaderDesc']=_0x4ba920['shaderDesc'],this;}['getShaderV'+'ariant'](_0x2b414b){const {objDefs:_0x38a241}=_0x2b414b,_0x2e54ac={'defines':$t['getCoreDef'+'ines'](this,_0x2b414b),'skin':(_0x38a241&nl)!==-0x59c+-0x5d7+0xb73*0x1,'useInstancing':(_0x38a241&ol)!==-0x5a3+0x2*0x6d5+-0x1*0x807,'useMorphPosition':(_0x38a241&ll)!==-0x1*-0x7d3+0x1*-0x274+-0x55f,'useMorphNormal':(_0x38a241&cl)!==-0x1044+0x1*0x125f+-0x1*0x21b,'useMorphTextureBasedInt':(_0x38a241&hl)!==0x10aa+0x1*-0xcec+-0x3be,'pass':_0x2b414b['pass'],'gamma':_0x2b414b['cameraShad'+'erParams']['shaderOutp'+'utGamma'],'toneMapping':_0x2b414b['cameraShad'+'erParams']['toneMappin'+'g'],'fog':_0x2b414b['cameraShad'+'erParams']['fog'],'shaderDesc':this['shaderDesc'],'shaderChunks':this['shaderChun'+'ks']},_0xe7fd10=new Ad(_0x2b414b['viewUnifor'+'mFormat'],_0x2b414b['viewBindGr'+'oupFormat'],_0x2b414b['vertexForm'+'at']),_0x195154=Hn(_0x2b414b['device']);return _0x195154['register']('shader-mat'+'erial',MA),_0x195154['getProgram']('shader-mat'+'erial',_0x2e54ac,_0xe7fd10,this['userId']);}}const Iv=(_0x29e8ad,_0x29268c)=>{const _0x4b2ef1=_0x29268c['length']/(-0x137b+0x2d7*-0x3+-0x65*-0x47),_0x21b7fe=_0x29e8ad['length']/(0x27f+-0x297+0x1b),_0x4fa606=new D(),_0x34069a=new D(),_0x2418c7=new D(),_0x575a4=new D(),_0x5ca168=new D(),_0x3fcde8=new D(),_0x77637a=[];for(let _0x56a728=-0xfc0+-0x245*-0x1+0xd7b;_0x56a728<_0x29e8ad['length'];_0x56a728++)_0x77637a[_0x56a728]=-0x1*-0x1225+0xd77+-0x77*0x44;for(let _0x140103=0x1*0x2f0+-0x1113+0xe23;_0x140103<_0x4b2ef1;_0x140103++){const _0x14c3e6=_0x29268c[_0x140103*(0xb2*-0x34+-0x67*0x16+-0x5*-0x901)],_0x225dc=_0x29268c[_0x140103*(0x731+0x142b+-0x1b59)+(-0x2363+0x9*0x43+-0x2109*-0x1)],_0x13137b=_0x29268c[_0x140103*(-0x2497*-0x1+0x207b+-0x450f)+(0x1*0x26f6+0x5f9+0x7*-0x66b)];_0x4fa606['set'](_0x29e8ad[_0x14c3e6*(0x7*-0x19c+-0x646*-0x6+0x1*-0x1a5d)],_0x29e8ad[_0x14c3e6*(-0x353+-0x213e+0x2494)+(0x13f7+-0x3*0x6f+-0x12a9)],_0x29e8ad[_0x14c3e6*(-0x1656+-0xff6*0x2+0x1*0x3645)+(0x905+0x1ce8+0x25eb*-0x1)]),_0x34069a['set'](_0x29e8ad[_0x225dc*(-0xa5a+0x10d6*-0x1+0x1b33)],_0x29e8ad[_0x225dc*(-0x49e+0x4*0x855+0x1f*-0xed)+(0x7*0x52a+0xb2d+-0x2f52)],_0x29e8ad[_0x225dc*(0x179*-0x18+-0x18b0+0x329*0x13)+(0x23fe+-0x1907+-0x3a7*0x3)]),_0x2418c7['set'](_0x29e8ad[_0x13137b*(0x595*0x1+-0x1f4a+-0x8*-0x337)],_0x29e8ad[_0x13137b*(-0xf88+0xbb0+0x3*0x149)+(0x110f+0x427*-0x2+-0x46*0x20)],_0x29e8ad[_0x13137b*(0x199c*0x1+-0x92a+-0x106f)+(-0x1*0x2689+0x1b54+0x57*0x21)]),_0x575a4['sub2'](_0x34069a,_0x4fa606),_0x5ca168['sub2'](_0x2418c7,_0x4fa606),_0x3fcde8['cross'](_0x575a4,_0x5ca168)['normalize'](),_0x77637a[_0x14c3e6*(-0x45*-0x3b+-0x5*0x13a+-0x9c2)]+=_0x3fcde8['x'],_0x77637a[_0x14c3e6*(-0x2e7*0x1+0x3b3*-0x7+-0x1*-0x1ccf)+(0x4a8+-0x1*0x1951+0x2e*0x73)]+=_0x3fcde8['y'],_0x77637a[_0x14c3e6*(0xb*0x197+0x2536+-0x36b0)+(0x1de*0x14+0x3*0x229+-0xe9b*0x3)]+=_0x3fcde8['z'],_0x77637a[_0x225dc*(-0x16d5+0x1920+-0x248)]+=_0x3fcde8['x'],_0x77637a[_0x225dc*(-0xdb+0x32*-0x25+-0x7*-0x128)+(0x7c+0x7fd+-0x1*0x878)]+=_0x3fcde8['y'],_0x77637a[_0x225dc*(-0x2*-0x5cd+-0x259b*-0x1+-0x3*0x1066)+(-0x173a+0x172a+-0x3*-0x6)]+=_0x3fcde8['z'],_0x77637a[_0x13137b*(0x258a*-0x1+0x1*0x115b+-0x37*-0x5e)]+=_0x3fcde8['x'],_0x77637a[_0x13137b*(-0x1*-0x1bbc+0x527+-0x20e0)+(-0x1256+-0xbdb*-0x1+-0x67c*-0x1)]+=_0x3fcde8['y'],_0x77637a[_0x13137b*(0x21*-0x4+-0x1*0x4d6+0x55d)+(-0x291+0x16*-0x3b+0x7a5)]+=_0x3fcde8['z'];}for(let _0x3d17e0=-0x19fc+0x24ad+-0xab1;_0x3d17e0<_0x21b7fe;_0x3d17e0++){const _0x5aa4f7=_0x77637a[_0x3d17e0*(-0x1829*-0x1+0x1*-0xb5+-0x1771)],_0x492b61=_0x77637a[_0x3d17e0*(0x1*-0x10c7+0x1*0x9f7+-0x6d3*-0x1)+(0x3*-0x56+-0x118+0x21b)],_0x541b48=_0x77637a[_0x3d17e0*(0x15*-0xd5+-0xe1e+0x2*0xfcd)+(-0x244c+0x1db7+0x697)],_0x5a51fe=(-0x1174+0xd3c*0x1+-0x1*-0x439)/Math['sqrt'](_0x5aa4f7*_0x5aa4f7+_0x492b61*_0x492b61+_0x541b48*_0x541b48);_0x77637a[_0x3d17e0*(0x11e8+0x12d2+0xc3d*-0x3)]*=_0x5a51fe,_0x77637a[_0x3d17e0*(0x3*-0x1cd+0x1*-0x541+0xaab)+(0x146a+-0x19ee+0x1d7*0x3)]*=_0x5a51fe,_0x77637a[_0x3d17e0*(0x44*0x2a+0x1f69+-0x2a8e)+(0x1efb*-0x1+-0x1195+0x3092)]*=_0x5a51fe;}return _0x77637a;},Mr=(_0x3bb3e1,_0x4a9155,_0x742f0d,_0x35643a)=>{const _0x4592d2=_0x35643a['length']/(0x1da0+0x1c*0x108+-0x3a7d),_0x39c4c1=_0x3bb3e1['length']/(0x1828+-0x241b+0x1*0xbf6),_0x559212=new D(),_0x50059d=new D(),_0x59cd71=new D(),_0x5c6a20=new J(),_0x5afe10=new J(),_0xfba2a=new J(),_0x381f16=new D(),_0xc833ce=new D(),_0x4af349=new Float32Array(_0x39c4c1*(0x21c3+-0x2195+-0x1*0x2b)),_0x5d8ce5=new Float32Array(_0x39c4c1*(0x1*-0x192a+0xc4*0x17+-0x791*-0x1)),_0x116f06=[];for(let _0x30e049=-0x18b*0x7+0x1d8*-0x10+-0x39*-0xb5;_0x30e049<_0x4592d2;_0x30e049++){const _0x4fb72=_0x35643a[_0x30e049*(-0x2*-0xffd+-0x170+0x1e87*-0x1)],_0x580d18=_0x35643a[_0x30e049*(-0x140*0x12+-0x18f0+-0xfd1*-0x3)+(0xd6*-0x23+0xed*-0x23+0x3daa)],_0x4450db=_0x35643a[_0x30e049*(0xdb6+-0x907*-0x3+-0x488*0x9)+(0x2153+0x17f1*-0x1+-0x1*0x960)];_0x559212['set'](_0x3bb3e1[_0x4fb72*(0x129*-0x1d+-0xd6*0x6+0x26ac)],_0x3bb3e1[_0x4fb72*(0x2*0x44e+-0x7*0x3d+-0x6ee)+(-0x56d+-0x7a*0x8+-0xe*-0xa9)],_0x3bb3e1[_0x4fb72*(-0x1*0x1bcb+0x57b+0x1*0x1653)+(0x47*-0x3d+0x21ba+-0xfd*0x11)]),_0x50059d['set'](_0x3bb3e1[_0x580d18*(0x8d*-0x11+-0x2*-0x862+-0x764)],_0x3bb3e1[_0x580d18*(0x1f18+0x376+-0x228b)+(0x11e1+-0x1b*-0x10b+-0x2e09)],_0x3bb3e1[_0x580d18*(-0xfbe+-0x705*0x2+0x1dcb*0x1)+(0x140b+0x148f+0x2*-0x144c)]),_0x59cd71['set'](_0x3bb3e1[_0x4450db*(0x1eb0+-0xe*-0x33+-0x2177)],_0x3bb3e1[_0x4450db*(-0x2*0x11bd+0x239c*-0x1+-0x3*-0x17b3)+(0xa64+-0x1e*0x4f+-0x121)],_0x3bb3e1[_0x4450db*(0xbf2+-0x299+0xef*-0xa)+(-0xcf5+0x6b*-0x1f+-0x7*-0x3b4)]),_0x5c6a20['set'](_0x742f0d[_0x4fb72*(0x855+-0x21d9*0x1+0x1986)],_0x742f0d[_0x4fb72*(0xb89*-0x3+0xdd+0x10e0*0x2)+(-0x3*0x38e+0x1b32+-0x1087)]),_0x5afe10['set'](_0x742f0d[_0x580d18*(0x3*0x1b7+-0x695+0x172)],_0x742f0d[_0x580d18*(0x1b15+0x8b*0x1b+0x1*-0x29bc)+(0x23dc+0x1a32+-0x3e0d)]),_0xfba2a['set'](_0x742f0d[_0x4450db*(0x10ce+0x708+0x5*-0x4c4)],_0x742f0d[_0x4450db*(-0x5dc+-0x137c+0x195a)+(0x246f+-0x1e1c*-0x1+-0x428a)]);const _0x274083=_0x50059d['x']-_0x559212['x'],_0x30df6d=_0x59cd71['x']-_0x559212['x'],_0x4f1c58=_0x50059d['y']-_0x559212['y'],_0x3e24f9=_0x59cd71['y']-_0x559212['y'],_0x39002a=_0x50059d['z']-_0x559212['z'],_0x1d6a5c=_0x59cd71['z']-_0x559212['z'],_0x148b41=_0x5afe10['x']-_0x5c6a20['x'],_0x29a32f=_0xfba2a['x']-_0x5c6a20['x'],_0x2463c7=_0x5afe10['y']-_0x5c6a20['y'],_0xd3cb34=_0xfba2a['y']-_0x5c6a20['y'],_0x530002=_0x148b41*_0xd3cb34-_0x29a32f*_0x2463c7;if(_0x530002===0x195a+-0x1*-0x6e+-0x19c8)_0x381f16['set'](0x127b+0x20e*0x3+-0x18a5,-0x221d+0x144a+0xdd4,-0x1*-0xa03+-0xa0e+0x1*0xb),_0xc833ce['set'](-0x14b5+0x2*0x859+0x404,-0x4a9*0x1+-0x3a3*-0x1+0x106*0x1,-0x1*-0x2534+0x5*-0x1b2+-0x1*0x1cba);else{const _0x50aec3=(-0x1e6b*0x1+-0x21b0+0x401c)/_0x530002;_0x381f16['set']((_0xd3cb34*_0x274083-_0x2463c7*_0x30df6d)*_0x50aec3,(_0xd3cb34*_0x4f1c58-_0x2463c7*_0x3e24f9)*_0x50aec3,(_0xd3cb34*_0x39002a-_0x2463c7*_0x1d6a5c)*_0x50aec3),_0xc833ce['set']((_0x148b41*_0x30df6d-_0x29a32f*_0x274083)*_0x50aec3,(_0x148b41*_0x3e24f9-_0x29a32f*_0x4f1c58)*_0x50aec3,(_0x148b41*_0x1d6a5c-_0x29a32f*_0x39002a)*_0x50aec3);}_0x4af349[_0x4fb72*(0x1*-0x92b+-0xff4+0x2*0xc91)+(-0x2*0x1e8+0x5c9+-0x65*0x5)]+=_0x381f16['x'],_0x4af349[_0x4fb72*(-0x1*-0x175b+-0x60c+-0xf6*0x12)+(-0x4*0x94a+-0x2*0x69d+0x3263)]+=_0x381f16['y'],_0x4af349[_0x4fb72*(0x1702+-0xea6+0x859*-0x1)+(-0x1bdd*-0x1+0x9*0x1ff+-0x17*0x1fe)]+=_0x381f16['z'],_0x4af349[_0x580d18*(-0x1a22+0x909*-0x3+0x3540)+(-0xa*0x223+0x2e5+0x1279*0x1)]+=_0x381f16['x'],_0x4af349[_0x580d18*(-0x9aa+-0x312+0xcbf)+(0xd56+0xc04+-0x2d1*0x9)]+=_0x381f16['y'],_0x4af349[_0x580d18*(-0x1eb5*0x1+0x1239+-0x1c9*-0x7)+(-0x21aa+0xad1*0x1+0x16db)]+=_0x381f16['z'],_0x4af349[_0x4450db*(0xc29*-0x2+-0x15b1+-0x2e06*-0x1)+(-0x12*0x21a+-0x51e+0x2e*0xef)]+=_0x381f16['x'],_0x4af349[_0x4450db*(-0x1*-0x2155+-0x436*0x1+0x9b4*-0x3)+(-0x11d2+-0x1*-0x14d5+-0x302)]+=_0x381f16['y'],_0x4af349[_0x4450db*(0x1b0d+-0x5a1*0x1+-0x1569)+(-0x16bb+-0x3*0x65+0xbf6*0x2)]+=_0x381f16['z'],_0x5d8ce5[_0x4fb72*(-0x115b+0xa*-0x9d+0x1780)+(0xe93+-0x5cb*-0x2+-0x1a29)]+=_0xc833ce['x'],_0x5d8ce5[_0x4fb72*(0x1549*0x1+0x11*-0xbb+-0x8db)+(0x2f6*-0x7+0x7c*0x25+0x2cf)]+=_0xc833ce['y'],_0x5d8ce5[_0x4fb72*(-0x13c9*0x1+-0x1efb+-0x32c7*-0x1)+(-0xdf1+-0x19d+-0x530*-0x3)]+=_0xc833ce['z'],_0x5d8ce5[_0x580d18*(0x5b+-0xbf2+0xb9a)+(0x304+0x8f0+-0xbf4)]+=_0xc833ce['x'],_0x5d8ce5[_0x580d18*(0x105b+0x1996+0xdfa*-0x3)+(0x1cf4+0x13bb+-0x30ae)]+=_0xc833ce['y'],_0x5d8ce5[_0x580d18*(0xb89*0x2+-0xfc2+-0x74d)+(0x64a+-0xe17+0x1*0x7cf)]+=_0xc833ce['z'],_0x5d8ce5[_0x4450db*(0xb*0x22c+0x1204*-0x2+0xc27)+(0x93b+-0x1*0x1171+0x1*0x836)]+=_0xc833ce['x'],_0x5d8ce5[_0x4450db*(-0x1b42+-0x1f*-0x122+-0x31*0x29)+(0x2051*-0x1+0xad8+0xabd*0x2)]+=_0xc833ce['y'],_0x5d8ce5[_0x4450db*(-0x699*-0x2+-0x208f+0x1360)+(0xd47+-0x22ed+0x15a8)]+=_0xc833ce['z'];}const _0x4a3b27=new D(),_0x1c61bb=new D(),_0x206262=new D(),_0x86a664=new D();for(let _0x234a24=0x113b+0x3*0x88+-0x12d3;_0x234a24<_0x39c4c1;_0x234a24++){_0x206262['set'](_0x4a9155[_0x234a24*(0x3ad*-0x3+-0x190d+-0x2417*-0x1)],_0x4a9155[_0x234a24*(-0x1*0x1772+0x375+0x1400)+(-0x2c4*-0x3+-0xfd+-0x22*0x37)],_0x4a9155[_0x234a24*(-0x5*-0x4d5+-0xd6c*0x1+-0xaba)+(0x1c32+0x2fe+-0x1f2e)]),_0x4a3b27['set'](_0x4af349[_0x234a24*(-0x1859*0x1+0x1a07*-0x1+0x3263)],_0x4af349[_0x234a24*(-0x2f2+0x2050*-0x1+0x1*0x2345)+(-0x3ec+-0x2197*0x1+0x2584)],_0x4af349[_0x234a24*(0x16*0x50+0x1*0x70d+0x1*-0xdea)+(0x50*-0xf+0x2300*-0x1+-0x2*-0x13d9)]),_0x1c61bb['set'](_0x5d8ce5[_0x234a24*(-0x1378+-0xb19+-0xf4a*-0x2)],_0x5d8ce5[_0x234a24*(0x1e74+0x4ac+0x65*-0x59)+(0x1c7d+-0x2162+0x26*0x21)],_0x5d8ce5[_0x234a24*(0xf*0x120+-0x3*-0x8+-0x10f5)+(0x1*0xd49+-0x7*0x1e7+0xa)]);const _0x4a57aa=_0x206262['dot'](_0x4a3b27);_0x86a664['copy'](_0x206262)['mulScalar'](_0x4a57aa),_0x86a664['sub2'](_0x4a3b27,_0x86a664)['normalize'](),_0x116f06[_0x234a24*(0x1821+0x11ef+0x1a*-0x19e)]=_0x86a664['x'],_0x116f06[_0x234a24*(-0x419*-0x1+-0x2*-0x130d+-0x2a2f)+(0xf67*0x1+-0x18a1+0x93b)]=_0x86a664['y'],_0x116f06[_0x234a24*(-0x1*-0xb5+-0x176f+-0x16be*-0x1)+(0x1*0xa9e+0x5e*-0x58+0x15b4)]=_0x86a664['z'],_0x86a664['cross'](_0x206262,_0x4a3b27),_0x116f06[_0x234a24*(0x2f6+0x2552+-0x2844)+(-0x55d*-0x3+0xa90+-0x1aa4)]=_0x86a664['dot'](_0x1c61bb)<0x1*0x2183+-0x3*0x6bb+-0xd52?-(0xc16+0x142b+0x60*-0x56):-0x1*-0x1f7c+0x3*-0xb65+-0x1*-0x2b4;}return _0x116f06;};class Ta{constructor(){h(this,'positions'),h(this,'normals'),h(this,'colors'),h(this,'uvs'),h(this,'uvs1'),h(this,'blendIndic'+'es'),h(this,'blendWeigh'+'ts'),h(this,'tangents'),h(this,'indices');}['calculateN'+'ormals'](){w['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),w['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['normals']=Iv(this['positions'],this['indices']);}['calculateT'+'angents'](){w['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),w['assert'](this['normals'],'Geometry\x20m'+'ust\x20have\x20n'+'ormals\x20set'),w['assert'](this['uvs'],'Geometry\x20m'+'ust\x20have\x20u'+'vs\x20set'),w['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['tangents']=Mr(this['positions'],this['normals'],this['uvs'],this['indices']);}}const pu=(-0x4cd*0x1+0x1c52+-0x1781)/(0x4*0x3bf+0x1e8+-0x10a4),hg=-0x67*0x6+-0x1*-0x7e5+-0x57a-pu*(-0x1d*-0xa7+-0x51*0x51+0x6b8);class mu extends Ta{constructor(_0x246545={}){super();const _0x1ecb02=_0x246545['halfExtent'+'s']??new D(-0x10ab*0x1+0x3*-0x1c4+0x15f7+0.5,0x5ac+0x29c*-0x2+-0x74+0.5,-0x2179+0xf83*0x1+0x11f6+0.5),_0x38f662=_0x246545['widthSegme'+'nts']??-0x3*-0x45a+-0xb*0x2b3+0x1aa*0xa,_0x4c5fb9=_0x246545['lengthSegm'+'ents']??-0x1a05+0x1879*0x1+0x18d,_0x3d5ecb=_0x246545['heightSegm'+'ents']??-0x107*0x10+-0x59*0x44+0x2815,_0x5e831d=_0x246545['yOffset']??0x23d*-0xa+0x1a7d*0x1+-0x41b,_0x4cb45e=-_0x1ecb02['y']+_0x5e831d,_0x489b9b=_0x1ecb02['y']+_0x5e831d,_0x2cfa2e=[new D(-_0x1ecb02['x'],_0x4cb45e,_0x1ecb02['z']),new D(_0x1ecb02['x'],_0x4cb45e,_0x1ecb02['z']),new D(_0x1ecb02['x'],_0x489b9b,_0x1ecb02['z']),new D(-_0x1ecb02['x'],_0x489b9b,_0x1ecb02['z']),new D(_0x1ecb02['x'],_0x4cb45e,-_0x1ecb02['z']),new D(-_0x1ecb02['x'],_0x4cb45e,-_0x1ecb02['z']),new D(-_0x1ecb02['x'],_0x489b9b,-_0x1ecb02['z']),new D(_0x1ecb02['x'],_0x489b9b,-_0x1ecb02['z'])],_0x35391e=[[0x24ed*0x1+0x2694+-0x4b81,-0x1bbc+0x8*0x346+-0x18d*-0x1,-0x7*-0xef+0x41c*-0x8+0x1a5a],[-0x1*-0x230b+-0x1ed9*-0x1+-0xf8*0x44,-0x26a4+0x773*0x5+0x16a*0x1,0x2462+-0x6*-0x672+-0x4b07*0x1],[-0x753+-0xfb0+0x34a*0x7,-0x233b+0x1779+0xbc4,0x1a3d+0x75d+0x2*-0x10ca],[0x1477+0x19*0x2+-0x14a8,-0x44*-0x2c+0x198+0x4*-0x352,0xf55+-0x1f*-0x95+-0x3d*0x8c],[0x1810+-0x1573+-0xa7*0x4,0x5*-0x23b+0x8*0x1f4+-0xa3*0x7,-0x166c+-0x19fd+-0x5*-0x9af],[-0x3*0x50d+-0x5c9*-0x1+0x963,0xc7b+0x1*-0x1c69+0xfee,0x1*-0x1fed+0x28c*0x7+-0x4b5*-0x3]],_0x4cb6a3=[[0x1*0x1607+-0xc1a*-0x1+-0x2221,-0x1c5f+-0x985*-0x3+-0x1*0x30,0x1*-0x2d3+0x6b0+0x34*-0x13],[-0x2099+0xa1c+0x167d,0x4cf*-0x6+0x1424+0x8b6,-(-0x115f*-0x2+-0x156*0xf+-0xeb3)],[-0x79*-0x3b+-0x1615*-0x1+-0x31f8,-0x34+-0x10b6+0x10eb,-0x1190+0xa5e+-0x3*-0x266],[0x18b4+-0x2301+0xa4d,-(0x9e3*0x3+0xb*0xaa+-0x24f6*0x1),0x10e7+-0xf04+-0x1e3],[-0x3*0x18a+-0x1*-0x24f5+-0x2056,-0xaf*0x1d+0x1aee+-0x71b,0xb9b*0x3+-0xba*-0x18+0x27*-0x157],[-(0x222c+0x1*0x2047+-0x4272),-0x12b+0x2*0x2f9+-0x4c7,0xc*-0xf+0xf*-0x227+0x20fd]],_0x6bc080={'FRONT':0x0,'BACK':0x1,'TOP':0x2,'BOTTOM':0x3,'RIGHT':0x4,'LEFT':0x5},_0x5a0f9a=[],_0x55acda=[],_0x3a4ba7=[],_0x396ddc=[];let _0x5374a9=-0xf9*0x9+0x10e0+-0x81f;const _0x23d067=(_0x4b82e1,_0x887a63,_0x29a989)=>{const _0x4e2adb=new D(),_0x364986=new D(),_0x3bd705=new D(),_0x560730=new D();for(let _0x52ad1a=-0x6c7+0x1ac2+-0x13fb;_0x52ad1a<=_0x887a63;_0x52ad1a++)for(let _0x1faf01=0x2029+0xe2*0x20+-0x3c69*0x1;_0x1faf01<=_0x29a989;_0x1faf01++){_0x4e2adb['lerp'](_0x2cfa2e[_0x35391e[_0x4b82e1][-0x83a+0x2*-0x118d+-0x15aa*-0x2]],_0x2cfa2e[_0x35391e[_0x4b82e1][0x19f2+0x1*-0xc31+-0xdc0]],_0x52ad1a/_0x887a63),_0x364986['lerp'](_0x2cfa2e[_0x35391e[_0x4b82e1][0x6*-0x12c+0xf4*-0x7+0xdb4]],_0x2cfa2e[_0x35391e[_0x4b82e1][0x2199+0x1c02+-0x3d99]],_0x1faf01/_0x29a989),_0x3bd705['sub2'](_0x364986,_0x2cfa2e[_0x35391e[_0x4b82e1][-0x9*0x433+0xbf6+0x19d5]]),_0x560730['add2'](_0x4e2adb,_0x3bd705);let _0x5e2924=_0x52ad1a/_0x887a63,_0x194aee=_0x1faf01/_0x29a989;_0x5a0f9a['push'](_0x560730['x'],_0x560730['y'],_0x560730['z']),_0x55acda['push'](_0x4cb6a3[_0x4b82e1][0x1*-0x251+-0x2c2*-0x7+-0x1*0x10fd],_0x4cb6a3[_0x4b82e1][-0x1*-0xad+-0xd4c+0x194*0x8],_0x4cb6a3[_0x4b82e1][0x1605*-0x1+-0xa4+-0x7*-0x33d]),_0x3a4ba7['push'](_0x5e2924,-0x175b*0x1+-0xdf*0x29+0x3b13-_0x194aee),_0x5e2924=_0x5e2924*hg+pu,_0x194aee=_0x194aee*hg+pu,_0x5e2924/=0x17ea+-0x3*-0xc2e+0x3c71*-0x1,_0x194aee/=-0x1b*0xdb+-0x1063*-0x2+0x4d5*-0x2,_0x5e2924+=_0x4b82e1%(-0x7*0x2aa+-0x1202+0x24ab)/(0x2593*0x1+-0x1*0x1c55+0x1*-0x93b),_0x194aee+=Math['floor'](_0x4b82e1/(0x403*-0x4+-0x5*-0x12e+0x9*0x121))/(0x1*0x13e7+0x1*0x19ab+-0x2d8f),_0x52ad1a<_0x887a63&&_0x1faf01<_0x29a989&&(_0x396ddc['push'](_0x5374a9+_0x29a989+(0x291*-0xf+0x1fe9+0x697),_0x5374a9+(0xb8a*0x1+-0xd53+-0xe5*-0x2),_0x5374a9),_0x396ddc['push'](_0x5374a9+_0x29a989+(0x12f2+-0x13a4+0xb3),_0x5374a9+_0x29a989+(0x2634+-0xb75+-0x1abd),_0x5374a9+(0x745*0x5+-0xa*0x24b+-0x22*0x65))),_0x5374a9++;}};_0x23d067(_0x6bc080['FRONT'],_0x38f662,_0x3d5ecb),_0x23d067(_0x6bc080['BACK'],_0x38f662,_0x3d5ecb),_0x23d067(_0x6bc080['TOP'],_0x38f662,_0x4c5fb9),_0x23d067(_0x6bc080['BOTTOM'],_0x38f662,_0x4c5fb9),_0x23d067(_0x6bc080['RIGHT'],_0x4c5fb9,_0x3d5ecb),_0x23d067(_0x6bc080['LEFT'],_0x4c5fb9,_0x3d5ecb),this['positions']=_0x5a0f9a,this['normals']=_0x55acda,this['uvs']=_0x3a4ba7,this['uvs1']=_0x3a4ba7,this['indices']=_0x396ddc,_0x246545['calculateT'+'angents']&&(this['tangents']=Mr(_0x5a0f9a,_0x55acda,_0x3a4ba7,_0x396ddc));}}class _m extends Ta{constructor(_0x209a00={}){super();const _0xb092c8=_0x209a00['radius']??0x89b+-0x2f*-0x57+-0x1894+0.5,_0x1a2ab9=_0x209a00['latitudeBa'+'nds']??-0x6eb+0x5a+-0x1*-0x6a1,_0x472106=_0x209a00['longitudeB'+'ands']??0x184d+-0x14a+-0x16f3,_0x2ba9cb=[],_0x29513a=[],_0x35df6d=[],_0x55e227=[];for(let _0xf12fdc=-0x25ec+-0x102a+-0x17*-0x25a;_0xf12fdc<=_0x1a2ab9;_0xf12fdc++){const _0x1744b6=_0xf12fdc*Math['PI']/_0x1a2ab9,_0x577c8c=Math['sin'](_0x1744b6),_0x27177a=Math['cos'](_0x1744b6);for(let _0x460cc5=-0x26*-0x7c+-0x2059+-0x53*-0x2b;_0x460cc5<=_0x472106;_0x460cc5++){const _0x49c267=_0x460cc5*(0x10b1+0xc81+-0x1d3*0x10)*Math['PI']/_0x472106-Math['PI']/(0x1*0x13fd+0x11d1*-0x1+-0x2*0x115),_0x2aebcc=Math['sin'](_0x49c267),_0x4d93fc=Math['cos'](_0x49c267)*_0x577c8c,_0x3b5012=_0x27177a,_0xe311f8=_0x2aebcc*_0x577c8c,_0x18a213=0xb6*-0x19+-0x2338+-0x34ff*-0x1-_0x460cc5/_0x472106,_0x5c045e=0xcec+-0x20af+-0x13c4*-0x1-_0xf12fdc/_0x1a2ab9;_0x2ba9cb['push'](_0x4d93fc*_0xb092c8,_0x3b5012*_0xb092c8,_0xe311f8*_0xb092c8),_0x29513a['push'](_0x4d93fc,_0x3b5012,_0xe311f8),_0x35df6d['push'](_0x18a213,0x82e+-0x19*-0x97+-0x16ec-_0x5c045e);}}for(let _0x545312=-0x3a+0x707*0x1+-0x1*0x6cd;_0x545312<_0x1a2ab9;++_0x545312)for(let _0x1036da=0x11*-0x112+-0xe2f+-0x9*-0x399;_0x1036da<_0x472106;++_0x1036da){const _0x365734=_0x545312*(_0x472106+(-0xda8+-0x1*-0x1ea1+-0x10f8))+_0x1036da,_0x512682=_0x365734+_0x472106+(-0x1c44+-0x3*0x781+0x208*0x19);_0x55e227['push'](_0x365734+(0x1*0x1a72+0x262c+0x7*-0x93b),_0x512682,_0x365734),_0x55e227['push'](_0x365734+(-0xc*0x19b+0x5b*0x1f+0x840),_0x512682+(0x80a+0x12ec+-0x1af5),_0x512682);}this['positions']=_0x2ba9cb,this['normals']=_0x29513a,this['uvs']=_0x35df6d,this['uvs1']=_0x35df6d,this['indices']=_0x55e227,_0x209a00['calculateT'+'angents']&&(this['tangents']=Mr(_0x2ba9cb,_0x29513a,_0x35df6d,_0x55e227));}}class DA extends _m{constructor(_0x52a7f1={}){const _0x21c448=_0x52a7f1['latitudeBa'+'nds']??-0x6*-0x493+-0x1089+-0x1*0xad9,_0x251edd=_0x52a7f1['longitudeB'+'ands']??0x12df*-0x1+-0x1d93+-0x377*-0xe;super({'radius':0.5,'latitudeBands':_0x21c448,'longitudeBands':_0x251edd});const _0x4b13b1=-0x845+0x1e20+-0x15db+0.1,_0x408565=-0x1b1d*-0x1+0x1888+-0x33a5+0.95,_0x4c1541=_0x408565*_0x408565,_0x3741cd=this['positions'];for(let _0x301f6d=-0x2*0x106c+0xcd*0x3+0x1e71;_0x301f6d<_0x3741cd['length'];_0x301f6d+=0x1fea+0x9c5+-0x29ac){const _0x1fc61d=_0x3741cd[_0x301f6d]/(0x1385+0x292*-0x8+-0x3*-0x59+0.5);let _0x425c00=_0x3741cd[_0x301f6d+(-0xeef+-0x1*-0x247d+0x265*-0x9)]/(0x1bc4+0x1994+-0xd56*0x4+0.5);const _0x5a2d8c=_0x3741cd[_0x301f6d+(-0x15e6+-0x4a0+0x1a88)]/(-0x182*-0x5+0x2*-0x335+-0x120+0.5);_0x425c00<-0x1bc3+0xe6b+0x4*0x356&&(_0x425c00*=-0x2*0x989+0x4e4+0xe2e+0.3,_0x1fc61d*_0x1fc61d+_0x5a2d8c*_0x5a2d8c<_0x4c1541&&(_0x425c00=-_0x4b13b1)),_0x425c00+=_0x4b13b1,_0x425c00*=-0x1*-0x23b7+-0x823+-0x6e5*0x4+0.5,_0x3741cd[_0x301f6d+(-0x518+0x1584+-0x106b)]=_0x425c00;}}}class zo{static['create'](_0x1d85c2,_0x1486c1){switch(_0x1486c1){case Qw:return zo['box'](_0x1d85c2);case Jw:return zo['dome'](_0x1d85c2);}return w['assert'](_0x1486c1===Bo,'Unsupporte'+'d\x20sky\x20geom'+'etry\x20type\x20'+_0x1486c1),zo['infinite'](_0x1d85c2);}static['infinite'](_0x1d976e){return Ge['fromGeomet'+'ry'](_0x1d976e,new mu(_0x1d976e));}static['box'](_0x20fbc8){return Ge['fromGeomet'+'ry'](_0x20fbc8,new mu({'yOffset':0.5}));}static['dome'](_0xfd6897){const _0x56541f=new DA({'latitudeBands':0x32,'longitudeBands':0x32});return _0x56541f['normals']=void(0x7aa*0x1+0x16bd*-0x1+0xf13),_0x56541f['uvs']=void(-0x1da2+-0x11ac*0x2+0x2*0x207d),Ge['fromGeomet'+'ry'](_0xfd6897,_0x56541f);}}class IA{constructor(_0x5391d0,_0x1daef3,_0x5b1c05,_0x22a5da,_0x4bace5){h(this,'meshInstan'+'ce',null),h(this,'_depthWrit'+'e',!(0x3*-0xaf8+0x957+0x1*0x1792));const _0x41d127=new Xn({'uniqueName':'SkyMateria'+'l','vertexGLSL':Pe['get'](_0x5391d0,Fe)['get']('skyboxVS'),'fragmentGLSL':Pe['get'](_0x5391d0,Fe)['get']('skyboxPS'),'vertexWGSL':Pe['get'](_0x5391d0,it)['get']('skyboxVS'),'fragmentWGSL':Pe['get'](_0x5391d0,it)['get']('skyboxPS'),'attributes':{'aPosition':Me}});_0x41d127['setDefine']('{SKYBOX_DE'+'CODE_FNC}',Tr['decodeFunc'](_0x22a5da['encoding'])),_0x4bace5!==Bo&&_0x41d127['setDefine']('SKYMESH',''),_0x22a5da['cubemap']&&_0x41d127['setDefine']('SKY_CUBEMA'+'P',''),_0x41d127['setParamet'+'er']('skyboxHigh'+'lightMulti'+'plier',_0x1daef3['skyboxHigh'+'lightMulti'+'plier']),_0x22a5da['cubemap']?_0x41d127['setParamet'+'er']('texture_cu'+'beMap',_0x22a5da):(_0x41d127['setParamet'+'er']('texture_en'+'vAtlas',_0x22a5da),_0x41d127['setParamet'+'er']('mipLevel',_0x1daef3['skyboxMip'])),_0x41d127['cull']=Fo,_0x41d127['depthWrite']=this['_depthWrit'+'e'];const _0x411f1e=_0x1daef3['layers']['getLayerBy'+'Id'](Kp);if(_0x411f1e){const _0x5e67cb=zo['create'](_0x5391d0,_0x4bace5),_0x25c3ae=new He(_0x5e67cb,_0x41d127,_0x5b1c05);this['meshInstan'+'ce']=_0x25c3ae,_0x25c3ae['cull']=!(0x2*0x4f+-0x2*0x5e5+0xb2d),_0x25c3ae['pick']=!(-0xe9e*0x1+0x2117*-0x1+0x2fb6),_0x411f1e['addMeshIns'+'tances']([_0x25c3ae]),this['skyLayer']=_0x411f1e;}}['destroy'](){this['meshInstan'+'ce']&&(this['skyLayer']&&this['skyLayer']['removeMesh'+'Instances']([this['meshInstan'+'ce']]),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}set['depthWrite'](_0x3271c7){this['_depthWrit'+'e']=_0x3271c7,this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']['depthWrite']=_0x3271c7);}get['depthWrite'](){return this['_depthWrit'+'e'];}}class LA{constructor(_0x5ee157){h(this,'_type',Bo),h(this,'_center',new D(0x91d+0xaa1+-0x10a*0x13,0xb0*0x2d+-0x14f6+-0x9f9,0x2*-0x135d+0xa1c+0x1c9e)),h(this,'skyMesh',null),h(this,'_depthWrit'+'e',!(-0x2098+-0x31e+0x23b7)),h(this,'node',new Ie('SkyMeshNod'+'e')),(this['device']=_0x5ee157['device'],this['scene']=_0x5ee157,this['center']=new D(-0x8*-0x2cf+0x6ae+-0x29*0xb6,-0x10f4+0xb51*-0x3+0x32e8,0x153*0x13+-0x10d8*-0x2+-0x1*0x3ad9),this['centerArra'+'y']=new Float32Array(-0xa55+-0xc55+-0x81*-0x2d),this['projectedS'+'kydomeCent'+'erId']=this['device']['scope']['resolve']('projectedS'+'kydomeCent'+'er'));}['applySetti'+'ngs'](_0x4f3fc6){this['type']=_0x4f3fc6['skyType']??Bo,this['node']['setLocalPo'+'sition'](new D(_0x4f3fc6['skyMeshPos'+'ition']??[-0x2709+-0xc37+0x3340,-0x2ef*-0xd+0xdc2+-0x33e5,0x1bbe+-0x850*0x3+-0x1*0x2ce])),this['node']['setLocalEu'+'lerAngles'](new D(_0x4f3fc6['skyMeshRot'+'ation']??[-0x602+-0x1a97+0x1*0x2099,0x1f64+0xaaf+-0x2a13*0x1,-0x1d4e+-0x382*-0x7+-0x26*-0x20])),this['node']['setLocalSc'+'ale'](new D(_0x4f3fc6['skyMeshSca'+'le']??[0x1*0x11a7+0x1e42+-0x2fe8,0xd*-0xa2+-0xb83+0x13be,-0x17a5+-0x4*0x772+0x7*0x7a2])),_0x4f3fc6['skyCenter']&&(this['_center']=new D(_0x4f3fc6['skyCenter']));}set['type'](_0x178300){this['_type']!==_0x178300&&(this['_type']=_0x178300,this['scene']['updateShad'+'ers']=!(0x19*0xbd+0x125*0x13+-0x2834*0x1),this['updateSkyM'+'esh']());}get['type'](){return this['_type'];}set['center'](_0x502964){this['_center']['copy'](_0x502964);}get['center'](){return this['_center'];}set['depthWrite'](_0x355cde){this['_depthWrit'+'e']!==_0x355cde&&(this['_depthWrit'+'e']=_0x355cde,this['skyMesh']&&(this['skyMesh']['depthWrite']=_0x355cde));}get['depthWrite'](){return this['_depthWrit'+'e'];}['updateSkyM'+'esh'](){const _0x5e4ee5=this['scene']['_getSkybox'+'Tex']();_0x5e4ee5&&(this['resetSkyMe'+'sh'](),this['skyMesh']=new IA(this['device'],this['scene'],this['node'],_0x5e4ee5,this['type']),this['skyMesh']['depthWrite']=this['_depthWrit'+'e'],this['scene']['fire']('set:skybox',_0x5e4ee5));}['resetSkyMe'+'sh'](){var _0x346008;(_0x346008=this['skyMesh'])==null||_0x346008['destroy'](),this['skyMesh']=null;}['update'](){if(this['type']!==Bo){const {center:_0x123fe3,centerArray:_0x3a7626}=this,_0x226ba2=new D();this['node']['getWorldTr'+'ansform']()['transformP'+'oint'](_0x123fe3,_0x226ba2),_0x3a7626[0x1e11+0x1f*-0xee+-0xb*0x1d]=_0x226ba2['x'],_0x3a7626[-0x5*-0x49e+-0xf85+-0x79*0x10]=_0x226ba2['y'],_0x3a7626[0x3c7+0x2d+0x1*-0x3f2]=_0x226ba2['z'],this['projectedS'+'kydomeCent'+'erId']['setValue'](_0x3a7626);}}}const Ch=new Ie();Ch['worldTrans'+'form']=te['IDENTITY'],Ch['_dirtyWorl'+'d']=Ch['_dirtyNorm'+'al']=!(-0x1445*-0x1+-0x2*-0xe04+0x1826*-0x2);class RA{constructor(_0x5c2104,_0x32c654,_0x5f3a25){this['material']=_0x32c654,this['layer']=_0x5f3a25,this['positions']=[],this['colors']=[],this['mesh']=new Ge(_0x5c2104),this['meshInstan'+'ce']=null;}['addLines'](_0x2927ae,_0x465e20){const _0x10ee4d=this['positions'],_0x377402=_0x2927ae['length'];for(let _0x245e7b=-0x2*-0x35b+0x2*-0x60a+0x55e;_0x245e7b<_0x377402;_0x245e7b++){const _0x4e73a5=_0x2927ae[_0x245e7b];_0x10ee4d['push'](_0x4e73a5['x'],_0x4e73a5['y'],_0x4e73a5['z']);}const _0x1fb1b7=this['colors'];if(_0x465e20['length'])for(let _0x559867=0x8*-0x274+-0xd*0x170+0x4*0x994;_0x559867<_0x377402;_0x559867++){const _0x265720=_0x465e20[_0x559867];_0x1fb1b7['push'](_0x265720['r'],_0x265720['g'],_0x265720['b'],_0x265720['a']);}else{for(let _0x295ce1=0x1*0x705+0x134b+-0x1a50*0x1;_0x295ce1<_0x377402;_0x295ce1++)_0x1fb1b7['push'](_0x465e20['r'],_0x465e20['g'],_0x465e20['b'],_0x465e20['a']);}}['addLinesAr'+'rays'](_0x57ad6d,_0x153cb9){const _0x3dd73c=this['positions'];for(let _0x1018cc=-0x1e3b*-0x1+0x12f4*0x1+-0x9*0x577;_0x1018cc<_0x57ad6d['length'];_0x1018cc+=0x22*0x43+0x2e1+-0x3*0x3ec)_0x3dd73c['push'](_0x57ad6d[_0x1018cc],_0x57ad6d[_0x1018cc+(-0x26ac+0x3ac+0x67*0x57)],_0x57ad6d[_0x1018cc+(0x1*0x8da+0x3a3+-0xc7b)]);const _0x5e6c1d=this['colors'];if(_0x153cb9['length']){for(let _0x528912=0x1362+-0x9b1+-0x3*0x33b;_0x528912<_0x153cb9['length'];_0x528912+=0x2*0x12fd+-0x169e+0x1*-0xf58)_0x5e6c1d['push'](_0x153cb9[_0x528912],_0x153cb9[_0x528912+(-0x15e2+-0x25cd*-0x1+0x6*-0x2a7)],_0x153cb9[_0x528912+(0x1145*0x2+0x1a0+-0x2428)],_0x153cb9[_0x528912+(-0xfc4+-0xebd+0x1e84)]);}else{const _0x4e3652=_0x57ad6d['length']/(0x202*-0x1+-0x5*0x3df+0x1560);for(let _0x3420e1=0xb07*0x2+0x806*0x2+-0x261a;_0x3420e1<_0x4e3652;_0x3420e1++)_0x5e6c1d['push'](_0x153cb9['r'],_0x153cb9['g'],_0x153cb9['b'],_0x153cb9['a']);}}['onPreRende'+'r'](_0x16ec8c,_0x239f62){this['positions']['length']>-0x1cf+-0x8*0x3c0+0x1*0x1fcf&&this['material']['transparen'+'t']===_0x239f62&&(this['mesh']['setPositio'+'ns'](this['positions']),this['mesh']['setColors'](this['colors']),this['mesh']['update'](hd,!(0x1b7*-0x7+0xacf+0x133)),this['meshInstan'+'ce']||(this['meshInstan'+'ce']=new He(this['mesh'],this['material'],Ch)),_0x16ec8c['push'](this['meshInstan'+'ce']));}['clear'](){this['positions']['length']=-0x1c91+-0xd44+0x29d5,this['colors']['length']=0x9*-0x128+0x1*-0x13b+0x14b*0x9;}}class OA{constructor(_0x230970){this['device']=_0x230970,this['map']=new Map();}['getBatch'](_0x2e938c,_0x3c4d3d){let _0xaae9=this['map']['get'](_0x2e938c);return _0xaae9||(_0xaae9=new RA(this['device'],_0x2e938c,_0x3c4d3d),this['map']['set'](_0x2e938c,_0xaae9)),_0xaae9;}['onPreRende'+'r'](_0x2650ce,_0x4dfc23){this['map']['forEach'](_0x345daa=>{_0x345daa['onPreRende'+'r'](_0x2650ce,_0x4dfc23);});}['clear'](){this['map']['forEach'](_0x338f9a=>_0x338f9a['clear']());}}const Ts=[],Ba=new D();class FA{constructor(_0x56a69d){h(this,'shaderDesc'+'s',new Map()),(this['device']=_0x56a69d,this['quadMesh']=null,this['textureSha'+'der']=null,this['depthTextu'+'reShader']=null,this['cubeLocalP'+'os']=null,this['cubeWorldP'+'os']=null,this['batchesMap']=new Map(),this['allBatches']=new Set(),this['updatedLay'+'ers']=new Set(),this['_materialD'+'epth']=null,this['_materialN'+'oDepth']=null,this['layerMeshI'+'nstances']=new Map());}['createMate'+'rial'](_0x4935e2){const _0x32ba3f=new Xn({'uniqueName':'ImmediateL'+'ine','vertexGLSL':Pe['get'](this['device'],Fe)['get']('immediateL'+'ineVS'),'fragmentGLSL':Pe['get'](this['device'],Fe)['get']('immediateL'+'inePS'),'vertexWGSL':Pe['get'](this['device'],it)['get']('immediateL'+'ineVS'),'fragmentWGSL':Pe['get'](this['device'],it)['get']('immediateL'+'inePS'),'attributes':{'vertex_position':Me,'vertex_color':Wt}});return _0x32ba3f['blendType']=Zs,_0x32ba3f['depthTest']=_0x4935e2,_0x32ba3f['update'](),_0x32ba3f;}get['materialDe'+'pth'](){return this['_materialD'+'epth']||(this['_materialD'+'epth']=this['createMate'+'rial'](!(0x89d+0x1c65+-0x2502*0x1))),this['_materialD'+'epth'];}get['materialNo'+'Depth'](){return this['_materialN'+'oDepth']||(this['_materialN'+'oDepth']=this['createMate'+'rial'](!(-0x2403+0x2a2+-0x1*-0x2162))),this['_materialN'+'oDepth'];}['getBatch'](_0x423155,_0x1431f7){let _0x2b4485=this['batchesMap']['get'](_0x423155);_0x2b4485||(_0x2b4485=new OA(this['device']),this['batchesMap']['set'](_0x423155,_0x2b4485)),this['allBatches']['add'](_0x2b4485);const _0x365d9b=_0x1431f7?this['materialDe'+'pth']:this['materialNo'+'Depth'];return _0x2b4485['getBatch'](_0x365d9b,_0x423155);}['getShaderD'+'esc'](_0x6bf22c,_0x13ade0,_0x2d2398){return this['shaderDesc'+'s']['has'](_0x6bf22c)||this['shaderDesc'+'s']['set'](_0x6bf22c,{'uniqueName':'DebugShade'+'r:'+_0x6bf22c,'vertexGLSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20matr'+'ix_model;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ve'+'c2\x20uv0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_model\x20*\x20v'+'ec4(vertex'+'_position,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uv0\x20=\x20ve'+'rtex_posit'+'ion.xy\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20','vertexWGSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20@ver'+'tex\x20fn\x20ver'+'texMain(in'+'put:\x20Verte'+'xInput)\x20->'+'\x20VertexOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20un'+'iform.matr'+'ix_model\x20*'+'\x20vec4f(inp'+'ut.vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.uv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20+\x20vec2f'+'(0.5);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20','fragmentGLSL':_0x13ade0,'fragmentWGSL':_0x2d2398,'attributes':{'vertex_position':Me}}),this['shaderDesc'+'s']['get'](_0x6bf22c);}['getTexture'+'ShaderDesc'](_0x2fb1fe){const _0x13f7ed=Tr['decodeFunc'](_0x2fb1fe);return this['getShaderD'+'esc']('textureSha'+'der-'+_0x2fb1fe,'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20vec2\x20uv0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20colorMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20linear'+'Color\x20=\x20'+_0x13f7ed+('(texture2D'+'(colorMap,'+'\x20uv0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(linearC'+'olor),\x201);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20colorMa'+'pSampler:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20@fragment'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output:\x20Fr'+'agmentOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20sample'+'dTex\x20=\x20tex'+'tureSample'+'(colorMap,'+'\x20colorMapS'+'ampler,\x20in'+'put.uv0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'linearColo'+'r:\x20vec3f\x20='+'\x20'+_0x13f7ed+('(sampledTe'+'x);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(gammaCorr'+'ectOutput('+'linearColo'+'r),\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'));}['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](){return this['getShaderD'+'esc']('textureSha'+'derUnfilte'+'rable','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vec2\x20uv0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20highp\x20sam'+'pler2D\x20col'+'orMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'oid\x20main\x20('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'uv\x20=\x20ivec2'+'(uv0\x20*\x20tex'+'tureSize(c'+'olorMap,\x200'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'texelFetch'+'(colorMap,'+'\x20uv,\x200).xy'+'z,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<uff>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20@'+'fragment\x20f'+'n\x20fragment'+'Main(input'+'\x20:\x20Fragmen'+'tInput)\x20->'+'\x20FragmentO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'nput.uv0\x20*'+'\x20vec2f(tex'+'tureDimens'+'ions(color'+'Map,\x200)));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20fetchedCo'+'lor\x20:\x20vec4'+'f\x20=\x20textur'+'eLoad(colo'+'rMap,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(fetchedCo'+'lor.xyz,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20');}['getDepthTe'+'xtureShade'+'rDesc'](){return this['getShaderD'+'esc']('depthTextu'+'reShader','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20void\x20main'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x20getLi'+'nearScreen'+'Depth(getI'+'mageEffect'+'UV(uv0))\x20*'+'\x20camera_pa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(vec3(de'+'pth)),\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20u'+'v0:\x20vec2f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20@fragme'+'nt\x20fn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20depth'+':\x20f32\x20=\x20ge'+'tLinearScr'+'eenDepth(g'+'etImageEff'+'ectUV(inpu'+'t.uv0))\x20*\x20'+'uniform.ca'+'mera_param'+'s.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(vec3f(dep'+'th)),\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}['getQuadMes'+'h'](){return this['quadMesh']||(this['quadMesh']=new Ge(this['device']),this['quadMesh']['setPositio'+'ns']([-(-0x18*-0x11+-0x276+-0x1*-0xde+0.5),-(-0x10cf+0x1*-0x1b77+0x2c46+0.5),-0x2*-0x345+-0x1e5*-0xb+0xa3*-0x2b,-0x1a76+0x16db+0xd*0x47+0.5,-(-0x1cd*0x11+-0x4*0x989+-0x1*-0x44c1+0.5),-0x1*-0x1025+0x1fc5+0x1*-0x2fea,-(-0x18d0+-0xce1*0x2+0x1949*0x2+0.5),-0x7*-0x167+-0x1*-0xb6f+-0x550*0x4+0.5,0x78d*0x1+0x3*-0x801+0x1076,-0x2189+0x5*0x27e+0x1513+0.5,0x1cd3*-0x1+-0x7b4+0x2487+0.5,-0x53*0x6+0x1f7d+-0x1d8b*0x1]),this['quadMesh']['update'](Er)),this['quadMesh'];}['drawMesh'](_0x2ea70e,_0x800834,_0x5ad4f0,_0x206b95,_0x16eeb6){if(!_0x206b95){const _0x247ea6=this['getGraphNo'+'de'](_0x800834);_0x206b95=new He(_0x5ad4f0,_0x2ea70e,_0x247ea6);}let _0x37b978=this['layerMeshI'+'nstances']['get'](_0x16eeb6);_0x37b978||(_0x37b978=[],this['layerMeshI'+'nstances']['set'](_0x16eeb6,_0x37b978)),_0x37b978['push'](_0x206b95);}['drawWireAl'+'ignedBox'](_0x1a091e,_0x503699,_0x59e0ce,_0x579e4b,_0x4f3d96,_0x5d7fa2){if(_0x5d7fa2){const _0x652f17=(_0x410d10,_0x5b54ac,_0x172677)=>{Ba['set'](_0x410d10,_0x5b54ac,_0x172677),_0x5d7fa2['transformP'+'oint'](Ba,Ba),Ts['push'](Ba['x'],Ba['y'],Ba['z']);};_0x652f17(_0x1a091e['x'],_0x1a091e['y'],_0x1a091e['z']),_0x652f17(_0x1a091e['x'],_0x503699['y'],_0x1a091e['z']),_0x652f17(_0x1a091e['x'],_0x503699['y'],_0x1a091e['z']),_0x652f17(_0x503699['x'],_0x503699['y'],_0x1a091e['z']),_0x652f17(_0x503699['x'],_0x503699['y'],_0x1a091e['z']),_0x652f17(_0x503699['x'],_0x1a091e['y'],_0x1a091e['z']),_0x652f17(_0x503699['x'],_0x1a091e['y'],_0x1a091e['z']),_0x652f17(_0x1a091e['x'],_0x1a091e['y'],_0x1a091e['z']),_0x652f17(_0x1a091e['x'],_0x1a091e['y'],_0x503699['z']),_0x652f17(_0x1a091e['x'],_0x503699['y'],_0x503699['z']),_0x652f17(_0x1a091e['x'],_0x503699['y'],_0x503699['z']),_0x652f17(_0x503699['x'],_0x503699['y'],_0x503699['z']),_0x652f17(_0x503699['x'],_0x503699['y'],_0x503699['z']),_0x652f17(_0x503699['x'],_0x1a091e['y'],_0x503699['z']),_0x652f17(_0x503699['x'],_0x1a091e['y'],_0x503699['z']),_0x652f17(_0x1a091e['x'],_0x1a091e['y'],_0x503699['z']),_0x652f17(_0x1a091e['x'],_0x1a091e['y'],_0x1a091e['z']),_0x652f17(_0x1a091e['x'],_0x1a091e['y'],_0x503699['z']),_0x652f17(_0x1a091e['x'],_0x503699['y'],_0x1a091e['z']),_0x652f17(_0x1a091e['x'],_0x503699['y'],_0x503699['z']),_0x652f17(_0x503699['x'],_0x503699['y'],_0x1a091e['z']),_0x652f17(_0x503699['x'],_0x503699['y'],_0x503699['z']),_0x652f17(_0x503699['x'],_0x1a091e['y'],_0x1a091e['z']),_0x652f17(_0x503699['x'],_0x1a091e['y'],_0x503699['z']);}else Ts['push'](_0x1a091e['x'],_0x1a091e['y'],_0x1a091e['z'],_0x1a091e['x'],_0x503699['y'],_0x1a091e['z'],_0x1a091e['x'],_0x503699['y'],_0x1a091e['z'],_0x503699['x'],_0x503699['y'],_0x1a091e['z'],_0x503699['x'],_0x503699['y'],_0x1a091e['z'],_0x503699['x'],_0x1a091e['y'],_0x1a091e['z'],_0x503699['x'],_0x1a091e['y'],_0x1a091e['z'],_0x1a091e['x'],_0x1a091e['y'],_0x1a091e['z'],_0x1a091e['x'],_0x1a091e['y'],_0x503699['z'],_0x1a091e['x'],_0x503699['y'],_0x503699['z'],_0x1a091e['x'],_0x503699['y'],_0x503699['z'],_0x503699['x'],_0x503699['y'],_0x503699['z'],_0x503699['x'],_0x503699['y'],_0x503699['z'],_0x503699['x'],_0x1a091e['y'],_0x503699['z'],_0x503699['x'],_0x1a091e['y'],_0x503699['z'],_0x1a091e['x'],_0x1a091e['y'],_0x503699['z'],_0x1a091e['x'],_0x1a091e['y'],_0x1a091e['z'],_0x1a091e['x'],_0x1a091e['y'],_0x503699['z'],_0x1a091e['x'],_0x503699['y'],_0x1a091e['z'],_0x1a091e['x'],_0x503699['y'],_0x503699['z'],_0x503699['x'],_0x503699['y'],_0x1a091e['z'],_0x503699['x'],_0x503699['y'],_0x503699['z'],_0x503699['x'],_0x1a091e['y'],_0x1a091e['z'],_0x503699['x'],_0x1a091e['y'],_0x503699['z']);this['getBatch'](_0x4f3d96,_0x579e4b)['addLinesAr'+'rays'](Ts,_0x59e0ce),Ts['length']=-0x1*-0x258b+0x207b*0x1+-0x4606;}['drawWireSp'+'here'](_0x26e064,_0x4339b9,_0x3cc4bf,_0x918cac,_0x26a19c,_0x5aa9c8){const _0x4a1e40=(-0x2679+-0xe*-0xa+0xf9*0x27)*Math['PI']/_0x918cac;let _0xb1a0d7=-0x300+-0xa6b*0x1+-0x479*-0x3;for(let _0x45c632=-0x18f2+-0x404+0x1cf6;_0x45c632<_0x918cac;_0x45c632++){const _0x2dc4b5=Math['sin'](_0xb1a0d7),_0x54452c=Math['cos'](_0xb1a0d7);_0xb1a0d7+=_0x4a1e40;const _0x5c8ad7=Math['sin'](_0xb1a0d7),_0x48d4bc=Math['cos'](_0xb1a0d7);Ts['push'](_0x26e064['x']+_0x4339b9*_0x2dc4b5,_0x26e064['y'],_0x26e064['z']+_0x4339b9*_0x54452c),Ts['push'](_0x26e064['x']+_0x4339b9*_0x5c8ad7,_0x26e064['y'],_0x26e064['z']+_0x4339b9*_0x48d4bc),Ts['push'](_0x26e064['x']+_0x4339b9*_0x2dc4b5,_0x26e064['y']+_0x4339b9*_0x54452c,_0x26e064['z']),Ts['push'](_0x26e064['x']+_0x4339b9*_0x5c8ad7,_0x26e064['y']+_0x4339b9*_0x48d4bc,_0x26e064['z']),Ts['push'](_0x26e064['x'],_0x26e064['y']+_0x4339b9*_0x2dc4b5,_0x26e064['z']+_0x4339b9*_0x54452c),Ts['push'](_0x26e064['x'],_0x26e064['y']+_0x4339b9*_0x5c8ad7,_0x26e064['z']+_0x4339b9*_0x48d4bc);}this['getBatch'](_0x5aa9c8,_0x26a19c)['addLinesAr'+'rays'](Ts,_0x3cc4bf),Ts['length']=-0x1659+-0x1*-0xb3+0x2*0xad3;}['getGraphNo'+'de'](_0x4a3731){const _0x805721=new Ie('ImmediateD'+'ebug');return _0x805721['worldTrans'+'form']=_0x4a3731,_0x805721['_dirtyWorl'+'d']=_0x805721['_dirtyNorm'+'al']=!(0x7b7*-0x4+-0x194*0x3+0x2399),_0x805721;}['onPreRende'+'rLayer'](_0x1054df,_0x469f1b,_0xb2363b){if(this['batchesMap']['forEach']((_0x30052b,_0x4b7686)=>{_0x4b7686===_0x1054df&&_0x30052b['onPreRende'+'r'](_0x469f1b,_0xb2363b);}),!this['updatedLay'+'ers']['has'](_0x1054df)){this['updatedLay'+'ers']['add'](_0x1054df);const _0x365085=this['layerMeshI'+'nstances']['get'](_0x1054df);if(_0x365085){for(let _0x3198e2=0x1*-0x117a+-0x24ec+0x3666;_0x3198e2<_0x365085['length'];_0x3198e2++)_0x469f1b['push'](_0x365085[_0x3198e2]);_0x365085['length']=0x1*-0x8d7+-0xa80+-0x1*-0x1357;}}}['onPostRend'+'er'](){this['allBatches']['forEach'](_0x2db19b=>_0x2db19b['clear']()),this['allBatches']['clear'](),this['updatedLay'+'ers']['clear']();}}class NA{constructor(){h(this,'type',Kn),h(this,'color',new ie(-0x11*0x21a+0x2544+-0x18a,0xc01+-0x1582*0x1+-0x32b*-0x3,0x1*0x1082+-0x2*-0xff+-0x1280)),h(this,'density',0x1*-0x1961+-0x2c*-0x1f+-0x3b*-0x57),h(this,'start',-0x33f+0x2a5*-0x7+0x15c3*0x1),h(this,'end',-0x167+0x718+-0x1c9*0x1);}}class Et extends me{constructor(_0x13ac87){super(),h(this,'ambientBak'+'e',!(-0x1a77*0x1+-0x6*0x3fd+-0x3266*-0x1)),h(this,'ambientBak'+'eOcclusion'+'Brightness',-0x1fa2*-0x1+0x2521+-0x1d*0x25f),h(this,'ambientBak'+'eOcclusion'+'Contrast',0x11e7*-0x1+0x141f+0x1*-0x238),h(this,'ambientLig'+'ht',new ie(0x20ff+0x18e7+-0x39e6,-0x9a3+0xf8+0x13d*0x7,0x1a80+0xf38+-0x29b8)),h(this,'ambientLum'+'inance',-0x11c0+-0xa30+-0x2*-0xdf8),h(this,'exposure',-0x5ac+-0x3d*-0x3d+0x3*-0x2f4),h(this,'lightmapSi'+'zeMultipli'+'er',0x1*0x1311+-0xe10+-0x500),h(this,'lightmapMa'+'xResolutio'+'n',-0x19f5*0x1+0x7*-0xc3+0x2f*0xd6),h(this,'lightmapMo'+'de',jc),h(this,'lightmapFi'+'lterEnable'+'d',!(0x2*-0x13a+-0x2036+0x22ab)),h(this,'lightmapHD'+'R',!(-0x163*-0x13+0xa*-0x2ad+0x6a)),h(this,'root',null),h(this,'physicalUn'+'its',!(0x1b88*0x1+0x7*-0x51a+-0x5*-0x1a3)),h(this,'_envAtlas',null),h(this,'_skyboxCub'+'eMap',null),h(this,'_fogParams',new NA()),h(this,'forcePassT'+'hroughSpec'+'ular',!(0xe5a+-0x20f5+0x129c)),(w['assert'](_0x13ac87,'Scene\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x13ac87,this['_gravity']=new D(0x1*-0x1073+-0x2630+0x36a3*0x1,-(0xae5*-0x2+0x1*-0x1a87+0x1*0x305a+0.8000000000000007),0x110*-0x2+0x3*0x65+-0xf1*-0x1),this['_layers']=null,this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']=null,this['_skyboxInt'+'ensity']=0x1833+0x2*-0x107f+0x8cc,this['_skyboxLum'+'inance']=0x127b+-0x8f7+-0x984,this['_skyboxMip']=-0x295*0x2+0xbbb+0x691*-0x1,this['_skyboxHig'+'hlightMult'+'iplier']=0x453+-0x26+-0x42c,this['_skyboxRot'+'ationShade'+'rInclude']=!(-0x249b+-0xb10+0x2fac),this['_skyboxRot'+'ation']=new le(),this['_skyboxRot'+'ationMat3']=new _i(),this['_skyboxRot'+'ationMat4']=new te(),this['_ambientBa'+'keNumSampl'+'es']=-0x47*-0x27+0x2*-0x704+0x338,this['_ambientBa'+'keSpherePa'+'rt']=0x9e4*-0x3+-0x2649+-0x1*-0x43f5+0.4,this['_lightmapF'+'ilterRange']=0x1ca*0x10+0x26c5+0x191*-0x2b,this['_lightmapF'+'ilterSmoot'+'hness']=-0xa*0x13d+-0x891*-0x2+0x4*-0x130+0.2,this['_clustered'+'LightingEn'+'abled']=!(-0xe1e+0xba5*-0x1+0x19c3),this['_lightingP'+'arams']=new Mv(this['device']['supportsAr'+'eaLights'],this['device']['maxTexture'+'Size'],()=>{this['updateShad'+'ers']=!(-0x139*-0x5+-0x5*-0xbe+-0x9d3);}),this['_sky']=new LA(this),this['_stats']={'meshInstances':0x0,'lights':0x0,'dynamicLights':0x0,'bakedLights':0x0,'updateShadersTime':0x0},this['updateShad'+'ers']=!(0x4e1*0x1+0x40*0x8e+-0x2861),this['_shaderVer'+'sion']=-0x25a9+-0x24*0xc2+-0x7*-0x947,this['immediate']=new FA(this['device']));}get['defaultDra'+'wLayer'](){return this['layers']['getLayerBy'+'Id'](Zp);}set['ambientBak'+'eNumSample'+'s'](_0x3463da){this['_ambientBa'+'keNumSampl'+'es']=Y['clamp'](Math['floor'](_0x3463da),0x1217+0x54*0x2f+-0x10c1*0x2,-0x2225+0x2*-0x1d+0x11af*0x2);}get['ambientBak'+'eNumSample'+'s'](){return this['_ambientBa'+'keNumSampl'+'es'];}set['ambientBak'+'eSpherePar'+'t'](_0x9f78ea){this['_ambientBa'+'keSpherePa'+'rt']=Y['clamp'](_0x9f78ea,0x2701+0xdda+-0x78d*0x7+0.001,0x1d3f*0x1+-0x109f+-0xc9f);}get['ambientBak'+'eSpherePar'+'t'](){return this['_ambientBa'+'keSpherePa'+'rt'];}set['clusteredL'+'ightingEna'+'bled'](_0x243d5b){if(this['device']['isWebGPU']&&!_0x243d5b){w['warnOnce']('WebGPU\x20cur'+'rently\x20onl'+'y\x20supports'+'\x20clustered'+'\x20lighting,'+'\x20and\x20this\x20'+'cannot\x20be\x20'+'disabled.');return;}if(!this['_clustered'+'LightingEn'+'abled']&&_0x243d5b){console['error']('Turning\x20on'+'\x20disabled\x20'+'clustered\x20'+'lighting\x20i'+'s\x20not\x20curr'+'ently\x20supp'+'orted');return;}this['_clustered'+'LightingEn'+'abled']=_0x243d5b;}get['clusteredL'+'ightingEna'+'bled'](){return this['_clustered'+'LightingEn'+'abled'];}set['envAtlas'](_0xc1a1e0){_0xc1a1e0!==this['_envAtlas']&&(this['_envAtlas']=_0xc1a1e0,_0xc1a1e0&&(_0xc1a1e0['addressU']=ue,_0xc1a1e0['addressV']=ue,_0xc1a1e0['minFilter']=vt,_0xc1a1e0['magFilter']=vt,_0xc1a1e0['mipmaps']=!(-0x581*-0x2+0x89*-0x13+-0x6b*0x2)),this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_resetSkyM'+'esh']());}get['envAtlas'](){return this['_envAtlas'];}set['layers'](_0x2f1737){const _0x4749d8=this['_layers'];this['_layers']=_0x2f1737,this['fire']('set:layers',_0x4749d8,_0x2f1737);}get['layers'](){return this['_layers'];}get['sky'](){return this['_sky'];}get['lighting'](){return this['_lightingP'+'arams'];}get['fog'](){return this['_fogParams'];}set['lightmapFi'+'lterRange'](_0x4aa1fe){this['_lightmapF'+'ilterRange']=Math['max'](_0x4aa1fe,-0x22ef+0x14dd+0xe12+0.001);}get['lightmapFi'+'lterRange'](){return this['_lightmapF'+'ilterRange'];}set['lightmapFi'+'lterSmooth'+'ness'](_0xa2c088){this['_lightmapF'+'ilterSmoot'+'hness']=Math['max'](_0xa2c088,-0x21b8+-0x1493+0x364b+0.001);}get['lightmapFi'+'lterSmooth'+'ness'](){return this['_lightmapF'+'ilterSmoot'+'hness'];}set['prefiltere'+'dCubemaps'](_0x3f231a){_0x3f231a=_0x3f231a||[];const _0xa3d0fd=this['_prefilter'+'edCubemaps'];(_0xa3d0fd['length']!==_0x3f231a['length']||_0xa3d0fd['some']((_0x2938a9,_0xa65dba)=>_0x2938a9!==_0x3f231a[_0xa65dba]))&&(_0x3f231a['length']===0x227b+0x1e29+-0x409e&&_0x3f231a['every'](_0x49a3c4=>!!_0x49a3c4)?(this['_internalE'+'nvAtlas']=Tv['generatePr'+'efilteredA'+'tlas'](_0x3f231a,{'target':this['_internalE'+'nvAtlas']}),this['_envAtlas']=this['_internalE'+'nvAtlas']):(this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_envAtlas']=null),this['_prefilter'+'edCubemaps']=_0x3f231a['slice'](),this['_resetSkyM'+'esh']());}get['prefiltere'+'dCubemaps'](){return this['_prefilter'+'edCubemaps'];}set['skybox'](_0x26a9c1){_0x26a9c1!==this['_skyboxCub'+'eMap']&&(this['_skyboxCub'+'eMap']=_0x26a9c1,this['_resetSkyM'+'esh']());}get['skybox'](){return this['_skyboxCub'+'eMap'];}set['skyboxInte'+'nsity'](_0x5c92d2){_0x5c92d2!==this['_skyboxInt'+'ensity']&&(this['_skyboxInt'+'ensity']=_0x5c92d2,this['_resetSkyM'+'esh']());}get['skyboxInte'+'nsity'](){return this['_skyboxInt'+'ensity'];}set['skyboxLumi'+'nance'](_0xe1da74){_0xe1da74!==this['_skyboxLum'+'inance']&&(this['_skyboxLum'+'inance']=_0xe1da74,this['_resetSkyM'+'esh']());}get['skyboxLumi'+'nance'](){return this['_skyboxLum'+'inance'];}set['skyboxMip'](_0x365d73){_0x365d73!==this['_skyboxMip']&&(this['_skyboxMip']=_0x365d73,this['_resetSkyM'+'esh']());}get['skyboxMip'](){return this['_skyboxMip'];}set['skyboxHigh'+'lightMulti'+'plier'](_0xd567b4){_0xd567b4!==this['_skyboxHig'+'hlightMult'+'iplier']&&(this['_skyboxHig'+'hlightMult'+'iplier']=_0xd567b4,this['_resetSkyM'+'esh']());}get['skyboxHigh'+'lightMulti'+'plier'](){return this['_skyboxHig'+'hlightMult'+'iplier'];}set['skyboxRota'+'tion'](_0x1a56be){if(!this['_skyboxRot'+'ation']['equals'](_0x1a56be)){const _0x47fa13=_0x1a56be['equals'](le['IDENTITY']);this['_skyboxRot'+'ation']['copy'](_0x1a56be),_0x47fa13?this['_skyboxRot'+'ationMat3']['setIdentit'+'y']():(this['_skyboxRot'+'ationMat4']['setTRS'](D['ZERO'],_0x1a56be,D['ONE']),this['_skyboxRot'+'ationMat3']['invertMat4'](this['_skyboxRot'+'ationMat4'])),!this['_skyboxRot'+'ationShade'+'rInclude']&&!_0x47fa13&&(this['_skyboxRot'+'ationShade'+'rInclude']=!(-0x1*0x1c0b+0x1044+0xbc7),this['_resetSkyM'+'esh']());}}get['skyboxRota'+'tion'](){return this['_skyboxRot'+'ation'];}['destroy'](){this['_resetSkyM'+'esh'](),this['root']=null,this['off']();}['drawLine'](_0x46c489,_0x4d0f9c,_0x2bdbec=ie['WHITE'],_0x10e3dc=!(-0x331+-0x369+0x152*0x5),_0x56167e=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x56167e,_0x10e3dc)['addLines']([_0x46c489,_0x4d0f9c],[_0x2bdbec,_0x2bdbec]);}['drawLines'](_0x31028e,_0xdcf5aa,_0x48d2c9=!(-0x1*-0x35b+0x2*-0x9ed+0x107f),_0x889a9c=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x889a9c,_0x48d2c9)['addLines'](_0x31028e,_0xdcf5aa);}['drawLineAr'+'rays'](_0x60e1e6,_0x3d3022,_0x3e5730=!(-0x36*0x73+-0x5*0x543+-0x10db*-0x3),_0x3221e0=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x3221e0,_0x3e5730)['addLinesAr'+'rays'](_0x60e1e6,_0x3d3022);}['applySetti'+'ngs'](_0xe5447e){const _0x51cfa7=_0xe5447e['physics'],_0x1fb2c9=_0xe5447e['render'];this['_gravity']['set'](_0x51cfa7['gravity'][0x1*-0x5c3+0x1*-0x877+-0x1*-0xe3a],_0x51cfa7['gravity'][0x1b33+0x13d+-0x1c6f*0x1],_0x51cfa7['gravity'][0x1c6e+-0x1676+-0x5f6]),this['ambientLig'+'ht']['set'](_0x1fb2c9['global_amb'+'ient'][0x8c6*0x4+-0xbe3+-0x1735],_0x1fb2c9['global_amb'+'ient'][0x17d1+0xed*-0x1d+0x309],_0x1fb2c9['global_amb'+'ient'][-0xf50+-0x1558+0x24aa]),this['ambientLum'+'inance']=_0x1fb2c9['ambientLum'+'inance'],this['fog']['type']=_0x1fb2c9['fog'],this['fog']['color']['set'](_0x1fb2c9['fog_color'][-0x6*-0x11+-0x8b8+0x852],_0x1fb2c9['fog_color'][-0xef0+-0x1*-0x951+0x5a0],_0x1fb2c9['fog_color'][-0x1*-0x2a1+0x93*0x13+-0x362*0x4]),this['fog']['start']=_0x1fb2c9['fog_start'],this['fog']['end']=_0x1fb2c9['fog_end'],this['fog']['density']=_0x1fb2c9['fog_densit'+'y'],this['lightmapSi'+'zeMultipli'+'er']=_0x1fb2c9['lightmapSi'+'zeMultipli'+'er'],this['lightmapMa'+'xResolutio'+'n']=_0x1fb2c9['lightmapMa'+'xResolutio'+'n'],this['lightmapMo'+'de']=_0x1fb2c9['lightmapMo'+'de'],this['exposure']=_0x1fb2c9['exposure'],this['_skyboxInt'+'ensity']=_0x1fb2c9['skyboxInte'+'nsity']??-0x53a+-0x1ce3+0x31a*0xb,this['_skyboxLum'+'inance']=_0x1fb2c9['skyboxLumi'+'nance']??-0x1cf*0x26+-0x99ff+0x12cd9,this['_skyboxMip']=_0x1fb2c9['skyboxMip']??0x525+-0xcbb+-0x796*-0x1,_0x1fb2c9['skyboxRota'+'tion']&&(this['skyboxRota'+'tion']=new le()['setFromEul'+'erAngles'](_0x1fb2c9['skyboxRota'+'tion'][0x2*-0x10db+0x1*-0xfda+-0x1*-0x3190],_0x1fb2c9['skyboxRota'+'tion'][-0x7*-0x107+0x1d*0x147+-0x2c3b],_0x1fb2c9['skyboxRota'+'tion'][0x2607+0x22c3+-0x48c8])),this['sky']['applySetti'+'ngs'](_0x1fb2c9),this['clusteredL'+'ightingEna'+'bled']=_0x1fb2c9['clusteredL'+'ightingEna'+'bled']??!(0x1007+-0x1b*-0xb5+-0x231d),this['lighting']['applySetti'+'ngs'](_0x1fb2c9),['lightmapFi'+'lterEnable'+'d','lightmapFi'+'lterRange','lightmapFi'+'lterSmooth'+'ness','ambientBak'+'e','ambientBak'+'eNumSample'+'s','ambientBak'+'eSpherePar'+'t','ambientBak'+'eOcclusion'+'Brightness','ambientBak'+'eOcclusion'+'Contrast']['forEach'](_0x4b903c=>{_0x1fb2c9['hasOwnProp'+'erty'](_0x4b903c)&&(this[_0x4b903c]=_0x1fb2c9[_0x4b903c]);}),this['_resetSkyM'+'esh']();}['_getSkybox'+'Tex'](){const _0x52609e=this['_prefilter'+'edCubemaps'];return this['_skyboxMip']?_0x52609e[[-0x4ed*-0x1+0x1981+0x2*-0xf37,-0x8d1+-0x1e8f*-0x1+-0x35*0x69,0x269a+0x2132+-0x47c9,0x1*-0x761+-0x7*-0x14+0x6d9,-0x8b9*0x4+0x1*0x61+0xaa*0x34,0x12dc+-0x81*0x25+-0x1*0x31][this['_skyboxMip']]]||this['_envAtlas']||_0x52609e[-0x19*0x131+0xf53*0x2+-0xdd]||this['_skyboxCub'+'eMap']:this['_skyboxCub'+'eMap']||_0x52609e[0x1*-0x74f+-0x30f+0xa5e]||this['_envAtlas'];}['_updateSky'+'Mesh'](){this['sky']['skyMesh']||this['sky']['updateSkyM'+'esh'](),this['sky']['update']();}['_resetSkyM'+'esh'](){this['sky']['resetSkyMe'+'sh'](),this['updateShad'+'ers']=!(-0x26bc+0x1429*-0x1+0x3ae5);}['setSkybox'](_0x36cddc){_0x36cddc?(this['skybox']=_0x36cddc[-0x787+0x1c05+-0x147e]||null,_0x36cddc[-0xd68+0x1*-0x1c67+0x53a*0x8]&&!_0x36cddc[-0x3e3*0x6+-0x152+0x9*0x2bd]['cubemap']?this['envAtlas']=_0x36cddc[0x1*-0x220c+0x1706+0xb07]:this['prefiltere'+'dCubemaps']=_0x36cddc['slice'](-0x17c+-0xb8e+-0x9f*-0x15)):(this['skybox']=null,this['envAtlas']=null);}get['lightmapPi'+'xelFormat'](){return this['lightmapHD'+'R']&&this['device']['getRendera'+'bleHdrForm'+'at']()||Ne;}}h(Et,'EVENT_SETL'+'AYERS','set:layers'),h(Et,'EVENT_SETS'+'KYBOX','set:skybox'),h(Et,'EVENT_PRER'+'ENDER','prerender'),h(Et,'EVENT_POST'+'RENDER','postrender'),h(Et,'EVENT_PRER'+'ENDER_LAYE'+'R','prerender:'+'layer'),h(Et,'EVENT_POST'+'RENDER_LAY'+'ER','postrender'+':layer'),h(Et,'EVENT_PREC'+'ULL','precull'),h(Et,'EVENT_POST'+'CULL','postcull');class Lv{constructor(_0x51f206,_0x10dded,_0x3cf8e7){this['device']=_0x51f206,this['inverseBin'+'dPose']=_0x10dded,this['boneNames']=_0x3cf8e7;}}const kA=[-0x618+-0xfa2+0x15ba,-0x2*-0x4ae+-0x1454+0xaf8,-0x13dd+-0x1e2d+0x22d*0x17,0x1*0x1e1f+0x180c+0x362b*-0x1,-0x2*-0x998+0x2e3+-0x1613,0xccf+0xa1+-0x1*0xd6f,0x33*0x85+0x193e+-0x33bd,-0xc60+-0x10a7+0x3*0x9ad,0xdce+0x215a+0x2f27*-0x1,-0x3*-0xcaf+0x19*-0x67+-0x2*0xdff,-0x884+-0x41*0x21+-0x5*-0x361,0x168b+0xe*0x215+-0x33b0],UA=[-0x1df7+-0x4e*-0x39+0xc99,-0x1d49+0xa*-0x3ba+0x2147*0x2,-0x7*0x1db+0xb1d+0x1e3,-0xfa3+0x251d+-0x1578,-0x2a0*0xe+0x1bb*-0x3+0x6*0x6fe,0x182a+0xd46+-0x256f];class BA extends me{constructor(_0x5c7dee,_0x49666b){super(),this['_device']=_0x5c7dee,this['_pixelsPer'+'Unit']=_0x49666b&&_0x49666b['pixelsPerU'+'nit']!==void(-0x856+0xe*-0x5e+0xd7a)?_0x49666b['pixelsPerU'+'nit']:-0xaed+0x647*-0x5+-0x1*-0x2a51,this['_renderMod'+'e']=_0x49666b&&_0x49666b['renderMode']!==void(0x186b+-0x266e+0xd3*0x11)?_0x49666b['renderMode']:ci,this['_atlas']=_0x49666b&&_0x49666b['atlas']!==void(-0x541*0x4+0x1af*0xb+-0x9*-0x47)?_0x49666b['atlas']:null,this['_frameKeys']=_0x49666b&&_0x49666b['frameKeys']!==void(0xd1e+0x6*-0x543+-0x1274*-0x1)?_0x49666b['frameKeys']:null,this['_meshes']=[],this['_updatingP'+'roperties']=!(-0x2*0x579+-0x133+-0x5*-0x26e),this['_meshesDir'+'ty']=!(-0x79a+0x225*0x1+0x2bb*0x2),this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes']();}set['frameKeys'](_0x195aa8){this['_frameKeys']=_0x195aa8,this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x1*-0xdcf+0xe5*0x4+0xa3b):this['_createMes'+'hes']()),this['fire']('set:frameK'+'eys',_0x195aa8);}get['frameKeys'](){return this['_frameKeys'];}set['atlas'](_0x2fc812){_0x2fc812!==this['_atlas']&&(this['_atlas']&&(this['_atlas']['off']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['off']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['off']('remove:fra'+'me',this['_onFrameRe'+'moved'],this)),this['_atlas']=_0x2fc812,this['_atlas']&&this['_frameKeys']&&(this['_atlas']['on']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['on']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['on']('remove:fra'+'me',this['_onFrameRe'+'moved'],this),this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x7*0xe3+-0x146e+0x1*0xe39):this['_createMes'+'hes']()),this['fire']('set:atlas',_0x2fc812));}get['atlas'](){return this['_atlas'];}set['pixelsPerU'+'nit'](_0x5bf68c){this['_pixelsPer'+'Unit']!==_0x5bf68c&&(this['_pixelsPer'+'Unit']=_0x5bf68c,this['fire']('set:pixels'+'PerUnit',_0x5bf68c),this['_atlas']&&this['_frameKeys']&&this['renderMode']===ci&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x1*0x14b7+0x1456+0xdaf*-0x3):this['_createMes'+'hes']()));}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}set['renderMode'](_0x198a08){if(this['_renderMod'+'e']===_0x198a08)return;const _0xcc4ee6=this['_renderMod'+'e'];this['_renderMod'+'e']=_0x198a08,this['fire']('set:render'+'Mode',_0x198a08),(_0xcc4ee6===ci||_0x198a08===ci)&&this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x1e7f+0x2f*-0x31+-0xa*-0x3f3):this['_createMes'+'hes']());}get['renderMode'](){return this['_renderMod'+'e'];}get['meshes'](){return this['_meshes'];}['_createMes'+'hes'](){const _0x4f2bdc=this['_meshes']['length'];for(let _0x2138e4=-0x95*0x25+0xad0*-0x3+0x35f9*0x1;_0x2138e4<_0x4f2bdc;_0x2138e4++){const _0x5de41e=this['_meshes'][_0x2138e4];_0x5de41e&&_0x5de41e['destroy']();}const _0x4535fb=this['_frameKeys']['length'];this['_meshes']=new Array(_0x4535fb);const _0x3e2e41=this['renderMode']===Pt||this['_renderMod'+'e']===Mt?this['_create9Sl'+'iceMesh']:this['_createSim'+'pleMesh'];for(let _0x19b1dd=-0x443*-0x2+0x23dc+-0x2c62;_0x19b1dd<_0x4535fb;_0x19b1dd++){const _0x1ba3da=this['_atlas']['frames'][this['_frameKeys'][_0x19b1dd]];this['_meshes'][_0x19b1dd]=_0x1ba3da?_0x3e2e41['call'](this,_0x1ba3da):null;}this['fire']('set:meshes');}['_createSim'+'pleMesh'](_0x2168d6){const _0x581788=_0x2168d6['rect'],_0x440afe=this['_atlas']['texture']['width'],_0x21cecf=this['_atlas']['texture']['height'],_0x200f66=_0x581788['z']/this['_pixelsPer'+'Unit'],_0x53f9a=_0x581788['w']/this['_pixelsPer'+'Unit'],_0x104f42=_0x2168d6['pivot']['x'],_0x3098e4=_0x2168d6['pivot']['y'],_0x315ae7=[-_0x104f42*_0x200f66,-_0x3098e4*_0x53f9a,0xf82+0x1a*-0x1d+-0xc90,(-0x1387+0x9ec+0x3*0x334-_0x104f42)*_0x200f66,-_0x3098e4*_0x53f9a,-0x1c61+0x1b99+0xc8,(0x162+0x3bf*0x1+0x29*-0x20-_0x104f42)*_0x200f66,(-0x1*0x28d+-0x1df+-0x46d*-0x1-_0x3098e4)*_0x53f9a,-0x10b5+-0x1d66+0x2e1b,-_0x104f42*_0x200f66,(-0x2*0x50a+-0x483+-0x8*-0x1d3-_0x3098e4)*_0x53f9a,-0x88a+-0x24b*0x7+-0x1897*-0x1],_0x3576a6=_0x581788['x']/_0x440afe,_0x6165b=0x140c+-0x341+0x2*-0x865-_0x581788['y']/_0x21cecf,_0x5691e2=(_0x581788['x']+_0x581788['z'])/_0x440afe,_0x578906=-0xe2a+-0x9e6+0x1811-(_0x581788['y']+_0x581788['w'])/_0x21cecf,_0x2a55a6=[_0x3576a6,_0x6165b,_0x5691e2,_0x6165b,_0x5691e2,_0x578906,_0x3576a6,_0x578906],_0x126ab2=new Ta();return _0x126ab2['positions']=_0x315ae7,_0x126ab2['normals']=kA,_0x126ab2['uvs']=_0x2a55a6,_0x126ab2['indices']=UA,Ge['fromGeomet'+'ry'](this['_device'],_0x126ab2);}['_create9Sl'+'iceMesh'](){const _0x363fef=J['ONE'],_0x57b165=-0x4*-0x571+-0x1aa3+-0x5*-0xfa,_0x4e2d88=-0x318+-0xf52*-0x1+-0xc37,_0x15fa63=[],_0x171a05=[],_0x5a9707=[],_0x138cfd=[];let _0x34f04a=-0x1cd6+-0xfbe+0x2c94;for(let _0x2f7b21=-0xd7*0x25+-0x98f*0x4+-0x454f*-0x1;_0x2f7b21<=_0x57b165;_0x2f7b21++){const _0x35e362=_0x2f7b21===0x23e6+0xe2*-0x11+-0x4*0x539||_0x2f7b21===_0x57b165?0x59*-0x6e+0x2*-0xc88+0x3f4e:-0x1*-0x13c1+0x4*-0x747+0x95c;for(let _0x46179b=-0xe1d+-0x1*0x7ba+0x15d7;_0x46179b<=_0x4e2d88;_0x46179b++){const _0x5a67b4=-_0x363fef['x']+(-0x9*0x47+-0x26*-0xe5+-0x1f7d)*_0x363fef['x']*(_0x2f7b21<=-0x1438*0x1+0x115d+0x16e*0x2?-0xbee+0x1c2*-0x12+0x2b92:-0x211*-0x3+-0x77a+-0x37*-0x6)/_0x57b165,_0x49ebbb=0x1f7d*-0x1+0xdf*0xe+0x134b*0x1,_0x2ce6e4=-(-_0x363fef['y']+(0x452+-0x1*-0x13b3+-0x1803)*_0x363fef['y']*(_0x46179b<=0x804+0x24cf+-0x2cd2?0x9*-0x47+-0x3fb+0x67a:0x1162+0x208c+-0x31eb)/_0x4e2d88),_0x58d7b9=_0x46179b===-0x3*0x3cb+0x3*-0xa7+0xd56||_0x46179b===_0x4e2d88?0x4*-0x13+0x26b0+-0xea*0x2a:0xab*0x19+-0x1ada+-0xc8*-0xd;_0x15fa63['push'](-_0x5a67b4,_0x49ebbb,_0x2ce6e4),_0x171a05['push'](0x1816+-0x143f+-0x3d7,0x1914+-0xbe6*-0x2+0x30df*-0x1,0x7fb+0xae4+-0x12df),_0x5a9707['push'](_0x35e362,_0x58d7b9),_0x2f7b21<_0x57b165&&_0x46179b<_0x4e2d88&&(_0x138cfd['push'](_0x34f04a+_0x4e2d88+(0x791+-0x2b*-0x28+-0xe48),_0x34f04a+(-0x671*-0x4+0x1335+-0x2cf8),_0x34f04a),_0x138cfd['push'](_0x34f04a+_0x4e2d88+(-0x30a*0x5+0x1bda+-0xca7),_0x34f04a+_0x4e2d88+(0x1c6d*-0x1+0x16*-0x75+0x267d),_0x34f04a+(0x5*0x35+-0x6ae*-0x5+-0x226e))),_0x34f04a++;}}const _0x47c1df=new Ta();return _0x47c1df['positions']=_0x15fa63,_0x47c1df['normals']=_0x171a05,_0x47c1df['uvs']=_0x5a9707,_0x47c1df['indices']=_0x138cfd,Ge['fromGeomet'+'ry'](this['_device'],_0x47c1df);}['_onSetFram'+'es'](_0x45e243){this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x5*-0x233+-0x18*0x171+0x1*0x1799):this['_createMes'+'hes']();}['_onFrameCh'+'anged'](_0x43fa5a,_0x25827e){const _0x3d68c0=this['_frameKeys']['indexOf'](_0x43fa5a);_0x3d68c0<-0x29*-0x47+-0x6b*0x4+0xbf*-0xd||(_0x25827e?this['renderMode']===ci&&(this['_meshes'][_0x3d68c0]=this['_createSim'+'pleMesh'](_0x25827e)):this['_meshes'][_0x3d68c0]=null,this['fire']('set:meshes'));}['_onFrameRe'+'moved'](_0x29bf59){const _0x345d7f=this['_frameKeys']['indexOf'](_0x29bf59);_0x345d7f<0x1f3a+-0x7ac+0x4b6*-0x5||(this['_meshes'][_0x345d7f]=null,this['fire']('set:meshes'));}['startUpdat'+'e'](){this['_updatingP'+'roperties']=!(0x210b*-0x1+-0x2377+-0x6*-0xb6b),this['_meshesDir'+'ty']=!(-0x10da+0x2b*0x74+0x1*-0x2a1);}['endUpdate'](){this['_updatingP'+'roperties']=!(-0x21a0+-0x1466*-0x1+0xd3b),this['_meshesDir'+'ty']&&this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes'](),this['_meshesDir'+'ty']=!(0x1*-0x2121+0x1*0x10bd+-0x3*-0x577);}['destroy'](){for(const _0x2dc1f2 of this['_meshes'])_0x2dc1f2&&_0x2dc1f2['destroy']();this['_meshes']['length']=-0x25db+0x3df*0x2+0x1e1d;}}class zA extends me{constructor(){super(),this['_texture']=null,this['_frames']=null;}set['texture'](_0x1d6f07){this['_texture']=_0x1d6f07,this['fire']('set:textur'+'e',_0x1d6f07);}get['texture'](){return this['_texture'];}set['frames'](_0x386861){this['_frames']=_0x386861,this['fire']('set:frames',_0x386861);}get['frames'](){return this['_frames'];}['setFrame'](_0x3c38cc,_0x24f82d){let _0x11bce0=this['_frames'][_0x3c38cc];_0x11bce0?(_0x11bce0['rect']['copy'](_0x24f82d['rect']),_0x11bce0['pivot']['copy'](_0x24f82d['pivot']),_0x11bce0['border']['copy'](_0x24f82d['border'])):(_0x11bce0={'rect':_0x24f82d['rect']['clone'](),'pivot':_0x24f82d['pivot']['clone'](),'border':_0x24f82d['border']['clone']()},this['_frames'][_0x3c38cc]=_0x11bce0),this['fire']('set:frame',_0x3c38cc['toString'](),_0x11bce0);}['removeFram'+'e'](_0x48e470){const _0x555482=this['_frames'][_0x48e470];_0x555482&&(delete this['_frames'][_0x48e470],this['fire']('remove:fra'+'me',_0x48e470['toString'](),_0x555482));}['destroy'](){this['_texture']&&this['_texture']['destroy']();}}class dg{constructor(_0x466450,_0x18bc1c,_0x177486,_0x54dd66){this['time']=_0x466450,this['position']=_0x18bc1c,this['rotation']=_0x177486,this['scale']=_0x54dd66;}}class fg{constructor(){this['_name']='',this['_keys']=[];}}class ug{constructor(){h(this,'name',''),h(this,'duration',0xa*-0x39f+-0xd52+0x3188),(this['_nodes']=[],this['_nodeDict']={});}['getNode'](_0x55288d){return this['_nodeDict'][_0x55288d];}['addNode'](_0x349716){this['_nodes']['push'](_0x349716),this['_nodeDict'][_0x349716['_name']]=_0x349716;}get['nodes'](){return this['_nodes'];}}class VA{constructor(){this['_written']=!(0x1fb+-0x1e57+0x1*0x1c5d),this['_name']='',this['_keyFrames']=[],this['_quat']=new le(),this['_pos']=new D(),this['_scale']=new D(),this['_targetNod'+'e']=null;}['getTarget'](){return this['_targetNod'+'e'];}['setTarget'](_0x2f8344){this['_targetNod'+'e']=_0x2f8344;}}class Sf{constructor(_0x705a7){h(this,'looping',!(0x1acd+0x1527+-0x2ff4)),(this['_animation']=null,this['_time']=0xe95+-0x114b+0x2b6,this['_interpola'+'tedKeys']=[],this['_interpola'+'tedKeyDict']={},this['_currKeyIn'+'dices']={},this['graph']=null);const _0x55c5e7=_0x47af75=>{const _0x416b92=new VA();_0x416b92['_name']=_0x47af75['name'],this['_interpola'+'tedKeys']['push'](_0x416b92),this['_interpola'+'tedKeyDict'][_0x47af75['name']]=_0x416b92,this['_currKeyIn'+'dices'][_0x47af75['name']]=-0x7f2+0x203b+-0x1849*0x1;for(let _0xd33394=0x5d2*0x5+0x4*0x6b1+-0x1*0x37de;_0xd33394<_0x47af75['_children']['length'];_0xd33394++)_0x55c5e7(_0x47af75['_children'][_0xd33394]);};_0x55c5e7(_0x705a7);}set['animation'](_0x36b2dc){this['_animation']=_0x36b2dc,this['currentTim'+'e']=-0x49*-0x6b+-0x33*0x93+-0x1*0x13a;}get['animation'](){return this['_animation'];}set['currentTim'+'e'](_0x337ea3){this['_time']=_0x337ea3;const _0x3e1a86=this['_interpola'+'tedKeys']['length'];for(let _0x1ed044=-0xc9a+0x11*0xef+-0x345;_0x1ed044<_0x3e1a86;_0x1ed044++){const _0xb7c01f=this['_interpola'+'tedKeys'][_0x1ed044]['_name'];this['_currKeyIn'+'dices'][_0xb7c01f]=0x2*-0x121f+0x17f1+0xc4d;}this['addTime'](-0x18a1+-0x1440+0x2ce1),this['updateGrap'+'h']();}get['currentTim'+'e'](){return this['_time'];}get['numNodes'](){return this['_interpola'+'tedKeys']['length'];}['addTime'](_0x1c1668){if(this['_animation']!==null){const _0x3fd3dc=this['_animation']['_nodes'],_0x53ea34=this['_animation']['duration'];if(this['_time']===_0x53ea34&&!this['looping'])return;if(this['_time']+=_0x1c1668,this['_time']>_0x53ea34){this['_time']=this['looping']?-0x20c9*-0x1+0x26*-0xf1+0x2fd:_0x53ea34;for(let _0x10acc9=-0x668+-0x256e*0x1+0x2bd6;_0x10acc9<_0x3fd3dc['length'];_0x10acc9++){const _0x41697e=_0x3fd3dc[_0x10acc9]['_name'];this['_currKeyIn'+'dices'][_0x41697e]=-0x3*-0x3f1+0x2156*-0x1+0x1*0x1583;}}else{if(this['_time']<-0x1a75+-0x104e+0x10b*0x29){this['_time']=this['looping']?_0x53ea34:-0x169b+-0xb6a+-0xb57*-0x3;for(let _0x2e4e72=-0x1dfc+0x2be+0x1b3e;_0x2e4e72<_0x3fd3dc['length'];_0x2e4e72++){const _0x5160c8=_0x3fd3dc[_0x2e4e72],_0x423333=_0x5160c8['_name'];this['_currKeyIn'+'dices'][_0x423333]=_0x5160c8['_keys']['length']-(0x2527+0x8e6+-0x2e0b);}}}const _0x1fdd38=_0x1c1668>=-0x904+0x1502+0x2*-0x5ff?-0x1a92*-0x1+-0x241*0x3+-0x13ce:-(-0x971*0x2+0x25db+-0x12f8);for(let _0x2b350b=0xd98+0x1*-0x265d+0x18c5;_0x2b350b<_0x3fd3dc['length'];_0x2b350b++){const _0x2e5d43=_0x3fd3dc[_0x2b350b],_0x5a4d15=_0x2e5d43['_name'],_0x287014=_0x2e5d43['_keys'],_0x27e188=this['_interpola'+'tedKeyDict'][_0x5a4d15];if(_0x27e188===void(-0x1496+-0x1*0x1fb5+0x344b*0x1)){w['warn']('Unknown\x20sk'+'eleton\x20nod'+'e\x20name:\x20'+_0x5a4d15);continue;}let _0x11e5df=!(-0x275*-0x1+0x1fd9*-0x1+0x5e1*0x5);if(_0x287014['length']!==-0x1c5e*-0x1+0x1c5a+0x38b7*-0x1)for(let _0xd2151=this['_currKeyIn'+'dices'][_0x5a4d15];_0xd2151<_0x287014['length']-(0x1*0x195b+-0x1c7f+0x325)&&_0xd2151>=0xd85+-0x264c+0x18c7;_0xd2151+=_0x1fdd38){const _0x130488=_0x287014[_0xd2151],_0x5cd3d0=_0x287014[_0xd2151+(-0x134f+0xe*0x251+-0xd1e)];if(_0x130488['time']<=this['_time']&&_0x5cd3d0['time']>=this['_time']){const _0x3d7bb9=(this['_time']-_0x130488['time'])/(_0x5cd3d0['time']-_0x130488['time']);_0x27e188['_pos']['lerp'](_0x130488['position'],_0x5cd3d0['position'],_0x3d7bb9),_0x27e188['_quat']['slerp'](_0x130488['rotation'],_0x5cd3d0['rotation'],_0x3d7bb9),_0x27e188['_scale']['lerp'](_0x130488['scale'],_0x5cd3d0['scale'],_0x3d7bb9),_0x27e188['_written']=!(-0x3*-0x314+0x7b0+-0x10ec),this['_currKeyIn'+'dices'][_0x5a4d15]=_0xd2151,_0x11e5df=!(0xc7*-0xb+-0xa*-0x277+-0x1019);break;}}(_0x287014['length']===-0x373*0x1+0x1dde+-0x1a6a||!_0x11e5df&&this['_time']===-0x4bf*-0x7+0xe7*-0x16+0xd5f*-0x1&&this['looping'])&&(_0x27e188['_pos']['copy'](_0x287014[0x1ab8+-0x1f*0x49+-0x11e1]['position']),_0x27e188['_quat']['copy'](_0x287014[-0x1b0e+-0x19e4+-0xfb*-0x36]['rotation']),_0x27e188['_scale']['copy'](_0x287014[-0x25ff+-0x747+-0x1*-0x2d46]['scale']),_0x27e188['_written']=!(0x816+-0x4*0x38a+0xde*0x7));}}}['blend'](_0x13517f,_0x330181,_0x211a16){const _0x54e2e4=this['_interpola'+'tedKeys']['length'];for(let _0x21229f=-0x1*0x44d+0x115c+-0xd0f*0x1;_0x21229f<_0x54e2e4;_0x21229f++){const _0xf8e51f=_0x13517f['_interpola'+'tedKeys'][_0x21229f],_0x1888cc=_0x330181['_interpola'+'tedKeys'][_0x21229f],_0x292274=this['_interpola'+'tedKeys'][_0x21229f];_0xf8e51f['_written']&&_0x1888cc['_written']?(_0x292274['_quat']['slerp'](_0xf8e51f['_quat'],_0x330181['_interpola'+'tedKeys'][_0x21229f]['_quat'],_0x211a16),_0x292274['_pos']['lerp'](_0xf8e51f['_pos'],_0x330181['_interpola'+'tedKeys'][_0x21229f]['_pos'],_0x211a16),_0x292274['_scale']['lerp'](_0xf8e51f['_scale'],_0x1888cc['_scale'],_0x211a16),_0x292274['_written']=!(-0x17f4+0x16c7+0x12d)):_0xf8e51f['_written']?(_0x292274['_quat']['copy'](_0xf8e51f['_quat']),_0x292274['_pos']['copy'](_0xf8e51f['_pos']),_0x292274['_scale']['copy'](_0xf8e51f['_scale']),_0x292274['_written']=!(-0x161+0x1*0x12ae+-0x114d*0x1)):_0x1888cc['_written']&&(_0x292274['_quat']['copy'](_0x1888cc['_quat']),_0x292274['_pos']['copy'](_0x1888cc['_pos']),_0x292274['_scale']['copy'](_0x1888cc['_scale']),_0x292274['_written']=!(-0x9c3+0x8*-0x1d7+-0x187b*-0x1));}}['setGraph'](_0x4d02a6){if(this['graph']=_0x4d02a6,_0x4d02a6)for(let _0x331b6f=0x225f+-0x4*0x19d+-0x1beb;_0x331b6f<this['_interpola'+'tedKeys']['length'];_0x331b6f++){const _0x52df73=this['_interpola'+'tedKeys'][_0x331b6f],_0x772fcb=_0x4d02a6['findByName'](_0x52df73['_name']);this['_interpola'+'tedKeys'][_0x331b6f]['setTarget'](_0x772fcb);}else{for(let _0x2c4615=-0xd*0x2dd+0x4*-0x846+0x2f*0x17f;_0x2c4615<this['_interpola'+'tedKeys']['length'];_0x2c4615++)this['_interpola'+'tedKeys'][_0x2c4615]['setTarget'](null);}}['updateGrap'+'h'](){if(this['graph'])for(let _0x5ea500=-0x2433*-0x1+-0x15af*-0x1+-0x39e2;_0x5ea500<this['_interpola'+'tedKeys']['length'];_0x5ea500++){const _0x20dadb=this['_interpola'+'tedKeys'][_0x5ea500];if(_0x20dadb['_written']){const _0x275af9=_0x20dadb['getTarget']();_0x275af9['localPosit'+'ion']['copy'](_0x20dadb['_pos']),_0x275af9['localRotat'+'ion']['copy'](_0x20dadb['_quat']),_0x275af9['localScale']['copy'](_0x20dadb['_scale']),_0x275af9['_dirtyLoca'+'l']||_0x275af9['_dirtifyLo'+'cal'](),_0x20dadb['_written']=!(-0x2335*-0x1+-0x25*0x8e+-0xeae);}}}}const zs=(-0x1c03+-0x1b+-0x2*-0xe11)/(-0x351*-0x2+0x1b56+0x298*-0xd),si=0x1c9a+0x7aa+-0x2443-zs*(0x431+-0xb99+0x76a);class gm extends Ta{constructor(_0x8ca844,_0x2e493c,_0x19feba,_0xd4984,_0xb3d029,_0x3532c0){super();const _0x4bcc66=new D(),_0x59eda8=new D(),_0xc52588=new D(),_0x50c12d=new D(),_0x507b37=new D(),_0x196386=new D(),_0x123632=[],_0x49707a=[],_0x163fc3=[],_0x4785b1=[],_0x26fde5=[];let _0x1f72b9;if(_0x19feba>-0x18d*-0x17+-0x18a*-0x7+-0x2e71){for(let _0x21c8bf=-0x43*0x11+-0x1*-0x123+0x2*0x1a8;_0x21c8bf<=_0xd4984;_0x21c8bf++)for(let _0x1fba31=0x10*0x1fa+-0x37*-0xa1+-0x4237;_0x1fba31<=_0xb3d029;_0x1fba31++){const _0x41636c=_0x1fba31/_0xb3d029*(0x1fe9+-0x15a+-0x1*0x1e8d)*Math['PI']-Math['PI'],_0x385548=Math['sin'](_0x41636c),_0x19808a=Math['cos'](_0x41636c);_0x507b37['set'](_0x385548*_0x8ca844,-_0x19feba/(-0x1b6a+-0x1435+-0x89*-0x59),_0x19808a*_0x8ca844),_0x50c12d['set'](_0x385548*_0x2e493c,_0x19feba/(-0xd08+-0x92c+-0x2*-0xb1b),_0x19808a*_0x2e493c),_0x4bcc66['lerp'](_0x507b37,_0x50c12d,_0x21c8bf/_0xd4984),_0x59eda8['sub2'](_0x50c12d,_0x507b37)['normalize'](),_0x196386['set'](_0x19808a,0x4*-0xae+-0xbae+0xe66,-_0x385548),_0xc52588['cross'](_0x196386,_0x59eda8)['normalize'](),_0x123632['push'](_0x4bcc66['x'],_0x4bcc66['y'],_0x4bcc66['z']),_0x49707a['push'](_0xc52588['x'],_0xc52588['y'],_0xc52588['z']);let _0xd6be78=_0x1fba31/_0xb3d029,_0x613cfe=_0x21c8bf/_0xd4984;_0x163fc3['push'](_0xd6be78,-0x2210+-0x218b+0x439c-_0x613cfe);const _0x1fb2a9=_0x613cfe;if(_0x613cfe=_0xd6be78,_0xd6be78=_0x1fb2a9,_0xd6be78=_0xd6be78*si+zs,_0x613cfe=_0x613cfe*si+zs,_0xd6be78/=0x2415+-0x120b+-0x1207,_0x4785b1['push'](_0xd6be78,0x23f9+-0x3*0xcf6+0x2ea-_0x613cfe),_0x21c8bf<_0xd4984&&_0x1fba31<_0xb3d029){const _0x26ea01=_0x21c8bf*(_0xb3d029+(0x1*0x295+-0x43*-0x3+-0x35d))+_0x1fba31,_0x28ef2c=_0x21c8bf*(_0xb3d029+(0xaf4+-0x11*0x4c+-0x1*0x5e7))+(_0x1fba31+(-0x1e34+-0xd2d*-0x1+0x1108)),_0x104ecc=(_0x21c8bf+(-0x1*-0x1e43+-0xef2*0x1+-0xf50))*(_0xb3d029+(-0xbdd*0x1+0x955*0x1+0x289))+_0x1fba31,_0x52f580=(_0x21c8bf+(0x935*0x1+0x227+-0x143*0x9))*(_0xb3d029+(-0x1d*0xef+0x22b4*-0x1+0x3dc8))+(_0x1fba31+(0x54f*0x3+-0xc3*-0x14+-0x1f28));_0x26fde5['push'](_0x26ea01,_0x28ef2c,_0x104ecc),_0x26fde5['push'](_0x28ef2c,_0x52f580,_0x104ecc);}}}if(_0x3532c0){const _0x4a26f7=Math['floor'](_0xb3d029/(0x24e8+0x8*0x4a1+-0x49ee)),_0x265161=_0xb3d029,_0xc12bfe=_0x19feba/(-0x3f1+0x178f+-0x4e7*0x4);for(let _0xd1c71=0x1*-0xacd+0x113+-0xa*-0xf9;_0xd1c71<=_0x4a26f7;_0xd1c71++){const _0x2dddaa=_0xd1c71*Math['PI']*(0x268c+0x19f2+0x673*-0xa+0.5)/_0x4a26f7,_0x2f01d8=Math['sin'](_0x2dddaa),_0x4eb9ec=Math['cos'](_0x2dddaa);for(let _0x3f0923=0x1009+0x130f+-0x2318;_0x3f0923<=_0x265161;_0x3f0923++){const _0x4e9fb5=_0x3f0923*(0x677+-0xfa*0x1+0x17*-0x3d)*Math['PI']/_0x265161-Math['PI']/(0x235a+0xcf1+-0x3049),_0x363a2b=Math['sin'](_0x4e9fb5),_0x5b9a32=Math['cos'](_0x4e9fb5)*_0x2f01d8,_0x538fa4=_0x4eb9ec,_0x478144=_0x363a2b*_0x2f01d8;let _0x1dbbaa=0x2399+0x21*0xc0+-0x3c58-_0x3f0923/_0x265161,_0x38225f=0x2b3*-0x1+0x1ef1*0x1+-0x1c3d-_0xd1c71/_0x4a26f7;_0x123632['push'](_0x5b9a32*_0x2e493c,_0x538fa4*_0x2e493c+_0xc12bfe,_0x478144*_0x2e493c),_0x49707a['push'](_0x5b9a32,_0x538fa4,_0x478144),_0x163fc3['push'](_0x1dbbaa,0x23*-0x92+0x1644+-0x24d-_0x38225f),_0x1dbbaa=_0x1dbbaa*si+zs,_0x38225f=_0x38225f*si+zs,_0x1dbbaa/=-0xa3*0x31+0x2*0xe6e+-0x25a*-0x1,_0x38225f/=0x2595*0x1+0x7cd*0x1+0x73*-0x65,_0x1dbbaa+=(-0x2cc+-0x1163+0x1430)/(-0x81a+0x395+0x488),_0x4785b1['push'](_0x1dbbaa,-0x13e*0x10+-0x2573+-0x1*-0x3954-_0x38225f);}}_0x1f72b9=(_0xd4984+(-0x78*-0x48+-0xcc8+-0x14f7))*(_0xb3d029+(0x1b57+-0x1*-0x14b+0x15d*-0x15));for(let _0x2a296c=-0x5ca+0xa2b+-0x461;_0x2a296c<_0x4a26f7;++_0x2a296c)for(let _0x5666d3=-0x8c9+0xee*0x4+-0x511*-0x1;_0x5666d3<_0x265161;++_0x5666d3){const _0x188fe5=_0x2a296c*(_0x265161+(-0x526*0x3+0x4*0x420+-0x10d))+_0x5666d3,_0x1ce380=_0x188fe5+_0x265161+(0x1f75*0x1+0x92+-0x2006);_0x26fde5['push'](_0x1f72b9+_0x188fe5+(0x14d7+-0x1b68+0x1*0x692),_0x1f72b9+_0x1ce380,_0x1f72b9+_0x188fe5),_0x26fde5['push'](_0x1f72b9+_0x188fe5+(-0x23b1+0x174*-0x5+0x2af6),_0x1f72b9+_0x1ce380+(-0x19ac+0x2504+0x1*-0xb57),_0x1f72b9+_0x1ce380);}for(let _0x4ed9c0=0x1a87+-0xf1*-0xd+0x676*-0x6;_0x4ed9c0<=_0x4a26f7;_0x4ed9c0++){const _0x1a96d0=Math['PI']*(-0x9cf+-0x1*-0x216b+0x4*-0x5e7+0.5)+_0x4ed9c0*Math['PI']*(-0x1*0x98f+0x13d*-0x7+0x123a+0.5)/_0x4a26f7,_0x54c9d2=Math['sin'](_0x1a96d0),_0x2ccfe3=Math['cos'](_0x1a96d0);for(let _0x4fbc11=0x19fb+0x1c32+0x17*-0x25b;_0x4fbc11<=_0x265161;_0x4fbc11++){const _0xbcb461=_0x4fbc11*(0x46a+-0x5ed+0x185)*Math['PI']/_0x265161-Math['PI']/(-0x1*-0xfbf+0xf2e+-0x5*0x62f),_0x314f0d=Math['sin'](_0xbcb461),_0x4570d6=Math['cos'](_0xbcb461)*_0x54c9d2,_0x5841c6=_0x2ccfe3,_0x3c522b=_0x314f0d*_0x54c9d2;let _0x30826f=0x49*-0x10+0x12f6+-0xe65-_0x4fbc11/_0x265161,_0x2eda1b=-0x700+0x110a+-0xa09-_0x4ed9c0/_0x4a26f7;_0x123632['push'](_0x4570d6*_0x2e493c,_0x5841c6*_0x2e493c-_0xc12bfe,_0x3c522b*_0x2e493c),_0x49707a['push'](_0x4570d6,_0x5841c6,_0x3c522b),_0x163fc3['push'](_0x30826f,-0x1932+0x23fe+-0xacb-_0x2eda1b),_0x30826f=_0x30826f*si+zs,_0x2eda1b=_0x2eda1b*si+zs,_0x30826f/=-0x21f8+0x23eb+-0x1f0,_0x2eda1b/=0x6*0x8f+0x13*-0x18d+0x1a20,_0x30826f+=(-0x1ff*0x12+0x231*0x5+-0x4ff*-0x5)/(-0xada*0x2+-0x2335*0x1+0x38ec),_0x4785b1['push'](_0x30826f,0x3a*-0x5c+-0x17f1*0x1+0x2cca-_0x2eda1b);}}_0x1f72b9=(_0xd4984+(-0x250f+-0x1*0x7e3+-0x2cf3*-0x1))*(_0xb3d029+(-0x1972+0x306+0x166d))+(_0x265161+(-0x733*0x5+0x4*0x38b+0x15d4))*(_0x4a26f7+(-0x12*-0x1a6+0x2698+-0x3*0x16c1));for(let _0x3b56d9=-0x8*0x1b1+0x1667+-0x8df;_0x3b56d9<_0x4a26f7;++_0x3b56d9)for(let _0x50bb7e=-0x1f22+-0x18d4+0x37f6;_0x50bb7e<_0x265161;++_0x50bb7e){const _0x30f38d=_0x3b56d9*(_0x265161+(-0x232a+0xc15+0xb8b*0x2))+_0x50bb7e,_0x35a97f=_0x30f38d+_0x265161+(-0xf70+0x1f39+-0x328*0x5);_0x26fde5['push'](_0x1f72b9+_0x30f38d+(-0x18*0x13e+0xa7*0x3b+-0xc*0xb9),_0x1f72b9+_0x35a97f,_0x1f72b9+_0x30f38d),_0x26fde5['push'](_0x1f72b9+_0x30f38d+(0x10e9+-0x255+0x11f*-0xd),_0x1f72b9+_0x35a97f+(-0xc2d*-0x1+-0x52*-0xb+-0x1*0xfb2),_0x1f72b9+_0x35a97f);}}else{if(_0x1f72b9=(_0xd4984+(-0x120f+-0x2288+-0x18*-0x231))*(_0xb3d029+(0xac3+0x1*-0x13ad+0x2f9*0x3)),_0x8ca844>0x251e+0x1d77+-0x1*0x4295)for(let _0x55294a=-0x4c+0x3c1*-0x8+0x1e54;_0x55294a<_0xb3d029;_0x55294a++){const _0x2e09df=_0x55294a/_0xb3d029*(0x1353+-0xc07+-0x2*0x3a5)*Math['PI'],_0x26ced5=Math['sin'](_0x2e09df),_0x3593b8=-_0x19feba/(0x2*-0x1035+-0xf8a+0x17fb*0x2),_0x20ce71=Math['cos'](_0x2e09df);let _0x5212aa=-0x1*-0x1679+0x23c2+0x202*-0x1d-(_0x26ced5+(0x1d46+-0x2180+0x43b))/(0x261e+-0x12bf+0x135d*-0x1),_0x4941e9=(_0x20ce71+(-0xa3d*0x2+0x79*0x5+0x6*0x305))/(-0x23*0x8b+-0xe57*-0x1+0x4ac);_0x123632['push'](_0x26ced5*_0x8ca844,_0x3593b8,_0x20ce71*_0x8ca844),_0x49707a['push'](0x1d33+0x2d1*0x1+0x3*-0xaac,-(0x1f93*0x1+-0x45f+-0x1b33),0x19*0xb5+0x2*-0x11f5+0x123d),_0x163fc3['push'](_0x5212aa,0xc74+-0x1*0x841+-0x432-_0x4941e9),_0x5212aa=_0x5212aa*si+zs,_0x4941e9=_0x4941e9*si+zs,_0x5212aa/=0xa73+0xfd9+-0x1a49,_0x4941e9/=-0x24b7+-0x939*0x1+0x2df3,_0x5212aa+=(-0x1d56+-0x1eeb+0x3c42)/(0x29*0x91+-0x57*0x6+0x54b*-0x4),_0x4785b1['push'](_0x5212aa,0x42*-0x35+0x5ac+0x7ff-_0x4941e9),_0x55294a>-0x1*-0x1208+-0x2583+0x2*0x9be&&_0x26fde5['push'](_0x1f72b9,_0x1f72b9+_0x55294a,_0x1f72b9+_0x55294a-(0x1f8d*0x1+0x364+-0x22f0));}if(_0x1f72b9+=_0xb3d029,_0x2e493c>0x1*-0x25d+0x17b*-0x17+0x246a)for(let _0x5c57b3=0x1ef3+-0x3*0x86+0x6d*-0x45;_0x5c57b3<_0xb3d029;_0x5c57b3++){const _0x288b24=_0x5c57b3/_0xb3d029*(0x23e1+-0x13eb+-0x4*0x3fd)*Math['PI'],_0x2b2ea8=Math['sin'](_0x288b24),_0x35924e=_0x19feba/(0x12e2+0x1cbd+-0x2f9d),_0x38d8a2=Math['cos'](_0x288b24);let _0x382cb2=-0x1*0x65b+0xb49+-0x4ed*0x1-(_0x2b2ea8+(-0x209e+-0x15a8+0x3647))/(-0xd7*-0x2+-0xc74*0x1+0x45*0x28),_0x392c12=(_0x38d8a2+(-0x2e*-0xd9+0xa03+-0x188*0x20))/(-0x1fc3*0x1+0x25cf+-0x60a);_0x123632['push'](_0x2b2ea8*_0x2e493c,_0x35924e,_0x38d8a2*_0x2e493c),_0x49707a['push'](0x1*-0x1861+0x14*-0x35+-0x31*-0x95,0x14bf+0x14c1+-0xdd5*0x3,0xf53*0x1+0x2b7+-0x1*0x120a),_0x163fc3['push'](_0x382cb2,-0x826+0x2272*-0x1+0x2a99-_0x392c12),_0x382cb2=_0x382cb2*si+zs,_0x392c12=_0x392c12*si+zs,_0x382cb2/=-0x2*0x11bc+0x1df+0x9*0x3bc,_0x392c12/=-0x1166+-0x200f+0x3178,_0x382cb2+=(-0x23d*0x8+0xcaa+-0x3*-0x1c0)/(0x2ed*0x4+0x5*0x781+-0x3136),_0x4785b1['push'](_0x382cb2,-0x11*-0x109+-0x141b+0x283-_0x392c12),_0x5c57b3>0x295*0x1+-0x84c+0x5b8&&_0x26fde5['push'](_0x1f72b9,_0x1f72b9+_0x5c57b3-(0x2336+0x3a3+0x136c*-0x2),_0x1f72b9+_0x5c57b3);}}this['positions']=_0x123632,this['normals']=_0x49707a,this['uvs']=_0x163fc3,this['uvs1']=_0x4785b1,this['indices']=_0x26fde5;}}class GA extends gm{constructor(_0x58a1da={}){const _0x4fdd58=_0x58a1da['radius']??-0x751+0x1*-0x336+0xa87+0.3,_0x1a9a8c=_0x58a1da['height']??0x7*-0x15d+0x1795+-0xe09*0x1,_0x4deab0=_0x58a1da['heightSegm'+'ents']??0x334+-0x17f7+0x14c4*0x1,_0x1362be=_0x58a1da['sides']??0x971*0x2+0x694+-0x1962;super(_0x4fdd58,_0x4fdd58,_0x1a9a8c-(0x338+-0xb*0x24+-0x1aa)*_0x4fdd58,_0x4deab0,_0x1362be,!(-0x24ea+0x2671+-0x187)),_0x58a1da['calculateT'+'angents']&&(this['tangents']=Mr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class HA extends gm{constructor(_0x1d26d0={}){const _0x540446=_0x1d26d0['baseRadius']??-0x2579*0x1+-0x15bb+-0x3b34*-0x1+0.5,_0x4c61b3=_0x1d26d0['peakRadius']??-0xa*0x2ef+0xcdc+0x2bf*0x6,_0x2e7d9e=_0x1d26d0['height']??0x1721*-0x1+-0x2cf*0x7+0x2acb,_0x18655e=_0x1d26d0['heightSegm'+'ents']??0x20e*-0xa+-0x2*0x1192+-0xd*-0x449,_0x2ca1ae=_0x1d26d0['capSegment'+'s']??0x5*0x380+-0x52*-0x60+0x302e*-0x1;super(_0x540446,_0x4c61b3,_0x2e7d9e,_0x18655e,_0x2ca1ae,!(-0xf32*-0x2+0x123f+-0x30a2)),_0x1d26d0['calculateT'+'angents']&&(this['tangents']=Mr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class WA extends gm{constructor(_0x22b296={}){const _0x568935=_0x22b296['radius']??0x1*0x1caf+0x2*0x4c1+-0x2631+0.5,_0x4611a3=_0x22b296['height']??-0x2022+-0x1950+-0x3973*-0x1,_0x4d3d8a=_0x22b296['heightSegm'+'ents']??-0x2*0x11b5+-0x1051+-0x19e*-0x20,_0x5c2531=_0x22b296['capSegment'+'s']??-0x1*0x2ab+-0x25d5+0x2894;super(_0x568935,_0x568935,_0x4611a3,_0x4d3d8a,_0x5c2531,!(-0x3*-0xb23+-0x39*-0xd+-0x244d)),_0x22b296['calculateT'+'angents']&&(this['tangents']=Mr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class $A extends Ta{constructor(_0x5d21ca={}){super();const _0x230efa=_0x5d21ca['halfExtent'+'s']??new J(-0xb*-0x162+-0xb8+-0xe7e+0.5,-0x5fa+0x1415+-0xe1b*0x1+0.5),_0x5562f7=_0x5d21ca['widthSegme'+'nts']??0x1104+0x39*-0x97+0x10a0,_0x347899=_0x5d21ca['lengthSegm'+'ents']??-0x1f17+-0x3*-0x94b+-0x33b*-0x1,_0x15ff1=[],_0x316ee8=[],_0x16a91e=[],_0x115b22=[];let _0x1d2c83=-0x23a2+0x2*-0xe87+0x40b0;for(let _0x53cc12=0x1*-0x194a+0x9*-0x182+0x136e*0x2;_0x53cc12<=_0x5562f7;_0x53cc12++)for(let _0x5ecc2c=-0x2b*-0xaa+0x2*-0xfbb+0x2e8;_0x5ecc2c<=_0x347899;_0x5ecc2c++){const _0x2187b8=-_0x230efa['x']+(-0x1044+0xa7*-0x25+-0x5*-0x815)*_0x230efa['x']*_0x53cc12/_0x5562f7,_0x4f5e7f=0x4*-0xbc+0xa62+-0x1*0x772,_0xf992ce=-(-_0x230efa['y']+(-0x23e1+0x22c6+-0xf*-0x13)*_0x230efa['y']*_0x5ecc2c/_0x347899),_0x1f9457=_0x53cc12/_0x5562f7,_0x246d91=_0x5ecc2c/_0x347899;_0x15ff1['push'](_0x2187b8,_0x4f5e7f,_0xf992ce),_0x316ee8['push'](0x1521+0x18b7+-0x7a4*0x6,-0x26ab+0x2075+0x637*0x1,-0x1312*0x1+0x5*-0x10f+-0x21*-0xbd),_0x16a91e['push'](_0x1f9457,0x3*0xc33+0x1dca+-0x4262-_0x246d91),_0x53cc12<_0x5562f7&&_0x5ecc2c<_0x347899&&(_0x115b22['push'](_0x1d2c83+_0x347899+(-0xaef+0x11*0x40+0x2*0x358),_0x1d2c83+(-0x1321+-0x2*0x114d+0x35bc),_0x1d2c83),_0x115b22['push'](_0x1d2c83+_0x347899+(-0x469*-0x1+-0xe49*0x1+0x9e1),_0x1d2c83+_0x347899+(0x1*-0x25d1+0x13b7+0x121c),_0x1d2c83+(0x1*0x4c1+-0x69d*0x3+-0xf17*-0x1))),_0x1d2c83++;}this['positions']=_0x15ff1,this['normals']=_0x316ee8,this['uvs']=_0x16a91e,this['uvs1']=_0x16a91e,this['indices']=_0x115b22,_0x5d21ca['calculateT'+'angents']&&(this['tangents']=Mr(_0x15ff1,_0x316ee8,_0x16a91e,_0x115b22));}}class XA extends Ta{constructor(_0x31cc99={}){super();const _0x7e9bad=_0x31cc99['tubeRadius']??0x20de+0x1e69+-0x3f47*0x1+0.2,_0x143fe3=_0x31cc99['ringRadius']??0x1440+0x1230+-0x2670+0.3,_0x333f5b=(_0x31cc99['sectorAngl'+'e']??0x1*0x151f+0x1df2+-0x1*0x31a9)*Y['DEG_TO_RAD'],_0x188483=_0x31cc99['segments']??-0x1*0x614+-0x33*-0x59+0xb89*-0x1,_0xe7a914=_0x31cc99['sides']??-0x830+-0x1*-0x9f1+0x27*-0xb,_0x298e9d=[],_0x3965da=[],_0x54ee7a=[],_0x8d66f7=[];for(let _0x486b71=-0x1*-0x1c27+-0x28+0x1*-0x1bff;_0x486b71<=_0xe7a914;_0x486b71++)for(let _0x275bb5=-0x1225*-0x1+-0x125*0x2+-0xfdb;_0x275bb5<=_0x188483;_0x275bb5++){const _0x2eccff=Math['cos'](_0x333f5b*_0x275bb5/_0x188483)*(_0x143fe3+_0x7e9bad*Math['cos']((-0x8*-0x21a+-0x47*0xd+-0xd33*0x1)*Math['PI']*_0x486b71/_0xe7a914)),_0x550d7a=Math['sin']((0x17d3+0x2d1*-0x1+0xa80*-0x2)*Math['PI']*_0x486b71/_0xe7a914)*_0x7e9bad,_0x2f5b69=Math['sin'](_0x333f5b*_0x275bb5/_0x188483)*(_0x143fe3+_0x7e9bad*Math['cos']((0x4*-0xd6+-0xb88+-0x6*-0x27b)*Math['PI']*_0x486b71/_0xe7a914)),_0x331776=Math['cos'](_0x333f5b*_0x275bb5/_0x188483)*Math['cos']((0x8ca+-0x29c*0x9+-0xeb4*-0x1)*Math['PI']*_0x486b71/_0xe7a914),_0x4d3653=Math['sin']((0x24be+-0x82*-0x3a+-0x4230)*Math['PI']*_0x486b71/_0xe7a914),_0x29099d=Math['sin'](_0x333f5b*_0x275bb5/_0x188483)*Math['cos']((-0x11b+0x1d7c+0x1c5f*-0x1)*Math['PI']*_0x486b71/_0xe7a914),_0x20b477=_0x486b71/_0xe7a914,_0xf58c99=-0x204d+-0x19a5*0x1+0x39f3-_0x275bb5/_0x188483;if(_0x298e9d['push'](_0x2eccff,_0x550d7a,_0x2f5b69),_0x3965da['push'](_0x331776,_0x4d3653,_0x29099d),_0x54ee7a['push'](_0x20b477,0xac+0x681*0x1+-0x72c-_0xf58c99),_0x486b71<_0xe7a914&&_0x275bb5<_0x188483){const _0x3454fd=_0x486b71*(_0x188483+(-0xf3*-0x7+0x80*-0x33+0x12dc))+_0x275bb5,_0x1fda97=(_0x486b71+(0x2*0x59e+0x7be*-0x1+0x1*-0x37d))*(_0x188483+(-0xc8b+0xd66+-0xda))+_0x275bb5,_0x842a86=_0x486b71*(_0x188483+(-0x118d+0x1e7*-0x8+0x20c6))+(_0x275bb5+(-0x1500+-0x1e2d+0x332e)),_0x52d255=(_0x486b71+(-0x46e+-0x3*0x1aa+-0x7f*-0x13))*(_0x188483+(-0x930+0x25*0xf4+-0xf*0x1bd))+(_0x275bb5+(-0x5*-0x526+-0x1*0x2659+0xc9c));_0x8d66f7['push'](_0x3454fd,_0x1fda97,_0x842a86),_0x8d66f7['push'](_0x1fda97,_0x52d255,_0x842a86);}}this['positions']=_0x298e9d,this['normals']=_0x3965da,this['uvs']=_0x54ee7a,this['uvs1']=_0x54ee7a,this['indices']=_0x8d66f7,_0x31cc99['calculateT'+'angents']&&(this['tangents']=Mr(_0x298e9d,_0x3965da,_0x54ee7a,_0x8d66f7));}}class qA{constructor(_0x585d8c,_0x2ee782){h(this,'processedC'+'ache',new Map()),h(this,'definition'+'sCache',new Map()),h(this,'_generator'+'s',new Map()),(this['_device']=_0x585d8c,this['_isClearin'+'gCache']=!(0x54f+-0x339*-0x6+-0x18a4),this['_precached']=!(0x1*-0x1607+-0x4c*0x4a+0x160*0x20),this['_programsC'+'ollection']=[],this['_defaultSt'+'dMatOption']=new dl(),this['_defaultSt'+'dMatOption'+'Min']=new dl());const _0x44fc5e=new vv();_0x2ee782['shaderOptB'+'uilder']['updateRef'](this['_defaultSt'+'dMatOption'],{},_0x44fc5e,_0x2ee782,null,[],Aa,null),_0x2ee782['shaderOptB'+'uilder']['updateMinR'+'ef'](this['_defaultSt'+'dMatOption'+'Min'],{},_0x2ee782,null,cm,null),_0x585d8c['on']('destroy:sh'+'ader',_0x5a46cd=>{this['removeFrom'+'Cache'](_0x5a46cd);});}['destroy'](){this['clearCache']();}['register'](_0x44c9c4,_0x440406){this['_generator'+'s']['has'](_0x44c9c4)||this['_generator'+'s']['set'](_0x44c9c4,_0x440406);}['unregister'](_0x29b70b){this['_generator'+'s']['has'](_0x29b70b)&&this['_generator'+'s']['delete'](_0x29b70b);}['isRegister'+'ed'](_0x25d075){return this['_generator'+'s']['has'](_0x25d075);}['generateSh'+'aderDefini'+'tion'](_0x15f804,_0x37d83f,_0x3f2490,_0x3e5833){var _0x168562,_0x10d3f7;let _0x5c6ea4=this['definition'+'sCache']['get'](_0x3f2490);if(!_0x5c6ea4){let _0x1fba40;(_0x168562=_0x3e5833['litOptions'])!=null&&_0x168562['lights']&&(_0x1fba40=_0x3e5833['litOptions']['lights'],_0x3e5833['litOptions']['lights']=_0x1fba40['map'](_0x3b5123=>{const _0x586ad3=_0x3b5123['clone']?_0x3b5123['clone']():_0x3b5123;return _0x586ad3['key']=_0x3b5123['key'],_0x586ad3;})),this['storeNewPr'+'ogram'](_0x37d83f,_0x3e5833),(_0x10d3f7=_0x3e5833['litOptions'])!=null&&_0x10d3f7['lights']&&(_0x3e5833['litOptions']['lights']=_0x1fba40),this['_precached']&&w['log']('ProgramLib'+'rary#getPr'+'ogram:\x20Cac'+'he\x20miss\x20fo'+'r\x20shader\x20'+_0x37d83f+'\x20key\x20'+_0x3f2490+('\x20after\x20sha'+'ders\x20preca'+'ching'));const _0x21dfea=this['_device'];_0x5c6ea4=_0x15f804['createShad'+'erDefiniti'+'on'](_0x21dfea,_0x3e5833),_0x5c6ea4['name']=_0x5c6ea4['name']??(_0x3e5833['pass']?_0x37d83f+'-pass:'+_0x3e5833['pass']:_0x37d83f),this['definition'+'sCache']['set'](_0x3f2490,_0x5c6ea4);}return _0x5c6ea4;}['getCachedS'+'hader'](_0x48e283){return this['processedC'+'ache']['get'](_0x48e283);}['setCachedS'+'hader'](_0x22c75d,_0x540cf4){this['processedC'+'ache']['set'](_0x22c75d,_0x540cf4);}['getProgram'](_0x2c3a13,_0x54a0ec,_0x2cdfef,_0x2b5af4){const _0x506ef0=this['_generator'+'s']['get'](_0x2c3a13);if(!_0x506ef0)return w['warn']('ProgramLib'+'rary#getPr'+'ogram:\x20No\x20'+'program\x20li'+'brary\x20func'+'tions\x20regi'+'stered\x20for'+':\x20'+_0x2c3a13),null;const _0x391e3d=_0x506ef0['generateKe'+'y'](_0x54a0ec),_0x42a49a=hi(_0x391e3d),_0x3c19bb=_0x2cdfef['generateKe'+'y'](this['_device']),_0x3ef2cf=hi(_0x3c19bb),_0x4541ed=_0x42a49a+'#'+_0x3ef2cf;let _0x28199d=this['getCachedS'+'hader'](_0x4541ed);if(!_0x28199d){const _0x3b1d82=this['generateSh'+'aderDefini'+'tion'](_0x506ef0,_0x2c3a13,_0x42a49a,_0x54a0ec);w['assert'](_0x3b1d82);let _0x328af0='',_0x4fe268;_0x54a0ec['pass']!==void(-0x3b3*-0xa+-0xd6a+0x3ee*-0x6)&&(_0x4fe268=Si['get'](this['_device'])['getByIndex'](_0x54a0ec['pass']),_0x328af0='-'+_0x4fe268['name']),this['_device']['fire']('shader:gen'+'erate',{'userMaterialId':_0x2b5af4,'shaderPassInfo':_0x4fe268,'definition':_0x3b1d82});const _0x1961fd={'name':''+_0x3b1d82['name']+_0x328af0+'-proc','attributes':_0x3b1d82['attributes'],'vshader':_0x3b1d82['vshader'],'vincludes':_0x3b1d82['vincludes'],'fincludes':_0x3b1d82['fincludes'],'fshader':_0x3b1d82['fshader'],'processingOptions':_0x2cdfef,'shaderLanguage':_0x3b1d82['shaderLang'+'uage'],'meshUniformBufferFormat':_0x3b1d82['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x3b1d82['meshBindGr'+'oupFormat']};_0x28199d=new qy(this['_device'],_0x1961fd),w['call'](()=>{_0x28199d['_generatio'+'nKey']=_0x391e3d,_0x28199d['_processin'+'gKey']=_0x3c19bb;}),this['setCachedS'+'hader'](_0x4541ed,_0x28199d);}return _0x28199d;}['storeNewPr'+'ogram'](_0x4452c1,_0xcc1317){let _0x2fd833={};if(_0x4452c1==='standard'){const _0x5d747c=this['_getDefaul'+'tStdMatOpt'+'ions'](_0xcc1317['pass']);for(const _0x55fde8 in _0xcc1317)(_0xcc1317['hasOwnProp'+'erty'](_0x55fde8)&&_0x5d747c[_0x55fde8]!==_0xcc1317[_0x55fde8]||_0x55fde8==='pass')&&(_0x2fd833[_0x55fde8]=_0xcc1317[_0x55fde8]);for(const _0x2d3915 in _0xcc1317['litOptions'])_0x2fd833[_0x2d3915]=_0xcc1317['litOptions'][_0x2d3915];}else _0x2fd833=_0xcc1317;this['_programsC'+'ollection']['push'](JSON['stringify']({'name':_0x4452c1,'options':_0x2fd833}));}['dumpProgra'+'ms'](){let _0x321ce2='let\x20device'+'\x20=\x20pc.app\x20'+'?\x20pc.app.g'+'raphicsDev'+'ice\x20:\x20pc.A'+'pplication'+'.getApplic'+'ation().gr'+'aphicsDevi'+'ce;\x0a';_0x321ce2+='let\x20shader'+'s\x20=\x20[',this['_programsC'+'ollection'][-0x367*-0xb+-0x1*-0x1bc9+0x11*-0x3d6]&&(_0x321ce2+='\x0a\x09'+this['_programsC'+'ollection'][-0xdf6+-0x1*-0xc43+0x1b3]);for(let _0x5626e9=0x1*-0x16e6+0x4b2*-0x1+-0x3*-0x933;_0x5626e9<this['_programsC'+'ollection']['length'];++_0x5626e9)_0x321ce2+=',\x0a\x09'+this['_programsC'+'ollection'][_0x5626e9];_0x321ce2+='\x0a];\x0a',_0x321ce2+='pc.getProg'+'ramLibrary'+'(device).p'+'recompile('+'shaders);\x0a',_0x321ce2+='if\x20(pc.ver'+'sion\x20!=\x20\x22'+hn+('\x22\x20||\x20pc.re'+'vision\x20!=\x20'+'\x22')+$S+'\x22)\x0a',_0x321ce2+='\x09console.w'+'arn(\x22preco'+'mpile-shad'+'ers.js:\x20en'+'gine\x20versi'+'on\x20mismatc'+'h,\x20rebuild'+'\x20shaders\x20l'+'ib\x20with\x20cu'+'rrent\x20engi'+'ne\x22);';const _0x2e8b9d=document['createElem'+'ent']('a');_0x2e8b9d['setAttribu'+'te']('href','data:text/'+'plain;char'+'set=utf-8,'+encodeURIComponent(_0x321ce2)),_0x2e8b9d['setAttribu'+'te']('download','precompile'+'-shaders.j'+'s'),_0x2e8b9d['style']['display']='none',document['body']['appendChil'+'d'](_0x2e8b9d),_0x2e8b9d['click'](),document['body']['removeChil'+'d'](_0x2e8b9d);}['clearCache'](){this['_isClearin'+'gCache']=!(0x8*0x3f1+-0x1*0x319+-0x1d*0xfb),this['processedC'+'ache']['forEach'](_0xd6f711=>{_0xd6f711['destroy']();}),this['processedC'+'ache']['clear'](),this['_isClearin'+'gCache']=!(0x1*0x2a+0x1*0x2437+-0x2460);}['removeFrom'+'Cache'](_0x72f16a){this['_isClearin'+'gCache']||this['processedC'+'ache']['forEach']((_0x5789d2,_0x1f937a)=>{_0x72f16a===_0x5789d2&&this['processedC'+'ache']['delete'](_0x1f937a);});}['_getDefaul'+'tStdMatOpt'+'ions'](_0x25043e){const _0x5278bc=Si['get'](this['_device'])['getByIndex'](_0x25043e);return _0x25043e===Zn||_0x25043e===Rl||_0x5278bc['isShadow']?this['_defaultSt'+'dMatOption'+'Min']:this['_defaultSt'+'dMatOption'];}['precompile'](_0x48f6ad){if(_0x48f6ad){const _0xbf4705=new Array(_0x48f6ad['length']);for(let _0x3201e6=-0x26f9+-0xf14+0x89*0x65;_0x3201e6<_0x48f6ad['length'];_0x3201e6++){if(_0x48f6ad[_0x3201e6]['name']==='standard'){const _0x4072b9=_0x48f6ad[_0x3201e6]['options'],_0x363210=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x4072b9['pass']);for(const _0x3c9f3e in _0x363210)_0x363210['hasOwnProp'+'erty'](_0x3c9f3e)&&_0x4072b9[_0x3c9f3e]===void(-0xc*-0x176+0xc81+-0xb*0x2bb)&&(_0x4072b9[_0x3c9f3e]=_0x363210[_0x3c9f3e]);}_0xbf4705[_0x3201e6]=this['getProgram'](_0x48f6ad[_0x3201e6]['name'],_0x48f6ad[_0x3201e6]['options']);}}this['_precached']=!(-0x21d6+0x1377+0xe5f);}}async function jA(){const _0x5e711f=new Float32Array(-0x4*-0x579+0xbdd+0x1b*-0x140),_0xd9c22e=new Int32Array(_0x5e711f['buffer']);let _0x1af724=0x1ebf+-0x143*0x13+-0x11*0x66,_0x267b62={};self['onmessage']=async _0x514b79=>{const {data:_0x3c0507}=_0x514b79;switch(_0x3c0507['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x11a8a6(_0x3c0507['properties'],_0x3c0507['timeIndex'],_0x3c0507['timeOption']);break;case'releaseSeq'+'Data':_0x57645d(_0x3c0507['index']);break;case'releaseAll'+'SeqData':_0x1d0a4d();break;case'destroyWor'+'ker':_0x2225a1();break;}};class _0x9a8bcd{constructor(_0x55cd2b=0x13b9+-0x1*0x131f+-0x9a,_0x4ff1d4=-0x19c6+0x2108*-0x1+-0x3ace*-0x1,_0x20bfc6=0x17a+0x22f7*-0x1+0x217d,_0x4d33be=-0x20dd+0xa12*0x1+0x16cc){this['x']=_0x55cd2b,this['y']=_0x4ff1d4,this['z']=_0x20bfc6,this['w']=_0x4d33be;}['set'](_0x22e029,_0x5f5389,_0x43b3bb,_0xd383d1){return this['x']=_0x22e029,this['y']=_0x5f5389,this['z']=_0x43b3bb,this['w']=_0xd383d1,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x394ac3=this){let _0x5e4895=_0x394ac3['length']();return _0x5e4895===-0xdaf+-0x525*-0x5+-0xc0a?(this['x']=this['y']=this['z']=-0x3*0x7f6+-0x6*0x319+-0x97*-0x48,this['w']=0x24a1*0x1+0x1*-0x12f1+-0x3*0x5e5):(_0x5e4895=(-0x1*-0x121c+-0x13*0x9f+0x64e*-0x1)/_0x5e4895,this['x']=_0x394ac3['x']*_0x5e4895,this['y']=_0x394ac3['y']*_0x5e4895,this['z']=_0x394ac3['z']*_0x5e4895,this['w']=_0x394ac3['w']*_0x5e4895),this;}['mulScalar'](_0x475b56,_0x3b3573=this){return this['x']=_0x3b3573['x']*_0x475b56,this['y']=_0x3b3573['y']*_0x475b56,this['z']=_0x3b3573['z']*_0x475b56,this['w']=_0x3b3573['w']*_0x475b56,this;}}const _0x31bf90=_0x45bde2=>{_0x5e711f[0x1e1f+-0x270c+-0x1*-0x8ed]=_0x45bde2;const _0x1bb099=_0xd9c22e[0x6d1*-0x1+-0x1bb5+0x2286];let _0x401ec1=_0x1bb099>>-0x13cf+0x13fd+-0x1e*0x1&-0xded2+-0x79d*-0x11+-0x169*-0x9d,_0x487f84=_0x1bb099>>-0xdb*0xa+0x3*0x7a9+-0x4cb*0x3&0x1228+-0x5b2+-0x477*0x1;const _0x13a1b1=_0x1bb099>>-0xf*-0x29+0x25ab*0x1+-0x27fb&-0x627+-0x1f*-0xe4+-0x1476;return _0x13a1b1<-0x23eb+-0x11c9+0x361b?_0x401ec1:_0x13a1b1>0xab4*-0x1+0x1948+-0xe06?(_0x401ec1|=-0x684f+0x1*0x77d5+0xa*0xad9,_0x401ec1|=(_0x13a1b1===0x50c+-0x247b*-0x1+-0x2888?-0x186+-0x172d+0x18b3:0x1*-0x261c+0x216c+0x4b1)&&_0x1bb099&0xd197bb*0x1+-0x44728a+0x6c8e*-0x1f,_0x401ec1):_0x13a1b1<0x17ba+0x1c4+-0x190d?(_0x487f84|=-0x1726+-0xeeb+0xf5b*0x3,_0x401ec1|=(_0x487f84>>-0x760+-0x193+-0xb9*-0xd-_0x13a1b1)+(_0x487f84>>-0x1d*-0x105+-0xe5f+0xec1*-0x1-_0x13a1b1&0x1*0x35+-0x930+0x8fc),_0x401ec1):(_0x401ec1|=_0x13a1b1-(0x269a+0x253*-0x1+0x1*-0x23d7)<<0x387*-0x1+0xd1*0x1e+0x1e7*-0xb|_0x487f84>>0x109f*-0x2+0xdd*-0x13+0x31a6,_0x401ec1+=_0x487f84&0x1*0x17f5+0x253d*-0x1+0xd49*0x1,_0x401ec1);},_0x25ccc1=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x1ae0ae=-0x1bd9+-0x11a0+0x2d79;_0x1ae0ae<-0x226e+0x1a5b+0x840;++_0x1ae0ae)if(!_0x267b62['f_rest_'+_0x1ae0ae])return _0x1ae0ae;return-0x22cd+0x139e+0xf5c;})())]??-0x230f*0x1+0x2aa*0xe+-0x23d),_0x11a8a6=(_0x14c002,_0x127b67,_0xd4cc6f)=>{const _0x456f5f=!!_0x14c002['time_index'];_0x456f5f||(_0x14c002['time_index']=new Float32Array(-0x1*-0x6ad+-0x16cc+-0x101f*-0x1)),_0x1af724+=_0x14c002['x']['length']??-0x2310+-0x70f+0x2a1f;const _0x11be72=Object['keys'](_0x14c002);for(let _0x257d84=0x1*0xca1+-0x834+-0xb*0x67;_0x257d84<_0x11be72['length'];_0x257d84++){const _0x43dad6=_0x11be72[_0x257d84],_0x56ce31=_0x14c002[_0x43dad6],_0x532f9b=_0x267b62[_0x43dad6]??new Float32Array(0x3*-0x3b5+0x1b32+-0x1013);if(!_0x456f5f&&_0x43dad6==='time_index'){const _0x521fb3=new Float32Array(_0x1af724);_0x521fb3['fill'](_0x127b67),_0x521fb3['set'](_0x532f9b,0x19ff+0x1*0x26f9+-0x318*0x15),_0x267b62[_0x43dad6]=_0x521fb3;}else{if(!_0x456f5f&&_0x56ce31&&_0x43dad6==='t'){const _0x3a095f=new Float32Array(_0x1af724);if(_0x3a095f['set'](_0x532f9b,0x10e4+-0xdb8+-0x32c),_0xd4cc6f){for(let _0x56a60e=_0x532f9b['length'];_0x56a60e<_0x1af724;_0x56a60e++)_0x56ce31[_0x56a60e-_0x532f9b['length']]>-(-0x882+-0x9d4+-0x1*-0x125b)?_0x3a095f[_0x56a60e]=_0x56ce31[_0x56a60e-_0x532f9b['length']]+_0xd4cc6f[(-0x86*0x1+0x575+-0x4ed)*_0x127b67]:_0x3a095f[_0x56a60e]=_0x56ce31[_0x56a60e-_0x532f9b['length']];}_0x267b62[_0x43dad6]=_0x3a095f;}else{if(_0x56ce31){const _0x16f3b1=new Float32Array(_0x1af724);_0x16f3b1['set'](_0x532f9b,-0x1fbc+-0x2374+0x4330*0x1),_0x16f3b1['set'](_0x56ce31,_0x532f9b['length']),_0x267b62[_0x43dad6]=_0x16f3b1;}}}}const _0x35d70d={};Object['keys'](_0x267b62)['forEach'](_0x22902b=>{_0x35d70d[_0x22902b]=new Float32Array(_0x267b62[_0x22902b]['buffer']['slice']());});const _0x78fc6f=Object['keys'](_0x35d70d)['map'](_0x393bb9=>_0x35d70d[_0x393bb9]['buffer']),_0x1e22be=_0x2c1d6c(),_0x2edaf8=Object['keys'](_0x1e22be)['map'](_0x5817f5=>_0x1e22be[_0x5817f5]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x35d70d,'transformData':_0x1e22be},_0x78fc6f['concat'](_0x2edaf8));},_0x2c1d6c=()=>{const _0x39bece=_0x267b62['x']['length'],_0x27b999=_0x267b62['x'],_0x43e199=_0x267b62['y'],_0xb2dea6=_0x267b62['z'],_0x2a6bdb=_0x267b62['scale_0'],_0x4cc6ff=_0x267b62['scale_1'],_0x2d45b9=_0x267b62['scale_2'],_0xb73675=_0x267b62['rot_1'],_0xfd3186=_0x267b62['rot_2'],_0x492139=_0x267b62['rot_3'],_0x255925=_0x267b62['rot_0'],_0x219795=_0x267b62['motion_0'],_0x219799=_0x267b62['motion_1'],_0x1f61cb=_0x267b62['motion_2'],_0x4b0487=_0x267b62['t'],_0x81b4b9=_0x267b62['t_scale'],_0x44ffde=_0x267b62['time_index'],_0x45f874=_0x267b62['f_dc_0'],_0x5ea632=_0x267b62['f_dc_1'],_0x837fec=_0x267b62['f_dc_2'],_0x80f651=_0x267b62['opacity'],_0x378f63=(_0x4b0487==null?void(0x57*-0xa+0xe87*-0x1+-0x11ed*-0x1):_0x4b0487['length'])>-0x1e70+0xf26+0xf4a,_0x58a44a=new Float32Array(_0x39bece*(0x25*-0xc7+0x428+-0x189e*-0x1)),_0x3dc7f0=new Float32Array(_0x39bece*(-0xa07+0x24a*-0xa+-0x119*-0x1e)),_0x411a25=new Uint16Array(_0x39bece*(-0x18e5+0x1c7f+-0x1*0x397)),_0x2c3c20=new Float32Array(_0x39bece*(-0x1*0x1bca+-0x1*-0x1ac+0x1a21));let _0x24e528=null,_0x25c9c1=null,_0x309226=null,_0x14b2fa=null;_0x378f63&&(_0x24e528=new Float32Array(_0x39bece*(-0x4*0x4c+-0x1*-0xeef+0x2*-0x6de)),_0x25c9c1=new Float32Array(_0x39bece*(-0x1045+-0x1242+0x228a)),_0x309226=new Float32Array(_0x39bece*(0xf*0xfa+0x185e+0x1*-0x2701)),_0x14b2fa=new Float32Array(_0x39bece));const _0x46dcdd=new _0x9a8bcd(-0xcb2+0x1f25+-0x1273,-0x5*-0x78a+0x25*-0x6+-0x24d4*0x1,0x15*0xfb+-0x8*0xad+0x12b*-0xd,0x5c0*0x1+0x57*0x48+-0x1e38);let _0x398f2f=-0xc65*-0x3+0x59*-0x21+-0x2*0xcdb,_0x1927d7=0x230f+-0x1cc6+-0x1*0x649,_0x27470f=0xe8d+0x6c7*0x5+-0x32*0xf8,_0x500310=-0x176b+0x42*-0x27+0xd1*0x29,_0x44b8f3=-0x1*-0x204e+-0xdd9+-0x1275,_0x481433=-0x2*-0x324+0x12ee+-0xc9b*0x2,_0x16fcff=!(0x14e*0xc+0x5ac+-0xe*0x186);const _0x473d8f=new Float32Array(0x23a8+-0xa04*-0x1+0x1*-0x2da9),_0x307616=new Float32Array(-0x2c9*0x7+-0x7f*0x3b+0x30c7),_0xfd073e=new Uint16Array(_0x39bece*(0x349*0x4+-0x7*0x337+0x961)),_0x19d205=0x3f9*0x9+0x1c*-0x146+-0x1*0x19+0.28209479177387814;for(let _0x2bc756=0x17+-0x4*0x705+-0x599*-0x5;_0x2bc756<_0x39bece;++_0x2bc756){const _0x3a718f=_0x45f874[_0x2bc756]*_0x19d205+(0x1417+-0x107f+-0x5*0xb8+0.5),_0x26a66a=_0x5ea632[_0x2bc756]*_0x19d205+(0x3*0x51+-0xb18+-0x173*-0x7+0.5),_0x194ada=_0x837fec[_0x2bc756]*_0x19d205+(0x8c2+-0xb9+0x79*-0x11+0.5),_0x31827a=_0x80f651[_0x2bc756];_0xfd073e[_0x2bc756*(-0x487+0x1d3b+-0x18b0)+(-0x607*-0x1+0x1*-0x12e0+0xcd9)]=_0x31bf90(_0x3a718f),_0xfd073e[_0x2bc756*(-0xd5d+0x199e+-0xc3d)+(0x14fe*-0x1+0x1a9e+-0x59f)]=_0x31bf90(_0x26a66a),_0xfd073e[_0x2bc756*(-0x15f+-0x660*0x3+0x1483)+(-0x34*0x29+0x270c+-0x1eb6*0x1)]=_0x31bf90(_0x194ada),_0xfd073e[_0x2bc756*(0x177*-0xc+0x50a+0xc8e)+(0x789+-0x752*0x5+-0x745*-0x4)]=_0x31bf90(_0x31827a);const _0x4a35c1=_0x27b999[_0x2bc756],_0x41df81=_0x43e199[_0x2bc756],_0x2752da=_0xb2dea6[_0x2bc756],_0x1f9d65=Math['max'](_0x2a6bdb[_0x2bc756],_0x4cc6ff[_0x2bc756],_0x2d45b9[_0x2bc756]);if(isFinite(_0x4a35c1)&&isFinite(_0x41df81)&&isFinite(_0x2752da)&&isFinite(_0x1f9d65)){const _0xd46a63=(-0x321*0x7+0x1457+0x192)*Math['exp'](_0x1f9d65);_0x16fcff?(_0x16fcff=!(-0xbbe+-0xd*-0x1a3+0x4c4*-0x2),_0x398f2f=_0x4a35c1-_0xd46a63,_0x1927d7=_0x41df81-_0xd46a63,_0x27470f=_0x2752da-_0xd46a63,_0x500310=_0x4a35c1+_0xd46a63,_0x44b8f3=_0x41df81+_0xd46a63,_0x481433=_0x2752da+_0xd46a63):(_0x398f2f=Math['min'](_0x398f2f,_0x4a35c1-_0xd46a63),_0x1927d7=Math['min'](_0x1927d7,_0x41df81-_0xd46a63),_0x27470f=Math['min'](_0x27470f,_0x2752da-_0xd46a63),_0x500310=Math['max'](_0x500310,_0x4a35c1+_0xd46a63),_0x44b8f3=Math['max'](_0x44b8f3,_0x41df81+_0xd46a63),_0x481433=Math['max'](_0x481433,_0x2752da+_0xd46a63));}_0x46dcdd['set'](_0xb73675[_0x2bc756],_0xfd3186[_0x2bc756],_0x492139[_0x2bc756],_0x255925[_0x2bc756]),_0x46dcdd['normalize'](),_0x46dcdd['w']<-0x26b7+0x25f*0x1+0x2458&&_0x46dcdd['mulScalar'](-(-0x11be+0x7ce*-0x1+0x198d)),_0x3dc7f0[_0x2bc756*(0x4*-0xc2+-0x15f3+0x7*0x392)+(0x1*0x198b+0x2699+-0x2*0x2012)]=_0x27b999[_0x2bc756],_0x3dc7f0[_0x2bc756*(0x23ec+-0x1bc3+0x826*-0x1)+(-0x30b*0x1+-0x30a*0x3+0x15a*0x9)]=_0x43e199[_0x2bc756],_0x3dc7f0[_0x2bc756*(0x2021*-0x1+-0x1830+0x3854)+(-0x23ae*0x1+-0x1528+0x44*0xd6)]=_0xb2dea6[_0x2bc756],_0x58a44a[_0x2bc756*(-0x1e6+0x738+-0x54f)+(0x1*0xd79+0x87e+-0x15f7)]=_0x27b999[_0x2bc756],_0x58a44a[_0x2bc756*(0x2509+0x3*-0xb3+-0x22ed)+(0x8cb*0x1+0x513+-0xddd)]=_0x43e199[_0x2bc756],_0x58a44a[_0x2bc756*(0x2*0x581+-0x1dd5+-0x2*-0x96b)+(0x7f6+0x9e4*0x1+-0x11d8)]=_0xb2dea6[_0x2bc756],_0x411a25[_0x2bc756*(-0x1aac+-0x7a1+-0x1e8*-0x12)+(-0x2091+-0x7e*0x33+0x7*0x83d)]=_0x31bf90(Math['exp'](_0x2a6bdb[_0x2bc756])),_0x411a25[_0x2bc756*(-0x1*0xf27+-0x1f7b+0x2ea5*0x1)+(0xe*-0x21d+-0x60*0x49+0x38f7)]=_0x31bf90(Math['exp'](_0x4cc6ff[_0x2bc756])),_0x411a25[_0x2bc756*(-0x144a+-0x8*-0x36e+-0x723)+(0x581*-0x5+-0x5a0*-0x3+-0x65*-0x1b)]=_0x31bf90(Math['exp'](_0x2d45b9[_0x2bc756])),_0x2c3c20[_0x2bc756*(0xd*0x17a+0x1392+-0x26c1)+(-0x231e+0xd9a+0x1584)]=_0x46dcdd['x'],_0x2c3c20[_0x2bc756*(-0xd86+0x1837+0x2*-0x557)+(-0xec2*0x1+-0x2282+-0x1*-0x3145)]=_0x46dcdd['y'],_0x2c3c20[_0x2bc756*(-0x17d7+-0x6d*-0xa+0x1398)+(0x1*-0x11d7+-0x254b+0x1b92*0x2)]=_0x46dcdd['z'],_0x378f63&&_0x24e528&&_0x25c9c1&&_0x309226&&_0x14b2fa&&(_0x24e528[_0x2bc756*(0x7*-0xdb+0xfb*-0x3+0x1*0x8f1)+(0x1*-0x2665+0x1f83+0x2*0x371)]=_0x219795[_0x2bc756],_0x24e528[_0x2bc756*(-0x192d+0x1e79*-0x1+0x37a9)+(0x16ff+-0x1c72+0x2ba*0x2)]=_0x219799[_0x2bc756],_0x24e528[_0x2bc756*(-0x536*0x7+-0x7e0+0x2c5d)+(-0x4*-0x987+0x204d+-0x4667)]=_0x1f61cb[_0x2bc756],_0x309226[_0x2bc756*(-0x2578+-0x1f35+-0x10*-0x44b)+(0x12c8+0x1250+0x1*-0x2518)]=_0x219795[_0x2bc756],_0x309226[_0x2bc756*(0x153b+0x2251*-0x1+0xd19)+(-0x7c*0x32+0x16e7+0x152)]=_0x219799[_0x2bc756],_0x309226[_0x2bc756*(-0x311*0xa+0x11de+0x1*0xccf)+(-0x164*-0xb+-0x12b3+0x369)]=_0x1f61cb[_0x2bc756],_0x14b2fa[_0x2bc756]=_0x81b4b9?Math['exp'](_0x81b4b9[_0x2bc756]):-0x1cf4+0x9*0x63+-0x1*-0x1979,_0x25c9c1[_0x2bc756*(-0xbeb+0x2174+0x3a*-0x5f)+(-0x21d5+0x215b*-0x1+0x4330)]=_0x4b0487?_0x4b0487[_0x2bc756]:0x15e4+0x1*0xdc9+0x1*-0x23ad,_0x25c9c1[_0x2bc756*(0x288+-0x1*-0x11a7+-0x4*0x50b)+(-0x1a76+0x21a4+0xb*-0xa7)]=_0x14b2fa[_0x2bc756]);}_0x16fcff||(_0x473d8f[-0x1f39*-0x1+-0x148c+-0xaad]=(_0x398f2f+_0x500310)*(-0xa11*-0x3+-0x1*-0x84b+-0x2f6*0xd+0.5),_0x473d8f[-0xac2+-0x2f7+-0xdba*-0x1]=(_0x1927d7+_0x44b8f3)*(0x344*-0x1+-0x6b6+0x9fa+0.5),_0x473d8f[-0x8*0x34f+0x4*-0x4a9+0x2d1e]=(_0x27470f+_0x481433)*(0x6c2+-0x88*-0x1d+-0x2*0xb15+0.5),_0x307616[-0x34a+-0x2456+0x4*0x9e8]=(_0x500310-_0x398f2f)*(0x2*-0x11d4+-0x48*0x20+0x4*0xb2a+0.5),_0x307616[0xff*0x25+-0x25e9+0x10f]=(_0x44b8f3-_0x1927d7)*(-0xd5f+0x2f*-0x73+-0x89f*-0x4+0.5),_0x307616[0x17ff+-0x2551+-0xd54*-0x1]=(_0x481433-_0x27470f)*(0x19de+0x454+0xf19*-0x2+0.5));const _0x140b33=_0x31ec9f();let _0x234f99={'dataColor':_0xfd073e,'center':_0x473d8f,'halfExtents':_0x307616,'dataCenters':_0x58a44a,'dataPosition':_0x3dc7f0,'dataScale':_0x411a25,'dataRotation':_0x2c3c20,..._0x140b33};return _0x378f63&&(_0x234f99={..._0x234f99,'dataMotion':_0x24e528,'dataTime':_0x25c9c1,'motion':_0x309226,'tScaleArray':_0x14b2fa,'muT':new Float32Array(_0x4b0487),'timeIndex':new Float32Array(_0x44ffde)}),_0x234f99;},_0x388013=_0x241fe8=>{const _0x5a440d=[];for(let _0x1fed0c=0xa5e*-0x1+0x1bbb*0x1+-0x115d;_0x1fed0c<_0x241fe8;++_0x1fed0c)_0x5a440d['push'](_0x267b62['f_rest_'+_0x1fed0c]);return _0x5a440d;},_0x31ec9f=()=>{const _0x5242b8=_0x25ccc1();if(_0x5242b8<=0x7a4*0x3+0x104c+-0x5*0x7d8)return{};const _0x1b0d4a=_0x267b62['x']['length'],_0x344626=new Uint32Array(_0x1b0d4a*(-0x2580+-0x132f+0xb57*0x5)),_0xc55cbc=new Uint32Array(_0x1b0d4a*(0x3*0x99e+0x654+-0x232a)),_0x33436b=new Uint32Array(_0x1b0d4a*(-0xd4a+0x3*0x163+0x925)),_0x541de9=new Uint32Array(_0x1b0d4a*(-0x4f7*0x2+-0x13*-0x59+0x357)),_0x23f1fa={0x1:0x3,0x2:0x8,0x3:0xf}[_0x5242b8],_0x472414=_0x388013(_0x23f1fa*(-0x679*-0x2+0x174f+0x2*-0x121f)),_0x17386f=-0x1b46+-0x1363*0x2+0x4a0b,_0x1e3fc7=0x317+0x72*-0x2e+0x1564,_0x5e81b4=new Float32Array(-0xe2*0x1b+0x6*0x631+-0xd4f),_0x2b8a95=new Uint32Array(_0x5e81b4['buffer']),_0x555d65=new Array(_0x23f1fa*(0x1450+0x4b2+-0x18ff))['fill'](-0x4ae+0x1f1a+-0x1a6c);for(let _0x507dc1=-0x16ab+-0x668*0x5+0x13*0x2e1;_0x507dc1<_0x1b0d4a;++_0x507dc1){for(let _0xfb9cfc=-0x4*0x8fa+-0x95d+-0x1*-0x2d45;_0xfb9cfc<_0x23f1fa;++_0xfb9cfc)_0x555d65[_0xfb9cfc*(-0x24e5+0xc30+0x18b8)]=_0x472414[_0xfb9cfc][_0x507dc1],_0x555d65[_0xfb9cfc*(0x14be+-0x91+-0x1*0x142a)+(0x1f05+-0x1034+-0xed0)]=_0x472414[_0xfb9cfc+_0x23f1fa][_0x507dc1],_0x555d65[_0xfb9cfc*(0xc1*-0xa+-0x157d+0x1d0a)+(0xd*0x13+-0x76*0x52+0x24d7)]=_0x472414[_0xfb9cfc+_0x23f1fa*(0xcd7+-0xd*0x1f1+-0x8*-0x18d)][_0x507dc1];let _0x2b239b=_0x555d65[0x1*0x243c+-0x1c6e+-0x7ce];for(let _0x40ca0e=-0x1f81+0x227*0x5+-0x1*-0x14bf;_0x40ca0e<_0x23f1fa*(-0x812+0x5*-0x6aa+0x2967);++_0x40ca0e)_0x2b239b=Math['max'](_0x2b239b,Math['abs'](_0x555d65[_0x40ca0e]));if(_0x2b239b!==-0xfa*-0x1b+-0x30d*0xb+-0x7*-0x107){for(let _0x13add5=0x1cce+-0x135f+-0x96f;_0x13add5<_0x23f1fa;++_0x13add5)_0x555d65[_0x13add5*(-0x3*0x511+-0x20c*-0xd+-0xb66)+(-0x687*-0x1+0x3e*0x95+-0x2a9d*0x1)]=Math['max'](-0x20fa+0xad6*0x2+0xb4e,Math['min'](_0x17386f,Math['floor']((_0x555d65[_0x13add5*(0x1*-0x1453+-0x1a71+-0x1*-0x2ec7)+(-0x1324+-0x1*0xaf1+0x1e15)]/_0x2b239b*(-0x25ad+0xb7a*0x3+0x33f+0.5)+(0x1b56+-0x1*-0xe61+0x29b7*-0x1+0.5))*_0x17386f+(-0x2535+0x22fc*-0x1+0x4831+0.5)))),_0x555d65[_0x13add5*(0x261d+-0x6f2+-0x1f28)+(-0x77*-0x1a+0x230b*0x1+0x68*-0x74)]=Math['max'](0x1759+-0x1*-0x438+-0x1*0x1b91,Math['min'](_0x1e3fc7,Math['floor']((_0x555d65[_0x13add5*(0x2e3+-0x52*0x51+-0x1*-0x1712)+(0x1*-0x1475+0x25b2+-0x44f*0x4)]/_0x2b239b*(-0x138e+0x11*0x218+-0x2*0x805+0.5)+(-0x3*0x50c+0x1*-0x1a8b+-0x3*-0xde5+0.5))*_0x1e3fc7+(-0x2*-0x3fb+-0x24d7*0x1+0x1ce1+0.5)))),_0x555d65[_0x13add5*(-0x1146+0x1*0x21c4+-0x107b)+(-0x104f+0x6*-0x10a+0x168d)]=Math['max'](0xcd2*-0x2+0x15a*-0x5+0x2*0x1033,Math['min'](_0x17386f,Math['floor']((_0x555d65[_0x13add5*(0x73a*-0x2+-0x14f9*0x1+-0xe*-0x288)+(-0x1*0x2a+-0x1f27+0x1f53)]/_0x2b239b*(0x1a89+0x27f*-0x3+-0x130c+0.5)+(-0x38*0x59+-0x1f5*-0x8+0x4*0xf4+0.5))*_0x17386f+(0x4*-0xd6+0x1*-0x287+0x5df+0.5))));_0x5e81b4[-0xd*0x1fd+-0x19aa+0x3383]=_0x2b239b,_0x344626[_0x507dc1*(-0x1e80*0x1+-0x1*0xf89+0x2e0d)+(-0x63b*0x5+-0x135*-0x4+0x1*0x1a53)]=_0x2b8a95[0xc97+0x1d97+-0x2*0x1517],_0x344626[_0x507dc1*(-0x167a+0x1*0x5c9+-0x7*-0x263)+(0xf6b+-0x1*-0x1293+-0x21fd)]=_0x555d65[-0x1*0x235+0x15da+-0x13a5]<<0x1e06+-0x1346+-0x1*0xaab|_0x555d65[0x2*0x9b9+-0x1*-0xf95+0x1183*-0x2]<<0x1*-0x10f3+0x1*0x26df+-0x3*0x74b|_0x555d65[-0x1*-0x799+0x1b64+0x3*-0xba9],_0x344626[_0x507dc1*(-0x6a6*-0x4+-0xe18+0x63e*-0x2)+(0x1*0x1471+-0x2047*0x1+0x5ec*0x2)]=_0x555d65[0x18b4+-0x569+-0x1348]<<-0x1eb6*0x1+-0x26c0+0x458b|_0x555d65[0x974+0x2*0xc42+-0x21f4]<<-0x10be*0x2+0x269b+-0x514|_0x555d65[-0x131d+0x1*-0x1995+0x2cb7],_0x344626[_0x507dc1*(-0x1*-0x761+0x2078+-0x27d5)+(0x1605+-0x1a93*-0x1+-0x3095)]=_0x555d65[-0x114a+0x108c+0xc4]<<0x85d*-0x4+-0x1adf+0x3c68|_0x555d65[0x230b*0x1+-0x3*0x422+-0xa*0x243]<<0x21cb+0x22a4+-0x4*0x1119|_0x555d65[-0x20dc+0x41*0x16+0x1b4e],_0x5242b8>0xd9a*0x2+-0x10f*0x4+0x16f7*-0x1&&(_0xc55cbc[_0x507dc1*(-0x2d*-0x2c+-0x1aa1+0x12e9)+(0x1540+-0x60d+0x1*-0xf33)]=_0x555d65[-0x20ca+-0x41*-0x7b+-0x198*-0x1]<<-0x2709+-0x654+0x2d72|_0x555d65[0x183d+0x281*0x5+0xbc*-0x32]<<-0x1340+-0x141c+0x1*0x2767|_0x555d65[-0x1c57+-0x1087*-0x1+0xbdb*0x1],_0xc55cbc[_0x507dc1*(0x4ed*-0x1+-0x10a3*-0x1+0x5d9*-0x2)+(-0x1c13+0x529*-0x1+0x213d)]=_0x555d65[0x3*-0x569+0x1*-0x35f+0x13a6]<<0x2e7*0xd+-0x4*-0x949+-0x2*0x2565|_0x555d65[-0x1c86+0x76d*-0x1+0xc*0x300]<<-0x11a*-0x9+-0x1e6a+0x148b|_0x555d65[-0x1d2b+0x2123+-0x3ea],_0xc55cbc[_0x507dc1*(-0x2271+0x97a*-0x2+0x4db*0xb)+(-0x1b8e+-0x1981+0x3511)]=_0x555d65[-0x16a3+-0x2318+0x39ca]<<0xcd+0x1*-0xce5+-0x40f*-0x3|_0x555d65[-0x4*0xd7+0xf9*-0x1d+0x1fa1]<<0x1*-0x1316+0x1d8*-0x10+-0xd3*-0x3b|_0x555d65[-0x14ac+0x1*-0xe25+0x22e2],_0xc55cbc[_0x507dc1*(0x1*0x44c+-0x146+-0x302)+(-0x2*0xa57+-0xd47+-0x8*-0x43f)]=_0x555d65[0x1c6f+-0x1*0x26f9+0xa9c]<<0x81*0x3a+-0x216e+0x449|_0x555d65[0x1*-0xddf+-0x107*-0x19+0xbbd*-0x1]<<-0x3*-0xa49+-0x1948+0xb1*-0x8|_0x555d65[-0x63*0x3a+0x13aa+-0x8*-0x5b],_0x5242b8>-0x2498+0x1*-0x7d+0x76b*0x5?(_0x33436b[_0x507dc1*(0x3*0x48b+0x246f+-0x320c)+(-0x5a6+-0x141*-0x13+-0x122d)]=_0x555d65[0x12*0x24+0x52c+-0x79f]<<0x81e+0x13bb+-0x4*0x6f1|_0x555d65[-0xbf9*0x1+0x9c3+-0x31*-0xc]<<0x1237+-0x22*0x52+-0x748|_0x555d65[-0xe10+0x165f+-0x838*0x1],_0x33436b[_0x507dc1*(0x813*0x1+-0x26f8+0x1ee9)+(-0x1739+-0x1074+0x27ae)]=_0x555d65[-0x2224+0x243d+0x39*-0x9]<<-0xd1f+-0x1591*-0x1+0x1*-0x85d|_0x555d65[-0x18f3+-0x248a+0x3d96]<<0x112a+-0x1*-0x1f0d+0x1*-0x302c|_0x555d65[-0x9ca+0x1795*0x1+-0xdb1],_0x33436b[_0x507dc1*(-0x55*0xb+0x2490+-0xaf7*0x3)+(-0xb1b+-0x1169+0x1c86)]=_0x555d65[-0x1448+0x87e*0x1+-0x7*-0x1b3]<<0xee5+0x211f+0x1*-0x2fef|_0x555d65[-0x434+-0x93e+0xd8e]<<0x840+-0x179f*-0x1+-0x1fd4|_0x555d65[0x2*-0x634+0x89+0xbfc],_0x33436b[_0x507dc1*(-0x1*0x1472+-0xdf*-0x1+0x1397)+(-0x2b0+-0x2064+0xd*0x2b3)]=_0x555d65[-0x488+0x1*0x8e7+0x9*-0x79]<<-0x1b29+-0x9*-0xe1+-0x1*-0x1355|_0x555d65[0x1*0x245+-0x1e9+-0x1*0x3d]<<-0x260e+-0x1*0x1ebb+0x44d4|_0x555d65[-0x1*-0x1093+-0x16*-0x27+-0x13cd],_0x541de9[_0x507dc1*(-0x1198*-0x1+-0x1c2*-0x7+-0x1de2)+(0x35e*0x7+0x46f+-0x1c01)]=_0x555d65[0x3a3+0x6a4+0x3*-0x362]<<0x97a+0x434*-0x3+0x337|_0x555d65[-0x2368+0xb*-0x21d+-0x3ac9*-0x1]<<0xb59+-0xbf2*0x3+0x1888|_0x555d65[-0x2*0x157+0x2276+0x1fa5*-0x1],_0x541de9[_0x507dc1*(0xa*0xfa+-0x257*0xb+0xffd)+(-0xbd*0x2e+0x3*-0x9d6+0x3f79)]=_0x555d65[0x1278+-0x30e+-0xf46]<<-0xfb*0x16+-0x1a9e+-0x1017*-0x3|_0x555d65[0x4c9*-0x5+0x1*0x1e2b+0x1*-0x619]<<-0x539*0x1+0xa3*-0x27+0x1e19|_0x555d65[0xf2b+0x153f+-0x2444],_0x541de9[_0x507dc1*(0x628+0x9*0x2fd+-0x2109)+(-0x2645+0x122b*0x2+0x1f1)]=_0x555d65[-0x26*0x6e+-0x106d*0x1+0x1d4*0x12]<<0x8*0x41a+-0x2309+0x127*0x2|_0x555d65[0xa*-0x292+0x154+0x1888]<<-0x3e3+0x3af*-0x1+0x79d|_0x555d65[0x1*-0x2113+0x1a95+0x6a7*0x1],_0x541de9[_0x507dc1*(-0xfd4*-0x1+0x1501*0x1+-0x24d1*0x1)+(-0x2396+0x1a34+0x965)]=_0x555d65[0x9*-0x12e+-0x4b1*-0x4+-0x7fc]<<-0x111f*0x1+-0x4*-0x1c6+0xa1c|_0x555d65[0x17d0+0xb6f*-0x2+-0xc7*0x1]<<0xb3*-0x36+0x3*0x7ac+-0x1*-0xec9|_0x555d65[-0x2*-0xf35+0x132c+-0x73*0x6e]):_0x33436b[_0x507dc1]=_0x555d65[-0x178c+-0x1*0x4b5+0x1c56]<<-0x11a5*-0x1+-0x1c20+0xd0*0xd|_0x555d65[-0x1*0xe49+0xc36*0x3+-0x1643]<<-0x1*-0x1027+0xd98+0x1*-0x1db4|_0x555d65[0x1353*0x1+0x2*0xf75+0x31*-0x106]);}}return{'sh1to3Data':_0x344626,'sh4to7Data':_0xc55cbc,'sh8to11Data':_0x33436b,'sh12to15Data':_0x541de9};},_0x57645d=_0x9cfc11=>{if(!_0x267b62['time_index'])return;const _0x25b97a=_0x267b62['time_index']['findIndex'](_0x3dd46c=>_0x3dd46c===_0x9cfc11);let _0x111f3c=_0x267b62['time_index']['findIndex']((_0x4faa83,_0x17f274)=>_0x4faa83!==_0x9cfc11&&_0x17f274>_0x25b97a);if(_0x111f3c===-(0x1*-0x20be+0x1499+-0x5*-0x26e)&&_0x25b97a===-(0x6e*0x42+0x1afa+0xb11*-0x5))return;_0x111f3c===-(0xed+-0xadf+-0x9f3*-0x1)&&_0x25b97a!==-(0xe*0x10a+-0x2245+0x13ba)&&(_0x111f3c=_0x267b62['time_index']['length']),_0x1af724-=_0x111f3c-_0x25b97a;const _0x3aa97a=Object['keys'](_0x267b62);for(let _0xa7e595=0x230b+0x197d+-0x3c88;_0xa7e595<_0x3aa97a['length'];_0xa7e595++){const _0x3f72ba=_0x3aa97a[_0xa7e595],_0x220776=_0x267b62[_0x3f72ba];if(_0x220776){const _0x4d41ed=new Float32Array(_0x1af724);_0x25b97a>-0x163*-0x5+0x5cb+0xb5*-0x12?(_0x4d41ed['set'](_0x220776['subarray'](0x2*-0x1286+-0x2079+0x4585,_0x25b97a),-0x13*-0x123+-0x1387+-0x212),_0x4d41ed['set'](_0x220776['subarray'](_0x111f3c),_0x25b97a)):_0x4d41ed['set'](_0x220776['subarray'](_0x111f3c),-0x16b1+-0x904+0x1*0x1fb5),_0x267b62[_0x3f72ba]=_0x4d41ed;}}},_0x1d0a4d=()=>{const _0x18ac08=Object['keys'](_0x267b62);for(let _0x2d667f=0x1ee6+-0x1753+-0x793;_0x2d667f<_0x18ac08['length'];_0x2d667f++){const _0x168080=_0x18ac08[_0x2d667f];_0x267b62[_0x168080]&&(_0x267b62[_0x168080]=[]);}},_0x2225a1=()=>{_0x267b62={},_0x1af724=-0xdf0+-0x10*-0x32+0xad0;};}class YA extends me{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+jA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x35dad5,_0x588a6a,_0x28f3e6,_0x5bedb0=!(-0x1d0c+0x1085+-0x191*-0x8)){var _0x24e868,_0x4908e5;const _0x20d7f6={};return _0x35dad5['elements'][0x8*0x2e3+-0x39e*-0x6+-0x2ccc]['properties']['forEach'](_0x50a01e=>{_0x20d7f6[_0x50a01e['name']]=_0x50a01e['storage'];}),_0x5bedb0?(_0x24e868=this['worker'])==null||_0x24e868['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x20d7f6,'timeIndex':_0x588a6a,'timeOption':_0x28f3e6},_0x35dad5['elements'][0x8a9*0x2+-0x2018+-0x1*-0xec6]['properties']['map'](_0x2d4108=>_0x2d4108['storage']['buffer'])):(_0x4908e5=this['worker'])==null||_0x4908e5['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x20d7f6,'timeIndex':_0x588a6a,'timeOption':_0x28f3e6}),new Promise(_0x271fcd=>{this['worker']['onmessage']=_0x27fb60=>{if(!this['worker'])return;const {data:_0x1b6389}=_0x27fb60;_0x1b6389['type']==='newAppendD'+'ata'&&_0x271fcd(_0x1b6389);};});}async['releaseSeq'+'Data'](_0x42fb9d){var _0x3f3861;(_0x3f3861=this['worker'])==null||_0x3f3861['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x42fb9d});}async['releaseAll'+'SeqData'](){var _0x45205f;(_0x45205f=this['worker'])==null||_0x45205f['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x45bcc5;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x45bcc5=this['worker'])==null||_0x45bcc5['terminate'](),this['worker']=null);}}const za=new te(),pg=new le(),yf=new De(),mg=new De(),KA=new ie(-0x1fc3+-0x16ed+0x36b1,0x4bd*0x6+0x901+-0x1*0x256e,-0x22c0+0x1e*-0x49+0x2b4e,0x36*0x93+0x1*0x23b6+-0x42b8+0.4),vf=-0x5*0x6e6+0x1*0x1ec5+0x3b9*0x1+0.28209479177387814,xf=0x53a97*0x1+0x3d589+-0x10*0x602e;let ZA=class{constructor(_0x2d584b,_0x11a863,_0x16f201,_0x341ed3,_0x5175e3,_0x56309b){const _0x38ae4c=_0x2d584b['getProp']('x'),_0x35a30e=_0x2d584b['getProp']('y'),_0x2ae796=_0x2d584b['getProp']('z'),_0x4da236=_0x2d584b['getProp']('rot_1'),_0x3d8400=_0x2d584b['getProp']('rot_2'),_0x5b8c7c=_0x2d584b['getProp']('rot_3'),_0x569c27=_0x2d584b['getProp']('rot_0'),_0x28fd22=_0x2d584b['getProp']('motion_0'),_0x4b0c31=_0x2d584b['getProp']('motion_1'),_0x29c35a=_0x2d584b['getProp']('motion_2'),_0x7bebab=_0x2d584b['getProp']('scale_0'),_0x17f5a8=_0x2d584b['getProp']('scale_1'),_0x4f2ecc=_0x2d584b['getProp']('scale_2'),_0x432aa1=_0x2d584b['getProp']('f_dc_0'),_0x445679=_0x2d584b['getProp']('f_dc_1'),_0x4c3008=_0x2d584b['getProp']('f_dc_2'),_0x37b396=_0x2d584b['getProp']('opacity');this['read']=_0x560de9=>{_0x11a863&&(_0x11a863['x']=_0x38ae4c[_0x560de9],_0x11a863['y']=_0x35a30e[_0x560de9],_0x11a863['z']=_0x2ae796[_0x560de9]),_0x16f201&&_0x16f201['set'](_0x4da236[_0x560de9],_0x3d8400[_0x560de9],_0x5b8c7c[_0x560de9],_0x569c27[_0x560de9]),_0x341ed3&&_0x341ed3['set'](Math['exp'](_0x7bebab[_0x560de9]),Math['exp'](_0x17f5a8[_0x560de9]),Math['exp'](_0x4f2ecc[_0x560de9])),_0x56309b&&_0x28fd22&&_0x56309b['set'](_0x28fd22[_0x560de9],_0x4b0c31[_0x560de9],_0x29c35a[_0x560de9]),_0x5175e3&&_0x5175e3['set'](0x1efb+-0x2e*-0xc9+0xc1*-0x59+0.5+_0x432aa1[_0x560de9]*vf,0x1761+0x20*0x72+0x3*-0xc8b+0.5+_0x445679[_0x560de9]*vf,0x975*-0x1+0x6*0x57e+-0x177f+0.5+_0x4c3008[_0x560de9]*vf,_0x37b396[_0x560de9]);};}};const _g=(_0x845d2b,_0x3b76c2,_0x103516)=>{pg['set'](_0x103516['x'],_0x103516['y'],_0x103516['z'],_0x103516['w'])['normalize'](),_0x845d2b['setTRS'](_0x3b76c2,pg,D['ONE']);};class qn{constructor(_0x363820,_0x40a049=[]){h(this,'elements'),h(this,'numSplats',-0x5e9+0x1d7e+-0x1*0x1795),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x149521;(_0x149521=this['dataWorker'])==null||_0x149521['destroy'](),this['dataWorker']=null;});var _0x3fa8c1,_0x325dc5,_0x463af4;this['elements']=_0x363820,this['numSplats']=((_0x3fa8c1=this['getElement']('vertex'))==null?void(0x1fdf+-0x2*-0x9ef+-0x33bd*0x1):_0x3fa8c1['count'])??-0x925+0x1*0xee0+-0x1e9*0x3,this['comments']=_0x40a049,this['is4D']=!!((_0x463af4=(_0x325dc5=this['getElement']('vertex'))==null?void(-0x71f+-0xce1+0x1400):_0x325dc5['properties']['find'](_0x68b309=>_0x68b309['name']==='t'))!=null&&_0x463af4['storage']);}async['appendGSpl'+'atData'](_0xa8024f,_0x1e4e8e,_0x5ee489){var _0x552c4b;let _0x4f9195=0x6f8+-0x1*0x24a1+0x1da9;for(let _0x2a84db=-0x1*0x1e25+-0x2483*0x1+0x42a8;_0x2a84db<_0x5ee489['length']&&_0x1e4e8e>_0x5ee489[_0x2a84db];_0x2a84db+=0xb7e+-0x489+-0x6f3)_0x4f9195=_0x2a84db/(-0xfb6+0x195e+-0x9a6);console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData',_0x4f9195),this['dataWorker']||(this['dataWorker']=new YA(),await this['dataWorker']['appendGSpl'+'atData'](this,-0x1803+0x1*0x22ca+0xac7*-0x1,_0x5ee489));const _0x249227=this['getElement']('vertex');_0x249227&&(_0x249227['count']=this['numSplats']);const _0x5a8de3=await this['dataWorker']['appendGSpl'+'atData'](_0xa8024f,_0x4f9195,_0x5ee489,!(0x1f30+0x834+0x4*-0x9d9)),_0x30adde=_0x5a8de3['properties'],_0x11bc8e=((_0x552c4b=this['getElement']('vertex'))==null?void(0x3d*-0x90+-0x7ed*-0x4+0x14e*0x2):_0x552c4b['properties'])??[];for(const _0x415865 in _0x30adde){const _0xd73cd=_0x11bc8e['find'](_0x3a1cdf=>_0x3a1cdf['name']===_0x415865);_0xd73cd?_0xd73cd['storage']=_0x30adde[_0x415865]:_0x11bc8e['push']({'type':'float','name':_0x415865,'storage':_0x30adde[_0x415865],'byteSize':0x4});}this['transformD'+'ata']=_0x5a8de3['transformD'+'ata'],this['numSplats']=_0x30adde['x']['length'],console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData\x20nu'+'mSplats',this['numSplats']);}async['releaseSeq'+'Data'](_0x2cbdc5){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20releaseSe'+'qData',_0x2cbdc5),this['dataWorker']['releaseSeq'+'Data'](_0x2cbdc5),this;}async['releaseAll'+'SeqData'](){var _0x533ce0;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20release\x20a'+'ll\x20SeqData'),(_0x533ce0=this['dataWorker'])==null||_0x533ce0['releaseAll'+'SeqData'](),this;}static['calcSplatA'+'abb'](_0x3700d3,_0x1a1f2e,_0x5cc430,_0x2d3279){_g(za,_0x1a1f2e,_0x5cc430),yf['center']['set'](0x12e2+0x2*0x42c+-0x1b3a,-0xf0a+-0xf8*0x25+0x87b*0x6,-0x2163+0x78b+-0x8*-0x33b),yf['halfExtent'+'s']['set'](_0x2d3279['x']*(0x12e+-0x2*0x130a+0x24e8),_0x2d3279['y']*(0x1421+-0x268+-0x5*0x38b),_0x2d3279['z']*(0x276+0xc3a+0x1*-0xeae)),_0x3700d3['setFromTra'+'nsformedAa'+'bb'](yf,za);}['getProp'](_0x10112b,_0x47ea44='vertex'){var _0x49b51e,_0x55024e;return(_0x55024e=(_0x49b51e=this['getElement'](_0x47ea44))==null?void(-0x1195*0x1+0x21ba+-0x1025):_0x49b51e['properties']['find'](_0x57e62e=>_0x57e62e['name']===_0x10112b))==null?void(0x18d5+0x1f6+-0x1*0x1acb):_0x55024e['storage'];}['getElement'](_0x50440c){return this['elements']['find'](_0x238630=>_0x238630['name']===_0x50440c);}['addProp'](_0x415887,_0x5957f6){this['getElement']('vertex')['properties']['push']({'type':'float','name':_0x415887,'storage':_0x5957f6,'byteSize':0x4});}['createIter'](_0x51170a,_0x187965,_0x28388f,_0x5228f1,_0x2806bd){return new ZA(this,_0x51170a,_0x187965,_0x28388f,_0x5228f1,_0x2806bd);}async['calcAabbAs'+'ync'](_0x8e94d2,_0x32f698){var _0x13cd03,_0x1ff477;if((_0x13cd03=this['transformD'+'ata'])!=null&&_0x13cd03['center']&&((_0x1ff477=this['transformD'+'ata'])!=null&&_0x1ff477['halfExtent'+'s'])){_0x8e94d2['center']['set'](this['transformD'+'ata']['center'][-0x168c+0x2b3*-0x6+0x26be],this['transformD'+'ata']['center'][-0x22bb+0x645+0x1c77],this['transformD'+'ata']['center'][0x144c+0x7*-0x14+0x26*-0x85]),_0x8e94d2['halfExtent'+'s']['set'](this['transformD'+'ata']['halfExtent'+'s'][-0x392*-0x1+-0x11cc+0x1*0xe3a],this['transformD'+'ata']['halfExtent'+'s'][0x77e+-0xc5*-0x28+-0x2645],this['transformD'+'ata']['halfExtent'+'s'][-0x22*-0xe2+0x211f+-0x3f21]);return;}const _0x2dc9b9=this['getProp']('x'),_0x3125fb=this['getProp']('y'),_0x5e2678=this['getProp']('z'),_0x5bb7ea=this['getProp']('scale_0'),_0xa04803=this['getProp']('scale_1'),_0x4e001e=this['getProp']('scale_2'),_0xd457d8=await(_0x32f698==null?void(0x183*-0x1+-0x24f5*-0x1+-0x2372*0x1):_0x32f698['calcAabb'](this['numSplats'],_0x2dc9b9,_0x3125fb,_0x5e2678,_0x5bb7ea,_0xa04803,_0x4e001e));_0x8e94d2['center']['set'](_0xd457d8['center'][0xefe+-0x1ded+0xeef],_0xd457d8['center'][-0x1bbb*-0x1+-0x1*-0xdfe+0x14*-0x216],_0xd457d8['center'][0x23d0+0x1*-0x135d+0x1071*-0x1]),_0x8e94d2['halfExtent'+'s']['set'](_0xd457d8['halfExtent'+'s'][-0x1*0x1549+0x8f4+0x4d*0x29],_0xd457d8['halfExtent'+'s'][0x62b+0x37*-0x4a+0x1*0x9bc],_0xd457d8['halfExtent'+'s'][-0x61*0x2e+0x18eb+-0x77b]);}['calcAabb'](_0x3f9d14,_0x2f39ba){let _0x45c3dc,_0x8414d2,_0x6cba7d,_0x5482a9,_0xfe1532,_0x4cb0ca,_0x580faa=!(-0x5*-0x434+-0x135d+-0x1a7);const _0x23ed41=this['getProp']('x'),_0x2d5a81=this['getProp']('y'),_0x12c6e6=this['getProp']('z'),_0x317eb4=this['getProp']('scale_0'),_0x3037ca=this['getProp']('scale_1'),_0x531974=this['getProp']('scale_2');for(let _0x4e7e1d=-0x116d*-0x1+-0x167e+-0x1*-0x511;_0x4e7e1d<this['numSplats'];++_0x4e7e1d){if(_0x2f39ba&&!_0x2f39ba(_0x4e7e1d))continue;const _0x111cd4=_0x23ed41[_0x4e7e1d],_0x3143a3=_0x2d5a81[_0x4e7e1d],_0x513d91=_0x12c6e6[_0x4e7e1d],_0x171d56=Math['max'](_0x317eb4[_0x4e7e1d],_0x3037ca[_0x4e7e1d],_0x531974[_0x4e7e1d]);if(!isFinite(_0x111cd4)||!isFinite(_0x3143a3)||!isFinite(_0x513d91)||!isFinite(_0x171d56))continue;const _0x3749d7=(0x16b1+0x626*-0x1+-0x1089)*Math['exp'](_0x171d56);_0x580faa?(_0x580faa=!(0x89b*-0x1+-0x156b*0x1+0x1e07),_0x45c3dc=_0x111cd4-_0x3749d7,_0x8414d2=_0x3143a3-_0x3749d7,_0x6cba7d=_0x513d91-_0x3749d7,_0x5482a9=_0x111cd4+_0x3749d7,_0xfe1532=_0x3143a3+_0x3749d7,_0x4cb0ca=_0x513d91+_0x3749d7):(_0x45c3dc=Math['min'](_0x45c3dc,_0x111cd4-_0x3749d7),_0x8414d2=Math['min'](_0x8414d2,_0x3143a3-_0x3749d7),_0x6cba7d=Math['min'](_0x6cba7d,_0x513d91-_0x3749d7),_0x5482a9=Math['max'](_0x5482a9,_0x111cd4+_0x3749d7),_0xfe1532=Math['max'](_0xfe1532,_0x3143a3+_0x3749d7),_0x4cb0ca=Math['max'](_0x4cb0ca,_0x513d91+_0x3749d7));}return _0x580faa||(_0x3f9d14['center']['set']((_0x45c3dc+_0x5482a9)*(-0x20a3+0x5d1+-0xd69*-0x2+0.5),(_0x8414d2+_0xfe1532)*(-0x35b*0x7+-0x1*-0x1ab5+-0x338+0.5),(_0x6cba7d+_0x4cb0ca)*(0x5a*-0x62+0x2*-0x126b+0x474a+0.5)),_0x3f9d14['halfExtent'+'s']['set']((_0x5482a9-_0x45c3dc)*(-0x4d6*0x5+0x1b67+-0x339+0.5),(_0xfe1532-_0x8414d2)*(-0x1d*-0x10f+0x1379+-0x322c+0.5),(_0x4cb0ca-_0x6cba7d)*(0x112*0x4+0x1f78+-0x23c0+0.5))),!_0x580faa;}['yieldToMai'+'n'](){var _0x2d602f;return(_0x2d602f=globalThis['scheduler'])!=null&&_0x2d602f['yield']?globalThis['scheduler']['yield']():new Promise(_0x1b5f20=>{setTimeout(_0x1b5f20,-0xe*0x1f5+0x1dfa+-0x294);});}['calcAabbEx'+'act'](_0x344a0d,_0x4d51b2){const _0xc6612c=new D(),_0x2332b8=new le(),_0x435118=new D(),_0x3b657f=this['createIter'](_0xc6612c,_0x2332b8,_0x435118);let _0x2277cf=!(0x1060*0x1+0x1f77+-0x2fd7);for(let _0x42d0b0=0x178*-0x1+-0x2342+0x24ba;_0x42d0b0<this['numSplats'];++_0x42d0b0)_0x4d51b2&&!_0x4d51b2(_0x42d0b0)||(_0x3b657f['read'](_0x42d0b0),_0x2277cf?(_0x2277cf=!(-0x1*-0x1bb6+-0x21f+-0x1996),qn['calcSplatA'+'abb'](_0x344a0d,_0xc6612c,_0x2332b8,_0x435118)):(qn['calcSplatA'+'abb'](mg,_0xc6612c,_0x2332b8,_0x435118),_0x344a0d['add'](mg)));return!_0x2277cf;}async['getCenters'](_0x313186){const _0x5d551f=this['getProp']('x'),_0x4670fb=this['getProp']('y'),_0x4e19c0=this['getProp']('z');for(let _0x2e9daf=0x853+0x7c9*0x1+-0x101c;_0x2e9daf<this['numSplats'];++_0x2e9daf)_0x313186[_0x2e9daf*(0x39a+-0x256b+0x2*0x10ea)+(0x1*0x1ffd+-0x2a2+-0x1d5b)]=_0x5d551f[_0x2e9daf],_0x313186[_0x2e9daf*(-0x4b1+0x1d5a+-0xa*0x277)+(-0x8e0*0x1+0x2*0x167+0x613)]=_0x4670fb[_0x2e9daf],_0x313186[_0x2e9daf*(-0x9ef*-0x2+-0xc6*-0x20+-0x2c9b*0x1)+(-0xa1f*0x3+-0x21d1+0x4030)]=_0x4e19c0[_0x2e9daf],_0x2e9daf%xf===0xc5*-0x15+0x69b*-0x5+0x8*0x626&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x47ea6a;if((_0x47ea6a=this['transformD'+'ata'])!=null&&_0x47ea6a['muT'])return this['transformD'+'ata']['muT'];const _0x296211=this['getProp']('t');return _0x296211?new Float32Array(_0x296211):void(-0x24*0x8e+0x13db+0x1d);}async['getTScale'](){const _0x50831f=this['getProp']('t_scale');if(!_0x50831f)return;const _0x341ea2=new Float32Array(this['numSplats']);for(let _0x448919=-0x1*0x407+0x1cb7+-0x18b0;_0x448919<this['numSplats'];++_0x448919)_0x341ea2[_0x448919]=Math['exp'](_0x50831f[_0x448919]),_0x448919%xf===-0x18d9*0x1+0x1bc1+-0x2e8&&await this['yieldToMai'+'n']();return _0x341ea2;}async['getMotion'](_0x1fd7d0){const _0x268263=this['getProp']('motion_0'),_0x2c0b8d=this['getProp']('motion_1'),_0x2ecc60=this['getProp']('motion_2');if(!(!_0x268263||!_0x2c0b8d||!_0x2ecc60)){for(let _0x2dc981=0x293*0x2+0xc2b*0x1+-0x1151*0x1;_0x2dc981<this['numSplats'];++_0x2dc981)_0x1fd7d0[_0x2dc981*(-0x1*0x45e+-0x1443+0x18a4)+(0xc9f*0x1+-0x23bf*-0x1+-0x97*0x52)]=_0x268263[_0x2dc981],_0x1fd7d0[_0x2dc981*(-0xc6+0xbf2+-0xb29)+(-0xaa5+0x11c4+-0x71e)]=_0x2c0b8d[_0x2dc981],_0x1fd7d0[_0x2dc981*(0xc19*-0x1+-0x10f*0x9+0x15a3)+(0x153f+-0xca7+-0x9d*0xe)]=_0x2ecc60[_0x2dc981],_0x2dc981%xf===0x2*-0x10d4+-0x2353+-0x44fb*-0x1&&await this['yieldToMai'+'n']();}}['getTimeInd'+'ex'](){var _0x28f680;if((_0x28f680=this['transformD'+'ata'])!=null&&_0x28f680['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x36bd0c=this['getProp']('time_index');if(_0x36bd0c)return new Float32Array(_0x36bd0c);}['calcFocalP'+'oint'](_0x22a702,_0x15ed0b){const _0x561f7c=this['getProp']('x'),_0xc085ac=this['getProp']('y'),_0x4e6768=this['getProp']('z'),_0x5eedb0=this['getProp']('scale_0'),_0x1f2b1b=this['getProp']('scale_1'),_0x4d7d22=this['getProp']('scale_2');_0x22a702['x']=0x1c16+-0x14b3+-0x763,_0x22a702['y']=0x1cd1+0x194f*-0x1+0x382*-0x1,_0x22a702['z']=-0x1*0x16e5+-0x14b*0x10+-0x3*-0xe87;let _0x20d6e6=0x1*-0x1cf3+0x1d4b+0x4*-0x16;for(let _0x52401e=0x7e1*-0x3+-0x1c2e+0x5*0xa5d;_0x52401e<this['numSplats'];++_0x52401e){if(_0x15ed0b&&!_0x15ed0b(_0x52401e))continue;const _0x22bdd9=_0x561f7c[_0x52401e],_0x1fec14=_0xc085ac[_0x52401e],_0x38a5d9=_0x4e6768[_0x52401e];if(!isFinite(_0x22bdd9)||!isFinite(_0x1fec14)||!isFinite(_0x38a5d9))continue;const _0x31cb6b=(0x1de3*0x1+0x9*-0x388+-0x51*-0x6)/(-0x6*0x2ed+0x185+0x100a+Math['exp'](Math['max'](_0x5eedb0[_0x52401e],_0x1f2b1b[_0x52401e],_0x4d7d22[_0x52401e])));_0x22a702['x']+=_0x22bdd9*_0x31cb6b,_0x22a702['y']+=_0x1fec14*_0x31cb6b,_0x22a702['z']+=_0x38a5d9*_0x31cb6b,_0x20d6e6+=_0x31cb6b;}_0x22a702['mulScalar']((0x109*0x23+0xb83*-0x3+-0x1*0x1b1)/_0x20d6e6);}['renderWire'+'frameBound'+'s'](_0x3103a2,_0x1f8362){const _0x566600=new D(),_0x37df6e=new le(),_0x1e8963=new D(),_0x2162c3=new D(),_0x52ee6d=new D(),_0x3d198b=this['createIter'](_0x566600,_0x37df6e,_0x1e8963);for(let _0x4fef7b=-0x1396+-0x246e*-0x1+-0x10d8*0x1;_0x4fef7b<this['numSplats'];++_0x4fef7b)_0x3d198b['read'](_0x4fef7b),_g(za,_0x566600,_0x37df6e),za['mul2'](_0x1f8362,za),_0x2162c3['set'](_0x1e8963['x']*-(-0x301*-0x4+-0x18fe+0x115*0xc),_0x1e8963['y']*-(0x156d+-0x1*-0x1917+0x1741*-0x2),_0x1e8963['z']*-(0x2625+0xfcf+-0x565*0xa)),_0x52ee6d['set'](_0x1e8963['x']*(0xe*-0x162+0x2a3+0x10bb),_0x1e8963['y']*(-0x5*0x545+0x147a*0x1+-0xd7*-0x7),_0x1e8963['z']*(0xa6*0x2b+0xb2*0xd+-0x24ea)),_0x3103a2['immediate']['drawWireAl'+'ignedBox'](_0x2162c3,_0x52ee6d,KA,!(0x232c+0x559*-0x2+0x187a*-0x1),_0x3103a2['defaultDra'+'wLayer'],za);}get['isCompress'+'ed'](){return!(-0x1b4c+-0x1*0x413+0x1f60);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x298adb=0x2467+0x1*-0xdb7+-0x8*0x2d6;_0x298adb<-0x1*-0x24bc+0x26a1+-0x4b30;++_0x298adb)if(!this['getProp']('f_rest_'+_0x298adb))return _0x298adb;return-0x1*-0x244d+-0x513*-0x1+-0xc7*0x35;})())]??0x1009+-0x1bbf+-0xbb6*-0x1;}['calcMorton'+'Order'](){const _0x33130b=_0x55ebcf=>{let _0x208c83=_0x55ebcf[-0x558+-0x20c2+0x261a*0x1],_0x36e8d2=_0x55ebcf[-0x5*-0x3bb+-0x34c*-0x8+-0x1*0x2d07];for(let _0x4660a5=0x3*-0x8b2+0x12f4+0x723;_0x4660a5<_0x55ebcf['length'];_0x4660a5++)_0x55ebcf[_0x4660a5]<_0x208c83&&(_0x208c83=_0x55ebcf[_0x4660a5]),_0x55ebcf[_0x4660a5]>_0x36e8d2&&(_0x36e8d2=_0x55ebcf[_0x4660a5]);return{'min':_0x208c83,'max':_0x36e8d2};},_0x38679b=(_0x4e19fb,_0x4a6146,_0xc178ab)=>{const _0x329a4f=_0x580fe9=>(_0x580fe9&=-0x45b+0x666+0x1f4,_0x580fe9=(_0x580fe9^_0x580fe9<<-0x1a9b+0xcd+0x19de)&-0x115b73bd5+-0x1866c842c+0x20*0x1cd91e08,_0x580fe9=(_0x580fe9^_0x580fe9<<-0xb08*-0x1+0x1fc8+-0x1564*0x2)&-0x353f822+-0x45ec698+-0x20bcb*-0x53b,_0x580fe9=(_0x580fe9^_0x580fe9<<-0x868+-0x2*-0x3da+0xb8)&-0x14539*0x1c3+-0x5845a82+-0x2b35fac*-0x4,_0x580fe9=(_0x580fe9^_0x580fe9<<0x168*0x3+-0x118b*-0x1+0x1*-0x15c1)&-0x117ed3a3+0x172ee*-0x83+-0x1b6135b6*-0x1,_0x580fe9);return(_0x329a4f(_0xc178ab)<<-0x11c6+0x145b+-0x1*0x293)+(_0x329a4f(_0x4a6146)<<-0x17f3+0x1154+0x6a0)+_0x329a4f(_0x4e19fb);},_0x4c4a45=this['getProp']('x'),_0x2abc4f=this['getProp']('y'),_0x2baf22=this['getProp']('z'),{min:_0x3a21f1,max:_0x2364f7}=_0x33130b(_0x4c4a45),{min:_0x1d44bd,max:_0x19d067}=_0x33130b(_0x2abc4f),{min:_0x176541,max:_0x43de5}=_0x33130b(_0x2baf22),_0xa8e52e=_0x3a21f1===_0x2364f7?-0x18b*-0x6+-0x6c9+-0x3*0xd3:(-0x3*0x8d2+0x1*-0xd86+0x1*0x2bfc)/(_0x2364f7-_0x3a21f1),_0x5aff04=_0x1d44bd===_0x19d067?0x77*0x4c+-0x11a8+-0x11ac:(-0x1*0x116f+-0x1021+0x964*0x4)/(_0x19d067-_0x1d44bd),_0x754def=_0x176541===_0x43de5?-0x84*0x1b+0x815*0x1+0x5d7:(-0x16*0x44+0x1bb*0x11+-0x1393)/(_0x43de5-_0x176541),_0x3b0c74=new Map();for(let _0x4ca4a2=0x25*0x73+-0x18e8+0x849;_0x4ca4a2<this['numSplats'];_0x4ca4a2++){const _0x1ca6b9=Math['min'](0x128a+-0xa33*0x1+-0x458,Math['floor']((_0x4c4a45[_0x4ca4a2]-_0x3a21f1)*_0xa8e52e)),_0x2d924a=Math['min'](0x2625+0xd53*0x1+-0x2f79,Math['floor']((_0x2abc4f[_0x4ca4a2]-_0x1d44bd)*_0x5aff04)),_0x148279=Math['min'](-0x1*0x9d3+0x1b6*-0x1+0x1*0xf88,Math['floor']((_0x2baf22[_0x4ca4a2]-_0x176541)*_0x754def)),_0x1c7b5d=_0x38679b(_0x1ca6b9,_0x2d924a,_0x148279),_0x26cfd7=_0x3b0c74['get'](_0x1c7b5d);_0x26cfd7?_0x26cfd7['push'](_0x4ca4a2):_0x3b0c74['set'](_0x1c7b5d,[_0x4ca4a2]);}const _0x2eee72=Array['from'](_0x3b0c74['keys']())['sort']((_0x4395a4,_0x207a8e)=>_0x4395a4-_0x207a8e),_0x1e6008=new Uint32Array(this['numSplats']);let _0x3e1972=0x0+-0x1364+0x1364;for(let _0x189d0e=-0x18f0+0x224+0x4*0x5b3;_0x189d0e<_0x2eee72['length'];++_0x189d0e){const _0x2d6642=_0x3b0c74['get'](_0x2eee72[_0x189d0e]);for(let _0x2277db=0x1ef6+0xa1c+-0x1489*0x2;_0x2277db<_0x2d6642['length'];++_0x2277db)_0x1e6008[_0x3e1972++]=_0x2d6642[_0x2277db];}return _0x1e6008;}['reorder'](_0x51fe7f){const _0x4aee6f=new Map(),_0x5130bf=_0xa4826=>{if(_0x4aee6f['has'](_0xa4826)){const _0x56c20f=_0x4aee6f['get'](_0xa4826);return _0x4aee6f['delete'](_0xa4826),_0x56c20f;}return new ArrayBuffer(_0xa4826);},_0x200f31=_0x3abe50=>{_0x4aee6f['set'](_0x3abe50['byteLength'],_0x3abe50);},_0x13e242=_0x1290ec=>{const _0x4f49dc=new _0x1290ec['constructo'+'r'](_0x5130bf(_0x1290ec['byteLength']));for(let _0x70cc04=-0x9ef+0x6*-0x3a1+0x1fb5;_0x70cc04<_0x51fe7f['length'];_0x70cc04++)_0x4f49dc[_0x70cc04]=_0x1290ec[_0x51fe7f[_0x70cc04]];return _0x200f31(_0x1290ec['buffer']),_0x4f49dc;};this['elements']['forEach'](_0x497e25=>{_0x497e25['properties']['forEach'](_0x288f61=>{_0x288f61['storage']&&(_0x288f61['storage']=_0x13e242(_0x288f61['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}async function QA(){const _0x287e49=new Float32Array(0x24e*-0x7+-0xe2b+-0x35e*-0x9);new Int32Array(_0x287e49['buffer']);let _0x5773d5=-0x3b9+-0xaf*0x35+0x27f4,_0x9a6822={};self['onmessage']=async _0x54fce4=>{const {data:_0x49a353}=_0x54fce4;switch(_0x49a353['type']){case'initWorker':break;case'appendGSpl'+'atData':_0xadb2a(_0x49a353['properties'],_0x49a353['timeIndex'],_0x49a353['timeOption']);break;case'releaseSeq'+'Data':_0x11996f(_0x49a353['index']);break;case'releaseAll'+'SeqData':_0xaea92a();break;case'destroyWor'+'ker':_0x4f9a72();break;}};const _0xb00f1b=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x27f386=-0x10e8+0x9b3+0x735;_0x27f386<0xbc*-0x2f+-0x145+0x23f6;++_0x27f386)if(!_0x9a6822['f_rest_'+_0x27f386])return _0x27f386;return-0xb*-0x29c+0x1830+-0x34b7;})())]??-0x4*-0x1+0x1de*0x5+-0x10a*0x9),_0xadb2a=(_0x526484,_0x30c575,_0x64dbba)=>{var _0x37bf70,_0x449dc5;_0x5773d5+=(((_0x37bf70=_0x526484['position'])==null?void(0xfb0+-0x1bff+0xc4f):_0x37bf70['length'])??0xc6e+-0x24b*-0xd+-0x2a3d)/(0x15de+-0x1*-0x1c87+0x3262*-0x1),console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20append'+'GSplatData'+'\x20numSplats',_0x5773d5,(((_0x449dc5=_0x526484['position'])==null?void(-0x44c*0x5+-0x47*0x68+0x4*0xc95):_0x449dc5['length'])??0x36*0x89+-0x1fff*-0x1+-0x3ce5)/(-0x81+-0x4b*0xe+-0x1*-0x49e));const _0x367536=Object['keys'](_0x526484);for(let _0x37643d=-0x24f8+-0x5b6*0x3+0x361a;_0x37643d<_0x367536['length'];_0x37643d++){const _0x30c2d0=_0x367536[_0x37643d],_0x244dee=_0x526484[_0x30c2d0],_0x3458bc=_0x9a6822[_0x30c2d0]??new Float32Array(0x6*-0x59+-0xae*0x1+0x2c4);if(_0x244dee){let _0x3eb060=null;switch(_0x30c2d0){case'position':_0x3eb060=new Float32Array(_0x5773d5*(-0x1711+0x136e+-0x3a6*-0x1));break;case'color_opac'+'ity':_0x3eb060=new Uint16Array(_0x5773d5*(-0x804+-0x59e*-0x4+-0xe70));break;case'scale':_0x3eb060=new Uint16Array(_0x5773d5*(-0x2*0x12af+-0x1*0x1e36+0xb*0x625));break;case'motion':_0x3eb060=new Float32Array(_0x5773d5*(0x15e4+0x5*-0x54b+-0x1*-0x496));break;case'rotation':_0x3eb060=new Float32Array(_0x5773d5*(0x268b+-0xc7*-0x7+-0x2bf9));break;default:_0x3eb060=new Float32Array(_0x5773d5);break;}_0x3eb060['set'](_0x3458bc,-0x10c*0x17+-0x2562+-0x1*-0x3d76),_0x3eb060['set'](_0x244dee,_0x3458bc['length']),_0x9a6822[_0x30c2d0]=_0x3eb060;}}const _0x14468f={};Object['keys'](_0x9a6822)['forEach'](_0x20a6d9=>{_0x20a6d9==='scale'||_0x20a6d9==='color_opac'+'ity'?_0x14468f[_0x20a6d9]=new Uint16Array(_0x9a6822[_0x20a6d9]['buffer']['slice']()):_0x14468f[_0x20a6d9]=new Float32Array(_0x9a6822[_0x20a6d9]['buffer']['slice']());});const _0x3c4b02=Object['keys'](_0x14468f)['map'](_0x538555=>_0x14468f[_0x538555]['buffer']),_0x196741=_0x32c72f(),_0xcbfad8=Object['keys'](_0x196741)['map'](_0x5a90b9=>_0x196741[_0x5a90b9]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x14468f,'transformData':_0x196741},_0x3c4b02['concat'](_0xcbfad8));},_0x32c72f=()=>{const _0x18287c=_0x9a6822['position']['length']/(-0x23f7+0x1eb*0x1+0x1*0x220f),_0x5449ff=_0x9a6822['position'],_0x42c08a=_0x9a6822['scale'],_0x4e1bfb=_0x9a6822['rotation'],_0x1ae342=_0x9a6822['motion'],_0x4a7302=_0x9a6822['t'],_0x2eaf41=_0x9a6822['t_scale'],_0x4b39e7=_0x9a6822['time_index'],_0x23466b=_0x9a6822['color_opac'+'ity'],_0x17d171=(_0x4a7302==null?void(0x6*0x211+-0x3*0x7cf+-0x3ad*-0x3):_0x4a7302['length'])>0xd*0xb+0x354+-0x5*0xc7;let _0x430e5c=null,_0x5e4efb=null,_0x520325=null,_0x235034=null;_0x17d171&&(_0x5e4efb=new Float32Array(_0x18287c*(0x2*-0x9f1+0x1f32+-0xb4d)),_0x235034=new Float32Array(_0x18287c),_0x430e5c=new Float32Array(_0x1ae342['buffer']['slice']()),_0x520325=new Float32Array(_0x1ae342['buffer']['slice']()));const _0x57b4e9=new Float32Array(_0x5449ff['buffer']['slice']()),_0x6fee25=new Float32Array(_0x5449ff['buffer']['slice']()),_0x455ee2=new Uint16Array(_0x23466b['buffer']['slice']()),_0x12a5c6=new Uint16Array(_0x42c08a['buffer']['slice']()),_0x252b42=new Float32Array(_0x4e1bfb['buffer']['slice']());for(let _0x41ffb7=0x1d4a*-0x1+-0xdd2+0x2b1c;_0x41ffb7<_0x18287c;++_0x41ffb7)_0x17d171&&_0x5e4efb&&_0x235034&&(_0x235034[_0x41ffb7]=_0x2eaf41?Math['exp'](_0x2eaf41[_0x41ffb7]):-0xd*-0x10f+0x295+0x8*-0x20b,_0x5e4efb[_0x41ffb7*(-0x14a*0x10+-0x1d47+0x31ea)+(-0x1b52+-0x144f+0x2fa1*0x1)]=_0x4a7302?_0x4a7302[_0x41ffb7]:0x223c+-0x13*-0x1aa+-0x41da,_0x5e4efb[_0x41ffb7*(-0x10a3+0x9b0+-0x1b*-0x42)+(0x73+-0x1c17+-0x1ba5*-0x1)]=_0x235034[_0x41ffb7]);const _0x25c12a=_0x23bda3();let _0x22e521={'dataColor':_0x455ee2,'dataCenters':_0x6fee25,'dataPosition':_0x57b4e9,'dataScale':_0x12a5c6,'dataRotation':_0x252b42,..._0x25c12a};return _0x17d171&&(_0x22e521={..._0x22e521,'dataMotion':_0x430e5c,'dataTime':_0x5e4efb,'motion':_0x520325,'tScaleArray':_0x235034,'muT':new Float32Array(_0x4a7302),'timeIndex':new Float32Array(_0x4b39e7)}),_0x22e521;},_0xe886f=_0x1b9872=>{const _0x4e7b7b=[];for(let _0x58c466=0x20f5+-0x6c1+0x204*-0xd;_0x58c466<_0x1b9872;++_0x58c466)_0x4e7b7b['push'](_0x9a6822['f_rest_'+_0x58c466]);return _0x4e7b7b;},_0x23bda3=()=>{const _0x4f50a4=_0xb00f1b();if(_0x4f50a4<=-0x56b*-0x2+0xe18+0x2*-0xc77)return{};const _0x511f09=_0x9a6822['x']['length'],_0x2e9280=new Uint32Array(_0x511f09*(0x175a+0x121*0x11+-0x2a87*0x1)),_0x498389=new Uint32Array(_0x511f09*(0x193e+-0x1*-0x7f3+-0x212d)),_0x1f1c2b=new Uint32Array(_0x511f09*(-0x23f5+-0x1*-0x869+0x38*0x7e)),_0x3fd103=new Uint32Array(_0x511f09*(0xdd2+-0x1c94+0xec6)),_0x636a8={0x1:0x3,0x2:0x8,0x3:0xf}[_0x4f50a4],_0x49276b=_0xe886f(_0x636a8*(0x96f*-0x1+0xd29+0x3b7*-0x1)),_0x20eebb=0x178a+0x4a7+0x2*-0xa19,_0x4536a2=0x5*0x175+0x1a*0x151+-0x2584,_0x3e8fd2=new Float32Array(0x5*-0x433+-0x1*-0x34a+0x11b6*0x1),_0x11403b=new Uint32Array(_0x3e8fd2['buffer']),_0x19a2ed=new Array(_0x636a8*(-0x1039+0xa7*-0xc+-0x4d0*-0x5))['fill'](-0x19*-0xb1+0x1f63+-0x30ac);for(let _0x589c2d=0x3*-0xa97+0xae8+0x14dd;_0x589c2d<_0x511f09;++_0x589c2d){for(let _0xb759ca=0x12*-0x115+0x22d*-0xb+-0x2b69*-0x1;_0xb759ca<_0x636a8;++_0xb759ca)_0x19a2ed[_0xb759ca*(-0x1*0xa47+0x406*0x8+-0x15e6)]=_0x49276b[_0xb759ca][_0x589c2d],_0x19a2ed[_0xb759ca*(0x12fe+-0x1c84+0x1*0x989)+(-0x66*-0x1+-0xe1d+0xdb8)]=_0x49276b[_0xb759ca+_0x636a8][_0x589c2d],_0x19a2ed[_0xb759ca*(0x5c*-0x2d+-0x23a8+0x33d7)+(-0x1f5f+-0x22d*-0xd+-0x2c*-0x12)]=_0x49276b[_0xb759ca+_0x636a8*(0x1*-0x1661+-0x207e+-0x15*-0x29d)][_0x589c2d];let _0x1fdfe2=_0x19a2ed[0x5eb+-0x45*0x1+0x2*-0x2d3];for(let _0x46ea8d=-0x822+-0x1680+0x1ea3;_0x46ea8d<_0x636a8*(0x33b*-0x1+-0xf*0x113+-0x5*-0x3df);++_0x46ea8d)_0x1fdfe2=Math['max'](_0x1fdfe2,Math['abs'](_0x19a2ed[_0x46ea8d]));if(_0x1fdfe2!==-0x598+-0xc94+0x122c*0x1){for(let _0x1ffd53=-0xde3+-0x1*0x11de+0x1fc1;_0x1ffd53<_0x636a8;++_0x1ffd53)_0x19a2ed[_0x1ffd53*(-0x5*-0x36e+0x4*0x31e+-0x1d9b)+(-0xa9*-0x1f+0x19f9+-0x2e70)]=Math['max'](0xd*0x1c9+-0x2b*0x6f+0x2*-0x248,Math['min'](_0x20eebb,Math['floor']((_0x19a2ed[_0x1ffd53*(0x1488+-0x20b7+0xc32)+(-0x782+0x3cf*-0x1+0x1*0xb51)]/_0x1fdfe2*(-0x209b+-0x20a4+0x413f+0.5)+(0x22b7+-0x430*0x8+-0x137+0.5))*_0x20eebb+(0x1*0x251+0x1*0x1dc8+-0x1*0x2019+0.5)))),_0x19a2ed[_0x1ffd53*(0xd*-0x71+0x338+0x288)+(-0x24f0+0x34+0xf*0x273)]=Math['max'](0x1*-0xd13+0x15f9+0x8e6*-0x1,Math['min'](_0x4536a2,Math['floor']((_0x19a2ed[_0x1ffd53*(-0x1a2a+0x26*-0xf1+-0x1*-0x3df3)+(0x238c+0x1b4e+0x3ed9*-0x1)]/_0x1fdfe2*(0x2*0x1289+-0x7e*-0x27+-0x3844+0.5)+(-0x74c*-0x2+-0x1ad6+0xc3e+0.5))*_0x4536a2+(0x55c+0x10ba*0x1+-0x16*0x101+0.5)))),_0x19a2ed[_0x1ffd53*(0x2605*0x1+-0xda*-0x17+-0x3998)+(0x1175*0x1+0x1b51+-0xeec*0x3)]=Math['max'](0xd35+0x4f*-0x5b+-0x770*-0x2,Math['min'](_0x20eebb,Math['floor']((_0x19a2ed[_0x1ffd53*(-0x1e2*0x1+0x173*-0x16+0x1*0x21c7)+(-0x1*0xb9e+0x1*0x82f+0x371)]/_0x1fdfe2*(-0xae0+0x6d*0x39+-0xd65+0.5)+(-0x20+-0xa8e+0xaae+0.5))*_0x20eebb+(-0x6e*-0x3b+0x1*0xea4+-0x27fe+0.5))));_0x3e8fd2[0xff7+-0x1fd8*-0x1+0x2fcf*-0x1]=_0x1fdfe2,_0x2e9280[_0x589c2d*(0x699+-0x18ea+0x1255)+(0x998+0xd01*0x2+0x3e*-0x93)]=_0x11403b[-0x11b*-0x1f+0x18bb*-0x1+-0x98a],_0x2e9280[_0x589c2d*(-0x5ba*-0x5+-0x5*0x446+-0x740)+(-0x101f+0x185e*-0x1+-0x143f*-0x2)]=_0x19a2ed[-0x1*0x1a2e+0x682+0x13ac*0x1]<<-0xc81+0x16af+-0x2f*0x37|_0x19a2ed[-0x79f+-0x11cd+0x196d]<<0x60f*-0x6+-0xd72+0x31d7|_0x19a2ed[-0x1c8+0x21a7*0x1+-0x1fdd],_0x2e9280[_0x589c2d*(0x31*0x9+0x608+-0x7*0x11b)+(0x1239+0xae*-0x23+-0x593*-0x1)]=_0x19a2ed[-0x21b4+0x2f9*0x1+0x2*0xf5f]<<0x1b*-0x75+0x13bf+0x177*-0x5|_0x19a2ed[0xfef+0xc1e+-0x1*0x1c09]<<-0x2328+-0x252c+0x485f|_0x19a2ed[-0x1f86+-0x3*0x3fd+0x2b82*0x1],_0x2e9280[_0x589c2d*(-0x362+-0x7*-0x3a8+0x6*-0x3b3)+(0x2fa*-0x7+0x1a1b+-0x2*0x2a1)]=_0x19a2ed[-0x964+0x2f3+0x677]<<0xf95*0x1+0x537+-0x1*0x14b7|_0x19a2ed[-0x12b4+0x1a6b+-0x7b0]<<-0x1b71+0xa5*-0x18+0x2af4|_0x19a2ed[0xbbd+0x1898+-0x244d],_0x4f50a4>0x1*-0x18d9+-0x1594+0x3*0xf7a&&(_0x498389[_0x589c2d*(-0xce4+-0x7e*-0x20+0x16c*-0x2)+(-0x1c3*-0x13+0x1*-0x1293+-0xee6*0x1)]=_0x19a2ed[0x1c75+0x30*-0x2f+-0x139c]<<0xc43*-0x2+0x400*0x4+0x89b*0x1|_0x19a2ed[0x108b*-0x1+-0xeae*-0x1+0x1e7]<<0xb*0x32+-0x2*-0x20e+-0x637|_0x19a2ed[-0x222f+0x3*-0x23+-0x1*-0x22a3],_0x498389[_0x589c2d*(-0x34*0x7c+0x182a+0x10a)+(-0xe90+0xe4*-0x29+0x3315)]=_0x19a2ed[-0x56*0x4+-0x87b+0x1*0x9df]<<-0x5*0x3bf+0x3*-0x690+0x2680|_0x19a2ed[0x5ef*0x1+0x3f8*-0x4+0x2*0x4ff]<<0x8d1+-0x21da+0x42e*0x6|_0x19a2ed[0x15*0x1a3+0xe7f+-0x30d0],_0x498389[_0x589c2d*(-0x2257*0x1+-0x386+0x25e1)+(0x1*0x17c5+0x2c*0x85+-0x2e9f)]=_0x19a2ed[0xb*0x21b+0x2327+-0x3a41*0x1]<<0x1938+0x1322+-0x7*0x653|_0x19a2ed[-0x1b2b+-0x7*0x85+0x1ede]<<0x1*-0x24a1+-0x1*-0x1645+0xe67|_0x19a2ed[-0x6b*-0x40+0x1679+-0x3128],_0x498389[_0x589c2d*(-0x4*-0x179+0x27b+0x1f*-0x45)+(-0x9ff*-0x3+0x16d2+-0x2*0x1a66)]=_0x19a2ed[0xeae+0x4*0x2ef+0xc*-0x232]<<-0x4a5*-0x2+-0x12bf*0x1+0x2*0x4c5|_0x19a2ed[-0x236*-0x6+0x7b9*-0x1+-0x2bc*0x2]<<0x39f+0x98e*0x4+-0x29cc|_0x19a2ed[-0x8e2+-0x14ff+-0x1df5*-0x1],_0x4f50a4>-0x9c7*0x3+0x2*0x841+0xcd5?(_0x1f1c2b[_0x589c2d*(-0x10b1*0x1+0x72f*0x2+0x257)+(0x1f17+-0xb*0x7+-0x1eca)]=_0x19a2ed[0x1b3e+0x214b+-0x92*0x6a]<<0x1884*-0x1+-0x71b*0x5+0x3c20|_0x19a2ed[0x336+0x5ad+-0x8cd]<<-0x1e28+-0x1716+-0x3549*-0x1|_0x19a2ed[0x2f*-0x70+0xf1*0x28+0x5ab*-0x3],_0x1f1c2b[_0x589c2d*(0x21f0+0x20c2+-0xa*0x6ab)+(-0x2279+0x1ac4+0x5e*0x15)]=_0x19a2ed[-0x1*-0x10af+0x1f40+0x25*-0x14b]<<-0x10c6+-0x1*-0x13bf+-0x94*0x5|_0x19a2ed[0x24*-0x104+0x45*-0x3c+0x34d5]<<0x26ad*-0x1+-0x3*-0x16f+0x63*0x59|_0x19a2ed[0xb*0xe8+-0x742*0x3+0xbe8],_0x1f1c2b[_0x589c2d*(-0x1c3d*0x1+0x1491+-0x3*-0x290)+(-0x1249+0xa66*-0x1+0x1cb1)]=_0x19a2ed[-0x2015+-0x5*-0x430+0xb40]<<0x15f6+0x1*0x1ccc+-0x32ad|_0x19a2ed[-0x23ca+-0x1ba2+0x3f88]<<-0x1*-0x1e04+0x886*-0x2+-0xced|_0x19a2ed[-0x2235+-0x6c8+0x291a],_0x1f1c2b[_0x589c2d*(0x1a*0x175+0x9a9*0x1+-0x2f87)+(0x1bb4+-0x19ce+-0x45*0x7)]=_0x19a2ed[-0x1d5*-0x5+0x5*0x1ee+-0x1b3*0xb]<<0x5*-0x4e5+-0x24*-0xad+0x3a|_0x19a2ed[0x1*-0x61f+-0xb51*-0x2+-0x1*0x1064]<<0x838+-0xb*-0x3a+-0xaab*0x1|_0x19a2ed[-0x1ba9+0xa34+0x1195],_0x3fd103[_0x589c2d*(0x21db+-0x1748+0x33*-0x35)+(-0xb7c+-0x873+-0x237*-0x9)]=_0x19a2ed[0xb*-0xbf+-0x21a+0x8*0x14e]<<0x25*0xc5+-0x1ba4+0xc*-0x10|_0x19a2ed[0x3d*-0x87+-0x2*-0x95b+-0xd97*-0x1]<<0x1bfb+0x22b*-0x3+-0x156f|_0x19a2ed[-0x3*0xa45+-0x1442+0x71*0x74],_0x3fd103[_0x589c2d*(0x240e+0x1576+-0x3980)+(0x24fa*0x1+0x1df+0x4*-0x9b6)]=_0x19a2ed[0x2448+-0x16b8+0x6b6*-0x2]<<0x7e*-0x13+-0x201c+0x298b|_0x19a2ed[0x1*-0x216a+-0x3*-0xb5f+-0x8e]<<0x3d*0x20+0x115d+-0x18f2|_0x19a2ed[0xf21+-0x98e+-0x56d*0x1],_0x3fd103[_0x589c2d*(-0x115c+0x171a+-0x5ba)+(0xd5*-0x8+0x1b6a+-0x53*0x40)]=_0x19a2ed[-0x2*0xe23+0x4*-0x5f+0x1de9]<<0x2*-0x463+-0x21cf*-0x1+-0x4*0x63d|_0x19a2ed[-0x3e6*0x1+-0x1159+0x1*0x1567]<<-0x962+0x1*-0xe2f+0x179c|_0x19a2ed[-0x1de9+0x419*0x1+-0x1*-0x19f9],_0x3fd103[_0x589c2d*(0x19*-0xf7+-0x97*0x1+0x18ba)+(0x1*-0x7+-0x1568+0x3d*0x5a)]=_0x19a2ed[-0x172b+0x71a+-0x3*-0x569]<<-0xd66+-0x53*0x47+0x2480|_0x19a2ed[-0x1d55+0x14*-0x4+0x3*0x9f0]<<-0x1c05+0x9e0+0x1230|_0x19a2ed[-0x1*0x2299+0x127d*0x1+-0x2*-0x824]):_0x1f1c2b[_0x589c2d]=_0x19a2ed[-0x14f6+-0x1a*-0x137+-0xa8b]<<0x1*0x184a+0x1c27*0x1+-0x345c|_0x19a2ed[0x10dd*-0x1+0x1e79+0x2*-0x6c3]<<0x2ed+-0x1*-0x9fa+0x1*-0xcdc|_0x19a2ed[0x1*-0xc0d+0xc*0x172+-0x534]);}}return{'sh1to3Data':_0x2e9280,'sh4to7Data':_0x498389,'sh8to11Data':_0x1f1c2b,'sh12to15Data':_0x3fd103};},_0x11996f=_0x4e3986=>{if(!_0x9a6822['time_index'])return;const _0x3a0a59=_0x9a6822['time_index']['findIndex'](_0x414ccd=>_0x414ccd===_0x4e3986);let _0x28d622=_0x9a6822['time_index']['findIndex']((_0x58e424,_0x41a22c)=>_0x58e424!==_0x4e3986&&_0x41a22c>_0x3a0a59);if(_0x28d622===-(-0x2450+0x7*0x4bd+0x326*0x1)&&_0x3a0a59===-(-0x1*-0xa59+-0x1c3f+0x1*0x11e7))return;_0x28d622===-(-0x2499+0xe0*0x11+-0x39f*-0x6)&&_0x3a0a59!==-(-0x45*-0x41+0x54e*0x3+0x16*-0x185)&&(_0x28d622=_0x9a6822['time_index']['length']),_0x5773d5-=_0x28d622-_0x3a0a59,console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20releas'+'eSeqData\x20n'+'umSplats',_0x5773d5,_0x28d622-_0x3a0a59);const _0x42df9f=Object['keys'](_0x9a6822);for(let _0x26e8c0=0xe59*-0x1+0xd1*0x16+0x19*-0x25;_0x26e8c0<_0x42df9f['length'];_0x26e8c0++){const _0x488480=_0x42df9f[_0x26e8c0],_0x591e32=_0x9a6822[_0x488480];if(_0x591e32){let _0x4c5d99=0x2f5*-0xd+0x1361+0x1311;switch(_0x488480){case'position':_0x4c5d99=-0x3b2+-0xf88+0x133d;break;case'color_opac'+'ity':_0x4c5d99=0x1d48+-0x29*-0xcd+0x2f5*-0x15;break;case'scale':_0x4c5d99=-0x2150+-0x1ddd+0x10*0x3f3;break;case'motion':_0x4c5d99=-0x1*-0x23f3+-0x1f6f+-0x481;break;case'rotation':_0x4c5d99=0x6f*-0x11+-0xfd4+-0x1*-0x1736;break;default:_0x4c5d99=0x23b2+0x377+-0x2728;break;}const _0x34e88c=new Float32Array(_0x5773d5*_0x4c5d99);_0x3a0a59>0x611+0x934+-0xf45*0x1?(_0x34e88c['set'](_0x591e32['subarray'](0x35*-0x1+0x3*0x19+-0x16,_0x3a0a59*_0x4c5d99),0x57f*0x7+-0x81e*-0x4+-0x575*0xd),_0x34e88c['set'](_0x591e32['subarray'](_0x28d622*_0x4c5d99),_0x3a0a59*_0x4c5d99)):_0x34e88c['set'](_0x591e32['subarray'](_0x28d622*_0x4c5d99),-0x1*-0xe09+0x742+-0x1*0x154b),_0x9a6822[_0x488480]=_0x34e88c;}}},_0xaea92a=()=>{const _0x1e330b=Object['keys'](_0x9a6822);for(let _0x52ad7d=0x212*-0x8+-0xc8*-0x26+0x4*-0x348;_0x52ad7d<_0x1e330b['length'];_0x52ad7d++){const _0x1c1cd8=_0x1e330b[_0x52ad7d];_0x9a6822[_0x1c1cd8]&&(_0x9a6822[_0x1c1cd8]=[]);}},_0x4f9a72=()=>{_0x9a6822={},_0x5773d5=-0x411*-0x3+-0x322+-0x911;};}class JA extends me{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+QA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x3378ec,_0x4508bc,_0x33df97,_0x3cc728=!(0x1b6*-0xd+0x1da1*0x1+-0x12*0x69)){var _0x2e83c2,_0x1922fc;const _0x47a3c0={};return _0x3378ec['elements'][0x1329*0x1+-0xc5e+-0x2f*0x25]['properties']['forEach'](_0x34dbaf=>{_0x47a3c0[_0x34dbaf['name']]=_0x34dbaf['storage'];}),_0x3cc728?(_0x2e83c2=this['worker'])==null||_0x2e83c2['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x47a3c0,'timeIndex':_0x4508bc,'timeOption':_0x33df97},_0x3378ec['elements'][-0x1ce9*-0x1+0x23b7+-0xbc*0x58]['properties']['map'](_0x15ff65=>_0x15ff65['storage']['buffer'])):(_0x1922fc=this['worker'])==null||_0x1922fc['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x47a3c0,'timeIndex':_0x4508bc,'timeOption':_0x33df97}),new Promise(_0x870c32=>{this['worker']['onmessage']=_0x4d6992=>{if(!this['worker'])return;const {data:_0xc482ab}=_0x4d6992;_0xc482ab['type']==='newAppendD'+'ata'&&_0x870c32(_0xc482ab);};});}async['releaseSeq'+'Data'](_0x4a3db4){var _0x264646;(_0x264646=this['worker'])==null||_0x264646['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x4a3db4});}async['releaseAll'+'SeqData'](){var _0x5ba525;(_0x5ba525=this['worker'])==null||_0x5ba525['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x5866af;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x5866af=this['worker'])==null||_0x5866af['terminate'](),this['worker']=null);}}const gc=new te(),gg=new le(),eC=new ie(0x6d*-0x23+-0x3b*0x67+0x26a5,-0x1c92+-0xb1c+0x27af,0x61*-0x1+0x20e8+-0x2087,0x3*-0xb92+-0x1*-0x1999+0x1*0x91d+0.4),Sg=-0x7*-0x774f+-0x15b4f*0x3+-0x3dc04*-0x1;class tC{constructor(_0x30a584,_0x10df63,_0x34ac8f,_0x12c9ac,_0x152da9,_0x574664){const _0x4c6b3e=_0x30a584['getProp']('position'),_0x2b7492=_0x30a584['getProp']('color_opac'+'ity'),_0x570c55=_0x30a584['getProp']('scale'),_0x2668c5=_0x30a584['getProp']('motion'),_0x33ca79=_0x30a584['getProp']('rotation');this['read']=_0x47ceb0=>{_0x10df63&&_0x10df63['set'](_0x4c6b3e[_0x47ceb0*(0x2ff*0x1+-0x542*0x1+-0x61*-0x6)+(-0x55d+-0x1e33+0x2390)],_0x4c6b3e[_0x47ceb0*(-0x150a+0x1f6b+-0xa5e)+(-0x16e*-0x14+-0x6ff*0x3+-0x8b*0xe)],_0x4c6b3e[_0x47ceb0*(0x4bf*0x3+0xcf0+-0x1b2a)+(-0x171a+-0x373+0xd*0x20b)]),_0x34ac8f&&_0x34ac8f['set'](_0x33ca79[_0x47ceb0*(0x2537+0x1c*-0x83+-0x16e0)+(-0x3*0x9a7+0x892*0x2+0xbd1)],_0x33ca79[_0x47ceb0*(-0xdfa+-0xc7*-0xb+0x570)+(0x2*0xee7+-0x73*0x1a+-0x121f)],_0x33ca79[_0x47ceb0*(0xb*0x152+0x1153*0x2+-0x1063*0x3)+(0x1*-0x4fc+0x11*-0x166+0x1cc4)]),_0x12c9ac&&_0x12c9ac['set'](_0x570c55[_0x47ceb0*(0xe07+0x1106+0x2*-0xf85)+(0x735*0x5+-0x28a*-0x3+-0x2ba7)],_0x570c55[_0x47ceb0*(0x1*-0x1973+-0xfd+0x8d1*0x3)+(-0x2251*0x1+-0x112d+0x1*0x337f)],_0x570c55[_0x47ceb0*(0x22f6*-0x1+-0x1fd6+-0x3*-0x1645)+(0x1*0x283+-0x58d+-0x34*-0xf)]),_0x574664&&_0x2668c5&&_0x574664['set'](_0x2668c5[_0x47ceb0*(-0x527*0x4+-0x932+0x1*0x1dd1)+(-0x1*0x5d1+0x2348+-0x1d77)],_0x2668c5[_0x47ceb0*(0x3*0x745+-0x24b+-0x1*0x1381)+(-0x1*-0x2647+0x1c16+-0x89*0x7c)],_0x2668c5[_0x47ceb0*(-0x17f9*0x1+-0x1176+-0x1*-0x2972)+(-0x1173*0x1+0x15e9+-0x26*0x1e)]),_0x152da9&&_0x152da9['set'](_0x2b7492[_0x47ceb0*(0x2029*-0x1+0x2554+-0x527)+(0x2*0x893+-0x200f+-0xb*-0x15b)],_0x2b7492[_0x47ceb0*(0x148*0x1a+-0x1*0xd39+-0x1413)+(-0x718+-0x1ec5*-0x1+-0x7e4*0x3)],_0x2b7492[_0x47ceb0*(0x384+-0x1bbc+0x16*0x11a)+(0x1051*0x2+-0x2534+-0x24a*-0x2)],_0x2b7492[_0x47ceb0*(-0x3e9+0x32f*-0x2+0x11*0x9b)+(0x1071+0x2117*-0x1+0x10a9*0x1)]);};}}const sC=(_0x26deae,_0x192b97,_0x527983)=>{gg['set'](_0x527983['x'],_0x527983['y'],_0x527983['z'],_0x527983['w'])['normalize'](),_0x26deae['setTRS'](_0x192b97,gg,D['ONE']);};class iC{constructor(_0x449758,_0x2feb64=[],_0x4d0acf=[]){h(this,'elements'),h(this,'properties'),h(this,'numSplats',-0x177*0x19+-0x1c66+-0x5*-0xd01),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x539aaf;(_0x539aaf=this['dataWorker'])==null||_0x539aaf['destroy'](),this['dataWorker']=null;});var _0x4ecad2,_0x1bce32,_0x17c0ba;this['elements']=_0x449758,this['properties']=_0x4d0acf,this['numSplats']=((_0x4ecad2=this['getElement']('vertex'))==null?void(-0x26c5+0x6d3*0x1+0x1ff2):_0x4ecad2['count'])??0xf4a*0x1+0xc*-0xbe+-0x56*0x13,this['comments']=_0x2feb64,this['is4D']=!!((_0x17c0ba=(_0x1bce32=this['getElement']('vertex'))==null?void(0x1b9b*-0x1+-0xfb1*0x1+0x2b4c):_0x1bce32['properties']['find'](_0x1f4c44=>_0x1f4c44['name']==='t'))!=null&&_0x17c0ba['storage']);}async['appendGSpl'+'atData'](_0x4b4ff6,_0x5eb072,_0x2e4e5a){var _0x33044a;let _0x3da5af=-0x688*0x1+-0x233e+0x29c6;for(let _0x69e19e=-0x1784+0x1f45+-0x7c1;_0x69e19e<_0x2e4e5a['length']&&_0x5eb072>_0x2e4e5a[_0x69e19e];_0x69e19e+=-0x13ec+-0xef+0x14dd)_0x3da5af=_0x69e19e/(-0x52*-0x4e+-0x6f*0x4f+0x947);this['dataWorker']||(this['dataWorker']=new JA(),await this['dataWorker']['appendGSpl'+'atData'](this,0x57f*0x7+-0xb7*-0x1+-0x2730,_0x2e4e5a));const _0x5c38c7=this['getElement']('vertex');_0x5c38c7&&(_0x5c38c7['count']=this['numSplats']);const _0x287fd8=await this['dataWorker']['appendGSpl'+'atData'](_0x4b4ff6,_0x3da5af,_0x2e4e5a,!(0x11cc*0x1+-0x9da*0x1+-0x71*0x12)),_0x4fd90d=_0x287fd8['properties'],_0x3d666e=((_0x33044a=this['getElement']('vertex'))==null?void(-0x1fc5+0x5*-0x1bd+0x2876):_0x33044a['properties'])??[];for(const _0x596955 in _0x4fd90d){const _0x716555=_0x3d666e['find'](_0x9a83bd=>_0x9a83bd['name']===_0x596955);_0x716555?_0x716555['storage']=_0x4fd90d[_0x596955]:_0x3d666e['push']({'type':'float','name':_0x596955,'storage':_0x4fd90d[_0x596955],'byteSize':0x4});}this['transformD'+'ata']=_0x287fd8['transformD'+'ata'],this['numSplats']=_0x4fd90d['position']['length']/(-0x381*0x5+0x2*0xb97+-0x5a6);}async['releaseSeq'+'Data'](_0x1ba045){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'leaseSeqDa'+'ta',_0x1ba045),this['dataWorker']['releaseSeq'+'Data'](_0x1ba045),this;}async['releaseAll'+'SeqData'](){var _0x3a5085;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'lease\x20all\x20'+'SeqData'),(_0x3a5085=this['dataWorker'])==null||_0x3a5085['releaseAll'+'SeqData'](),this;}['getProp'](_0x3f0383,_0x42f9d2='vertex'){var _0x17f1a1,_0x15ac8d;return(_0x15ac8d=(_0x17f1a1=this['getElement'](_0x42f9d2))==null?void(-0x1ada+-0x6*0x619+0x3f70):_0x17f1a1['properties']['find'](_0x3804a4=>_0x3804a4['name']===_0x3f0383))==null?void(0x4*0x89f+-0x1a0c*0x1+-0x870):_0x15ac8d['storage'];}['getElement'](_0x4fe7b8){return this['elements']['find'](_0x57c3f1=>_0x57c3f1['name']===_0x4fe7b8);}['createIter'](_0x6660a7,_0x39c538,_0x17a07c,_0x3290b6,_0x19a09b){return new tC(this,_0x6660a7,_0x39c538,_0x17a07c,_0x3290b6,_0x19a09b);}['calcAabb'](_0x183006,_0x50bd0c){let _0x13cea0=0x2*-0x915+-0x1*0xf4d+0x2177,_0x2bc497=0xf1*0xb+-0x40c+-0x64f,_0x5606de=0x1a05*-0x1+0x262d+-0x1*0xc28,_0x238784=-0x1*-0x1271+-0x4*0x93a+0x1*0x1277,_0x1370e5=0x1*0x2159+-0x2*0xbcd+-0x9bf,_0x352b6f=0xb*-0x9d+-0x325*-0x7+-0xf44,_0x1ade05=!(0xc47+-0x1*0x18d9+0xc92);const _0x568a96=this['getProp']('position'),_0x5da7e4=this['getProp']('scale');for(let _0x38a27f=0x1*0x1981+-0x1*0x10d+0x4*-0x61d;_0x38a27f<this['numSplats'];++_0x38a27f){if(_0x50bd0c&&!_0x50bd0c(_0x38a27f))continue;const _0x2ad2ac=_0x568a96[_0x38a27f*(0x7*0x239+-0x3a2+-0xbea)+(-0x12d7+0x1*-0x150b+-0x3fd*-0xa)],_0x2fcdd6=_0x568a96[_0x38a27f*(-0xa57+-0x11*0x15c+-0x2*-0x10bb)+(0x1cf6+-0x17b3+0x542*-0x1)],_0x20f857=_0x568a96[_0x38a27f*(0x487*0x5+-0x1*-0x40e+0x1*-0x1aae)+(-0x8e*-0x2c+0x1f2f*0x1+0x1b*-0x20f)],_0x1de9dd=Math['max'](_0x5da7e4[_0x38a27f*(0x1*0x4d5+0x1*0x2441+-0x2913)+(0x1ef2+-0x1408*-0x1+0x4b*-0xae)],_0x5da7e4[_0x38a27f*(-0x6f*0x1+0x82c+-0x2e*0x2b)+(0x2ce*-0x1+0x1*-0xe45+0x2*0x88a)],_0x5da7e4[_0x38a27f*(0x39b*-0x8+0x7*-0x3b5+0x36ce)+(0x3cc+-0x432*-0x2+0xc2e*-0x1)]);if(!isFinite(_0x2ad2ac)||!isFinite(_0x2fcdd6)||!isFinite(_0x20f857)||!isFinite(_0x1de9dd))continue;const _0x56873b=(0x1*-0x8cc+-0x1ff*0xf+0x26bf)*Math['exp'](_0x1de9dd);_0x1ade05?(_0x1ade05=!(0x200e+-0x31c+-0x1cf1),_0x13cea0=_0x2ad2ac-_0x56873b,_0x2bc497=_0x2fcdd6-_0x56873b,_0x5606de=_0x20f857-_0x56873b,_0x238784=_0x2ad2ac+_0x56873b,_0x1370e5=_0x2fcdd6+_0x56873b,_0x352b6f=_0x20f857+_0x56873b):(_0x13cea0=Math['min'](_0x13cea0,_0x2ad2ac-_0x56873b),_0x2bc497=Math['min'](_0x2bc497,_0x2fcdd6-_0x56873b),_0x5606de=Math['min'](_0x5606de,_0x20f857-_0x56873b),_0x238784=Math['max'](_0x238784,_0x2ad2ac+_0x56873b),_0x1370e5=Math['max'](_0x1370e5,_0x2fcdd6+_0x56873b),_0x352b6f=Math['max'](_0x352b6f,_0x20f857+_0x56873b));}return _0x1ade05||(_0x183006['center']['set']((_0x13cea0+_0x238784)*(0x1*0x1a56+0x1*0xd76+-0x27cc+0.5),(_0x2bc497+_0x1370e5)*(-0x9aa+-0x8*0x3a0+0x26aa+0.5),(_0x5606de+_0x352b6f)*(0x1765+0x14f6+-0x3*0xec9+0.5)),_0x183006['halfExtent'+'s']['set']((_0x238784-_0x13cea0)*(0x175b+-0x2*-0xf8f+-0x3679+0.5),(_0x1370e5-_0x2bc497)*(-0x553*0x2+-0x985+-0x6b9*-0x3+0.5),(_0x352b6f-_0x5606de)*(-0x1242+0x3*0xaaf+-0x141*0xb+0.5))),!_0x1ade05;}['yieldToMai'+'n'](){var _0x506813;return(_0x506813=globalThis['scheduler'])!=null&&_0x506813['yield']?globalThis['scheduler']['yield']():new Promise(_0x2c50df=>{setTimeout(_0x2c50df,-0x1c91+0x2b1+0x19e0);});}async['getCenters'](_0x3ca9ee){const _0x1635de=this['getProp']('x'),_0x22435f=this['getProp']('y'),_0x30b35b=this['getProp']('z');for(let _0x4f74dc=-0x1*-0xb15+-0x15b3*0x1+-0x97*-0x12;_0x4f74dc<this['numSplats'];++_0x4f74dc)_0x3ca9ee[_0x4f74dc*(-0xe93+0x2*0x10de+-0x56*0x39)+(-0x100a*-0x1+-0x1032+0x28)]=_0x1635de[_0x4f74dc],_0x3ca9ee[_0x4f74dc*(0x1*0x2059+-0xd4+-0x1f82)+(-0x249f+-0x19a0+0x3e40)]=_0x22435f[_0x4f74dc],_0x3ca9ee[_0x4f74dc*(-0x3*-0xa60+-0x1036+-0xee7)+(0x1215+-0x5*-0x445+0xae*-0x3a)]=_0x30b35b[_0x4f74dc],_0x4f74dc%Sg===0x2627*-0x1+0xb8*0x23+0x3*0x455&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x312d67;if((_0x312d67=this['transformD'+'ata'])!=null&&_0x312d67['muT'])return this['transformD'+'ata']['muT'];const _0x53cd4d=this['getProp']('t');return _0x53cd4d?new Float32Array(_0x53cd4d):void(-0x496*-0x3+-0x48d*-0x7+-0x2d9d);}async['getTScale'](){const _0x36e7b8=this['getProp']('t_scale');if(!_0x36e7b8)return;const _0x249848=new Float32Array(this['numSplats']);for(let _0x125e0f=-0xabf+-0x1a8b+0x254a;_0x125e0f<this['numSplats'];++_0x125e0f)_0x249848[_0x125e0f]=Math['exp'](_0x36e7b8[_0x125e0f]),_0x125e0f%Sg===0x1a29*-0x1+0x88+0x2d9*0x9&&await this['yieldToMai'+'n']();return _0x249848;}['getMotion'](_0x5e2575){const _0x103de5=this['getProp']('motion');_0x103de5&&new Float32Array(_0x103de5['buffer']['slice']());}['getTimeInd'+'ex'](){var _0x1eff30;if((_0x1eff30=this['transformD'+'ata'])!=null&&_0x1eff30['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x481bf7=this['getProp']('time_index');if(_0x481bf7)return new Float32Array(_0x481bf7);}['calcFocalP'+'oint'](_0x121b16,_0x1bfb90){const _0x5c7858=this['getProp']('position'),_0x5a7dfe=this['getProp']('scale');_0x121b16['x']=0x1347+0xb*-0x9+-0x12e4,_0x121b16['y']=-0x74e+-0x2a7+0x9f5,_0x121b16['z']=-0x5*0x15b+0x408+0x25*0x13;let _0x285a55=-0x1658+-0x3*0x1+-0x165b*-0x1;for(let _0x4c1838=-0x6+-0x136e+-0x1374*-0x1;_0x4c1838<this['numSplats'];++_0x4c1838){if(_0x1bfb90&&!_0x1bfb90(_0x4c1838))continue;const _0x56a689=_0x5c7858[_0x4c1838*(0x954+0xcb4+-0x1605*0x1)+(-0x2511+0x1b5e+0xd*0xbf)],_0x425572=_0x5c7858[_0x4c1838*(0x793+-0x1bc5+0x2e3*0x7)+(0x5cb*0x1+-0x112*0x1d+0x1940)],_0x3be0c4=_0x5c7858[_0x4c1838*(0xa85*0x1+0x1*0xfb0+-0x1a32)+(0x30d+-0x13aa+0x109f)];if(!isFinite(_0x56a689)||!isFinite(_0x425572)||!isFinite(_0x3be0c4))continue;const _0x16f898=(-0x59b+0x267c+-0x20e0)/(-0x1a3d+0x2*-0x7ad+0x2998+Math['max'](_0x5a7dfe[_0x4c1838*(0x460+0x2f*0x23+0x2*-0x565)+(-0x27*-0x74+-0x16a6+0x2*0x27d)],_0x5a7dfe[_0x4c1838*(0x2533+0x443*0x1+0x49b*-0x9)+(0x4d3*0x4+-0x8c*0xd+0x1*-0xc2f)],_0x5a7dfe[_0x4c1838*(0xb*0x24a+0x1c57+-0x3582)+(0x11*-0x3d+-0x6a*-0x22+0xf*-0xab)]));_0x121b16['x']+=_0x56a689*_0x16f898,_0x121b16['y']+=_0x425572*_0x16f898,_0x121b16['z']+=_0x3be0c4*_0x16f898,_0x285a55+=_0x16f898;}_0x121b16['mulScalar']((0x17d2+0x16a*-0x5+-0x10bf*0x1)/_0x285a55);}['renderWire'+'frameBound'+'s'](_0x5c0e19,_0x26b21a){const _0x55e803=new D(),_0xdbc65a=new le(),_0x275bb0=new D(),_0xac4fd4=new D(),_0x5025cb=new D(),_0x3f6ab0=this['createIter'](_0x55e803,_0xdbc65a,_0x275bb0);for(let _0x303f74=-0x7eb*0x1+0x1f46+-0x175b;_0x303f74<this['numSplats'];++_0x303f74)_0x3f6ab0['read'](_0x303f74),sC(gc,_0x55e803,_0xdbc65a),gc['mul2'](_0x26b21a,gc),_0xac4fd4['set'](_0x275bb0['x']*-(0x1*-0x2575+-0x1d6+0x274d),_0x275bb0['y']*-(0x87c+-0x166e+0xdf4),_0x275bb0['z']*-(-0x1d33+0x88c+0x14a9)),_0x5025cb['set'](_0x275bb0['x']*(0x1fb+0x254*-0xe+0x1e9f),_0x275bb0['y']*(0x1*-0x1a93+0x25b4+-0xb1f),_0x275bb0['z']*(0x9*-0x20b+-0x13*-0x9d+-0x6be*-0x1)),_0x5c0e19['immediate']['drawWireAl'+'ignedBox'](_0xac4fd4,_0x5025cb,eC,!(-0x26+0xa3e+-0xa18),_0x5c0e19['defaultDra'+'wLayer'],gc);}get['isCompress'+'ed'](){return!(-0x92f*-0x3+0xe17+-0x29a3);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x3b155d=-0x66c+0x1883+0xb*-0x1a5;_0x3b155d<0xd66+-0xe16+0xdd;++_0x3b155d)if(!this['getProp']('f_rest_'+_0x3b155d))return _0x3b155d;return-0x7c+0x1e85+-0xd*0x24c;})())]??-0x1126+0x1*0x258d+-0x1467;}['calcMorton'+'Order'](){const _0x55d3e6=_0x22ad0b=>{let _0x5d3296=_0x22ad0b[-0x165e+0x1*-0x11bd+0x1*0x281b],_0x4669c1=_0x22ad0b[-0x175a+0x6*0x11b+0x10b8];for(let _0x277219=0x1e60+0xb85+-0x29e4;_0x277219<_0x22ad0b['length'];_0x277219++)_0x22ad0b[_0x277219]<_0x5d3296&&(_0x5d3296=_0x22ad0b[_0x277219]),_0x22ad0b[_0x277219]>_0x4669c1&&(_0x4669c1=_0x22ad0b[_0x277219]);return{'min':_0x5d3296,'max':_0x4669c1};},_0x4c624d=(_0x3d4b9b,_0x582dbf,_0x496d91)=>{const _0x47b587=_0x3c3893=>(_0x3c3893&=-0xaf+-0x1101+0x15af,_0x3c3893=(_0x3c3893^_0x3c3893<<-0x61*0x2+-0x5f*-0x22+0x5*-0x25c)&-0x9d4a7d7*0x7+0x20d1e9*-0x3c4+0x1bf670944,_0x3c3893=(_0x3c3893^_0x3c3893<<0xe0b+-0x129*0x1f+0x15f4)&-0xe6e7da+0x36c13bf+0x3de215*0x2,_0x3c3893=(_0x3c3893^_0x3c3893<<-0x19c5+-0x450+0x1e19)&-0x5cb49ed*0x1+-0x1*-0x5bc5ca2+0x31b1e0e,_0x3c3893=(_0x3c3893^_0x3c3893<<-0x60*0x40+0x6*0x48b+-0x340)&-0xd8f54d3+0x6ee3*-0x27b9+0x27e89e27,_0x3c3893);return(_0x47b587(_0x496d91)<<-0x8*0x3e5+0x644+-0x1*-0x18e6)+(_0x47b587(_0x582dbf)<<-0xde4+0x45a+0x98b*0x1)+_0x47b587(_0x3d4b9b);},_0x484a21=this['getProp']('x'),_0x1a2faa=this['getProp']('y'),_0x3817f0=this['getProp']('z'),{min:_0x5afc04,max:_0x1c7eee}=_0x55d3e6(_0x484a21),{min:_0x467f53,max:_0x2d9894}=_0x55d3e6(_0x1a2faa),{min:_0x32fbbc,max:_0x4160d1}=_0x55d3e6(_0x3817f0),_0x409f91=_0x5afc04===_0x1c7eee?-0xb*-0x338+0x1*-0x4d5+0x1e93*-0x1:(-0x1f93+0x12b*-0x1f+0x47c8)/(_0x1c7eee-_0x5afc04),_0x16ff86=_0x467f53===_0x2d9894?0x1b0f+-0x11*0xa+-0x1d*0xe9:(-0x2f*0x9f+0x17fe+0x933*0x1)/(_0x2d9894-_0x467f53),_0x2dfd4e=_0x32fbbc===_0x4160d1?-0x10f1+0x1*-0x2c3+0x13b4:(-0xbd1+0x1*-0x1bc+-0x1*-0x118d)/(_0x4160d1-_0x32fbbc),_0xb212e2=new Map();for(let _0x1c88be=0xb3*-0x11+0x977+0x3e*0xa;_0x1c88be<this['numSplats'];_0x1c88be++){const _0x4d3f08=Math['min'](0xebc+-0x131d+0x860,Math['floor']((_0x484a21[_0x1c88be]-_0x5afc04)*_0x409f91)),_0x2a12fb=Math['min'](0x237a+0x121e+0x3199*-0x1,Math['floor']((_0x1a2faa[_0x1c88be]-_0x467f53)*_0x16ff86)),_0x14c7cc=Math['min'](0x2*-0x1141+0x1cd*-0x1+0x284e,Math['floor']((_0x3817f0[_0x1c88be]-_0x32fbbc)*_0x2dfd4e)),_0xae2fd9=_0x4c624d(_0x4d3f08,_0x2a12fb,_0x14c7cc),_0x47f9f6=_0xb212e2['get'](_0xae2fd9);_0x47f9f6?_0x47f9f6['push'](_0x1c88be):_0xb212e2['set'](_0xae2fd9,[_0x1c88be]);}const _0x119674=Array['from'](_0xb212e2['keys']())['sort']((_0x19fe25,_0x260f26)=>_0x19fe25-_0x260f26),_0x351b8d=new Uint32Array(this['numSplats']);let _0xa6a12e=-0x1a02+0x64+0x199e;for(let _0x1d0ff4=-0x1bdb+-0x1906+0x34e1;_0x1d0ff4<_0x119674['length'];++_0x1d0ff4){const _0xa01b09=_0xb212e2['get'](_0x119674[_0x1d0ff4]);for(let _0x3207fe=-0x15d6+0x1a37+-0x461;_0x3207fe<_0xa01b09['length'];++_0x3207fe)_0x351b8d[_0xa6a12e++]=_0xa01b09[_0x3207fe];}return _0x351b8d;}['reorder'](_0x27ebf9){const _0x18d903=new Map(),_0x56b0ba=_0x257051=>{if(_0x18d903['has'](_0x257051)){const _0x4fc620=_0x18d903['get'](_0x257051);return _0x18d903['delete'](_0x257051),_0x4fc620;}return new ArrayBuffer(_0x257051);},_0xe651b2=_0x2eeb77=>{_0x18d903['set'](_0x2eeb77['byteLength'],_0x2eeb77);},_0x199e57=_0x5ca038=>{const _0x52242b=new _0x5ca038['constructo'+'r'](_0x56b0ba(_0x5ca038['byteLength']));for(let _0x1397bd=-0x1*0x2640+-0x1391+0x39d1;_0x1397bd<_0x27ebf9['length'];_0x1397bd++)_0x52242b[_0x1397bd]=_0x5ca038[_0x27ebf9[_0x1397bd]];return _0xe651b2(_0x5ca038['buffer']),_0x52242b;};this['elements']['forEach'](_0x5298a9=>{_0x5298a9['properties']['forEach'](_0x5b7edb=>{_0x5b7edb['storage']&&(_0x5b7edb['storage']=_0x199e57(_0x5b7edb['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}const rC='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20void\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(vert'+'ex_positio'+'n,\x200.0,\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a',aC='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'vec4\x20packR'+'gb(vec3\x20v)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uvec3\x20vb\x20'+'=\x20uvec3(cl'+'amp(v,\x20vec'+'3(0.0),\x20ve'+'c3(1.0))\x20*'+'\x20vec3(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uint\x20bits\x20'+'=\x20(vb.x\x20<<'+'\x2021)\x20|\x20(vb'+'.y\x20<<\x2010)\x20'+'|\x20vb.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4((u'+'vec4(bits)'+'\x20>>\x20uvec4('+'24,\x2016,\x208,'+'\x200))\x20&\x20uve'+'c4(0xff))\x20'+'/\x20vec4(255'+'.0);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20vec3\x20dir'+';\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20sampler2'+'D\x20centroid'+'s;\x0a\x20\x20\x20\x20uni'+'form\x20mediu'+'mp\x20float\x20s'+'hN_mins;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20f'+'loat\x20shN_m'+'axs;\x0a\x0a\x20\x20\x20\x20'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20ivec'+'2\x20uv\x20=\x20ive'+'c2(gl_Frag'+'Coord.xy)\x20'+'*\x20ivec2(SH'+'_COEFFS,\x201'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20mediump\x20v'+'ec3\x20coeffi'+'cients[SH_'+'COEFFS];\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(int\x20i\x20=\x20'+'0;\x20i\x20<\x20SH_'+'COEFFS;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20s\x20=\x20texe'+'lFetch(cen'+'troids,\x20iv'+'ec2(uv.x\x20+'+'\x20i,\x20uv.y),'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20coefficie'+'nts[i]\x20=\x20m'+'ix(vec3(sh'+'N_mins),\x20v'+'ec3(shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20packRgb'+'(evalSH(co'+'efficients'+',\x20dir)\x20*\x200'+('.25\x20+\x200.5)'+';\x0a\x20\x20\x20\x20}\x0a'),nC='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput:\x20Vert'+'exInput)\x20-'+'>\x20VertexOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Ver'+'texOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a',oC='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'fn\x20packRgb'+'(v:\x20vec3f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vb\x20=\x20v'+'ec3u(clamp'+'(v,\x20vec3f('+'0.0),\x20vec3'+'f(1.0))\x20*\x20'+'vec3f(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20bits\x20='+'\x20dot(vb,\x20v'+'ec3u(1\x20<<\x20'+'21,\x201\x20<<\x201'+'0,\x201));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(('+'vec4u(bits'+')\x20>>\x20vec4u'+'(24,\x2016,\x208'+',\x200))\x20&\x20ve'+'c4u(0xff))'+'\x20/\x20vec4f(2'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20un'+'iform\x20dir:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'shN_mins:\x20'+'f32;\x0a\x20\x20\x20\x20u'+'niform\x20shN'+'_maxs:\x20f32'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20centroids'+':\x20texture_'+'2d<f32>;\x0a\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input:'+'\x20FragmentI'+'nput)\x20->\x20F'+'ragmentOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20uv\x20=\x20'+'vec2i(inpu'+'t.position'+'.xy)\x20*\x20vec'+'2i(SH_COEF'+'FS,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'coefficien'+'ts:\x20array<'+'vec3f,\x20SH_'+'COEFFS>;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x200;\x20i\x20'+'<\x20SH_COEFF'+'S;\x20i++)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s:\x20v'+'ec3f\x20=\x20tex'+'tureLoad(c'+'entroids,\x20'+'vec2i(uv.x'+'\x20+\x20i,\x20uv.y'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20coeffic'+'ients[i]\x20='+'\x20mix(vec3f'+'(uniform.s'+'hN_mins),\x20'+'vec3f(unif'+('orm.shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20packRgb'+'(evalSH(&c'+'oefficient'+'s,\x20uniform'+'.dir)\x20*\x200.'+'25\x20+\x200.5);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20}'+'\x0a'),lC='\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20sampler2D'+'\x20sh0;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x20\x20\x20\x20u'+'niform\x20med'+'iump\x20sampl'+'er2D\x20sh_re'+'sult;\x0a\x0a\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20sh0_mi'+'ns;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20sh0_maxs;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20SH_C0\x20=\x20'+'0.28209479'+'177387814;'+'\x0a\x0a\x20\x20\x20\x20//\x20u'+'npack\x2011,\x20'+'11,\x2010\x20nor'+'malized\x20va'+'lue\x20from\x20r'+'gba8\x20textu'+'re\x20sample\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackRgb(v'+'ec4\x20v)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uve'+'c4\x20uv\x20=\x20uv'+'ec4(v\x20*\x2025'+'5.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uint\x20b'+'its\x20=\x20(uv.'+'x\x20<<\x2024)\x20|'+'\x20(uv.y\x20<<\x20'+'16)\x20|\x20(uv.'+'z\x20<<\x208)\x20|\x20'+'uv.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uvec3\x20'+'vb\x20=\x20(uvec'+'3(bits)\x20>>'+'\x20uvec3(21,'+'\x2010,\x200))\x20&'+'\x20uvec3(0x7'+'ffu,\x200x7ff'+'u,\x200x3ffu)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3(vb)\x20/\x20ve'+'c3(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20baseSampl'+'e\x20=\x20mix(sh'+'0_mins,\x20sh'+'0_maxs,\x20te'+'xelFetch(s'+'h0,\x20source'+'.uv,\x200));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20resolve\x20'+'base\x20color'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4\x20base\x20='+'\x20vec4(vec3'+'(0.5)\x20+\x20ba'+'seSample.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'baseSample'+'.w)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'xtract\x20sph'+'erical\x20har'+'monics\x20pal'+'ette\x20index'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20label'+'Sample\x20=\x20i'+'vec2(texel'+'Fetch(sh_l'+'abels,\x20sou'+'rce.uv,\x200)'+'.xy\x20*\x20255.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20int\x20n\x20=\x20'+('labelSampl'+'e.x\x20+\x20labe'+'lSample.y\x20'+'*\x20256;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20shSample\x20'+'=\x20texelFet'+'ch(sh_resu'+'lt,\x20ivec2('+'n\x20%\x2064,\x20n\x20'+'/\x2064),\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20sh\x20=\x20('+'unpackRgb('+'shSample)\x20'+'-\x20vec3(0.5'+'))\x20*\x204.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'(base.xyz\x20'+'+\x20sh,\x20base'+'.w);\x0a\x20\x20\x20\x20}'+'\x0a'),cC='\x0a\x20\x20\x20\x20var\x20s'+'h0:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'h_labels:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20sh_re'+'sult:\x20text'+'ure_2d<f32'+'>;\x0a\x0a\x20\x20\x20\x20un'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20sh0_m'+'axs:\x20vec4f'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20SH_C0:\x20'+'f32\x20=\x200.28'+'2094791773'+'87814;\x0a\x0a\x20\x20'+'\x20\x20//\x20unpac'+'k\x2011,\x2011,\x20'+'10\x20normali'+'zed\x20value\x20'+'from\x20rgba8'+'\x20texture\x20s'+'ample\x0a\x20\x20\x20\x20'+'fn\x20unpackR'+'gb(v:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20bits'+'\x20=\x20dot(vec'+'4u(v\x20*\x20255'+'.0),\x20vec4u'+'(1u\x20<<\x2024,'+'\x201u\x20<<\x2016,'+'\x201u\x20<<\x208,\x20'+'1u));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20vb'+'\x20=\x20(vec3u('+'bits)\x20>>\x20v'+'ec3u(21,\x201'+'0,\x200))\x20&\x20v'+'ec3u(0x7ff'+'u,\x200x7ffu,'+'\x200x3ffu);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec3f'+'(vb)\x20/\x20vec'+'3f(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20f'+'n\x20readColo'+'r(source:\x20'+'ptr<functi'+'on,\x20SplatS'+'ource>)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'baseSample'+':\x20vec4f\x20=\x20'+'mix(unifor'+'m.sh0_mins'+',\x20uniform.'+'sh0_maxs,\x20'+'textureLoa'+'d(sh0,\x20sou'+'rce.uv,\x200)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20base\x20'+'=\x20vec4f(ve'+'c3f(0.5)\x20+'+'\x20baseSampl'+'e.xyz\x20*\x20SH'+'_C0,\x201.0\x20/'+'\x20(1.0\x20+\x20ex'+'p(-baseSam'+'ple.w)));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20extract\x20'+'spherical\x20'+'harmonics\x20'+'palette\x20in'+'dex\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20labe'+'lSample:\x20v'+'ec2i\x20=\x20vec'+'2i(texture'+'Load(sh_la'+'bels,\x20sour'+'ce.uv,\x200).'+'xy\x20*\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20n\x20=\x20l'+('abelSample'+'.x\x20+\x20label'+'Sample.y\x20*'+'\x20256;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hSample:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(s'+'h_result,\x20'+'vec2i(n\x20%\x20'+'64,\x20n\x20/\x2064'+'),\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'h:\x20vec3f\x20='+'\x20(unpackRg'+'b(shSample'+')\x20-\x20vec3f('+'0.5))\x20*\x204.'+'0;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(base.'+'xyz\x20+\x20sh,\x20'+'base.w);\x0a\x20'+'\x20\x20\x20}\x0a'),hC=(_0xd5dee2,_0x4c2419)=>{for(const _0x3b7b92 in _0x4c2419)_0xd5dee2['resolve'](_0x3b7b92)['setValue'](_0x4c2419[_0x3b7b92]);};class dC extends ys{constructor(){super(...arguments),h(this,'executeCal'+'lback',null);}['execute'](){var _0x3a92d4;(_0x3a92d4=this['executeCal'+'lback'])==null||_0x3a92d4['call'](this);}}const yg=new te(),uo=new D();class fC{constructor(_0x2c9aef,_0x1fcb64){h(this,'prevDir',new D()),h(this,'updateMode','enable'),(this['device']=_0x2c9aef,this['gsplatInst'+'ance']=_0x1fcb64);const {resource:_0x43e680}=_0x1fcb64,_0x3f7f46=new Map(Pe['get'](_0x2c9aef,_0x2c9aef['isWebGPU']?'wgsl':'glsl'));this['shader']=$t['createShad'+'er'](_0x2c9aef,{'uniqueName':'gsplatReso'+'lveSH','vertexGLSL':rC,'fragmentGLSL':aC,'vertexWGSL':nC,'fragmentWGSL':oC,'vertexIncludes':_0x3f7f46,'fragmentIncludes':_0x3f7f46,'fragmentDefines':new Map([['SH_BANDS',_0x43e680['gsplatData']['shBands']['toString']()]]),'attributes':{'vertex_position':Me}}),this['texture']=_0x43e680['createText'+'ure']('centroids',Ne,new J(-0x23*0x10f+0x418+0x2135*0x1,-0x7bb*-0x1+0x5ed+-0x9a8)),this['renderTarg'+'et']=new gt({'colorBuffer':this['texture'],'depth':!(-0x28*0xaf+-0x313*0x1+0xb*0x2c4)}),this['renderPass']=new dC(_0x2c9aef),this['renderPass']['init'](this['renderTarg'+'et'],{}),this['renderPass']['colorOps']['clear']=!(-0xc9*-0xf+-0x2*-0x1332+-0x322b),this['quadRender']=new Ah(this['shader']);const {material:_0x97a32f}=_0x1fcb64;_0x97a32f['setDefine']('SH_BANDS','0');const {shaderChunks:_0x18dea3}=_0x97a32f;_0x18dea3['glsl']['set']('gsplatSogs'+'ColorVS',lC),_0x18dea3['wgsl']['set']('gsplatSogs'+'ColorVS',cC),_0x97a32f['update'](),_0x2c9aef['scope']['resolve']('sh_result')['setValue'](this['texture']);}['destroy'](){const {gsplatInstance:_0x35e369}=this,{material:_0x1801de}=_0x35e369;_0x1801de['setDefine']('SH_BANDS',_0x35e369['resource']['gsplatData']['shBands']['toString']());const {shaderChunks:_0x8ad49c}=_0x1801de;_0x8ad49c['glsl']['delete']('gsplatSogs'+'ColorVS'),_0x8ad49c['wgsl']['delete']('gsplatSogs'+'ColorVS'),_0x1801de['update'](),this['quadRender']['destroy'](),this['renderPass']['destroy'](),this['renderTarg'+'et']['destroy'](),this['texture']['destroy'](),this['shader']['destroy']();}['render'](_0x48acc4,_0x4cbb85){const {prevDir:_0x547820,updateMode:_0x4bdac7}=this;if(_0x4bdac7==='disable'||(yg['invert'](_0x4cbb85),yg['transformV'+'ector'](_0x48acc4['forward'],uo),uo['normalize'](),_0x4bdac7==='enable'&&uo['equalsAppr'+'ox'](_0x547820,-0x1df4+-0x9e4+0x27d8+0.001)))return;_0x547820['copy'](uo);const _0x280105=()=>{const {device:_0x5ddf8c}=this,{sh_centroids:_0x15092a,meta:_0x650a67}=this['gsplatInst'+'ance']['resource']['gsplatData'];hC(_0x5ddf8c['scope'],{'dir':uo['toArray'](),'centroids':_0x15092a,'shN_mins':_0x650a67['shN']['mins'],'shN_maxs':_0x650a67['shN']['maxs']}),_0x5ddf8c['setCullMod'+'e'](bt),_0x5ddf8c['setDepthSt'+'ate'](Yt['NODEPTH']),_0x5ddf8c['setStencil'+'State'](null,null),_0x5ddf8c['setBlendSt'+'ate'](pt['NOBLEND']),this['quadRender']['render']();};this['renderPass']['executeCal'+'lback']=_0x280105,this['renderPass']['render']();}}const uC='\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20means_l'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20means_'+'u;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20quats'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20scales'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20uint\x20n'+'umSplats;\x0a'+'\x0a\x20\x20\x20\x20uint\x20'+'packU32(ve'+'c4\x20v)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20uint(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u\x20|\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20uint('+'v.y\x20*\x20255.'+'0)\x20<<\x2016u\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uin'+'t(v.z\x20*\x2025'+'5.0)\x20<<\x208u'+'\x20|\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(v.w\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20uv'+'ec4\x20packU3'+'2(vec4\x20a,\x20'+'vec4\x20b,\x20ve'+'c4\x20c,\x20vec4'+'\x20d)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uvec4(pac'+'kU32(a),\x20p'+'ackU32(b),'+'\x20packU32(c'+'),\x20packU32'+'(d));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20w\x20='+'\x20int(textu'+'reSize(mea'+'ns_l,\x200).x'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ivec2\x20uv\x20'+'=\x20ivec2(gl'+'_FragCoord'+'.xy);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(ui'+'nt(uv.x\x20+\x20'+'uv.y\x20*\x20w)\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansLSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_l,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansUSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_u,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20quatsSamp'+'le\x20=\x20texel'+'Fetch(quat'+'s,\x20uv,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20scales'+'Sample\x20=\x20t'+'exelFetch('+'scales,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shLabel'+'sSample\x20=\x20'+'texelFetch'+'(sh_labels'+',\x20uv,\x200).x'+('y;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20pcFragCo'+'lor0\x20=\x20pac'+'kU32(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansLS'+'ample,\x20shL'+'abelsSampl'+'e.x),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansUS'+'ample,\x20shL'+'abelsSampl'+'e.y),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(quatsSa'+'mple),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4(scales'+'Sample,\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20}\x0a'),pC='\x0a\x20\x20\x20\x20var\x20m'+'eans_l:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20means_u'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20qua'+'ts:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'cales:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sh_label'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20numSpla'+'ts:\x20u32;\x0a\x0a'+'\x20\x20\x20\x20fn\x20pac'+'kU32(v:\x20ve'+'c4<f32>)\x20-'+'>\x20u32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(u32(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20(u3'+'2(v.y\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20\x20|\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(u32(v.z\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20u32(v.w'+'\x20*\x20255.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20packU'+'Vec32(a:\x20v'+'ec4<f32>,\x20'+'b:\x20vec4<f3'+'2>,\x20c:\x20vec'+'4<f32>,\x20d:'+'\x20vec4<f32>'+')\x20->\x20vec4<'+'u32>\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4<u32'+'>(packU32('+'a),\x20packU3'+'2(b),\x20pack'+'U32(c),\x20pa'+'ckU32(d));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20@fragmen'+'t\x0a\x20\x20\x20\x20fn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20w:\x20u32\x20'+'=\x20textureD'+'imensions('+'means_l,\x200'+').x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2<u32>'+'\x20=\x20vec2<u3'+'2>(pcPosit'+'ion.xy);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv.x\x20+\x20uv'+'.y\x20*\x20w\x20>=\x20'+'uniform.nu'+'mSplats)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20fetch\x20the'+'\x20source\x20in'+'dex\x20and\x20ca'+'lculate\x20so'+'urce\x20uv\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'meansLSamp'+'le:\x20vec3<f'+('32>\x20=\x20text'+'ureLoad(me'+'ans_l,\x20uv,'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20meansUSam'+'ple:\x20vec3<'+'f32>\x20=\x20tex'+'tureLoad(m'+'eans_u,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20quatsSam'+'ple:\x20vec4<'+'f32>\x20=\x20tex'+'tureLoad(q'+'uats,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20scal'+'esSample:\x20'+'vec3<f32>\x20'+'=\x20textureL'+'oad(scales'+',\x20uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shLa'+'belsSample'+':\x20vec2<f32'+'>\x20=\x20textur'+'eLoad(sh_l'+'abels,\x20uv,'+'\x200).xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20packUVec'+'32(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansLSam'+'ple,\x20shLab'+'elsSample.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansUSam'+'ple,\x20shLab'+'elsSample.'+'y),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(quatsSamp'+'le),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4(scalesSa'+'mple,\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a'),An=-0x37f*0x1+-0x4*-0x211+0x4c5*-0x1+0.28209479177387814,Ci=_0x5b1cca=>_0x5b1cca['read'](0x13c6+-0x1fe9+-0xd*-0xef,0x124d+-0x1875+-0x2*-0x314,_0x5b1cca['width'],_0x5b1cca['height'],{'mipLevel':0x0,'face':0x0,'immediate':!(0x1afa+0x213+-0x1*0x1d0d)}),mC=(_0x5dad01,_0x19923e)=>{for(const _0x11e73a in _0x19923e)_0x5dad01['resolve'](_0x11e73a)['setValue'](_0x19923e[_0x11e73a]);};class _C{constructor(_0x20a4d9,_0x365872,_0x26f82e,_0x2b2d96,_0x1a34f7,_0x3fc247){const _0x3b79a8=(_0xf01dd9,_0x145105,_0x927f4a)=>_0xf01dd9*(-0x84f*0x1+-0x13cd*0x1+0x1c1d-_0x927f4a)+_0x145105*_0x927f4a,{meta:_0x5b1abb}=_0x20a4d9,{means:_0x27c776,scales:_0x59cf77,sh0:_0x48afa0,shN:_0x2a8cb8}=_0x5b1abb,_0x23b56d=_0x365872&&_0x20a4d9['means_l']['_levels'][0x1df3+-0x1*0x31f+0xd6a*-0x2],_0x328f3b=_0x365872&&_0x20a4d9['means_u']['_levels'][-0x3*-0xaa5+0x827*0x2+-0x35*0xe9],_0x4144e8=_0x26f82e&&_0x20a4d9['quats']['_levels'][0x1e1b+-0x1453+-0x9c8],_0x38a798=_0x2b2d96&&_0x20a4d9['scales']['_levels'][-0x1f25+0x139f+0x3b*0x32],_0xd0d030=_0x1a34f7&&_0x20a4d9['sh0']['_levels'][0xfd6*0x1+0x1b*-0xfb+-0x185*-0x7],_0x326963=_0x3fc247&&_0x20a4d9['sh_labels']['_levels'][0x41*0x46+-0x1*0x350+-0x269*0x6],_0x1f5910=_0x3fc247&&_0x20a4d9['sh_centroi'+'ds']['_levels'][0x725+-0x3d*0x1+-0x6e8],_0x10251e=(0x5*0x275+0x21f6+-0x2e3d)/Math['sqrt'](-0x16d*-0xb+0x371+-0x1*0x131e);this['read']=_0x2d3903=>{if(_0x365872){const _0x244114=_0x3b79a8(_0x27c776['mins'][0x1f56+-0xb*-0x115+-0x2b3d],_0x27c776['maxs'][0x1*0xdc7+0x12f7+-0x20be],((_0x328f3b[_0x2d3903*(0x24a2+-0x1*-0x158e+-0x3a2c)+(0x1f18+-0x20e8+0x1d0)]<<0xafe+-0x599+-0x55d)+_0x23b56d[_0x2d3903*(0x1d77+-0x2545+0x7d2)+(0x799*0x5+0x226b+-0x4*0x121a)])/(-0xe74+-0xea77+0x1f8ea)),_0x1b5e22=_0x3b79a8(_0x27c776['mins'][-0x1043+-0x4d*-0x15+0x9f3],_0x27c776['maxs'][0xe2a+-0xaf*-0x5+-0x32*0x5a],((_0x328f3b[_0x2d3903*(-0xada*0x2+-0x67*-0x1+-0x6b*-0x33)+(-0xd00+-0x20b2+0x2db3)]<<-0x2ef*0xb+-0x341+0x11c7*0x2)+_0x23b56d[_0x2d3903*(0xe2c+-0xb*-0x13f+-0x1bdd)+(-0x1*-0x16bd+0x272+-0x125*0x16)])/(-0x42d*-0x5+-0x20c1*-0x7+0x41*0x17)),_0x2bf15b=_0x3b79a8(_0x27c776['mins'][0x67*-0x27+-0x58a*-0x2+0x49f*0x1],_0x27c776['maxs'][-0xb8*0x2b+-0x18ed*-0x1+0x5fd],((_0x328f3b[_0x2d3903*(0x6*-0x4be+0x6b6*-0x2+0xa79*0x4)+(0x2*0x9ec+-0x126b+-0x16b)]<<-0x221*-0x8+-0x22f4+0x5fc*0x3)+_0x23b56d[_0x2d3903*(-0x1*-0x1de3+0x111*0x8+-0x2667)+(0x1459+0xd6a+0x21c1*-0x1)])/(0x7174+0x349f+0xa*0x8fe));_0x365872['x']=Math['sign'](_0x244114)*(Math['exp'](Math['abs'](_0x244114))-(-0xe4*0x27+-0x1822*-0x1+0xa9b)),_0x365872['y']=Math['sign'](_0x1b5e22)*(Math['exp'](Math['abs'](_0x1b5e22))-(-0x574+0x16*0x97+0x785*-0x1)),_0x365872['z']=Math['sign'](_0x2bf15b)*(Math['exp'](Math['abs'](_0x2bf15b))-(-0xd94+-0x13*0x12e+0x23ff));}if(_0x26f82e){const _0x27e1d9=(_0x4144e8[_0x2d3903*(-0xfd*0x11+-0xd60+0x1e31)+(0x5b*0x31+-0xf0b+-0x260)]/(0x3ba*0x9+0x92e+-0x29b9)-(0x16f5+-0x129b+-0x45a+0.5))*_0x10251e,_0x24edeb=(_0x4144e8[_0x2d3903*(0x23da+0x97*-0x13+-0x18a1)+(0x820+0x3*-0x67e+0x9*0x143)]/(0x1*-0x903+0x1c42+-0x1240)-(0x1f42+0x282*0x6+0x1*-0x2e4e+0.5))*_0x10251e,_0x50b509=(_0x4144e8[_0x2d3903*(-0x1f*0x1e+0x2471+-0x20cb)+(0x1*-0xcfb+0x1518+0x5*-0x19f)]/(-0xb5e+0x1da4+-0x1147*0x1)-(-0x19*-0x14d+-0xc62*-0x3+-0x45ab+0.5))*_0x10251e,_0x2d2041=Math['sqrt'](Math['max'](0x9e*0x1+-0x964+0x8c6*0x1,0x560+0x2554+-0x283*0x11-(_0x27e1d9*_0x27e1d9+_0x24edeb*_0x24edeb+_0x50b509*_0x50b509)));switch(_0x4144e8[_0x2d3903*(-0xbb*-0x1f+0xfab+-0x39*0xac)+(0x553+-0xe58+0x908)]-(-0x5f*-0x23+0x191b+-0x251c)){case-0x20f9+-0x1*-0x90f+0x17ea:_0x26f82e['set'](_0x27e1d9,_0x24edeb,_0x50b509,_0x2d2041);break;case-0x1*-0x3f1+0x52c+-0xb*0xd4:_0x26f82e['set'](_0x2d2041,_0x24edeb,_0x50b509,_0x27e1d9);break;case-0x6f1+0x299+-0x45a*-0x1:_0x26f82e['set'](_0x24edeb,_0x2d2041,_0x50b509,_0x27e1d9);break;case-0x1473+-0x1039+-0x1*-0x24af:_0x26f82e['set'](_0x24edeb,_0x50b509,_0x2d2041,_0x27e1d9);break;}}if(_0x2b2d96){const _0x4b26ff=_0x3b79a8(_0x59cf77['mins'][-0x19f*0x2+-0x2557+0x2895*0x1],_0x59cf77['maxs'][-0x2374+-0x1e5c+0x1*0x41d0],_0x38a798[_0x2d3903*(-0xc7*-0x3+0x2682+-0x28d3)+(0xf5e+0xb3a+-0x1a98)]/(-0x13bc+0x1bea+-0x72f)),_0x2cb5a1=_0x3b79a8(_0x59cf77['mins'][0x5fb*0x6+-0x1*-0xe09+0x2*-0x18f5],_0x59cf77['maxs'][0x1421+-0xe7d*-0x1+-0x229d],_0x38a798[_0x2d3903*(0x8*-0x1c3+-0x4*0x579+0x2400)+(0x250+0x3b*-0x59+0x4*0x48d)]/(-0x32a*-0x9+-0x1c5*0x1+-0x449*0x6)),_0x5ca82c=_0x3b79a8(_0x59cf77['mins'][0x12d2+-0x7e3+0x1*-0xaed],_0x59cf77['maxs'][-0x24b6+-0x8f*0x34+0x41c4],_0x38a798[_0x2d3903*(0x144c+0x1153+-0x259b)+(0x12e1+-0x1a95+-0x11a*-0x7)]/(0xcf4+0x10a3*-0x2+-0x3*-0x71b));_0x2b2d96['set'](_0x4b26ff,_0x2cb5a1,_0x5ca82c);}if(_0x1a34f7){const _0x5bf9cf=_0x3b79a8(_0x48afa0['mins'][0x8*0x2f9+-0x1ccc+0x504],_0x48afa0['maxs'][-0x26c7+-0x1bd4+0x11*0x3eb],_0xd0d030[_0x2d3903*(0x66b+0x2*0xf55+-0x2511)+(-0x2*0x377+0x103*0x24+-0xa*0x2f3)]/(0x1c3*0x4+-0x18ae+0xfb*0x13)),_0x21cfba=_0x3b79a8(_0x48afa0['mins'][0x1376+0x1005+-0x237a],_0x48afa0['maxs'][0x32a+0x144b+-0x1774],_0xd0d030[_0x2d3903*(0x1*-0x109+-0x2*-0x65b+0xba9*-0x1)+(0x14aa+-0xb*-0x15e+-0x25*0xf7)]/(-0x1c5*0x5+-0x123b*-0x2+-0x1*0x1a9e)),_0x50b34b=_0x3b79a8(_0x48afa0['mins'][0x2027+-0x55*-0x4c+-0x3961],_0x48afa0['maxs'][-0x68*-0x2f+0xc30+0xfa3*-0x2],_0xd0d030[_0x2d3903*(0x257d+-0xd*0x1e1+0xd0c*-0x1)+(-0x778+0x10d1+-0x957)]/(-0x250e+-0x1646*0x1+0x3c53)),_0xec1544=_0x3b79a8(_0x48afa0['mins'][-0x2d7*-0x3+0x950+-0x11d2],_0x48afa0['maxs'][-0x1871+0x1b70+0x2fc*-0x1],_0xd0d030[_0x2d3903*(-0x2200+0x118c+-0x1f*-0x88)+(0x6a9+-0x4ba+-0x1ec)]/(-0xfab+0x17c9+-0x71f));_0x1a34f7['set'](0x79e+0xc62+-0x1400+0.5+_0x5bf9cf*An,-0xe97+0x2060+-0x9d*0x1d+0.5+_0x21cfba*An,0xf50*0x1+0x1*0x769+-0x16b9+0.5+_0x50b34b*An,(-0x11a2*-0x1+-0x56d+-0xc34)/(-0x2177+0x813+-0x1*-0x1965+Math['exp'](-_0xec1544)));}if(_0x3fc247){const _0x3d0134=_0x326963[_0x2d3903*(0x2d*0x33+0x1*-0x883+0x4*-0x1c)+(-0x15ad*0x1+-0x127*0x5+-0x6dc*-0x4)]+(_0x326963[_0x2d3903*(-0xf39+-0x1*-0xc59+0x1*0x2e4)+(-0x1b7d+0x2*0xcee+0x1a2)]<<0x15*-0x153+0x1*0x1d7d+-0x1a6),_0x9300cd=_0x3d0134%(-0x74*0x11+-0x14*0x197+-0x6a*-0x60)*(0x65a*0x2+0x1cb0+-0xdc7*0x3),_0x11360a=Math['floor'](_0x3d0134/(0x1*-0x9bd+0x5ca*-0x4+0x2125));for(let _0x23a125=0x7*0xb2+-0x2180+0x1ca2;_0x23a125<0xe*-0x2+0x4*-0x465+0x17*0xc5;++_0x23a125)for(let _0x50cebe=-0x2bc+-0xa*-0x1e2+-0xce*0x14;_0x50cebe<-0x10f8+-0x203c*0x1+-0x3143*-0x1;++_0x50cebe)_0x3fc247[_0x23a125*(-0x3bf+-0x1fab+0x2379)+_0x50cebe]=_0x3b79a8(_0x2a8cb8['mins'],_0x2a8cb8['maxs'],_0x1f5910[(_0x9300cd+_0x50cebe)*(0x1*0x979+0xe2*0x1+-0xa57)+_0x23a125+_0x11360a*_0x20a4d9['sh_centroi'+'ds']['width']*(0x8*-0x463+0x23b*0x2+0x1ea6)]/(-0x1185+-0x46b*-0x3+0x543));}};}}class gC{constructor(){h(this,'meta'),h(this,'numSplats'),h(this,'means_l'),h(this,'means_u'),h(this,'quats'),h(this,'scales'),h(this,'sh0'),h(this,'sh_centroi'+'ds'),h(this,'sh_labels'),h(this,'packedText'+'ure');}['destroy'](){var _0x28e03d,_0x308732,_0x2d81b0,_0x2d4b92,_0x2f0b84,_0x3d9c72,_0x321d1d,_0x13ad85;(_0x28e03d=this['means_l'])==null||_0x28e03d['destroy'](),(_0x308732=this['means_u'])==null||_0x308732['destroy'](),(_0x2d81b0=this['quats'])==null||_0x2d81b0['destroy'](),(_0x2d4b92=this['scales'])==null||_0x2d4b92['destroy'](),(_0x2f0b84=this['sh0'])==null||_0x2f0b84['destroy'](),(_0x3d9c72=this['sh_centroi'+'ds'])==null||_0x3d9c72['destroy'](),(_0x321d1d=this['sh_labels'])==null||_0x321d1d['destroy'](),(_0x13ad85=this['packedText'+'ure'])==null||_0x13ad85['destroy']();}['createIter'](_0x34e6c9,_0x17b90c,_0x31da7e,_0x2423a3,_0x22b447){return new _C(this,_0x34e6c9,_0x17b90c,_0x31da7e,_0x2423a3,_0x22b447);}['calcAabb'](_0x5cd86c){const {mins:_0x345b68,maxs:_0xe58042}=this['meta']['means'],_0x36b20f=_0x15904b=>Math['sign'](_0x15904b)*(Math['exp'](Math['abs'](_0x15904b))-(0x2*0x95f+0x102e+-0x22eb*0x1));_0x5cd86c['center']['set']((_0x36b20f(_0x345b68[-0x6*0x5c8+0x1323*0x2+-0x396])+_0x36b20f(_0xe58042[-0x1f8a+-0x5dc+-0x12b3*-0x2]))*(0xa76+0x2*-0x196+-0x3*0x26e+0.5),(_0x36b20f(_0x345b68[0x3a0+0x3*-0x5d+0x2*-0x144])+_0x36b20f(_0xe58042[0x1f93+0x1c54+-0xb*0x572]))*(0xb6b+0x1*0x13d+-0xca8+0.5),(_0x36b20f(_0x345b68[-0x405+-0x1*-0x91c+-0x515*0x1])+_0x36b20f(_0xe58042[0x259+-0x181b+0x15c4]))*(-0x496*-0x8+-0x1ccf+0x1*-0x7e1+0.5)),_0x5cd86c['halfExtent'+'s']['set']((_0x36b20f(_0xe58042[0x22*0x8f+0x2*0x110a+-0x3512*0x1])-_0x36b20f(_0x345b68[-0x71c+-0x2*-0xf+0x6fe]))*(0x71*-0xb+0x142d+-0xf52+0.5),(_0x36b20f(_0xe58042[0x26e*0x2+0x1252+0x172d*-0x1])-_0x36b20f(_0x345b68[0x2*-0x607+-0x194c+0x255b*0x1]))*(0xead+0x130b+-0x53*0x68+0.5),(_0x36b20f(_0xe58042[-0xe0d+0xf43+-0x134])-_0x36b20f(_0x345b68[0x18b7+0x11*-0x161+-0x144]))*(-0x52b+-0xdf1+-0x98e*-0x2+0.5));}['getCenters'](_0x4dd02b){const {meta:_0x30d48d,means_l:_0x386dae,means_u:_0x39760b,numSplats:_0x3a7932}=this,{means:_0x26782a}=_0x30d48d,_0x23a72f=new Uint32Array(_0x39760b['_levels'][0x9ab*0x3+0xa3*-0x2b+-0x1a0]['buffer']),_0x476742=new Uint32Array(_0x386dae['_levels'][0x21a5+0x114e+-0x32f3]['buffer']),_0x3a48e2=_0x26782a['mins'][-0x1ce6*0x1+-0x2e0*-0x3+0x1e*0xad]/(-0x731*0x6+-0x1c7f*-0xf+-0x804c),_0x3358ca=_0x26782a['mins'][-0x81*0x39+0x1249*0x1+0xa71*0x1]/(-0x1a4be+0x13cef+0x167ce),_0x3fbddb=_0x26782a['mins'][-0x14b+-0x1*0x60f+0x75c*0x1]/(-0x1*0x6534+-0x7*-0xfa7+0xf7a2),_0x58b070=_0x26782a['maxs'][-0x1ecc+-0x8cb+0x7eb*0x5]/(0x1*0x111e9+-0x17821+0x16637*0x1),_0x4b539a=_0x26782a['maxs'][-0xe3*-0x25+-0x202d+-0xa1]/(-0x183d4+0x1258a+0x15e49),_0x5c2a05=_0x26782a['maxs'][-0xac5+-0x18d5+0x239c]/(-0x1*-0x17e05+0x1*0xc1d2+-0x3ff8*0x5);for(let _0x4ac89=-0x296*0xd+-0xdbe+-0x17ae*-0x2;_0x4ac89<_0x3a7932;_0x4ac89++){const _0x273f77=_0x4ac89,_0x2f4217=_0x23a72f[_0x273f77],_0x5917fb=_0x476742[_0x273f77],_0x3334df=_0x2f4217<<-0x2381+0x1498+0xef1&0x5aa7*0x1+0x8bfc+-0x3*-0x81f|_0x5917fb&0xe9+-0xd5*-0x23+-0x1d09,_0x402693=_0x2f4217&0x7ee1+-0x19211*-0x1+-0xa*0x1b65|_0x5917fb>>>0x3*-0x95c+0x1*0x1a8+0x1a74&-0x2*0xc91+0x13*-0x1a3+0x393a,_0x4e275e=_0x2f4217>>>0xb*0x2a5+-0xf*-0xfc+-0x2bd3*0x1&-0xfb3+0x6aed+0x51e3*0x2|_0x5917fb>>>0x7d4+0xe*0x1b9+-0x1fe2&-0x19d1+-0x1af7+0x35c7,_0x3d0131=_0x3a48e2*(0x1a92c+-0x5c29*0x1+-0x4d04-_0x3334df)+_0x58b070*_0x3334df,_0x2e5dcc=_0x3358ca*(0x5127*-0x3+-0x1c4af+0x3b823-_0x402693)+_0x4b539a*_0x402693,_0x48f113=_0x3fbddb*(0xf059+0x4*-0x3d6b+0x141a*0xd-_0x4e275e)+_0x5c2a05*_0x4e275e,_0x3d41eb=_0x3d0131<0x4de+-0x1*0x4a+-0x494?-_0x3d0131:_0x3d0131,_0x40a7df=_0x2e5dcc<0x1*0x121a+0x15bf+-0x27d9?-_0x2e5dcc:_0x2e5dcc,_0x1d812b=_0x48f113<0x22d2+-0x1*0xf4d+-0x1385?-_0x48f113:_0x48f113;_0x4dd02b[_0x4ac89*(-0xa*-0x319+0xa1d*0x2+0x1*-0x3331)]=(_0x3d0131<-0x19fc*0x1+-0xa14+0x2410?-(0x22db+-0x1b64+0x1*-0x776):-0x2011+-0x139+0x214b)*(Math['exp'](_0x3d41eb)-(0x302+0x1f49+-0x224a)),_0x4dd02b[_0x4ac89*(-0x1939+-0x71*0x3e+-0x2*-0x1a4d)+(-0x22a5+-0x87b*-0x4+0xba)]=(_0x2e5dcc<-0xa62+0xfc5*0x1+-0xc5*0x7?-(0x1739+0x873*0x1+-0x1fab):0x20ed*0x1+0x1*0x179b+-0x3887)*(Math['exp'](_0x40a7df)-(0x2*0x4ef+-0xb78+0x89*0x3)),_0x4dd02b[_0x4ac89*(-0x4e3+-0x7*0xe+0xd*0x68)+(-0x6*0x26a+0x1*-0x207a+0x3ea*0xc)]=(_0x48f113<-0x2c*0xe+0x636+-0x3ce?-(-0xccf+0x266*-0xb+0x2732):-0x143b+0xaa*0x18+0x44c)*(Math['exp'](_0x1d812b)-(-0x2050+-0x2192+-0x41e3*-0x1));}}['calcFocalP'+'oint'](_0x424038,_0x249f9c){_0x424038['set'](0x202*-0xe+0x17e+0x1a9e,0x62*-0x1f+0x1acb+0x1*-0xeed,-0x246e+0x925+-0x575*-0x5);}get['isSogs'](){return!(0x10e2+-0x29*-0xd+0x12f7*-0x1);}get['shBands'](){var _0x3e0c9d;return{0xc0:0x1,0x200:0x2,0x3c0:0x3}[(_0x3e0c9d=this['sh_centroi'+'ds'])==null?void(-0x880+0x15ce+0x83*-0x1a):_0x3e0c9d['width']]??-0x1531+0xfc3+0x5*0x116;}async['decompress'](){const _0x5e5001=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3'],{shBands:_0x589178}=this,{means_l:_0x48f88c,means_u:_0x3442bb,quats:_0x4de94a,scales:_0x1e5f75,sh0:_0x196966,sh_labels:_0x2e167e,sh_centroids:_0x46f474}=this;if(_0x48f88c['_levels'][-0x721+-0x251f+-0x2c4*-0x10]=await Ci(_0x48f88c),_0x3442bb['_levels'][-0x1*-0x22e5+-0x1*-0x1f19+-0x1*0x41fe]=await Ci(_0x3442bb),_0x4de94a['_levels'][0x50d*-0x7+-0xa9c+0x7*0x691]=await Ci(_0x4de94a),_0x1e5f75['_levels'][-0x1*-0x707+-0x1f8f+0x1888]=await Ci(_0x1e5f75),_0x196966['_levels'][-0x2361+0xfcc+-0x1*-0x1395]=await Ci(_0x196966),_0x589178>-0x1e8b+-0x7*-0x2b7+0xe*0xd3){_0x2e167e['_levels'][-0xb0b+-0x22d2+-0xc7*-0x3b]=await Ci(_0x2e167e),_0x46f474['_levels'][-0x13a1+0x2*0xa4a+0x51*-0x3]=await Ci(_0x46f474);const _0x307cd6=[];for(let _0x1d28fe=-0x1a5c+0x4a0*-0x4+-0x13f*-0x24;_0x1d28fe<-0x17f3+0xd*-0x28c+0x393c;++_0x1d28fe)_0x307cd6['push']('f_rest_'+_0x1d28fe);_0x5e5001['splice'](_0x5e5001['indexOf']('f_dc_0')+(0x1cfc+0x3*-0x48f+-0xf4e),-0x1ac+-0x1cc9*-0x1+-0x1b1d,..._0x307cd6);}const _0x1b0be5={};_0x5e5001['forEach'](_0x5d99d0=>{_0x1b0be5[_0x5d99d0]=new Float32Array(this['numSplats']);});const _0x54a38f=new D(),_0x33cbdf=new le(),_0x17f72b=new D(),_0x1608f7=new re(),_0x174420=_0x589178>-0x232+-0x1*-0x26ab+-0x2479?new Float32Array(-0x1c50+-0x48b*0x7+-0x1*-0x3c4a):null,_0x44437b=this['createIter'](_0x54a38f,_0x33cbdf,_0x17f72b,_0x1608f7,_0x174420);for(let _0x9abca7=-0x3ab+-0x48c+0x3*0x2bd;_0x9abca7<this['numSplats'];++_0x9abca7)if(_0x44437b['read'](_0x9abca7),_0x1b0be5['x'][_0x9abca7]=_0x54a38f['x'],_0x1b0be5['y'][_0x9abca7]=_0x54a38f['y'],_0x1b0be5['z'][_0x9abca7]=_0x54a38f['z'],_0x1b0be5['rot_1'][_0x9abca7]=_0x33cbdf['x'],_0x1b0be5['rot_2'][_0x9abca7]=_0x33cbdf['y'],_0x1b0be5['rot_3'][_0x9abca7]=_0x33cbdf['z'],_0x1b0be5['rot_0'][_0x9abca7]=_0x33cbdf['w'],_0x1b0be5['scale_0'][_0x9abca7]=_0x17f72b['x'],_0x1b0be5['scale_1'][_0x9abca7]=_0x17f72b['y'],_0x1b0be5['scale_2'][_0x9abca7]=_0x17f72b['z'],_0x1b0be5['f_dc_0'][_0x9abca7]=(_0x1608f7['x']-(-0x1069*0x1+0x14d7+0x7e*-0x9+0.5))/An,_0x1b0be5['f_dc_1'][_0x9abca7]=(_0x1608f7['y']-(-0x9*0x13f+0x3ae*0x8+-0xf*0x137+0.5))/An,_0x1b0be5['f_dc_2'][_0x9abca7]=(_0x1608f7['z']-(0xa*-0x83+0x1b46+-0x1628+0.5))/An,_0x1b0be5['opacity'][_0x9abca7]=_0x1608f7['w']<=-0x2678+-0x2000+0x52*0xdc?-(0x157c+0xafd+-0x2051*0x1):_0x1608f7['w']>=-0x135f*0x1+0x2443+-0x10e3?-0x30*0x7+0x19b2+0x376*-0x7:-Math['log']((-0x1*0x22d3+-0x129a+0x1*0x356e)/_0x1608f7['w']-(0x2c5*-0x2+0xb10+-0x585)),_0x174420){for(let _0x3848ff=0x2446*0x1+-0xe0f*0x1+0x1637*-0x1;_0x3848ff<-0x3*0x255+0x230e+-0x2*0xdf1;++_0x3848ff)_0x1b0be5['f_rest_'+_0x3848ff][_0x9abca7]=_0x174420[_0x3848ff];}return new qn([{'name':'vertex','count':this['numSplats'],'properties':_0x5e5001['map'](_0x4a1629=>({'name':_0x4a1629,'type':'float','byteSize':0x4,'storage':_0x1b0be5[_0x4a1629]}))}]);}['packGpuMem'+'ory'](){const {means_l:_0x565859,means_u:_0x114b24,quats:_0x1128b1,scales:_0x329a99,sh_labels:_0x22bad3,numSplats:_0x43b4bc}=this,{device:_0x156613}=_0x565859,{scope:_0x172def}=_0x156613,_0x52d6f3=$t['createShad'+'er'](_0x156613,{'uniqueName':'GsplatSogs'+'ReorderSha'+'der','attributes':{'vertex_position':Me},'vertexChunk':'fullscreen'+'QuadVS','fragmentGLSL':uC,'fragmentWGSL':pC,'fragmentOutputTypes':['uvec4']}),_0x5c2994=new gt({'colorBuffer':this['packedText'+'ure'],'depth':!(0x1f83+0x3*-0xb14+0x1ba),'mipLevel':0x0});_0x156613['setCullMod'+'e'](bt),_0x156613['setBlendSt'+'ate'](pt['NOBLEND']),_0x156613['setDepthSt'+'ate'](Yt['NODEPTH']),mC(_0x172def,{'means_l':_0x565859,'means_u':_0x114b24,'quats':_0x1128b1,'scales':_0x329a99,'sh_labels':_0x22bad3??_0x565859,'numSplats':_0x43b4bc}),Ar(_0x156613,_0x5c2994,_0x52d6f3),_0x5c2994['destroy'](),_0x52d6f3['destroy']();}async['prepareGpu'+'Data'](){const {device:_0x3684fa,height:_0x259491,width:_0x44fc55}=this['means_l'];this['means_l']['_levels'][-0x67*-0x3d+0x22f0+-0x3b7b]=await Ci(this['means_l']),this['means_u']['_levels'][-0x2613+0x210*-0x3+0x2c43]=await Ci(this['means_u']),this['packedText'+'ure']=new _e(_0x3684fa,{'name':'sogsPacked'+'Texture','width':_0x44fc55,'height':_0x259491,'format':Ue,'mipmaps':!(0x7d4+0x9*-0xe8+-0x55*-0x1)}),_0x3684fa['on']('devicerest'+'ored',()=>{this['packGpuMem'+'ory']();}),this['packGpuMem'+'ory']();}['reorderDat'+'a'](){return this['prepareGpu'+'Data']();}}async function SC(){let _0x466f3f=null,_0x5df6f2=null,_0xe68d50=null,_0x1a4c3f=null,_0x3ac658=null,_0x46dec9=null,_0x4a48c8=null,_0x2a284b=null,_0x2302c6=null,_0x4ccf85=null,_0x26b0fc=null,_0x2eb637=null,_0x48fd75=null,_0x1d352e=null,_0x5e3053=null,_0x1d9b5d=null,_0x368889=null,_0x257f08=null,_0x335161=null,_0x16acbf=null,_0x47ac12=null,_0x8e9095=null,_0x998b43=null,_0x579b5b=null,_0x11d4bf=Float32Array['BYTES_PER_'+'ELEMENT'],_0x2a824f=Uint32Array['BYTES_PER_'+'ELEMENT'],_0x166302=-0x13f+0x258b*-0x1+0x26ca,_0x5257ab=!(-0x20a9+-0x12c6+0x336f),_0x209cd4,_0x528808,_0x1cfb03={'x':0x0,'y':0x0,'z':0x0},_0x366830={'x':0x0,'y':0x0,'z':0x0},_0x7eafbe=!(-0x11*-0x2+-0x220*-0xd+-0x1*0x1bc2),_0x2c8276=!(0x10d1+0x79*-0x20+-0x1*0x1b1),_0x5dd86c=!(-0x257*0xb+0x6e0+0xf*0x142),_0x19af9e=!(-0x383*0x3+0x7f*-0x1+-0x235*-0x5),_0x3301bb=-0x1*-0xb3f+-0x1f8+0x7d*-0x13,_0x5158e3=0xd0+-0x11c9+-0x1*-0x10f9,_0x2c3088=!(-0x2a2+0xf93*0x2+0x32b*-0x9),_0x3da79a=null,_0x1abc06=!(-0x2*-0x663+-0x17d6*0x1+0xb11),_0x3b23cf=-0x6f1+-0x2*0x37f+0xdef,_0x5ee8a0=0x1fa8+0x254c+0x4*-0x113d,_0x1ad198={'x':0x0,'y':0x0,'z':0x0},_0xe0fd93={'x':0x0,'y':0x0,'z':0x0},_0x558f13,_0x7940cb;self['onmessage']=async _0x2e12f5=>{const {data:_0x3254d0}=_0x2e12f5;switch(_0x3254d0['type']){case'initWorker':await _0x6e5d8f(_0x3254d0['sortWasmUr'+'l']),self['postMessag'+'e']({'type':'initialize'+'d'});break;case'initData':if(_0x166302=_0x3254d0['centers']['length']/(0x6*-0x2ea+-0x95*0x20+0x241f),_0x166302<=-0x9*-0x5e+-0x812+0x4c4||!_0x5df6f2)return;_0x2a3cb2(),_0x5257ab=_0x3254d0['is4d'],_0x558f13=_0x3254d0['id'];const _0xcc58ec=_0x51e62b(_0x166302);if(_0x2a55c6(_0xcc58ec),_0xe68d50[0x18c1+-0x1ff7+0x736]=_0x1ad198['x'],_0xe68d50[-0xb9*-0x2f+0x1*0xedb+-0x30d1]=_0x1ad198['y'],_0xe68d50[-0xc0c*0x3+0x6d3*-0x3+0xb53*0x5]=_0x1ad198['z'],_0x1a4c3f[0x95*0x2f+0x34*-0x5a+-0x913]=_0xe0fd93['x'],_0x1a4c3f[0x12*-0x17d+0x778*0x2+0x1*0xbdb]=_0xe0fd93['y'],_0x1a4c3f[-0x1d80+0x26*0xbe+-0x14e*-0x1]=_0xe0fd93['z'],_0x46dec9&&_0x3254d0['centers']&&_0x46dec9['length']===_0x3254d0['centers']['length']){const _0x3d99b0=new Float32Array(_0x3254d0['centers']);_0x46dec9['set'](_0x3d99b0);}if(_0x2a284b&&_0x3254d0['timeIndex']&&_0x2a284b['length']===_0x3254d0['timeIndex']['length']){const _0x3a98ab=new Uint32Array(_0x3254d0['timeIndex']);_0x2a284b['set'](_0x3a98ab);}if(_0x26b0fc&&_0x3254d0['motion']&&_0x26b0fc['length']===_0x3254d0['motion']['length']){const _0x431a46=new Float32Array(_0x3254d0['motion']);_0x26b0fc['set'](_0x431a46);}if(_0x5257ab&&_0x2302c6&&_0x4ccf85&&_0x3254d0['muT']&&_0x3254d0['tScale']&&_0x2302c6['length']===_0x3254d0['muT']['length']&&_0x4ccf85['length']===_0x3254d0['tScale']['length']&&(_0x2302c6['set'](_0x3254d0['muT']),_0x4ccf85['set'](_0x3254d0['tScale'])),_0x4a48c8){for(let _0x337cd1=0xe58+0x21ad+-0x3005;_0x337cd1<_0x4a48c8['length'];++_0x337cd1)_0x4a48c8[_0x337cd1]=_0x337cd1;}_0x3ac658&&_0x3254d0['timeOption']&&_0x3ac658['set'](_0x3254d0['timeOption']),_0x56ffc7(),_0x1abc06=!(-0xeaa+-0x16ca+-0x11a*-0x22),_0x5dd86c=!(-0x1d89*0x1+-0x1d59+0x3ae2),_0x3555a0();break;case'setTime':_0x209cd4=_0x3254d0['time'],_0x3555a0();break;case'setUseTemp'+'oralSort':_0x7eafbe=_0x3254d0['useTempora'+'lSort'];break;case'setUseDyna'+'micSort':_0x2c8276=_0x3254d0['useDynamic'+'Sort'];break;case'sort':if(!_0xe68d50)return;_0xe68d50[-0x17ef+-0x10a6*0x1+0x3*0xd87]=_0x3254d0['cameraPosi'+'tion']['x'],_0xe68d50[0x76*0x1b+-0x1*-0x911+-0x1582]=_0x3254d0['cameraPosi'+'tion']['y'],_0xe68d50[-0x16cd+-0xdef+0x24be]=_0x3254d0['cameraPosi'+'tion']['z'],_0x1a4c3f[-0x1a3d+0xd67+0xcd6]=_0x3254d0['cameraDire'+'ction']['x'],_0x1a4c3f[0x1*0x8cd+0xcf*-0x7+0x49*-0xb]=_0x3254d0['cameraDire'+'ction']['y'],_0x1a4c3f[-0x127*-0x1b+0x1863+-0x1bbf*0x2]=_0x3254d0['cameraDire'+'ction']['z'],_0x1ad198['x']=_0x3254d0['cameraPosi'+'tion']['x'],_0x1ad198['y']=_0x3254d0['cameraPosi'+'tion']['y'],_0x1ad198['z']=_0x3254d0['cameraPosi'+'tion']['z'],_0xe0fd93['x']=_0x3254d0['cameraDire'+'ction']['x'],_0xe0fd93['y']=_0x3254d0['cameraDire'+'ction']['y'],_0xe0fd93['z']=_0x3254d0['cameraDire'+'ction']['z'],_0x3555a0();break;}};const _0x2a3cb2=()=>{_0x5158e3=Math['max'](-0x5*0x3d9+-0x20*-0x9f+-0x99,Math['min'](-0x1ed1+-0x16d3*0x1+0x35b8,Math['round'](Math['log2'](_0x166302/(0x1818+0x14f2+-0x2d06))))),_0x3301bb=(-0x9ef*0x3+-0x2c*-0x29+-0x1*-0x16c3)**_0x5158e3+(-0x5*0x42e+0x2411*-0x1+0x4*0xe3e);},_0x2a55c6=_0x2dccce=>{_0x2eb637=-0x8*0x394+0x22cc+-0x1*0x62c,_0x48fd75=_0x2eb637+_0x166302*_0x11d4bf*(-0x1020+0x1801+-0x7de),_0x257f08=_0x48fd75+(-0x2559+0x25*0xa4+0xe09)*_0x11d4bf*(0x2f+-0x14a2+0x1475*0x1),_0x335161=_0x257f08+_0x166302*_0x2a824f,_0x16acbf=_0x335161+(0x1d21+-0x1*-0x1a62+-0x3780)*_0x11d4bf,_0x47ac12=_0x16acbf+(-0x7f7*-0x1+0x22e0+-0x2ad4)*_0x11d4bf,_0x8e9095=_0x47ac12+(-0x1*-0x19d1+-0x2198+-0x3e5*-0x2)*_0x11d4bf,_0x998b43=_0x8e9095+(0xffd*-0x1+0x1*-0x1f6d+0x2f6d)*_0x11d4bf,_0x579b5b=_0x998b43+_0x166302*_0x2a824f,_0x46dec9=new Float32Array(_0x2dccce,_0x2eb637,_0x166302*(0x1*0x1885+0x14db*0x1+-0x4f*0x93)),_0x3ac658=new Float32Array(_0x2dccce,_0x48fd75,0x1*0x1a23+-0x18e5+0x1*-0x76),_0x4a48c8=new Uint32Array(_0x2dccce,_0x257f08,_0x166302),_0xe68d50=new Float32Array(_0x2dccce,_0x335161,-0x1183+0x9d*0x17+0x1*0x36b),_0x1a4c3f=new Float32Array(_0x2dccce,_0x16acbf,-0x6d0+0x4cd*-0x7+0x5*0x816),_0x5257ab&&(_0x1d9b5d=_0x579b5b+_0x3301bb*_0x2a824f,_0x368889=_0x1d9b5d+_0x166302*_0x11d4bf,_0x5e3053=_0x368889+_0x166302*_0x11d4bf,_0x1d352e=_0x5e3053+_0x166302*(-0x1d6b+-0x1110+0x2e7e)*_0x11d4bf,_0x2302c6=new Float32Array(_0x2dccce,_0x1d9b5d,_0x166302),_0x4ccf85=new Float32Array(_0x2dccce,_0x368889,_0x166302),_0x26b0fc=new Float32Array(_0x2dccce,_0x5e3053,_0x166302*(0x1*0x22fc+0x177c*0x1+0xcd*-0x49)),_0x2a284b=new Uint32Array(_0x2dccce,_0x1d352e,_0x166302));},_0x6e5d8f=async _0x6ebe03=>{_0x3b23cf=0x20*-0xdf+-0xb5f+0x2740;const _0x220400={'env':{'memory':new WebAssembly['Memory']({'initial':_0x3b23cf}),'pthread_self':function(){return 0x1853+-0x1e8e+0x1*0x63b;},'emscripten_builtin_memalign':function(){return-0x1*-0xf4d+-0x1ebc+-0x525*-0x3;},'loggerVec3':(_0x47a743,_0x2079a1,_0x3b8110,_0x22a341)=>{console['log']('C++\x20logger'+'Vec3\x20['+_0x47a743+']\x200:'+_0x2079a1+'\x201:'+_0x3b8110+'\x202:'+_0x22a341);},'loggerFloat':(_0x4430b7,_0x541159)=>{console['log']('C++\x20LogFlo'+'at\x20['+_0x4430b7+']\x20a:'+_0x541159);},'loggerValue':(_0x3f13a2,_0x33e6f8,_0x2cf354,_0x3c6eeb,_0x18e8fb)=>{console['log']('C++\x20logger'+'Value\x20['+_0x3f13a2+']\x20minDist:'+_0x33e6f8+'\x20maxDist:'+_0x2cf354+'\x20range:'+_0x3c6eeb+'\x20divider:'+_0x18e8fb);},'loggerCamera':(_0x3df977,_0x1b3ec2,_0x5598ed,_0x3636b8,_0x4e54ac,_0x2e980c,_0x8e7038)=>{console['log']('C++\x20logger'+'Camera\x20['+_0x3df977+']\x20x:'+_0x1b3ec2+'\x20y:'+_0x5598ed+'\x20z:'+_0x3636b8+'\x20dx:'+_0x4e54ac+'\x20dy:'+_0x2e980c+'\x20dz:'+_0x8e7038);},'loggerBound':(_0x1cf0ab,_0x436510,_0x5080fc,_0x402f11,_0x50fa23,_0xcc3369)=>{console['log']('C++\x20logger'+'Bound\x20minX'+':'+_0x1cf0ab+'\x20minY:'+_0x436510+'\x20minZ:'+_0x5080fc+'\x20maxX:'+_0x402f11+'\x20maxY:'+_0x50fa23+'\x20maxZ:'+_0xcc3369);},'loggerDebug':_0x5d570c=>{console['log']('C++\x20logger'+'Debug\x20['+_0x5d570c+']');}}};try{const _0x5e1961=await(await fetch(_0x6ebe03))['arrayBuffe'+'r']();return _0x466f3f=(await WebAssembly['instantiat'+'e'](_0x5e1961,_0x220400))['instance'],_0x5df6f2=_0x220400['env']['memory'],_0x466f3f;}catch(_0x281ffd){throw console['error']('WASM'+':',_0x281ffd),_0x281ffd;}},_0x4c2048=_0x154c9a=>{if(_0x154c9a<=-0x1a34+0x1*0x2057+-0x623)return 0xf1a*-0x1+-0xc8e+0x61*0x49;let _0x38ff2c=_0x154c9a*_0x11d4bf*(0x13c3+-0x78b+-0xc35);_0x38ff2c+=_0x154c9a*_0x2a824f,_0x38ff2c+=(0xb47+-0x2*0x10b0+0x161c)*_0x11d4bf,_0x38ff2c+=(0x27f+0xa11+-0xc8d)*_0x11d4bf,_0x38ff2c+=(-0x23fa+0x1*0x1e2c+0x5d1*0x1)*_0x11d4bf,_0x38ff2c+=(-0x1f0b+-0x6ef+0x25fd)*_0x11d4bf,_0x38ff2c+=_0x154c9a*_0x11d4bf,_0x38ff2c+=_0x3301bb*_0x2a824f,_0x38ff2c+=(0x162e+0x1e9c+-0x3466)*_0x11d4bf*(-0x1139+0xb88+0x5b3),_0x38ff2c+=_0x154c9a*_0x2a824f,_0x5257ab&&(_0x38ff2c+=_0x154c9a*_0x11d4bf,_0x38ff2c+=_0x154c9a*_0x11d4bf,_0x38ff2c+=_0x154c9a*_0x11d4bf*(0x8fe*0x1+-0x825+0x6b*-0x2));const _0x3492b9=(0x1c62*0x1+0x3b*0x77+-0x378f)*(-0x8*0x42c+-0x23b1*-0x1+0x1af);return Math['ceil'](_0x38ff2c/_0x3492b9);},_0x51e62b=_0xcb7bf9=>{const _0x22d482=_0x4c2048(_0xcb7bf9);return _0x22d482>_0x3b23cf?(_0x5df6f2['grow'](_0x22d482-_0x3b23cf),_0x3b23cf=_0x22d482):_0x5df6f2['grow'](-0x26ea+-0x177b*-0x1+-0x1*-0xf6f),_0x5df6f2['buffer'];},_0x56ffc7=()=>{if(!_0x466f3f)return;const {calcAABB:_0xd2fec0}=_0x466f3f['exports'];_0xd2fec0(_0x2eb637,_0x47ac12,_0x8e9095,_0x166302);},_0x3555a0=()=>{_0x3da79a&&clearTimeout(_0x3da79a),_0x3da79a=setTimeout(()=>{_0x3da79a=null,_0x5521a4();},-0x208e+-0xbf9*0x3+0x4479);},_0x5521a4=()=>{if(!_0x466f3f||!_0x1abc06||_0x4a48c8['length']!==_0x166302||_0x257f08===null||_0x2eb637===null||_0x335161===null||_0x16acbf===null||_0x47ac12===null||_0x8e9095===null)return;const _0x1bd510=_0xe68d50[0x5e3*0x5+0x1c88+-0xb*0x545],_0x54d7c5=_0xe68d50[0x29e*-0x1+-0x58a+0x829*0x1],_0x57be77=_0xe68d50[0x1*0x20a3+0xecc+-0x2f6d],_0x45eb2b=_0x1a4c3f[-0x2b1+0x6e5+-0x434],_0x4aa332=_0x1a4c3f[-0x1681*0x1+-0x1a88+0x310a],_0x59caf3=_0x1a4c3f[0x35e*0xa+0xb8*-0x3+-0x6d*0x4a],_0xb74c89=0x1f1b*0x1+-0x1ab5*0x1+-0x233*0x2+0.001;if(!_0x5dd86c&&Math['abs'](_0x1bd510-_0x1cfb03['x'])<_0xb74c89&&Math['abs'](_0x54d7c5-_0x1cfb03['y'])<_0xb74c89&&Math['abs'](_0x57be77-_0x1cfb03['z'])<_0xb74c89&&Math['abs'](_0x45eb2b-_0x366830['x'])<_0xb74c89&&Math['abs'](_0x4aa332-_0x366830['y'])<_0xb74c89&&Math['abs'](_0x59caf3-_0x366830['z'])<_0xb74c89&&Math['abs'](_0x209cd4-_0x528808)<-0x1f0d*0x1+0x6d3+0x183a+0.01)return;if(_0x19af9e){_0x2c3088=!(-0x150b+-0x150a+0x2a15);return;}_0x19af9e=!(0x1a*0xe1+-0x17d8+0xfe),_0x5dd86c=!(-0x23ae*0x1+0x1ed4*0x1+0x4db),_0x528808=_0x209cd4,_0x1cfb03['x']=_0x1bd510,_0x1cfb03['y']=_0x54d7c5,_0x1cfb03['z']=_0x57be77,_0x366830['x']=_0x45eb2b,_0x366830['y']=_0x4aa332,_0x366830['z']=_0x59caf3,_0x2c3088=!(-0x4c*0x3+-0xab3*-0x1+-0x9ce);const {sortIndexes:_0x22f904}=_0x466f3f['exports'];try{const _0x359bd1=_0x22f904(_0x257f08,_0x2eb637,_0x5e3053,_0x1d9b5d,_0x368889,_0x335161,_0x16acbf,_0x47ac12,_0x8e9095,_0x998b43,_0x579b5b,_0x209cd4||-0x24d+0x7*0x3f+0x94,_0x7eafbe,_0x2c8276,_0x5257ab,_0x166302,_0x3301bb,_0x5158e3,_0x48fd75,_0x1d352e),_0x3df431=new Uint32Array(_0x4a48c8);if(_0x359bd1===-0x1f5+0x139c+0x11a7*-0x1){debugger;console['log']('____\x20ENGIN'+'E','Indexes\x20co'+'unt\x20===\x20',_0x359bd1);}const _0x3f7a0a=_0x166302!==_0x5ee8a0||_0x7940cb!==_0x558f13;self['postMessag'+'e']({'type':'sortComple'+'ted','count':_0x359bd1,'order':_0x3df431,'isNewOrder':_0x3f7a0a},[_0x3df431['buffer']]),_0x5ee8a0=_0x166302,_0x7940cb=_0x558f13;}catch(_0x58df7d){console['error'](':',_0x58df7d),self['postMessag'+'e']({'type':'error','error':_0x58df7d['message']});}_0x19af9e=!(-0x2*0x977+0x3*-0x582+-0x1d*-0x139),_0x2c3088&&_0x3555a0();};}class yC extends me{constructor(){super(),h(this,'worker',null),h(this,'numSplats',0x1599+0x11a2+-0x391*0xb),h(this,'is4d',!(-0xe9d*0x1+-0xfd6*0x1+-0x1e73*-0x1)),h(this,'sortStartT'+'ime',-0x70*0x47+-0x1352*-0x2+-0x1e5*0x4),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'data',{}),(this['orderTextu'+'re']=null,this['backOrderT'+'exture']=null,this['worker']=null,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+SC['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0xc043a6=>{var _0x42562e;if(!this['worker'])return;const {data:_0x475fac}=_0xc043a6;switch(_0x475fac['type']){case'initialize'+'d':this['fire']('initialize'+'d');break;case'sortComple'+'ted':_0x475fac['order']&&(_0x475fac['isNewOrder']&&(this['orderTextu'+'re']=this['backOrderT'+'exture']),(_0x42562e=this['orderTextu'+'re'])==null||_0x42562e['write'](0xe37*0x2+0xe8d*-0x1+0xbb*-0x13,0x1b*0x39+-0x217f+0x1b7c,this['orderTextu'+'re']['width'],this['orderTextu'+'re']['height']-(0x2*-0x112+-0x4*0xf1+0x5e9),_0x475fac['order']));let _0x4648b1=0x97*-0x35+0x2673+-0x730;this['sortStartT'+'ime']!==0x6b7+0x165f+-0x1d16&&(_0x4648b1=performance['now']()-this['sortStartT'+'ime']),this['fire']('updated',_0xc043a6['data']['count'],_0x4648b1,_0x475fac['isNewOrder']),this['sortStartT'+'ime']=-0x7fe*-0x1+0x12*0x1bb+0x686*-0x6;break;case'error':console['error']('Worker:',_0x475fac['error']),this['fire']('error',_0x475fac['error']);break;}},this['worker']['postMessag'+'e']({'type':'initWorker','sortWasmUrl':'https://4d'+'v-viewer.p'+'roject.ume'+'et.ink/sor'+'ter-traili'+'ng.wasm'});}['initData'](_0x250569,_0x3f59a0,_0x47436b,_0x3a5a4a,_0x5a858b,_0x51e17a,_0x45f4fe,_0x550edc){var _0x1057aa;this['is4d']=_0x550edc,this['numSplats']=_0x3f59a0['length']/(-0x3*-0xb3+-0x5*-0x209+0x49*-0x2b),(!_0x45f4fe||_0x45f4fe['length']===0x23dd+0x1c*-0xca+0x2f*-0x4b)&&(_0x45f4fe=[0x2*0x8fa+0x1c3f+0x1*-0x2e33,0x197a+0x1*0x146f+0x427*-0xb]),this['orderTextu'+'re']||(this['orderTextu'+'re']=_0x250569),this['backOrderT'+'exture']=_0x250569;const _0x370afd=new Date()['getTime']();(_0x1057aa=this['worker'])==null||_0x1057aa['postMessag'+'e']({'type':'initData','centers':_0x3f59a0,'muT':_0x47436b,'tScale':_0x3a5a4a,'motion':_0x5a858b,'timeIndex':_0x51e17a,'timeOption':_0x45f4fe,'is4d':_0x550edc,'id':_0x370afd});}['setCamera'](_0x480db5,_0x40e426){this['worker']&&(!_0x480db5||!_0x40e426||(this['data']['cameraPosi'+'tion']={'x':_0x480db5['x'],'y':_0x480db5['y'],'z':_0x480db5['z']},this['data']['cameraDire'+'ction']={'x':_0x40e426['x'],'y':_0x40e426['y'],'z':_0x40e426['z']},this['sortStartT'+'ime']===-0x2*0x6fe+0x1*-0x1e71+0x2c6d&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'sort','cameraPosition':{'x':_0x480db5['x'],'y':_0x480db5['y'],'z':_0x480db5['z']},'cameraDirection':{'x':_0x40e426['x'],'y':_0x40e426['y'],'z':_0x40e426['z']}})));}['setCurrent'+'Time'](_0x3bbfd7){this['worker']&&(this['data']['time']=_0x3bbfd7,this['sortStartT'+'ime']===-0x7db*-0x1+-0x36c+0x1*-0x46f&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'setTime','time':_0x3bbfd7}));}['setUseTemp'+'oralSort'](_0x2f6a74){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseTemp'+'oralSort','useTemporalSort':_0x2f6a74});}['setUseDyna'+'micSort'](_0x3d72c6){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseDyna'+'micSort','useDynamicSort':_0x3d72c6});}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}const vC=new te(),Va=new D(),Ga=new D(),Sc=[-0x19d6+0xfe*-0x4+0x1dce,0x1bb4+-0xc3*-0x15+-0x71*0x63];class xC{constructor(_0x3a51ab,_0x1f22aa={}){h(this,'resource'),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'_material'),h(this,'meshInstan'+'ce'),h(this,'options',{}),h(this,'sorter',null),h(this,'time',-0x1*-0x223e+0x1547+0xe9*-0x3d),h(this,'lastCamera'+'Position',new D()),h(this,'lastCamera'+'Direction',new D()),h(this,'resolveSH',null),h(this,'cameras',[]),h(this,'forceUpDat'+'eSorterTim'+'e',(_0x49d831,_0x34e881=void(-0x732*0x1+0x107+0x62b))=>{(_0x34e881||_0x34e881===0x138f+-0xbf6+-0x1*0x799)&&(this['material']['setParamet'+'er']('uTime',_0x34e881),this['updateTime'](_0x34e881)),this['sort'](_0x49d831);}),(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Instance',_0x3a51ab['numSplats']),this['resource']=_0x3a51ab,this['orderTextu'+'re']=this['resource']['createText'+'ure']('splatOrder',Ki,this['resource']['evalTextur'+'eSize'](this['resource']['numSplats'])),this['backOrderT'+'exture']=null,_0x1f22aa['material']?(this['_material']=_0x1f22aa['material'],this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])):(this['_material']=new Xn({'uniqueName':'SplatMater'+'ial','vertexGLSL':'#include\x20\x22'+'gsplatVS\x22','fragmentGLSL':'#include\x20\x22'+'gsplatPS\x22','vertexWGSL':'#include\x20\x22'+'gsplatVS\x22','fragmentWGSL':'#include\x20\x22'+'gsplatPS\x22','attributes':{'vertex_position':Me,'vertex_id_attrib':ph}}),this['configureM'+'aterial'](this['_material']),this['_material']['update']()),this['meshInstan'+'ce']=new He(this['resource']['mesh'],this['_material']),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(-0x6eb+-0x112+0x5*0x199)),this['meshInstan'+'ce']['gsplatInst'+'ance']=this,this['meshInstan'+'ce']['instancing'+'Count']=0xe*0x11+-0x2*-0xcf2+-0x1ad2,this['sorter']=new yC(),this['sorter']['on']('initialize'+'d',()=>{var _0x48f10d,_0x23053c,_0x3e18af,_0x2911fa,_0x5d275f,_0xeabbf3,_0x202204,_0x2ba0b6,_0x16e94e,_0x19b060,_0x4d88eb;const _0x893b8e=new Float32Array(this['resource']['centers']['buffer']['slice']()),_0x5969e5=new Float32Array(((_0x23053c=(_0x48f10d=this['resource']['muT'])==null?void(0x5*-0x9e+0x1b17+0x4cd*-0x5):_0x48f10d['buffer'])==null?void(0x141b+-0x5b5+-0x61*0x26):_0x23053c['slice']())??new Float32Array()),_0x5869cd=new Float32Array(((_0x2911fa=(_0x3e18af=this['resource']['tScale'])==null?void(-0x4e5+0xc4*0xe+-0x5d3):_0x3e18af['buffer'])==null?void(-0x3*-0xcd3+-0x89a+-0x1ddf):_0x2911fa['slice']())??new Float32Array()),_0x266637=new Float32Array(((_0xeabbf3=(_0x5d275f=this['resource']['motion'])==null?void(-0x2*-0xb5d+-0x1c9+0x1*-0x14f1):_0x5d275f['buffer'])==null?void(-0x2*0x424+-0x10e2+-0x1*-0x192a):_0xeabbf3['slice']())??new Float32Array()),_0x3abbb9=new Float32Array(((_0x2ba0b6=(_0x202204=this['resource']['timeIndex'])==null?void(-0x8c+0x64f*-0x1+-0x75*-0xf):_0x202204['buffer'])==null?void(-0x11da+-0xf79+-0x1c1*-0x13):_0x2ba0b6['slice']())??new Float32Array(-0x11*0x80+0x17e7+-0xf67)),_0x11c610=new Float32Array(((_0x19b060=(_0x16e94e=this['resource']['timeOption'])==null?void(-0xf1*-0x1d+-0x107f+-0xace):_0x16e94e['buffer'])==null?void(0x2*-0xcf+0x5fe+-0x460):_0x19b060['slice']())??new Float32Array());(_0x4d88eb=this['sorter'])==null||_0x4d88eb['initData'](this['orderTextu'+'re'],_0x893b8e,_0x5969e5,_0x5869cd,_0x266637,_0x3abbb9,_0x11c610,this['resource']['is4D']);}),this['sorter']['on']('updated',async(_0x4ada72,_0x5d8869,_0x2e0538)=>{var _0x574492;this['meshInstan'+'ce']['instancing'+'Count']=Math['ceil'](_0x4ada72/this['resource']['instanceSi'+'ze']),_0x2e0538&&this['backOrderT'+'exture']&&(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatInst'+'ance\x20updat'+'ed'),[this['orderTextu'+'re'],this['backOrderT'+'exture']]=[this['backOrderT'+'exture'],this['orderTextu'+'re']],await this['resource']['updateText'+'ure'](),this['resource']['configureM'+'aterial'](this['_material']),this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])),_0x2e0538&&((_0x574492=this['resource'])==null||_0x574492['fireAssets'+'ManagerTim'+'eIndex']()),this['material']['setParamet'+'er']('numSplats',_0x4ada72);}),this['setHighQua'+'litySH'](_0x1f22aa['highQualit'+'ySH']??!(-0x4b5+-0x1a47+0x1efd)));}async['updateInst'+'anceData'](_0x55a8e5){var _0x48776f,_0x260f9d;console['log']('____\x20ENGIN'+'E\x20IVAN','updateInst'+'anceData\x20A'+'SSETS\x20GSpl'+'atInstance',_0x55a8e5['numSplats']),this['resource']=_0x55a8e5;const _0x17e134=this['resource']['evalTextur'+'eSize'](_0x55a8e5['centers']['length']/(0x3d*-0x2+-0x6dc*-0x4+-0x1*0x1af3));return(_0x48776f=this['backOrderT'+'exture'])==null||_0x48776f['destroy'](),this['backOrderT'+'exture']=this['resource']['createText'+'ure']('splatOrder'+'2',Ki,_0x17e134),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(-0x19c*-0x9+0x15f0+-0x246c)),(_0x260f9d=this['sorter'])==null||_0x260f9d['initData'](this['backOrderT'+'exture'],_0x55a8e5['centers'],_0x55a8e5['muT'],_0x55a8e5['tScale'],_0x55a8e5['motion'],_0x55a8e5['timeIndex'],_0x55a8e5['timeOption'],_0x55a8e5['is4D']),new Promise(_0x1baf16=>{var _0x2604e7;const _0x23df61=(_0x1b9ad1,_0x2475a6,_0x5f1029)=>{var _0xd3df52;_0x5f1029&&((_0xd3df52=this['sorter'])==null||_0xd3df52['off']('updated',_0x23df61),_0x1baf16(!(0x76*0x42+-0x2*-0x11fc+0x7*-0x97c)));};(_0x2604e7=this['sorter'])==null||_0x2604e7['on']('updated',_0x23df61);});}['destroy'](){var _0x2e93ee,_0x31c717,_0x3a6f45,_0x3c2a41,_0x4ca8c6,_0x31d359;(_0x2e93ee=this['resolveSH'])==null||_0x2e93ee['destroy'](),(_0x31c717=this['material'])==null||_0x31c717['destroy'](),(_0x3a6f45=this['meshInstan'+'ce'])==null||_0x3a6f45['destroy'](),(_0x3c2a41=this['sorter'])==null||_0x3c2a41['destroy'](),(_0x4ca8c6=this['orderTextu'+'re'])==null||_0x4ca8c6['destroy'](),(_0x31d359=this['backOrderT'+'exture'])==null||_0x31d359['destroy']();}set['material'](_0x2b384b){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.set\x20'+'material'),this['_material']!==_0x2b384b&&(this['_material']=_0x2b384b,this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x2b384b));}get['material'](){return this['_material'];}['configureM'+'aterial'](_0x133be3,_0x141570={}){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.conf'+'igureMater'+'ial'),this['resource']['configureM'+'aterial'](_0x133be3),_0x133be3['setParamet'+'er']('numSplats',-0x26de+0x1686*-0x1+0x3d64),_0x133be3['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),_0x133be3['setParamet'+'er']('alphaClip',-0xd*-0x67+-0xf5e+0x1*0xa23+0.3),_0x133be3['setDefine']('DITHER_'+(_0x141570['dither']?'BLUENOISE':'NONE'),''),_0x133be3['cull']=bt,_0x133be3['blendType']=_0x141570['dither']?Cs:Zs,_0x133be3['depthWrite']=!!_0x141570['dither'];}['updateView'+'port'](_0x4731a1){var _0x3191f5;const _0x2326de=_0x4731a1==null?void(-0x9ac+-0x1d01*0x1+-0x1*-0x26ad):_0x4731a1['camera'],_0x411ea5=_0x2326de==null?void(0xc2e+0xf05+-0x1b33):_0x2326de['renderTarg'+'et'],{width:_0x1a67b8,height:_0x1c411d}=_0x411ea5??this['resource']['device'];Sc[-0xfc8+0x4a*-0x6d+0x1*0x2f4a]=_0x1a67b8,Sc[-0xd95+-0x1*0x1fae+0x2d44]=_0x1c411d;const _0xdb91d5=(_0x3191f5=_0x2326de==null?void(-0x6fb+0x1*0x1c2b+-0x1530):_0x2326de['camera'])==null?void(-0x32*0x9+-0x1df*-0xf+0x3*-0x8c5):_0x3191f5['xr'];_0xdb91d5!=null&&_0xdb91d5['active']&&_0xdb91d5['views']['list']['length']===0x13f*0x9+0x1*0x493+-0xfc8&&(Sc[-0x2264+0x5cd*0x5+0x563*0x1]*=0x23d4+0x1*-0xc7a+-0x7a*0x31+0.5),this['material']['setParamet'+'er']('viewport',Sc);}['sort'](_0x58e711){if(this['sorter']){const _0xdad5e5=_0x58e711['getWorldTr'+'ansform']();_0xdad5e5['getTransla'+'tion'](Va),_0xdad5e5['getZ'](Ga);const _0xa23487=this['meshInstan'+'ce']['node']['getWorldTr'+'ansform'](),_0x423444=vC['invert'](_0xa23487);_0x423444['transformP'+'oint'](Va,Va),_0x423444['transformV'+'ector'](Ga,Ga),(!Va['equalsAppr'+'ox'](this['lastCamera'+'Position'])||!Ga['equalsAppr'+'ox'](this['lastCamera'+'Direction']))&&(this['lastCamera'+'Position']['copy'](Va),this['lastCamera'+'Direction']['copy'](Ga),this['sorter']['setCamera'](Va,Ga)),this['sorter']['setCurrent'+'Time'](this['time']);}this['updateView'+'port'](_0x58e711);}['update'](){var _0x12c38b;if(this['cameras']['length']>-0x1dce+-0x36*-0x35+0x12a0){const _0x4e918d=this['cameras'][0x1642+0x2b*-0x11+-0x1367];this['sort'](_0x4e918d['_node']),(_0x12c38b=this['resolveSH'])==null||_0x12c38b['render'](_0x4e918d['_node'],this['meshInstan'+'ce']['node']['getWorldTr'+'ansform']()),this['cameras']['length']=-0x1b9c+-0x1828+0x33c4;}}['setHighQua'+'litySH'](_0x39503c){const {resource:_0x43933b}=this,{gsplatData:_0x33a451}=_0x43933b;_0x33a451 instanceof gC&&_0x33a451['shBands']>-0x3*-0x25d+0x22ee+-0x2a05&&_0x39503c===!!this['resolveSH']&&(this['resolveSH']?(this['resolveSH']['destroy'](),this['resolveSH']=null):this['resolveSH']=new fC(_0x43933b['device'],this));}['updateTime'](_0x8e68f){this['time']=_0x8e68f;}}class Rv{constructor(_0x2712d8,_0x45ba8c){h(this,'sceneInfo',{}),h(this,'isDestroye'+'d',!(-0x1292+0x242*0xd+-0x2e*0x3c)),h(this,'device'),h(this,'gsplatData'),h(this,'centers'),h(this,'aabb'),h(this,'mesh'),h(this,'instanceIn'+'dices'),h(this,'gsplatInst'+'ance'),(this['device']=_0x2712d8,this['gsplatData']=_0x45ba8c,this['isDestroye'+'d']=!(-0x2*-0xdbd+-0x4*0x595+-0x1*0x525));const _0x2962f=-0x12a0*0x2+0x1167+0x1459,_0x169e72=Math['ceil'](_0x45ba8c['numSplats']/_0x2962f)*_0x2962f/_0x2962f,_0x36afd8=new Uint32Array(_0x169e72);for(let _0x398748=-0x3*0x3e3+-0x227*-0x1+-0x4c1*-0x2;_0x398748<_0x169e72;++_0x398748)_0x36afd8[_0x398748]=_0x398748*_0x2962f;const _0x1afde8=new kt(_0x2712d8,[{'semantic':ph,'components':0x1,'type':el,'asInt':!(-0xd46*0x1+0x10cf*-0x1+0x1e15)}]),_0x34c0b9=new Float32Array((-0x1*-0xffb+0x1*-0x480+0x1*-0xb6f)*_0x2962f),_0x584d5f=new Uint32Array((0x403+0x74*0x2f+-0x1949)*_0x2962f);for(let _0x3df1f5=0x150e+0x269*-0x5+-0x901;_0x3df1f5<_0x2962f;++_0x3df1f5){_0x34c0b9['set']([-(0x2*0x11fb+0x11b8+-0xd*0x421),-(-0x1*-0x593+0x2*0x2ce+-0xb2e),_0x3df1f5,-0xe0c+-0x20ed+-0x6b6*-0x7,-(0x1d*-0x2+-0x1627+0x1662),_0x3df1f5,0xef+-0x3*-0x120+-0x44e,0xb45+-0xc64*-0x1+-0x17a8,_0x3df1f5,-(0x5*-0xb3+-0x23b3+0xdf*0x2d),0xb*0x1ac+-0x3e*0x2+-0x11e7,_0x3df1f5],_0x3df1f5*(-0x967*0x2+0x2100+-0xe26));const _0x4d8303=_0x3df1f5*(-0xd*0x21f+-0x2*-0x4ae+0x123b);_0x584d5f['set']([-0x22a5+0x9*-0xc2+0x2977+_0x4d8303,0x1*-0x1f19+-0x2*-0x2c3+-0x1994*-0x1+_0x4d8303,0x2405+-0x1*-0x16f6+0x1f*-0x1e7+_0x4d8303,0x1*-0x5d+0x344+-0x1*0x2e7+_0x4d8303,0x86b+0x1ddc+-0x2645+_0x4d8303,0x1*-0xd5d+0xd*-0x1e9+0x2635+_0x4d8303],_0x3df1f5*(-0x13*0x6b+0x17f+-0xc*-0x8a));}this['mesh']=new Ge(_0x2712d8),this['mesh']['setPositio'+'ns'](_0x34c0b9,-0x193*-0x9+-0x7b8+-0x2*0x338),this['mesh']['setIndices'](_0x584d5f),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),this['instanceIn'+'dices']=new Is(_0x2712d8,_0x1afde8,_0x169e72,{'usage':ms,'data':_0x36afd8['buffer']});}['updateData'](){var _0x532d78;const _0x5f52bc=this['gsplatData'];if(!_0x5f52bc)return;const _0xbc266d=0x1*0x1e8+0x13b6+-0x151e,_0x1c7117=Math['ceil'](_0x5f52bc['numSplats']/_0xbc266d)*_0xbc266d/_0xbc266d,_0x42da05=new Uint32Array(_0x1c7117);for(let _0x987155=-0x270c+-0x5*-0xd4+0x22e8;_0x987155<_0x1c7117;++_0x987155)_0x42da05[_0x987155]=_0x987155*_0xbc266d;const _0x10a8fc=new kt(this['device'],[{'semantic':ph,'components':0x1,'type':el,'asInt':!(0x212+-0x2249+0x2037)}]),_0x33b392=new Float32Array((-0x21f8+-0xe13*-0x2+0x5de)*_0xbc266d),_0x59f76d=new Uint32Array((-0x1661+-0x254+0xd*0x1e7)*_0xbc266d);for(let _0x31e7a4=0x1*-0x442+0x2550+-0x210e;_0x31e7a4<_0xbc266d;++_0x31e7a4){_0x33b392['set']([-(-0xa*0x2fc+0xd*0x1fb+0x15e*0x3),-(0x163+-0x99*-0x17+-0xf21),_0x31e7a4,0x713*0x4+0x1ebc+-0x3b07,-(-0x3a*0x9f+-0x15df+0x39e6),_0x31e7a4,0x2e5*0x2+-0x1c+0x1*-0x5ad,0x92*0x32+-0x1e70+0x1ed,_0x31e7a4,-(-0x504+-0x1620*-0x1+-0x1*0x111b),0x20de+-0x1*-0x23c1+-0x449e*0x1,_0x31e7a4],_0x31e7a4*(-0x1*0xecc+0x6ad*0x3+-0x52f));const _0x29a8e2=_0x31e7a4*(-0x2*-0x1076+0x21*0x12+-0x233a);_0x59f76d['set']([-0x56*-0x3d+-0x124e+0x8*-0x46+_0x29a8e2,-0x1027*0x1+-0x169*-0x18+-0x8d8*0x2+_0x29a8e2,-0x2014+-0xcfe*-0x2+-0x16*-0x47+_0x29a8e2,0x88+0x2*0x8d2+-0x2*0x916+_0x29a8e2,-0x3+-0x111f+0x1124+_0x29a8e2,0x16*-0x1+0x1*0x718+-0xc7*0x9+_0x29a8e2],_0x31e7a4*(-0x158d+-0x1b25*-0x1+-0x592));}this['mesh']['setPositio'+'ns'](_0x33b392,0x1*0x563+-0x1f*0x1f+-0x19f),this['mesh']['setIndices'](_0x59f76d),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),(_0x532d78=this['instanceIn'+'dices'])==null||_0x532d78['destroy'](),this['instanceIn'+'dices']=new Is(this['device'],_0x10a8fc,_0x1c7117,{'usage':ms,'data':_0x42da05['buffer']});}['updateText'+'ure'](){}['destroy'](){var _0x59a886,_0x7c4aee,_0x4d6cb2,_0x35d61c;(_0x59a886=this['mesh'])==null||_0x59a886['destroy'](),(_0x7c4aee=this['instanceIn'+'dices'])==null||_0x7c4aee['destroy'](),(_0x4d6cb2=this['gsplatData'])==null||_0x4d6cb2['destroy'](),this['gsplatData']=null,(_0x35d61c=this['gsplatInst'+'ance'])==null||_0x35d61c['destroy'](),this['gsplatInst'+'ance']=void(-0x15ee+0x1f06+-0x918),this['isDestroye'+'d']=!(-0xb05+-0x4*-0x22d+0x251),this['mesh']=null;}get['instanceSi'+'ze'](){return-0x16*-0x4b+-0x221+-0x3d1;}get['numSplats'](){var _0x3cc62a;return(_0x3cc62a=this['gsplatData'])==null?void(0x2372+-0x10a5*-0x1+-0x3417):_0x3cc62a['numSplats'];}['setSceneIn'+'fo'](_0xdce65){}['configureM'+'aterial'](_0x1af1b9){}['evalTextur'+'eSize'](_0x32dfbd){return J['ZERO'];}['appendGSpl'+'atResource'](_0x25403f,_0x2680e4,_0xea876a,_0x9b5ca1,_0x5ea967){}['fireAssets'+'ManagerTim'+'eIndex'](){}['createText'+'ure'](_0x1973af,_0x416bd0,_0x57c291,_0x39a8c9){return new _e(this['device'],{'name':_0x1973af,'width':_0x57c291['x'],'height':_0x57c291['y'],'format':_0x416bd0,'cubemap':!(-0x1860+0x1daf*-0x1+0x3610),'mipmaps':!(0x115b*-0x2+0x2*0x6e2+0x14f3),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,..._0x39a8c9?{'levels':[_0x39a8c9]}:{}});}['instantiat'+'e'](){w['removed']('GSplatReso'+'urce.insta'+'ntiate\x20is\x20'+'removed.\x20U'+'se\x20gsplat\x20'+'component\x20'+'instead');}['createInst'+'ance'](_0x52fab1,_0xda003a){return this['gsplatInst'+'ance']=new xC(_0x52fab1,_0xda003a),this['gsplatInst'+'ance'];}}async function TC(){const _0x19a211=new Float32Array(-0x1897+0x1*-0xc9+0x1961),_0x4bec50=new Int32Array(_0x19a211['buffer']);let _0x55e89e=null,_0x4a4b14=null,_0x5a152a=null,_0x4c347d=null,_0x4a81a4=null,_0x51e392=null,_0x5c0443=null,_0x55973a=null;self['onmessage']=async _0x354002=>{const {data:_0x5af756}=_0x354002;switch(_0x5af756['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x50f128(_0x5af756['numSplats'],_0x5af756['shBands'],_0x5af756['SHData']);break;case'updateColo'+'rData':_0x5810a6(_0x5af756['numSplats'],_0x5af756['cr'],_0x5af756['cg'],_0x5af756['cb'],_0x5af756['ca']);break;case'updateTran'+'sformData':_0x412856(_0x5af756['numSplats'],_0x5af756['is4D'],_0x5af756['x'],_0x5af756['y'],_0x5af756['z'],_0x5af756['rx'],_0x5af756['ry'],_0x5af756['rz'],_0x5af756['rw'],_0x5af756['mx'],_0x5af756['my'],_0x5af756['mz'],_0x5af756['sx'],_0x5af756['sy'],_0x5af756['sz'],_0x5af756['muT'],_0x5af756['tScale']);break;case'calcAabb':_0x20a93e(_0x5af756['numSplats'],_0x5af756['x'],_0x5af756['y'],_0x5af756['z'],_0x5af756['sx'],_0x5af756['sy'],_0x5af756['sz']);break;case'destroyWor'+'ker':_0x5d46fe();break;}};class _0x44f9b5{constructor(_0x10d1b0=-0x1f3f+0x56d+-0x52a*-0x5,_0x2904eb=-0x551+-0xf2b+0x147c,_0x1df6f9=-0x5*-0x1d+-0x2*-0x766+-0xf5d,_0x16a00d=0x1636*-0x1+-0x4b3*0x4+0x1*0x2903){this['x']=_0x10d1b0,this['y']=_0x2904eb,this['z']=_0x1df6f9,this['w']=_0x16a00d;}['set'](_0x50dec0,_0x1607bd,_0x15d4e1,_0x24645c){return this['x']=_0x50dec0,this['y']=_0x1607bd,this['z']=_0x15d4e1,this['w']=_0x24645c,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0xbe4a20=this){let _0x2c8376=_0xbe4a20['length']();return _0x2c8376===0x1*-0x2138+-0x12d3+0x340b?(this['x']=this['y']=this['z']=-0x2*0x1231+-0x9d5+0x2e37*0x1,this['w']=0x1da2+0x1760*-0x1+-0x641):(_0x2c8376=(-0x168a+-0x577*0x3+0x1*0x26f0)/_0x2c8376,this['x']=_0xbe4a20['x']*_0x2c8376,this['y']=_0xbe4a20['y']*_0x2c8376,this['z']=_0xbe4a20['z']*_0x2c8376,this['w']=_0xbe4a20['w']*_0x2c8376),this;}['mulScalar'](_0x10bd1e,_0x50eebd=this){return this['x']=_0x50eebd['x']*_0x10bd1e,this['y']=_0x50eebd['y']*_0x10bd1e,this['z']=_0x50eebd['z']*_0x10bd1e,this['w']=_0x50eebd['w']*_0x10bd1e,this;}}const _0x32df79=_0x3d010e=>{_0x19a211[-0x88e+-0xf7c+-0x180a*-0x1]=_0x3d010e;const _0x6ca9a7=_0x4bec50[-0x23bf+0x5e2+0x2b7*0xb];let _0x5306d8=_0x6ca9a7>>-0x176d+0x2*-0xe13+0x33a3&0x7d8d*-0x1+0x5ccf+0xa0be,_0xb63612=_0x6ca9a7>>-0x8b0+0xbd8*-0x3+0x2c44&-0x233+-0x1d20+0x2cf*0xe;const _0x139511=_0x6ca9a7>>-0x1a1*0x5+0x131*-0x1c+0x2998&0x1d6d+-0x44*-0x2b+-0x27da;return _0x139511<0x1*0x61f+0x2c3*-0x6+0xada?_0x5306d8:_0x139511>-0x26c7+0xb50+-0x9*-0x31d?(_0x5306d8|=-0x5341+-0xc3d8+0x19319,_0x5306d8|=(_0x139511===0x20d0+0x20dd+0x11*-0x3ce?-0x1*0x1a2d+-0x71*0x22+0x32b*0xd:0xac9+-0x6b6*0x1+-0x412)&&_0x6ca9a7&-0x8*0x1d4978+0x87a0e5+0xe2aada,_0x5306d8):_0x139511<0xb*0x29d+0x1fce+-0x1e0e*0x2?(_0xb63612|=-0x89*0x33+0xc4a+0x97*0x27,_0x5306d8|=(_0xb63612>>-0xdee+0xcf3+-0x1*-0x16d-_0x139511)+(_0xb63612>>-0x130*0x11+0x151*0x1b+-0xa6*0x17-_0x139511&-0x10bf+-0x1ff8+-0x2*-0x185c),_0x5306d8):(_0x5306d8|=_0x139511-(0x3*-0xa97+0x7ca*0x2+0x1*0x10a1)<<0x4e9*-0x3+-0x254e+-0x3413*-0x1|_0xb63612>>-0x42b+-0x1c9*-0x12+-0x1bf6,_0x5306d8+=_0xb63612&0x2540+-0x40b+-0x2134,_0x5306d8);},_0x20a93e=(_0x3ee2b6,_0x4b8ede,_0x40c427,_0x2e7b87,_0x211e8c,_0x14f814,_0x3d3f0c)=>{let _0x33811d=-0x1e70+0x1821+0x143*0x5,_0x3b791e=0x13*-0xac+-0x373+0x1037,_0x58d169=-0x1778+0xe5*-0xd+0x2319,_0x2a3d04=-0x227*0x5+-0x1b5*0x3+0x13*0xd6,_0x1595a5=-0x187*-0x9+-0x83b+0x2*-0x2c2,_0x56596c=0x1*-0x1829+0x1dc5+0x2*-0x2ce,_0x24a5b3=!(0x9*-0x3a9+-0x3*0x9b+0x22c2);const _0xd23f14=new Float32Array(-0x116f+-0x2c*-0xd4+0xbb*-0x1a),_0x443320=new Float32Array(0x1*-0xd4d+0x17*-0xfc+0x23f4);for(let _0x37f6ff=-0x1d0c+-0x62*0x66+0x4418;_0x37f6ff<_0x3ee2b6;++_0x37f6ff){const _0x51fe8d=_0x4b8ede[_0x37f6ff],_0x30b32c=_0x40c427[_0x37f6ff],_0x5244f9=_0x2e7b87[_0x37f6ff],_0x36766b=Math['max'](_0x211e8c[_0x37f6ff],_0x14f814[_0x37f6ff],_0x3d3f0c[_0x37f6ff]);if(!isFinite(_0x51fe8d)||!isFinite(_0x30b32c)||!isFinite(_0x5244f9)||!isFinite(_0x36766b))continue;const _0x2c90ed=(0x2495+-0x562+-0x1f31)*Math['exp'](_0x36766b);_0x24a5b3?(_0x24a5b3=!(0x1*0x437+0x201c+0x1229*-0x2),_0x33811d=_0x51fe8d-_0x2c90ed,_0x3b791e=_0x30b32c-_0x2c90ed,_0x58d169=_0x5244f9-_0x2c90ed,_0x2a3d04=_0x51fe8d+_0x2c90ed,_0x1595a5=_0x30b32c+_0x2c90ed,_0x56596c=_0x5244f9+_0x2c90ed):(_0x33811d=Math['min'](_0x33811d,_0x51fe8d-_0x2c90ed),_0x3b791e=Math['min'](_0x3b791e,_0x30b32c-_0x2c90ed),_0x58d169=Math['min'](_0x58d169,_0x5244f9-_0x2c90ed),_0x2a3d04=Math['max'](_0x2a3d04,_0x51fe8d+_0x2c90ed),_0x1595a5=Math['max'](_0x1595a5,_0x30b32c+_0x2c90ed),_0x56596c=Math['max'](_0x56596c,_0x5244f9+_0x2c90ed));}_0x24a5b3||(_0xd23f14[0x994+0x5e*-0x56+-0x100*-0x16]=(_0x33811d+_0x2a3d04)*(0x19f1+-0x257*0x3+-0x4*0x4bb+0.5),_0xd23f14[0x183e+-0x745*-0x5+0x6*-0xa19]=(_0x3b791e+_0x1595a5)*(0x2282+0x2005+-0x4287+0.5),_0xd23f14[0x4a7*-0x7+-0x1*0xaf7+-0x15c5*-0x2]=(_0x58d169+_0x56596c)*(0xa3d*-0x1+-0xde*-0x25+0x1*-0x15d9+0.5),_0x443320[-0xe45+-0x125e*0x2+-0x4a3*-0xb]=(_0x2a3d04-_0x33811d)*(-0x1df*0x5+0x10f*0xd+0x6*-0xbc+0.5),_0x443320[0x3ed+-0x1456+0x106a]=(_0x1595a5-_0x3b791e)*(0x7a6*-0x2+0x1d6d+0x1*-0xe21+0.5),_0x443320[-0x777+-0x1df7*-0x1+-0x167e*0x1]=(_0x56596c-_0x58d169)*(0xcdf+0xab2*0x1+-0x1791+0.5)),self['postMessag'+'e']({'type':'updatedAab'+'bData','center':_0xd23f14,'halfExtents':_0x443320});},_0x412856=(_0xc67eb2,_0x3f78f1,_0xff7477,_0x47d8a0,_0x3f4a0d,_0xae9a7a,_0x43b153,_0x5bb0b7,_0x432465,_0x11dfde,_0x27f9ae,_0x2b0b94,_0xd6ca48,_0x7dd40a,_0x2fa8eb,_0x978dca,_0x2619bf)=>{_0x5d46fe(),_0x55e89e=new Float32Array(_0xc67eb2*(-0xd9*0x23+0xe2+0x1ccc)),_0x4c347d=new Float32Array(_0xc67eb2*(0x366+0x2704+0x2a67*-0x1)),_0x51e392=new Uint16Array(_0xc67eb2*(0x1299+-0x269*0xb+-0x1*-0x7ed)),_0x5a152a=new Float32Array(_0xc67eb2*(0x157d+0xb0c+-0x2*0x1043)),_0x3f78f1&&(_0x4a81a4=new Float32Array(_0xc67eb2*(0x1766+-0x191*-0x12+0xa51*-0x5)),_0x4a4b14=new Float32Array(_0xc67eb2*(-0x1*0x1c1+-0x964+-0xe*-0xcc)),_0x5c0443=new Float32Array(_0xc67eb2*(0x3*-0xa4e+0x1*0x223+0x1cca)),_0x55973a=new Float32Array(_0xc67eb2));const _0x19f7d6=new _0x44f9b5(0x12b9+-0x24e6*0x1+0x122d,0xa90+0xbe3+-0x7*0x335,-0x11b+-0x1*0xcbb+-0x9a*-0x17,0xc1*0xd+0x23d3*-0x1+-0xd03*-0x2);for(let _0x557c57=-0x123f+-0x2208+0x1*0x3447;_0x557c57<_0xc67eb2;_0x557c57++)_0x19f7d6['set'](_0xae9a7a[_0x557c57],_0x43b153[_0x557c57],_0x5bb0b7[_0x557c57],_0x432465[_0x557c57]),_0x19f7d6['normalize'](),_0x19f7d6['w']<0x188c*-0x1+0x1ab*0x9+0x989*0x1&&_0x19f7d6['mulScalar'](-(-0x90d*0x4+-0x792+0x7*0x641)),_0x4c347d[_0x557c57*(0x22c1+0x207b*-0x1+-0x3*0xc1)+(0x1a46+-0x1*-0x2325+-0x3d6b)]=_0xff7477[_0x557c57],_0x4c347d[_0x557c57*(-0x463*-0x1+0x68*0x17+0x8*-0x1b7)+(-0x25e+0x223b+-0x1*0x1fdc)]=_0x47d8a0[_0x557c57],_0x4c347d[_0x557c57*(0x7a*0x1+0x97*-0x15+-0x7*-0x1b4)+(-0x9e*-0x38+0x1204+-0x3492)]=_0x3f4a0d[_0x557c57],_0x55e89e[_0x557c57*(0xccd+0x6*0x47c+-0x1*0x27b2)+(-0x2360+-0x379*0xb+0x4993)]=_0xff7477[_0x557c57],_0x55e89e[_0x557c57*(-0xe*0x1be+0x17bc+0xab)+(0x279*-0x3+0x198d+-0x1221)]=_0x47d8a0[_0x557c57],_0x55e89e[_0x557c57*(0x8*0x47+-0x7f1+0x5bc)+(-0xe76*0x1+0xf0d*0x1+-0x95)]=_0x3f4a0d[_0x557c57],_0x51e392[_0x557c57*(-0x2298+-0x14a7*-0x1+-0x2f*-0x4c)+(-0x20*0x25+0x1*-0x1aab+0x1*0x1f4b)]=_0x32df79(Math['exp'](_0xd6ca48[_0x557c57])),_0x51e392[_0x557c57*(0x3a*-0x3+0xaa8+-0x9f7)+(-0x16*0x20+0xb*0x35+0x7a)]=_0x32df79(Math['exp'](_0x7dd40a[_0x557c57])),_0x51e392[_0x557c57*(0x11e3+-0x1f7d+0xd9d)+(0x4a*-0x28+0x15*0x141+-0xec3)]=_0x32df79(Math['exp'](_0x2fa8eb[_0x557c57])),_0x5a152a[_0x557c57*(0x2b7*0xd+0x13*-0x31+0x1fa5*-0x1)+(0x372+0x2*-0x239+0x100)]=_0x19f7d6['x'],_0x5a152a[_0x557c57*(0xc36*-0x1+0x1440+-0x5*0x19b)+(-0x2520+0x6f*-0x3b+0x17*0x2ba)]=_0x19f7d6['y'],_0x5a152a[_0x557c57*(0xd*-0x1c9+-0x5d6+0x1d0e)+(0x1*0x1851+-0x1e4+-0x166b)]=_0x19f7d6['z'],_0x3f78f1&&_0x4a81a4&&_0x4a4b14&&(_0x4a81a4[_0x557c57*(0x1a39+-0x32f*0x7+0x1*-0x3ed)+(-0x10c3+0x5*0x5f3+0x2*-0x67e)]=_0x11dfde[_0x557c57],_0x4a81a4[_0x557c57*(-0x1b1*0x4+-0x846*-0x4+-0x1a51)+(-0x5*-0x1e+0x2397+-0x242c)]=_0x27f9ae[_0x557c57],_0x4a81a4[_0x557c57*(0x25f*-0x4+0x8*0x407+0x115*-0x15)+(0x1c00+0x14a7+-0x30a5)]=_0x2b0b94[_0x557c57],_0x5c0443[_0x557c57*(0x94d*0x1+-0x265*0x8+0x1a5*0x6)+(-0x25fd+0x20ba+-0x543*-0x1)]=_0x11dfde[_0x557c57],_0x5c0443[_0x557c57*(-0x21bf+-0x61b+-0xd*-0x311)+(0x1*-0xc1b+0xe1*0xf+0x19*-0xb)]=_0x27f9ae[_0x557c57],_0x5c0443[_0x557c57*(-0xe63+0x6b6+-0x2*-0x3d8)+(-0xc0c+0x1549+0x93b*-0x1)]=_0x2b0b94[_0x557c57],_0x55973a[_0x557c57]=_0x2619bf?Math['exp'](_0x2619bf[_0x557c57]):-0x1*0x3d3+-0x14a1+0x1874,_0x4a4b14[_0x557c57*(-0x1*0x1a0c+0xbd9+0x11*0xd6)+(-0x2056+-0x50+0x20a6)]=_0x978dca?_0x978dca[_0x557c57]:0x70b*0x1+-0x1436*0x1+0xd2b,_0x4a4b14[_0x557c57*(-0x1*0xab7+0xeec+-0x432)+(0xa77*-0x3+-0x1840+0x37a6)]=_0x55973a[_0x557c57]);const _0x598384=[_0x55e89e['buffer'],_0x4c347d['buffer'],_0x51e392['buffer'],_0x5a152a['buffer']];_0x3f78f1&&_0x598384['push'](_0x4a81a4['buffer'],_0x4a4b14['buffer'],_0x5c0443['buffer'],_0x55973a['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x55e89e,'dataPosition':_0x4c347d,'dataScale':_0x51e392,'dataRotation':_0x5a152a,'dataMotion':_0x4a81a4,'dataTime':_0x4a4b14,'motion':_0x5c0443,'tScaleArray':_0x55973a},_0x598384);},_0x5810a6=(_0x39b478,_0x14e2bd,_0x57ad9a,_0xd82ddd,_0x20692e)=>{const _0x18dfd8=new Uint16Array(_0x39b478*(0x817+0x148e+-0x1ca1)),_0x3965db=0x146d+0xdce+0x3*-0xb69+0.28209479177387814;for(let _0x23168d=-0x265e+-0x180a+-0x1*-0x3e68;_0x23168d<_0x39b478;++_0x23168d){const _0x3763a9=_0x14e2bd[_0x23168d]*_0x3965db+(0x13*0x95+0x1b10+0x3*-0xcb5+0.5),_0x546ac1=_0x57ad9a[_0x23168d]*_0x3965db+(-0x207+-0x19f2+0x3ff*0x7+0.5),_0x177512=_0xd82ddd[_0x23168d]*_0x3965db+(-0x2*0x9ad+-0xc47+0x1fa1+0.5),_0x23307a=_0x20692e[_0x23168d];_0x18dfd8[_0x23168d*(-0x1ab*0x5+0x207e+-0x1823)+(-0x1*0x1fd3+0x1ad1*-0x1+-0x1a1*-0x24)]=_0x32df79(_0x3763a9),_0x18dfd8[_0x23168d*(0x1b59+-0x2216+0x6c1)+(-0x2ab*0x3+-0x44a+0x2*0x626)]=_0x32df79(_0x546ac1),_0x18dfd8[_0x23168d*(0x1c6e+-0x10ee+0x2a*-0x46)+(-0x1*0x1323+-0x1a11+0x2d36)]=_0x32df79(_0x177512),_0x18dfd8[_0x23168d*(0x116c+0x15bb*-0x1+-0x1*-0x453)+(-0x17be*0x1+0x77d+0x1044*0x1)]=_0x32df79(_0x23307a);}self['postMessag'+'e']({'type':'updatedCol'+'orData','data':_0x18dfd8});},_0x50f128=(_0x363f3f,_0x161494,_0x42b0f6)=>{const _0x3bd11a=new Uint32Array(_0x363f3f*(0xa*-0x1cc+-0x13f*0x17+0x2ea5)),_0x1bd761=new Uint32Array(_0x363f3f*(0xe8*-0x10+0x1a*0xc2+-0x1*0x530)),_0x1f087d=new Uint32Array(_0x363f3f*(-0x6a*-0x53+-0x1*-0x1459+0xb*-0x4f9)),_0xa63843=new Uint32Array(_0x363f3f*(-0xac*-0x16+0x2*-0x566+-0x3f8)),_0x21c018={0x1:0x3,0x2:0x8,0x3:0xf}[_0x161494],_0x33140d=_0x42b0f6,_0x54d14e=0x235a+-0x261e*-0x1+-0x4179,_0x39b7da=0x18b9+0x67e+-0x1b38,_0x5e65d6=new Float32Array(-0xb58+0x4ec*0x3+-0x36b),_0x4ceb74=new Uint32Array(_0x5e65d6['buffer']),_0x29bd87=new Array(_0x21c018*(0xbaf*0x2+-0x261d+-0xec2*-0x1))['fill'](0xaa8+0xf88*0x2+-0x28*0x10b);for(let _0x501faf=0x4*0x39d+-0x1cd*-0x7+-0x3*0x905;_0x501faf<_0x363f3f;++_0x501faf){for(let _0x4d6d72=-0x2cc+0x1647+-0x137b*0x1;_0x4d6d72<_0x21c018;++_0x4d6d72)_0x29bd87[_0x4d6d72*(0x1*0x215b+-0x46+-0x2112)]=_0x33140d[_0x4d6d72][_0x501faf],_0x29bd87[_0x4d6d72*(0x1ebe+0x24c*-0x3+-0x17d7)+(0x3de*-0x7+-0x62*0x30+0x2d73)]=_0x33140d[_0x4d6d72+_0x21c018][_0x501faf],_0x29bd87[_0x4d6d72*(0x18*-0x7b+0x1e87+-0x12fc)+(-0x20aa+0x764+-0x2*-0xca4)]=_0x33140d[_0x4d6d72+_0x21c018*(0x20af+-0x88d*-0x4+0x3*-0x164b)][_0x501faf];let _0xd8d0fb=_0x29bd87[0x91b+0x7d4*-0x2+0x68d];for(let _0x38e0b3=-0x18d9*-0x1+-0x96c+-0x2f*0x54;_0x38e0b3<_0x21c018*(0x62f+0x1f*0x12b+-0x2a61);++_0x38e0b3)_0xd8d0fb=Math['max'](_0xd8d0fb,Math['abs'](_0x29bd87[_0x38e0b3]));if(_0xd8d0fb!==0x1*-0x1c1b+-0x1*0x1a02+0x361d){for(let _0x524169=-0x1*0x535+0x168+0x3cd;_0x524169<_0x21c018;++_0x524169)_0x29bd87[_0x524169*(0x1712+0x1838+-0x2f47)+(0x155*0x12+0x199c+-0xb*0x482)]=Math['max'](0x2c8+0x1*0x1775+-0x8bf*0x3,Math['min'](_0x54d14e,Math['floor']((_0x29bd87[_0x524169*(0x5*-0x67+-0x14ee+0x16f4)+(0x24*0xb7+0x3c*0x55+0x8*-0x5b5)]/_0xd8d0fb*(0x3*-0x7f5+0x1277+0x568+0.5)+(-0x1ebd*-0x1+-0xf71+0x16*-0xb2+0.5))*_0x54d14e+(-0x1a80+0x155+0x17b*0x11+0.5)))),_0x29bd87[_0x524169*(0x3*-0xc2d+-0x20ef+0xde5*0x5)+(0x196*0x1+0x1bbb+-0x7*0x430)]=Math['max'](0x13c4+-0xf90+-0x434,Math['min'](_0x39b7da,Math['floor']((_0x29bd87[_0x524169*(0x209e+-0xe1b+-0x4a0*0x4)+(-0xb1b+-0x2675+0x3191)]/_0xd8d0fb*(-0x1af1+-0x29*-0x69+0x36*0x30+0.5)+(0x1*-0x1262+-0x581*-0x3+-0x1df*-0x1+0.5))*_0x39b7da+(-0x1*-0x1865+-0x17f8+-0x6d+0.5)))),_0x29bd87[_0x524169*(0x1*-0x1181+-0x1157*-0x1+0x2d)+(-0x215b+-0x23b6+0x4513*0x1)]=Math['max'](0x20*-0x76+0x1*0x1186+-0x2c6,Math['min'](_0x54d14e,Math['floor']((_0x29bd87[_0x524169*(-0x42a+0x1441+0xc*-0x157)+(-0x52a+-0x34*-0x7a+-0x139c)]/_0xd8d0fb*(-0xede+0xf*-0x47+0x1*0x1307+0.5)+(0xdfa+-0x1*0x19+0xbb*-0x13+0.5))*_0x54d14e+(-0x2ee*0x1+0x71b+-0x42d+0.5))));_0x5e65d6[-0x1964+-0x1661+-0x6d3*-0x7]=_0xd8d0fb,_0x3bd11a[_0x501faf*(0x17ae+-0x54d*-0x6+-0x5*0xb18)+(0x9cf+0x5aa*-0x5+-0x1283*-0x1)]=_0x4ceb74[0x7a7*-0x3+0x1a*-0xf1+-0x1*-0x2f6f],_0x3bd11a[_0x501faf*(0x2*-0xc7c+0xd*0x282+-0x32*0x27)+(0x7*-0x55c+-0x2227+0x47ac)]=_0x29bd87[0x2669+-0xc0d+-0x1a5c]<<0x2408+-0x33*0xad+-0x17c|_0x29bd87[0x2*-0x1339+0x31*0xa7+0x19f*0x4]<<0x498+-0x16*0x12b+0x1525*0x1|_0x29bd87[0x225c+-0x1740*-0x1+-0x399a],_0x3bd11a[_0x501faf*(0x10a+-0x93*0x21+0x11ed)+(0x1d55+0x13c4+0xb1*-0x47)]=_0x29bd87[0x368+0x23c+-0x5a1]<<-0x112+0x1*-0xd6c+-0xd*-0x11f|_0x29bd87[-0x5*-0x7b1+-0x5e4*0x4+-0x1*0xee1]<<-0x18d2+-0x2*0x21e+0x1d19|_0x29bd87[0x1*0x2261+0x867+-0x2ac3],_0x3bd11a[_0x501faf*(0x1*0xdeb+0x203+0xfea*-0x1)+(-0x19a1+0x1da3+-0x3ff)]=_0x29bd87[-0x21f0+-0x1*-0x53+-0x4f*-0x6d]<<0x1f7e+0x318*-0x1+-0x293*0xb|_0x29bd87[0x1*-0x3b2+0xd81+-0x9c8]<<-0x771+-0x247a+0x2bf6|_0x29bd87[0x1e40+-0xd1*0xb+-0x153d],_0x161494>-0xfd9+-0x21*0xc2+0xa*0x416&&(_0x1bd761[_0x501faf*(-0x220c+0x1*0x652+0x1bbe)+(-0x1a03*-0x1+0x2e*-0x3a+-0xf97)]=_0x29bd87[-0x1*-0x497+-0x70*0x25+0x2*0x5d1]<<-0x589+0x283*-0x6+0x14b0|_0x29bd87[0x65c+0x1064+-0x16b6]<<0x7ce+0x779+0xa*-0x186|_0x29bd87[-0xaec+0x1ded+0x3*-0x652],_0x1bd761[_0x501faf*(0x21*-0x116+-0x452+0x282c)+(-0x1bb6+0x510+0x16a7)]=_0x29bd87[0x2*-0x5df+0x1f81+-0x13b7]<<0x119c*0x1+-0xdfd+-0x12e*0x3|_0x29bd87[0xe18+0x1f89+-0x2d94]<<-0x15b*-0x19+0x1*-0x71+-0x1f7*0x11|_0x29bd87[0x1d*-0xc3+-0x1c0+-0x1*-0x17e5],_0x1bd761[_0x501faf*(-0x2372+-0x32*-0x4b+0x14d0)+(-0x1d26+-0x23*-0xac+0x5a4)]=_0x29bd87[-0xb98+-0x1ee6+-0x1*-0x2a8d]<<-0x1422+-0x10e3+0x6*0x62f|_0x29bd87[0x1134+0x197f+-0x2aa3]<<-0x151f+-0x509*0x7+0x3869|_0x29bd87[-0xeaa+0x4a*0x77+-0x13*0x109],_0x1bd761[_0x501faf*(-0x6ba+0x411+0x2ad)+(0x2090+0x17*0xb3+0x32*-0xf9)]=_0x29bd87[0xc22*0x1+-0x2*0x1115+0x161a]<<-0x25a3+0xcc5*0x3+-0x1*0x97|_0x29bd87[-0x40*-0x6b+0xb8d+-0x263a]<<0x2048+-0x67*0x49+-0x2de|_0x29bd87[-0x8d7*0x4+-0x635+0x29a5],_0x161494>-0x5*0x5d3+-0x16d3+-0x64*-0x85?(_0x1f087d[_0x501faf*(0x254b*0x1+0x2*0x3f4+0x10d*-0x2b)+(-0xff+-0x2*-0x8e9+-0x10d3)]=_0x29bd87[-0x1de7+-0xd*0x151+-0x2f19*-0x1]<<-0xb23*-0x1+-0x57d*0x5+0x1063|_0x29bd87[-0xa7*-0x19+0x1e3*0x8+-0x1f51]<<-0x1809+0x24a1+-0xc8d|_0x29bd87[-0xd16+0x1*0xa3+0x217*0x6],_0x1f087d[_0x501faf*(-0x19bf+0x994+0x102f)+(0xbb*0x2d+-0x25d7+0x4f9)]=_0x29bd87[-0x7f*0x1d+-0x230+-0x11*-0xfb]<<0x26c5+0x9ad*0x1+0x101f*-0x3|_0x29bd87[-0x104a+-0x622*-0x4+-0x825]<<-0x489*0x5+0x1*-0x20f+0x18c7|_0x29bd87[-0x3b1+0x6a*0x1+0x361],_0x1f087d[_0x501faf*(-0x1*-0x5dd+0x1b*-0xc6+0x1*0xf09)+(0x12ae+-0x1da5*-0x1+-0x24d*0x15)]=_0x29bd87[0x1d0*-0x11+-0x62*-0x5d+-0x4af*0x1]<<0x5cb*-0x5+0x7e6+0x1526|_0x29bd87[-0xf*-0x1e7+0x1c*0x9f+0x2dd1*-0x1]<<-0x17c4+-0x1*-0x15ed+-0x1*-0x1e2|_0x29bd87[-0xdac+-0x12b8*-0x1+0x1*-0x4ef],_0x1f087d[_0x501faf*(0x7*-0x1f3+0x205b*-0x1+0x2e04)+(0xfd1*-0x2+0x23ac*-0x1+-0x38b*-0x13)]=_0x29bd87[-0xaf6+0x7*0x129+0x2f5]<<-0x22ad+-0x1a1e+0x3ce0|_0x29bd87[-0x2141+0x15e*-0xd+0x1993*0x2]<<0x0+-0xd*-0x1a6+-0x1563|_0x29bd87[-0x14e1+-0x36d*0x2+0x1bdb],_0xa63843[_0x501faf*(0x4*0x3de+-0x23ce*0x1+-0x1*-0x145a)+(-0x24df+-0x10bf*0x2+0x465d)]=_0x29bd87[-0x1b1*0x10+0x547+-0xf*-0x176]<<-0xaa2*0x2+0x20f9+-0xba0|_0x29bd87[-0x53*0x2+0x1fa+-0x132]<<-0x2*-0x47e+-0x223*-0x7+-0x17e6|_0x29bd87[-0x31*-0x3d+0x3a7*-0x1+-0x7e3],_0xa63843[_0x501faf*(-0x10*0xaa+-0x1042*-0x1+-0x59e)+(-0x1144+-0x202f+0x3174)]=_0x29bd87[-0x102f*0x2+-0x6*0x19f+0xc*0x385]<<-0x1860+-0x1*-0xbf5+0x4*0x320|_0x29bd87[0xb0*-0x17+0x1*-0x18f7+0x28ec]<<-0x5*0x449+-0x3*0x789+-0x1*-0x2c13|_0x29bd87[0x1*0x107+0x19b3+-0x1a94],_0xa63843[_0x501faf*(-0x1dc2*0x1+-0x9*-0x1c6+-0x44*-0x34)+(0xcc3+0x13*-0xfb+0x2f*0x20)]=_0x29bd87[0x2684+0x1*-0x150d+-0x22a*0x8]<<0x1*0x24df+-0x123*-0x13+-0x1*0x3a63|_0x29bd87[-0x6a4+-0x5dc+0xca8]<<0x139*-0x18+-0x1702+0x3465|_0x29bd87[-0x1d8e+0xb26+0x1291],_0xa63843[_0x501faf*(0x18cd+-0x3cf+-0x14fa)+(-0x112d*-0x1+0xf2a*-0x1+0x8*-0x40)]=_0x29bd87[0x8*-0x184+0x1e2f+-0x11e5]<<-0x1f5b+-0x187+0x20f7|_0x29bd87[-0x141c+-0x26ec+0x875*0x7]<<-0x1*-0x2a7+0x1f10+-0x1*0x21ac|_0x29bd87[0x1*-0x136+-0x16c7+0x1829]):_0x1f087d[_0x501faf]=_0x29bd87[0x3d*-0x15+-0x1d*-0x22+0x13c]<<-0x726+0x2569*0x1+-0x2*0xf17|_0x29bd87[-0x41e+-0x2*0x2b1+0x4cb*0x2]<<-0x1*-0x1e2+0x106e*0x2+-0x3db*0x9|_0x29bd87[-0x1a+-0x1aa3+-0x65*-0x44]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x3bd11a,'sh4to7Data':_0x1bd761,'sh8to11Data':_0x1f087d,'sh12to15Data':_0xa63843}},[_0x3bd11a['buffer'],_0x1bd761['buffer'],_0x1f087d['buffer'],_0xa63843['buffer']]);},_0x5d46fe=()=>{_0x55e89e=null,_0x4a4b14=null,_0x5a152a=null,_0x4c347d=null,_0x4a81a4=null,_0x51e392=null,_0x5c0443=null,_0x55973a=null;};}let wC=class extends me{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+TC['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x3cbff8,_0x123da5,_0x48cc21){_0x3cbff8['onmessage']=_0x4603de=>{if(!this['worker'])return;const {data:_0x106516}=_0x4603de;if(_0x106516['type']===_0x123da5)switch(_0x123da5){case'updatedSHD'+'ata1':_0x48cc21(_0x106516['data']);break;case'updatedCol'+'orData':_0x48cc21(_0x106516['data']);break;case'updatedTra'+'nsformData':_0x48cc21(_0x106516);break;case'updatedAab'+'bData':_0x48cc21(_0x106516);break;}};}['updateSHDa'+'ta1'](_0x553a92,_0x2e080a,_0x2a29f5){var _0x5b86dc;return(_0x5b86dc=this['worker'])==null||_0x5b86dc['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x553a92,'shBands':_0x2e080a,'SHData':_0x2a29f5}),new Promise(_0xf0f055=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x23acfe=>{_0xf0f055(_0x23acfe);});});}async['updateColo'+'rData'](_0x3f17f5,_0x409246,_0x4fa32b,_0x49e97c,_0x5314a7){var _0xabac09;return(_0xabac09=this['worker'])==null||_0xabac09['postMessag'+'e']({'type':'updateColo'+'rData','numSplats':_0x3f17f5,'cr':_0x409246,'cg':_0x4fa32b,'cb':_0x49e97c,'ca':_0x5314a7}),new Promise(_0xdd8aa9=>{this['workerMess'+'ageFn'](this['worker'],'updatedCol'+'orData',_0x5500ad=>{_0xdd8aa9(_0x5500ad);});});}async['calcAabb'](_0x554654,_0x3a42c5,_0x241b32,_0x476a3e,_0x47dcb2,_0x4f66ae,_0x18c23b){var _0x2ff11d;const _0x3140fa=new Float32Array(_0x3a42c5),_0x51a1a9=new Float32Array(_0x241b32),_0x31baf3=new Float32Array(_0x476a3e),_0x7a57f1=new Float32Array(_0x47dcb2),_0x37db03=new Float32Array(_0x4f66ae),_0x13c4af=new Float32Array(_0x18c23b);return(_0x2ff11d=this['worker'])==null||_0x2ff11d['postMessag'+'e']({'type':'calcAabb','numSplats':_0x554654,'x':_0x3140fa,'y':_0x51a1a9,'z':_0x31baf3,'sx':_0x7a57f1,'sy':_0x37db03,'sz':_0x13c4af},[_0x3140fa['buffer'],_0x51a1a9['buffer'],_0x31baf3['buffer'],_0x7a57f1['buffer'],_0x37db03['buffer'],_0x13c4af['buffer']]),new Promise(_0x5afa49=>{this['workerMess'+'ageFn'](this['worker'],'updatedAab'+'bData',_0x1b4bfc=>{_0x5afa49(_0x1b4bfc);});});}async['updateTran'+'sData'](_0x226eb4,_0x4e1402,_0x32bec4,_0x542541,_0x90f856,_0x23c811,_0x1d6906,_0x5e0bf3,_0x5c6720,_0x24f68c,_0x518421,_0x5d8f20,_0x318fc4,_0x4a1fb5,_0x1e117a,_0x2ca8fe,_0x5bcef5){var _0x24c263;return(_0x24c263=this['worker'])==null||_0x24c263['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x226eb4,'is4D':_0x4e1402,'x':_0x32bec4,'y':_0x542541,'z':_0x90f856,'rx':_0x23c811,'ry':_0x1d6906,'rz':_0x5e0bf3,'rw':_0x5c6720,'mx':_0x24f68c,'my':_0x518421,'mz':_0x5d8f20,'sx':_0x318fc4,'sy':_0x4a1fb5,'sz':_0x1e117a,'muT':_0x2ca8fe,'tScale':_0x5bcef5}),new Promise(_0x457533=>{const _0x4a9fc2=_0xc4ddd2=>{_0x457533(_0xc4ddd2);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x4a9fc2);});}['destroy'](){var _0xebeef8;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0xebeef8=this['worker'])==null||_0xebeef8['terminate'](),this['worker']=null);}};const vg=(_0x113d89,_0x453683)=>{const _0x4086f6=[];for(let _0x651e8d=-0xa*0x24b+0x68d+-0x7*-0x257;_0x651e8d<_0x453683;++_0x651e8d)_0x4086f6['push'](_0x113d89['getProp']('f_rest_'+_0x651e8d));return _0x4086f6;};class EC extends Rv{constructor(_0x1f4631,_0x48933c){console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),super(_0x1f4631,_0x48933c),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(0x1921+0xc7a+-0x259a)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new wC(),this['assetsMana'+'gerLoadedT'+'ime']=0x12f9+-0x1*-0xbdd+-0x17*0x157);}async['updateData'](){var _0x1c5f0a,_0x39c9d7,_0x559b0e,_0x1dadba,_0x2be3dc,_0x41a0cf,_0x4c29fc,_0x238428,_0x16be76,_0x47696c,_0x250631;console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Data'),await super['updateData']();const _0x6d6402=this['gsplatData'];if(!_0x6d6402)return;this['is4D']=_0x6d6402['is4D'];const _0x389298=await this['getTransfo'+'rmDataByWo'+'rker'](_0x6d6402);this['aabb']=new De(),await _0x6d6402['calcAabbAs'+'ync'](this['aabb'],this['updateData'+'Worker']),this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x389298['centers'],this['motion']=_0x389298['motion'],this['tScale']=_0x389298['tScaleArra'+'y'],this['muT']=await _0x6d6402['getMuT'](),this['timeIndex']=await _0x6d6402['getTimeInd'+'ex']();const _0x1d7bc3=this['evalTextur'+'eSize'](_0x6d6402['numSplats']);this['colorTextu'+'re']?((_0x1c5f0a=this['colorTextu'+'re2'])==null||_0x1c5f0a['destroy'](),(_0x39c9d7=this['transformA'+'Texture2'])==null||_0x39c9d7['destroy'](),(_0x559b0e=this['transformB'+'Texture2'])==null||_0x559b0e['destroy'](),(_0x1dadba=this['transformR'+'Texture2'])==null||_0x1dadba['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x1d7bc3),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x1d7bc3),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x1d7bc3),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x1d7bc3),this['is4D']&&((_0x2be3dc=this['transformM'+'otionTextu'+'re2'])==null||_0x2be3dc['destroy'](),(_0x41a0cf=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x41a0cf['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x1d7bc3),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x1d7bc3))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',nt,_0x1d7bc3),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x1d7bc3),this['transformA'+'Texture']=this['createText'+'ure']('transformA',Ye,_0x1d7bc3),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x1d7bc3),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ui,_0x1d7bc3),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x1d7bc3),this['transformR'+'Texture']=this['createText'+'ure']('transformR',Ye,_0x1d7bc3),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x1d7bc3),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',Ye,_0x1d7bc3),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x1d7bc3),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',Ye,_0x1d7bc3),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x1d7bc3))),await this['updateColo'+'rData'](_0x6d6402),await this['updateTran'+'sformFromD'+'ata'](_0x389298),this['shBands']=_0x6d6402['shBands'],this['shBands']>0x257a+-0xddc+-0x179e&&(this['sh1to3Text'+'ure']?((_0x4c29fc=this['sh1to3Text'+'ure2'])==null||_0x4c29fc['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x1d7bc3),this['shBands']>0xda*-0x1+0x194a+-0x186f&&((_0x238428=this['sh4to7Text'+'ure2'])==null||_0x238428['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x1d7bc3),this['shBands']>-0x1dfa+-0x1cd7+0x3ad3?((_0x16be76=this['sh8to11Tex'+'ture2'])==null||_0x16be76['destroy'](),(_0x47696c=this['sh12to15Te'+'xture2'])==null||_0x47696c['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x1d7bc3),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x1d7bc3)):((_0x250631=this['sh8to11Tex'+'ture2'])==null||_0x250631['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x1d7bc3)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x1d7bc3),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ue,_0x1d7bc3),this['shBands']>-0x1*-0xb9c+0x20cc*0x1+-0xecd*0x3&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ue,_0x1d7bc3),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x1d7bc3),this['shBands']>0x1ccf+-0x279+-0x1a54?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ue,_0x1d7bc3),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x1d7bc3),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ue,_0x1d7bc3),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x1d7bc3)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ki,_0x1d7bc3),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ki,_0x1d7bc3)))),await this['updateSHDa'+'taByWorker'](_0x6d6402));}['updateText'+'ure'](){console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Texture'),!this['isDestroye'+'d']&&(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x1ad67c){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x1ad67c}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20releas'+'eSeqGSplat'+'\x20all'),this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x3a4a21,_0x4b73d9,_0x28b2d2,_0x2821df,_0x29805d){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x3a4a21,'timeOption':_0x4b73d9,'loadedTime':_0x28b2d2,'asset':_0x2821df,'events':_0x29805d}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(0x8dc+0x10a1+0xf*-0x1b3);try{for(;this['appendQueu'+'e']['length']>0x7*0x17+0x17e9*-0x1+0x1748;){const _0x1ebabc=this['appendQueu'+'e']['shift']();_0x1ebabc['type']==='append'?await this['processApp'+'endTask'](_0x1ebabc['data']):_0x1ebabc['type']==='release'&&await this['processRel'+'easeTask'](_0x1ebabc['data']);}}finally{this['isProcessi'+'ngQueue']=!(0x25*-0x39+-0x13c8+0x1c06);}}}async['processRel'+'easeTask'](_0x1139e4){const {index:_0x15bb5a}=_0x1139e4;console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.relea'+'seGSplatRe'+'source',_0x15bb5a),!this['isDestroye'+'d']&&await this['gsplatData']['releaseSeq'+'Data'](_0x15bb5a);}async['processApp'+'endTask'](_0x232373){var _0x1e127f;const {gsplatData:_0x51c3a1,timeOption:_0x2ce10f,loadedTime:_0x2f1307,asset:_0x10c8b3,events:_0x589769}=_0x232373;!this['gsplatData']||this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.appen'+'dGSplatRes'+'ource'),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x2ce10f,await this['gsplatData']['appendGSpl'+'atData'](_0x51c3a1,_0x2f1307,_0x2ce10f),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20gspla'+'tData.appe'+'ndGSplatDa'+'ta',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x1cfe+-0x25de*0x1+-0x27a*-0x1b),_0x51c3a1['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x51c3a1['numSplats'])['toFixed'](0x23d2+-0x1746+-0xc89)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20this.'+'updateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x21d3*-0x1+0x1af4+0x6e1),_0x51c3a1['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),(_0x1e127f=this['gsplatInst'+'ance'])==null||_0x1e127f['updateInst'+'anceData'](this),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20updat'+'eInstanceD'+'ata',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x749*0x4+0x11*-0x245+0x43bb),_0x51c3a1['numSplats']),this['asset']=_0x10c8b3,this['assetsMana'+'gerLoadedT'+'ime']=_0x2f1307,this['events']=_0x589769);}['fireAssets'+'ManagerTim'+'eIndex'](){var _0x4ef8c7;const _0x7b791e=this['assetsMana'+'gerLoadedT'+'ime'];console['log']('____\x20ENGIN'+'E\x20IVAN','fireAssets'+'ManagerTim'+'eIndex',_0x7b791e),(_0x4ef8c7=this['asset'])==null||_0x4ef8c7['fire']('setAssetsL'+'oaded',_0x7b791e);}['destroy'](){var _0x5a9c28,_0x5bac87,_0x1891b8,_0x2ec040,_0x3de8fc,_0xf63444,_0x2b22bf,_0x48112c,_0x4a6a1f,_0x26b9e7,_0x1296b0,_0x323648,_0x1173b0,_0x1e3649,_0x301344,_0x6e305c,_0x240a06,_0x11eb20,_0x41d509,_0x3d6c78,_0x8660c5;(_0x5a9c28=this['updateData'+'Worker'])==null||_0x5a9c28['destroy'](),this['updateData'+'Worker']=void(0x1*0x7be+0x1*0x779+0xf37*-0x1),(_0x5bac87=this['colorTextu'+'re'])==null||_0x5bac87['destroy'](),(_0x1891b8=this['transformA'+'Texture'])==null||_0x1891b8['destroy'](),(_0x2ec040=this['transformB'+'Texture'])==null||_0x2ec040['destroy'](),(_0x3de8fc=this['transformR'+'Texture'])==null||_0x3de8fc['destroy'](),(_0xf63444=this['transformM'+'otionTextu'+'re'])==null||_0xf63444['destroy'](),(_0x2b22bf=this['transformL'+'ifecycleTe'+'xture'])==null||_0x2b22bf['destroy'](),(_0x48112c=this['sh1to3Text'+'ure'])==null||_0x48112c['destroy'](),(_0x4a6a1f=this['sh4to7Text'+'ure'])==null||_0x4a6a1f['destroy'](),(_0x26b9e7=this['sh8to11Tex'+'ture'])==null||_0x26b9e7['destroy'](),(_0x1296b0=this['sh12to15Te'+'xture'])==null||_0x1296b0['destroy'](),(_0x323648=this['colorTextu'+'re2'])==null||_0x323648['destroy'](),(_0x1173b0=this['transformA'+'Texture2'])==null||_0x1173b0['destroy'](),(_0x1e3649=this['transformB'+'Texture2'])==null||_0x1e3649['destroy'](),(_0x301344=this['transformR'+'Texture2'])==null||_0x301344['destroy'](),(_0x6e305c=this['transformM'+'otionTextu'+'re2'])==null||_0x6e305c['destroy'](),(_0x240a06=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x240a06['destroy'](),(_0x11eb20=this['sh1to3Text'+'ure2'])==null||_0x11eb20['destroy'](),(_0x41d509=this['sh4to7Text'+'ure2'])==null||_0x41d509['destroy'](),(_0x3d6c78=this['sh8to11Tex'+'ture2'])==null||_0x3d6c78['destroy'](),(_0x8660c5=this['sh12to15Te'+'xture2'])==null||_0x8660c5['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x11be99){var _0x4bc0f2,_0x4a7c2a,_0x15fac4,_0x540a59,_0x4d37bc,_0x5551a9,_0x45b8bf,_0x54feb7,_0x68c0db,_0x58be7b,_0x255fd9,_0x3c989f,_0x55ec07;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x340b2a=((_0x4bc0f2=_0x11be99['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(-0x16bd+-0x1*0x167+0x1824):_0x4bc0f2['data'])??-0x3f6+-0x1d7+0x5cd,_0x139738=((_0x4a7c2a=_0x11be99['getParamet'+'er']('uSplatScal'+'e'))==null?void(-0x9aa+-0x1a48+0x23f2):_0x4a7c2a['data'])??-0x2174+-0x351*0x3+0xe78*0x3,_0x530ec1=((_0x15fac4=_0x11be99['getParamet'+'er']('uSaturatio'+'n'))==null?void(0x216d+0x7*-0x3ff+-0x574):_0x15fac4['data'])??-0x2b*0x79+0x5e6*0x2+0x888,_0x487c95=((_0x540a59=_0x11be99['getParamet'+'er']('uHueOffset'))==null?void(0x1*-0x1267+0xff4+0x273):_0x540a59['data'])??0xd8*-0x24+-0x6c3+0x2523,_0x4199cc=((_0x4d37bc=_0x11be99['getParamet'+'er']('uInvertOpa'+'city'))==null?void(-0x11b6+-0xb81+0x1d37):_0x4d37bc['data'])??-0xb42+0x12c6+-0x3c2*0x2,_0x1b4f9d=((_0x5551a9=_0x11be99['getParamet'+'er']('uOpacity'))==null?void(-0x1d53+-0x185e+0x1*0x35b1):_0x5551a9['data'])??-0x1*0x14e7+0xa6*0x1a+0x40c,_0x3e1b4b=((_0x45b8bf=_0x11be99['getParamet'+'er']('clrOffset'))==null?void(0x1*-0xc11+0x12da+-0x6c9):_0x45b8bf['data'])??[-0x1092+-0x7*0xcb+0x1*0x161f,0x1ed6*0x1+-0x119*-0x11+0x317f*-0x1,0x2349+-0x2f*-0x52+-0x3257,-0xb11+0x104d+-0x53b],_0x5c7dc6=((_0x54feb7=_0x11be99['getParamet'+'er']('clrScale'))==null?void(-0x5dc+-0xc27*-0x3+-0x1e99):_0x54feb7['data'])??[0xb*-0x7c+0x1*-0x1f86+0x22b*0x11,0xa99+0x20f7+-0x2b8f,0xc23+0x1da+0x14*-0xb3,0x464+-0xf7a+-0x11*-0xa7],_0x3d1424=((_0x68c0db=_0x11be99['getParamet'+'er']('uShapeN'))==null?void(0xb3f*0x3+0xbe2+-0x2d9f):_0x68c0db['data'])??-0x134*0x20+-0x18d9*0x1+-0x1*-0x3f59,_0x419081=((_0x58be7b=_0x11be99['getParamet'+'er']('mode'))==null?void(-0x9*-0x2ee+-0x1fe7+0x6d*0xd):_0x58be7b['data'])??0x1*-0x6d7+-0x1*-0x20fe+-0x1a27,_0x52ca2e=((_0x255fd9=_0x11be99['getParamet'+'er']('ringSize'))==null?void(0x10d4+-0x2346+0x1272):_0x255fd9['data'])??0x1f62+-0xf73+-0xfef,_0x5e607d=((_0x3c989f=_0x11be99['defines'])==null?void(-0x7f*0x1b+-0x20cb+0x2*0x1718):_0x3c989f['get']('uOpenAnim'))??'0',_0x1d9a5a=((_0x55ec07=_0x11be99['defines'])==null?void(0x104*-0x4+-0x5f7*-0x1+0x1*-0x1e7):_0x55ec07['get']('uControlCo'+'lorMode'))??'0';_0x11be99['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x11be99['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x11be99['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x11be99['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x11be99['setParamet'+'er']('uSplatScal'+'e',_0x139738),_0x11be99['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x340b2a),_0x11be99['setParamet'+'er']('uSaturatio'+'n',_0x530ec1),_0x11be99['setParamet'+'er']('uHueOffset',_0x487c95),_0x11be99['setParamet'+'er']('uInvertOpa'+'city',_0x4199cc),_0x11be99['setParamet'+'er']('uOpacity',_0x1b4f9d),_0x11be99['setParamet'+'er']('clrOffset',_0x3e1b4b),_0x11be99['setParamet'+'er']('clrScale',_0x5c7dc6),_0x11be99['setParamet'+'er']('uShapeN',_0x3d1424),_0x11be99['setParamet'+'er']('mode',_0x419081),_0x11be99['setParamet'+'er']('ringSize',_0x52ca2e),_0x11be99['setParamet'+'er']('prerenderC'+'Time',0x6fe+-0x3*-0x217+0xd43*-0x1),_0x11be99['setParamet'+'er']('renderSpac'+'e',-0xf*0xd7+0x2ea+0x13*0x83),_0x11be99['setParamet'+'er']('endSpace',0xca*0x1+-0x250a+0x5*0x742),_0x11be99['setDefine']('uOpenAnim',_0x5e607d),_0x11be99['setDefine']('uControlCo'+'lorMode',_0x1d9a5a),this['transformM'+'otionTextu'+'re']&&_0x11be99['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x11be99['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x11be99['setDefine']('SH_BANDS',this['shBands']),_0x11be99['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x11be99['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x11be99['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x11be99['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x11be99['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x30e5ec){const _0x389eb1=Math['ceil'](Math['sqrt'](_0x30e5ec)),_0x277d34=Math['ceil'](_0x30e5ec/_0x389eb1);return new J(_0x389eb1,_0x277d34);}async['updateColo'+'rData'](_0x5aca6b){var _0x28261f;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x59b0d5=this['colorTextu'+'re2'];if(!_0x59b0d5||this['isDestroye'+'d'])return;const _0x2ebd94=_0x5aca6b['getProp']('f_dc_0'),_0x317d29=_0x5aca6b['getProp']('f_dc_1'),_0x536c6b=_0x5aca6b['getProp']('f_dc_2'),_0x26b0f0=_0x5aca6b['getProp']('opacity');let _0x2a21dd=(_0x28261f=_0x5aca6b['transformD'+'ata'])==null?void(-0x13e9+0x1a43+-0x65a):_0x28261f['dataColor'];_0x2a21dd||(_0x2a21dd=await this['updateData'+'Worker']['updateColo'+'rData'](_0x5aca6b['numSplats'],_0x2ebd94,_0x317d29,_0x536c6b,_0x26b0f0)),await this['idleUpdate'+'TexturePro'+'mise'](_0x59b0d5,_0x2a21dd);}async['getTransfo'+'rmDataByWo'+'rker'](_0x53eee3){var _0x3521c2;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x3521c2=_0x53eee3['transformD'+'ata'])!=null&&_0x3521c2['dataCenter'+'s'])return{'centers':_0x53eee3['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x53eee3['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x53eee3['transformD'+'ata']['dataScale'],'dataRotation':_0x53eee3['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x53eee3['transformD'+'ata']['dataMotion'],'dataTime':_0x53eee3['transformD'+'ata']['dataTime'],'motion':_0x53eee3['transformD'+'ata']['motion'],'tScaleArray':_0x53eee3['transformD'+'ata']['tScaleArra'+'y']};const _0x47d34f=_0x53eee3['getProp']('x'),_0x1a157e=_0x53eee3['getProp']('y'),_0xcec674=_0x53eee3['getProp']('z'),_0x549e91=_0x53eee3['getProp']('rot_1'),_0x3b7339=_0x53eee3['getProp']('rot_2'),_0x3bfee0=_0x53eee3['getProp']('rot_3'),_0x206076=_0x53eee3['getProp']('rot_0'),_0x575ac2=_0x53eee3['getProp']('motion_0'),_0x4f30a1=_0x53eee3['getProp']('motion_1'),_0x59895d=_0x53eee3['getProp']('motion_2'),_0x25d176=_0x53eee3['getProp']('scale_0'),_0x27c52a=_0x53eee3['getProp']('scale_1'),_0x5be5fc=_0x53eee3['getProp']('scale_2'),_0x435a26=_0x53eee3['getProp']('t'),_0x203a48=_0x53eee3['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x53eee3['numSplats'],this['is4D'],_0x47d34f,_0x1a157e,_0xcec674,_0x549e91,_0x3b7339,_0x3bfee0,_0x206076,_0x575ac2,_0x4f30a1,_0x59895d,_0x25d176,_0x27c52a,_0x5be5fc,_0x435a26,_0x203a48);}async['updateTran'+'sformFromD'+'ata'](_0x1573f2){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x1573f2['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x1573f2['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x1573f2['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x1573f2['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x1573f2['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x360901,_0x4f7c09){if(!this['isDestroye'+'d'])return new Promise(_0x15978b=>{requestIdleCallback(()=>{const _0x52332a=_0x360901['lock']();_0x52332a==null||_0x52332a['set'](_0x4f7c09),_0x360901['unlock'](),_0x15978b(!(-0x1*-0x23b+-0x1*-0x159d+0x368*-0x7));},{'timeout':0x12c});});}async['updateTran'+'sformData'](_0x5e9442){var _0x3b809f,_0x4d2872,_0x46d527,_0x25d72a;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformData'),this['isDestroye'+'d'])return;const _0x3acdf0=Mn['float2Half'];if(!this['transformA'+'Texture'])return;const _0x27283a=this['transformA'+'Texture']['lock'](),_0x3c8501=this['transformR'+'Texture']['lock'](),_0x2f96bb=this['transformB'+'Texture']['lock'](),_0x1241c6=(_0x3b809f=this['transformM'+'otionTextu'+'re'])==null?void(-0x1*-0xa67+0x11*0x111+-0x1c88):_0x3b809f['lock'](),_0x411beb=(_0x4d2872=this['transformL'+'ifecycleTe'+'xture'])==null?void(-0x5*0x5cb+0x15e*0x11+0x5b9):_0x4d2872['lock'](),_0x49c420=new D(),_0x17f9e3=new le(),_0x29eaba=new D(),_0x17f988=new D(),_0xcf48e1=_0x5e9442['createIter'](_0x49c420,_0x17f9e3,_0x29eaba,null,_0x17f988),_0x356b0d=_0x5e9442['getProp']('t'),_0x14d711=_0x5e9442['getProp']('t_scale');for(let _0x35501d=-0x2333+0x10*0x224+0xf3;_0x35501d<_0x5e9442['numSplats'];_0x35501d++)_0xcf48e1['read'](_0x35501d),_0x17f9e3['normalize'](),_0x17f9e3['w']<0xfcc+0x11*0x133+-0x9d*0x3b&&_0x17f9e3['mulScalar'](-(-0x2*-0xf33+-0x1c5d+-0x208)),_0x27283a[_0x35501d*(0x106e+-0x143d+-0x6*-0xa3)+(0x39*-0x10+-0x1*0x167c+0x1a0c)]=_0x49c420['x'],_0x27283a[_0x35501d*(-0x2b*0x1+-0x5b1+0x5df)+(-0x159b+0x24c3*0x1+-0x9*0x1af)]=_0x49c420['y'],_0x27283a[_0x35501d*(-0x14fc+-0x2071+0x3570)+(0x2dc*-0x7+0x1*-0x1c3a+0x304*0x10)]=_0x49c420['z'],_0x2f96bb[_0x35501d*(0x447*0x5+-0x1*-0x1ef7+0x1*-0x3457)+(0x8*-0x2+0xd1b+-0xd0b)]=_0x3acdf0(_0x29eaba['x']),_0x2f96bb[_0x35501d*(0x1fde+0x189b*-0x1+-0x740)+(-0x1223*-0x1+-0x517*0x7+-0x117f*-0x1)]=_0x3acdf0(_0x29eaba['y']),_0x2f96bb[_0x35501d*(0xd93+0x2*-0x8c7+-0x1*-0x3fe)+(-0x1*0x14bb+0xfec*-0x1+-0x1*-0x24a9)]=_0x3acdf0(_0x29eaba['z']),_0x3c8501[_0x35501d*(-0x12e3+-0x2441+-0x7e1*-0x7)+(0xfe9*-0x1+-0xbc6+0x1baf)]=_0x17f9e3['x'],_0x3c8501[_0x35501d*(0x1f16+-0x11c1+-0x6a9*0x2)+(-0x1b8*-0x4+-0xc*0x52+0x9b*-0x5)]=_0x17f9e3['y'],_0x3c8501[_0x35501d*(-0x26e0+0x2*-0xc2d+0x1*0x3f3d)+(0xb*-0x2c5+-0x1832+0x613*0x9)]=_0x17f9e3['z'],this['is4D']&&_0x1241c6&&_0x411beb&&(_0x1241c6[_0x35501d*(-0x17*-0xfb+-0x47*-0x72+0x2*-0x1b14)+(-0x7a5*-0x1+0x8e1+-0xf*0x11a)]=_0x17f988['x'],_0x1241c6[_0x35501d*(-0x110*0x11+0x26d*0xa+-0x62f)+(0x1a99+-0x1c3*0x11+0x35b)]=_0x17f988['y'],_0x1241c6[_0x35501d*(-0x1*-0x5e8+-0xe15+0x10*0x83)+(-0x14c*0x2+-0x9d*0x4+-0x2*-0x287)]=_0x17f988['z'],_0x411beb[_0x35501d*(-0x1*-0x1a61+0x3*-0x71d+-0x507)+(0x1183+0x1b5*0x1+-0x1338)]=_0x356b0d?_0x356b0d[_0x35501d]:0x1*0x751+-0x1fe+-0x553,_0x411beb[_0x35501d*(0x1af8+0x1f*0xd5+-0x34c0*0x1)+(0xbcb*0x2+-0xb3*0x1b+-0x4b4)]=_0x14d711?Math['exp'](_0x14d711[_0x35501d]):-0x24e4+-0x417+0x28fb);this['transformA'+'Texture']['unlock'](),this['transformB'+'Texture']['unlock'](),this['transformR'+'Texture']['unlock'](),(_0x46d527=this['transformM'+'otionTextu'+'re'])==null||_0x46d527['unlock'](),(_0x25d72a=this['transformL'+'ifecycleTe'+'xture'])==null||_0x25d72a['unlock']();}async['updateSHDa'+'ta'](_0x12db1a){var _0xbfe292,_0x4ad410,_0xd59f22,_0x366272,_0x2f95ae,_0x29672d,_0x46f0a9,_0x13eb86;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x59e58f=(_0xbfe292=this['sh1to3Text'+'ure2'])==null?void(0x176f+-0x11cf*-0x1+0x2*-0x149f):_0xbfe292['lock'](),_0x32b5fc=(_0x4ad410=this['sh4to7Text'+'ure2'])==null?void(0x9c+-0x1*-0x48f+-0x1b*0x31):_0x4ad410['lock'](),_0x4c40ea=(_0xd59f22=this['sh8to11Tex'+'ture2'])==null?void(-0xa9*0x1f+-0x17a3*0x1+0x160d*0x2):_0xd59f22['lock'](),_0x5b00f1=(_0x366272=this['sh12to15Te'+'xture2'])==null?void(0x19b7+-0x45b+-0x155c):_0x366272['lock'](),_0x43b1b1={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x3396e4=vg(_0x12db1a,_0x43b1b1*(-0x1327*-0x1+0x68f+-0x19b3)),_0x530c7c=-0x21*0x3b+0x477*-0x3+0x1cff*0x1,_0x4564cc=-0x10e5+0x6*-0x3+0x14f6,_0x391477=new Float32Array(-0xb*-0x22f+-0xa62+-0xda2),_0xb43aa6=new Uint32Array(_0x391477['buffer']),_0x4e337b=new Array(_0x43b1b1*(-0x2d*0xb5+-0x1f1d+0x3*0x14fb))['fill'](-0x13*-0xdf+0x1dc5+-0x2e52);for(let _0x4533e8=0x1987+0x47*0x4a+0x1*-0x2e0d;_0x4533e8<_0x12db1a['numSplats'];++_0x4533e8){for(let _0x9027f4=0xfb0+0x306+0x1df*-0xa;_0x9027f4<_0x43b1b1;++_0x9027f4)_0x4e337b[_0x9027f4*(-0x1*-0xf02+-0x561+0x99e*-0x1)]=_0x3396e4[_0x9027f4][_0x4533e8],_0x4e337b[_0x9027f4*(0x2d1+-0x1e55*0x1+-0x1b87*-0x1)+(0x98*-0x4+-0x8c+0x6b*0x7)]=_0x3396e4[_0x9027f4+_0x43b1b1][_0x4533e8],_0x4e337b[_0x9027f4*(-0xad6*0x1+0xb3d+-0x64)+(0x10d1+0x8*-0x139+-0x707)]=_0x3396e4[_0x9027f4+_0x43b1b1*(-0x1*0x1a6b+0xfe4*-0x2+0x3a35)][_0x4533e8];let _0x513d4f=_0x4e337b[-0x842+0xe73*-0x1+0x16b5];for(let _0x575ebc=-0x875+-0x15c5+0x1e3b;_0x575ebc<_0x43b1b1*(0xb1+0x985+-0xa33);++_0x575ebc)_0x513d4f=Math['max'](_0x513d4f,Math['abs'](_0x4e337b[_0x575ebc]));if(_0x513d4f!==0x1*0x19d+0x1007*0x2+0x27*-0xdd){for(let _0x196a6b=-0xc2*-0x2+-0x44b+0x2c7;_0x196a6b<_0x43b1b1;++_0x196a6b)_0x4e337b[_0x196a6b*(-0x125e+0x2277+0x2*-0x80b)+(-0xb77+-0x2d*0xd+0xdc0)]=Math['max'](-0x5ad*0x2+-0x7ef+0x1349*0x1,Math['min'](_0x530c7c,Math['floor']((_0x4e337b[_0x196a6b*(-0x1fa+-0x2*-0x709+0x407*-0x3)+(0x2297+0xd88+-0x61*0x7f)]/_0x513d4f*(0x195a+0x167+0x2f9*-0x9+0.5)+(-0x4*-0x80b+-0x2f*0x95+-0x9*0x89+0.5))*_0x530c7c+(0xb6b+-0xd3a+0x1cf+0.5)))),_0x4e337b[_0x196a6b*(0x9a+0x9*-0x3c7+0x2168)+(0x1afa+0x4f*0x62+-0x61*0x97)]=Math['max'](0x2*0x4bd+-0x1*-0x714+0x2*-0x847,Math['min'](_0x4564cc,Math['floor']((_0x4e337b[_0x196a6b*(0x1793+0x1*-0x103d+0x271*-0x3)+(-0x110+0xbd7+-0x2*0x563)]/_0x513d4f*(0x1bd7+-0x1b9a*0x1+0x3d*-0x1+0.5)+(0x1872+-0x1*0xa24+-0xe4e+0.5))*_0x4564cc+(0x614+-0x9*-0x3a9+-0x2705+0.5)))),_0x4e337b[_0x196a6b*(-0xbb4+-0xd*-0x1f7+-0x375*0x4)+(-0x19a2+-0x213c+-0x2*-0x1d70)]=Math['max'](-0xd*0x5d+-0x1498+-0x1*-0x1951,Math['min'](_0x530c7c,Math['floor']((_0x4e337b[_0x196a6b*(-0x1*-0x33d+-0x25a3+0x2269)+(0x1*0x207a+0x19e3+-0x3a5b)]/_0x513d4f*(0x269d+-0x23*0x4b+0x16*-0x14a+0.5)+(0x1*0x2011+-0x26cd+0x6bc+0.5))*_0x530c7c+(-0x520*-0x3+-0x23c5+0x1465+0.5))));_0x391477[-0x956*0x4+-0x684+-0x644*-0x7]=_0x513d4f,_0x59e58f[_0x4533e8*(0x4*0x8bd+-0x1*-0x805+-0x2af5)+(-0x2f5*-0x7+0x2637*-0x1+-0x4*-0x461)]=_0xb43aa6[0x1d02+-0x14d+-0x1bb5*0x1],_0x59e58f[_0x4533e8*(-0x177+-0xa0f*0x1+0xb8a)+(-0x29*0x59+-0x1*0x1d35+0x2b77*0x1)]=_0x4e337b[0xc42+0x1aa7+-0x26e9]<<0x124*-0xe+0x2*-0xe5+0x11d7|_0x4e337b[0x1f26+-0x47d*0x3+-0x3e*0x49]<<-0x161c+0x2404*-0x1+0x3a2b|_0x4e337b[-0x9dd+0xafc+-0x39*0x5],_0x59e58f[_0x4533e8*(-0x519+0x21b2+0x9*-0x32d)+(-0x5*0x5e7+-0x1*0x233+0xe*0x244)]=_0x4e337b[-0xcac*0x1+-0xfce*0x1+0x1c7d]<<0x5*0x337+-0x13e2+0x3e4|_0x4e337b[0x102f+0x2327+-0x3352*0x1]<<0x1c19*-0x1+-0x171+0x1d95|_0x4e337b[0x928+0xc79+-0x159c],_0x59e58f[_0x4533e8*(0xb71+-0x190*-0xf+-0x22dd)+(-0x5*-0xc5+0x1f1*-0x10+-0xcd*-0x22)]=_0x4e337b[0x2554+0x228d+-0x47db]<<0x1*0x83b+-0x8*-0x454+-0x2ac6|_0x4e337b[0x132c*0x2+-0x2f*-0xbf+0x12f*-0x3e]<<0x1b84+0x11bd+0x283*-0x12|_0x4e337b[-0x1ae9+-0x23*-0x6d+0xc0a],this['shBands']>0xcdd+-0x1617+0x93b&&(_0x32b5fc[_0x4533e8*(-0x1*-0x452+0x2f7*-0x7+0x1073*0x1)+(-0x1d*-0x68+-0x25f*0x10+0x8b8*0x3)]=_0x4e337b[-0xcc8*-0x1+0x1776+-0x2435]<<0xeae+0x1e24+-0x2cbd|_0x4e337b[0xfef+0xb68+0x1*-0x1b4d]<<0x1ff9*0x1+0x1b7*0xc+-0x3482|_0x4e337b[-0xb*-0x2b3+-0x1*-0x7c9+0x256f*-0x1],_0x32b5fc[_0x4533e8*(-0x112*0x16+-0x1*0x715+-0x5*-0x621)+(0x2b*0x71+-0x13a7*0x1+-0x1*-0xad)]=_0x4e337b[0xdd7*0x2+-0x110*-0x2+-0x1a*0x125]<<-0x10e0+-0xd0c+0x1e01|_0x4e337b[-0x21bf*0x1+0x5*0x772+-0x1b7*0x2]<<0xa94+0x24b5*0x1+0x1*-0x2f3e|_0x4e337b[-0x165*-0x19+-0x31*0x25+-0x1bba*0x1],_0x32b5fc[_0x4533e8*(-0x1759*-0x1+0x3*-0x10f+0x102*-0x14)+(-0x113*-0x1+-0x31a*-0x4+-0xd79)]=_0x4e337b[-0xe1+0x45*-0x47+0x1413]<<-0xb3c+0xfb3+-0x462|_0x4e337b[0x938+-0x3*-0x592+-0x16*0x12d]<<0x1f*-0x50+0x2*-0xdd5+-0xc77*-0x3|_0x4e337b[-0x52*-0x4a+-0x2*-0x44+-0x182b],_0x32b5fc[_0x4533e8*(0x1f1e+0x1797+-0x27*0x167)+(0x1e*0x10d+0x13d2+-0x3355)]=_0x4e337b[0x2437+0x2*-0xea2+-0x6e1]<<-0x1edf+-0x13b6+-0x2*-0x1955|_0x4e337b[0xe3f*-0x1+0x24b7+-0x1665]<<0x2b*-0xc3+0x19d7+0x6f5|_0x4e337b[-0x269*-0xb+0x1cfd+-0x376c],this['shBands']>0x11d1*-0x2+0x1008+0x1*0x139c?(_0x4c40ea[_0x4533e8*(-0x1311*0x1+-0x3ab+0x16c0)+(-0x3a4*-0x5+0x62*-0x59+0xfde)]=_0x4e337b[0xb73+0x6bf+-0x121d]<<0x13a1+-0xfb4+0x2*-0x1ec|_0x4e337b[-0x8da+-0x255d*-0x1+0x17f*-0x13]<<0x73d*-0x1+-0x234f+0x2a97|_0x4e337b[-0x2331+0x4*0x6a9+-0x4f*-0x1c],_0x4c40ea[_0x4533e8*(0x23db*-0x1+-0x1a7e+0x3e5d)+(0x11e6+0x6*0x1ae+-0x21*0xd9)]=_0x4e337b[-0x1d86+-0x108+0xf53*0x2]<<0x2f4+-0x4f*0x4f+0xac1*0x2|_0x4e337b[0x38c*0x8+0x11*-0x9f+-0x7e*0x24]<<-0x24fd*-0x1+0x7a*-0x4b+-0x134|_0x4e337b[0x2*0xae1+0x125e+-0x2806],_0x4c40ea[_0x4533e8*(-0x2*0x1258+-0xf20+0x33d4)+(-0x1a*-0xf7+-0x13f7*0x1+-0x7*0xbb)]=_0x4e337b[-0x29*-0x36+0x1*-0xb61+0x2d6]<<0x139*-0x1c+0x662*0x3+0xf2b|_0x4e337b[0x16f*0x7+0x10da*0x1+-0x1ac7]<<-0x2b3*0x1+0x1b86+-0x18c8|_0x4e337b[-0x25e8*0x1+-0xa*0x372+0x4879],_0x4c40ea[_0x4533e8*(-0x593+-0x112c+0x16c3)+(0x1*0x24cb+0x7a*0x1+0xfb*-0x26)]=_0x4e337b[-0x1be5+0x1*0x169d+0x566]<<-0x1*0xa85+-0x6ff+-0x1199*-0x1|_0x4e337b[-0x432+0x4*-0x1b5+0xb25]<<-0x194e+-0x92+0x19eb|_0x4e337b[0x1244+0x3a*-0x1d+0x2*-0x5c9],_0x5b00f1[_0x4533e8*(-0x1a92+-0x570*0x1+0x1*0x2006)+(0x16*-0x83+-0x390+0xed2*0x1)]=_0x4e337b[0x3b*0x6d+0x11*-0x101+-0x7ed]<<0x1*-0x1f1c+-0x1577+0x34a8|_0x4e337b[-0x203f+0xcbe*-0x1+0x1*0x2d1f]<<0x1273*0x1+0x4*0x1f1+-0x1a2c|_0x4e337b[-0x1*-0x17ba+0x2e*-0x67+-0x1*0x515],_0x5b00f1[_0x4533e8*(-0x19cc+-0x20c+0x1bdc)+(-0x9*0x398+-0x5b*0x3+-0x1a*-0x149)]=_0x4e337b[0x1a17+-0x2*-0xec+0x5*-0x58f]<<0xce*0x2b+0x2364+-0xb*0x65b|_0x4e337b[0x31c*-0x3+-0x167d+0x1ff6]<<-0xb8a*0x2+-0xfe4+0x2703|_0x4e337b[-0x720*-0x3+0x318+-0x2*0xc29],_0x5b00f1[_0x4533e8*(-0x30d+-0x25*-0xef+-0x1f7a)+(-0x2*0x125d+0xd*-0x28d+0x45e5)]=_0x4e337b[-0xd14+0x6f+0xccc]<<0x2108+0x2474+-0x4567|_0x4e337b[-0x1586+-0x1652+-0x16*-0x200]<<0x872+-0x112c+0x5*0x1c1|_0x4e337b[-0x108+-0x3*-0xbb7+0x35*-0xa4],_0x5b00f1[_0x4533e8*(0x122c+-0x22*0x75+-0x29e)+(0x4*0x4c1+0x49*-0x71+-0x468*-0x3)]=_0x4e337b[0x4a*0x40+0x57c+-0x17d2]<<-0x1ff2+-0xb*0x20a+0x3675|_0x4e337b[-0x2573+-0x2*0xcce+-0x3f3a*-0x1]<<0xd*0xca+0xb7a+-0x15b1|_0x4e337b[0x5*-0x203+-0xbd7+0x32*0x71]):_0x4c40ea[_0x4533e8]=_0x4e337b[0x894*-0x2+0x187d+-0x740]<<0x13*-0x73+0x3*-0x25a+0xfac|_0x4e337b[-0x133*-0xa+0x2631+0x3219*-0x1]<<0x117f+-0x2524+0x13b0|_0x4e337b[0x4*0x2bd+-0x1d0e+0x1*0x1231]);}}(_0x2f95ae=this['sh1to3Text'+'ure2'])==null||_0x2f95ae['unlock'](),(_0x29672d=this['sh4to7Text'+'ure2'])==null||_0x29672d['unlock'](),(_0x46f0a9=this['sh8to11Tex'+'ture2'])==null||_0x46f0a9['unlock'](),(_0x13eb86=this['sh12to15Te'+'xture2'])==null||_0x13eb86['unlock']();}async['updateSHDa'+'taByWorker'](_0x263dcc){var _0x587704,_0x5ac4e3,_0x370d4c,_0x54c8f5,_0x55e7f5;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x24f490={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x36e713,_0x486275,_0x1e89ce,_0x440a50;if((_0x587704=_0x263dcc['transformD'+'ata'])!=null&&_0x587704['sh1to3Data'])_0x36e713=(_0x5ac4e3=_0x263dcc['transformD'+'ata'])==null?void(-0x3b*-0x6b+0x4a9*-0x7+0x7f6):_0x5ac4e3['sh1to3Data'],_0x486275=(_0x370d4c=_0x263dcc['transformD'+'ata'])==null?void(0x514*0x1+0x3*0x244+-0x5f0*0x2):_0x370d4c['sh4to7Data'],_0x1e89ce=(_0x54c8f5=_0x263dcc['transformD'+'ata'])==null?void(-0x1*0x19d+0x7c7*-0x3+0x18f2):_0x54c8f5['sh8to11Dat'+'a'],_0x440a50=(_0x55e7f5=_0x263dcc['transformD'+'ata'])==null?void(0x1fd5+0x76*-0x4+-0x1dfd):_0x55e7f5['sh12to15Da'+'ta'];else{const _0x1c2602=vg(_0x263dcc,_0x24f490*(-0x1dd8+0xfd1*0x2+0x5*-0x5b)),_0x2f406c=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x263dcc['numSplats'],this['shBands'],_0x1c2602);_0x36e713=_0x2f406c['sh1to3Data'],_0x486275=_0x2f406c['sh4to7Data'],_0x1e89ce=_0x2f406c['sh8to11Dat'+'a'],_0x440a50=_0x2f406c['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x36e713),this['shBands']>-0x67*0x20+0xd22+-0xd*0x5&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x486275),this['shBands']>0xd76*-0x2+-0x4c7*0x7+0x3c5f?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x1e89ce),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x440a50)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x1e89ce));}}async function bC(){const _0x13fb65=new Float32Array(-0x19ed*0x1+0x15e+0x1890);new Int32Array(_0x13fb65['buffer']);let _0x33352c=null,_0x3b0477=null,_0x33d10a=null,_0x258de0=null,_0x2f7acc=null,_0x3bc7c0=null,_0x5931aa=null,_0x39e191=null;self['onmessage']=async _0x3efb70=>{const {data:_0x56788e}=_0x3efb70;switch(_0x56788e['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x623ac5(_0x56788e['numSplats'],_0x56788e['shBands'],_0x56788e['SHData']);break;case'updateTran'+'sformData':_0x5c6a64(_0x56788e['numSplats'],_0x56788e['is4D'],_0x56788e['position'],_0x56788e['rotation'],_0x56788e['motion'],_0x56788e['scale'],_0x56788e['muT'],_0x56788e['tScale']);break;case'destroyWor'+'ker':_0x38a03b();break;}};const _0x5c6a64=(_0x5514a8,_0xcd9223,_0x118db9,_0x21b5fe,_0xcacc5b,_0x1334e8,_0x48e76e,_0x374a48)=>{_0x38a03b(),_0xcd9223&&(_0x3b0477=new Float32Array(_0x5514a8*(0xc2*-0x8+-0x154+0x767)),_0x39e191=new Float32Array(_0x5514a8),_0x2f7acc=new Float32Array(_0xcacc5b['buffer']['slice']()),_0x5931aa=new Float32Array(_0xcacc5b['buffer']['slice']())),_0x258de0=new Float32Array(_0x118db9['buffer']['slice']()),_0x33352c=new Float32Array(_0x118db9['buffer']['slice']()),_0x3bc7c0=new Uint16Array(_0x1334e8['buffer']['slice']()),_0x33d10a=new Float32Array(_0x21b5fe['buffer']['slice']());for(let _0x183326=0xdd*0x2b+0xa1d*0x1+0x179e*-0x2;_0x183326<_0x5514a8;_0x183326++)_0xcd9223&&_0x3b0477&&(_0x39e191[_0x183326]=_0x374a48?Math['exp'](_0x374a48[_0x183326]):-0x6a*0x35+0xa*0x2e3+-0x6ec,_0x3b0477[_0x183326*(0x125f+0x1da0+0xbff*-0x4)+(0x118f+0x4*-0x68e+0x8a9*0x1)]=_0x48e76e?_0x48e76e[_0x183326]:0x1*-0xbd+-0x452+0x50f,_0x3b0477[_0x183326*(0xe3c+-0x1d0f+0xed6)+(0x1*0xb9c+-0x608+0x593*-0x1)]=_0x39e191[_0x183326]);const _0x1b0ea3=[_0x33352c['buffer'],_0x258de0['buffer'],_0x3bc7c0['buffer'],_0x33d10a['buffer']];_0xcd9223&&_0x1b0ea3['push'](_0x2f7acc['buffer'],_0x3b0477['buffer'],_0x5931aa['buffer'],_0x39e191['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x33352c,'dataPosition':_0x258de0,'dataScale':_0x3bc7c0,'dataRotation':_0x33d10a,'dataMotion':_0x2f7acc,'dataTime':_0x3b0477,'motion':_0x5931aa,'tScaleArray':_0x39e191},_0x1b0ea3);},_0x623ac5=(_0x3819e3,_0xe75acf,_0x25718a)=>{const _0x2321c8=new Uint32Array(_0x3819e3*(-0x26f2+0x6a+0x268c)),_0x5b9d81=new Uint32Array(_0x3819e3*(-0x1*0x655+-0xf49+-0xd5*-0x1a)),_0x1757fe=new Uint32Array(_0x3819e3*(0x12f4+-0x17c*0x7+-0x4*0x223)),_0x4403b3=new Uint32Array(_0x3819e3*(0x1*0x2011+-0x10*0x2c+-0x1d4d)),_0x4759b0={0x1:0x3,0x2:0x8,0x3:0xf}[_0xe75acf],_0x9412c=_0x25718a,_0x584b3d=0xe15+0x9c8*0x2+-0x86*0x31,_0x9119be=0xd*0x17+0x51e+-0x24a,_0x3e2dbb=new Float32Array(-0x4*0xe+-0xedc*-0x1+-0xea3),_0x342fee=new Uint32Array(_0x3e2dbb['buffer']),_0x359f2c=new Array(_0x4759b0*(-0xc11+-0x26*-0x7a+0x304*-0x2))['fill'](0x1119+-0x21e8+0x10cf);for(let _0x5766a4=-0xd8e+-0x8e7+0x1675;_0x5766a4<_0x3819e3;++_0x5766a4){for(let _0x5d260a=0xdbd+-0x10ed+0x330;_0x5d260a<_0x4759b0;++_0x5d260a)_0x359f2c[_0x5d260a*(-0x479+0x29+0x453)]=_0x9412c[_0x5d260a][_0x5766a4],_0x359f2c[_0x5d260a*(0x236e+-0xfd1+-0x139a)+(-0x511*0x3+-0x1481+-0x3*-0xbe7)]=_0x9412c[_0x5d260a+_0x4759b0][_0x5766a4],_0x359f2c[_0x5d260a*(-0x99f*0x1+-0x222e+0x2bd0)+(-0xfef+-0x1a89*-0x1+-0xa98)]=_0x9412c[_0x5d260a+_0x4759b0*(0x2*-0x446+-0x124*0x6+0xf66)][_0x5766a4];let _0x352121=_0x359f2c[-0x43*-0x8f+-0x34c+0x2221*-0x1];for(let _0x48d5a5=-0xb*0x79+0x11*-0x1e7+0x258b;_0x48d5a5<_0x4759b0*(-0x1582+-0x666*0x3+0x28b7);++_0x48d5a5)_0x352121=Math['max'](_0x352121,Math['abs'](_0x359f2c[_0x48d5a5]));if(_0x352121!==-0x22e*-0xd+-0xe6b+0x7*-0x1fd){for(let _0x4d4ad5=-0x93f*-0x4+-0xbdc+-0x324*0x8;_0x4d4ad5<_0x4759b0;++_0x4d4ad5)_0x359f2c[_0x4d4ad5*(-0x24cd+-0x109a+0x3*0x11ce)+(-0x3*-0x397+0x51*-0x19+0x16e*-0x2)]=Math['max'](0x1d75+-0x1246+-0xb2f,Math['min'](_0x584b3d,Math['floor']((_0x359f2c[_0x4d4ad5*(-0x1202+0xa7*-0x7+0x19d*0xe)+(-0x1*-0xa4c+-0x1181+0x735)]/_0x352121*(-0x18*-0x14b+0x184f+-0x3757+0.5)+(-0x19c1*-0x1+0xb87*0x2+-0x30cf+0.5))*_0x584b3d+(0x1457+0x3dc+0x3*-0x811+0.5)))),_0x359f2c[_0x4d4ad5*(0x72d*-0x1+-0x1f3*0xa+-0x1aae*-0x1)+(-0x1255*-0x1+-0x2344*0x1+0x10f0)]=Math['max'](0x1a7b+0x5*-0x16f+-0x1350,Math['min'](_0x9119be,Math['floor']((_0x359f2c[_0x4d4ad5*(-0x3c6+-0x1307+0x16d0)+(0x2531+-0x72*-0x27+-0x2*0x1b47)]/_0x352121*(-0x33f+-0x39e*0x8+-0x1*-0x202f+0.5)+(0xc94+-0x168c+0x9f8+0.5))*_0x9119be+(0x193a+-0x6f+-0x18cb+0.5)))),_0x359f2c[_0x4d4ad5*(0x962+0x23dc+-0x1*0x2d3b)+(-0x1*-0x5fc+-0x1ed*-0x10+0x24ca*-0x1)]=Math['max'](0x45a+0xebc+-0x1316,Math['min'](_0x584b3d,Math['floor']((_0x359f2c[_0x4d4ad5*(0x1885+0xe*-0x2a0+0xc3e)+(0x1686+-0x958+-0x696*0x2)]/_0x352121*(-0x92f*0x4+-0x50*-0x43+0xfcc+0.5)+(-0x1410+-0x39e+-0x2*-0xbd7+0.5))*_0x584b3d+(0x241e+-0x1149*0x1+-0x12d5+0.5))));_0x3e2dbb[0x104e+0x10*0x44+-0x6da*0x3]=_0x352121,_0x2321c8[_0x5766a4*(0x16c*0x1+0x2602+-0x3f1*0xa)+(-0x17e3+0x1851+-0x2*0x37)]=_0x342fee[0x155b+-0x1592+0x37],_0x2321c8[_0x5766a4*(0x1c6*0x1+0x218c+-0x234e)+(-0x1ffb+-0x96a+0x2966)]=_0x359f2c[0x79*0x9+-0x1ce8+0x18a7]<<0xab*0xf+0x1*-0x2183+-0x1*-0x1793|_0x359f2c[0x144b+0x18b2+-0x2cfc]<<-0x6bc+0x745+-0x7e|_0x359f2c[0x969+0x1aa8+0xb5*-0x33],_0x2321c8[_0x5766a4*(0x2e8+0x1f7d+0x2a5*-0xd)+(0x18cb+-0x2*0x103+-0x1*0x16c3)]=_0x359f2c[-0x22ae+-0x2*-0xe2a+0x65d]<<0x1c31+-0x16b7+-0x565|_0x359f2c[-0x495*0x1+0x1*0x15c0+-0x1127]<<-0xd12+0x14f9+-0x7dc|_0x359f2c[-0xa*0x2aa+-0x10b2*-0x2+0x6bb*-0x1],_0x2321c8[_0x5766a4*(-0xa*0x2d4+-0xf79*0x2+0x3b3e)+(-0x322+-0x1c57+0x1f7c)]=_0x359f2c[-0x1*-0x18dc+0x2689*0x1+-0x3f5f]<<0x720+0x11a5+-0x316*0x8|_0x359f2c[-0x2*-0x48d+0x22fb+0x1*-0x2c0e]<<0x34*0x76+0x2179+-0x3966|_0x359f2c[-0x8bb+-0xb5*0x16+-0x1*-0x1851],_0xe75acf>0x23cb+0x447+-0x2811&&(_0x5b9d81[_0x5766a4*(0x2264+-0x222b+-0x35*0x1)+(-0x1666+0x1e6f+-0x809)]=_0x359f2c[-0x20a6+-0x105f+-0x7*-0x702]<<-0xbe9*0x1+0x143+0xabb|_0x359f2c[-0xeda*-0x1+0xc5f+-0x1b2f]<<-0x169b+-0x4ec+0x1b92|_0x359f2c[-0x29*0xcc+0x2527+-0x470],_0x5b9d81[_0x5766a4*(-0x22dd+0x16e+0x2173)+(-0x1f44*-0x1+0xbae+-0x2af1)]=_0x359f2c[0x2626+-0x1f07+-0x713]<<0x168d+-0x3ea*-0x7+-0x31de|_0x359f2c[-0x1*0x81f+0x11cb*-0x1+-0x11*-0x187]<<0x158a+-0x1*0x7ed+-0x12*0xc1|_0x359f2c[-0x1*0x1f9d+0x2*0x569+0x14d9],_0x5b9d81[_0x5766a4*(0x14*-0x1e2+0x1*-0x1797+-0x1*-0x3d43)+(0xc04*-0x1+0x8d+0xb79)]=_0x359f2c[-0x198+0x999+-0x7f2]<<0x234+-0x1e9b*0x1+0x1c7c|_0x359f2c[0x7*-0x525+-0x1c75+0x2*0x2044]<<-0x6f4+0x35b*0x9+-0x1734|_0x359f2c[-0x91a+0x26dd*-0x1+0x3008],_0x5b9d81[_0x5766a4*(0x2*-0x116a+-0xbbb+0x2e93)+(-0x7*0x496+0x20*-0x25+-0x63*-0x5f)]=_0x359f2c[-0x212d+-0x16fa+0x3839]<<-0x1efe+0x54d+0x2*0xce3|_0x359f2c[-0x675*0x1+-0x2501+0xf*0x2e7]<<-0x1408+-0x2a9+-0x123*-0x14|_0x359f2c[-0x144d*0x1+-0x1b65*0x1+-0x2fc6*-0x1],_0xe75acf>-0x1adf+0x1ba6+0x1*-0xc5?(_0x1757fe[_0x5766a4*(-0x1d25+-0xe*-0x169+0x96b)+(0x27d+0xd4f*-0x2+0x1821*0x1)]=_0x359f2c[-0x13ed+-0x47*0x82+0x3810]<<0x183a+0x98*0x17+-0x25cd*0x1|_0x359f2c[-0x67b+0x16*-0xf6+0x1bb5]<<0x102f+0x17f7*-0x1+0x7d3*0x1|_0x359f2c[0x1*0x11b1+-0x262f+0x1495],_0x1757fe[_0x5766a4*(-0x1*-0x240b+0x1*-0xf7d+0x1de*-0xb)+(-0xb*-0x2a0+0xe8f+-0x2b6e)]=_0x359f2c[0x13*0x4b+0x1bf9+-0x2172]<<-0x6af+0xf*-0x168+0x4*0x6f7|_0x359f2c[-0x4*0x8b7+-0x77d*0x5+-0x6*-0xc11]<<0x119a+0x832*0x2+0x1*-0x21f3|_0x359f2c[0x3*-0x223+0x2*-0x427+0x1*0xed1],_0x1757fe[_0x5766a4*(-0x12b1+-0x1f73+0x282*0x14)+(0x58f+-0x3c2+-0x1cb)]=_0x359f2c[-0x1*-0x1595+-0x88a+0x90*-0x17]<<0xfd5+0x2133+-0x30f3|_0x359f2c[-0x24d4+0x1881+0xc6f]<<-0x42c+-0xd6*-0x29+-0x1e0f|_0x359f2c[0x14*0x152+0x54f+-0x1f9a],_0x1757fe[_0x5766a4*(0x1*0x1f23+0x2326+-0x4245)+(0x1be+-0x211c+0x1f61*0x1)]=_0x359f2c[0x6da*-0x4+0x4ee*0x4+0x7ce]<<-0x9ed+-0xf*-0x14b+0x3*-0x321|_0x359f2c[-0x136b+-0x1*0x124a+0x25d4]<<-0x1*0x21ad+0xb45+0x1673|_0x359f2c[0x1538+0x65*0x17+0x1e2b*-0x1],_0x4403b3[_0x5766a4*(-0x1*0x105c+-0x1*-0x2407+-0x13a7)+(-0x1*-0x1015+0x6*-0x373+0x49d)]=_0x359f2c[-0xd3c+-0x9b4+0x1711]<<0x1d95+0xeb*0xb+-0x2799|_0x359f2c[0x1ce9+-0xabd+-0x905*0x2]<<-0xf65+-0x1dd+0x114d|_0x359f2c[0xb2*-0x2b+0x9cd*-0x1+0x2*0x13eb],_0x4403b3[_0x5766a4*(0x2414*-0x1+-0x105e*0x2+-0x1135*-0x4)+(-0x1*0x1843+-0x1bb8+0xc*0x455)]=_0x359f2c[-0x1e20+0x4b5*0x1+-0x1*-0x198f]<<0x1f4+-0x265*-0xc+0x1e9b*-0x1|_0x359f2c[-0x143a*0x1+-0x19cf+-0x2e*-0x101]<<0xc17+0x5c8+-0x11d4|_0x359f2c[0x10e5+-0x19*-0xd+0x481*-0x4],_0x4403b3[_0x5766a4*(-0x11e5*-0x2+-0x3a*-0x7c+-0xaa5*0x6)+(0x1ac4+-0x1cc4+0x2*0x101)]=_0x359f2c[0x269*-0x7+-0xc37+0x1d3d]<<0x1*-0xe13+-0x23e*0x11+-0x3446*-0x1|_0x359f2c[0x43f*0x1+-0x322*0x2+0x22d*0x1]<<0x1838+-0xb5f+-0xcce|_0x359f2c[0xab*-0x26+-0x864+0x21ef],_0x4403b3[_0x5766a4*(0x8d4+-0x8d1*-0x3+0x213*-0x11)+(-0x4*0x2f9+-0xf4+0xcdb)]=_0x359f2c[-0x195a+-0xd*0xad+0x224d*0x1]<<0x2b*0xb6+0x7*-0x34d+0x9*-0xd2|_0x359f2c[0x1*0x148f+-0x3e3*0xa+-0xa*-0x1d9]<<0x57c+-0x1*-0x1ca5+0x2*-0x110b|_0x359f2c[0x1b10+0x2450+-0x3f34]):_0x1757fe[_0x5766a4]=_0x359f2c[0xa4*-0x3b+-0x1f43+-0x2*-0x2292]<<-0xb38+0x2*0xac6+0x3d*-0x2b|_0x359f2c[-0x1*0x2214+-0x62*0x31+-0xc*-0x469]<<0xd*-0x28d+-0xe20+0x2f54|_0x359f2c[0x168a*-0x1+-0x1f3*0x10+0x35d1*0x1]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x2321c8,'sh4to7Data':_0x5b9d81,'sh8to11Data':_0x1757fe,'sh12to15Data':_0x4403b3}},[_0x2321c8['buffer'],_0x5b9d81['buffer'],_0x1757fe['buffer'],_0x4403b3['buffer']]);},_0x38a03b=()=>{_0x33352c=null,_0x3b0477=null,_0x33d10a=null,_0x258de0=null,_0x2f7acc=null,_0x3bc7c0=null,_0x5931aa=null,_0x39e191=null;};}class AC extends me{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+bC['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x39f734,_0x5d0558,_0xf755be){_0x39f734['onmessage']=_0x419f77=>{if(!this['worker'])return;const {data:_0x217e64}=_0x419f77;if(_0x217e64['type']===_0x5d0558)switch(_0x5d0558){case'updatedSHD'+'ata1':_0xf755be(_0x217e64['data']);break;case'updatedCol'+'orData':_0xf755be(_0x217e64['data']);break;case'updatedTra'+'nsformData':_0xf755be(_0x217e64);break;}};}['updateSHDa'+'ta1'](_0x178a2e,_0x474209,_0x51165a){var _0x49bccb;return(_0x49bccb=this['worker'])==null||_0x49bccb['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x178a2e,'shBands':_0x474209,'SHData':_0x51165a}),new Promise(_0x19dcb8=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x6f5632=>{_0x19dcb8(_0x6f5632);});});}async['updateTran'+'sData'](_0x3b99ac,_0x1086d5,_0x16d398,_0x16c581,_0x1e66b5,_0x74c963,_0x1df7ce,_0x5984dd){var _0x726de;return(_0x726de=this['worker'])==null||_0x726de['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x3b99ac,'is4D':_0x1086d5,'position':_0x16d398,'rotation':_0x16c581,'motion':_0x1e66b5,'scale':_0x74c963,'muT':_0x1df7ce,'tScale':_0x5984dd}),new Promise(_0x2ae718=>{const _0x590985=_0x59c95e=>{_0x2ae718(_0x59c95e);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x590985);});}['destroy'](){var _0x815dab;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x815dab=this['worker'])==null||_0x815dab['terminate'](),this['worker']=null);}}const xg=(_0xdb4dbc,_0x2fd079)=>{const _0x492c7c=[];for(let _0x44a24c=-0x826+0x140f+0xbe9*-0x1;_0x44a24c<_0x2fd079;++_0x44a24c)_0x492c7c['push'](_0xdb4dbc['getProp']('f_rest_'+_0x44a24c));return _0x492c7c;};class CC extends Rv{constructor(_0x44e31f,_0x17dc46){super(_0x44e31f,_0x17dc46),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(-0x3cc+0x1*0x31+-0x4d*-0xc)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new AC(),this['assetsMana'+'gerLoadedT'+'ime']=-0x176d+-0x4*0x79f+0x35ee);}['setSceneIn'+'fo'](_0x569ef6){this['sceneInfo']['duration']=_0x569ef6['duration'],this['sceneInfo']['fps']=_0x569ef6['fps'],this['sceneInfo']['totalGauss'+'ians']=_0x569ef6['totalGauss'+'ians'],this['sceneInfo']['globalBoun'+'dingBoxMin']=new D(_0x569ef6['globalBoun'+'dingBox']['min'][0x502+0x1dd4+0x2*-0x116b],_0x569ef6['globalBoun'+'dingBox']['min'][0xa*0x119+-0x8fb*-0x2+0x1*-0x1cef],_0x569ef6['globalBoun'+'dingBox']['min'][-0x5*-0x7cc+0x377*-0x1+0x1*-0x2383]),this['sceneInfo']['globalBoun'+'dingBoxMax']=new D(_0x569ef6['globalBoun'+'dingBox']['max'][0x28a+0x16af*0x1+0xb*-0x24b],_0x569ef6['globalBoun'+'dingBox']['max'][-0x2555+-0x1*-0x701+-0x1e55*-0x1],_0x569ef6['globalBoun'+'dingBox']['max'][0x11ef+-0x185d+0x670]);const _0x3dfc1f=_0x569ef6['globalBoun'+'dingBox']['min'][-0x397+-0x13*-0x82+-0x1*0x60f],_0x60e5c=_0x569ef6['globalBoun'+'dingBox']['min'][0xbaf+0x13b7+-0x1f65],_0x212a2e=_0x569ef6['globalBoun'+'dingBox']['min'][-0x6c3*-0x4+0x2195+-0x3c9f],_0x18d715=_0x569ef6['globalBoun'+'dingBox']['max'][-0x2395*0x1+0xcb*-0x11+-0x1*-0x3110],_0x51c818=_0x569ef6['globalBoun'+'dingBox']['max'][-0x8e0+0xfe7+-0x1d*0x3e],_0x1f21c2=_0x569ef6['globalBoun'+'dingBox']['max'][0x8fa+0x1674+-0x1f6c],_0x181e30=new D((_0x3dfc1f+_0x18d715)*(0x56*0x47+-0x1a3b+0x261+0.5),(_0x60e5c+_0x51c818)*(-0x699+0x48d+0x20c+0.5),(_0x212a2e+_0x1f21c2)*(-0x1deb+0x3*0x7b0+0x6db+0.5)),_0x16f8ac=new D((_0x18d715-_0x3dfc1f)*(0x1*-0x18e+0xb*0x23b+-0x9f*0x25+0.5),(_0x51c818-_0x60e5c)*(-0xa9*0x25+0x2*0x1d3+0x3*0x6ed+0.5),(_0x1f21c2-_0x212a2e)*(0x167c+-0xdc9+-0x8b3+0.5)),_0x420420=new De(_0x181e30,_0x16f8ac);this['sceneInfo']['globalBoun'+'dingBox']=_0x420420,this['aabb']=_0x420420;}async['updateData'](){var _0x193d03,_0x37a211,_0x33ff8f,_0x9461f3,_0x4233a3,_0x5da507,_0x5560f6,_0x573119,_0x114b9c,_0x2b5944,_0x455eed;await super['updateData']();const _0x3d53c8=this['gsplatData'];if(!_0x3d53c8)return;this['is4D']=_0x3d53c8['is4D'];const _0x6b815a=await this['getTransfo'+'rmDataByWo'+'rker'](_0x3d53c8);this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x6b815a['centers'],this['motion']=_0x6b815a['motion'],this['tScale']=_0x6b815a['tScaleArra'+'y'],this['muT']=await _0x3d53c8['getMuT'](),this['timeIndex']=await _0x3d53c8['getTimeInd'+'ex']();const _0xb3d514=this['evalTextur'+'eSize'](_0x3d53c8['numSplats']);this['colorTextu'+'re']?((_0x193d03=this['colorTextu'+'re2'])==null||_0x193d03['destroy'](),(_0x37a211=this['transformA'+'Texture2'])==null||_0x37a211['destroy'](),(_0x33ff8f=this['transformB'+'Texture2'])==null||_0x33ff8f['destroy'](),(_0x9461f3=this['transformR'+'Texture2'])==null||_0x9461f3['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0xb3d514),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0xb3d514),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0xb3d514),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0xb3d514),this['is4D']&&((_0x4233a3=this['transformM'+'otionTextu'+'re2'])==null||_0x4233a3['destroy'](),(_0x5da507=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x5da507['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0xb3d514),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0xb3d514))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',nt,_0xb3d514),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0xb3d514),this['transformA'+'Texture']=this['createText'+'ure']('transformA',Ye,_0xb3d514),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0xb3d514),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ui,_0xb3d514),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0xb3d514),this['transformR'+'Texture']=this['createText'+'ure']('transformR',Ye,_0xb3d514),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0xb3d514),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',Ye,_0xb3d514),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0xb3d514),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',Ye,_0xb3d514),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0xb3d514))),await this['updateColo'+'rData'](_0x3d53c8),await this['updateTran'+'sformFromD'+'ata'](_0x6b815a),this['shBands']=_0x3d53c8['shBands'],this['shBands']>-0x1cd1+0x254c*0x1+-0xd*0xa7&&(this['sh1to3Text'+'ure']?((_0x5560f6=this['sh1to3Text'+'ure2'])==null||_0x5560f6['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0xb3d514),this['shBands']>0x1*0x3d1+0xc31+0xf1*-0x11&&((_0x573119=this['sh4to7Text'+'ure2'])==null||_0x573119['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0xb3d514),this['shBands']>-0x201f+0x18*-0x191+0x45b9?((_0x114b9c=this['sh8to11Tex'+'ture2'])==null||_0x114b9c['destroy'](),(_0x2b5944=this['sh12to15Te'+'xture2'])==null||_0x2b5944['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0xb3d514),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0xb3d514)):((_0x455eed=this['sh8to11Tex'+'ture2'])==null||_0x455eed['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0xb3d514)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0xb3d514),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ue,_0xb3d514),this['shBands']>-0x3cd+-0x4*-0x2fc+0x15b*-0x6&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ue,_0xb3d514),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0xb3d514),this['shBands']>-0x123*-0x11+0xc40+0x1*-0x1f91?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ue,_0xb3d514),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0xb3d514),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ue,_0xb3d514),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0xb3d514)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ki,_0xb3d514),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ki,_0xb3d514)))),await this['updateSHDa'+'taByWorker'](_0x3d53c8));}['updateText'+'ure'](){this['isDestroye'+'d']||(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x3c793e){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x3c793e}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x5c866b,_0x5ce31a,_0x4cdd2f,_0x3d301f,_0x12ba81,_0x4327f2){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x5c866b,'timeOption':_0x5ce31a,'loadedTime':_0x4cdd2f,'asset':_0x3d301f,'events':_0x12ba81,'seekCB':_0x4327f2}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(0x68a+0xab6+-0x1140);try{for(;this['appendQueu'+'e']['length']>-0x1*0x10d9+0x1333+0x2b*-0xe;){const _0x1e2a68=this['appendQueu'+'e']['shift']();_0x1e2a68['type']==='append'?await this['processApp'+'endTask'](_0x1e2a68['data']):_0x1e2a68['type']==='release'&&await this['processRel'+'easeTask'](_0x1e2a68['data']);}}finally{this['isProcessi'+'ngQueue']=!(0x1e40+-0x1cf*0x9+-0x2*0x6fc);}}}async['processRel'+'easeTask'](_0x2e0011){const {index:_0x4613c5}=_0x2e0011;this['isDestroye'+'d']||await this['gsplatData']['releaseSeq'+'Data'](_0x4613c5);}async['processApp'+'endTask'](_0x1da08d){var _0x4f17f6;const {gsplatData:_0x308602,timeOption:_0x1fdef8,loadedTime:_0x4c7aaa,asset:_0x5d90f7,events:_0x563257,seekCB:_0x44fc7f}=_0x1da08d;!this['gsplatData']||this['isDestroye'+'d']||(globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x1fdef8,this['asset']=_0x5d90f7,this['assetsMana'+'gerLoadedT'+'ime']=_0x4c7aaa,this['events']=_0x563257,await this['gsplatData']['appendGSpl'+'atData'](_0x308602,_0x4c7aaa,_0x1fdef8),console['log']('loadTime__'+'__','gsplatDeco'+'dedResourc'+'e\x20gsplatDa'+'ta.appendG'+'SplatData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x277*0xc+-0xad8+-0x3*0x63e),_0x308602['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x308602['numSplats'])['toFixed'](0xe*0xbf+-0x50a+-0x565*0x1)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20this.upd'+'ateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x26e8+-0x2f6*-0x6+0x1526),_0x308602['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await((_0x4f17f6=this['gsplatInst'+'ance'])==null?void(0x259*0x2+0x1*0xbf5+-0x1*0x10a7):_0x4f17f6['updateInst'+'anceData'](this,_0x4c7aaa,_0x44fc7f)),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20updateIn'+'stanceData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x15*-0xf9+-0x15*0x105+-0x7f*-0x2),_0x308602['numSplats']));}['fireAssets'+'ManagerTim'+'eIndex'](_0x2deb38,_0x45f957){var _0x29618b;const _0x42a1b2=_0x2deb38||this['assetsMana'+'gerLoadedT'+'ime'];(_0x29618b=this['asset'])==null||_0x29618b['fire']('setAssetsL'+'oaded',_0x42a1b2,_0x45f957);}['destroy'](){var _0x41a9e0,_0xa39eb3,_0x9fd3d7,_0x51afcd,_0x1036ca,_0xecd693,_0x238995,_0x1ecf3b,_0x38c8b3,_0x24d580,_0x16e757,_0x10fec6,_0x433807,_0x247ad0,_0x511784,_0x421b0c,_0x11bacb,_0x5e9a16,_0x50f257,_0xadfcee,_0x1bcd6e;(_0x41a9e0=this['updateData'+'Worker'])==null||_0x41a9e0['destroy'](),this['updateData'+'Worker']=void(0xd*0x57+0x1333+-0x179e),(_0xa39eb3=this['colorTextu'+'re'])==null||_0xa39eb3['destroy'](),(_0x9fd3d7=this['transformA'+'Texture'])==null||_0x9fd3d7['destroy'](),(_0x51afcd=this['transformB'+'Texture'])==null||_0x51afcd['destroy'](),(_0x1036ca=this['transformR'+'Texture'])==null||_0x1036ca['destroy'](),(_0xecd693=this['transformM'+'otionTextu'+'re'])==null||_0xecd693['destroy'](),(_0x238995=this['transformL'+'ifecycleTe'+'xture'])==null||_0x238995['destroy'](),(_0x1ecf3b=this['sh1to3Text'+'ure'])==null||_0x1ecf3b['destroy'](),(_0x38c8b3=this['sh4to7Text'+'ure'])==null||_0x38c8b3['destroy'](),(_0x24d580=this['sh8to11Tex'+'ture'])==null||_0x24d580['destroy'](),(_0x16e757=this['sh12to15Te'+'xture'])==null||_0x16e757['destroy'](),(_0x10fec6=this['colorTextu'+'re2'])==null||_0x10fec6['destroy'](),(_0x433807=this['transformA'+'Texture2'])==null||_0x433807['destroy'](),(_0x247ad0=this['transformB'+'Texture2'])==null||_0x247ad0['destroy'](),(_0x511784=this['transformR'+'Texture2'])==null||_0x511784['destroy'](),(_0x421b0c=this['transformM'+'otionTextu'+'re2'])==null||_0x421b0c['destroy'](),(_0x11bacb=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x11bacb['destroy'](),(_0x5e9a16=this['sh1to3Text'+'ure2'])==null||_0x5e9a16['destroy'](),(_0x50f257=this['sh4to7Text'+'ure2'])==null||_0x50f257['destroy'](),(_0xadfcee=this['sh8to11Tex'+'ture2'])==null||_0xadfcee['destroy'](),(_0x1bcd6e=this['sh12to15Te'+'xture2'])==null||_0x1bcd6e['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x26f8e4){var _0x20bafe,_0xbb8fad,_0xd9e086,_0x15d4ab,_0x5b60ee,_0x49b998,_0xd74376,_0x1a6079,_0x44bc41,_0x222ee0,_0x182037,_0x5d3c2b,_0x745159;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x1bc4d1=((_0x20bafe=_0x26f8e4['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(-0xf03+0x217+-0x4*-0x33b):_0x20bafe['data'])??-0x3fa+0x1b81+-0x1787,_0x399959=((_0xbb8fad=_0x26f8e4['getParamet'+'er']('uSplatScal'+'e'))==null?void(-0x1*0x15d+-0x22b8+0x2415):_0xbb8fad['data'])??0x7*-0x211+0x15*0x16+0x1*0xcaa,_0x215944=((_0xd9e086=_0x26f8e4['getParamet'+'er']('uSaturatio'+'n'))==null?void(-0xdab+0xf8*-0x5+0x1283):_0xd9e086['data'])??0x1*-0x4cf+0xc5c+0x1e3*-0x4,_0x568fa7=((_0x15d4ab=_0x26f8e4['getParamet'+'er']('uHueOffset'))==null?void(0x1*-0x5d5+-0x1*0x4f+0x624):_0x15d4ab['data'])??0x1*0xad2+0x26e1+-0x3*0x1091,_0x48501a=((_0x5b60ee=_0x26f8e4['getParamet'+'er']('uInvertOpa'+'city'))==null?void(-0x1d99*-0x1+-0x2*0x126e+0xb*0xa9):_0x5b60ee['data'])??-0x247d+0x2606+-0x189,_0x76bf1a=((_0x49b998=_0x26f8e4['getParamet'+'er']('uOpacity'))==null?void(0xafa+0x4*-0x892+0x13a*0x13):_0x49b998['data'])??-0x6b*0x4f+0x33*-0xb8+0x45ae,_0x164b0e=((_0xd74376=_0x26f8e4['getParamet'+'er']('clrOffset'))==null?void(-0xd4a+0x30*-0x97+0x299a):_0xd74376['data'])??[0x1bfa+-0x1cb+-0x1a2f,-0x128b+0x3*0x50+0x119b,0x79e+0x1*-0x2309+0x1*0x1b6b,-0x4*0x5db+-0x2689+0x46d*0xe],_0x211fc6=((_0x1a6079=_0x26f8e4['getParamet'+'er']('clrScale'))==null?void(-0x12f4+0x2*-0x959+0x25a6):_0x1a6079['data'])??[-0x1e51+-0xc1*0x18+-0x306a*-0x1,-0x1443+-0x22f8+0x373c,0x790+0xf*0x3e+-0xbf*0xf,0x2447+0x1*-0x14ea+-0x1*0xf5c],_0x44bb33=((_0x44bc41=_0x26f8e4['getParamet'+'er']('uShapeN'))==null?void(0x5*-0x6f7+-0x2b*-0x49+0x4c*0x4c):_0x44bc41['data'])??0x3b*-0x61+0x7*-0x3c3+-0x13*-0x290,_0x4148db=((_0x222ee0=_0x26f8e4['getParamet'+'er']('mode'))==null?void(0xd8b*0x2+-0x3d*0x14+-0x1652):_0x222ee0['data'])??-0x6f1*-0x1+-0xbb*-0x17+0x1*-0x17be,_0x14dcea=((_0x182037=_0x26f8e4['getParamet'+'er']('ringSize'))==null?void(0xa99*0x2+0x13e7+-0x7*0x5df):_0x182037['data'])??-0x1a*-0x115+0x19d0+0x2*-0x1af9,_0xfbb89=((_0x5d3c2b=_0x26f8e4['defines'])==null?void(0x5*-0x6a5+-0x2*-0xafa+-0xb45*-0x1):_0x5d3c2b['get']('uOpenAnim'))??'0',_0x201337=((_0x745159=_0x26f8e4['defines'])==null?void(-0x29*0x2+0x1b2*-0xa+0x1146):_0x745159['get']('uControlCo'+'lorMode'))??'0';_0x26f8e4['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x26f8e4['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x26f8e4['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x26f8e4['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x26f8e4['setParamet'+'er']('uSplatScal'+'e',_0x399959),_0x26f8e4['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x1bc4d1),_0x26f8e4['setParamet'+'er']('uSaturatio'+'n',_0x215944),_0x26f8e4['setParamet'+'er']('uHueOffset',_0x568fa7),_0x26f8e4['setParamet'+'er']('uInvertOpa'+'city',_0x48501a),_0x26f8e4['setParamet'+'er']('uOpacity',_0x76bf1a),_0x26f8e4['setParamet'+'er']('clrOffset',_0x164b0e),_0x26f8e4['setParamet'+'er']('clrScale',_0x211fc6),_0x26f8e4['setParamet'+'er']('uShapeN',_0x44bb33),_0x26f8e4['setParamet'+'er']('mode',_0x4148db),_0x26f8e4['setParamet'+'er']('ringSize',_0x14dcea),_0x26f8e4['setParamet'+'er']('prerenderC'+'Time',-0x38f*-0x8+0x574*0x3+-0x2cd4),_0x26f8e4['setParamet'+'er']('renderSpac'+'e',0x33a*-0xa+-0x1f37+-0x65*-0xa1),_0x26f8e4['setParamet'+'er']('endSpace',-0x4*0x1+0x266f*-0x1+0x267d),_0x26f8e4['setDefine']('uOpenAnim',_0xfbb89),_0x26f8e4['setDefine']('uControlCo'+'lorMode',_0x201337),this['transformM'+'otionTextu'+'re']&&_0x26f8e4['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x26f8e4['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x26f8e4['setDefine']('SH_BANDS',this['shBands']),_0x26f8e4['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x26f8e4['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x26f8e4['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x26f8e4['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x26f8e4['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x1b6150){const _0x126463=Math['ceil'](Math['sqrt'](_0x1b6150)),_0x1cce8f=Math['ceil'](_0x1b6150/_0x126463);return new J(_0x126463,_0x1cce8f);}async['updateColo'+'rData'](_0x3bdde4){var _0x4d69b2;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x2866ff=this['colorTextu'+'re2'];if(!_0x2866ff||this['isDestroye'+'d'])return;let _0xb394bb=(_0x4d69b2=_0x3bdde4['transformD'+'ata'])==null?void(0x2*0x347+0x3*-0x202+0x1*-0x88):_0x4d69b2['dataColor'];if(!_0xb394bb){const _0x17331c=_0x3bdde4['getProp']('color_opac'+'ity');_0xb394bb=new Uint16Array(_0x17331c['buffer']['slice']());}await this['idleUpdate'+'TexturePro'+'mise'](_0x2866ff,_0xb394bb);}async['getTransfo'+'rmDataByWo'+'rker'](_0x108bea){var _0xa2afbb;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0xa2afbb=_0x108bea['transformD'+'ata'])!=null&&_0xa2afbb['dataCenter'+'s'])return{'centers':_0x108bea['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x108bea['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x108bea['transformD'+'ata']['dataScale'],'dataRotation':_0x108bea['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x108bea['transformD'+'ata']['dataMotion'],'dataTime':_0x108bea['transformD'+'ata']['dataTime'],'motion':_0x108bea['transformD'+'ata']['motion'],'tScaleArray':_0x108bea['transformD'+'ata']['tScaleArra'+'y']};const _0x5b5d58=_0x108bea['getProp']('position'),_0xff6b71=_0x108bea['getProp']('motion'),_0x4fdf43=_0x108bea['getProp']('rotation'),_0x5d6545=_0x108bea['getProp']('scale'),_0x391521=_0x108bea['getProp']('t'),_0x6f9223=_0x108bea['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x108bea['numSplats'],this['is4D'],_0x5b5d58,_0x4fdf43,_0xff6b71,_0x5d6545,_0x391521,_0x6f9223);}async['updateTran'+'sformFromD'+'ata'](_0x9eca0b){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x9eca0b['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x9eca0b['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x9eca0b['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x9eca0b['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x9eca0b['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x1f942a,_0xf4af23){if(!this['isDestroye'+'d'])return new Promise(_0x4c81ee=>{requestIdleCallback(()=>{const _0x2d0365=_0x1f942a['lock']();_0x2d0365==null||_0x2d0365['set'](_0xf4af23),_0x1f942a['unlock'](),_0x4c81ee(!(-0x2249*0x1+0x1c7f+0x5ca));},{'timeout':0x12c});});}async['updateSHDa'+'ta'](_0x46f9b5){var _0x4d77d7,_0x243988,_0x422436,_0x1164a0,_0x7fef5a,_0x1c924d,_0x44b990,_0x3573f4;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x109b21=(_0x4d77d7=this['sh1to3Text'+'ure2'])==null?void(-0x1f01+0x10c7+0xe3a):_0x4d77d7['lock'](),_0x46ef16=(_0x243988=this['sh4to7Text'+'ure2'])==null?void(-0x1*-0x191d+0xa6e+-0x238b):_0x243988['lock'](),_0x5ea4d6=(_0x422436=this['sh8to11Tex'+'ture2'])==null?void(-0xb7e*-0x2+-0x16cf+0x1*-0x2d):_0x422436['lock'](),_0x492906=(_0x1164a0=this['sh12to15Te'+'xture2'])==null?void(-0xec2*0x1+-0x257*0x10+0x22*0x189):_0x1164a0['lock'](),_0x532682={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x4308d3=xg(_0x46f9b5,_0x532682*(0x22fb*-0x1+-0x2*0x472+0x2be2)),_0x24a173=0x10ce+0x673+-0x117*0xe,_0x1108a2=-0x1ebb+0x2*0x3d1+0x1b18,_0x2f640c=new Float32Array(-0x75*-0xd+-0xb6*0x11+0x626),_0xeded43=new Uint32Array(_0x2f640c['buffer']),_0x597e6d=new Array(_0x532682*(0xbd8+-0xdb8+-0xa1*-0x3))['fill'](0x1*-0x1b7+-0x4*0x939+0x269b);for(let _0x1d165d=0x266+0x2537*0x1+-0x279d;_0x1d165d<_0x46f9b5['numSplats'];++_0x1d165d){for(let _0x44465a=-0x65*-0x4f+0x10*-0x161+-0x1*0x91b;_0x44465a<_0x532682;++_0x44465a)_0x597e6d[_0x44465a*(-0x2*-0x36d+-0x734+0x5d)]=_0x4308d3[_0x44465a][_0x1d165d],_0x597e6d[_0x44465a*(-0x1*-0x1a4c+0x42*-0x6e+0x213)+(0xc90+-0x25f+-0xa30)]=_0x4308d3[_0x44465a+_0x532682][_0x1d165d],_0x597e6d[_0x44465a*(0xdab+0xa99+-0x377*0x7)+(0x44*0x91+-0x4db+-0x21a7)]=_0x4308d3[_0x44465a+_0x532682*(-0xae2*-0x2+0xd3+0x1695*-0x1)][_0x1d165d];let _0x15b91f=_0x597e6d[0x241c+0xb0*-0xb+-0x1c8c];for(let _0x396cad=0x502+0x21a5+0x26a6*-0x1;_0x396cad<_0x532682*(-0x13*-0x23+-0x22a1+0x200b);++_0x396cad)_0x15b91f=Math['max'](_0x15b91f,Math['abs'](_0x597e6d[_0x396cad]));if(_0x15b91f!==0x11a5*-0x1+-0x2191+0xf*0x36a){for(let _0x10e186=-0x1eaf+0x16de*-0x1+-0x358d*-0x1;_0x10e186<_0x532682;++_0x10e186)_0x597e6d[_0x10e186*(0x376*0xb+0x3*0x1bb+-0x2b40)+(0x10ca+0x3a*0x73+-0x2ad8)]=Math['max'](-0x1ecd+-0x63e*0x2+0x2b49,Math['min'](_0x24a173,Math['floor']((_0x597e6d[_0x10e186*(0x201b*-0x1+0xf0d+0x1111)+(-0x1c3b+-0x1861+-0xb6*-0x4a)]/_0x15b91f*(-0xaa8+0x35f*-0x1+0x18f*0x9+0.5)+(0x11*-0x81+0x1*0x46d+0x109*0x4+0.5))*_0x24a173+(-0x21c5+0xc*0x1ba+-0x101*-0xd+0.5)))),_0x597e6d[_0x10e186*(-0x30c+-0xe5e+0x116d)+(-0x9*-0x358+-0x1*-0x559+-0xbd*0x30)]=Math['max'](-0x7fe+-0x9*-0x242+-0xc54,Math['min'](_0x1108a2,Math['floor']((_0x597e6d[_0x10e186*(0x25ad+-0x35*0xa3+-0x11*0x3b)+(0x3*-0x293+-0x10b0+0x19*0xfa)]/_0x15b91f*(0x178d*-0x1+-0x166b*-0x1+0x122+0.5)+(0x7d*0x7+0xa7*-0x1d+0xf80+0.5))*_0x1108a2+(0x37b+-0x1fd7+0x1c5c+0.5)))),_0x597e6d[_0x10e186*(0x2065*-0x1+0x247f+-0x417)+(-0x6bc+0x1fff+-0x1941)]=Math['max'](0x10d4+0x93c+-0xc*0x22c,Math['min'](_0x24a173,Math['floor']((_0x597e6d[_0x10e186*(-0x12*0x65+0x31*0x5c+0x1*-0xa7f)+(0x2c6+-0x742+0x47e)]/_0x15b91f*(-0x104c+0x1*0xbc3+0x81*0x9+0.5)+(-0x15c8+-0xed5*-0x2+-0x7e2+0.5))*_0x24a173+(-0x278+-0x2*-0xa6d+-0x1a*0xb5+0.5))));_0x2f640c[0x7c8+-0x6d9*0x2+0x5ea]=_0x15b91f,_0x109b21[_0x1d165d*(-0x1573+0x49*-0x11+0x10*0x1a5)+(-0x3cb+0x9*0xc9+0x1a3*-0x2)]=_0xeded43[0x4b5*-0x1+0x1*0xc15+0x8*-0xec],_0x109b21[_0x1d165d*(0x422*-0x1+-0x1*0x2f9+0x1*0x71f)+(0x43*-0x41+-0x22*-0xc4+0x2*-0x482)]=_0x597e6d[-0xd*-0x270+0xa44+-0x29f4]<<-0x1e48+-0x1be5+0x3a42|_0x597e6d[0xb5d*-0x3+0x148*-0x15+0x1e8*0x20]<<0x427+0x1*0x1f5b+-0x1*0x2377|_0x597e6d[-0x45f*0x4+0x5*-0x42b+0x2655],_0x109b21[_0x1d165d*(-0x22a*0x5+-0x19*0x12d+0x283b)+(-0x42a+-0x2205+-0x1*-0x2631)]=_0x597e6d[-0x21a6+0x118d+0x101c]<<-0x63*0x2+-0x14a8+0x1583|_0x597e6d[0x660+-0x193*0x13+0x178d*0x1]<<0x424+0xe*0x17a+-0x18c5|_0x597e6d[0x10bf+0xdd3+-0x1e8d],_0x109b21[_0x1d165d*(0x1313+-0x1*0x1f9d+0x647*0x2)+(0x1905+0x1186+-0x2a88)]=_0x597e6d[-0x118d*0x1+0x101*-0x25+0x67*0x88]<<0x12a3+0xb7d+-0x1e0b|_0x597e6d[0x3*-0x274+-0x14ef+0x1c52]<<0x256b+0x2297+-0x1*0x47f7|_0x597e6d[0x1f38+-0x2*-0x25b+0x5*-0x72e],this['shBands']>-0x1903+-0xcc9+-0x25cd*-0x1&&(_0x46ef16[_0x1d165d*(0x1dc8+-0xb50*0x3+0x6*0xb2)+(-0x5b8+-0x300*0x4+-0x4*-0x46e)]=_0x597e6d[-0x24e2+0x262f+0xc*-0x1b]<<-0x4b1*-0x1+-0x3a*-0x53+-0x51*0x4a|_0x597e6d[-0x64e*-0x5+0x39+-0x1fb5]<<0x12a*0x2+0x1*-0x9bc+0x773|_0x597e6d[-0x2236+0x1ae0+0x761],_0x46ef16[_0x1d165d*(0x1*-0x163d+0x901*-0x3+-0x18a2*-0x2)+(0x718+0x1ba*-0x14+0x1b71)]=_0x597e6d[-0xa*0x396+-0x995+0x2d7d]<<0x1f30+0x55d*-0x1+-0xa*0x293|_0x597e6d[0x1*-0x879+0x1d2*0x9+-0x7dc]<<0x4*-0x287+-0x1269+0x1c90|_0x597e6d[0x1*-0xb61+0x237e+0x805*-0x3],_0x46ef16[_0x1d165d*(0x1792+-0x1b84+0x3f6)+(-0x3*-0xb82+-0xf47+-0x133d)]=_0x597e6d[0x103e+-0x1972+-0x943*-0x1]<<0x8a1*0x4+0x2b*0x9b+0x50a*-0xc|_0x597e6d[0xe*-0x2b9+-0x1ede+-0x12*-0x3d6]<<-0x9c*-0x17+-0x13bd+-0x9*-0xa4|_0x597e6d[-0x101*-0x1+0x1*0x1cf6+0x2*-0xef3],_0x46ef16[_0x1d165d*(-0xa39+0x266+0x7d7)+(-0x2d5*-0x1+-0x19*0x17d+0x2263)]=_0x597e6d[0x457+0x1b1+-0x6d*0xe]<<-0x2375*-0x1+-0x1*0x19c3+-0x99d|_0x597e6d[0x5b9+0x1*-0x10b7+0xb11]<<0xad+-0x4*-0x89d+-0x2316|_0x597e6d[-0x1849*0x1+-0x1d3c+0x3599],this['shBands']>-0x1*-0x1c7b+0x2f*0x30+-0x2549?(_0x5ea4d6[_0x1d165d*(0xe5f*-0x2+0x1db0+-0xee)+(-0x4b*-0x49+-0x620+-0xf43)]=_0x597e6d[0x56*-0x67+-0xc59+-0x46*-0xac]<<0x1ae1+-0x49d*0x5+-0x3bb*0x1|_0x597e6d[0x12bd+0x3*0x26a+-0x19e5]<<0x1*0x9bb+0x159a+0x59*-0x5a|_0x597e6d[0x1965+0xc31+-0x257f],_0x5ea4d6[_0x1d165d*(-0x2248+-0x2405+-0x2f*-0x17f)+(0x3b9*0x5+-0x1453+-0x1b7*-0x1)]=_0x597e6d[-0xdc4+-0xa0c*0x1+0x17e8]<<-0x2053+-0x119*0x18+0x3ac0|_0x597e6d[-0x1af*0x1+0x9d*-0x17+-0x1*-0xfe3]<<0x8b5+-0x1bab+-0x1301*-0x1|_0x597e6d[-0x2*0x49d+-0x2679+-0x3*-0xfef],_0x5ea4d6[_0x1d165d*(-0x1*-0x1b4d+0x1842+0xcb*-0x41)+(0x1749*-0x1+-0x1*0xcfb+-0x1223*-0x2)]=_0x597e6d[-0xb*-0x1d+-0x1*-0xafd+-0x159*0x9]<<0x7*-0x51b+0x722+0x1b0*0x11|_0x597e6d[0xf*-0x156+-0x2389+0x37af]<<0x1*-0x1cf+-0x10cf+0x12a9|_0x597e6d[-0x178+0x1*0x91c+-0x787],_0x5ea4d6[_0x1d165d*(0x1*0x6b1+0x1*-0x2327+0x1c7a)+(-0x2f8*-0x5+-0x1bf0+0x37*0x3d)]=_0x597e6d[0x1*-0x1bdb+-0xdeb*-0x1+0xe0e]<<-0x240c+-0x1*-0x1772+0xbf*0x11|_0x597e6d[-0x11*-0x43+-0x698+0x244]<<-0x1f4d*0x1+-0x890*0x2+-0x5e*-0x84|_0x597e6d[-0x235c+0x173a+0xc42],_0x492906[_0x1d165d*(-0xd29+-0x4da+0x1207)+(0x43*0x36+0x638+0xa2d*-0x2)]=_0x597e6d[-0x907+-0x72d+-0x25*-0x71]<<-0x8a1+-0x2*-0x853+-0x7f0|_0x597e6d[0x1*-0xaf9+0x1e02+-0x64d*0x3]<<-0xbe5+-0xf5e+0x1b4e|_0x597e6d[-0xfa2*0x2+-0x737*0x5+-0x21bd*-0x2],_0x492906[_0x1d165d*(-0x5ab*-0x4+0x1c03+-0x32ab)+(0x11*0x129+0x1*-0x1a35+0x67d)]=_0x597e6d[0x1*-0x1a57+-0x13f9+0x2e74]<<0x2047*0x1+0x357*-0x7+-0x8d1|_0x597e6d[0x260f*-0x1+0x92b*0x1+0x1d09]<<0x12b7+-0x22b0+-0x5*-0x334|_0x597e6d[-0x1*-0x1813+0x206a+-0x1*0x3857],_0x492906[_0x1d165d*(-0x40*0x67+0x1409*0x1+0x5bb)+(0x141e+0x1929+-0xf17*0x3)]=_0x597e6d[0x151*0xb+0x9e9*-0x3+0xf67]<<-0x445*-0x5+0x21a3+-0x36e7|_0x597e6d[0x25*0x8b+-0x2695+-0x4d*-0x3e]<<-0xb*0x328+0xe3b*0x1+-0x9*-0x248|_0x597e6d[0x130f+-0x17ac+-0x2f*-0x1a],_0x492906[_0x1d165d*(-0x11ef+0xf1f+0x2d4)+(0x7b4+0x727*-0x5+-0x1c12*-0x1)]=_0x597e6d[0x2*0x46d+0x1*-0xe93+0x89*0xb]<<0x1*-0x236+0x5d*0x47+0x2f0*-0x8|_0x597e6d[-0x16ab+0x142d+-0xe3*-0x3]<<-0x360*-0xa+-0xe7+-0x20ce|_0x597e6d[-0x2*-0x136f+0x18dd*0x1+-0x133*0x35]):_0x5ea4d6[_0x1d165d]=_0x597e6d[-0x1147+0x20ab+-0xf4f]<<0x6d4+-0x5*-0x6ca+-0x28b1|_0x597e6d[0x15*0x1b2+0x250c+-0x4890]<<-0x2561+-0xb54+0x30c0|_0x597e6d[0x37*0x2f+-0xc11+0x20f]);}}(_0x7fef5a=this['sh1to3Text'+'ure2'])==null||_0x7fef5a['unlock'](),(_0x1c924d=this['sh4to7Text'+'ure2'])==null||_0x1c924d['unlock'](),(_0x44b990=this['sh8to11Tex'+'ture2'])==null||_0x44b990['unlock'](),(_0x3573f4=this['sh12to15Te'+'xture2'])==null||_0x3573f4['unlock']();}async['updateSHDa'+'taByWorker'](_0x140d48){var _0x3bd62c,_0x5e9df5,_0x5f1f17,_0x1ec6f5,_0x55308f;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x4aed29={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x31eb7f,_0x130914,_0x25ef04,_0x32cd0f;if((_0x3bd62c=_0x140d48['transformD'+'ata'])!=null&&_0x3bd62c['sh1to3Data'])_0x31eb7f=(_0x5e9df5=_0x140d48['transformD'+'ata'])==null?void(-0x1e13+0x1*0xcc5+0x376*0x5):_0x5e9df5['sh1to3Data'],_0x130914=(_0x5f1f17=_0x140d48['transformD'+'ata'])==null?void(0x725+0xb*-0x31f+0x50*0x57):_0x5f1f17['sh4to7Data'],_0x25ef04=(_0x1ec6f5=_0x140d48['transformD'+'ata'])==null?void(-0x269*0xd+0x335*-0x6+0xb*0x499):_0x1ec6f5['sh8to11Dat'+'a'],_0x32cd0f=(_0x55308f=_0x140d48['transformD'+'ata'])==null?void(0x1*-0x1f+-0x24e5+0x2504):_0x55308f['sh12to15Da'+'ta'];else{const _0x2c66b1=xg(_0x140d48,_0x4aed29*(0x1*-0x93b+-0xd*-0x68+0x27*0x1a)),_0xc29782=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x140d48['numSplats'],this['shBands'],_0x2c66b1);_0x31eb7f=_0xc29782['sh1to3Data'],_0x130914=_0xc29782['sh4to7Data'],_0x25ef04=_0xc29782['sh8to11Dat'+'a'],_0x32cd0f=_0xc29782['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x31eb7f),this['shBands']>0x132a*-0x1+0x15bf+-0x294&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x130914),this['shBands']>0x63*0x21+-0x132e+0x66d?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x25ef04),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x32cd0f)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x25ef04));}}const PC='FILL_WINDO'+'W',Tg='KEEP_ASPEC'+'T',wg='AUTO',MC='FIXED';let Ov;function Ms(){return Ov;}function _u(_0x299e77){Ov=_0x299e77;}class DC{constructor(){h(this,'renderPass'+'es',[]),h(this,'renderTarg'+'etMap',new Map());}['addRenderP'+'ass'](_0x10e3f7){w['assert'](_0x10e3f7),_0x10e3f7['frameUpdat'+'e']();const _0x1ca9c8=_0x10e3f7['beforePass'+'es'];for(let _0x10eaf9=0x5cc*-0x1+-0x588+0xb54*0x1;_0x10eaf9<_0x1ca9c8['length'];_0x10eaf9++){const _0x3124fe=_0x1ca9c8[_0x10eaf9];_0x3124fe['enabled']&&this['addRenderP'+'ass'](_0x3124fe);}_0x10e3f7['enabled']&&this['renderPass'+'es']['push'](_0x10e3f7);const _0x558534=_0x10e3f7['afterPasse'+'s'];for(let _0x1e23d3=-0x5*-0x73+0x121+-0x18*0x24;_0x1e23d3<_0x558534['length'];_0x1e23d3++){const _0x224dc7=_0x558534[_0x1e23d3];_0x224dc7['enabled']&&this['addRenderP'+'ass'](_0x224dc7);}}['reset'](){this['renderPass'+'es']['length']=0x4cc*-0x6+0x1fd9+-0x5*0x9d;}['compile'](){const _0x3d847c=this['renderTarg'+'etMap'],_0x4ec0d9=this['renderPass'+'es'];for(let _0x22518f=0x3*0xbc3+0x1*0xaba+-0x2e03*0x1;_0x22518f<_0x4ec0d9['length'];_0x22518f++){const _0x5a02cc=_0x4ec0d9[_0x22518f],_0x596ca7=_0x5a02cc['renderTarg'+'et'];if(_0x596ca7!==void(0x160a+0x1095+-0x269f)){const _0x329a0b=_0x3d847c['get'](_0x596ca7);if(_0x329a0b){const _0x174e38=_0x5a02cc['colorArray'+'Ops']['length'];for(let _0x932298=-0xb82+-0x3*-0x8a+0x3*0x34c;_0x932298<_0x174e38;_0x932298++)_0x5a02cc['colorArray'+'Ops'][_0x932298]['clear']||(_0x329a0b['colorArray'+'Ops'][_0x932298]['store']=!(-0x931+-0x206*0xf+0x35*0xbf));_0x5a02cc['depthStenc'+'ilOps']['clearDepth']||(_0x329a0b['depthStenc'+'ilOps']['storeDepth']=!(0x18cb+0xb3d+0x4*-0x902)),_0x5a02cc['depthStenc'+'ilOps']['clearStenc'+'il']||(_0x329a0b['depthStenc'+'ilOps']['storeStenc'+'il']=!(-0x1*-0x805+0x1*-0xaf3+0x2ee));}_0x3d847c['set'](_0x596ca7,_0x5a02cc);}}for(let _0x1ccf50=0x653+0x1c13*-0x1+0x10*0x15c;_0x1ccf50<_0x4ec0d9['length']-(-0x771+-0x94e+0x2*0x860);_0x1ccf50++){const _0x57a0ee=_0x4ec0d9[_0x1ccf50],_0x5ced1b=_0x57a0ee['renderTarg'+'et'],_0x31da49=_0x4ec0d9[_0x1ccf50+(0x172a+-0x1627+-0x102)],_0x1b9568=_0x31da49['renderTarg'+'et'];_0x5ced1b!==_0x1b9568||_0x5ced1b===void(-0x367+-0x82+0x3e9)||_0x31da49['depthStenc'+'ilOps']['clearDepth']||_0x31da49['depthStenc'+'ilOps']['clearStenc'+'il']||_0x31da49['colorArray'+'Ops']['some'](_0x2e1755=>_0x2e1755['clear'])||_0x57a0ee['afterPasse'+'s']['length']>0x1c*0x86+0x1b4b+-0x29f3||_0x31da49['beforePass'+'es']['length']>0xb83+0x3*0x805+-0x2392||(_0x57a0ee['_skipEnd']=!(0x14ed+-0x10*-0x22f+0x37dd*-0x1),_0x31da49['_skipStart']=!(0x11c*0x22+-0x1*-0x1ed+0x27a5*-0x1));}let _0x7b18c9=null,_0x4535fa=null;for(let _0x26e4c4=-0x51a+0x9e6+-0x4cc;_0x26e4c4<_0x4ec0d9['length'];_0x26e4c4++){const _0x2dd9dc=_0x4ec0d9[_0x26e4c4],_0x28fd30=_0x2dd9dc['renderTarg'+'et'],_0x42b48a=_0x28fd30==null?void(-0x24ba+-0x25e0+-0x425*-0x12):_0x28fd30['colorBuffe'+'r'];if(_0x42b48a!=null&&_0x42b48a['cubemap']){if(_0x7b18c9===_0x42b48a){const _0x451636=_0x4535fa['colorArray'+'Ops']['length'];for(let _0x2ac980=-0x3d*0x89+0x1*0x1a9e+0x607;_0x2ac980<_0x451636;_0x2ac980++)_0x4535fa['colorArray'+'Ops'][_0x2ac980]['mipmaps']=!(0x2c*-0x49+-0x52f*-0x2+-0x22f*-0x1);}_0x7b18c9=_0x28fd30['colorBuffe'+'r'],_0x4535fa=_0x2dd9dc;}else _0x2dd9dc['requiresCu'+'bemaps']&&(_0x7b18c9=null,_0x4535fa=null);}_0x3d847c['clear']();}['render'](_0x2c820e){this['compile']();const _0x360528=this['renderPass'+'es'];for(let _0x352adb=-0x1827+-0x4*-0x2bb+0xd3b;_0x352adb<_0x360528['length'];_0x352adb++)_0x360528[_0x352adb]['render']();}}class IC{constructor(_0x19f157,_0x38d90b){this['texture0']=_0x19f157,this['texture1']=_0x38d90b;}['destroy'](){var _0x13f684,_0x4aa33f;(_0x13f684=this['texture0'])==null||_0x13f684['destroy'](),(_0x4aa33f=this['texture1'])==null||_0x4aa33f['destroy']();}}const Eg=new Kt();class ia{static['createText'+'ure'](_0x6d442b,_0x3b61db,_0x4cf375,_0x3c178e=''){return new _e(_0x6d442b,{'name':'AreaLightL'+'UT'+_0x3c178e,'width':_0x4cf375,'height':_0x4cf375,'format':_0x3b61db,'addressU':ue,'addressV':ue,'type':Ds,'magFilter':vt,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(-0x2496*-0x1+-0x584*0x4+0x9*-0x19d)});}static['applyTextu'+'res'](_0x386354,_0x2c7bc8,_0x73b2a3){Eg['remove'](_0x386354),Eg['get'](_0x386354,()=>new IC(_0x2c7bc8,_0x2c7bc8===_0x73b2a3?null:_0x73b2a3)),_0x386354['scope']['resolve']('areaLights'+'LutTex1')['setValue'](_0x2c7bc8),_0x386354['scope']['resolve']('areaLights'+'LutTex2')['setValue'](_0x73b2a3);}static['createPlac'+'eholder'](_0x116a50){const _0xca089b=ia['createText'+'ure'](_0x116a50,nt,-0x481+0x1*-0x1146+0x15c9,'placeholde'+'r');_0xca089b['lock']()['fill'](0xc6b+0x1dac+-0x1af*0x19),_0xca089b['unlock'](),ia['applyTextu'+'res'](_0x116a50,_0xca089b,_0xca089b);}static['set'](_0xa65015,_0x2b2d13,_0x2652c8){function _0x577854(_0x370350,_0x52a6c5,_0x244ec3){const _0x241a43=ia['createText'+'ure'](_0x370350,_0x244ec3,-0x14e8+-0xa41+0x1f69);return _0x241a43['lock']()['set'](_0x52a6c5),_0x241a43['unlock'](),_0x241a43;}function _0x3b09e0(_0x4da53b){const _0x3d649a=_0x4da53b['length'],_0xcd6985=new Uint16Array(_0x3d649a),_0x4cdfb9=Mn['float2Half'];for(let _0x37a109=0x1*0x2287+-0x1013+-0x1274;_0x37a109<_0x3d649a;_0x37a109++)_0xcd6985[_0x37a109]=_0x4cdfb9(_0x4da53b[_0x37a109]);return _0xcd6985;}const _0x515117=_0x2b2d13,_0x5ea0e5=_0x2652c8,_0x56ece3=_0x3b09e0(_0x515117),_0xebbb2b=_0x3b09e0(_0x5ea0e5),_0x599b00=_0x577854(_0xa65015,_0x56ece3,nt),_0x10c65a=_0x577854(_0xa65015,_0xebbb2b,nt);ia['applyTextu'+'res'](_0xa65015,_0x599b00,_0x10c65a);}}const Ph='en-US',Mh={'en':'en-US','es':'en-ES','zh':'zh-CN','zh-HK':'zh-TW','zh-TW':'zh-HK','zh-MO':'zh-HK','fr':'fr-FR','de':'de-DE','it':'it-IT','ru':'ru-RU','ja':'ja-JP'},Sm={};function Dr(_0x4c9f2b,_0x24ff37){for(let _0x4264c5=0x38*-0x8+0x11f8+-0x1038,_0xd24d7d=_0x4c9f2b['length'];_0x4264c5<_0xd24d7d;_0x4264c5++)Sm[_0x4c9f2b[_0x4264c5]]=_0x24ff37;}function Oi(_0x4be064){const _0x388900=_0x4be064['indexOf']('-');return _0x388900!==-(-0xa51*0x2+0x554+0x1*0xf4f)?_0x4be064['substring'](0x2675+-0x2*-0xf93+-0x459b,_0x388900):_0x4be064;}function LC(_0x327ace,_0x5b797a){const _0x386b86=_0x327ace['indexOf']('-');return _0x386b86!==-(-0x9d9*0x3+0x53*-0x71+-0x422f*-0x1)?_0x5b797a+_0x327ace['substring'](_0x386b86):_0x5b797a;}function Fv(_0x4a2fcf,_0x3fdc36){if(_0x3fdc36[_0x4a2fcf])return _0x4a2fcf;let _0x184899=Mh[_0x4a2fcf];if(_0x184899&&_0x3fdc36[_0x184899])return _0x184899;const _0x189c35=Oi(_0x4a2fcf);return _0x184899=Mh[_0x189c35],_0x3fdc36[_0x184899]?_0x184899:_0x3fdc36[_0x189c35]?_0x189c35:Ph;}Dr(['ja','ko','th','vi','zh','id'],_0x1bcb21=>-0xf9e+-0xd0f*-0x1+0x28f),Dr(['fa','hi'],_0x1c3947=>_0x1c3947>=0x1*0x757+-0x1*-0xc1a+0x3*-0x67b&&_0x1c3947<=0x89*0x11+0x18a7+-0x21bf?0x2f*0x29+-0x1125+0x99e:0x1985+-0x255*0x9+-0x487),Dr(['fr','pt'],_0x22a41f=>_0x22a41f>=-0x721+-0x3*0x26b+0xe62&&_0x22a41f<-0x147b*0x1+-0xa42+0x1ebf?-0x1*-0x49+0x815+-0x85e:0x439*-0x5+0x304+0x121a),Dr(['da'],_0x1d8054=>_0x1d8054===-0x2*0x101f+0xd29+-0x1316*-0x1||!Number['isInteger'](_0x1d8054)&&_0x1d8054>=0xc23*-0x1+0x1*0x1c0d+-0xfea&&_0x1d8054<=0x342+0x1441*-0x1+0x80*0x22?0x24c1+0x111a*0x1+-0x35db:-0xa*-0x5+-0x73*0x21+0x751*0x2),Dr(['de','en','it','el','es','tr','fi','sv','nb','no','ur'],_0x26da9e=>_0x26da9e===-0x2691+0x213b+-0x557*-0x1?0x1e1f+0xd7e+0xcb*-0x37:0x10fc+0x7a1*0x1+-0x189c),Dr(['ru','uk'],_0x414a1f=>{if(Number['isInteger'](_0x414a1f)){const _0x14704d=_0x414a1f%(-0x15ee+0x98b+0xc6d*0x1),_0x45b09a=_0x414a1f%(-0x152b+0x21ba+-0xc2b);if(_0x14704d===0x26a*0x2+0x3d*-0x84+0x1aa1&&_0x45b09a!==0x179*-0x13+-0x25d7+0x41dd)return 0x235*-0xd+-0x1b47*0x1+0x37f8;if(_0x14704d>=-0x15e8*-0x1+0x3df*0x5+-0x2941&&_0x14704d<=-0x1739+0xe95*-0x2+-0x5*-0xa7b&&(_0x45b09a<-0x1489+-0x5f2+0x1a87||_0x45b09a>0x2*-0xe05+0x15*0xd9+0xa4b))return-0x5ba+0x6*0x43e+0x63*-0x33;if(_0x14704d===0x2473+-0xde*0x1f+0x991*-0x1||_0x14704d>=-0x2399+0x9ed+0x19b1*0x1&&_0x14704d<=-0x28d*0x4+0x188b+0xe4e*-0x1||_0x45b09a>=-0x1*-0xbdb+0x7*0x241+-0x3f1*0x7&&_0x45b09a<=0x1b88*-0x1+0xf*0x13a+0x930)return 0x1be+0x1047*0x2+0x2*-0x1125;}return 0x20df+0x142b+-0x3507;}),Dr(['pl'],_0x597fad=>{if(Number['isInteger'](_0x597fad)){if(_0x597fad===-0x2e7*0x7+-0x15ee+-0x34*-0xd0)return 0xb04+-0x334+0x32*-0x28;const _0x19d009=_0x597fad%(-0x21d1+0x1323+0xc*0x13a),_0x2b1fe9=_0x597fad%(0xd5f+0x1d69*0x1+-0x2a64);if(_0x19d009>=-0x1697+-0x1f54+0xfb*0x37&&_0x19d009<=-0x1887+0xf5+0x1796*0x1&&(_0x2b1fe9<-0x1*-0x1355+0xe*-0x1b8+0x4c7||_0x2b1fe9>0x1ac9*0x1+-0x35*0x3e+-0xde5*0x1))return 0x1*0x5ad+-0x3*-0x69b+-0x1b3*0xf;if(_0x19d009>=0x5*-0x4f2+0x5ed*0x3+0x251*0x3&&_0x19d009<=-0x7bb*0x3+-0xd0d+0x407*0x9||_0x19d009>=-0x202+-0xc68+0xe6f&&_0x19d009<=0x1614+0x1f66+0x3571*-0x1||_0x2b1fe9>=0x1fc7+0x641*0x1+-0x25fc&&_0x2b1fe9<=-0xded+-0x4c1*0x5+-0x12e*-0x20)return 0x2e*-0x9d+0x2*0xfd1+-0x36a;}return 0x161*0x2+0x1082+-0x35*0x5d;}),Dr(['ar'],_0x4834c3=>{if(_0x4834c3===-0x3*-0x9e1+-0x404+-0x199f*0x1)return-0x146f*0x1+-0x19de+0x2e4d;if(_0x4834c3===0x2141*0x1+0x450*-0x4+-0x400*0x4)return 0x87*0x29+0x1*-0x1461+-0x13d*0x1;if(_0x4834c3===0xa*0x34d+0xf9*-0xf+-0x3*0x623)return-0x17*-0x17d+0xa5c+0x65*-0x71;if(Number['isInteger'](_0x4834c3)){const _0x207bd2=_0x4834c3%(-0x222e+0x177b*-0x1+0x7*0x84b);if(_0x207bd2>=0x1be8+0x1c80+-0x3865&&_0x207bd2<=-0x1357*-0x1+-0x240e+0x1*0x10c1)return-0x7fb*0x1+0x1*0x235+0x1*0x5c9;if(_0x207bd2>=-0x53*0x39+-0x135d*0x1+0x25e3&&_0x207bd2<=0x1fb*-0x1+-0x1e23+0x2081*0x1)return 0x249d+0xeb8+-0x3351*0x1;}return 0x1e2c+0x7f*-0x2+-0x1d29;});const RC=Sm[Oi(Ph)];function Tf(_0xf063dc){return Sm[_0xf063dc]||RC;}const jn=new RegExp('^\x5cs*(?:(?:'+'[a-z]+[a-z'+'0-9\x5c-+.]*:'+')?//|data:'+'|blob:)','i');class OC{constructor(_0x2ed506='',_0x765247='',_0x70536e=null,_0x39debe=null,_0x5a6590=null,_0x5803fa=null){this['url']=_0x2ed506,this['filename']=_0x765247,this['hash']=_0x70536e,this['size']=_0x39debe,this['opt']=_0x5a6590,this['contents']=_0x5803fa;}['equals'](_0xef57c7){return this['url']===_0xef57c7['url']&&this['filename']===_0xef57c7['filename']&&this['hash']===_0xef57c7['hash']&&this['size']===_0xef57c7['size']&&this['opt']===_0xef57c7['opt']&&this['contents']===_0xef57c7['contents'];}}let FC=-(-0x23cd+-0xdb4+-0x2*-0x18c1);const NC={'pvr':'extCompres'+'sedTexture'+'PVRTC','dxt':'extCompres'+'sedTexture'+'S3TC','etc2':'extCompres'+'sedTexture'+'ETC','etc1':'extCompres'+'sedTexture'+'ETC1','basis':'canvas'},bg=['pvr','dxt','etc2','etc1','basis'];class pe extends me{constructor(_0x46c41e,_0x336292,_0x2c197e,_0x272826={},_0x46cfa2={}){super(),h(this,'_file',null),h(this,'_i18n',{}),h(this,'_preload',!(0x307+-0x1*-0x2051+-0x2357)),h(this,'_resources',[]),h(this,'id',FC--),h(this,'loaded',!(0x26da+0x1f32+-0x460b)),h(this,'loading',!(0x27b*0x7+0x81a+-0x1976)),h(this,'options',{}),h(this,'registry',null),h(this,'tags',new Oo(this)),h(this,'type'),h(this,'urlObject',null),(this['_name']=_0x46c41e||'',this['type']=_0x336292,this['_data']=_0x272826||{},this['options']=_0x46cfa2||{},_0x2c197e&&(this['file']=_0x2c197e));}set['name'](_0x35ab6e){if(this['_name']===_0x35ab6e)return;const _0x18c1ef=this['_name'];this['_name']=_0x35ab6e,this['fire']('name',this,this['_name'],_0x18c1ef);}get['name'](){return this['_name'];}set['file'](_0x485c6b){var _0x52f61c,_0x586267;if(_0x485c6b&&_0x485c6b['variants']&&['texture','textureatl'+'as','bundle']['indexOf'](this['type'])!==-(0x530+0x25be+-0x4c5*0x9)){const _0xad308c=((_0x586267=(_0x52f61c=this['registry'])==null?void(-0x12e8+-0xfe9+0x22d1*0x1):_0x52f61c['_loader'])==null?void(0x12b*-0x17+-0x8*0xba+0x20ad):_0x586267['_app'])||Ms(),_0x4fa317=_0xad308c==null?void(0x1*-0x257c+-0xd27+0x95*0x57):_0xad308c['graphicsDe'+'vice'];if(_0x4fa317)for(let _0x488cf9=-0x1371+-0x1a2c+0x1*0x2d9d,_0x528ce0=bg['length'];_0x488cf9<_0x528ce0;_0x488cf9++){const _0xe437a1=bg[_0x488cf9];if(_0x485c6b['variants'][_0xe437a1]&&_0x4fa317[NC[_0xe437a1]]){_0x485c6b=_0x485c6b['variants'][_0xe437a1];break;}if(_0xad308c['enableBund'+'les']){const _0x2796f5=_0xad308c['bundles']['listBundle'+'sForAsset'](this);if(_0x2796f5&&_0x2796f5['find'](_0x2714d4=>{var _0x1587bc;return(_0x1587bc=_0x2714d4==null?void(-0xb25+-0x1bf0+0x2715):_0x2714d4['file'])==null?void(0x7*-0x182+-0x22b9+0x2d47*0x1):_0x1587bc['variants'][_0xe437a1];}))break;}}}const _0xa3bfa1=this['_file'],_0x2f63c7=_0x485c6b?new OC(_0x485c6b['url'],_0x485c6b['filename'],_0x485c6b['hash'],_0x485c6b['size'],_0x485c6b['opt'],_0x485c6b['contents']):null;(!!_0x2f63c7!=!!_0xa3bfa1||_0x2f63c7&&!_0x2f63c7['equals'](_0xa3bfa1))&&(this['_file']=_0x2f63c7,this['fire']('change',this,'file',_0x2f63c7,_0xa3bfa1),this['reload']());}get['file'](){return this['_file'];}set['data'](_0x447c67){const _0x1d4658=this['_data'];this['_data']=_0x447c67,_0x447c67!==_0x1d4658&&(this['fire']('change',this,'data',_0x447c67,_0x1d4658),this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['data'](){return this['_data'];}set['resource'](_0x3938c7){const _0x48a7de=this['_resources'][0x4b8*0x2+-0x1*-0x22d+-0xb9d];this['_resources'][-0x1f34+-0x1945+0xb7*0x4f]=_0x3938c7,this['fire']('change',this,'resource',_0x3938c7,_0x48a7de);}get['resource'](){return this['_resources'][0xe13+-0x1a96+0xc83];}set['resources'](_0x208c00){const _0x570d2b=this['_resources'];this['_resources']=_0x208c00,this['fire']('change',this,'resources',_0x208c00,_0x570d2b);}get['resources'](){return this['_resources'];}set['preload'](_0x4b6e37){_0x4b6e37=!!_0x4b6e37,this['_preload']!==_0x4b6e37&&(this['_preload']=_0x4b6e37,this['_preload']&&!this['loaded']&&!this['loading']&&this['registry']&&this['registry']['load'](this));}get['preload'](){return this['_preload'];}set['loadFaces'](_0x393a17){_0x393a17=!!_0x393a17,(!this['hasOwnProp'+'erty']('_loadFaces')||_0x393a17!==this['_loadFaces'])&&(this['_loadFaces']=_0x393a17,this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['loadFaces'](){return this['_loadFaces'];}['getFileUrl'](){const _0x1cc4cc=this['file'];if(!_0x1cc4cc||!_0x1cc4cc['url'])return null;let _0x1b3ed7=_0x1cc4cc['url'];if(this['registry']&&this['registry']['prefix']&&!jn['test'](_0x1b3ed7)&&(_0x1b3ed7=this['registry']['prefix']+_0x1b3ed7),this['type']!=='script'&&_0x1cc4cc['hash']){const _0x23c868=_0x1b3ed7['indexOf']('?')!==-(0x1ac5+-0x17de+-0x6a*0x7)?'&':'?';_0x1b3ed7+=_0x23c868+'t='+_0x1cc4cc['hash'];}return _0x1b3ed7;}['getAbsolut'+'eUrl'](_0x314cc3){if(_0x314cc3['startsWith']('blob:')||_0x314cc3['startsWith']('data:'))return _0x314cc3;const _0xff3519=xe['getDirecto'+'ry'](this['file']['url']);return xe['join'](_0xff3519,_0x314cc3);}['getLocaliz'+'edAssetId'](_0x4e5de9){return _0x4e5de9=Fv(_0x4e5de9,this['_i18n']),this['_i18n'][_0x4e5de9]||null;}['addLocaliz'+'edAssetId'](_0x1cd0d7,_0x31cc5f){this['_i18n'][_0x1cd0d7]=_0x31cc5f,this['fire']('add:locali'+'zed',_0x1cd0d7,_0x31cc5f);}['removeLoca'+'lizedAsset'+'Id'](_0x1c65f7){const _0x186d84=this['_i18n'][_0x1c65f7];_0x186d84&&(delete this['_i18n'][_0x1c65f7],this['fire']('remove:loc'+'alized',_0x1c65f7,_0x186d84));}['ready'](_0x52ec5c,_0x45376f){_0x45376f=_0x45376f||this,this['loaded']?_0x52ec5c['call'](_0x45376f,this):this['once']('load',_0x57765e=>{_0x52ec5c['call'](_0x45376f,_0x57765e);});}['reload'](){this['loaded']&&(this['loaded']=!(-0x1*0x119b+-0x1b0e+0x2caa),this['registry']['load'](this));}['unload'](){if(!this['loaded']&&this['_resources']['length']===0x133e+-0x1563*-0x1+0x1*-0x28a1)return;this['fire']('unload',this),this['registry']['fire']('unload:'+this['id'],this);const _0x946ec6=this['_resources'];this['urlObject']&&(URL['revokeObje'+'ctURL'](this['urlObject']),this['urlObject']=null),this['resources']=[],this['loaded']=!(0x17ea+-0x22ab+0xac2),this['file']&&this['registry']['_loader']['clearCache'](this['getFileUrl'](),this['type']);for(let _0x3b12b0=-0x590*-0x4+0x7*0x332+-0x2c9e;_0x3b12b0<_0x946ec6['length'];++_0x3b12b0){const _0x404cb0=_0x946ec6[_0x3b12b0];_0x404cb0&&_0x404cb0['destroy']&&_0x404cb0['destroy']();}}static['fetchArray'+'Buffer'](_0x17953b,_0x5332c6,_0x253748,_0x2909fc=-0xf*-0x210+0x9b1*-0x1+-0x153f){var _0x24f036;(_0x24f036=_0x253748==null?void(-0x143*-0xf+0x1*0xc49+-0x11*0x1d6):_0x253748['file'])!=null&&_0x24f036['contents']?setTimeout(()=>{_0x5332c6(null,_0x253748['file']['contents']);}):ot['get'](_0x17953b,{'cache':!(-0x7c4+-0x7c3+-0x1*-0xf87),'responseType':'arraybuffe'+'r','retry':_0x2909fc>-0x1a39+0x18d0+0x169,'maxRetries':_0x2909fc},_0x5332c6);}}h(pe,'EVENT_LOAD','load'),h(pe,'EVENT_UNLO'+'AD','unload'),h(pe,'EVENT_REMO'+'VE','remove'),h(pe,'EVENT_ERRO'+'R','error'),h(pe,'EVENT_CHAN'+'GE','change'),h(pe,'EVENT_PROG'+'RESS','progress'),h(pe,'EVENT_ADDL'+'OCALIZED','add:locali'+'zed'),h(pe,'EVENT_REMO'+'VELOCALIZE'+'D','remove:loc'+'alized');class kC{constructor(_0x59001d=null){h(this,'_index',{}),h(this,'_key'),this['_key']=_0x59001d;}['addItem'](_0x510b39){const _0x1750c6=_0x510b39['tags']['_list'];for(const _0xd25211 of _0x1750c6)this['add'](_0xd25211,_0x510b39);}['removeItem'](_0x116ede){const _0xf82088=_0x116ede['tags']['_list'];for(const _0x2931e0 of _0xf82088)this['remove'](_0x2931e0,_0x116ede);}['add'](_0x2b5af3,_0x4f3964){this['_index'][_0x2b5af3]&&this['_index'][_0x2b5af3]['list']['indexOf'](_0x4f3964)!==-(-0x1a4*0x6+0x34*-0x94+-0x11*-0x259)||(this['_index'][_0x2b5af3]||(this['_index'][_0x2b5af3]={'list':[]},this['_key']&&(this['_index'][_0x2b5af3]['keys']={})),this['_index'][_0x2b5af3]['list']['push'](_0x4f3964),this['_key']&&(this['_index'][_0x2b5af3]['keys'][_0x4f3964[this['_key']]]=_0x4f3964));}['remove'](_0x34c5ef,_0x63a442){if(!this['_index'][_0x34c5ef]||this['_key']&&!this['_index'][_0x34c5ef]['keys'][_0x63a442[this['_key']]])return;const _0xae04fe=this['_index'][_0x34c5ef]['list']['indexOf'](_0x63a442);_0xae04fe!==-(-0x1*0x349+0x2*-0x392+0x1e*0x59)&&(this['_index'][_0x34c5ef]['list']['splice'](_0xae04fe,-0x423*0x1+-0x1089+0x43*0x4f),this['_key']&&delete this['_index'][_0x34c5ef]['keys'][_0x63a442[this['_key']]],this['_index'][_0x34c5ef]['list']['length']===-0x1b50+0x2*0x622+0x2*0x786&&delete this['_index'][_0x34c5ef]);}['find'](_0x652a34){const _0x143dd1={},_0x523a77=[];let _0x4da0e1,_0x50d381,_0xc2726c,_0x2ce25c,_0x37dc46;const _0x2a6778=(_0x123044,_0x41d8af)=>this['_index'][_0x123044]['list']['length']-this['_index'][_0x41d8af]['list']['length'];for(let _0x5d6ae2=0x72*-0x53+0x1e6e+0x688;_0x5d6ae2<_0x652a34['length'];_0x5d6ae2++){if(_0x50d381=_0x652a34[_0x5d6ae2],_0x50d381 instanceof Array){if(_0x50d381['length']===-0x2cd*-0x1+-0xc1*-0x32+-0x287f)continue;if(_0x50d381['length']===-0x6*-0x257+-0x15d6+0x7cd*0x1)_0x50d381=_0x50d381[-0x200f+-0x22dc+0x42eb];else{_0x37dc46=!(-0x25ad+-0x3b5+0x2963);for(let _0x5c78a7=0x13*-0x1d1+-0xda+-0x235d*-0x1;_0x5c78a7<_0x50d381['length'];_0x5c78a7++)if(!this['_index'][_0x50d381[_0x5c78a7]]){_0x37dc46=!(-0x17a1+0xa8+0x16f9);break;}if(_0x37dc46)continue;_0xc2726c=_0x50d381['slice'](0x1*-0xf64+0x64a+-0x1*-0x91a)['sort'](_0x2a6778),_0x2ce25c=_0xc2726c['slice'](0x1f4b+0x2035+0x1*-0x3f7f),_0x2ce25c['length']===-0xae3*-0x1+-0x180*0x15+0x3a*0x5b&&(_0x2ce25c=_0x2ce25c[0x229e+0xfc2+-0x3260]);for(let _0x25b3d1=0x1*0xa38+0x8*-0x435+0x1*0x1770;_0x25b3d1<this['_index'][_0xc2726c[-0x145b+-0x729+0xdc2*0x2]]['list']['length'];_0x25b3d1++)_0x4da0e1=this['_index'][_0xc2726c[0x1e*-0xf9+0x22be+-0x590]]['list'][_0x25b3d1],(this['_key']?!_0x143dd1[_0x4da0e1[this['_key']]]:_0x523a77['indexOf'](_0x4da0e1)===-(0x3bc+0x9*-0xde+-0x7*-0x95))&&_0x4da0e1['tags']['has'](_0x2ce25c)&&(this['_key']&&(_0x143dd1[_0x4da0e1[this['_key']]]=!(-0x1*-0x94d+-0x1*-0x40e+-0xd5b)),_0x523a77['push'](_0x4da0e1));continue;}}if(_0x50d381&&typeof _0x50d381=='string'&&this['_index'][_0x50d381]){for(let _0x487b81=-0x1*0x1ba7+-0xda*-0x5+-0x1765*-0x1;_0x487b81<this['_index'][_0x50d381]['list']['length'];_0x487b81++)_0x4da0e1=this['_index'][_0x50d381]['list'][_0x487b81],this['_key']?_0x143dd1[_0x4da0e1[this['_key']]]||(_0x143dd1[_0x4da0e1[this['_key']]]=!(-0x1f97+0xa67+-0x1530*-0x1),_0x523a77['push'](_0x4da0e1)):_0x523a77['indexOf'](_0x4da0e1)===-(0x7f*-0x5+-0x191f+-0xbf*-0x25)&&_0x523a77['push'](_0x4da0e1);}}return _0x523a77;}}class mn extends me{constructor(_0x251f95){super(),h(this,'_assets',new Set()),h(this,'_loader'),h(this,'_idToAsset',new Map()),h(this,'_urlToAsse'+'t',new Map()),h(this,'_nameToAss'+'et',new Map()),h(this,'_tags',new kC('id')),h(this,'prefix',null),h(this,'bundles',null),this['_loader']=_0x251f95;}['list'](_0x5e99bf={}){const _0x465f72=Array['from'](this['_assets']);return _0x5e99bf['preload']!==void(0x4ee*0x1+-0x5*0x757+-0x3*-0xa97)?_0x465f72['filter'](_0x3fd9b8=>_0x3fd9b8['preload']===_0x5e99bf['preload']):_0x465f72;}['add'](_0x6098be){var _0x2de094,_0x574964;this['_assets']['has'](_0x6098be)||(this['_assets']['add'](_0x6098be),this['_idToAsset']['set'](_0x6098be['id'],_0x6098be),(_0x2de094=_0x6098be['file'])!=null&&_0x2de094['url']&&this['_urlToAsse'+'t']['set'](_0x6098be['file']['url'],_0x6098be),this['_nameToAss'+'et']['has'](_0x6098be['name'])||this['_nameToAss'+'et']['set'](_0x6098be['name'],new Set()),this['_nameToAss'+'et']['get'](_0x6098be['name'])['add'](_0x6098be),_0x6098be['on']('name',this['_onNameCha'+'nge'],this),_0x6098be['registry']=this,this['_tags']['addItem'](_0x6098be),_0x6098be['tags']['on']('add',this['_onTagAdd'],this),_0x6098be['tags']['on']('remove',this['_onTagRemo'+'ve'],this),this['fire']('add',_0x6098be),this['fire']('add:'+_0x6098be['id'],_0x6098be),(_0x574964=_0x6098be['file'])!=null&&_0x574964['url']&&this['fire']('add:url:'+_0x6098be['file']['url'],_0x6098be),_0x6098be['preload']&&this['load'](_0x6098be));}['remove'](_0x13193b){var _0x215fab,_0x119fae;if(!this['_assets']['has'](_0x13193b))return!(-0xffc+-0x3aa*-0x8+0xd53*-0x1);if(this['_assets']['delete'](_0x13193b),this['_idToAsset']['delete'](_0x13193b['id']),(_0x215fab=_0x13193b['file'])!=null&&_0x215fab['url']&&this['_urlToAsse'+'t']['delete'](_0x13193b['file']['url']),_0x13193b['off']('name',this['_onNameCha'+'nge'],this),this['_nameToAss'+'et']['has'](_0x13193b['name'])){const _0x279fbe=this['_nameToAss'+'et']['get'](_0x13193b['name']);_0x279fbe['delete'](_0x13193b),_0x279fbe['size']===-0x25*0xf1+0x16d7+-0x5ff*-0x2&&this['_nameToAss'+'et']['delete'](_0x13193b['name']);}return this['_tags']['removeItem'](_0x13193b),_0x13193b['tags']['off']('add',this['_onTagAdd'],this),_0x13193b['tags']['off']('remove',this['_onTagRemo'+'ve'],this),_0x13193b['fire']('remove',_0x13193b),this['fire']('remove',_0x13193b),this['fire']('remove:'+_0x13193b['id'],_0x13193b),(_0x119fae=_0x13193b['file'])!=null&&_0x119fae['url']&&this['fire']('remove:url'+':'+_0x13193b['file']['url'],_0x13193b),!(-0x1809+0x1*0x1baf+0x1d3*-0x2);}['get'](_0x59ea9a){return this['_idToAsset']['get'](Number(_0x59ea9a));}['getByUrl'](_0x48ef9e){return this['_urlToAsse'+'t']['get'](_0x48ef9e);}['load'](_0x36b10c,_0x15f202){if((_0x36b10c['loading']||_0x36b10c['loaded'])&&!(_0x15f202!=null&&_0x15f202['force']))return;const _0x48a5c2=_0x36b10c['file'],_0x12162a=()=>{this['fire']('load',_0x36b10c),this['fire']('load:'+_0x36b10c['id'],_0x36b10c),_0x48a5c2&&_0x48a5c2['url']&&this['fire']('load:url:'+_0x48a5c2['url'],_0x36b10c),_0x36b10c['fire']('load',_0x36b10c);},_0x577da4=_0x1ef605=>{if(_0x1ef605 instanceof Array?_0x36b10c['resources']=_0x1ef605:_0x36b10c['resource']=_0x1ef605,this['_loader']['patch'](_0x36b10c,this),_0x36b10c['type']==='bundle'){const _0x1bd475=_0x36b10c['data']['assets'];for(let _0x205164=-0xa*0x277+-0xc02+0x24a8;_0x205164<_0x1bd475['length'];_0x205164++){const _0x4588e8=this['_idToAsset']['get'](_0x1bd475[_0x205164]);_0x4588e8&&!_0x4588e8['loaded']&&this['load'](_0x4588e8,{'force':!(0x2dc*-0xc+0x117e+-0x10d2*-0x1)});}_0x36b10c['resource']['loaded']?_0x12162a():(this['fire']('load:start',_0x36b10c),this['fire']('load:start'+':'+_0x36b10c['id'],_0x36b10c),_0x48a5c2&&_0x48a5c2['url']&&this['fire']('load:start'+':url:'+_0x48a5c2['url'],_0x36b10c),_0x36b10c['fire']('load:start',_0x36b10c),_0x36b10c['resource']['on']('load',_0x12162a));}else _0x12162a();},_0x5d0559=(_0x1990b9,_0x163d0a,_0x564144)=>{if(_0x36b10c['loaded']=!(-0x305*0x1+-0xdf6+0xa1*0x1b),_0x36b10c['loading']=!(-0xa*0x301+-0x28*-0x7+0x1cf3),_0x1990b9)this['fire']('error',_0x1990b9,_0x36b10c),this['fire']('error:'+_0x36b10c['id'],_0x1990b9,_0x36b10c),_0x36b10c['fire']('error',_0x1990b9,_0x36b10c);else{if(_0x36b10c['type']==='script'){const _0x2ac641=this['_loader']['getHandler']('script');_0x2ac641['_cache'][_0x36b10c['id']]&&_0x2ac641['_cache'][_0x36b10c['id']]['parentNode']===document['head']&&document['head']['removeChil'+'d'](_0x2ac641['_cache'][_0x36b10c['id']]),_0x2ac641['_cache'][_0x36b10c['id']]=_0x564144;}_0x577da4(_0x163d0a);}};if(_0x48a5c2||_0x36b10c['type']==='cubemap'){this['fire']('load:start',_0x36b10c),this['fire']('load:'+_0x36b10c['id']+':start',_0x36b10c),_0x36b10c['loading']=!(0x1241+-0xecf+0x15*-0x2a);const _0x2dc59d=_0x36b10c['getFileUrl']();if(_0x36b10c['type']==='bundle'){const _0x52761f=_0x36b10c['data']['assets'];for(let _0x50794e=0x3f1*0x3+0x1d*0xdd+-0x24dc;_0x50794e<_0x52761f['length'];_0x50794e++){const _0x342903=this['_idToAsset']['get'](_0x52761f[_0x50794e]);_0x342903&&(_0x342903['loaded']||_0x342903['resource']||_0x342903['loading']||(_0x342903['loading']=!(-0x451*-0x4+0xb9*0x1f+-0x27ab)));}}this['_loader']['load'](_0x2dc59d,_0x36b10c['type'],_0x5d0559,_0x36b10c,_0x15f202);}else{const _0x5c8005=this['_loader']['open'](_0x36b10c['type'],_0x36b10c['data']);_0x36b10c['loaded']=!(0x1ced+0xc5*0x17+-0x2ea0),_0x577da4(_0x5c8005);}}['reloadInde'+'x'](_0xe66ee6,_0x3af9bb,_0x16fd06){const _0xccd466=(_0x60eea9,_0x4c0eec,_0x1ede40)=>{_0x3af9bb['loaded']=!(-0x70*-0x17+-0x236d*-0x1+-0x2d7d),_0x3af9bb['loading']=!(-0x1*-0x1f3d+-0x129b+-0xca1);};return this['_loader']['load'](_0xe66ee6,_0x3af9bb['type'],_0xccd466,_0x3af9bb,_0x16fd06),_0x3af9bb;}['loadFromUr'+'l'](_0x24a9b9,_0x541413,_0x3d719f){this['loadFromUr'+'lAndFilena'+'me'](_0x24a9b9,null,_0x541413,_0x3d719f);}['loadFromUr'+'lAndFilena'+'me'](_0x2b583f,_0x3944ce,_0xb5ae18,_0x490325){const _0xbffd74=xe['getBasenam'+'e'](_0x3944ce||_0x2b583f),_0x29ec19={'filename':_0x3944ce||_0xbffd74,'url':_0x2b583f};let _0x4c653d=this['getByUrl'](_0x2b583f);if(!_0x4c653d)_0x4c653d=new pe(_0xbffd74,_0xb5ae18,_0x29ec19),this['add'](_0x4c653d);else{if(_0x4c653d['loaded']){_0x490325(_0x4c653d['loadFromUr'+'lError']||null,_0x4c653d);return;}}const _0x2ee293=_0x40df30=>{_0x40df30['once']('load',_0x57d824=>{_0xb5ae18==='material'?this['_loadTextu'+'res'](_0x57d824,(_0x249173,_0xfd3fc8)=>{_0x490325(_0x249173,_0x57d824);}):_0x490325(null,_0x57d824);}),_0x40df30['once']('error',_0x3d6e7d=>{_0x3d6e7d&&(this['loadFromUr'+'lError']=_0x3d6e7d),_0x490325(_0x3d6e7d,_0x40df30);}),this['load'](_0x40df30);};_0x4c653d['resource']?_0x490325(null,_0x4c653d):_0xb5ae18==='model'?this['_loadModel'](_0x4c653d,_0x2ee293):_0x2ee293(_0x4c653d);}['_loadModel'](_0x2f3a10,_0x56e628){const _0x4ff163=_0x2f3a10['getFileUrl'](),_0xbe18c4=xe['getExtensi'+'on'](_0x4ff163);if(_0xbe18c4==='.json'||_0xbe18c4==='.glb'){const _0x4b30ee=xe['getDirecto'+'ry'](_0x4ff163),_0x5bf546=xe['getBasenam'+'e'](_0x4ff163),_0xc300dd=xe['join'](_0x4b30ee,_0x5bf546['replace'](_0xbe18c4,'.mapping.j'+'son'));this['_loader']['load'](_0xc300dd,'json',(_0x1025d4,_0x2b2780)=>{_0x1025d4?(_0x2f3a10['data']={'mapping':[]},_0x56e628(_0x2f3a10)):this['_loadMater'+'ials'](_0x2f3a10,_0x2b2780,(_0x295ff4,_0xafe773)=>{_0x2f3a10['data']=_0x2b2780,_0x56e628(_0x2f3a10);});});}else _0x56e628(_0x2f3a10);}['_loadMater'+'ials'](_0x36145e,_0x187f6a,_0xad69a4){const _0x341877=[];let _0x4a0309=-0x8e1+0x2fa+0x5e7*0x1;const _0x3e6832=(_0x224986,_0x2b5772)=>{this['_loadTextu'+'res'](_0x2b5772,(_0x2d8964,_0x52d0ef)=>{_0x341877['push'](_0x2b5772),_0x341877['length']===_0x4a0309&&_0xad69a4(null,_0x341877);});};for(let _0x4b1755=0x1*-0x121+0x5b2+-0x491;_0x4b1755<_0x187f6a['mapping']['length'];_0x4b1755++){const _0xe5141a=_0x187f6a['mapping'][_0x4b1755]['path'];if(_0xe5141a){_0x4a0309++;const _0x264075=_0x36145e['getAbsolut'+'eUrl'](_0xe5141a);this['loadFromUr'+'l'](_0x264075,'material',_0x3e6832);}}_0x4a0309===-0x662*0x1+0x7*0xcb+-0x1*-0xd5&&_0xad69a4(null,_0x341877);}['_loadTextu'+'res'](_0x5ee166,_0x57b1e9){const _0x4fdfb3=[];let _0xd224c7=-0x123b+0xf06+-0x335*-0x1;const _0x25b29e=_0x5ee166['data'];if(_0x25b29e['mappingFor'+'mat']!=='path'){w['warn']('Skipping:\x20'+_0x5ee166['name']+(',\x20material'+'\x20files\x20mus'+'t\x20be\x20mappi'+'ngFormat:\x20'+'\x22path\x22\x20to\x20'+'be\x20loaded\x20'+'from\x20URL')),_0x57b1e9(null,_0x4fdfb3);return;}const _0x28d3a7=(_0x5aad9e,_0x3c4cba)=>{_0x5aad9e&&console['error'](_0x5aad9e),_0x4fdfb3['push'](_0x3c4cba),_0x4fdfb3['length']===_0xd224c7&&_0x57b1e9(null,_0x4fdfb3);},_0x3bdf1b=Cd;for(let _0x29d98a=0x9be+0x97*0x15+-0x1621;_0x29d98a<_0x3bdf1b['length'];_0x29d98a++){const _0x262811=_0x25b29e[_0x3bdf1b[_0x29d98a]];if(_0x262811&&typeof _0x262811=='string'){_0xd224c7++;const _0x1649c7=_0x5ee166['getAbsolut'+'eUrl'](_0x262811);this['loadFromUr'+'l'](_0x1649c7,'texture',_0x28d3a7);}}_0xd224c7===-0x10*0x6e+0x1920+-0x1240&&_0x57b1e9(null,_0x4fdfb3);}['_onTagAdd'](_0x31f454,_0x19615b){this['_tags']['add'](_0x31f454,_0x19615b);}['_onTagRemo'+'ve'](_0x5035c6,_0x25401d){this['_tags']['remove'](_0x5035c6,_0x25401d);}['_onNameCha'+'nge'](_0x3e96a1,_0x34e53c,_0x259fd1){if(this['_nameToAss'+'et']['has'](_0x259fd1)){const _0x2dc807=this['_nameToAss'+'et']['get'](_0x259fd1);_0x2dc807['delete'](_0x3e96a1),_0x2dc807['size']===-0xc07*0x1+-0x1195*0x1+0x2*0xece&&this['_nameToAss'+'et']['delete'](_0x259fd1);}this['_nameToAss'+'et']['has'](_0x3e96a1['name'])||this['_nameToAss'+'et']['set'](_0x3e96a1['name'],new Set()),this['_nameToAss'+'et']['get'](_0x3e96a1['name'])['add'](_0x3e96a1);}['findByTag'](..._0x23ede){return this['_tags']['find'](_0x23ede);}['filter'](_0x1ab9d3){return Array['from'](this['_assets'])['filter'](_0x5a9dad=>_0x1ab9d3(_0x5a9dad));}['find'](_0x45591c,_0x2c7b31){const _0x478327=this['_nameToAss'+'et']['get'](_0x45591c);if(!_0x478327)return null;for(const _0x22f761 of _0x478327)if(!_0x2c7b31||_0x22f761['type']===_0x2c7b31)return _0x22f761;return null;}['findAll'](_0x9824e0,_0x3f9be9){const _0x3f7f4c=this['_nameToAss'+'et']['get'](_0x9824e0);if(!_0x3f7f4c)return[];const _0xaae264=Array['from'](_0x3f7f4c);return _0x3f9be9?_0xaae264['filter'](_0x3385ec=>_0x3385ec['type']===_0x3f9be9):_0xaae264;}}h(mn,'EVENT_LOAD','load'),h(mn,'EVENT_ADD','add'),h(mn,'EVENT_REMO'+'VE','remove'),h(mn,'EVENT_ERRO'+'R','error');class UC{constructor(_0x50ead7){h(this,'_idToBundl'+'e',new Map()),h(this,'_assetToBu'+'ndles',new Map()),h(this,'_urlsToBun'+'dles',new Map()),h(this,'_fileReque'+'sts',new Map()),(this['_assets']=_0x50ead7,this['_assets']['bundles']=this,this['_assets']['on']('add',this['_onAssetAd'+'d'],this),this['_assets']['on']('remove',this['_onAssetRe'+'move'],this));}['_onAssetAd'+'d'](_0x21eeba){if(_0x21eeba['type']==='bundle'){this['_idToBundl'+'e']['set'](_0x21eeba['id'],_0x21eeba),this['_assets']['on']('load:start'+':'+_0x21eeba['id'],this['_onBundleL'+'oadStart'],this),this['_assets']['on']('load:'+_0x21eeba['id'],this['_onBundleL'+'oad'],this),this['_assets']['on']('error:'+_0x21eeba['id'],this['_onBundleE'+'rror'],this);const _0x1d05d8=_0x21eeba['data']['assets'];for(let _0xdeb68a=-0x17b1+-0x1c*-0x114+-0x67f;_0xdeb68a<_0x1d05d8['length'];_0xdeb68a++)this['_indexAsse'+'tInBundle'](_0x1d05d8[_0xdeb68a],_0x21eeba);}else this['_assetToBu'+'ndles']['has'](_0x21eeba['id'])&&this['_indexAsse'+'tFileUrls'](_0x21eeba);}['_unbindAss'+'etEvents'](_0x4c932d){this['_assets']['off']('load:start'+':'+_0x4c932d,this['_onBundleL'+'oadStart'],this),this['_assets']['off']('load:'+_0x4c932d,this['_onBundleL'+'oad'],this),this['_assets']['off']('error:'+_0x4c932d,this['_onBundleE'+'rror'],this);}['_indexAsse'+'tInBundle'](_0xf1451d,_0x492167){let _0x447038=this['_assetToBu'+'ndles']['get'](_0xf1451d);_0x447038||(_0x447038=new Set(),this['_assetToBu'+'ndles']['set'](_0xf1451d,_0x447038)),_0x447038['add'](_0x492167);const _0x20d638=this['_assets']['get'](_0xf1451d);_0x20d638&&this['_indexAsse'+'tFileUrls'](_0x20d638);}['_indexAsse'+'tFileUrls'](_0xbcc0ee){const _0x341ac4=this['_getAssetF'+'ileUrls'](_0xbcc0ee);if(_0x341ac4)for(let _0x22bb1e=-0xb*0x161+-0xb5*0x2b+0x2d92;_0x22bb1e<_0x341ac4['length'];_0x22bb1e++){const _0x8bc7a1=this['_assetToBu'+'ndles']['get'](_0xbcc0ee['id']);_0x8bc7a1&&this['_urlsToBun'+'dles']['set'](_0x341ac4[_0x22bb1e],_0x8bc7a1);}}['_getAssetF'+'ileUrls'](_0xdee9ed){let _0x21a6a9=_0xdee9ed['getFileUrl']();if(!_0x21a6a9)return null;_0x21a6a9=_0x21a6a9['split']('?')[0x1*-0x2573+-0x14f*-0xd+0x147*0x10];const _0x436b38=[_0x21a6a9];if(_0xdee9ed['type']==='font'){const _0xb6df=_0xdee9ed['data']['info']['maps']['length'];for(let _0x57a52d=0x1*0x1897+-0x1863+-0x11*0x3;_0x57a52d<_0xb6df;_0x57a52d++)_0x436b38['push'](_0x21a6a9['replace']('.png',_0x57a52d+'.png'));}return _0x436b38;}['_onAssetRe'+'move'](_0x515843){if(_0x515843['type']==='bundle'){this['_idToBundl'+'e']['delete'](_0x515843['id']),this['_unbindAss'+'etEvents'](_0x515843['id']);const _0x17aac6=_0x515843['data']['assets'];for(let _0x206444=0xa19+-0x1125+0x70c;_0x206444<_0x17aac6['length'];_0x206444++){const _0x42f611=this['_assetToBu'+'ndles']['get'](_0x17aac6[_0x206444]);if(_0x42f611&&(_0x42f611['delete'](_0x515843),_0x42f611['size']===0x5*0x4a3+0xace+-0x21fd)){this['_assetToBu'+'ndles']['delete'](_0x17aac6[_0x206444]);for(const [_0x5b5008,_0x5f258b]of this['_urlsToBun'+'dles'])_0x5f258b===_0x42f611&&this['_urlsToBun'+'dles']['delete'](_0x5b5008);}}this['_onBundleE'+'rror']('Bundle\x20'+_0x515843['id']+('\x20was\x20remov'+'ed'));}else{if(!this['_assetToBu'+'ndles']['get'](_0x515843['id']))return;this['_assetToBu'+'ndles']['delete'](_0x515843['id']);const _0x37c737=this['_getAssetF'+'ileUrls'](_0x515843);if(!_0x37c737)return;for(let _0x111816=-0x1525+-0x1*0x205d+-0x12*-0x2f9;_0x111816<_0x37c737['length'];_0x111816++)this['_urlsToBun'+'dles']['delete'](_0x37c737[_0x111816]);}}['_onBundleL'+'oadStart'](_0x4abfd8){_0x4abfd8['resource']['on']('add',(_0x240f81,_0x4d1066)=>{const _0xd2d8bc=this['_fileReque'+'sts']['get'](_0x240f81);if(_0xd2d8bc){for(let _0x4a25fb=0x61*0x47+0x24fe+-0xb*0x5cf;_0x4a25fb<_0xd2d8bc['length'];_0x4a25fb++)_0xd2d8bc[_0x4a25fb](null,_0x4d1066);this['_fileReque'+'sts']['delete'](_0x240f81);}});}['_onBundleL'+'oad'](_0x587166){if(!_0x587166['resource']){this['_onBundleE'+'rror']('Bundle\x20'+_0x587166['id']+('\x20failed\x20to'+'\x20load'));return;}if(this['_fileReque'+'sts'])for(const [_0x704883,_0x4360da]of this['_fileReque'+'sts']){const _0x5c7a0c=this['_urlsToBun'+'dles']['get'](_0x704883);if(!_0x5c7a0c||!_0x5c7a0c['has'](_0x587166))continue;const _0x5521fb=decodeURIComponent(_0x704883);let _0x56702e,_0x1f619b;if(_0x587166['resource']['has'](_0x5521fb))_0x1f619b=_0x587166['resource']['get'](_0x5521fb);else{if(_0x587166['resource']['loaded'])_0x56702e='Bundle\x20'+_0x587166['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x704883;else continue;}for(let _0x3e4402=0x1f79+-0xcb5+-0x4b1*0x4;_0x3e4402<_0x4360da['length'];_0x3e4402++)_0x4360da[_0x3e4402](_0x56702e,_0x56702e||_0x1f619b);this['_fileReque'+'sts']['delete'](_0x704883);}}['_onBundleE'+'rror'](_0x44eb2e){for(const [_0x53db50,_0x1fc1ba]of this['_fileReque'+'sts'])if(!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x53db50)){for(let _0x493593=0xa09+-0x1991+-0x2*-0x7c4;_0x493593<_0x1fc1ba['length'];_0x493593++)_0x1fc1ba[_0x493593](_0x44eb2e);this['_fileReque'+'sts']['delete'](_0x53db50);}}['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x5c03ea){const _0x46a92c=this['_urlsToBun'+'dles']['get'](_0x5c03ea);if(!_0x46a92c)return null;let _0x41f360=null;for(const _0x1ecb04 of _0x46a92c){if(_0x1ecb04['loaded']&&_0x1ecb04['resource'])return _0x1ecb04;_0x1ecb04['loading']&&(_0x41f360=_0x1ecb04);}return _0x41f360;}['listBundle'+'sForAsset'](_0x5bc30e){const _0xe0cd47=this['_assetToBu'+'ndles']['get'](_0x5bc30e['id']);return _0xe0cd47?Array['from'](_0xe0cd47):null;}['list'](){return Array['from'](this['_idToBundl'+'e']['values']());}['hasUrl'](_0x2e9561){return this['_urlsToBun'+'dles']['has'](_0x2e9561);}['urlIsLoade'+'dOrLoading'](_0x377171){return!!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x377171);}['loadUrl'](_0x1b9081,_0xf7fe49){const _0x323474=this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x1b9081);if(!_0x323474){_0xf7fe49('URL\x20'+_0x1b9081+('\x20not\x20found'+'\x20in\x20any\x20bu'+'ndles'));return;}if(_0x323474['loaded']){const _0x4570a0=decodeURIComponent(_0x1b9081);if(_0x323474['resource']['has'](_0x4570a0)){_0xf7fe49(null,_0x323474['resource']['get'](_0x4570a0));return;}else{if(_0x323474['resource']['loaded']){_0xf7fe49('Bundle\x20'+_0x323474['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x1b9081);return;}}}let _0x32cf90=this['_fileReque'+'sts']['get'](_0x1b9081);_0x32cf90||(_0x32cf90=[],this['_fileReque'+'sts']['set'](_0x1b9081,_0x32cf90)),_0x32cf90['push'](_0xf7fe49);}['destroy'](){this['_assets']['off']('add',this['_onAssetAd'+'d'],this),this['_assets']['off']('remove',this['_onAssetRe'+'move'],this);for(const _0x586455 of this['_idToBundl'+'e']['keys']())this['_unbindAss'+'etEvents'](_0x586455);this['_assets']=null,this['_idToBundl'+'e']['clear'](),this['_idToBundl'+'e']=null,this['_assetToBu'+'ndles']['clear'](),this['_assetToBu'+'ndles']=null,this['_urlsToBun'+'dles']['clear'](),this['_urlsToBun'+'dles']=null,this['_fileReque'+'sts']['clear'](),this['_fileReque'+'sts']=null;}}class BC extends me{constructor(){super(),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'joint'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'zone'),this['list']=[];}['add'](_0x27513d){const _0x25c6c0=_0x27513d['id'];if(this[_0x25c6c0])throw new Error('ComponentS'+'ystem\x20name'+'\x20\x27'+_0x25c6c0+('\x27\x20already\x20'+'registered'+'\x20or\x20not\x20al'+'lowed'));this[_0x25c6c0]=_0x27513d,this['list']['push'](_0x27513d);}['remove'](_0x307f08){const _0x19513a=_0x307f08['id'];if(!this[_0x19513a])throw new Error('No\x20Compone'+'ntSystem\x20n'+'amed\x20\x27'+_0x19513a+('\x27\x20register'+'ed'));delete this[_0x19513a];const _0x107e01=this['list']['indexOf'](this[_0x19513a]);_0x107e01!==-(-0x153e+0x5*0x5db+-0x808)&&this['list']['splice'](_0x107e01,0x100f*0x2+-0x2fa*-0x1+-0x2317*0x1);}['destroy'](){this['off']();for(let _0x597057=-0x80b+-0x65*-0x49+0x2*-0xa61;_0x597057<this['list']['length'];_0x597057++)this['list'][_0x597057]['destroy']();}}class gu extends me{constructor(){super(...arguments),h(this,'_index',new Map()),h(this,'_loaded',!(-0x2*-0xac5+0xe87*0x2+0x3*-0x10dd));}['addFile'](_0x1626b1,_0x4a1d02){this['_index']['has'](_0x1626b1)||(this['_index']['set'](_0x1626b1,_0x4a1d02),this['fire']('add',_0x1626b1,_0x4a1d02));}['has'](_0x27e5f6){return this['_index']['has'](_0x27e5f6);}['get'](_0x452f86){return this['_index']['get'](_0x452f86)||null;}['destroy'](){this['_index']['clear']();}set['loaded'](_0x3e7cd1){!_0x3e7cd1||this['_loaded']||(this['_loaded']=!(0x1*-0x20ff+-0x1*0xf20+0x301f),this['fire']('load'));}get['loaded'](){return this['_loaded'];}}h(gu,'EVENT_ADD','add'),h(gu,'EVENT_LOAD','load');class zC extends me{constructor(_0x1aef68,_0xd466a4=''){super(),h(this,'headerSize',-0x22ca+-0x139*-0xd+-0x3*-0x6f7),h(this,'paddingSiz'+'e',-0x319+0x1ca*-0x9+0x1533),h(this,'bytesRead',0x1*-0x1d37+-0x639+0x2370),h(this,'bytesRecei'+'ved',-0x1*-0x204d+-0x1532+-0xb1b),h(this,'headerRead',!(0x264b+-0x9a1+-0x1d*0xfd)),h(this,'reader',null),h(this,'data',new Uint8Array(-0x253d*0x1+0x265f+-0xa*0x1d)),h(this,'decoder',null),h(this,'prefix',''),h(this,'fileName',''),h(this,'fileSize',0x2405*-0x1+-0x75b*-0x4+-0x1*-0x699),h(this,'fileType',''),h(this,'ustarForma'+'t',''),(this['prefix']=_0xd466a4||'',this['reader']=_0x1aef68['body']['getReader'](),this['reader']['read']()['then'](_0x3f34c5=>{this['pump'](_0x3f34c5['done'],_0x3f34c5['value']);})['catch'](_0xdad169=>{this['fire']('error',_0xdad169);}));}['pump'](_0x36ba5d,_0x2e1d14){if(_0x36ba5d)return this['fire']('done'),null;this['bytesRecei'+'ved']+=_0x2e1d14['byteLength'];const _0x481de4=new Uint8Array(this['data']['length']+_0x2e1d14['length']);for(_0x481de4['set'](this['data']),_0x481de4['set'](_0x2e1d14,this['data']['length']),this['data']=_0x481de4;this['readFile'](););return this['reader']['read']()['then'](_0x1548f2=>{this['pump'](_0x1548f2['done'],_0x1548f2['value']);})['catch'](_0x5572ae=>{this['fire']('error',_0x5572ae);});}['readFile'](){if(!this['headerRead']&&this['bytesRecei'+'ved']>this['bytesRead']+this['headerSize']){this['headerRead']=!(0x5*0x31+-0x970+0x87b);const _0x5f37d3=new DataView(this['data']['buffer'],this['bytesRead'],this['headerSize']);this['decoder']??(this['decoder']=new TextDecoder('windows-12'+'52'));const _0x31a7cf=this['decoder']['decode'](_0x5f37d3);if(this['fileName']=_0x31a7cf['substring'](-0x116*-0x1b+0x243c*0x1+-0x6*0xaed,-0x51f*-0x3+-0x2*0xee6+-0x3*-0x4f1)['replace'](/\0/g,''),this['fileSize']=parseInt(_0x31a7cf['substring'](0x2*-0xeb3+-0x1241+0x1*0x3023,0x1*-0x179f+0xd8b+0xa9c),-0xad*0x1b+-0x25ca+0x1f*0x1cf),this['fileType']=_0x31a7cf['substring'](0xc*0x2ab+-0x22*-0xfd+-0x4102,-0x251*-0xe+-0x2*-0xd03+-0x39d7),this['ustarForma'+'t']=_0x31a7cf['substring'](0x480+0xad*0x1+-0x4*0x10b,0x63a+0x6*-0x4bd+0x139*0x13),this['ustarForma'+'t']['indexOf']('ustar')!==-(0xaed+-0x1*-0x1063+0x1*-0x1b4f)){const _0x51259f=_0x31a7cf['substring'](-0x1*-0x24fb+0x1a4+-0x2546,0x1f75*-0x1+-0x21b5+-0xf2*-0x47)['replace'](/\0/g,'');_0x51259f['length']>0x4a7*0x3+0x198+-0xf8d&&(this['fileName']=_0x51259f['trim']()+this['fileName']['trim']());}this['bytesRead']+=0x11be*-0x1+-0x54f+-0x247*-0xb;}if(this['headerRead']){if(this['bytesRecei'+'ved']<this['bytesRead']+this['fileSize'])return!(0x1*-0xafd+-0x19e+-0x3*-0x434);if(this['fileType']===''||this['fileType']==='0'){const _0xcd8385=new DataView(this['data']['buffer'],this['bytesRead'],this['fileSize']),_0x295f04={'name':this['prefix']+this['fileName'],'size':this['fileSize'],'data':_0xcd8385};this['fire']('file',_0x295f04);}this['bytesRead']+=this['fileSize'],this['headerRead']=!(-0xef1+-0xf3*-0x9+0x667);const _0x1ca736=this['bytesRead']%this['paddingSiz'+'e'];return _0x1ca736!==0xe48+-0xd8b*-0x1+0x1*-0x1bd3&&(this['bytesRead']+=this['paddingSiz'+'e']-_0x1ca736),!(-0x1c9f*-0x1+0x6ce+-0x236d);}return!(-0x192*0x2+0x4ce+-0x1a9);}}class Qe{constructor(_0xecb30,_0xfb0116){h(this,'handlerTyp'+'e',''),h(this,'_app'),h(this,'_maxRetrie'+'s',0x1a7+0x1af*0x2+-0x505),(this['_app']=_0xecb30,this['handlerTyp'+'e']=_0xfb0116);}set['maxRetries'](_0x4ef937){this['_maxRetrie'+'s']=_0x4ef937;}get['maxRetries'](){return this['_maxRetrie'+'s'];}['load'](_0xc898d9,_0x46ce0c,_0x32aafd){}['open'](_0x30faef,_0xddf946,_0x1edd48){return _0xddf946;}['patch'](_0x1aecb3,_0xd3f69c){}}class VC extends Qe{constructor(_0x33636c){super(_0x33636c,'bundle'),this['_assets']=_0x33636c['assets'];}['_fetchRetr'+'ies'](_0x20efd9,_0x594e5f,_0x20d90b=-0xe97+0x2*-0x28d+0x13b1){return new Promise((_0x37d966,_0x5a4372)=>{const _0x28a60e=()=>{fetch(_0x20efd9,_0x594e5f)['then'](_0x37d966)['catch'](_0x2b23f8=>{_0x20d90b++,_0x20d90b<this['maxRetries']?(w['error']('Bundle\x20fai'+'led\x20to\x20loa'+'d\x20retrying'+'\x20(attempt\x20'+_0x20d90b),_0x28a60e()):_0x5a4372(_0x2b23f8);});};_0x28a60e();});}['load'](_0x4d6557,_0x5efa7b){typeof _0x4d6557=='string'&&(_0x4d6557={'load':_0x4d6557,'original':_0x4d6557}),this['_fetchRetr'+'ies'](_0x4d6557['load'],{'mode':'cors'},this['maxRetries'])['then'](_0x1ff82e=>{const _0x2d2735=new gu();_0x5efa7b(null,_0x2d2735);const _0xdf4df1=new zC(_0x1ff82e,this['_assets']['prefix']);_0xdf4df1['on']('file',_0x49a424=>{_0x2d2735['addFile'](_0x49a424['name'],_0x49a424['data']);}),_0xdf4df1['on']('done',()=>{_0x2d2735['loaded']=!(0x2613+0x163a+-0x3c4d);}),_0xdf4df1['on']('error',_0x5742c7=>{w['error'](_0x5742c7),_0x5efa7b(_0x5742c7);});})['catch'](_0x46b7cc=>{w['error'](_0x46b7cc),_0x5efa7b(_0x46b7cc);});}['open'](_0x4d2869,_0x58f0d2){return _0x58f0d2;}}class Cn{constructor(_0x99e84b){this['_handlers']={},this['_requests']={},this['_cache']={},this['_app']=_0x99e84b;}['addHandler'](_0x3d8e00,_0x6de62d){this['_handlers'][_0x3d8e00]=_0x6de62d,_0x6de62d['_loader']=this;}['removeHand'+'ler'](_0x35bb90){delete this['_handlers'][_0x35bb90];}['getHandler'](_0x345b9e){return this['_handlers'][_0x345b9e];}static['makeKey'](_0x1b8cf5,_0x5d4f59){return _0x1b8cf5+'-'+_0x5d4f59;}['load'](_0x4ff15c,_0x4dc483,_0x351c1b,_0x2abebf,_0x214b8f){var _0x47054c;const _0xcc292d=this['_handlers'][_0x4dc483];if(!_0xcc292d){const _0x5a0fc9='No\x20resourc'+'e\x20handler\x20'+'for\x20asset\x20'+'type:\x20\x27'+_0x4dc483+('\x27\x20when\x20loa'+'ding\x20[')+_0x4ff15c+']';w['errorOnce'](_0x5a0fc9),_0x351c1b(_0x5a0fc9);return;}if(!_0x4ff15c){this['_loadNull'](_0xcc292d,_0x351c1b,_0x2abebf);return;}const _0x5387a8=Cn['makeKey'](_0x4ff15c,_0x4dc483);if(this['_requests'][_0x5387a8])this['_requests'][_0x5387a8]['push'](_0x351c1b);else{this['_requests'][_0x5387a8]=[_0x351c1b];const _0x244bb6=this,_0x554066=function(_0x933fd,_0x228ffd){if(_0x933fd){_0x244bb6['_onFailure'](_0x5387a8,_0x933fd);return;}if(_0x228ffd['load']instanceof DataView){if(_0xcc292d['openBinary']){if(!_0x244bb6['_requests'][_0x5387a8])return;try{const _0x2b4133=_0xcc292d['openBinary'](_0x228ffd['load']);_0x244bb6['_onSuccess'](_0x5387a8,_0x2b4133);}catch(_0x2e808c){_0x244bb6['_onFailure'](_0x5387a8,_0x2e808c);}return;}_0x228ffd['load']=URL['createObje'+'ctURL'](new Blob([_0x228ffd['load']])),_0x2abebf&&(_0x2abebf['urlObject']&&URL['revokeObje'+'ctURL'](_0x2abebf['urlObject']),_0x2abebf['urlObject']=_0x228ffd['load']);}_0xcc292d['load'](_0x228ffd,(_0x4af219,_0x28be81,_0x1af919)=>{if(_0x244bb6['_requests'][_0x5387a8]){if(_0x4af219){_0x244bb6['_onFailure'](_0x5387a8,_0x4af219);return;}try{_0x244bb6['_onSuccess'](_0x5387a8,_0xcc292d['open'](_0x228ffd['original'],_0x28be81,_0x2abebf),_0x1af919);}catch(_0x3d7e01){_0x244bb6['_onFailure'](_0x5387a8,_0x3d7e01);}}},_0x2abebf);},_0x5b8207=_0x4ff15c['split']('?')[0x2*-0x115f+0x97a+0x1944];if(this['_app']['enableBund'+'les']&&this['_app']['bundles']['hasUrl'](_0x5b8207)&&!(_0x214b8f&&_0x214b8f['bundlesIgn'+'ore'])){if(!this['_app']['bundles']['urlIsLoade'+'dOrLoading'](_0x5b8207)){const _0x3d04eb=this['_app']['bundles']['listBundle'+'sForAsset'](_0x2abebf);let _0x41f972;_0x214b8f&&_0x214b8f['bundlesFil'+'ter']&&(_0x41f972=_0x214b8f['bundlesFil'+'ter'](_0x3d04eb)),_0x41f972||(_0x3d04eb==null||_0x3d04eb['sort']((_0xa54adb,_0x504fcf)=>_0xa54adb['file']['size']-_0x504fcf['file']['size']),_0x41f972=_0x3d04eb==null?void(0x215a+0x1f89*-0x1+-0x1d1):_0x3d04eb[0x1*-0x17d+0x1134+-0xfb7]),_0x41f972&&((_0x47054c=this['_app']['assets'])==null||_0x47054c['load'](_0x41f972));}this['_app']['bundles']['loadUrl'](_0x5b8207,(_0x461ead,_0x23766f)=>{_0x554066(_0x461ead,{'load':_0x23766f,'original':_0x5b8207});});}else _0x554066(null,{'load':_0x4ff15c,'original':_0x2abebf&&_0x2abebf['file']['filename']||_0x4ff15c});}}['_loadNull'](_0x1e2e25,_0x30259f,_0x384cc4){const _0x3eadf3=function(_0xdfbcb8,_0x411f0f,_0x37eb0d){if(_0xdfbcb8)_0x30259f(_0xdfbcb8);else try{_0x30259f(null,_0x1e2e25['open'](null,_0x411f0f,_0x384cc4),_0x37eb0d);}catch(_0x28f932){_0x30259f(_0x28f932);}};_0x1e2e25['load'](null,_0x3eadf3,_0x384cc4);}['_onSuccess'](_0x4650cc,_0x1fb094,_0x48aacf){for(let _0x55ebb4=-0x14b7+-0x1bd4+0x2db*0x11;_0x55ebb4<this['_requests'][_0x4650cc]['length'];_0x55ebb4++)this['_requests'][_0x4650cc][_0x55ebb4](null,_0x1fb094,_0x48aacf);delete this['_requests'][_0x4650cc];}['_onFailure'](_0x4008fd,_0x4041de){if(console['error'](_0x4041de),this['_requests'][_0x4008fd]){for(let _0x23d704=0x249c+-0xa5e+-0x1a3e;_0x23d704<this['_requests'][_0x4008fd]['length'];_0x23d704++)this['_requests'][_0x4008fd][_0x23d704](_0x4041de);delete this['_requests'][_0x4008fd];}}['open'](_0x1d1fce,_0x26ecaa){const _0x3c58f1=this['_handlers'][_0x1d1fce];return _0x3c58f1?_0x3c58f1['open'](null,_0x26ecaa):(console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x1d1fce),_0x26ecaa);}['patch'](_0x286b97,_0x1afbc9){const _0xb8c43b=this['_handlers'][_0x286b97['type']];if(!_0xb8c43b){console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x286b97['type']);return;}_0xb8c43b['patch']&&_0xb8c43b['patch'](_0x286b97,_0x1afbc9);}['clearCache'](_0x5b9056,_0x50d145){const _0x4f50e5=Cn['makeKey'](_0x5b9056,_0x50d145);delete this['_cache'][_0x4f50e5];}['getFromCac'+'he'](_0x4f2ca2,_0x2c32f8){const _0x3b4d46=Cn['makeKey'](_0x4f2ca2,_0x2c32f8);if(this['_cache'][_0x3b4d46])return this['_cache'][_0x3b4d46];}['enableRetr'+'y'](_0x16d150=-0x24fb+0x5d3+0x1f2d){_0x16d150=Math['max'](0x4*-0x7+0x1c05+0x5*-0x595,_0x16d150)||0x2618+-0x1*-0x1901+-0x22d*0x1d;for(const _0x31b4a in this['_handlers'])this['_handlers'][_0x31b4a]['maxRetries']=_0x16d150;}['disableRet'+'ry'](){for(const _0x45319f in this['_handlers'])this['_handlers'][_0x45319f]['maxRetries']=-0x11*0x1fd+0x86e+0x195f*0x1;}['destroyReq'+'uests'](){this['_requests']={};}['destroy'](){this['_handlers']={},this['_requests']={},this['_cache']={};}}class GC{['_validate'](_0xf246ed){if(!_0xf246ed['header'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er\x22\x20field');if(!_0xf246ed['header']['version'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er.version'+'\x22\x20field');if(_0xf246ed['header']['version']!==-0x250d+0x75e+0x1db0)throw new Error('pc.I18n#ad'+'dData:\x20Inv'+'alid\x20\x22head'+'er.version'+'\x22\x20field');if(_0xf246ed['data']){if(!Array['isArray'](_0xf246ed['data']))throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta\x22\x20field\x20'+'must\x20be\x20an'+'\x20array');}else throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22data'+'\x22\x20field');for(let _0x363338=0x4*-0x27f+-0x1550+0x1f4c,_0x27e459=_0xf246ed['data']['length'];_0x363338<_0x27e459;_0x363338++){const _0x185665=_0xf246ed['data'][_0x363338];if(!_0x185665['info'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x363338+('].info\x22\x20fi'+'eld'));if(!_0x185665['info']['locale'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x363338+('].info.loc'+'ale\x22\x20field'));if(typeof _0x185665['info']['locale']!='string')throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta['+_0x363338+('].info.loc'+'ale\x22\x20must\x20'+'be\x20a\x20strin'+'g'));if(!_0x185665['messages'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x363338+('].messages'+'\x22\x20field'));}}['parse'](_0x5969e9){return this['_validate'](_0x5969e9),_0x5969e9['data'];}}const Gh=class Gh extends me{constructor(_0x5ead1a){super(),this['locale']=Ph,this['_translati'+'ons']={},this['_available'+'Langs']={},this['_app']=_0x5ead1a,this['_assets']=[],this['_parser']=new GC();}set['assets'](_0x17255c){const _0xd7b5f6={};for(let _0x367f56=0x21ff+-0x1dd9+0x3*-0x162,_0x3ba3ce=_0x17255c['length'];_0x367f56<_0x3ba3ce;_0x367f56++){const _0xbd1534=_0x17255c[_0x367f56]instanceof pe?_0x17255c[_0x367f56]['id']:_0x17255c[_0x367f56];_0xd7b5f6[_0xbd1534]=!(-0x29f+0x9e*-0x2+0x3db);}let _0x1aaa1d=this['_assets']['length'];for(;_0x1aaa1d--;){const _0x15fc5e=this['_assets'][_0x1aaa1d];if(!_0xd7b5f6[_0x15fc5e]){this['_app']['assets']['off']('add:'+_0x15fc5e,this['_onAssetAd'+'d'],this);const _0x5d656c=this['_app']['assets']['get'](_0x15fc5e);_0x5d656c&&this['_onAssetRe'+'move'](_0x5d656c),this['_assets']['splice'](_0x1aaa1d,-0x1de8+-0x847+0x2630);}}for(const _0x172c70 in _0xd7b5f6){const _0x2ecc29=parseInt(_0x172c70,-0x1c6*0xb+-0x5b4+-0x20*-0xca);if(this['_assets']['indexOf'](_0x2ecc29)!==-(-0x1*-0x1724+0x121d*0x1+0x370*-0xc))continue;this['_assets']['push'](_0x2ecc29);const _0x2f467e=this['_app']['assets']['get'](_0x2ecc29);_0x2f467e?this['_onAssetAd'+'d'](_0x2f467e):this['_app']['assets']['once']('add:'+_0x2ecc29,this['_onAssetAd'+'d'],this);}}get['assets'](){return this['_assets'];}set['locale'](_0xb050b4){if(this['_locale']===_0xb050b4)return;let _0x55e283=Oi(_0xb050b4);if(_0x55e283==='in'&&(_0x55e283='id',_0xb050b4=LC(_0xb050b4,_0x55e283),this['_locale']===_0xb050b4))return;const _0x315401=this['_locale'];this['_locale']=_0xb050b4,this['_lang']=_0x55e283,this['_pluralFn']=Tf(this['_lang']),this['fire'](Gh['EVENT_CHAN'+'GE'],_0xb050b4,_0x315401);}get['locale'](){return this['_locale'];}static['findAvaila'+'bleLocale'](_0x367159,_0xd2df22){return Fv(_0x367159,_0xd2df22);}['findAvaila'+'bleLocale'](_0x182165){if(this['_translati'+'ons'][_0x182165])return _0x182165;const _0x1cb882=Oi(_0x182165);return this['_findFallb'+'ackLocale'](_0x182165,_0x1cb882);}['getText'](_0xbb88b7,_0x17872b){let _0x193109=_0xbb88b7,_0x235b77;_0x17872b||(_0x17872b=this['_locale'],_0x235b77=this['_lang']);let _0xd8e20b=this['_translati'+'ons'][_0x17872b];return _0xd8e20b||(_0x235b77||(_0x235b77=Oi(_0x17872b)),_0x17872b=this['_findFallb'+'ackLocale'](_0x17872b,_0x235b77),_0xd8e20b=this['_translati'+'ons'][_0x17872b]),_0xd8e20b&&_0xd8e20b['hasOwnProp'+'erty'](_0xbb88b7)&&(_0x193109=_0xd8e20b[_0xbb88b7],Array['isArray'](_0x193109)&&(_0x193109=_0x193109[0x5*0x340+0xd49+-0x1d89]),_0x193109==null&&(_0x193109=_0xbb88b7)),_0x193109;}['getPluralT'+'ext'](_0x3e894a,_0x4843f1,_0x599a1b){let _0x44e33f=_0x3e894a,_0x1555ef,_0x1dd0f9;_0x599a1b?(_0x1555ef=Oi(_0x599a1b),_0x1dd0f9=Tf(_0x1555ef)):(_0x599a1b=this['_locale'],_0x1555ef=this['_lang'],_0x1dd0f9=this['_pluralFn']);let _0x338d95=this['_translati'+'ons'][_0x599a1b];if(_0x338d95||(_0x599a1b=this['_findFallb'+'ackLocale'](_0x599a1b,_0x1555ef),_0x1555ef=Oi(_0x599a1b),_0x1dd0f9=Tf(_0x1555ef),_0x338d95=this['_translati'+'ons'][_0x599a1b]),_0x338d95&&_0x338d95[_0x3e894a]&&_0x1dd0f9){const _0x256c1e=_0x1dd0f9(_0x4843f1);_0x44e33f=_0x338d95[_0x3e894a][_0x256c1e],_0x44e33f==null&&(_0x44e33f=_0x3e894a);}return _0x44e33f;}['addData'](_0x1533fb){let _0x5011ca;try{_0x5011ca=this['_parser']['parse'](_0x1533fb);}catch(_0xcab392){console['error'](_0xcab392);return;}for(let _0x1872c5=-0xb8*0x25+0x397+-0x7ab*-0x3,_0x423e19=_0x5011ca['length'];_0x1872c5<_0x423e19;_0x1872c5++){const _0x22b2fa=_0x5011ca[_0x1872c5],_0x54e5b7=_0x22b2fa['info']['locale'],_0xb65881=_0x22b2fa['messages'];if(!this['_translati'+'ons'][_0x54e5b7]){this['_translati'+'ons'][_0x54e5b7]={};const _0x58f0d3=Oi(_0x54e5b7);this['_available'+'Langs'][_0x58f0d3]||(this['_available'+'Langs'][_0x58f0d3]=_0x54e5b7);}Object['assign'](this['_translati'+'ons'][_0x54e5b7],_0xb65881),this['fire']('data:add',_0x54e5b7,_0xb65881);}}['removeData'](_0x566f7f){let _0x41f2a9;try{_0x41f2a9=this['_parser']['parse'](_0x566f7f);}catch(_0x47d657){console['error'](_0x47d657);return;}for(let _0xd3c8d7=0x1*0x20f6+-0x959+0x1f*-0xc3,_0x43b69d=_0x41f2a9['length'];_0xd3c8d7<_0x43b69d;_0xd3c8d7++){const _0x59092a=_0x41f2a9[_0xd3c8d7],_0x294254=_0x59092a['info']['locale'],_0x481206=this['_translati'+'ons'][_0x294254];if(!_0x481206)continue;const _0x2cc6df=_0x59092a['messages'];for(const _0x52e1ac in _0x2cc6df)delete _0x481206[_0x52e1ac];Object['keys'](_0x481206)['length']===-0x1*0x2342+0xe*0x16c+0xf5a&&(delete this['_translati'+'ons'][_0x294254],delete this['_available'+'Langs'][Oi(_0x294254)]),this['fire']('data:remov'+'e',_0x294254,_0x2cc6df);}}['destroy'](){this['_translati'+'ons']=null,this['_available'+'Langs']=null,this['_assets']=null,this['_parser']=null,this['off']();}['_findFallb'+'ackLocale'](_0x4b9279,_0x4b2415){let _0xda9ac7=Mh[_0x4b9279];return _0xda9ac7&&this['_translati'+'ons'][_0xda9ac7]||(_0xda9ac7=Mh[_0x4b2415],_0xda9ac7&&this['_translati'+'ons'][_0xda9ac7])||(_0xda9ac7=this['_available'+'Langs'][_0x4b2415],_0xda9ac7&&this['_translati'+'ons'][_0xda9ac7])?_0xda9ac7:Ph;}['_onAssetAd'+'d'](_0x51a10d){_0x51a10d['on']('load',this['_onAssetLo'+'ad'],this),_0x51a10d['on']('change',this['_onAssetCh'+'ange'],this),_0x51a10d['on']('remove',this['_onAssetRe'+'move'],this),_0x51a10d['on']('unload',this['_onAssetUn'+'load'],this),_0x51a10d['resource']&&this['_onAssetLo'+'ad'](_0x51a10d);}['_onAssetLo'+'ad'](_0x157ced){this['addData'](_0x157ced['resource']);}['_onAssetCh'+'ange'](_0x22e8ac){_0x22e8ac['resource']&&this['addData'](_0x22e8ac['resource']);}['_onAssetRe'+'move'](_0x45853d){_0x45853d['off']('load',this['_onAssetLo'+'ad'],this),_0x45853d['off']('change',this['_onAssetCh'+'ange'],this),_0x45853d['off']('remove',this['_onAssetRe'+'move'],this),_0x45853d['off']('unload',this['_onAssetUn'+'load'],this),_0x45853d['resource']&&this['removeData'](_0x45853d['resource']),this['_app']['assets']['once']('add:'+_0x45853d['id'],this['_onAssetAd'+'d'],this);}['_onAssetUn'+'load'](_0xba9fc9){_0xba9fc9['resource']&&this['removeData'](_0xba9fc9['resource']);}};h(Gh,'EVENT_CHAN'+'GE','change');let wa=Gh;class HC extends me{constructor(_0x121e44){super(),h(this,'_scripts',{}),h(this,'_list',[]),h(this,'_scriptSch'+'emas',new Map()),this['app']=_0x121e44;}['destroy'](){this['app']=null,this['off']();}['addSchema'](_0x5b213e,_0x341cf4){_0x341cf4&&this['_scriptSch'+'emas']['set'](_0x5b213e,_0x341cf4);}['getSchema'](_0x445587){return this['_scriptSch'+'emas']['get'](_0x445587);}['add'](_0x5ba5ef){const _0xff6ac2=_0x5ba5ef['__name'];return this['_scripts']['hasOwnProp'+'erty'](_0xff6ac2)?(setTimeout(()=>{if(_0x5ba5ef['prototype']['swap']){const _0x90923=this['_scripts'][_0xff6ac2],_0x4f8a4a=this['_list']['indexOf'](_0x90923);this['_list'][_0x4f8a4a]=_0x5ba5ef,this['_scripts'][_0xff6ac2]=_0x5ba5ef,this['fire']('swap',_0xff6ac2,_0x5ba5ef),this['fire']('swap:'+_0xff6ac2,_0x5ba5ef);}else console['warn']('script\x20reg'+'istry\x20alre'+'ady\x20has\x20\x27'+_0xff6ac2+('\x27\x20script,\x20'+'define\x20\x27sw'+'ap\x27\x20method'+'\x20for\x20new\x20s'+'cript\x20type'+'\x20to\x20enable'+'\x20code\x20hot\x20'+'swapping'));}),!(-0x3b6+0xd86+-0x9cf)):(this['_scripts'][_0xff6ac2]=_0x5ba5ef,this['_list']['push'](_0x5ba5ef),this['fire']('add',_0xff6ac2,_0x5ba5ef),this['fire']('add:'+_0xff6ac2,_0x5ba5ef),setTimeout(()=>{if(!this['_scripts']['hasOwnProp'+'erty'](_0xff6ac2)||!this['app']||!this['app']['systems']||!this['app']['systems']['script'])return;const _0x594852=this['app']['systems']['script']['_component'+'s'];let _0x42c7b3;const _0x55273a=[],_0x29b4b5=[];for(_0x594852['loopIndex']=0x177+-0x255b+-0x2*-0x11f2;_0x594852['loopIndex']<_0x594852['length'];_0x594852['loopIndex']++){const _0x29875a=_0x594852['items'][_0x594852['loopIndex']];if(_0x29875a['_scriptsIn'+'dex'][_0xff6ac2]&&_0x29875a['_scriptsIn'+'dex'][_0xff6ac2]['awaiting']){_0x29875a['_scriptsDa'+'ta']&&_0x29875a['_scriptsDa'+'ta'][_0xff6ac2]&&(_0x42c7b3=_0x29875a['_scriptsDa'+'ta'][_0xff6ac2]['attributes']);const _0x57c834=_0x29875a['create'](_0xff6ac2,{'preloading':!(0x1e53*0x1+0x1*0x39a+-0x21ed),'ind':_0x29875a['_scriptsIn'+'dex'][_0xff6ac2]['ind'],'attributes':_0x42c7b3});_0x57c834&&_0x55273a['push'](_0x57c834);for(const _0x1092e5 of _0x29875a['scripts'])_0x29875a['initialize'+'Attributes'](_0x1092e5);}}for(let _0x1b926d=0x908+-0x23fc+0x1af4;_0x1b926d<_0x55273a['length'];_0x1b926d++)_0x55273a[_0x1b926d]['enabled']&&(_0x55273a[_0x1b926d]['_initializ'+'ed']=!(0xd4c+-0x1f75*0x1+-0x1229*-0x1),_0x29b4b5['push'](_0x55273a[_0x1b926d]),_0x55273a[_0x1b926d]['initialize']&&_0x55273a[_0x1b926d]['initialize']());for(let _0x27d03b=0x1947+-0xc5b*0x1+-0xcec;_0x27d03b<_0x29b4b5['length'];_0x27d03b++)!_0x29b4b5[_0x27d03b]['enabled']||_0x29b4b5[_0x27d03b]['_postIniti'+'alized']||(_0x29b4b5[_0x27d03b]['_postIniti'+'alized']=!(0x11ce+-0x1*-0xf0d+-0x20db*0x1),_0x29b4b5[_0x27d03b]['postInitia'+'lize']&&_0x29b4b5[_0x27d03b]['postInitia'+'lize']());}),!(0x1f83+-0x9*0x8b+-0x1aa0));}['remove'](_0x5fd7ba){let _0x4ec54a=_0x5fd7ba,_0x2a695e=_0x5fd7ba;if(typeof _0x2a695e!='string'?_0x2a695e=_0x4ec54a['__name']:_0x4ec54a=this['get'](_0x2a695e),this['get'](_0x2a695e)!==_0x4ec54a)return!(0x2*-0x454+-0x2089+0x2932);delete this['_scripts'][_0x2a695e];const _0x563c26=this['_list']['indexOf'](_0x4ec54a);return this['_list']['splice'](_0x563c26,0x10b5+0x1e7c+-0x2f30),this['fire']('remove',_0x2a695e,_0x4ec54a),this['fire']('remove:'+_0x2a695e,_0x4ec54a),!(0x240a+-0x883+-0x1b87);}['get'](_0xe838cc){return this['_scripts'][_0xe838cc]||null;}['has'](_0x43bfe2){if(typeof _0x43bfe2=='string')return this['_scripts']['hasOwnProp'+'erty'](_0x43bfe2);if(!_0x43bfe2)return!(-0x113b+-0x98+0x11d4);const _0x4f22ef=_0x43bfe2['__name'];return this['_scripts'][_0x4f22ef]===_0x43bfe2;}['list'](){return this['_list'];}}const WC=(_0x1b85e1,_0x59f0cf)=>_0x1b85e1['constructo'+'r']['order']-_0x59f0cf['constructo'+'r']['order'],$C=_0x4f1f8d=>_0x4f1f8d['sort'](WC),po=[],Nv=[],XC=()=>Nv['pop']()??[],Ag=_0x1107e6=>{_0x1107e6['length']=0x1f07*-0x1+0x36a+-0x1*-0x1b9d,Nv['push'](_0x1107e6);},Hh=class Hh extends Ie{constructor(_0x43fc8e,_0x3e2df6=Ms()){super(_0x43fc8e),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'gsplat'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'c',{}),h(this,'_app'),h(this,'_destroyin'+'g',!(0x63*0x33+0x2543*-0x1+0x118b)),h(this,'_guid',null),h(this,'_template',!(0x17f5*-0x1+0x2419+-0xc23*0x1)),(w['assert'](_0x3e2df6,'Could\x20not\x20'+'find\x20curre'+'nt\x20applica'+'tion'),this['_app']=_0x3e2df6);}['addCompone'+'nt'](_0x18e328,_0x56482f){const _0x149f4f=this['_app']['systems'][_0x18e328];return _0x149f4f?this['c'][_0x18e328]?(w['warn']('addCompone'+'nt:\x20Entity'+'\x20already\x20h'+'as\x20\x27'+_0x18e328+('\x27\x20componen'+'t')),null):_0x149f4f['addCompone'+'nt'](this,_0x56482f):(w['error']('addCompone'+'nt:\x20System'+'\x20\x27'+_0x18e328+('\x27\x20doesn\x27t\x20'+'exist')),null);}['removeComp'+'onent'](_0x54f617){const _0x5c84f9=this['_app']['systems'][_0x54f617];if(!_0x5c84f9){w['error']('removeComp'+'onent:\x20Sys'+'tem\x20\x27'+_0x54f617+('\x27\x20doesn\x27t\x20'+'exist'));return;}if(!this['c'][_0x54f617]){w['warn']('removeComp'+'onent:\x20Ent'+'ity\x20doesn\x27'+'t\x20have\x20\x27'+_0x54f617+('\x27\x20componen'+'t'));return;}_0x5c84f9['removeComp'+'onent'](this);}['findCompon'+'ent'](_0x3006c0){const _0xe82058=this['findOne'](_0x31b00f=>{var _0x37d41c;return(_0x37d41c=_0x31b00f['c'])==null?void(0x71*-0x1a+-0x25*-0x57+-0x1*0x119):_0x37d41c[_0x3006c0];});return _0xe82058&&_0xe82058['c'][_0x3006c0];}['findCompon'+'ents'](_0x57626a){return this['find'](_0x2b46d5=>{var _0x1ae1a5;return(_0x1ae1a5=_0x2b46d5['c'])==null?void(-0x175d+0x6a*-0x8+0x1aad*0x1):_0x1ae1a5[_0x57626a];})['map'](_0x442c29=>_0x442c29['c'][_0x57626a]);}['findScript'](_0x56740c){const _0x33f38d=this['findOne'](_0x450a14=>{var _0xe00223,_0x29ab2e;return(_0x29ab2e=(_0xe00223=_0x450a14['c'])==null?void(-0x1951*0x1+0x192b+-0x26*-0x1):_0xe00223['script'])==null?void(0x1568+-0x1980+0x418*0x1):_0x29ab2e['has'](_0x56740c);});return _0x33f38d==null?void(-0x1*0x4a3+-0x15b7+0x1a5a):_0x33f38d['c']['script']['get'](_0x56740c);}['findScript'+'s'](_0x31363a){return this['find'](_0x5c1d71=>{var _0x58f976,_0x20a921;return(_0x20a921=(_0x58f976=_0x5c1d71['c'])==null?void(-0x8f2+-0x2*0x11df+0x104*0x2c):_0x58f976['script'])==null?void(0x1dc2+0x4*-0x40c+-0xd92):_0x20a921['has'](_0x31363a);})['map'](_0x1afb4f=>_0x1afb4f['c']['script']['get'](_0x31363a));}['getGuid'](){return this['_guid']||this['setGuid'](Q0['create']()),this['_guid'];}['setGuid'](_0x922772){const _0x5e6b45=this['_app']['_entityInd'+'ex'];this['_guid']&&delete _0x5e6b45[this['_guid']],this['_guid']=_0x922772,_0x5e6b45[this['_guid']]=this;}['_notifyHie'+'rarchyStat'+'eChanged'](_0x23d9b3,_0x57a45f){let _0x50ff11=!(-0x1b00+0x1315+-0x1fb*-0x4);_0x23d9b3===this&&po['length']===0x1172+0x5f7*0x3+-0x2357&&(_0x50ff11=!(0x1ac7+-0x14*-0x6+0x1f*-0xe1)),_0x23d9b3['_beingEnab'+'led']=!(-0x222*0x8+-0x3*0x56b+0x1*0x2151),_0x23d9b3['_onHierarc'+'hyStateCha'+'nged'](_0x57a45f),_0x23d9b3['_onHierarc'+'hyStatePos'+'tChanged']&&po['push'](_0x23d9b3);const _0x4522ba=_0x23d9b3['_children'];for(let _0xd4f3c8=-0x799+0x16*0x18b+-0x5f*0x47,_0x582d34=_0x4522ba['length'];_0xd4f3c8<_0x582d34;_0xd4f3c8++)_0x4522ba[_0xd4f3c8]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x4522ba[_0xd4f3c8],_0x57a45f);if(_0x23d9b3['_beingEnab'+'led']=!(0xbd*0x2+0x676+-0x7ef),_0x50ff11){for(let _0x5239f9=0xff4+-0xc6a+-0x3*0x12e;_0x5239f9<po['length'];_0x5239f9++)po[_0x5239f9]['_onHierarc'+'hyStatePos'+'tChanged']();po['length']=0xe*0x72+-0x6*0x1ed+-0x3*-0x1c6;}}['_onHierarc'+'hyStateCha'+'nged'](_0x3bb21a){super['_onHierarc'+'hyStateCha'+'nged'](_0x3bb21a);const _0x40aa3b=this['_getSorted'+'Components']();for(let _0x1f29b1=-0x18e9+-0x1d8c+0x3*0x1227;_0x1f29b1<_0x40aa3b['length'];_0x1f29b1++){const _0x167900=_0x40aa3b[_0x1f29b1];_0x167900['enabled']&&(_0x3bb21a?_0x167900['onEnable']():_0x167900['onDisable']());}Ag(_0x40aa3b);}['_onHierarc'+'hyStatePos'+'tChanged'](){const _0xb9d17f=this['_getSorted'+'Components']();for(let _0xb1defb=-0x2*-0xb73+-0xf1*0xb+-0xd*0xf7;_0xb1defb<_0xb9d17f['length'];_0xb1defb++)_0xb9d17f[_0xb1defb]['onPostStat'+'eChange']();Ag(_0xb9d17f);}['findByGuid'](_0x324692){if(this['_guid']===_0x324692)return this;const _0x232505=this['_app']['_entityInd'+'ex'][_0x324692];return _0x232505&&(_0x232505===this||_0x232505['isDescenda'+'ntOf'](this))?_0x232505:null;}['destroy'](){this['_destroyin'+'g']=!(0xae7*0x1+-0x1689+0x5d1*0x2);for(const _0x1abe47 in this['c'])this['c'][_0x1abe47]['enabled']=!(0x15*-0x163+-0xd23+0x2a43);for(const _0x5954d7 in this['c'])this['c'][_0x5954d7]['system']['removeComp'+'onent'](this);super['destroy'](),this['_guid']&&delete this['_app']['_entityInd'+'ex'][this['_guid']],this['_destroyin'+'g']=!(0x1f93*0x1+-0x1907+-0x68b*0x1);}['clone'](){const _0x438713={},_0x5923dc=this['_cloneRecu'+'rsively'](_0x438713);return _0x438713[this['getGuid']()]=_0x5923dc,kv(this,this,_0x5923dc,_0x438713),_0x5923dc;}['_getSorted'+'Components'](){const _0x3f5917=this['c'],_0x565bfc=XC();let _0x5c1a71=-0xf*0xdf+-0x2b*0xad+0x20*0x151;for(const _0x1ad718 in _0x3f5917)if(_0x3f5917['hasOwnProp'+'erty'](_0x1ad718)){const _0x328f5d=_0x3f5917[_0x1ad718];_0x5c1a71|=_0x328f5d['constructo'+'r']['order']!==0x1b55+-0x2c5*-0x2+-0x37*0x99,_0x565bfc['push'](_0x328f5d);}return _0x5c1a71&&_0x565bfc['length']>0x2*-0xc76+0x3fb+0x14f2&&$C(_0x565bfc),_0x565bfc;}['_cloneRecu'+'rsively'](_0x4a083a){const _0xb503e1=new this['constructo'+'r'](void(-0x1af9+-0x1*0x821+0x231a),this['_app']);super['_cloneInte'+'rnal'](_0xb503e1);for(const _0x140348 in this['c'])this['c'][_0x140348]['system']['cloneCompo'+'nent'](this,_0xb503e1);for(let _0x3848ee=-0x21*-0xe5+-0x8e*0x13+-0x12fb*0x1;_0x3848ee<this['_children']['length'];_0x3848ee++){const _0x5c601c=this['_children'][_0x3848ee];if(_0x5c601c instanceof Hh){const _0xd6d2a8=_0x5c601c['_cloneRecu'+'rsively'](_0x4a083a);_0xb503e1['addChild'](_0xd6d2a8),_0x4a083a[_0x5c601c['getGuid']()]=_0xd6d2a8;}}return _0xb503e1;}};h(Hh,'EVENT_DEST'+'ROY','destroy');let lt=Hh;function kv(_0x5d222a,_0x2b0c75,_0x53cca6,_0x4956d2){if(_0x2b0c75 instanceof lt){const _0x4aed74=_0x2b0c75['c'];for(const _0x124157 in _0x4aed74){const _0x1dc206=_0x4aed74[_0x124157],_0x2857a5=_0x1dc206['system']['getPropert'+'iesOfType']('entity');for(let _0x527391=-0x1*0x1f01+0x2*-0x9de+0x1*0x32bd,_0x3b1b3d=_0x2857a5['length'];_0x527391<_0x3b1b3d;_0x527391++){const _0x29bab4=_0x2857a5[_0x527391]['name'],_0x2c36fe=_0x1dc206[_0x29bab4];if(!!_0x5d222a['findByGuid'](_0x2c36fe)){const _0x34d34f=_0x4956d2[_0x2c36fe]['getGuid']();_0x34d34f?_0x53cca6['c'][_0x124157][_0x29bab4]=_0x34d34f:w['warn']('Could\x20not\x20'+'find\x20corre'+'sponding\x20e'+'ntity\x20id\x20w'+'hen\x20resolv'+'ing\x20duplic'+'ated\x20entit'+'y\x20referenc'+'es');}}}_0x4aed74['script']&&_0x53cca6['script']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4aed74['script'],_0x4956d2),_0x4aed74['render']&&_0x53cca6['render']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4aed74['render'],_0x4956d2),_0x4aed74['button']&&_0x53cca6['button']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4aed74['button'],_0x4956d2),_0x4aed74['scrollview']&&_0x53cca6['scrollview']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4aed74['scrollview'],_0x4956d2),_0x4aed74['scrollbar']&&_0x53cca6['scrollbar']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4aed74['scrollbar'],_0x4956d2),_0x4aed74['anim']&&_0x53cca6['anim']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4aed74['anim'],_0x4956d2);const _0xf4d2b8=_0x2b0c75['children']['filter'](_0x5b4954=>_0x5b4954 instanceof lt),_0x75af7a=_0x53cca6['children']['filter'](_0x453902=>_0x453902 instanceof lt);for(let _0x314c81=0x5*-0x43a+-0x7*0x80+0x18a2,_0x4b85c2=_0xf4d2b8['length'];_0x314c81<_0x4b85c2;_0x314c81++)kv(_0x5d222a,_0xf4d2b8[_0x314c81],_0x75af7a[_0x314c81],_0x4956d2);}}class Cg{constructor(_0x27b14c,_0x105f07){h(this,'name'),h(this,'url'),h(this,'data',null),h(this,'_loading',!(-0x119a+-0x11*-0x1be+-0xc03)),h(this,'_onLoadedC'+'allbacks',[]),(this['name']=_0x27b14c,this['url']=_0x105f07);}get['loaded'](){return!!this['data'];}get['loading'](){return this['_loading'];}}class qC{constructor(_0x1ebb34){h(this,'_app'),h(this,'_list',[]),h(this,'_index',{}),h(this,'_urlIndex',{}),this['_app']=_0x1ebb34;}['destroy'](){this['_app']=null;}['list'](){return this['_list'];}['add'](_0x2a4729,_0x7eb5bb){if(this['_index']['hasOwnProp'+'erty'](_0x2a4729))return w['warn']('pc.SceneRe'+'gistry:\x20tr'+'ying\x20to\x20ad'+'d\x20more\x20tha'+'n\x20one\x20scen'+'e\x20called:\x20'+_0x2a4729),!(-0xf8c+0xb9f+0x2*0x1f7);const _0x409cce=new Cg(_0x2a4729,_0x7eb5bb),_0x197828=this['_list']['push'](_0x409cce);return this['_index'][_0x409cce['name']]=_0x197828-(-0x229c+0x4a0+-0x355*-0x9),this['_urlIndex'][_0x409cce['url']]=_0x197828-(-0x462+-0x6d3*-0x1+-0x270),!(-0x1*-0x1e6e+0x1811*-0x1+-0x1*0x65d);}['find'](_0x2f8756){return this['_index']['hasOwnProp'+'erty'](_0x2f8756)?this['_list'][this['_index'][_0x2f8756]]:null;}['findByUrl'](_0x15b621){return this['_urlIndex']['hasOwnProp'+'erty'](_0x15b621)?this['_list'][this['_urlIndex'][_0x15b621]]:null;}['remove'](_0xe6b847){if(this['_index']['hasOwnProp'+'erty'](_0xe6b847)){const _0x4c7ada=this['_index'][_0xe6b847];let _0x113fe2=this['_list'][_0x4c7ada];delete this['_urlIndex'][_0x113fe2['url']],delete this['_index'][_0xe6b847],this['_list']['splice'](_0x4c7ada,-0x56+-0x1f8d*-0x1+-0xeb*0x22);for(let _0x7fd9de=-0x1ad6+-0xe*-0x247+-0x50c;_0x7fd9de<this['_list']['length'];_0x7fd9de++)_0x113fe2=this['_list'][_0x7fd9de],this['_index'][_0x113fe2['name']]=_0x7fd9de,this['_urlIndex'][_0x113fe2['url']]=_0x7fd9de;}}['_loadScene'+'Data'](_0x4c5baa,_0x4ecc97,_0x531980){const _0x5a82cc=this['_app'];let _0xf07fba=_0x4c5baa;if(typeof _0x4c5baa=='string'&&(_0x4c5baa=this['findByUrl'](_0xf07fba)||this['find'](_0xf07fba)||new Cg('Untitled',_0xf07fba)),_0xf07fba=_0x4c5baa['url'],!_0xf07fba){_0x531980('Cannot\x20fin'+'d\x20scene\x20to'+'\x20load');return;}if(_0x4c5baa['loaded']){_0x531980(null,_0x4c5baa);return;}_0x5a82cc['assets']&&_0x5a82cc['assets']['prefix']&&!jn['test'](_0xf07fba)&&(_0xf07fba=xe['join'](_0x5a82cc['assets']['prefix'],_0xf07fba)),_0x4c5baa['_onLoadedC'+'allbacks']['push'](_0x531980),_0x4c5baa['_loading']||_0x5a82cc['loader']['getHandler']('hierarchy')['load'](_0xf07fba,(_0x39ed1d,_0x27d8f3)=>{_0x4c5baa['data']=_0x27d8f3,_0x4c5baa['_loading']=!(-0x22af+0x15*-0x61+0x3*0xe37);for(let _0x561d4c=-0xf2b*-0x1+0x13d2+-0x22fd;_0x561d4c<_0x4c5baa['_onLoadedC'+'allbacks']['length'];_0x561d4c++)_0x4c5baa['_onLoadedC'+'allbacks'][_0x561d4c](_0x39ed1d,_0x4c5baa);_0x4ecc97||(_0x4c5baa['data']=null),_0x4c5baa['_onLoadedC'+'allbacks']['length']=-0x4c*0x5c+0x118b+-0x1*-0x9c5;}),_0x4c5baa['_loading']=!(-0x1d89+-0x1315+-0x62*-0x7f);}['loadSceneD'+'ata'](_0x579c6d,_0x24ab93){this['_loadScene'+'Data'](_0x579c6d,!(0x583+0x1037*-0x1+0xab4),_0x24ab93);}['unloadScen'+'eData'](_0x22dc8d){typeof _0x22dc8d=='string'&&(_0x22dc8d=this['findByUrl'](_0x22dc8d)),_0x22dc8d&&(_0x22dc8d['data']=null);}['_loadScene'+'Hierarchy'](_0x193ff8,_0x14aac9,_0x80791b){this['_loadScene'+'Data'](_0x193ff8,!(0x6f0+0xc*0x1d4+0x13*-0x185),(_0x4e7b75,_0x286131)=>{if(_0x4e7b75){_0x80791b&&_0x80791b(_0x4e7b75);return;}_0x14aac9&&_0x14aac9(_0x286131);const _0xf468ed=this['_app'],_0xb56a5e=()=>{const _0x37a482=_0xf468ed['loader']['getHandler']('hierarchy');_0xf468ed['systems']['script']['preloading']=!(0x4*0x130+-0x262c+0x5d*0x5c);const _0x16a971=_0x37a482['open'](_0x286131['url'],_0x286131['data']);_0xf468ed['systems']['script']['preloading']=!(0x6b5+-0x2576+0x1ec2*0x1),_0xf468ed['loader']['clearCache'](_0x286131['url'],'hierarchy'),_0xf468ed['root']['addChild'](_0x16a971),_0xf468ed['systems']['fire']('initialize',_0x16a971),_0xf468ed['systems']['fire']('postInitia'+'lize',_0x16a971),_0xf468ed['systems']['fire']('postPostIn'+'itialize',_0x16a971),_0x80791b&&_0x80791b(null,_0x16a971);};_0xf468ed['_preloadSc'+'ripts'](_0x286131['data'],_0xb56a5e);});}['loadSceneH'+'ierarchy'](_0x24fd86,_0x5c82ef){this['_loadScene'+'Hierarchy'](_0x24fd86,null,_0x5c82ef);}['loadSceneS'+'ettings'](_0x5c8b5a,_0x3e7c44){this['_loadScene'+'Data'](_0x5c8b5a,!(0xafa*0x2+-0x542*0x7+0xedb),(_0x1c588f,_0x3703be)=>{_0x1c588f?_0x3e7c44&&_0x3e7c44(_0x1c588f):(this['_app']['applyScene'+'Settings'](_0x3703be['data']['settings']),_0x3e7c44&&_0x3e7c44(null));});}['changeScen'+'e'](_0x42f2ff,_0xdf771e){const _0x2b4253=this['_app'],_0x59d247=_0x3df641=>{const {children:_0x506625}=_0x2b4253['root'];for(;_0x506625['length'];)_0x506625[0x143e+-0x5*0x71e+0xf58]['destroy']();_0x2b4253['applyScene'+'Settings'](_0x3df641['data']['settings']);};this['_loadScene'+'Hierarchy'](_0x42f2ff,_0x59d247,_0xdf771e);}['loadScene'](_0x3b64e2,_0x18e5fb){const _0x35bd25=this['_app'],_0x11c6d7=_0x35bd25['loader']['getHandler']('scene');_0x35bd25['assets']&&_0x35bd25['assets']['prefix']&&!jn['test'](_0x3b64e2)&&(_0x3b64e2=xe['join'](_0x35bd25['assets']['prefix'],_0x3b64e2)),_0x11c6d7['load'](_0x3b64e2,(_0xb20fcc,_0x56d8c3)=>{if(_0xb20fcc)_0x18e5fb&&_0x18e5fb(_0xb20fcc);else{const _0x44410f=()=>{_0x35bd25['systems']['script']['preloading']=!(0x20de+-0x2075+-0x69);const _0x4b4fe2=_0x11c6d7['open'](_0x3b64e2,_0x56d8c3),_0x5b9280=this['findByUrl'](_0x3b64e2);_0x5b9280&&!_0x5b9280['loaded']&&(_0x5b9280['data']=_0x56d8c3),_0x35bd25['systems']['script']['preloading']=!(0x1bb*-0xd+-0xea8+0x74*0x52),_0x35bd25['loader']['clearCache'](_0x3b64e2,'scene'),_0x35bd25['loader']['patch']({'resource':_0x4b4fe2,'type':'scene'},_0x35bd25['assets']),_0x35bd25['root']['addChild'](_0x4b4fe2['root']),_0x35bd25['systems']['rigidbody']&&typeof Ammo<'u'&&_0x35bd25['systems']['rigidbody']['gravity']['set'](_0x4b4fe2['_gravity']['x'],_0x4b4fe2['_gravity']['y'],_0x4b4fe2['_gravity']['z']),_0x18e5fb&&_0x18e5fb(null,_0x4b4fe2);};_0x35bd25['_preloadSc'+'ripts'](_0x56d8c3,_0x44410f);}});}}class jC{constructor(_0x1001df){this['frame']={'fps':0x0,'ms':0x0,'dt':0x0,'updateStart':0x0,'updateTime':0x0,'renderStart':0x0,'renderTime':0x0,'physicsStart':0x0,'physicsTime':0x0,'cullTime':0x0,'sortTime':0x0,'skinTime':0x0,'morphTime':0x0,'instancingTime':0x0,'triangles':0x0,'otherPrimitives':0x0,'shaders':0x0,'materials':0x0,'cameras':0x0,'shadowMapUpdates':0x0,'shadowMapTime':0x0,'depthMapTime':0x0,'forwardTime':0x0,'lightClustersTime':0x0,'lightClusters':0x0,'_timeToCountFrames':0x0,'_fpsAccum':0x0},this['drawCalls']={'forward':0x0,'depth':0x0,'shadow':0x0,'immediate':0x0,'misc':0x0,'total':0x0,'skinned':0x0,'instanced':0x0,'removedByInstancing':0x0},this['misc']={'renderTargetCreationTime':0x0},this['particles']={'updatesPerFrame':0x0,'_updatesPerFrame':0x0,'frameTime':0x0,'_frameTime':0x0},this['shaders']=_0x1001df['_shaderSta'+'ts'],this['vram']=_0x1001df['_vram'],Object['defineProp'+'erty'](this['vram'],'totalUsed',{'get':function(){return this['tex']+this['vb']+this['ib'];}}),Object['defineProp'+'erty'](this['vram'],'geom',{'get':function(){return this['vb']+this['ib'];}});}get['scene'](){return Ms()['scene']['_stats'];}get['lightmappe'+'r'](){var _0x4ea3cc;return(_0x4ea3cc=Ms()['lightmappe'+'r'])==null?void(0x10e3+0x31*0x7+-0x91d*0x2):_0x4ea3cc['stats'];}get['batcher'](){const _0x49a206=Ms()['_batcher'];return _0x49a206?_0x49a206['_stats']:null;}}const YC='\x0auniform\x20f'+'loat\x20alpha'+'_ref;\x0a\x0avoi'+'d\x20alphaTes'+'t(float\x20a)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(a\x20<\x20alpha'+'_ref)\x20disc'+'ard;\x0a}\x0a',KC='\x0a\x0a#ifdef\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+'\x20AMBIENTSH'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20am'+'bientSH[9]'+';\x0a#endif\x0a\x0a'+'#if\x20LIT_AM'+'BIENT_SOUR'+'CE\x20==\x20ENVA'+'LATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fndef\x20ENV_'+'ATLAS\x0a\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_envAtlas'+';\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0avoid\x20addA'+'mbient(vec'+'3\x20worldNor'+'mal)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'AMBIENTSH\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20n\x20=\x20cu'+'beMapRotat'+'e(worldNor'+'mal);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20c'+'olor\x20=\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[0'+']\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ambi'+'entSH[1]\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[2'+']\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[3]\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[4]\x20*\x20'+'n.x\x20*\x20n.z\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ambien'+'tSH[5]\x20*\x20n'+'.z\x20*\x20n.y\x20+'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ambient'+'SH[6]\x20*\x20n.'+'y\x20*\x20n.x\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[7]\x20*\x20(3.'+'0\x20*\x20n.z\x20*\x20'+'n.z\x20-\x201.0)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[8]\x20*\x20'+'(n.x\x20*\x20n.x'+'\x20-\x20n.y\x20*\x20n'+'.y);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20processEn'+'vironment('+'max(color,'+'\x20vec3(0.0)'+'));\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_A'+'MBIENT_SOU'+'RCE\x20==\x20ENV'+'ALATLAS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dir\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20ma'+'pUv(toSphe'+'ricalUv(di'+'r),\x20vec4(1'+('28.0,\x20256.'+'0\x20+\x20128.0,'+'\x2064.0,\x2032.'+'0)\x20/\x20atlas'+'Size);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20raw\x20=\x20tex'+'ture2D(tex'+'ture_envAt'+'las,\x20uv);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20linear\x20'+'=\x20{ambient'+'Decode}(ra'+'w);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20p'+'rocessEnvi'+'ronment(li'+'near);\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'CONSTANT\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20light'+'_globalAmb'+'ient;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),ZC='\x0a\x0a#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_anisotr'+'opyIntensi'+'ty;\x0a\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20material_'+'anisotropy'+'Rotation;\x0a'+'#endif\x0a\x0avo'+'id\x20getAnis'+'otropy()\x20{'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x200'+'.0;\x0a\x20\x20\x20\x20dA'+'nisotropyR'+'otation\x20=\x20'+'vec2(1.0,\x20'+'0.0);\x0a\x0a#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20m'+'aterial_an'+'isotropyIn'+'tensity;\x0a\x20'+'\x20\x20\x20dAnisot'+'ropyRotati'+'on\x20=\x20mater'+'ial_anisot'+'ropyRotati'+'on;\x0a#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_ANI'+'SOTROPY_TE'+'XTURE\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropyTex\x20='+'\x20texture2D'+'Bias({STD_'+'ANISOTROPY'+'_TEXTURE_N'+'AME},\x20{STD'+'_ANISOTROP'+'Y_TEXTURE_'+'UV},\x20textu'+'reBias).rg'+'b;\x0a\x20\x20\x20\x20dAn'+'isotropy\x20*'+'=\x20anisotro'+'pyTex.b;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20a'+'nisotropyR'+'otationFro'+'mTex\x20=\x20ani'+'sotropyTex'+'.rg\x20*\x202.0\x20'+'-\x20vec2(1.0'+');\x0a\x20\x20\x20\x20mat'+'2\x20rotation'+'Matrix\x20=\x20m'+'at2(dAniso'+'tropyRotat'+'ion.x,\x20dAn'+'isotropyRo'+'tation.y,\x20'+'-dAnisotro'+'pyRotation'+'.y,\x20dAniso'+'tropyRotat'+'ion.x);\x0a\x20\x20'+'\x20\x20dAnisotr'+'opyRotatio'+'n\x20=\x20rotati'+'onMatrix\x20*'+'\x20anisotrop'+'yRotationF'+'romTex;\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20dA'+'nisotropy\x20'+'=\x20clamp(dA'+'nisotropy,'+'\x200.0,\x201.0)'+';\x0a}\x0a',QC='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_aoInten'+'sity;\x0a#end'+'if\x0a\x0a#ifdef'+'\x20STD_AODET'+'AIL_TEXTUR'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22deta'+'ilModesPS\x22'+'\x0a#endif\x0a\x0av'+'oid\x20getAO('+')\x20{\x0a\x20\x20\x20\x20dA'+'o\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'aoBase\x20=\x20t'+'exture2DBi'+'as({STD_AO'+'_TEXTURE_N'+'AME},\x20{STD'+'_AO_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_AO_TE'+'XTURE_CHAN'+'NEL};\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20aoDetail\x20'+'=\x20texture2'+'DBias({STD'+'_AODETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'AODETAIL_T'+'EXTURE_UV}'+',\x20textureB'+'ias).{STD_'+'AODETAIL_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'oBase\x20=\x20de'+'tailMode_{'+'STD_AODETA'+'IL_DETAILM'+'ODE}(vec3('+'aoBase),\x20v'+'ec3(aoDeta'+'il)).r;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_AO_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(STD_A'+'O_TEXTURE)'+'\x20||\x20define'+'d(STD_AO_V'+'ERTEX)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAo\x20='+'\x20mix(1.0,\x20'+'dAo,\x20mater'+'ial_aoInte'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',JC='\x0avoid\x20occl'+'udeDiffuse'+'(float\x20ao)'+'\x20{\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20ao;\x0a}\x0a',e1='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_occlud'+'eSpecularI'+'ntensity;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0av'+'oid\x20occlud'+'eSpecular('+'float\x20glos'+'s,\x20float\x20a'+'o,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir)\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'AO\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_OCCLUDE_'+'SPECULAR_F'+'LOAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20specOcc'+'\x20=\x20mix(1.0'+',\x20ao,\x20mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20specOc'+'c\x20=\x20ao;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_OCC'+'LUDE_SPECU'+'LAR\x20==\x20GLO'+'SSDEPENDEN'+'T\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20approx'+'imated\x20spe'+'cular\x20occl'+'usion\x20from'+'\x20AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20http:'+'//research'+'.tri-ace.c'+'om/Data/ce'+'dec2011_Re'+'altimePBR_'+'Implementa'+'tion_e.ppt'+'x\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20spec'+'Pow\x20=\x20exp2'+'(gloss\x20*\x201'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'specOcc\x20=\x20'+'saturate(p'+'ow(dot(wor'+'ldNormal,\x20'+'viewDir)\x20+'+'\x20ao,\x200.01\x20'+'*\x20specPow)'+'\x20-\x201.0\x20+\x20a'+'o);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecOcc\x20=\x20m'+'ix(1.0,\x20sp'+'ecOcc,\x20mat'+'erial_occl'+'udeSpecula'+'rIntensity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'*=\x20specOcc'+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20*=\x20specO'+'cc;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sSpecula'+'rLight\x20*=\x20'+'specOcc;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sReflecti'+'on\x20*=\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a'),t1='\x0a\x20\x20\x20\x20vec4\x20'+'dirLm\x20=\x20te'+'xture2D(te'+'xture_dirL'+'ightMap,\x20v'+'Uv1);\x0a\x0a\x20\x20\x20'+'\x20if\x20(bakeD'+'ir\x20>\x200.5)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dAtten'+'\x20>\x200.00001'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dirL'+'m.xyz\x20=\x20di'+'rLm.xyz\x20*\x20'+'2.0\x20-\x20vec3'+'(1.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20sa'+'turate(dAt'+'ten);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20nor'+'malize(dLi'+'ghtDirNorm'+'W.xyz*dAtt'+'en\x20+\x20dirLm'+'.xyz*dirLm'+'.w)\x20*\x200.5\x20'+'+\x20vec3(0.5'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20dirLm.w\x20'+'+\x20dAtten;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.a\x20=\x20m'+'ax(gl_Frag'+'Color.a,\x201'+'.0\x20/\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20dir'+'Lm;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20dirLm.'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color.a\x20=\x20'+'max(dirLm.'+'w,\x20dAtten\x20'+'>\x200.00001\x20'+'?\x20(1.0/255'+'.0)\x20:\x200.0)'+';\x0a\x20\x20\x20\x20}\x0a',s1='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'ambientBak'+'eOcclusion'+'Contrast\x20+'+'\x201.0,\x200.0)'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'vec3(ambie'+'ntBakeOccl'+'usionBrigh'+'tness);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20sa'+'turate(dDi'+'ffuseLight'+');\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20dAmbie'+'ntLight;\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHTM'+'AP_RGBM\x0a\x20\x20'+'\x20\x20//\x20encod'+'e\x20to\x20RGBM\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.rgb'+'\x20=\x20dDiffus'+'eLight;\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor.rgb\x20='+'\x20pow(gl_Fr'+'agColor.rg'+'b,\x20vec3(0.'+'5));\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20/=\x208'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.a\x20=\x20clamp'+'(\x20max(\x20max'+'(\x20gl_FragC'+'olor.r,\x20gl'+'_FragColor'+'.g\x20),\x20max('+'\x20gl_FragCo'+'lor.b,\x201.0'+'\x20/\x20255.0\x20)'+'\x20),\x200.0,1.'+'0\x20);\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.a\x20=\x20ceil'+'(gl_FragCo'+'lor.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20/=\x20gl'+'_FragColor'+'.a;\x0a#else\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(dDiffu'+'seLight,\x201'+'.0);\x0a#endi'+'f\x0a',i1='\x0auniform\x20v'+'ec3\x20view_p'+'osition;\x0a\x0a'+'uniform\x20ve'+'c3\x20light_g'+'lobalAmbie'+'nt;\x0a\x0afloat'+'\x20square(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'x*x;\x0a}\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0ave'+'c3\x20saturat'+'e(vec3\x20x)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3(0.0'+'),\x20vec3(1.'+'0));\x0a}\x0a',r1='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'ec2\x20vMask;'+'\x0avarying\x20v'+'ec2\x20vTiled'+'Uv;\x0a\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0au'+'niform\x20med'+'iump\x20vec2\x20'+'outerScale'+';\x0auniform\x20'+'mediump\x20ve'+'c4\x20atlasRe'+'ct;\x0a\x0avec2\x20'+'nineSliced'+'Uv;\x0a',a1='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vec2\x20vMa'+'sk;\x0avaryin'+'g\x20vec2\x20vTi'+'ledUv;\x0a\x0aun'+'iform\x20medi'+'ump\x20vec4\x20i'+'nnerOffset'+';\x0auniform\x20'+'mediump\x20ve'+'c2\x20outerSc'+'ale;\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20atla'+'sRect;\x0a\x0ave'+'c2\x20nineSli'+'cedUv;\x0a',n1='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afloat\x20'+'bayer2(vec'+'2\x20p)\x20{\x0a\x20\x20\x20'+'\x20return\x20mo'+'d(2.0\x20*\x20p.'+'y\x20+\x20p.x\x20+\x20'+'1.0,\x204.0);'+'\x0a}\x0a\x0a//\x204x4'+'\x20matrix,\x20p'+'\x20-\x20pixel\x20c'+'oordinate\x0a'+'float\x20baye'+'r4(vec2\x20p)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20p1\x20=\x20mod'+'(p,\x202.0);\x0a'+'\x20\x20\x20\x20vec2\x20p'+'2\x20=\x20floor('+'0.5\x20*\x20mod('+'p,\x204.0));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afloat\x20bay'+'er8(vec2\x20p'+')\x20{\x0a\x20\x20\x20\x20ve'+'c2\x20p1\x20=\x20mo'+'d(p,\x202.0);'+'\x0a\x20\x20\x20\x20vec2\x20'+'p2\x20=\x20floor'+'(0.5\x20*\x20mod'+'(p,\x204.0));'+'\x0a\x20\x20\x20\x20vec2\x20'+'p4\x20=\x20floor'+'(0.25\x20*\x20mo'+'d(p,\x208.0))'+';\x0a\x20\x20\x20\x20retu'+'rn\x204.0\x20*\x20('+'4.0\x20*\x20baye'+'r2(p1)\x20+\x20b'+'ayer2(p2))'+'\x20+\x20bayer2('+'p4);\x0a}\x0a',o1='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0auni'+'form\x20vec2\x20'+'pixelOffse'+'t;\x0a\x0a#ifdef'+'\x20GAUSS\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20weigh'+'t[{SAMPLES'+'}];\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20m'+'oments\x20=\x20v'+'ec3(0.0);\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vUv0\x20-'+'\x20pixelOffs'+'et\x20*\x20(floa'+'t({SAMPLES'+'})\x20*\x200.5);'+'\x0a\x20\x20\x20\x20for\x20('+'int\x20i\x20=\x200;'+'\x20i\x20<\x20{SAMP'+'LES};\x20i++)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20c\x20=\x20'+'texture2D('+'source,\x20uv'+'\x20+\x20pixelOf'+'fset\x20*\x20flo'+'at(i));\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20GAUSS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20moments\x20'+'+=\x20c.xyz\x20*'+'\x20weight[i]'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'ments\x20+=\x20c'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'GAUSS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20*=\x201.0\x20/'+'\x20float({SA'+'MPLES});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(momen'+'ts.x,\x20mome'+'nts.y,\x20mom'+'ents.z,\x201.'+'0);\x0a}\x0a',l1='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oat;\x0a\x0avoid'+'\x20getClearC'+'oat()\x20{\x0a\x20\x20'+'\x20\x20ccSpecul'+'arity\x20=\x20ma'+'terial_cle'+'arCoat;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_CLEARC'+'OAT_TEXTUR'+'E\x0a\x20\x20\x20\x20ccSp'+'ecularity\x20'+'*=\x20texture'+'2DBias({ST'+'D_CLEARCOA'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_CL'+'EARCOAT_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20*=\x20satu'+'rate(vVert'+'exColor.{S'+'TD_CLEARCO'+'AT_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',c1='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oatGloss;\x0a'+'\x0avoid\x20getC'+'learCoatGl'+'ossiness()'+'\x20{\x0a\x20\x20\x20\x20ccG'+'lossiness\x20'+'=\x20material'+'_clearCoat'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE\x0a\x20\x20\x20\x20'+'ccGlossine'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_CLEAR'+'COATGLOSS_'+'TEXTURE_NA'+'ME},\x20{STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_CLEAR'+'COATGLOSS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_CLEAR'+'COATGLOSS_'+'INVERT\x0a\x20\x20\x20'+'\x20ccGlossin'+'ess\x20=\x201.0\x20'+'-\x20ccGlossi'+'ness;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20+=\x200.'+'0000001;\x0a}'+'\x0a',h1='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0aunif'+'orm\x20float\x20'+'material_c'+'learCoatBu'+'mpiness;\x0a#'+'endif\x0a\x0avoi'+'d\x20getClear'+'CoatNormal'+'()\x20{\x0a#ifde'+'f\x20STD_CLEA'+'RCOATNORMA'+'L_TEXTURE\x0a'+'\x20\x20\x20\x20vec3\x20n'+'ormalMap\x20='+'\x20{STD_CLEA'+'RCOATNORMA'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_UV}'+',\x20textureB'+'ias));\x0a\x20\x20\x20'+'\x20normalMap'+'\x20=\x20mix(vec'+'3(0.0,\x200.0'+',\x201.0),\x20no'+'rmalMap,\x20m'+'aterial_cl'+'earCoatBum'+'piness);\x0a\x20'+'\x20\x20\x20ccNorma'+'lW\x20=\x20norma'+'lize(dTBN\x20'+'*\x20normalMa'+'p);\x0a#else\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20dVer'+'texNormalW'+';\x0a#endif\x0a}'+'\x0a',d1='\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0avec2\x20ge'+'tCubemapFa'+'ceCoordina'+'tes(const\x20'+'vec3\x20dir,\x20'+'out\x20float\x20'+'faceIndex,'+'\x20out\x20vec2\x20'+'tileOffset'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20vAbs\x20=\x20'+'abs(dir);\x0a'+'\x20\x20\x20\x20float\x20'+'ma;\x0a\x20\x20\x20\x20ve'+'c2\x20uv;\x0a\x20\x20\x20'+'\x20if\x20(vAbs.'+'z\x20>=\x20vAbs.'+'x\x20&&\x20vAbs.'+'z\x20>=\x20vAbs.'+'y)\x20{\x20\x20\x20//\x20'+'front\x20/\x20ba'+'ck\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20faceInde'+'x\x20=\x20dir.z\x20'+'<\x200.0\x20?\x205.'+'0\x20:\x204.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2(dir.z\x20'+'<\x200.0\x20?\x20-d'+'ir.x\x20:\x20dir'+'.x,\x20-dir.y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.x\x20=\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20t'+'ileOffset.'+'y\x20=\x20dir.z\x20'+'<\x200.0\x20?\x201.'+'0\x20:\x200.0;\x0a\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if(vAbs.y'+'\x20>=\x20vAbs.x'+')\x20{\x20\x20//\x20to'+'p\x20index\x202,'+'\x20bottom\x20in'+'dex\x203\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20faceI'+'ndex\x20=\x20dir'+'.y\x20<\x200.0\x20?'+'\x203.0\x20:\x202.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ma\x20=\x200.5\x20/'+'\x20vAbs.y;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uv\x20'+'=\x20vec2(dir'+'.x,\x20dir.y\x20'+'<\x200.0\x20?\x20-d'+'ir.z\x20:\x20dir'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20tileOff'+'set.x\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.y\x20=\x20dir.'+'y\x20<\x200.0\x20?\x20'+'1.0\x20:\x200.0;'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'\x20=\x200.5\x20/\x20v'+'Abs.x;\x0a\x20\x20\x20'+('\x20\x20\x20\x20\x20uv\x20=\x20'+'vec2(dir.x'+'\x20<\x200.0\x20?\x20d'+'ir.z\x20:\x20-di'+'r.z,\x20-dir.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20tileOffs'+'et.x\x20=\x200.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'tileOffset'+'.y\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20uv'+'\x20*\x20ma\x20+\x200.'+'5;\x0a}\x0a\x0a//\x20c'+'onverts\x20un'+'normalized'+'\x20direction'+'\x20vector\x20to'+'\x20a\x20texture'+'\x20coordinat'+'e\x20for\x20a\x20cu'+'bemap\x20face'+'\x20stored\x20wi'+'thin\x20textu'+'re\x20atlas\x20d'+'escribed\x20b'+'y\x20the\x20view'+'port\x0avec2\x20'+'getCubemap'+'AtlasCoord'+'inates(con'+'st\x20vec3\x20om'+'niAtlasVie'+'wport,\x20flo'+'at\x20shadowE'+'dgePixels,'+'\x20float\x20sha'+'dowTexture'+'Resolution'+',\x20const\x20ve'+'c3\x20dir)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20faceIndex'+';\x0a\x20\x20\x20\x20vec2'+'\x20tileOffse'+'t;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapFac'+'eCoordinat'+'es(dir,\x20fa'+'ceIndex,\x20t'+'ileOffset)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'move\x20uv\x20co'+'ordinates\x20'+'inwards\x20in'+'side\x20to\x20co'+'mpensate\x20f'+'or\x20larger\x20'+'fov\x20when\x20r'+'endering\x20s'+'hadow\x20into'+'\x20atlas\x0a\x20\x20\x20'+'\x20float\x20atl'+'asFaceSize'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20tileSi'+'ze\x20=\x20shado'+'wTextureRe'+'solution\x20*'+'\x20atlasFace'+'Size;\x0a\x20\x20\x20\x20'+'float\x20offs'+'et\x20=\x20shado'+'wEdgePixel'+'s\x20/\x20tileSi'+'ze;\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv\x20*\x20ve'+'c2(1.0\x20-\x20o'+'ffset\x20*\x202.'+'0)\x20+\x20vec2('+'offset\x20*\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20*'+'=\x20atlasFac'+'eSize;\x0a\x0a\x20\x20'+'\x20\x20//\x20offse'+'t\x20into\x20fac'+'e\x20of\x20the\x20a')+('tlas\x20(3x3\x20'+'grid)\x0a\x20\x20\x20\x20'+'uv\x20+=\x20tile'+'Offset\x20*\x20a'+'tlasFaceSi'+'ze;\x0a\x0a\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nto\x20the\x20at'+'las\x20viewpo'+'rt\x0a\x20\x20\x20\x20uv\x20'+'+=\x20omniAtl'+'asViewport'+'.xy;\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a'),f1='\x0avec3\x20_get'+'CookieClus'+'tered(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20uv,\x20floa'+'t\x20intensit'+'y,\x20vec4\x20co'+'okieChanne'+'l)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20pixel\x20'+'=\x20mix(vec4'+'(1.0),\x20tex'+'ture2DLod('+'tex,\x20uv,\x200'+'.0),\x20inten'+'sity);\x0a\x20\x20\x20'+'\x20bool\x20isRg'+'b\x20=\x20dot(co'+'okieChanne'+'l.rgb,\x20vec'+'3(1.0))\x20=='+'\x203.0;\x0a\x20\x20\x20\x20'+'return\x20isR'+'gb\x20?\x20pixel'+'.rgb\x20:\x20vec'+'3(dot(pixe'+'l,\x20cookieC'+'hannel));\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0ave'+'c3\x20getCook'+'ie2DCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20mat4\x20'+'transform,'+'\x20vec3\x20worl'+'dPosition,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieC'+'hannel)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20p'+'rojPos\x20=\x20t'+'ransform\x20*'+'\x20vec4(worl'+'dPosition,'+'\x201.0);\x0a\x20\x20\x20'+'\x20return\x20_g'+'etCookieCl'+'ustered(TE'+'XTURE_PASS'+'(tex),\x20pro'+'jPos.xy\x20/\x20'+'projPos.w,'+'\x20intensity'+',\x20cookieCh'+'annel);\x0a}\x0a'+'\x0a//\x20getCoo'+'kie\x20for\x20cl'+'ustered\x20om'+'ni\x20light\x20w'+'ith\x20the\x20co'+'okie\x20textu'+'re\x20being\x20s'+'tored\x20in\x20t'+'he\x20cookie\x20'+'atlas\x0avec3'+'\x20getCookie'+'CubeCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec3\x20'+'dir,\x20float'+'\x20intensity'+',\x20vec4\x20coo'+'kieChannel'+',\x20float\x20sh'+'adowTextur'+'eResolutio'+'n,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20omniAtla'+'sViewport)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+('tureResolu'+'tion,\x20dir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getCoo'+'kieCluster'+'ed(TEXTURE'+'_PASS(tex)'+',\x20uv,\x20inte'+'nsity,\x20coo'+'kieChannel'+');\x0a}\x0a'),u1='\x0a\x0avec3\x20_ge'+'tShadowCoo'+'rdPerspZbu'+'ffer(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20wP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20shado'+'wMatrix\x20*\x20'+'vec4(wPos,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'yz\x20/=\x20proj'+'Pos.w;\x0a\x20\x20\x20'+'\x20return\x20pr'+'ojPos.xyz;'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20bias\x20i'+'s\x20already\x20'+'applied\x20on'+'\x20render\x0a}\x0a'+'\x0avec3\x20getS'+'hadowCoord'+'PerspZbuff'+'erNormalOf'+'fset(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20no'+'rmal)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20wPo'+'s\x20=\x20vPosit'+'ionW\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowCoordPe'+'rspZbuffer'+'(shadowMat'+'rix,\x20shado'+'wParams,\x20w'+'Pos);\x0a}\x0a\x0av'+'ec3\x20normal'+'OffsetPoin'+'tShadow(ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20lightPos'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm,\x20vec3'+'\x20normal)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20distScale'+'\x20=\x20length('+'lightDir);'+'\x0a\x20\x20\x20\x20vec3\x20'+'wPos\x20=\x20vPo'+'sitionW\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x20/'+'/0.02\x0a\x20\x20\x20\x20'+'vec3\x20dir\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0afloa'+'t\x20getShado'+'wOmniClust'+'eredPCF1(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20omniAtla'+'sViewport,'+'\x20float\x20sha'+'dowEdgePix'+'els,\x20vec3\x20'+'lightDir)\x20'+'{\x0a\x0a\x20\x20\x20\x20flo'+'at\x20shadowT'+('extureReso'+'lution\x20=\x20s'+'hadowParam'+'s.x;\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etCubemapA'+'tlasCoordi'+'nates(omni'+'AtlasViewp'+'ort,\x20shado'+'wEdgePixel'+'s,\x20shadowT'+'extureReso'+'lution,\x20li'+'ghtDir);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'shadowZ\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(uv,\x20sha'+'dowZ));\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF3'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF3'+'x3(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF5)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF5'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s')+('hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF5'+'x5(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a/'+'/\x20Clustere'+'d\x20Spot\x20Sam'+'pling\x20usin'+'g\x20atlas\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF1)\x0a\x0afl'+'oat\x20getSha'+'dowSpotClu'+'steredPCF1'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSha'+'dow(shadow'+'Map,\x20shado'+'wCoord);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x0af'+'loat\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF3x3'+'(SHADOWMAP'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a}\x0a\x0a#'+'endif\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x0afloa'+'t\x20getShado'+'wSpotClust'+'eredPCF5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC')+('oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a}'+'\x0a#endif\x0a'),p1='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20clu'+'sterWorldT'+'exture;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20lightsTe'+'xture;\x0a\x0a#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x20\x20\x20\x20//\x20TO'+'DO:\x20when\x20V'+'SM\x20shadow\x20'+'is\x20support'+'ed,\x20it\x20nee'+'ds\x20to\x20use\x20'+'sampler2D\x20'+'in\x20webgl2\x0a'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'DShadow\x20sh'+'adowAtlasT'+'exture;\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20CLUSTER'+'_COOKIES\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20cookieAtl'+'asTexture;'+'\x0a#endif\x0a\x0au'+'niform\x20int'+'\x20clusterMa'+'xCells;\x0a\x0a/'+'/\x201.0\x20if\x20c'+'lustered\x20l'+'ighting\x20ca'+'n\x20be\x20skipp'+'ed\x20(0\x20ligh'+'ts\x20in\x20the\x20'+'clusters)\x0a'+'uniform\x20fl'+'oat\x20cluste'+'rSkip;\x0a\x0aun'+'iform\x20vec3'+'\x20clusterCe'+'llsCountBy'+'BoundsSize'+';\x0auniform\x20'+'vec3\x20clust'+'erTextureS'+'ize;\x0aunifo'+'rm\x20vec3\x20cl'+'usterBound'+'sMin;\x0aunif'+'orm\x20vec3\x20c'+'lusterBoun'+'dsDelta;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsDot;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsMax;\x0au'+'niform\x20vec'+'2\x20shadowAt'+'lasParams;'+'\x0a\x0a//\x20struc'+'ture\x20stori'+'ng\x20light\x20p'+'roperties\x20'+'of\x20a\x20clust'+'ered\x20light'+'\x0a//\x20it\x27s\x20s'+('orted\x20to\x20h'+'ave\x20all\x20ve'+'ctors\x20alig'+'ned\x20to\x204\x20f'+'loats\x20to\x20l'+'imit\x20paddi'+'ng\x0astruct\x20'+'ClusterLig'+'htData\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x2032b'+'it\x20of\x20flag'+'s\x0a\x20\x20\x20\x20uint'+'\x20flags;\x0a\x0a\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20siz'+'es\x20/\x20orien'+'tation\x0a\x20\x20\x20'+'\x20vec3\x20half'+'Width;\x0a\x0a\x20\x20'+'\x20\x20bool\x20isS'+'pot;\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20sizes\x20'+'/\x20orientat'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20halfHei'+'ght;\x0a\x0a\x20\x20\x20\x20'+'//\x20light\x20i'+'ndex\x0a\x20\x20\x20\x20i'+'nt\x20lightIn'+'dex;\x0a\x0a\x20\x20\x20\x20'+'//\x20world\x20s'+'pace\x20posit'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20positio'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20shape\x0a\x20\x20'+'\x20\x20uint\x20sha'+'pe;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20direct'+'ion\x20(spot\x20'+'light\x20only'+')\x0a\x20\x20\x20\x20vec3'+'\x20direction'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20foll'+'ow\x20mode\x0a\x20\x20'+'\x20\x20bool\x20fal'+'loffModeLi'+'near;\x0a\x0a\x20\x20\x20'+'\x20//\x20color\x0a'+'\x20\x20\x20\x20vec3\x20c'+'olor;\x0a\x0a\x20\x20\x20'+'\x20//\x200.0\x20if'+'\x20the\x20light'+'\x20doesn\x27t\x20c'+'ast\x20shadow'+'s\x0a\x20\x20\x20\x20floa'+'t\x20shadowIn'+'tensity;\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20vec3\x20om'+'niAtlasVie'+'wport;\x0a\x0a\x20\x20'+'\x20\x20//\x20range'+'\x20of\x20the\x20li'+'ght\x0a\x20\x20\x20\x20fl'+'oat\x20range;'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'hannel\x20mas'+'k\x20-\x20one\x20of'+'\x20the\x20chann'+'els\x20has\x201,'+'\x20the\x20other'+'s\x20are\x200\x0a\x20\x20'+'\x20\x20vec4\x20coo'+'kieChannel'+'Mask;\x0a\x0a\x20\x20\x20'+'\x20//\x20compre'+'ssed\x20biase'+'s,\x20two\x20haf'+'-floats\x20st'+'ored\x20in\x20a\x20'+'float\x0a\x20\x20\x20\x20'+'float\x20bias'+'esData;\x0a\x0a\x20')+('\x20\x20\x20//\x20shad'+'ow\x20bias\x20va'+'lues\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wBias;\x0a\x20\x20\x20'+'\x20float\x20sha'+'dowNormalB'+'ias;\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20f'+'loat\x20angle'+'sData;\x0a\x0a\x20\x20'+'\x20\x20//\x20spot\x20'+'light\x20inne'+'r\x20and\x20oute'+'r\x20angle\x20co'+'sine\x0a\x20\x20\x20\x20f'+'loat\x20inner'+'ConeAngleC'+'os;\x0a\x20\x20\x20\x20fl'+'oat\x20outerC'+'oneAngleCo'+'s;\x0a\x0a\x20\x20\x20\x20//'+'\x20intensity'+'\x20of\x20the\x20co'+'okie\x0a\x20\x20\x20\x20f'+'loat\x20cooki'+'eIntensity'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20mask'+'\x0a\x20\x20\x20\x20//flo'+'at\x20mask;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Dynamic;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Lightmappe'+'d;\x0a};\x0a\x0a//\x20'+'Note:\x20on\x20s'+'ome\x20device'+'s\x20(tested\x20'+'on\x20Pixel\x203'+'A\x20XL),\x20thi'+'s\x20matrix\x20w'+'hen\x20stored'+'\x20inside\x20th'+'e\x20light\x20st'+'ruct\x20has\x20l'+'ower\x20preci'+'sion\x20compa'+'red\x20to\x0a//\x20'+'when\x20store'+'d\x20outside,'+'\x20so\x20we\x20sto'+'re\x20it\x20outs'+'ide\x20to\x20avo'+'id\x20spot\x20sh'+'adow\x20flick'+'ering.\x20Thi'+'s\x20might\x20ne'+'ed\x20to\x20be\x20d'+'one\x20to\x20oth'+'er\x20/\x20all\x20m'+'embers\x0a//\x20'+'of\x20the\x20str'+'ucture\x20if\x20'+'further\x20si'+'milar\x20issu'+'es\x20are\x20obs'+'erved.\x0a\x0a//'+'\x20shadow\x20(s'+'pot\x20light\x20'+'only)\x20/\x20co'+'okie\x20proje'+'ction\x20matr'+'ix\x0amat4\x20li'+'ghtProject'+'ionMatrix;'+'\x0a\x0avec4\x20sam'+'pleLightTe'+'xtureF(con'+'st\x20Cluster'+'LightData\x20'+'clusterLig'+'htData,\x20in'+'t\x20index)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20texelFet'+'ch(lightsT'+'exture,\x20iv'+'ec2(index,'+'\x20clusterLi'+'ghtData.li'+'ghtIndex),'+'\x200);\x0a}\x0a\x0avo'+'id\x20decodeC'+'lusterLigh')+('tCore(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData,\x20flo'+'at\x20lightIn'+'dex)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20index\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.li'+'ghtIndex\x20='+'\x20int(light'+'Index);\x0a\x0a\x20'+'\x20\x20\x20//\x20samp'+'le\x20data\x20en'+'coding\x20hal'+'f-float\x20va'+'lues\x20into\x20'+'32bit\x20uint'+'s\x0a\x20\x20\x20\x20vec4'+'\x20halfData\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_COL'+'OR_ANGLES_'+'BIAS});\x0a\x0a\x20'+'\x20\x20\x20//\x20stor'+'e\x20floats\x20w'+'e\x20decode\x20l'+'ater\x20as\x20ne'+'eded\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.angl'+'esData\x20=\x20h'+'alfData.z;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.biasesDa'+'ta\x20=\x20halfD'+'ata.w;\x0a\x0a\x20\x20'+'\x20\x20//\x20decom'+'press\x20colo'+'r\x20half-flo'+'ats\x0a\x20\x20\x20\x20ve'+'c2\x20colorRG'+'\x20=\x20unpackH'+'alf2x16(fl'+'oatBitsToU'+'int(halfDa'+'ta.x));\x0a\x20\x20'+'\x20\x20vec2\x20col'+'orB_\x20=\x20unp'+'ackHalf2x1'+'6(floatBit'+'sToUint(ha'+'lfData.y))'+';\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.color\x20='+'\x20vec3(colo'+'rRG,\x20color'+'B_.x)\x20*\x20{L'+'IGHT_COLOR'+'_DIVIDER};'+'\x0a\x0a\x20\x20\x20\x20//\x20p'+'osition\x20an'+'d\x20range,\x20f'+'ull\x20floats'+'\x0a\x20\x20\x20\x20vec4\x20'+'lightPosRa'+'nge\x20=\x20samp'+'leLightTex'+'tureF(clus'+'terLightDa'+'ta,\x20{CLUST'+'ER_TEXTURE'+'_POSITION_'+'RANGE});\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'position\x20='+'\x20lightPosR'+'ange.xyz;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.range\x20=\x20l'+'ightPosRan'+'ge.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20d'+'irection\x20&'+'\x20flags\x20dat'+'a\x0a\x20\x20\x20\x20vec4'+'\x20lightDir_'+'Flags\x20=\x20sa'+'mpleLightT'+'extureF(cl')+('usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_DIRECTI'+'ON_FLAGS})'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'spot\x20light'+'\x20direction'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.directio'+'n\x20=\x20lightD'+'ir_Flags.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x2032bit\x20fl'+'ags\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20floatBi'+'tsToUint(l'+'ightDir_Fl'+'ags.w);\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sSpot\x20=\x20(c'+'lusterLigh'+'tData.flag'+'s\x20&\x20(1u\x20<<'+'\x2030u))\x20!=\x20'+'0u;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.shape'+'\x20=\x20(cluste'+'rLightData'+'.flags\x20>>\x20'+'28u)\x20&\x200x3'+'u;\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.fallof'+'fModeLinea'+'r\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2027u'+'))\x20==\x200u;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.shadowInt'+'ensity\x20=\x20f'+'loat((clus'+'terLightDa'+'ta.flags\x20>'+'>\x200u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eIntensity'+'\x20=\x20float(('+'clusterLig'+'htData.fla'+'gs\x20>>\x208u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sDynamic\x20='+'\x20(clusterL'+'ightData.f'+'lags\x20&\x20(1u'+'\x20<<\x2022u))\x20'+'!=\x200u;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.is'+'Lightmappe'+'d\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2021u'+'))\x20!=\x200u;\x0a'+'}\x0a\x0avoid\x20de'+'codeCluste'+'rLightSpot'+'(inout\x20Clu'+'sterLightD'+'ata\x20cluste'+'rLightData'+')\x20{\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20cos\x20ang'+'les\x0a\x20\x20\x20\x20ve'+'c2\x20angles\x20'+'=\x20unpackHa'+'lf2x16(flo'+'atBitsToUi'+'nt(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight')+('Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0av'+'oid\x20decode'+'ClusterLig'+'htOmniAtla'+'sViewport('+'inout\x20Clus'+'terLightDa'+'ta\x20cluster'+'LightData)'+'\x20{\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.omniAt'+'lasViewpor'+'t\x20=\x20sample'+'LightTextu'+'reF(cluste'+'rLightData'+',\x20{CLUSTER'+'_TEXTURE_P'+'ROJ_MAT_0}'+').xyz;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtAreaDat'+'a(inout\x20Cl'+'usterLight'+'Data\x20clust'+'erLightDat'+'a)\x20{\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.half'+'Width\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_AREA_DA'+'TA_WIDTH})'+'.xyz;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.hal'+'fHeight\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData,\x20{C'+'LUSTER_TEX'+'TURE_AREA_'+'DATA_HEIGH'+'T}).xyz;\x0a}'+'\x0a\x0avoid\x20dec'+'odeCluster'+'LightProje'+'ctionMatri'+'xData(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20m0\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData,\x20{CL'+'USTER_TEXT'+'URE_PROJ_M'+'AT_0});\x0a\x20\x20'+'\x20\x20vec4\x20m1\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_PRO'+'J_MAT_1});'+'\x0a\x20\x20\x20\x20vec4\x20'+'m2\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a,\x20{CLUSTE'+'R_TEXTURE_'+'PROJ_MAT_2'+'});\x0a\x20\x20\x20\x20ve'+'c4\x20m3\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight')+('Data,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4('+'m0,\x20m1,\x20m2'+',\x20m3);\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtShadowD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20//\x20s'+'hadow\x20bias'+'es\x0a\x20\x20\x20\x20vec'+'2\x20biases\x20='+'\x20unpackHal'+'f2x16(floa'+'tBitsToUin'+'t(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20extra'+'ct\x20channel'+'\x20mask\x20from'+'\x20flags\x0a\x20\x20\x20'+'\x20uint\x20cook'+'ieFlags\x20=\x20'+'(clusterLi'+'ghtData.fl'+'ags\x20>>\x2023u'+')\x20&\x200x0Fu;'+'\x20\x20//\x204bits'+',\x20each\x20bit'+'\x20enables\x20a'+'\x20channel\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'cookieChan'+'nelMask\x20=\x20'+'vec4(uvec4'+'(cookieFla'+'gs)\x20&\x20uvec'+'4(1u,\x202u,\x20'+'4u,\x208u));\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.cookieCha'+'nnelMask\x20='+'\x20step(1.0,'+'\x20clusterLi'+'ghtData.co'+'okieChanne'+'lMask);\x20\x20/'+'/\x20Normaliz'+'e\x20to\x200.0\x20o'+'r\x201.0\x0a}\x0a\x0av'+'oid\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20Cluster'+'LightData\x20'+'light,\x20\x0a\x20\x20'+'\x20\x20vec3\x20wor'+'ldNormal,\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'viewDir,\x20\x0a'+'\x20\x20\x20\x20vec3\x20r'+'eflectionD'+'ir,\x0a#if\x20de'+'fined(LIT_'+'CLEARCOAT)'+'\x0a\x20\x20\x20\x20vec3\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20')+('\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20mat3\x20tb'+'n,\x20\x0a#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20vec'+'3\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20vec3\x20cl'+'earcoat_wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20float'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20float\x20sh'+'een_gloss,'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce_intensi'+'ty\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20vec'+'3(1.0);\x0a\x20\x20'+'\x20\x20float\x20di'+'ffuseAtten'+'uation\x20=\x201'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20fallof'+'fAttenuati'+'on\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20omn'+'i\x20part\x20of\x20'+'the\x20light\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ightDirW\x20='+'\x20evalOmniL'+'ight(light'+'.position)'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'ormW\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20')+('else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fall'+'offAttenua'+'tion\x20=\x20get'+'FalloffLin'+'ear(light.'+'range,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20getFa'+'lloffInvSq'+'uared(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_AREALIGH'+'TS\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shape\x20!='+'\x20{LIGHTSHA'+'PE_PUNCTUA'+'L})\x20{\x20//\x20a'+'rea\x20light\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20hand'+'le\x20light\x20s'+'hape\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20diffuse'+'Attenuatio'+'n\x20=\x20getRec'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirW,\x20lig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'DISK})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getD'+'iskLightDi'+'ffuse(worl'+'dNormal,\x20v'+'iewDir,\x20li'+'ghtDirW,\x20l'+'ightDirNor'+'mW)\x20*\x2016.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20{\x20//\x20sphe'+'re\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getSphereL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20g'+'etLightDif'+'fuse(world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+');\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spot'+'\x20light\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtSpot(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20*=\x20'+'getSpotEff'+'ect(light.'+'direction,'+'\x20light.inn'+'erConeAngl'+'eCos,\x20ligh'+'t.outerCon'+'eAngleCos,'+'\x20lightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_COOK'+'IES)\x20||\x20de'+'fined(CLUS'+'TER_SHADOW'+'S)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20shadow'+'\x20/\x20cookie\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shadowIn'+'tensity\x20>\x20'+'0.0\x20||\x20lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'ared\x20shado'+'w\x20/\x20cookie'+'\x20data\x20depe'+'nds\x20on\x20lig'+'ht\x20type\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightOmniAt'+'lasViewpor'+'t(light);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20shadowTex'+'tureResolu'+'tion\x20=\x20sha'+'dowAtlasPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadowEdge'+'Pixels\x20=\x20s'+'hadowAtlas'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_COOKIES\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'cookie\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20de'+'codeCluste'+'rLightCook'+'ieData(lig'+'ht);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.isSp'+'ot)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'cookieAtte'+'nuation\x20=\x20'+'getCookie2'+'DClustered'+'(TEXTURE_P'+'ASS(cookie'+'AtlasTextu'+'re),\x20light'+'Projection'+'Matrix,\x20vP'+'ositionW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20cookieAt'+'tenuation\x20'+'=\x20getCooki'+'eCubeClust'+'ered(TEXTU'+'RE_PASS(co'+'okieAtlasT'+'exture),\x20l'+'ightDirW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask,\x20sh'+'adowTextur'+'eResolutio'+'n,\x20shadowE'+'dgePixels,'+'\x20light.omn'+'iAtlasView'+'port);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20shadow\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shadow'+'Intensity\x20'+'>\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d')+('ecodeClust'+'erLightSha'+'dowData(li'+'ght);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20shadowPa'+'rams\x20=\x20vec'+'4(shadowTe'+'xtureResol'+'ution,\x20lig'+'ht.shadowN'+'ormalBias,'+'\x20light.sha'+'dowBias,\x201'+'.0\x20/\x20light'+'.range);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'isSpot)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ot\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'hadowCoord'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat'+'rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F1)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CF1(SHADOW'+'MAP_PASS(s'+'hadowAtlas'+'Texture),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20de'+'fined(CLUS'+'TER_SHADOW'+'_TYPE_PCF3'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_PASS(sha'+'dowAtlasTe'+'xture),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#elif\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF5('+'SHADOWMAP_'+'PASS(shado'+'wAtlasText'+'ure),\x20shad'+'owCoord,\x20s'+'hadowParam')+('s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCSS)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20shadow\x20='+'\x20getShadow'+'SpotCluste'+'redPCSS(SH'+'ADOWMAP_PA'+'SS(shadowA'+'tlasTextur'+'e),\x20shadow'+'Coord,\x20sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20m'+'ix(1.0,\x20sh'+'adow,\x20ligh'+'t.shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20om'+'ni\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20d'+'ir\x20=\x20norma'+'lOffsetPoi'+'ntShadow(s'+'hadowParam'+'s,\x20light.p'+'osition,\x20l'+'ightDirW,\x20'+'lightDirNo'+'rmW,\x20geome'+'tricNormal'+');\x20\x20//\x20nor'+'malBias\x20ad'+'justed\x20for'+'\x20distance\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_SHADO'+'W_TYPE_PCF'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20sha'+'dow\x20=\x20getS'+'hadowOmniC'+'lusteredPC'+'F1(SHADOWM'+'AP_PASS(sh'+'adowAtlasT'+'exture),\x20s'+'hadowParam'+'s,\x20light.o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20dir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#eli'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF3)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadowOm'+'niClustere'+'dPCF3(SHAD'+'OWMAP_PASS'+'(shadowAtl'+'asTexture)'+',\x20shadowPa'+'rams,\x20ligh'+'t.omniAtla'+'sViewport,')+('\x20shadowEdg'+'ePixels,\x20d'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20shadow\x20'+'=\x20getShado'+'wOmniClust'+'eredPCF5(S'+'HADOWMAP_P'+'ASS(shadow'+'AtlasTextu'+'re),\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20*=\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20areaDi'+'ffuse\x20=\x20(d'+'iffuseAtte'+'nuation\x20*\x20'+'falloffAtt'+'enuation)\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaDiffuse\x20'+'=\x20mix(area'+'Diffuse,\x20v'+'ec3(0),\x20dL'+'TCSpecFres'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20dif'+'fuse\x20-\x20it\x20'+'does\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20')+('into\x20specu'+'lar\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20a'+'reaDiffuse'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20and\x20clear'+'\x20coat\x20are\x20'+'material\x20s'+'ettings\x20an'+'d\x20get\x20incl'+'uded\x20by\x20a\x20'+'define\x20bas'+'ed\x20on\x20the\x20'+'material\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20specular'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20areaLig'+'htSpecular'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'RECT})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecular\x20=\x20g'+'etRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20area'+'LightSpecu'+'lar\x20=\x20getD'+'iskLightSp'+'ecular(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x20//\x20sp'+'here\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getSp'+'hereLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp'+'ecFres\x20*\x20a'+'reaLightSp'+'ecular\x20*\x20f'+'alloffAtte'+'nuation\x20*\x20'+'light.colo'+'r\x20*\x20cookie'+'Attenuatio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x20clear'+'\x20coat\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20areaLigh'+'tSpecularC')+('C;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shape\x20'+'==\x20{LIGHTS'+'HAPE_RECT}'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getRectLig'+'htSpecular'+'(clearcoat'+'_worldNorm'+'al,\x20viewDi'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(light'+'.shape\x20==\x20'+'{LIGHTSHAP'+'E_DISK})\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'arCC\x20=\x20get'+'DiskLightS'+'pecular(cl'+'earcoat_wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x20'+'//\x20sphere\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaLi'+'ghtSpecula'+'rCC\x20=\x20getS'+'phereLight'+'Specular(c'+'learcoat_w'+'orldNormal'+',\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20+=\x20ccLTCS'+'pecFres\x20*\x20'+'areaLightS'+'pecularCC\x20'+'*\x20falloffA'+'ttenuation'+'\x20*\x20light.c'+'olor\x20\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20{\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'unctualDif'+'fuse\x20=\x20fal'+'loffAttenu'+'ation\x20*\x20li'+'ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'CLUSTER_AR'+'EALIGHTS)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20punctual')+('Diffuse\x20=\x20'+'mix(punctu'+'alDiffuse,'+'\x20vec3(0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20punctu'+'alDiffuse;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20and\x20cle'+'ar\x20coat\x20ar'+'e\x20material'+'\x20settings\x20'+'and\x20get\x20in'+'cluded\x20by\x20'+'a\x20define\x20b'+'ased\x20on\x20th'+'e\x20material'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20halfD'+'ir\x20=\x20norma'+'lize(-ligh'+'tDirNormW\x20'+'+\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR_FRESNEL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htSpecular'+'(halfDir,\x20'+'reflection'+'Dir,\x20world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation\x20*'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'viewDir,\x20h'+'alfDir),\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descence_i'+'ntensity\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecular('+'halfDir,\x20c'+'learcoatRe'+'flectionDi'+'r,\x20clearco'+'at_worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'clearcoat_'+'gloss,\x20tbn'+')\x20*\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation\x20*\x20g'+'etFresnelC'+'C(dot(view'+'Dir,\x20halfD'+'ir));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20getLi'+'ghtSpecula'+'r(halfDir,'+'\x20clearcoat'+'Reflection'+'Dir,\x20clear'+'coat_world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20clearcoa'+'t_gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HEEN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec')+('ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'ir,\x20worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNormW,'+'\x20sheen_glo'+'ss)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20Wri'+'te\x20to\x20glob'+'al\x20attenua'+'tion\x20value'+'s\x20(for\x20lig'+'htmapper)\x0a'+'\x20\x20\x20\x20dAtten'+'\x20=\x20falloff'+'Attenuatio'+'n;\x0a\x20\x20\x20\x20dLi'+'ghtDirNorm'+'W\x20=\x20lightD'+'irNormW;\x0a}'+'\x0a\x0avoid\x20eva'+'luateClust'+'erLight(\x0a\x20'+'\x20\x20\x20float\x20l'+'ightIndex,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20worldNorm'+'al,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20viewDi'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20reflect'+'ionDir,\x20\x0a#'+'if\x20defined'+'(LIT_CLEAR'+'COAT)\x0a\x20\x20\x20\x20'+'vec3\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'float\x20glos'+'s,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20specula'+'rity,\x20\x0a\x20\x20\x20'+'\x20vec3\x20geom'+'etricNorma'+'l,\x20\x0a\x20\x20\x20\x20ma'+'t3\x20tbn,\x20\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20ve'+'c3\x20clearco'+'at_worldNo'+'rmal,\x0a\x20\x20\x20\x20'+'float\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20flo'+'at\x20sheen_g'+'loss,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escence_in'+'tensity\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'decode\x20cor'+'e\x20light\x20da'+'ta\x20from\x20te'+'xtures\x0a\x20\x20\x20'+'\x20ClusterLi'+'ghtData\x20cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(cluster'+'LightData,'+'\x20lightInde'+'x);\x0a\x0a\x20\x20\x20\x20/'+'/\x20evaluate'+'\x20light\x20if\x20'+'it\x20uses\x20ac'+'cepted\x20lig'+'ht\x20mask\x0a\x20\x20'+'\x20\x20#ifdef\x20C')+('LUSTER_MES'+'H_DYNAMIC_'+'LIGHTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20bool\x20'+'acceptLigh'+'tMask\x20=\x20cl'+'usterLight'+'Data.isDyn'+'amic;\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20bool\x20a'+'cceptLight'+'Mask\x20=\x20clu'+'sterLightD'+'ata.isLigh'+'tmapped;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20if\x20(a'+'cceptLight'+'Mask)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clusterLi'+'ghtData,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20worldNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vi'+'ewDir,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'reflection'+'Dir,\x20\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x20\x0a'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_worldNorm'+'al,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sheen'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a}\x0a\x0avoid'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20reflecti'+'onDir,\x20\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20v'+'ec3\x20clearc'+'oatReflect'+'ionDir,\x0a#e'+'ndif\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20mat'+'3\x20tbn,\x20\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a#end')+('if\x0a\x20\x20\x20\x20vec'+'3\x20clearcoa'+'t_worldNor'+'mal,\x0a\x20\x20\x20\x20f'+'loat\x20clear'+'coat_gloss'+',\x0a\x20\x20\x20\x20floa'+'t\x20sheen_gl'+'oss,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scence_int'+'ensity\x0a)\x20{'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'kip\x20lights'+'\x20if\x20no\x20lig'+'hts\x20at\x20all'+'\x0a\x20\x20\x20\x20if\x20(c'+'lusterSkip'+'\x20>\x200.5)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20positi'+'on\x20to\x203d\x20i'+'nteger\x20cel'+'l\x20cordinat'+'es\x20in\x20the\x20'+'cluster\x20st'+'ructure\x0a\x20\x20'+'\x20\x20vec3\x20cel'+'lCoords\x20=\x20'+'floor((vPo'+'sitionW\x20-\x20'+'clusterBou'+'ndsMin)\x20*\x20'+'clusterCel'+'lsCountByB'+'oundsSize)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'no\x20lightin'+'g\x20when\x20cel'+'l\x20coordina'+'te\x20is\x20out\x20'+'of\x20range\x0a\x20'+'\x20\x20\x20if\x20(!(a'+'ny(lessTha'+'n(cellCoor'+'ds,\x20vec3(0'+'.0)))\x20||\x20a'+'ny(greater'+'ThanEqual('+'cellCoords'+',\x20clusterC'+'ellsMax)))'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cell'+'\x20index\x20(ma'+'pping\x20from'+'\x203d\x20cell\x20c'+'oordinates'+'\x20to\x20linear'+'\x20memory)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20cellInd'+'ex\x20=\x20dot(c'+'lusterCell'+'sDot,\x20cell'+'Coords);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20convert\x20c'+'ell\x20index\x20'+'to\x20uv\x20coor'+'dinates\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20clusterV'+'\x20=\x20floor(c'+'ellIndex\x20*'+'\x20clusterTe'+'xtureSize.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20cl'+'usterU\x20=\x20c'+'ellIndex\x20-'+'\x20(clusterV'+'\x20*\x20cluster'+'TextureSiz'+'e.x);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20lo'+'op\x20over\x20ma'+'ximum\x20numb'+'er\x20of\x20ligh'+'t\x20cells\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20light'+'CellIndex\x20'+'=\x200;\x20light'+'CellIndex\x20'+'<\x20clusterM'+'axCells;\x20l'+'ightCellIn')+('dex++)\x20{\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20using'+'\x20a\x20single\x20'+'channel\x20te'+'xture\x20with'+'\x20data\x20in\x20r'+'ed\x20channel'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20l'+'ightIndex\x20'+'=\x20texelFet'+'ch(cluster'+'WorldTextu'+'re,\x20ivec2('+'int(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20clusterV'+'),\x200).x;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'tIndex\x20<=\x20'+'0.0)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20break;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20evaluateC'+'lusterLigh'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightIndex\x20'+'*\x20255.0,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel,\x0a#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20cl'+'earcoat_gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sheen_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),m1='\x0avec3\x20comb'+'ineColor(v'+'ec3\x20albedo'+',\x20vec3\x20she'+'enSpecular'+'ity,\x20float'+'\x20clearcoat'+'Specularit'+'y)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20ret\x20=\x20'+'vec3(0);\x0a#'+'ifdef\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20ret\x20'+'+=\x20(dDiffu'+'seLight\x20-\x20'+'light_glob'+'alAmbient)'+'\x20*\x20albedo\x20'+'+\x20material'+'_ambient\x20*'+'\x20light_glo'+'balAmbient'+';\x0a#else\x0a\x20\x20'+'\x20\x20ret\x20+=\x20a'+'lbedo\x20*\x20dD'+'iffuseLigh'+'t;\x0a#endif\x0a'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20ret\x20+='+'\x20dSpecular'+'Light;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_REFLE'+'CTIONS\x0a\x20\x20\x20'+'\x20ret\x20+=\x20dR'+'eflection.'+'rgb\x20*\x20dRef'+'lection.a;'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'float\x20shee'+'nScaling\x20='+'\x201.0\x20-\x20max'+'(max(sheen'+'Specularit'+'y.r,\x20sheen'+'Specularit'+'y.g),\x20shee'+'nSpeculari'+'ty.b)\x20*\x200.'+'157;\x0a\x20\x20\x20\x20r'+'et\x20=\x20ret\x20*'+'\x20sheenScal'+'ing\x20+\x20(sSp'+'ecularLigh'+'t\x20+\x20sRefle'+'ction.rgb)'+'\x20*\x20sheenSp'+'ecularity;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20float\x20c'+'learCoatSc'+'aling\x20=\x201.'+'0\x20-\x20ccFres'+'nel\x20*\x20clea'+'rcoatSpecu'+'larity;\x0a\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20clearC'+'oatScaling'+'\x20+\x20(ccSpec'+'ularLight\x20'+'+\x20ccReflec'+'tion)\x20*\x20cl'+'earcoatSpe'+'cularity;\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20return\x20r'+'et;\x0a}\x0a',_1='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blitT'+'exture;\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20texture'+'2D(blitTex'+'ture,\x20uv0)'+';\x0a\x20\x20\x20\x20}\x0a',g1='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'erCube\x20bli'+'tTexture;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20inv'+'ViewProj;\x0a'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20vec4('+'uv0\x20*\x202.0\x20'+'-\x201.0,\x200.5'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20worldPos\x20'+'=\x20invViewP'+'roj\x20*\x20proj'+'Pos;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20te'+'xtureCube('+'blitTextur'+'e,\x20worldPo'+'s.xyz);\x0a\x20\x20'+'\x20\x20}\x0a',S1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uv0'+'.y\x20=\x201.0\x20-'+'\x20uv0.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20}\x0a',y1='\x0a//\x20light\x20'+'cookie\x20fun'+'ctionality'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0avec4'+'\x20getCookie'+'2D(sampler'+'2D\x20tex,\x20ma'+'t4\x20transfo'+'rm,\x20float\x20'+'intensity)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20projPos\x20'+'=\x20transfor'+'m\x20*\x20vec4(v'+'PositionW,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'y\x20/=\x20projP'+'os.w;\x0a\x20\x20\x20\x20'+'return\x20mix'+'(vec4(1.0)'+',\x20texture2'+'D(tex,\x20pro'+'jPos.xy),\x20'+'intensity)'+';\x0a}\x0a\x0avec4\x20'+'getCookie2'+'DClip(samp'+'ler2D\x20tex,'+'\x20mat4\x20tran'+'sform,\x20flo'+'at\x20intensi'+'ty)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20trans'+'form\x20*\x20vec'+'4(vPositio'+'nW,\x201.0);\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20/=\x20pr'+'ojPos.w;\x0a\x20'+'\x20\x20\x20if\x20(pro'+'jPos.x\x20<\x200'+'.0\x20||\x20proj'+'Pos.x\x20>\x201.'+'0\x20||\x20projP'+'os.y\x20<\x200.0'+'\x20||\x20projPo'+'s.y\x20>\x201.0\x20'+'||\x20projPos'+'.z\x20<\x200.0)\x20'+'return\x20vec'+'4(0.0);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(vec4(1.'+'0),\x20textur'+'e2D(tex,\x20p'+'rojPos.xy)'+',\x20intensit'+'y);\x0a}\x0a\x0avec'+'4\x20getCooki'+'e2DXform(s'+'ampler2D\x20t'+'ex,\x20mat4\x20t'+'ransform,\x20'+'float\x20inte'+'nsity,\x20vec'+'4\x20cookieMa'+'trix,\x20vec2'+'\x20cookieOff'+'set)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20proj'+'Pos\x20=\x20tran'+'sform\x20*\x20ve'+'c4(vPositi'+'onW,\x201.0);'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20/=\x20p'+'rojPos.w;\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20+=\x20co'+'okieOffset'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookie2D'+'ClipXform('+('sampler2D\x20'+'tex,\x20mat4\x20'+'transform,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieM'+'atrix,\x20vec'+'2\x20cookieOf'+'fset)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'jPos\x20=\x20tra'+'nsform\x20*\x20v'+'ec4(vPosit'+'ionW,\x201.0)'+';\x0a\x20\x20\x20\x20proj'+'Pos.xy\x20/=\x20'+'projPos.w;'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20+=\x20c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20if\x20'+'(projPos.x'+'\x20<\x200.0\x20||\x20'+'projPos.x\x20'+'>\x201.0\x20||\x20p'+'rojPos.y\x20<'+'\x200.0\x20||\x20pr'+'ojPos.y\x20>\x20'+'1.0\x20||\x20pro'+'jPos.z\x20<\x200'+'.0)\x20return'+'\x20vec4(0.0)'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookieCu'+'be(sampler'+'Cube\x20tex,\x20'+'mat4\x20trans'+'form,\x20floa'+'t\x20intensit'+'y)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20mix('+'vec4(1.0),'+'\x20textureCu'+'be(tex,\x20dL'+'ightDirNor'+'mW\x20*\x20mat3('+'transform)'+'),\x20intensi'+'ty);\x0a}\x0a'),v1='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20envBoxM'+'in;\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20envBoxMax'+';\x0a#endif\x0a\x0a'+'vec3\x20cubeM'+'apProject('+'vec3\x20nrdir'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_CUB'+'EMAP_PROJE'+'CTION\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20c'+'ubeMapRota'+'te(nrdir);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20LIT_CUBEM'+'AP_PROJECT'+'ION\x20==\x20BOX'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'nrdir\x20=\x20cu'+'beMapRotat'+'e(nrdir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20rbmax\x20'+'=\x20(envBoxM'+'ax\x20-\x20vPosi'+'tionW)\x20/\x20n'+'rdir;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20r'+'bmin\x20=\x20(en'+'vBoxMin\x20-\x20'+'vPositionW'+')\x20/\x20nrdir;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20rbmin'+'max\x20=\x20mix('+'rbmin,\x20rbm'+'ax,\x20vec3(g'+'reaterThan'+'(nrdir,\x20ve'+'c3(0.0))))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20fa\x20='+'\x20min(min(r'+'bminmax.x,'+'\x20rbminmax.'+'y),\x20rbminm'+'ax.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20posonbox\x20'+'=\x20vPositio'+'nW\x20+\x20nrdir'+'\x20*\x20fa;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envBoxPos\x20'+'=\x20(envBoxM'+'in\x20+\x20envBo'+'xMax)\x20*\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20no'+'rmalize(po'+'sonbox\x20-\x20e'+'nvBoxPos);'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',x1='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20mat3\x20cu'+'beMapRotat'+'ionMatrix;'+'\x0a#endif\x0a\x0av'+'ec3\x20cubeMa'+'pRotate(ve'+'c3\x20refDir)'+'\x20{\x0a#ifdef\x20'+'CUBEMAP_RO'+'TATION\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'#else\x0a\x20\x20\x20\x20'+'return\x20ref'+'Dir;\x0a#endi'+'f\x0a}\x0a',T1='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0agl_FragCo'+'lor\x20=\x20vec4'+'(litArgs_a'+'lbedo\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_WORLD'+'_NORMAL_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(litArgs'+'_worldNorm'+'al\x20*\x200.5\x20+'+'\x200.5,\x201.0)'+';\x0a#endif\x0a\x0a'+'#ifdef\x20DEB'+'UG_OPACITY'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(vec3'+'(litArgs_o'+'pacity)\x20,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_SPE'+'CULARITY_P'+'ASS\x0agl_Fra'+'gColor\x20=\x20v'+'ec4(litArg'+'s_specular'+'ity,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_GLOSS_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(vec3(li'+'tArgs_glos'+'s)\x20,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_METALNES'+'S_PASS\x0agl_'+'FragColor\x20'+'=\x20vec4(vec'+'3(litArgs_'+'metalness)'+'\x20,\x201.0);\x0a#'+'endif\x0a\x0a#if'+'def\x20DEBUG_'+'AO_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ve'+'c3(litArgs'+'_ao)\x20,\x201.0'+');\x0a#endif\x0a'+'\x0a#ifdef\x20DE'+'BUG_EMISSI'+'ON_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ga'+'mmaCorrect'+'Output(lit'+'Args_emiss'+'ion),\x201.0)'+';\x0a#endif\x0a',w1='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0ali'+'tArgs_albe'+'do\x20=\x20vec3('+'0.5);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_UV0'+'_PASS\x0a#ifd'+'ef\x20VARYING'+'_VUV0\x0alitA'+'rgs_albedo'+'\x20=\x20vec3(vU'+'v0,\x200);\x0a#e'+'lse\x0alitArg'+'s_albedo\x20='+'\x20vec3(0);\x0a'+'#endif\x0a#en'+'dif\x0a',E1='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0avec3\x20'+'decodeLine'+'ar(vec4\x20ra'+'w)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw.'+'rgb;\x0a}\x0a\x0afl'+'oat\x20decode'+'Gamma(floa'+'t\x20raw)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'pow(raw,\x202'+'.2);\x0a}\x0a\x0ave'+'c3\x20decodeG'+'amma(vec3\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w(raw,\x20vec'+'3(2.2));\x0a}'+'\x0a\x0avec3\x20dec'+'odeGamma(v'+'ec4\x20raw)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(raw.'+'xyz,\x20vec3('+'2.2));\x0a}\x0a\x0a'+'vec3\x20decod'+'eRGBM(vec4'+'\x20raw)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20col'+'or\x20=\x20(8.0\x20'+'*\x20raw.a)\x20*'+'\x20raw.rgb;\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0av'+'ec3\x20decode'+'RGBP(vec4\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20colo'+'r\x20=\x20raw.rg'+'b\x20*\x20(-raw.'+'a\x20*\x207.0\x20+\x20'+'8.0);\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBE'+'(vec4\x20raw)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(raw.a\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec3(0.0'+',\x200.0,\x200.0'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20raw.xyz\x20*'+'\x20pow(2.0,\x20'+'raw.w\x20*\x2025'+'5.0\x20-\x20128.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0avec4\x20pa'+'ssThrough('+'vec4\x20raw)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20raw;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'Z(vec4\x20nma'+'p)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20nmap'+'.xyz\x20*\x202.0'+'\x20-\x201.0;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'(vec4\x20nmap'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20normal;'+'\x0a\x20\x20\x20\x20norma'+'l.xy\x20=\x20nma'+'p.wy\x20*\x202.0'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20normal.z'+'\x20=\x20sqrt(1.'+'0\x20-\x20clamp('+'dot(normal'+'.xy,\x20norma'+'l.xy),\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20return\x20'+'normal;\x0a}\x0a'+'\x0a#endif\x0a',b1='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0avec3\x20'+'detailMode'+'_mul(vec3\x20'+'c1,\x20vec3\x20c'+'2)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20c1\x20*'+'\x20c2;\x0a}\x0a\x0ave'+'c3\x20detailM'+'ode_add(ve'+'c3\x20c1,\x20vec'+'3\x20c2)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'1\x20+\x20c2;\x0a}\x0a'+'\x0a//\x20https:'+'//en.wikip'+'edia.org/w'+'iki/Blend_'+'modes#Scre'+'en\x0avec3\x20de'+'tailMode_s'+'creen(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x201.0'+'\x20-\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2);\x0a}\x0a\x0a/'+'/\x20https://'+'en.wikiped'+'ia.org/wik'+'i/Blend_mo'+'des#Overla'+'y\x0avec3\x20det'+'ailMode_ov'+'erlay(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(1.0\x20-\x202.0'+'\x20*\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2),\x202.0\x20'+'*\x20c1\x20*\x20c2,'+'\x20step(c1,\x20'+'vec3(0.5))'+');\x0a}\x0a\x0avec3'+'\x20detailMod'+'e_min(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20min'+'(c1,\x20c2);\x0a'+'}\x0a\x0avec3\x20de'+'tailMode_m'+'ax(vec3\x20c1'+',\x20vec3\x20c2)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20max(c1'+',\x20c2);\x0a}\x0a\x0a'+'#endif\x0a',A1='\x0auniform\x20v'+'ec3\x20materi'+'al_diffuse'+';\x0a\x0a#ifdef\x20'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'detailMode'+'sPS\x22\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20mate'+'rial_diffu'+'se.rgb;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_DIFFUS'+'E_TEXTURE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20albedoT'+'exture\x20=\x20{'+'STD_DIFFUS'+'E_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_DIF'+'FUSE_TEXTU'+'RE_NAME},\x20'+'{STD_DIFFU'+'SE_TEXTURE'+'_UV},\x20text'+'ureBias)).'+'{STD_DIFFU'+'SE_TEXTURE'+'_CHANNEL};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSEDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'albedoDeta'+'il\x20=\x20{STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_DECODE}('+'texture2DB'+'ias({STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'DETAIL_TEX'+'TURE_UV},\x20'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20*=\x20albe'+'doTexture;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSE_VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dAlbedo\x20*'+'=\x20gammaCor'+'rectInput('+'saturate(v'+'VertexColo'+'r.{STD_DIF'+'FUSE_VERTE'+'X_CHANNEL}'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',C1='\x0auniform\x20v'+'ec3\x20materi'+'al_emissiv'+'e;\x0auniform'+'\x20float\x20mat'+'erial_emis'+'siveIntens'+'ity;\x0a\x0avoid'+'\x20getEmissi'+'on()\x20{\x0a\x20\x20\x20'+'\x20dEmission'+'\x20=\x20materia'+'l_emissive'+'\x20*\x20materia'+'l_emissive'+'Intensity;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_TEXT'+'URE\x0a\x20\x20\x20\x20dE'+'mission\x20*='+'\x20{STD_EMIS'+'SIVE_TEXTU'+'RE_DECODE}'+'(texture2D'+'Bias({STD_'+'EMISSIVE_T'+'EXTURE_NAM'+'E},\x20{STD_E'+'MISSIVE_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'EMISSIVE_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_EMISSI'+'VE_VERTEX\x0a'+'\x20\x20\x20\x20dEmiss'+'ion\x20*=\x20gam'+'maCorrectI'+'nput(satur'+'ate(vVerte'+'xColor.{ST'+'D_EMISSIVE'+'_VERTEX_CH'+'ANNEL}));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a',P1='\x0avec4\x20enco'+'deLinear(v'+'ec3\x20source'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'source,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeGa'+'mma(vec3\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec4(pow(s'+'ource\x20+\x200.'+'0000001,\x20v'+'ec3(1.0\x20/\x20'+'2.2)),\x201.0'+');\x0a}\x0a\x0avec4'+'\x20encodeRGB'+'M(vec3\x20sou'+'rce)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20result;'+'\x0a\x20\x20\x20\x20resul'+'t.rgb\x20=\x20po'+'w(source.r'+'gb,\x20vec3(0'+'.5));\x0a\x20\x20\x20\x20'+'result.rgb'+'\x20*=\x201.0\x20/\x20'+'8.0;\x0a\x0a\x20\x20\x20\x20'+'result.a\x20='+'\x20saturate('+'\x20max(\x20max('+'\x20result.r,'+'\x20result.g\x20'+'),\x20max(\x20re'+'sult.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20)\x20);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20ceil(res'+'ult.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x0a\x20\x20\x20\x20r'+'esult.rgb\x20'+'/=\x20result.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0avec4\x20'+'encodeRGBP'+'(vec3\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'//\x20convert'+'\x20incoming\x20'+'linear\x20to\x20'+'gamma(ish)'+'\x0a\x20\x20\x20\x20vec3\x20'+'gamma\x20=\x20po'+'w(source,\x20'+'vec3(0.5))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'the\x20maximu'+'m\x20componen'+'t\x20clamped\x20'+'to\x201..8\x0a\x20\x20'+'\x20\x20float\x20ma'+'xVal\x20=\x20min'+'(8.0,\x20max('+'1.0,\x20max(g'+'amma.x,\x20ma'+'x(gamma.y,'+'\x20gamma.z))'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20storage\x20'+'factor\x0a\x20\x20\x20'+'\x20float\x20v\x20='+'\x201.0\x20-\x20((m'+'axVal\x20-\x201.'+'0)\x20/\x207.0);'+'\x0a\x0a\x20\x20\x20\x20//\x20r'+'ound\x20the\x20v'+'alue\x20for\x20s'+'torage\x20in\x20'+'8bit\x20chann'+'el\x0a\x20\x20\x20\x20v\x20='+'\x20ceil(v\x20*\x20'+'255.0)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(gamma\x20/'+'\x20(-v\x20*\x207.0'+'\x20+\x208.0),\x20v'+');\x20\x20\x20\x20\x0a}\x0a\x0a'+'vec4\x20encod'+'eRGBE(vec3'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20float'+('\x20maxVal\x20=\x20'+'max(source'+'.x,\x20max(so'+'urce.y,\x20so'+'urce.z));\x0a'+'\x20\x20\x20\x20if\x20(ma'+'xVal\x20<\x201e-'+'32)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec4(0,\x200'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20e\x20=\x20'+'ceil(log2('+'maxVal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec4('+'source\x20/\x20p'+'ow(2.0,\x20e)'+',\x20(e\x20+\x20128'+'.0)\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),M1='\x0a\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20combin'+'eColor(lit'+'Args_albed'+'o,\x20litArgs'+'_sheen_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_sp'+'ecularity)'+';\x0a\x0a\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20+=\x20lit'+'Args_emiss'+'ion;\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20=\x20ad'+'dFog(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20ton'+'eMap(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20gam'+'maCorrectO'+'utput(gl_F'+'ragColor.r'+'gb);\x0a',D1='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20floa'+'t\x20atlasSiz'+'e\x20=\x20512.0;'+'\x0aconst\x20flo'+'at\x20seamSiz'+'e\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0avec2\x20ma'+'pUv(vec2\x20u'+'v,\x20vec4\x20re'+'ct)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(mix(rect'+'.x\x20+\x20seamS'+'ize,\x20rect.'+'x\x20+\x20rect.z'+'\x20-\x20seamSiz'+'e,\x20uv.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mix('+'rect.y\x20+\x20s'+'eamSize,\x20r'+'ect.y\x20+\x20re'+'ct.w\x20-\x20sea'+'mSize,\x20uv.'+'y));\x0a}\x0a\x0a//'+'\x20map\x20a\x20nor'+'malized\x20eq'+'uirect\x20UV\x20'+'and\x20roughn'+'ess\x20level\x20'+'to\x20the\x20cor'+'rect\x20atlas'+'\x20rect.\x0avec'+'2\x20mapRough'+'nessUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'0,\x201.0\x20-\x20t'+',\x20t,\x20t\x20*\x200'+'.5));\x0a}\x0a\x0a/'+'/\x20map\x20shin'+'y\x20level\x20UV'+'\x0avec2\x20mapS'+'hinyUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'1.0\x20-\x20t,\x201'+'.0\x20-\x20t,\x20t,'+'\x20t\x20*\x200.5))'+';\x0a}\x0a\x0a#endi'+'f\x0a',I1='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20float\x20sky'+'boxIntensi'+'ty;\x0a#endif'+'\x0a\x0avec3\x20pro'+'cessEnviro'+'nment(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20skybo'+'xIntensity'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',L1='\x0afloat\x20get'+'FalloffWin'+'dow(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'sqrDist\x20=\x20'+'dot(lightD'+'ir,\x20lightD'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20invRa'+'dius\x20=\x201.0'+'\x20/\x20lightRa'+'dius;\x0a\x20\x20\x20\x20'+'return\x20squ'+'are(satura'+'te(1.0\x20-\x20s'+'quare(sqrD'+'ist\x20*\x20squa'+'re(invRadi'+'us))));\x0a}\x0a'+'\x0afloat\x20get'+'FalloffInv'+'Squared(fl'+'oat\x20lightR'+'adius,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20sqrDis'+'t\x20=\x20dot(li'+'ghtDir,\x20li'+'ghtDir);\x0a\x20'+'\x20\x20\x20float\x20f'+'alloff\x20=\x201'+'.0\x20/\x20(sqrD'+'ist\x20+\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20invRadiu'+'s\x20=\x201.0\x20/\x20'+'lightRadiu'+'s;\x0a\x0a\x20\x20\x20\x20fa'+'lloff\x20*=\x201'+'6.0;\x0a\x20\x20\x20\x20f'+'alloff\x20*=\x20'+'square(sat'+'urate(1.0\x20'+'-\x20square(s'+'qrDist\x20*\x20s'+'quare(invR'+'adius))));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20falloff'+';\x0a}\x0a',R1='\x0afloat\x20get'+'FalloffLin'+'ear(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20length'+'(lightDir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20max(((l'+'ightRadius'+'\x20-\x20d)\x20/\x20li'+'ghtRadius)'+',\x200.0);\x0a}\x0a',O1='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x0ave'+'c4\x20float2u'+'int(float\x20'+'value)\x20{\x0a\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20fl'+'oatBitsToU'+'int(value)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20vec4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((intBit'+'s\x20>>\x2024u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((intBits'+'\x20>>\x2016u)\x20&'+'\x200xFFu)\x20/\x20'+'255.0,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'((intBits\x20'+'>>\x208u)\x20&\x200'+'xFFu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(i'+'ntBits\x20&\x200'+'xFFu)\x20/\x2025'+'5.0\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0a//\x20dec'+'ode\x20RGBA8\x20'+'value\x20to\x20f'+'loat\x0afloat'+'\x20uint2floa'+'t(vec4\x20val'+'ue)\x20{\x0a\x20\x20\x20\x20'+'uint\x20intBi'+'ts\x20=\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20(uint('+'value.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(value.g\x20*'+'\x20255.0)\x20<<'+'\x2016u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20(uin'+'t(value.b\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uint'+'(value.a\x20*'+'\x20255.0);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20uintBitsT'+'oFloat(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0av'+'ec4\x20float2'+'vec4(float'+'\x20value)\x20{\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(CAPS'+'_TEXTURE_F'+'LOAT_RENDE'+'RABLE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4(val'+'ue,\x201.0,\x201'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20float'+'2uint(valu'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0a#e'+'ndif\x20//\x20FL'+'OAT_AS_UIN'+'T\x0a',F1='\x0a\x0afloat\x20dB'+'lendModeFo'+'gFactor\x20=\x20'+'1.0;\x0a\x0a#if\x20'+'(FOG\x20!=\x20NO'+'NE)\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20fog_color'+';\x0a\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20f'+'og_start;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20fog_end;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20fog_den'+'sity;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afloat'+'\x20getFogFac'+'tor()\x20{\x0a\x0a\x20'+'\x20\x20\x20float\x20d'+'epth\x20=\x20gl_'+'FragCoord.'+'z\x20/\x20gl_Fra'+'gCoord.w;\x0a'+'\x20\x20\x20\x20float\x20'+'fogFactor\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20#if\x20(FOG'+'\x20==\x20LINEAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fogFactor\x20'+'=\x20(fog_end'+'\x20-\x20depth)\x20'+'/\x20(fog_end'+'\x20-\x20fog_sta'+'rt);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fogF'+'actor\x20=\x20ex'+'p(-depth\x20*'+'\x20fog_densi'+'ty);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP2)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fog'+'Factor\x20=\x20e'+'xp(-depth\x20'+'*\x20depth\x20*\x20'+'fog_densit'+'y\x20*\x20fog_de'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(fog'+'Factor,\x200.'+'0,\x201.0);\x0a}'+'\x0a\x0avec3\x20add'+'Fog(vec3\x20c'+'olor)\x20{\x0a\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'fog_color\x20'+'*\x20dBlendMo'+'deFogFacto'+'r,\x20color,\x20'+'getFogFact'+'or());\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'color;\x0a}\x0a',N1='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0ave'+'c3\x20getFres'+'nel(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20c'+'osTheta,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20specu'+'larity\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20vec3'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a\x20\x20\x20\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20fresnel\x20'+'=\x20pow(1.0\x20'+'-\x20saturate'+'(cosTheta)'+',\x205.0);\x0a\x20\x20'+'\x20\x20float\x20gl'+'ossSq\x20=\x20gl'+'oss\x20*\x20glos'+'s;\x0a\x20\x20\x20\x20vec'+'3\x20ret\x20=\x20sp'+'ecularity\x20'+'+\x20(max(vec'+'3(glossSq)'+',\x20specular'+'ity)\x20-\x20spe'+'cularity)\x20'+'*\x20fresnel;'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20return'+'\x20mix(ret,\x20'+'iridescenc'+'eFresnel,\x20'+'iridescenc'+'eIntensity'+');\x0a#else\x0a\x20'+'\x20\x20\x20return\x20'+'ret;\x0a#endi'+'f\x20\x20\x20\x20\x0a}\x0a\x0af'+'loat\x20getFr'+'esnelCC(fl'+'oat\x20cosThe'+'ta)\x20{\x0a\x20\x20\x20\x20'+'float\x20fres'+'nel\x20=\x20pow('+'1.0\x20-\x20satu'+'rate(cosTh'+'eta),\x205.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x200.04\x20+\x20'+'(1.0\x20-\x200.0'+'4)\x20*\x20fresn'+'el;\x0a}\x0a',k1='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x0avaryin'+'g\x20vec2\x20vUv'+'0;\x0a\x0avoid\x20m'+'ain(void)\x0a'+'{\x0a\x20\x20\x20\x20gl_P'+'osition\x20=\x20'+'vec4(verte'+'x_position'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20vUv'+'0\x20=\x20vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x200.5;\x0a}\x0a',U1='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(color)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ga'+'mmaCorrect'+'Input(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGamma(col'+'or);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20gammaCorr'+'ectInput(v'+'ec4\x20color)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4(decodeG'+'amma(color'+'.xyz),\x20col'+'or.w);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20gammaCo'+'rrectOutpu'+'t(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20pow(color'+'\x20+\x200.00000'+'01,\x20vec3(1'+'.0\x20/\x202.2))'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'else\x20//\x20NO'+'NE\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectInp'+'ut(vec3\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20gamma'+'CorrectInp'+'ut(vec4\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectOut'+'put(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20color;\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a',B1='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0auni'+'form\x20float'+'\x20material_'+'gloss;\x0a#en'+'dif\x0a\x0avoid\x20'+'getGlossin'+'ess()\x20{\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_GLO'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20*='+'\x20material_'+'gloss;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_GLOSS_'+'TEXTURE\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20*=\x20tex'+'ture2DBias'+'({STD_GLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_GLOSS_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_G'+'LOSS_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_INVE'+'RT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x201.0\x20-\x20dGl'+'ossiness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20+='+'\x200.0000001'+';\x0a}\x0a',z1='\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tion;\x0a\x0a//\x20'+'project\x20th'+'e\x20model\x20sp'+'ace\x20gaussi'+'an\x20center\x20'+'to\x20view\x20an'+'d\x20clip\x20spa'+'ce\x0abool\x20in'+'itCenter(v'+'ec3\x20modelC'+'enter,\x20out'+'\x20SplatCent'+'er\x20center)'+'\x20{\x0a\x20\x20\x20\x20mat'+'4\x20modelVie'+'w\x20=\x20matrix'+'_view\x20*\x20ma'+'trix_model'+';\x0a\x20\x20\x20\x20vec4'+'\x20centerVie'+'w\x20=\x20modelV'+'iew\x20*\x20vec4'+'(modelCent'+'er,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly\x20out\x20if'+'\x20splat\x20is\x20'+'behind\x20the'+'\x20camera\x0a\x20\x20'+'\x20\x20if\x20(cent'+'erView.z\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20false;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20vec4\x20cent'+'erProj\x20=\x20m'+'atrix_proj'+'ection\x20*\x20c'+'enterView;'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nsure\x20gaus'+'sians\x20are\x20'+'not\x20clippe'+'d\x20by\x20camer'+'a\x20near\x20and'+'\x20far\x0a\x20\x20\x20\x20#'+'if\x20WEBGPU\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ce'+'nterProj.z'+'\x20=\x20clamp(c'+'enterProj.'+'z,\x200,\x20abs('+'centerProj'+'.w));\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20center'+'Proj.z\x20=\x20c'+'lamp(cente'+'rProj.z,\x20-'+'abs(center'+'Proj.w),\x20a'+'bs(centerP'+'roj.w));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20cente'+'r.view\x20=\x20c'+'enterView.'+'xyz\x20/\x20cent'+'erView.w;\x0a'+'\x20\x20\x20\x20center'+'.proj\x20=\x20ce'+'nterProj;\x0a'+'\x20\x20\x20\x20center'+'.projMat00'+'\x20=\x20matrix_'+'projection'+'[0][0];\x0a\x20\x20'+'\x20\x20center.m'+'odelView\x20='+'\x20modelView'+';\x0a\x20\x20\x20\x20retu'+'rn\x20true;\x0a}'+'\x0a',V1='\x0a\x0auniform\x20'+'mediump\x20sa'+'mpler2D\x20sp'+'latColor;\x0a'+'\x0a//\x20:\x200'+'.0\x20~\x201.0\x20'+'\x0afl'+'oat\x20comput'+'eAlpha(flo'+'at\x20muT,\x20fl'+'oat\x20uTime,'+'\x20float\x20uFa'+'deSpeed,\x20f'+'loat\x20life)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20age\x20=\x20('+'uTime\x20-\x20mu'+'T)\x20*\x202.0;\x20'+'//\x20'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'muT\x20>\x20uTim'+'e)\x20return\x20'+'0.0;\x0a\x0a\x20\x20\x20\x20'+'//\x20---\x20'+'\x20life\x20'+'---\x0a\x20\x20\x20\x20fl'+'oat\x20linear'+'Fade\x20=\x201.0'+'\x20-\x20age\x20/\x20l'+'ife;\x0a\x20\x20\x20\x20/'+'/\x20---\x20'+'\x20uFadeS'+'peed\x20---\x0a\x20'+'\x20\x20\x20float\x20e'+'xpFade\x20=\x20e'+'xp(-age\x20*\x20'+'uFadeSpeed'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20cl'+'amp(linear'+'Fade,\x200.0,'+'\x201.0);\x20\x0a\x20\x20'+'\x20\x20return\x20c'+'lamp(expFa'+'de,\x200.0,\x201'+'.0);\x0a}\x0a\x0a\x0av'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20uTime,\x20'+'bool\x20plusA'+',\x20int\x20poin'+'tCloudMode'+'Enabled)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'color\x20=\x20te'+'xelFetch(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a\x20\x20\x20\x20'+'#ifdef\x20IS_'+'4D\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20tDat'+'a\x20=\x20texelF'+'etch(trans'+'formLifecy'+'cle,\x20sourc'+'e.uv,\x200).x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20muT'+'\x20=\x20tData.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20saveA'+'\x20=\x20pointCl'+'oudModeEna'+'bled\x20==\x201\x20'+'?\x201.0\x20:\x20co'+'lor.a;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20alpha\x20=\x20s'+'aveA;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(uOp'+'enAnim\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20alp'+'ha\x20=\x20alpha'+'\x20*\x20(muT\x20-\x20'+'uTime\x20+\x200.'+'05);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20age\x20=\x20u'+'Time\x20-\x20muT'+';\x20\x20\x20\x20//\x20'+'\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20uFad'+'eSpeed\x20=\x202'+('.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20life\x20=\x200'+'.1;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20alph'+'a\x20=\x20comput'+'eAlpha(muT'+',\x20uTime,\x20u'+'FadeSpeed,'+'\x20life);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'alpha\x20*=\x20a'+'lpha;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor.a\x20=\x20p'+'lusA\x20?\x20alp'+'ha\x20:\x20saveA'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20ret'+'urn\x20color;'+'\x0a}\x0a\x0a'),G1='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20uint\x20o'+'rder;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20uint\x20i'+'d;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'ivec2\x20uv;\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20vec2'+'\x20cornerUV;'+'\x20\x20\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a};\x0a'+'\x0a//\x20stores'+'\x20the\x20camer'+'a\x20and\x20clip'+'\x20space\x20pos'+'ition\x20of\x20t'+'he\x20gaussia'+'n\x20center\x0as'+'truct\x20Spla'+'tCenter\x20{\x0a'+'\x20\x20\x20\x20vec3\x20v'+'iew;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cen'+'ter\x20in\x20vie'+'w\x20space\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'j;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'mat4\x20model'+'View;\x20\x20\x20\x20\x20'+'//\x20model-v'+'iew\x20matrix'+'\x0a\x20\x20\x20\x20float'+'\x20projMat00'+';\x20\x20\x20\x20//\x20el'+'ement\x20[0]['+'0]\x20of\x20the\x20'+'projection'+'\x20matrix\x0a};'+'\x0a\x0a//\x20store'+'s\x20the\x20offs'+'et\x20from\x20ce'+'nter\x20for\x20t'+'he\x20current'+'\x20gaussian\x0a'+'struct\x20Spl'+'atCorner\x20{'+'\x0a\x20\x20\x20\x20vec2\x20'+'offset;\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'rner\x20offse'+'t\x20from\x20cen'+'ter\x20in\x20cli'+'p\x20space\x0a\x20\x20'+'\x20\x20vec2\x20uv;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20aaF'+'actor;\x20//\x20'+'for\x20scenes'+'\x20generated'+'\x20with\x20anti'+'aliasing\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20vec2\x20'+'v;\x0a\x20\x20\x20\x20flo'+'at\x20dlen;\x0a\x20'+'\x20\x20\x20vec2\x20cS'+'ize;\x0a\x20\x20\x20\x20v'+'ec2\x20cUV;\x0a}'+';\x0a\x0a#includ'+'e\x20\x22gsplatE'+'valSHVS\x22\x0a#'+'include\x20\x22g'+'splatQuatT'+'oMat3VS\x22\x0a\x0a'+'#if\x20GSPLAT'+'_COMPRESSE'+('D_DATA\x20==\x20'+'true\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatCompr'+'essedDataV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_COEFFS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x20='+'=\x20true\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22gsplatSog'+'sDataVS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSo'+'gsSHVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'else\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatDataV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22gsp'+'latColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0avoi'+'d\x20clipCorn'+'er(inout\x20S'+'platCorner'+'\x20corner,\x20f'+'loat\x20alpha'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20clip\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20255.'+'0\x20/\x20alpha)'+')\x20/\x202.0);\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20*='+'\x20clip;\x0a\x20\x20\x20'+'\x20corner.uv'+'\x20*=\x20clip;\x0a'+'}\x0a'),H1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTimeText'+'ure;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20c'+'hunkTextur'+'e;\x0a\x0a//\x20wor'+'k\x20values\x0av'+'ec4\x20chunkD'+'ataA;\x20\x20\x20\x20/'+'/\x20x:\x20min_x'+',\x20y:\x20min_y'+',\x20z:\x20min_z'+',\x20w:\x20max_x'+'\x0avec4\x20chun'+'kDataB;\x20\x20\x20'+'\x20//\x20x:\x20max'+'_y,\x20y:\x20max'+'_z,\x20z:\x20sca'+'le_min_x,\x20'+'w:\x20scale_m'+'in_y\x0avec4\x20'+'chunkDataC'+';\x20\x20\x20\x20//\x20x:'+'\x20scale_min'+'_z,\x20y:\x20sca'+'le_max_x,\x20'+'z:\x20scale_m'+'ax_y,\x20w:\x20s'+'cale_max_z'+'\x0avec4\x20chun'+'kDataD;\x20\x20\x20'+'\x20//\x20x:\x20min'+'_r,\x20y:\x20min'+'_g,\x20z:\x20min'+'_b,\x20w:\x20max'+'_r\x0avec4\x20ch'+'unkDataE;\x20'+'\x20\x20\x20//\x20x:\x20m'+'ax_g,\x20y:\x20m'+'ax_b,\x20z:\x20m'+'in_motion_'+'x,\x20w:\x20min_'+'motion_y\x0av'+'ec4\x20chunkD'+'ataF;\x20\x20\x20\x20/'+'/\x20x:\x20min_m'+'otion_z,\x20y'+':\x20max_moti'+'on_x,\x20z:\x20m'+'ax_motion_'+'y,\x20w:\x20max_'+'motion_z\x0av'+'ec4\x20chunkD'+'ataT;\x20\x20\x20\x20/'+'/\x20x:\x20min_t'+'ime,\x20y:\x20ma'+'x_time,\x20z:'+'\x20min_time_'+'scale,\x20w:\x20'+'max_time_s'+'cale\x0auvec4'+'\x20packedDat'+'a;\x20\x20\x20//\x20x:'+'\x20position\x20'+'bits,\x20y:\x20r'+'otation\x20bi'+'ts,\x20z:\x20sca'+'le\x20bits,\x20w'+':\x20color\x20bi'+'ts\x0auvec2\x20p'+'ackedT;\x20\x20\x20'+'//\x20x:\x20moti'+'on\x20bits(x,'+'\x20y,\x20z),\x20y:'+'\x20time\x20bits'+'(t_scale,\x20'+'t,\x20unused)'+'\x0a\x0a//\x20tool\x20'+'for\x20comput'+'e\x20Marginal'+'\x20time\x0afloa'+'t\x20computeM'+'arginalT(f'+'loat\x20time,'+'\x20float\x20muT'+',\x20float\x20si'+'gmaT)\x20{\x0a\x20\x20'+'\x20\x20if\x20(muT\x20'+'<=\x20-10.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20float\x20re'+('sult\x20=\x20exp'+'(-0.5\x20*\x20(p'+'ow((time\x20-'+'\x20muT),\x202.0'+')\x20/\x20pow(si'+'gmaT,\x202.0)'+'));\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0avec3'+'\x20unpack111'+'011(uint\x20b'+'its)\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'c3(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float(bi'+'ts\x20>>\x2021u)'+'\x20/\x202047.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((bits'+'\x20>>\x2011u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at(bits\x20&\x20'+'0x7ffu)\x20/\x20'+'2047.0\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0avec'+'4\x20unpack88'+'88(uint\x20bi'+'ts)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float(bit'+'s\x20>>\x2024u)\x20'+'/\x20255.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((bits\x20>'+'>\x2016u)\x20&\x200'+'xffu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(('+'bits\x20>>\x208u'+')\x20&\x200xffu)'+'\x20/\x20255.0,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat(bits\x20&'+'\x200xffu)\x20/\x20'+'255.0\x0a\x20\x20\x20\x20'+');\x0a}\x0a\x0acons'+'t\x20float\x20no'+'rm\x20=\x201.0\x20/'+'\x20(sqrt(2.0'+')\x20*\x200.5);\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20a\x20=\x20(f'+'loat((bits'+'\x20>>\x2020u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0\x20-\x20'+'0.5)\x20*\x20nor'+'m;\x0a\x20\x20\x20\x20flo'+'at\x20b\x20=\x20(fl'+'oat((bits\x20'+'>>\x2010u)\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20(flo'+'at(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20m\x20=\x20sqrt'+'(1.0\x20-\x20(a\x20'+'*\x20a\x20+\x20b\x20*\x20'+'b\x20+\x20c\x20*\x20c)'+');\x0a\x0a\x20\x20\x20\x20ui'+'nt\x20mode\x20=\x20'+'bits\x20>>\x2030'+'u;\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x200'+'u)\x20return\x20'+'vec4(m,\x20a,'+'\x20b,\x20c);\x0a\x20\x20'+'\x20\x20if\x20(mode'+'\x20==\x201u)\x20re'+'turn\x20vec4('+'a,\x20m,\x20b,\x20c'+');\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x202'+'u)\x20return\x20'+'vec4(a,\x20b,'+'\x20m,\x20c);\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4(a,\x20b,\x20')+('c,\x20m);\x0a}\x0a\x0a'+'\x0a//\x20read\x20c'+'enter\x0avec3'+'\x20readCente'+'r(SplatSou'+'rce\x20source'+')\x20{\x0a\x20\x20\x20\x20ui'+'nt\x20w\x20=\x20uin'+'t(textureS'+'ize(chunkT'+'exture,\x200)'+'.x)\x20/\x205u;\x0a'+'\x20\x20\x20\x20uint\x20c'+'hunkId\x20=\x20s'+'ource.id\x20/'+'\x20256u;\x0a\x20\x20\x20'+'\x20ivec2\x20chu'+'nkUV\x20=\x20ive'+'c2((chunkI'+'d\x20%\x20w)\x20*\x205'+'u,\x20chunkId'+'\x20/\x20w);\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'chunk\x20and\x20'+'packed\x20com'+'pressed\x20da'+'ta\x0a\x20\x20\x20\x20chu'+'nkDataA\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV,\x200);\x0a\x20\x20'+'\x20\x20chunkDat'+'aB\x20=\x20texel'+'Fetch(chun'+'kTexture,\x20'+'chunkUV\x20+\x20'+'ivec2(1,\x200'+'),\x200);\x0a\x20\x20\x20'+'\x20chunkData'+'C\x20=\x20texelF'+'etch(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20i'+'vec2(2,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataD'+'\x20=\x20texelFe'+'tch(chunkT'+'exture,\x20ch'+'unkUV\x20+\x20iv'+'ec2(3,\x200),'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataE\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(4,\x200),\x20'+'0);\x0a\x20\x20\x20\x20pa'+'ckedData\x20='+'\x20texelFetc'+'h(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ch'+'unkDataA.x'+'yz,\x20vec3(c'+'hunkDataA.'+'w,\x20chunkDa'+'taB.xy),\x20u'+'npack11101'+'1(packedDa'+'ta.x));\x0a}\x0a'+'\x0avec4\x20read'+'Color(in\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'r\x20=\x20unpack'+'8888(packe'+'dData.w);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4(mix('+'chunkDataD'+'.xyz,\x20vec3'+'(chunkData'+'D.w,\x20chunk'+'DataE.xy),'+'\x20r.rgb),\x20r'+'.w);\x0a}\x0a\x0ave'+'c4\x20getRota'+'tion()\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'unpackRota'+'tion(packe'+'dData.y);\x0a'+'}\x0a\x0avec3\x20ge'+'tScale()\x20{')+('\x0a\x20\x20\x20\x20retur'+'n\x20exp(mix('+'vec3(chunk'+'DataB.zw,\x20'+'chunkDataC'+'.x),\x20chunk'+'DataC.yzw,'+'\x20unpack111'+'011(packed'+'Data.z)));'+'\x0a}\x0a\x0a//\x20giv'+'en\x20a\x20rotat'+'ion\x20matrix'+'\x20and\x20scale'+'\x20vector,\x20c'+'ompute\x203d\x20'+'covariance'+'\x20A\x20and\x20B\x0av'+'oid\x20readCo'+'variance(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20covA,\x20out'+'\x20vec3\x20covB'+')\x20{\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3('+'getRotatio'+'n());\x0a\x20\x20\x20\x20'+'vec3\x20scale'+'\x20=\x20getScal'+'e();\x0a\x0a\x20\x20\x20\x20'+'//\x20M\x20=\x20S\x20*'+'\x20R\x0a\x20\x20\x20\x20mat'+'3\x20M\x20=\x20tran'+'spose(mat3'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'scale.x\x20*\x20'+'rot[0],\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20scal'+'e.y\x20*\x20rot['+'1],\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale.z\x20'+'*\x20rot[2]\x0a\x20'+'\x20\x20\x20));\x0a\x0a\x20\x20'+'\x20\x20covA\x20=\x20v'+'ec3(dot(M['+'0],\x20M[0]),'+'\x20dot(M[0],'+'\x20M[1]),\x20do'+'t(M[0],\x20M['+'2]));\x0a\x20\x20\x20\x20'+'covB\x20=\x20vec'+'3(dot(M[1]'+',\x20M[1]),\x20d'+'ot(M[1],\x20M'+'[2]),\x20dot('+'M[2],\x20M[2]'+'));\x0a}\x0a\x0aflo'+'at\x20getMarg'+'inalT(in\x20S'+'platSource'+'\x20source,\x20i'+'n\x20float\x20ti'+'me)\x20{\x0a\x20\x20\x20\x20'+'float\x20marg'+'inal\x20=\x201.0'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20IS_4D\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20chu'+'nkDataT\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(6,\x200),\x200)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'packedT\x20=\x20'+'texelFetch'+'(packedTim'+'eTexture,\x20'+'source.uv,'+'\x200).xy;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20timeData\x20'+'=\x20mix(vec3'+'(chunkData'+'T.z,\x20chunk'+'DataT.x,\x200'+'),\x20vec3(ch'+'unkDataT.w'+',\x20chunkDat'+'aT.y,\x201),\x20'+'unpack1110'+'11(packedT'+'.y));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'tScale\x20=\x20e'+'xp(timeDat')+('a.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'muT\x20=\x20time'+'Data.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20marg'+'inal\x20=\x20com'+'puteMargin'+'alT(time,\x20'+'muT,\x20tScal'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20r'+'eturn\x20marg'+'inal;\x0a}\x0a\x0av'+'ec3\x20readCe'+'nter4D(Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20time)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(chunkText'+'ure,\x200).x)'+'\x20/\x207u;\x0a\x20\x20\x20'+'\x20uint\x20chun'+'kId\x20=\x20sour'+'ce.id\x20/\x2025'+'6u;\x0a\x20\x20\x20\x20iv'+'ec2\x20chunkU'+'V\x20=\x20ivec2('+'(chunkId\x20%'+'\x20w)\x20*\x207u,\x20'+'chunkId\x20/\x20'+'w);\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20chu'+'nk\x20and\x20pac'+'ked\x20compre'+'ssed\x20data\x0a'+'\x20\x20\x20\x20chunkD'+'ataA\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV,'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataB\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(1,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataC\x20='+'\x20texelFetc'+'h(chunkTex'+'ture,\x20chun'+'kUV\x20+\x20ivec'+'2(2,\x200),\x200'+');\x0a\x20\x20\x20\x20chu'+'nkDataD\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(3,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataE\x20=\x20t'+'exelFetch('+'chunkTextu'+'re,\x20chunkU'+'V\x20+\x20ivec2('+'4,\x200),\x200);'+'\x0a\x20\x20\x20\x20chunk'+'DataF\x20=\x20te'+'xelFetch(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20ivec2(5'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataT\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV\x20'+'+\x20ivec2(6,'+'\x200),\x200);\x0a\x20'+'\x20\x20\x20packedD'+'ata\x20=\x20texe'+'lFetch(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20packedT\x20='+'\x20texelFetc'+'h(packedTi'+'meTexture,'+'\x20source.uv'+',\x200).xy;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20mix(chu')+('nkDataA.xy'+'z,\x20vec3(ch'+'unkDataA.w'+',\x20chunkDat'+'aB.xy),\x20un'+'pack111011'+'(packedDat'+'a.x));\x0a\x20\x20\x20'+'\x20#ifdef\x20IS'+'_4D\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20tim'+'e\x20=\x20mix(ve'+'c3(chunkDa'+'taT.z,\x20chu'+'nkDataT.x,'+'\x200),\x20vec3('+'chunkDataT'+'.w,\x20chunkD'+'ataT.y,\x201)'+',\x20unpack11'+'1011(packe'+'dT.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20muT\x20=\x20ti'+'me.y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'ovingSpeed'+'\x20=\x20mix(vec'+'3(chunkDat'+'aE.zw,\x20chu'+'nkDataF.x)'+',\x20chunkDat'+'aF.yzw,\x20un'+'pack111011'+'(packedT.x'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20spl'+'atOffset\x20='+'\x20movingSpe'+'ed\x20*\x20(time'+'\x20-\x20muT);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20spl'+'atCenter\x20+'+'=\x20splatOff'+'set;\x0a\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'return\x20spl'+'atCenter;\x0a'+'}\x0a'),W1='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20shText'+'ure0;\x0aunif'+'orm\x20highp\x20'+'usampler2D'+'\x20shTexture'+'1;\x0auniform'+'\x20highp\x20usa'+'mpler2D\x20sh'+'Texture2;\x0a'+'\x0avec4\x20unpa'+'ck8888s(in'+'\x20uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'(uvec4(bit'+'s)\x20>>\x20uvec'+'4(0u,\x208u,\x20'+'16u,\x2024u))'+'\x20&\x200xffu)\x20'+'*\x20(8.0\x20/\x202'+'55.0)\x20-\x204.'+'0;\x0a}\x0a\x0avoid'+'\x20readSHDat'+'a(in\x20Splat'+'Source\x20sou'+'rce,\x20out\x20v'+'ec3\x20sh[15]'+',\x20out\x20floa'+'t\x20scale)\x20{'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20the\x20sh\x20'+'coefficien'+'ts\x0a\x20\x20\x20\x20uve'+'c4\x20shData0'+'\x20=\x20texelFe'+'tch(shText'+'ure0,\x20sour'+'ce.uv,\x200);'+'\x0a\x20\x20\x20\x20uvec4'+'\x20shData1\x20='+'\x20texelFetc'+'h(shTextur'+'e1,\x20source'+'.uv,\x200);\x0a\x20'+'\x20\x20\x20uvec4\x20s'+'hData2\x20=\x20t'+'exelFetch('+'shTexture2'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec4\x20r0\x20'+'=\x20unpack88'+'88s(shData'+'0.x);\x0a\x20\x20\x20\x20'+'vec4\x20r1\x20=\x20'+'unpack8888'+'s(shData0.'+'y);\x0a\x20\x20\x20\x20ve'+'c4\x20r2\x20=\x20un'+'pack8888s('+'shData0.z)'+';\x0a\x20\x20\x20\x20vec4'+'\x20r3\x20=\x20unpa'+'ck8888s(sh'+'Data0.w);\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'g0\x20=\x20unpac'+'k8888s(shD'+'ata1.x);\x0a\x20'+'\x20\x20\x20vec4\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20vec4\x20g2\x20='+'\x20unpack888'+'8s(shData1'+'.z);\x0a\x20\x20\x20\x20v'+'ec4\x20g3\x20=\x20u'+'npack8888s'+'(shData1.w'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20b0\x20=\x20un'+'pack8888s('+'shData2.x)'+';\x0a\x20\x20\x20\x20vec4'+'\x20b1\x20=\x20unpa'+'ck8888s(sh'+'Data2.y);\x0a'+'\x20\x20\x20\x20vec4\x20b'+'2\x20=\x20unpack'+'8888s(shDa'+'ta2.z);\x0a\x20\x20'+'\x20\x20vec4\x20b3\x20'+'=\x20unpack88'+'88s(shData'+'2.w);\x0a\x0a\x20\x20\x20'+('\x20sh[0]\x20=\x20\x20'+'vec3(r0.x,'+'\x20g0.x,\x20b0.'+'x);\x0a\x20\x20\x20\x20sh'+'[1]\x20=\x20\x20vec'+'3(r0.y,\x20g0'+'.y,\x20b0.y);'+'\x0a\x20\x20\x20\x20sh[2]'+'\x20=\x20\x20vec3(r'+'0.z,\x20g0.z,'+'\x20b0.z);\x0a\x20\x20'+'\x20\x20sh[3]\x20=\x20'+'\x20vec3(r0.w'+',\x20g0.w,\x20b0'+'.w);\x0a\x20\x20\x20\x20s'+'h[4]\x20=\x20\x20ve'+'c3(r1.x,\x20g'+'1.x,\x20b1.x)'+';\x0a\x20\x20\x20\x20sh[5'+']\x20=\x20\x20vec3('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3(r1.'+'z,\x20g1.z,\x20b'+'1.z);\x0a\x20\x20\x20\x20'+'sh[7]\x20=\x20\x20v'+'ec3(r1.w,\x20'+'g1.w,\x20b1.w'+');\x0a\x20\x20\x20\x20sh['+'8]\x20=\x20\x20vec3'+'(r2.x,\x20g2.'+'x,\x20b2.x);\x0a'+'\x20\x20\x20\x20sh[9]\x20'+'=\x20\x20vec3(r2'+'.y,\x20g2.y,\x20'+'b2.y);\x0a\x20\x20\x20'+'\x20sh[10]\x20=\x20'+'vec3(r2.z,'+'\x20g2.z,\x20b2.'+'z);\x0a\x20\x20\x20\x20sh'+'[11]\x20=\x20vec'+'3(r2.w,\x20g2'+'.w,\x20b2.w);'+'\x0a\x20\x20\x20\x20sh[12'+']\x20=\x20vec3(r'+'3.x,\x20g3.x,'+'\x20b3.x);\x0a\x20\x20'+'\x20\x20sh[13]\x20='+'\x20vec3(r3.y'+',\x20g3.y,\x20b3'+'.y);\x0a\x20\x20\x20\x20s'+'h[14]\x20=\x20ve'+'c3(r3.z,\x20g'+'3.z,\x20b3.z)'+';\x0a\x0a\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),$1='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20S'+'H_COEFFS\x203'+'\x0a\x20\x20\x20\x20#elif'+'\x20SH_BANDS\x20'+'==\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20SH_COEFFS'+'\x208\x0a\x20\x20\x20\x20#el'+'if\x20SH_BAND'+'S\x20==\x203\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20SH_COEF'+'FS\x2015\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20SH_COEFF'+'S\x200\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x200\x0a\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20SH_C1\x20'+'=\x200.488602'+'5119029199'+'f;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x201\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20f'+'loat\x20SH_C2'+'_0\x20=\x201.092'+'5484305920'+'792f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'2_1\x20=\x20-1.0'+'9254843059'+'20792f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C2_2\x20=\x200.'+'3153915652'+'5252005f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C2_3\x20=\x20'+'-1.0925484'+'305920792f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'const\x20floa'+'t\x20SH_C2_4\x20'+'=\x200.546274'+'2152960396'+'f;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x202\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'3_0\x20=\x20-0.5'+'9004358992'+'66435f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_1\x20=\x202.'+'8906114426'+'40554f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_2\x20=\x20-0'+'.457045799'+'4644658f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C3_3\x20=\x20'+'0.37317633'+'25901154f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20float'+'\x20SH_C3_4\x20='+'\x20-0.457045'+'7994644658'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_5'+'\x20=\x201.44530'+'5721320277'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_6'+'\x20=\x20-0.5900'+'4358992664'+'35f;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20see\x20ht'+'tps://gith'+'ub.com/gra'+'phdeco-inr'+('ia/gaussia'+'n-splattin'+'g/blob/mai'+'n/utils/sh'+'_utils.py\x0a'+'\x20\x20\x20\x20vec3\x20e'+'valSH(in\x20v'+'ec3\x20sh[SH_'+'COEFFS],\x20i'+'n\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20x\x20'+'=\x20dir.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20y\x20=\x20dir'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20z\x20'+'=\x20dir.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201st\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20resul'+'t\x20=\x20SH_C1\x20'+'*\x20(-sh[0]\x20'+'*\x20y\x20+\x20sh[1'+']\x20*\x20z\x20-\x20sh'+'[2]\x20*\x20x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x201\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x202nd\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xx\x20=\x20x\x20*\x20x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yy\x20=\x20y\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'zz\x20=\x20z\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yz\x20=\x20y\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xz\x20=\x20x\x20*\x20z'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[3]\x20*\x20('+'SH_C2_0\x20*\x20'+'xy)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[4]\x20*\x20'+'(SH_C2_1\x20*'+'\x20yz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[5]\x20*'+'\x20(SH_C2_2\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x20xx\x20-\x20y'+'y))\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[6]\x20*\x20'+'(SH_C2_3\x20*'+'\x20xz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20*'+'\x20(SH_C2_4\x20'+'*\x20(xx\x20-\x20yy'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'+=\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20')+('xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20#endif\x0a'),X1='\x0amat3\x20quat'+'ToMat3(vec'+'4\x20R)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20R2\x20='+'\x20R\x20+\x20R;\x0a\x20\x20'+'\x20\x20float\x20X\x20'+'=\x20R2.x\x20*\x20R'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20Y\x20\x20=\x20R2'+'.y\x20*\x20R;\x0a\x20\x20'+'\x20\x20vec4\x20Z\x20\x20'+'=\x20R2.z\x20*\x20R'+';\x0a\x20\x20\x20\x20floa'+'t\x20W\x20=\x20R2.w'+'\x20*\x20R.w;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x201.0\x20-\x20'+'Z.z\x20-\x20W,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20Y.z\x20+\x20X'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20Y.z\x20-\x20X,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x201.'+'0\x20-\x20Y.y\x20-\x20'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20+\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20Y.w\x20+\x20Z.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20-\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',q1='\x0auniform\x20m'+'ediump\x20sam'+'pler2D\x20sh0'+';\x0a\x0auniform'+'\x20vec4\x20sh0_'+'mins;\x0aunif'+'orm\x20vec4\x20s'+'h0_maxs;\x0a\x0a'+'float\x20SH_C'+'0\x20=\x200.2820'+'9479177387'+'814;\x0a\x0avec4'+'\x20readColor'+'(in\x20SplatS'+'ource\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20clr\x20='+'\x20mix(sh0_m'+'ins,\x20sh0_m'+'axs,\x20texel'+'Fetch(sh0,'+'\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(vec3(0.'+'5)\x20+\x20clr.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'clr.w)));\x0a'+'}\x0a',j1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0a\x0auniform\x20'+'vec3\x20means'+'_mins;\x0auni'+'form\x20vec3\x20'+'means_maxs'+';\x0a\x0auniform'+'\x20vec3\x20scal'+'es_mins;\x0au'+'niform\x20vec'+'3\x20scales_m'+'axs;\x0a\x0avec4'+'\x20unpackU32'+'(uint\x20v)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((v\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((v\x20>>'+'\x2016u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float((v'+'\x20>>\x208u)\x20&\x20'+'0xFFu)\x20/\x202'+'55.0,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float('+'v\x20&\x200xFFu)'+'\x20/\x20255.0\x0a\x20'+'\x20\x20\x20);\x0a}\x0a\x0au'+'vec4\x20packe'+'dSample;\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20th'+'e\x20packed\x20t'+'exture\x20sam'+'ple\x0a\x20\x20\x20\x20pa'+'ckedSample'+'\x20=\x20texelFe'+'tch(packed'+'Texture,\x20s'+'ource.uv,\x20'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20l\x20=\x20un'+'packU32(pa'+'ckedSample'+'.x).xyz;\x0a\x20'+'\x20\x20\x20vec3\x20u\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20vec'+'3\x20n\x20=\x20(l\x20*'+'\x20255.0\x20+\x20u'+'\x20*\x20255.0\x20*'+'\x20256.0)\x20/\x20'+'65535.0;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20mix(mean'+'s_mins,\x20me'+'ans_maxs,\x20'+'n);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20sign'+'(v)\x20*\x20(exp'+'(abs(v))\x20-'+'\x201.0);\x0a}\x0a\x0a'+'const\x20floa'+'t\x20norm\x20=\x202'+'.0\x20/\x20sqrt('+'2.0);\x0a\x0a//\x20'+'sample\x20cov'+'ariance\x20ve'+'ctors\x0avoid'+'\x20readCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'qdata\x20=\x20un'+'packU32(pa'+'ckedSample'+'.z);\x0a\x20\x20\x20\x20v'+'ec3\x20sdata\x20'+('=\x20unpackU3'+'2(packedSa'+'mple.w).xy'+'z;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20abc\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20f'+'loat\x20d\x20=\x20s'+'qrt(max(0.'+'0,\x201.0\x20-\x20d'+'ot(abc,\x20ab'+'c)));\x0a\x0a\x20\x20\x20'+'\x20uint\x20mode'+'\x20=\x20uint(qd'+'ata.w\x20*\x2025'+'5.0\x20+\x200.5)'+'\x20-\x20252u;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20q'+'uat\x20=\x20(mod'+'e\x20==\x200u)\x20?'+'\x20vec4(d,\x20a'+'bc)\x20:\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20((mode\x20='+'=\x201u)\x20?\x20ve'+'c4(abc.x,\x20'+'d,\x20abc.yz)'+'\x20:\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20('+'(mode\x20==\x202'+'u)\x20?\x20vec4('+'abc.xy,\x20d,'+'\x20abc.z)\x20:\x20'+'vec4(abc,\x20'+'d)));\x0a\x0a\x20\x20\x20'+'\x20mat3\x20rot\x20'+'=\x20quatToMa'+'t3(quat);\x0a'+'\x20\x20\x20\x20vec3\x20s'+'cale\x20=\x20exp'+'(mix(scale'+'s_mins,\x20sc'+'ales_maxs,'+'\x20sdata));\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20mat3\x20M\x20='+'\x20transpose'+'(mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20cov'+'A\x20=\x20vec3(d'+'ot(M[0],\x20M'+'[0]),\x20dot('+'M[0],\x20M[1]'+'),\x20dot(M[0'+'],\x20M[2]));'+'\x0a\x20\x20\x20\x20covB\x20'+'=\x20vec3(dot'+'(M[1],\x20M[1'+']),\x20dot(M['+'1],\x20M[2]),'+'\x20dot(M[2],'+'\x20M[2]));\x0a}'+'\x0a'),Y1='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20sh_ce'+'ntroids;\x0a\x0a'+'uniform\x20fl'+'oat\x20shN_mi'+'ns;\x0aunifor'+'m\x20float\x20sh'+'N_maxs;\x0a\x0a/'+'/\x20To\x20suppo'+'rt\x20each\x20SH'+'\x20degree,\x20r'+'eadSHData\x20'+'is\x20overloa'+'ded\x20based\x20'+'on\x20the\x20SH\x20'+'vector\x20dep'+'th\x20\x0a\x0avoid\x20'+'readSHData'+'(in\x20SplatS'+'ource\x20sour'+'ce,\x20out\x20ve'+'c3\x20sh[SH_C'+'OEFFS],\x20ou'+'t\x20float\x20sc'+'ale)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'ivec2\x20t\x20=\x20'+'ivec2(pack'+'edSample.x'+'\x20&\x20255u,\x20p'+'ackedSampl'+'e.y\x20&\x20255u'+');\x0a\x20\x20\x20\x20int'+'\x20n\x20=\x20t.x\x20+'+'\x20t.y\x20*\x20256'+';\x0a\x20\x20\x20\x20int\x20'+'u\x20=\x20(n\x20%\x206'+'4)\x20*\x20SH_CO'+'EFFS;\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20n\x20'+'/\x2064;\x0a\x0a\x20\x20\x20'+'\x20//\x20calcul'+'ate\x20offset'+'\x20into\x20the\x20'+'centroids\x20'+'texture\x20an'+'d\x20read\x20con'+'secutive\x20t'+'exels\x0a\x20\x20\x20\x20'+'for\x20(int\x20i'+'\x20=\x200;\x20i\x20<\x20'+'SH_COEFFS;'+'\x20i++)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[i'+']\x20=\x20mix(ve'+'c3(shN_min'+'s),\x20vec3(s'+'hN_maxs),\x20'+'texelFetch'+'(sh_centro'+'ids,\x20ivec2'+'(u\x20+\x20i,\x20v)'+',\x200).xyz);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20scale\x20=\x20'+'1.0;\x0a}\x0a',K1='\x0auniform\x20v'+'ec2\x20viewpo'+'rt;\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20viewpo'+'rt\x20dimensi'+'ons\x0aunifor'+'m\x20vec4\x20cam'+'era_params'+';\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x201\x20/'+'\x20far,\x20far,'+'\x20near,\x20isO'+'rtho\x0aunifo'+'rm\x20float\x20u'+'SplatScale'+';\x0auniform\x20'+'float\x20rend'+'erSpace;\x0au'+'niform\x20flo'+'at\x20endSpac'+'e;\x0auniform'+'\x20int\x20uShap'+'eN;\x0a\x0a//\x20ca'+'lculate\x20th'+'e\x20clip-spa'+'ce\x20offset\x20'+'from\x20the\x20c'+'enter\x20for\x20'+'this\x20gauss'+'ian\x0abool\x20i'+'nitCorner('+'SplatSourc'+'e\x20source,\x20'+'SplatCente'+'r\x20center,\x20'+'out\x20SplatC'+'orner\x20corn'+'er,\x20int\x20po'+'intCloudMo'+'deEnabled)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'get\x20covari'+'ance\x0a\x20\x20\x20\x20v'+'ec3\x20covA,\x20'+'covB;\x0a\x20\x20\x20\x20'+'readCovari'+'ance(sourc'+'e,\x20covA,\x20c'+'ovB);\x0a\x0a\x20\x20\x20'+'\x20mat3\x20Vrk\x20'+'=\x20mat3(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20covA'+'.x,\x20covA.y'+',\x20covA.z,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'vA.y,\x20covB'+'.x,\x20covB.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'covA.z,\x20co'+'vB.y,\x20covB'+'.z\x0a\x20\x20\x20\x20);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20focal\x20=\x20v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'v\x20=\x20camera'+'_params.w\x20'+'==\x201.0\x20?\x20v'+'ec3(0.0,\x200'+'.0,\x201.0)\x20:'+'\x20center.vi'+'ew.xyz;\x0a\x20\x20'+'\x20\x20float\x20J1'+'\x20=\x20focal\x20/'+'\x20v.z;\x0a\x20\x20\x20\x20'+'vec2\x20J2\x20=\x20'+'-J1\x20/\x20v.z\x20'+'*\x20v.xy;\x0a\x20\x20'+'\x20\x20mat3\x20J\x20='+'\x20mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20J1,\x200'+'.0,\x20J2.x,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x200.'+'0,\x20J1,\x20J2.'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.0,\x200.0,'+'\x200.0\x0a\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20mat'+'3\x20W\x20=\x20tran'+'spose(mat3'+'(center.mo'+'delView));'+'\x0a\x20\x20\x20\x20mat3\x20'+'T\x20=\x20W\x20*\x20J;'+'\x0a\x20\x20\x20\x20mat3\x20'+'cov\x20=\x20tran'+'spose(T)\x20*'+('\x20Vrk\x20*\x20T;\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'calculate\x20'+'AA\x20factor\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20detOri'+'g\x20=\x20cov[0]'+'[0]\x20*\x20cov['+'1][1]\x20-\x20co'+'v[0][1]\x20*\x20'+'cov[0][1];'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20detBl'+'ur\x20=\x20(cov['+'0][0]\x20+\x200.'+'3)\x20*\x20(cov['+'1][1]\x20+\x200.'+'3)\x20-\x20cov[0'+'][1]\x20*\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20corn'+'er.aaFacto'+'r\x20=\x20sqrt(m'+'ax(detOrig'+'\x20/\x20detBlur'+',\x200.0));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20diagonal1'+'\x20=\x20cov[0]['+'0]\x20+\x200.3;\x0a'+'\x20\x20\x20\x20float\x20'+'offDiagona'+'l\x20=\x20cov[0]'+'[1];\x0a\x20\x20\x20\x20f'+'loat\x20diago'+'nal2\x20=\x20cov'+'[1][1]\x20+\x200'+'.3;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20mid\x20='+'\x200.5\x20*\x20(di'+'agonal1\x20+\x20'+'diagonal2)'+';\x0a\x20\x20\x20\x20floa'+'t\x20radius\x20='+'\x20length(ve'+'c2((diagon'+'al1\x20-\x20diag'+'onal2)\x20/\x202'+'.0,\x20offDia'+'gonal));\x0a\x20'+'\x20\x20\x20float\x20l'+'ambda1\x20=\x20m'+'id\x20+\x20radiu'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20lambda2'+'\x20=\x20max(mid'+'\x20-\x20radius,'+'\x200.1);\x0a\x20\x20\x20'+'\x20if\x20(point'+'CloudModeE'+'nabled\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20l'+'ambda1\x20=\x20l'+'ambda2\x20=\x202'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Us'+'e\x20the\x20smal'+'ler\x20viewpo'+'rt\x20dimensi'+'on\x20to\x20limi'+'t\x20the\x20kern'+'el\x20size\x20re'+'lative\x20to\x20'+'the\x20screen'+'\x20resolutio'+'n.\x0a\x20\x20\x20\x20flo'+'at\x20vmin\x20=\x20'+'min(1024.0'+',\x20min(view'+'port.x,\x20vi'+'ewport.y))'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20l1\x20=\x202.'+'0\x20*\x20min(sq'+'rt(2.0\x20*\x20l'+'ambda1),\x20v'+'min);\x0a\x20\x20\x20\x20'+'float\x20l2\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda2)'+',\x20vmin);\x0a\x0a'+'\x20\x20\x20\x20//\x20ear'+'ly-out\x20gau'+'ssians\x20sma'+'ller\x20than\x20'+'2\x20pixels\x0a\x20')+('\x20\x20\x20if\x20(l1\x20'+'<\x202.0\x20&&\x20l'+'2\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec2\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'viewport;\x0a'+'\x0a\x20\x20\x20\x20//\x20cu'+'ll\x20against'+'\x20frustum\x20x'+'/y\x20axes\x0a\x20\x20'+'\x20\x20if\x20(any('+'greaterTha'+'n(abs(cent'+'er.proj.xy'+')\x20-\x20vec2(m'+'ax(l1,\x20l2)'+')\x20*\x20c,\x20cen'+'ter.proj.w'+'w)))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20false;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec2\x20diago'+'nalVector\x20'+'=\x20normaliz'+'e(vec2(off'+'Diagonal,\x20'+'lambda1\x20-\x20'+'diagonal1)'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20scale\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20bool\x20inRe'+'nderSpace\x20'+'=\x20(center.'+'view.x\x20>=\x20'+'-renderSpa'+'ce\x20&&\x20cent'+'er.view.x\x20'+'<=\x20renderS'+'pace)\x20&&\x20('+'center.vie'+'w.y\x20>=\x20-re'+'nderSpace\x20'+'&&\x20center.'+'view.y\x20<=\x20'+'renderSpac'+'e);\x0a\x20\x20\x20\x20bo'+'ol\x20openRen'+'derAnim\x20=\x20'+'renderSpac'+'e\x20<\x20endSpa'+'ce;\x0a\x20\x20\x20\x20bo'+'ol\x20inRende'+'r\x20=\x20render'+'Space\x20>=\x20e'+'ndSpace\x20||'+'\x20inRenderS'+'pace\x20||\x20po'+'intCloudMo'+'deEnabled\x20'+'==\x201;\x0a\x20\x20\x20\x20'+'if(!openRe'+'nderAnim\x20&'+'&\x20uSplatSc'+'ale\x20>\x200.0\x20'+'&&\x20uSplatS'+'cale\x20<=\x205.'+'0){\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale\x20=\x20'+'uSplatScal'+'e;\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(in'+'Render){\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(openR'+'enderAnim)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'scale\x20=\x20in'+'RenderSpac'+'e\x20?\x20uSplat'+'Scale\x20:\x200.'+'1;\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20vec2\x20v1'+'\x20=\x20scale\x20*'+'\x20l1\x20*\x20diag'+'onalVector'+';\x0a\x20\x20\x20\x20vec2'+'\x20v2\x20=\x20scal'+'e\x20*\x20l2\x20*\x20v'+'ec2(diagon'+'alVector.y'+',\x20-diagona'+'lVector.x)')+(';\x0a\x0a\x20\x20\x20\x20cor'+'ner.offset'+'\x20=\x20(source'+'.cornerUV.'+'x\x20*\x20v1\x20+\x20s'+'ource.corn'+'erUV.y\x20*\x20v'+'2)\x20*\x20c;\x0a\x20\x20'+'\x20\x20//\x20corne'+'r.uv\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20if\x20(uSh'+'apeN\x20<\x203)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'corner.uv\x20'+'=\x20source.c'+'ornerUV;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'corner.cSi'+'ze\x20=\x20(v1\x20+'+'\x20v2)\x20*\x20c;\x0a'+'\x20\x20\x20\x20corner'+'.cUV\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),Z1='\x0a\x0auniform\x20'+'highp\x20samp'+'ler2D\x20tran'+'sformA;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20transfor'+'mB;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformR;\x0a'+'\x0a#ifdef\x20IS'+'_4D\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformMot'+'ion;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20t'+'ransformLi'+'fecycle;\x0a#'+'endif\x0a\x0a//\x20'+'work\x20value'+'s\x0a//\x20uint\x20'+'tAw;\x0avec2\x20'+'sampledCov'+'4D;\x0afloat\x20'+'muT;\x0a\x0a//\x20t'+'ool\x20for\x20co'+'mpute\x20Marg'+'inal\x20time\x0a'+'float\x20comp'+'uteMargina'+'lT(float\x20t'+'ime,\x20float'+'\x20muT,\x20floa'+'t\x20sigmaT)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'muT\x20<=\x20-10'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20floa'+'t\x20result\x20='+'\x20exp(-0.5\x20'+'*\x20(pow((ti'+'me\x20-\x20muT),'+'\x202.0)\x20/\x20po'+'w(sigmaT,\x20'+'2.0)));\x0a\x20\x20'+'\x20\x20return\x20r'+'esult;\x0a}\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20retu'+'rn\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a}\x0a\x0ama'+'t3\x20quatToM'+'at3v2(vec4'+'\x20R)\x20{\x0a\x20\x20\x20\x20'+'float\x20x\x20=\x20'+'R.w;\x0a\x20\x20\x20\x20f'+'loat\x20y\x20=\x20R'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20R.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20w\x20=\x20R.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20mat3(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x201.0'+'\x20-\x202.0\x20*\x20('+'z\x20*\x20z\x20+\x20w\x20'+'*\x20w),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'2.0\x20*\x20(y\x20*'+'\x20z\x20+\x20x\x20*\x20w'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x202.0'+'\x20*\x20(y\x20*\x20w\x20'+'-\x20x\x20*\x20z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x202.0\x20*\x20'+'(y\x20*\x20z\x20-\x20x'+'\x20*\x20w),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x201.0\x20-'+'\x202.0\x20*\x20(y\x20'+'*\x20y\x20+\x20w\x20*\x20'+'w),\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x202.'+'0\x20*\x20(z\x20*\x20w'+'\x20+\x20x\x20*\x20y),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x202.0\x20*'+'\x20(y\x20*\x20w\x20+\x20'+'x\x20*\x20z),\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x202.0\x20*\x20(z'+'\x20*\x20w\x20-\x20x\x20*'+'\x20y),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.0\x20-\x202'+'.0\x20*\x20(y\x20*\x20'+'y\x20+\x20z\x20*\x20z)'+'\x0a\x20\x20\x20\x20);\x0a}\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(vec3\x20pack'+'ed)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(packed.x'+'yz,\x20sqrt(m'+'ax(0.0,\x201.'+'0\x20-\x20dot(pa'+'cked,\x20pack'+'ed))));\x0a}\x0a'+'\x0a//\x20sample'+'\x20covarianc'+'e\x20vectors\x0a'+'void\x20readC'+'ovariance('+'in\x20SplatSo'+'urce\x20sourc'+'e,\x20out\x20vec'+'3\x20covA,\x20ou'+'t\x20vec3\x20cov'+'B)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20tB\x20=\x20t'+'exelFetch('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20tR\x20'+'=\x20texelFet'+'ch(transfo'+'rmR,\x20sourc'+'e.uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3v'+'2(unpackRo'+'tation(tR)'+');\x0a\x20\x20\x20\x20vec'+'3\x20scale\x20=\x20'+'tB.xyz;\x0a\x0a\x20'+'\x20\x20\x20//\x20M\x20=\x20'+'S\x20*\x20R\x0a\x20\x20\x20\x20'+'mat3\x20M\x20=\x20t'+'ranspose(m'+'at3(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.x'+'\x20*\x20rot[0],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.y\x20*\x20r'+'ot[1],\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.z\x20*\x20rot[2'+']\x0a\x20\x20\x20\x20));\x0a'+'\x0a\x20\x20\x20\x20covA\x20'+'=\x20vec3(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20covB\x20=\x20'+'vec3(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a\x0a'+'//\x20sample\x20'+'4D\x20covaria'+'nce\x20vector'+'s\x0avoid\x20rea'+'dFTGSCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB,ou'+'t\x20vec4\x20cov'+'ariance4D)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20tB\x20=\x20tex'+'elFetch(tr'+'ansformB,\x20'+'source.uv,')+('\x200);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20tR\x20=\x20'+'texelFetch'+'(transform'+'R,\x20source.'+'uv,\x200).xyz'+';\x0a\x20\x20\x20\x20mat3'+'\x20rot\x20=\x20qua'+'tToMat3v2('+'unpackRota'+'tion(tR));'+'\x0a\x20\x20\x20\x20vec3\x20'+'scale\x20=\x20tB'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x20M\x20=\x20S\x20'+'*\x20R\x0a\x20\x20\x20\x20ma'+'t3\x20M\x20=\x20tra'+'nspose(mat'+'3(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20covA\x20=\x20'+'vec3(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20covB\x20=\x20ve'+'c3(dot(M[1'+'],\x20M[1]),\x20'+'dot(M[1],\x20'+'M[2]),\x20dot'+'(M[2],\x20M[2'+']));\x0a\x0a}\x0a\x0a\x0a'+'float\x20getM'+'arginalT(i'+'n\x20SplatSou'+'rce\x20source'+',\x20in\x20float'+'\x20time)\x20{\x0a\x20'+'\x20\x20\x20float\x20m'+'arginal\x20=\x20'+'1.0;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20filter\x20'+'out\x20splats'+'\x20that\x20have'+'\x20too\x20littl'+'e\x20influenc'+'e\x20to\x20now\x20i'+'n\x20the\x20time'+'\x20dimension'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20tData'+'\x20=\x20texelFe'+'tch(transf'+'ormLifecyc'+'le,\x20source'+'.uv,\x200).xy'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'muT\x20=\x20tDat'+'a.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20t'+'Scale\x20=\x20tD'+'ata.y;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20margi'+'nal\x20=\x20comp'+'uteMargina'+'lT(time,\x20m'+'uT,\x20tScale'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20re'+'turn\x20margi'+'nal;\x0a}\x0a\x0ave'+'c3\x20readCen'+'ter4D(Spla'+'tSource\x20so'+'urce,\x20floa'+'t\x20time)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20if(m'+'uT\x20>\x20-5.0)'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20movin'+'gSpeed\x20=\x20t')+('exelFetch('+'transformM'+'otion,\x20sou'+'rce.uv,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'platOffset'+'\x20=\x20movingS'+'peed\x20*\x20(ti'+'me\x20-\x20muT);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'platCenter'+'\x20+=\x20splatO'+'ffset;\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20spla'+'tCenter;\x0a}'+'\x0a'),Q1='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0avec'+'3\x20prepareO'+'utputFromG'+'amma(vec3\x20'+'gammaColor'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20TONEMAP\x20'+'==\x20NONE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'GAMMA\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'onvert\x20to\x20'+'linear\x20spa'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20outp'+'ut\x20gamma\x20s'+'pace\x20color'+'\x20directly\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'ly\x20tonemap'+'ping\x20in\x20li'+'near\x20space'+'\x20and\x20outpu'+'t\x20to\x20linea'+'r\x20or\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20gamm'+'a\x20(which\x20i'+'s\x20handled\x20'+'by\x20gammaCo'+'rrectOutpu'+'t)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ga'+'mmaCorrect'+'Output(ton'+'eMap(decod'+'eGamma(gam'+'maColor)))'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',J1='\x0auniform\x20i'+'nt\x20mode;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x200:\x20c'+'enters,\x201:'+'\x20rings\x0auni'+'form\x20float'+'\x20ringSize;'+'\x0auniform\x20i'+'nt\x20uShapeN'+';\x0a\x0a#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bay'+'erPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'opacityDit'+'herPS\x22\x0a\x20\x20\x20'+'\x20varying\x20f'+'loat\x20id;\x0a#'+'endif\x0a\x0a#if'+'def\x20PICK_P'+'ASS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pi'+'ckPS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20alphaC'+'lip;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20vLinearDe'+'pth;\x0a\x20\x20\x20\x20#'+'include\x20\x22f'+'loatAsUint'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20Fast\x20'+'approximat'+'e\x20e^x\x20base'+'d\x20on\x20https'+'://nic.sch'+'raudolph.o'+'rg/pubs/Sc'+'hraudolph9'+'9.pdf\x0acons'+'t\x20float\x20\x20E'+'XP_A\x20\x20\x20\x20\x20\x20'+'=\x2012102203'+'.0;\x20\x20\x20//\x20'+'\x202^23\x20/\x20ln'+'(2)\x0aconst\x20'+'int\x20\x20\x20\x20EXP'+'_BC_RMS\x20=\x20'+'1064866808'+';\x20\x20\x20//\x20(12'+'7\x20<<\x2023)\x20-'+'\x2060801\x20*\x208'+'\x0afloat\x20fas'+'tExp(float'+'\x20x)\x20{\x0a\x20\x20\x20\x20'+'int\x20i\x20=\x20in'+'t(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20in'+'tBitsToFlo'+'at(i);\x0a}\x0a\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianU'+'V;\x0avarying'+'\x20mediump\x20v'+'ec4\x20gaussi'+'anColor;\x0av'+'arying\x20med'+'iump\x20vec2\x20'+'gaussianSi'+'ze;\x0avaryin'+'g\x20mediump\x20'+'vec2\x20gauss'+'ianCUV;\x0ava'+'rying\x20medi'+'ump\x20float\x20'+'saveMargin'+'al;\x0a\x0a//\x20'+'\x20p\x20\x20N'+'\x20\x0a//\x20p:'+'\x20\x20(UV\x20'+')\x0a//'+'\x20N:\x20\x0a//\x20'+'r:\x20'+('1\x0a/'+'/\x20center:\x20'+'\x0abool\x20'+'insideRegu'+'larPolygon'+'(vec2\x20p,\x20i'+'nt\x20N,\x20floa'+'t\x20r,\x20vec2\x20'+'center)\x20{\x0a'+'\x20\x20\x20\x20//\x20'+'\x0a\x20'+'\x20\x20\x20vec2\x20d\x20'+'=\x20p\x20-\x20cent'+'er;\x0a\x20\x20\x20\x20fl'+'oat\x20theta\x20'+'=\x20atan(d.y'+',\x20d.x);\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20'+'\x0a\x20\x20\x20\x20flo'+'at\x20len\x20=\x20l'+'ength(d);\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20'+'\x0a\x20\x20\x20\x20float'+'\x20anglePerS'+'ide\x20=\x202.0\x20'+'*\x203.141592'+'65\x20/\x20float'+'(N);\x0a\x0a\x20\x20\x20\x20'+'//\x20\x200\x20~'+'\x20anglePerS'+'ide\x20\x0a\x20\x20\x20'+'\x20float\x20loc'+'alAngle\x20=\x20'+'mod(theta,'+'\x20anglePerS'+'ide);\x0a\x0a\x20\x20\x20'+'\x20//\x20'+'\x20'+'N\x20\x0a\x20\x20'+'\x20\x20float\x20ma'+'xR\x20=\x20r\x20*\x20c'+'os(anglePe'+'rSide\x20/\x202.'+'0)\x20/\x20cos(l'+'ocalAngle\x20'+'-\x20anglePer'+'Side\x20/\x202.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20len\x20<'+'=\x20maxR;\x0a}\x0a'+'\x0a//\x20'+'N\x20soft\x20'+'mask\x0afloat'+'\x20polygonSo'+'ftMask(vec'+'2\x20p,\x20int\x20N'+',\x20float\x20ra'+'dius,\x20floa'+'t\x20edgeSoft'+'ness)\x20{\x0a\x20\x20'+'\x20\x20float\x20an'+'gle\x20=\x20atan'+'(p.y,\x20p.x)'+';\x0a\x20\x20\x20\x20floa'+'t\x20sector\x20='+'\x206.2831853'+'\x20/\x20float(N'+');\x20\x20//\x20'+'\x0a\x20\x20\x20\x20//'+'\x20\x20['+'-sector/2,'+'\x20sector/2]'+'\x0a\x20\x20\x20\x20float'+'\x20halfSecto'+'r\x20=\x20sector'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20float\x20lo'+'calAngle\x20='+'\x20mod(angle'+'\x20+\x20halfSec'+'tor,\x20secto'+'r)\x20-\x20halfS'+'ector;\x0a\x0a\x20\x20'+'\x20\x20//\x20'+'\x0a'+'\x20\x20\x20\x20float\x20'+'boundary\x20='+'\x20radius\x20*\x20'+'cos(halfSe'+'ctor)\x20/\x20co'+'s(localAng'+'le);\x0a\x0a\x20\x20\x20\x20'+'//\x20\x20=\x20'+'\x0a\x20\x20\x20\x20'+'float\x20dist'+'\x20=\x20boundar'+'y\x20-\x20length'+'(p);\x0a\x0a\x20\x20\x20\x20'+'//\x20\x20smoot')+('hstep\x20'+'\x20(edgeSof'+'tness\x20'+')\x0a\x20\x20\x20\x20'+'float\x20alph'+'a\x20=\x20smooth'+'step(0.0,\x20'+'edgeSoftne'+'ss,\x20dist);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20alpha;\x20'+'//\x200~1\x0a}\x0a\x0a'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20mediump\x20'+'float\x20A\x20=\x20'+'dot(gaussi'+'anUV,\x20gaus'+'sianUV);\x0a\x20'+'\x20\x20\x20if\x20(A\x20>'+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'valuate\x20al'+'pha\x0a\x20\x20\x20\x20me'+'diump\x20floa'+'t\x20alpha\x20=\x20'+'fastExp(-A'+'\x20*\x204.0)\x20*\x20'+'gaussianCo'+'lor.a;\x0a\x20\x20\x20'+'\x20//\x20TODO\x20u'+'ShapeN\x20alp'+'ha\x0a\x20\x20\x20\x20//\x20'+'float\x20dx\x20='+'\x20abs(gauss'+'ianCUV.x)\x20'+'/\x20gaussian'+'Size.x;\x0a\x20\x20'+'\x20\x20//\x20float'+'\x20dy\x20=\x20abs('+'gaussianCU'+'V.y)\x20/\x20gau'+'ssianSize.'+'y;\x0a\x20\x20\x20\x20//\x20'+'float\x20B\x20=\x20'+'max(dx,\x20dy'+');\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20'+'\x0a\x20\x20\x20\x20//\x20'+'mediump\x20fl'+'oat\x20alpha\x20'+'=\x20exp(-pow'+'(B,\x202.0)\x20*'+'\x204.0)\x20*\x20ga'+'ussianColo'+'r.a;\x0a\x0a\x20\x20\x20\x20'+'bool\x20openR'+'ingMode\x20=\x20'+'ringSize\x20>'+'\x200.0\x20&&\x20mo'+'de\x20==\x201;\x20/'+'/\x20&&\x20uCont'+'rolMode\x20=='+'\x201;\x20\x0a\x20\x20\x20\x20i'+'f\x20(openRin'+'gMode\x20&&\x20s'+'aveMargina'+'l\x20>=\x200.05)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(A\x20<\x201'+'.0\x20-\x20ringS'+'ize)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'lpha\x20=\x20max'+'(0.05,\x20alp'+'ha);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alpha\x20'+'=\x200.6;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20bool\x20ope'+'nShapeMode'+'\x20=\x20uShapeN'+'\x20>\x202;\x20//\x20&'+'&\x20uControl'+'Mode\x20==\x201;'+'\x0a\x20\x20\x20\x20if\x20(o'+'penShapeMo'+'de)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20gaussi'+'anCUV\x20*\x202.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20rad'+'ius\x20=\x201.0;')+('\x20//\x201.0\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20edgeSoft'+'ness\x20=\x200.0'+'5;\x20//\x200.05'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v\x20*=\x201.0;/'+'/0.9;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20c'+'enter\x20=\x20ve'+'c2(0.0,\x200.'+'0);\x20\x20\x20//\x20'+''+'\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20alpha\x20'+'=\x20polygonS'+'oftMask(uv'+',\x20uShapeN,'+'\x20radius,\x20e'+'dgeSoftnes'+'s);\x20//\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(!insideR'+'egularPoly'+'gon(uv,\x20uS'+'hapeN,\x20rad'+'ius,\x20cente'+'r))\x20{\x20//'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20defined(S'+'HADOW_PASS'+')\x20||\x20defin'+'ed(PICK_PA'+'SS)\x20||\x20def'+'ined(PREPA'+'SS_PASS)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20a'+'lphaClip)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'getPickOut'+'put();\x0a\x0a\x20\x20'+'\x20\x20#elif\x20SH'+'ADOW_PASS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(0'+'.0,\x200.0,\x200'+'.0,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20#elif'+'\x20PREPASS_P'+'ASS\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20fl'+'oat2vec4(v'+'LinearDept'+'h);\x0a\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x201.0\x20/'+'\x20255.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20discard;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20DI'+'THER_NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(alph'+'a,\x20id\x20*\x200.'+'013);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'gaussianCo'+'lor.xyz,\x20a'+'lpha);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),eP='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0avec3\x20unpa'+'ck111011s('+'uint\x20bits)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec3(('+'uvec3(bits'+')\x20>>\x20uvec3'+'(21u,\x2011u,'+'\x200u))\x20&\x20uv'+'ec3(0x7ffu'+',\x200x3ffu,\x20'+'0x7ffu))\x20/'+'\x20vec3(2047'+'.0,\x201023.0'+',\x202047.0)\x20'+'*\x202.0\x20-\x201.'+'0;\x0a}\x0a\x0a//\x20f'+'etch\x20quant'+'ized\x20spher'+'ical\x20harmo'+'nic\x20coeffi'+'cients\x0avoi'+'d\x20fetchSca'+'le(in\x20uvec'+'4\x20t,\x20out\x20f'+'loat\x20scale'+',\x20out\x20vec3'+'\x20a,\x20out\x20ve'+'c3\x20b,\x20out\x20'+'vec3\x20c)\x20{\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20uintBits'+'ToFloat(t.'+'x);\x0a\x20\x20\x20\x20a\x20'+'=\x20unpack11'+'1011s(t.y)'+';\x0a\x20\x20\x20\x20b\x20=\x20'+'unpack1110'+'11s(t.z);\x0a'+'\x20\x20\x20\x20c\x20=\x20un'+'pack111011'+'s(t.w);\x0a}\x0a'+'\x0a//\x20fetch\x20'+'quantized\x20'+'spherical\x20'+'harmonic\x20c'+'oefficient'+'s\x0avoid\x20fet'+'ch(in\x20uvec'+'4\x20t,\x20out\x20v'+'ec3\x20a,\x20out'+'\x20vec3\x20b,\x20o'+'ut\x20vec3\x20c,'+'\x20out\x20vec3\x20'+'d)\x20{\x0a\x20\x20\x20\x20a'+'\x20=\x20unpack1'+'11011s(t.x'+');\x0a\x20\x20\x20\x20b\x20='+'\x20unpack111'+'011s(t.y);'+'\x0a\x20\x20\x20\x20c\x20=\x20u'+'npack11101'+'1s(t.z);\x0a\x20'+'\x20\x20\x20d\x20=\x20unp'+'ack111011s'+'(t.w);\x0a}\x0a\x0a'+'void\x20fetch'+'(in\x20uint\x20t'+',\x20out\x20vec3'+'\x20a)\x20{\x0a\x20\x20\x20\x20'+'a\x20=\x20unpack'+'111011s(t)'+';\x0a}\x0a\x0a#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20splatSH_'+'1to3;\x0a\x20\x20\x20\x20'+'void\x20readS'+'HData(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20sh'+'[3],\x20out\x20f'+'loat\x20scale'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetchSca'+'le(texelFe'+'tch(splatS'+'H_1to3,\x20so'+'urce.uv,\x200'+'),\x20scale,\x20'+'sh[0],\x20sh['+'1],\x20sh[2])'+(';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20SH_BAN'+'DS\x20==\x202\x0a\x20\x20'+'\x20\x20uniform\x20'+'highp\x20usam'+'pler2D\x20spl'+'atSH_1to3;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20highp\x20u'+'sampler2D\x20'+'splatSH_4t'+'o7;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_8to11;\x0a\x20\x20'+'\x20\x20void\x20rea'+'dSHData(in'+'\x20SplatSour'+'ce\x20source,'+'\x20out\x20vec3\x20'+'sh[8],\x20out'+'\x20float\x20sca'+'le)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetchS'+'cale(texel'+'Fetch(spla'+'tSH_1to3,\x20'+'source.uv,'+'\x200),\x20scale'+',\x20sh[0],\x20s'+'h[1],\x20sh[2'+']);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetch(te'+'xelFetch(s'+'platSH_4to'+'7,\x20source.'+'uv,\x200),\x20sh'+'[3],\x20sh[4]'+',\x20sh[5],\x20s'+'h[6]);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20fetch'+'(texelFetc'+'h(splatSH_'+'8to11,\x20sou'+'rce.uv,\x200)'+'.x,\x20sh[7])'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_1to3;\x0a\x20\x20\x20'+'\x20uniform\x20h'+'ighp\x20usamp'+'ler2D\x20spla'+'tSH_4to7;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20us'+'ampler2D\x20s'+'platSH_8to'+'11;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_12to15;\x0a\x20'+'\x20\x20\x20void\x20re'+'adSHData(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20sh[15],\x20o'+'ut\x20float\x20s'+'cale)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fetc'+'hScale(tex'+'elFetch(sp'+'latSH_1to3'+',\x20source.u'+'v,\x200),\x20sca'+'le,\x20sh[0],'+'\x20sh[1],\x20sh'+'[2]);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetch('+'texelFetch'+'(splatSH_4'+'to7,\x20sourc'+'e.uv,\x200),\x20'+'sh[3],\x20sh['+'4],\x20sh[5],'+'\x20sh[6]);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fet'+'ch(texelFe'+'tch(splatS'+'H_8to11,\x20s'+'ource.uv,\x20'+'0),\x20sh[7],'+'\x20sh[8],\x20sh'+'[9],\x20sh[10'+']);\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20fetch(te'+'xelFetch(s'+'platSH_12t'+'o15,\x20sourc'+'e.uv,\x200),\x20'+'sh[11],\x20sh'+'[12],\x20sh[1'+'3],\x20sh[14]'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0a#en'+'dif\x0a'),tP='\x0aattribute'+'\x20vec3\x20vert'+'ex_positio'+'n;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20xy:\x20co'+'rnerUV,\x20z:'+'\x20render\x20or'+'der\x20offset'+'\x0aattribute'+'\x20uint\x20vert'+'ex_id_attr'+'ib;\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20render'+'\x20order\x20bas'+'e\x0a\x0auniform'+'\x20uint\x20numS'+'plats;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20tota'+'l\x20number\x20o'+'f\x20splats\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20splatO'+'rder;\x20\x20\x20\x20/'+'/\x20per-spla'+'t\x20index\x20to'+'\x20source\x20ga'+'ussian\x0a\x0a//'+'\x20initializ'+'e\x20the\x20spla'+'t\x20source\x20s'+'tructure\x0ab'+'ool\x20initSo'+'urce(out\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(splatOrde'+'r,\x200).x);\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20ui'+'nt(vertex_'+'position.z'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20if'+'\x20out\x20of\x20ra'+'nge\x20(since'+'\x20the\x20last\x20'+'block\x20of\x20s'+'plats\x20may\x20'+'be\x20partial'+'ly\x20full)\x0a\x20'+'\x20\x20\x20if\x20(sou'+'rce.order\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'vec2\x20order'+'UV\x20=\x20ivec2'+'(source.or'+'der\x20%\x20w,\x20s'+'ource.orde'+'r\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20splat\x20id\x0a'+'\x20\x20\x20\x20source'+'.id\x20=\x20texe'+'lFetch(spl'+'atOrder,\x20o'+'rderUV,\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20/'+'/\x20map\x20id\x20t'+'o\x20uv\x0a\x20\x20\x20\x20s'+'ource.uv\x20='+'\x20ivec2(sou'+'rce.id\x20%\x20w'+',\x20source.i'+'d\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20true;'+'\x0a}\x0a',sP='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0aun'+'iform\x20int\x20'+'pointCloud'+'ModeEnable'+'d;\x0auniform'+'\x20float\x20uTi'+'me;\x0aunifor'+'m\x20float\x20pr'+'erenderCTi'+'me;\x0aunifor'+'m\x20float\x20uS'+'aturation;'+'\x20//\x200.0-2.'+'01.0\x20'+'\x0auniform'+'\x20float\x20uHu'+'eOffset;\x20\x20'+'//\x20'+'360'+'\x0auniform\x20v'+'ec3\x20clrOff'+'set;\x0aunifo'+'rm\x20vec4\x20cl'+'rScale;\x0aun'+'iform\x20floa'+'t\x20uOpacity'+';\x0auniform\x20'+'int\x20uInver'+'tOpacity;\x0a'+'\x0avarying\x20m'+'ediump\x20vec'+'2\x20gaussian'+'UV;\x0avaryin'+'g\x20mediump\x20'+'vec4\x20gauss'+'ianColor;\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianS'+'ize;\x0avaryi'+'ng\x20mediump'+'\x20vec2\x20gaus'+'sianCUV;\x0av'+'arying\x20med'+'iump\x20float'+'\x20saveMargi'+'nal;\x0a\x0a//\x20='+'====\x20\x20H'+'SV/RGB\x20\x20'+'=====\x0ahigh'+'p\x20vec3\x20rgb'+'2hsv(highp'+'\x20vec3\x20c)\x20{'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20cMa'+'x\x20=\x20max(ma'+'x(c.r,\x20c.g'+'),\x20c.b);\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20cMin\x20'+'=\x20min(min('+'c.r,\x20c.g),'+'\x20c.b);\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20delta\x20='+'\x20cMax\x20-\x20cM'+'in\x20+\x201e-10'+';\x20//\x200\x0a'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20h\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'if\x20(delta\x20'+'>\x201e-6)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(cMax\x20==\x20'+'c.r)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20=\x20mod((c.'+'g\x20-\x20c.b)\x20/'+'\x20delta,\x206.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(cMax\x20=='+'\x20c.g)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.b\x20-'+'\x20c.r)\x20/\x20de'+'lta\x20+\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.r\x20-'+'\x20c.g)\x20/\x20de'+'lta\x20+\x204.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20/=\x206.0;\x20/'+'/\x20\x20[0,1]'+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(h\x20<\x200.0'+')\x20h\x20+=\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20s\x20=\x20('+'cMax\x20<\x201e-'+'6)\x20?\x200.0\x20:'+'\x20delta\x20/\x20c'+'Max;\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20v\x20=\x20cMax;'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec3(h,\x20'+'s,\x20v);\x0a}\x0a\x0a'+'highp\x20vec3'+'\x20hsv2rgb(h'+'ighp\x20vec3\x20'+'c)\x20{\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20h\x20=\x20c.x\x20*'+'\x206.0;\x20//\x200'+'-6\x0a\x20\x20\x20\x20hig'+'hp\x20float\x20s'+'\x20=\x20c.y;\x0a\x20\x20'+'\x20\x20highp\x20fl'+'oat\x20v\x20=\x20c.'+'z;\x0a\x0a\x20\x20\x20\x20hi'+'ghp\x20int\x20i\x20'+'=\x20int(floo'+'r(h));\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20f\x20=\x20h\x20-'+'\x20float(i);'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20p\x20='+'\x20v\x20*\x20(1.0\x20'+'-\x20s);\x0a\x20\x20\x20\x20'+'highp\x20floa'+'t\x20q\x20=\x20v\x20*\x20'+'(1.0\x20-\x20s\x20*'+'\x20f);\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20t\x20=\x20v\x20*\x20('+'1.0\x20-\x20s\x20*\x20'+'(1.0\x20-\x20f))'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(i\x20==\x200)\x20r'+'eturn\x20vec3'+'(v,\x20t,\x20p);'+'\x0a\x20\x20\x20\x20else\x20'+'if\x20(i\x20==\x201'+')\x20return\x20v'+'ec3(q,\x20v,\x20'+'p);\x0a\x20\x20\x20\x20el'+'se\x20if\x20(i\x20='+'=\x202)\x20retur'+'n\x20vec3(p,\x20'+'v,\x20t);\x0a\x20\x20\x20'+'\x20else\x20if\x20('+'i\x20==\x203)\x20re'+'turn\x20vec3('+'p,\x20q,\x20v);\x0a'+'\x20\x20\x20\x20else\x20i'+'f\x20(i\x20==\x204)'+'\x20return\x20ve'+'c3(t,\x20p,\x20v'+');\x0a\x20\x20\x20\x20els'+'e\x20return\x20v'+'ec3(v,\x20p,\x20'+'q);\x20//\x20i=='+'5\x0a}\x0a\x0a#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20id;\x0a#en'+'dif\x0a\x0amediu'+'mp\x20vec4\x20di'+'scardVec\x20='+'\x20vec4(0.0,'+'\x200.0,\x202.0,'+'\x201.0);\x0a\x0a#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20varying\x20'+'float\x20vLin'+'earDepth;\x0a'+'#endif\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'//\x20read\x20ga'+'ussian\x20det'+'ails\x0a\x20\x20\x20\x20S'+'platSource'+'\x20source;\x0a\x20'+'\x20\x20\x20if\x20(!in'+'itSource(s'+'ource))\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20')+('=\x20discardV'+'ec;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20saveMargi'+'nal\x20=\x20getM'+'arginalT(s'+'ource,\x20uTi'+'me);\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20float\x20'+'marginal\x20='+'\x20uOpenAnim'+'\x20==\x201\x20?\x201.'+'0\x20:\x20saveMa'+'rginal;\x0a\x20\x20'+'\x20\x20if\x20(marg'+'inal\x20<\x200.0'+'5)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Posi'+'tion\x20=\x20dis'+'cardVec;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec3'+'\x20modelCent'+'er;\x0a\x20\x20\x20\x20bo'+'ol\x20isCente'+'r4D\x20=\x20save'+'Marginal\x20>'+'=\x200.05;\x0a\x20\x20'+'\x20\x20if\x20(isCe'+'nter4D)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'delCenter\x20'+'=\x20readCent'+'er4D(sourc'+'e,\x20uTime);'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20modelCen'+'ter\x20=\x20read'+'Center(sou'+'rce);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20Spl'+'atCenter\x20c'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'center))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return;'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20int\x20'+'showCloud\x20'+'=\x20pointClo'+'udModeEnab'+'led;\x0a\x20\x20\x20\x20i'+'f\x20(prerend'+'erCTime\x20=='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(prer'+'enderCTime'+'\x20>=\x201.0\x20&&'+'\x20prerender'+'CTime\x20<\x202.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20showClo'+'ud\x20=\x201;\x0a\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(prerend'+'erCTime\x20>='+'\x202.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20proje'+'ct\x20center\x20'+'to\x20screen\x20'+'space\x0a\x20\x20\x20\x20'+'SplatCorne'+'r\x20corner;\x0a'+'\x20\x20\x20\x20if\x20(!i'+'nitCorner('+'source,\x20ce'+'nter,\x20corn'+'er,\x20showCl'+'oud))\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_P'+'osition\x20=\x20')+('discardVec'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20vec'+'4\x20clr\x20=\x20re'+'adColor(so'+'urce,\x20uTim'+'e,\x20!isCent'+'er4D,\x20poin'+'tCloudMode'+'Enabled);\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'apply\x20AA\x20c'+'ompensatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'clr.a\x20*=\x20c'+'orner.aaFa'+'ctor;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20if(margi'+'nal\x20>\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20clr.w\x20*=\x20'+'marginal;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20\x0a\x20'+'\x20\x20\x20if\x20(uCo'+'ntrolColor'+'Mode\x20==\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'tint/brigh'+'tness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr\x20=\x20'+'clr\x20*\x20clrS'+'cale\x20+\x20vec'+'4(clrOffse'+'t,\x200.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(uInvertO'+'pacity\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20clr'+'.a\x20=\x201.0\x20-'+'\x20clr.a;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20don\x27t\x20'+'allow\x20out-'+'of-range\x20a'+'lpha\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20clr\x20=\x20c'+'lamp(clr,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20evalu'+'ate\x20spheri'+'cal\x20harmon'+'ics\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20the\x20'+'model-spac'+'e\x20view\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20norm'+'alize(cent'+'er.view\x20*\x20'+'mat3(cente'+'r.modelVie'+'w));\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20rea'+'d\x20sh\x20coeff'+'icients\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sh[SH_COE'+'FFS];\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20readS'+'HData(sour'+'ce,\x20sh,\x20sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr.x'+'yz\x20+=\x20eval'+'SH(sh,\x20dir'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(co'+'rner,\x20clr.'+'w);\x0a\x0a\x20\x20\x20\x20/')+('/\x20pointClo'+'udMode\x0a\x20\x20\x20'+'\x20//\x20if\x20(po'+'intCloudMo'+'deEnabled\x20'+'==\x201)\x20{\x0a\x20\x20'+'\x20\x20//\x20\x20\x20\x20\x20c'+'lr.a\x20=\x201.0'+';\x0a\x20\x20\x20\x20//\x20}'+'\x0a\x20\x20\x20\x20highp'+'\x20vec3\x20colo'+'r\x20=\x20max(cl'+'r.xyz,\x200.0'+');\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20\x0a'+'\x20\x20\x20\x20if\x20(uC'+'ontrolColo'+'rMode\x20==\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20\x20HSV'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'ighp\x20vec3\x20'+'hsv\x20=\x20rgb2'+'hsv(color)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20hsv.'+'y\x20*=\x20uSatu'+'ration;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20hsv.x\x20=\x20f'+'ract(hsv.x'+'\x20+\x20uHueOff'+'set\x20/\x20360.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20\x20RGB'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor\x20=\x20hsv'+'2rgb(hsv);'+'\x20\x20\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wri'+'te\x20output\x0a'+'\x20\x20\x20\x20gl_Pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4(cor'+'ner.offset'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20gaussia'+'nUV\x20=\x20corn'+'er.uv;\x0a\x20\x20\x20'+'\x20gaussianC'+'UV\x20=\x20corne'+'r.cUV;\x0a\x20\x20\x20'+'\x20gaussianS'+'ize\x20=\x20corn'+'er.cSize;\x0a'+'\x20\x20\x20\x20gaussi'+'anColor\x20=\x20'+'vec4(prepa'+'reOutputFr'+'omGamma(co'+'lor),\x20clr.'+'w);\x0a\x20\x20\x20\x20ga'+'ussianColo'+'r\x20=\x20clamp('+'gaussianCo'+'lor,\x200.0,\x20'+'1.0);\x0a\x0a\x20\x20\x20'+'\x20#ifndef\x20D'+'ITHER_NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'d\x20=\x20float('+'source.id)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vLin'+'earDepth\x20='+'\x20-center.v'+'iew.z;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),iP='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'aPosition;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x0a\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(aPos'+'ition,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv0\x20'+'=\x20getImage'+'EffectUV(('+'aPosition.'+'xy\x20+\x201.0)\x20'+'*\x200.5);\x0a\x20\x20'+'\x20\x20}\x0a',rP='\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec4\x20c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(decodeG'+'amma(color'+'.rgb)),\x20co'+'lor.a);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a',aP='\x0a\x20\x20\x20\x20attri'+'bute\x20vec4\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec4\x20vert'+'ex_color;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20co'+'lor;\x0a\x20\x20\x20\x20v'+'oid\x20main(v'+'oid)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20=\x20vertex_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20matrix_'+'model\x20*\x20ve'+'rtex_posit'+'ion;\x0a\x20\x20\x20\x20}'+'\x0a',nP='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceRefra'+'ctionIndex'+';\x0a\x0afloat\x20i'+'ridescence'+'_iorToFres'+'nel(float\x20'+'transmitte'+'dIor,\x20floa'+'t\x20incident'+'Ior)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'incidentIo'+'r)\x20/\x20(tran'+'smittedIor'+'\x20+\x20inciden'+'tIor),\x202.0'+');\x0a}\x0a\x0avec3'+'\x20iridescen'+'ce_iorToFr'+'esnel(vec3'+'\x20transmitt'+'edIor,\x20flo'+'at\x20inciden'+'tIor)\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow((transm'+'ittedIor\x20-'+'\x20vec3(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3(incid'+'entIor)),\x20'+'vec3(2.0))'+';\x0a}\x0a\x0avec3\x20'+'iridescenc'+'e_fresnelT'+'oIor(vec3\x20'+'f0)\x20{\x0a\x20\x20\x20\x20'+'vec3\x20sqrtF'+'0\x20=\x20sqrt(f'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20(vec3'+'(1.0)\x20+\x20sq'+'rtF0)\x20/\x20(v'+'ec3(1.0)\x20-'+'\x20sqrtF0);\x0a'+'}\x0a\x0avec3\x20ir'+'idescence_'+'sensitivit'+'y(float\x20op'+'d,\x20vec3\x20sh'+'ift)\x20{\x0a\x20\x20\x20'+'\x20float\x20PI\x20'+'=\x203.141592'+'653589793;'+'\x0a\x20\x20\x20\x20float'+'\x20phase\x20=\x202'+'.0\x20*\x20PI\x20*\x20'+'opd\x20*\x201.0e'+'-9;\x0a\x20\x20\x20\x20co'+'nst\x20vec3\x20v'+'al\x20=\x20vec3('+'5.4856e-13'+',\x204.4201e-'+'13,\x205.2481'+'e-13);\x0a\x20\x20\x20'+'\x20const\x20vec'+'3\x20pos\x20=\x20ve'+'c3(1.6810e'+'+06,\x201.795'+'3e+06,\x202.2'+'084e+06);\x0a'+'\x20\x20\x20\x20const\x20'+'vec3\x20var\x20='+'\x20vec3(4.32'+'78e+09,\x209.'+'3046e+09,\x20'+'6.6121e+09'+');\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20xyz\x20=\x20v'+'al\x20*\x20sqrt('+'2.0\x20*\x20PI\x20*'+'\x20var)\x20*\x20co'+'s(pos\x20*\x20ph'+'ase\x20+\x20shif'+'t)\x20*\x20exp(-'+'pow(phase,'+'\x202.0)\x20*\x20va'+'r);\x0a\x20\x20\x20\x20xy'+'z.x\x20+=\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+('cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20/=\x20vec3(1'+'.0685e-07)'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20mat3\x20XY'+'Z_TO_REC70'+'9\x20=\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x203.'+'2404542,\x20-'+'0.9692660,'+'\x20\x200.055643'+'4,\x0a\x20\x20\x20\x20\x20\x20\x20'+'-1.5371385'+',\x20\x201.87601'+'08,\x20-0.204'+'0259,\x0a\x20\x20\x20\x20'+'\x20\x20\x20-0.4985'+'314,\x20\x200.04'+'15560,\x20\x201.'+'0572252\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'return\x20XYZ'+'_TO_REC709'+'\x20*\x20xyz;\x0a}\x0a'+'\x0afloat\x20iri'+'descence_f'+'resnel(flo'+'at\x20cosThet'+'a,\x20float\x20f'+'0)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20x\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20x2\x20=\x20x\x20*'+'\x20x;\x0a\x20\x20\x20\x20fl'+'oat\x20x5\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x20\x0a\x0av'+'ec3\x20irides'+'cence_fres'+'nel(float\x20'+'cosTheta,\x20'+'vec3\x20f0)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20clamp'+'(1.0\x20-\x20cos'+'Theta,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20float\x20x2'+'\x20=\x20x\x20*\x20x;\x0a'+'\x20\x20\x20\x20float\x20'+'x5\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x20\x0a\x20'+'\x20\x20\x20return\x20'+'f0\x20+\x20(vec3'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0avec3\x20calc'+'Iridescenc'+'e(float\x20ou'+'tsideIor,\x20'+'float\x20cosT'+'heta,\x20vec3'+'\x20base_f0,\x20'+'float\x20irid'+'escenceThi'+'ckness)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceIor\x20'+'=\x20mix(outs'+'ideIor,\x20ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20float'+'\x20sinTheta2'+'Sq\x20=\x20pow(o'+'utsideIor\x20'+'/\x20iridesce')+('nceIor,\x202.'+'0)\x20*\x20(1.0\x20'+'-\x20pow(cosT'+'heta,\x202.0)'+');\x0a\x20\x20\x20\x20flo'+'at\x20cosThet'+'a2Sq\x20=\x201.0'+'\x20-\x20sinThet'+'a2Sq;\x0a\x0a\x20\x20\x20'+'\x20if\x20(cosTh'+'eta2Sq\x20<\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec3(1.0)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20c'+'osTheta2\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20r0\x20=\x20irid'+'escence_io'+'rToFresnel'+'(iridescen'+'ceIor,\x20out'+'sideIor);\x0a'+'\x20\x20\x20\x20float\x20'+'r12\x20=\x20irid'+'escence_fr'+'esnel(cosT'+'heta,\x20r0);'+'\x0a\x20\x20\x20\x20float'+'\x20r21\x20=\x20r12'+';\x0a\x20\x20\x20\x20floa'+'t\x20t121\x20=\x201'+'.0\x20-\x20r12;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20phi12\x20=\x20i'+'ridescence'+'Ior\x20<\x20outs'+'ideIor\x20?\x20P'+'I\x20:\x200.0;\x0a\x20'+'\x20\x20\x20float\x20p'+'hi21\x20=\x20PI\x20'+'-\x20phi12;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20b'+'aseIor\x20=\x20i'+'ridescence'+'_fresnelTo'+'Ior(base_f'+'0\x20+\x20vec3(0'+'.0001));\x0a\x20'+'\x20\x20\x20vec3\x20r1'+'\x20=\x20iridesc'+'ence_iorTo'+'Fresnel(ba'+'seIor,\x20iri'+'descenceIo'+'r);\x0a\x20\x20\x20\x20ve'+'c3\x20r23\x20=\x20i'+'ridescence'+'_fresnel(c'+'osTheta2,\x20'+'r1);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20phi23'+'\x20=\x20vec3(0.'+'0);\x0a\x20\x20\x20\x20if'+'\x20(baseIor['+'0]\x20<\x20iride'+'scenceIor)'+'\x20phi23[0]\x20'+'=\x20PI;\x0a\x20\x20\x20\x20'+'if\x20(baseIo'+'r[1]\x20<\x20iri'+'descenceIo'+'r)\x20phi23[1'+']\x20=\x20PI;\x0a\x20\x20'+'\x20\x20if\x20(base'+'Ior[2]\x20<\x20i'+'ridescence'+'Ior)\x20phi23'+'[2]\x20=\x20PI;\x0a'+'\x20\x20\x20\x20float\x20'+'opd\x20=\x202.0\x20'+'*\x20iridesce'+'nceIor\x20*\x20i'+'ridescence'+'Thickness\x20'+'*\x20cosTheta'+'2;\x0a\x20\x20\x20\x20vec'+'3\x20phi\x20=\x20ve'+'c3(phi21)\x20'+'+\x20phi23;\x20\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123Sq\x20=\x20c'+'lamp(r12\x20*'+'\x20r23,\x201e-5'+',\x200.9999);'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123\x20=\x20sqr')+('t(r123Sq);'+'\x0a\x20\x20\x20\x20vec3\x20'+'rs\x20=\x20pow(t'+'121,\x202.0)\x20'+'*\x20r23\x20/\x20(1'+'.0\x20-\x20r123S'+'q);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20c0\x20=\x20r'+'12\x20+\x20rs;\x0a\x20'+'\x20\x20\x20vec3\x20i\x20'+'=\x20c0;\x0a\x0a\x20\x20\x20'+'\x20vec3\x20cm\x20='+'\x20rs\x20-\x20t121'+';\x0a\x20\x20\x20\x20for\x20'+'(int\x20m\x20=\x201'+';\x20m\x20<=\x202;\x20'+'m++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20cm\x20*='+'\x20r123;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'sm\x20=\x202.0\x20*'+'\x20iridescen'+'ce_sensiti'+'vity(float'+'(m)\x20*\x20opd,'+'\x20float(m)\x20'+'*\x20phi);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20i\x20+='+'\x20cm\x20*\x20sm;\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20max'+'(i,\x20vec3(0'+'.0));\x0a}\x0a\x0av'+'ec3\x20getIri'+'descence(f'+'loat\x20cosTh'+'eta,\x20vec3\x20'+'specularit'+'y,\x20float\x20i'+'ridescence'+'Thickness)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),oP='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_irid'+'escence;\x0a#'+'endif\x0a\x0avoi'+'d\x20getIride'+'scence()\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_IRID'+'ESCENCE_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20iridescen'+'ce\x20*=\x20mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20*=\x20textur'+'e2DBias({S'+'TD_IRIDESC'+'ENCE_TEXTU'+'RE_NAME},\x20'+'{STD_IRIDE'+'SCENCE_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCE_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scence\x20=\x20i'+'ridescence'+';\x20\x0a}\x0a',lP='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceThick'+'nessMax;\x0a\x0a'+'#ifdef\x20STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_iridesc'+'enceThickn'+'essMin;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'end\x20=\x20text'+'ure2DBias('+'{STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE_NAME},'+'\x20{STD_IRID'+'ESCENCETHI'+'CKNESS_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCET'+'HICKNESS_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20iridescen'+'ceThicknes'+'s\x20=\x20mix(ma'+'terial_iri'+'descenceTh'+'icknessMin'+',\x20material'+'_iridescen'+'ceThicknes'+'sMax,\x20blen'+'d);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20ir'+'idescenceT'+'hickness\x20='+'\x20material_'+'iridescenc'+'eThickness'+'Max;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dIridesce'+'nceThickne'+'ss\x20=\x20iride'+'scenceThic'+'kness;\x20\x0a}\x0a',cP='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'fractionIn'+'dex;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tIor()\x20{\x0a#'+'ifdef\x20STD_'+'IOR_CONSTA'+'NT\x0a\x20\x20\x20\x20dIo'+'r\x20=\x20materi'+'al_refract'+'ionIndex;\x0a'+'#else\x0a\x20\x20\x20\x20'+'dIor\x20=\x201.0'+'\x20/\x201.5;\x0a#e'+'ndif\x0a}\x0a',hP='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20light{i}_'+'color;\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec3\x20light'+'{i}_direct'+'ion;\x0a\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20LIT_CODE'+'_LIGHTS_PO'+'INT\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20point\x20l'+'ights\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_pos'+'ition;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_ra'+'dius;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20SPOT\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20spot\x20ligh'+'ts\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20l'+'ight{i}_di'+'rection;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20light'+'{i}_innerC'+'oneAngle;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_outer'+'ConeAngle;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'3\x20light{i}'+'_position;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20vec3\x20lig'+'ht{i}_half'+'Width;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_hal'+'fHeight;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'FALLOFF\x20=='+'\x20LINEAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+('T_CODE_FAL'+'LOFF_LINEA'+'R\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20linear\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}FALLOFF\x20'+'==\x20INVERSE'+'SQUARED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ca'+'sting\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'CASTSHADOW'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'at4\x20light{'+'i}_shadowM'+'atrix;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_sh'+'adowIntens'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec4\x20ligh'+'t{i}_shado'+'wParams;\x20/'+'/\x20width,\x20h'+'eight,\x20bia'+'s,\x20radius\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_s'+'hadowSearc'+'hArea;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20light{i}'+'_cameraPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_sof'+'tShadowPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20direction'+'al\x20(cascad'+'ed)\x20shadow'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrixPa'+'lette[4];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec4\x20light'+'{i}_shadow'+'CascadeDis'+'tances;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20in'+'t\x20light{i}'+'_shadowCas')+('cadeCount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_shad'+'owCascadeB'+'lend;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'SHADOW_PCF'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2DShado'+'w\x20light{i}'+'_shadowMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_shadowM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'okie\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIGHT{i}C'+'OOKIE)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_COOKIE\x20'+'//\x20include'+'\x20functiona'+'lity\x20for\x20c'+'ookies\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20light{i'+'}_cookie;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_cooki'+'eIntensity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d'+'efined(LIG'+'HT{i}CASTS'+'HADOW)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20ligh'+'t{i}_shado'+'wMatrix;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20SPOT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20lig')+('ht{i}_cook'+'ie;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_c'+'ookieInten'+'sity;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIGHT{i}C'+'ASTSHADOW)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'light{i}_s'+'hadowMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIGH'+'T{i}COOKIE'+'_TRANSFORM'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20light{i}_'+'cookieMatr'+'ix;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c2\x20light{i'+'}_cookieOf'+'fset;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),dP='\x0afloat\x20get'+'LightDiffu'+'se(vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir,\x20vec3\x20'+'lightDirNo'+'rm)\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',fP='\x0avec3\x20eval'+'OmniLight('+'vec3\x20light'+'PosW)\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'PositionW\x20'+'-\x20lightPos'+'W;\x0a}\x0a',uP='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',pP='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0avoid\x20e'+'valuateLig'+'ht{i}(\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20iridesc'+'enceFresne'+'l\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20color\x0a\x20\x20\x20'+'\x20vec3\x20ligh'+'tColor\x20=\x20l'+'ight{i}_co'+'lor;\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x20&&\x20!defi'+'ned(LIT_SH'+'ADOW_CATCH'+'ER)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20return\x20if'+'\x20the\x20light'+'\x20color\x20is\x20'+'black\x20(use'+'d\x20by\x20shado'+'w\x20catcher\x20'+'-\x20this\x20way'+'\x20this\x20ligh'+'t\x20is\x20very\x20'+'cheap)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(a'+'ll(equal(l'+'ightColor,'+'\x20vec3(0.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20dir'+'ectional\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dLight'+'DirNormW\x20='+'\x20light{i}_'+'direction;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20omn'+'i\x20or\x20spot\x20'+'light\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtDirW\x20=\x20'+'evalOmniLi'+'ght(light{'+'i}_positio'+'n);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightDi'+'rNormW\x20=\x20n'+'ormalize(l'+'ightDirW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20cookie\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'COOKIE)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_FALLOF'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_TRANSF'+'ORM\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2DXform('+('light{i}_c'+'ookie,\x20lig'+'ht{i}_shad'+'owMatrix,\x20'+'light{i}_c'+'ookieInten'+'sity,\x20ligh'+'t{i}_cooki'+'eMatrix,\x20l'+'ight{i}_co'+'okieOffset'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2D(light'+'{i}_cookie'+',\x20light{i}'+'_shadowMat'+'rix,\x20light'+'{i}_cookie'+'Intensity)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}COOKIE_TR'+'ANSFORM\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'Cookie2DCl'+'ipXform(li'+'ght{i}_coo'+'kie,\x20light'+'{i}_shadow'+'Matrix,\x20li'+'ght{i}_coo'+'kieIntensi'+'ty,\x20light{'+'i}_cookieM'+'atrix,\x20lig'+'ht{i}_cook'+'ieOffset).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20cookieAtt'+'enuation\x20='+'\x20getCookie'+'2DClip(lig'+'ht{i}_cook'+'ie,\x20light{'+'i}_shadowM'+'atrix,\x20lig'+'ht{i}_cook'+'ieIntensit'+'y).{LIGHT{'+'i}COOKIE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20OMNI\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'CookieCube'+'(light{i}_'+'cookie,\x20li'+'ght{i}_sha')+('dowMatrix,'+'\x20light{i}_'+'cookieInte'+'nsity).{LI'+'GHT{i}COOK'+'IE_CHANNEL'+'};\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20mu'+'ltiply\x20lig'+'ht\x20color\x20b'+'y\x20the\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lig'+'htColor\x20*='+'\x20cookieAtt'+'enuation;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20di'+'stance\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20==\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}FAL'+'LOFF\x20==\x20LI'+'NEAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Linear(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20=\x20g'+'etFalloffI'+'nvSquared('+'light{i}_r'+'adius,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20non'+'\x20punctual\x20'+'lights\x20onl'+'y\x20gets\x20the'+'\x20range\x20win'+'dow\x20here\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Window(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20spot\x20li'+'ght\x20angle\x20'+'falloff\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20SPOT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20!de'+'fined(LIGH'+'T{i}COOKIE'+')\x20||\x20defin'+'ed(LIGHT{i'+'}COOKIE_FA'+'LLOFF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dAtten\x20'+'*=\x20getSpot'+'Effect(lig'+'ht{i}_dire'+'ction,\x20lig'+'ht{i}_inne'+'rConeAngle'+',\x20light{i}'+'_outerCone'+'Angle,\x20dLi'+'ghtDirNorm'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20if\x20(dA'+'tten\x20<\x200.0')+('0001)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20are'+'a\x20light\x20va'+'lues\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcR'+'ectLightVa'+'lues(light'+'{i}_positi'+'on,\x20light{'+'i}_halfWid'+'th,\x20light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20calcDi'+'skLightVal'+'ues(light{'+'i}_positio'+'n,\x20light{i'+'}_halfWidt'+'h,\x20light{i'+'}_halfHeig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcS'+'phereLight'+'Values(lig'+'ht{i}_posi'+'tion,\x20ligh'+'t{i}_halfW'+'idth,\x20ligh'+'t{i}_halfH'+'eight);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'lighting\x20-'+'\x20LTC\x20light'+'s\x20do\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20'+'into\x20atten'+'uation\x20tha'+'t\x20affects\x20'+'specular\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20atten'+'Diffuse\x20-\x20'+'separate\x20d'+'iffuse\x20att'+'enuation\x20f'+'or\x20non-pun'+'ctual\x20ligh'+'t\x20sources\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20NB:\x20'+'A\x20better\x20a'+'pproximati'+'on\x20perhaps'+'\x20using\x20wra'+'p\x20lighting'+'\x20could\x20be\x20'+'implemente'+'d\x20here\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20atten'+'Diffuse\x20=\x20'+'getLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dL'+'ightDirNor'+'mW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x2016.0\x20i'+'s\x20a\x20consta'+'nt\x20that\x20is'+'\x20in\x20getFal'+'loffInvSqu'+'ared()\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20==\x20'+'RECT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getRectL'+'ightDiffus'+'e(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20lightD'+'irW,\x20dLigh'+'tDirNormW)'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20attenDiff'+'use\x20=\x20getD'+'iskLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20li'+'ghtDirW,\x20d'+'LightDirNo'+'rmW)\x20*\x2016.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getSpher'+'eLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20ligh'+'tDirW,\x20dLi'+'ghtDirNorm'+'W)\x20*\x2016.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20one\x20'+'parameter\x20'+'is\x20unused\x20'+'for\x20punctu'+'al\x20lights\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20*=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20vec3('+'0.0),\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20apply\x20th'+'e\x20shadow\x20a'+'ttenuation'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'CASTSHADOW'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadow{i'+'}(vec3(0.0'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adow{i}(li'+'ghtDirW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20App')+('ly\x20shadow\x20'+'intensity\x20'+'to\x20the\x20sha'+'dow\x20value\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20=\x20mix'+'(1.0,\x20shad'+'ow,\x20light{'+'i}_shadowI'+'ntensity);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20*=\x20'+'shadow;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_SHADOW_'+'CATCHER)\x20&'+'&\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20accum'+'ulate\x20shad'+'ows\x20for\x20di'+'rectional\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ShadowCatc'+'her\x20*=\x20sha'+'dow;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20-\x20they\x20do'+'\x20not\x20mix\x20d'+'iffuse\x20lig'+'hting\x20into'+'\x20specular\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20('+'(attenDiff'+'use\x20*\x20dAtt'+'en)\x20*\x20ligh'+'tColor)\x20*\x20'+'(1.0\x20-\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(atte'+'nDiffuse\x20*'+'\x20dAtten)\x20*'+'\x20lightColo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20punctua'+'l\x20light\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(AR'+'EA_LIGHTS)'+'\x20&&\x20define'+'d(LIT_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(dAtt'+'en\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20litA'+'rgs_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20spec'+'ular\x20light'+'ing\x0a\x20\x20\x20\x20#i'+'fdef\x20LIGHT')+('{i}AFFECT_'+'SPECULARIT'+'Y\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x20//\x20area\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccSpecula'+'rLight\x20+=\x20'+'ccLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_clear'+'coat_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20ccLTC'+'SpecFres\x20*'+'\x20getDiskLi'+'ghtSpecula'+'r(litArgs_'+'clearcoat_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20+'+'=\x20ccLTCSpe'+'cFres\x20*\x20ge'+'tSphereLig'+'htSpecular'+'(litArgs_c'+'learcoat_w'+'orldNormal'+',\x20dViewDir'+'W)\x20*\x20dAtte'+'n\x20*\x20lightC'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20dLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp')+('ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20SPHERE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20d'+'LTCSpecFre'+'s\x20*\x20getSph'+'ereLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20punctual'+'\x20light\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20is\x20fres'+'nel\x20needed'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20LI'+'T_FRESNEL_'+'MODEL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'GHT{i}FRES'+'NEL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20hal'+'fDirW\x20=\x20no'+'rmalize(-d'+'LightDirNo'+'rmW\x20+\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20if\x20LTC\x20'+'lights\x20are'+'\x20present,\x20'+'specular\x20m'+'ust\x20be\x20acc'+'umulated\x20w'+'ith\x20specul'+'arity\x20(spe'+'cularity\x20i'+'s\x20pre\x20mult'+'iplied\x20by\x20'+'punctual\x20l'+'ight\x20fresn'+'el)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtspecula'+'rCC\x20=\x20getL'+'ightSpecul'+'ar(halfDir'+'W,\x20ccReflD'+'irW,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_clearcoat'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tspecularC'+'C\x20*=\x20getFr'+'esnelCC(do'+'t(dViewDir'+'W,\x20halfDir'+'W));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20lightsp'+'ecularCC;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_sheen_glo'+'ss)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20lightSpec'+'ular\x20=\x20get'+'LightSpecu'+'lar(halfDi'+'rW,\x20dReflD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightSpecu'+'lar\x20*=\x20get'+'Fresnel(do'+'t(dViewDir'+'W,\x20halfDir'+'W),\x20litArg'+'s_gloss,\x20l'+'itArgs_spe'+'cularity,\x20'+'iridescenc'+'eFresnel,\x20'+'litArgs_ir'+'idescence_'+'intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20*=\x20g'+'etFresnel('+'dot(dViewD'+'irW,\x20halfD'+'irW),\x20litA'+'rgs_gloss,'+'\x20litArgs_s')+('pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20lightSp'+'ecular\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20+=\x20light'+'Specular;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a#en'+'dif\x0a'),mP='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20vec3\x20'+'getShadowS'+'ampleCoord'+'{i}(mat4\x20s'+'hadowTrans'+'form,\x20vec4'+'\x20shadowPar'+'ams,\x20vec3\x20'+'worldPosit'+'ion,\x20vec3\x20'+'lightPos,\x20'+'inout\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'vec3\x20norma'+'l)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'urfacePosi'+'tion\x20=\x20wor'+'ldPosition'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT{i}_SHA'+'DOW_SAMPLE'+'_POINT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20len'+'gth(lightD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightDir'+'\x20=\x20surface'+'Position\x20-'+'\x20lightPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20lightD'+'ir;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_S'+'OURCE_ZBUF'+'FER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+('NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_NORMAL_O'+'FFSET\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20distScal'+'e\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20abs'+'(dot(vPosi'+'tionW\x20-\x20li'+'ghtPos,\x20li'+'ghtDirNorm'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20posi'+'tionInShad'+'owSpace\x20=\x20'+'shadowTran'+'sform\x20*\x20ve'+'c4(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM'+'PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20/=\x20po'+'sitionInSh'+'adowSpace.')+('w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20posit'+'ionInShado'+'wSpace.xy\x20'+'/=\x20positio'+'nInShadowS'+'pace.w;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20po'+'sitionInSh'+'adowSpace.'+'z\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20thi'+'s\x20is\x20curre'+'ntly\x20unuse'+'d\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20SHADOW_SA'+'MPLE_Z_BIA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20positionI'+'nShadowSpa'+'ce.z\x20+=\x20ge'+'tShadowBia'+'s(shadowPa'+'rams.x,\x20sh'+'adowParams'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20positi'+'onInShadow'+'Space.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20surfaceP'+'osition;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'evaluation'+'\x20function\x0a'+'\x20\x20\x20\x20float\x20'+'getShadow{'+'i}(vec3\x20li'+'ghtDirW)\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20shado'+'w\x20cascades'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_CASCADES'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20sel'+'ect\x20shadow'+'\x20cascade\x20m'+'atrix\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'t\x20cascadeI'+'ndex\x20=\x20get'+'ShadowCasc'+'adeIndex(l'+'ight{i}_sh'+'adowCascad'+'eDistances'+',\x20light{i}'+'_shadowCas'+'cadeCount)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'_SHADOW_CA'+'SCADE_BLEN'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'scadeIndex'+'\x20=\x20ditherS'+'hadowCasca'+'deIndex(ca'+'scadeIndex'+',\x20light{i}'+'_shadowCas'+'cadeDistan'+'ces,\x20light')+('{i}_shadow'+'CascadeCou'+'nt,\x20light{'+'i}_shadowC'+'ascadeBlen'+'d);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mat4'+'\x20shadowMat'+'rix\x20=\x20ligh'+'t{i}_shado'+'wMatrixPal'+'ette[casca'+'deIndex];\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t4\x20shadowM'+'atrix\x20=\x20li'+'ght{i}_sha'+'dowMatrix;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20DIRE'+'CTIONAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20light'+'\x20does\x20not\x20'+'have\x20a\x20pos'+'ition\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20light'+'{i}_shadow'+'Params,\x20vP'+'ositionW,\x20'+'vec3(0.0),'+'\x20lightDirW'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20shad'+'owCoord\x20=\x20'+'getShadowS'+'ampleCoord'+'{i}(shadow'+'Matrix,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20vPosition'+'W,\x20light{i'+'}_position'+',\x20lightDir'+'W,\x20dLightD'+'irNormW,\x20d'+'VertexNorm'+'alW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Fade\x20di'+'rectional\x20'+'shadow\x20at\x20'+'the\x20far\x20di'+'stance\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadowCoord'+'\x20=\x20fadeSha'+'dow(shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owCascadeD'+'istances);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20--'+'---\x20sample'+'\x20the\x20shado'+'w\x20-----\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x20/'+'/\x20-----\x20di'+'rectional\x20'+'light\x20----')+('-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wVSM16(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x205'+'.54);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20VSM_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowVSM32('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x2015.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCS'+'S_32F\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20sh'+'adowSearch'+'Area\x20=\x20vec'+'2(length(l'+'ight{i}_ha'+'lfWidth),\x20'+'length(lig'+'ht{i}_half'+'Height))\x20*'+'\x20light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCSS(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20light{i}_'+'cameraPara'+'ms,\x20shadow'+'SearchArea'+',\x20lightDir'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20light{i}'+'_softShado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF1_16'+'F\x20||\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'1_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF3'+'_16F\x20||\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCF3x3(SH'+'ADOWMAP_PA'+'SS(light{i'+'}_shadowMa'+'p),\x20shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owParams);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF5_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF5_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(SHADOWMAP'+'_PASS(ligh'+'t{i}_shado'+'wMap),\x20sha'+'dowCoord,\x20'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20S'+'POT\x20//\x20---'+'--\x20spot\x20li'+'ght\x20-----\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20V'+'SM_16F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potVSM16(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x205.54,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowSpo')+('tVSM32(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x201'+'5.0,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20shad'+'owSearchAr'+'ea\x20=\x20vec2('+'length(lig'+'ht{i}_half'+'Width),\x20le'+'ngth(light'+'{i}_halfHe'+'ight))\x20*\x20l'+'ight{i}_sh'+'adowSearch'+'Area;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(lig'+'ht{i}_shad'+'owSearchAr'+'ea);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotPCSS('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x20light{i}'+'_cameraPar'+'ams,\x20shado'+'wSearchAre'+'a,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF1_1'+'6F\x20||\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potPCF1x1('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(SHA')+('DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F5_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'5x5(SHADOW'+'MAP_PASS(l'+'ight{i}_sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20light{i'+'}_shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x20//\x20'+'-----\x20omni'+'\x20light\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCSS_32F'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P'+'UNCTUAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(len'+'gth(light{'+'i}_halfWid'+'th),\x20lengt'+'h(light{i}'+'_halfHeigh'+'t))\x20*\x20ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2(light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20shadowSe'+'archArea,\x20'+'lightDirW)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_')+('32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF3_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF3_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowOmniPC'+'F3x3(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),_P='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20areaLi'+'ghtsLutTex'+'1;\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20sampler2D'+'\x20areaLight'+'sLutTex2;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCSSPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22shadow'+'SoftPS\x22\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(SH'+'ADOW_KIND_'+'VSM)\x0a\x20\x20\x20\x20#'+'include\x20\x22s'+('hadowEVSMP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_LINEA'+'R\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fall'+'offLinearP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22fal'+'loffInvSqu'+'aredPS\x22\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20LIT_COD'+'E_LIGHTS_P'+'OINT\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'ightDirPoi'+'ntPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22spot'+'PS\x22\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_CODE_CO'+'OKIE\x0a\x20\x20\x20\x20#'+'include\x20\x22c'+'ookiePS\x22\x0a#'+'endif\x0a\x0a//\x20'+'clustered\x20'+'lighting\x0a#'+'ifdef\x20LIT_'+'CLUSTERED_'+'LIGHTS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22clustered'+'LightPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHT_'+'COUNT\x20>\x200\x0a'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20genera'+'te\x20shadow\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionSha'+'dowPS,\x20LIG'+'HT_COUNT\x22\x0a'+'\x0a\x20\x20\x20\x20//\x20LO'+'OP\x20-\x20gener'+'ate\x20light\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionLig'+'htPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a'),gP='\x0avoid\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20vec3\x20li'+'ghtmap,\x20\x0a\x20'+'\x20\x20\x20vec3\x20di'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20worldNo'+'rmal,\x20\x0a\x20\x20\x20'+'\x20vec3\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'vec3\x20refle'+'ctionDir,\x20'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20'+'\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20vertexNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'mat3\x20tbn\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x20\x0a\x20\x20'+'\x20\x20float\x20ir'+'idescenceI'+'ntensity\x0a#'+'endif\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'rectional\x20'+'lightmap\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x20&'+'&\x20defined('+'LIT_DIR_LI'+'GHTMAP)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dot(dir,\x20'+'dir)\x20<\x200.0'+'001)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'lightmap;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20vligh'+'t\x20=\x20satura'+'te(dot(dir'+',\x20-vertexN'+'ormal));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20fli'+'ght\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20nl'+'ight\x20=\x20(fl'+'ight\x20/\x20max'+'(vlight,\x200'+'.01))\x20*\x200.'+'5;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p\x20*\x20nlight'+'\x20*\x202.0;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20half'+'Dir\x20=\x20norm'+'alize(-dir'+'\x20+\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'specularLi'+'ght\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'*=\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20getFre'+'snel(dot(v'+'iewDir,\x20ha'+'lfDir),\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceInt'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'+=\x20specula'+'rLight;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20non-dire'+'ctional\x20li'+'ghtmap\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),SP='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'vec3\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_d'+'irLightMap'+';\x0a#endif\x0a\x0a'+'void\x20getLi'+'ghtMap()\x20{'+'\x0a\x0a\x20\x20\x20\x20dLig'+'htmap\x20=\x20ve'+'c3(1.0);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_LIGHT'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dLi'+'ghtmap\x20*=\x20'+'{STD_LIGHT'+'_TEXTURE_D'+'ECODE}(tex'+'ture2DBias'+'({STD_LIGH'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'LIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_LIGHTM'+'AP_DIR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dir\x20=\x20'+'texture2DB'+'ias(textur'+'e_dirLight'+'Map,\x20{STD_'+'LIGHT_TEXT'+'URE_UV},\x20t'+'extureBias'+').xyz\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dir'+'Dot\x20=\x20dot('+'dir,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightm'+'apDir\x20=\x20(d'+'irDot\x20>\x200.'+'001)\x20?\x20dir'+'\x20/\x20sqrt(di'+'rDot)\x20:\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_LIGHT_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightma'+'p\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_LIGHT_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a}\x0a',yP='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'float\x20calc'+'LightSpecu'+'lar(float\x20'+'gloss,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20h,\x20vec'+'3\x20lightDir'+'Norm,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20float\x20PI'+'\x20=\x203.14159'+'2653589793'+';\x0a\x20\x20\x20\x20floa'+'t\x20roughnes'+'s\x20=\x20max((1'+'.0\x20-\x20gloss'+')\x20*\x20(1.0\x20-'+'\x20gloss),\x200'+'.001);\x0a\x20\x20\x20'+'\x20float\x20alp'+'haRoughnes'+'s\x20=\x20roughn'+'ess\x20*\x20roug'+'hness;\x0a\x20\x20\x20'+'\x20float\x20ani'+'sotropy\x20=\x20'+'dAnisotrop'+'y;\x0a\x20\x20\x20\x20vec'+'2\x20directio'+'n\x20=\x20dAniso'+'tropyRotat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'float\x20at\x20='+'\x20mix(alpha'+'Roughness,'+'\x201.0,\x20anis'+'otropy\x20*\x20a'+'nisotropy)'+';\x0a\x20\x20\x20\x20floa'+'t\x20ab\x20=\x20cla'+'mp(alphaRo'+'ughness,\x200'+'.001,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20anisotro'+'picT\x20=\x20nor'+'malize(tbn'+'\x20*\x20vec3(di'+'rection,\x200'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicB\x20=\x20'+'normalize('+'cross(tbn['+'2],\x20anisot'+'ropicT));\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20NoH\x20=\x20dot'+'(worldNorm'+'al,\x20h);\x0a\x20\x20'+'\x20\x20float\x20To'+'H\x20=\x20dot(an'+'isotropicT'+',\x20h);\x0a\x20\x20\x20\x20'+'float\x20BoH\x20'+'=\x20dot(anis'+'otropicB,\x20'+'h);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20a2\x20=\x20'+'at\x20*\x20ab;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20vec3(ab\x20'+'*\x20ToH,\x20at\x20'+'*\x20BoH,\x20a2\x20'+'*\x20NoH);\x0a\x20\x20'+'\x20\x20float\x20v2'+'\x20=\x20dot(v,\x20'+'v);\x0a\x20\x20\x20\x20fl'+'oat\x20w2\x20=\x20a'+'2\x20/\x20v2;\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'ToV\x20=\x20dot('+'anisotropi'+'cT,\x20viewDi'+'r);\x0a\x20\x20\x20\x20fl'+'oat\x20BoV\x20=\x20'+'dot(anisot'+'ropicB,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20float\x20To'+'L\x20=\x20dot(an'+'isotropicT'+(',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20Bo'+'L\x20=\x20dot(an'+'isotropicB'+',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20No'+'V\x20=\x20dot(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20float'+'\x20NoL\x20=\x20dot'+'(worldNorm'+'al,\x20-light'+'DirNorm);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20lambdaV\x20='+'\x20NoL\x20*\x20len'+'gth(vec3(a'+'t\x20*\x20ToV,\x20a'+'b\x20*\x20BoV,\x20N'+'oV));\x0a\x20\x20\x20\x20'+'float\x20lamb'+'daL\x20=\x20NoV\x20'+'*\x20length(v'+'ec3(at\x20*\x20T'+'oL,\x20ab\x20*\x20B'+'oL,\x20NoL));'+'\x0a\x20\x20\x20\x20float'+'\x20G\x20=\x200.5\x20/'+'\x20(lambdaV\x20'+'+\x20lambdaL)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20D\x20*\x20G;'+'\x0a}\x0a\x0afloat\x20'+'getLightSp'+'ecular(vec'+'3\x20h,\x20vec3\x20'+'reflDir,\x20v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'float\x20glos'+'s,\x20mat3\x20tb'+'n)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'LightSpecu'+'lar(gloss,'+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20h,\x20ligh'+'tDirNorm,\x20'+'tbn);\x0a}\x0a'),vP='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afloa'+'t\x20calcLigh'+'tSpecular('+'float\x20glos'+'s,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20h)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20nh\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20specPow\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x20//\x20gloss'+'iness\x20is\x20l'+'inear,\x20pow'+'er\x20is\x20not;'+'\x200\x20-\x202048\x0a'+'\x0a\x20\x20\x20\x20//\x20Ha'+'ck:\x20On\x20Mac'+'\x20OS\x20X,\x20cal'+'ling\x20pow\x20w'+'ith\x20zero\x20f'+'or\x20the\x20exp'+'onent\x20gene'+'rates\x20hide'+'ous\x20artifa'+'cts\x20so\x20bia'+'s\x20up\x20a\x20lit'+'tle\x0a\x20\x20\x20\x20sp'+'ecPow\x20=\x20ma'+'x(specPow,'+'\x200.0001);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(nh,\x20'+'specPow)\x20*'+'\x20(specPow\x20'+'+\x202.0)\x20/\x208'+'.0;\x0a}\x0a\x0aflo'+'at\x20getLigh'+'tSpecular('+'vec3\x20h,\x20ve'+'c3\x20reflDir'+',\x20vec3\x20wor'+'ldNormal,\x20'+'vec3\x20viewD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m,\x20float\x20g'+'loss,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',xP='\x0a\x0afloat\x20sh'+'eenD(vec3\x20'+'normal,\x20ve'+'c3\x20h,\x20floa'+'t\x20roughnes'+'s)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20PI\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20f'+'loat\x20invR\x20'+'=\x201.0\x20/\x20(r'+'oughness\x20*'+'\x20roughness'+');\x0a\x20\x20\x20\x20flo'+'at\x20cos2h\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20*=\x20'+'cos2h;\x0a\x20\x20\x20'+'\x20float\x20sin'+'2h\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'float\x20shee'+'nV(vec3\x20no'+'rmal,\x20vec3'+'\x20viewDir,\x20'+'vec3\x20light'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20NoV\x20=\x20'+'max(dot(no'+'rmal,\x20view'+'Dir),\x200.00'+'0001);\x0a\x20\x20\x20'+'\x20float\x20NoL'+'\x20=\x20max(dot'+'(normal,\x20l'+'ight),\x200.0'+'00001);\x0a\x20\x20'+'\x20\x20return\x201'+'.0\x20/\x20(4.0\x20'+'*\x20(NoL\x20+\x20N'+'oV\x20-\x20NoL\x20*'+'\x20NoV));\x0a}\x0a'+'\x0afloat\x20get'+'LightSpecu'+'larSheen(v'+'ec3\x20h,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'irNorm,\x20fl'+'oat\x20sheenG'+'loss)\x20{\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20float\x20V\x20'+'=\x20sheenV(w'+'orldNormal'+',\x20viewDir,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20return\x20D\x20'+'*\x20V;\x0a}\x0a',TP='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afloat\x20lin'+'earizeDept'+'hWithParam'+'s(float\x20z,'+'\x20vec4\x20came'+'raParams)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'cameraPara'+'ms.w\x20==\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20(c'+'ameraParam'+'s.z\x20*\x20came'+'raParams.y'+')\x20/\x20(camer'+'aParams.y\x20'+'+\x20z\x20*\x20(cam'+'eraParams.'+'z\x20-\x20camera'+'Params.y))'+';\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20came'+'raParams.z'+'\x20+\x20z\x20*\x20(ca'+'meraParams'+'.y\x20-\x20camer'+'aParams.z)'+';\x0a}\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec4\x20ca'+'mera_param'+'s;\x20//\x20x:\x201'+'\x20/\x20camera_'+'far,\x20\x20\x20\x20\x20\x20'+'y:\x20camera_'+'far,\x20\x20\x20\x20\x20z'+':\x20camera_n'+'ear,\x20\x20\x20\x20\x20\x20'+'\x20\x20w:\x20is_or'+'tho\x0a#endif'+'\x0a\x0afloat\x20li'+'nearizeDep'+'th(float\x20z'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20linea'+'rizeDepthW'+'ithParams('+'z,\x20camera_'+'params);\x0a}'+'\x0a#endif\x0a',wP='\x0avoid\x20eval'+'uateBacken'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'SSAO\x20durin'+'g\x20lighting'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_SSAO'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ao\x20'+'*=\x20texture'+'2DLod(ssao'+'Texture,\x20g'+'l_FragCoor'+'d.xy\x20*\x20ssa'+'oTextureSi'+'zeInv,\x200.0'+').r;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20transf'+'orm\x20tangen'+'t\x20space\x20no'+'rmals\x20to\x20w'+'orld\x20space'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_NEED'+'S_NORMAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etReflDir('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20litArgs_'+'gloss,\x20dTB'+'N);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W\x20=\x20normal'+'ize(-refle'+'ct(dViewDi'+'rW,\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR_OR'+'_REFLECTIO'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20f'+'0\x20=\x201.0\x20/\x20'+'litArgs_io'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20f0\x20=\x20'+'(f0\x20-\x201.0)'+'\x20/\x20(f0\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20f0\x20'+'*=\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20i'+'ridescence'+'Fresnel\x20=\x20'+'getIridesc'+('ence(satur'+'ate(dot(dV'+'iewDirW,\x20l'+'itArgs_wor'+'ldNormal))'+',\x20litArgs_'+'specularit'+'y,\x20litArgs'+'_iridescen'+'ce_thickne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'mbient\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20addAmbie'+'nt(litArgs'+'_worldNorm'+'al);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20dDiffuse'+'Light\x20*\x20(1'+'.0\x20-\x20litAr'+'gs_specula'+'rity);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20move\x20a'+'mbient\x20col'+'or\x20out\x20of\x20'+'diffuse\x20(u'+'sed\x20by\x20Lig'+'htmapper,\x20'+'to\x20multipl'+'y\x20ambient\x20'+'color\x20by\x20a'+'ccumulated'+'\x20AO)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SEPARA'+'TE_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dA'+'mbientLigh'+'t\x20=\x20dDiffu'+'seLight;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_O'+'LD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20*=\x20mate'+'rial_ambie'+'nt;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OCCLUD'+'E_DIRECT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20occludeDi'+'ffuse(litA'+'rgs_ao);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTMAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'dLightMap('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmap,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_lightmap'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dViewDir'+'W,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dRef'+'lDirW,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('litArgs_gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dTBN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTING\x20'+'||\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tionCC(ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_glo'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_FRESNE'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccFresne'+'l\x20=\x20getFre'+'snelCC(dot'+'(dViewDirW'+',\x20litArgs_'+'clearcoat_'+'worldNorma'+'l));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccRef'+'lection\x20*='+'\x20ccFresnel'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccFres'+'nel\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20*=\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SH'+'EEN\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'addReflect'+'ionSheen(l'+'itArgs_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20litArgs_s'+'heen_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Fr')+('esnel\x20has\x20'+'to\x20be\x20appl'+'ied\x20to\x20ref'+'lections\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tion(dRefl'+'DirW,\x20litA'+'rgs_gloss)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_FRES'+'NEL_MODEL\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dRe'+'flection.r'+'gb\x20*=\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_iri'+'descence_i'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.rgb\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n.rgb\x20*=\x20l'+'itArgs_spe'+'cularityFa'+'ctor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20ARE'+'A_LIGHTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20has\x20to\x20'+'be\x20accumul'+'ated\x20diffe'+'rently\x20if\x20'+'we\x20want\x20ar'+'ea\x20lights\x20'+'to\x20look\x20co'+'rrect\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dS'+'pecularLig'+'ht\x20*=\x20litA'+'rgs_specul'+'arity;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'valuate\x20ma'+'terial\x20bas'+'ed\x20area\x20li'+'ghts\x20data,')+('\x20shared\x20by'+'\x20all\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20calcLTC'+'LightValue'+'s(litArgs_'+'gloss,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_gl'+'oss,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20LOOP\x20-\x20e'+'valuate\x20al'+'l\x20non-clus'+'tered\x20ligh'+'ts\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT_COUNT\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tEvaluatio'+'nPS,\x20LIGHT'+'_COUNT\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clust'+'ered\x20light'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addClust'+'eredLights'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20dReflDi'+'rW,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_CLEA'+'RCOAT)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_gl'+'oss,\x20litAr'+'gs_specula'+'rity,\x20dVer'+'texNormalW'+',\x20dTBN,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_gloss,'+'\x20litArgs_s'+'heen_gloss'+',\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20AR'+'EA_LIGHTS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity\x20=\x20ve'+'c3(1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dViewD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'thickness,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_albe'+'do,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_t'+'ransmissio'+'n,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_disp'+'ersion\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_iridesc'+'ence_inten'+'sity\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20ambient'+'\x20occlusion'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_OC')+('CLUDE_DIRE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20occlu'+'deDiffuse('+'litArgs_ao'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIT_OCCLU'+'DE_SPECULA'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeS'+'pecular(li'+'tArgs_glos'+'s,\x20litArgs'+'_ao,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULARIT'+'Y_FACTOR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20*=\x20litAr'+'gs_specula'+'rityFactor'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIT_OPACI'+'TY_FADES_S'+'PECULAR)\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIT_BLEN'+'D_TYPE\x20==\x20'+'NORMAL\x20||\x20'+'LIT_BLEND_'+'TYPE\x20==\x20PR'+'EMULTIPLIE'+'D\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20specLum\x20='+'\x20dot((dSpe'+'cularLight'+'\x20+\x20dReflec'+'tion.rgb\x20*'+'\x20dReflecti'+'on.a),\x20vec'+'3(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecLum\x20+=\x20'+'dot(ccSpec'+'ularLight\x20'+'*\x20litArgs_'+'clearcoat_'+'specularit'+'y\x20+\x20ccRefl'+'ection\x20*\x20l'+'itArgs_cle'+'arcoat_spe'+'cularity,\x20'+'vec3(\x200.21'+'26,\x200.7152'+',\x200.0722\x20)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_opacity\x20'+'=\x20clamp(li'+'tArgs_opac'+'ity\x20+\x20gamm'+'aCorrectIn'+'put(specLu'+'m),\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_op'+'acity\x20*=\x20m'+'aterial_al'+'phaFade;\x0a\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nd\x20chunks\x20'+'-\x20when\x20bak'+'ing\x20lightm'+'ap\x0a\x20\x20\x20\x20#if'+'def\x20LIT_LI')+('GHTMAP_BAK'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22bak'+'eLmEndPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_LIGHTM'+'AP_BAKING_'+'DIR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22bake'+'DirLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20en'+'d\x20chunks\x20-'+'\x20in\x20all\x20ot'+'her\x20cases\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22en'+'dPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22outputA'+'lphaPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_MSDF\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20applyMs'+'df(gl_Frag'+'Color);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22output'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22de'+'bugOutputP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HADOW_CATC'+'HER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20when\x20the'+'\x20shadow\x20ca'+'tcher\x20is\x20e'+'nabled\x20-\x20a'+'ccumulated'+'\x20shadows\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20=\x20vec3'+'(dShadowCa'+'tcher);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a'),EP='\x0a\x0a//\x20globa'+'ls\x0avec3\x20sR'+'eflection;'+'\x0avec3\x20dVer'+'texNormalW'+';\x0avec3\x20dTa'+'ngentW;\x0ave'+'c3\x20dBinorm'+'alW;\x0avec3\x20'+'dViewDirW;'+'\x0avec3\x20dRef'+'lDirW;\x0avec'+'3\x20ccReflDi'+'rW;\x0a\x0a//\x20Pe'+'r-light\x20te'+'mporaries\x0a'+'vec3\x20dLigh'+'tDirNormW;'+'\x0afloat\x20dAt'+'ten;\x0a\x0a//\x20O'+'utputs\x0amat'+'3\x20dTBN;\x0ave'+'c4\x20dReflec'+'tion;\x0avec3'+'\x20dDiffuseL'+'ight;\x0avec3'+'\x20dSpecular'+'Light;\x0aflo'+'at\x20ccFresn'+'el;\x0avec3\x20c'+'cReflectio'+'n;\x0avec3\x20cc'+'SpecularLi'+'ght;\x0afloat'+'\x20ccSpecula'+'rityNoFres'+';\x0avec3\x20sSp'+'ecularLigh'+'t;\x0a\x0a//\x20FRA'+'GMENT\x20SHAD'+'ER\x20INPUTS:'+'\x20UNIFORMS\x0a'+'\x0a#ifdef\x20LI'+'T_DISPERSI'+'ON\x0a\x20\x20\x20\x20uni'+'form\x20float'+'\x20material_'+'dispersion'+';\x0a#endif\x0a\x0a'+'#ifndef\x20LI'+'T_OPACITY_'+'FADES_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_alphaFad'+'e;\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_SSAO\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20s'+'saoTexture'+';\x0a\x20\x20\x20\x20unif'+'orm\x20vec2\x20s'+'saoTexture'+'SizeInv;\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20a'+'nd\x20shadowi'+'ng\x20declara'+'tions\x0a\x0a#if'+'def\x20LIT_SH'+'ADOW_CATCH'+'ER\x0a\x20\x20\x20\x20//\x20'+'a\x20variable'+'\x20to\x20accumu'+'late\x20shado'+'ws\x20for\x20sha'+'dow\x20catche'+'r\x20material'+'s\x0a\x20\x20\x20\x20floa'+'t\x20dShadowC'+'atcher\x20=\x201'+'.0;\x0a#endif'+'\x0a\x0a//\x20LOOP\x20'+'-\x20uniform\x20'+'declaratio'+'ns\x20for\x20all'+'\x20non-clust'+'ered\x20light'+'s\x0a#if\x20LIGH'+'T_COUNT\x20>\x20'+'0\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDeclarati'+'onPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+('\x20#if\x20LIT_F'+'RESNEL_MOD'+'EL\x20==\x20NONE'+'\x20&&\x20!defin'+'ed(LIT_REF'+'LECTIONS)\x20'+'&&\x20!define'+'d(LIT_DIFF'+'USE_MAP)\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a//\x20lightm'+'ap\x20baking\x0a'+'#ifdef\x20STD'+'_LIGHTMAP_'+'DIR\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20bakeDir;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_L'+'IGHTMAP_BA'+'KING_ADD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20ambie'+'ntBakeOccl'+'usionContr'+'ast;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20ambient'+'BakeOcclus'+'ionBrightn'+'ess;\x0a#endi'+'f\x0a'),bP='\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4(0'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ccS'+'pecularLig'+'ht\x20=\x20vec3('+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'NONE_SLICE'+'_MODE\x20==\x20S'+'LICED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22startN'+'ineSlicedP'+'S\x22\x0a\x20\x20\x20\x20#el'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20TILE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'startNineS'+'licedTiled'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_NEEDS_NOR'+'MAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW\x20=\x20n'+'ormalize(v'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'TANGENTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_HEI'+'GHTS)\x20||\x20d'+'efined(LIT'+'_USE_NORMA'+'LS)\x20||\x20def'+'ined(LIT_U'+'SE_CLEARCO'+'AT_NORMALS'+')\x20||\x20defin'+'ed(LIT_GGX'+'_SPECULAR)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dTa'+'ngentW\x20=\x20v'+'TangentW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dBin'+'ormalW\x20=\x20v'+'BinormalW;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20getVie'+'wDir();\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_TB'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getTBN'+'(dTangentW'+',\x20dBinorma'+'lW,\x20dVerte'+'xNormalW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_TWO_S'+'IDED_LIGHT'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'handleTwoS'+'idedLighti'+'ng();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20i'+'nvoke\x20fron'+'tend\x20funct'+'ions\x0a\x20\x20\x20\x20e'+'valuateFro'+'ntend();\x0a\x0a'+('\x20\x20\x20\x20#inclu'+'de\x20\x22debugP'+'rocessFron'+'tendPS\x22\x0a\x0a\x20'+'\x20\x20\x20evaluat'+'eBackend()'+';\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a'),AP='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20vec3\x20mate'+'rial_ambie'+'nt;\x0a\x0a#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTING\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightSp'+'ecularAnis'+'oGGXPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightS'+'pecularBli'+'nnPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'combinePS\x22'+'\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tmapAddPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'ADD_AMBIEN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ambi'+'entPS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIT_MSDF'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22msdfP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'include\x20\x22v'+'iewDirPS\x22\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flDirAniso'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a//\x20li'+'ghting\x20fun'+'ctionality')+('\x0a#include\x20'+'\x22lightingP'+'S\x22\x0a\x0a'),CP='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',PP='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',MP='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec4\x20ve'+'rtex_color'+';\x0a#endif\x0a\x0a'+'#ifdef\x20NIN'+'ESLICED\x0a\x0a\x20'+'\x20\x20\x20varying'+'\x20vec2\x20vMas'+'k;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'vTiledUv;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20v'+'ec2\x20outerS'+'cale;\x0a\x20\x20\x20\x20'+'uniform\x20me'+'diump\x20vec4'+'\x20atlasRect'+';\x0a\x0a#endif\x0a'+'\x0avec3\x20dPos'+'itionW;\x0ama'+'t4\x20dModelM'+'atrix;\x0a\x0a#i'+'nclude\x20\x22tr'+'ansformCor'+'eVS\x22\x0a\x0a#ifd'+'ef\x20UV0\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'c2\x20vertex_'+'texCoord1;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22uv1VS'+'\x22\x0a#endif\x0a\x0a'+'\x0a#ifdef\x20LI'+'NEAR_DEPTH'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20#d'+'efine\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'transformV'+'S\x22\x0a\x0a#ifdef'+'\x20NORMALS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22normalC'+'oreVS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22normalVS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20TANG'+'ENTS\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_tangent;\x0a'+'#endif\x0a\x0a//'+'\x20expand\x20un'+'iforms\x20for'+'\x20uv\x20transf'+'orms\x0a#incl'+'ude\x20\x22uvTra'+'nsformUnif'+'ormsPS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'#ifdef\x20MSD'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22msdf'+'VS\x22\x0a#endif'+'\x0a\x0a#include'+'\x20\x20\x22litUser'+'CodeVS\x22\x0a\x0av'+'oid\x20main(v'+'oid)\x20{\x0a\x0a\x20\x20'+'\x20\x20#include'+('\x20\x22litUserM'+'ainStartVS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'default\x20po'+'int\x20size\x20t'+'o\x201\x20in\x20cas'+'e\x20the\x20shad'+'er\x20is\x20used'+'\x20with\x20poin'+'ts\x0a\x20\x20\x20\x20gl_'+'PointSize\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20getP'+'osition();'+'\x0a\x20\x20\x20\x20vPosi'+'tionW\x20=\x20ge'+'tWorldPosi'+'tion();\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'NORMALS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vNor'+'malW\x20=\x20get'+'Normal();\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20TANGENT'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vTangentW\x20'+'=\x20normaliz'+'e(dNormalM'+'atrix\x20*\x20ve'+'rtex_tange'+'nt.xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vBi'+'normalW\x20=\x20'+'cross(vNor'+'malW,\x20vTan'+'gentW)\x20*\x20v'+'ertex_tang'+'ent.w;\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(GGX_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3(0,\x201'+',\x200));\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV0\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv0'+'\x20=\x20getUv0('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20UV'+'0_UNMODIFI'+'ED\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv1\x20=\x20ge'+'tUv1();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20UV1_UNM'+'ODIFIED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vUv1\x20=\x20uv1'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20expa'+'nd\x20code\x20fo'+'r\x20uv\x20trans'+'forms\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'uvTransfor'+'mVS,\x20UV_TR'+'ANSFORMS_C'+'OUNT\x22\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20VE'+'RTEX_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition')+(',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vPosi'+'tionW,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20M'+'SDF\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20unpackMs'+'dfParams()'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tUserMainE'+'ndVS\x22\x0a}\x0a'),DP='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20g'+'etPickOutp'+'ut();\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20P'+'REPASS_PAS'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20float'+'2vec4(vLin'+'earDepth);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a',IP='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avec3\x20litA'+'rgs_albedo'+';\x0a\x0a//\x20Tran'+'sparency\x0af'+'loat\x20litAr'+'gs_opacity'+';\x0a\x0a//\x20Emis'+'sion\x20color'+'\x0avec3\x20litA'+'rgs_emissi'+'on;\x0a\x0a//\x20No'+'rmal\x20direc'+'tion\x20in\x20wo'+'rld\x20space\x0a'+'vec3\x20litAr'+'gs_worldNo'+'rmal;\x0a\x0a//\x20'+'Ambient\x20oc'+'clusion\x20am'+'ount,\x20rang'+'e\x20[0..1]\x0af'+'loat\x20litAr'+'gs_ao;\x0a\x0a//'+'\x20Light\x20map'+'\x20color\x0avec'+'3\x20litArgs_'+'lightmap;\x0a'+'\x0a//\x20Light\x20'+'map\x20direct'+'ion\x0avec3\x20l'+'itArgs_lig'+'htmapDir;\x0a'+'\x0a//\x20Surfac'+'e\x20metalnes'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_met'+'alness;\x0a\x0a/'+'/\x20The\x20f0\x20s'+'pecularity'+'\x20factor\x0ave'+'c3\x20litArgs'+'_speculari'+'ty;\x0a\x0a//\x20Sp'+'ecularity\x20'+'intensity\x20'+'factor,\x20ra'+'nge\x20[0..1]'+'\x0afloat\x20lit'+'Args_specu'+'larityFact'+'or;\x0a\x0a//\x20Th'+'e\x20microfac'+'et\x20glossin'+'ess\x20factor'+',\x20range\x20[0'+'..1]\x0afloat'+'\x20litArgs_g'+'loss;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_sh'+'een_gloss;'+'\x0a\x0a//\x20The\x20c'+'olor\x20of\x20th'+'e\x20f0\x20specu'+'larity\x20fac'+'tor\x20for\x20th'+'e\x20sheen\x20la'+'yer\x0avec3\x20l'+'itArgs_she'+'en_specula'+'rity;\x0a\x0a//\x20'+'Transmissi'+'on\x20factor\x20'+'(refractio'+'n),\x20range\x20'+'[0..1]\x0aflo'+'at\x20litArgs'+'_transmiss'+'ion;\x0a\x0a//\x20U'+'niform\x20thi'+'ckness\x20of\x20'+'medium,\x20us'+'ed\x20by\x20tran'+'smission,\x20'+'range\x20[0..'+'inf]\x0afloat'+'\x20litArgs_t'+'hickness;\x0a'+'\x0a//\x20Index\x20'+'of\x20refract'+'ion\x0afloat\x20'+('litArgs_io'+'r;\x0a\x0a//\x20Dis'+'persion,\x20r'+'ange\x20[0..1'+']\x20typicall'+'y,\x20but\x20can'+'\x20be\x20higher'+'\x0afloat\x20lit'+'Args_dispe'+'rsion;\x0a\x0a//'+'\x20Iridescen'+'ce\x20effect\x20'+'intensity,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_ir'+'idescence_'+'intensity;'+'\x0a\x0a//\x20Thick'+'ness\x20of\x20th'+'e\x20iridesce'+'nt\x20microfi'+'lm\x20layer,\x20'+'value\x20is\x20i'+'n\x20nanomete'+'rs,\x20range\x20'+'[0..1000]\x0a'+'float\x20litA'+'rgs_irides'+'cence_thic'+'kness;\x0a\x0a//'+'\x20The\x20norma'+'l\x20used\x20for'+'\x20the\x20clear'+'coat\x20layer'+'\x0avec3\x20litA'+'rgs_clearc'+'oat_worldN'+'ormal;\x0a\x0a//'+'\x20Intensity'+'\x20of\x20the\x20cl'+'earcoat\x20la'+'yer,\x20range'+'\x20[0..1]\x0afl'+'oat\x20litArg'+'s_clearcoa'+'t_specular'+'ity;\x0a\x0a//\x20G'+'lossiness\x20'+'of\x20clearco'+'at\x20layer,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_cle'+'arcoat_glo'+'ss;\x0a\x0a'),LP='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20te'+'xtureBias\x20'+'=\x20-1000.0;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20texture'+'Bias;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litShade'+'rArgsPS\x22\x0a',RP='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20vec3\x20v'+'iew_positi'+'on;\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20light_ra'+'dius;\x0a#end'+'if\x0a\x0a#if\x20SH'+'ADOW_TYPE\x20'+'==\x20PCSS_32'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22line'+'arizeDepth'+'PS\x22\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'evaluateFr'+'ontend();\x0a'+'\x0a\x20\x20\x20\x20//\x20us'+'ing\x20non-st'+'andard\x20dep'+'th,\x20i.e\x20gl'+'_FragCoord'+'.z\x0a\x20\x20\x20\x20#if'+'def\x20PERSPE'+'CTIVE_DEPT'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20gl_Fra'+'gCoord.z;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SHADOW_'+'TYPE\x20==\x20PC'+'SS_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot/omn'+'i\x20shadows\x20'+'currently\x20'+'use\x20linear'+'\x20depth.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20TODO:\x20u'+'se\x20perspec'+'tive\x20depth'+'\x20for\x20spot/'+'omni\x20the\x20s'+'ame\x20way\x20as'+'\x20direction'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT_TYPE\x20'+'!=\x20DIRECTI'+'ONAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20depth\x20=\x20l'+'inearizeDe'+'pthWithPar'+'ams(depth,'+'\x20camera_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20min(di'+'stance(vie'+'w_position'+',\x20vPositio'+'nW)\x20/\x20ligh'+'t_radius,\x20'+'0.99999);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20MODI'+'FIED_DEPTH'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20VSM_'+'16F\x20||\x20SHA'+'DOW_TYPE\x20='+'=\x20VSM_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20exponen'+'t\x20=\x2015.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+('t\x20exponent'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20depth\x20=\x20'+'2.0\x20*\x20dept'+'h\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dep'+'th\x20=\x20\x20exp('+'exponent\x20*'+'\x20depth);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(dep'+'th,\x20depth*'+'depth,\x201.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'SHADOW_TYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'tore\x20depth'+'\x20into\x20R32\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.r\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ODIFIED_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20If\x20we\x20e'+'nd\x20up\x20usin'+'g\x20modified'+'\x20depth,\x20it'+'\x20needs\x20to\x20'+'be\x20explici'+'tly\x20writte'+'n\x20to\x20gl_Fr'+'agDepth\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gDepth\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20just\x20the\x20'+'simplest\x20c'+'ode,\x20color'+'\x20is\x20not\x20wr'+'itten\x20anyw'+'ay\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'}\x0a'),OP='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0amat'+'3\x20transpos'+'eMat3(\x20con'+'st\x20in\x20mat3'+'\x20m\x20)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20tmp;'+'\x0a\x20\x20\x20\x20tmp[\x20'+'0\x20]\x20=\x20vec3'+'(\x20m[\x200\x20].x'+',\x20m[\x201\x20].x'+',\x20m[\x202\x20].x'+'\x20);\x0a\x20\x20\x20\x20tm'+'p[\x201\x20]\x20=\x20v'+'ec3(\x20m[\x200\x20'+'].y,\x20m[\x201\x20'+'].y,\x20m[\x202\x20'+'].y\x20);\x0a\x20\x20\x20'+'\x20tmp[\x202\x20]\x20'+'=\x20vec3(\x20m['+'\x200\x20].z,\x20m['+'\x201\x20].z,\x20m['+'\x202\x20].z\x20);\x0a'+'\x20\x20\x20\x20return'+'\x20tmp;\x0a}\x0a\x0av'+'ec2\x20LTC_Uv'+'(\x20const\x20in'+'\x20vec3\x20N,\x20c'+'onst\x20in\x20ve'+'c3\x20V,\x20cons'+'t\x20in\x20float'+'\x20roughness'+'\x20)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20LUT_SIZE\x20'+'=\x2064.0;\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20LUT_SC'+'ALE\x20=\x20(\x20LU'+'T_SIZE\x20-\x201'+'.0\x20)\x20/\x20LUT'+'_SIZE;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20LUT_BIA'+'S\x20=\x200.5\x20/\x20'+'LUT_SIZE;\x0a'+'\x20\x20\x20\x20float\x20'+'dotNV\x20=\x20sa'+'turate(\x20do'+'t(\x20N,\x20V\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'texture\x20pa'+'rameterize'+'d\x20by\x20sqrt('+'\x20GGX\x20alpha'+'\x20)\x20and\x20sqr'+'t(\x201\x20-\x20cos'+'(\x20theta\x20)\x20'+')\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20vec2'+'(\x20roughnes'+'s,\x20sqrt(\x201'+'.0\x20-\x20dotNV'+'\x20)\x20);\x0a\x20\x20\x20\x20'+'uv\x20=\x20uv\x20*\x20'+'LUT_SCALE\x20'+'+\x20LUT_BIAS'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'float\x20LTC_'+'ClippedSph'+'ereFormFac'+'tor(\x20const'+'\x20in\x20vec3\x20f'+'\x20)\x20{\x0a\x20\x20\x20\x20/'+'/\x20Real-Tim'+'e\x20Area\x20Lig'+'hting:\x20a\x20J'+'ourney\x20fro'+'m\x20Research'+'\x20to\x20Produc'+'tion\x20(p.10'+'2)\x0a\x20\x20\x20\x20//\x20'+('An\x20approxi'+'mation\x20of\x20'+'the\x20form\x20f'+'actor\x20of\x20a'+'\x20horizon-c'+'lipped\x20rec'+'tangle.\x0a\x20\x20'+'\x20\x20float\x20l\x20'+'=\x20length(\x20'+'f\x20);\x0a\x20\x20\x20\x20r'+'eturn\x20max('+'\x20(\x20l\x20*\x20l\x20+'+'\x20f.z\x20)\x20/\x20('+'\x20l\x20+\x201.0\x20)'+',\x200.0\x20);\x0a}'+'\x0a\x0avec3\x20LTC'+'_EdgeVecto'+'rFormFacto'+'r(\x20const\x20i'+'n\x20vec3\x20v1,'+'\x20const\x20in\x20'+'vec3\x20v2\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20x\x20=\x20dot('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20float'+'\x20y\x20=\x20abs(\x20'+'x\x20);\x0a\x20\x20\x20\x20/'+'/\x20rational'+'\x20polynomia'+'l\x20approxim'+'ation\x20to\x20t'+'heta\x20/\x20sin'+'(\x20theta\x20)\x20'+'/\x202PI\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'0.8543985\x20'+'+\x20(\x200.4965'+'155\x20+\x200.01'+'45206\x20*\x20y\x20'+')\x20*\x20y;\x0a\x20\x20\x20'+'\x20float\x20b\x20='+'\x203.4175940'+'\x20+\x20(\x204.161'+'6724\x20+\x20y\x20)'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'float\x20v\x20=\x20'+'a\x20/\x20b;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta_sinthet'+'a\x20=\x20(\x20x\x20>\x20'+'0.0\x20)\x20?\x20v\x20'+':\x200.5\x20*\x20in'+'versesqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7\x20)\x20)\x20-\x20'+'v;\x0a\x20\x20\x20\x20ret'+'urn\x20cross('+'\x20v1,\x20v2\x20)\x20'+'*\x20theta_si'+'ntheta;\x0a}\x0a'+'\x0astruct\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'d0;\x0a\x20\x20\x20\x20ve'+'c3\x20coord1;'+'\x0a\x20\x20\x20\x20vec3\x20'+'coord2;\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'rd3;\x0a};\x0a\x0af'+'loat\x20LTC_E'+'valuateRec'+'t(\x20const\x20i'+'n\x20vec3\x20N,\x20'+'const\x20in\x20v'+'ec3\x20V,\x20con'+'st\x20in\x20vec3'+'\x20P,\x20const\x20'+'in\x20mat3\x20mI'+'nv,\x20const\x20'+'in\x20Coords\x20'+'rectCoords'+')\x20{\x0a\x20\x20\x20\x20//'+'\x20bail\x20if\x20p'+'oint\x20is\x20on'+'\x20back\x20side'+'\x20of\x20plane\x20'+'of\x20light\x0a\x20'+'\x20\x20\x20//\x20assu'+'mes\x20ccw\x20wi'+'nding\x20orde'+'r\x20of\x20light'+'\x20vertices\x0a'+'\x20\x20\x20\x20vec3\x20v'+'1\x20=\x20rectCo'+'ords.coord'+'1\x20-\x20rectCo'+'ords.coord'+'0;\x0a\x20\x20\x20\x20vec')+('3\x20v2\x20=\x20rec'+'tCoords.co'+'ord3\x20-\x20rec'+'tCoords.co'+'ord0;\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'lightNorma'+'l\x20=\x20cross('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20//\x20if'+'(\x20dot(\x20lig'+'htNormal,\x20'+'P\x20-\x20rectCo'+'ords.coord'+'0\x20)\x20<\x200.0\x20'+')\x20return\x200'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20factor'+'\x20=\x20sign(-d'+'ot(\x20lightN'+'ormal,\x20P\x20-'+'\x20rectCoord'+'s.coord0\x20)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20vec3\x20T1,'+'\x20T2;\x0a\x20\x20\x20\x20T'+'1\x20=\x20normal'+'ize(\x20V\x20-\x20N'+'\x20*\x20dot(\x20V,'+'\x20N\x20)\x20);\x0a\x20\x20'+'\x20\x20T2\x20=\x20\x20fa'+'ctor\x20*\x20cro'+'ss(\x20N,\x20T1\x20'+');\x20//\x20nega'+'ted\x20from\x20p'+'aper;\x20poss'+'ibly\x20due\x20t'+'o\x20a\x20differ'+'ent\x20handed'+'ness\x20of\x20wo'+'rld\x20coordi'+'nate\x20syste'+'m\x0a\x20\x20\x20\x20//\x20c'+'ompute\x20tra'+'nsform\x0a\x20\x20\x20'+'\x20mat3\x20mat\x20'+'=\x20mInv\x20*\x20t'+'ransposeMa'+'t3(\x20mat3(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20transfor'+'m\x20rect\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'ds[\x204\x20];\x0a\x20'+'\x20\x20\x20coords['+'\x200\x20]\x20=\x20mat'+'\x20*\x20(\x20rectC'+'oords.coor'+'d0\x20-\x20P\x20);\x0a'+'\x20\x20\x20\x20coords'+'[\x201\x20]\x20=\x20ma'+'t\x20*\x20(\x20rect'+'Coords.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20coord'+'s[\x202\x20]\x20=\x20m'+'at\x20*\x20(\x20rec'+'tCoords.co'+'ord2\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20coor'+'ds[\x203\x20]\x20=\x20'+'mat\x20*\x20(\x20re'+'ctCoords.c'+'oord3\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20//\x20'+'project\x20re'+'ct\x20onto\x20sp'+'here\x0a\x20\x20\x20\x20c'+'oords[\x200\x20]'+'\x20=\x20normali'+'ze(\x20coords'+'[\x200\x20]\x20);\x0a\x20'+'\x20\x20\x20coords['+'\x201\x20]\x20=\x20nor'+'malize(\x20co'+'ords[\x201\x20]\x20'+');\x0a\x20\x20\x20\x20coo'+'rds[\x202\x20]\x20='+'\x20normalize'+'(\x20coords[\x20'+'2\x20]\x20);\x0a\x20\x20\x20'+'\x20coords[\x203'+'\x20]\x20=\x20norma'+'lize(\x20coor'+'ds[\x203\x20]\x20);')+('\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20ve'+'ctor\x20form\x20'+'factor\x0a\x20\x20\x20'+'\x20vec3\x20vect'+'orFormFact'+'or\x20=\x20vec3('+'\x200.0\x20);\x0a\x20\x20'+'\x20\x20vectorFo'+'rmFactor\x20+'+'=\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[\x200\x20],'+'\x20coords[\x201'+'\x20]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20+=\x20'+'LTC_EdgeVe'+'ctorFormFa'+'ctor(\x20coor'+'ds[\x201\x20],\x20c'+'oords[\x202\x20]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa'+'ctor\x20+=\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[\x202\x20],\x20coo'+'rds[\x203\x20]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20+=\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[\x20'+'3\x20],\x20coord'+'s[\x200\x20]\x20);\x0a'+'\x20\x20\x20\x20//\x20adj'+'ust\x20for\x20ho'+'rizon\x20clip'+'ping\x0a\x20\x20\x20\x20f'+'loat\x20resul'+'t\x20=\x20LTC_Cl'+'ippedSpher'+'eFormFacto'+'r(\x20vectorF'+'ormFactor\x20'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0aCoor'+'ds\x20dLTCCoo'+'rds;\x0aCoord'+'s\x20getLTCLi'+'ghtCoords('+'vec3\x20light'+'Pos,\x20vec3\x20'+'halfWidth,'+'\x20vec3\x20half'+'Height){\x0a\x20'+'\x20\x20\x20Coords\x20'+'coords;\x0a\x20\x20'+'\x20\x20coords.c'+'oord0\x20=\x20li'+'ghtPos\x20+\x20h'+'alfWidth\x20-'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord1'+'\x20=\x20lightPo'+'s\x20-\x20halfWi'+'dth\x20-\x20half'+'Height;\x0a\x20\x20'+'\x20\x20coords.c'+'oord2\x20=\x20li'+'ghtPos\x20-\x20h'+'alfWidth\x20+'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord3'+'\x20=\x20lightPo'+'s\x20+\x20halfWi'+'dth\x20+\x20half'+'Height;\x0a\x20\x20'+'\x20\x20return\x20c'+'oords;\x0a}\x0a\x0a'+'float\x20dSph'+'ereRadius;'+'\x0aCoords\x20ge'+'tSphereLig'+'htCoords(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight){\x0a\x20\x20'+'\x20\x20//\x20used\x20'+'for\x20simple'+'\x20sphere\x20li')+('ght\x20fallof'+'f\x0a\x20\x20\x20\x20//\x20a'+'lso,\x20the\x20c'+'ode\x20only\x20h'+'andles\x20a\x20s'+'pherical\x20l'+'ight,\x20it\x20c'+'annot\x20be\x20n'+'on-uniform'+'ly\x20scaled\x20'+'in\x20world\x20s'+'pace,\x20and\x20'+'so\x20we\x20enfo'+'rce\x20it\x20her'+'e\x0a\x20\x20\x20\x20dSph'+'ereRadius\x20'+'=\x20max(leng'+'th(halfWid'+'th),\x20lengt'+'h(halfHeig'+'ht));\x0a\x0a\x20\x20\x20'+'\x20//\x20Billbo'+'ard\x20the\x202d'+'\x20light\x20qua'+'d\x20to\x20refle'+'ction\x20vect'+'or,\x20as\x20it\x27'+'s\x20used\x20for'+'\x20specular.'+'\x20This\x20allo'+'ws\x20us\x20to\x20u'+'se\x20disk\x20ma'+'th\x20for\x20the'+'\x20sphere.\x0a\x20'+'\x20\x20\x20vec3\x20f\x20'+'=\x20reflect('+'normalize('+'lightPos\x20-'+'\x20view_posi'+'tion),\x20vNo'+'rmalW);\x0a\x20\x20'+'\x20\x20vec3\x20w\x20='+'\x20normalize'+'(cross(f,\x20'+'halfHeight'+'));\x0a\x20\x20\x20\x20ve'+'c3\x20h\x20=\x20nor'+'malize(cro'+'ss(f,\x20w));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20getLTCL'+'ightCoords'+'(lightPos,'+'\x20w\x20*\x20dSphe'+'reRadius,\x20'+'h\x20*\x20dSpher'+'eRadius);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20LTC\x20L'+'UT\x20texture'+'\x20lookup\x0ave'+'c2\x20dLTCUV;'+'\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20vec2'+'\x20ccLTCUV;\x0a'+'#endif\x0a\x0ave'+'c2\x20getLTCL'+'ightUV(flo'+'at\x20gloss,\x20'+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+')\x0a{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20max('+'(1.0\x20-\x20glo'+'ss)\x20*\x20(1.0'+'\x20-\x20gloss),'+'\x200.001);\x0a\x20'+'\x20\x20\x20return\x20'+'LTC_Uv(\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'roughness\x20'+');\x0a}\x0a\x0a//\x20u'+'sed\x20for\x20en'+'ergy\x20conse'+'rvation\x20an'+'d\x20to\x20modul'+'ate\x20specul'+'ar\x0avec3\x20dL'+'TCSpecFres'+';\x0a#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20vec'+'3\x20ccLTCSpe'+'cFres;\x0a#en'+'dif\x0a\x0avec3\x20'+'getLTCLigh')+('tSpecFres('+'vec2\x20uv,\x20v'+'ec3\x20specul'+'arity)\x0a{\x0a\x20'+'\x20\x20\x20vec4\x20t2'+'\x20=\x20texture'+'2DLod(area'+'LightsLutT'+'ex2,\x20uv,\x200'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20spec'+'ularity\x20*\x20'+'t2.x\x20+\x20(\x20v'+'ec3(\x201.0\x20)'+'\x20-\x20specula'+'rity)\x20*\x20t2'+'.y;\x0a}\x0a\x0avoi'+'d\x20calcLTCL'+'ightValues'+'(float\x20glo'+'ss,\x20vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20speculari'+'ty,\x20float\x20'+'clearcoatG'+'loss,\x20vec3'+'\x20clearcoat'+'WorldNorma'+'l,\x20float\x20c'+'learcoatSp'+'ecularity)'+'\x0a{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x20\x0a\x0a#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20cc'+'LTCUV\x20=\x20ge'+'tLTCLightU'+'V(clearcoa'+'tGloss,\x20cl'+'earcoatWor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20ccLTCS'+'pecFres\x20=\x20'+'getLTCLigh'+'tSpecFres('+'ccLTCUV,\x20v'+'ec3(clearc'+'oatSpecula'+'rity));\x0a#e'+'ndif\x0a}\x0a\x0avo'+'id\x20calcRec'+'tLightValu'+'es(vec3\x20li'+'ghtPos,\x20ve'+'c3\x20halfWid'+'th,\x20vec3\x20h'+'alfHeight)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0avoid\x20c'+'alcDiskLig'+'htValues(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight)\x20{\x0a\x20'+'\x20\x20\x20calcRec'+'tLightValu'+'es(lightPo'+'s,\x20halfWid'+'th,\x20halfHe'+'ight);\x0a}\x0av'+'oid\x20calcSp'+'hereLightV'+'alues(vec3'+'\x20lightPos,'+'\x20vec3\x20half'+'Width,\x20vec'+'3\x20halfHeig'+'ht)\x20{\x0a\x20\x20\x20\x20')+('dLTCCoords'+'\x20=\x20getSphe'+'reLightCoo'+'rds(lightP'+'os,\x20halfWi'+'dth,\x20halfH'+'eight);\x0a}\x0a'+'\x0a//\x20An\x20ext'+'ended\x20vers'+'ion\x20of\x20the'+'\x20implement'+'ation\x20from'+'\x20\x22How\x20to\x20s'+'olve\x20a\x20cub'+'ic\x20equatio'+'n,\x20revisit'+'ed\x22\x0a//\x20htt'+'p://moment'+'singraphic'+'s.de/?p=10'+'5\x0avec3\x20Sol'+'veCubic(ve'+'c4\x20Coeffic'+'ient)\x0a{\x0a\x20\x20'+'\x20\x20float\x20pi'+'\x20=\x203.14159'+';\x0a\x20\x20\x20\x20//\x20N'+'ormalize\x20t'+'he\x20polynom'+'ial\x0a\x20\x20\x20\x20Co'+'efficient.'+'xyz\x20/=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20//\x20D'+'ivide\x20midd'+'le\x20coeffic'+'ients\x20by\x20t'+'hree\x0a\x20\x20\x20\x20C'+'oefficient'+'.yz\x20/=\x203.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20A\x20=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20floa'+'t\x20B\x20=\x20Coef'+'ficient.z;'+'\x0a\x20\x20\x20\x20float'+'\x20C\x20=\x20Coeff'+'icient.y;\x0a'+'\x20\x20\x20\x20float\x20'+'D\x20=\x20Coeffi'+'cient.x;\x0a\x0a'+'\x20\x20\x20\x20//\x20Com'+'pute\x20the\x20H'+'essian\x20and'+'\x20the\x20discr'+'iminant\x0a\x20\x20'+'\x20\x20vec3\x20Del'+'ta\x20=\x20vec3('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-'+'Coefficien'+'t.z\x20*\x20Coef'+'ficient.z\x20'+'+\x20Coeffici'+'ent.y,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20-Coef'+'ficient.y\x20'+'*\x20Coeffici'+'ent.z\x20+\x20Co'+'efficient.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dot(vec2('+'Coefficien'+'t.z,\x20-Coef'+'ficient.y)'+',\x20Coeffici'+'ent.xy)\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'float\x20Disc'+'riminant\x20='+'\x20dot(vec2('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20vec2\x20xlc'+',\x20xsc;\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20A\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_a'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20C_a\x20=\x20De'+'lta.x;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20D_a\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20')+('\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20Theta\x20'+'=\x20atan(sqr'+'t(Discrimi'+'nant),\x20-D_'+'a)\x20/\x203.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20x_1a\x20'+'=\x202.0\x20*\x20sq'+'rt(-C_a)\x20*'+'\x20cos(Theta'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20x_3'+'a\x20=\x202.0\x20*\x20'+'sqrt(-C_a)'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20x'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20((x_1a'+'\x20+\x20x_3a)\x20>'+'\x202.0\x20*\x20B)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xl\x20=\x20x_1'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'\x20=\x20x_3a;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'c\x20=\x20vec2(x'+'l\x20-\x20B,\x20A);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20D\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_d'+'\x20=\x20D;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'C_d\x20=\x20Delt'+'a.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20D'+'_d\x20=\x20-D\x20*\x20'+'Delta.y\x20+\x20'+'2.0\x20*\x20C\x20*\x20'+'Delta.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20Take\x20the\x20'+'cubic\x20root'+'\x20of\x20a\x20norm'+'alized\x20com'+'plex\x20numbe'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20Thet'+'a\x20=\x20atan(D'+'\x20*\x20sqrt(Di'+'scriminant'+'),\x20-D_d)\x20/'+'\x203.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20x_1d\x20=\x202.'+'0\x20*\x20sqrt(-'+'C_d)\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20x_3d\x20=\x20'+'2.0\x20*\x20sqrt'+'(-C_d)\x20*\x20c'+'os(Theta\x20+'+'\x20(2.0\x20/\x203.'+'0)\x20*\x20pi);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20xs;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(x_1d\x20+\x20x_'+'3d\x20<\x202.0\x20*'+'\x20C)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20xs\x20='+'\x20x_1d;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xs\x20=\x20x_3'+'d;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20xsc\x20=\x20ve'+'c2(-D,\x20xs\x20'+'+\x20C);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20flo'+'at\x20E\x20=\x20\x20xl'+'c.y\x20*\x20xsc.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20F\x20=\x20-xl'+'c.x\x20*\x20xsc.'+'y\x20-\x20xlc.y\x20')+('*\x20xsc.x;\x0a\x20'+'\x20\x20\x20float\x20G'+'\x20=\x20\x20xlc.x\x20'+'*\x20xsc.x;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20x'+'mc\x20=\x20vec2('+'C\x20*\x20F\x20-\x20B\x20'+'*\x20G,\x20-B\x20*\x20'+'F\x20+\x20C\x20*\x20E)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20Root\x20=\x20v'+'ec3(xsc.x\x20'+'/\x20xsc.y,\x20x'+'mc.x\x20/\x20xmc'+'.y,\x20xlc.x\x20'+'/\x20xlc.y);\x0a'+'\x0a\x20\x20\x20\x20if\x20(R'+'oot.x\x20<\x20Ro'+'ot.y\x20&&\x20Ro'+'ot.x\x20<\x20Roo'+'t.z)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root.xy'+'z\x20=\x20Root.y'+'xz;\x0a\x20\x20\x20\x20el'+'se\x20if\x20(Roo'+'t.z\x20<\x20Root'+'.x\x20&&\x20Root'+'.z\x20<\x20Root.'+'y)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root.xyz\x20'+'=\x20Root.xzy'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20Root;\x0a'+'}\x0a\x0afloat\x20L'+'TC_Evaluat'+'eDisk(vec3'+'\x20N,\x20vec3\x20V'+',\x20vec3\x20P,\x20'+'mat3\x20Minv,'+'\x20Coords\x20po'+'ints)\x0a{\x0a\x20\x20'+'\x20\x20//\x20const'+'ruct\x20ortho'+'normal\x20bas'+'is\x20around\x20'+'N\x0a\x20\x20\x20\x20vec3'+'\x20T1\x20=\x20norm'+'alize(V\x20-\x20'+'N\x20*\x20dot(V,'+'\x20N));\x0a\x20\x20\x20\x20'+'vec3\x20T2\x20=\x20'+'cross(N,\x20T'+'1);\x0a\x0a\x20\x20\x20\x20/'+'/\x20rotate\x20a'+'rea\x20light\x20'+'in\x20(T1,\x20T2'+',\x20N)\x20basis'+'\x0a\x20\x20\x20\x20//mat'+'3\x20R\x20=\x20tran'+'spose(mat3'+'(T1,\x20T2,\x20N'+'));\x0a\x20\x20\x20\x20ma'+'t3\x20R\x20=\x20tra'+'nsposeMat3'+'(\x20mat3(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'polygon\x20(a'+'llocate\x205\x20'+'vertices\x20f'+'or\x20clippin'+'g)\x0a\x20\x20\x20\x20vec'+'3\x20L_[\x203\x20];'+'\x0a\x20\x20\x20\x20L_[\x200'+'\x20]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[\x20'+'1\x20]\x20=\x20R\x20*\x20'+'(\x20points.c'+'oord1\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20L_['+'\x202\x20]\x20=\x20R\x20*'+'\x20(\x20points.'+'coord2\x20-\x20P'+'\x20);\x0a\x0a\x20\x20\x20\x20/'+'/\x20init\x20ell'+'ipse\x0a\x20\x20\x20\x20v'+'ec3\x20C\x20\x20=\x200'+'.5\x20*\x20(L_[0'+']\x20+\x20L_[2])'+';\x0a\x20\x20\x20\x20vec3'+'\x20V1\x20=\x200.5\x20'+'*\x20(L_[1]\x20-'+'\x20L_[2]);\x0a\x20'+'\x20\x20\x20vec3\x20V2'+'\x20=\x200.5\x20*\x20('+'L_[1]\x20-\x20L_'+'[0]);\x0a\x0a\x20\x20\x20'+'\x20C\x20\x20=\x20Minv')+('\x20*\x20C;\x0a\x20\x20\x20\x20'+'V1\x20=\x20Minv\x20'+'*\x20V1;\x0a\x20\x20\x20\x20'+'V2\x20=\x20Minv\x20'+'*\x20V2;\x0a\x0a\x20\x20\x20'+'\x20//if(dot('+'cross(V1,\x20'+'V2),\x20C)\x20>\x20'+'0.0)\x0a\x20\x20\x20\x20/'+'/\x20\x20\x20\x20retur'+'n\x200.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20compu'+'te\x20eigenve'+'ctors\x20of\x20e'+'llipse\x0a\x20\x20\x20'+'\x20float\x20a,\x20'+'b;\x0a\x20\x20\x20\x20flo'+'at\x20d11\x20=\x20d'+'ot(V1,\x20V1)'+';\x0a\x20\x20\x20\x20floa'+'t\x20d22\x20=\x20do'+'t(V2,\x20V2);'+'\x0a\x20\x20\x20\x20float'+'\x20d12\x20=\x20dot'+'(V1,\x20V2);\x0a'+'\x20\x20\x20\x20if\x20(ab'+'s(d12)\x20/\x20s'+'qrt(d11\x20*\x20'+'d22)\x20>\x200.0'+'001)\x0a\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20tr\x20=\x20'+'d11\x20+\x20d22;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20det\x20='+'\x20-d12\x20*\x20d1'+'2\x20+\x20d11\x20*\x20'+'d22;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20use'+'\x20sqrt\x20matr'+'ix\x20to\x20solv'+'e\x20for\x20eige'+'nvalues\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20det\x20'+'=\x20sqrt(det'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20u\x20='+'\x200.5\x20*\x20sqr'+'t(tr\x20-\x202.0'+'\x20*\x20det);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20v\x20=\x200.5'+'\x20*\x20sqrt(tr'+'\x20+\x202.0\x20*\x20d'+'et);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20e'+'_max\x20=\x20(u\x20'+'+\x20v)\x20*\x20(u\x20'+'+\x20v);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'e_min\x20=\x20(u'+'\x20-\x20v)\x20*\x20(u'+'\x20-\x20v);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20V1_,\x20V2_;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(d11\x20>\x20'+'d22)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12\x20*\x20V'+'1\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20V2_\x20'+'=\x20d12\x20*\x20V1'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20V1'+'_\x20=\x20d12*V2'+'\x20+\x20(e_max\x20'+'-\x20d22)*V1;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20V2_\x20=\x20d'+'12*V2\x20+\x20(e'+'_min\x20-\x20d22'+')*V1;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20e_max'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'b\x20=\x201.0\x20/\x20'+'e_min;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V1\x20=\x20'+'normalize('+'V1_);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20V2\x20=\x20n'+'ormalize(V'+'2_);\x0a\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20dot(V1'+',\x20V1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20b\x20=\x201'+'.0\x20/\x20dot(V'+'2,\x20V2);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20V1\x20*'+'=\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20*=\x20sqrt('+'b);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'V3\x20=\x20norma'+'lize(cross'+'(V1,\x20V2));'+'\x0a\x20\x20\x20\x20if\x20(d'+'ot(C,\x20V3)\x20'+'<\x200.0)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V3\x20*='+'\x20-1.0;\x0a\x0a\x20\x20'+'\x20\x20float\x20L\x20'+'\x20=\x20dot(V3,'+'\x20C);\x0a\x20\x20\x20\x20f'+'loat\x20x0\x20=\x20'+'dot(V1,\x20C)'+'\x20/\x20L;\x0a\x20\x20\x20\x20'+'float\x20y0\x20='+'\x20dot(V2,\x20C'+')\x20/\x20L;\x0a\x0a\x20\x20'+'\x20\x20float\x20E1'+'\x20=\x20inverse'+'sqrt(a);\x0a\x20'+'\x20\x20\x20float\x20E'+'2\x20=\x20invers'+'esqrt(b);\x0a'+'\x0a\x20\x20\x20\x20a\x20*=\x20'+'L\x20*\x20L;\x0a\x20\x20\x20'+'\x20b\x20*=\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20c0\x20=\x20a'+'\x20*\x20b;\x0a\x20\x20\x20\x20'+'float\x20c1\x20='+'\x20a\x20*\x20b\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0\x20+\x20y0\x20*'+'\x20y0)\x20-\x20a\x20-'+'\x20b;\x0a\x20\x20\x20\x20fl'+'oat\x20c2\x20=\x201'+'.0\x20-\x20a\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0)\x20-\x20b\x20*'+'\x20(1.0\x20+\x20y0'+'\x20*\x20y0);\x0a\x20\x20'+'\x20\x20float\x20c3'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ro'+'ots\x20=\x20Solv'+'eCubic(vec'+'4(c0,\x20c1,\x20'+'c2,\x20c3));\x0a'+'\x20\x20\x20\x20float\x20'+'e1\x20=\x20roots'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20e2\x20=\x20r'+'oots.y;\x0a\x20\x20'+'\x20\x20float\x20e3'+'\x20=\x20roots.z'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20avgDir\x20='+'\x20vec3(a\x20*\x20'+'x0\x20/\x20(a\x20-\x20'+'e2),\x20b\x20*\x20y'+'0\x20/\x20(b\x20-\x20e'+'2),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20mat3\x20'+'rotate\x20=\x20m'+'at3(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20L1\x20=\x20sqrt'+'(-e2\x20/\x20e3)'+';\x0a\x20\x20\x20\x20floa'+'t\x20L2\x20=\x20sqr'+'t(-e2\x20/\x20e1'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20formFa'+'ctor\x20=\x20max'+'(0.0,\x20L1\x20*'+'\x20L2\x20*\x20inve')+('rsesqrt((1'+'.0\x20+\x20L1\x20*\x20'+'L1)\x20*\x20(1.0'+'\x20+\x20L2\x20*\x20L2'+')));\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20const\x20'+'float\x20LUT_'+'SIZE\x20=\x2064.'+'0;\x0a\x20\x20\x20\x20con'+'st\x20float\x20L'+'UT_SCALE\x20='+'\x20(\x20LUT_SIZ'+'E\x20-\x201.0\x20)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20float\x20LU'+'T_BIAS\x20=\x200'+'.5\x20/\x20LUT_S'+'IZE;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20tab'+'ulated\x20hor'+'izon-clipp'+'ed\x20sphere\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vec2(a'+'vgDir.z\x20*\x20'+'0.5\x20+\x200.5,'+'\x20formFacto'+'r);\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv*LUT_'+'SCALE\x20+\x20LU'+'T_BIAS;\x0a\x0a\x20'+'\x20\x20\x20float\x20s'+'cale\x20=\x20tex'+'ture2DLod('+'areaLights'+'LutTex2,\x20u'+'v,\x200.0).w;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20formFac'+'tor*scale;'+'\x0a}\x0a\x0a//\x20LTC'+'_EvaluateD'+'isk\x20in\x20som'+'e\x20rare\x20cas'+'es\x20generea'+'tes\x20NaN\x20va'+'lues\x20in\x20a\x20'+'or\x20b,\x20just'+'\x20before\x20\x27f'+'loat\x20c0\x20=\x20'+'a\x20*\x20b;\x27\x0a//'+'\x20Get\x20rid\x20o'+'f\x20those\x20Na'+'n\x20values\x20b'+'efore\x20they'+'\x20propagate'+'\x20further,\x20'+'as\x20in\x20case'+'\x20of\x20bloom\x20'+'/\x20DOF\x20blur'+'s\x20they\x0a//\x20'+'propagate\x20'+'to\x20large\x20a'+'reas.\x20I\x20di'+'dn\x27t\x20find\x20'+'the\x20actual'+'\x20reason\x20wh'+'ere\x20those\x20'+'come\x20from,'+'\x20so\x20that\x20i'+'s\x20still\x20TO'+'DO.\x0a//\x20Not'+'e\x20that\x20onl'+'y\x20disk/sph'+'ere\x20lights'+'\x20are\x20causi'+'ng\x20it,\x20so\x20'+'only\x20handl'+'e\x20those.\x0af'+'loat\x20FixNa'+'n(float\x20va'+'lue)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'value\x20!=\x20v'+'alue\x20?\x200.0'+'\x20:\x20value;\x20'+'\x20//\x20isnan\x20'+'does\x20not\x20t'+'ranspile\x20c'+'orrectly,\x20'+'use\x20a\x20work'+'around\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20isnan(va'+'lue)\x20?\x200.0'+'\x20:\x20value;\x0a')+('\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afloat\x20'+'getRectLig'+'htDiffuse('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm)\x20{\x0a\x20\x20'+'\x20\x20return\x20L'+'TC_Evaluat'+'eRect(\x20wor'+'ldNormal,\x20'+'viewDir,\x20v'+'PositionW,'+'\x20mat3(\x201.0'+'\x20),\x20dLTCCo'+'ords\x20);\x0a}\x0a'+'\x0afloat\x20get'+'DiskLightD'+'iffuse(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20FixN'+'an(LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mat3('+'\x201.0\x20),\x20dL'+'TCCoords\x20)'+');\x0a}\x0a\x0afloa'+'t\x20getSpher'+'eLightDiff'+'use(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm)\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20float\x20fa'+'lloff\x20=\x20dS'+'phereRadiu'+'s\x20/\x20(dot(l'+'ightDir,\x20l'+'ightDir)\x20+'+'\x20dSphereRa'+'dius);\x0a\x20\x20\x20'+'\x20return\x20Fi'+'xNan(getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNorm)\x20*\x20f'+'alloff);\x0a}'+'\x0a\x0amat3\x20get'+'LTCLightIn'+'vMat(vec2\x20'+'uv)\x0a{\x0a\x20\x20\x20\x20'+'vec4\x20t1\x20=\x20'+'texture2DL'+'od(areaLig'+'htsLutTex1'+',\x20uv,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3(\x20t1.x,\x20'+'0,\x20t1.y\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3(\x20\x20\x20\x200,'+'\x201,\x20\x20\x20\x200\x20)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3(\x20t1.z'+',\x200,\x20t1.w\x20'+')\x0a\x20\x20\x20\x20);\x0a}'+'\x0a\x0afloat\x20ca'+'lcRectLigh'+'tSpecular('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir')+(',\x20vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20mat'+'3\x20mInv\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afl'+'oat\x20getRec'+'tLightSpec'+'ular(vec3\x20'+'worldNorma'+'l,\x20vec3\x20vi'+'ewDir)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'calcRectLi'+'ghtSpecula'+'r(worldNor'+'mal,\x20viewD'+'ir,\x20dLTCUV'+');\x0a}\x0a\x0afloa'+'t\x20calcDisk'+'LightSpecu'+'lar(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20mInv'+'\x20=\x20getLTCL'+'ightInvMat'+'(uv);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_EvaluateD'+'isk(\x20world'+'Normal,\x20vi'+'ewDir,\x20vPo'+'sitionW,\x20m'+'Inv,\x20dLTCC'+'oords\x20);\x0a}'+'\x0a\x0afloat\x20ge'+'tDiskLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a\x0a'+'float\x20getS'+'phereLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a'),FP='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_metaln'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tMetalness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20metal'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20metalness'+'\x20*=\x20materi'+'al_metalne'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20metalne'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_METAL'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_METAL'+'NESS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_META'+'LNESS_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_VERTEX\x0a\x20\x20'+'\x20\x20metalnes'+'s\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_METALNES'+'S_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dMet'+'alness\x20=\x20m'+'etalness;\x0a'+'}\x0a',NP='\x0auniform\x20s'+'ampler2D\x20t'+'exture_msd'+'fMap;\x0a\x0aflo'+'at\x20median('+'float\x20r,\x20f'+'loat\x20g,\x20fl'+'oat\x20b)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'max(min(r,'+'\x20g),\x20min(m'+'ax(r,\x20g),\x20'+'b));\x0a}\x0a\x0afl'+'oat\x20map\x20(f'+'loat\x20min,\x20'+'float\x20max,'+'\x20float\x20v)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20(v\x20-\x20mi'+'n)\x20/\x20(max\x20'+'-\x20min);\x0a}\x0a'+'\x0auniform\x20f'+'loat\x20font_'+'sdfIntensi'+'ty;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20float\x20f'+'ont_pxrang'+'e;\x20\x20\x20\x20\x20\x20//'+'\x20the\x20numbe'+'r\x20of\x20pixel'+'s\x20between\x20'+'inside\x20and'+'\x20outside\x20t'+'he\x20font\x20in'+'\x20SDF\x0aunifo'+'rm\x20float\x20f'+'ont_textur'+'eWidth;\x20//'+'\x20the\x20width'+'\x20of\x20the\x20te'+'xture\x20atla'+'s\x0a\x0a#ifndef'+'\x20LIT_MSDF_'+'TEXT_ATTRI'+'BUTE\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20shadow_co'+'lor;\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20shadow_o'+'ffset;\x0a#el'+'se\x0a\x20\x20\x20\x20var'+'ying\x20vec4\x20'+'outline_co'+'lor;\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20outline'+'_thickness'+';\x0a\x20\x20\x20\x20vary'+'ing\x20vec4\x20s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'shadow_off'+'set;\x0a#endi'+'f\x0a\x0avec4\x20ap'+'plyMsdf(ve'+'c4\x20color)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Convert\x20to'+'\x20linear\x20sp'+'ace\x20before'+'\x20processin'+'g\x0a\x20\x20\x20\x20//\x20T'+'ODO:\x20ideal'+'ly\x20this\x20wo'+'uld\x20receiv'+'e\x20the\x20colo'+'r\x20in\x20linea'+'r\x20space,\x20b'+'ut\x20that\x20wo'+'uld\x20requir'+'e\x20larger\x20c'+'hanges\x0a\x20\x20\x20'+('\x20//\x20on\x20the'+'\x20engine\x20si'+'de,\x20with\x20t'+'he\x20way\x20pre'+'multiplied'+'\x20alpha\x20is\x20'+'handled\x20as'+'\x20well.\x0a\x20\x20\x20'+'\x20color.rgb'+'\x20=\x20gammaCo'+'rrectInput'+'(color.rgb'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20sample\x20th'+'e\x20field\x0a\x20\x20'+'\x20\x20vec3\x20tsa'+'mple\x20=\x20tex'+'ture2D(tex'+'ture_msdfM'+'ap,\x20vUv0).'+'rgb;\x0a\x20\x20\x20\x20v'+'ec2\x20uvShdw'+'\x20=\x20vUv0\x20-\x20'+'shadow_off'+'set;\x0a\x20\x20\x20\x20v'+'ec3\x20ssampl'+'e\x20=\x20textur'+'e2D(textur'+'e_msdfMap,'+'\x20uvShdw).r'+'gb;\x0a\x0a\x20\x20\x20\x20/'+'/\x20get\x20the\x20'+'signed\x20dis'+'tance\x20valu'+'e\x0a\x20\x20\x20\x20floa'+'t\x20sigDist\x20'+'=\x20median(t'+'sample.r,\x20'+'tsample.g,'+'\x20tsample.b'+');\x0a\x20\x20\x20\x20flo'+'at\x20sigDist'+'Shdw\x20=\x20med'+'ian(ssampl'+'e.r,\x20ssamp'+'le.g,\x20ssam'+'ple.b);\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20limi'+'t\x20-\x20smalle'+'r\x20value\x20ma'+'kes\x20for\x20sh'+'arper\x20but\x20'+'more\x20alias'+'ed\x20text,\x20e'+'specially\x20'+'on\x20angles\x0a'+'\x20\x20\x20\x20//\x20too'+'\x20large\x20val'+'ue\x20(0.5)\x20c'+'reates\x20a\x20d'+'ark\x20glow\x20a'+'round\x20the\x20'+'letters\x0a\x20\x20'+'\x20\x20float\x20sm'+'oothingMax'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20vec'+'2\x20w\x20=\x20fwid'+'th(vUv0);\x0a'+'\x20\x20\x20\x20float\x20'+'smoothing\x20'+'=\x20clamp(w.'+'x\x20*\x20font_t'+'extureWidt'+'h\x20/\x20font_p'+'xrange,\x200.'+'0,\x20smoothi'+'ngMax);\x0a\x0a\x20'+'\x20\x20\x20float\x20m'+'apMin\x20=\x200.'+'05;\x0a\x20\x20\x20\x20fl'+'oat\x20mapMax'+'\x20=\x20clamp(1'+'.0\x20-\x20font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20float\x20')+('sigDistInn'+'er\x20=\x20map(m'+'apMin,\x20map'+'Max,\x20sigDi'+'st);\x0a\x20\x20\x20\x20f'+'loat\x20sigDi'+'stOutline\x20'+'=\x20map(mapM'+'in,\x20mapMax'+',\x20sigDist\x20'+'+\x20outline_'+'thickness)'+';\x0a\x20\x20\x20\x20sigD'+'istShdw\x20=\x20'+'map(mapMin'+',\x20mapMax,\x20'+'sigDistShd'+'w\x20+\x20outlin'+'e_thicknes'+'s);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20cente'+'r\x20=\x200.5;\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20smoo'+'thing\x20and\x20'+'use\x20to\x20gen'+'erate\x20opac'+'ity\x0a\x20\x20\x20\x20fl'+'oat\x20inside'+'\x20=\x20smooths'+'tep(center'+'-smoothing'+',\x20center+s'+'moothing,\x20'+'sigDistInn'+'er);\x0a\x20\x20\x20\x20f'+'loat\x20outli'+'ne\x20=\x20smoot'+'hstep(cent'+'er-smoothi'+'ng,\x20center'+'+smoothing'+',\x20sigDistO'+'utline);\x0a\x20'+'\x20\x20\x20float\x20s'+'hadow\x20=\x20sm'+'oothstep(c'+'enter-smoo'+'thing,\x20cen'+'ter+smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20vec4\x20t'+'color\x20=\x20(o'+'utline\x20>\x20i'+'nside)\x20?\x20o'+'utline\x20*\x20v'+'ec4(outlin'+'e_color.a\x20'+'*\x20outline_'+'color.rgb,'+'\x20outline_c'+'olor.a)\x20:\x20'+'vec4(0.0);'+'\x0a\x20\x20\x20\x20tcolo'+'r\x20=\x20mix(tc'+'olor,\x20colo'+'r,\x20inside)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20scolor\x20='+'\x20(shadow\x20>'+'\x20outline)\x20'+'?\x20shadow\x20*'+'\x20vec4(shad'+'ow_color.a'+'\x20*\x20shadow_'+'color.rgb,'+'\x20shadow_co'+'lor.a)\x20:\x20t'+'color;\x0a\x20\x20\x20'+'\x20tcolor\x20=\x20'+'mix(scolor'+',\x20tcolor,\x20'+'outline);\x0a'+'\x0a\x20\x20\x20\x20//\x20Co'+'nvert\x20back'+'\x20to\x20gamma\x20'+'space\x20befo'+'re\x20returni'+'ng\x0a\x20\x20\x20\x20tco'+'lor.rgb\x20=\x20'+'gammaCorre'+'ctOutput(t'+'color.rgb)'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20return\x20tc'+'olor;\x0a}\x0a'),kP='\x0a\x0avec3\x20get'+'SpecularMo'+'dulate(in\x20'+'vec3\x20specu'+'larity,\x20in'+'\x20vec3\x20albe'+'do,\x20in\x20flo'+'at\x20metalne'+'ss,\x20in\x20flo'+'at\x20f0)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20di'+'electricF0'+'\x20=\x20f0\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(diel'+'ectricF0,\x20'+'albedo,\x20me'+'talness);\x0a'+'}\x0a\x0avec3\x20ge'+'tAlbedoMod'+'ulate(in\x20v'+'ec3\x20albedo'+',\x20in\x20float'+'\x20metalness'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20albed'+'o\x20*\x20(1.0\x20-'+'\x20metalness'+');\x0a}\x0a',UP='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20vec2\x20u'+'v0;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2DArra'+'y\x20morphTex'+'ture;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20float\x20'+'morphFacto'+'r[{MORPH_T'+'EXTURE_MAX'+'_COUNT}];\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20ui'+'nt\x20morphIn'+'dex[{MORPH'+'_TEXTURE_M'+'AX_COUNT}]'+';\x0a\x20\x20\x20\x20unif'+'orm\x20int\x20co'+'unt;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PH_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20aa'+'bbSize;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20a'+'abbMin;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20highp\x20vec'+'3\x20color\x20=\x20'+'vec3(0,\x200,'+'\x200);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'pixelCoord'+'s\x20=\x20ivec2('+'uv0\x20*\x20vec2'+'(textureSi'+'ze(morphTe'+'xture,\x200).'+'xy));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20count;\x20'+'i++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'int\x20textur'+'eIndex\x20=\x20m'+'orphIndex['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20delta\x20=\x20t'+'exelFetch('+'morphTextu'+'re,\x20ivec3('+'pixelCoord'+'s,\x20int(tex'+'tureIndex)'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20color\x20+'+'=\x20morphFac'+'tor[i]\x20*\x20d'+'elta;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20MORPH_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20color\x20'+'=\x20(color\x20-'+'\x20aabbMin)\x20'+'/\x20aabbSize'+'\x20*\x2065535.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20u'+'vec4(color'+',\x201u);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20ve'+'c4(color,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a',BP='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20}\x0a',zP='\x0aattribute'+'\x20vec3\x20vert'+'ex_outline'+'Parameters'+';\x0aattribut'+'e\x20vec3\x20ver'+'tex_shadow'+'Parameters'+';\x0a\x0avarying'+'\x20vec4\x20outl'+'ine_color;'+'\x0avarying\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0avaryin'+'g\x20vec4\x20sha'+'dow_color;'+'\x0avarying\x20v'+'ec2\x20shadow'+'_offset;\x0a\x0a'+'void\x20unpac'+'kMsdfParam'+'s()\x20{\x0a\x20\x20\x20\x20'+'vec3\x20littl'+'e\x20=\x20mod(ve'+'rtex_outli'+'neParamete'+'rs,\x20256.);'+'\x0a\x20\x20\x20\x20vec3\x20'+'big\x20=\x20(ver'+'tex_outlin'+'eParameter'+'s\x20-\x20little'+')\x20/\x20256.;\x0a'+'\x0a\x20\x20\x20\x20outli'+'ne_color.r'+'b\x20=\x20little'+'.xy\x20/\x20255.'+';\x0a\x20\x20\x20\x20outl'+'ine_color.'+'ga\x20=\x20big.x'+'y\x20/\x20255.;\x0a'+'\x0a\x20\x20\x20\x20//\x20_o'+'utlineThic'+'knessScale'+'\x20===\x200.2\x0a\x20'+'\x20\x20\x20outline'+'_thickness'+'\x20=\x20little.'+'z\x20/\x20255.\x20*'+'\x200.2;\x0a\x0a\x20\x20\x20'+'\x20little\x20=\x20'+'mod(vertex'+'_shadowPar'+'ameters,\x202'+'56.);\x0a\x20\x20\x20\x20'+'big\x20=\x20(ver'+'tex_shadow'+'Parameters'+'\x20-\x20little)'+'\x20/\x20256.;\x0a\x0a'+'\x20\x20\x20\x20shadow'+'_color.rb\x20'+'=\x20little.x'+'y\x20/\x20255.;\x0a'+'\x20\x20\x20\x20shadow'+'_color.ga\x20'+'=\x20big.xy\x20/'+'\x20255.;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+'ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20shado'+'w_offset\x20='+'\x20(vec2(lit'+'tle.z,\x20big'+'.z)\x20/\x20127.'+'\x20-\x201.)\x20*\x200'+'.005;\x0a}\x0a',VP='\x0amat3\x20dNor'+'malMatrix;'+'\x0a\x0avec3\x20get'+'Normal()\x20{'+'\x0a\x20\x20\x20\x20dNorm'+'alMatrix\x20='+'\x20getNormal'+'Matrix(dMo'+'delMatrix)'+';\x0a\x20\x20\x20\x20vec3'+'\x20localNorm'+'al\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}\x0a',GP='\x0a\x0aattribut'+'e\x20vec3\x20ver'+'tex_normal'+';\x0a\x0auniform'+'\x20mat3\x20matr'+'ix_normal;'+'\x0a\x0a#ifdef\x20M'+'ORPHING_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20morphNor'+'malTex;\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'morphNorma'+'lTex;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0avec3\x20'+'getLocalNo'+'rmal(vec3\x20'+'vertexNorm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20vec3\x20loca'+'lNormal\x20=\x20'+'vertex_nor'+'mal;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_NORM'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ivec2\x20mo'+'rphUV\x20=\x20ge'+'tTextureMo'+'rphCoords('+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'orphNormal'+'\x20=\x20vec3(te'+'xelFetch(m'+'orphNormal'+'Tex,\x20ivec2'+'(morphUV),'+'\x200).xyz)\x20/'+'\x2065535.0\x20*'+'\x202.0\x20-\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphNo'+'rmal\x20=\x20tex'+'elFetch(mo'+'rphNormalT'+'ex,\x20ivec2('+'morphUV),\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20localNor'+'mal\x20+=\x20mor'+'phNormal;\x0a'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20localN'+'ormal;\x0a}\x0a\x0a'+'#if\x20define'+'d(SKIN)\x20||'+'\x20defined(B'+'ATCH)\x0a\x20\x20\x20\x20'+'mat3\x20getNo'+'rmalMatrix'+'(mat4\x20mode'+'lMatrix)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mat3'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20ma'+'t3\x20getNorm'+'alMatrix(m'+'at4\x20modelM'+'atrix)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20mat3(m'+'odelMatrix'+'[0].xyz,\x20m'+('odelMatrix'+'[1].xyz,\x20m'+'odelMatrix'+'[2].xyz);\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20mat3'+'\x20getNormal'+'Matrix(mat'+'4\x20modelMat'+'rix)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_n'+'ormal;\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'),HP='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_bumpin'+'ess;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_NORMAL'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_normalDe'+'tailMapBum'+'piness;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20bl'+'endNormals'+'(vec3\x20n1,\x20'+'vec3\x20n2)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20https://'+'blog.selfs'+'hadow.com/'+'publicatio'+'ns/blendin'+'g-in-detai'+'l/#detail-'+'oriented\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20n1\x20'+'+=\x20vec3(0,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20n2\x20*'+'=\x20vec3(-1,'+'\x20-1,\x201);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20n1\x20*\x20d'+'ot(n1,\x20n2)'+'\x20/\x20n1.z\x20-\x20'+'n2;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0avo'+'id\x20getNorm'+'al()\x20{\x0a#if'+'def\x20STD_NO'+'RMAL_TEXTU'+'RE\x0a\x20\x20\x20\x20vec'+'3\x20normalMa'+'p\x20=\x20{STD_N'+'ORMAL_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_NORMAL_TE'+'XTURE_NAME'+'},\x20{STD_NO'+'RMAL_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+');\x0a\x20\x20\x20\x20nor'+'malMap\x20=\x20m'+'ix(vec3(0.'+'0,\x200.0,\x201.'+'0),\x20normal'+'Map,\x20mater'+'ial_bumpin'+'ess);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMALDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20norm'+'alDetailMa'+'p\x20=\x20{STD_N'+'ORMALDETAI'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_NOR'+'MALDETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'NORMALDETA'+'IL_TEXTURE'+'_UV},\x20text'+'ureBias));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20n'+'ormalDetai'+'lMap\x20=\x20mix'+'(vec3(0.0,'+'\x200.0,\x201.0)'+',\x20normalDe'+'tailMap,\x20m'+'aterial_no'+'rmalDetail'+'MapBumpine'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20blend'+'Normals(no'+'rmalMap,\x20n'+('ormalDetai'+'lMap);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20normal'+'ize(dTBN\x20*'+'\x20normalMap'+');\x0a#else\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20dVerte'+'xNormalW;\x0a'+'#endif\x0a}\x0a'),WP='\x0auniform\x20f'+'loat\x20mater'+'ial_opacit'+'y;\x0a\x0avoid\x20g'+'etOpacity('+')\x20{\x0a\x20\x20\x20\x20dA'+'lpha\x20=\x20mat'+'erial_opac'+'ity;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_OPACITY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20dAlpha\x20*='+'\x20texture2D'+'Bias({STD_'+'OPACITY_TE'+'XTURE_NAME'+'},\x20{STD_OP'+'ACITY_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20*=\x20c'+'lamp(vVert'+'exColor.{S'+'TD_OPACITY'+'_VERTEX_CH'+'ANNEL},\x200.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',$P='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20vec4\x20b'+'lueNoiseJi'+'tter;\x0a\x0a#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BLUENOI'+'SE\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blueN'+'oiseTex32;'+'\x0a#endif\x0a\x0av'+'oid\x20opacit'+'yDither(fl'+'oat\x20alpha,'+'\x20float\x20id)'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BAYER8\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20noise'+'\x20=\x20bayer8('+'floor(mod('+'gl_FragCoo'+'rd.xy\x20+\x20bl'+'ueNoiseJit'+'ter.xy\x20+\x20i'+'d,\x208.0)))\x20'+'/\x2064.0;\x0a\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20BLUENO'+'ISE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20frac'+'t(gl_FragC'+'oord.xy\x20/\x20'+'32.0\x20+\x20blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20noise\x20=\x20t'+'exture2DLo'+'d(blueNois'+'eTex32,\x20uv'+',\x200.0).y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20==\x20'+'IGNNOISE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20based\x20'+'on\x20https:/'+'/www.iryok'+'u.com/next'+'-generatio'+'n-post-pro'+'cessing-in'+'-call-of-d'+'uty-advanc'+'ed-warfare'+'/\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'agic\x20=\x20vec'+'3(0.067110'+'56,\x200.0058'+'3715,\x2052.9'+'829189);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20noi'+'se\x20=\x20fract'+'(magic.z\x20*'+'\x20fract(dot'+'(gl_FragCo'+'ord.xy\x20+\x20b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id,\x20magic.'+'xy)));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20convert\x20'+'the\x20noise\x20'+'to\x20linear\x20'+'space,\x20as\x20'+'that\x20is\x20sp'+'ecified\x20in'+('\x20sRGB\x20spac'+'e\x20(stores\x20'+'perceptual'+'\x20values)\x0a\x20'+'\x20\x20\x20noise\x20='+'\x20pow(noise'+',\x202.2);\x0a\x0a\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x20noise'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a}'+'\x0a'),XP='\x0a',qP='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20litArgs_'+'opacity;\x0a\x0a'+'#elif\x20LIT_'+'BLEND_TYPE'+'\x20==\x20PREMUL'+'TIPLIED\x0a\x0a\x20'+'\x20\x20\x20gl_Frag'+'Color.rgb\x20'+'*=\x20litArgs'+'_opacity;\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.a\x20='+'\x20litArgs_o'+'pacity;\x0a\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or.a\x20=\x201.0'+';\x0a\x0a#endif\x0a',jP='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20textu'+'re2D(sourc'+'e,\x20vUv0);\x0a'+'}\x0a',YP='\x0a\x0auniform\x20'+'vec3\x20mater'+'ial_sheen;'+'\x0a\x0avoid\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'heenColor\x20'+'=\x20material'+'_sheen;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEEN_'+'TEXTURE\x0a\x20\x20'+'\x20\x20sheenCol'+'or\x20*=\x20{STD'+'_SHEEN_TEX'+'TURE_DECOD'+'E}(texture'+'2DBias({ST'+'D_SHEEN_TE'+'XTURE_NAME'+'},\x20{STD_SH'+'EEN_TEXTUR'+'E_UV},\x20tex'+'tureBias))'+'.{STD_SHEE'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_VERTEX\x0a'+'\x20\x20\x20\x20sheenC'+'olor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20sSpec'+'ularity\x20=\x20'+'sheenColor'+';\x0a}\x0a',KP='\x0auniform\x20f'+'loat\x20mater'+'ial_sheenG'+'loss;\x0a\x0avoi'+'d\x20getSheen'+'Glossiness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20sheen'+'Glossiness'+'\x20=\x20materia'+'l_sheenGlo'+'ss;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20*'+'=\x20texture2'+'DBias({STD'+'_SHEENGLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_SHEENGLO'+'SS_TEXTURE'+'_UV},\x20text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20*='+'\x20saturate('+'vVertexCol'+'or.{STD_SH'+'EENGLOSS_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_INVER'+'T\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x201.0\x20-\x20'+'sheenGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20sGlossi'+'ness\x20=\x20she'+'enGlossine'+'ss\x20+\x200.000'+'0001;\x0a}\x0a',ZP='\x0auniform\x20f'+'loat\x20mater'+'ial_height'+'MapFactor;'+'\x0a\x0avoid\x20get'+'Parallax()'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20paralla'+'xScale\x20=\x20m'+'aterial_he'+'ightMapFac'+'tor;\x0a\x0a\x20\x20\x20\x20'+'float\x20heig'+'ht\x20=\x20textu'+'re2DBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_H'+'EIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20he'+'ight\x20=\x20hei'+'ght\x20*\x20para'+'llaxScale\x20'+'-\x20parallax'+'Scale\x20*\x200.'+'5;\x0a\x20\x20\x20\x20vec'+'3\x20viewDirT'+'\x20=\x20dViewDi'+'rW\x20*\x20dTBN;'+'\x0a\x0a\x20\x20\x20\x20view'+'DirT.z\x20+=\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',QP='\x0auniform\x20u'+'int\x20meshIn'+'stanceId;\x0a'+'\x0avec4\x20getP'+'ickOutput('+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20vec4\x20i'+'nv\x20=\x20vec4('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20co'+'nst\x20uvec4\x20'+'shifts\x20=\x20u'+'vec4(16,\x208'+',\x200,\x2024);\x0a'+'\x20\x20\x20\x20uvec4\x20'+'col\x20=\x20(uve'+'c4(meshIns'+'tanceId)\x20>'+'>\x20shifts)\x20'+'&\x20uvec4(0x'+'ff);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'(col)\x20*\x20in'+'v;\x0a}\x0a',JP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20dR'+'eflDirW\x20=\x20'+'normalize('+'-reflect(v'+'iewDir,\x20wo'+'rldNormal)'+');\x0a}\x0a',e2='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20sqrt'+'(1.0\x20-\x20min'+'(gloss,\x201.'+'0));\x0a\x0a\x20\x20\x20\x20'+'vec2\x20direc'+'tion\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicT\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3(directi'+'on,\x200.0));'+'\x0a\x20\x20\x20\x20vec3\x20'+'anisotropi'+'cB\x20=\x20norma'+'lize(cross'+'(tbn[2],\x20a'+'nisotropic'+'T));\x0a\x0a\x20\x20\x20\x20'+'float\x20anis'+'otropy\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20vec3'+'\x20anisotrop'+'icDirectio'+'n\x20=\x20anisot'+'ropicB;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicTa'+'ngent\x20=\x20cr'+'oss(anisot'+'ropicDirec'+'tion,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicNorm'+'al\x20=\x20cross'+'(anisotrop'+'icTangent,'+'\x20anisotrop'+'icDirectio'+'n);\x0a\x20\x20\x20\x20fl'+'oat\x20bendFa'+'ctor\x20=\x201.0'+'\x20-\x20anisotr'+'opy\x20*\x20(1.0'+'\x20-\x20roughne'+'ss);\x0a\x20\x20\x20\x20f'+'loat\x20bendF'+'actor4\x20=\x20b'+'endFactor\x20'+'*\x20bendFact'+'or\x20*\x20bendF'+'actor\x20*\x20be'+'ndFactor;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'entNormal\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}\x0a',t2='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0avoid\x20add'+'Reflection'+'CC(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20ccRe'+'flection\x20+'+'=\x20calcRefl'+'ection(ref'+'lDir,\x20glos'+'s);\x0a}\x0a#end'+'if\x0a',s2='\x0auniform\x20s'+'amplerCube'+'\x20texture_c'+'ubeMap;\x0aun'+'iform\x20floa'+'t\x20material'+'_reflectiv'+'ity;\x0a\x0avec3'+'\x20calcRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20lookup'+'Vec\x20=\x20cube'+'MapProject'+'(reflDir);'+'\x0a\x20\x20\x20\x20looku'+'pVec.x\x20*=\x20'+'-1.0;\x0a\x20\x20\x20\x20'+'return\x20{re'+'flectionDe'+'code}(text'+'ureCube(te'+'xture_cube'+'Map,\x20looku'+'pVec));\x0a}\x0a'+'\x0avoid\x20addR'+'eflection('+'vec3\x20reflD'+'ir,\x20float\x20'+'gloss)\x20{\x20\x20'+'\x20\x0a\x20\x20\x20\x20dRef'+'lection\x20+='+'\x20vec4(calc'+'Reflection'+'(reflDir,\x20'+'gloss),\x20ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',i2='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_envAtlas;'+'\x0a#endif\x0aun'+'iform\x20samp'+'lerCube\x20te'+'xture_cube'+'Map;\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'flectivity'+';\x0a\x0avec3\x20ca'+'lcReflecti'+'on(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20cub'+'eMapProjec'+'t(reflDir)'+'\x20*\x20vec3(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20t'+'oSpherical'+'Uv(dir);\x0a\x0a'+'\x20\x20\x20\x20//\x20cal'+'culate\x20rou'+'ghness\x20lev'+'el\x0a\x20\x20\x20\x20flo'+'at\x20level\x20='+'\x20saturate('+'1.0\x20-\x20glos'+'s)\x20*\x205.0;\x0a'+'\x20\x20\x20\x20float\x20'+'ilevel\x20=\x20f'+'loor(level'+');\x0a\x20\x20\x20\x20flo'+'at\x20flevel\x20'+'=\x20level\x20-\x20'+'ilevel;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20sh'+'arp\x20=\x20{ref'+'lectionCub'+'emapDecode'+'}(textureC'+'ube(textur'+'e_cubeMap,'+'\x20dir));\x0a\x20\x20'+'\x20\x20vec3\x20rou'+'ghA\x20=\x20{ref'+'lectionDec'+'ode}(textu'+'re2D(textu'+'re_envAtla'+'s,\x20mapRoug'+'hnessUv(uv'+',\x20ilevel))'+');\x0a\x20\x20\x20\x20vec'+'3\x20roughB\x20='+'\x20{reflecti'+'onDecode}('+'texture2D('+'texture_en'+'vAtlas,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20proc'+'essEnviron'+'ment(mix(s'+'harp,\x20mix('+'roughA,\x20ro'+'ughB,\x20flev'+'el),\x20min(l'+'evel,\x201.0)'+'));\x0a}\x0a\x0avoi'+'d\x20addRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x20\x20\x20\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20+=\x20vec'+'4(calcRefl'+'ection(ref'+'lDir,\x20glos'+'s),\x20materi'+'al_reflect'+'ivity);\x0a}\x0a',r2='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_env'+'Atlas;\x0a#en'+'dif\x0aunifor'+'m\x20float\x20ma'+'terial_ref'+'lectivity;'+'\x0a\x0a//\x20calcu'+'late\x20mip\x20l'+'evel\x20for\x20s'+'hiny\x20refle'+'ction\x20give'+'n\x20equirect'+'\x20coords\x20uv'+'.\x0afloat\x20sh'+'inyMipLeve'+'l(vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20dx\x20=\x20dFd'+'x(uv);\x0a\x20\x20\x20'+'\x20vec2\x20dy\x20='+'\x20dFdy(uv);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20s'+'econd\x20dF\x20a'+'t\x20180\x20degr'+'ees\x0a\x20\x20\x20\x20ve'+'c2\x20uv2\x20=\x20v'+'ec2(fract('+'uv.x\x20+\x200.5'+'),\x20uv.y);\x0a'+'\x20\x20\x20\x20vec2\x20d'+'x2\x20=\x20dFdx('+'uv2);\x0a\x20\x20\x20\x20'+'vec2\x20dy2\x20='+'\x20dFdy(uv2)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'min\x20of\x20bot'+'h\x20sets\x20of\x20'+'dF\x20to\x20hand'+'le\x20discont'+'inuity\x20at\x20'+'the\x20azim\x20e'+'dge\x0a\x20\x20\x20\x20fl'+'oat\x20maxd\x20='+'\x20min(max(d'+'ot(dx,\x20dx)'+',\x20dot(dy,\x20'+'dy)),\x20max('+'dot(dx2,\x20d'+'x2),\x20dot(d'+'y2,\x20dy2)))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'0.5\x20*\x20log2'+'(maxd)\x20-\x201'+'.0\x20+\x20textu'+'reBias,\x200.'+'0,\x205.0);\x0a}'+'\x0a\x0avec3\x20cal'+'cReflectio'+'n(vec3\x20ref'+'lDir,\x20floa'+'t\x20gloss)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3(-1.'+'0,\x201.0,\x201.'+'0);\x0a\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20to'+'SphericalU'+'v(dir);\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20roug'+'hness\x20leve'+'l\x0a\x20\x20\x20\x20floa'+'t\x20level\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20float\x20i'+'level\x20=\x20fl'+'oor(level)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'accessing\x20'+'the\x20shiny\x20'+'(top\x20level'+')\x20reflecti'+'on\x20-\x20perfo'+'rm\x20manual\x20'+'mipmap\x20loo'+'kup\x0a\x20\x20\x20\x20fl'+('oat\x20level2'+'\x20=\x20shinyMi'+'pLevel(uv\x20'+'*\x20atlasSiz'+'e);\x0a\x20\x20\x20\x20fl'+'oat\x20ilevel'+'2\x20=\x20floor('+'level2);\x0a\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v0,\x20uv1;\x0a\x20'+'\x20\x20\x20float\x20w'+'eight;\x0a\x20\x20\x20'+'\x20if\x20(ileve'+'l\x20==\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uv0\x20=\x20mapS'+'hinyUv(uv,'+'\x20ilevel2);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v1\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x20level2\x20'+'-\x20ilevel2;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20acces'+'sing\x20rough'+'\x20reflectio'+'n\x20-\x20just\x20s'+'ample\x20the\x20'+'same\x20part\x20'+'twice\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'uv1\x20=\x20mapR'+'oughnessUv'+'(uv,\x20ileve'+'l);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20weight\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'3\x20linearA\x20'+'=\x20{reflect'+'ionDecode}'+'(texture2D'+'(texture_e'+'nvAtlas,\x20u'+'v0));\x0a\x20\x20\x20\x20'+'vec3\x20linea'+'rB\x20=\x20{refl'+'ectionDeco'+'de}(textur'+'e2D(textur'+'e_envAtlas'+',\x20uv1));\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near0\x20=\x20mi'+'x(linearA,'+'\x20linearB,\x20'+'weight);\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near1\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(line'+'ar0,\x20linea'+'r1,\x20level\x20'+'-\x20ilevel))'+';\x0a}\x0a\x0avoid\x20'+'addReflect'+'ion(vec3\x20r'+'eflDir,\x20fl'+'oat\x20gloss)'+'\x20{\x20\x20\x20\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20+=\x20vec4('+'calcReflec'+'tion(reflD'+'ir,\x20gloss)'+',\x20material'+'_reflectiv'+'ity);\x0a}\x0a'),a2='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'uniform\x20sa'+'mpler2D\x20te'+'xture_sphe'+'reMap;\x0auni'+'form\x20float'+'\x20material_'+'reflectivi'+'ty;\x0a\x0avec3\x20'+'calcReflec'+'tion(vec3\x20'+'reflDir,\x20f'+'loat\x20gloss'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20reflDir'+'V\x20=\x20(mat3('+'matrix_vie'+'w)\x20*\x20reflD'+'ir);\x0a\x0a\x20\x20\x20\x20'+'float\x20m\x20=\x20'+'2.0\x20*\x20sqrt'+'(dot(reflD'+'irV.xy,\x20re'+'flDirV.xy)'+'\x20+\x20(reflDi'+'rV.z\x20+\x201.0'+')\x20*\x20(reflD'+'irV.z\x20+\x201.'+'0));\x0a\x20\x20\x20\x20v'+'ec2\x20sphere'+'MapUv\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(texture2'+'D(texture_'+'sphereMap,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0av'+'oid\x20addRef'+'lection(ve'+'c3\x20reflDir'+',\x20float\x20gl'+'oss)\x20{\x20\x20\x20\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20+=\x20v'+'ec4(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20mate'+'rial_refle'+'ctivity);\x0a'+'}\x0a',n2='\x0a\x0avoid\x20add'+'Reflection'+'Sheen(vec3'+'\x20worldNorm'+'al,\x20vec3\x20v'+'iewDir,\x20fl'+'oat\x20gloss)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20NoV\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'float\x20alph'+'aG\x20=\x20gloss'+'\x20*\x20gloss;\x0a'+'\x0a\x20\x20\x20\x20//\x20Av'+'oid\x20using\x20'+'a\x20LUT\x20and\x20'+'approximat'+'e\x20the\x20valu'+'es\x20analyti'+'cally\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'gloss\x20<\x200.'+'25\x20?\x20-339.'+'2\x20*\x20alphaG'+'\x20+\x20161.4\x20*'+'\x20gloss\x20-\x202'+'5.9\x20:\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95;\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20gl'+'oss\x20<\x200.25'+'\x20?\x2044.0\x20*\x20'+'alphaG\x20-\x202'+'3.7\x20*\x20glos'+'s\x20+\x203.26\x20:'+'\x201.97\x20*\x20al'+'phaG\x20-\x203.2'+'7\x20*\x20gloss\x20'+'+\x200.72;\x0a\x20\x20'+'\x20\x20float\x20DG'+'\x20=\x20exp(\x20a\x20'+'*\x20NoV\x20+\x20b\x20'+')\x20+\x20(\x20glos'+'s\x20<\x200.25\x20?'+'\x200.0\x20:\x200.1'+'\x20*\x20(\x20gloss'+'\x20-\x200.25\x20)\x20'+');\x0a\x20\x20\x20\x20sRe'+'flection\x20+'+'=\x20calcRefl'+'ection(wor'+'ldNormal,\x20'+'0.0)\x20*\x20sat'+'urate(DG);'+'\x0a}\x0a',o2='\x0avec3\x20refr'+'act2(vec3\x20'+'viewVec,\x20v'+'ec3\x20normal'+',\x20float\x20IO'+'R)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20vn\x20=\x20'+'dot(viewVe'+'c,\x20normal)'+';\x0a\x20\x20\x20\x20floa'+'t\x20k\x20=\x201.0\x20'+'-\x20IOR\x20*\x20IO'+'R\x20*\x20(1.0\x20-'+'\x20vn\x20*\x20vn);'+'\x0a\x20\x20\x20\x20vec3\x20'+'refrVec\x20=\x20'+'IOR\x20*\x20view'+'Vec\x20-\x20(IOR'+'\x20*\x20vn\x20+\x20sq'+'rt(k))\x20*\x20n'+'ormal;\x0a\x20\x20\x20'+'\x20return\x20re'+'frVec;\x0a}\x0a\x0a'+'void\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20vec3\x20w'+'orldNormal'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20viewDir,'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20thicknes'+'s,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20albedo'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20transmi'+'ssion,\x0a\x20\x20\x20'+'\x20float\x20ref'+'ractionInd'+'ex,\x0a\x20\x20\x20\x20fl'+'oat\x20disper'+'sion\x0a#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20,\x20'+'vec3\x20iride'+'scenceFres'+'nel,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceInte'+'nsity\x0a#end'+'if\x20\x0a)\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20s'+'ame\x20reflec'+'tion\x20code\x20'+'with\x20refra'+'ction\x20vect'+'or\x0a\x20\x20\x20\x20vec'+'4\x20tmpRefl\x20'+'=\x20dReflect'+'ion;\x0a\x20\x20\x20\x20v'+'ec3\x20reflec'+'tionDir\x20=\x20'+'refract2(-'+'viewDir,\x20w'+'orldNormal'+',\x20refracti'+'onIndex);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve'+'c4(0);\x0a\x20\x20\x20'+'\x20addReflec'+'tion(refle'+'ctionDir,\x20'+'gloss);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20dRe'+'flection.r'+'gb\x20*\x20albed'+'o,\x20transmi'+'ssion);\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20=\x20tmpR'+'efl;\x0a}\x0a',l2='\x0auniform\x20f'+'loat\x20mater'+'ial_invAtt'+'enuationDi'+'stance;\x0aun'+'iform\x20vec3'+'\x20material_'+'attenuatio'+'n;\x0a\x0avec3\x20e'+'valRefract'+'ionColor(v'+'ec3\x20refrac'+'tionVector'+',\x20float\x20gl'+'oss,\x20float'+'\x20refractio'+'nIndex)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20Th'+'e\x20refracti'+'on\x20point\x20i'+'s\x20the\x20entr'+'y\x20point\x20+\x20'+'vector\x20to\x20'+'exit\x20point'+'\x0a\x20\x20\x20\x20vec4\x20'+'pointOfRef'+'raction\x20=\x20'+'vec4(vPosi'+'tionW\x20+\x20re'+'fractionVe'+'ctor,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'Project\x20to'+'\x20texture\x20s'+'pace\x20so\x20we'+'\x20can\x20sampl'+'e\x20it\x0a\x20\x20\x20\x20v'+'ec4\x20projec'+'tionPoint\x20'+'=\x20matrix_v'+'iewProject'+'ion\x20*\x20poin'+'tOfRefract'+'ion;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20bui'+'lt-in\x20getG'+'rabScreenP'+'os\x20functio'+'n\x20to\x20conve'+'rt\x20screen\x20'+'position\x20t'+'o\x20grab\x20tex'+'ture\x20uv\x20co'+'ords\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etGrabScre'+'enPos(proj'+'ectionPoin'+'t);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Use\x20IOR\x20'+'and\x20roughn'+'ess\x20to\x20sel'+'ect\x20mip\x0a\x20\x20'+'\x20\x20float\x20io'+'rToRoughne'+'ss\x20=\x20(1.0\x20'+'-\x20gloss)\x20*'+'\x20clamp((1.'+'0\x20/\x20refrac'+'tionIndex)'+'\x20*\x202.0\x20-\x202'+'.0,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20f'+'loat\x20refra'+'ctionLod\x20='+'\x20log2(uScr'+'eenSize.x)'+'\x20*\x20iorToRo'+'ughness;\x0a\x20'+'\x20\x20\x20vec3\x20re'+'fraction\x20='+'\x20texture2D'+'Lod(uScene'+'ColorMap,\x20'+'uv,\x20refrac'+'tionLod).r'+'gb;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20refr'+'action;\x0a}\x0a'+'\x0avoid\x20addR'+'efraction('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20thickne'+'ss,\x20\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+('3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20albed'+'o,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20transm'+'ission,\x0a\x20\x20'+'\x20\x20float\x20re'+'fractionIn'+'dex,\x0a\x20\x20\x20\x20f'+'loat\x20dispe'+'rsion\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a)\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20Extr'+'act\x20scale\x20'+'from\x20the\x20m'+'odel\x20trans'+'form\x0a\x20\x20\x20\x20v'+'ec3\x20modelS'+'cale;\x0a\x20\x20\x20\x20'+'modelScale'+'.x\x20=\x20lengt'+'h(vec3(mat'+'rix_model['+'0].xyz));\x0a'+'\x20\x20\x20\x20modelS'+'cale.y\x20=\x20l'+'ength(vec3'+'(matrix_mo'+'del[1].xyz'+'));\x0a\x20\x20\x20\x20mo'+'delScale.z'+'\x20=\x20length('+'vec3(matri'+'x_model[2]'+'.xyz));\x0a\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20the\x20'+'refraction'+'\x20vector,\x20s'+'caled\x20by\x20t'+'he\x20thickne'+'ss\x20and\x20sca'+'le\x20of\x20the\x20'+'object\x0a\x20\x20\x20'+'\x20vec3\x20scal'+'e\x20=\x20thickn'+'ess\x20*\x20mode'+'lScale;\x0a\x20\x20'+'\x20\x20vec3\x20ref'+'ractionVec'+'tor\x20=\x20norm'+'alize(refr'+'act(-viewD'+'ir,\x20worldN'+'ormal,\x20ref'+'ractionInd'+'ex))\x20*\x20sca'+'le;\x0a\x20\x20\x20\x20ve'+'c3\x20refract'+'ion\x20=\x20eval'+'Refraction'+'Color(refr'+'actionVect'+'or,\x20gloss,'+'\x20refractio'+'nIndex);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20bas'+'ed\x20on\x20the\x20'+'dispersion'+'\x20material\x20'+'property,\x20'+'calculate\x20'+'modified\x20r'+'efraction\x20'+'index\x20valu'+'es\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20for\x20R\x20'+'and\x20B\x20chan'+'nels\x20and\x20e'+'valuate\x20th'+'e\x20refracti'+'on\x20color\x20f'+'or\x20them.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20halfSpr'+'ead\x20=\x20(1.0'+'\x20/\x20refract'+'ionIndex\x20-')+('\x201.0)\x20*\x200.'+'025\x20*\x20disp'+'ersion;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20refract'+'ionIndexR\x20'+'=\x20refracti'+'onIndex\x20-\x20'+'halfSpread'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'refraction'+'Vector\x20=\x20n'+'ormalize(r'+'efract(-vi'+'ewDir,\x20wor'+'ldNormal,\x20'+'refraction'+'IndexR))\x20*'+'\x20scale;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20refr'+'action.r\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'xR).r;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20refracti'+'onIndexB\x20='+'\x20refractio'+'nIndex\x20+\x20h'+'alfSpread;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efractionV'+'ector\x20=\x20no'+'rmalize(re'+'fract(-vie'+'wDir,\x20worl'+'dNormal,\x20r'+'efractionI'+'ndexB))\x20*\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20refra'+'ction.b\x20=\x20'+'evalRefrac'+'tionColor('+'refraction'+'Vector,\x20gl'+'oss,\x20refra'+'ctionIndex'+'B).b;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20Trans'+'mittance\x20i'+'s\x20our\x20fina'+'l\x20refracti'+'on\x20color\x0a\x20'+'\x20\x20\x20vec3\x20tr'+'ansmittanc'+'e;\x0a\x20\x20\x20\x20if\x20'+'(material_'+'invAttenua'+'tionDistan'+'ce\x20!=\x200.0)'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'attenuatio'+'n\x20=\x20-log(m'+'aterial_at'+'tenuation)'+'\x20*\x20materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans'+'mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20vec3'+'\x20fresnel\x20='+'\x20vec3(1.0)'+'\x20-\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot(')+('viewDir,\x20w'+'orldNormal'+'),\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20ref'+'raction\x20*\x20'+'transmitta'+'nce\x20*\x20fres'+'nel,\x20trans'+'mission);\x0a'+'}\x0a'),c2='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0a//\x20sourc'+'e\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'lerCube\x20so'+'urceCube;\x0a'+'#else\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20so'+'urceTex;\x0a#'+'endif\x0a\x0a#if'+'def\x20USE_SA'+'MPLES_TEX\x0a'+'\x20\x20\x20\x20//\x20sam'+'ples\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20sam'+'plesTex;\x0a\x20'+'\x20\x20\x20uniform'+'\x20vec2\x20samp'+'lesTexInve'+'rseSize;\x0a#'+'endif\x0a\x0a//\x20'+'params:\x0a//'+'\x20x\x20-\x20targe'+'t\x20cubemap\x20'+'face\x200..6\x0a'+'//\x20y\x20-\x20tar'+'get\x20image\x20'+'total\x20pixe'+'ls\x0a//\x20z\x20-\x20'+'source\x20cub'+'emap\x20size\x0a'+'uniform\x20ve'+'c3\x20params;'+'\x0a\x0afloat\x20ta'+'rgetFace()'+'\x20{\x20return\x20'+'params.x;\x20'+'}\x0afloat\x20ta'+'rgetTotalP'+'ixels()\x20{\x20'+'return\x20par'+'ams.y;\x20}\x0af'+'loat\x20sourc'+'eTotalPixe'+'ls()\x20{\x20ret'+'urn\x20params'+'.z;\x20}\x0a\x0aflo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0a#i'+'nclude\x20\x22de'+'codePS\x22\x0a#i'+'nclude\x20\x22en'+'codePS\x22\x0a\x0a/'+'/--\x20suppor'+'ted\x20projec'+'tions\x0a\x0avec'+'3\x20modifySe'+'ams(vec3\x20d'+'ir,\x20float\x20'+'scale)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20ad'+'ir\x20=\x20abs(d'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20M\x20=\x20m'+'ax(max(adi'+'r.x,\x20adir.'+'y),\x20adir.z'+');\x0a\x20\x20\x20\x20ret'+'urn\x20dir\x20/\x20'+'M\x20*\x20vec3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.x\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20adir.y\x20'+'==\x20M\x20?\x201.0'+'\x20:\x20scale,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.z\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0avec2\x20t'+'oSpherical'+'(vec3\x20dir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec2(d'+'ir.xz\x20==\x20v'+'ec2(0.0)\x20?'+('\x200.0\x20:\x20ata'+'n(dir.x,\x20d'+'ir.z),\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0avec3\x20f'+'romSpheric'+'al(vec2\x20uv'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec3('+'cos(uv.y)\x20'+'*\x20sin(uv.x'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'in(uv.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cos('+'uv.y)\x20*\x20co'+'s(uv.x));\x0a'+'}\x0a\x0avec3\x20ge'+'tDirection'+'Equirect()'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20fromSp'+'herical((v'+'ec2(vUv0.x'+',\x201.0\x20-\x20vU'+'v0.y)\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20vec2(PI,\x20'+'PI\x20*\x200.5))'+';\x0a}\x0a\x0a//\x20oc'+'tahedral\x20c'+'ode,\x20based'+'\x20on\x20https:'+'//jcgt.org'+'/published'+'/0003/02/0'+'1/\x0a//\x20\x22Sur'+'vey\x20of\x20Eff'+'icient\x20Rep'+'resentatio'+'ns\x20for\x20Ind'+'ependent\x20U'+'nit\x20Vector'+'s\x22\x20by\x20Cigo'+'lle,\x20Donow'+',\x20Evangela'+'kos,\x20Mara,'+'\x20McGuire,\x20'+'Meyer\x0a\x0aflo'+'at\x20signNot'+'Zero(float'+'\x20k){\x0a\x20\x20\x20\x20r'+'eturn(k\x20>='+'\x200.0)\x20?\x201.'+'0\x20:\x20-1.0;\x0a'+'}\x0a\x0avec2\x20si'+'gnNotZero('+'vec2\x20v)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20vec2(sign'+'NotZero(v.'+'x),\x20signNo'+'tZero(v.y)'+');\x0a}\x0a\x0a//\x20R'+'eturns\x20a\x20u'+'nit\x20vector'+'.\x20Argument'+'\x20o\x20is\x20an\x20o'+'ctahedral\x20'+'vector\x20pac'+'ked\x20via\x20oc'+'tEncode,\x20o'+'n\x20the\x20[-1,'+'\x20+1]\x20squar'+'e\x0avec3\x20oct'+'Decode(vec'+'2\x20o)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20v\x20=\x20'+'vec3(o.x,\x20'+'1.0\x20-\x20abs('+'o.x)\x20-\x20abs'+'(o.y),\x20o.y'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20v.xz\x20=\x20('+'1.0\x20-\x20abs('+'v.zx))\x20*\x20s'+'ignNotZero'+'(v.xz);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20norma'+'lize(v);\x0a}'+'\x0a\x0avec3\x20get'+'DirectionO'+'ctahedral('+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20octDe'+'code(vec2(')+('vUv0.x,\x201.'+'0\x20-\x20vUv0.y'+')\x20*\x202.0\x20-\x20'+'1.0);\x0a}\x0a\x0a/'+'/\x20Assumes\x20'+'that\x20v\x20is\x20'+'a\x20unit\x20vec'+'tor.\x20The\x20r'+'esult\x20is\x20a'+'n\x20octahedr'+'al\x20vector\x20'+'on\x20the\x20[-1'+',\x20+1]\x20squa'+'re\x0avec2\x20oc'+'tEncode(in'+'\x20vec3\x20v)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20vec2'+'\x20result\x20=\x20'+'v.xz\x20*\x20(1.'+'0\x20/\x20l1norm'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20result\x20='+'\x20(1.0\x20-\x20ab'+'s(result.y'+'x))\x20*\x20sign'+'NotZero(re'+'sult.xy);\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20res'+'ult;\x0a}\x0a\x0a//'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'///////\x0a\x0a#'+'ifdef\x20CUBE'+'MAP_SOURCE'+'\x0a\x20\x20\x20\x20vec4\x20'+'sampleCube'+'map(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureCu'+'be(sourceC'+'ube,\x20modif'+'ySeams(dir'+',\x201.0));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eCubemap(v'+'ec2\x20sph)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leCubemap('+'fromSpheri'+'cal(sph));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20vec4\x20sam'+'pleCubemap'+'(vec3\x20dir,'+'\x20float\x20mip'+'Level)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20textur'+'eCubeLod(s'+'ourceCube,'+'\x20modifySea'+'ms(dir,\x201.'+'0),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleCub'+'emap(vec2\x20'+'sph,\x20float'+'\x20mipLevel)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleCubema'+'p(fromSphe'+'rical(sph)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eEquirect('+'vec2\x20sph)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'sph\x20/\x20vec2'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'ture2D(sou'+'rceTex,\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec4\x20s'+'ampleEquir'+'ect(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleEqu'+'irect(toSp'+'herical(di'+'r));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleEqu'+'irect(vec2'+'\x20sph,\x20floa'+'t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20sph\x20/\x20ve'+'c2(PI\x20*\x202.'+'0,\x20PI)\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2DLo'+'d(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y),\x20mip'+'Level);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Equirect(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20sampleEq'+'uirect(toS'+'pherical(d'+'ir),\x20mipLe'+'vel);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20o'+'ctEncode(d'+'ir)\x20*\x200.5\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20texture2'+'D(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Octahedral'+'(vec2\x20sph)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleOctahe'+'dral(fromS'+'pherical(s'+'ph));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20octEn'+'code(dir)\x20'+'*\x200.5\x20+\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20te'+'xture2DLod'+'(sourceTex'+',\x20vec2(uv.'+'x,\x201.0\x20-\x20u'+'v.y),\x20mipL'+'evel);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20sampleO'+'ctahedral('+'vec2\x20sph,\x20'+'float\x20mipL'+'evel)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleO'+'ctahedral('+'fromSpheri'+'cal(sph),\x20')+('mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0avec3'+'\x20getDirect'+'ionCubemap'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec2\x20st\x20=\x20v'+'Uv0\x20*\x202.0\x20'+'-\x201.0;\x0a\x20\x20\x20'+'\x20float\x20fac'+'e\x20=\x20target'+'Face();\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ve'+'c;\x0a\x20\x20\x20\x20if\x20'+'(face\x20==\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec\x20=\x20'+'vec3(1,\x20-s'+'t.y,\x20-st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3(-1,\x20-st.'+'y,\x20st.x);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(face\x20'+'==\x202.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c\x20=\x20vec3(s'+'t.x,\x201,\x20st'+'.y);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x203.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3(st.x,\x20'+'-1,\x20-st.y)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(fac'+'e\x20==\x204.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec\x20=\x20vec3'+'(st.x,\x20-st'+'.y,\x201);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec\x20=\x20vec3('+'-st.x,\x20-st'+'.y,\x20-1);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(mod'+'ifySeams(v'+'ec,\x201.0));'+'\x0a}\x0a\x0amat3\x20m'+'atrixFromV'+'ector(vec3'+'\x20n)\x20{\x20//\x20f'+'risvad\x0a\x20\x20\x20'+'\x20float\x20a\x20='+'\x201.0\x20/\x20(1.'+'0\x20+\x20n.z);\x0a'+'\x20\x20\x20\x20float\x20'+'b\x20=\x20-n.x\x20*'+'\x20n.y\x20*\x20a;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'1\x20=\x20vec3(1'+'.0\x20-\x20n.x\x20*'+'\x20n.x\x20*\x20a,\x20'+'b,\x20-n.x);\x0a'+'\x20\x20\x20\x20vec3\x20b'+'2\x20=\x20vec3(b'+',\x201.0\x20-\x20n.'+'y\x20*\x20n.y\x20*\x20'+'a,\x20-n.y);\x0a'+'\x20\x20\x20\x20return'+'\x20mat3(b1,\x20'+'b2,\x20n);\x0a}\x0a'+'\x0amat3\x20matr'+'ixFromVect'+'orSlow(vec'+'3\x20n)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20up\x20='+'\x20(1.0\x20-\x20ab'+'s(n.y)\x20<=\x20'+'0.0000001)'+'\x20?\x20vec3(0.'+'0,\x200.0,\x20n.'+'y\x20>\x200.0\x20?\x20'+'1.0\x20:\x20-1.0'+')\x20:\x20vec3(0'+'.0,\x201.0,\x200'+'.0);\x0a\x20\x20\x20\x20v'+'ec3\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20vec'+'3\x20y\x20=\x20cros')+('s(n,\x20x);\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(x,\x20y,'+'\x20n);\x0a}\x0a\x0ave'+'c4\x20reproje'+'ct()\x20{\x0a\x20\x20\x20'+'\x20if\x20({NUM_'+'SAMPLES}\x20<'+'=\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20si'+'ngle\x20sampl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20{EN'+'CODE_FUNC}'+'({DECODE_F'+'UNC}({SOUR'+'CE_FUNC}({'+'TARGET_FUN'+'C}())));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multi\x20s'+'ample\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20t'+'\x20=\x20{TARGET'+'_FUNC}();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20tu\x20=\x20dF'+'dx(t);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'tv\x20=\x20dFdy('+'t);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(float\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'++u)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(float\x20'+'v\x20=\x200.0;\x20v'+'\x20<\x20{NUM_SA'+'MPLES_SQRT'+'};\x20++v)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20resu'+'lt\x20+=\x20{DEC'+'ODE_FUNC}('+'{SOURCE_FU'+'NC}(normal'+'ize(t\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20tu'+'\x20*\x20(u\x20/\x20{N'+'UM_SAMPLES'+'_SQRT}\x20-\x200'+'.5)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20tv\x20*'+'\x20(v\x20/\x20{NUM'+'_SAMPLES_S'+'QRT}\x20-\x200.5'+'))));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20({'+'NUM_SAMPLE'+'S_SQRT}\x20*\x20'+'{NUM_SAMPL'+'ES_SQRT}))'+';\x0a\x20\x20\x20\x20}\x0a}\x0a'+'\x0avec4\x20unpa'+'ckFloat\x20=\x20'+'vec4(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20void\x20'+'unpackSamp'+'le(int\x20i,\x20'+'out\x20vec3\x20L'+',\x20out\x20floa')+('t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20u\x20'+'=\x20(float(i'+'\x20*\x204)\x20+\x200.'+'5)\x20*\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20v\x20=\x20(f'+'loor(u)\x20+\x20'+'0.5)\x20*\x20sam'+'plesTexInv'+'erseSize.y'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20raw;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.x\x20=\x20dot'+'(texture2D'+'(samplesTe'+'x,\x20vec2(u,'+'\x20v)),\x20unpa'+'ckFloat);\x20'+'u\x20+=\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'texture2D('+'samplesTex'+',\x20vec2(u,\x20'+'v)),\x20unpac'+'kFloat);\x20u'+'\x20+=\x20sample'+'sTexInvers'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.z\x20=\x20dot(t'+'exture2D(s'+'amplesTex,'+'\x20vec2(u,\x20v'+')),\x20unpack'+'Float);\x20u\x20'+'+=\x20samples'+'TexInverse'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20raw.'+'w\x20=\x20dot(te'+'xture2D(sa'+'mplesTex,\x20'+'vec2(u,\x20v)'+'),\x20unpackF'+'loat);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20L.xy'+'z\x20=\x20raw.xy'+'z\x20*\x202.0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20mipLeve'+'l\x20=\x20raw.w\x20'+'*\x208.0;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20convolve\x20'+'an\x20environ'+'ment\x20given'+'\x20pre-gener'+'ated\x20sampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamples()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L')+(',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level))\x20*\x20'+'L.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tot'+'alWeight\x20+'+'=\x20L.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20{ENCODE'+'_FUNC}(res'+'ult\x20/\x20tota'+'lWeight);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20unweig'+'hted\x20versi'+'on\x20of\x20pref'+'ilterSampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamplesUn'+'weighted()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20fl'+'oat({NUM_S'+'AMPLES}));'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20{PROCESS'+'_FUNC}();\x0a'+'}\x0a'),h2='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0auniform'+'\x20vec4\x20uvMo'+'d;\x0avarying'+'\x20vec2\x20vUv0'+';\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20v'+'ec4(vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(vertex_po'+'sition.xy\x20'+'*\x200.5\x20+\x200.'+'5)\x20*\x20uvMod'+'.xy\x20+\x20uvMo'+'d.zw);\x0a}\x0a',d2='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20uScen'+'eDepthMap;'+'\x0a\x0a#ifndef\x20'+'SCREENSIZE'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20SCREENS'+'IZE\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20un'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#ifndef'+'\x20CAMERAPLA'+'NES\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20camera'+'_params;\x20/'+'/\x20x:\x201\x20/\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20\x20y:\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20z:\x20ca'+'mera_near,'+'\x20\x20\x20\x20\x20\x20\x20\x20w:'+'\x20is_ortho\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20lineariz'+'eDepth(flo'+'at\x20z)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'camera_par'+'ams.w\x20==\x200'+'.0)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(camera'+'_params.z\x20'+'*\x20camera_p'+'arams.y)\x20/'+'\x20(camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(camer'+'a_params.z'+'\x20-\x20camera_'+'params.y))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20camera'+'_params.z\x20'+'+\x20z\x20*\x20(cam'+'era_params'+'.y\x20-\x20camer'+'a_params.z'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0aflo'+'at\x20delinea'+'rizeDepth('+'float\x20line'+'arDepth)\x20{'+'\x0a\x20\x20\x20\x20if\x20(c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'(camera_pa'+'rams.y\x20*\x20('+'camera_par'+'ams.z\x20-\x20li'+'nearDepth)'+')\x20/\x20(linea'+'rDepth\x20*\x20('+'camera_par'+'ams.z\x20-\x20ca'+'mera_param'+'s.y));\x0a\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(line'+'arDepth\x20-\x20'+'camera_par'+'ams.z)\x20/\x20('+('camera_par'+'ams.y\x20-\x20ca'+'mera_param'+'s.z);\x0a\x20\x20\x20\x20'+'}\x0a}\x0a\x0a//\x20Re'+'trieves\x20re'+'ndered\x20lin'+'ear\x20camera'+'\x20depth\x20by\x20'+'UV\x0afloat\x20g'+'etLinearSc'+'reenDepth('+'vec2\x20uv)\x20{'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SCENE_DE'+'PTHMAP_LIN'+'EAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_FLOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2D(u'+'SceneDepth'+'Map,\x20uv).r'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20textu'+'reSize\x20=\x20t'+'extureSize'+'(uSceneDep'+'thMap,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ivec2\x20t'+'exel\x20=\x20ive'+'c2(uv\x20*\x20ve'+'c2(texture'+'Size));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20data\x20'+'=\x20texelFet'+'ch(uSceneD'+'epthMap,\x20t'+'exel,\x200);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(data.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(uint(d'+'ata.g\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20|\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(uint(dat'+'a.b\x20*\x20255.'+'0)\x20<<\x208u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(data.a\x20'+'*\x20255.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uintBitsTo'+'Float(intB'+'its);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20line'+'arizeDepth'+'(texture2D'+'(uSceneDep'+'thMap,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20float\x20'+'getLinearS'+'creenDepth'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20uv'+'\x20=\x20gl_Frag'+'Coord.xy\x20*'+'\x20uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur')+('n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afloat\x20'+'getLinearD'+'epth(vec3\x20'+'pos)\x20{\x0a\x20\x20\x20'+'\x20return\x20-('+'matrix_vie'+'w\x20*\x20vec4(p'+'os,\x201.0)).'+'z;\x0a}\x0a'),f2='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x20\x0ai'+'nt\x20getShad'+'owCascadeI'+'ndex(vec4\x20'+'shadowCasc'+'adeDistanc'+'es,\x20int\x20sh'+'adowCascad'+'eCount)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20in\x200\x20.'+'.\x20far\x20plan'+'e\x20range\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x0a\x20'+'\x20\x20\x20//\x201.0\x20'+'if\x20depth\x20>'+'=\x20distance'+',\x200.0\x20othe'+'rwise\x0a\x20\x20\x20\x20'+'vec4\x20compa'+'risons\x20=\x20s'+'tep(shadow'+'CascadeDis'+'tances,\x20ve'+'c4(depth))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'sum\x20is\x20the'+'\x20index\x0a\x20\x20\x20'+'\x20int\x20casca'+'deIndex\x20=\x20'+'int(dot(co'+'mparisons,'+'\x20vec4(1.0)'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20limit\x20to'+'\x20actual\x20nu'+'mber\x20of\x20us'+'ed\x20cascade'+'s\x0a\x20\x20\x20\x20retu'+'rn\x20min(cas'+'cadeIndex,'+'\x20shadowCas'+'cadeCount\x20'+'-\x201);\x0a}\x0a\x0a/'+'/\x20function'+'\x20which\x20mod'+'ifies\x20casc'+'ade\x20index\x20'+'to\x20dither\x20'+'between\x20ca'+'scades\x0aint'+'\x20ditherSha'+'dowCascade'+'Index(int\x20'+'cascadeInd'+'ex,\x20vec4\x20s'+'hadowCasca'+'deDistance'+'s,\x20int\x20sha'+'dowCascade'+'Count,\x20flo'+'at\x20blendFa'+'ctor)\x20{\x0a\x20\x0a'+'\x20\x20\x20\x20if\x20(ca'+'scadeIndex'+'\x20<\x20shadowC'+'ascadeCoun'+'t\x20-\x201)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20current'+'RangeEnd\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20transit'+'ionStart\x20='+'\x20blendFact'+'or\x20*\x20curre'+'ntRangeEnd'+';\x20//\x20Start'+'\x20overlap\x20f'+'actor\x20away'+'\x20from\x20the\x20'+'end\x20distan'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x201.0\x20/'+('\x20gl_FragCo'+'ord.w;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'depth\x20>\x20tr'+'ansitionSt'+'art)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Calculat'+'e\x20a\x20transi'+'tion\x20facto'+'r\x20(0.0\x20to\x20'+'1.0)\x20withi'+'n\x20the\x20over'+'lap\x20range\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20tr'+'ansitionFa'+'ctor\x20=\x20smo'+'othstep(tr'+'ansitionSt'+'art,\x20curre'+'ntRangeEnd'+',\x20depth);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Add\x20'+'pseudo-ran'+'dom\x20dither'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ODO:\x20repla'+'ce\x20by\x20user'+'\x20selectabl'+'e\x20ditherin'+'g\x20method\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dit'+'her\x20=\x20frac'+'t(sin(dot('+'gl_FragCoo'+'rd.xy,\x20vec'+'2(12.9898,'+'\x2078.233)))'+'\x20*\x2043758.5'+'453);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(dither\x20<'+'\x20transitio'+'nFactor)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20cas'+'cadeIndex\x20'+'+=\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20return\x20ca'+'scadeIndex'+';\x0a}\x0a\x0avec3\x20'+'fadeShadow'+'(vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'CascadeDis'+'tances)\x20{\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20if\x20th'+'e\x20pixel\x20is'+'\x20past\x20the\x20'+'shadow\x20dis'+'tance,\x20rem'+'ove\x20shadow'+'\x0a\x20\x20\x20\x20//\x20th'+'is\x20enforce'+'s\x20straight'+'\x20line\x20inst'+'ead\x20of\x20cor'+'ner\x20of\x20sha'+'dow\x20which\x20'+'moves\x20when'+'\x20camera\x20ro'+'tates\x20\x20\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x20\x20'+'\x20\x20if\x20(dept'+'h\x20>\x20shadow'+'CascadeDis'+'tances.w)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'shadowCoor'+'d.z\x20=\x20-999'+'9999.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20shad'+'owCoord;\x0a}'+'\x0a'),u2='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afloat\x20lin'+'step(float'+'\x20a,\x20float\x20'+'b,\x20float\x20v'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20satur'+'ate((v\x20-\x20a'+')\x20/\x20(b\x20-\x20a'+'));\x0a}\x0a\x0aflo'+'at\x20reduceL'+'ightBleedi'+'ng(float\x20p'+'Max,\x20float'+'\x20amount)\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'float\x20cheb'+'yshevUpper'+'Bound(vec2'+'\x20moments,\x20'+'float\x20mean'+',\x20float\x20mi'+'nVariance,'+'\x20float\x20lig'+'htBleeding'+'Reduction)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'Compute\x20va'+'riance\x0a\x20\x20\x20'+'\x20float\x20var'+'iance\x20=\x20mo'+'ments.y\x20-\x20'+'(moments.x'+'\x20*\x20moments'+'.x);\x0a\x20\x20\x20\x20v'+'ariance\x20=\x20'+'max(varian'+'ce,\x20minVar'+'iance);\x0a\x0a\x20'+'\x20\x20\x20//\x20Comp'+'ute\x20probab'+'ilistic\x20up'+'per\x20bound\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20mean\x20-'+'\x20moments.x'+';\x0a\x20\x20\x20\x20floa'+'t\x20pMax\x20=\x20v'+'ariance\x20/\x20'+'(variance\x20'+'+\x20(d\x20*\x20d))'+';\x0a\x0a\x20\x20\x20\x20pMa'+'x\x20=\x20reduce'+'LightBleed'+'ing(pMax,\x20'+'lightBleed'+'ingReducti'+'on);\x0a\x0a\x20\x20\x20\x20'+'//\x20One-tai'+'led\x20Chebys'+'hev\x0a\x20\x20\x20\x20re'+'turn\x20(mean'+'\x20<=\x20moment'+'s.x\x20?\x201.0\x20'+':\x20pMax);\x0a}'+'\x0a\x0afloat\x20ca'+'lculateEVS'+'M(vec3\x20mom'+'ents,\x20floa'+'t\x20Z,\x20float'+'\x20vsmBias,\x20'+'float\x20expo'+'nent)\x20{\x0a\x20\x20'+'\x20\x20Z\x20=\x202.0\x20'+'*\x20Z\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20warpedDep'+'th\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20m'+'oments.xy\x20'+'+=\x20vec2(wa'+'rpedDepth,'+'\x20warpedDep'+'th*warpedD'+'epth)\x20*\x20(1'+'.0\x20-\x20momen'+'ts.z);\x0a\x0a\x20\x20'+('\x20\x20float\x20VS'+'MBias\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20float'+'\x20depthScal'+'e\x20=\x20VSMBia'+'s\x20*\x20expone'+'nt\x20*\x20warpe'+'dDepth;\x0a\x20\x20'+'\x20\x20float\x20mi'+'nVariance1'+'\x20=\x20depthSc'+'ale\x20*\x20dept'+'hScale;\x0a\x20\x20'+'\x20\x20return\x20c'+'hebyshevUp'+'perBound(m'+'oments.xy,'+'\x20warpedDep'+'th,\x20minVar'+'iance1,\x200.'+'1);\x0a}\x0a\x0a//\x20'+'------\x20VSM'+'\x2016\x20------'+'\x0a\x0afloat\x20VS'+'M16(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec2\x20'+'texCoords,'+'\x20float\x20res'+'olution,\x20f'+'loat\x20Z,\x20fl'+'oat\x20vsmBia'+'s,\x20float\x20e'+'xponent)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'moments\x20=\x20'+'texture2DL'+'od(tex,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM16('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM16(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM16(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20VSM16('+'TEXTURE_PA'+'SS(shadowM'+'ap),\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----')+('--\x0a\x0afloat\x20'+'VSM32(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20texCoord'+'s,\x20float\x20r'+'esolution,'+'\x20float\x20Z,\x20'+'float\x20vsmB'+'ias,\x20float'+'\x20exponent)'+'\x20{\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20CAPS_'+'TEXTURE_FL'+'OAT_FILTER'+'ABLE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20te'+'xture2DLod'+'(tex,\x20texC'+'oords,\x200.0'+').xyz;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ma'+'nual\x20bilin'+'ear\x20filter'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pi'+'xelSize\x20=\x20'+'1.0\x20/\x20reso'+'lution;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20texC'+'oords\x20-=\x20v'+'ec2(pixelS'+'ize);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'00\x20=\x20textu'+'re2DLod(te'+'x,\x20texCoor'+'ds,\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20s10'+'\x20=\x20texture'+'2DLod(tex,'+'\x20texCoords'+'\x20+\x20vec2(pi'+'xelSize,\x200'+'),\x200.0).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20s01\x20'+'=\x20texture2'+'DLod(tex,\x20'+'texCoords\x20'+'+\x20vec2(0,\x20'+'pixelSize)'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20s11\x20='+'\x20texture2D'+'Lod(tex,\x20t'+'exCoords\x20+'+'\x20vec2(pixe'+'lSize),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20fr\x20=\x20frac'+'t(texCoord'+'s\x20*\x20resolu'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'h0\x20=\x20mix(s'+'00,\x20s10,\x20f'+'r.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20h'+'1\x20=\x20mix(s0'+'1,\x20s11,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20mi'+'x(h0,\x20h1,\x20'+'fr.y);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM32('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM32(T')+('EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM32(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20Z\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd.xy,\x20sha'+'dowParams.'+'x,\x20Z,\x20shad'+'owParams.y'+',\x20exponent'+');\x0a}\x0a'),p2='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_ACCEP'+'T(shadowMa'+'p),\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20textur'+'eShadow(sh'+'adowMap,\x20s'+'hadowCoord'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wSpotPCF1x'+'1(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSh'+'adow(shado'+'wMap,\x20shad'+'owCoord);\x0a'+'}\x0a\x0a//\x20----'+'-\x20Omni\x20Sam'+'pling\x20----'+'-\x0a\x0a#ifndef'+'\x20WEBGPU\x0a\x0af'+'loat\x20getSh'+'adowOmniPC'+'F1x1(sampl'+'erCubeShad'+'ow\x20shadowM'+'ap,\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20float\x20sh'+'adowZ\x20=\x20le'+'ngth(light'+'Dir)\x20*\x20sha'+'dowParams.'+'w\x20+\x20shadow'+'Params.z;\x0a'+'\x20\x20\x20\x20return'+'\x20texture(s'+'hadowMap,\x20'+'vec4(light'+'Dir,\x20shado'+'wZ));\x0a}\x0a\x0a#'+'endif\x0a',m2='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_ACCE'+'PT(shadowM'+'ap),\x20vec3\x20'+'shadowCoor'+'d,\x20vec3\x20sh'+'adowParams'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20sh'+'adowCoord.'+'z;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20sha'+'dowCoord.x'+'y\x20*\x20shadow'+'Params.x;\x20'+'//\x201\x20unit\x20'+'-\x201\x20texel\x0a'+'\x20\x20\x20\x20float\x20'+'shadowMapS'+'izeInv\x20=\x201'+'.0\x20/\x20shado'+'wParams.x;'+'\x0a\x20\x20\x20\x20vec2\x20'+'base_uv\x20=\x20'+'floor(uv\x20+'+'\x200.5);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20(uv.x\x20+\x200'+'.5\x20-\x20base_'+'uv.x);\x0a\x20\x20\x20'+'\x20float\x20t\x20='+'\x20(uv.y\x20+\x200'+'.5\x20-\x20base_'+'uv.y);\x20\x0a\x20\x20'+'\x20\x20base_uv\x20'+'-=\x20vec2(0.'+'5);\x0a\x20\x20\x20\x20ba'+'se_uv\x20*=\x20s'+'hadowMapSi'+'zeInv;\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'uw0\x20=\x20(3.0'+'\x20-\x202.0\x20*\x20s'+');\x0a\x20\x20\x20\x20flo'+'at\x20uw1\x20=\x20('+'1.0\x20+\x202.0\x20'+'*\x20s);\x0a\x0a\x20\x20\x20'+'\x20float\x20u0\x20'+'=\x20(2.0\x20-\x20s'+')\x20/\x20uw0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20f'+'loat\x20u1\x20=\x20'+'s\x20/\x20uw1\x20+\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(3.0\x20-\x202'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20t)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20v0\x20=\x20(2'+'.0\x20-\x20t)\x20/\x20'+'vw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20v1\x20=\x20t\x20/\x20'+'vw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20u0\x20='+'\x20u0\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v0\x20=\x20v0\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u1\x20=\x20'+'u1\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'1\x20=\x20v1\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+('sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw0\x20*\x20v'+'w1\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u0,\x20v'+'1,\x20z));\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w1\x20*\x20vw1\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u1,\x20v1,\x20z'+'));\x0a\x0a\x20\x20\x20\x20s'+'um\x20*=\x201.0f'+'\x20/\x2016.0;\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowPCF3x3('+'SHADOWMAP_'+'ACCEPT(sha'+'dowMap),\x20v'+'ec3\x20shadow'+'Coord,\x20vec'+'4\x20shadowPa'+'rams)\x20{\x0a\x20\x20'+'\x20\x20return\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_PASS'+'(shadowMap'+'),\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowSpotPCF'+'3x3(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3('+'SHADOWMAP_'+'PASS(shado'+'wMap),\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0a//\x20-----'+'\x20Omni\x20Samp'+'ling\x20-----'+'\x0a\x0a#ifndef\x20'+'WEBGPU\x0a\x0afl'+'oat\x20getSha'+'dowOmniPCF'+'3x3(sample'+'rCubeShado'+'w\x20shadowMa'+'p,\x20vec4\x20sh'+'adowParams'+',\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a\x20\x20\x20\x20fl'+'oat\x20shadow'+'Z\x20=\x20length'+'(dir)\x20*\x20sh'+'adowParams'+'.w\x20+\x20shado'+'wParams.z;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x0a\x20\x20\x20\x20'+'float\x20z\x20=\x20'+'1.0\x20/\x20floa'+'t(textureS'+'ize(shadow'+'Map,\x200));\x0a'+'\x20\x20\x20\x20vec3\x20t'+'c\x20=\x20normal'+'ize(dir);\x0a'+'\x0a\x20\x20\x20\x20//\x20av'+'erage\x204\x20sa'+'mples\x20-\x20no'+'t\x20a\x20strict')+('\x203x3\x20PCF\x20b'+'ut\x20that\x27s\x20'+'tricky\x20wit'+'h\x20cubemaps'+'\x0a\x20\x20\x20\x20mediu'+'mp\x20vec4\x20sh'+'adows;\x0a\x20\x20\x20'+'\x20shadows.x'+'\x20=\x20texture'+'(shadowMap'+',\x20vec4(tc\x20'+'+\x20vec3(\x20z,'+'\x20z,\x20z),\x20sh'+'adowZ));\x0a\x20'+'\x20\x20\x20shadows'+'.y\x20=\x20textu'+'re(shadowM'+'ap,\x20vec4(t'+'c\x20+\x20vec3(-'+'z,-z,\x20z),\x20'+'shadowZ));'+'\x0a\x20\x20\x20\x20shado'+'ws.z\x20=\x20tex'+'ture(shado'+'wMap,\x20vec4'+'(tc\x20+\x20vec3'+'(-z,\x20z,-z)'+',\x20shadowZ)'+');\x0a\x20\x20\x20\x20sha'+'dows.w\x20=\x20t'+'exture(sha'+'dowMap,\x20ve'+'c4(tc\x20+\x20ve'+'c3(\x20z,-z,-'+'z),\x20shadow'+'Z));\x0a\x0a\x20\x20\x20\x20'+'return\x20dot'+'(shadows,\x20'+'vec4(0.25)'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wOmniPCF3x'+'3(samplerC'+'ubeShadow\x20'+'shadowMap,'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20lightDi'+'r)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowOmniP'+'CF3x3(shad'+'owMap,\x20sha'+'dowParams,'+'\x20lightDir)'+';\x0a}\x0a\x0a#endi'+'f\x0a'),_2='\x0afloat\x20_ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec3\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20//\x20h'+'ttp://the-'+'witness.ne'+'t/news/201'+'3/09/shado'+'w-mapping-'+'summary-pa'+'rt-1/\x0a\x0a\x20\x20\x20'+'\x20float\x20z\x20='+'\x20shadowCoo'+'rd.z;\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'shadowCoor'+'d.xy\x20*\x20sha'+'dowParams.'+'x;\x20//\x201\x20un'+'it\x20-\x201\x20tex'+'el\x0a\x20\x20\x20\x20flo'+'at\x20shadowM'+'apSizeInv\x20'+'=\x201.0\x20/\x20sh'+'adowParams'+'.x;\x0a\x20\x20\x20\x20ve'+'c2\x20base_uv'+'\x20=\x20floor(u'+'v\x20+\x200.5);\x0a'+'\x20\x20\x20\x20float\x20'+'s\x20=\x20(uv.x\x20'+'+\x200.5\x20-\x20ba'+'se_uv.x);\x0a'+'\x20\x20\x20\x20float\x20'+'t\x20=\x20(uv.y\x20'+'+\x200.5\x20-\x20ba'+'se_uv.y);\x0a'+'\x20\x20\x20\x20base_u'+'v\x20-=\x20vec2('+'0.5);\x0a\x20\x20\x20\x20'+'base_uv\x20*='+'\x20shadowMap'+'SizeInv;\x0a\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20uw0\x20=\x20(4.'+'0\x20-\x203.0\x20*\x20'+'s);\x0a\x20\x20\x20\x20fl'+'oat\x20uw1\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20f'+'loat\x20uw2\x20='+'\x20(1.0\x20+\x203.'+'0\x20*\x20s);\x0a\x0a\x20'+'\x20\x20\x20float\x20u'+'0\x20=\x20(3.0\x20-'+'\x202.0\x20*\x20s)\x20'+'/\x20uw0\x20-\x202.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20u1\x20=\x20(3'+'.0\x20+\x20s)\x20/\x20'+'uw1;\x0a\x20\x20\x20\x20f'+'loat\x20u2\x20=\x20'+'s\x20/\x20uw2\x20+\x20'+'2.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(4.0\x20-\x203'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x207.0;\x0a'+'\x20\x20\x20\x20float\x20'+'vw2\x20=\x20(1.0'+'\x20+\x203.0\x20*\x20t'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20v0\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20t)\x20/\x20vw0'+'\x20-\x202.0;\x0a\x20\x20'+'\x20\x20float\x20v1'+'\x20=\x20(3.0\x20+\x20'+'t)\x20/\x20vw1;\x0a'+'\x20\x20\x20\x20float\x20'+'v2\x20=\x20t\x20/\x20v'+'w2\x20+\x202.0;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20sum\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20u0\x20'+'=\x20u0\x20*\x20sha'+'dowMapSize'+'Inv\x20+\x20base'+'_uv.x;\x0a\x20\x20\x20'+'\x20v0\x20=\x20v0\x20*'+'\x20shadowMap'+'SizeInv\x20+\x20'+'base_uv.y;'+'\x0a\x0a\x20\x20\x20\x20u1\x20='+('\x20u1\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v1\x20=\x20v1\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u2\x20=\x20'+'u2\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'2\x20=\x20v2\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+'sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw2\x20*\x20v'+'w0\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u2,\x20v'+'0,\x20z));\x0a\x0a\x20'+'\x20\x20\x20sum\x20+=\x20'+'uw0\x20*\x20vw1\x20'+'*\x20textureS'+'hadow(shad'+'owMap,\x20vec'+'3(u0,\x20v1,\x20'+'z));\x0a\x20\x20\x20\x20s'+'um\x20+=\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureShado'+'w(shadowMa'+'p,\x20vec3(u1'+',\x20v1,\x20z));'+'\x0a\x20\x20\x20\x20sum\x20+'+'=\x20uw2\x20*\x20vw'+'1\x20*\x20textur'+'eShadow(sh'+'adowMap,\x20v'+'ec3(u2,\x20v1'+',\x20z));\x0a\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w0\x20*\x20vw2\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u0,\x20v2,\x20z'+'));\x0a\x20\x20\x20\x20su'+'m\x20+=\x20uw1\x20*'+'\x20vw2\x20*\x20tex'+'tureShadow'+'(shadowMap'+',\x20vec3(u1,'+'\x20v2,\x20z));\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw2\x20*\x20vw2'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u2,\x20v2,'+'\x20z));\x0a\x0a\x20\x20\x20'+'\x20sum\x20*=\x201.'+'0f\x20/\x20144.0'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20saturate'+'(sum);\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'um;\x0a}\x0a\x0aflo'+'at\x20getShad'+'owPCF5x5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20_g'+'etShadowPC'+'F5x5(SHADO'+'WMAP_PASS('+'shadowMap)'+',\x20shadowCo'+'ord,\x20shado')+('wParams.xy'+'z);\x0a}\x0a\x0aflo'+'at\x20getShad'+'owSpotPCF5'+'x5(SHADOWM'+'AP_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getShad'+'owPCF5x5(S'+'HADOWMAP_P'+'ASS(shadow'+'Map),\x20shad'+'owCoord,\x20s'+'hadowParam'+'s.xyz);\x0a}\x0a'),g2='\x0a\x0a/**\x0a\x20*\x20P'+'CSS\x20is\x20a\x20s'+'hadow\x20samp'+'ling\x20metho'+'d\x20that\x20pro'+'vides\x20cont'+'act\x20harden'+'ing\x20soft\x20s'+'hadows,\x20us'+'ed\x20for\x20omn'+'i\x20and\x20spot'+'\x20lights.\x0a\x20'+'*\x20Based\x20on'+':\x20\x0a\x20*\x20-\x20ht'+'tps://www.'+'gamedev.ne'+'t/tutorial'+'s/programm'+'ing/graphi'+'cs/effect-'+'area-light'+'-shadows-p'+'art-1-pcss'+'-r4971/\x0a\x20*'+'\x20-\x20https:/'+'/github.co'+'m/pboechat'+'/PCSS\x20\x0a\x20*/'+'\x0a\x0a#define\x20'+'PCSS_SAMPL'+'E_COUNT\x2016'+'\x0a\x0auniform\x20'+'float\x20pcss'+'DiskSample'+'s[PCSS_SAM'+'PLE_COUNT]'+';\x0auniform\x20'+'float\x20pcss'+'SphereSamp'+'les[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x0avec2\x20'+'vogelDisk('+'int\x20sample'+'Index,\x20flo'+'at\x20count,\x20'+'float\x20phi,'+'\x20float\x20r)\x20'+'{\x0a\x20\x20\x20\x20cons'+'t\x20float\x20Go'+'ldenAngle\x20'+'=\x202.4;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta\x20=\x20float'+'(sampleInd'+'ex)\x20*\x20Gold'+'enAngle\x20+\x20'+'phi;\x0a\x0a\x20\x20\x20\x20'+'float\x20sine'+'\x20=\x20sin(the'+'ta);\x0a\x20\x20\x20\x20f'+'loat\x20cosin'+'e\x20=\x20cos(th'+'eta);\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(r\x20*\x20cosi'+'ne,\x20r\x20*\x20si'+'ne);\x0a}\x0a\x0ave'+'c3\x20vogelSp'+'here(int\x20s'+'ampleIndex'+',\x20float\x20co'+'unt,\x20float'+'\x20phi,\x20floa'+'t\x20r)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20GoldenA'+'ngle\x20=\x202.4'+';\x0a\x20\x20\x20\x20floa'+'t\x20theta\x20=\x20'+'float(samp'+'leIndex)\x20*'+'\x20GoldenAng'+'le\x20+\x20phi;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20weight\x20=\x20'+'float(samp'+'leIndex)\x20/'+'\x20count;\x0a\x20\x20'+'\x20\x20return\x20v'+'ec3(cos(th'+'eta)\x20*\x20r,\x20'+'weight,\x20si'+'n(theta)\x20*'+'\x20r);\x0a}\x0a\x0afl'+'oat\x20noise('+'vec2\x20scree'+'nPos)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PHI\x20=\x20'+('1.61803398'+'8749894848'+'20459;\x20\x20//'+'\x20\x20=\x20Golde'+'n\x20Ratio\x20\x20\x20'+'\x0a\x20\x20\x20\x20retur'+'n\x20fract(si'+'n(dot(scre'+'enPos\x20*\x20PH'+'I,\x20screenP'+'os))\x20*\x20scr'+'eenPos.x);'+'\x0a}\x0a\x0afloat\x20'+'viewSpaceD'+'epth(float'+'\x20depth,\x20ma'+'t4\x20invProj'+'ection)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'z\x20=\x20depth\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20vec'+'4\x20clipSpac'+'e\x20=\x20vec4(0'+'.0,\x200.0,\x20z'+',\x201.0);\x0a\x20\x20'+'\x20\x20vec4\x20vie'+'wSpace\x20=\x20i'+'nvProjecti'+'on\x20*\x20clipS'+'pace;\x0a\x20\x20\x20\x20'+'return\x20vie'+'wSpace.z;\x0a'+'}\x0a\x0afloat\x20P'+'CSSBlocker'+'Distance(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20sampleCoo'+'rds[PCSS_S'+'AMPLE_COUN'+'T],\x20vec2\x20s'+'hadowCoord'+'s,\x20vec2\x20se'+'archSize,\x20'+'float\x20z,\x20v'+'ec4\x20camera'+'Params)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20blockers\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20float\x20ave'+'rageBlocke'+'r\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20offset\x20='+'\x20sampleCoo'+'rds[i]\x20*\x20s'+'earchSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20sample'+'UV\x20=\x20shado'+'wCoords\x20+\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20blocker'+'\x20=\x20texture'+'2DLod(shad'+'owMap,\x20sam'+'pleUV,\x200.0'+').r;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20i'+'sBlocking\x20'+'=\x20step(blo'+'cker,\x20z);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20bl'+'ockers\x20+=\x20'+'isBlocking'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'averageBlo'+'cker\x20+=\x20bl'+'ocker\x20*\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20if\x20(block'+'ers\x20>\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20aver'+'ageBlocker'+'\x20/\x20blocker'+'s;\x0a\x20\x20\x20\x20ret'+'urn\x20-1.0;\x0a'+'}\x0a\x0afloat\x20P'+'CSS(TEXTUR')+('E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoords,\x20'+'vec4\x20camer'+'aParams,\x20v'+'ec2\x20shadow'+'SearchArea'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'linearizeD'+'epthWithPa'+'rams(shado'+'wCoords.z,'+'\x20cameraPar'+'ams);\x0a\x0a\x20\x20\x20'+'\x20vec2\x20samp'+'lePoints[P'+'CSS_SAMPLE'+'_COUNT];\x0a\x20'+'\x20\x20\x20const\x20f'+'loat\x20PI\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20float\x20n'+'oise\x20=\x20noi'+'se(\x20gl_Fra'+'gCoord.xy\x20'+')\x20*\x202.0\x20*\x20'+'PI;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x200;\x20i\x20<\x20PC'+'SS_SAMPLE_'+'COUNT;\x20i++'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pc'+'ssPresampl'+'e\x20=\x20pcssDi'+'skSamples['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20samplePo'+'ints[i]\x20=\x20'+'vogelDisk('+'i,\x20float(P'+'CSS_SAMPLE'+'_COUNT),\x20n'+'oise,\x20pcss'+'Presample)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20a'+'verageBloc'+'ker\x20=\x20PCSS'+'BlockerDis'+'tance(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20samplePoi'+'nts,\x20shado'+'wCoords.xy'+',\x20shadowSe'+'archArea,\x20'+'receiverDe'+'pth,\x20camer'+'aParams);\x0a'+'\x20\x20\x20\x20if\x20(av'+'erageBlock'+'er\x20==\x20-1.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x201'+'.0;\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depthDiff'+'erence\x20=\x20('+'receiverDe'+'pth\x20-\x20aver'+'ageBlocker'+')\x20/\x203.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20filterRa'+'dius\x20=\x20dep'+'thDifferen'+'ce\x20*\x20shado'+'wSearchAre'+'a;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20for\x20(int\x20'+'i\x20=\x200;\x20i\x20<'+'\x20PCSS_SAMP'+'LE_COUNT;\x20'+'i\x20++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20sampleU'+'V\x20=\x20sample'+'Points[i]\x20'+'*\x20filterRa')+('dius;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleUV\x20=\x20s'+'hadowCoord'+'s.xy\x20+\x20sam'+'pleUV;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20textur'+'e2DLod(sha'+'dowMap,\x20sa'+'mpleUV,\x200.'+'0).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20shadow\x20/\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT);\x0a\x20\x20\x20\x20'+'}\x20\x0a}\x0a\x0a#ifn'+'def\x20WEBGPU'+'\x0a\x0afloat\x20PC'+'SSCubeBloc'+'kerDistanc'+'e(samplerC'+'ube\x20shadow'+'Map,\x20vec3\x20'+'lightDirNo'+'rm,\x20vec3\x20s'+'amplePoint'+'s[PCSS_SAM'+'PLE_COUNT]'+',\x20float\x20z,'+'\x20float\x20sha'+'dowSearchA'+'rea)\x20{\x0a\x20\x20\x20'+'\x20float\x20blo'+'ckers\x20=\x200.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20average'+'Blocker\x20=\x20'+'0.0;\x0a\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20P'+'CSS_SAMPLE'+'_COUNT;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sa'+'mpleDir\x20=\x20'+'lightDirNo'+'rm\x20+\x20sampl'+'ePoints[i]'+'\x20*\x20shadowS'+'earchArea;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'ampleDir\x20='+'\x20normalize'+'(sampleDir'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'ocker\x20=\x20te'+'xtureCubeL'+'od(shadowM'+'ap,\x20sample'+'Dir,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20isB'+'locking\x20=\x20'+'step(block'+'er,\x20z);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20bloc'+'kers\x20+=\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20av'+'erageBlock'+'er\x20+=\x20bloc'+'ker\x20*\x20isBl'+'ocking;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'f\x20(blocker'+'s\x20>\x200.0)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20averag'+'eBlocker\x20/'+'\x20blockers;'+'\x0a\x20\x20\x20\x20retur'+'n\x20-1.0;\x0a}\x0a'+'\x0afloat\x20PCS'+'SCube(samp'+'lerCube\x20sh'+'adowMap,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20shadowC'+'oords,\x20vec')+('4\x20cameraPa'+'rams,\x20floa'+'t\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20samplePoi'+'nts[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x20\x20\x20\x20fl'+'oat\x20noise\x20'+'=\x20noise(\x20g'+'l_FragCoor'+'d.xy\x20)\x20*\x202'+'.0\x20*\x20PI;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20r\x20=\x20pcs'+'sSphereSam'+'ples[i];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sam'+'plePoints['+'i]\x20=\x20vogel'+'Sphere(i,\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT),\x20nois'+'e,\x20r);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'orm\x20=\x20norm'+'alize(ligh'+'tDir);\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20averageB'+'locker\x20=\x20P'+'CSSCubeBlo'+'ckerDistan'+'ce(shadowM'+'ap,\x20lightD'+'irNorm,\x20sa'+'mplePoints'+',\x20receiver'+'Depth,\x20sha'+'dowSearchA'+'rea);\x0a\x20\x20\x20\x20'+'if\x20(averag'+'eBlocker\x20='+'=\x20-1.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20fi'+'lterRadius'+'\x20=\x20((recei'+'verDepth\x20-'+'\x20averageBl'+'ocker)\x20/\x20a'+'verageBloc'+'ker)\x20*\x20sha'+'dowSearchA'+'rea;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20for\x20(int'+'\x20i\x20=\x200;\x20i\x20'+'<\x20PCSS_SAM'+'PLE_COUNT;'+'\x20i++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20offset\x20'+'=\x20samplePo'+'ints[i]\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sampleDir'+'\x20=\x20lightDi'+'rNorm\x20+\x20of'+'fset;\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleDir\x20=\x20'+'normalize('+'sampleDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depth\x20=\x20t'+'extureCube'+'Lod(shadow'+'Map,\x20sampl'+'eDir,\x200.0)'+'.r;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'ow\x20+=\x20step'+'(receiverD'+'epth,\x20dept'+'h);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20s'+'hadow\x20/\x20fl'+'oat(PCSS_S'+'AMPLE_COUN'+'T);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0afloat\x20g'+'etShadowOm'+'niPCSS(sam'+'plerCube\x20s'+'hadowMap,\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'4\x20cameraPa'+'rams,\x20vec2'+'\x20shadowSea'+'rchArea,\x20v'+'ec3\x20lightD'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SCube(shad'+'owMap,\x20sha'+'dowParams,'+'\x20shadowCoo'+'rd,\x20camera'+'Params,\x20sh'+'adowSearch'+'Area.x,\x20li'+'ghtDir);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'float\x20getS'+'hadowSpotP'+'CSS(TEXTUR'+'E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c4\x20cameraP'+'arams,\x20vec'+'2\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20return\x20PC'+'SS(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20cameraPar'+'ams,\x20shado'+'wSearchAre'+'a);\x0a}\x0a\x0a'),S2='\x0a\x0ahighp\x20fl'+'oat\x20fractS'+'inRand(con'+'st\x20in\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x20\x20\x20'+'\x20const\x20hig'+'hp\x20float\x20a'+'\x20=\x2012.9898'+',\x20b\x20=\x2078.2'+'33,\x20c\x20=\x2043'+'758.5453;\x0a'+'\x20\x20\x20\x20highp\x20'+'float\x20dt\x20='+'\x20dot(uv.xy'+',\x20vec2(a,\x20'+'b)),\x20sn\x20=\x20'+'mod(dt,\x20PI'+');\x0a\x20\x20\x20\x20ret'+'urn\x20fract('+'sin(sn)\x20*\x20'+'c);\x0a}\x0a\x0a//\x20'+'struct\x20to\x20'+'hold\x20preco'+'mputed\x20con'+'stants\x20and'+'\x20current\x20s'+'tate\x0astruc'+'t\x20VogelDis'+'kData\x20{\x0a\x20\x20'+'\x20\x20float\x20in'+'vNumSample'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20initial'+'Angle;\x0a\x20\x20\x20'+'\x20float\x20cur'+'rentPointI'+'d;\x0a};\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'void\x20prepa'+'reDiskCons'+'tants(out\x20'+'VogelDiskD'+'ata\x20data,\x20'+'int\x20sample'+'Count,\x20flo'+'at\x20randomS'+'eed)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20pi2\x20=\x206'+'.283185307'+'18;\x0a\x20\x20\x20\x20da'+'ta.invNumS'+'amples\x20=\x201'+'.0\x20/\x20float'+'(sampleCou'+'nt);\x0a\x20\x20\x20\x20d'+'ata.initia'+'lAngle\x20=\x20r'+'andomSeed\x20'+'*\x20pi2;\x0a\x20\x20\x20'+'\x20data.curr'+'entPointId'+'\x20=\x200.0;\x0a}\x0a'+'\x0a\x0avec2\x20gen'+'erateDiskS'+'ample(inou'+'t\x20VogelDis'+'kData\x20data'+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'GOLDEN_ANG'+'LE\x20=\x202.399'+'963;\x0a\x20\x20\x20\x20f'+'loat\x20r\x20=\x20s'+'qrt((data.'+'currentPoi'+'ntId\x20+\x200.5'+')\x20*\x20data.i'+'nvNumSampl'+'es);\x0a\x20\x20\x20\x20f'+'loat\x20theta'+'\x20=\x20data.cu'+'rrentPoint'+'Id\x20*\x20GOLDE'+'N_ANGLE\x20+\x20'+'data.initi'+'alAngle;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20o'+'ffset\x20=\x20ve'+('c2(cos(the'+'ta),\x20sin(t'+'heta))\x20*\x20p'+'ow(r,\x201.33'+');\x0a\x0a\x20\x20\x20\x20da'+'ta.current'+'PointId\x20+='+'\x201.0;\x0a\x20\x20\x20\x20'+'return\x20off'+'set;\x0a}\x0a\x0avo'+'id\x20PCSSFin'+'dBlocker(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20out\x20'+'float\x20avgB'+'lockerDept'+'h,\x20out\x20int'+'\x20numBlocke'+'rs,\x0a\x20\x20\x20\x20ve'+'c2\x20shadowC'+'oords,\x20flo'+'at\x20z,\x20int\x20'+'shadowBloc'+'kerSamples'+',\x20float\x20pe'+'numbraSize'+',\x20float\x20in'+'vShadowMap'+'Size,\x20floa'+'t\x20randomSe'+'ed)\x20{\x0a\x0a\x20\x20\x20'+'\x20VogelDisk'+'Data\x20diskD'+'ata;\x0a\x20\x20\x20\x20p'+'repareDisk'+'Constants('+'diskData,\x20'+'shadowBloc'+'kerSamples'+',\x20randomSe'+'ed);\x0a\x0a\x20\x20\x20\x20'+'float\x20sear'+'chWidth\x20=\x20'+'penumbraSi'+'ze\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x20\x20\x20\x20flo'+'at\x20blocker'+'Sum\x20=\x200.0;'+'\x0a\x20\x20\x20\x20numBl'+'ockers\x20=\x200'+';\x0a\x0a\x20\x20\x20\x20for'+'(\x20int\x20i\x20=\x20'+'0;\x20i\x20<\x20sha'+'dowBlocker'+'Samples;\x20+'+'+i\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'diskUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20sampleUV'+'\x20=\x20shadowC'+'oords\x20+\x20di'+'skUV\x20*\x20sea'+'rchWidth;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'MapDepth\x20='+'\x20texture2D'+'Lod(shadow'+'Map,\x20sampl'+'eUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(\x20shad'+'owMapDepth'+'\x20<\x20z\x20)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20blockerSu'+'m\x20+=\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers++;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20av'+'gBlockerDe'+'pth\x20=\x20bloc'+'kerSum\x20/\x20f'+'loat(numBl'+'ockers);\x0a}'+'\x0a\x0afloat\x20PC'+'SSFilter(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20uv,\x20float')+('\x20receiverD'+'epth,\x20int\x20'+'shadowSamp'+'les,\x20float'+'\x20filterRad'+'ius,\x20float'+'\x20randomSee'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'VogelDiskD'+'ata\x20diskDa'+'ta;\x0a\x20\x20\x20\x20pr'+'epareDiskC'+'onstants(d'+'iskData,\x20s'+'hadowSampl'+'es,\x20random'+'Seed);\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20shadowS'+'amples;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20of'+'fsetUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x20text'+'ure2DLod(s'+'hadowMap,\x20'+'uv\x20+\x20offse'+'tUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sum\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20retu'+'rn\x20sum\x20/\x20f'+'loat(shado'+'wSamples);'+'\x0a}\x0a\x0afloat\x20'+'getPenumbr'+'a(float\x20db'+'locker,\x20fl'+'oat\x20drecei'+'ver,\x20float'+'\x20penumbraS'+'ize,\x20float'+'\x20penumbraF'+'alloff)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'dist\x20=\x20dre'+'ceiver\x20-\x20d'+'blocker;\x0a\x20'+'\x20\x20\x20float\x20p'+'enumbra\x20=\x20'+'1.0\x20-\x20pow('+'1.0\x20-\x20dist'+',\x20penumbra'+'Falloff);\x0a'+'\x20\x20\x20\x20return'+'\x20penumbra\x20'+'*\x20penumbra'+'Size;\x0a}\x0a\x0af'+'loat\x20PCSSD'+'irectional'+'(TEXTURE_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oords,\x20vec'+'4\x20cameraPa'+'rams,\x20vec4'+'\x20softShado'+'wParams)\x20{'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20receiver'+'Depth\x20=\x20sh'+'adowCoords'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20random'+'Seed\x20=\x20fra'+'ctSinRand('+'gl_FragCoo'+'rd.xy);\x0a\x20\x20'+'\x20\x20int\x20shad'+'owSamples\x20'+'=\x20int(soft'+'ShadowPara'+'ms.x);\x0a\x20\x20\x20'+'\x20int\x20shado'+'wBlockerSa'+'mples\x20=\x20in'+'t(softShad')+('owParams.y'+');\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'aSize\x20=\x20so'+'ftShadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20float\x20pe'+'numbraFall'+'off\x20=\x20soft'+'ShadowPara'+'ms.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20normal'+'ized\x20inver'+'se\x20shadow\x20'+'map\x20size\x20t'+'o\x20preserve'+'\x20the\x20shado'+'w\x20softness'+'\x20regardles'+'s\x20of\x20the\x20s'+'hadow\x20reso'+'lution\x0a\x20\x20\x20'+'\x20int\x20shado'+'wMapSize\x20='+'\x20textureSi'+'ze(shadowM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20float\x20'+'invShadowM'+'apSize\x20=\x201'+'.0\x20/\x20float'+'(shadowMap'+'Size);\x0a\x20\x20\x20'+'\x20invShadow'+'MapSize\x20*='+'\x20float(sha'+'dowMapSize'+')\x20/\x202048.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'a;\x0a\x0a\x20\x20\x20\x20//'+'\x20contact\x20h'+'ardening\x20p'+'ath\x0a\x20\x20\x20\x20if'+'\x20(shadowBl'+'ockerSampl'+'es\x20>\x200)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20find\x20ave'+'rage\x20block'+'er\x20depth\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20avgBloc'+'kerDepth\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20int\x20nu'+'mBlockers\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20avgBlo'+'ckerDepth,'+'\x20numBlocke'+'rs,\x20shadow'+'Coords.xy,'+'\x20receiverD'+'epth,\x20shad'+'owBlockerS'+'amples,\x20pe'+'numbraSize'+',\x20invShado'+'wMapSize,\x20'+'randomSeed'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20out\x20when\x20'+'no\x20blocker'+'s\x20are\x20pres'+'ent\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(numB'+'lockers\x20<\x20'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x201.0f;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'penumbra\x20s'+'ize\x20is\x20bas'+'ed\x20on\x20the\x20'+'blocker\x20de'+'pth\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20penumbra'+'\x20=\x20getPenu'+'mbra(avgBl'+'ockerDepth'+',\x20shadowCo'+'ords.z,\x20pe'+'numbraSize'+',\x20penumbra')+('Falloff);\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'tant\x20filte'+'r\x20size,\x20no'+'\x20contact\x20h'+'ardening\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pen'+'umbra\x20=\x20pe'+'numbraSize'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20f'+'ilterRadiu'+'s\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoords'+'.xy,\x20recei'+'verDepth,\x20'+'shadowSamp'+'les,\x20filte'+'rRadius,\x20r'+'andomSeed)'+';\x0a}\x0a\x0afloat'+'\x20getShadow'+'PCSS(TEXTU'+'RE_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec4\x20camera'+'Params,\x20ve'+'c4\x20softSha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20return\x20P'+'CSSDirecti'+'onal(TEXTU'+'RE_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20cameraP'+'arams,\x20sof'+'tShadowPar'+'ams);\x0a}\x0a\x0a'),y2='\x0aattribute'+'\x20float\x20ver'+'tex_boneIn'+'dices;\x0a\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20texture_'+'poseMap;\x0a\x0a'+'mat4\x20getBo'+'neMatrix(c'+'onst\x20in\x20fl'+'oat\x20indexF'+'loat)\x20{\x0a\x0a\x20'+'\x20\x20\x20int\x20wid'+'th\x20=\x20textu'+'reSize(tex'+'ture_poseM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20int\x20in'+'dex\x20=\x20int('+'indexFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x20\x20\x20\x20int'+'\x20iy\x20=\x20inde'+'x\x20/\x20width;'+'\x0a\x20\x20\x20\x20int\x20i'+'x\x20=\x20index\x20'+'%\x20width;\x0a\x0a'+'\x20\x20\x20\x20//\x20rea'+'d\x20elements'+'\x20of\x204x3\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20v1\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x200,'+'\x20iy),\x200);\x0a'+'\x20\x20\x20\x20vec4\x20v'+'2\x20=\x20texelF'+'etch(textu'+'re_poseMap'+',\x20ivec2(ix'+'\x20+\x201,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20v'+'ec4\x20v3\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x202,'+'\x20iy),\x200);\x0a'+'\x0a\x20\x20\x20\x20//\x20tr'+'anspose\x20to'+'\x204x4\x20matri'+'x\x0a\x20\x20\x20\x20retu'+'rn\x20mat4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'x,\x20v2.x,\x20v'+'3.x,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.y'+',\x20v2.y,\x20v3'+'.y,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.z,'+'\x20v2.z,\x20v3.'+'z,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.w,\x20'+'v2.w,\x20v3.w'+',\x201\x0a\x20\x20\x20\x20);'+'\x0a}\x0a',v2='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_boneWe'+'ights;\x0aatt'+'ribute\x20vec'+'4\x20vertex_b'+'oneIndices'+';\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20tex'+'ture_poseM'+'ap;\x0a\x0avoid\x20'+'getBoneMat'+'rix(const\x20'+'in\x20int\x20wid'+'th,\x20const\x20'+'in\x20int\x20ind'+'ex,\x20out\x20ve'+'c4\x20v1,\x20out'+'\x20vec4\x20v2,\x20'+'out\x20vec4\x20v'+'3)\x20{\x0a\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20in'+'dex\x20/\x20widt'+'h;\x0a\x20\x20\x20\x20int'+'\x20u\x20=\x20index'+'\x20%\x20width;\x0a'+'\x0a\x20\x20\x20\x20v1\x20=\x20'+'texelFetch'+'(texture_p'+'oseMap,\x20iv'+'ec2(u\x20+\x200,'+'\x20v),\x200);\x0a\x20'+'\x20\x20\x20v2\x20=\x20te'+'xelFetch(t'+'exture_pos'+'eMap,\x20ivec'+'2(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20v3\x20=\x20texe'+'lFetch(tex'+'ture_poseM'+'ap,\x20ivec2('+'u\x20+\x202,\x20v),'+'\x200);\x0a}\x0a\x0ama'+'t4\x20getSkin'+'Matrix(con'+'st\x20in\x20vec4'+'\x20indicesFl'+'oat,\x20const'+'\x20in\x20vec4\x20w'+'eights)\x20{\x0a'+'\x0a\x20\x20\x20\x20int\x20w'+'idth\x20=\x20tex'+'tureSize(t'+'exture_pos'+'eMap,\x200).x'+';\x0a\x20\x20\x20\x20ivec'+'4\x20indices\x20'+'=\x20ivec4(in'+'dicesFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20get\x204\x20bon'+'e\x20matrices'+'\x0a\x20\x20\x20\x20vec4\x20'+'a1,\x20a2,\x20a3'+';\x0a\x20\x20\x20\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.x,\x20a1'+',\x20a2,\x20a3);'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20b1,\x20b2,\x20b'+'3;\x0a\x20\x20\x20\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y,\x20b'+'1,\x20b2,\x20b3)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20c1,\x20c2,\x20'+'c3;\x0a\x20\x20\x20\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.z,\x20'+'c1,\x20c2,\x20c3'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20d1,\x20d2,'+'\x20d3;\x0a\x20\x20\x20\x20g'+'etBoneMatr'+'ix(width,\x20'+'indices.w,'+'\x20d1,\x20d2,\x20d'+'3);\x0a\x0a\x20\x20\x20\x20/'+'/\x20multiply'+'\x20them\x20by\x20w'+'eights\x20and'+'\x20add\x20up\x20to'+'\x20get\x20final'+'\x204x3\x20matri'+('x\x0a\x20\x20\x20\x20vec4'+'\x20v1\x20=\x20a1\x20*'+'\x20weights.x'+'\x20+\x20b1\x20*\x20we'+'ights.y\x20+\x20'+'c1\x20*\x20weigh'+'ts.z\x20+\x20d1\x20'+'*\x20weights.'+'w;\x0a\x20\x20\x20\x20vec'+'4\x20v2\x20=\x20a2\x20'+'*\x20weights.'+'x\x20+\x20b2\x20*\x20w'+'eights.y\x20+'+'\x20c2\x20*\x20weig'+'hts.z\x20+\x20d2'+'\x20*\x20weights'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20v3\x20=\x20a3'+'\x20*\x20weights'+'.x\x20+\x20b3\x20*\x20'+'weights.y\x20'+'+\x20c3\x20*\x20wei'+'ghts.z\x20+\x20d'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'//\x20add\x20up\x20'+'weights\x0a\x20\x20'+'\x20\x20float\x20on'+'e\x20=\x20dot(we'+'ights,\x20vec'+'4(1.0));\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.x'+',\x20v2.x,\x20v3'+'.x,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.y,'+'\x20v2.y,\x20v3.'+'y,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.z,\x20'+'v2.z,\x20v3.z'+',\x200,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20v1.w,\x20v'+'2.w,\x20v3.w,'+'\x20one\x0a\x20\x20\x20\x20)'+';\x0a}\x0a'),x2='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20float\x20v'+'LinearDept'+'h;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22floatAsUi'+'ntPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec3\x20vView'+'Dir;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20skyboxH'+'ighlightMu'+'ltiplier;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SKY_CUBE'+'MAP\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20texture'+'_cubeMap;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SKYM'+'ESH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec3\x20v'+'WorldPos;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20project'+'edSkydomeC'+'enter;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#el'+'se\x20//\x20env-'+'atlas\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22spher'+'icalPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22envA'+'tlasPS\x22\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_envAtla'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mipLe'+'vel;\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20linear\x20d'+'epth\x20durin'+'g\x20prepass\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20flo'+'at2vec4(vL'+'inearDepth'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20SK'+'Y_CUBEMAP\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SKYMES'+'H\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+('\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envDir\x20=\x20n'+'ormalize(v'+'WorldPos\x20-'+'\x20projected'+'SkydomeCen'+'ter);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20env'+'Dir\x20*\x20cube'+'MapRotatio'+'nMatrix;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20di'+'r\x20=\x20vViewD'+'ir;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir.x'+'\x20*=\x20-1.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20linear\x20=\x20'+'{SKYBOX_DE'+'CODE_FNC}('+'textureCub'+'e(texture_'+'cubeMap,\x20d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x20//\x20en'+'v-atlas\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20vVie'+'wDir\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20toSph'+'ericalUv(n'+'ormalize(d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20mipLev'+'el)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20our\x20HDR'+'\x20encodes\x20v'+'alues\x20up\x20t'+'o\x2064,\x20so\x20a'+'llow\x20extra'+'\x20brightnes'+'s\x20for\x20the\x20'+'clipped\x20va'+'lues\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(any(great'+'erThanEqua'+'l(linear,\x20'+'vec3(64.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20skyboxHi'+'ghlightMul'+'tiplier;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(toneM'+'ap(process'+'Environmen'+'t(linear))'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20}'+'\x0a'),T2='\x0aattribute'+'\x20vec4\x20aPos'+'ition;\x0a\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tionSkybox'+';\x0auniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x0av'+'arying\x20vec'+'3\x20vViewDir'+';\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20//\x20'+'when\x20skydo'+'me\x20renders'+'\x20depth\x20dur'+'ing\x20prepas'+'s,\x20generat'+'e\x20linear\x20d'+'epth\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20vLinear'+'Depth;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20SKYMESH\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec3\x20vW'+'orldPos;\x0a#'+'endif\x0a\x0avoi'+'d\x20main(voi'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'mat4\x20view\x20'+'=\x20matrix_v'+'iew;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20SKY'+'MESH\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec4\x20w'+'orldPos\x20=\x20'+'matrix_mod'+'el\x20*\x20aPosi'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vWorld'+'Pos\x20=\x20worl'+'dPos.xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20'+'=\x20matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20PREPASS'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20linear\x20de'+'pth\x20from\x20t'+'he\x20worldPo'+'sition,\x20se'+'e\x20getLinea'+'rDepth\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vWorl'+'dPos,\x201.0)'+').z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'view[3][0]'+'\x20=\x20view[3]'+'[1]\x20=\x20view'+'[3][2]\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20matr'+'ix_project'+'ionSkybox\x20'+'*\x20(view\x20*\x20'+'aPosition)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vViewDir\x20='+'\x20aPosition'+'.xyz\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20//\x20for\x20in'+'finite\x20sky'+'box,\x20use\x20n'+'egative\x20gl'+'_Position.'+'w\x20to\x20get\x20p'+'ositive\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vLinear'+'Depth\x20=\x20-g'+'l_Position'+'.w;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20Fo'+'rce\x20skybox'+'\x20to\x20far\x20Z,'+'\x20regardles'+'s\x20of\x20the\x20c'+'lip\x20planes'+'\x20on\x20the\x20ca'+'mera\x0a\x20\x20\x20\x20/'+'/\x20Subtract'+'\x20a\x20tiny\x20fu'+'dge\x20factor'+'\x20to\x20ensure'+'\x20floating\x20'+'point\x20erro'+'rs\x20don\x27t\x0a\x20'+'\x20\x20\x20//\x20stil'+'l\x20push\x20pix'+'els\x20beyond'+'\x20far\x20Z.\x20Se'+'e:\x0a\x20\x20\x20\x20//\x20'+'https://co'+'mmunity.kh'+'ronos.org/'+'t/skybox-p'+'roblem/618'+'57\x0a\x0a\x20\x20\x20\x20gl'+'_Position.'+'z\x20=\x20gl_Pos'+'ition.w\x20-\x20'+'1.0e-7;\x0a}\x0a'),w2='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0auniform\x20v'+'ec3\x20materi'+'al_specula'+'r;\x0a#endif\x0a'+'\x0avoid\x20getS'+'pecularity'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20specul'+'arColor\x20=\x20'+'vec3(1,1,1'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20specularC'+'olor\x20*=\x20ma'+'terial_spe'+'cular;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'AR_TEXTURE'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_SPECULAR_'+'TEXTURE_NA'+'ME},\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20textureB'+'ias)).{STD'+'_SPECULAR_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SPECU'+'LAR_VERTEX'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_S'+'PECULAR_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20spe'+'cularColor'+';\x0a}\x0a',E2='\x0a//\x20equire'+'ctangular\x20'+'helper\x20fun'+'ctions\x0avec'+'2\x20toSpheri'+'cal(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(dir.xz\x20='+'=\x20vec2(0.0'+')\x20?\x200.0\x20:\x20'+'atan(dir.x'+',\x20dir.z),\x20'+'asin(dir.y'+'));\x0a}\x0a\x0avec'+'2\x20toSpheri'+'calUv(vec3'+'\x20dir)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PI\x20=\x203'+'.141592653'+'589793;\x0a\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20toSpheri'+'cal(dir)\x20/'+'\x20vec2(PI\x20*'+'\x202.0,\x20PI)\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+';\x0a}\x0a',b2='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_specula'+'rityFactor'+';\x0a#endif\x0a\x0a'+'void\x20getSp'+'ecularityF'+'actor()\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'specularit'+'yFactor\x20=\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULARI'+'TYFACTOR_C'+'ONSTANT\x0a\x20\x20'+'\x20\x20specular'+'ityFactor\x20'+'*=\x20materia'+'l_specular'+'ityFactor;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE\x0a\x20\x20\x20\x20sp'+'ecularityF'+'actor\x20*=\x20t'+'exture2DBi'+'as({STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE_NAME},'+'\x20{STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_VERT'+'EX\x0a\x20\x20\x20\x20spe'+'cularityFa'+'ctor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SPECU'+'LARITYFACT'+'OR_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dSp'+'ecularityF'+'actor\x20=\x20sp'+'ecularityF'+'actor;\x0a}\x0a',A2='\x0afloat\x20get'+'SpotEffect'+'(vec3\x20ligh'+'tSpotDir,\x20'+'float\x20ligh'+'tInnerCone'+'Angle,\x20flo'+'at\x20lightOu'+'terConeAng'+'le,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20cosAn'+'gle\x20=\x20dot('+'lightDirNo'+'rm,\x20lightS'+'potDir);\x0a\x20'+'\x20\x20\x20return\x20'+'smoothstep'+'(lightOute'+'rConeAngle'+',\x20lightInn'+'erConeAngl'+'e,\x20cosAngl'+'e);\x0a}\x0a',C2='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2(vUv0.'+'x,\x201.0\x20-\x20v'+'Uv0.y);\x0a',P2='\x0a\x20\x20\x20\x20vec2\x20'+'tileMask\x20='+'\x20step(vMas'+'k,\x20vec2(0.'+'99999));\x0a\x20'+'\x20\x20\x20vec2\x20ti'+'leSize\x20=\x200'+'.5\x20*\x20(inne'+'rOffset.xy'+'\x20+\x20innerOf'+'fset.zw);\x0a'+'\x20\x20\x20\x20vec2\x20t'+'ileScale\x20='+'\x20vec2(1.0)'+'\x20/\x20(vec2(1'+'.0)\x20-\x20tile'+'Size);\x0a\x20\x20\x20'+'\x20vec2\x20clam'+'pedUv\x20=\x20mi'+'x(innerOff'+'set.xy\x20*\x200'+'.5,\x20vec2(1'+'.0)\x20-\x20inne'+'rOffset.zw'+'\x20*\x200.5,\x20fr'+'act((vTile'+'dUv\x20-\x20tile'+'Size)\x20*\x20ti'+'leScale));'+'\x0a\x20\x20\x20\x20clamp'+'edUv\x20=\x20cla'+'mpedUv\x20*\x20a'+'tlasRect.z'+'w\x20+\x20atlasR'+'ect.xy;\x0a\x20\x20'+'\x20\x20nineSlic'+'edUv\x20=\x20vUv'+'0\x20*\x20tileMa'+'sk\x20+\x20clamp'+'edUv\x20*\x20(ve'+'c2(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x20\x20\x20\x20\x0a',M2='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20float\x20dAl'+'pha\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_o'+'pacityMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20global'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dAlbe'+'do;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20dNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dSpeculari'+'ty\x20=\x20vec3('+'0.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dGlossines'+'s\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20dT'+'ransmissio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dThicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SC'+'ENE_COLOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'uSceneColo'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SCREEN_SI'+'ZE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20uS'+'creenSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_TRAN'+'SFORMS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20matrix_v'+'iewProject'+'ion;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_mod'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20parallax\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20dUv'+'Offset;\x0a\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_he'+'ightMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20diffu'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20tex'+'ture_diffu'+'seMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_diffuseDe'+'tailMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_normal'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'NORMALDETA'+'IL_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_no'+'rmalDetail'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20refracti'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_THICKNES'+'S_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_thi'+'cknessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_REFRA'+'CTION_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_refractio'+'nMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20iridesc'+'ence\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_IRIDES'+'CENCE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20dIride'+'scence;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dIri'+'descenceTh')+('ickness;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_irides'+'cenceThick'+'nessMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_iridesce'+'nceMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20ccNorm'+'alW;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dAnisotro'+'py;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20&\x20glossin'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_OR_REFLE'+'CTION\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20sheen\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20sGloss'+'iness;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SHEEN'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_sheenM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_sh'+'eenGlossMa')+('p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20metalness'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dMet'+'alness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dIor;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_met'+'alnessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20dSpecula'+'rityFactor'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_speculari'+'tyFactorMa'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20specular\x20'+'color\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_specula'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20gloss\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_gl'+'ossMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dAo'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_aoM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_aoDeta'+'ilMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dEmis'+'sion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_EMISS'+'IVE_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_e'+'missiveMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'learcoat\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'EARCOAT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatG'+'lossMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'NORMAL_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_clea'+'rCoatNorma'+'lMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'anisotropy'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde')+('f\x20STD_ANIS'+'OTROPY_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_anis'+'otropyMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dLightma'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_LIGH'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_lightMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20front\x20'+'end\x20output'+'s\x20to\x20lit\x20s'+'hader\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'litShaderC'+'orePS\x22\x0a'),D2='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20voi'+'d\x20getSpecu'+'larity()\x20{'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20vec'+'3(1);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20g'+'loss\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22glo'+'ssPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20ao\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'aoPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'emissivePS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO')+('AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22clear'+'CoatPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatG'+'lossPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatN'+'ormalPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20anis'+'otropy\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ani'+'sotropyPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(STD'+'_LIGHTMAP)'+'\x20||\x20define'+'d(STD_LIGH'+'T_VERTEX_C'+'OLOR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20void\x20eval'+'uateFronte'+'nd()\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIT'+'_BLEND_TYP'+'E\x20!=\x20NONE\x20'+'||\x20defined'+'(LIT_ALPHA'+'_TEST)\x20||\x20'+'defined(LI'+'T_ALPHA_TO'+'_COVERAGE)'+'\x20||\x20STD_OP'+'ACITY_DITH'+'ER\x20!=\x20NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getOpac'+'ity();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_ALPH'+'A_TEST)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alphaT'+'est(dAlpha'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(dAlp'+'ha,\x200.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'opacity\x20=\x20'+'dAlpha;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20pa'+'rallax\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'HEIGHT_MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Parallax()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Albedo();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20d'+'Albedo;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20normal'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getNorm'+'al();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'worldNorma'+'l\x20=\x20dNorma'+'lW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_REFRACT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getRefract'+'ion();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_transmiss'+'ion\x20=\x20dTra'+'nsmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tThickness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_th'+'ickness\x20=\x20'+'dThickness'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_d'+'ispersion\x20'+'=\x20material'+'_dispersio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20iridescen'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_IRID'+'ESCENCE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getIri'+'descence()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tIridescen'+'ceThicknes'+'s();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_i'+'ridescence'+'_intensity'+'\x20=\x20dIrides'+'cence;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_iridescen'+'ce_thickne'+'ss\x20=\x20dIrid'+'escenceThi'+'ckness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('//\x20specula'+'rity\x20&\x20glo'+'ssiness\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR_'+'OR_REFLECT'+'ION\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getShee'+'n();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_sheen_s'+'pecularity'+'\x20=\x20sSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'SheenGloss'+'iness();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_she'+'en_gloss\x20='+'\x20sGlossine'+'ss;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20met'+'alness\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getMet'+'alness();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_me'+'talness\x20=\x20'+'dMetalness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getIor()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'ior\x20=\x20dIor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20specu'+'larity\x20fac'+'tor\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rityFactor'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ityFactor\x20'+'=\x20dSpecula'+'rityFactor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20gloss'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rity();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ity\x20=\x20dSpe'+'cularity;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss\x20'+'=\x20dGlossin')+('ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getAO'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ao'+'\x20=\x20dAo;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getEmi'+'ssion();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_e'+'mission\x20=\x20'+'dEmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cle'+'arcoat\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getC'+'learCoat()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tClearCoat'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getClearCo'+'atNormal()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20=\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_g'+'loss\x20=\x20ccG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_clear'+'coat_world'+'Normal\x20=\x20c'+'cNormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20aniso'+'tropy\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x20&&\x20def'+'ined(LIT_L'+'IGHTING)\x20&'+'&\x20defined('+'LIT_GGX_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getAni'+'sotropy();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20ligh'+'tmap\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(S'+'TD_LIGHTMA'+'P)\x20||\x20defi'+'ned(STD_LI'+'GHT_VERTEX'+'_COLOR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htMap();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_lightma'+'p\x20=\x20dLight'+'map;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_lightm'+'apDir\x20=\x20dL'+'ightmapDir'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20}\x0a'),I2='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20tbnBasis'+';\x0a#endif\x0a\x0a'+'void\x20getTB'+'N(vec3\x20tan'+'gent,\x20vec3'+'\x20binormal,'+'\x20vec3\x20norm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TB'+'N_TANGENTS'+'\x20//\x20tangen'+'ts\x20/\x20binor'+'mals\x20based'+'\x20TBN\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(tang'+'ent),\x20norm'+'alize(bino'+'rmal),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(TBN_'+'DERIVATIVE'+'S)\x20//\x20deri'+'vatives\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20{li'+'ghtingUv};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20get\x20edg'+'e\x20vectors\x20'+'of\x20the\x20pix'+'el\x20triangl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dp1\x20='+'\x20dFdx(\x20vPo'+'sitionW\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dp2\x20=\x20'+'dFdy(\x20vPos'+'itionW\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20duv1\x20=\x20'+'dFdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20duv2\x20'+'=\x20dFdy(\x20uv'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20solv'+'e\x20the\x20line'+'ar\x20system\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20dp2perp'+'\x20=\x20cross(\x20'+'dp2,\x20norma'+'l\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dp'+'1perp\x20=\x20cr'+'oss(\x20norma'+'l,\x20dp1\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20T\x20=\x20dp2'+'perp\x20*\x20duv'+'1.x\x20+\x20dp1p'+'erp\x20*\x20duv2'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20B\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+'dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+('ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'nom\x20=\x20max('+'\x20dot(T,T),'+'\x20dot(B,B)\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20inv'+'max\x20=\x20(den'+'om\x20==\x200.0)'+'\x20?\x200.0\x20:\x20t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3(T\x20*\x20i'+'nvmax,\x20-B\x20'+'*\x20invmax,\x20'+'normal\x20);\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20object'+'\x20space\x20TBN'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20B\x20=\x20c'+'ross(norma'+'l,\x20vObject'+'SpaceUpW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20T\x20=\x20cr'+'oss(normal'+',\x20B);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(d'+'ot(B,B)==0'+'.0)\x20//\x20dea'+'l\x20with\x20cas'+'e\x20when\x20vOb'+'jectSpaceU'+'pW\x20normal\x20'+'are\x20parall'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20major=max'+'(max(norma'+'l.x,\x20norma'+'l.y),\x20norm'+'al.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(normal'+'.x\x20==\x20majo'+'r)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20B\x20=\x20cro'+'ss(normal,'+'\x20vec3(0,1,'+'0));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20T\x20=\x20cross'+'(normal,\x20B'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20e'+'lse\x20if\x20(no'+'rmal.y\x20==\x20'+'major)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20B\x20='+'\x20cross(nor'+'mal,\x20vec3('+'0,0,1));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20if'+'\x20(normal.z'+'\x20==\x20major)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20B\x20=\x20cross'+'(normal,\x20v'+'ec3(1,0,0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(T),\x20'+'normalize('+'B),\x20normal'+'ize(normal'+'));\x0a\x0a\x20\x20\x20\x20#')+'endif\x0a}\x0a',L2='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_thickn'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tThickness'+'()\x20{\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_THICKNE'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dThi'+'ckness\x20*=\x20'+'material_t'+'hickness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_THI'+'CKNESS_TEX'+'TURE\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20texture'+'2DBias({ST'+'D_THICKNES'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_THICKNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_TH'+'ICKNESS_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',R2='\x0a\x0a#if\x20(TON'+'EMAP\x20==\x20NO'+'NE)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22to'+'nemappingN'+'onePS\x22\x0a#el'+'if\x20TONEMAP'+'\x20==\x20FILMIC'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingFilm'+'icPS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20LINEAR\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingLinea'+'rPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20HEJL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngHejlPS\x22\x0a'+'#elif\x20TONE'+'MAP\x20==\x20ACE'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22tone'+'mappingAce'+'sPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20ACES2\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingAces2PS'+'\x22\x0a#elif\x20TO'+'NEMAP\x20==\x20N'+'EUTRAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngNeutralP'+'S\x22\x0a#endif\x0a'+'\x0a',O2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20tA\x20=\x202.'+'51;\x0a\x20\x20\x20\x20fl'+'oat\x20tB\x20=\x200'+'.03;\x0a\x20\x20\x20\x20f'+'loat\x20tC\x20=\x20'+'2.43;\x0a\x20\x20\x20\x20'+'float\x20tD\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20float\x20tE\x20'+'=\x200.14;\x0a\x20\x20'+'\x20\x20vec3\x20x\x20='+'\x20color\x20*\x20e'+'xposure;\x0a\x20'+'\x20\x20\x20return\x20'+'(x*(tA*x+t'+'B))/(x*(tC'+'*x+tD)+tE)'+';\x0a}\x0a',F2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0a//\x20A'+'CES\x20approx'+'imation\x20by'+'\x20Stephen\x20H'+'ill\x0a\x0a//\x20sR'+'GB\x20=>\x20XYZ\x20'+'=>\x20D65_2_D'+'60\x20=>\x20AP1\x20'+'=>\x20RRT_SAT'+'\x0aconst\x20mat'+'3\x20ACESInpu'+'tMat\x20=\x20mat'+'3(\x0a\x20\x20\x20\x200.5'+'9719,\x200.35'+'458,\x200.048'+'23,\x0a\x20\x20\x20\x200.'+'07600,\x200.9'+'0834,\x200.01'+'566,\x0a\x20\x20\x20\x200'+'.02840,\x200.'+'13383,\x200.8'+'3777\x0a);\x0a\x0a/'+'/\x20ODT_SAT\x20'+'=>\x20XYZ\x20=>\x20'+'D60_2_D65\x20'+'=>\x20sRGB\x0aco'+'nst\x20mat3\x20A'+'CESOutputM'+'at\x20=\x20mat3('+'\x0a\x20\x20\x20\x20\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367,\x0a\x20\x20\x20\x20-'+'0.10208,\x20\x20'+'1.10813,\x20-'+'0.00605,\x0a\x20'+'\x20\x20\x20-0.0032'+'7,\x20-0.0727'+'6,\x20\x201.0760'+'2\x0a);\x0a\x0avec3'+'\x20RRTAndODT'+'Fit(vec3\x20v'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20a\x20=\x20v\x20*'+'\x20(v\x20+\x200.02'+'45786)\x20-\x200'+'.000090537'+';\x0a\x20\x20\x20\x20vec3'+'\x20b\x20=\x20v\x20*\x20('+'0.983729\x20*'+'\x20v\x20+\x200.432'+'9510)\x20+\x200.'+'238081;\x0a\x20\x20'+'\x20\x20return\x20a'+'\x20/\x20b;\x0a}\x0a\x0av'+'ec3\x20toneMa'+'p(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'color\x20*=\x20e'+'xposure\x20/\x20'+'0.6;\x0a\x20\x20\x20\x20c'+'olor\x20=\x20col'+'or\x20*\x20ACESI'+'nputMat;\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20RRT\x20and'+'\x20ODT\x0a\x20\x20\x20\x20c'+'olor\x20=\x20RRT'+'AndODTFit('+'color);\x0a\x20\x20'+'\x20\x20color\x20=\x20'+'color\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20color\x20=\x20c'+'lamp(color'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',N2='\x0aconst\x20flo'+'at\x20A\x20=\x20\x200.'+'15;\x0aconst\x20'+'float\x20B\x20=\x20'+'\x200.50;\x0acon'+'st\x20float\x20C'+'\x20=\x20\x200.10;\x0a'+'const\x20floa'+'t\x20D\x20=\x20\x200.2'+'0;\x0aconst\x20f'+'loat\x20E\x20=\x20\x20'+'0.02;\x0acons'+'t\x20float\x20F\x20'+'=\x20\x200.30;\x0ac'+'onst\x20float'+'\x20W\x20=\x20\x2011.2'+';\x0a\x0auniform'+'\x20float\x20exp'+'osure;\x0a\x0ave'+'c3\x20unchart'+'ed2Tonemap'+'(vec3\x20x)\x20{'+'\x0a\x20\x20\x20return'+'\x20((x*(A*x+'+'C*B)+D*E)/'+'(x*(A*x+B)'+'+D*F))-E/F'+';\x0a}\x0a\x0avec3\x20'+'toneMap(ve'+'c3\x20color)\x20'+'{\x0a\x20\x20\x20\x20colo'+'r\x20=\x20unchar'+'ted2Tonema'+'p(color\x20*\x20'+'exposure);'+'\x0a\x20\x20\x20\x20vec3\x20'+'whiteScale'+'\x20=\x201.0\x20/\x20u'+'ncharted2T'+'onemap(vec'+'3(W,W,W));'+'\x0a\x20\x20\x20\x20color'+'\x20=\x20color\x20*'+'\x20whiteScal'+'e;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',k2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20col'+'or\x20*=\x20expo'+'sure;\x0a\x20\x20\x20\x20'+'const\x20floa'+'t\x20\x20A\x20=\x200.2'+'2,\x20B\x20=\x200.3'+',\x20C\x20=\x20.1,\x20'+'D\x20=\x200.2,\x20E'+'\x20=\x20.01,\x20F\x20'+'=\x200.3;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20Scl\x20=\x201'+'.25;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20h\x20=\x20m'+'ax(\x20vec3(0'+'.0),\x20color'+'\x20-\x20vec3(0.'+'004)\x20);\x0a\x20\x20'+'\x20\x20return\x20('+'h*((Scl*A)'+'*h+Scl*vec'+'3(C*B,C*B,'+'C*B))+Scl*'+'vec3(D*E,D'+'*E,D*E))\x20/'+'\x20(h*(A*h+v'+'ec3(B,B,B)'+')+vec3(D*F'+',D*F,D*F))'+'\x20-\x20Scl*vec'+'3(E/F,E/F,'+'E/F);\x0a}\x0a',U2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20color\x20'+'*\x20exposure'+';\x0a}\x0a',B2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x0a\x20\x20\x20\x20co'+'lor\x20*=\x20exp'+'osure;\x0a\x0a\x20\x20'+'\x20\x20float\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20float\x20d'+'esaturatio'+'n\x20=\x200.15;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20min(c'+'olor.r,\x20mi'+'n(color.g,'+'\x20color.b))'+';\x0a\x20\x20\x20\x20floa'+'t\x20offset\x20='+'\x20x\x20<\x200.08\x20'+'?\x20x\x20-\x206.25'+'\x20*\x20x\x20*\x20x\x20:'+'\x200.04;\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20float\x20p'+'eak\x20=\x20max('+'color.r,\x20m'+'ax(color.g'+',\x20color.b)'+');\x0a\x20\x20\x20\x20if\x20'+'(peak\x20<\x20st'+'artCompres'+'sion)\x20retu'+'rn\x20color;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20d\x20=\x201.\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20float\x20ne'+'wPeak\x20=\x201.'+'\x20-\x20d\x20*\x20d\x20/'+'\x20(peak\x20+\x20d'+'\x20-\x20startCo'+'mpression)'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x20newPe'+'ak\x20/\x20peak;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20g\x20=\x201.\x20-'+'\x201.\x20/\x20(des'+'aturation\x20'+'*\x20(peak\x20-\x20'+'newPeak)\x20+'+'\x201.);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ne'+'wPeak\x20*\x20ve'+'c3(1,\x201,\x201'+'),\x20g);\x0a}\x0a',z2='\x0avec3\x20tone'+'Map(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'olor;\x0a}\x0a',V2='\x0a#ifdef\x20PI'+'XELSNAP\x0aun'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'CREENSPACE'+'\x0auniform\x20f'+'loat\x20proje'+'ctionFlipY'+';\x0a#endif\x0a\x0a'+'vec4\x20evalW'+'orldPositi'+'on(vec3\x20ve'+'rtexPositi'+'on,\x20mat4\x20m'+'odelMatrix'+')\x20{\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localP'+'os\x20=\x20getLo'+'calPositio'+'n(vertexPo'+'sition);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20NINESLICE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20outer\x20a'+'nd\x20inner\x20v'+'ertices\x20ar'+'e\x20at\x20the\x20s'+'ame\x20positi'+'on,\x20scale\x20'+'both\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s.xz\x20*=\x20ou'+'terScale;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nner\x20verti'+'ces\x20inside'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20(origina'+'l\x20vertices'+'\x20must\x20be\x20i'+'n\x20[-1;1]\x20r'+'ange)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20p'+'ositiveUni'+'tOffset\x20=\x20'+'clamp(vert'+'exPosition'+'.xz,\x20vec2('+'0.0),\x20vec2'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20negativeU'+'nitOffset\x20'+'=\x20clamp(-v'+'ertexPosit'+'ion.xz,\x20ve'+'c2(0.0),\x20v'+'ec2(1.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'ocalPos.xz'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vTiledU'+'v\x20=\x20(local'+'Pos.xz\x20-\x20o'+'uterScale\x20'+'+\x20innerOff'+'set.xy)\x20*\x20'+'-0.5\x20+\x201.0'+';\x20//\x20uv\x20=\x20'+'local\x20pos\x20'+'-\x20inner\x20co'+'rner\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20localP'+'os.xz\x20*=\x20-'+'0.5;\x20//\x20mo'+'ve\x20from\x20-1'+';1\x20to\x20-0.5'+';0.5\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s\x20=\x20localP'+'os.xzy;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20vec4\x20p'+'osW\x20=\x20mode'+'lMatrix\x20*\x20'+'vec4(local'+('Pos,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREENS'+'PACE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20posW.zw'+'\x20=\x20vec2(0.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20posW;\x0a}\x0a'+'\x0avec4\x20getP'+'osition()\x20'+'{\x0a\x0a\x20\x20\x20\x20dMo'+'delMatrix\x20'+'=\x20getModel'+'Matrix();\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'posW\x20=\x20eva'+'lWorldPosi'+'tion(verte'+'x_position'+'.xyz,\x20dMod'+'elMatrix);'+'\x0a\x20\x20\x20\x20dPosi'+'tionW\x20=\x20po'+'sW.xyz;\x0a\x0a\x20'+'\x20\x20\x20vec4\x20sc'+'reenPos;\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV1LAYOUT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sc'+'reenPos\x20=\x20'+'vec4(verte'+'x_texCoord'+'1.xy\x20*\x202.0'+'\x20-\x201.0,\x200.'+'5,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20WEBGPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20SCREENSP'+'ACE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos\x20=\x20po'+'sW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.y\x20*='+'\x20projectio'+'nFlipY;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20screen'+'Pos\x20=\x20matr'+'ix_viewPro'+'jection\x20*\x20'+'posW;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PIX'+'ELSNAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20snap\x20ver'+'tex\x20to\x20a\x20p'+'ixel\x20bound'+'ary\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x200.5'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.xy\x20*=\x20uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'ScreenSize'+'.zw;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x202.'+'0)\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20sc'+'reenPos;\x0a}')+('\x0a\x0avec3\x20get'+'WorldPosit'+'ion()\x20{\x0a\x20\x20'+'\x20\x20return\x20d'+'PositionW;'+'\x0a}\x0a'),G2='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_positi'+'on;\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifdef\x20MORP'+'HING\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20morph_te'+'x_params;\x0a'+'\x20\x20\x20\x20attrib'+'ute\x20uint\x20m'+'orph_verte'+'x_id;\x0a\x0a\x20\x20\x20'+'\x20ivec2\x20get'+'TextureMor'+'phCoords()'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20turn\x20'+'morph_vert'+'ex_id\x20into'+'\x20int\x20grid\x20'+'coordinate'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ivec2\x20text'+'ureSize\x20=\x20'+'ivec2(morp'+'h_tex_para'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20mor'+'phGridV\x20=\x20'+'int(morph_'+'vertex_id)'+'\x20/\x20texture'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20int\x20'+'morphGridU'+'\x20=\x20int(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20flipY\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20morphGrid'+'V\x20=\x20textur'+'eSize.y\x20-\x20'+'morphGridV'+'\x20-\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20ivec'+'2(morphGri'+'dU,\x20morphG'+'ridV);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_POSITI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_INT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec3\x20aabb'+'Size;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20aabbMin;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'usampler2D'+'\x20morphPosi'+'tionTex;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20highp\x20s'+'ampler2D\x20m'+'orphPositi'+'onTex;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a#ifdef\x20de'+'fined(BATC'+'H)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ski'+'nBatchVS\x22\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getBon'+'eMatrix(ve'+'rtex_boneI'+'ndices);\x0a\x20'+'\x20\x20\x20}\x0a\x0a#eli'+'f\x20defined('+'SKIN)\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x0a\x20'+'\x20\x20\x20mat4\x20ge'+'tModelMatr'+'ix()\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20get'+'SkinMatrix'+'(vertex_bo'+'neIndices,'+'\x20vertex_bo'+'neWeights)'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'elif\x20defin'+'ed(INSTANC'+'ING)\x0a\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'transformI'+'nstancingV'+'S\x22\x0a\x0a#else\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20matrix'+'_model;\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a\x0avec3\x20ge'+'tLocalPosi'+'tion(vec3\x20'+'vertexPosi'+'tion)\x20{\x0a\x0a\x20'+'\x20\x20\x20vec3\x20lo'+'calPos\x20=\x20v'+'ertexPosit'+'ion;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'morphUV\x20=\x20'+'getTexture'+'MorphCoord'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20MORPHING_'+'INT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20morphPos\x20'+'=\x20vec3(tex'+'elFetch(mo'+'rphPositio'+'nTex,\x20ivec'+'2(morphUV)'+',\x200).xyz)\x20'+'/\x2065535.0\x20'+'*\x20aabbSize'+'\x20+\x20aabbMin'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphPo'+'s\x20=\x20texelF'+'etch(morph'+'PositionTe'+'x,\x20ivec2(m'+'orphUV),\x200'+').xyz;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20localPos\x20'+'+=\x20morphPo'+'s;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20loc'+'alPos;\x0a}\x0a\x0a'),H2='\x0a\x0aattribut'+'e\x20vec4\x20ins'+'tance_line'+'1;\x0aattribu'+'te\x20vec4\x20in'+'stance_lin'+'e2;\x0aattrib'+'ute\x20vec4\x20i'+'nstance_li'+'ne3;\x0aattri'+'bute\x20vec4\x20'+'instance_l'+'ine4;\x0a\x0amat'+'4\x20getModel'+'Matrix()\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20mat'+'4(instance'+'_line1,\x20in'+'stance_lin'+'e2,\x20instan'+'ce_line3,\x20'+'instance_l'+'ine4);\x0a}\x0a',W2='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_refr'+'action;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getRefrac'+'tion()\x20{\x0a\x20'+'\x20\x20\x20float\x20r'+'efraction\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20ref'+'raction\x20=\x20'+'material_r'+'efraction;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_RE'+'FRACTION_T'+'EXTURE\x0a\x20\x20\x20'+'\x20refractio'+'n\x20*=\x20textu'+'re2DBias({'+'STD_REFRAC'+'TION_TEXTU'+'RE_NAME},\x20'+'{STD_REFRA'+'CTION_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_REF'+'RACTION_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_VERTEX'+'\x0a\x20\x20\x20\x20refra'+'ction\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_REFR'+'ACTION_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dTransmis'+'sion\x20=\x20ref'+'raction;\x0a}'+'\x0a',$2='\x0auniform\x20f'+'loat\x20twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0avoi'+'d\x20handleTw'+'oSidedLigh'+'ting()\x20{\x0a\x20'+'\x20\x20\x20dTBN[2]'+'\x20*=\x20gl_Fro'+'ntFacing\x20?'+'\x20twoSidedL'+'ightingNeg'+'ScaleFacto'+'r\x20:\x20-twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0a}\x0a',X2='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20vec2\x20ge'+'tUv0()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20ver'+'tex_positi'+'on.xz;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20o'+'ffset\x20inne'+'r\x20vertices'+'\x20inside\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20('+'original\x20v'+'ertices\x20mu'+'st\x20be\x20in\x20['+'-1;1]\x20rang'+'e)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2(0.'+'0),\x20vec2(1'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20n'+'egativeUni'+'tOffset\x20=\x20'+'clamp(-ver'+'tex_positi'+'on.xz,\x20vec'+'2(0.0),\x20ve'+'c2(1.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20-0.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20atlasRe'+'ct.zw\x20+\x20at'+'lasRect.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vMask\x20=\x20v'+'ertex_texC'+'oord0.xy;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20uv;\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20vec2'+'\x20getUv0()\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20ver'+'tex_texCoo'+'rd0;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a',q2='\x0avec2\x20getU'+'v1()\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'rtex_texCo'+'ord1;\x0a}\x0a',j2='\x0avUV{TRANS'+'FORM_UV_{i'+'}}_{TRANSF'+'ORM_ID_{i}'+'}\x20=\x20vec2(\x0a'+'\x20\x20\x20\x20dot(ve'+'c3(uv{TRAN'+'SFORM_UV_{'+'i}},\x201),\x20{'+'TRANSFORM_'+'NAME_{i}}0'+'),\x0a\x20\x20\x20\x20dot'+'(vec3(uv{T'+'RANSFORM_U'+'V_{i}},\x201)'+',\x20{TRANSFO'+'RM_NAME_{i'+'}}1)\x0a);\x0a',Y2='\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}0;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}1;'+'\x0a',K2='\x0avoid\x20getV'+'iewDir()\x20{'+'\x0a\x20\x20\x20\x20dView'+'DirW\x20=\x20nor'+'malize(vie'+'w_position'+'\x20-\x20vPositi'+'onW);\x0a}\x0a',Z2={'alphaTestPS':YC,'ambientPS':KC,'anisotropyPS':ZC,'aoPS':QC,'aoDiffuseOccPS':JC,'aoSpecOccPS':e1,'bakeDirLmEndPS':t1,'bakeLmEndPS':s1,'basePS':i1,'baseNineSlicedPS':r1,'baseNineSlicedTiledPS':a1,'bayerPS':n1,'blurVSMPS':o1,'clearCoatPS':l1,'clearCoatGlossPS':c1,'clearCoatNormalPS':h1,'clusteredLightCookiesPS':f1,'clusteredLightShadowsPS':u1,'clusteredLightUtilsPS':d1,'clusteredLightPS':p1,'combinePS':m1,'cookieBlit2DPS':_1,'cookieBlitCubePS':g1,'cookieBlitVS':S1,'cookiePS':y1,'cubeMapProjectPS':v1,'cubeMapRotatePS':x1,'debugOutputPS':T1,'debugProcessFrontendPS':w1,'detailModesPS':b1,'diffusePS':A1,'decodePS':E1,'emissivePS':C1,'encodePS':P1,'endPS':M1,'envAtlasPS':D1,'envProcPS':I1,'falloffInvSquaredPS':L1,'falloffLinearPS':R1,'floatAsUintPS':O1,'fogPS':F1,'fresnelSchlickPS':N1,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':k1,'gammaPS':U1,'gles3PS':Vy,'gles3VS':Gy,'glossPS':B1,'gsplatCenterVS':z1,'gsplatCornerVS':K1,'gsplatColorVS':V1,'gsplatCommonVS':G1,'gsplatCompressedDataVS':H1,'gsplatCompressedSHVS':W1,'gsplatEvalSHVS':$1,'gsplatQuatToMat3VS':X1,'gsplatSogsColorVS':q1,'gsplatSogsDataVS':j1,'gsplatSogsSHVS':Y1,'gsplatDataVS':Z1,'gsplatOutputVS':Q1,'gsplatPS':J1,'gsplatSHVS':eP,'gsplatSourceVS':tP,'gsplatVS':sP,'quadVS':iP,'immediateLinePS':rP,'immediateLineVS':aP,'iridescenceDiffractionPS':nP,'iridescencePS':oP,'iridescenceThicknessPS':lP,'iorPS':cP,'lightDeclarationPS':hP,'lightDiffuseLambertPS':dP,'lightDirPointPS':fP,'lightEvaluationPS':uP,'lightFunctionLightPS':pP,'lightFunctionShadowPS':mP,'lightingPS':_P,'lightmapAddPS':gP,'lightmapPS':SP,'lightSpecularAnisoGGXPS':yP,'lightSpecularBlinnPS':vP,'lightSheenPS':xP,'linearizeDepthPS':TP,'litForwardBackendPS':wP,'litForwardDeclarationPS':EP,'litForwardMainPS':bP,'litForwardPostCodePS':AP,'litForwardPreCodePS':CP,'litMainPS':PP,'litMainVS':MP,'litOtherMainPS':DP,'litShaderArgsPS':IP,'litShaderCorePS':LP,'litShadowMainPS':RP,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':OP,'metalnessPS':FP,'metalnessModulatePS':kP,'morphPS':UP,'morphVS':BP,'msdfPS':NP,'msdfVS':zP,'normalVS':VP,'normalCoreVS':GP,'normalMapPS':HP,'opacityPS':WP,'opacityDitherPS':$P,'outputPS':XP,'outputAlphaPS':qP,'outputTex2DPS':jP,'sheenPS':YP,'sheenGlossPS':KP,'parallaxPS':ZP,'pickPS':QP,'reflDirPS':JP,'reflDirAnisoPS':e2,'reflectionCCPS':t2,'reflectionCubePS':s2,'reflectionEnvHQPS':i2,'reflectionEnvPS':r2,'reflectionSpherePS':a2,'reflectionSheenPS':n2,'refractionCubePS':o2,'refractionDynamicPS':l2,'reprojectPS':c2,'reprojectVS':h2,'screenDepthPS':d2,'shadowCascadesPS':f2,'shadowEVSMPS':u2,'shadowPCF1PS':p2,'shadowPCF3PS':m2,'shadowPCF5PS':_2,'shadowPCSSPS':g2,'shadowSoftPS':S2,'skinBatchVS':y2,'skinVS':v2,'skyboxPS':x2,'skyboxVS':T2,'specularPS':w2,'sphericalPS':E2,'specularityFactorPS':b2,'spotPS':A2,'startNineSlicedPS':C2,'startNineSlicedTiledPS':P2,'stdDeclarationPS':M2,'stdFrontEndPS':D2,'TBNPS':I2,'thicknessPS':L2,'tonemappingPS':R2,'tonemappingAcesPS':O2,'tonemappingAces2PS':F2,'tonemappingFilmicPS':N2,'tonemappingHejlPS':k2,'tonemappingLinearPS':U2,'tonemappingNeutralPS':B2,'tonemappingNonePS':z2,'transformVS':V2,'transformCoreVS':G2,'transformInstancingVS':H2,'transmissionPS':W2,'twoSidedLightingPS':$2,'uv0VS':X2,'uv1VS':q2,'uvTransformVS':j2,'uvTransformUniformsPS':Y2,'viewDirPS':K2,'webgpuPS':Hy,'webgpuVS':Wy},Q2='\x0auniform\x20a'+'lpha_ref:\x20'+'f32;\x0a\x0afn\x20a'+'lphaTest(a'+':\x20f32)\x20{\x0a\x20'+'\x20\x20\x20if\x20(a\x20<'+'\x20uniform.a'+'lpha_ref)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',J2='\x0a\x0a#if\x20LIT_'+'AMBIENT_SO'+'URCE\x20==\x20AM'+'BIENTSH\x0a\x20\x20'+'\x20\x20uniform\x20'+'ambientSH:'+'\x20array<vec'+'3f,\x209>;\x0a#e'+'ndif\x0a\x0a#if\x20'+'LIT_AMBIEN'+'T_SOURCE\x20='+'=\x20ENVALATL'+'AS\x0a\x20\x20\x20\x20#in'+'clude\x20\x22env'+'AtlasPS\x22\x0a\x0a'+'\x20\x20\x20\x20#ifnde'+'f\x20ENV_ATLA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_en'+'vAtlas:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_envAt'+'lasSampler'+':\x20sampler;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'fn\x20addAmbi'+'ent(worldN'+'ormal:\x20vec'+'3f)\x20{\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20A'+'MBIENTSH\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20n:\x20vec3f'+'\x20=\x20cubeMap'+'Rotate(wor'+'ldNormal);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20color:\x20'+'vec3f\x20=\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[0]'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[1]\x20*\x20n.'+'x\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm.ambien'+'tSH[2]\x20*\x20n'+'.y\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form.ambie'+'ntSH[3]\x20*\x20'+'n.z\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform.ambi'+'entSH[4]\x20*'+'\x20n.x\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[5]\x20*\x20n.'+'z\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform.'+'ambientSH['+'6]\x20*\x20n.y\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform.amb'+'ientSH[7]\x20'+'*\x20(3.0\x20*\x20n'+'.z\x20*\x20n.z\x20-'+'\x201.0)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[8]'+'\x20*\x20(n.x\x20*\x20'+'n.x\x20-\x20n.y\x20'+'*\x20n.y);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20proces'+'sEnvironme'+'nt(max(col'+'or,\x20vec3f('+'0.0)));\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+('\x20ENVALATLA'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3f(-1.0,\x201'+'.0,\x201.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20mapUv'+'(toSpheric'+'alUv(dir),'+'\x20vec4f(128'+'.0,\x20256.0\x20'+'+\x20128.0,\x206'+'4.0,\x2032.0)'+'\x20/\x20atlasSi'+'ze);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20ra'+'w:\x20vec4f\x20='+'\x20textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20uv'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20linea'+'r:\x20vec3f\x20='+'\x20{ambientD'+'ecode}(raw'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20+=\x20pr'+'ocessEnvir'+'onment(lin'+'ear);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20C'+'ONSTANT\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20unifor'+'m.light_gl'+'obalAmbien'+'t;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),eM='\x0a#ifdef\x20LI'+'T_GGX_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_anis'+'otropyInte'+'nsity:\x20f32'+';\x0a\x20\x20\x20\x20unif'+'orm\x20materi'+'al_anisotr'+'opyRotatio'+'n:\x20vec2f;\x0a'+'#endif\x0a\x0afn'+'\x20getAnisot'+'ropy()\x20{\x0a\x20'+'\x20\x20\x20dAnisot'+'ropy\x20=\x200.0'+';\x0a\x20\x20\x20\x20dAni'+'sotropyRot'+'ation\x20=\x20ve'+'c2f(1.0,\x200'+'.0);\x0a\x0a#ifd'+'ef\x20LIT_GGX'+'_SPECULAR\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20=\x20un'+'iform.mate'+'rial_aniso'+'tropyInten'+'sity;\x0a\x20\x20\x20\x20'+'dAnisotrop'+'yRotation\x20'+'=\x20uniform.'+'material_a'+'nisotropyR'+'otation;\x0a#'+'endif\x0a\x0a#if'+'def\x20STD_AN'+'ISOTROPY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyTex:\x20'+'vec3f\x20=\x20te'+'xtureSampl'+'eBias({STD'+'_ANISOTROP'+'Y_TEXTURE_'+'NAME},\x20{ST'+'D_ANISOTRO'+'PY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'ANISOTROPY'+'_TEXTURE_U'+'V},\x20unifor'+'m.textureB'+'ias).rgb;\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20*=\x20a'+'nisotropyT'+'ex.b;\x0a\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyRotat'+'ionFromTex'+':\x20vec2f\x20=\x20'+'anisotropy'+'Tex.rg\x20*\x202'+'.0\x20-\x20vec2f'+'(1.0);\x0a\x20\x20\x20'+'\x20let\x20rotat'+'ionMatrix:'+'\x20mat2x2f\x20='+'\x20mat2x2f(d'+'Anisotropy'+'Rotation.x'+',\x20dAnisotr'+'opyRotatio'+'n.y,\x20-dAni'+'sotropyRot'+'ation.y,\x20d'+'Anisotropy'+'Rotation.x'+');\x0a\x20\x20\x20\x20dAn'+'isotropyRo'+'tation\x20=\x20r'+'otationMat'+'rix\x20*\x20anis'+'otropyRota'+'tionFromTe'+'x;\x0a#endif\x0a'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20c'+'lamp(dAnis'+'otropy,\x200.'+'0,\x201.0);\x0a}'+'\x0a',tM='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_aoI'+'ntensity:\x20'+'f32;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_AODETA'+'IL_TEXTURE'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22detai'+'lModesPS\x22\x0a'+'#endif\x0a\x0afn'+'\x20getAO()\x20{'+'\x0a\x20\x20\x20\x20dAo\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20aoBas'+'e:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_AO_TEXTU'+'RE_NAME},\x20'+'{STD_AO_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AO_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_AO_'+'TEXTURE_CH'+'ANNEL};\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_AO'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20aoDetail:'+'\x20f32\x20=\x20tex'+'tureSample'+'Bias({STD_'+'AODETAIL_T'+'EXTURE_NAM'+'E},\x20{STD_A'+'ODETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AODET'+'AIL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_AODETAI'+'L_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20aoBase\x20='+'\x20detailMod'+'e_{STD_AOD'+'ETAIL_DETA'+'ILMODE}(ve'+'c3f(aoBase'+'),\x20vec3f(a'+'oDetail)).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dAo'+'\x20=\x20dAo\x20*\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20=\x20dA'+'o\x20*\x20satura'+'te(vVertex'+'Color.{STD'+'_AO_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'STD_AO_TEX'+'TURE)\x20||\x20d'+'efined(STD'+'_AO_VERTEX'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAo\x20=\x20mix('+'1.0,\x20dAo,\x20'+'uniform.ma'+'terial_aoI'+'ntensity);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',sM='\x0afn\x20occlud'+'eDiffuse(a'+'o:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20ao;\x0a'+'}\x0a',iM='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'aterial_oc'+'cludeSpecu'+'larIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0afn'+'\x20occludeSp'+'ecular(glo'+'ss:\x20f32,\x20a'+'o:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f)\x20{\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20==\x20A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_OCCLUDE_S'+'PECULAR_FL'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'specOcc:\x20f'+'32\x20=\x20mix(1'+'.0,\x20ao,\x20un'+'iform.mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specOcc:'+'\x20f32\x20=\x20ao;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'GLOSSDEPEN'+'DENT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'roximated\x20'+'specular\x20o'+'cclusion\x20f'+'rom\x20AO\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ht'+'tp://resea'+'rch.tri-ac'+'e.com/Data'+'/cedec2011'+'_RealtimeP'+'BR_Impleme'+'ntation_e.'+'pptx\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20spe'+'cPow:\x20f32\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20specOc'+'c:\x20f32\x20=\x20s'+'aturate(po'+'w(dot(worl'+'dNormal,\x20v'+'iewDir)\x20+\x20'+'ao,\x200.01\x20*'+'\x20specPow)\x20'+'-\x201.0\x20+\x20ao'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_OCCLUDE'+'_SPECULAR_'+'FLOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecOcc\x20=\x20mi'+'x(1.0,\x20spe'+'cOcc,\x20unif'+'orm.materi'+'al_occlude'+'SpecularIn'+'tensity);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20*\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20dRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'*\x20specOcc;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sReflec'+'tion\x20=\x20sRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a'),rM='\x0a\x20\x20\x20\x20let\x20d'+'irLm\x20=\x20tex'+'tureSample'+'(texture_d'+'irLightMap'+',\x20texture_'+'dirLightMa'+'pSampler,\x20'+'vUv1);\x0a\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.bakeDi'+'r\x20>\x200.5)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(dAtten\x20'+'>\x200.00001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'npacked_di'+'r\x20=\x20dirLm.'+'xyz\x20*\x202.0\x20'+'-\x20vec3f(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x20clamp'+'(dAtten,\x200'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20comb'+'ined_dir\x20='+'\x20dLightDir'+'NormW.xyz\x20'+'*\x20dAtten\x20+'+'\x20unpacked_'+'dir\x20*\x20dirL'+'m.w;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20finalRgb\x20'+'=\x20normaliz'+'e(combined'+'_dir)\x20*\x200.'+'5\x20+\x20vec3f('+'0.5);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20finalA\x20='+'\x20max(dirLm'+'.w\x20+\x20dAtte'+'n,\x201.0\x20/\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalRgb,\x20'+'finalA);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20dirLm;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20alpha'+'_min\x20=\x20sel'+'ect(0.0,\x201'+'.0\x20/\x20255.0'+',\x20dAtten\x20>'+'\x200.00001);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20finalA\x20'+'=\x20max(dirL'+'m.w,\x20alpha'+'_min);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(dirL'+'m.rgb,\x20fin'+'alA);\x0a\x20\x20\x20\x20'+'}\x0a',aM='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'uniform.am'+'bientBakeO'+'cclusionCo'+'ntrast\x20+\x201'+'.0,\x200.0))\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20vec3f(u'+'niform.amb'+'ientBakeOc'+'clusionBri'+'ghtness);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'saturate3('+'dDiffuseLi'+'ght);\x0a\x20\x20\x20\x20'+'dDiffuseLi'+'ght\x20=\x20dDif'+'fuseLight\x20'+'*\x20dAmbient'+'Light;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIGHTMAP'+'_RGBM\x0a\x20\x20\x20\x20'+'//\x20encode\x20'+'to\x20RGBM\x0a\x20\x20'+'\x20\x20var\x20temp'+'_color_rgb'+'m\x20=\x20vec4f('+'dDiffuseLi'+'ght,\x201.0);'+'\x0a\x20\x20\x20\x20temp_'+'color_rgbm'+'\x20=\x20vec4f(p'+'ow(temp_co'+'lor_rgbm.r'+'gb,\x20vec3f('+'0.5)),\x20tem'+'p_color_rg'+'bm.a);\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+'color_rgbm'+'.rgb\x20/\x208.0'+',\x20temp_col'+'or_rgbm.a)'+';\x0a\x20\x20\x20\x20let\x20'+'max_g_b\x20=\x20'+'max(temp_c'+'olor_rgbm.'+'g,\x20max(tem'+'p_color_rg'+'bm.b,\x201.0\x20'+'/\x20255.0));'+'\x0a\x20\x20\x20\x20let\x20m'+'ax_rgb\x20=\x20m'+'ax(temp_co'+'lor_rgbm.r'+',\x20max_g_b)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20ceil'+'(temp_colo'+'r_rgbm.a\x20*'+'\x20255.0)\x20/\x20'+'255.0;\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+('color_rgbm'+'.rgb\x20/\x20tem'+'p_color_rg'+'bm.a,\x20temp'+'_color_rgb'+'m.a);\x0a\x20\x20\x20\x20'+'output.col'+'or\x20=\x20temp_'+'color_rgbm'+';\x0a#else\x0a\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20vec'+'4f(dDiffus'+'eLight,\x201.'+'0);\x0a#endif'+'\x0a'),nM='\x0auniform\x20v'+'iew_positi'+'on:\x20vec3f;'+'\x0a\x0auniform\x20'+'light_glob'+'alAmbient:'+'\x20vec3f;\x0a\x0af'+'n\x20square(x'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20x*x'+';\x0a}\x0a\x0afn\x20sa'+'turate(x:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0afn'+'\x20saturate3'+'(x:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3f(0.'+'0),\x20vec3f('+'1.0));\x0a}\x0a',oM='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'Mask:\x20vec2'+'f;\x0avarying'+'\x20vTiledUv:'+'\x20vec2f;\x0a\x0au'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0auni'+'form\x20outer'+'Scale:\x20vec'+'2f;\x0aunifor'+'m\x20atlasRec'+'t:\x20vec4f;\x0a'+'\x0avar<priva'+'te>\x20nineSl'+'icedUv:\x20ve'+'c2f;\x0a',lM='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vMask:\x20v'+'ec2f;\x0avary'+'ing\x20vTiled'+'Uv:\x20vec2f;'+'\x0a\x0auniform\x20'+'innerOffse'+'t:\x20vec4f;\x0a'+'uniform\x20ou'+'terScale:\x20'+'vec2f;\x0auni'+'form\x20atlas'+'Rect:\x20vec4'+'f;\x0a\x0avar<pr'+'ivate>\x20nin'+'eSlicedUv:'+'\x20vec2f;\x0a',cM='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afn\x20bay'+'er2(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(2.0\x20*'+'\x20p.y\x20+\x20p.x'+'\x20+\x201.0)\x20%\x20'+'4.0;\x0a}\x0a\x0a//'+'\x204x4\x20matri'+'x,\x20p\x20-\x20pix'+'el\x20coordin'+'ate\x0afn\x20bay'+'er4(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20p1:\x20vec2f'+'\x20=\x20p\x20%\x20vec'+'2f(2.0);\x0a\x20'+'\x20\x20\x20let\x20p2:'+'\x20vec2f\x20=\x20f'+'loor(0.5\x20*'+'\x20(p\x20%\x20vec2'+'f(4.0)));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afn\x20bayer8'+'(p:\x20vec2f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20p1'+':\x20vec2f\x20=\x20'+'p\x20%\x20vec2f('+'2.0);\x0a\x20\x20\x20\x20'+'let\x20p2:\x20ve'+'c2f\x20=\x20floo'+'r(0.5\x20*\x20(p'+'\x20%\x20vec2f(4'+'.0)));\x0a\x20\x20\x20'+'\x20let\x20p4:\x20v'+'ec2f\x20=\x20flo'+'or(0.25\x20*\x20'+'(p\x20%\x20vec2f'+'(8.0)));\x0a\x20'+'\x20\x20\x20return\x20'+'4.0\x20*\x20(4.0'+'\x20*\x20bayer2('+'p1)\x20+\x20baye'+'r2(p2))\x20+\x20'+'bayer2(p4)'+';\x0a}\x0a',hM='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20sou'+'rce:\x20textu'+'re_2d<f32>'+';\x0avar\x20sour'+'ceSampler:'+'\x20sampler;\x0a'+'\x0a#ifdef\x20GA'+'USS\x0a\x20\x20\x20\x20un'+'iform\x20weig'+'ht:\x20array<'+'f32,\x20{SAMP'+'LES}>;\x0a#en'+'dif\x0aunifor'+'m\x20pixelOff'+'set:\x20vec2f'+';\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20var'+'\x20moments:\x20'+'vec3f\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20let\x20uv'+':\x20vec2f\x20=\x20'+'input.vUv0'+'\x20-\x20uniform'+'.pixelOffs'+'et\x20*\x20(f32('+'{SAMPLES})'+'\x20*\x200.5);\x0a\x0a'+'\x20\x20\x20\x20for\x20(v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20{'+'SAMPLES};\x20'+'i\x20=\x20i\x20+\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20c:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'source,\x20so'+'urceSample'+'r,\x20uv\x20+\x20un'+'iform.pixe'+'lOffset\x20*\x20'+'f32(i));\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20moments'+'\x20=\x20moments'+'\x20+\x20c.xyz\x20*'+'\x20uniform.w'+'eight[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20=\x20moment'+'s\x20+\x20c.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'oments\x20=\x20m'+'oments\x20*\x20('+'1.0\x20/\x20f32('+'{SAMPLES})'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'moments,\x201'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a',dM='\x0auniform\x20m'+'aterial_cl'+'earCoat:\x20f'+'32;\x0a\x0afn\x20ge'+'tClearCoat'+'()\x20{\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20=\x20unifo'+'rm.materia'+'l_clearCoa'+'t;\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_C'+'LEARCOAT_T'+'EXTURE\x0a\x20\x20\x20'+'\x20ccSpecula'+'rity\x20=\x20ccS'+'pecularity'+'\x20*\x20texture'+'SampleBias'+'({STD_CLEA'+'RCOAT_TEXT'+'URE_NAME},'+'\x20{STD_CLEA'+'RCOAT_TEXT'+'URE_NAME}S'+'ampler,\x20{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_CLE'+'ARCOAT_VER'+'TEX\x0a\x20\x20\x20\x20cc'+'Specularit'+'y\x20=\x20ccSpec'+'ularity\x20*\x20'+'saturate(v'+'VertexColo'+'r.{STD_CLE'+'ARCOAT_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a',fM='\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_clearCoa'+'tGloss:\x20f3'+'2;\x0a\x0afn\x20get'+'ClearCoatG'+'lossiness('+')\x20{\x0a\x20\x20\x20\x20cc'+'Glossiness'+'\x20=\x20uniform'+'.material_'+'clearCoatG'+'loss;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE_NAME}'+',\x20{STD_CLE'+'ARCOATGLOS'+'S_TEXTURE_'+'NAME}Sampl'+'er,\x20{STD_C'+'LEARCOATGL'+'OSS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_CLEA'+'RCOATGLOSS'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_INVERT\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20=\x201.0'+'\x20-\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20ccGloss'+'iness\x20+=\x200'+'.0000001;\x0a'+'}\x0a',uM='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_cle'+'arCoatBump'+'iness:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getClea'+'rCoatNorma'+'l()\x20{\x0a#ifd'+'ef\x20STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'\x0a\x20\x20\x20\x20var\x20n'+'ormalMap:\x20'+'vec3f\x20=\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_DEC'+'ODE}(textu'+'reSampleBi'+'as({STD_CL'+'EARCOATNOR'+'MAL_TEXTUR'+'E_NAME},\x20{'+'STD_CLEARC'+'OATNORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias));\x0a\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20mix(v'+'ec3f(0.0,\x20'+'0.0,\x201.0),'+'\x20normalMap'+',\x20uniform.'+'material_c'+'learCoatBu'+'mpiness);\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20norm'+'alize(dTBN'+'\x20*\x20normalM'+'ap);\x0a#else'+'\x0a\x20\x20\x20\x20ccNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a',pM='\x0astruct\x20Fa'+'ceCoords\x20{'+'\x0a\x20\x20\x20\x20uv:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Or'+'iginal\x20ret'+'urn\x20value\x0a'+'\x20\x20\x20\x20faceIn'+'dex:\x20f32,\x20'+'\x20\x20\x20//\x20Was\x20'+'out\x20parame'+'ter\x0a\x20\x20\x20\x20ti'+'leOffset:\x20'+'vec2f,\x20//\x20'+'Was\x20out\x20pa'+'rameter\x0a}\x0a'+'\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0afn\x20getC'+'ubemapFace'+'Coordinate'+'s(dir:\x20vec'+'3f)\x20->\x20Fac'+'eCoords\x20{\x0a'+'\x20\x20\x20\x20var\x20fa'+'ceIndex:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20tileOffs'+'et:\x20vec2f;'+'\x0a\x20\x20\x20\x20var\x20u'+'v:\x20vec2f;\x20'+'//\x20This\x20is'+'\x20the\x20face\x20'+'UV\x20[0..1]\x0a'+'\x20\x20\x20\x20let\x20vA'+'bs:\x20vec3f\x20'+'=\x20abs(dir)'+';\x0a\x20\x20\x20\x20var\x20'+'ma:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20if\x20(vA'+'bs.z\x20>=\x20vA'+'bs.x\x20&&\x20vA'+'bs.z\x20>=\x20vA'+'bs.y)\x20{\x20\x20\x20'+'//\x20front\x20/'+'\x20back\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20i'+'s_neg_z\x20=\x20'+'dir.z\x20<\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20faceIndex'+'\x20=\x20select('+'4.0,\x205.0,\x20'+'is_neg_z);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'a\x20=\x200.5\x20/\x20'+'vAbs.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv\x20='+'\x20vec2f(sel'+'ect(dir.x,'+'\x20-dir.x,\x20i'+'s_neg_z),\x20'+'-dir.y);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20til'+'eOffset\x20=\x20'+'vec2f(2.0,'+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_z));\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(vAbs'+'.y\x20>=\x20vAbs'+'.x)\x20{\x20\x20//\x20'+'top\x20index\x20'+'2,\x20bottom\x20'+'index\x203\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20is_neg_y\x20'+'=\x20dir.y\x20<\x20'+'0.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20selec'+('t(2.0,\x203.0'+',\x20is_neg_y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ma\x20=\x200.5\x20'+'/\x20vAbs.y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20=\x20vec2f(d'+'ir.x,\x20sele'+'ct(dir.z,\x20'+'-dir.z,\x20is'+'_neg_y));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ti'+'leOffset\x20='+'\x20vec2f(1.0'+',\x20select(0'+'.0,\x201.0,\x20i'+'s_neg_y));'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20is_'+'neg_x\x20=\x20di'+'r.x\x20<\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'aceIndex\x20='+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_x);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2f(selec'+'t(-dir.z,\x20'+'dir.z,\x20is_'+'neg_x),\x20-d'+'ir.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20tileO'+'ffset\x20=\x20ve'+'c2f(0.0,\x20s'+'elect(0.0,'+'\x201.0,\x20is_n'+'eg_x));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20u'+'v\x20=\x20uv\x20*\x20m'+'a\x20+\x200.5;\x0a\x20'+'\x20\x20\x20return\x20'+'FaceCoords'+'(uv,\x20faceI'+'ndex,\x20tile'+'Offset);\x0a}'+'\x0a\x0a//\x20conve'+'rts\x20unnorm'+'alized\x20dir'+'ection\x20vec'+'tor\x20to\x20a\x20t'+'exture\x20coo'+'rdinate\x20fo'+'r\x20a\x20cubema'+'p\x20face\x20sto'+'red\x20within'+'\x20texture\x20a'+'tlas\x20descr'+'ibed\x20by\x20th'+'e\x20viewport'+'\x0afn\x20getCub'+'emapAtlasC'+'oordinates'+'(omniAtlas'+'Viewport:\x20'+'vec3f,\x20sha'+'dowEdgePix'+'els:\x20f32,\x20'+'shadowText'+'ureResolut'+'ion:\x20f32,\x20'+'dir:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20faceData'+':\x20FaceCoor'+'ds\x20=\x20getCu'+'bemapFaceC'+'oordinates'+'(dir);\x0a\x20\x20\x20'+'\x20var\x20uv:\x20v'+'ec2f\x20=\x20fac'+'eData.uv;\x0a'+'\x20\x20\x20\x20let\x20ti'+'leOffset:\x20'+'vec2f\x20=\x20fa'+'ceData.til'+'eOffset;\x0a\x0a'+'\x20\x20\x20\x20//\x20mov'+'e\x20uv\x20coord'+'inates\x20inw'+'ards\x20insid'+'e\x20to\x20compe'+'nsate\x20for\x20')+('larger\x20fov'+'\x20when\x20rend'+'ering\x20shad'+'ow\x20into\x20at'+'las\x0a\x20\x20\x20\x20le'+'t\x20atlasFac'+'eSize:\x20f32'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20le'+'t\x20tileSize'+':\x20f32\x20=\x20sh'+'adowTextur'+'eResolutio'+'n\x20*\x20atlasF'+'aceSize;\x0a\x20'+'\x20\x20\x20var\x20off'+'set:\x20f32\x20='+'\x20shadowEdg'+'ePixels\x20/\x20'+'tileSize;\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20*\x20(1.0\x20-'+'\x20offset\x20*\x20'+'2.0)\x20+\x20off'+'set;\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20='+'\x20uv\x20*\x20atla'+'sFaceSize;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x20into'+'\x20face\x20of\x20t'+'he\x20atlas\x20('+'3x3\x20grid)\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20+\x20tileOf'+'fset\x20*\x20atl'+'asFaceSize'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'offset\x20int'+'o\x20the\x20atla'+'s\x20viewport'+'\x0a\x20\x20\x20\x20uv\x20=\x20'+'uv\x20+\x20omniA'+'tlasViewpo'+'rt.xy;\x0a\x0a\x20\x20'+'\x20\x20return\x20u'+'v;\x0a}\x0a'),mM='\x0afn\x20_getCo'+'okieCluste'+'red(tex:\x20t'+'exture_2d<'+'f32>,\x20texS'+'ampler:\x20sa'+'mpler,\x20uv:'+'\x20vec2f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20pixel'+':\x20vec4f\x20=\x20'+'mix(vec4f('+'1.0),\x20text'+'ureSampleL'+'evel(tex,\x20'+'texSampler'+',\x20uv,\x200.0)'+',\x20intensit'+'y);\x0a\x20\x20\x20\x20le'+'t\x20isRgb:\x20b'+'ool\x20=\x20dot('+'cookieChan'+'nel.rgb,\x20v'+'ec3f(1.0))'+'\x20==\x203.0;\x0a\x20'+'\x20\x20\x20return\x20'+'select(vec'+'3f(dot(pix'+'el,\x20cookie'+'Channel)),'+'\x20pixel.rgb'+',\x20isRgb);\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0afn'+'\x20getCookie'+'2DClustere'+'d(tex:\x20tex'+'ture_2d<f3'+'2>,\x20texSam'+'pler:\x20samp'+'ler,\x20trans'+'form:\x20mat4'+'x4f,\x20world'+'Position:\x20'+'vec3f,\x20int'+'ensity:\x20f3'+'2,\x20cookieC'+'hannel:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20projPo'+'s:\x20vec4f\x20='+'\x20transform'+'\x20*\x20vec4f(w'+'orldPositi'+'on,\x201.0);\x0a'+'\x20\x20\x20\x20return'+'\x20_getCooki'+'eClustered'+'(tex,\x20texS'+'ampler,\x20pr'+'ojPos.xy\x20/'+'\x20projPos.w'+',\x20intensit'+'y,\x20cookieC'+'hannel);\x0a}'+'\x0a\x0a//\x20getCo'+'okie\x20for\x20c'+'lustered\x20o'+'mni\x20light\x20'+'with\x20the\x20c'+'ookie\x20text'+'ure\x20being\x20'+'stored\x20in\x20'+'the\x20cookie'+'\x20atlas\x0afn\x20'+'getCookieC'+'ubeCluster'+'ed(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20dir:'+'\x20vec3f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f,\x20shad'+'owTextureR'+'esolution:'+'\x20f32,\x20shad'+('owEdgePixe'+'ls:\x20f32,\x20o'+'mniAtlasVi'+'ewport:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20dir);'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getCook'+'ieClustere'+'d(tex,\x20tex'+'Sampler,\x20u'+'v,\x20intensi'+'ty,\x20cookie'+'Channel);\x0a'+'}\x0a'),_M='\x0a\x0afn\x20_getS'+'hadowCoord'+'PerspZbuff'+'er(shadowM'+'atrix:\x20mat'+'4x4f,\x20shad'+'owParams:\x20'+'vec4f,\x20wPo'+'s:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20p'+'rojPos\x20=\x20s'+'hadowMatri'+'x\x20*\x20vec4f('+'wPos,\x201.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20projPos'+'.xyz\x20/\x20pro'+'jPos.w;\x0a\x20\x20'+'\x20\x20//\x20depth'+'\x20bias\x20is\x20a'+'lready\x20app'+'lied\x20on\x20re'+'nder\x0a}\x0a\x0afn'+'\x20getShadow'+'CoordPersp'+'ZbufferNor'+'malOffset('+'shadowMatr'+'ix:\x20mat4x4'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20normal'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20wP'+'os:\x20vec3f\x20'+'=\x20vPositio'+'nW\x20+\x20norma'+'l\x20*\x20shadow'+'Params.y;\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wCoordPers'+'pZbuffer(s'+'hadowMatri'+'x,\x20shadowP'+'arams,\x20wPo'+'s);\x0a}\x0a\x0afn\x20'+'normalOffs'+'etPointSha'+'dow(shadow'+'Params:\x20ve'+'c4f,\x20light'+'Pos:\x20vec3f'+',\x20lightDir'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'normal:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(li'+'ghtDir);\x0a\x20'+'\x20\x20\x20let\x20wPo'+'s:\x20vec3f\x20='+'\x20vPosition'+'W\x20+\x20normal'+'\x20*\x20shadowP'+'arams.y\x20*\x20'+'clamp(1.0\x20'+'-\x20dot(norm'+'al,\x20-light'+'DirNorm),\x20'+'0.0,\x201.0)\x20'+'*\x20distScal'+'e;\x20//0.02\x0a'+'\x20\x20\x20\x20let\x20di'+'r:\x20vec3f\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0a\x20\x20\x20\x20'+'fn\x20getShad'+'owOmniClus'+'teredPCF1('+'shadowMap:'+'\x20texture_d'+'epth_2d,\x20s'+'hadowMapSa'+'mpler:\x20sam'+'pler_compa'+'rison,\x20sha'+'dowParams:'+('\x20vec4f,\x20om'+'niAtlasVie'+'wport:\x20vec'+'3f,\x20shadow'+'EdgePixels'+':\x20f32,\x20lig'+'htDir:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shad'+'owTextureR'+'esolution:'+'\x20f32\x20=\x20sha'+'dowParams.'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+'tureResolu'+'tion,\x20ligh'+'tDir);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowZ:\x20f'+'32\x20=\x20lengt'+'h(lightDir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv,'+'\x20shadowZ);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F3)\x0a\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'wOmniClust'+'eredPCF3(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owParams:\x20'+'vec4f,\x20omn'+'iAtlasView'+'port:\x20vec3'+'f,\x20shadowE'+'dgePixels:'+'\x20f32,\x20ligh'+'tDir:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wTextureRe'+'solution:\x20'+'f32\x20=\x20shad'+'owParams.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20light'+'Dir);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadowZ:\x20f3'+'2\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w\x20+\x20'+'shadowPara'+'ms.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowCoord:'+'\x20vec3f\x20=\x20v'+'ec3f(uv,\x20s'+'hadowZ);\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF3x3('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20}\x0a\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowOmn'+'iClustered'+'PCF5(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20omniAtl'+'asViewport'+':\x20vec3f,\x20s'+'hadowEdgeP'+'ixels:\x20f32'+',\x20lightDir'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadowTex'+'tureResolu'+'tion:\x20f32\x20'+'=\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'uv:\x20vec2f\x20'+'=\x20getCubem'+'apAtlasCoo'+'rdinates(o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20shad'+'owTextureR'+'esolution,'+'\x20lightDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20vec3f'+'(uv,\x20shado'+'wZ);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CF5x5(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'#endif\x0a\x0a//'+'\x20Clustered'+'\x20Spot\x20Samp'+'ling\x20using'+'\x20atlas\x0a\x0a#i'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF1)\x0a\x0a\x20\x20\x20'+'\x20fn\x20getSha'+'dowSpotClu'+'steredPCF1'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu')+('rn\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowCoord.'+'xy,\x20shadow'+'Coord.z);\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0a\x20\x20'+'\x20\x20fn\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'3x3(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF5)\x0a\x0a\x20'+'\x20\x20\x20fn\x20getS'+'hadowSpotC'+'lusteredPC'+'F5(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),gM='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0avar\x20clu'+'sterWorldT'+'exture:\x20te'+'xture_2d<f'+'32>;\x0avar\x20l'+'ightsTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x0a#ifdef\x20C'+'LUSTER_SHA'+'DOWS\x0a\x20\x20\x20\x20/'+'/\x20TODO:\x20wh'+'en\x20VSM\x20sha'+'dow\x20is\x20sup'+'ported,\x20it'+'\x20needs\x20to\x20'+'use\x20sample'+'r2D\x20in\x20web'+'gl2\x0a\x20\x20\x20\x20va'+'r\x20shadowAt'+'lasTexture'+':\x20texture_'+'depth_2d;\x0a'+'\x20\x20\x20\x20var\x20sh'+'adowAtlasT'+'extureSamp'+'ler:\x20sampl'+'er_compari'+'son;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'var\x20cookie'+'AtlasTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20c'+'ookieAtlas'+'TextureSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0auniform'+'\x20clusterMa'+'xCells:\x20i3'+'2;\x0a\x0a//\x201.0'+'\x20if\x20cluste'+'red\x20lighti'+'ng\x20can\x20be\x20'+'skipped\x20(0'+'\x20lights\x20in'+'\x20the\x20clust'+'ers)\x0aunifo'+'rm\x20cluster'+'Skip:\x20f32;'+'\x0a\x0auniform\x20'+'clusterCel'+'lsCountByB'+'oundsSize:'+'\x20vec3f;\x0aun'+'iform\x20clus'+'terTexture'+'Size:\x20vec3'+'f;\x0auniform'+'\x20clusterBo'+'undsMin:\x20v'+'ec3f;\x0aunif'+'orm\x20cluste'+'rBoundsDel'+'ta:\x20vec3f;'+'\x0auniform\x20c'+'lusterCell'+'sDot:\x20vec3'+'f;\x0auniform'+'\x20clusterCe'+'llsMax:\x20ve'+('c3f;\x0aunifo'+'rm\x20shadowA'+'tlasParams'+':\x20vec2f;\x0a\x0a'+'//\x20structu'+'re\x20storing'+'\x20light\x20pro'+'perties\x20of'+'\x20a\x20cluster'+'ed\x20light\x0a/'+'/\x20it\x27s\x20sor'+'ted\x20to\x20hav'+'e\x20all\x20vect'+'ors\x20aligne'+'d\x20to\x204\x20flo'+'ats\x20to\x20lim'+'it\x20padding'+'\x0astruct\x20Cl'+'usterLight'+'Data\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x2032bit'+'\x20of\x20flags\x0a'+'\x20\x20\x20\x20flags:'+'\x20u32,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfWidth:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20isSpot:\x20'+'bool,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfHeight:'+'\x20vec3f,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20index\x0a\x20\x20'+'\x20\x20lightInd'+'ex:\x20i32,\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x0a\x20\x20'+'\x20\x20position'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sh'+'ape\x0a\x20\x20\x20\x20sh'+'ape:\x20u32,\x0a'+'\x0a\x20\x20\x20\x20//\x20wo'+'rld\x20space\x20'+'direction\x20'+'(spot\x20ligh'+'t\x20only)\x0a\x20\x20'+'\x20\x20directio'+'n:\x20vec3f,\x0a'+'\x0a\x20\x20\x20\x20//\x20li'+'ght\x20follow'+'\x20mode\x0a\x20\x20\x20\x20'+'falloffMod'+'eLinear:\x20b'+'ool,\x0a\x0a\x20\x20\x20\x20'+'//\x20color\x0a\x20'+'\x20\x20\x20color:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20//\x200.0\x20i'+'f\x20the\x20ligh'+'t\x20doesn\x27t\x20'+'cast\x20shado'+'ws\x0a\x20\x20\x20\x20sha'+'dowIntensi'+'ty:\x20f32,\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20omniAtl'+'asViewport'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20of\x20the\x20'+'light\x0a\x20\x20\x20\x20'+'range:\x20f32'+',\x0a\x0a\x20\x20\x20\x20//\x20'+'channel\x20ma'+'sk\x20-\x20one\x20o'+'f\x20the\x20chan'+'nels\x20has\x201'+',\x20the\x20othe')+('rs\x20are\x200\x0a\x20'+'\x20\x20\x20cookieC'+'hannelMask'+':\x20vec4f,\x0a\x0a'+'\x20\x20\x20\x20//\x20com'+'pressed\x20bi'+'ases,\x20two\x20'+'haf-floats'+'\x20stored\x20in'+'\x20a\x20float\x0a\x20'+'\x20\x20\x20biasesD'+'ata:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20bias\x20'+'values\x0a\x20\x20\x20'+'\x20shadowBia'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20shadowNo'+'rmalBias:\x20'+'f32,\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20a'+'nglesData:'+'\x20f32,\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20inner'+'\x20and\x20outer'+'\x20angle\x20cos'+'ine\x0a\x20\x20\x20\x20in'+'nerConeAng'+'leCos:\x20f32'+',\x0a\x20\x20\x20\x20oute'+'rConeAngle'+'Cos:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'tensity\x20of'+'\x20the\x20cooki'+'e\x0a\x20\x20\x20\x20cook'+'ieIntensit'+'y:\x20f32,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20mask\x0a\x20\x20\x20'+'\x20//float\x20m'+'ask;\x0a\x20\x20\x20\x20i'+'sDynamic:\x20'+'bool,\x0a\x20\x20\x20\x20'+'isLightmap'+'ped:\x20bool\x0a'+'}\x0a\x0a//\x20Note'+':\x20on\x20some\x20'+'devices\x20(t'+'ested\x20on\x20P'+'ixel\x203A\x20XL'+'),\x20this\x20ma'+'trix\x20when\x20'+'stored\x20ins'+'ide\x20the\x20li'+'ght\x20struct'+'\x20has\x20lower'+'\x20precision'+'\x20compared\x20'+'to\x0a//\x20when'+'\x20stored\x20ou'+'tside,\x20so\x20'+'we\x20store\x20i'+'t\x20outside\x20'+'to\x20avoid\x20s'+'pot\x20shadow'+'\x20flickerin'+'g.\x20This\x20mi'+'ght\x20need\x20t'+'o\x20be\x20done\x20'+'to\x20other\x20/'+'\x20all\x20membe'+'rs\x0a//\x20of\x20t'+'he\x20structu'+'re\x20if\x20furt'+'her\x20simila'+'r\x20issues\x20a'+'re\x20observe'+'d.\x0a\x0a//\x20sha'+'dow\x20(spot\x20'+'light\x20only'+')\x20/\x20cookie'+'\x20projectio'+'n\x20matrix\x0av'+'ar<private'+'>\x20lightPro'+'jectionMat'+'rix:\x20mat4x'+'4f;\x0a\x0afn\x20sa'+'mpleLightT'+'extureF(li'+'ghtIndex:\x20'+'i32,\x20index'+':\x20i32)\x20->\x20')+('vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20t'+'extureLoad'+'(lightsTex'+'ture,\x20vec2'+'<i32>(inde'+'x,\x20lightIn'+'dex),\x200);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightCore(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>,\x20'+'lightIndex'+':\x20f32)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20lig'+'ht\x20index\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'lightIndex'+'\x20=\x20i32(lig'+'htIndex);\x0a'+'\x0a\x20\x20\x20\x20//\x20sa'+'mple\x20data\x20'+'encoding\x20h'+'alf-float\x20'+'values\x20int'+'o\x2032bit\x20ui'+'nts\x0a\x20\x20\x20\x20le'+'t\x20halfData'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_COLO'+'R_ANGLES_B'+'IAS});\x0a\x0a\x20\x20'+'\x20\x20//\x20store'+'\x20floats\x20we'+'\x20decode\x20la'+'ter\x20as\x20nee'+'ded\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.angle'+'sData\x20=\x20ha'+'lfData.z;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.biasesDat'+'a\x20=\x20halfDa'+'ta.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20decomp'+'ress\x20color'+'\x20half-floa'+'ts\x0a\x20\x20\x20\x20let'+'\x20colorRG:\x20'+'vec2f\x20=\x20un'+'pack2x16fl'+'oat(bitcas'+'t<u32>(hal'+'fData.x));'+'\x0a\x20\x20\x20\x20let\x20c'+'olorB_:\x20ve'+'c2f\x20=\x20unpa'+'ck2x16floa'+'t(bitcast<'+'u32>(halfD'+'ata.y));\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'color\x20=\x20ve'+'c3f(colorR'+'G,\x20colorB_'+'.x)\x20*\x20{LIG'+'HT_COLOR_D'+'IVIDER};\x0a\x0a'+'\x20\x20\x20\x20//\x20pos'+'ition\x20and\x20'+'range,\x20ful'+'l\x20floats\x0a\x20'+'\x20\x20\x20let\x20lig'+'htPosRange'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_POSI'+'TION_RANGE'+'});\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.posit')+('ion\x20=\x20ligh'+'tPosRange.'+'xyz;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.rang'+'e\x20=\x20lightP'+'osRange.w;'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'pot\x20direct'+'ion\x20&\x20flag'+'s\x20data\x0a\x20\x20\x20'+'\x20let\x20light'+'Dir_Flags:'+'\x20vec4f\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData.ligh'+'tIndex,\x20{C'+'LUSTER_TEX'+'TURE_DIREC'+'TION_FLAGS'+'});\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20directi'+'on\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.direct'+'ion\x20=\x20ligh'+'tDir_Flags'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x2032bit\x20'+'flags\x0a\x20\x20\x20\x20'+'let\x20flags_'+'uint:\x20u32\x20'+'=\x20bitcast<'+'u32>(light'+'Dir_Flags.'+'w);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20flags_u'+'int;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.isSp'+'ot\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2030u)'+')\x20!=\x200u;\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'shape\x20=\x20(f'+'lags_uint\x20'+'>>\x2028u)\x20&\x20'+'0x3u;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.fal'+'loffModeLi'+'near\x20=\x20(fl'+'ags_uint\x20&'+'\x20(1u\x20<<\x2027'+'u))\x20==\x200u;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.shadowIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x200'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.cookieIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x208'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.isDynami'+'c\x20=\x20(flags'+'_uint\x20&\x20(1'+'u\x20<<\x2022u))'+'\x20!=\x200u;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sLightmapp'+'ed\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2021u)'+')\x20!=\x200u;\x0a}'+'\x0a\x0afn\x20decod'+'eClusterLi'+'ghtSpot(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{')+('\x0a\x20\x20\x20\x20//\x20sp'+'ot\x20light\x20c'+'os\x20angles\x0a'+'\x20\x20\x20\x20let\x20an'+'gles:\x20vec2'+'f\x20=\x20unpack'+'2x16float('+'bitcast<u3'+'2>(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'OmniAtlasV'+'iewport(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.omniAtla'+'sViewport\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData.l'+'ightIndex,'+'\x20{CLUSTER_'+'TEXTURE_PR'+'OJ_MAT_0})'+'.xyz;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'AreaData(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>)\x20'+'{\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.halfWid'+'th\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a.lightInd'+'ex,\x20{CLUST'+'ER_TEXTURE'+'_AREA_DATA'+'_WIDTH}).x'+'yz;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.halfH'+'eight\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data.light'+'Index,\x20{CL'+'USTER_TEXT'+'URE_AREA_D'+'ATA_HEIGHT'+'}).xyz;\x0a}\x0a'+'\x0afn\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(cluster'+'LightData:'+'\x20ptr<funct'+'ion,\x20Clust'+'erLightDat'+'a>)\x20{\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'matrix\x0a\x20\x20\x20'+'\x20let\x20m0:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_0});\x0a\x20\x20\x20'+'\x20let\x20m1:\x20v')+('ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_1});\x0a\x20\x20\x20'+'\x20let\x20m2:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_2});\x0a\x20\x20\x20'+'\x20let\x20m3:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4x'+'4f(m0,\x20m1,'+'\x20m2,\x20m3);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightShadow'+'Data(clust'+'erLightDat'+'a:\x20ptr<fun'+'ction,\x20Clu'+'sterLightD'+'ata>)\x20{\x0a\x20\x20'+'\x20\x20//\x20shado'+'w\x20biases\x0a\x20'+'\x20\x20\x20let\x20bia'+'ses:\x20vec2f'+'\x20=\x20unpack2'+'x16float(b'+'itcast<u32'+'>(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'fn\x20decodeC'+'lusterLigh'+'tCookieDat'+'a(clusterL'+'ightData:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20extract'+'\x20channel\x20m'+'ask\x20from\x20f'+'lags\x0a\x20\x20\x20\x20l'+'et\x20cookieF'+'lags:\x20u32\x20'+'=\x20(cluster'+'LightData.'+'flags\x20>>\x202'+'3u)\x20&\x200x0F'+'u;\x20\x20//\x204bi'+'ts,\x20each\x20b'+'it\x20enables'+'\x20a\x20channel'+'\x0a\x20\x20\x20\x20let\x20m'+'ask_uvec:\x20'+'vec4<u32>\x20'+'=\x20vec4<u32'+'>(cookieFl'+'ags)\x20&\x20vec'+'4<u32>(1u,'+'\x202u,\x204u,\x208'+'u);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eChannelMa'+'sk\x20=\x20step('+'vec4f(1.0)')+(',\x20vec4f(ma'+'sk_uvec));'+'\x20//\x20Normal'+'ize\x20to\x200.0'+'\x20or\x201.0\x0a}\x0a'+'\x0afn\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20light:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>,\x0a\x20\x20\x20\x20wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20reflectio'+'nDir:\x20vec3'+'f,\x0a#if\x20def'+'ined(LIT_C'+'LEARCOAT)\x0a'+'\x20\x20\x20\x20clearc'+'oatReflect'+'ionDir:\x20ve'+'c3f,\x0a#endi'+'f\x0a\x20\x20\x20\x20glos'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20specular'+'ity:\x20vec3f'+',\x0a\x20\x20\x20\x20geom'+'etricNorma'+'l:\x20vec3f,\x0a'+'\x20\x20\x20\x20tbn:\x20m'+'at3x3f,\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a#e'+'ndif\x0a\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20clearco'+'at_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20s'+'heen_gloss'+':\x20f32,\x0a\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty:\x20f32\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ve'+'c3f(1.0);\x0a'+'\x20\x20\x20\x20var\x20di'+'ffuseAtten'+'uation:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20var\x20fal'+'loffAttenu'+'ation:\x20f32'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20omni\x20'+'part\x20of\x20th'+'e\x20light\x0a\x20\x20'+'\x20\x20let\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(l'+'ight.posit'+'ion);\x0a\x20\x20\x20\x20'+'let\x20lightD'+'irNormW:\x20v'+'ec3f\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20')+('handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20=\x20g'+'etFalloffL'+'inear(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'falloffAtt'+'enuation\x20='+'\x20getFallof'+'fInvSquare'+'d(light.ra'+'nge,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20if'+'\x20(falloffA'+'ttenuation'+'\x20>\x200.00001'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_AR'+'EALIGHTS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20!=\x20{LI'+'GHTSHAPE_P'+'UNCTUAL})\x20'+'{\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20handle\x20l'+'ight\x20shape'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20='+'=\x20{LIGHTSH'+'APE_RECT})'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getRectLig'+'htDiffuse('+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'W,\x20lightDi'+'rNormW)\x20*\x20'+'16.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20diffuseAt'+'tenuation\x20'+'=\x20getDiskL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x20{\x20/'+'/\x20sphere\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getS'+'phereLight'+'Diffuse(wo'+'rldNormal,'+'\x20viewDir,\x20'+'lightDirW,'+'\x20lightDirN'+'ormW)\x20*\x2016'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNormW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.is'+'Spot)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'decodeClus'+'terLightSp'+'ot(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getSp'+'otEffect(l'+'ight.direc'+'tion,\x20ligh'+'t.innerCon'+'eAngleCos,'+'\x20light.out'+'erConeAngl'+'eCos,\x20ligh'+'tDirNormW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(CLUSTER'+'_COOKIES)\x20'+'||\x20defined'+'(CLUSTER_S'+'HADOWS)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(falloffAt'+'tenuation\x20'+'>\x200.00001)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'hadow\x20/\x20co')+('okie\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'dowIntensi'+'ty\x20>\x200.0\x20|'+'|\x20light.co'+'okieIntens'+'ity\x20>\x200.0)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20shared\x20'+'shadow\x20/\x20c'+'ookie\x20data'+'\x20depends\x20o'+'n\x20light\x20ty'+'pe\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.i'+'sSpot)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ecodeClust'+'erLightPro'+'jectionMat'+'rixData(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20decodeClu'+'sterLightO'+'mniAtlasVi'+'ewport(lig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'TextureRes'+'olution:\x20f'+'32\x20=\x20unifo'+'rm.shadowA'+'tlasParams'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'EdgePixels'+':\x20f32\x20=\x20un'+'iform.shad'+'owAtlasPar'+'ams.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_C'+'OOKIES\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'cookieInte'+'nsity\x20>\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(light)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'!!!!!!!!!!'+'!\x20TEXTURE_'+'PASS\x20likel'+'y\x20needs\x20sa'+'mpler.\x20Ass'+'uming\x20cook'+'ieAtlasTex'+'tureSample'+'r\x20exists.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20cookie'+'Attenuatio'+'n\x20=\x20getCoo'+'kie2DClust'+'ered(cooki'+'eAtlasText'+'ure,\x20cooki'+'eAtlasText'+'ureSampler'+',\x20lightPro'+'jectionMat'+'rix,\x20vPosi'+'tionW,\x20lig')+('ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20!!!!!!!!'+'!!!\x20TEXTUR'+'E_PASS\x20lik'+'ely\x20needs\x20'+'sampler.\x20A'+'ssuming\x20co'+'okieAtlasT'+'extureSamp'+'ler\x20exists'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cook'+'ieAttenuat'+'ion\x20=\x20getC'+'ookieCubeC'+'lustered(c'+'ookieAtlas'+'Texture,\x20c'+'ookieAtlas'+'TextureSam'+'pler,\x20ligh'+'tDirW,\x20lig'+'ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask,\x20shado'+'wTextureRe'+'solution,\x20'+'shadowEdge'+'Pixels,\x20li'+'ght.omniAt'+'lasViewpor'+'t);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20CLUSTER_'+'SHADOWS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'adow\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(light'+'.shadowInt'+'ensity\x20>\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightShadow'+'Data(light'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowParams'+':\x20vec4f\x20=\x20'+'vec4f(shad'+'owTextureR'+'esolution,'+'\x20light.sha'+'dowNormalB'+'ias,\x20light'+'.shadowBia'+'s,\x201.0\x20/\x20l'+'ight.range'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot\x20sha'+'dow\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20shadowCo'+'ord:\x20vec3f'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat')+('rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20!!!!!'+'!!!!!!\x20SHA'+'DOWMAP_PAS'+'S\x20needs\x20te'+'xture\x20and\x20'+'sampler_co'+'mparison.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20!!!'+'!!!!!!!!\x20S'+'hadow\x20func'+'tions\x20need'+'\x20update\x20fo'+'r\x20WGSL\x20tex'+'tureSample'+'Compare\x20et'+'c.\x20Assumin'+'g\x20these\x20ar'+'e\x20handled\x20'+'in\x20include'+'s.\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'SpotCluste'+'redPCF1(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadow:\x20f32'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF3('+'shadowAtla'+'sTexture,\x20'+'shadowAtla'+'sTextureSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadow:\x20f'+'32\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'5(shadowAt'+'lasTexture'+',\x20shadowAt'+'lasTexture'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCSS)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l')+('et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CSS(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20fallo'+'ffAttenuat'+'ion\x20*\x20mix('+'1.0,\x20shado'+'w,\x20light.s'+'hadowInten'+'sity);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20omni\x20'+'shadow\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalOffset'+'PointShado'+'w(shadowPa'+'rams,\x20ligh'+'t.position'+',\x20lightDir'+'W,\x20lightDi'+'rNormW,\x20ge'+'ometricNor'+'mal);\x20\x20//\x20'+'normalBias'+'\x20adjusted\x20'+'for\x20distan'+'ce\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20!!!!!!!!!'+'!!\x20SHADOWM'+'AP_PASS\x20ne'+'eds\x20textur'+'e\x20and\x20samp'+'ler_compar'+'ison.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20!!!!!!!'+'!!!!\x20Shado'+'w\x20function'+'s\x20need\x20upd'+'ate\x20for\x20WG'+'SL\x20texture'+'SampleComp'+'are\x20etc.\x20A'+'ssuming\x20th'+'ese\x20are\x20ha'+'ndled\x20in\x20i'+'ncludes.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCF1)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowOmni'+'ClusteredP'+'CF1(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowPar'+'ams,\x20light'+'.omniAtlas'+'Viewport,\x20'+'shadowEdge'+'Pixels,\x20di'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20getSha'+'dowOmniClu'+'steredPCF3'+'(shadowAtl'+'asTexture,'+'\x20shadowAtl'+'asTextureS'+'ampler,\x20sh'+'adowParams'+',\x20light.om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'OmniCluste'+'redPCF5(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20areaDif'+'fuse:\x20vec3'+'f\x20=\x20(diffu'+'seAttenuat'+'ion\x20*\x20fall'+'offAttenua'+'tion)\x20*\x20li')+('ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaDi'+'ffuse\x20=\x20mi'+'x(areaDiff'+'use,\x20vec3f'+'(0.0),\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20diff'+'use\x20-\x20it\x20d'+'oes\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20areaDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20areaL'+'ightSpecul'+'ar:\x20f32;\x20/'+'/\x20Use\x20var\x20'+'because\x20as'+'signed\x20in\x20'+'if/else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_RECT'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getRe'+'ctLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20if\x20(ligh'+'t.shape\x20=='+'\x20{LIGHTSHA'+'PE_DISK})\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecular\x20'+'=\x20getDiskL'+'ightSpecul'+'ar(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x20//\x20sphere'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20areaLight'+'Specular\x20='+'\x20getSphere'+'LightSpecu')+('lar(worldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20dLTC'+'SpecFres\x20*'+'\x20areaLight'+'Specular\x20*'+'\x20falloffAt'+'tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sp'+'ecular\x20cle'+'ar\x20coat\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20areaLigh'+'tSpecularC'+'C:\x20f32;\x20//'+'\x20Use\x20var\x20b'+'ecause\x20ass'+'igned\x20in\x20i'+'f/else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20==\x20{LI'+'GHTSHAPE_R'+'ECT})\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecularC'+'C\x20=\x20getRec'+'tLightSpec'+'ular(clear'+'coat_world'+'Normal,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecularCC\x20='+'\x20getDiskLi'+'ghtSpecula'+'r(clearcoa'+'t_worldNor'+'mal,\x20viewD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20{\x20//\x20sph'+'ere\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getSphereL'+'ightSpecul'+'ar(clearco'+'at_worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'cSpecularL'+'ight\x20=\x20ccS'+'pecularLig'+'ht\x20+\x20ccLTC'+'SpecFres\x20*'+'\x20areaLight'+'SpecularCC'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20\x20*\x20c'+'ookieAtten')+('uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20punctual'+'\x20light\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20p'+'unctualDif'+'fuse:\x20vec3'+'f\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_AREAL'+'IGHTS)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'unctualDif'+'fuse\x20=\x20mix'+'(punctualD'+'iffuse,\x20ve'+'c3f(0.0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20=\x20dDiffus'+'eLight\x20+\x20p'+'unctualDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Dir:\x20vec3f'+'\x20=\x20normali'+'ze(-lightD'+'irNormW\x20+\x20'+'viewDir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specular\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR_FRESN'+'EL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20=\x20'+'dSpecularL'+'ight\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD')+('ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20halfD'+'ir),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecularity\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'=\x20ccSpecul'+'arLight\x20+\x20'+'getLightSp'+'ecular(hal'+'fDir,\x20clea'+'rcoatRefle'+'ctionDir,\x20'+'clearcoat_'+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'NormW,\x20cle'+'arcoat_glo'+'ss,\x20tbn)\x20*'+'\x20falloffAt')+('tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion\x20*\x20getF'+'resnelCC(d'+'ot(viewDir'+',\x20halfDir)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20='+'\x20ccSpecula'+'rLight\x20+\x20g'+'etLightSpe'+'cular(half'+'Dir,\x20clear'+'coatReflec'+'tionDir,\x20c'+'learcoat_w'+'orldNormal'+',\x20viewDir,'+'\x20lightDirN'+'ormW,\x20clea'+'rcoat_glos'+'s,\x20tbn)\x20*\x20'+'falloffAtt'+'enuation\x20*'+'\x20light.col'+'or\x20*\x20cooki'+'eAttenuati'+'on;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'+\x20getLight'+'SpecularSh'+'een(halfDi'+'r,\x20worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'sheen_glos'+'s)\x20*\x20fallo'+'ffAttenuat'+'ion\x20*\x20ligh'+'t.color\x20*\x20'+'cookieAtte'+'nuation;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20Writ'+'e\x20to\x20globa'+'l\x20attenuat'+'ion\x20values'+'\x20(for\x20ligh'+'tmapper)\x0a\x20'+'\x20\x20\x20dAtten\x20'+'=\x20falloffA'+'ttenuation'+';\x0a\x20\x20\x20\x20dLig'+'htDirNormW'+'\x20=\x20lightDi'+'rNormW;\x0a}\x0a'+'\x0a\x0afn\x20evalu'+'ateCluster'+'Light(\x0a\x20\x20\x20'+'\x20lightInde'+'x:\x20f32,\x0a\x20\x20'+'\x20\x20worldNor'+'mal:\x20vec3f'+',\x0a\x20\x20\x20\x20view'+'Dir:\x20vec3f'+',\x0a\x20\x20\x20\x20refl'+'ectionDir:'+'\x20vec3f,\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20c'+'learcoatRe'+'flectionDi'+'r:\x20vec3f,\x0a'+'#endif\x0a\x20\x20\x20')+('\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20geometric'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20t'+'bn:\x20mat3x3'+'f,\x0a#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20clearc'+'oat_worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20cl'+'earcoat_gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20sheen_'+'gloss:\x20f32'+',\x0a\x20\x20\x20\x20irid'+'escence_in'+'tensity:\x20f'+'32\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20decod'+'e\x20core\x20lig'+'ht\x20data\x20fr'+'om\x20texture'+'s\x0a\x20\x20\x20\x20var\x20'+'clusterLig'+'htData:\x20Cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(&cluste'+'rLightData'+',\x20lightInd'+'ex);\x0a\x0a\x20\x20\x20\x20'+'//\x20evaluat'+'e\x20light\x20if'+'\x20it\x20uses\x20a'+'ccepted\x20li'+'ght\x20mask\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'acceptLigh'+'tMask:\x20boo'+'l\x20=\x20cluste'+'rLightData'+'.isDynamic'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20accept'+'LightMask:'+'\x20bool\x20=\x20cl'+'usterLight'+'Data.isLig'+'htmapped;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'acceptLigh'+'tMask)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20eva'+'luateLight'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20&clust'+'erLightDat'+'a,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'viewDir,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20reflectio'+'nDir,\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20geometri'+'cNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20tbn,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE')+('NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_worl'+'dNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'sheen_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a\x0a\x0afn'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20world'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20v'+'iewDir:\x20ve'+'c3f,\x0a\x20\x20\x20\x20r'+'eflectionD'+'ir:\x20vec3f,'+'\x0a#if\x20defin'+'ed(LIT_CLE'+'ARCOAT)\x0a\x20\x20'+'\x20\x20clearcoa'+'tReflectio'+'nDir:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'specularit'+'y:\x20vec3f,\x0a'+'\x20\x20\x20\x20geomet'+'ricNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20tbn:\x20mat'+'3x3f,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a#end'+'if\x0a\x20\x20\x20\x20cle'+'arcoat_wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20clearcoat'+'_gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20she'+'en_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20i'+'ridescence'+'_intensity'+':\x20f32\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20sk'+'ip\x20lights\x20'+'if\x20no\x20ligh'+'ts\x20at\x20all\x0a'+'\x20\x20\x20\x20if\x20(un'+'iform.clus'+'terSkip\x20>\x20'+'0.5)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x20to'+'\x203d\x20intege'+'r\x20cell\x20cor'+'dinates\x20in'+'\x20the\x20clust'+'er\x20structu'+'re\x0a\x20\x20\x20\x20let'+'\x20cellCoord'+'s:\x20vec3f\x20='+'\x20floor((vP'+'ositionW\x20-'+'\x20uniform.c'+'lusterBoun'+'dsMin)\x20*\x20u'+'niform.clu'+'sterCellsC'+'ountByBoun'+'dsSize);\x0a\x0a'+'\x20\x20\x20\x20//\x20no\x20'+'lighting\x20w'+'hen\x20cell\x20c'+'oordinate\x20'+'is\x20out\x20of\x20'+'range\x0a\x20\x20\x20\x20'+'if\x20(!(any('+'cellCoords')+('\x20<\x20vec3f(0'+'.0))\x20||\x20an'+'y(cellCoor'+'ds\x20>=\x20unif'+'orm.cluste'+'rCellsMax)'+'))\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cel'+'l\x20index\x20(m'+'apping\x20fro'+'m\x203d\x20cell\x20'+'coordinate'+'s\x20to\x20linea'+'r\x20memory)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20cellInde'+'x:\x20f32\x20=\x20d'+'ot(uniform'+'.clusterCe'+'llsDot,\x20ce'+'llCoords);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20convert'+'\x20cell\x20inde'+'x\x20to\x20uv\x20co'+'ordinates\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20clusterV'+':\x20f32\x20=\x20fl'+'oor(cellIn'+'dex\x20*\x20unif'+'orm.cluste'+'rTextureSi'+'ze.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20c'+'lusterU:\x20f'+'32\x20=\x20cellI'+'ndex\x20-\x20(cl'+'usterV\x20*\x20u'+'niform.clu'+'sterTextur'+'eSize.x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20loop\x20ove'+'r\x20maximum\x20'+'number\x20of\x20'+'light\x20cell'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'for\x20(var\x20l'+'ightCellIn'+'dex:\x20i32\x20='+'\x200;\x20lightC'+'ellIndex\x20<'+'\x20uniform.c'+'lusterMaxC'+'ells;\x20ligh'+'tCellIndex'+'\x20=\x20lightCe'+'llIndex\x20+\x20'+'1)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20using\x20a\x20s'+'ingle\x20chan'+'nel\x20textur'+'e\x20with\x20dat'+'a\x20in\x20red\x20c'+'hannel\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20lightIn'+'dexPacked:'+'\x20f32\x20=\x20tex'+'tureLoad(c'+'lusterWorl'+'dTexture,\x20'+'vec2<i32>('+'i32(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20i32(clus'+'terV)),\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(lightInde'+'xPacked\x20<='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20break;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ev'+'aluateClus'+'terLight(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tIndexPack'+'ed\x20*\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20vie'+'wDir,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'eometricNo'+'rmal,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20tbn,\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coat_world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20clearc'+'oat_gloss,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20she'+'en_gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a}'),SM='\x0afn\x20combin'+'eColor(alb'+'edo:\x20vec3f'+',\x20sheenSpe'+'cularity:\x20'+'vec3f,\x20cle'+'arcoatSpec'+'ularity:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20ret:\x20ve'+'c3f\x20=\x20vec3'+'f(0.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ret\x20=\x20'+'ret\x20+\x20((dD'+'iffuseLigh'+'t\x20-\x20unifor'+'m.light_gl'+'obalAmbien'+'t)\x20*\x20albed'+'o\x20+\x20unifor'+'m.material'+'_ambient\x20*'+'\x20uniform.l'+'ight_globa'+'lAmbient);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(albedo\x20*'+'\x20dDiffuseL'+'ight);\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_OLD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20dSpecular'+'Light;\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(dReflect'+'ion.rgb\x20*\x20'+'dReflectio'+'n.a);\x0a\x20\x20\x20\x20'+'#endif\x20//\x20'+'LIT_REFLEC'+'TIONS\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'sheenScali'+'ng:\x20f32\x20=\x20'+'1.0\x20-\x20max('+'max(sheenS'+'pecularity'+'.r,\x20sheenS'+'pecularity'+'.g),\x20sheen'+'Specularit'+'y.b)\x20*\x200.1'+'57;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20sheenS'+'caling\x20+\x20('+'sSpecularL'+'ight\x20+\x20sRe'+'flection.r'+'gb)\x20*\x20shee'+'nSpeculari'+'ty;\x0a\x20\x20\x20\x20#e'+'ndif\x20//\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20clear'+'CoatScalin'+'g:\x20f32\x20=\x201'+'.0\x20-\x20ccFre'+'snel\x20*\x20cle'+'arcoatSpec'+'ularity;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'\x20=\x20ret\x20*\x20c'+'learCoatSc'+'aling\x20+\x20(c'+'cSpecularL'+'ight\x20+\x20ccR'+'eflection)'+('\x20*\x20clearco'+'atSpecular'+'ity;\x0a\x20\x20\x20\x20#'+'endif\x20//\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20re'+'turn\x20ret;\x0a'+'}\x0a'),yM='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x0a\x20\x20\x20\x20'+'var\x20blitTe'+'xture:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20blitText'+'ureSampler'+'\x20:\x20sampler'+';\x0a\x0a\x20\x20\x20\x20@fr'+'agment\x0a\x20\x20\x20'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20t'+'extureSamp'+'le(blitTex'+'ture,\x20blit'+'TextureSam'+'pler,\x20inpu'+'t.uv0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20}\x0a',vM='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20u'+'niform\x20inv'+'ViewProj:\x20'+'mat4x4<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'re:\x20textur'+'e_cube<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'reSampler\x20'+':\x20sampler;'+'\x0a\x0a\x20\x20\x20\x20@fra'+'gment\x0a\x20\x20\x20\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20pro'+'jPos\x20=\x20vec'+'4f(input.u'+'v0\x20*\x202.0\x20-'+'\x201.0,\x200.5,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20w'+'orldPos\x20=\x20'+'uniform.in'+'vViewProj\x20'+'*\x20projPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20textur'+'eSample(bl'+'itTexture,'+'\x20blitTextu'+'reSampler,'+'\x20worldPos.'+'xyz);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20}\x0a',xM='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.uv0.y'+'\x20=\x201.0\x20-\x20o'+'utput.uv0.'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',TM='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMin:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMax:\x20v'+'ec3f;\x0a#end'+'if\x0a\x0afn\x20cub'+'eMapProjec'+'t(nrdir:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20cubeMapR'+'otate(nrdi'+'r);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIT_CU'+'BEMAP_PROJ'+'ECTION\x20==\x20'+'BOX\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20nrd'+'ir_rotated'+':\x20vec3f\x20=\x20'+'cubeMapRot'+'ate(nrdir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20rbmax'+':\x20vec3f\x20=\x20'+'(uniform.e'+'nvBoxMax\x20-'+'\x20vPosition'+'W)\x20/\x20nrdir'+'_rotated;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20rbmin:\x20v'+'ec3f\x20=\x20(un'+'iform.envB'+'oxMin\x20-\x20vP'+'ositionW)\x20'+'/\x20nrdir_ro'+'tated;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'rbminmax:\x20'+'vec3f\x20=\x20se'+'lect(rbmin'+',\x20rbmax,\x20n'+'rdir_rotat'+'ed\x20>\x20vec3f'+'(0.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'fa:\x20f32\x20=\x20'+'min(min(rb'+'minmax.x,\x20'+'rbminmax.y'+'),\x20rbminma'+'x.z);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20p'+'osonbox:\x20v'+'ec3f\x20=\x20vPo'+'sitionW\x20+\x20'+'nrdir_rota'+'ted\x20*\x20fa;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20envBoxPo'+'s:\x20vec3f\x20='+'\x20(uniform.'+'envBoxMin\x20'+'+\x20uniform.'+'envBoxMax)'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20normali'+'ze(posonbo'+'x\x20-\x20envBox'+'Pos);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',wM='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20cubeMap'+'RotationMa'+'trix:\x20mat3'+'x3f;\x0a#endi'+'f\x0a\x0afn\x20cube'+'MapRotate('+'refDir:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a#ifd'+'ef\x20CUBEMAP'+'_ROTATION\x0a'+'\x20\x20\x20\x20return'+'\x20refDir\x20*\x20'+'uniform.cu'+'beMapRotat'+'ionMatrix;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir;\x0a#end'+'if\x0a}\x0a',EM='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0aoutp'+'ut.color\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0aoutput.co'+'lor\x20=\x20vec4'+'f(litArgs_'+'albedo\x20,\x201'+'.0);\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'DEBUG_WORL'+'D_NORMAL_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(litAr'+'gs_worldNo'+'rmal\x20*\x200.5'+'\x20+\x200.5,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_OPACI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_opacity'+')\x20,\x201.0);\x0a'+'#endif\x0a\x0a#i'+'fdef\x20DEBUG'+'_SPECULARI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(l'+'itArgs_spe'+'cularity,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_GLO'+'SS_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_gloss)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_M'+'ETALNESS_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(vec3f'+'(litArgs_m'+'etalness)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_A'+'O_PASS\x0aout'+'put.color\x20'+'=\x20vec4f(ve'+'c3f(litArg'+'s_ao)\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_EMISS'+'ION_PASS\x0ao'+'utput.colo'+'r\x20=\x20vec4f('+'gammaCorre'+'ctOutput(l'+'itArgs_emi'+'ssion),\x201.'+'0);\x0a#endif'+'\x0a',bM='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0a\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20v'+'ec3f(0.5);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0a#ifdef\x20VA'+'RYING_VUV0'+'\x0a\x20\x20\x20\x20litAr'+'gs_albedo\x20'+'=\x20vec3f(vU'+'v0,\x200.0);\x0a'+'#else\x0a\x20\x20\x20\x20'+'litArgs_al'+'bedo\x20=\x20vec'+'3f(0.0);\x0a#'+'endif\x0a#end'+'if\x0a',AM='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0afn\x20de'+'codeLinear'+'(raw:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20raw.r'+'gb;\x0a}\x0a\x0afn\x20'+'decodeGamm'+'aFloat(raw'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20pow'+'(raw,\x202.2)'+';\x0a}\x0a\x0afn\x20de'+'codeGamma3'+'(raw:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(r'+'aw,\x20vec3f('+'2.2));\x0a}\x0a\x0a'+'fn\x20decodeG'+'amma(raw:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow(raw.xyz'+',\x20vec3f(2.'+'2));\x0a}\x0a\x0afn'+'\x20decodeRGB'+'M(raw:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20color\x20='+'\x20(8.0\x20*\x20ra'+'w.a)\x20*\x20raw'+'.rgb;\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0afn\x20de'+'codeRGBP(r'+'aw:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20ra'+'w.rgb\x20*\x20(-'+'raw.a\x20*\x207.'+'0\x20+\x208.0);\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0af'+'n\x20decodeRG'+'BE(raw:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(vec3f('+'0.0),\x20raw.'+'xyz\x20*\x20pow('+'2.0,\x20raw.w'+'\x20*\x20255.0\x20-'+'\x20128.0),\x20r'+'aw.a\x20!=\x200.'+'0);\x0a}\x0a\x0afn\x20'+'passThroug'+'h(raw:\x20vec'+'4f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw;'+'\x0a}\x0a\x0afn\x20unp'+'ackNormalX'+'YZ(nmap:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20nm'+'ap.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'}\x0a\x0afn\x20unpa'+'ckNormalXY'+'(nmap:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20xy\x20=\x20nm'+'ap.wy\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'vec3f(xy,\x20'+'sqrt(1.0\x20-'+'\x20clamp(dot'+'(xy,\x20xy),\x20'+'0.0,\x201.0))'+');\x0a}\x0a\x0a#end'+'if\x0a',CM='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0afn\x20de'+'tailMode_m'+'ul(c1:\x20vec'+'3f,\x20c2:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20c1\x20'+'*\x20c2;\x0a}\x0a\x0af'+'n\x20detailMo'+'de_add(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20c1\x20+\x20c2;\x0a'+'}\x0a\x0a//\x20http'+'s://en.wik'+'ipedia.org'+'/wiki/Blen'+'d_modes#Sc'+'reen\x0afn\x20de'+'tailMode_s'+'creen(c1:\x20'+'vec3f,\x20c2:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'1.0\x20-\x20(1.0'+'\x20-\x20c1)*(1.'+'0\x20-\x20c2);\x0a}'+'\x0a\x0a//\x20https'+'://en.wiki'+'pedia.org/'+'wiki/Blend'+'_modes#Ove'+'rlay\x0afn\x20de'+'tailMode_o'+'verlay(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20mix(1.0\x20-'+'\x202.0\x20*\x20(1.'+'0\x20-\x20c1)*(1'+'.0\x20-\x20c2),\x20'+'2.0\x20*\x20c1\x20*'+'\x20c2,\x20step('+'c1,\x20vec3f('+'0.5)));\x0a}\x0a'+'\x0afn\x20detail'+'Mode_min(c'+'1:\x20vec3f,\x20'+'c2:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20min(c1,'+'\x20c2);\x0a}\x0a\x0af'+'n\x20detailMo'+'de_max(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(c1,\x20c'+'2);\x0a}\x0a\x0a#en'+'dif\x0a',PM='\x0auniform\x20m'+'aterial_di'+'ffuse:\x20vec'+'3f;\x0a\x0a#ifde'+'f\x20STD_DIFF'+'USEDETAIL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22detailMo'+'desPS\x22\x0a#en'+'dif\x0a\x0afn\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20unif'+'orm.materi'+'al_diffuse'+'.rgb;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoText'+'ure:\x20vec3f'+'\x20=\x20{STD_DI'+'FFUSE_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_DIFFU'+'SE_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'_TEXTURE_N'+'AME}Sample'+'r,\x20{STD_DI'+'FFUSE_TEXT'+'URE_UV},\x20u'+'niform.tex'+'tureBias))'+'.{STD_DIFF'+'USE_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoDeta'+'il:\x20vec3f\x20'+'=\x20{STD_DIF'+'FUSEDETAIL'+'_TEXTURE_D'+'ECODE}(tex'+'tureSample'+'Bias({STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_NAME},\x20{'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_DIFFU'+'SEDETAIL_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20=\x20dAlbe'+'do\x20*\x20albed'+'oTexture;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_DIF'+'FUSE_VERTE'+'X\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAlbedo\x20=\x20'+'dAlbedo\x20*\x20'+'gammaCorre'+'ctInputVec'+'3(saturate'+'3(vVertexC'+'olor.{STD_'+('DIFFUSE_VE'+'RTEX_CHANN'+'EL}));\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),MM='\x0auniform\x20m'+'aterial_em'+'issive:\x20ve'+'c3f;\x0aunifo'+'rm\x20materia'+'l_emissive'+'Intensity:'+'\x20f32;\x0a\x0afn\x20'+'getEmissio'+'n()\x20{\x0a\x20\x20\x20\x20'+'dEmission\x20'+'=\x20uniform.'+'material_e'+'missive\x20*\x20'+'uniform.ma'+'terial_emi'+'ssiveInten'+'sity;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_EMISSIVE'+'_TEXTURE\x0a\x20'+'\x20\x20\x20dEmissi'+'on\x20*=\x20{STD'+'_EMISSIVE_'+'TEXTURE_DE'+'CODE}(text'+'ureSampleB'+'ias({STD_E'+'MISSIVE_TE'+'XTURE_NAME'+'},\x20{STD_EM'+'ISSIVE_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_EMISSI'+'VE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias)).{S'+'TD_EMISSIV'+'E_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_VERT'+'EX\x0a\x20\x20\x20\x20dEm'+'ission\x20=\x20d'+'Emission\x20*'+'\x20gammaCorr'+'ectInputVe'+'c3(saturat'+'e3(vVertex'+'Color.{STD'+'_EMISSIVE_'+'VERTEX_CHA'+'NNEL}));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',DM='\x0afn\x20encode'+'Linear(sou'+'rce:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'source,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeGamm'+'a(source:\x20'+'vec3f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4f(pow(s'+'ource\x20+\x20ve'+'c3f(0.0000'+'001),\x20vec3'+'f(1.0\x20/\x202.'+'2)),\x201.0);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBM(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+'r\x20color:\x20v'+'ec3f\x20=\x20pow'+'(source,\x20v'+'ec3f(0.5))'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x201.0\x20/'+'\x208.0;\x0a\x0a\x20\x20\x20'+'\x20var\x20a:\x20f3'+'2\x20=\x20satura'+'te(max(max'+'(color.r,\x20'+'color.g),\x20'+'max(color.'+'b,\x201.0\x20/\x202'+'55.0)));\x0a\x20'+'\x20\x20\x20a\x20=\x20cei'+'l(a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20col'+'or\x20/=\x20a;\x0a\x20'+'\x20\x20\x20return\x20'+'vec4f(colo'+'r,\x20a);\x0a}\x0a\x0a'+'fn\x20encodeR'+'GBP(source'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20//\x20con'+'vert\x20incom'+'ing\x20linear'+'\x20to\x20gamma('+'ish)\x0a\x20\x20\x20\x20v'+'ar\x20gamma:\x20'+'vec3f\x20=\x20po'+'w(source,\x20'+'vec3f(0.5)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20the\x20maxim'+'um\x20compone'+'nt\x20clamped'+'\x20to\x201..8\x0a\x20'+'\x20\x20\x20var\x20max'+'Val:\x20f32\x20='+'\x20min(8.0,\x20'+'max(1.0,\x20m'+'ax(gamma.x'+',\x20max(gamm'+'a.y,\x20gamma'+'.z))));\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20stor'+'age\x20factor'+'\x0a\x20\x20\x20\x20var\x20v'+':\x20f32\x20=\x201.'+'0\x20-\x20((maxV'+'al\x20-\x201.0)\x20'+'/\x207.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20roun'+'d\x20the\x20valu'+'e\x20for\x20stor'+'age\x20in\x208bi'+'t\x20channel\x0a'+'\x20\x20\x20\x20v\x20=\x20ce'+'il(v\x20*\x20255'+'.0)\x20/\x20255.'+'0;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(gamma\x20/\x20('+'-v\x20*\x207.0\x20+'+'\x208.0),\x20v);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBE(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+('r\x20maxVal:\x20'+'f32\x20=\x20max('+'source.x,\x20'+'max(source'+'.y,\x20source'+'.z));\x0a\x20\x20\x20\x20'+'if\x20(maxVal'+'\x20<\x201e-32)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+':\x20f32\x20=\x20ce'+'il(log2(ma'+'xVal));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(s'+'ource\x20/\x20po'+'w(2.0,\x20e),'+'\x20(e\x20+\x20128.'+'0)\x20/\x20255.0'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a'),IM='\x0a\x20\x20\x20\x20var\x20f'+'inalRgb:\x20v'+'ec3f\x20=\x20com'+'bineColor('+'litArgs_al'+'bedo,\x20litA'+'rgs_sheen_'+'specularit'+'y,\x20litArgs'+'_clearcoat'+'_speculari'+'ty);\x0a\x0a\x20\x20\x20\x20'+'finalRgb\x20='+'\x20finalRgb\x20'+'+\x20litArgs_'+'emission;\x0a'+'\x20\x20\x20\x20finalR'+'gb\x20=\x20addFo'+'g(finalRgb'+');\x0a\x20\x20\x20\x20fin'+'alRgb\x20=\x20to'+'neMap(fina'+'lRgb);\x0a\x20\x20\x20'+'\x20finalRgb\x20'+'=\x20gammaCor'+'rectOutput'+'(finalRgb)'+';\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(fin'+'alRgb,\x20out'+'put.color.'+'a);\x0a',LM='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20atla'+'sSize\x20:\x20f3'+'2\x20=\x20512.0;'+'\x0aconst\x20sea'+'mSize\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0afn\x20mapU'+'v(uv\x20:\x20vec'+'2f,\x20rect\x20:'+'\x20vec4f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec2f(mix('+'rect.x\x20+\x20s'+'eamSize,\x20r'+'ect.x\x20+\x20re'+'ct.z\x20-\x20sea'+'mSize,\x20uv.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20mix(rect.'+'y\x20+\x20seamSi'+'ze,\x20rect.y'+'\x20+\x20rect.w\x20'+'-\x20seamSize'+',\x20uv.y));\x0a'+'}\x0a\x0a//\x20map\x20'+'a\x20normaliz'+'ed\x20equirec'+'t\x20UV\x20and\x20r'+'oughness\x20l'+'evel\x20to\x20th'+'e\x20correct\x20'+'atlas\x20rect'+'.\x0afn\x20mapRo'+'ughnessUv('+'uv\x20:\x20vec2f'+',\x20level\x20:\x20'+'f32)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20t\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'exp2(level'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mapUv('+'uv,\x20vec4f('+'0.0,\x201.0\x20-'+'\x20t,\x20t,\x20t\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20map\x20sh'+'iny\x20level\x20'+'UV\x0afn\x20mapS'+'hinyUv(uv\x20'+':\x20vec2f,\x20l'+'evel\x20:\x20f32'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20t\x20:\x20f32\x20='+'\x201.0\x20/\x20exp'+'2(level);\x0a'+'\x20\x20\x20\x20return'+'\x20mapUv(uv,'+'\x20vec4f(1.0'+'\x20-\x20t,\x201.0\x20'+'-\x20t,\x20t,\x20t\x20'+'*\x200.5));\x0a}'+'\x0a\x0a#endif\x0a',RM='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20skyboxInt'+'ensity\x20:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20proce'+'ssEnvironm'+'ent(color\x20'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20unifo'+'rm.skyboxI'+'ntensity;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',OM='\x0afn\x20getFal'+'loffWindow'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20sqrDist'+':\x20f32\x20=\x20do'+'t(lightDir'+',\x20lightDir'+');\x0a\x20\x20\x20\x20let'+'\x20invRadius'+':\x20f32\x20=\x201.'+'0\x20/\x20lightR'+'adius;\x0a\x20\x20\x20'+'\x20return\x20sq'+'uare(satur'+'ate(1.0\x20-\x20'+'square(sqr'+'Dist\x20*\x20squ'+'are(invRad'+'ius))));\x0a}'+'\x0a\x0afn\x20getFa'+'lloffInvSq'+'uared(ligh'+'tRadius:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20sq'+'rDist:\x20f32'+'\x20=\x20dot(lig'+'htDir,\x20lig'+'htDir);\x0a\x20\x20'+'\x20\x20var\x20fall'+'off:\x20f32\x20='+'\x201.0\x20/\x20(sq'+'rDist\x20+\x201.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20invRadiu'+'s:\x20f32\x20=\x201'+'.0\x20/\x20light'+'Radius;\x0a\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x20square('+'saturate(1'+'.0\x20-\x20squar'+'e(sqrDist\x20'+'*\x20square(i'+'nvRadius))'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20fall'+'off;\x0a}\x0a',FM='\x0afn\x20getFal'+'loffLinear'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20length(l'+'ightDir);\x0a'+'\x20\x20\x20\x20return'+'\x20max(((lig'+'htRadius\x20-'+'\x20d)\x20/\x20ligh'+'tRadius),\x20'+'0.0);\x0a}\x0a',NM='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x20re'+'presentati'+'on\x20(0.0-1.'+'0\x20range)\x0af'+'n\x20float2ui'+'nt(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20intBit'+'s\x20=\x20bitcas'+'t<u32>(val'+'ue);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20f32((intB'+'its\x20>>\x2024u'+')\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((intBi'+'ts\x20>>\x2016u)'+'\x20&\x200xffu),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((intBit'+'s\x20>>\x208u)\x20&'+'\x200xffu),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20f32'+'(intBits\x20&'+'\x200xffu)\x0a\x20\x20'+'\x20\x20)\x20/\x20255.'+'0;\x0a}\x0a\x0a//\x20d'+'ecode\x20RGBA'+'8\x20value\x20to'+'\x20float\x0afn\x20'+'uint2float'+'(value:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20rgba_u32'+'\x20=\x20vec4<u3'+'2>(value\x20*'+'\x20255.0);\x0a\x20'+'\x20\x20\x20let\x20int'+'Bits:\x20u32\x20'+'=\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'r\x20<<\x2024u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'g\x20<<\x2016u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'b\x20<<\x208u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20rgba_u32.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20bitcas'+'t<f32>(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0af'+'n\x20float2ve'+'c4(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CAPS_TEX'+'TURE_FLOAT'+'_RENDERABL'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(value,'+'\x201.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20float2ui'+'nt(value);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0a#endi'+'f\x20//\x20FLOAT'+'_AS_UINT\x0a',kM='\x0a\x0avar<priv'+'ate>\x20dBlen'+'dModeFogFa'+'ctor\x20:\x20f32'+'\x20=\x201.0;\x0a\x0a#'+'if\x20(FOG\x20!='+'\x20NONE)\x0a\x20\x20\x20'+'\x20uniform\x20f'+'og_color\x20:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20fog_sta'+'rt\x20:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20fog_'+'end\x20:\x20f32;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20fog'+'_density\x20:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afn\x20ge'+'tFogFactor'+'()\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20depth\x20=\x20p'+'cPosition.'+'z\x20/\x20pcPosi'+'tion.w;\x0a\x0a\x20'+'\x20\x20\x20var\x20fog'+'Factor\x20:\x20f'+'32\x20=\x200.0;\x0a'+'\x0a\x20\x20\x20\x20#if\x20('+'FOG\x20==\x20LIN'+'EAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20(unif'+'orm.fog_en'+'d\x20-\x20depth)'+'\x20/\x20(unifor'+'m.fog_end\x20'+'-\x20uniform.'+'fog_start)'+';\x0a\x20\x20\x20\x20#eli'+'f\x20(FOG\x20==\x20'+'EXP)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20exp(-'+'depth\x20*\x20un'+'iform.fog_'+'density);\x0a'+'\x20\x20\x20\x20#elif\x20'+'(FOG\x20==\x20EX'+'P2)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fogFacto'+'r\x20=\x20exp(-d'+'epth\x20*\x20dep'+'th\x20*\x20unifo'+'rm.fog_den'+'sity\x20*\x20uni'+'form.fog_d'+'ensity);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(fo'+'gFactor,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0afn\x20addF'+'og(color\x20:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'uniform.fo'+'g_color\x20*\x20'+'dBlendMode'+'FogFactor,'+'\x20color,\x20ge'+'tFogFactor'+'());\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'color;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',UM='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0afn'+'\x20getFresne'+'l(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20cosTheta:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y:\x20f32\x0a\x20\x20\x20'+'\x20#endif\x0a)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20f'+'resnel:\x20f3'+'2\x20=\x20pow(1.'+'0\x20-\x20satura'+'te(cosThet'+'a),\x205.0);\x0a'+'\x20\x20\x20\x20let\x20gl'+'ossSq:\x20f32'+'\x20=\x20gloss\x20*'+'\x20gloss;\x0a\x20\x20'+'\x20\x20let\x20ret:'+'\x20vec3f\x20=\x20s'+'pecularity'+'\x20+\x20(max(ve'+'c3f(glossS'+'q),\x20specul'+'arity)\x20-\x20s'+'pecularity'+')\x20*\x20fresne'+'l;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20mix(ret,'+'\x20iridescen'+'ceFresnel,'+'\x20iridescen'+'ceIntensit'+'y);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20r'+'et;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0afn'+'\x20getFresne'+'lCC(cosThe'+'ta:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20fres'+'nel:\x20f32\x20='+'\x20pow(1.0\x20-'+'\x20saturate('+'cosTheta),'+'\x205.0);\x0a\x20\x20\x20'+'\x20return\x200.'+'04\x20+\x20(1.0\x20'+'-\x200.04)\x20*\x20'+'fresnel;\x0a}',BM='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x0avary'+'ing\x20vUv0:\x20'+'vec2f;\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4f(inpu'+'t.vertex_p'+'osition,\x200'+'.5,\x201.0);\x0a'+'\x20\x20\x20\x20output'+'.vUv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x20vec2f(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',zM='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInput(c'+'olor:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGammaFloa'+'t(color);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20fn\x20gammaC'+'orrectInpu'+'tVec3(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20deco'+'deGamma3(c'+'olor);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInputVe'+'c4(color:\x20'+'vec4f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(d'+'ecodeGamma'+'3(color.xy'+'z),\x20color.'+'w);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Output(col'+'or:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20pow'+'(color\x20+\x200'+'.0000001,\x20'+'vec3f(1.0\x20'+'/\x202.2));\x0a\x20'+'\x20\x20\x20}\x0a\x0a#els'+'e\x20//\x20NONE\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Input(colo'+'r:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20gammaCo'+'rrectInput'+'Vec3(color'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20gamm'+'aCorrectIn'+'putVec4(co'+'lor:\x20vec4f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20g'+'ammaCorrec'+'tOutput(co'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a',VM='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_gl'+'oss:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getGlossi'+'ness()\x20{\x0a\x20'+'\x20\x20\x20dGlossi'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_GL'+'OSS_CONSTA'+'NT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20unifo'+'rm.materia'+'l_gloss;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_GLOS'+'S_TEXTURE\x0a'+'\x20\x20\x20\x20dGloss'+'iness\x20=\x20dG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_GLOSS'+'_TEXTURE_N'+'AME},\x20{STD'+'_GLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_GLOSS_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_GLOSS_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_I'+'NVERT\x0a\x20\x20\x20\x20'+'dGlossines'+'s\x20=\x201.0\x20-\x20'+'dGlossines'+'s;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20d'+'Glossiness'+'\x20=\x20dGlossi'+'ness\x20+\x200.0'+'000001;\x0a}\x0a',GM='\x0auniform\x20m'+'atrix_mode'+'l:\x20mat4x4f'+';\x0auniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0auniform\x20'+'matrix_pro'+'jection:\x20m'+'at4x4f;\x0a\x0a/'+'/\x20project\x20'+'the\x20model\x20'+'space\x20gaus'+'sian\x20cente'+'r\x20to\x20view\x20'+'and\x20clip\x20s'+'pace\x0afn\x20in'+'itCenter(m'+'odelCenter'+':\x20vec3f,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>)\x20->\x20bo'+'ol\x20{\x0a\x20\x20\x20\x20l'+'et\x20modelVi'+'ew:\x20mat4x4'+'f\x20=\x20unifor'+'m.matrix_v'+'iew\x20*\x20unif'+'orm.matrix'+'_model;\x0a\x20\x20'+'\x20\x20let\x20cent'+'erView:\x20ve'+'c4f\x20=\x20mode'+'lView\x20*\x20ve'+'c4f(modelC'+'enter,\x201.0'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20if\x20splat\x20'+'is\x20behind\x20'+'the\x20camera'+'\x0a\x20\x20\x20\x20if\x20(c'+'enterView.'+'z\x20>\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20ce'+'nterProj:\x20'+'vec4f\x20=\x20un'+'iform.matr'+'ix_project'+'ion\x20*\x20cent'+'erView;\x0a\x0a\x20'+'\x20\x20\x20//\x20ensu'+'re\x20gaussia'+'ns\x20are\x20not'+'\x20clipped\x20b'+'y\x20camera\x20n'+'ear\x20and\x20fa'+'r\x0a\x20\x20\x20\x20cent'+'erProj.z\x20='+'\x20clamp(cen'+'terProj.z,'+'\x200.0,\x20abs('+'centerProj'+'.w));\x0a\x0a\x20\x20\x20'+'\x20center.vi'+'ew\x20=\x20cente'+'rView.xyz\x20'+'/\x20centerVi'+'ew.w;\x0a\x20\x20\x20\x20'+'center.pro'+'j\x20=\x20center'+'Proj;\x0a\x20\x20\x20\x20'+'center.pro'+'jMat00\x20=\x20u'+'niform.mat'+'rix_projec'+'tion[0][0]'+';\x0a\x20\x20\x20\x20cent'+'er.modelVi'+'ew\x20=\x20model'+'View;\x0a\x20\x20\x20\x20'+'return\x20tru'+'e;\x0a}\x0a',HM='\x0a\x0avar\x20spla'+'tColor:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20r'+'eadColor(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20tex'+'tureLoad(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a}\x0a',WM='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20order:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20id:\x20u3'+'2,\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'uv:\x20vec2<i'+'32>,\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20corn'+'erUV:\x20vec2'+'f,\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a}\x0a\x0a'+'//\x20stores\x20'+'the\x20camera'+'\x20and\x20clip\x20'+'space\x20posi'+'tion\x20of\x20th'+'e\x20gaussian'+'\x20center\x0ast'+'ruct\x20Splat'+'Center\x20{\x0a\x20'+'\x20\x20\x20view:\x20v'+'ec3f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20vi'+'ew\x20space\x0a\x20'+'\x20\x20\x20proj:\x20v'+'ec4f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20cl'+'ip\x20space\x0a\x20'+'\x20\x20\x20modelVi'+'ew:\x20mat4x4'+'f,\x20\x20\x20//\x20mo'+'del-view\x20m'+'atrix\x0a\x20\x20\x20\x20'+'projMat00:'+'\x20f32,\x20\x20\x20\x20\x20'+'\x20\x20//\x20eleme'+'mt\x20[0][0]\x20'+'of\x20the\x20pro'+'jection\x20ma'+'trix\x0a}\x0a\x0a//'+'\x20stores\x20th'+'e\x20offset\x20f'+'rom\x20center'+'\x20for\x20the\x20c'+'urrent\x20gau'+'ssian\x0astru'+'ct\x20SplatCo'+'rner\x20{\x0a\x20\x20\x20'+'\x20offset:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20corn'+'er\x20offset\x20'+'from\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'uv:\x20vec2f,'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20aaFactor:'+'\x20f32,\x20//\x20f'+'or\x20scenes\x20'+'generated\x20'+'with\x20antia'+'liasing\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0a#include'+'\x20\x22gsplatEv'+'alSHVS\x22\x0a#i'+'nclude\x20\x22gs'+'platQuatTo'+'Mat3VS\x22\x0a\x0a#'+'if\x20GSPLAT_'+'COMPRESSED'+'_DATA\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatComp'+'ressedData'+'VS\x22\x0a\x20\x20\x20\x20#i'+('f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsDataVS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tSogsColor'+'VS\x22\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsSHVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#else\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatData'+'VS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22gs'+'platColorV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0afn\x20'+'clipCorner'+'(corner:\x20p'+'tr<functio'+'n,\x20SplatCo'+'rner>,\x20alp'+'ha:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'lip:\x20f32\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20(255'+'.0\x20*\x20alpha'+')))\x20/\x202.0)'+';\x0a\x20\x20\x20\x20corn'+'er.offset\x20'+'=\x20corner.o'+'ffset\x20*\x20cl'+'ip;\x0a\x20\x20\x20\x20co'+'rner.uv\x20=\x20'+'corner.uv\x20'+'*\x20clip;\x0a}\x0a'+'\x0a'),$M='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0avar'+'\x20chunkText'+'ure:\x20textu'+'re_2d<f32>'+';\x0a\x0a//\x20work'+'\x20values\x0ava'+'r<private>'+'\x20chunkData'+'A:\x20vec4f;\x20'+'\x20\x20\x20//\x20x:\x20m'+'in_x,\x20y:\x20m'+'in_y,\x20z:\x20m'+'in_z,\x20w:\x20m'+'ax_x\x0avar<p'+'rivate>\x20ch'+'unkDataB:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20max_'+'y,\x20y:\x20max_'+'z,\x20z:\x20scal'+'e_min_x,\x20w'+':\x20scale_mi'+'n_y\x0avar<pr'+'ivate>\x20chu'+'nkDataC:\x20v'+'ec4f;\x20\x20\x20\x20/'+'/\x20x:\x20scale'+'_min_z,\x20y:'+'\x20scale_max'+'_x,\x20z:\x20sca'+'le_max_y,\x20'+'w:\x20scale_m'+'ax_z\x0avar<p'+'rivate>\x20ch'+'unkDataD:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20min_'+'r,\x20y:\x20min_'+'g,\x20z:\x20min_'+'b,\x20w:\x20max_'+'r\x0avar<priv'+'ate>\x20chunk'+'DataE:\x20vec'+'4f;\x20\x20\x20\x20//\x20'+'x:\x20max_g,\x20'+'y:\x20max_b,\x20'+'z:\x20unused,'+'\x20w:\x20unused'+'\x0avar<priva'+'te>\x20packed'+'Data:\x20vec4'+'u;\x20\x20\x20\x20//\x20x'+':\x20position'+'\x20bits,\x20y:\x20'+'rotation\x20b'+'its,\x20z:\x20sc'+'ale\x20bits,\x20'+'w:\x20color\x20b'+'its\x0a\x0afn\x20un'+'pack111011'+'(bits:\x20u32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(vec3f'+'((vec3<u32'+'>(bits)\x20>>'+'\x20vec3<u32>'+'(21u,\x2011u,'+'\x200u))\x20&\x20ve'+'c3<u32>(0x'+'7ffu,\x200x3f'+'fu,\x200x7ffu'+')))\x20/\x20vec3'+'f(2047.0,\x20'+'1023.0,\x2020'+'47.0);\x0a}\x0a\x0a'+'fn\x20unpack8'+'888(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20f32((bit'+'s\x20>>\x2024u)\x20'+'&\x200xffu),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((bits\x20>>'+'\x2016u)\x20&\x200x'+'ffu),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20f32((b'+'its\x20>>\x208u)'+'\x20\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(bits\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20&\x200'+'xffu)\x0a\x20\x20\x20\x20'+')\x20/\x20255.0;'+('\x0a}\x0a\x0aconst\x20'+'norm_const'+':\x20f32\x20=\x201.'+'0\x20/\x20(sqrt('+'2.0)\x20*\x200.5'+');\x0a\x0afn\x20unp'+'ackRotatio'+'n(bits:\x20u3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x20(f32'+'((bits\x20>>\x20'+'20u)\x20&\x200x3'+'ffu)\x20/\x20102'+'3.0\x20-\x200.5)'+'\x20*\x20norm_co'+'nst;\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20(f3'+'2((bits\x20>>'+'\x2010u)\x20&\x200x'+'3ffu)\x20/\x2010'+'23.0\x20-\x200.5'+')\x20*\x20norm_c'+'onst;\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20(f'+'32(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+'_const;\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'sqrt(1.0\x20-'+'\x20(a\x20*\x20a\x20+\x20'+'b\x20*\x20b\x20+\x20c\x20'+'*\x20c));\x0a\x0a\x20\x20'+'\x20\x20let\x20mode'+'\x20=\x20bits\x20>>'+'\x2030u;\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x200u)\x20{\x20re'+'turn\x20vec4f'+'(m,\x20a,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20m,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x202u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20b,\x20m,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(a,\x20b,\x20c'+',\x20m);\x0a}\x0a\x0a/'+'/\x20read\x20cen'+'ter\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex_siz'+'e_u\x20=\x20text'+'ureDimensi'+'ons(chunkT'+'exture,\x200)'+';\x0a\x20\x20\x20\x20let\x20'+'w:\x20u32\x20=\x20t'+'ex_size_u.'+'x\x20/\x205u;\x0a\x20\x20'+'\x20\x20let\x20chun'+'kId:\x20u32\x20='+'\x20source.id'+'\x20/\x20256u;\x0a\x20'+'\x20\x20\x20let\x20chu'+'nkUV:\x20vec2'+'<i32>\x20=\x20ve'+'c2<i32>(i3'+'2((chunkId'+'\x20%\x20w)\x20*\x205u'+'),\x20i32(chu'+'nkId\x20/\x20w))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'read\x20chunk'+'\x20and\x20packe'+'d\x20compress'+'ed\x20data\x0a\x20\x20'+'\x20\x20chunkDat'+'aA\x20=\x20textu'+'reLoad(chu'+'nkTexture,'+'\x20chunkUV\x20+'+'\x20vec2<i32>'+'(0,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataB\x20=\x20t'+'extureLoad')+('(chunkText'+'ure,\x20chunk'+'UV\x20+\x20vec2<'+'i32>(1,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataC'+'\x20=\x20texture'+'Load(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20v'+'ec2<i32>(2'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataD\x20=\x20tex'+'tureLoad(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20vec2<i3'+'2>(3,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataE\x20='+'\x20textureLo'+'ad(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20vec'+'2<i32>(4,\x20'+'0),\x200);\x0a\x20\x20'+'\x20\x20packedDa'+'ta\x20=\x20textu'+'reLoad(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(chunkDa'+'taA.xyz,\x20v'+'ec3f(chunk'+'DataA.w,\x20c'+'hunkDataB.'+'xy),\x20unpac'+'k111011(pa'+'ckedData.x'+'));\x0a}\x0a\x0afn\x20'+'readColor('+'source:\x20pt'+'r<function'+',\x20SplatSou'+'rce>)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20let\x20r\x20=\x20u'+'npack8888('+'packedData'+'.w);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(mix(chun'+'kDataD.xyz'+',\x20vec3f(ch'+'unkDataD.w'+',\x20chunkDat'+'aE.xy),\x20r.'+'rgb),\x20r.w)'+';\x0a}\x0a\x0afn\x20ge'+'tRotation('+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20unpack'+'Rotation(p'+'ackedData.'+'y);\x0a}\x0a\x0afn\x20'+'getScale()'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20exp(mix'+'(vec3f(chu'+'nkDataB.zw'+',\x20chunkDat'+'aC.x),\x20chu'+'nkDataC.yz'+'w,\x20unpack1'+'11011(pack'+'edData.z))'+');\x0a}\x0a\x0a//\x20g'+'iven\x20a\x20rot'+'ation\x20matr'+'ix\x20and\x20sca'+'le\x20vector,'+'\x20compute\x203'+'d\x20covarian'+'ce\x20A\x20and\x20B'+'\x0afn\x20readCo'+'variance(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>,\x20covA_'+'ptr:\x20ptr<f'+'unction,\x20v'+'ec3f>,\x20cov'+'B_ptr:\x20ptr'+'<function,')+('\x20vec3f>)\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'ot\x20=\x20quatT'+'oMat3(getR'+'otation())'+';\x0a\x20\x20\x20\x20let\x20'+'scale\x20=\x20ge'+'tScale();\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20let\x20M\x20=\x20'+'transpose('+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.x\x20*\x20rot'+'[0],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.y'+'\x20*\x20rot[1],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.z\x20*\x20r'+'ot[2]\x0a\x20\x20\x20\x20'+'));\x0a\x0a\x20\x20\x20\x20*'+'covA_ptr\x20='+'\x20vec3f(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20*covB_p'+'tr\x20=\x20vec3f'+'(dot(M[1],'+'\x20M[1]),\x20do'+'t(M[1],\x20M['+'2]),\x20dot(M'+'[2],\x20M[2])'+');\x0a}\x0a'),XM='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0av'+'ar\x20shTextu'+'re0:\x20textu'+'re_2d<u32>'+';\x0avar\x20shTe'+'xture1:\x20te'+'xture_2d<u'+'32>;\x0avar\x20s'+'hTexture2:'+'\x20texture_2'+'d<u32>;\x0a\x0af'+'n\x20unpack88'+'88s(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20unpack'+'ed_u\x20=\x20(ve'+'c4<u32>(bi'+'ts)\x20>>\x20vec'+'4<u32>(0u,'+'\x208u,\x2016u,\x20'+'24u))\x20&\x20ve'+'c4<u32>(0x'+'ffu);\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(unpacke'+'d_u)\x20*\x20(8.'+'0\x20/\x20255.0)'+'\x20-\x204.0;\x0a}\x0a'+'\x0afn\x20readSH'+'Data(sourc'+'e:\x20ptr<fun'+'ction,\x20Spl'+'atSource>,'+'\x20sh:\x20ptr<f'+'unction,\x20a'+'rray<vec3f'+',\x2015>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20read\x20t'+'he\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20let\x20shD'+'ata0:\x20vec4'+'<u32>\x20=\x20te'+'xtureLoad('+'shTexture0'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20let\x20shDat'+'a1:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(sh'+'Texture1,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20shData2'+':\x20vec4<u32'+'>\x20=\x20textur'+'eLoad(shTe'+'xture2,\x20so'+'urce.uv,\x200'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20r0\x20=\x20unp'+'ack8888s(s'+'hData0.x);'+'\x0a\x20\x20\x20\x20let\x20r'+'1\x20=\x20unpack'+'8888s(shDa'+'ta0.y);\x0a\x20\x20'+'\x20\x20let\x20r2\x20='+'\x20unpack888'+'8s(shData0'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20r3\x20=\x20un'+'pack8888s('+'shData0.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20g0\x20=\x20unpa'+'ck8888s(sh'+'Data1.x);\x0a'+'\x20\x20\x20\x20let\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20let\x20g2\x20=\x20'+'unpack8888'+'s(shData1.'+'z);\x0a\x20\x20\x20\x20le'+'t\x20g3\x20=\x20unp'+'ack8888s(s'+'hData1.w);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'b0\x20=\x20unpac'+'k8888s(shD'+'ata2.x);\x0a\x20'+'\x20\x20\x20let\x20b1\x20'+('=\x20unpack88'+'88s(shData'+'2.y);\x0a\x20\x20\x20\x20'+'let\x20b2\x20=\x20u'+'npack8888s'+'(shData2.z'+');\x0a\x20\x20\x20\x20let'+'\x20b3\x20=\x20unpa'+'ck8888s(sh'+'Data2.w);\x0a'+'\x0a\x20\x20\x20\x20sh[0]'+'\x20=\x20\x20vec3f('+'r0.x,\x20g0.x'+',\x20b0.x);\x0a\x20'+'\x20\x20\x20sh[1]\x20='+'\x20\x20vec3f(r0'+'.y,\x20g0.y,\x20'+'b0.y);\x0a\x20\x20\x20'+'\x20sh[2]\x20=\x20\x20'+'vec3f(r0.z'+',\x20g0.z,\x20b0'+'.z);\x0a\x20\x20\x20\x20s'+'h[3]\x20=\x20\x20ve'+'c3f(r0.w,\x20'+'g0.w,\x20b0.w'+');\x0a\x20\x20\x20\x20sh['+'4]\x20=\x20\x20vec3'+'f(r1.x,\x20g1'+'.x,\x20b1.x);'+'\x0a\x20\x20\x20\x20sh[5]'+'\x20=\x20\x20vec3f('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3f(r1'+'.z,\x20g1.z,\x20'+'b1.z);\x0a\x20\x20\x20'+'\x20sh[7]\x20=\x20\x20'+'vec3f(r1.w'+',\x20g1.w,\x20b1'+'.w);\x0a\x20\x20\x20\x20s'+'h[8]\x20=\x20\x20ve'+'c3f(r2.x,\x20'+'g2.x,\x20b2.x'+');\x0a\x20\x20\x20\x20sh['+'9]\x20=\x20\x20vec3'+'f(r2.y,\x20g2'+'.y,\x20b2.y);'+'\x0a\x20\x20\x20\x20sh[10'+']\x20=\x20vec3f('+'r2.z,\x20g2.z'+',\x20b2.z);\x0a\x20'+'\x20\x20\x20sh[11]\x20'+'=\x20vec3f(r2'+'.w,\x20g2.w,\x20'+'b2.w);\x0a\x20\x20\x20'+'\x20sh[12]\x20=\x20'+'vec3f(r3.x'+',\x20g3.x,\x20b3'+'.x);\x0a\x20\x20\x20\x20s'+'h[13]\x20=\x20ve'+'c3f(r3.y,\x20'+'g3.y,\x20b3.y'+');\x0a\x20\x20\x20\x20sh['+'14]\x20=\x20vec3'+'f(r3.z,\x20g3'+'.z,\x20b3.z);'+'\x0a\x0a\x20\x20\x20\x20*sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),qM='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'COEFFS:\x20i3'+'2\x20=\x203;\x0a\x20\x20\x20'+'\x20#elif\x20SH_'+'BANDS\x20==\x202'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20SH_CO'+'EFFS:\x20i32\x20'+'=\x208;\x0a\x20\x20\x20\x20#'+'elif\x20SH_BA'+'NDS\x20==\x203\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20con'+'st\x20SH_COEF'+'FS:\x20i32\x20=\x20'+'15;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20const\x20SH'+'_COEFFS:\x20i'+'32\x20=\x200;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20SH'+'_BANDS\x20>\x200'+'\x0a\x0a\x20\x20\x20\x20cons'+'t\x20SH_C1:\x20f'+'32\x20=\x200.488'+'6025119029'+'199;\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x201\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20const'+'\x20SH_C2_0:\x20'+'f32\x20=\x201.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_1:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_2:\x20f'+'32\x20=\x200.315'+'3915652525'+'2005;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_3:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_4:\x20f'+'32\x20=\x200.546'+'2742152960'+'396;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SH_BA'+'NDS\x20>\x202\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_0:'+'\x20f32\x20=\x20-0.'+'5900435899'+'266435;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_1:'+'\x20f32\x20=\x202.8'+'9061144264'+'0554;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_2:\x20f'+'32\x20=\x20-0.45'+'7045799464'+'4658;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_3:\x20f'+'32\x20=\x200.373'+'1763325901'+'154;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_4:\x20f3'+'2\x20=\x20-0.457'+'0457994644'+'658;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_5:\x20f3'+'2\x20=\x201.4453'+'0572132027'+'7;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'C3_6:\x20f32\x20'+'=\x20-0.59004'+'3589926643'+'5;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20see\x20http'+'s://github'+'.com/graph'+'deco-inria'+('/gaussian-'+'splatting/'+'blob/main/'+'utils/sh_u'+'tils.py\x0a\x20\x20'+'\x20\x20fn\x20evalS'+'H(sh:\x20ptr<'+'function,\x20'+'array<vec3'+'f,\x20SH_COEF'+'FS>>,\x20dir:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x\x20=\x20dir.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20y\x20=\x20di'+'r.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20z\x20='+'\x20dir.z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'1st\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20result\x20'+'=\x20SH_C1\x20*\x20'+'(-sh[0]\x20*\x20'+'y\x20+\x20sh[1]\x20'+'*\x20z\x20-\x20sh[2'+']\x20*\x20x);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x201\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x202'+'nd\x20degree\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xx\x20='+'\x20x\x20*\x20x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20yy\x20=\x20y'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20zz\x20=\x20z\x20*'+'\x20z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20yz'+'\x20=\x20y\x20*\x20z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xz\x20='+'\x20x\x20*\x20z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'result\x20+\x20('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'3]\x20*\x20(SH_C'+'2_0\x20*\x20xy)\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[4]\x20*\x20(SH_'+'C2_1\x20*\x20yz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[5]\x20*\x20(SH'+'_C2_2\x20*\x20(2'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[6]\x20*\x20(SH_'+'C2_3\x20*\x20xz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[7]\x20*\x20(SH'+'_C2_4\x20*\x20(x'+'x\x20-\x20yy))\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'=\x20result\x20+'+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20re'+'sult;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20#end'+'if\x0a'),jM='\x0afn\x20quatTo'+'Mat3(R:\x20ve'+'c4<f32>)\x20-'+'>\x20mat3x3<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'let\x20R2:\x20ve'+'c4<f32>\x20=\x20'+'R\x20+\x20R;\x0a\x20\x20\x20'+'\x20let\x20X:\x20f3'+'2\x20\x20\x20\x20\x20\x20\x20=\x20'+'R2.x\x20*\x20R.w'+';\x0a\x20\x20\x20\x20let\x20'+'Y:\x20vec4<f3'+'2>\x20=\x20R2.y\x20'+'*\x20R;\x0a\x20\x20\x20\x20l'+'et\x20Z:\x20vec4'+'<f32>\x20=\x20R2'+'.z\x20*\x20R;\x0a\x20\x20'+'\x20\x20let\x20W:\x20f'+'32\x20\x20\x20\x20\x20\x20\x20='+'\x20R2.w\x20*\x20R.'+'w;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20mat3x'+'3<f32>(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Z.z\x20-\x20W,'+'\x20\x20Y.z\x20+\x20X,'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.z\x20-'+'\x20X,\x20\x20\x20\x20\x20\x20\x20'+'\x201.0\x20-\x20Y.y'+'\x20-\x20W,\x20Z.w\x20'+'+\x20Y.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.w\x20+'+'\x20Z.x,\x20\x20\x20\x20\x20'+'\x20Z.w\x20-\x20Y.x'+',\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',YM='\x0avar\x20sh0:\x20'+'texture_2d'+'<f32>;\x0a\x0aun'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0auniform'+'\x20sh0_maxs:'+'\x20vec4f;\x0a\x0ac'+'onst\x20SH_C0'+':\x20f32\x20=\x200.'+'2820947917'+'7387814;\x0a\x0a'+'fn\x20readCol'+'or(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20let\x20cl'+'r:\x20vec4f\x20='+'\x20mix(unifo'+'rm.sh0_min'+'s,\x20uniform'+'.sh0_maxs,'+'\x20textureLo'+'ad(sh0,\x20so'+'urce.uv,\x200'+'));\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(vec3f(0.5'+')\x20+\x20clr.xy'+'z\x20*\x20SH_C0,'+'\x201.0\x20/\x20(1.'+'0\x20+\x20exp(-c'+'lr.w)));\x0a}'+'\x0a',KM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0a\x0aun'+'iform\x20mean'+'s_mins:\x20ve'+'c3f;\x0aunifo'+'rm\x20means_m'+'axs:\x20vec3f'+';\x0a\x0auniform'+'\x20scales_mi'+'ns:\x20vec3f;'+'\x0auniform\x20s'+'cales_maxs'+':\x20vec3f;\x0a\x0a'+'fn\x20unpackU'+'32(u:\x20u32)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20vec4f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((u\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((u\x20>>\x201'+'6u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((u\x20>>\x20'+'8u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(u\x20&\x200x'+'FFu)\x20/\x20255'+'.0\x0a\x20\x20\x20\x20);\x0a'+'}\x0a\x0avar<pri'+'vate>\x20pack'+'edSample:\x20'+'vec4<u32>;'+'\x0a\x0a//\x20read\x20'+'the\x20model-'+'space\x20cent'+'er\x20of\x20the\x20'+'gaussian\x0af'+'n\x20readCent'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec3f\x20{\x0a'+'\x0a\x20\x20\x20\x20packe'+'dSample\x20=\x20'+'textureLoa'+'d(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20l:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.x).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20u:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20n:\x20vec3f\x20'+'=\x20(l\x20*\x20255'+'.0\x20+\x20u\x20*\x202'+'55.0\x20*\x20256'+'.0)\x20/\x206553'+'5.0;\x0a\x20\x20\x20\x20l'+'et\x20v:\x20vec3'+'f\x20=\x20mix(un'+'iform.mean'+'s_mins,\x20un'+'iform.mean'+'s_maxs,\x20n)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20sign(v'+')\x20*\x20(exp(a'+'bs(v))\x20-\x201'+'.0);\x0a}\x0a\x0aco'+'nst\x20norm:\x20'+'f32\x20=\x202.0\x20'+'/\x20sqrt(2.0'+');\x0a\x0a//\x20sam'+'ple\x20covari'+'ance\x20vecto'+'rs\x0afn\x20read'+'Covariance'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>,\x20cov'+'A_ptr:\x20ptr'+'<function,'+'\x20vec3f>,\x20c'+('ovB_ptr:\x20p'+'tr<functio'+'n,\x20vec3f>)'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20qdata:\x20ve'+'c4f\x20=\x20unpa'+'ckU32(pack'+'edSample.z'+');\x0a\x20\x20\x20\x20let'+'\x20sdata:\x20ve'+'c3f\x20=\x20unpa'+'ckU32(pack'+'edSample.w'+').xyz;\x0a\x0a\x20\x20'+'\x20\x20let\x20abc:'+'\x20vec3f\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(abc,'+'\x20abc)));\x0a\x0a'+'\x20\x20\x20\x20let\x20mo'+'de:\x20u32\x20=\x20'+'u32(qdata.'+'w\x20*\x20255.0\x20'+'+\x200.5)\x20-\x202'+'52u;\x0a\x0a\x20\x20\x20\x20'+'var\x20quat:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20if\x20(mode\x20'+'==\x200u)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20qua'+'t\x20=\x20vec4f('+'d,\x20abc);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20quat'+'\x20=\x20vec4f(a'+'bc.x,\x20d,\x20a'+'bc.y,\x20abc.'+'z);\x0a\x20\x20\x20\x20}\x20'+'else\x20if\x20(m'+'ode\x20==\x202u)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20quat\x20=\x20ve'+'c4f(abc.x,'+'\x20abc.y,\x20d,'+'\x20abc.z);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'quat\x20=\x20vec'+'4f(abc.x,\x20'+'abc.y,\x20abc'+'.z,\x20d);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x0a\x20\x20\x20\x20'+'let\x20rot:\x20m'+'at3x3f\x20=\x20q'+'uatToMat3('+'quat);\x0a\x20\x20\x20'+'\x20let\x20scale'+':\x20vec3f\x20=\x20'+'exp(mix(un'+'iform.scal'+'es_mins,\x20u'+'niform.sca'+'les_maxs,\x20'+'sdata));\x0a\x0a'+'\x20\x20\x20\x20//\x20M\x20='+'\x20S\x20*\x20R\x0a\x20\x20\x20'+'\x20let\x20M:\x20ma'+'t3x3f\x20=\x20tr'+'anspose(ma'+'t3x3f(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20*co'+'vA_ptr\x20=\x20v'+'ec3f(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20*covB_ptr'+'\x20=\x20vec3f(d'+'ot(M[1],\x20M'+'[1]),\x20dot('+'M[1],\x20M[2]'+'),\x20dot(M[2'+'],\x20M[2]));')+'\x0a}\x0a',ZM='\x0avar\x20sh_ce'+'ntroids:\x20t'+'exture_2d<'+'f32>;\x0a\x0auni'+'form\x20shN_m'+'ins:\x20f32;\x0a'+'uniform\x20sh'+'N_maxs:\x20f3'+'2;\x0a\x0afn\x20rea'+'dSHData(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>,\x20sh:\x20pt'+'r<function'+',\x20array<ve'+'c3f,\x20SH_CO'+'EFFS>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'let\x20t:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'32(packedS'+'ample.x\x20&\x20'+'255u),\x20i32'+'(packedSam'+'ple.y\x20&\x2025'+'5u));\x0a\x20\x20\x20\x20'+'let\x20n:\x20i32'+'\x20=\x20t.x\x20+\x20t'+'.y\x20*\x20256;\x0a'+'\x20\x20\x20\x20let\x20u:'+'\x20i32\x20=\x20(n\x20'+'%\x2064)\x20*\x20SH'+'_COEFFS;\x0a\x20'+'\x20\x20\x20let\x20v:\x20'+'i32\x20=\x20n\x20/\x20'+'64;\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20offset\x20i'+'nto\x20the\x20ce'+'ntroids\x20te'+'xture\x20and\x20'+'read\x20conse'+'cutive\x20tex'+'els\x0a\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'i32\x20=\x200;\x20i'+'\x20<\x20SH_COEF'+'FS;\x20i\x20=\x20i\x20'+'+\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[i]'+'\x20=\x20mix(vec'+'3f(uniform'+'.shN_mins)'+',\x20vec3f(un'+'iform.shN_'+'maxs),\x20tex'+'tureLoad(s'+'h_centroid'+'s,\x20vec2<i3'+'2>(u\x20+\x20i,\x20'+'v),\x200).xyz'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20*scale'+'\x20=\x201.0;\x0a}\x0a',QM='\x0auniform\x20v'+'iewport:\x20v'+'ec2f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20view'+'port\x20dimen'+'sions\x0aunif'+'orm\x20camera'+'_params:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201\x20/\x20far,\x20'+'far,\x20near,'+'\x20isOrtho\x0a\x0a'+'//\x20calcula'+'te\x20the\x20cli'+'p-space\x20of'+'fset\x20from\x20'+'the\x20center'+'\x20for\x20this\x20'+'gaussian\x0af'+'n\x20initCorn'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>,\x20corne'+'r:\x20ptr<fun'+'ction,\x20Spl'+'atCorner>)'+'\x20->\x20bool\x20{'+'\x0a\x20\x20\x20\x20//\x20ge'+'t\x20covarian'+'ce\x0a\x20\x20\x20\x20var'+'\x20covA:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20covB:\x20ve'+'c3f;\x0a\x20\x20\x20\x20r'+'eadCovaria'+'nce(source'+',\x20&covA,\x20&'+'covB);\x0a\x0a\x20\x20'+'\x20\x20let\x20Vrk\x20'+'=\x20mat3x3f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(covA.'+'x,\x20covA.y,'+'\x20covA.z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(covA.y'+',\x20covB.x,\x20'+'covB.y),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(covA.z,'+'\x20covB.y,\x20c'+'ovB.z)\x0a\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20l'+'et\x20focal\x20='+'\x20uniform.v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20let\x20v'+'\x20=\x20select('+'center.vie'+'w.xyz,\x20vec'+'3f(0.0,\x200.'+'0,\x201.0),\x20u'+'niform.cam'+'era_params'+'.w\x20==\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'J1\x20=\x20focal'+'\x20/\x20v.z;\x0a\x20\x20'+'\x20\x20let\x20J2\x20='+'\x20-J1\x20/\x20v.z'+'\x20*\x20v.xy;\x0a\x20'+'\x20\x20\x20let\x20J\x20='+'\x20mat3x3f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(J1,\x200.'+'0,\x20J2.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x20J'+'1,\x20J2.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x200'+'.0,\x200.0)\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20W\x20=\x20t'+'ranspose(m'+'at3x3f(cen'+'ter.modelV'+'iew[0].xyz'+',\x20center.m'+'odelView[1'+'].xyz,\x20cen'+('ter.modelV'+'iew[2].xyz'+'));\x0a\x20\x20\x20\x20le'+'t\x20T\x20=\x20W\x20*\x20'+'J;\x0a\x20\x20\x20\x20let'+'\x20cov\x20=\x20tra'+'nspose(T)\x20'+'*\x20Vrk\x20*\x20T;'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'GSPLAT_AA\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20calculate'+'\x20AA\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20detOrig'+'\x20=\x20cov[0]['+'0]\x20*\x20cov[1'+'][1]\x20-\x20cov'+'[0][1]\x20*\x20c'+'ov[1][0];\x20'+'//\x20Using\x20['+'0][1]\x20*\x20[1'+'][0]\x20as\x20ma'+'trix\x20might'+'\x20not\x20be\x20pe'+'rfectly\x20sy'+'mmetric\x20nu'+'merically\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20detBlur\x20'+'=\x20(cov[0]['+'0]\x20+\x200.3)\x20'+'*\x20(cov[1]['+'1]\x20+\x200.3)\x20'+'-\x20cov[0][1'+']\x20*\x20cov[1]'+'[0];\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20corner.'+'aaFactor\x20='+'\x20sqrt(detO'+'rig\x20/\x20detB'+'lur);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal1\x20=\x20co'+'v[0][0]\x20+\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20offDiag'+'onal\x20=\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal2\x20=\x20co'+'v[1][1]\x20+\x20'+'0.3;\x0a\x0a\x20\x20\x20\x20'+'let\x20mid\x20=\x20'+'0.5\x20*\x20(dia'+'gonal1\x20+\x20d'+'iagonal2);'+'\x0a\x20\x20\x20\x20let\x20r'+'adius\x20=\x20le'+'ngth(vec2f'+'((diagonal'+'1\x20-\x20diagon'+'al2)\x20/\x202.0'+',\x20offDiago'+'nal));\x0a\x20\x20\x20'+'\x20let\x20lambd'+'a1\x20=\x20mid\x20+'+'\x20radius;\x0a\x20'+'\x20\x20\x20let\x20lam'+'bda2\x20=\x20max'+'(mid\x20-\x20rad'+'ius,\x200.1);'+'\x0a\x0a\x20\x20\x20\x20//\x20U'+'se\x20the\x20sma'+'ller\x20viewp'+'ort\x20dimens'+'ion\x20to\x20lim'+'it\x20the\x20ker'+'nel\x20size\x20r'+'elative\x20to'+'\x20the\x20scree'+'n\x20resoluti'+'on.\x0a\x20\x20\x20\x20le'+'t\x20vmin\x20=\x20m'+'in(1024.0,'+'\x20min(unifo'+'rm.viewpor'+'t.x,\x20unifo'+'rm.viewpor'+'t.y));\x0a\x0a\x20\x20'+'\x20\x20let\x20l1\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda1)'+',\x20vmin);\x0a\x20'+'\x20\x20\x20let\x20l2\x20'+'=\x202.0\x20*\x20mi'+'n(sqrt(2.0'+'\x20*\x20lambda2')+('),\x20vmin);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly-out\x20ga'+'ussians\x20sm'+'aller\x20than'+'\x202\x20pixels\x0a'+'\x20\x20\x20\x20if\x20(l1'+'\x20<\x202.0\x20&&\x20'+'l2\x20<\x202.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20fal'+'se;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'uniform.vi'+'ewport;\x0a\x0a\x20'+'\x20\x20\x20//\x20cull'+'\x20against\x20f'+'rustum\x20x/y'+'\x20axes\x0a\x20\x20\x20\x20'+'if\x20(any((a'+'bs(center.'+'proj.xy)\x20-'+'\x20vec2f(max'+'(l1,\x20l2))\x20'+'*\x20c)\x20>\x20cen'+'ter.proj.w'+'w))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20diagona'+'lVector\x20=\x20'+'normalize('+'vec2f(offD'+'iagonal,\x20l'+'ambda1\x20-\x20d'+'iagonal1))'+';\x0a\x20\x20\x20\x20let\x20'+'v1\x20=\x20l1\x20*\x20'+'diagonalVe'+'ctor;\x0a\x20\x20\x20\x20'+'let\x20v2\x20=\x20l'+'2\x20*\x20vec2f('+'diagonalVe'+'ctor.y,\x20-d'+'iagonalVec'+'tor.x);\x20//'+'\x20Swizzle\x0a\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20=\x20'+'(source.co'+'rnerUV.x\x20*'+'\x20v1\x20+\x20sour'+'ce.cornerU'+'V.y\x20*\x20v2)\x20'+'*\x20c;\x0a\x20\x20\x20\x20c'+'orner.uv\x20='+'\x20source.co'+'rnerUV;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),JM='\x0avar\x20trans'+'formA:\x20tex'+'ture_2d<u3'+'2>;\x0avar\x20tr'+'ansformB:\x20'+'texture_2d'+'<f32>;\x0a\x0a//'+'\x20work\x20valu'+'es\x0avar<pri'+'vate>\x20tAw:'+'\x20u32;\x0a\x0a//\x20'+'read\x20the\x20m'+'odel-space'+'\x20center\x20of'+'\x20the\x20gauss'+'ian\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20let\x20'+'tA:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(tr'+'ansformA,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20t'+'Aw\x20=\x20tA.w;'+'\x0a\x20\x20\x20\x20retur'+'n\x20bitcast<'+'vec3f>(tA.'+'xyz);\x0a}\x0a\x0af'+'n\x20unpackRo'+'tation(pac'+'ked:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'packed.xyz'+',\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(pack'+'ed,\x20packed'+'))));\x0a}\x0a\x0a/'+'/\x20sample\x20c'+'ovariance\x20'+'vectors\x0afn'+'\x20readCovar'+'iance(sour'+'ce:\x20ptr<fu'+'nction,\x20Sp'+'latSource>'+',\x20covA_ptr'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20covB_p'+'tr:\x20ptr<fu'+'nction,\x20ve'+'c3f>)\x20{\x0a\x20\x20'+'\x20\x20let\x20tB:\x20'+'vec4f\x20=\x20te'+'xtureLoad('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20let\x20rot:'+'\x20mat3x3f\x20='+'\x20quatToMat'+'3(unpackRo'+'tation(vec'+'3f(unpack2'+'x16float(b'+'itcast<u32'+'>(tAw)),\x20t'+'B.w)).wxyz'+');\x0a\x20\x20\x20\x20let'+'\x20scale:\x20ve'+'c3f\x20=\x20tB.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x20M\x20=\x20S\x20*\x20'+'R\x0a\x20\x20\x20\x20let\x20'+'M\x20=\x20transp'+'ose(mat3x3'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20*covA_p'+'tr\x20=\x20vec3f'+'(dot(M[0],'+'\x20M[0]),\x20do'+('t(M[0],\x20M['+'1]),\x20dot(M'+'[0],\x20M[2])'+');\x0a\x20\x20\x20\x20*co'+'vB_ptr\x20=\x20v'+'ec3f(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a'),eD='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0afn\x20'+'prepareOut'+'putFromGam'+'ma(gammaCo'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20TONEMAP\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20G'+'AMMA\x20==\x20NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'nvert\x20to\x20l'+'inear\x20spac'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20decodeGam'+'ma3(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20gamma\x20'+'space\x20colo'+'r\x20directly'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'gammaColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ap'+'ply\x20tonema'+'pping\x20in\x20l'+'inear\x20spac'+'e\x20and\x20outp'+'ut\x20to\x20line'+'ar\x20or\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20gam'+'ma\x20(which\x20'+'is\x20handled'+'\x20by\x20gammaC'+'orrectOutp'+'ut)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaCorrec'+'tOutput(to'+'neMap(deco'+'deGamma3(g'+'ammaColor)'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',tD='\x0a\x0a#ifndef\x20'+'DITHER_NON'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22baye'+'rPS\x22\x0a\x20\x20\x20\x20#'+'include\x20\x22o'+'pacityDith'+'erPS\x22\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20PICK_PAS'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22pick'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_PASS)\x20||\x20'+'defined(PI'+'CK_PASS)\x20|'+'|\x20defined('+'PREPASS_PA'+'SS)\x0a\x20\x20\x20\x20un'+'iform\x20alph'+'aClip:\x20f32'+';\x0a#endif\x0a\x0a'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vLinearD'+'epth:\x20f32;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22float'+'AsUintPS\x22\x0a'+'#endif\x0a\x0a//'+'\x20Fast\x20appr'+'oximate\x20e^'+'x\x20based\x20on'+'\x20https://n'+'ic.schraud'+'olph.org/p'+'ubs/Schrau'+'dolph99.pd'+'f\x0aconst\x20EX'+'P_A:\x20f32\x20\x20'+'\x20\x20\x20\x20=\x201210'+'2203.0;\x20\x20\x20'+'//\x20\x202^23\x20'+'/\x20ln(2)\x0aco'+'nst\x20EXP_BC'+'_RMS:\x20i32\x20'+'=\x2010648668'+'08;\x20\x20\x20//\x20('+'127\x20<<\x2023)'+'\x20-\x2060801\x20*'+'\x208\x0afn\x20fast'+'Exp(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20var\x20i'+':\x20i32\x20=\x20i3'+'2(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20bi'+'tcast<f32>'+'(i);\x0a}\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x0a\x20\x20\x20'+'\x20let\x20A:\x20f3'+'2\x20=\x20dot(ga'+'ussianUV,\x20'+'gaussianUV'+');\x0a\x20\x20\x20\x20if\x20'+'(A\x20>\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20alpha'+'\x0a\x20\x20\x20\x20var\x20a'+'lpha:\x20f32\x20'+'=\x20fastExp('+'-A\x20*\x204.0)\x20'+'*\x20gaussian'+('Color.a;\x0a\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(al'+'pha\x20<\x20unif'+'orm.alphaC'+'lip)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20PI'+'CK_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20getPickO'+'utput();\x0a\x0a'+'\x20\x20\x20\x20#elif\x20'+'SHADOW_PAS'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(0.0,\x200.0'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20PREPAS'+'S_PASS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20float2vec'+'4(vLinearD'+'epth);\x0a\x0a\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20('+'1.0\x20/\x20255.'+'0))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20opaci'+'tyDither(&'+'alpha,\x20id\x20'+'*\x200.013);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(input'+'.gaussianC'+'olor.xyz,\x20'+'alpha);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'),sD='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0afn\x20unpack'+'111011s(bi'+'ts:\x20u32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20(vec3f((v'+'ec3<u32>(b'+'its)\x20>>\x20ve'+'c3<u32>(21'+'u,\x2011u,\x200u'+'))\x20&\x20vec3<'+'u32>(0x7ff'+'u,\x200x3ffu,'+'\x200x7ffu))\x20'+'/\x20vec3f(20'+'47.0,\x201023'+'.0,\x202047.0'+'))\x20*\x202.0\x20-'+'\x201.0;\x0a}\x0a\x0as'+'truct\x20Scal'+'eAndSH\x20{\x0a\x20'+'\x20\x20\x20scale:\x20'+'f32,\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f\x0a};\x0a\x0a'+'//\x20fetch\x20q'+'uantized\x20s'+'pherical\x20h'+'armonic\x20co'+'efficients'+'\x0afn\x20fetchS'+'cale(t_in:'+'\x20vec4<u32>'+')\x20->\x20Scale'+'AndSH\x20{\x0a\x20\x20'+'\x20\x20var\x20resu'+'lt:\x20ScaleA'+'ndSH;\x0a\x20\x20\x20\x20'+'result.sca'+'le\x20=\x20bitca'+'st<f32>(t_'+'in.x);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20unpack11'+'1011s(t_in'+'.y);\x0a\x20\x20\x20\x20r'+'esult.b\x20=\x20'+'unpack1110'+'11s(t_in.z'+');\x0a\x20\x20\x20\x20res'+'ult.c\x20=\x20un'+'pack111011'+'s(t_in.w);'+'\x0a\x20\x20\x20\x20retur'+'n\x20result;\x0a'+'}\x0a\x0astruct\x20'+'SH\x20{\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20d:\x20vec3f\x0a'+'};\x0a\x0a//\x20fet'+'ch\x20quantiz'+'ed\x20spheric'+'al\x20harmoni'+'c\x20coeffici'+'ents\x0afn\x20fe'+'tch4(t_in:'+'\x20vec4<u32>'+')\x20->\x20SH\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'sult:\x20SH;\x0a'+'\x20\x20\x20\x20result'+'.a\x20=\x20unpac'+'k111011s(t'+'_in.x);\x0a\x20\x20'+'\x20\x20result.b'+'\x20=\x20unpack1'+'11011s(t_i'+'n.y);\x0a\x20\x20\x20\x20'+'result.c\x20='+'\x20unpack111'+'011s(t_in.'+'z);\x0a\x20\x20\x20\x20re'+'sult.d\x20=\x20u'+'npack11101'+'1s(t_in.w)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20result;'+'\x0a}\x0a\x0afn\x20fet'+'ch1(t_in:\x20'+'u32)\x20->\x20ve'+('c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20unp'+'ack111011s'+'(t_in);\x0a}\x0a'+'\x0a#if\x20SH_BA'+'NDS\x20==\x201\x0a\x20'+'\x20\x20\x20var\x20spl'+'atSH_1to3:'+'\x20texture_2'+'d<u32>;\x0a\x0a\x20'+'\x20\x20\x20fn\x20read'+'SHData(sou'+'rce:\x20ptr<f'+'unction,\x20S'+'platSource'+'>,\x20sh:\x20ptr'+'<function,'+'\x20array<vec'+'3f,\x203>>,\x20s'+'cale:\x20ptr<'+'function,\x20'+'f32>)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'result\x20=\x20f'+'etchScale('+'textureLoa'+'d(splatSH_'+'1to3,\x20sour'+'ce.uv,\x200))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'*scale\x20=\x20r'+'esult.scal'+'e;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[0]\x20=\x20r'+'esult.a;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'1]\x20=\x20resul'+'t.b;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[2]\x20='+'\x20result.c;'+'\x0a\x20\x20\x20\x20}\x0a#el'+'if\x20SH_BAND'+'S\x20==\x202\x0a\x20\x20\x20'+'\x20var\x20splat'+'SH_1to3:\x20t'+'exture_2d<'+'u32>;\x0a\x20\x20\x20\x20'+'var\x20splatS'+'H_4to7:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_8to11:\x20te'+'xture_2d<u'+'32>;\x0a\x0a\x20\x20\x20\x20'+'fn\x20readSHD'+'ata(source'+':\x20ptr<func'+'tion,\x20Spla'+'tSource>,\x20'+'sh:\x20ptr<fu'+'nction,\x20ar'+'ray<vec3f,'+'\x208>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se')+('cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20='+'\x20fetch1(te'+'xtureLoad('+'splatSH_8t'+'o11,\x20sourc'+'e.uv,\x200).x'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_1to3:\x20tex'+'ture_2d<u3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20splatSH_'+'4to7:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_8'+'to11:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_1'+'2to15:\x20tex'+'ture_2d<u3'+'2>;\x0a\x0a\x20\x20\x20\x20f'+'n\x20readSHDa'+'ta(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20s'+'h:\x20ptr<fun'+'ction,\x20arr'+'ay<vec3f,\x20'+'15>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se'+'cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20thi'+'rd:\x20SH\x20=\x20f'+'etch4(text'+'ureLoad(sp'+'latSH_8to1'+'1,\x20source.'+'uv,\x200));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'7]\x20=\x20third'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[8]\x20=\x20'+'third.b;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'9]\x20=\x20third'+'.c;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[10]\x20='+'\x20third.d;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20fourth:'+'\x20SH\x20=\x20fetc'+'h4(texture'+'Load(splat'+'SH_12to15,')+('\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[11'+']\x20=\x20fourth'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[12]\x20='+'\x20fourth.b;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[13]\x20=\x20fo'+'urth.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[1'+'4]\x20=\x20fourt'+'h.d;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a\x0a#'+'endif\x0a'),iD='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c3f;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20xy:\x20'+'cornerUV,\x20'+'z:\x20render\x20'+'order\x20offs'+'et\x0aattribu'+'te\x20vertex_'+'id_attrib:'+'\x20u32;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'nder\x20order'+'\x20base\x0a\x0auni'+'form\x20numSp'+'lats:\x20u32;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20total\x20nu'+'mber\x20of\x20sp'+'lats\x0avar\x20s'+'platOrder:'+'\x20texture_2'+'d<u32>;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'per-splat\x20'+'index\x20to\x20s'+'ource\x20gaus'+'sian\x0a\x0a//\x20i'+'nitialize\x20'+'the\x20splat\x20'+'source\x20str'+'ucture\x0afn\x20'+'initSource'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20let\x20w:\x20u3'+'2\x20=\x20textur'+'eDimension'+'s(splatOrd'+'er,\x200).x;\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20u3'+'2(vertex_p'+'osition.z)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'return\x20if\x20'+'out\x20of\x20ran'+'ge\x20(since\x20'+'the\x20last\x20b'+'lock\x20of\x20sp'+'lats\x20may\x20b'+'e\x20partiall'+'y\x20full)\x0a\x20\x20'+'\x20\x20if\x20(sour'+'ce.order\x20>'+'=\x20uniform.'+'numSplats)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20fa'+'lse;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'orderUV\x20=\x20'+'vec2i(vec2'+'u(source.o'+'rder\x20%\x20w,\x20'+'source.ord'+'er\x20/\x20w));\x0a'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20splat\x20i'+'d\x0a\x20\x20\x20\x20sour'+'ce.id\x20=\x20te'+'xtureLoad('+'splatOrder'+',\x20orderUV,'+'\x200).r;\x0a\x0a\x20\x20'+'\x20\x20//\x20map\x20i'+'d\x20to\x20uv\x0a\x20\x20'+'\x20\x20source.u'+'v\x20=\x20vec2i('+'vec2u(sour'+'ce.id\x20%\x20w,'+'\x20source.id'+'\x20/\x20w));\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+('turn\x20true;'+'\x0a}\x0a'),rD='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a#ifn'+'def\x20DITHER'+'_NONE\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0aconst'+'\x20discardVe'+'c:\x20vec4f\x20='+'\x20vec4f(0.0'+',\x200.0,\x202.0'+',\x201.0);\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20varying'+'\x20vLinearDe'+'pth:\x20f32;\x0a'+'#endif\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20gaussian\x20'+'details\x0a\x20\x20'+'\x20\x20var\x20sour'+'ce:\x20SplatS'+'ource;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Source(&so'+'urce))\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.positi'+'on\x20=\x20disca'+'rdVec;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20let\x20model'+'Center:\x20ve'+'c3f\x20=\x20read'+'Center(&so'+'urce);\x0a\x0a\x20\x20'+'\x20\x20var\x20cent'+'er:\x20SplatC'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'&center))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20di'+'scardVec;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20pro'+'ject\x20cente'+'r\x20to\x20scree'+'n\x20space\x0a\x20\x20'+'\x20\x20var\x20corn'+'er:\x20SplatC'+'orner;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Corner(&so'+'urce,\x20&cen'+'ter,\x20&corn'+'er))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20clr:\x20vec4'+'f\x20=\x20readCo'+'lor(&sourc'+'e);\x0a\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'AA\x20compens'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr.a\x20'+('=\x20clr.a\x20*\x20'+'corner.aaF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20spher'+'ical\x20harmo'+'nics\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x200\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cal'+'culate\x20the'+'\x20model-spa'+'ce\x20view\x20di'+'rection\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'modelView3'+'x3\x20=\x20mat3x'+'3f(center.'+'modelView['+'0].xyz,\x20ce'+'nter.model'+'View[1].xy'+'z,\x20center.'+'modelView['+'2].xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dir\x20=\x20nor'+'malize(mod'+'elView3x3\x20'+'*\x20center.v'+'iew);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'ad\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20sh:\x20array'+'<vec3f,\x20SH'+'_COEFFS>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20scale:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20readSHDa'+'ta(&source'+',\x20&sh,\x20&sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr\x20='+'\x20vec4f(clr'+'.xyz\x20+\x20eva'+'lSH(&sh,\x20d'+'ir)\x20*\x20scal'+'e,\x20clr.a);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(&c'+'orner,\x20clr'+'.w);\x0a\x0a\x20\x20\x20\x20'+'//\x20write\x20o'+'utput\x0a\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4f(co'+'rner.offse'+'t,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20ou'+'tput.gauss'+'ianUV\x20=\x20co'+'rner.uv;\x0a\x20'+'\x20\x20\x20output.'+'gaussianCo'+'lor\x20=\x20vec4'+'f(prepareO'+'utputFromG'+'amma(max(c'+'lr.xyz,\x20ve'+'c3f(0.0)))'+',\x20clr.w);\x0a'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'id\x20=\x20f32(s'+'ource.id);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vLinearD'+'epth\x20=\x20-ce'+'nter.view.'+'z;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),aD='\x0a\x20\x20\x20\x20attri'+'bute\x20aPosi'+'tion:\x20vec2'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20uv0:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20@vertex\x20f'+'n\x20vertexMa'+'in(input:\x20'+'VertexInpu'+'t)\x20->\x20Vert'+'exOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20vec4f(inp'+'ut.aPositi'+'on,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'uv0\x20=\x20getI'+'mageEffect'+'UV((input.'+'aPosition\x20'+'+\x201.0)\x20*\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a',nD='\x0a//\x20Indire'+'ct\x20indexed'+'\x20draw\x20call'+'\x20parameter'+'s\x0astruct\x20D'+'rawIndexed'+'IndirectAr'+'gs\x20{\x0a\x20\x20\x20\x20i'+'ndexCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Numb'+'er\x20of\x20indi'+'ces\x20to\x20dra'+'w\x0a\x20\x20\x20\x20inst'+'anceCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20instanc'+'es\x20to\x20draw'+'\x0a\x20\x20\x20\x20first'+'Index:\x20u32'+',\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Index\x20of'+'\x20the\x20first'+'\x20index\x20in\x20'+'the\x20index\x20'+'buffer\x0a\x20\x20\x20'+'\x20baseVerte'+'x:\x20i32,\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Of'+'fset\x20added'+'\x20to\x20each\x20i'+'ndex\x20befor'+'e\x20fetching'+'\x20vertex\x0a\x20\x20'+'\x20\x20firstIns'+'tance:\x20u32'+'\x20\x20\x20\x20\x20\x20//\x20F'+'irst\x20insta'+'nce\x20ID\x0a};\x0a'+'\x0a//\x20Indire'+'ct\x20non-ind'+'exed\x20draw\x20'+'call\x20param'+'eters\x0astru'+'ct\x20DrawInd'+'irectArgs\x20'+'{\x0a\x20\x20\x20\x20vert'+'exCount:\x20u'+'32,\x20\x20\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20vertice'+'s\x20to\x20draw\x0a'+'\x20\x20\x20\x20instan'+'ceCount:\x20u'+'32,\x20\x20\x20\x20\x20//'+'\x20Number\x20of'+'\x20instances'+'\x20to\x20draw\x0a\x20'+'\x20\x20\x20firstVe'+'rtex:\x20u32,'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Index\x20of\x20t'+'he\x20first\x20v'+'ertex\x0a\x20\x20\x20\x20'+'firstInsta'+'nce:\x20u32,\x20'+'\x20\x20\x20\x20//\x20Fir'+'st\x20instanc'+'e\x20ID\x0a\x20\x20\x20\x20_'+'pad:\x20u32\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Padd'+'ing\x20to\x20mat'+'ch\x20indexed'+'\x20size\x20(unu'+'sed)\x0a};\x0a',oD='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gamma'+'PS\x22\x0a\x20\x20\x20\x20va'+'rying\x20colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(decodeGam'+'ma3(input.'+'color.rgb)'+'),\x20input.c'+'olor.a);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a',lD='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20matr'+'ix_model:\x20'+'mat4x4f;\x0a\x20'+'\x20\x20\x20uniform'+'\x20matrix_vi'+'ewProjecti'+'on:\x20mat4x4'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output\x20:\x20V'+'ertexOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20inpu'+'t.vertex_c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20unifor'+'m.matrix_m'+'odel\x20*\x20inp'+'ut.vertex_'+'position;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',cD='\x0auniform\x20m'+'aterial_ir'+'idescenceR'+'efractionI'+'ndex:\x20f32;'+'\x0a\x0afn\x20iride'+'scence_ior'+'ToFresnelS'+'calar(tran'+'smittedIor'+':\x20f32,\x20inc'+'identIor:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(('+'transmitte'+'dIor\x20-\x20inc'+'identIor)\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'incidentIo'+'r),\x202.0);\x0a'+'}\x0a\x0afn\x20irid'+'escence_io'+'rToFresnel'+'Vec3(trans'+'mittedIor:'+'\x20vec3f,\x20in'+'cidentIor:'+'\x20f32)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'vec3f(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3f(inci'+'dentIor)),'+'\x20vec3f(2.0'+'));\x0a}\x0a\x0afn\x20'+'iridescenc'+'e_fresnelT'+'oIor(f0:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20sqrtF'+'0:\x20vec3f\x20='+'\x20sqrt(f0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20(vec3f(1'+'.0)\x20+\x20sqrt'+'F0)\x20/\x20(vec'+'3f(1.0)\x20-\x20'+'sqrtF0);\x0a}'+'\x0a\x0aconst\x20XY'+'Z_TO_REC70'+'9:\x20mat3x3f'+'\x20=\x20mat3x3f'+'(\x0a\x20\x20\x20\x20vec3'+'f(3.240454'+'2,\x20-1.5371'+'385,\x20-0.49'+'85314),\x0a\x20\x20'+'\x20\x20vec3f(-0'+'.9692660,\x20'+'\x201.8760108'+',\x20\x200.04155'+'60),\x0a\x20\x20\x20\x20v'+'ec3f(0.055'+'6434,\x20-0.2'+'040259,\x20\x201'+'.0572252)\x0a'+');\x0a\x0afn\x20iri'+'descence_s'+'ensitivity'+'(opd:\x20f32,'+'\x20shift:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x20\x20\x20\x20let'+'\x20phase:\x20f3'+'2\x20=\x202.0\x20*\x20'+'PI\x20*\x20opd\x20*'+'\x201.0e-9;\x0a\x20'+'\x20\x20\x20const\x20v'+'al:\x20vec3f\x20'+'=\x20vec3f(5.'+'4856e-13,\x20'+'4.4201e-13'+',\x205.2481e-'+'13);\x0a\x20\x20\x20\x20c'+'onst\x20pos:\x20'+'vec3f\x20=\x20ve'+'c3f(1.6810'+'e+06,\x201.79'+('53e+06,\x202.'+'2084e+06);'+'\x0a\x20\x20\x20\x20const'+'\x20var_:\x20vec'+'3f\x20=\x20vec3f'+'(4.3278e+0'+'9,\x209.3046e'+'+09,\x206.612'+'1e+09);\x0a\x0a\x20'+'\x20\x20\x20var\x20xyz'+':\x20vec3f\x20=\x20'+'val\x20*\x20sqrt'+'(2.0\x20*\x20PI\x20'+'*\x20var_)\x20*\x20'+'cos(pos\x20*\x20'+'phase\x20+\x20sh'+'ift)\x20*\x20exp'+'(-pow(phas'+'e,\x202.0)\x20*\x20'+'var_);\x0a\x20\x20\x20'+'\x20xyz.x\x20=\x20x'+'yz.x\x20+\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+'cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20=\x20xyz\x20/\x20v'+'ec3f(1.068'+'5e-07);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'XYZ_TO_REC'+'709\x20*\x20xyz;'+'\x0a}\x0a\x0afn\x20iri'+'descence_f'+'resnelScal'+'ar(cosThet'+'a:\x20f32,\x20f0'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20x:\x20f32'+'\x20=\x20clamp(1'+'.0\x20-\x20cosTh'+'eta,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'let\x20x2:\x20f3'+'2\x20=\x20x\x20*\x20x;'+'\x0a\x20\x20\x20\x20let\x20x'+'5:\x20f32\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x0a\x0afn'+'\x20iridescen'+'ce_fresnel'+'Vec3(cosTh'+'eta:\x20f32,\x20'+'f0:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'x:\x20f32\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'x2:\x20f32\x20=\x20'+'x\x20*\x20x;\x0a\x20\x20\x20'+'\x20let\x20x5:\x20f'+'32\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x0a\x20\x20'+'\x20\x20return\x20f'+'0\x20+\x20(vec3f'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0afn\x20calcIr'+'idescence('+'outsideIor'+':\x20f32,\x20cos'+'Theta:\x20f32'+',\x20base_f0:'+'\x20vec3f,\x20ir'+'idescenceT'+'hickness:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0a\x20\x20\x20\x20le'+'t\x20iridesce'+'nceIor:\x20f3'+'2\x20=\x20mix(ou')+('tsideIor,\x20'+'uniform.ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20let\x20s'+'inTheta2Sq'+':\x20f32\x20=\x20po'+'w(outsideI'+'or\x20/\x20iride'+'scenceIor,'+'\x202.0)\x20*\x20(1'+'.0\x20-\x20pow(c'+'osTheta,\x202'+'.0));\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2Sq:\x20f32'+'\x20=\x201.0\x20-\x20s'+'inTheta2Sq'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(cosTheta2'+'Sq\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3f(1.0);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2:\x20f32\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20let\x20r'+'0:\x20f32\x20=\x20i'+'ridescence'+'_iorToFres'+'nelScalar('+'iridescenc'+'eIor,\x20outs'+'ideIor);\x0a\x20'+'\x20\x20\x20let\x20r12'+':\x20f32\x20=\x20ir'+'idescence_'+'fresnelSca'+'lar(cosThe'+'ta,\x20r0);\x0a\x20'+'\x20\x20\x20let\x20r21'+':\x20f32\x20=\x20r1'+'2;\x0a\x20\x20\x20\x20let'+'\x20t121:\x20f32'+'\x20=\x201.0\x20-\x20r'+'12;\x0a\x0a\x20\x20\x20\x20l'+'et\x20phi12:\x20'+'f32\x20=\x20sele'+'ct(0.0,\x20PI'+',\x20iridesce'+'nceIor\x20<\x20o'+'utsideIor)'+';\x0a\x20\x20\x20\x20let\x20'+'phi21:\x20f32'+'\x20=\x20PI\x20-\x20ph'+'i12;\x0a\x0a\x20\x20\x20\x20'+'let\x20baseIo'+'r:\x20vec3f\x20='+'\x20iridescen'+'ce_fresnel'+'ToIor(base'+'_f0\x20+\x20vec3'+'f(0.0001))'+';\x0a\x20\x20\x20\x20let\x20'+'r1:\x20vec3f\x20'+'=\x20iridesce'+'nce_iorToF'+'resnelVec3'+'(baseIor,\x20'+'iridescenc'+'eIor);\x0a\x20\x20\x20'+'\x20let\x20r23:\x20'+'vec3f\x20=\x20ir'+'idescence_'+'fresnelVec'+'3(cosTheta'+'2,\x20r1);\x0a\x0a\x20'+'\x20\x20\x20let\x20phi'+'23:\x20vec3f\x20'+'=\x20select(v'+'ec3f(0.0),'+'\x20vec3f(PI)'+',\x20baseIor\x20'+'<\x20vec3f(ir'+'idescenceI'+'or));\x0a\x20\x20\x20\x20'+'let\x20opd:\x20f'+'32\x20=\x202.0\x20*'+'\x20iridescen'+'ceIor\x20*\x20ir'+'idescenceT')+('hickness\x20*'+'\x20cosTheta2'+';\x0a\x20\x20\x20\x20let\x20'+'phi:\x20vec3f'+'\x20=\x20vec3f(p'+'hi21)\x20+\x20ph'+'i23;\x20//\x20Pr'+'omote\x20scal'+'ar\x20phi21\x20t'+'o\x20vec3f\x0a\x0a\x20'+'\x20\x20\x20let\x20r12'+'3Sq:\x20vec3f'+'\x20=\x20clamp(v'+'ec3f(r12)\x20'+'*\x20r23,\x20vec'+'3f(1e-5),\x20'+'vec3f(0.99'+'99));\x0a\x20\x20\x20\x20'+'let\x20r123:\x20'+'vec3f\x20=\x20sq'+'rt(r123Sq)'+';\x0a\x20\x20\x20\x20let\x20'+'rs:\x20vec3f\x20'+'=\x20pow(vec3'+'f(t121),\x20v'+'ec3f(2.0))'+'\x20*\x20r23\x20/\x20('+'vec3f(1.0)'+'\x20-\x20r123Sq)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20c0:\x20vec3f'+'\x20=\x20vec3f(r'+'12)\x20+\x20rs;\x0a'+'\x20\x20\x20\x20var\x20i_'+'irid:\x20vec3'+'f\x20=\x20c0;\x0a\x0a\x20'+'\x20\x20\x20var\x20cm:'+'\x20vec3f\x20=\x20r'+'s\x20-\x20vec3f('+'t121);\x0a\x0a\x20\x20'+'\x20\x20cm\x20=\x20cm\x20'+'*\x20r123;\x0a\x20\x20'+'\x20\x20let\x20sm1:'+'\x20vec3f\x20=\x202'+'.0\x20*\x20iride'+'scence_sen'+'sitivity(1'+'.0\x20*\x20opd,\x20'+'1.0\x20*\x20phi)'+';\x0a\x20\x20\x20\x20i_ir'+'id\x20=\x20i_iri'+'d\x20+\x20cm\x20*\x20s'+'m1;\x0a\x0a\x20\x20\x20\x20c'+'m\x20=\x20cm\x20*\x20r'+'123;\x0a\x20\x20\x20\x20l'+'et\x20sm2:\x20ve'+'c3f\x20=\x202.0\x20'+'*\x20iridesce'+'nce_sensit'+'ivity(2.0\x20'+'*\x20opd,\x202.0'+'\x20*\x20phi);\x0a\x20'+'\x20\x20\x20i_irid\x20'+'=\x20i_irid\x20+'+'\x20cm\x20*\x20sm2;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20max(i_i'+'rid,\x20vec3f'+'(0.0));\x0a}\x0a'+'\x0afn\x20getIri'+'descenceDi'+'ffraction('+'cosTheta:\x20'+'f32,\x20specu'+'larity:\x20ve'+'c3f,\x20iride'+'scenceThic'+'kness:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),hD='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_irides'+'cence:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getIrid'+'escence()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'iridescenc'+'e\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_CON'+'STANT\x0a\x20\x20\x20\x20'+'iridescenc'+'e\x20=\x20irides'+'cence\x20*\x20un'+'iform.mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20=\x20iridesc'+'ence\x20*\x20tex'+'tureSample'+'Bias({STD_'+'IRIDESCENC'+'E_TEXTURE_'+'NAME},\x20{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_CHANNEL}'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dI'+'ridescence'+'\x20=\x20iridesc'+'ence;\x20\x0a}\x0a',dD='\x0auniform\x20m'+'aterial_ir'+'idescenceT'+'hicknessMa'+'x:\x20f32;\x0a\x0a#'+'ifdef\x20STD_'+'IRIDESCENC'+'ETHICKNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20uniform'+'\x20material_'+'iridescenc'+'eThickness'+'Min:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20blen'+'d:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_IRIDESCE'+'NCETHICKNE'+'SS_TEXTURE'+'_NAME},\x20{S'+'TD_IRIDESC'+'ENCETHICKN'+'ESS_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20iridesce'+'nceThickne'+'ss:\x20f32\x20=\x20'+'mix(unifor'+'m.material'+'_iridescen'+'ceThicknes'+'sMin,\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax,\x20bl'+'end);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceT'+'hickness:\x20'+'f32\x20=\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scenceThic'+'kness\x20=\x20ir'+'idescenceT'+'hickness;\x20'+'\x0a}\x0a',fD='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_refr'+'actionInde'+'x:\x20f32;\x0a#e'+'ndif\x0a\x0afn\x20g'+'etIor()\x20{\x0a'+'#ifdef\x20STD'+'_IOR_CONST'+'ANT\x0a\x20\x20\x20\x20dI'+'or\x20=\x20unifo'+'rm.materia'+'l_refracti'+'onIndex;\x0a#'+'else\x0a\x20\x20\x20\x20d'+'Ior\x20=\x201.0\x20'+'/\x201.5;\x0a#en'+'dif\x0a}\x0a',uD='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_color'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_direction'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_POINT\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20poi'+'nt\x20lights\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20lig'+'ht{i}_posi'+'tion:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ra'+'dius:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'SPOT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_SPOT\x20//\x20'+'include\x20fu'+'nctionalit'+'y\x20for\x20spot'+'\x20lights\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_di'+'rection:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_inner'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_outer'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20//\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_FALLOFF_'+'SQUARED\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20inv'+'erse\x20squar'+'ed\x20falloff'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_position:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ha'+'lfWidth:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_halfHeigh'+'t:\x20vec3f;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}FALLOFF\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_LINE'+'AR\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20linear\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}FALLOFF'+'\x20==\x20INVERS'+'ESQUARED\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_SQUA'+'RED\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20inverse'+'\x20squared\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20shadow\x20c'+'asting\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowMatri'+'x:\x20mat4x4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20li'+'ght{i}_sha'+'dowIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'{i}_shadow'+'Params:\x20ve'+'c4f;\x20//\x20wi'+'dth,\x20heigh'+'t,\x20bias,\x20r'+'adius\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowSearc'+'hArea:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_cameraPar'+'ams:\x20vec4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'oftShadowP'+'arams:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'directiona'+'l\x20(cascade'+'d)\x20shadows'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20light{i}_'+'shadowMatr'+'ixPalette:'+'\x20array<mat'+'4x4f,\x204>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deDistance'+'s:\x20vec4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deCount:\x20i'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20light{'+'i}_shadowC'+'ascadeBlen'+'d:\x20f32;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20N'+'OT\x20SUPPORT'+'ED\x0a/*\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIG'+'HT{i}SHADO'+'W_PCF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMap:\x20tex'+'ture_depth'+'_2d;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'{i}_shadow'+'MapSampler'+':\x20sampler_'+'comparison'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'light{i}_s'+'hadowMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMapSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIGHT{i}CO'+'OKIE)\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_COOKIE\x20/'+'/\x20include\x20'+'functional'+'ity\x20for\x20co'+'okies\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20OMNI\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20NOT\x20SUPP'+'ORTED\x0a/*\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'plerCube\x20l'+'ight{i}_co'+'okie;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un')+('iform\x20floa'+'t\x20light{i}'+'_cookieInt'+'ensity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20!defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20light{i}'+'_shadowMat'+'rix;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20NO'+'T\x20SUPPORTE'+'D\x0a/*\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_cookie;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_cook'+'ieIntensit'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20!'+'defined(LI'+'GHT{i}CAST'+'SHADOW)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrix;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}COOKIE_TR'+'ANSFORM)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_coo'+'kieMatrix;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20vec2\x20'+'light{i}_c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a*/\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),pD='\x0afn\x20getLig'+'htDiffuse('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',mD='\x0afn\x20evalOm'+'niLight(li'+'ghtPosW:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20vP'+'ositionW\x20-'+'\x20lightPosW'+';\x0a}\x0a',_D='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',gD='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0afn\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x20\x20\x20'+'\x20//\x20light\x20'+'color\x0a\x20\x20\x20\x20'+'var\x20lightC'+'olor:\x20vec3'+'f\x20=\x20unifor'+'m.light{i}'+'_color;\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20!d'+'efined(LIT'+'_SHADOW_CA'+'TCHER)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ea'+'rly\x20return'+'\x20if\x20the\x20li'+'ght\x20color\x20'+'is\x20black\x20('+'used\x20by\x20sh'+'adow\x20catch'+'er\x20-\x20this\x20'+'way\x20this\x20l'+'ight\x20is\x20ve'+'ry\x20cheap)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(all(ligh'+'tColor\x20==\x20'+'vec3f(0.0,'+'\x200.0,\x200.0)'+'))\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20DIRECTION'+'AL\x20//\x20dire'+'ctional\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightD'+'irNormW\x20=\x20'+'uniform.li'+'ght{i}_dir'+'ection;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20omni\x20o'+'r\x20spot\x20lig'+'ht\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(u'+'niform.lig'+'ht{i}_posi'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tDirNormW\x20'+'=\x20normaliz'+'e(lightDir'+'W);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIGHT'+'{i}COOKIE)'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20SPOT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_FAL'+'LOFF\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+('eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DXform(u'+'niform.lig'+'ht{i}_cook'+'ie,\x20unifor'+'m.light{i}'+'_shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_cookieIn'+'tensity,\x20u'+'niform.lig'+'ht{i}_cook'+'ieMatrix,\x20'+'uniform.li'+'ght{i}_coo'+'kieOffset)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookie2D('+'uniform.li'+'ght{i}_coo'+'kie,\x20unifo'+'rm.light{i'+'}_shadowMa'+'trix,\x20unif'+'orm.light{'+'i}_cookieI'+'ntensity).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClipXfo'+'rm(uniform'+'.light{i}_'+'cookie,\x20un'+'iform.ligh'+'t{i}_shado'+'wMatrix,\x20u'+'niform.lig'+'ht{i}_cook'+'ieIntensit'+'y,\x20uniform'+'.light{i}_'+'cookieMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieOff'+'set).{LIGH'+'T{i}COOKIE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClip(un'+'iform.ligh'+'t{i}_cooki'+'e,\x20uniform'+'.light{i}_'+'shadowMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieInt'+'ensity).{L'+'IGHT{i}COO'+'KIE_CHANNE'+'L};\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookieCub'+'e(uniform.'+'light{i}_c'+'ookie,\x20uni'+'form.light'+'{i}_shadow'+'Matrix,\x20un'+'iform.ligh'+'t{i}_cooki'+'eIntensity'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multipl'+'y\x20light\x20co'+'lor\x20by\x20the'+'\x20cookie\x20at'+'tenuation\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightCol'+'or\x20=\x20light'+'Color\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dista'+'nce\x20fallof'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20PUNCTUAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}FALLOF'+'F\x20==\x20LINEA'+'R\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20=\x20get'+'FalloffLin'+'ear(unifor'+'m.light{i}'+'_radius,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20getFal'+'loffInvSqu'+'ared(unifo'+'rm.light{i'+'}_radius,\x20'+'lightDirW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'non\x20punctu'+'al\x20lights\x20'+'only\x20gets\x20'+'the\x20range\x20'+'window\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20getFall'+'offWindow('+'uniform.li'+'ght{i}_rad'+'ius,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20angle'+'\x20falloff\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20SPO'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d')+('efined(LIG'+'HT{i}COOKI'+'E)\x20||\x20defi'+'ned(LIGHT{'+'i}COOKIE_F'+'ALLOFF)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20dAtten\x20'+'*\x20getSpotE'+'ffect(unif'+'orm.light{'+'i}_directi'+'on,\x20unifor'+'m.light{i}'+'_innerCone'+'Angle,\x20uni'+'form.light'+'{i}_outerC'+'oneAngle,\x20'+'dLightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20if\x20'+'(dAtten\x20<\x20'+'0.00001)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20evaluate\x20'+'area\x20light'+'\x20values\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20RECT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcRectLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20calcDiskL'+'ightValues'+'(uniform.l'+'ight{i}_po'+'sition,\x20un'+'iform.ligh'+'t{i}_halfW'+'idth,\x20unif'+'orm.light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20SPH'+'ERE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20calc'+'SphereLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20dif'+'fuse\x20light'+'ing\x20-\x20LTC\x20'+'lights\x20do\x20'+'not\x20mix\x20di'+'ffuse\x20ligh'+'ting\x20into\x20'+'attenuatio'+'n\x20that\x20aff'+'ects\x20specu'+'lar\x0a\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P')+('UNCTUAL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'attenDiffu'+'se\x20-\x20separ'+'ate\x20diffus'+'e\x20attenuat'+'ion\x20for\x20no'+'n-punctual'+'\x20light\x20sou'+'rces\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20NB:\x20A\x20bet'+'ter\x20approx'+'imation\x20pe'+'rhaps\x20usin'+'g\x20wrap\x20lig'+'hting\x20coul'+'d\x20be\x20imple'+'mented\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20at'+'tenDiffuse'+':\x20f32\x20=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x2016.0\x20is\x20'+'a\x20constant'+'\x20that\x20is\x20i'+'n\x20getFallo'+'ffInvSquar'+'ed()\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20attenDi'+'ffuse:\x20f32'+'\x20=\x20getRect'+'LightDiffu'+'se(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20light'+'DirW,\x20dLig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20DISK\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'attenDiffu'+'se:\x20f32\x20=\x20'+'getDiskLig'+'htDiffuse('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20lightDir'+'W,\x20dLightD'+'irNormW)\x20*'+'\x2016.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20LIGHT'+'{i}SHAPE\x20='+'=\x20SPHERE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20a'+'ttenDiffus'+'e:\x20f32\x20=\x20g'+'etSphereLi'+'ghtDiffuse'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20lightDi'+'rW,\x20dLight'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20one\x20par'+'ameter\x20is\x20'+'unused\x20for')+('\x20punctual\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20dAtten'+'\x20*\x20getLigh'+'tDiffuse(l'+'itArgs_wor'+'ldNormal,\x20'+'vec3(0.0),'+'\x20dLightDir'+'NormW);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20the\x20sha'+'dow\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}CASTS'+'HADOW\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20shadow:'+'\x20f32\x20=\x20get'+'Shadow{i}('+'vec3(0.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20shadow:\x20'+'f32\x20=\x20getS'+'hadow{i}(l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Ap'+'ply\x20shadow'+'\x20intensity'+'\x20to\x20the\x20sh'+'adow\x20value'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadow\x20=\x20mi'+'x(1.0,\x20sha'+'dow,\x20unifo'+'rm.light{i'+'}_shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20dA'+'tten\x20*\x20sha'+'dow;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'SHADOW_CAT'+'CHER)\x20&&\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20accumula'+'te\x20shadows'+'\x20for\x20direc'+'tional\x20lig'+'hts\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSha'+'dowCatcher'+'\x20=\x20dShadow'+'Catcher\x20*\x20'+'shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20-\x20they'+'\x20do\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((('+'attenDiffu'+'se\x20*\x20dAtte'+'n)\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20dLTC'+'SpecFres))')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'((attenDif'+'fuse\x20*\x20dAt'+'ten)\x20*\x20lig'+'htColor);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(AREA_'+'LIGHTS)\x20&&'+'\x20defined(L'+'IT_SPECULA'+'R)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((d'+'Atten\x20*\x20li'+'ghtColor)\x20'+'*\x20(1.0\x20-\x20l'+'itArgs_spe'+'cularity))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'(dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20spe'+'cular\x20ligh'+'ting\x0a\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}AFFECT'+'_SPECULARI'+'TY\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20==\x20REC'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getRe'+'ctLightSpe'+'cular(litA'+'rgs_clearc'+'oat_worldN'+'ormal,\x20dVi'+'ewDirW)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20=\x20ccSpec'+'ularLight\x20'+'+\x20(ccLTCSp'+'ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20SPHER'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_clea'+'rcoat_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20=\x20dS'+'pecularLig'+'ht\x20+\x20(dLTC'+'SpecFres\x20*'+'\x20getRectLi'+'ghtSpecula'+'r(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20(dLT'+'CSpecFres\x20'+'*\x20getDiskL'+'ightSpecul'+'ar(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW)\x20*\x20dAt'+'ten\x20*\x20ligh'+'tColor);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'=\x20dSpecula'+'rLight\x20+\x20('+'dLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20//\x20punctu'+'al\x20light\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20is\x20fr'+'esnel\x20need'+'ed\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC')+('TIONAL\x20&&\x20'+'LIT_FRESNE'+'L_MODEL\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ha'+'lfDirW:\x20ve'+'c3f\x20=\x20norm'+'alize(-dLi'+'ghtDirNorm'+'W\x20+\x20dViewD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20if\x20LTC\x20li'+'ghts\x20are\x20p'+'resent,\x20sp'+'ecular\x20mus'+'t\x20be\x20accum'+'ulated\x20wit'+'h\x20specular'+'ity\x20(specu'+'larity\x20is\x20'+'pre\x20multip'+'lied\x20by\x20pu'+'nctual\x20lig'+'ht\x20fresnel'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'specularCC'+':\x20vec3f\x20=\x20'+'getLightSp'+'ecular(hal'+'fDirW,\x20ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20dLightDir'+'NormW,\x20lit'+'Args_clear'+'coat_gloss'+',\x20dTBN)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightspecu'+'larCC\x20=\x20li'+'ghtspecula'+'rCC\x20*\x20getF'+'resnelCC(d'+'ot(dViewDi'+'rW,\x20halfDi'+'rW));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20=\x20ccSpecu'+'larLight\x20+'+'\x20lightspec'+'ularCC;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sSpecul'+'arLight\x20=\x20'+'sSpecularL'+'ight\x20+\x20(ge'+'tLightSpec'+'ularSheen('+'halfDirW,\x20'+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20dLightDi')+('rNormW,\x20li'+'tArgs_shee'+'n_gloss)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tSpecular:'+'\x20vec3f\x20=\x20g'+'etLightSpe'+'cular(half'+'DirW,\x20dRef'+'lDirW,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20d'+'LightDirNo'+'rmW,\x20litAr'+'gs_gloss,\x20'+'dTBN)\x20*\x20dA'+'tten\x20*\x20lig'+'htColor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'FRESNEL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20=\x20li'+'ghtSpecula'+'r\x20*\x20getFre'+'snel(dot(d'+'ViewDirW,\x20'+'halfDirW),'+'\x20litArgs_g'+'loss,\x20litA'+'rgs_specul'+'arity,\x20iri'+'descenceFr'+'esnel,\x20lit'+'Args_iride'+'scence_int'+'ensity);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightSpecul'+'ar\x20=\x20light'+'Specular\x20*'+'\x20getFresne'+'l(dot(dVie'+'wDirW,\x20hal'+'fDirW),\x20li'+'tArgs_glos'+'s,\x20litArgs'+'_speculari'+'ty);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20light'+'Specular\x20='+'\x20lightSpec'+'ular\x20*\x20lit'+'Args_specu'+'larity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20+\x20li'+'ghtSpecula'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'#endif\x0a'),SD='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowSam'+'pleCoord{i'+'}(shadowTr'+'ansform:\x20m'+'at4x4f,\x20sh'+'adowParams'+':\x20vec4f,\x20w'+'orldPositi'+'on:\x20vec3f,'+'\x20lightPos:'+'\x20vec3f,\x20li'+'ghtDir:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'lightDirNo'+'rm:\x20vec3f,'+'\x20normal:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'surfacePos'+'ition\x20=\x20wo'+'rldPositio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_POINT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+'NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(*l'+'ightDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20surfac'+'ePosition\x20'+'+\x20normal\x20*'+'\x20shadowPar'+'ams.y\x20*\x20cl'+'amp(1.0\x20-\x20'+'dot(normal'+',\x20-lightDi'+'rNorm),\x200.'+'0,\x201.0)\x20*\x20'+'distScale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20*li'+'ghtDir\x20=\x20s'+'urfacePosi'+'tion\x20-\x20lig'+'htPos;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'*lightDir;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}_SHADOW_'+'SAMPLE_NOR'+'MAL_OFFSET'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_SAMP'+'LE_ORTHO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dis'+'tScale:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20distSca'+'le:\x20f32\x20=\x20'+'abs(dot(vP'+'ositionW\x20-'+'\x20lightPos,'+'\x20lightDirN'+'orm));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Use'+'\x20var\x20for\x20m'+'odificatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20po'+'sitionInSh'+'adowSpace:'+'\x20vec4f\x20=\x20s'+'hadowTrans'+'form\x20*\x20vec'+'4f(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM')+('PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20=\x20pos'+'itionInSha'+'dowSpace.x'+'yz\x20/\x20posit'+'ionInShado'+'wSpace.w;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20position'+'InShadowSp'+'ace.xy\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xy\x20/\x20posi'+'tionInShad'+'owSpace.w;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20positionI'+'nShadowSpa'+'ce.z\x20=\x20len'+'gth(*light'+'Dir)\x20*\x20sha'+'dowParams.'+'w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20this\x20is\x20c'+'urrently\x20u'+'nused\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SHADO'+'W_SAMPLE_Z'+'_BIAS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20posit'+'ionInShado'+'wSpace.z\x20+'+'=\x20getShado'+'wBias(shad'+'owParams.x'+',\x20shadowPa'+'rams.z);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20sur'+'facePositi'+'on;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20evalu'+'ation\x20func'+'tion\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'w{i}(light'+'DirW_in:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20s'+'hadow\x20casc'+'ades\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_CASC'+'ADES\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20select\x20sh'+'adow\x20casca'+'de\x20matrix\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20casc'+'adeIndex:\x20'+'i32\x20=\x20getS'+'hadowCasca'+'deIndex(un'+'iform.ligh'+'t{i}_shado'+'wCascadeDi'+'stances,\x20u'+'niform.lig'+'ht{i}_shad')+('owCascadeC'+'ount);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_CASCADE'+'_BLEND\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20cascade'+'Index\x20=\x20di'+'therShadow'+'CascadeInd'+'ex(cascade'+'Index,\x20uni'+'form.light'+'{i}_shadow'+'CascadeDis'+'tances,\x20un'+'iform.ligh'+'t{i}_shado'+'wCascadeCo'+'unt,\x20unifo'+'rm.light{i'+'}_shadowCa'+'scadeBlend'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowMatri'+'x:\x20mat4x4f'+'\x20=\x20uniform'+'.light{i}_'+'shadowMatr'+'ixPalette['+'cascadeInd'+'ex];\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20sha'+'dowMatrix:'+'\x20mat4x4f\x20='+'\x20uniform.l'+'ight{i}_sh'+'adowMatrix'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20lightDirA'+'rg\x20=\x20light'+'DirW_in;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20direc'+'tional\x20lig'+'ht\x20does\x20no'+'t\x20have\x20a\x20p'+'osition\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20getSh'+'adowSample'+'Coord{i}(s'+'hadowMatri'+'x,\x20uniform'+'.light{i}_'+'shadowPara'+'ms,\x20vPosit'+'ionW,\x20vec3'+'f(0.0),\x20&l'+'ightDirArg'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owCoord:\x20v'+'ec3f\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_shadowPa'+'rams,\x20vPos'+'itionW,\x20un'+'iform.ligh'+'t{i}_posit'+'ion,\x20&ligh'+'tDirArg,\x20d'+'LightDirNo'+'rmW,\x20dVert'+'exNormalW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('#endif\x0a\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Fade\x20direc'+'tional\x20sha'+'dow\x20at\x20the'+'\x20far\x20dista'+'nce\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'owCoord\x20=\x20'+'fadeShadow'+'(shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowCas'+'cadeDistan'+'ces);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20-----\x20s'+'ample\x20the\x20'+'shadow\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20---'+'--\x20directi'+'onal\x20light'+'\x20-----\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20VSM_'+'16F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowVSM1'+'6(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s,\x205.54);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20VS'+'M_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowVS'+'M32(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x2015.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2f(lengt'+'h(uniform.'+'light{i}_h'+'alfWidth),'+'\x20length(un'+'iform.ligh'+'t{i}_halfH'+'eight))\x20*\x20'+'uniform.li'+'ght{i}_sha'+'dowSearchA'+'rea;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCSS(ligh'+'t{i}_shado'+'wMap,\x20ligh'+'t{i}_shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20unif'+'orm.light{'+'i}_shadowP'+'arams,\x20uni'+'form.light'+'{i}_camera'+'Params,\x20sh'+'adowSearch'+'Area,\x20ligh'+'tDirW_in);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CSS(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x20unifo'+'rm.light{i'+'}_cameraPa'+'rams,\x20unif'+'orm.light{'+'i}_softSha'+'dowParams,'+'\x20lightDirW'+'_in);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF1_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF1x1('+'light{i}_s'+'hadowMap,\x20'+'light{i}_s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'uniform.li'+'ght{i}_sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_16F\x20|'+'|\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF3_3'+'2F\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowPCF3x'+'3(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_16F'+'\x20||\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF5')+('_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x20//\x20-'+'----\x20spot\x20'+'light\x20----'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM16'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x205.54,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM32'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x2015.0,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20!=\x20PU'+'NCTUAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f\x20=\x20vec'+'2f(length('+'uniform.li'+'ght{i}_hal'+'fWidth),\x20l'+'ength(unif'+'orm.light{'+'i}_halfHei'+'ght))\x20*\x20un'+'iform.ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowSearc'+'hArea:\x20vec')+('2f\x20=\x20vec2f'+'(uniform.l'+'ight{i}_sh'+'adowSearch'+'Area);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCSS'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x20uniform.'+'light{i}_c'+'ameraParam'+'s,\x20shadowS'+'earchArea,'+'\x20lightDirW'+'_in);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'16F\x20||\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF1_32F\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF1x1'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'5_16F\x20||\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF5_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCF5'+'x5(light{i'+'}_shadowMa'+'p,\x20light{i'+'}_shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20uniform'+'.light{i}_'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20')+('\x20\x20\x20#endif\x0a'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x20//\x20--'+'---\x20omni\x20l'+'ight\x20-----'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f;\x20//\x20U'+'se\x20var\x20bec'+'ause\x20assig'+'ned\x20in\x20if/'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owSearchAr'+'ea:\x20vec2f\x20'+'=\x20vec2f(le'+'ngth(unifo'+'rm.light{i'+'}_halfWidt'+'h),\x20length'+'(uniform.l'+'ight{i}_ha'+'lfHeight))'+'\x20*\x20uniform'+'.light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'SearchArea'+':\x20vec2f\x20=\x20'+'vec2f(unif'+'orm.light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20un'+'iform.ligh'+'t{i}_camer'+'aParams,\x20s'+'hadowSearc'+'hArea,\x20lig'+'htDirW_in)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in')+(');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),yD='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'var\x20areaLi'+'ghtsLutTex'+'1:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20areaLight'+'sLutTex2:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20areaL'+'ightsLutTe'+'x2Sampler:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'omni\x20/\x20spo'+'t\x20PCSS\x20is\x20'+('not\x20suppor'+'ted\x20on\x20Web'+'GPU\x20curren'+'tly,\x20as\x20th'+'is\x20is\x20only'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0a\x20\x20\x20\x20'+'//\x20#includ'+'e\x20\x22shadowP'+'CSSPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22shadowSof'+'tPS\x22\x0a#endi'+'f\x0a\x0a#if\x20def'+'ined(SHADO'+'W_KIND_VSM'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owEVSMPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22falloff'+'LinearPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_SQUARED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fallof'+'fInvSquare'+'dPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_CODE_L'+'IGHTS_POIN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDirPointP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22spotPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'CODE_COOKI'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22cook'+'iePS\x22\x0a#end'+'if\x0a\x0a//\x20clu'+'stered\x20lig'+'hting\x0a#ifd'+'ef\x20LIT_CLU'+'STERED_LIG'+'HTS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22cl'+'usteredLig'+'htPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIGHT_COU'+'NT\x20>\x200\x0a\x20\x20\x20'+'\x20//\x20LOOP\x20-'+'\x20generate\x20'+'shadow\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionShadow'+'PS,\x20LIGHT_'+'COUNT\x22\x0a\x0a\x20\x20'+'\x20\x20//\x20LOOP\x20'+'-\x20generate'+'\x20light\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionLightP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a'),vD='\x0afn\x20addLig'+'htMap(\x0a\x20\x20\x20'+'\x20lightmap:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20dir:\x20vec'+'3f,\x0a\x20\x20\x20\x20wo'+'rldNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20viewDir:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20reflecti'+'onDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20ve'+'rtexNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20tbn:\x20ma'+'t3x3f\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20iridesce'+'nceIntensi'+'ty:\x20f32\x0a#e'+'ndif\x0a)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x20&&'+'\x20defined(L'+'IT_DIR_LIG'+'HTMAP)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'dot(dir,\x20d'+'ir)\x20<\x200.00'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20dD'+'iffuseLigh'+'t\x20+\x20lightm'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20vli'+'ght:\x20f32\x20='+'\x20saturate('+'dot(dir,\x20-'+'vertexNorm'+'al));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20flight:\x20'+'f32\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20nlig'+'ht:\x20f32\x20=\x20'+'(flight\x20/\x20'+'max(vlight'+',\x200.01))\x20*'+'\x200.5;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20=\x20dDiff'+'useLight\x20+'+'\x20lightmap\x20'+'*\x20nlight\x20*'+'\x202.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20halfDir'+':\x20vec3f\x20=\x20'+'normalize('+'-dir\x20+\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20specula'+'rLight:\x20ve'+'c3f\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+('_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'=\x20specular'+'Light\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(d'+'ot(viewDir'+',\x20halfDir)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gloss,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20,\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceI'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20specularL'+'ight;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'non-direct'+'ional\x20ligh'+'tmap\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20+\x20ligh'+'tmap;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),xD='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'var<privat'+'e>\x20dLightm'+'apDir:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'dirLightMa'+'p:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_dirL'+'ightMapSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0afn\x20getL'+'ightMap()\x20'+'{\x0a\x0a\x20\x20\x20\x20dLi'+'ghtmap\x20=\x20v'+'ec3f(1.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_TEXTURE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Lightmap\x20='+'\x20dLightmap'+'\x20*\x20{STD_LI'+'GHT_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_LIGHT_T'+'EXTURE_NAM'+'E},\x20{STD_L'+'IGHT_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+')).{STD_LI'+'GHT_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_LIGHTMAP'+'_DIR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20dir:\x20vec3'+'f\x20=\x20textur'+'eSampleBia'+'s(texture_'+'dirLightMa'+'p,\x20texture'+'_dirLightM'+'apSampler,'+'\x20{STD_LIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).xyz\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20d'+'irDot\x20=\x20do'+'t(dir,\x20dir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tmapDir\x20=\x20'+'select(vec'+'3(0.0),\x20di'+'r\x20/\x20sqrt(d'+'irDot),\x20di'+'rDot\x20>\x200.0'+'01);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dL'+'ightmap\x20=\x20'+'dLightmap\x20'+'*\x20saturate'+'(vVertexCo'+'lor.{STD_L'+'IGHT_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a',TD='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'fn\x20calcLig'+'htSpecular'+'(gloss:\x20f3'+'2,\x20worldNo'+'rmal:\x20vec3'+'f,\x20viewDir'+':\x20vec3f,\x20h'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'tbn:\x20mat3x'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20PI:\x20f32\x20='+'\x203.1415926'+'53589793;\x0a'+'\x20\x20\x20\x20let\x20ro'+'ughness:\x20f'+'32\x20=\x20max(('+'1.0\x20-\x20glos'+'s)\x20*\x20(1.0\x20'+'-\x20gloss),\x20'+'0.001);\x0a\x20\x20'+'\x20\x20let\x20alph'+'aRoughness'+':\x20f32\x20=\x20ro'+'ughness\x20*\x20'+'roughness;'+'\x0a\x20\x20\x20\x20let\x20a'+'nisotropy:'+'\x20f32\x20=\x20dAn'+'isotropy;\x0a'+'\x20\x20\x20\x20let\x20di'+'rection:\x20v'+'ec2f\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x0a\x20'+'\x20\x20\x20let\x20at:'+'\x20f32\x20=\x20mix'+'(alphaRoug'+'hness,\x201.0'+',\x20anisotro'+'py\x20*\x20aniso'+'tropy);\x0a\x20\x20'+'\x20\x20let\x20ab:\x20'+'f32\x20=\x20clam'+'p(alphaRou'+'ghness,\x200.'+'001,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20NoH:\x20f32\x20'+'=\x20dot(worl'+'dNormal,\x20h'+');\x0a\x20\x20\x20\x20let'+'\x20ToH:\x20f32\x20'+'=\x20dot(anis'+'otropicT,\x20'+'h);\x0a\x20\x20\x20\x20le'+'t\x20BoH:\x20f32'+'\x20=\x20dot(ani'+'sotropicB,'+'\x20h);\x0a\x0a\x20\x20\x20\x20'+'let\x20a2:\x20f3'+'2\x20=\x20at\x20*\x20a'+'b;\x0a\x20\x20\x20\x20let'+'\x20v:\x20vec3f\x20'+'=\x20vec3f(ab'+'\x20*\x20ToH,\x20at'+'\x20*\x20BoH,\x20a2'+'\x20*\x20NoH);\x0a\x20'+'\x20\x20\x20let\x20v2:'+'\x20f32\x20=\x20dot'+'(v,\x20v);\x0a\x20\x20'+'\x20\x20let\x20w2:\x20'+'f32\x20=\x20a2\x20/'+'\x20v2;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20let\x20To'+'V:\x20f32\x20=\x20d'+'ot(anisotr'+'opicT,\x20vie'+('wDir);\x0a\x20\x20\x20'+'\x20let\x20BoV:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20viewDi'+'r);\x0a\x20\x20\x20\x20le'+'t\x20ToL:\x20f32'+'\x20=\x20dot(ani'+'sotropicT,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20let\x20BoL:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20let\x20No'+'V:\x20f32\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'let\x20NoL:\x20f'+'32\x20=\x20dot(w'+'orldNormal'+',\x20-lightDi'+'rNorm);\x0a\x0a\x20'+'\x20\x20\x20let\x20lam'+'bdaV:\x20f32\x20'+'=\x20NoL\x20*\x20le'+'ngth(vec3f'+'(at\x20*\x20ToV,'+'\x20ab\x20*\x20BoV,'+'\x20NoV));\x0a\x20\x20'+'\x20\x20let\x20lamb'+'daL:\x20f32\x20='+'\x20NoV\x20*\x20len'+'gth(vec3f('+'at\x20*\x20ToL,\x20'+'ab\x20*\x20BoL,\x20'+'NoL));\x0a\x20\x20\x20'+'\x20let\x20G:\x20f3'+'2\x20=\x200.5\x20/\x20'+'(lambdaV\x20+'+'\x20lambdaL);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20D\x20*\x20G;\x0a'+'}\x0a\x0afn\x20getL'+'ightSpecul'+'ar(h:\x20vec3'+'f,\x20reflDir'+':\x20vec3f,\x20w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'DirNorm:\x20v'+'ec3f,\x20glos'+'s:\x20f32,\x20tb'+'n:\x20mat3x3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20calcLigh'+'tSpecular('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir,\x20h'+',\x20lightDir'+'Norm,\x20tbn)'+';\x0a}\x0a'),wD='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afn\x20c'+'alcLightSp'+'ecular(glo'+'ss:\x20f32,\x20w'+'orldNormal'+':\x20vec3f,\x20h'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20nh:\x20'+'f32\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'specPow:\x20f'+'32\x20=\x20exp2('+'gloss\x20*\x2011'+'.0);\x20//\x20gl'+'ossiness\x20i'+'s\x20linear,\x20'+'power\x20is\x20n'+'ot;\x200\x20-\x2020'+'48\x0a\x0a\x20\x20\x20\x20//'+'\x20Hack:\x20On\x20'+'Mac\x20OS\x20X,\x20'+'calling\x20po'+'w\x20with\x20zer'+'o\x20for\x20the\x20'+'exponent\x20g'+'enerates\x20h'+'ideous\x20art'+'ifacts\x20so\x20'+'bias\x20up\x20a\x20'+'little\x0a\x20\x20\x20'+'\x20specPow\x20='+'\x20max(specP'+'ow,\x200.0001'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20pow(n'+'h,\x20specPow'+')\x20*\x20(specP'+'ow\x20+\x202.0)\x20'+'/\x208.0;\x0a}\x0a\x0a'+'fn\x20getLigh'+'tSpecular('+'h:\x20vec3f,\x20'+'reflDir:\x20v'+'ec3f,\x20worl'+'dNormal:\x20v'+'ec3f,\x20view'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20tbn:\x20'+'mat3x3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',ED='\x0a\x0afn\x20sheen'+'D(normal:\x20'+'vec3f,\x20h:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'PI:\x20f32\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20let\x20inv'+'R:\x20f32\x20=\x201'+'.0\x20/\x20(roug'+'hness\x20*\x20ro'+'ughness);\x0a'+'\x20\x20\x20\x20var\x20co'+'s2h:\x20f32\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20=\x20c'+'os2h\x20*\x20cos'+'2h;\x0a\x20\x20\x20\x20le'+'t\x20sin2h:\x20f'+'32\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'fn\x20sheenV('+'normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20light:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20max(dot'+'(normal,\x20v'+'iewDir),\x200'+'.000001);\x0a'+'\x20\x20\x20\x20let\x20No'+'L:\x20f32\x20=\x20m'+'ax(dot(nor'+'mal,\x20light'+'),\x200.00000'+'1);\x0a\x20\x20\x20\x20re'+'turn\x201.0\x20/'+'\x20(4.0\x20*\x20(N'+'oL\x20+\x20NoV\x20-'+'\x20NoL\x20*\x20NoV'+'));\x0a}\x0a\x0afn\x20'+'getLightSp'+'ecularShee'+'n(h:\x20vec3f'+',\x20worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f,\x20li'+'ghtDirNorm'+':\x20vec3f,\x20s'+'heenGloss:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20let\x20V:\x20f'+'32\x20=\x20sheen'+'V(worldNor'+'mal,\x20viewD'+'ir,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20return'+'\x20D\x20*\x20V;\x0a}',bD='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afn\x20linear'+'izeDepthWi'+'thParams(z'+':\x20f32,\x20cam'+'eraParams:'+'\x20vec4f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20if\x20(camer'+'aParams.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(came'+'raParams.z'+'\x20*\x20cameraP'+'arams.y)\x20/'+'\x20(cameraPa'+'rams.y\x20+\x20z'+'\x20*\x20(camera'+'Params.z\x20-'+'\x20cameraPar'+'ams.y));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20cam'+'eraParams.'+'z\x20+\x20z\x20*\x20(c'+'ameraParam'+'s.y\x20-\x20came'+'raParams.z'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0a#ifndef\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20#de'+'fine\x20CAMER'+'APLANES\x0a\x20\x20'+'\x20\x20uniform\x20'+'camera_par'+'ams:\x20vec4f'+';\x20\x20\x20//\x20x:\x20'+'1\x20/\x20camera'+'_far,\x20\x20\x20\x20\x20'+'\x20y:\x20camera'+'_far,\x20\x20\x20\x20\x20'+'z:\x20camera_'+'near,\x20\x20\x20\x20\x20'+'\x20\x20\x20w:\x20is_o'+'rtho\x0a#endi'+'f\x0a\x0afn\x20line'+'arizeDepth'+'(z:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pthWithPar'+'ams(z,\x20uni'+'form.camer'+'a_params);'+'\x0a}\x0a#endif\x20'+'//\x20LINEARI'+'ZE_DEPTH\x0a',AD='\x0afn\x20evalua'+'teBackend('+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'//\x20apply\x20S'+'SAO\x20during'+'\x20lighting\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SSAO\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_ao\x20='+'\x20litArgs_a'+'o\x20*\x20textur'+'eSampleLev'+'el(ssaoTex'+'ture,\x20ssao'+'TextureSam'+'pler,\x20pcPo'+'sition.xy\x20'+'*\x20uniform.'+'ssaoTextur'+'eSizeInv,\x20'+'0.0).r;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nsform\x20tan'+'gent\x20space'+'\x20normals\x20t'+'o\x20world\x20sp'+'ace\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_N'+'EEDS_NORMA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getReflD'+'ir(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20litAr'+'gs_gloss,\x20'+'dTBN);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'DirW\x20=\x20nor'+'malize(-re'+'flect(dVie'+'wDirW,\x20lit'+'Args_clear'+'coat_world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'f0:\x20f32\x20=\x20'+'1.0\x20/\x20litA'+'rgs_ior;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20f0\x20=\x20(f0\x20'+'-\x201.0)\x20/\x20('+'f0\x20+\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20f0\x20=\x20f0'+'\x20*\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+('ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceF'+'resnel:\x20ve'+'c3f\x20=\x20getI'+'ridescence'+'Diffractio'+'n(saturate'+'(dot(dView'+'DirW,\x20litA'+'rgs_worldN'+'ormal)),\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_ir'+'idescence_'+'thickness)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20ambi'+'ent\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddAmbient('+'litArgs_wo'+'rldNormal)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20=\x20d'+'DiffuseLig'+'ht\x20*\x20(1.0\x20'+'-\x20litArgs_'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20move\x20ambi'+'ent\x20color\x20'+'out\x20of\x20dif'+'fuse\x20(used'+'\x20by\x20Lightm'+'apper,\x20to\x20'+'multiply\x20a'+'mbient\x20col'+'or\x20by\x20accu'+'mulated\x20AO'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SEPARATE_'+'AMBIENT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20dAmbie'+'ntLight:\x20v'+'ec3f\x20=\x20dDi'+'ffuseLight'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'vec3(0.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20unif'+'orm.materi'+'al_ambient'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20LI'+'T_OCCLUDE_'+'DIRECT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeDiff'+'use(litArg'+'s_ao);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTMAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20litArgs_l'+'ightmap,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmapDi'+'r,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dViewDirW,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dReflD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dVertexNor'+'malW,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'BN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_irides'+'cence_inte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTING\x20||'+'\x20LIT_REFLE'+'CTIONS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddReflecti'+'onCC(ccRef'+'lDirW,\x20lit'+'Args_clear'+'coat_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'ccFresnel\x20'+'=\x20getFresn'+'elCC(dot(d'+'ViewDirW,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccRefle'+'ction\x20=\x20cc'+'Reflection'+'\x20*\x20ccFresn'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccFr'+'esnel\x20=\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'ection\x20=\x20c'+'cReflectio'+'n\x20*\x20litArg'+'s_specular'+'ityFactor;')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20addR'+'eflectionS'+'heen(litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20lit'+'Args_sheen'+'_gloss);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20Fresne'+'l\x20has\x20to\x20b'+'e\x20applied\x20'+'to\x20reflect'+'ions\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'Reflection'+'(dReflDirW'+',\x20litArgs_'+'gloss);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_FRESNEL_'+'MODEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction.rgb\x20'+'*\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'dReflectio'+'n.rgb\x20*\x20li'+'tArgs_spec'+'ularity,\x20d'+'Reflection'+'.a);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve')+('c4f(dRefle'+'ction.rgb\x20'+'*\x20litArgs_'+'specularit'+'yFactor,\x20d'+'Reflection'+'.a);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20AREA'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20*'+'\x20litArgs_s'+'pecularity'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20evalua'+'te\x20materia'+'l\x20based\x20ar'+'ea\x20lights\x20'+'data,\x20shar'+'ed\x20by\x20all\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcLTCLight'+'Values(lit'+'Args_gloss'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20litArg'+'s_specular'+'ity,\x20litAr'+'gs_clearco'+'at_gloss,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20evalua'+'te\x20all\x20non'+'-clustered'+'\x20lights\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22lightEval'+'uationPS,\x20'+'LIGHT_COUN'+'T\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'USTERED_LI'+'GHTS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'ClusteredL'+'ights(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dR'+'eflDirW,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_CLEARCOAT'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20ccRe'+'flDirW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'litArgs_sp'+'ecularity,'+'\x20dVertexNo'+'rmalW,\x20dTB'+'N,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_g'+'loss,\x20litA'+'rgs_sheen_'+'gloss,\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20AREA_LI'+'GHTS\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x20has'+'\x20to\x20be\x20acc'+'umulated\x20d'+'ifferently'+'\x20if\x20we\x20wan'+'t\x20area\x20lig'+'hts\x20to\x20loo'+'k\x20correct\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_clearc'+'oat_specul'+'arity\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20vec3(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addRefra'+'ction(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_worldNorm'+'al,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dViewDirW'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_specu'+'larity,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr')+('gs_albedo,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_tran'+'smission,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_ior,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_dispers'+'ion\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'ambient\x20oc'+'clusion\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_OCCLU'+'DE_DIRECT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeD'+'iffuse(lit'+'Args_ao);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeSpec'+'ular(litAr'+'gs_gloss,\x20'+'litArgs_ao'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20*\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20!defi'+'ned(LIT_OP'+'ACITY_FADE'+'S_SPECULAR'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'==\x20NORMAL\x20'+'||\x20LIT_BLE'+'ND_TYPE\x20=='+'\x20PREMULTIP'+'LIED\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specLum:'+'\x20f32\x20=\x20dot'+'((dSpecula'+'rLight\x20+\x20d'+'Reflection'+'.rgb\x20*\x20dRe'+'flection.a'+'),\x20vec3f(\x20'+'0.2126,\x200.'+'7152,\x200.07'+'22\x20));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'Lum\x20=\x20spec'+'Lum\x20+\x20dot('+'ccSpecular'+'Light\x20*\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20+\x20'+'ccReflecti'+'on\x20*\x20litAr'+'gs_clearco'+'at_specula'+'rity,\x20vec3'+'f(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20c'+'lamp(litAr'+'gs_opacity'+'\x20+\x20gammaCo'+'rrectInput'+'(specLum),'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_opaci'+'ty\x20=\x20litAr'+'gs_opacity'+'\x20*\x20uniform'+'.material_'+'alphaFade;'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20end\x20chunk'+'s\x20-\x20when\x20b'+'aking\x20ligh'+'tmap\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTMAP_B'+'AKING\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_COLOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22b'+'akeLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_LIGH'+'TMAP_BAKIN'+'G_DIR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22ba'+'keDirLmEnd'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'end\x20chunks'+'\x20-\x20in\x20all\x20'+'other\x20case'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'endPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22outpu'+'tAlphaPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_MSD'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20apply'+'Msdf(outpu'+'t.color);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22outp'+'utPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'debugOutpu'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHADOW_CA'+'TCHER\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20when\x20t'+'he\x20shadow\x20'+'catcher\x20is'+'\x20enabled\x20-'+'\x20accumulat'+'ed\x20shadows')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'vec3f(dSha'+'dowCatcher'+'),\x20output.'+'color.a);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),CD='\x0a\x0a//\x20globa'+'ls\x0avar<pri'+'vate>\x20sRef'+'lection:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'VertexNorm'+'alW:\x20vec3f'+';\x0avar<priv'+'ate>\x20dTang'+'entW:\x20vec3'+'f;\x0avar<pri'+'vate>\x20dBin'+'ormalW:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dV'+'iewDirW:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'ReflDirW:\x20'+'vec3f;\x0avar'+'<private>\x20'+'ccReflDirW'+':\x20vec3f;\x0a\x0a'+'//\x20Per-lig'+'ht\x20tempora'+'ries\x0avar<p'+'rivate>\x20dL'+'ightDirNor'+'mW:\x20vec3f;'+'\x0avar<priva'+'te>\x20dAtten'+':\x20f32;\x0a\x0a//'+'\x20Outputs\x0av'+'ar<private'+'>\x20dTBN:\x20ma'+'t3x3f;\x0avar'+'<private>\x20'+'dReflectio'+'n:\x20vec4f;\x0a'+'var<privat'+'e>\x20dDiffus'+'eLight:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccFres'+'nel:\x20f32;\x0a'+'var<privat'+'e>\x20ccRefle'+'ction:\x20vec'+'3f;\x0avar<pr'+'ivate>\x20ccS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccSpec'+'ularityNoF'+'res:\x20f32;\x0a'+'var<privat'+'e>\x20sSpecul'+'arLight:\x20v'+'ec3f;\x0a\x0a//\x20'+'FRAGMENT\x20S'+'HADER\x20INPU'+'TS:\x20UNIFOR'+'MS\x0a\x0a#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_dis'+'persion:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_al'+'phaFade:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_SSAO\x0a\x20\x20'+'\x20\x20var\x20ssao'+'Texture\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20ssaoT'+'extureSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20u'+'niform\x20ssa'+'oTextureSi'+'zeInv:\x20vec'+'2f;\x0a#endif'+'\x0a\x0a//\x20light'+'ing\x20and\x20sh'+'adowing\x20de'+('clarations'+'\x0a\x0a#ifdef\x20L'+'IT_SHADOW_'+'CATCHER\x0a\x20\x20'+'\x20\x20//\x20a\x20var'+'iable\x20to\x20a'+'ccumulate\x20'+'shadows\x20fo'+'r\x20shadow\x20c'+'atcher\x20mat'+'erials\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dShado'+'wCatcher:\x20'+'f32\x20=\x201.0;'+'\x0a#endif\x0a\x0a/'+'/\x20LOOP\x20-\x20u'+'niform\x20dec'+'larations\x20'+'for\x20all\x20no'+'n-clustere'+'d\x20lights\x0a#'+'if\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightDe'+'clarationP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'f\x20LIT_FRES'+'NEL_MODEL\x20'+'==\x20NONE\x20&&'+'\x20!defined('+'LIT_REFLEC'+'TIONS)\x20&&\x20'+'!defined(L'+'IT_DIFFUSE'+'_MAP)\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_OLD'+'_AMBIENT\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0a//'+'\x20lightmap\x20'+'baking\x0a#if'+'def\x20STD_LI'+'GHTMAP_DIR'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20bakeDir'+':\x20f32;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_ADD_AMBIE'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20ambie'+'ntBakeOccl'+'usionContr'+'ast:\x20f32;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20ambientB'+'akeOcclusi'+'onBrightne'+'ss:\x20f32;\x0a#'+'endif\x0a'),PD='\x0a\x0a@fragmen'+'t\x0afn\x20fragm'+'entMain(in'+'put:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ccSpecular'+'Light\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20cc'+'Reflection'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_N'+'ONE_SLICE_'+'MODE\x20==\x20SL'+'ICED\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22startNi'+'neSlicedPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20LIT_NONE'+'_SLICE_MOD'+'E\x20==\x20TILED'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'tartNineSl'+'icedTiledP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'NEEDS_NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dVertexNo'+'rmalW\x20=\x20no'+'rmalize(vN'+'ormalW);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_T'+'ANGENTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_HEIG'+'HTS)\x20||\x20de'+'fined(LIT_'+'USE_NORMAL'+'S)\x20||\x20defi'+'ned(LIT_US'+'E_CLEARCOA'+'T_NORMALS)'+'\x20||\x20define'+'d(LIT_GGX_'+'SPECULAR)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dTan'+'gentW\x20=\x20vT'+'angentW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dBino'+'rmalW\x20=\x20vB'+'inormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20getView'+'Dir();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_TBN'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getTBN('+'dTangentW,'+'\x20dBinormal'+'W,\x20dVertex'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'andleTwoSi'+'dedLightin'+'g();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+('\x0a\x20\x20\x20\x20//\x20in'+'voke\x20front'+'end\x20functi'+'ons\x0a\x20\x20\x20\x20ev'+'aluateFron'+'tend();\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22debugPr'+'ocessFront'+'endPS\x22\x0a\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput\x20='+'\x20evaluateB'+'ackend();\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainEndP'+'S\x22\x0a\x0a\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a}\x0a'),MD='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20material_'+'ambient:\x20v'+'ec3f;\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_LIGHTING'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22light'+'SpecularAn'+'isoGGXPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tSpecularB'+'linnPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0a#include'+'\x20\x22combineP'+'S\x22\x0a\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapAddP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22am'+'bientPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_MS'+'DF\x0a\x20\x20\x20\x20#in'+'clude\x20\x22msd'+'fPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22viewDirPS'+'\x22\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_GGX_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirAni'+'soPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22reflDirP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20f'+'unctionali')+('ty\x0a#includ'+'e\x20\x22lightin'+'gPS\x22\x0a\x0a'),DD='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',ID='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',LD='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a#endif'+'\x0a\x0a#ifdef\x20N'+'INESLICED\x0a'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vMask:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20varying\x20v'+'TiledUv:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dMaskG'+'lobal:\x20vec'+'2f;\x0a\x20\x20\x20\x20va'+'r<private>'+'\x20dTiledUvG'+'lobal:\x20vec'+'2f;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'uterScale:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'atlasRect:'+'\x20vec4f;\x0a\x0a#'+'endif\x0a\x0avar'+'<private>\x20'+'dPositionW'+':\x20vec3f;\x0av'+'ar<private'+'>\x20dModelMa'+'trix:\x20mat4'+'x4f;\x0a\x0a#inc'+'lude\x20\x22tran'+'sformCoreV'+'S\x22\x0a\x0a#ifdef'+'\x20UV0\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ertex_texC'+'oord0:\x20vec'+'2f;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'rtex_texCo'+'ord1:\x20vec2'+'f;\x0a\x20\x20\x20\x20#in'+'clude\x20\x22uv1'+'VS\x22\x0a#endif'+'\x0a\x0a\x0a#ifdef\x20'+'LINEAR_DEP'+'TH\x0a\x20\x20\x20\x20#if'+'ndef\x20VIEWM'+'ATRIX\x0a\x20\x20\x20\x20'+'#define\x20VI'+'EWMATRIX\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#inc'+'lude\x20\x22tran'+'sformVS\x22\x0a\x0a'+'#ifdef\x20NOR'+'MALS\x0a\x20\x20\x20\x20#'+'include\x20\x22n'+'ormalCoreV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malVS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20TANGENTS'+'\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_tangent:'+'\x20vec4f;\x0a#e'+'ndif\x0a\x0a//\x20e'+'xpand\x20unif'+'orms\x20for\x20u'+'v\x20transfor'+'ms\x0a#includ'+'e\x20\x22uvTrans'+'formUnifor'+'msPS,\x20UV_T'+'RANSFORMS_'+('COUNT\x22\x0a\x0a#i'+'fdef\x20MSDF\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22msdfVS'+'\x22\x0a#endif\x0a\x0a'+'#include\x20\x20'+'\x22litUserCo'+'deVS\x22\x0a\x0a@ve'+'rtex\x0afn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'MainStartV'+'S\x22\x0a\x0a\x20\x20\x20\x20va'+'r\x20output\x20:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20get'+'Position()'+';\x0a\x20\x20\x20\x20outp'+'ut.vPositi'+'onW\x20=\x20getW'+'orldPositi'+'on();\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20NO'+'RMALS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vNormalW\x20'+'=\x20getNorma'+'l();\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TA'+'NGENTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vTangent'+'W\x20=\x20normal'+'ize(dNorma'+'lMatrix\x20*\x20'+'vertex_tan'+'gent.xyz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vBin'+'ormalW\x20=\x20c'+'ross(outpu'+'t.vNormalW'+',\x20output.v'+'TangentW)\x20'+'*\x20vertex_t'+'angent.w;\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(GG'+'X_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20UV0'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f\x20=\x20getU'+'v0();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20UV0_UNMOD'+'IFIED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20uv1:\x20vec2'+'f\x20=\x20getUv1'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20U'+'V1_UNMODIF'+'IED\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.vUv1\x20=\x20'+'uv1;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'xpand\x20code'+'\x20for\x20uv\x20tr'+'ansforms\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22uvTrans')+('formVS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20VERTEX_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition'+',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-(uniform'+'.matrix_vi'+'ew\x20*\x20vec4f'+'(output.vP'+'ositionW,\x20'+'1.0)).z;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MSDF\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unpac'+'kMsdfParam'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.outline_c'+'olor\x20=\x20dOu'+'tlineColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.out'+'line_thick'+'ness\x20=\x20dOu'+'tlineThick'+'ness;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.shadow_co'+'lor\x20=\x20dSha'+'dowColor;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.shado'+'w_offset\x20='+'\x20dShadowOf'+'fset;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vMask'+'\x20=\x20dMaskGl'+'obal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vTiledUv\x20'+'=\x20dTiledUv'+'Global;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndVS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),RD='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20evaluateF'+'rontend();'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PICK_PA'+'SS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20getP'+'ickOutput('+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20float2ve'+'c4(vLinear'+'Depth);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndPS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',OD='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avar<priva'+'te>\x20litArg'+'s_albedo:\x20'+'vec3f;\x0a\x0a//'+'\x20Transpare'+'ncy\x0avar<pr'+'ivate>\x20lit'+'Args_opaci'+'ty:\x20f32;\x0a\x0a'+'//\x20Emissio'+'n\x20color\x0ava'+'r<private>'+'\x20litArgs_e'+'mission:\x20v'+'ec3f;\x0a\x0a//\x20'+'Normal\x20dir'+'ection\x20in\x20'+'world\x20spac'+'e\x0avar<priv'+'ate>\x20litAr'+'gs_worldNo'+'rmal:\x20vec3'+'f;\x0a\x0a//\x20Amb'+'ient\x20occlu'+'sion\x20amoun'+'t,\x20range\x20['+'0..1]\x0avar<'+'private>\x20l'+'itArgs_ao:'+'\x20f32;\x0a\x0a//\x20'+'Light\x20map\x20'+'color\x0avar<'+'private>\x20l'+'itArgs_lig'+'htmap:\x20vec'+'3f;\x0a\x0a//\x20Li'+'ght\x20map\x20di'+'rection\x0ava'+'r<private>'+'\x20litArgs_l'+'ightmapDir'+':\x20vec3f;\x0a\x0a'+'//\x20Surface'+'\x20metalness'+'\x20factor,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_metalne'+'ss:\x20f32;\x0a\x0a'+'//\x20The\x20f0\x20'+'specularit'+'y\x20factor\x0av'+'ar<private'+'>\x20litArgs_'+'specularit'+'y:\x20vec3f;\x0a'+'\x0a//\x20Specul'+'arity\x20inte'+'nsity\x20fact'+'or,\x20range\x20'+'[0..1]\x0avar'+'<private>\x20'+'litArgs_sp'+'ecularityF'+'actor:\x20f32'+';\x0a\x0a//\x20The\x20'+'microfacet'+'\x20glossines'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0avar<pri'+'vate>\x20litA'+'rgs_gloss:'+'\x20f32;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_sheen'+'_gloss:\x20f3'+'2;\x0a\x0a//\x20The'+'\x20color\x20of\x20'+'the\x20f0\x20spe'+'cularity\x20f'+'actor\x20for\x20'+'the\x20sheen\x20'+'layer\x0avar<'+'private>\x20l'+'itArgs_she'+'en_specula'+'rity:\x20vec3'+'f;\x0a\x0a//\x20Tra'+'nsmission\x20'+'factor\x20(re'+('fraction),'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_trans'+'mission:\x20f'+'32;\x0a\x0a//\x20Un'+'iform\x20thic'+'kness\x20of\x20m'+'edium,\x20use'+'d\x20by\x20trans'+'mission,\x20r'+'ange\x20[0..i'+'nf]\x0avar<pr'+'ivate>\x20lit'+'Args_thick'+'ness:\x20f32;'+'\x0a\x0a//\x20Index'+'\x20of\x20refrac'+'tion\x0avar<p'+'rivate>\x20li'+'tArgs_ior:'+'\x20f32;\x0a\x0a//\x20'+'Dispersion'+',\x20range\x20[0'+'..1]\x20typic'+'ally,\x20but\x20'+'can\x20be\x20hig'+'her\x0avar<pr'+'ivate>\x20lit'+'Args_dispe'+'rsion:\x20f32'+';\x0a\x0a//\x20Irid'+'escence\x20ef'+'fect\x20inten'+'sity,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'iridescenc'+'e_intensit'+'y:\x20f32;\x0a\x0a/'+'/\x20Thicknes'+'s\x20of\x20the\x20i'+'ridescent\x20'+'microfilm\x20'+'layer,\x20val'+'ue\x20is\x20in\x20n'+'anometers,'+'\x20range\x20[0.'+'.1000]\x0avar'+'<private>\x20'+'litArgs_ir'+'idescence_'+'thickness:'+'\x20f32;\x0a\x0a//\x20'+'The\x20normal'+'\x20used\x20for\x20'+'the\x20clearc'+'oat\x20layer\x0a'+'var<privat'+'e>\x20litArgs'+'_clearcoat'+'_worldNorm'+'al:\x20vec3f;'+'\x0a\x0a//\x20Inten'+'sity\x20of\x20th'+'e\x20clearcoa'+'t\x20layer,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_clearco'+'at_specula'+'rity:\x20f32;'+'\x0a\x0a//\x20Gloss'+'iness\x20of\x20c'+'learcoat\x20l'+'ayer,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'clearcoat_'+'gloss:\x20f32'+';\x0a\x0a'),FD='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20t'+'extureBias'+':\x20f32\x20=\x20-1'+'000.0;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20texture'+'Bias:\x20f32;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ShaderArgs'+'PS\x22\x0a',ND='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20view_p'+'osition:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20li'+'ght_radius'+':\x20f32;\x0a#en'+'dif\x0a\x0a#if\x20S'+'HADOW_TYPE'+'\x20==\x20PCSS_3'+'2F\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lin'+'earizeDept'+'hPS\x22\x0a#endi'+'f\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serMainSta'+'rtPS\x22\x0a\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20/'+'/\x20using\x20no'+'n-standard'+'\x20depth,\x20i.'+'e\x20gl_FragC'+'oord.z\x0a\x20\x20\x20'+'\x20#ifdef\x20PE'+'RSPECTIVE_'+'DEPTH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20de'+'pth:\x20f32\x20='+'\x20input.pos'+'ition.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20PCS'+'S_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot/omni'+'\x20shadows\x20c'+'urrently\x20u'+'se\x20linear\x20'+'depth.\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20TODO:\x20us'+'e\x20perspect'+'ive\x20depth\x20'+'for\x20spot/o'+'mni\x20the\x20sa'+'me\x20way\x20as\x20'+'directiona'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT_TYPE\x20!'+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'depth\x20=\x20li'+'nearizeDep'+'thWithPara'+'ms(depth,\x20'+'camera_par'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20depth:\x20'+'f32\x20=\x20min('+'distance(u'+'niform.vie'+'w_position'+',\x20input.vP'+'ositionW)\x20'+'/\x20uniform.'+'light_radi'+'us,\x200.9999'+'9);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'MODIFIED_D'+'EPTH\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SHADO'+'W_TYPE\x20==\x20'+'VSM_16F\x20||'+'\x20SHADOW_TY'+('PE\x20==\x20VSM_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20SHAD'+'OW_TYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20expon'+'ent:\x20f32\x20='+'\x2015.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20exp'+'onent:\x20f32'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dep'+'th_vsm\x20=\x202'+'.0\x20*\x20depth'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dept'+'h_vsm\x20=\x20ex'+'p(exponent'+'\x20*\x20depth_v'+'sm);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(depth_'+'vsm,\x20depth'+'_vsm\x20*\x20dep'+'th_vsm,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20PCSS'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(de'+'pth,\x200.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MODIFI'+'ED_DEPTH\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20If'+'\x20we\x20end\x20up'+'\x20using\x20mod'+'ified\x20dept'+'h,\x20it\x20need'+'s\x20to\x20be\x20ex'+'plicitly\x20w'+'ritten\x20to\x20'+'gl_FragDep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.frag'+'Depth\x20=\x20de'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'just\x20the\x20s'+'implest\x20co'+'de,\x20color\x20'+'is\x20not\x20wri'+'tten\x20anywa'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),kD='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0afn\x20'+'LTC_Uv(N:\x20'+'vec3f,\x20V:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20co'+'nst\x20LUT_SI'+'ZE:\x20f32\x20=\x20'+'64.0;\x0a\x20\x20\x20\x20'+'const\x20LUT_'+'SCALE:\x20f32'+'\x20=\x20(LUT_SI'+'ZE\x20-\x201.0)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_BIAS'+':\x20f32\x20=\x200.'+'5\x20/\x20LUT_SI'+'ZE;\x0a\x20\x20\x20\x20le'+'t\x20dotNV:\x20f'+'32\x20=\x20satur'+'ate(dot(\x20N'+',\x20V\x20));\x0a\x20\x20'+'\x20\x20//\x20textu'+'re\x20paramet'+'erized\x20by\x20'+'sqrt(\x20GGX\x20'+'alpha\x20)\x20an'+'d\x20sqrt(\x201\x20'+'-\x20cos(\x20the'+'ta\x20)\x20)\x0a\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20vec'+'2f(\x20roughn'+'ess,\x20sqrt('+'\x201.0\x20-\x20dot'+'NV\x20)\x20);\x0a\x20\x20'+'\x20\x20return\x20u'+'v\x20*\x20LUT_SC'+'ALE\x20+\x20LUT_'+'BIAS;\x0a}\x0a\x0af'+'n\x20LTC_Clip'+'pedSphereF'+'ormFactor('+'\x20f:\x20vec3f\x20'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20//\x20Re'+'al-Time\x20Ar'+'ea\x20Lightin'+'g:\x20a\x20Journ'+'ey\x20from\x20Re'+'search\x20to\x20'+'Production'+'\x20(p.102)\x0a\x20'+'\x20\x20\x20//\x20An\x20a'+'pproximati'+'on\x20of\x20the\x20'+'form\x20facto'+'r\x20of\x20a\x20hor'+'izon-clipp'+'ed\x20rectang'+'le.\x0a\x20\x20\x20\x20le'+'t\x20l:\x20f32\x20='+'\x20length(\x20f'+'\x20);\x0a\x20\x20\x20\x20re'+'turn\x20max(\x20'+'(\x20l\x20*\x20l\x20+\x20'+'f.z\x20)\x20/\x20(\x20'+'l\x20+\x201.0\x20),'+'\x200.0\x20);\x0a}\x0a'+'\x0afn\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'v1:\x20vec3f,'+'\x20v2:\x20vec3f'+'\x20)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20x:\x20f32\x20='+'\x20dot(\x20v1,\x20'+'v2\x20);\x0a\x20\x20\x20\x20'+'let\x20y:\x20f32'+('\x20=\x20abs(\x20x\x20'+');\x0a\x20\x20\x20\x20//\x20'+'rational\x20p'+'olynomial\x20'+'approximat'+'ion\x20to\x20the'+'ta\x20/\x20sin(\x20'+'theta\x20)\x20/\x20'+'2PI\x0a\x20\x20\x20\x20le'+'t\x20a:\x20f32\x20='+'\x200.8543985'+'\x20+\x20(\x200.496'+'5155\x20+\x200.0'+'145206\x20*\x20y'+'\x20)\x20*\x20y;\x0a\x20\x20'+'\x20\x20let\x20b:\x20f'+'32\x20=\x203.417'+'5940\x20+\x20(\x204'+'.1616724\x20+'+'\x20y\x20)\x20*\x20y;\x0a'+'\x20\x20\x20\x20let\x20v:'+'\x20f32\x20=\x20a\x20/'+'\x20b;\x0a\x20\x20\x20\x20le'+'t\x20inv_sqrt'+'_term\x20=\x20in'+'verseSqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7f\x20)\x20);\x0a'+'\x20\x20\x20\x20let\x20th'+'eta_sinthe'+'ta:\x20f32\x20=\x20'+'select(\x20(0'+'.5\x20*\x20inv_s'+'qrt_term\x20-'+'\x20v),\x20v,\x20x\x20'+'>\x200.0\x20);\x0a\x20'+'\x20\x20\x20return\x20'+'cross(\x20v1,'+'\x20v2\x20)\x20*\x20th'+'eta_sinthe'+'ta;\x0a}\x0a\x0astr'+'uct\x20Coords'+'\x20{\x0a\x20\x20\x20\x20coo'+'rd0:\x20vec3f'+',\x0a\x20\x20\x20\x20coor'+'d1:\x20vec3f,'+'\x0a\x20\x20\x20\x20coord'+'2:\x20vec3f,\x0a'+'\x20\x20\x20\x20coord3'+':\x20vec3f,\x0a}'+'\x0a\x0afn\x20LTC_E'+'valuateRec'+'t(\x20N:\x20vec3'+'f,\x20V:\x20vec3'+'f,\x20P:\x20vec3'+'f,\x20mInv:\x20m'+'at3x3f,\x20re'+'ctCoords:\x20'+'Coords)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20//\x20bail\x20i'+'f\x20point\x20is'+'\x20on\x20back\x20s'+'ide\x20of\x20pla'+'ne\x20of\x20ligh'+'t\x0a\x20\x20\x20\x20//\x20a'+'ssumes\x20ccw'+'\x20winding\x20o'+'rder\x20of\x20li'+'ght\x20vertic'+'es\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec3f'+'\x20=\x20rectCoo'+'rds.coord1'+'\x20-\x20rectCoo'+'rds.coord0'+';\x0a\x20\x20\x20\x20let\x20'+'v2:\x20vec3f\x20'+'=\x20rectCoor'+'ds.coord3\x20'+'-\x20rectCoor'+'ds.coord0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'lightNorma'+'l:\x20vec3f\x20='+'\x20cross(\x20v1'+',\x20v2\x20);\x0a\x20\x20'+'\x20\x20let\x20fact'+'or:\x20f32\x20=\x20'+'sign(-dot('+'\x20lightNorm'+'al,\x20P\x20-\x20re'+'ctCoords.c'+'oord0\x20));\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'nstruct\x20or'+'thonormal\x20'+'basis\x20arou'+'nd\x20N\x0a\x20\x20\x20\x20l')+('et\x20T1:\x20vec'+'3f\x20=\x20norma'+'lize(\x20V\x20-\x20'+'N\x20*\x20dot(\x20V'+',\x20N\x20)\x20);\x0a\x20'+'\x20\x20\x20let\x20T2:'+'\x20vec3f\x20=\x20f'+'actor\x20*\x20cr'+'oss(\x20N,\x20T1'+'\x20);\x20//\x20neg'+'ated\x20from\x20'+'paper;\x20pos'+'sibly\x20due\x20'+'to\x20a\x20diffe'+'rent\x20hande'+'dness\x20of\x20w'+'orld\x20coord'+'inate\x20syst'+'em\x0a\x20\x20\x20\x20//\x20'+'compute\x20tr'+'ansform\x0a\x20\x20'+'\x20\x20let\x20mat:'+'\x20mat3x3f\x20='+'\x20mInv\x20*\x20tr'+'anspose(\x20m'+'at3x3f(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'transform\x20'+'rect\x0a\x20\x20\x20\x20v'+'ar\x20coords:'+'\x20array<vec'+'3f,\x204>;\x0a\x20\x20'+'\x20\x20coords[0'+']\x20=\x20mat\x20*\x20'+'(\x20rectCoor'+'ds.coord0\x20'+'-\x20P\x20);\x0a\x20\x20\x20'+'\x20coords[1]'+'\x20=\x20mat\x20*\x20('+'\x20rectCoord'+'s.coord1\x20-'+'\x20P\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20mat\x20*\x20(\x20'+'rectCoords'+'.coord2\x20-\x20'+'P\x20);\x0a\x20\x20\x20\x20c'+'oords[3]\x20='+'\x20mat\x20*\x20(\x20r'+'ectCoords.'+'coord3\x20-\x20P'+'\x20);\x0a\x20\x20\x20\x20//'+'\x20project\x20r'+'ect\x20onto\x20s'+'phere\x0a\x20\x20\x20\x20'+'coords[0]\x20'+'=\x20normaliz'+'e(\x20coords['+'0]\x20);\x0a\x20\x20\x20\x20'+'coords[1]\x20'+'=\x20normaliz'+'e(\x20coords['+'1]\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20normaliz'+'e(\x20coords['+'2]\x20);\x0a\x20\x20\x20\x20'+'coords[3]\x20'+'=\x20normaliz'+'e(\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20vector\x20'+'form\x20facto'+'r\x0a\x20\x20\x20\x20var\x20'+'vectorForm'+'Factor:\x20ve'+'c3f\x20=\x20vec3'+'f(\x200.0\x20);\x0a'+'\x20\x20\x20\x20vector'+'FormFactor'+'\x20=\x20vectorF'+'ormFactor\x20'+'+\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[0],\x20c'+'oords[1]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20=\x20vecto'+'rFormFacto'+'r\x20+\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'coords[1],'+'\x20coords[2]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa')+('ctor\x20=\x20vec'+'torFormFac'+'tor\x20+\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[2'+'],\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20=\x20v'+'ectorFormF'+'actor\x20+\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[3],\x20coord'+'s[0]\x20);\x0a\x20\x20'+'\x20\x20//\x20adjus'+'t\x20for\x20hori'+'zon\x20clippi'+'ng\x0a\x20\x20\x20\x20let'+'\x20result:\x20f'+'32\x20=\x20LTC_C'+'lippedSphe'+'reFormFact'+'or(\x20vector'+'FormFactor'+'\x20);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20resu'+'lt;\x0a}\x0a\x0avar'+'<private>\x20'+'dLTCCoords'+':\x20Coords;\x0a'+'fn\x20getLTCL'+'ightCoords'+'(lightPos:'+'\x20vec3f,\x20ha'+'lfWidth:\x20v'+'ec3f,\x20half'+'Height:\x20ve'+'c3f)\x20->\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20var\x20coord'+'s:\x20Coords;'+'\x0a\x20\x20\x20\x20coord'+'s.coord0\x20='+'\x20lightPos\x20'+'+\x20halfWidt'+'h\x20-\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd1\x20=\x20ligh'+'tPos\x20-\x20hal'+'fWidth\x20-\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20coord'+'s.coord2\x20='+'\x20lightPos\x20'+'-\x20halfWidt'+'h\x20+\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd3\x20=\x20ligh'+'tPos\x20+\x20hal'+'fWidth\x20+\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20retur'+'n\x20coords;\x0a'+'}\x0a\x0avar<pri'+'vate>\x20dSph'+'ereRadius:'+'\x20f32;\x0afn\x20g'+'etSphereLi'+'ghtCoords('+'lightPos:\x20'+'vec3f,\x20hal'+'fWidth:\x20ve'+'c3f,\x20halfH'+'eight:\x20vec'+'3f)\x20->\x20Coo'+'rds\x20{\x0a\x20\x20\x20\x20'+'//\x20used\x20fo'+'r\x20simple\x20s'+'phere\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20//\x20als'+'o,\x20the\x20cod'+'e\x20only\x20han'+'dles\x20a\x20sph'+'erical\x20lig'+'ht,\x20it\x20can'+'not\x20be\x20non'+'-uniformly'+'\x20scaled\x20in'+'\x20world\x20spa'+'ce,\x20and\x20so'+'\x20we\x20enforc'+'e\x20it\x20here\x0a'+'\x20\x20\x20\x20dSpher'+'eRadius\x20=\x20')+('max(length'+'(halfWidth'+'),\x20length('+'halfHeight'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20Billboar'+'d\x20the\x202d\x20l'+'ight\x20quad\x20'+'to\x20reflect'+'ion\x20vector'+',\x20as\x20it\x27s\x20'+'used\x20for\x20s'+'pecular.\x20T'+'his\x20allows'+'\x20us\x20to\x20use'+'\x20disk\x20math'+'\x20for\x20the\x20s'+'phere.\x0a\x20\x20\x20'+'\x20let\x20f:\x20ve'+'c3f\x20=\x20refl'+'ect(normal'+'ize(lightP'+'os\x20-\x20unifo'+'rm.view_po'+'sition),\x20v'+'NormalW);\x0a'+'\x20\x20\x20\x20let\x20w:'+'\x20vec3f\x20=\x20n'+'ormalize(c'+'ross(f,\x20ha'+'lfHeight))'+';\x0a\x20\x20\x20\x20let\x20'+'h:\x20vec3f\x20='+'\x20normalize'+'(cross(f,\x20'+'w));\x0a\x0a\x20\x20\x20\x20'+'return\x20get'+'LTCLightCo'+'ords(light'+'Pos,\x20w\x20*\x20d'+'SphereRadi'+'us,\x20h\x20*\x20dS'+'phereRadiu'+'s);\x0a}\x0a\x0a//\x20'+'used\x20for\x20L'+'TC\x20LUT\x20tex'+'ture\x20looku'+'p\x0avar<priv'+'ate>\x20dLTCU'+'V:\x20vec2f;\x0a'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20var<p'+'rivate>\x20cc'+'LTCUV:\x20vec'+'2f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightUV(g'+'loss:\x20f32,'+'\x20worldNorm'+'al:\x20vec3f,'+'\x20viewDir:\x20'+'vec3f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20roug'+'hness:\x20f32'+'\x20=\x20max((1.'+'0\x20-\x20gloss)'+'\x20*\x20(1.0\x20-\x20'+'gloss),\x200.'+'001);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_Uv(\x20world'+'Normal,\x20vi'+'ewDir,\x20rou'+'ghness\x20);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20energ'+'y\x20conserva'+'tion\x20and\x20t'+'o\x20modulate'+'\x20specular\x0a'+'var<privat'+'e>\x20dLTCSpe'+'cFres:\x20vec'+'3f;\x0a#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20v'+'ar<private'+'>\x20ccLTCSpe'+'cFres:\x20vec'+'3f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightSpec'+'Fres(uv:\x20v'+'ec2f,\x20spec'+'ularity:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20t2:\x20v')+('ec4f\x20=\x20tex'+'tureSample'+'Level(area'+'LightsLutT'+'ex2,\x20areaL'+'ightsLutTe'+'x2Sampler,'+'\x20uv,\x200.0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20specular'+'ity\x20*\x20t2.x'+'\x20+\x20(\x20vec3f'+'(\x201.0\x20)\x20-\x20'+'specularit'+'y)\x20*\x20t2.y;'+'\x0a}\x0a\x0afn\x20cal'+'cLTCLightV'+'alues(glos'+'s:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f,\x20specul'+'arity:\x20vec'+'3f,\x20clearc'+'oatGloss:\x20'+'f32,\x20clear'+'coatWorldN'+'ormal:\x20vec'+'3f,\x20clearc'+'oatSpecula'+'rity:\x20f32)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'UV\x20=\x20getLT'+'CLightUV(c'+'learcoatGl'+'oss,\x20clear'+'coatWorldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'SpecFres\x20='+'\x20getLTCLig'+'htSpecFres'+'(ccLTCUV,\x20'+'vec3f(clea'+'rcoatSpecu'+'larity));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0afn\x20cal'+'cDiskLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20cal'+'cRectLight'+'Values(lig'+'htPos,\x20hal'+'fWidth,\x20ha'+'lfHeight);'+'\x0a}\x0afn\x20calc'+'SphereLigh'+'tValues(li'+'ghtPos:\x20ve'+'c3f,\x20halfW'+'idth:\x20vec3'+'f,\x20halfHei')+('ght:\x20vec3f'+')\x20{\x0a\x20\x20\x20\x20dL'+'TCCoords\x20='+'\x20getSphere'+'LightCoord'+'s(lightPos'+',\x20halfWidt'+'h,\x20halfHei'+'ght);\x0a}\x0a\x0a/'+'/\x20An\x20exten'+'ded\x20versio'+'n\x20of\x20the\x20i'+'mplementat'+'ion\x20from\x20\x22'+'How\x20to\x20sol'+'ve\x20a\x20cubic'+'\x20equation,'+'\x20revisited'+'\x22\x0a//\x20http:'+'//momentsi'+'ngraphics.'+'de/?p=105\x0a'+'fn\x20SolveCu'+'bic(Coeffi'+'cient_in:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20pi:\x20'+'f32\x20=\x203.14'+'159;\x0a\x20\x20\x20\x20v'+'ar\x20Coeffic'+'ient\x20=\x20Coe'+'fficient_i'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20Normalize'+'\x20the\x20polyn'+'omial\x0a\x20\x20\x20\x20'+'Coefficien'+'t\x20=\x20vec4f('+'Coefficien'+'t.xyz\x20/\x20Co'+'efficient.'+'w,\x20Coeffic'+'ient.w);\x0a\x0a'+'\x20\x20\x20\x20//\x20Div'+'ide\x20middle'+'\x20coefficie'+'nts\x20by\x20thr'+'ee\x0a\x20\x20\x20\x20let'+'\x20new_yz:\x20v'+'ec2f\x20=\x20Coe'+'fficient.y'+'z\x20/\x203.0;\x0a\x20'+'\x20\x20\x20Coeffic'+'ient\x20=\x20vec'+'4f(Coeffic'+'ient.x,\x20ne'+'w_yz.x,\x20ne'+'w_yz.y,\x20Co'+'efficient.'+'w);\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20let\x20A:\x20'+'f32\x20=\x20Coef'+'ficient.w;'+'\x0a\x20\x20\x20\x20let\x20B'+':\x20f32\x20=\x20Co'+'efficient.'+'z;\x0a\x20\x20\x20\x20let'+'\x20C:\x20f32\x20=\x20'+'Coefficien'+'t.y;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20Coeffici'+'ent.x;\x0a\x0a\x20\x20'+'\x20\x20//\x20Compu'+'te\x20the\x20Hes'+'sian\x20and\x20t'+'he\x20discrim'+'inant\x0a\x20\x20\x20\x20'+'let\x20Delta:'+'\x20vec3f\x20=\x20v'+'ec3f(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20-Coeff'+'icient.z\x20*'+'\x20Coefficie'+'nt.z\x20+\x20Coe'+'fficient.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'-Coefficie'+'nt.y\x20*\x20Coe'+'fficient.z'+'\x20+\x20Coeffic'+'ient.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'vec2f(Coef'+'ficient.z,'+'\x20-Coeffici'+'ent.y),\x20Co'+'efficient.'+'xy)\x0a\x20\x20\x20\x20);')+('\x0a\x0a\x20\x20\x20\x20let\x20'+'Discrimina'+'nt:\x20f32\x20=\x20'+'dot(vec2f('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20var\x20xlc:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20var\x20xsc:'+'\x20vec2f;\x0a\x0a\x20'+'\x20\x20\x20//\x20Algo'+'rithm\x20A\x0a\x20\x20'+'\x20\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20A_a:'+'\x20f32\x20=\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_a:\x20f'+'32\x20=\x20Delta'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_a:'+'\x20f32\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20Theta:\x20f'+'32\x20=\x20atan2'+'(sqrt(Disc'+'riminant),'+'\x20-D_a)\x20/\x203'+'.0;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sqr'+'t_neg_Ca\x20='+'\x20sqrt(-C_a'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20x_1a:'+'\x20f32\x20=\x202.0'+'\x20*\x20sqrt_ne'+'g_Ca\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x_3a:\x20f32'+'\x20=\x202.0\x20*\x20s'+'qrt_neg_Ca'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20xl:'+'\x20f32\x20=\x20sel'+'ect(x_3a,\x20'+'x_1a,\x20(x_1'+'a\x20+\x20x_3a)\x20'+'>\x202.0\x20*\x20B)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'xlc\x20=\x20vec2'+'f(xl\x20-\x20B,\x20'+'A);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Al'+'gorithm\x20D\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20A_'+'d:\x20f32\x20=\x20D'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_d:\x20f'+'32\x20=\x20Delta'+'.z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_d:'+'\x20f32\x20=\x20-D\x20'+'*\x20Delta.y\x20'+'+\x202.0\x20*\x20C\x20'+'*\x20Delta.z;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Take\x20th'+'e\x20cubic\x20ro'+'ot\x20of\x20a\x20no'+'rmalized\x20c'+'omplex\x20num'+'ber\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20Thet'+'a:\x20f32\x20=\x20a'+'tan2(D\x20*\x20s'+'qrt(Discri'+'minant),\x20-'+'D_d)\x20/\x203.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20sqrt_'+'neg_Cd\x20=\x20s'+'qrt(-C_d);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20x_1d:\x20f'+'32\x20=\x202.0\x20*')+('\x20sqrt_neg_'+'Cd\x20*\x20cos(T'+'heta);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20x'+'_3d:\x20f32\x20='+'\x202.0\x20*\x20sqr'+'t_neg_Cd\x20*'+'\x20cos(Theta'+'\x20+\x20(2.0\x20/\x20'+'3.0)\x20*\x20pi)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20xs:\x20f'+'32\x20=\x20selec'+'t(x_3d,\x20x_'+'1d,\x20x_1d\x20+'+'\x20x_3d\x20<\x202.'+'0\x20*\x20C);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20xsc\x20'+'=\x20vec2f(-D'+',\x20xs\x20+\x20C);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20let\x20E:\x20f'+'32\x20=\x20\x20xlc.'+'y\x20*\x20xsc.y;'+'\x0a\x20\x20\x20\x20let\x20F'+':\x20f32\x20=\x20-x'+'lc.x\x20*\x20xsc'+'.y\x20-\x20xlc.y'+'\x20*\x20xsc.x;\x0a'+'\x20\x20\x20\x20let\x20G:'+'\x20f32\x20=\x20\x20xl'+'c.x\x20*\x20xsc.'+'x;\x0a\x0a\x20\x20\x20\x20le'+'t\x20xmc:\x20vec'+'2f\x20=\x20vec2f'+'(C\x20*\x20F\x20-\x20B'+'\x20*\x20G,\x20-B\x20*'+'\x20F\x20+\x20C\x20*\x20E'+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20Root:\x20ve'+'c3f\x20=\x20vec3'+'f(xsc.x\x20/\x20'+'xsc.y,\x20xmc'+'.x\x20/\x20xmc.y'+',\x20xlc.x\x20/\x20'+'xlc.y);\x0a\x0a\x20'+'\x20\x20\x20if\x20(Roo'+'t.x\x20<\x20Root'+'.y\x20&&\x20Root'+'.x\x20<\x20Root.'+'z)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root\x20=\x20'+'Root.yxz;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(Root.'+'z\x20<\x20Root.x'+'\x20&&\x20Root.z'+'\x20<\x20Root.y)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root\x20=\x20Ro'+'ot.xzy;\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20Root;'+'\x0a}\x0a\x0afn\x20LTC'+'_EvaluateD'+'isk(N:\x20vec'+'3f,\x20V:\x20vec'+'3f,\x20P:\x20vec'+'3f,\x20Minv:\x20'+'mat3x3f,\x20p'+'oints:\x20Coo'+'rds)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20let\x20T1:\x20'+'vec3f\x20=\x20no'+'rmalize(V\x20'+'-\x20N\x20*\x20dot('+'V,\x20N));\x0a\x20\x20'+'\x20\x20let\x20T2:\x20'+'vec3f\x20=\x20cr'+'oss(N,\x20T1)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'rotate\x20are'+'a\x20light\x20in'+'\x20(T1,\x20T2,\x20'+'N)\x20basis\x0a\x20'+'\x20\x20\x20let\x20R:\x20'+'mat3x3f\x20=\x20'+'transpose('+'\x20mat3x3f(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20polygon\x20'+'(allocate\x20'+'5\x20vertices'+'\x20for\x20clipp')+('ing\x0a\x20\x20\x20\x20va'+'r\x20L_:\x20arra'+'y<vec3f,\x203'+'>;\x0a\x20\x20\x20\x20L_['+'0]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[1'+']\x20=\x20R\x20*\x20(\x20'+'points.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20L_[2]'+'\x20=\x20R\x20*\x20(\x20p'+'oints.coor'+'d2\x20-\x20P\x20);\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'it\x20ellipse'+'\x0a\x20\x20\x20\x20let\x20C'+':\x20vec3f\x20\x20='+'\x200.5\x20*\x20(L_'+'[0]\x20+\x20L_[2'+']);\x0a\x20\x20\x20\x20va'+'r\x20V1:\x20vec3'+'f\x20=\x200.5\x20*\x20'+'(L_[1]\x20-\x20L'+'_[2]);\x0a\x20\x20\x20'+'\x20var\x20V2:\x20v'+'ec3f\x20=\x200.5'+'\x20*\x20(L_[1]\x20'+'-\x20L_[0]);\x0a'+'\x0a\x20\x20\x20\x20let\x20C'+'_Minv:\x20vec'+'3f\x20\x20=\x20Minv'+'\x20*\x20C;\x0a\x20\x20\x20\x20'+'let\x20V1_Min'+'v:\x20vec3f\x20='+'\x20Minv\x20*\x20V1'+';\x0a\x20\x20\x20\x20let\x20'+'V2_Minv:\x20v'+'ec3f\x20=\x20Min'+'v\x20*\x20V2;\x0a\x0a\x20'+'\x20\x20\x20//\x20comp'+'ute\x20eigenv'+'ectors\x20of\x20'+'ellipse\x0a\x20\x20'+'\x20\x20var\x20a:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20b:\x20f32;\x0a'+'\x20\x20\x20\x20let\x20d1'+'1:\x20f32\x20=\x20d'+'ot(V1_Minv'+',\x20V1_Minv)'+';\x0a\x20\x20\x20\x20let\x20'+'d22:\x20f32\x20='+'\x20dot(V2_Mi'+'nv,\x20V2_Min'+'v);\x0a\x20\x20\x20\x20le'+'t\x20d12:\x20f32'+'\x20=\x20dot(V1_'+'Minv,\x20V2_M'+'inv);\x0a\x20\x20\x20\x20'+'if\x20(abs(d1'+'2)\x20/\x20sqrt('+'d11\x20*\x20d22)'+'\x20>\x200.0001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20tr:\x20f'+'32\x20=\x20d11\x20+'+'\x20d22;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'t_inner:\x20f'+'32\x20=\x20-d12\x20'+'*\x20d12\x20+\x20d1'+'1\x20*\x20d22;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20det:\x20f32\x20'+'=\x20sqrt(det'+'_inner);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20u:\x20f32\x20=\x20'+'0.5\x20*\x20sqrt'+'(tr\x20-\x202.0\x20'+'*\x20det);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'v:\x20f32\x20=\x200'+'.5\x20*\x20sqrt('+'tr\x20+\x202.0\x20*'+'\x20det);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20e'+'_max:\x20f32\x20'+'=\x20(u\x20+\x20v)\x20'+'*\x20(u\x20+\x20v);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20e_min:\x20'+'f32\x20=\x20(u\x20-'+'\x20v)\x20*\x20(u\x20-'+'\x20v);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20V1'+'_:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va')+('r\x20V2_:\x20vec'+'3f;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(d11'+'\x20>\x20d22)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V1_\x20=\x20d1'+'2\x20*\x20V1_Min'+'v\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2_Minv;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20V2_\x20=\x20d12'+'\x20*\x20V1_Minv'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2_Minv;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12*V2_'+'Minv\x20+\x20(e_'+'max\x20-\x20d22)'+'*V1_Minv;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V2_\x20=\x20d1'+'2*V2_Minv\x20'+'+\x20(e_min\x20-'+'\x20d22)*V1_M'+'inv;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20e_max;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20b'+'\x20=\x201.0\x20/\x20e'+'_min;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20V1\x20=\x20n'+'ormalize(V'+'1_);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20V2\x20=\x20no'+'rmalize(V2'+'_);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20dot(V'+'1_Minv,\x20V1'+'_Minv);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20b\x20=\x20'+'1.0\x20/\x20dot('+'V2_Minv,\x20V'+'2_Minv);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V1\x20'+'=\x20V1_Minv\x20'+'*\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20=\x20V2_Min'+'v\x20*\x20sqrt(b'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20V3'+':\x20vec3f\x20=\x20'+'normalize('+'cross(V1,\x20'+'V2));\x0a\x20\x20\x20\x20'+'if\x20(dot(C_'+'Minv,\x20V3)\x20'+'<\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V3\x20'+'=\x20V3\x20*\x20-1.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20let\x20L:'+'\x20f32\x20\x20=\x20do'+'t(V3,\x20C_Mi'+'nv);\x0a\x20\x20\x20\x20l'+'et\x20x0:\x20f32'+'\x20=\x20dot(V1,'+'\x20C_Minv)\x20/'+'\x20L;\x0a\x20\x20\x20\x20le'+'t\x20y0:\x20f32\x20'+'=\x20dot(V2,\x20'+'C_Minv)\x20/\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20E1:\x20f32\x20'+'=\x20inverseS'+'qrt(a);\x0a\x20\x20'+'\x20\x20let\x20E2:\x20'+'f32\x20=\x20inve'+'rseSqrt(b)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20a_scaled\x20'+'=\x20a\x20*\x20L\x20*\x20'+'L;\x0a\x20\x20\x20\x20let'+'\x20b_scaled\x20'+'=\x20b\x20*\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20c0:\x20f32\x20'+'=\x20a_scaled'+'\x20*\x20b_scale'+'d;\x0a\x20\x20\x20\x20let'+'\x20c1:\x20f32\x20='+'\x20a_scaled\x20'+'*\x20b_scaled')+('\x20*\x20(1.0\x20+\x20'+'x0\x20*\x20x0\x20+\x20'+'y0\x20*\x20y0)\x20-'+'\x20a_scaled\x20'+'-\x20b_scaled'+';\x0a\x20\x20\x20\x20let\x20'+'c2:\x20f32\x20=\x20'+'1.0\x20-\x20a_sc'+'aled\x20*\x20(1.'+'0\x20+\x20x0\x20*\x20x'+'0)\x20-\x20b_sca'+'led\x20*\x20(1.0'+'\x20+\x20y0\x20*\x20y0'+');\x0a\x20\x20\x20\x20let'+'\x20c3:\x20f32\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20let\x20roots'+':\x20vec3f\x20=\x20'+'SolveCubic'+'(vec4f(c0,'+'\x20c1,\x20c2,\x20c'+'3));\x0a\x20\x20\x20\x20l'+'et\x20e1:\x20f32'+'\x20=\x20roots.x'+';\x0a\x20\x20\x20\x20let\x20'+'e2:\x20f32\x20=\x20'+'roots.y;\x0a\x20'+'\x20\x20\x20let\x20e3:'+'\x20f32\x20=\x20roo'+'ts.z;\x0a\x0a\x20\x20\x20'+'\x20var\x20avgDi'+'r:\x20vec3f\x20='+'\x20vec3f(a_s'+'caled\x20*\x20x0'+'\x20/\x20(a_scal'+'ed\x20-\x20e2),\x20'+'b_scaled\x20*'+'\x20y0\x20/\x20(b_s'+'caled\x20-\x20e2'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20let\x20ro'+'tate:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20let\x20L'+'1:\x20f32\x20=\x20s'+'qrt(-e2\x20/\x20'+'e3);\x0a\x20\x20\x20\x20l'+'et\x20L2:\x20f32'+'\x20=\x20sqrt(-e'+'2\x20/\x20e1);\x0a\x0a'+'\x20\x20\x20\x20let\x20fo'+'rmFactor:\x20'+'f32\x20=\x20max('+'0.0,\x20L1\x20*\x20'+'L2\x20*\x20inver'+'seSqrt((1.'+'0\x20+\x20L1\x20*\x20L'+'1)\x20*\x20(1.0\x20'+'+\x20L2\x20*\x20L2)'+'));\x0a\x0a\x20\x20\x20\x20c'+'onst\x20LUT_S'+'IZE_disk:\x20'+'f32\x20=\x2064.0'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_SCAL'+'E_disk:\x20f3'+'2\x20=\x20(\x20LUT_'+'SIZE_disk\x20'+'-\x201.0\x20)\x20/\x20'+'LUT_SIZE_d'+'isk;\x0a\x20\x20\x20\x20c'+'onst\x20LUT_B'+'IAS_disk:\x20'+'f32\x20=\x200.5\x20'+'/\x20LUT_SIZE'+'_disk;\x0a\x0a\x20\x20'+'\x20\x20//\x20use\x20t'+'abulated\x20h'+'orizon-cli'+'pped\x20spher'+'e\x0a\x20\x20\x20\x20var\x20'+'uv:\x20vec2f\x20'+'=\x20vec2f(av'+'gDir.z\x20*\x200'+'.5\x20+\x200.5,\x20'+'formFactor'+');\x0a\x20\x20\x20\x20uv\x20'+'=\x20uv\x20*\x20LUT'+'_SCALE_dis'+'k\x20+\x20LUT_BI'+'AS_disk;\x0a\x0a'+'\x20\x20\x20\x20let\x20sc')+('ale:\x20f32\x20='+'\x20textureSa'+'mpleLevel('+'areaLights'+'LutTex2,\x20a'+'reaLightsL'+'utTex2Samp'+'ler,\x20uv,\x200'+'.0).w;\x0a\x0a\x20\x20'+'\x20\x20return\x20f'+'ormFactor\x20'+'*\x20scale;\x0a}'+'\x0a\x0a//\x20LTC_E'+'valuateDis'+'k\x20in\x20some\x20'+'rare\x20cases'+'\x20genereate'+'s\x20NaN\x20valu'+'es\x20in\x20a\x20or'+'\x20b,\x20just\x20b'+'efore\x20\x27flo'+'at\x20c0\x20=\x20a\x20'+'*\x20b;\x27\x0a//\x20G'+'et\x20rid\x20of\x20'+'those\x20Nan\x20'+'values\x20bef'+'ore\x20they\x20p'+'ropagate\x20f'+'urther,\x20as'+'\x20in\x20case\x20o'+'f\x20bloom\x20/\x20'+'DOF\x20blurs\x20'+'they\x0a//\x20pr'+'opagate\x20to'+'\x20large\x20are'+'as.\x20I\x20didn'+'\x27t\x20find\x20th'+'e\x20actual\x20r'+'eason\x20wher'+'e\x20those\x20co'+'me\x20from,\x20s'+'o\x20that\x20is\x20'+'still\x20TODO'+'.\x0a//\x20Note\x20'+'that\x20only\x20'+'disk/spher'+'e\x20lights\x20a'+'re\x20causing'+'\x20it,\x20so\x20on'+'ly\x20handle\x20'+'those.\x0afn\x20'+'FixNan(val'+'ue:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20v'+'alue\x20!=\x20va'+'lue\x20check\x20'+'for\x20NaN\x20as'+'\x20isnan()\x20i'+'s\x20not\x20avai'+'lable\x20in\x20W'+'GSL\x0a\x20\x20\x20\x20re'+'turn\x20selec'+'t(value,\x200'+'.0,\x20value\x20'+'!=\x20value);'+'\x0a}\x0a\x0afn\x20get'+'RectLightD'+'iffuse(wor'+'ldNormal:\x20'+'vec3f,\x20vie'+'wDir:\x20vec3'+'f,\x20lightDi'+'r:\x20vec3f,\x20'+'lightDirNo'+'rm:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20id'+'entityMat\x20'+'=\x20mat3x3f('+'vec3f(1.0,'+'\x200.0,\x200.0)'+',\x20vec3f(0.'+'0,\x201.0,\x200.'+'0),\x20vec3f('+'0.0,\x200.0,\x20'+'1.0));\x0a\x20\x20\x20'+'\x20return\x20LT'+'C_Evaluate'+'Rect(\x20worl'+'dNormal,\x20v'+'iewDir,\x20vP'+'ositionW,\x20'+'identityMa'+'t,\x20dLTCCoo'+'rds\x20);\x0a}\x0a\x0a'+'fn\x20getDisk'+'LightDiffu'+'se(worldNo'+'rmal:\x20vec3')+('f,\x20viewDir'+':\x20vec3f,\x20l'+'ightDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20identi'+'tyMat\x20=\x20ma'+'t3x3f(vec3'+'f(1.0,\x200.0'+',\x200.0),\x20ve'+'c3f(0.0,\x201'+'.0,\x200.0),\x20'+'vec3f(0.0,'+'\x200.0,\x201.0)'+');\x0a\x20\x20\x20\x20ret'+'urn\x20FixNan'+'(LTC_Evalu'+'ateDisk(\x20w'+'orldNormal'+',\x20viewDir,'+'\x20vPosition'+'W,\x20identit'+'yMat,\x20dLTC'+'Coords\x20));'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tDiffuse(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20let\x20fall'+'off:\x20f32\x20='+'\x20dSphereRa'+'dius\x20/\x20(do'+'t(lightDir'+',\x20lightDir'+')\x20+\x20dSpher'+'eRadius);\x0a'+'\x20\x20\x20\x20return'+'\x20FixNan(ge'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNorm)\x20'+'*\x20falloff)'+';\x0a}\x0a\x0afn\x20ge'+'tLTCLightI'+'nvMat(uv:\x20'+'vec2f)\x20->\x20'+'mat3x3f\x20{\x0a'+'\x20\x20\x20\x20let\x20t1'+':\x20vec4f\x20=\x20'+'textureSam'+'pleLevel(a'+'reaLightsL'+'utTex1,\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er,\x20uv,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(\x20'+'t1.x,\x200.0,'+'\x20t1.y\x20),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(\x200.0,\x201'+'.0,\x200.0\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(\x20t1.z'+',\x200.0,\x20t1.'+'w\x20)\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight')+('InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getRectLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20cal'+'cDiskLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getDiskLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcDiskLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tSpecular('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'DiskLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir,\x20'+'dLTCUV);\x0a}'+'\x0a'),UD='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_me'+'talness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getMe'+'talness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'metalness:'+'\x20f32\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20metal'+'ness\x20=\x20met'+'alness\x20*\x20u'+'niform.mat'+'erial_meta'+'lness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'metalness\x20'+'=\x20metalnes'+'s\x20*\x20textur'+'eSampleBia'+'s({STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+',\x20{STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_METALN'+'ESS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_METALNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_VE'+'RTEX\x0a\x20\x20\x20\x20m'+'etalness\x20='+'\x20metalness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'METALNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dMetal'+'ness\x20=\x20met'+'alness;\x0a}\x0a',BD='\x0avar\x20textu'+'re_msdfMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20texture'+'_msdfMapSa'+'mpler:\x20sam'+'pler;\x0a\x0afn\x20'+'median(r:\x20'+'f32,\x20g:\x20f3'+'2,\x20b:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(min(r'+',\x20g),\x20min('+'max(r,\x20g),'+'\x20b));\x0a}\x0a\x0af'+'n\x20map(min:'+'\x20f32,\x20max:'+'\x20f32,\x20v:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(v\x20-\x20m'+'in)\x20/\x20(max'+'\x20-\x20min);\x0a}'+'\x0a\x0auniform\x20'+'font_sdfIn'+'tensity:\x20f'+'32;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20font_px'+'range:\x20f32'+';\x20\x20\x20\x20\x20\x20//\x20'+'the\x20number'+'\x20of\x20pixels'+'\x20between\x20i'+'nside\x20and\x20'+'outside\x20th'+'e\x20font\x20in\x20'+'SDF\x0aunifor'+'m\x20font_tex'+'tureWidth:'+'\x20f32;\x20//\x20t'+'he\x20width\x20o'+'f\x20the\x20text'+'ure\x20atlas\x0a'+'\x0a#ifndef\x20L'+'IT_MSDF_TE'+'XT_ATTRIBU'+'TE\x0a\x20\x20\x20\x20uni'+'form\x20outli'+'ne_color:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'utline_thi'+'ckness:\x20f3'+'2;\x0a\x20\x20\x20\x20uni'+'form\x20shado'+'w_color:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'uniform\x20sh'+'adow_offse'+'t:\x20vec2f;\x0a'+'#else\x0a\x20\x20\x20\x20'+'varying\x20ou'+'tline_colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20outline_'+'thickness:'+'\x20f32;\x0a\x20\x20\x20\x20'+'varying\x20sh'+'adow_color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20varying'+'\x20shadow_of'+'fset:\x20vec2'+'f;\x0a#endif\x0a'+'\x0afn\x20applyM'+'sdf(color_'+'in:\x20vec4f)'+'\x20->\x20vec4f\x20'+'{\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_M'+'SDF_TEXT_A'+'TTRIBUTE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20uniform.'+'outline_co'+'lor;\x0a\x20\x20\x20\x20\x20'+('\x20\x20\x20var\x20out'+'line_thick'+'nessValue\x20'+'=\x20uniform.'+'outline_th'+'ickness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_co'+'lorValue\x20='+'\x20uniform.s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_offsetVa'+'lue\x20=\x20unif'+'orm.shadow'+'_offset;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utline_thi'+'cknessValu'+'e\x20=\x20outlin'+'e_thicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_colorVal'+'ue\x20=\x20shado'+'w_color;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_of'+'fsetValue\x20'+'=\x20shadow_o'+'ffset;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20Conv'+'ert\x20to\x20lin'+'ear\x20space\x20'+'before\x20pro'+'cessing\x0a\x20\x20'+'\x20\x20//\x20TODO:'+'\x20ideally\x20t'+'his\x20would\x20'+'receive\x20th'+'e\x20color\x20in'+'\x20linear\x20sp'+'ace,\x20but\x20t'+'hat\x20would\x20'+'require\x20la'+'rger\x20chang'+'es\x0a\x20\x20\x20\x20//\x20'+'on\x20the\x20eng'+'ine\x20side,\x20'+'with\x20the\x20w'+'ay\x20premult'+'iplied\x20alp'+'ha\x20is\x20hand'+'led\x20as\x20wel'+'l.\x0a\x20\x20\x20\x20var'+'\x20color\x20=\x20v'+'ec4f(gamma'+'CorrectInp'+'utVec3(col'+'or_in.rgb)'+',\x20color_in'+'.a);\x0a\x0a\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20field\x0a'+'\x20\x20\x20\x20let\x20ts'+'ample:\x20vec'+'3f\x20=\x20textu'+'reSample(t'+'exture_msd'+'fMap,\x20text'+'ure_msdfMa'+'pSampler,\x20'+'vUv0).rgb;'+'\x0a\x20\x20\x20\x20let\x20u'+'vShdw:\x20vec'+'2f\x20=\x20vUv0\x20'+'-\x20shadow_o'+'ffsetValue'+';\x0a\x20\x20\x20\x20let\x20'+'ssample:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'(texture_m'+'sdfMap,\x20te'+'xture_msdf'+'MapSampler'+',\x20uvShdw).'+'rgb;\x0a\x0a\x20\x20\x20\x20'+'//\x20get\x20the'+'\x20signed\x20di'+'stance\x20val'+'ue\x0a\x20\x20\x20\x20let')+('\x20sigDist:\x20'+'f32\x20=\x20medi'+'an(tsample'+'.r,\x20tsampl'+'e.g,\x20tsamp'+'le.b);\x0a\x20\x20\x20'+'\x20var\x20sigDi'+'stShdw:\x20f3'+'2\x20=\x20median'+'(ssample.r'+',\x20ssample.'+'g,\x20ssample'+'.b);\x0a\x0a\x20\x20\x20\x20'+'//\x20smoothi'+'ng\x20limit\x20-'+'\x20smaller\x20v'+'alue\x20makes'+'\x20for\x20sharp'+'er\x20but\x20mor'+'e\x20aliased\x20'+'text,\x20espe'+'cially\x20on\x20'+'angles\x0a\x20\x20\x20'+'\x20//\x20too\x20la'+'rge\x20value\x20'+'(0.5)\x20crea'+'tes\x20a\x20dark'+'\x20glow\x20arou'+'nd\x20the\x20let'+'ters\x0a\x20\x20\x20\x20l'+'et\x20smoothi'+'ngMax:\x20f32'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20let'+'\x20w:\x20vec2f\x20'+'=\x20abs(dpdx'+'(vUv0))\x20+\x20'+'abs(dpdy(v'+'Uv0));\x0a\x20\x20\x20'+'\x20let\x20smoot'+'hing:\x20f32\x20'+'=\x20clamp(w.'+'x\x20*\x20unifor'+'m.font_tex'+'tureWidth\x20'+'/\x20uniform.'+'font_pxran'+'ge,\x200.0,\x20s'+'moothingMa'+'x);\x0a\x0a\x20\x20\x20\x20l'+'et\x20mapMin:'+'\x20f32\x20=\x200.0'+'5;\x0a\x20\x20\x20\x20let'+'\x20mapMax:\x20f'+'32\x20=\x20clamp'+'(1.0\x20-\x20uni'+'form.font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20let\x20si'+'gDistInner'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist);\x0a\x20\x20'+'\x20\x20let\x20sigD'+'istOutline'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist\x20+\x20ou'+'tline_thic'+'knessValue'+');\x0a\x20\x20\x20\x20sig'+'DistShdw\x20='+'\x20map(mapMi'+'n,\x20mapMax,'+'\x20sigDistSh'+'dw\x20+\x20outli'+'ne_thickne'+'ssValue);\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'enter:\x20f32'+'\x20=\x200.5;\x0a\x20\x20'+'\x20\x20//\x20calcu'+'late\x20smoot'+'hing\x20and\x20u'+'se\x20to\x20gene')+('rate\x20opaci'+'ty\x0a\x20\x20\x20\x20let'+'\x20inside:\x20f'+'32\x20=\x20smoot'+'hstep(cent'+'er\x20-\x20smoot'+'hing,\x20cent'+'er\x20+\x20smoot'+'hing,\x20sigD'+'istInner);'+'\x0a\x20\x20\x20\x20let\x20o'+'utline:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stOutline)'+';\x0a\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20let\x20tc'+'olor_outli'+'ne:\x20vec4f\x20'+'=\x20outline\x20'+'*\x20vec4f(ou'+'tline_colo'+'rValue.a\x20*'+'\x20outline_c'+'olorValue.'+'rgb,\x20outli'+'ne_colorVa'+'lue.a);\x0a\x20\x20'+'\x20\x20var\x20tcol'+'or:\x20vec4f\x20'+'=\x20select(v'+'ec4f(0.0),'+'\x20tcolor_ou'+'tline,\x20out'+'line\x20>\x20ins'+'ide);\x0a\x20\x20\x20\x20'+'tcolor\x20=\x20m'+'ix(tcolor,'+'\x20color,\x20in'+'side);\x0a\x0a\x20\x20'+'\x20\x20let\x20scol'+'or_shadow:'+'\x20vec4f\x20=\x20s'+'hadow\x20*\x20ve'+'c4f(shadow'+'_colorValu'+'e.a\x20*\x20shad'+'ow_colorVa'+'lue.rgb,\x20s'+'hadow_colo'+'rValue.a);'+'\x0a\x20\x20\x20\x20let\x20s'+'color:\x20vec'+'4f\x20=\x20selec'+'t(tcolor,\x20'+'scolor_sha'+'dow,\x20shado'+'w\x20>\x20outlin'+'e);\x0a\x20\x20\x20\x20tc'+'olor\x20=\x20mix'+'(scolor,\x20t'+'color,\x20out'+'line);\x0a\x0a\x20\x20'+'\x20\x20//\x20Conve'+'rt\x20back\x20to'+'\x20gamma\x20spa'+'ce\x20before\x20'+'returning\x0a'+'\x20\x20\x20\x20tcolor'+'\x20=\x20vec4f(g'+'ammaCorrec'+'tOutput(tc'+'olor.rgb),'+'\x20tcolor.a)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20tcolor'+';\x0a}\x0a'),zD='\x0a\x0afn\x20getSp'+'ecularModu'+'late(specu'+'larity:\x20ve'+'c3f,\x20albed'+'o:\x20vec3f,\x20'+'metalness:'+'\x20f32,\x20f0:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20dielec'+'tricF0:\x20ve'+'c3f\x20=\x20f0\x20*'+'\x20speculari'+'ty;\x0a\x20\x20\x20\x20re'+'turn\x20mix(d'+'ielectricF'+'0,\x20albedo,'+'\x20metalness'+');\x0a}\x0a\x0afn\x20g'+'etAlbedoMo'+'dulate(alb'+'edo:\x20vec3f'+',\x20metalnes'+'s:\x20f32)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'albedo\x20*\x20('+'1.0\x20-\x20meta'+'lness);\x0a}\x0a',VD='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var\x20morph'+'Texture:\x20t'+'exture_2d_'+'array<f32>'+';\x0a\x20\x20\x20\x20unif'+'orm\x20morphF'+'actor:\x20arr'+'ay<f32,\x20{M'+'ORPH_TEXTU'+'RE_MAX_COU'+'NT}>;\x0a\x20\x20\x20\x20'+'uniform\x20mo'+'rphIndex:\x20'+'array<u32,'+'\x20{MORPH_TE'+'XTURE_MAX_'+'COUNT}>;\x0a\x20'+'\x20\x20\x20uniform'+'\x20count:\x20u3'+'2;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x0a\x20\x20'+'\x20\x20fn\x20fragm'+'entMain(in'+'put\x20:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20color\x20='+'\x20vec3f(0,\x20'+'0,\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20t'+'extureDims'+'\x20=\x20texture'+'Dimensions'+'(morphText'+'ure);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20pi'+'xelCoords\x20'+'=\x20vec2i(in'+'put.uv0\x20*\x20'+'vec2f(text'+'ureDims));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'u32\x20=\x200;\x20i'+'\x20<\x20uniform'+'.count;\x20i\x20'+'=\x20i\x20+\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'tureIndex:'+'\x20u32\x20=\x20uni'+'form.morph'+'Index[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20delta\x20'+'=\x20textureL'+'oad(morphT'+'exture,\x20pi'+'xelCoords,'+'\x20textureIn'+'dex,\x200).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20+=\x20unifor'+'m.morphFac'+'tor[i].ele'+'ment\x20*\x20del'+'ta;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'color,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',GD='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',HD='\x0aattribute'+'\x20vertex_ou'+'tlineParam'+'eters:\x20vec'+'3f;\x0aattrib'+'ute\x20vertex'+'_shadowPar'+'ameters:\x20v'+'ec3f;\x0a\x0avar'+'ying\x20outli'+'ne_color:\x20'+'vec4f;\x0avar'+'ying\x20outli'+'ne_thickne'+'ss:\x20f32;\x0av'+'arying\x20sha'+'dow_color:'+'\x20vec4f;\x0ava'+'rying\x20shad'+'ow_offset:'+'\x20vec2f;\x0a\x0av'+'ar<private'+'>\x20dOutline'+'Color:\x20vec'+'4f;\x0avar<pr'+'ivate>\x20dOu'+'tlineThick'+'ness:\x20f32;'+'\x0avar<priva'+'te>\x20dShado'+'wColor:\x20ve'+'c4f;\x0avar<p'+'rivate>\x20dS'+'hadowOffse'+'t:\x20vec2f;\x0a'+'\x0afn\x20unpack'+'MsdfParams'+'()\x20{\x0a\x20\x20\x20\x20l'+'et\x20little:'+'\x20vec3f\x20=\x20v'+'ertex_outl'+'ineParamet'+'ers\x20%\x20vec3'+'f(256.0);\x0a'+'\x20\x20\x20\x20let\x20bi'+'g:\x20vec3f\x20='+'\x20(vertex_o'+'utlinePara'+'meters\x20-\x20l'+'ittle)\x20/\x202'+'56.0;\x0a\x0a\x20\x20\x20'+'\x20dOutlineC'+'olor\x20=\x20vec'+'4f(little.'+'x,\x20big.x,\x20'+'little.y,\x20'+'big.y)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20//\x20_outli'+'neThicknes'+'sScale\x20==='+'\x200.2\x0a\x20\x20\x20\x20d'+'OutlineThi'+'ckness\x20=\x20l'+'ittle.z\x20/\x20'+'255.0\x20*\x200.'+'2;\x0a\x0a\x20\x20\x20\x20le'+'t\x20little_s'+'hadow\x20=\x20ve'+'rtex_shado'+'wParameter'+'s\x20%\x20vec3f('+'256.0);\x0a\x20\x20'+'\x20\x20let\x20big_'+'shadow\x20=\x20('+'vertex_sha'+'dowParamet'+'ers\x20-\x20litt'+'le_shadow)'+'\x20/\x20256.0;\x0a'+'\x0a\x20\x20\x20\x20dShad'+'owColor\x20=\x20'+'vec4f(litt'+'le_shadow.'+'x,\x20big_sha'+'dow.x,\x20lit'+'tle_shadow'+'.y,\x20big_sh'+'adow.y)\x20/\x20'+'255.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+('ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20dShad'+'owOffset\x20='+'\x20(vec2f(li'+'ttle_shado'+'w.z,\x20big_s'+'hadow.z)\x20/'+'\x20127.0\x20-\x201'+'.0)\x20*\x200.00'+'5;\x0a}\x0a'),WD='\x0avar<priva'+'te>\x20dNorma'+'lMatrix:\x20m'+'at3x3f;\x0a\x0af'+'n\x20getNorma'+'l()\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20d'+'NormalMatr'+'ix\x20=\x20getNo'+'rmalMatrix'+'(dModelMat'+'rix);\x0a\x20\x20\x20\x20'+'let\x20localN'+'ormal:\x20vec'+'3f\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}',$D='\x0a\x0aattribut'+'e\x20vertex_n'+'ormal:\x20vec'+'3f;\x0a\x0aunifo'+'rm\x20matrix_'+'normal:\x20ma'+'t3x3f;\x0a\x0a#i'+'fdef\x20MORPH'+'ING_NORMAL'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MORPHING'+'_INT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20mor'+'phNormalTe'+'x:\x20texture'+'_2d<u32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphNor'+'malTexSamp'+'ler:\x20sampl'+'er;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hNormalTex'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20morphNorm'+'alTexSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0afn\x20getLo'+'calNormal('+'vertexNorm'+'al:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20localNorm'+'al:\x20vec3f\x20'+'=\x20vertexNo'+'rmal;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_NOR'+'MAL\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20mor'+'phUV:\x20vec2'+'i\x20=\x20getTex'+'tureMorphC'+'oords();\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_INT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20morphN'+'ormalInt:\x20'+'vec4u\x20=\x20te'+'xtureLoad('+'morphNorma'+'lTex,\x20morp'+'hUV,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20morph'+'NormalF:\x20v'+'ec3f\x20=\x20vec'+'3f(morphNo'+'rmalInt.xy'+'z)\x20/\x2065535'+'.0\x20*\x202.0\x20-'+'\x201.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormalF;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'morphNorma'+'l:\x20vec3f\x20='+'\x20textureLo'+'ad(morphNo'+'rmalTex,\x20m'+'orphUV,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormal;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20lo'+'calNormal;'+'\x0a}\x0a\x0a#if\x20de'+'fined(SKIN'+')\x20||\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20fn\x20get'+('NormalMatr'+'ix(modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ma'+'t3x3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20mat3x3f'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20fn'+'\x20getNormal'+'Matrix(mod'+'elMatrix:\x20'+'mat4x4f)\x20-'+'>\x20mat3x3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20mat'+'3x3f(model'+'Matrix[0].'+'xyz,\x20model'+'Matrix[1].'+'xyz,\x20model'+'Matrix[2].'+'xyz);\x0a\x20\x20\x20\x20'+'}\x0a#else\x0a\x20\x20'+'\x20\x20fn\x20getNo'+'rmalMatrix'+'(modelMatr'+'ix:\x20mat4x4'+'f)\x20->\x20mat3'+'x3f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_norm'+'al;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),XD='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_bu'+'mpiness:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20un'+'iform\x20mate'+'rial_norma'+'lDetailMap'+'Bumpiness:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20//\x20https:'+'//blog.sel'+'fshadow.co'+'m/publicat'+'ions/blend'+'ing-in-det'+'ail/#detai'+'l-oriented'+'\x0a\x20\x20\x20\x20fn\x20bl'+'endNormals'+'(inN1:\x20vec'+'3f,\x20inN2:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'n1:\x20vec3f\x20'+'=\x20inN1\x20+\x20v'+'ec3f(0.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20n2:\x20vec'+'3f\x20=\x20inN2\x20'+'*\x20vec3f(-1'+'.0,\x20-1.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20n1\x20*\x20dot('+'n1,\x20n2)\x20/\x20'+'n1.z\x20-\x20n2;'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0afn\x20ge'+'tNormal()\x20'+'{\x0a#ifdef\x20S'+'TD_NORMAL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20var\x20norm'+'alMap:\x20vec'+'3f\x20=\x20{STD_'+'NORMAL_TEX'+'TURE_DECOD'+'E}(texture'+'SampleBias'+'({STD_NORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_NORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_NOR'+'MAL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias));\x0a'+'\x20\x20\x20\x20normal'+'Map\x20=\x20mix('+'vec3f(0.0,'+'\x200.0,\x201.0)'+',\x20normalMa'+'p,\x20uniform'+'.material_'+'bumpiness)'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_NO'+'RMALDETAIL'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20normalDet'+'ailMap:\x20ve'+'c3f\x20=\x20{STD'+'_NORMALDET'+'AIL_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE_NAME},'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_NAM'+'E}Sampler,'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_UV}'+(',\x20uniform.'+'textureBia'+'s));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalD'+'etailMap\x20='+'\x20mix(vec3f'+'(0.0,\x200.0,'+'\x201.0),\x20nor'+'malDetailM'+'ap,\x20unifor'+'m.material'+'_normalDet'+'ailMapBump'+'iness);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20norm'+'alMap\x20=\x20bl'+'endNormals'+'(normalMap'+',\x20normalDe'+'tailMap);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20nor'+'malize(dTB'+'N\x20*\x20normal'+'Map);\x0a#els'+'e\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a'),qD='\x0auniform\x20m'+'aterial_op'+'acity:\x20f32'+';\x0a\x0afn\x20getO'+'pacity()\x20{'+'\x0a\x20\x20\x20\x20dAlph'+'a\x20=\x20unifor'+'m.material'+'_opacity;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E\x0a\x20\x20\x20\x20dAlp'+'ha\x20=\x20dAlph'+'a\x20*\x20textur'+'eSampleBia'+'s({STD_OPA'+'CITY_TEXTU'+'RE_NAME},\x20'+'{STD_OPACI'+'TY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'OPACITY_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20=\x20dA'+'lpha\x20*\x20cla'+'mp(vVertex'+'Color.{STD'+'_OPACITY_V'+'ERTEX_CHAN'+'NEL},\x200.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',jD='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20blueNo'+'iseJitter:'+'\x20vec4f;\x0a\x0a#'+'if\x20STD_OPA'+'CITY_DITHE'+'R\x20==\x20BLUEN'+'OISE\x0a\x20\x20\x20\x20v'+'ar\x20blueNoi'+'seTex32\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20blueN'+'oiseTex32S'+'ampler\x20:\x20s'+'ampler;\x0a#e'+'ndif\x0a\x0afn\x20o'+'pacityDith'+'er(alpha:\x20'+'f32,\x20id:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'#if\x20STD_OP'+'ACITY_DITH'+'ER\x20==\x20BAYE'+'R8\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20nois'+'e:\x20f32\x20=\x20b'+'ayer8(floo'+'r((pcPosit'+'ion.xy\x20+\x20u'+'niform.blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+')\x20%\x20vec2f('+'8.0)))\x20/\x206'+'4.0;\x0a\x0a\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20=='+'\x20BLUENOISE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uv\x20'+'=\x20fract(pc'+'Position.x'+'y\x20/\x2032.0\x20+'+'\x20uniform.b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20noise:\x20f3'+'2\x20=\x20textur'+'eSampleLev'+'el(blueNoi'+'seTex32,\x20b'+'lueNoiseTe'+'x32Sampler'+',\x20uv,\x200.0)'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20IGNNOI'+'SE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ba'+'sed\x20on\x20htt'+'ps://www.i'+'ryoku.com/'+'next-gener'+'ation-post'+'-processin'+'g-in-call-'+'of-duty-ad'+'vanced-war'+'fare/\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20magic\x20=\x20'+'vec3f(0.06'+'711056,\x200.'+'00583715,\x20'+'52.9829189'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'oise:\x20f32\x20'+'=\x20fract(ma'+'gic.z\x20*\x20fr'+'act(dot(pc'+'Position.x'+'y\x20+\x20unifor'+'m.blueNois'+'eJitter.xy'+'\x20+\x20id,\x20mag'+('ic.xy)));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20conve'+'rt\x20the\x20noi'+'se\x20to\x20line'+'ar\x20space,\x20'+'as\x20that\x20is'+'\x20specified'+'\x20in\x20sRGB\x20s'+'pace\x20(stor'+'es\x20percept'+'ual\x20values'+')\x0a\x20\x20\x20\x20nois'+'e\x20=\x20pow(no'+'ise,\x202.2);'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'alpha\x20<\x20no'+'ise)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),YD='\x0a',KD='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(outp'+'ut.color.r'+'gb,\x20litArg'+'s_opacity)'+';\x0a\x0a#elif\x20L'+'IT_BLEND_T'+'YPE\x20==\x20PRE'+'MULTIPLIED'+'\x0a\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(out'+'put.color.'+'rgb\x20*\x20litA'+'rgs_opacit'+'y,\x20litArgs'+'_opacity);'+'\x0a\x0a#else\x0a\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(output'+'.color.rgb'+',\x201.0);\x0a\x0a#'+'endif\x0a',ZD='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0avar\x20sour'+'ce:\x20textur'+'e_2d<f32>;'+'\x0avar\x20sourc'+'eSampler:\x20'+'sampler;\x0a\x0a'+'@fragment\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'textureSam'+'ple(source'+',\x20sourceSa'+'mpler,\x20inp'+'ut.vUv0);\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'+'\x0a',QD='\x0a\x0auniform\x20'+'material_s'+'heen:\x20vec3'+'f;\x0a\x0afn\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20var\x20sh'+'eenColor\x20='+'\x20uniform.m'+'aterial_sh'+'een;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_TEX'+'TURE\x0a\x20\x20\x20\x20s'+'heenColor\x20'+'=\x20sheenCol'+'or\x20*\x20{STD_'+'SHEEN_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SHEEN'+'_TEXTURE_N'+'AME},\x20{STD'+'_SHEEN_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEEN_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as)).{STD_'+'SHEEN_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_VER'+'TEX\x0a\x20\x20\x20\x20sh'+'eenColor\x20='+'\x20sheenColo'+'r\x20*\x20satura'+'te3(vVerte'+'xColor.{ST'+'D_SHEEN_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20sSpecula'+'rity\x20=\x20she'+'enColor;\x0a}'+'\x0a',JD='\x0auniform\x20m'+'aterial_sh'+'eenGloss:\x20'+'f32;\x0a\x0afn\x20g'+'etSheenGlo'+'ssiness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'sheenGloss'+'iness\x20=\x20un'+'iform.mate'+'rial_sheen'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SHEENGL'+'OSS_TEXTUR'+'E\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_SHEEN'+'GLOSS_TEXT'+'URE_NAME},'+'\x20{STD_SHEE'+'NGLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_UV},\x20un'+'iform.text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20=\x20'+'sheenGloss'+'iness\x20*\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'GLOSS_VERT'+'EX_CHANNEL'+'});\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEENGLOS'+'S_INVERT\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20='+'\x201.0\x20-\x20she'+'enGlossine'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'sGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'+\x200.000000'+'1;\x0a}\x0a',eI='\x0auniform\x20m'+'aterial_he'+'ightMapFac'+'tor:\x20f32;\x0a'+'\x0afn\x20getPar'+'allax()\x20{\x0a'+'\x20\x20\x20\x20var\x20pa'+'rallaxScal'+'e\x20=\x20unifor'+'m.material'+'_heightMap'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20var\x20hei'+'ght:\x20f32\x20='+'\x20textureSa'+'mpleBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_HEIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_HEIGHT_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'height\x20=\x20h'+'eight\x20*\x20pa'+'rallaxScal'+'e\x20-\x20parall'+'axScale\x20*\x20'+'0.5;\x0a\x20\x20\x20\x20v'+'ar\x20viewDir'+'T:\x20vec3f\x20='+'\x20dViewDirW'+'\x20*\x20dTBN;\x0a\x0a'+'\x20\x20\x20\x20viewDi'+'rT.z\x20=\x20vie'+'wDirT.z\x20+\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',tI='\x0auniform\x20m'+'eshInstanc'+'eId:\x20u32;\x0a'+'\x0afn\x20getPic'+'kOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20let\x20i'+'nv:\x20vec4f\x20'+'=\x20vec4f(1.'+'0\x20/\x20255.0)'+';\x0a\x20\x20\x20\x20let\x20'+'shifts:\x20ve'+'c4u\x20=\x20vec4'+'u(16u,\x208u,'+'\x200u,\x2024u);'+'\x0a\x20\x20\x20\x20let\x20c'+'ol:\x20vec4u\x20'+'=\x20(vec4u(u'+'niform.mes'+'hInstanceI'+'d)\x20>>\x20shif'+'ts)\x20&\x20vec4'+'u(0xffu);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4f(col'+')\x20*\x20inv;\x0a}',sI='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20dReflDi'+'rW\x20=\x20norma'+'lize(-refl'+'ect(viewDi'+'r,\x20worldNo'+'rmal));\x0a}\x0a',iI='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20rou'+'ghness:\x20f3'+'2\x20=\x20sqrt(1'+'.0\x20-\x20min(g'+'loss,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20directio'+'n:\x20vec2f\x20='+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20anisotrop'+'y:\x20f32\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cDirection'+':\x20vec3f\x20=\x20'+'anisotropi'+'cB;\x0a\x20\x20\x20\x20le'+'t\x20anisotro'+'picTangent'+':\x20vec3f\x20=\x20'+'cross(anis'+'otropicDir'+'ection,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20let\x20anis'+'otropicNor'+'mal:\x20vec3f'+'\x20=\x20cross(a'+'nisotropic'+'Tangent,\x20a'+'nisotropic'+'Direction)'+';\x0a\x20\x20\x20\x20let\x20'+'bendFactor'+':\x20f32\x20=\x201.'+'0\x20-\x20anisot'+'ropy\x20*\x20(1.'+'0\x20-\x20roughn'+'ess);\x0a\x20\x20\x20\x20'+'let\x20bendFa'+'ctor4:\x20f32'+'\x20=\x20bendFac'+'tor\x20*\x20bend'+'Factor\x20*\x20b'+'endFactor\x20'+'*\x20bendFact'+'or;\x0a\x20\x20\x20\x20le'+'t\x20bentNorm'+'al:\x20vec3f\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}',rI='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0afn\x20addRe'+'flectionCC'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20ccRef'+'lection\x20=\x20'+'ccReflecti'+'on\x20+\x20calcR'+'eflection('+'reflDir,\x20g'+'loss);\x0a}\x0a#'+'endif\x0a',aI='\x0avar\x20textu'+'re_cubeMap'+':\x20texture_'+'cube<f32>;'+'\x0avar\x20textu'+'re_cubeMap'+'Sampler:\x20s'+'ampler;\x0aun'+'iform\x20mate'+'rial_refle'+'ctivity:\x20f'+'32;\x0a\x0afn\x20ca'+'lcReflecti'+'on(reflDir'+':\x20vec3f,\x20g'+'loss:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'lookupVec:'+'\x20vec3f\x20=\x20c'+'ubeMapProj'+'ect(reflDi'+'r);\x0a\x20\x20\x20\x20lo'+'okupVec.x\x20'+'=\x20lookupVe'+'c.x\x20*\x20-1.0'+';\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_cubeMa'+'p,\x20texture'+'_cubeMapSa'+'mpler,\x20loo'+'kupVec));\x0a'+'}\x0a\x0afn\x20addR'+'eflection('+'reflDir:\x20v'+'ec3f,\x20glos'+'s:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20dR'+'eflection\x20'+'+\x20vec4f(ca'+'lcReflecti'+'on(reflDir'+',\x20gloss),\x20'+'uniform.ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',nI='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20var\x20t'+'exture_env'+'Atlas:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'envAtlasSa'+'mpler:\x20sam'+'pler;\x0a#end'+'if\x0a\x0avar\x20te'+'xture_cube'+'Map:\x20textu'+'re_cube<f3'+'2>;\x0avar\x20te'+'xture_cube'+'MapSampler'+':\x20sampler;'+'\x0auniform\x20m'+'aterial_re'+'flectivity'+':\x20f32;\x0a\x0afn'+'\x20calcRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20dir:\x20ve'+'c3f\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20toSph'+'ericalUv(d'+'ir);\x0a\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20roughne'+'ss\x20level\x0a\x20'+'\x20\x20\x20let\x20lev'+'el:\x20f32\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20let\x20ile'+'vel:\x20f32\x20='+'\x20floor(lev'+'el);\x0a\x20\x20\x20\x20l'+'et\x20flevel:'+'\x20f32\x20=\x20lev'+'el\x20-\x20ileve'+'l;\x0a\x0a\x20\x20\x20\x20le'+'t\x20sharp:\x20v'+'ec3f\x20=\x20{re'+'flectionCu'+'bemapDecod'+'e}(texture'+'Sample(tex'+'ture_cubeM'+'ap,\x20textur'+'e_cubeMapS'+'ampler,\x20di'+'r));\x0a\x20\x20\x20\x20l'+'et\x20roughA:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+')));\x0a\x20\x20\x20\x20l'+'et\x20roughB:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(shar'+'p,\x20mix(rou'+('ghA,\x20rough'+'B,\x20flevel)'+',\x20min(leve'+'l,\x201.0)));'+'\x0a}\x0a\x0afn\x20add'+'Reflection'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20dRefl'+'ection\x20=\x20d'+'Reflection'+'\x20+\x20vec4f(c'+'alcReflect'+'ion(reflDi'+'r,\x20gloss),'+'\x20uniform.m'+'aterial_re'+'flectivity'+');\x0a}\x0a'),oI='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_envA'+'tlasSample'+'r:\x20sampler'+';\x0a#endif\x0au'+'niform\x20mat'+'erial_refl'+'ectivity:\x20'+'f32;\x0a\x0a//\x20c'+'alculate\x20m'+'ip\x20level\x20f'+'or\x20shiny\x20r'+'eflection\x20'+'given\x20equi'+'rect\x20coord'+'s\x20uv.\x0afn\x20s'+'hinyMipLev'+'el(uv:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20dx:\x20vec2f'+'\x20=\x20dpdx(uv'+');\x0a\x20\x20\x20\x20let'+'\x20dy:\x20vec2f'+'\x20=\x20dpdy(uv'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20second\x20dF'+'\x20at\x20180\x20de'+'grees\x0a\x20\x20\x20\x20'+'let\x20uv2:\x20v'+'ec2f\x20=\x20vec'+'2f(fract(u'+'v.x\x20+\x200.5)'+',\x20uv.y);\x0a\x20'+'\x20\x20\x20let\x20dx2'+':\x20vec2f\x20=\x20'+'dpdx(uv2);'+'\x0a\x20\x20\x20\x20let\x20d'+'y2:\x20vec2f\x20'+'=\x20dpdy(uv2'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20min\x20of\x20bo'+'th\x20sets\x20of'+'\x20dF\x20to\x20han'+'dle\x20discon'+'tinuity\x20at'+'\x20the\x20azim\x20'+'edge\x0a\x20\x20\x20\x20l'+'et\x20maxd:\x20f'+'32\x20=\x20min(m'+'ax(dot(dx,'+'\x20dx),\x20dot('+'dy,\x20dy)),\x20'+'max(dot(dx'+'2,\x20dx2),\x20d'+'ot(dy2,\x20dy'+'2)));\x0a\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(0.5\x20*\x20'+'log2(maxd)'+'\x20-\x201.0\x20+\x20u'+'niform.tex'+'tureBias,\x20'+'0.0,\x205.0);'+'\x0a}\x0a\x0afn\x20cal'+'cReflectio'+'n(reflDir:'+'\x20vec3f,\x20gl'+'oss:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20d'+'ir:\x20vec3f\x20'+'=\x20cubeMapP'+'roject(ref'+'lDir)\x20*\x20ve'+'c3f(-1.0,\x20'+'1.0,\x201.0);'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20toSpheric'+'alUv(dir);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20r'+'oughness\x20l'+'evel\x0a\x20\x20\x20\x20l'+'et\x20level:\x20'+'f32\x20=\x20satu'+'rate(1.0\x20-'+'\x20gloss)\x20*\x20'+'5.0;\x0a\x20\x20\x20\x20l'+('et\x20ilevel:'+'\x20f32\x20=\x20flo'+'or(level);'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ccessing\x20t'+'he\x20shiny\x20('+'top\x20level)'+'\x20reflectio'+'n\x20-\x20perfor'+'m\x20manual\x20m'+'ipmap\x20look'+'up\x0a\x20\x20\x20\x20let'+'\x20level2:\x20f'+'32\x20=\x20shiny'+'MipLevel(u'+'v\x20*\x20atlasS'+'ize);\x0a\x20\x20\x20\x20'+'let\x20ilevel'+'2:\x20f32\x20=\x20f'+'loor(level'+'2);\x0a\x0a\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20uv1:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20weight:'+'\x20f32;\x0a\x20\x20\x20\x20'+'if\x20(ilevel'+'\x20==\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'1\x20=\x20mapShi'+'nyUv(uv,\x20i'+'level2\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20weight\x20'+'=\x20level2\x20-'+'\x20ilevel2;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20access'+'ing\x20rough\x20'+'reflection'+'\x20-\x20just\x20sa'+'mple\x20the\x20s'+'ame\x20part\x20t'+'wice\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv0\x20=\x20m'+'apRoughnes'+'sUv(uv,\x20il'+'evel);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv1\x20='+'\x20uv0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x200.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20linearA'+':\x20vec3f\x20=\x20'+'{reflectio'+'nDecode}(t'+'extureSamp'+'le(texture'+'_envAtlas,'+'\x20texture_e'+'nvAtlasSam'+'pler,\x20uv0)'+');\x0a\x20\x20\x20\x20let'+'\x20linearB:\x20'+'vec3f\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'tureSample'+'(texture_e'+'nvAtlas,\x20t'+'exture_env'+'AtlasSampl'+'er,\x20uv1));'+'\x0a\x20\x20\x20\x20let\x20l'+'inear0:\x20ve'+'c3f\x20=\x20mix('+'linearA,\x20l'+'inearB,\x20we'+'ight);\x0a\x20\x20\x20'+'\x20let\x20linea'+'r1:\x20vec3f\x20'+'=\x20{reflect'+'ionDecode}'+'(textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r')+('eturn\x20proc'+'essEnviron'+'ment(mix(l'+'inear0,\x20li'+'near1,\x20lev'+'el\x20-\x20ileve'+'l));\x0a}\x0a\x0afn'+'\x20addReflec'+'tion(reflD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20d'+'Reflection'+'\x20=\x20dReflec'+'tion\x20+\x20vec'+'4f(calcRef'+'lection(re'+'flDir,\x20glo'+'ss),\x20unifo'+'rm.materia'+'l_reflecti'+'vity);\x0a}\x0a'),lI='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a#en'+'dif\x0a\x0avar\x20t'+'exture_sph'+'ereMap:\x20te'+'xture_2d<f'+'32>;\x0avar\x20t'+'exture_sph'+'ereMapSamp'+'ler:\x20sampl'+'er;\x0aunifor'+'m\x20material'+'_reflectiv'+'ity:\x20f32;\x0a'+'\x0afn\x20calcRe'+'flection(r'+'eflDir:\x20ve'+'c3f,\x20gloss'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20view'+'RotationMa'+'trix\x20=\x20mat'+'3x3f(unifo'+'rm.matrix_'+'view[0].xy'+'z,\x20uniform'+'.matrix_vi'+'ew[1].xyz,'+'\x20uniform.m'+'atrix_view'+'[2].xyz);\x0a'+'\x20\x20\x20\x20let\x20re'+'flDirV:\x20ve'+'c3f\x20=\x20view'+'RotationMa'+'trix\x20*\x20ref'+'lDir;\x0a\x0a\x20\x20\x20'+'\x20let\x20m:\x20f3'+'2\x20=\x202.0\x20*\x20'+'sqrt(dot(r'+'eflDirV.xy'+',\x20reflDirV'+'.xy)\x20+\x20(re'+'flDirV.z\x20+'+'\x201.0)\x20*\x20(r'+'eflDirV.z\x20'+'+\x201.0));\x0a\x20'+'\x20\x20\x20let\x20sph'+'ereMapUv:\x20'+'vec2f\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_sphere'+'Map,\x20textu'+'re_sphereM'+'apSampler,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0af'+'n\x20addRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20dRefle'+'ction\x20+\x20ve'+'c4f(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20unif'+'orm.materi'+'al_reflect'+'ivity);\x0a}\x0a',cI='\x0a\x0afn\x20addRe'+'flectionSh'+'een(worldN'+'ormal:\x20vec'+'3f,\x20viewDi'+'r:\x20vec3f,\x20'+'gloss:\x20f32'+')\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20dot(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20let\x20al'+'phaG:\x20f32\x20'+'=\x20gloss\x20*\x20'+'gloss;\x0a\x0a\x20\x20'+'\x20\x20//\x20Avoid'+'\x20using\x20a\x20L'+'UT\x20and\x20app'+'roximate\x20t'+'he\x20values\x20'+'analytical'+'ly\x0a\x20\x20\x20\x20let'+'\x20a:\x20f32\x20=\x20'+'select(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20-339.2\x20*'+'\x20alphaG\x20+\x20'+'161.4\x20*\x20gl'+'oss\x20-\x2025.9'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gloss\x20<\x200.'+'25\x0a\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20let\x20b:'+'\x20f32\x20=\x20sel'+'ect(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.97\x20*\x20'+'alphaG\x20-\x203'+'.27\x20*\x20glos'+'s\x20+\x200.72,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x2044'+'.0\x20*\x20alpha'+'G\x20-\x2023.7\x20*'+'\x20gloss\x20+\x203'+'.26,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss\x20<'+'\x200.25\x0a\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20let'+'\x20dg_add:\x20f'+'32\x20=\x20selec'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.1\x20*\x20(\x20g'+'loss\x20-\x200.2'+'5\x20),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x200.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s\x20<\x200.25\x0a\x20'+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'let\x20dg:\x20f3'+'2\x20=\x20exp(\x20a'+'\x20*\x20NoV\x20+\x20b'+'\x20)\x20+\x20dg_ad'+'d;\x0a\x20\x20\x20\x20sRe'+'flection\x20='+'\x20sReflecti'+'on\x20+\x20(calc'+'Reflection'+'(worldNorm'+'al,\x200.0)\x20*'+'\x20saturate('+'dg));\x0a}',hI='\x0afn\x20refrac'+'t2(viewVec'+':\x20vec3f,\x20n'+'ormal:\x20vec'+'3f,\x20IOR:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20vn:\x20f32'+'\x20=\x20dot(vie'+'wVec,\x20norm'+'al);\x0a\x20\x20\x20\x20l'+'et\x20k:\x20f32\x20'+'=\x201.0\x20-\x20IO'+'R\x20*\x20IOR\x20*\x20'+'(1.0\x20-\x20vn\x20'+'*\x20vn);\x0a\x20\x20\x20'+'\x20let\x20refrV'+'ec:\x20vec3f\x20'+'=\x20IOR\x20*\x20vi'+'ewVec\x20-\x20(I'+'OR\x20*\x20vn\x20+\x20'+'sqrt(k))\x20*'+'\x20normal;\x0a\x20'+'\x20\x20\x20return\x20'+'refrVec;\x0a}'+'\x0a\x0afn\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20vi'+'ewDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20th'+'ickness:\x20f'+'32,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20al'+'bedo:\x20vec3'+'f,\x0a\x20\x20\x20\x20tra'+'nsmission:'+'\x20f32,\x0a\x20\x20\x20\x20'+'refraction'+'Index:\x20f32'+',\x0a\x20\x20\x20\x20disp'+'ersion:\x20f3'+'2\x0a#if\x20defi'+'ned(LIT_IR'+'IDESCENCE)'+'\x0a\x20\x20\x20\x20,\x20iri'+'descenceFr'+'esnel:\x20vec'+'3f,\x0a\x20\x20\x20\x20ir'+'idescenceI'+'ntensity:\x20'+'f32\x0a#endif'+'\x0a)\x20{\x0a\x20\x20\x20\x20/'+'/\x20use\x20same'+'\x20reflectio'+'n\x20code\x20wit'+'h\x20refracti'+'on\x20vector\x0a'+'\x20\x20\x20\x20let\x20tm'+'pRefl:\x20vec'+'4f\x20=\x20dRefl'+'ection;\x0a\x20\x20'+'\x20\x20let\x20refl'+'ectionDir:'+'\x20vec3f\x20=\x20r'+'efract2(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndex);\x0a\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(0.0);\x0a\x20'+'\x20\x20\x20addRefl'+'ection(ref'+'lectionDir'+',\x20gloss);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'mix(dDiffu'+'seLight,\x20d'+'Reflection'+'.rgb\x20*\x20alb'+'edo,\x20trans'+'mission);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20tm'+'pRefl;\x0a}\x0a',dI='\x0auniform\x20m'+'aterial_in'+'vAttenuati'+'onDistance'+':\x20f32;\x0auni'+'form\x20mater'+'ial_attenu'+'ation:\x20vec'+'3f;\x0a\x0afn\x20ev'+'alRefracti'+'onColor(re'+'fractionVe'+'ctor:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20refra'+'ctionIndex'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20The\x20'+'refraction'+'\x20point\x20is\x20'+'the\x20entry\x20'+'point\x20+\x20ve'+'ctor\x20to\x20ex'+'it\x20point\x0a\x20'+'\x20\x20\x20let\x20poi'+'ntOfRefrac'+'tion:\x20vec4'+'f\x20=\x20vec4f('+'vPositionW'+'\x20+\x20refract'+'ionVector,'+'\x201.0);\x0a\x0a\x20\x20'+'\x20\x20//\x20Proje'+'ct\x20to\x20text'+'ure\x20space\x20'+'so\x20we\x20can\x20'+'sample\x20it\x0a'+'\x20\x20\x20\x20let\x20pr'+'ojectionPo'+'int:\x20vec4f'+'\x20=\x20uniform'+'.matrix_vi'+'ewProjecti'+'on\x20*\x20point'+'OfRefracti'+'on;\x0a\x0a\x20\x20\x20\x20/'+'/\x20use\x20buil'+'t-in\x20getGr'+'abScreenPo'+'s\x20function'+'\x20to\x20conver'+'t\x20screen\x20p'+'osition\x20to'+'\x20grab\x20text'+'ure\x20uv\x20coo'+'rds\x0a\x20\x20\x20\x20le'+'t\x20uv:\x20vec2'+'f\x20=\x20getGra'+'bScreenPos'+'(projectio'+'nPoint);\x0a\x0a'+'\x20\x20\x20\x20//\x20Use'+'\x20IOR\x20and\x20r'+'oughness\x20t'+'o\x20select\x20m'+'ip\x0a\x20\x20\x20\x20let'+'\x20iorToRoug'+'hness:\x20f32'+'\x20=\x20(1.0\x20-\x20'+'gloss)\x20*\x20c'+'lamp((1.0\x20'+'/\x20refracti'+'onIndex)\x20*'+'\x202.0\x20-\x202.0'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20let'+'\x20refractio'+'nLod:\x20f32\x20'+'=\x20log2(uni'+'form.uScre'+'enSize.x)\x20'+'*\x20iorToRou'+'ghness;\x0a\x20\x20'+'\x20\x20let\x20refr'+'action:\x20ve'+'c3f\x20=\x20text'+'ureSampleL'+'evel(uScen'+'eColorMap,'+'\x20uSceneCol'+'orMapSampl'+'er,\x20uv,\x20re'+'fractionLo'+'d).rgb;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'refraction'+';\x0a}\x0a\x0afn\x20ad'+'dRefractio'+'n(\x0a\x20\x20\x20\x20wor'+('ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20thickness'+':\x20f32,\x0a\x20\x20\x20'+'\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20albedo:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'transmissi'+'on:\x20f32,\x0a\x20'+'\x20\x20\x20refract'+'ionIndex:\x20'+'f32,\x0a\x20\x20\x20\x20d'+'ispersion:'+'\x20f32,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'iridescenc'+'eIntensity'+':\x20f32\x0a#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20Extra'+'ct\x20scale\x20f'+'rom\x20the\x20mo'+'del\x20transf'+'orm\x0a\x20\x20\x20\x20va'+'r\x20modelSca'+'le:\x20vec3f;'+'\x0a\x20\x20\x20\x20model'+'Scale.x\x20=\x20'+'length(uni'+'form.matri'+'x_model[0]'+'.xyz);\x0a\x20\x20\x20'+'\x20modelScal'+'e.y\x20=\x20leng'+'th(uniform'+'.matrix_mo'+'del[1].xyz'+');\x0a\x20\x20\x20\x20mod'+'elScale.z\x20'+'=\x20length(u'+'niform.mat'+'rix_model['+'2].xyz);\x0a\x0a'+'\x20\x20\x20\x20//\x20Cal'+'culate\x20the'+'\x20refractio'+'n\x20vector,\x20'+'scaled\x20by\x20'+'the\x20thickn'+'ess\x20and\x20sc'+'ale\x20of\x20the'+'\x20object\x0a\x20\x20'+'\x20\x20let\x20scal'+'e:\x20vec3f\x20='+'\x20thickness'+'\x20*\x20modelSc'+'ale;\x0a\x20\x20\x20\x20v'+'ar\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndex))'+'\x20*\x20scale;\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'x);\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20based\x20on'+'\x20the\x20dispe'+'rsion\x20mate'+'rial\x20prope'+'rty,\x20calcu'+'late\x20modif'+'ied\x20refrac'+'tion\x20index'+'\x20values\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20f'+'or\x20R\x20and\x20B'+'\x20channels\x20')+('and\x20evalua'+'te\x20the\x20ref'+'raction\x20co'+'lor\x20for\x20th'+'em.\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Spread:\x20f3'+'2\x20=\x20(1.0\x20/'+'\x20refractio'+'nIndex\x20-\x201'+'.0)\x20*\x200.02'+'5\x20*\x20disper'+'sion;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20r'+'efractionI'+'ndexR:\x20f32'+'\x20=\x20refract'+'ionIndex\x20-'+'\x20halfSprea'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20refractio'+'nVector\x20=\x20'+'normalize('+'refract(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndexR))\x20'+'*\x20scale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ref'+'raction.r\x20'+'=\x20evalRefr'+'actionColo'+'r(refracti'+'onVector,\x20'+'gloss,\x20ref'+'ractionInd'+'exR).r;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20refractio'+'nIndexB:\x20f'+'32\x20=\x20refra'+'ctionIndex'+'\x20+\x20halfSpr'+'ead;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndexB)'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efraction.'+'b\x20=\x20evalRe'+'fractionCo'+'lor(refrac'+'tionVector'+',\x20gloss,\x20r'+'efractionI'+'ndexB).b;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20T'+'ransmittan'+'ce\x20is\x20our\x20'+'final\x20refr'+'action\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20transmitt'+'ance:\x20vec3'+'f;\x0a\x20\x20\x20\x20if\x20'+'(uniform.m'+'aterial_in'+'vAttenuati'+'onDistance'+'\x20!=\x200.0)\x0a\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20att'+'enuation:\x20'+'vec3f\x20=\x20-l'+'og(uniform'+'.material_'+'attenuatio'+'n)\x20*\x20unifo'+'rm.materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans')+('mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20let\x20'+'fresnel:\x20v'+'ec3f\x20=\x20vec'+'3f(1.0)\x20-\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20world'+'Normal),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scenceInte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20mix(dDif'+'fuseLight,'+'\x20refractio'+'n\x20*\x20transm'+'ittance\x20*\x20'+'fresnel,\x20t'+'ransmissio'+'n);\x0a}\x0a'),fI='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0a#ifdef'+'\x20CUBEMAP_S'+'OURCE\x0a\x20\x20\x20\x20'+'var\x20source'+'Cube:\x20text'+'ure_cube<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20sourceC'+'ubeSampler'+'\x20:\x20sampler'+';\x0a#else\x0a\x20\x20'+'\x20\x20var\x20sour'+'ceTex:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sourceTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20//\x20sa'+'mples\x0a\x20\x20\x20\x20'+'var\x20sample'+'sTex:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20samplesTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20samplesT'+'exInverseS'+'ize:\x20vec2f'+';\x0a#endif\x0a\x0a'+'//\x20params:'+'\x0a//\x20x\x20-\x20ta'+'rget\x20cubem'+'ap\x20face\x200.'+'.6\x0a//\x20y\x20-\x20'+'target\x20ima'+'ge\x20total\x20p'+'ixels\x0a//\x20z'+'\x20-\x20source\x20'+'cubemap\x20si'+'ze\x0auniform'+'\x20params:\x20v'+'ec3f;\x0a\x0afn\x20'+'targetFace'+'()\x20->\x20f32\x20'+'{\x20return\x20u'+'niform.par'+'ams.x;\x20}\x0af'+'n\x20targetTo'+'talPixels('+')\x20->\x20f32\x20{'+'\x20return\x20un'+'iform.para'+'ms.y;\x20}\x0afn'+'\x20sourceTot'+'alPixels()'+'\x20->\x20f32\x20{\x20'+'return\x20uni'+'form.param'+'s.z;\x20}\x0a\x0aco'+'nst\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22enc'+'odePS\x22\x0a\x0a//'+'--\x20support'+'ed\x20project'+'ions\x0a\x0afn\x20m'+'odifySeams'+'(dir:\x20vec3'+'f,\x20scale:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20adir\x20='+'\x20abs(dir);'+'\x0a\x20\x20\x20\x20let\x20M'+'\x20=\x20max(max'+'(adir.x,\x20a'+'dir.y),\x20ad'+'ir.z);\x0a\x20\x20\x20'+'\x20return\x20di'+'r\x20/\x20M\x20*\x20ve'+'c3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20select('+('scale,\x201.0'+',\x20adir.x\x20='+'=\x20M),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20select'+'(scale,\x201.'+'0,\x20adir.y\x20'+'==\x20M),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20selec'+'t(scale,\x201'+'.0,\x20adir.z'+'\x20==\x20M)\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0afn\x20'+'toSpherica'+'l(dir:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20l'+'et\x20nonZero'+'XZ\x20=\x20any(d'+'ir.xz\x20!=\x20v'+'ec2f(0.0,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2f(select'+'(0.0,\x20atan'+'2(dir.x,\x20d'+'ir.z),\x20non'+'ZeroXZ),\x20a'+'sin(dir.y)'+');\x0a}\x0a\x0afn\x20f'+'romSpheric'+'al(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20vec3'+'f(cos(uv.y'+')\x20*\x20sin(uv'+'.x),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sin(uv.y)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'s(uv.y)\x20*\x20'+'cos(uv.x))'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Equirect(u'+'v:\x20vec2f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20fromSphe'+'rical((vec'+'2f(uv.x,\x201'+'.0\x20-\x20uv.y)'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20vec2'+'f(PI,\x20PI\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20octahe'+'dral\x20code,'+'\x20based\x20on\x20'+'https://jc'+'gt.org/pub'+'lished/000'+'3/02/01/\x0a/'+'/\x20\x22Survey\x20'+'of\x20Efficie'+'nt\x20Represe'+'ntations\x20f'+'or\x20Indepen'+'dent\x20Unit\x20'+'Vectors\x22\x20b'+'y\x20Cigolle,'+'\x20Donow,\x20Ev'+'angelakos,'+'\x20Mara,\x20McG'+'uire,\x20Meye'+'r\x0a\x0afn\x20sign'+'NotZero(k:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20sele'+'ct(-1.0,\x201'+'.0,\x20k\x20>=\x200'+'.0);\x0a}\x0a\x0afn'+'\x20signNotZe'+'roVec2(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec2f(signN'+'otZero(v.x'+'),\x20signNot'+'Zero(v.y))'+';\x0a}\x0a\x0a//\x20Re'+'turns\x20a\x20un'+'it\x20vector.'+'\x20Argument\x20'+'o\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20pack')+('ed\x20via\x20oct'+'Encode,\x20on'+'\x20the\x20[-1,\x20'+'+1]\x20square'+'\x0afn\x20octDec'+'ode(o:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20v\x20=\x20vec'+'3f(o.x,\x201.'+'0\x20-\x20abs(o.'+'x)\x20-\x20abs(o'+'.y),\x20o.y);'+'\x0a\x20\x20\x20\x20if\x20(v'+'.y\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20temp:\x20'+'vec2f\x20=\x20(1'+'.0\x20-\x20abs(v'+'.zx))\x20*\x20si'+'gnNotZeroV'+'ec2(v.xz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'\x20=\x20vec3f(t'+'emp.x,\x20v.y'+',\x20temp.y);'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20no'+'rmalize(v)'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Octahedral'+'(uv:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20octDec'+'ode(vec2f('+'uv.x,\x201.0\x20'+'-\x20uv.y)\x20*\x20'+'2.0\x20-\x201.0)'+';\x0a}\x0a\x0a//\x20As'+'sumes\x20that'+'\x20v\x20is\x20a\x20un'+'it\x20vector.'+'\x20The\x20resul'+'t\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20on\x20t'+'he\x20[-1,\x20+1'+']\x20square\x0af'+'n\x20octEncod'+'e(v:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20var\x20'+'result\x20=\x20v'+'.xz\x20*\x20(1.0'+'\x20/\x20l1norm)'+';\x0a\x20\x20\x20\x20if\x20('+'v.y\x20<\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'(1.0\x20-\x20abs'+'(result.yx'+'))\x20*\x20signN'+'otZeroVec2'+'(result.xy'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20return\x20'+'result;\x0a}\x0a'+'\x0a/////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'\x0a\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20fn'+'\x20sampleCub'+'emapDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'sourceCube'+',\x20sourceCu'+'beSampler,'+'\x20modifySea'+'ms(dir,\x201.'+'0));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleCubem'+'apSph(sph:')+('\x20vec2f)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20sample'+'CubemapDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leCubemapD'+'irLod(dir:'+'\x20vec3f,\x20mi'+'pLevel:\x20f3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leLevel(so'+'urceCube,\x20'+'sourceCube'+'Sampler,\x20m'+'odifySeams'+'(dir,\x201.0)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleCubemap'+'SphLod(sph'+':\x20vec2f,\x20m'+'ipLevel:\x20f'+'32)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'sampleCube'+'mapDirLod('+'fromSpheri'+'cal(sph),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a#el'+'se\x0a\x0a\x20\x20\x20\x20fn'+'\x20sampleEqu'+'irectSph(s'+'ph:\x20vec2f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv\x20=\x20s'+'ph\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'(sourceTex'+',\x20sourceTe'+'xSampler,\x20'+'vec2f(uv.x'+',\x201.0\x20-\x20uv'+'.y));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20fn\x20'+'sampleEqui'+'rectDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leEquirect'+'Sph(toSphe'+'rical(dir)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleEquirec'+'tSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20uv'+'\x20=\x20sph\x20/\x20v'+'ec2f(PI\x20*\x20'+'2.0,\x20PI)\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleLevel('+'sourceTex,'+'\x20sourceTex'+'Sampler,\x20v'+'ec2f(uv.x,'+'\x201.0\x20-\x20uv.'+'y),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleEquir'+'ectDirLod('+'dir:\x20vec3f'+',\x20mipLevel'+':\x20f32)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleE')+('quirectSph'+'Lod(toSphe'+'rical(dir)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleOctahed'+'ralDir(dir'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20=\x20oct'+'Encode(dir'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'textureSam'+'ple(source'+'Tex,\x20sourc'+'eTexSample'+'r,\x20vec2f(u'+'v.x,\x201.0\x20-'+'\x20uv.y));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20sampleO'+'ctahedralS'+'ph(sph:\x20ve'+'c2f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leOctahedr'+'alDirLod(d'+'ir:\x20vec3f,'+'\x20mipLevel:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'v\x20=\x20octEnc'+'ode(dir)\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'Level(sour'+'ceTex,\x20sou'+'rceTexSamp'+'ler,\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20sampl'+'eOctahedra'+'lSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'Lod(fromSp'+'herical(sp'+'h),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a\x0a'+'fn\x20getDire'+'ctionCubem'+'ap(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20st\x20=\x20uv'+'\x20*\x202.0\x20-\x201'+'.0;\x0a\x20\x20\x20\x20le'+'t\x20face\x20=\x20t'+'argetFace('+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20vec:\x20vec'+'3f;\x0a\x20\x20\x20\x20if'+'\x20(face\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(1,\x20'+'-st.y,\x20-st'+'.x);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3f(-1,\x20-'+'st.y,\x20st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x202.0)')+('\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3f(st.x,\x201'+',\x20st.y);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(face\x20='+'=\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'\x20=\x20vec3f(s'+'t.x,\x20-1,\x20-'+'st.y);\x0a\x20\x20\x20'+'\x20}\x20else\x20if'+'\x20(face\x20==\x20'+'4.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(st.'+'x,\x20-st.y,\x20'+'1);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(-st'+'.x,\x20-st.y,'+'\x20-1);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20normal'+'ize(modify'+'Seams(vec,'+'\x201.0));\x0a}\x0a'+'\x0afn\x20matrix'+'FromVector'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x201.0\x20'+'/\x20(1.0\x20+\x20n'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20-n.'+'x\x20*\x20n.y\x20*\x20'+'a;\x0a\x20\x20\x20\x20let'+'\x20b1\x20=\x20vec3'+'f(1.0\x20-\x20n.'+'x\x20*\x20n.x\x20*\x20'+'a,\x20b,\x20-n.x'+');\x0a\x20\x20\x20\x20let'+'\x20b2\x20=\x20vec3'+'f(b,\x201.0\x20-'+'\x20n.y\x20*\x20n.y'+'\x20*\x20a,\x20-n.y'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mat3x3'+'f(b1,\x20b2,\x20'+'n);\x0a}\x0a\x0afn\x20'+'matrixFrom'+'VectorSlow'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20up\x20=\x20sel'+'ect(vec3f('+'0.0,\x200.0,\x20'+'select(-1.'+'0,\x201.0,\x20n.'+'y\x20>\x200.0)),'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'),\x20abs(n.y'+')\x20>\x200.0000'+'001);\x0a\x20\x20\x20\x20'+'let\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20let'+'\x20y\x20=\x20cross'+'(n,\x20x);\x0a\x20\x20'+'\x20\x20return\x20m'+'at3x3f(x,\x20'+'y,\x20n);\x0a}\x0a\x0a'+'fn\x20reproje'+'ct(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20i'+'f\x20({NUM_SA'+'MPLES}\x20<=\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20sing'+'le\x20sample\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}({'+'DECODE_FUN'+'C}({SOURCE'+'_FUNC}Dir('+'{TARGET_FU'+'NC}(uv))))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mult'+'i\x20sample\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20t\x20=\x20{TARG')+('ET_FUNC}(u'+'v);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20tu\x20='+'\x20dpdx(t);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20tv\x20=\x20dpd'+'y(t);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'u\x20+=\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20for\x20(v'+'ar\x20v\x20=\x200.0'+';\x20v\x20<\x20{NUM'+'_SAMPLES_S'+'QRT};\x20v\x20+='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}Dir(norma'+'lize(t\x20+\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20t'+'u\x20*\x20(u\x20/\x20{'+'NUM_SAMPLE'+'S_SQRT}\x20-\x20'+'0.5)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tv\x20'+'*\x20(v\x20/\x20{NU'+'M_SAMPLES_'+'SQRT}\x20-\x200.'+'5))));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20{ENC'+'ODE_FUNC}('+'result\x20/\x20('+'{NUM_SAMPL'+'ES_SQRT}\x20*'+'\x20{NUM_SAMP'+'LES_SQRT})'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0aconst\x20un'+'packFloat:'+'\x20vec4f\x20=\x20v'+'ec4f(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20fn\x20un'+'packSample'+'(i:\x20i32,\x20L'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20mipLev'+'el:\x20ptr<fu'+'nction,\x20f3'+'2>)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20u\x20'+'=\x20(f32(i\x20*'+'\x204)\x20+\x200.5)'+'\x20*\x20uniform'+'.samplesTe'+'xInverseSi'+'ze.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20v\x20'+'=\x20(floor(u'+')\x20+\x200.5)\x20*'+'\x20uniform.s'+'amplesTexI'+'nverseSize'+'.y;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20raw'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.x\x20=\x20dot(t'+'extureSamp')+('le(samples'+'Tex,\x20sampl'+'esTexSampl'+'er,\x20vec2f('+'u,\x20v)),\x20un'+'packFloat)'+';\x20u\x20+=\x20uni'+'form.sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'textureSam'+'ple(sample'+'sTex,\x20samp'+'lesTexSamp'+'ler,\x20vec2f'+'(u,\x20v)),\x20u'+'npackFloat'+');\x20u\x20+=\x20un'+'iform.samp'+'lesTexInve'+'rseSize.x;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.z\x20=\x20dot'+'(textureSa'+'mple(sampl'+'esTex,\x20sam'+'plesTexSam'+'pler,\x20vec2'+'f(u,\x20v)),\x20'+'unpackFloa'+'t);\x20u\x20+=\x20u'+'niform.sam'+'plesTexInv'+'erseSize.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'raw.w\x20=\x20do'+'t(textureS'+'ample(samp'+'lesTex,\x20sa'+'mplesTexSa'+'mpler,\x20vec'+'2f(u,\x20v)),'+'\x20unpackFlo'+'at);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20*L\x20=\x20r'+'aw.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*m'+'ipLevel\x20=\x20'+'raw.w\x20*\x208.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20con'+'volve\x20an\x20e'+'nvironment'+'\x20given\x20pre'+'-generated'+'\x20samples\x0a\x20'+'\x20\x20\x20fn\x20pref'+'ilterSampl'+'es(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'truct\x20vect'+'or\x20space\x20g'+'iven\x20targe'+'t\x20directio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vecSpa'+'ce\x20=\x20matri'+'xFromVecto'+'rSlow({TAR'+'GET_FUNC}('+'uv));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20L'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20mipLevel:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(var\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20i\x20+=\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unpa'+'ckSample(i'+',\x20&L,\x20&mip'+'Level);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'result\x20+=\x20'+'{DECODE_FU')+('NC}({SOURC'+'E_FUNC}Dir'+'Lod(vecSpa'+'ce\x20*\x20L,\x20mi'+'pLevel))\x20*'+'\x20L.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20to'+'talWeight\x20'+'+=\x20L.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20{ENCOD'+'E_FUNC}(re'+'sult\x20/\x20tot'+'alWeight);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20unwei'+'ghted\x20vers'+'ion\x20of\x20pre'+'filterSamp'+'les\x0a\x20\x20\x20\x20fn'+'\x20prefilter'+'SamplesUnw'+'eighted(uv'+':\x20vec2f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20construct'+'\x20vector\x20sp'+'ace\x20given\x20'+'target\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20v'+'ecSpace\x20=\x20'+'matrixFrom'+'VectorSlow'+'({TARGET_F'+'UNC}(uv));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20L:\x20vec'+'3f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20mipL'+'evel:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20result'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(va'+'r\x20i\x20=\x200;\x20i'+'\x20<\x20{NUM_SA'+'MPLES};\x20i\x20'+'+=\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'unpackSamp'+'le(i,\x20&L,\x20'+'&mipLevel)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}DirLod(ve'+'cSpace\x20*\x20L'+',\x20mipLevel'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'{ENCODE_FU'+'NC}(result'+'\x20/\x20f32({NU'+'M_SAMPLES}'+'));\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20{P'+'ROCESS_FUN'+'C}(input.v'+'Uv0);\x0a\x20\x20\x20\x20'+'return\x20out'+'put;\x0a}\x0a'),uI='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0aunifo'+'rm\x20uvMod:\x20'+'vec4f;\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0a\x0a@'+'vertex\x0afn\x20'+'vertexMain'+'(input:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20var\x20outpu'+'t:\x20VertexO'+'utput;\x0a\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(input.v'+'ertex_posi'+'tion,\x200.5,'+'\x201.0);\x0a\x20\x20o'+'utput.vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(input.ver'+'tex_positi'+'on\x20*\x200.5\x20+'+'\x20vec2f(0.5'+',\x200.5))\x20*\x20'+'uniform.uv'+'Mod.xy\x20+\x20u'+'niform.uvM'+'od.zw);\x0a\x20\x20'+'return\x20out'+'put;\x0a}\x0a',pI='\x0a\x0avar\x20uSce'+'neDepthMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20uSceneD'+'epthMapSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifn'+'def\x20SCREEN'+'SIZE\x0a\x20\x20\x20\x20#'+'define\x20SCR'+'EENSIZE\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fndef\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20#define\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20unifor'+'m\x20matrix_v'+'iew:\x20mat4x'+'4f;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20CAM'+'ERAPLANES\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20CAME'+'RAPLANES\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20camer'+'a_params:\x20'+'vec4f;\x20//\x20'+'x:\x201\x20/\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20\x20y:\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20z:\x20came'+'ra_near,\x20\x20'+'\x20\x20\x20\x20\x20\x20w:\x20i'+'s_ortho\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20fn\x20lin'+'earizeDept'+'h(z:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uniform.c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x20//\x20Pe'+'rspective\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20('+'uniform.ca'+'mera_param'+'s.z\x20*\x20unif'+'orm.camera'+'_params.y)'+'\x20/\x20(unifor'+'m.camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.z\x20-'+'\x20uniform.c'+'amera_para'+'ms.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20unifor'+'m.camera_p'+'arams.z\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'+'\x0afn\x20deline'+'arizeDepth'+'(linearDep'+'th:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.camera'+'_params.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(unif'+'orm.camera'+('_params.y\x20'+'*\x20(uniform'+'.camera_pa'+'rams.z\x20-\x20l'+'inearDepth'+'))\x20/\x20(line'+'arDepth\x20*\x20'+'(uniform.c'+'amera_para'+'ms.z\x20-\x20uni'+'form.camer'+'a_params.y'+'));\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20(linearD'+'epth\x20-\x20uni'+'form.camer'+'a_params.z'+')\x20/\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20}\x0a}\x0a\x0a//\x20R'+'etrieves\x20r'+'endered\x20li'+'near\x20camer'+'a\x20depth\x20by'+'\x20UV\x0afn\x20get'+'LinearScre'+'enDepth(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_LINEAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SCEN'+'E_DEPTHMAP'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'uSceneDept'+'hMap,\x20uSce'+'neDepthMap'+'Sampler,\x20u'+'v).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20tex'+'tureSize\x20='+'\x20textureDi'+'mensions(u'+'SceneDepth'+'Map,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20texel'+':\x20vec2i\x20=\x20'+'vec2i(uv\x20*'+'\x20vec2f(tex'+'tureSize))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta:\x20vec4f\x20'+'=\x20textureL'+'oad(uScene'+'DepthMap,\x20'+'texel,\x200);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta_u32:\x20ve'+'c4u\x20=\x20vec4'+'u(data\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20intBits'+':\x20u32\x20=\x20(d'+'ata_u32.r\x20'+'<<\x2024u)\x20|\x20'+'(data_u32.'+'g\x20<<\x2016u)\x20'+'|\x20(data_u3'+'2.b\x20<<\x208u)'+'\x20|\x20data_u3'+'2.a;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20bitca'+'st<f32>(in'+'tBits);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pth(textur'+'eSample(uS'+'ceneDepthM')+('ap,\x20uScene'+'DepthMapSa'+'mpler,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20fn\x20get'+'LinearScre'+'enDepthFra'+'g()\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20pcP'+'osition.xy'+'\x20*\x20uniform'+'.uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afn\x20get'+'LinearDept'+'h(pos:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20-(unif'+'orm.matrix'+'_view\x20*\x20ve'+'c4f(pos,\x201'+'.0)).z;\x0a}\x0a'),mI='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x0afn'+'\x20getShadow'+'CascadeInd'+'ex(shadowC'+'ascadeDist'+'ances:\x20vec'+'4f,\x20shadow'+'CascadeCou'+'nt:\x20i32)\x20-'+'>\x20i32\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20dept'+'h\x20in\x200\x20..\x20'+'far\x20plane\x20'+'range\x0a\x20\x20\x20\x20'+'let\x20depth:'+'\x20f32\x20=\x201.0'+'\x20/\x20pcPosit'+'ion.w;\x0a\x0a\x20\x20'+'\x20\x20//\x201.0\x20i'+'f\x20depth\x20>='+'\x20distance,'+'\x200.0\x20other'+'wise\x0a\x20\x20\x20\x20l'+'et\x20compari'+'sons:\x20vec4'+'f\x20=\x20step(s'+'hadowCasca'+'deDistance'+'s,\x20vec4f(d'+'epth));\x0a\x0a\x20'+'\x20\x20\x20//\x20sum\x20'+'is\x20the\x20ind'+'ex\x0a\x20\x20\x20\x20let'+'\x20cascadeIn'+'dex:\x20i32\x20='+'\x20i32(dot(c'+'omparisons'+',\x20vec4f(1.'+'0)));\x0a\x0a\x20\x20\x20'+'\x20//\x20limit\x20'+'to\x20actual\x20'+'number\x20of\x20'+'used\x20casca'+'des\x0a\x20\x20\x20\x20re'+'turn\x20min(c'+'ascadeInde'+'x,\x20shadowC'+'ascadeCoun'+'t\x20-\x201);\x0a}\x0a'+'\x0a//\x20functi'+'on\x20which\x20m'+'odifies\x20ca'+'scade\x20inde'+'x\x20to\x20dithe'+'r\x20between\x20'+'cascades\x0af'+'n\x20ditherSh'+'adowCascad'+'eIndex(cas'+'cadeIndex_'+'in:\x20i32,\x20s'+'hadowCasca'+'deDistance'+'s:\x20vec4f,\x20'+'shadowCasc'+'adeCount:\x20'+'i32,\x20blend'+'Factor:\x20f3'+'2)\x20->\x20i32\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Use\x20var\x20as'+'\x20cascadeIn'+'dex\x20might\x20'+'be\x20modifie'+'d\x0a\x20\x20\x20\x20var\x20'+'cascadeInd'+'ex:\x20i32\x20=\x20'+'cascadeInd'+'ex_in;\x0a\x20\x20\x20'+'\x20if\x20(casca'+'deIndex\x20<\x20'+'shadowCasc'+'adeCount\x20-'+'\x201)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20cu'+'rrentRange'+'End:\x20f32\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+('\x20transitio'+'nStart:\x20f3'+'2\x20=\x20blendF'+'actor\x20*\x20cu'+'rrentRange'+'End;\x20//\x20St'+'art\x20overla'+'p\x20factor\x20a'+'way\x20from\x20t'+'he\x20end\x20dis'+'tance\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(depth\x20'+'>\x20transiti'+'onStart)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20a\x20tr'+'ansition\x20f'+'actor\x20(0.0'+'\x20to\x201.0)\x20w'+'ithin\x20the\x20'+'overlap\x20ra'+'nge\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'transition'+'Factor:\x20f3'+'2\x20=\x20smooth'+'step(trans'+'itionStart'+',\x20currentR'+'angeEnd,\x20d'+'epth);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Add\x20pse'+'udo-random'+'\x20dithering'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20TODO'+':\x20replace\x20'+'by\x20user\x20se'+'lectable\x20d'+'ithering\x20m'+'ethod\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20dither:\x20'+'f32\x20=\x20frac'+'t(sin(dot('+'pcPosition'+'.xy,\x20vec2f'+'(12.9898,\x20'+'78.233)))\x20'+'*\x2043758.54'+'53);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dither\x20<\x20'+'transition'+'Factor)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20casc'+'adeIndex\x20='+'\x20cascadeIn'+'dex\x20+\x201;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20cascadeIn'+'dex;\x0a}\x0a\x0afn'+'\x20fadeShado'+'w(shadowCo'+'ord_in:\x20ve'+'c3f,\x20shado'+'wCascadeDi'+'stances:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20//\x20if\x20the'+'\x20pixel\x20is\x20'+'past\x20the\x20s'+'hadow\x20dist'+'ance,\x20remo'+'ve\x20shadow\x0a'+'\x20\x20\x20\x20//\x20thi'+'s\x20enforces'+'\x20straight\x20'+'line\x20inste'+'ad\x20of\x20corn'+'er\x20of\x20shad'+'ow\x20which\x20m'+'oves\x20when\x20'+'camera\x20rot'+'ates\x0a\x20\x20\x20\x20v'+'ar\x20shadowC'+'oord:\x20vec3'+'f\x20=\x20shadow')+('Coord_in;\x0a'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x20\x20\x20\x20if\x20(d'+'epth\x20>\x20sha'+'dowCascade'+'Distances.'+'w)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20shadowC'+'oord.z\x20=\x20-'+'9999999.0;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'hadowCoord'+';\x0a}\x0a'),_I='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afn\x20linste'+'p(a:\x20f32,\x20'+'b:\x20f32,\x20v:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20/'+'/\x20WGSL\x20sat'+'urate\x20->\x20c'+'lamp\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p((v\x20-\x20a)\x20'+'/\x20(b\x20-\x20a),'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0afn\x20re'+'duceLightB'+'leeding(pM'+'ax:\x20f32,\x20a'+'mount:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'fn\x20chebysh'+'evUpperBou'+'nd(moments'+':\x20vec2f,\x20m'+'ean:\x20f32,\x20'+'minVarianc'+'e:\x20f32,\x20li'+'ghtBleedin'+'gReduction'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'//\x20Compute'+'\x20variance\x0a'+'\x20\x20\x20\x20var\x20va'+'riance:\x20f3'+'2\x20=\x20moment'+'s.y\x20-\x20(mom'+'ents.x\x20*\x20m'+'oments.x);'+'\x0a\x20\x20\x20\x20varia'+'nce\x20=\x20max('+'variance,\x20'+'minVarianc'+'e);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Compute\x20'+'probabilis'+'tic\x20upper\x20'+'bound\x0a\x20\x20\x20\x20'+'let\x20d:\x20f32'+'\x20=\x20mean\x20-\x20'+'moments.x;'+'\x0a\x20\x20\x20\x20var\x20p'+'Max:\x20f32\x20='+'\x20variance\x20'+'/\x20(varianc'+'e\x20+\x20(d\x20*\x20d'+'));\x0a\x0a\x20\x20\x20\x20p'+'Max\x20=\x20redu'+'ceLightBle'+'eding(pMax'+',\x20lightBle'+'edingReduc'+'tion);\x0a\x0a\x20\x20'+'\x20\x20//\x20One-t'+'ailed\x20Cheb'+'yshev\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(pMax,\x20'+'1.0,\x20mean\x20'+'<=\x20moments'+'.x);\x0a}\x0a\x0afn'+'\x20calculate'+'EVSM(momen'+'ts_in:\x20vec'+'3f,\x20Z_in:\x20'+'f32,\x20vsmBi'+'as:\x20f32,\x20e'+'xponent:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20Z:\x20f32\x20=\x20'+'2.0\x20*\x20Z_in'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20let\x20warp'+'edDepth:\x20f'+'32\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20l'+('et\x20moments'+':\x20vec2f\x20=\x20'+'moments_in'+'.xy\x20+\x20vec2'+'f(warpedDe'+'pth,\x20warpe'+'dDepth*war'+'pedDepth)\x20'+'*\x20(1.0\x20-\x20m'+'oments_in.'+'z);\x0a\x0a\x20\x20\x20\x20l'+'et\x20VSMBias'+':\x20f32\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20let\x20d'+'epthScale:'+'\x20f32\x20=\x20VSM'+'Bias\x20*\x20exp'+'onent\x20*\x20wa'+'rpedDepth;'+'\x0a\x20\x20\x20\x20let\x20m'+'inVariance'+'1:\x20f32\x20=\x20d'+'epthScale\x20'+'*\x20depthSca'+'le;\x0a\x20\x20\x20\x20re'+'turn\x20cheby'+'shevUpperB'+'ound(momen'+'ts,\x20warped'+'Depth,\x20min'+'Variance1,'+'\x200.1);\x0a}\x0a/'+'/\x20------\x20V'+'SM\x2016\x20----'+'--\x0a\x0afn\x20VSM'+'16(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords:\x20vec'+'2f,\x20resolu'+'tion:\x20f32,'+'\x20Z:\x20f32,\x20v'+'smBias:\x20f3'+'2,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20let\x20momen'+'ts:\x20vec3f\x20'+'=\x20textureS'+'ampleLevel'+'(tex,\x20texS'+'ampler,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'n\x20getShado'+'wVSM16(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20VS'+'M16(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord.xy,\x20s'+'hadowParam'+'s.x,\x20shado'+'wCoord.z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotVSM1'+'6(shadowMa'+'p:\x20texture'+'_2d<f32>,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler,\x20sha'+'dowCoord:\x20'+'vec3f,\x20sha')+('dowParams:'+'\x20vec4f,\x20ex'+'ponent:\x20f3'+'2,\x20lightDi'+'r:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20Z:\x20'+'f32\x20=\x20leng'+'th(lightDi'+'r)\x20*\x20shado'+'wParams.w\x20'+'+\x20shadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20return\x20V'+'SM16(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20Z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----'+'--\x0a\x0afn\x20VSM'+'32(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords_in:\x20'+'vec2f,\x20res'+'olution:\x20f'+'32,\x20Z:\x20f32'+',\x20vsmBias:'+'\x20f32,\x20expo'+'nent:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20CAPS_TEX'+'TURE_FLOAT'+'_FILTERABL'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20moment'+'s:\x20vec3f\x20='+'\x20textureSa'+'mpleLevel('+'tex,\x20texSa'+'mpler,\x20tex'+'Coords_in,'+'\x200.0).xyz;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20manual\x20b'+'ilinear\x20fi'+'ltering\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'pixelSize\x20'+':\x20f32\x20=\x201.'+'0\x20/\x20resolu'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20te'+'xCoords:\x20v'+'ec2f\x20=\x20tex'+'Coords_in\x20'+'-\x20vec2f(pi'+'xelSize);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20s00:\x20vec'+'3f\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20texCoords'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20s10:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20texCoor'+'ds\x20+\x20vec2f'+'(pixelSize'+',\x200.0),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'s01:\x20vec3f'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'exCoords\x20+'+'\x20vec2f(0.0'+',\x20pixelSiz'+'e),\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s11:')+('\x20vec3f\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20texCo'+'ords\x20+\x20vec'+'2f(pixelSi'+'ze),\x200.0).'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fr:'+'\x20vec2f\x20=\x20f'+'ract(texCo'+'ords\x20*\x20res'+'olution);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20h0:\x20vec3'+'f\x20=\x20mix(s0'+'0,\x20s10,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20h1:'+'\x20vec3f\x20=\x20m'+'ix(s01,\x20s1'+'1,\x20fr.x);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20moments:'+'\x20vec3f\x20=\x20m'+'ix(h0,\x20h1,'+'\x20fr.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20calculate'+'EVSM(momen'+'ts,\x20Z,\x20vsm'+'Bias,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owVSM32(sh'+'adowMap:\x20t'+'exture_2d<'+'f32>,\x20shad'+'owMapSampl'+'er:\x20sample'+'r,\x20shadowC'+'oord:\x20vec3'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20expone'+'nt:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20V'+'SM32(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afn\x20getSha'+'dowSpotVSM'+'32(shadowM'+'ap:\x20textur'+'e_2d<f32>,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20e'+'xponent:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20Z:'+'\x20f32\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20Z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a'),gI='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afn\x20getS'+'hadowPCF1x'+'1(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowCoo'+'rd.z);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotPCF1'+'x1(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20shad'+'owCoord.xy'+',\x20shadowCo'+'ord.z);\x0a}\x0a'+'\x0a//\x20-----\x20'+'Omni\x20Sampl'+'ing\x20-----\x0a'+'\x0a//\x20Not\x20su'+'pported\x20on'+'\x20WebGPU\x20de'+'vice\x0a//\x20fn'+'\x20getShadow'+'OmniPCF1x1'+'(shadowMap'+':\x20texture_'+'depth_cube'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f,'+'\x20lightDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a//\x20'+'\x20\x20\x20\x20let\x20sh'+'adowZ:\x20f32'+'\x20=\x20length('+'lightDir)\x20'+'*\x20shadowPa'+'rams.w\x20+\x20s'+'hadowParam'+'s.z;\x0a//\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20lightD'+'ir,\x20shadow'+'Z);\x0a//\x20}\x0a',SI='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0afn\x20_getS'+'hadowPCF3x'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20sum:\x20f3'+'2\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20let\x20uw'+'0:\x20f32\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20s);\x0a\x20\x20\x20\x20'+'let\x20uw1:\x20f'+'32\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20s)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20u0_offset'+':\x20f32\x20=\x20(2'+'.0\x20-\x20s)\x20/\x20'+'uw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20let\x20u'+'1_offset:\x20'+'f32\x20=\x20s\x20/\x20'+'uw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'vw0:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t);\x0a\x20\x20'+'\x20\x20let\x20vw1:'+'\x20f32\x20=\x20(1.'+'0\x20+\x202.0\x20*\x20'+'t);\x0a\x0a\x20\x20\x20\x20l'+'et\x20v0_offs'+'et:\x20f32\x20=\x20'+'(2.0\x20-\x20t)\x20'+'/\x20vw0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20let'+'\x20v1_offset'+':\x20f32\x20=\x20t\x20'+'/\x20vw1\x20+\x201.'+'0;\x0a\x0a\x20\x20\x20\x20le'+'t\x20u0:\x20f32\x20'+'=\x20u0_offse'+'t\x20*\x20shadow'+'MapSizeInv'+'\x20+\x20base_uv'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20v0:\x20f32\x20'+'=\x20v0_offse'+'t\x20*\x20shadow'+('MapSizeInv'+'\x20+\x20base_uv'+'.y;\x0a\x0a\x20\x20\x20\x20l'+'et\x20u1:\x20f32'+'\x20=\x20u1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20l'+'et\x20v1:\x20f32'+'\x20=\x20v1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'sum\x20=\x20sum\x20'+'+\x20uw0\x20*\x20vw'+'0\x20*\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20v'+'ec2f(u0,\x20v'+'0),\x20z);\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw1\x20*\x20'+'vw0\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u1,'+'\x20v0),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw0\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'0,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'1\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u1,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20*'+'\x20(1.0\x20/\x2016'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20sum;'+'\x0a}\x0a\x0afn\x20get'+'ShadowPCF3'+'x3(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wPCF3x3(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0afn\x20getSh'+'adowSpotPC'+'F3x3(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3(')+('shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams.xyz);'+'\x0a}\x0a\x0a//\x20---'+'--\x20Omni\x20Sa'+'mpling\x20---'+'--\x0a\x0a//\x20Not'+'\x20currently'+'\x20supported'+'\x20on\x20WebGPU'+'\x20device\x0a//'+'\x20fn\x20getSha'+'dowOmniPCF'+'3x3(shadow'+'Map:\x20textu'+'re_depth_c'+'ube,\x20shado'+'wMapSample'+'r:\x20sampler'+'_compariso'+'n,\x20shadowP'+'arams:\x20vec'+'4f,\x20dir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a//\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a//\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(dir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x0a//'+'\x20\x20\x20\x20\x20//\x20of'+'fset\x0a//\x20\x20\x20'+'\x20\x20let\x20texS'+'ize_i\x20=\x20te'+'xtureDimen'+'sions(shad'+'owMap,\x200);'+'\x0a//\x20\x20\x20\x20\x20le'+'t\x20z:\x20f32\x20='+'\x201.0\x20/\x20f32'+'(texSize_i'+'.x);\x0a//\x20\x20\x20'+'\x20\x20let\x20tc:\x20'+'vec3f\x20=\x20no'+'rmalize(di'+'r);\x0a\x0a//\x20\x20\x20'+'\x20\x20//\x20avera'+'ge\x204\x20sampl'+'es\x20-\x20not\x20a'+'\x20strict\x203x'+'3\x20PCF\x20but\x20'+'that\x27s\x20tri'+'cky\x20with\x20c'+'ubemaps\x0a//'+'\x20\x20\x20\x20\x20var\x20s'+'hadows:\x20ve'+'c4f;\x0a//\x20\x20\x20'+'\x20\x20shadows.'+'x\x20=\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20t'+'c\x20+\x20vec3f('+'\x20z,\x20\x20z,\x20\x20z'+'),\x20shadowZ'+');\x0a//\x20\x20\x20\x20\x20'+'shadows.y\x20'+'=\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20tc\x20'+'+\x20vec3f(-z'+',\x20-z,\x20\x20z),'+'\x20shadowZ);'+'\x0a//\x20\x20\x20\x20\x20sh'+'adows.z\x20=\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20tc\x20+\x20'+'vec3f(-z,\x20'+'\x20z,\x20-z),\x20s'+'hadowZ);\x0a/')+('/\x20\x20\x20\x20\x20shad'+'ows.w\x20=\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20tc\x20+\x20ve'+'c3f(\x20z,\x20-z'+',\x20-z),\x20sha'+'dowZ);\x0a\x0a//'+'\x20\x20\x20\x20\x20retur'+'n\x20dot(shad'+'ows,\x20vec4f'+'(0.25));\x0a/'+'/\x20}\x0a\x0a//\x20fn'+'\x20getShadow'+'OmniPCF3x3'+'_Wrapper(s'+'hadowMap:\x20'+'texture_de'+'pth_cube,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a//\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCF3x3(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowParams'+',\x20lightDir'+');\x0a//\x20}\x0a'),yI='\x0a//\x20http:/'+'/the-witne'+'ss.net/new'+'s/2013/09/'+'shadow-map'+'ping-summa'+'ry-part-1/'+'\x0afn\x20_getSh'+'adowPCF5x5'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20l'+'et\x20uw0:\x20f3'+'2\x20=\x20(4.0\x20-'+'\x203.0\x20*\x20s);'+'\x0a\x20\x20\x20\x20let\x20u'+'w1:\x20f32\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20l'+'et\x20uw2:\x20f3'+'2\x20=\x20(1.0\x20+'+'\x203.0\x20*\x20s);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'u0_offset:'+'\x20f32\x20=\x20(3.'+'0\x20-\x202.0\x20*\x20'+'s)\x20/\x20uw0\x20-'+'\x202.0;\x0a\x20\x20\x20\x20'+'let\x20u1_off'+'set:\x20f32\x20='+'\x20(3.0\x20+\x20s)'+'\x20/\x20uw1;\x0a\x20\x20'+'\x20\x20let\x20u2_o'+'ffset:\x20f32'+'\x20=\x20s\x20/\x20uw2'+'\x20+\x202.0;\x0a\x0a\x20'+'\x20\x20\x20let\x20vw0'+':\x20f32\x20=\x20(4'+'.0\x20-\x203.0\x20*'+'\x20t);\x0a\x20\x20\x20\x20l'+'et\x20vw1:\x20f3'+'2\x20=\x207.0;\x0a\x20'+'\x20\x20\x20let\x20vw2'+':\x20f32\x20=\x20(1'+'.0\x20+\x203.0\x20*'+'\x20t);\x0a\x0a\x20\x20\x20\x20'+'let\x20v0_off'+'set:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t)\x20/\x20v'+'w0\x20-\x202.0;\x0a'+'\x20\x20\x20\x20let\x20v1'+'_offset:\x20f'+'32\x20=\x20(3.0\x20'+('+\x20t)\x20/\x20vw1'+';\x0a\x20\x20\x20\x20let\x20'+'v2_offset:'+'\x20f32\x20=\x20t\x20/'+'\x20vw2\x20+\x202.0'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20sum:\x20f32\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20let\x20u0:\x20'+'f32\x20=\x20u0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.x;\x0a\x20\x20'+'\x20\x20let\x20v0:\x20'+'f32\x20=\x20v0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20u1:'+'\x20f32\x20=\x20u1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.x;\x0a\x20'+'\x20\x20\x20let\x20v1:'+'\x20f32\x20=\x20v1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20let\x20u2'+':\x20f32\x20=\x20u2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.x;\x0a'+'\x20\x20\x20\x20let\x20v2'+':\x20f32\x20=\x20v2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20sum\x20='+'\x20sum\x20+\x20uw0'+'\x20*\x20vw0\x20*\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20vec2f('+'u0,\x20v0),\x20z'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20sum\x20+\x20u'+'w1\x20*\x20vw0\x20*'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20vec2'+'f(u1,\x20v0),'+'\x20z);\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw2\x20*\x20vw0'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u2,\x20v0'+'),\x20z);\x0a\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw0\x20*\x20'+'vw1\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u0,'+'\x20v1),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'1,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'2\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare')+('Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u2,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw0\x20*\x20vw2'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u0,\x20v2'+'),\x20z);\x0a\x20\x20\x20'+'\x20sum\x20=\x20sum'+'\x20+\x20uw1\x20*\x20v'+'w2\x20*\x20textu'+'reSampleCo'+'mpareLevel'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'vec2f(u1,\x20'+'v2),\x20z);\x0a\x20'+'\x20\x20\x20sum\x20=\x20s'+'um\x20+\x20uw2\x20*'+'\x20vw2\x20*\x20tex'+'tureSample'+'CompareLev'+'el(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20vec2f(u2'+',\x20v2),\x20z);'+'\x0a\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20*\x20(1'+'.0\x20/\x20144.0'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20saturat'+'e(sum);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afn'+'\x20getShadow'+'PCF5x5(sha'+'dowMap:\x20te'+'xture_dept'+'h_2d,\x20shad'+'owMapSampl'+'er:\x20sample'+'r_comparis'+'on,\x20shadow'+'Coord:\x20vec'+'3f,\x20shadow'+'Params:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20_getS'+'hadowPCF5x'+'5(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params.xyz'+');\x0a}\x0a\x0afn\x20g'+'etShadowSp'+'otPCF5x5(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owCoord:\x20v'+'ec3f,\x20shad'+'owParams:\x20'+'vec4f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20_ge'+'tShadowPCF'+'5x5(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a'),vI='\x0a\x0afn\x20fract'+'SinRand(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20PI:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20a:\x20f32\x20'+'=\x2012.9898;'+'\x20let\x20b:\x20f3'+'2\x20=\x2078.233'+';\x20let\x20c:\x20f'+'32\x20=\x2043758'+'.5453;\x0a\x20\x20\x20'+'\x20let\x20dt:\x20f'+'32\x20=\x20dot(u'+'v.xy,\x20vec2'+'f(a,\x20b));\x0a'+'\x20\x20\x20\x20let\x20sn'+':\x20f32\x20=\x20dt'+'\x20%\x20PI;\x0a\x20\x20\x20'+'\x20return\x20fr'+'act(sin(sn'+')\x20*\x20c);\x0a}\x0a'+'\x0a//\x20struct'+'\x20to\x20hold\x20p'+'recomputed'+'\x20constants'+'\x20and\x20curre'+'nt\x20state\x0as'+'truct\x20Voge'+'lDiskData\x20'+'{\x0a\x20\x20\x20\x20invN'+'umSamples:'+'\x20f32,\x0a\x20\x20\x20\x20'+'initialAng'+'le:\x20f32,\x0a\x20'+'\x20\x20\x20current'+'PointId:\x20f'+'32,\x0a}\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'fn\x20prepare'+'DiskConsta'+'nts(data:\x20'+'ptr<functi'+'on,\x20VogelD'+'iskData>,\x20'+'sampleCoun'+'t:\x20i32,\x20ra'+'ndomSeed:\x20'+'f32)\x20{\x0a\x20\x20\x20'+'\x20let\x20pi2:\x20'+'f32\x20=\x206.28'+'318530718;'+'\x0a\x20\x20\x20\x20data.'+'invNumSamp'+'les\x20=\x201.0\x20'+'/\x20f32(samp'+'leCount);\x0a'+'\x20\x20\x20\x20data.i'+'nitialAngl'+'e\x20=\x20random'+'Seed\x20*\x20pi2'+';\x0a\x20\x20\x20\x20data'+'.currentPo'+'intId\x20=\x200.'+'0;\x0a}\x0a\x0a\x0afn\x20'+'generateDi'+'skSample(d'+'ata:\x20ptr<f'+'unction,\x20V'+'ogelDiskDa'+'ta>)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20GOLDEN'+'_ANGLE:\x20f3'+'2\x20=\x202.3999'+'63;\x0a\x20\x20\x20\x20le'+'t\x20r:\x20f32\x20='+'\x20sqrt((dat'+'a.currentP'+'ointId\x20+\x200'+'.5)\x20*\x20data'+'.invNumSam'+'ples);\x0a\x20\x20\x20'+'\x20let\x20theta'+':\x20f32\x20=\x20da'+'ta.current'+'PointId\x20*\x20'+'GOLDEN_ANG'+'LE\x20+\x20data.'+'initialAng'+('le;\x0a\x0a\x20\x20\x20\x20l'+'et\x20offset:'+'\x20vec2f\x20=\x20v'+'ec2f(cos(t'+'heta),\x20sin'+'(theta))\x20*'+'\x20pow(r,\x201.'+'33);\x0a\x0a\x20\x20\x20\x20'+'data.curre'+'ntPointId\x20'+'=\x20data.cur'+'rentPointI'+'d\x20+\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'offset;\x0a}\x0a'+'\x0afn\x20PCSSFi'+'ndBlocker('+'shadowMap:'+'\x20texture_2'+'d<f32>,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler,\x20avgBl'+'ockerDepth'+':\x20ptr<func'+'tion,\x20f32>'+',\x20numBlock'+'ers:\x20ptr<f'+'unction,\x20i'+'32>,\x0a\x20\x20\x20\x20s'+'hadowCoord'+'s:\x20vec2f,\x20'+'z:\x20f32,\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32,\x20penum'+'braSize:\x20f'+'32,\x20invSha'+'dowMapSize'+':\x20f32,\x20ran'+'domSeed:\x20f'+'32)\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20diskD'+'ata:\x20Vogel'+'DiskData;\x0a'+'\x20\x20\x20\x20prepar'+'eDiskConst'+'ants(&disk'+'Data,\x20shad'+'owBlockerS'+'amples,\x20ra'+'ndomSeed);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'searchWidt'+'h:\x20f32\x20=\x20p'+'enumbraSiz'+'e\x20*\x20invSha'+'dowMapSize'+';\x0a\x20\x20\x20\x20var\x20'+'blockerSum'+':\x20f32\x20=\x200.'+'0;\x0a\x20\x20\x20\x20var'+'\x20numBlocke'+'rs_local:\x20'+'i32\x20=\x200;\x0a\x0a'+'\x20\x20\x20\x20for(\x20v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20s'+'hadowBlock'+'erSamples;'+'\x20i\x20=\x20i\x20+\x201'+'\x20)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20dis'+'kUV:\x20vec2f'+'\x20=\x20generat'+'eDiskSampl'+'e(&diskDat'+'a);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20samp'+'leUV:\x20vec2'+'f\x20=\x20shadow'+'Coords\x20+\x20d'+'iskUV\x20*\x20se'+'archWidth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadowM'+'apDepth:\x20f'+'32\x20=\x20textu'+'reSampleLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20sampleU'+'V,\x200.0).r;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(\x20shadow'+'MapDepth\x20<'+'\x20z\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20b'+'lockerSum\x20')+('=\x20blockerS'+'um\x20+\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers_local'+'\x20=\x20numBloc'+'kers_local'+'\x20+\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20*avg'+'BlockerDep'+'th\x20=\x20block'+'erSum\x20/\x20f3'+'2(numBlock'+'ers_local)'+';\x0a\x20\x20\x20\x20*num'+'Blockers\x20='+'\x20numBlocke'+'rs_local;\x0a'+'}\x0a\x0afn\x20PCSS'+'Filter(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20uv:\x20vec2'+'f,\x20receive'+'rDepth:\x20f3'+'2,\x20shadowS'+'amples:\x20i3'+'2,\x20filterR'+'adius:\x20f32'+',\x20randomSe'+'ed:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20var\x20dis'+'kData:\x20Vog'+'elDiskData'+';\x0a\x20\x20\x20\x20prep'+'areDiskCon'+'stants(&di'+'skData,\x20sh'+'adowSample'+'s,\x20randomS'+'eed);\x0a\x0a\x20\x20\x20'+'\x20var\x20sum:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20for\x20('+'var\x20i:\x20i32'+'\x20=\x200;\x20i\x20<\x20'+'shadowSamp'+'les;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'offsetUV:\x20'+'vec2f\x20=\x20ge'+'nerateDisk'+'Sample(&di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dept'+'h:\x20f32\x20=\x20t'+'extureSamp'+'leLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv\x20'+'+\x20offsetUV'+',\x200.0).r;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20su'+'m\x20=\x20sum\x20+\x20'+'step(recei'+'verDepth,\x20'+'depth);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20sum\x20/'+'\x20f32(shado'+'wSamples);'+'\x0a}\x0a\x0afn\x20get'+'Penumbra(d'+'blocker:\x20f'+'32,\x20drecei'+'ver:\x20f32,\x20'+'penumbraSi'+'ze:\x20f32,\x20p'+'enumbraFal'+'loff:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20di'+'st:\x20f32\x20=\x20'+'dreceiver\x20'+'-\x20dblocker'+';\x0a\x20\x20\x20\x20let\x20'+'penumbra:\x20'+'f32\x20=\x201.0\x20'+'-\x20pow(1.0\x20'+'-\x20dist,\x20pe')+('numbraFall'+'off);\x0a\x20\x20\x20\x20'+'return\x20pen'+'umbra\x20*\x20pe'+'numbraSize'+';\x0a}\x0a\x0afn\x20PC'+'SSDirectio'+'nal(shadow'+'Map:\x20textu'+'re_2d<f32>'+',\x20shadowMa'+'pSampler:\x20'+'sampler,\x20s'+'hadowCoord'+'s:\x20vec3f,\x20'+'cameraPara'+'ms:\x20vec4f,'+'\x20softShado'+'wParams:\x20v'+'ec4f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'let\x20receiv'+'erDepth:\x20f'+'32\x20=\x20shado'+'wCoords.z;'+'\x0a\x20\x20\x20\x20let\x20r'+'andomSeed:'+'\x20f32\x20=\x20fra'+'ctSinRand('+'pcPosition'+'.xy);\x0a\x20\x20\x20\x20'+'let\x20shadow'+'Samples:\x20i'+'32\x20=\x20i32(s'+'oftShadowP'+'arams.x);\x0a'+'\x20\x20\x20\x20let\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32\x20=\x20i32('+'softShadow'+'Params.y);'+'\x0a\x20\x20\x20\x20let\x20p'+'enumbraSiz'+'e:\x20f32\x20=\x20s'+'oftShadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20let\x20pen'+'umbraFallo'+'ff:\x20f32\x20=\x20'+'softShadow'+'Params.w;\x0a'+'\x0a\x20\x20\x20\x20let\x20s'+'hadowMapSi'+'ze:\x20i32\x20=\x20'+'i32(textur'+'eDimension'+'s(shadowMa'+'p,\x200).x);\x0a'+'\x20\x20\x20\x20var\x20in'+'vShadowMap'+'Size:\x20f32\x20'+'=\x201.0\x20/\x20f3'+'2(shadowMa'+'pSize);\x0a\x20\x20'+'\x20\x20invShado'+'wMapSize\x20='+'\x20invShadow'+'MapSize\x20*\x20'+'(f32(shado'+'wMapSize)\x20'+'/\x202048.0);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'penumbra:\x20'+'f32;\x0a\x0a\x20\x20\x20\x20'+'//\x20contact'+'\x20hardening'+'\x20path\x0a\x20\x20\x20\x20'+'if\x20(shadow'+'BlockerSam'+'ples\x20>\x200)\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20find\x20a'+'verage\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20avgBloc'+'kerDepth:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20numBloc'+'kers:\x20i32\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20&a'+'vgBlockerD'+'epth,\x20&num')+('Blockers,\x20'+'shadowCoor'+'ds.xy,\x20rec'+'eiverDepth'+',\x20shadowBl'+'ockerSampl'+'es,\x20penumb'+'raSize,\x20in'+'vShadowMap'+'Size,\x20rand'+'omSeed);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20when\x20no\x20b'+'lockers\x20ar'+'e\x20present\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(numBlock'+'ers\x20<\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20pen'+'umbra\x20size'+'\x20is\x20based\x20'+'on\x20the\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20p'+'enumbra\x20=\x20'+'getPenumbr'+'a(avgBlock'+'erDepth,\x20s'+'hadowCoord'+'s.z,\x20penum'+'braSize,\x20p'+'enumbraFal'+'loff);\x0a\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20constan'+'t\x20filter\x20s'+'ize,\x20no\x20co'+'ntact\x20hard'+'ening\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20penumb'+'ra\x20=\x20penum'+'braSize;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20filter'+'Radius:\x20f3'+'2\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ords.xy,\x20r'+'eceiverDep'+'th,\x20shadow'+'Samples,\x20f'+'ilterRadiu'+'s,\x20randomS'+'eed);\x0a}\x0a\x0af'+'n\x20getShado'+'wPCSS(shad'+'owMap:\x20tex'+'ture_2d<f3'+'2>,\x20shadow'+'MapSampler'+':\x20sampler,'+'\x20shadowCoo'+'rd:\x20vec3f,'+'\x20shadowPar'+'ams:\x20vec4f'+',\x20cameraPa'+'rams:\x20vec4'+'f,\x20softSha'+'dowParams:'+'\x20vec4f,\x20li'+'ghtDir:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x20//\x20lig'+'htDir\x20unus'+'ed?\x20Kept\x20p'+'aram.\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SDirection'+'al(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ord,\x20camer'+'aParams,\x20s'+'oftShadowP')+'arams);\x0a}\x0a',xI='\x0aattribute'+'\x20vertex_bo'+'neIndices:'+'\x20f32;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20g'+'etBoneMatr'+'ix(indexFl'+'oat:\x20f32)\x20'+'->\x20mat4x4f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20width\x20=\x20'+'i32(textur'+'eDimension'+'s(texture_'+'poseMap).x'+');\x0a\x20\x20\x20\x20let'+'\x20index:\x20i3'+'2\x20=\x20i32(in'+'dexFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x20\x20\x20\x20let\x20i'+'y:\x20i32\x20=\x20i'+'ndex\x20/\x20wid'+'th;\x0a\x20\x20\x20\x20le'+'t\x20ix:\x20i32\x20'+'=\x20index\x20%\x20'+'width;\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'elements\x20o'+'f\x204x3\x20matr'+'ix\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec4f'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(ix'+'\x20+\x200,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20v2:\x20vec'+'4f\x20=\x20textu'+'reLoad(tex'+'ture_poseM'+'ap,\x20vec2i('+'ix\x20+\x201,\x20iy'+'),\x200);\x0a\x20\x20\x20'+'\x20let\x20v3:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(ix\x20+\x202,\x20'+'iy),\x200);\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4x4f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.x,\x20v2.x,'+'\x20v3.x,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.y,\x20v2.y,\x20'+'v3.y,\x200,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'z,\x20v2.z,\x20v'+'3.z,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.w'+',\x20v2.w,\x20v3'+'.w,\x201.0\x0a\x20\x20'+'\x20\x20);\x0a}\x0a',TI='\x0a\x0aattribut'+'e\x20vertex_b'+'oneWeights'+':\x20vec4f;\x0aa'+'ttribute\x20v'+'ertex_bone'+'Indices:\x20v'+'ec4f;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0astru'+'ct\x20BoneMat'+'rix\x20{\x0a\x20\x20\x20\x20'+'v1:\x20vec4f,'+'\x0a\x20\x20\x20\x20v2:\x20v'+'ec4f,\x0a\x20\x20\x20\x20'+'v3:\x20vec4f,'+'\x0a}\x0a\x0afn\x20get'+'BoneMatrix'+'(width:\x20i3'+'2,\x20index:\x20'+'i32)\x20->\x20Bo'+'neMatrix\x20{'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'v\x20=\x20index\x20'+'/\x20width;\x0a\x20'+'\x20\x20\x20let\x20u\x20='+'\x20index\x20%\x20w'+'idth;\x0a\x0a\x20\x20\x20'+'\x20var\x20resul'+'t:\x20BoneMat'+'rix;\x0a\x20\x20\x20\x20r'+'esult.v1\x20='+'\x20textureLo'+'ad(texture'+'_poseMap,\x20'+'vec2i(u\x20+\x20'+'0,\x20v),\x200);'+'\x0a\x20\x20\x20\x20resul'+'t.v2\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20result.v3'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(u\x20'+'+\x202,\x20v),\x200'+');\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0afn\x20ge'+'tSkinMatri'+'x(indicesF'+'loat:\x20vec4'+'f,\x20weights'+':\x20vec4f)\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20width\x20=\x20i'+'32(texture'+'Dimensions'+'(texture_p'+'oseMap).x)'+';\x0a\x20\x20\x20\x20var\x20'+'indices\x20=\x20'+'vec4i(indi'+'cesFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'boneA\x20=\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.x);'+'\x0a\x20\x20\x20\x20let\x20b'+'oneB\x20=\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y);\x0a'+'\x20\x20\x20\x20let\x20bo'+'neC\x20=\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.z);\x0a\x20'+'\x20\x20\x20let\x20bon'+'eD\x20=\x20getBo'+'neMatrix(w'+'idth,\x20indi'+'ces.w);\x0a\x0a\x20'+'\x20\x20\x20//\x20...\x20'+'rest\x20of\x20ge'+'tSkinMatri'+'x\x20remains\x20'+'the\x20same\x20.'+'..\x0a\x20\x20\x20\x20let'+'\x20v1\x20=\x20bone'+'A.v1\x20*\x20wei'+('ghts.x\x20+\x20b'+'oneB.v1\x20*\x20'+'weights.y\x20'+'+\x20boneC.v1'+'\x20*\x20weights'+'.z\x20+\x20boneD'+'.v1\x20*\x20weig'+'hts.w;\x0a\x20\x20\x20'+'\x20let\x20v2\x20=\x20'+'boneA.v2\x20*'+'\x20weights.x'+'\x20+\x20boneB.v'+'2\x20*\x20weight'+'s.y\x20+\x20bone'+'C.v2\x20*\x20wei'+'ghts.z\x20+\x20b'+'oneD.v2\x20*\x20'+'weights.w;'+'\x0a\x20\x20\x20\x20let\x20v'+'3\x20=\x20boneA.'+'v3\x20*\x20weigh'+'ts.x\x20+\x20bon'+'eB.v3\x20*\x20we'+'ights.y\x20+\x20'+'boneC.v3\x20*'+'\x20weights.z'+'\x20+\x20boneD.v'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'let\x20one\x20=\x20'+'dot(weight'+'s,\x20vec4f(1'+'.0,\x201.0,\x201'+'.0,\x201.0));'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'ranspose\x20t'+'o\x204x4\x20matr'+'ix\x0a\x20\x20\x20\x20ret'+'urn\x20mat4x4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20v1.x,\x20v2.'+'x,\x20v3.x,\x200'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'v1.y,\x20v2.y'+',\x20v3.y,\x200,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.z,\x20v2.z,'+'\x20v3.z,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.w,\x20v2.w,\x20'+'v3.w,\x20one\x0a'+'\x20\x20\x20\x20);\x0a}\x0a'),wI='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vLinear'+'Depth:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'floatAsUin'+'tPS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20Varyin'+'g\x20and\x20unif'+'orm\x20declar'+'ations\x0a\x20\x20\x20'+'\x20varying\x20v'+'ViewDir\x20:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20uniform\x20s'+'kyboxHighl'+'ightMultip'+'lier\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20SKY_CU'+'BEMAP\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cub'+'eMap\x20:\x20tex'+'ture_cube<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_cube'+'Map_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vWo'+'rldPos\x20:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20p'+'rojectedSk'+'ydomeCente'+'r\x20:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'env-atlas\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'phericalPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'envAtlasPS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_envAtlas_'+'sampler\x20:\x20'+'sampler;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20mipL'+'evel\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20@'+'fragment\x0a\x20'+'\x20\x20\x20fn\x20frag'+'mentMain(i'+'nput\x20:\x20Fra'+'gmentInput'+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20PREPA'+('SS_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20output'+'\x20linear\x20de'+'pth\x20during'+'\x20prepass\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20floa'+'t2vec4(vLi'+'nearDepth)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20linear'+'\x20:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20dir\x20'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KY_CUBEMAP'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+'\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+'nvDir\x20:\x20ve'+'c3f\x20=\x20norm'+'alize(inpu'+'t.vWorldPo'+'s\x20-\x20unifor'+'m.projecte'+'dSkydomeCe'+'nter);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'\x20=\x20envDir\x20'+'*\x20uniform.'+'cubeMapRot'+'ationMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir\x20='+'\x20input.vVi'+'ewDir;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'.x\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'tureSample'+'(texture_c'+'ubeMap,\x20te'+'xture_cube'+'Map_sample'+'r,\x20dir));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20env-atla'+'s\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ir\x20=\x20input'+'.vViewDir\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv\x20:\x20'+'vec2f\x20=\x20to'+'SphericalU'+'v(normaliz'+'e(dir));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20linea'+'r\x20=\x20{SKYBO'+'X_DECODE_F'+'NC}(textur'+'eSample(te'+'xture_envA'+'tlas,\x20text'+'ure_envAtl'+'as_sampler'+',\x20mapRough'+'nessUv(uv,')+('\x20uniform.m'+'ipLevel)))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ou'+'r\x20HDR\x20enco'+'des\x20values'+'\x20up\x20to\x2064,'+'\x20so\x20allow\x20'+'extra\x20brig'+'htness\x20for'+'\x20the\x20clipp'+'ed\x20values\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(any('+'linear\x20>=\x20'+'vec3f(64.0'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20uniform.'+'skyboxHigh'+'lightMulti'+'plier;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(gam'+'maCorrectO'+'utput(tone'+'Map(proces'+'sEnvironme'+'nt(linear)'+')),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),EI='\x0a\x20\x20\x20\x20//\x20At'+'tribute\x0a\x20\x20'+'\x20\x20attribut'+'e\x20aPositio'+'n\x20:\x20vec4f;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20matrix'+'_view\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20uniform\x20m'+'atrix_proj'+'ectionSkyb'+'ox\x20:\x20mat4x'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vViewDir'+'\x20:\x20vec3f;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PREPASS_'+'PASS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20when'+'\x20skydome\x20r'+'enders\x20dep'+'th\x20during\x20'+'prepass,\x20g'+'enerate\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vLi'+'nearDepth:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vWorldP'+'os\x20:\x20vec3f'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input\x20'+':\x20VertexIn'+'put)\x20->\x20Ve'+'rtexOutput'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut\x20:\x20Verte'+'xOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20view\x20:\x20ma'+'t4x4f\x20=\x20un'+'iform.matr'+'ix_view;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'worldPos\x20:'+'\x20vec4f\x20=\x20u'+'niform.mat'+'rix_model\x20'+'*\x20input.aP'+'osition;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vW'+'orldPos\x20=\x20'+'worldPos.x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'inear\x20dept'+'h\x20from\x20the'+'\x20worldPosi'+'tion,\x20see\x20'+'getLinearD'+'epth\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vL'+'inearDepth'+'\x20=\x20-(unifo'+('rm.matrix_'+'view\x20*\x20vec'+'4f(worldPo'+'s.xyz,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[0]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[1]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[2]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20uniform.m'+'atrix_proj'+'ectionSkyb'+'ox\x20*\x20(view'+'\x20*\x20input.a'+'Position);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'vViewDir\x20='+'\x20input.aPo'+'sition.xyz'+'\x20*\x20uniform'+'.cubeMapRo'+'tationMatr'+'ix;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20for\x20'+'infinite\x20s'+'kybox,\x20use'+'\x20negative\x20'+'gl_Positio'+'n.w\x20to\x20get'+'\x20positive\x20'+'linear\x20dep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-pcPositi'+'on.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Force\x20sk'+'ybox\x20to\x20fa'+'r\x20Z,\x20regar'+'dless\x20of\x20t'+'he\x20clip\x20pl'+'anes\x20on\x20th'+'e\x20camera\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Subtract\x20a'+'\x20tiny\x20fudg'+'e\x20factor\x20t'+'o\x20ensure\x20f'+'loating\x20po'+'int\x20errors'+'\x20don\x27t\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20st'+'ill\x20push\x20p'+'ixels\x20beyo'+'nd\x20far\x20Z.\x20'+'See:\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20http'+'s://commun'+'ity.khrono'+'s.org/t/sk'+'ybox-probl'+'em/61857\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.posit'+'ion.z\x20=\x20ou'+'tput.posit'+'ion.w\x20-\x201.'+'0e-7;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),bI='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_specular'+':\x20vec3f;\x0a#'+'endif\x0a\x0afn\x20'+'getSpecula'+'rity()\x20{\x0a\x20'+'\x20\x20\x20var\x20spe'+'cularColor'+'\x20=\x20vec3f(1'+'.0,\x201.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'CONSTANT\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20unifo'+'rm.materia'+'l_specular'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_TE'+'XTURE\x0a\x20\x20\x20\x20'+'specularCo'+'lor\x20=\x20spec'+'ularColor\x20'+'*\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SPECU'+'LAR_TEXTUR'+'E_NAME},\x20{'+'STD_SPECUL'+'AR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_S'+'PECULAR_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SPECULA'+'R_VERTEX\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20satur'+'ate3(vVert'+'exColor.{S'+'TD_SPECULA'+'R_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dSpe'+'cularity\x20='+'\x20specularC'+'olor;\x0a}\x0a',AI='\x0a\x0afn\x20toSph'+'erical(dir'+':\x20vec3f)\x20-'+'>\x20vec2f\x20{\x0a'+'\x20\x20\x20\x20let\x20an'+'gle_xz\x20=\x20s'+'elect(0.0,'+'\x20atan2(dir'+'.x,\x20dir.z)'+',\x20any(dir.'+'xz\x20!=\x20vec2'+'f(0.0)));\x0a'+'\x20\x20\x20\x20return'+'\x20vec2f(ang'+'le_xz,\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0afn\x20toS'+'phericalUv'+'(dir\x20:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20c'+'onst\x20PI\x20:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20uv\x20:\x20ve'+'c2f\x20=\x20toSp'+'herical(di'+'r)\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x20vec'+'2f(0.5,\x200.'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y);\x0a'+'}\x0a',CI='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'\x20\x20\x20\x20unifor'+'m\x20material'+'_speculari'+'tyFactor:\x20'+'f32;\x0a#endi'+'f\x0a\x0afn\x20getS'+'pecularity'+'Factor()\x20{'+'\x0a\x20\x20\x20\x20var\x20s'+'pecularity'+'Factor\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20speculari'+'tyFactor\x20='+'\x20speculari'+'tyFactor\x20*'+'\x20uniform.m'+'aterial_sp'+'ecularityF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'ARITYFACTO'+'R_TEXTURE\x0a'+'\x20\x20\x20\x20specul'+'arityFacto'+'r\x20=\x20specul'+'arityFacto'+'r\x20*\x20textur'+'eSampleBia'+'s({STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_NAME},\x20'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_VE'+'RTEX\x0a\x20\x20\x20\x20s'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_SPEC'+'ULARITYFAC'+'TOR_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dS'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor;\x0a}\x0a',PI='\x0afn\x20getSpo'+'tEffect(li'+'ghtSpotDir'+':\x20vec3f,\x20l'+'ightInnerC'+'oneAngle:\x20'+'f32,\x20light'+'OuterConeA'+'ngle:\x20f32,'+'\x20lightDirN'+'orm:\x20vec3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'osAngle:\x20f'+'32\x20=\x20dot(l'+'ightDirNor'+'m,\x20lightSp'+'otDir);\x0a\x20\x20'+'\x20\x20return\x20s'+'moothstep('+'lightOuter'+'ConeAngle,'+'\x20lightInne'+'rConeAngle'+',\x20cosAngle'+');\x0a}',MI='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2f(vUv0'+'.x,\x201.0\x20-\x20'+'vUv0.y);\x0a',DI='\x0a\x20\x20\x20\x20let\x20t'+'ileMask:\x20v'+'ec2f\x20=\x20ste'+'p(vMask,\x20v'+'ec2f(0.999'+'99));\x0a\x20\x20\x20\x20'+'let\x20tileSi'+'ze:\x20vec2f\x20'+'=\x200.5\x20*\x20(i'+'nnerOffset'+'.xy\x20+\x20inne'+'rOffset.zw'+');\x0a\x20\x20\x20\x20let'+'\x20tileScale'+':\x20vec2f\x20=\x20'+'vec2f(1.0)'+'\x20/\x20(vec2f('+'1.0)\x20-\x20til'+'eSize);\x0a\x20\x20'+'\x20\x20var\x20clam'+'pedUv:\x20vec'+'2f\x20=\x20mix(i'+'nnerOffset'+'.xy\x20*\x200.5,'+'\x20vec2f(1.0'+')\x20-\x20innerO'+'ffset.zw\x20*'+'\x200.5,\x20frac'+'t((vTiledU'+'v\x20-\x20tileSi'+'ze)\x20*\x20tile'+'Scale));\x0a\x20'+'\x20\x20\x20clamped'+'Uv\x20=\x20clamp'+'edUv\x20*\x20atl'+'asRect.zw\x20'+'+\x20atlasRec'+'t.xy;\x0a\x20\x20\x20\x20'+'var\x20nineSl'+'icedUv:\x20ve'+'c2f\x20=\x20vUv0'+'\x20*\x20tileMas'+'k\x20+\x20clampe'+'dUv\x20*\x20(vec'+'2f(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x0a',II='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dAlpha'+':\x20f32\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20//'+'\x20all\x20passe'+'s\x20handle\x20o'+'pacity\x0a\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'!=\x20NONE\x20||'+'\x20defined(L'+'IT_ALPHA_T'+'EST)\x20||\x20de'+'fined(LIT_'+'ALPHA_TO_C'+'OVERAGE)\x20|'+'|\x20STD_OPAC'+'ITY_DITHER'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_OP'+'ACITY_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_opa'+'cityMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_opacityMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20globals'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dAlbedo:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'NormalW:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dSp'+'ecularity:'+'\x20vec3f\x20=\x20v'+'ec3f(0.0,\x20'+'0.0,\x200.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dGlossin'+'ess:\x20f32\x20='+'\x200.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_REFR'+'ACTION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dTransmi'+'ssion:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dTh'+'ickness:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'CENE_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SCREE'+'N_SIZE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20uSc'+'reenSize:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+('f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_TRANSFOR'+'MS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20ma'+'trix_viewP'+'rojection:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20matri'+'x_model:\x20m'+'at4x4f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20paral'+'lax\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_HEIGHT_'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'UvOffset:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'DIFFUSE_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_heightM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'heightMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20diffus'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'diffuseMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_diffus'+'eMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSEDETAI'+'L_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20norma'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_NORMAL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_normalMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20#ifdef'+'\x20STD_NORMA'+'LDETAIL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalDetai'+'lMap\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_no'+'rmalDetail'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_T'+'HICKNESS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'thicknessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_thic'+'knessMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_REFRACTIO'+'N_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_refract'+'ionMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'refraction'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20i'+'ridescence'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dIr'+'idescence:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20dIridesce'+'nceThickne'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'iridescenc'+'eThickness'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_iridescen'+'ceThicknes'+'sMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur')+('e_iridesce'+'nceMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_irides'+'cenceMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20ccSp'+'ecularity:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20ccGlossin'+'ess:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20ccNor'+'malW:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dAni'+'sotropy:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'Anisotropy'+'Rotation:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'arity\x20&\x20gl'+'ossiness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20she'+'en\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SHEE'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sSpecular'+'ity:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sGlossine'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'HEENGLOSS_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_s'+'heenGlossM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_sheenG'+'lossMapSam'+'pler\x20:\x20sam'+'pler;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_MET'+'ALNESS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dMet'+'alness:\x20f3'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dIor:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'metalnessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_metaln'+'essMapSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'rity\x20facto'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var<privat'+'e>\x20dSpecul'+'arityFacto'+'r:\x20f32;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rityFactor'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_specu'+'larityFact'+'orMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_SPECULAR'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_')+('specularMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20gloss\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_glossMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_glo'+'ssMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dAo:\x20f32;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_aoMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_AODETAIL_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoDet'+'ailMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_aoDeta'+'ilMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dEmission'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_EM'+'ISSIVE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_em'+'issiveMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_emissiv'+'eMapSample'+'r\x20:\x20sample')+('r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clearcoat\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatG'+'lossMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_clear'+'CoatGlossM'+'apSampler\x20'+':\x20sampler;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_clearC'+'oatNormalM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatN'+'ormalMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20anisotr'+'opy\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_A'+'NISOTROPY_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aniso'+'tropyMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_anis'+'otropyMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20lightm'+'ap\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(STD_LIG'+'HTMAP)\x20||\x20')+('defined(ST'+'D_LIGHT_VE'+'RTEX_COLOR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dLi'+'ghtmap:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_LI'+'GHT_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_l'+'ightMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_light'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20front'+'\x20end\x20outpu'+'ts\x20to\x20lit\x20'+'shader\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22litShader'+'CorePS\x22\x0a'),LI='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fn\x20'+'getSpecula'+'rity()\x20{\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dSpeculari'+'ty\x20=\x20vec3f'+'(1.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'gloss\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22gl'+'ossPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22aoPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20emissi'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22emissiveP'+'S\x22\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clear'+'coat\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20')+('LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22clea'+'rCoatPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'GlossPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'NormalPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ani'+'sotropy\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x20&&\x20defin'+'ed(LIT_LIG'+'HTING)\x20&&\x20'+'defined(LI'+'T_GGX_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22an'+'isotropyPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(ST'+'D_LIGHTMAP'+')\x20||\x20defin'+'ed(STD_LIG'+'HT_VERTEX_'+'COLOR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22l'+'ightmapPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20fn\x20evalu'+'ateFronten'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20al'+'l\x20passes\x20h'+'andle\x20opac'+'ity\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIT_'+'BLEND_TYPE'+'\x20!=\x20NONE\x20|'+'|\x20defined('+'LIT_ALPHA_'+'TEST)\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x20'+'||\x20STD_OPA'+'CITY_DITHE'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getOpaci'+'ty();\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_ALPHA'+'_TEST)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20alphaTe'+'st(dAlpha)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20opacityDi'+'ther(dAlph'+'a,\x200.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20d'+'Alpha;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20par')+('allax\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getP'+'arallax();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getA'+'lbedo();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_a'+'lbedo\x20=\x20dA'+'lbedo;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20normal\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getNorma'+'l();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_w'+'orldNormal'+'\x20=\x20dNormal'+'W;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'fraction\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etRefracti'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'transmissi'+'on\x20=\x20dTran'+'smission;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Thickness('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness\x20=\x20d'+'Thickness;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_D'+'ISPERSION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_di'+'spersion\x20='+'\x20uniform.m'+'aterial_di'+'spersion;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_IRIDESC'+'ENCE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getIrides'+'cence();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getIr'+'idescenceT'+'hickness()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x20=\x20'+'dIridescen'+'ce;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ir'+'idescence_'+'thickness\x20'+'=\x20dIridesc'+'enceThickn'+'ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specularit'+'y\x20&\x20glossi'+'ness\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20sheen\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSheen()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'sheen_spec'+'ularity\x20=\x20'+'sSpeculari'+'ty;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getShe'+'enGlossine'+'ss();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_sheen_'+'gloss\x20=\x20sG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getMetaln'+'ess();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_metal'+'ness\x20=\x20dMe'+'talness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etIor();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+'\x20=\x20dIor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'ity\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULARITY_'+'FACTOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'yFactor();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'Factor\x20=\x20d'+'Specularit'+'yFactor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20gloss\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'y();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20dSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs')+('_gloss\x20=\x20d'+'Glossiness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ao\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getAO();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_ao\x20=\x20'+'dAo;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getEmissi'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_emis'+'sion\x20=\x20dEm'+'ission;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getClea'+'rCoat();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getCl'+'earCoatGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'ClearCoatN'+'ormal();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_specula'+'rity\x20=\x20ccS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_glos'+'s\x20=\x20ccGlos'+'siness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal\x20=\x20ccNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20anisotro'+'py\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getAnisot'+'ropy();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20lightma'+'p\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightM'+'ap();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmap\x20='+'\x20dLightmap'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_')+('LIGHTMAP_D'+'IR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmapD'+'ir\x20=\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a'),RI='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20tbnB'+'asis:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getTBN(t'+'angent:\x20ve'+'c3f,\x20binor'+'mal:\x20vec3f'+',\x20normal:\x20'+'vec3f)\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20TBN_TANGE'+'NTS\x20//\x20tan'+'gents\x20/\x20bi'+'normals\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dTB'+'N\x20=\x20mat3x3'+'f(normaliz'+'e(tangent)'+',\x20normaliz'+'e(binormal'+'),\x20normali'+'ze(normal)'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20define'+'d(TBN_DERI'+'VATIVES)\x20/'+'/\x20derivati'+'ves\x20based\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2f\x20=\x20{'+'lightingUv'+'};\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20get\x20e'+'dge\x20vector'+'s\x20of\x20the\x20p'+'ixel\x20trian'+'gle\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dp1:'+'\x20vec3f\x20=\x20d'+'pdx(\x20vPosi'+'tionW\x20);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dp2:\x20vec3'+'f\x20=\x20dpdy(\x20'+'vPositionW'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20duv1'+':\x20vec2f\x20=\x20'+'dpdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20duv2:\x20'+'vec2f\x20=\x20dp'+'dy(\x20uv\x20);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20solve\x20th'+'e\x20linear\x20s'+'ystem\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20dp'+'2perp:\x20vec'+'3f\x20=\x20cross'+'(\x20dp2,\x20nor'+'mal\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20d'+'p1perp:\x20ve'+'c3f\x20=\x20cros'+'s(\x20normal,'+'\x20dp1\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'T:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.x\x20+\x20'+'dp1perp\x20*\x20'+'duv2.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'B:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+('dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+'ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20deno'+'m:\x20f32\x20=\x20m'+'ax(\x20dot(T,'+'\x20T),\x20dot(B'+',\x20B)\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'invmax:\x20f3'+'2\x20=\x20select'+'(uniform.t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20),\x200.0,\x20'+'denom\x20==\x200'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3x3f(T\x20'+'*\x20invmax,\x20'+'-B\x20*\x20invma'+'x,\x20normal\x20'+');\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20obj'+'ect\x20space\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20B:\x20'+'vec3f\x20=\x20cr'+'oss(normal'+',\x20vObjectS'+'paceUpW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20T:\x20vec3f'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dot(B,'+'B)\x20==\x200.0)'+'\x20//\x20deal\x20w'+'ith\x20case\x20w'+'hen\x20vObjec'+'tSpaceUpW\x20'+'normal\x20are'+'\x20parallel\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20majo'+'r:\x20f32\x20=\x20m'+'ax(max(nor'+'mal.x,\x20nor'+'mal.y),\x20no'+'rmal.z);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(norm'+'al.x\x20==\x20ma'+'jor)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20B\x20=\x20c'+'ross(norma'+'l,\x20vec3f(0'+'.0,\x201.0,\x200'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20T\x20=\x20cros'+'s(normal,\x20'+'B);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x20if\x20(n'+'ormal.y\x20=='+'\x20major)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20B\x20'+'=\x20cross(no'+'rmal,\x20vec3'+'f(0.0,\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20//'+'\x20removed\x20\x22'+'if\x20(normal'+'.z\x20==\x20majo'+'r)\x22\x20assumi'+'ng\x20it\x27s\x20th'+'e\x20only\x20rem'+'aining\x20cas'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20B\x20=\x20cros'+'s(normal,\x20'+'vec3f(1.0,'+'\x200.0,\x200.0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3x3f(n'+'ormalize(T'+'),\x20normali'+'ze(B),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a}'),OI='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_th'+'ickness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getTh'+'ickness()\x20'+'{\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'THICKNESS_'+'CONSTANT\x0a\x20'+'\x20\x20\x20dThickn'+'ess\x20=\x20dThi'+'ckness\x20*\x20u'+'niform.mat'+'erial_thic'+'kness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_THICKN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x20d'+'Thickness\x20'+'*\x20textureS'+'ampleBias('+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_THICKNESS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_THIC'+'KNESS_VERT'+'EX\x0a\x20\x20\x20\x20dTh'+'ickness\x20=\x20'+'dThickness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',FI='\x0a#if\x20(TONE'+'MAP\x20==\x20NON'+'E)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingNo'+'nePS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20FILMIC\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingFilmi'+'cPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22tonemap'+'pingLinear'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20HEJL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gHejlPS\x22\x0a#'+'elif\x20TONEM'+'AP\x20==\x20ACES'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingAces'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20ACES2\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngAces2PS\x22'+'\x0a#elif\x20TON'+'EMAP\x20==\x20NE'+'UTRAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gNeutralPS'+'\x22\x0a#endif\x0a',NI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20t'+'A:\x20f32\x20=\x202'+'.51;\x0a\x20\x20\x20\x20l'+'et\x20tB:\x20f32'+'\x20=\x200.03;\x0a\x20'+'\x20\x20\x20let\x20tC:'+'\x20f32\x20=\x202.4'+'3;\x0a\x20\x20\x20\x20let'+'\x20tD:\x20f32\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20let\x20tE:\x20f'+'32\x20=\x200.14;'+'\x0a\x20\x20\x20\x20let\x20x'+':\x20vec3f\x20=\x20'+'color\x20*\x20un'+'iform.expo'+'sure;\x0a\x20\x20\x20\x20'+'return\x20(x\x20'+'*\x20(tA\x20*\x20x\x20'+'+\x20tB))\x20/\x20('+'x\x20*\x20(tC\x20*\x20'+'x\x20+\x20tD)\x20+\x20'+'tE);\x0a}\x0a',kI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0a//\x20AC'+'ES\x20approxi'+'mation\x20by\x20'+'Stephen\x20Hi'+'ll\x0a\x0a//\x20sRG'+'B\x20=>\x20XYZ\x20='+'>\x20D65_2_D6'+'0\x20=>\x20AP1\x20='+'>\x20RRT_SAT\x0a'+'const\x20ACES'+'InputMat:\x20'+'mat3x3f\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20vec3f(0'+'.59719,\x200.'+'35458,\x200.0'+'4823),\x0a\x20\x20\x20'+'\x20vec3f(0.0'+'7600,\x200.90'+'834,\x200.015'+'66),\x0a\x20\x20\x20\x20v'+'ec3f(0.028'+'40,\x200.1338'+'3,\x200.83777'+')\x0a);\x0a\x0a//\x20O'+'DT_SAT\x20=>\x20'+'XYZ\x20=>\x20D60'+'_2_D65\x20=>\x20'+'sRGB\x0aconst'+'\x20ACESOutpu'+'tMat:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20v'+'ec3f(\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367),\x0a\x20\x20\x20\x20'+'vec3f(-0.1'+'0208,\x20\x201.1'+'0813,\x20-0.0'+'0605),\x0a\x20\x20\x20'+'\x20vec3f(-0.'+'00327,\x20-0.'+'07276,\x20\x201.'+'07602)\x0a);\x0a'+'\x0afn\x20RRTAnd'+'ODTFit(v:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20a:\x20v'+'ec3f\x20=\x20v\x20*'+'\x20(v\x20+\x20vec3'+'f(0.024578'+'6))\x20-\x20vec3'+'f(0.000090'+'537);\x0a\x20\x20\x20\x20'+'let\x20b:\x20vec'+'3f\x20=\x20v\x20*\x20('+'vec3f(0.98'+'3729)\x20*\x20v\x20'+'+\x20vec3f(0.'+'4329510))\x20'+'+\x20vec3f(0.'+'238081);\x0a\x20'+'\x20\x20\x20return\x20'+'a\x20/\x20b;\x0a}\x0a\x0a'+'fn\x20toneMap'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'var\x20c:\x20vec'+'3f\x20=\x20color'+'\x20*\x20(unifor'+'m.exposure'+'\x20/\x200.6);\x0a\x20'+'\x20\x20\x20c\x20=\x20c\x20*'+'\x20ACESInput'+'Mat;\x0a\x0a\x20\x20\x20\x20'+'//\x20Apply\x20R'+'RT\x20and\x20ODT'+'\x0a\x20\x20\x20\x20c\x20=\x20R'+'RTAndODTFi'+'t(c);\x0a\x20\x20\x20\x20'+'c\x20=\x20c\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(c,\x20vec'+'3f(0.0),\x20v'+'ec3f(1.0))'+';\x0a}\x0a',UI='\x0aconst\x20A:\x20'+'f32\x20=\x200.15'+';\x0aconst\x20B:'+'\x20f32\x20=\x200.5'+'0;\x0aconst\x20C'+':\x20f32\x20=\x200.'+'10;\x0aconst\x20'+'D:\x20f32\x20=\x200'+'.20;\x0aconst'+'\x20E:\x20f32\x20=\x20'+'0.02;\x0acons'+'t\x20F:\x20f32\x20='+'\x200.30;\x0acon'+'st\x20W:\x20f32\x20'+'=\x2011.2;\x0a\x0au'+'niform\x20exp'+'osure:\x20f32'+';\x0a\x0afn\x20unch'+'arted2Tone'+'map(x:\x20vec'+'3f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20((x\x20'+'*\x20(A\x20*\x20x\x20+'+'\x20C\x20*\x20B)\x20+\x20'+'D\x20*\x20E)\x20/\x20('+'x\x20*\x20(A\x20*\x20x'+'\x20+\x20B)\x20+\x20D\x20'+'*\x20F))\x20-\x20ve'+'c3f(E\x20/\x20F)'+';\x0a}\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20c'+':\x20vec3f\x20=\x20'+'uncharted2'+'Tonemap(co'+'lor\x20*\x20unif'+'orm.exposu'+'re);\x0a\x20\x20\x20\x20l'+'et\x20whiteSc'+'ale:\x20vec3f'+'\x20=\x20vec3f(1'+'.0)\x20/\x20unch'+'arted2Tone'+'map(vec3f('+'W,\x20W,\x20W));'+'\x0a\x20\x20\x20\x20c\x20*=\x20'+'whiteScale'+';\x0a\x20\x20\x20\x20retu'+'rn\x20c;\x0a}\x0a',BI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20A'+':\x20f32\x20=\x200.'+'22;\x0a\x20\x20\x20\x20le'+'t\x20B:\x20f32\x20='+'\x200.3;\x0a\x20\x20\x20\x20'+'let\x20C:\x20f32'+'\x20=\x200.1;\x0a\x20\x20'+'\x20\x20let\x20D:\x20f'+'32\x20=\x200.2;\x0a'+'\x20\x20\x20\x20let\x20E:'+'\x20f32\x20=\x200.0'+'1;\x0a\x20\x20\x20\x20let'+'\x20F:\x20f32\x20=\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20Scl:\x20f3'+'2\x20=\x201.25;\x0a'+'\x0a\x20\x20\x20\x20let\x20a'+'djusted_co'+'lor\x20=\x20colo'+'r\x20*\x20unifor'+'m.exposure'+';\x0a\x20\x20\x20\x20let\x20'+'h\x20=\x20max(ve'+'c3f(0.0),\x20'+'adjusted_c'+'olor\x20-\x20vec'+'3f(0.004))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20(h\x20*\x20('+'(Scl\x20*\x20A)\x20'+'*\x20h\x20+\x20Scl\x20'+'*\x20vec3f(C\x20'+'*\x20B))\x20+\x20Sc'+'l\x20*\x20vec3f('+'D\x20*\x20E))\x20/\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(h\x20*\x20(A\x20*'+'\x20h\x20+\x20vec3f'+'(B))\x20+\x20vec'+'3f(D\x20*\x20F))'+'\x20-\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20Scl\x20*\x20'+'vec3f(E\x20/\x20'+'F);\x0a}\x0a',zI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20color\x20*\x20'+'uniform.ex'+'posure;\x0a}\x0a',VI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(col:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20var\x20col'+'or\x20=\x20col\x20*'+'\x20uniform.e'+'xposure;\x0a\x0a'+'\x20\x20\x20\x20let\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20let\x20des'+'aturation\x20'+'=\x200.15;\x0a\x0a\x20'+'\x20\x20\x20let\x20x\x20='+'\x20min(color'+'.r,\x20min(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20let\x20offs'+'et\x20=\x20selec'+'t(0.04,\x20x\x20'+'-\x206.25\x20*\x20x'+'\x20*\x20x,\x20x\x20<\x20'+'0.08);\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'vec3f(offs'+'et);\x0a\x0a\x20\x20\x20\x20'+'let\x20peak\x20='+'\x20max(color'+'.r,\x20max(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20if\x20(peak'+'\x20<\x20startCo'+'mpression)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'d\x20=\x201.0\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20let\x20newP'+'eak\x20=\x201.0\x20'+'-\x20d\x20*\x20d\x20/\x20'+'(peak\x20+\x20d\x20'+'-\x20startCom'+'pression);'+'\x0a\x20\x20\x20\x20color'+'\x20*=\x20newPea'+'k\x20/\x20peak;\x0a'+'\x0a\x20\x20\x20\x20let\x20g'+'\x20=\x201.0\x20-\x201'+'.0\x20/\x20(desa'+'turation\x20*'+'\x20(peak\x20-\x20n'+'ewPeak)\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ve'+'c3f(newPea'+'k),\x20vec3f('+'g));\x0a}\x0a',GI='\x0afn\x20toneMa'+'p(color:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a}\x0a',HI='\x0a#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20SCREE'+'NSPACE\x0a\x20\x20\x20'+'\x20uniform\x20p'+'rojectionF'+'lipY:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20evalWorl'+'dPosition('+'vertexPosi'+'tion:\x20vec3'+'f,\x20modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ve'+'c4f\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20local'+'Pos:\x20vec3f'+'\x20=\x20getLoca'+'lPosition('+'vertexPosi'+'tion);\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20outer\x20and'+'\x20inner\x20ver'+'tices\x20are\x20'+'at\x20the\x20sam'+'e\x20position'+',\x20scale\x20bo'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20local'+'PosXZ:\x20vec'+'2f\x20=\x20local'+'Pos.xz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20loca'+'lPosXZ\x20=\x20l'+'ocalPosXZ\x20'+'*\x20uniform.'+'outerScale'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20offset'+'\x20inner\x20ver'+'tices\x20insi'+'de\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20(origi'+'nal\x20vertic'+'es\x20must\x20be'+'\x20in\x20[-1;1]'+'\x20range)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'positiveUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(vertex'+'Position.x'+'z,\x20vec2f(0'+'.0),\x20vec2f'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(-verte'+'xPosition.'+'xz,\x20vec2f('+'0.0),\x20vec2'+'f(1.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20loc'+'alPosXZ\x20=\x20'+'localPosXZ'+'\x20+\x20(-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy\x20+'+'\x20negativeU'+'nitOffset\x20'+'*\x20uniform.'+'innerOffse'+'t.zw)\x20*\x20ve'+'rtex_texCo'+'ord0.xy;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'iledUvGlob'+'al\x20=\x20(loca'+'lPosXZ\x20-\x20u'+'niform.out'+'erScale\x20+\x20'+'uniform.in'+'nerOffset.'+'xy)\x20*\x20-0.5'+'\x20+\x201.0;\x20//'+'\x20uv\x20=\x20loca'+'l\x20pos\x20-\x20in'+('ner\x20corner'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPosXZ'+'\x20=\x20localPo'+'sXZ\x20*\x20-0.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20='+'\x20vec3f(loc'+'alPosXZ.x,'+'\x20localPosX'+'Z.y,\x20local'+'Pos.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20var\x20po'+'sW:\x20vec4f\x20'+'=\x20modelMat'+'rix\x20*\x20vec4'+'f(localPos'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREENSPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'posW\x20=\x20vec'+'4f(posW.xy'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20posW'+';\x0a}\x0a\x0afn\x20ge'+'tPosition('+')\x20->\x20vec4f'+'\x20{\x0a\x0a\x20\x20\x20\x20dM'+'odelMatrix'+'\x20=\x20getMode'+'lMatrix();'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'posW:\x20vec4'+'f\x20=\x20evalWo'+'rldPositio'+'n(vertex_p'+'osition.xy'+'z,\x20dModelM'+'atrix);\x0a\x20\x20'+'\x20\x20dPositio'+'nW\x20=\x20posW.'+'xyz;\x0a\x0a\x20\x20\x20\x20'+'var\x20screen'+'Pos:\x20vec4f'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20UV1LAYO'+'UT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20vec4f(v'+'ertex_texC'+'oord1.xy\x20*'+'\x202.0\x20-\x201.0'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20SCR'+'EENSPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20posW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20unif'+'orm.projec'+'tionFlipY;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos\x20=\x20u'+'niform.mat'+'rix_viewPr'+'ojection\x20*'+'\x20posW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20snap\x20ve'+'rtex\x20to\x20a\x20'+'pixel\x20boun'+'dary\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x200.'+'5)\x20+\x200.5;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20screenPo'+'s.xy\x20*=\x20un'+'iforms.uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'niforms.uS'+'creenSize.'+'zw;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x202.0'+')\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20scr'+'eenPos;\x0a}\x0a'+'\x0afn\x20getWor'+'ldPosition'+'()\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20dPosi'+'tionW;\x0a}\x0a'),WI='\x0a\x0a\x20\x20\x20\x20attr'+'ibute\x20vert'+'ex_positio'+'n:\x20vec4f;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'rix_model:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20morph_te'+'x_params:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20attri'+'bute\x20morph'+'_vertex_id'+':\x20u32;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etTextureM'+'orphCoords'+'()\x20->\x20vec2'+'i\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'turn\x20morph'+'_vertex_id'+'\x20into\x20int\x20'+'grid\x20coord'+'inates\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'Size:\x20vec2'+'i\x20=\x20vec2i('+'uniform.mo'+'rph_tex_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphGr'+'idV:\x20i32\x20='+'\x20i32(morph'+'_vertex_id'+')\x20/\x20textur'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20morph'+'GridU:\x20i32'+'\x20=\x20i32(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'rphGridV\x20='+'\x20textureSi'+'ze.y\x20-\x20mor'+'phGridV\x20-\x20'+'1;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec2i(mo'+'rphGridU,\x20'+'morphGridV'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_PO'+'SITION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20aabbSiz'+'e:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20aabbMi'+'n:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'morphPosit'+'ionTex:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'sitionTex:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+('if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sk'+'inBatchVS\x22'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fn\x20getMode'+'lMatrix()\x20'+'->\x20mat4x4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getBoneM'+'atrix(vert'+'ex_boneInd'+'ices);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(SKIN'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etModelMat'+'rix()\x20->\x20m'+'at4x4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20un'+'iform.matr'+'ix_model\x20*'+'\x20getSkinMa'+'trix(verte'+'x_boneIndi'+'ces,\x20verte'+'x_boneWeig'+'hts);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(INSTA'+'NCING)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22tran'+'sformInsta'+'ncingVS\x22\x0a\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'n\x20getModel'+'Matrix()\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_mode'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'fn\x20getLoca'+'lPosition('+'vertexPosi'+'tion:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20loc'+'alPos:\x20vec'+'3f\x20=\x20verte'+'xPosition;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphUV:'+'\x20vec2i\x20=\x20g'+'etTextureM'+'orphCoords'+'();\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MORPHI'+'NG_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Use\x20'+'textureLoa'+'d\x20instead\x20'+'of\x20texelFe'+'tch.\x20Coord'+'inates\x20mus'+'t\x20be\x20integ'+'er\x20type\x20(v'+'ec2i).\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20WGSL'+'\x20requires\x20'+'explicit\x20t'+'ype\x20conver'+'sion\x20for\x20v'+'ectors.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Div'+'ision\x20by\x20f'+'loat\x20liter')+('al\x20ensures'+'\x20floating\x20'+'point\x20divi'+'sion.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hPos:\x20vec3'+'f\x20=\x20vec3f('+'textureLoa'+'d(morphPos'+'itionTex,\x20'+'morphUV,\x200'+').xyz)\x20/\x206'+'5535.0\x20*\x20u'+'niform.aab'+'bSize\x20+\x20un'+'iform.aabb'+'Min;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Use\x20text'+'ureLoad\x20in'+'stead\x20of\x20t'+'exelFetch.'+'\x20Coordinat'+'es\x20must\x20be'+'\x20integer\x20t'+'ype\x20(vec2i'+').\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'s:\x20vec3f\x20='+'\x20textureLo'+'ad(morphPo'+'sitionTex,'+'\x20morphUV,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20+'+'=\x20morphPos'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20localP'+'os;\x0a\x20\x20\x20\x20}\x0a'),$I='\x0a\x0aattribut'+'e\x20instance'+'_line1:\x20ve'+'c4f;\x0aattri'+'bute\x20insta'+'nce_line2:'+'\x20vec4f;\x0aat'+'tribute\x20in'+'stance_lin'+'e3:\x20vec4f;'+'\x0aattribute'+'\x20instance_'+'line4:\x20vec'+'4f;\x0a\x0afn\x20ge'+'tModelMatr'+'ix()\x20->\x20ma'+'t4x4f\x20{\x0a\x20\x20'+'\x20\x20return\x20u'+'niform.mat'+'rix_model\x20'+'*\x20mat4x4f('+'instance_l'+'ine1,\x20inst'+'ance_line2'+',\x20instance'+'_line3,\x20in'+'stance_lin'+'e4);\x0a}\x0a',XI='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_refrac'+'tion:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getRefra'+'ction()\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction:\x20'+'f32\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20refractio'+'n\x20=\x20unifor'+'m.material'+'_refractio'+'n;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'REFRACTION'+'_TEXTURE\x0a\x20'+'\x20\x20\x20refract'+'ion\x20=\x20refr'+'action\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_REFRACTI'+'ON_TEXTURE'+'_NAME},\x20{S'+'TD_REFRACT'+'ION_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_REFRACTIO'+'N_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_REFRACTIO'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_VE'+'RTEX\x0a\x20\x20\x20\x20r'+'efraction\x20'+'=\x20refracti'+'on\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_REFRACTI'+'ON_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dTr'+'ansmission'+'\x20=\x20refract'+'ion;\x0a}\x0a',qI='\x0auniform\x20t'+'woSidedLig'+'htingNegSc'+'aleFactor:'+'\x20f32;\x0a\x0afn\x20'+'handleTwoS'+'idedLighti'+'ng()\x20{\x0a\x20\x20\x20'+'\x20dTBN[2]\x20='+'\x20dTBN[2]\x20*'+'\x20select(-u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20p'+'cFrontFaci'+'ng);\x0a}\x0a',jI='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20fn\x20getU'+'v0()\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20uv'+'\x20=\x20vertex_'+'position.x'+'z;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20offse'+'t\x20inner\x20ve'+'rtices\x20ins'+'ide\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2f(0'+'.0,\x200.0),\x20'+'vec2f(1.0,'+'\x201.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset\x20='+'\x20clamp(-ve'+'rtex_posit'+'ion.xz,\x20ve'+'c2f(0.0,\x200'+'.0),\x20vec2f'+'(1.0,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uv\x20=\x20uv\x20'+'+\x20((-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy)\x20'+'+\x20(negativ'+'eUnitOffse'+'t\x20*\x20unifor'+'m.innerOff'+'set.zw))\x20*'+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uv\x20=\x20uv\x20*'+'\x20-0.5\x20+\x20ve'+'c2f(0.5,\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20uniform'+'.atlasRect'+'.zw\x20+\x20unif'+'orm.atlasR'+'ect.xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dMa'+'skGlobal\x20='+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20uv'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20fn'+'\x20getUv0()\x20'+'->\x20vec2f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a',YI='\x0afn\x20getUv1'+'()\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20verte'+'x_texCoord'+'1;\x0a}\x0a',KI='\x0aoutput.vU'+'V{TRANSFOR'+'M_UV_{i}}_'+'{TRANSFORM'+'_ID_{i}}\x20='+'\x20vec2f(\x0a\x20\x20'+'\x20\x20dot(vec3'+'f(uv{TRANS'+'FORM_UV_{i'+'}},\x201),\x20un'+'iform.{TRA'+'NSFORM_NAM'+'E_{i}}0),\x0a'+'\x20\x20\x20\x20dot(ve'+'c3f(uv{TRA'+'NSFORM_UV_'+'{i}},\x201),\x20'+'uniform.{T'+'RANSFORM_N'+'AME_{i}}1)'+'\x0a);\x0a',ZI='\x0a\x20\x20\x20\x20unifo'+'rm\x20{TRANSF'+'ORM_NAME_{'+'i}}0:\x20vec3'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20{TRAN'+'SFORM_NAME'+'_{i}}1:\x20ve'+'c3f;\x0a',QI='\x0afn\x20getVie'+'wDir()\x20{\x0a\x20'+'\x20\x20\x20dViewDi'+'rW\x20=\x20norma'+'lize(unifo'+'rm.view_po'+'sition\x20-\x20v'+'PositionW)'+';\x0a}\x0a',JI={'alphaTestPS':Q2,'ambientPS':J2,'anisotropyPS':eM,'aoPS':tM,'aoDiffuseOccPS':sM,'aoSpecOccPS':iM,'bakeDirLmEndPS':rM,'bakeLmEndPS':aM,'basePS':nM,'baseNineSlicedPS':oM,'baseNineSlicedTiledPS':lM,'bayerPS':cM,'blurVSMPS':hM,'clearCoatPS':dM,'clearCoatGlossPS':fM,'clearCoatNormalPS':uM,'clusteredLightCookiesPS':mM,'clusteredLightShadowsPS':_M,'clusteredLightUtilsPS':pM,'clusteredLightPS':gM,'combinePS':SM,'cookieBlit2DPS':yM,'cookieBlitCubePS':vM,'cookieBlitVS':xM,'cubeMapProjectPS':TM,'cubeMapRotatePS':wM,'debugOutputPS':EM,'debugProcessFrontendPS':bM,'detailModesPS':CM,'diffusePS':PM,'decodePS':AM,'emissivePS':MM,'encodePS':DM,'endPS':IM,'envAtlasPS':LM,'envProcPS':RM,'falloffInvSquaredPS':OM,'falloffLinearPS':FM,'floatAsUintPS':NM,'fogPS':kM,'fresnelSchlickPS':UM,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':BM,'gammaPS':zM,'glossPS':VM,'gsplatCenterVS':GM,'gsplatCornerVS':QM,'gsplatColorVS':HM,'gsplatCommonVS':WM,'gsplatCompressedDataVS':$M,'gsplatCompressedSHVS':XM,'gsplatEvalSHVS':qM,'gsplatQuatToMat3VS':jM,'gsplatSogsColorVS':YM,'gsplatSogsDataVS':KM,'gsplatSogsSHVS':ZM,'gsplatDataVS':JM,'gsplatOutputVS':eD,'gsplatPS':tD,'gsplatSHVS':sD,'gsplatSourceVS':iD,'gsplatVS':rD,'quadVS':aD,'indirectCoreCS':nD,'immediateLinePS':oD,'immediateLineVS':lD,'iridescenceDiffractionPS':cD,'iridescencePS':hD,'iridescenceThicknessPS':dD,'iorPS':fD,'lightDeclarationPS':uD,'lightDiffuseLambertPS':pD,'lightDirPointPS':mD,'lightEvaluationPS':_D,'lightFunctionLightPS':gD,'lightFunctionShadowPS':SD,'lightingPS':yD,'lightmapAddPS':vD,'lightmapPS':xD,'lightSpecularAnisoGGXPS':TD,'lightSpecularBlinnPS':wD,'lightSheenPS':ED,'linearizeDepthPS':bD,'litForwardBackendPS':AD,'litForwardDeclarationPS':CD,'litForwardMainPS':PD,'litForwardPostCodePS':MD,'litForwardPreCodePS':DD,'litMainPS':ID,'litMainVS':LD,'litOtherMainPS':RD,'litShaderArgsPS':OD,'litShaderCorePS':FD,'litShadowMainPS':ND,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':kD,'metalnessPS':UD,'metalnessModulatePS':zD,'morphPS':VD,'morphVS':GD,'msdfPS':BD,'msdfVS':HD,'normalVS':WD,'normalCoreVS':$D,'normalMapPS':XD,'opacityPS':qD,'opacityDitherPS':jD,'outputPS':YD,'outputAlphaPS':KD,'outputTex2DPS':ZD,'sheenPS':QD,'sheenGlossPS':JD,'parallaxPS':eI,'pickPS':tI,'reflDirPS':sI,'reflDirAnisoPS':iI,'reflectionCCPS':rI,'reflectionCubePS':aI,'reflectionEnvHQPS':nI,'reflectionEnvPS':oI,'reflectionSpherePS':lI,'reflectionSheenPS':cI,'refractionCubePS':hI,'refractionDynamicPS':dI,'reprojectPS':fI,'reprojectVS':uI,'screenDepthPS':pI,'shadowCascadesPS':mI,'shadowEVSMPS':_I,'shadowPCF1PS':gI,'shadowPCF3PS':SI,'shadowPCF5PS':yI,'shadowSoftPS':vI,'skinBatchVS':xI,'skinVS':TI,'skyboxPS':wI,'skyboxVS':EI,'specularPS':bI,'sphericalPS':AI,'specularityFactorPS':CI,'spotPS':PI,'startNineSlicedPS':MI,'startNineSlicedTiledPS':DI,'stdDeclarationPS':II,'stdFrontEndPS':LI,'TBNPS':RI,'thicknessPS':OI,'tonemappingPS':FI,'tonemappingAcesPS':NI,'tonemappingAces2PS':kI,'tonemappingFilmicPS':UI,'tonemappingHejlPS':BI,'tonemappingLinearPS':zI,'tonemappingNeutralPS':VI,'tonemappingNonePS':GI,'transformVS':HI,'transformCoreVS':WI,'transformInstancingVS':$I,'transmissionPS':XI,'twoSidedLightingPS':qI,'uv0VS':jI,'uv1VS':YI,'uvTransformVS':KI,'uvTransformUniformsPS':ZI,'viewDirPS':QI,'webgpuPS':$y,'webgpuVS':Xy},ea=class ea extends me{constructor(_0x241dc2){super(),h(this,'_batcher',null),h(this,'_destroyRe'+'quested',!(0x13c4+0x1d27+-0x30ea*0x1)),h(this,'_inFrameUp'+'date',!(-0x1fae+-0x5f*0x1a+0x2955)),h(this,'_libraries'+'Loaded',!(0xb90+0x3*0x788+-0x2227)),h(this,'_fillMode',Tg),h(this,'_resolutio'+'nMode',MC),h(this,'_allowResi'+'ze',!(-0x1513+0x1f62+-0x1d*0x5b)),h(this,'_skyboxAss'+'et',null),h(this,'_soundMana'+'ger'),h(this,'_visibilit'+'yChangeHan'+'dler'),h(this,'_entityInd'+'ex',{}),h(this,'_inTools',!(-0x1108+0x1f55+-0xb7*0x14)),h(this,'_scriptPre'+'fix',''),h(this,'_time',-0x329+0x534+0x20b*-0x1),h(this,'enableBund'+'les',typeof TextDecoder<'u'),h(this,'frameReque'+'stId'),h(this,'timeScale',-0x8*-0x466+-0x2f*-0xc6+-0x4789),h(this,'maxDeltaTi'+'me',-0x14da+0x4b*0x56+0x4*-0x116+0.1),h(this,'frame',-0x14cb*-0x1+-0x16a4+0x1*0x1d9),h(this,'frameGraph',new DC()),h(this,'renderer'),h(this,'scriptsOrd'+'er',[]),h(this,'stats'),h(this,'autoRender',!(0x1467+0x1bc4+-0x13*0x289)),h(this,'renderNext'+'Frame',!(-0x10be+0x13b2+0x2f3*-0x1)),h(this,'graphicsDe'+'vice'),h(this,'root'),h(this,'scene'),h(this,'lightmappe'+'r',null),h(this,'loader',new Cn(this)),h(this,'assets'),h(this,'bundles'),h(this,'scenes',new qC(this)),h(this,'scripts',new HC(this)),h(this,'systems',new BC()),h(this,'i18n',new wa(this)),h(this,'keyboard',null),h(this,'mouse',null),h(this,'touch',null),h(this,'gamepads',null),h(this,'elementInp'+'ut',null),h(this,'xr',null),((hn==null?void(0x1b67+0x980+0x1*-0x24e7):hn['indexOf']('$'))<0xa*0x1bf+0x8c7+0x1a3d*-0x1&&w['log']('Powered\x20by'+'\x20PlayCanva'+'s\x20'+hn+'\x20'+$S),ea['_applicati'+'ons'][_0x241dc2['id']]=this,_u(this),this['root']=new lt(),this['root']['_enabledIn'+'Hierarchy']=!(0x19*-0x7+-0x1*0x1ca3+0x1d52));}['init'](_0x42b951){const {assetPrefix:_0x1f6890,batchManager:_0x199dac,componentSystems:_0x2a146f,elementInput:_0x1b854e,gamepads:_0x405b8c,graphicsDevice:_0x1c9450,keyboard:_0x5d347b,lightmapper:_0x427c9b,mouse:_0x1e7a18,resourceHandlers:_0x69677,scriptsOrder:_0x2f9832,scriptPrefix:_0x3c03e4,soundManager:_0x53696f,touch:_0x2a6373,xr:_0x3d4954}=_0x42b951;w['assert'](_0x1c9450,'The\x20applic'+'ation\x20cann'+'ot\x20be\x20crea'+'ted\x20withou'+'t\x20a\x20valid\x20'+'GraphicsDe'+'vice'),this['graphicsDe'+'vice']=_0x1c9450,Pe['get'](_0x1c9450,Fe)['add'](Z2),Pe['get'](_0x1c9450,it)['add'](JI),this['_initDefau'+'ltMaterial'](),this['_initProgr'+'amLibrary'](),this['stats']=new jC(_0x1c9450),this['_soundMana'+'ger']=_0x53696f,this['scene']=new Et(_0x1c9450),this['_registerS'+'ceneImmedi'+'ate'](this['scene']),this['assets']=new mn(this['loader']),_0x1f6890&&(this['assets']['prefix']=_0x1f6890),this['bundles']=new UC(this['assets']),this['scriptsOrd'+'er']=_0x2f9832||[],this['defaultLay'+'erWorld']=new Ot({'name':'World','id':er}),this['defaultLay'+'erDepth']=new Ot({'name':'Depth','id':ps,'enabled':!(-0x4f+-0x1f6*0x9+0x13*0xf2),'opaqueSortMode':Yc}),this['defaultLay'+'erSkybox']=new Ot({'name':'Skybox','id':Kp,'opaqueSortMode':Yc}),this['defaultLay'+'erUi']=new Ot({'name':'UI','id':Il,'transparentSortMode':jw}),this['defaultLay'+'erImmediat'+'e']=new Ot({'name':'Immediate','id':Zp,'opaqueSortMode':Yc});const _0x72862d=new du('default');_0x72862d['pushOpaque'](this['defaultLay'+'erWorld']),_0x72862d['pushOpaque'](this['defaultLay'+'erDepth']),_0x72862d['pushOpaque'](this['defaultLay'+'erSkybox']),_0x72862d['pushTransp'+'arent'](this['defaultLay'+'erWorld']),_0x72862d['pushOpaque'](this['defaultLay'+'erImmediat'+'e']),_0x72862d['pushTransp'+'arent'](this['defaultLay'+'erImmediat'+'e']),_0x72862d['pushTransp'+'arent'](this['defaultLay'+'erUi']),this['scene']['layers']=_0x72862d,ia['createPlac'+'eholder'](_0x1c9450),this['renderer']=new fl(_0x1c9450),this['renderer']['scene']=this['scene'],_0x427c9b&&(this['lightmappe'+'r']=new _0x427c9b(_0x1c9450,this['root'],this['scene'],this['renderer'],this['assets']),this['once']('prerender',this['_firstBake'],this)),_0x199dac&&(this['_batcher']=new _0x199dac(_0x1c9450,this['root'],this['scene']),this['once']('prerender',this['_firstBatc'+'h'],this)),this['keyboard']=_0x5d347b||null,this['mouse']=_0x1e7a18||null,this['touch']=_0x2a6373||null,this['gamepads']=_0x405b8c||null,_0x1b854e&&(this['elementInp'+'ut']=_0x1b854e,this['elementInp'+'ut']['app']=this),this['xr']=_0x3d4954?new _0x3d4954(this):null,this['elementInp'+'ut']&&this['elementInp'+'ut']['attachSele'+'ctEvents'](),this['_scriptPre'+'fix']=_0x3c03e4||'',this['enableBund'+'les']&&this['loader']['addHandler']('bundle',new VC(this)),_0x69677['forEach'](_0xd7c2a1=>{const _0x2eff71=new _0xd7c2a1(this);this['loader']['addHandler'](_0x2eff71['handlerTyp'+'e'],_0x2eff71);}),_0x2a146f['forEach'](_0x40ee2f=>{this['systems']['add'](new _0x40ee2f(this));}),this['_visibilit'+'yChangeHan'+'dler']=this['onVisibili'+'tyChange']['bind'](this),typeof document<'u'&&(document['hidden']!==void(-0x42*-0x7f+0xdc6+-0x4*0xba1)?(this['_hiddenAtt'+'r']='hidden',document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x9a8+-0x248d+0x2e36))):document['mozHidden']!==void(0x859*-0x1+-0x13*0x23+-0x579*-0x2)?(this['_hiddenAtt'+'r']='mozHidden',document['addEventLi'+'stener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0x8cb*-0x2+0xce*-0x1d+0x5c1))):document['msHidden']!==void(-0x1aa6+0x220f*-0x1+0x3cb5)?(this['_hiddenAtt'+'r']='msHidden',document['addEventLi'+'stener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x17e5*-0x1+-0x1fce+0x37b4))):document['webkitHidd'+'en']!==void(-0x22f4*-0x1+0x115*0x1+-0x2d*0xcd)&&(this['_hiddenAtt'+'r']='webkitHidd'+'en',document['addEventLi'+'stener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(0xc4c+0x4ce*-0x4+0x6ed)))),this['tick']=eL(this);}static['getApplica'+'tion'](_0x32090f){return _0x32090f?ea['_applicati'+'ons'][_0x32090f]:Ms();}['_initDefau'+'ltMaterial'](){const _0x45ab3b=new Ut();_0x45ab3b['name']='Default\x20Ma'+'terial',xE(this['graphicsDe'+'vice'],_0x45ab3b);}['_initProgr'+'amLibrary'](){const _0x5e4156=new qA(this['graphicsDe'+'vice'],new Ut());cE(this['graphicsDe'+'vice'],_0x5e4156);}get['soundManag'+'er'](){return this['_soundMana'+'ger'];}get['batcher'](){return w['assert'](this['_batcher'],'BatchManag'+'er\x20has\x20not'+'\x20been\x20crea'+'ted\x20and\x20is'+'\x20required\x20'+'for\x20correc'+'t\x20function'+'ality.'),this['_batcher'];}get['fillMode'](){return this['_fillMode'];}get['resolution'+'Mode'](){return this['_resolutio'+'nMode'];}['configure'](_0x410245,_0x4c60fd){ot['get'](_0x410245,(_0xb181ad,_0x5986e8)=>{if(_0xb181ad){_0x4c60fd(_0xb181ad);return;}const _0x557b73=_0x5986e8['applicatio'+'n_properti'+'es'],_0xe3c4e1=_0x5986e8['scenes'],_0x2c2d72=_0x5986e8['assets'];this['_parseAppl'+'icationPro'+'perties'](_0x557b73,_0x2e97dd=>{this['_parseScen'+'es'](_0xe3c4e1),this['_parseAsse'+'ts'](_0x2c2d72),_0x4c60fd(_0x2e97dd||null);});});}['preload'](_0x6816a0){this['fire']('preload:st'+'art');const _0x1142c3=this['assets']['list']({'preload':!(-0x1*-0x1b05+0x972+-0x2477)});if(_0x1142c3['length']===0x22a5+0x11*0x153+-0x3928){this['fire']('preload:en'+'d'),_0x6816a0();return;}let _0x2a68e1=0x641+0x2496+-0x2ad7;const _0x53c4c7=()=>{_0x2a68e1++,this['fire']('preload:pr'+'ogress',_0x2a68e1/_0x1142c3['length']),_0x2a68e1===_0x1142c3['length']&&(this['fire']('preload:en'+'d'),_0x6816a0());};_0x1142c3['forEach'](_0xf843b9=>{_0xf843b9['loaded']?_0x53c4c7():(_0xf843b9['once']('load',_0x53c4c7),_0xf843b9['once']('error',_0x53c4c7),this['assets']['load'](_0xf843b9));});}['_preloadSc'+'ripts'](_0x4bc20b,_0x25b7d0){_0x25b7d0();}['_parseAppl'+'icationPro'+'perties'](_0x3798ad,_0x981a33){if(typeof _0x3798ad['maxAssetRe'+'tries']=='number'&&_0x3798ad['maxAssetRe'+'tries']>-0x5*-0x8+-0x10*-0x12+-0x29*0x8&&this['loader']['enableRetr'+'y'](_0x3798ad['maxAssetRe'+'tries']),_0x3798ad['useDeviceP'+'ixelRatio']||(_0x3798ad['useDeviceP'+'ixelRatio']=_0x3798ad['use_device'+'_pixel_rat'+'io']),_0x3798ad['resolution'+'Mode']||(_0x3798ad['resolution'+'Mode']=_0x3798ad['resolution'+'_mode']),_0x3798ad['fillMode']||(_0x3798ad['fillMode']=_0x3798ad['fill_mode']),this['_width']=_0x3798ad['width'],this['_height']=_0x3798ad['height'],_0x3798ad['useDeviceP'+'ixelRatio']&&(this['graphicsDe'+'vice']['maxPixelRa'+'tio']=window['devicePixe'+'lRatio']),this['setCanvasR'+'esolution'](_0x3798ad['resolution'+'Mode'],this['_width'],this['_height']),this['setCanvasF'+'illMode'](_0x3798ad['fillMode'],this['_width'],this['_height']),_0x3798ad['layers']&&_0x3798ad['layerOrder']){const _0x451b03=new du('applicatio'+'n'),_0x56c79d={};for(const _0x4490ce in _0x3798ad['layers']){const _0x2f61ae=_0x3798ad['layers'][_0x4490ce];_0x2f61ae['id']=parseInt(_0x4490ce,-0x24bc*0x1+0x12*0x11e+0x10aa),_0x2f61ae['enabled']=_0x2f61ae['id']!==ps,_0x56c79d[_0x4490ce]=new Ot(_0x2f61ae);}for(let _0x1ccbe4=0x13*-0x5f+-0x2*0x1058+0x27bd,_0x14a7ee=_0x3798ad['layerOrder']['length'];_0x1ccbe4<_0x14a7ee;_0x1ccbe4++){const _0x15b008=_0x3798ad['layerOrder'][_0x1ccbe4],_0x3ab06e=_0x56c79d[_0x15b008['layer']];_0x3ab06e&&(_0x15b008['transparen'+'t']?_0x451b03['pushTransp'+'arent'](_0x3ab06e):_0x451b03['pushOpaque'](_0x3ab06e),_0x451b03['subLayerEn'+'abled'][_0x1ccbe4]=_0x15b008['enabled']);}this['scene']['layers']=_0x451b03;}if(_0x3798ad['batchGroup'+'s']){const _0x23c602=this['batcher'];if(_0x23c602)for(let _0x1dfb3d=0x5a6*-0x4+-0xb0b*-0x3+0x3*-0x383,_0x4da8f3=_0x3798ad['batchGroup'+'s']['length'];_0x1dfb3d<_0x4da8f3;_0x1dfb3d++){const _0x4d715e=_0x3798ad['batchGroup'+'s'][_0x1dfb3d];_0x23c602['addGroup'](_0x4d715e['name'],_0x4d715e['dynamic'],_0x4d715e['maxAabbSiz'+'e'],_0x4d715e['id'],_0x4d715e['layers']);}}_0x3798ad['i18nAssets']&&(this['i18n']['assets']=_0x3798ad['i18nAssets']),this['_loadLibra'+'ries'](_0x3798ad['libraries'],_0x981a33);}['_loadLibra'+'ries'](_0x20876c,_0x445ea5){const _0x3fdd83=_0x20876c['length'];let _0x4bc2c5=_0x3fdd83;const _0x608256=/^https?:\/\//;if(_0x3fdd83){const _0x3a3747=(_0x565338,_0x29b44f)=>{_0x4bc2c5--,_0x565338?_0x445ea5(_0x565338):_0x4bc2c5===0x82d*0x1+0xb*0x14a+-0x165b&&(this['onLibrarie'+'sLoaded'](),_0x445ea5(null));};for(let _0x3529e0=-0x23b6+0x186d+0xb49;_0x3529e0<_0x3fdd83;++_0x3529e0){let _0xe10f20=_0x20876c[_0x3529e0];!_0x608256['test'](_0xe10f20['toLowerCas'+'e']())&&this['_scriptPre'+'fix']&&(_0xe10f20=xe['join'](this['_scriptPre'+'fix'],_0xe10f20)),this['loader']['load'](_0xe10f20,'script',_0x3a3747);}}else this['onLibrarie'+'sLoaded'](),_0x445ea5(null);}['_parseScen'+'es'](_0x150cd5){if(_0x150cd5){for(let _0x4117f0=-0x2b6*0xd+-0x1047+0x3385*0x1;_0x4117f0<_0x150cd5['length'];_0x4117f0++)this['scenes']['add'](_0x150cd5[_0x4117f0]['name'],_0x150cd5[_0x4117f0]['url']);}}['_parseAsse'+'ts'](_0x4a0855){const _0x360834=[],_0x1d653c={},_0x557937={};for(let _0x22f39d=-0xcc0+-0x3*0x331+0x3*0x771;_0x22f39d<this['scriptsOrd'+'er']['length'];_0x22f39d++){const _0xb2d782=this['scriptsOrd'+'er'][_0x22f39d];_0x4a0855[_0xb2d782]&&(_0x1d653c[_0xb2d782]=!(0x1256*-0x1+0x13*0x1dc+0x87f*-0x2),_0x360834['push'](_0x4a0855[_0xb2d782]));}if(this['enableBund'+'les']){for(const _0x276b94 in _0x4a0855)_0x4a0855[_0x276b94]['type']==='bundle'&&(_0x557937[_0x276b94]=!(-0x21b9*-0x1+-0x1699*0x1+0x164*-0x8),_0x360834['push'](_0x4a0855[_0x276b94]));}for(const _0x28e569 in _0x4a0855)_0x1d653c[_0x28e569]||_0x557937[_0x28e569]||_0x360834['push'](_0x4a0855[_0x28e569]);for(let _0x573bf4=0x1*-0x1613+-0x1836*0x1+-0x1*-0x2e49;_0x573bf4<_0x360834['length'];_0x573bf4++){const _0x4bfc9a=_0x360834[_0x573bf4],_0xd5b8aa=new pe(_0x4bfc9a['name'],_0x4bfc9a['type'],_0x4bfc9a['file'],_0x4bfc9a['data']);if(_0xd5b8aa['id']=parseInt(_0x4bfc9a['id'],0x1fed*0x1+-0x2d9*-0x5+-0x2e20),_0xd5b8aa['preload']=_0x4bfc9a['preload']?_0x4bfc9a['preload']:!(-0x1d*-0x35+0x7eb+-0x1*0xdeb),_0xd5b8aa['loaded']=_0x4bfc9a['type']==='script'&&_0x4bfc9a['data']&&_0x4bfc9a['data']['loadingTyp'+'e']>0x1c53+-0x1945+0x22*-0x17,_0xd5b8aa['tags']['add'](_0x4bfc9a['tags']),_0x4bfc9a['i18n']){for(const _0x3cf4c2 in _0x4bfc9a['i18n'])_0xd5b8aa['addLocaliz'+'edAssetId'](_0x3cf4c2,_0x4bfc9a['i18n'][_0x3cf4c2]);}this['assets']['add'](_0xd5b8aa);}}['start'](){w['call'](()=>{w['assert'](!this['_alreadySt'+'arted'],'The\x20applic'+'ation\x20can\x20'+'be\x20started'+'\x20only\x20one\x20'+'time.'),this['_alreadySt'+'arted']=!(0x11e3+0x1ea*-0xd+0x6ff);}),this['frame']=-0x1d2a+0x14f+0x1bdb,this['fire']('start',{'timestamp':de(),'target':this}),this['_libraries'+'Loaded']||this['onLibrarie'+'sLoaded'](),this['systems']['fire']('initialize',this['root']),this['fire']('initialize'),this['systems']['fire']('postInitia'+'lize',this['root']),this['systems']['fire']('postPostIn'+'itialize',this['root']),this['fire']('postinitia'+'lize'),this['tick']();}['inputUpdat'+'e'](_0x1b3872){this['controller']&&this['controller']['update'](_0x1b3872),this['mouse']&&this['mouse']['update'](),this['keyboard']&&this['keyboard']['update'](),this['gamepads']&&this['gamepads']['update']();}['update'](_0x498b62){this['frame']++,this['graphicsDe'+'vice']['update'](),this['stats']['frame']['updateStar'+'t']=de(),this['systems']['fire'](this['_inTools']?'toolsUpdat'+'e':'update',_0x498b62),this['systems']['fire']('animationU'+'pdate',_0x498b62),this['systems']['fire']('postUpdate',_0x498b62),this['fire']('update',_0x498b62),this['inputUpdat'+'e'](_0x498b62),this['stats']['frame']['updateTime']=de()-this['stats']['frame']['updateStar'+'t'];}['render'](){this['updateCanv'+'asSize'](),this['graphicsDe'+'vice']['frameStart'](),this['stats']['frame']['renderStar'+'t']=de(),this['fire']('prerender'),this['root']['syncHierar'+'chy'](),this['_batcher']&&this['_batcher']['updateAll'](),fl['_skipRende'+'rCounter']=-0x38+-0x21f*0x2+-0x2*-0x23b,this['renderComp'+'osition'](this['scene']['layers']),this['fire']('postrender'),this['stats']['frame']['renderTime']=de()-this['stats']['frame']['renderStar'+'t'],this['graphicsDe'+'vice']['frameEnd']();}['renderComp'+'osition'](_0x53108c){Q['clearGpuMa'+'rkers'](),this['renderer']['update'](_0x53108c),this['renderer']['buildFrame'+'Graph'](this['frameGraph'],_0x53108c),this['frameGraph']['render'](this['graphicsDe'+'vice']);}['_fillFrame'+'StatsBasic'](_0xdf7730,_0x130f6a,_0x2012d4){const _0x8b40b=this['stats']['frame'];_0x8b40b['dt']=_0x130f6a,_0x8b40b['ms']=_0x2012d4,_0xdf7730>_0x8b40b['_timeToCou'+'ntFrames']?(_0x8b40b['fps']=_0x8b40b['_fpsAccum'],_0x8b40b['_fpsAccum']=-0x1e87+0xa13*-0x1+0x289a*0x1,_0x8b40b['_timeToCou'+'ntFrames']=_0xdf7730+(0x8*-0x395+0x1*-0xbbc+0x2c4c)):_0x8b40b['_fpsAccum']++,this['stats']['drawCalls']['total']=this['graphicsDe'+'vice']['_drawCalls'+'PerFrame'],this['graphicsDe'+'vice']['_drawCalls'+'PerFrame']=0x13*0x137+0xf0c+-0x2621;}['_fillFrame'+'Stats'](){let _0x251e03=this['stats']['frame'];_0x251e03['cameras']=this['renderer']['_camerasRe'+'ndered'],_0x251e03['materials']=this['renderer']['_materialS'+'witches'],_0x251e03['shaders']=this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame'],_0x251e03['shadowMapU'+'pdates']=this['renderer']['_shadowMap'+'Updates'],_0x251e03['shadowMapT'+'ime']=this['renderer']['_shadowMap'+'Time'],_0x251e03['depthMapTi'+'me']=this['renderer']['_depthMapT'+'ime'],_0x251e03['forwardTim'+'e']=this['renderer']['_forwardTi'+'me'];const _0x56dddd=this['graphicsDe'+'vice']['_primsPerF'+'rame'];_0x251e03['triangles']=_0x56dddd[js]/(-0x58*0xa+-0x31*0xbc+0x276f)+Math['max'](_0x56dddd[Er]-(0x15e6+0x1cad+-0x3291),-0x26ad+0x1*-0x207a+-0x5*-0xe3b)+Math['max'](_0x56dddd[oa]-(-0x104e+0x1b91+-0xb41),0x10a+0x1d*-0x29+0x1*0x39b),_0x251e03['cullTime']=this['renderer']['_cullTime'],_0x251e03['sortTime']=this['renderer']['_sortTime'],_0x251e03['skinTime']=this['renderer']['_skinTime'],_0x251e03['morphTime']=this['renderer']['_morphTime'],_0x251e03['lightClust'+'ers']=this['renderer']['_lightClus'+'ters'],_0x251e03['lightClust'+'ersTime']=this['renderer']['_lightClus'+'tersTime'],_0x251e03['otherPrimi'+'tives']=-0x1545+0x1*-0x2350+0x3895;for(let _0x14dc3d=-0x1581*-0x1+0x253+-0x17d4;_0x14dc3d<_0x56dddd['length'];_0x14dc3d++)_0x14dc3d<js&&(_0x251e03['otherPrimi'+'tives']+=_0x56dddd[_0x14dc3d]),_0x56dddd[_0x14dc3d]=-0xf2*0x1a+-0x361*0x2+0x1f56;this['renderer']['_camerasRe'+'ndered']=-0xd86+0x2f2+0x2a5*0x4,this['renderer']['_materialS'+'witches']=-0x92*-0x42+0x9*0x156+-0x31aa,this['renderer']['_shadowMap'+'Updates']=0x39*0x49+-0xb2e+0x3*-0x1b1,this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame']=0x205+-0x63c*-0x1+0x1*-0x841,this['renderer']['_cullTime']=0x2041*-0x1+0x11ac+0xe95,this['renderer']['_layerComp'+'ositionUpd'+'ateTime']=-0x6*-0x35+-0x2088+0x1f4a,this['renderer']['_lightClus'+'tersTime']=0x2d5*-0x4+0x1963+-0xe0f*0x1,this['renderer']['_sortTime']=-0x7d*-0x19+0x1*-0x1bec+0x9*0x1bf,this['renderer']['_skinTime']=0x4*0x932+-0x22a5+-0x223,this['renderer']['_morphTime']=-0xa*0x13+-0x1430+0x26*0x8d,this['renderer']['_shadowMap'+'Time']=-0x4b9+-0x98*0x40+0x2ab9*0x1,this['renderer']['_depthMapT'+'ime']=-0xe*0x20c+0xa9*-0xd+0x1*0x253d,this['renderer']['_forwardTi'+'me']=-0x122e+-0xb*-0x2f5+-0xe59,_0x251e03=this['stats']['drawCalls'],_0x251e03['forward']=this['renderer']['_forwardDr'+'awCalls'],_0x251e03['culled']=this['renderer']['_numDrawCa'+'llsCulled'],_0x251e03['depth']=0x2f2*0xd+0xd66+0x2*-0x19d8,_0x251e03['shadow']=this['renderer']['_shadowDra'+'wCalls'],_0x251e03['skinned']=this['renderer']['_skinDrawC'+'alls'],_0x251e03['immediate']=-0x130*-0x1d+-0x2*0x5a2+-0xb96*0x2,_0x251e03['instanced']=0x2*0xab+0x23f3+-0x1*0x2549,_0x251e03['removedByI'+'nstancing']=0x3*-0x2c5+0xb63+-0xc5*0x4,_0x251e03['misc']=_0x251e03['total']-(_0x251e03['forward']+_0x251e03['shadow']),this['renderer']['_depthDraw'+'Calls']=-0x1269+-0x26f8+0x18d*0x25,this['renderer']['_shadowDra'+'wCalls']=0x9bd*0x3+-0x3cf+-0x1968,this['renderer']['_forwardDr'+'awCalls']=0x5*0x649+-0x1*0x264f+0x6e2,this['renderer']['_numDrawCa'+'llsCulled']=-0xd7*0x3+0x1e6f+-0x1*0x1bea,this['renderer']['_skinDrawC'+'alls']=-0x9fd*0x2+0x17bb+-0x3c1,this['renderer']['_immediate'+'Rendered']=0x2*0x128c+-0xd*-0x15b+-0x36b7,this['renderer']['_instanced'+'DrawCalls']=-0x1cd0+0x1654+0x67c,this['stats']['misc']['renderTarg'+'etCreation'+'Time']=this['graphicsDe'+'vice']['renderTarg'+'etCreation'+'Time'],_0x251e03=this['stats']['particles'],_0x251e03['updatesPer'+'Frame']=_0x251e03['_updatesPe'+'rFrame'],_0x251e03['frameTime']=_0x251e03['_frameTime'],_0x251e03['_updatesPe'+'rFrame']=-0x1*0x28d+-0x6b*-0x3+0x14c,_0x251e03['_frameTime']=0xe*-0xc7+-0x1c42+0x2724;}['setCanvasF'+'illMode'](_0x3eeaac,_0x326589,_0x9af9f3){this['_fillMode']=_0x3eeaac,this['resizeCanv'+'as'](_0x326589,_0x9af9f3);}['setCanvasR'+'esolution'](_0x8509ee,_0x201363,_0x31dfd3){this['_resolutio'+'nMode']=_0x8509ee,_0x8509ee===wg&&_0x201363===void(-0x535+0x18*0x166+0x1c5b*-0x1)&&(_0x201363=this['graphicsDe'+'vice']['canvas']['clientWidt'+'h'],_0x31dfd3=this['graphicsDe'+'vice']['canvas']['clientHeig'+'ht']),this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x201363,_0x31dfd3);}['isHidden'](){return document[this['_hiddenAtt'+'r']];}['onVisibili'+'tyChange'](){this['isHidden']()?this['_soundMana'+'ger']&&this['_soundMana'+'ger']['suspend']():this['_soundMana'+'ger']&&this['_soundMana'+'ger']['resume']();}['resizeCanv'+'as'](_0x28509b,_0xa91c17){if(!this['_allowResi'+'ze']||this['xr']&&this['xr']['session'])return;const _0x286143=window['innerWidth'],_0x4c33ac=window['innerHeigh'+'t'];if(this['_fillMode']===Tg){const _0x489aeb=this['graphicsDe'+'vice']['canvas']['width']/this['graphicsDe'+'vice']['canvas']['height'],_0x1ce167=_0x286143/_0x4c33ac;_0x489aeb>_0x1ce167?(_0x28509b=_0x286143,_0xa91c17=_0x28509b/_0x489aeb):(_0xa91c17=_0x4c33ac,_0x28509b=_0xa91c17*_0x489aeb);}else this['_fillMode']===PC&&(_0x28509b=_0x286143,_0xa91c17=_0x4c33ac);return this['graphicsDe'+'vice']['canvas']['style']['width']=_0x28509b+'px',this['graphicsDe'+'vice']['canvas']['style']['height']=_0xa91c17+'px',this['updateCanv'+'asSize'](),{'width':_0x28509b,'height':_0xa91c17};}['updateCanv'+'asSize'](){var _0xc14419;if(!(!this['_allowResi'+'ze']||(_0xc14419=this['xr'])!=null&&_0xc14419['active'])&&this['_resolutio'+'nMode']===wg){const _0x19c086=this['graphicsDe'+'vice']['canvas'];this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x19c086['clientWidt'+'h'],_0x19c086['clientHeig'+'ht']);}}['onLibrarie'+'sLoaded'](){this['_libraries'+'Loaded']=!(-0x1b16+-0x1116+-0x1616*-0x2),this['systems']['rigidbody']&&this['systems']['rigidbody']['onLibraryL'+'oaded']();}['applyScene'+'Settings'](_0x473a83){let _0xe29fd0;if(this['systems']['rigidbody']&&typeof Ammo<'u'){const [_0x4a8d45,_0x56d454,_0x3dbdee]=_0x473a83['physics']['gravity'];this['systems']['rigidbody']['gravity']['set'](_0x4a8d45,_0x56d454,_0x3dbdee);}this['scene']['applySetti'+'ngs'](_0x473a83),_0x473a83['render']['hasOwnProp'+'erty']('skybox')&&(_0x473a83['render']['skybox']?(_0xe29fd0=this['assets']['get'](_0x473a83['render']['skybox']),_0xe29fd0?this['setSkybox'](_0xe29fd0):this['assets']['once']('add:'+_0x473a83['render']['skybox'],this['setSkybox'],this)):this['setSkybox'](null));}['setAreaLig'+'htLuts'](_0x55ffc7,_0x53e561){_0x55ffc7&&_0x53e561?ia['set'](this['graphicsDe'+'vice'],_0x55ffc7,_0x53e561):w['warn']('setAreaLig'+'htLuts:\x20LU'+'Ts\x20for\x20are'+'a\x20light\x20ar'+'e\x20not\x20vali'+'d');}['setSkybox'](_0x2028b4){if(_0x2028b4!==this['_skyboxAss'+'et']){const _0x55eb4d=()=>{this['setSkybox'](null);},_0x1dbcef=()=>{this['scene']['setSkybox'](this['_skyboxAss'+'et']?this['_skyboxAss'+'et']['resources']:null);};this['_skyboxAss'+'et']&&(this['assets']['off']('load:'+this['_skyboxAss'+'et']['id'],_0x1dbcef,this),this['assets']['off']('remove:'+this['_skyboxAss'+'et']['id'],_0x55eb4d,this),this['_skyboxAss'+'et']['off']('change',_0x1dbcef,this)),this['_skyboxAss'+'et']=_0x2028b4,this['_skyboxAss'+'et']&&(this['assets']['on']('load:'+this['_skyboxAss'+'et']['id'],_0x1dbcef,this),this['assets']['once']('remove:'+this['_skyboxAss'+'et']['id'],_0x55eb4d,this),this['_skyboxAss'+'et']['on']('change',_0x1dbcef,this),this['scene']['skyboxMip']===0x212+-0x1041+0xe2f*0x1&&!this['_skyboxAss'+'et']['loadFaces']&&(this['_skyboxAss'+'et']['loadFaces']=!(-0x1*0x89f+-0x6f3*-0x5+-0x1a20)),this['assets']['load'](this['_skyboxAss'+'et'])),_0x1dbcef();}}['_firstBake'](){var _0x23b781;(_0x23b781=this['lightmappe'+'r'])==null||_0x23b781['bake'](null,this['scene']['lightmapMo'+'de']);}['_firstBatc'+'h'](){var _0x576c0f;(_0x576c0f=this['batcher'])==null||_0x576c0f['generate']();}['_processTi'+'mestamp'](_0x376381){return _0x376381;}['drawLine'](_0x1b36b0,_0x35e76a,_0x2752fe,_0x5b1a69,_0x596617){this['scene']['drawLine'](_0x1b36b0,_0x35e76a,_0x2752fe,_0x5b1a69,_0x596617);}['drawLines'](_0x21f3e9,_0x22c62c,_0x2572b2=!(-0xde4+-0x277*-0x2+0x1*0x8f6),_0x41a0c3=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLines'](_0x21f3e9,_0x22c62c,_0x2572b2,_0x41a0c3);}['drawLineAr'+'rays'](_0x21fff8,_0x2ac803,_0xee99f4=!(-0x1d85+-0x25aa+0x432f),_0x46aea3=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLineAr'+'rays'](_0x21fff8,_0x2ac803,_0xee99f4,_0x46aea3);}['drawWireSp'+'here'](_0x2c171c,_0x22a9df,_0x50257f=ie['WHITE'],_0x4fc309=0x188d+-0xc2*0xb+0x561*-0x3,_0x5940ef=!(0x4*-0x508+-0x2*0xf76+0x330c),_0x1e9434=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawWireSp'+'here'](_0x2c171c,_0x22a9df,_0x50257f,_0x4fc309,_0x5940ef,_0x1e9434);}['drawWireAl'+'ignedBox'](_0x20710e,_0x4cfac0,_0x4dfb90=ie['WHITE'],_0x1344ea=!(-0x8f3+-0x210f+0x2a02),_0x26daf7=this['scene']['defaultDra'+'wLayer'],_0xc295ac){this['scene']['immediate']['drawWireAl'+'ignedBox'](_0x20710e,_0x4cfac0,_0x4dfb90,_0x1344ea,_0x26daf7,_0xc295ac);}['drawMeshIn'+'stance'](_0x1635ba,_0x5eabcf=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](null,null,null,_0x1635ba,_0x5eabcf);}['drawMesh'](_0x278b62,_0x442208,_0x940b5d,_0x385a73=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x442208,_0x940b5d,_0x278b62,null,_0x385a73);}['drawQuad'](_0x555826,_0x59506c,_0x225b7f=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x59506c,_0x555826,this['scene']['immediate']['getQuadMes'+'h'](),null,_0x225b7f);}['drawTextur'+'e'](_0x10f69e,_0x2c8eb8,_0x49e1d7,_0x5db787,_0x33d61e,_0x4b5961,_0x22d3c2=this['scene']['defaultDra'+'wLayer'],_0xe4d511=!(-0xb5*0x21+-0x64a*0x1+0x1d9f)){if(_0xe4d511===!(-0x1e*0xc1+-0x2*-0x787+0x791)&&!this['graphicsDe'+'vice']['isWebGPU'])return;const _0x2d2055=new te();_0x2d2055['setTRS'](new D(_0x10f69e,_0x2c8eb8,-0x38*-0xa4+0x24*-0x78+-0x1*0x1300),le['IDENTITY'],new D(_0x49e1d7,-_0x5db787,-0x5fc+0x226d*-0x1+0x2869)),_0x4b5961||(_0x4b5961=new Xn(),_0x4b5961['cull']=bt,_0x4b5961['setParamet'+'er']('colorMap',_0x33d61e),_0x4b5961['shaderDesc']=_0xe4d511?this['scene']['immediate']['getTexture'+'ShaderDesc'](_0x33d61e['encoding']):this['scene']['immediate']['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](),_0x4b5961['update']()),this['drawQuad'](_0x2d2055,_0x4b5961,_0x22d3c2);}['drawDepthT'+'exture'](_0x3c3e2c,_0x53ca64,_0x462eeb,_0x43bd04,_0x4feab4=this['scene']['defaultDra'+'wLayer']){const _0x29bc30=new Xn();_0x29bc30['cull']=bt,_0x29bc30['shaderDesc']=this['scene']['immediate']['getDepthTe'+'xtureShade'+'rDesc'](),_0x29bc30['update'](),this['drawTextur'+'e'](_0x3c3e2c,_0x53ca64,_0x462eeb,_0x43bd04,null,_0x29bc30,_0x4feab4);}['destroy'](){var _0xd71028,_0x1f0a11,_0x6ccb0f,_0xd2f57b;if(this['_inFrameUp'+'date']){this['_destroyRe'+'quested']=!(0xc*-0x1e9+-0x1*-0x96d+0xd7f);return;}const _0x432b68=this['graphicsDe'+'vice']['canvas']['id'];this['fire']('destroy',this),this['off']('librariesl'+'oaded'),typeof document<'u'&&(document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(0x79*0x14+-0x20de+0x176b)),document['removeEven'+'tListener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x10e7+0x31*0xd+-0x2c5*0x7)),document['removeEven'+'tListener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x1*0x11a0+-0x1e2+0x1*-0xfbd)),document['removeEven'+'tListener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(-0x18ca+0xd74+0xb57))),this['_visibilit'+'yChangeHan'+'dler']=null,this['root']['destroy'](),this['root']=null,this['mouse']&&(this['mouse']['off'](),this['mouse']['detach'](),this['mouse']=null),this['keyboard']&&(this['keyboard']['off'](),this['keyboard']['detach'](),this['keyboard']=null),this['touch']&&(this['touch']['off'](),this['touch']['detach'](),this['touch']=null),this['elementInp'+'ut']&&(this['elementInp'+'ut']['detach'](),this['elementInp'+'ut']=null),this['gamepads']&&(this['gamepads']['destroy'](),this['gamepads']=null),this['controller']&&(this['controller']=null),this['systems']['destroy'](),this['scene']['layers']&&this['scene']['layers']['destroy']();const _0x5ac89b=this['assets']['list']();for(let _0x49d7d4=-0x26f3*-0x1+0x1ff6+-0x46e9;_0x49d7d4<_0x5ac89b['length'];_0x49d7d4++)_0x5ac89b[_0x49d7d4]['unload'](),_0x5ac89b[_0x49d7d4]['off']();this['assets']['off'](),this['bundles']['destroy'](),this['bundles']=null,this['i18n']['destroy'](),this['i18n']=null;const _0x6f225c=this['loader']['getHandler']('script');_0x6f225c==null||_0x6f225c['clearCache'](),this['loader']['destroy'](),this['loader']=null,this['scene']['destroy'](),this['scene']=null,this['systems']=null,this['context']=null,this['scripts']['destroy'](),this['scripts']=null,this['scenes']['destroy'](),this['scenes']=null,(_0xd71028=this['lightmappe'+'r'])==null||_0xd71028['destroy'](),this['lightmappe'+'r']=null,this['_batcher']&&(this['_batcher']['destroy'](),this['_batcher']=null),this['_entityInd'+'ex']={},this['defaultLay'+'erDepth']['onDisable']=null,this['defaultLay'+'erDepth']['onEnable']=null,this['defaultLay'+'erDepth']=null,this['defaultLay'+'erWorld']=null,(_0x1f0a11=this['xr'])==null||_0x1f0a11['end'](),(_0x6ccb0f=this['xr'])==null||_0x6ccb0f['destroy'](),this['renderer']['destroy'](),this['renderer']=null,this['graphicsDe'+'vice']['destroy'](),this['graphicsDe'+'vice']=null,this['tick']=null,this['off'](),(_0xd2f57b=this['_soundMana'+'ger'])==null||_0xd2f57b['destroy'](),this['_soundMana'+'ger']=null,ea['_applicati'+'ons'][_0x432b68]=null,Ms()===this&&_u(null),ea['cancelTick'](this);}static['cancelTick'](_0xf66cdc){_0xf66cdc['frameReque'+'stId']&&(window['cancelAnim'+'ationFrame'](_0xf66cdc['frameReque'+'stId']),_0xf66cdc['frameReque'+'stId']=void(0x1603+0x372+-0x3a3*0x7));}['getEntityF'+'romIndex'](_0x13ff0a){return this['_entityInd'+'ex'][_0x13ff0a];}['_registerS'+'ceneImmedi'+'ate'](_0x13f2ad){this['on']('postrender',_0x13f2ad['immediate']['onPostRend'+'er'],_0x13f2ad['immediate']);}};h(ea,'_applicati'+'ons',{});let Ks=ea;const eL=function(_0x48ef07){const _0x5992ca=_0x48ef07;return function(_0x11cd49,_0x2a96eb){var _0x3c32dd,_0x49e963,_0x2fb2fe,_0x21a3c6;if(!_0x5992ca['graphicsDe'+'vice'])return;_0x5992ca['frameReque'+'stId']&&((_0x49e963=(_0x3c32dd=_0x5992ca['xr'])==null?void(0x1*-0x1ef1+0x1*0x1efd+-0xc):_0x3c32dd['session'])==null||_0x49e963['cancelAnim'+'ationFrame'](_0x5992ca['frameReque'+'stId']),cancelAnimationFrame(_0x5992ca['frameReque'+'stId']),_0x5992ca['frameReque'+'stId']=null),_0x5992ca['_inFrameUp'+'date']=!(-0x6e2+0x1*-0x779+0xe5b),_u(_0x5992ca);const _0x1b07e6=_0x5992ca['_processTi'+'mestamp'](_0x11cd49)||de(),_0x3a8a95=_0x1b07e6-(_0x5992ca['_time']||_0x1b07e6);let _0x3f333c=_0x3a8a95/(0x105*0x2+0x35c+-0x1*0x17e);if(_0x3f333c=Y['clamp'](_0x3f333c,0x1*0x4a5+0x133e*-0x2+0x1*0x21d7,_0x5992ca['maxDeltaTi'+'me']),_0x3f333c*=_0x5992ca['timeScale'],_0x5992ca['_time']=_0x1b07e6,(_0x2fb2fe=_0x5992ca['xr'])!=null&&_0x2fb2fe['session']?_0x5992ca['frameReque'+'stId']=_0x5992ca['xr']['session']['requestAni'+'mationFram'+'e'](_0x5992ca['tick']):_0x5992ca['frameReque'+'stId']=Ae['browser']||Ae['worker']?requestAnimationFrame(_0x5992ca['tick']):null,_0x5992ca['graphicsDe'+'vice']['contextLos'+'t'])return;_0x5992ca['_fillFrame'+'StatsBasic'](_0x1b07e6,_0x3f333c,_0x3a8a95),_0x5992ca['_fillFrame'+'Stats'](),_0x5992ca['fire']('frameupdat'+'e',_0x3a8a95);let _0x163b30=!(-0x3*-0x281+-0x3*0x8eb+-0x133f*-0x1);_0x2a96eb?(_0x163b30=!((_0x21a3c6=_0x5992ca['xr'])!=null&&_0x21a3c6['update'](_0x2a96eb)),_0x5992ca['graphicsDe'+'vice']['defaultFra'+'mebuffer']=_0x2a96eb['session']['renderStat'+'e']['baseLayer']['framebuffe'+'r']):_0x5992ca['graphicsDe'+'vice']['defaultFra'+'mebuffer']=null,!_0x163b30&&!_0x5992ca['stopSort']&&(w['trace'](W0,'----\x20Frame'+'\x20'+_0x5992ca['frame']),w['trace'](Ld,'--\x20UpdateS'+'tart\x20'+de()['toFixed'](-0x511*-0x2+0x25fc+-0x301c*0x1)+'ms'),_0x5992ca['update'](_0x3f333c),_0x5992ca['fire']('framerende'+'r'),(_0x5992ca['autoRender']||_0x5992ca['renderNext'+'Frame'])&&(w['trace'](Ld,'--\x20RenderS'+'tart\x20'+de()['toFixed'](-0x3b*0x2+-0x2c5*0xd+0x2479)+'ms'),_0x5992ca['render'](),_0x5992ca['renderNext'+'Frame']=!(-0x7a*0x16+0x8ff*0x4+-0x6b*0x3d),w['trace'](Ld,'--\x20RenderE'+'nd\x20'+de()['toFixed'](-0x2*0xc42+-0x534*0x2+0x22ee)+'ms')),_0x5992ca['fire']('frameend')),_0x5992ca['_inFrameUp'+'date']=!(-0x135*0x2+0x20*-0x138+0x1*0x296b),_0x5992ca['_destroyRe'+'quested']&&_0x5992ca['destroy']();};};class tL{constructor(){h(this,'elementInp'+'ut'),h(this,'keyboard'),h(this,'mouse'),h(this,'touch'),h(this,'gamepads'),h(this,'scriptPref'+'ix'),h(this,'assetPrefi'+'x'),h(this,'scriptsOrd'+'er'),h(this,'soundManag'+'er'),h(this,'graphicsDe'+'vice'),h(this,'lightmappe'+'r'),h(this,'batchManag'+'er'),h(this,'xr'),h(this,'componentS'+'ystems',[]),h(this,'resourceHa'+'ndlers',[]);}}const mo=new sp();class Uv{constructor(_0x5e4d4c,_0x1fcb15,_0xa2f7bf){this['scene']=_0x5e4d4c,this['light']=_0x1fcb15,this['store'](),_0x1fcb15['numCascade'+'s']=0x5b*0x17+0x1*0x2254+0x110*-0x28,this['scene']['clusteredL'+'ightingEna'+'bled']&&!_0xa2f7bf['shadowsEna'+'bled']&&(_0x1fcb15['castShadow'+'s']=!(0x3c7*-0x5+-0xc76+0x1f5a)),_0x1fcb15['type']!==ve&&(_0x1fcb15['_node']['getWorldTr'+'ansform'](),_0x1fcb15['getBoundin'+'gSphere'](mo),this['lightBound'+'s']=new De(),this['lightBound'+'s']['center']['copy'](mo['center']),this['lightBound'+'s']['halfExtent'+'s']['set'](mo['radius'],mo['radius'],mo['radius']));}['store'](){this['mask']=this['light']['mask'],this['shadowUpda'+'teMode']=this['light']['shadowUpda'+'teMode'],this['enabled']=this['light']['enabled'],this['intensity']=this['light']['intensity'],this['rotation']=this['light']['_node']['getLocalRo'+'tation']()['clone'](),this['numCascade'+'s']=this['light']['numCascade'+'s'],this['castShadow'+'s']=this['light']['_castShado'+'ws'];}['restore'](){const _0x40b828=this['light'];_0x40b828['mask']=this['mask'],_0x40b828['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x40b828['enabled']=this['enabled'],_0x40b828['intensity']=this['intensity'],_0x40b828['_node']['setLocalRo'+'tation'](this['rotation']),_0x40b828['numCascade'+'s']=this['numCascade'+'s'],_0x40b828['_castShado'+'ws']=this['castShadow'+'s'];}['startBake'](){this['light']['enabled']=!(0xa97*0x2+-0x56*0x58+-0x1*-0x862),this['light']['_destroySh'+'adowMap'](),this['light']['beginFrame']();}['endBake'](_0x21bc8d){const _0x466690=this['light'];_0x466690['enabled']=!(0x15b9+0x6db+-0x1c93),_0x466690['shadowMap']&&(_0x466690['shadowMap']['cached']&&_0x21bc8d['add'](_0x466690,_0x466690['shadowMap']),_0x466690['shadowMap']=null);}}const yc=new J();class sL extends Uv{constructor(_0xd68b77,_0x150147){super(_0xd68b77['scene'],_0x150147,_0xd68b77['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['type']===ve?this['light']['bakeNumSam'+'ples']:0xf1*-0x22+0x4f*0x6f+0x52*-0x7;}['prepareVir'+'tualLight'](_0x5cd1b2,_0xf1aa31){const _0x58ee55=this['light'];if(_0x58ee55['_node']['setLocalRo'+'tation'](this['rotation']),_0x5cd1b2>0x187*0x19+0x1cc9*-0x1+-0x1*0x966){const _0x227ab1=_0x58ee55['bakeArea'];Nl['circlePoin'+'tDetermini'+'stic'](yc,_0x5cd1b2,_0xf1aa31),yc['mulScalar'](_0x227ab1*(0x1a*-0x10d+-0x1f7b+-0x1*-0x3acd+0.5)),_0x58ee55['_node']['rotateLoca'+'l'](yc['x'],-0xa2e*0x3+-0x7b6+-0x18*-0x198,yc['y']);}_0x58ee55['_node']['getWorldTr'+'ansform']();const _0x3b17ed=-0x25f2+-0x1351+0x3*0x1317+0.20000000000000018,_0x2c7a07=Math['pow'](this['intensity'],_0x3b17ed);_0x58ee55['intensity']=Math['pow'](_0x2c7a07/_0xf1aa31,(0x24fb+0x1*0x9+-0x2503)/_0x3b17ed);}}const Pg=new D();class Mg extends Uv{constructor(_0x4c95a7){const _0x17d9e0=_0x4c95a7['scene'],_0x5c8e78=new lt('AmbientLig'+'ht');_0x5c8e78['addCompone'+'nt']('light',{'type':'directiona'+'l','affectDynamic':!(-0x15*0xb1+0x24f4+-0x166f*0x1),'affectLightmapped':!(-0xf3c+0x1*-0x1532+0x246f),'bake':!(0x1386+-0x1*-0x155c+-0x1471*0x2),'bakeNumSamples':_0x17d9e0['ambientBak'+'eNumSample'+'s'],'castShadows':!(-0x64b+0x117c+-0x5*0x23d),'normalOffsetBias':0.05,'shadowBias':0.2,'shadowDistance':0x1,'shadowResolution':0x800,'shadowType':$s,'color':ie['WHITE'],'intensity':0x1,'bakeDir':!(0x1d2c+-0x2673+-0x6*-0x18c)}),super(_0x17d9e0,_0x5c8e78['light']['light'],_0x4c95a7['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['bakeNumSam'+'ples'];}['prepareVir'+'tualLight'](_0x212425,_0x4846a0){Nl['spherePoin'+'tDetermini'+'stic'](Pg,_0x212425,_0x4846a0,0x3*-0xcfe+-0xaee+0x31e8,this['scene']['ambientBak'+'eSpherePar'+'t']),this['light']['_node']['lookAt'](Pg['mulScalar'](-(0x1*0x1fd6+0x12a4+0x1*-0x3279))),this['light']['_node']['rotateLoca'+'l'](0xbf*0x28+0x22a3+0x1*-0x4021,-0x67d*-0x1+0x1*-0x148f+0xe12*0x1,-0x2452+-0x1*-0x1981+0xad1);const _0x49052a=-0xb5a*0x1+0x14e+0xa0e+0.20000000000000018,_0x28814f=(-0x2d3+-0x385+0x32d*0x2)*Math['PI']*this['scene']['ambientBak'+'eSpherePar'+'t'],_0x7693da=Math['pow'](_0x28814f,_0x49052a);this['light']['intensity']=Math['pow'](_0x7693da/_0x4846a0,(-0x5b8+0x1d8+-0x14b*-0x3)/_0x49052a);}}class vc{constructor(_0x553126,_0x397d8e=null){this['node']=_0x553126,this['component']=_0x553126['render']||_0x553126['model'],_0x397d8e=_0x397d8e||this['component']['meshInstan'+'ces'],this['store'](),this['meshInstan'+'ces']=_0x397d8e,this['bounds']=null,this['renderTarg'+'ets']=[];}['store'](){this['castShadow'+'s']=this['component']['castShadow'+'s'];}['restore'](){this['component']['castShadow'+'s']=this['castShadow'+'s'];}}const iL='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afl'+'oat\x20normpd'+'f3(in\x20vec3'+'\x20v,\x20in\x20flo'+'at\x20sigma)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x200.39894'+'\x20*\x20exp(-0.'+'5\x20*\x20dot(v,'+'\x20v)\x20/\x20(sig'+'ma\x20*\x20sigma'+'))\x20/\x20sigma'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBM'+'(vec4\x20rgbm'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20color\x20='+'\x20(8.0\x20*\x20rg'+'bm.a)\x20*\x20rg'+'bm.rgb;\x0a\x20\x20'+'\x20\x20return\x20c'+'olor\x20*\x20col'+'or;\x0a}\x0a\x0aflo'+'at\x20saturat'+'e(float\x20x)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeRG'+'BM(vec3\x20co'+'lor)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20encoded'+';\x0a\x20\x20\x20\x20enco'+'ded.rgb\x20=\x20'+'pow(color.'+('rgb,\x20vec3('+'0.5));\x0a\x20\x20\x20'+'\x20encoded.r'+'gb\x20*=\x201.0\x20'+'/\x208.0;\x0a\x0a\x20\x20'+'\x20\x20encoded.'+'a\x20=\x20satura'+'te(\x20max(\x20m'+'ax(\x20encode'+'d.r,\x20encod'+'ed.g\x20),\x20ma'+'x(\x20encoded'+'.b,\x201.0\x20/\x20'+'255.0\x20)\x20)\x20'+');\x0a\x20\x20\x20\x20enc'+'oded.a\x20=\x20c'+'eil(encode'+'d.a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20enc'+'oded.rgb\x20/'+'=\x20encoded.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20encode'+'d;\x0a}\x0a\x0avec3'+'\x20decode(ve'+'c4\x20pixel)\x20'+'{\x0a\x20\x20\x20\x20#if\x20'+'HDR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20p'+'ixel.rgb;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eRGBM(pixe'+'l);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0abo'+'ol\x20isUsed('+'vec4\x20pixel'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20HDR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20any(great'+'erThan(pix'+'el.rgb,\x20ve'+'c3(0.0)));'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20pixe'+'l.a\x20>\x200.0;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0avaryi'+'ng\x20vec2\x20vU'+'v0;\x0aunifor'+'m\x20sampler2'+'D\x20source;\x0a'+'uniform\x20ve'+'c2\x20pixelOf'+'fset;\x0aunif'+'orm\x20vec2\x20s'+'igmas;\x0auni'+'form\x20float'+'\x20bZnorm;\x0au'+'niform\x20flo'+'at\x20kernel['+'{MSIZE}];\x0a'+'\x0avoid\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20ve'+'c4\x20pixel\x20='+'\x20texture2D'+'Lod(source'+',\x20vUv0,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20/'+'/\x20lightmap'+'\x20specific\x20'+'optimizati'+'on\x20-\x20skip\x20'+'pixels\x20tha'+'t\x20were\x20not'+'\x20baked\x0a\x20\x20\x20'+'\x20//\x20this\x20a'+'lso\x20allows'+'\x20dilate\x20fi'+'lter\x20that\x20'+'work\x20on\x20th'+'e\x20output\x20o'+'f\x20this\x20to\x20'+'work\x20corre'+'ctly,\x20as\x20i'+'t\x20depends\x20'+'on\x20.a\x20bein'+'g\x20zero\x0a\x20\x20\x20'+'\x20//\x20to\x20dil'+'ate,\x20which'+'\x20the\x20follo'+'wing\x20blur\x20'+'filter\x20wou'+'ld\x20otherwi'+'se\x20modify\x0a')+('\x20\x20\x20\x20if\x20(!i'+'sUsed(pixe'+'l))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20p'+'ixel;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20sigma\x20-'+'\x20controls\x20'+'blurriness'+'\x20based\x20on\x20'+'a\x20pixel\x20di'+'stance\x0a\x20\x20\x20'+'\x20float\x20sig'+'ma\x20=\x20sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'float\x20bSig'+'ma\x20=\x20sigma'+'s.y;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20pixel'+'Hdr\x20=\x20deco'+'de(pixel);'+'\x0a\x20\x20\x20\x20vec3\x20'+'accumulate'+'dHdr\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20float\x20ac'+'cumulatedF'+'actor\x20=\x200.'+'000001;\x20\x20/'+'/\x20avoid\x20di'+'vision\x20by\x20'+'zero\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20ou'+'t\x20the\x20texe'+'ls\x0a\x20\x20\x20\x20con'+'st\x20int\x20kSi'+'ze\x20=\x20({MSI'+'ZE}\x20-\x201)\x20/'+'\x202;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x20-kSize;\x20i'+'\x20<=\x20kSize;'+'\x20++i)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20j\x20=\x20-'+'kSize;\x20j\x20<'+'=\x20kSize;\x20+'+'+j)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sample'+'\x20the\x20pixel'+'\x20with\x20offs'+'et\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'coord\x20=\x20vU'+'v0\x20+\x20vec2('+'float(i),\x20'+'float(j))\x20'+'*\x20pixelOff'+'set;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20pix\x20=\x20te'+'xture2DLod'+'(source,\x20c'+'oord,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x20-\x20o'+'nly\x20use\x20ba'+'ked\x20pixels'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(isU'+'sed(pix))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20hdr\x20=\x20d'+'ecode(pix)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20bilatera'+'l\x20factors\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20factor\x20='+'\x20kernel[kS'+'ize\x20+\x20j]\x20*'+'\x20kernel[kS')+('ize\x20+\x20i];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fact'+'or\x20*=\x20norm'+'pdf3(hdr\x20-'+'\x20pixelHdr,'+'\x20bSigma)\x20*'+'\x20bZnorm;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ccumulate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20accu'+'mulatedHdr'+'\x20+=\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20+=\x20facto'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20finalHD'+'R\x20=\x20accumu'+'latedHdr\x20/'+'\x20accumulat'+'edFactor;\x0a'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(finalHDR,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'encodeRGBM'+'(finalHDR)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a'),rL='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0auniform\x20'+'sampler2D\x20'+'source;\x0aun'+'iform\x20vec2'+'\x20pixelOffs'+'et;\x0a\x0abool\x20'+'isUsed(vec'+'4\x20pixel)\x20{'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20an'+'y(greaterT'+'han(pixel.'+'rgb,\x20vec3('+'0.0)));\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20pixel.a'+'\x20>\x200.0;\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20c'+'\x20=\x20texture'+'2DLod(sour'+'ce,\x20vUv0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'c\x20=\x20isUsed'+'(c)\x20?\x20c\x20:\x20'+'texture2DL'+'od(source,'+'\x20vUv0\x20-\x20pi'+'xelOffset,'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20v'+'ec2(0,\x20-pi'+'xelOffset.'+'y),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(pix'+'elOffset.x'+',\x20-pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(-pixelOf'+'fset.x,\x200)'+',\x200.0);\x0a\x20\x20'+'\x20\x20c\x20=\x20isUs'+'ed(c)\x20?\x20c\x20'+':\x20texture2'+'DLod(sourc'+'e,\x20vUv0\x20+\x20'+'vec2(pixel'+'Offset.x,\x20'+'0),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(-pi'+'xelOffset.'+'x,\x20pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(0,\x20pixel'+'Offset.y),'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20p'+'ixelOffset'+',\x200.0);\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20c;\x0a'+'}\x0a',aL='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afn'+'\x20normpdf3('+'v:\x20vec3f,\x20'+'sigma:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x200.39894\x20'+'*\x20exp(-0.5'+'\x20*\x20dot(v,\x20'+'v)\x20/\x20(sigm'+'a\x20*\x20sigma)'+')\x20/\x20sigma;'+'\x0a}\x0a\x0afn\x20dec'+'odeRGBM(rg'+'bm:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20(8'+'.0\x20*\x20rgbm.'+'a)\x20*\x20rgbm.'+'rgb;\x0a\x20\x20\x20\x20r'+'eturn\x20colo'+'r\x20*\x20color;'+'\x0a}\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeRGBM'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'var\x20encode'+'d:\x20vec4f;\x0a'+'\x20\x20\x20\x20let\x20rg'+'b_processe'+('d\x20=\x20pow(co'+'lor.rgb,\x20v'+'ec3f(0.5))'+'\x20*\x20(1.0\x20/\x20'+'8.0);\x0a\x20\x20\x20\x20'+'encoded\x20=\x20'+'vec4f(rgb_'+'processed,'+'\x200.0);\x0a\x0a\x20\x20'+'\x20\x20let\x20max_'+'g_b\x20=\x20max('+'\x20encoded.g'+',\x20max(\x20enc'+'oded.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20);\x0a\x20\x20\x20\x20l'+'et\x20max_rgb'+'\x20=\x20max(\x20en'+'coded.r,\x20m'+'ax_g_b\x20);\x0a'+'\x20\x20\x20\x20encode'+'d.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20enco'+'ded.a\x20=\x20ce'+'il(encoded'+'.a\x20*\x20255.0'+')\x20/\x20255.0;'+'\x0a\x0a\x20\x20\x20\x20enco'+'ded\x20=\x20vec4'+'f(encoded.'+'rgb\x20/\x20enco'+'ded.a,\x20enc'+'oded.a);\x0a\x20'+'\x20\x20\x20return\x20'+'encoded;\x0a}'+'\x0a\x0afn\x20decod'+'e(pixel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20pixel.'+'rgb;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'decodeRGBM'+'(pixel);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a\x0afn\x20isUs'+'ed(pixel:\x20'+'vec4f)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0ava'+'r\x20source:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20sourceSam'+'pler:\x20samp'+'ler;\x0aunifo'+'rm\x20kernel:'+'\x20array<f32'+',\x20{MSIZE}>'+';\x0auniform\x20'+'pixelOffse'+'t:\x20vec2f;\x0a'+'uniform\x20si'+'gmas:\x20vec2'+'f;\x0auniform'+'\x20bZnorm:\x20f'+'32;\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20pixel\x20'+'=\x20textureS'+'ampleLevel'+'(source,\x20s'+'ourceSampl'+'er,\x20input.')+('vUv0,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'lightmap\x20s'+'pecific\x20op'+'timization'+'\x20-\x20skip\x20pi'+'xels\x20that\x20'+'were\x20not\x20b'+'aked\x0a\x20\x20\x20\x20/'+'/\x20this\x20als'+'o\x20allows\x20d'+'ilate\x20filt'+'er\x20that\x20wo'+'rk\x20on\x20the\x20'+'output\x20of\x20'+'this\x20to\x20wo'+'rk\x20correct'+'ly,\x20as\x20it\x20'+'depends\x20on'+'\x20.a\x20being\x20'+'zero\x0a\x20\x20\x20\x20/'+'/\x20to\x20dilat'+'e,\x20which\x20t'+'he\x20followi'+'ng\x20blur\x20fi'+'lter\x20would'+'\x20otherwise'+'\x20modify\x0a\x20\x20'+'\x20\x20if\x20(!isU'+'sed(pixel)'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20pix'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20range\x20sig'+'ma\x20-\x20contr'+'ols\x20blurri'+'ness\x20based'+'\x20on\x20a\x20pixe'+'l\x20distance'+'\x0a\x20\x20\x20\x20let\x20s'+'igma\x20=\x20uni'+'form.sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'let\x20bSigma'+'\x20=\x20uniform'+'.sigmas.y;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'pixelHdr\x20='+'\x20decode(pi'+'xel);\x0a\x20\x20\x20\x20'+'var\x20accumu'+'latedHdr\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20var'+'\x20accumulat'+'edFactor\x20='+'\x200.000001;'+'\x20\x20//\x20avoid'+'\x20division\x20'+'by\x20zero\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20out\x20the\x20t'+'exels\x0a\x20\x20\x20\x20'+'const\x20kSiz'+'e\x20=\x20({MSIZ'+'E}\x20-\x201)\x20/\x20'+'2;\x0a\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x20-kSiz'+'e;\x20i\x20<=\x20kS'+'ize;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(var\x20j:\x20i3'+'2\x20=\x20-kSize'+';\x20j\x20<=\x20kSi'+'ze;\x20j\x20=\x20j\x20'+'+\x201)\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20pixel\x20'+'with\x20offse'+'t\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20co'+'ord\x20=\x20inpu'+'t.vUv0\x20+\x20v'+'ec2f(f32(i')+('),\x20f32(j))'+'\x20*\x20uniform'+'.pixelOffs'+'et;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'pix\x20=\x20text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20co'+'ord,\x200.0);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x20-\x20on'+'ly\x20use\x20bak'+'ed\x20pixels\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(isUs'+'ed(pix))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20hdr\x20=\x20dec'+'ode(pix);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'bilateral\x20'+'factors\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20fa'+'ctor\x20=\x20uni'+'form.kerne'+'l[u32(kSiz'+'e\x20+\x20j)].el'+'ement\x20*\x20un'+'iform.kern'+'el[u32(kSi'+'ze\x20+\x20i)].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20factor'+'\x20=\x20factor\x20'+'*\x20normpdf3'+'(hdr\x20-\x20pix'+'elHdr,\x20bSi'+'gma)\x20*\x20uni'+'form.bZnor'+'m;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20accumul'+'ate\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'accumulate'+'dHdr\x20=\x20acc'+'umulatedHd'+'r\x20+\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20=\x20accumu'+'latedFacto'+'r\x20+\x20factor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20let'+'\x20finalHDR\x20'+'=\x20accumula'+'tedHdr\x20/\x20a'+'ccumulated'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20#if\x20HDR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalHDR,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20e'+'ncodeRGBM('+'finalHDR);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),nL='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0avar\x20so'+'urce:\x20text'+'ure_2d<f32'+'>;\x0avar\x20sou'+'rceSampler'+':\x20sampler;'+'\x0auniform\x20p'+'ixelOffset'+':\x20vec2f;\x0a\x0a'+'fn\x20isUsed('+'pixel:\x20vec'+'4f)\x20->\x20boo'+'l\x20{\x0a\x20\x20\x20\x20#i'+'fdef\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0a@fr'+'agment\x0afn\x20'+'fragmentMa'+'in(input:\x20'+'FragmentIn'+'put)\x20->\x20Fr'+'agmentOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20c:\x20vec4'+'f\x20=\x20textur'+'eSampleLev'+'el(source,'+'\x20sourceSam'+'pler,\x20inpu'+'t.vUv0,\x200.'+'0);\x0a\x20\x20\x20\x20c\x20'+'=\x20select(t'+'extureSamp'+'leLevel(so'+'urce,\x20sour'+'ceSampler,'+'\x20input.vUv'+'0\x20-\x20unifor'+'m.pixelOff'+'set,\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20-un'+'iform.pixe'+'lOffset.y)'+',\x200.0),\x20c,'+'\x20isUsed(c)'+');\x0a\x20\x20\x20\x20c\x20='+'\x20select(te'+'xtureSampl'+'eLevel(sou'+'rce,\x20sourc'+'eSampler,\x20'+'input.vUv0'+'\x20+\x20vec2f(u'+'niform.pix'+'elOffset.x'+',\x20-uniform'+'.pixelOffs'+'et.y),\x200.0'+'),\x20c,\x20isUs'+'ed(c));\x0a\x20\x20'+'\x20\x20c\x20=\x20sele'+'ct(texture'+'SampleLeve'+'l(source,\x20'+'sourceSamp'+'ler,\x20input'+'.vUv0\x20+\x20ve'+'c2f(-unifo'+'rm.pixelOf'+'fset.x,\x200.'+'0),\x200.0),\x20'+'c,\x20isUsed('+'c));\x0a\x20\x20\x20\x20c'+'\x20=\x20select('+'textureSam'+'pleLevel(s'+'ource,\x20sou'+'rceSampler'+',\x20input.vU'+'v0\x20+\x20vec2f'+'(uniform.p'+('ixelOffset'+'.x,\x200.0),\x20'+'0.0),\x20c,\x20i'+'sUsed(c));'+'\x0a\x20\x20\x20\x20c\x20=\x20s'+'elect(text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20in'+'put.vUv0\x20+'+'\x20vec2f(-un'+'iform.pixe'+'lOffset.x,'+'\x20uniform.p'+'ixelOffset'+'.y),\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20uni'+'form.pixel'+'Offset.y),'+'\x200.0),\x20c,\x20'+'isUsed(c))'+';\x0a\x20\x20\x20\x20c\x20=\x20'+'select(tex'+'tureSample'+'Level(sour'+'ce,\x20source'+'Sampler,\x20i'+'nput.vUv0\x20'+'+\x20uniform.'+'pixelOffse'+'t,\x200.0),\x20c'+',\x20isUsed(c'+'));\x0a\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20FragmentO'+'utput;\x0a\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20c;\x0a\x20'+'\x20\x20\x20return\x20'+'output;\x0a}\x0a'),Dg=0x73*0x4b+0x2*0x2f6+-0x278e,oL={'glslBilateralDeNoisePS':iL,'glslDilatePS':rL},lL={'wgslBilateralDeNoisePS':aL,'wgslDilatePS':nL};class cL{constructor(_0x4dd29e){h(this,'shaderDila'+'te',[]),h(this,'shaderDeno'+'ise',[]),(this['device']=_0x4dd29e,Pe['get'](this['device'],Fe)['add'](oL),Pe['get'](this['device'],it)['add'](lL),this['constantTe'+'xSource']=_0x4dd29e['scope']['resolve']('source'),this['constantPi'+'xelOffset']=_0x4dd29e['scope']['resolve']('pixelOffse'+'t'),this['pixelOffse'+'t']=new Float32Array(-0x704+-0x1*0x15b7+0x1cbd),this['sigmas']=null,this['constantSi'+'gmas']=null,this['kernel']=null);}['setSourceT'+'exture'](_0x75b255){this['constantTe'+'xSource']['setValue'](_0x75b255);}['prepare'](_0x496a6c,_0x363a43){this['pixelOffse'+'t'][-0x5c*-0xe+-0xc89+0x781]=(-0x2440+-0x2b*0x64+0x350d)/_0x496a6c,this['pixelOffse'+'t'][0x1*-0x1091+0x78d*-0x2+-0x1*-0x1fac]=(0x21c9+0x1737+-0x38ff*0x1)/_0x363a43,this['constantPi'+'xelOffset']['setValue'](this['pixelOffse'+'t']);}['prepareDen'+'oise'](_0x27d189,_0x1ece91,_0x27407e){const _0x1eb69c=_0x27407e?-0x1f0+-0x3ac+0x59c*0x1:0x1380+0x1*-0x225f+-0x44*-0x38;if(!this['shaderDeno'+'ise'][_0x1eb69c]){const _0x496dd6=new Map();_0x496dd6['set']('{MSIZE}',-0x1b12+-0x1*-0x111d+0xa04),_0x27407e&&_0x496dd6['set']('HDR',''),this['shaderDeno'+'ise'][_0x1eb69c]=$t['createShad'+'er'](this['device'],{'uniqueName':'lmBilatera'+'lDeNoise-'+(_0x27407e?'hdr':'rgbm'),'attributes':{'vertex_position':Me},'vertexGLSL':Pe['get'](this['device'],Fe)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Pe['get'](this['device'],it)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':Pe['get'](this['device'],Fe)['get']('glslBilate'+'ralDeNoise'+'PS'),'fragmentWGSL':Pe['get'](this['device'],it)['get']('wgslBilate'+'ralDeNoise'+'PS'),'fragmentDefines':_0x496dd6}),this['sigmas']=new Float32Array(-0x422+-0x43f+0x863),this['constantSi'+'gmas']=this['device']['scope']['resolve']('sigmas'),this['constantKe'+'rnel']=this['device']['scope']['resolve']('kernel[0]'),this['bZnorm']=this['device']['scope']['resolve']('bZnorm');}this['sigmas'][-0x2077+0x2*-0x18+0x20a7]=_0x27d189,this['sigmas'][0x161a+0xd*-0x1d+0x210*-0xa]=_0x1ece91,this['constantSi'+'gmas']['setValue'](this['sigmas']),this['evaluateDe'+'noiseUnifo'+'rms'](_0x27d189,_0x1ece91);}['getDenoise'](_0x3fbc87){const _0x1ffd48=_0x3fbc87?-0x1d*0x53+0x4b4+-0x1*-0x4b3:-0x1667*0x1+-0x34d*-0x9+0x3*-0x26f;return this['shaderDeno'+'ise'][_0x1ffd48];}['getDilate'](_0x34da3e,_0xc7c1a1){const _0x254819=_0xc7c1a1?-0x12aa+-0x7*0x291+0x24a1:0x7c*-0x2e+-0x1*-0x17e9+-0x1a0;if(!this['shaderDila'+'te'][_0x254819]){const _0x2e3faa=_0xc7c1a1?'#define\x20HD'+'R\x0a':'';this['shaderDila'+'te'][_0x254819]=$t['createShad'+'er'](_0x34da3e,{'uniqueName':'lmDilate-'+(_0xc7c1a1?'hdr':'rgbm'),'attributes':{'vertex_position':Me},'vertexGLSL':Pe['get'](this['device'],Fe)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Pe['get'](this['device'],it)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':_0x2e3faa+Pe['get'](this['device'],Fe)['get']('glslDilate'+'PS'),'fragmentWGSL':_0x2e3faa+Pe['get'](this['device'],it)['get']('wgslDilate'+'PS')});}return this['shaderDila'+'te'][_0x254819];}['evaluateDe'+'noiseUnifo'+'rms'](_0x5c6594,_0xa8cbdf){function _0x295892(_0x2680f8,_0x1bfb28){return(-0x2190+-0x1*0x2623+0x47b3+0.39894)*Math['exp'](-(-0x1*-0x185a+0x4b*0x53+-0x30ab+0.5)*_0x2680f8*_0x2680f8/(_0x1bfb28*_0x1bfb28))/_0x1bfb28;}this['kernel']=this['kernel']||new Float32Array(Dg);const _0x5992da=this['kernel'],_0x36f094=Math['floor']((Dg-(-0xc87+-0x1*-0x1823+-0xb9b))/(0x17ef+0xee0+0x26cd*-0x1));for(let _0x5e5ee9=-0x1*0x15f2+0xde1+0x811;_0x5e5ee9<=_0x36f094;++_0x5e5ee9){const _0x41a909=_0x295892(_0x5e5ee9,_0x5c6594);_0x5992da[_0x36f094+_0x5e5ee9]=_0x41a909,_0x5992da[_0x36f094-_0x5e5ee9]=_0x41a909;}this['constantKe'+'rnel']['setValue'](this['kernel']);const _0x42f4c5=(0xfb1+0x967+-0x1917)/_0x295892(-0xbb2+0x1b11+-0x1*0xf5f,_0xa8cbdf);this['bZnorm']['setValue'](_0x42f4c5);}}class hL extends ys{constructor(_0x30d43d,_0x5e4238,_0x33fc41,_0x59fdaa,_0x569903,_0x57334a){super(_0x30d43d),h(this,'viewBindGr'+'oups',[]),(this['renderer']=_0x5e4238,this['camera']=_0x33fc41,this['worldClust'+'ers']=_0x59fdaa,this['receivers']=_0x569903,this['lightArray']=_0x57334a);}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x406d98=>{_0x406d98['defaultUni'+'formBuffer']['destroy'](),_0x406d98['destroy']();}),this['viewBindGr'+'oups']['length']=0x153c+-0x1a65+0x529;}['execute'](){const _0x292b37=this['device'];Q['pushGpuMar'+'ker'](_0x292b37,'Lightmappe'+'r');const {renderer:_0x3e3ef0,camera:_0x214931,receivers:_0x4f974c,renderTarget:_0x2af3a2,worldClusters:_0x4e835d,lightArray:_0x4140e1}=this;_0x3e3ef0['renderForw'+'ardLayer'](_0x214931,_0x2af3a2,null,void(0x1127+-0x27a*-0xb+-0x8e1*0x5),Aa,this['viewBindGr'+'oups'],{'meshInstances':_0x4f974c,'splitLights':_0x4140e1,'lightClusters':_0x4e835d}),Q['popGpuMark'+'er'](_0x292b37);}}const dL=0xb*0x185+-0x1e8f+0x3a4*0x6,fL=0x9dd+0x1*-0xcfe+0x59*0x9,uL=0x19b*-0x1+0x11b*-0x3+0x4ed,xc=new D();class pL{constructor(_0x255713,_0x2afac5,_0x16b7fb,_0x5ea529,_0x27ea25){this['device']=_0x255713,this['root']=_0x2afac5,this['scene']=_0x16b7fb,this['renderer']=_0x5ea529,this['assets']=_0x27ea25,this['shadowMapC'+'ache']=_0x5ea529['shadowMapC'+'ache'],this['_tempSet']=new Set(),this['_initCalle'+'d']=!(0x3*0x5c1+-0x1f+-0x1123),this['passMateri'+'als']=[],this['ambientAOM'+'aterial']=null,this['fog']='',this['ambientLig'+'ht']=new ie(),this['renderTarg'+'ets']=new Map(),this['stats']={'renderPasses':0x0,'lightmapCount':0x0,'totalRenderTime':0x0,'forwardTime':0x0,'fboTime':0x0,'shadowMapTime':0x0,'compileTime':0x0,'shadersLinked':0x0};}['destroy'](){var _0x658a59;zi['decRef'](this['blackTex']),this['blackTex']=null,zi['destroy'](),this['device']=null,this['root']=null,this['scene']=null,this['renderer']=null,this['assets']=null,(_0x658a59=this['camera'])==null||_0x658a59['destroy'](),this['camera']=null;}['initBake'](_0x1eb856){if(this['bakeHDR']=this['scene']['lightmapPi'+'xelFormat']!==Ne,!this['_initCalle'+'d']){this['_initCalle'+'d']=!(0x48f+-0x2*-0x107b+0x781*-0x5),this['lightmapFi'+'lters']=new cL(_0x1eb856),this['constantBa'+'keDir']=_0x1eb856['scope']['resolve']('bakeDir'),this['materials']=[],this['blackTex']=new _e(this['device'],{'width':0x4,'height':0x4,'format':Ne,'type':Zi,'name':'lightmapBl'+'ack'}),zi['incRef'](this['blackTex']);const _0x166bfc=new Fl();_0x166bfc['clearColor']['set'](0x2484+0x10fe+-0x9*0x5f2,0xadb+-0x2*0x217+-0x6ad*0x1,-0x120a*0x2+-0x250e+0x4922*0x1,-0x159b+-0xd43*-0x1+0x858),_0x166bfc['clearColor'+'Buffer']=!(-0x1abe+0x17a3+0x5*0x9f),_0x166bfc['clearDepth'+'Buffer']=!(0x22a0+-0xa*0x14+-0x21d7),_0x166bfc['clearStenc'+'ilBuffer']=!(0x23c1+0x2*0xa15+0x2*-0x1bf5),_0x166bfc['frustumCul'+'ling']=!(-0x1439+-0x1d26+-0x2*-0x18b0),_0x166bfc['projection']=En,_0x166bfc['aspectRati'+'o']=-0x267f+0x1a07+0xc79,_0x166bfc['node']=new Ie(),this['camera']=_0x166bfc,this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=Ll,this['camera']['shaderPara'+'ms']['toneMappin'+'g']=sm;}if(this['scene']['clusteredL'+'ightingEna'+'bled']){const _0x344367=new Mv(_0x1eb856['supportsAr'+'eaLights'],_0x1eb856['maxTexture'+'Size'],()=>{});this['lightingPa'+'rams']=_0x344367;const _0x51f48c=this['scene']['lighting'];_0x344367['shadowsEna'+'bled']=_0x51f48c['shadowsEna'+'bled'],_0x344367['shadowAtla'+'sResolutio'+'n']=_0x51f48c['shadowAtla'+'sResolutio'+'n'],_0x344367['cookiesEna'+'bled']=_0x51f48c['cookiesEna'+'bled'],_0x344367['cookieAtla'+'sResolutio'+'n']=_0x51f48c['cookieAtla'+'sResolutio'+'n'],_0x344367['areaLights'+'Enabled']=_0x51f48c['areaLights'+'Enabled'],_0x344367['cells']=new D(0x28*0x86+0x22f5+0x1*-0x37e2,0x1648+-0x5*-0xfb+0x94*-0x2f,0x2363+-0x13db+-0xf85),_0x344367['maxLightsP'+'erCell']=-0xb3*0x1d+0x4*0x8ad+-0x20f*0x7,this['worldClust'+'ers']=new cu(_0x1eb856),this['worldClust'+'ers']['name']='ClusterLig'+'htmapper';}}['finishBake'](_0xf81735){this['materials']=[];function _0x54ff5b(_0xafa9be){zi['decRef'](_0xafa9be['colorBuffe'+'r']),_0xafa9be['destroy']();}this['renderTarg'+'ets']['forEach'](_0x31b051=>{_0x54ff5b(_0x31b051);}),this['renderTarg'+'ets']['clear'](),_0xf81735['forEach'](_0x1178d1=>{_0x1178d1['renderTarg'+'ets']['forEach'](_0x5b3af9=>{_0x54ff5b(_0x5b3af9);}),_0x1178d1['renderTarg'+'ets']['length']=-0x106f+0x2618+-0x15a9;}),this['ambientAOM'+'aterial']=null,this['worldClust'+'ers']&&(this['worldClust'+'ers']['destroy'](),this['worldClust'+'ers']=null);}['createMate'+'rialForPas'+'s'](_0x569bf0,_0x726509,_0x3a2e65){const _0x536cdb=new Ut();return _0x536cdb['name']='lmMaterial'+'-pass:'+_0x726509+'-ambient:'+_0x3a2e65,_0x536cdb['setDefine']('UV1LAYOUT',''),_0x536cdb['setDefine']('LIT_LIGHTM'+'AP_BAKING',''),_0x726509===fL?(_0x536cdb['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'COLOR',''),_0x3a2e65?_0x536cdb['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'ADD_AMBIEN'+'T',''):_0x536cdb['ambient']=new ie(-0x1fc4+-0x4*-0x440+0xec4,0x17*0x14b+-0x56*-0x51+-0x3d*0xef,-0x2*-0xcf2+-0x1*-0x206+-0x3*0x94e),this['bakeHDR']||_0x536cdb['setDefine']('LIGHTMAP_R'+'GBM',''),_0x536cdb['lightMap']=this['blackTex']):(_0x536cdb['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'DIR',''),_0x536cdb['setDefine']('STD_LIGHTM'+'AP_DIR','')),_0x536cdb['cull']=bt,_0x536cdb['forceUv1']=!(0x23c6+-0x1a87*-0x1+0x1*-0x3e4d),_0x536cdb['update'](),_0x536cdb;}['createMate'+'rials'](_0x4852aa,_0x53bc77,_0x22c3bb){for(let _0x4d80e1=-0x2d*-0xda+0xec7+-0x45*0xc5;_0x4d80e1<_0x22c3bb;_0x4d80e1++)this['passMateri'+'als'][_0x4d80e1]||(this['passMateri'+'als'][_0x4d80e1]=this['createMate'+'rialForPas'+'s'](_0x53bc77,_0x4d80e1,!(-0x1c9b+0x26f0+-0xa54)));this['ambientAOM'+'aterial']||(this['ambientAOM'+'aterial']=this['createMate'+'rialForPas'+'s'](_0x53bc77,0x37*0x3a+-0xa0+-0x1f9*0x6,!(0xd*-0x83+-0x56e*0x3+0x347*0x7)),this['ambientAOM'+'aterial']['onUpdateSh'+'ader']=function(_0x1152c9){return _0x1152c9['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(-0x221e+-0x43*-0x2d+0x1657),_0x1152c9['litOptions']['separateAm'+'bient']=!(0x994+-0x8bb+-0xd9),_0x1152c9;});}['createText'+'ure'](_0x258615,_0x3510d8){return new _e(this['device'],{'profilerHint':vy,'width':_0x258615,'height':_0x258615,'format':this['scene']['lightmapPi'+'xelFormat'],'mipmaps':!(0xe5e+-0xa3e*-0x1+-0x189b),'type':this['bakeHDR']?Ds:Zi,'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x3510d8});}['collectMod'+'els'](_0x5e35eb,_0x24da8,_0x4974be){var _0x2782d5,_0x1bfdab,_0x1ecac0;if(!_0x5e35eb['enabled'])return;let _0x14a790;if((_0x2782d5=_0x5e35eb['model'])!=null&&_0x2782d5['model']&&((_0x1bfdab=_0x5e35eb['model'])!=null&&_0x1bfdab['enabled'])&&(_0x4974be&&_0x4974be['push'](new vc(_0x5e35eb)),_0x5e35eb['model']['lightmappe'+'d']&&_0x24da8&&(_0x14a790=_0x5e35eb['model']['model']['meshInstan'+'ces'])),(_0x1ecac0=_0x5e35eb['render'])!=null&&_0x1ecac0['enabled']&&(_0x4974be&&_0x4974be['push'](new vc(_0x5e35eb)),_0x5e35eb['render']['lightmappe'+'d']&&_0x24da8&&(_0x14a790=_0x5e35eb['render']['meshInstan'+'ces'])),_0x14a790){let _0x36eb05=!(0x5bc+0x8*0x1c+0xbc*-0x9);for(let _0x4e0814=-0x239+0xf9e+-0xd65;_0x4e0814<_0x14a790['length'];_0x4e0814++)if(!_0x14a790[_0x4e0814]['mesh']['vertexBuff'+'er']['format']['hasUv1']){w['log']('Lightmappe'+'r\x20-\x20node\x20['+_0x5e35eb['name']+(']\x20contains'+'\x20meshes\x20wi'+'thout\x20requ'+'ired\x20uv1,\x20'+'excluding\x20'+'it\x20from\x20ba'+'king.')),_0x36eb05=!(0x1336*0x1+-0xb66+-0x7cf*0x1);break;}if(_0x36eb05){const _0x208d33=[];for(let _0x36d910=0x14f+-0xd01*0x3+0x25b4;_0x36d910<_0x14a790['length'];_0x36d910++){const _0x1cd0ee=_0x14a790[_0x36d910]['mesh'];this['_tempSet']['has'](_0x1cd0ee)?_0x24da8['push'](new vc(_0x5e35eb,[_0x14a790[_0x36d910]])):_0x208d33['push'](_0x14a790[_0x36d910]),this['_tempSet']['add'](_0x1cd0ee);}this['_tempSet']['clear'](),_0x208d33['length']>-0xcb*0x1b+-0x45*0x70+0x6f*0x77&&_0x24da8['push'](new vc(_0x5e35eb,_0x208d33));}}for(let _0x5f0639=-0x5d6+0x49*-0x15+0xbd3;_0x5f0639<_0x5e35eb['_children']['length'];_0x5f0639++)this['collectMod'+'els'](_0x5e35eb['_children'][_0x5f0639],_0x24da8,_0x4974be);}['prepareSha'+'dowCasters'](_0x234c6b){const _0x333932=[];for(let _0x10c86b=-0x611*0x1+-0x3a5+-0xe2*-0xb;_0x10c86b<_0x234c6b['length'];_0x10c86b++){const _0x3c1a57=_0x234c6b[_0x10c86b]['component'];if(_0x3c1a57['castShadow'+'s']=_0x3c1a57['castShadow'+'sLightmap'],_0x3c1a57['castShadow'+'sLightmap']){const _0x5a6ec6=_0x234c6b[_0x10c86b]['meshInstan'+'ces'];for(let _0x4404b3=-0x1345+-0x4aa+0x22d*0xb;_0x4404b3<_0x5a6ec6['length'];_0x4404b3++)_0x5a6ec6[_0x4404b3]['visibleThi'+'sFrame']=!(-0x34f*-0x6+0x2205+-0x1*0x35df),_0x333932['push'](_0x5a6ec6[_0x4404b3]);}}return _0x333932;}['updateTran'+'sforms'](_0x3f2047){for(let _0x107494=0x1*-0x1204+-0x1*0x635+0x1839;_0x107494<_0x3f2047['length'];_0x107494++){const _0x36de4d=_0x3f2047[_0x107494]['meshInstan'+'ces'];for(let _0x409c1d=0x2221+0x22c3+-0x44e4;_0x409c1d<_0x36de4d['length'];_0x409c1d++)_0x36de4d[_0x409c1d]['node']['getWorldTr'+'ansform']();}}['calculateL'+'ightmapSiz'+'e'](_0x2765d5){let _0x5bf27e;const _0xd870fc=this['scene']['lightmapSi'+'zeMultipli'+'er']||-0xa33+-0x5bf*-0x6+0x1837*-0x1,_0x17b689=xc;let _0x2a62dc,_0x1e12ed;_0x2765d5['model']?(_0x1e12ed=_0x2765d5['model']['lightmapSi'+'zeMultipli'+'er'],_0x2765d5['model']['asset']?(_0x5bf27e=this['assets']['get'](_0x2765d5['model']['asset'])['data'],_0x5bf27e['area']&&(_0x2a62dc=_0x5bf27e['area'])):_0x2765d5['model']['_area']&&(_0x5bf27e=_0x2765d5['model'],_0x5bf27e['_area']&&(_0x2a62dc=_0x5bf27e['_area']))):_0x2765d5['render']&&(_0x1e12ed=_0x2765d5['render']['lightmapSi'+'zeMultipli'+'er'],_0x2765d5['render']['type']!=='asset'&&_0x2765d5['render']['_area']&&(_0x5bf27e=_0x2765d5['render'],_0x5bf27e['_area']&&(_0x2a62dc=_0x5bf27e['_area'])));const _0x41e6e0={'x':0x1,'y':0x1,'z':0x1,'uv':0x1};_0x2a62dc&&(_0x41e6e0['x']=_0x2a62dc['x'],_0x41e6e0['y']=_0x2a62dc['y'],_0x41e6e0['z']=_0x2a62dc['z'],_0x41e6e0['uv']=_0x2a62dc['uv']);const _0x3a5af4=_0x1e12ed||0x13ea+0x2172+-0x355b*0x1;_0x41e6e0['x']*=_0x3a5af4,_0x41e6e0['y']*=_0x3a5af4,_0x41e6e0['z']*=_0x3a5af4;const _0x155b57=_0x2765d5['render']||_0x2765d5['model'],_0x23efe7=this['computeNod'+'eBounds'](_0x155b57['meshInstan'+'ces']);_0x17b689['copy'](_0x23efe7['halfExtent'+'s']);let _0x1301d4=_0x41e6e0['x']*_0x17b689['y']*_0x17b689['z']+_0x41e6e0['y']*_0x17b689['x']*_0x17b689['z']+_0x41e6e0['z']*_0x17b689['x']*_0x17b689['y'];return _0x1301d4/=_0x41e6e0['uv'],_0x1301d4=Math['sqrt'](_0x1301d4),Math['min'](Y['nextPowerO'+'fTwo'](_0x1301d4*_0xd870fc),this['scene']['lightmapMa'+'xResolutio'+'n']||dL);}['setLightma'+'pping'](_0x419294,_0x3caeac,_0x1e2a92,_0x387f64){for(let _0xfb5e0=-0xe*0x6d+-0x1b6*0x14+0x282e;_0xfb5e0<_0x419294['length'];_0xfb5e0++){const _0x1340cf=_0x419294[_0xfb5e0],_0x5f12a8=_0x1340cf['meshInstan'+'ces'];for(let _0x59caa1=-0x3*0x1e8+-0x978+0xf30;_0x59caa1<_0x5f12a8['length'];_0x59caa1++){const _0x7d311c=_0x5f12a8[_0x59caa1];if(_0x7d311c['setLightma'+'pped'](_0x3caeac),_0x3caeac){_0x387f64&&(_0x7d311c['_shaderDef'+'s']|=_0x387f64),_0x7d311c['mask']=di;for(let _0x140622=0x9*-0x3a3+-0x14a3+0x12*0x2f7;_0x140622<_0x1e2a92;_0x140622++){const _0x35f58c=_0x1340cf['renderTarg'+'ets'][_0x140622]['colorBuffe'+'r'];_0x35f58c['minFilter']=vt,_0x35f58c['magFilter']=vt,_0x7d311c['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][_0x140622],_0x35f58c);}}}}}['bake'](_0x50de64,_0x1e5a79=jc){const _0x48ee9d=this['device'],_0x2237c2=de();this['scene']['_updateSky'+'Mesh'](),_0x48ee9d['fire']('lightmappe'+'r:start',{'timestamp':_0x2237c2,'target':this}),this['stats']['renderPass'+'es']=0x1eb*-0xd+-0x224+0x1d*0xef,this['stats']['shadowMapT'+'ime']=-0xacf*0x1+0x646+-0x3*-0x183,this['stats']['forwardTim'+'e']=-0x7b2*-0x2+0x1341*-0x1+0x1*0x3dd;const _0x297b6b=_0x48ee9d['_shaderSta'+'ts']['linked'],_0x18bc0c=_0x48ee9d['_renderTar'+'getCreatio'+'nTime'],_0x109f47=_0x48ee9d['_shaderSta'+'ts']['compileTim'+'e'],_0x5ca9d4=[],_0x225240=[];if(_0x50de64){for(let _0x482c27=0x2*-0x2b+-0xc25+0x163*0x9;_0x482c27<_0x50de64['length'];_0x482c27++)this['collectMod'+'els'](_0x50de64[_0x482c27],_0x5ca9d4,null);this['collectMod'+'els'](this['root'],null,_0x225240);}else this['collectMod'+'els'](this['root'],_0x5ca9d4,_0x225240);if(Q['pushGpuMar'+'ker'](this['device'],'LMBake'),_0x5ca9d4['length']>0x1f81*-0x1+0x3e6*0x5+0xc03){this['renderer']['shadowRend'+'erer']['frameUpdat'+'e']();const _0x5da94f=_0x1e5a79===jc?-0x1ce1+-0xaf0+0x27d3:-0x1*0x8a1+-0x2d7*0x3+0x1127;this['setLightma'+'pping'](_0x5ca9d4,!(-0x1*0x1aff+-0x4aa+0x1faa*0x1),_0x5da94f),this['initBake'](_0x48ee9d),this['bakeIntern'+'al'](_0x5da94f,_0x5ca9d4,_0x225240);let _0x59138f=ou;_0x1e5a79===jc&&(_0x59138f|=uv),this['scene']['ambientBak'+'e']&&(_0x59138f|=pv),this['setLightma'+'pping'](_0x5ca9d4,!(-0x270a+-0x16f7+0x3e01),_0x5da94f,_0x59138f),this['finishBake'](_0x5ca9d4);}Q['popGpuMark'+'er'](this['device']);const _0x11207c=de();this['stats']['totalRende'+'rTime']=_0x11207c-_0x2237c2,this['stats']['shadersLin'+'ked']=_0x48ee9d['_shaderSta'+'ts']['linked']-_0x297b6b,this['stats']['compileTim'+'e']=_0x48ee9d['_shaderSta'+'ts']['compileTim'+'e']-_0x109f47,this['stats']['fboTime']=_0x48ee9d['_renderTar'+'getCreatio'+'nTime']-_0x18bc0c,this['stats']['lightmapCo'+'unt']=_0x5ca9d4['length'],_0x48ee9d['fire']('lightmappe'+'r:end',{'timestamp':_0x11207c,'target':this});}['allocateTe'+'xtures'](_0x27d3ee,_0x5cfea4){for(let _0x2e8e05=0x4*0x3bc+-0x5b1*-0x5+-0x2b65;_0x2e8e05<_0x27d3ee['length'];_0x2e8e05++){const _0x5966b3=_0x27d3ee[_0x2e8e05],_0x5413cf=this['calculateL'+'ightmapSiz'+'e'](_0x5966b3['node']);for(let _0x1952eb=0x269f+-0x1bc4+-0xadb;_0x1952eb<_0x5cfea4;_0x1952eb++){const _0x36abe1=this['createText'+'ure'](_0x5413cf,'lightmappe'+'r_lightmap'+'_'+_0x2e8e05);zi['incRef'](_0x36abe1),_0x5966b3['renderTarg'+'ets'][_0x1952eb]=new gt({'colorBuffer':_0x36abe1,'depth':!(-0x1*-0x789+-0x20d2+0x194a)});}if(!this['renderTarg'+'ets']['has'](_0x5413cf)){const _0xd574=this['createText'+'ure'](_0x5413cf,'lightmappe'+'r_temp_lig'+'htmap_'+_0x5413cf);zi['incRef'](_0xd574),this['renderTarg'+'ets']['set'](_0x5413cf,new gt({'colorBuffer':_0xd574,'depth':!(0x2276+-0x2066+0x11*-0x1f)}));}}}['prepareLig'+'htsToBake'](_0x3cb8ed,_0x274286){if(this['scene']['ambientBak'+'e']){const _0x307cff=new Mg(this);_0x274286['push'](_0x307cff);}const _0x5bc964=this['renderer']['lights'];for(let _0x353154=0x1f*-0x8f+-0x23c1+0x3512;_0x353154<_0x5bc964['length'];_0x353154++){const _0x20f0cf=_0x5bc964[_0x353154],_0x216ed1=new sL(this,_0x20f0cf);_0x3cb8ed['push'](_0x216ed1),_0x20f0cf['enabled']&&(_0x20f0cf['mask']&fi)!==0xec+0xa7e+-0xb6a&&(_0x20f0cf['mask']=fi|di|Ss,_0x20f0cf['shadowUpda'+'teMode']=_0x20f0cf['type']===ve?lm:xr,_0x274286['push'](_0x216ed1));}_0x274286['sort']();}['restoreLig'+'hts'](_0x542787){for(let _0x13ee3a=0x572+-0x1c*0x101+-0x2*-0xb55;_0x13ee3a<_0x542787['length'];_0x13ee3a++)_0x542787[_0x13ee3a]['restore']();}['setupScene'](){this['ambientLig'+'ht']['copy'](this['scene']['ambientLig'+'ht']),this['scene']['ambientBak'+'e']||this['scene']['ambientLig'+'ht']['set'](-0xbc1+0xd03*0x1+-0x142,-0xe*-0x115+-0xe*0x18f+0x6ac,-0x18d7*0x1+-0x1a93+-0x2*-0x19b5),this['renderer']['setSceneCo'+'nstants'](),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Contrast')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Contrast']),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Brightness')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Brightness']);}['restoreSce'+'ne'](){this['scene']['ambientLig'+'ht']['copy'](this['ambientLig'+'ht']);}['computeNod'+'eBounds'](_0x3b1d31){const _0x218f60=new De();if(_0x3b1d31['length']>-0x99c*0x2+0x1851+-0x519){_0x218f60['copy'](_0x3b1d31[-0xc13+0x1*-0x1f97+0xe8e*0x3]['aabb']);for(let _0x5838c7=-0x193e+0x209d+-0x75e;_0x5838c7<_0x3b1d31['length'];_0x5838c7++)_0x218f60['add'](_0x3b1d31[_0x5838c7]['aabb']);}return _0x218f60;}['computeNod'+'esBounds'](_0x44563f){for(let _0x439e46=-0x1708+0x6*0x1+0xb81*0x2;_0x439e46<_0x44563f['length'];_0x439e46++){const _0x2a59eb=_0x44563f[_0x439e46]['meshInstan'+'ces'];_0x44563f[_0x439e46]['bounds']=this['computeNod'+'eBounds'](_0x2a59eb);}}['computeBou'+'nds'](_0x1e25a7){const _0x2e6c69=new De();for(let _0x4aba0b=-0x185b+-0x161c+0x2e77;_0x4aba0b<_0x1e25a7['length'];_0x4aba0b++){_0x2e6c69['copy'](_0x1e25a7[0xe9b+0x258b+-0x19*0x216]['aabb']);for(let _0xda9e72=0x1f52+-0xc2b*0x1+-0x39*0x56;_0xda9e72<_0x1e25a7['length'];_0xda9e72++)_0x2e6c69['add'](_0x1e25a7[_0xda9e72]['aabb']);}return _0x2e6c69;}['backupMate'+'rials'](_0x26fa03){for(let _0x5867b6=-0x345+0x1c*-0x5c+0xd55;_0x5867b6<_0x26fa03['length'];_0x5867b6++)this['materials'][_0x5867b6]=_0x26fa03[_0x5867b6]['material'];}['restoreMat'+'erials'](_0x4922d9){for(let _0x5d9404=-0x6e2*-0x5+0x15fa*-0x1+-0x4*0x31c;_0x5d9404<_0x4922d9['length'];_0x5d9404++)_0x4922d9[_0x5d9404]['material']=this['materials'][_0x5d9404];}['lightCamer'+'aPrepare'](_0x28a6c4,_0x53b199){const _0x4c7773=_0x53b199['light'];let _0x5c1243;return _0x4c7773['type']===Ze&&(_0x5c1243=_0x4c7773['getRenderD'+'ata'](null,-0x1*-0x1957+-0x1b*-0x141+-0x3b32)['shadowCame'+'ra'],_0x5c1243['_node']['setPositio'+'n'](_0x4c7773['_node']['getPositio'+'n']()),_0x5c1243['_node']['setRotatio'+'n'](_0x4c7773['_node']['getRotatio'+'n']()),_0x5c1243['_node']['rotateLoca'+'l'](-(-0x2*0x6c1+-0x193*-0x4+-0x58*-0x16),0x6e*0x3a+0x35*-0x1e+0x5*-0x3be,-0x6aa+-0x65*0x53+0x2769),_0x5c1243['projection']=ni,_0x5c1243['nearClip']=_0x4c7773['attenuatio'+'nEnd']/(-0x4*0x62f+-0x2057+0x3cfb),_0x5c1243['farClip']=_0x4c7773['attenuatio'+'nEnd'],_0x5c1243['aspectRati'+'o']=-0x2436+-0xc8*-0x27+-0x5bf*-0x1,_0x5c1243['fov']=_0x4c7773['_outerCone'+'Angle']*(-0xa59+0x397+0x6c4),this['renderer']['updateCame'+'raFrustum'](_0x5c1243)),_0x5c1243;}['lightCamer'+'aPrepareAn'+'dCull'](_0x26f149,_0x1a2836,_0x4c8bd9,_0x212a5f){const _0x347601=_0x26f149['light'];let _0x2cc50b=!(-0x26d6+-0x1*0x1156+0x382c);if(_0x347601['type']===ve){xc['copy'](_0x212a5f['center']),xc['y']+=_0x212a5f['halfExtent'+'s']['y'],this['camera']['node']['setPositio'+'n'](xc),this['camera']['node']['setEulerAn'+'gles'](-(0x152b*-0x1+-0x698+0x1c1d),-0x19cb+-0x1c5d+0x3628,0xd*0xdf+0x58*0x5+-0xd0b),this['camera']['nearClip']=-0x2197*-0x1+-0x2584+0x3ed,this['camera']['farClip']=_0x212a5f['halfExtent'+'s']['y']*(-0x50*0x76+0x1*-0x1dc+-0x26*-0x105);const _0x1969c3=Math['max'](_0x212a5f['halfExtent'+'s']['x'],_0x212a5f['halfExtent'+'s']['z']);this['camera']['orthoHeigh'+'t']=_0x1969c3;}else _0x26f149['lightBound'+'s']['intersects'](_0x1a2836['bounds'])||(_0x2cc50b=!(-0x1f1c+0x5*-0x3f5+0x2*0x1973));if(_0x347601['type']===Ze){let _0x320ce4=!(-0x1420+0x13c0+0x61*0x1);const _0x59b307=_0x1a2836['meshInstan'+'ces'];for(let _0x5f4f68=0x1d57+0x2022+-0x3d79;_0x5f4f68<_0x59b307['length'];_0x5f4f68++)if(_0x59b307[_0x5f4f68]['_isVisible'](_0x4c8bd9)){_0x320ce4=!(0x38*-0x5f+0x19*0x1d+0x5*0x397);break;}_0x320ce4||(_0x2cc50b=!(0x1b89+0x2c0+0x1c8*-0x11));}return _0x2cc50b;}['setupLight'+'Array'](_0x5e5059,_0xd4f5be){_0x5e5059[ve]['length']=0x26b5+-0x192f+0xd86*-0x1,_0x5e5059[Ke]['length']=0x4d7+-0x742*-0x1+-0xc19,_0x5e5059[Ze]['length']=-0x20b9+-0x10e6*-0x2+-0x113,_0x5e5059[_0xd4f5be['type']][-0x9f*-0x19+-0x1*0x2393+-0x503*-0x4]=_0xd4f5be,_0xd4f5be['visibleThi'+'sFrame']=!(-0x1251+0x5c0*-0x3+0x2391);}['renderShad'+'owMap'](_0x1950a1,_0x1a5e39,_0x336382,_0xdbe751){const _0x520642=_0xdbe751['light'],_0x41f659=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x108f23=_0x520642['castShadow'+'s']&&(!_0x41f659||this['scene']['lighting']['shadowsEna'+'bled']);if(!_0x1a5e39&&_0x108f23){if(!_0x520642['shadowMap']&&!_0x41f659&&(_0x520642['shadowMap']=this['shadowMapC'+'ache']['get'](this['device'],_0x520642)),_0x520642['type']===ve){this['renderer']['_shadowRen'+'dererDirec'+'tional']['cull'](_0x520642,_0x1950a1,this['camera'],_0x336382);const _0x1857a1=this['renderer']['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x520642,this['camera']);_0x1857a1==null||_0x1857a1['render']();}else{if(this['device']['isWebGPU'])return w['warnOnce']('Lightmappe'+'r\x20on\x20WebGP'+'U\x20does\x20not'+'\x20yet\x20suppo'+'rt\x20spot\x20an'+'d\x20omni\x20sha'+'dows.'),!(0x192f+0x1cdf+-0x4a*0xbb);this['renderer']['_shadowRen'+'dererLocal']['cull'](_0x520642,_0x1950a1,_0x336382),this['renderer']['shadowRend'+'erer']['render'](_0x520642,this['camera'],!(-0x1462+-0x1*-0x1f9d+-0x1*0xb3a));}}return!(-0x1588+-0x22cf+0x1*0x3857);}['postproces'+'sTextures'](_0xd58af0,_0x99aaa,_0x237c21){const _0x1f239e=this['lightmapFi'+'lters']['getDilate'](_0xd58af0,this['bakeHDR']);let _0x59c832;const _0x186e1c=this['scene']['lightmapFi'+'lterEnable'+'d'];_0x186e1c&&(this['lightmapFi'+'lters']['prepareDen'+'oise'](this['scene']['lightmapFi'+'lterRange'],this['scene']['lightmapFi'+'lterSmooth'+'ness'],this['bakeHDR']),_0x59c832=this['lightmapFi'+'lters']['getDenoise'](this['bakeHDR'])),_0xd58af0['setBlendSt'+'ate'](pt['NOBLEND']),_0xd58af0['setDepthSt'+'ate'](Yt['NODEPTH']),_0xd58af0['setStencil'+'State'](null,null);for(let _0xa40e07=0x7*-0x1d9+-0x1*-0x9ef+0x300;_0xa40e07<_0x99aaa['length'];_0xa40e07++){const _0x448f52=_0x99aaa[_0xa40e07];Q['pushGpuMar'+'ker'](this['device'],'LMPost:'+_0xa40e07);for(let _0x582dfe=-0x4*0x832+0x1*0x18be+0x80a;_0x582dfe<_0x237c21;_0x582dfe++){const _0x3f7f28=_0x448f52['renderTarg'+'ets'][_0x582dfe],_0x655a7d=_0x3f7f28['colorBuffe'+'r'],_0x35fa0e=this['renderTarg'+'ets']['get'](_0x655a7d['width']),_0x62f7d2=_0x35fa0e['colorBuffe'+'r'];this['lightmapFi'+'lters']['prepare'](_0x655a7d['width'],_0x655a7d['height']);for(let _0x5a6d79=-0x10bf+-0x1e5a+0x2f19;_0x5a6d79<-0x1b5+-0x343*0x3+0xb7f;_0x5a6d79++)this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x655a7d),Ar(_0xd58af0,_0x35fa0e,_0x186e1c&&_0x582dfe===-0x1*-0x3e0+0x1a95+-0x1e75&&_0x5a6d79===0xe8f*0x1+0x1845+0x163*-0x1c?_0x59c832:_0x1f239e),this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x62f7d2),Ar(_0xd58af0,_0x3f7f28,_0x1f239e);}Q['popGpuMark'+'er'](this['device']);}}['bakeIntern'+'al'](_0x13f2c3,_0x29a497,_0x485894){const _0x403844=this['scene'],_0x304c85=_0x403844['layers'],_0x45b84a=this['device'],_0x10ccdb=_0x403844['clusteredL'+'ightingEna'+'bled'];this['createMate'+'rials'](_0x45b84a,_0x403844,_0x13f2c3),this['setupScene'](),_0x304c85['_update'](),this['computeNod'+'esBounds'](_0x29a497),this['allocateTe'+'xtures'](_0x29a497,_0x13f2c3),this['renderer']['collectLig'+'hts'](_0x304c85);const _0x117570=[],_0x33f4a5=[];this['prepareLig'+'htsToBake'](_0x117570,_0x33f4a5),this['updateTran'+'sforms'](_0x485894);const _0x343f7d=this['prepareSha'+'dowCasters'](_0x485894);this['renderer']['updateCpuS'+'kinMatrice'+'s'](_0x343f7d),this['renderer']['gpuUpdate'](_0x343f7d);const _0x2cc6e8=this['computeBou'+'nds'](_0x343f7d);let _0x3aaecd,_0x42b24f,_0x527fb3,_0x2759d4;for(_0x3aaecd=0xc6d+-0x15f7+0x98a;_0x3aaecd<_0x29a497['length'];_0x3aaecd++)for(_0x527fb3=_0x29a497[_0x3aaecd]['meshInstan'+'ces'],_0x42b24f=-0x1c6+-0x1*-0x16f1+-0x152b;_0x42b24f<_0x527fb3['length'];_0x42b24f++)_0x2759d4=_0x527fb3[_0x42b24f],_0x2759d4['setLightma'+'pped'](!(0x29*-0x6d+0x1d1a+-0xba4)),_0x2759d4['mask']=fi,_0x2759d4['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][0xa82*0x2+0x214f+-0x3653],this['blackTex']),_0x2759d4['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][-0x16c3*-0x1+0x414+0x1ca*-0xf],this['blackTex']);for(_0x42b24f=0x395*-0x5+0x5*-0x7c3+0x38b8;_0x42b24f<_0x33f4a5['length'];_0x42b24f++)_0x33f4a5[_0x42b24f]['light']['enabled']=!(-0x1b52+-0x21b+0x1d6e);const _0x40c0ca=[[],[],[]];let _0x123a89,_0x35cfae,_0x26f604=!(-0x5*0x32f+0x152d+-0x541);for(_0x3aaecd=0xa23+-0x3*-0x20f+-0x105*0x10;_0x3aaecd<_0x33f4a5['length'];_0x3aaecd++){const _0x318859=_0x33f4a5[_0x3aaecd],_0x3948b8=_0x318859 instanceof Mg,_0x47f7e9=_0x318859['light']['type']===ve;let _0x13d6eb=_0x318859['numVirtual'+'Lights'];_0x13f2c3>-0x54*-0x3f+0x2211+0x3e*-0xe2&&_0x13d6eb>0xde0+0x247f*0x1+-0x325e&&_0x318859['light']['bakeDir']&&(_0x13d6eb=-0xe77+0xe68*0x1+0x4*0x4,w['warn']('Lightmappe'+'r\x27s\x20BAKE_C'+'OLORDIR\x20mo'+'de\x20is\x20not\x20'+'compatible'+'\x20with\x20Ligh'+'t\x27s\x20bakeNu'+'mSamples\x20l'+'arger\x20than'+'\x20one.\x20Forc'+'ing\x20it\x20to\x20'+'one.'));for(let _0x412a52=0x112f*-0x1+0xc22+0x50d*0x1;_0x412a52<_0x13d6eb;_0x412a52++){Q['pushGpuMar'+'ker'](_0x45b84a,'Light:'+_0x318859['light']['_node']['name']+':'+_0x412a52),_0x13d6eb>0x47*-0x5b+0x64d+0x12f1&&_0x318859['prepareVir'+'tualLight'](_0x412a52,_0x13d6eb),_0x318859['startBake']();let _0x340eab=!(-0xe6*0x6+-0x12f1+0x1856);const _0x3015b5=this['lightCamer'+'aPrepare'](_0x45b84a,_0x318859);for(_0x35cfae=-0x2554+-0x1539*-0x1+-0xd9*-0x13;_0x35cfae<_0x29a497['length'];_0x35cfae++){const _0x2158e8=_0x29a497[_0x35cfae];if(_0x527fb3=_0x2158e8['meshInstan'+'ces'],!this['lightCamer'+'aPrepareAn'+'dCull'](_0x318859,_0x2158e8,_0x3015b5,_0x2cc6e8))continue;this['setupLight'+'Array'](_0x40c0ca,_0x318859['light']);const _0x5692ec=_0x47f7e9?[]:[_0x318859['light']];for(_0x10ccdb&&this['renderer']['lightTextu'+'reAtlas']['update'](_0x5692ec,this['lightingPa'+'rams']),_0x340eab=this['renderShad'+'owMap'](_0x304c85,_0x340eab,_0x343f7d,_0x318859),_0x10ccdb&&this['worldClust'+'ers']['update'](_0x5692ec,this['lightingPa'+'rams']),this['backupMate'+'rials'](_0x527fb3),_0x123a89=0x1050+-0x1336+-0x1*-0x2e6;_0x123a89<_0x13f2c3&&!(_0x123a89>0x9be+-0x206d+0x16af&&_0x412a52>0x1a76+0xaa5+0x17*-0x19d||_0x3948b8&&_0x123a89>-0x97+-0xcd0*-0x1+-0xc39);_0x123a89++){Q['pushGpuMar'+'ker'](_0x45b84a,'LMPass:'+_0x123a89);const _0x4aca04=_0x2158e8['renderTarg'+'ets'][_0x123a89],_0x41864e=_0x2158e8['renderTarg'+'ets'][_0x123a89]['colorBuffe'+'r']['width'],_0x2df130=this['renderTarg'+'ets']['get'](_0x41864e),_0x1e21a2=_0x2df130['colorBuffe'+'r'];_0x123a89===0xc7*0x14+0x28d+0x1*-0x1219?_0x26f604=_0x403844['updateShad'+'ers']:_0x26f604&&(_0x403844['updateShad'+'ers']=!(0x1745+-0x1*-0x6a+0x2f*-0x81));let _0x4e8ced=this['passMateri'+'als'][_0x123a89];for(_0x3948b8&&_0x412a52+(0x53e+-0x5*-0x7cd+-0x2c3e)===_0x13d6eb&&_0x123a89===-0x1cb9+0x1152+0xb67&&(_0x4e8ced=this['ambientAOM'+'aterial']),_0x42b24f=0x1*0x16bd+-0xb*-0x1ac+-0x2921;_0x42b24f<_0x527fb3['length'];_0x42b24f++)_0x527fb3[_0x42b24f]['material']=_0x4e8ced;if(this['renderer']['updateShad'+'ers'](_0x527fb3),_0x123a89===uL&&this['constantBa'+'keDir']['setValue'](_0x318859['light']['bakeDir']?0x20fe+0xe46+0x147*-0x25:-0x4*0x568+0x6f1+0xeaf),_0x45b84a['isWebGPU']){const _0x51f10e=new hL(_0x45b84a,this['renderer'],this['camera'],_0x10ccdb?this['worldClust'+'ers']:null,_0x527fb3,_0x40c0ca);_0x51f10e['init'](_0x2df130),_0x51f10e['render'](),_0x51f10e['destroy']();}else this['renderer']['setCamera'](this['camera'],_0x2df130,!(-0xd*0x2bd+0x4c*-0x5+-0x2515*-0x1)),_0x10ccdb&&this['worldClust'+'ers']['activate'](),this['renderer']['_forwardTi'+'me']=-0x3a3*0x7+-0x95*-0x31+-0x310,this['renderer']['_shadowMap'+'Time']=-0x1*0xf92+-0x2245*-0x1+-0x12b3,this['renderer']['renderForw'+'ard'](this['camera'],_0x2df130,_0x527fb3,_0x40c0ca,Aa),_0x45b84a['updateEnd']();for(this['stats']['shadowMapT'+'ime']+=this['renderer']['_shadowMap'+'Time'],this['stats']['forwardTim'+'e']+=this['renderer']['_forwardTi'+'me'],this['stats']['renderPass'+'es']++,_0x2158e8['renderTarg'+'ets'][_0x123a89]=_0x2df130,this['renderTarg'+'ets']['set'](_0x41864e,_0x4aca04),_0x42b24f=0x4a*-0x71+-0xe1d*0x1+-0x95b*-0x5;_0x42b24f<_0x527fb3['length'];_0x42b24f++)_0x2759d4=_0x527fb3[_0x42b24f],_0x2759d4['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][_0x123a89],_0x1e21a2),_0x2759d4['_shaderDef'+'s']|=ou;Q['popGpuMark'+'er'](_0x45b84a);}this['restoreMat'+'erials'](_0x527fb3);}_0x318859['endBake'](this['shadowMapC'+'ache']),Q['popGpuMark'+'er'](_0x45b84a);}}for(this['postproces'+'sTextures'](_0x45b84a,_0x29a497,_0x13f2c3),_0x35cfae=-0x1f86+-0xf90+0x2f16;_0x35cfae<_0x485894['length'];_0x35cfae++)_0x485894[_0x35cfae]['restore']();this['restoreLig'+'hts'](_0x117570),this['restoreSce'+'ne'](),_0x10ccdb||this['shadowMapC'+'ache']['clear']();}}const Wh=class Wh extends me{constructor(_0x5746c6,_0x268988){super(),h(this,'system'),h(this,'entity'),(this['system']=_0x5746c6,this['entity']=_0x268988,this['system']['schema']&&!this['_accessors'+'Built']&&this['buildAcces'+'sors'](this['system']['schema']),this['on']('set',function(_0x2c03b1,_0x172057,_0x4e123f){this['fire']('set_'+_0x2c03b1,_0x2c03b1,_0x172057,_0x4e123f);}),this['on']('set_enable'+'d',this['onSetEnabl'+'ed'],this));}static['_buildAcce'+'ssors'](_0xf0d358,_0x20daac){_0x20daac['forEach'](_0x4f6cc9=>{const _0x2de192=typeof _0x4f6cc9=='object'?_0x4f6cc9['name']:_0x4f6cc9;Object['defineProp'+'erty'](_0xf0d358,_0x2de192,{'get':function(){return this['data'][_0x2de192];},'set':function(_0x54608e){const _0x1f9507=this['data'],_0x51a13e=_0x1f9507[_0x2de192];_0x1f9507[_0x2de192]=_0x54608e,this['fire']('set',_0x2de192,_0x51a13e,_0x54608e);},'configurable':!(0x589+-0x709*-0x3+-0x1aa4)});}),_0xf0d358['_accessors'+'Built']=!(-0x17c0+-0x2273*0x1+0x1*0x3a33);}['buildAcces'+'sors'](_0x42610f){Wh['_buildAcce'+'ssors'](this,_0x42610f);}['onSetEnabl'+'ed'](_0x1af91e,_0x27c8a3,_0x167d09){_0x27c8a3!==_0x167d09&&this['entity']['enabled']&&(_0x167d09?this['onEnable']():this['onDisable']());}['onEnable'](){}['onDisable'](){}['onPostStat'+'eChange'](){}get['data'](){const _0xf8ab07=this['system']['store'][this['entity']['getGuid']()];return _0xf8ab07?_0xf8ab07['data']:null;}set['enabled'](_0xc4eb25){}get['enabled'](){return!(-0x1*-0x20b0+0xe2c+0x176e*-0x2);}};h(Wh,'order',-0xea6+0x23d3+-0x152d);let we=Wh;class ct extends me{constructor(_0xa7d553){super(),this['app']=_0xa7d553,this['store']={},this['schema']=[];}['addCompone'+'nt'](_0x1d454c,_0x4d4759={}){const _0x5741a5=new this['ComponentT'+'ype'](this,_0x1d454c),_0x11b085=new this['DataType']();return this['store'][_0x1d454c['getGuid']()]={'entity':_0x1d454c,'data':_0x11b085},_0x1d454c[this['id']]=_0x5741a5,_0x1d454c['c'][this['id']]=_0x5741a5,this['initialize'+'ComponentD'+'ata'](_0x5741a5,_0x4d4759,[]),this['fire']('add',_0x1d454c,_0x5741a5),_0x5741a5;}['removeComp'+'onent'](_0x2b3f17){const _0x21b157=this['id'],_0x23b0ac=this['store'][_0x2b3f17['getGuid']()],_0x1a0f34=_0x2b3f17['c'][_0x21b157];_0x1a0f34['fire']('beforeremo'+'ve'),this['fire']('beforeremo'+'ve',_0x2b3f17,_0x1a0f34),delete this['store'][_0x2b3f17['getGuid']()],_0x2b3f17[_0x21b157]=void(0x1fc0+-0x1745+-0xd*0xa7),delete _0x2b3f17['c'][_0x21b157],this['fire']('remove',_0x2b3f17,_0x23b0ac['data']);}['cloneCompo'+'nent'](_0x8e291d,_0x25468f){const _0x58e209=this['store'][_0x8e291d['getGuid']()];return this['addCompone'+'nt'](_0x25468f,_0x58e209['data']);}['initialize'+'ComponentD'+'ata'](_0x5122f0,_0xeab6c7={},_0x4f3321){for(let _0xd2245=-0x2377+-0x1c61+0x3fd8,_0x5864f4=_0x4f3321['length'];_0xd2245<_0x5864f4;_0xd2245++){const _0x5333c2=_0x4f3321[_0xd2245];let _0x2a4e04,_0x535bba;typeof _0x5333c2=='object'?(_0x2a4e04=_0x5333c2['name'],_0x535bba=_0x5333c2['type']):(_0x2a4e04=_0x5333c2,_0x535bba=void(-0x288*-0x3+-0x7cd+0x35));let _0x30c56b=_0xeab6c7[_0x2a4e04];_0x30c56b!==void(-0x5*0x5ab+-0x5aa*0x4+0x32ff)?(_0x535bba!==void(-0x3*-0x57d+-0x1229*-0x1+-0x4*0x8a8)&&(_0x30c56b=mL(_0x30c56b,_0x535bba)),_0x5122f0[_0x2a4e04]=_0x30c56b):_0x5122f0[_0x2a4e04]=_0x5122f0['data'][_0x2a4e04];}_0x5122f0['enabled']&&_0x5122f0['entity']['enabled']&&_0x5122f0['onEnable']();}['getPropert'+'iesOfType'](_0x3c7763){const _0xbf3bbb=[];return(this['schema']||[])['forEach'](_0x1c493e=>{_0x1c493e&&typeof _0x1c493e=='object'&&_0x1c493e['type']===_0x3c7763&&_0xbf3bbb['push'](_0x1c493e);}),_0xbf3bbb;}['destroy'](){this['off']();}}function mL(_0x49b521,_0x4290e1){if(!_0x49b521)return _0x49b521;switch(_0x4290e1){case'rgb':return _0x49b521 instanceof ie?_0x49b521['clone']():new ie(_0x49b521[0x1*-0x254b+0x185b+0xcf0],_0x49b521[0x1ad5+-0x1*-0xbfb+-0x26cf],_0x49b521[-0x21b5+0x7*0x575+-0x47c]);case'rgba':return _0x49b521 instanceof ie?_0x49b521['clone']():new ie(_0x49b521[-0x144+0x28*-0x2+-0x2*-0xca],_0x49b521[0x10af*0x1+0x1df*0x5+0x1a09*-0x1],_0x49b521[0x13f*0x17+0xa11+-0x9ae*0x4],_0x49b521[-0x14c1+0xbd9+0x8eb]);case'vec2':return _0x49b521 instanceof J?_0x49b521['clone']():new J(_0x49b521[0x683+-0x819+0x196],_0x49b521[-0x8*-0x1fd+-0x2583+0x159c]);case'vec3':return _0x49b521 instanceof D?_0x49b521['clone']():new D(_0x49b521[-0x14cb*0x1+-0x2531+-0x2*-0x1cfe],_0x49b521[-0x1ff+0x1abe+-0x18be],_0x49b521[0x1*0x1de1+-0x1ed9+0xfa]);case'vec4':return _0x49b521 instanceof re?_0x49b521['clone']():new re(_0x49b521[0x1ba*-0xf+0x1*-0x455+0x1e3b],_0x49b521[-0x2*-0xae5+-0x3d*-0x4c+-0x27e5],_0x49b521[0x115f+0x1fe0+-0x313d],_0x49b521[-0x1298+-0x1205+0x928*0x4]);case'boolean':case'number':case'string':return _0x49b521;case'entity':return _0x49b521;default:throw new Error('Could\x20not\x20'+'convert\x20un'+'handled\x20ty'+'pe:\x20'+_0x4290e1);}}const Bv=0x1318+0x1a9d+-0x2db5*0x1,Su=0x2*-0x26+0xd0f+-0x8e*0x17,yu=-0xdfa*0x2+-0xf41+0x2b37;class _L{constructor(){this['_left']=(-0x1425+0x1*0x1387+0x9f)/(-0x2*0x496+0x25*0x83+0x11*-0x93),this['_right']=-(-0x2323*-0x1+0x15e1+-0x825*0x7)/(-0x2*0xa7e+0x2377*0x1+-0x1*0xe7b),this['_len']=-0x9bb*0x2+-0x1*0xfbe+0x2*0x119a,this['_recip']=-0x1*-0xdbf+-0x6d3*0x4+0xd8d,this['_p0']=0xfce+-0x33*-0x2f+-0x192b,this['_p1']=0x16c9*-0x1+-0x1caf+-0x6c*-0x7a,this['_t']=0x182*-0x1+0x251d+-0x239b,this['_hermite']={'valid':!(0x127a+-0x53+-0x1226),'p0':0x0,'m0':0x0,'p1':0x0,'m1':0x0};}['update'](_0x54efdf,_0x5d8d10){if(_0x54efdf<this['_left']||_0x54efdf>=this['_right']){const _0xdc551b=_0x5d8d10['length'];if(!_0xdc551b)this['_left']=-(-0x5c5*0x1+0x14b*-0x15+-0x20ed*-0x1)/(0xe89+-0x1b26+0xc9d),this['_right']=(0x211*0x11+-0x98*-0x2e+-0x3e70)/(-0x1295+-0xdd1+0x2066),this['_len']=0x13*-0x148+0xb84+0xcd4,this['_recip']=0x221d+0x187*0x13+-0x3f22*0x1,this['_p0']=this['_p1']=0x1549+-0x105a+0x4ef*-0x1;else{if(_0x54efdf<_0x5d8d10[0x7*-0x1c0+-0x503*-0x1+-0x6d*-0x11])this['_left']=-(-0x1*-0x2c5+-0x1fbf+-0x1cfb*-0x1)/(-0x13aa+-0x1*-0x903+-0x9*-0x12f),this['_right']=_0x5d8d10[-0x1*0x121f+-0x3*-0xa95+-0xda0],this['_len']=-0x1dd8+0x18a1+-0x59*-0xf,this['_recip']=0x1*-0x1faf+-0x84+-0x2033*-0x1,this['_p0']=this['_p1']=0x420*-0x3+-0x2b0+-0x1e2*-0x8;else{if(_0x54efdf>=_0x5d8d10[_0xdc551b-(0x3*0x67f+0x1b36+0x2*-0x1759)])this['_left']=_0x5d8d10[_0xdc551b-(-0x5*-0x4b6+-0x6f7*-0x4+0x1*-0x3369)],this['_right']=(-0xfe0+0x2*0x78b+0xcb)/(0x3*0x5bd+-0x1*-0xa8b+-0xb*0x286),this['_len']=0x95*0x38+0x24d+0x1*-0x22e5,this['_recip']=0x1c03+-0x13be*0x1+-0x845,this['_p0']=this['_p1']=_0xdc551b-(-0xc94*0x2+0x26bc+0x2b7*-0x5);else{const _0x6c1e71=this['_findKey'](_0x54efdf,_0x5d8d10);this['_left']=_0x5d8d10[_0x6c1e71],this['_right']=_0x5d8d10[_0x6c1e71+(-0x70f*0x3+0x1be+0x1370)],this['_len']=this['_right']-this['_left'];const _0x2bb418=(0x10e2+0x1dc4+-0x2ea5*0x1)/this['_len'];this['_recip']=isFinite(_0x2bb418)?_0x2bb418:-0x1a6*0xc+0x1*-0x605+0x19cd,this['_p0']=_0x6c1e71,this['_p1']=_0x6c1e71+(0x379+-0x1*0x2a7+-0xd1);}}}}this['_t']=this['_recip']===-0x1ee6+0x967+0x1*0x157f?0x3ed*-0x9+0x3*-0x78b+0x39f6*0x1:(_0x54efdf-this['_left'])*this['_recip'],this['_hermite']['valid']=!(0x1549+-0x673+-0x1*0xed5);}['_findKey'](_0x5ec7f1,_0x361ec1){let _0x42aba8=-0xa03+-0x1a74+-0x5*-0x74b;for(;_0x5ec7f1>=_0x361ec1[_0x42aba8+(-0x2514+-0x14f4+0xb3*0x53)];)_0x42aba8++;return _0x42aba8;}['eval'](_0x19ee65,_0x128dc3,_0x3cc69f){const _0x1e7db9=_0x3cc69f['_data'],_0x5582fa=_0x3cc69f['_component'+'s'],_0x980545=this['_p0']*_0x5582fa;if(_0x128dc3===Bv){for(let _0x4eea9d=0x1ddd+0xd1+-0x1eae;_0x4eea9d<_0x5582fa;++_0x4eea9d)_0x19ee65[_0x4eea9d]=_0x1e7db9[_0x980545+_0x4eea9d];}else{const _0x2e535d=this['_t'],_0x1b00c4=this['_p1']*_0x5582fa;switch(_0x128dc3){case Su:for(let _0x42d966=0x1f3d+-0x228c+0x34f;_0x42d966<_0x5582fa;++_0x42d966)_0x19ee65[_0x42d966]=Y['lerp'](_0x1e7db9[_0x980545+_0x42d966],_0x1e7db9[_0x1b00c4+_0x42d966],_0x2e535d);break;case yu:{const _0x3c298a=this['_hermite'];if(!_0x3c298a['valid']){const _0x1b6641=_0x2e535d*_0x2e535d,_0x27b904=_0x2e535d+_0x2e535d,_0x560a09=0x1*0x36b+-0x153c+-0x8e9*-0x2-_0x2e535d,_0x5a63a0=_0x560a09*_0x560a09;_0x3c298a['valid']=!(0x2625+0x1e6b+-0x4490),_0x3c298a['p0']=(0x12ee+-0x583+-0x6b5*0x2+_0x27b904)*_0x5a63a0,_0x3c298a['m0']=_0x2e535d*_0x5a63a0,_0x3c298a['p1']=_0x1b6641*(-0x1566+0x1*0x10b+-0x2*-0xa2f-_0x27b904),_0x3c298a['m1']=_0x1b6641*(_0x2e535d-(-0xf72+-0x1*-0x16fb+-0x788));}const _0x64121f=(this['_p0']*(-0x99*0x33+-0x411*0x1+-0x9*-0x3d7)+(0x1c1c+0x245e+0x1*-0x4079))*_0x5582fa,_0x238a7d=(this['_p0']*(-0x5e3+-0x11d*0x1d+0x262f)+(0x1*0x24c+-0x5*-0x91+-0x51f))*_0x5582fa,_0x48f509=(this['_p1']*(0x263*-0x5+0x1*0x1e8b+0x17*-0xcf)+(0x2*-0x97+-0xb1f*0x1+-0x19*-0x7e))*_0x5582fa,_0x305e52=(this['_p1']*(-0x132d*0x2+-0x2a*-0x67+0x1577*0x1)+(-0x18c9+0x158e+0x33b))*_0x5582fa;for(let _0x5ee5e9=-0x2343+0x6*0x679+-0x393;_0x5ee5e9<_0x5582fa;++_0x5ee5e9)_0x19ee65[_0x5ee5e9]=_0x3c298a['p0']*_0x1e7db9[_0x64121f+_0x5ee5e9]+_0x3c298a['m0']*_0x1e7db9[_0x238a7d+_0x5ee5e9]*this['_len']+_0x3c298a['p1']*_0x1e7db9[_0x48f509+_0x5ee5e9]+_0x3c298a['m1']*_0x1e7db9[_0x305e52+_0x5ee5e9]*this['_len'];break;}}}}}class Ig{constructor(_0x27a490){this['_name']=_0x27a490['name']+'Snapshot',this['_time']=-(0x146+0x1*-0x1465+-0x9*-0x220),this['_cache']=[],this['_results']=[];for(let _0x482d7f=-0x1*0x637+0x7cd*-0x2+-0x1*-0x15d1;_0x482d7f<_0x27a490['_inputs']['length'];++_0x482d7f)this['_cache'][_0x482d7f]=new _L();const _0x36742d=_0x27a490['_curves'],_0x5dfd1b=_0x27a490['_outputs'];for(let _0x49c582=-0x23*0x8+-0x26e8+0x2800;_0x49c582<_0x36742d['length'];++_0x49c582){const _0x4d943a=_0x36742d[_0x49c582],_0x4d33af=_0x5dfd1b[_0x4d943a['_output']],_0x339bc8=[];for(let _0x26b9ac=0xd*-0x20c+-0x2466+0x2*0x1f81;_0x26b9ac<_0x4d33af['_component'+'s'];++_0x26b9ac)_0x339bc8[_0x26b9ac]=-0x327*0x3+-0x247b+0x2df0;this['_results'][_0x49c582]=_0x339bc8;}}}const qo=class qo{constructor(_0x32e920,_0x1015fb,_0x58c15e,_0xff4f75,_0x25ac78,_0x55a3fc){this['_name']=_0x32e920['name'],this['_track']=_0x32e920,this['_snapshot']=new Ig(_0x32e920),this['_playing']=_0xff4f75,this['_time']=_0x1015fb,this['_speed']=_0x58c15e,this['_loop']=_0x25ac78,this['_blendWeig'+'ht']=0x1*0x3fb+-0x14e5*-0x1+-0x18df,this['_blendOrde'+'r']=-0xd07+-0x476+0x25*0x79,this['_eventHand'+'ler']=_0x55a3fc,this['alignCurso'+'rToCurrent'+'Time']();}set['name'](_0x202912){this['_name']=_0x202912;}get['name'](){return this['_name'];}set['track'](_0x2a939b){this['_track']=_0x2a939b,this['_snapshot']=new Ig(_0x2a939b);}get['track'](){return this['_track'];}get['snapshot'](){return this['_snapshot'];}set['time'](_0x4384af){this['_time']=_0x4384af,this['alignCurso'+'rToCurrent'+'Time']();}get['time'](){return this['_time'];}set['speed'](_0x5c2f99){const _0x44206e=Math['sign'](_0x5c2f99)!==Math['sign'](this['_speed']);this['_speed']=_0x5c2f99,_0x44206e&&this['alignCurso'+'rToCurrent'+'Time']();}get['speed'](){return this['_speed'];}set['loop'](_0x141d16){this['_loop']=_0x141d16;}get['loop'](){return this['_loop'];}set['blendWeigh'+'t'](_0x500dfa){this['_blendWeig'+'ht']=_0x500dfa;}get['blendWeigh'+'t'](){return this['_blendWeig'+'ht'];}set['blendOrder'](_0x4aea9d){this['_blendOrde'+'r']=_0x4aea9d;}get['blendOrder'](){return this['_blendOrde'+'r'];}set['eventCurso'+'r'](_0x38ad80){this['_eventCurs'+'or']=_0x38ad80;}get['eventCurso'+'r'](){return this['_eventCurs'+'or'];}get['eventCurso'+'rEnd'](){return this['isReverse']?-0x1*0xc05+-0x104*0x1+0xd09:this['_track']['events']['length']-(-0x123b+-0x23f3+0x362f);}get['nextEvent'](){return this['_track']['events'][this['_eventCurs'+'or']];}get['isReverse'](){return this['_speed']<0x19e8+0x1048+-0x2a30*0x1;}['nextEventA'+'headOfTime'](_0xfdf661){return this['nextEvent']?this['isReverse']?this['nextEvent']['time']<=_0xfdf661:this['nextEvent']['time']>=_0xfdf661:!(-0x1932+0x15c9+0x2e*0x13);}['nextEventB'+'ehindTime'](_0x48d318){return this['nextEvent']?_0x48d318===this['track']['duration']?this['isReverse']?this['nextEvent']['time']>=_0x48d318:this['nextEvent']['time']<=_0x48d318:this['isReverse']?this['nextEvent']['time']>_0x48d318:this['nextEvent']['time']<_0x48d318:!(-0x4*0x959+0x1ff2+0x573);}['resetEvent'+'Cursor'](){this['_eventCurs'+'or']=this['isReverse']?this['_track']['events']['length']-(-0x9*-0x237+-0x747+-0xca7):-0x1f10+-0xd8c+0x2c9c;}['moveEventC'+'ursor'](){this['_eventCurs'+'or']+=this['isReverse']?-(-0x2*-0x529+-0xf32+0x4e1*0x1):0x30a*0xb+-0x26c7+0x55a,this['_eventCurs'+'or']>=this['track']['events']['length']?this['_eventCurs'+'or']=0x1*0x9ec+0x1*0x3e6+-0xdd2:this['_eventCurs'+'or']<0xc*0x1e2+0x1170+0x38*-0xb7&&(this['_eventCurs'+'or']=this['track']['events']['length']-(0xf6b+-0x1744+0x7da));}['clipFrameT'+'ime'](_0x2dd696){const _0x1802ed=qo['eventFrame'];_0x1802ed['start']=0xd9*-0x5+0x6*-0x16f+0xcd7,_0x1802ed['end']=_0x2dd696,_0x1802ed['residual']=0x194c+-0x1*-0x17af+0x1*-0x30fb,this['isReverse']?_0x2dd696<-0x90d*-0x4+0x18b8+0x4*-0xf3b&&(_0x1802ed['start']=this['track']['duration'],_0x1802ed['end']=-0x95*-0x3c+0x1*0x1fd9+-0x42c5,_0x1802ed['residual']=_0x2dd696+this['track']['duration']):_0x2dd696>this['track']['duration']&&(_0x1802ed['start']=-0x25*0x46+-0x14a2+0x1ec0,_0x1802ed['end']=this['track']['duration'],_0x1802ed['residual']=_0x2dd696-this['track']['duration']);}['alignCurso'+'rToCurrent'+'Time'](){for(this['resetEvent'+'Cursor']();this['nextEventB'+'ehindTime'](this['_time'])&&this['_eventCurs'+'or']!==this['eventCurso'+'rEnd'];)this['moveEventC'+'ursor']();}['fireNextEv'+'ent'](){this['_eventHand'+'ler']['fire'](this['nextEvent']['name'],{'track':this['track'],...this['nextEvent']}),this['moveEventC'+'ursor']();}['fireNextEv'+'entInFrame'](_0x310855,_0xfbadf0){return this['nextEventA'+'headOfTime'](_0x310855)&&this['nextEventB'+'ehindTime'](_0xfbadf0)?(this['fireNextEv'+'ent'](),!(0xaac+-0xed4+0x13*0x38)):!(-0x1*-0x16b9+0x16aa*0x1+-0x2d62);}['activeEven'+'tsForFrame'](_0x2aa2af,_0x334450){const _0x317c1b=qo['eventFrame'];this['clipFrameT'+'ime'](_0x334450);const _0x12f637=this['eventCurso'+'r'];for(;this['fireNextEv'+'entInFrame'](_0x2aa2af,_0x317c1b['end'])&&_0x12f637!==this['eventCurso'+'r'];);this['loop']&&Math['abs'](_0x317c1b['residual'])>-0xd4a+0xc*-0x31a+0x3282&&this['activeEven'+'tsForFrame'](_0x317c1b['start'],_0x317c1b['residual']);}['progressFo'+'rTime'](_0x584268){return _0x584268*this['_speed']/this['_track']['duration'];}['_update'](_0x4f4ed1){if(this['_playing']){let _0x3ca436=this['_time'];const _0x172d2c=this['_track']['duration'],_0x36d9b7=this['_speed'],_0x427b05=this['_loop'];this['_track']['events']['length']>-0x1*0x1f04+-0xcea+-0x2*-0x15f7&&_0x172d2c>-0x2b*0xb1+0x107c+-0xd3f*-0x1&&this['activeEven'+'tsForFrame'](_0x3ca436,_0x3ca436+_0x36d9b7*_0x4f4ed1),_0x3ca436+=_0x36d9b7*_0x4f4ed1,_0x36d9b7>=-0x93d*0x1+-0x1d*-0x13f+0x1*-0x1ae6?_0x3ca436>_0x172d2c&&(_0x427b05?_0x3ca436=_0x3ca436%_0x172d2c||-0x2273+0xc11+0x1662:(_0x3ca436=this['_track']['duration'],this['pause']())):_0x3ca436<0x13cd+-0x1ceb+0x91e&&(_0x427b05?_0x3ca436=_0x172d2c+(_0x3ca436%_0x172d2c||0x11*0x10b+0x1*0x2525+-0x36e0):(_0x3ca436=-0xd5d+-0x1f22+-0x2c7f*-0x1,this['pause']())),this['_time']=_0x3ca436;}this['_time']!==this['_snapshot']['_time']&&this['_track']['eval'](this['_time'],this['_snapshot']);}['play'](){this['_playing']=!(-0x1b6c+0x1*0x1591+0x5db*0x1),this['_time']=0x1a4f+0x2db*-0xb+0x51a;}['stop'](){this['_playing']=!(-0x21fa+-0x21f9+0x43f4),this['_time']=-0x3*0xbce+0x20a6+-0x162*-0x2;}['pause'](){this['_playing']=!(-0x893+0xb*-0x2db+-0x1*-0x27fd);}['resume'](){this['_playing']=!(-0x3*-0x8f9+-0xcc7*-0x2+-0x13*0x2c3);}['reset'](){this['_time']=-0x186a+-0x13cf+0x2c39;}};h(qo,'eventFrame',{'start':0x0,'end':0x0,'residual':0x0});let Dh=qo;const zv='NONE',gL='PREV_STATE',SL='NEXT_STATE',yL='PREV_STATE'+'_NEXT_STAT'+'E',vL='NEXT_STATE'+'_PREV_STAT'+'E',xL='GREATER_TH'+'AN',TL='LESS_THAN',wL='GREATER_TH'+'AN_EQUAL_T'+'O',EL='LESS_THAN_'+'EQUAL_TO',bL='EQUAL_TO',AL='NOT_EQUAL_'+'TO',Lg='INTEGER',Rg='FLOAT',Og='BOOLEAN',Qc='TRIGGER',CL='1D',PL='2D_DIRECTI'+'ONAL',ML='2D_CARTESI'+'AN',DL='DIRECT',Co='START',vu='END',qr='ANY',Ih=[Co,vu,qr],Vv='OVERWRITE',IL='ADDITIVE';class Ht{static['dot'](_0x10079d,_0x3af86c){const _0x27159a=_0x10079d['length'];let _0x3557a2=-0xc2b+-0x21d9+0x1*0x2e04;for(let _0x1c29b8=0x1c7+0x1a1e+-0x1be5;_0x1c29b8<_0x27159a;++_0x1c29b8)_0x3557a2+=_0x10079d[_0x1c29b8]*_0x3af86c[_0x1c29b8];return _0x3557a2;}static['normalize'](_0x52ebeb){let _0x367afe=Ht['dot'](_0x52ebeb,_0x52ebeb);if(_0x367afe>0x1b4*-0x2+-0x5d2*0x2+0xf0c){_0x367afe=(-0x2*0xde6+0x27b*-0x1+0x1e48)/Math['sqrt'](_0x367afe);const _0x3e5694=_0x52ebeb['length'];for(let _0x2bdc94=-0x7f*0xf+-0xd*-0x19d+0x8*-0x1b1;_0x2bdc94<_0x3e5694;++_0x2bdc94)_0x52ebeb[_0x2bdc94]*=_0x367afe;}}static['set'](_0x47b395,_0x172f31,_0x43e6ae){const _0x52a844=_0x47b395['length'];if(_0x43e6ae==='quaternion'){let _0x48736b=Ht['dot'](_0x172f31,_0x172f31);_0x48736b>-0x8b1+0x20fa+-0x1849&&(_0x48736b=(-0x58d*0x3+0x1f5a+-0x6*0x273)/Math['sqrt'](_0x48736b));for(let _0x3b34a9=-0x1705*0x1+-0x15ea+0x2cef*0x1;_0x3b34a9<_0x52a844;++_0x3b34a9)_0x47b395[_0x3b34a9]=_0x172f31[_0x3b34a9]*_0x48736b;}else{for(let _0x15527=-0x1fcf+-0x1d3f+0x3d0e;_0x15527<_0x52a844;++_0x15527)_0x47b395[_0x15527]=_0x172f31[_0x15527];}}static['blendVec'](_0x44859d,_0x164875,_0xe3a2d8,_0x4242d3){const _0x290f3a=_0x4242d3?-0x152*-0x6+-0x5ec+0x49*-0x7:-0x1e*0x9f+0xcb*-0x2f+-0xdfa*-0x4-_0xe3a2d8,_0x37fb46=_0x44859d['length'];for(let _0x3f4de0=0x1744*0x1+-0x1*0x293+-0x1*0x14b1;_0x3f4de0<_0x37fb46;++_0x3f4de0)_0x44859d[_0x3f4de0]=_0x44859d[_0x3f4de0]*_0x290f3a+_0x164875[_0x3f4de0]*_0xe3a2d8;}static['blendQuat'](_0x3f42c9,_0x232bbd,_0x3806d3,_0x5dd9c9){const _0x220781=_0x3f42c9['length'],_0x5392b8=_0x5dd9c9?-0x667+0x239f+0x1*-0x1d37:-0x11*0x89+0x1dd+0x73d-_0x3806d3;Ht['dot'](_0x3f42c9,_0x232bbd)<-0xe3*-0x1+-0x7b2+0x6cf&&(_0x3806d3=-_0x3806d3);for(let _0x5547f5=-0x1*-0x6f0+0xf0+-0x1*0x7e0;_0x5547f5<_0x220781;++_0x5547f5)_0x3f42c9[_0x5547f5]=_0x3f42c9[_0x5547f5]*_0x5392b8+_0x232bbd[_0x5547f5]*_0x3806d3;_0x5dd9c9||Ht['normalize'](_0x3f42c9);}static['blend'](_0x2cd409,_0x792d77,_0x389db5,_0x1928c1,_0x1e8a67){_0x1928c1==='quaternion'?Ht['blendQuat'](_0x2cd409,_0x792d77,_0x389db5,_0x1e8a67):Ht['blendVec'](_0x2cd409,_0x792d77,_0x389db5,_0x1e8a67);}static['stableSort'](_0x31220d,_0x3b295b){const _0x1f7e2f=_0x31220d['length'];for(let _0x3e8223=0x1*-0x1f3d+0xda+0x1e63;_0x3e8223<_0x1f7e2f-(0x2b3*0xb+0x1a+-0x1dca);++_0x3e8223)for(let _0x10e3c3=_0x3e8223+(0x17d*-0x4+-0x9a+0x68f);_0x10e3c3<_0x1f7e2f;++_0x10e3c3)if(_0x3b295b(_0x31220d[_0x10e3c3],_0x31220d[_0x3e8223])){const _0x35efdd=_0x31220d[_0x3e8223];_0x31220d[_0x3e8223]=_0x31220d[_0x10e3c3],_0x31220d[_0x10e3c3]=_0x35efdd;}}}const st=class st{constructor(_0x5851cd,_0x49035e){this['_component']=_0x5851cd,this['mask']=new Int8Array(_0x5851cd['layers']['length']),this['weights']=new Float32Array(_0x5851cd['layers']['length']),this['totalWeigh'+'t']=-0x12*0x149+-0x1f9d+0x36bf,this['counter']=0x1648*0x1+0x1*0x5f9+0x1*-0x1c41,this['layerCount'+'er']=0x3*0xb11+0x3*0x9bd+-0x3e6a,this['valueType']=_0x49035e,this['dirty']=!(0x2b5*-0x7+0x65*0x4c+-0xb09),this['value']=_0x49035e===st['TYPE_QUAT']?[-0x1*-0xcb3+0x1853+-0x1*0x2506,-0x19f5+0x1*-0x691+-0x1*-0x2086,0x2196+0x1fbd+-0x1*0x4153,0x23bd+-0x6*-0x3f0+-0x3b5c]:[0x2*-0x135b+0x14b8+-0x7*-0x292,-0x2403+0xf7*0x26+-0x1*0xa7,-0x1e77*0x1+-0x1db+-0x7*-0x49e],this['baseValue']=null,this['setter']=null;}get['_normalize'+'Weights'](){return this['_component']['normalizeW'+'eights'];}['getWeight'](_0x4f3036){return this['dirty']&&this['updateWeig'+'hts'](),this['_normalize'+'Weights']&&this['totalWeigh'+'t']===0x11*0xd1+0x2500+-0x32e1||!this['mask'][_0x4f3036]?0x1*0x1733+-0x6b4+0x29*-0x67:this['_normalize'+'Weights']?this['weights'][_0x4f3036]/this['totalWeigh'+'t']:Y['clamp'](this['weights'][_0x4f3036],-0x1044+0xb2*-0x37+0x3682,-0x2002+-0x45f*-0x3+-0x29*-0x76);}['_layerBlen'+'dType'](_0x5f24b2){return this['_component']['layers'][_0x5f24b2]['blendType'];}['setMask'](_0x5ea7b1,_0x215de0){this['mask'][_0x5ea7b1]=_0x215de0,this['_normalize'+'Weights']&&(this['_component']['layers'][_0x5ea7b1]['blendType']===Vv&&(this['mask']=this['mask']['fill'](0x2083+-0x9c8+-0x16bb,0x592*-0x4+-0x99*0x29+-0x2ec9*-0x1,_0x5ea7b1)),this['dirty']=!(0x1*0x8a7+0x1855*0x1+-0x20fc));}['updateWeig'+'hts'](){this['totalWeigh'+'t']=-0x1c9a+0x4*-0x589+-0xa26*-0x5;for(let _0x537035=0x1*0x1c3a+-0x17*0x151+0x20d;_0x537035<this['weights']['length'];_0x537035++)this['weights'][_0x537035]=this['_component']['layers'][_0x537035]['weight'],this['totalWeigh'+'t']+=this['mask'][_0x537035]*this['weights'][_0x537035];this['dirty']=!(-0x3e+0x4*-0x96a+0x25e7);}['updateValu'+'e'](_0x1ebdcd,_0x1cafaf){if(this['counter']===-0x154b+-0x19d0+0x2f1b&&(Ht['set'](this['value'],st['IDENTITY_Q'+'UAT_ARR'],this['valueType']),this['_normalize'+'Weights']||Ht['blend'](this['value'],this['baseValue'],0xb7e+-0x108+-0x1*0xa75,this['valueType'])),!(!this['mask'][_0x1ebdcd]||this['getWeight'](_0x1ebdcd)===0x1*-0x1267+0x218b+0x13*-0xcc)){if(this['_layerBlen'+'dType'](_0x1ebdcd)===IL&&!this['_normalize'+'Weights']){if(this['valueType']===st['TYPE_QUAT']){const _0x11d2bf=st['q1']['set'](this['value'][0x1220+0x632+-0x1852],this['value'][0x1*-0x1395+-0x264+-0x3a*-0x61],this['value'][-0x494*-0x5+0x5af+0x47*-0x67],this['value'][0x10ad*0x1+-0x1*-0x1874+0x115*-0x26]),_0xe0bffb=st['q2']['set'](this['baseValue'][0x223f+0x6*0x161+-0x2a85],this['baseValue'][-0x6ad*-0x2+0x20c+-0xf65],this['baseValue'][0xfb9+-0x633+0xe*-0xae],this['baseValue'][0xe39+-0x2676*0x1+0x184*0x10]),_0xa8aa7a=st['q3']['set'](_0x1cafaf[0x1224+-0x1203+-0x21],_0x1cafaf[0x703*-0x2+-0x1*-0x61+-0xda6*-0x1],_0x1cafaf[-0xd7*0x23+-0xfe*0x4+0x215f],_0x1cafaf[-0xd46*0x2+-0x4*0x63e+0x3387]),_0x399eef=_0xe0bffb['invert']()['mul'](_0xa8aa7a);_0x399eef['slerp'](le['IDENTITY'],_0x399eef,this['getWeight'](_0x1ebdcd)),_0x11d2bf['mul'](_0x399eef),st['quatArr'][0xf3*-0x20+-0x3e4+-0x2b*-0xcc]=_0x11d2bf['x'],st['quatArr'][0x176d+-0x1484+0x1*-0x2e8]=_0x11d2bf['y'],st['quatArr'][0x79*-0x45+-0x25*0x44+0x2a73]=_0x11d2bf['z'],st['quatArr'][-0x1f43+-0x1d*0x8b+0x2f05]=_0x11d2bf['w'],Ht['set'](this['value'],st['quatArr'],this['valueType']);}else st['vecArr'][0x71*0x2f+0xbf0+-0x20af]=_0x1cafaf[-0xb9d+0x1*-0x12a9+0x1e46]-this['baseValue'][0x5*-0x727+0x2f3+0x20d0],st['vecArr'][-0x3*0x892+0xd*0xdf+-0x399*-0x4]=_0x1cafaf[-0x1665+-0x34e+0x19b4]-this['baseValue'][-0x247d+0x20db+0x31*0x13],st['vecArr'][0x21c8+-0x1959+0x1*-0x86d]=_0x1cafaf[0x24a1+0x2275*-0x1+0x22a*-0x1]-this['baseValue'][0x9ce+0x67*0x1c+-0x1510],Ht['blend'](this['value'],st['vecArr'],this['getWeight'](_0x1ebdcd),this['valueType'],!(0x1118+0x1*0x2264+-0xa*0x526));}else Ht['blend'](this['value'],_0x1cafaf,this['getWeight'](_0x1ebdcd),this['valueType']);this['setter']&&this['setter'](this['value']);}}['unbind'](){this['setter']&&this['setter'](this['baseValue']);}};h(st,'TYPE_QUAT','quaternion'),h(st,'TYPE_VEC3','vector3'),h(st,'q1',new le()),h(st,'q2',new le()),h(st,'q3',new le()),h(st,'quatArr',[-0x5e*0x45+-0x1dc3+0x3719,-0x1fd5*0x1+0x1e0f+0xe3*0x2,-0xd*-0x9f+0x4f*0x6b+0x148c*-0x2,-0xb65*-0x2+0x1443+-0x2b0c]),h(st,'vecArr',[-0xbf*-0x15+-0x1edb*0x1+-0x510*-0x3,-0xdee+0x16bf+-0x8d1,-0x1*-0x7f+-0xc3f+0xbc0]),h(st,'IDENTITY_Q'+'UAT_ARR',[0xb9*0x1f+0x11be+0x2b*-0xef,0xefe+0x1d29+0x59*-0x7f,-0x233b+-0x115a+0x3495,0x26b9+-0xe5*0x17+-0x5*0x3a1]);let Vo=st;class Gv{constructor(_0xef08b1){this['_binder']=_0xef08b1,this['_clips']=[],this['_inputs']=[],this['_outputs']=[],this['_targets']={};}get['clips'](){return this['_clips'];}['addClip'](_0x2e6b09){const _0x104b31=this['_targets'],_0xa160d=this['_binder'],_0x568405=_0x2e6b09['track']['curves'],_0x4e2394=_0x2e6b09['snapshot'],_0xf18bcd=[],_0x423011=[];for(let _0x3db88e=0x6c7*0x1+0x1*-0x1d95+-0x342*-0x7;_0x3db88e<_0x568405['length'];++_0x3db88e){const _0x439c95=_0x568405[_0x3db88e]['paths'];for(let _0x4ba733=0xbe6*0x2+-0x1d*0xaa+0x1*-0x48a;_0x4ba733<_0x439c95['length'];++_0x4ba733){const _0x4a6ac0=_0x439c95[_0x4ba733],_0x439081=_0xa160d['resolve'](_0x4a6ac0);let _0x4d570e=_0x104b31[_0x439081&&_0x439081['targetPath']||null];if(!_0x4d570e&&_0x439081){_0x4d570e={'target':_0x439081,'value':[],'curves':0x0,'blendCounter':0x0};for(let _0x16ea4a=-0x1279+-0x8c9+0x1b42;_0x16ea4a<_0x4d570e['target']['components'];++_0x16ea4a)_0x4d570e['value']['push'](-0x1a91*0x1+0x1*-0x1967+0x33f8);if(_0x104b31[_0x439081['targetPath']]=_0x4d570e,_0xa160d['animCompon'+'ent']){if(!_0xa160d['animCompon'+'ent']['targets'][_0x439081['targetPath']]){let _0x1343b1;_0x439081['targetPath']['substring'](_0x439081['targetPath']['length']-(0x4*0x882+-0x1975+0x1*-0x886))==='localRotat'+'ion'?_0x1343b1=Vo['TYPE_QUAT']:_0x1343b1=Vo['TYPE_VEC3'],_0xa160d['animCompon'+'ent']['targets'][_0x439081['targetPath']]=new Vo(_0xa160d['animCompon'+'ent'],_0x1343b1);}_0xa160d['animCompon'+'ent']['targets'][_0x439081['targetPath']]['layerCount'+'er']++,_0xa160d['animCompon'+'ent']['targets'][_0x439081['targetPath']]['setMask'](_0xa160d['layerIndex'],-0x1cf9*0x1+-0x18f6+0x35f0);}}_0x4d570e&&(_0x4d570e['curves']++,_0xf18bcd['push'](_0x4e2394['_results'][_0x3db88e]),_0x423011['push'](_0x4d570e));}}this['_clips']['push'](_0x2e6b09),this['_inputs']['push'](_0xf18bcd),this['_outputs']['push'](_0x423011);}['removeClip'](_0x3d2818){const _0x547529=this['_targets'],_0x203995=this['_binder'],_0x47d0a6=this['_clips'],_0x460c96=_0x47d0a6[_0x3d2818]['track']['curves'];for(let _0x4dd0dd=-0x4ce+-0x1ea9+-0x7*-0x511;_0x4dd0dd<_0x460c96['length'];++_0x4dd0dd){const _0x5f5cd1=_0x460c96[_0x4dd0dd]['paths'];for(let _0xd45de2=-0x161d*0x1+-0x1b29*-0x1+-0x50c;_0xd45de2<_0x5f5cd1['length'];++_0xd45de2){const _0xfae0ea=_0x5f5cd1[_0xd45de2],_0x2cba6f=this['_binder']['resolve'](_0xfae0ea);_0x2cba6f&&(_0x2cba6f['curves']--,_0x2cba6f['curves']===-0x1b*-0x57+-0x3*-0xc03+-0x12*0x283&&(_0x203995['unresolve'](_0xfae0ea),delete _0x547529[_0x2cba6f['targetPath']],_0x203995['animCompon'+'ent']&&_0x203995['animCompon'+'ent']['targets'][_0x2cba6f['targetPath']]['layerCount'+'er']--));}}_0x47d0a6['splice'](_0x3d2818,0x121c+0x2d7*-0xd+-0x38*-0x56),this['_inputs']['splice'](_0x3d2818,0x242f+0xef7+-0x3325),this['_outputs']['splice'](_0x3d2818,0x4*-0x55+-0x1d7a+0x3*0xa45);}['removeClip'+'s'](){for(;this['_clips']['length']>0x773+0xd6e+-0x1*0x14e1;)this['removeClip'](-0x1845+0x13*-0x209+0x3ef0);}['updateClip'+'Track'](_0x2584f4,_0xc044ca){this['_clips']['forEach'](_0x2d35b2=>{_0x2d35b2['name']['includes'](_0x2584f4)&&(_0x2d35b2['track']=_0xc044ca);}),this['rebind']();}['findClip'](_0xb1907c){const _0x49f057=this['_clips'];for(let _0x3010eb=-0x335*-0xb+0x1*-0x4e5+-0x1*0x1e62;_0x3010eb<_0x49f057['length'];++_0x3010eb){const _0x14aece=_0x49f057[_0x3010eb];if(_0x14aece['name']===_0xb1907c)return _0x14aece;}return null;}['rebind'](){this['_binder']['rebind'](),this['_targets']={};const _0x44d8f4=[...this['clips']];this['removeClip'+'s'](),_0x44d8f4['forEach'](_0x3a9a6e=>{this['addClip'](_0x3a9a6e);});}['assignMask'](_0xece0bc){return this['_binder']['assignMask'](_0xece0bc);}['update'](_0x366252,_0x25fbd4=!(-0x172c+-0xe63*0x1+0x258f)){const _0x1c185a=this['_clips'],_0x3223cb=_0x1c185a['map']((_0x46e480,_0xb4ffed)=>_0xb4ffed);Ht['stableSort'](_0x3223cb,(_0x307d62,_0x522d49)=>_0x1c185a[_0x307d62]['blendOrder']<_0x1c185a[_0x522d49]['blendOrder']);for(let _0x25d7cf=-0x10f*-0x1f+0x3*0x6ce+-0x353b;_0x25d7cf<_0x3223cb['length'];++_0x25d7cf){const _0x2605a0=_0x3223cb[_0x25d7cf],_0x3ec951=_0x1c185a[_0x2605a0],_0x69d9d6=this['_inputs'][_0x2605a0],_0x5d0bb2=this['_outputs'][_0x2605a0],_0x2393ed=_0x3ec951['blendWeigh'+'t'];if(_0x2393ed>0x1*0x276+-0x75*0x4+0x3*-0x36&&_0x3ec951['_update'](_0x366252),!_0x25fbd4)break;let _0x49582a,_0x390614,_0x40be82;if(_0x2393ed>=-0xa68+-0x166*0x3+0xe9b){for(let _0x207265=-0x229e+-0xc6b*0x1+0x2f09;_0x207265<_0x69d9d6['length'];++_0x207265)_0x49582a=_0x69d9d6[_0x207265],_0x390614=_0x5d0bb2[_0x207265],_0x40be82=_0x390614['value'],Ht['set'](_0x40be82,_0x49582a,_0x390614['target']['type']),_0x390614['blendCount'+'er']++;}else{if(_0x2393ed>-0x1f1*-0x3+0x3bf+-0x992){for(let _0x3af9cf=-0x162a*0x1+-0x4f6*-0x7+-0xc90;_0x3af9cf<_0x69d9d6['length'];++_0x3af9cf)_0x49582a=_0x69d9d6[_0x3af9cf],_0x390614=_0x5d0bb2[_0x3af9cf],_0x40be82=_0x390614['value'],_0x390614['blendCount'+'er']===0x114b*0x2+0x992+-0x2*0x1614?Ht['set'](_0x40be82,_0x49582a,_0x390614['target']['type']):Ht['blend'](_0x40be82,_0x49582a,_0x2393ed,_0x390614['target']['type']),_0x390614['blendCount'+'er']++;}}}const _0x3aea0f=this['_targets'],_0x26d54d=this['_binder'];for(const _0x406637 in _0x3aea0f)if(_0x3aea0f['hasOwnProp'+'erty'](_0x406637)){const _0x18f8bc=_0x3aea0f[_0x406637];if(_0x26d54d['animCompon'+'ent']&&_0x18f8bc['target']['isTransfor'+'m']){const _0x31736b=_0x26d54d['animCompon'+'ent']['targets'][_0x406637];_0x31736b['counter']===_0x31736b['layerCount'+'er']&&(_0x31736b['counter']=0xac0+0x1f7*0x3+-0x10a5),_0x31736b['path']||(_0x31736b['path']=_0x406637,_0x31736b['baseValue']=_0x18f8bc['target']['get'](),_0x31736b['setter']=_0x18f8bc['target']['set']),_0x31736b['updateValu'+'e'](_0x26d54d['layerIndex'],_0x18f8bc['value']),_0x31736b['counter']++;}else _0x18f8bc['target']['set'](_0x18f8bc['value']);_0x18f8bc['blendCount'+'er']=-0x181+-0x10a+0x1f*0x15;}this['_binder']['update'](_0x366252);}}class Hv{constructor(_0x76fe60){this['_events']=[..._0x76fe60],this['_events']['sort']((_0x4ee7cc,_0x1f01c6)=>_0x4ee7cc['time']-_0x1f01c6['time']);}get['events'](){return this['_events'];}}const $h=class $h{constructor(_0xfd00bb,_0x5aa2c7,_0x39643e,_0xca362f,_0x430c2f,_0x13a965=new Hv([])){this['_name']=_0xfd00bb,this['_duration']=_0x5aa2c7,this['_inputs']=_0x39643e,this['_outputs']=_0xca362f,this['_curves']=_0x430c2f,this['_animEvent'+'s']=_0x13a965;}get['name'](){return this['_name'];}get['duration'](){return this['_duration'];}get['inputs'](){return this['_inputs'];}get['outputs'](){return this['_outputs'];}get['curves'](){return this['_curves'];}set['events'](_0xa6a4fb){this['_animEvent'+'s']=_0xa6a4fb;}get['events'](){return this['_animEvent'+'s']['events'];}['eval'](_0x370935,_0x28a068){_0x28a068['_time']=_0x370935;const _0x2643b2=this['_inputs'],_0x26057b=this['_outputs'],_0x5bb202=this['_curves'],_0x142bf2=_0x28a068['_cache'],_0x18d2a7=_0x28a068['_results'];for(let _0x1fca97=-0x1930+-0x734+-0x2064*-0x1;_0x1fca97<_0x2643b2['length'];++_0x1fca97)_0x142bf2[_0x1fca97]['update'](_0x370935,_0x2643b2[_0x1fca97]['_data']);for(let _0x402b01=0x240a+-0x12d1+-0x1139;_0x402b01<_0x5bb202['length'];++_0x402b01){const _0x2ef712=_0x5bb202[_0x402b01],_0x393ce7=_0x26057b[_0x2ef712['_output']],_0x48ada7=_0x18d2a7[_0x402b01];_0x142bf2[_0x2ef712['_input']]['eval'](_0x48ada7,_0x2ef712['_interpola'+'tion'],_0x393ce7);}}};h($h,'EMPTY',Object['freeze'](new $h('empty',Number['MAX_VALUE'],[],[],[])));let Qi=$h;class ra{static['joinPath'](_0x5c16f0,_0x1ee5a8){_0x1ee5a8=_0x1ee5a8||'.';const _0x195a5d=function(_0x42b31d){return _0x42b31d['replace'](/\\/g,'\x5c\x5c')['replace'](new RegExp('\x5c'+_0x1ee5a8,'g'),'\x5c'+_0x1ee5a8);};return _0x5c16f0['map'](_0x195a5d)['join'](_0x1ee5a8);}static['splitPath'](_0x2a3564,_0x1ce4cc){_0x1ce4cc=_0x1ce4cc||'.';const _0x2e7538=[];let _0x3d4f51='',_0x4d28c1=-0x17*-0x2f+0x2*-0x92b+0xe1d;for(;_0x4d28c1<_0x2a3564['length'];){let _0xb76317=_0x2a3564[_0x4d28c1++];_0xb76317==='\x5c'&&_0x4d28c1<_0x2a3564['length']?(_0xb76317=_0x2a3564[_0x4d28c1++],_0xb76317==='\x5c'||_0xb76317===_0x1ce4cc?_0x3d4f51+=_0xb76317:_0x3d4f51+='\x5c'+_0xb76317):_0xb76317===_0x1ce4cc?(_0x2e7538['push'](_0x3d4f51),_0x3d4f51=''):_0x3d4f51+=_0xb76317;}return _0x3d4f51['length']>0x1*0x22ed+-0x1*0xde1+0x382*-0x6&&_0x2e7538['push'](_0x3d4f51),_0x2e7538;}static['encode'](_0x4a9dc8,_0x302170,_0x115595){return(Array['isArray'](_0x4a9dc8)?_0x4a9dc8['join']('/'):_0x4a9dc8)+'/'+_0x302170+'/'+(Array['isArray'](_0x115595)?_0x115595['join']('/'):_0x115595);}['resolve'](_0x337a73){return null;}['unresolve'](_0x54be87){}['update'](_0x285312){}}class xu{constructor(_0x5a2a8c,_0x5d06d2,_0x1cf35,_0x490c75){_0x5a2a8c['set']?(this['_set']=_0x5a2a8c['set'],this['_get']=_0x5a2a8c['get']):this['_set']=_0x5a2a8c,this['_type']=_0x5d06d2,this['_component'+'s']=_0x1cf35,this['_targetPat'+'h']=_0x490c75,this['_isTransfo'+'rm']=this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0x8bf+-0x1b15+0x1263))==='localRotat'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(-0x56f*0x1+-0x40f+0x98b))==='localPosit'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0x1*0x206d+0x11c5*0x1+0xf*-0x358))==='localScale';}get['set'](){return this['_set'];}get['get'](){return this['_get'];}get['type'](){return this['_type'];}get['components'](){return this['_component'+'s'];}get['targetPath'](){return this['_targetPat'+'h'];}get['isTransfor'+'m'](){return this['_isTransfo'+'rm'];}}class Sr{constructor(_0x527235){h(this,'_isPathInM'+'ask',(_0x991b86,_0x205811)=>{const _0x18faf7=this['_mask'][_0x991b86];if(_0x18faf7){if(_0x18faf7['children']||_0x205811&&_0x18faf7['value']!==!(0x160e*-0x1+-0x781*0x1+0x2b*0xb0))return!(-0x9ef*0x1+0x661+-0x41*-0xe);}else return!(0x1b0a+-0x2449*0x1+-0x40*-0x25);return!(0x7*0x407+-0x1*-0x1b13+0x7e5*-0x7);});if(this['graph']=_0x527235,!_0x527235)return;this['_mask']=null;const _0x554b56={},_0x369967=function(_0x2ec3a1){_0x554b56[_0x2ec3a1['name']]=_0x2ec3a1;for(let _0x558aaa=-0x16e3+0x32d*0x1+-0x1d*-0xae;_0x558aaa<_0x2ec3a1['children']['length'];++_0x558aaa)_0x369967(_0x2ec3a1['children'][_0x558aaa]);};_0x369967(_0x527235),this['nodes']=_0x554b56,this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={};const _0x3f2812=function(_0x165266){let _0x47b1c2=_0x165266;for(;_0x47b1c2&&!(_0x47b1c2 instanceof lt);)_0x47b1c2=_0x47b1c2['parent'];let _0x177230;return _0x47b1c2&&(_0x47b1c2['render']?_0x177230=_0x47b1c2['render']['meshInstan'+'ces']:_0x47b1c2['model']&&(_0x177230=_0x47b1c2['model']['meshInstan'+'ces'])),_0x177230;};this['nodeCounts']={},this['activeNode'+'s']=[],this['handlers']={'localPosition':function(_0x5e803a){const _0x2c7e21=_0x5e803a['localPosit'+'ion'],_0x51c2fa=function(_0x27dc44){_0x2c7e21['set'](..._0x27dc44);};return Sr['createAnim'+'Target'](_0x51c2fa,'vector',0x186f+-0x10f*-0x16+-0x1f*0x18a,_0x5e803a,'localPosit'+'ion');},'localRotation':function(_0x2b4fd3){const _0x6dd7f2=_0x2b4fd3['localRotat'+'ion'],_0x37475a=function(_0x47df78){_0x6dd7f2['set'](..._0x47df78);};return Sr['createAnim'+'Target'](_0x37475a,'quaternion',-0x370+-0x9c4*0x1+0x8d*0x18,_0x2b4fd3,'localRotat'+'ion');},'localScale':function(_0x460db4){const _0x482980=_0x460db4['localScale'],_0x4be3ee=function(_0x30aae3){_0x482980['set'](..._0x30aae3);};return Sr['createAnim'+'Target'](_0x4be3ee,'vector',0x19b1+-0x239a+0x9ec,_0x460db4,'localScale');},'weight':function(_0x32d77b,_0x200fd8){_0x200fd8['indexOf']('name.')===-0x34a*-0x1+0x1*0x7c0+0x6*-0x1d7?_0x200fd8=_0x200fd8['replace']('name.',''):_0x200fd8=Number(_0x200fd8);const _0x21d699=_0x3f2812(_0x32d77b);let _0x10baad;if(_0x21d699){for(let _0x3fe683=0x2062*-0x1+-0x1d79+-0xc5f*-0x5;_0x3fe683<_0x21d699['length'];++_0x3fe683)if(_0x21d699[_0x3fe683]['node']['name']===_0x32d77b['name']&&_0x21d699[_0x3fe683]['morphInsta'+'nce']){const _0x44e737=_0x21d699[_0x3fe683]['morphInsta'+'nce'],_0x306e63=_0x198f2f=>{_0x44e737['setWeight'](_0x200fd8,_0x198f2f[-0x1*0x114d+0x12d7+0x2*-0xc5]);};_0x10baad||(_0x10baad=[]),_0x10baad['push'](_0x306e63);}}if(_0x10baad){const _0x24eb1f=_0x82919c=>{for(let _0x1ea3a5=-0x119f+-0x1625+0x27c4;_0x1ea3a5<_0x10baad['length'];++_0x1ea3a5)_0x10baad[_0x1ea3a5](_0x82919c);};return Sr['createAnim'+'Target'](_0x24eb1f,'number',-0x12*0x1f3+-0x1*-0xba7+0x5*0x4b0,_0x32d77b,'weight.'+_0x200fd8);}return null;},'materialTexture':(_0x21ce5a,_0x10697f)=>{const _0x2e8b79=_0x3f2812(_0x21ce5a);if(_0x2e8b79){let _0x2f500b;for(let _0x59b464=-0x2b*0x83+0x2457+-0xe56;_0x59b464<_0x2e8b79['length'];++_0x59b464)if(_0x2e8b79[_0x59b464]['node']['name']===_0x21ce5a['name']){_0x2f500b=_0x2e8b79[_0x59b464];break;}if(_0x2f500b){const _0x40a88e=_0x19ea8a=>{const _0x5125d4=this['animCompon'+'ent']['system']['app']['assets']['get'](_0x19ea8a[-0x11bb+0x1*-0xde7+0x1fa2]);_0x5125d4&&_0x5125d4['resource']&&_0x5125d4['type']==='texture'&&(_0x2f500b['material'][_0x10697f]=_0x5125d4['resource'],_0x2f500b['material']['update']());};return Sr['createAnim'+'Target'](_0x40a88e,'vector',0x2079+-0xd94+-0x12e4,_0x21ce5a,'materialTe'+'xture','material');}}return null;}};}['_isPathAct'+'ive'](_0x1a5bdc){if(!this['_mask'])return!(0x7*0xdf+0xc*0x147+-0x449*0x5);const _0xb9c037=[_0x1a5bdc['entityPath'][-0x1*-0x12f+0x7*0x10f+-0x898],this['graph']['name']];for(let _0x590d02=-0x26+-0x817+-0x3*-0x2bf;_0x590d02<_0xb9c037['length'];++_0x590d02){let _0x5138fc=_0xb9c037[_0x590d02];if(this['_isPathInM'+'ask'](_0x5138fc,_0x1a5bdc['entityPath']['length']===-0x211*-0xa+-0x5f1+0x75c*-0x2))return!(-0x2*-0xc4+-0x61c+0x494);for(let _0x577d37=0xe*0x268+0x1*-0x1d9e+0x3*-0x15b;_0x577d37<_0x1a5bdc['entityPath']['length'];_0x577d37++)if(_0x5138fc+='/'+_0x1a5bdc['entityPath'][_0x577d37],this['_isPathInM'+'ask'](_0x5138fc,_0x577d37===_0x1a5bdc['entityPath']['length']-(0x1177+-0x6+-0x10*0x117)))return!(0xa13*-0x2+0x1a3*-0x11+0x1*0x2ff9);}return!(0x73d+0x1d0*0xd+-0xa44*0x3);}['findNode'](_0x2d142c){if(!this['_isPathAct'+'ive'](_0x2d142c))return null;let _0x18d2e9;if(this['graph']&&(_0x18d2e9=this['graph']['findByPath'](_0x2d142c['entityPath']),_0x18d2e9||(_0x18d2e9=this['graph']['findByPath'](_0x2d142c['entityPath']['slice'](-0x9*0x8b+-0xde*-0x1f+-0x15fe)))),!_0x18d2e9){_0x18d2e9=this['nodes'][_0x2d142c['entityPath'][_0x2d142c['entityPath']['length']-(-0x24bf+-0x2260+-0x11c8*-0x4)]||''];const _0x2c1e89=ra['encode'](_0x2d142c['entityPath'][_0x2d142c['entityPath']['length']-(0x1*-0x18e+-0x105e+0x161*0xd)]||'','graph',_0x2d142c['propertyPa'+'th']);this['visitedFal'+'lbackGraph'+'Paths'][_0x2c1e89]===0x22f1*0x1+0x31c+-0x260c&&w['warnOnce']('Anim\x20Binde'+'r:\x20Multipl'+'e\x20animatio'+'n\x20curves\x20w'+'ith\x20the\x20pa'+'th\x20'+_0x2c1e89+('\x20are\x20prese'+'nt\x20in\x20the\x20')+this['graph']['path']+('\x20graph\x20whi'+'ch\x20may\x20res'+'ult\x20in\x20the'+'\x20incorrect'+'\x20binding\x20o'+'f\x20animatio'+'ns')),Number['isFinite'](this['visitedFal'+'lbackGraph'+'Paths'][_0x2c1e89])?this['visitedFal'+'lbackGraph'+'Paths'][_0x2c1e89]++:this['visitedFal'+'lbackGraph'+'Paths'][_0x2c1e89]=0x5c9*0x2+0x4*0x4d2+-0x1*0x1eda;}return _0x18d2e9;}static['createAnim'+'Target'](_0x2d52ce,_0x498f2c,_0x4d6908,_0x16ead8,_0x398242,_0x1251f6){const _0x24e38d=ra['encode'](_0x16ead8['path'],_0x1251f6||'entity',_0x398242);return new xu(_0x2d52ce,_0x498f2c,_0x4d6908,_0x24e38d);}['resolve'](_0x23a984){const _0x1d3cf2=ra['encode'](_0x23a984['entityPath'],_0x23a984['component'],_0x23a984['propertyPa'+'th']);let _0x40f4f2=this['targetCach'+'e'][_0x1d3cf2];if(_0x40f4f2)return _0x40f4f2;const _0x376366=this['findNode'](_0x23a984);if(!_0x376366)return null;const _0x4529be=this['handlers'][_0x23a984['propertyPa'+'th']];return!_0x4529be||(_0x40f4f2=_0x4529be(_0x376366),!_0x40f4f2)?null:(this['targetCach'+'e'][_0x1d3cf2]=_0x40f4f2,this['nodeCounts'][_0x376366['path']]?this['nodeCounts'][_0x376366['path']]++:(this['activeNode'+'s']['push'](_0x376366),this['nodeCounts'][_0x376366['path']]=-0x21ba+-0x1ed6+0x4091),_0x40f4f2);}['unresolve'](_0x34bc9b){if(_0x34bc9b['component']!=='graph')return;const _0x3ff43b=this['nodes'][_0x34bc9b['entityPath'][_0x34bc9b['entityPath']['length']-(0xf0c+0x576*-0x7+0x172f)]||''];if(this['nodeCounts'][_0x3ff43b['path']]--,this['nodeCounts'][_0x3ff43b['path']]===0x4e9*0x6+-0x4*-0x6aa+-0x1*0x381e){const _0x38f64a=this['activeNode'+'s'],_0x200fe8=_0x38f64a['indexOf'](_0x3ff43b['node']),_0x3e4c3a=_0x38f64a['length'];_0x200fe8<_0x3e4c3a-(-0xec1+-0x79*-0x47+-0x12cd)&&(_0x38f64a[_0x200fe8]=_0x38f64a[_0x3e4c3a-(-0xf76*-0x2+-0x12*-0x45+-0x23c5*0x1)]),_0x38f64a['pop']();}}['update'](_0x408f65){const _0x3b2284=this['activeNode'+'s'];for(let _0x39c486=-0x221*-0x1+-0x307*0x6+0x1009;_0x39c486<_0x3b2284['length'];++_0x39c486)_0x3b2284[_0x39c486]['_dirtifyLo'+'cal']();}['assignMask'](_0x5b9d37){return _0x5b9d37!==this['_mask']?(this['_mask']=_0x5b9d37,!(0xb85*0x3+-0x2065+0x115*-0x2)):!(0x10d*-0x25+-0xe41+0x3523);}}class Wv extends we{constructor(){super(...arguments),h(this,'_animation'+'s',{}),h(this,'_assets',[]),h(this,'_loop',!(-0x1ed3+0xb2b+0x13a8)),h(this,'animEvalua'+'tor',null),h(this,'model',null),h(this,'skeleton',null),h(this,'fromSkel',null),h(this,'toSkel',null),h(this,'animations'+'Index',{}),h(this,'prevAnim',null),h(this,'currAnim',null),h(this,'blend',-0x110f*-0x1+-0x100f*0x1+-0x100),h(this,'blending',!(-0xfa2+0x1192+-0x21*0xf)),h(this,'blendSpeed',-0x766+0x1*0x31a+0x44c),h(this,'activate',!(0x1485+-0x3df+0x853*-0x2)),h(this,'speed',-0x220d+-0x15d2+-0x10*-0x37e);}set['animations'](_0x32a5c7){this['_animation'+'s']=_0x32a5c7,this['onSetAnima'+'tions']();}get['animations'](){return this['_animation'+'s'];}set['assets'](_0x4a56e0){const _0x29df0e=this['_assets'];if(_0x29df0e&&_0x29df0e['length']){for(let _0x2639fb=-0x26a8+0x3*-0x242+0x2d6e;_0x2639fb<_0x29df0e['length'];_0x2639fb++)if(_0x29df0e[_0x2639fb]){const _0x531b6c=this['system']['app']['assets']['get'](_0x29df0e[_0x2639fb]);if(_0x531b6c){_0x531b6c['off']('change',this['onAssetCha'+'nged'],this),_0x531b6c['off']('remove',this['onAssetRem'+'oved'],this);const _0x544b59=this['animations'+'Index'][_0x531b6c['id']];this['currAnim']===_0x544b59&&this['_stopCurre'+'ntAnimatio'+'n'](),delete this['animations'][_0x544b59],delete this['animations'+'Index'][_0x531b6c['id']];}}}this['_assets']=_0x4a56e0;const _0x4d80f0=_0x4a56e0['map'](_0x266913=>_0x266913 instanceof pe?_0x266913['id']:_0x266913);this['loadAnimat'+'ionAssets'](_0x4d80f0);}get['assets'](){return this['_assets'];}set['currentTim'+'e'](_0x38fddc){if(this['skeleton']&&(this['skeleton']['currentTim'+'e']=_0x38fddc,this['skeleton']['addTime'](-0x1da9+-0x2709+0xb73*0x6),this['skeleton']['updateGrap'+'h']()),this['animEvalua'+'tor']){const _0x1d016c=this['animEvalua'+'tor']['clips'];for(let _0x1e0258=0xfd9*-0x1+-0x5*-0x62+0x4a5*0x3;_0x1e0258<_0x1d016c['length'];++_0x1e0258)_0x1d016c[_0x1e0258]['time']=_0x38fddc;}}get['currentTim'+'e'](){if(this['skeleton'])return this['skeleton']['_time'];if(this['animEvalua'+'tor']){const _0x14390b=this['animEvalua'+'tor']['clips'];if(_0x14390b['length']>-0x2509+0x212e+0x3db)return _0x14390b[_0x14390b['length']-(-0x12*0x111+0xa95+0x89e)]['time'];}return-0x84*-0x2e+-0x23c6+0xc0e;}get['duration'](){return this['currAnim']?this['animations'][this['currAnim']]['duration']:(w['warn']('No\x20animati'+'on\x20is\x20play'+'ing\x20to\x20get'+'\x20a\x20duratio'+'n.\x20Returni'+'ng\x200.'),0xd0d+0x44*0x5+-0x3*0x4cb);}set['loop'](_0xba56b){if(this['_loop']=_0xba56b,this['skeleton']&&(this['skeleton']['looping']=_0xba56b),this['animEvalua'+'tor']){for(let _0x476441=0x2368+-0x4a*-0x7a+-0x46ac;_0x476441<this['animEvalua'+'tor']['clips']['length'];++_0x476441)this['animEvalua'+'tor']['clips'][_0x476441]['loop']=_0xba56b;}}get['loop'](){return this['_loop'];}['play'](_0x8274c2,_0x1e679b=0x34*0x3c+-0x1561+-0x1*-0x931){if(!(!this['enabled']||!this['entity']['enabled'])){if(!this['animations'][_0x8274c2]){w['error']('Trying\x20to\x20'+'play\x20anima'+'tion\x20\x27'+_0x8274c2+('\x27\x20which\x20do'+'esn\x27t\x20exis'+'t'));return;}if(this['prevAnim']=this['currAnim'],this['currAnim']=_0x8274c2,this['model']){!this['skeleton']&&!this['animEvalua'+'tor']&&this['_createAni'+'mationCont'+'roller']();const _0x16b285=this['animations'][this['prevAnim']],_0x38046d=this['animations'][this['currAnim']];if(this['blending']=_0x1e679b>0x19ca+-0xf9*0x18+0x2*-0x139&&!!this['prevAnim'],this['blending']&&(this['blend']=0x3ac*0x3+-0x11f4*0x2+-0x213*-0xc,this['blendSpeed']=(-0xcdc+-0x52*0x6d+-0x3*-0xfed)/_0x1e679b),this['skeleton']&&(this['blending']?(this['fromSkel']['animation']=_0x16b285,this['fromSkel']['addTime'](this['skeleton']['_time']),this['toSkel']['animation']=_0x38046d):this['skeleton']['animation']=_0x38046d),this['animEvalua'+'tor']){const _0x44bba1=this['animEvalua'+'tor'];if(this['blending']){for(;_0x44bba1['clips']['length']>0x13b5+0x23c5*-0x1+0x9*0x1c9;)_0x44bba1['removeClip'](-0x73b*0x1+0x1b*-0x9f+0x100*0x18);}else this['animEvalua'+'tor']['removeClip'+'s']();const _0x467e0e=new Dh(this['animations'][this['currAnim']],-0x831+0x1*-0x18c7+0x1*0x20f8,0x21d5*-0x1+0x2113+0x3*0x41,!(-0xe9*-0x16+0xa4+-0x2e*0x73),this['loop']);_0x467e0e['name']=this['currAnim'],_0x467e0e['blendWeigh'+'t']=this['blending']?0x9ef+-0x14*-0xfe+0x2b5*-0xb:0x4f7*0x3+-0x2225+0x1f*0x9f,_0x467e0e['reset'](),this['animEvalua'+'tor']['addClip'](_0x467e0e);}}this['playing']=!(-0x1527+0x851*0x1+0xcd6);}}['getAnimati'+'on'](_0x393c58){return this['animations'][_0x393c58];}['setModel'](_0x43785b){_0x43785b!==this['model']&&(this['_resetAnim'+'ationContr'+'oller'](),this['model']=_0x43785b,this['animations']&&this['currAnim']&&this['animations'][this['currAnim']]&&this['play'](this['currAnim']));}['onSetAnima'+'tions'](){const _0x1463e3=this['entity']['model'];if(_0x1463e3){const _0x12a06e=_0x1463e3['model'];_0x12a06e&&_0x12a06e!==this['model']&&this['setModel'](_0x12a06e);}if(!this['currAnim']&&this['activate']&&this['enabled']&&this['entity']['enabled']){const _0x1a6f02=Object['keys'](this['_animation'+'s']);_0x1a6f02['length']>-0x1*0xd8d+0xbf8+0x1*0x195&&this['play'](_0x1a6f02[-0x114c+-0x73*-0x46+0x1*-0xe26]);}}['_resetAnim'+'ationContr'+'oller'](){this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['_createAni'+'mationCont'+'roller'](){const _0x22e9af=this['model'],_0x17bc0e=this['animations'];let _0x4a6780=!(-0x1*-0x1131+0x1*-0x26e+-0xec2),_0xedc5c9=!(-0x229d+0x1*-0x517+0x5*0x7f1);for(const _0x594f9f in _0x17bc0e)_0x17bc0e['hasOwnProp'+'erty'](_0x594f9f)&&(_0x17bc0e[_0x594f9f]['constructo'+'r']===Qi?_0xedc5c9=!(0x164c+-0x368+-0x174*0xd):_0x4a6780=!(0x40*-0x85+-0x30*0xb7+0x4390));const _0x29c2c4=_0x22e9af['getGraph']();_0x4a6780?(this['fromSkel']=new Sf(_0x29c2c4),this['toSkel']=new Sf(_0x29c2c4),this['skeleton']=new Sf(_0x29c2c4),this['skeleton']['looping']=this['loop'],this['skeleton']['setGraph'](_0x29c2c4)):_0xedc5c9&&(this['animEvalua'+'tor']=new Gv(new Sr(this['entity'])));}['loadAnimat'+'ionAssets'](_0x5017ad){if(!_0x5017ad||!_0x5017ad['length'])return;const _0x1461f7=this['system']['app']['assets'],_0x587731=_0x114c38=>{if(_0x114c38['resources']['length']>0xae*-0x1f+-0xf52+-0x79*-0x4d){for(let _0x3c1c88=0xd*0x9+-0x1*-0x1e73+-0xb8*0x2b;_0x3c1c88<_0x114c38['resources']['length'];_0x3c1c88++)this['animations'][_0x114c38['resources'][_0x3c1c88]['name']]=_0x114c38['resources'][_0x3c1c88],this['animations'+'Index'][_0x114c38['id']]=_0x114c38['resources'][_0x3c1c88]['name'];}else this['animations'][_0x114c38['name']]=_0x114c38['resource'],this['animations'+'Index'][_0x114c38['id']]=_0x114c38['name'];this['animations']=this['animations'];},_0x3dcfa3=_0x5a6194=>{_0x5a6194['off']('change',this['onAssetCha'+'nged'],this),_0x5a6194['on']('change',this['onAssetCha'+'nged'],this),_0x5a6194['off']('remove',this['onAssetRem'+'oved'],this),_0x5a6194['on']('remove',this['onAssetRem'+'oved'],this),_0x5a6194['resource']?_0x587731(_0x5a6194):(_0x5a6194['once']('load',_0x587731,this),this['enabled']&&this['entity']['enabled']&&_0x1461f7['load'](_0x5a6194));};for(let _0x342dfd=0x13*-0xd9+-0x1*-0x83+0x1f3*0x8,_0xb9e4ff=_0x5017ad['length'];_0x342dfd<_0xb9e4ff;_0x342dfd++){const _0x248882=_0x1461f7['get'](_0x5017ad[_0x342dfd]);_0x248882?_0x3dcfa3(_0x248882):_0x1461f7['on']('add:'+_0x5017ad[_0x342dfd],_0x3dcfa3);}}['onAssetCha'+'nged'](_0x3c0738,_0x163e91,_0x67a8c5,_0x5b18f1){if(_0x163e91==='resource'||_0x163e91==='resources'){if(_0x163e91==='resources'&&_0x67a8c5&&_0x67a8c5['length']===0x19fd+0x1023+0x2*-0x1510&&(_0x67a8c5=null),_0x67a8c5){let _0xd4d23f=!(-0x196e+-0x3c*0x7a+0x3607);if(_0x67a8c5['length']>0xf5e+0x23ec+-0x3349){if(_0x5b18f1&&_0x5b18f1['length']>0x21d+-0x1046*0x1+0x103*0xe){for(let _0x2b3d13=-0x1efd*-0x1+0x140d+0x116*-0x2f;_0x2b3d13<_0x5b18f1['length'];_0x2b3d13++)delete this['animations'][_0x5b18f1[_0x2b3d13]['name']];}else delete this['animations'][_0x3c0738['name']];_0xd4d23f=!(0x5*0x24b+-0x2dc+-0x89a);for(let _0x4dd46f=-0x75b*0x1+0x286+0x4d5;_0x4dd46f<_0x67a8c5['length'];_0x4dd46f++)this['animations'][_0x67a8c5[_0x4dd46f]['name']]=_0x67a8c5[_0x4dd46f],!_0xd4d23f&&this['currAnim']===_0x67a8c5[_0x4dd46f]['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0xd4d23f=!(0x1f4*-0xb+-0x21df+0x375b),this['play'](_0x67a8c5[_0x4dd46f]['name']));_0xd4d23f||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}else{if(_0x5b18f1&&_0x5b18f1['length']>0x484+-0x3*-0x766+-0x1ab5){for(let _0x14062c=0xe91+-0x13a1+0x2*0x288;_0x14062c<_0x5b18f1['length'];_0x14062c++)delete this['animations'][_0x5b18f1[_0x14062c]['name']];}this['animations'][_0x3c0738['name']]=_0x67a8c5[-0x692+-0x103a*-0x1+-0x1*0x9a8]||_0x67a8c5,_0xd4d23f=!(0x17c7+-0x36*-0x43+-0x25e8),this['currAnim']===_0x3c0738['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0xd4d23f=!(0x4b*0x33+-0x1667+0x776),this['play'](_0x3c0738['name'])),_0xd4d23f||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}this['animations'+'Index'][_0x3c0738['id']]=_0x3c0738['name'];}else{if(_0x5b18f1['length']>-0xe79+-0x4*-0x1b+0xe0e){for(let _0xdedac2=-0x2339+-0x17f+0xa*0x3ac;_0xdedac2<_0x5b18f1['length'];_0xdedac2++)delete this['animations'][_0x5b18f1[_0xdedac2]['name']],this['currAnim']===_0x5b18f1[_0xdedac2]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x3c0738['name']],this['currAnim']===_0x3c0738['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x3c0738['id']];}}}['onAssetRem'+'oved'](_0xb91412){if(_0xb91412['off']('remove',this['onAssetRem'+'oved'],this),this['animations']){if(_0xb91412['resources']['length']>-0x7*-0x517+0xfd9+-0x1*0x3379){for(let _0x166488=0x17d8+0xb89*-0x1+0xc4f*-0x1;_0x166488<_0xb91412['resources']['length'];_0x166488++)delete this['animations'][_0xb91412['resources'][_0x166488]['name']],this['currAnim']===_0xb91412['resources'][_0x166488]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0xb91412['name']],this['currAnim']===_0xb91412['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0xb91412['id']];}}['_stopCurre'+'ntAnimatio'+'n'](){if(this['currAnim']=null,this['playing']=!(-0xd81*-0x1+-0x19d8+-0x4*-0x316),this['skeleton']&&(this['skeleton']['currentTim'+'e']=0x14ed+0x95*-0x1+0xc*-0x1b2,this['skeleton']['animation']=null),this['animEvalua'+'tor']){for(let _0x3bf358=0x7e0+-0x1e30+0x1650;_0x3bf358<this['animEvalua'+'tor']['clips']['length'];++_0x3bf358)this['animEvalua'+'tor']['clips'][_0x3bf358]['stop']();this['animEvalua'+'tor']['update'](-0x2*-0x4ed+-0x74b+-0x28f*0x1),this['animEvalua'+'tor']['removeClip'+'s']();}}['onEnable'](){super['onEnable']();const _0x599660=this['assets'],_0x55e63d=this['system']['app']['assets'];if(_0x599660)for(let _0x169ddb=-0x29*0xcf+0x1568+0xbbf,_0xf058c1=_0x599660['length'];_0x169ddb<_0xf058c1;_0x169ddb++){let _0x4dd576=_0x599660[_0x169ddb];_0x4dd576 instanceof pe||(_0x4dd576=_0x55e63d['get'](_0x4dd576)),_0x4dd576&&!_0x4dd576['resource']&&_0x55e63d['load'](_0x4dd576);}if(this['activate']&&!this['currAnim']){const _0x6d5d14=Object['keys'](this['animations']);_0x6d5d14['length']>-0x98a+-0x769*-0x3+-0xcb1&&this['play'](_0x6d5d14[0x379*-0x2+-0x665*0x1+0xd57]);}}['onBeforeRe'+'move'](){for(let _0x116aca=0x5b*0x3f+0x8*0x1a0+-0x2365;_0x116aca<this['assets']['length'];_0x116aca++){let _0x3b8b06=this['assets'][_0x116aca];typeof _0x3b8b06=='number'&&(_0x3b8b06=this['system']['app']['assets']['get'](_0x3b8b06)),_0x3b8b06&&(_0x3b8b06['off']('change',this['onAssetCha'+'nged'],this),_0x3b8b06['off']('remove',this['onAssetRem'+'oved'],this));}this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['update'](_0x1d92cf){if(this['blending']&&(this['blend']+=_0x1d92cf*this['blendSpeed'],this['blend']>=-0x11e6+0x14*0x2c+0xe77&&(this['blend']=0x16f3+-0x17a7+0xb5)),this['playing']){const _0x514552=this['skeleton'];if(_0x514552!==null&&this['model']!==null){if(this['blending'])_0x514552['blend'](this['fromSkel'],this['toSkel'],this['blend']);else{const _0x285e4c=_0x1d92cf*this['speed'];_0x514552['addTime'](_0x285e4c),this['speed']>0x891+0x1d31+0x166*-0x1b&&_0x514552['_time']===_0x514552['animation']['duration']&&!this['loop']?this['playing']=!(0x19d2+-0xa5d+0x17*-0xac):this['speed']<-0x1*-0x1a5d+0x114f+-0x1ae*0x1a&&_0x514552['_time']===0x277+-0x5bc+0x345&&!this['loop']&&(this['playing']=!(0x3*0xbe1+0x5cd+-0x296f));}this['blending']&&this['blend']===0xa24+0xe57+0xc3d*-0x2&&(_0x514552['animation']=this['toSkel']['animation']),_0x514552['updateGrap'+'h']();}}const _0x28d656=this['animEvalua'+'tor'];if(_0x28d656){for(let _0x179e55=-0x19ce+0x1*-0xf25+0x1*0x28f3;_0x179e55<_0x28d656['clips']['length'];++_0x179e55){const _0x3c85b1=_0x28d656['clips'][_0x179e55];_0x3c85b1['speed']=this['speed'],this['playing']?_0x3c85b1['resume']():_0x3c85b1['pause']();}this['blending']&&_0x28d656['clips']['length']>-0x496*0x3+-0x5e1*-0x1+0x7e2&&(_0x28d656['clips'][-0x2*-0x5c8+-0x214d+-0xadf*-0x2]['blendWeigh'+'t']=this['blend']),_0x28d656['update'](_0x1d92cf);}this['blending']&&this['blend']===-0x5*-0x7a4+0xb85+-0x31b8&&(this['blending']=!(-0xce*0xa+0x49+0x1f1*0x4));}}class LL{constructor(){this['enabled']=!(-0x11c3*0x1+0xee4+0x2df);}}const Tu=['enabled'];class RL extends ct{constructor(_0x51331d){super(_0x51331d),this['id']='animation',this['ComponentT'+'ype']=Wv,this['DataType']=LL,this['schema']=Tu,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x5144de,_0x1657c5,_0x230ffb){_0x230ffb=['activate','enabled','loop','speed','assets'];for(const _0x11c7db of _0x230ffb)_0x1657c5['hasOwnProp'+'erty'](_0x11c7db)&&(_0x5144de[_0x11c7db]=_0x1657c5[_0x11c7db]);super['initialize'+'ComponentD'+'ata'](_0x5144de,_0x1657c5,Tu);}['cloneCompo'+'nent'](_0x5ec3fa,_0x788a37){this['addCompone'+'nt'](_0x788a37,{}),_0x788a37['animation']['assets']=_0x5ec3fa['animation']['assets']['slice'](),_0x788a37['animation']['speed']=_0x5ec3fa['animation']['speed'],_0x788a37['animation']['loop']=_0x5ec3fa['animation']['loop'],_0x788a37['animation']['activate']=_0x5ec3fa['animation']['activate'],_0x788a37['animation']['enabled']=_0x5ec3fa['animation']['enabled'];const _0x2f1ccc={},_0x2c4cc1=_0x5ec3fa['animation']['animations'];for(const _0x3887b4 in _0x2c4cc1)_0x2c4cc1['hasOwnProp'+'erty'](_0x3887b4)&&(_0x2f1ccc[_0x3887b4]=_0x2c4cc1[_0x3887b4]);_0x788a37['animation']['animations']=_0x2f1ccc;const _0x3b4eb5={},_0xcff1de=_0x5ec3fa['animation']['animations'+'Index'];for(const _0x4ed820 in _0xcff1de)_0xcff1de['hasOwnProp'+'erty'](_0x4ed820)&&(_0x3b4eb5[_0x4ed820]=_0xcff1de[_0x4ed820]);return _0x788a37['animation']['animations'+'Index']=_0x3b4eb5,_0x788a37['animation'];}['onBeforeRe'+'move'](_0x585baa,_0x58a45d){_0x58a45d['onBeforeRe'+'move']();}['onUpdate'](_0x3f7238){const _0x1b3752=this['store'];for(const _0x4c262a in _0x1b3752)if(_0x1b3752['hasOwnProp'+'erty'](_0x4c262a)){const _0x121177=_0x1b3752[_0x4c262a];_0x121177['data']['enabled']&&_0x121177['entity']['enabled']&&_0x121177['entity']['animation']['update'](_0x3f7238);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Wv['prototype'],Tu);class ml{constructor(_0x5c1db8,_0x4f056f,_0x46bb72,_0x240143,_0x161281=-0x4c8+-0x2159+0x2622*0x1){this['_state']=_0x5c1db8,this['_parent']=_0x4f056f,this['_name']=_0x46bb72,Array['isArray'](_0x240143)?(this['_point']=new J(_0x240143[0x1c67*-0x1+0x12b+-0x7*-0x3e4],_0x240143[0x62b*0x1+0x311*-0xb+0x1b91]),this['_pointLeng'+'th']=this['_point']['length']()):(this['_point']=_0x240143,this['_pointLeng'+'th']=_0x240143),this['_speed']=_0x161281,this['_weightedS'+'peed']=0x117f*0x2+0x2*-0xbcf+-0xb5f,this['_weight']=0x1fce+-0x4d3+-0xd7d*0x2,this['_animTrack']=null;}get['parent'](){return this['_parent'];}get['name'](){return this['_name'];}get['path'](){return this['_parent']?this['_parent']['path']+'.'+this['_name']:this['_name'];}get['point'](){return this['_point'];}get['pointLengt'+'h'](){return this['_pointLeng'+'th'];}set['weight'](_0x3d5c49){this['_weight']=_0x3d5c49;}get['weight'](){return this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['normalized'+'Weight'](){const _0x1ea5ad=this['_state']['totalWeigh'+'t'];return _0x1ea5ad===0xf4d+0x3a7+-0x12f4?0x1129+-0x3c1+-0x16*0x9c:this['weight']/_0x1ea5ad;}get['speed'](){return this['_weightedS'+'peed']*this['_speed'];}get['absoluteSp'+'eed'](){return Math['abs'](this['_speed']);}set['weightedSp'+'eed'](_0x4f0a32){this['_weightedS'+'peed']=_0x4f0a32;}get['weightedSp'+'eed'](){return this['_weightedS'+'peed'];}set['animTrack'](_0x2b7df6){this['_animTrack']=_0x2b7df6;}get['animTrack'](){return this['_animTrack'];}}class Jn extends ml{constructor(_0x593006,_0x2acfd8,_0x3721c5,_0x15f129,_0x5c2c27,_0x2cc9fe,_0x11be85,_0x560e71,_0x1f6c66){super(_0x593006,_0x2acfd8,_0x3721c5,_0x15f129),this['_parameter'+'s']=_0x5c2c27,this['_parameter'+'Values']=new Array(_0x5c2c27['length']),this['_children']=[],this['_findParam'+'eter']=_0x1f6c66,this['_syncAnima'+'tions']=_0x11be85!==!(0x24f1+0x1d*-0x17+0x11*-0x205),this['_pointCach'+'e']={};for(let _0x3f5212=-0x246b+0x95b*-0x1+0x2dc6;_0x3f5212<_0x2cc9fe['length'];_0x3f5212++){const _0x100f8a=_0x2cc9fe[_0x3f5212];_0x100f8a['children']?this['_children']['push'](_0x560e71(_0x100f8a['type'],_0x593006,this,_0x100f8a['name'],0x1aa*0x5+0x25*0x27+-0xbc*0x13,_0x100f8a['parameter']?[_0x100f8a['parameter']]:_0x100f8a['parameters'],_0x100f8a['children'],_0x100f8a['syncAnimat'+'ions'],_0x560e71,_0x1f6c66)):this['_children']['push'](new ml(_0x593006,this,_0x100f8a['name'],_0x100f8a['point'],_0x100f8a['speed']));}}get['weight'](){return this['calculateW'+'eights'](),this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['syncAnimat'+'ions'](){return this['_syncAnima'+'tions'];}['getChild'](_0x3669a2){for(let _0x1a8e08=0x1fb8+-0x2*-0xa69+-0x348a*0x1;_0x1a8e08<this['_children']['length'];_0x1a8e08++)if(this['_children'][_0x1a8e08]['name']===_0x3669a2)return this['_children'][_0x1a8e08];return null;}['updatePara'+'meterValue'+'s'](){let _0x54793e=!(-0x21c0+-0x99b*0x3+-0x13*-0x34b);for(let _0x12f310=-0x2191*-0x1+0x3c1+0x12a9*-0x2;_0x12f310<this['_parameter'+'Values']['length'];_0x12f310++){const _0x56aa5e=this['_findParam'+'eter'](this['_parameter'+'s'][_0x12f310])['value'];this['_parameter'+'Values'][_0x12f310]!==_0x56aa5e&&(this['_parameter'+'Values'][_0x12f310]=_0x56aa5e,_0x54793e=!(-0x3*0xc0b+-0x4eb+-0xdaf*-0x3));}return _0x54793e;}['getNodeWei'+'ghtedDurat'+'ion'](_0x13e62c){return this['_children'][_0x13e62c]['animTrack']['duration']/this['_children'][_0x13e62c]['speedMulti'+'plier']*this['_children'][_0x13e62c]['weight'];}['getNodeCou'+'nt'](){let _0x40424c=-0x2268+0x5e3+0x1c85;for(let _0x207211=-0x138e+0x11c3*-0x1+0x2551;_0x207211<this['_children']['length'];_0x207211++)this['_children'][_0x207211]['constructo'+'r']===Jn?_0x40424c+=this['_children'][_0x207211]['getNodeCou'+'nt']():_0x40424c++;return _0x40424c;}}class OL extends Jn{constructor(_0x2c88d4,_0x56194d,_0x25dea2,_0x333492,_0x5d4b29,_0x116e53,_0x4a0016,_0xfc0e2f,_0x64b0f4){_0x116e53['sort']((_0x5de5d8,_0x29e958)=>_0x5de5d8['point']-_0x29e958['point']),super(_0x2c88d4,_0x56194d,_0x25dea2,_0x333492,_0x5d4b29,_0x116e53,_0x4a0016,_0xfc0e2f,_0x64b0f4);}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0xf719d1=-0xf03+-0x267d+0x3580;this['_children'][-0xe2a+-0x1*0x9ea+-0x605*-0x4]['weight']=0x1*0x985+0x2*0x587+-0x1493;for(let _0x312f33=0x94e+-0x2658+-0x6*-0x4d7;_0x312f33<this['_children']['length'];_0x312f33++){const _0xbce72e=this['_children'][_0x312f33];if(_0x312f33!==this['_children']['length']-(0x15a*0x5+-0x20c5*-0x1+-0x2786)){const _0x4483a6=this['_children'][_0x312f33+(-0x2231+0x2b*0x21+0x1ca7)];if(_0xbce72e['point']===_0x4483a6['point'])_0xbce72e['weight']=0x20*-0xf4+-0x8*-0x224+-0x10*-0xd6+0.5,_0x4483a6['weight']=0x19ed+-0x7*0xbb+0x14d*-0x10+0.5;else{if(Y['between'](this['_parameter'+'Values'][-0x3*0xc77+0x1678+0xeed],_0xbce72e['point'],_0x4483a6['point'],!(-0x1*-0x18c1+-0x6c1+0xc*-0x180))){const _0x6da775=Math['abs'](_0xbce72e['point']-_0x4483a6['point']),_0x2b89e2=Math['abs'](_0xbce72e['point']-this['_parameter'+'Values'][0x1*-0x2419+-0x8cd+0x2ce6]),_0x175f7b=(_0x6da775-_0x2b89e2)/_0x6da775;_0xbce72e['weight']=_0x175f7b,_0x4483a6['weight']=0x8*0xf+-0x2*-0xb2f+0x16d5*-0x1-_0x175f7b;}else _0x4483a6['weight']=0xe4*0x13+0xc24+-0x1d10;}}this['_syncAnima'+'tions']&&(_0xf719d1+=_0xbce72e['animTrack']['duration']/_0xbce72e['absoluteSp'+'eed']*_0xbce72e['weight']);}if(this['_syncAnima'+'tions'])for(let _0x4aee2f=0x1627*0x1+0x251c+-0x3b43;_0x4aee2f<this['_children']['length'];_0x4aee2f++){const _0x5cb147=this['_children'][_0x4aee2f];_0x5cb147['weightedSp'+'eed']=_0x5cb147['animTrack']['duration']/_0x5cb147['absoluteSp'+'eed']/_0xf719d1;}}}const ki=class ki extends Jn{['pointDista'+'nceCache'](_0x265b75,_0x512f09){const _0x121bc5=''+_0x265b75+_0x512f09;return this['_pointCach'+'e'][_0x121bc5]||(this['_pointCach'+'e'][_0x121bc5]=this['_children'][_0x512f09]['point']['clone']()['sub'](this['_children'][_0x265b75]['point'])),this['_pointCach'+'e'][_0x121bc5];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x1d193b,_0x34d7ae;ki['_p']['set'](...this['_parameter'+'Values']),_0x1d193b=0x1*0x24e5+-0x11e+-0x23c7,_0x34d7ae=0x2*0x829+-0x26d0+0x2*0xb3f;for(let _0x2fdc86=0x53*-0x7+0x3*0xc2f+0x2248*-0x1;_0x2fdc86<this['_children']['length'];_0x2fdc86++){const _0x2e0868=this['_children'][_0x2fdc86],_0xc103dd=_0x2e0868['point'];ki['_pip']['set'](ki['_p']['x'],ki['_p']['y'])['sub'](_0xc103dd);let _0x4e9bb7=Number['MAX_VALUE'];for(let _0x494603=-0x22a+-0xddb+0x1005;_0x494603<this['_children']['length'];_0x494603++){if(_0x2fdc86===_0x494603)continue;const _0xd709ef=this['pointDista'+'nceCache'](_0x2fdc86,_0x494603),_0x44ee04=Y['clamp'](0x12e0+0x6f7*0x1+-0x19d6-ki['_pip']['dot'](_0xd709ef)/_0xd709ef['lengthSq'](),-0x11*-0x134+-0x2*0x216+-0x1048,-0xc5f*-0x1+-0x2327+0x16c9);_0x44ee04<_0x4e9bb7&&(_0x4e9bb7=_0x44ee04);}_0x2e0868['weight']=_0x4e9bb7,_0x1d193b+=_0x4e9bb7,this['_syncAnima'+'tions']&&(_0x34d7ae+=_0x2e0868['animTrack']['duration']/_0x2e0868['absoluteSp'+'eed']*_0x2e0868['weight']);}for(let _0x40cefe=0x33e*-0x8+-0x26b5*0x1+-0x13*-0x367;_0x40cefe<this['_children']['length'];_0x40cefe++){const _0x1440cf=this['_children'][_0x40cefe];_0x1440cf['weight']=_0x1440cf['_weight']/_0x1d193b,this['_syncAnima'+'tions']&&(_0x1440cf['weightedSp'+'eed']=_0x1440cf['animTrack']['duration']/_0x1440cf['absoluteSp'+'eed']/_0x34d7ae);}}};h(ki,'_p',new J()),h(ki,'_pip',new J());let wu=ki;const Ui=class Ui extends Jn{['pointCache'](_0x594d98,_0xd664ad){const _0x41968e=''+_0x594d98+_0xd664ad;return this['_pointCach'+'e'][_0x41968e]||(this['_pointCach'+'e'][_0x41968e]=new J((this['_children'][_0xd664ad]['pointLengt'+'h']-this['_children'][_0x594d98]['pointLengt'+'h'])/((this['_children'][_0xd664ad]['pointLengt'+'h']+this['_children'][_0x594d98]['pointLengt'+'h'])/(0xb1*0x21+0x265c+-0x1*0x3d2b)),J['angleRad'](this['_children'][_0x594d98]['point'],this['_children'][_0xd664ad]['point'])*(0x6*0x42+0x9*0x7f+-0x601))),this['_pointCach'+'e'][_0x41968e];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x5c9116,_0x4e9fb6;Ui['_p']['set'](...this['_parameter'+'Values']);const _0x3de6e2=Ui['_p']['length']();_0x5c9116=0x1*-0xe9b+0x4f+-0x6*-0x262,_0x4e9fb6=-0xc5*-0x27+-0xdf6*0x2+-0x217*0x1;for(let _0x3c6d42=0x8b1*-0x1+-0x267*-0x7+-0x820;_0x3c6d42<this['_children']['length'];_0x3c6d42++){const _0xdb89e=this['_children'][_0x3c6d42],_0x4012af=_0xdb89e['point'],_0x2e9f0b=_0xdb89e['pointLengt'+'h'];let _0x1f928e=Number['MAX_VALUE'];for(let _0x5b5c2e=-0x11*-0x10b+0x7*-0x20d+0x60*-0x9;_0x5b5c2e<this['_children']['length'];_0x5b5c2e++){if(_0x3c6d42===_0x5b5c2e)continue;const _0x31a393=this['pointCache'](_0x3c6d42,_0x5b5c2e),_0x4b2bc5=this['_children'][_0x5b5c2e]['pointLengt'+'h'];Ui['_pip']['set']((_0x3de6e2-_0x2e9f0b)/((_0x4b2bc5+_0x2e9f0b)/(-0xed0+0xf01+-0x1*0x2f)),J['angleRad'](_0x4012af,Ui['_p'])*(-0x517*-0x1+0x23e5*0x1+-0x147d*0x2));const _0x1c5e46=Y['clamp'](-0x1425+-0xac6+0x2*0xf76-Math['abs'](Ui['_pip']['dot'](_0x31a393)/_0x31a393['lengthSq']()),-0x3*0x61b+-0x1d5f+0x2fb0,0xc5a+-0xd52+0x53*0x3);_0x1c5e46<_0x1f928e&&(_0x1f928e=_0x1c5e46);}_0xdb89e['weight']=_0x1f928e,_0x5c9116+=_0x1f928e,this['_syncAnima'+'tions']&&(_0x4e9fb6+=_0xdb89e['animTrack']['duration']/_0xdb89e['absoluteSp'+'eed']*_0xdb89e['weight']);}for(let _0x5bd9f3=-0x18*-0x78+0x3bb+-0xefb;_0x5bd9f3<this['_children']['length'];_0x5bd9f3++){const _0x586a2f=this['_children'][_0x5bd9f3];if(_0x586a2f['weight']=_0x586a2f['_weight']/_0x5c9116,this['_syncAnima'+'tions']){const _0x2859ee=_0x586a2f['animTrack']['duration']/_0x4e9fb6*_0x5c9116;_0x586a2f['weightedSp'+'eed']=_0x586a2f['absoluteSp'+'eed']*_0x2859ee;}}}};h(Ui,'_p',new J()),h(Ui,'_pip',new J());let Eu=Ui;class FL extends Jn{['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x589152=0xf09+0x667+-0x1570,_0x25fe7a=0x3*0x487+0xd2b+-0x1ac0;for(let _0x420a32=0x599*0x5+-0x209d+0x4a0;_0x420a32<this['_children']['length'];_0x420a32++)if(_0x589152+=Math['max'](this['_parameter'+'Values'][_0x420a32],0x259+0x1*-0xcf5+0xa9c),this['_syncAnima'+'tions']){const _0x1bacd8=this['_children'][_0x420a32];_0x25fe7a+=_0x1bacd8['animTrack']['duration']/_0x1bacd8['absoluteSp'+'eed']*_0x1bacd8['weight'];}for(let _0x26abd0=0x1438+-0x93b+-0xafd*0x1;_0x26abd0<this['_children']['length'];_0x26abd0++){const _0x454950=this['_children'][_0x26abd0],_0x38ebd0=Math['max'](this['_parameter'+'Values'][_0x26abd0],-0x5c2+-0x693*0x4+0x200e);_0x589152?(_0x454950['weight']=_0x38ebd0/_0x589152,this['_syncAnima'+'tions']&&(_0x454950['weightedSp'+'eed']=_0x454950['animTrack']['duration']/_0x454950['absoluteSp'+'eed']/_0x25fe7a)):(_0x454950['weight']=0x8*0x3d7+-0x4b5*0x4+-0xbe4*0x1,this['_syncAnima'+'tions']&&(_0x454950['weightedSp'+'eed']=0x33*0x3c+-0x8dd+-0x317));}}}class Fg{constructor(_0x32a7fc,_0x234ad0,_0x407632=0x5*0x2ad+-0x1*0x1a7b+-0x1*-0xd1b,_0x205bb6=!(0x192*-0x3+0x108c+-0x1*0xbd6),_0x4d78f2){h(this,'_animation'+'s',{}),h(this,'_animation'+'List',[]),(this['_controlle'+'r']=_0x32a7fc,this['_name']=_0x234ad0,this['_speed']=_0x407632,this['_loop']=_0x205bb6,this['_hasAnimat'+'ions']=!(0x15f7*0x1+0x695*0x1+0x1c8b*-0x1),_0x4d78f2?this['_blendTree']=this['_createTre'+'e'](_0x4d78f2['type'],this,null,_0x234ad0,-0x2220+-0x3*0x301+0x2b24,_0x4d78f2['parameter']?[_0x4d78f2['parameter']]:_0x4d78f2['parameters'],_0x4d78f2['children'],_0x4d78f2['syncAnimat'+'ions'],this['_createTre'+'e'],this['_controlle'+'r']['findParame'+'ter']):this['_blendTree']=new ml(this,null,_0x234ad0,-0x91b+-0xd0c+0x1628,_0x407632));}['_createTre'+'e'](_0x1e75e3,_0x19ff4a,_0x253608,_0x1b58da,_0x581683,_0x58586e,_0x511221,_0x4cc0fd,_0x63927c,_0x2a391f){switch(_0x1e75e3){case CL:return new OL(_0x19ff4a,_0x253608,_0x1b58da,_0x581683,_0x58586e,_0x511221,_0x4cc0fd,_0x63927c,_0x2a391f);case ML:return new wu(_0x19ff4a,_0x253608,_0x1b58da,_0x581683,_0x58586e,_0x511221,_0x4cc0fd,_0x63927c,_0x2a391f);case PL:return new Eu(_0x19ff4a,_0x253608,_0x1b58da,_0x581683,_0x58586e,_0x511221,_0x4cc0fd,_0x63927c,_0x2a391f);case DL:return new FL(_0x19ff4a,_0x253608,_0x1b58da,_0x581683,_0x58586e,_0x511221,_0x4cc0fd,_0x63927c,_0x2a391f);}w['error']('Invalid\x20an'+'im\x20blend\x20t'+'ype:\x20'+_0x1e75e3);}['_getNodeFr'+'omPath'](_0x5d2ddb){let _0x4f5377=this['_blendTree'];for(let _0x55e0db=0x13*-0x202+0x1487*0x1+0x60*0x2f;_0x55e0db<_0x5d2ddb['length'];_0x55e0db++)_0x4f5377=_0x4f5377['getChild'](_0x5d2ddb[_0x55e0db]);return _0x4f5377;}['addAnimati'+'on'](_0x3e1953,_0x26c625){const _0x18e903=_0x3e1953['join']('.'),_0x43409f=this['_animation'+'List']['findIndex'](_0x50e93d=>_0x50e93d['path']===_0x18e903);if(_0x43409f>=-0x92c+0x1*-0x9d+-0xa7*-0xf)this['_animation'+'List'][_0x43409f]['animTrack']=_0x26c625;else{const _0x2f32c9=this['_getNodeFr'+'omPath'](_0x3e1953);_0x2f32c9['animTrack']=_0x26c625,this['_animation'+'List']['push'](_0x2f32c9);}this['_updateHas'+'Animations']();}['_updateHas'+'Animations'](){this['_hasAnimat'+'ions']=this['_animation'+'List']['length']>0x7*-0x4ca+0x5b*0x6b+0x21*-0x23&&this['_animation'+'List']['every'](_0x3a4a3e=>_0x3a4a3e['animTrack']&&_0x3a4a3e['animTrack']!==Qi['EMPTY']);}get['name'](){return this['_name'];}set['animations'](_0x440e1a){this['_animation'+'List']=_0x440e1a,this['_updateHas'+'Animations']();}get['animations'](){return this['_animation'+'List'];}get['hasAnimati'+'ons'](){return this['_hasAnimat'+'ions'];}set['speed'](_0x4388ea){this['_speed']=_0x4388ea;}get['speed'](){return this['_speed'];}set['loop'](_0x38880f){this['_loop']=_0x38880f;}get['loop'](){return this['_loop'];}get['nodeCount'](){return!this['_blendTree']||this['_blendTree']['constructo'+'r']===ml?-0x1100+-0x4*0x14b+0x32b*0x7:this['_blendTree']['getNodeCou'+'nt']();}get['playable'](){return Ih['indexOf'](this['name'])!==-(0x25f8+-0x12a6+-0x1351*0x1)||this['animations']['length']===this['nodeCount'];}get['looping'](){if(this['animations']['length']>-0x87a+0xf51+-0x67*0x11){const _0x256163=this['name']+'.'+this['animations'][-0x108+0x3ee+-0x2e6]['animTrack']['name'],_0x56af78=this['_controlle'+'r']['animEvalua'+'tor']['findClip'](_0x256163);if(_0x56af78)return _0x56af78['loop'];}return!(-0x11*-0x211+0x5*-0x4c7+0x1*-0xb3d);}get['totalWeigh'+'t'](){let _0x561444=-0x21ea+0x8a7*0x3+0x7*0x123;for(let _0x4152d3=-0x1240+-0xc82+0xfe*0x1f;_0x4152d3<this['animations']['length'];_0x4152d3++)_0x561444+=this['animations'][_0x4152d3]['weight'];return _0x561444;}get['timelineDu'+'ration'](){let _0x1be03f=-0x455*-0x4+0x205e+0x1*-0x31b2;for(let _0x2dd516=0x1*-0x1399+-0x2707*0x1+-0x7*-0x860;_0x2dd516<this['animations']['length'];_0x2dd516++){const _0x4fd0d3=this['animations'][_0x2dd516];_0x4fd0d3['animTrack']['duration']>_0x1be03f&&(_0x1be03f=_0x4fd0d3['animTrack']['duration']);}return _0x1be03f;}}class Lh{constructor({from:_0x3a061c,to:_0x3e0995,time:_0x2aeb77=0x2a8+-0x2*0x3f5+-0x542*-0x1,priority:_0x3ac03d=0x3ad+0x737+-0x11*0xa4,conditions:_0x4ad020=[],exitTime:_0x292048=null,transitionOffset:_0x5ea741=null,interruptionSource:_0x142ef4=zv}){this['_from']=_0x3a061c,this['_to']=_0x3e0995,this['_time']=_0x2aeb77,this['_priority']=_0x3ac03d,this['_condition'+'s']=_0x4ad020,this['_exitTime']=_0x292048,this['_transitio'+'nOffset']=_0x5ea741,this['_interrupt'+'ionSource']=_0x142ef4;}get['from'](){return this['_from'];}set['to'](_0x23534b){this['_to']=_0x23534b;}get['to'](){return this['_to'];}get['time'](){return this['_time'];}get['priority'](){return this['_priority'];}get['conditions'](){return this['_condition'+'s'];}get['exitTime'](){return this['_exitTime'];}get['transition'+'Offset'](){return this['_transitio'+'nOffset'];}get['interrupti'+'onSource'](){return this['_interrupt'+'ionSource'];}get['hasExitTim'+'e'](){return!!this['exitTime'];}}class NL{constructor(_0x58d7b1,_0x32d0d0,_0x3a9a0d,_0x7054d2,_0x1f265e,_0x4fc559,_0x1b98c4){h(this,'_states',{}),h(this,'_stateName'+'s',[]),h(this,'_findTrans'+'itionsFrom'+'StateCache',{}),h(this,'_findTrans'+'itionsBetw'+'eenStatesC'+'ache',{}),h(this,'_previousS'+'tateName',null),h(this,'_activeSta'+'teName',Co),h(this,'_activeSta'+'teDuration',-0x18ed+-0x212c+0x8b*0x6b),h(this,'_activeSta'+'teDuration'+'Dirty',!(-0x468*0x7+-0x97d+0x2855)),h(this,'_playing',!(0x18c+-0x15bc*0x1+0x1431*0x1)),h(this,'_activate'),h(this,'_transitio'+'ns'),h(this,'_currTrans'+'itionTime',0x19bc+0x208d+0x2ea*-0x14),h(this,'_totalTran'+'sitionTime',0xd*-0x15+0x87e*0x2+-0xfea*0x1),h(this,'_isTransit'+'ioning',!(-0x6*0x6+0x1*-0x2395+0x23ba)),h(this,'_transitio'+'nInterrupt'+'ionSource',zv),h(this,'_transitio'+'nPreviousS'+'tates',[]),h(this,'_timeInSta'+'te',-0x47f*0x3+-0x472*-0x8+-0x1613),h(this,'_timeInSta'+'teBefore',-0x27*0x7d+0x328*-0x2+0x195b),h(this,'findParame'+'ter',_0x4eab40=>this['_findParam'+'eter'](_0x4eab40)),(this['_animEvalu'+'ator']=_0x58d7b1,this['_eventHand'+'ler']=_0x1f265e,this['_findParam'+'eter']=_0x4fc559,this['_consumeTr'+'igger']=_0x1b98c4);for(let _0xf78038=-0x112d*-0x1+-0x19*0x160+0x1133;_0xf78038<_0x32d0d0['length'];_0xf78038++)this['_states'][_0x32d0d0[_0xf78038]['name']]=new Fg(this,_0x32d0d0[_0xf78038]['name'],_0x32d0d0[_0xf78038]['speed'],_0x32d0d0[_0xf78038]['loop'],_0x32d0d0[_0xf78038]['blendTree']),this['_stateName'+'s']['push'](_0x32d0d0[_0xf78038]['name']);this['_transitio'+'ns']=_0x3a9a0d['map'](_0x1cc6e3=>new Lh({..._0x1cc6e3})),this['_activate']=_0x7054d2;}get['animEvalua'+'tor'](){return this['_animEvalu'+'ator'];}set['activeStat'+'e'](_0x2434bd){this['_activeSta'+'teName']=_0x2434bd;}get['activeStat'+'e'](){return this['_findState'](this['_activeSta'+'teName']);}get['activeStat'+'eName'](){return this['_activeSta'+'teName'];}get['activeStat'+'eAnimation'+'s'](){return this['activeStat'+'e']['animations'];}set['previousSt'+'ate'](_0x5559b8){this['_previousS'+'tateName']=_0x5559b8;}get['previousSt'+'ate'](){return this['_findState'](this['_previousS'+'tateName']);}get['previousSt'+'ateName'](){return this['_previousS'+'tateName'];}get['playable'](){let _0x5012e6=!(0x237f+0x10f3*0x2+-0x4565);for(let _0x117176=-0x30a*0xb+-0x1*-0x2531+0x1*-0x3c3;_0x117176<this['_stateName'+'s']['length'];_0x117176++)this['_states'][this['_stateName'+'s'][_0x117176]]['playable']||(_0x5012e6=!(0x1*-0x44f+-0x27*0xca+0x2316));return _0x5012e6;}set['playing'](_0x4bef3d){this['_playing']=_0x4bef3d;}get['playing'](){return this['_playing'];}get['activeStat'+'eProgress'](){return this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);}get['activeStat'+'eDuration'](){if(this['_activeSta'+'teDuration'+'Dirty']){let _0x33333f=-0x19f0+-0x3dc*0x1+0x1dcc;for(let _0x287a7e=0x1515*0x1+0x4bf+0xe4*-0x1d;_0x287a7e<this['activeStat'+'eAnimation'+'s']['length'];_0x287a7e++){const _0x2411c2=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x287a7e]['name']);_0x2411c2&&(_0x33333f=Math['max'](_0x33333f,_0x2411c2['track']['duration']));}this['_activeSta'+'teDuration']=_0x33333f,this['_activeSta'+'teDuration'+'Dirty']=!(0x332+-0x1*0x19cb+0x16*0x107);}return this['_activeSta'+'teDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x112f20){this['_timeInSta'+'teBefore']=_0x112f20,this['_timeInSta'+'te']=_0x112f20;for(let _0x1cec3c=0x3*0x2b7+0x14e0+0x13*-0x187;_0x1cec3c<this['activeStat'+'eAnimation'+'s']['length'];_0x1cec3c++){const _0x3ca90a=this['animEvalua'+'tor']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x1cec3c]['name']);_0x3ca90a&&(_0x3ca90a['time']=_0x112f20);}}get['activeStat'+'eCurrentTi'+'me'](){return this['_timeInSta'+'te'];}get['transition'+'ing'](){return this['_isTransit'+'ioning'];}get['transition'+'Progress'](){return this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime'];}get['states'](){return this['_stateName'+'s'];}['assignMask'](_0x14e772){return this['_animEvalu'+'ator']['assignMask'](_0x14e772);}['_findState'](_0x43f990){return this['_states'][_0x43f990];}['_getActive'+'StateProgr'+'essForTime'](_0x4d8d4b){if(this['activeStat'+'eName']===Co||this['activeStat'+'eName']===vu||this['activeStat'+'eName']===qr)return-0x1db7*-0x1+0x2686+-0x2*0x221e;const _0x3e6816=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][0x19ba+0x493+-0x1*0x1e4d]['name']);return _0x3e6816?_0x3e6816['progressFo'+'rTime'](_0x4d8d4b):null;}['_findTrans'+'itionsFrom'+'State'](_0x516038){let _0xfdd07d=this['_findTrans'+'itionsFrom'+'StateCache'][_0x516038];return _0xfdd07d||(_0xfdd07d=this['_transitio'+'ns']['filter'](_0xe61ac5=>_0xe61ac5['from']===_0x516038),ul(_0xfdd07d),this['_findTrans'+'itionsFrom'+'StateCache'][_0x516038]=_0xfdd07d),_0xfdd07d;}['_findTrans'+'itionsBetw'+'eenStates'](_0x71cdf9,_0x363932){let _0x13accf=this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x71cdf9+'->'+_0x363932];return _0x13accf||(_0x13accf=this['_transitio'+'ns']['filter'](_0x3975ca=>_0x3975ca['from']===_0x71cdf9&&_0x3975ca['to']===_0x363932),ul(_0x13accf),this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x71cdf9+'->'+_0x363932]=_0x13accf),_0x13accf;}['_transitio'+'nHasCondit'+'ionsMet'](_0x3071c4){const _0xd1f1fb=_0x3071c4['conditions'];for(let _0x5cdf71=-0xd*-0x18d+0x1517*0x1+-0x2c0*0xf;_0x5cdf71<_0xd1f1fb['length'];_0x5cdf71++){const _0x3749df=_0xd1f1fb[_0x5cdf71],_0x4ddc5d=this['_findParam'+'eter'](_0x3749df['parameterN'+'ame']);switch(_0x3749df['predicate']){case xL:if(!(_0x4ddc5d['value']>_0x3749df['value']))return!(-0x9d*-0x17+0x108+-0x95*0x1a);break;case TL:if(!(_0x4ddc5d['value']<_0x3749df['value']))return!(-0x18f3+0x4*0x68f+-0x4*0x52);break;case wL:if(!(_0x4ddc5d['value']>=_0x3749df['value']))return!(0x710*0x1+-0xfd3+0x8c4);break;case EL:if(!(_0x4ddc5d['value']<=_0x3749df['value']))return!(-0xa88+-0x17*0xdc+0x1e4d*0x1);break;case bL:if(_0x4ddc5d['value']!==_0x3749df['value'])return!(0x26e*0x10+-0x5c0+-0x1*0x211f);break;case AL:if(_0x4ddc5d['value']===_0x3749df['value'])return!(0x180d+0x1581+0x45*-0xa9);break;}}return!(-0x9d3*-0x1+-0x1cc2+0x12ef);}['_findTrans'+'ition'](_0x420b8d,_0x490013){let _0x32c33b=[];if(_0x420b8d&&_0x490013)_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsBetw'+'eenStates'](_0x420b8d,_0x490013));else{if(!this['_isTransit'+'ioning'])_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));else switch(this['_transitio'+'nInterrupt'+'ionSource']){case gL:_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));break;case SL:_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));break;case yL:_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));break;case vL:_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x32c33b=_0x32c33b['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));break;}}if(_0x32c33b=_0x32c33b['filter'](_0x431d73=>{if(_0x431d73['to']===this['activeStat'+'eName'])return!(-0x1282+-0xf53+-0x2*-0x10eb);if(_0x431d73['hasExitTim'+'e']){let _0xac4214=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'teBefore']),_0xba5074=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);if(_0x431d73['exitTime']<0x34a+-0x2d1+-0x78&&this['activeStat'+'e']['loop']&&(_0xac4214-=Math['floor'](_0xac4214),_0xba5074-=Math['floor'](_0xba5074)),_0xba5074===_0xac4214){if(_0xba5074!==_0x431d73['exitTime'])return null;}else{if(!(_0x431d73['exitTime']>_0xac4214&&_0x431d73['exitTime']<=_0xba5074))return null;}}return this['_transitio'+'nHasCondit'+'ionsMet'](_0x431d73);}),_0x32c33b['length']>-0xd9*-0x17+0x14fe+-0x287d*0x1){const _0x5df677=_0x32c33b[-0x1*0x5f4+0x2*-0x10aa+0x2748];if(_0x5df677['to']===vu){const _0x5cca6f=this['_findTrans'+'itionsFrom'+'State'](Co)[-0xec0*0x2+-0x490+0x2210];_0x5df677['to']=_0x5cca6f['to'];}return _0x5df677;}return null;}['updateStat'+'eFromTrans'+'ition'](_0x1243a4){let _0x31d530,_0x3a4395,_0x167a9f;this['previousSt'+'ate']=_0x1243a4['from']?this['activeStat'+'eName']:null,this['activeStat'+'e']=_0x1243a4['to'],this['_activeSta'+'teDuration'+'Dirty']=!(0x395+-0x1ca0+-0x1*-0x190b);for(let _0x20470c=0x1*-0x144e+0x3*-0x7a+0x56f*0x4;_0x20470c<_0x1243a4['conditions']['length'];_0x20470c++){const _0x1d7a98=_0x1243a4['conditions'][_0x20470c];this['_findParam'+'eter'](_0x1d7a98['parameterN'+'ame'])['type']===Qc&&this['_consumeTr'+'igger'](_0x1d7a98['parameterN'+'ame']);}if(this['previousSt'+'ate']){this['_isTransit'+'ioning']||(this['_transitio'+'nPreviousS'+'tates']=[]),this['_transitio'+'nPreviousS'+'tates']['push']({'name':this['_previousS'+'tateName'],'weight':0x1});const _0x4536a4=Math['min'](this['_totalTran'+'sitionTime']!==0x18ed+-0x26ca+0xd*0x111?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:0x637+-0x12*-0x20a+-0x2aea,-0x22de+0x40+0x229f);for(let _0x327df2=-0x1ddb*0x1+0x2505+-0x72a;_0x327df2<this['_transitio'+'nPreviousS'+'tates']['length'];_0x327df2++){this['_isTransit'+'ioning']?_0x327df2!==this['_transitio'+'nPreviousS'+'tates']['length']-(-0x8d4+0x14d3+-0xbfe)?this['_transitio'+'nPreviousS'+'tates'][_0x327df2]['weight']*=0xa1b*0x1+0x94*-0x39+-0x6*-0x3cf-_0x4536a4:this['_transitio'+'nPreviousS'+'tates'][_0x327df2]['weight']=_0x4536a4:this['_transitio'+'nPreviousS'+'tates'][_0x327df2]['weight']=-0x37*-0x6a+-0x10*-0x4e+-0x1ba5,_0x31d530=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x327df2]['name']);for(let _0x464905=-0x1*0x3e6+0xe9c+0x2*-0x55b;_0x464905<_0x31d530['animations']['length'];_0x464905++)_0x3a4395=_0x31d530['animations'][_0x464905],_0x167a9f=this['_animEvalu'+'ator']['findClip'](_0x3a4395['name']+'.previous.'+_0x327df2),_0x167a9f||(_0x167a9f=this['_animEvalu'+'ator']['findClip'](_0x3a4395['name']),_0x167a9f['name']=_0x3a4395['name']+'.previous.'+_0x327df2),_0x327df2!==this['_transitio'+'nPreviousS'+'tates']['length']-(0x4ce+-0x12e5+0x8*0x1c3)&&_0x167a9f['pause']();}}this['_isTransit'+'ioning']=!(-0x8*0x404+0x126*-0x1a+-0x4*-0xf7f),this['_totalTran'+'sitionTime']=_0x1243a4['time'],this['_currTrans'+'itionTime']=0x2067+-0x21b6+0x14f,this['_transitio'+'nInterrupt'+'ionSource']=_0x1243a4['interrupti'+'onSource'];const _0x1925cc=this['activeStat'+'e'],_0x207322=_0x1243a4['transition'+'Offset']&&_0x1243a4['transition'+'Offset']>-0x961*0x1+-0x108d*-0x1+-0x72c&&_0x1243a4['transition'+'Offset']<-0x73f+0xf2d+-0x7ed;let _0x31179b=0x21c2+0x2189+-0x99d*0x7,_0x56ab9a=0x1a80+-0x1490+-0x5f0;if(_0x207322){const _0x1ad1ad=_0x1925cc['timelineDu'+'ration']*_0x1243a4['transition'+'Offset'];_0x31179b=_0x1ad1ad,_0x56ab9a=_0x1ad1ad;}this['_timeInSta'+'te']=_0x31179b,this['_timeInSta'+'teBefore']=_0x56ab9a;for(let _0x1315ca=-0x27c+-0x12b6*0x2+-0x4*-0x9fa;_0x1315ca<_0x1925cc['animations']['length'];_0x1315ca++){if(_0x167a9f=this['_animEvalu'+'ator']['findClip'](_0x1925cc['animations'][_0x1315ca]['name']),_0x167a9f)_0x167a9f['reset']();else{const _0xb1297=Number['isFinite'](_0x1925cc['animations'][_0x1315ca]['speed'])?_0x1925cc['animations'][_0x1315ca]['speed']:_0x1925cc['speed'];_0x167a9f=new Dh(_0x1925cc['animations'][_0x1315ca]['animTrack'],this['_timeInSta'+'te'],_0xb1297,!(0x4*-0xfd+-0x853*-0x1+-0x45f),_0x1925cc['loop'],this['_eventHand'+'ler']),_0x167a9f['name']=_0x1925cc['animations'][_0x1315ca]['name'],this['_animEvalu'+'ator']['addClip'](_0x167a9f);}if(_0x1243a4['time']>0xdd0+-0x1*0x25f7+0x1*0x1827?_0x167a9f['blendWeigh'+'t']=-0x165c+0x1396+0x47*0xa:_0x167a9f['blendWeigh'+'t']=_0x1925cc['animations'][_0x1315ca]['normalized'+'Weight'],_0x167a9f['play'](),_0x207322)_0x167a9f['time']=_0x1925cc['timelineDu'+'ration']*_0x1243a4['transition'+'Offset'];else{const _0x51f8fe=_0x1925cc['speed']>=0xd51*0x1+0x18c+-0x1*0xedd?-0x746+-0xb3*0xc+0xfaa:this['activeStat'+'eDuration'];_0x167a9f['time']=_0x51f8fe;}}}['_transitio'+'nToState'](_0x9a9e2b){if(!this['_findState'](_0x9a9e2b))return;let _0x54d6f6=this['_findTrans'+'ition'](this['_activeSta'+'teName'],_0x9a9e2b);_0x54d6f6||(this['_animEvalu'+'ator']['removeClip'+'s'](),_0x54d6f6=new Lh({'from':null,'to':_0x9a9e2b})),this['updateStat'+'eFromTrans'+'ition'](_0x54d6f6);}['assignAnim'+'ation'](_0x288400,_0x4888f1,_0x265987,_0x1c8762){const _0x24edd0=_0x288400['split']('.');let _0x6bf054=this['_findState'](_0x24edd0[0x1f15*-0x1+0x904+0x1611]);_0x6bf054||(_0x6bf054=new Fg(this,_0x24edd0[0x7b7+-0x20ed*0x1+0x7*0x39a],_0x265987),this['_states'][_0x24edd0[-0xeef*0x2+0x415*-0x5+0x3247]]=_0x6bf054,this['_stateName'+'s']['push'](_0x24edd0[-0x1796*0x1+-0x1ee0+0x3676])),_0x6bf054['addAnimati'+'on'](_0x24edd0,_0x4888f1),this['_animEvalu'+'ator']['updateClip'+'Track'](_0x6bf054['name'],_0x4888f1),_0x265987!==void(-0x4*-0x199+-0xfa6*0x2+0x18e8)&&(_0x6bf054['speed']=_0x265987),_0x1c8762!==void(0x1eeb+-0x168f+-0x85c)&&(_0x6bf054['loop']=_0x1c8762),!this['_playing']&&this['_activate']&&this['playable']&&this['play'](),this['_activeSta'+'teDuration'+'Dirty']=!(0x1150*0x1+0x123e+-0x238e);}['removeNode'+'Animations'](_0x442e71){if(Ih['indexOf'](_0x442e71)!==-(0x2275+0x2035+-0x42a9))return!(0x1*0x5bb+0x114e+-0xb84*0x2);const _0x5eb5da=this['_findState'](_0x442e71);return _0x5eb5da?(_0x5eb5da['animations']=[],!(-0x8ac+0x25*0xc9+0x8d*-0x25)):(w['error']('Attempting'+'\x20to\x20unassi'+'gn\x20animati'+'on\x20tracks\x20'+'from\x20a\x20sta'+'te\x20that\x20do'+'es\x20not\x20exi'+'st.',_0x442e71),!(-0x120c+-0x109d+0x22aa));}['play'](_0x188fc7){_0x188fc7&&this['_transitio'+'nToState'](_0x188fc7),this['_playing']=!(0x73c+0x1c05+0x5f*-0x5f);}['pause'](){this['_playing']=!(-0x2427+-0x2*-0xaee+0xe4c);}['reset'](){this['_previousS'+'tateName']=null,this['_activeSta'+'teName']=Co,this['_playing']=!(-0x7*-0x511+0x5*-0x20f+-0x11*0x17b),this['_currTrans'+'itionTime']=-0x1103+0x22f+0x1*0xed5,this['_totalTran'+'sitionTime']=-0x44*-0x75+-0x16*-0x43+0x24d5*-0x1,this['_isTransit'+'ioning']=!(0x247d+-0x2*-0x98f+-0x379a),this['_timeInSta'+'te']=0x1ab4+-0x1*0x1747+-0x1*0x36d,this['_timeInSta'+'teBefore']=-0x2*0x69b+-0x1f68+-0x1*-0x2c9e,this['_animEvalu'+'ator']['removeClip'+'s']();}['rebind'](){this['_animEvalu'+'ator']['rebind']();}['update'](_0x42db4f){if(!this['_playing'])return;let _0x3ae9a2,_0x386d9e,_0x33863d;(this['activeStat'+'e']['loop']||this['_timeInSta'+'te']<this['activeStat'+'eDuration'])&&(this['_timeInSta'+'teBefore']=this['_timeInSta'+'te'],this['_timeInSta'+'te']+=_0x42db4f*this['activeStat'+'e']['speed'],!this['activeStat'+'e']['loop']&&this['_timeInSta'+'te']>this['activeStat'+'eDuration']&&(this['_timeInSta'+'te']=this['activeStat'+'eDuration'],_0x42db4f=this['activeStat'+'eDuration']-this['_timeInSta'+'teBefore']));const _0x4d993d=this['_findTrans'+'ition'](this['_activeSta'+'teName']);if(_0x4d993d&&this['updateStat'+'eFromTrans'+'ition'](_0x4d993d),this['_isTransit'+'ioning']){if(this['_currTrans'+'itionTime']+=_0x42db4f,this['_currTrans'+'itionTime']<=this['_totalTran'+'sitionTime']){const _0x44a940=this['_totalTran'+'sitionTime']!==0x10e1+0x1bdb+0xb2f*-0x4?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:-0x1c0c*-0x1+0x1336*-0x1+0x11*-0x85;for(let _0x13f93f=0x2*0x47c+-0x62*0x35+-0xb52*-0x1;_0x13f93f<this['_transitio'+'nPreviousS'+'tates']['length'];_0x13f93f++){_0x3ae9a2=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x13f93f]['name']);const _0x3388bc=this['_transitio'+'nPreviousS'+'tates'][_0x13f93f]['weight'];for(let _0x17dac7=-0x1c98+0x3*-0xa72+0x3bee;_0x17dac7<_0x3ae9a2['animations']['length'];_0x17dac7++)_0x386d9e=_0x3ae9a2['animations'][_0x17dac7],_0x33863d=this['_animEvalu'+'ator']['findClip'](_0x386d9e['name']+'.previous.'+_0x13f93f),_0x33863d&&(_0x33863d['blendWeigh'+'t']=(-0x211f+0x23*-0x11d+-0xe6b*-0x5-_0x44a940)*_0x386d9e['normalized'+'Weight']*_0x3388bc);}_0x3ae9a2=this['activeStat'+'e'];for(let _0x51d3d3=-0x36b+-0x2d2+0x63d;_0x51d3d3<_0x3ae9a2['animations']['length'];_0x51d3d3++)_0x386d9e=_0x3ae9a2['animations'][_0x51d3d3],this['_animEvalu'+'ator']['findClip'](_0x386d9e['name'])['blendWeigh'+'t']=_0x44a940*_0x386d9e['normalized'+'Weight'];}else{this['_isTransit'+'ioning']=!(-0x11e7*0x2+0x1157+0x1278);const _0x5068f9=this['activeStat'+'eAnimation'+'s']['length'],_0x337884=this['_animEvalu'+'ator']['clips']['length'];for(let _0x14e322=0x977+-0x69*0x53+0xf2*0x1a;_0x14e322<_0x337884-_0x5068f9;_0x14e322++)this['_animEvalu'+'ator']['removeClip'](0x45*-0x29+-0x43*0x6e+0x5b1*0x7);this['_transitio'+'nPreviousS'+'tates']=[],_0x3ae9a2=this['activeStat'+'e'];for(let _0x26d99f=0x151f+0x1d*0x25+0x438*-0x6;_0x26d99f<_0x3ae9a2['animations']['length'];_0x26d99f++)_0x386d9e=_0x3ae9a2['animations'][_0x26d99f],_0x33863d=this['_animEvalu'+'ator']['findClip'](_0x386d9e['name']),_0x33863d&&(_0x33863d['blendWeigh'+'t']=_0x386d9e['normalized'+'Weight']);}}else{if(this['activeStat'+'e']['_blendTree']['constructo'+'r']!==ml){_0x3ae9a2=this['activeStat'+'e'];for(let _0x242f74=-0x199c+0x1*0x101c+0x980;_0x242f74<_0x3ae9a2['animations']['length'];_0x242f74++)_0x386d9e=_0x3ae9a2['animations'][_0x242f74],_0x33863d=this['_animEvalu'+'ator']['findClip'](_0x386d9e['name']),_0x33863d&&(_0x33863d['blendWeigh'+'t']=_0x386d9e['normalized'+'Weight'],_0x386d9e['parent']['syncAnimat'+'ions']&&(_0x33863d['speed']=_0x386d9e['speed']));}}this['_animEvalu'+'ator']['update'](_0x42db4f,this['activeStat'+'e']['hasAnimati'+'ons']);}}const wf=new J(),Tc=new D(),_o=new re(),go=new ie(),So=new le();class Fi extends Sr{constructor(_0x5640f9,_0x495561,_0x2b2980,_0x4a3e8b,_0xc849d){super(_0x495561),this['animCompon'+'ent']=_0x5640f9,this['_mask']=_0x4a3e8b,this['layerName']=_0x2b2980,this['layerIndex']=_0xc849d;}static['_packFloat'](_0x4d4e35){return _0x4d4e35[0x38a*-0xa+0x2357+0xd];}static['_packBoole'+'an'](_0x57462b){return!!_0x57462b[-0x1714+-0x13c*-0x6+0x4*0x3eb];}static['_packVec2'](_0x1a61fb){return wf['x']=_0x1a61fb[0x6*-0x277+-0x2034+0x2efe],wf['y']=_0x1a61fb[0x76*-0x13+0xbea*-0x1+0x14ad],wf;}static['_packVec3'](_0x4f58a0){return Tc['x']=_0x4f58a0[0x4*-0x66c+0x1*0x2395+-0x1*0x9e5],Tc['y']=_0x4f58a0[0x8*0x3a6+0xfdb+-0x2*0x1685],Tc['z']=_0x4f58a0[-0x778+-0x2*-0x9a2+-0xbca],Tc;}static['_packVec4'](_0x5617a1){return _o['x']=_0x5617a1[-0x1fe2+-0x7*0x3be+-0x19d*-0x24],_o['y']=_0x5617a1[0xd1d+0xa45+-0x1761],_o['z']=_0x5617a1[-0x3*-0x6a5+-0x1c05+0x818],_o['w']=_0x5617a1[-0x8*-0x413+-0x299*-0x5+0x133*-0x26],_o;}static['_packColor'](_0x4caf84){return go['r']=_0x4caf84[0x1*-0x268f+-0xb*0x2ad+0xb55*0x6],go['g']=_0x4caf84[0x1e3c+0xed*0x10+-0x1*0x2d0b],go['b']=_0x4caf84[-0x10e1*-0x1+-0x58c+0x1*-0xb53],go['a']=_0x4caf84[-0x1cf*-0x2+0xaa4*0x3+-0x2387],go;}static['_packQuat'](_0x31744a){return So['x']=_0x31744a[-0x81a+0x438+0x3e2],So['y']=_0x31744a[0x5*0x8d+-0x1*0x2027+0x1*0x1d67],So['z']=_0x31744a[-0x1*0x566+0x194*-0x16+0x2820],So['w']=_0x31744a[0x1ade+-0x2050+0x575],So;}['resolve'](_0xfbe488){const _0x2ddce7=ra['encode'](_0xfbe488['entityPath'],_0xfbe488['component'],_0xfbe488['propertyPa'+'th']);let _0x4154e4=this['targetCach'+'e'][_0x2ddce7];if(_0x4154e4)return _0x4154e4;let _0x59a2d8,_0x3148cd,_0x36971b;switch(_0xfbe488['component']){case'entity':_0x59a2d8=this['_getEntity'+'FromHierar'+'chy'](_0xfbe488['entityPath']),_0x36971b=ra['encode'](_0x59a2d8['path'],'entity',_0xfbe488['propertyPa'+'th']),_0x3148cd=_0x59a2d8;break;case'graph':if(_0x3148cd=this['findNode'](_0xfbe488),!_0x3148cd)return null;_0x36971b=ra['encode'](_0x3148cd['path'],'graph',_0xfbe488['propertyPa'+'th']);break;default:if(_0x59a2d8=this['_getEntity'+'FromHierar'+'chy'](_0xfbe488['entityPath']),_0x3148cd=_0x59a2d8['findCompon'+'ent'](_0xfbe488['component']),!_0x3148cd)return null;_0x36971b=ra['encode'](_0x59a2d8['path'],_0xfbe488['component'],_0xfbe488['propertyPa'+'th']);break;}return _0x4154e4=this['_createAni'+'mTargetFor'+'Property'](_0x3148cd,_0xfbe488['propertyPa'+'th'],_0x36971b),this['targetCach'+'e'][_0x2ddce7]=_0x4154e4,_0x4154e4;}['update'](_0x31fef0){const _0x405abe=this['activeNode'+'s'];if(_0x405abe){for(let _0x393572=0x1*-0x7e1+-0x2*-0x1123+-0xe9*0x1d;_0x393572<_0x405abe['length'];_0x393572++)_0x405abe[_0x393572]['_dirtifyLo'+'cal']();}}['_getEntity'+'FromHierar'+'chy'](_0xa5c1aa){if(!this['animCompon'+'ent']['entity']['name']===_0xa5c1aa[-0x246e+0xfb9+-0x117*-0x13])return null;const _0x26d895=this['animCompon'+'ent']['entity'];return _0xa5c1aa['length']===0xe*-0x52+0x1*0x2084+-0x1c07?_0x26d895:_0x26d895['_parent']['findByPath'](_0xa5c1aa);}['_resolvePa'+'th'](_0x9ba161,_0x24cfc6,_0x8c3d66){const _0x256a63=_0x24cfc6['length']-(_0x8c3d66?0xe76+-0x3e*-0x41+-0x4*0x78d:0x3d*-0x1d+-0x2353+0x2a3d);for(let _0x4c9534=-0x26d7+-0x18d7+-0x26*-0x1ad;_0x4c9534<_0x256a63;_0x4c9534++)_0x9ba161=_0x9ba161[_0x24cfc6[_0x4c9534]];return _0x9ba161;}['_setter'](_0x5369b5,_0x15b4be,_0xf23331){const _0x59b907=this['_resolvePa'+'th'](_0x5369b5,_0x15b4be),_0x54638e=_0x15b4be[_0x15b4be['length']-(-0x1374+-0x1d6e+0x30e3)],_0x4008d4='set'+_0x54638e['substring'](0x1c32+-0xcce+-0x2*0x7b2,0x1de+0x1*0x1607+-0x116*0x16)['toUpperCas'+'e']()+_0x54638e['substring'](-0x17ca+-0x10c1*0x1+0x288c);if(_0x59b907[_0x4008d4]){let _0x1291e8=_0x59b907['get'+_0x54638e['substring'](0x59*-0x45+0x1f19+-0x71c,-0x1a4*-0xc+0x1161*-0x2+0xf13)['toUpperCas'+'e']()+_0x54638e['substring'](-0x8fd+0x241*0x1+0x6bd)]['bind'](_0x59b907)();_0x1291e8=[_0x1291e8['x'],_0x1291e8['y'],_0x1291e8['z'],_0x1291e8['w']];const _0x329447=_0x59b907[_0x4008d4]['bind'](_0x59b907);return{'set':_0x11039e=>{_0x329447(_0xf23331(_0x11039e));},'get':()=>_0x1291e8};}const _0x520c7f=_0x59b907[_0x54638e];if(typeof _0x520c7f=='object'&&_0x520c7f['hasOwnProp'+'erty']('copy'))return function(_0x3cab08){_0x520c7f['copy'](_0xf23331(_0x3cab08));};if([J,D,re,ie,le]['indexOf'](_0x59b907['constructo'+'r'])!==-(0x1143*0x2+0x1930+-0x3bb5)&&_0x15b4be['length']>-0x1136+-0x1e9f+0x2fd6){const _0x2450b7=_0x15b4be['length']>-0x10a*-0x1a+0x254c+-0x404e?this['_resolvePa'+'th'](_0x5369b5,_0x15b4be['slice'](-0x99f+-0x1648+0x1fe7,-(-0x1c53+0x23c3+-0x76f))):_0x5369b5,_0x497074=_0x15b4be[_0x15b4be['length']-(-0x1*0x131f+0x2676+-0x1355)];return function(_0x288076){_0x59b907[_0x54638e]=_0xf23331(_0x288076),_0x2450b7[_0x497074]=_0x59b907;};}return function(_0x174c8f){_0x59b907[_0x54638e]=_0xf23331(_0x174c8f);};}['_createAni'+'mTargetFor'+'Property'](_0x5cc49d,_0x5d655b,_0x4d3226){if(this['handlers']&&_0x5d655b[-0x1*0x1f39+-0x19bf+0x38f8]['startsWith']('weight.'))return this['handlers']['weight'](_0x5cc49d,_0x5d655b[-0x1*-0x1b81+0x1b5+-0x1d36]['replace']('weight.',''));if(this['handlers']&&_0x5d655b[-0xd*-0x253+-0x728*-0x1+-0xc75*0x3]==='material'&&_0x5d655b['length']===0xa50+-0x236+-0x818*0x1){const _0x33275f=_0x5d655b[-0x12cb+0x2397+-0x10cb];if(_0x33275f['endsWith']('Map'))return this['handlers']['materialTe'+'xture'](_0x5cc49d,_0x33275f);}const _0x42cfae=this['_resolvePa'+'th'](_0x5cc49d,_0x5d655b,!(0x198f+-0x138f+0x300*-0x2));if(typeof _0x42cfae>'u')return null;let _0x13197b,_0x1fdbcb,_0x14ab5e;if(typeof _0x42cfae=='number')_0x13197b=this['_setter'](_0x5cc49d,_0x5d655b,Fi['_packFloat']),_0x1fdbcb='vector',_0x14ab5e=-0x18fc+0x49*-0x72+-0x397f*-0x1;else{if(typeof _0x42cfae=='boolean')_0x13197b=this['_setter'](_0x5cc49d,_0x5d655b,Fi['_packBoole'+'an']),_0x1fdbcb='vector',_0x14ab5e=-0x2393+0x667*0x1+0xb*0x2a7;else{if(typeof _0x42cfae=='object')switch(_0x42cfae['constructo'+'r']){case J:_0x13197b=this['_setter'](_0x5cc49d,_0x5d655b,Fi['_packVec2']),_0x1fdbcb='vector',_0x14ab5e=0xc0b*-0x1+0x13ad+-0x7a0;break;case D:_0x13197b=this['_setter'](_0x5cc49d,_0x5d655b,Fi['_packVec3']),_0x1fdbcb='vector',_0x14ab5e=-0x1d8*0x4+0x17d1+-0x106e;break;case re:_0x13197b=this['_setter'](_0x5cc49d,_0x5d655b,Fi['_packVec4']),_0x1fdbcb='vector',_0x14ab5e=0x1cac+-0x12b5*-0x1+-0x19*0x1e5;break;case ie:_0x13197b=this['_setter'](_0x5cc49d,_0x5d655b,Fi['_packColor']),_0x1fdbcb='vector',_0x14ab5e=-0x35*-0xb+-0xfe3+-0x2*-0x6d0;break;case le:_0x13197b=this['_setter'](_0x5cc49d,_0x5d655b,Fi['_packQuat']),_0x1fdbcb='quaternion',_0x14ab5e=0x29*0x1+-0x88*0x8+0x41b;break;default:return null;}}}return _0x5d655b['indexOf']('material')!==-(-0x1*0x1f04+0xa09+0x14fc)?new xu(_0x6d44e6=>{_0x13197b(_0x6d44e6),_0x5cc49d['material']['update']();},_0x1fdbcb,_0x14ab5e,_0x4d3226):new xu(_0x13197b,_0x1fdbcb,_0x14ab5e,_0x4d3226);}['rebind'](){this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={},this['animCompon'+'ent']['rootBone']?this['graph']=this['animCompon'+'ent']['rootBone']:this['graph']=this['animCompon'+'ent']['entity'];const _0x5e7d5e={},_0x1d5da1=function(_0x417dcb){_0x5e7d5e[_0x417dcb['name']]=_0x417dcb;for(let _0x3e1f7a=-0x1218+-0x1032+0x224a;_0x3e1f7a<_0x417dcb['children']['length'];++_0x3e1f7a)_0x1d5da1(_0x417dcb['children'][_0x3e1f7a]);};_0x1d5da1(this['graph']),this['nodes']=_0x5e7d5e;}}class kL{constructor(_0x78a7cd,_0x2da54c,_0x1f2e86,_0xf34e6e=0x12a7+0x17b4+-0x2a5a,_0xe095a3=Vv){h(this,'_name'),h(this,'_controlle'+'r'),h(this,'_component'),h(this,'_weight'),h(this,'_blendType'),h(this,'_mask',null),h(this,'_blendTime',-0x43a*0x3+0x40*0xd+0x96e*0x1),h(this,'_blendTime'+'Elapsed',0x18df+-0x1*0x1105+-0x7da),h(this,'_startingW'+'eight',0xd*0x27+0x148*0x8+0xc3b*-0x1),h(this,'_targetWei'+'ght',0xacc*-0x2+-0x12b3+0x284b),(this['_name']=_0x78a7cd,this['_controlle'+'r']=_0x2da54c,this['_component']=_0x1f2e86,this['_weight']=_0xf34e6e,this['_blendType']=_0xe095a3);}get['name'](){return this['_name'];}set['playing'](_0x35dd1f){this['_controlle'+'r']['playing']=_0x35dd1f;}get['playing'](){return this['_controlle'+'r']['playing'];}get['playable'](){return this['_controlle'+'r']['playable'];}get['activeStat'+'e'](){return this['_controlle'+'r']['activeStat'+'eName'];}get['previousSt'+'ate'](){return this['_controlle'+'r']['previousSt'+'ateName'];}get['activeStat'+'eProgress'](){return this['_controlle'+'r']['activeStat'+'eProgress'];}get['activeStat'+'eDuration'](){return this['_controlle'+'r']['activeStat'+'eDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x2d328a){const _0x589b49=this['_controlle'+'r'],_0x3584de=_0x589b49['playing'];_0x589b49['playing']=!(-0x511*0x3+-0x7f7*-0x1+-0x39e*-0x2),_0x589b49['activeStat'+'eCurrentTi'+'me']=_0x2d328a,_0x3584de||_0x589b49['update'](0x842+0x1*0x150d+-0x1d4f),_0x589b49['playing']=_0x3584de;}get['activeStat'+'eCurrentTi'+'me'](){return this['_controlle'+'r']['activeStat'+'eCurrentTi'+'me'];}get['transition'+'ing'](){return this['_controlle'+'r']['transition'+'ing'];}get['transition'+'Progress'](){return this['transition'+'ing']?this['_controlle'+'r']['transition'+'Progress']:null;}get['states'](){return this['_controlle'+'r']['states'];}set['weight'](_0x84ebc8){this['_weight']=_0x84ebc8,this['_component']['dirtifyTar'+'gets']();}get['weight'](){return this['_weight'];}set['blendType'](_0x547312){_0x547312!==this['_blendType']&&(this['_blendType']=_0x547312,this['_controlle'+'r']['normalizeW'+'eights']&&this['_component']['rebind']());}get['blendType'](){return this['_blendType'];}set['mask'](_0x49f201){this['_controlle'+'r']['assignMask'](_0x49f201)&&this['_component']['rebind'](),this['_mask']=_0x49f201;}get['mask'](){return this['_mask'];}['play'](_0xf6cbe0){this['_controlle'+'r']['play'](_0xf6cbe0);}['pause'](){this['_controlle'+'r']['pause']();}['reset'](){this['_controlle'+'r']['reset']();}['rebind'](){this['_controlle'+'r']['rebind']();}['update'](_0x2d24b9){this['_blendTime']&&(this['_blendTime'+'Elapsed']<this['_blendTime']?(this['weight']=Y['lerp'](this['_startingW'+'eight'],this['_targetWei'+'ght'],this['_blendTime'+'Elapsed']/this['_blendTime']),this['_blendTime'+'Elapsed']+=_0x2d24b9):(this['weight']=this['_targetWei'+'ght'],this['_blendTime']=0x1*-0xddf+-0x1*-0x1a21+-0xc42,this['_blendTime'+'Elapsed']=-0x1378+-0xef7+0x226f,this['_startingW'+'eight']=-0x1562+0x2b6*0x1+-0x1*-0x12ac,this['_targetWei'+'ght']=-0x15c0+0xf78+0x10c*0x6)),this['_controlle'+'r']['update'](_0x2d24b9);}['blendToWei'+'ght'](_0x5d6610,_0x40668d){this['_startingW'+'eight']=this['weight'],this['_targetWei'+'ght']=_0x5d6610,this['_blendTime']=Math['max'](0x1*0x1cf8+-0x37b*-0x1+-0x2073,_0x40668d),this['_blendTime'+'Elapsed']=-0x3*-0x7db+-0x20*-0xe3+-0x33f1;}['assignAnim'+'ation'](_0x16803d,_0x1074b9,_0x142d5e,_0x5d94d2){if(!(_0x1074b9 instanceof Qi)){w['error']('assignAnim'+'ation:\x20ani'+'mTrack\x20sup'+'plied\x20to\x20f'+'unction\x20wa'+'s\x20not\x20of\x20t'+'ype\x20AnimTr'+'ack');return;}this['_controlle'+'r']['assignAnim'+'ation'](_0x16803d,_0x1074b9,_0x142d5e,_0x5d94d2),this['_controlle'+'r']['_transitio'+'ns']['length']===0x121f+0x1ed6+-0x30f5*0x1&&this['_controlle'+'r']['_transitio'+'ns']['push'](new Lh({'from':'START','to':_0x16803d})),this['_component']['activate']&&this['_component']['playable']&&(this['_component']['playing']=!(0x79f*0x1+0x1*0x122a+-0x19c9));}['removeNode'+'Animations'](_0x5af946){this['_controlle'+'r']['removeNode'+'Animations'](_0x5af946)&&(this['_component']['playing']=!(0xa*0x106+-0x9*-0x153+-0x1626));}['getAnimati'+'onAsset'](_0xdf5717){return this['_component']['animationA'+'ssets'][this['name']+':'+_0xdf5717];}['transition'](_0x5292c8,_0x361914=-0x307*0x1+0xa26+0x1*-0x71f,_0xf081da=null){this['_controlle'+'r']['updateStat'+'eFromTrans'+'ition'](new Lh({'from':this['_controlle'+'r']['activeStat'+'eName'],'to':_0x5292c8,'time':_0x361914,'transitionOffset':_0xf081da}));}}class Jc{constructor(_0x534d33){if(this['_layers']=[],this['_parameter'+'s']={},Array['isArray'](_0x534d33['layers']))this['_layers']=_0x534d33['layers'];else for(const _0x104118 in _0x534d33['layers']){const _0x2c5c34=_0x534d33['layers'][_0x104118],_0x4739eb={'name':_0x2c5c34['name'],'blendType':_0x2c5c34['blendType'],'weight':_0x2c5c34['weight'],'states':[],'transitions':[]};for(let _0x498888=0x2214*0x1+0x28*-0x5+-0x214c;_0x498888<_0x2c5c34['states']['length'];_0x498888++)_0x4739eb['states']['push'](_0x534d33['states'][_0x2c5c34['states'][_0x498888]]);for(let _0x439e34=0xc5*0x8+-0x41*-0x3d+0x737*-0x3;_0x439e34<_0x2c5c34['transition'+'s']['length'];_0x439e34++){const _0x38cb5c=_0x534d33['transition'+'s'][_0x2c5c34['transition'+'s'][_0x439e34]];if(_0x38cb5c['conditions']&&!Array['isArray'](_0x38cb5c['conditions'])){const _0x412536=Object['keys'](_0x38cb5c['conditions']),_0x15cbbe=[];for(let _0x517ba4=-0x1098+0x105b+0x3d*0x1;_0x517ba4<_0x412536['length'];_0x517ba4++){const _0x57d6b8=_0x38cb5c['conditions'][_0x412536[_0x517ba4]];_0x57d6b8['parameterN'+'ame']&&_0x15cbbe['push'](_0x57d6b8);}_0x38cb5c['conditions']=_0x15cbbe;}Number['isInteger'](_0x38cb5c['from'])&&(_0x38cb5c['from']=_0x534d33['states'][_0x38cb5c['from']]['name']),Number['isInteger'](_0x38cb5c['to'])&&(_0x38cb5c['to']=_0x534d33['states'][_0x38cb5c['to']]['name']),_0x4739eb['transition'+'s']['push'](_0x38cb5c);}this['_layers']['push'](_0x4739eb);}for(const _0x1e0017 in _0x534d33['parameters']){const _0x47f477=_0x534d33['parameters'][_0x1e0017];this['_parameter'+'s'][_0x47f477['name']]={'type':_0x47f477['type'],'value':_0x47f477['value']};}}get['parameters'](){return Object['assign']({},this['_parameter'+'s']);}get['layers'](){return this['_layers'];}}class $v extends we{constructor(){super(...arguments),h(this,'_stateGrap'+'hAsset',null),h(this,'_animation'+'Assets',{}),h(this,'_speed',0x1*0x236b+0x1938+0xd*-0x4aa),h(this,'_activate',!(0x221b+-0x5*0x6a3+-0xec)),h(this,'_playing',!(0x1081*-0x1+-0x123*0x1+0x1*0x11a5)),h(this,'_rootBone',null),h(this,'_stateGrap'+'h',null),h(this,'_layers',[]),h(this,'_layerIndi'+'ces',{}),h(this,'_parameter'+'s',{}),h(this,'_targets',{}),h(this,'_consumedT'+'riggers',new Set()),h(this,'_normalize'+'Weights',!(0xffc+-0xfdd+-0x1e)),h(this,'findParame'+'ter',_0x1aa775=>this['_parameter'+'s'][_0x1aa775]),h(this,'consumeTri'+'gger',_0x33394e=>{this['_consumedT'+'riggers']['add'](_0x33394e);});}set['stateGraph'+'Asset'](_0x19fcb3){if(_0x19fcb3===null){this['removeStat'+'eGraph']();return;}this['_stateGrap'+'hAsset']&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);let _0x3bf224,_0x2bcf59;_0x19fcb3 instanceof pe?(_0x3bf224=_0x19fcb3['id'],_0x2bcf59=this['system']['app']['assets']['get'](_0x3bf224),_0x2bcf59||(this['system']['app']['assets']['add'](_0x19fcb3),_0x2bcf59=this['system']['app']['assets']['get'](_0x3bf224))):(_0x3bf224=_0x19fcb3,_0x2bcf59=this['system']['app']['assets']['get'](_0x3bf224)),!(!_0x2bcf59||this['_stateGrap'+'hAsset']===_0x3bf224)&&(_0x2bcf59['resource']?(this['_stateGrap'+'h']=_0x2bcf59['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']),_0x2bcf59['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this)):(_0x2bcf59['once']('load',_0x35584f=>{this['_stateGrap'+'h']=_0x35584f['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']);}),_0x2bcf59['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this),this['system']['app']['assets']['load'](_0x2bcf59)),this['_stateGrap'+'hAsset']=_0x3bf224);}get['stateGraph'+'Asset'](){return this['_stateGrap'+'hAsset'];}set['normalizeW'+'eights'](_0x2a4bb1){this['_normalize'+'Weights']=_0x2a4bb1,this['unbind']();}get['normalizeW'+'eights'](){return this['_normalize'+'Weights'];}set['animationA'+'ssets'](_0x4c259d){this['_animation'+'Assets']=_0x4c259d,this['loadAnimat'+'ionAssets']();}get['animationA'+'ssets'](){return this['_animation'+'Assets'];}set['speed'](_0x18253d){this['_speed']=_0x18253d;}get['speed'](){return this['_speed'];}set['activate'](_0x492e69){this['_activate']=_0x492e69;}get['activate'](){return this['_activate'];}set['playing'](_0x1089a0){this['_playing']=_0x1089a0;}get['playing'](){return this['_playing'];}set['rootBone'](_0x246f02){if(typeof _0x246f02=='string'){const _0x15022b=this['entity']['root']['findByGuid'](_0x246f02);w['assert'](_0x15022b,'rootBone\x20e'+'ntity\x20for\x20'+'supplied\x20g'+'uid:'+_0x246f02+('\x20cannot\x20be'+'\x20found\x20in\x20'+'the\x20scene')),this['_rootBone']=_0x15022b;}else _0x246f02 instanceof lt?this['_rootBone']=_0x246f02:this['_rootBone']=null;this['rebind']();}get['rootBone'](){return this['_rootBone'];}set['stateGraph'](_0xec7b5){this['_stateGrap'+'h']=_0xec7b5;}get['stateGraph'](){return this['_stateGrap'+'h'];}get['layers'](){return this['_layers'];}set['layerIndic'+'es'](_0x3e31b0){this['_layerIndi'+'ces']=_0x3e31b0;}get['layerIndic'+'es'](){return this['_layerIndi'+'ces'];}set['parameters'](_0x3247ec){this['_parameter'+'s']=_0x3247ec;}get['parameters'](){return this['_parameter'+'s'];}set['targets'](_0x3b40fe){this['_targets']=_0x3b40fe;}get['targets'](){return this['_targets'];}get['playable'](){for(let _0x43eec5=-0x63*0x29+-0x609+0x15e4;_0x43eec5<this['_layers']['length'];_0x43eec5++)if(!this['_layers'][_0x43eec5]['playable'])return!(-0x7*-0x576+-0x93*-0x43+-0x4cb2*0x1);return!(0x4db+-0x1ac*-0x11+-0x2147);}get['baseLayer'](){return this['_layers']['length']>0xc28+0x1a8d+0x9*-0x44d?this['_layers'][-0x1*0x1c95+-0x2455+0x40ea]:null;}['_onStateGr'+'aphAssetCh'+'angeEvent'](_0x16e9a8){const _0x265a5c=this['animationA'+'ssets'],_0x104812=this['layers']['map'](_0x5b94f=>_0x5b94f['mask']);this['removeStat'+'eGraph'](),this['_stateGrap'+'h']=new Jc(_0x16e9a8['_data']),this['loadStateG'+'raph'](this['_stateGrap'+'h']),this['animationA'+'ssets']=_0x265a5c,this['loadAnimat'+'ionAssets'](),this['layers']['forEach']((_0x1a3430,_0x2162b8)=>{_0x1a3430['mask']=_0x104812[_0x2162b8];}),this['rebind']();}['dirtifyTar'+'gets'](){const _0x59dd58=Object['values'](this['_targets']);for(let _0x550744=-0x1*0x2489+0x9f5+-0x2a*-0xa2;_0x550744<_0x59dd58['length'];_0x550744++)_0x59dd58[_0x550744]['dirty']=!(-0x1396+0x8fb+0xa9b);}['_addLayer']({name:_0x5c96f8,states:_0x3a82d9,transitions:_0x3c0260,weight:_0x2b1846,mask:_0x36c742,blendType:_0x3f6b59}){let _0x271a98;this['rootBone']?_0x271a98=this['rootBone']:_0x271a98=this['entity'];const _0x27f552=this['_layers']['length'],_0x4c56e6=new Fi(this,_0x271a98,_0x5c96f8,_0x36c742,_0x27f552),_0x3bbeb7=new Gv(_0x4c56e6),_0x2fe845=new NL(_0x3bbeb7,_0x3a82d9,_0x3c0260,this['_activate'],this,this['findParame'+'ter'],this['consumeTri'+'gger']);return this['_layers']['push'](new kL(_0x5c96f8,_0x2fe845,this,_0x2b1846,_0x3f6b59)),this['_layerIndi'+'ces'][_0x5c96f8]=_0x27f552,this['_layers'][_0x27f552];}['addLayer'](_0x58bf6d,_0x3702a0,_0x5cd447,_0x446604){const _0x4eb2ea=this['findAnimat'+'ionLayer'](_0x58bf6d);if(_0x4eb2ea)return _0x4eb2ea;const _0x1b333c=[{'name':'START','speed':0x1}],_0x5b49f2=[];return this['_addLayer']({'name':_0x58bf6d,'states':_0x1b333c,'transitions':_0x5b49f2,'weight':_0x3702a0,'mask':_0x5cd447,'blendType':_0x446604});}['_assignPar'+'ameters'](_0x218560){this['_parameter'+'s']={};const _0x2106ab=Object['keys'](_0x218560['parameters']);for(let _0x371bae=0x19*0x1f+-0x1d*0xbe+0x127f;_0x371bae<_0x2106ab['length'];_0x371bae++){const _0x3f1357=_0x2106ab[_0x371bae];this['_parameter'+'s'][_0x3f1357]={'type':_0x218560['parameters'][_0x3f1357]['type'],'value':_0x218560['parameters'][_0x3f1357]['value']};}}['loadStateG'+'raph'](_0x31873){this['_stateGrap'+'h']=_0x31873,this['_assignPar'+'ameters'](_0x31873),this['_layers']=[];let _0x559651=!(0x18d5+-0xdd*-0x4+-0x1c48);for(let _0x50e567=-0x1afb+-0x17*-0xba+0xa45;_0x50e567<_0x31873['layers']['length'];_0x50e567++){const _0xc5cc5e=_0x31873['layers'][_0x50e567];this['_addLayer']({..._0xc5cc5e}),_0xc5cc5e['states']['some'](_0x5f0687=>_0x5f0687['blendTree'])&&(_0x559651=!(0xfb0+0x2646+0x2*-0x1afb));}_0x559651||this['setupAnima'+'tionAssets']();}['setupAnima'+'tionAssets'](){for(let _0x3073fc=-0x1f*0x6a+-0x5a7*0x5+0x2919;_0x3073fc<this['_layers']['length'];_0x3073fc++){const _0x17f943=this['_layers'][_0x3073fc],_0x18143e=_0x17f943['name'];for(let _0x4b02ef=-0x34b+0x139*-0x17+0x1f6a*0x1;_0x4b02ef<_0x17f943['states']['length'];_0x4b02ef++){const _0x39a97e=_0x17f943['states'][_0x4b02ef];if(Ih['indexOf'](_0x39a97e)===-(-0x1b4a+-0x38b+0x1ed6)){const _0x4376ec=_0x18143e+':'+_0x39a97e;this['_animation'+'Assets'][_0x4376ec]||(this['_animation'+'Assets'][_0x4376ec]={'asset':null});}}}this['loadAnimat'+'ionAssets']();}['loadAnimat'+'ionAssets'](){for(let _0x71d26b=-0xea2+-0x2*-0xc9a+-0x3*0x386;_0x71d26b<this['_layers']['length'];_0x71d26b++){const _0x1de3d2=this['_layers'][_0x71d26b];for(let _0x42dc5a=-0x3*-0x57b+-0x8*-0x2f9+-0x5bf*0x7;_0x42dc5a<_0x1de3d2['states']['length'];_0x42dc5a++){const _0x13bb8b=_0x1de3d2['states'][_0x42dc5a];if(Ih['indexOf'](_0x13bb8b)!==-(-0x280+-0xb35+0xdb6))continue;const _0x11ff7e=this['_animation'+'Assets'][_0x1de3d2['name']+':'+_0x13bb8b];if(!_0x11ff7e||!_0x11ff7e['asset']){this['findAnimat'+'ionLayer'](_0x1de3d2['name'])['assignAnim'+'ation'](_0x13bb8b,Qi['EMPTY']);continue;}const _0x38d635=_0x11ff7e['asset'],_0x581bd9=this['system']['app']['assets']['get'](_0x38d635);_0x581bd9&&(_0x581bd9['resource']?this['onAnimatio'+'nAssetLoad'+'ed'](_0x1de3d2['name'],_0x13bb8b,_0x581bd9):(_0x581bd9['once']('load',function(_0x325e72,_0x4a7458){return function(_0x79d38){this['onAnimatio'+'nAssetLoad'+'ed'](_0x325e72,_0x4a7458,_0x79d38);}['bind'](this);}['bind'](this)(_0x1de3d2['name'],_0x13bb8b)),this['system']['app']['assets']['load'](_0x581bd9)));}}}['onAnimatio'+'nAssetLoad'+'ed'](_0x556839,_0x3f0f94,_0xa76798){this['findAnimat'+'ionLayer'](_0x556839)['assignAnim'+'ation'](_0x3f0f94,_0xa76798['resource']);}['removeStat'+'eGraph'](){this['_stateGrap'+'h']=null,this['_stateGrap'+'hAsset']=null,this['_animation'+'Assets']={},this['_layers']=[],this['_layerIndi'+'ces']={},this['_parameter'+'s']={},this['_playing']=!(-0xf20+-0x687+0x15a8),this['unbind'](),this['_targets']={};}['reset'](){this['_assignPar'+'ameters'](this['_stateGrap'+'h']);for(let _0x2eb1ef=0xdd0*0x2+-0xfc1+-0x1*0xbdf;_0x2eb1ef<this['_layers']['length'];_0x2eb1ef++){const _0x2878f9=this['_layers'][_0x2eb1ef]['playing'];this['_layers'][_0x2eb1ef]['reset'](),this['_layers'][_0x2eb1ef]['playing']=_0x2878f9;}}['unbind'](){this['_normalize'+'Weights']||Object['keys'](this['_targets'])['forEach'](_0x41fcf6=>{this['_targets'][_0x41fcf6]['unbind']();});}['rebind'](){this['_targets']={};for(let _0x2b36f2=-0x1*-0x198b+0x355*-0x3+0x14*-0xc7;_0x2b36f2<this['_layers']['length'];_0x2b36f2++)this['_layers'][_0x2b36f2]['rebind']();}['findAnimat'+'ionLayer'](_0x3ee626){const _0x5f1d23=this['_layerIndi'+'ces'][_0x3ee626];return this['_layers'][_0x5f1d23]||null;}['addAnimati'+'onState'](_0x543e41,_0x365937,_0x2cbbfa=0x1736*-0x1+0x1381+0x3b6,_0x181602=!(-0x10*-0x1f+-0x5*-0x593+-0x1dcf*0x1),_0x2bcfd2='Base'){var _0x5d78fe;this['_stateGrap'+'h']||this['loadStateG'+'raph'](new Jc({'layers':[{'name':_0x2bcfd2,'states':[{'name':'START','speed':0x1},{'name':_0x543e41,'speed':_0x2cbbfa,'loop':_0x181602,'defaultState':!(0x34*0x22+0x3*0x9fe+0x1*-0x24e2)}],'transitions':[{'from':'START','to':_0x543e41}]}],'parameters':{}}));const _0x5a40e=this['findAnimat'+'ionLayer'](_0x2bcfd2);_0x5a40e?_0x5a40e['assignAnim'+'ation'](_0x543e41,_0x365937,_0x2cbbfa,_0x181602):(_0x5d78fe=this['addLayer'](_0x2bcfd2))==null||_0x5d78fe['assignAnim'+'ation'](_0x543e41,_0x365937,_0x2cbbfa,_0x181602);}['assignAnim'+'ation'](_0x3f03c7,_0xea8107,_0x1dd898,_0x3df07a=-0x47b+0x1*0x7b+0x401,_0x5d9d33=!(-0x903*-0x4+0x1*0x26ed+-0x4af9)){if(!this['_stateGrap'+'h']&&_0x3f03c7['indexOf']('.')===-(-0x7cf*0x2+-0x140*0x3+0x135f)){this['loadStateG'+'raph'](new Jc({'layers':[{'name':'Base','states':[{'name':'START','speed':0x1},{'name':_0x3f03c7,'speed':_0x3df07a,'loop':_0x5d9d33,'defaultState':!(-0x232f+-0xfbe+0x32ed)}],'transitions':[{'from':'START','to':_0x3f03c7}]}],'parameters':{}})),this['baseLayer']['assignAnim'+'ation'](_0x3f03c7,_0xea8107);return;}const _0x409203=_0x1dd898?this['findAnimat'+'ionLayer'](_0x1dd898):this['baseLayer'];if(!_0x409203){w['error']('assignAnim'+'ation:\x20Try'+'ing\x20to\x20ass'+'ign\x20an\x20ani'+'m\x20track\x20to'+'\x20a\x20layer\x20t'+'hat\x20doesn\x27'+'t\x20exist');return;}_0x409203['assignAnim'+'ation'](_0x3f03c7,_0xea8107,_0x3df07a,_0x5d9d33);}['removeNode'+'Animations'](_0x148c46,_0x559a49){const _0x50bbc8=_0x559a49?this['findAnimat'+'ionLayer'](_0x559a49):this['baseLayer'];if(!_0x50bbc8){w['error']('removeStat'+'eAnimation'+'s:\x20Trying\x20'+'to\x20remove\x20'+'animation\x20'+'tracks\x20fro'+'m\x20a\x20state\x20'+'before\x20the'+'\x20state\x20gra'+'ph\x20has\x20bee'+'n\x20loaded.\x20'+'Have\x20you\x20c'+'alled\x20load'+'StateGraph'+'?');return;}_0x50bbc8['removeNode'+'Animations'](_0x148c46);}['getParamet'+'erValue'](_0xfb0ebd,_0x307f62){const _0x147f3b=this['_parameter'+'s'][_0xfb0ebd];if(_0x147f3b&&_0x147f3b['type']===_0x307f62)return _0x147f3b['value'];w['log']('Cannot\x20get'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0xfb0ebd+('\x22\x20of\x20type\x20'+'\x22')+_0x307f62+'\x22');}['setParamet'+'erValue'](_0xa465ff,_0x305e4c,_0x11ccdc){const _0x47c666=this['_parameter'+'s'][_0xa465ff];if(_0x47c666&&_0x47c666['type']===_0x305e4c){_0x47c666['value']=_0x11ccdc;return;}w['log']('Cannot\x20set'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0xa465ff+('\x22\x20of\x20type\x20'+'\x22')+_0x305e4c+'\x22');}['getFloat'](_0x41d18c){return this['getParamet'+'erValue'](_0x41d18c,Rg);}['setFloat'](_0x4e87b5,_0x571c73){this['setParamet'+'erValue'](_0x4e87b5,Rg,_0x571c73);}['getInteger'](_0x59f132){return this['getParamet'+'erValue'](_0x59f132,Lg);}['setInteger'](_0x2a708d,_0x588ee4){typeof _0x588ee4=='number'&&_0x588ee4%(-0x912*-0x4+-0x163f+-0x1*0xe08)===0x32*0x1c+0x2b*-0xc7+0x1bf5?this['setParamet'+'erValue'](_0x2a708d,Lg,_0x588ee4):w['error']('Attempting'+'\x20to\x20assign'+'\x20non\x20integ'+'er\x20value\x20t'+'o\x20integer\x20'+'parameter',_0x2a708d,_0x588ee4);}['getBoolean'](_0x186c74){return this['getParamet'+'erValue'](_0x186c74,Og);}['setBoolean'](_0x3d3b09,_0x388692){this['setParamet'+'erValue'](_0x3d3b09,Og,!!_0x388692);}['getTrigger'](_0x3e09c9){return this['getParamet'+'erValue'](_0x3e09c9,Qc);}['setTrigger'](_0x5d4952,_0x7029a8=!(0x15f2+-0x6*0x373+0x1*-0x13f)){this['setParamet'+'erValue'](_0x5d4952,Qc,!(-0x52f*-0x5+0x1*-0x2312+0x927)),_0x7029a8&&this['_consumedT'+'riggers']['add'](_0x5d4952);}['resetTrigg'+'er'](_0x1ccfc0){this['setParamet'+'erValue'](_0x1ccfc0,Qc,!(0x2f*0x9b+-0x1dab+-0x1*-0x137));}['onBeforeRe'+'move'](){Number['isFinite'](this['_stateGrap'+'hAsset'])&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);}['update'](_0x3f9444){for(let _0x1be7fa=-0x10*-0xef+-0x187c+-0x4*-0x263;_0x1be7fa<this['layers']['length'];_0x1be7fa++)this['layers'][_0x1be7fa]['update'](_0x3f9444*this['speed']);this['_consumedT'+'riggers']['forEach'](_0x24aca5=>{this['parameters'][_0x24aca5]['value']=!(0x100b+0xd59+-0x1d63*0x1);}),this['_consumedT'+'riggers']['clear']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x5c6c34,_0xd0dc42){_0x5c6c34['rootBone']&&_0xd0dc42[_0x5c6c34['rootBone']['getGuid']()]?this['rootBone']=_0xd0dc42[_0x5c6c34['rootBone']['getGuid']()]:this['rebind']();}}class UL{constructor(){this['enabled']=!(0x1378+-0x2fe+0x107a*-0x1);}}const bu=['enabled'];class BL extends ct{constructor(_0x5ab5c7){super(_0x5ab5c7),this['id']='anim',this['ComponentT'+'ype']=$v,this['DataType']=UL,this['schema']=bu,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x289491,_0xb5f85,_0x461362){super['initialize'+'ComponentD'+'ata'](_0x289491,_0xb5f85,bu);const _0x3d984d=['animationA'+'ssets','stateGraph','layers','masks'];Object['keys'](_0xb5f85)['forEach'](_0x5f58c3=>{_0x3d984d['includes'](_0x5f58c3)||(_0x289491[_0x5f58c3]=_0xb5f85[_0x5f58c3]);}),_0xb5f85['stateGraph']&&(_0x289491['stateGraph']=_0xb5f85['stateGraph'],_0x289491['loadStateG'+'raph'](_0x289491['stateGraph'])),_0xb5f85['layers']&&_0xb5f85['layers']['forEach']((_0x410d42,_0x17f8b0)=>{_0x410d42['_controlle'+'r']['states']['forEach'](_0x30635d=>{_0x410d42['_controlle'+'r']['_states'][_0x30635d]['_animation'+'List']['forEach'](_0x29c0fa=>{if(!_0x29c0fa['animTrack']||_0x29c0fa['animTrack']===Qi['EMPTY']){const _0xac36ad=this['app']['assets']['get'](_0x410d42['_component']['_animation'+'Assets'][_0x410d42['name']+':'+_0x29c0fa['name']]['asset']);_0xac36ad&&!_0xac36ad['loaded']&&_0xac36ad['once']('load',()=>{_0x289491['layers'][_0x17f8b0]['assignAnim'+'ation'](_0x29c0fa['name'],_0xac36ad['resource']);});}else _0x289491['layers'][_0x17f8b0]['assignAnim'+'ation'](_0x29c0fa['name'],_0x29c0fa['animTrack']);});});}),_0xb5f85['animationA'+'ssets']&&(_0x289491['animationA'+'ssets']=Object['assign'](_0x289491['animationA'+'ssets'],_0xb5f85['animationA'+'ssets'])),_0xb5f85['masks']&&Object['keys'](_0xb5f85['masks'])['forEach'](_0x1350f2=>{if(_0x289491['layers'][_0x1350f2]){const _0x52e20b=_0xb5f85['masks'][_0x1350f2]['mask'],_0x121f47={};Object['keys'](_0x52e20b)['forEach'](_0x10050c=>{_0x121f47[decodeURI(_0x10050c)]=_0x52e20b[_0x10050c];}),_0x289491['layers'][_0x1350f2]['mask']=_0x121f47;}});}['onAnimatio'+'nUpdate'](_0x4e0b19){const _0x3a0dbb=this['store'];for(const _0x2087ea in _0x3a0dbb)if(_0x3a0dbb['hasOwnProp'+'erty'](_0x2087ea)){const _0x35900c=_0x3a0dbb[_0x2087ea]['entity']['anim'];_0x35900c['data']['enabled']&&_0x35900c['entity']['enabled']&&_0x35900c['playing']&&_0x35900c['update'](_0x4e0b19);}}['cloneCompo'+'nent'](_0x5caca1,_0x3536cd){let _0x3864f8;(!_0x5caca1['anim']['rootBone']||_0x5caca1['anim']['rootBone']===_0x5caca1)&&(_0x3864f8={},_0x5caca1['anim']['layers']['forEach']((_0x11dedb,_0x1dd771)=>{if(_0x11dedb['mask']){const _0x2d3b71={};Object['keys'](_0x11dedb['mask'])['forEach'](_0x5a2207=>{const _0x3b0b25=_0x5a2207['split']('/');_0x3b0b25['shift']();const _0x3f1481=[_0x3536cd['name'],..._0x3b0b25]['join']('/');_0x2d3b71[_0x3f1481]=_0x11dedb['mask'][_0x5a2207];}),_0x3864f8[_0x1dd771]={'mask':_0x2d3b71};}}));const _0x12c6a5={'enabled':_0x5caca1['anim']['enabled'],'stateGraphAsset':_0x5caca1['anim']['stateGraph'+'Asset'],'animationAssets':_0x5caca1['anim']['animationA'+'ssets'],'speed':_0x5caca1['anim']['speed'],'activate':_0x5caca1['anim']['activate'],'playing':_0x5caca1['anim']['playing'],'rootBone':_0x5caca1['anim']['rootBone'],'stateGraph':_0x5caca1['anim']['stateGraph'],'layers':_0x5caca1['anim']['layers'],'layerIndices':_0x5caca1['anim']['layerIndic'+'es'],'parameters':_0x5caca1['anim']['parameters'],'normalizeWeights':_0x5caca1['anim']['normalizeW'+'eights'],'masks':_0x3864f8};return this['addCompone'+'nt'](_0x3536cd,_0x12c6a5);}['onBeforeRe'+'move'](_0x1c7eb1,_0x47ec27){_0x47ec27['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}}we['_buildAcce'+'ssors']($v['prototype'],bu);class Xv extends we{['setCurrent'+'Listener'](){if(this['enabled']&&this['entity']['audioliste'+'ner']&&this['entity']['enabled']){this['system']['current']=this['entity'];const _0x4031d1=this['system']['current']['getPositio'+'n']();this['system']['manager']['listener']['setPositio'+'n'](_0x4031d1);}}['onEnable'](){this['setCurrent'+'Listener']();}['onDisable'](){this['system']['current']===this['entity']&&(this['system']['current']=null);}}class zL{constructor(){this['enabled']=!(-0x1ebf*-0x1+0x43d+-0x2*0x117e);}}const qv=['enabled'];class VL extends ct{constructor(_0x5918d7){super(_0x5918d7),this['id']='audioliste'+'ner',this['ComponentT'+'ype']=Xv,this['DataType']=zL,this['schema']=qv,this['manager']=_0x5918d7['soundManag'+'er'],w['assert'](this['manager'],'AudioListe'+'nerCompone'+'ntSystem\x20c'+'annot\x20be\x20c'+'reated\x20wit'+'hout\x20sound'+'\x20manager'),this['current']=null,this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x3040da,_0x548ad8,_0x1a7d48){_0x1a7d48=['enabled'],super['initialize'+'ComponentD'+'ata'](_0x3040da,_0x548ad8,_0x1a7d48);}['onUpdate'](_0x56c144){if(this['current']){const _0x4308c6=this['current']['getPositio'+'n']();this['manager']['listener']['setPositio'+'n'](_0x4308c6);const _0x105d1d=this['current']['getWorldTr'+'ansform']();this['manager']['listener']['setOrienta'+'tion'](_0x105d1d);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Xv['prototype'],qv);const Au=0xdd9+0x899*0x3+-0x4*0x9e9,Ng=0x12*-0xdb+-0x15a6*0x1+0x250d,eh='group',Cu='image',jv='text',th='stretch',GL='contain',HL='cover',ft={'DEFAULT':'DEFAULT','HOVER':'HOVER','PRESSED':'PRESSED','INACTIVE':'INACTIVE'},kl={};kl[ft['DEFAULT']]='_defaultTi'+'nt',kl[ft['HOVER']]='hoverTint',kl[ft['PRESSED']]='pressedTin'+'t',kl[ft['INACTIVE']]='inactiveTi'+'nt';const Ul={};Ul[ft['DEFAULT']]='_defaultSp'+'riteAsset',Ul[ft['HOVER']]='hoverSprit'+'eAsset',Ul[ft['PRESSED']]='pressedSpr'+'iteAsset',Ul[ft['INACTIVE']]='inactiveSp'+'riteAsset';const Bl={};Bl[ft['DEFAULT']]='_defaultSp'+'riteFrame',Bl[ft['HOVER']]='hoverSprit'+'eFrame',Bl[ft['PRESSED']]='pressedSpr'+'iteFrame',Bl[ft['INACTIVE']]='inactiveSp'+'riteFrame';class It extends we{constructor(_0x48a9dc,_0x152141){super(_0x48a9dc,_0x152141),h(this,'_visualSta'+'te',ft['DEFAULT']),h(this,'_isHoverin'+'g',!(0x2657*0x1+-0x6d8+-0x1f7e)),h(this,'_hoveringC'+'ounter',-0x33a*-0x3+-0x1a66+0x10b8),h(this,'_isPressed',!(0x2*0x12a+-0x1347+-0x5*-0x364)),h(this,'_defaultTi'+'nt',new ie(-0x2*0xa61+-0x122a+-0x5*-0x7c9,0x13cb+-0x4eb*0x5+0x4cd,-0x29*-0xa+0x1bb*-0x5+0x2b*0x2a,0x22d3+0x3*-0xcd6+0x3b0)),h(this,'_defaultSp'+'riteAsset',null),h(this,'_defaultSp'+'riteFrame',-0x13bc*0x1+0x1*0xd13+0x155*0x5),h(this,'_imageEnti'+'ty',null),h(this,'_evtElemen'+'tAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntRemove',null),h(this,'_evtImageE'+'ntityEleme'+'ntColor',null),h(this,'_evtImageE'+'ntityEleme'+'ntOpacity',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame',null),(this['_visualSta'+'te']=ft['DEFAULT'],this['_isHoverin'+'g']=!(0x2*-0x1247+0xff3*-0x1+0x3482),this['_hoveringC'+'ounter']=-0x1a0f+-0xee3+0x1*0x28f2,this['_isPressed']=!(0x254+0x3*-0x110+0xdd),this['_defaultTi'+'nt']=new ie(-0x2411*-0x1+-0x471+-0x1f9f,0x1*-0x21f+0x5*-0x10+0x270,-0x4f9+-0x1264+0x2*0xbaf,-0x233e+0xc11+0x172e),this['_defaultSp'+'riteAsset']=null,this['_defaultSp'+'riteFrame']=0x4b1*0x3+0x12dd+-0x20f0,this['_toggleLif'+'ecycleList'+'eners']('on',_0x48a9dc));}get['data'](){const _0x210c4f=this['system']['store'][this['entity']['getGuid']()];return _0x210c4f?_0x210c4f['data']:null;}set['enabled'](_0x14cf10){this['_setValue']('enabled',_0x14cf10);}get['enabled'](){return this['data']['enabled'];}set['active'](_0x7fa898){this['_setValue']('active',_0x7fa898);}get['active'](){return this['data']['active'];}set['imageEntit'+'y'](_0x3e3946){if(this['_imageEnti'+'ty']!==_0x3e3946){const _0x3d1430=typeof _0x3e3946=='string';if(this['_imageEnti'+'ty']&&_0x3d1430&&this['_imageEnti'+'ty']['getGuid']()===_0x3e3946)return;this['_imageEnti'+'ty']&&this['_imageEnti'+'tyUnsubscr'+'ibe'](),_0x3e3946 instanceof Ie?this['_imageEnti'+'ty']=_0x3e3946:_0x3d1430?this['_imageEnti'+'ty']=this['system']['app']['getEntityF'+'romIndex'](_0x3e3946)||null:this['_imageEnti'+'ty']=null,this['_imageEnti'+'ty']&&this['_imageEnti'+'tySubscrib'+'e'](),this['_imageEnti'+'ty']?this['data']['imageEntit'+'y']=this['_imageEnti'+'ty']['getGuid']():_0x3d1430&&_0x3e3946&&(this['data']['imageEntit'+'y']=_0x3e3946);}}get['imageEntit'+'y'](){return this['_imageEnti'+'ty'];}set['hitPadding'](_0x286993){this['_setValue']('hitPadding',_0x286993);}get['hitPadding'](){return this['data']['hitPadding'];}set['transition'+'Mode'](_0x36e3a3){this['_setValue']('transition'+'Mode',_0x36e3a3);}get['transition'+'Mode'](){return this['data']['transition'+'Mode'];}set['hoverTint'](_0x527da3){this['_setValue']('hoverTint',_0x527da3);}get['hoverTint'](){return this['data']['hoverTint'];}set['pressedTin'+'t'](_0x26052a){this['_setValue']('pressedTin'+'t',_0x26052a);}get['pressedTin'+'t'](){return this['data']['pressedTin'+'t'];}set['inactiveTi'+'nt'](_0x23e28d){this['_setValue']('inactiveTi'+'nt',_0x23e28d);}get['inactiveTi'+'nt'](){return this['data']['inactiveTi'+'nt'];}set['fadeDurati'+'on'](_0x1fd78e){this['_setValue']('fadeDurati'+'on',_0x1fd78e);}get['fadeDurati'+'on'](){return this['data']['fadeDurati'+'on'];}set['hoverSprit'+'eAsset'](_0x511957){this['_setValue']('hoverSprit'+'eAsset',_0x511957);}get['hoverSprit'+'eAsset'](){return this['data']['hoverSprit'+'eAsset'];}set['hoverSprit'+'eFrame'](_0x437159){this['_setValue']('hoverSprit'+'eFrame',_0x437159);}get['hoverSprit'+'eFrame'](){return this['data']['hoverSprit'+'eFrame'];}set['pressedSpr'+'iteAsset'](_0x3bf085){this['_setValue']('pressedSpr'+'iteAsset',_0x3bf085);}get['pressedSpr'+'iteAsset'](){return this['data']['pressedSpr'+'iteAsset'];}set['pressedSpr'+'iteFrame'](_0x1122c8){this['_setValue']('pressedSpr'+'iteFrame',_0x1122c8);}get['pressedSpr'+'iteFrame'](){return this['data']['pressedSpr'+'iteFrame'];}set['inactiveSp'+'riteAsset'](_0x3a8d1b){this['_setValue']('inactiveSp'+'riteAsset',_0x3a8d1b);}get['inactiveSp'+'riteAsset'](){return this['data']['inactiveSp'+'riteAsset'];}set['inactiveSp'+'riteFrame'](_0x3d21de){this['_setValue']('inactiveSp'+'riteFrame',_0x3d21de);}get['inactiveSp'+'riteFrame'](){return this['data']['inactiveSp'+'riteFrame'];}['_setValue'](_0x9d5006,_0x4d82f9){const _0x1ef7d7=this['data'],_0x2381ba=_0x1ef7d7[_0x9d5006];_0x1ef7d7[_0x9d5006]=_0x4d82f9,this['fire']('set',_0x9d5006,_0x2381ba,_0x4d82f9);}['_toggleLif'+'ecycleList'+'eners'](_0x312d16,_0x536ddd){var _0xcf3898;this[_0x312d16]('set_active',this['_onSetActi'+'ve'],this),this[_0x312d16]('set_transi'+'tionMode',this['_onSetTran'+'sitionMode'],this),this[_0x312d16]('set_hoverT'+'int',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x312d16]('set_presse'+'dTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x312d16]('set_inacti'+'veTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x312d16]('set_hoverS'+'priteAsset',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x312d16]('set_hoverS'+'priteFrame',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x312d16]('set_presse'+'dSpriteAss'+'et',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x312d16]('set_presse'+'dSpriteFra'+'me',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x312d16]('set_inacti'+'veSpriteAs'+'set',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x312d16]('set_inacti'+'veSpriteFr'+'ame',this['_onSetTran'+'sitionValu'+'e'],this),_0x312d16==='on'?this['_evtElemen'+'tAdd']=this['entity']['on']('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this):((_0xcf3898=this['_evtElemen'+'tAdd'])==null||_0xcf3898['off'](),this['_evtElemen'+'tAdd']=null);}['_onSetActi'+'ve'](_0x4e3361,_0x5e0b4e,_0x3d6cb1){_0x5e0b4e!==_0x3d6cb1&&this['_updateVis'+'ualState']();}['_onSetTran'+'sitionMode'](_0xa104b7,_0x280684,_0x307c1c){_0x280684!==_0x307c1c&&(this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](_0x280684),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetTran'+'sitionValu'+'e'](_0x11380f,_0x59e15e,_0x2a0ad5){_0x59e15e!==_0x2a0ad5&&this['_forceReap'+'plyVisualS'+'tate']();}['_imageEnti'+'tySubscrib'+'e'](){this['_evtImageE'+'ntityEleme'+'ntAdd']=this['_imageEnti'+'ty']['on']('element:ad'+'d',this['_onImageEl'+'ementGain'],this),this['_imageEnti'+'ty']['element']&&this['_onImageEl'+'ementGain']();}['_imageEnti'+'tyUnsubscr'+'ibe'](){var _0x5e8eff,_0x467289;(_0x5e8eff=this['_evtImageE'+'ntityEleme'+'ntAdd'])==null||_0x5e8eff['off'](),this['_evtImageE'+'ntityEleme'+'ntAdd']=null,(_0x467289=this['_imageEnti'+'ty'])!=null&&_0x467289['element']&&this['_onImageEl'+'ementLose']();}['_imageEnti'+'tyElementS'+'ubscribe'](){const _0x4a2639=this['_imageEnti'+'ty']['element'];this['_evtImageE'+'ntityEleme'+'ntRemove']=_0x4a2639['once']('beforeremo'+'ve',this['_onImageEl'+'ementLose'],this),this['_evtImageE'+'ntityEleme'+'ntColor']=_0x4a2639['on']('set:color',this['_onSetColo'+'r'],this),this['_evtImageE'+'ntityEleme'+'ntOpacity']=_0x4a2639['on']('set:opacit'+'y',this['_onSetOpac'+'ity'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=_0x4a2639['on']('set:sprite'+'Asset',this['_onSetSpri'+'teAsset'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=_0x4a2639['on']('set:sprite'+'Frame',this['_onSetSpri'+'teFrame'],this);}['_imageEnti'+'tyElementU'+'nsubscribe'](){var _0x182d51,_0x3f9c68,_0x316c26,_0x358b8e,_0x428fc8;(_0x182d51=this['_evtImageE'+'ntityEleme'+'ntRemove'])==null||_0x182d51['off'](),this['_evtImageE'+'ntityEleme'+'ntRemove']=null,(_0x3f9c68=this['_evtImageE'+'ntityEleme'+'ntColor'])==null||_0x3f9c68['off'](),this['_evtImageE'+'ntityEleme'+'ntColor']=null,(_0x316c26=this['_evtImageE'+'ntityEleme'+'ntOpacity'])==null||_0x316c26['off'](),this['_evtImageE'+'ntityEleme'+'ntOpacity']=null,(_0x358b8e=this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set'])==null||_0x358b8e['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=null,(_0x428fc8=this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame'])==null||_0x428fc8['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=null;}['_onElement'+'ComponentR'+'emove'](){this['_toggleHit'+'ElementLis'+'teners']('off');}['_onElement'+'ComponentA'+'dd'](){this['_toggleHit'+'ElementLis'+'teners']('on');}['_onImageEl'+'ementLose'](){this['_imageEnti'+'tyElementU'+'nsubscribe'](),this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['_onImageEl'+'ementGain'](){this['_imageEnti'+'tyElementS'+'ubscribe'](),this['_storeDefa'+'ultVisualS'+'tate'](),this['_forceReap'+'plyVisualS'+'tate']();}['_toggleHit'+'ElementLis'+'teners'](_0x53a948){if(this['entity']['element']){const _0x52f9d7=_0x53a948==='on';if(_0x52f9d7&&this['_hasHitEle'+'mentListen'+'ers'])return;this['entity']['element'][_0x53a948]('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['entity']['element'][_0x53a948]('mouseenter',this['_onMouseEn'+'ter'],this),this['entity']['element'][_0x53a948]('mouseleave',this['_onMouseLe'+'ave'],this),this['entity']['element'][_0x53a948]('mousedown',this['_onMouseDo'+'wn'],this),this['entity']['element'][_0x53a948]('mouseup',this['_onMouseUp'],this),this['entity']['element'][_0x53a948]('touchstart',this['_onTouchSt'+'art'],this),this['entity']['element'][_0x53a948]('touchend',this['_onTouchEn'+'d'],this),this['entity']['element'][_0x53a948]('touchleave',this['_onTouchLe'+'ave'],this),this['entity']['element'][_0x53a948]('touchcance'+'l',this['_onTouchCa'+'ncel'],this),this['entity']['element'][_0x53a948]('selectstar'+'t',this['_onSelectS'+'tart'],this),this['entity']['element'][_0x53a948]('selectend',this['_onSelectE'+'nd'],this),this['entity']['element'][_0x53a948]('selectente'+'r',this['_onSelectE'+'nter'],this),this['entity']['element'][_0x53a948]('selectleav'+'e',this['_onSelectL'+'eave'],this),this['entity']['element'][_0x53a948]('click',this['_onClick'],this),this['_hasHitEle'+'mentListen'+'ers']=_0x52f9d7;}}['_storeDefa'+'ultVisualS'+'tate'](){var _0x239684;const _0x30cb2e=(_0x239684=this['_imageEnti'+'ty'])==null?void(-0x1786+-0x2ec+0x1a72):_0x239684['element'];!_0x30cb2e||_0x30cb2e['type']===eh||(this['_storeDefa'+'ultColor'](_0x30cb2e['color']),this['_storeDefa'+'ultOpacity'](_0x30cb2e['opacity']),this['_storeDefa'+'ultSpriteA'+'sset'](_0x30cb2e['spriteAsse'+'t']),this['_storeDefa'+'ultSpriteF'+'rame'](_0x30cb2e['spriteFram'+'e']));}['_storeDefa'+'ultColor'](_0x28a151){this['_defaultTi'+'nt']['r']=_0x28a151['r'],this['_defaultTi'+'nt']['g']=_0x28a151['g'],this['_defaultTi'+'nt']['b']=_0x28a151['b'];}['_storeDefa'+'ultOpacity'](_0x14d535){this['_defaultTi'+'nt']['a']=_0x14d535;}['_storeDefa'+'ultSpriteA'+'sset'](_0x78536c){this['_defaultSp'+'riteAsset']=_0x78536c;}['_storeDefa'+'ultSpriteF'+'rame'](_0x4fa76b){this['_defaultSp'+'riteFrame']=_0x4fa76b;}['_onSetColo'+'r'](_0x2c99c2){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultColor'](_0x2c99c2),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetOpac'+'ity'](_0x3f2601){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultOpacity'](_0x3f2601),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teAsset'](_0x78b2bc){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteA'+'sset'](_0x78b2bc),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teFrame'](_0x37f5ad){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteF'+'rame'](_0x37f5ad),this['_forceReap'+'plyVisualS'+'tate']());}['_onMouseEn'+'ter'](_0x3b521c){this['_isHoverin'+'g']=!(0x201*0x13+0x23b4+0x49c7*-0x1),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseenter',_0x3b521c);}['_onMouseLe'+'ave'](_0x475f8a){this['_isHoverin'+'g']=!(-0xe1b+0xc4f*-0x1+-0x1a6b*-0x1),this['_isPressed']=!(0xae6+0xb9*-0x29+0xb*0x1b4),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseleave',_0x475f8a);}['_onMouseDo'+'wn'](_0x10ca23){this['_isPressed']=!(-0x1c6d+-0x607+0x113a*0x2),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mousedown',_0x10ca23);}['_onMouseUp'](_0x52e035){this['_isPressed']=!(-0x2595+-0x6ee+-0x197*-0x1c),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseup',_0x52e035);}['_onTouchSt'+'art'](_0xc9b5e5){this['_isPressed']=!(0x1084+0x8b7+-0x193b),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchstart',_0xc9b5e5);}['_onTouchEn'+'d'](_0x52d245){_0x52d245['event']['preventDef'+'ault'](),this['_isPressed']=!(-0x13d6+0x30d*-0x7+-0x1*-0x2932),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchend',_0x52d245);}['_onTouchLe'+'ave'](_0x43def6){this['_isPressed']=!(0x18*0x5e+-0xf52+-0x683*-0x1),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchleave',_0x43def6);}['_onTouchCa'+'ncel'](_0x35ef6b){this['_isPressed']=!(-0x1*-0x1da7+-0x227*0xa+-0x2*0x410),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchcance'+'l',_0x35ef6b);}['_onSelectS'+'tart'](_0x1d2c0a){this['_isPressed']=!(-0x8c+0x4*-0x3d1+-0x2*-0x7e8),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectstar'+'t',_0x1d2c0a);}['_onSelectE'+'nd'](_0x3c3ac7){this['_isPressed']=!(-0x1b6e+-0x1487+0x2ff6),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectend',_0x3c3ac7);}['_onSelectE'+'nter'](_0x1f7216){this['_hoveringC'+'ounter']++,this['_hoveringC'+'ounter']===0xd44+-0x474+-0x8cf&&(this['_isHoverin'+'g']=!(-0xcdd+-0x26ee+-0x33cb*-0x1),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectente'+'r',_0x1f7216);}['_onSelectL'+'eave'](_0x303a64){this['_hoveringC'+'ounter']--,this['_hoveringC'+'ounter']===0x132*-0x2+0x126a+0x1*-0x1006&&(this['_isHoverin'+'g']=!(-0x158*0x2+-0x5*0x2ab+0x1008),this['_isPressed']=!(0x1821+0x19c8+0x18f4*-0x2),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectleav'+'e',_0x303a64);}['_onClick'](_0xce3ddc){this['_fireIfAct'+'ive']('click',_0xce3ddc);}['_fireIfAct'+'ive'](_0x321d59,_0x588e95){this['data']['active']&&this['fire'](_0x321d59,_0x588e95);}['_updateVis'+'ualState'](_0x193c3c){const _0x223c0d=this['_visualSta'+'te'],_0x33f359=this['_determine'+'VisualStat'+'e']();if((_0x223c0d!==_0x33f359||_0x193c3c)&&this['enabled'])switch(this['_visualSta'+'te']=_0x33f359,_0x223c0d===ft['HOVER']&&this['_fireIfAct'+'ive']('hoverend'),_0x223c0d===ft['PRESSED']&&this['_fireIfAct'+'ive']('pressedend'),_0x33f359===ft['HOVER']&&this['_fireIfAct'+'ive']('hoverstart'),_0x33f359===ft['PRESSED']&&this['_fireIfAct'+'ive']('pressedsta'+'rt'),this['transition'+'Mode']){case Au:{const _0x2cd954=kl[this['_visualSta'+'te']],_0x334989=this[_0x2cd954];this['_applyTint'](_0x334989);break;}case Ng:{const _0x30ae8d=Ul[this['_visualSta'+'te']],_0x3dc34d=Bl[this['_visualSta'+'te']],_0x148246=this[_0x30ae8d],_0x4756cf=this[_0x3dc34d];this['_applySpri'+'te'](_0x148246,_0x4756cf);break;}}}['_forceReap'+'plyVisualS'+'tate'](){this['_updateVis'+'ualState'](!(0x1f89+-0x7ea+0x1*-0x179f));}['_resetToDe'+'faultVisua'+'lState'](_0x42fd43){var _0x462a90;if((_0x462a90=this['_imageEnti'+'ty'])!=null&&_0x462a90['element'])switch(_0x42fd43){case Au:this['_cancelTwe'+'en'](),this['_applyTint'+'Immediatel'+'y'](this['_defaultTi'+'nt']);break;case Ng:this['_applySpri'+'te'](this['_defaultSp'+'riteAsset'],this['_defaultSp'+'riteFrame']);break;}}['_determine'+'VisualStat'+'e'](){if(this['active']){if(this['_isPressed'])return ft['PRESSED'];if(this['_isHoverin'+'g'])return ft['HOVER'];}else return ft['INACTIVE'];return ft['DEFAULT'];}['_applySpri'+'te'](_0xc5df9b,_0x171ce9){var _0x3558fa;const _0x32fec5=(_0x3558fa=this['_imageEnti'+'ty'])==null?void(0x8d5*-0x2+0x141d+-0xb*0x39):_0x3558fa['element'];_0x32fec5&&(_0x171ce9=_0x171ce9||0x954+0xbe6+-0x153a,this['_isApplyin'+'gSprite']=!(-0x11*-0x106+0x1*-0x1981+0x81b),_0x32fec5['spriteAsse'+'t']!==_0xc5df9b&&(_0x32fec5['spriteAsse'+'t']=_0xc5df9b),_0x32fec5['spriteFram'+'e']!==_0x171ce9&&(_0x32fec5['spriteFram'+'e']=_0x171ce9),this['_isApplyin'+'gSprite']=!(0x5f*-0x1+0x12c6+-0x5*0x3ae));}['_applyTint'](_0xc93af8){this['_cancelTwe'+'en'](),this['fadeDurati'+'on']===0x7*-0x200+-0x11ab+0x1fab?this['_applyTint'+'Immediatel'+'y'](_0xc93af8):this['_applyTint'+'WithTween'](_0xc93af8);}['_applyTint'+'Immediatel'+'y'](_0x23bd66){var _0x110805;const _0x2943d1=(_0x110805=this['_imageEnti'+'ty'])==null?void(-0x7c4+-0x1c28+0x23ec):_0x110805['element'];if(!_0x23bd66||!_0x2943d1||_0x2943d1['type']===eh)return;const _0xffbddf=kg(_0x23bd66);this['_isApplyin'+'gTint']=!(-0x5*-0x2b7+-0x1171*-0x2+-0x3075),_0xffbddf['equals'](_0x2943d1['color'])||(_0x2943d1['color']=_0xffbddf),_0x2943d1['opacity']!==_0x23bd66['a']&&(_0x2943d1['opacity']=_0x23bd66['a']),this['_isApplyin'+'gTint']=!(0x1*-0x17d5+0x1*0x1391+0x445);}['_applyTint'+'WithTween'](_0x1497fd){var _0x6934f1;const _0x39a42b=(_0x6934f1=this['_imageEnti'+'ty'])==null?void(0xabd+0x1*0x1669+-0x1093*0x2):_0x6934f1['element'];if(!_0x1497fd||!_0x39a42b||_0x39a42b['type']===eh)return;const _0xf49ecf=kg(_0x1497fd),_0x143229=_0x39a42b['color'],_0x235d57=_0x39a42b['opacity'];_0xf49ecf['equals'](_0x143229)&&_0x1497fd['a']===_0x235d57||(this['_tweenInfo']={'startTime':de(),'from':new ie(_0x143229['r'],_0x143229['g'],_0x143229['b'],_0x235d57),'to':_0x1497fd['clone'](),'lerpColor':new ie()});}['_updateTin'+'tTween'](){const _0x467478=de()-this['_tweenInfo']['startTime'];let _0x2db164=this['fadeDurati'+'on']===0x1*0x270b+-0xcff+-0x4*0x683?0x12f*-0xa+-0x71*-0xc+0x68b:_0x467478/this['fadeDurati'+'on'];if(_0x2db164=Y['clamp'](_0x2db164,0x2a*0x1+-0x1434*-0x1+-0x145e,-0x3*-0xb85+0x2675+-0x4903*0x1),Math['abs'](_0x2db164-(-0x5e7+-0x2501+0x2ae9))>-0x2079*-0x1+0x7b4+-0x282d+0.00001){const _0x4dbce5=this['_tweenInfo']['lerpColor'];_0x4dbce5['lerp'](this['_tweenInfo']['from'],this['_tweenInfo']['to'],_0x2db164),this['_applyTint'+'Immediatel'+'y'](new ie(_0x4dbce5['r'],_0x4dbce5['g'],_0x4dbce5['b'],_0x4dbce5['a']));}else this['_applyTint'+'Immediatel'+'y'](this['_tweenInfo']['to']),this['_cancelTwe'+'en']();}['_cancelTwe'+'en'](){delete this['_tweenInfo'];}['onUpdate'](){this['_tweenInfo']&&this['_updateTin'+'tTween']();}['onEnable'](){this['_isHoverin'+'g']=!(0x19f3+0x4*-0x86d+0x3*0x296),this['_hoveringC'+'ounter']=0x1f64+0x13c*-0x6+-0x2*0xbfe,this['_isPressed']=!(0xd4*-0x2c+0x7d+0x162*0x1a),this['_toggleHit'+'ElementLis'+'teners']('on'),this['_forceReap'+'plyVisualS'+'tate']();}['onDisable'](){this['_toggleHit'+'ElementLis'+'teners']('off'),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['onRemove'](){this['_imageEnti'+'tyUnsubscr'+'ibe'](),this['_toggleLif'+'ecycleList'+'eners']('off',this['system']),this['onDisable']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x2a7b1c,_0x3f4661){_0x2a7b1c['imageEntit'+'y']&&(this['imageEntit'+'y']=_0x3f4661[_0x2a7b1c['imageEntit'+'y']['getGuid']()]);}}h(It,'EVENT_MOUS'+'EDOWN','mousedown'),h(It,'EVENT_MOUS'+'EUP','mouseup'),h(It,'EVENT_MOUS'+'EENTER','mouseenter'),h(It,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(It,'EVENT_CLIC'+'K','click'),h(It,'EVENT_TOUC'+'HSTART','touchstart'),h(It,'EVENT_TOUC'+'HEND','touchend'),h(It,'EVENT_TOUC'+'HCANCEL','touchcance'+'l'),h(It,'EVENT_TOUC'+'HLEAVE','touchleave'),h(It,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(It,'EVENT_SELE'+'CTEND','selectend'),h(It,'EVENT_SELE'+'CTENTER','selectente'+'r'),h(It,'EVENT_SELE'+'CTLEAVE','selectleav'+'e'),h(It,'EVENT_HOVE'+'RSTART','hoverstart'),h(It,'EVENT_HOVE'+'REND','hoverend'),h(It,'EVENT_PRES'+'SEDSTART','pressedsta'+'rt'),h(It,'EVENT_PRES'+'SEDEND','pressedend');function kg(_0x47c5bb){return new ie(_0x47c5bb['r'],_0x47c5bb['g'],_0x47c5bb['b']);}class WL{constructor(){this['enabled']=!(0xb42*0x1+0x1*0xa23+-0x1565),this['active']=!(0x28*0x1c+0x23e8+0x2848*-0x1),this['imageEntit'+'y']=null,this['hitPadding']=new re(),this['transition'+'Mode']=Au,this['hoverTint']=new ie(-0x50*0x6d+0x1e45+0x3cb+0.75,0xe95*-0x1+0x1476+-0x5e1+0.75,-0xd3*0xe+0x39*-0xab+0x319d+0.75),this['pressedTin'+'t']=new ie(0x5*0x4cb+-0x2252+0xf1*0xb+0.5,0x1*0x1cf1+0x21bf+0xec*-0x44+0.5,-0x476+0x20d+0x269*0x1+0.5),this['inactiveTi'+'nt']=new ie(0x115e+-0x104f*-0x1+0xe9*-0x25+0.25,-0x14*0x16a+-0x1*0x27b+0x1ec3+0.25,0x1941+0x2648+-0x3f89+0.25),this['fadeDurati'+'on']=0x193+0x2ae+-0x21*0x21,this['hoverSprit'+'eAsset']=null,this['hoverSprit'+'eFrame']=-0x788*-0x5+0x2421*0x1+-0x49c9,this['pressedSpr'+'iteAsset']=null,this['pressedSpr'+'iteFrame']=-0xc25+0x1*-0x14d5+-0x12*-0x1d5,this['inactiveSp'+'riteAsset']=null,this['inactiveSp'+'riteFrame']=0x2277+0x118b+-0x3402;}}const Ug=['enabled','active',{'name':'hitPadding','type':'vec4'},'transition'+'Mode',{'name':'hoverTint','type':'rgba'},{'name':'pressedTin'+'t','type':'rgba'},{'name':'inactiveTi'+'nt','type':'rgba'},'fadeDurati'+'on','hoverSprit'+'eAsset','hoverSprit'+'eFrame','pressedSpr'+'iteAsset','pressedSpr'+'iteFrame','inactiveSp'+'riteAsset','inactiveSp'+'riteFrame'];class $L extends ct{constructor(_0x2d0068){super(_0x2d0068),this['id']='button',this['ComponentT'+'ype']=It,this['DataType']=WL,this['schema']=Ug,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x51fd8b,_0x2152cf,_0xc8fd61){_0x51fd8b['imageEntit'+'y']=_0x2152cf['imageEntit'+'y'],super['initialize'+'ComponentD'+'ata'](_0x51fd8b,_0x2152cf,Ug);}['onUpdate'](_0x3e15f8){const _0x478345=this['store'];for(const _0x5e05fe in _0x478345){const _0x44c9e9=_0x478345[_0x5e05fe]['entity'],_0x2648d7=_0x44c9e9['button'];_0x2648d7['enabled']&&_0x44c9e9['enabled']&&_0x2648d7['onUpdate']();}}['_onRemoveC'+'omponent'](_0x47aba3,_0x152a68){_0x152a68['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}const Bg=new D(),zg=new le();class rn extends we{constructor(_0x2eb33c,_0x27d3fd){super(_0x2eb33c,_0x27d3fd),h(this,'_compoundP'+'arent',null),h(this,'_hasOffset',!(0x1*-0x1ba3+-0x569*0x1+-0x210d*-0x1)),(this['entity']['on']('insert',this['_onInsert'],this),this['on']('set_type',this['onSetType'],this),this['on']('set_convex'+'Hull',this['onSetModel'],this),this['on']('set_halfEx'+'tents',this['onSetHalfE'+'xtents'],this),this['on']('set_linear'+'Offset',this['onSetOffse'+'t'],this),this['on']('set_angula'+'rOffset',this['onSetOffse'+'t'],this),this['on']('set_radius',this['onSetRadiu'+'s'],this),this['on']('set_height',this['onSetHeigh'+'t'],this),this['on']('set_axis',this['onSetAxis'],this),this['on']('set_asset',this['onSetAsset'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_model',this['onSetModel'],this),this['on']('set_render',this['onSetRende'+'r'],this));}get['data'](){const _0x325775=this['system']['store'][this['entity']['getGuid']()];return _0x325775?_0x325775['data']:null;}set['enabled'](_0x5ae8be){this['_setValue']('enabled',_0x5ae8be);}get['enabled'](){return this['data']['enabled'];}set['type'](_0x4defb8){this['_setValue']('type',_0x4defb8);}get['type'](){return this['data']['type'];}set['halfExtent'+'s'](_0x1425ab){this['_setValue']('halfExtent'+'s',_0x1425ab);}get['halfExtent'+'s'](){return this['data']['halfExtent'+'s'];}set['linearOffs'+'et'](_0x456884){this['_setValue']('linearOffs'+'et',_0x456884);}get['linearOffs'+'et'](){return this['data']['linearOffs'+'et'];}set['angularOff'+'set'](_0xea266b){this['_setValue']('angularOff'+'set',_0xea266b);}get['angularOff'+'set'](){return this['data']['angularOff'+'set'];}set['radius'](_0x5385d2){this['_setValue']('radius',_0x5385d2);}get['radius'](){return this['data']['radius'];}set['axis'](_0x495ad1){this['_setValue']('axis',_0x495ad1);}get['axis'](){return this['data']['axis'];}set['height'](_0x337bfc){this['_setValue']('height',_0x337bfc);}get['height'](){return this['data']['height'];}set['asset'](_0x3ea8b1){this['_setValue']('asset',_0x3ea8b1);}get['asset'](){return this['data']['asset'];}set['renderAsse'+'t'](_0x312a06){this['_setValue']('renderAsse'+'t',_0x312a06);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['convexHull'](_0x1b7a09){this['_setValue']('convexHull',_0x1b7a09);}get['convexHull'](){return this['data']['convexHull'];}set['shape'](_0x1c7c17){this['_setValue']('shape',_0x1c7c17);}get['shape'](){return this['data']['shape'];}set['model'](_0x2b0ec2){this['_setValue']('model',_0x2b0ec2);}get['model'](){return this['data']['model'];}set['render'](_0x4f594b){this['_setValue']('render',_0x4f594b);}get['render'](){return this['data']['render'];}set['checkVerte'+'xDuplicate'+'s'](_0x24a92f){this['_setValue']('checkVerte'+'xDuplicate'+'s',_0x24a92f);}get['checkVerte'+'xDuplicate'+'s'](){return this['data']['checkVerte'+'xDuplicate'+'s'];}['_setValue'](_0x4cde9c,_0x39db5a){const _0x22cd30=this['data'],_0x393f7f=_0x22cd30[_0x4cde9c];_0x22cd30[_0x4cde9c]=_0x39db5a,this['fire']('set',_0x4cde9c,_0x393f7f,_0x39db5a);}['onSetType'](_0x39dfe3,_0x27bcf3,_0x2862c1){_0x27bcf3!==_0x2862c1&&this['system']['changeType'](this,_0x27bcf3,_0x2862c1);}['onSetHalfE'+'xtents'](_0x5894c7,_0x3db372,_0x14ff55){const _0xe50f74=this['data']['type'];this['data']['initialize'+'d']&&_0xe50f74==='box'&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetOffse'+'t'](_0x4a3e88,_0x4fe31f,_0x747bd5){this['_hasOffset']=!this['data']['linearOffs'+'et']['equals'](D['ZERO'])||!this['data']['angularOff'+'set']['equals'](le['IDENTITY']),this['data']['initialize'+'d']&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetRadiu'+'s'](_0x2c4e09,_0x2e9859,_0x192314){const _0x2d0c2f=this['data']['type'];this['data']['initialize'+'d']&&(_0x2d0c2f==='sphere'||_0x2d0c2f==='capsule'||_0x2d0c2f==='cylinder'||_0x2d0c2f==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetHeigh'+'t'](_0x429e12,_0x2a0bf6,_0x3ec35e){const _0xe9b381=this['data']['type'];this['data']['initialize'+'d']&&(_0xe9b381==='capsule'||_0xe9b381==='cylinder'||_0xe9b381==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAxis'](_0x59b85b,_0x29d13a,_0x2385fe){const _0x5dd5f1=this['data']['type'];this['data']['initialize'+'d']&&(_0x5dd5f1==='capsule'||_0x5dd5f1==='cylinder'||_0x5dd5f1==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAsset'](_0x5127c3,_0x1a01ce,_0x459633){const _0x8c4e42=this['system']['app']['assets'];if(_0x1a01ce){const _0x436cd5=_0x8c4e42['get'](_0x1a01ce);_0x436cd5&&_0x436cd5['off']('remove',this['onAssetRem'+'oved'],this);}if(_0x459633){_0x459633 instanceof pe&&(this['data']['asset']=_0x459633['id']);const _0x5bb454=_0x8c4e42['get'](this['data']['asset']);_0x5bb454&&(_0x5bb454['off']('remove',this['onAssetRem'+'oved'],this),_0x5bb454['on']('remove',this['onAssetRem'+'oved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x459633||(this['data']['model']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetRende'+'rAsset'](_0x246284,_0x5a041d,_0xd2f6f6){const _0x3f6690=this['system']['app']['assets'];if(_0x5a041d){const _0x3a25d9=_0x3f6690['get'](_0x5a041d);_0x3a25d9&&_0x3a25d9['off']('remove',this['onRenderAs'+'setRemoved'],this);}if(_0xd2f6f6){_0xd2f6f6 instanceof pe&&(this['data']['renderAsse'+'t']=_0xd2f6f6['id']);const _0xd8f0ce=_0x3f6690['get'](this['data']['renderAsse'+'t']);_0xd8f0ce&&(_0xd8f0ce['off']('remove',this['onRenderAs'+'setRemoved'],this),_0xd8f0ce['on']('remove',this['onRenderAs'+'setRemoved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0xd2f6f6||(this['data']['render']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetModel'](_0x54d2fe,_0x493979,_0x2176c5){this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&this['system']['implementa'+'tions']['mesh']['doRecreate'+'PhysicalSh'+'ape'](this);}['onSetRende'+'r'](_0x4e5238,_0x498c81,_0x8fcc9c){this['onSetModel'](_0x4e5238,_0x498c81,_0x8fcc9c);}['onAssetRem'+'oved'](_0x5efa07){_0x5efa07['off']('remove',this['onAssetRem'+'oved'],this),this['data']['asset']===_0x5efa07['id']&&(this['asset']=null);}['onRenderAs'+'setRemoved'](_0x50febd){_0x50febd['off']('remove',this['onRenderAs'+'setRemoved'],this),this['data']['renderAsse'+'t']===_0x50febd['id']&&(this['renderAsse'+'t']=null);}['getCompoun'+'dChildShap'+'eIndex'](_0x40673e){const _0x5edd71=this['data']['shape'],_0xa1b89=_0x5edd71['getNumChil'+'dShapes']();for(let _0x569eb3=0x1*-0x443+0x2257+-0x1e14;_0x569eb3<_0xa1b89;_0x569eb3++){const _0x5a68de=_0x5edd71['getChildSh'+'ape'](_0x569eb3);if(Ammo['getPointer'](_0x5a68de)===Ammo['getPointer'](_0x40673e))return _0x569eb3;}return null;}['_onInsert'](_0x12fffc){if(!(typeof Ammo>'u')){if(this['_compoundP'+'arent'])this['system']['recreatePh'+'ysicalShap'+'es'](this);else{if(!this['entity']['rigidbody']){let _0x477b6e=this['entity']['parent'];for(;_0x477b6e;){if(_0x477b6e['collision']&&_0x477b6e['collision']['type']==='compound'){_0x477b6e['collision']['shape']['getNumChil'+'dShapes']()===0xb*0x273+-0xc7d*-0x2+-0x1*0x33eb?this['system']['recreatePh'+'ysicalShap'+'es'](_0x477b6e['collision']):this['system']['recreatePh'+'ysicalShap'+'es'](this);break;}_0x477b6e=_0x477b6e['parent'];}}}}}['_updateCom'+'pound'](){const _0x49ed89=this['entity'];if(_0x49ed89['_dirtyWorl'+'d']){let _0x40b40b=_0x49ed89['_dirtyLoca'+'l'],_0x527b03=_0x49ed89;for(;_0x527b03&&!_0x40b40b&&!(_0x527b03['collision']&&_0x527b03['collision']===this['_compoundP'+'arent']);)_0x527b03['_dirtyLoca'+'l']&&(_0x40b40b=!(-0x1910+-0x2074+0x3984)),_0x527b03=_0x527b03['parent'];if(_0x40b40b){_0x49ed89['forEach'](this['system']['implementa'+'tions']['compound']['_updateEac'+'hDescendan'+'tTransform'],_0x49ed89);const _0x117a6b=this['_compoundP'+'arent']['entity']['rigidbody'];_0x117a6b&&_0x117a6b['activate']();}}}['getShapePo'+'sition'](){const _0x3a75fc=this['entity']['getPositio'+'n']();if(this['_hasOffset']){const _0x2d0414=this['entity']['getRotatio'+'n'](),_0x233d05=this['data']['linearOffs'+'et'];return zg['copy'](_0x2d0414)['transformV'+'ector'](_0x233d05,Bg),Bg['add'](_0x3a75fc);}return _0x3a75fc;}['getShapeRo'+'tation'](){const _0x111b04=this['entity']['getRotatio'+'n']();return this['_hasOffset']?zg['copy'](_0x111b04)['mul'](this['data']['angularOff'+'set']):_0x111b04;}['onEnable'](){if(this['data']['type']==='mesh'&&(this['data']['asset']||this['data']['renderAsse'+'t'])&&this['data']['initialize'+'d']){const _0x43ad93=this['system']['app']['assets']['get'](this['data']['asset']||this['data']['renderAsse'+'t']);if(_0x43ad93&&(!_0x43ad93['resource']||!this['data']['shape'])){this['system']['recreatePh'+'ysicalShap'+'es'](this);return;}}if(this['entity']['rigidbody'])this['entity']['rigidbody']['enabled']&&this['entity']['rigidbody']['enableSimu'+'lation']();else{if(this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']){if(this['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===0x1894+-0x1bca+0x336*0x1)this['system']['recreatePh'+'ysicalShap'+'es'](this['_compoundP'+'arent']);else{const _0x565b65=this['system']['_getNodeTr'+'ansform'](this['entity'],this['_compoundP'+'arent']['entity']);this['_compoundP'+'arent']['shape']['addChildSh'+'ape'](_0x565b65,this['data']['shape']),Ammo['destroy'](_0x565b65),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']();}}else this['entity']['trigger']&&this['entity']['trigger']['enable']();}}['onDisable'](){this['entity']['rigidbody']?this['entity']['rigidbody']['disableSim'+'ulation']():this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']?this['_compoundP'+'arent']['entity']['_destroyin'+'g']||(this['system']['_removeCom'+'poundChild'](this['_compoundP'+'arent'],this['data']['shape']),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']()):this['entity']['trigger']&&this['entity']['trigger']['disable']();}['onBeforeRe'+'move'](){this['asset']&&(this['asset']=null),this['renderAsse'+'t']&&(this['renderAsse'+'t']=null),this['entity']['off']('insert',this['_onInsert'],this),this['off']();}}h(rn,'EVENT_CONT'+'ACT','contact'),h(rn,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(rn,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(rn,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(rn,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve');class XL{constructor(){this['enabled']=!(-0x991*-0x2+-0xc*0xac+-0x2*0x589),this['type']='box',this['halfExtent'+'s']=new D(-0x9be*0x1+-0x6*-0x593+-0x1*0x17b4+0.5,0xffb+0x1ca3+0x1*-0x2c9e+0.5,-0xd*-0x13+0x2068+-0x1*0x215f+0.5),this['linearOffs'+'et']=new D(),this['angularOff'+'set']=new le(),this['radius']=-0x1f0f+-0x13fb+0x330a*0x1+0.5,this['axis']=-0x10e9+-0x1*0xab1+-0x1*-0x1b9b,this['height']=-0x23*0x1+0x2db*0x5+0x711*-0x2,this['convexHull']=!(0x8d*-0x1b+0x140c+-0x52c),this['asset']=null,this['renderAsse'+'t']=null,this['checkVerte'+'xDuplicate'+'s']=!(-0xa5e+-0x11c7*-0x1+-0x769),this['shape']=null,this['model']=null,this['render']=null,this['initialize'+'d']=!(0x2dc+-0x21b7+0x1edc);}}const yo='static',ks='dynamic',Ha='kinematic',qL=-0x1*0x1bc4+-0x3*-0x7e2+-0x21*-0x20,Po=-0x9*-0x32b+-0x2*0xaea+-0x6ab,Pu=0x16e6+-0x9*-0x43a+-0x3cef,Vg=0x1f3*-0x12+-0x34*0x39+0xef*0x32,Yv=0x68b+0x199*0x4+-0xcea*0x1,jL=-0x2*0xc7f+-0x9ca+0xd*0x2ad,Gg=0x3b6+0x22a+-0x2*0x2ef,YL=-0x174f+-0x1*0xcff+0x2452,Hg=-0x1bb0+0xaa7+0x3*0x5b3,Wg=-0x617a*0x3+-0x171fb+0x39668,Mu=0x15d5*-0x12+0x1e6eb+0xa20c;let Us,zr,Wa;class Kv{constructor(_0x59cbbc,_0x108309,_0x2d4941){this['entity']=_0x108309['entity'],this['component']=_0x108309,this['app']=_0x59cbbc,typeof Ammo<'u'&&!Us&&(Us=new Ammo['btVector3'](),zr=new Ammo['btQuaterni'+'on'](),Wa=new Ammo['btTransfor'+'m']()),this['initialize'](_0x2d4941);}['initialize'](_0x14a947){const _0x195b7d=this['entity'],_0x573160=_0x14a947['shape'];if(_0x573160&&typeof Ammo<'u'){_0x195b7d['trigger']&&_0x195b7d['trigger']['destroy']();const _0x31ba93=-0x1634+-0x1358*-0x1+0x1*0x2dd,_0x4d51e9=this['component'];if(_0x4d51e9){const _0xf2b114=_0x4d51e9['getShapePo'+'sition'](),_0x42b850=_0x4d51e9['getShapeRo'+'tation']();Us['setValue'](_0xf2b114['x'],_0xf2b114['y'],_0xf2b114['z']),zr['setValue'](_0x42b850['x'],_0x42b850['y'],_0x42b850['z'],_0x42b850['w']);}else{const _0x342606=_0x195b7d['getPositio'+'n'](),_0x139bf9=_0x195b7d['getRotatio'+'n']();Us['setValue'](_0x342606['x'],_0x342606['y'],_0x342606['z']),zr['setValue'](_0x139bf9['x'],_0x139bf9['y'],_0x139bf9['z'],_0x139bf9['w']);}Wa['setOrigin'](Us),Wa['setRotatio'+'n'](zr);const _0x30be8e=this['app']['systems']['rigidbody']['createBody'](_0x31ba93,_0x573160,Wa);_0x30be8e['setRestitu'+'tion'](0x1*-0xe96+0x4*-0x22+0x1e*0x81),_0x30be8e['setFrictio'+'n'](-0x8d+0x11*0x9d+0x9e*-0x10),_0x30be8e['setDamping'](0xfb*-0x1+-0xa*0x95+-0x6cd*-0x1,-0x6d*0x46+-0x24eb+0x1d*0x24d),Us['setValue'](-0xcd8+-0x3*-0xb5a+-0x1536,0xfe0+-0x24fb*0x1+0x151b,-0x1c8b+-0x1b1+0xa*0x306),_0x30be8e['setLinearF'+'actor'](Us),_0x30be8e['setAngular'+'Factor'](Us),_0x30be8e['setCollisi'+'onFlags'](_0x30be8e['getCollisi'+'onFlags']()|Po),_0x30be8e['entity']=_0x195b7d,this['body']=_0x30be8e,this['component']['enabled']&&_0x195b7d['enabled']&&this['enable']();}}['destroy'](){this['body']&&(this['disable'](),this['app']['systems']['rigidbody']['destroyBod'+'y'](this['body']),this['body']=null);}['_getEntity'+'Transform'](_0x363da0){const _0x3a7371=this['component'];if(_0x3a7371){const _0x2d2d31=_0x3a7371['getShapePo'+'sition'](),_0x5ef078=_0x3a7371['getShapeRo'+'tation']();Us['setValue'](_0x2d2d31['x'],_0x2d2d31['y'],_0x2d2d31['z']),zr['setValue'](_0x5ef078['x'],_0x5ef078['y'],_0x5ef078['z'],_0x5ef078['w']);}else{const _0x5092e9=this['entity']['getPositio'+'n'](),_0x5312c7=this['entity']['getRotatio'+'n']();Us['setValue'](_0x5092e9['x'],_0x5092e9['y'],_0x5092e9['z']),zr['setValue'](_0x5312c7['x'],_0x5312c7['y'],_0x5312c7['z'],_0x5312c7['w']);}_0x363da0['setOrigin'](Us),_0x363da0['setRotatio'+'n'](zr);}['updateTran'+'sform'](){this['_getEntity'+'Transform'](Wa);const _0x516974=this['body'];_0x516974['setWorldTr'+'ansform'](Wa),_0x516974['activate']();}['enable'](){const _0x7318f2=this['body'];if(!_0x7318f2)return;const _0x6d74c8=this['app']['systems']['rigidbody'];_0x6d74c8['_triggers']['indexOf'](this)<-0x2093+0xb99+0x14fa&&(_0x6d74c8['addBody'](_0x7318f2,Hg,Mu^Hg),_0x6d74c8['_triggers']['push'](this)),_0x7318f2['forceActiv'+'ationState'](Pu),this['updateTran'+'sform']();}['disable'](){const _0x53235c=this['body'];if(!_0x53235c)return;const _0x4a2192=this['app']['systems']['rigidbody'],_0x4cb57c=_0x4a2192['_triggers']['indexOf'](this);_0x4cb57c>-(0x204a+-0x5ba*0x6+-0x3b*-0x9)&&(_0x4a2192['removeBody'](_0x53235c),_0x4a2192['_triggers']['splice'](_0x4cb57c,-0x12a7+-0xb54*0x1+0x1dfc)),_0x53235c['forceActiv'+'ationState'](Yv);}}const wc=new te(),KL=new D(),ZL=new D(),Vr=new le(),$g=new Ie(),QL=['enabled','type','halfExtent'+'s','linearOffs'+'et','angularOff'+'set','radius','axis','height','convexHull','asset','renderAsse'+'t','shape','model','render','checkVerte'+'xDuplicate'+'s'];class Ca{constructor(_0x5ecd02){this['system']=_0x5ecd02;}['beforeInit'+'ialize'](_0x38c746,_0x4b0060){_0x4b0060['shape']=null,_0x4b0060['model']=new sr(),_0x4b0060['model']['graph']=new Ie();}['afterIniti'+'alize'](_0x1ca825,_0x38ae8e){this['recreatePh'+'ysicalShap'+'es'](_0x1ca825),_0x1ca825['data']['initialize'+'d']=!(0xeef+-0x8e9+-0x606);}['reset'](_0x21781f,_0xcfafdd){this['beforeInit'+'ialize'](_0x21781f,_0xcfafdd),this['afterIniti'+'alize'](_0x21781f,_0xcfafdd);}['recreatePh'+'ysicalShap'+'es'](_0x3083c5){const _0x2ae093=_0x3083c5['entity'],_0x3b6952=_0x3083c5['data'];if(typeof Ammo<'u'){_0x2ae093['trigger']&&(_0x2ae093['trigger']['destroy'](),delete _0x2ae093['trigger']),_0x3b6952['shape']&&(_0x3083c5['_compoundP'+'arent']&&(_0x3083c5!==_0x3083c5['_compoundP'+'arent']&&this['system']['_removeCom'+'poundChild'](_0x3083c5['_compoundP'+'arent'],_0x3b6952['shape']),_0x3083c5['_compoundP'+'arent']['entity']['rigidbody']&&_0x3083c5['_compoundP'+'arent']['entity']['rigidbody']['activate']()),this['destroySha'+'pe'](_0x3b6952)),_0x3b6952['shape']=this['createPhys'+'icalShape'](_0x3083c5['entity'],_0x3b6952);const _0xe44f39=!_0x3083c5['_compoundP'+'arent'];if(_0x3b6952['type']==='compound'&&(!_0x3083c5['_compoundP'+'arent']||_0x3083c5===_0x3083c5['_compoundP'+'arent']))_0x3083c5['_compoundP'+'arent']=_0x3083c5,_0x2ae093['forEach'](this['_addEachDe'+'scendant'],_0x3083c5);else{if(_0x3b6952['type']!=='compound'&&!_0x3083c5['rigidbody']){_0x3083c5['_compoundP'+'arent']=null;let _0x3a137f=_0x2ae093['parent'];for(;_0x3a137f;){if(_0x3a137f['collision']&&_0x3a137f['collision']['type']==='compound'){_0x3083c5['_compoundP'+'arent']=_0x3a137f['collision'];break;}_0x3a137f=_0x3a137f['parent'];}}}_0x3083c5['_compoundP'+'arent']&&_0x3083c5!==_0x3083c5['_compoundP'+'arent']&&(_0xe44f39&&_0x3083c5['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===0xf7*-0x1+-0xe64+0xf5b*0x1?this['system']['recreatePh'+'ysicalShap'+'es'](_0x3083c5['_compoundP'+'arent']):(this['system']['updateComp'+'oundChildT'+'ransform'](_0x2ae093,!(-0x2*0x10e5+-0xec1+-0x11*-0x2db)),_0x3083c5['_compoundP'+'arent']['entity']['rigidbody']&&_0x3083c5['_compoundP'+'arent']['entity']['rigidbody']['activate']())),_0x2ae093['rigidbody']?(_0x2ae093['rigidbody']['disableSim'+'ulation'](),_0x2ae093['rigidbody']['createBody'](),_0x2ae093['enabled']&&_0x2ae093['rigidbody']['enabled']&&_0x2ae093['rigidbody']['enableSimu'+'lation']()):_0x3083c5['_compoundP'+'arent']||(_0x2ae093['trigger']?_0x2ae093['trigger']['initialize'](_0x3b6952):_0x2ae093['trigger']=new Kv(this['system']['app'],_0x3083c5,_0x3b6952));}}['createPhys'+'icalShape'](_0xff79ae,_0x24984f){}['updateTran'+'sform'](_0x5dbb65,_0x6eab70,_0x565d2b,_0x1c6b40){_0x5dbb65['entity']['trigger']&&_0x5dbb65['entity']['trigger']['updateTran'+'sform']();}['destroySha'+'pe'](_0x5e458e){_0x5e458e['shape']&&(Ammo['destroy'](_0x5e458e['shape']),_0x5e458e['shape']=null);}['beforeRemo'+'ve'](_0x56a540,_0x3f7c7b){_0x3f7c7b['data']['shape']&&(_0x3f7c7b['_compoundP'+'arent']&&!_0x3f7c7b['_compoundP'+'arent']['entity']['_destroyin'+'g']&&(this['system']['_removeCom'+'poundChild'](_0x3f7c7b['_compoundP'+'arent'],_0x3f7c7b['data']['shape']),_0x3f7c7b['_compoundP'+'arent']['entity']['rigidbody']&&_0x3f7c7b['_compoundP'+'arent']['entity']['rigidbody']['activate']()),_0x3f7c7b['_compoundP'+'arent']=null,this['destroySha'+'pe'](_0x3f7c7b['data']));}['remove'](_0x5f4123,_0xe9af32){_0x5f4123['rigidbody']&&_0x5f4123['rigidbody']['body']&&_0x5f4123['rigidbody']['disableSim'+'ulation'](),_0x5f4123['trigger']&&(_0x5f4123['trigger']['destroy'](),delete _0x5f4123['trigger']);}['clone'](_0x22b5f0,_0x35b084){const _0x6686cf=this['system']['store'][_0x22b5f0['getGuid']()],_0x51bc1f={'enabled':_0x6686cf['data']['enabled'],'type':_0x6686cf['data']['type'],'halfExtents':[_0x6686cf['data']['halfExtent'+'s']['x'],_0x6686cf['data']['halfExtent'+'s']['y'],_0x6686cf['data']['halfExtent'+'s']['z']],'linearOffset':[_0x6686cf['data']['linearOffs'+'et']['x'],_0x6686cf['data']['linearOffs'+'et']['y'],_0x6686cf['data']['linearOffs'+'et']['z']],'angularOffset':[_0x6686cf['data']['angularOff'+'set']['x'],_0x6686cf['data']['angularOff'+'set']['y'],_0x6686cf['data']['angularOff'+'set']['z'],_0x6686cf['data']['angularOff'+'set']['w']],'radius':_0x6686cf['data']['radius'],'axis':_0x6686cf['data']['axis'],'height':_0x6686cf['data']['height'],'convexHull':_0x6686cf['data']['convexHull'],'asset':_0x6686cf['data']['asset'],'renderAsset':_0x6686cf['data']['renderAsse'+'t'],'model':_0x6686cf['data']['model'],'render':_0x6686cf['data']['render'],'checkVertexDuplicates':_0x6686cf['data']['checkVerte'+'xDuplicate'+'s']};return this['system']['addCompone'+'nt'](_0x35b084,_0x51bc1f);}}class JL extends Ca{['createPhys'+'icalShape'](_0x4133ff,_0x166344){if(typeof Ammo<'u'){const _0x13e526=_0x166344['halfExtent'+'s'],_0x1318bd=new Ammo['btVector3'](_0x13e526?_0x13e526['x']:-0x1*0x575+0x1b05+-0x228*0xa+0.5,_0x13e526?_0x13e526['y']:0x2*-0xee2+0x155c+0x868+0.5,_0x13e526?_0x13e526['z']:0x1*0x1fe3+-0x1320+-0xcc3+0.5),_0x44652e=new Ammo['btBoxShape'](_0x1318bd);return Ammo['destroy'](_0x1318bd),_0x44652e;}}}class eR extends Ca{['createPhys'+'icalShape'](_0x30c25b,_0x3ce883){if(typeof Ammo<'u')return new Ammo['btSphereSh'+'ape'](_0x3ce883['radius']);}}class tR extends Ca{['createPhys'+'icalShape'](_0x272942,_0x322afd){const _0x30fb7c=_0x322afd['axis']??-0x17a+0x1509+-0x138e,_0x573842=_0x322afd['radius']??0x1aa4+0x178f+-0x3233+0.5,_0x22a38e=Math['max']((_0x322afd['height']??0x4*-0x755+0xd9d+0xfb9)-(-0x1*-0x92b+-0x4a7+-0x482)*_0x573842,-0x137*-0x7+0x1*0x1fc5+-0x2846);let _0x32b08d=null;if(typeof Ammo<'u')switch(_0x30fb7c){case-0x26d5*0x1+-0x27*-0xf1+0x21e:_0x32b08d=new Ammo['btCapsuleS'+'hapeX'](_0x573842,_0x22a38e);break;case 0x1499+-0xe4d+-0x219*0x3:_0x32b08d=new Ammo['btCapsuleS'+'hape'](_0x573842,_0x22a38e);break;case-0x1a88*-0x1+0x1e62+-0xe3a*0x4:_0x32b08d=new Ammo['btCapsuleS'+'hapeZ'](_0x573842,_0x22a38e);break;}return _0x32b08d;}}class sR extends Ca{['createPhys'+'icalShape'](_0x4996ba,_0x531af){const _0x45390b=_0x531af['axis']??-0x2636+-0x8e*-0x41+0x229,_0x20ec33=_0x531af['radius']??0x599+-0x6f2+0x1*0x159+0.5,_0x5c4ed6=_0x531af['height']??-0x1bd8+-0xb5c*-0x1+0x107d;let _0x56908c=null,_0x18bb0f=null;if(typeof Ammo<'u')switch(_0x45390b){case-0x356*-0x6+0x1051+0x1*-0x2455:_0x56908c=new Ammo['btVector3'](_0x5c4ed6*(0x23eb+-0x7e5+0x1a6*-0x11+0.5),_0x20ec33,_0x20ec33),_0x18bb0f=new Ammo['btCylinder'+'ShapeX'](_0x56908c);break;case-0xc0a+-0x6*-0x132+-0x2b*-0x1d:_0x56908c=new Ammo['btVector3'](_0x20ec33,_0x5c4ed6*(-0x1*-0x1d86+0x1e14+-0x3b9a+0.5),_0x20ec33),_0x18bb0f=new Ammo['btCylinder'+'Shape'](_0x56908c);break;case 0x120e+-0x152e+0x322:_0x56908c=new Ammo['btVector3'](_0x20ec33,_0x20ec33,_0x5c4ed6*(0x2e7*-0x4+-0x1003+0x1b9f+0.5)),_0x18bb0f=new Ammo['btCylinder'+'ShapeZ'](_0x56908c);break;}return _0x56908c&&Ammo['destroy'](_0x56908c),_0x18bb0f;}}class iR extends Ca{['createPhys'+'icalShape'](_0xb5000f,_0x2e3aeb){const _0x8ae416=_0x2e3aeb['axis']??-0x10a3+-0x1d58+-0xf54*-0x3,_0x1dc6ac=_0x2e3aeb['radius']??-0x2*-0x255+-0x1654+0x85*0x22+0.5,_0x2fe0e6=_0x2e3aeb['height']??0xcdd*-0x3+-0x3bf+0x2a57;let _0x3b9c13=null;if(typeof Ammo<'u')switch(_0x8ae416){case 0x1151+0x17e9+0x2*-0x149d:_0x3b9c13=new Ammo['btConeShap'+'eX'](_0x1dc6ac,_0x2fe0e6);break;case 0x233*0x2+0x629+0x2*-0x547:_0x3b9c13=new Ammo['btConeShap'+'e'](_0x1dc6ac,_0x2fe0e6);break;case-0x1b76+0x11b0+-0x2*-0x4e4:_0x3b9c13=new Ammo['btConeShap'+'eZ'](_0x1dc6ac,_0x2fe0e6);break;}return _0x3b9c13;}}class rR extends Ca{['beforeInit'+'ialize'](_0x407f72,_0x485f1a){}['createAmmo'+'Hull'](_0x1bd83a,_0x49aef2,_0xaf8419,_0x104052){const _0x105c9c=new Ammo['btConvexHu'+'llShape'](),_0x19707f=new Ammo['btVector3'](),_0xfd0c9d=[];_0x1bd83a['getPositio'+'ns'](_0xfd0c9d);for(let _0x3c2fdc=0x17ab*0x1+0xf99+0x2*-0x13a2;_0x3c2fdc<_0xfd0c9d['length'];_0x3c2fdc+=-0x5*-0x265+-0x10b*0x1+-0x22f*0x5)_0x19707f['setValue'](_0xfd0c9d[_0x3c2fdc]*_0x104052['x'],_0xfd0c9d[_0x3c2fdc+(0x1*-0x43+-0xb88+0xbcc)]*_0x104052['y'],_0xfd0c9d[_0x3c2fdc+(-0x1547+0x108e+0x4bb)]*_0x104052['z']),_0x105c9c['addPoint'](_0x19707f,!(0x1410+-0x2*0x10a2+-0x3*-0x467));Ammo['destroy'](_0x19707f),_0x105c9c['recalcLoca'+'lAabb'](),_0x105c9c['setMargin'](-0x2*-0xd73+-0x1*0x1c91+0x3d*0x7+0.01);const _0x47379c=this['system']['_getNodeTr'+'ansform'](_0x49aef2);_0xaf8419['addChildSh'+'ape'](_0x47379c,_0x105c9c),Ammo['destroy'](_0x47379c);}['createAmmo'+'Mesh'](_0xb598d7,_0x39f670,_0x27602d,_0x4929a6,_0x5dfa5f=!(-0x1187+-0x54d+-0x79c*-0x3)){const _0x3dde0d=this['system'];let _0x216941;if(_0x3dde0d['_triMeshCa'+'che'][_0xb598d7['id']])_0x216941=_0x3dde0d['_triMeshCa'+'che'][_0xb598d7['id']];else{const _0x446a4a=_0xb598d7['vertexBuff'+'er'],_0x57750a=_0x446a4a['getFormat']();let _0x5caaf8,_0x3849be;for(let _0x49b244=-0x1*-0x1b47+0x2087+0x2*-0x1de7;_0x49b244<_0x57750a['elements']['length'];_0x49b244++){const _0x2ab4d6=_0x57750a['elements'][_0x49b244];if(_0x2ab4d6['name']===Me){_0x3849be=new Float32Array(_0x446a4a['lock'](),_0x2ab4d6['offset']),_0x5caaf8=_0x2ab4d6['stride']/(0x18c9+0x1cc3*-0x1+0x3fe);break;}}const _0x39bf54=[];_0xb598d7['getIndices'](_0x39bf54);const _0x2d39c8=_0xb598d7['primitive'][0x16*0x107+-0x759+-0xf41]['count']/(0x982*-0x4+0x2229+0x8e*0x7),_0x476931=new Ammo['btVector3']();let _0xf00e42,_0x114d9b,_0x211455;const _0x491cdc=_0xb598d7['primitive'][-0x21f3+0x1f82+-0x7d*-0x5]['base'];_0x216941=new Ammo['btTriangle'+'Mesh'](),_0x3dde0d['_triMeshCa'+'che'][_0xb598d7['id']]=_0x216941;const _0x5d1476=new Map();w['assert'](typeof _0x216941['getIndexed'+'MeshArray']=='function','Ammo.js\x20ve'+'rsion\x20is\x20t'+'oo\x20old,\x20pl'+'ease\x20updat'+'e\x20to\x20a\x20new'+'er\x20Ammo.');const _0x39a59f=_0x216941['getIndexed'+'MeshArray']();_0x39a59f['at'](0x1012+-0x1*0x8ee+0x4*-0x1c9)['m_numTrian'+'gles']=_0x2d39c8;const _0x25e72=_0x4929a6?_0x4929a6['x']:-0x1a33+0x1*-0x213+0x1c47,_0x430dd8=_0x4929a6?_0x4929a6['y']:0x10fc+-0x1c82*0x1+0x1*0xb87,_0x2e8873=_0x4929a6?_0x4929a6['z']:0xb*0xba+0x1e4d+-0x264a,_0x13a834=_0x2fcea3=>{const _0x434ae3=_0x3849be[_0x2fcea3*_0x5caaf8]*_0x25e72,_0x1fa076=_0x3849be[_0x2fcea3*_0x5caaf8+(-0xf62*0x1+0x2426+-0x1*0x14c3)]*_0x430dd8,_0x1b49d5=_0x3849be[_0x2fcea3*_0x5caaf8+(-0xd34+0x5a8*0x3+-0x3c2)]*_0x2e8873;let _0x279005;if(_0x5dfa5f){const _0x4ed9db=_0x434ae3+':'+_0x1fa076+':'+_0x1b49d5;if(_0x279005=_0x5d1476['get'](_0x4ed9db),_0x279005!==void(0x1ce0+0x91e+0x6*-0x655))return _0x279005;_0x476931['setValue'](_0x434ae3,_0x1fa076,_0x1b49d5),_0x279005=_0x216941['findOrAddV'+'ertex'](_0x476931,!(-0x14ef+-0xedf*-0x1+0x611)),_0x5d1476['set'](_0x4ed9db,_0x279005);}else _0x476931['setValue'](_0x434ae3,_0x1fa076,_0x1b49d5),_0x279005=_0x216941['findOrAddV'+'ertex'](_0x476931,!(0x108a*-0x2+-0x634*-0x1+0x1ae1));return _0x279005;};for(let _0x1b6e35=-0x23d*0xb+0xd5d+0x2*0x5a1;_0x1b6e35<_0x2d39c8;_0x1b6e35++)_0xf00e42=_0x13a834(_0x39bf54[_0x491cdc+_0x1b6e35*(0x1d*0x104+-0x1*-0x26a6+-0x4417)]),_0x114d9b=_0x13a834(_0x39bf54[_0x491cdc+_0x1b6e35*(-0x5a3+-0x2612+0x2bb8)+(-0x1c*-0xd+-0x8ad*-0x1+-0xa18)]),_0x211455=_0x13a834(_0x39bf54[_0x491cdc+_0x1b6e35*(0x19d*0x6+0x1797+-0x2142)+(0x1*-0x9e2+0x4*0x7df+-0x1598)]),_0x216941['addIndex'](_0xf00e42),_0x216941['addIndex'](_0x114d9b),_0x216941['addIndex'](_0x211455);Ammo['destroy'](_0x476931);}const _0x128694=new Ammo['btBvhTrian'+'gleMeshSha'+'pe'](_0x216941,!(0x85d*0x1+-0x1*-0x229d+-0x2afa));if(!_0x4929a6){const _0x21ccb0=_0x3dde0d['_getNodeSc'+'aling'](_0x39f670);_0x128694['setLocalSc'+'aling'](_0x21ccb0),Ammo['destroy'](_0x21ccb0);}const _0x19d1b0=_0x3dde0d['_getNodeTr'+'ansform'](_0x39f670);_0x27602d['addChildSh'+'ape'](_0x19d1b0,_0x128694),Ammo['destroy'](_0x19d1b0);}['createPhys'+'icalShape'](_0x464b3d,_0x3b0848){if(!(typeof Ammo>'u')&&(_0x3b0848['model']||_0x3b0848['render'])){const _0x245d00=new Ammo['btCompound'+'Shape'](),_0xdba02a=_0x464b3d['getWorldTr'+'ansform']()['getScale']();if(_0x3b0848['render']){const _0x1448ba=_0x3b0848['render']['meshes'];for(let _0x3f40da=-0x3df*0x1+0x3*-0x6a7+0x17d4;_0x3f40da<_0x1448ba['length'];_0x3f40da++)_0x3b0848['convexHull']?this['createAmmo'+'Hull'](_0x1448ba[_0x3f40da],$g,_0x245d00,_0xdba02a):this['createAmmo'+'Mesh'](_0x1448ba[_0x3f40da],$g,_0x245d00,_0xdba02a,_0x3b0848['checkVerte'+'xDuplicate'+'s']);}else{if(_0x3b0848['model']){const _0x330c4d=_0x3b0848['model']['meshInstan'+'ces'];for(let _0x3192b9=-0x28*0xcc+0x2707*-0x1+-0x46e7*-0x1;_0x3192b9<_0x330c4d['length'];_0x3192b9++)this['createAmmo'+'Mesh'](_0x330c4d[_0x3192b9]['mesh'],_0x330c4d[_0x3192b9]['node'],_0x245d00,null,_0x3b0848['checkVerte'+'xDuplicate'+'s']);const _0x3a9f3e=new Ammo['btVector3'](_0xdba02a['x'],_0xdba02a['y'],_0xdba02a['z']);_0x245d00['setLocalSc'+'aling'](_0x3a9f3e),Ammo['destroy'](_0x3a9f3e);}}return _0x245d00;}}['recreatePh'+'ysicalShap'+'es'](_0x11daa8){const _0x3badd2=_0x11daa8['data'];if((_0x3badd2['renderAsse'+'t']||_0x3badd2['asset'])&&_0x11daa8['enabled']&&_0x11daa8['entity']['enabled']){this['loadAsset'](_0x11daa8,_0x3badd2['renderAsse'+'t']||_0x3badd2['asset'],_0x3badd2['renderAsse'+'t']?'render':'model');return;}this['doRecreate'+'PhysicalSh'+'ape'](_0x11daa8);}['loadAsset'](_0x2f8930,_0x49c636,_0x15ad51){const _0x2ac12d=_0x2f8930['data'],_0x5e3e83=this['system']['app']['assets'],_0x30445b=_0x2ac12d[_0x15ad51],_0x126ab0=_0x2ac490=>{_0x2ac12d[_0x15ad51]===_0x30445b&&(_0x2ac12d[_0x15ad51]=_0x2ac490['resource'],this['doRecreate'+'PhysicalSh'+'ape'](_0x2f8930));},_0x594f72=_0x4a1fbc=>{_0x4a1fbc['ready'](_0x4d269d=>{if(_0x4d269d['data']['containerA'+'sset']){const _0x5cbf15=_0x5e3e83['get'](_0x4d269d['data']['containerA'+'sset']);_0x5cbf15['loaded']?_0x126ab0(_0x4d269d):(_0x5cbf15['ready'](()=>{_0x126ab0(_0x4d269d);}),_0x5e3e83['load'](_0x5cbf15));}else _0x126ab0(_0x4d269d);}),_0x5e3e83['load'](_0x4a1fbc);},_0x534472=_0x5e3e83['get'](_0x49c636);_0x534472?_0x594f72(_0x534472):_0x5e3e83['once']('add:'+_0x49c636,_0x594f72);}['doRecreate'+'PhysicalSh'+'ape'](_0x4c5b07){const _0x35833c=_0x4c5b07['entity'],_0x57d532=_0x4c5b07['data'];_0x57d532['model']||_0x57d532['render']?(this['destroySha'+'pe'](_0x57d532),_0x57d532['shape']=this['createPhys'+'icalShape'](_0x35833c,_0x57d532),_0x35833c['rigidbody']?(_0x35833c['rigidbody']['disableSim'+'ulation'](),_0x35833c['rigidbody']['createBody'](),_0x35833c['enabled']&&_0x35833c['rigidbody']['enabled']&&_0x35833c['rigidbody']['enableSimu'+'lation']()):_0x35833c['trigger']?_0x35833c['trigger']['initialize'](_0x57d532):_0x35833c['trigger']=new Kv(this['system']['app'],_0x4c5b07,_0x57d532)):(this['beforeRemo'+'ve'](_0x35833c,_0x4c5b07),this['remove'](_0x35833c,_0x57d532));}['updateTran'+'sform'](_0x4cb53f,_0x3d5070,_0x2774e3,_0x40fae4){if(_0x4cb53f['shape']){const _0x43ebea=_0x4cb53f['entity']['getWorldTr'+'ansform']()['getScale'](),_0x3f2448=_0x4cb53f['shape']['getLocalSc'+'aling']();(_0x43ebea['x']!==_0x3f2448['x']()||_0x43ebea['y']!==_0x3f2448['y']()||_0x43ebea['z']!==_0x3f2448['z']())&&this['doRecreate'+'PhysicalSh'+'ape'](_0x4cb53f);}super['updateTran'+'sform'](_0x4cb53f,_0x3d5070,_0x2774e3,_0x40fae4);}['destroySha'+'pe'](_0x2549c7){if(!_0x2549c7['shape'])return;const _0x13eabd=_0x2549c7['shape']['getNumChil'+'dShapes']();for(let _0xf29a2a=0x260d+0x7b*0x1d+-0x33fc;_0xf29a2a<_0x13eabd;_0xf29a2a++){const _0x4603cb=_0x2549c7['shape']['getChildSh'+'ape'](_0xf29a2a);Ammo['destroy'](_0x4603cb);}Ammo['destroy'](_0x2549c7['shape']),_0x2549c7['shape']=null;}}class aR extends Ca{['createPhys'+'icalShape'](_0x101961,_0x4758d0){if(typeof Ammo<'u')return new Ammo['btCompound'+'Shape']();}['_addEachDe'+'scendant'](_0x4f9f94){!_0x4f9f94['collision']||_0x4f9f94['rigidbody']||(_0x4f9f94['collision']['_compoundP'+'arent']=this,_0x4f9f94!==this['entity']&&_0x4f9f94['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x4f9f94['collision']));}['_updateEac'+'hDescendan'+'t'](_0x556409){_0x556409['collision']&&_0x556409['collision']['_compoundP'+'arent']===this&&(_0x556409['collision']['_compoundP'+'arent']=null,_0x556409!==this['entity']&&!_0x556409['rigidbody']&&_0x556409['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x556409['collision']));}['_updateEac'+'hDescendan'+'tTransform'](_0x38108a){!_0x38108a['collision']||_0x38108a['collision']['_compoundP'+'arent']!==this['collision']['_compoundP'+'arent']||this['collision']['system']['updateComp'+'oundChildT'+'ransform'](_0x38108a,!(0x33*0x43+0x91f+-0x1b*0xd5));}}class nR extends ct{constructor(_0x3ffb39){super(_0x3ffb39),this['id']='collision',this['ComponentT'+'ype']=rn,this['DataType']=XL,this['schema']=QL,this['implementa'+'tions']={},this['_triMeshCa'+'che']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['on']('remove',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x2ae78f,_0x136204,_0x34eb64){_0x34eb64=['type','halfExtent'+'s','radius','axis','height','convexHull','shape','model','asset','render','renderAsse'+'t','enabled','linearOffs'+'et','angularOff'+'set','checkVerte'+'xDuplicate'+'s'];const _0x32e0f3={};for(let _0x11ab57=0x66f+0xa50+-0x10bf,_0x2ae89c=_0x34eb64['length'];_0x11ab57<_0x2ae89c;_0x11ab57++){const _0x207650=_0x34eb64[_0x11ab57];_0x32e0f3[_0x207650]=_0x136204[_0x207650];}let _0x46e156;if(_0x136204['hasOwnProp'+'erty']('asset')?(_0x46e156=_0x34eb64['indexOf']('model'),_0x46e156!==-(0x44e*-0x3+0x1e1*0x1+0xb0a)&&_0x34eb64['splice'](_0x46e156,0x1*-0x41d+0x1dec+-0x19ce),_0x46e156=_0x34eb64['indexOf']('render'),_0x46e156!==-(0x39+-0x219f+0x2167)&&_0x34eb64['splice'](_0x46e156,0x1c2*-0xf+-0x187c+0x32db)):_0x136204['hasOwnProp'+'erty']('model')&&(_0x46e156=_0x34eb64['indexOf']('asset'),_0x46e156!==-(0x2*0x7f9+0x1*0xd56+0x5db*-0x5)&&_0x34eb64['splice'](_0x46e156,0x11*-0xc3+-0x214f+0x2e43)),_0x32e0f3['type']||(_0x32e0f3['type']=_0x2ae78f['data']['type']),_0x2ae78f['data']['type']=_0x32e0f3['type'],Array['isArray'](_0x32e0f3['halfExtent'+'s'])&&(_0x32e0f3['halfExtent'+'s']=new D(_0x32e0f3['halfExtent'+'s'])),Array['isArray'](_0x32e0f3['linearOffs'+'et'])&&(_0x32e0f3['linearOffs'+'et']=new D(_0x32e0f3['linearOffs'+'et'])),Array['isArray'](_0x32e0f3['angularOff'+'set'])){const _0x16e327=_0x32e0f3['angularOff'+'set'];_0x16e327['length']===0x24a*0x6+0x9f5*0x2+-0x21a3?_0x32e0f3['angularOff'+'set']=new le()['setFromEul'+'erAngles'](_0x16e327[-0x2*0x9f1+0x21f3+-0xe11*0x1],_0x16e327[0x7*-0x583+0x4d5*-0x3+0x3515*0x1],_0x16e327[-0x63d+0x1*0xb01+-0x4c2]):_0x32e0f3['angularOff'+'set']=new le(_0x32e0f3['angularOff'+'set']);}const _0x5a06d7=this['_createImp'+'lementatio'+'n'](_0x32e0f3['type']);_0x5a06d7['beforeInit'+'ialize'](_0x2ae78f,_0x32e0f3),super['initialize'+'ComponentD'+'ata'](_0x2ae78f,_0x32e0f3,_0x34eb64),_0x5a06d7['afterIniti'+'alize'](_0x2ae78f,_0x32e0f3);}['_createImp'+'lementatio'+'n'](_0x37d902){if(this['implementa'+'tions'][_0x37d902]===void(-0xe*0x263+-0x1511+-0x1*-0x367b)){let _0x3297ea;switch(_0x37d902){case'box':_0x3297ea=new JL(this);break;case'sphere':_0x3297ea=new eR(this);break;case'capsule':_0x3297ea=new tR(this);break;case'cylinder':_0x3297ea=new sR(this);break;case'cone':_0x3297ea=new iR(this);break;case'mesh':_0x3297ea=new rR(this);break;case'compound':_0x3297ea=new aR(this);break;default:w['error']('_createImp'+'lementatio'+'n:\x20Invalid'+'\x20collision'+'\x20system\x20ty'+'pe:\x20'+_0x37d902);}this['implementa'+'tions'][_0x37d902]=_0x3297ea;}return this['implementa'+'tions'][_0x37d902];}['_getImplem'+'entation'](_0x153128){return this['implementa'+'tions'][_0x153128['collision']['data']['type']];}['cloneCompo'+'nent'](_0x2f75a2,_0x1b63fa){return this['_getImplem'+'entation'](_0x2f75a2)['clone'](_0x2f75a2,_0x1b63fa);}['onBeforeRe'+'move'](_0x265f9e,_0x4cafbc){this['implementa'+'tions'][_0x4cafbc['data']['type']]['beforeRemo'+'ve'](_0x265f9e,_0x4cafbc),_0x4cafbc['onBeforeRe'+'move']();}['onRemove'](_0x2e1dba,_0x1b1687){this['implementa'+'tions'][_0x1b1687['type']]['remove'](_0x2e1dba,_0x1b1687);}['updateComp'+'oundChildT'+'ransform'](_0x281639,_0x158686){const _0x5bb397=_0x281639['collision']['_compoundP'+'arent'];if(_0x5bb397!==_0x281639['collision']&&_0x281639['enabled']&&_0x281639['collision']['enabled']&&(_0x281639['_dirtyLoca'+'l']||_0x158686)){const _0x9511ed=this['_getNodeTr'+'ansform'](_0x281639,_0x5bb397['entity']),_0x347305=_0x5bb397['getCompoun'+'dChildShap'+'eIndex'](_0x281639['collision']['shape']);_0x347305===null?_0x5bb397['shape']['addChildSh'+'ape'](_0x9511ed,_0x281639['collision']['data']['shape']):_0x5bb397['shape']['updateChil'+'dTransform'](_0x347305,_0x9511ed,!(0x2a5*-0x9+0x1f33+-0x766)),Ammo['destroy'](_0x9511ed);}}['_removeCom'+'poundChild'](_0x599efe,_0x24828b){if(_0x599efe['shape']['getNumChil'+'dShapes']()!==-0x174f+0x6*-0x173+0x2001){if(_0x599efe['shape']['removeChil'+'dShape'])_0x599efe['shape']['removeChil'+'dShape'](_0x24828b);else{const _0x2e51c9=_0x599efe['getCompoun'+'dChildShap'+'eIndex'](_0x24828b);_0x2e51c9!==null&&_0x599efe['shape']['removeChil'+'dShapeByIn'+'dex'](_0x2e51c9);}}}['onTransfor'+'mChanged'](_0x2b2d1d,_0x3811b9,_0x6f9af5,_0x4e1731){this['implementa'+'tions'][_0x2b2d1d['data']['type']]['updateTran'+'sform'](_0x2b2d1d,_0x3811b9,_0x6f9af5,_0x4e1731);}['changeType'](_0x9350e1,_0x1c1b5f,_0x1518bc){this['implementa'+'tions'][_0x1c1b5f]['beforeRemo'+'ve'](_0x9350e1['entity'],_0x9350e1),this['implementa'+'tions'][_0x1c1b5f]['remove'](_0x9350e1['entity'],_0x9350e1['data']),this['_createImp'+'lementatio'+'n'](_0x1518bc)['reset'](_0x9350e1,_0x9350e1['data']);}['recreatePh'+'ysicalShap'+'es'](_0x451bc2){this['implementa'+'tions'][_0x451bc2['data']['type']]['recreatePh'+'ysicalShap'+'es'](_0x451bc2);}['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x531b23,_0x34888e){if(_0x531b23===_0x34888e){const _0x511023=_0x531b23['getWorldTr'+'ansform']()['getScale']();wc['setScale'](_0x511023['x'],_0x511023['y'],_0x511023['z']);}else this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x531b23['parent'],_0x34888e),wc['mul'](_0x531b23['getLocalTr'+'ansform']());}['_getNodeSc'+'aling'](_0x51e2f8){const _0x54a723=_0x51e2f8['getWorldTr'+'ansform']()['getScale']();return new Ammo['btVector3'](_0x54a723['x'],_0x54a723['y'],_0x54a723['z']);}['_getNodeTr'+'ansform'](_0x53819f,_0x48d0d6){let _0x18c76a,_0x542cfe;_0x48d0d6?(this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x53819f,_0x48d0d6),_0x18c76a=KL,_0x542cfe=Vr,wc['getTransla'+'tion'](_0x18c76a),_0x542cfe['setFromMat'+'4'](wc)):(_0x18c76a=_0x53819f['getPositio'+'n'](),_0x542cfe=_0x53819f['getRotatio'+'n']());const _0x21e79d=new Ammo['btQuaterni'+'on'](),_0x4b65da=new Ammo['btTransfor'+'m']();_0x4b65da['setIdentit'+'y']();const _0x19a612=_0x4b65da['getOrigin'](),_0xbcd033=_0x53819f['collision'];if(_0xbcd033&&_0xbcd033['_hasOffset']){const _0x329c35=_0xbcd033['data']['linearOffs'+'et'],_0x25fd0b=_0xbcd033['data']['angularOff'+'set'],_0x20b6bc=ZL;Vr['copy'](_0x542cfe)['transformV'+'ector'](_0x329c35,_0x20b6bc),_0x20b6bc['add'](_0x18c76a),Vr['copy'](_0x542cfe)['mul'](_0x25fd0b),_0x19a612['setValue'](_0x20b6bc['x'],_0x20b6bc['y'],_0x20b6bc['z']),_0x21e79d['setValue'](Vr['x'],Vr['y'],Vr['z'],Vr['w']);}else _0x19a612['setValue'](_0x18c76a['x'],_0x18c76a['y'],_0x18c76a['z']),_0x21e79d['setValue'](_0x542cfe['x'],_0x542cfe['y'],_0x542cfe['z'],_0x542cfe['w']);return _0x4b65da['setRotatio'+'n'](_0x21e79d),Ammo['destroy'](_0x21e79d),_0x4b65da;}['destroy'](){for(const _0x352158 in this['_triMeshCa'+'che'])Ammo['destroy'](this['_triMeshCa'+'che'][_0x352158]);this['_triMeshCa'+'che']=null,super['destroy']();}}const Ec=new ie(),oR=new Kt();class lR{constructor(_0x5ca78d,_0x289904,_0x19b832){this['_entity']=_0x5ca78d,this['_element']=_0x5ca78d['element'],this['model']=new sr(),this['node']=new Ie(),this['model']['graph']=this['node'],this['mesh']=_0x289904,this['meshInstan'+'ce']=new He(this['mesh'],_0x19b832,this['node']),this['meshInstan'+'ce']['name']='ImageEleme'+'nt:\x20'+_0x5ca78d['name'],this['meshInstan'+'ce']['castShadow']=!(-0x1e71+-0x1e2b+0x3c9d*0x1),this['meshInstan'+'ce']['receiveSha'+'dow']=!(0x256+-0x2*-0x89d+-0x138f),this['_meshDirty']=!(-0x1*-0x1a2a+0x1aac+-0x34d5),this['model']['meshInstan'+'ces']['push'](this['meshInstan'+'ce']),this['_entity']['addChild'](this['model']['graph']),this['model']['_entity']=this['_entity'],this['unmaskMesh'+'Instance']=null;}['destroy'](){var _0x1c68cb,_0xe28371;this['setMateria'+'l'](null),this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),this['model']['destroy'](),this['model']=null,this['node']=null,this['mesh']=null,(_0x1c68cb=this['meshInstan'+'ce'])==null||_0x1c68cb['destroy'](),this['meshInstan'+'ce']=null,(_0xe28371=this['unmaskMesh'+'Instance'])==null||_0xe28371['destroy'](),this['unmaskMesh'+'Instance']=null,this['_entity']=null,this['_element']=null;}['setMesh'](_0x260449){this['meshInstan'+'ce']&&(this['mesh']=_0x260449,this['meshInstan'+'ce']['mesh']=_0x260449,this['meshInstan'+'ce']['visible']=!!_0x260449,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['mesh']=_0x260449),this['forceUpdat'+'eAabb']());}['setMask'](_0x416d04){var _0x47e4fc;if(this['meshInstan'+'ce']){if(this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),_0x416d04){this['unmaskMesh'+'Instance']=new He(this['mesh'],this['meshInstan'+'ce']['material'],this['node']),this['unmaskMesh'+'Instance']['name']='Unmask:\x20'+this['_entity']['name'],this['unmaskMesh'+'Instance']['castShadow']=!(-0xc7*0x16+0x1c12+-0xaf7),this['unmaskMesh'+'Instance']['receiveSha'+'dow']=!(0x1acb*-0x1+-0x1*0xa52+0x251e),this['unmaskMesh'+'Instance']['pick']=!(0xd21*0x2+-0x8b*0x25+-0x62a),this['model']['meshInstan'+'ces']['push'](this['unmaskMesh'+'Instance']);for(const _0x2d00bf in this['meshInstan'+'ce']['parameters'])this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x2d00bf,this['meshInstan'+'ce']['parameters'][_0x2d00bf]['data']);}else{const _0x548bc6=this['model']['meshInstan'+'ces']['indexOf'](this['unmaskMesh'+'Instance']);_0x548bc6>=0x2bd*0x1+-0xa1b+-0x29*-0x2e&&this['model']['meshInstan'+'ces']['splice'](_0x548bc6,-0x716+0x12a*-0x4+-0x1f*-0x61);}this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['addModelTo'+'Layers'](this['model']),_0x416d04||((_0x47e4fc=this['unmaskMesh'+'Instance'])==null||_0x47e4fc['destroy'](),this['unmaskMesh'+'Instance']=null);}}['setMateria'+'l'](_0x1899f9){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x1899f9,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['material']=_0x1899f9));}['setParamet'+'er'](_0x3aa1ab,_0x11b8c8){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['setParamet'+'er'](_0x3aa1ab,_0x11b8c8),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x3aa1ab,_0x11b8c8));}['deletePara'+'meter'](_0x16110e){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['deletePara'+'meter'](_0x16110e),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['deletePara'+'meter'](_0x16110e));}['setUnmaskD'+'rawOrder'](){if(!this['meshInstan'+'ce'])return;const _0x5ceb7a=function(_0x3a0e68){let _0x14fb3c;const _0x3a8a87=_0x3a0e68['children'],_0x38368f=_0x3a8a87['length'];if(_0x38368f){for(let _0x4ce5ec=-0x1597+0x1*0xecb+0x6cc;_0x4ce5ec<_0x38368f;_0x4ce5ec++)_0x3a8a87[_0x4ce5ec]['element']&&(_0x14fb3c=_0x3a8a87[_0x4ce5ec]);if(!_0x14fb3c)return null;const _0x5585ee=_0x5ceb7a(_0x14fb3c);return _0x5585ee||_0x14fb3c;}return null;};if(this['unmaskMesh'+'Instance']){const _0x2d2a88=_0x5ceb7a(this['_entity']);_0x2d2a88&&_0x2d2a88['element']?this['unmaskMesh'+'Instance']['drawOrder']=_0x2d2a88['element']['drawOrder']+_0x2d2a88['element']['getMaskOff'+'set']():this['unmaskMesh'+'Instance']['drawOrder']=this['meshInstan'+'ce']['drawOrder']+this['_element']['getMaskOff'+'set'](),w['trace'](Vs,'setDrawOrd'+'er:\x20',this['unmaskMesh'+'Instance']['name'],this['unmaskMesh'+'Instance']['drawOrder']);}}['setDrawOrd'+'er'](_0x1de2e3){this['meshInstan'+'ce']&&(w['trace'](Vs,'setDrawOrd'+'er:\x20',this['meshInstan'+'ce']['name'],_0x1de2e3),this['meshInstan'+'ce']['drawOrder']=_0x1de2e3);}['setCull'](_0x3b484e){if(!this['meshInstan'+'ce'])return;const _0x292963=this['_element'];let _0x487132=null;_0x3b484e&&_0x292963['_isScreenS'+'pace']()&&(_0x487132=function(_0x4a5d52){return _0x292963['isVisibleF'+'orCamera'](_0x4a5d52);}),this['meshInstan'+'ce']['cull']=_0x3b484e,this['meshInstan'+'ce']['isVisibleF'+'unc']=_0x487132,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['cull']=_0x3b484e,this['unmaskMesh'+'Instance']['isVisibleF'+'unc']=_0x487132);}['setScreenS'+'pace'](_0x40d062){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['screenSpac'+'e']=_0x40d062,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['screenSpac'+'e']=_0x40d062));}['setLayer'](_0x2482da){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['layer']=_0x2482da,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['layer']=_0x2482da));}['forceUpdat'+'eAabb'](_0x4c599c){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_aabbVer']=-(-0x9*0x11b+-0x61*0x3d+0x2111),this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_aabbVer']=-(0xcdc+0x1*-0x22e1+-0xb03*-0x2)));}['setAabbFun'+'c'](_0x2dfb55){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_updateAab'+'bFunc']=_0x2dfb55,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_updateAab'+'bFunc']=_0x2dfb55));}}class cR{constructor(_0xb11994){h(this,'_evtSetMes'+'hes',null),(this['_element']=_0xb11994,this['_entity']=_0xb11994['entity'],this['_system']=_0xb11994['system'],this['_textureAs'+'set']=null,this['_texture']=null,this['_materialA'+'sset']=null,this['_material']=null,this['_spriteAss'+'et']=null,this['_sprite']=null,this['_spriteFra'+'me']=-0x1cec+0x1*0xbf3+0x10f9,this['_pixelsPer'+'Unit']=null,this['_targetAsp'+'ectRatio']=-(-0x5ec*0x3+-0x223*-0x5+0x1*0x716),this['_rect']=new re(-0xc*-0x275+-0x74b+0x12b*-0x13,-0x226e+0x406+0x1e68,-0x1277+-0x1f85+0x31fd,-0x1600+0x12*-0x4a+-0x1b35*-0x1),this['_mask']=!(0x1511+0xcdb*0x2+0x2*-0x1763),this['_maskRef']=-0x235*-0xe+-0x529+0x1*-0x19bd,this['_outerScal'+'e']=new J(),this['_outerScal'+'eUniform']=new Float32Array(0x2d5+0x253b*0x1+0x1*-0x280e),this['_innerOffs'+'et']=new re(),this['_innerOffs'+'etUniform']=new Float32Array(0x1*-0x25f7+-0x1ab3+0x40ae),this['_atlasRect']=new re(),this['_atlasRect'+'Uniform']=new Float32Array(-0xa36*0x3+-0xd0+0x1f76),this['_defaultMe'+'sh']=this['_createMes'+'h'](),this['_renderabl'+'e']=new lR(this['_entity'],this['_defaultMe'+'sh'],this['_material']),this['_color']=new ie(-0x11*-0xb6+0x2f*-0xcd+-0x1*-0x198e,-0x20b*-0xb+-0x213f+0xac7,-0x128*0x4+0x1ca2+-0x1*0x1801,-0x3db+0xa7*-0xc+-0x11*-0xb0),this['_colorUnif'+'orm']=new Float32Array([0x1*-0x5a7+-0x2b*-0x35+-0x33f,0xe3*0x6+0x1*-0x585+-0x1*-0x34,0x15ce*-0x1+0x2436+-0xe67]),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',-0x22bb+0xae3+0x17d9*0x1),this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_onScreenC'+'hange'](this['_element']['screen']),this['_element']['on']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['on']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['on']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this));}['destroy'](){this['textureAss'+'et']=null,this['spriteAsse'+'t']=null,this['materialAs'+'set']=null,this['_renderabl'+'e']['setMesh'](this['_defaultMe'+'sh']),this['_renderabl'+'e']['destroy'](),this['_defaultMe'+'sh']=null,this['_element']['off']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this);}['_onResolut'+'ionChange'](_0x14637d){}['_onParentR'+'esizeOrPiv'+'otChange'](){this['_renderabl'+'e']['mesh']&&this['_updateMes'+'h'](this['_renderabl'+'e']['mesh']);}['_onScreenS'+'paceChange'](_0x8f859e){this['_updateMat'+'erial'](_0x8f859e);}['_onScreenC'+'hange'](_0xd6d9be,_0xf7b50){_0xd6d9be?this['_updateMat'+'erial'](_0xd6d9be['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(0x1c1*0x1+-0x5*0x427+-0x1*-0x1303));}['_onDrawOrd'+'erChange'](_0x21ebcc){this['_renderabl'+'e']['setDrawOrd'+'er'](_0x21ebcc),this['mask']&&this['_element']['screen']&&this['_element']['screen']['screen']['once']('syncdrawor'+'der',function(){this['_renderabl'+'e']['setUnmaskD'+'rawOrder']();},this);}['_hasUserMa'+'terial'](){return!!this['_materialA'+'sset']||!!this['_material']&&this['_system']['defaultIma'+'geMaterial'+'s']['indexOf'](this['_material'])===-(-0x5*0x2e5+-0x1*-0x11d7+-0x35d);}['_use9Slici'+'ng'](){return this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt);}['_updateMat'+'erial'](_0x37f8ec){const _0x2b08db=!!this['_mask'],_0x203297=!!(this['sprite']&&this['sprite']['renderMode']===Pt),_0x734291=!!(this['sprite']&&this['sprite']['renderMode']===Mt);this['_hasUserMa'+'terial']()||(this['_material']=this['_system']['getImageEl'+'ementMater'+'ial'](_0x37f8ec,_0x2b08db,_0x203297,_0x734291)),this['_renderabl'+'e']&&(this['_renderabl'+'e']['setCull'](!this['_element']['_isScreenS'+'pace']()||this['_element']['_isScreenC'+'ulled']()),this['_renderabl'+'e']['setMateria'+'l'](this['_material']),this['_renderabl'+'e']['setScreenS'+'pace'](_0x37f8ec),this['_renderabl'+'e']['setLayer'](_0x37f8ec?Ow:Ky));}['_createMes'+'h'](){const _0x8e45d1=this['_element'],_0x185c39=_0x8e45d1['calculated'+'Width'],_0x7a21a4=_0x8e45d1['calculated'+'Height'],_0x3d6807=this['_rect'],_0x438e8e=this['_system']['app']['graphicsDe'+'vice'],_0x46bfd5=new Float32Array([_0x185c39,-0x1cd1+-0x923+0x25f4,0x6d*0xb+-0x2fe*0xa+0x193d,-0x1218+-0x2221+0x3439,0x1*0xa61+-0x9e9*-0x2+-0x1e33,-0xa4*-0x35+-0x6*0x54f+-0x3*0xb3,_0x3d6807['x']+_0x3d6807['z'],0x1*0x7a0+-0x49d*0x4+0xad5-_0x3d6807['y'],_0x185c39,_0x7a21a4,-0x29*0xe5+0x8c2+0x3fd*0x7,0xed8+-0x56a*-0x1+-0x1442,0x1*0x1d26+0x1b*0x149+-0x3fd9,0x22bf+0x1055+-0x3313,_0x3d6807['x']+_0x3d6807['z'],0xd01+-0x1e87+0x1187*0x1-(_0x3d6807['y']+_0x3d6807['w']),-0xe88+0x4*-0x628+-0x4e5*-0x8,-0x17ac+-0x19b2+0x47*0xb2,0x69e+0xcab+0x1*-0x1349,-0x7*-0x565+-0xb*0x2+-0x25ad,0x261*-0x1+-0x204a+0x22ab,0xef6+-0x4*0x35e+-0x7f*0x3,_0x3d6807['x'],-0x1873+-0x1e5d+-0x1*-0x36d1-_0x3d6807['y'],0x1*-0x8e+0x45d*0x8+-0x225a,_0x7a21a4,0x1*-0xcf+0x131*-0x3+0x11*0x42,0x8f*-0x3e+-0x56*-0x1f+0x9b*0x28,-0x5b*0x1d+0x6ed+-0x2*-0x1b1,0x104a+0x45*0x9+0x3be*-0x5,_0x3d6807['x'],0x63b+-0x904*0x4+-0x43*-0x72-(_0x3d6807['y']+_0x3d6807['w'])]),_0xeb82a7=oR['get'](_0x438e8e,()=>new kt(_0x438e8e,[{'semantic':Me,'components':0x3,'type':Ve},{'semantic':gs,'components':0x3,'type':Ve},{'semantic':is,'components':0x2,'type':Ve}])),_0x4a2a75=new Is(_0x438e8e,_0xeb82a7,0x21e*0x4+-0x165f+0xdeb,{'data':_0x46bfd5['buffer']}),_0x4fd29c=new Ge(_0x438e8e);return _0x4fd29c['vertexBuff'+'er']=_0x4a2a75,_0x4fd29c['primitive'][0x101d*0x1+-0x9e9*0x3+0xd9e]['type']=Er,_0x4fd29c['primitive'][-0x2c5+0x24ce+-0x2209]['base']=0x12*-0x119+0x1269+0x159,_0x4fd29c['primitive'][-0xb*-0x365+-0x1134+-0x1423]['count']=-0x264e+0xd*0x3e+0x8cb*0x4,_0x4fd29c['primitive'][-0x21*-0xb1+0x1aab+-0x317c*0x1]['indexed']=!(0x702+0x312+0x1*-0xa13),_0x4fd29c['aabb']['setMinMax'](D['ZERO'],new D(_0x185c39,_0x7a21a4,0xb7e*0x2+0x232*0x9+-0x155f*0x2)),this['_updateMes'+'h'](_0x4fd29c),_0x4fd29c;}['_updateMes'+'h'](_0x3ad8ae){const _0x5ddfd7=this['_element'];let _0x171330=_0x5ddfd7['calculated'+'Width'],_0x19f385=_0x5ddfd7['calculated'+'Height'];if(_0x5ddfd7['fitMode']!==th&&this['_targetAsp'+'ectRatio']>-0x2*-0xb99+-0x1d4f+0x5*0x139){const _0x330c46=_0x5ddfd7['calculated'+'Width']/_0x5ddfd7['calculated'+'Height'];_0x5ddfd7['fitMode']===GL&&_0x330c46>this['_targetAsp'+'ectRatio']||_0x5ddfd7['fitMode']===HL&&_0x330c46<this['_targetAsp'+'ectRatio']?_0x171330=_0x5ddfd7['calculated'+'Height']*this['_targetAsp'+'ectRatio']:_0x19f385=_0x5ddfd7['calculated'+'Width']/this['_targetAsp'+'ectRatio'];}const _0xdacfae=_0x5ddfd7['_isScreenS'+'pace']();if(this['_updateMat'+'erial'](_0xdacfae),this['_renderabl'+'e']&&this['_renderabl'+'e']['forceUpdat'+'eAabb'](),this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){const _0x4259e3=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]],_0x24444c=(0x1ba3+-0x2142+0x5a1*0x1)/_0x4259e3['rect']['z'],_0x47e81d=(-0x1*-0x2366+-0x19d5*-0x1+-0x3d39)/_0x4259e3['rect']['w'];this['_innerOffs'+'et']['set'](_0x4259e3['border']['x']*_0x24444c,_0x4259e3['border']['y']*_0x47e81d,_0x4259e3['border']['z']*_0x24444c,_0x4259e3['border']['w']*_0x47e81d);const _0x50c428=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x4259e3['rect']['x']/_0x50c428['width'],_0x4259e3['rect']['y']/_0x50c428['height'],_0x4259e3['rect']['z']/_0x50c428['width'],_0x4259e3['rect']['w']/_0x50c428['height']);const _0xd485e1=this['_pixelsPer'+'Unit']!==null?this['_pixelsPer'+'Unit']:this['sprite']['pixelsPerU'+'nit'],_0x443c5f=_0x4259e3['rect']['z']/_0xd485e1,_0x477072=_0x4259e3['rect']['w']/_0xd485e1;this['_outerScal'+'e']['set'](Math['max'](_0x171330,this['_innerOffs'+'et']['x']*_0x443c5f),Math['max'](_0x19f385,this['_innerOffs'+'et']['y']*_0x477072));let _0x31389b=_0x443c5f,_0x1b3b46=_0x477072;this['_outerScal'+'e']['x']/=_0x443c5f,this['_outerScal'+'e']['y']/=_0x477072,_0x31389b*=Y['clamp'](_0x171330/(this['_innerOffs'+'et']['x']*_0x443c5f),-0xc41+0x317*-0x4+0x189d*0x1+0.0001,-0x4b*-0x62+0x1*-0xaa7+-0x1*0x120e),_0x1b3b46*=Y['clamp'](_0x19f385/(this['_innerOffs'+'et']['y']*_0x477072),0xe*0x2a5+0x1*0x1294+-0x379a+0.0001,0x641*-0x5+-0x1ca3*0x1+0x88f*0x7),this['_renderabl'+'e']&&(this['_innerOffs'+'etUniform'][0x2502*-0x1+-0x186a+0x3d6c]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][-0x51b*-0x1+-0x23e1+-0x1*-0x1ec7]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][-0x2*0xc37+-0x1161+0x29d1]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][-0x1b03+0x1*0x133+-0xb*-0x259]=this['_innerOffs'+'et']['w'],this['_renderabl'+'e']['setParamet'+'er']('innerOffse'+'t',this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][0x26cb*0x1+-0xa68+-0x1c63]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][0x2*-0xb2d+0x19d+0x14be]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][-0xa62*0x2+0x2*0x398+0xd96]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][0x94+0x2388+-0x2419]=this['_atlasRect']['w'],this['_renderabl'+'e']['setParamet'+'er']('atlasRect',this['_atlasRect'+'Uniform']),this['_outerScal'+'eUniform'][-0x11f*0x14+0x144f+0x1*0x21d]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][0x1*-0x123f+0x254a+-0x130a]=this['_outerScal'+'e']['y'],this['_renderabl'+'e']['setParamet'+'er']('outerScale',this['_outerScal'+'eUniform']),this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']),this['_renderabl'+'e']['node']['setLocalSc'+'ale'](_0x31389b,_0x1b3b46,0xf0d+-0xe9*-0xd+-0x1ae1*0x1),this['_renderabl'+'e']['node']['setLocalPo'+'sition']((-0x8*0x24b+-0x1fc5+0x321d+0.5-_0x5ddfd7['pivot']['x'])*_0x171330,(-0x88d*-0x2+0x14*0xb9+-0x1f8e+0.5-_0x5ddfd7['pivot']['y'])*_0x19f385,0x2*0x751+0x12b3*0x2+-0x28*0x14d));}else{const _0x5e8250=_0x3ad8ae['vertexBuff'+'er'],_0x4369df=new Float32Array(_0x5e8250['lock']()),_0x4b5aa5=_0x5ddfd7['pivot']['x'],_0x3350a8=_0x5ddfd7['pivot']['y'];_0x4369df[0x73b*-0x1+0x9*-0x354+0xc65*0x3]=_0x171330-_0x4b5aa5*_0x171330,_0x4369df[-0x1178+0x24b6+-0x133d]=0x89e*-0x2+0x7c9*-0x4+0x3060-_0x3350a8*_0x19f385,_0x4369df[0x1*0x782+-0x13f*0x1e+-0x8*-0x3bd]=_0x171330-_0x4b5aa5*_0x171330,_0x4369df[0x1*0x1035+-0x1842+0x12*0x73]=_0x19f385-_0x3350a8*_0x19f385,_0x4369df[0x2337+0x24bb+0x1*-0x47e2]=-0x1b4e+-0x203*-0xc+0x32a-_0x4b5aa5*_0x171330,_0x4369df[-0x1c4*0x8+-0xf*0x22c+0x2ec5]=0x1*0x1341+0x1*0x140c+-0x274d-_0x3350a8*_0x19f385,_0x4369df[-0xf07+-0x7b0*0x1+0x16cf]=-0x211*0x10+0xb*-0xbb+0x5df*0x7-_0x4b5aa5*_0x171330,_0x4369df[-0x1345+0x20ea+0x66*-0x22]=_0x19f385-_0x3350a8*_0x19f385;let _0x3be188=0x3fb+0x2*-0x10a3+0x1d4c,_0x34501c=-0x8f9*0x3+-0x2*0x12f9+0x40de,_0xc1650d=this['_rect'];if(this['_sprite']&&this['_sprite']['frameKeys'][this['_spriteFra'+'me']]&&this['_sprite']['atlas']){const _0x5c3abb=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];_0x5c3abb&&(_0xc1650d=_0x5c3abb['rect'],_0x3be188=this['_sprite']['atlas']['texture']['width'],_0x34501c=this['_sprite']['atlas']['texture']['height']);}_0x4369df[-0x2*-0x11dc+0x3*-0x961+-0x183*0x5]=(_0xc1650d['x']+_0xc1650d['z'])/_0x3be188,_0x4369df[-0x1*0x2033+-0x5*-0x366+0x34*0x4b]=-0x1ee7+0x189*-0x6+0x1*0x281e-_0xc1650d['y']/_0x34501c,_0x4369df[0x13a7+0x11ee+0x1*-0x2587]=(_0xc1650d['x']+_0xc1650d['z'])/_0x3be188,_0x4369df[-0xd65+0x1*-0x1a45+-0x1*-0x27b9]=-0x1*-0x2065+-0x5b2+-0x1ab2-(_0xc1650d['y']+_0xc1650d['w'])/_0x34501c,_0x4369df[-0x4b5+0x10d3+-0x134*0xa]=_0xc1650d['x']/_0x3be188,_0x4369df[0x1c89+0x18b*0x2+-0x1f88]=-0xe3d+-0x8*0x30b+-0x2696*-0x1-_0xc1650d['y']/_0x34501c,_0x4369df[-0x209+0x112+0x115*0x1]=_0xc1650d['x']/_0x3be188,_0x4369df[0x2114+-0xf0*0x1a+-0x895]=0x2093+-0x25fa+0x15a*0x4-(_0xc1650d['y']+_0xc1650d['w'])/_0x34501c,_0x5e8250['unlock']();const _0x2d6d08=new D(0x1*-0x1bc4+-0x16*0x17d+-0x1*-0x3c82-_0x4b5aa5*_0x171330,-0xf8e+-0x1c*-0x108+0x136*-0xb-_0x3350a8*_0x19f385,-0x2*-0x879+0x99f+-0x1a91*0x1),_0x5db107=new D(_0x171330-_0x4b5aa5*_0x171330,_0x19f385-_0x3350a8*_0x19f385,0x4*-0x8eb+0xc35*0x1+0x1777);_0x3ad8ae['aabb']['setMinMax'](_0x2d6d08,_0x5db107),this['_renderabl'+'e']&&(this['_renderabl'+'e']['node']['setLocalSc'+'ale'](0x26a5+-0x13*0x1f6+-0x162,-0x2d7*0x7+0x11ff+0x1e3,0x2*0x1225+-0x14d+0x2*-0x117e),this['_renderabl'+'e']['node']['setLocalPo'+'sition'](-0x359+-0x21d1+-0x252a*-0x1,-0x1*0x1a2f+-0x1*0x1c24+0x3653,-0x20f6+-0x1*-0x2263+-0x16d),this['_renderabl'+'e']['setAabbFun'+'c'](null));}this['_meshDirty']=!(0x4fd*0x6+0x110c*0x1+-0x2ef9);}['_updateSpr'+'ite'](){let _0x4831b5=!(-0x2*0x5cb+-0x1e6c+0x9*0x4ab),_0x24e4ed=null;if(this['_targetAsp'+'ectRatio']=-(-0x2*0x1169+0x26ff+-0x42c),this['_sprite']&&this['_sprite']['atlas']){_0x24e4ed=this['_sprite']['meshes'][this['spriteFram'+'e']],_0x4831b5=this['_sprite']['renderMode']===Pt||this['_sprite']['renderMode']===Mt;const _0x20f939=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];(_0x20f939==null?void(-0x1d6a+0xbf4+-0x6*-0x2e9):_0x20f939['rect']['w'])>0x15*0x3d+0x29*0xac+-0x281*0xd&&(this['_targetAsp'+'ectRatio']=_0x20f939['rect']['z']/_0x20f939['rect']['w']);}this['mesh']=_0x4831b5?_0x24e4ed:this['_defaultMe'+'sh'],this['refreshMes'+'h']();}['refreshMes'+'h'](){this['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(-0x211+-0x13*-0xd5+-0xdbe):this['_updateMes'+'h'](this['mesh']));}['_updateAab'+'b'](_0x3bc0c9){return _0x3bc0c9['center']['set'](0x196a+-0x10*-0x28+-0x6*0x4a7,-0x407*-0x1+-0x157d*-0x1+-0x1984,-0x1324+-0x9f1*-0x1+-0x3*-0x311),_0x3bc0c9['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(0xa42+0x2324+-0x2d66+0.5),this['_outerScal'+'e']['y']*(0x127*0x20+-0x1*-0x193a+-0x3e1a*0x1+0.5),-0x3f5+0x1*-0x2565+0x295a+0.001),_0x3bc0c9['setFromTra'+'nsformedAa'+'bb'](_0x3bc0c9,this['_renderabl'+'e']['node']['getWorldTr'+'ansform']()),_0x3bc0c9;}['_toggleMas'+'k'](){this['_element']['_dirtifyMa'+'sk']();const _0xe2e64f=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0xe2e64f),this['_renderabl'+'e']['setMask'](!!this['_mask']);}['_onMateria'+'lLoad'](_0x107a9e){this['material']=_0x107a9e['resource'];}['_onMateria'+'lAdded'](_0x544981){this['_system']['app']['assets']['off']('add:'+_0x544981['id'],this['_onMateria'+'lAdded'],this),this['_materialA'+'sset']===_0x544981['id']&&this['_bindMater'+'ialAsset'](_0x544981);}['_bindMater'+'ialAsset'](_0x4f650b){this['_entity']['enabled']&&(_0x4f650b['on']('load',this['_onMateria'+'lLoad'],this),_0x4f650b['on']('change',this['_onMateria'+'lChange'],this),_0x4f650b['on']('remove',this['_onMateria'+'lRemove'],this),_0x4f650b['resource']?this['_onMateria'+'lLoad'](_0x4f650b):this['_system']['app']['assets']['load'](_0x4f650b));}['_unbindMat'+'erialAsset'](_0x37b9d5){_0x37b9d5['off']('load',this['_onMateria'+'lLoad'],this),_0x37b9d5['off']('change',this['_onMateria'+'lChange'],this),_0x37b9d5['off']('remove',this['_onMateria'+'lRemove'],this);}['_onMateria'+'lChange'](){}['_onMateria'+'lRemove'](){}['_onTexture'+'Added'](_0x7a348e){this['_system']['app']['assets']['off']('add:'+_0x7a348e['id'],this['_onTexture'+'Added'],this),this['_textureAs'+'set']===_0x7a348e['id']&&this['_bindTextu'+'reAsset'](_0x7a348e);}['_bindTextu'+'reAsset'](_0xf31aba){this['_entity']['enabled']&&(_0xf31aba['on']('load',this['_onTexture'+'Load'],this),_0xf31aba['on']('change',this['_onTexture'+'Change'],this),_0xf31aba['on']('remove',this['_onTexture'+'Remove'],this),_0xf31aba['resource']?this['_onTexture'+'Load'](_0xf31aba):this['_system']['app']['assets']['load'](_0xf31aba));}['_unbindTex'+'tureAsset'](_0x2cc2f2){_0x2cc2f2['off']('load',this['_onTexture'+'Load'],this),_0x2cc2f2['off']('change',this['_onTexture'+'Change'],this),_0x2cc2f2['off']('remove',this['_onTexture'+'Remove'],this);}['_onTexture'+'Load'](_0x522376){this['texture']=_0x522376['resource'];}['_onTexture'+'Change'](_0x1ea1a5){}['_onTexture'+'Remove'](_0x5da414){}['_onSpriteA'+'ssetAdded'](_0x463b06){this['_system']['app']['assets']['off']('add:'+_0x463b06['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x463b06['id']&&this['_bindSprit'+'eAsset'](_0x463b06);}['_bindSprit'+'eAsset'](_0xb62580){this['_entity']['enabled']&&(_0xb62580['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0xb62580['on']('change',this['_onSpriteA'+'ssetChange'],this),_0xb62580['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0xb62580['resource']?this['_onSpriteA'+'ssetLoad'](_0xb62580):this['_system']['app']['assets']['load'](_0xb62580));}['_unbindSpr'+'iteAsset'](_0x4a40cf){_0x4a40cf['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x4a40cf['off']('change',this['_onSpriteA'+'ssetChange'],this),_0x4a40cf['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x4a40cf['data']['textureAtl'+'asAsset']&&this['_system']['app']['assets']['off']('load:'+_0x4a40cf['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this);}['_onSpriteA'+'ssetLoad'](_0x5cac00){if(!_0x5cac00||!_0x5cac00['resource'])this['sprite']=null;else{if(_0x5cac00['resource']['atlas'])this['sprite']=_0x5cac00['resource'];else{const _0x5f54d8=_0x5cac00['data']['textureAtl'+'asAsset'];if(_0x5f54d8){const _0x15ff2e=this['_system']['app']['assets'];_0x15ff2e['off']('load:'+_0x5f54d8,this['_onTexture'+'AtlasLoad'],this),_0x15ff2e['once']('load:'+_0x5f54d8,this['_onTexture'+'AtlasLoad'],this);}}}}['_onSpriteA'+'ssetChange'](_0x5cdba9){this['_onSpriteA'+'ssetLoad'](_0x5cdba9);}['_onSpriteA'+'ssetRemove'](_0x2adb22){}['_bindSprit'+'e'](_0x6b8acf){this['_evtSetMes'+'hes']=_0x6b8acf['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),_0x6b8acf['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x6b8acf['on']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x6b8acf['atlas']&&_0x6b8acf['atlas']['on']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_unbindSpr'+'ite'](_0x4354e2){var _0x15b46;(_0x15b46=this['_evtSetMes'+'hes'])==null||_0x15b46['off'](),this['_evtSetMes'+'hes']=null,_0x4354e2['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x4354e2['off']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x4354e2['atlas']&&_0x4354e2['atlas']['off']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_onSpriteM'+'eshesChang'+'e'](){this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],0x22c*0x4+-0xb76*0x3+0xfd*0x1a,this['_sprite']['frameKeys']['length']-(-0x4df+0x18a0+-0x10*0x13c))),this['_updateSpr'+'ite']();}['_onSpriteP'+'puChange'](){this['sprite']['renderMode']!==ci&&this['_pixelsPer'+'Unit']===null&&this['_updateSpr'+'ite']();}['_onAtlasTe'+'xtureChang'+'e'](){this['sprite']&&this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'));}['_onTexture'+'AtlasLoad'](_0x10cfab){const _0x4f36c9=this['_spriteAss'+'et'];_0x4f36c9 instanceof pe?this['_onSpriteA'+'ssetLoad'](_0x4f36c9):this['_onSpriteA'+'ssetLoad'](this['_system']['app']['assets']['get'](_0x4f36c9));}['onEnable'](){if(this['_materialA'+'sset']){const _0x2d1ece=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);_0x2d1ece&&_0x2d1ece['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0x2d1ece);}if(this['_textureAs'+'set']){const _0x410ebf=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x410ebf&&_0x410ebf['resource']!==this['_texture']&&this['_bindTextu'+'reAsset'](_0x410ebf);}if(this['_spriteAss'+'et']){const _0x2191fd=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x2191fd&&_0x2191fd['resource']!==this['_sprite']&&this['_bindSprit'+'eAsset'](_0x2191fd);}this['_element']['addModelTo'+'Layers'](this['_renderabl'+'e']['model']);}['onDisable'](){this['_element']['removeMode'+'lFromLayer'+'s'](this['_renderabl'+'e']['model']);}['_setStenci'+'l'](_0x175221){this['_renderabl'+'e']['meshInstan'+'ce']['stencilFro'+'nt']=_0x175221,this['_renderabl'+'e']['meshInstan'+'ce']['stencilBac'+'k']=_0x175221;let _0x48856d=0xa4*-0x1b+-0x1*-0x7a2+-0x9aa*-0x1;if(this['_element']['maskedBy']&&(_0x48856d=this['_element']['maskedBy']['element']['_image']['_maskRef']),this['_renderabl'+'e']['unmaskMesh'+'Instance']){const _0x4100de=new pi({'ref':_0x48856d+(0x9*0x427+-0x2001+-0x55d),'func':dh,'zpass':Bx});this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']=_0x4100de,this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k']=_0x4100de;}}['_updateRen'+'derableEmi'+'ssive'](){Ec['linear'](this['_color']),this['_colorUnif'+'orm'][0xf9+-0x24c6+0xd*0x2c1]=Ec['r'],this['_colorUnif'+'orm'][0x177e+-0x114d+0x18*-0x42]=Ec['g'],this['_colorUnif'+'orm'][-0x1*-0x864+-0x412+-0x2e*0x18]=Ec['b'],this['_renderabl'+'e']['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}set['color'](_0x2afae2){this['_color']===_0x2afae2&&w['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t');const {r:_0x5319b0,g:_0x307c6e,b:_0x12f813}=_0x2afae2;(this['_color']['r']!==_0x5319b0||this['_color']['g']!==_0x307c6e||this['_color']['b']!==_0x12f813)&&(this['_color']['r']=_0x5319b0,this['_color']['g']=_0x307c6e,this['_color']['b']=_0x12f813,this['_updateRen'+'derableEmi'+'ssive']()),this['_element']&&this['_element']['fire']('set:color',this['_color']);}get['color'](){return this['_color'];}set['opacity'](_0x50b136){_0x50b136!==this['_color']['a']&&(this['_color']['a']=_0x50b136,this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',_0x50b136)),this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x50b136);}get['opacity'](){return this['_color']['a'];}set['rect'](_0x555765){this['_rect']===_0x555765&&console['warn']('Setting\x20el'+'ement.rect'+'\x20to\x20itself'+'\x20will\x20have'+'\x20no\x20effect');let _0x3daf14,_0x2190b7,_0x2a7c69,_0x11e69a;_0x555765 instanceof re?(_0x3daf14=_0x555765['x'],_0x2190b7=_0x555765['y'],_0x2a7c69=_0x555765['z'],_0x11e69a=_0x555765['w']):(_0x3daf14=_0x555765[0xffb*0x2+-0x10d*-0xd+0xe5*-0x33],_0x2190b7=_0x555765[-0xe6f*0x2+-0x2a1*0x5+0x2a04],_0x2a7c69=_0x555765[-0x1d10+-0xf0e+0x2c20],_0x11e69a=_0x555765[-0xcee+-0x16cb+0x1*0x23bc]),!(_0x3daf14===this['_rect']['x']&&_0x2190b7===this['_rect']['y']&&_0x2a7c69===this['_rect']['z']&&_0x11e69a===this['_rect']['w'])&&(this['_rect']['set'](_0x3daf14,_0x2190b7,_0x2a7c69,_0x11e69a),this['_renderabl'+'e']['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(-0x19fa+-0xe57*0x2+0x36a8*0x1):this['_updateMes'+'h'](this['_renderabl'+'e']['mesh'])));}get['rect'](){return this['_rect'];}['_removeMat'+'erialAsset'+'Events'](){if(this['_materialA'+'sset']){const _0x25d55a=this['_system']['app']['assets'];_0x25d55a['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this);const _0x25b514=_0x25d55a['get'](this['_materialA'+'sset']);_0x25b514&&(_0x25b514['off']('load',this['_onMateria'+'lLoad'],this),_0x25b514['off']('change',this['_onMateria'+'lChange'],this),_0x25b514['off']('remove',this['_onMateria'+'lRemove'],this));}}set['material'](_0x3b2149){if(this['_material']!==_0x3b2149){if(!_0x3b2149){const _0x1d201f=this['_element']['_isScreenS'+'pace']();this['mask']?_0x3b2149=_0x1d201f?this['_system']['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']:this['_system']['defaultIma'+'geMaskMate'+'rial']:_0x3b2149=_0x1d201f?this['_system']['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']:this['_system']['defaultIma'+'geMaterial'];}if(this['_material']=_0x3b2149,this['_materialA'+'sset']){const _0x563e51=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);(!_0x563e51||_0x563e51['resource']!==_0x3b2149)&&(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=null);}_0x3b2149&&(this['_renderabl'+'e']['setMateria'+'l'](_0x3b2149),this['_hasUserMa'+'terial']()?(this['_renderabl'+'e']['deletePara'+'meter']('material_o'+'pacity'),this['_renderabl'+'e']['deletePara'+'meter']('material_e'+'missive')):(this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a'])));}}get['material'](){return this['_material'];}set['materialAs'+'set'](_0x32cad5){const _0x11a508=this['_system']['app']['assets'];let _0x5f08e8=_0x32cad5;if(_0x32cad5 instanceof pe&&(_0x5f08e8=_0x32cad5['id']),this['_materialA'+'sset']!==_0x5f08e8){if(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=_0x5f08e8,this['_materialA'+'sset']){const _0x213781=_0x11a508['get'](this['_materialA'+'sset']);_0x213781?this['_bindMater'+'ialAsset'](_0x213781):(this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x5f08e8,_0x11a508['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this));}else this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x5f08e8;}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['texture'](_0x549733){if(this['_texture']!==_0x549733){if(this['_textureAs'+'set']){const _0x1992d9=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x1992d9&&_0x1992d9['resource']!==_0x549733&&(this['textureAss'+'et']=null);}if(this['_texture']=_0x549733,_0x549733){this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null),this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_texture']),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a']);const _0xefa9af=this['_texture']['width']/this['_texture']['height'];_0xefa9af!==this['_targetAsp'+'ectRatio']&&(this['_targetAsp'+'ectRatio']=_0xefa9af,this['_element']['fitMode']!==th&&this['refreshMes'+'h']());}else this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'),this['_targetAsp'+'ectRatio']=-(-0x215d+0x14fe+-0x630*-0x2),this['_element']['fitMode']!==th&&this['refreshMes'+'h']();}}get['texture'](){return this['_texture'];}set['textureAss'+'et'](_0x5d1560){const _0x44d7b0=this['_system']['app']['assets'];let _0x293e8e=_0x5d1560;if(_0x5d1560 instanceof pe&&(_0x293e8e=_0x5d1560['id']),this['_textureAs'+'set']!==_0x293e8e){if(this['_textureAs'+'set']){_0x44d7b0['off']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this);const _0x46ca9a=_0x44d7b0['get'](this['_textureAs'+'set']);_0x46ca9a&&(_0x46ca9a['off']('load',this['_onTexture'+'Load'],this),_0x46ca9a['off']('change',this['_onTexture'+'Change'],this),_0x46ca9a['off']('remove',this['_onTexture'+'Remove'],this));}if(this['_textureAs'+'set']=_0x293e8e,this['_textureAs'+'set']){const _0x154cb5=_0x44d7b0['get'](this['_textureAs'+'set']);_0x154cb5?this['_bindTextu'+'reAsset'](_0x154cb5):(this['texture']=null,_0x44d7b0['on']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this));}else this['texture']=null;}}get['textureAss'+'et'](){return this['_textureAs'+'set'];}set['spriteAsse'+'t'](_0xc790c9){const _0x1475c1=this['_system']['app']['assets'];let _0x2fd8bb=_0xc790c9;if(_0xc790c9 instanceof pe&&(_0x2fd8bb=_0xc790c9['id']),this['_spriteAss'+'et']!==_0x2fd8bb){if(this['_spriteAss'+'et']){_0x1475c1['off']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this);const _0x10d2b8=_0x1475c1['get'](this['_spriteAss'+'et']);_0x10d2b8&&this['_unbindSpr'+'iteAsset'](_0x10d2b8);}if(this['_spriteAss'+'et']=_0x2fd8bb,this['_spriteAss'+'et']){const _0x15c295=_0x1475c1['get'](this['_spriteAss'+'et']);_0x15c295?this['_bindSprit'+'eAsset'](_0x15c295):(this['sprite']=null,_0x1475c1['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}this['_element']&&this['_element']['fire']('set:sprite'+'Asset',_0x2fd8bb);}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['sprite'](_0x3452bb){if(this['_sprite']!==_0x3452bb){if(this['_sprite']&&this['_unbindSpr'+'ite'](this['_sprite']),this['_spriteAss'+'et']){const _0x3d367d=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x3d367d&&_0x3d367d['resource']!==_0x3452bb&&(this['spriteAsse'+'t']=null);}this['_sprite']=_0x3452bb,this['_sprite']&&(this['_bindSprit'+'e'](this['_sprite']),this['_textureAs'+'set']&&(this['textureAss'+'et']=null)),this['_sprite']&&this['_sprite']['atlas']&&this['_sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap')),this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],0x2*-0x12ae+0x81*-0x3b+0x4317,this['_sprite']['frameKeys']['length']-(-0x5*-0x5b0+-0x3*0x969+-0x34))),this['_updateSpr'+'ite']();}}get['sprite'](){return this['_sprite'];}set['spriteFram'+'e'](_0x1f7b8f){const _0x302fde=this['_spriteFra'+'me'];this['_sprite']?this['_spriteFra'+'me']=Y['clamp'](_0x1f7b8f,0x1c01+-0x90a+-0x1*0x12f7,this['_sprite']['frameKeys']['length']-(0x714+-0x99a+0x287)):this['_spriteFra'+'me']=_0x1f7b8f,this['_spriteFra'+'me']!==_0x302fde&&this['_updateSpr'+'ite'](),this['_element']&&this['_element']['fire']('set:sprite'+'Frame',_0x1f7b8f);}get['spriteFram'+'e'](){return this['_spriteFra'+'me'];}set['mesh'](_0x139bec){this['_renderabl'+'e']['setMesh'](_0x139bec),this['_defaultMe'+'sh']===_0x139bec?this['_renderabl'+'e']['setAabbFun'+'c'](null):this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']);}get['mesh'](){return this['_renderabl'+'e']['mesh'];}set['mask'](_0x217544){this['_mask']!==_0x217544&&(this['_mask']=_0x217544,this['_toggleMas'+'k']());}get['mask'](){return this['_mask'];}set['pixelsPerU'+'nit'](_0x347136){this['_pixelsPer'+'Unit']!==_0x347136&&(this['_pixelsPer'+'Unit']=_0x347136,this['_sprite']&&(this['_sprite']['renderMode']===Pt||this['_sprite']['renderMode']===Mt)&&this['_updateSpr'+'ite']());}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}get['aabb'](){return this['_renderabl'+'e']['meshInstan'+'ce']?this['_renderabl'+'e']['meshInstan'+'ce']['aabb']:null;}}class hR extends me{constructor(_0x563607){super(),this['_app']=_0x563607,_0x563607['i18n']['on'](wa['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['_autoLoad']=!(-0x2499+0x576+-0x7c9*-0x4),this['_disableLo'+'calization']=!(0x215c+-0x4cd*-0x1+-0x2628),this['_defaultAs'+'set']=null,this['_localized'+'Asset']=null;}set['defaultAss'+'et'](_0x2b90cb){const _0x5c753a=_0x2b90cb instanceof pe?_0x2b90cb['id']:_0x2b90cb;this['_defaultAs'+'set']!==_0x5c753a&&(this['_defaultAs'+'set']&&this['_unbindDef'+'aultAsset'](),this['_defaultAs'+'set']=_0x5c753a,this['_defaultAs'+'set']&&this['_bindDefau'+'ltAsset'](),this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['defaultAss'+'et'](){return this['_defaultAs'+'set'];}set['localizedA'+'sset'](_0xe9775c){const _0x30c050=_0xe9775c instanceof pe?_0xe9775c['id']:_0xe9775c;this['_localized'+'Asset']!==_0x30c050&&(this['_localized'+'Asset']&&(this['_app']['assets']['off']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this),this['_unbindLoc'+'alizedAsse'+'t']()),this['_localized'+'Asset']=_0x30c050,this['_localized'+'Asset']&&(this['_app']['assets']['get'](this['_localized'+'Asset'])?this['_bindLocal'+'izedAsset']():this['_app']['assets']['once']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this)));}get['localizedA'+'sset'](){return this['_localized'+'Asset'];}set['autoLoad'](_0x3ab216){this['_autoLoad']!==_0x3ab216&&(this['_autoLoad']=_0x3ab216,this['_autoLoad']&&this['_localized'+'Asset']&&(this['_unbindLoc'+'alizedAsse'+'t'](),this['_bindLocal'+'izedAsset']()));}get['autoLoad'](){return this['_autoLoad'];}set['disableLoc'+'alization'](_0x40a689){this['_disableLo'+'calization']!==_0x40a689&&(this['_disableLo'+'calization']=_0x40a689,this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['disableLoc'+'alization'](){return this['_disableLo'+'calization'];}['_bindDefau'+'ltAsset'](){const _0x1a4f08=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x1a4f08?this['_onDefault'+'AssetAdd'](_0x1a4f08):this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);}['_unbindDef'+'aultAsset'](){if(!this['_defaultAs'+'set'])return;this['_app']['assets']['off']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);const _0x25061a=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x25061a&&(_0x25061a['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x25061a['off']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x25061a['off']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetAdd'](_0x15333d){this['_defaultAs'+'set']===_0x15333d['id']&&(_0x15333d['on']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x15333d['on']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x15333d['once']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetRemov'+'e'](_0x3aa6d6){this['_defaultAs'+'set']===_0x3aa6d6['id']&&(_0x3aa6d6['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x3aa6d6['off']('remove:loc'+'alized',this['_onLocaleA'+'dd'],this),this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this));}['_bindLocal'+'izedAsset'](){if(!this['_autoLoad'])return;const _0x51e67c=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x51e67c&&(_0x51e67c['on']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x51e67c['on']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x51e67c['on']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this),_0x51e67c['resource']?this['_onLocaliz'+'edAssetLoa'+'d'](_0x51e67c):this['_app']['assets']['load'](_0x51e67c));}['_unbindLoc'+'alizedAsse'+'t'](){const _0x3fb82d=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x3fb82d&&(_0x3fb82d['off']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x3fb82d['off']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x3fb82d['off']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this));}['_onLocaliz'+'edAssetAdd'](_0x25ab69){this['_localized'+'Asset']===_0x25ab69['id']&&this['_bindLocal'+'izedAsset']();}['_onLocaliz'+'edAssetLoa'+'d'](_0x4e68a4){this['fire']('load',_0x4e68a4);}['_onLocaliz'+'edAssetCha'+'nge'](_0x348289,_0x44eaad,_0x177127,_0x511b89){this['fire']('change',_0x348289,_0x44eaad,_0x177127,_0x511b89);}['_onLocaliz'+'edAssetRem'+'ove'](_0x36fb36){this['_localized'+'Asset']===_0x36fb36['id']&&(this['localizedA'+'sset']=this['_defaultAs'+'set']),this['fire']('remove',_0x36fb36);}['_onLocaleA'+'dd'](_0x426f1c,_0x15f3b6){this['_app']['i18n']['locale']===_0x426f1c&&this['_onSetLoca'+'le'](_0x426f1c);}['_onLocaleR'+'emove'](_0x85737c,_0x41a05b){this['_app']['i18n']['locale']===_0x85737c&&this['_onSetLoca'+'le'](_0x85737c);}['_onSetLoca'+'le'](_0x361ed1){if(!this['_defaultAs'+'set']){this['localizedA'+'sset']=null;return;}const _0xeaefa3=this['_app']['assets']['get'](this['_defaultAs'+'set']);if(!_0xeaefa3||this['_disableLo'+'calization']){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}const _0xd6d3ed=_0xeaefa3['getLocaliz'+'edAssetId'](_0x361ed1);if(!_0xd6d3ed){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}this['localizedA'+'sset']=_0xd6d3ed;}['destroy'](){this['defaultAss'+'et']=null,this['_app']['i18n']['off'](wa['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['off']();}}const Rh='msdf',dR='bitmap',Mo=-0x55*0x5+-0x32*0x21+0x19*0x53,an=0xf88*-0x1+-0x1*-0x1b01+0x2*-0x5bc,Du=0x1fcf+-0x5*0x289+0x20*-0x99,Zv=-0x1*0x1649+-0x85+-0x9*-0x289,Iu=-0x1*0x25cf+0x1*0x247f+-0x5*-0x44,Lu=-0x5fb*-0x5+0x1*0x1b0f+0x12fb*-0x3,Ru=0x3d*0x37+0x73e*0x4+-0x2a0d,Ou=-0x7*0x2e8+0xcf2+0x76d*0x1,Xg=-0x228f+0x5a3*-0x4+0x3923,fR='\x20\x09\x0a\x0d\x0b\x0c',uR=/[\w|/]/;class pR{constructor(_0xd05885){this['_symbols']=_0xd05885,this['_index']=-0x79f*0x4+-0x2592+0x440e,this['_last']=0x571+-0x54+-0x11*0x4d,this['_cur']=this['_symbols']['length']>-0x2317+-0x87d+-0x15ca*-0x2?this['_symbols'][-0x48*0x3a+-0x30f+0x3*0x675]:null,this['_buf']=[],this['_mode']='text',this['_error']=null;}['read'](){let _0x2dc293=this['_read']();for(;_0x2dc293===Xg;)_0x2dc293=this['_read']();return _0x2dc293!==Mo&&_0x2dc293!==an&&(this['_last']=this['_index']),_0x2dc293;}['buf'](){return this['_buf'];}['last'](){return this['_last'];}['error'](){return this['_error'];}['debugPrint'](){const _0x215472=['EOF','ERROR','TEXT','OPEN_BRACK'+'ET','CLOSE_BRAC'+'KET','EQUALS','STRING','IDENTIFIER','WHITESPACE'];let _0x3ee3e8=this['read'](),_0x2cc13a='';for(;_0x2cc13a+=(_0x2cc13a['length']>-0x2*0xe59+-0x742+0xc*0x2ff?'\x0a':'')+_0x215472[_0x3ee3e8]+'\x20\x27'+this['buf']()['join']('')+'\x27',!(_0x3ee3e8===Mo||_0x3ee3e8===an);)_0x3ee3e8=this['read']();return _0x2cc13a;}['_read'](){return this['_buf']=[],this['_eof']()?Mo:this['_mode']==='text'?this['_text']():this['_tag']();}['_text'](){for(;;)switch(this['_cur']){case null:return this['_buf']['length']>-0x1*0x13de+-0x164*-0x1+-0x16*-0xd7?Du:Mo;case'[':return this['_mode']='tag',this['_buf']['length']>-0x1*-0x3be+-0x41+0x2f*-0x13?Du:this['_tag']();case'\x5c':switch(this['_next'](),this['_cur']){case'[':this['_store']();break;default:this['_output']('\x5c');break;}break;default:this['_store']();break;}}['_tag'](){switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20tag',an;case'[':return this['_store'](),Zv;case']':return this['_store'](),this['_mode']='text',Iu;case'=':return this['_store'](),Lu;case'\x20':case'\x09':case'\x0a':case'\x0d':case'\x0b':case'\x0c':return this['_whitespac'+'e']();case'\x22':return this['_string']();default:return this['_isIdentif'+'ierSymbol'](this['_cur'])?this['_identifie'+'r']():(this['_error']='unrecogniz'+'ed\x20charact'+'er',an);}}['_whitespac'+'e'](){for(this['_store']();fR['indexOf'](this['_cur'])!==-(-0x1e64*0x1+0x134*0x1+-0x2f*-0x9f);)this['_store']();return Xg;}['_string'](){for(this['_next']();;)switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20string',an;case'\x22':return this['_next'](),Ru;default:this['_store']();break;}}['_identifie'+'r'](){for(this['_store']();this['_cur']!==null&&this['_isIdentif'+'ierSymbol'](this['_cur']);)this['_store']();return Ou;}['_isIdentif'+'ierSymbol'](_0x268dd6){return _0x268dd6['length']===0xc1e+0x1*0x653+-0x1270&&_0x268dd6['match'](uR)!==null;}['_eof'](){return this['_cur']===null;}['_next'](){return this['_eof']()||(this['_index']++,this['_cur']=this['_index']<this['_symbols']['length']?this['_symbols'][this['_index']]:null),this['_cur'];}['_store'](){return this['_buf']['push'](this['_cur']),this['_next']();}['_output'](_0x4a9801){this['_buf']['push'](_0x4a9801);}}class mR{constructor(_0x11ecf9){this['_scanner']=new pR(_0x11ecf9),this['_error']=null;}['parse'](_0x39a075,_0x3b0cdb){for(;;)switch(this['_scanner']['read']()){case Mo:return!(-0x5d1+-0x6a1*0x4+-0xac7*-0x3);case an:return!(-0x2e8+0x21e7+-0x1efe);case Du:Array['prototype']['push']['apply'](_0x39a075,this['_scanner']['buf']());break;case Zv:if(!this['_parseTag'](_0x39a075,_0x3b0cdb))return!(-0x2*0x1121+0x1db5+0x48e);break;default:return!(0x517*0x2+0x1e*0x6+-0xae1);}}['error'](){return'Error\x20eval'+'uating\x20mar'+'kup\x20at\x20#'+this['_scanner']['last']()['toString']()+'\x20('+(this['_scanner']['error']()||this['_error'])+')';}['_parseTag'](_0x3b50e9,_0x282241){let _0x38e293=this['_scanner']['read']();if(_0x38e293!==Ou)return this['_error']='expected\x20i'+'dentifier',!(0xcaa*-0x3+-0x5*-0x43+0x24b0);const _0x22543a=this['_scanner']['buf']()['join']('');if(_0x22543a[0x1854+0x1f*0xd3+0x31e1*-0x1]==='/'){for(let _0x2e5feb=_0x282241['length']-(-0x2675+0x2*-0x1125+0x48c0);_0x2e5feb>=0x4d*0x2f+0x22c7*0x1+0x3*-0x104e;--_0x2e5feb)if(_0x22543a==='/'+_0x282241[_0x2e5feb]['name']&&_0x282241[_0x2e5feb]['end']===null)return _0x282241[_0x2e5feb]['end']=_0x3b50e9['length'],_0x38e293=this['_scanner']['read'](),_0x38e293!==Iu?(this['_error']='expected\x20c'+'lose\x20brack'+'et',!(-0x26f3+0x12*0x15+0x257a)):!(-0x1*0x1e2a+0x2626+-0x7fc);return this['_error']='failed\x20to\x20'+'find\x20match'+'ing\x20tag',!(-0x1*0x6bc+-0x2*-0x4df+-0x301);}const _0x1ebd35={'name':_0x22543a,'value':null,'attributes':{},'start':_0x3b50e9['length'],'end':null};if(_0x38e293=this['_scanner']['read'](),_0x38e293===Lu){if(_0x38e293=this['_scanner']['read'](),_0x38e293!==Ru)return this['_error']='expected\x20s'+'tring',!(-0x20f1+-0x1*0x18bf+0x39b1);_0x1ebd35['value']=this['_scanner']['buf']()['join'](''),_0x38e293=this['_scanner']['read']();}for(;;){switch(_0x38e293){case Iu:return _0x282241['push'](_0x1ebd35),!(0xca*0x26+-0xb0*-0xd+-0x26ec*0x1);case Ou:{const _0x285b6d=this['_scanner']['buf']()['join']('');if(_0x38e293=this['_scanner']['read'](),_0x38e293!==Lu)return this['_error']='expected\x20e'+'quals',!(-0xe19*-0x1+-0x1*0xa4d+-0x3cb*0x1);if(_0x38e293=this['_scanner']['read'](),_0x38e293!==Ru)return this['_error']='expected\x20s'+'tring',!(0x6a7+0x5fc+0x93*-0x16);const _0x5403dc=this['_scanner']['buf']()['join']('');_0x1ebd35['attributes'][_0x285b6d]=_0x5403dc;break;}default:return this['_error']='expected\x20c'+'lose\x20brack'+'et\x20or\x20iden'+'tifier',!(0xacb+0x177d+0x3cf*-0x9);}_0x38e293=this['_scanner']['read']();}}}function Qv(_0x1f4b08,_0x27af10){for(const _0xa276e6 in _0x27af10){if(!_0x27af10['hasOwnProp'+'erty'](_0xa276e6))continue;const _0x36f37d=_0x27af10[_0xa276e6];_0x36f37d instanceof Object?(_0x1f4b08['hasOwnProp'+'erty'](_0xa276e6)||(_0x1f4b08[_0xa276e6]={}),Qv(_0x1f4b08[_0xa276e6],_0x27af10[_0xa276e6])):_0x1f4b08[_0xa276e6]=_0x36f37d;}}function _R(_0x285f60){if(_0x285f60['length']===0x59*0x25+0x48+-0x2a1*0x5)return null;const _0x2346ad={};for(let _0x21bfc6=-0x1a5*-0x3+-0x26c6+0x21d7;_0x21bfc6<_0x285f60['length'];++_0x21bfc6){const _0x5687f7=_0x285f60[_0x21bfc6],_0x90d272={};_0x90d272[_0x5687f7['name']]={'value':_0x5687f7['value'],'attributes':_0x5687f7['attributes']},Qv(_0x2346ad,_0x90d272);}return _0x2346ad;}function gR(_0x490781,_0x1fed7c){if(_0x490781['length']===0x1693+-0xcd7+-0x9bc)return null;const _0xe01e4c={};for(let _0x251b58=-0xae+-0x79c+-0x84a*-0x1;_0x251b58<_0x490781['length'];++_0x251b58){const _0xe8f667=_0x490781[_0x251b58];_0xe01e4c['hasOwnProp'+'erty'](_0xe8f667['start'])?_0xe01e4c[_0xe8f667['start']]['open']===null?_0xe01e4c[_0xe8f667['start']]['open']=[_0xe8f667]:_0xe01e4c[_0xe8f667['start']]['open']['push'](_0xe8f667):_0xe01e4c[_0xe8f667['start']]={'open':[_0xe8f667],'close':null},_0xe01e4c['hasOwnProp'+'erty'](_0xe8f667['end'])?_0xe01e4c[_0xe8f667['end']]['close']===null?_0xe01e4c[_0xe8f667['end']]['close']=[_0xe8f667]:_0xe01e4c[_0xe8f667['end']]['close']['push'](_0xe8f667):_0xe01e4c[_0xe8f667['end']]={'open':null,'close':[_0xe8f667]};}let _0x23e2f5=[];function _0x1aa9c3(_0x2cf78c){_0x23e2f5=_0x23e2f5['filter'](_0x3d3403=>_0x2cf78c['find'](_0x1d0548=>_0x1d0548===_0x3d3403)===void(-0xa73+0x1*-0x24a4+0x5*0x96b));}function _0x11f22d(_0xbe7b58){for(let _0x15ebb9=0xb29+0x1e5+-0xd0e;_0x15ebb9<_0xbe7b58['length'];++_0x15ebb9)_0x23e2f5['push'](_0xbe7b58[_0x15ebb9]);}const _0x47c889=Object['keys'](_0xe01e4c)['sort']((_0x1862a7,_0x50f84a)=>_0x1862a7-_0x50f84a),_0x50a9ec=[];for(let _0xaddfae=-0xa8b*-0x3+-0x2263+0x2*0x161;_0xaddfae<_0x47c889['length'];++_0xaddfae){const _0x86c544=_0xe01e4c[_0x47c889[_0xaddfae]];_0x86c544['close']!==null&&_0x1aa9c3(_0x86c544['close']),_0x86c544['open']!==null&&_0x11f22d(_0x86c544['open']),_0x50a9ec['push']({'start':_0x47c889[_0xaddfae],'tags':_R(_0x23e2f5)});}const _0x15dc5e=[];let _0x183222=null;for(let _0x44e4a8=0x1b*-0xa5+0x255d*0x1+-0x13f6;_0x44e4a8<_0x50a9ec['length'];++_0x44e4a8){const _0x4429d6=_0x50a9ec[_0x44e4a8];for(;_0x15dc5e['length']<_0x4429d6['start'];)_0x15dc5e['push'](_0x183222?_0x183222['tags']:null);_0x183222=_0x4429d6;}for(;_0x15dc5e['length']<_0x1fed7c;)_0x15dc5e['push'](null);return _0x15dc5e;}function SR(_0x2fde71){const _0x308fa3=new mR(_0x2fde71),_0x125b55=[],_0x17b8a7=[];if(!_0x308fa3['parse'](_0x125b55,_0x17b8a7))return console['warn'](_0x308fa3['error']()),{'symbols':_0x2fde71,'tags':null};const _0x317b30=_0x17b8a7['find'](_0x4c159e=>_0x4c159e['end']===null);if(_0x317b30)return console['warn']('Markup\x20err'+'or:\x20found\x20'+'unclosed\x20t'+'ag=\x27'+_0x317b30['name']+'\x27'),{'symbols':_0x2fde71,'tags':null};const _0x4d59c8=gR(_0x17b8a7,_0x125b55['length']);return{'symbols':_0x125b55,'tags':_0x4d59c8};}class yR{static['evaluate'](_0x411261){return SR(_0x411261);}}class vR{constructor(){this['count']=0xa22+0x232+-0xc54,this['quad']=-0x26d*0x9+-0x355*-0x2+-0xf2b*-0x1,this['lines']={},this['positions']=[],this['normals']=[],this['uvs']=[],this['colors']=[],this['indices']=[],this['outlines']=[],this['shadows']=[],this['meshInstan'+'ce']=null;}}function xR(_0x21e648,_0x503a2d){const _0x56877e=new Ge(_0x21e648);return _0x56877e['setPositio'+'ns'](_0x503a2d['positions']),_0x56877e['setNormals'](_0x503a2d['normals']),_0x56877e['setColors3'+'2'](_0x503a2d['colors']),_0x56877e['setUvs'](-0x1f28+0xded+0x113b,_0x503a2d['uvs']),_0x56877e['setIndices'](_0x503a2d['indices']),_0x56877e['setVertexS'+'tream'](Ko,_0x503a2d['outlines'],0xf42+-0xd05+-0x72*0x5,void(-0x761*-0x3+-0x26d+-0x13b6),Ve,!(-0x27d*-0x3+0x22e8+-0xbb*0x3a)),_0x56877e['setVertexS'+'tream'](Zo,_0x503a2d['shadows'],-0x16fa+0xa*-0x311+-0x1*-0x35a7,void(-0x4*0x304+0x156d+-0x95d),Ve,!(-0x1871+-0x35d+-0x15*-0x153)),_0x56877e['update'](),_0x56877e;}const qg=/^[\r\n]$/,TR=/^[ \t]$/,jg=/^[ \t\-]|\u200b$/,wR=/^[a-z0-9]$/i,Yg=/^[\u1100-\u11ff]|[\u3000-\u9fff\ua960-\ua97f]|[\uac00-\ud7ff]$/,ER=/^[]$/,bR=['','','','','','','','','','','','',''],AR={'width':0x0,'height':0x0,'xadvance':0x0,'xoffset':0x0,'yoffset':0x0},Kg=new ie(),CR=new J(),We=new ie();class PR{constructor(_0x169536){this['_element']=_0x169536,this['_system']=_0x169536['system'],this['_entity']=_0x169536['entity'],this['_text']='',this['_symbols']=[],this['_colorPale'+'tte']=[],this['_outlinePa'+'lette']=[],this['_shadowPal'+'ette']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null,this['_i18nKey']=null,this['_fontAsset']=new hR(this['_system']['app']),this['_fontAsset']['disableLoc'+'alization']=!(0x7*0x3a9+0x493*-0x3+-0xbe6),this['_fontAsset']['on']('load',this['_onFontLoa'+'d'],this),this['_fontAsset']['on']('change',this['_onFontCha'+'nge'],this),this['_fontAsset']['on']('remove',this['_onFontRem'+'ove'],this),this['_font']=null,this['_color']=new ie(-0xa6c*-0x2+-0x12*0xcd+-0x66d,-0x1*0x20b7+-0x17*-0x8f+0x13df,0x2692+0x18af*0x1+-0x1fa0*0x2,-0x19*-0x15b+0x15c5*-0x1+-0xc1d),this['_colorUnif'+'orm']=new Float32Array(-0x1*-0x67c+0x26a8+-0x2d21),this['_spacing']=-0x23a1+-0x9d*0x4+-0x2ee*-0xd,this['_fontSize']=-0x1*0x7+0x1d75+-0x1d4e,this['_fontMinY']=0x1d1a+-0xcce+0x1c*-0x95,this['_fontMaxY']=0x7*0x2a4+0x5e*-0xd+-0xdb6,this['_originalF'+'ontSize']=0x114b+-0xe8c+-0x29f,this['_maxFontSi'+'ze']=-0xd9a+0x1*-0x135+0xeef,this['_minFontSi'+'ze']=0xb73+-0x14c*0x4+-0x63b,this['_autoFitWi'+'dth']=!(-0x1*-0x1247+0xbd0+-0x1e16),this['_autoFitHe'+'ight']=!(0x737*0x4+0x1816*-0x1+-0x21*0x25),this['_maxLines']=-(-0x1*-0x1aeb+0x6cf+-0x21b9),this['_lineHeigh'+'t']=-0x1934+0x7*0x487+-0x65d,this['_scaledLin'+'eHeight']=-0x1c3d+0x1813+0x6*0xb7,this['_wrapLines']=!(0x2044+-0x86d+-0x17d6),this['_drawOrder']=0x744+-0x1eb7+0x1773,this['_alignment']=new J(-0x18bf+0x1b6f+0x4*-0xac+0.5,-0x15a*-0xe+-0x2123+0xe37+0.5),this['_autoWidth']=!(0x11df+-0x3*0xc01+0x81*0x24),this['_autoHeigh'+'t']=!(0x1e*0xc8+-0x41b*0x7+0x54d*0x1),this['width']=0x13de*0x1+0x153a+0x2*-0x148c,this['height']=0x6*-0x1ca+0x7*-0x419+0x276b,this['_node']=new Ie(),this['_model']=new sr(),this['_model']['graph']=this['_node'],this['_entity']['addChild'](this['_node']),this['_meshInfo']=[],this['_material']=null,this['_aabbDirty']=!(0x2318*-0x1+-0x15ff*-0x1+0xd19),this['_aabb']=new De(),this['_noResize']=!(-0x16cf*0x1+-0x1dc6+0x3496),this['_currentMa'+'terialType']=null,this['_maskedMat'+'erialSrc']=null,this['_rtlReorde'+'r']=!(0x1428+0x1e72+-0x3299),this['_unicodeCo'+'nverter']=!(-0x1*-0x135d+-0x61*0x4+-0x8*0x23b),this['_rtl']=!(-0x50*-0xa+-0x1a1+-0x17e),this['_outlineCo'+'lor']=new ie(0x2*0xd3f+0x1aae+0x1a96*-0x2,0x76b+-0x1*0x4af+-0x2bc,0x9a0+0x2*0xb58+0x58*-0x5e,-0x1136+-0xc*0x248+0x2c97),this['_outlineCo'+'lorUniform']=new Float32Array(-0x2396+-0x8ae+0x2c48),this['_outlineTh'+'icknessSca'+'le']=0x279*-0xe+0x5b*0x5+0x20d7+0.2,this['_outlineTh'+'ickness']=0x101e+-0x54*0x8+-0xd7e,this['_shadowCol'+'or']=new ie(-0xc0*-0x2d+0x1eff+0x27*-0x1a9,0x1*0x22f4+-0x7*0x87+0x97*-0x35,0x4a3*-0x4+0x119a+0x16*0xb,-0x432+-0x1778+-0x1*-0x1bab),this['_shadowCol'+'orUniform']=new Float32Array(-0x773+-0x2063+-0x2*-0x13ed),this['_shadowOff'+'setScale']=-0x7e1+0x3fb*0x8+-0x17f7+0.005,this['_shadowOff'+'set']=new J(0x151a*-0x1+-0x1e11+0x332b,-0x1ba6+-0x25*0x47+-0xf*-0x287),this['_shadowOff'+'setUniform']=new Float32Array(-0x224a+0x1229*0x1+0x1023*0x1),this['_enableMar'+'kup']=!(0x1*0x1af3+-0xb*0x1c5+-0x17f*0x5),this['_onScreenC'+'hange'](this['_element']['screen']),_0x169536['on']('resize',this['_onParentR'+'esize'],this),_0x169536['on']('set:screen',this['_onScreenC'+'hange'],this),_0x169536['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),_0x169536['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),_0x169536['on']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['on'](wa['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['on']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['on']('data:remov'+'e',this['_onLocaliz'+'ationData'],this),this['_rangeStar'+'t']=0x59d+-0x24ef+0x2*0xfa9,this['_rangeEnd']=-0x17*0x19+0x20*-0x35+-0x1*-0x8df;}['destroy'](){this['_setMateri'+'al'](null),this['_model']&&(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),this['_model']['destroy'](),this['_model']=null),this['_fontAsset']['destroy'](),this['font']=null,this['_element']['off']('resize',this['_onParentR'+'esize'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['off'](wa['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['off']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['off']('data:remov'+'e',this['_onLocaliz'+'ationData'],this);}['_onParentR'+'esize'](_0x5a9941,_0x3f24b6){this['_noResize']||this['_font']&&this['_updateTex'+'t']();}['_onScreenC'+'hange'](_0x3a6199){_0x3a6199?this['_updateMat'+'erial'](_0x3a6199['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(-0x1841+0x1956+-0x114));}['_onScreenS'+'paceChange'](_0x59c726){this['_updateMat'+'erial'](_0x59c726);}['_onDrawOrd'+'erChange'](_0x3533e7){if(this['_drawOrder']=_0x3533e7,this['_model']){for(let _0x26ebbf=0x59a*-0x5+-0x602+0x4dc*0x7,_0x372e0e=this['_model']['meshInstan'+'ces']['length'];_0x26ebbf<_0x372e0e;_0x26ebbf++)this['_model']['meshInstan'+'ces'][_0x26ebbf]['drawOrder']=_0x3533e7;}}['_onPivotCh'+'ange'](_0x2e5794){this['_font']&&this['_updateTex'+'t']();}['_onLocaleS'+'et'](_0x3165cc){if(this['_i18nKey']){if(this['fontAsset']){const _0x128d8c=this['_system']['app']['assets']['get'](this['fontAsset']);(!_0x128d8c||!_0x128d8c['resource']||_0x128d8c['resource']!==this['_font'])&&(this['font']=null);}this['_resetLoca'+'lizedText']();}}['_onLocaliz'+'ationData'](_0x4f09af,_0x2c2995){this['_i18nKey']&&_0x2c2995[this['_i18nKey']]&&this['_resetLoca'+'lizedText']();}['_resetLoca'+'lizedText'](){this['_setText'](this['_system']['app']['i18n']['getText'](this['_i18nKey']));}['_setText'](_0x52bef2){if(this['unicodeCon'+'verter']){const _0x21fa36=this['_system']['getUnicode'+'Converter']();_0x21fa36?_0x52bef2=_0x21fa36(_0x52bef2):console['warn']('Element\x20cr'+'eated\x20with'+'\x20unicodeCo'+'nverter\x20op'+'tion\x20but\x20n'+'o\x20unicodeC'+'onverter\x20f'+'unction\x20re'+'gistered');}this['_text']!==_0x52bef2&&(this['_font']&&this['_updateTex'+'t'](_0x52bef2),this['_text']=_0x52bef2);}['_updateTex'+'t'](_0x479b77){let _0x1b3886;if(_0x479b77===void(0x214f+-0x66*0x12+0x1*-0x1a23)&&(_0x479b77=this['_text']),this['_symbols']=Hc['getSymbols'](_0x479b77['normalize']?_0x479b77['normalize']('NFC'):_0x479b77),this['_symbols']['length']===0xf7c+0x230f+-0x13*0x2a9&&(this['_symbols']=['\x20']),this['_enableMar'+'kup']){const _0x1a1225=yR['evaluate'](this['_symbols']);this['_symbols']=_0x1a1225['symbols'],_0x1b3886=_0x1a1225['tags']||[];}if(this['_rtlReorde'+'r']){const _0x2fb391=this['_system']['app']['systems']['element']['getRtlReor'+'der']();if(_0x2fb391){const _0x3a302a=_0x2fb391(this['_symbols']);this['_rtl']=_0x3a302a['rtl'],this['_symbols']=_0x3a302a['mapping']['map'](function(_0x2b3a9b){return this['_symbols'][_0x2b3a9b];},this),_0x1b3886&&(_0x1b3886=_0x3a302a['mapping']['map'](_0x21ca00=>_0x1b3886[_0x21ca00]));}else console['warn']('Element\x20cr'+'eated\x20with'+'\x20rtlReorde'+'r\x20option\x20b'+'ut\x20no\x20rtlR'+'eorder\x20fun'+'ction\x20regi'+'stered');}else this['_rtl']=!(0x7*0x4b1+0x2659*0x1+0x1*-0x472f);const _0x241c95=(_0x4c325e,_0x312a3c)=>_0x4c325e['toString'](!(-0x1418+-0x7*-0x12f+0xbcf))['toLowerCas'+'e']()+':'+_0x312a3c['toFixed'](0x12c1+-0x63f+-0xc80),_0x41d374=(_0x23f23a,_0x5a29f2)=>_0x23f23a['toString'](!(0x66d*0x5+0x1d29+-0x3d4a))['toLowerCas'+'e']()+':'+_0x5a29f2['x']['toFixed'](0x1*0x2322+-0x2*-0xd46+-0x3dac)+':'+_0x5a29f2['y']['toFixed'](-0x1edc*-0x1+0x35*0x1a+-0x1*0x243c);if(_0x1b3886){const _0x59474d={},_0x28153f={},_0x6876b4={};this['_colorPale'+'tte']=[Math['round'](this['_color']['r']*(-0x1375*0x1+0x1*0x16e5+0x1*-0x271)),Math['round'](this['_color']['g']*(0x2248+0xce3*-0x1+-0xe*0x175)),Math['round'](this['_color']['b']*(-0xe2*0x25+-0x1cf9*0x1+-0x2*-0x1f51))],this['_outlinePa'+'lette']=[Math['round'](this['_outlineCo'+'lor']['r']*(0x181c*0x1+-0x549+-0x11d4)),Math['round'](this['_outlineCo'+'lor']['g']*(-0x18fb+-0x35*-0x31+0xfd5)),Math['round'](this['_outlineCo'+'lor']['b']*(-0x1*-0x1ddf+0xea2+-0x2b82)),Math['round'](this['_outlineCo'+'lor']['a']*(-0x2557+-0x218*-0x6+0x19c6)),Math['round'](this['_outlineTh'+'ickness']*(-0x11c7+0x1f36+-0xc70))],this['_shadowPal'+'ette']=[Math['round'](this['_shadowCol'+'or']['r']*(-0x2*-0x93a+0x1*0x53+-0x239*0x8)),Math['round'](this['_shadowCol'+'or']['g']*(-0x2191+-0x167a+0x413*0xe)),Math['round'](this['_shadowCol'+'or']['b']*(0x1718+0x1*0xd31+-0x234a)),Math['round'](this['_shadowCol'+'or']['a']*(0x1*-0x1ec7+0x6b1+0x1915)),Math['round'](this['_shadowOff'+'set']['x']*(-0x1fd*-0xa+-0x192e+0x5cb)),Math['round'](this['_shadowOff'+'set']['y']*(0xc3*-0x3+-0x1a6*0x13+0x221a))],this['_symbolCol'+'ors']=[],this['_symbolOut'+'lineParams']=[],this['_symbolSha'+'dowParams']=[],_0x59474d[this['_color']['toString'](!(0x1222+-0x63d*-0x1+-0x185e))['toLowerCas'+'e']()]=-0x335+0x1456+-0x1121,_0x28153f[_0x241c95(this['_outlineCo'+'lor'],this['_outlineTh'+'ickness'])]=0x12a2+-0x14ed*0x1+0x24b,_0x6876b4[_0x41d374(this['_shadowCol'+'or'],this['_shadowOff'+'set'])]=0x152c+0x1*0xd24+-0x2250;for(let _0xad935c=-0x2*0xe19+0x2106*-0x1+0x3d38,_0x1cea00=this['_symbols']['length'];_0xad935c<_0x1cea00;++_0xad935c){const _0x62f1a1=_0x1b3886[_0xad935c];let _0x2acf05=0x155e+0xe0b*-0x1+-0x177*0x5;if(_0x62f1a1&&_0x62f1a1['color']&&_0x62f1a1['color']['value']){const _0xf11778=_0x62f1a1['color']['value'];if(_0xf11778['length']===-0x234b+-0x1de7+0x11b*0x3b&&_0xf11778[0x1a52+-0x22df+0x88d]==='#'){const _0x4b8ee8=_0xf11778['substring'](0x1297+0x816+-0x472*0x6)['toLowerCas'+'e']();_0x59474d['hasOwnProp'+'erty'](_0x4b8ee8)?_0x2acf05=_0x59474d[_0x4b8ee8]:/^[0-9a-f]{6}$/['test'](_0x4b8ee8)&&(_0x2acf05=this['_colorPale'+'tte']['length']/(-0x1a4c+-0x22d2+-0x3d21*-0x1),_0x59474d[_0x4b8ee8]=_0x2acf05,this['_colorPale'+'tte']['push'](parseInt(_0x4b8ee8['substring'](-0x12da*0x1+-0x2*-0xafb+0x31c*-0x1,0x1349+-0x2*-0xc61+-0x2c09),-0x6cd*0x3+0x2bf+0x2a*0x6c)),this['_colorPale'+'tte']['push'](parseInt(_0x4b8ee8['substring'](0xacf*-0x2+-0x8e1+-0x1e81*-0x1,0x35*0xa1+-0x2146+-0x1*0xb),0x2482+0x26*0x61+-0x2*0x196c)),this['_colorPale'+'tte']['push'](parseInt(_0x4b8ee8['substring'](0x1*0x2445+0x1695+-0x3ad6,-0x71c*-0x2+0x44*0x3d+0x511*-0x6),-0x1edc+-0x24af*-0x1+-0x5c3)));}}this['_symbolCol'+'ors']['push'](_0x2acf05);let _0xa01c2c=-0x7ef*-0x3+-0xf82*-0x1+0x274f*-0x1;if(_0x62f1a1&&_0x62f1a1['outline']&&(_0x62f1a1['outline']['attributes']['color']||_0x62f1a1['outline']['attributes']['thickness'])){let _0x4f4811=_0x62f1a1['outline']['attributes']['color']?Kg['fromString'](_0x62f1a1['outline']['attributes']['color']):this['_outlineCo'+'lor'],_0x6ca8cb=Number(_0x62f1a1['outline']['attributes']['thickness']);(Number['isNaN'](_0x4f4811['r'])||Number['isNaN'](_0x4f4811['g'])||Number['isNaN'](_0x4f4811['b'])||Number['isNaN'](_0x4f4811['a']))&&(_0x4f4811=this['_outlineCo'+'lor']),Number['isNaN'](_0x6ca8cb)&&(_0x6ca8cb=this['_outlineTh'+'ickness']);const _0x332e73=_0x241c95(_0x4f4811,_0x6ca8cb);_0x28153f['hasOwnProp'+'erty'](_0x332e73)?_0xa01c2c=_0x28153f[_0x332e73]:(_0xa01c2c=this['_outlinePa'+'lette']['length']/(0x797+0x10be+-0x1850),_0x28153f[_0x332e73]=_0xa01c2c,this['_outlinePa'+'lette']['push'](Math['round'](_0x4f4811['r']*(0x1*0x1b83+-0xbb6+-0xece)),Math['round'](_0x4f4811['g']*(-0x2128+0xceb*0x3+0x2*-0x24d)),Math['round'](_0x4f4811['b']*(0x1358*-0x2+-0x1*0x1c13+0x43c2)),Math['round'](_0x4f4811['a']*(-0x49e+-0x7*-0x2f+-0x454*-0x1)),Math['round'](_0x6ca8cb*(-0x11c0+-0x219+0x14d8))));}this['_symbolOut'+'lineParams']['push'](_0xa01c2c);let _0x591f3f=0x1962+-0x1b05+0x1a3*0x1;if(_0x62f1a1&&_0x62f1a1['shadow']&&(_0x62f1a1['shadow']['attributes']['color']||_0x62f1a1['shadow']['attributes']['offset']||_0x62f1a1['shadow']['attributes']['offsetX']||_0x62f1a1['shadow']['attributes']['offsetY'])){let _0x100824=_0x62f1a1['shadow']['attributes']['color']?Kg['fromString'](_0x62f1a1['shadow']['attributes']['color']):this['_shadowCol'+'or'];const _0x5aea82=Number(_0x62f1a1['shadow']['attributes']['offset']),_0x1d9dcd=Number(_0x62f1a1['shadow']['attributes']['offsetX']),_0x22f831=Number(_0x62f1a1['shadow']['attributes']['offsetY']);(Number['isNaN'](_0x100824['r'])||Number['isNaN'](_0x100824['g'])||Number['isNaN'](_0x100824['b'])||Number['isNaN'](_0x100824['a']))&&(_0x100824=this['_shadowCol'+'or']);const _0x519d49=CR['set'](Number['isNaN'](_0x1d9dcd)?Number['isNaN'](_0x5aea82)?this['_shadowOff'+'set']['x']:_0x5aea82:_0x1d9dcd,Number['isNaN'](_0x22f831)?Number['isNaN'](_0x5aea82)?this['_shadowOff'+'set']['y']:_0x5aea82:_0x22f831),_0x99f14e=_0x41d374(_0x100824,_0x519d49);_0x6876b4['hasOwnProp'+'erty'](_0x99f14e)?_0x591f3f=_0x6876b4[_0x99f14e]:(_0x591f3f=this['_shadowPal'+'ette']['length']/(0x19d7+-0x1b30+0x15f),_0x6876b4[_0x99f14e]=_0x591f3f,this['_shadowPal'+'ette']['push'](Math['round'](_0x100824['r']*(0x16a5+-0xb99+-0x53*0x1f)),Math['round'](_0x100824['g']*(0x1*0x1919+-0x2c5*-0x1+-0x1adf)),Math['round'](_0x100824['b']*(0x67f*0x5+0x46*-0x7+0x2f5*-0xa)),Math['round'](_0x100824['a']*(-0xd6c+0x1ddb*0x1+0x98*-0x1a)),Math['round'](_0x519d49['x']*(-0x1*0x1a7e+-0x1*-0x17b6+-0x1*-0x347)),Math['round'](_0x519d49['y']*(0x1df6+0xa*-0xe6+0x31*-0x6b))));}this['_symbolSha'+'dowParams']['push'](_0x591f3f);}}else this['_colorPale'+'tte']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null;this['_updateMat'+'erialEmiss'+'ive'](),this['_updateMat'+'erialOutli'+'ne'](),this['_updateMat'+'erialShado'+'w']();const _0x14b5fc=this['_calculate'+'CharsPerTe'+'xture']();let _0x2677ed=!(0x5cf+0x21e5*0x1+0x1*-0x27b3);const _0xac338e=this['_element'],_0x3ae6e8=_0xac338e['_isScreenS'+'pace'](),_0x11d8c8=_0xac338e['_isScreenC'+'ulled'](),_0x2bdd96=function(_0x139708){return _0xac338e['isVisibleF'+'orCamera'](_0x139708);};for(let _0x66df7=0x40*0x70+-0x16d7+0x529*-0x1,_0x112caf=this['_meshInfo']['length'];_0x66df7<_0x112caf;_0x66df7++){const _0x2d80f3=_0x14b5fc[_0x66df7]||0x295*0xd+0x2*0x11ae+-0x44ed,_0x1907f3=this['_meshInfo'][_0x66df7];if(_0x1907f3['count']!==_0x2d80f3){if(_0x2677ed||(_0xac338e['removeMode'+'lFromLayer'+'s'](this['_model']),_0x2677ed=!(-0x582+-0x1*-0x4ce+0x12*0xa)),_0x1907f3['count']=_0x2d80f3,_0x1907f3['positions']['length']=_0x1907f3['normals']['length']=_0x2d80f3*(0x382*-0x1+0x4*-0x2c5+0xe99)*(0x7f9+0x22db+0x1*-0x2ad0),_0x1907f3['indices']['length']=_0x2d80f3*(-0x22d9*0x1+-0x2346+-0x2311*-0x2)*(-0x1d02+0x102*0x8+0x14f4),_0x1907f3['uvs']['length']=_0x2d80f3*(0x2524+0x41d+0x293f*-0x1)*(-0xb56*0x2+-0x1574+0x32*0xe2),_0x1907f3['colors']['length']=_0x2d80f3*(-0x1420+-0x152+0x1576*0x1)*(0x1*-0x11bf+0x589*-0x1+0x2a*0x8e),_0x1907f3['outlines']['length']=_0x2d80f3*(0x2*0x3a6+-0x1f*0x42+0xb6)*(0x1f51+0x10c8+-0x3016*0x1),_0x1907f3['shadows']['length']=_0x2d80f3*(-0x200c+0x53*-0x6d+0x4367)*(-0x1af*0x14+-0x200e+-0x41bd*-0x1),_0x1907f3['meshInstan'+'ce']&&this['_removeMes'+'hInstance'](_0x1907f3['meshInstan'+'ce']),_0x2d80f3===-0xecc+-0x1*0x16d7+0x25a3){_0x1907f3['meshInstan'+'ce']=null;continue;}for(let _0x494831=-0xf0f+0x59*-0x6d+0x34f4;_0x494831<_0x2d80f3;_0x494831++)_0x1907f3['indices'][_0x494831*(0xd*-0x25c+0x192d+0x11a*0x5)*(-0x6*-0x42d+-0x21e9+0x8dd)+(0x187c+-0xac2+0xdba*-0x1)]=_0x494831*(0x2630+0x139f+-0x39cb),_0x1907f3['indices'][_0x494831*(0x1675+0x150e+0x57*-0x80)*(0x15bb+0x21b5+0xa5*-0x56)+(0xc83*-0x3+0x7b9+0x1c1*0x11)]=_0x494831*(0xa12+-0x59f*0x3+-0x53*-0x15)+(-0x25c6+-0x6*-0x45b+0xba5),_0x1907f3['indices'][_0x494831*(-0xaf7+0x78e*-0x4+0x2932)*(-0x1b*0xd1+-0x1122+0x272f)+(0xa3*-0x16+-0x12e9+-0x1*-0x20ed)]=_0x494831*(-0x1368+0x1091+0x2db)+(-0x195b*0x1+-0x3a5*0x5+0x2b97),_0x1907f3['indices'][_0x494831*(-0xc36+-0x22bd+0x2ef6)*(-0xaba+0x17*-0x1+0xad3)+(0x1754+-0xfbb*0x1+-0x796)]=_0x494831*(-0x10c3*0x1+0x251*0xa+-0x663)+(0x7f3+-0x14bd+-0x9c*-0x15),_0x1907f3['indices'][_0x494831*(0x1af+-0x164*0xd+0x1068)*(-0xb65*-0x1+0x3*0x5c3+-0x1cac)+(-0xc44+-0xce5*-0x2+-0xd82)]=_0x494831*(0xfaa+-0x3*-0x7eb+-0x2767)+(0x187*0x4+-0x89c+-0x1*-0x283),_0x1907f3['indices'][_0x494831*(0x1*-0x25d9+0xc73*-0x3+0x4b35)*(-0x1*-0xf77+-0x6*0x5b+-0xd53)+(-0x13a*0x1+-0x2351+-0x1d4*-0x14)]=_0x494831*(0x1*-0xaa5+-0x3*0x1c7+0xffe*0x1)+(-0x6f5+-0x2223+0x2919),_0x1907f3['normals'][_0x494831*(0x8df+-0x1*-0x1b05+-0x23e0)*(0x620+0x75b*0x4+-0x33b*0xb)+(0x25*0xa8+-0x1132+-0x716)]=-0x5cf*-0x1+0x2063*0x1+-0x2632,_0x1907f3['normals'][_0x494831*(-0x1*0xd37+0xe3*-0xb+0x16fc)*(0x1*0x146e+0x7*-0x25c+-0x3e7)+(0x2*0xa57+-0x1*0xbe+-0x237*0x9)]=-0x2299+0xfa2+0x12f7*0x1,_0x1907f3['normals'][_0x494831*(-0xde6+0x5*0x7a7+-0x1859)*(-0x9ed+-0x4*-0x541+-0xb14)+(0x1334*0x2+-0xdb5+-0x81*0x31)]=-(0x21c0+-0x1497+-0x34a*0x4),_0x1907f3['normals'][_0x494831*(-0x69+0x2f4*-0x7+-0xb*-0x1eb)*(0x9*0x18f+0x1c43*0x1+-0x1*0x2a47)+(0x26e6*0x1+0x6a5+-0x2d88)]=-0x71d*-0x3+0x234b+-0x1*0x38a2,_0x1907f3['normals'][_0x494831*(0x3e6*-0x7+0xab5+0x1099)*(0x133+0x12c+-0x2*0x12e)+(0x5*-0x2c3+-0x1c7a+-0x11*-0x27d)]=0xc9*0xb+0x13*-0x1c3+0x18d6,_0x1907f3['normals'][_0x494831*(-0x12fe+-0x2*-0x6d1+0x56*0x10)*(0x6e3*0x4+-0x2061+0x4d8)+(-0x62c+0x1*-0x8fe+0xf2f)]=-(0x138d+-0x1dd4+0x149*0x8),_0x1907f3['normals'][_0x494831*(0x23fb*0x1+0x2697*-0x1+0x2a0)*(-0x595*0x2+-0xbf1*-0x2+-0xcb5)+(0x24d8+0x1*-0x1fb4+-0x51e)]=0x1*0xf39+-0x943+0x5f6*-0x1,_0x1907f3['normals'][_0x494831*(-0x4c1*0x1+0x24d6+-0x1*0x2011)*(-0x326*-0x6+0x15d*-0x7+-0x956)+(0x1c94*-0x1+-0x2025+0x3cc0)]=0x5cc+-0x1b75+-0x15a9*-0x1,_0x1907f3['normals'][_0x494831*(0x919+0x16*-0x198+0x1*0x19fb)*(-0x1a8*-0xd+-0x1282+-0x303)+(0x1*0x6f8+0x12+0x1a*-0x45)]=-(0x43f*0x5+0x6*-0x20f+0x4*-0x238),_0x1907f3['normals'][_0x494831*(-0x11*-0x167+0x97*-0x33+0x2*0x321)*(-0x60*0x2c+0x2530+-0x14ad)+(0x6d9+-0x1e15+0x353*0x7)]=0x149d+0x1d7f+0x4*-0xc87,_0x1907f3['normals'][_0x494831*(-0x19*-0x18b+0x1*-0x13ee+-0x12a1)*(0xeb8+0x1355+-0x220a*0x1)+(0x1*0x1211+-0x357*0x5+-0x22*0xa)]=0x611*-0x1+-0x2199*0x1+0x13d5*0x2,_0x1907f3['normals'][_0x494831*(-0x35*0xac+0x1*0x1597+-0xe09*-0x1)*(-0x2431+0x22a0*0x1+0x194)+(0xc*-0x75+0xf*0x256+0x1*-0x1d83)]=-(-0xa6*-0x27+-0xa27+-0xf22);const _0xa179f=xR(this['_system']['app']['graphicsDe'+'vice'],_0x1907f3),_0x54cc78=new He(_0xa179f,this['_material'],this['_node']);if(_0x54cc78['name']='Text\x20Eleme'+'nt:\x20'+this['_entity']['name'],_0x54cc78['castShadow']=!(0x27e+0x179*-0xc+-0xd*-0x12b),_0x54cc78['receiveSha'+'dow']=!(-0x3*0xd3+-0x36*-0x62+-0x1232*0x1),_0x54cc78['cull']=!_0x3ae6e8,_0x54cc78['screenSpac'+'e']=_0x3ae6e8,_0x54cc78['drawOrder']=this['_drawOrder'],_0x11d8c8&&(_0x54cc78['cull']=!(-0xdf*0x23+0x188*-0x12+0x3a0d),_0x54cc78['isVisibleF'+'unc']=_0x2bdd96),this['_setTextur'+'eParams'](_0x54cc78,this['_font']['textures'][_0x66df7]),_0x54cc78['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']),_0x54cc78['setParamet'+'er']('material_o'+'pacity',this['_color']['a']),_0x54cc78['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x54cc78['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x54cc78['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x66df7]['width']),_0x54cc78['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']),_0x54cc78['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']),_0x54cc78['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']),this['_symbolSha'+'dowParams'])this['_shadowOff'+'setUniform'][-0x3*-0x59+0xd03+-0xe0e]=0x2*-0x8d2+0x2689+0x14e5*-0x1,this['_shadowOff'+'setUniform'][0xea*-0xd+0x226*-0x1+-0x1*-0xe09]=0x3*-0x1e7+-0x11*0x109+0x174e;else{const _0x3c0ec0=-this['_font']['data']['info']['maps'][_0x66df7]['width']/this['_font']['data']['info']['maps'][_0x66df7]['height'];this['_shadowOff'+'setUniform'][0x1359+0x21e0+-0x3539]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][0x1abb+-0x159b+-0x51f]=_0x3c0ec0*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'];}_0x54cc78['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']),_0x1907f3['meshInstan'+'ce']=_0x54cc78,this['_model']['meshInstan'+'ces']['push'](_0x54cc78);}}this['_element']['maskedBy']&&this['_element']['_setMasked'+'By'](this['_element']['maskedBy']),_0x2677ed&&this['_element']['enabled']&&this['_entity']['enabled']&&this['_element']['addModelTo'+'Layers'](this['_model']),this['_updateMes'+'hes'](),this['_rangeStar'+'t']=-0x11f0+0x22a+0xfc6*0x1,this['_rangeEnd']=this['_symbols']['length'],this['_updateRen'+'derRange']();}['_removeMes'+'hInstance'](_0x3223d4){_0x3223d4['destroy']();const _0x203392=this['_model']['meshInstan'+'ces']['indexOf'](_0x3223d4);_0x203392!==-(0xac0+0xf07+0xce3*-0x2)&&this['_model']['meshInstan'+'ces']['splice'](_0x203392,0x4c2+0x11b8+-0x1*0x1679);}['_setMateri'+'al'](_0x4bf90b){if(this['_material']=_0x4bf90b,this['_model'])for(let _0x546024=-0x1f82+-0x2*0x9a3+-0x14*-0x28a,_0x1b3127=this['_model']['meshInstan'+'ces']['length'];_0x546024<_0x1b3127;_0x546024++){const _0x37abfd=this['_model']['meshInstan'+'ces'][_0x546024];_0x37abfd['material']=_0x4bf90b;}}['_updateMat'+'erial'](_0x563867){const _0x18af73=this['_element'],_0x4cc08a=_0x18af73['_isScreenC'+'ulled'](),_0x358159=function(_0x55d4c1){return _0x18af73['isVisibleF'+'orCamera'](_0x55d4c1);},_0x28799e=this['_font']&&this['_font']['type']===Rh;if(this['_material']=this['_system']['getTextEle'+'mentMateri'+'al'](_0x563867,_0x28799e,this['_enableMar'+'kup']),this['_model'])for(let _0x584376=0x38*0x86+-0x114+-0x1c3c,_0x133150=this['_model']['meshInstan'+'ces']['length'];_0x584376<_0x133150;_0x584376++){const _0x1f0d58=this['_model']['meshInstan'+'ces'][_0x584376];_0x1f0d58['cull']=!_0x563867,_0x1f0d58['material']=this['_material'],_0x1f0d58['screenSpac'+'e']=_0x563867,_0x4cc08a?(_0x1f0d58['cull']=!(0x3*0x952+-0xc80+-0xf76),_0x1f0d58['isVisibleF'+'unc']=_0x358159):_0x1f0d58['isVisibleF'+'unc']=null;}}['_updateMat'+'erialEmiss'+'ive'](){this['_symbolCol'+'ors']?(this['_colorUnif'+'orm'][-0x4b6+-0x71*0x17+0x2f9*0x5]=0x11*0x1f3+-0x509*0x5+-0x7f5,this['_colorUnif'+'orm'][-0x6*-0x2dc+0x18d0+-0x29f7]=0x1*-0x95b+-0x7e2+0x113e,this['_colorUnif'+'orm'][-0x134e+-0x3*0x76d+0x2997]=0x1d0*-0x9+0x242*0x7+0x83*0x1):(We['linear'](this['_color']),this['_colorUnif'+'orm'][-0x1*-0x7a9+0x3*-0x1fd+-0x1b2]=We['r'],this['_colorUnif'+'orm'][0x1*0x1985+0x1cc2+-0x1*0x3646]=We['g'],this['_colorUnif'+'orm'][0xa80+-0x98c*-0x4+-0x1f*0x192]=We['b']);}['_updateMat'+'erialOutli'+'ne'](){this['_symbolOut'+'lineParams']?(this['_outlineCo'+'lorUniform'][-0x3c3*0x1+-0xd*-0x89+-0x332]=0x1732+-0x1*0x69b+0x1f*-0x89,this['_outlineCo'+'lorUniform'][0x11b*-0x17+0x8e0+0xa3*0x1a]=-0xb83+0x6*0x4fa+0x1259*-0x1,this['_outlineCo'+'lorUniform'][-0x3*-0xcea+-0x905+0x1db7*-0x1]=-0x1*-0x1052+0x1*0x1817+-0x2869*0x1,this['_outlineCo'+'lorUniform'][0xa5+0xbff+-0x1*0xca1]=-0x23c3*0x1+0x10d*0x2+0x21aa):(We['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][0x607*0x1+0xf*-0x1bc+0x2b*0x77]=We['r'],this['_outlineCo'+'lorUniform'][-0xd34+-0xfb6*-0x2+-0x1237]=We['g'],this['_outlineCo'+'lorUniform'][-0x1159+-0xeb*-0x1d+-0x2*0x4a2]=We['b'],this['_outlineCo'+'lorUniform'][0x163+-0x1cfa+-0x1b9a*-0x1]=We['a']);}['_updateMat'+'erialShado'+'w'](){this['_symbolOut'+'lineParams']?(this['_shadowCol'+'orUniform'][-0xebe+-0x1df1+0x7b*0x5d]=0x67*-0x51+0x1*-0xf43+0x2fda,this['_shadowCol'+'orUniform'][-0xb39+0x1*0xdd7+-0x29d]=-0xd3*-0xd+0x216e+0x3*-0xeb7,this['_shadowCol'+'orUniform'][0x1*0x24d3+0x1c0d*0x1+0x2*-0x206f]=-0x4b1*-0x4+-0x1f12+0xc4e,this['_shadowCol'+'orUniform'][0x1*0x17cb+0xa10+-0x21d8]=-0x58+-0x1*0xf75+0xfcd):(We['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][0x17fe+0x1b*0x7+-0x1e7*0xd]=We['r'],this['_shadowCol'+'orUniform'][-0xa70*0x2+0x314*-0x1+0x1*0x17f5]=We['g'],this['_shadowCol'+'orUniform'][-0x1a3*0x13+0x25a8+-0x68d]=We['b'],this['_shadowCol'+'orUniform'][-0x14a7+-0x12e4+0x278e]=We['a']);}['_isWordBou'+'ndary'](_0x597a34){return jg['test'](_0x597a34);}['_isValidNe'+'xtChar'](_0x3f89c2){return _0x3f89c2!==null&&!ER['test'](_0x3f89c2);}['_isNextCJK'+'Boundary'](_0x38443b,_0xe8e0aa){return Yg['test'](_0x38443b)&&(jg['test'](_0xe8e0aa)||wR['test'](_0xe8e0aa));}['_isNextCJK'+'WholeWord'](_0x1ba065){return Yg['test'](_0x1ba065);}['_updateMes'+'hes'](){const _0x5eeacd=this['_font']['data'],_0x533168=this,_0x1f83e3=Math['min'](this['_minFontSi'+'ze'],this['_maxFontSi'+'ze']),_0x188c9e=this['_maxFontSi'+'ze'],_0x128e03=this['_shouldAut'+'oFit']();_0x128e03&&(this['_fontSize']=this['_maxFontSi'+'ze']);const _0x3b3b84=-0x26bb+0x34*-0x3b+0x32d7*0x1,_0xd38772=this['_symbols']['length'];let _0x8f73b2=0x24*0x4f+-0x2375+0x1859*0x1,_0xd312bf=-0x1*-0x20aa+0x1a6a+-0x4*0xec5,_0x428bc8=0x5*-0x73+0x30d+-0xce,_0x1333ac=0x3bf*0x1+0x1b*0x29+-0x812,_0x339402=0x16d3+-0xd*0x1bb+-0x53*0x1,_0x4e5707=0xf40+-0x9f*-0x1b+-0x2005,_0x260d42=0x20aa+-0x7*0x16d+-0x16af*0x1,_0x58addb=0x2*-0xc0b+-0x1c9f*0x1+0x1*0x34b5,_0x4737b2=0x10de+0x26d7+-0x37b5,_0x240d07=0x1a5f+-0x75f*0x1+-0x80*0x26,_0x446821=0x1d80+0x1fc6+-0x3d46;const _0x469898=Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])>=-0x19d5+-0xdea*-0x1+0x1*0xbeb+0.0001;let _0x3fafd4=this['_element']['calculated'+'Width'];(this['autoWidth']&&!_0x469898||!this['_wrapLines'])&&(_0x3fafd4=Number['POSITIVE_I'+'NFINITY']);let _0x504b20=0x6d*0x10+0x4*-0x455+0x2*0x542,_0x4698f7=0xe8c+0x1072+-0x1efe,_0x2ad015,_0x5993de,_0x315e15,_0x2f4333;function _0x7e657e(_0x15af57,_0x367d68,_0x4ff2c4){_0x533168['_lineWidth'+'s']['push'](Math['abs'](_0x4ff2c4));const _0x39c5d3=_0x58addb>_0x367d68?_0x367d68+(-0xdd7+0x2*-0x7e5+-0x2*-0xed1):_0x58addb,_0x4fb8b8=_0x58addb>_0x367d68?_0x58addb+(-0x145+-0x1*0x1d71+0x1eb7):_0x367d68,_0x2d9506=_0x15af57['slice'](_0x39c5d3,_0x4fb8b8);if(_0x446821){let _0x187840=_0x2d9506['length'];for(;_0x187840--&&_0x446821>-0xb3f*0x1+-0x17db+0x118d*0x2;)qg['test'](_0x2d9506[_0x187840])&&(_0x2d9506['splice'](_0x187840,0x9f1*-0x2+0xcb2+0x7*0x107),_0x446821--);}_0x533168['_lineConte'+'nts']['push'](_0x2d9506['join']('')),_0x8f73b2=0x1*0x1639+-0x1*0x1d8a+0x751,_0xd312bf-=_0x533168['_scaledLin'+'eHeight'],_0x339402++,_0x4737b2=0x16d3+-0x22e8+0xc15,_0x240d07=0x7*0x133+-0x1*-0x1b1+0x2*-0x50b,_0x446821=-0x1c2d+-0x6c5*-0x3+0x7de,_0x4e5707=0x812*0x2+0xd29+-0x241*0xd,_0x58addb=_0x367d68;}let _0x247334=!(0xa77+0x43*-0x2f+0xa*0x2f);for(;_0x247334;){_0x247334=!(-0x1c*-0x79+-0x5b*-0x63+-0x306c),_0x128e03?this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t']*this['_fontSize']/(this['_maxFontSi'+'ze']||-0x1*0x2406+0x3e0+0x2026+0.0001):this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t'],this['width']=-0x2e1*-0x1+-0x10*0x2c+-0x21,this['height']=-0x210c+-0x2d1+0x23dd,this['_lineWidth'+'s']=[],this['_lineConte'+'nts']=[],_0x8f73b2=0x14a1+-0x1661+0x4*0x70,_0xd312bf=-0x5*0xd6+0x450+0x11*-0x2,_0x428bc8=-0x5eb+0x2078+0x7*-0x3cb,_0x1333ac=0x73d+0xed*-0x7+-0xc2*0x1,_0x339402=0x124b+-0xc81+0x5c9*-0x1,_0x4e5707=-0xb*-0x1fc+-0xbad+-0xa27,_0x260d42=0x1da+-0x20ba+-0x130*-0x1a,_0x58addb=0xd8b*-0x2+0x18ef+0x13*0x1d,_0x4737b2=0x6b*0x1b+-0x2*-0x12da+-0x1*0x30fd,_0x240d07=-0x46f*0x1+-0x2*-0xd3f+-0x160f*0x1,_0x446821=0x2403+-0x49e+0x1*-0x1f65;const _0xa551d4=this['_fontSize']/_0x3b3b84;_0x504b20=this['_fontMinY']*_0xa551d4,_0x4698f7=this['_fontMaxY']*_0xa551d4;for(let _0x4d6347=0x172e+-0x33*0x13+-0x5*0x3e1;_0x4d6347<this['_meshInfo']['length'];_0x4d6347++)this['_meshInfo'][_0x4d6347]['quad']=0x1ee*-0xe+0x2*-0x100a+0x3b18,this['_meshInfo'][_0x4d6347]['lines']={};let _0x174266=0x217f+0x91a+-0x1aa*0x19,_0x4b745a=0xf96+-0x1d*0x106+0x1*0xf17,_0x298aa3=0x63+-0xcae+-0x1*-0xd4a,_0x196e22=0x29*-0xed+0x54f*-0x3+0x3*0x124b+(0x6*-0x43c+0x3*0xb2a+0xf*-0x79)*(0xabc+0x341+0x13*-0xaf),_0x1123c8=0x163*-0x7+0xc8e+-0x4f*0x6+(0xa09+-0x889+-0x81)*(-0x1358+0x7b*-0x33+0x2cd9),_0x3ae62f=-0x1d16+-0xc43+0x2959,_0xed1f7f=0x2330+0x12*0x73+-0x2a47+(-0xe*0xf2+-0x1*0x214c+0x2f87)*(-0x1cf*-0x1+-0x2*0x3dc+0x6e9),_0x2bd82a=0x1a6e+0xc73+0x1a*-0x175+(-0x4d*-0x41+-0x50*0x7c+0x1432)*(0x19*-0x17e+-0x69b+0x2ce9),_0x36c93f=-0x45*-0x60+-0x2a2*0x2+-0x141d+(-0x1206+0x1b73*0x1+-0x477*0x2)*(0x15*-0x35+-0x9e8+0xf41);for(let _0x2c67d4=0x17e3*0x1+-0xbea+0x1*-0xbf9;_0x2c67d4<_0xd38772;_0x2c67d4++){if(_0x2ad015=this['_symbols'][_0x2c67d4],_0x2f4333=_0x2c67d4+(-0x1510+-0x1ee4+-0x2f*-0x11b)>=_0xd38772?null:this['_symbols'][_0x2c67d4+(-0x1*-0x145d+0x9d9+-0x1e35)],qg['test'](_0x2ad015)){_0x446821++,(!this['_wrapLines']||this['_maxLines']<-0x1*-0x11e7+-0x1c5d*-0x1+-0x7e*0x5e||_0x339402<this['_maxLines'])&&(_0x7e657e(this['_symbols'],_0x2c67d4,_0x1333ac),_0x260d42=_0x2c67d4+(0xc5*0x27+-0x239c+-0x3*-0x1de),_0x58addb=_0x2c67d4+(0x80+0x1bbb+0x2*-0xe1d));continue;}let _0x12f986=0x2357+-0x1441+-0xf16*0x1,_0x5e5669=-0x25f2+0x1a8a*0x1+0x8*0x16d,_0x2b9fcd=-0x181a+0x6c9*-0x1+0x1ee3,_0x5f3b15=-0x20a6+0x8e2+-0x4c1*-0x5,_0x3c0240,_0x244683;if(_0x5993de=_0x5eeacd['chars'][_0x2ad015],!_0x5993de){if(bR['indexOf'](_0x2ad015)!==-(0x6a*-0x59+-0x1*-0xcf1+-0x17ea*-0x1))_0x5993de=AR;else{if(_0x5eeacd['chars']['\x20'])_0x5993de=_0x5eeacd['chars']['\x20'];else for(const _0x264a43 in _0x5eeacd['chars']){_0x5993de=_0x5eeacd['chars'][_0x264a43];break;}_0x5eeacd['missingCha'+'rs']||(_0x5eeacd['missingCha'+'rs']=new Set()),_0x5eeacd['missingCha'+'rs']['has'](_0x2ad015)||(console['warn']('Character\x20'+'\x27'+_0x2ad015+('\x27\x20is\x20missi'+'ng\x20from\x20th'+'e\x20font\x20')+_0x5eeacd['info']['face']),_0x5eeacd['missingCha'+'rs']['add'](_0x2ad015));}}if(_0x5993de){let _0x48ed0a=-0x7*-0xc5+0x2*-0x1136+-0x1d09*-0x1;if(_0x240d07>-0x700+-0x199d+0x209d){const _0x36b54f=this['_font']['data']['kerning'];if(_0x36b54f){const _0x4faff5=_0x36b54f[Hc['getCodePoi'+'nt'](this['_symbols'][_0x2c67d4-(-0x9f9+-0x2702*0x1+0x30fc)])||-0x9*0x194+0x21a+0xc1a];_0x4faff5&&(_0x48ed0a=_0x4faff5[Hc['getCodePoi'+'nt'](this['_symbols'][_0x2c67d4])||-0x14ef+0xea8+-0x1*-0x647]||-0x12*-0x29+-0x189*0x12+0x18c0);}}_0x3c0240=_0x5993de['scale']||0xb5a+-0x1927+0x49a*0x3,_0x244683=(_0x5993de['width']+_0x5993de['height'])/(0xd*0x21b+0x248c+0x3fe9*-0x1),_0x5f3b15=_0xa551d4*_0x244683/_0x3c0240,_0x2b9fcd=(_0x5993de['xadvance']+_0x48ed0a)*_0xa551d4,_0x12f986=(_0x5993de['xoffset']-_0x48ed0a)*_0xa551d4,_0x5e5669=_0x5993de['yoffset']*_0xa551d4;}else console['error']('Couldn\x27t\x20s'+'ubstitute\x20'+'missing\x20ch'+'aracter:\x20\x27'+_0x2ad015+'\x27');const _0x31b46f=TR['test'](_0x2ad015),_0x22edb1=_0x5993de&&_0x5993de['map']||-0x8*-0x18a+-0x37*-0x67+0x2271*-0x1,_0x50942c=-this['_font']['data']['info']['maps'][_0x22edb1]['width']/this['_font']['data']['info']['maps'][_0x22edb1]['height'],_0x565f7d=this['_meshInfo'][_0x22edb1],_0x4796e9=_0x8f73b2+this['_spacing']*_0x2b9fcd;if(_0x4796e9>_0x3fafd4&&_0x240d07>0x25*-0x47+0x1*0xdfb+0x1dc*-0x2&&!_0x31b46f&&(this['_maxLines']<-0x1ea+0x56*-0x28+0xf5a||_0x339402<this['_maxLines'])){if(_0x4737b2===-0x247e+-0x1dc0+0x423e)_0x260d42=_0x2c67d4,_0x7e657e(this['_symbols'],_0x2c67d4,_0x1333ac);else{const _0x177a41=Math['max'](_0x2c67d4-_0x260d42,-0x7*0x2b+-0x1fcf*-0x1+-0x1ea2);if(this['_meshInfo']['length']<=0x2685+-0xc1*-0x1a+0x15a*-0x2b)_0x565f7d['lines'][_0x339402-(-0x735+0x1972+-0x6*0x30a)]-=_0x177a41,_0x565f7d['quad']-=_0x177a41;else{const _0x34932f=_0x260d42,_0x1706c5=_0x2c67d4;for(let _0x366bde=_0x34932f;_0x366bde<_0x1706c5;_0x366bde++){const _0x6d1990=this['_symbols'][_0x366bde],_0x5be041=_0x5eeacd['chars'][_0x6d1990],_0x79caa9=this['_meshInfo'][_0x5be041&&_0x5be041['map']||0xf3e+0x1*-0x2023+0x10e5];_0x79caa9['lines'][_0x339402-(0x52d*0x3+-0x4d9+0x3*-0x38f)]-=-0xfe9+0x5*-0x5cb+0x2ce1,_0x79caa9['quad']-=0x22ed*0x1+-0x605+-0x7*0x421;}}_0x2c67d4-=_0x177a41+(0x35*-0x2+0x15b5+-0x154a*0x1),_0x7e657e(this['_symbols'],_0x260d42,_0x4e5707);continue;}}_0x315e15=_0x565f7d['quad'],_0x565f7d['lines'][_0x339402-(-0x1cf*-0x9+0x655*0x2+-0x1cf0)]=_0x315e15;let _0x597ff2=_0x8f73b2-_0x12f986,_0x4a7c68=_0x597ff2+_0x5f3b15;const _0x5333ec=_0xd312bf-_0x5e5669,_0x1167e3=_0x5333ec+_0x5f3b15;if(this['_rtl']){const _0x18b2eb=_0x5f3b15-_0x12f986-this['_spacing']*_0x2b9fcd-_0x12f986;_0x597ff2-=_0x18b2eb,_0x4a7c68-=_0x18b2eb;}_0x565f7d['positions'][_0x315e15*(-0x6*0x663+-0x26*-0x47+0x1bcc)*(-0xf77+-0x1*0x1f+0xf99)+(-0x2018+-0x1269+0x3281)]=_0x597ff2,_0x565f7d['positions'][_0x315e15*(-0x2*0x96b+-0x1028*0x1+0x2*0x1181)*(0x313*-0x1+-0x125*-0xd+-0xbcb)+(0x1f77+-0x2665+0x6ef)]=_0x5333ec,_0x565f7d['positions'][_0x315e15*(0x26*0x54+-0x44e+-0x826)*(-0x240d+-0x1*0x2507+0x4917)+(0x129a*0x2+0xe9*-0xc+-0x3*0x8c2)]=_0x428bc8,_0x565f7d['positions'][_0x315e15*(0xf3a+-0xc87+0x1*-0x2af)*(-0x1*-0xb22+0x9ad*-0x2+0x83b)+(-0x83c+-0x2146+0x2985)]=_0x4a7c68,_0x565f7d['positions'][_0x315e15*(0x1*0x1503+-0x1ec0+0x9c1)*(-0x15*0x156+-0xac3+0x7*0x58c)+(0x21f3+0x168d+0x1c3e*-0x2)]=_0x5333ec,_0x565f7d['positions'][_0x315e15*(0x1f43+-0x8ab*-0x3+-0x3940)*(0x17*-0x8b+-0xf+0xc8f)+(-0x577*0x3+-0x1*0x213+0x127d)]=_0x428bc8,_0x565f7d['positions'][_0x315e15*(0xefb+-0xf34*-0x1+-0x1e2b)*(0xca2+-0xc09+0x6*-0x19)+(0x1210+0x2268+-0xe*0x3bf)]=_0x4a7c68,_0x565f7d['positions'][_0x315e15*(0x1*0xb32+0x140a+0x1bc*-0x12)*(0x1eca+0x11b*0x1a+-0x13d7*0x3)+(-0x3*0xc9+0x1759+-0x14f7)]=_0x1167e3,_0x565f7d['positions'][_0x315e15*(0x675*-0x3+0x55b*0x3+-0x55*-0xa)*(-0x39*0x6a+0x22d*-0x1+0xce5*0x2)+(-0x8cb+-0x4*0x7eb+0x1*0x287f)]=_0x428bc8,_0x565f7d['positions'][_0x315e15*(-0x1c90+0x118*-0x7+0x3*0xc14)*(0x73f*-0x3+-0x8*0x5a+0x8*0x312)+(0x194e+-0x1392+-0x5b3)]=_0x597ff2,_0x565f7d['positions'][_0x315e15*(-0x9f5+0x4d*0x7a+0x1*-0x1ab9)*(0x1*-0x5d+-0xa12+0xa72)+(-0x1*0x6da+0xc0*0x2+0x5*0x114)]=_0x1167e3,_0x565f7d['positions'][_0x315e15*(-0xadb+0x5eb+-0x4f4*-0x1)*(0xa*0x1d6+-0x230f+-0x3e*-0x45)+(-0x10d*-0x22+0x1*-0x1b37+-0x878)]=_0x428bc8,this['width']=Math['max'](this['width'],_0x4796e9);let _0xf126de;if(this['_shouldAut'+'oFitWidth']()&&this['width']>this['_element']['calculated'+'Width']&&(_0xf126de=Math['floor'](this['_element']['fontSize']*this['_element']['calculated'+'Width']/(this['width']||0x22db*-0x1+-0xe3*0xd+0x2e62+0.0001)),_0xf126de=Y['clamp'](_0xf126de,_0x1f83e3,_0x188c9e),_0xf126de!==this['_element']['fontSize'])){this['_fontSize']=_0xf126de,_0x247334=!(-0x1*-0x1601+-0x2*-0xfae+-0x355d);break;}if(this['height']=Math['max'](this['height'],_0x4698f7-(_0xd312bf+_0x504b20)),this['_shouldAut'+'oFitHeight']()&&this['height']>this['_element']['calculated'+'Height']&&(_0xf126de=Y['clamp'](this['_fontSize']-(0x767*-0x4+0x8a3*-0x3+0x3786),_0x1f83e3,_0x188c9e),_0xf126de!==this['_element']['fontSize'])){this['_fontSize']=_0xf126de,_0x247334=!(0x8ad+0x1a04+0x6b*-0x53);break;}_0x8f73b2+=this['_spacing']*_0x2b9fcd,_0x31b46f||(_0x1333ac=_0x8f73b2),(this['_isWordBou'+'ndary'](_0x2ad015)||this['_isValidNe'+'xtChar'](_0x2f4333)&&(this['_isNextCJK'+'Boundary'](_0x2ad015,_0x2f4333)||this['_isNextCJK'+'WholeWord'](_0x2f4333)))&&(_0x4737b2++,_0x4e5707=_0x1333ac,_0x260d42=_0x2c67d4+(0x184d*0x1+-0x31c*0x4+-0xbdc)),_0x240d07++;const _0x48369a=this['_getUv'](_0x2ad015);if(_0x565f7d['uvs'][_0x315e15*(-0x3df+0xe8b*0x2+-0x1*0x1933)*(0x3*0x1fe+-0x105a+-0xa62*-0x1)+(0x1984+-0x4c*-0x46+-0x1726*0x2)]=_0x48369a[0x9*0x20b+0x189a+-0x2afd],_0x565f7d['uvs'][_0x315e15*(0x24c+-0x1*0x265b+0x2413)*(-0x3f*-0x3e+0x14b2+-0x23f2)+(-0x417+-0x1493+-0x18ab*-0x1)]=-0x1fb6+-0x70f+0xe*0x2c5-_0x48369a[0x23*0x8b+0x2511+-0x3811],_0x565f7d['uvs'][_0x315e15*(0x1210+0x8f6+-0x1b02)*(-0x15aa+0x819*0x4+-0x55c*0x2)+(-0x17*0xb5+-0xdb6*-0x1+-0x83*-0x5)]=_0x48369a[-0x49a+0x1764+0x8*-0x259],_0x565f7d['uvs'][_0x315e15*(0x2057+0x9d*0x4+-0x1*0x22c7)*(-0x121f+0x8*-0x22d+0x1*0x2389)+(-0x3e*-0x1f+0x25a5+-0x24*0x141)]=-0x21*0xed+-0x8b*0x1+0x13*0x1a3-_0x48369a[0x2439+0x1c*-0x2+-0x100*0x24],_0x565f7d['uvs'][_0x315e15*(0x6ef+0x21e*0xd+-0xb7b*0x3)*(0x1*0x24b2+-0x109*0x2+-0x1a6*0x15)+(-0xef+0x232f+-0x223c)]=_0x48369a[-0x96b*-0x4+-0x13ee+-0x11bc],_0x565f7d['uvs'][_0x315e15*(0x1*0x184a+0x1169*-0x2+0xa8c)*(-0x23d+0xba3+-0x964)+(0x257*0x3+0x1baa+-0x2*0x1155)]=0x125b+-0xef*-0x17+-0x27d3-_0x48369a[-0x1a*-0x10a+-0x1c6+-0x3*0x869],_0x565f7d['uvs'][_0x315e15*(0x16b1+0x2*-0x105a+0xa07)*(0x175a+0x5d8+-0xe98*0x2)+(-0x1cf6+-0x9db*-0x1+0x3b*0x53)]=_0x48369a[-0x1*-0x242d+-0x1*0xbcb+0x1862*-0x1],_0x565f7d['uvs'][_0x315e15*(0x982*-0x1+-0xbcb+0x1551)*(0xa46+0x8bc+-0x4c0*0x4)+(-0x15e+0x1*0x114+0x51)]=0x1024+0x1*-0x182d+0xe*0x93-_0x48369a[0x19*-0xdb+-0x409*-0x3+0x319*0x3],this['_symbolCol'+'ors']){const _0x4ea466=this['_symbolCol'+'ors'][_0x2c67d4]*(-0x9*0x2b1+0x10f*0x15+0x1b*0x13);_0x174266=this['_colorPale'+'tte'][_0x4ea466],_0x4b745a=this['_colorPale'+'tte'][_0x4ea466+(-0x1*-0x1f46+-0x903+-0x1642)],_0x298aa3=this['_colorPale'+'tte'][_0x4ea466+(-0x1af*0x2+0x9f3+-0x693)];}if(_0x565f7d['colors'][_0x315e15*(0x3*-0x19d+0x301*-0x6+0x16e1)*(-0x1*-0x18fc+0xa63*-0x1+-0x1*0xe95)+(0x79f+0x2*0xd64+-0x2267)]=_0x174266,_0x565f7d['colors'][_0x315e15*(-0x90*0x3c+0x1e4d+0x377)*(0x178+-0x208f*0x1+0x1*0x1f1b)+(-0x137*0x1+0x4*-0x105+0x6*0xe2)]=_0x4b745a,_0x565f7d['colors'][_0x315e15*(-0x1*-0xe52+-0x705*0x1+-0x749)*(-0x18e7+-0xb7c+0x2467*0x1)+(0x4*0x975+-0x1*-0x125+0xf*-0x299)]=_0x298aa3,_0x565f7d['colors'][_0x315e15*(0x1a4e+-0xf07+0xb43*-0x1)*(0x1*-0x14bc+0xe3*0x2c+-0x1244)+(0x2*-0x1b+-0x1333*-0x1+-0x2*0x97d)]=0x5*-0x4fd+0xc*-0x147+0x14a2*0x2,_0x565f7d['colors'][_0x315e15*(-0x2027+-0x16cb*-0x1+0x960)*(0xc1f+0x94c+-0x1*0x1567)+(-0x19da+0x1394+0x64a)]=_0x174266,_0x565f7d['colors'][_0x315e15*(0xc1d+0x29*0x7+-0xd38)*(0x2*-0x685+-0x1c47+0x2955)+(0x2dd*-0x7+0xb69*-0x2+0x2ae2)]=_0x4b745a,_0x565f7d['colors'][_0x315e15*(-0x3*0xa31+0x1486+-0x35b*-0x3)*(0xcef*0x1+0x17bf*0x1+-0x24aa)+(0x2bb*0x1+-0xe62+0xbad)]=_0x298aa3,_0x565f7d['colors'][_0x315e15*(-0xbcf+0x1d5b+-0x1188)*(0x1*0xac9+-0x1677+0x5d9*0x2)+(0xfb6+0x7d4*0x2+0x71*-0x47)]=-0xe02+-0x9*0x382+0x2e93,_0x565f7d['colors'][_0x315e15*(0x151b*0x1+-0x7d*-0x29+0x148e*-0x2)*(-0x15e1+0xf*-0x5f+0x1b76)+(-0xeba+0x1da*-0x8+-0x2*-0xec9)]=_0x174266,_0x565f7d['colors'][_0x315e15*(0x19f7*-0x1+0x2*-0x1352+-0x47*-0xe9)*(0x57b*0x6+-0x1*0x1c5d+-0x481)+(0x8a1+-0xd*0x201+0x1175)]=_0x4b745a,_0x565f7d['colors'][_0x315e15*(0x547+-0x1efd+0x1*0x19ba)*(-0x4b2*0x6+-0x1*-0x25a6+0xe*-0xad)+(-0x1*-0xc2f+0x1*0xc20+0x147*-0x13)]=_0x298aa3,_0x565f7d['colors'][_0x315e15*(0x1*-0xdf3+-0x1*-0xc7a+0x17d)*(0x639+0xb*-0x199+0xb5e)+(-0xfff+0x1af*0x12+-0xe44)]=0x1e83+0x24f7+0x5d*-0xb7,_0x565f7d['colors'][_0x315e15*(0xd*0x1e9+0x649+0x52f*-0x6)*(0x17a7+-0x104d*-0x1+0x30*-0xd5)+(0xee*-0x14+-0x1*0x1c2b+0x209*0x17)]=_0x174266,_0x565f7d['colors'][_0x315e15*(-0x1eea+-0x15d9+0x34c7)*(0x4aa+0x133*-0x1d+0x1*0x1e21)+(-0x1c96*-0x1+0x885+-0x250e)]=_0x4b745a,_0x565f7d['colors'][_0x315e15*(-0xd41+0x1*-0x14ef+0x2234)*(0x163b+0x123a*-0x2+0xe3d)+(0x2*0xeda+0xc02+0x2*-0x14d4)]=_0x298aa3,_0x565f7d['colors'][_0x315e15*(0x1e7+-0x22ea+0x13*0x1bd)*(0x1b97*0x1+0x258c+0x1*-0x411f)+(0x7*0x314+-0x1561*-0x1+0xe4a*-0x3)]=0xb7b+0x197+-0xc13,this['_symbolOut'+'lineParams']){const _0x263fac=this['_symbolOut'+'lineParams'][_0x2c67d4]*(-0x11c2+0x14c9+-0x23*0x16);_0x196e22=this['_outlinePa'+'lette'][_0x263fac]+this['_outlinePa'+'lette'][_0x263fac+(-0x8e5*-0x1+0xd*-0x2e7+-0x1cd7*-0x1)]*(0x8bb+-0x18a2+-0x1*-0x10e7),_0x1123c8=this['_outlinePa'+'lette'][_0x263fac+(0x2e8*-0xd+0x1e*-0xdf+0x3fec)]+this['_outlinePa'+'lette'][_0x263fac+(-0x12*0x152+-0x8ea*0x1+0x20b1)]*(0x211*0x5+0x697*0x3+-0x2e9*0xa),_0x3ae62f=this['_outlinePa'+'lette'][_0x263fac+(-0xc*-0xfa+-0x90f+-0x1*0x2a5)];}if(_0x565f7d['outlines'][_0x315e15*(-0x1d73*-0x1+-0x110b+-0xc64)*(0x21*0xf1+-0x221e+0x310)+(0x22f3+-0x1*-0x21cf+-0x44c2)]=_0x196e22,_0x565f7d['outlines'][_0x315e15*(0x2e*0x1d+0xa00+-0xf32)*(0x18d+0x21d6+-0x2360)+(0xc4*0x23+-0x1*-0xfe1+-0x2aac)]=_0x1123c8,_0x565f7d['outlines'][_0x315e15*(0x1*-0x4e7+0x1d79*0x1+0xe*-0x1c1)*(-0x1*0x107f+-0x11*-0x143+-0x17*0x37)+(0x136+0x8d6*0x4+-0x4*0x923)]=_0x3ae62f,_0x565f7d['outlines'][_0x315e15*(-0xe1+0x5*-0x40f+0x1530)*(0x2c2*-0x9+0x11*-0x64+-0x1f79*-0x1)+(-0x237*0x3+-0xfe4+0x168c)]=_0x196e22,_0x565f7d['outlines'][_0x315e15*(0x11e3+-0x692+-0x1*0xb4d)*(0x26cf+0x1a6d+0x4139*-0x1)+(-0x2f*0xb5+0x1*-0x16c9+0x16*0x28c)]=_0x1123c8,_0x565f7d['outlines'][_0x315e15*(0x1a79*-0x1+0x699+0x4*0x4f9)*(0x1*0x1513+-0x4*0x142+-0x1008)+(0x22d5+-0x1711+-0xbbf*0x1)]=_0x3ae62f,_0x565f7d['outlines'][_0x315e15*(-0x25a4+-0x4db+0x2a83)*(-0xf*-0x1d+0x1*0xb40+0x114*-0xc)+(0x6*-0x2b+-0x1458+0x2ac*0x8)]=_0x196e22,_0x565f7d['outlines'][_0x315e15*(-0x70a+0x68c*0x2+-0x2*0x305)*(-0x1b99+0x1*0x1d4b+-0x1af)+(0x792+-0x100d+0x882)]=_0x1123c8,_0x565f7d['outlines'][_0x315e15*(0x2484+0x5c9+-0x2a49)*(0x4e3*0x5+-0x77d+-0x33*0x55)+(-0xa83+-0x52*-0x12+-0x4c7*-0x1)]=_0x3ae62f,_0x565f7d['outlines'][_0x315e15*(0x14a5+0x1c79+-0x311a)*(0x1be6+0x1473+0x17*-0x21a)+(0x1536+0x1539+0x1533*-0x2)]=_0x196e22,_0x565f7d['outlines'][_0x315e15*(-0x2435+-0x255+-0x5*-0x7b6)*(0x1fef+0x1b*-0xeb+-0x723)+(0x147b+-0x1d21*0x1+0x8b0)]=_0x1123c8,_0x565f7d['outlines'][_0x315e15*(-0xf3b*-0x1+-0x15ff*0x1+-0xd9*-0x8)*(-0x2*0xf17+0x1162+0xccf)+(-0x19fb+-0x1*0x12cb+0x2cd1)]=_0x3ae62f,this['_symbolSha'+'dowParams']){const _0x4f833d=this['_symbolSha'+'dowParams'][_0x2c67d4]*(-0x108c+-0x1a23*-0x1+0x1f*-0x4f);_0xed1f7f=this['_shadowPal'+'ette'][_0x4f833d]+this['_shadowPal'+'ette'][_0x4f833d+(-0x1*-0x238b+-0x15f+-0x222b)]*(-0x1f7*0x1+-0x23a9+-0x3*-0xce0),_0x2bd82a=this['_shadowPal'+'ette'][_0x4f833d+(0x1c0d+0x814+-0x241f)]+this['_shadowPal'+'ette'][_0x4f833d+(0xf5+0x4*-0x1c9+0x632*0x1)]*(-0x1772+-0xc65+0x24d7),_0x36c93f=this['_shadowPal'+'ette'][_0x4f833d+(-0x1*-0x1be6+0x22e2+0x1f62*-0x2)]+(0x160b+-0x63d*0x6+0xfe2)+Math['round'](_0x50942c*this['_shadowPal'+'ette'][_0x4f833d+(0x1beb*-0x1+0x180f+0x1*0x3e1)]+(-0x1*0x704+0x3*-0x841+0x1*0x2046))*(-0xbc9+0x169c+-0x9d3);}_0x565f7d['shadows'][_0x315e15*(0xd*0x2ad+-0x1eda+-0x3eb)*(-0x1fa3+0x1*0x57a+0x2*0xd16)+(-0x70*0x2b+-0x223c+-0x1a86*-0x2)]=_0xed1f7f,_0x565f7d['shadows'][_0x315e15*(-0x11e7+0xc95+0x2*0x2ab)*(-0x6f7+0x1*-0x229d+0x27*0x111)+(-0x23da+0x8b4+0x1b27)]=_0x2bd82a,_0x565f7d['shadows'][_0x315e15*(-0x10*0xec+0x3e*-0x97+0x3356)*(0x261f+-0x20fc+0x8*-0xa4)+(-0x13*0x119+-0x234+0x49d*0x5)]=_0x36c93f,_0x565f7d['shadows'][_0x315e15*(-0x3*0xb6d+0x65*0x14+0x1*0x1a67)*(0x25d3+0x371*0x1+-0x2941)+(-0x2*-0x295+-0xdb8+-0x11*-0x81)]=_0xed1f7f,_0x565f7d['shadows'][_0x315e15*(0x1*-0xb03+0x13a2+-0x89b*0x1)*(-0x1007*0x1+-0x2522+-0x52*-0xa6)+(0x14bb+-0x1cc4+0x80d*0x1)]=_0x2bd82a,_0x565f7d['shadows'][_0x315e15*(0x7d6+-0x1bea+0x1*0x1418)*(-0x1f2b+-0x108+-0x101b*-0x2)+(-0x24d9+-0x25d6+0x1c*0x2ab)]=_0x36c93f,_0x565f7d['shadows'][_0x315e15*(-0x6*-0x15d+-0xf60+-0x736*-0x1)*(0x230+0x1745+-0x1972)+(-0x2554+0x161*0xc+0x2*0xa67)]=_0xed1f7f,_0x565f7d['shadows'][_0x315e15*(-0x1*0x23cf+-0x36e+0x2741)*(-0x82c*0x4+-0x154f+0x3602*0x1)+(0x8*-0x376+0x136d*0x2+-0xb23)]=_0x2bd82a,_0x565f7d['shadows'][_0x315e15*(-0x430+0x3d*0x69+-0x1*0x14d1)*(-0x1*0x5e+-0x1*-0xd45+-0x4b*0x2c)+(0x47*-0x7f+-0x24e6+-0x189*-0x2f)]=_0x36c93f,_0x565f7d['shadows'][_0x315e15*(-0x719*-0x1+-0x2394+-0x1c7f*-0x1)*(0x18d*0x3+0x1bdb*0x1+-0x207f)+(-0x9e*-0x2b+-0x1f26+0x1*0x4a5)]=_0xed1f7f,_0x565f7d['shadows'][_0x315e15*(-0x789+0x17ed+-0x1060)*(-0x8b*0x17+0x1e12+-0x1192)+(0x6*0x1c4+-0x3*-0x9c1+-0x1*0x27d1)]=_0x2bd82a,_0x565f7d['shadows'][_0x315e15*(-0x1d95+0x1e71*0x1+-0x3*0x48)*(0x247c+0x13d+-0xc92*0x3)+(-0xb*-0x1ab+0x15f2+-0x2840)]=_0x36c93f,_0x565f7d['quad']++;}_0x247334||_0x58addb<_0xd38772&&_0x7e657e(this['_symbols'],_0xd38772,_0x8f73b2);}this['_noResize']=!(0x23d4+0x11*-0x25+-0x215f),this['autoWidth']=this['_autoWidth'],this['autoHeight']=this['_autoHeigh'+'t'],this['_noResize']=!(-0xfd3*0x1+-0x77*-0x29+-0x33b);const _0xdf4817=this['_element']['pivot']['x'],_0x50c856=this['_element']['pivot']['y'],_0x41d691=this['_alignment']['x'],_0x129b61=this['_alignment']['y'];for(let _0x40ff70=0x209f+-0x70*-0x53+0x1*-0x44ef;_0x40ff70<this['_meshInfo']['length'];_0x40ff70++){if(this['_meshInfo'][_0x40ff70]['count']===-0x25ae+-0x15ea+0x3b98)continue;let _0x429d51=-0x73+0x1eb5+-0x1e42;for(const _0x4e4cba in this['_meshInfo'][_0x40ff70]['lines']){const _0x635564=this['_meshInfo'][_0x40ff70]['lines'][_0x4e4cba],_0x11505a=this['_lineWidth'+'s'][parseInt(_0x4e4cba,0x1fcc+-0x650+-0xcb9*0x2)],_0x3aa659=-_0xdf4817*this['_element']['calculated'+'Width']+_0x41d691*(this['_element']['calculated'+'Width']-_0x11505a)*(this['_rtl']?-(0x1b02+-0x12b5+-0x84c):-0x6fb*0x4+-0x2666+0x1*0x4253),_0x3c51f9=(-0x53*0xf+0x993+-0x4b5-_0x50c856)*this['_element']['calculated'+'Height']-_0x4698f7-(-0x1*-0x1a60+-0x5b*0x1d+-0x808*0x2-_0x129b61)*(this['_element']['calculated'+'Height']-this['height']);for(let _0x12ca75=_0x429d51;_0x12ca75<=_0x635564;_0x12ca75++)this['_meshInfo'][_0x40ff70]['positions'][_0x12ca75*(0xedd+0x5*-0x644+0x107b)*(-0x667*-0x3+-0x628*0x3+-0xba)]+=_0x3aa659,this['_meshInfo'][_0x40ff70]['positions'][_0x12ca75*(-0x53*-0x71+0xe09+-0x32a8)*(-0x11*0x207+0x1e7c+0x3fe)+(0x2629*0x1+-0x2*0x395+-0x1efc)]+=_0x3aa659,this['_meshInfo'][_0x40ff70]['positions'][_0x12ca75*(0x1*-0x1ae3+0x8*0x1d6+0xc37)*(-0x17b7+0x1*-0x13b2+-0x18d*-0x1c)+(-0x65f*-0x1+0xa49*0x3+-0x2534)]+=_0x3aa659,this['_meshInfo'][_0x40ff70]['positions'][_0x12ca75*(-0x2*-0x124d+-0x9ad*0x2+-0x113c)*(0x6a2+-0xf9e+0x7*0x149)+(0x5*-0x2dd+-0xeaf*0x1+0x1d09)]+=_0x3aa659,this['_meshInfo'][_0x40ff70]['positions'][_0x12ca75*(0x1*0x16bf+-0x1d7b+0x6c0)*(0x174c+0x1a12*0x1+-0x315b)+(-0x11*0x216+0x1f28+0x44f)]+=_0x3c51f9,this['_meshInfo'][_0x40ff70]['positions'][_0x12ca75*(0x3*0x98e+0x4*-0x7db+-0x163*-0x2)*(-0x749+-0x1*0xdba+0x1506)+(-0x355*-0x3+0x1b23+0x251e*-0x1)]+=_0x3c51f9,this['_meshInfo'][_0x40ff70]['positions'][_0x12ca75*(0x141d+0x1b4b+0x2a2*-0x12)*(-0x1783+-0x3*0x79d+0xd*0x391)+(-0x26c+-0x193a+-0x221*-0xd)]+=_0x3c51f9,this['_meshInfo'][_0x40ff70]['positions'][_0x12ca75*(0x14ed+-0x80e+-0xcdb)*(0x129e*-0x1+-0x2ab+0x2f*0x74)+(0x1fb7+-0x26e7+-0x73a*-0x1)]+=_0x3c51f9;if(this['_rtl'])for(let _0x515330=_0x429d51;_0x515330<=_0x635564;_0x515330++){const _0x51c406=_0x515330*(-0x3d*-0x1d+-0x1*-0x5b4+0x81*-0x19)*(-0x7c9*0x2+0x17c1+-0x82c);for(let _0xd969a0=0x659*-0x6+0x7f*0x22+-0x308*-0x7;_0xd969a0<0x4ca*0x8+0x249d+-0x4ae9;++_0xd969a0)this['_meshInfo'][_0x40ff70]['positions'][_0x51c406+_0xd969a0*(-0x1e25+0x1a12+0x416*0x1)]=this['_element']['calculated'+'Width']-this['_meshInfo'][_0x40ff70]['positions'][_0x51c406+_0xd969a0*(-0x19c+0x423+-0x284)]+_0x3aa659*(0xa9b+0x2*0x1043+-0x2b1f);const _0x25048c=this['_meshInfo'][_0x40ff70]['positions'][_0x51c406+(0x1d75+0x9*0x97+-0x22c1)],_0xf1fd5e=this['_meshInfo'][_0x40ff70]['positions'][_0x51c406+(-0x16b*-0x7+0x6a*-0x1d+0x21b)];this['_meshInfo'][_0x40ff70]['positions'][_0x51c406+(0xd6e+-0xbbb+-0x1b0)]=this['_meshInfo'][_0x40ff70]['positions'][_0x51c406+(-0xdd*0x15+0x2227+0xe*-0x125)],this['_meshInfo'][_0x40ff70]['positions'][_0x51c406+(0x10bc+-0x6f*0x2b+0x1ef)]=this['_meshInfo'][_0x40ff70]['positions'][_0x51c406+(0x2a*0x70+-0x1285+-0x17*-0x2)],this['_meshInfo'][_0x40ff70]['positions'][_0x51c406+(-0x8*0x448+0x1*-0x24b5+0xad*0x69)]=_0x25048c,this['_meshInfo'][_0x40ff70]['positions'][_0x51c406+(-0x1e3f+0x1*0xf5f+0xb*0x15b)]=_0xf1fd5e;}_0x429d51=_0x635564+(0x1362+-0xaaf+-0x8b2);}const _0xb6b8a3=this['_meshInfo'][_0x40ff70]['count']*(-0x1eb*0x4+0x5f1+0x1bf),_0x278f90=this['_meshInfo'][_0x40ff70]['quad']*(-0x2c*-0xe0+0x8f+0x5*-0x7cf),_0x1841de=new Uo(this['_meshInfo'][_0x40ff70]['meshInstan'+'ce']['mesh']['vertexBuff'+'er']);for(let _0x34c2d0=-0x372+-0x4f*-0x4+0x236*0x1;_0x34c2d0<_0xb6b8a3;_0x34c2d0++)_0x34c2d0>=_0x278f90?(_0x1841de['element'][Me]['set'](0x1d51*-0x1+-0x2142+0x3e93,-0xdb1+-0x805*-0x1+0x42*0x16,0xf46+0x201+-0x1147*0x1),_0x1841de['element'][is]['set'](0x1b7*0x14+0xade+-0x2d2a,0xce4+-0x671+0x7f*-0xd),_0x1841de['element'][Wt]['set'](-0x1c2a+0x72+-0x4*-0x6ee,0x2612+-0x80f*-0x1+-0x2e21*0x1,-0xfee+-0x1782+-0x8*-0x4ee,0x1a2+0x3*0x4b7+0x1*-0xfc7),_0x1841de['element'][Ko]['set'](-0xef1+-0xc11+-0x1*-0x1b02,0x247+-0x18d7*0x1+0x1690,0xeb4+-0x367*-0x9+-0x2d53,-0x154c+-0x25*-0x50+0x9bc),_0x1841de['element'][Zo]['set'](-0x690+-0x1608+0x1c98,0x273*-0xf+0x9b8+0x1b05,0x2361+-0x50f+-0x1*0x1e52,0x216d+-0x1*-0x102f+-0x19*0x1fc)):(_0x1841de['element'][Me]['set'](this['_meshInfo'][_0x40ff70]['positions'][_0x34c2d0*(0x1833+-0x1*0xe71+0x5*-0x1f3)+(-0x2365+0xbc5+0x17a0)],this['_meshInfo'][_0x40ff70]['positions'][_0x34c2d0*(0x83*0x4+-0x29*0xeb+-0x62*-0x5d)+(0xfad*0x2+0x2*-0xec8+-0x1c9)],this['_meshInfo'][_0x40ff70]['positions'][_0x34c2d0*(-0xb83+-0xfd9*-0x2+-0x50b*0x4)+(-0x1649+0x113*-0x19+-0x3126*-0x1)]),_0x1841de['element'][is]['set'](this['_meshInfo'][_0x40ff70]['uvs'][_0x34c2d0*(-0x1*0x335+-0x10eb*-0x1+-0xdb4)+(0x2c2+-0x2350+0x208e)],this['_meshInfo'][_0x40ff70]['uvs'][_0x34c2d0*(-0x9dd+-0x24a7*-0x1+-0x359*0x8)+(0xc22+-0xdf9+0x1d8)]),_0x1841de['element'][Wt]['set'](this['_meshInfo'][_0x40ff70]['colors'][_0x34c2d0*(-0x7ba*-0x1+0x13*-0x10f+0xc67)+(-0x3cd*-0x1+0x17ea+-0x37*0x81)],this['_meshInfo'][_0x40ff70]['colors'][_0x34c2d0*(-0x2532+-0x24d+-0x1*-0x2783)+(0x18de+-0x2386+0xaa9)],this['_meshInfo'][_0x40ff70]['colors'][_0x34c2d0*(0x1846+0x63*-0x65+0xecd)+(-0x1f62+0x71f*-0x1+0x1*0x2683)],this['_meshInfo'][_0x40ff70]['colors'][_0x34c2d0*(-0x1*0x205f+0x409*-0x5+-0x692*-0x8)+(-0x1750+0x80f+-0xf44*-0x1)]),_0x1841de['element'][Ko]['set'](this['_meshInfo'][_0x40ff70]['outlines'][_0x34c2d0*(-0x12cc+-0x1*-0x25f9+0x995*-0x2)+(-0x1*0x75a+-0xd0*-0x1c+-0x12*0xdb)],this['_meshInfo'][_0x40ff70]['outlines'][_0x34c2d0*(-0x1915+0x3b*0x37+-0xbb*-0x11)+(-0x11b8+-0x1*-0x2004+0x1*-0xe4b)],this['_meshInfo'][_0x40ff70]['outlines'][_0x34c2d0*(-0x1*-0x251+0xbc*0x13+-0x1042)+(0xda7+-0x49*-0x4+-0xec9)]),_0x1841de['element'][Zo]['set'](this['_meshInfo'][_0x40ff70]['shadows'][_0x34c2d0*(-0x1f47+0x5db*-0x2+0x2b00)+(0x12*0x33+0x2063+-0x23f9*0x1)],this['_meshInfo'][_0x40ff70]['shadows'][_0x34c2d0*(-0xeaa+0xbd9*-0x2+0x265f)+(-0x1125+0x16ae+0x3b*-0x18)],this['_meshInfo'][_0x40ff70]['shadows'][_0x34c2d0*(-0x1f74+-0x1fc4+-0x3f3b*-0x1)+(0x165a+0x1764+-0x2dbc)])),_0x1841de['next']();_0x1841de['end'](),this['_meshInfo'][_0x40ff70]['meshInstan'+'ce']['mesh']['aabb']['compute'](this['_meshInfo'][_0x40ff70]['positions']),this['_meshInfo'][_0x40ff70]['meshInstan'+'ce']['_aabbVer']=-(-0x1a70+0x370*-0xa+0x3cd1);}this['_aabbDirty']=!(-0xa2a*0x2+-0x1d8*0x7+0x213c);}['_onFontRen'+'der'](){this['font']=this['_font'];}['_onFontLoa'+'d'](_0x3e49a2){this['font']!==_0x3e49a2['resource']&&(this['font']=_0x3e49a2['resource']);}['_onFontCha'+'nge'](_0x2dd68a,_0x16b6a8,_0x46686,_0x9cae02){if(_0x16b6a8==='data'){this['_font']['data']=_0x46686;const _0x4b277d=this['_font']['data']['info']['maps']['length'];for(let _0x526e41=0x620*0x5+-0x9*0x399+-0x1*-0x1c1;_0x526e41<_0x4b277d;_0x526e41++){if(!this['_meshInfo'][_0x526e41])continue;const _0x4b83ec=this['_meshInfo'][_0x526e41]['meshInstan'+'ce'];_0x4b83ec&&(_0x4b83ec['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x4b83ec['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x4b83ec['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x526e41]['width']));}}}['_onFontRem'+'ove'](_0x1d9f62){}['_setTextur'+'eParams'](_0x3f5bcc,_0xffa54d){this['_font']&&(this['_font']['type']===Rh?(_0x3f5bcc['deletePara'+'meter']('texture_em'+'issiveMap'),_0x3f5bcc['deletePara'+'meter']('texture_op'+'acityMap'),_0x3f5bcc['setParamet'+'er']('texture_ms'+'dfMap',_0xffa54d)):this['_font']['type']===dR&&(_0x3f5bcc['deletePara'+'meter']('texture_ms'+'dfMap'),_0x3f5bcc['setParamet'+'er']('texture_em'+'issiveMap',_0xffa54d),_0x3f5bcc['setParamet'+'er']('texture_op'+'acityMap',_0xffa54d)));}['_getPxRang'+'e'](_0x43c5cb){const _0x360b7d=Object['keys'](this['_font']['data']['chars']);for(let _0x38a55e=-0x1312+-0x1*0x163d+0x294f;_0x38a55e<_0x360b7d['length'];_0x38a55e++){const _0x271670=this['_font']['data']['chars'][_0x360b7d[_0x38a55e]];if(_0x271670['range'])return(_0x271670['scale']||0x6*0x64+0xd7*0x1d+-0x1ab2)*_0x271670['range'];}return 0x1*0xa52+0x1a2c+-0x247c;}['_getUv'](_0x3ee581){const _0x135d90=this['_font']['data'];if(!_0x135d90['chars'][_0x3ee581])return _0x135d90['chars']['\x20']?this['_getUv']('\x20'):[0x4*0x40d+0x12e2+-0x6*0x5d9,0x22a1+-0x576+0x189*-0x13,-0x215e*0x1+0x6*0x390+0x2*0x5ff,-0x3de*0x8+0x56*0x6a+-0xd*0x5c];const _0x1411ac=_0x135d90['chars'][_0x3ee581]['map'],_0x34e1a0=_0x135d90['info']['maps'][_0x1411ac]['width'],_0x1d2144=_0x135d90['info']['maps'][_0x1411ac]['height'],_0x14d3de=_0x135d90['chars'][_0x3ee581]['x'],_0xde6529=_0x135d90['chars'][_0x3ee581]['y'],_0x6b2da3=_0x14d3de,_0x1bdf3c=_0xde6529,_0x635cda=_0x14d3de+_0x135d90['chars'][_0x3ee581]['width'],_0x3141d5=_0xde6529-_0x135d90['chars'][_0x3ee581]['height'],_0x1ff286=0x1bb*0x1+-0x2641+0x2487-_0x135d90['chars'][_0x3ee581]['height']/_0x1d2144;return[_0x6b2da3/_0x34e1a0,_0x1ff286-_0x1bdf3c/_0x1d2144,_0x635cda/_0x34e1a0,_0x1ff286-_0x3141d5/_0x1d2144];}['onEnable'](){this['_fontAsset']['autoLoad']=!(-0x1606+-0x3*-0x20e+0xfdc),this['_model']&&this['_element']['addModelTo'+'Layers'](this['_model']);}['onDisable'](){this['_fontAsset']['autoLoad']=!(0x289+-0x2545+0x22bd),this['_model']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']);}['_setStenci'+'l'](_0x253f07){if(this['_model']){const _0xe67566=this['_model']['meshInstan'+'ces'];for(let _0x2cb622=-0x2051*-0x1+0x30d+-0x235e;_0x2cb622<_0xe67566['length'];_0x2cb622++)_0xe67566[_0x2cb622]['stencilFro'+'nt']=_0x253f07,_0xe67566[_0x2cb622]['stencilBac'+'k']=_0x253f07;}}['_shouldAut'+'oFitWidth'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth'];}['_shouldAut'+'oFitHeight'](){return this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_shouldAut'+'oFit'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth']||this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_calculate'+'CharsPerTe'+'xture'](_0x295fed){const _0x28fba6={};_0x295fed===void(-0x2305+-0x2e8+0x25ed)&&(_0x295fed=this['_symbols']['length']);for(let _0x11fcb2=-0x1ba4+0x1c9d+-0xf9,_0x237664=_0x295fed;_0x11fcb2<_0x237664;_0x11fcb2++){const _0x1df7f6=this['_symbols'][_0x11fcb2];let _0x265835=this['_font']['data']['chars'][_0x1df7f6];_0x265835||(_0x265835=this['_font']['data']['chars']['\x20'],_0x265835||(_0x265835=this['_font']['data']['chars'][Object['keys'](this['_font']['data']['chars'])[0xf*-0x1b9+-0x1c26+-0x33*-0x10f]]));const _0x2dc859=_0x265835['map'];_0x28fba6[_0x2dc859]?_0x28fba6[_0x2dc859]++:_0x28fba6[_0x2dc859]=0x1f0d*0x1+0x188b*-0x1+-0x681;}return _0x28fba6;}['_updateRen'+'derRange'](){const _0xf4dcfb=this['_rangeStar'+'t']===0x776*0x1+-0xd*-0x2a2+-0x29b0?0x32b*-0x3+-0x1*0xf91+-0x1912*-0x1:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeStar'+'t']),_0x126a95=this['_rangeEnd']===0xc0*-0x25+-0xc06+0x27c6?0x1bbe+-0x1186+-0xa38:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeEnd']);for(let _0x1701df=0x558*0x3+0x9*-0x229+0x369,_0x5485e4=this['_meshInfo']['length'];_0x1701df<_0x5485e4;_0x1701df++){const _0x47d265=_0xf4dcfb[_0x1701df]||0x10b*0xb+0x3*0x5d+-0xc90,_0x2484ea=_0x126a95[_0x1701df]||0x1e28+0x145f+-0x1*0x3287,_0x442dd6=this['_meshInfo'][_0x1701df]['meshInstan'+'ce'];if(_0x442dd6){const _0x8c152f=_0x442dd6['mesh'];_0x8c152f&&(_0x8c152f['primitive'][-0x1e7*-0xd+0x1208+0x7b*-0x59]['base']=_0x47d265*(-0x1*0x1357+-0xfdd+-0xf*-0x259)*(0x1b*-0x3b+-0x1df*-0x3+0x9e),_0x8c152f['primitive'][-0x1*0x1609+-0x12f2+0xd*0x327]['count']=(_0x2484ea-_0x47d265)*(-0xe9*-0xe+-0x1e55+0x119a)*(0xc0d*-0x2+0x1f13*0x1+-0x6f7));}}}set['text'](_0x4d6b76){this['_i18nKey']=null;const _0x4d430f=_0x4d6b76!=null&&_0x4d6b76['toString']()||'';this['_setText'](_0x4d430f);}get['text'](){return this['_text'];}set['key'](_0x405ba2){const _0x1d2078=_0x405ba2!==null?_0x405ba2['toString']():null;this['_i18nKey']!==_0x1d2078&&(this['_i18nKey']=_0x1d2078,_0x1d2078?(this['_fontAsset']['disableLoc'+'alization']=!(-0x1*0x2333+-0x258e+-0x43*-0x116),this['_resetLoca'+'lizedText']()):this['_fontAsset']['disableLoc'+'alization']=!(0x2*-0x117+-0x1cd8+0x1f06));}get['key'](){return this['_i18nKey'];}set['color'](_0x421e66){const _0x39e2e3=_0x421e66['r'],_0x1db4c3=_0x421e66['g'],_0x4aa90e=_0x421e66['b'];if(this['_color']===_0x421e66&&console['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t'),!(this['_color']['r']===_0x39e2e3&&this['_color']['g']===_0x1db4c3&&this['_color']['b']===_0x4aa90e)&&(this['_color']['r']=_0x39e2e3,this['_color']['g']=_0x1db4c3,this['_color']['b']=_0x4aa90e,!!this['_model'])){if(this['_symbolCol'+'ors'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_color']),this['_colorUnif'+'orm'][0x11fc+0x1*-0x1d21+0xb25]=We['r'],this['_colorUnif'+'orm'][0x1384+-0x1e26+-0xaa3*-0x1]=We['g'],this['_colorUnif'+'orm'][-0x956*0x3+0x3*-0x878+0x356c]=We['b'];for(let _0x314ed5=-0x15e1+0x1048+0x599,_0xb513f4=this['_model']['meshInstan'+'ces']['length'];_0x314ed5<_0xb513f4;_0x314ed5++)this['_model']['meshInstan'+'ces'][_0x314ed5]['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}this['_element']&&this['_element']['fire']('set:color',this['_color']);}}get['color'](){return this['_color'];}set['opacity'](_0x570b0b){if(this['_color']['a']!==_0x570b0b&&(this['_color']['a']=_0x570b0b,this['_model'])){for(let _0x5b9230=-0x1b06+0x5cc+-0x8f*-0x26,_0xc29fd8=this['_model']['meshInstan'+'ces']['length'];_0x5b9230<_0xc29fd8;_0x5b9230++)this['_model']['meshInstan'+'ces'][_0x5b9230]['setParamet'+'er']('material_o'+'pacity',_0x570b0b);}this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x570b0b);}get['opacity'](){return this['_color']['a'];}set['lineHeight'](_0x498b8a){const _0x1151c4=this['_lineHeigh'+'t'];this['_lineHeigh'+'t']=_0x498b8a,this['_scaledLin'+'eHeight']=_0x498b8a,_0x1151c4!==_0x498b8a&&this['_font']&&this['_updateTex'+'t']();}get['lineHeight'](){return this['_lineHeigh'+'t'];}set['wrapLines'](_0xc773c0){const _0x5c6a31=this['_wrapLines'];this['_wrapLines']=_0xc773c0,_0x5c6a31!==_0xc773c0&&this['_font']&&this['_updateTex'+'t']();}get['wrapLines'](){return this['_wrapLines'];}get['lines'](){return this['_lineConte'+'nts'];}set['spacing'](_0x2755fa){const _0x3ccc1f=this['_spacing'];this['_spacing']=_0x2755fa,_0x3ccc1f!==_0x2755fa&&this['_font']&&this['_updateTex'+'t']();}get['spacing'](){return this['_spacing'];}set['fontSize'](_0x586339){const _0xdd9359=this['_fontSize'];this['_fontSize']=_0x586339,this['_originalF'+'ontSize']=_0x586339,_0xdd9359!==_0x586339&&this['_font']&&this['_updateTex'+'t']();}get['fontSize'](){return this['_fontSize'];}set['fontAsset'](_0x47788a){this['_fontAsset']['defaultAss'+'et']=_0x47788a;}get['fontAsset'](){return this['_fontAsset']['localizedA'+'sset'];}set['font'](_0x40e5ae){let _0x220d63;if(this['_font']&&(_0x220d63=this['_font']['type'],this['_font']['off']&&this['_font']['off']('render',this['_onFontRen'+'der'],this)),this['_font']=_0x40e5ae,this['_fontMinY']=-0x1670+0xd94+0x17a*0x6,this['_fontMaxY']=0x21f5+0x143a+-0x362f,!_0x40e5ae)return;const _0x80b24d=this['_font']['data'];for(const _0x48b81b in _0x80b24d['chars']){const _0xa27068=_0x80b24d['chars'][_0x48b81b];_0xa27068['bounds']&&(this['_fontMinY']=Math['min'](this['_fontMinY'],_0xa27068['bounds'][0x16e8+-0x366*-0x2+-0x1db3]),this['_fontMaxY']=Math['max'](this['_fontMaxY'],_0xa27068['bounds'][-0xa7b*-0x2+0x50d*0x1+-0x1a00]));}if(this['_font']['on']&&this['_font']['on']('render',this['_onFontRen'+'der'],this),this['_fontAsset']['localizedA'+'sset']&&this['_system']['app']['assets']['get'](this['_fontAsset']['localizedA'+'sset'])['resource']!==this['_font']&&(this['_fontAsset']['defaultAss'+'et']=null),_0x40e5ae['type']!==_0x220d63){const _0x85c93c=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x85c93c);}for(let _0x186014=-0x1f19+0xc*-0x2ef+0x424d,_0x2d394a=this['_font']['textures']['length'];_0x186014<_0x2d394a;_0x186014++)if(!this['_meshInfo'][_0x186014])this['_meshInfo'][_0x186014]=new vR();else{const _0x565fb2=this['_meshInfo'][_0x186014]['meshInstan'+'ce'];_0x565fb2&&(_0x565fb2['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x565fb2['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x565fb2['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x186014]['width']),this['_setTextur'+'eParams'](_0x565fb2,this['_font']['textures'][_0x186014]));}let _0x32a1c0=!(0xbd*0xc+-0xb*-0x19c+-0x1a8f);for(let _0x15d8fd=this['_font']['textures']['length'];_0x15d8fd<this['_meshInfo']['length'];_0x15d8fd++)this['_meshInfo'][_0x15d8fd]['meshInstan'+'ce']&&(_0x32a1c0||(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),_0x32a1c0=!(0x25f0+-0x20e*0xd+-0xb3a)),this['_removeMes'+'hInstance'](this['_meshInfo'][_0x15d8fd]['meshInstan'+'ce']));this['_meshInfo']['length']>this['_font']['textures']['length']&&(this['_meshInfo']['length']=this['_font']['textures']['length']),this['_updateTex'+'t']();}get['font'](){return this['_font'];}set['alignment'](_0x5f4c46){_0x5f4c46 instanceof J?this['_alignment']['set'](_0x5f4c46['x'],_0x5f4c46['y']):this['_alignment']['set'](_0x5f4c46[0x19be+-0x1ba5+-0x1*-0x1e7],_0x5f4c46[0x16f*-0x5+-0x1d*0x7d+0x1555*0x1]),this['_font']&&this['_updateTex'+'t']();}get['alignment'](){return this['_alignment'];}set['autoWidth'](_0x31c7c8){const _0x508e0a=this['_autoWidth'];if(this['_autoWidth']=_0x31c7c8,_0x31c7c8&&Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])<-0x1481+-0xcf+0x1550+0.0001&&(this['_element']['width']=this['width']),_0x508e0a!==_0x31c7c8){const _0x5e9268=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x5e9268!==this['_fontSize']&&(this['_fontSize']=_0x5e9268,this['_font']&&this['_updateTex'+'t']());}}get['autoWidth'](){return this['_autoWidth'];}set['autoHeight'](_0x4d5a04){const _0x217869=this['_autoHeigh'+'t'];if(this['_autoHeigh'+'t']=_0x4d5a04,_0x4d5a04&&Math['abs'](this['_element']['anchor']['y']-this['_element']['anchor']['w'])<0x3cd*0xa+-0x6ca+-0x1f38+0.0001&&(this['_element']['height']=this['height']),_0x217869!==_0x4d5a04){const _0x875cb6=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x875cb6!==this['_fontSize']&&(this['_fontSize']=_0x875cb6,this['_font']&&this['_updateTex'+'t']());}}get['autoHeight'](){return this['_autoHeigh'+'t'];}set['rtlReorder'](_0x2c4bca){this['_rtlReorde'+'r']!==_0x2c4bca&&(this['_rtlReorde'+'r']=_0x2c4bca,this['_font']&&this['_updateTex'+'t']());}get['rtlReorder'](){return this['_rtlReorde'+'r'];}set['unicodeCon'+'verter'](_0x5871bb){this['_unicodeCo'+'nverter']!==_0x5871bb&&(this['_unicodeCo'+'nverter']=_0x5871bb,this['_setText'](this['_text']));}get['unicodeCon'+'verter'](){return this['_unicodeCo'+'nverter'];}get['aabb'](){if(this['_aabbDirty']){let _0x4e8b20=!(-0xd5*0x24+-0x1*-0x1cb7+-0x1*-0x13e);for(let _0x48c152=0xc1f+-0xb07*0x1+-0x118;_0x48c152<this['_meshInfo']['length'];_0x48c152++)this['_meshInfo'][_0x48c152]['meshInstan'+'ce']&&(_0x4e8b20?this['_aabb']['add'](this['_meshInfo'][_0x48c152]['meshInstan'+'ce']['aabb']):(this['_aabb']['copy'](this['_meshInfo'][_0x48c152]['meshInstan'+'ce']['aabb']),_0x4e8b20=!(-0x17e1+-0x19a8*-0x1+-0x1c7)));this['_aabbDirty']=!(0xdb3+0xb*0x1bf+-0x20e7);}return this['_aabb'];}set['outlineCol'+'or'](_0x1f7c24){const _0x19a373=_0x1f7c24 instanceof ie?_0x1f7c24['r']:_0x1f7c24[-0x2366+0x4de+0x1e88*0x1],_0x4b16e9=_0x1f7c24 instanceof ie?_0x1f7c24['g']:_0x1f7c24[0x2709+-0x70f+-0x1ff9],_0x10d68f=_0x1f7c24 instanceof ie?_0x1f7c24['b']:_0x1f7c24[-0x3*0x1c1+0xa76+-0x3*0x1bb],_0x2f8111=_0x1f7c24 instanceof ie?_0x1f7c24['a']:_0x1f7c24[0x1*-0xc46+-0x18c7+0x2510];if(this['_outlineCo'+'lor']===_0x1f7c24&&console['warn']('Setting\x20el'+'ement.outl'+'ineColor\x20t'+'o\x20itself\x20w'+'ill\x20have\x20n'+'o\x20effect'),!(this['_outlineCo'+'lor']['r']===_0x19a373&&this['_outlineCo'+'lor']['g']===_0x4b16e9&&this['_outlineCo'+'lor']['b']===_0x10d68f&&this['_outlineCo'+'lor']['a']===_0x2f8111)&&(this['_outlineCo'+'lor']['r']=_0x19a373,this['_outlineCo'+'lor']['g']=_0x4b16e9,this['_outlineCo'+'lor']['b']=_0x10d68f,this['_outlineCo'+'lor']['a']=_0x2f8111,!!this['_model'])){if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][-0x1*-0x18cf+0x1cbb+0x1*-0x358a]=We['r'],this['_outlineCo'+'lorUniform'][-0x1d65+-0x71*0x28+0x2f0e]=We['g'],this['_outlineCo'+'lorUniform'][0x1d46*0x1+-0x1082+0x1*-0xcc2]=We['b'],this['_outlineCo'+'lorUniform'][-0x1019+0x1*-0x24aa+0x34c6]=We['a'];for(let _0x2b1ae3=-0xb81+-0x1*-0x119+0xa68,_0x58c826=this['_model']['meshInstan'+'ces']['length'];_0x2b1ae3<_0x58c826;_0x2b1ae3++)this['_model']['meshInstan'+'ces'][_0x2b1ae3]['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']);}this['_element']&&this['_element']['fire']('set:outlin'+'e',this['_color']);}}get['outlineCol'+'or'](){return this['_outlineCo'+'lor'];}set['outlineThi'+'ckness'](_0x405506){const _0x479765=this['_outlineTh'+'ickness'];if(this['_outlineTh'+'ickness']=_0x405506,_0x479765!==_0x405506&&this['_font']){if(!this['_model'])return;if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{for(let _0xfca0f1=0x32b*-0x9+-0x3*0xa31+0x3b16,_0x636bbd=this['_model']['meshInstan'+'ces']['length'];_0xfca0f1<_0x636bbd;_0xfca0f1++)this['_model']['meshInstan'+'ces'][_0xfca0f1]['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']);}}}get['outlineThi'+'ckness'](){return this['_outlineTh'+'ickness'];}set['shadowColo'+'r'](_0x55f903){const _0x18da66=_0x55f903 instanceof ie?_0x55f903['r']:_0x55f903[-0xf35+-0x14e*-0x9+0x377],_0xe2c2c0=_0x55f903 instanceof ie?_0x55f903['g']:_0x55f903[0x1*0x1c73+0x262e+-0x1*0x42a0],_0x8acaaf=_0x55f903 instanceof ie?_0x55f903['b']:_0x55f903[0x1a*-0x15f+0x5*0x7d+0x1*0x2137],_0x7a65ce=_0x55f903 instanceof ie?_0x55f903['a']:_0x55f903[-0x1*0x1c76+0x1e0d+-0x194];if(this['_shadowCol'+'or']===_0x55f903&&w['warn']('Setting\x20el'+'ement.shad'+'owColor\x20to'+'\x20itself\x20wi'+'ll\x20have\x20no'+'\x20effect'),!(this['_shadowCol'+'or']['r']===_0x18da66&&this['_shadowCol'+'or']['g']===_0xe2c2c0&&this['_shadowCol'+'or']['b']===_0x8acaaf&&this['_shadowCol'+'or']['a']===_0x7a65ce)&&(this['_shadowCol'+'or']['r']=_0x18da66,this['_shadowCol'+'or']['g']=_0xe2c2c0,this['_shadowCol'+'or']['b']=_0x8acaaf,this['_shadowCol'+'or']['a']=_0x7a65ce,!!this['_model'])){if(this['_symbolSha'+'dowParams'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][-0x39b*-0x9+-0x11b3*-0x1+0x2*-0x1913]=We['r'],this['_shadowCol'+'orUniform'][-0x2c8*-0x4+-0x198+-0x987]=We['g'],this['_shadowCol'+'orUniform'][-0x2596+0x49e+0xafe*0x3]=We['b'],this['_shadowCol'+'orUniform'][-0x1f02+-0x8*0x256+0x31b5*0x1]=We['a'];for(let _0x34fa96=-0x1dc7+0x24*-0xc5+0x397b,_0x43d6c2=this['_model']['meshInstan'+'ces']['length'];_0x34fa96<_0x43d6c2;_0x34fa96++)this['_model']['meshInstan'+'ces'][_0x34fa96]['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']);}}}get['shadowColo'+'r'](){return this['_shadowCol'+'or'];}set['shadowOffs'+'et'](_0x80455a){const _0x25c2c2=_0x80455a instanceof J?_0x80455a['x']:_0x80455a[0x676*-0x3+-0x1*-0x1f5f+0xbfd*-0x1],_0x2ecb05=_0x80455a instanceof J?_0x80455a['y']:_0x80455a[-0x123d+-0x5a*-0x4f+0xf4*-0xa];if(!(this['_shadowOff'+'set']['x']===_0x25c2c2&&this['_shadowOff'+'set']['y']===_0x2ecb05)&&(this['_shadowOff'+'set']['set'](_0x25c2c2,_0x2ecb05),this['_font']&&this['_model'])){if(this['_symbolSha'+'dowParams'])this['_updateTex'+'t']();else for(let _0x465438=0x1b99+-0x12ad+-0x8ec*0x1,_0xdff109=this['_model']['meshInstan'+'ces']['length'];_0x465438<_0xdff109;_0x465438++){const _0x5d1fb8=-this['_font']['data']['info']['maps'][_0x465438]['width']/this['_font']['data']['info']['maps'][_0x465438]['height'];this['_shadowOff'+'setUniform'][0xb3*-0x11+0x19e1+-0xdfe]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][0x9d*0x1+0x41*-0xd+-0xd*-0x35]=_0x5d1fb8*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'],this['_model']['meshInstan'+'ces'][_0x465438]['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']);}}}get['shadowOffs'+'et'](){return this['_shadowOff'+'set'];}set['minFontSiz'+'e'](_0x4845bd){this['_minFontSi'+'ze']!==_0x4845bd&&(this['_minFontSi'+'ze']=_0x4845bd,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['minFontSiz'+'e'](){return this['_minFontSi'+'ze'];}set['maxFontSiz'+'e'](_0xbbfa7e){this['_maxFontSi'+'ze']!==_0xbbfa7e&&(this['_maxFontSi'+'ze']=_0xbbfa7e,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['maxFontSiz'+'e'](){return this['_maxFontSi'+'ze'];}set['autoFitWid'+'th'](_0x2679ee){this['_autoFitWi'+'dth']!==_0x2679ee&&(this['_autoFitWi'+'dth']=_0x2679ee,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitWid'+'th'](){return this['_autoFitWi'+'dth'];}set['autoFitHei'+'ght'](_0x524e2e){this['_autoFitHe'+'ight']!==_0x524e2e&&(this['_autoFitHe'+'ight']=_0x524e2e,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitHei'+'ght'](){return this['_autoFitHe'+'ight'];}set['maxLines'](_0x2f8f73){this['_maxLines']!==_0x2f8f73&&(_0x2f8f73===null&&this['_maxLines']===-(0xd74+0x20d*0x11+0x305*-0x10)||(this['_maxLines']=_0x2f8f73===null?-(-0xef2+-0xd3b+0x1c2e):_0x2f8f73,this['font']&&this['_wrapLines']&&this['_updateTex'+'t']()));}get['maxLines'](){return this['_maxLines'];}set['enableMark'+'up'](_0x41cfac){if(_0x41cfac=!!_0x41cfac,this['_enableMar'+'kup']===_0x41cfac)return;this['_enableMar'+'kup']=_0x41cfac,this['font']&&this['_updateTex'+'t']();const _0x2bdd11=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x2bdd11);}get['enableMark'+'up'](){return this['_enableMar'+'kup'];}get['symbols'](){return this['_symbols'];}get['symbolColo'+'rs'](){return this['_symbolCol'+'ors']===null?null:this['_symbolCol'+'ors']['map'](function(_0x3efb32){return this['_colorPale'+'tte']['slice'](_0x3efb32*(-0x17d6*0x1+0x172e+0x1*0xab),_0x3efb32*(-0x23*0x1+-0xe33+0xe59)+(-0x23*-0x6b+0x1f51*0x1+-0x2def));},this);}get['symbolOutl'+'ineParams'](){return this['_symbolOut'+'lineParams']===null?null:this['_symbolOut'+'lineParams']['map'](function(_0x4b30b5){return this['_outlinePa'+'lette']['slice'](_0x4b30b5*(-0x289*-0x1+-0x47*0x2+-0x1f6),_0x4b30b5*(-0x1db6+0x2*0x1273+-0x72b)+(0x2374+-0x6*-0x68+-0x1*0x25df));},this);}get['symbolShad'+'owParams'](){return this['_symbolSha'+'dowParams']===null?null:this['_symbolSha'+'dowParams']['map'](function(_0x47dc04){return this['_shadowPal'+'ette']['slice'](_0x47dc04*(0x176*0x14+-0x611+-0x1721*0x1),_0x47dc04*(0xcff*0x3+-0x65*0x3+-0x9c*0x3e)+(0x1a81+0x54b*0x2+-0x3*0xc5b));},this);}get['rtl'](){return this['_rtl'];}set['rangeStart'](_0x517d6d){_0x517d6d=Math['max'](-0x31b*0xb+-0x19b0+0x3bd9,Math['min'](_0x517d6d,this['_symbols']['length'])),_0x517d6d!==this['_rangeStar'+'t']&&(this['_rangeStar'+'t']=_0x517d6d,this['_updateRen'+'derRange']());}get['rangeStart'](){return this['_rangeStar'+'t'];}set['rangeEnd'](_0x469cb3){_0x469cb3=Math['max'](this['_rangeStar'+'t'],Math['min'](_0x469cb3,this['_symbols']['length'])),_0x469cb3!==this['_rangeEnd']&&(this['_rangeEnd']=_0x469cb3,this['_updateRen'+'derRange']());}get['rangeEnd'](){return this['_rangeEnd'];}}const Ef=new D(),Zg=new te(),Pi=new D(),MR=new D(),ws=new te(),bc=new te(),Ac=new te(),$a=new te();class hs extends we{constructor(_0x3a4118,_0x1de194){super(_0x3a4118,_0x1de194),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_beingInit'+'ialized']=!(-0x38a+0x19bb+-0x1630),this['_anchor']=new re(),this['_localAnch'+'or']=new re(),this['_pivot']=new J(),this['_width']=this['_calculate'+'dWidth']=0x1c99+-0x4*-0x8f1+-0x403d,this['_height']=this['_calculate'+'dHeight']=0xf1*-0xd+0x5*-0x1fa+0x163f,this['_margin']=new re(-0x807+0xab1+0x155*-0x2,-0x262e+0x98b*0x3+0x98d,-(0x3*0x981+-0x159*0x1b+0x10*0x80),-(0x899+0x1c45*0x1+0x2*-0x125f)),this['_modelTran'+'sform']=new te(),this['_screenToW'+'orld']=new te(),this['_anchorTra'+'nsform']=new te(),this['_anchorDir'+'ty']=!(0x5e7*-0x5+-0x1553+0x5a6*0x9),this['_parentWor'+'ldTransfor'+'m']=new te(),this['_screenTra'+'nsform']=new te(),this['_screenCor'+'ners']=[new D(),new D(),new D(),new D()],this['_canvasCor'+'ners']=[new J(),new J(),new J(),new J()],this['_worldCorn'+'ers']=[new D(),new D(),new D(),new D()],this['_cornersDi'+'rty']=!(0x21f4+-0x5e*0x44+0x19*-0x5c),this['_canvasCor'+'nersDirty']=!(0xe5*-0x6+-0x13b8+0x1916*0x1),this['_worldCorn'+'ersDirty']=!(0x1200+0x2b*0x39+-0x1b93),this['entity']['on']('insert',this['_onInsert'],this),this['_patch'](),this['screen']=null,this['_type']=eh,this['_image']=null,this['_text']=null,this['_group']=null,this['_drawOrder']=-0x3a*0x1f+-0x1581+0x43*0x6d,this['_fitMode']=th,this['_useInput']=!(-0x1*0x103c+-0xffa+0x1*0x2037),this['_layers']=[Il],this['_addedMode'+'ls']=[],this['_batchGrou'+'pId']=-(0x503*-0x2+0x1*0x4df+0x528),this['_batchGrou'+'p']=null,this['_offsetRea'+'dAt']=-0xd*0x211+-0x7*0x2b2+-0x1fd*-0x17,this['_maskOffse'+'t']=0x3*-0xeb+0x67f*-0x1+0x940*0x1+0.5,this['_maskedBy']=null);}get['data'](){const _0x103235=this['system']['store'][this['entity']['getGuid']()];return _0x103235?_0x103235['data']:null;}set['enabled'](_0x4df3cd){const _0x34f1b7=this['data'],_0x5870cd=_0x34f1b7['enabled'];_0x34f1b7['enabled']=_0x4df3cd,this['fire']('set','enabled',_0x5870cd,_0x4df3cd);}get['enabled'](){return this['data']['enabled'];}get['_absLeft'](){return this['_localAnch'+'or']['x']+this['_margin']['x'];}get['_absRight'](){return this['_localAnch'+'or']['z']-this['_margin']['z'];}get['_absTop'](){return this['_localAnch'+'or']['w']-this['_margin']['w'];}get['_absBottom'](){return this['_localAnch'+'or']['y']+this['_margin']['y'];}get['_hasSplitA'+'nchorsX'](){return Math['abs'](this['_anchor']['x']-this['_anchor']['z'])>0x111a+0x1*0x81+-0x119b+0.001;}get['_hasSplitA'+'nchorsY'](){return Math['abs'](this['_anchor']['y']-this['_anchor']['w'])>-0x1e4b+0x21b8+-0x36d+0.001;}get['aabb'](){return this['_image']?this['_image']['aabb']:this['_text']?this['_text']['aabb']:null;}set['anchor'](_0x998835){_0x998835 instanceof re?this['_anchor']['copy'](_0x998835):this['_anchor']['set'](..._0x998835),!this['entity']['_parent']&&!this['screen']?this['_calculate'+'LocalAncho'+'rs']():this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['_anchorDir'+'ty']=!(-0x93*0x2f+-0x17*0x154+0x3989),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:anchor',this['_anchor']);}get['anchor'](){return this['_anchor'];}set['batchGroup'+'Id'](_0xf47fa2){var _0x522e7b,_0x4778dc;this['_batchGrou'+'pId']!==_0xf47fa2&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0xf*-0x8b+-0x2245+0x1*0x2a6a&&((_0x522e7b=this['system']['app']['batcher'])==null||_0x522e7b['remove'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0xf47fa2>=-0x24c6+-0x9*-0x1c5+0x14d9&&((_0x4778dc=this['system']['app']['batcher'])==null||_0x4778dc['insert'](St['ELEMENT'],_0xf47fa2,this['entity'])),_0xf47fa2<-0x1623+0x1*0x8d7+0x94*0x17&&this['_batchGrou'+'pId']>=-0x2550+-0xb06+0x182b*0x2&&this['enabled']&&this['entity']['enabled']&&(this['_image']&&this['_image']['_renderabl'+'e']['model']?this['addModelTo'+'Layers'](this['_image']['_renderabl'+'e']['model']):this['_text']&&this['_text']['_model']&&this['addModelTo'+'Layers'](this['_text']['_model'])),this['_batchGrou'+'pId']=_0xf47fa2);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['bottom'](_0x340d75){this['_margin']['y']=_0x340d75;const _0x2022cb=this['entity']['getLocalPo'+'sition'](),_0x4ed748=this['_absTop'],_0xe9520=this['_localAnch'+'or']['y']+_0x340d75;this['_setHeight'](_0x4ed748-_0xe9520),_0x2022cb['y']=_0x340d75+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x2022cb);}get['bottom'](){return this['_margin']['y'];}set['calculated'+'Width'](_0x9f6d8){this['_setCalcul'+'atedWidth'](_0x9f6d8,!(-0x90a+-0xd25*-0x2+0x114*-0x10));}get['calculated'+'Width'](){return this['_calculate'+'dWidth'];}set['calculated'+'Height'](_0x359bde){this['_setCalcul'+'atedHeight'](_0x359bde,!(-0x1e*-0x105+0x1b02+0x308*-0x13));}get['calculated'+'Height'](){return this['_calculate'+'dHeight'];}get['canvasCorn'+'ers'](){if(!this['_canvasCor'+'nersDirty']||!this['screen']||!this['screen']['screen']['screenSpac'+'e'])return this['_canvasCor'+'ners'];const _0x2eb48a=this['system']['app']['graphicsDe'+'vice'],_0x50fbdb=this['screenCorn'+'ers'],_0x312760=_0x2eb48a['canvas']['clientWidt'+'h']/_0x2eb48a['width'],_0x45f91e=_0x2eb48a['canvas']['clientHeig'+'ht']/_0x2eb48a['height'];for(let _0x3e2d23=-0xa7c+0x4f*0x65+-0x14af;_0x3e2d23<-0x20e7+-0x654+0x273f;_0x3e2d23++)this['_canvasCor'+'ners'][_0x3e2d23]['set'](_0x50fbdb[_0x3e2d23]['x']*_0x312760,(_0x2eb48a['height']-_0x50fbdb[_0x3e2d23]['y'])*_0x45f91e);return this['_canvasCor'+'nersDirty']=!(0x10f*0x8+0x598+-0xe0f),this['_canvasCor'+'ners'];}set['drawOrder'](_0x44268b){let _0x48000a=-0x2*-0xf0b+-0x7*-0x123+-0x260b;this['screen']&&(_0x48000a=this['screen']['screen']['priority']),_0x44268b>-0x6b8126+-0x130f85a+0x29c797f&&(w['warn']('Element.dr'+'awOrder\x20la'+'rger\x20than\x20'+'max\x20size\x20o'+'f:\x201677721'+'5'),_0x44268b=-0xa0c174*-0x2+-0x633ff7*0x5+0x1aebcea),this['_drawOrder']=(_0x48000a<<0x38a+0x4f2+-0x864)+_0x44268b,this['fire']('set:drawor'+'der',this['_drawOrder']);}get['drawOrder'](){return this['_drawOrder'];}set['height'](_0x4c5ab6){this['_height']=_0x4c5ab6,this['_hasSplitA'+'nchorsY']||this['_setCalcul'+'atedHeight'](_0x4c5ab6,!(-0x129a+-0x1*0xc15+0x1*0x1eaf)),this['fire']('set:height',this['_height']);}get['height'](){return this['_height'];}set['layers'](_0xcf58de){if(this['_addedMode'+'ls']['length'])for(let _0x40e84e=0x2433+-0x31*0x3d+-0x49*0x56;_0x40e84e<this['_layers']['length'];_0x40e84e++){const _0x387e07=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x40e84e]);if(_0x387e07){for(let _0x185cb0=0x22d6+0x100c+-0x32e2;_0x185cb0<this['_addedMode'+'ls']['length'];_0x185cb0++)_0x387e07['removeMesh'+'Instances'](this['_addedMode'+'ls'][_0x185cb0]['meshInstan'+'ces']);}}if(this['_layers']=_0xcf58de,!(!this['enabled']||!this['entity']['enabled']||!this['_addedMode'+'ls']['length']))for(let _0x503fb9=0xd*-0xd3+0x1*-0x1331+-0x9f8*-0x3;_0x503fb9<this['_layers']['length'];_0x503fb9++){const _0x2e34e4=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x503fb9]);if(_0x2e34e4){for(let _0x371f0c=0x165a+-0x4*0x272+0x2*-0x649;_0x371f0c<this['_addedMode'+'ls']['length'];_0x371f0c++)_0x2e34e4['addMeshIns'+'tances'](this['_addedMode'+'ls'][_0x371f0c]['meshInstan'+'ces']);}}}get['layers'](){return this['_layers'];}set['left'](_0x48537d){this['_margin']['x']=_0x48537d;const _0xfc1df8=this['entity']['getLocalPo'+'sition'](),_0x7dd524=this['_absRight'],_0x342b91=this['_localAnch'+'or']['x']+_0x48537d;this['_setWidth'](_0x7dd524-_0x342b91),_0xfc1df8['x']=_0x48537d+this['_calculate'+'dWidth']*this['_pivot']['x'],this['entity']['setLocalPo'+'sition'](_0xfc1df8);}get['left'](){return this['_margin']['x'];}set['margin'](_0x245b7f){this['_margin']['copy'](_0x245b7f),this['_calculate'+'Size'](!(-0x10f6+0x13a*0x7+-0x8*-0x10c),!(-0x110*-0x21+0x1126+-0x3436)),this['fire']('set:margin',this['_margin']);}get['margin'](){return this['_margin'];}get['maskedBy'](){return this['_maskedBy'];}set['pivot'](_0xc1cf58){const {pivot:_0x1571e5,margin:_0x53df19}=this,_0x27b62a=_0x1571e5['x'],_0xc52b62=_0x1571e5['y'];_0xc1cf58 instanceof J?_0x1571e5['copy'](_0xc1cf58):_0x1571e5['set'](..._0xc1cf58);const _0x522923=_0x53df19['x']+_0x53df19['z'],_0x57544b=_0x1571e5['x']-_0x27b62a;_0x53df19['x']+=_0x522923*_0x57544b,_0x53df19['z']-=_0x522923*_0x57544b;const _0x247f71=_0x53df19['y']+_0x53df19['w'],_0x3fd9b3=_0x1571e5['y']-_0xc52b62;_0x53df19['y']+=_0x247f71*_0x3fd9b3,_0x53df19['w']-=_0x247f71*_0x3fd9b3,this['_anchorDir'+'ty']=!(-0x1158+0x1525+-0x3cd),this['_cornersDi'+'rty']=!(-0x1*0x1d1b+0x83*0x3e+-0xb*0x3d),this['_worldCorn'+'ersDirty']=!(0x1f9b*0x1+-0x1365*0x1+-0xc36),this['_calculate'+'Size'](!(0x2387+-0x2342*-0x1+-0x46c8),!(0x1104+-0x1dcf+-0x1*-0xccc)),this['_flagChild'+'renAsDirty'](),this['fire']('set:pivot',_0x1571e5);}get['pivot'](){return this['_pivot'];}set['right'](_0x8e8a36){this['_margin']['z']=_0x8e8a36;const _0xfcd079=this['entity']['getLocalPo'+'sition'](),_0x127ceb=this['_absLeft'],_0x2ce8f3=this['_localAnch'+'or']['z']-_0x8e8a36;this['_setWidth'](_0x2ce8f3-_0x127ceb),_0xfcd079['x']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-_0x8e8a36-this['_calculate'+'dWidth']*(0x83e*-0x3+0x187b+0x40-this['_pivot']['x']),this['entity']['setLocalPo'+'sition'](_0xfcd079);}get['right'](){return this['_margin']['z'];}get['screenCorn'+'ers'](){if(!this['_cornersDi'+'rty']||!this['screen'])return this['_screenCor'+'ners'];const _0x2e4460=this['entity']['parent']&&this['entity']['parent']['element']&&this['entity']['parent']['element']['screenCorn'+'ers'][-0x1*0x1385+0x175*0x17+-0xdfe];this['_screenCor'+'ners'][0x697+-0x8b4+-0x21d*-0x1]['set'](this['_absLeft'],this['_absBottom'],0x1d6c+0x1cc6+-0x1d19*0x2),this['_screenCor'+'ners'][0x1928+0xdf0+-0x2717]['set'](this['_absRight'],this['_absBottom'],0x198*-0x12+0x101*-0xb+0x27bb),this['_screenCor'+'ners'][-0xb*-0x308+0x1a07+0x3b5d*-0x1]['set'](this['_absRight'],this['_absTop'],0xdff+-0x1c9*0xa+-0x7*-0x8d),this['_screenCor'+'ners'][0x263*0x1+0x1e63+-0x20c3*0x1]['set'](this['_absLeft'],this['_absTop'],0x9bb+0x26dc+-0x3097);const _0x3f8b0c=this['screen']['screen']['screenSpac'+'e'];for(let _0xe68a46=0x1367*0x1+0x8bb+-0x1c22;_0xe68a46<-0x4f*-0x33+-0xff9+-0x20*-0x2;_0xe68a46++)this['_screenTra'+'nsform']['transformP'+'oint'](this['_screenCor'+'ners'][_0xe68a46],this['_screenCor'+'ners'][_0xe68a46]),_0x3f8b0c&&this['_screenCor'+'ners'][_0xe68a46]['mulScalar'](this['screen']['screen']['scale']),_0x2e4460&&this['_screenCor'+'ners'][_0xe68a46]['add'](_0x2e4460);return this['_cornersDi'+'rty']=!(-0x4*0x6d7+-0x2*0x7eb+0x1*0x2b33),this['_canvasCor'+'nersDirty']=!(0x7*-0x7b+0x347+0x16),this['_worldCorn'+'ersDirty']=!(-0x66a*0x3+0xc7*-0x1b+0x283b*0x1),this['_screenCor'+'ners'];}get['textWidth'](){return this['_text']?this['_text']['width']:-0xcf*-0xf+0x2*0xd64+-0x26e9;}get['textHeight'](){return this['_text']?this['_text']['height']:-0x8*-0x3f7+-0x7ae*-0x5+-0x461e;}set['top'](_0x3bf39e){this['_margin']['w']=_0x3bf39e;const _0x136cb6=this['entity']['getLocalPo'+'sition'](),_0x2b1e49=this['_absBottom'],_0x51cbe4=this['_localAnch'+'or']['w']-_0x3bf39e;this['_setHeight'](_0x51cbe4-_0x2b1e49),_0x136cb6['y']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-_0x3bf39e-this['_calculate'+'dHeight']*(0xae2+0x1*0x115f+-0x1c40-this['_pivot']['y']),this['entity']['setLocalPo'+'sition'](_0x136cb6);}get['top'](){return this['_margin']['w'];}set['type'](_0x3cfc92){_0x3cfc92!==this['_type']&&(this['_type']=_0x3cfc92,this['_image']&&(this['_image']['destroy'](),this['_image']=null),this['_text']&&(this['_text']['destroy'](),this['_text']=null),_0x3cfc92===Cu?this['_image']=new cR(this):_0x3cfc92===jv&&(this['_text']=new PR(this)));}get['type'](){return this['_type'];}set['useInput'](_0x7d4736){this['_useInput']!==_0x7d4736&&(this['_useInput']=_0x7d4736,this['system']['app']['elementInp'+'ut']?_0x7d4736?this['enabled']&&this['entity']['enabled']&&this['system']['app']['elementInp'+'ut']['addElement'](this):this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this):this['_useInput']===!(0x9d3+0x1417+-0x1dea)&&w['warn']('Elements\x20w'+'ill\x20not\x20ge'+'t\x20any\x20inpu'+'t\x20events\x20b'+'ecause\x20thi'+'s.system.a'+'pp.element'+'Input\x20is\x20n'+'ot\x20created'),this['fire']('set:useInp'+'ut',_0x7d4736));}get['useInput'](){return this['_useInput'];}set['fitMode'](_0x89433){this['_fitMode']=_0x89433,this['_calculate'+'Size'](!(0xdb*0x17+0x1675+-0x2a22),!(-0xf0a+0x1abc+-0xbb2*0x1)),this['_image']&&this['_image']['refreshMes'+'h']();}get['fitMode'](){return this['_fitMode'];}set['width'](_0x58d124){this['_width']=_0x58d124,this['_hasSplitA'+'nchorsX']||this['_setCalcul'+'atedWidth'](_0x58d124,!(0x25b7+-0x1*-0x911+-0x2ec8)),this['fire']('set:width',this['_width']);}get['width'](){return this['_width'];}get['worldCorne'+'rs'](){if(!this['_worldCorn'+'ersDirty'])return this['_worldCorn'+'ers'];if(this['screen']){const _0x38ce50=this['screenCorn'+'ers'];if(!this['screen']['screen']['screenSpac'+'e']){ws['copy'](this['screen']['screen']['_screenMat'+'rix']),ws['data'][-0x1aa0+0x16da+-0x3d3*-0x1]=-ws['data'][0x1eec+0x56d*0x4+0x2b*-0x139],ws['mul2'](this['screen']['getWorldTr'+'ansform'](),ws);for(let _0x1c3f22=-0x3*0x5de+0x1cd6+-0x59e*0x2;_0x1c3f22<0x54b*-0x1+-0x1*-0x12a1+0xb*-0x136;_0x1c3f22++)ws['transformP'+'oint'](_0x38ce50[_0x1c3f22],this['_worldCorn'+'ers'][_0x1c3f22]);}}else{const _0x5e6a8d=this['entity']['getLocalPo'+'sition']();ws['setTransla'+'te'](-_0x5e6a8d['x'],-_0x5e6a8d['y'],-_0x5e6a8d['z']),bc['setTRS'](D['ZERO'],this['entity']['getLocalRo'+'tation'](),this['entity']['getLocalSc'+'ale']()),Ac['setTransla'+'te'](_0x5e6a8d['x'],_0x5e6a8d['y'],_0x5e6a8d['z']);const _0x59660f=this['entity']['parent']?this['entity']['parent']:this['entity'];$a['copy'](_0x59660f['getWorldTr'+'ansform']()),$a['mul'](Ac)['mul'](bc)['mul'](ws),Pi['set'](_0x5e6a8d['x']-this['pivot']['x']*this['calculated'+'Width'],_0x5e6a8d['y']-this['pivot']['y']*this['calculated'+'Height'],_0x5e6a8d['z']),$a['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][0x166b*0x1+-0x491*-0x2+0x1f8d*-0x1]),Pi['set'](_0x5e6a8d['x']+(-0x2107*0x1+-0x5d1*-0x5+0x3f3-this['pivot']['x'])*this['calculated'+'Width'],_0x5e6a8d['y']-this['pivot']['y']*this['calculated'+'Height'],_0x5e6a8d['z']),$a['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][0x12bf+0x5f3+-0x18b1]),Pi['set'](_0x5e6a8d['x']+(-0x23d8+0x95*-0x29+0x3bb6-this['pivot']['x'])*this['calculated'+'Width'],_0x5e6a8d['y']+(0x1d47+-0x5*0x68f+0x35*0x11-this['pivot']['y'])*this['calculated'+'Height'],_0x5e6a8d['z']),$a['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][0x3*-0x476+0x26f3+-0x198f]),Pi['set'](_0x5e6a8d['x']-this['pivot']['x']*this['calculated'+'Width'],_0x5e6a8d['y']+(0x2ea*-0x4+-0x1*0x16f7+0x22a0-this['pivot']['y'])*this['calculated'+'Height'],_0x5e6a8d['z']),$a['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][-0x1*-0xaea+-0x1f56+0x146f]);}return this['_worldCorn'+'ersDirty']=!(0x890+0x9*-0x4+0x1af*-0x5),this['_worldCorn'+'ers'];}set['fontSize'](_0x3a61c0){this['_setValue']('fontSize',_0x3a61c0);}get['fontSize'](){return this['_text']?this['_text']['fontSize']:null;}set['minFontSiz'+'e'](_0x50e11a){this['_setValue']('minFontSiz'+'e',_0x50e11a);}get['minFontSiz'+'e'](){return this['_text']?this['_text']['minFontSiz'+'e']:null;}set['maxFontSiz'+'e'](_0x5564ab){this['_setValue']('maxFontSiz'+'e',_0x5564ab);}get['maxFontSiz'+'e'](){return this['_text']?this['_text']['maxFontSiz'+'e']:null;}set['maxLines'](_0x21528e){this['_setValue']('maxLines',_0x21528e);}get['maxLines'](){return this['_text']?this['_text']['maxLines']:null;}set['autoFitWid'+'th'](_0x215edf){this['_setValue']('autoFitWid'+'th',_0x215edf);}get['autoFitWid'+'th'](){return this['_text']?this['_text']['autoFitWid'+'th']:null;}set['autoFitHei'+'ght'](_0x248d80){this['_setValue']('autoFitHei'+'ght',_0x248d80);}get['autoFitHei'+'ght'](){return this['_text']?this['_text']['autoFitHei'+'ght']:null;}set['color'](_0x5b452c){this['_setValue']('color',_0x5b452c);}get['color'](){return this['_text']?this['_text']['color']:this['_image']?this['_image']['color']:null;}set['font'](_0x3748a1){this['_setValue']('font',_0x3748a1);}get['font'](){return this['_text']?this['_text']['font']:null;}set['fontAsset'](_0x100b87){this['_setValue']('fontAsset',_0x100b87);}get['fontAsset'](){return this['_text']&&typeof this['_text']['fontAsset']=='number'?this['_text']['fontAsset']:null;}set['spacing'](_0x4c1fb1){this['_setValue']('spacing',_0x4c1fb1);}get['spacing'](){return this['_text']?this['_text']['spacing']:null;}set['lineHeight'](_0x3d64f6){this['_setValue']('lineHeight',_0x3d64f6);}get['lineHeight'](){return this['_text']?this['_text']['lineHeight']:null;}set['wrapLines'](_0x27d780){this['_setValue']('wrapLines',_0x27d780);}get['wrapLines'](){return this['_text']?this['_text']['wrapLines']:null;}set['lines'](_0x4c22e7){this['_setValue']('lines',_0x4c22e7);}get['lines'](){return this['_text']?this['_text']['lines']:null;}set['alignment'](_0x2b6192){this['_setValue']('alignment',_0x2b6192);}get['alignment'](){return this['_text']?this['_text']['alignment']:null;}set['autoWidth'](_0x58f417){this['_setValue']('autoWidth',_0x58f417);}get['autoWidth'](){return this['_text']?this['_text']['autoWidth']:null;}set['autoHeight'](_0x26a190){this['_setValue']('autoHeight',_0x26a190);}get['autoHeight'](){return this['_text']?this['_text']['autoHeight']:null;}set['rtlReorder'](_0x15a127){this['_setValue']('rtlReorder',_0x15a127);}get['rtlReorder'](){return this['_text']?this['_text']['rtlReorder']:null;}set['unicodeCon'+'verter'](_0x5246de){this['_setValue']('unicodeCon'+'verter',_0x5246de);}get['unicodeCon'+'verter'](){return this['_text']?this['_text']['unicodeCon'+'verter']:null;}set['text'](_0x4c0d7e){this['_setValue']('text',_0x4c0d7e);}get['text'](){return this['_text']?this['_text']['text']:null;}set['key'](_0x5a090b){this['_setValue']('key',_0x5a090b);}get['key'](){return this['_text']?this['_text']['key']:null;}set['texture'](_0xe8a269){this['_setValue']('texture',_0xe8a269);}get['texture'](){return this['_image']?this['_image']['texture']:null;}set['textureAss'+'et'](_0x2652cf){this['_setValue']('textureAss'+'et',_0x2652cf);}get['textureAss'+'et'](){return this['_image']?this['_image']['textureAss'+'et']:null;}set['material'](_0x4a4b33){this['_setValue']('material',_0x4a4b33);}get['material'](){return this['_image']?this['_image']['material']:null;}set['materialAs'+'set'](_0x2f3082){this['_setValue']('materialAs'+'set',_0x2f3082);}get['materialAs'+'set'](){return this['_image']?this['_image']['materialAs'+'set']:null;}set['sprite'](_0x31f63a){this['_setValue']('sprite',_0x31f63a);}get['sprite'](){return this['_image']?this['_image']['sprite']:null;}set['spriteAsse'+'t'](_0x5e56d5){this['_setValue']('spriteAsse'+'t',_0x5e56d5);}get['spriteAsse'+'t'](){return this['_image']?this['_image']['spriteAsse'+'t']:null;}set['spriteFram'+'e'](_0x5273a0){this['_setValue']('spriteFram'+'e',_0x5273a0);}get['spriteFram'+'e'](){return this['_image']?this['_image']['spriteFram'+'e']:null;}set['pixelsPerU'+'nit'](_0x30c49d){this['_setValue']('pixelsPerU'+'nit',_0x30c49d);}get['pixelsPerU'+'nit'](){return this['_image']?this['_image']['pixelsPerU'+'nit']:null;}set['opacity'](_0x31ebf5){this['_setValue']('opacity',_0x31ebf5);}get['opacity'](){return this['_text']?this['_text']['opacity']:this['_image']?this['_image']['opacity']:null;}set['rect'](_0x465b6c){this['_setValue']('rect',_0x465b6c);}get['rect'](){return this['_image']?this['_image']['rect']:null;}set['mask'](_0x1cfbc8){this['_setValue']('mask',_0x1cfbc8);}get['mask'](){return this['_image']?this['_image']['mask']:null;}set['outlineCol'+'or'](_0x586c88){this['_setValue']('outlineCol'+'or',_0x586c88);}get['outlineCol'+'or'](){return this['_text']?this['_text']['outlineCol'+'or']:null;}set['outlineThi'+'ckness'](_0x4b22b1){this['_setValue']('outlineThi'+'ckness',_0x4b22b1);}get['outlineThi'+'ckness'](){return this['_text']?this['_text']['outlineThi'+'ckness']:null;}set['shadowColo'+'r'](_0x22bd9d){this['_setValue']('shadowColo'+'r',_0x22bd9d);}get['shadowColo'+'r'](){return this['_text']?this['_text']['shadowColo'+'r']:null;}set['shadowOffs'+'et'](_0x1d20f2){this['_setValue']('shadowOffs'+'et',_0x1d20f2);}get['shadowOffs'+'et'](){return this['_text']?this['_text']['shadowOffs'+'et']:null;}set['enableMark'+'up'](_0x511a00){this['_setValue']('enableMark'+'up',_0x511a00);}get['enableMark'+'up'](){return this['_text']?this['_text']['enableMark'+'up']:null;}set['rangeStart'](_0x217e80){this['_setValue']('rangeStart',_0x217e80);}get['rangeStart'](){return this['_text']?this['_text']['rangeStart']:null;}set['rangeEnd'](_0x100d7a){this['_setValue']('rangeEnd',_0x100d7a);}get['rangeEnd'](){return this['_text']?this['_text']['rangeEnd']:null;}['_setValue'](_0x50af63,_0x51603e){this['_text']?(this['_text'][_0x50af63]!==_0x51603e&&this['_dirtyBatc'+'h'](),this['_text'][_0x50af63]=_0x51603e):this['_image']&&(this['_image'][_0x50af63]!==_0x51603e&&this['_dirtyBatc'+'h'](),this['_image'][_0x50af63]=_0x51603e);}['_patch'](){this['entity']['_sync']=this['_sync'],this['entity']['setPositio'+'n']=this['_setPositi'+'on'],this['entity']['setLocalPo'+'sition']=this['_setLocalP'+'osition'];}['_unpatch'](){this['entity']['_sync']=lt['prototype']['_sync'],this['entity']['setPositio'+'n']=lt['prototype']['setPositio'+'n'],this['entity']['setLocalPo'+'sition']=lt['prototype']['setLocalPo'+'sition'];}['_setPositi'+'on'](_0x1c4cfc,_0x3cb0e8,_0x2feb3e){if(!this['element']['screen']){lt['prototype']['setPositio'+'n']['call'](this,_0x1c4cfc,_0x3cb0e8,_0x2feb3e);return;}_0x1c4cfc instanceof D?Ef['copy'](_0x1c4cfc):Ef['set'](_0x1c4cfc,_0x3cb0e8,_0x2feb3e),this['getWorldTr'+'ansform'](),Zg['copy'](this['element']['_screenToW'+'orld'])['invert'](),Zg['transformP'+'oint'](Ef,this['localPosit'+'ion']),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_setLocalP'+'osition'](_0x471a0e,_0x43c975,_0x11e596){_0x471a0e instanceof D?this['localPosit'+'ion']['copy'](_0x471a0e):this['localPosit'+'ion']['set'](_0x471a0e,_0x43c975,_0x11e596);const _0x404946=this['element'],_0x3bae74=this['localPosit'+'ion'],_0x6b4469=_0x404946['_pivot'];_0x404946['_margin']['x']=_0x3bae74['x']-_0x404946['_calculate'+'dWidth']*_0x6b4469['x'],_0x404946['_margin']['z']=_0x404946['_localAnch'+'or']['z']-_0x404946['_localAnch'+'or']['x']-_0x404946['_calculate'+'dWidth']-_0x404946['_margin']['x'],_0x404946['_margin']['y']=_0x3bae74['y']-_0x404946['_calculate'+'dHeight']*_0x6b4469['y'],_0x404946['_margin']['w']=_0x404946['_localAnch'+'or']['w']-_0x404946['_localAnch'+'or']['y']-_0x404946['_calculate'+'dHeight']-_0x404946['_margin']['y'],this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_sync'](){const _0x27a488=this['element'],_0xa77b73=_0x27a488['screen'];if(_0xa77b73){if(_0x27a488['_anchorDir'+'ty']){let _0x464216=0xd69*-0x2+-0x1c*0xc7+0x819*0x6,_0x1dfceb=-0x89*-0x2+0x2b*-0xc5+0x7*0x493,_0x300f69=-0x48d+0x1f1d+-0x1a90,_0x5927ed=0xae*-0x24+0x6ef+0xa*0x1c1;if(this['_parent']&&this['_parent']['element'])_0x464216=this['_parent']['element']['calculated'+'Width'],_0x1dfceb=this['_parent']['element']['calculated'+'Height'],_0x300f69=this['_parent']['element']['pivot']['x'],_0x5927ed=this['_parent']['element']['pivot']['y'];else{const _0xca9c3b=_0xa77b73['screen']['resolution'];_0x464216=_0xca9c3b['x']/_0xa77b73['screen']['scale'],_0x1dfceb=_0xca9c3b['y']/_0xa77b73['screen']['scale'];}_0x27a488['_anchorTra'+'nsform']['setTransla'+'te'](_0x464216*(_0x27a488['anchor']['x']-_0x300f69),-(_0x1dfceb*(_0x5927ed-_0x27a488['anchor']['y'])),0x7c1+-0x2083+-0x18c2*-0x1),_0x27a488['_anchorDir'+'ty']=!(-0x1f5a+-0x3f5*0x7+0x3b0e),_0x27a488['_calculate'+'LocalAncho'+'rs']();}_0x27a488['_sizeDirty']&&_0x27a488['_calculate'+'Size'](!(0x13b5+0x1d8f+-0x3143),!(0x189b+0x1a9e+-0x3338));}if(this['_dirtyLoca'+'l']){this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']);const _0x36b4c8=this['localPosit'+'ion'],_0x53528f=_0x27a488['_pivot'];_0x27a488['_margin']['x']=_0x36b4c8['x']-_0x27a488['_calculate'+'dWidth']*_0x53528f['x'],_0x27a488['_margin']['z']=_0x27a488['_localAnch'+'or']['z']-_0x27a488['_localAnch'+'or']['x']-_0x27a488['_calculate'+'dWidth']-_0x27a488['_margin']['x'],_0x27a488['_margin']['y']=_0x36b4c8['y']-_0x27a488['_calculate'+'dHeight']*_0x53528f['y'],_0x27a488['_margin']['w']=_0x27a488['_localAnch'+'or']['w']-_0x27a488['_localAnch'+'or']['y']-_0x27a488['_calculate'+'dHeight']-_0x27a488['_margin']['y'],this['_dirtyLoca'+'l']=!(0x22bb*0x1+-0xd1*0x6+-0x1dd4);}if(!_0xa77b73){this['_dirtyWorl'+'d']&&(_0x27a488['_cornersDi'+'rty']=!(-0x919*-0x3+-0x16c7+-0x484),_0x27a488['_canvasCor'+'nersDirty']=!(0x95*-0x11+0x688+0x35d),_0x27a488['_worldCorn'+'ersDirty']=!(0x1d52+-0x10fc+-0xc56)),lt['prototype']['_sync']['call'](this);return;}if(this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['_parent']['element']?_0x27a488['_screenToW'+'orld']['mul2'](this['_parent']['element']['_modelTran'+'sform'],_0x27a488['_anchorTra'+'nsform']):_0x27a488['_screenToW'+'orld']['copy'](_0x27a488['_anchorTra'+'nsform']),_0x27a488['_modelTran'+'sform']['mul2'](_0x27a488['_screenToW'+'orld'],this['localTrans'+'form']),_0xa77b73){_0x27a488['_screenToW'+'orld']['mul2'](_0xa77b73['screen']['_screenMat'+'rix'],_0x27a488['_screenToW'+'orld']),_0xa77b73['screen']['screenSpac'+'e']||_0x27a488['_screenToW'+'orld']['mul2'](_0xa77b73['worldTrans'+'form'],_0x27a488['_screenToW'+'orld']),this['worldTrans'+'form']['mul2'](_0x27a488['_screenToW'+'orld'],this['localTrans'+'form']);const _0x3dd803=_0x27a488['_parentWor'+'ldTransfor'+'m'];_0x3dd803['setIdentit'+'y']();const _0x3a8c70=this['_parent'];_0x3a8c70&&_0x3a8c70['element']&&_0x3a8c70!==_0xa77b73&&(ws['setTRS'](D['ZERO'],_0x3a8c70['getLocalRo'+'tation'](),_0x3a8c70['getLocalSc'+'ale']()),_0x3dd803['mul2'](_0x3a8c70['element']['_parentWor'+'ldTransfor'+'m'],ws));const _0x13c5f4=Pi;_0x13c5f4['set'](-0x2ef*0x7+0x1ec1*-0x1+0x334a,-0x756+-0x21c3*-0x1+-0x1a6d,this['localPosit'+'ion']['z']);const _0x5dffed=MR;_0x5dffed['set'](_0x27a488['_absLeft']+_0x27a488['_pivot']['x']*_0x27a488['calculated'+'Width'],_0x27a488['_absBottom']+_0x27a488['_pivot']['y']*_0x27a488['calculated'+'Height'],-0x2117+0x1*-0x1c8f+0x3da6),ws['setTransla'+'te'](-_0x5dffed['x'],-_0x5dffed['y'],-_0x5dffed['z']),bc['setTRS'](_0x13c5f4,this['getLocalRo'+'tation'](),this['getLocalSc'+'ale']()),Ac['setTransla'+'te'](_0x5dffed['x'],_0x5dffed['y'],_0x5dffed['z']),_0x27a488['_screenTra'+'nsform']['mul2'](_0x27a488['_parentWor'+'ldTransfor'+'m'],Ac)['mul'](bc)['mul'](ws),_0x27a488['_cornersDi'+'rty']=!(-0xa31*-0x1+-0x1568+0xb37),_0x27a488['_canvasCor'+'nersDirty']=!(-0x12c1*0x1+-0x1*0x1c2b+0x2eec),_0x27a488['_worldCorn'+'ersDirty']=!(-0x5*-0x531+0x20fb+-0x170*0x29);}else this['worldTrans'+'form']['copy'](_0x27a488['_modelTran'+'sform']);}this['_dirtyWorl'+'d']=!(0x4*0x395+-0x1*-0x23f3+-0x3246);}}['_onInsert'](_0x52a1a2){const _0x56cb53=this['_parseUpTo'+'Screen']();this['entity']['_dirtifyWo'+'rld'](),this['_updateScr'+'een'](_0x56cb53['screen']),this['_dirtifyMa'+'sk']();}['_dirtifyMa'+'sk'](){let _0x3601a5=this['entity'];for(;_0x3601a5;){const _0xba33f9=_0x3601a5['parent'];if((_0xba33f9===null||_0xba33f9['screen'])&&_0x3601a5['element']){(!this['system']['_prerender']||!this['system']['_prerender']['length'])&&(this['system']['_prerender']=[],this['system']['app']['once']('prerender',this['_onPrerend'+'er'],this),w['trace'](Vs,'register\x20p'+'rerender'));const _0x2564b5=this['system']['_prerender']['indexOf'](this['entity']);_0x2564b5>=0x1e71+0x1b9b+-0xe83*0x4&&this['system']['_prerender']['splice'](_0x2564b5,-0x7f8+0x2491+-0x1c98),this['system']['_prerender']['indexOf'](_0x3601a5)<-0x7*-0x19a+-0x4*-0x17+-0x2*0x5c9&&this['system']['_prerender']['push'](_0x3601a5),w['trace'](Vs,'set\x20preren'+'der\x20root\x20t'+'o:\x20'+_0x3601a5['name']);}_0x3601a5=_0xba33f9;}}['_onPrerend'+'er'](){for(let _0x4151f6=0x8fe*-0x2+-0x1*-0x1f45+-0xd49;_0x4151f6<this['system']['_prerender']['length'];_0x4151f6++){const _0x33c3a5=this['system']['_prerender'][_0x4151f6];w['trace'](Vs,'prerender\x20'+'from:\x20'+_0x33c3a5['name']),_0x33c3a5['element']&&_0x33c3a5['element']['syncMask'](-0x22ee+-0x2634+0x4923);}this['system']['_prerender']['length']=-0x29*0x25+0x147*0x15+-0x14e6;}['_bindScree'+'n'](_0x56b5e0){_0x56b5e0['_bindEleme'+'nt'](this);}['_unbindScr'+'een'](_0x1b62b0){_0x1b62b0['_unbindEle'+'ment'](this);}['_updateScr'+'een'](_0x4c793b){this['screen']&&this['screen']!==_0x4c793b&&this['_unbindScr'+'een'](this['screen']['screen']);const _0x5b2f7d=this['screen'];this['screen']=_0x4c793b,this['screen']&&this['_bindScree'+'n'](this['screen']['screen']),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('set:screen',this['screen'],_0x5b2f7d),this['_anchorDir'+'ty']=!(0x1a15+0x1e+0x1a33*-0x1);const _0x3114a5=this['entity']['children'];for(let _0x368e56=0xca*0x2f+0x9a3*0x2+-0x385c,_0x51f0f2=_0x3114a5['length'];_0x368e56<_0x51f0f2;_0x368e56++)_0x3114a5[_0x368e56]['element']&&_0x3114a5[_0x368e56]['element']['_updateScr'+'een'](_0x4c793b);this['screen']&&this['screen']['screen']['syncDrawOr'+'der']();}['syncMask'](_0x4f8434){const _0x508881=this['_parseUpTo'+'Screen']();this['_updateMas'+'k'](_0x508881['mask'],_0x4f8434);}['_setMasked'+'By'](_0x2ec749){const _0x21b9b9=this['_image']||this['_text'];if(_0x2ec749){const _0x548480=_0x2ec749['element']['_image']['_maskRef'];w['trace'](Vs,'masking:\x20'+this['entity']['name']+'\x20with\x20'+_0x548480),_0x21b9b9==null||_0x21b9b9['_setStenci'+'l'](new pi({'ref':_0x548480,'func':dh})),this['_maskedBy']=_0x2ec749;}else w['trace'](Vs,'no\x20masking'+'\x20on:\x20'+this['entity']['name']),_0x21b9b9==null||_0x21b9b9['_setStenci'+'l'](null),this['_maskedBy']=null;}['_updateMas'+'k'](_0x178a54,_0x205710){var _0x22eeb1,_0x3fac57;if(_0x178a54){if(this['_setMasked'+'By'](_0x178a54),this['mask']){const _0x55c11d=_0x178a54['element']['_image']['_maskRef'],_0x377bb0=new pi({'ref':_0x55c11d,'func':dh,'zpass':Ux});this['_image']['_setStenci'+'l'](_0x377bb0),this['_image']['_maskRef']=_0x205710,_0x205710++,w['trace'](Vs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+(_0x377bb0['ref']+(-0x1f26+0x2*-0xeed+-0x61*-0xa1))),w['trace'](Vs,'depth++\x20to'+':\x20',_0x205710),_0x178a54=this['entity'];}const _0xe7918c=this['entity']['children'];for(let _0x164b05=-0x1c12+0xbf1+0x1*0x1021,_0x4ca6de=_0xe7918c['length'];_0x164b05<_0x4ca6de;_0x164b05++)(_0x22eeb1=_0xe7918c[_0x164b05]['element'])==null||_0x22eeb1['_updateMas'+'k'](_0x178a54,_0x205710);this['mask']&&_0x205710--;}else{if(this['_setMasked'+'By'](null),this['mask']){const _0x50f4d3=new pi({'ref':_0x205710,'func':Wi,'zpass':kx});this['_image']['_setStenci'+'l'](_0x50f4d3),this['_image']['_maskRef']=_0x205710,_0x205710++,w['trace'](Vs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+_0x50f4d3['ref']),w['trace'](Vs,'depth++\x20to'+':\x20',_0x205710),_0x178a54=this['entity'];}const _0x1b55ce=this['entity']['children'];for(let _0x26a763=-0x6f3*0x5+0x221c+0xa3,_0x344de6=_0x1b55ce['length'];_0x26a763<_0x344de6;_0x26a763++)(_0x3fac57=_0x1b55ce[_0x26a763]['element'])==null||_0x3fac57['_updateMas'+'k'](_0x178a54,_0x205710);this['mask']&&_0x205710--;}}['_parseUpTo'+'Screen'](){const _0x1e3e0d={'screen':null,'mask':null};let _0x17a9db=this['entity']['_parent'];for(;_0x17a9db&&!_0x17a9db['screen'];)_0x17a9db['element']&&_0x17a9db['element']['mask']&&(_0x1e3e0d['mask']||(_0x1e3e0d['mask']=_0x17a9db)),_0x17a9db=_0x17a9db['parent'];return _0x17a9db&&_0x17a9db['screen']&&(_0x1e3e0d['screen']=_0x17a9db),_0x1e3e0d;}['_onScreenR'+'esize'](_0x54159a){this['_anchorDir'+'ty']=!(-0x1b46*-0x1+-0x3*0x9e7+0x26f),this['_cornersDi'+'rty']=!(0x11c2+-0x7*0x28e+0x10*0x2),this['_worldCorn'+'ersDirty']=!(0x2549+0x26ec+0xae3*-0x7),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('screen:set'+':resolutio'+'n',_0x54159a);}['_onScreenS'+'paceChange'](){this['fire']('screen:set'+':screenspa'+'ce',this['screen']['screen']['screenSpac'+'e']);}['_onScreenR'+'emove'](){this['screen']&&(this['screen']['_destroyin'+'g']?this['screen']=null:this['_updateScr'+'een'](null));}['_calculate'+'LocalAncho'+'rs'](){let _0x5500af=-0xe8b+0x2*0xa49+-0xb5*0x3,_0x3fa7f9=0x2*-0xc5f+0x405+0x18a1;const _0x269faa=this['entity']['_parent'];if(_0x269faa&&_0x269faa['element'])_0x5500af=_0x269faa['element']['calculated'+'Width'],_0x3fa7f9=_0x269faa['element']['calculated'+'Height'];else{if(this['screen']){const _0x351aec=this['screen']['screen']['resolution'],_0x491ec0=this['screen']['screen']['scale'];_0x5500af=_0x351aec['x']/_0x491ec0,_0x3fa7f9=_0x351aec['y']/_0x491ec0;}}this['_localAnch'+'or']['set'](this['_anchor']['x']*_0x5500af,this['_anchor']['y']*_0x3fa7f9,this['_anchor']['z']*_0x5500af,this['_anchor']['w']*_0x3fa7f9);}['getOffsetP'+'osition'](_0x1de71c,_0xcb2d12){const _0x1310bf=this['entity']['getLocalPo'+'sition']()['clone']();return _0x1310bf['x']+=_0x1de71c,_0x1310bf['y']+=_0xcb2d12,this['_screenToW'+'orld']['transformP'+'oint'](_0x1310bf,_0x1310bf),_0x1310bf;}['onLayersCh'+'anged'](_0x41e052,_0x14d88e){this['addModelTo'+'Layers'](this['_image']?this['_image']['_renderabl'+'e']['model']:this['_text']['_model']),_0x41e052['off']('add',this['onLayerAdd'+'ed'],this),_0x41e052['off']('remove',this['onLayerRem'+'oved'],this),_0x14d88e['on']('add',this['onLayerAdd'+'ed'],this),_0x14d88e['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x44c9e2){this['layers']['indexOf'](_0x44c9e2['id'])<-0x102*0xd+-0x1*0x105f+0x1d79||(this['_image']?_0x44c9e2['addMeshIns'+'tances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x44c9e2['addMeshIns'+'tances'](this['_text']['_model']['meshInstan'+'ces']));}['onLayerRem'+'oved'](_0x51594d){this['layers']['indexOf'](_0x51594d['id'])<-0x4*-0x197+0x2*0xc83+-0x1f62||(this['_image']?_0x51594d['removeMesh'+'Instances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x51594d['removeMesh'+'Instances'](this['_text']['_model']['meshInstan'+'ces']));}['onEnable'](){var _0x1c7151;const _0x3503f3=this['system']['app']['scene'],_0x197a98=_0x3503f3['layers'];this['_image']&&this['_image']['onEnable'](),this['_text']&&this['_text']['onEnable'](),this['_group']&&this['_group']['onEnable'](),this['useInput']&&this['system']['app']['elementInp'+'ut']&&this['system']['app']['elementInp'+'ut']['addElement'](this),this['_evtLayers'+'Changed']=_0x3503f3['on']('set:layers',this['onLayersCh'+'anged'],this),_0x197a98&&(this['_evtLayerA'+'dded']=_0x197a98['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x197a98['on']('remove',this['onLayerRem'+'oved'],this)),this['_batchGrou'+'pId']>=0x1*0xbcb+0xa52*0x2+-0x206f&&((_0x1c7151=this['system']['app']['batcher'])==null||_0x1c7151['insert'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('enableelem'+'ent');}['onDisable'](){var _0x4a653c,_0x2dd815,_0x43cea2,_0x2ea274;const _0x3cfc68=this['system']['app']['scene']['layers'];(_0x4a653c=this['_evtLayers'+'Changed'])==null||_0x4a653c['off'](),this['_evtLayers'+'Changed']=null,_0x3cfc68&&((_0x2dd815=this['_evtLayerA'+'dded'])==null||_0x2dd815['off'](),this['_evtLayerA'+'dded']=null,(_0x43cea2=this['_evtLayerR'+'emoved'])==null||_0x43cea2['off'](),this['_evtLayerR'+'emoved']=null),this['_image']&&this['_image']['onDisable'](),this['_text']&&this['_text']['onDisable'](),this['_group']&&this['_group']['onDisable'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['_batchGrou'+'pId']>=0x1*0x595+0xb43*-0x1+0x5ae&&((_0x2ea274=this['system']['app']['batcher'])==null||_0x2ea274['remove'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('disableele'+'ment');}['onRemove'](){this['entity']['off']('insert',this['_onInsert'],this),this['_unpatch'](),this['_image']&&this['_image']['destroy'](),this['_text']&&this['_text']['destroy'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['screen']&&this['screen']['screen']&&(this['_unbindScr'+'een'](this['screen']['screen']),this['screen']['screen']['syncDrawOr'+'der']()),this['off']();}['_calculate'+'Size'](_0x25474c,_0x4890b7){if(!this['entity']['_parent']&&!this['screen'])return;this['_calculate'+'LocalAncho'+'rs']();const _0xb6822d=this['_absRight']-this['_absLeft'],_0x4368c3=this['_absTop']-this['_absBottom'];_0x25474c?this['_setWidth'](_0xb6822d):this['_setCalcul'+'atedWidth'](_0xb6822d,!(-0x9f5+-0x2028+0x2a1e)),_0x4890b7?this['_setHeight'](_0x4368c3):this['_setCalcul'+'atedHeight'](_0x4368c3,!(-0x21bb+-0x1285+0x3441));const _0xda0ad=this['entity']['getLocalPo'+'sition']();_0xda0ad['x']=this['_margin']['x']+this['_calculate'+'dWidth']*this['_pivot']['x'],_0xda0ad['y']=this['_margin']['y']+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0xda0ad),this['_sizeDirty']=!(-0x371+0x56+0x31c);}['_setWidth'](_0x130cfb){this['_width']=_0x130cfb,this['_setCalcul'+'atedWidth'](_0x130cfb,!(0xd66+0x1e12+0x2b77*-0x1)),this['fire']('set:width',this['_width']);}['_setHeight'](_0x44d281){this['_height']=_0x44d281,this['_setCalcul'+'atedHeight'](_0x44d281,!(0x35*0x2f+-0x69+0x3*-0x31b)),this['fire']('set:height',this['_height']);}['_setCalcul'+'atedWidth'](_0x1fcaa7,_0x582aea){if(!(Math['abs'](_0x1fcaa7-this['_calculate'+'dWidth'])<=0x1bf3+-0x1812+-0x3e1+0.0001)){if(this['_calculate'+'dWidth']=_0x1fcaa7,this['entity']['_dirtifyLo'+'cal'](),_0x582aea){const _0x2b46b3=this['entity']['getLocalPo'+'sition'](),_0x202f6e=this['_pivot'];this['_margin']['x']=_0x2b46b3['x']-this['_calculate'+'dWidth']*_0x202f6e['x'],this['_margin']['z']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-this['_calculate'+'dWidth']-this['_margin']['x'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedWidth',this['_calculate'+'dWidth']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_setCalcul'+'atedHeight'](_0x83be2,_0x5d7fc0){if(!(Math['abs'](_0x83be2-this['_calculate'+'dHeight'])<=-0x2*-0xb71+0xeb*0x2+-0x7*0x388+0.0001)){if(this['_calculate'+'dHeight']=_0x83be2,this['entity']['_dirtifyLo'+'cal'](),_0x5d7fc0){const _0x43a17d=this['entity']['getLocalPo'+'sition'](),_0x584529=this['_pivot'];this['_margin']['y']=_0x43a17d['y']-this['_calculate'+'dHeight']*_0x584529['y'],this['_margin']['w']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-this['_calculate'+'dHeight']-this['_margin']['y'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedHeight',this['_calculate'+'dHeight']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_flagChild'+'renAsDirty'](){const _0x1edab6=this['entity']['_children'];for(let _0x135396=0x226f+-0x1*-0x1c04+-0x3e73,_0x4d6f89=_0x1edab6['length'];_0x135396<_0x4d6f89;_0x135396++)_0x1edab6[_0x135396]['element']&&(_0x1edab6[_0x135396]['element']['_anchorDir'+'ty']=!(0x7*-0x303+0x1cdd+-0x7c8),_0x1edab6[_0x135396]['element']['_sizeDirty']=!(0xf45+-0x228b+0x1346));}['addModelTo'+'Layers'](_0x4bd85d){this['_addedMode'+'ls']['push'](_0x4bd85d);for(let _0x1fc1fa=0x1*0x233+-0x1d3*-0x13+-0x24dc;_0x1fc1fa<this['layers']['length'];_0x1fc1fa++){const _0x4eb27b=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x1fc1fa]);_0x4eb27b&&_0x4eb27b['addMeshIns'+'tances'](_0x4bd85d['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](_0x1cff0b){const _0x498e89=this['_addedMode'+'ls']['indexOf'](_0x1cff0b);_0x498e89>=-0x1c4a+-0x21*0x51+-0xf*-0x295&&this['_addedMode'+'ls']['splice'](_0x498e89,0x1c3b*-0x1+0x1*0x1ced+-0xb1);for(let _0x986c19=0x4a*-0x1a+0x5be+0x1c6;_0x986c19<this['layers']['length'];_0x986c19++){const _0x14279c=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x986c19]);_0x14279c&&_0x14279c['removeMesh'+'Instances'](_0x1cff0b['meshInstan'+'ces']);}}['getMaskOff'+'set'](){const _0x2185a1=this['system']['app']['frame'];this['_offsetRea'+'dAt']!==_0x2185a1&&(this['_maskOffse'+'t']=-0xfe*0x1+-0x2*-0xf6f+-0x1de0+0.5,this['_offsetRea'+'dAt']=_0x2185a1);const _0x144ac6=this['_maskOffse'+'t'];return this['_maskOffse'+'t']-=-0xc5d+-0xe7f*0x1+0x1adc+0.001,_0x144ac6;}['isVisibleF'+'orCamera'](_0x4c2c64){let _0x54719c,_0x2229ad,_0x1cbb23,_0x45a469;if(this['maskedBy']){const _0x591bfc=this['maskedBy']['element']['screenCorn'+'ers'];_0x54719c=Math['min'](Math['min'](_0x591bfc[0x5*0x78b+0x1016*0x2+-0x45e3]['x'],_0x591bfc[-0x16ca+0x11a8+0x523]['x']),Math['min'](_0x591bfc[0x3*-0x252+-0xb*0x2ef+0x273d]['x'],_0x591bfc[-0xc97*-0x2+0x210e+-0x3a39]['x'])),_0x2229ad=Math['max'](Math['max'](_0x591bfc[-0xbc*-0x34+0x21b2+-0x47e2]['x'],_0x591bfc[-0x1*0x703+-0xc0b+-0x130f*-0x1]['x']),Math['max'](_0x591bfc[0x1a84+0x155*-0x2+-0x17d8]['x'],_0x591bfc[-0xf7a+-0xd*0x28f+0x30c0]['x'])),_0x45a469=Math['min'](Math['min'](_0x591bfc[-0x297*0x2+-0x17f3+-0x1*-0x1d21]['y'],_0x591bfc[0x25*0xbf+-0x260e+0xa74]['y']),Math['min'](_0x591bfc[-0x11e4+-0x28d*-0x3+0xa3f*0x1]['y'],_0x591bfc[0x16cc*0x1+-0x88*0xb+0x1*-0x10f1]['y'])),_0x1cbb23=Math['max'](Math['max'](_0x591bfc[-0x7da+-0x5*0x265+-0x1*-0x13d3]['y'],_0x591bfc[0x128d*0x1+0x4d*0xa+-0x158e]['y']),Math['max'](_0x591bfc[0x1*0x2217+0x2291+-0x16e2*0x3]['y'],_0x591bfc[0xe*-0x296+0x791*0x3+-0x1*-0xd84]['y']));}else{const _0x306b49=this['system']['app']['graphicsDe'+'vice']['width'],_0x20c3cd=this['system']['app']['graphicsDe'+'vice']['height'],_0x393eb9=_0x4c2c64['_rect']['z']*_0x306b49,_0x4a5700=_0x4c2c64['_rect']['w']*_0x20c3cd;_0x54719c=_0x4c2c64['_rect']['x']*_0x306b49,_0x2229ad=_0x54719c+_0x393eb9,_0x1cbb23=(0x1*-0x19ff+-0x63d*-0x6+0xd1*-0xe-_0x4c2c64['_rect']['y'])*_0x20c3cd,_0x45a469=_0x1cbb23-_0x4a5700;}const _0x413270=this['screenCorn'+'ers'],_0x420121=Math['min'](Math['min'](_0x413270[0x25b8*0x1+0x67e*0x4+-0x3fb0]['x'],_0x413270[-0x1*0x1a5+0xc28+0xa82*-0x1]['x']),Math['min'](_0x413270[0x3f*0x63+0xd*0x107+-0x1*0x25b6]['x'],_0x413270[0x1c3c+-0x12bf+0x97a*-0x1]['x'])),_0x35b816=Math['max'](Math['max'](_0x413270[-0x2*-0xb56+-0x8c8*0x1+-0xde4]['x'],_0x413270[0x1c4*0x1+0x25b0+0x1*-0x2773]['x']),Math['max'](_0x413270[-0x1cfb+0x1243+-0x1*-0xaba]['x'],_0x413270[-0x94e+0xba5+-0x254*0x1]['x'])),_0x5d2859=Math['min'](Math['min'](_0x413270[-0x4*0x185+0x1142+-0xb2e*0x1]['y'],_0x413270[-0x3aa+0x1808*-0x1+-0x7*-0x3f5]['y']),Math['min'](_0x413270[-0x106d*-0x1+-0xacf+-0x59c]['y'],_0x413270[-0x3d8*0x8+-0x2647+0x450a]['y'])),_0x25b5d0=Math['max'](Math['max'](_0x413270[-0x7d*-0x3a+-0x1a39+0xb3*-0x3]['y'],_0x413270[0x2076*-0x1+-0x4*0x656+0x39cf]['y']),Math['max'](_0x413270[0x17f1+0x1*-0x86+-0xd*0x1cd]['y'],_0x413270[0x164f*0x1+-0x116c+-0x4e0]['y']));return!(_0x35b816<_0x54719c||_0x420121>_0x2229ad||_0x5d2859>_0x1cbb23||_0x25b5d0<_0x45a469);}['_isScreenS'+'pace'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['screenSpac'+'e']:!(-0x1*0x72b+0x13a*-0xb+0x14aa);}['_isScreenC'+'ulled'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['cull']:!(-0x24bc+-0x1*0x246a+-0x4927*-0x1);}['_dirtyBatc'+'h'](){var _0x27a969;this['batchGroup'+'Id']!==-(-0xcae+-0x3*0x1b1+0x11c2)&&((_0x27a969=this['system']['app']['batcher'])==null||_0x27a969['markGroupD'+'irty'](this['batchGroup'+'Id']));}}h(hs,'EVENT_MOUS'+'EDOWN','mousedown'),h(hs,'EVENT_MOUS'+'EUP','mouseup'),h(hs,'EVENT_MOUS'+'EENTER','mouseenter'),h(hs,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(hs,'EVENT_MOUS'+'EMOVE','mousemove'),h(hs,'EVENT_MOUS'+'EWHEEL','mousewheel'),h(hs,'EVENT_CLIC'+'K','click'),h(hs,'EVENT_TOUC'+'HSTART','touchstart'),h(hs,'EVENT_TOUC'+'HEND','touchend'),h(hs,'EVENT_TOUC'+'HMOVE','touchmove'),h(hs,'EVENT_TOUC'+'HCANCEL','touchcance'+'l');class DR{constructor(){this['enabled']=!(0x18ee*-0x1+-0x8*-0x1b6+0xb3e);}}const IR=['enabled'];class LR extends ct{constructor(_0x11f2bd){super(_0x11f2bd),this['id']='element',this['ComponentT'+'ype']=hs,this['DataType']=DR,this['schema']=IR,this['_unicodeCo'+'nverter']=null,this['_rtlReorde'+'r']=null,this['_defaultTe'+'xture']=new _e(_0x11f2bd['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':_s,'name':'element-sy'+'stem'});const _0x2de03d=this['_defaultTe'+'xture']['lock'](),_0x11beeb=new Uint8Array(-0x25*-0xbf+0x12f1*0x1+-0x1*0x2e88);_0x11beeb[-0xdd6+-0x7a4+0x157a]=0x679*0x6+0x185f+-0x3e36,_0x11beeb[-0x1e1b+0x1f48+-0x2*0x96]=-0x3a*-0x88+-0x7*0x523+0x624,_0x11beeb[0x1*-0x16af+0x1*-0x2329+-0x5c9*-0xa]=-0x1941+0x1ebf*-0x1+0x38ff*0x1,_0x11beeb[-0x1f3f+0x75a+0x17e8]=-0xda8+-0x1b73*0x1+0x11*0x27a,_0x2de03d['set'](_0x11beeb),this['_defaultTe'+'xture']['unlock'](),this['defaultIma'+'geMaterial']=null,this['defaultIma'+'ge9SlicedM'+'aterial']=null,this['defaultIma'+'ge9TiledMa'+'terial']=null,this['defaultIma'+'geMaskMate'+'rial']=null,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=null,this['defaultIma'+'ge9TiledMa'+'skMaterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=null,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=null,this['_defaultTe'+'xtMaterial'+'s']={},this['defaultIma'+'geMaterial'+'s']=[],this['on']('add',this['onAddCompo'+'nent'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['destroy'](){super['destroy'](),this['_defaultTe'+'xture']['destroy']();}['initialize'+'ComponentD'+'ata'](_0x4ecbcd,_0x34a035,_0x237179){_0x4ecbcd['_beingInit'+'ialized']=!(0xefa+-0xdca*0x1+-0x8*0x26),_0x34a035['anchor']!==void(0x1552+-0xc23+-0x92f)&&(_0x34a035['anchor']instanceof re?_0x4ecbcd['anchor']['copy'](_0x34a035['anchor']):_0x4ecbcd['anchor']['set'](_0x34a035['anchor'][0x11b4+-0x1d92+0xbde],_0x34a035['anchor'][0x1c2d+0xb96*0x1+0x7*-0x5ae],_0x34a035['anchor'][0x224b+-0x103c+-0x1*0x120d],_0x34a035['anchor'][-0x33*0x62+-0x2323*0x1+0xdab*0x4])),_0x34a035['pivot']!==void(-0x61f*0x6+0x23bf+0xfb)&&(_0x34a035['pivot']instanceof J?_0x4ecbcd['pivot']['copy'](_0x34a035['pivot']):_0x4ecbcd['pivot']['set'](_0x34a035['pivot'][0x52*-0x52+-0x31*-0xb+0x1829],_0x34a035['pivot'][0x5fb+0x1d9e+-0x2398]));const _0x5c3d37=Math['abs'](_0x4ecbcd['anchor']['x']-_0x4ecbcd['anchor']['z'])>-0x2275+-0xd53+0x2fc8+0.001,_0x159d74=Math['abs'](_0x4ecbcd['anchor']['y']-_0x4ecbcd['anchor']['w'])>0x122+0x1fe*0x12+0x3b3*-0xa+0.001;let _0x434627=!(-0x50c+-0x28*-0x2b+0x3d*-0x7),_0x55dadf;_0x34a035['margin']!==void(-0x25*0xc7+0x129d+0xa26)&&(_0x34a035['margin']instanceof re?_0x4ecbcd['margin']['copy'](_0x34a035['margin']):_0x4ecbcd['_margin']['set'](_0x34a035['margin'][-0x18*-0xe1+0x2354+0x2*-0x1c36],_0x34a035['margin'][-0x1713+-0xd*-0x189+0x31f],_0x34a035['margin'][0x779*-0x3+-0x5fd*0x5+0x345e],_0x34a035['margin'][-0x518+-0x9*-0x84+0x11*0x7]),_0x434627=!(-0x3*0xb1d+-0x8*-0x45b+-0x181)),_0x34a035['left']!==void(-0x9*-0x283+0x7*-0x211+-0x412*0x2)&&(_0x4ecbcd['_margin']['x']=_0x34a035['left'],_0x434627=!(0x60d+-0x3*-0x33f+-0xfca)),_0x34a035['bottom']!==void(-0xa35+-0x1d3*0x11+0x2938)&&(_0x4ecbcd['_margin']['y']=_0x34a035['bottom'],_0x434627=!(0x6a9+0x1*0x23ea+-0x615*0x7)),_0x34a035['right']!==void(0x100f+0x1456+-0x2465)&&(_0x4ecbcd['_margin']['z']=_0x34a035['right'],_0x434627=!(-0xf*0x95+0x2623+-0x1d68)),_0x34a035['top']!==void(-0x4da+-0x126a*0x1+0x1744)&&(_0x4ecbcd['_margin']['w']=_0x34a035['top'],_0x434627=!(-0xa13+0x61*-0x3d+0x2130)),_0x434627&&(_0x4ecbcd['margin']=_0x4ecbcd['_margin']);let _0x38d904=!(0x8e1*-0x1+-0x1e7f*-0x1+-0x159d);_0x34a035['width']!==void(0x1*0x9ad+0x1*0x49b+-0x392*0x4)&&!_0x5c3d37?_0x4ecbcd['width']=_0x34a035['width']:_0x5c3d37&&(_0x38d904=!(-0xf*0x24c+0x14cb*0x1+0xda9)),_0x34a035['height']!==void(-0x2ba+0x2*-0x1111+0x544*0x7)&&!_0x159d74?_0x4ecbcd['height']=_0x34a035['height']:_0x159d74&&(_0x38d904=!(0x4*-0x8ec+0x26dd+-0x32d)),_0x38d904&&(_0x4ecbcd['anchor']=_0x4ecbcd['anchor']),_0x34a035['enabled']!==void(-0x1722+0x1442+-0x4*-0xb8)&&(_0x4ecbcd['enabled']=_0x34a035['enabled']),_0x34a035['useInput']!==void(0x1*0x6bf+0x1*0x156e+-0x1*0x1c2d)&&(_0x4ecbcd['useInput']=_0x34a035['useInput']),_0x34a035['fitMode']!==void(-0x1190+0x31b*0x5+0x1*0x209)&&(_0x4ecbcd['fitMode']=_0x34a035['fitMode']),_0x4ecbcd['batchGroup'+'Id']=_0x34a035['batchGroup'+'Id']===void(-0x1f32+-0x1d9c+0x3cce)||_0x34a035['batchGroup'+'Id']===null?-(-0x1137+0x1b69+-0x1*0xa31):_0x34a035['batchGroup'+'Id'],_0x34a035['layers']&&Array['isArray'](_0x34a035['layers'])&&(_0x4ecbcd['layers']=_0x34a035['layers']['slice'](0x48e+0x1*0x1627+-0x1ab5)),_0x34a035['type']!==void(-0x1d54+-0x234e+0x40a2*0x1)&&(_0x4ecbcd['type']=_0x34a035['type']),_0x4ecbcd['type']===Cu?(_0x34a035['rect']!==void(-0xce3*0x3+0x2680+0x1*0x29)&&(_0x4ecbcd['rect']=_0x34a035['rect']),_0x34a035['color']!==void(-0x2273*0x1+0xe08+0x146b)&&(_0x55dadf=_0x34a035['color'],_0x55dadf instanceof ie||(_0x55dadf=new ie(_0x34a035['color'][0x1bb7+0x153*-0x1d+0xab0],_0x34a035['color'][0xdd2+-0x4*-0x17b+-0x13bd],_0x34a035['color'][0x1ece+0xc12+-0x2ade])),_0x4ecbcd['color']=_0x55dadf),_0x34a035['opacity']!==void(0xb*-0x10c+0xf3c*-0x1+0x20*0xd6)&&(_0x4ecbcd['opacity']=_0x34a035['opacity']),_0x34a035['textureAss'+'et']!==void(0x2bb*-0x1+0x194*0xd+0x1*-0x11c9)&&(_0x4ecbcd['textureAss'+'et']=_0x34a035['textureAss'+'et']),_0x34a035['texture']&&(_0x4ecbcd['texture']=_0x34a035['texture']),_0x34a035['spriteAsse'+'t']!==void(0x1*0x7d7+0x1*-0x1db6+-0x15df*-0x1)&&(_0x4ecbcd['spriteAsse'+'t']=_0x34a035['spriteAsse'+'t']),_0x34a035['sprite']&&(_0x4ecbcd['sprite']=_0x34a035['sprite']),_0x34a035['spriteFram'+'e']!==void(-0x3de+0x13d4+0x2*-0x7fb)&&(_0x4ecbcd['spriteFram'+'e']=_0x34a035['spriteFram'+'e']),_0x34a035['pixelsPerU'+'nit']!==void(0x1*-0x22d2+-0x9e1+0x2cb3)&&_0x34a035['pixelsPerU'+'nit']!==null&&(_0x4ecbcd['pixelsPerU'+'nit']=_0x34a035['pixelsPerU'+'nit']),_0x34a035['materialAs'+'set']!==void(-0x2611+-0x32b+0x293c)&&(_0x4ecbcd['materialAs'+'set']=_0x34a035['materialAs'+'set']),_0x34a035['material']&&(_0x4ecbcd['material']=_0x34a035['material']),_0x34a035['mask']!==void(0x23b*-0xe+0x1671+0x1*0x8c9)&&(_0x4ecbcd['mask']=_0x34a035['mask'])):_0x4ecbcd['type']===jv&&(_0x34a035['autoWidth']!==void(0xe97+0x1e*0x9d+-0x233*0xf)&&(_0x4ecbcd['autoWidth']=_0x34a035['autoWidth']),_0x34a035['autoHeight']!==void(0x263d+0xd58+-0x3395)&&(_0x4ecbcd['autoHeight']=_0x34a035['autoHeight']),_0x34a035['rtlReorder']!==void(0x230a+-0x71+-0x2299)&&(_0x4ecbcd['rtlReorder']=_0x34a035['rtlReorder']),_0x34a035['unicodeCon'+'verter']!==void(-0x13*-0xb7+0x1a*0x72+0x3*-0x863)&&(_0x4ecbcd['unicodeCon'+'verter']=_0x34a035['unicodeCon'+'verter']),_0x34a035['text']!==null&&_0x34a035['text']!==void(-0x744+0x1*-0x5d1+-0xc5*-0x11)?_0x4ecbcd['text']=_0x34a035['text']:_0x34a035['key']!==null&&_0x34a035['key']!==void(0x79*0x22+0x2661+0x107*-0x35)&&(_0x4ecbcd['key']=_0x34a035['key']),_0x34a035['color']!==void(-0x1a05+-0x1*0xd89+0x7a*0x53)&&(_0x55dadf=_0x34a035['color'],_0x55dadf instanceof ie||(_0x55dadf=new ie(_0x55dadf[0xab1+0x1243+-0x1cf4],_0x55dadf[-0x1c66+-0xc5c+0x28c3],_0x55dadf[-0x1225*0x2+0x11*0x2a+0x10c1*0x2])),_0x4ecbcd['color']=_0x55dadf),_0x34a035['opacity']!==void(0x66c+-0x177*0x14+-0x60*-0x3d)&&(_0x4ecbcd['opacity']=_0x34a035['opacity']),_0x34a035['spacing']!==void(-0x1ba5+-0x1be6+0x378b)&&(_0x4ecbcd['spacing']=_0x34a035['spacing']),_0x34a035['fontSize']!==void(-0x1bd3+0x61*0x3c+0x1*0x517)&&(_0x4ecbcd['fontSize']=_0x34a035['fontSize'],_0x34a035['lineHeight']||(_0x4ecbcd['lineHeight']=_0x34a035['fontSize'])),_0x34a035['lineHeight']!==void(0x1*0x106c+-0x1*0x1a7b+0x203*0x5)&&(_0x4ecbcd['lineHeight']=_0x34a035['lineHeight']),_0x34a035['maxLines']!==void(0x8*-0x5+0x18d8+-0x4f*0x50)&&(_0x4ecbcd['maxLines']=_0x34a035['maxLines']),_0x34a035['wrapLines']!==void(-0xea9+-0x37+0x1dc*0x8)&&(_0x4ecbcd['wrapLines']=_0x34a035['wrapLines']),_0x34a035['minFontSiz'+'e']!==void(0x15*0x91+0xe*0xd2+0x4ad*-0x5)&&(_0x4ecbcd['minFontSiz'+'e']=_0x34a035['minFontSiz'+'e']),_0x34a035['maxFontSiz'+'e']!==void(-0xfc1+0x15*-0x146+0x2a7f)&&(_0x4ecbcd['maxFontSiz'+'e']=_0x34a035['maxFontSiz'+'e']),_0x34a035['autoFitWid'+'th']&&(_0x4ecbcd['autoFitWid'+'th']=_0x34a035['autoFitWid'+'th']),_0x34a035['autoFitHei'+'ght']&&(_0x4ecbcd['autoFitHei'+'ght']=_0x34a035['autoFitHei'+'ght']),_0x34a035['fontAsset']!==void(0x3*0x4ff+0x2b*0xd5+-0x32c4)&&(_0x4ecbcd['fontAsset']=_0x34a035['fontAsset']),_0x34a035['font']!==void(0x38*0x59+0x18d4+-0x2c4c)&&(_0x4ecbcd['font']=_0x34a035['font']),_0x34a035['alignment']!==void(0x592*0x4+0x56*-0x3a+-0x2cc)&&(_0x4ecbcd['alignment']=_0x34a035['alignment']),_0x34a035['outlineCol'+'or']!==void(-0x1375+0x1305+0x70)&&(_0x4ecbcd['outlineCol'+'or']=_0x34a035['outlineCol'+'or']),_0x34a035['outlineThi'+'ckness']!==void(0x496*0x6+0x1*-0xb01+-0x1083)&&(_0x4ecbcd['outlineThi'+'ckness']=_0x34a035['outlineThi'+'ckness']),_0x34a035['shadowColo'+'r']!==void(0x680+0xa17*-0x1+0x397)&&(_0x4ecbcd['shadowColo'+'r']=_0x34a035['shadowColo'+'r']),_0x34a035['shadowOffs'+'et']!==void(-0x1c70+-0x1e9c+0x3b0c)&&(_0x4ecbcd['shadowOffs'+'et']=_0x34a035['shadowOffs'+'et']),_0x34a035['enableMark'+'up']!==void(-0x2707+-0xb1*0x2c+0x4573)&&(_0x4ecbcd['enableMark'+'up']=_0x34a035['enableMark'+'up']));const _0x18e9e8=_0x4ecbcd['_parseUpTo'+'Screen']();_0x18e9e8['screen']&&_0x4ecbcd['_updateScr'+'een'](_0x18e9e8['screen']),super['initialize'+'ComponentD'+'ata'](_0x4ecbcd,_0x34a035,_0x237179),_0x4ecbcd['_beingInit'+'ialized']=!(-0x1*0x1082+0x1242+-0x1bf),_0x4ecbcd['type']===Cu&&_0x4ecbcd['_image']['_meshDirty']&&_0x4ecbcd['_image']['_updateMes'+'h'](_0x4ecbcd['_image']['mesh']);}['onAddCompo'+'nent'](_0x405c2e,_0x9c724b){_0x405c2e['fire']('element:ad'+'d');}['onRemoveCo'+'mponent'](_0x1e646c,_0x27eb4c){_0x27eb4c['onRemove']();}['cloneCompo'+'nent'](_0x2ffc05,_0x2dba1d){const _0x134db7=_0x2ffc05['element'],_0x187427={'enabled':_0x134db7['enabled'],'width':_0x134db7['width'],'height':_0x134db7['height'],'anchor':_0x134db7['anchor']['clone'](),'pivot':_0x134db7['pivot']['clone'](),'margin':_0x134db7['margin']['clone'](),'alignment':_0x134db7['alignment']&&_0x134db7['alignment']['clone']()||_0x134db7['alignment'],'autoWidth':_0x134db7['autoWidth'],'autoHeight':_0x134db7['autoHeight'],'type':_0x134db7['type'],'rect':_0x134db7['rect']&&_0x134db7['rect']['clone']()||_0x134db7['rect'],'rtlReorder':_0x134db7['rtlReorder'],'unicodeConverter':_0x134db7['unicodeCon'+'verter'],'materialAsset':_0x134db7['materialAs'+'set'],'material':_0x134db7['material'],'color':_0x134db7['color']&&_0x134db7['color']['clone']()||_0x134db7['color'],'opacity':_0x134db7['opacity'],'textureAsset':_0x134db7['textureAss'+'et'],'texture':_0x134db7['texture'],'spriteAsset':_0x134db7['spriteAsse'+'t'],'sprite':_0x134db7['sprite'],'spriteFrame':_0x134db7['spriteFram'+'e'],'pixelsPerUnit':_0x134db7['pixelsPerU'+'nit'],'spacing':_0x134db7['spacing'],'lineHeight':_0x134db7['lineHeight'],'wrapLines':_0x134db7['wrapLines'],'layers':_0x134db7['layers'],'fontSize':_0x134db7['fontSize'],'minFontSize':_0x134db7['minFontSiz'+'e'],'maxFontSize':_0x134db7['maxFontSiz'+'e'],'autoFitWidth':_0x134db7['autoFitWid'+'th'],'autoFitHeight':_0x134db7['autoFitHei'+'ght'],'maxLines':_0x134db7['maxLines'],'fontAsset':_0x134db7['fontAsset'],'font':_0x134db7['font'],'useInput':_0x134db7['useInput'],'fitMode':_0x134db7['fitMode'],'batchGroupId':_0x134db7['batchGroup'+'Id'],'mask':_0x134db7['mask'],'outlineColor':_0x134db7['outlineCol'+'or']&&_0x134db7['outlineCol'+'or']['clone']()||_0x134db7['outlineCol'+'or'],'outlineThickness':_0x134db7['outlineThi'+'ckness'],'shadowColor':_0x134db7['shadowColo'+'r']&&_0x134db7['shadowColo'+'r']['clone']()||_0x134db7['shadowColo'+'r'],'shadowOffset':_0x134db7['shadowOffs'+'et']&&_0x134db7['shadowOffs'+'et']['clone']()||_0x134db7['shadowOffs'+'et'],'enableMarkup':_0x134db7['enableMark'+'up']};return _0x134db7['key']!==void(0x2104+0x449*0x3+-0x2ddf*0x1)&&_0x134db7['key']!==null?_0x187427['key']=_0x134db7['key']:_0x187427['text']=_0x134db7['text'],this['addCompone'+'nt'](_0x2dba1d,_0x187427);}['getTextEle'+'mentMateri'+'al'](_0x1b339f,_0x564064,_0x281e46){const _0x3b17c8=(_0x1b339f&&0x19e*0x15+0x127*-0x6+0x12d*-0x17)|(_0x564064&&-0x12c5+-0x154f+-0x5ba*-0x7)|(_0x281e46&&-0x25d*-0x3+0x711+-0xe24);let _0x3075f6=this['_defaultTe'+'xtMaterial'+'s'][_0x3b17c8];if(_0x3075f6)return _0x3075f6;let _0x46cce9='TextMateri'+'al';return _0x3075f6=new Ut(),_0x564064?(_0x3075f6['msdfMap']=this['_defaultTe'+'xture'],_0x3075f6['msdfTextAt'+'tribute']=_0x281e46,_0x3075f6['emissive']['set'](-0x2023+-0x57*0x60+-0x2*-0x2062,-0x19*-0x21+-0x3df*-0xa+-0x29ee,-0x388+0x78*0x46+-0x1d47)):(_0x46cce9='Bitmap'+_0x46cce9,_0x3075f6['emissive']['set'](0x5*-0x48b+0xf52+0x3b3*0x2,-0x84e+0x2*0x4ca+-0xd*0x19,-0x622*0x2+0x22f2+0x489*-0x5),_0x3075f6['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x3075f6['opacityMap']=this['_defaultTe'+'xture'],_0x3075f6['opacityMap'+'Channel']='a'),_0x1b339f&&(_0x46cce9='ScreenSpac'+'e'+_0x46cce9,_0x3075f6['depthTest']=!(-0x8*0x314+-0x17ee+0x308f)),_0x3075f6['name']='default'+_0x46cce9,_0x3075f6['useLightin'+'g']=!(0x12*-0x21f+0x1c*0xa8+-0x1cd*-0xb),_0x3075f6['useTonemap']=!(0xd20+0x8*-0x4c6+0x1911),_0x3075f6['useFog']=!(-0x25d4+-0xa*0x141+0x1*0x325f),_0x3075f6['useSkybox']=!(0x1c58+0x1b64+-0x37bb),_0x3075f6['diffuse']['set'](0xc*-0x1d+-0x22ab+0x2407*0x1,0x747+-0x1105*0x2+0x1ac3,-0xa89*0x3+0x308+0x1c93),_0x3075f6['opacity']=-0x137*-0x3+-0x400*0x1+0x5b+0.5,_0x3075f6['blendType']=Gn,_0x3075f6['depthWrite']=!(0x3c4+-0x1*0x1ee3+0x1b20),_0x3075f6['emissiveVe'+'rtexColor']=!(0x2365+0x1f*-0x7+0x6*-0x5c2),_0x3075f6['update'](),this['_defaultTe'+'xtMaterial'+'s'][_0x3b17c8]=_0x3075f6,_0x3075f6;}['_createBas'+'eImageMate'+'rial'](){const _0x33833a=new Ut();return _0x33833a['diffuse']['set'](-0x1*0x59f+-0x1209+0x17a8,0xeb6+0xd97+0x96f*-0x3,-0x1cb1+-0x1*-0xff6+0xcbb),_0x33833a['emissive']['set'](0x3*-0x14e+-0x2655*-0x1+-0x226a,-0x5*-0x59d+0x1*0x2598+-0x41a8,0x996*-0x4+0x20b1+-0x8*-0xb5),_0x33833a['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x33833a['opacityMap']=this['_defaultTe'+'xture'],_0x33833a['opacityMap'+'Channel']='a',_0x33833a['useLightin'+'g']=!(-0x1*-0x5ec+0xcda+0x9b*-0x1f),_0x33833a['useTonemap']=!(-0x15f8+-0x4*0x368+0x2399),_0x33833a['useFog']=!(-0x16ba*0x1+-0x1e3c+-0x1*-0x34f7),_0x33833a['useSkybox']=!(-0x75*0x4a+0x1a2b+0x7a8),_0x33833a['blendType']=Gn,_0x33833a['depthWrite']=!(-0x1c0a+0x1b8c+0x7f*0x1),_0x33833a;}['getImageEl'+'ementMater'+'ial'](_0x4911ea,_0x5df121,_0x3a07af,_0x1b8d3d){return _0x4911ea?_0x5df121?_0x3a07af?(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al',this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['nineSliced'+'Mode']=Pt,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['depthTest']=!(-0x1*0x1f1b+-0x87*-0x11+-0x1625*-0x1),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaTest']=-0x998*-0x1+0x1f32+-0x28c9,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['redWrite']=!(-0x1*-0x25cf+0xa8d+0x305b*-0x1),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['greenWrite']=!(0x2002+0x22ab+-0x3ec*0x11),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['blueWrite']=!(-0x3d*-0x4f+0x118f+0x43*-0x8b),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaWrite']=!(0x56e*0x1+0x11d+-0x68a),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']):_0x1b8d3d?(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['clone'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['nineSliced'+'Mode']=Mt,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['depthTest']=!(0x10dd+-0x84b*-0x2+-0x2172),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaTest']=0x1eb6+0x1e3*0x11+-0x31*0x148,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['redWrite']=!(0xbf*-0x1a+0x3*-0xa7a+0x32d5),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['greenWrite']=!(0xac2+-0x1bbc*-0x1+0x267d*-0x1),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['blueWrite']=!(0x1d*0x2d+-0x2*-0xcec+-0x42*0x78),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaWrite']=!(0x1*-0xeed+0x109*0x1f+-0xbf*0x17),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']):(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']||(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['name']='defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial',this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['depthTest']=!(-0x17d2*0x1+-0x1*0x7f2+0x1fc5),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaTest']=-0x4ba+0x32*-0x29+-0x3*-0x43f,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['redWrite']=!(-0x4*-0x937+0x24bb+0x24cb*-0x2),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['greenWrite']=!(-0x1d1*0xd+0x21b5+-0xa17),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['blueWrite']=!(-0x470+-0x82d*0x3+0x1cf8),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaWrite']=!(-0x25a+0x24c7+-0x226c*0x1),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial'])),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']):_0x3a07af?(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']||(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['name']='defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material',this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['nineSliced'+'Mode']=Pt,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['depthTest']=!(-0x1*-0x7df+-0x2303+-0x1*-0x1b25),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material'])),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']):_0x1b8d3d?(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']||(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['name']='defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial',this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['nineSliced'+'Mode']=Mt,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['depthTest']=!(0x469*-0x7+0x35*0x79+-0x1f1*-0x3),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial'])),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']):(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['depthTest']=!(0x1901*-0x1+0x1*-0x54d+0x1*0x1e4f),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']):_0x5df121?_0x3a07af?(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']||(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['name']='defaultIma'+'ge9SlicedM'+'askMateria'+'l',this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['nineSliced'+'Mode']=Pt,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaTest']=0x8be+-0x2*0x720+0x583*0x1,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['redWrite']=!(-0x8b1*-0x1+-0x190b+0x105b),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['greenWrite']=!(-0x2ab*0x5+0xdbf+-0x67),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['blueWrite']=!(0x157*0x17+-0x202c+0xae*0x2),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaWrite']=!(-0x237c+0x1*-0x141b+0x3798),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'askMateria'+'l'])),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']):_0x1b8d3d?(this['defaultIma'+'ge9TiledMa'+'skMaterial']||(this['defaultIma'+'ge9TiledMa'+'skMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'skMaterial']['name']='defaultIma'+'ge9TiledMa'+'skMaterial',this['defaultIma'+'ge9TiledMa'+'skMaterial']['nineSliced'+'Mode']=Mt,this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaTest']=0x1d54+0x611*-0x2+-0x1131,this['defaultIma'+'ge9TiledMa'+'skMaterial']['redWrite']=!(0xf2+0x152e+-0x161f),this['defaultIma'+'ge9TiledMa'+'skMaterial']['greenWrite']=!(-0xec*-0x28+-0x1582+-0x39*0x45),this['defaultIma'+'ge9TiledMa'+'skMaterial']['blueWrite']=!(-0x433+0x4*0x55d+-0x2*0x8a0),this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaWrite']=!(0x1a4d+-0x1*-0x89+-0x1ad5),this['defaultIma'+'ge9TiledMa'+'skMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'skMaterial'])),this['defaultIma'+'ge9TiledMa'+'skMaterial']):(this['defaultIma'+'geMaskMate'+'rial']||(this['defaultIma'+'geMaskMate'+'rial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaskMate'+'rial']['name']='defaultIma'+'geMaskMate'+'rial',this['defaultIma'+'geMaskMate'+'rial']['alphaTest']=0x1*0x13ff+0x1b0d+-0x1*0x2f0b,this['defaultIma'+'geMaskMate'+'rial']['redWrite']=!(-0x23*0x2a+-0x8b1+0xe70),this['defaultIma'+'geMaskMate'+'rial']['greenWrite']=!(0x6db+0x1*0xb09+-0xf1*0x13),this['defaultIma'+'geMaskMate'+'rial']['blueWrite']=!(0x88*-0x10+0x5*0x92+0x1*0x5a7),this['defaultIma'+'geMaskMate'+'rial']['alphaWrite']=!(-0x17*-0x1a3+-0x2573+0x7*-0x7),this['defaultIma'+'geMaskMate'+'rial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaskMate'+'rial'])),this['defaultIma'+'geMaskMate'+'rial']):_0x3a07af?(this['defaultIma'+'ge9SlicedM'+'aterial']||(this['defaultIma'+'ge9SlicedM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'aterial']['name']='defaultIma'+'ge9SlicedM'+'aterial',this['defaultIma'+'ge9SlicedM'+'aterial']['nineSliced'+'Mode']=Pt,this['defaultIma'+'ge9SlicedM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'aterial'])),this['defaultIma'+'ge9SlicedM'+'aterial']):_0x1b8d3d?(this['defaultIma'+'ge9TiledMa'+'terial']||(this['defaultIma'+'ge9TiledMa'+'terial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'terial']['name']='defaultIma'+'ge9TiledMa'+'terial',this['defaultIma'+'ge9TiledMa'+'terial']['nineSliced'+'Mode']=Mt,this['defaultIma'+'ge9TiledMa'+'terial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'terial'])),this['defaultIma'+'ge9TiledMa'+'terial']):(this['defaultIma'+'geMaterial']||(this['defaultIma'+'geMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaterial']['name']='defaultIma'+'geMaterial',this['defaultIma'+'geMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaterial'])),this['defaultIma'+'geMaterial']);}['registerUn'+'icodeConve'+'rter'](_0x474df2){this['_unicodeCo'+'nverter']=_0x474df2;}['registerRt'+'lReorder'](_0x31695b){this['_rtlReorde'+'r']=_0x31695b;}['getUnicode'+'Converter'](){return this['_unicodeCo'+'nverter'];}['getRtlReor'+'der'](){return this['_rtlReorde'+'r'];}}const Xa='free',qa='limited',ja='locked',RR=['angularDam'+'pingX','angularDam'+'pingY','angularDam'+'pingZ','angularEqu'+'ilibriumX','angularEqu'+'ilibriumY','angularEqu'+'ilibriumZ','angularLim'+'itsX','angularLim'+'itsY','angularLim'+'itsZ','angularMot'+'ionX','angularMot'+'ionY','angularMot'+'ionZ','angularSpr'+'ingX','angularSpr'+'ingY','angularSpr'+'ingZ','angularSti'+'ffnessX','angularSti'+'ffnessY','angularSti'+'ffnessZ','breakForce','enableColl'+'ision','enabled','entityA','entityB','linearDamp'+'ingX','linearDamp'+'ingY','linearDamp'+'ingZ','linearEqui'+'libriumX','linearEqui'+'libriumY','linearEqui'+'libriumZ','linearLimi'+'tsX','linearLimi'+'tsY','linearLimi'+'tsZ','linearMoti'+'onX','linearMoti'+'onY','linearMoti'+'onZ','linearSpri'+'ngX','linearSpri'+'ngY','linearSpri'+'ngZ','linearStif'+'fnessX','linearStif'+'fnessY','linearStif'+'fnessZ'];class ym extends we{constructor(_0x17174a,_0xe4572f){super(_0x17174a,_0xe4572f),w['assert'](typeof Ammo<'u','ERROR:\x20Att'+'empting\x20to'+'\x20create\x20a\x20'+'pc.JointCo'+'mponent\x20bu'+'t\x20Ammo.js\x20'+'is\x20not\x20loa'+'ded'),this['_constrain'+'t']=null,this['_entityA']=null,this['_entityB']=null,this['_breakForc'+'e']=0xffc99e3c66fd68000000000000000000,this['_enableCol'+'lision']=!(-0x43*-0x33+-0x136d*0x2+0x1981),this['_linearMot'+'ionX']=ja,this['_linearLim'+'itsX']=new J(-0x184f+0x437+0x1418,-0x1*-0xbf9+0x541+-0x113a),this['_linearSpr'+'ingX']=!(0x7*-0x4ea+0x314+0x1*0x1f53),this['_linearSti'+'ffnessX']=-0x1219+0xfda+-0x73*-0x5,this['_linearDam'+'pingX']=0x1ab4+0x13aa+-0x2e5d,this['_linearEqu'+'ilibriumX']=0x15b5+-0x2463+0xeae,this['_linearMot'+'ionY']=ja,this['_linearLim'+'itsY']=new J(-0xec*0x1+0x135d+-0x1271,0xc*-0x11b+-0xb9*-0x1f+-0x1*0x923),this['_linearSpr'+'ingY']=!(-0x1*0x2477+0x24f1+-0x79),this['_linearSti'+'ffnessY']=-0x21c4+-0x1e0e+0x3fd2,this['_linearDam'+'pingY']=-0xca8+-0x1*0x1c1+0xe6a,this['_linearEqu'+'ilibriumY']=-0x1e55+-0x1*0xce+0x1f23,this['_linearMot'+'ionZ']=ja,this['_linearLim'+'itsZ']=new J(0x1*0x1c27+0xdfa+-0x2a21,0x388*0x1+0x1*-0x9ab+0x623),this['_linearSpr'+'ingZ']=!(-0xea9+0x1*-0x150b+0x23b5),this['_linearSti'+'ffnessZ']=-0x215+-0x2*0x871+0x12f7*0x1,this['_linearDam'+'pingZ']=-0x1*0x1c19+-0xfd3+-0x41*-0xad,this['_linearEqu'+'ilibriumZ']=0x23a9*0x1+-0xf43*0x1+-0x1466,this['_angularMo'+'tionX']=ja,this['_angularLi'+'mitsX']=new J(-0x25a4+-0x1208+0x37ac,0xb1*0x29+-0x139*0x1+-0x1b20),this['_angularSp'+'ringX']=!(0x14fb+0x1*-0xe26+0x4*-0x1b5),this['_angularSt'+'iffnessX']=0x61e*0x6+0xd21*0x1+-0x1*0x31d5,this['_angularDa'+'mpingX']=0x16*0x37+-0x8*0x77+-0x101*0x1,this['_angularEq'+'uilibriumX']=-0x1f3a+0x1*0x10a6+0xe94,this['_angularMo'+'tionY']=ja,this['_angularLi'+'mitsY']=new J(-0x1dd+-0x46*0x59+-0x161*-0x13,0x21ad+-0x251*-0xa+0x1*-0x38d7),this['_angularSp'+'ringY']=!(-0x22ca+-0x1*0xdfa+0x30c5),this['_angularSt'+'iffnessY']=-0x323*0x3+-0x1741+0x20aa,this['_angularDa'+'mpingY']=-0x10*-0x1ff+0x1*0x25ce+-0x45bd,this['_angularEq'+'uilibriumY']=-0x121f+0xb38+0x6e7,this['_angularMo'+'tionZ']=ja,this['_angularLi'+'mitsZ']=new J(0x3*0x1f9+-0x1*0x2446+0x1e5b,0x1dcd*0x1+-0x107d+0x47*-0x30),this['_angularSp'+'ringZ']=!(-0x1*-0x73+-0xce9+0x1*0xc77),this['_angularEq'+'uilibriumZ']=0x2*0x130d+-0x2588+-0x49*0x2,this['_angularDa'+'mpingZ']=-0x2a4*0xb+-0x2cf*-0x9+0x3c6,this['_angularSt'+'iffnessZ']=-0x84e+0x37f+0x1*0x4cf,this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['entityA'](_0x337c61){this['_destroyCo'+'nstraint'](),this['_entityA']=_0x337c61,this['_createCon'+'straint']();}get['entityA'](){return this['_entityA'];}set['entityB'](_0x3b98af){this['_destroyCo'+'nstraint'](),this['_entityB']=_0x3b98af,this['_createCon'+'straint']();}get['entityB'](){return this['_entityB'];}set['breakForce'](_0x21cdde){this['_constrain'+'t']&&this['_breakForc'+'e']!==_0x21cdde&&(this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](_0x21cdde),this['_breakForc'+'e']=_0x21cdde);}get['breakForce'](){return this['_breakForc'+'e'];}set['enableColl'+'ision'](_0x4db79b){this['_destroyCo'+'nstraint'](),this['_enableCol'+'lision']=_0x4db79b,this['_createCon'+'straint']();}get['enableColl'+'ision'](){return this['_enableCol'+'lision'];}set['angularLim'+'itsX'](_0x2a1f0a){this['_angularLi'+'mitsX']['equals'](_0x2a1f0a)||(this['_angularLi'+'mitsX']['copy'](_0x2a1f0a),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsX'](){return this['_angularLi'+'mitsX'];}set['angularMot'+'ionX'](_0x3db0bd){this['_angularMo'+'tionX']!==_0x3db0bd&&(this['_angularMo'+'tionX']=_0x3db0bd,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionX'](){return this['_angularMo'+'tionX'];}set['angularLim'+'itsY'](_0x5cd782){this['_angularLi'+'mitsY']['equals'](_0x5cd782)||(this['_angularLi'+'mitsY']['copy'](_0x5cd782),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsY'](){return this['_angularLi'+'mitsY'];}set['angularMot'+'ionY'](_0x2144b3){this['_angularMo'+'tionY']!==_0x2144b3&&(this['_angularMo'+'tionY']=_0x2144b3,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionY'](){return this['_angularMo'+'tionY'];}set['angularLim'+'itsZ'](_0x2ae9b2){this['_angularLi'+'mitsZ']['equals'](_0x2ae9b2)||(this['_angularLi'+'mitsZ']['copy'](_0x2ae9b2),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsZ'](){return this['_angularLi'+'mitsZ'];}set['angularMot'+'ionZ'](_0x7bc33a){this['_angularMo'+'tionZ']!==_0x7bc33a&&(this['_angularMo'+'tionZ']=_0x7bc33a,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionZ'](){return this['_angularMo'+'tionZ'];}set['linearLimi'+'tsX'](_0x14bfe8){this['_linearLim'+'itsX']['equals'](_0x14bfe8)||(this['_linearLim'+'itsX']['copy'](_0x14bfe8),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsX'](){return this['_linearLim'+'itsX'];}set['linearMoti'+'onX'](_0x365822){this['_linearMot'+'ionX']!==_0x365822&&(this['_linearMot'+'ionX']=_0x365822,this['_updateLin'+'earLimits']());}get['linearMoti'+'onX'](){return this['_linearMot'+'ionX'];}set['linearLimi'+'tsY'](_0x5996bb){this['_linearLim'+'itsY']['equals'](_0x5996bb)||(this['_linearLim'+'itsY']['copy'](_0x5996bb),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsY'](){return this['_linearLim'+'itsY'];}set['linearMoti'+'onY'](_0x25fe41){this['_linearMot'+'ionY']!==_0x25fe41&&(this['_linearMot'+'ionY']=_0x25fe41,this['_updateLin'+'earLimits']());}get['linearMoti'+'onY'](){return this['_linearMot'+'ionY'];}set['linearLimi'+'tsZ'](_0x57f8ba){this['_linearLim'+'itsZ']['equals'](_0x57f8ba)||(this['_linearLim'+'itsZ']['copy'](_0x57f8ba),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsZ'](){return this['_linearLim'+'itsZ'];}set['linearMoti'+'onZ'](_0x51db3d){this['_linearMot'+'ionZ']!==_0x51db3d&&(this['_linearMot'+'ionZ']=_0x51db3d,this['_updateLin'+'earLimits']());}get['linearMoti'+'onZ'](){return this['_linearMot'+'ionZ'];}['_convertTr'+'ansform'](_0x1aad99,_0xa6c609){const _0xf6bd7a=_0x1aad99['getTransla'+'tion'](),_0x51a6d4=new le();_0x51a6d4['setFromMat'+'4'](_0x1aad99);const _0x1f2f0d=new Ammo['btVector3'](_0xf6bd7a['x'],_0xf6bd7a['y'],_0xf6bd7a['z']),_0x321d9d=new Ammo['btQuaterni'+'on'](_0x51a6d4['x'],_0x51a6d4['y'],_0x51a6d4['z'],_0x51a6d4['w']);_0xa6c609['setOrigin'](_0x1f2f0d),_0xa6c609['setRotatio'+'n'](_0x321d9d),Ammo['destroy'](_0x1f2f0d),Ammo['destroy'](_0x321d9d);}['_updateAng'+'ularLimits'](){const _0x1d8da6=this['_constrain'+'t'];if(_0x1d8da6){let _0x412743,_0x1418d1,_0x2634f0,_0xbe6f1a,_0x384d36,_0x4702a9;this['_angularMo'+'tionX']===qa?(_0x412743=this['_angularLi'+'mitsX']['x']*Y['DEG_TO_RAD'],_0xbe6f1a=this['_angularLi'+'mitsX']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionX']===Xa?(_0x412743=0x1f63*0x1+-0x7dc+-0x1786,_0xbe6f1a=-0x5*-0x4b7+-0xad*0x6+-0x107*0x13):_0x412743=_0xbe6f1a=0x13*0x18d+-0x1*-0x1be5+-0x395c,this['_angularMo'+'tionY']===qa?(_0x1418d1=this['_angularLi'+'mitsY']['x']*Y['DEG_TO_RAD'],_0x384d36=this['_angularLi'+'mitsY']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionY']===Xa?(_0x1418d1=-0xdfb+0x1*0x4d+0xdaf,_0x384d36=0x7*0x47c+-0xf9e+-0xfc6):_0x1418d1=_0x384d36=-0x1*0xfbb+-0xbbc+0x1b77,this['_angularMo'+'tionZ']===qa?(_0x2634f0=this['_angularLi'+'mitsZ']['x']*Y['DEG_TO_RAD'],_0x4702a9=this['_angularLi'+'mitsZ']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionZ']===Xa?(_0x2634f0=0xfa3+0x11cf+-0x2171,_0x4702a9=0x17e1+0x613+-0x9fc*0x3):_0x2634f0=_0x4702a9=0xeb*0x3+0x1*0x3df+0xd4*-0x8;const _0x404873=new Ammo['btVector3'](_0x412743,_0x1418d1,_0x2634f0);_0x1d8da6['setAngular'+'LowerLimit'](_0x404873),_0x404873['setValue'](_0xbe6f1a,_0x384d36,_0x4702a9),_0x1d8da6['setAngular'+'UpperLimit'](_0x404873),Ammo['destroy'](_0x404873);}}['_updateLin'+'earLimits'](){const _0x4db6cc=this['_constrain'+'t'];if(_0x4db6cc){let _0x447bba,_0x5d3eb5,_0x274571,_0x4dcabb,_0x389b44,_0x42d198;this['_linearMot'+'ionX']===qa?(_0x447bba=this['_linearLim'+'itsX']['x'],_0x4dcabb=this['_linearLim'+'itsX']['y']):this['_linearMot'+'ionX']===Xa?(_0x447bba=-0xf9+0x2049+-0x1f4f*0x1,_0x4dcabb=-0x36c*0x1+-0xd*-0xb3+-0x5ab):_0x447bba=_0x4dcabb=0x193e+0x178c+0xa*-0x4e1,this['_linearMot'+'ionY']===qa?(_0x5d3eb5=this['_linearLim'+'itsY']['x'],_0x389b44=this['_linearLim'+'itsY']['y']):this['_linearMot'+'ionY']===Xa?(_0x5d3eb5=0x895+-0xd*-0x2a3+-0x2adb,_0x389b44=0x26f0+-0x18ed+-0x11*0xd3):_0x5d3eb5=_0x389b44=-0x3d4+0x1796+-0x13c2,this['_linearMot'+'ionZ']===qa?(_0x274571=this['_linearLim'+'itsZ']['x'],_0x42d198=this['_linearLim'+'itsZ']['y']):this['_linearMot'+'ionZ']===Xa?(_0x274571=0x1cfd*0x1+0x3f9+-0x20f5,_0x42d198=-0x236f+-0x3*-0x1df+0x1dd2):_0x274571=_0x42d198=-0x7*0x522+0x1d77+-0x14b*-0x5;const _0x566889=new Ammo['btVector3'](_0x447bba,_0x5d3eb5,_0x274571);_0x4db6cc['setLinearL'+'owerLimit'](_0x566889),_0x566889['setValue'](_0x4dcabb,_0x389b44,_0x42d198),_0x4db6cc['setLinearU'+'pperLimit'](_0x566889),Ammo['destroy'](_0x566889);}}['_createCon'+'straint'](){if(this['_entityA']&&this['_entityA']['rigidbody']){this['_destroyCo'+'nstraint']();const _0x18d186=new te(),_0x4d0a3e=this['_entityA']['rigidbody']['body'];_0x4d0a3e['activate']();const _0xb20d06=this['entity']['getWorldTr'+'ansform'](),_0x238edf=this['_entityA']['getWorldTr'+'ansform']()['clone']()['invert']();_0x18d186['mul2'](_0x238edf,_0xb20d06);const _0x3bcaa2=new Ammo['btTransfor'+'m']();if(this['_convertTr'+'ansform'](_0x18d186,_0x3bcaa2),this['_entityB']&&this['_entityB']['rigidbody']){const _0xc6c83d=this['_entityB']['rigidbody']['body'];_0xc6c83d['activate']();const _0x1b5362=this['_entityB']['getWorldTr'+'ansform']()['clone']()['invert']();_0x18d186['mul2'](_0x1b5362,_0xb20d06);const _0x237d13=new Ammo['btTransfor'+'m']();this['_convertTr'+'ansform'](_0x18d186,_0x237d13),this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x4d0a3e,_0xc6c83d,_0x3bcaa2,_0x237d13,!this['_enableCol'+'lision']),Ammo['destroy'](_0x237d13);}else this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x4d0a3e,_0x3bcaa2,!this['_enableCol'+'lision']);Ammo['destroy'](_0x3bcaa2);const _0x541977=['X','Y','Z','X','Y','Z'];for(let _0x2792be=0x13*-0x149+-0xda3+0x260e;_0x2792be<-0x23*-0x69+0xd7e+-0x1a3*0x11;_0x2792be++){const _0xeb8e90=_0x2792be<0x2374+-0x1a2f+-0x942?'_linear':'_angular';this['_constrain'+'t']['enableSpri'+'ng'](_0x2792be,this[_0xeb8e90+'Spring'+_0x541977[_0x2792be]]),this['_constrain'+'t']['setDamping'](_0x2792be,this[_0xeb8e90+'Damping'+_0x541977[_0x2792be]]),this['_constrain'+'t']['setEquilib'+'riumPoint'](_0x2792be,this[_0xeb8e90+('Equilibriu'+'m')+_0x541977[_0x2792be]]),this['_constrain'+'t']['setStiffne'+'ss'](_0x2792be,this[_0xeb8e90+'Stiffness'+_0x541977[_0x2792be]]);}this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](this['_breakForc'+'e']),this['_updateLin'+'earLimits'](),this['_updateAng'+'ularLimits'](),this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['addConstra'+'int'](this['_constrain'+'t'],!this['_enableCol'+'lision']);}}['_destroyCo'+'nstraint'](){this['_constrain'+'t']&&(this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['removeCons'+'traint'](this['_constrain'+'t']),Ammo['destroy'](this['_constrain'+'t']),this['_constrain'+'t']=null);}['initFromDa'+'ta'](_0x408822){for(const _0x36c666 of RR)_0x408822['hasOwnProp'+'erty'](_0x36c666)&&(_0x408822[_0x36c666]instanceof J?this['_'+_0x36c666]['copy'](_0x408822[_0x36c666]):this['_'+_0x36c666]=_0x408822[_0x36c666]);this['_createCon'+'straint']();}['onEnable'](){this['_createCon'+'straint']();}['onDisable'](){this['_destroyCo'+'nstraint']();}['_onSetEnab'+'led'](_0x2f9923,_0x37b839,_0x120ca4){}['_onBeforeR'+'emove'](){this['fire']('remove');}}const OR={'Damping':'setDamping','Equilibrium':'setEquilib'+'riumPoint','Spring':'enableSpri'+'ng','Stiffness':'setStiffne'+'ss'};['linear','angular']['forEach'](_0x3d93d1=>{['Damping','Equilibriu'+'m','Spring','Stiffness']['forEach'](_0x13ea34=>{['X','Y','Z']['forEach'](_0x18cebd=>{const _0x508c3e=_0x3d93d1+_0x13ea34+_0x18cebd,_0x212c41='_'+_0x508c3e;let _0x2d4341=_0x3d93d1==='linear'?0x1c96+0x1*0x653+-0x9*0x3e1:-0xd*0x6f+0x6*-0x3f1+0x1f4*0xf;_0x18cebd==='Y'&&(_0x2d4341+=-0x794+-0x12cc+0x3*0x8cb),_0x18cebd==='Z'&&(_0x2d4341+=-0x2414+0x10d4+0x1342),Object['defineProp'+'erty'](ym['prototype'],_0x508c3e,{'get':function(){return this[_0x212c41];},'set':function(_0x4acd81){this[_0x212c41]!==_0x4acd81&&(this[_0x212c41]=_0x4acd81,this['_constrain'+'t'][OR[_0x13ea34]](_0x2d4341,_0x4acd81));}});});});});class FR{constructor(){this['enabled']=!(-0x2294+-0xb2*-0x2b+-0x1*-0x4ae);}}const Fu=['enabled'];class NR extends ct{constructor(_0x414b7f){super(_0x414b7f),this['id']='joint',this['app']=_0x414b7f,this['ComponentT'+'ype']=ym,this['DataType']=FR,this['schema']=Fu;}['initialize'+'ComponentD'+'ata'](_0x491193,_0x425dc,_0x6d9b57){_0x491193['initFromDa'+'ta'](_0x425dc),super['initialize'+'ComponentD'+'ata'](_0x491193,_0x425dc,Fu);}}we['_buildAcce'+'ssors'](ym['prototype'],Fu);class Jv extends we{constructor(){super(...arguments),h(this,'_minWidth',0x103*0x25+0xd*0x21d+-0x218*0x1f),h(this,'_minHeight',0x71*-0x39+0x27a*0x1+0x16af),h(this,'_maxWidth',null),h(this,'_maxHeight',null),h(this,'_fitWidthP'+'roportion',-0x7ce+0x1*0xcb5+-0x4e7),h(this,'_fitHeight'+'Proportion',-0x237a+0x13b7+0x3*0x541),h(this,'_excludeFr'+'omLayout',!(0x1892+0x1475+-0x781*0x6));}set['minWidth'](_0xcbfc0d){_0xcbfc0d!==this['_minWidth']&&(this['_minWidth']=_0xcbfc0d,this['fire']('resize'));}get['minWidth'](){return this['_minWidth'];}set['minHeight'](_0x244e61){_0x244e61!==this['_minHeight']&&(this['_minHeight']=_0x244e61,this['fire']('resize'));}get['minHeight'](){return this['_minHeight'];}set['maxWidth'](_0x1d771b){_0x1d771b!==this['_maxWidth']&&(this['_maxWidth']=_0x1d771b,this['fire']('resize'));}get['maxWidth'](){return this['_maxWidth'];}set['maxHeight'](_0x37e703){_0x37e703!==this['_maxHeight']&&(this['_maxHeight']=_0x37e703,this['fire']('resize'));}get['maxHeight'](){return this['_maxHeight'];}set['fitWidthPr'+'oportion'](_0x55ec10){_0x55ec10!==this['_fitWidthP'+'roportion']&&(this['_fitWidthP'+'roportion']=_0x55ec10,this['fire']('resize'));}get['fitWidthPr'+'oportion'](){return this['_fitWidthP'+'roportion'];}set['fitHeightP'+'roportion'](_0x3042e1){_0x3042e1!==this['_fitHeight'+'Proportion']&&(this['_fitHeight'+'Proportion']=_0x3042e1,this['fire']('resize'));}get['fitHeightP'+'roportion'](){return this['_fitHeight'+'Proportion'];}set['excludeFro'+'mLayout'](_0x5c01bf){_0x5c01bf!==this['_excludeFr'+'omLayout']&&(this['_excludeFr'+'omLayout']=_0x5c01bf,this['fire']('resize'));}get['excludeFro'+'mLayout'](){return this['_excludeFr'+'omLayout'];}}class kR{constructor(){this['enabled']=!(0x2041+0x78+-0x20b9);}}const e0=['enabled'];class UR extends ct{constructor(_0x18f577){super(_0x18f577),this['id']='layoutchil'+'d',this['ComponentT'+'ype']=Jv,this['DataType']=kR,this['schema']=e0;}['initialize'+'ComponentD'+'ata'](_0xc02060,_0x39eb46,_0x5f28c6){_0x39eb46['enabled']!==void(-0x5d+-0xbc1+0xc1e)&&(_0xc02060['enabled']=_0x39eb46['enabled']),_0x39eb46['minWidth']!==void(0x67f+-0x1d3e+0x16bf*0x1)&&(_0xc02060['minWidth']=_0x39eb46['minWidth']),_0x39eb46['minHeight']!==void(-0x911+0x1343+0x1e*-0x57)&&(_0xc02060['minHeight']=_0x39eb46['minHeight']),_0x39eb46['maxWidth']!==void(-0x1c32*0x1+-0x7*0x347+0x3323)&&(_0xc02060['maxWidth']=_0x39eb46['maxWidth']),_0x39eb46['maxHeight']!==void(0x2*-0x31+-0x3*-0x487+-0x1*0xd33)&&(_0xc02060['maxHeight']=_0x39eb46['maxHeight']),_0x39eb46['fitWidthPr'+'oportion']!==void(0x18d6*0x1+0xf0*0x17+-0x2e66)&&(_0xc02060['fitWidthPr'+'oportion']=_0x39eb46['fitWidthPr'+'oportion']),_0x39eb46['fitHeightP'+'roportion']!==void(-0x1*-0x156c+0x8e7*0x1+-0x1e53)&&(_0xc02060['fitHeightP'+'roportion']=_0x39eb46['fitHeightP'+'roportion']),_0x39eb46['excludeFro'+'mLayout']!==void(0x1c91+0x20c1+-0x1ea9*0x2)&&(_0xc02060['excludeFro'+'mLayout']=_0x39eb46['excludeFro'+'mLayout']),super['initialize'+'ComponentD'+'ata'](_0xc02060,_0x39eb46,_0x5f28c6);}['cloneCompo'+'nent'](_0x2ab6b4,_0x3c998e){const _0x43e13f=_0x2ab6b4['layoutchil'+'d'];return this['addCompone'+'nt'](_0x3c998e,{'enabled':_0x43e13f['enabled'],'minWidth':_0x43e13f['minWidth'],'minHeight':_0x43e13f['minHeight'],'maxWidth':_0x43e13f['maxWidth'],'maxHeight':_0x43e13f['maxHeight'],'fitWidthProportion':_0x43e13f['fitWidthPr'+'oportion'],'fitHeightProportion':_0x43e13f['fitHeightP'+'roportion'],'excludeFromLayout':_0x43e13f['excludeFro'+'mLayout']});}}we['_buildAcce'+'ssors'](Jv['prototype'],e0);const Nu=0xcb*0x2b+0x19be+-0x1*0x3bd7,BR=-0x1f47+0x11c4+0xd84,Qg=-0x1c58+0x110a+0xb50,zR=0x5*-0x3e7+-0x172+0x16*0xf4,Oh={};Oh[Ce]={'axis':'x','size':'width','calculatedSize':'calculated'+'Width','minSize':'minWidth','maxSize':'maxWidth','fitting':'widthFitti'+'ng','fittingProportion':'fitWidthPr'+'oportion'},Oh[je]={'axis':'y','size':'height','calculatedSize':'calculated'+'Height','minSize':'minHeight','maxSize':'maxHeight','fitting':'heightFitt'+'ing','fittingProportion':'fitHeightP'+'roportion'};const vm={};vm[Ce]=je,vm[je]=Ce;const VR={'minWidth':0x0,'minHeight':0x0,'maxWidth':Number['POSITIVE_I'+'NFINITY'],'maxHeight':Number['POSITIVE_I'+'NFINITY'],'width':null,'height':null,'fitWidthProportion':0x0,'fitHeightProportion':0x0},os={'NONE':'NONE','APPLY_STRETCHING':'APPLY_STRE'+'TCHING','APPLY_SHRINKING':'APPLY_SHRI'+'NKING'},ls=new J();function t0(_0x994b33){let _0x54672f;const _0x29db52=Oh[_0x994b33],_0x39f8cc=Oh[vm[_0x994b33]];function _0x361c9d(_0x266117,_0x3b00ed){return-_0x3b00ed[_0x29db52['size']]*_0x266117['pivot'][_0x29db52['axis']];}function _0x30a765(_0x1b9fa1,_0x4b3c2d){return-_0x4b3c2d[_0x39f8cc['size']]*_0x1b9fa1['pivot'][_0x39f8cc['axis']];}function _0x5524e6(_0x46716d,_0x4a8eda){return _0x4a8eda[_0x29db52['size']]*(0x8fd+-0x1a74+0x158*0xd-_0x46716d['pivot'][_0x29db52['axis']]);}function _0x2e3ac4(_0xe89507,_0x17690c){_0xe89507=_0xe89507['filter'](_0x470134),_0x54672f=_0x17690c,ls['x']=_0x54672f['containerS'+'ize']['x']-_0x54672f['padding']['x']-_0x54672f['padding']['z'],ls['y']=_0x54672f['containerS'+'ize']['y']-_0x54672f['padding']['y']-_0x54672f['padding']['w'],_0x2764e6(_0xe89507);const _0x36d2b0=_0x14b1bc(_0x406d99(_0xe89507)),_0x172ce6=_0x418c29(_0x36d2b0,_0x5f3418(_0x36d2b0)),_0x4b4b32=_0x45b89c(_0x36d2b0,_0x172ce6);return _0x32b46c(_0x36d2b0,_0x172ce6,_0x4b4b32),_0x2cfc2a(_0x36d2b0,_0x172ce6,_0x4b4b32),_0x1055b4(_0x36d2b0);}function _0x470134(_0x38b920){const _0x2c84b6=_0x38b920['entity']['layoutchil'+'d'];return!_0x2c84b6||!_0x2c84b6['enabled']||!_0x2c84b6['excludeFro'+'mLayout'];}function _0x2764e6(_0x51ba68){for(let _0x120f62=0x976+0x1ac5+-0x243b;_0x120f62<_0x51ba68['length'];++_0x120f62){const _0x4cec9b=_0x51ba68[_0x120f62],_0x109544=_0x4cec9b['anchor'];(_0x109544['x']!==-0x1324+0x17ed+-0x7*0xaf||_0x109544['y']!==0x150b+-0xeff+-0x2*0x306||_0x109544['z']!==-0x1c03+-0x24cf*-0x1+-0x8cc||_0x109544['w']!==0xd7b+-0x95d+-0x41e)&&(_0x4cec9b['anchor']=re['ZERO']);}}function _0x406d99(_0x364aa2){if(!_0x54672f['wrap'])return[_0x364aa2];const _0x3a402f=[[]],_0x27380a=_0x58b12c(_0x364aa2);let _0x44b91b=0x13b7*-0x1+-0x90e+-0xf*-0x1eb;const _0x4da277=_0x54672f[_0x29db52['fitting']]===Qg;for(let _0x3331e8=-0x1*-0x527+-0x546*0x4+-0x4d*-0x35;_0x3331e8<_0x364aa2['length'];++_0x3331e8){_0x3a402f[_0x3a402f['length']-(0x1e8c+-0x144*-0x9+-0x29ef)]['length']>-0xe27*0x1+-0x1a37+0x142f*0x2&&(_0x44b91b+=_0x54672f['spacing'][_0x29db52['axis']]);const _0x4d66e8=_0x27380a[_0x3331e8][_0x29db52['size']];_0x44b91b+=_0x4d66e8,!_0x4da277&&_0x44b91b>ls[_0x29db52['axis']]&&_0x3a402f[_0x3a402f['length']-(-0x2*0x932+0xb07+0x75e)]['length']!==-0x1c5*-0x9+0x2247+-0x3*0x10bc&&(_0x44b91b=_0x4d66e8,_0x3a402f['push']([])),_0x3a402f[_0x3a402f['length']-(-0x238d+0xb4d*-0x2+0x3a28)]['push'](_0x364aa2[_0x3331e8]),_0x4da277&&_0x44b91b>ls[_0x29db52['axis']]&&_0x3331e8!==_0x364aa2['length']-(0x1cfb+-0x13d*0x9+-0x11d5*0x1)&&(_0x44b91b=-0x9*0xed+-0x18c0+-0xb07*-0x3,_0x3a402f['push']([]));}return _0x3a402f;}function _0x14b1bc(_0x2b8b3d){const _0x2bbe5a=_0x54672f['orientatio'+'n']===Ce&&_0x54672f['reverseX']||_0x54672f['orientatio'+'n']===je&&_0x54672f['reverseY'],_0x3933d8=_0x54672f['orientatio'+'n']===Ce&&_0x54672f['reverseY']||_0x54672f['orientatio'+'n']===je&&_0x54672f['reverseX'];if(_0x2bbe5a){for(let _0x4b96d3=0x1664+-0x1*0xa70+-0xbf4;_0x4b96d3<_0x2b8b3d['length'];++_0x4b96d3)_0x2bbe5a&&_0x2b8b3d[_0x4b96d3]['reverse']();}return _0x3933d8&&_0x2b8b3d['reverse'](),_0x2b8b3d;}function _0x5f3418(_0x5a359f){const _0x36de8e=[];for(let _0x253673=0x2439+-0xe59*-0x1+-0x1*0x3292;_0x253673<_0x5a359f['length'];++_0x253673){const _0x121d82=_0x5a359f[_0x253673],_0x59a19b=_0x58b12c(_0x121d82),_0x4e8603=_0x19e6bd(_0x59a19b,_0x29db52),_0x5d1ec8=_0x17c57d(_0x54672f[_0x29db52['fitting']],_0x4e8603,ls[_0x29db52['axis']]);_0x5d1ec8===os['APPLY_STRE'+'TCHING']?_0x582a10(_0x59a19b,_0x4e8603,_0x29db52):_0x5d1ec8===os['APPLY_SHRI'+'NKING']&&_0x42f640(_0x59a19b,_0x4e8603,_0x29db52),_0x36de8e['push'](_0x59a19b);}return _0x36de8e;}function _0x418c29(_0xd95f72,_0x249e01){const _0x107079=[],_0x298472=[];for(let _0x3350e9=-0x1d*0x6+0xc1*-0x2d+-0xb89*-0x3;_0x3350e9<_0xd95f72['length'];++_0x3350e9){const _0x300f0f=_0xd95f72[_0x3350e9];_0x300f0f['largestEle'+'ment']=null,_0x300f0f['largestSiz'+'e']={'width':Number['NEGATIVE_I'+'NFINITY'],'height':Number['NEGATIVE_I'+'NFINITY']};for(let _0x3337b5=0x2e1*-0x5+-0xab5*-0x1+0x3b0;_0x3337b5<_0x300f0f['length'];++_0x3337b5){const _0x5d9527=_0x249e01[_0x3350e9][_0x3337b5];_0x5d9527[_0x39f8cc['size']]>_0x300f0f['largestSiz'+'e'][_0x39f8cc['size']]&&(_0x300f0f['largestEle'+'ment']=_0x300f0f[_0x3337b5],_0x300f0f['largestSiz'+'e']=_0x5d9527);}_0x107079['push'](_0x300f0f['largestEle'+'ment']),_0x298472['push'](_0x300f0f['largestSiz'+'e']);}const _0x1ec862=_0x19e6bd(_0x298472,_0x39f8cc),_0x1ffb41=_0x17c57d(_0x54672f[_0x39f8cc['fitting']],_0x1ec862,ls[_0x39f8cc['axis']]);_0x1ffb41===os['APPLY_STRE'+'TCHING']?_0x582a10(_0x298472,_0x1ec862,_0x39f8cc):_0x1ffb41===os['APPLY_SHRI'+'NKING']&&_0x42f640(_0x298472,_0x1ec862,_0x39f8cc);for(let _0x4fae7a=0xb9+-0x7d9+-0x4*-0x1c8;_0x4fae7a<_0xd95f72['length'];++_0x4fae7a){const _0x28cc96=_0xd95f72[_0x4fae7a];for(let _0x47bc36=0x135a*-0x2+0x16e4+0xfd0;_0x47bc36<_0x28cc96['length'];++_0x47bc36){const _0x384ee5=_0x249e01[_0x4fae7a][_0x47bc36],_0x13efa0=_0x384ee5[_0x39f8cc['size']],_0x46f08c=_0xd95f72['length']===-0xb*0x7+0x2498+-0x244a*0x1?ls[_0x39f8cc['axis']]:_0x28cc96['largestSiz'+'e'][_0x39f8cc['size']],_0xdfb57e=_0x17c57d(_0x54672f[_0x39f8cc['fitting']],_0x13efa0,_0x46f08c);_0xdfb57e===os['APPLY_STRE'+'TCHING']?_0x384ee5[_0x39f8cc['size']]=Math['min'](_0x46f08c,_0x384ee5[_0x39f8cc['maxSize']]):_0xdfb57e===os['APPLY_SHRI'+'NKING']&&(_0x384ee5[_0x39f8cc['size']]=Math['max'](_0x46f08c,_0x384ee5[_0x39f8cc['minSize']]));}}return _0x249e01;}function _0x17c57d(_0x245abb,_0x3f14fb,_0x232f63){switch(_0x245abb){case Nu:return os['NONE'];case BR:return _0x3f14fb<_0x232f63?os['APPLY_STRE'+'TCHING']:os['NONE'];case Qg:return _0x3f14fb>=_0x232f63?os['APPLY_SHRI'+'NKING']:os['NONE'];case zR:return _0x3f14fb<_0x232f63?os['APPLY_STRE'+'TCHING']:os['APPLY_SHRI'+'NKING'];default:throw new Error('Unrecogniz'+'ed\x20fitting'+'\x20mode:\x20'+_0x245abb);}}function _0x19e6bd(_0x449b2a,_0x3b5d94){const _0xab792f=_0x5743ec(_0x449b2a,_0x3b5d94['size']),_0x42a3da=(_0x449b2a['length']-(-0x4d*-0x55+0x9c7*-0x3+0x5*0xc1))*_0x54672f['spacing'][_0x3b5d94['axis']];return _0xab792f+_0x42a3da;}function _0x582a10(_0xef4b0e,_0xa1f4ec,_0x129758){const _0x5cead5=_0x17b6fa(_0xef4b0e,_0x129758['maxSize']),_0x111f74=_0x56047f(_0xef4b0e,_0x129758['fittingPro'+'portion']),_0x21a67c=_0x1fbefa(_0x111f74,_0x5cead5);let _0x577d62=ls[_0x129758['axis']]-_0xa1f4ec;for(let _0x4e177a=-0x55*-0x3b+-0x66c*-0x3+-0x26db;_0x4e177a<_0xef4b0e['length'];++_0x4e177a){const _0x2877bd=_0x5cead5[_0x4e177a],_0x309024=_0x328b05(_0x2877bd,_0x577d62,_0x111f74,_0x21a67c),_0x330944=_0xef4b0e[_0x2877bd][_0x129758['size']]+_0x309024,_0x3845ed=_0xef4b0e[_0x2877bd][_0x129758['maxSize']],_0x4185bd=Math['min'](_0x330944,_0x3845ed);_0xef4b0e[_0x2877bd][_0x129758['size']]=_0x4185bd;const _0xad6b11=Math['max'](_0x330944-_0x4185bd,-0x1*-0x5d5+-0x3bf+0x3*-0xb2),_0xe8ec6f=_0x309024-_0xad6b11;_0x577d62-=_0xe8ec6f;}}function _0x42f640(_0x120300,_0x16a6f5,_0x3f693b){const _0x1f05a9=_0x17b6fa(_0x120300,_0x3f693b['minSize'],!(-0x125c+0x1179+0xe3)),_0x45dfb2=_0x56047f(_0x120300,_0x3f693b['fittingPro'+'portion']),_0x502393=_0x3c8660(_0x45dfb2),_0x47eeed=_0x1fbefa(_0x502393,_0x1f05a9);let _0x105377=_0x16a6f5-ls[_0x3f693b['axis']];for(let _0x31c626=-0xc*0x5e+0x9a7+-0x53f;_0x31c626<_0x120300['length'];++_0x31c626){const _0x5aa027=_0x1f05a9[_0x31c626],_0x47f7b6=_0x328b05(_0x5aa027,_0x105377,_0x502393,_0x47eeed),_0x578445=_0x120300[_0x5aa027][_0x3f693b['size']]-_0x47f7b6,_0x32bd71=_0x120300[_0x5aa027][_0x3f693b['minSize']],_0x49fbdf=Math['max'](_0x578445,_0x32bd71);_0x120300[_0x5aa027][_0x3f693b['size']]=_0x49fbdf;const _0x2f07d5=Math['max'](_0x49fbdf-_0x578445,-0x2557*-0x1+-0x4*-0xb2+0x281f*-0x1),_0x1d7fb1=_0x47f7b6-_0x2f07d5;_0x105377-=_0x1d7fb1;}}function _0x328b05(_0x186119,_0x1a8afd,_0x156487,_0x5aa215){const _0x1b3601=_0x156487[_0x186119],_0xe87fcc=_0x5aa215[_0x186119];return Math['abs'](_0x1b3601)<0x141*-0x1d+0x1589+0xed4+0.00001&&Math['abs'](_0xe87fcc)<-0x4d*-0x1+0x3*-0x88f+0x1960+0.00001?_0x1a8afd:_0x1a8afd*_0x1b3601/_0xe87fcc;}function _0x45b89c(_0x66c401,_0x56df70){const _0x4b403a={};_0x4b403a[_0x29db52['axis']]=0x2058+-0x4*0xdb+-0x3*0x9a4,_0x4b403a[_0x39f8cc['axis']]=0x155f+0xabd*0x2+-0x2ad9,_0x66c401[_0x29db52['size']]=Number['NEGATIVE_I'+'NFINITY'];const _0x3c9ece=[];for(let _0x280cd9=-0x800*0x3+-0x1*0x329+0x1b29;_0x280cd9<_0x66c401['length'];++_0x280cd9){const _0x36ef31=_0x66c401[_0x280cd9];if(_0x36ef31['length']===0x15c1+-0x1*-0x1027+0x4*-0x97a){_0x3c9ece['push']([]);continue;}const _0x5a47a=[],_0x1b3614=_0x56df70[_0x280cd9];for(let _0x18e3d7=0x5*-0x471+-0x19d*0xd+0x2b2e;_0x18e3d7<_0x36ef31['length'];++_0x18e3d7){const _0x5f2e=_0x36ef31[_0x18e3d7],_0x2bde2f=_0x1b3614[_0x18e3d7];_0x4b403a[_0x39f8cc['axis']]-=_0x30a765(_0x5f2e,_0x2bde2f),_0x4b403a[_0x29db52['axis']]-=_0x361c9d(_0x5f2e,_0x2bde2f),_0x5a47a[_0x18e3d7]={},_0x5a47a[_0x18e3d7][_0x29db52['axis']]=_0x4b403a[_0x29db52['axis']],_0x5a47a[_0x18e3d7][_0x39f8cc['axis']]=_0x4b403a[_0x39f8cc['axis']],_0x4b403a[_0x39f8cc['axis']]+=_0x30a765(_0x5f2e,_0x2bde2f),_0x4b403a[_0x29db52['axis']]+=_0x5524e6(_0x5f2e,_0x2bde2f)+_0x54672f['spacing'][_0x29db52['axis']];}_0x36ef31[_0x29db52['size']]=_0x4b403a[_0x29db52['axis']]-_0x54672f['spacing'][_0x29db52['axis']],_0x36ef31[_0x39f8cc['size']]=_0x36ef31['largestSiz'+'e'][_0x39f8cc['size']],_0x66c401[_0x29db52['size']]=Math['max'](_0x66c401[_0x29db52['size']],_0x36ef31[_0x29db52['size']]),_0x4b403a[_0x29db52['axis']]=-0x571+0x634+-0xc3,_0x4b403a[_0x39f8cc['axis']]+=_0x36ef31[_0x39f8cc['size']]+_0x54672f['spacing'][_0x39f8cc['axis']],_0x3c9ece['push'](_0x5a47a);}return _0x66c401[_0x39f8cc['size']]=_0x4b403a[_0x39f8cc['axis']]-_0x54672f['spacing'][_0x39f8cc['axis']],_0x3c9ece;}function _0x32b46c(_0x27a391,_0x8b45ff,_0x4b4484){const _0x5bc244=_0x54672f['alignment'][_0x29db52['axis']],_0x3db57b=_0x54672f['alignment'][_0x39f8cc['axis']],_0x2f2e7b=_0x54672f['padding'][_0x29db52['axis']],_0x3bbb0b=_0x54672f['padding'][_0x39f8cc['axis']];for(let _0x50931f=-0x2535+-0x6*0x280+0x3435;_0x50931f<_0x27a391['length'];++_0x50931f){const _0x227be9=_0x27a391[_0x50931f],_0x3837b5=_0x8b45ff[_0x50931f],_0x4002d6=_0x4b4484[_0x50931f],_0x467b88=(ls[_0x29db52['axis']]-_0x227be9[_0x29db52['size']])*_0x5bc244+_0x2f2e7b,_0x123e7f=(ls[_0x39f8cc['axis']]-_0x27a391[_0x39f8cc['size']])*_0x3db57b+_0x3bbb0b;for(let _0x6d1a6b=0x1*-0x19b1+-0x1*0x6a6+0x2057;_0x6d1a6b<_0x227be9['length'];++_0x6d1a6b){const _0x21e703=(_0x227be9[_0x39f8cc['size']]-_0x3837b5[_0x6d1a6b][_0x39f8cc['size']])*_0x54672f['alignment'][_0x39f8cc['axis']];_0x4002d6[_0x6d1a6b][_0x29db52['axis']]+=_0x467b88,_0x4002d6[_0x6d1a6b][_0x39f8cc['axis']]+=_0x123e7f+_0x21e703;}}}function _0x2cfc2a(_0x215f0f,_0x2e0baa,_0x3643bc){for(let _0x2eaf1c=0x236d*-0x1+-0x8b*0x1+0x23f8;_0x2eaf1c<_0x215f0f['length'];++_0x2eaf1c){const _0xdbbc06=_0x215f0f[_0x2eaf1c],_0x54b839=_0x2e0baa[_0x2eaf1c],_0x58f374=_0x3643bc[_0x2eaf1c];for(let _0x59aecf=0x54e+0x1f*-0x141+-0x2191*-0x1;_0x59aecf<_0xdbbc06['length'];++_0x59aecf){const _0x369346=_0xdbbc06[_0x59aecf];_0x369346[_0x29db52['calculated'+'Size']]=_0x54b839[_0x59aecf][_0x29db52['size']],_0x369346[_0x39f8cc['calculated'+'Size']]=_0x54b839[_0x59aecf][_0x39f8cc['size']],_0x54672f['orientatio'+'n']===Ce?_0x369346['entity']['setLocalPo'+'sition'](_0x58f374[_0x59aecf][_0x29db52['axis']],_0x58f374[_0x59aecf][_0x39f8cc['axis']],_0x369346['entity']['getLocalPo'+'sition']()['z']):_0x369346['entity']['setLocalPo'+'sition'](_0x58f374[_0x59aecf][_0x39f8cc['axis']],_0x58f374[_0x59aecf][_0x29db52['axis']],_0x369346['entity']['getLocalPo'+'sition']()['z']);}}}function _0x1055b4(_0x4406f2){const _0x48d68f=_0x4406f2['width'],_0x219976=_0x4406f2['height'],_0x3ccb83=(ls['x']-_0x48d68f)*_0x54672f['alignment']['x']+_0x54672f['padding']['x'],_0x32a686=(ls['y']-_0x219976)*_0x54672f['alignment']['y']+_0x54672f['padding']['y'];return{'bounds':new re(_0x3ccb83,_0x32a686,_0x48d68f,_0x219976)};}function _0x58b12c(_0x22f6b0){const _0x47c5d7=[];for(let _0x3d1242=-0x1070+-0xeea+0x1f5a;_0x3d1242<_0x22f6b0['length'];++_0x3d1242){const _0x4e56b0=_0x22f6b0[_0x3d1242],_0x3d65cc=Math['max'](_0x463a83(_0x4e56b0,'minWidth'),0xdbf+-0x182e+-0x1*-0xa6f),_0x4819a1=Math['max'](_0x463a83(_0x4e56b0,'minHeight'),0x1e82+0x9*0x2cd+-0x11*0x347),_0x1efb96=Math['max'](_0x463a83(_0x4e56b0,'maxWidth'),_0x3d65cc),_0x10b87d=Math['max'](_0x463a83(_0x4e56b0,'maxHeight'),_0x4819a1),_0x359d6b=_0x1b443e(_0x463a83(_0x4e56b0,'width'),_0x3d65cc,_0x1efb96),_0x1c1b06=_0x1b443e(_0x463a83(_0x4e56b0,'height'),_0x4819a1,_0x10b87d),_0x23a1a4=_0x463a83(_0x4e56b0,'fitWidthPr'+'oportion'),_0x239753=_0x463a83(_0x4e56b0,'fitHeightP'+'roportion');_0x47c5d7['push']({'minWidth':_0x3d65cc,'minHeight':_0x4819a1,'maxWidth':_0x1efb96,'maxHeight':_0x10b87d,'width':_0x359d6b,'height':_0x1c1b06,'fitWidthProportion':_0x23a1a4,'fitHeightProportion':_0x239753});}return _0x47c5d7;}function _0x463a83(_0x2e1a2c,_0xe6e1c0){const _0x46a2d8=_0x2e1a2c['entity']['layoutchil'+'d'];return _0x46a2d8&&_0x46a2d8['enabled']&&_0x46a2d8[_0xe6e1c0]!==void(-0x586+0x152f+-0xfa9)&&_0x46a2d8[_0xe6e1c0]!==null?_0x46a2d8[_0xe6e1c0]:_0x2e1a2c[_0xe6e1c0]!==void(-0x1d10+0x1956+0x3ba)?_0x2e1a2c[_0xe6e1c0]:VR[_0xe6e1c0];}function _0x1b443e(_0x17735f,_0x403a0e,_0x203402){return Math['min'](Math['max'](_0x17735f,_0x403a0e),_0x203402);}function _0x5743ec(_0x6a524,_0x4d56ca){return _0x6a524['reduce']((_0x389f54,_0x2ff8c5)=>_0x389f54+_0x2ff8c5[_0x4d56ca],-0x3af*0x4+0x16b5+0x9d*-0xd);}function _0x56047f(_0xc5780,_0x15c9e3){const _0xf8b43=_0x5743ec(_0xc5780,_0x15c9e3),_0x3f2496=[],_0x4ad57b=_0xc5780['length'];if(_0xf8b43===0x105b+-0x2*0xac2+0x529){for(let _0x50decd=0x1*0x11cb+-0x18fe+0x733*0x1;_0x50decd<_0x4ad57b;++_0x50decd)_0x3f2496['push']((0x1d54+-0x1*0x24db+-0x2*-0x3c4)/_0x4ad57b);}else{for(let _0x11e0f7=-0x51b*-0x1+-0xf6b*-0x1+0x4a*-0x47;_0x11e0f7<_0x4ad57b;++_0x11e0f7)_0x3f2496['push'](_0xc5780[_0x11e0f7][_0x15c9e3]/_0xf8b43);}return _0x3f2496;}function _0x3c8660(_0x883f6c){if(_0x883f6c['length']===-0x8*0x40b+0x1*0xfef+0x106a)return[-0x20*-0x65+-0x2ad+-0x9f2];const _0x2fa055=[],_0x87f870=_0x883f6c['length'];for(let _0x18fd67=-0x1*0x1168+0x1c1c+-0xab4;_0x18fd67<_0x87f870;++_0x18fd67)_0x2fa055['push']((0x3fd+-0x10f5+0xcf9-_0x883f6c[_0x18fd67])/(_0x87f870-(-0x1*-0x25ab+-0x4*0x5cf+-0xe6e)));return _0x2fa055;}function _0x17b6fa(_0x5462db,_0x340baf,_0x5478f7){return _0x5462db['forEach'](_0x40937d),_0x5462db['slice']()['sort']((_0x5a0535,_0x5557d6)=>_0x5478f7?_0x5557d6[_0x340baf]-_0x5a0535[_0x340baf]:_0x5a0535[_0x340baf]-_0x5557d6[_0x340baf])['map'](_0x371d66);}function _0x40937d(_0x58706c,_0x377169){_0x58706c['index']=_0x377169;}function _0x371d66(_0x8ed818){return _0x8ed818['index'];}function _0x1fbefa(_0x2b0a1b,_0x54a0d9){const _0xd3a47a=[];_0xd3a47a[_0x54a0d9[_0x2b0a1b['length']-(0x47*-0x33+-0x5ef+0x35*0x61)]]=_0x2b0a1b[_0x54a0d9[_0x2b0a1b['length']-(0x1*-0x1d7b+0x8*0x425+-0x3ac)]];for(let _0xca769a=_0x2b0a1b['length']-(0xcb6+0xd43+-0x19f7*0x1);_0xca769a>=0x239c+-0xab*-0x6+-0x2*0x13cf;--_0xca769a)_0xd3a47a[_0x54a0d9[_0xca769a]]=_0xd3a47a[_0x54a0d9[_0xca769a+(0x2*0xc74+-0x1af7+0x210)]]+_0x2b0a1b[_0x54a0d9[_0xca769a]];return _0xd3a47a;}return _0x2e3ac4;}const xm={};xm[Ce]=t0(Ce),xm[je]=t0(je);class GR{['calculateL'+'ayout'](_0x3a7244,_0xf7e393){const _0x497044=xm[_0xf7e393['orientatio'+'n']];if(_0x497044)return _0x497044(_0x3a7244,_0xf7e393);throw new Error('Unrecogniz'+'ed\x20orienta'+'tion\x20value'+':\x20'+_0xf7e393['orientatio'+'n']);}}function Jg(_0x2c9185){return _0x2c9185['element'];}function HR(_0x3611cc){return _0x3611cc['enabled']&&_0x3611cc['element']&&_0x3611cc['element']['enabled'];}class s0 extends we{constructor(_0x4c1ada,_0x99129){super(_0x4c1ada,_0x99129),h(this,'_orientati'+'on',Ce),h(this,'_reverseX',!(-0xc*-0x1e9+-0x2*0xfae+-0x1*-0x871)),h(this,'_reverseY',!(0x921+0xca7+-0x22*0xa4)),h(this,'_alignment',new J(-0x1e2d+-0x17d+-0x243*-0xe,0x3*0x87e+-0x21eb+0x2*0x439)),h(this,'_padding',new re()),h(this,'_spacing',new J()),h(this,'_widthFitt'+'ing',Nu),h(this,'_heightFit'+'ting',Nu),h(this,'_wrap',!(0x18*-0x49+0xef1+-0x25*0x38)),h(this,'_layoutCal'+'culator',new GR()),(this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'on'),this['entity']['children']['forEach'](_0x304c86=>{this['_listenFor'+'ReflowEven'+'ts'](_0x304c86,'on');}),this['entity']['on']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['on']('childremov'+'e',this['_onChildRe'+'move'],this),w['assert'](_0x4c1ada['app']['systems']['element'],'System\x20\x27el'+'ement\x27\x20doe'+'sn\x27t\x20exist'),_0x4c1ada['app']['systems']['element']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0x4c1ada['app']['systems']['element']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),w['assert'](_0x4c1ada['app']['systems']['layoutchil'+'d'],'System\x20\x27la'+'youtchild\x27'+'\x20doesn\x27t\x20e'+'xist'),_0x4c1ada['app']['systems']['layoutchil'+'d']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0x4c1ada['app']['systems']['layoutchil'+'d']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this));}set['orientatio'+'n'](_0x1828a5){_0x1828a5!==this['_orientati'+'on']&&(this['_orientati'+'on']=_0x1828a5,this['_scheduleR'+'eflow']());}get['orientatio'+'n'](){return this['_orientati'+'on'];}set['reverseX'](_0x1d286b){_0x1d286b!==this['_reverseX']&&(this['_reverseX']=_0x1d286b,this['_scheduleR'+'eflow']());}get['reverseX'](){return this['_reverseX'];}set['reverseY'](_0xb59d28){_0xb59d28!==this['_reverseY']&&(this['_reverseY']=_0xb59d28,this['_scheduleR'+'eflow']());}get['reverseY'](){return this['_reverseY'];}set['alignment'](_0x60c6de){_0x60c6de['equals'](this['_alignment'])||(this['_alignment']['copy'](_0x60c6de),this['_scheduleR'+'eflow']());}get['alignment'](){return this['_alignment'];}set['padding'](_0x2e778f){_0x2e778f['equals'](this['_padding'])||(this['_padding']['copy'](_0x2e778f),this['_scheduleR'+'eflow']());}get['padding'](){return this['_padding'];}set['spacing'](_0x1bc20b){_0x1bc20b['equals'](this['_spacing'])||(this['_spacing']['copy'](_0x1bc20b),this['_scheduleR'+'eflow']());}get['spacing'](){return this['_spacing'];}set['widthFitti'+'ng'](_0x389427){_0x389427!==this['_widthFitt'+'ing']&&(this['_widthFitt'+'ing']=_0x389427,this['_scheduleR'+'eflow']());}get['widthFitti'+'ng'](){return this['_widthFitt'+'ing'];}set['heightFitt'+'ing'](_0x3a3d88){_0x3a3d88!==this['_heightFit'+'ting']&&(this['_heightFit'+'ting']=_0x3a3d88,this['_scheduleR'+'eflow']());}get['heightFitt'+'ing'](){return this['_heightFit'+'ting'];}set['wrap'](_0x5f2596){_0x5f2596!==this['_wrap']&&(this['_wrap']=_0x5f2596,this['_scheduleR'+'eflow']());}get['wrap'](){return this['_wrap'];}['_isSelfOrC'+'hild'](_0x470a07){return _0x470a07===this['entity']||this['entity']['children']['indexOf'](_0x470a07)!==-(-0x1*0x23e3+0x58a+0x1e5a);}['_listenFor'+'ReflowEven'+'ts'](_0x22f4da,_0x4b86bd){_0x22f4da['element']&&(_0x22f4da['element'][_0x4b86bd]('enableelem'+'ent',this['_scheduleR'+'eflow'],this),_0x22f4da['element'][_0x4b86bd]('disableele'+'ment',this['_scheduleR'+'eflow'],this),_0x22f4da['element'][_0x4b86bd]('resize',this['_scheduleR'+'eflow'],this),_0x22f4da['element'][_0x4b86bd]('set:pivot',this['_scheduleR'+'eflow'],this)),_0x22f4da['layoutchil'+'d']&&(_0x22f4da['layoutchil'+'d'][_0x4b86bd]('set_enable'+'d',this['_scheduleR'+'eflow'],this),_0x22f4da['layoutchil'+'d'][_0x4b86bd]('resize',this['_scheduleR'+'eflow'],this));}['_onElement'+'OrLayoutCo'+'mponentAdd'](_0x4d0e9e){this['_isSelfOrC'+'hild'](_0x4d0e9e)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x4d0e9e,'on'),this['_scheduleR'+'eflow']());}['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'](_0x3c5995){this['_isSelfOrC'+'hild'](_0x3c5995)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x3c5995,'off'),this['_scheduleR'+'eflow']());}['_onChildIn'+'sert'](_0x4c626a){this['_listenFor'+'ReflowEven'+'ts'](_0x4c626a,'on'),this['_scheduleR'+'eflow']();}['_onChildRe'+'move'](_0x1bd465){this['_listenFor'+'ReflowEven'+'ts'](_0x1bd465,'off'),this['_scheduleR'+'eflow']();}['_scheduleR'+'eflow'](){this['enabled']&&this['entity']&&this['entity']['enabled']&&!this['_isPerform'+'ingReflow']&&this['system']['scheduleRe'+'flow'](this);}['reflow'](){const _0x36c1dd=Jg(this['entity']),_0x3b5753=this['entity']['children']['filter'](HR)['map'](Jg);if(!_0x36c1dd||_0x3b5753['length']===0x1491+-0x26*-0x5f+-0x22ab)return;const _0x5c05d3=Math['max'](_0x36c1dd['calculated'+'Width'],-0x1*-0x449+-0x22a*-0x11+-0xdb1*0x3),_0x4448ec=Math['max'](_0x36c1dd['calculated'+'Height'],0x6*0x676+0xf1f+-0x35e3),_0x432d27={'orientation':this['_orientati'+'on'],'reverseX':this['_reverseX'],'reverseY':this['_reverseY'],'alignment':this['_alignment'],'padding':this['_padding'],'spacing':this['_spacing'],'widthFitting':this['_widthFitt'+'ing'],'heightFitting':this['_heightFit'+'ting'],'wrap':this['_wrap'],'containerSize':new J(_0x5c05d3,_0x4448ec)};this['_isPerform'+'ingReflow']=!(0xc*-0x7f+0x4*0x293+-0x458);const _0x2f2eed=this['_layoutCal'+'culator']['calculateL'+'ayout'](_0x3b5753,_0x432d27);this['_isPerform'+'ingReflow']=!(-0xa12+-0x1a9+0xbbc),this['fire']('reflow',_0x2f2eed);}['onEnable'](){this['_scheduleR'+'eflow']();}['onRemove'](){this['entity']['off']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['off']('childremov'+'e',this['_onChildRe'+'move'],this),this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'off'),this['entity']['children']['forEach'](_0x4bce67=>{this['_listenFor'+'ReflowEven'+'ts'](_0x4bce67,'off');}),this['system']['app']['systems']['element']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['element']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this);}}class WR{constructor(){this['enabled']=!(0x13f+-0x25d9+-0x752*-0x5);}}const i0=['enabled'],$R=-0x1*-0xbfb+-0xb03+-0x2*0x4a;class XR extends ct{constructor(_0x323f41){super(_0x323f41),this['id']='layoutgrou'+'p',this['ComponentT'+'ype']=s0,this['DataType']=WR,this['schema']=i0,this['_reflowQue'+'ue']=[],this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x3b41fa,_0x4105a4,_0x3fc7e5){_0x4105a4['enabled']!==void(0x4ad+-0x1912+0x1465)&&(_0x3b41fa['enabled']=_0x4105a4['enabled']),_0x4105a4['orientatio'+'n']!==void(-0x1d29*-0x1+-0x1*-0xdb1+-0x1*0x2ada)&&(_0x3b41fa['orientatio'+'n']=_0x4105a4['orientatio'+'n']),_0x4105a4['reverseX']!==void(-0x1761+-0x1*-0x224b+0x575*-0x2)&&(_0x3b41fa['reverseX']=_0x4105a4['reverseX']),_0x4105a4['reverseY']!==void(-0x155d+0x8ed*-0x1+0x1*0x1e4a)&&(_0x3b41fa['reverseY']=_0x4105a4['reverseY']),_0x4105a4['alignment']!==void(0x1356+-0x2*-0xde5+0xbc8*-0x4)&&(_0x3b41fa['alignment']=Array['isArray'](_0x4105a4['alignment'])?new J(_0x4105a4['alignment']):_0x4105a4['alignment']),_0x4105a4['padding']!==void(-0xea9+0x1536+0x22f*-0x3)&&(_0x3b41fa['padding']=Array['isArray'](_0x4105a4['padding'])?new re(_0x4105a4['padding']):_0x4105a4['padding']),_0x4105a4['spacing']!==void(-0xf2*-0x2+0x270a+-0x28ee)&&(_0x3b41fa['spacing']=Array['isArray'](_0x4105a4['spacing'])?new J(_0x4105a4['spacing']):_0x4105a4['spacing']),_0x4105a4['widthFitti'+'ng']!==void(-0x7c4+0x7*-0xe7+0xe15)&&(_0x3b41fa['widthFitti'+'ng']=_0x4105a4['widthFitti'+'ng']),_0x4105a4['heightFitt'+'ing']!==void(0x2*0x12e3+-0x1442+-0x1184)&&(_0x3b41fa['heightFitt'+'ing']=_0x4105a4['heightFitt'+'ing']),_0x4105a4['wrap']!==void(-0x92e*0x1+-0x47*-0x11+-0x1*-0x477)&&(_0x3b41fa['wrap']=_0x4105a4['wrap']),super['initialize'+'ComponentD'+'ata'](_0x3b41fa,_0x4105a4,_0x3fc7e5);}['cloneCompo'+'nent'](_0x426c48,_0x4af3c9){const _0xa811b9=_0x426c48['layoutgrou'+'p'];return this['addCompone'+'nt'](_0x4af3c9,{'enabled':_0xa811b9['enabled'],'orientation':_0xa811b9['orientatio'+'n'],'reverseX':_0xa811b9['reverseX'],'reverseY':_0xa811b9['reverseY'],'alignment':_0xa811b9['alignment'],'padding':_0xa811b9['padding'],'spacing':_0xa811b9['spacing'],'widthFitting':_0xa811b9['widthFitti'+'ng'],'heightFitting':_0xa811b9['heightFitt'+'ing'],'wrap':_0xa811b9['wrap']});}['scheduleRe'+'flow'](_0x3b5540){this['_reflowQue'+'ue']['indexOf'](_0x3b5540)===-(-0x24*0x17+-0x1ab3+-0xef8*-0x2)&&this['_reflowQue'+'ue']['push'](_0x3b5540);}['_onPostUpd'+'ate'](){this['_processRe'+'flowQueue']();}['_processRe'+'flowQueue'](){if(this['_reflowQue'+'ue']['length']===0x2c7*0x4+-0xb63+0x47)return;let _0x37076c=-0x109a+0x130c+-0x272;for(;this['_reflowQue'+'ue']['length']>0x47*0x3f+-0x249c+-0x17*-0xd5;){const _0x2ecc05=this['_reflowQue'+'ue']['slice']();this['_reflowQue'+'ue']['length']=0x6*0x23e+-0x6*0x3bf+0x16*0x69,_0x2ecc05['sort']((_0x48e8b5,_0x3afe41)=>_0x48e8b5['entity']['graphDepth']-_0x3afe41['entity']['graphDepth']);for(let _0x26da95=0x173+0x2f*0x60+-0x1313;_0x26da95<_0x2ecc05['length'];++_0x26da95)_0x2ecc05[_0x26da95]['reflow']();if(++_0x37076c>=$R){console['warn']('Max\x20reflow'+'\x20iteration'+'s\x20limit\x20re'+'ached,\x20bai'+'ling.');break;}}}['_onRemoveC'+'omponent'](_0x4613e6,_0x21a16c){_0x21a16c['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}we['_buildAcce'+'ssors'](s0['prototype'],i0);class qR{constructor(){h(this,'map',new Map());}['destroy'](_0x489cb1){this['map']['forEach'](_0x37619d=>_0x37619d['mesh']['destroy']());}}const jR=new Kt(),r0=(_0x2035ca,_0x885de9)=>{const _0x499af8=jR['get'](_0x2035ca,()=>new qR());let _0x18db29=_0x499af8['map']['get'](_0x885de9);if(!_0x18db29){let _0x42bc4d,_0x48c11b;switch(_0x885de9){case'box':_0x42bc4d=Ge['fromGeomet'+'ry'](_0x2035ca,new mu()),_0x48c11b={'x':0x2,'y':0x2,'z':0x2,'uv':(-0x80f*-0x1+0x893*-0x1+0x43*0x2)/(-0x60+-0x2*-0x407+-0x1*0x7ab)};break;case'capsule':_0x42bc4d=Ge['fromGeomet'+'ry'](_0x2035ca,new GA({'radius':0.5,'height':0x2})),_0x48c11b={'x':Math['PI']*(0x1233+-0x2042+0xe11),'y':Math['PI'],'z':Math['PI']*(0x105+-0x2*0x723+0xd43),'uv':(0xa81+0x1ff6+-0x2a76)/(0x374+-0x1751*0x1+0x9f0*0x2)+(0x55d+-0x2486+0x1f2a)/(0x91a+-0x1873+0xf5c)/(-0x21f2+0x1a53+-0x3d1*-0x2)*(0x3*-0xa62+0x1*0x128c+0xc9c)};break;case'cone':_0x42bc4d=Ge['fromGeomet'+'ry'](_0x2035ca,new HA({'baseRadius':0.5,'peakRadius':0x0,'height':0x1})),_0x48c11b={'x':2.54,'y':2.54,'z':2.54,'uv':(-0x20c9+-0x176b+0x3835)/(-0x1f56+0x80*-0x2e+0x3659)+(0x6*-0x242+0x349+0xa44)/(0x15d7*-0x1+0x3*-0x6f7+0x2abf)/(0x42b+0x449*0x7+-0x2227)};break;case'cylinder':_0x42bc4d=Ge['fromGeomet'+'ry'](_0x2035ca,new WA({'radius':0.5,'height':0x1})),_0x48c11b={'x':Math['PI'],'y':(-0x9*0x3ee+-0x2656+0x49b4+0.79)*(-0x19*0x4f+0xa8*-0x34+-0x3*-0xdf3),'z':Math['PI'],'uv':(0x65+0xe59+0x31*-0x4d)/(0x1*0xfd9+0x1f4*0x1+-0x2*0x8e5)+(-0x79c*-0x2+0x5*0x387+-0xa*0x349)/(-0xb*-0x1+0x775*-0x2+0xee2)/(0x11b7*0x1+0x1230+-0x8f9*0x4)*(0x77*0x1f+0x46d*-0x1+-0x2*0x4fd)};break;case'plane':_0x42bc4d=Ge['fromGeomet'+'ry'](_0x2035ca,new $A({'halfExtents':new J(0x1d*-0x3+0xc41+-0x5f5*0x2+0.5,0x1*-0x1079+-0x15b5+0x262e+0.5),'widthSegments':0x1,'lengthSegments':0x1})),_0x48c11b={'x':0x0,'y':0x1,'z':0x0,'uv':0x1};break;case'sphere':_0x42bc4d=Ge['fromGeomet'+'ry'](_0x2035ca,new _m({'radius':0.5})),_0x48c11b={'x':Math['PI'],'y':Math['PI'],'z':Math['PI'],'uv':0x1};break;case'torus':_0x42bc4d=Ge['fromGeomet'+'ry'](_0x2035ca,new XA({'tubeRadius':0.2,'ringRadius':0.3})),_0x48c11b={'x':Math['PI']*(-0x2503*-0x1+-0x1*0x1547+0x1*-0xfbc+0.5)*(-0x378+-0xb5c*0x3+0xb2*0x36+0.5)-Math['PI']*(-0x3*-0x6d+-0x4f*0x66+0x1*0x1e33+0.1)*(0x79*-0x16+0x8f7*0x2+0x8*-0xf1+0.1),'y':0.4,'z':0.4,'uv':0x1};break;default:throw new Error('Invalid\x20pr'+'imitive\x20ty'+'pe:\x20'+_0x885de9);}_0x42bc4d['incRefCoun'+'t'](),_0x18db29={'mesh':_0x42bc4d,'area':_0x48c11b},_0x499af8['map']['set'](_0x885de9,_0x18db29);}return _0x18db29;};class Tm extends we{constructor(_0x3c2a7d,_0x358075){super(_0x3c2a7d,_0x358075),h(this,'_type','asset'),h(this,'_asset',null),h(this,'_model',null),h(this,'_mapping',{}),h(this,'_castShado'+'ws',!(-0x9*0x2cd+0xe*0x1a5+0x22f*0x1)),h(this,'_receiveSh'+'adows',!(-0x5*-0x141+0x42c+-0x63*0x1b)),h(this,'_materialA'+'sset',null),h(this,'_material'),h(this,'_castShado'+'wsLightmap',!(-0x2390+0x1*0x13cd+0xfc3)),h(this,'_lightmapp'+'ed',!(-0x10ca+0x1a0e+-0x943)),h(this,'_lightmapS'+'izeMultipl'+'ier',-0x204*-0xc+-0x88c+-0xfa3),h(this,'isStatic',!(-0x9*-0x279+-0x3a6+-0x129a)),h(this,'_layers',[er]),h(this,'_batchGrou'+'pId',-(0x1ead*0x1+0x419+-0x22c5)),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_materialE'+'vents',null),h(this,'_clonedMod'+'el',!(0x828+-0x98*-0x2+-0x957)),h(this,'_batchGrou'+'p',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_material']=_0x3c2a7d['defaultMat'+'erial'],_0x358075['on']('remove',this['onRemoveCh'+'ild'],this),_0x358075['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x358075['on']('insert',this['onInsertCh'+'ild'],this),_0x358075['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['meshInstan'+'ces'](_0xe66f8d){this['_model']&&(this['_model']['meshInstan'+'ces']=_0xe66f8d);}get['meshInstan'+'ces'](){return this['_model']?this['_model']['meshInstan'+'ces']:null;}set['customAabb'](_0x4e5c3b){if(this['_customAab'+'b']=_0x4e5c3b,this['_model']){const _0x316ef8=this['_model']['meshInstan'+'ces'];if(_0x316ef8){for(let _0x53dcb9=0x1*-0x1243+-0xb5f*-0x2+0x25*-0x1f;_0x53dcb9<_0x316ef8['length'];_0x53dcb9++)_0x316ef8[_0x53dcb9]['setCustomA'+'abb'](this['_customAab'+'b']);}}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x134bc4){if(this['_type']!==_0x134bc4){if(this['_area']=null,this['_type']=_0x134bc4,_0x134bc4==='asset')this['_asset']!==null?this['_bindModel'+'Asset'](this['_asset']):this['model']=null;else{const _0x509cd4=r0(this['system']['app']['graphicsDe'+'vice'],_0x134bc4);this['_area']=_0x509cd4['area'];const _0x5e4b86=_0x509cd4['mesh'],_0x3d8913=new Ie(),_0x5f0756=new sr();_0x5f0756['graph']=_0x3d8913,_0x5f0756['meshInstan'+'ces']=[new He(_0x5e4b86,this['_material'],_0x3d8913)],this['model']=_0x5f0756,this['_asset']=null;}}}get['type'](){return this['_type'];}set['asset'](_0x339e08){const _0x4f9cde=this['system']['app']['assets'];let _0x29d855=_0x339e08;if(_0x339e08 instanceof pe&&(_0x29d855=_0x339e08['id']),this['_asset']!==_0x29d855){if(this['_asset']){_0x4f9cde['off']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this);const _0x14db2a=_0x4f9cde['get'](this['_asset']);_0x14db2a&&this['_unbindMod'+'elAsset'](_0x14db2a);}if(this['_asset']=_0x29d855,this['_asset']){const _0x436372=_0x4f9cde['get'](this['_asset']);_0x436372?this['_bindModel'+'Asset'](_0x436372):(this['model']=null,_0x4f9cde['on']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this));}else this['model']=null;}}get['asset'](){return this['_asset'];}set['model'](_0x5947e3){if(this['_model']!==_0x5947e3){if(_0x5947e3&&_0x5947e3['_immutable']){w['error']('Invalid\x20at'+'tempt\x20to\x20a'+'ssign\x20a\x20mo'+'del\x20to\x20mul'+'tiple\x20Mode'+'lComponent'+'s');return;}if(this['_model']&&(this['_model']['_immutable']=!(0x1d+-0x1*0x16dd+0x5*0x48d),this['removeMode'+'lFromLayer'+'s'](),this['_model']['getGraph']()['destroy'](),delete this['_model']['_entity'],this['_clonedMod'+'el']&&(this['_model']['destroy'](),this['_clonedMod'+'el']=!(-0x3e*0x95+-0x11c3+0x35da))),this['_model']=_0x5947e3,this['_model']){this['_model']['_immutable']=!(0x1dc9+-0x1297+-0xb32);const _0x4fbb75=this['_model']['meshInstan'+'ces'];for(let _0x5ae985=-0x235e+-0xbe6*-0x1+-0x4*-0x5de;_0x5ae985<_0x4fbb75['length'];_0x5ae985++)_0x4fbb75[_0x5ae985]['castShadow']=this['_castShado'+'ws'],_0x4fbb75[_0x5ae985]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x4fbb75[_0x5ae985]['setCustomA'+'abb'](this['_customAab'+'b']);this['lightmappe'+'d']=this['_lightmapp'+'ed'],this['entity']['addChild'](this['_model']['graph']),this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_model']['_entity']=this['entity'],this['entity']['animation']&&this['entity']['animation']['setModel'](this['_model']),this['entity']['anim']&&this['entity']['anim']['rebind'](),this['type']==='asset'?this['mapping']=this['_mapping']:this['_unsetMate'+'rialEvents']();}}}get['model'](){return this['_model'];}set['lightmappe'+'d'](_0x17a8f4){if(_0x17a8f4!==this['_lightmapp'+'ed']&&(this['_lightmapp'+'ed']=_0x17a8f4,this['_model'])){const _0x1687fc=this['_model']['meshInstan'+'ces'];for(let _0x3f2f29=-0x1e1f+-0x1a19+0xe*0x404;_0x3f2f29<_0x1687fc['length'];_0x3f2f29++)_0x1687fc[_0x3f2f29]['setLightma'+'pped'](_0x17a8f4);}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x2263a2){if(this['_castShado'+'ws']===_0x2263a2)return;const _0x17c321=this['_model'];if(_0x17c321){const _0x3ee8d7=this['layers'],_0x15c63e=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x2263a2)for(let _0x382997=-0x1*0x1c3d+-0x1a6*-0x7+-0x13*-0xe1;_0x382997<_0x3ee8d7['length'];_0x382997++){const _0x501d72=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x382997]);_0x501d72&&_0x501d72['removeShad'+'owCasters'](_0x17c321['meshInstan'+'ces']);}const _0x1e143e=_0x17c321['meshInstan'+'ces'];for(let _0x211d75=0x11c7+-0x5f0+-0xbd7;_0x211d75<_0x1e143e['length'];_0x211d75++)_0x1e143e[_0x211d75]['castShadow']=_0x2263a2;if(!this['_castShado'+'ws']&&_0x2263a2)for(let _0x310bd1=-0xc11+0x2022+0x1d3*-0xb;_0x310bd1<_0x3ee8d7['length'];_0x310bd1++){const _0x53716d=_0x15c63e['layers']['getLayerBy'+'Id'](_0x3ee8d7[_0x310bd1]);_0x53716d&&_0x53716d['addShadowC'+'asters'](_0x17c321['meshInstan'+'ces']);}}this['_castShado'+'ws']=_0x2263a2;}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x583af5){if(this['_receiveSh'+'adows']!==_0x583af5&&(this['_receiveSh'+'adows']=_0x583af5,this['_model'])){const _0x10a4f9=this['_model']['meshInstan'+'ces'];for(let _0x3eaa8d=-0x160d+-0xd7*-0xa+0xda7,_0x113b42=_0x10a4f9['length'];_0x3eaa8d<_0x113b42;_0x3eaa8d++)_0x10a4f9[_0x3eaa8d]['receiveSha'+'dow']=_0x583af5;}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x3adcbf){this['_castShado'+'wsLightmap']=_0x3adcbf;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x3c939f){this['_lightmapS'+'izeMultipl'+'ier']=_0x3c939f;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x4ce73a){const _0x1f25b4=this['system']['app']['scene']['layers'];if(this['meshInstan'+'ces'])for(let _0x5d3a30=-0xbf*0x13+-0x24ab+0x65b*0x8;_0x5d3a30<this['_layers']['length'];_0x5d3a30++){const _0x4d4e63=_0x1f25b4['getLayerBy'+'Id'](this['_layers'][_0x5d3a30]);_0x4d4e63&&_0x4d4e63['removeMesh'+'Instances'](this['meshInstan'+'ces']);}this['_layers']['length']=-0x1b22+0x1af8+0x15*0x2;for(let _0x5f5947=-0x15e1+-0x488+0x1a69;_0x5f5947<_0x4ce73a['length'];_0x5f5947++)this['_layers'][_0x5f5947]=_0x4ce73a[_0x5f5947];if(!(!this['enabled']||!this['entity']['enabled']||!this['meshInstan'+'ces']))for(let _0x5e39d9=-0x1*0x21d9+0x6*0x601+-0x22d*0x1;_0x5e39d9<this['_layers']['length'];_0x5e39d9++){const _0x3b6d87=_0x1f25b4['getLayerBy'+'Id'](this['_layers'][_0x5e39d9]);_0x3b6d87&&_0x3b6d87['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x27736d){var _0x2bfabe,_0x9b98e5;this['_batchGrou'+'pId']!==_0x27736d&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0x16ac+-0x71d*-0x5+-0x1*0x3a3d&&((_0x2bfabe=this['system']['app']['batcher'])==null||_0x2bfabe['remove'](St['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x27736d>=0xe*0x296+-0xbaf*-0x1+0x17*-0x215&&((_0x9b98e5=this['system']['app']['batcher'])==null||_0x9b98e5['insert'](St['MODEL'],_0x27736d,this['entity'])),_0x27736d<0x485*0x2+-0x67f*-0x3+0x1c87*-0x1&&this['_batchGrou'+'pId']>=-0x1041+-0x1bd1+0x2c12&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_batchGrou'+'pId']=_0x27736d);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['materialAs'+'set'](_0x1de05f){let _0x5148c2=_0x1de05f;_0x1de05f instanceof pe&&(_0x5148c2=_0x1de05f['id']);const _0x3dbeec=this['system']['app']['assets'];if(_0x5148c2!==this['_materialA'+'sset']){if(this['_materialA'+'sset']){_0x3dbeec['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this);const _0x59e86f=_0x3dbeec['get'](this['_materialA'+'sset']);_0x59e86f&&this['_unbindMat'+'erialAsset'](_0x59e86f);}if(this['_materialA'+'sset']=_0x5148c2,this['_materialA'+'sset']){const _0x2dee48=_0x3dbeec['get'](this['_materialA'+'sset']);_0x2dee48?this['_bindMater'+'ialAsset'](_0x2dee48):(this['_setMateri'+'al'](this['system']['defaultMat'+'erial']),_0x3dbeec['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this));}else this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['material'](_0x28bea5){this['_material']!==_0x28bea5&&(this['materialAs'+'set']=null,this['_setMateri'+'al'](_0x28bea5));}get['material'](){return this['_material'];}set['mapping'](_0x3fe3b6){if(this['_type']!=='asset'||(this['_unsetMate'+'rialEvents'](),_0x3fe3b6||(_0x3fe3b6={}),this['_mapping']=_0x3fe3b6,!this['_model']))return;const _0x4c159d=this['_model']['meshInstan'+'ces'],_0x40896b=this['asset']?this['system']['app']['assets']['get'](this['asset']):null,_0x55899f=_0x40896b?_0x40896b['data']['mapping']:null;let _0x4cea40=null;for(let _0x3d1b47=0x1447*-0x1+0xa3d*0x3+0x29c*-0x4,_0xbab91a=_0x4c159d['length'];_0x3d1b47<_0xbab91a;_0x3d1b47++)if(_0x3fe3b6[_0x3d1b47]!==void(0x12*0xe+-0x21c1+0x1*0x20c5))_0x3fe3b6[_0x3d1b47]?(_0x4cea40=this['system']['app']['assets']['get'](_0x3fe3b6[_0x3d1b47]),this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x4cea40,_0x4c159d[_0x3d1b47],_0x3d1b47)):_0x4c159d[_0x3d1b47]['material']=this['system']['defaultMat'+'erial'];else{if(_0x55899f){if(_0x55899f[_0x3d1b47]&&(_0x55899f[_0x3d1b47]['material']||_0x55899f[_0x3d1b47]['path'])){if(_0x55899f[_0x3d1b47]['material']!==void(-0x1a65*-0x1+-0x1bf9+0xca*0x2))_0x4cea40=this['system']['app']['assets']['get'](_0x55899f[_0x3d1b47]['material']);else{if(_0x55899f[_0x3d1b47]['path']!==void(0x97*0x33+-0x1669+0x4*-0x1eb)){const _0x4a62cd=this['_getMateri'+'alAssetUrl'](_0x55899f[_0x3d1b47]['path']);_0x4a62cd&&(_0x4cea40=this['system']['app']['assets']['getByUrl'](_0x4a62cd));}}this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x4cea40,_0x4c159d[_0x3d1b47],_0x3d1b47);}else _0x4c159d[_0x3d1b47]['material']=this['system']['defaultMat'+'erial'];}}}get['mapping'](){return this['_mapping'];}['addModelTo'+'Layers'](){const _0x14a8c7=this['system']['app']['scene']['layers'];for(let _0x376f1a=-0x151c+-0x1*0x2479+0x3995;_0x376f1a<this['_layers']['length'];_0x376f1a++){const _0x5db4e9=_0x14a8c7['getLayerBy'+'Id'](this['_layers'][_0x376f1a]);_0x5db4e9&&_0x5db4e9['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](){const _0x36bab1=this['system']['app']['scene']['layers'];for(let _0x1f3e97=-0x1692+-0x1680+0x2d12;_0x1f3e97<this['_layers']['length'];_0x1f3e97++){const _0x1a6e9e=_0x36bab1['getLayerBy'+'Id'](this['_layers'][_0x1f3e97]);_0x1a6e9e&&_0x1a6e9e['removeMesh'+'Instances'](this['meshInstan'+'ces']);}}['onRemoveCh'+'ild'](){this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['onInsertCh'+'ild'](){this['_model']&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers']();}['onRemove'](){this['asset']=null,this['model']=null,this['materialAs'+'set']=null,this['_unsetMate'+'rialEvents'](),this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x5dacc0,_0x599888){this['addModelTo'+'Layers'](),_0x5dacc0['off']('add',this['onLayerAdd'+'ed'],this),_0x5dacc0['off']('remove',this['onLayerRem'+'oved'],this),_0x599888['on']('add',this['onLayerAdd'+'ed'],this),_0x599888['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x3b73a2){this['layers']['indexOf'](_0x3b73a2['id'])<0x6*0x515+-0x21f4+0x376||_0x3b73a2['addMeshIns'+'tances'](this['meshInstan'+'ces']);}['onLayerRem'+'oved'](_0x51b1f0){this['layers']['indexOf'](_0x51b1f0['id'])<-0x185*0xc+-0x1c+0x1258||_0x51b1f0['removeMesh'+'Instances'](this['meshInstan'+'ces']);}['_setMateri'+'alEvent'](_0x53bd36,_0x352706,_0x7c96dd,_0x3aa207){const _0x503745=_0x352706+':'+_0x7c96dd;this['system']['app']['assets']['on'](_0x503745,_0x3aa207,this),this['_materialE'+'vents']||(this['_materialE'+'vents']=[]),this['_materialE'+'vents'][_0x53bd36]||(this['_materialE'+'vents'][_0x53bd36]={}),this['_materialE'+'vents'][_0x53bd36][_0x503745]={'id':_0x7c96dd,'handler':_0x3aa207};}['_unsetMate'+'rialEvents'](){const _0x4212b8=this['system']['app']['assets'],_0x3cc528=this['_materialE'+'vents'];if(_0x3cc528){for(let _0x5e2ed3=0x67*-0x5+0x1361+0x26*-0x75,_0x123e97=_0x3cc528['length'];_0x5e2ed3<_0x123e97;_0x5e2ed3++){if(!_0x3cc528[_0x5e2ed3])continue;const _0x55265e=_0x3cc528[_0x5e2ed3];for(const _0x4bb096 in _0x55265e)_0x4212b8['off'](_0x4bb096,_0x55265e[_0x4bb096]['handler'],this);}this['_materialE'+'vents']=null;}}['_getAssetB'+'yIdOrPath'](_0x5996a2){let _0x251ac6=null;if(!isNaN(parseInt(_0x5996a2,-0x2477+-0x26d4+0x4b55)))_0x251ac6=this['system']['app']['assets']['get'](_0x5996a2);else{if(this['asset']){const _0x242fba=this['_getMateri'+'alAssetUrl'](_0x5996a2);_0x242fba&&(_0x251ac6=this['system']['app']['assets']['getByUrl'](_0x242fba));}}return _0x251ac6;}['_getMateri'+'alAssetUrl'](_0x40ac7c){if(!this['asset'])return null;const _0x2e9c3d=this['system']['app']['assets']['get'](this['asset']);return _0x2e9c3d?_0x2e9c3d['getAbsolut'+'eUrl'](_0x40ac7c):null;}['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x5da171,_0xf8399b,_0x3a355){const _0x45860e=this['system']['app']['assets'];_0x5da171&&(_0x5da171['resource']?(_0xf8399b['material']=_0x5da171['resource'],this['_setMateri'+'alEvent'](_0x3a355,'remove',_0x5da171['id'],function(){_0xf8399b['material']=this['system']['defaultMat'+'erial'];})):(this['_setMateri'+'alEvent'](_0x3a355,'load',_0x5da171['id'],function(_0x497392){_0xf8399b['material']=_0x497392['resource'],this['_setMateri'+'alEvent'](_0x3a355,'remove',_0x5da171['id'],function(){_0xf8399b['material']=this['system']['defaultMat'+'erial'];});}),this['enabled']&&this['entity']['enabled']&&_0x45860e['load'](_0x5da171)));}['onEnable'](){var _0x379058;const _0x1134ef=this['system']['app'],_0x9e19da=_0x1134ef['scene'],_0x9ea2e4=_0x9e19da==null?void(0x22df+0xdd2+0x5*-0x9bd):_0x9e19da['layers'];this['_evtLayers'+'Changed']=_0x9e19da['on']('set:layers',this['onLayersCh'+'anged'],this),_0x9ea2e4&&(this['_evtLayerA'+'dded']=_0x9ea2e4['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x9ea2e4['on']('remove',this['onLayerRem'+'oved'],this));const _0x105f06=this['_type']==='asset';let _0x530df5;if(this['_model']?this['addModelTo'+'Layers']():_0x105f06&&this['_asset']&&(_0x530df5=_0x1134ef['assets']['get'](this['_asset']),_0x530df5&&_0x530df5['resource']!==this['_model']&&this['_bindModel'+'Asset'](_0x530df5)),this['_materialA'+'sset']&&(_0x530df5=_0x1134ef['assets']['get'](this['_materialA'+'sset']),_0x530df5&&_0x530df5['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0x530df5)),_0x105f06&&this['_mapping']){for(const _0x1ca64d in this['_mapping'])this['_mapping'][_0x1ca64d]&&(_0x530df5=this['_getAssetB'+'yIdOrPath'](this['_mapping'][_0x1ca64d]),_0x530df5&&!_0x530df5['resource']&&_0x1134ef['assets']['load'](_0x530df5));}this['_batchGrou'+'pId']>=-0x1b2d+0x9ee+0x113f&&((_0x379058=_0x1134ef['batcher'])==null||_0x379058['insert'](St['MODEL'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0xd6a8cf,_0x41e414,_0x2c9c6f,_0x395b9e;const _0x4a2f56=this['system']['app'],_0x5e4e1a=_0x4a2f56['scene']['layers'];(_0xd6a8cf=this['_evtLayers'+'Changed'])==null||_0xd6a8cf['off'](),this['_evtLayers'+'Changed']=null,_0x5e4e1a&&((_0x41e414=this['_evtLayerA'+'dded'])==null||_0x41e414['off'](),this['_evtLayerA'+'dded']=null,(_0x2c9c6f=this['_evtLayerR'+'emoved'])==null||_0x2c9c6f['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=0x15f0+0x3fa*-0x7+0x97*0xa&&((_0x395b9e=_0x4a2f56['batcher'])==null||_0x395b9e['remove'](St['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['hide'](){if(this['_model']){const _0x39e513=this['_model']['meshInstan'+'ces'];for(let _0x75d43e=-0x2480+-0xdb*0xe+0x307a,_0x5e2cf4=_0x39e513['length'];_0x75d43e<_0x5e2cf4;_0x75d43e++)_0x39e513[_0x75d43e]['visible']=!(-0x831+-0x727*0x5+0x2bf5);}}['show'](){if(this['_model']){const _0x4fd997=this['_model']['meshInstan'+'ces'];for(let _0x29fc75=-0x628+-0x3dd*0x8+0x2510,_0x4b60db=_0x4fd997['length'];_0x29fc75<_0x4b60db;_0x29fc75++)_0x4fd997[_0x29fc75]['visible']=!(0x1bbb+-0x211e+0x563);}}['_bindMater'+'ialAsset'](_0x3a1bbc){if(_0x3a1bbc['on']('load',this['_onMateria'+'lAssetLoad'],this),_0x3a1bbc['on']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x3a1bbc['on']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x3a1bbc['on']('change',this['_onMateria'+'lAssetChan'+'ge'],this),_0x3a1bbc['resource'])this['_onMateria'+'lAssetLoad'](_0x3a1bbc);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x3a1bbc);}}['_unbindMat'+'erialAsset'](_0x2926dd){_0x2926dd['off']('load',this['_onMateria'+'lAssetLoad'],this),_0x2926dd['off']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x2926dd['off']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x2926dd['off']('change',this['_onMateria'+'lAssetChan'+'ge'],this);}['_onMateria'+'lAssetAdd'](_0x228955){this['system']['app']['assets']['off']('add:'+_0x228955['id'],this['_onMateria'+'lAssetAdd'],this),this['_materialA'+'sset']===_0x228955['id']&&this['_bindMater'+'ialAsset'](_0x228955);}['_onMateria'+'lAssetLoad'](_0x213ecb){this['_setMateri'+'al'](_0x213ecb['resource']);}['_onMateria'+'lAssetUnlo'+'ad'](_0x4f019e){this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}['_onMateria'+'lAssetRemo'+'ve'](_0x42bfbf){this['_onMateria'+'lAssetUnlo'+'ad'](_0x42bfbf);}['_onMateria'+'lAssetChan'+'ge'](_0x5e7dcd){}['_bindModel'+'Asset'](_0x378d55){if(this['_unbindMod'+'elAsset'](_0x378d55),_0x378d55['on']('load',this['_onModelAs'+'setLoad'],this),_0x378d55['on']('unload',this['_onModelAs'+'setUnload'],this),_0x378d55['on']('change',this['_onModelAs'+'setChange'],this),_0x378d55['on']('remove',this['_onModelAs'+'setRemove'],this),_0x378d55['resource'])this['_onModelAs'+'setLoad'](_0x378d55);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x378d55);}}['_unbindMod'+'elAsset'](_0x3a6dc0){_0x3a6dc0['off']('load',this['_onModelAs'+'setLoad'],this),_0x3a6dc0['off']('unload',this['_onModelAs'+'setUnload'],this),_0x3a6dc0['off']('change',this['_onModelAs'+'setChange'],this),_0x3a6dc0['off']('remove',this['_onModelAs'+'setRemove'],this);}['_onModelAs'+'setAdded'](_0x574f88){this['system']['app']['assets']['off']('add:'+_0x574f88['id'],this['_onModelAs'+'setAdded'],this),_0x574f88['id']===this['_asset']&&this['_bindModel'+'Asset'](_0x574f88);}['_onModelAs'+'setLoad'](_0x480447){this['model']=_0x480447['resource']['clone'](),this['_clonedMod'+'el']=!(0xf63+0x1670+-0x25d3);}['_onModelAs'+'setUnload'](_0x146387){this['model']=null;}['_onModelAs'+'setChange'](_0x2f1787,_0x2f939c,_0x12a779,_0x1058d7){_0x2f939c==='data'&&(this['mapping']=this['_mapping']);}['_onModelAs'+'setRemove'](_0x200a4a){this['model']=null;}['_setMateri'+'al'](_0x1319d9){if(this['_material']===_0x1319d9)return;this['_material']=_0x1319d9;const _0x2cac43=this['_model'];if(_0x2cac43&&this['_type']!=='asset'){const _0x310e84=_0x2cac43['meshInstan'+'ces'];for(let _0x536800=-0x75c+0x192c+-0x11d0,_0xe2e927=_0x310e84['length'];_0x536800<_0xe2e927;_0x536800++)_0x310e84[_0x536800]['material']=_0x1319d9;}}}class YR{constructor(){this['enabled']=!(-0x3a3*0x2+0x6*0x4bd+0x2a5*-0x8);}}const a0=['enabled'];class KR extends ct{constructor(_0x30c088){super(_0x30c088),this['id']='model',this['ComponentT'+'ype']=Tm,this['DataType']=YR,this['schema']=a0,this['defaultMat'+'erial']=Qn(_0x30c088['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x5b2e34,_0x5822c7,_0xc9042){_0xc9042=['material','materialAs'+'set','asset','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','type','mapping','layers','isStatic','batchGroup'+'Id'],(_0x5822c7['batchGroup'+'Id']===null||_0x5822c7['batchGroup'+'Id']===void(-0x2699+-0x1ab1+0x414a))&&(_0x5822c7['batchGroup'+'Id']=-(-0x1*-0x2405+-0x1*0x8d7+-0x1b2d)),_0x5822c7['layers']&&_0x5822c7['layers']['length']&&(_0x5822c7['layers']=_0x5822c7['layers']['slice'](-0x1f*0x9e+-0x2f*0x57+0x231b));for(let _0x57f847=0x18e9*-0x1+-0x16ea+0x2fd3;_0x57f847<_0xc9042['length'];_0x57f847++)_0x5822c7['hasOwnProp'+'erty'](_0xc9042[_0x57f847])&&(_0x5b2e34[_0xc9042[_0x57f847]]=_0x5822c7[_0xc9042[_0x57f847]]);_0x5822c7['aabbCenter']&&_0x5822c7['aabbHalfEx'+'tents']&&(_0x5b2e34['customAabb']=new De(new D(_0x5822c7['aabbCenter']),new D(_0x5822c7['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x5b2e34,_0x5822c7,['enabled']);}['cloneCompo'+'nent'](_0x309f3e,_0x2822d5){const _0x5914a9={'type':_0x309f3e['model']['type'],'asset':_0x309f3e['model']['asset'],'castShadows':_0x309f3e['model']['castShadow'+'s'],'receiveShadows':_0x309f3e['model']['receiveSha'+'dows'],'castShadowsLightmap':_0x309f3e['model']['castShadow'+'sLightmap'],'lightmapped':_0x309f3e['model']['lightmappe'+'d'],'lightmapSizeMultiplier':_0x309f3e['model']['lightmapSi'+'zeMultipli'+'er'],'isStatic':_0x309f3e['model']['isStatic'],'enabled':_0x309f3e['model']['enabled'],'layers':_0x309f3e['model']['layers'],'batchGroupId':_0x309f3e['model']['batchGroup'+'Id'],'mapping':ah({},_0x309f3e['model']['mapping'])};let _0x2481bb=_0x309f3e['model']['materialAs'+'set'];!(_0x2481bb instanceof pe)&&_0x2481bb!=null&&(_0x2481bb=this['app']['assets']['get'](_0x2481bb));const _0x48ea1b=_0x309f3e['model']['material'];(!_0x48ea1b||_0x48ea1b===this['defaultMat'+'erial']||!_0x2481bb||_0x48ea1b===_0x2481bb['resource'])&&(_0x5914a9['materialAs'+'set']=_0x2481bb);const _0x47ebf5=this['addCompone'+'nt'](_0x2822d5,_0x5914a9);if(_0x309f3e['model']['model']&&_0x309f3e['model']['type']==='asset'&&!_0x309f3e['model']['asset']&&(_0x47ebf5['model']=_0x309f3e['model']['model']['clone'](),_0x47ebf5['_clonedMod'+'el']=!(-0xe*-0x269+0x1d46+-0x3f04)),_0x5914a9['materialAs'+'set']||(_0x47ebf5['material']=_0x48ea1b),_0x309f3e['model']['model']){const _0x2baa44=_0x309f3e['model']['model']['meshInstan'+'ces'],_0x217cbb=_0x47ebf5['model']['meshInstan'+'ces'];for(let _0x440d71=-0x335*-0x5+0x7e7+-0x17f0;_0x440d71<_0x2baa44['length'];_0x440d71++)_0x217cbb[_0x440d71]['mask']=_0x2baa44[_0x440d71]['mask'],_0x217cbb[_0x440d71]['material']=_0x2baa44[_0x440d71]['material'],_0x217cbb[_0x440d71]['layer']=_0x2baa44[_0x440d71]['layer'],_0x217cbb[_0x440d71]['receiveSha'+'dow']=_0x2baa44[_0x440d71]['receiveSha'+'dow'];}return _0x309f3e['model']['customAabb']&&(_0x47ebf5['customAabb']=_0x309f3e['model']['customAabb']['clone']()),_0x47ebf5;}['onRemove'](_0x313879,_0x54aae9){_0x54aae9['onRemove']();}}we['_buildAcce'+'ssors'](Tm['prototype'],a0);const ZR=['emitterExt'+'ents','emitterRad'+'ius','emitterExt'+'entsInner','emitterRad'+'iusInner','loop','initialVel'+'ocity','animSpeed','normalMap','particleNo'+'rmal'],QR=['numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','lighting','halfLamber'+'t','intensity','wrap','wrapBounds','depthWrite','noFog','sort','stretch','alignToMot'+'ion','preWarm','emitterSha'+'pe','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animLoop','colorMap','localSpace','screenSpac'+'e','orientatio'+'n'],JR=['scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','velocityGr'+'aph','velocityGr'+'aph2','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2'],Cc=['colorMapAs'+'set','normalMapA'+'sset','meshAsset','renderAsse'+'t'];let Ya;class e3 extends we{constructor(_0x2156ff,_0x4f5ba7){super(_0x2156ff,_0x4f5ba7),h(this,'_requested'+'Depth',!(-0x2*-0x6be+0x17b0+-0x252b)),h(this,'_drawOrder',-0x476+-0x1b99+0x200f),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['on']('set_colorM'+'apAsset',this['onSetColor'+'MapAsset'],this),this['on']('set_normal'+'MapAsset',this['onSetNorma'+'lMapAsset'],this),this['on']('set_meshAs'+'set',this['onSetMeshA'+'sset'],this),this['on']('set_mesh',this['onSetMesh'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_loop',this['onSetLoop'],this),this['on']('set_blendT'+'ype',this['onSetBlend'+'Type'],this),this['on']('set_depthS'+'oftening',this['onSetDepth'+'Softening'],this),this['on']('set_layers',this['onSetLayer'+'s'],this),ZR['forEach'](_0x5cd9b2=>{this['on']('set_'+_0x5cd9b2,this['onSetSimpl'+'eProperty'],this);}),QR['forEach'](_0x149648=>{this['on']('set_'+_0x149648,this['onSetCompl'+'exProperty'],this);}),JR['forEach'](_0x8ec733=>{this['on']('set_'+_0x8ec733,this['onSetGraph'+'Property'],this);}));}get['data'](){const _0x1f4596=this['system']['store'][this['entity']['getGuid']()];return _0x1f4596?_0x1f4596['data']:null;}set['enabled'](_0x2be0ad){this['_setValue']('enabled',_0x2be0ad);}get['enabled'](){return this['data']['enabled'];}set['autoPlay'](_0x2f1ae2){this['_setValue']('autoPlay',_0x2f1ae2);}get['autoPlay'](){return this['data']['autoPlay'];}set['numParticl'+'es'](_0x4a9e30){this['_setValue']('numParticl'+'es',_0x4a9e30);}get['numParticl'+'es'](){return this['data']['numParticl'+'es'];}set['lifetime'](_0x37e7b7){this['_setValue']('lifetime',_0x37e7b7);}get['lifetime'](){return this['data']['lifetime'];}set['rate'](_0x1100c7){this['_setValue']('rate',_0x1100c7);}get['rate'](){return this['data']['rate'];}set['rate2'](_0x4c4a8d){this['_setValue']('rate2',_0x4c4a8d);}get['rate2'](){return this['data']['rate2'];}set['startAngle'](_0x3846d8){this['_setValue']('startAngle',_0x3846d8);}get['startAngle'](){return this['data']['startAngle'];}set['startAngle'+'2'](_0x361e64){this['_setValue']('startAngle'+'2',_0x361e64);}get['startAngle'+'2'](){return this['data']['startAngle'+'2'];}set['loop'](_0x1b3ead){this['_setValue']('loop',_0x1b3ead);}get['loop'](){return this['data']['loop'];}set['preWarm'](_0x55f283){this['_setValue']('preWarm',_0x55f283);}get['preWarm'](){return this['data']['preWarm'];}set['lighting'](_0x278e76){this['_setValue']('lighting',_0x278e76);}get['lighting'](){return this['data']['lighting'];}set['halfLamber'+'t'](_0x2485b6){this['_setValue']('halfLamber'+'t',_0x2485b6);}get['halfLamber'+'t'](){return this['data']['halfLamber'+'t'];}set['intensity'](_0x28306f){this['_setValue']('intensity',_0x28306f);}get['intensity'](){return this['data']['intensity'];}set['depthWrite'](_0x4e4e0a){this['_setValue']('depthWrite',_0x4e4e0a);}get['depthWrite'](){return this['data']['depthWrite'];}set['noFog'](_0x65775b){this['_setValue']('noFog',_0x65775b);}get['noFog'](){return this['data']['noFog'];}set['depthSofte'+'ning'](_0x421816){this['_setValue']('depthSofte'+'ning',_0x421816);}get['depthSofte'+'ning'](){return this['data']['depthSofte'+'ning'];}set['sort'](_0x461c94){this['_setValue']('sort',_0x461c94);}get['sort'](){return this['data']['sort'];}set['blendType'](_0x49009a){this['_setValue']('blendType',_0x49009a);}get['blendType'](){return this['data']['blendType'];}set['stretch'](_0x18f0a6){this['_setValue']('stretch',_0x18f0a6);}get['stretch'](){return this['data']['stretch'];}set['alignToMot'+'ion'](_0x19333f){this['_setValue']('alignToMot'+'ion',_0x19333f);}get['alignToMot'+'ion'](){return this['data']['alignToMot'+'ion'];}set['emitterSha'+'pe'](_0x261c89){this['_setValue']('emitterSha'+'pe',_0x261c89);}get['emitterSha'+'pe'](){return this['data']['emitterSha'+'pe'];}set['emitterExt'+'ents'](_0x22252d){this['_setValue']('emitterExt'+'ents',_0x22252d);}get['emitterExt'+'ents'](){return this['data']['emitterExt'+'ents'];}set['emitterExt'+'entsInner'](_0x36bbe0){this['_setValue']('emitterExt'+'entsInner',_0x36bbe0);}get['emitterExt'+'entsInner'](){return this['data']['emitterExt'+'entsInner'];}set['emitterRad'+'ius'](_0x1a8dc4){this['_setValue']('emitterRad'+'ius',_0x1a8dc4);}get['emitterRad'+'ius'](){return this['data']['emitterRad'+'ius'];}set['emitterRad'+'iusInner'](_0x5442ad){this['_setValue']('emitterRad'+'iusInner',_0x5442ad);}get['emitterRad'+'iusInner'](){return this['data']['emitterRad'+'iusInner'];}set['initialVel'+'ocity'](_0x331397){this['_setValue']('initialVel'+'ocity',_0x331397);}get['initialVel'+'ocity'](){return this['data']['initialVel'+'ocity'];}set['wrap'](_0x1502d2){this['_setValue']('wrap',_0x1502d2);}get['wrap'](){return this['data']['wrap'];}set['wrapBounds'](_0x25d7fc){this['_setValue']('wrapBounds',_0x25d7fc);}get['wrapBounds'](){return this['data']['wrapBounds'];}set['localSpace'](_0x48a50f){this['_setValue']('localSpace',_0x48a50f);}get['localSpace'](){return this['data']['localSpace'];}set['screenSpac'+'e'](_0x3f199d){this['_setValue']('screenSpac'+'e',_0x3f199d);}get['screenSpac'+'e'](){return this['data']['screenSpac'+'e'];}set['colorMapAs'+'set'](_0x1da997){this['_setValue']('colorMapAs'+'set',_0x1da997);}get['colorMapAs'+'set'](){return this['data']['colorMapAs'+'set'];}set['normalMapA'+'sset'](_0x262846){this['_setValue']('normalMapA'+'sset',_0x262846);}get['normalMapA'+'sset'](){return this['data']['normalMapA'+'sset'];}set['mesh'](_0xcc3d69){this['_setValue']('mesh',_0xcc3d69);}get['mesh'](){return this['data']['mesh'];}set['meshAsset'](_0x32efbc){this['_setValue']('meshAsset',_0x32efbc);}get['meshAsset'](){return this['data']['meshAsset'];}set['renderAsse'+'t'](_0x22c21f){this['_setValue']('renderAsse'+'t',_0x22c21f);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['orientatio'+'n'](_0x3ae7cd){this['_setValue']('orientatio'+'n',_0x3ae7cd);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['particleNo'+'rmal'](_0x1132dc){this['_setValue']('particleNo'+'rmal',_0x1132dc);}get['particleNo'+'rmal'](){return this['data']['particleNo'+'rmal'];}set['localVeloc'+'ityGraph'](_0x3b38a6){this['_setValue']('localVeloc'+'ityGraph',_0x3b38a6);}get['localVeloc'+'ityGraph'](){return this['data']['localVeloc'+'ityGraph'];}set['localVeloc'+'ityGraph2'](_0x810369){this['_setValue']('localVeloc'+'ityGraph2',_0x810369);}get['localVeloc'+'ityGraph2'](){return this['data']['localVeloc'+'ityGraph2'];}set['velocityGr'+'aph'](_0x47813d){this['_setValue']('velocityGr'+'aph',_0x47813d);}get['velocityGr'+'aph'](){return this['data']['velocityGr'+'aph'];}set['velocityGr'+'aph2'](_0x232e46){this['_setValue']('velocityGr'+'aph2',_0x232e46);}get['velocityGr'+'aph2'](){return this['data']['velocityGr'+'aph2'];}set['rotationSp'+'eedGraph'](_0x3e2277){this['_setValue']('rotationSp'+'eedGraph',_0x3e2277);}get['rotationSp'+'eedGraph'](){return this['data']['rotationSp'+'eedGraph'];}set['rotationSp'+'eedGraph2'](_0x54066f){this['_setValue']('rotationSp'+'eedGraph2',_0x54066f);}get['rotationSp'+'eedGraph2'](){return this['data']['rotationSp'+'eedGraph2'];}set['radialSpee'+'dGraph'](_0x58e4a6){this['_setValue']('radialSpee'+'dGraph',_0x58e4a6);}get['radialSpee'+'dGraph'](){return this['data']['radialSpee'+'dGraph'];}set['radialSpee'+'dGraph2'](_0x5bc0a5){this['_setValue']('radialSpee'+'dGraph2',_0x5bc0a5);}get['radialSpee'+'dGraph2'](){return this['data']['radialSpee'+'dGraph2'];}set['scaleGraph'](_0x1802b9){this['_setValue']('scaleGraph',_0x1802b9);}get['scaleGraph'](){return this['data']['scaleGraph'];}set['scaleGraph'+'2'](_0x2a95ad){this['_setValue']('scaleGraph'+'2',_0x2a95ad);}get['scaleGraph'+'2'](){return this['data']['scaleGraph'+'2'];}set['colorGraph'](_0x168674){this['_setValue']('colorGraph',_0x168674);}get['colorGraph'](){return this['data']['colorGraph'];}set['colorGraph'+'2'](_0xce5a32){this['_setValue']('colorGraph'+'2',_0xce5a32);}get['colorGraph'+'2'](){return this['data']['colorGraph'+'2'];}set['alphaGraph'](_0x157069){this['_setValue']('alphaGraph',_0x157069);}get['alphaGraph'](){return this['data']['alphaGraph'];}set['alphaGraph'+'2'](_0x546e06){this['_setValue']('alphaGraph'+'2',_0x546e06);}get['alphaGraph'+'2'](){return this['data']['alphaGraph'+'2'];}set['colorMap'](_0x45afff){this['_setValue']('colorMap',_0x45afff);}get['colorMap'](){return this['data']['colorMap'];}set['normalMap'](_0x124928){this['_setValue']('normalMap',_0x124928);}get['normalMap'](){return this['data']['normalMap'];}set['animTilesX'](_0x16ec0b){this['_setValue']('animTilesX',_0x16ec0b);}get['animTilesX'](){return this['data']['animTilesX'];}set['animTilesY'](_0x117301){this['_setValue']('animTilesY',_0x117301);}get['animTilesY'](){return this['data']['animTilesY'];}set['animStartF'+'rame'](_0x2415d5){this['_setValue']('animStartF'+'rame',_0x2415d5);}get['animStartF'+'rame'](){return this['data']['animStartF'+'rame'];}set['animNumFra'+'mes'](_0xdd1be2){this['_setValue']('animNumFra'+'mes',_0xdd1be2);}get['animNumFra'+'mes'](){return this['data']['animNumFra'+'mes'];}set['animNumAni'+'mations'](_0x23aaae){this['_setValue']('animNumAni'+'mations',_0x23aaae);}get['animNumAni'+'mations'](){return this['data']['animNumAni'+'mations'];}set['animIndex'](_0xbe20c){this['_setValue']('animIndex',_0xbe20c);}get['animIndex'](){return this['data']['animIndex'];}set['randomizeA'+'nimIndex'](_0x49c79d){this['_setValue']('randomizeA'+'nimIndex',_0x49c79d);}get['randomizeA'+'nimIndex'](){return this['data']['randomizeA'+'nimIndex'];}set['animSpeed'](_0x35dbc0){this['_setValue']('animSpeed',_0x35dbc0);}get['animSpeed'](){return this['data']['animSpeed'];}set['animLoop'](_0x15dbba){this['_setValue']('animLoop',_0x15dbba);}get['animLoop'](){return this['data']['animLoop'];}set['layers'](_0x3a4257){this['_setValue']('layers',_0x3a4257);}get['layers'](){return this['data']['layers'];}set['drawOrder'](_0x4418b9){this['_drawOrder']=_0x4418b9,this['emitter']&&(this['emitter']['drawOrder']=_0x4418b9);}get['drawOrder'](){return this['_drawOrder'];}['_setValue'](_0x16e044,_0x16f0a0){const _0x5c6ab3=this['data'],_0x3f3b87=_0x5c6ab3[_0x16e044];_0x5c6ab3[_0x16e044]=_0x16f0a0,this['fire']('set',_0x16e044,_0x3f3b87,_0x16f0a0);}['addMeshIns'+'tanceToLay'+'ers'](){if(this['emitter'])for(let _0x3a0cd4=-0x98f+-0xf6a*-0x1+-0x1*0x5db;_0x3a0cd4<this['layers']['length'];_0x3a0cd4++){const _0x549c7f=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x3a0cd4]);_0x549c7f&&(_0x549c7f['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]),this['emitter']['_layer']=_0x549c7f);}}['removeMesh'+'InstanceFr'+'omLayers'](){if(this['emitter'])for(let _0x398ad7=0x12d3*0x1+-0xd1*-0x7+0x2ba*-0x9;_0x398ad7<this['layers']['length'];_0x398ad7++){const _0xeca830=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x398ad7]);_0xeca830&&_0xeca830['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}}['onSetLayer'+'s'](_0x1b5879,_0x59bca6,_0x4458c8){if(this['emitter']){for(let _0xabd10f=-0xc9f+0x6b5*0x4+0x1*-0xe35;_0xabd10f<_0x59bca6['length'];_0xabd10f++){const _0x35a0f4=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x59bca6[_0xabd10f]);_0x35a0f4&&_0x35a0f4['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}if(!(!this['enabled']||!this['entity']['enabled']))for(let _0xc858b3=0x22b3+0x1f9b+-0x424e;_0xc858b3<_0x4458c8['length'];_0xc858b3++){const _0x3a94f2=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x4458c8[_0xc858b3]);_0x3a94f2&&_0x3a94f2['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}}}['onLayersCh'+'anged'](_0x319252,_0x2f7357){this['addMeshIns'+'tanceToLay'+'ers'](),_0x319252['off']('add',this['onLayerAdd'+'ed'],this),_0x319252['off']('remove',this['onLayerRem'+'oved'],this),_0x2f7357['on']('add',this['onLayerAdd'+'ed'],this),_0x2f7357['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x3708bc){!this['emitter']||this['layers']['indexOf'](_0x3708bc['id'])<-0x86c+0x73a+0x6*0x33||_0x3708bc['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}['onLayerRem'+'oved'](_0x45b873){!this['emitter']||this['layers']['indexOf'](_0x45b873['id'])<-0x8cb+-0x75f+-0x815*-0x2||_0x45b873['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}['_bindColor'+'MapAsset'](_0x25c7f4){if(_0x25c7f4['on']('load',this['_onColorMa'+'pAssetLoad'],this),_0x25c7f4['on']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x25c7f4['on']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x25c7f4['on']('change',this['_onColorMa'+'pAssetChan'+'ge'],this),_0x25c7f4['resource'])this['_onColorMa'+'pAssetLoad'](_0x25c7f4);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x25c7f4);}}['_unbindCol'+'orMapAsset'](_0x13e03a){_0x13e03a['off']('load',this['_onColorMa'+'pAssetLoad'],this),_0x13e03a['off']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x13e03a['off']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x13e03a['off']('change',this['_onColorMa'+'pAssetChan'+'ge'],this);}['_onColorMa'+'pAssetLoad'](_0xe46a14){this['colorMap']=_0xe46a14['resource'];}['_onColorMa'+'pAssetUnlo'+'ad'](_0x42c7de){this['colorMap']=null;}['_onColorMa'+'pAssetRemo'+'ve'](_0x2ab9ab){this['_onColorMa'+'pAssetUnlo'+'ad'](_0x2ab9ab);}['_onColorMa'+'pAssetChan'+'ge'](_0x1b85d9){}['onSetColor'+'MapAsset'](_0x9c1d4b,_0x32a092,_0x196c83){const _0x15d17e=this['system']['app']['assets'];if(_0x32a092){const _0x1e29b6=_0x15d17e['get'](_0x32a092);_0x1e29b6&&this['_unbindCol'+'orMapAsset'](_0x1e29b6);}if(_0x196c83){_0x196c83 instanceof pe&&(this['data']['colorMapAs'+'set']=_0x196c83['id'],_0x196c83=_0x196c83['id']);const _0x49c5cd=_0x15d17e['get'](_0x196c83);_0x49c5cd?this['_bindColor'+'MapAsset'](_0x49c5cd):_0x15d17e['once']('add:'+_0x196c83,_0x401c76=>{this['_bindColor'+'MapAsset'](_0x401c76);});}else this['colorMap']=null;}['_bindNorma'+'lMapAsset'](_0x3e8398){if(_0x3e8398['on']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x3e8398['on']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x3e8398['on']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x3e8398['on']('change',this['_onNormalM'+'apAssetCha'+'nge'],this),_0x3e8398['resource'])this['_onNormalM'+'apAssetLoa'+'d'](_0x3e8398);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x3e8398);}}['_unbindNor'+'malMapAsse'+'t'](_0x4e4776){_0x4e4776['off']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x4e4776['off']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x4e4776['off']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x4e4776['off']('change',this['_onNormalM'+'apAssetCha'+'nge'],this);}['_onNormalM'+'apAssetLoa'+'d'](_0x1b3d1a){this['normalMap']=_0x1b3d1a['resource'];}['_onNormalM'+'apAssetUnl'+'oad'](_0x591e80){this['normalMap']=null;}['_onNormalM'+'apAssetRem'+'ove'](_0x14a15c){this['_onNormalM'+'apAssetUnl'+'oad'](_0x14a15c);}['_onNormalM'+'apAssetCha'+'nge'](_0x331edc){}['onSetNorma'+'lMapAsset'](_0x13e88a,_0x57aab7,_0x142622){const _0x2f3b0d=this['system']['app']['assets'];if(_0x57aab7){const _0x5ec4d0=_0x2f3b0d['get'](_0x57aab7);_0x5ec4d0&&this['_unbindNor'+'malMapAsse'+'t'](_0x5ec4d0);}if(_0x142622){_0x142622 instanceof pe&&(this['data']['normalMapA'+'sset']=_0x142622['id'],_0x142622=_0x142622['id']);const _0x5602df=_0x2f3b0d['get'](_0x142622);_0x5602df?this['_bindNorma'+'lMapAsset'](_0x5602df):_0x2f3b0d['once']('add:'+_0x142622,_0x4e30a6=>{this['_bindNorma'+'lMapAsset'](_0x4e30a6);});}else this['normalMap']=null;}['_bindMeshA'+'sset'](_0x2a7eed){if(_0x2a7eed['on']('load',this['_onMeshAss'+'etLoad'],this),_0x2a7eed['on']('unload',this['_onMeshAss'+'etUnload'],this),_0x2a7eed['on']('remove',this['_onMeshAss'+'etRemove'],this),_0x2a7eed['on']('change',this['_onMeshAss'+'etChange'],this),_0x2a7eed['resource'])this['_onMeshAss'+'etLoad'](_0x2a7eed);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x2a7eed);}}['_unbindMes'+'hAsset'](_0x9ce8ed){_0x9ce8ed['off']('load',this['_onMeshAss'+'etLoad'],this),_0x9ce8ed['off']('unload',this['_onMeshAss'+'etUnload'],this),_0x9ce8ed['off']('remove',this['_onMeshAss'+'etRemove'],this),_0x9ce8ed['off']('change',this['_onMeshAss'+'etChange'],this);}['_onMeshAss'+'etLoad'](_0xebe3cd){this['_onMeshCha'+'nged'](_0xebe3cd['resource']);}['_onMeshAss'+'etUnload'](_0x3ab377){this['mesh']=null;}['_onMeshAss'+'etRemove'](_0x177d03){this['_onMeshAss'+'etUnload'](_0x177d03);}['_onMeshAss'+'etChange'](_0x4e824b){}['onSetMeshA'+'sset'](_0x2aed62,_0x5b491e,_0x5b8390){const _0x3294c6=this['system']['app']['assets'];if(_0x5b491e){const _0x350056=_0x3294c6['get'](_0x5b491e);_0x350056&&this['_unbindMes'+'hAsset'](_0x350056);}if(_0x5b8390){_0x5b8390 instanceof pe&&(this['data']['meshAsset']=_0x5b8390['id'],_0x5b8390=_0x5b8390['id']);const _0x2c1579=_0x3294c6['get'](_0x5b8390);_0x2c1579&&this['_bindMeshA'+'sset'](_0x2c1579);}else this['_onMeshCha'+'nged'](null);}['onSetMesh'](_0x8f124c,_0x2015ea,_0x375d4e){!_0x375d4e||_0x375d4e instanceof pe||typeof _0x375d4e=='number'?this['meshAsset']=_0x375d4e:this['_onMeshCha'+'nged'](_0x375d4e);}['_onMeshCha'+'nged'](_0x50b8e9){_0x50b8e9&&!(_0x50b8e9 instanceof Ge)&&(_0x50b8e9['meshInstan'+'ces'][0x143b+0x39*-0x58+-0xa3]?_0x50b8e9=_0x50b8e9['meshInstan'+'ces'][0x1a4c+0x745*0x1+-0x2191]['mesh']:_0x50b8e9=null),this['data']['mesh']=_0x50b8e9,this['emitter']&&(this['emitter']['mesh']=_0x50b8e9,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['onSetRende'+'rAsset'](_0x3ce223,_0x31c0ca,_0x5b973a){const _0x1cea24=this['system']['app']['assets'];if(_0x31c0ca){const _0xfc48e1=_0x1cea24['get'](_0x31c0ca);_0xfc48e1&&this['_unbindRen'+'derAsset'](_0xfc48e1);}if(_0x5b973a){_0x5b973a instanceof pe&&(this['data']['renderAsse'+'t']=_0x5b973a['id'],_0x5b973a=_0x5b973a['id']);const _0x530048=_0x1cea24['get'](_0x5b973a);_0x530048&&this['_bindRende'+'rAsset'](_0x530048);}else this['_onRenderC'+'hanged'](null);}['_bindRende'+'rAsset'](_0x282633){if(_0x282633['on']('load',this['_onRenderA'+'ssetLoad'],this),_0x282633['on']('unload',this['_onRenderA'+'ssetUnload'],this),_0x282633['on']('remove',this['_onRenderA'+'ssetRemove'],this),_0x282633['resource'])this['_onRenderA'+'ssetLoad'](_0x282633);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x282633);}}['_unbindRen'+'derAsset'](_0x3d10c9){var _0x4f57f2;_0x3d10c9['off']('load',this['_onRenderA'+'ssetLoad'],this),_0x3d10c9['off']('unload',this['_onRenderA'+'ssetUnload'],this),_0x3d10c9['off']('remove',this['_onRenderA'+'ssetRemove'],this),(_0x4f57f2=this['_evtSetMes'+'hes'])==null||_0x4f57f2['off'](),this['_evtSetMes'+'hes']=null;}['_onRenderA'+'ssetLoad'](_0x3d8119){this['_onRenderC'+'hanged'](_0x3d8119['resource']);}['_onRenderA'+'ssetUnload'](_0x4bd60d){this['_onRenderC'+'hanged'](null);}['_onRenderA'+'ssetRemove'](_0x46790f){this['_onRenderA'+'ssetUnload'](_0x46790f);}['_onRenderC'+'hanged'](_0x999956){var _0x33418a;if(!_0x999956){this['_onMeshCha'+'nged'](null);return;}(_0x33418a=this['_evtSetMes'+'hes'])==null||_0x33418a['off'](),this['_evtSetMes'+'hes']=_0x999956['on']('set:meshes',this['_onRenderS'+'etMeshes'],this),_0x999956['meshes']&&this['_onRenderS'+'etMeshes'](_0x999956['meshes']);}['_onRenderS'+'etMeshes'](_0x966c95){this['_onMeshCha'+'nged'](_0x966c95&&_0x966c95[-0xbf+0x1*0x20f6+0x2037*-0x1]);}['onSetLoop'](_0x1e645b,_0x182f45,_0x12e137){this['emitter']&&(this['emitter'][_0x1e645b]=_0x12e137,this['emitter']['resetTime']());}['onSetBlend'+'Type'](_0x548f4c,_0xf2d1bc,_0x387642){this['emitter']&&(this['emitter'][_0x548f4c]=_0x387642,this['emitter']['material']['blendType']=_0x387642,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['_requestDe'+'pth'](){this['_requested'+'Depth']||(Ya||(Ya=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](ps)),Ya&&(Ya['incrementC'+'ounter'](),this['_requested'+'Depth']=!(0x1555*-0x1+0xa2a+0xb2b)));}['_releaseDe'+'pth'](){this['_requested'+'Depth']&&Ya&&(Ya['decrementC'+'ounter'](),this['_requested'+'Depth']=!(-0x150b+0x282+0x2*0x945));}['onSetDepth'+'Softening'](_0x284487,_0x30e6c0,_0x4749e1){_0x30e6c0!==_0x4749e1&&(_0x4749e1?(this['enabled']&&this['entity']['enabled']&&this['_requestDe'+'pth'](),this['emitter']&&(this['emitter'][_0x284487]=_0x4749e1)):(this['enabled']&&this['entity']['enabled']&&this['_releaseDe'+'pth'](),this['emitter']&&(this['emitter'][_0x284487]=_0x4749e1)),this['emitter']&&(this['reset'](),this['emitter']['resetMater'+'ial'](),this['rebuild']()));}['onSetSimpl'+'eProperty'](_0x52440c,_0x4e9dea,_0x4fe090){this['emitter']&&(this['emitter'][_0x52440c]=_0x4fe090,this['emitter']['resetMater'+'ial']());}['onSetCompl'+'exProperty'](_0x5f022c,_0x5418f1,_0x121ac3){this['emitter']&&(this['emitter'][_0x5f022c]=_0x121ac3,this['emitter']['resetMater'+'ial'](),this['rebuild'](),this['reset']());}['onSetGraph'+'Property'](_0x390864,_0xb1b1fb,_0x41efb1){this['emitter']&&(this['emitter'][_0x390864]=_0x41efb1,this['emitter']['rebuildGra'+'phs'](),this['emitter']['resetMater'+'ial']());}['onEnable'](){const _0xf7cdfa=this['system']['app']['scene'],_0x55fad1=_0xf7cdfa['layers'],_0x2bc8a6=this['data'];for(let _0x222e73=-0x5*0x20b+-0xab3+0xa75*0x2,_0x494e70=Cc['length'];_0x222e73<_0x494e70;_0x222e73++){let _0xfc2c9b=_0x2bc8a6[Cc[_0x222e73]];if(_0xfc2c9b){if(!(_0xfc2c9b instanceof pe)){if(parseInt(_0xfc2c9b,-0xa81+0x25cf+-0x1b44)>=-0xf95+-0x344+-0x3c5*-0x5)_0xfc2c9b=this['system']['app']['assets']['get'](_0xfc2c9b);else continue;}_0xfc2c9b&&!_0xfc2c9b['resource']&&this['system']['app']['assets']['load'](_0xfc2c9b);}}if(!this['system']['app']['graphicsDe'+'vice']['disablePar'+'ticleSyste'+'m']){if(!this['emitter']){let _0x1b75c6=_0x2bc8a6['mesh'];_0x1b75c6 instanceof Ge||(_0x1b75c6=null),this['emitter']=new CA(this['system']['app']['graphicsDe'+'vice'],{'numParticles':_0x2bc8a6['numParticl'+'es'],'emitterExtents':_0x2bc8a6['emitterExt'+'ents'],'emitterExtentsInner':_0x2bc8a6['emitterExt'+'entsInner'],'emitterRadius':_0x2bc8a6['emitterRad'+'ius'],'emitterRadiusInner':_0x2bc8a6['emitterRad'+'iusInner'],'emitterShape':_0x2bc8a6['emitterSha'+'pe'],'initialVelocity':_0x2bc8a6['initialVel'+'ocity'],'wrap':_0x2bc8a6['wrap'],'localSpace':_0x2bc8a6['localSpace'],'screenSpace':_0x2bc8a6['screenSpac'+'e'],'wrapBounds':_0x2bc8a6['wrapBounds'],'lifetime':_0x2bc8a6['lifetime'],'rate':_0x2bc8a6['rate'],'rate2':_0x2bc8a6['rate2'],'orientation':_0x2bc8a6['orientatio'+'n'],'particleNormal':_0x2bc8a6['particleNo'+'rmal'],'animTilesX':_0x2bc8a6['animTilesX'],'animTilesY':_0x2bc8a6['animTilesY'],'animStartFrame':_0x2bc8a6['animStartF'+'rame'],'animNumFrames':_0x2bc8a6['animNumFra'+'mes'],'animNumAnimations':_0x2bc8a6['animNumAni'+'mations'],'animIndex':_0x2bc8a6['animIndex'],'randomizeAnimIndex':_0x2bc8a6['randomizeA'+'nimIndex'],'animSpeed':_0x2bc8a6['animSpeed'],'animLoop':_0x2bc8a6['animLoop'],'startAngle':_0x2bc8a6['startAngle'],'startAngle2':_0x2bc8a6['startAngle'+'2'],'scaleGraph':_0x2bc8a6['scaleGraph'],'scaleGraph2':_0x2bc8a6['scaleGraph'+'2'],'colorGraph':_0x2bc8a6['colorGraph'],'colorGraph2':_0x2bc8a6['colorGraph'+'2'],'alphaGraph':_0x2bc8a6['alphaGraph'],'alphaGraph2':_0x2bc8a6['alphaGraph'+'2'],'localVelocityGraph':_0x2bc8a6['localVeloc'+'ityGraph'],'localVelocityGraph2':_0x2bc8a6['localVeloc'+'ityGraph2'],'velocityGraph':_0x2bc8a6['velocityGr'+'aph'],'velocityGraph2':_0x2bc8a6['velocityGr'+'aph2'],'rotationSpeedGraph':_0x2bc8a6['rotationSp'+'eedGraph'],'rotationSpeedGraph2':_0x2bc8a6['rotationSp'+'eedGraph2'],'radialSpeedGraph':_0x2bc8a6['radialSpee'+'dGraph'],'radialSpeedGraph2':_0x2bc8a6['radialSpee'+'dGraph2'],'colorMap':_0x2bc8a6['colorMap'],'normalMap':_0x2bc8a6['normalMap'],'loop':_0x2bc8a6['loop'],'preWarm':_0x2bc8a6['preWarm'],'sort':_0x2bc8a6['sort'],'stretch':_0x2bc8a6['stretch'],'alignToMotion':_0x2bc8a6['alignToMot'+'ion'],'lighting':_0x2bc8a6['lighting'],'halfLambert':_0x2bc8a6['halfLamber'+'t'],'intensity':_0x2bc8a6['intensity'],'depthSoftening':_0x2bc8a6['depthSofte'+'ning'],'scene':this['system']['app']['scene'],'mesh':_0x1b75c6,'depthWrite':_0x2bc8a6['depthWrite'],'noFog':_0x2bc8a6['noFog'],'node':this['entity'],'blendType':_0x2bc8a6['blendType']}),this['emitter']['meshInstan'+'ce']['node']=this['entity'],this['emitter']['drawOrder']=this['drawOrder'],_0x2bc8a6['autoPlay']||(this['pause'](),this['emitter']['meshInstan'+'ce']['visible']=!(0x223+0x11f6+-0x506*0x4));}this['emitter']['colorMap']&&this['addMeshIns'+'tanceToLay'+'ers'](),this['_evtLayers'+'Changed']=_0xf7cdfa['on']('set:layers',this['onLayersCh'+'anged'],this),_0x55fad1&&(this['_evtLayerA'+'dded']=_0x55fad1['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x55fad1['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&_0x2bc8a6['depthSofte'+'ning']&&this['_requestDe'+'pth']();}}['onDisable'](){var _0x19145c,_0x5251f6,_0x4aa268;const _0x89b1cc=this['system']['app']['scene']['layers'];(_0x19145c=this['_evtLayers'+'Changed'])==null||_0x19145c['off'](),this['_evtLayers'+'Changed']=null,_0x89b1cc&&((_0x5251f6=this['_evtLayerA'+'dded'])==null||_0x5251f6['off'](),this['_evtLayerA'+'dded']=null,(_0x4aa268=this['_evtLayerR'+'emoved'])==null||_0x4aa268['off'](),this['_evtLayerR'+'emoved']=null),this['emitter']&&(this['removeMesh'+'InstanceFr'+'omLayers'](),this['data']['depthSofte'+'ning']&&this['_releaseDe'+'pth'](),this['emitter']['camera']=null);}['onBeforeRe'+'move'](){this['enabled']&&(this['enabled']=!(-0x2392+-0x26*0x29+0x29a9)),this['emitter']&&(this['emitter']['destroy'](),this['emitter']=null);for(let _0xfe9a3a=-0xeab+0xa31*-0x1+0x18dc;_0xfe9a3a<Cc['length'];_0xfe9a3a++){const _0x488cce=Cc[_0xfe9a3a];this['data'][_0x488cce]&&(this[_0x488cce]=null);}this['off']();}['reset'](){this['emitter']&&this['emitter']['reset']();}['stop'](){this['emitter']&&(this['emitter']['loop']=!(-0x2425*-0x1+-0xb1*0x1f+0xfb*-0xf),this['emitter']['resetTime'](),this['emitter']['addTime'](-0x1b9*0x7+-0x11f4+-0x27*-0xc5,!(0x1d*0x142+0x18d9+0x1471*-0x3)));}['pause'](){this['data']['paused']=!(-0x48b+0x1ad4+0x5*-0x475);}['unpause'](){this['data']['paused']=!(-0x2106*-0x1+0x6bd+-0x2*0x13e1);}['play'](){this['data']['paused']=!(0x27e*-0x3+0x12*0xe8+-0x8d5),this['emitter']&&(this['emitter']['meshInstan'+'ce']['visible']=!(0x1*0x48+0x3*0x4d5+-0x3*0x4ed),this['emitter']['loop']=this['data']['loop'],this['emitter']['resetTime']());}['isPlaying'](){return this['data']['paused']?!(-0x18a8+0x2449+0x3e0*-0x3):this['emitter']&&this['emitter']['loop']?!(0x4f*-0x65+-0x25ef+0x451a*0x1):Date['now']()<=this['emitter']['endTime'];}['setInTools'](){const {emitter:_0x1a08fa}=this;_0x1a08fa&&!_0x1a08fa['inTools']&&(_0x1a08fa['inTools']=!(0x10e5+0x5*-0x3+-0xa*0x1af),this['rebuild']());}['rebuild'](){const _0x592890=this['enabled'];this['enabled']=!(0x49d*0x2+-0x1fa9+-0x1*-0x1670),this['emitter']&&this['emitter']['rebuild'](),this['enabled']=_0x592890;}}class t3{constructor(){this['numParticl'+'es']=-0x25a4+0x56*0x3a+0x1229,this['rate']=-0x1*0x871+0x1c89+-0x1417,this['rate2']=null,this['startAngle']=0x1*-0x1a03+0x115a+-0x8a9*-0x1,this['startAngle'+'2']=null,this['lifetime']=0x16+-0x13b6+0x13d2,this['emitterExt'+'ents']=new D(),this['emitterExt'+'entsInner']=new D(),this['emitterRad'+'ius']=-0x1f26+0x3*-0xb96+-0x57e*-0xc,this['emitterRad'+'iusInner']=-0x2*-0x61d+-0x17c1+0xe3*0xd,this['emitterSha'+'pe']=ai,this['initialVel'+'ocity']=0x73d+-0x1ea3+0x257*0xa,this['wrap']=!(-0x25*0x78+-0x1*0xe4e+0x1fa7),this['wrapBounds']=new D(),this['localSpace']=!(-0x167*0x8+0x84d+0x16*0x22),this['screenSpac'+'e']=!(-0xf5*-0x23+-0x1*0xb2a+-0x1654),this['colorMap']=null,this['colorMapAs'+'set']=null,this['normalMap']=null,this['normalMapA'+'sset']=null,this['loop']=!(-0xab2+0xbcf+-0x11d),this['preWarm']=!(0xbba+-0x1*-0x1897+-0x245*0x10),this['sort']=0xa93+-0x1*0x1283+0x4*0x1fc,this['mode']=rv,this['scene']=null,this['lighting']=!(-0x1*0x1286+-0x1*-0xc0d+0x1*0x67a),this['halfLamber'+'t']=!(0xb16+0x1316+0x1e2b*-0x1),this['intensity']=-0xc2f*-0x1+-0x19d8+0xdaa,this['stretch']=0x1*-0xa3+0x2306+-0x1*0x2263,this['alignToMot'+'ion']=!(-0x33f*-0x8+0x1f7c+0x4d*-0xbf),this['depthSofte'+'ning']=-0x106*0x15+0x1*-0x1d14+0x3292,this['renderAsse'+'t']=null,this['meshAsset']=null,this['mesh']=null,this['depthWrite']=!(-0x315*-0x6+0x1*-0x556+-0xd27),this['noFog']=!(0x2*-0x1cb+0xc2f*0x1+-0x898),this['orientatio'+'n']=yh,this['particleNo'+'rmal']=new D(0x9e7+0xe2*-0xa+-0x113,0x14e7+-0x1*0x2ff+-0x11e7*0x1,0x1d27+-0x1*-0x1631+-0x3358*0x1),this['animTilesX']=0x2193+0x18b4+-0x3a46,this['animTilesY']=0xf1*-0x14+0x39b*-0x1+-0x10*-0x167,this['animStartF'+'rame']=0x23*0xf1+-0x4*0x7ab+-0x247,this['animNumFra'+'mes']=-0x2687+-0x31*-0x5d+-0x1*-0x14bb,this['animNumAni'+'mations']=-0x1020+0x85+0xf9c,this['animIndex']=0x214f+0xbe1+-0x5a6*0x8,this['randomizeA'+'nimIndex']=!(-0xadd+-0x1*-0xe37+-0x359*0x1),this['animSpeed']=-0x6*-0x2d1+-0x1*-0x23f+-0x1324,this['animLoop']=!(-0x1a24+-0x1*0x1805+0x3229),this['scaleGraph']=null,this['scaleGraph'+'2']=null,this['colorGraph']=null,this['colorGraph'+'2']=null,this['alphaGraph']=null,this['alphaGraph'+'2']=null,this['localVeloc'+'ityGraph']=null,this['localVeloc'+'ityGraph2']=null,this['velocityGr'+'aph']=null,this['velocityGr'+'aph2']=null,this['rotationSp'+'eedGraph']=null,this['rotationSp'+'eedGraph2']=null,this['radialSpee'+'dGraph']=null,this['radialSpee'+'dGraph2']=null,this['blendType']=Zs,this['enabled']=!(0x2*-0xfef+0x1072+0xf6c),this['paused']=!(0x2402+0x26e+-0x266f),this['autoPlay']=!(0x1bb5+-0x173*-0x11+0x14*-0x29e),this['layers']=[er];}}const s3='\x0avarying\x20v'+'ec4\x20texCoo'+'rdsAlphaLi'+'fe;\x0a\x0aunifo'+'rm\x20sampler'+'2D\x20colorMa'+'p;\x0auniform'+'\x20sampler2D'+'\x20colorPara'+'m;\x0auniform'+'\x20float\x20gra'+'phSampleSi'+'ze;\x0aunifor'+'m\x20float\x20gr'+'aphNumSamp'+'les;\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0auniform\x20'+'float\x20soft'+'ening;\x0auni'+'form\x20float'+'\x20colorMult'+';\x0a\x0afloat\x20s'+'aturate(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex\x20\x20=\x20tex'+'ture2D(col'+'orMap,\x20vec'+'2(texCoord'+'sAlphaLife'+'.x,\x201.0\x20-\x20'+'texCoordsA'+'lphaLife.y'+'));\x0a\x20\x20\x20\x20ve'+'c4\x20ramp\x20=\x20'+'texture2D('+'colorParam'+',\x20vec2(tex'+'CoordsAlph'+'aLife.w,\x200'+'.0));\x0a\x20\x20\x20\x20'+'ramp.rgb\x20*'+'=\x20colorMul'+'t;\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20+=\x20te'+'xCoordsAlp'+'haLife.z;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'rgb\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'float\x20a\x20\x20='+'\x20tex.a\x20*\x20r'+'amp.a;\x0a',i3='\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0af'+'loat\x20satur'+'ate(float\x20'+'x)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p(x,\x200.0,\x20'+'1.0);\x0a}\x0a\x0av'+'ec4\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(\x20texture2'+'D(tex,tc),'+'\x20texture2D'+'(tex,tc\x20+\x20'+'graphSampl'+'eSize),\x20fr'+'act(tc.x*g'+'raphNumSam'+'ples)\x20);\x0a}'+'\x0a\x0avec4\x20tex'+'1Dlod_lerp'+'(TEXTURE_A'+'CCEPT_HIGH'+'P(tex),\x20ve'+'c2\x20tc,\x20out'+'\x20vec3\x20w)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'a\x20=\x20textur'+'e2D(tex,tc'+');\x0a\x20\x20\x20\x20vec'+'4\x20b\x20=\x20text'+'ure2D(tex,'+'tc\x20+\x20graph'+'SampleSize'+');\x0a\x20\x20\x20\x20flo'+'at\x20c\x20=\x20fra'+'ct(tc.x*gr'+'aphNumSamp'+'les);\x0a\x0a\x20\x20\x20'+'\x20vec3\x20unpa'+'ckedA\x20=\x20un'+'pack3NFloa'+'ts(a.w);\x0a\x20'+'\x20\x20\x20vec3\x20un'+'packedB\x20=\x20'+'unpack3NFl'+'oats(b.w);'+'\x0a\x20\x20\x20\x20w\x20=\x20m'+'ix(unpacke'+'dA,\x20unpack'+'edB,\x20c);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20mix(a,\x20b,'+'\x20c);\x0a}\x0a\x0ave'+'c2\x20rotate('+'vec2\x20quadX'+'Y,\x20float\x20p'+'Rotation,\x20'+'out\x20mat2\x20r'+'otMatrix)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20cos('+'pRotation)'+';\x0a\x20\x20\x20\x20floa'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x0a\x20\x20\x20\x20mat'+'2\x20m\x20=\x20mat2'+'(c,\x20-s,\x20s,'+'\x20c);\x0a\x20\x20\x20\x20r'+'otMatrix\x20='+'\x20m;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20m\x20*\x20'+'quadXY;\x0a}\x0a'+'\x0avec3\x20bill'+'board(vec3'+'\x20InstanceC'+'oords,\x20vec'+'2\x20quadXY)\x20'+'{\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREEN_'+('SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'os\x20=\x20vec3('+'-1,\x200,\x200)\x20'+'*\x20quadXY.x'+'\x20+\x20vec3(0,'+'\x20-1,\x200)\x20*\x20'+'quadXY.y;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20pos;\x0a}\x0a\x0av'+'ec3\x20custom'+'Face(vec3\x20'+'InstanceCo'+'ords,\x20vec2'+'\x20quadXY)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'pos\x20=\x20face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20faceBinor'+'m\x20*\x20quadXY'+'.y;\x0a\x20\x20\x20\x20re'+'turn\x20pos;\x0a'+'}\x0a\x0avec2\x20sa'+'feNormaliz'+'e(vec2\x20v)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20l\x20=\x20leng'+'th(v);\x0a\x20\x20\x20'+'\x20return\x20(l'+'\x20>\x201e-06)\x20'+'?\x20v\x20/\x20l\x20:\x20'+'v;\x0a}\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20meshLoc'+'alPos\x20=\x20pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20flo'+'at\x20id\x20=\x20fl'+'oor(partic'+'le_vertexD'+'ata.w);\x0a\x0a\x20'+'\x20\x20\x20float\x20r'+'ndFactor\x20='+'\x20fract(sin'+'(id\x20+\x201.0\x20'+'+\x20seed));\x0a'+'\x20\x20\x20\x20vec3\x20r'+'ndFactor3\x20'+'=\x20vec3(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20float\x20uv\x20'+'=\x20id\x20/\x20num'+'ParticlesP'+'ot;\x0a\x20\x20\x20\x20re'+'adInput(uv'+');\x0a\x0a#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20inV'+'el\x20=\x20mat3('+'matrix_mod'+'el)\x20*\x20inVe'+'l;\x0a#endif\x0a'+'\x20\x20\x20\x20vec2\x20v'+'elocityV\x20='+'\x20safeNorma'+'lize((mat3'+'(matrix_vi'+'ew)\x20*\x20inVe'+'l).xy);\x20//'+'\x20should\x20be'+'\x20removed\x20b'+'y\x20compiler'+'\x20if\x20align/'+'stretch\x20is'+'\x20not\x20used\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20particleL'+'ifetime\x20=\x20'+'lifetime;\x0a'+'\x0a\x20\x20\x20\x20if\x20(i')+('nLife\x20<=\x200'+'.0\x20||\x20inLi'+'fe\x20>\x20parti'+'cleLifetim'+'e\x20||\x20!inSh'+'ow)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20meshLoca'+'lPos\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20vec2\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20nlife\x20='+'\x20clamp(inL'+'ife\x20/\x20part'+'icleLifeti'+'me,\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20param'+'Div;\x0a\x20\x20\x20\x20v'+'ec4\x20params'+'\x20=\x20tex1Dlo'+'d_lerp(TEX'+'TURE_PASS('+'internalTe'+'x2),\x20vec2('+'nlife,\x200),'+'\x20paramDiv)'+';\x0a\x20\x20\x20\x20floa'+'t\x20scale\x20=\x20'+'params.y;\x0a'+'\x20\x20\x20\x20float\x20'+'scaleDiv\x20='+'\x20paramDiv.'+'x;\x0a\x20\x20\x20\x20flo'+'at\x20alphaDi'+'v\x20=\x20paramD'+'iv.z;\x0a\x0a\x20\x20\x20'+'\x20scale\x20+=\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20scale'+'DivMult\x20*\x20'+'fract(rndF'+'actor*1000'+'0.0);\x0a\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(quadXY'+'\x20*\x20-0.5\x20+\x20'+'0.5,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'alphaDivMu'+'lt\x20*\x20fract'+'(rndFactor'+'*1000.0),\x20'+'nlife);\x0a#e'+'lse\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(partic'+'le_uv,\x20(al'+'phaDiv\x20*\x202'+'.0\x20-\x201.0)\x20'+'*\x20alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePos\x20='+'\x20inPos;\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePosMo'+'ved\x20=\x20vec3'+'(0.0);\x0a\x0a\x20\x20'+'\x20\x20mat2\x20rot'+'Matrix;\x0a'),r3='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20min(flo'+'or(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y)\x20+\x20animT'+'exParams.x'+',\x20animTexP'+'arams.z);\x0a',a3='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20floor(m'+'od(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y\x20+\x20animTe'+'xParams.x,'+'\x20animTexPa'+'rams.z\x20+\x201'+'.0));\x0a',n3='\x0a\x20\x20\x20\x20float'+'\x20animation'+'Index;\x0a\x0a\x20\x20'+'\x20\x20if\x20(anim'+'TexIndexPa'+'rams.y\x20==\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20anima'+'tionIndex\x20'+'=\x20floor((a'+'nimTexPara'+'ms.w\x20+\x201.0'+')\x20*\x20rndFac'+'tor3.z)\x20*\x20'+'(animTexPa'+'rams.z\x20+\x201'+'.0);\x0a\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20animTex'+'IndexParam'+'s.x\x20*\x20(ani'+'mTexParams'+'.z\x20+\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20float\x20at'+'lasX\x20=\x20(an'+'imationInd'+'ex\x20+\x20animF'+'rame)\x20*\x20an'+'imTexTiles'+'Params.x;\x0a'+'\x20\x20\x20\x20float\x20'+'atlasY\x20=\x201'+'.0\x20-\x20floor'+'(atlasX\x20+\x20'+'1.0)\x20*\x20ani'+'mTexTilesP'+'arams.y;\x0a\x20'+'\x20\x20\x20atlasX\x20'+'=\x20fract(at'+'lasX);\x0a\x0a\x20\x20'+'\x20\x20texCoord'+'sAlphaLife'+'.xy\x20*=\x20ani'+'mTexTilesP'+'arams.xy;\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe.xy\x20+=\x20v'+'ec2(atlasX'+',\x20atlasY);'+'\x0a',o3='\x0avoid\x20read'+'Input(floa'+'t\x20uv)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'\x20=\x20texture'+'2D(particl'+'eTexIN,\x20ve'+'c2(uv,\x200.2'+'5));\x0a\x20\x20\x20\x20v'+'ec4\x20tex2\x20='+'\x20texture2D'+'(particleT'+'exIN,\x20vec2'+'(uv,\x200.75)'+');\x0a\x0a\x20\x20\x20\x20in'+'Pos\x20=\x20tex.'+'xyz;\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inAngle\x20='+'\x20(tex.w\x20<\x20'+'0.0?\x20-tex.'+'w\x20:\x20tex.w)'+'\x20-\x201000.0;'+'\x0a\x20\x20\x20\x20inSho'+'w\x20=\x20tex.w\x20'+'>=\x200.0;\x0a\x20\x20'+'\x20\x20inLife\x20='+'\x20tex2.w;\x0a}'+'\x0a',l3='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0a#'+'define\x20PI2'+'\x206.2831853'+'07179586\x0a\x0a'+'uniform\x20ve'+'c3\x20inBound'+'sSize;\x0auni'+'form\x20vec3\x20'+'inBoundsCe'+'nter;\x0a\x0auni'+'form\x20float'+'\x20maxVel;\x0a\x0a'+'float\x20deco'+'deFloatRG('+'vec2\x20rg)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20rg.y\x20*\x20('+'1.0\x20/\x20255.'+'0)\x20+\x20rg.x;'+'\x0a}\x0a\x0afloat\x20'+'decodeFloa'+'tRGBA(\x20vec'+'4\x20rgba\x20)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20dot(rgba'+',\x20vec4(1.0'+',\x201.0\x20/\x2025'+'5.0,\x201.0\x20/'+'\x2065025.0,\x20'+'1.0\x20/\x201605'+'81375.0));'+'\x0a}\x0a\x0avoid\x20r'+'eadInput(f'+'loat\x20uv)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex0\x20=\x20tex'+'ture2D(par'+'ticleTexIN'+',\x20vec2(uv,'+'\x200.125));\x0a'+'\x20\x20\x20\x20vec4\x20t'+'ex1\x20=\x20text'+'ure2D(part'+'icleTexIN,'+'\x20vec2(uv,\x20'+'0.375));\x0a\x20'+'\x20\x20\x20vec4\x20te'+'x2\x20=\x20textu'+'re2D(parti'+'cleTexIN,\x20'+'vec2(uv,\x200'+'.625));\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'3\x20=\x20textur'+'e2D(partic'+'leTexIN,\x20v'+'ec2(uv,\x200.'+'875));\x0a\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'vec3(decod'+'eFloatRG(t'+'ex0.rg),\x20d'+'ecodeFloat'+'RG(tex0.ba'+'),\x20decodeF'+'loatRG(tex'+'1.rg));\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'(inPos\x20-\x20v'+'ec3(0.5))\x20'+'*\x20inBounds'+'Size\x20+\x20inB'+'oundsCente'+'r;\x0a\x0a\x20\x20\x20\x20in'+'Vel\x20=\x20tex2'+'.xyz;\x0a\x20\x20\x20\x20'+'inVel\x20=\x20(i'+'nVel\x20-\x20vec'+'3(0.5))\x20*\x20'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20float\x20max'+'NegLife\x20=\x20'+'max(lifeti'+'me,\x20(numPa'+('rticles\x20-\x20'+'1.0)\x20*\x20(ra'+'te+rateDiv'+'));\x0a\x20\x20\x20\x20fl'+'oat\x20maxPos'+'Life\x20=\x20lif'+'etime+1.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20inLife'+'\x20*\x20(maxNeg'+'Life\x20+\x20max'+'PosLife)\x20-'+'\x20maxNegLif'+'e;\x0a}\x0a'),c3='\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'gl_FragCoo'+'rd.y<1.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'outPos,\x20(o'+'utAngle\x20+\x20'+'1000.0)\x20*\x20'+'visMode);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(outVel,\x20o'+'utLife);\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',h3='\x0auniform\x20v'+'ec3\x20outBou'+'ndsMul;\x0aun'+'iform\x20vec3'+'\x20outBounds'+'Add;\x0a\x0avec2'+'\x20encodeFlo'+'atRG(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec2\x20enc'+'\x20=\x20vec2(1.'+'0,\x20255.0)\x20'+'*\x20v;\x0a\x20\x20\x20\x20e'+'nc\x20=\x20fract'+'(enc);\x0a\x20\x20\x20'+'\x20enc\x20-=\x20en'+'c.yy\x20*\x20vec'+'2(1.0/255.'+'0,\x201.0/255'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20enc;'+'\x0a}\x0a\x0avec4\x20e'+'ncodeFloat'+'RGBA(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20enc'+'\x20=\x20vec4(1.'+'0,\x20255.0,\x20'+'65025.0,\x201'+'60581375.0'+')\x20*\x20v;\x0a\x20\x20\x20'+'\x20enc\x20=\x20fra'+'ct(enc);\x0a\x20'+'\x20\x20\x20enc\x20-=\x20'+'enc.yzww\x20*'+'\x20vec4(1.0/'+'255.0,1.0/'+'255.0,1.0/'+'255.0,0.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20enc;\x0a}\x0a'+'\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20outP'+'os\x20=\x20outPo'+'s\x20*\x20outBou'+'ndsMul\x20+\x20o'+'utBoundsAd'+'d;\x0a\x20\x20\x20\x20out'+'Angle\x20=\x20fr'+'act(outAng'+'le\x20/\x20PI2);'+'\x0a\x0a\x20\x20\x20\x20outV'+'el\x20=\x20(outV'+'el\x20/\x20maxVe'+'l)\x20+\x20vec3('+'0.5);\x20//\x20T'+'ODO:\x20mul\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'maxNegLife'+'\x20=\x20max(lif'+'etime,\x20(nu'+'mParticles'+'\x20-\x201.0)\x20*\x20'+'(rate+rate'+'Div));\x0a\x20\x20\x20'+'\x20float\x20max'+'PosLife\x20=\x20'+'lifetime+1'+'.0;\x0a\x20\x20\x20\x20ou'+'tLife\x20=\x20(o'+'utLife\x20+\x20m'+'axNegLife)'+'\x20/\x20(maxNeg'+'Life\x20+\x20max'+'PosLife);\x0a'+'\x0a\x20\x20\x20\x20if\x20(g'+'l_FragCoor'+'d.y\x20<\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(encodeFlo'+'atRG(outPo'+'s.x),\x20enco'+'deFloatRG('+'outPos.y))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(gl_'+'FragCoord.'+'y\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(e'+'ncodeFloat'+'RG(outPos.'+'z),\x20encode'+'FloatRG(ou'+'tAngle));\x0a'+'\x20\x20\x20\x20}\x20else'+('\x20if\x20(gl_Fr'+'agCoord.y\x20'+'<\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(out'+'Vel,\x20visMo'+'de*0.5+0.5'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20e'+'ncodeFloat'+'RGBA(outLi'+'fe);\x0a\x20\x20\x20\x20}'+'\x0a}\x0a'),d3='\x0auniform\x20m'+'at3\x20spawnB'+'ounds;\x0auni'+'form\x20vec3\x20'+'spawnPosIn'+'nerRatio;\x0a'+'\x0avec3\x20calc'+'SpawnPosit'+'ion(vec3\x20i'+'nBounds,\x20f'+'loat\x20rndFa'+'ctor)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20pos'+'\x20=\x20inBound'+'s\x20-\x20vec3(0'+'.5);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20posAb'+'s\x20=\x20abs(po'+'s);\x0a\x20\x20\x20\x20ve'+'c3\x20maxPos\x20'+'=\x20vec3(max'+'(posAbs.x,'+'\x20max(posAb'+'s.y,\x20posAb'+'s.z)));\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ed'+'ge\x20=\x20maxPo'+'s\x20+\x20(vec3('+'0.5)\x20-\x20max'+'Pos)\x20*\x20spa'+'wnPosInner'+'Ratio;\x0a\x0a\x20\x20'+'\x20\x20pos.x\x20=\x20'+'edge.x\x20*\x20('+'maxPos.x\x20='+'=\x20posAbs.x'+'\x20?\x20sign(po'+'s.x)\x20:\x202.0'+'\x20*\x20pos.x);'+'\x0a\x20\x20\x20\x20pos.y'+'\x20=\x20edge.y\x20'+'*\x20(maxPos.'+'y\x20==\x20posAb'+'s.y\x20?\x20sign'+'(pos.y)\x20:\x20'+'2.0\x20*\x20pos.'+'y);\x0a\x20\x20\x20\x20po'+'s.z\x20=\x20edge'+'.z\x20*\x20(maxP'+'os.z\x20==\x20po'+'sAbs.z\x20?\x20s'+'ign(pos.z)'+'\x20:\x202.0\x20*\x20p'+'os.z);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20return\x20e'+'mitterPos\x20'+'+\x20spawnBou'+'nds\x20*\x20pos;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20sp'+'awnBounds\x20'+'*\x20pos;\x0a#en'+'dif\x0a}\x0a\x0avoi'+'d\x20addIniti'+'alVelocity'+'(inout\x20vec'+'3\x20localVel'+'ocity,\x20vec'+'3\x20inBounds'+')\x20{\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20-=\x20vec3('+'0,\x200,\x20init'+'ialVelocit'+'y);\x0a}\x0a',f3='\x0a\x20\x20\x20\x20write'+'Output();\x0a'+'}\x0a',u3='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20parti'+'cleTexIN;\x0a'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex0;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0aunif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x2;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex3'+';\x0a\x0auniform'+'\x20mat3\x20emit'+'terMatrix;'+'\x0auniform\x20m'+'at3\x20emitte'+'rMatrixInv'+';\x0auniform\x20'+'vec3\x20emitt'+'erScale;\x0a\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Pos;\x0aunifo'+'rm\x20vec3\x20fr'+'ameRandom;'+'\x0auniform\x20v'+'ec3\x20localV'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20vec3\x20v'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20float\x20'+'delta;\x0auni'+'form\x20float'+'\x20rate;\x0auni'+'form\x20float'+'\x20rateDiv;\x0a'+'uniform\x20fl'+'oat\x20lifeti'+'me;\x0aunifor'+'m\x20float\x20nu'+'mParticles'+';\x0auniform\x20'+'float\x20rotS'+'peedDivMul'+'t;\x0auniform'+'\x20float\x20rad'+'ialSpeedDi'+'vMult;\x0auni'+'form\x20float'+'\x20seed;\x0auni'+'form\x20float'+'\x20startAngl'+'e;\x0auniform'+'\x20float\x20sta'+'rtAngle2;\x0a'+'uniform\x20fl'+'oat\x20initia'+'lVelocity;'+'\x0a\x0auniform\x20'+'float\x20grap'+'hSampleSiz'+'e;\x0auniform'+'\x20float\x20gra'+'phNumSampl'+'es;\x0a\x0avec3\x20'+'inPos;\x0avec'+'3\x20inVel;\x0af'+'loat\x20inAng'+'le;\x0abool\x20i'+'nShow;\x0aflo'+'at\x20inLife;'+'\x0afloat\x20vis'+'Mode;\x0a\x0avec'+'3\x20outPos;\x0a'+'vec3\x20outVe'+'l;\x0afloat\x20o'+'utAngle;\x0ab'+'ool\x20outSho'+'w;\x0afloat\x20o'+'utLife;\x0a',p3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x20-1.0;\x0a\x20\x20\x20'+'\x20}\x0a',m3='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20outLi'+'fe\x20<\x200.0?\x20'+'-1.0:\x20visM'+'ode;\x0a',_3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20visM'+'ode\x20=\x20outL'+'ife\x20<\x200.0?'+'\x201.0:\x20visM'+'ode;\x0a',g3='\x0auniform\x20f'+'loat\x20spawn'+'BoundsSphe'+'re;\x0aunifor'+'m\x20float\x20sp'+'awnBoundsS'+'phereInner'+'Ratio;\x0a\x0ave'+'c3\x20calcSpa'+'wnPosition'+'(vec3\x20inBo'+'unds,\x20floa'+'t\x20rndFacto'+'r)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20rnd4\x20'+'=\x20fract(rn'+'dFactor\x20*\x20'+'1000.0);\x0a\x20'+'\x20\x20\x20vec3\x20no'+'rm\x20=\x20norma'+'lize(inBou'+'nds.xyz\x20-\x20'+'vec3(0.5))'+';\x0a\x20\x20\x20\x20floa'+'t\x20r\x20=\x20rnd4'+'\x20*\x20(1.0\x20-\x20'+'spawnBound'+'sSphereInn'+'erRatio)\x20+'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio;\x0a'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20return'+'\x20emitterPo'+'s\x20+\x20norm\x20*'+'\x20r\x20*\x20spawn'+'BoundsSphe'+'re;\x0a#else\x0a'+'\x20\x20\x20\x20return'+'\x20norm\x20*\x20r\x20'+'*\x20spawnBou'+'ndsSphere;'+'\x0a#endif\x0a}\x0a'+'\x0avoid\x20addI'+'nitialVelo'+'city(inout'+'\x20vec3\x20loca'+'lVelocity,'+'\x20vec3\x20inBo'+'unds)\x20{\x0a\x20\x20'+'\x20\x20localVel'+'ocity\x20+=\x20n'+'ormalize(i'+'nBounds\x20-\x20'+'vec3(0.5))'+'\x20*\x20initial'+'Velocity;\x0a'+'}\x0a',S3='\x0afloat\x20sat'+'urate(floa'+'t\x20x)\x20{\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(x,\x200.0'+',\x201.0);\x0a}\x0a'+'\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0av'+'ec3\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc,\x20out\x20ve'+'c3\x20w)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20a\x20='+'\x20texture2D'+'(tex,\x20tc);'+'\x0a\x20\x20\x20\x20vec4\x20'+'b\x20=\x20textur'+'e2D(tex,\x20t'+'c\x20+\x20graphS'+'ampleSize)'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20g'+'raphNumSam'+'ples);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20unp'+'ackedA\x20=\x20u'+'npack3NFlo'+'ats(a.w);\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20w\x20=\x20'+'mix(unpack'+'edA,\x20unpac'+'kedB,\x20c);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(a.xy'+'z,\x20b.xyz,\x20'+'c);\x0a}\x0a\x0a#de'+'fine\x20HASHS'+'CALE4\x20vec4'+'(1031,\x20.10'+'30,\x20.0973,'+'\x20.1099)\x0ave'+'c4\x20hash41('+'float\x20p)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'p4\x20=\x20fract'+'(vec4(p)\x20*'+'\x20HASHSCALE'+'4);\x0a\x20\x20\x20\x20p4'+'\x20+=\x20dot(p4'+',\x20p4.wzxy+'+'19.19);\x0a\x20\x20'+'\x20\x20return\x20f'+'ract(vec4('+'(p4.x\x20+\x20p4'+'.y)*p4.z,\x20'+'(p4.x\x20+\x20p4'+'.z)*p4.y,\x20'+'(p4.y\x20+\x20p4'+'.z)*p4.w,\x20'+'(p4.z\x20+\x20p4'+'.w)*p4.x))'+';\x0a}\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(gl_FragCo'+'ord.x\x20>\x20nu'+'mParticles'+')\x20discard;'+'\x0a\x0a\x20\x20\x20\x20read'+'Input(vUv0'+'.x);\x0a\x20\x20\x20\x20v'+'isMode\x20=\x20i'+'nShow?\x201.0'+'\x20:\x20-1.0;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20r'+'ndFactor\x20='+'\x20hash41(gl'+'_FragCoord'+('.x\x20+\x20seed)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eRate\x20=\x20ra'+'te\x20+\x20rateD'+'iv\x20*\x20rndFa'+'ctor.x;\x0a\x0a\x20'+'\x20\x20\x20outLife'+'\x20=\x20inLife\x20'+'+\x20delta;\x0a\x20'+'\x20\x20\x20float\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20lifetim'+'e,\x200.0,\x201.'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localV'+'elocityDiv'+';\x0a\x20\x20\x20\x20vec3'+'\x20velocityD'+'iv;\x0a\x20\x20\x20\x20ve'+'c3\x20paramDi'+'v;\x0a\x20\x20\x20\x20vec'+'3\x20localVel'+'ocity\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex0),\x20'+'vec2(nlife'+',\x200),\x20loca'+'lVelocityD'+'iv);\x0a\x20\x20\x20\x20v'+'ec3\x20veloci'+'ty\x20=\x20\x20\x20\x20\x20\x20'+'tex1Dlod_l'+'erp(TEXTUR'+'E_PASS(int'+'ernalTex1)'+',\x20vec2(nli'+'fe,\x200),\x20ve'+'locityDiv)'+';\x0a\x20\x20\x20\x20vec3'+'\x20params\x20=\x20'+'\x20\x20\x20\x20\x20\x20\x20tex'+'1Dlod_lerp'+'(TEXTURE_P'+'ASS(intern'+'alTex2),\x20v'+'ec2(nlife,'+'\x200),\x20param'+'Div);\x0a\x20\x20\x20\x20'+'float\x20rotS'+'peed\x20=\x20par'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rot'+'SpeedDiv\x20='+'\x20paramDiv.'+'y;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20radialP'+'arams\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex3),\x20'+'vec2(nlife'+',\x200),\x20para'+'mDiv);\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeed\x20='+'\x20radialPar'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeedDi'+'v\x20=\x20radial'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20bool\x20'+'respawn\x20=\x20'+'inLife\x20<=\x20'+'0.0\x20||\x20out'+'Life\x20>=\x20li'+'fetime;\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'respawn\x20?\x20'+'calcSpawnP'+'osition(rn'+'dFactor.xy'+'z,\x20rndFact'+'or.x)\x20:\x20in'+'Pos;\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20r'+'espawn\x20?\x20m'+'ix(startAn'+'gle,\x20start'+'Angle2,\x20rn'+'dFactor.x)'+'\x20:\x20inAngle'+';\x0a\x0a#ifndef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20vec')+('3\x20radialVe'+'l\x20=\x20inPos\x20'+'-\x20emitterP'+'os;\x0a#else\x0a'+'\x20\x20\x20\x20vec3\x20r'+'adialVel\x20='+'\x20inPos;\x0a#e'+'ndif\x0a\x20\x20\x20\x20r'+'adialVel\x20='+'\x20(dot(radi'+'alVel,\x20rad'+'ialVel)\x20>\x20'+'1.0E-8)\x20?\x20'+'radialSpee'+'d\x20*\x20normal'+'ize(radial'+'Vel)\x20:\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20+=\x20(radi'+'alSpeedDiv'+'\x20*\x20vec3(2.'+'0)\x20-\x20vec3('+'1.0))\x20*\x20ra'+'dialSpeedD'+'ivMult\x20*\x20r'+'ndFactor.x'+'yz;\x0a\x0a\x20\x20\x20\x20l'+'ocalVeloci'+'ty\x20+=\x20\x20\x20\x20('+'localVeloc'+'ityDiv\x20*\x20v'+'ec3(2.0)\x20-'+'\x20vec3(1.0)'+')\x20*\x20localV'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20velo'+'city\x20+=\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20(vel'+'ocityDiv\x20*'+'\x20vec3(2.0)'+'\x20-\x20vec3(1.'+'0))\x20*\x20velo'+'cityDivMul'+'t\x20*\x20rndFac'+'tor.xyz;\x0a\x20'+'\x20\x20\x20rotSpee'+'d\x20+=\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(rotSpe'+'edDiv\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20rotSpeedD'+'ivMult\x20*\x20r'+'ndFactor.y'+';\x0a\x0a\x20\x20\x20\x20add'+'InitialVel'+'ocity(loca'+'lVelocity,'+'\x20rndFactor'+'.xyz);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20em'+'itterScale'+';\x0a#else\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20(localVel'+'ocity\x20+\x20ra'+'dialVel)\x20/'+'\x20emitterSc'+'ale\x20+\x20emit'+'terMatrixI'+'nv\x20*\x20veloc'+'ity;\x0a#endi'+'f\x0a\x0a\x20\x20\x20\x20out'+'Pos\x20=\x20inPo'+'s\x20+\x20outVel'+'\x20*\x20delta;\x0a'+'\x20\x20\x20\x20outAng'+'le\x20=\x20inAng'+'le\x20+\x20rotSp'+'eed\x20*\x20delt'+'a;\x0a'),y3='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',v3='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'*=\x20saturat'+'e(gammaCor'+'rectInput('+'max(a,\x200.0'+')));\x0a\x20\x20\x20\x20i'+'f\x20((rgb.r\x20'+'+\x20rgb.g\x20+\x20'+'rgb.b)\x20<\x200'+'.000001)\x20d'+'iscard;\x0a',x3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3('+'1.0),\x20rgb,'+'\x20vec3(a));'+'\x0a\x20\x20\x20\x20if\x20(r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+'\x20>\x202.99)\x20d'+'iscard;\x0a',T3='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20d'+'iscard;\x0a',w3='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20\x20\x20/'+'/\x20XYZ\x20=\x20wo'+'rld\x20pos,\x20W'+'\x20=\x20life\x0aat'+'tribute\x20ve'+'c4\x20particl'+'e_vertexDa'+'ta2;\x20\x20//\x20X'+'\x20=\x20angle,\x20'+'Y\x20=\x20scale,'+'\x20Z\x20=\x20alpha'+',\x20W\x20=\x20velo'+'city.x\x0aatt'+'ribute\x20vec'+'4\x20particle'+'_vertexDat'+'a3;\x20\x20//\x20XY'+'Z\x20=\x20partic'+'le\x20local\x20p'+'os,\x20W\x20=\x20ve'+'locity.y\x0aa'+'ttribute\x20f'+'loat\x20parti'+'cle_vertex'+'Data4;\x20//\x20'+'particle\x20i'+'d\x0a\x0a//\x20type'+'\x20depends\x20o'+'n\x20useMesh\x20'+'property.\x20'+'Start\x20with'+'\x20X\x20=\x20veloc'+'ity.z,\x20Y\x20='+'\x20particle\x20'+'ID\x20and\x20for'+'\x20mesh\x20part'+'icles\x20proc'+'eeds\x20with\x20'+'Z\x20=\x20mesh\x20U'+'V.x,\x20W\x20=\x20m'+'esh\x20UV.y\x0a/'+'/\x20Note:\x20Th'+'is\x20generat'+'es\x20a\x20dupli'+'cate\x20attri'+'bute\x20warni'+'ng,\x20as\x20the'+'\x20scanning\x20'+'we\x20do\x20is\x20v'+'ery\x20simple'+'.\x0a#ifndef\x20'+'USE_MESH\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec2\x20pa'+'rticle_ver'+'texData5;\x0a'+'#else\x0a\x20\x20\x20\x20'+'attribute\x20'+'vec4\x20parti'+'cle_vertex'+'Data5;\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifndef\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20#define\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a#endif\x0a\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20lifetim'+'e;\x0auniform'+'\x20float\x20str'+'etch;\x0aunif'+'orm\x20float\x20'+'seed;\x0aunif'+'orm\x20vec3\x20w'+'rapBounds;'+'\x0auniform\x20v'+'ec3\x20emitte'+'rScale;\x0aun'+('iform\x20vec3'+'\x20faceTange'+'nt;\x0aunifor'+'m\x20vec3\x20fac'+'eBinorm;\x0a\x0a'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex0'+';\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x1;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex2;\x0a#end'+'if\x0auniform'+'\x20vec3\x20emit'+'terPos;\x0a\x0av'+'arying\x20vec'+'4\x20texCoord'+'sAlphaLife'+';\x0a\x0avec2\x20ro'+'tate(vec2\x20'+'quadXY,\x20fl'+'oat\x20pRotat'+'ion,\x20out\x20m'+'at2\x20rotMat'+'rix)\x0a{\x0a\x20\x20\x20'+'\x20float\x20c\x20='+'\x20cos(pRota'+'tion);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20sin(pRota'+'tion);\x0a\x20\x20\x20'+'\x20//vec4\x20ro'+'tationMatr'+'ix\x20=\x20vec4('+'c,\x20-s,\x20s,\x20'+'c);\x0a\x0a\x20\x20\x20\x20m'+'at2\x20m\x20=\x20ma'+'t2(c,\x20-s,\x20'+'s,\x20c);\x0a\x20\x20\x20'+'\x20rotMatrix'+'\x20=\x20m;\x0a\x0a\x20\x20\x20'+'\x20return\x20m\x20'+'*\x20quadXY;\x0a'+'}\x0a\x0avec3\x20bi'+'llboard(ve'+'c3\x20Instanc'+'eCoords,\x20v'+'ec2\x20quadXY'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20return\x20p'+'os;\x0a}\x0a\x0avec'+'3\x20customFa'+'ce(vec3\x20In'+'stanceCoor'+'ds,\x20vec2\x20q'+'uadXY)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20po'+'s\x20=\x20faceTa'+'ngent\x20*\x20qu'+'adXY.x\x20+\x20f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0avoid\x20main'+'(void)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20pa'+'rticlePos\x20'+'=\x20particle'+'_vertexDat'+'a.xyz;\x0a\x20\x20\x20'+'\x20vec3\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20vec3\x20vert'+'Pos\x20=\x20part'+'icle_verte'+'xData3.xyz'+';\x0a\x20\x20\x20\x20vec3'+'\x20inVel\x20=\x20v'+'ec3(partic'+'le_vertexD'+'ata2.w,\x20pa')+('rticle_ver'+'texData3.w'+',\x20particle'+'_vertexDat'+'a5.x);\x0a\x0a\x20\x20'+'\x20\x20float\x20id'+'\x20=\x20floor(p'+'article_ve'+'rtexData4)'+';\x0a\x20\x20\x20\x20floa'+'t\x20rndFacto'+'r\x20=\x20fract('+'sin(id\x20+\x201'+'.0\x20+\x20seed)'+');\x0a\x20\x20\x20\x20vec'+'3\x20rndFacto'+'r3\x20=\x20vec3('+'rndFactor,'+'\x20fract(rnd'+'Factor*10.'+'0),\x20fract('+'rndFactor*'+'100.0));\x0a\x0a'+'#ifdef\x20LOC'+'AL_SPACE\x0a\x20'+'\x20\x20\x20inVel\x20='+'\x20mat3(matr'+'ix_model)\x20'+'*\x20inVel;\x0a#'+'endif\x0a\x20\x20\x20\x20'+'vec2\x20veloc'+'ityV\x20=\x20nor'+'malize((ma'+'t3(matrix_'+'view)\x20*\x20in'+'Vel).xy);\x20'+'//\x20should\x20'+'be\x20removed'+'\x20by\x20compil'+'er\x20if\x20alig'+'n/stretch\x20'+'is\x20not\x20use'+'d\x0a\x0a\x20\x20\x20\x20vec'+'2\x20quadXY\x20='+'\x20vertPos.x'+'y;\x0a\x0a#ifdef'+'\x20USE_MESH\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe\x20=\x20vec4('+'particle_v'+'ertexData5'+'.zw,\x20parti'+'cle_vertex'+'Data2.z,\x20p'+'article_ve'+'rtexData.w'+');\x0a#else\x0a\x20'+'\x20\x20\x20texCoor'+'dsAlphaLif'+'e\x20=\x20vec4(q'+'uadXY\x20*\x20-0'+'.5\x20+\x200.5,\x20'+'particle_v'+'ertexData2'+'.z,\x20partic'+'le_vertexD'+'ata.w);\x0a#e'+'ndif\x0a\x20\x20\x20\x20m'+'at2\x20rotMat'+'rix;\x0a\x0a\x20\x20\x20\x20'+'float\x20inAn'+'gle\x20=\x20part'+'icle_verte'+'xData2.x;\x0a'+'\x20\x20\x20\x20vec3\x20p'+'articlePos'+'Moved\x20=\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20vec3\x20me'+'shLocalPos'+'\x20=\x20particl'+'e_vertexDa'+'ta3.xyz;\x0a'),E3='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20par'+'ticle_vert'+'exData2.y\x20'+'*\x20emitterS'+'cale;\x0a\x20\x20\x20\x20'+'localPos\x20+'+'=\x20particle'+'Pos;\x0a\x0a\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_viewProje'+'ction\x20*\x20ve'+'c4(localPo'+'s,\x201.0);\x0a',b3='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20quadXY'+');\x0a',A3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(rgb'+',\x20a);\x0a}\x0a',C3='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20sca'+'le\x20*\x20emitt'+'erScale;\x0a\x20'+'\x20\x20\x20localPo'+'s\x20+=\x20parti'+'clePos;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREEN_SPA'+'CE\x0a\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(loca'+'lPos.x,\x20lo'+'calPos.y,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20vec4(lo'+'calPos.xyz'+',\x201.0);\x0a\x20\x20'+'\x20\x20#endif\x0a',P3='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20normal\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20vec3'+'\x20posNormal'+'\x20=\x20-normal'+'\x20*\x200.5\x20+\x200'+'.5;\x0a\x20\x20\x20\x20ne'+'gNormal\x20*='+'\x20negNormal'+';\x0a\x20\x20\x20\x20posN'+'ormal\x20*=\x20p'+'osNormal;\x0a',M3='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20//\x20'+'XYZ\x20=\x20part'+'icle\x20posit'+'ion,\x20W\x20=\x20p'+'article\x20ID'+'\x20+\x20random\x20'+'factor\x0a\x0a#i'+'f\x20defined('+'USE_MESH)\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(USE_'+'MESH_UV)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20att'+'ribute\x20vec'+'2\x20particle'+'_uv;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mesh'+'\x20UV\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20par'+'ticle_uv\x20='+'\x20vec2(0.0,'+'\x200.0);\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20mat4\x20m'+'atrix_view'+'Projection'+';\x0auniform\x20'+'mat4\x20matri'+'x_model;\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20numPart'+'iclesPot;\x0a'+'uniform\x20fl'+'oat\x20graphS'+'ampleSize;'+'\x0auniform\x20f'+'loat\x20graph'+'NumSamples'+';\x0auniform\x20'+'float\x20stre'+'tch;\x0aunifo'+'rm\x20vec3\x20wr'+'apBounds;\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Scale;\x0auni'+'form\x20vec3\x20'+'emitterPos'+';\x0auniform\x20'+'vec3\x20faceT'+'angent;\x0aun'+'iform\x20vec3'+'\x20faceBinor'+'m;\x0auniform'+'\x20float\x20rat'+'e;\x0auniform'+'\x20float\x20rat'+'eDiv;\x0aunif'+'orm\x20float\x20'+'lifetime;\x0a'+'uniform\x20fl'+'oat\x20deltaR'+'andomnessS'+'tatic;\x0auni'+'form\x20float'+'\x20scaleDivM'+'ult;\x0aunifo'+'rm\x20float\x20a'+'lphaDivMul'+'t;\x0auniform'+'\x20float\x20see'+'d;\x0auniform'+'\x20float\x20del'+'ta;\x0aunifor'+'m\x20sampler2'+'D\x20particle'+'TexOUT;\x0aun'+'iform\x20samp'+('ler2D\x20part'+'icleTexIN;'+'\x0a\x0a#ifdef\x20P'+'ARTICLE_GP'+'U\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x0;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex2;\x0a#e'+'ndif\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0avarying\x20'+'vec4\x20texCo'+'ordsAlphaL'+'ife;\x0a\x0avec3'+'\x20inPos;\x0ave'+'c3\x20inVel;\x0a'+'float\x20inAn'+'gle;\x0abool\x20'+'inShow;\x0afl'+'oat\x20inLife'+';\x0a'),D3='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20max(norm'+'al,\x20vec3(0'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20posNo'+'rmal\x20=\x20max'+'(-normal,\x20'+'vec3(0.0))'+';\x0a',I3='\x0a\x20\x20\x20\x20vec3\x20'+'light\x20=\x20ne'+'gNormal.x*'+'lightCube['+'0]\x20+\x20posNo'+'rmal.x*lig'+'htCube[1]\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20negN'+'ormal.y*li'+'ghtCube[2]'+'\x20+\x20posNorm'+'al.y*light'+'Cube[3]\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20negNor'+'mal.z*ligh'+'tCube[4]\x20+'+'\x20posNormal'+'.z*lightCu'+'be[5];\x0a\x0a\x20\x20'+'\x20\x20rgb\x20*=\x20l'+'ight;\x0a',L3='\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20('+'matrix_mod'+'el\x20*\x20vec4('+'particlePo'+'s,\x201.0)).x'+'yz;\x0a',R3='\x0a\x20\x20\x20\x20vec3\x20'+'localPos\x20='+'\x20meshLocal'+'Pos;\x0a\x20\x20\x20\x20l'+'ocalPos.xy'+'\x20=\x20rotate('+'localPos.x'+'y,\x20inAngle'+',\x20rotMatri'+'x);\x0a\x20\x20\x20\x20lo'+'calPos.yz\x20'+'=\x20rotate(l'+'ocalPos.yz'+',\x20inAngle,'+'\x20rotMatrix'+');\x0a\x0a\x20\x20\x20\x20bi'+'llboard(pa'+'rticlePos,'+'\x20quadXY);\x0a',O3='\x0a\x20\x20\x20\x20Norma'+'l\x20=\x20normal'+'ize(localP'+'os\x20+\x20matri'+'x_viewInve'+'rse[2].xyz'+');\x0a',F3='\x0a\x20\x20\x20\x20vec3\x20'+'normalMap\x20'+'=\x20normaliz'+'e(texture2'+'D(normalMa'+'p,\x20vec2(te'+'xCoordsAlp'+'haLife.x,\x20'+'1.0\x20-\x20texC'+'oordsAlpha'+'Life.y)).x'+'yz\x20*\x202.0\x20-'+'\x201.0);\x0a\x20\x20\x20'+'\x20vec3\x20norm'+'al\x20=\x20Parti'+'cleMat\x20*\x20n'+'ormalMap;\x0a',N3='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan(veloci'+'tyV.x,\x20vel'+'ocityV.y);'+'\x0a\x0a',k3='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',U3='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vec3\x20No'+'rmal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20lightCu'+'be[6];\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20float\x20vDe'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fogP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'f\x20NORMAL\x20='+'=\x20MAP\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20normalMa'+'p;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22p'+'articlePS\x22'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_softP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20normal\x20'+'=\x20Normal;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalMap'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20HALF_L'+'AMBERT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_ha'+'lflambertP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_la'+'mbertPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_lighting'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20BLEND\x20'+'==\x20NORMAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndNormalPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+('\x20ADDITIVE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndAddPS\x22\x0a\x20'+'\x20\x20\x20#elif\x20B'+'LEND\x20==\x20MU'+'LTIPLICATI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendMulti'+'plyPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endPS\x22\x0a'),B3='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20animTexTi'+'lesParams;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20animTexP'+'arams;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec2\x20an'+'imTexIndex'+'Params;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20NO'+'RMAL\x20==\x20MA'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec3\x20Normal'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20SOFT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'rying\x20floa'+'t\x20vDepth;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_initVS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PA'+'CK8\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleInputR'+'gba8PS\x22\x20\x20\x20'+'\x20\x20//\x20why\x20a'+'re\x20these\x20P'+'S\x20and\x20not\x20'+'VS?\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x20'+'\x22particleI'+'nputFloatP'+'S\x22\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'OFT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22scre'+'enDepthPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleVS\x22\x0a\x0a\x20\x20'+'\x20\x20#else\x20//'+'\x20PARTICLE_'+'CPU\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22scr'+'eenDepthPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_cpuVS'+'\x22\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_local'+'ShiftVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20ANIMT'+'EX_LOOP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('#include\x20\x22'+'particleAn'+'imFrameLoo'+'pVS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particleA'+'nimFrameCl'+'ampVS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleAn'+'imTexVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20wr'+'ap\x20is\x20not\x20'+'used\x20on\x20CP'+'U,\x20it\x20was\x20'+'commented\x20'+'out.\x20TODO:'+'\x20investiga'+'te\x20why\x0a\x20\x20\x20'+'\x20#ifdef\x20PA'+'RTICLE_GPU'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20WRAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_wrapVS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20AL'+'IGN_TO_MOT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_pointAlon'+'gVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20US'+'E_MESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_meshVS'+'\x22\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20CUS'+'TOM_FACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'customFace'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_b'+'illboardVS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalVS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_TBNVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STRETCH\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_str'+'etchVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endVS\x22\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20PARTICLE'+'_CPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_cpu_endV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#')+('ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_so'+'ftVS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20}\x0a'),z3='\x0a\x20\x20\x20\x20float'+'\x20depth\x20=\x20g'+'etLinearSc'+'reenDepth('+');\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eDepth\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20float\x20dep'+'thDiff\x20=\x20s'+'aturate(ab'+'s(particle'+'Depth\x20-\x20de'+'pth)\x20*\x20sof'+'tening);\x0a\x20'+'\x20\x20\x20a\x20*=\x20de'+'pthDiff;\x0a',V3='\x0a\x20\x20\x20\x20vDept'+'h\x20=\x20getLin'+'earDepth(l'+'ocalPos);\x0a',G3='\x0a\x20\x20\x20\x20vec3\x20'+'moveDir\x20=\x20'+'inVel\x20*\x20st'+'retch;\x0a\x20\x20\x20'+'\x20vec3\x20posP'+'rev\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20+=\x20partic'+'lePosMoved'+';\x0a\x0a\x20\x20\x20\x20vec'+'2\x20centerTo'+'VertexV\x20=\x20'+'normalize('+'(mat3(matr'+'ix_view)\x20*'+'\x20localPos)'+'.xy);\x0a\x0a\x20\x20\x20'+'\x20float\x20int'+'erpolation'+'\x20=\x20dot(-ve'+'locityV,\x20c'+'enterToVer'+'texV)\x20*\x200.'+'5\x20+\x200.5;\x0a\x0a'+'\x20\x20\x20\x20partic'+'lePos\x20=\x20mi'+'x(particle'+'Pos,\x20posPr'+'ev,\x20interp'+'olation);\x0a',H3='\x0a\x20\x20\x20\x20mat3\x20'+'rot3\x20=\x20mat'+'3(rotMatri'+'x[0][0],\x20r'+'otMatrix[0'+'][1],\x200.0,'+'\x20rotMatrix'+'[1][0],\x20ro'+'tMatrix[1]'+'[1],\x200.0,\x20'+'0.0,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'ParticleMa'+'t\x20=\x20mat3(-'+'matrix_vie'+'wInverse[0'+'].xyz,\x20-ma'+'trix_viewI'+'nverse[1].'+'xyz,\x20matri'+'x_viewInve'+'rse[2].xyz'+')\x20*\x20rot3;\x0a',W3='\x0a\x20\x20\x20\x20vec3\x20'+'origPartic'+'lePos\x20=\x20pa'+'rticlePos;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20-=\x20'+'matrix_mod'+'el[3].xyz;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20m'+'od(particl'+'ePos,\x20wrap'+'Bounds)\x20-\x20'+'wrapBounds'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20+=\x20mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'PosMoved\x20='+'\x20particleP'+'os\x20-\x20origP'+'articlePos'+';\x0a',$3={'particlePS':s3,'particleVS':i3,'particleAnimFrameClampVS':r3,'particleAnimFrameLoopVS':a3,'particleAnimTexVS':n3,'particleInputFloatPS':o3,'particleInputRgba8PS':l3,'particleOutputFloatPS':c3,'particleOutputRgba8PS':h3,'particleUpdaterAABBPS':d3,'particleUpdaterEndPS':f3,'particleUpdaterInitPS':u3,'particleUpdaterNoRespawnPS':p3,'particleUpdaterOnStopPS':m3,'particleUpdaterRespawnPS':_3,'particleUpdaterSpherePS':g3,'particleUpdaterStartPS':S3,'particle_billboardVS':y3,'particle_blendAddPS':v3,'particle_blendMultiplyPS':x3,'particle_blendNormalPS':T3,'particle_cpuVS':w3,'particle_cpu_endVS':E3,'particle_customFaceVS':b3,'particle_endPS':A3,'particle_endVS':C3,'particle_halflambertPS':P3,'particle_initVS':M3,'particle_lambertPS':D3,'particle_lightingPS':I3,'particle_localShiftVS':L3,'particle_meshVS':R3,'particle_normalVS':O3,'particle_normalMapPS':F3,'particle_pointAlongVS':N3,'particle_simulationPS':k3,'particle_shaderPS':U3,'particle_shaderVS':B3,'particle_softPS':z3,'particle_softVS':V3,'particle_stretchVS':G3,'particle_TBNVS':H3,'particle_wrapVS':W3},X3='\x0avarying\x20t'+'exCoordsAl'+'phaLife:\x20v'+'ec4f;\x0a\x0avar'+'\x20colorMap:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20colorMap'+'Sampler:\x20s'+'ampler;\x0ava'+'r\x20colorPar'+'am:\x20textur'+'e_2d<f32>;'+'\x0avar\x20color'+'ParamSampl'+'er:\x20sample'+'r;\x0a\x0aunifor'+'m\x20graphSam'+'pleSize:\x20f'+'32;\x0aunifor'+'m\x20graphNum'+'Samples:\x20f'+'32;\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0auniform'+'\x20softening'+':\x20f32;\x0auni'+'form\x20color'+'Mult:\x20f32;'+'\x0a\x0afn\x20satur'+'ate(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(x,'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20tex:\x20v'+'ec4f\x20\x20=\x20te'+'xtureSampl'+'e(colorMap'+',\x20colorMap'+'Sampler,\x20v'+'ec2f(input'+'.texCoords'+'AlphaLife.'+'x,\x201.0\x20-\x20i'+'nput.texCo'+'ordsAlphaL'+'ife.y));\x0a\x20'+'\x20\x20\x20var\x20ram'+'p:\x20vec4f\x20='+'\x20textureSa'+'mple(color'+'Param,\x20col'+'orParamSam'+'pler,\x20vec2'+'f(input.te'+'xCoordsAlp'+'haLife.w,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20ramp\x20=\x20ve'+'c4f(ramp.r'+'gb\x20*\x20unifo'+'rm.colorMu'+'lt,\x20ramp.a'+');\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20=\x20ram'+'p.a\x20+\x20inpu'+'t.texCoord'+'sAlphaLife'+'.z;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20rgb:\x20ve'+'c3f\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'var\x20a:\x20f32'+'\x20=\x20tex.a\x20*'+'\x20ramp.a;\x0a',q3='\x0afn\x20unpack'+'3NFloats(s'+'rc:\x20f32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20r\x20'+'=\x20fract(sr'+'c);\x0a\x20\x20\x20\x20le'+'t\x20g\x20=\x20frac'+'t(src\x20*\x2025'+'6.0);\x0a\x20\x20\x20\x20'+'let\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3f(r,\x20'+'g,\x20b);\x0a}\x0a\x0a'+'fn\x20saturat'+'e(x:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0astruct\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20resu'+'lt:\x20vec4f,'+'\x0a\x20\x20\x20\x20unpac'+'ked:\x20vec3f'+'\x0a}\x0a\x0afn\x20tex'+'1Dlod_lerp'+'_simple(te'+'x:\x20texture'+'_2d<f32>,\x20'+'texSampler'+':\x20sampler,'+'\x20tc:\x20vec2f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20tc_next\x20='+'\x20tc\x20+\x20vec2'+'f(uniform.'+'graphSampl'+'eSize);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(\x20textur'+'eSample(te'+'x,\x20texSamp'+'ler,\x20tc),\x20'+'textureSam'+'ple(tex,\x20t'+'exSampler,'+'\x20tc_next),'+'\x20fract(tc.'+'x\x20*\x20unifor'+'m.graphNum'+'Samples)\x20)'+';\x0a}\x0a\x0afn\x20te'+'x1Dlod_ler'+'p_unpack(t'+'ex:\x20textur'+'e_2d<f32>,'+'\x20texSample'+'r:\x20sampler'+',\x20tc:\x20vec2'+'f)\x20->\x20TexL'+'erpUnpackR'+'esult\x20{\x0a\x20\x20'+'\x20\x20let\x20tc_n'+'ext\x20=\x20tc\x20+'+'\x20vec2f(uni'+'form.graph'+'SampleSize'+');\x0a\x20\x20\x20\x20let'+'\x20a\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20tc,\x200.0);'+'\x0a\x20\x20\x20\x20let\x20b'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'c_next,\x200.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20u'+'niform.gra'+'phNumSampl'+'es);\x0a\x20\x20\x20\x20l'+'et\x20unpacke'+'dA\x20=\x20unpac'+'k3NFloats('+'a.w);\x0a\x20\x20\x20\x20'+'let\x20unpack'+'edB\x20=\x20unpa'+'ck3NFloats'+'(b.w);\x0a\x20\x20\x20'+'\x20let\x20w_out'+('\x20=\x20mix(unp'+'ackedA,\x20un'+'packedB,\x20c'+');\x0a\x20\x20\x20\x20ret'+'urn\x20TexLer'+'pUnpackRes'+'ult(mix(a,'+'\x20b,\x20c),\x20w_'+'out);\x0a}\x0a\x0as'+'truct\x20Rota'+'teResult\x20{'+'\x0a\x20\x20\x20\x20rotat'+'edVec:\x20vec'+'2f,\x0a\x20\x20\x20\x20ma'+'trix:\x20mat2'+'x2f\x0a}\x0a\x0afn\x20'+'rotateWith'+'Matrix(qua'+'dXY:\x20vec2f'+',\x20pRotatio'+'n:\x20f32)\x20->'+'\x20RotateRes'+'ult\x20{\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20co'+'s(pRotatio'+'n);\x0a\x20\x20\x20\x20le'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x20\x20\x20\x20let\x20'+'m\x20=\x20mat2x2'+'f(vec2f(c,'+'\x20s),\x20vec2f'+'(-s,\x20c));\x0a'+'\x20\x20\x20\x20return'+'\x20RotateRes'+'ult(m\x20*\x20qu'+'adXY,\x20m);\x0a'+'}\x0a\x0afn\x20bill'+'board(Inst'+'anceCoords'+':\x20vec3f,\x20q'+'uadXY:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20pos:\x20ve'+'c3f;\x0a\x20\x20\x20\x20#'+'ifdef\x20SCRE'+'EN_SPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pos'+'\x20=\x20vec3f(-'+'1.0,\x200.0,\x20'+'0.0)\x20*\x20qua'+'dXY.x\x20+\x20ve'+'c3f(0.0,\x20-'+'1.0,\x200.0)\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20custom'+'Face(Insta'+'nceCoords:'+'\x20vec3f,\x20qu'+'adXY:\x20vec2'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20pos\x20=\x20un'+'iform.face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20uniform.f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20safeNo'+'rmalize(v:'+'\x20vec2f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20let\x20l\x20='+'\x20length(v)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20select('+'v,\x20v\x20/\x20l,\x20'+'l\x20>\x201e-06)'+';\x0a}\x0a\x0a@vert'+'ex\x0afn\x20vert'+'exMain(inp')+('ut:\x20Vertex'+'Input)\x20->\x20'+'VertexOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20meshLo'+'calPos_in\x20'+'=\x20input.pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20id\x20=\x20floo'+'r(input.pa'+'rticle_ver'+'texData.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20rndFactor'+'\x20=\x20fract(s'+'in(id\x20+\x201.'+'0\x20+\x20unifor'+'m.seed));\x0a'+'\x20\x20\x20\x20let\x20rn'+'dFactor3\x20='+'\x20vec3f(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20let\x20uv\x20=\x20'+'id\x20/\x20unifo'+'rm.numPart'+'iclesPot;\x0a'+'\x20\x20\x20\x20readIn'+'put(uv);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20model'+'Rotation\x20='+'\x20mat3x3f(u'+'niform.mat'+'rix_model['+'0].xyz,\x20un'+'iform.matr'+'ix_model[1'+'].xyz,\x20uni'+'form.matri'+'x_model[2]'+'.xyz);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20inVel'+'\x20=\x20modelRo'+'tation\x20*\x20i'+'nVel;\x0a\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20let\x20viewR'+'otation\x20=\x20'+'mat3x3f(un'+'iform.matr'+'ix_view[0]'+'.xyz,\x20unif'+'orm.matrix'+'_view[1].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[2].xyz'+');\x0a\x20\x20\x20\x20let'+'\x20velocityV'+'\x20=\x20safeNor'+'malize((vi'+'ewRotation'+'\x20*\x20inVel).'+'xy);\x0a\x0a\x20\x20\x20\x20'+'let\x20partic'+'leLifetime'+'\x20=\x20uniform'+'.lifetime;'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'meshLocalP'+'os\x20=\x20meshL'+'ocalPos_in'+';\x0a\x20\x20\x20\x20if\x20('+'inLife\x20<=\x20'+'0.0\x20||\x20inL'+'ife\x20>\x20part'+'icleLifeti'+'me\x20||\x20!inS'+'how)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mesh'+'LocalPos\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20let\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20let'+'\x20nlife\x20=\x20c')+('lamp(inLif'+'e\x20/\x20partic'+'leLifetime'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20lerp_res'+'ult\x20=\x20tex1'+'Dlod_lerp_'+'unpack(int'+'ernalTex2,'+'\x20internalT'+'ex2Sampler'+',\x20vec2f(nl'+'ife,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'params\x20=\x20l'+'erp_result'+'.result;\x0a\x20'+'\x20\x20\x20let\x20par'+'amDiv\x20=\x20le'+'rp_result.'+'unpacked;\x0a'+'\x0a\x20\x20\x20\x20var\x20s'+'cale\x20=\x20par'+'ams.y;\x0a\x20\x20\x20'+'\x20let\x20scale'+'Div\x20=\x20para'+'mDiv.x;\x0a\x20\x20'+'\x20\x20let\x20alph'+'aDiv\x20=\x20par'+'amDiv.z;\x0a\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20scale\x20+\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20unifo'+'rm.scaleDi'+'vMult\x20*\x20fr'+'act(rndFac'+'tor*10000.'+'0);\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20USE'+'_MESH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.texCoords'+'AlphaLife\x20'+'=\x20vec4f(qu'+'adXY\x20*\x20-0.'+'5\x20+\x200.5,\x20('+'alphaDiv\x20*'+'\x202.0\x20-\x201.0'+')\x20*\x20unifor'+'m.alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife\x20=\x20vec4'+'f(particle'+'_uv,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'uniform.al'+'phaDivMult'+'\x20*\x20fract(r'+'ndFactor*1'+'000.0),\x20nl'+'ife);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20var\x20part'+'iclePos\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20var\x20parti'+'clePosMove'+'d\x20=\x20vec3f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20var\x20rotMa'+'trix:\x20mat2'+'x2f;\x0a'),j3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20min('+'floor(inpu'+'t.texCoord'+'sAlphaLife'+'.w\x20*\x20unifo'+'rm.animTex'+'Params.y)\x20'+'+\x20uniform.'+'animTexPar'+'ams.x,\x20uni'+'form.animT'+'exParams.z'+');\x0a',Y3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20floo'+'r((output.'+'texCoordsA'+'lphaLife.w'+'\x20*\x20uniform'+'.animTexPa'+'rams.y\x20+\x20u'+'niform.ani'+'mTexParams'+'.x)\x20%\x20(uni'+'form.animT'+'exParams.z'+'\x20+\x201.0));\x20'+'\x20\x20\x20\x0a',K3='\x0a\x20\x20\x20\x20var\x20a'+'nimationIn'+'dex:\x20f32;\x0a'+'\x0a\x20\x20\x20\x20if\x20(u'+'niform.ani'+'mTexIndexP'+'arams.y\x20=='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20floor(('+'uniform.an'+'imTexParam'+'s.w\x20+\x201.0)'+'\x20*\x20rndFact'+'or3.z)\x20*\x20('+'uniform.an'+'imTexParam'+'s.z\x20+\x201.0)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20animati'+'onIndex\x20=\x20'+'uniform.an'+'imTexIndex'+'Params.x\x20*'+'\x20(uniform.'+'animTexPar'+'ams.z\x20+\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20var\x20a'+'tlasX:\x20f32'+'\x20=\x20(animat'+'ionIndex\x20+'+'\x20animFrame'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20atlasY:\x20'+'f32\x20=\x201.0\x20'+'-\x20floor(at'+'lasX\x20+\x201.0'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.y;\x0a\x20\x20\x20\x20at'+'lasX\x20=\x20fra'+'ct(atlasX)'+';\x20//\x20Reass'+'ign\x20atlasX'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'current_tc'+'al_xy\x20=\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.xy;\x0a\x20\x20'+'\x20\x20let\x20scal'+'ed_tcal_xy'+'\x20=\x20current'+'_tcal_xy\x20*'+'\x20uniform.a'+'nimTexTile'+'sParams.xy'+';\x0a\x20\x20\x20\x20let\x20'+'final_tcal'+'_xy\x20=\x20scal'+'ed_tcal_xy'+'\x20+\x20vec2f(a'+'tlasX,\x20atl'+'asY);\x0a\x20\x20\x20\x20'+'output.tex'+'CoordsAlph'+'aLife\x20=\x20ve'+'c4f(final_'+'tcal_xy,\x20o'+'utput.texC'+'oordsAlpha'+'Life.z,\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.w);\x0a',Z3='\x0afn\x20readIn'+'put(uv:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex:\x20ve'+'c4f\x20=\x20text'+'ureSampleL'+'evel(parti'+'cleTexIN,\x20'+'particleTe'+'xINSampler'+',\x20vec2f(uv'+',\x200.25),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex2:\x20v'+'ec4f\x20=\x20tex'+'tureSample'+'Level(part'+'icleTexIN,'+'\x20particleT'+'exINSample'+'r,\x20vec2f(u'+'v,\x200.75),\x20'+'0.0);\x0a\x0a\x20\x20\x20'+'\x20inPos\x20=\x20t'+'ex.xyz;\x0a\x20\x20'+'\x20\x20inVel\x20=\x20'+'tex2.xyz;\x0a'+'\x20\x20\x20\x20inAngl'+'e\x20=\x20abs(te'+'x.w)\x20-\x20100'+'0.0;\x0a\x20\x20\x20\x20i'+'nShow\x20=\x20te'+'x.w\x20>=\x200.0'+';\x0a\x20\x20\x20\x20inLi'+'fe\x20=\x20tex2.'+'w;\x0a}\x0a',Q3='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0ac'+'onst\x20PI2:\x20'+'f32\x20=\x206.28'+'3185307179'+'586;\x0a\x0aunif'+'orm\x20inBoun'+'dsSize:\x20ve'+'c3f;\x0aunifo'+'rm\x20inBound'+'sCenter:\x20v'+'ec3f;\x0a\x0auni'+'form\x20maxVe'+'l:\x20f32;\x0a\x0af'+'n\x20decodeFl'+'oatRG(rg:\x20'+'vec2f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20rg.'+'y\x20*\x20(1.0\x20/'+'\x20255.0)\x20+\x20'+'rg.x;\x0a}\x0a\x0af'+'n\x20decodeFl'+'oatRGBA(\x20r'+'gba:\x20vec4f'+'\x20)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20dot(rgb'+'a,\x20vec4f(1'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x2065025.0'+',\x201.0\x20/\x2016'+'0581375.0)'+');\x0a}\x0a\x0afn\x20r'+'eadInput(u'+'v:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20let\x20te'+'x0\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.125),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex1\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.37'+'5),\x200.0);\x0a'+'\x20\x20\x20\x20let\x20te'+'x2\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.625),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex3\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.87'+'5),\x200.0);\x0a'+'\x0a\x20\x20\x20\x20inPos'+'\x20=\x20vec3f(d'+'ecodeFloat'+'RG(tex0.rg'+'),\x20decodeF'+'loatRG(tex'+'0.ba),\x20dec'+'odeFloatRG'+'(tex1.rg))'+';\x0a\x20\x20\x20\x20inPo'+'s\x20=\x20(inPos'+'\x20-\x20vec3f(0'+'.5))\x20*\x20uni'+'form.inBou'+'ndsSize\x20+\x20'+'uniform.in'+'BoundsCent'+'er;\x0a\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inVel\x20=\x20('+('inVel\x20-\x20ve'+'c3f(0.5))\x20'+'*\x20uniform.'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20let\x20l'+'ife_decode'+'d\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20let\x20maxNe'+'gLife\x20=\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20(uniform.'+'rate\x20+\x20uni'+'form.rateD'+'iv));\x0a\x20\x20\x20\x20'+'let\x20maxPos'+'Life\x20=\x20uni'+'form.lifet'+'ime\x20+\x201.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20life_d'+'ecoded\x20*\x20('+'maxNegLife'+'\x20+\x20maxPosL'+'ife)\x20-\x20max'+'NegLife;\x0a}'),J3='\x0afn\x20getOut'+'put()\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20if\x20(pcPos'+'ition.y\x20<\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4f(ou'+'tPos,\x20(out'+'Angle\x20+\x2010'+'00.0)\x20*\x20vi'+'sMode);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(outVel,\x20'+'outLife);\x0a'+'\x20\x20\x20\x20}\x0a}\x0a',eO='\x0auniform\x20o'+'utBoundsMu'+'l:\x20vec3f;\x0a'+'uniform\x20ou'+'tBoundsAdd'+':\x20vec3f;\x0a\x0a'+'fn\x20encodeF'+'loatRG(\x20v:'+'\x20f32\x20)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20var\x20enc:'+'\x20vec2f\x20=\x20v'+'ec2f(1.0,\x20'+'255.0)\x20*\x20v'+';\x0a\x20\x20\x20\x20enc\x20'+'=\x20fract(en'+'c);\x0a\x20\x20\x20\x20en'+'c\x20=\x20enc\x20-\x20'+'enc.yy\x20*\x20('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20enc;\x0a'+'}\x0a\x0afn\x20enco'+'deFloatRGB'+'A(\x20v:\x20f32\x20'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20factors\x20='+'\x20vec4f(1.0'+',\x20255.0,\x206'+'5025.0,\x2016'+'0581375.0)'+';\x0a\x20\x20\x20\x20var\x20'+'enc:\x20vec4f'+'\x20=\x20factors'+'\x20*\x20v;\x0a\x20\x20\x20\x20'+'enc\x20=\x20frac'+'t(enc);\x0a\x20\x20'+'\x20\x20enc\x20=\x20en'+'c\x20-\x20enc.yz'+'ww\x20*\x20vec4f'+'(1.0\x20/\x20255'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x20255.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'return\x20enc'+';\x0a}\x0a\x0afn\x20ge'+'tOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20outPo'+'s\x20=\x20outPos'+'\x20*\x20uniform'+'.outBounds'+'Mul\x20+\x20unif'+'orm.outBou'+'ndsAdd;\x0a\x20\x20'+'\x20\x20outAngle'+'\x20=\x20fract(o'+'utAngle\x20/\x20'+'PI2);\x0a\x0a\x20\x20\x20'+'\x20outVel\x20=\x20'+'(outVel\x20/\x20'+'uniform.ma'+'xVel)\x20+\x20ve'+'c3f(0.5);\x20'+'//\x20TODO:\x20m'+'ul\x0a\x0a\x20\x20\x20\x20le'+'t\x20maxNegLi'+'fe\x20=\x20max(u'+'niform.lif'+'etime,\x20(un'+'iform.numP'+'articles\x20-'+'\x201.0)\x20*\x20(u'+'niform.rat'+'e\x20+\x20unifor'+'m.rateDiv)'+');\x0a\x20\x20\x20\x20let'+'\x20maxPosLif'+'e\x20=\x20unifor'+'m.lifetime'+'\x20+\x201.0;\x0a\x20\x20'+'\x20\x20outLife\x20'+'=\x20(outLife'+'\x20+\x20maxNegL'+'ife)\x20/\x20(ma'+'xNegLife\x20+'+'\x20maxPosLif'+'e);\x0a\x0a\x20\x20\x20\x20i'+'f\x20(pcPosit'+'ion.y\x20<\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'vec4f(enco'+'deFloatRG('+'outPos.x),'+'\x20encodeFlo'+'atRG(outPo'+'s.y));\x0a\x20\x20\x20'+('\x20}\x20else\x20if'+'\x20(pcPositi'+'on.y\x20<\x202.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(encod'+'eFloatRG(o'+'utPos.z),\x20'+'encodeFloa'+'tRG(outAng'+'le));\x0a\x20\x20\x20\x20'+'}\x20else\x20if\x20'+'(pcPositio'+'n.y\x20<\x203.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(outVel'+',\x20visMode\x20'+'*\x200.5\x20+\x200.'+'5);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20encodeFl'+'oatRGBA(ou'+'tLife);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),tO='\x0auniform\x20s'+'pawnBounds'+':\x20mat3x3f;'+'\x0auniform\x20s'+'pawnPosInn'+'erRatio:\x20v'+'ec3f;\x0a\x0afn\x20'+'calcSpawnP'+'osition(in'+'Bounds:\x20ve'+'c3f,\x20rndFa'+'ctor:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'pos\x20=\x20inBo'+'unds\x20-\x20vec'+'3f(0.5);\x0a\x0a'+'\x20\x20\x20\x20let\x20po'+'sAbs\x20=\x20abs'+'(pos);\x0a\x20\x20\x20'+'\x20let\x20maxCo'+'mp\x20=\x20max(p'+'osAbs.x,\x20m'+'ax(posAbs.'+'y,\x20posAbs.'+'z));\x0a\x20\x20\x20\x20l'+'et\x20maxPos\x20'+'=\x20vec3f(ma'+'xComp);\x0a\x0a\x20'+'\x20\x20\x20let\x20edg'+'e\x20=\x20maxPos'+'\x20+\x20(vec3f('+'0.5)\x20-\x20max'+'Pos)\x20*\x20uni'+'form.spawn'+'PosInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'pos.x\x20=\x20ed'+'ge.x\x20*\x20sel'+'ect(2.0\x20*\x20'+'pos.x,\x20sig'+'n(pos.x),\x20'+'maxPos.x\x20='+'=\x20posAbs.x'+');\x0a\x20\x20\x20\x20pos'+'.y\x20=\x20edge.'+'y\x20*\x20select'+'(2.0\x20*\x20pos'+'.y,\x20sign(p'+'os.y),\x20max'+'Pos.y\x20==\x20p'+'osAbs.y);\x0a'+'\x20\x20\x20\x20pos.z\x20'+'=\x20edge.z\x20*'+'\x20select(2.'+'0\x20*\x20pos.z,'+'\x20sign(pos.'+'z),\x20maxPos'+'.z\x20==\x20posA'+'bs.z);\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20uni'+'form.emitt'+'erPos\x20+\x20un'+'iform.spaw'+'nBounds\x20*\x20'+'pos;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uniform.sp'+'awnBounds\x20'+'*\x20pos;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20*localV'+'elocity\x20=\x20'+'*localVelo'+'city\x20-\x20vec'+'3f(0.0,\x200.'+'0,\x20uniform'+'.initialVe'+'locity);\x0a}'+'\x0a',sO='\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'getOutput('+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',iO='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20par'+'ticleTexIN'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20particl'+'eTexINSamp'+'ler:\x20sampl'+'er;\x0avar\x20in'+'ternalTex0'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0avar\x20int'+'ernalTex1:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20internal'+'Tex1Sample'+'r:\x20sampler'+';\x0avar\x20inte'+'rnalTex2:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20internalT'+'ex2Sampler'+':\x20sampler;'+'\x0avar\x20inter'+'nalTex3:\x20t'+'exture_2d<'+'f32>;\x0avar\x20'+'internalTe'+'x3Sampler:'+'\x20sampler;\x0a'+'\x0auniform\x20e'+'mitterMatr'+'ix:\x20mat3x3'+'f;\x0auniform'+'\x20emitterMa'+'trixInv:\x20m'+'at3x3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0a\x0aun'+'iform\x20emit'+'terPos:\x20ve'+'c3f;\x0aunifo'+'rm\x20frameRa'+'ndom:\x20vec3'+'f;\x0auniform'+'\x20localVelo'+'cityDivMul'+'t:\x20vec3f;\x0a'+'uniform\x20ve'+'locityDivM'+'ult:\x20vec3f'+';\x0auniform\x20'+'delta:\x20f32'+';\x0auniform\x20'+'rate:\x20f32;'+'\x0auniform\x20r'+'ateDiv:\x20f3'+'2;\x0auniform'+'\x20lifetime:'+'\x20f32;\x0aunif'+'orm\x20numPar'+'ticles:\x20f3'+'2;\x0auniform'+'\x20rotSpeedD'+'ivMult:\x20f3'+'2;\x0auniform'+'\x20radialSpe'+'edDivMult:'+'\x20f32;\x0aunif'+'orm\x20seed:\x20'+'f32;\x0aunifo'+'rm\x20startAn'+'gle:\x20f32;\x0a'+'uniform\x20st'+'artAngle2:'+'\x20f32;\x0aunif'+'orm\x20initia'+'lVelocity:'+'\x20f32;\x0a\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0a\x0ava'+'r<private>'+'\x20inPos:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20in'+'Vel:\x20vec3f'+';\x0avar<priv'+'ate>\x20inAng'+('le:\x20f32;\x0av'+'ar<private'+'>\x20inShow:\x20'+'bool;\x0avar<'+'private>\x20i'+'nLife:\x20f32'+';\x0avar<priv'+'ate>\x20visMo'+'de:\x20f32;\x0a\x0a'+'var<privat'+'e>\x20outPos:'+'\x20vec3f;\x0ava'+'r<private>'+'\x20outVel:\x20v'+'ec3f;\x0avar<'+'private>\x20o'+'utAngle:\x20f'+'32;\x0avar<pr'+'ivate>\x20out'+'Show:\x20bool'+';\x0avar<priv'+'ate>\x20outLi'+'fe:\x20f32;\x0a'),rO='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tLife\x20=\x20ou'+'tLife\x20-\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20particleR'+'ate);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20visMod'+'e\x20=\x20-1.0;\x0a'+'\x20\x20\x20\x20}\x0a',aO='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20selec'+'t(visMode,'+'\x20-1.0,\x20out'+'Life\x20<\x200.0'+');\x0a',nO='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20subtract'+'Amount\x20=\x20m'+'ax(uniform'+'.lifetime,'+'\x20(uniform.'+'numParticl'+'es\x20-\x201.0)\x20'+'*\x20particle'+'Rate);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outLi'+'fe\x20=\x20outLi'+'fe\x20-\x20subtr'+'actAmount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'isMode\x20=\x201'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20visMod'+'e\x20=\x20select'+'(visMode,\x20'+'1.0,\x20outLi'+'fe\x20<\x200.0);'+'\x0a',oO='\x0auniform\x20s'+'pawnBounds'+'Sphere:\x20f3'+'2;\x0auniform'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio:\x20'+'f32;\x0a\x0afn\x20c'+'alcSpawnPo'+'sition(inB'+'ounds:\x20vec'+'3f,\x20rndFac'+'tor:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'nd4:\x20f32\x20='+'\x20fract(rnd'+'Factor\x20*\x201'+'000.0);\x0a\x20\x20'+'\x20\x20let\x20norm'+':\x20vec3f\x20=\x20'+'normalize('+'inBounds.x'+'yz\x20-\x20vec3f'+'(0.5));\x0a\x20\x20'+'\x20\x20let\x20r:\x20f'+'32\x20=\x20rnd4\x20'+'*\x20(1.0\x20-\x20u'+'niform.spa'+'wnBoundsSp'+'hereInnerR'+'atio)\x20+\x20un'+'iform.spaw'+'nBoundsSph'+'ereInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20unifo'+'rm.emitter'+'Pos\x20+\x20norm'+'\x20*\x20r\x20*\x20uni'+'form.spawn'+'BoundsSphe'+'re;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20n'+'orm\x20*\x20r\x20*\x20'+'uniform.sp'+'awnBoundsS'+'phere;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20ini'+'tialVelOff'+'set:\x20vec3f'+'\x20=\x20normali'+'ze(inBound'+'s\x20-\x20vec3f('+'0.5))\x20*\x20un'+'iform.init'+'ialVelocit'+'y;\x0a\x20\x20\x20\x20*lo'+'calVelocit'+'y\x20=\x20*local'+'Velocity\x20+'+'\x20initialVe'+'lOffset;\x0a}'+'\x0a',lO='\x0afn\x20satura'+'te(x:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(x,\x20'+'0.0,\x201.0);'+'\x0a}\x0a\x0afn\x20unp'+'ack3NFloat'+'s(src:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20r\x20=\x20fract'+'(src);\x0a\x20\x20\x20'+'\x20let\x20g\x20=\x20f'+'ract(src\x20*'+'\x20256.0);\x0a\x20'+'\x20\x20\x20let\x20b\x20='+'\x20fract(src'+'\x20*\x2065536.0'+');\x0a\x20\x20\x20\x20ret'+'urn\x20vec3f('+'r,\x20g,\x20b);\x0a'+'}\x0a\x0a//\x20Stru'+'ct\x20to\x20hand'+'le\x20multipl'+'e\x20return\x20v'+'alues\x20from'+'\x20tex1Dlod_'+'lerp\x0astruc'+'t\x20TexLerpU'+'npackResul'+'t\x20{\x0a\x20\x20\x20\x20re'+'sult:\x20vec3'+'f,\x0a\x20\x20\x20\x20unp'+'acked:\x20vec'+'3f\x0a}\x0a\x0afn\x20t'+'ex1Dlod_le'+'rp(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20tc:\x20'+'vec2f)\x20->\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'tc_next\x20=\x20'+'tc\x20+\x20vec2f'+'(uniform.g'+'raphSample'+'Size);\x0a\x20\x20\x20'+'\x20let\x20a\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20tc,\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20tc_next'+',\x200.0);\x0a\x20\x20'+'\x20\x20let\x20c\x20=\x20'+'fract(tc.x'+'\x20*\x20uniform'+'.graphNumS'+'amples);\x0a\x0a'+'\x20\x20\x20\x20let\x20un'+'packedA\x20=\x20'+'unpack3NFl'+'oats(a.w);'+'\x0a\x20\x20\x20\x20let\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20let\x20'+'w_out\x20=\x20mi'+'x(unpacked'+'A,\x20unpacke'+'dB,\x20c);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'TexLerpUnp'+'ackResult('+'mix(a.xyz,'+'\x20b.xyz,\x20c)'+',\x20w_out);\x0a'+'}\x0a\x0aconst\x20H'+'ASHSCALE4:'+'\x20vec4f\x20=\x20v'+'ec4f(1031.'+'0,\x200.1030,'+'\x200.0973,\x200'+'.1099);\x0afn'+'\x20hash41(p:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20var\x20p4\x20=\x20'+'fract(vec4'+'f(p)\x20*\x20HAS'+('HSCALE4);\x0a'+'\x20\x20\x20\x20p4\x20=\x20p'+'4\x20+\x20dot(p4'+',\x20p4.wzxy\x20'+'+\x2019.19);\x0a'+'\x20\x20\x20\x20return'+'\x20fract(vec'+'4f((p4.x\x20+'+'\x20p4.y)*p4.'+'z,\x20(p4.x\x20+'+'\x20p4.z)*p4.'+'y,\x20(p4.y\x20+'+'\x20p4.z)*p4.'+'w,\x20(p4.z\x20+'+'\x20p4.w)*p4.'+'x));\x0a}\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20if\x20(pc'+'Position.x'+'\x20>\x20uniform'+'.numPartic'+'les)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20re'+'adInput(in'+'put.vUv0.x'+');\x0a\x20\x20\x20\x20vis'+'Mode\x20=\x20sel'+'ect(-1.0,\x20'+'1.0,\x20inSho'+'w);\x0a\x0a\x20\x20\x20\x20l'+'et\x20rndFact'+'or\x20=\x20hash4'+'1(pcPositi'+'on.x\x20+\x20uni'+'form.seed)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20particleR'+'ate\x20=\x20unif'+'orm.rate\x20+'+'\x20uniform.r'+'ateDiv\x20*\x20r'+'ndFactor.x'+';\x0a\x0a\x20\x20\x20\x20out'+'Life\x20=\x20inL'+'ife\x20+\x20unif'+'orm.delta;'+'\x0a\x20\x20\x20\x20let\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20uniform'+'.lifetime,'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t0\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'0,\x20interna'+'lTex0Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20va'+'r\x20localVel'+'ocity\x20=\x20le'+'rpResult0.'+'result;\x0a\x20\x20'+'\x20\x20let\x20loca'+'lVelocityD'+'iv\x20=\x20lerpR'+'esult0.unp'+'acked;\x0a\x0a\x20\x20'+'\x20\x20let\x20lerp'+'Result1\x20=\x20'+'tex1Dlod_l'+'erp(intern'+'alTex1,\x20in'+'ternalTex1'+'Sampler,\x20v'+'ec2f(nlife'+',\x200.0));\x0a\x20'+'\x20\x20\x20var\x20vel'+'ocity\x20=\x20le'+'rpResult1.'+'result;\x0a\x20\x20'+'\x20\x20let\x20velo'+'cityDiv\x20=\x20'+'lerpResult')+('1.unpacked'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t2\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'2,\x20interna'+'lTex2Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20le'+'t\x20params\x20='+'\x20lerpResul'+'t2.result;'+'\x0a\x20\x20\x20\x20let\x20p'+'aramDiv\x20=\x20'+'lerpResult'+'2.unpacked'+';\x0a\x20\x20\x20\x20var\x20'+'rotSpeed\x20='+'\x20params.x;'+'\x0a\x20\x20\x20\x20let\x20r'+'otSpeedDiv'+'\x20=\x20paramDi'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'let\x20lerpRe'+'sult3\x20=\x20te'+'x1Dlod_ler'+'p(internal'+'Tex3,\x20inte'+'rnalTex3Sa'+'mpler,\x20vec'+'2f(nlife,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20let\x20radia'+'lParams\x20=\x20'+'lerpResult'+'3.result;\x0a'+'\x20\x20\x20\x20let\x20ra'+'dialParamD'+'iv\x20=\x20lerpR'+'esult3.unp'+'acked;\x0a\x20\x20\x20'+'\x20let\x20radia'+'lSpeed\x20=\x20r'+'adialParam'+'s.x;\x0a\x20\x20\x20\x20l'+'et\x20radialS'+'peedDiv\x20=\x20'+'radialPara'+'mDiv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20res'+'pawn\x20=\x20inL'+'ife\x20<=\x200.0'+'\x20||\x20outLif'+'e\x20>=\x20unifo'+'rm.lifetim'+'e;\x0a\x20\x20\x20\x20inP'+'os\x20=\x20selec'+'t(inPos,\x20c'+'alcSpawnPo'+'sition(rnd'+'Factor.xyz'+',\x20rndFacto'+'r.x),\x20resp'+'awn);\x0a\x20\x20\x20\x20'+'inAngle\x20=\x20'+'select(inA'+'ngle,\x20mix('+'uniform.st'+'artAngle,\x20'+'uniform.st'+'artAngle2,'+'\x20rndFactor'+'.x),\x20respa'+'wn);\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20radialVe'+'l:\x20vec3f\x20='+'\x20inPos\x20-\x20u'+'niform.emi'+'tterPos;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20radialVel'+':\x20vec3f\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20=\x20select'+'(vec3f(0.0'+'),\x20radialS'+'peed\x20*\x20nor'+'malize(rad'+'ialVel),\x20d'+'ot(radialV'+'el,\x20radial'+'Vel)\x20>\x201.0')+('E-8);\x0a\x20\x20\x20\x20'+'radialVel\x20'+'=\x20radialVe'+'l\x20+\x20(radia'+'lSpeedDiv\x20'+'*\x20vec3f(2.'+'0)\x20-\x20vec3f'+'(1.0))\x20*\x20u'+'niform.rad'+'ialSpeedDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20=\x20localV'+'elocity\x20+\x20'+'(localVelo'+'cityDiv\x20*\x20'+'vec3f(2.0)'+'\x20-\x20vec3f(1'+'.0))\x20*\x20uni'+'form.local'+'VelocityDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x20\x20\x20\x20vel'+'ocity\x20=\x20ve'+'locity\x20+\x20('+'velocityDi'+'v\x20*\x20vec3f('+'2.0)\x20-\x20vec'+'3f(1.0))\x20*'+'\x20uniform.v'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20rotS'+'peed\x20=\x20rot'+'Speed\x20+\x20(r'+'otSpeedDiv'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20unif'+'orm.rotSpe'+'edDivMult\x20'+'*\x20rndFacto'+'r.y;\x0a\x0a\x20\x20\x20\x20'+'addInitial'+'Velocity(&'+'localVeloc'+'ity,\x20rndFa'+'ctor.xyz);'+'\x0a\x0a\x20\x20\x20\x20#ifn'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20outVel'+'\x20=\x20uniform'+'.emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tVel\x20=\x20(lo'+'calVelocit'+'y\x20+\x20radial'+'Vel)\x20/\x20uni'+'form.emitt'+'erScale\x20+\x20'+'uniform.em'+'itterMatri'+'xInv\x20*\x20vel'+'ocity;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20outPos\x20'+'=\x20inPos\x20+\x20'+'outVel\x20*\x20u'+'niform.del'+'ta;\x0a\x20\x20\x20\x20ou'+'tAngle\x20=\x20i'+'nAngle\x20+\x20r'+'otSpeed\x20*\x20'+'uniform.de'+'lta;\x0a'),cO='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20rotated'+'QuadXY);\x0a',hO='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20sa'+'turate(gam'+'maCorrectI'+'nput(max(a'+',\x200.0)));\x0a'+'\x20\x20\x20\x20if\x20((r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+')\x20<\x200.0000'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20}\x20\x20'+'\x20\x20\x0a',dO='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3f'+'(1.0),\x20rgb'+',\x20a);\x0a\x20\x20\x20\x20'+'if\x20((rgb.r'+'\x20+\x20rgb.g\x20+'+'\x20rgb.b)\x20>\x20'+'2.99)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a',fO='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20}\x0a',uO='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20\x20'+'\x20//\x20XYZ\x20=\x20'+'world\x20pos,'+'\x20W\x20=\x20life\x0a'+'attribute\x20'+'particle_v'+'ertexData2'+':\x20vec4f;\x20\x20'+'//\x20X\x20=\x20ang'+'le,\x20Y\x20=\x20sc'+'ale,\x20Z\x20=\x20a'+'lpha,\x20W\x20=\x20'+'velocity.x'+'\x0aattribute'+'\x20particle_'+'vertexData'+'3:\x20vec4f;\x20'+'\x20//\x20XYZ\x20=\x20'+'particle\x20l'+'ocal\x20pos,\x20'+'W\x20=\x20veloci'+'ty.y\x0aattri'+'bute\x20parti'+'cle_vertex'+'Data4:\x20f32'+';\x20\x20\x20\x20//\x20pa'+'rticle\x20id\x0a'+'\x0a//\x20type\x20d'+'epends\x20on\x20'+'useMesh\x20pr'+'operty.\x20St'+'art\x20with\x20X'+'\x20=\x20velocit'+'y.z,\x20Y\x20=\x20p'+'article\x20ID'+'\x20and\x20for\x20m'+'esh\x20partic'+'les\x20procee'+'ds\x20with\x20Z\x20'+'=\x20mesh\x20UV.'+'x,\x20W\x20=\x20mes'+'h\x20UV.y\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_ver'+'texData5:\x20'+'vec2f;\x0a#el'+'se\x0a\x20\x20\x20\x20att'+'ribute\x20par'+'ticle_vert'+'exData5:\x20v'+'ec4f;\x0a#end'+'if\x0a\x0aunifor'+'m\x20matrix_v'+'iewProject'+'ion:\x20mat4x'+'4f;\x0aunifor'+'m\x20matrix_m'+'odel:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20ma'+'trix_norma'+'l:\x20mat3x3f'+';\x0auniform\x20'+'matrix_vie'+'wInverse:\x20'+'mat4x4f;\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20lifet'+'ime:\x20f32;\x0a'+'uniform\x20st'+'retch:\x20f32'+';\x0auniform\x20'+'seed:\x20f32;'+'\x0auniform\x20w'+'rapBounds:'+'\x20vec3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0auni'+'form\x20faceT'+'angent:\x20ve'+'c3f;\x0aunifo'+'rm\x20faceBin'+'orm:\x20vec3f'+';\x0a\x0a#ifdef\x20'+('PARTICLE_G'+'PU\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex0:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x0Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex1'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex1S'+'ampler:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20var\x20inter'+'nalTex2:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex2Samp'+'ler:\x20sampl'+'er;\x0a#endif'+'\x0auniform\x20e'+'mitterPos:'+'\x20vec3f;\x0a\x0av'+'arying\x20tex'+'CoordsAlph'+'aLife:\x20vec'+'4f;\x0a\x0astruc'+'t\x20RotateRe'+'sult\x20{\x0a\x20\x20\x20'+'\x20rotatedVe'+'c:\x20vec2f,\x0a'+'\x20\x20\x20\x20matrix'+':\x20mat2x2f\x0a'+'}\x0a\x0afn\x20rota'+'teWithMatr'+'ix(quadXY:'+'\x20vec2f,\x20pR'+'otation:\x20f'+'32)\x20->\x20Rot'+'ateResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'c\x20=\x20cos(pR'+'otation);\x0a'+'\x20\x20\x20\x20let\x20s\x20'+'=\x20sin(pRot'+'ation);\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'mat2x2f(ve'+'c2f(c,\x20s),'+'\x20vec2f(-s,'+'\x20c));\x0a\x20\x20\x20\x20'+'return\x20Rot'+'ateResult('+'m\x20*\x20quadXY'+',\x20m);\x0a}\x0a\x0a\x0a'+'fn\x20billboa'+'rd(Instanc'+'eCoords:\x20v'+'ec3f,\x20quad'+'XY:\x20vec2f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20customF'+'ace(Instan'+'ceCoords:\x20'+'vec3f,\x20qua'+'dXY:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20pos\x20=\x20uni'+'form.faceT'+'angent\x20*\x20q'+'uadXY.x\x20+\x20'+'uniform.fa'+'ceBinorm\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20safeNor'+'malize(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20l\x20=\x20')+('length(v);'+'\x0a\x20\x20\x20\x20retur'+'n\x20select(v'+',\x20v\x20/\x20l,\x20l'+'\x20>\x201e-06);'+'\x0a}\x0a\x0a@verte'+'x\x0afn\x20verte'+'xMain(inpu'+'t:\x20VertexI'+'nput)\x20->\x20V'+'ertexOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'VertexOutp'+'ut;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20particl'+'ePos\x20=\x20inp'+'ut.particl'+'e_vertexDa'+'ta.xyz;\x0a\x20\x20'+'\x20\x20let\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20let\x20vertP'+'os\x20=\x20input'+'.particle_'+'vertexData'+'3.xyz;\x0a\x20\x20\x20'+'\x20var\x20inVel'+'\x20=\x20vec3f(i'+'nput.parti'+'cle_vertex'+'Data2.w,\x20i'+'nput.parti'+'cle_vertex'+'Data3.w,\x20i'+'nput.parti'+'cle_vertex'+'Data5.x);\x0a'+'\x0a\x20\x20\x20\x20let\x20i'+'d\x20=\x20floor('+'input.part'+'icle_verte'+'xData4);\x0a\x20'+'\x20\x20\x20let\x20rnd'+'Factor\x20=\x20f'+'ract(sin(i'+'d\x20+\x201.0\x20+\x20'+'uniform.se'+'ed));\x0a\x20\x20\x20\x20'+'let\x20rndFac'+'tor3\x20=\x20vec'+'3f(rndFact'+'or,\x20fract('+'rndFactor*'+'10.0),\x20fra'+'ct(rndFact'+'or*100.0))'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20mo'+'delRotatio'+'n\x20=\x20mat3x3'+'f(uniform.'+'matrix_mod'+'el[0].xyz,'+'\x20uniform.m'+'atrix_mode'+'l[1].xyz,\x20'+'uniform.ma'+'trix_model'+'[2].xyz);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'Vel\x20=\x20mode'+'lRotation\x20'+'*\x20inVel;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20let\x20ve'+'locityV\x20=\x20'+'safeNormal'+'ize((mat3x'+'3f(uniform'+'.matrix_vi'+'ew[0].xyz,'+'\x20uniform.m'+'atrix_view'+'[1].xyz,\x20u'+'niform.mat'+'rix_view[2'+'].xyz)\x20*\x20i'+'nVel).xy);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'quadXY\x20=\x20v'+'ertPos.xy;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20USE_MES'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.tex'+'CoordsAlph')+('aLife\x20=\x20ve'+'c4f(input.'+'particle_v'+'ertexData5'+'.zw,\x20input'+'.particle_'+'vertexData'+'2.z,\x20input'+'.particle_'+'vertexData'+'.w);\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'texCoordsA'+'lphaLife\x20='+'\x20vec4f(qua'+'dXY\x20*\x20-0.5'+'\x20+\x200.5,\x20in'+'put.partic'+'le_vertexD'+'ata2.z,\x20in'+'put.partic'+'le_vertexD'+'ata.w);\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20var\x20rot'+'Matrix:\x20ma'+'t2x2f;\x0a\x0a\x20\x20'+'\x20\x20var\x20inAn'+'gle\x20=\x20inpu'+'t.particle'+'_vertexDat'+'a2.x;\x0a\x20\x20\x20\x20'+'var\x20partic'+'lePosMoved'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20meshLoc'+'alPos\x20=\x20in'+'put.partic'+'le_vertexD'+'ata3.xyz;\x0a'),pO='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20inp'+'ut.particl'+'e_vertexDa'+'ta2.y\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20localP'+'os\x20=\x20local'+'Pos\x20+\x20part'+'iclePos;\x0a\x0a'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20vec4f('+'localPos,\x20'+'1.0);\x0a',mO='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20rotate'+'dQuadXY);\x0a',_O='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(rg'+'b,\x20a);\x0a\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a}\x0a',gO='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20sca'+'le\x20*\x20unifo'+'rm.emitter'+'Scale;\x0a\x20\x20\x20'+'\x20localPos\x20'+'=\x20localPos'+'\x20+\x20particl'+'ePos;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20SC'+'REEN_SPACE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(localPo'+'s.x,\x20local'+'Pos.y,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_v'+'iewProject'+'ion\x20*\x20vec4'+'f(localPos'+'.xyz,\x201.0)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a',SO='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20no'+'rmal\x20*\x200.5'+'\x20+\x200.5;\x0a\x20\x20'+'\x20\x20var\x20posN'+'ormal:\x20vec'+'3f\x20=\x20-norm'+'al\x20*\x200.5\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'negNormal\x20'+'=\x20negNorma'+'l\x20*\x20negNor'+'mal;\x0a\x20\x20\x20\x20p'+'osNormal\x20='+'\x20posNormal'+'\x20*\x20posNorm'+'al;\x0a',yO='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20/'+'/\x20XYZ\x20=\x20pa'+'rticle\x20pos'+'ition,\x20W\x20='+'\x20particle\x20'+'ID\x20+\x20rando'+'m\x20factor\x0a#'+'if\x20defined'+'(USE_MESH)'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(USE'+'_MESH_UV)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_uv:'+'\x20vec2f;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'esh\x20UV\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20pa'+'rticle_uv:'+'\x20vec2f\x20=\x20v'+'ec2f(0.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0aunifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0aunif'+'orm\x20matrix'+'_normal:\x20m'+'at3x3f;\x0aun'+'iform\x20matr'+'ix_viewInv'+'erse:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20numPa'+'rticlesPot'+':\x20f32;\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0auni'+'form\x20stret'+'ch:\x20f32;\x0au'+'niform\x20wra'+'pBounds:\x20v'+'ec3f;\x0aunif'+'orm\x20emitte'+'rScale:\x20ve'+'c3f;\x0aunifo'+'rm\x20emitter'+'Pos:\x20vec3f'+';\x0auniform\x20'+'faceTangen'+'t:\x20vec3f;\x0a'+'uniform\x20fa'+'ceBinorm:\x20'+'vec3f;\x0auni'+'form\x20rate:'+'\x20f32;\x0aunif'+'orm\x20rateDi'+'v:\x20f32;\x0aun'+'iform\x20life'+'time:\x20f32;'+'\x0auniform\x20d'+'eltaRandom'+'nessStatic'+':\x20f32;\x0auni'+'form\x20scale'+'DivMult:\x20f'+'32;\x0aunifor'+'m\x20alphaDiv'+'Mult:\x20f32;'+'\x0auniform\x20s'+'eed:\x20f32;\x0a'+'uniform\x20de'+'lta:\x20f32;\x0a'+'\x0avar\x20parti'+('cleTexOUT:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20particle'+'TexOUTSamp'+'ler:\x20sampl'+'er;\x0avar\x20pa'+'rticleTexI'+'N:\x20texture'+'_2d<f32>;\x0a'+'var\x20partic'+'leTexINSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex0:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex1:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x1Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex2'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex2S'+'ampler:\x20sa'+'mpler;\x0a#en'+'dif\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0avarying'+'\x20texCoords'+'AlphaLife:'+'\x20vec4f;\x0a\x0av'+'ar<private'+'>\x20inPos:\x20v'+'ec3f;\x0avar<'+'private>\x20i'+'nVel:\x20vec3'+'f;\x0avar<pri'+'vate>\x20inAn'+'gle:\x20f32;\x0a'+'var<privat'+'e>\x20inShow:'+'\x20bool;\x0avar'+'<private>\x20'+'inLife:\x20f3'+'2;\x0a'),vO='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20ma'+'x(normal,\x20'+'vec3(0.0))'+';\x0a\x20\x20\x20\x20var\x20'+'posNormal:'+'\x20vec3f\x20=\x20m'+'ax(-normal'+',\x20vec3(0.0'+'));\x0a',xO='\x0a\x20\x20\x20\x20let\x20l'+'ight:\x20vec3'+'f\x20=\x20negNor'+'mal.x\x20*\x20un'+'iform.ligh'+'tCube[0]\x20+'+'\x20posNormal'+'.x\x20*\x20unifo'+'rm.lightCu'+'be[1]\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20negNormal'+'.y\x20*\x20unifo'+'rm.lightCu'+'be[2]\x20+\x20po'+'sNormal.y\x20'+'*\x20uniform.'+'lightCube['+'3]\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ne'+'gNormal.z\x20'+'*\x20uniform.'+'lightCube['+'4]\x20+\x20posNo'+'rmal.z\x20*\x20u'+'niform.lig'+'htCube[5];'+'\x0a\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20li'+'ght;\x0a',TO='\x0aparticleP'+'os\x20=\x20(unif'+'orm.matrix'+'_model\x20*\x20v'+'ec4f(parti'+'clePos,\x201.'+'0)).xyz;\x0a',wO='\x0avar\x20local'+'Pos\x20=\x20mesh'+'LocalPos;\x0a'+'let\x20rotRes'+'ultXY\x20=\x20ro'+'tateWithMa'+'trix(local'+'Pos.xy,\x20in'+'Angle);\x0alo'+'calPos\x20=\x20v'+'ec3f(rotRe'+'sultXY.rot'+'atedVec,\x20l'+'ocalPos.z)'+';\x0arotMatri'+'x\x20=\x20rotRes'+'ultXY.matr'+'ix;\x0a\x0alet\x20r'+'otResultYZ'+'\x20=\x20rotateW'+'ithMatrix('+'localPos.y'+'z,\x20inAngle'+');\x0alocalPo'+'s\x20=\x20vec3f('+'localPos.x'+',\x20rotResul'+'tYZ.rotate'+'dVec);\x0arot'+'Matrix\x20=\x20r'+'otResultYZ'+'.matrix;\x0a\x0a'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',EO='\x0aoutput.No'+'rmal\x20=\x20nor'+'malize(loc'+'alPos\x20+\x20un'+'iform.matr'+'ix_viewInv'+'erse[2].xy'+'z);\x0a',bO='\x0a\x20\x20\x20\x20let\x20s'+'ampledNorm'+'al:\x20vec4f\x20'+'=\x20textureS'+'ample(norm'+'alMap,\x20nor'+'malMapSamp'+'ler,\x20vec2f'+'(input.tex'+'CoordsAlph'+'aLife.x,\x201'+'.0\x20-\x20input'+'.texCoords'+'AlphaLife.'+'y));\x0a\x20\x20\x20\x20l'+'et\x20normalM'+'ap:\x20vec3f\x20'+'=\x20normaliz'+'e(sampledN'+'ormal.xyz\x20'+'*\x202.0\x20-\x201.'+'0);\x0a\x0a\x20\x20\x20\x20l'+'et\x20Particl'+'eMat\x20=\x20mat'+'3x3<f32>(P'+'articleMat'+'0,\x20Particl'+'eMat1,\x20Par'+'ticleMat2)'+';\x0a\x20\x20\x20\x20let\x20'+'normal:\x20ve'+'c3f\x20=\x20Part'+'icleMat\x20*\x20'+'normalMap;'+'\x0a',AO='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan2(veloc'+'ityV.x,\x20ve'+'locityV.y)'+';\x0a',CO='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',PO='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20Normal:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20varying\x20'+'ParticleMa'+'t0:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Particle'+'Mat2:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'Cube:\x20arra'+'y<vec3f,\x206'+'>;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vDe'+'pth:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sc'+'reenDepthP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22fogPS\x22\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'ap:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'apSampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'iclePS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'VERTEX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'ormal:\x20vec'+'3f\x20=\x20Norma'+'l;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20MAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_normal'+'MapPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20!=\x20NON'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20HAL'+'F_LAMBERT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_halflambe'+'rtPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_lambertPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+('#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_light'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20BLE'+'ND\x20==\x20NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendNorma'+'lPS\x22\x0a\x20\x20\x20\x20#'+'elif\x20BLEND'+'\x20==\x20ADDITI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendAddPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+'\x20MULTIPLIC'+'ATIVE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_blendMu'+'ltiplyPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_endPS'+'\x22\x0a'),MO='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20anim'+'TexTilesPa'+'rams:\x20vec2'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20a'+'nimTexPara'+'ms:\x20vec4f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20ani'+'mTexIndexP'+'arams:\x20vec'+'2f;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20Partic'+'leMat0:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20Pa'+'rticleMat2'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20==\x20V'+'ERTEX\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Normal:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vDepth:\x20f'+'32;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_in'+'itVS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20PACK8\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleIn'+'putRgba8PS'+'\x22\x20\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x20\x22parti'+'cleInputFl'+'oatPS\x22\x20\x20\x20\x20'+'//\x20why\x20are'+'\x20these\x20PS\x20'+'and\x20not\x20VS'+'?\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'screenDept'+'hPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'articleVS\x22'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x20//\x20PARTI'+'CLE_CPU\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SOFT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22screenDep'+'thPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_c'+'puVS\x22\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_l'+('ocalShiftV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20ANIM'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20A'+'NIMTEX_LOO'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimFram'+'eLoopVS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleAnimFra'+'meClampVS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimTexV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20wrap\x20is\x20'+'not\x20used\x20o'+'n\x20CPU,\x20it\x20'+'was\x20commen'+'ted\x20out.\x20T'+'ODO:\x20inves'+'tigate\x20why'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'WRAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_wrap'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ALIGN_TO'+'_MOTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_point'+'AlongVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20USE_MESH'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_me'+'shVS\x22\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CUSTOM_FA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_custom'+'FaceVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_billboa'+'rdVS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20VERTEX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_norma'+'lVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20NORMA'+'L\x20==\x20MAP\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_TBNV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STRE'+'TCH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_stretchVS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PART'+'ICLE_GPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_endV')+('S\x22\x0a\x20\x20\x20\x20#el'+'se\x20//\x20PART'+'ICLE_CPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_cpu_'+'endVS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softVS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),DO='\x0a\x20\x20\x20\x20var\x20d'+'epth:\x20f32\x20'+'=\x20getLinea'+'rScreenDep'+'thFrag();\x0a'+'\x20\x20\x20\x20var\x20pa'+'rticleDept'+'h:\x20f32\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20var\x20depth'+'Diff:\x20f32\x20'+'=\x20saturate'+'(abs(parti'+'cleDepth\x20-'+'\x20depth)\x20*\x20'+'uniform.so'+'ftening);\x0a'+'\x20\x20\x20\x20a\x20=\x20a\x20'+'*\x20depthDif'+'f;\x0a',IO='\x0a\x20\x20\x20\x20outpu'+'t.vDepth\x20='+'\x20getLinear'+'Depth(loca'+'lPos);\x0a',LO='\x0a\x20\x20\x20\x20let\x20m'+'oveDir:\x20ve'+'c3f\x20=\x20inVe'+'l\x20*\x20unifor'+'m.stretch;'+'\x0a\x20\x20\x20\x20var\x20p'+'osPrev:\x20ve'+'c3f\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20=\x20posPrev'+'\x20+\x20particl'+'ePosMoved;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'viewRotati'+'onTemp:\x20ma'+'t3x3f\x20=\x20ma'+'t3x3f(unif'+'orm.matrix'+'_view[0].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[1].xyz'+',\x20uniform.'+'matrix_vie'+'w[2].xyz);'+'\x0a\x20\x20\x20\x20let\x20c'+'enterToVer'+'texV:\x20vec2'+'f\x20=\x20normal'+'ize((viewR'+'otationTem'+'p\x20*\x20localP'+'os).xy);\x0a\x0a'+'\x20\x20\x20\x20let\x20in'+'terpolatio'+'n:\x20f32\x20=\x20d'+'ot(-veloci'+'tyV,\x20cente'+'rToVertexV'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x0a\x20\x20\x20\x20'+'particlePo'+'s\x20=\x20mix(pa'+'rticlePos,'+'\x20posPrev,\x20'+'interpolat'+'ion);\x0a',RO='\x0a\x20\x20\x20\x20let\x20r'+'ot3\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(r'+'otMatrix[0'+'][0],\x20rotM'+'atrix[1][0'+'],\x200.0),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(rotMatr'+'ix[0][1],\x20'+'rotMatrix['+'1][1],\x200.0'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3f(0.0'+',\x200.0,\x201.0'+')\x0a\x20\x20\x20\x20);\x0a\x0a'+'\x20\x20\x20\x20let\x20vi'+'ewBasis\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20-un'+'iform.matr'+'ix_viewInv'+'erse[0].xy'+'z,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20-uniform.'+'matrix_vie'+'wInverse[1'+'].xyz,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.matrix_'+'viewInvers'+'e[2].xyz\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20tempM'+'at\x20=\x20viewB'+'asis\x20*\x20rot'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20WGSL\x20does'+'\x20not\x20suppo'+'rt\x20matrix\x20'+'varyings,\x20'+'decompose\x20'+'it\x20to\x20vec3'+'s\x0a\x20\x20\x20\x20outp'+'ut.Particl'+'eMat0\x20=\x20te'+'mpMat[0];\x0a'+'\x20\x20\x20\x20output'+'.ParticleM'+'at1\x20=\x20temp'+'Mat[1];\x0a\x20\x20'+'\x20\x20output.P'+'articleMat'+'2\x20=\x20tempMa'+'t[2];\x0a',OO='\x0a\x20\x20\x20\x20let\x20o'+'rigParticl'+'ePos:\x20vec3'+'f\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20particleP'+'os\x20=\x20parti'+'clePos\x20-\x20u'+'niform.mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20=\x20(par'+'ticlePos\x20%'+'\x20uniform.w'+'rapBounds)'+'\x20-\x20uniform'+'.wrapBound'+'s\x20*\x200.5;\x0a\x20'+'\x20\x20\x20particl'+'ePos\x20=\x20par'+'ticlePos\x20+'+'\x20uniform.m'+'atrix_mode'+'l[3].xyz;\x0a'+'\x20\x20\x20\x20partic'+'lePosMoved'+'\x20=\x20particl'+'ePos\x20-\x20ori'+'gParticleP'+'os;\x0a',FO={'particlePS':X3,'particleVS':q3,'particleAnimFrameClampVS':j3,'particleAnimFrameLoopVS':Y3,'particleAnimTexVS':K3,'particleInputFloatPS':Z3,'particleInputRgba8PS':Q3,'particleOutputFloatPS':J3,'particleOutputRgba8PS':eO,'particleUpdaterAABBPS':tO,'particleUpdaterEndPS':sO,'particleUpdaterInitPS':iO,'particleUpdaterNoRespawnPS':rO,'particleUpdaterOnStopPS':aO,'particleUpdaterRespawnPS':nO,'particleUpdaterSpherePS':oO,'particleUpdaterStartPS':lO,'particle_billboardVS':cO,'particle_blendAddPS':hO,'particle_blendMultiplyPS':dO,'particle_blendNormalPS':fO,'particle_cpuVS':uO,'particle_cpu_endVS':pO,'particle_customFaceVS':mO,'particle_endPS':_O,'particle_endVS':gO,'particle_halflambertPS':SO,'particle_initVS':yO,'particle_lambertPS':vO,'particle_lightingPS':xO,'particle_localShiftVS':TO,'particle_meshVS':wO,'particle_normalVS':EO,'particle_normalMapPS':bO,'particle_pointAlongVS':AO,'particle_simulationPS':CO,'particle_shaderPS':PO,'particle_shaderVS':MO,'particle_softPS':DO,'particle_softVS':IO,'particle_stretchVS':LO,'particle_TBNVS':RO,'particle_wrapVS':OO},NO=['enabled','autoPlay','numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','loop','preWarm','lighting','halfLamber'+'t','intensity','depthWrite','noFog','depthSofte'+'ning','sort','blendType','stretch','alignToMot'+'ion','emitterSha'+'pe','emitterExt'+'ents','emitterExt'+'entsInner','emitterRad'+'ius','emitterRad'+'iusInner','initialVel'+'ocity','wrap','wrapBounds','localSpace','screenSpac'+'e','colorMapAs'+'set','normalMapA'+'sset','mesh','meshAsset','renderAsse'+'t','orientatio'+'n','particleNo'+'rmal','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','velocityGr'+'aph','velocityGr'+'aph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2','scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','colorMap','normalMap','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animSpeed','animLoop','layers'];class kO extends ct{constructor(_0x564fcb){super(_0x564fcb),this['id']='particlesy'+'stem',this['ComponentT'+'ype']=e3,this['DataType']=t3,this['schema']=NO,this['propertyTy'+'pes']={'emitterExtents':'vec3','emitterExtentsInner':'vec3','particleNormal':'vec3','wrapBounds':'vec3','localVelocityGraph':'curveset','localVelocityGraph2':'curveset','velocityGraph':'curveset','velocityGraph2':'curveset','colorGraph':'curveset','colorGraph2':'curveset','alphaGraph':'curve','alphaGraph2':'curve','rotationSpeedGraph':'curve','rotationSpeedGraph2':'curve','radialSpeedGraph':'curve','radialSpeedGraph2':'curve','scaleGraph':'curve','scaleGraph2':'curve'},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this),Pe['get'](_0x564fcb['graphicsDe'+'vice'],Fe)['add']($3),Pe['get'](_0x564fcb['graphicsDe'+'vice'],it)['add'](FO);}['initialize'+'ComponentD'+'ata'](_0x1237ab,_0x12ed04,_0x3c84b9){const _0xf4eb17={};_0x3c84b9=[];const _0x2c4f6b=this['propertyTy'+'pes'];(_0x12ed04['mesh']instanceof pe||typeof _0x12ed04['mesh']=='number')&&(_0x12ed04['meshAsset']=_0x12ed04['mesh'],delete _0x12ed04['mesh']);for(const _0x27c248 in _0x12ed04){if(_0x12ed04['hasOwnProp'+'erty'](_0x27c248)&&(_0x3c84b9['push'](_0x27c248),_0xf4eb17[_0x27c248]=_0x12ed04[_0x27c248]),_0x2c4f6b[_0x27c248]==='vec3')Array['isArray'](_0xf4eb17[_0x27c248])&&(_0xf4eb17[_0x27c248]=new D(_0xf4eb17[_0x27c248][-0x4*-0x77e+-0x16a6+-0x752],_0xf4eb17[_0x27c248][0x1c85+-0x1*0x1739+-0x5*0x10f],_0xf4eb17[_0x27c248][0x513+0x2482*-0x1+0x3*0xa7b]));else{if(_0x2c4f6b[_0x27c248]==='curve'){if(!(_0xf4eb17[_0x27c248]instanceof qs)){const _0x3dd99d=_0xf4eb17[_0x27c248]['type'];_0xf4eb17[_0x27c248]=new qs(_0xf4eb17[_0x27c248]['keys']),_0xf4eb17[_0x27c248]['type']=_0x3dd99d;}}else{if(_0x2c4f6b[_0x27c248]==='curveset'&&!(_0xf4eb17[_0x27c248]instanceof na)){const _0x287d6c=_0xf4eb17[_0x27c248]['type'];_0xf4eb17[_0x27c248]=new na(_0xf4eb17[_0x27c248]['keys']),_0xf4eb17[_0x27c248]['type']=_0x287d6c;}}}_0xf4eb17['layers']&&Array['isArray'](_0xf4eb17['layers'])&&(_0xf4eb17['layers']=_0xf4eb17['layers']['slice'](-0x234*-0x2+-0x1688+0x1220));}super['initialize'+'ComponentD'+'ata'](_0x1237ab,_0xf4eb17,_0x3c84b9);}['cloneCompo'+'nent'](_0x58495d,_0x136fb7){const _0x546ff3=_0x58495d['particlesy'+'stem']['data'],_0x3b4d14=this['schema'],_0x29587d={};for(let _0x2d7851=-0x25ab*0x1+-0xf*-0x12e+0x13f9,_0x4a837d=_0x3b4d14['length'];_0x2d7851<_0x4a837d;_0x2d7851++){const _0x357500=_0x3b4d14[_0x2d7851];let _0x296351=_0x546ff3[_0x357500];_0x296351 instanceof D||_0x296351 instanceof qs||_0x296351 instanceof na?(_0x296351=_0x296351['clone'](),_0x29587d[_0x357500]=_0x296351):_0x357500==='layers'?_0x29587d['layers']=_0x546ff3['layers']['slice'](0xb8b+-0x1f29*0x1+0x139e):_0x296351!=null&&(_0x29587d[_0x357500]=_0x296351);}return this['addCompone'+'nt'](_0x136fb7,_0x29587d);}['onUpdate'](_0x53a648){const _0x1e4de2=this['store'],_0x1fd328=this['app']['stats']['particles'],_0x1aebe3=this['app']['scene']['layers'];for(let _0x58ba13=0x1b9+0x1cae+-0x1e67*0x1;_0x58ba13<_0x1aebe3['layerList']['length'];_0x58ba13++)_0x1aebe3['layerList'][_0x58ba13]['requiresLi'+'ghtCube']=!(-0xc45+0x1*0xce+-0x8*-0x16f);for(const _0x2af844 in _0x1e4de2)if(_0x1e4de2['hasOwnProp'+'erty'](_0x2af844)){const _0x1370f6=_0x1e4de2[_0x2af844],_0x405234=_0x1370f6['entity'],_0x23d5aa=_0x1370f6['data'];if(_0x23d5aa['enabled']&&_0x405234['enabled']){const _0x13f9c7=_0x405234['particlesy'+'stem']['emitter'];if(!(_0x13f9c7!=null&&_0x13f9c7['meshInstan'+'ce']['visible']))continue;if(_0x13f9c7['lighting']){const _0x1e7fcf=_0x23d5aa['layers'];for(let _0x3f6b26=-0x121c+-0x7f*0x1f+0x217d;_0x3f6b26<_0x1e7fcf['length'];_0x3f6b26++){const _0x547995=_0x1aebe3['getLayerBy'+'Id'](_0x1e7fcf[_0x3f6b26]);_0x547995&&(_0x547995['requiresLi'+'ghtCube']=!(0x13*-0x10f+0x5*-0x656+0x33cb));}}if(!_0x23d5aa['paused']){let _0x1a5d33=0x1*0x1c73+0x1*-0x9fa+0x1279*-0x1;if(_0x13f9c7['simTime']+=_0x53a648,_0x13f9c7['simTime']>=_0x13f9c7['fixedTimeS'+'tep']&&(_0x1a5d33=Math['floor'](_0x13f9c7['simTime']/_0x13f9c7['fixedTimeS'+'tep']),_0x13f9c7['simTime']-=_0x1a5d33*_0x13f9c7['fixedTimeS'+'tep']),_0x1a5d33){_0x1a5d33=Math['min'](_0x1a5d33,_0x13f9c7['maxSubStep'+'s']);for(let _0x2c8474=-0xa23+0x1a12+-0x1*0xfef;_0x2c8474<_0x1a5d33;_0x2c8474++)_0x13f9c7['addTime'](_0x13f9c7['fixedTimeS'+'tep'],!(0x1a14+-0x932+-0x10e1*0x1));_0x1fd328['_updatesPe'+'rFrame']+=_0x1a5d33,_0x1fd328['_frameTime']+=_0x13f9c7['_addTimeTi'+'me'],_0x13f9c7['_addTimeTi'+'me']=-0x9d*0x33+0x2*0xec3+0x1c1;}_0x13f9c7['finishFram'+'e']();}}}}['onBeforeRe'+'move'](_0x1549e1,_0x7d3547){_0x7d3547['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class UO extends wd{constructor(_0x279dc0,_0x4232fe){super(),this['skin']=_0x279dc0,this['skinInstan'+'ce']=_0x4232fe;}}const Gs=class Gs{static['logCachedS'+'kinInstanc'+'es'](){console['log']('CachedSkin'+'Instances'),Gs['_skinInsta'+'nceCache']['forEach']((_0x17b60c,_0xcb12ec)=>{console['log'](_0xcb12ec['name']+':\x20Array('+_0x17b60c['length']+')');for(let _0x578deb=-0x4e7*-0x6+-0x4e9*0x6+0x3*0x4;_0x578deb<_0x17b60c['length'];_0x578deb++)console['log']('\x20\x20'+_0x578deb+(':\x20RefCount'+'\x20')+_0x17b60c[_0x578deb]['refCount']);});}static['createCach'+'edSkinInst'+'ance'](_0x4ef938,_0x5708e0,_0x3071e2){let _0x4dc42f=Gs['getCachedS'+'kinInstanc'+'e'](_0x4ef938,_0x5708e0);return _0x4dc42f||(_0x4dc42f=new Ol(_0x4ef938),_0x4dc42f['resolve'](_0x5708e0,_0x3071e2),Gs['addCachedS'+'kinInstanc'+'e'](_0x4ef938,_0x5708e0,_0x4dc42f)),_0x4dc42f;}static['getCachedS'+'kinInstanc'+'e'](_0xcac5bd,_0x2bfb01){let _0x1ffc94=null;const _0x156d63=Gs['_skinInsta'+'nceCache']['get'](_0x2bfb01);if(_0x156d63){const _0x5eeaa1=_0x156d63['find'](_0x2c15ed=>_0x2c15ed['skin']===_0xcac5bd);_0x5eeaa1&&(_0x5eeaa1['incRefCoun'+'t'](),_0x1ffc94=_0x5eeaa1['skinInstan'+'ce']);}return _0x1ffc94;}static['addCachedS'+'kinInstanc'+'e'](_0x29dc4a,_0x2b9878,_0x4c3342){let _0x56f9ed=Gs['_skinInsta'+'nceCache']['get'](_0x2b9878);_0x56f9ed||(_0x56f9ed=[],Gs['_skinInsta'+'nceCache']['set'](_0x2b9878,_0x56f9ed));let _0x561b80=_0x56f9ed['find'](_0x4383d7=>_0x4383d7['skin']===_0x29dc4a);_0x561b80||(_0x561b80=new UO(_0x29dc4a,_0x4c3342),_0x56f9ed['push'](_0x561b80)),_0x561b80['incRefCoun'+'t']();}static['removeCach'+'edSkinInst'+'ance'](_0x46b252){if(_0x46b252){const _0x51dd77=_0x46b252['rootBone'];if(_0x51dd77){const _0x18207f=Gs['_skinInsta'+'nceCache']['get'](_0x51dd77);if(_0x18207f){const _0x5a9452=_0x18207f['findIndex'](_0x22b574=>_0x22b574['skinInstan'+'ce']===_0x46b252);if(_0x5a9452>=0x1*-0x1606+-0x1*-0x902+-0xe*-0xee){const _0x8b1725=_0x18207f[_0x5a9452];_0x8b1725['decRefCoun'+'t'](),_0x8b1725['refCount']===0x20c2+0x1601*0x1+-0x36c3&&(_0x18207f['splice'](_0x5a9452,-0xdf*0x2+0x131b+-0xca*0x16),_0x18207f['length']||Gs['_skinInsta'+'nceCache']['delete'](_0x51dd77),_0x46b252&&(_0x46b252['destroy'](),_0x8b1725['skinInstan'+'ce']=null));}}}}}};h(Gs,'_skinInsta'+'nceCache',new Map());let _l=Gs;class gl{constructor(_0x566cc4,_0x2561c6,_0x157f56,_0x5c6818,_0x30de1f){h(this,'_evtLoadBy'+'Id',null),h(this,'_evtUnload'+'ById',null),h(this,'_evtAddByI'+'d',null),h(this,'_evtRemove'+'ById',null),h(this,'_evtLoadBy'+'Url',null),h(this,'_evtAddByU'+'rl',null),h(this,'_evtRemove'+'ByUrl',null),(this['propertyNa'+'me']=_0x566cc4,this['parent']=_0x2561c6,this['_scope']=_0x30de1f,this['_registry']=_0x157f56,this['id']=null,this['url']=null,this['asset']=null,this['_onAssetLo'+'ad']=_0x5c6818['load'],this['_onAssetAd'+'d']=_0x5c6818['add'],this['_onAssetRe'+'move']=_0x5c6818['remove'],this['_onAssetUn'+'load']=_0x5c6818['unload']);}set['id'](_0x4245fe){if(this['url'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_id']=_0x4245fe,this['asset']=this['_registry']['get'](this['_id']),this['_bind']();}get['id'](){return this['_id'];}set['url'](_0x449409){if(this['id'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_url']=_0x449409,this['asset']=this['_registry']['getByUrl'](this['_url']),this['_bind']();}get['url'](){return this['_url'];}['_bind'](){this['id']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Id']=this['_registry']['on']('load:'+this['id'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByI'+'d']=this['_registry']['once']('add:'+this['id'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ById']=this['_registry']['on']('remove:'+this['id'],this['_onRemove'],this)),this['_onAssetUn'+'load']&&(this['_evtUnload'+'ById']=this['_registry']['on']('unload:'+this['id'],this['_onUnload'],this))),this['url']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Url']=this['_registry']['on']('load:url:'+this['url'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByU'+'rl']=this['_registry']['once']('add:url:'+this['url'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ByUrl']=this['_registry']['on']('remove:url'+':'+this['url'],this['_onRemove'],this)));}['_unbind'](){var _0x332b77,_0x190c84,_0x4ba234,_0x485e0d,_0x1f6e7c,_0x139d72,_0x40f848;this['id']&&((_0x332b77=this['_evtLoadBy'+'Id'])==null||_0x332b77['off'](),this['_evtLoadBy'+'Id']=null,(_0x190c84=this['_evtAddByI'+'d'])==null||_0x190c84['off'](),this['_evtAddByI'+'d']=null,(_0x4ba234=this['_evtRemove'+'ById'])==null||_0x4ba234['off'](),this['_evtRemove'+'ById']=null,(_0x485e0d=this['_evtUnload'+'ById'])==null||_0x485e0d['off'](),this['_evtUnload'+'ById']=null),this['url']&&((_0x1f6e7c=this['_evtLoadBy'+'Url'])==null||_0x1f6e7c['off'](),this['_evtLoadBy'+'Url']=null,(_0x139d72=this['_evtAddByU'+'rl'])==null||_0x139d72['off'](),this['_evtAddByU'+'rl']=null,(_0x40f848=this['_evtRemove'+'ByUrl'])==null||_0x40f848['off'](),this['_evtRemove'+'ByUrl']=null);}['_onLoad'](_0x516731){this['_onAssetLo'+'ad']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x516731);}['_onAdd'](_0xe9531d){this['asset']=_0xe9531d,this['_onAssetAd'+'d']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0xe9531d);}['_onRemove'](_0x2d593e){this['_onAssetRe'+'move']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x2d593e),this['asset']=null;}['_onUnload'](_0x4da601){this['_onAssetUn'+'load']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x4da601);}}class n0 extends we{constructor(_0x1c193f,_0x27f64f){super(_0x1c193f,_0x27f64f),h(this,'_type','asset'),h(this,'_castShado'+'ws',!(-0x1274+0x1f8d+0x7*-0x1df)),h(this,'_receiveSh'+'adows',!(-0x55+-0xa*0x26b+-0x19*-0xfb)),h(this,'_castShado'+'wsLightmap',!(-0x2220+-0x85e+0x2a7e)),h(this,'_lightmapp'+'ed',!(0x161*0x10+0x1531*-0x1+-0xde)),h(this,'_lightmapS'+'izeMultipl'+'ier',0x224c+0x1*0x1c37+-0x6*0xa6b),h(this,'isStatic',!(0x2167+-0x7fb*-0x4+-0x4152)),h(this,'_batchGrou'+'pId',-(-0x18f9+0x179+-0x1*-0x1781)),h(this,'_layers',[er]),h(this,'_renderSty'+'le',un),h(this,'_meshInsta'+'nces',[]),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_assetRefe'+'rence'),h(this,'_materialR'+'eferences',[]),h(this,'_material'),h(this,'_rootBone',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['_assetRefe'+'rence']=new gl('asset',this,_0x1c193f['app']['assets'],{'add':this['_onRenderA'+'ssetAdded'],'load':this['_onRenderA'+'ssetLoad'],'remove':this['_onRenderA'+'ssetRemove'],'unload':this['_onRenderA'+'ssetUnload']},this),this['_material']=_0x1c193f['defaultMat'+'erial'],_0x27f64f['on']('remove',this['onRemoveCh'+'ild'],this),_0x27f64f['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x27f64f['on']('insert',this['onInsertCh'+'ild'],this),_0x27f64f['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['renderStyl'+'e'](_0x384b8d){this['_renderSty'+'le']!==_0x384b8d&&(this['_renderSty'+'le']=_0x384b8d,He['_prepareRe'+'nderStyleF'+'orArray'](this['_meshInsta'+'nces'],_0x384b8d));}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['customAabb'](_0x264698){this['_customAab'+'b']=_0x264698;const _0x21b2f4=this['_meshInsta'+'nces'];if(_0x21b2f4){for(let _0x539178=0xb7d+-0x5ad*0x1+0xc*-0x7c;_0x539178<_0x21b2f4['length'];_0x539178++)_0x21b2f4[_0x539178]['setCustomA'+'abb'](this['_customAab'+'b']);}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x53a28e){if(this['_type']!==_0x53a28e&&(this['_area']=null,this['_type']=_0x53a28e,this['destroyMes'+'hInstances'](),_0x53a28e!=='asset')){let _0x6c4555=this['_material'];(!_0x6c4555||_0x6c4555===this['system']['defaultMat'+'erial'])&&(_0x6c4555=this['_materialR'+'eferences'][-0x19ed+0x1*0x1cad+-0x2c0]&&this['_materialR'+'eferences'][0xc83*-0x1+0x157+0x11e*0xa]['asset']&&this['_materialR'+'eferences'][-0x220e*-0x1+-0xc6e+0x10*-0x15a]['asset']['resource']);const _0x36e9ff=r0(this['system']['app']['graphicsDe'+'vice'],_0x53a28e);this['_area']=_0x36e9ff['area'],this['meshInstan'+'ces']=[new He(_0x36e9ff['mesh'],_0x6c4555||this['system']['defaultMat'+'erial'],this['entity'])];}}get['type'](){return this['_type'];}set['meshInstan'+'ces'](_0x102470){if(w['assert'](Array['isArray'](_0x102470),'MeshInstan'+'ces\x20set\x20to'+'\x20a\x20Render\x20'+'component\x20'+'must\x20be\x20an'+'\x20array.'),this['destroyMes'+'hInstances'](),this['_meshInsta'+'nces']=_0x102470,this['_meshInsta'+'nces']){const _0x3dd0f5=this['_meshInsta'+'nces'];for(let _0x815d1=-0x25bc*-0x1+0x2f*-0x7e+-0xb2*0x15;_0x815d1<_0x3dd0f5['length'];_0x815d1++)_0x3dd0f5[_0x815d1]['node']||(_0x3dd0f5[_0x815d1]['node']=this['entity']),_0x3dd0f5[_0x815d1]['castShadow']=this['_castShado'+'ws'],_0x3dd0f5[_0x815d1]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x3dd0f5[_0x815d1]['renderStyl'+'e']=this['_renderSty'+'le'],_0x3dd0f5[_0x815d1]['setLightma'+'pped'](this['_lightmapp'+'ed']),_0x3dd0f5[_0x815d1]['setCustomA'+'abb'](this['_customAab'+'b']);this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['meshInstan'+'ces'](){return this['_meshInsta'+'nces'];}set['lightmappe'+'d'](_0x2bc0fe){if(_0x2bc0fe!==this['_lightmapp'+'ed']){this['_lightmapp'+'ed']=_0x2bc0fe;const _0x3c50fa=this['_meshInsta'+'nces'];if(_0x3c50fa){for(let _0x52dc43=-0x36a+-0x4*0x9a4+0x29fa;_0x52dc43<_0x3c50fa['length'];_0x52dc43++)_0x3c50fa[_0x52dc43]['setLightma'+'pped'](_0x2bc0fe);}}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x590c25){if(this['_castShado'+'ws']!==_0x590c25){const _0xe21648=this['_meshInsta'+'nces'];if(_0xe21648){const _0x35bb4f=this['layers'],_0x27c955=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x590c25)for(let _0x24887b=-0x18ea+-0x5*-0x5d1+-0x42b;_0x24887b<_0x35bb4f['length'];_0x24887b++){const _0x33deb9=_0x27c955['layers']['getLayerBy'+'Id'](this['layers'][_0x24887b]);_0x33deb9&&_0x33deb9['removeShad'+'owCasters'](_0xe21648);}for(let _0x3f1131=0x2e*0x67+-0x1db5+0xb33;_0x3f1131<_0xe21648['length'];_0x3f1131++)_0xe21648[_0x3f1131]['castShadow']=_0x590c25;if(!this['_castShado'+'ws']&&_0x590c25)for(let _0x164ba5=-0x29a+0x1*0x576+-0x2dc;_0x164ba5<_0x35bb4f['length'];_0x164ba5++){const _0x257008=_0x27c955['layers']['getLayerBy'+'Id'](_0x35bb4f[_0x164ba5]);_0x257008&&_0x257008['addShadowC'+'asters'](_0xe21648);}}this['_castShado'+'ws']=_0x590c25;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x125004){if(this['_receiveSh'+'adows']!==_0x125004){this['_receiveSh'+'adows']=_0x125004;const _0x16d844=this['_meshInsta'+'nces'];if(_0x16d844){for(let _0x2fca10=-0x2*-0xfbb+-0x1965*0x1+-0x611;_0x2fca10<_0x16d844['length'];_0x2fca10++)_0x16d844[_0x2fca10]['receiveSha'+'dow']=_0x125004;}}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x1a9926){this['_castShado'+'wsLightmap']=_0x1a9926;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x2f4196){this['_lightmapS'+'izeMultipl'+'ier']=_0x2f4196;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x567e0c){const _0x2b6a08=this['system']['app']['scene']['layers'];let _0x325f17;if(this['_meshInsta'+'nces']){for(let _0x338e51=-0x8f1+0xec0+-0x5cf;_0x338e51<this['_layers']['length'];_0x338e51++)_0x325f17=_0x2b6a08['getLayerBy'+'Id'](this['_layers'][_0x338e51]),_0x325f17&&_0x325f17['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}this['_layers']['length']=-0xe3a+0x3*-0x15+0x2e5*0x5;for(let _0x1b2c3e=0xaea+-0x21b*0xa+-0x16*-0x76;_0x1b2c3e<_0x567e0c['length'];_0x1b2c3e++)this['_layers'][_0x1b2c3e]=_0x567e0c[_0x1b2c3e];if(!(!this['enabled']||!this['entity']['enabled']||!this['_meshInsta'+'nces'])){for(let _0x1c87bf=-0x1b0c+0x2*-0x5dd+0x26c6;_0x1c87bf<this['_layers']['length'];_0x1c87bf++)_0x325f17=_0x2b6a08['getLayerBy'+'Id'](this['_layers'][_0x1c87bf]),_0x325f17&&_0x325f17['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x303359){var _0x3d9788,_0x409e32;this['_batchGrou'+'pId']!==_0x303359&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0xfe+0x257c+-0x3d9*0xa&&((_0x3d9788=this['system']['app']['batcher'])==null||_0x3d9788['remove'](St['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x303359>=0x2*-0xa3f+0x10f2+0x2*0x1c6&&((_0x409e32=this['system']['app']['batcher'])==null||_0x409e32['insert'](St['RENDER'],_0x303359,this['entity'])),_0x303359<0x14ed+0x426+0x83*-0x31&&this['_batchGrou'+'pId']>=-0x3*-0x1c6+0x79*-0x2+-0x460&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s'](),this['_batchGrou'+'pId']=_0x303359);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['material'](_0x336fdf){if(this['_material']!==_0x336fdf&&(this['_material']=_0x336fdf,this['_meshInsta'+'nces']&&this['_type']!=='asset')){for(let _0x3633e0=-0x2*0xfe3+-0x2428+0xd96*0x5;_0x3633e0<this['_meshInsta'+'nces']['length'];_0x3633e0++)this['_meshInsta'+'nces'][_0x3633e0]['material']=_0x336fdf;}}get['material'](){return this['_material'];}set['materialAs'+'sets'](_0x2fc1fd=[]){if(this['_materialR'+'eferences']['length']>_0x2fc1fd['length']){for(let _0x4025a3=_0x2fc1fd['length'];_0x4025a3<this['_materialR'+'eferences']['length'];_0x4025a3++)this['_materialR'+'eferences'][_0x4025a3]['id']=null;this['_materialR'+'eferences']['length']=_0x2fc1fd['length'];}for(let _0x2eb8bd=-0x1448+-0x1ddd+-0x3*-0x10b7;_0x2eb8bd<_0x2fc1fd['length'];_0x2eb8bd++)if(this['_materialR'+'eferences'][_0x2eb8bd]||this['_materialR'+'eferences']['push'](new gl(_0x2eb8bd,this,this['system']['app']['assets'],{'add':this['_onMateria'+'lAdded'],'load':this['_onMateria'+'lLoad'],'remove':this['_onMateria'+'lRemove'],'unload':this['_onMateria'+'lUnload']},this)),_0x2fc1fd[_0x2eb8bd]){const _0x50389b=_0x2fc1fd[_0x2eb8bd]instanceof pe?_0x2fc1fd[_0x2eb8bd]['id']:_0x2fc1fd[_0x2eb8bd];this['_materialR'+'eferences'][_0x2eb8bd]['id']!==_0x50389b&&(this['_materialR'+'eferences'][_0x2eb8bd]['id']=_0x50389b),this['_materialR'+'eferences'][_0x2eb8bd]['asset']&&this['_onMateria'+'lAdded'](_0x2eb8bd,this,this['_materialR'+'eferences'][_0x2eb8bd]['asset']);}else this['_materialR'+'eferences'][_0x2eb8bd]['id']=null,this['_meshInsta'+'nces'][_0x2eb8bd]&&(this['_meshInsta'+'nces'][_0x2eb8bd]['material']=this['system']['defaultMat'+'erial']);}get['materialAs'+'sets'](){return this['_materialR'+'eferences']['map'](_0xf68b77=>_0xf68b77['id']);}set['asset'](_0x43a769){const _0x1e46d5=_0x43a769 instanceof pe?_0x43a769['id']:_0x43a769;this['_assetRefe'+'rence']['id']!==_0x1e46d5&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onRenderA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x1e46d5,this['_assetRefe'+'rence']['asset']&&this['_onRenderA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['assignAsse'+'t'](_0x3884a0){const _0xe3138b=_0x3884a0 instanceof pe?_0x3884a0['id']:_0x3884a0;this['_assetRefe'+'rence']['id']=_0xe3138b;}set['rootBone'](_0x52595f){if(this['_rootBone']!==_0x52595f){const _0xe5dbbb=typeof _0x52595f=='string';if(this['_rootBone']&&_0xe5dbbb&&this['_rootBone']['getGuid']()===_0x52595f)return;this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x52595f instanceof Ie?this['_rootBone']=_0x52595f:_0xe5dbbb?(this['_rootBone']=this['system']['app']['getEntityF'+'romIndex'](_0x52595f)||null,this['_rootBone']||w['warn']('Failed\x20to\x20'+'find\x20rootB'+'one\x20Entity'+'\x20by\x20GUID')):this['_rootBone']=null,this['_rootBone']&&this['_cloneSkin'+'Instances']();}}get['rootBone'](){return this['_rootBone'];}['destroyMes'+'hInstances'](){const _0x3f21b3=this['_meshInsta'+'nces'];if(_0x3f21b3){this['removeFrom'+'Layers'](),this['_clearSkin'+'Instances']();for(let _0x234461=0x3e*0x93+-0x3*0x68e+0x11*-0xf0;_0x234461<_0x3f21b3['length'];_0x234461++)_0x3f21b3[_0x234461]['destroy']();this['_meshInsta'+'nces']['length']=-0xd27+0x11f5*0x1+0x3*-0x19a;}}['addToLayer'+'s'](){const _0x4b978e=this['system']['app']['scene']['layers'];for(let _0x30bcda=-0x168b+0x4*0x178+0x10ab;_0x30bcda<this['_layers']['length'];_0x30bcda++){const _0x12b7cd=_0x4b978e['getLayerBy'+'Id'](this['_layers'][_0x30bcda]);_0x12b7cd&&_0x12b7cd['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}['removeFrom'+'Layers'](){if(this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']){const _0x1a8ea9=this['system']['app']['scene']['layers'];for(let _0x21bf55=-0x2*-0x151+0x740+-0x9e2;_0x21bf55<this['_layers']['length'];_0x21bf55++){const _0x452384=_0x1a8ea9['getLayerBy'+'Id'](this['_layers'][_0x21bf55]);_0x452384&&_0x452384['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_meshInsta'+'nces']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyMes'+'hInstances'](),this['asset']=null,this['materialAs'+'set']=null,this['_assetRefe'+'rence']['id']=null;for(let _0x33531f=-0x11*0x65+-0x1c43*-0x1+-0x158e;_0x33531f<this['_materialR'+'eferences']['length'];_0x33531f++)this['_materialR'+'eferences'][_0x33531f]['id']=null;this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x2e3b1c,_0xc9cdd7){this['addToLayer'+'s'](),_0x2e3b1c['off']('add',this['onLayerAdd'+'ed'],this),_0x2e3b1c['off']('remove',this['onLayerRem'+'oved'],this),_0xc9cdd7['on']('add',this['onLayerAdd'+'ed'],this),_0xc9cdd7['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x4cd5a7){this['layers']['indexOf'](_0x4cd5a7['id'])<0x21db+-0x8de+-0x18fd||_0x4cd5a7['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}['onLayerRem'+'oved'](_0x268123){this['layers']['indexOf'](_0x268123['id'])<-0x1a25+0x24da+-0xab5*0x1||_0x268123['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}['onEnable'](){var _0x405671;const _0x3891e7=this['system']['app'],_0x5ab754=_0x3891e7['scene'],_0x463a79=_0x5ab754['layers'];this['_rootBone']&&this['_cloneSkin'+'Instances'](),this['_evtLayers'+'Changed']=_0x5ab754['on']('set:layers',this['onLayersCh'+'anged'],this),_0x463a79&&(this['_evtLayerA'+'dded']=_0x463a79['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x463a79['on']('remove',this['onLayerRem'+'oved'],this));const _0x1cb839=this['_type']==='asset';this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']?this['addToLayer'+'s']():_0x1cb839&&this['asset']&&this['_onRenderA'+'ssetAdded']();for(let _0x526de9=-0x75*-0x14+0x1605+-0x1*0x1f29;_0x526de9<this['_materialR'+'eferences']['length'];_0x526de9++)this['_materialR'+'eferences'][_0x526de9]['asset']&&this['system']['app']['assets']['load'](this['_materialR'+'eferences'][_0x526de9]['asset']);this['_batchGrou'+'pId']>=0x1521+-0x1*0xd5b+0x3e3*-0x2&&((_0x405671=_0x3891e7['batcher'])==null||_0x405671['insert'](St['RENDER'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x193cf7,_0x469ab2,_0x32f371,_0x3cd24a;const _0x3f953b=this['system']['app'],_0x4ff632=_0x3f953b['scene']['layers'];(_0x193cf7=this['_evtLayers'+'Changed'])==null||_0x193cf7['off'](),this['_evtLayers'+'Changed']=null,this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x4ff632&&((_0x469ab2=this['_evtLayerA'+'dded'])==null||_0x469ab2['off'](),this['_evtLayerA'+'dded']=null,(_0x32f371=this['_evtLayerR'+'emoved'])==null||_0x32f371['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=0x151*0x18+0x18a5+-0x1*0x383d&&((_0x3cd24a=_0x3f953b['batcher'])==null||_0x3cd24a['remove'](St['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['removeFrom'+'Layers']();}['hide'](){if(this['_meshInsta'+'nces']){for(let _0x4306b1=-0x1d2*-0x8+-0x8*-0x71+-0x1218;_0x4306b1<this['_meshInsta'+'nces']['length'];_0x4306b1++)this['_meshInsta'+'nces'][_0x4306b1]['visible']=!(-0x27e*0xb+-0x69d*0x2+-0x28a5*-0x1);}}['show'](){if(this['_meshInsta'+'nces']){for(let _0x2ec386=-0x1cd9+-0x1c91+-0x1cb5*-0x2;_0x2ec386<this['_meshInsta'+'nces']['length'];_0x2ec386++)this['_meshInsta'+'nces'][_0x2ec386]['visible']=!(-0x1314+0x686+-0x1*-0xc8e);}}['_onRenderA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onRenderA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onRenderA'+'ssetLoad'](){var _0x165cc3;if(this['destroyMes'+'hInstances'](),this['_assetRefe'+'rence']['asset']){const _0x2f6570=this['_assetRefe'+'rence']['asset']['resource'];(_0x165cc3=this['_evtSetMes'+'hes'])==null||_0x165cc3['off'](),this['_evtSetMes'+'hes']=_0x2f6570['on']('set:meshes',this['_onSetMesh'+'es'],this),_0x2f6570['meshes']&&this['_onSetMesh'+'es'](_0x2f6570['meshes']);}}['_onSetMesh'+'es'](_0x134583){this['_cloneMesh'+'es'](_0x134583);}['_clearSkin'+'Instances'](){for(let _0x21e41b=-0x1*-0x1fbb+-0x148f+-0xb2c;_0x21e41b<this['_meshInsta'+'nces']['length'];_0x21e41b++){const _0x22ac14=this['_meshInsta'+'nces'][_0x21e41b];_l['removeCach'+'edSkinInst'+'ance'](_0x22ac14['skinInstan'+'ce']),_0x22ac14['skinInstan'+'ce']=null;}}['_cloneSkin'+'Instances'](){if(this['_meshInsta'+'nces']['length']&&this['_rootBone']instanceof Ie)for(let _0x5c874f=-0xd*0x232+0x5c6+-0xbc*-0x1f;_0x5c874f<this['_meshInsta'+'nces']['length'];_0x5c874f++){const _0x1bbe2a=this['_meshInsta'+'nces'][_0x5c874f],_0x4505d1=_0x1bbe2a['mesh'];_0x4505d1['skin']&&!_0x1bbe2a['skinInstan'+'ce']&&(_0x1bbe2a['skinInstan'+'ce']=_l['createCach'+'edSkinInst'+'ance'](_0x4505d1['skin'],this['_rootBone'],this['entity']));}}['_cloneMesh'+'es'](_0x2aadcc){if(_0x2aadcc&&_0x2aadcc['length']){const _0x353e22=[];for(let _0x1ce21f=0xc9*0x31+-0x1dda+-0x89f;_0x1ce21f<_0x2aadcc['length'];_0x1ce21f++){const _0x7bddc2=_0x2aadcc[_0x1ce21f],_0xe9299d=this['_materialR'+'eferences'][_0x1ce21f]&&this['_materialR'+'eferences'][_0x1ce21f]['asset']&&this['_materialR'+'eferences'][_0x1ce21f]['asset']['resource'],_0x643b73=new He(_0x7bddc2,_0xe9299d||this['system']['defaultMat'+'erial'],this['entity']);_0x353e22['push'](_0x643b73),_0x7bddc2['morph']&&(_0x643b73['morphInsta'+'nce']=new xa(_0x7bddc2['morph']));}this['meshInstan'+'ces']=_0x353e22,this['_cloneSkin'+'Instances']();}}['_onRenderA'+'ssetUnload'](){this['_type']==='asset'&&this['destroyMes'+'hInstances']();}['_onRenderA'+'ssetRemove'](){var _0x2e021b;(_0x2e021b=this['_evtSetMes'+'hes'])==null||_0x2e021b['off'](),this['_evtSetMes'+'hes']=null,this['_onRenderA'+'ssetUnload']();}['_onMateria'+'lAdded'](_0x5bbacc,_0x23e8b5,_0x5e6379){_0x5e6379['resource']?this['_onMateria'+'lLoad'](_0x5bbacc,_0x23e8b5,_0x5e6379):this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](_0x5e6379);}['_updateMai'+'nMaterial'](_0x54e59d,_0x1c0b74){_0x54e59d===0x1*-0x14c9+0x1c5*0xd+0x2*-0x11c&&(this['material']=_0x1c0b74);}['_onMateria'+'lLoad'](_0x2e23d8,_0x32543d,_0x5e2a0e){this['_meshInsta'+'nces'][_0x2e23d8]&&(this['_meshInsta'+'nces'][_0x2e23d8]['material']=_0x5e2a0e['resource']),this['_updateMai'+'nMaterial'](_0x2e23d8,_0x5e2a0e['resource']);}['_onMateria'+'lRemove'](_0xdb946a,_0x164a02,_0x43ccab){this['_meshInsta'+'nces'][_0xdb946a]&&(this['_meshInsta'+'nces'][_0xdb946a]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0xdb946a,this['system']['defaultMat'+'erial']);}['_onMateria'+'lUnload'](_0x3a8af8,_0x100295,_0x155e2e){this['_meshInsta'+'nces'][_0x3a8af8]&&(this['_meshInsta'+'nces'][_0x3a8af8]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x3a8af8,this['system']['defaultMat'+'erial']);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x403600,_0x205636){_0x403600['rootBone']&&(this['rootBone']=_0x205636[_0x403600['rootBone']['getGuid']()]);}}class BO{constructor(){this['enabled']=!(0x6be+-0x1b47*-0x1+-0xb57*0x3);}}const ku=['enabled'],Gr=['material','meshInstan'+'ces','asset','materialAs'+'sets','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','renderStyl'+'e','type','layers','isStatic','batchGroup'+'Id','rootBone'];class zO extends ct{constructor(_0x1d8185){super(_0x1d8185),this['id']='render',this['ComponentT'+'ype']=n0,this['DataType']=BO,this['schema']=ku,this['defaultMat'+'erial']=Qn(_0x1d8185['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x307096,_0x22fae1,_0x414270){(_0x22fae1['batchGroup'+'Id']===null||_0x22fae1['batchGroup'+'Id']===void(-0x193f+-0x1*-0xbbd+0xd*0x10a))&&(_0x22fae1['batchGroup'+'Id']=-(0x9d*-0x1+-0x1e3e+-0x19*-0x13c)),_0x22fae1['layers']&&_0x22fae1['layers']['length']&&(_0x22fae1['layers']=_0x22fae1['layers']['slice'](-0x70c*-0x3+0x14ee+-0x2a12));for(let _0x519abd=0x99a+0x1*0x17c0+-0x3*0xb1e;_0x519abd<Gr['length'];_0x519abd++)_0x22fae1['hasOwnProp'+'erty'](Gr[_0x519abd])&&(_0x307096[Gr[_0x519abd]]=_0x22fae1[Gr[_0x519abd]]);_0x22fae1['aabbCenter']&&_0x22fae1['aabbHalfEx'+'tents']&&(_0x307096['customAabb']=new De(new D(_0x22fae1['aabbCenter']),new D(_0x22fae1['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x307096,_0x22fae1,ku);}['cloneCompo'+'nent'](_0x158e67,_0xbeb408){const _0x5ecfa6={};for(let _0x36bcc8=0x1ef0+-0x29*0x19+-0xc5*0x23;_0x36bcc8<Gr['length'];_0x36bcc8++)_0x5ecfa6[Gr[_0x36bcc8]]=_0x158e67['render'][Gr[_0x36bcc8]];_0x5ecfa6['enabled']=_0x158e67['render']['enabled'],delete _0x5ecfa6['meshInstan'+'ces'];const _0x120264=this['addCompone'+'nt'](_0xbeb408,_0x5ecfa6),_0x9af34a=_0x158e67['render']['meshInstan'+'ces'],_0x26cf32=_0x9af34a['map'](_0x3a5272=>_0x3a5272['mesh']);_0x120264['_onSetMesh'+'es'](_0x26cf32);for(let _0x44995f=0x1a57+0x1579+-0x2fd0;_0x44995f<_0x9af34a['length'];_0x44995f++)_0x120264['meshInstan'+'ces'][_0x44995f]['material']=_0x9af34a[_0x44995f]['material'];return _0x158e67['render']['customAabb']&&(_0x120264['customAabb']=_0x158e67['render']['customAabb']['clone']()),_0x120264;}['onRemove'](_0x3b387b,_0x3252e4){_0x3252e4['onRemove']();}}we['_buildAcce'+'ssors'](n0['prototype'],ku);class bf{constructor(_0x74f091,_0x40ebd9){h(this,'_construct'+'or'),h(this,'_pool',[]),h(this,'_count',-0x919+0x1206+0x8ed*-0x1),(this['_construct'+'or']=_0x74f091,this['_resize'](_0x40ebd9));}['_resize'](_0x1570b6){if(_0x1570b6>this['_pool']['length']){for(let _0x2ed11a=this['_pool']['length'];_0x2ed11a<_0x1570b6;_0x2ed11a++)this['_pool'][_0x2ed11a]=new this['_construct'+'or']();}}['allocate'](){return this['_count']>=this['_pool']['length']&&this['_resize'](this['_pool']['length']*(0x221a+0x205a+-0x4272)),this['_pool'][this['_count']++];}['freeAll'](){this['_count']=0x11*0x206+-0x26b9*0x1+-0x9*-0x7b;}}let cs,Re,Bs,Ka;const VO=new le(),GO=new le(),Pc=new D();class bs extends we{constructor(){super(...arguments),h(this,'_angularDa'+'mping',0x824*-0x2+0x133+0x21*0x75),h(this,'_angularFa'+'ctor',new D(0x733*0x1+0xe7b+-0x15ad*0x1,-0x1cf5+0x2134+0xb5*-0x6,-0x3da+0xcdb+0x40*-0x24)),h(this,'_angularVe'+'locity',new D()),h(this,'_body',null),h(this,'_friction',-0x1d*-0x3+-0xa90+-0xa39*-0x1+0.5),h(this,'_group',Gg),h(this,'_linearDam'+'ping',0x1b2*0xd+-0x1d4f+-0x745*-0x1),h(this,'_linearFac'+'tor',new D(-0x10d3+0x20f3+-0x101f,-0x12d1+-0x7f0*-0x4+-0xcee,0x2*-0x11e0+0x45a*-0x2+-0x257*-0x13)),h(this,'_linearVel'+'ocity',new D()),h(this,'_mask',Mu),h(this,'_mass',0x1100+-0x25ef+0x14f0),h(this,'_restituti'+'on',-0x43*0x3d+0xb7c+0x47b),h(this,'_rollingFr'+'iction',0x12e8+0xc9*-0x7+-0xd69),h(this,'_simulatio'+'nEnabled',!(0x9ec+0x3e*-0x11+-0x5cd)),h(this,'_type',yo);}static['onLibraryL'+'oaded'](){typeof Ammo<'u'&&(cs=new Ammo['btTransfor'+'m'](),Re=new Ammo['btVector3'](),Bs=new Ammo['btVector3'](),Ka=new Ammo['btQuaterni'+'on']());}static['onAppDestr'+'oy'](){Ammo['destroy'](cs),Ammo['destroy'](Re),Ammo['destroy'](Bs),Ammo['destroy'](Ka),cs=null,Re=null,Bs=null,Ka=null;}set['angularDam'+'ping'](_0x4b9487){this['_angularDa'+'mping']!==_0x4b9487&&(this['_angularDa'+'mping']=_0x4b9487,this['_body']&&this['_body']['setDamping'](this['_linearDam'+'ping'],_0x4b9487));}get['angularDam'+'ping'](){return this['_angularDa'+'mping'];}set['angularFac'+'tor'](_0x16a4eb){this['_angularFa'+'ctor']['equals'](_0x16a4eb)||(this['_angularFa'+'ctor']['copy'](_0x16a4eb),this['_body']&&this['_type']===ks&&(Re['setValue'](_0x16a4eb['x'],_0x16a4eb['y'],_0x16a4eb['z']),this['_body']['setAngular'+'Factor'](Re)));}get['angularFac'+'tor'](){return this['_angularFa'+'ctor'];}set['angularVel'+'ocity'](_0xc9df70){this['_body']&&this['_type']===ks&&(this['_body']['activate'](),Re['setValue'](_0xc9df70['x'],_0xc9df70['y'],_0xc9df70['z']),this['_body']['setAngular'+'Velocity'](Re),this['_angularVe'+'locity']['copy'](_0xc9df70));}get['angularVel'+'ocity'](){if(this['_body']&&this['_type']===ks){const _0x23750b=this['_body']['getAngular'+'Velocity']();this['_angularVe'+'locity']['set'](_0x23750b['x'](),_0x23750b['y'](),_0x23750b['z']());}return this['_angularVe'+'locity'];}set['body'](_0x388846){this['_body']!==_0x388846&&(this['_body']=_0x388846,_0x388846&&this['_simulatio'+'nEnabled']&&_0x388846['activate']());}get['body'](){return this['_body'];}set['friction'](_0x1a3621){this['_friction']!==_0x1a3621&&(this['_friction']=_0x1a3621,this['_body']&&this['_body']['setFrictio'+'n'](_0x1a3621));}get['friction'](){return this['_friction'];}set['group'](_0xae758){this['_group']!==_0xae758&&(this['_group']=_0xae758,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['group'](){return this['_group'];}set['linearDamp'+'ing'](_0x1a05b6){this['_linearDam'+'ping']!==_0x1a05b6&&(this['_linearDam'+'ping']=_0x1a05b6,this['_body']&&this['_body']['setDamping'](_0x1a05b6,this['_angularDa'+'mping']));}get['linearDamp'+'ing'](){return this['_linearDam'+'ping'];}set['linearFact'+'or'](_0x53ef6d){this['_linearFac'+'tor']['equals'](_0x53ef6d)||(this['_linearFac'+'tor']['copy'](_0x53ef6d),this['_body']&&this['_type']===ks&&(Re['setValue'](_0x53ef6d['x'],_0x53ef6d['y'],_0x53ef6d['z']),this['_body']['setLinearF'+'actor'](Re)));}get['linearFact'+'or'](){return this['_linearFac'+'tor'];}set['linearVelo'+'city'](_0x4f66bb){this['_body']&&this['_type']===ks&&(this['_body']['activate'](),Re['setValue'](_0x4f66bb['x'],_0x4f66bb['y'],_0x4f66bb['z']),this['_body']['setLinearV'+'elocity'](Re),this['_linearVel'+'ocity']['copy'](_0x4f66bb));}get['linearVelo'+'city'](){if(this['_body']&&this['_type']===ks){const _0x2d8aef=this['_body']['getLinearV'+'elocity']();this['_linearVel'+'ocity']['set'](_0x2d8aef['x'](),_0x2d8aef['y'](),_0x2d8aef['z']());}return this['_linearVel'+'ocity'];}set['mask'](_0x350848){this['_mask']!==_0x350848&&(this['_mask']=_0x350848,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['mask'](){return this['_mask'];}set['mass'](_0x311f9c){if(this['_mass']!==_0x311f9c&&(this['_mass']=_0x311f9c,this['_body']&&this['_type']===ks)){const _0x495210=this['enabled']&&this['entity']['enabled'];_0x495210&&this['disableSim'+'ulation'](),this['_body']['getCollisi'+'onShape']()['calculateL'+'ocalInerti'+'a'](_0x311f9c,Re),this['_body']['setMassPro'+'ps'](_0x311f9c,Re),this['_body']['updateIner'+'tiaTensor'](),_0x495210&&this['enableSimu'+'lation']();}}get['mass'](){return this['_mass'];}set['restitutio'+'n'](_0x549c90){this['_restituti'+'on']!==_0x549c90&&(this['_restituti'+'on']=_0x549c90,this['_body']&&this['_body']['setRestitu'+'tion'](_0x549c90));}get['restitutio'+'n'](){return this['_restituti'+'on'];}set['rollingFri'+'ction'](_0x5f744d){this['_rollingFr'+'iction']!==_0x5f744d&&(this['_rollingFr'+'iction']=_0x5f744d,this['_body']&&this['_body']['setRolling'+'Friction'](_0x5f744d));}get['rollingFri'+'ction'](){return this['_rollingFr'+'iction'];}set['type'](_0x5ec60e){if(this['_type']!==_0x5ec60e){switch(this['_type']=_0x5ec60e,this['disableSim'+'ulation'](),_0x5ec60e){case ks:this['_group']=jL,this['_mask']=Wg;break;case Ha:this['_group']=YL,this['_mask']=Wg;break;case yo:default:this['_group']=Gg,this['_mask']=Mu;break;}this['createBody']();}}get['type'](){return this['_type'];}['createBody'](){const _0x50ecd2=this['entity'];let _0x21a69b;if(_0x50ecd2['collision']&&(_0x21a69b=_0x50ecd2['collision']['shape'],_0x50ecd2['trigger']&&(_0x50ecd2['trigger']['destroy'](),delete _0x50ecd2['trigger'])),_0x21a69b){this['_body']&&(this['system']['removeBody'](this['_body']),this['system']['destroyBod'+'y'](this['_body']),this['_body']=null);const _0x172f94=this['_type']===ks?this['_mass']:0x1*-0x10a3+-0x80+0x1123;this['_getEntity'+'Transform'](cs);const _0x3fa79d=this['system']['createBody'](_0x172f94,_0x21a69b,cs);if(_0x3fa79d['setRestitu'+'tion'](this['_restituti'+'on']),_0x3fa79d['setFrictio'+'n'](this['_friction']),_0x3fa79d['setRolling'+'Friction'](this['_rollingFr'+'iction']),_0x3fa79d['setDamping'](this['_linearDam'+'ping'],this['_angularDa'+'mping']),this['_type']===ks){const _0x23a29b=this['_linearFac'+'tor'];Re['setValue'](_0x23a29b['x'],_0x23a29b['y'],_0x23a29b['z']),_0x3fa79d['setLinearF'+'actor'](Re);const _0x4d489d=this['_angularFa'+'ctor'];Re['setValue'](_0x4d489d['x'],_0x4d489d['y'],_0x4d489d['z']),_0x3fa79d['setAngular'+'Factor'](Re);}else this['_type']===Ha&&(_0x3fa79d['setCollisi'+'onFlags'](_0x3fa79d['getCollisi'+'onFlags']()|qL),_0x3fa79d['setActivat'+'ionState'](Vg));_0x3fa79d['entity']=_0x50ecd2,this['body']=_0x3fa79d,this['enabled']&&_0x50ecd2['enabled']&&this['enableSimu'+'lation']();}}['isActive'](){return this['_body']?this['_body']['isActive']():!(0x8*-0x42a+0x141*0x12+0xabf*0x1);}['activate'](){this['_body']&&this['_body']['activate']();}['enableSimu'+'lation'](){const _0x134905=this['entity'];if(_0x134905['collision']&&_0x134905['collision']['enabled']&&!this['_simulatio'+'nEnabled']){const _0xb44576=this['_body'];if(_0xb44576){switch(this['system']['addBody'](_0xb44576,this['_group'],this['_mask']),this['_type']){case ks:this['system']['_dynamic']['push'](this),_0xb44576['forceActiv'+'ationState'](Pu),this['syncEntity'+'ToBody']();break;case Ha:this['system']['_kinematic']['push'](this),_0xb44576['forceActiv'+'ationState'](Vg);break;case yo:_0xb44576['forceActiv'+'ationState'](Pu),this['syncEntity'+'ToBody']();break;}_0x134905['collision']['type']==='compound'&&this['system']['_compounds']['push'](_0x134905['collision']),_0xb44576['activate'](),this['_simulatio'+'nEnabled']=!(0x1*0x2ee+-0xb6b+0x29*0x35);}}}['disableSim'+'ulation'](){const _0xf265be=this['_body'];if(_0xf265be&&this['_simulatio'+'nEnabled']){const _0x552650=this['system'];let _0x107144=_0x552650['_compounds']['indexOf'](this['entity']['collision']);_0x107144>-(-0x277+0x1a4a+0x1*-0x17d2)&&_0x552650['_compounds']['splice'](_0x107144,0x3*0xb27+-0x305*-0x1+-0x2479*0x1),_0x107144=_0x552650['_dynamic']['indexOf'](this),_0x107144>-(-0x45*-0x35+0x87b*0x1+-0x16c3)&&_0x552650['_dynamic']['splice'](_0x107144,-0xc5*0x4+0x62a*0x6+-0x107*0x21),_0x107144=_0x552650['_kinematic']['indexOf'](this),_0x107144>-(0x12e1*-0x1+-0x1997+0x2c79)&&_0x552650['_kinematic']['splice'](_0x107144,-0x1*0x1018+0x17*0x4e+0x917),_0x552650['removeBody'](_0xf265be),_0xf265be['forceActiv'+'ationState'](Yv),this['_simulatio'+'nEnabled']=!(-0xb*0x2ff+-0x2359+-0x797*-0x9);}}['applyForce'](_0x38f3a3,_0x186b4b,_0x3ec76b,_0x3c26fc,_0x50268c,_0x1c6841){const _0x1f6463=this['_body'];_0x1f6463&&(_0x1f6463['activate'](),_0x38f3a3 instanceof D?Re['setValue'](_0x38f3a3['x'],_0x38f3a3['y'],_0x38f3a3['z']):Re['setValue'](_0x38f3a3,_0x186b4b,_0x3ec76b),_0x186b4b instanceof D?Bs['setValue'](_0x186b4b['x'],_0x186b4b['y'],_0x186b4b['z']):_0x3c26fc!==void(-0x1d*-0xfd+-0x1b0c+-0x3b*0x7)?Bs['setValue'](_0x3c26fc,_0x50268c,_0x1c6841):Bs['setValue'](0x2414+-0x2086+-0x82*0x7,0xd96+-0x135*0xd+0x7*0x4d,0x168a+0x17cd+-0x2e57),_0x1f6463['applyForce'](Re,Bs));}['applyTorqu'+'e'](_0x571308,_0x3ad1fe,_0x31f34c){const _0x4dc419=this['_body'];_0x4dc419&&(_0x4dc419['activate'](),_0x571308 instanceof D?Re['setValue'](_0x571308['x'],_0x571308['y'],_0x571308['z']):Re['setValue'](_0x571308,_0x3ad1fe,_0x31f34c),_0x4dc419['applyTorqu'+'e'](Re));}['applyImpul'+'se'](_0x1d5ea8,_0x1a2e34,_0x14079b,_0x2e9ee5,_0x1833af,_0xa1402c){const _0x408a68=this['_body'];_0x408a68&&(_0x408a68['activate'](),_0x1d5ea8 instanceof D?Re['setValue'](_0x1d5ea8['x'],_0x1d5ea8['y'],_0x1d5ea8['z']):Re['setValue'](_0x1d5ea8,_0x1a2e34,_0x14079b),_0x1a2e34 instanceof D?Bs['setValue'](_0x1a2e34['x'],_0x1a2e34['y'],_0x1a2e34['z']):_0x2e9ee5!==void(-0x1b7b+0x938+0x1243)?Bs['setValue'](_0x2e9ee5,_0x1833af,_0xa1402c):Bs['setValue'](-0x41*-0x45+-0x1b1c+0x997,0x1*0x20dd+0x13*-0xf1+0x2*-0x77d,-0x206f+0x1cac+0x3c3),_0x408a68['applyImpul'+'se'](Re,Bs));}['applyTorqu'+'eImpulse'](_0x2692c0,_0x27ffc2,_0x5e14ba){const _0x639884=this['_body'];_0x639884&&(_0x639884['activate'](),_0x2692c0 instanceof D?Re['setValue'](_0x2692c0['x'],_0x2692c0['y'],_0x2692c0['z']):Re['setValue'](_0x2692c0,_0x27ffc2,_0x5e14ba),_0x639884['applyTorqu'+'eImpulse'](Re));}['isStatic'](){return this['_type']===yo;}['isStaticOr'+'Kinematic'](){return this['_type']===yo||this['_type']===Ha;}['isKinemati'+'c'](){return this['_type']===Ha;}['_getEntity'+'Transform'](_0xdccd72){const _0x5d4396=this['entity'],_0x333995=_0x5d4396['collision'];if(_0x333995){const _0x1ab359=_0x333995['getShapePo'+'sition'](),_0x344a2c=_0x333995['getShapeRo'+'tation']();Re['setValue'](_0x1ab359['x'],_0x1ab359['y'],_0x1ab359['z']),Ka['setValue'](_0x344a2c['x'],_0x344a2c['y'],_0x344a2c['z'],_0x344a2c['w']);}else{const _0x85a121=_0x5d4396['getPositio'+'n'](),_0x42030a=_0x5d4396['getRotatio'+'n']();Re['setValue'](_0x85a121['x'],_0x85a121['y'],_0x85a121['z']),Ka['setValue'](_0x42030a['x'],_0x42030a['y'],_0x42030a['z'],_0x42030a['w']);}_0xdccd72['setOrigin'](Re),_0xdccd72['setRotatio'+'n'](Ka);}['syncEntity'+'ToBody'](){const _0x4c23be=this['_body'];if(_0x4c23be){if(this['_getEntity'+'Transform'](cs),_0x4c23be['setWorldTr'+'ansform'](cs),this['_type']===Ha){const _0x1eddc0=_0x4c23be['getMotionS'+'tate']();_0x1eddc0&&_0x1eddc0['setWorldTr'+'ansform'](cs);}_0x4c23be['activate']();}}['_updateDyn'+'amic'](){const _0x166829=this['_body'];if(_0x166829['isActive']()){const _0xdb8ce2=_0x166829['getMotionS'+'tate']();if(_0xdb8ce2){const _0x4d6664=this['entity'];_0xdb8ce2['getWorldTr'+'ansform'](cs);const _0x24831e=cs['getOrigin'](),_0x284fba=cs['getRotatio'+'n'](),_0x3b48dd=_0x4d6664['collision'];if(_0x3b48dd&&_0x3b48dd['_hasOffset']){const _0x1b9274=_0x3b48dd['data']['linearOffs'+'et'],_0x39c761=_0x3b48dd['data']['angularOff'+'set'],_0x53145b=GO['copy'](_0x39c761)['invert'](),_0x5009e7=VO['set'](_0x284fba['x'](),_0x284fba['y'](),_0x284fba['z'](),_0x284fba['w']())['mul'](_0x53145b);_0x5009e7['transformV'+'ector'](_0x1b9274,Pc),_0x4d6664['setPositio'+'n'](_0x24831e['x']()-Pc['x'],_0x24831e['y']()-Pc['y'],_0x24831e['z']()-Pc['z']),_0x4d6664['setRotatio'+'n'](_0x5009e7);}else _0x4d6664['setPositio'+'n'](_0x24831e['x'](),_0x24831e['y'](),_0x24831e['z']()),_0x4d6664['setRotatio'+'n'](_0x284fba['x'](),_0x284fba['y'](),_0x284fba['z'](),_0x284fba['w']());}}}['_updateKin'+'ematic'](){const _0x44d3c7=this['_body']['getMotionS'+'tate']();_0x44d3c7&&(this['_getEntity'+'Transform'](cs),_0x44d3c7['setWorldTr'+'ansform'](cs));}['teleport'](_0x4e8934,_0x3a1e88,_0x38db7f,_0x1b07ba,_0x565129,_0x5e444a){_0x4e8934 instanceof D?this['entity']['setPositio'+'n'](_0x4e8934):this['entity']['setPositio'+'n'](_0x4e8934,_0x3a1e88,_0x38db7f),_0x3a1e88 instanceof le?this['entity']['setRotatio'+'n'](_0x3a1e88):_0x3a1e88 instanceof D?this['entity']['setEulerAn'+'gles'](_0x3a1e88):_0x1b07ba!==void(0x2350+-0x106a*-0x2+-0x164*0x31)&&this['entity']['setEulerAn'+'gles'](_0x1b07ba,_0x565129,_0x5e444a),this['syncEntity'+'ToBody']();}['onEnable'](){this['_body']||this['createBody'](),this['enableSimu'+'lation']();}['onDisable'](){this['disableSim'+'ulation']();}}h(bs,'EVENT_CONT'+'ACT','contact'),h(bs,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(bs,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(bs,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(bs,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve'),h(bs,'order',-(0x25b2+0x90f+-0x2ec0));class HO{constructor(){this['enabled']=!(0xa24*-0x1+0x115f*-0x2+0x2ce2);}}let Mi,Di;class eS{constructor(_0x4b855b,_0x2c6524,_0x5d04a8,_0x1ba7d3){h(this,'entity'),h(this,'point'),h(this,'normal'),h(this,'hitFractio'+'n'),(this['entity']=_0x4b855b,this['point']=_0x2c6524,this['normal']=_0x5d04a8,this['hitFractio'+'n']=_0x1ba7d3);}}class WO{constructor(_0x472e9c,_0x500e9f,_0xcc2452){h(this,'a'),h(this,'b'),h(this,'impulse'),h(this,'localPoint'+'A'),h(this,'localPoint'+'B'),h(this,'pointA'),h(this,'pointB'),h(this,'normal'),arguments['length']!==0xae*-0xb+-0x1f30+0x26aa?(this['a']=_0x472e9c,this['b']=_0x500e9f,this['impulse']=_0xcc2452['impulse'],this['localPoint'+'A']=_0xcc2452['localPoint'],this['localPoint'+'B']=_0xcc2452['localPoint'+'Other'],this['pointA']=_0xcc2452['point'],this['pointB']=_0xcc2452['pointOther'],this['normal']=_0xcc2452['normal']):(this['a']=null,this['b']=null,this['impulse']=-0x1ccd+-0x1*0x1e4f+0x3b1c,this['localPoint'+'A']=new D(),this['localPoint'+'B']=new D(),this['pointA']=new D(),this['pointB']=new D(),this['normal']=new D());}}class $O{constructor(_0x3af54f=new D(),_0x32df93=new D(),_0x4448c5=new D(),_0x5a124e=new D(),_0x3a68c=new D(),_0x4bcb2c=0x9e1*0x3+-0x8*0x327+-0x46b){h(this,'localPoint'),h(this,'localPoint'+'Other'),h(this,'point'),h(this,'pointOther'),h(this,'normal'),h(this,'impulse'),(this['localPoint']=_0x3af54f,this['localPoint'+'Other']=_0x32df93,this['point']=_0x4448c5,this['pointOther']=_0x5a124e,this['normal']=_0x3a68c,this['impulse']=_0x4bcb2c);}}class XO{constructor(_0x468d36,_0x129295){h(this,'other'),h(this,'contacts'),(this['other']=_0x468d36,this['contacts']=_0x129295);}}const o0=['enabled'];class wm extends ct{constructor(_0x4d251b){super(_0x4d251b),h(this,'maxSubStep'+'s',-0x10e7*-0x1+-0x1*0x1109+0x16*0x2),h(this,'fixedTimeS'+'tep',(0x9ad*0x2+-0xdeb+-0x2b7*0x2)/(-0x16fc+-0x7*-0x4e7+-0xb19)),h(this,'gravity',new D(0x8fb+0x1c34+-0x252f,-(0x2ce*0x9+-0x249*0xb+-0x12+0.8100000000000005),-0x1*-0x9a9+-0x175a+0xdb1)),h(this,'_gravityFl'+'oat32',new Float32Array(0xc66+0x1*0x234d+-0x70*0x6d)),h(this,'_dynamic',[]),h(this,'_kinematic',[]),h(this,'_triggers',[]),h(this,'_compounds',[]),(this['id']='rigidbody',this['_stats']=_0x4d251b['stats']['frame'],this['ComponentT'+'ype']=bs,this['DataType']=HO,this['contactPoi'+'ntPool']=null,this['contactRes'+'ultPool']=null,this['singleCont'+'actResultP'+'ool']=null,this['schema']=o0,this['collisions']={},this['frameColli'+'sions']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this));}['onLibraryL'+'oaded'](){if(typeof Ammo<'u'){if(this['collisionC'+'onfigurati'+'on']=new Ammo['btDefaultC'+'ollisionCo'+'nfiguratio'+'n'](),this['dispatcher']=new Ammo['btCollisio'+'nDispatche'+'r'](this['collisionC'+'onfigurati'+'on']),this['overlappin'+'gPairCache']=new Ammo['btDbvtBroa'+'dphase'](),this['solver']=new Ammo['btSequenti'+'alImpulseC'+'onstraintS'+'olver'](),this['dynamicsWo'+'rld']=new Ammo['btDiscrete'+'DynamicsWo'+'rld'](this['dispatcher'],this['overlappin'+'gPairCache'],this['solver'],this['collisionC'+'onfigurati'+'on']),this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']){const _0x432ec0=Ammo['addFunctio'+'n'](this['_checkForC'+'ollisions']['bind'](this),'vif');this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack'](_0x432ec0);}else w['warn']('WARNING:\x20T'+'his\x20versio'+'n\x20of\x20ammo.'+'js\x20can\x20pot'+'entially\x20f'+'ail\x20to\x20rep'+'ort\x20contac'+'ts.\x20Please'+'\x20update\x20it'+'\x20to\x20the\x20la'+'test\x20versi'+'on.');Mi=new Ammo['btVector3'](),Di=new Ammo['btVector3'](),bs['onLibraryL'+'oaded'](),this['contactPoi'+'ntPool']=new bf($O,-0x3*-0x9c1+-0x1*0x101f+0x39*-0x3b),this['contactRes'+'ultPool']=new bf(XO,0x19d1*0x1+-0x1*0x989+-0x1047),this['singleCont'+'actResultP'+'ool']=new bf(WO,-0x24d1+-0x691+-0x1d*-0x17f),this['app']['systems']['on']('update',this['onUpdate'],this);}else this['app']['systems']['off']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x2dae60,_0x44008c,_0x4dc2c9){const _0x40c4fb=['mass','linearDamp'+'ing','angularDam'+'ping','linearFact'+'or','angularFac'+'tor','friction','rollingFri'+'ction','restitutio'+'n','type','group','mask'];for(const _0xe06d09 of _0x40c4fb)if(_0x44008c['hasOwnProp'+'erty'](_0xe06d09)){const _0x215c19=_0x44008c[_0xe06d09];Array['isArray'](_0x215c19)?_0x2dae60[_0xe06d09]=new D(_0x215c19[0x1*-0x140b+0x783+0xc88],_0x215c19[0x4c*0x10+-0x1aa3+0x15e4],_0x215c19[0x1*-0x3e5+0x2*0xf1+0x205]):_0x2dae60[_0xe06d09]=_0x215c19;}super['initialize'+'ComponentD'+'ata'](_0x2dae60,_0x44008c,['enabled']);}['cloneCompo'+'nent'](_0x161d80,_0x29a7e2){const _0x2a6422=_0x161d80['rigidbody'],_0x320d92={'enabled':_0x2a6422['enabled'],'mass':_0x2a6422['mass'],'linearDamping':_0x2a6422['linearDamp'+'ing'],'angularDamping':_0x2a6422['angularDam'+'ping'],'linearFactor':[_0x2a6422['linearFact'+'or']['x'],_0x2a6422['linearFact'+'or']['y'],_0x2a6422['linearFact'+'or']['z']],'angularFactor':[_0x2a6422['angularFac'+'tor']['x'],_0x2a6422['angularFac'+'tor']['y'],_0x2a6422['angularFac'+'tor']['z']],'friction':_0x2a6422['friction'],'rollingFriction':_0x2a6422['rollingFri'+'ction'],'restitution':_0x2a6422['restitutio'+'n'],'type':_0x2a6422['type'],'group':_0x2a6422['group'],'mask':_0x2a6422['mask']};return this['addCompone'+'nt'](_0x29a7e2,_0x320d92);}['onBeforeRe'+'move'](_0x4e8551,_0xd07b6f){_0xd07b6f['enabled']&&(_0xd07b6f['enabled']=!(0x1f01+0x17a6+-0xaee*0x5)),_0xd07b6f['body']&&(this['destroyBod'+'y'](_0xd07b6f['body']),_0xd07b6f['body']=null);}['addBody'](_0x4c54a4,_0x4bd331,_0x3fc291){_0x4bd331!==void(-0x68e+0x1*-0x21c1+0x25f*0x11)&&_0x3fc291!==void(-0x1a19+-0x6c2+0x1*0x20db)?this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x4c54a4,_0x4bd331,_0x3fc291):this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x4c54a4);}['removeBody'](_0x39193c){this['dynamicsWo'+'rld']['removeRigi'+'dBody'](_0x39193c);}['createBody'](_0x506ae,_0x1ea488,_0xf4617c){const _0xc40897=new Ammo['btVector3'](0x15fd+-0x20a4+0xaa7,0x251e*0x1+-0x145f+-0x10bf,-0x7a6+-0x106d+0x1813);_0x506ae!==0x2*-0x79c+0xa39*-0x1+0x1971&&_0x1ea488['calculateL'+'ocalInerti'+'a'](_0x506ae,_0xc40897);const _0x23dcd5=new Ammo['btDefaultM'+'otionState'](_0xf4617c),_0x5ecc11=new Ammo['btRigidBod'+'yConstruct'+'ionInfo'](_0x506ae,_0x23dcd5,_0x1ea488,_0xc40897),_0xf8c8c0=new Ammo['btRigidBod'+'y'](_0x5ecc11);return Ammo['destroy'](_0x5ecc11),Ammo['destroy'](_0xc40897),_0xf8c8c0;}['destroyBod'+'y'](_0x297e9c){const _0x4a79e9=_0x297e9c['getMotionS'+'tate']();_0x4a79e9&&Ammo['destroy'](_0x4a79e9),Ammo['destroy'](_0x297e9c);}['raycastFir'+'st'](_0x82e005,_0x100c05,_0xb294bc={}){if(_0xb294bc['filterTags']||_0xb294bc['filterCall'+'back'])return _0xb294bc['sort']=!(-0x1786*-0x1+0xdf+-0x1865),this['raycastAll'](_0x82e005,_0x100c05,_0xb294bc)[0x24f7*-0x1+-0x25b7+-0xb*-0x6ca]||null;let _0xf2f7d1=null;Mi['setValue'](_0x82e005['x'],_0x82e005['y'],_0x82e005['z']),Di['setValue'](_0x100c05['x'],_0x100c05['y'],_0x100c05['z']);const _0xfca189=new Ammo['ClosestRay'+'ResultCall'+'back'](Mi,Di);if(typeof _0xb294bc['filterColl'+'isionGroup']=='number'&&_0xfca189['set_m_coll'+'isionFilte'+'rGroup'](_0xb294bc['filterColl'+'isionGroup']),typeof _0xb294bc['filterColl'+'isionMask']=='number'&&_0xfca189['set_m_coll'+'isionFilte'+'rMask'](_0xb294bc['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](Mi,Di,_0xfca189),_0xfca189['hasHit']()){const _0x4e5152=_0xfca189['get_m_coll'+'isionObjec'+'t'](),_0xb224bf=Ammo['castObject'](_0x4e5152,Ammo['btRigidBod'+'y']);if(_0xb224bf){const _0x45786d=_0xfca189['get_m_hitP'+'ointWorld'](),_0x59fc4d=_0xfca189['get_m_hitN'+'ormalWorld']();_0xf2f7d1=new eS(_0xb224bf['entity'],new D(_0x45786d['x'](),_0x45786d['y'](),_0x45786d['z']()),new D(_0x59fc4d['x'](),_0x59fc4d['y'](),_0x59fc4d['z']()),_0xfca189['get_m_clos'+'estHitFrac'+'tion']());}}return Ammo['destroy'](_0xfca189),_0xf2f7d1;}['raycastAll'](_0x15c493,_0xc257d3,_0x1cca77={}){w['assert'](Ammo['AllHitsRay'+'ResultCall'+'back'],'pc.RigidBo'+'dyComponen'+'tSystem#ra'+'ycastAll:\x20'+'Your\x20versi'+'on\x20of\x20ammo'+'.js\x20does\x20n'+'ot\x20expose\x20'+'Ammo.AllHi'+'tsRayResul'+'tCallback.'+'\x20Update\x20it'+'\x20to\x20latest'+'.');const _0x930fcf=[];Mi['setValue'](_0x15c493['x'],_0x15c493['y'],_0x15c493['z']),Di['setValue'](_0xc257d3['x'],_0xc257d3['y'],_0xc257d3['z']);const _0x1d0d4c=new Ammo['AllHitsRay'+'ResultCall'+'back'](Mi,Di);if(typeof _0x1cca77['filterColl'+'isionGroup']=='number'&&_0x1d0d4c['set_m_coll'+'isionFilte'+'rGroup'](_0x1cca77['filterColl'+'isionGroup']),typeof _0x1cca77['filterColl'+'isionMask']=='number'&&_0x1d0d4c['set_m_coll'+'isionFilte'+'rMask'](_0x1cca77['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](Mi,Di,_0x1d0d4c),_0x1d0d4c['hasHit']()){const _0x4eb4e5=_0x1d0d4c['get_m_coll'+'isionObjec'+'ts'](),_0x744107=_0x1d0d4c['get_m_hitP'+'ointWorld'](),_0x5313e8=_0x1d0d4c['get_m_hitN'+'ormalWorld'](),_0x1fccca=_0x1d0d4c['get_m_hitF'+'ractions'](),_0x37bf2=_0x4eb4e5['size']();for(let _0xac0c21=0xbd9+-0x1930+-0x1*-0xd57;_0xac0c21<_0x37bf2;_0xac0c21++){const _0x5cf418=Ammo['castObject'](_0x4eb4e5['at'](_0xac0c21),Ammo['btRigidBod'+'y']);if(_0x5cf418&&_0x5cf418['entity']){if(_0x1cca77['filterTags']&&!_0x5cf418['entity']['tags']['has'](..._0x1cca77['filterTags'])||_0x1cca77['filterCall'+'back']&&!_0x1cca77['filterCall'+'back'](_0x5cf418['entity']))continue;const _0x323fb8=_0x744107['at'](_0xac0c21),_0x5e515b=_0x5313e8['at'](_0xac0c21),_0x1b6681=new eS(_0x5cf418['entity'],new D(_0x323fb8['x'](),_0x323fb8['y'](),_0x323fb8['z']()),new D(_0x5e515b['x'](),_0x5e515b['y'](),_0x5e515b['z']()),_0x1fccca['at'](_0xac0c21));_0x930fcf['push'](_0x1b6681);}}_0x1cca77['sort']&&_0x930fcf['sort']((_0x121d17,_0x4e4aa5)=>_0x121d17['hitFractio'+'n']-_0x4e4aa5['hitFractio'+'n']);}return Ammo['destroy'](_0x1d0d4c),_0x930fcf;}['_storeColl'+'ision'](_0x34ab1c,_0xd121a){let _0x2a0376=!(0x23de+0x2234+-0x1*0x4611);const _0x41a787=_0x34ab1c['getGuid']();return this['collisions'][_0x41a787]=this['collisions'][_0x41a787]||{'others':[],'entity':_0x34ab1c},this['collisions'][_0x41a787]['others']['indexOf'](_0xd121a)<-0x76*-0x4f+0x7de+-0xda*0x34&&(this['collisions'][_0x41a787]['others']['push'](_0xd121a),_0x2a0376=!(0x3*-0xcb4+-0xd6f+0xd*0x3f7)),this['frameColli'+'sions'][_0x41a787]=this['frameColli'+'sions'][_0x41a787]||{'others':[],'entity':_0x34ab1c},this['frameColli'+'sions'][_0x41a787]['others']['push'](_0xd121a),_0x2a0376;}['_createCon'+'tactPointF'+'romAmmo'](_0x1f5208){const _0xf88766=_0x1f5208['get_m_loca'+'lPointA'](),_0x29c3d9=_0x1f5208['get_m_loca'+'lPointB'](),_0x323d43=_0x1f5208['getPositio'+'nWorldOnA'](),_0x58d4e2=_0x1f5208['getPositio'+'nWorldOnB'](),_0x104f79=_0x1f5208['get_m_norm'+'alWorldOnB'](),_0x2e853a=this['contactPoi'+'ntPool']['allocate']();return _0x2e853a['localPoint']['set'](_0xf88766['x'](),_0xf88766['y'](),_0xf88766['z']()),_0x2e853a['localPoint'+'Other']['set'](_0x29c3d9['x'](),_0x29c3d9['y'](),_0x29c3d9['z']()),_0x2e853a['point']['set'](_0x323d43['x'](),_0x323d43['y'](),_0x323d43['z']()),_0x2e853a['pointOther']['set'](_0x58d4e2['x'](),_0x58d4e2['y'](),_0x58d4e2['z']()),_0x2e853a['normal']['set'](_0x104f79['x'](),_0x104f79['y'](),_0x104f79['z']()),_0x2e853a['impulse']=_0x1f5208['getApplied'+'Impulse'](),_0x2e853a;}['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x42b45d){const _0x267203=_0x42b45d['get_m_loca'+'lPointA'](),_0x4be0c8=_0x42b45d['get_m_loca'+'lPointB'](),_0x2f9223=_0x42b45d['getPositio'+'nWorldOnA'](),_0x44f201=_0x42b45d['getPositio'+'nWorldOnB'](),_0x39a7c2=_0x42b45d['get_m_norm'+'alWorldOnB'](),_0x4e7eeb=this['contactPoi'+'ntPool']['allocate']();return _0x4e7eeb['localPoint'+'Other']['set'](_0x267203['x'](),_0x267203['y'](),_0x267203['z']()),_0x4e7eeb['localPoint']['set'](_0x4be0c8['x'](),_0x4be0c8['y'](),_0x4be0c8['z']()),_0x4e7eeb['pointOther']['set'](_0x2f9223['x'](),_0x2f9223['y'](),_0x2f9223['z']()),_0x4e7eeb['point']['set'](_0x44f201['x'](),_0x44f201['y'](),_0x44f201['z']()),_0x4e7eeb['normal']['set'](_0x39a7c2['x'](),_0x39a7c2['y'](),_0x39a7c2['z']()),_0x4e7eeb['impulse']=_0x42b45d['getApplied'+'Impulse'](),_0x4e7eeb;}['_createSin'+'gleContact'+'Result'](_0x41e119,_0x10fac7,_0xed142e){const _0x33d7b5=this['singleCont'+'actResultP'+'ool']['allocate']();return _0x33d7b5['a']=_0x41e119,_0x33d7b5['b']=_0x10fac7,_0x33d7b5['localPoint'+'A']=_0xed142e['localPoint'],_0x33d7b5['localPoint'+'B']=_0xed142e['localPoint'+'Other'],_0x33d7b5['pointA']=_0xed142e['point'],_0x33d7b5['pointB']=_0xed142e['pointOther'],_0x33d7b5['normal']=_0xed142e['normal'],_0x33d7b5['impulse']=_0xed142e['impulse'],_0x33d7b5;}['_createCon'+'tactResult'](_0x5a67e5,_0x144924){const _0x5cce10=this['contactRes'+'ultPool']['allocate']();return _0x5cce10['other']=_0x5a67e5,_0x5cce10['contacts']=_0x144924,_0x5cce10;}['_cleanOldC'+'ollisions'](){for(const _0x5169da in this['collisions'])if(this['collisions']['hasOwnProp'+'erty'](_0x5169da)){const _0x29ad9a=this['frameColli'+'sions'][_0x5169da],_0x2733ca=this['collisions'][_0x5169da],_0x2c7116=_0x2733ca['entity'],_0x251b69=_0x2c7116['collision'],_0x54516f=_0x2c7116['rigidbody'],_0xd76558=_0x2733ca['others'];let _0x232701=_0xd76558['length'];for(;_0x232701--;){const _0x3f2f8f=_0xd76558[_0x232701];(!_0x29ad9a||_0x29ad9a['others']['indexOf'](_0x3f2f8f)<-0x95a+0x15*-0x29+0xcb7)&&(_0xd76558['splice'](_0x232701,0xcfb+-0x11f0+0x4f6),_0x2c7116['trigger']?(_0x251b69&&_0x251b69['fire']('triggerlea'+'ve',_0x3f2f8f),_0x3f2f8f['rigidbody']&&_0x3f2f8f['rigidbody']['fire']('triggerlea'+'ve',_0x2c7116)):_0x3f2f8f['trigger']||(_0x54516f&&_0x54516f['fire']('collisione'+'nd',_0x3f2f8f),_0x251b69&&_0x251b69['fire']('collisione'+'nd',_0x3f2f8f)));}_0xd76558['length']===0x1664+-0x654+-0x1010&&delete this['collisions'][_0x5169da];}}['_hasContac'+'tEvent'](_0x22ff9d){const _0x56ab4e=_0x22ff9d['collision'];if(_0x56ab4e&&(_0x56ab4e['hasEvent']('collisions'+'tart')||_0x56ab4e['hasEvent']('collisione'+'nd')||_0x56ab4e['hasEvent']('contact')))return!(-0x260a+-0x757+-0x2d61*-0x1);const _0x2dac40=_0x22ff9d['rigidbody'];return _0x2dac40&&(_0x2dac40['hasEvent']('collisions'+'tart')||_0x2dac40['hasEvent']('collisione'+'nd')||_0x2dac40['hasEvent']('contact'));}['_checkForC'+'ollisions'](_0x3c4a6f,_0x39792a){const _0x14d078=Ammo['wrapPointe'+'r'](_0x3c4a6f,Ammo['btDynamics'+'World'])['getDispatc'+'her'](),_0x235415=_0x14d078['getNumMani'+'folds']();this['frameColli'+'sions']={};for(let _0x35f4a6=-0x3e4+-0x158*-0x1+0x4*0xa3;_0x35f4a6<_0x235415;_0x35f4a6++){const _0x583266=_0x14d078['getManifol'+'dByIndexIn'+'ternal'](_0x35f4a6),_0x287eab=_0x583266['getBody0'](),_0x41e061=_0x583266['getBody1'](),_0xa231f=Ammo['castObject'](_0x287eab,Ammo['btRigidBod'+'y']),_0x230945=Ammo['castObject'](_0x41e061,Ammo['btRigidBod'+'y']),_0x2e5876=_0xa231f['entity'],_0x2fef6c=_0x230945['entity'];if(!_0x2e5876||!_0x2fef6c)continue;const _0x421c54=_0xa231f['getCollisi'+'onFlags'](),_0x42a66f=_0x230945['getCollisi'+'onFlags'](),_0x5385e1=_0x583266['getNumCont'+'acts'](),_0x284f9f=[],_0x28bd99=[];let _0x47da85;if(_0x5385e1>0x1ead+0xa69+-0x2916){if(_0x421c54&Po||_0x42a66f&Po){const _0x485fa6=_0x2e5876['collision']&&(_0x2e5876['collision']['hasEvent']('triggerent'+'er')||_0x2e5876['collision']['hasEvent']('triggerlea'+'ve')),_0x5583c6=_0x2fef6c['collision']&&(_0x2fef6c['collision']['hasEvent']('triggerent'+'er')||_0x2fef6c['collision']['hasEvent']('triggerlea'+'ve')),_0x44595d=_0x2e5876['rigidbody']&&(_0x2e5876['rigidbody']['hasEvent']('triggerent'+'er')||_0x2e5876['rigidbody']['hasEvent']('triggerlea'+'ve')),_0x278045=_0x2fef6c['rigidbody']&&(_0x2fef6c['rigidbody']['hasEvent']('triggerent'+'er')||_0x2fef6c['rigidbody']['hasEvent']('triggerlea'+'ve'));_0x485fa6&&(_0x47da85=this['_storeColl'+'ision'](_0x2e5876,_0x2fef6c),_0x47da85&&!(_0x42a66f&Po)&&_0x2e5876['collision']['fire']('triggerent'+'er',_0x2fef6c)),_0x5583c6&&(_0x47da85=this['_storeColl'+'ision'](_0x2fef6c,_0x2e5876),_0x47da85&&!(_0x421c54&Po)&&_0x2fef6c['collision']['fire']('triggerent'+'er',_0x2e5876)),_0x44595d&&(_0x47da85||(_0x47da85=this['_storeColl'+'ision'](_0x2fef6c,_0x2e5876)),_0x47da85&&_0x2e5876['rigidbody']['fire']('triggerent'+'er',_0x2fef6c)),_0x278045&&(_0x47da85||(_0x47da85=this['_storeColl'+'ision'](_0x2e5876,_0x2fef6c)),_0x47da85&&_0x2fef6c['rigidbody']['fire']('triggerent'+'er',_0x2e5876));}else{const _0x225066=this['_hasContac'+'tEvent'](_0x2e5876),_0x365e01=this['_hasContac'+'tEvent'](_0x2fef6c),_0x314d71=this['hasEvent']('contact');if(_0x314d71||_0x225066||_0x365e01){for(let _0x44e58c=0x4a3+-0x1a89+-0x15e6*-0x1;_0x44e58c<_0x5385e1;_0x44e58c++){const _0x4e78b8=_0x583266['getContact'+'Point'](_0x44e58c),_0x5414a9=this['_createCon'+'tactPointF'+'romAmmo'](_0x4e78b8);if(_0x225066||_0x365e01){_0x284f9f['push'](_0x5414a9);const _0x86c2e5=this['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x4e78b8);_0x28bd99['push'](_0x86c2e5);}if(_0x314d71){const _0x1e094f=this['_createSin'+'gleContact'+'Result'](_0x2e5876,_0x2fef6c,_0x5414a9);this['fire']('contact',_0x1e094f);}}if(_0x225066){const _0x545f11=this['_createCon'+'tactResult'](_0x2fef6c,_0x284f9f);_0x47da85=this['_storeColl'+'ision'](_0x2e5876,_0x2fef6c),_0x2e5876['collision']&&(_0x2e5876['collision']['fire']('contact',_0x545f11),_0x47da85&&_0x2e5876['collision']['fire']('collisions'+'tart',_0x545f11)),_0x2e5876['rigidbody']&&(_0x2e5876['rigidbody']['fire']('contact',_0x545f11),_0x47da85&&_0x2e5876['rigidbody']['fire']('collisions'+'tart',_0x545f11));}if(_0x365e01){const _0x3dae52=this['_createCon'+'tactResult'](_0x2e5876,_0x28bd99);_0x47da85=this['_storeColl'+'ision'](_0x2fef6c,_0x2e5876),_0x2fef6c['collision']&&(_0x2fef6c['collision']['fire']('contact',_0x3dae52),_0x47da85&&_0x2fef6c['collision']['fire']('collisions'+'tart',_0x3dae52)),_0x2fef6c['rigidbody']&&(_0x2fef6c['rigidbody']['fire']('contact',_0x3dae52),_0x47da85&&_0x2fef6c['rigidbody']['fire']('collisions'+'tart',_0x3dae52));}}}}}this['_cleanOldC'+'ollisions'](),this['contactPoi'+'ntPool']['freeAll'](),this['contactRes'+'ultPool']['freeAll'](),this['singleCont'+'actResultP'+'ool']['freeAll']();}['onUpdate'](_0x1df482){let _0x141892,_0xab4202;this['_stats']['physicsSta'+'rt']=de(),this['_gravityFl'+'oat32'][-0x1c3*-0x9+-0x1*-0x8cb+0xc53*-0x2]=this['gravity']['x'],this['_gravityFl'+'oat32'][-0xa89+-0x12c1*0x2+-0x1ec*-0x19]=this['gravity']['y'],this['_gravityFl'+'oat32'][0xc*-0x179+0x6b*0x56+-0x1*0x1244]=this['gravity']['z'];const _0x2ae48c=this['dynamicsWo'+'rld']['getGravity']();(_0x2ae48c['x']()!==this['_gravityFl'+'oat32'][0xc11+0xaa3*0x3+-0x2bfa]||_0x2ae48c['y']()!==this['_gravityFl'+'oat32'][-0x13*0x47+-0x1*-0x161b+-0x1*0x10d5]||_0x2ae48c['z']()!==this['_gravityFl'+'oat32'][-0x563*0x1+-0x44e+0x9b3])&&(_0x2ae48c['setValue'](this['gravity']['x'],this['gravity']['y'],this['gravity']['z']),this['dynamicsWo'+'rld']['setGravity'](_0x2ae48c));const _0x455a7a=this['_triggers'];for(_0x141892=-0x151e+-0x1*-0x1f1b+-0x1*0x9fd,_0xab4202=_0x455a7a['length'];_0x141892<_0xab4202;_0x141892++)_0x455a7a[_0x141892]['updateTran'+'sform']();const _0x2bdaa2=this['_compounds'];for(_0x141892=-0x5df+-0x10*0xbf+-0x2f*-0x61,_0xab4202=_0x2bdaa2['length'];_0x141892<_0xab4202;_0x141892++)_0x2bdaa2[_0x141892]['_updateCom'+'pound']();const _0xafd070=this['_kinematic'];for(_0x141892=-0x5ba+-0x85*0x16+0x1128,_0xab4202=_0xafd070['length'];_0x141892<_0xab4202;_0x141892++)_0xafd070[_0x141892]['_updateKin'+'ematic']();this['dynamicsWo'+'rld']['stepSimula'+'tion'](_0x1df482,this['maxSubStep'+'s'],this['fixedTimeS'+'tep']);const _0x57710c=this['_dynamic'];for(_0x141892=0xd17*0x1+0x102+-0xe19,_0xab4202=_0x57710c['length'];_0x141892<_0xab4202;_0x141892++)_0x57710c[_0x141892]['_updateDyn'+'amic']();this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']||this['_checkForC'+'ollisions'](Ammo['getPointer'](this['dynamicsWo'+'rld']),_0x1df482),this['_stats']['physicsTim'+'e']=de()-this['_stats']['physicsSta'+'rt'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),typeof Ammo<'u'&&(Ammo['destroy'](this['dynamicsWo'+'rld']),Ammo['destroy'](this['solver']),Ammo['destroy'](this['overlappin'+'gPairCache']),Ammo['destroy'](this['dispatcher']),Ammo['destroy'](this['collisionC'+'onfigurati'+'on']),Ammo['destroy'](Mi),Ammo['destroy'](Di),this['dynamicsWo'+'rld']=null,this['solver']=null,this['overlappin'+'gPairCache']=null,this['dispatcher']=null,this['collisionC'+'onfigurati'+'on']=null,Mi=null,Di=null,bs['onAppDestr'+'oy']());}}h(wm,'EVENT_CONT'+'ACT','contact'),we['_buildAcce'+'ssors'](bs['prototype'],o0);const Za='none',qO='blend',tS=new te();class l0 extends we{constructor(_0x1aca2d,_0x26e1d3){super(_0x1aca2d,_0x26e1d3),this['_resolutio'+'n']=new J(-0x166d+-0x4a3*0x6+0x34bf,-0x564+0xba5+0xb7*-0x7),this['_reference'+'Resolution']=new J(0x258b+-0x26dc+0x3d1,-0xfa9*0x1+0xcb0+0x439),this['_scaleMode']=Za,this['scale']=0x16b0+0x29*0xda+-0x5*0xb85,this['_scaleBlen'+'d']=0x261d+0x1c9+-0x13f3*0x2+0.5,this['_priority']=-0x204a+-0x1*-0x189b+0x7af,this['_screenSpa'+'ce']=!(-0x11e*-0x10+0x8e7*-0x3+-0x27*-0x3a),this['cull']=this['_screenSpa'+'ce'],this['_screenMat'+'rix']=new te(),this['_elements']=new Set(),_0x1aca2d['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this);}['syncDrawOr'+'der'](){this['system']['queueDrawO'+'rderSync'](this['entity']['getGuid'](),this['_processDr'+'awOrderSyn'+'c'],this);}['_recurseDr'+'awOrderSyn'+'c'](_0x4d0f85,_0x1484c5){var _0x66b6a2;if(!(_0x4d0f85 instanceof lt))return _0x1484c5;if(_0x4d0f85['element']){const _0x4331c9=_0x4d0f85['element']['drawOrder'];_0x4d0f85['element']['drawOrder']=_0x1484c5++,_0x4d0f85['element']['_batchGrou'+'pId']>=-0x1677+0x9a4+0xcd3&&_0x4331c9!==_0x4d0f85['element']['drawOrder']&&((_0x66b6a2=this['system']['app']['batcher'])==null||_0x66b6a2['markGroupD'+'irty'](_0x4d0f85['element']['_batchGrou'+'pId']));}_0x4d0f85['particlesy'+'stem']&&(_0x4d0f85['particlesy'+'stem']['drawOrder']=_0x1484c5++);const _0xc049b3=_0x4d0f85['children'];for(let _0x35870a=0x4*-0x364+-0x3e*0x8a+-0x184*-0x1f;_0x35870a<_0xc049b3['length'];_0x35870a++)_0x1484c5=this['_recurseDr'+'awOrderSyn'+'c'](_0xc049b3[_0x35870a],_0x1484c5);return _0x1484c5;}['_processDr'+'awOrderSyn'+'c'](){this['_recurseDr'+'awOrderSyn'+'c'](this['entity'],0xa*-0x84+-0x1280+0x17a9),this['fire']('syncdrawor'+'der');}['_calcProje'+'ctionMatri'+'x'](){const _0x27cede=this['_resolutio'+'n']['x']/this['scale'],_0x1c6412=this['_resolutio'+'n']['y']/this['scale'],_0xe9b464=-0xd25+0x659+0x6cc,_0xc98679=_0x27cede,_0x2e3bc8=-_0x1c6412;this['_screenMat'+'rix']['setOrtho'](_0xe9b464,_0xc98679,_0x2e3bc8,0x3*0x2e3+0x58d*0x2+0x13c3*-0x1,0x1e83+0x333+-0x21b5,-(0x1b23+0x449*0x4+-0x2*0x1623)),this['_screenSpa'+'ce']||(tS['setScale']((0x2307+0x475*0x2+0x1*-0x2bf1+0.5)*_0x27cede,(0xa*0x1b0+0x23+-0x1103+0.5)*_0x1c6412,0x2*0x1f+0xd3b+-0xd78),this['_screenMat'+'rix']['mul2'](tS,this['_screenMat'+'rix']));}['_updateSca'+'le'](){this['scale']=this['_calcScale'](this['_resolutio'+'n'],this['referenceR'+'esolution']);}['_calcScale'](_0x3ad2dc,_0x5b7b0a){const _0x29d7f5=Math['log2']((_0x3ad2dc['x']||-0x24bf+-0x36c*0xa+0x3*0x17a8)/_0x5b7b0a['x']),_0x13c34d=Math['log2']((_0x3ad2dc['y']||-0xc45*0x3+0x2*0x11d7+0x122)/_0x5b7b0a['y']);return Math['pow'](0x644*0x2+0x24fc+-0x3182*0x1,_0x29d7f5*(-0x20d9+0x2*-0x514+0x2b02-this['_scaleBlen'+'d'])+_0x13c34d*this['_scaleBlen'+'d']);}['_onResize'](_0xe44713,_0x4020c5){this['_screenSpa'+'ce']&&(this['_resolutio'+'n']['set'](_0xe44713,_0x4020c5),this['resolution']=this['_resolutio'+'n']);}['_bindEleme'+'nt'](_0x31ec77){this['_elements']['add'](_0x31ec77);}['_unbindEle'+'ment'](_0x36b03f){this['_elements']['delete'](_0x36b03f);}['onRemove'](){this['system']['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['fire']('remove'),this['_elements']['forEach'](_0x4592b2=>_0x4592b2['_onScreenR'+'emove']()),this['_elements']['clear'](),this['off']();}set['resolution'](_0x294ce7){this['_screenSpa'+'ce']?this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']):this['_resolutio'+'n']['set'](_0x294ce7['x'],_0x294ce7['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:resolu'+'tion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x608d77=>_0x608d77['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['resolution'](){return this['_resolutio'+'n'];}set['referenceR'+'esolution'](_0x1582cb){this['_reference'+'Resolution']['set'](_0x1582cb['x'],_0x1582cb['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:refere'+'nceresolut'+'ion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x12aedc=>_0x12aedc['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['referenceR'+'esolution'](){return this['_scaleMode']===Za?this['_resolutio'+'n']:this['_reference'+'Resolution'];}set['screenSpac'+'e'](_0x183c76){this['_screenSpa'+'ce']=_0x183c76,this['_screenSpa'+'ce']&&this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']),this['resolution']=this['_resolutio'+'n'],this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:screen'+'space',this['_screenSpa'+'ce']),this['_elements']['forEach'](_0x218e79=>_0x218e79['_onScreenS'+'paceChange']());}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['scaleMode'](_0x45bae6){_0x45bae6!==Za&&_0x45bae6!==qO&&(_0x45bae6=Za),!this['_screenSpa'+'ce']&&_0x45bae6!==Za&&(_0x45bae6=Za),this['_scaleMode']=_0x45bae6,this['resolution']=this['_resolutio'+'n'],this['fire']('set:scalem'+'ode',this['_scaleMode']);}get['scaleMode'](){return this['_scaleMode'];}set['scaleBlend'](_0x54a9f5){this['_scaleBlen'+'d']=_0x54a9f5,this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:scaleb'+'lend',this['_scaleBlen'+'d']),this['_elements']['forEach'](_0x32f1a0=>_0x32f1a0['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['scaleBlend'](){return this['_scaleBlen'+'d'];}set['priority'](_0x84a571){_0x84a571>0x461*-0x1+0x7*-0x6f+-0x869*-0x1&&(w['warn']('Clamping\x20s'+'creen\x20prio'+'rity\x20from\x20'+_0x84a571+'\x20to\x20255'),_0x84a571=0x710+0x33*0x11+0x6e*-0x16),this['_priority']!==_0x84a571&&(this['_priority']=_0x84a571,this['syncDrawOr'+'der']());}get['priority'](){return this['_priority'];}}class jO{constructor(){this['enabled']=!(0x3b*-0x2b+0x262f+0x292*-0xb);}}const Uu=['enabled'];class YO extends ct{constructor(_0x30b794){super(_0x30b794),this['id']='screen',this['ComponentT'+'ype']=l0,this['DataType']=jO,this['schema']=Uu,this['windowReso'+'lution']=new J(),this['_drawOrder'+'SyncQueue']=new fx(),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['initialize'+'ComponentD'+'ata'](_0x20637b,_0x19fce7,_0x549c67){_0x19fce7['priority']!==void(0x683+0x229e+-0x2921)&&(_0x20637b['priority']=_0x19fce7['priority']),_0x19fce7['screenSpac'+'e']!==void(0x8e*-0x4+-0x1928+0x1b60)&&(_0x20637b['screenSpac'+'e']=_0x19fce7['screenSpac'+'e']),_0x20637b['cull']=_0x20637b['screenSpac'+'e'],_0x19fce7['scaleMode']!==void(0x18eb*0x1+0x8ef*-0x1+-0xffc)&&(_0x20637b['scaleMode']=_0x19fce7['scaleMode']),_0x19fce7['scaleBlend']!==void(-0x73*0x2e+0x141e+0xa*0xe)&&(_0x20637b['scaleBlend']=_0x19fce7['scaleBlend']),_0x19fce7['resolution']!==void(0x4*-0x6a7+-0x13*-0x3b+0x32d*0x7)&&(_0x19fce7['resolution']instanceof J?_0x20637b['_resolutio'+'n']['copy'](_0x19fce7['resolution']):_0x20637b['_resolutio'+'n']['set'](_0x19fce7['resolution'][0x1de2+-0x1*0x17d6+-0x60c],_0x19fce7['resolution'][0x2137+-0x230+-0xd1*0x26]),_0x20637b['resolution']=_0x20637b['_resolutio'+'n']),_0x19fce7['referenceR'+'esolution']!==void(0x903+-0x121a*-0x2+0x2d37*-0x1)&&(_0x19fce7['referenceR'+'esolution']instanceof J?_0x20637b['_reference'+'Resolution']['copy'](_0x19fce7['referenceR'+'esolution']):_0x20637b['_reference'+'Resolution']['set'](_0x19fce7['referenceR'+'esolution'][-0xd*-0xe+-0xa04+0x6*0x18d],_0x19fce7['referenceR'+'esolution'][-0x1132+0x8cd+0x866]),_0x20637b['referenceR'+'esolution']=_0x20637b['_reference'+'Resolution']),_0x20637b['syncDrawOr'+'der'](),super['initialize'+'ComponentD'+'ata'](_0x20637b,_0x19fce7,Uu);}['destroy'](){super['destroy'](),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this);}['_onUpdate'](_0x523a34){const _0x4cde0a=this['store'];for(const _0x4b5483 in _0x4cde0a)_0x4cde0a[_0x4b5483]['entity']['screen']['update']&&_0x4cde0a[_0x4b5483]['entity']['screen']['update'](_0x523a34);}['_onResize'](_0x58da17,_0x5d9d44){this['windowReso'+'lution']['x']=_0x58da17,this['windowReso'+'lution']['y']=_0x5d9d44;}['cloneCompo'+'nent'](_0x19184c,_0xe9a44a){const _0x51ad4d=_0x19184c['screen'];return this['addCompone'+'nt'](_0xe9a44a,{'enabled':_0x51ad4d['enabled'],'screenSpace':_0x51ad4d['screenSpac'+'e'],'scaleMode':_0x51ad4d['scaleMode'],'resolution':_0x51ad4d['resolution']['clone'](),'referenceResolution':_0x51ad4d['referenceR'+'esolution']['clone']()});}['onRemoveCo'+'mponent'](_0x39c95d,_0x550949){_0x550949['onRemove']();}['processDra'+'wOrderSync'+'Queue'](){const _0x3a34e1=this['_drawOrder'+'SyncQueue']['list']();for(let _0x4fe5e7=-0xee6*-0x1+-0x809+-0x6dd*0x1;_0x4fe5e7<_0x3a34e1['length'];_0x4fe5e7++){const _0x2f3270=_0x3a34e1[_0x4fe5e7];_0x2f3270['callback']['call'](_0x2f3270['scope']);}this['_drawOrder'+'SyncQueue']['clear']();}['queueDrawO'+'rderSync'](_0x3d1569,_0x17b769,_0x4c9cde){this['_drawOrder'+'SyncQueue']['list']()['length']||this['app']['once']('prerender',this['processDra'+'wOrderSync'+'Queue'],this),this['_drawOrder'+'SyncQueue']['has'](_0x3d1569)||this['_drawOrder'+'SyncQueue']['push'](_0x3d1569,{'callback':_0x17b769,'scope':_0x4c9cde});}}we['_buildAcce'+'ssors'](l0['prototype'],Uu);const lr=new J(),sS=new D(),Hr=new Dn(),iS=new QS(),rS=new D(),vo=new D(),KO=new le(),ZO={'x':'y','y':'x'};class Go extends me{constructor(_0x10ac1f,_0x8070f7){if(super(),!_0x10ac1f||!(_0x10ac1f instanceof hs))throw new Error('Element\x20wa'+'s\x20null\x20or\x20'+'not\x20an\x20Ele'+'mentCompon'+'ent');if(_0x8070f7&&_0x8070f7!=='x'&&_0x8070f7!=='y')throw new Error('Unrecogniz'+'ed\x20axis:\x20'+_0x8070f7);this['_element']=_0x10ac1f,this['_app']=_0x10ac1f['system']['app'],this['_axis']=_0x8070f7||null,this['_enabled']=!(0x1b32+-0x58*-0x3d+-0x302a),this['_dragScale']=new D(),this['_dragStart'+'MousePosit'+'ion']=new D(),this['_dragStart'+'HandlePosi'+'tion']=new D(),this['_deltaMous'+'ePosition']=new D(),this['_deltaHand'+'lePosition']=new D(),this['_isDraggin'+'g']=!(-0x712*-0x1+-0x6*0x4a7+0x14d9),this['_toggleLif'+'ecycleList'+'eners']('on');}['_toggleLif'+'ecycleList'+'eners'](_0x313ae1){this['_element'][_0x313ae1]('mousedown',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x313ae1]('touchstart',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x313ae1]('selectstar'+'t',this['_onMouseDo'+'wnOrTouchS'+'tart'],this);}['_toggleDra'+'gListeners'](_0x41a377){const _0x27dcca=_0x41a377==='on';this['_hasDragLi'+'steners']&&_0x27dcca||(this['_app']['mouse']&&(this['_element'][_0x41a377]('mousemove',this['_onMove'],this),this['_element'][_0x41a377]('mouseup',this['_onMouseUp'+'OrTouchEnd'],this)),Ae['touch']&&(this['_element'][_0x41a377]('touchmove',this['_onMove'],this),this['_element'][_0x41a377]('touchend',this['_onMouseUp'+'OrTouchEnd'],this),this['_element'][_0x41a377]('touchcance'+'l',this['_onMouseUp'+'OrTouchEnd'],this)),this['_element'][_0x41a377]('selectmove',this['_onMove'],this),this['_element'][_0x41a377]('selectend',this['_onMouseUp'+'OrTouchEnd'],this),this['_hasDragLi'+'steners']=_0x27dcca);}['_onMouseDo'+'wnOrTouchS'+'tart'](_0x2d7f1e){if(this['_element']&&!this['_isDraggin'+'g']&&this['enabled']){this['_dragCamer'+'a']=_0x2d7f1e['camera'],this['_calculate'+'DragScale']();const _0x5eea44=this['_screenToL'+'ocal'](_0x2d7f1e);_0x5eea44&&(this['_toggleDra'+'gListeners']('on'),this['_isDraggin'+'g']=!(0x1*-0x13d5+-0x12fd*-0x1+0xc*0x12),this['_dragStart'+'MousePosit'+'ion']['copy'](_0x5eea44),this['_dragStart'+'HandlePosi'+'tion']['copy'](this['_element']['entity']['getLocalPo'+'sition']()),this['fire']('drag:start'));}}['_onMouseUp'+'OrTouchEnd'](){this['_isDraggin'+'g']&&(this['_isDraggin'+'g']=!(0x3e3*0x1+-0x12c+-0x2b6),this['_toggleDra'+'gListeners']('off'),this['fire']('drag:end'));}['_screenToL'+'ocal'](_0x2b778b){return _0x2b778b['inputSourc'+'e']?Hr['set'](_0x2b778b['inputSourc'+'e']['getOrigin'](),_0x2b778b['inputSourc'+'e']['getDirecti'+'on']()):(this['_determine'+'InputPosit'+'ion'](_0x2b778b),this['_chooseRay'+'OriginAndD'+'irection']()),rS['copy'](this['_element']['entity']['forward'])['mulScalar'](-(0x817*0x1+0x2489+-0x2c9f)),iS['setFromPoi'+'ntNormal'](this['_element']['entity']['getPositio'+'n'](),rS),iS['intersects'+'Ray'](Hr,vo)?(KO['copy'](this['_element']['entity']['getRotatio'+'n']())['invert']()['transformV'+'ector'](vo,vo),vo['mul'](this['_dragScale']),vo):null;}['_determine'+'InputPosit'+'ion'](_0x4b4560){const _0x4f8f25=this['_app']['graphicsDe'+'vice']['maxPixelRa'+'tio'];typeof _0x4b4560['x']<'u'&&typeof _0x4b4560['y']<'u'?(lr['x']=_0x4b4560['x']*_0x4f8f25,lr['y']=_0x4b4560['y']*_0x4f8f25):_0x4b4560['changedTou'+'ches']?(lr['x']=_0x4b4560['changedTou'+'ches'][-0x2395+-0x1aaa+0x5*0xc73]['x']*_0x4f8f25,lr['y']=_0x4b4560['changedTou'+'ches'][-0x1d15+0x6eb+0x162a]['y']*_0x4f8f25):console['warn']('Could\x20not\x20'+'determine\x20'+'position\x20f'+'rom\x20input\x20'+'event');}['_chooseRay'+'OriginAndD'+'irection'](){this['_element']['screen']&&this['_element']['screen']['screen']['screenSpac'+'e']?(Hr['origin']['set'](lr['x'],-lr['y'],0x22*0x91+-0x1*0x182a+0x9d*0x8),Hr['direction']['copy'](D['FORWARD'])):(sS['copy'](this['_dragCamer'+'a']['screenToWo'+'rld'](lr['x'],lr['y'],0x1*-0x21a6+0xf3d*-0x2+-0x4021*-0x1)),Hr['origin']['copy'](this['_dragCamer'+'a']['entity']['getPositio'+'n']()),Hr['direction']['copy'](sS)['sub'](Hr['origin'])['normalize']());}['_calculate'+'DragScale'](){let _0xa01e84=this['_element']['entity']['parent'];const _0x58d9f0=this['_element']['screen']&&this['_element']['screen']['screen'],_0x161d74=_0x58d9f0&&_0x58d9f0['screenSpac'+'e'],_0x216856=_0x161d74?_0x58d9f0['scale']:0x22cd+0xff2+-0x32be,_0x180532=this['_dragScale'];for(_0x180532['set'](_0x216856,_0x216856,_0x216856);_0xa01e84&&(_0x180532['mul'](_0xa01e84['getLocalSc'+'ale']()),_0xa01e84=_0xa01e84['parent'],!(_0x161d74&&_0xa01e84['screen'])););_0x180532['x']=(0x2174+0x607+-0x277a)/_0x180532['x'],_0x180532['y']=(-0x13*0x93+0x2191+-0x16a7)/_0x180532['y'],_0x180532['z']=0x1b87+0x29d+0x4*-0x789;}['_onMove'](_0x15214c){const {_element:_0x1496e6,_deltaMousePosition:_0x554c5b,_deltaHandlePosition:_0x57058f,_axis:_0x4f667e}=this;if(_0x1496e6&&this['_isDraggin'+'g']&&this['enabled']&&_0x1496e6['enabled']&&_0x1496e6['entity']['enabled']){const _0x295a24=this['_screenToL'+'ocal'](_0x15214c);if(_0x295a24){if(_0x554c5b['sub2'](_0x295a24,this['_dragStart'+'MousePosit'+'ion']),_0x57058f['add2'](this['_dragStart'+'HandlePosi'+'tion'],_0x554c5b),_0x4f667e){const _0x783e50=_0x1496e6['entity']['getLocalPo'+'sition'](),_0x500d36=ZO[_0x4f667e];_0x57058f[_0x500d36]=_0x783e50[_0x500d36];}_0x1496e6['entity']['setLocalPo'+'sition'](_0x57058f),this['fire']('drag:move',_0x57058f);}}}['destroy'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleDra'+'gListeners']('off');}set['enabled'](_0x187285){this['_enabled']=_0x187285;}get['enabled'](){return this['_enabled'];}get['isDragging'](){return this['_isDraggin'+'g'];}}h(Go,'EVENT_DRAG'+'START','drag:start'),h(Go,'EVENT_DRAG'+'END','drag:end'),h(Go,'EVENT_DRAG'+'MOVE','drag:move');const QO=0x489*0x3+0x838+-0x1*0x15d3,aS=0x1*0x17dd+0x18ce*0x1+0x30aa*-0x1,JO=-0x1b9f*0x1+0x1480+0x721,eF=0x18f4+0x2435*0x1+0x3*-0x1463,tF=0x38c*0x1+-0x2225*-0x1+-0x25b0,xo=new J();class c0 extends we{constructor(_0x80692e,_0x274108){super(_0x80692e,_0x274108),h(this,'_viewportE'+'ntity',null),h(this,'_contentEn'+'tity',null),h(this,'_horizonta'+'lScrollbar'+'Entity',null),h(this,'_verticalS'+'crollbarEn'+'tity',null),h(this,'_evtElemen'+'tRemove',null),h(this,'_evtViewpo'+'rtElementR'+'emove',null),h(this,'_evtViewpo'+'rtResize',null),h(this,'_evtConten'+'tEntityEle'+'mentAdd',null),h(this,'_evtConten'+'tElementRe'+'move',null),h(this,'_evtConten'+'tResize',null),h(this,'_evtHorizo'+'ntalScroll'+'barAdd',null),h(this,'_evtHorizo'+'ntalScroll'+'barRemove',null),h(this,'_evtHorizo'+'ntalScroll'+'barValue',null),h(this,'_evtVertic'+'alScrollba'+'rAdd',null),h(this,'_evtVertic'+'alScrollba'+'rRemove',null),h(this,'_evtVertic'+'alScrollba'+'rValue',null),(this['_scrollbar'+'UpdateFlag'+'s']={},this['_scrollbar'+'Entities']={},this['_prevConte'+'ntSizes']={},this['_prevConte'+'ntSizes'][Ce]=null,this['_prevConte'+'ntSizes'][je]=null,this['_scroll']=new J(),this['_velocity']=new D(),this['_dragStart'+'Position']=new D(),this['_disabledC'+'ontentInpu'+'t']=!(-0x2*0x19+0x26*-0x10+0x293),this['_disabledC'+'ontentInpu'+'tEntities']=[],this['_toggleLif'+'ecycleList'+'eners']('on'),this['_toggleEle'+'mentListen'+'ers']('on'));}get['data'](){const _0x28c199=this['system']['store'][this['entity']['getGuid']()];return _0x28c199?_0x28c199['data']:null;}set['enabled'](_0x55061d){this['_setValue']('enabled',_0x55061d);}get['enabled'](){return this['data']['enabled'];}set['horizontal'](_0x476805){this['_setValue']('horizontal',_0x476805);}get['horizontal'](){return this['data']['horizontal'];}set['vertical'](_0x52fbee){this['_setValue']('vertical',_0x52fbee);}get['vertical'](){return this['data']['vertical'];}set['scrollMode'](_0x295b1b){this['_setValue']('scrollMode',_0x295b1b);}get['scrollMode'](){return this['data']['scrollMode'];}set['bounceAmou'+'nt'](_0x14bf7d){this['_setValue']('bounceAmou'+'nt',_0x14bf7d);}get['bounceAmou'+'nt'](){return this['data']['bounceAmou'+'nt'];}set['friction'](_0x4c2139){this['_setValue']('friction',_0x4c2139);}get['friction'](){return this['data']['friction'];}set['dragThresh'+'old'](_0x1acd20){this['_setValue']('dragThresh'+'old',_0x1acd20);}get['dragThresh'+'old'](){return this['data']['dragThresh'+'old'];}set['useMouseWh'+'eel'](_0x2da8f1){this['_setValue']('useMouseWh'+'eel',_0x2da8f1);}get['useMouseWh'+'eel'](){return this['data']['useMouseWh'+'eel'];}set['mouseWheel'+'Sensitivit'+'y'](_0x4769a1){this['_setValue']('mouseWheel'+'Sensitivit'+'y',_0x4769a1);}get['mouseWheel'+'Sensitivit'+'y'](){return this['data']['mouseWheel'+'Sensitivit'+'y'];}set['horizontal'+'ScrollbarV'+'isibility'](_0x378973){this['_setValue']('horizontal'+'ScrollbarV'+'isibility',_0x378973);}get['horizontal'+'ScrollbarV'+'isibility'](){return this['data']['horizontal'+'ScrollbarV'+'isibility'];}set['verticalSc'+'rollbarVis'+'ibility'](_0x7ca1ad){this['_setValue']('verticalSc'+'rollbarVis'+'ibility',_0x7ca1ad);}get['verticalSc'+'rollbarVis'+'ibility'](){return this['data']['verticalSc'+'rollbarVis'+'ibility'];}set['viewportEn'+'tity'](_0x510a96){if(this['_viewportE'+'ntity']===_0x510a96)return;const _0x33a7a0=typeof _0x510a96=='string';this['_viewportE'+'ntity']&&_0x33a7a0&&this['_viewportE'+'ntity']['getGuid']()===_0x510a96||(this['_viewportE'+'ntity']&&this['_viewportE'+'ntityUnsub'+'scribe'](),_0x510a96 instanceof Ie?this['_viewportE'+'ntity']=_0x510a96:_0x33a7a0?this['_viewportE'+'ntity']=this['system']['app']['getEntityF'+'romIndex'](_0x510a96)||null:this['_viewportE'+'ntity']=null,this['_viewportE'+'ntity']&&this['_viewportE'+'ntitySubsc'+'ribe'](),this['_viewportE'+'ntity']?this['data']['viewportEn'+'tity']=this['_viewportE'+'ntity']['getGuid']():_0x33a7a0&&_0x510a96&&(this['data']['viewportEn'+'tity']=_0x510a96));}get['viewportEn'+'tity'](){return this['_viewportE'+'ntity'];}set['contentEnt'+'ity'](_0x509c55){if(this['_contentEn'+'tity']===_0x509c55)return;const _0x3b6cee=typeof _0x509c55=='string';this['_contentEn'+'tity']&&_0x3b6cee&&this['_contentEn'+'tity']['getGuid']()===_0x509c55||(this['_contentEn'+'tity']&&this['_contentEn'+'tityUnsubs'+'cribe'](),_0x509c55 instanceof Ie?this['_contentEn'+'tity']=_0x509c55:_0x3b6cee?this['_contentEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x509c55)||null:this['_contentEn'+'tity']=null,this['_contentEn'+'tity']&&this['_contentEn'+'titySubscr'+'ibe'](),this['_contentEn'+'tity']?this['data']['contentEnt'+'ity']=this['_contentEn'+'tity']['getGuid']():_0x3b6cee&&_0x509c55&&(this['data']['contentEnt'+'ity']=_0x509c55));}get['contentEnt'+'ity'](){return this['_contentEn'+'tity'];}set['horizontal'+'ScrollbarE'+'ntity'](_0x57c176){if(this['_horizonta'+'lScrollbar'+'Entity']===_0x57c176)return;const _0x5f0a01=typeof _0x57c176=='string';this['_horizonta'+'lScrollbar'+'Entity']&&_0x5f0a01&&this['_horizonta'+'lScrollbar'+'Entity']['getGuid']()===_0x57c176||(this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](),_0x57c176 instanceof Ie?this['_horizonta'+'lScrollbar'+'Entity']=_0x57c176:_0x5f0a01?this['_horizonta'+'lScrollbar'+'Entity']=this['system']['app']['getEntityF'+'romIndex'](_0x57c176)||null:this['_horizonta'+'lScrollbar'+'Entity']=null,this['_scrollbar'+'Entities'][Ce]=this['_horizonta'+'lScrollbar'+'Entity'],this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](),this['_horizonta'+'lScrollbar'+'Entity']?this['data']['horizontal'+'ScrollbarE'+'ntity']=this['_horizonta'+'lScrollbar'+'Entity']['getGuid']():_0x5f0a01&&_0x57c176&&(this['data']['horizontal'+'ScrollbarE'+'ntity']=_0x57c176));}get['horizontal'+'ScrollbarE'+'ntity'](){return this['_horizonta'+'lScrollbar'+'Entity'];}set['verticalSc'+'rollbarEnt'+'ity'](_0x2eb577){if(this['_verticalS'+'crollbarEn'+'tity']===_0x2eb577)return;const _0x549697=typeof _0x2eb577=='string';this['_verticalS'+'crollbarEn'+'tity']&&_0x549697&&this['_verticalS'+'crollbarEn'+'tity']['getGuid']()===_0x2eb577||(this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](),_0x2eb577 instanceof Ie?this['_verticalS'+'crollbarEn'+'tity']=_0x2eb577:_0x549697?this['_verticalS'+'crollbarEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x2eb577)||null:this['_verticalS'+'crollbarEn'+'tity']=null,this['_scrollbar'+'Entities'][je]=this['_verticalS'+'crollbarEn'+'tity'],this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](),this['_verticalS'+'crollbarEn'+'tity']?this['data']['verticalSc'+'rollbarEnt'+'ity']=this['_verticalS'+'crollbarEn'+'tity']['getGuid']():_0x549697&&_0x2eb577&&(this['data']['verticalSc'+'rollbarEnt'+'ity']=_0x2eb577));}get['verticalSc'+'rollbarEnt'+'ity'](){return this['_verticalS'+'crollbarEn'+'tity'];}set['scroll'](_0x4c3e1b){this['_onSetScro'+'ll'](_0x4c3e1b['x'],_0x4c3e1b['y']);}get['scroll'](){return this['_scroll'];}['_setValue'](_0x5ef4f1,_0x5a6d3f){const _0x298a10=this['data'],_0x49b295=_0x298a10[_0x5ef4f1];_0x298a10[_0x5ef4f1]=_0x5a6d3f,this['fire']('set',_0x5ef4f1,_0x49b295,_0x5a6d3f);}['_toggleLif'+'ecycleList'+'eners'](_0x47d1d1){this[_0x47d1d1]('set_horizo'+'ntal',this['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'],this),this[_0x47d1d1]('set_vertic'+'al',this['_onSetVert'+'icalScroll'+'ingEnabled'],this),this['entity'][_0x47d1d1]('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this);}['_toggleEle'+'mentListen'+'ers'](_0x188095){if(this['entity']['element']){if(_0x188095==='on'&&this['_hasElemen'+'tListeners'])return;this['entity']['element'][_0x188095]('resize',this['_syncAll'],this),this['entity']['element'][_0x188095]('mousewheel',this['_onMouseWh'+'eel'],this),this['_hasElemen'+'tListeners']=_0x188095==='on';}}['_onElement'+'ComponentA'+'dd'](_0x45d13f){this['_evtElemen'+'tRemove']=this['entity']['element']['once']('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['_toggleEle'+'mentListen'+'ers']('on');}['_onElement'+'ComponentR'+'emove'](_0x120343){var _0x958f0a;(_0x958f0a=this['_evtElemen'+'tRemove'])==null||_0x958f0a['off'](),this['_evtElemen'+'tRemove']=null,this['_toggleEle'+'mentListen'+'ers']('off');}['_viewportE'+'ntitySubsc'+'ribe'](){this['_evtViewpo'+'rtEntityEl'+'ementAdd']=this['_viewportE'+'ntity']['on']('element:ad'+'d',this['_onViewpor'+'tElementGa'+'in'],this),this['_viewportE'+'ntity']['element']&&this['_onViewpor'+'tElementGa'+'in']();}['_viewportE'+'ntityUnsub'+'scribe'](){var _0xe7ae7,_0x430a85;(_0xe7ae7=this['_evtViewpo'+'rtEntityEl'+'ementAdd'])==null||_0xe7ae7['off'](),this['_evtViewpo'+'rtEntityEl'+'ementAdd']=null,(_0x430a85=this['_viewportE'+'ntity'])!=null&&_0x430a85['element']&&this['_onViewpor'+'tElementLo'+'se']();}['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](){const _0x309266=this['_viewportE'+'ntity']['element'];this['_evtViewpo'+'rtElementR'+'emove']=_0x309266['once']('beforeremo'+'ve',this['_onViewpor'+'tElementLo'+'se'],this),this['_evtViewpo'+'rtResize']=_0x309266['on']('resize',this['_syncAll'],this);}['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe'](){var _0x10f6cf,_0x3b04a8;(_0x10f6cf=this['_evtViewpo'+'rtElementR'+'emove'])==null||_0x10f6cf['off'](),this['_evtViewpo'+'rtElementR'+'emove']=null,(_0x3b04a8=this['_evtViewpo'+'rtResize'])==null||_0x3b04a8['off'](),this['_evtViewpo'+'rtResize']=null;}['_onViewpor'+'tElementGa'+'in'](){this['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](),this['_syncAll']();}['_onViewpor'+'tElementLo'+'se'](){this['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe']();}['_contentEn'+'titySubscr'+'ibe'](){this['_evtConten'+'tEntityEle'+'mentAdd']=this['_contentEn'+'tity']['on']('element:ad'+'d',this['_onContent'+'ElementGai'+'n'],this),this['_contentEn'+'tity']['element']&&this['_onContent'+'ElementGai'+'n']();}['_contentEn'+'tityUnsubs'+'cribe'](){var _0xc12ba4,_0x44180d;(_0xc12ba4=this['_evtConten'+'tEntityEle'+'mentAdd'])==null||_0xc12ba4['off'](),this['_evtConten'+'tEntityEle'+'mentAdd']=null,(_0x44180d=this['_contentEn'+'tity'])!=null&&_0x44180d['element']&&this['_onContent'+'ElementLos'+'e']();}['_contentEn'+'tityElemen'+'tSubscribe'](){const _0x26c97d=this['_contentEn'+'tity']['element'];this['_evtConten'+'tElementRe'+'move']=_0x26c97d['once']('beforeremo'+'ve',this['_onContent'+'ElementLos'+'e'],this),this['_evtConten'+'tResize']=_0x26c97d['on']('resize',this['_syncAll'],this);}['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](){var _0x2f972d,_0x2517ae;(_0x2f972d=this['_evtConten'+'tElementRe'+'move'])==null||_0x2f972d['off'](),this['_evtConten'+'tElementRe'+'move']=null,(_0x2517ae=this['_evtConten'+'tResize'])==null||_0x2517ae['off'](),this['_evtConten'+'tResize']=null;}['_onContent'+'ElementGai'+'n'](){this['_contentEn'+'tityElemen'+'tSubscribe'](),this['_destroyDr'+'agHelper'](),this['_contentDr'+'agHelper']=new Go(this['_contentEn'+'tity']['element']),this['_contentDr'+'agHelper']['on']('drag:start',this['_onContent'+'DragStart'],this),this['_contentDr'+'agHelper']['on']('drag:end',this['_onContent'+'DragEnd'],this),this['_contentDr'+'agHelper']['on']('drag:move',this['_onContent'+'DragMove'],this),this['_prevConte'+'ntSizes'][Ce]=null,this['_prevConte'+'ntSizes'][je]=null,this['_syncAll']();}['_onContent'+'ElementLos'+'e'](){this['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](),this['_destroyDr'+'agHelper']();}['_onContent'+'DragStart'](){this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&this['_dragStart'+'Position']['copy'](this['_contentEn'+'tity']['getLocalPo'+'sition']());}['_onContent'+'DragEnd'](){this['_prevConte'+'ntDragPosi'+'tion']=null,this['_enableCon'+'tentInput']();}['_onContent'+'DragMove'](_0x5c1ac4){if(this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&(this['_wasDragge'+'d']=!(-0x1d*0x110+0x5*-0xaf+0x223b),this['_setScroll'+'FromConten'+'tPosition'](_0x5c1ac4),this['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x5c1ac4),!this['_disabledC'+'ontentInpu'+'t'])){const _0x1a2c7d=_0x5c1ac4['x']-this['_dragStart'+'Position']['x'],_0x16ddb6=_0x5c1ac4['y']-this['_dragStart'+'Position']['y'];(Math['abs'](_0x1a2c7d)>this['dragThresh'+'old']||Math['abs'](_0x16ddb6)>this['dragThresh'+'old'])&&this['_disableCo'+'ntentInput']();}}['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](){this['_evtHorizo'+'ntalScroll'+'barAdd']=this['_horizonta'+'lScrollbar'+'Entity']['on']('scrollbar:'+'add',this['_onHorizon'+'talScrollb'+'arGain'],this),this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arGain']();}['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](){this['_evtVertic'+'alScrollba'+'rAdd']=this['_verticalS'+'crollbarEn'+'tity']['on']('scrollbar:'+'add',this['_onVertica'+'lScrollbar'+'Gain'],this),this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Gain']();}['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](){var _0x492361;(_0x492361=this['_evtHorizo'+'ntalScroll'+'barAdd'])==null||_0x492361['off'](),this['_evtHorizo'+'ntalScroll'+'barAdd']=null,this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arLose']();}['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](){var _0xba24e0;(_0xba24e0=this['_evtVertic'+'alScrollba'+'rAdd'])==null||_0xba24e0['off'](),this['_evtVertic'+'alScrollba'+'rAdd']=null,this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Lose']();}['_onSetHori'+'zontalScro'+'llbarValue'](_0x4053a8){!this['_scrollbar'+'UpdateFlag'+'s'][Ce]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](_0x4053a8,null);}['_onSetVert'+'icalScroll'+'barValue'](_0xc2e8ba){!this['_scrollbar'+'UpdateFlag'+'s'][je]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](null,_0xc2e8ba);}['_onHorizon'+'talScrollb'+'arGain'](){var _0x4b8816;const _0x247279=(_0x4b8816=this['_horizonta'+'lScrollbar'+'Entity'])==null?void(0x1*-0x14fb+0x3*-0xa37+-0x33a*-0x10):_0x4b8816['scrollbar'];this['_evtHorizo'+'ntalScroll'+'barRemove']=_0x247279['on']('beforeremo'+'ve',this['_onHorizon'+'talScrollb'+'arLose'],this),this['_evtHorizo'+'ntalScroll'+'barValue']=_0x247279['on']('set:value',this['_onSetHori'+'zontalScro'+'llbarValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](Ce),this['_syncScrol'+'lbarPositi'+'on'](Ce);}['_onVertica'+'lScrollbar'+'Gain'](){var _0x33f0dc;const _0x133ecb=(_0x33f0dc=this['_verticalS'+'crollbarEn'+'tity'])==null?void(0x30a*0x1+0xdbc*-0x1+-0x559*-0x2):_0x33f0dc['scrollbar'];this['_evtVertic'+'alScrollba'+'rRemove']=_0x133ecb['on']('beforeremo'+'ve',this['_onVertica'+'lScrollbar'+'Lose'],this),this['_evtVertic'+'alScrollba'+'rValue']=_0x133ecb['on']('set:value',this['_onSetVert'+'icalScroll'+'barValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](je),this['_syncScrol'+'lbarPositi'+'on'](je);}['_onHorizon'+'talScrollb'+'arLose'](){var _0x252f77,_0x2e7e84;(_0x252f77=this['_evtHorizo'+'ntalScroll'+'barRemove'])==null||_0x252f77['off'](),this['_evtHorizo'+'ntalScroll'+'barRemove']=null,(_0x2e7e84=this['_evtHorizo'+'ntalScroll'+'barValue'])==null||_0x2e7e84['off'](),this['_evtHorizo'+'ntalScroll'+'barValue']=null;}['_onVertica'+'lScrollbar'+'Lose'](){var _0x87fd38,_0x10a207;(_0x87fd38=this['_evtVertic'+'alScrollba'+'rRemove'])==null||_0x87fd38['off'](),this['_evtVertic'+'alScrollba'+'rRemove']=null,(_0x10a207=this['_evtVertic'+'alScrollba'+'rValue'])==null||_0x10a207['off'](),this['_evtVertic'+'alScrollba'+'rValue']=null;}['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'](){this['_syncScrol'+'lbarEnable'+'dState'](Ce);}['_onSetVert'+'icalScroll'+'ingEnabled'](){this['_syncScrol'+'lbarEnable'+'dState'](je);}['_onSetScro'+'ll'](_0x1c1bb3,_0x2f47f6,_0x1c053a){_0x1c053a!==!(-0xc73*-0x2+0x201+0x2*-0xd73)&&this['_velocity']['set'](-0x3a1+0x132d*0x2+-0x22b9,0x297*0x1+0x2*0x100e+-0x22b3,-0xce4+0x31*0x4d+-0x1*0x1d9);const _0xa4921c=this['_updateAxi'+'s'](_0x1c1bb3,'x',Ce),_0x282362=this['_updateAxi'+'s'](_0x2f47f6,'y',je);(_0xa4921c||_0x282362)&&this['fire']('set:scroll',this['_scroll']);}['_updateAxi'+'s'](_0x4eecce,_0x465705,_0x4af70b){const _0x237258=_0x4eecce!==null&&Math['abs'](_0x4eecce-this['_scroll'][_0x465705])>0x19b*-0x16+-0x359+-0x209*-0x13+0.00001;return(_0x237258||this['_isDraggin'+'g']()||_0x4eecce===-0x51*-0x33+-0x14d6+0x4b3)&&(this['_scroll'][_0x465705]=this['_determine'+'NewScrollV'+'alue'](_0x4eecce,_0x465705,_0x4af70b),this['_syncConte'+'ntPosition'](_0x4af70b),this['_syncScrol'+'lbarPositi'+'on'](_0x4af70b)),_0x237258;}['_determine'+'NewScrollV'+'alue'](_0x3f74bb,_0x169bad,_0x2eb992){if(!this['_getScroll'+'ingEnabled'](_0x2eb992))return this['_scroll'][_0x169bad];switch(this['scrollMode']){case QO:return Y['clamp'](_0x3f74bb,0x2c7+-0x2656+-0x1*-0x238f,this['_getMaxScr'+'ollValue'](_0x2eb992));case aS:return this['_setVeloci'+'tyFromOver'+'shoot'](_0x3f74bb,_0x169bad,_0x2eb992),_0x3f74bb;case JO:return _0x3f74bb;default:return console['warn']('Unhandled\x20'+'scroll\x20mod'+'e:'+this['scrollMode']),_0x3f74bb;}}['_syncAll'](){this['_syncConte'+'ntPosition'](Ce),this['_syncConte'+'ntPosition'](je),this['_syncScrol'+'lbarPositi'+'on'](Ce),this['_syncScrol'+'lbarPositi'+'on'](je),this['_syncScrol'+'lbarEnable'+'dState'](Ce),this['_syncScrol'+'lbarEnable'+'dState'](je);}['_syncConte'+'ntPosition'](_0x3b0883){if(!this['_contentEn'+'tity'])return;const _0x2309e2=this['_getAxis'](_0x3b0883),_0x4e960b=this['_getSign'](_0x3b0883),_0x4583ef=this['_prevConte'+'ntSizes'][_0x3b0883],_0x486919=this['_getConten'+'tSize'](_0x3b0883);if(_0x4583ef!==null&&Math['abs'](_0x4583ef-_0x486919)>0x1*0x14b1+0x624+-0x1ad5+0.0001){const _0xfa154c=this['_getMaxOff'+'set'](_0x3b0883,_0x4583ef),_0x478277=this['_getMaxOff'+'set'](_0x3b0883,_0x486919);_0x478277===-0x2512+-0x7*-0x68+0x223a?this['_scroll'][_0x2309e2]=-0xfdd+-0x187a+0x2858:this['_scroll'][_0x2309e2]=Y['clamp'](this['_scroll'][_0x2309e2]*_0xfa154c/_0x478277,0x5*-0x6a1+-0x1*0x529+0x1*0x264e,-0xb10+0x1*-0xab1+0x15c2);}const _0xbf071e=this['_scroll'][_0x2309e2]*this['_getMaxOff'+'set'](_0x3b0883),_0x1a1b06=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x1a1b06[_0x2309e2]=_0xbf071e*_0x4e960b,this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x1a1b06),this['_prevConte'+'ntSizes'][_0x3b0883]=_0x486919;}['_syncScrol'+'lbarPositi'+'on'](_0x5495ef){const _0x40ffee=this['_scrollbar'+'Entities'][_0x5495ef];if(!(_0x40ffee!=null&&_0x40ffee['scrollbar']))return;const _0x4d2f5d=this['_getAxis'](_0x5495ef);this['_scrollbar'+'UpdateFlag'+'s'][_0x5495ef]=!(-0x611+-0x2b*0x6d+0xf0*0x1a),_0x40ffee['scrollbar']['value']=this['_scroll'][_0x4d2f5d],_0x40ffee['scrollbar']['handleSize']=this['_getScroll'+'barHandleS'+'ize'](_0x4d2f5d,_0x5495ef),this['_scrollbar'+'UpdateFlag'+'s'][_0x5495ef]=!(-0x1*-0xce5+0x9b2+-0x1696);}['_syncScrol'+'lbarEnable'+'dState'](_0xa69aef){const _0x20ac55=this['_scrollbar'+'Entities'][_0xa69aef];if(!_0x20ac55)return;const _0x45d958=this['_getScroll'+'ingEnabled'](_0xa69aef),_0x5d8d3b=this['_getScroll'+'barVisibil'+'ity'](_0xa69aef);switch(_0x5d8d3b){case eF:_0x20ac55['enabled']=_0x45d958;return;case tF:_0x20ac55['enabled']=_0x45d958&&this['_contentIs'+'LargerThan'+'Viewport'](_0xa69aef);return;default:console['warn']('Unhandled\x20'+'scrollbar\x20'+'visibility'+':'+_0x5d8d3b),_0x20ac55['enabled']=_0x45d958;}}['_contentIs'+'LargerThan'+'Viewport'](_0x47e2aa){return this['_getConten'+'tSize'](_0x47e2aa)>this['_getViewpo'+'rtSize'](_0x47e2aa);}['_contentPo'+'sitionToSc'+'rollValue'](_0x2bdcc2){const _0x415cb7=this['_getMaxOff'+'set'](Ce),_0x1ba277=this['_getMaxOff'+'set'](je);return _0x415cb7===-0x4*0x15b+0x1*-0x11e7+-0x1*-0x1753?xo['x']=0x171a+-0x1673+-0xa7*0x1:xo['x']=_0x2bdcc2['x']/_0x415cb7,_0x1ba277===0x129d*-0x1+0x214f+-0xeb2?xo['y']=0x16bf*-0x1+0xab7+0x4d*0x28:xo['y']=_0x2bdcc2['y']/-_0x1ba277,xo;}['_getMaxOff'+'set'](_0x35ed10,_0x237aae){_0x237aae=_0x237aae===void(-0x1416+0x174f+0xa5*-0x5)?this['_getConten'+'tSize'](_0x35ed10):_0x237aae;const _0x3400bd=this['_getViewpo'+'rtSize'](_0x35ed10);return _0x237aae<_0x3400bd?-this['_getViewpo'+'rtSize'](_0x35ed10):_0x3400bd-_0x237aae;}['_getMaxScr'+'ollValue'](_0x29b849){return this['_contentIs'+'LargerThan'+'Viewport'](_0x29b849)?0x9*0x216+-0x1937*0x1+0x672:0x124f*0x2+0x11*0x22d+-0x499b;}['_getScroll'+'barHandleS'+'ize'](_0x407f0b,_0x5c2837){const _0x14b247=this['_getViewpo'+'rtSize'](_0x5c2837),_0x5502ec=this['_getConten'+'tSize'](_0x5c2837);if(Math['abs'](_0x5502ec)<0x17bd+0x222+-0x19df+0.001)return-0x2284+0xf1c*0x1+0x1369;const _0x43e8d6=Math['min'](_0x14b247/_0x5502ec,0x20c5*0x1+0x49e+-0x2562),_0x15b12f=this['_toOversho'+'ot'](this['_scroll'][_0x407f0b],_0x5c2837);return _0x15b12f===0x14*0x1ad+0xb7*-0x11+0x71f*-0x3?_0x43e8d6:_0x43e8d6/(0x2f*0xf+0xb15+-0xdd5+Math['abs'](_0x15b12f));}['_getViewpo'+'rtSize'](_0x579766){return this['_getSize'](_0x579766,this['_viewportE'+'ntity']);}['_getConten'+'tSize'](_0x941dd7){return this['_getSize'](_0x941dd7,this['_contentEn'+'tity']);}['_getSize'](_0xa3888c,_0x19afcf){return _0x19afcf!=null&&_0x19afcf['element']?_0x19afcf['element'][this['_getCalcul'+'atedDimens'+'ion'](_0xa3888c)]:-0xe33+-0x1e7b*0x1+0x2cae;}['_getScroll'+'ingEnabled'](_0x189da1){if(_0x189da1===Ce)return this['horizontal'];if(_0x189da1===je)return this['vertical'];w['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x189da1);}['_getScroll'+'barVisibil'+'ity'](_0x450cf3){if(_0x450cf3===Ce)return this['horizontal'+'ScrollbarV'+'isibility'];if(_0x450cf3===je)return this['verticalSc'+'rollbarVis'+'ibility'];w['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x450cf3);}['_getSign'](_0x356770){return _0x356770===Ce?-0x15*-0x57+0x1*0x241d+-0x2b3f:-(-0x1*-0x1352+-0x22fd+0xfac);}['_getAxis'](_0x356d59){return _0x356d59===Ce?'x':'y';}['_getCalcul'+'atedDimens'+'ion'](_0x204f53){return _0x204f53===Ce?'calculated'+'Width':'calculated'+'Height';}['_destroyDr'+'agHelper'](){this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['destroy']();}['onUpdate'](){this['_contentEn'+'tity']&&(this['_updateVel'+'ocity'](),this['_syncScrol'+'lbarEnable'+'dState'](Ce),this['_syncScrol'+'lbarEnable'+'dState'](je));}['_updateVel'+'ocity'](){if(!this['_isDraggin'+'g']()){if(this['scrollMode']===aS&&(this['_hasOversh'+'oot']('x',Ce)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['x'],'x',Ce),this['_hasOversh'+'oot']('y',je)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['y'],'y',je)),Math['abs'](this['_velocity']['x'])>0xa*0x191+0x441*-0x5+0x7*0xcd+0.0001||Math['abs'](this['_velocity']['y'])>-0x22e6+0x2265+0x81+0.0001){const _0x467230=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x467230['x']+=this['_velocity']['x'],_0x467230['y']+=this['_velocity']['y'],this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x467230),this['_setScroll'+'FromConten'+'tPosition'](_0x467230);}this['_velocity']['x']*=-0x140e+-0x17d+0x158c-this['friction'],this['_velocity']['y']*=0x1*-0x9b7+-0x3*0x4a7+0x17ad-this['friction'];}}['_hasOversh'+'oot'](_0x29b731,_0xc38447){return Math['abs'](this['_toOversho'+'ot'](this['scroll'][_0x29b731],_0xc38447))>-0x94*0x2f+0x445+0x16e7+0.001;}['_toOversho'+'ot'](_0x4e9653,_0x585bca){const _0x2f013a=this['_getMaxScr'+'ollValue'](_0x585bca);return _0x4e9653<-0x389*-0xa+-0x1d0d+0x1*-0x64d?_0x4e9653:_0x4e9653>_0x2f013a?_0x4e9653-_0x2f013a:0x4*0x293+0x3*0x907+-0x2561;}['_setVeloci'+'tyFromOver'+'shoot'](_0x25921c,_0x1c683f,_0x1112b7){const _0x5aaaa5=this['_toOversho'+'ot'](_0x25921c,_0x1112b7)*this['_getMaxOff'+'set'](_0x1112b7)*this['_getSign'](_0x1112b7);Math['abs'](_0x5aaaa5)>-0x1*0x4f9+0x18eb+-0x13f2&&(this['_velocity'][_0x1c683f]=-_0x5aaaa5/(this['bounceAmou'+'nt']*(-0x1*0xc3b+0x1*-0x9c5+0x3*0x766)+(0x1eb*0xf+-0x2de*0x4+-0x5c4*0x3)));}['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x91eaf3){this['_prevConte'+'ntDragPosi'+'tion']?(this['_velocity']['sub2'](_0x91eaf3,this['_prevConte'+'ntDragPosi'+'tion']),this['_prevConte'+'ntDragPosi'+'tion']['copy'](_0x91eaf3)):(this['_velocity']['set'](-0xbe4+0x6ca+0x51a,-0x21f6+0xce+0x4*0x84a,0x573+-0xc*0x4+0x1*-0x543),this['_prevConte'+'ntDragPosi'+'tion']=_0x91eaf3['clone']());}['_setScroll'+'FromConten'+'tPosition'](_0x27d90c){let _0x1186c6=this['_contentPo'+'sitionToSc'+'rollValue'](_0x27d90c);this['_isDraggin'+'g']()&&(_0x1186c6=this['_applyScro'+'llValueTen'+'sion'](_0x1186c6)),this['_onSetScro'+'ll'](_0x1186c6['x'],_0x1186c6['y'],!(0xaef+-0x1a5c+0xf6e));}['_applyScro'+'llValueTen'+'sion'](_0x42d139){let _0x5b0076=this['_getMaxScr'+'ollValue'](Ce),_0x441fe7=this['_toOversho'+'ot'](_0x42d139['x'],Ce);return _0x441fe7>0x241*-0x1+-0xa60+0xca1?_0x42d139['x']=_0x5b0076+(-0x2*0xe57+0x1167+0x98*0x13)*Math['log10'](0x16*-0x79+0xd0e*0x2+0x1*-0xfb5+_0x441fe7):_0x441fe7<-0x2147+0x3b*-0x49+0x321a&&(_0x42d139['x']=-(0xfa5+0x4*-0x6f3+0xc28*0x1)*Math['log10'](-0x75e+-0x3a*-0x71+-0x167*0xd-_0x441fe7)),_0x5b0076=this['_getMaxScr'+'ollValue'](je),_0x441fe7=this['_toOversho'+'ot'](_0x42d139['y'],je),_0x441fe7>0x28d+0xa*-0x49+0x4d?_0x42d139['y']=_0x5b0076+(-0x1*-0x2a5+0x26d5+0xdd3*-0x3)*Math['log10'](-0x336*-0xc+0x694+-0x2d1b+_0x441fe7):_0x441fe7<-0x2*0x289+-0x1*0xcb9+0x11cb&&(_0x42d139['y']=-(-0x1c92+-0x1*-0x205f+0x1e6*-0x2)*Math['log10'](-0x25e+0x21be+-0x1f5f-_0x441fe7)),_0x42d139;}['_isDraggin'+'g'](){return this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['isDragging'];}['_setScroll'+'barCompone'+'ntsEnabled'](_0x16f842){var _0x58bbe3,_0xdd2c02;(_0x58bbe3=this['_horizonta'+'lScrollbar'+'Entity'])!=null&&_0x58bbe3['scrollbar']&&(this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']['enabled']=_0x16f842),(_0xdd2c02=this['_verticalS'+'crollbarEn'+'tity'])!=null&&_0xdd2c02['scrollbar']&&(this['_verticalS'+'crollbarEn'+'tity']['scrollbar']['enabled']=_0x16f842);}['_setConten'+'tDraggingE'+'nabled'](_0x5dc45e){this['_contentDr'+'agHelper']&&(this['_contentDr'+'agHelper']['enabled']=_0x5dc45e);}['_onMouseWh'+'eel'](_0x128df4){var _0x16b302;if(!this['useMouseWh'+'eel']||!((_0x16b302=this['_contentEn'+'tity'])!=null&&_0x16b302['element']))return;const _0x179f05=_0x128df4['event'],_0x3bd150=_0x179f05['deltaX']/this['_contentEn'+'tity']['element']['calculated'+'Width']*this['mouseWheel'+'Sensitivit'+'y']['x'],_0x487b=_0x179f05['deltaY']/this['_contentEn'+'tity']['element']['calculated'+'Height']*this['mouseWheel'+'Sensitivit'+'y']['y'],_0x56255d=Y['clamp'](this['_scroll']['x']+_0x3bd150,0x2b*0xd+-0x1*-0x1cc7+-0x1ef6,this['_getMaxScr'+'ollValue'](Ce)),_0xd876a7=Y['clamp'](this['_scroll']['y']+_0x487b,-0x1749+0x1268+0x4e1,this['_getMaxScr'+'ollValue'](je));this['scroll']=new J(_0x56255d,_0xd876a7);}['_enableCon'+'tentInput'](){for(;this['_disabledC'+'ontentInpu'+'tEntities']['length'];){const _0xe6e956=this['_disabledC'+'ontentInpu'+'tEntities']['pop']();_0xe6e956['element']&&(_0xe6e956['element']['useInput']=!(-0x1*0x37c+0x1*0x2353+0x21*-0xf7));}this['_disabledC'+'ontentInpu'+'t']=!(0x1d27*-0x1+0x6bb*-0x1+-0x1*-0x23e3);}['_disableCo'+'ntentInput'](){const _0x521071=_0x2eecaf=>{_0x2eecaf['element']&&_0x2eecaf['element']['useInput']&&(this['_disabledC'+'ontentInpu'+'tEntities']['push'](_0x2eecaf),_0x2eecaf['element']['useInput']=!(-0xf*0x161+0x1e39+-0x989));const _0xc8013f=_0x2eecaf['children'];for(let _0x35898f=0x1*-0x22e5+-0x153c+0x3821,_0x39e251=_0xc8013f['length'];_0x35898f<_0x39e251;_0x35898f++)_0x521071(_0xc8013f[_0x35898f]);};if(this['_contentEn'+'tity']){const _0x564759=this['_contentEn'+'tity']['children'];for(let _0x4a7570=-0x11d9+-0x2a8*0x6+0x3*0xb43,_0x51dacc=_0x564759['length'];_0x4a7570<_0x51dacc;_0x4a7570++)_0x521071(_0x564759[_0x4a7570]);}this['_disabledC'+'ontentInpu'+'t']=!(-0x4e9*0x4+0x1*0x18ad+-0x509*0x1);}['onEnable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(0x6*0x52+-0x40f*0x9+0x229b)),this['_setConten'+'tDraggingE'+'nabled'](!(0x7*-0x188+-0x24bd+0x2f75)),this['_syncAll']();}['onDisable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(0xfb5*0x1+0x20e9+-0x309d)),this['_setConten'+'tDraggingE'+'nabled'](!(-0x1e8a+-0x1594+0x341f));}['onRemove'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleEle'+'mentListen'+'ers']('off'),this['_destroyDr'+'agHelper']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x560c39,_0x3b7274){_0x560c39['viewportEn'+'tity']&&(this['viewportEn'+'tity']=_0x3b7274[_0x560c39['viewportEn'+'tity']['getGuid']()]),_0x560c39['contentEnt'+'ity']&&(this['contentEnt'+'ity']=_0x3b7274[_0x560c39['contentEnt'+'ity']['getGuid']()]),_0x560c39['horizontal'+'ScrollbarE'+'ntity']&&(this['horizontal'+'ScrollbarE'+'ntity']=_0x3b7274[_0x560c39['horizontal'+'ScrollbarE'+'ntity']['getGuid']()]),_0x560c39['verticalSc'+'rollbarEnt'+'ity']&&(this['verticalSc'+'rollbarEnt'+'ity']=_0x3b7274[_0x560c39['verticalSc'+'rollbarEnt'+'ity']['getGuid']()]);}}h(c0,'EVENT_SETS'+'CROLL','set:scroll');const sF=0x13*-0x101+0x3*0x5b2+0x207;class iF{constructor(){h(this,'enabled',!(-0xc0b*-0x1+-0x42d+-0x1*0x7de)),h(this,'horizontal'),h(this,'vertical'),h(this,'scrollMode'),h(this,'bounceAmou'+'nt'),h(this,'friction'),h(this,'dragThresh'+'old',sF),h(this,'useMouseWh'+'eel',!(0x13*0x46+0x177c+0x1*-0x1cae)),h(this,'mouseWheel'+'Sensitivit'+'y',new J(0x2309+0x11a*-0x7+-0x1b52,-0x426+-0x20c+-0x45*-0x17)),h(this,'horizontal'+'ScrollbarV'+'isibility',0x85*0x1+-0x705*0x5+0x2294*0x1),h(this,'verticalSc'+'rollbarVis'+'ibility',0x2*0x935+0x4c*0x61+-0x2f36),h(this,'viewportEn'+'tity',null),h(this,'contentEnt'+'ity',null),h(this,'horizontal'+'ScrollbarE'+'ntity',null),h(this,'verticalSc'+'rollbarEnt'+'ity',null);}}const nS=[{'name':'enabled','type':'boolean'},{'name':'horizontal','type':'boolean'},{'name':'vertical','type':'boolean'},{'name':'scrollMode','type':'number'},{'name':'bounceAmou'+'nt','type':'number'},{'name':'friction','type':'number'},{'name':'dragThresh'+'old','type':'number'},{'name':'useMouseWh'+'eel','type':'boolean'},{'name':'mouseWheel'+'Sensitivit'+'y','type':'vec2'},{'name':'horizontal'+'ScrollbarV'+'isibility','type':'number'},{'name':'verticalSc'+'rollbarVis'+'ibility','type':'number'}],rF=0x5cf*0x1+0xb99+0x6*-0x2e5;class aF extends ct{constructor(_0x569e4a){super(_0x569e4a),this['id']='scrollview',this['ComponentT'+'ype']=c0,this['DataType']=iF,this['schema']=nS,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x597b6e,_0x1b8683,_0x325b56){_0x1b8683['dragThresh'+'old']===void(0x2b3*0x8+0xf95*0x1+-0x252d)&&(_0x1b8683['dragThresh'+'old']=rF),_0x1b8683['useMouseWh'+'eel']===void(-0x4f2+0x7*-0x93+0x8f7)&&(_0x1b8683['useMouseWh'+'eel']=!(-0x1fe2+-0x207a*-0x1+0x1*-0x98)),_0x1b8683['mouseWheel'+'Sensitivit'+'y']===void(0x17fa+0x3*-0x5ab+-0x5*0x165)&&(_0x1b8683['mouseWheel'+'Sensitivit'+'y']=new J(-0x218e*-0x1+-0x8f*-0xd+-0x28d0,0xa9b*-0x2+0x1eb8*-0x1+0x33ef)),super['initialize'+'ComponentD'+'ata'](_0x597b6e,_0x1b8683,nS),_0x597b6e['viewportEn'+'tity']=_0x1b8683['viewportEn'+'tity'],_0x597b6e['contentEnt'+'ity']=_0x1b8683['contentEnt'+'ity'],_0x597b6e['horizontal'+'ScrollbarE'+'ntity']=_0x1b8683['horizontal'+'ScrollbarE'+'ntity'],_0x597b6e['verticalSc'+'rollbarEnt'+'ity']=_0x1b8683['verticalSc'+'rollbarEnt'+'ity'];}['onUpdate'](_0x387cfd){const _0x4cc1ce=this['store'];for(const _0x48b464 in _0x4cc1ce){const _0x1e8ed3=_0x4cc1ce[_0x48b464]['entity'],_0x5b4766=_0x1e8ed3['scrollview'];_0x5b4766['enabled']&&_0x1e8ed3['enabled']&&_0x5b4766['onUpdate']();}}['_onRemoveC'+'omponent'](_0x142fe4,_0x4f343c){_0x4f343c['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class h0 extends we{constructor(_0x1bccc6,_0x34c7fc){super(_0x1bccc6,_0x34c7fc),h(this,'_handleEnt'+'ity',null),h(this,'_evtHandle'+'EntityElem'+'entAdd',null),h(this,'_evtHandle'+'EntityChan'+'ges',[]),this['_toggleLif'+'ecycleList'+'eners']('on');}get['data'](){const _0x44911f=this['system']['store'][this['entity']['getGuid']()];return _0x44911f?_0x44911f['data']:null;}set['enabled'](_0x4a896b){this['_setValue']('enabled',_0x4a896b);}get['enabled'](){return this['data']['enabled'];}set['orientatio'+'n'](_0x4a416b){this['_setValue']('orientatio'+'n',_0x4a416b);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['value'](_0x3e88f5){this['_setValue']('value',_0x3e88f5);}get['value'](){return this['data']['value'];}set['handleSize'](_0x50325e){this['_setValue']('handleSize',_0x50325e);}get['handleSize'](){return this['data']['handleSize'];}set['handleEnti'+'ty'](_0x4955d4){if(this['_handleEnt'+'ity']===_0x4955d4)return;const _0x275f50=typeof _0x4955d4=='string';this['_handleEnt'+'ity']&&_0x275f50&&this['_handleEnt'+'ity']['getGuid']()===_0x4955d4||(this['_handleEnt'+'ity']&&this['_handleEnt'+'ityUnsubsc'+'ribe'](),_0x4955d4 instanceof Ie?this['_handleEnt'+'ity']=_0x4955d4:_0x275f50?this['_handleEnt'+'ity']=this['system']['app']['getEntityF'+'romIndex'](_0x4955d4)||null:this['_handleEnt'+'ity']=null,this['_handleEnt'+'ity']&&this['_handleEnt'+'itySubscri'+'be'](),this['_handleEnt'+'ity']?this['data']['handleEnti'+'ty']=this['_handleEnt'+'ity']['getGuid']():_0x275f50&&_0x4955d4&&(this['data']['handleEnti'+'ty']=_0x4955d4));}get['handleEnti'+'ty'](){return this['_handleEnt'+'ity'];}['_setValue'](_0x544d1b,_0x5e13e1){const _0x267dc6=this['data'],_0x2451fd=_0x267dc6[_0x544d1b];_0x267dc6[_0x544d1b]=_0x5e13e1,this['fire']('set',_0x544d1b,_0x2451fd,_0x5e13e1);}['_toggleLif'+'ecycleList'+'eners'](_0x49d811){this[_0x49d811]('set_value',this['_onSetValu'+'e'],this),this[_0x49d811]('set_handle'+'Size',this['_onSetHand'+'leSize'],this),this[_0x49d811]('set_orient'+'ation',this['_onSetOrie'+'ntation'],this);}['_handleEnt'+'itySubscri'+'be'](){this['_evtHandle'+'EntityElem'+'entAdd']=this['_handleEnt'+'ity']['on']('element:ad'+'d',this['_onHandleE'+'lementGain'],this),this['_handleEnt'+'ity']['element']&&this['_onHandleE'+'lementGain']();}['_handleEnt'+'ityUnsubsc'+'ribe'](){var _0x250f9a,_0x3803c4;(_0x250f9a=this['_evtHandle'+'EntityElem'+'entAdd'])==null||_0x250f9a['off'](),this['_evtHandle'+'EntityElem'+'entAdd']=null,(_0x3803c4=this['_handleEnt'+'ity'])!=null&&_0x3803c4['element']&&this['_onHandleE'+'lementLose']();}['_handleEnt'+'ityElement'+'Subscribe'](){const _0x1c08de=this['_handleEnt'+'ity']['element'],_0x59d14f=this['_evtHandle'+'EntityChan'+'ges'];_0x59d14f['push'](_0x1c08de['once']('beforeremo'+'ve',this['_onHandleE'+'lementLose'],this)),_0x59d14f['push'](_0x1c08de['on']('set:anchor',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x59d14f['push'](_0x1c08de['on']('set:margin',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x59d14f['push'](_0x1c08de['on']('set:pivot',this['_onSetHand'+'leAlignmen'+'t'],this));}['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](){for(let _0x4cc519=-0x13ca+-0x1a54+0x2e1e;_0x4cc519<this['_evtHandle'+'EntityChan'+'ges']['length'];_0x4cc519++)this['_evtHandle'+'EntityChan'+'ges'][_0x4cc519]['off']();this['_evtHandle'+'EntityChan'+'ges']['length']=-0xc91*-0x1+-0x1b54+0xec3;}['_onHandleE'+'lementGain'](){this['_handleEnt'+'ityElement'+'Subscribe'](),this['_destroyDr'+'agHelper'](),this['_handleDra'+'gHelper']=new Go(this['_handleEnt'+'ity']['element'],this['_getAxis']()),this['_handleDra'+'gHelper']['on']('drag:move',this['_onHandleD'+'rag'],this),this['_updateHan'+'dlePositio'+'nAndSize']();}['_onHandleE'+'lementLose'](){this['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](),this['_destroyDr'+'agHelper']();}['_onHandleD'+'rag'](_0x435046){this['_handleEnt'+'ity']&&this['enabled']&&this['entity']['enabled']&&(this['value']=this['_handlePos'+'itionToScr'+'ollValue'](_0x435046[this['_getAxis']()]));}['_onSetValu'+'e'](_0x2b4fae,_0x4af990,_0x191a7d){Math['abs'](_0x191a7d-_0x4af990)>-0x1a74+0x2176+-0x2*0x381+0.00001&&(this['data']['value']=Y['clamp'](_0x191a7d,0x737*-0x2+0x1*0x1c6a+-0x14*0xb3,-0xb6*-0x4+0x11d5+-0x14ac),this['_updateHan'+'dlePositio'+'nAndSize'](),this['fire']('set:value',this['data']['value']));}['_onSetHand'+'leSize'](_0x54a3b1,_0xb05f57,_0x551aac){Math['abs'](_0x551aac-_0xb05f57)>-0x1f54+0x35b*-0x5+0x99f*0x5+0.00001&&(this['data']['handleSize']=Y['clamp'](_0x551aac,0x9*0x3df+-0xaab+0x1dc*-0xd,0x2*0xc4d+0x876+-0x210f),this['_updateHan'+'dlePositio'+'nAndSize']());}['_onSetHand'+'leAlignmen'+'t'](){this['_updateHan'+'dlePositio'+'nAndSize']();}['_onSetOrie'+'ntation'](_0x1ec317,_0x1ee535,_0x31a99a){var _0x32451b;_0x31a99a!==_0x1ee535&&((_0x32451b=this['_handleEnt'+'ity'])!=null&&_0x32451b['element'])&&(this['_handleEnt'+'ity']['element'][this['_getOpposi'+'teDimensio'+'n']()]=0x1*0x1b2d+-0x85*-0x17+-0x2720);}['_updateHan'+'dlePositio'+'nAndSize'](){const _0x21ea2c=this['_handleEnt'+'ity'],_0x30178d=_0x21ea2c==null?void(-0x2303+-0x1ba3*0x1+0x14e2*0x3):_0x21ea2c['element'];if(_0x21ea2c){const _0x26e24f=_0x21ea2c['getLocalPo'+'sition']();_0x26e24f[this['_getAxis']()]=this['_getHandle'+'Position'](),_0x21ea2c['setLocalPo'+'sition'](_0x26e24f);}_0x30178d&&(_0x30178d[this['_getDimens'+'ion']()]=this['_getHandle'+'Length']());}['_handlePos'+'itionToScr'+'ollValue'](_0x27c73e){return _0x27c73e*this['_getSign']()/this['_getUsable'+'TrackLengt'+'h']();}['_scrollVal'+'ueToHandle'+'Position'](_0x5161b9){return _0x5161b9*this['_getSign']()*this['_getUsable'+'TrackLengt'+'h']();}['_getUsable'+'TrackLengt'+'h'](){return Math['max'](this['_getTrackL'+'ength']()-this['_getHandle'+'Length'](),-0x27+-0x19*-0x90+-0xde9+0.001);}['_getTrackL'+'ength'](){return this['entity']['element']?this['orientatio'+'n']===Ce?this['entity']['element']['calculated'+'Width']:this['entity']['element']['calculated'+'Height']:0x457*-0x4+0xbbd+0x59f;}['_getHandle'+'Length'](){return this['_getTrackL'+'ength']()*this['handleSize'];}['_getHandle'+'Position'](){return this['_scrollVal'+'ueToHandle'+'Position'](this['value']);}['_getSign'](){return this['orientatio'+'n']===Ce?0x12dc+0x11*0x235+-0x160*0x29:-(0x45d+0x3*0x635+0x9f*-0x25);}['_getAxis'](){return this['orientatio'+'n']===Ce?'x':'y';}['_getDimens'+'ion'](){return this['orientatio'+'n']===Ce?'width':'height';}['_getOpposi'+'teDimensio'+'n'](){return this['orientatio'+'n']===Ce?'height':'width';}['_destroyDr'+'agHelper'](){this['_handleDra'+'gHelper']&&this['_handleDra'+'gHelper']['destroy']();}['_setHandle'+'DraggingEn'+'abled'](_0x3892ae){this['_handleDra'+'gHelper']&&(this['_handleDra'+'gHelper']['enabled']=_0x3892ae);}['onEnable'](){this['_setHandle'+'DraggingEn'+'abled'](!(0x1026+0x7de+-0x1804));}['onDisable'](){this['_setHandle'+'DraggingEn'+'abled'](!(0xc89*-0x1+-0x23fb+0x3085));}['onRemove'](){this['_destroyDr'+'agHelper'](),this['_toggleLif'+'ecycleList'+'eners']('off');}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x434dd2,_0x59286b){_0x434dd2['handleEnti'+'ty']&&(this['handleEnti'+'ty']=_0x59286b[_0x434dd2['handleEnti'+'ty']['getGuid']()]);}}h(h0,'EVENT_SETV'+'ALUE','set:value');class nF{constructor(){h(this,'enabled',!(-0x8a1+0x1079+-0x7d8)),h(this,'orientatio'+'n',Ce),h(this,'value',0x351+0x23b1+0x1*-0x2702),h(this,'handleSize',0xa09*-0x3+0x1979+0x4a2),h(this,'handleEnti'+'ty',null);}}const oS=[{'name':'enabled','type':'boolean'},{'name':'orientatio'+'n','type':'number'},{'name':'value','type':'number'},{'name':'handleSize','type':'number'}];class oF extends ct{constructor(_0x480c1e){super(_0x480c1e),this['id']='scrollbar',this['ComponentT'+'ype']=h0,this['DataType']=nF,this['schema']=oS,this['on']('add',this['_onAddComp'+'onent'],this),this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x395258,_0x245879,_0x2aa94c){super['initialize'+'ComponentD'+'ata'](_0x395258,_0x245879,oS),_0x395258['handleEnti'+'ty']=_0x245879['handleEnti'+'ty'];}['_onAddComp'+'onent'](_0x114ae8){_0x114ae8['fire']('scrollbar:'+'add');}['_onRemoveC'+'omponent'](_0x2ad44e,_0x3e847b){_0x3e847b['onRemove']();}}const lF={'volume':0x0,'pitch':0x0,'loop':!(-0xf13*0x1+0x37d*0x1+0xb97*0x1),'startTime':0x0,'duration':0x0,'position':new D(),'maxDistance':0x0,'refDistance':0x0,'rollOffFactor':0x0,'distanceModel':0x0,'onPlay':null,'onPause':null,'onResume':null,'onStop':null,'onEnd':null};class Gi extends me{constructor(_0x2279ee,_0x2f085c='Untitled',_0x17efcb={}){super(),h(this,'name'),h(this,'instances',[]),(this['_component']=_0x2279ee,this['_assets']=_0x2279ee['system']['app']['assets'],this['_manager']=_0x2279ee['system']['manager'],this['name']=_0x2f085c,this['_volume']=_0x17efcb['volume']!==void(0x2*-0x93d+0x1*-0x2551+0x37cb)?Y['clamp'](Number(_0x17efcb['volume'])||0xbca+0x5f2+-0x11bc,-0x9*-0x200+-0x1af7+0x8f7,-0x19d6+-0x7e+0x1a55):0x4b1*0x1+-0x1*-0xbf9+-0x10a9,this['_pitch']=_0x17efcb['pitch']!==void(-0x44c*-0x1+-0x5c0+0x174)?Math['max'](-0x1*-0x12d1+-0x2dc*-0x4+-0x1*0x1e41+0.01,Number(_0x17efcb['pitch'])||-0x1d86+-0x125b*-0x2+-0x730):-0x9e*0x3+0x79e+0x3b*-0x19,this['_loop']=!!(_0x17efcb['loop']!==void(0x1*-0x1066+-0x1ba*-0x4+-0xf3*-0xa)&&_0x17efcb['loop']),this['_duration']=_0x17efcb['duration']>0x23ba+0x13ae+-0x3768?_0x17efcb['duration']:null,this['_startTime']=Math['max'](-0x152*0x9+0x4*-0x67e+-0x11d*-0x22,Number(_0x17efcb['startTime'])||0x3*-0x7be+-0x158d+0xeed*0x3),this['_overlap']=!!_0x17efcb['overlap'],this['_autoPlay']=!!_0x17efcb['autoPlay'],this['_firstNode']=null,this['_lastNode']=null,this['_asset']=_0x17efcb['asset'],this['_asset']instanceof pe&&(this['_asset']=this['_asset']['id']),this['_onInstanc'+'ePlayHandl'+'er']=this['_onInstanc'+'ePlay']['bind'](this),this['_onInstanc'+'ePauseHand'+'ler']=this['_onInstanc'+'ePause']['bind'](this),this['_onInstanc'+'eResumeHan'+'dler']=this['_onInstanc'+'eResume']['bind'](this),this['_onInstanc'+'eStopHandl'+'er']=this['_onInstanc'+'eStop']['bind'](this),this['_onInstanc'+'eEndHandle'+'r']=this['_onInstanc'+'eEnd']['bind'](this));}['play'](_0x593b46){if(this['overlap']||this['stop'](),!this['isLoaded']&&!this['_hasAsset']()){w['warn']('Trying\x20to\x20'+'play\x20Sound'+'Slot\x20'+this['name']+('\x20but\x20it\x20is'+'\x20not\x20loade'+'d\x20and\x20does'+'n\x27t\x20have\x20a'+'n\x20asset.'));return;}let _0x48b325=_0x593b46;if(_0x48b325||(_0x48b325=this['_createIns'+'tance'](),this['instances']['push'](_0x48b325)),this['isLoaded'])_0x48b325['play']();else{const _0xb5909a=function(_0x2f8a73){const _0x2e2dff=_0x48b325['_playWhenL'+'oaded'];_0x48b325['sound']=_0x2f8a73,_0x2e2dff&&_0x48b325['play']();};this['off']('load',_0xb5909a),this['once']('load',_0xb5909a),this['load']();}return _0x48b325;}['pause'](){let _0xa46fcf=!(-0x1a8*0xa+0x66*-0x57+0x5*0xa3f);const _0x18eaea=this['instances'];for(let _0x3f7761=-0x1645*-0x1+-0x106*-0x22+-0x827*0x7,_0x4294ae=_0x18eaea['length'];_0x3f7761<_0x4294ae;_0x3f7761++)_0x18eaea[_0x3f7761]['pause']()&&(_0xa46fcf=!(-0x807+0x212b+-0x1924));return _0xa46fcf;}['resume'](){let _0x2b88f2=!(0x2*0xe87+-0x658+-0x16b5*0x1);const _0x53c2b8=this['instances'];for(let _0x227af3=-0xabc+0x1535+0x17f*-0x7,_0x891dda=_0x53c2b8['length'];_0x227af3<_0x891dda;_0x227af3++)_0x53c2b8[_0x227af3]['resume']()&&(_0x2b88f2=!(0x157e+0x2576+0x55c*-0xb));return _0x2b88f2;}['stop'](){let _0x3cb121=!(-0x21d+0x5*-0x719+-0x3*-0xc89);const _0x2e68d4=this['instances'];let _0x2d8005=_0x2e68d4['length'];for(;_0x2d8005--;)_0x2e68d4[_0x2d8005]['stop'](),_0x3cb121=!(-0x15c8+0x10ef+0x4d9);return _0x2e68d4['length']=0xc58+-0x15*-0x1d1+-0x205*0x19,_0x3cb121;}['load'](){if(!this['_hasAsset']())return;const _0x4424c8=this['_assets']['get'](this['_asset']);if(!_0x4424c8){this['_assets']['off']('add:'+this['_asset'],this['_onAssetAd'+'d'],this),this['_assets']['once']('add:'+this['_asset'],this['_onAssetAd'+'d'],this);return;}if(_0x4424c8['off']('remove',this['_onAssetRe'+'moved'],this),_0x4424c8['on']('remove',this['_onAssetRe'+'moved'],this),!_0x4424c8['resource']){_0x4424c8['off']('load',this['_onAssetLo'+'ad'],this),_0x4424c8['once']('load',this['_onAssetLo'+'ad'],this),this['_assets']['load'](_0x4424c8);return;}this['fire']('load',_0x4424c8['resource']);}['setExterna'+'lNodes'](_0x476b45,_0x558c29){if(!_0x476b45){console['error']('The\x20firstN'+'ode\x20must\x20h'+'ave\x20a\x20vali'+'d\x20AudioNod'+'e');return;}if(_0x558c29||(_0x558c29=_0x476b45),this['_firstNode']=_0x476b45,this['_lastNode']=_0x558c29,!this['_overlap']){const _0x4f6a06=this['instances'];for(let _0x5ea0b1=0xb*0x2bd+0x1043+0x2*-0x1731,_0x3d7b8d=_0x4f6a06['length'];_0x5ea0b1<_0x3d7b8d;_0x5ea0b1++)_0x4f6a06[_0x5ea0b1]['setExterna'+'lNodes'](_0x476b45,_0x558c29);}}['clearExter'+'nalNodes'](){if(this['_firstNode']=null,this['_lastNode']=null,!this['_overlap']){const _0x19add9=this['instances'];for(let _0x1ab575=-0x2590+-0x2*-0x434+0x18*0x137,_0x3dd7a5=_0x19add9['length'];_0x1ab575<_0x3dd7a5;_0x1ab575++)_0x19add9[_0x1ab575]['clearExter'+'nalNodes']();}}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_hasAsset'](){return this['_asset']!=null;}['_createIns'+'tance'](){let _0x289ee7=null;const _0x3f2b0e=this['_component'];let _0xad8bef=null;if(this['_hasAsset']()){const _0x44f1c9=this['_assets']['get'](this['_asset']);_0x44f1c9&&(_0xad8bef=_0x44f1c9['resource']);}const _0x163a21=lF;return _0x163a21['volume']=this['_volume']*_0x3f2b0e['volume'],_0x163a21['pitch']=this['_pitch']*_0x3f2b0e['pitch'],_0x163a21['loop']=this['_loop'],_0x163a21['startTime']=this['_startTime'],_0x163a21['duration']=this['_duration'],_0x163a21['onPlay']=this['_onInstanc'+'ePlayHandl'+'er'],_0x163a21['onPause']=this['_onInstanc'+'ePauseHand'+'ler'],_0x163a21['onResume']=this['_onInstanc'+'eResumeHan'+'dler'],_0x163a21['onStop']=this['_onInstanc'+'eStopHandl'+'er'],_0x163a21['onEnd']=this['_onInstanc'+'eEndHandle'+'r'],_0x3f2b0e['positional']?(_0x163a21['position']['copy'](_0x3f2b0e['entity']['getPositio'+'n']()),_0x163a21['maxDistanc'+'e']=_0x3f2b0e['maxDistanc'+'e'],_0x163a21['refDistanc'+'e']=_0x3f2b0e['refDistanc'+'e'],_0x163a21['rollOffFac'+'tor']=_0x3f2b0e['rollOffFac'+'tor'],_0x163a21['distanceMo'+'del']=_0x3f2b0e['distanceMo'+'del'],_0x289ee7=new sn(this['_manager'],_0xad8bef,_0x163a21)):_0x289ee7=new As(this['_manager'],_0xad8bef,_0x163a21),this['_firstNode']&&_0x289ee7['setExterna'+'lNodes'](this['_firstNode'],this['_lastNode']),_0x289ee7;}['_onInstanc'+'ePlay'](_0x4588b5){this['fire']('play',_0x4588b5),this['_component']['fire']('play',this,_0x4588b5);}['_onInstanc'+'ePause'](_0xaa1888){this['fire']('pause',_0xaa1888),this['_component']['fire']('pause',this,_0xaa1888);}['_onInstanc'+'eResume'](_0x4b6546){this['fire']('resume',_0x4b6546),this['_component']['fire']('resume',this,_0x4b6546);}['_onInstanc'+'eStop'](_0x5d78f9){const _0x1fdfae=this['instances']['indexOf'](_0x5d78f9);_0x1fdfae!==-(-0x1c9+0x1*-0xa5e+0x614*0x2)&&this['instances']['splice'](_0x1fdfae,0x57*-0x13+0x11ca+-0x74*0x19),this['fire']('stop',_0x5d78f9),this['_component']['fire']('stop',this,_0x5d78f9);}['_onInstanc'+'eEnd'](_0x3a80cf){const _0x48b484=this['instances']['indexOf'](_0x3a80cf);_0x48b484!==-(-0x19b*-0x13+-0x40b*0x8+0x2*0xec)&&this['instances']['splice'](_0x48b484,0xe*0x127+-0x1d0f+0x296*0x5),this['fire']('end',_0x3a80cf),this['_component']['fire']('end',this,_0x3a80cf);}['_onAssetAd'+'d'](_0x233350){this['load']();}['_onAssetLo'+'ad'](_0x16909c){this['load']();}['_onAssetRe'+'moved'](_0x2fe249){_0x2fe249['off']('remove',this['_onAssetRe'+'moved'],this),this['_assets']['off']('add:'+_0x2fe249['id'],this['_onAssetAd'+'d'],this),this['stop']();}['updatePosi'+'tion'](_0x5187c6){const _0x2c3a29=this['instances'];for(let _0x5dcb25=-0xcf7*-0x3+0x1*-0x103d+-0x5*0x488,_0x5aea71=_0x2c3a29['length'];_0x5dcb25<_0x5aea71;_0x5dcb25++)_0x2c3a29[_0x5dcb25]['position']=_0x5187c6;}set['asset'](_0x529ddd){const _0x171780=this['_asset'];if(_0x171780){this['_assets']['off']('add:'+_0x171780,this['_onAssetAd'+'d'],this);const _0x460dd2=this['_assets']['get'](_0x171780);_0x460dd2&&_0x460dd2['off']('remove',this['_onAssetRe'+'moved'],this);}this['_asset']=_0x529ddd,this['_asset']instanceof pe&&(this['_asset']=this['_asset']['id']),this['_hasAsset']()&&this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['load']();}get['asset'](){return this['_asset'];}set['autoPlay'](_0xa9978d){this['_autoPlay']=!!_0xa9978d;}get['autoPlay'](){return this['_autoPlay'];}set['duration'](_0x5849e3){if(this['_duration']=Math['max'](0x102*-0x21+0x5f+0x1*0x20e3,Number(_0x5849e3)||0x1426+-0x17dd+0x3b7)||null,!this['_overlap']){const _0x43096d=this['instances'];for(let _0x1431d8=0x59*-0x52+-0xb5d+0x27df,_0x3ee2ee=_0x43096d['length'];_0x1431d8<_0x3ee2ee;_0x1431d8++)_0x43096d[_0x1431d8]['duration']=this['_duration'];}}get['duration'](){let _0x3a0aaf=-0xe*0x16a+-0x17*-0x1+0x13b5;if(this['_hasAsset']()){const _0x49c1f0=this['_assets']['get'](this['_asset']);_0x3a0aaf=_0x49c1f0!=null&&_0x49c1f0['resource']?_0x49c1f0['resource']['duration']:0x24ea+-0x5*-0x43+-0x2639;}return this['_duration']!=null?this['_duration']%(_0x3a0aaf||-0x2231+0x8d7+0x195b):_0x3a0aaf;}get['isLoaded'](){if(this['_hasAsset']()){const _0x33d61f=this['_assets']['get'](this['_asset']);if(_0x33d61f)return!!_0x33d61f['resource'];}return!(-0x2*-0x79+-0x86*0x43+0x2221);}get['isPaused'](){const _0x346761=this['instances'],_0x4f314d=_0x346761['length'];if(_0x4f314d===-0x265f*0x1+-0x405+0x1*0x2a64)return!(-0xc58+-0x3e*-0xa1+-0x1aa5);for(let _0x4d9538=-0x162*-0x17+0x190f+-0x1*0x38dd;_0x4d9538<_0x4f314d;_0x4d9538++)if(!_0x346761[_0x4d9538]['isPaused'])return!(0x263d+-0xf*0x47+-0x29f*0xd);return!(0x13*0x1d+-0x229d*0x1+0x2076);}get['isPlaying'](){const _0x1dad54=this['instances'];for(let _0x5c2fe0=0x392+0x1294+-0x1626,_0x1ed09a=_0x1dad54['length'];_0x5c2fe0<_0x1ed09a;_0x5c2fe0++)if(_0x1dad54[_0x5c2fe0]['isPlaying'])return!(-0xdfc+0x21c5+-0x1*0x13c9);return!(0x194a+0x1*-0x917+-0x2b3*0x6);}get['isStopped'](){const _0x24efb8=this['instances'];for(let _0x4d7e8e=0x6b9+0x1199+-0x1852,_0x353c93=_0x24efb8['length'];_0x4d7e8e<_0x353c93;_0x4d7e8e++)if(!_0x24efb8[_0x4d7e8e]['isStopped'])return!(-0x18*-0x29+-0x1*0x1e8b+0x1ab4);return!(-0x25c8+-0x1ef9+0x16eb*0x3);}set['loop'](_0x369149){this['_loop']=!!_0x369149;const _0xc40f6=this['instances'];for(let _0x52a856=-0x1117+-0x191a+-0x1*-0x2a31,_0x43e73c=_0xc40f6['length'];_0x52a856<_0x43e73c;_0x52a856++)_0xc40f6[_0x52a856]['loop']=this['_loop'];}get['loop'](){return this['_loop'];}set['overlap'](_0x1009fd){this['_overlap']=!!_0x1009fd;}get['overlap'](){return this['_overlap'];}set['pitch'](_0x508fd3){if(this['_pitch']=Math['max'](Number(_0x508fd3)||-0xafb*0x1+-0x14af+0x1faa,0x115*-0x8+0xcc7*0x3+-0x1dad+0.01),!this['_overlap']){const _0x2cb229=this['instances'];for(let _0x5e8b8a=-0x7*-0x3d9+0x2*0xa2d+0xf*-0x327,_0x469537=_0x2cb229['length'];_0x5e8b8a<_0x469537;_0x5e8b8a++)_0x2cb229[_0x5e8b8a]['pitch']=this['pitch']*this['_component']['pitch'];}}get['pitch'](){return this['_pitch'];}set['startTime'](_0x271cda){if(this['_startTime']=Math['max'](-0x2*0xb9+0x69f+-0x52d*0x1,Number(_0x271cda)||0x7*-0x578+0x2*-0xa75+0x2*0x1d99),!this['_overlap']){const _0x23e6db=this['instances'];for(let _0x1c3b2b=0x224*-0x1+0x1bb4+0xcc8*-0x2,_0x37f625=_0x23e6db['length'];_0x1c3b2b<_0x37f625;_0x1c3b2b++)_0x23e6db[_0x1c3b2b]['startTime']=this['_startTime'];}}get['startTime'](){return this['_startTime'];}set['volume'](_0x178511){if(this['_volume']=Y['clamp'](Number(_0x178511)||0x1ff5+0x3*-0x145+-0xe13*0x2,-0x6*0x207+0x906+0xc*0x43,0xac*0x35+-0x4*0x73d+0x1*-0x6a7),!this['_overlap']){const _0xb9e87a=this['instances'];for(let _0x34bf08=0x3c9+0x2297+-0x2660,_0x535623=_0xb9e87a['length'];_0x34bf08<_0x535623;_0x34bf08++)_0xb9e87a[_0x34bf08]['volume']=this['_volume']*this['_component']['volume'];}}get['volume'](){return this['_volume'];}}h(Gi,'EVENT_PLAY','play'),h(Gi,'EVENT_PAUS'+'E','pause'),h(Gi,'EVENT_RESU'+'ME','resume'),h(Gi,'EVENT_STOP','stop'),h(Gi,'EVENT_END','end'),h(Gi,'EVENT_LOAD','load');class Kr extends we{constructor(){super(...arguments),h(this,'_volume',0x3b*0x6+-0x1d6+0x75),h(this,'_pitch',0x1f17*-0x1+0xd65+0xc5*0x17),h(this,'_positiona'+'l',!(-0x17dd*-0x1+-0xf04+-0x8d9)),h(this,'_refDistan'+'ce',0x12fb+0xcba+0x2*-0xfda),h(this,'_maxDistan'+'ce',0x9*0x5cf+0x302c*0x1+-0x3d63),h(this,'_rollOffFa'+'ctor',-0x1508+-0x1a95+0x2f9e),h(this,'_distanceM'+'odel',Vp),h(this,'_slots',{}),h(this,'_playingBe'+'foreDisabl'+'e',{});}['_updateSou'+'ndInstance'+'s'](_0x805481,_0x1b9117,_0xa8278e){const _0x2d3a80=this['_slots'];for(const _0x52e6d3 in _0x2d3a80){const _0x1ee5cb=_0x2d3a80[_0x52e6d3];if(!_0x1ee5cb['overlap']){const _0x20b987=_0x1ee5cb['instances'];for(let _0xb4a3fc=0x2*-0x7f6+0xfd*-0x4+0x13e0,_0x2e1b97=_0x20b987['length'];_0xb4a3fc<_0x2e1b97;_0xb4a3fc++)_0x20b987[_0xb4a3fc][_0x805481]=_0xa8278e?_0x1ee5cb[_0x805481]*_0x1b9117:_0x1b9117;}}}set['distanceMo'+'del'](_0x12954e){this['_distanceM'+'odel']=_0x12954e,this['_updateSou'+'ndInstance'+'s']('distanceMo'+'del',_0x12954e,!(0x7*-0xe9+-0x19b2+0x5*0x66a));}get['distanceMo'+'del'](){return this['_distanceM'+'odel'];}set['maxDistanc'+'e'](_0x3e41d6){this['_maxDistan'+'ce']=_0x3e41d6,this['_updateSou'+'ndInstance'+'s']('maxDistanc'+'e',_0x3e41d6,!(0xe12+0x13*-0x35+-0xa22));}get['maxDistanc'+'e'](){return this['_maxDistan'+'ce'];}set['refDistanc'+'e'](_0x50ba14){this['_refDistan'+'ce']=_0x50ba14,this['_updateSou'+'ndInstance'+'s']('refDistanc'+'e',_0x50ba14,!(0xed6+-0x14eb+0x616));}get['refDistanc'+'e'](){return this['_refDistan'+'ce'];}set['rollOffFac'+'tor'](_0x1df9c0){this['_rollOffFa'+'ctor']=_0x1df9c0,this['_updateSou'+'ndInstance'+'s']('rollOffFac'+'tor',_0x1df9c0,!(-0x2532+0x1*0xb65+0x19ce*0x1));}get['rollOffFac'+'tor'](){return this['_rollOffFa'+'ctor'];}set['pitch'](_0x778c1e){this['_pitch']=_0x778c1e,this['_updateSou'+'ndInstance'+'s']('pitch',_0x778c1e,!(0x1*-0xb56+-0x3a8*-0x6+0x76*-0x17));}get['pitch'](){return this['_pitch'];}set['volume'](_0x2256d3){this['_volume']=_0x2256d3,this['_updateSou'+'ndInstance'+'s']('volume',_0x2256d3,!(0xca2*0x1+0xc27+-0x87*0x2f));}get['volume'](){return this['_volume'];}set['positional'](_0x3027c5){this['_positiona'+'l']=_0x3027c5;const _0x11ee09=this['_slots'];for(const _0xffb921 in _0x11ee09){const _0x12b5c2=_0x11ee09[_0xffb921];if(!_0x12b5c2['overlap']){const _0x253cb0=_0x12b5c2['instances'],_0x64b821=_0x253cb0['length'];for(let _0x1ad8a1=_0x64b821-(-0x27*-0x15+0x119b*0x1+-0x14cd);_0x1ad8a1>=-0x493*0x1+0x164c+-0x11b9;_0x1ad8a1--){const _0x45e2c5=_0x253cb0[_0x1ad8a1]['isPlaying']||_0x253cb0[_0x1ad8a1]['isSuspende'+'d'],_0x1b8daf=_0x253cb0[_0x1ad8a1]['currentTim'+'e'];_0x45e2c5&&_0x253cb0[_0x1ad8a1]['stop']();const _0x3e84bc=_0x12b5c2['_createIns'+'tance']();_0x45e2c5&&(_0x3e84bc['play'](),_0x3e84bc['currentTim'+'e']=_0x1b8daf),_0x253cb0['push'](_0x3e84bc);}}}}get['positional'](){return this['_positiona'+'l'];}set['slots'](_0x143850){const _0x2ebd57=this['_slots'];if(_0x2ebd57){for(const _0x2fed9a in _0x2ebd57)_0x2ebd57[_0x2fed9a]['stop']();}const _0x11daf0={};for(const _0x5a2b4e in _0x143850)_0x143850[_0x5a2b4e]instanceof Gi?_0x11daf0[_0x143850[_0x5a2b4e]['name']]=_0x143850[_0x5a2b4e]:_0x143850[_0x5a2b4e]['name']&&(_0x11daf0[_0x143850[_0x5a2b4e]['name']]=new Gi(this,_0x143850[_0x5a2b4e]['name'],_0x143850[_0x5a2b4e]));this['_slots']=_0x11daf0,this['enabled']&&this['entity']['enabled']&&this['onEnable']();}get['slots'](){return this['_slots'];}['onEnable'](){if(this['system']['_inTools'])return;const _0x27e6be=this['_slots'],_0x2c8391=this['_playingBe'+'foreDisabl'+'e'];for(const _0x198a43 in _0x27e6be){const _0x540ce4=_0x27e6be[_0x198a43];_0x540ce4['autoPlay']&&_0x540ce4['isStopped']?_0x540ce4['play']():_0x2c8391[_0x198a43]?_0x540ce4['resume']():_0x540ce4['isLoaded']||_0x540ce4['load']();}}['onDisable'](){const _0x353ffb=this['_slots'],_0x12173a={};for(const _0x408d05 in _0x353ffb)_0x353ffb[_0x408d05]['overlap']||_0x353ffb[_0x408d05]['isPlaying']&&(_0x353ffb[_0x408d05]['pause'](),_0x12173a[_0x408d05]=!(0x22a8+-0x1*0x1fe7+-0xeb*0x3));this['_playingBe'+'foreDisabl'+'e']=_0x12173a;}['onRemove'](){this['off']();}['addSlot'](_0xfc3247,_0x288928){const _0x522745=this['_slots'];if(_0x522745[_0xfc3247])return w['warn']('A\x20sound\x20sl'+'ot\x20with\x20na'+'me\x20'+_0xfc3247+('\x20already\x20e'+'xists\x20on\x20E'+'ntity\x20')+this['entity']['path']),null;const _0x550d42=new Gi(this,_0xfc3247,_0x288928);return _0x522745[_0xfc3247]=_0x550d42,_0x550d42['autoPlay']&&this['enabled']&&this['entity']['enabled']&&_0x550d42['play'](),_0x550d42;}['removeSlot'](_0x5cc866){const _0x1a4550=this['_slots'];_0x1a4550[_0x5cc866]&&(_0x1a4550[_0x5cc866]['stop'](),delete _0x1a4550[_0x5cc866]);}['slot'](_0x437ada){return this['_slots'][_0x437ada];}['_getSlotPr'+'operty'](_0x25a7d2,_0x3993ff){if(!this['enabled']||!this['entity']['enabled'])return;const _0x2e5a14=this['_slots'][_0x25a7d2];if(!_0x2e5a14){w['warn']('Trying\x20to\x20'+'get\x20'+_0x3993ff+('\x20from\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20')+_0x25a7d2+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}return _0x2e5a14[_0x3993ff];}['isPlaying'](_0x12c8cd){return this['_getSlotPr'+'operty'](_0x12c8cd,'isPlaying')||!(0x1c7d+0x25c7+-0x4243);}['isLoaded'](_0x52782e){return this['_getSlotPr'+'operty'](_0x52782e,'isLoaded')||!(-0x138*0x2+0x536*0x4+-0x2a1*0x7);}['isPaused'](_0x5c2592){return this['_getSlotPr'+'operty'](_0x5c2592,'isPaused')||!(-0x20f2+0x1e0a+0x2e9);}['isStopped'](_0x4e9fb3){return this['_getSlotPr'+'operty'](_0x4e9fb3,'isStopped')||!(0x21ed+-0x2ef*0x4+-0x1630);}['play'](_0x5ac29b){if(!this['enabled']||!this['entity']['enabled'])return null;const _0x46180d=this['_slots'][_0x5ac29b];return _0x46180d?_0x46180d['play']():(w['warn']('Trying\x20to\x20'+'play\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x5ac29b+('\x20which\x20doe'+'s\x20not\x20exis'+'t')),null);}['pause'](_0x8a3a7a){const _0x20fccd=this['_slots'];if(_0x8a3a7a){const _0x16151b=_0x20fccd[_0x8a3a7a];if(!_0x16151b){w['warn']('Trying\x20to\x20'+'pause\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20'+_0x8a3a7a+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x16151b['pause']();}else{for(const _0x272180 in _0x20fccd)_0x20fccd[_0x272180]['pause']();}}['resume'](_0x1cab0e){const _0x18c3ba=this['_slots'];if(_0x1cab0e){const _0x268ac1=_0x18c3ba[_0x1cab0e];if(!_0x268ac1){w['warn']('Trying\x20to\x20'+'resume\x20sou'+'nd\x20slot\x20wi'+'th\x20name\x20'+_0x1cab0e+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x268ac1['isPaused']&&_0x268ac1['resume']();}else{for(const _0x52107f in _0x18c3ba)_0x18c3ba[_0x52107f]['resume']();}}['stop'](_0x538e3f){const _0x4df47c=this['_slots'];if(_0x538e3f){const _0x3e2461=_0x4df47c[_0x538e3f];if(!_0x3e2461){w['warn']('Trying\x20to\x20'+'stop\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x538e3f+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x3e2461['stop']();}else{for(const _0x28f31c in _0x4df47c)_0x4df47c[_0x28f31c]['stop']();}}}h(Kr,'EVENT_PLAY','play'),h(Kr,'EVENT_PAUS'+'E','pause'),h(Kr,'EVENT_RESU'+'ME','resume'),h(Kr,'EVENT_STOP','stop'),h(Kr,'EVENT_END','end');class cF{constructor(){this['enabled']=!(0x1b04+0x3a*-0x27+-0xb3*0x1a);}}const d0=['enabled'];class hF extends ct{constructor(_0x466392){super(_0x466392),this['id']='sound',this['ComponentT'+'ype']=Kr,this['DataType']=cF,this['schema']=d0,this['manager']=_0x466392['soundManag'+'er'],w['assert'](this['manager'],'SoundCompo'+'nentSystem'+'\x20cannot\x20be'+'\x20created\x20w'+'ithout\x20sou'+'nd\x20manager'),this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['volume'](_0x40433c){this['manager']['volume']=_0x40433c;}get['volume'](){return this['manager']['volume'];}get['context'](){return Dl()?this['manager']['context']:(w['warn']('WARNING:\x20A'+'udio\x20conte'+'xt\x20is\x20not\x20'+'supported\x20'+'on\x20this\x20br'+'owser'),null);}['initialize'+'ComponentD'+'ata'](_0x4ed61a,_0x141e89,_0xf6b7eb){_0xf6b7eb=['volume','pitch','positional','refDistanc'+'e','maxDistanc'+'e','rollOffFac'+'tor','distanceMo'+'del','slots'];for(let _0x46d0b6=-0xb66+0x20c6+-0x1560;_0x46d0b6<_0xf6b7eb['length'];_0x46d0b6++)_0x141e89['hasOwnProp'+'erty'](_0xf6b7eb[_0x46d0b6])&&(_0x4ed61a[_0xf6b7eb[_0x46d0b6]]=_0x141e89[_0xf6b7eb[_0x46d0b6]]);super['initialize'+'ComponentD'+'ata'](_0x4ed61a,_0x141e89,['enabled']);}['cloneCompo'+'nent'](_0x4d9063,_0x1e5ad7){const _0x237a97=_0x4d9063['sound'],_0x1d5277=_0x237a97['slots'],_0x5adcbe={};for(const _0x246a09 in _0x1d5277){const _0x247d69=_0x1d5277[_0x246a09];_0x5adcbe[_0x246a09]={'name':_0x247d69['name'],'volume':_0x247d69['volume'],'pitch':_0x247d69['pitch'],'loop':_0x247d69['loop'],'duration':_0x247d69['duration'],'startTime':_0x247d69['startTime'],'overlap':_0x247d69['overlap'],'autoPlay':_0x247d69['autoPlay'],'asset':_0x247d69['asset']};}const _0x32a970={'distanceModel':_0x237a97['distanceMo'+'del'],'enabled':_0x237a97['enabled'],'maxDistance':_0x237a97['maxDistanc'+'e'],'pitch':_0x237a97['pitch'],'positional':_0x237a97['positional'],'refDistance':_0x237a97['refDistanc'+'e'],'rollOffFactor':_0x237a97['rollOffFac'+'tor'],'slots':_0x5adcbe,'volume':_0x237a97['volume']};return this['addCompone'+'nt'](_0x1e5ad7,_0x32a970);}['onUpdate'](_0x5d0287){const _0x245e0d=this['store'];for(const _0x189e28 in _0x245e0d)if(_0x245e0d['hasOwnProp'+'erty'](_0x189e28)){const _0x28ee12=_0x245e0d[_0x189e28]['entity'];if(_0x28ee12['enabled']){const _0x2015cd=_0x28ee12['sound'];if(_0x2015cd['enabled']&&_0x2015cd['positional']){const _0x5addfc=_0x28ee12['getPositio'+'n'](),_0x38517e=_0x2015cd['slots'];for(const _0x29f0de in _0x38517e)_0x38517e[_0x29f0de]['updatePosi'+'tion'](_0x5addfc);}}}}['onBeforeRe'+'move'](_0x1dd78c,_0x4c7b2c){const _0x3fc57b=_0x4c7b2c['slots'];for(const _0x4aa150 in _0x3fc57b)_0x3fc57b[_0x4aa150]['overlap']||_0x3fc57b[_0x4aa150]['stop']();_0x4c7b2c['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Kr['prototype'],d0);const lS='simple',cS='animated';class Hi extends me{constructor(_0x879e5e,_0x31d714){super(),h(this,'_evtSetMes'+'hes',null),(this['_component']=_0x879e5e,this['_frame']=0x223b+-0x206a+-0x1d1,this['_sprite']=null,this['_spriteAss'+'et']=null,this['spriteAsse'+'t']=_0x31d714['spriteAsse'+'t'],this['name']=_0x31d714['name'],this['fps']=_0x31d714['fps']||-0x1*0x1025+0x8be+0x17b*0x5,this['loop']=_0x31d714['loop']||!(-0x5*-0x440+0x5*0x13a+0xa3*-0x2b),this['_playing']=!(-0x397*0x1+0x1bde+-0x1de*0xd),this['_paused']=!(0xfa9+-0x6bb*-0x5+-0x314f),this['_time']=-0xbb7*-0x1+0x1*-0x7ca+0xf*-0x43);}get['duration'](){if(this['_sprite']){const _0x19e789=this['fps']||Number['MIN_VALUE'];return this['_sprite']['frameKeys']['length']/Math['abs'](_0x19e789);}return 0x8c6*0x2+-0x1*-0x1f78+-0xc41*0x4;}set['frame'](_0x87c7e7){this['_setFrame'](_0x87c7e7);const _0x2c1234=this['fps']||Number['MIN_VALUE'];this['_setTime'](this['_frame']/_0x2c1234);}get['frame'](){return this['_frame'];}get['isPaused'](){return this['_paused'];}get['isPlaying'](){return this['_playing'];}set['sprite'](_0x13c3a4){var _0x52ea36;if(this['_sprite']&&((_0x52ea36=this['_evtSetMes'+'hes'])==null||_0x52ea36['off'](),this['_evtSetMes'+'hes']=null,this['_sprite']['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['off']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['off']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_sprite']=_0x13c3a4,this['_sprite']&&(this['_evtSetMes'+'hes']=this['_sprite']['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['on']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['on']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_component']['currentCli'+'p']===this){let _0x1e4a10;!_0x13c3a4||!_0x13c3a4['atlas']?(_0x1e4a10=this['_component']['_meshInsta'+'nce'],_0x1e4a10&&(_0x1e4a10['deletePara'+'meter']('texture_em'+'issiveMap'),_0x1e4a10['deletePara'+'meter']('texture_op'+'acityMap')),this['_component']['_hideModel']()):(_0x13c3a4['atlas']['texture']&&(_0x1e4a10=this['_component']['_meshInsta'+'nce'],_0x1e4a10&&(_0x1e4a10['setParamet'+'er']('texture_em'+'issiveMap',_0x13c3a4['atlas']['texture']),_0x1e4a10['setParamet'+'er']('texture_op'+'acityMap',_0x13c3a4['atlas']['texture'])),this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['_component']['_showModel']()),this['time']&&this['fps']?this['time']=this['time']:this['frame']=this['frame']);}}get['sprite'](){return this['_sprite'];}set['spriteAsse'+'t'](_0x1b516e){const _0x6c867a=this['_component']['system']['app']['assets'];let _0x225ff3=_0x1b516e;if(_0x1b516e instanceof pe&&(_0x225ff3=_0x1b516e['id']),this['_spriteAss'+'et']!==_0x225ff3){if(this['_spriteAss'+'et']){const _0x365093=_0x6c867a['get'](this['_spriteAss'+'et']);_0x365093&&this['_unbindSpr'+'iteAsset'](_0x365093);}if(this['_spriteAss'+'et']=_0x225ff3,this['_spriteAss'+'et']){const _0x23a7d8=_0x6c867a['get'](this['_spriteAss'+'et']);_0x23a7d8?this['_bindSprit'+'eAsset'](_0x23a7d8):(this['sprite']=null,_0x6c867a['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['time'](_0x1ec49d){this['_setTime'](_0x1ec49d),this['_sprite']?this['frame']=Math['min'](this['_sprite']['frameKeys']['length']-(0xa31*0x1+-0x1862*-0x1+-0x2292),Math['floor'](this['_time']*Math['abs'](this['fps']))):this['frame']=0x9b0+0x11b7+-0x1b67;}get['time'](){return this['_time'];}['_onSpriteA'+'ssetAdded'](_0xee0fa5){this['_component']['system']['app']['assets']['off']('add:'+_0xee0fa5['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0xee0fa5['id']&&this['_bindSprit'+'eAsset'](_0xee0fa5);}['_bindSprit'+'eAsset'](_0x57cb7a){_0x57cb7a['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x57cb7a['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x57cb7a['resource']?this['_onSpriteA'+'ssetLoad'](_0x57cb7a):this['_component']['system']['app']['assets']['load'](_0x57cb7a);}['_unbindSpr'+'iteAsset'](_0x41a0d2){_0x41a0d2&&(_0x41a0d2['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x41a0d2['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x41a0d2['resource']&&!_0x41a0d2['resource']['atlas']&&this['_component']['system']['app']['assets']['off']('load:'+_0x41a0d2['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this));}['_onSpriteA'+'ssetLoad'](_0x4ee72d){if(!_0x4ee72d['resource'])this['sprite']=null;else{if(_0x4ee72d['resource']['atlas'])this['sprite']=_0x4ee72d['resource'];else{const _0x31f985=_0x4ee72d['data']['textureAtl'+'asAsset'],_0x405ab9=this['_component']['system']['app']['assets'];_0x405ab9['off']('load:'+_0x31f985,this['_onTexture'+'AtlasLoad'],this),_0x405ab9['once']('load:'+_0x31f985,this['_onTexture'+'AtlasLoad'],this);}}}['_onTexture'+'AtlasLoad'](_0x34a97d){const _0x9d3418=this['_spriteAss'+'et'];_0x9d3418 instanceof pe?this['_onSpriteA'+'ssetLoad'](_0x9d3418):this['_onSpriteA'+'ssetLoad'](this['_component']['system']['app']['assets']['get'](_0x9d3418));}['_onSpriteA'+'ssetRemove'](_0x46210f){this['sprite']=null;}['_onSpriteM'+'eshesChang'+'e'](){this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['frame']);}['_onSpriteP'+'puChanged'](){this['_component']['currentCli'+'p']===this&&this['sprite']['renderMode']!==ci&&this['_component']['_showFrame'](this['frame']);}['_update'](_0x37eb77){if(this['fps']===-0x1622+0x1*-0x157d+-0x2b9f*-0x1||!this['_playing']||this['_paused']||!this['_sprite'])return;const _0xadbad7=this['fps']<-0x1ab1+0xa*-0x1cf+-0x3*-0xeed?-(0x23ae+-0x1dd+0x1*-0x21d0):-0x26e4+0x1f33+0x7b2,_0x4cac88=this['_time']+_0x37eb77*this['_component']['speed']*_0xadbad7,_0x2847ad=this['duration'],_0xbba535=_0x4cac88>_0x2847ad||_0x4cac88<-0x204f+-0x4*-0x1f3+0xfb*0x19;this['_setTime'](_0x4cac88);let _0x25258f=this['frame'];this['_sprite']?_0x25258f=Math['floor'](this['_sprite']['frameKeys']['length']*this['_time']/_0x2847ad):_0x25258f=-0x1*-0x1c75+0x17e2+-0x3457,_0x25258f!==this['_frame']&&this['_setFrame'](_0x25258f),_0xbba535&&(this['loop']?(this['fire']('loop'),this['_component']['fire']('loop',this)):(this['_playing']=!(0x17*0xc1+0x1303+-0x2459),this['_paused']=!(0x5b6+0xec7+-0x147c),this['fire']('end'),this['_component']['fire']('end',this)));}['_setTime'](_0x2cc67d){this['_time']=_0x2cc67d;const _0x3ae45a=this['duration'];this['_time']<-0x20bd+0x19a3+0x6*0x12f?this['loop']?this['_time']=this['_time']%_0x3ae45a+_0x3ae45a:this['_time']=-0x5*0x1dd+-0x1038+0x1989*0x1:this['_time']>_0x3ae45a&&(this['loop']?this['_time']%=_0x3ae45a:this['_time']=_0x3ae45a);}['_setFrame'](_0x5b9b01){this['_sprite']?this['_frame']=Y['clamp'](_0x5b9b01,0x204c+0x1182+-0x31ce,this['_sprite']['frameKeys']['length']-(-0x16da+-0x3*0xcb6+-0x3cfd*-0x1)):this['_frame']=_0x5b9b01,this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['_frame']);}['_destroy'](){if(this['_spriteAss'+'et']){const _0x583842=this['_component']['system']['app']['assets'];this['_unbindSpr'+'iteAsset'](_0x583842['get'](this['_spriteAss'+'et']));}this['_sprite']&&(this['sprite']=null),this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null);}['play'](){this['_playing']||(this['_playing']=!(0x10fe+-0x1a*-0xa0+-0x213e),this['_paused']=!(0x161c+0x2*0x10e3+-0x37e1),this['frame']=-0xebc+0x2*0x39b+0x3*0x282,this['fire']('play'),this['_component']['fire']('play',this));}['pause'](){!this['_playing']||this['_paused']||(this['_paused']=!(-0x1373+0x31*0xbf+-0x111c),this['fire']('pause'),this['_component']['fire']('pause',this));}['resume'](){this['_paused']&&(this['_paused']=!(0x498+-0x25b1*-0x1+-0x2a48),this['fire']('resume'),this['_component']['fire']('resume',this));}['stop'](){this['_playing']&&(this['_playing']=!(-0xa07*0x1+0x844+0x1c4),this['_paused']=!(-0x16bd*0x1+0x1d*-0xc3+-0x1f3*-0x17),this['_time']=-0x21ba+0x2*-0xa9+0x230c,this['frame']=-0x19*0x7+0x53*0x2c+-0xd95,this['fire']('stop'),this['_component']['fire']('stop',this));}}h(Hi,'EVENT_PLAY','play'),h(Hi,'EVENT_PAUS'+'E','pause'),h(Hi,'EVENT_RESU'+'ME','resume'),h(Hi,'EVENT_STOP','stop'),h(Hi,'EVENT_END','end'),h(Hi,'EVENT_LOOP','loop');const hS='texture_em'+'issiveMap',dS='texture_op'+'acityMap',fS='material_e'+'missive',uS='material_o'+'pacity',dF='innerOffse'+'t',fF='outerScale',uF='atlasRect';class ur extends we{constructor(_0x1de19b,_0x48bff9){super(_0x1de19b,_0x48bff9),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_type']=lS,this['_material']=_0x1de19b['defaultMat'+'erial'],this['_color']=new ie(0x121d*-0x2+0x455+-0xff3*-0x2,0x1*0x19b9+0x1aca+-0x205*0x1a,0x22b+0xb7d*-0x1+-0x953*-0x1,-0x1ba1+-0x23*-0x55+0x1003),this['_colorUnif'+'orm']=new Float32Array(-0x1d1f+-0x3fa*-0x2+0x152e),this['_speed']=-0x1136*-0x1+0x871*-0x1+-0x8c4,this['_flipX']=!(-0x205*0x3+-0xd3*-0x14+-0x3a*0x2e),this['_flipY']=!(-0x2*0x1a8+-0xa5c+0x48f*0x3),this['_width']=-0x167*-0x8+0xea7+0xe*-0x1d9,this['_height']=0x2296*0x1+0x138*0x1+-0x23cd,this['_drawOrder']=-0x1*-0x409+-0x15a2+0x385*0x5,this['_layers']=[er],this['_outerScal'+'e']=new J(-0x15ec+-0x1862+0x2e4f,0x842+0x281*-0xd+0x184c),this['_outerScal'+'eUniform']=new Float32Array(0x67*0x47+0xb*0x11b+-0x28b8),this['_innerOffs'+'et']=new re(),this['_innerOffs'+'etUniform']=new Float32Array(0x1*0xed1+0x1*0x2257+-0x3124),this['_atlasRect']=new re(),this['_atlasRect'+'Uniform']=new Float32Array(-0x118c+-0x1d1a+0x2*0x1755),this['_batchGrou'+'pId']=-(-0x638+0x1*0x6e2+0x1*-0xa9),this['_batchGrou'+'p']=null,this['_node']=new Ie(),this['_model']=new sr(),this['_model']['graph']=this['_node'],this['_meshInsta'+'nce']=null,_0x48bff9['addChild'](this['_model']['graph']),this['_model']['_entity']=_0x48bff9,this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_addedMode'+'l']=!(0x1008+0xe19*0x1+-0x1e20),this['_autoPlayC'+'lip']=null,this['_clips']={},this['_defaultCl'+'ip']=new Hi(this,{'name':this['entity']['name'],'fps':0x0,'loop':!(0x1a74+-0x5d*0xc+0x27*-0x91),'spriteAsset':null}),this['_currentCl'+'ip']=this['_defaultCl'+'ip']);}set['type'](_0x5f13b6){this['_type']!==_0x5f13b6&&(this['_type']=_0x5f13b6,this['_type']===lS?(this['stop'](),this['_currentCl'+'ip']=this['_defaultCl'+'ip'],this['enabled']&&this['entity']['enabled']&&(this['_currentCl'+'ip']['frame']=this['frame'],this['_currentCl'+'ip']['sprite']?this['_showModel']():this['_hideModel']())):this['_type']===cS&&(this['stop'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_currentCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['enabled']&&this['entity']['enabled']?this['_showModel']():this['_hideModel']()));}get['type'](){return this['_type'];}set['frame'](_0x3a888f){this['_currentCl'+'ip']['frame']=_0x3a888f;}get['frame'](){return this['_currentCl'+'ip']['frame'];}set['spriteAsse'+'t'](_0xa3310a){this['_defaultCl'+'ip']['spriteAsse'+'t']=_0xa3310a;}get['spriteAsse'+'t'](){return this['_defaultCl'+'ip']['_spriteAss'+'et'];}set['sprite'](_0x5c0e15){this['_currentCl'+'ip']['sprite']=_0x5c0e15;}get['sprite'](){return this['_currentCl'+'ip']['sprite'];}set['material'](_0x1e641c){this['_material']=_0x1e641c,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=_0x1e641c);}get['material'](){return this['_material'];}set['color'](_0x25355f){this['_color']['r']=_0x25355f['r'],this['_color']['g']=_0x25355f['g'],this['_color']['b']=_0x25355f['b'],this['_meshInsta'+'nce']&&(this['_colorUnif'+'orm'][-0x1*-0xee4+-0xd*-0x15d+0x79*-0x45]=this['_color']['r'],this['_colorUnif'+'orm'][-0x56*-0x6b+-0x12*-0x17f+-0x3edf]=this['_color']['g'],this['_colorUnif'+'orm'][0x617+0x9f2*-0x1+0x17*0x2b]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](fS,this['_colorUnif'+'orm']));}get['color'](){return this['_color'];}set['opacity'](_0xf8f7fb){this['_color']['a']=_0xf8f7fb,this['_meshInsta'+'nce']&&this['_meshInsta'+'nce']['setParamet'+'er'](uS,_0xf8f7fb);}get['opacity'](){return this['_color']['a'];}set['clips'](_0x1cec96){if(!_0x1cec96){for(const _0x22c2fb in this['_clips'])this['removeClip'](_0x22c2fb);return;}for(const _0x3abf39 in this['_clips']){let _0xd479e2=!(0x1*-0x283+0x7*-0x467+-0x4c3*-0x7);for(const _0x406a16 in _0x1cec96)if(_0x1cec96[_0x406a16]['name']===_0x3abf39){_0xd479e2=!(0xc5+-0x427*0x2+0x789),this['_clips'][_0x3abf39]['fps']=_0x1cec96[_0x406a16]['fps'],this['_clips'][_0x3abf39]['loop']=_0x1cec96[_0x406a16]['loop'],_0x1cec96[_0x406a16]['hasOwnProp'+'erty']('sprite')?this['_clips'][_0x3abf39]['sprite']=_0x1cec96[_0x406a16]['sprite']:_0x1cec96[_0x406a16]['hasOwnProp'+'erty']('spriteAsse'+'t')&&(this['_clips'][_0x3abf39]['spriteAsse'+'t']=_0x1cec96[_0x406a16]['spriteAsse'+'t']);break;}_0xd479e2||this['removeClip'](_0x3abf39);}for(const _0x2d5522 in _0x1cec96)this['_clips'][_0x1cec96[_0x2d5522]['name']]||this['addClip'](_0x1cec96[_0x2d5522]);this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['sprite'])&&this['_hideModel']();}get['clips'](){return this['_clips'];}get['currentCli'+'p'](){return this['_currentCl'+'ip'];}set['speed'](_0x5eef21){this['_speed']=_0x5eef21;}get['speed'](){return this['_speed'];}set['flipX'](_0x2e169d){this['_flipX']!==_0x2e169d&&(this['_flipX']=_0x2e169d,this['_updateTra'+'nsform']());}get['flipX'](){return this['_flipX'];}set['flipY'](_0x5600a6){this['_flipY']!==_0x5600a6&&(this['_flipY']=_0x5600a6,this['_updateTra'+'nsform']());}get['flipY'](){return this['_flipY'];}set['width'](_0x5e3fe8){_0x5e3fe8!==this['_width']&&(this['_width']=_0x5e3fe8,this['_outerScal'+'e']['x']=this['_width'],this['sprite']&&(this['sprite']['renderMode']===Mt||this['sprite']['renderMode']===Pt)&&this['_updateTra'+'nsform']());}get['width'](){return this['_width'];}set['height'](_0x271ee9){_0x271ee9!==this['_height']&&(this['_height']=_0x271ee9,this['_outerScal'+'e']['y']=this['height'],this['sprite']&&(this['sprite']['renderMode']===Mt||this['sprite']['renderMode']===Pt)&&this['_updateTra'+'nsform']());}get['height'](){return this['_height'];}set['batchGroup'+'Id'](_0xace8f1){var _0xb19ceb,_0x20dd46;if(this['_batchGrou'+'pId']===_0xace8f1)return;const _0x4a91cf=this['_batchGrou'+'pId'];this['_batchGrou'+'pId']=_0xace8f1,this['entity']['enabled']&&_0x4a91cf>=0x1*0x1ec5+0x16dd+0x5*-0xaba&&((_0xb19ceb=this['system']['app']['batcher'])==null||_0xb19ceb['remove'](St['SPRITE'],_0x4a91cf,this['entity'])),this['entity']['enabled']&&_0xace8f1>=0x4bd*-0x1+-0x11*-0x71+-0x2c4?(_0x20dd46=this['system']['app']['batcher'])==null||_0x20dd46['insert'](St['SPRITE'],_0xace8f1,this['entity']):_0x4a91cf>=0x1d*-0x109+-0x257*-0x9+0x4a*0x1f&&this['_currentCl'+'ip']&&this['_currentCl'+'ip']['sprite']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['autoPlayCl'+'ip'](_0x53ac06){this['_autoPlayC'+'lip']=_0x53ac06 instanceof Hi?_0x53ac06['name']:_0x53ac06,this['_tryAutoPl'+'ay']();}get['autoPlayCl'+'ip'](){return this['_autoPlayC'+'lip'];}set['drawOrder'](_0x4bdf22){this['_drawOrder']=_0x4bdf22,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['drawOrder']=_0x4bdf22);}get['drawOrder'](){return this['_drawOrder'];}set['layers'](_0x5469e1){this['_addedMode'+'l']&&this['_hideModel'](),this['_layers']=_0x5469e1,this['_meshInsta'+'nce']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['layers'](){return this['_layers'];}get['aabb'](){return this['_meshInsta'+'nce']?this['_meshInsta'+'nce']['aabb']:null;}['onEnable'](){var _0x3a3f63;const _0x18e90a=this['system']['app'],_0x42b325=_0x18e90a['scene'],_0x2e2f8e=_0x42b325['layers'];this['_evtLayers'+'Changed']=_0x42b325['on']('set:layers',this['_onLayersC'+'hanged'],this),_0x2e2f8e&&(this['_evtLayerA'+'dded']=_0x2e2f8e['on']('add',this['_onLayerAd'+'ded'],this),this['_evtLayerR'+'emoved']=_0x2e2f8e['on']('remove',this['_onLayerRe'+'moved'],this)),this['_showModel'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_batchGrou'+'pId']>=-0x2334+0x3*-0x2cc+-0x9b*-0x48&&((_0x3a3f63=_0x18e90a['batcher'])==null||_0x3a3f63['insert'](St['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDisable'](){var _0x22c03a,_0x46a7c8,_0x1b9a78,_0x282b3a;const _0x333f63=this['system']['app'],_0x3ea556=_0x333f63['scene']['layers'];(_0x22c03a=this['_evtLayers'+'Changed'])==null||_0x22c03a['off'](),this['_evtLayers'+'Changed']=null,_0x3ea556&&((_0x46a7c8=this['_evtLayerA'+'dded'])==null||_0x46a7c8['off'](),this['_evtLayerA'+'dded']=null,(_0x1b9a78=this['_evtLayerR'+'emoved'])==null||_0x1b9a78['off'](),this['_evtLayerR'+'emoved']=null),this['stop'](),this['_hideModel'](),this['_batchGrou'+'pId']>=0xbc6+0x266c+-0x3232&&((_0x282b3a=_0x333f63['batcher'])==null||_0x282b3a['remove'](St['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDestroy'](){var _0x6081e0;this['_currentCl'+'ip']=null,this['_defaultCl'+'ip']&&(this['_defaultCl'+'ip']['_destroy'](),this['_defaultCl'+'ip']=null);for(const _0xcf6531 in this['_clips'])this['_clips'][_0xcf6531]['_destroy']();this['_clips']=null,this['_hideModel'](),this['_model']=null,(_0x6081e0=this['_node'])==null||_0x6081e0['remove'](),this['_node']=null,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=null,this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']=null);}['_showModel'](){if(this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x59e2be=[this['_meshInsta'+'nce']];for(let _0x1380d5=-0x26de+-0xc88+0x3366,_0x1a7758=this['_layers']['length'];_0x1380d5<_0x1a7758;_0x1380d5++){const _0x5b082b=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x1380d5]);_0x5b082b&&_0x5b082b['addMeshIns'+'tances'](_0x59e2be);}this['_addedMode'+'l']=!(0x2*-0x1042+-0x386*0x5+-0x3*-0x10b6);}['_hideModel'](){if(!this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x42d38a=[this['_meshInsta'+'nce']];for(let _0x45bfe4=0x58*0x46+-0xbdd*0x2+-0x56,_0x5eea0e=this['_layers']['length'];_0x45bfe4<_0x5eea0e;_0x45bfe4++){const _0x1b3e07=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x45bfe4]);_0x1b3e07&&_0x1b3e07['removeMesh'+'Instances'](_0x42d38a);}this['_addedMode'+'l']=!(-0x2404+-0x3d*-0x67+0xb7a);}['_showFrame'](_0x502bc1){if(!this['sprite'])return;const _0xad31c6=this['sprite']['meshes'][_0x502bc1];if(!_0xad31c6){this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']['visible']=!(-0x26cb+-0x1e8c+0x4558));return;}let _0x5cd1ad;if(this['sprite']['renderMode']===Pt?_0x5cd1ad=this['system']['default9Sl'+'icedMateri'+'alSlicedMo'+'de']:this['sprite']['renderMode']===Mt?_0x5cd1ad=this['system']['default9Sl'+'icedMateri'+'alTiledMod'+'e']:_0x5cd1ad=this['system']['defaultMat'+'erial'],this['_meshInsta'+'nce']||(this['_meshInsta'+'nce']=new He(_0xad31c6,this['_material'],this['_node']),this['_meshInsta'+'nce']['castShadow']=!(0xb3*-0x5+0x1c39+-0x18b9),this['_meshInsta'+'nce']['receiveSha'+'dow']=!(0x1ea1+0x904+-0x27a4),this['_meshInsta'+'nce']['drawOrder']=this['_drawOrder'],this['_model']['meshInstan'+'ces']['push'](this['_meshInsta'+'nce']),this['_colorUnif'+'orm'][-0x1ed1+0x11cc+0xd05*0x1]=this['_color']['r'],this['_colorUnif'+'orm'][-0x170*0x11+-0x26ec+0x3f5d]=this['_color']['g'],this['_colorUnif'+'orm'][-0x1*0x127f+0x8ef*-0x4+0x363d]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](fS,this['_colorUnif'+'orm']),this['_meshInsta'+'nce']['setParamet'+'er'](uS,this['_color']['a']),this['enabled']&&this['entity']['enabled']&&this['_showModel']()),this['_meshInsta'+'nce']['material']!==_0x5cd1ad&&(this['_meshInsta'+'nce']['material']=_0x5cd1ad),this['_meshInsta'+'nce']['mesh']!==_0xad31c6&&(this['_meshInsta'+'nce']['mesh']=_0xad31c6,this['_meshInsta'+'nce']['visible']=!(0x1686+0x136+0xbde*-0x2),this['_meshInsta'+'nce']['_aabbVer']=-(-0x2f*0xbf+-0x14e*-0x13+0x38*0x2f)),this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_meshInsta'+'nce']['setParamet'+'er'](hS,this['sprite']['atlas']['texture']),this['_meshInsta'+'nce']['setParamet'+'er'](dS,this['sprite']['atlas']['texture'])):(this['_meshInsta'+'nce']['deletePara'+'meter'](hS),this['_meshInsta'+'nce']['deletePara'+'meter'](dS)),this['sprite']['atlas']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){this['_meshInsta'+'nce']['_updateAab'+'bFunc']=this['_updateAab'+'bFunc'];const _0x521028=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][_0x502bc1]];if(_0x521028){const _0x576812=(0x454+-0x28c+-0x1c6*0x1)/_0x521028['rect']['z'],_0x129e86=(-0x7*-0xcd+-0x1d4c+0x17b3)/_0x521028['rect']['w'];this['_innerOffs'+'et']['set'](_0x521028['border']['x']*_0x576812,_0x521028['border']['y']*_0x129e86,_0x521028['border']['z']*_0x576812,_0x521028['border']['w']*_0x129e86);const _0x244719=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x521028['rect']['x']/_0x244719['width'],_0x521028['rect']['y']/_0x244719['height'],_0x521028['rect']['z']/_0x244719['width'],_0x521028['rect']['w']/_0x244719['height']);}else this['_innerOffs'+'et']['set'](0x2*-0x702+-0x53c+0x1340,-0x33b+-0x1181+0x14bc,0x1269+0xfa3+-0x220c,-0x20ca+0x1*-0x121d+-0x53*-0x9d);this['_innerOffs'+'etUniform'][0x1c55+0x1*0x1669+-0x32be]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][-0x252c+-0x1*-0x133a+-0x1*-0x11f3]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][0x17c5+-0x2*-0x287+0x99b*-0x3]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][0xfd4+0x8f*-0x2f+0xa70]=this['_innerOffs'+'et']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](dF,this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][-0x1493+-0x10e6*0x1+0x2579]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][-0x1384+-0x1*-0x761+0x2a*0x4a]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][0x1db7*-0x1+-0x25*-0x103+-0x5e*0x15]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][0xea9+0x1d*-0x151+0x1787]=this['_atlasRect']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](uF,this['_atlasRect'+'Uniform']);}else this['_meshInsta'+'nce']['_updateAab'+'bFunc']=null;this['_updateTra'+'nsform']();}['_updateTra'+'nsform'](){let _0x557635=this['flipX']?-(-0xdcb+-0x61*0x54+0x2da0):-0x23d0+-0x3*-0x2ab+0x1bd0,_0x44db03=this['flipY']?-(0x40*0x1+0x2c5+0x304*-0x1):0x1*-0x11ef+-0x540+0x6a*0x38,_0x53ea84=-0x12f0+-0x39*-0x7f+-0x957,_0x31dd62=-0xa9*-0x3b+0xf9*-0x18+-0xf9b;if(this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){let _0x1edbae=-0x1*-0x89+-0xbf*0x32+0x2*0x1263,_0x335ac2=0x20e6+-0x867+-0x187e;if(this['sprite']['atlas']){const _0x516764=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][this['frame']]];_0x516764&&(_0x1edbae=_0x516764['rect']['z'],_0x335ac2=_0x516764['rect']['w'],_0x53ea84=(-0x2360+0x532+0x1e2e+0.5-_0x516764['pivot']['x'])*this['_width'],_0x31dd62=(0xad*0x2c+0x218c+-0xc*0x546+0.5-_0x516764['pivot']['y'])*this['_height']);}const _0x372b24=_0x1edbae/this['sprite']['pixelsPerU'+'nit'],_0x3911c1=_0x335ac2/this['sprite']['pixelsPerU'+'nit'];this['_outerScal'+'e']['set'](Math['max'](this['_width'],this['_innerOffs'+'et']['x']*_0x372b24),Math['max'](this['_height'],this['_innerOffs'+'et']['y']*_0x3911c1)),_0x557635*=_0x372b24,_0x44db03*=_0x3911c1,this['_outerScal'+'e']['x']/=_0x372b24,this['_outerScal'+'e']['y']/=_0x3911c1,_0x557635*=Y['clamp'](this['_width']/(this['_innerOffs'+'et']['x']*_0x372b24),-0xb42+0xf1a+-0x3d8+0.0001,-0x17fc+-0xb73+0x2370),_0x44db03*=Y['clamp'](this['_height']/(this['_innerOffs'+'et']['y']*_0x3911c1),-0xd*0xf6+0x30*0x19+0x12*0x6f+0.0001,0x4*-0x376+-0x5*0x458+0xbdb*0x3),this['_meshInsta'+'nce']&&(this['_outerScal'+'eUniform'][-0x81d+0x15*-0x4b+-0x14c*-0xb]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][0x1828+-0x2*0x134f+-0xa1*-0x17]=this['_outerScal'+'e']['y'],this['_meshInsta'+'nce']['setParamet'+'er'](fF,this['_outerScal'+'eUniform']));}this['_node']['setLocalSc'+'ale'](_0x557635,_0x44db03,0x166*0x19+-0x2*-0xb03+-0x38fb),this['_node']['setLocalPo'+'sition'](_0x53ea84,_0x31dd62,-0x10fa+0x175b+-0x17*0x47);}['_updateAab'+'b'](_0x5626eb){return _0x5626eb['center']['set'](0xa33*0x2+-0x162*0x7+-0xab8,-0x16c3*-0x1+0x1*-0x20ff+0xa3c,0xdc7+0x18*0x98+-0x1c07),_0x5626eb['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(-0xf7f+0x13*0x1ab+-0x1032+0.5),this['_outerScal'+'e']['y']*(-0x16ba+-0x1181+-0x283b*-0x1+0.5),0x1394+-0xf9e*-0x2+0x4*-0xcb4+0.001),_0x5626eb['setFromTra'+'nsformedAa'+'bb'](_0x5626eb,this['_node']['getWorldTr'+'ansform']()),_0x5626eb;}['_tryAutoPl'+'ay'](){if(!this['_autoPlayC'+'lip']||this['type']!==cS)return;const _0x524c35=this['_clips'][this['_autoPlayC'+'lip']];_0x524c35&&!_0x524c35['isPlaying']&&(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['isPlaying'])&&this['enabled']&&this['entity']['enabled']&&this['play'](_0x524c35['name']);}['_onLayersC'+'hanged'](_0x1024bc,_0x460148){_0x1024bc['off']('add',this['onLayerAdd'+'ed'],this),_0x1024bc['off']('remove',this['onLayerRem'+'oved'],this),_0x460148['on']('add',this['onLayerAdd'+'ed'],this),_0x460148['on']('remove',this['onLayerRem'+'oved'],this),this['enabled']&&this['entity']['enabled']&&this['_showModel']();}['_onLayerAd'+'ded'](_0x581e54){this['layers']['indexOf'](_0x581e54['id'])<0x1966+-0x223f+0x8d9||this['_addedMode'+'l']&&this['enabled']&&this['entity']['enabled']&&this['_meshInsta'+'nce']&&_0x581e54['addMeshIns'+'tances']([this['_meshInsta'+'nce']]);}['_onLayerRe'+'moved'](_0x4ae87b){!this['_meshInsta'+'nce']||this['layers']['indexOf'](_0x4ae87b['id'])<0x1bb3+0x12aa+0x53*-0x8f||_0x4ae87b['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}['removeMode'+'lFromLayer'+'s'](){for(let _0x5eddaa=-0x1f*-0xf+-0x1c55*0x1+0x1a84;_0x5eddaa<this['layers']['length'];_0x5eddaa++){const _0x4000ab=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x5eddaa]);_0x4000ab&&_0x4000ab['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}}['addClip'](_0x175fb3){const _0x578c50=new Hi(this,{'name':_0x175fb3['name'],'fps':_0x175fb3['fps'],'loop':_0x175fb3['loop'],'spriteAsset':_0x175fb3['spriteAsse'+'t']});return this['_clips'][_0x175fb3['name']]=_0x578c50,_0x578c50['name']&&_0x578c50['name']===this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),_0x578c50;}['removeClip'](_0x2bea8a){delete this['_clips'][_0x2bea8a];}['clip'](_0x5aa9ea){return this['_clips'][_0x5aa9ea];}['play'](_0x11a724){const _0x4a4c28=this['_clips'][_0x11a724],_0x134276=this['_currentCl'+'ip'];return _0x134276&&_0x134276!==_0x4a4c28&&(_0x134276['_playing']=!(-0x389*0x1+0x149c+-0x1112)),this['_currentCl'+'ip']=_0x4a4c28,this['_currentCl'+'ip']?(this['_currentCl'+'ip']=_0x4a4c28,this['_currentCl'+'ip']['play']()):w['warn']('Trying\x20to\x20'+'play\x20sprit'+'e\x20animatio'+'n\x20'+_0x11a724+('\x20which\x20doe'+'s\x20not\x20exis'+'t.')),_0x4a4c28;}['pause'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['_currentCl'+'ip']['pause']();}['resume'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPaused']&&this['_currentCl'+'ip']['resume']();}['stop'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['stop']();}}h(ur,'EVENT_PLAY','play'),h(ur,'EVENT_PAUS'+'E','pause'),h(ur,'EVENT_RESU'+'ME','resume'),h(ur,'EVENT_STOP','stop'),h(ur,'EVENT_END','end'),h(ur,'EVENT_LOOP','loop');class pF{constructor(){this['enabled']=!(0x1e18+0x7bf+-0x25d7*0x1);}}const f0=['enabled'];class mF extends ct{constructor(_0x11aba0){super(_0x11aba0),this['id']='sprite',this['ComponentT'+'ype']=ur,this['DataType']=pF,this['schema']=f0,this['_defaultTe'+'xture']=null,this['_defaultMa'+'terial']=null,this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=null,this['_default9S'+'licedMater'+'ialTiledMo'+'de']=null,this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['defaultMat'+'erial'](_0x1b8d38){this['_defaultMa'+'terial']=_0x1b8d38;}get['defaultMat'+'erial'](){if(!this['_defaultMa'+'terial']){const _0x7620e9=new _e(this['app']['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':_s,'name':'sprite'}),_0x1d1298=new Uint8Array(_0x7620e9['lock']());_0x1d1298[-0x2c9*0x5+0x397*0x5+-0x406]=_0x1d1298[0xdf8+0x198b+-0x2782]=_0x1d1298[0xe7+0x7aa+-0x88f]=_0x1d1298[-0x1219*0x2+0x1*0xb37+0x18fe]=0x2610+0x1a98+-0x3fa9,_0x7620e9['unlock']();const _0x3f2f41=new Ut();_0x3f2f41['diffuse']['set'](0x15db+0x14f6*-0x1+-0xe5,-0x1ea1+-0x3*0xa45+0x1eb8*0x2,0x7cf*0x1+0x2f*0x1e+-0x7*0x1e7),_0x3f2f41['emissive']['set'](-0x167b+0x1acd+-0x1*0x451,0x13*-0xea+-0x1a69+-0x3*-0xe98,-0x20b5+-0x9ac*0x3+0x1edd*0x2),_0x3f2f41['emissiveMa'+'p']=_0x7620e9,_0x3f2f41['opacityMap']=_0x7620e9,_0x3f2f41['opacityMap'+'Channel']='a',_0x3f2f41['useLightin'+'g']=!(0xdc8+-0x72*-0x5+0x1001*-0x1),_0x3f2f41['useTonemap']=!(-0x180+0x108e+-0xf0d*0x1),_0x3f2f41['useFog']=!(-0x18*-0xbb+-0x11a9+0x22),_0x3f2f41['useSkybox']=!(0x62*-0x4b+0x1c79*0x1+-0x1f*-0x2),_0x3f2f41['blendType']=Gn,_0x3f2f41['depthWrite']=!(0x3*0x97+0x1*-0xe59+0xc95*0x1),_0x3f2f41['pixelSnap']=!(-0x9*-0x11f+-0x76f*-0x2+-0x63d*0x4),_0x3f2f41['cull']=bt,_0x3f2f41['update'](),this['_defaultTe'+'xture']=_0x7620e9,this['_defaultMa'+'terial']=_0x3f2f41;}return this['_defaultMa'+'terial'];}set['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](_0x10fa7c){this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x10fa7c;}get['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](){if(!this['_default9S'+'licedMater'+'ialSlicedM'+'ode']){const _0x5d7585=this['defaultMat'+'erial']['clone']();_0x5d7585['nineSliced'+'Mode']=Pt,_0x5d7585['update'](),this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x5d7585;}return this['_default9S'+'licedMater'+'ialSlicedM'+'ode'];}set['default9Sl'+'icedMateri'+'alTiledMod'+'e'](_0x369c12){this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x369c12;}get['default9Sl'+'icedMateri'+'alTiledMod'+'e'](){if(!this['_default9S'+'licedMater'+'ialTiledMo'+'de']){const _0x4b705e=this['defaultMat'+'erial']['clone']();_0x4b705e['nineSliced'+'Mode']=Mt,_0x4b705e['update'](),this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x4b705e;}return this['_default9S'+'licedMater'+'ialTiledMo'+'de'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),this['_defaultTe'+'xture']&&(this['_defaultTe'+'xture']['destroy'](),this['_defaultTe'+'xture']=null);}['initialize'+'ComponentD'+'ata'](_0x224517,_0x2ce6fc,_0x286044){if(_0x2ce6fc['enabled']!==void(-0x1374+-0x110b+0x247f)&&(_0x224517['enabled']=_0x2ce6fc['enabled']),_0x224517['type']=_0x2ce6fc['type'],_0x2ce6fc['layers']&&Array['isArray'](_0x2ce6fc['layers'])&&(_0x224517['layers']=_0x2ce6fc['layers']['slice'](0xf6d+-0x73f+-0x6*0x15d)),_0x2ce6fc['drawOrder']!==void(-0x187b+0x27a*-0x2+-0x2ad*-0xb)&&(_0x224517['drawOrder']=_0x2ce6fc['drawOrder']),_0x2ce6fc['color']!==void(0x6*0x243+0x1*0x133+-0xec5)&&(_0x2ce6fc['color']instanceof ie?_0x224517['color']['set'](_0x2ce6fc['color']['r'],_0x2ce6fc['color']['g'],_0x2ce6fc['color']['b'],_0x2ce6fc['opacity']??-0x443*-0x8+-0x17*0x15b+-0x2ea):_0x224517['color']['set'](_0x2ce6fc['color'][-0x16c7+-0xf8a+-0x11*-0x241],_0x2ce6fc['color'][-0x846+0x2*0xb83+-0x97*0x19],_0x2ce6fc['color'][0xc4f+0x27b+-0x764*0x2],_0x2ce6fc['opacity']??-0x11*-0x12d+0xcc5*-0x1+-0x737*0x1),_0x224517['color']=_0x224517['color']),_0x2ce6fc['opacity']!==void(0x1417+0x10*0x159+-0x29a7*0x1)&&(_0x224517['opacity']=_0x2ce6fc['opacity']),_0x2ce6fc['flipX']!==void(0xcc4*0x3+-0x16*0x1c3+-0x1*-0x76)&&(_0x224517['flipX']=_0x2ce6fc['flipX']),_0x2ce6fc['flipY']!==void(0x1f*0x4a+0x1f61+-0x2857)&&(_0x224517['flipY']=_0x2ce6fc['flipY']),_0x2ce6fc['width']!==void(0x8*0xb5+-0x1508+-0x4*-0x3d8)&&(_0x224517['width']=_0x2ce6fc['width']),_0x2ce6fc['height']!==void(-0xc25*-0x2+-0x334*-0x2+-0x2*0xf59)&&(_0x224517['height']=_0x2ce6fc['height']),_0x2ce6fc['spriteAsse'+'t']!==void(-0x13d7+-0x2*-0x10e1+0x1fd*-0x7)&&(_0x224517['spriteAsse'+'t']=_0x2ce6fc['spriteAsse'+'t']),_0x2ce6fc['sprite']&&(_0x224517['sprite']=_0x2ce6fc['sprite']),_0x2ce6fc['frame']!==void(0x17b7*-0x1+-0x4e*-0x27+-0x1*-0xbd5)&&(_0x224517['frame']=_0x2ce6fc['frame']),_0x2ce6fc['clips']){for(const _0x35d79f in _0x2ce6fc['clips'])_0x224517['addClip'](_0x2ce6fc['clips'][_0x35d79f]);}_0x2ce6fc['speed']!==void(-0x254e+0x2244+0x185*0x2)&&(_0x224517['speed']=_0x2ce6fc['speed']),_0x2ce6fc['autoPlayCl'+'ip']&&(_0x224517['autoPlayCl'+'ip']=_0x2ce6fc['autoPlayCl'+'ip']),_0x224517['batchGroup'+'Id']=_0x2ce6fc['batchGroup'+'Id']===void(-0x2*-0xdd1+0x611+0x1*-0x21b3)||_0x2ce6fc['batchGroup'+'Id']===null?-(-0x99d+0x12f2+-0x954):_0x2ce6fc['batchGroup'+'Id'],super['initialize'+'ComponentD'+'ata'](_0x224517,_0x2ce6fc,_0x286044);}['cloneCompo'+'nent'](_0x55f859,_0x579635){const _0x4c2e22=_0x55f859['sprite'];return this['addCompone'+'nt'](_0x579635,{'enabled':_0x4c2e22['enabled'],'type':_0x4c2e22['type'],'spriteAsset':_0x4c2e22['spriteAsse'+'t'],'sprite':_0x4c2e22['sprite'],'width':_0x4c2e22['width'],'height':_0x4c2e22['height'],'frame':_0x4c2e22['frame'],'color':_0x4c2e22['color']['clone'](),'opacity':_0x4c2e22['opacity'],'flipX':_0x4c2e22['flipX'],'flipY':_0x4c2e22['flipY'],'speed':_0x4c2e22['speed'],'clips':_0x4c2e22['clips'],'autoPlayClip':_0x4c2e22['autoPlayCl'+'ip'],'batchGroupId':_0x4c2e22['batchGroup'+'Id'],'drawOrder':_0x4c2e22['drawOrder'],'layers':_0x4c2e22['layers']['slice'](-0x197b+0x1055+0x926)});}['onUpdate'](_0x5f433d){const _0x505a4f=this['store'];for(const _0x25f415 in _0x505a4f)if(_0x505a4f['hasOwnProp'+'erty'](_0x25f415)){const _0x38b9d2=_0x505a4f[_0x25f415];if(_0x38b9d2['data']['enabled']&&_0x38b9d2['entity']['enabled']){const _0x1a063c=_0x38b9d2['entity']['sprite'];_0x1a063c['_currentCl'+'ip']&&_0x1a063c['_currentCl'+'ip']['_update'](_0x5f433d);}}}['onBeforeRe'+'move'](_0x5b22e0,_0x5c591e){_0x5c591e['onDestroy']();}}we['_buildAcce'+'ssors'](ur['prototype'],f0);class _n extends we{constructor(_0x2c1b1f,_0x26cdfb){super(_0x2c1b1f,_0x26cdfb),this['_oldState']=!(-0xa62+-0x2447+0x2ea9*0x1),this['_size']=new D(),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['size'](_0x28c86f){_0x28c86f instanceof D?this['_size']['copy'](_0x28c86f):_0x28c86f instanceof Array&&_0x28c86f['length']>=0x22fa+-0x145a+-0xe9d&&this['size']['set'](_0x28c86f[-0x1d*0x6e+0x3cb*0x8+-0x11e2],_0x28c86f[-0x1*-0x24a3+0x25cd+-0x4a6f],_0x28c86f[-0x11*0x96+-0x1a03+-0x97*-0x3d]);}get['size'](){return this['_size'];}['onEnable'](){this['_checkStat'+'e']();}['onDisable'](){this['_checkStat'+'e']();}['_onSetEnab'+'led'](_0x5fd8ca,_0x4e4232,_0x4ef500){this['_checkStat'+'e']();}['_checkStat'+'e'](){const _0x3233b9=this['enabled']&&this['entity']['enabled'];_0x3233b9!==this['_oldState']&&(this['_oldState']=_0x3233b9,this['fire']('enable'),this['fire']('state',this['enabled']));}['_onBeforeR'+'emove'](){this['fire']('remove');}}h(_n,'EVENT_ENAB'+'LE','enable'),h(_n,'EVENT_DISA'+'BLE','disable'),h(_n,'EVENT_STAT'+'E','state'),h(_n,'EVENT_REMO'+'VE','remove');class _F{constructor(){this['enabled']=!(0x19*-0x95+0x9*-0x3b7+0xa6*0x4a);}}const u0=['enabled'];class gF extends ct{constructor(_0x38d4cf){super(_0x38d4cf),this['id']='zone',this['ComponentT'+'ype']=_n,this['DataType']=_F,this['schema']=u0,this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this);}['initialize'+'ComponentD'+'ata'](_0x18dca6,_0x2504fd,_0x4de2b2){_0x18dca6['enabled']=_0x2504fd['hasOwnProp'+'erty']('enabled')?!!_0x2504fd['enabled']:!(-0x22*0x22+0x1ce0+-0x185c),_0x2504fd['size']&&(_0x2504fd['size']instanceof D?_0x18dca6['size']['copy'](_0x2504fd['size']):_0x2504fd['size']instanceof Array&&_0x2504fd['size']['length']>=-0xc2*0x1c+0x1b59+0x1b*-0x3a&&_0x18dca6['size']['set'](_0x2504fd['size'][0x6d3*0x3+-0x2*-0x7d9+0x2f*-0xc5],_0x2504fd['size'][0x104a+0x2f*-0x67+0x18*0x1c],_0x2504fd['size'][-0x1bcd*-0x1+0x1143*0x1+-0x2d0e]));}['cloneCompo'+'nent'](_0x5f46d7,_0x19e84b){const _0x21b9e5={'enabled':_0x5f46d7['zone']['enabled'],'size':_0x5f46d7['zone']['size']};return this['addCompone'+'nt'](_0x19e84b,_0x21b9e5);}['_onBeforeR'+'emove'](_0x221d8f,_0x2b915f){_0x2b915f['_onBeforeR'+'emove']();}}we['_buildAcce'+'ssors'](_n['prototype'],u0);class SF{constructor(_0x31f018,_0x69eeea){this['effect']=_0x31f018,this['inputTarge'+'t']=_0x69eeea,this['outputTarg'+'et']=null,this['name']=_0x31f018['constructo'+'r']['name'];}}class yF{constructor(_0x5577e5,_0x24c740){this['app']=_0x5577e5,this['camera']=_0x24c740,this['destinatio'+'nRenderTar'+'get']=null,this['effects']=[],this['enabled']=!(0x10*-0xe0+-0xc97*0x3+0x11a*0x2f),this['depthTarge'+'t']=null,_0x24c740['on']('set:rect',this['onCameraRe'+'ctChanged'],this);}['_allocateC'+'olorBuffer'](_0x4dfcf8,_0x519469){const _0x5ef995=this['camera']['rect'],_0xf21b54=this['destinatio'+'nRenderTar'+'get'],_0x5db6b4=this['app']['graphicsDe'+'vice'],_0xf398cf=Math['floor'](_0x5ef995['z']*((_0xf21b54==null?void(-0x1*0x30f+-0x225+-0x534*-0x1):_0xf21b54['width'])??_0x5db6b4['width'])),_0x2a7e20=Math['floor'](_0x5ef995['w']*((_0xf21b54==null?void(-0x1456+0x261+0x11f5):_0xf21b54['height'])??_0x5db6b4['height']));return new _e(_0x5db6b4,{'name':_0x519469,'format':_0x4dfcf8,'width':_0xf398cf,'height':_0x2a7e20,'mipmaps':!(-0xc25*-0x2+-0xa0+-0x3*0x7e3),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});}['_createOff'+'screenTarg'+'et'](_0x3d18a0,_0x277065){const _0x149983=this['app']['graphicsDe'+'vice'],_0x29936f=(this['destinatio'+'nRenderTar'+'get']??_0x149983['backBuffer'])['isColorBuf'+'ferSrgb'](0x14ce+-0x2*-0xf31+-0x666*0x8),_0xa16a32=(_0x277065&&_0x149983['getRendera'+'bleHdrForm'+'at']([nt,Xt],!(0x1*-0x92f+0x1*-0x1673+0x1fa2)))??(_0x29936f?_s:Ne),_0x5e9212=this['camera']['entity']['name']+('-posteffec'+'t-')+this['effects']['length'],_0x260fd3=this['_allocateC'+'olorBuffer'](_0xa16a32,_0x5e9212);return new gt({'colorBuffer':_0x260fd3,'depth':_0x3d18a0,'stencil':_0x3d18a0&&this['app']['graphicsDe'+'vice']['supportsSt'+'encil'],'samples':_0x3d18a0?_0x149983['samples']:-0xe14+-0x1*-0x3c7+0xa4e});}['_resizeOff'+'screenTarg'+'et'](_0xe81dd){const _0x98c4be=_0xe81dd['colorBuffe'+'r']['format'],_0x4e79f2=_0xe81dd['colorBuffe'+'r']['name'];_0xe81dd['destroyFra'+'meBuffers'](),_0xe81dd['destroyTex'+'tureBuffer'+'s'](),_0xe81dd['_colorBuff'+'er']=this['_allocateC'+'olorBuffer'](_0x98c4be,_0x4e79f2),_0xe81dd['_colorBuff'+'ers']=[_0xe81dd['_colorBuff'+'er']];}['_destroyOf'+'fscreenTar'+'get'](_0x48b2d0){_0x48b2d0['destroyTex'+'tureBuffer'+'s'](),_0x48b2d0['destroy']();}['addEffect'](_0x244a34){const _0x3ae3ec=this['effects'],_0x37019c=_0x3ae3ec['length']===0x97*0x5+-0x1*-0x22d1+0x4*-0x971,_0x2dcc91=this['_createOff'+'screenTarg'+'et'](_0x37019c,_0x244a34['hdr']),_0x1808a6=new SF(_0x244a34,_0x2dcc91);_0x3ae3ec['push'](_0x1808a6),this['_sourceTar'+'get']=_0x1808a6['inputTarge'+'t'],_0x3ae3ec['length']>0x65*0x1a+-0x4*-0x5c6+0x2159*-0x1&&(_0x3ae3ec[_0x3ae3ec['length']-(0x13ed+-0x2*0x6da+-0x25*0x2b)]['outputTarg'+'et']=_0x1808a6['inputTarge'+'t']),this['_newPostEf'+'fect']=_0x244a34,_0x244a34['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap'](),this['enable'](),this['_newPostEf'+'fect']=void(0x30*0x73+0xdfd*-0x1+0x1*-0x793);}['removeEffe'+'ct'](_0x5433b4){let _0x47dbba=-(-0x1*-0x1c0f+-0x250a+0x8fc);for(let _0x3e1859=0x261f+-0xbf*-0x24+-0xf*0x455,_0x3d1a63=this['effects']['length'];_0x3e1859<_0x3d1a63;_0x3e1859++)if(this['effects'][_0x3e1859]['effect']===_0x5433b4){_0x47dbba=_0x3e1859;break;}_0x47dbba>=-0x214e+0x69f+-0x3*-0x8e5&&(_0x47dbba>-0x39+-0x1854+-0x5*-0x4e9?this['effects'][_0x47dbba-(0x2*0x49a+-0x1463+0xb30)]['outputTarg'+'et']=_0x47dbba+(0x1094+-0x8cc+-0x7c7)<this['effects']['length']?this['effects'][_0x47dbba+(-0x536+-0x1*-0x1cc9+-0x1792)]['inputTarge'+'t']:null:this['effects']['length']>-0xd98*-0x1+0x7d*0x4a+0x3*-0x1093&&(this['effects'][-0x219b*-0x1+-0x19c*-0x1+-0x2336]['inputTarge'+'t']['_depth']||(this['_destroyOf'+'fscreenTar'+'get'](this['effects'][-0x10c5+0x18d9+-0x2b1*0x3]['inputTarge'+'t']),this['effects'][0x1fa1+0x1*-0x7be+-0x17e2*0x1]['inputTarge'+'t']=this['_createOff'+'screenTarg'+'et'](!(-0x743+0x1322+0x3f5*-0x3),this['effects'][0x7*0x6a+0x8*0x6f+-0x65d]['hdr']),this['_sourceTar'+'get']=this['effects'][0x1*0x251+-0x38*0x9d+0xa4*0x32]['inputTarge'+'t']),this['camera']['renderTarg'+'et']=this['effects'][-0xb2+0x1ab3+-0x1a00]['inputTarge'+'t']),this['_destroyOf'+'fscreenTar'+'get'](this['effects'][_0x47dbba]['inputTarge'+'t']),this['effects']['splice'](_0x47dbba,0x8d*0x36+0x3*0xbf9+0x16*-0x2fc)),this['enabled']&&_0x5433b4['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap'](),this['effects']['length']===-0xc85*0x1+0xaa5+-0x20*-0xf&&this['disable']();}['_requestDe'+'pthMaps'](){for(let _0x3304b6=0x1f2c+0x10d2+-0x2ffe,_0x4a15ea=this['effects']['length'];_0x3304b6<_0x4a15ea;_0x3304b6++){const _0x459f34=this['effects'][_0x3304b6]['effect'];this['_newPostEf'+'fect']!==_0x459f34&&_0x459f34['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap']();}}['_releaseDe'+'pthMaps'](){for(let _0x37be3d=-0xa3+-0x23ee+0x2491,_0x24adec=this['effects']['length'];_0x37be3d<_0x24adec;_0x37be3d++)this['effects'][_0x37be3d]['effect']['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap']();}['_requestDe'+'pthMap'](){const _0x279938=this['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x279938&&(_0x279938['incrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(-0x1565+-0x360+0x18c5)));}['_releaseDe'+'pthMap'](){const _0x28179c=this['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x28179c&&(_0x28179c['decrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(0xc46+-0x281*-0x2+-0x1147)));}['destroy'](){for(let _0x5ef51e=0x1769+-0x15c5*-0x1+-0x2d2e,_0x349193=this['effects']['length'];_0x5ef51e<_0x349193;_0x5ef51e++)this['effects'][_0x5ef51e]['inputTarge'+'t']['destroy']();this['effects']['length']=-0x23b*-0x1+-0x1*-0x1941+-0x1b7c,this['disable']();}['enable'](){!this['enabled']&&this['effects']['length']&&(this['enabled']=!(-0x1118*0x1+0x5*-0x345+-0x2171*-0x1),this['_requestDe'+'pthMaps'](),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['destinatio'+'nRenderTar'+'get']=this['camera']['renderTarg'+'et'],this['camera']['renderTarg'+'et']=this['effects'][-0x1*-0x121f+-0x7e*0x19+0x1*-0x5d1]['inputTarge'+'t'],this['camera']['onPostproc'+'essing']=()=>{if(this['enabled']){let _0x4306b4=null;const _0x4fc2fa=this['effects']['length'];if(_0x4fc2fa)for(let _0x138955=-0x1e6e+-0x5*-0x471+0x839;_0x138955<_0x4fc2fa;_0x138955++){const _0x169734=this['effects'][_0x138955];let _0x4e9d41=_0x169734['outputTarg'+'et'];_0x138955===_0x4fc2fa-(0x11*0x243+-0x763*-0x1+-0x2dd5)&&(_0x4306b4=this['camera']['rect'],this['destinatio'+'nRenderTar'+'get']&&(_0x4e9d41=this['destinatio'+'nRenderTar'+'get'])),Q['pushGpuMar'+'ker'](this['app']['graphicsDe'+'vice'],_0x169734['name']),_0x169734['effect']['render'](_0x169734['inputTarge'+'t'],_0x4e9d41,_0x4306b4),Q['popGpuMark'+'er'](this['app']['graphicsDe'+'vice']);}}});}['disable'](){this['enabled']&&(this['enabled']=!(-0x21d4+0xa89*-0x1+-0x277*-0x12),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['_releaseDe'+'pthMaps'](),this['_destroyOf'+'fscreenTar'+'get'](this['_sourceTar'+'get']),this['camera']['renderTarg'+'et']=this['destinatio'+'nRenderTar'+'get'],this['camera']['onPostproc'+'essing']=null);}['_onCanvasR'+'esized'](_0x476e05,_0x3845fc){const _0x51e0ac=this['camera']['rect'],_0x50c71f=this['destinatio'+'nRenderTar'+'get'];_0x476e05=(_0x50c71f==null?void(-0x2*-0x115c+-0x38d*0x1+-0x1f2b):_0x50c71f['width'])??_0x476e05,_0x3845fc=(_0x50c71f==null?void(-0x1*-0x12b9+0x25c4+-0x387d):_0x50c71f['height'])??_0x3845fc,this['camera']['camera']['aspectRati'+'o']=_0x476e05*_0x51e0ac['z']/(_0x3845fc*_0x51e0ac['w']),this['resizeRend'+'erTargets']();}['resizeRend'+'erTargets'](){const _0xf84690=this['app']['graphicsDe'+'vice'],_0x530d58=this['destinatio'+'nRenderTar'+'get'],_0x1ed634=(_0x530d58==null?void(-0x11*-0xb+-0xa95+0xc2*0xd):_0x530d58['width'])??_0xf84690['width'],_0x5b837a=(_0x530d58==null?void(-0x1e2*0x14+0x72d*-0x1+-0x1f3*-0x17):_0x530d58['height'])??_0xf84690['height'],_0x983323=this['camera']['rect'],_0x4cdafc=Math['floor'](_0x983323['z']*_0x1ed634),_0x164873=Math['floor'](_0x983323['w']*_0x5b837a),_0xa1f147=this['effects'];for(let _0x5ea3b0=0x1fb1+-0x2324+0x373,_0x5c9ab5=_0xa1f147['length'];_0x5ea3b0<_0x5c9ab5;_0x5ea3b0++){const _0x307917=_0xa1f147[_0x5ea3b0];(_0x307917['inputTarge'+'t']['width']!==_0x4cdafc||_0x307917['inputTarge'+'t']['height']!==_0x164873)&&this['_resizeOff'+'screenTarg'+'et'](_0x307917['inputTarge'+'t']);}}['onCameraRe'+'ctChanged'](_0x1699af,_0x48cbe5,_0x675b2f){this['enabled']&&this['resizeRend'+'erTargets']();}}class Ir extends we{constructor(_0x1124ae,_0x2d830e){super(_0x1124ae,_0x2d830e),h(this,'onPostproc'+'essing',null),h(this,'_renderSce'+'neDepthMap',0xbc1+0x11e0+0x29*-0xb9),h(this,'_renderSce'+'neColorMap',-0xb0f+0x109*0x9+0x1be),h(this,'_sceneDept'+'hMapReques'+'ted',!(-0x359*-0x1+-0x1aef*0x1+0x3*0x7dd)),h(this,'_sceneColo'+'rMapReques'+'ted',!(0x1be5+0x1*-0x13ff+0x7e5*-0x1)),h(this,'_priority',-0x2f*0x26+-0x1b6d*-0x1+-0x1473),h(this,'_disablePo'+'stEffectsL'+'ayer',Il),h(this,'_camera',new Fl()),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_camera']['node']=_0x2d830e,this['_postEffec'+'ts']=new yF(_0x1124ae['app'],this));}['setShaderP'+'ass'](_0x565e11){const _0x3be940=Si['get'](this['system']['app']['graphicsDe'+'vice']),_0x59834d=_0x565e11?_0x3be940['allocate'](_0x565e11,{'isForward':!(0xa0*-0x18+0xacc*0x1+0x434*0x1)}):null;return this['_camera']['shaderPass'+'Info']=_0x59834d,_0x59834d['index'];}['getShaderP'+'ass'](){var _0x3e8023;return(_0x3e8023=this['_camera']['shaderPass'+'Info'])==null?void(-0x907*0x1+-0x29*0xb1+0x2560):_0x3e8023['name'];}set['renderPass'+'es'](_0x21ec84){this['_camera']['renderPass'+'es']=_0x21ec84||[],this['dirtyLayer'+'Compositio'+'nCameras'](),this['system']['app']['scene']['updateShad'+'ers']=!(0x1a8a+-0x153*0x7+0x1145*-0x1);}get['renderPass'+'es'](){return this['_camera']['renderPass'+'es'];}get['shaderPara'+'ms'](){return this['_camera']['shaderPara'+'ms'];}set['gammaCorre'+'ction'](_0x303d15){this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=_0x303d15;}get['gammaCorre'+'ction'](){return this['camera']['shaderPara'+'ms']['gammaCorre'+'ction'];}set['toneMappin'+'g'](_0x5404ad){this['camera']['shaderPara'+'ms']['toneMappin'+'g']=_0x5404ad;}get['toneMappin'+'g'](){return this['camera']['shaderPara'+'ms']['toneMappin'+'g'];}set['fog'](_0x1e9afb){this['_camera']['fogParams']=_0x1e9afb;}get['fog'](){return this['_camera']['fogParams'];}set['aperture'](_0x2aee24){this['_camera']['aperture']=_0x2aee24;}get['aperture'](){return this['_camera']['aperture'];}set['aspectRati'+'o'](_0x3d8364){this['_camera']['aspectRati'+'o']=_0x3d8364;}get['aspectRati'+'o'](){return this['_camera']['aspectRati'+'o'];}set['aspectRati'+'oMode'](_0x27ecb9){this['_camera']['aspectRati'+'oMode']=_0x27ecb9;}get['aspectRati'+'oMode'](){return this['_camera']['aspectRati'+'oMode'];}set['calculateP'+'rojection'](_0x536314){this['_camera']['calculateP'+'rojection']=_0x536314;}get['calculateP'+'rojection'](){return this['_camera']['calculateP'+'rojection'];}set['calculateT'+'ransform'](_0x2d5428){this['_camera']['calculateT'+'ransform']=_0x2d5428;}get['calculateT'+'ransform'](){return this['_camera']['calculateT'+'ransform'];}get['camera'](){return this['_camera'];}set['clearColor'](_0x168c20){this['_camera']['clearColor']=_0x168c20;}get['clearColor'](){return this['_camera']['clearColor'];}set['clearColor'+'Buffer'](_0x31915d){this['_camera']['clearColor'+'Buffer']=_0x31915d,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearColor'+'Buffer'](){return this['_camera']['clearColor'+'Buffer'];}set['clearDepth'+'Buffer'](_0xe543f3){this['_camera']['clearDepth'+'Buffer']=_0xe543f3,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearDepth'+'Buffer'](){return this['_camera']['clearDepth'+'Buffer'];}set['clearStenc'+'ilBuffer'](_0x207cde){this['_camera']['clearStenc'+'ilBuffer']=_0x207cde,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearStenc'+'ilBuffer'](){return this['_camera']['clearStenc'+'ilBuffer'];}set['cullFaces'](_0x2e4d8a){this['_camera']['cullFaces']=_0x2e4d8a;}get['cullFaces'](){return this['_camera']['cullFaces'];}set['disablePos'+'tEffectsLa'+'yer'](_0x16cbe5){this['_disablePo'+'stEffectsL'+'ayer']=_0x16cbe5,this['dirtyLayer'+'Compositio'+'nCameras']();}get['disablePos'+'tEffectsLa'+'yer'](){return this['_disablePo'+'stEffectsL'+'ayer'];}set['farClip'](_0x1d0bec){this['_camera']['farClip']=_0x1d0bec;}get['farClip'](){return this['_camera']['farClip'];}set['flipFaces'](_0x3106f0){this['_camera']['flipFaces']=_0x3106f0;}get['flipFaces'](){return this['_camera']['flipFaces'];}set['fov'](_0x263180){this['_camera']['fov']=_0x263180;}get['fov'](){return this['_camera']['fov'];}get['frustum'](){return this['_camera']['frustum'];}set['frustumCul'+'ling'](_0x36b4e4){this['_camera']['frustumCul'+'ling']=_0x36b4e4;}get['frustumCul'+'ling'](){return this['_camera']['frustumCul'+'ling'];}set['horizontal'+'Fov'](_0x3be543){this['_camera']['horizontal'+'Fov']=_0x3be543;}get['horizontal'+'Fov'](){return this['_camera']['horizontal'+'Fov'];}set['layers'](_0x4aae44){const _0x45ab93=this['_camera']['layers'],_0x4bdaa0=this['system']['app']['scene'];_0x45ab93['forEach'](_0x564a97=>{const _0x5166f2=_0x4bdaa0['layers']['getLayerBy'+'Id'](_0x564a97);_0x5166f2==null||_0x5166f2['removeCame'+'ra'](this);}),this['_camera']['layers']=_0x4aae44,this['enabled']&&this['entity']['enabled']&&_0x4aae44['forEach'](_0x373d1b=>{const _0x2946c2=_0x4bdaa0['layers']['getLayerBy'+'Id'](_0x373d1b);_0x2946c2==null||_0x2946c2['addCamera'](this);}),this['fire']('set:layers');}get['layers'](){return this['_camera']['layers'];}get['layersSet'](){return this['_camera']['layersSet'];}set['jitter'](_0x5bc321){this['_camera']['jitter']=_0x5bc321;}get['jitter'](){return this['_camera']['jitter'];}set['nearClip'](_0x766dd8){this['_camera']['nearClip']=_0x766dd8;}get['nearClip'](){return this['_camera']['nearClip'];}set['orthoHeigh'+'t'](_0x48dd6a){this['_camera']['orthoHeigh'+'t']=_0x48dd6a;}get['orthoHeigh'+'t'](){return this['_camera']['orthoHeigh'+'t'];}get['postEffect'+'s'](){return this['_postEffec'+'ts'];}get['postEffect'+'sEnabled'](){return this['_postEffec'+'ts']['enabled'];}set['priority'](_0x27a69a){this['_priority']=_0x27a69a,this['dirtyLayer'+'Compositio'+'nCameras']();}get['priority'](){return this['_priority'];}set['projection'](_0x53d04a){this['_camera']['projection']=_0x53d04a;}get['projection'](){return this['_camera']['projection'];}get['projection'+'Matrix'](){return this['_camera']['projection'+'Matrix'];}set['rect'](_0x308f73){this['_camera']['rect']=_0x308f73,this['fire']('set:rect',this['_camera']['rect']);}get['rect'](){return this['_camera']['rect'];}set['renderScen'+'eColorMap'](_0x49b26d){_0x49b26d&&!this['_sceneColo'+'rMapReques'+'ted']?(this['requestSce'+'neColorMap'](!(0x1*-0x44d+-0xf2e*0x2+0x1*0x22a9)),this['_sceneColo'+'rMapReques'+'ted']=!(-0x173*0x7+-0x2391+0x1*0x2db6)):this['_sceneColo'+'rMapReques'+'ted']&&(this['requestSce'+'neColorMap'](!(0x1f0f+-0x2626+0x2*0x38c)),this['_sceneColo'+'rMapReques'+'ted']=!(0x1f17+-0x15d8+-0x93e));}get['renderScen'+'eColorMap'](){return this['_renderSce'+'neColorMap']>0x1*0x14f+-0x1596+0x1*0x1447;}set['renderScen'+'eDepthMap'](_0x23cdfc){_0x23cdfc&&!this['_sceneDept'+'hMapReques'+'ted']?(this['requestSce'+'neDepthMap'](!(0x25ee+0x2134+-0x17b6*0x3)),this['_sceneDept'+'hMapReques'+'ted']=!(-0x11b1+-0x1*-0x1fef+-0xe3e)):this['_sceneDept'+'hMapReques'+'ted']&&(this['requestSce'+'neDepthMap'](!(-0x3d*-0x3d+-0xf35+0xad*0x1)),this['_sceneDept'+'hMapReques'+'ted']=!(0x12e5*0x1+0x18*0x14a+0xc*-0x427));}get['renderScen'+'eDepthMap'](){return this['_renderSce'+'neDepthMap']>0x23cc*0x1+0x4*0x544+-0x38dc;}set['renderTarg'+'et'](_0x44ba96){w['call'](()=>{this['_camera']['renderPass'+'es']['length']>-0x2315+0x1*0x1ad3+0x842&&w['warn']('Setting\x20a\x20'+'render\x20tar'+'get\x20on\x20the'+'\x20camera\x20'+this['entity']['name']+('\x20after\x20the'+'\x20render\x20pa'+'sses\x20is\x20no'+'t\x20supporte'+'d,\x20set\x20it\x20'+'up\x20first.'));}),this['_camera']['renderTarg'+'et']=_0x44ba96,this['dirtyLayer'+'Compositio'+'nCameras']();}get['renderTarg'+'et'](){return this['_camera']['renderTarg'+'et'];}set['scissorRec'+'t'](_0x288ca8){this['_camera']['scissorRec'+'t']=_0x288ca8;}get['scissorRec'+'t'](){return this['_camera']['scissorRec'+'t'];}set['sensitivit'+'y'](_0x396acc){this['_camera']['sensitivit'+'y']=_0x396acc;}get['sensitivit'+'y'](){return this['_camera']['sensitivit'+'y'];}set['shutter'](_0x93c468){this['_camera']['shutter']=_0x93c468;}get['shutter'](){return this['_camera']['shutter'];}get['viewMatrix'](){return this['_camera']['viewMatrix'];}['_enableDep'+'thLayer'](_0x2a085d){if(this['layers']['find'](_0x4b3a7e=>_0x4b3a7e===ps)){const _0x1eddf3=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x2a085d?_0x1eddf3==null||_0x1eddf3['incrementC'+'ounter']():_0x1eddf3==null||_0x1eddf3['decrementC'+'ounter']();}else{if(_0x2a085d)return!(-0x149*0x1+-0xb*0x37d+0x27a9);}return!(0x23ca+0x1d01+-0x9*0x733);}['requestSce'+'neColorMap'](_0x761c05){this['_renderSce'+'neColorMap']+=_0x761c05?0x1*-0x1cad+-0x1*0x61f+0x22cd:-(0x1d7a+0x1b19*-0x1+-0x13*0x20),w['assert'](this['_renderSce'+'neColorMap']>=-0x1*-0x1a19+0x1e9e+-0x38b7*0x1),this['_enableDep'+'thLayer'](_0x761c05)||w['warnOnce']('CameraComp'+'onent.requ'+'estSceneCo'+'lorMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassCol'+'orGrab'](this['system']['app']['graphicsDe'+'vice'],this['renderScen'+'eColorMap']),this['system']['app']['scene']['layers']['markDirty']();}['requestSce'+'neDepthMap'](_0x4b8b07){this['_renderSce'+'neDepthMap']+=_0x4b8b07?-0x43b+-0x112*-0xd+-0x9ae:-(0x26bc+-0x26ba+0x1*-0x1),w['assert'](this['_renderSce'+'neDepthMap']>=0x1fcf+0x1426+-0x33f5),this['_enableDep'+'thLayer'](_0x4b8b07)||w['warnOnce']('CameraComp'+'onent.requ'+'estSceneDe'+'pthMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassDep'+'thGrab'](this['system']['app']['graphicsDe'+'vice'],this['system']['app']['renderer'],this['renderScen'+'eDepthMap']),this['system']['app']['scene']['layers']['markDirty']();}['dirtyLayer'+'Compositio'+'nCameras'](){const _0x5d0c42=this['system']['app']['scene']['layers'];_0x5d0c42['_dirty']=!(-0x945*0x3+-0x2ef*-0x4+0x1013);}['screenToWo'+'rld'](_0x8ca839,_0x55c2f0,_0x20d793,_0x47faba){const _0x5490d5=this['system']['app']['graphicsDe'+'vice'],{width:_0x3b5248,height:_0x464ce8}=_0x5490d5['clientRect'];return this['_camera']['screenToWo'+'rld'](_0x8ca839,_0x55c2f0,_0x20d793,_0x3b5248,_0x464ce8,_0x47faba);}['worldToScr'+'een'](_0x63c65d,_0x582a84){const _0x3c7051=this['system']['app']['graphicsDe'+'vice'],{width:_0x3edd20,height:_0x34981a}=_0x3c7051['clientRect'];return this['_camera']['worldToScr'+'een'](_0x63c65d,_0x3edd20,_0x34981a,_0x582a84);}['onAppPrere'+'nder'](){this['_camera']['_viewMatDi'+'rty']=!(-0x319*-0x5+-0x19d*-0x7+0x2*-0xd64),this['_camera']['_viewProjM'+'atDirty']=!(0x11*-0x208+-0x15*0x7f+0x2cf3);}['addCameraT'+'oLayers'](){const _0xc8be6d=this['layers'];for(let _0x4fa067=0x4*-0x5f4+0x20c5*0x1+-0x8f5;_0x4fa067<_0xc8be6d['length'];_0x4fa067++){const _0x26eeb4=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0xc8be6d[_0x4fa067]);_0x26eeb4&&_0x26eeb4['addCamera'](this);}}['removeCame'+'raFromLaye'+'rs'](){const _0x34149c=this['layers'];for(let _0x574a0b=-0x3c*0x15+0x269f+-0x21b3;_0x574a0b<_0x34149c['length'];_0x574a0b++){const _0x2b8ff7=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x34149c[_0x574a0b]);_0x2b8ff7&&_0x2b8ff7['removeCame'+'ra'](this);}}['onLayersCh'+'anged'](_0x5378b1,_0xd3a309){this['addCameraT'+'oLayers'](),_0x5378b1['off']('add',this['onLayerAdd'+'ed'],this),_0x5378b1['off']('remove',this['onLayerRem'+'oved'],this),_0xd3a309['on']('add',this['onLayerAdd'+'ed'],this),_0xd3a309['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x27c957){this['layers']['indexOf'](_0x27c957['id'])<-0x22eb+-0xb5b*0x3+0x44fc||_0x27c957['addCamera'](this);}['onLayerRem'+'oved'](_0x1d1d29){this['layers']['indexOf'](_0x1d1d29['id'])<-0x1f61*-0x1+0x23e2*0x1+-0x1*0x4343||_0x1d1d29['removeCame'+'ra'](this);}['onEnable'](){var _0x4b1dda,_0xf399a2,_0x8210cf;const _0x10dd82=this['system']['app']['scene'],_0x10a566=_0x10dd82['layers'];this['system']['addCamera'](this),(_0x4b1dda=this['_evtLayers'+'Changed'])==null||_0x4b1dda['off'](),this['_evtLayers'+'Changed']=_0x10dd82['on']('set:layers',this['onLayersCh'+'anged'],this),_0x10a566&&((_0xf399a2=this['_evtLayerA'+'dded'])==null||_0xf399a2['off'](),this['_evtLayerA'+'dded']=_0x10a566['on']('add',this['onLayerAdd'+'ed'],this),(_0x8210cf=this['_evtLayerR'+'emoved'])==null||_0x8210cf['off'](),this['_evtLayerR'+'emoved']=_0x10a566['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addCameraT'+'oLayers'](),this['postEffect'+'s']['enable']();}['onDisable'](){var _0x2a3661,_0x5f4dda,_0x55c864;const _0x595b96=this['system']['app']['scene']['layers'];this['postEffect'+'s']['disable'](),this['removeCame'+'raFromLaye'+'rs'](),(_0x2a3661=this['_evtLayers'+'Changed'])==null||_0x2a3661['off'](),this['_evtLayers'+'Changed']=null,_0x595b96&&((_0x5f4dda=this['_evtLayerA'+'dded'])==null||_0x5f4dda['off'](),this['_evtLayerA'+'dded']=null,(_0x55c864=this['_evtLayerR'+'emoved'])==null||_0x55c864['off'](),this['_evtLayerR'+'emoved']=null),this['system']['removeCame'+'ra'](this);}['onRemove'](){this['onDisable'](),this['off'](),this['camera']['destroy']();}['calculateA'+'spectRatio'](_0x4d62e){const _0x1fa828=this['system']['app']['graphicsDe'+'vice'],_0x82a4b9=_0x4d62e?_0x4d62e['width']:_0x1fa828['width'],_0x3fae6d=_0x4d62e?_0x4d62e['height']:_0x1fa828['height'];return _0x82a4b9*this['rect']['z']/(_0x3fae6d*this['rect']['w']);}['frameUpdat'+'e'](_0x5831ba){this['aspectRati'+'oMode']===hm&&(this['aspectRati'+'o']=this['calculateA'+'spectRatio'](_0x5831ba));}['startXr'](_0x1cd717,_0x2521b3,_0x33a49e){this['system']['app']['xr']['start'](this,_0x1cd717,_0x2521b3,_0x33a49e);}['endXr'](_0x3dda94){if(!this['_camera']['xr']){_0x3dda94&&_0x3dda94(new Error('Camera\x20is\x20'+'not\x20in\x20XR'));return;}this['_camera']['xr']['end'](_0x3dda94);}['copy'](_0x3b4063){this['aperture']=_0x3b4063['aperture'],this['aspectRati'+'o']=_0x3b4063['aspectRati'+'o'],this['aspectRati'+'oMode']=_0x3b4063['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x3b4063['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x3b4063['calculateT'+'ransform'],this['clearColor']=_0x3b4063['clearColor'],this['clearColor'+'Buffer']=_0x3b4063['clearColor'+'Buffer'],this['clearDepth'+'Buffer']=_0x3b4063['clearDepth'+'Buffer'],this['clearStenc'+'ilBuffer']=_0x3b4063['clearStenc'+'ilBuffer'],this['cullFaces']=_0x3b4063['cullFaces'],this['disablePos'+'tEffectsLa'+'yer']=_0x3b4063['disablePos'+'tEffectsLa'+'yer'],this['farClip']=_0x3b4063['farClip'],this['flipFaces']=_0x3b4063['flipFaces'],this['fov']=_0x3b4063['fov'],this['frustumCul'+'ling']=_0x3b4063['frustumCul'+'ling'],this['horizontal'+'Fov']=_0x3b4063['horizontal'+'Fov'],this['layers']=_0x3b4063['layers'],this['nearClip']=_0x3b4063['nearClip'],this['orthoHeigh'+'t']=_0x3b4063['orthoHeigh'+'t'],this['priority']=_0x3b4063['priority'],this['projection']=_0x3b4063['projection'],this['rect']=_0x3b4063['rect'],this['renderTarg'+'et']=_0x3b4063['renderTarg'+'et'],this['scissorRec'+'t']=_0x3b4063['scissorRec'+'t'],this['sensitivit'+'y']=_0x3b4063['sensitivit'+'y'],this['shutter']=_0x3b4063['shutter'];}}class vF{constructor(){this['enabled']=!(0x40*0x17+-0x7fa+0x23a);}}const p0=['enabled'];class xF extends ct{constructor(_0xe483cc){super(_0xe483cc),h(this,'cameras',[]),(this['id']='camera',this['ComponentT'+'ype']=Ir,this['DataType']=vF,this['schema']=p0,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['on']('prerender',this['onAppPrere'+'nder'],this));}['initialize'+'ComponentD'+'ata'](_0x347a59,_0xc83487,_0x5c72ee){_0x5c72ee=['aspectRati'+'o','aspectRati'+'oMode','calculateP'+'rojection','calculateT'+'ransform','clearColor','clearColor'+'Buffer','clearDepth'+'Buffer','clearStenc'+'ilBuffer','renderScen'+'eColorMap','renderScen'+'eDepthMap','cullFaces','farClip','flipFaces','fog','fov','frustumCul'+'ling','horizontal'+'Fov','layers','renderTarg'+'et','nearClip','orthoHeigh'+'t','projection','priority','rect','scissorRec'+'t','aperture','shutter','sensitivit'+'y','gammaCorre'+'ction','toneMappin'+'g'];for(let _0x3b3f3b=-0x51b*0x1+-0xd*-0x152+0x3f*-0x31;_0x3b3f3b<_0x5c72ee['length'];_0x3b3f3b++){const _0x450757=_0x5c72ee[_0x3b3f3b];if(_0xc83487['hasOwnProp'+'erty'](_0x450757)){const _0x519072=_0xc83487[_0x450757];switch(_0x450757){case'rect':case'scissorRec'+'t':Array['isArray'](_0x519072)?_0x347a59[_0x450757]=new re(_0x519072[-0x1d09+0x1cb4+0x55],_0x519072[0x1234+-0x10f+-0x4*0x449],_0x519072[0x211*0xb+0x1ead+-0x3566],_0x519072[-0x2657+-0x1e5*0xd+0x3efb]):_0x347a59[_0x450757]=_0x519072;break;case'clearColor':Array['isArray'](_0x519072)?_0x347a59[_0x450757]=new ie(_0x519072[-0xc06+0x12d6+-0x6d0],_0x519072[0x6f*-0x18+-0x1f7+-0x120*-0xb],_0x519072[0x19ed*-0x1+0xb46+0xea9],_0x519072[0x2344+-0x400+-0x1f41]):_0x347a59[_0x450757]=_0x519072;break;default:_0x347a59[_0x450757]=_0x519072;break;}}}super['initialize'+'ComponentD'+'ata'](_0x347a59,_0xc83487,['enabled']);}['cloneCompo'+'nent'](_0x560051,_0x1d4dd2){const _0x4935b5=_0x560051['camera'];return this['addCompone'+'nt'](_0x1d4dd2,{'aspectRatio':_0x4935b5['aspectRati'+'o'],'aspectRatioMode':_0x4935b5['aspectRati'+'oMode'],'calculateProjection':_0x4935b5['calculateP'+'rojection'],'calculateTransform':_0x4935b5['calculateT'+'ransform'],'clearColor':_0x4935b5['clearColor'],'clearColorBuffer':_0x4935b5['clearColor'+'Buffer'],'clearDepthBuffer':_0x4935b5['clearDepth'+'Buffer'],'clearStencilBuffer':_0x4935b5['clearStenc'+'ilBuffer'],'renderSceneDepthMap':_0x4935b5['renderScen'+'eDepthMap'],'renderSceneColorMap':_0x4935b5['renderScen'+'eColorMap'],'cullFaces':_0x4935b5['cullFaces'],'enabled':_0x4935b5['enabled'],'farClip':_0x4935b5['farClip'],'flipFaces':_0x4935b5['flipFaces'],'fov':_0x4935b5['fov'],'frustumCulling':_0x4935b5['frustumCul'+'ling'],'horizontalFov':_0x4935b5['horizontal'+'Fov'],'layers':_0x4935b5['layers'],'renderTarget':_0x4935b5['renderTarg'+'et'],'nearClip':_0x4935b5['nearClip'],'orthoHeight':_0x4935b5['orthoHeigh'+'t'],'projection':_0x4935b5['projection'],'priority':_0x4935b5['priority'],'rect':_0x4935b5['rect'],'scissorRect':_0x4935b5['scissorRec'+'t'],'aperture':_0x4935b5['aperture'],'sensitivity':_0x4935b5['sensitivit'+'y'],'shutter':_0x4935b5['shutter'],'gammaCorrection':_0x4935b5['gammaCorre'+'ction'],'toneMapping':_0x4935b5['toneMappin'+'g']});}['onBeforeRe'+'move'](_0x4cc3bd,_0xac8adf){this['removeCame'+'ra'](_0xac8adf),_0xac8adf['onRemove']();}['onAppPrere'+'nder'](){for(let _0x4f839e=-0x3*-0xc1a+0x2174+-0x45c2,_0x485985=this['cameras']['length'];_0x4f839e<_0x485985;_0x4f839e++)this['cameras'][_0x4f839e]['onAppPrere'+'nder']();}['addCamera'](_0x3057e6){this['cameras']['push'](_0x3057e6),ul(this['cameras']);}['removeCame'+'ra'](_0x59bfdb){const _0x5a2a52=this['cameras']['indexOf'](_0x59bfdb);_0x5a2a52>=-0x1125+0x1*-0x22f2+0x3417&&(this['cameras']['splice'](_0x5a2a52,-0x11*-0xde+0xbd+-0x1*0xf7a),ul(this['cameras']));}['destroy'](){this['app']['off']('prerender',this['onAppPrere'+'nder'],this),super['destroy']();}}we['_buildAcce'+'ssors'](Ir['prototype'],p0);class m0{constructor(){h(this,'enabled',!(0x69*0x51+0x78+-0x21b1)),h(this,'light'),h(this,'type','directiona'+'l'),h(this,'color',new ie(-0x1427+-0x271+0x59*0x41,-0xffd*0x1+-0xf*-0x28b+-0x1627,0x72e+-0x12a8+0xb7b*0x1)),h(this,'intensity',0x3a7+0x16ce+-0x1a74),h(this,'luminance',-0x1a5e+-0x1d88+0x37e6),h(this,'shape',Ys),h(this,'affectSpec'+'ularity',!(-0xca6*-0x3+0x1cf6+-0x42e8)),h(this,'castShadow'+'s',!(-0x12f2+-0x13ba+0x26ad)),h(this,'shadowDist'+'ance',-0xd05+0x1d18+-0xfeb),h(this,'shadowInte'+'nsity',-0x6a2+0x1056+-0x9b3*0x1),h(this,'shadowReso'+'lution',0x157e+-0x222b+0x10ad),h(this,'shadowBias',-0x7*0x2fc+-0x15*0x3e+0x532*0x5+0.05),h(this,'numCascade'+'s',0xd1+0x1ae4+0x49e*-0x6),h(this,'cascadeBle'+'nd',-0x103d*-0x2+0x454*0x3+-0x2d76),h(this,'bakeNumSam'+'ples',0x1*-0xad8+0x23b5+0xc6e*-0x2),h(this,'bakeArea',0x1*0x28a+0x1ad1+0x1f5*-0xf),h(this,'cascadeDis'+'tribution',0xb*-0x151+0x67*-0xf+0x4*0x521+0.5),h(this,'normalOffs'+'etBias',-0x2*0x498+0x544*0x6+-0x1668),h(this,'range',-0x16ba+0x1a83+-0x7*0x89),h(this,'innerConeA'+'ngle',0x100+0xd99+-0xe71),h(this,'outerConeA'+'ngle',-0x24ff+0x2d*-0x75+-0x471*-0xd),h(this,'falloffMod'+'e',Qp),h(this,'shadowType',$s),h(this,'vsmBlurSiz'+'e',-0x119a+-0x4e9+-0xb47*-0x2),h(this,'vsmBlurMod'+'e',em),h(this,'vsmBias',(0x195f+-0x1c4*-0x2+-0x1ce7+0.01)*(0x12*0xe8+0x9d9*0x1+-0x25*0xb5+0.25)),h(this,'cookieAsse'+'t',null),h(this,'cookie',null),h(this,'cookieInte'+'nsity',-0x1*-0x20b9+0x35*-0x93+-0x5*0x75),h(this,'cookieFall'+'off',!(-0x13d2+-0x1*0xd15+-0x1*-0x20e7)),h(this,'cookieChan'+'nel','rgb'),h(this,'cookieAngl'+'e',0x159*0x8+0x77*-0x2e+-0x2*-0x54d),h(this,'cookieScal'+'e',null),h(this,'cookieOffs'+'et',null),h(this,'shadowUpda'+'teMode',lm),h(this,'mask',0x69b+-0x661*0x1+0x1*-0x39),h(this,'affectDyna'+'mic',!(0xc7*0x9+-0x1f57+0x1858)),h(this,'affectLigh'+'tmapped',!(-0x10e1+0x51*0x69+-0x1*0x1057)),h(this,'bake',!(-0x8*0x3f8+0x2349*-0x1+-0x2185*-0x2)),h(this,'bakeDir',!(-0x1891+0x2*-0xb57+0x3b*0xcd)),h(this,'isStatic',!(-0x1b8f+-0x1327+0x2eb7*0x1)),h(this,'layers',[er]),h(this,'penumbraSi'+'ze',-0x946+0x17d1*-0x1+0x2118),h(this,'penumbraFa'+'lloff',-0x1f*0x113+-0xdb6+0x2f04),h(this,'shadowSamp'+'les',0x24c+0x10a1+-0x12dd),h(this,'shadowBloc'+'kerSamples',-0x28*0xba+-0x1f5c+0x3c7c);}}const Ho=Object['keys'](new m0());class TF extends we{constructor(){super(...arguments),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_cookieAss'+'et',null),h(this,'_cookieAss'+'etId',null),h(this,'_cookieAss'+'etAdd',!(-0x5d*-0x67+0x3*0x92+0x20*-0x139)),h(this,'_cookieMat'+'rix',null);}get['data'](){const _0x35a155=this['system']['store'][this['entity']['getGuid']()];return _0x35a155?_0x35a155['data']:null;}set['enabled'](_0x1f38b9){this['_setValue']('enabled',_0x1f38b9,function(_0x4c9ff6,_0x505113){this['onSetEnabl'+'ed'](null,_0x505113,_0x4c9ff6);});}get['enabled'](){return this['data']['enabled'];}set['light'](_0x29673e){this['_setValue']('light',_0x29673e);}get['light'](){return this['data']['light'];}set['type'](_0x55ead4){this['_setValue']('type',_0x55ead4,function(_0x5f22cf,_0x474c97){this['system']['changeType'](this,_0x474c97,_0x5f22cf),this['refreshPro'+'perties']();});}get['type'](){return this['data']['type'];}set['color'](_0x331e3b){this['_setValue']('color',_0x331e3b,function(_0x241bec,_0x24d79f){this['light']['setColor'](_0x241bec);},!(-0x971*0x1+-0xb8b+0x14fc));}get['color'](){return this['data']['color'];}set['intensity'](_0x188feb){this['_setValue']('intensity',_0x188feb,function(_0x2cc55d,_0x396a0a){this['light']['intensity']=_0x2cc55d;});}get['intensity'](){return this['data']['intensity'];}set['luminance'](_0x2443ff){this['_setValue']('luminance',_0x2443ff,function(_0x44026d,_0x17eca0){this['light']['luminance']=_0x44026d;});}get['luminance'](){return this['data']['luminance'];}set['shape'](_0x44dbc3){this['_setValue']('shape',_0x44dbc3,function(_0x1ac4d0,_0x3d6163){this['light']['shape']=_0x1ac4d0;});}get['shape'](){return this['data']['shape'];}set['affectSpec'+'ularity'](_0x457a9a){this['_setValue']('affectSpec'+'ularity',_0x457a9a,function(_0x28ff80,_0x27c1f3){this['light']['affectSpec'+'ularity']=_0x28ff80;});}get['affectSpec'+'ularity'](){return this['data']['affectSpec'+'ularity'];}set['castShadow'+'s'](_0x56df50){this['_setValue']('castShadow'+'s',_0x56df50,function(_0x264e2d,_0x3d72d6){this['light']['castShadow'+'s']=_0x264e2d;});}get['castShadow'+'s'](){return this['data']['castShadow'+'s'];}set['shadowDist'+'ance'](_0x37e617){this['_setValue']('shadowDist'+'ance',_0x37e617,function(_0x256fe5,_0x12849c){this['light']['shadowDist'+'ance']=_0x256fe5;});}get['shadowDist'+'ance'](){return this['data']['shadowDist'+'ance'];}set['shadowInte'+'nsity'](_0x56ac1f){this['_setValue']('shadowInte'+'nsity',_0x56ac1f,function(_0x118eca,_0x337315){this['light']['shadowInte'+'nsity']=_0x118eca;});}get['shadowInte'+'nsity'](){return this['data']['shadowInte'+'nsity'];}set['shadowReso'+'lution'](_0x2ecc0e){this['_setValue']('shadowReso'+'lution',_0x2ecc0e,function(_0x211898,_0x414f66){this['light']['shadowReso'+'lution']=_0x211898;});}get['shadowReso'+'lution'](){return this['data']['shadowReso'+'lution'];}set['shadowBias'](_0x34bbec){this['_setValue']('shadowBias',_0x34bbec,function(_0x7c06bb,_0x1b02a5){this['light']['shadowBias']=-(-0x2533+0x278+0x22bb+0.01)*Y['clamp'](_0x7c06bb,0x343*0x9+-0x1bae+-0x1ad,0x591+0xc7*0xc+-0xee4);});}get['shadowBias'](){return this['data']['shadowBias'];}set['numCascade'+'s'](_0xe3516d){this['_setValue']('numCascade'+'s',_0xe3516d,function(_0x347a89,_0xe87b69){this['light']['numCascade'+'s']=Y['clamp'](Math['floor'](_0x347a89),-0xc*0xda+-0x9b7*-0x4+0x1*-0x1ca3,0x1c77*-0x1+-0x183d+0x34b8);});}get['numCascade'+'s'](){return this['data']['numCascade'+'s'];}set['cascadeBle'+'nd'](_0xc6dc1f){this['_setValue']('cascadeBle'+'nd',_0xc6dc1f,function(_0x29bb1d,_0x3b6129){this['light']['cascadeBle'+'nd']=Y['clamp'](_0x29bb1d,-0x2*0x308+0x1211+-0xc01,0x2*0xd77+0xbad+0xcde*-0x3);});}get['cascadeBle'+'nd'](){return this['data']['cascadeBle'+'nd'];}set['bakeNumSam'+'ples'](_0x57feaa){this['_setValue']('bakeNumSam'+'ples',_0x57feaa,function(_0x2ccc97,_0x14a064){this['light']['bakeNumSam'+'ples']=Y['clamp'](Math['floor'](_0x2ccc97),0x464+0x20cf+-0x2532,-0x1cc8+-0xd18+0x5*0x893);});}get['bakeNumSam'+'ples'](){return this['data']['bakeNumSam'+'ples'];}set['bakeArea'](_0xb35ed1){this['_setValue']('bakeArea',_0xb35ed1,function(_0x13c1bd,_0x3c53df){this['light']['bakeArea']=Y['clamp'](_0x13c1bd,0xf1+0x1926+0x1*-0x1a17,-0x1171+-0x4c6+0x16eb*0x1);});}get['bakeArea'](){return this['data']['bakeArea'];}set['cascadeDis'+'tribution'](_0x31b1f9){this['_setValue']('cascadeDis'+'tribution',_0x31b1f9,function(_0x549630,_0x2eb27e){this['light']['cascadeDis'+'tribution']=Y['clamp'](_0x549630,0x1c67*0x1+0x1bef+-0x3856*0x1,-0x21*0xc1+0x845+0x109d);});}get['cascadeDis'+'tribution'](){return this['data']['cascadeDis'+'tribution'];}set['normalOffs'+'etBias'](_0x54da28){this['_setValue']('normalOffs'+'etBias',_0x54da28,function(_0x383281,_0x35bcf2){this['light']['normalOffs'+'etBias']=Y['clamp'](_0x383281,-0x45*0x3+-0x12*-0x1f8+-0x22a1,-0x1*-0x127b+0x1d9f*0x1+-0x3019);});}get['normalOffs'+'etBias'](){return this['data']['normalOffs'+'etBias'];}set['range'](_0x25240f){this['_setValue']('range',_0x25240f,function(_0x442307,_0x1b0e31){this['light']['attenuatio'+'nEnd']=_0x442307;});}get['range'](){return this['data']['range'];}set['innerConeA'+'ngle'](_0x305206){this['_setValue']('innerConeA'+'ngle',_0x305206,function(_0x46c9a1,_0x35174c){this['light']['innerConeA'+'ngle']=_0x46c9a1;});}get['innerConeA'+'ngle'](){return this['data']['innerConeA'+'ngle'];}set['outerConeA'+'ngle'](_0x1d6e42){this['_setValue']('outerConeA'+'ngle',_0x1d6e42,function(_0x10b010,_0x3ccd1f){this['light']['outerConeA'+'ngle']=_0x10b010;});}get['outerConeA'+'ngle'](){return this['data']['outerConeA'+'ngle'];}set['falloffMod'+'e'](_0x2882fd){this['_setValue']('falloffMod'+'e',_0x2882fd,function(_0x29e8e2,_0x12f0fd){this['light']['falloffMod'+'e']=_0x29e8e2;});}get['falloffMod'+'e'](){return this['data']['falloffMod'+'e'];}set['shadowType'](_0x2b164a){this['_setValue']('shadowType',_0x2b164a,function(_0xef9024,_0x4ce39e){this['light']['shadowType']=_0xef9024;});}get['shadowType'](){return this['data']['shadowType'];}set['vsmBlurSiz'+'e'](_0x429043){this['_setValue']('vsmBlurSiz'+'e',_0x429043,function(_0x3aebbf,_0x471352){this['light']['vsmBlurSiz'+'e']=_0x3aebbf;});}get['vsmBlurSiz'+'e'](){return this['data']['vsmBlurSiz'+'e'];}set['vsmBlurMod'+'e'](_0x15067b){this['_setValue']('vsmBlurMod'+'e',_0x15067b,function(_0x1e3123,_0xc029de){this['light']['vsmBlurMod'+'e']=_0x1e3123;});}get['vsmBlurMod'+'e'](){return this['data']['vsmBlurMod'+'e'];}set['vsmBias'](_0x5b7832){this['_setValue']('vsmBias',_0x5b7832,function(_0x46a3fe,_0x1f20b3){this['light']['vsmBias']=Y['clamp'](_0x46a3fe,0x5*-0x199+-0xa38+0x1235,0x1f7a+-0x649*-0x6+-0x452f);});}get['vsmBias'](){return this['data']['vsmBias'];}set['cookieAsse'+'t'](_0x56a1af){this['_setValue']('cookieAsse'+'t',_0x56a1af,function(_0x360ca8,_0x5e7ec8){if(!(this['_cookieAss'+'etId']&&(_0x360ca8 instanceof pe&&_0x360ca8['id']===this['_cookieAss'+'etId']||_0x360ca8===this['_cookieAss'+'etId']))){if(this['onCookieAs'+'setRemove'](),this['_cookieAss'+'etId']=null,_0x360ca8 instanceof pe)this['data']['cookieAsse'+'t']=_0x360ca8['id'],this['_cookieAss'+'etId']=_0x360ca8['id'],this['onCookieAs'+'setAdd'](_0x360ca8);else{if(typeof _0x360ca8=='number'){this['_cookieAss'+'etId']=_0x360ca8;const _0x139ef2=this['system']['app']['assets']['get'](_0x360ca8);_0x139ef2?this['onCookieAs'+'setAdd'](_0x139ef2):(this['_cookieAss'+'etAdd']=!(0x7bf+0x19d6+-0x1*0x2195),this['system']['app']['assets']['on']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this));}}}});}get['cookieAsse'+'t'](){return this['data']['cookieAsse'+'t'];}set['cookie'](_0x36d00e){this['_setValue']('cookie',_0x36d00e,function(_0xe829f7,_0x39a7e3){this['light']['cookie']=_0xe829f7;});}get['cookie'](){return this['data']['cookie'];}set['cookieInte'+'nsity'](_0x50d6b1){this['_setValue']('cookieInte'+'nsity',_0x50d6b1,function(_0x1dc5fe,_0x28e4df){this['light']['cookieInte'+'nsity']=Y['clamp'](_0x1dc5fe,0xcb9+0xf*0x1f3+-0x106*0x29,0x46*0x59+0x1a97+-0x32ec);});}get['cookieInte'+'nsity'](){return this['data']['cookieInte'+'nsity'];}set['cookieFall'+'off'](_0x4174bd){this['_setValue']('cookieFall'+'off',_0x4174bd,function(_0x4fa92e,_0x36b107){this['light']['cookieFall'+'off']=_0x4fa92e;});}get['cookieFall'+'off'](){return this['data']['cookieFall'+'off'];}set['cookieChan'+'nel'](_0x31c9ba){this['_setValue']('cookieChan'+'nel',_0x31c9ba,function(_0x1fc343,_0x5d7de7){this['light']['cookieChan'+'nel']=_0x1fc343;});}get['cookieChan'+'nel'](){return this['data']['cookieChan'+'nel'];}set['cookieAngl'+'e'](_0x28789f){this['_setValue']('cookieAngl'+'e',_0x28789f,function(_0x30b160,_0x56b4af){if(_0x30b160!==-0x25fb+-0x208c*0x1+-0x311*-0x17||this['cookieScal'+'e']!==null){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new re());let _0xf36653=-0x69f+-0x1279+0x1919,_0x1b73d7=-0x1224+-0x1f33*0x1+0x3158;this['cookieScal'+'e']&&(_0xf36653=this['cookieScal'+'e']['x'],_0x1b73d7=this['cookieScal'+'e']['y']);const _0x326b1d=Math['cos'](_0x30b160*Y['DEG_TO_RAD']),_0x483601=Math['sin'](_0x30b160*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x326b1d/_0xf36653,-_0x483601/_0xf36653,_0x483601/_0x1b73d7,_0x326b1d/_0x1b73d7),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;});}get['cookieAngl'+'e'](){return this['data']['cookieAngl'+'e'];}set['cookieScal'+'e'](_0x52fcb5){this['_setValue']('cookieScal'+'e',_0x52fcb5,function(_0x5dc7be,_0x191ec7){if(_0x5dc7be!==null||this['cookieAngl'+'e']!==0x1*-0xa6d+-0x219d*0x1+0x2c0a){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new re());const _0x36e0d0=_0x5dc7be['x'],_0x50f022=_0x5dc7be['y'],_0x5e09b4=Math['cos'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']),_0x21af3b=Math['sin'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x5e09b4/_0x36e0d0,-_0x21af3b/_0x36e0d0,_0x21af3b/_0x50f022,_0x5e09b4/_0x50f022),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;},!(-0x108f+-0x13e*0x1+-0x28b*-0x7));}get['cookieScal'+'e'](){return this['data']['cookieScal'+'e'];}set['cookieOffs'+'et'](_0x11fd84){this['_setValue']('cookieOffs'+'et',_0x11fd84,function(_0x5a9fad,_0x12a93d){this['light']['cookieOffs'+'et']=_0x5a9fad;},!(-0x5*0x718+-0x1f9c+0x4314));}get['cookieOffs'+'et'](){return this['data']['cookieOffs'+'et'];}set['shadowUpda'+'teMode'](_0x3dc81d){this['_setValue']('shadowUpda'+'teMode',_0x3dc81d,function(_0x330f9b,_0x9cb2cf){this['light']['shadowUpda'+'teMode']=_0x330f9b;},!(0x2550+-0xe2*0x7+-0x1f22));}get['shadowUpda'+'teMode'](){return this['data']['shadowUpda'+'teMode'];}set['mask'](_0x1d33fc){this['_setValue']('mask',_0x1d33fc,function(_0x15d352,_0xc247cf){this['light']['mask']=_0x15d352;});}get['mask'](){return this['data']['mask'];}set['affectDyna'+'mic'](_0x261e62){this['_setValue']('affectDyna'+'mic',_0x261e62,function(_0x331b14,_0x41dd05){_0x331b14?this['light']['mask']|=Ss:this['light']['mask']&=~Ss,this['light']['layersDirt'+'y']();});}get['affectDyna'+'mic'](){return this['data']['affectDyna'+'mic'];}set['affectLigh'+'tmapped'](_0x428aae){this['_setValue']('affectLigh'+'tmapped',_0x428aae,function(_0x4dffdb,_0x4f196a){_0x4dffdb?(this['light']['mask']|=di,this['bake']&&(this['light']['mask']&=~fi)):(this['light']['mask']&=~di,this['bake']&&(this['light']['mask']|=fi));});}get['affectLigh'+'tmapped'](){return this['data']['affectLigh'+'tmapped'];}set['bake'](_0xad53b2){this['_setValue']('bake',_0xad53b2,function(_0x498f79,_0x555b44){_0x498f79?(this['light']['mask']|=fi,this['affectLigh'+'tmapped']&&(this['light']['mask']&=~di)):(this['light']['mask']&=~fi,this['affectLigh'+'tmapped']&&(this['light']['mask']|=di)),this['light']['layersDirt'+'y']();});}get['bake'](){return this['data']['bake'];}set['bakeDir'](_0xc189c3){this['_setValue']('bakeDir',_0xc189c3,function(_0x7d9b63,_0x3ee7a7){this['light']['bakeDir']=_0x7d9b63;});}get['bakeDir'](){return this['data']['bakeDir'];}set['isStatic'](_0x48cc50){this['_setValue']('isStatic',_0x48cc50,function(_0x37005a,_0x5cc587){this['light']['isStatic']=_0x37005a;});}get['isStatic'](){return this['data']['isStatic'];}set['layers'](_0x22226b){this['_setValue']('layers',_0x22226b,function(_0x2343b4,_0x44ecdc){for(let _0x34ed71=0x3b*0x9b+0x3fd*-0x5+0x328*-0x5;_0x34ed71<_0x44ecdc['length'];_0x34ed71++){const _0x4735b4=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x44ecdc[_0x34ed71]);_0x4735b4&&(_0x4735b4['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x4735b4));}for(let _0x20a41a=-0x10a9*0x2+-0x1013+0x57d*0x9;_0x20a41a<_0x2343b4['length'];_0x20a41a++){const _0x1affff=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x2343b4[_0x20a41a]);_0x1affff&&this['enabled']&&this['entity']['enabled']&&(_0x1affff['addLight'](this),this['light']['addLayer'](_0x1affff));}});}get['layers'](){return this['data']['layers'];}set['shadowUpda'+'teOverride'+'s'](_0x2e7c53){this['light']['shadowUpda'+'teOverride'+'s']=_0x2e7c53;}get['shadowUpda'+'teOverride'+'s'](){return this['light']['shadowUpda'+'teOverride'+'s'];}set['shadowSamp'+'les'](_0x1239d2){this['light']['shadowSamp'+'les']=_0x1239d2;}get['shadowSamp'+'les'](){return this['light']['shadowSamp'+'les'];}set['shadowBloc'+'kerSamples'](_0x369143){this['light']['shadowBloc'+'kerSamples']=_0x369143;}get['shadowBloc'+'kerSamples'](){return this['light']['shadowBloc'+'kerSamples'];}set['penumbraSi'+'ze'](_0x57d67d){this['light']['penumbraSi'+'ze']=_0x57d67d;}get['penumbraSi'+'ze'](){return this['light']['penumbraSi'+'ze'];}set['penumbraFa'+'lloff'](_0x1a3c88){this['light']['penumbraFa'+'lloff']=_0x1a3c88;}get['penumbraFa'+'lloff'](){return this['light']['penumbraFa'+'lloff'];}['_setValue'](_0x50bbfe,_0x557e09,_0x21ae4f,_0x3c01b1){const _0x2bba59=this['data'],_0x53bbc5=_0x2bba59[_0x50bbfe];!_0x3c01b1&&_0x53bbc5===_0x557e09||(_0x2bba59[_0x50bbfe]=_0x557e09,_0x21ae4f&&_0x21ae4f['call'](this,_0x557e09,_0x53bbc5));}['addLightTo'+'Layers'](){for(let _0x471785=-0x1*-0x183b+0x1ef5+-0x3730;_0x471785<this['layers']['length'];_0x471785++){const _0x5e019a=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x471785]);_0x5e019a&&(_0x5e019a['addLight'](this),this['light']['addLayer'](_0x5e019a));}}['removeLigh'+'tFromLayer'+'s'](){for(let _0x2324db=0x1f7a+-0x1a15+0x1*-0x565;_0x2324db<this['layers']['length'];_0x2324db++){const _0x2dfbe5=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x2324db]);_0x2dfbe5&&(_0x2dfbe5['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x2dfbe5));}}['onLayersCh'+'anged'](_0x1879a3,_0x47cd0c){this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),_0x1879a3['off']('add',this['onLayerAdd'+'ed'],this),_0x1879a3['off']('remove',this['onLayerRem'+'oved'],this),_0x47cd0c['on']('add',this['onLayerAdd'+'ed'],this),_0x47cd0c['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x4f5f05){this['layers']['indexOf'](_0x4f5f05['id'])>=0x51*-0x3e+0x683*0x1+0xd1b&&this['enabled']&&this['entity']['enabled']&&(_0x4f5f05['addLight'](this),this['light']['addLayer'](_0x4f5f05));}['onLayerRem'+'oved'](_0x3acdd9){this['layers']['indexOf'](_0x3acdd9['id'])>=0x16fd+0x1044+-0x305*0xd&&(_0x3acdd9['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x3acdd9));}['refreshPro'+'perties'](){for(let _0x50f42c=-0x2*-0xb5f+-0x1af8+0x21d*0x2;_0x50f42c<Ho['length'];_0x50f42c++){const _0x283cca=Ho[_0x50f42c];this[_0x283cca]=this[_0x283cca];}this['enabled']&&this['entity']['enabled']&&this['onEnable']();}['onCookieAs'+'setSet'](){let _0x3eb21a=!(0x8*-0x1ca+0x1aa2+-0xc51);this['_cookieAss'+'et']['type']==='cubemap'&&!this['_cookieAss'+'et']['loadFaces']&&(this['_cookieAss'+'et']['loadFaces']=!(0x17f*-0x3+0x261c+-0x219f),_0x3eb21a=!(-0x1d2*-0x11+0x126*-0x19+-0x23c)),(!this['_cookieAss'+'et']['resource']||_0x3eb21a)&&this['system']['app']['assets']['load'](this['_cookieAss'+'et']),this['_cookieAss'+'et']['resource']&&this['onCookieAs'+'setLoad']();}['onCookieAs'+'setAdd'](_0x1899e4){this['_cookieAss'+'etId']===_0x1899e4['id']&&(this['_cookieAss'+'et']=_0x1899e4,this['light']['enabled']&&this['onCookieAs'+'setSet'](),this['_cookieAss'+'et']['on']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['on']('remove',this['onCookieAs'+'setRemove'],this));}['onCookieAs'+'setLoad'](){!this['_cookieAss'+'et']||!this['_cookieAss'+'et']['resource']||(this['cookie']=this['_cookieAss'+'et']['resource']);}['onCookieAs'+'setRemove'](){this['_cookieAss'+'etId']&&(this['_cookieAss'+'etAdd']&&(this['system']['app']['assets']['off']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this),this['_cookieAss'+'etAdd']=!(-0x2*-0x441+-0x14+-0x86d)),this['_cookieAss'+'et']&&(this['_cookieAss'+'et']['off']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['off']('remove',this['onCookieAs'+'setRemove'],this),this['_cookieAss'+'et']=null),this['cookie']=null);}['onEnable'](){const _0x52c75e=this['system']['app']['scene'],_0x142a66=_0x52c75e['layers'];this['light']['enabled']=!(-0xf4a+-0x1d9c+0xe*0x335),this['_evtLayers'+'Changed']=_0x52c75e['on']('set:layers',this['onLayersCh'+'anged'],this),_0x142a66&&(this['_evtLayerA'+'dded']=_0x142a66['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x142a66['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),this['_cookieAss'+'et']&&!this['cookie']&&this['onCookieAs'+'setSet']();}['onDisable'](){var _0x552445,_0x37c14e,_0x58a722;const _0x242492=this['system']['app']['scene']['layers'];this['light']['enabled']=!(-0x2315+-0x17*-0x181+0x7f),(_0x552445=this['_evtLayers'+'Changed'])==null||_0x552445['off'](),this['_evtLayers'+'Changed']=null,_0x242492&&((_0x37c14e=this['_evtLayerA'+'dded'])==null||_0x37c14e['off'](),this['_evtLayerA'+'dded']=null,(_0x58a722=this['_evtLayerR'+'emoved'])==null||_0x58a722['off'](),this['_evtLayerR'+'emoved']=null),this['removeLigh'+'tFromLayer'+'s']();}['onRemove'](){this['onDisable'](),this['light']['destroy'](),this['cookieAsse'+'t']=null;}}class wF extends ct{constructor(_0x234f5d){super(_0x234f5d),this['id']='light',this['ComponentT'+'ype']=TF,this['DataType']=m0,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x39edc7,_0x231331){const _0x40ac1c={..._0x231331};_0x40ac1c['type']||(_0x40ac1c['type']=_0x39edc7['data']['type']),_0x39edc7['data']['type']=_0x40ac1c['type'],_0x40ac1c['layers']&&Array['isArray'](_0x40ac1c['layers'])&&(_0x40ac1c['layers']=_0x40ac1c['layers']['slice'](0xd3+0x1*0x2687+-0x1b6*0x17)),_0x40ac1c['color']&&Array['isArray'](_0x40ac1c['color'])&&(_0x40ac1c['color']=new ie(_0x40ac1c['color'][-0x3*-0x3fe+0x549*0x5+-0x1*0x2667],_0x40ac1c['color'][-0x1d*0x149+-0x1d52+0x4*0x10a6],_0x40ac1c['color'][-0xb*0x2fb+-0x495*0x4+0x1*0x331f])),_0x40ac1c['cookieOffs'+'et']&&_0x40ac1c['cookieOffs'+'et']instanceof Array&&(_0x40ac1c['cookieOffs'+'et']=new J(_0x40ac1c['cookieOffs'+'et'][-0x1dd7+0x8b3+0x1524],_0x40ac1c['cookieOffs'+'et'][-0xfc9+0x1a9c+0x115*-0xa])),_0x40ac1c['cookieScal'+'e']&&_0x40ac1c['cookieScal'+'e']instanceof Array&&(_0x40ac1c['cookieScal'+'e']=new J(_0x40ac1c['cookieScal'+'e'][-0x5*0x50e+0x159a+0x2f*0x14],_0x40ac1c['cookieScal'+'e'][-0x1c07+-0x4*0x8dd+-0x3bc*-0x11])),_0x40ac1c['enable']&&(console['warn']('WARNING:\x20e'+'nable:\x20Pro'+'perty\x20is\x20d'+'eprecated.'+'\x20Set\x20enabl'+'ed\x20propert'+'y\x20instead.'),_0x40ac1c['enabled']=_0x40ac1c['enable']),_0x40ac1c['shape']||(_0x40ac1c['shape']=Ys);const _0x4c5bb6=new pl(this['app']['graphicsDe'+'vice'],this['app']['scene']['clusteredL'+'ightingEna'+'bled']);_0x4c5bb6['type']=fu[_0x40ac1c['type']],_0x4c5bb6['_node']=_0x39edc7['entity'],_0x39edc7['data']['light']=_0x4c5bb6,super['initialize'+'ComponentD'+'ata'](_0x39edc7,_0x40ac1c,Ho);}['_onRemoveC'+'omponent'](_0x5c4464,_0x54ab3a){_0x54ab3a['onRemove']();}['cloneCompo'+'nent'](_0x2e8422,_0xd86d2b){const _0x1c2f77=_0x2e8422['light'],_0x4559cc=[];let _0x1e93ec;for(let _0x33f8e3=-0x1f35*0x1+-0x84a*-0x1+0x16eb;_0x33f8e3<Ho['length'];_0x33f8e3++)_0x1e93ec=Ho[_0x33f8e3],_0x1e93ec!=='light'&&(_0x1c2f77[_0x1e93ec]&&_0x1c2f77[_0x1e93ec]['clone']?_0x4559cc[_0x1e93ec]=_0x1c2f77[_0x1e93ec]['clone']():_0x4559cc[_0x1e93ec]=_0x1c2f77[_0x1e93ec]);return this['addCompone'+'nt'](_0xd86d2b,_0x4559cc);}['changeType'](_0x30ef32,_0x1be964,_0x2fcc4b){_0x1be964!==_0x2fcc4b&&(_0x30ef32['light']['type']=fu[_0x2fcc4b]);}}const EF=['x','y','z','w'],bF=[void(-0x3f*-0x9a+0x21b*0x9+-0x21b*0x1b),void(0x1*-0xd2d+-0x5b*0x6d+-0x33ec*-0x1),J,D,re];function Yn(_0x1bb015,_0x4c4320,_0x619ffd,_0x3ebe89){switch(_0x4c4320['type']){case'boolean':return!!_0x619ffd;case'number':if(typeof _0x619ffd=='number')return _0x619ffd;if(typeof _0x619ffd=='string'){const _0x208482=parseInt(_0x619ffd,-0xd5e*-0x1+-0x14f5+0x7a1);return isNaN(_0x208482)?null:_0x208482;}else{if(typeof _0x619ffd=='boolean')return 0x4*0x90c+0x873+0x36f*-0xd+_0x619ffd;}return null;case'json':{const _0xe763e4={};if(Array['isArray'](_0x4c4320['schema'])){(!_0x619ffd||typeof _0x619ffd!='object')&&(_0x619ffd={});for(let _0x3695ef=-0x2203+-0x95*-0xd+0x2a5*0xa;_0x3695ef<_0x4c4320['schema']['length'];_0x3695ef++){const _0x1c8672=_0x4c4320['schema'][_0x3695ef];if(_0x1c8672['name']){if(_0x1c8672['array']){_0xe763e4[_0x1c8672['name']]=[];const _0x3d01b4=Array['isArray'](_0x619ffd[_0x1c8672['name']])?_0x619ffd[_0x1c8672['name']]:[];for(let _0x2962f2=-0x1024+0x1de*-0x1+-0x1202*-0x1;_0x2962f2<_0x3d01b4['length'];_0x2962f2++)_0xe763e4[_0x1c8672['name']]['push'](Yn(_0x1bb015,_0x1c8672,_0x3d01b4[_0x2962f2]));}else{const _0x10d499=_0x619ffd['hasOwnProp'+'erty'](_0x1c8672['name'])?_0x619ffd[_0x1c8672['name']]:_0x1c8672['default'];_0xe763e4[_0x1c8672['name']]=Yn(_0x1bb015,_0x1c8672,_0x10d499);}}}}return _0xe763e4;}case'asset':return _0x619ffd instanceof pe?_0x619ffd:typeof _0x619ffd=='number'?_0x1bb015['assets']['get'](_0x619ffd)||null:typeof _0x619ffd=='string'&&_0x1bb015['assets']['get'](parseInt(_0x619ffd,-0x1e36+0x1a53*0x1+-0x3ed*-0x1))||null;case'entity':return _0x619ffd instanceof Ie?_0x619ffd:typeof _0x619ffd=='string'?_0x1bb015['getEntityF'+'romIndex'](_0x619ffd):null;case'rgb':case'rgba':if(_0x619ffd instanceof ie)return _0x3ebe89 instanceof ie?(_0x3ebe89['copy'](_0x619ffd),_0x3ebe89):_0x619ffd['clone']();if(_0x619ffd instanceof Array&&_0x619ffd['length']>=0xa34*-0x1+-0x1e1*0x8+0x193f&&_0x619ffd['length']<=-0x1*-0x26bb+-0x3*-0xb3d+-0x49*0xfe){for(let _0xd1e8b0=0x10c2+0x818+0x18da*-0x1;_0xd1e8b0<_0x619ffd['length'];_0xd1e8b0++)if(typeof _0x619ffd[_0xd1e8b0]!='number')return null;return _0x3ebe89||(_0x3ebe89=new ie()),_0x3ebe89['r']=_0x619ffd[-0x1072*-0x2+0x17b7*-0x1+-0x1b*0x57],_0x3ebe89['g']=_0x619ffd[-0xfc7*0x1+-0x1640+0x2608],_0x3ebe89['b']=_0x619ffd[0x13df*-0x1+-0x19e2+0x2dc3],_0x3ebe89['a']=_0x619ffd['length']===0x145f+-0x1*0x5fc+-0xe60?0xf*0x67+-0x1*0x1913+0x130b:_0x619ffd[-0x13c5+-0xdc0+0x4a*0x74],_0x3ebe89;}else{if(typeof _0x619ffd=='string'&&/#(?:[0-9a-f]{2}){3,4}/i['test'](_0x619ffd))return _0x3ebe89||(_0x3ebe89=new ie()),_0x3ebe89['fromString'](_0x619ffd),_0x3ebe89;}return null;case'vec2':case'vec3':case'vec4':{const _0x487ea7=parseInt(_0x4c4320['type']['slice'](-0x1*0x169c+0x3c+0x209*0xb),0x26e4+-0x1f2a+-0x18*0x52),_0x3c3710=bF[_0x487ea7];if(_0x619ffd instanceof _0x3c3710)return _0x3ebe89 instanceof _0x3c3710?(_0x3ebe89['copy'](_0x619ffd),_0x3ebe89):_0x619ffd['clone']();if(_0x619ffd instanceof Array&&_0x619ffd['length']===_0x487ea7){for(let _0xad5ac0=-0x26f1+0xdb*-0x13+0x3732;_0xad5ac0<_0x619ffd['length'];_0xad5ac0++)if(typeof _0x619ffd[_0xad5ac0]!='number')return null;_0x3ebe89||(_0x3ebe89=new _0x3c3710());for(let _0x2c4c8d=0xb*0x81+0x1c5b*-0x1+-0x50*-0x49;_0x2c4c8d<_0x487ea7;_0x2c4c8d++)_0x3ebe89[EF[_0x2c4c8d]]=_0x619ffd[_0x2c4c8d];return _0x3ebe89;}return null;}case'curve':if(_0x619ffd){let _0x502094;if(_0x619ffd instanceof qs||_0x619ffd instanceof na)_0x502094=_0x619ffd['clone']();else{const _0xb4f615=_0x619ffd['keys'][0x23eb+0x8*-0x9a+-0x1f1b*0x1]instanceof Array?na:qs;_0x502094=new _0xb4f615(_0x619ffd['keys']),_0x502094['type']=_0x619ffd['type'];}return _0x502094;}break;}return _0x619ffd;}function _0(_0x8d00ea,_0x238172,_0x524c91,_0x3be6b6){return _0x238172['array']?_0x524c91['map']((_0x21181b,_0x2fccfc)=>Yn(_0x8d00ea,_0x238172,_0x21181b,_0x3be6b6?_0x3be6b6[_0x2fccfc]:null)):Yn(_0x8d00ea,_0x238172,_0x524c91,_0x3be6b6);}function g0(_0x37ac0a,_0x2b81b9,_0x284fdf,_0x5d4c4f){if(_0x284fdf)for(const _0xa4ca1d in _0x2b81b9){const _0x5179e4=_0x2b81b9[_0xa4ca1d],_0x54f721=_0x284fdf[_0xa4ca1d];_0x54f721!==void(0x1c37*0x1+0xe83*0x1+-0x2aba)&&(_0x5d4c4f[_0xa4ca1d]=_0(_0x37ac0a,_0x5179e4,_0x54f721,_0x5d4c4f[_0xa4ca1d]));}}const yn=class yn{constructor(_0x756621){this['scriptType']=_0x756621,this['index']={};}['add'](_0x190736,_0x34c2f4){if(this['index'][_0x190736]){w['warn']('attribute\x20'+'\x27'+_0x190736+('\x27\x20is\x20alrea'+'dy\x20defined'+'\x20for\x20scrip'+'t\x20type\x20\x27')+this['scriptType']['name']+'\x27');return;}else{if(yn['reservedNa'+'mes']['has'](_0x190736)){w['warn']('attribute\x20'+'\x27'+_0x190736+('\x27\x20is\x20a\x20res'+'erved\x20attr'+'ibute\x20name'));return;}}this['index'][_0x190736]=_0x34c2f4,Object['defineProp'+'erty'](this['scriptType']['prototype'],_0x190736,{'get':function(){return this['__attribut'+'es'][_0x190736];},'set':function(_0x24a316){const _0x485f73='attr',_0x2d86f9='attr:'+_0x190736,_0x2215ed=this['__attribut'+'es'][_0x190736];let _0x51cfb2=_0x2215ed;if(_0x2215ed&&_0x34c2f4['type']!=='json'&&_0x34c2f4['type']!=='entity'&&_0x2215ed['clone']&&(this['hasEvent'](_0x485f73)||this['hasEvent'](_0x2d86f9))&&(_0x51cfb2=_0x2215ed['clone']()),_0x34c2f4['array']){if(this['__attribut'+'es'][_0x190736]=[],_0x24a316){for(let _0x30a3f6=-0x1bc9+-0x1cbc+0x3885,_0x24bda3=_0x24a316['length'];_0x30a3f6<_0x24bda3;_0x30a3f6++)this['__attribut'+'es'][_0x190736]['push'](Yn(this['app'],_0x34c2f4,_0x24a316[_0x30a3f6],_0x2215ed?_0x2215ed[_0x30a3f6]:null));}}else this['__attribut'+'es'][_0x190736]=Yn(this['app'],_0x34c2f4,_0x24a316,_0x2215ed);this['fire'](_0x485f73,_0x190736,this['__attribut'+'es'][_0x190736],_0x51cfb2),this['fire'](_0x2d86f9,this['__attribut'+'es'][_0x190736],_0x51cfb2);}});}['remove'](_0x26104f){return this['index'][_0x26104f]?(delete this['index'][_0x26104f],delete this['scriptType']['prototype'][_0x26104f],!(0x2507+-0x991+-0x1b76)):!(-0x18f8+-0x19*0x85+-0x12fb*-0x2);}['has'](_0x2dfb76){return!!this['index'][_0x2dfb76];}['get'](_0xa9dd7b){return this['index'][_0xa9dd7b]||null;}};h(yn,'assignAttr'+'ibutesToSc'+'ript',g0),h(yn,'attributeT'+'oValue',_0),h(yn,'reservedNa'+'mes',new Set(['app','entity','enabled','_enabled','_enabledOl'+'d','_destroyed','__attribut'+'es','__attribut'+'esRaw','__scriptTy'+'pe','__executio'+'nOrder','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']));let Sl=yn;const Bu='initialize',zu='postInitia'+'lize',AF='update',CF='postUpdate',PF='swap';class ts extends me{constructor(_0x289fe8){super(),h(this,'app'),h(this,'entity'),h(this,'_enabled'),h(this,'_enabledOl'+'d'),h(this,'_initializ'+'ed'),h(this,'_postIniti'+'alized'),h(this,'__destroye'+'d'),h(this,'__scriptTy'+'pe'),h(this,'__executio'+'nOrder'),this['initScript'](_0x289fe8);}set['enabled'](_0x52469e){this['_enabled']=!!_0x52469e,this['enabled']!==this['_enabledOl'+'d']&&(this['_enabledOl'+'d']=this['enabled'],this['fire'](this['enabled']?'enable':'disable'),this['fire']('state',this['enabled']),!this['_initializ'+'ed']&&this['enabled']&&(this['_initializ'+'ed']=!(0x1ea7+-0x31*0x6a+-0x1*0xa5d),this['fire']('preInitial'+'ize'),this['initialize']&&this['entity']['script']['_scriptMet'+'hod'](this,Bu)),this['_initializ'+'ed']&&!this['_postIniti'+'alized']&&this['enabled']&&!this['entity']['script']['_beingEnab'+'led']&&(this['_postIniti'+'alized']=!(0x19a8+0x22c8*-0x1+0x10*0x92),this['postInitia'+'lize']&&this['entity']['script']['_scriptMet'+'hod'](this,zu)));}get['enabled'](){return this['_enabled']&&!this['_destroyed']&&this['entity']['script']['enabled']&&this['entity']['enabled'];}['initScript'](_0x23f565){const _0x1dc7e5=this['constructo'+'r'];w['assert'](_0x23f565&&_0x23f565['app']&&_0x23f565['entity'],'script\x20['+_0x1dc7e5['__name']+(']\x20has\x20miss'+'ing\x20argume'+'nts\x20in\x20con'+'structor')),this['app']=_0x23f565['app'],this['entity']=_0x23f565['entity'],this['_enabled']=typeof _0x23f565['enabled']=='boolean'?_0x23f565['enabled']:!(-0x2437+-0x2430+0x4867),this['_enabledOl'+'d']=this['enabled'],this['__destroye'+'d']=!(-0xf76+-0x1*0x2269+-0x13*-0x2a0),this['__scriptTy'+'pe']=_0x1dc7e5,this['__executio'+'nOrder']=-(-0x463+0x4*0x31+0x3a0);}static get['scriptName'](){return this['__name'];}}h(ts,'EVENT_ENAB'+'LE','enable'),h(ts,'EVENT_DISA'+'BLE','disable'),h(ts,'EVENT_STAT'+'E','state'),h(ts,'EVENT_DEST'+'ROY','destroy'),h(ts,'EVENT_ATTR','attr'),h(ts,'EVENT_ERRO'+'R','error'),h(ts,'__name',null),h(ts,'__getScrip'+'tName',S0);const MF=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s\/]*)\s*/;function S0(_0xbb6b46){if(typeof _0xbb6b46!='function')return;if(_0xbb6b46['scriptName'])return _0xbb6b46['scriptName'];if('name'in Function['prototype'])return _0xbb6b46['name'];if(_0xbb6b46===Function||_0xbb6b46===Function['prototype']['constructo'+'r'])return'Function';const _0x228536=(''+_0xbb6b46)['match'](MF);return _0x228536?_0x228536[-0x1*-0x2466+-0x1cd6+0x3*-0x285]:void(-0x200+0x106f+-0x1*0xe6f);}class Wo extends ts{constructor(_0x1c6494){super(_0x1c6494),h(this,'__attribut'+'es'),h(this,'__attribut'+'esRaw'),this['initScript'+'Type'](_0x1c6494);}static get['attributes'](){return this['hasOwnProp'+'erty']('__attribut'+'es')||(this['__attribut'+'es']=new Sl(this)),this['__attribut'+'es'];}['initScript'](_0x364b80){ts['prototype']['initScript']['call'](this,_0x364b80),this['__attribut'+'es']={},this['__attribut'+'esRaw']=_0x364b80['attributes']||{};}['initScript'+'Type'](_0x525159){this['initScript'](_0x525159);}['__initiali'+'zeAttribut'+'es'](_0x28ebdc){if(!(!_0x28ebdc&&!this['__attribut'+'esRaw'])){for(const _0x473a79 in this['__scriptTy'+'pe']['attributes']['index'])this['__attribut'+'esRaw']&&this['__attribut'+'esRaw']['hasOwnProp'+'erty'](_0x473a79)?this[_0x473a79]=this['__attribut'+'esRaw'][_0x473a79]:this['__attribut'+'es']['hasOwnProp'+'erty'](_0x473a79)||(this['__scriptTy'+'pe']['attributes']['index'][_0x473a79]['hasOwnProp'+'erty']('default')?this[_0x473a79]=this['__scriptTy'+'pe']['attributes']['index'][_0x473a79]['default']:this[_0x473a79]=null);this['__attribut'+'esRaw']=null;}}static['extend'](_0x2709d7){for(const _0x41724c in _0x2709d7)_0x2709d7['hasOwnProp'+'erty'](_0x41724c)&&(this['prototype'][_0x41724c]=_0x2709d7[_0x41724c]);}}const DF=_0x30931c=>_0x30931c[0x29e+0x6c2*0x3+-0x16e4]['toLowerCas'+'e']()+_0x30931c['substring'](-0x1a*-0x62+0x1b79+-0x256c);class Ii extends we{constructor(_0x3483f9,_0x198511){super(_0x3483f9,_0x198511),h(this,'_attribute'+'DataMap',new Map()),(this['_scripts']=[],this['_updateLis'+'t']=new oh({'sortBy':'__executio'+'nOrder'}),this['_postUpdat'+'eList']=new oh({'sortBy':'__executio'+'nOrder'}),this['_scriptsIn'+'dex']={},this['_destroyed'+'Scripts']=[],this['_destroyed']=!(-0xb4d+-0x419*-0x1+0x2d*0x29),this['_scriptsDa'+'ta']=null,this['_oldState']=!(-0x2f4*0x5+-0x584*0x1+-0x289*-0x8),this['_enabled']=!(0x1*0x1913+-0x12b+-0x22*0xb4),this['_beingEnab'+'led']=!(0x1fa1+-0x335*-0x7+-0x3613),this['_isLooping'+'ThroughScr'+'ipts']=!(0x22a7+-0x10b7*-0x2+0x4*-0x1105),this['_execution'+'Order']=-(-0x240f+0x1b*0x12b+0x487),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this));}set['scripts'](_0x5a82f8){this['_scriptsDa'+'ta']=_0x5a82f8;for(const _0x31d572 in _0x5a82f8){if(!_0x5a82f8['hasOwnProp'+'erty'](_0x31d572))continue;const _0x7693fc=this['_scriptsIn'+'dex'][_0x31d572];if(_0x7693fc){if(typeof _0x5a82f8[_0x31d572]['enabled']=='boolean'&&(_0x7693fc['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x7693fc);}),_0x7693fc['enabled']=!!_0x5a82f8[_0x31d572]['enabled']),typeof _0x5a82f8[_0x31d572]['attributes']=='object'){for(const _0x2aa175 in _0x5a82f8[_0x31d572]['attributes'])if(!Sl['reservedNa'+'mes']['has'](_0x2aa175)){if(!_0x7693fc['__attribut'+'es']['hasOwnProp'+'erty'](_0x2aa175)){const _0x3c6fd4=this['system']['app']['scripts']['get'](_0x31d572);_0x3c6fd4&&_0x3c6fd4['attributes']['add'](_0x2aa175,{});}_0x7693fc[_0x2aa175]=_0x5a82f8[_0x31d572]['attributes'][_0x2aa175];}}}else console['log'](this['order']);}}get['scripts'](){return this['_scripts'];}set['enabled'](_0x20be50){const _0x28290c=this['_enabled'];this['_enabled']=_0x20be50,this['fire']('set','enabled',_0x28290c,_0x20be50);}get['enabled'](){return this['_enabled'];}['onEnable'](){this['_beingEnab'+'led']=!(-0x1882+0xa*0x1c4+0x6da),this['_checkStat'+'e'](),this['entity']['_beingEnab'+'led']||this['onPostStat'+'eChange'](),this['_beingEnab'+'led']=!(0x624+-0x654+-0x1*-0x31);}['onDisable'](){this['_checkStat'+'e']();}['onPostStat'+'eChange'](){const _0x58a4a3=this['_beginLoop'+'ing']();for(let _0x107d9a=-0xeb1*0x1+-0x12f3+0x21a4,_0x7a0d9=this['scripts']['length'];_0x107d9a<_0x7a0d9;_0x107d9a++){const _0x12fdec=this['scripts'][_0x107d9a];_0x12fdec['_initializ'+'ed']&&!_0x12fdec['_postIniti'+'alized']&&_0x12fdec['enabled']&&(_0x12fdec['_postIniti'+'alized']=!(-0x4*-0x87e+-0xa7*0x17+-0x1*0x12f7),_0x12fdec['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x12fdec,zu));}this['_endLoopin'+'g'](_0x58a4a3);}['_beginLoop'+'ing'](){const _0x43c3bf=this['_isLooping'+'ThroughScr'+'ipts'];return this['_isLooping'+'ThroughScr'+'ipts']=!(-0x2280+0x1f76+0x30a),_0x43c3bf;}['_endLoopin'+'g'](_0x5120b4){this['_isLooping'+'ThroughScr'+'ipts']=_0x5120b4,this['_isLooping'+'ThroughScr'+'ipts']||this['_removeDes'+'troyedScri'+'pts']();}['_onSetEnab'+'led'](_0x49779d,_0x47ef58,_0x329f67){this['_beingEnab'+'led']=!(-0x1fdd+0x12*-0x104+0x3225),this['_checkStat'+'e'](),this['_beingEnab'+'led']=!(0x1*-0x1bb5+-0x5a8+0x215e);}['_checkStat'+'e'](){const _0x39b27e=this['enabled']&&this['entity']['enabled'];if(_0x39b27e===this['_oldState'])return;this['_oldState']=_0x39b27e,this['fire'](_0x39b27e?'enable':'disable'),this['fire']('state',_0x39b27e),_0x39b27e?this['system']['_addCompon'+'entToEnabl'+'ed'](this):this['system']['_removeCom'+'ponentFrom'+'Enabled'](this);const _0x3c4136=this['_beginLoop'+'ing']();for(let _0x591e2a=0x1*-0x234f+-0x16bb+0x3a0a,_0x595e50=this['scripts']['length'];_0x591e2a<_0x595e50;_0x591e2a++){const _0x33879c=this['scripts'][_0x591e2a];_0x33879c['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x33879c);}),_0x33879c['enabled']=_0x33879c['_enabled'];}this['_endLoopin'+'g'](_0x3c4136);}['_onBeforeR'+'emove'](){this['fire']('remove');const _0x485c2a=this['_beginLoop'+'ing']();for(let _0x5d1ad2=-0x15d7*-0x1+0x161e+-0x2bf5;_0x5d1ad2<this['scripts']['length'];_0x5d1ad2++){const _0x1925d6=this['scripts'][_0x5d1ad2];_0x1925d6&&this['destroy'](_0x1925d6['__scriptTy'+'pe']['__name']);}this['_endLoopin'+'g'](_0x485c2a);}['_removeDes'+'troyedScri'+'pts'](){const _0x491403=this['_destroyed'+'Scripts']['length'];if(_0x491403){for(let _0x309963=-0x1*0x1f3f+-0x2285+-0x2dc*-0x17;_0x309963<_0x491403;_0x309963++){const _0x13e59e=this['_destroyed'+'Scripts'][_0x309963];this['_removeScr'+'iptInstanc'+'e'](_0x13e59e);}this['_destroyed'+'Scripts']['length']=-0x12e*-0x6+0x1*-0x1707+0xff3,this['_resetExec'+'utionOrder'](0x1b8d+-0x2485+-0x2*-0x47c,this['_scripts']['length']);}}['_onInitial'+'izeAttribu'+'tes'](){for(let _0x3b3a87=0x571*0x7+-0x1e21+0x3fb*-0x2,_0xdc0d18=this['scripts']['length'];_0x3b3a87<_0xdc0d18;_0x3b3a87++){const _0x3ade2a=this['scripts'][_0x3b3a87];this['initialize'+'Attributes'](_0x3ade2a);}}['initialize'+'Attributes'](_0x4e7e94){var _0x5f4ecf;if(_0x4e7e94 instanceof Wo)_0x4e7e94['__initiali'+'zeAttribut'+'es']();else{const _0x5ee36f=_0x4e7e94['__scriptTy'+'pe']['__name'],_0x20826b=this['_attribute'+'DataMap']['get'](_0x5ee36f);if(!_0x20826b)return;const _0x12d364=(_0x5f4ecf=this['system']['app']['scripts'])==null?void(0x1af9+-0x25fa+0x9*0x139):_0x5f4ecf['getSchema'](_0x5ee36f);_0x12d364||w['warnOnce']('No\x20schema\x20'+'exists\x20for'+'\x20the\x20scrip'+'t\x20\x27'+_0x5ee36f+('\x27.\x20A\x20schem'+'a\x20must\x20exi'+'st\x20for\x20dat'+'a\x20to\x20be\x20in'+'stantiated'+'\x20on\x20the\x20sc'+'ript.')),g0(this['system']['app'],_0x12d364['attributes'],_0x20826b,_0x4e7e94);}}['_scriptMet'+'hod'](_0x86ae1a,_0x389308,_0x7099f1){try{_0x86ae1a[_0x389308](_0x7099f1);}catch(_0x435656){_0x86ae1a['enabled']=!(0xa3b+-0x94e+0x76*-0x2),_0x86ae1a['hasEvent']('error')||(console['warn']('unhandled\x20'+'exception\x20'+'while\x20call'+'ing\x20\x22'+_0x389308+'\x22\x20for\x20\x22'+_0x86ae1a['__scriptTy'+'pe']['__name']+'\x22\x20script:\x20',_0x435656),console['error'](_0x435656)),_0x86ae1a['fire']('error',_0x435656,_0x389308),this['fire']('error',_0x86ae1a,_0x435656,_0x389308);}}['_onInitial'+'ize'](){const _0x1d9d74=this['_scripts'],_0x4caa88=this['_beginLoop'+'ing']();for(let _0x7fb00e=0x4c*0x1f+-0x1691+0xd5d,_0x8b1f34=_0x1d9d74['length'];_0x7fb00e<_0x8b1f34;_0x7fb00e++){const _0x548be0=_0x1d9d74[_0x7fb00e];!_0x548be0['_initializ'+'ed']&&_0x548be0['enabled']&&(_0x548be0['_initializ'+'ed']=!(0x2*-0xaca+-0x115*-0x13+-0x57*-0x3),_0x548be0['initialize']&&this['_scriptMet'+'hod'](_0x548be0,Bu));}this['_endLoopin'+'g'](_0x4caa88);}['_onPostIni'+'tialize'](){this['onPostStat'+'eChange']();}['_onUpdate'](_0x37e2b3){const _0x899cd0=this['_updateLis'+'t'];if(!_0x899cd0['length'])return;const _0x251c87=this['_beginLoop'+'ing']();for(_0x899cd0['loopIndex']=-0xc8e+0xa02+-0x1*-0x28c;_0x899cd0['loopIndex']<_0x899cd0['length'];_0x899cd0['loopIndex']++){const _0x4cf308=_0x899cd0['items'][_0x899cd0['loopIndex']];_0x4cf308['enabled']&&this['_scriptMet'+'hod'](_0x4cf308,AF,_0x37e2b3);}this['_endLoopin'+'g'](_0x251c87);}['_onPostUpd'+'ate'](_0x5843cd){const _0x26e21d=this['_postUpdat'+'eList'];if(!_0x26e21d['length'])return;const _0x5d95df=this['_beginLoop'+'ing']();for(_0x26e21d['loopIndex']=-0x1e16+0x23bc+-0x3*0x1e2;_0x26e21d['loopIndex']<_0x26e21d['length'];_0x26e21d['loopIndex']++){const _0x4be156=_0x26e21d['items'][_0x26e21d['loopIndex']];_0x4be156['enabled']&&this['_scriptMet'+'hod'](_0x4be156,CF,_0x5843cd);}this['_endLoopin'+'g'](_0x5d95df);}['_insertScr'+'iptInstanc'+'e'](_0x4ff2d5,_0x57c60b,_0x1cb61a){_0x57c60b===-(0x19*0x14c+0x567*-0x3+0x1036*-0x1)?(this['_scripts']['push'](_0x4ff2d5),_0x4ff2d5['__executio'+'nOrder']=_0x1cb61a,_0x4ff2d5['update']&&this['_updateLis'+'t']['append'](_0x4ff2d5),_0x4ff2d5['postUpdate']&&this['_postUpdat'+'eList']['append'](_0x4ff2d5)):(this['_scripts']['splice'](_0x57c60b,0x2a7*0xa+-0x253d+-0xab7*-0x1,_0x4ff2d5),_0x4ff2d5['__executio'+'nOrder']=_0x57c60b,this['_resetExec'+'utionOrder'](_0x57c60b+(0x1a9e+-0x2287+0x7ea*0x1),_0x1cb61a+(-0x68c+0x213a+0x1*-0x1aad)),_0x4ff2d5['update']&&this['_updateLis'+'t']['insert'](_0x4ff2d5),_0x4ff2d5['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x4ff2d5));}['_removeScr'+'iptInstanc'+'e'](_0x35e30a){const _0x434355=this['_scripts']['indexOf'](_0x35e30a);return _0x434355===-(-0xcf7*-0x3+0x33*0x7f+0x1*-0x4031)||(this['_scripts']['splice'](_0x434355,0x26cb+0x2*0x3e+0x392*-0xb),_0x35e30a['update']&&this['_updateLis'+'t']['remove'](_0x35e30a),_0x35e30a['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x35e30a)),_0x434355;}['_resetExec'+'utionOrder'](_0x251b57,_0x486c44){for(let _0x23f2a3=_0x251b57;_0x23f2a3<_0x486c44;_0x23f2a3++)this['_scripts'][_0x23f2a3]['__executio'+'nOrder']=_0x23f2a3;}['_resolveEn'+'tityScript'+'Attribute'](_0x223eee,_0x3468a9,_0x1f14ea,_0xc776cc,_0x581c66,_0x53f65b){if(_0x223eee['array']){const _0x537df0=_0x1f14ea['length'];if(!_0x537df0)return;const _0x456628=_0x1f14ea['slice']();for(let _0x579b4a=0x1*-0x2631+0x406+0x222b;_0x579b4a<_0x537df0;_0x579b4a++){const _0x922bab=_0x456628[_0x579b4a]instanceof lt?_0x456628[_0x579b4a]['getGuid']():_0x456628[_0x579b4a];_0x53f65b[_0x922bab]&&(_0x456628[_0x579b4a]=_0xc776cc?_0x53f65b[_0x922bab]['getGuid']():_0x53f65b[_0x922bab]);}_0x581c66[_0x3468a9]=_0x456628;}else{if(_0x1f14ea instanceof lt)_0x1f14ea=_0x1f14ea['getGuid']();else{if(typeof _0x1f14ea!='string')return;}_0x53f65b[_0x1f14ea]&&(_0x581c66[_0x3468a9]=_0x53f65b[_0x1f14ea]);}}['has'](_0x3529d8){if(typeof _0x3529d8=='string')return!!this['_scriptsIn'+'dex'][_0x3529d8];if(!_0x3529d8)return!(-0x1f*-0xcd+0x64a*0x3+-0x2bb0);const _0x3d262f=_0x3529d8,_0x40f972=_0x3d262f['__name'],_0x4bc016=this['_scriptsIn'+'dex'][_0x40f972];return(_0x4bc016&&_0x4bc016['instance'])instanceof _0x3d262f;}['get'](_0x2910ea){if(typeof _0x2910ea=='string'){const _0x43a52a=this['_scriptsIn'+'dex'][_0x2910ea];return _0x43a52a?_0x43a52a['instance']:null;}if(!_0x2910ea)return null;const _0x3210b0=_0x2910ea,_0x685d6c=_0x3210b0['__name'],_0x488386=this['_scriptsIn'+'dex'][_0x685d6c],_0x268f63=_0x488386&&_0x488386['instance'];return _0x268f63 instanceof _0x3210b0?_0x268f63:null;}['create'](_0x240fe0,_0x15ca02={}){const _0x42b1cd=this;let _0x29efe7=_0x240fe0,_0x17e996=_0x240fe0;if(typeof _0x29efe7=='string')_0x29efe7=this['system']['app']['scripts']['get'](_0x29efe7);else{if(_0x29efe7){const _0x219a91=S0(_0x29efe7),_0x14e46d=DF(_0x219a91);!(_0x29efe7['prototype']instanceof Wo)&&!_0x29efe7['scriptName']&&w['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x219a91+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x219a91+('.scriptNam'+'e\x20=\x20\x22')+_0x14e46d+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.')),_0x29efe7['__name']??(_0x29efe7['__name']=_0x29efe7['scriptName']??_0x14e46d),_0x17e996=_0x29efe7['__name'];}}if(_0x29efe7){if(!this['_scriptsIn'+'dex'][_0x17e996]||!this['_scriptsIn'+'dex'][_0x17e996]['instance']){const _0x34935b=new _0x29efe7({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x15ca02['hasOwnProp'+'erty']('enabled')?_0x15ca02['enabled']:!(0x2af*0x1+-0x29f+0x8*-0x2),'attributes':_0x15ca02['attributes']||{}});_0x15ca02['properties']&&typeof _0x15ca02['properties']=='object'&&Object['assign'](_0x34935b,_0x15ca02['properties']),_0x34935b instanceof Wo||this['_attribute'+'DataMap']['set'](_0x17e996,_0x15ca02['attributes']);const _0x1fcf0a=this['_scripts']['length'];let _0x4dce5a=-(0x203*0xe+-0x972+-0x12b7);return typeof _0x15ca02['ind']=='number'&&_0x15ca02['ind']!==-(-0x1dd*0x9+-0x26*0x101+-0x94*-0x5f)&&_0x1fcf0a>_0x15ca02['ind']&&(_0x4dce5a=_0x15ca02['ind']),this['_insertScr'+'iptInstanc'+'e'](_0x34935b,_0x4dce5a,_0x1fcf0a),this['_scriptsIn'+'dex'][_0x17e996]={'instance':_0x34935b,'onSwap':function(){_0x42b1cd['swap'](_0x17e996);}},this[_0x17e996]=_0x34935b,_0x15ca02['preloading']||this['initialize'+'Attributes'](_0x34935b),this['fire']('create',_0x17e996,_0x34935b),this['fire']('create:'+_0x17e996,_0x34935b),this['system']['app']['scripts']['on']('swap:'+_0x17e996,this['_scriptsIn'+'dex'][_0x17e996]['onSwap']),_0x15ca02['preloading']||(_0x34935b['enabled']&&!_0x34935b['_initializ'+'ed']&&(_0x34935b['_initializ'+'ed']=!(-0x1*-0x1541+-0x1667+0x126),_0x34935b['initialize']&&this['_scriptMet'+'hod'](_0x34935b,Bu)),_0x34935b['enabled']&&!_0x34935b['_postIniti'+'alized']&&(_0x34935b['_postIniti'+'alized']=!(0x355*0x7+-0x1e0+0x143*-0x11),_0x34935b['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x34935b,zu))),_0x34935b;}w['warn']('script\x20\x27'+_0x17e996+('\x27\x20is\x20alrea'+'dy\x20added\x20t'+'o\x20entity\x20\x27')+this['entity']['name']+'\x27');}else this['_scriptsIn'+'dex'][_0x17e996]={'awaiting':!(-0x1261+0x5*-0x303+0x8*0x42e),'ind':this['_scripts']['length']},w['warn']('script\x20\x27'+_0x17e996+('\x27\x20is\x20not\x20f'+'ound,\x20awai'+'ting\x20it\x20to'+'\x20be\x20added\x20'+'to\x20registr'+'y'));return null;}['destroy'](_0x48cc5b){let _0x1a9b46=_0x48cc5b,_0x1453ff=_0x48cc5b;typeof _0x1453ff=='string'?_0x1453ff=this['system']['app']['scripts']['get'](_0x1453ff):_0x1453ff&&(_0x1a9b46=_0x1453ff['__name']);const _0x35b4fa=this['_scriptsIn'+'dex'][_0x1a9b46];if(delete this['_scriptsIn'+'dex'][_0x1a9b46],!_0x35b4fa)return!(-0x723+-0x5*0x73+0x10b*0x9);this['_attribute'+'DataMap']['delete'](_0x1a9b46);const _0x19ffe7=_0x35b4fa['instance'];if(_0x19ffe7&&!_0x19ffe7['_destroyed']){if(_0x19ffe7['enabled']=!(0x1950+-0x3ab*0x7+0x5e),_0x19ffe7['_destroyed']=!(-0x20+0x5d9+0x5b9*-0x1),this['_isLooping'+'ThroughScr'+'ipts'])this['_destroyed'+'Scripts']['push'](_0x19ffe7);else{const _0x231923=this['_removeScr'+'iptInstanc'+'e'](_0x19ffe7);_0x231923>=-0x1e9a*-0x1+-0x70e+-0x178c&&this['_resetExec'+'utionOrder'](_0x231923,this['_scripts']['length']);}}return this['system']['app']['scripts']['off']('swap:'+_0x1a9b46,_0x35b4fa['onSwap']),delete this[_0x1a9b46],this['fire']('destroy',_0x1a9b46,_0x19ffe7||null),this['fire']('destroy:'+_0x1a9b46,_0x19ffe7||null),_0x19ffe7&&_0x19ffe7['fire']('destroy'),!(-0x21be+0x1e19+0x3a5);}['swap'](_0x2115ca){let _0x18a337=_0x2115ca,_0x421a69=_0x2115ca;typeof _0x421a69=='string'?_0x421a69=this['system']['app']['scripts']['get'](_0x421a69):_0x421a69&&(_0x18a337=_0x421a69['__name']);const _0xac62d1=this['_scriptsIn'+'dex'][_0x18a337];if(!_0xac62d1||!_0xac62d1['instance'])return!(0x1bd2+-0x12c8*0x1+0x9*-0x101);const _0x3bf36c=_0xac62d1['instance'],_0xee6dfe=this['_scripts']['indexOf'](_0x3bf36c),_0x299b1f=new _0x421a69({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x3bf36c['enabled'],'attributes':_0x3bf36c['__attribut'+'es']});return _0x299b1f['swap']?(this['initialize'+'Attributes'](_0x299b1f),this['_scripts'][_0xee6dfe]=_0x299b1f,this['_scriptsIn'+'dex'][_0x18a337]['instance']=_0x299b1f,this[_0x18a337]=_0x299b1f,_0x299b1f['__executio'+'nOrder']=_0xee6dfe,_0x3bf36c['update']&&this['_updateLis'+'t']['remove'](_0x3bf36c),_0x3bf36c['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x3bf36c),_0x299b1f['update']&&this['_updateLis'+'t']['insert'](_0x299b1f),_0x299b1f['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x299b1f),this['_scriptMet'+'hod'](_0x299b1f,PF,_0x3bf36c),this['fire']('swap',_0x18a337,_0x299b1f),this['fire']('swap:'+_0x18a337,_0x299b1f),!(0xd94+0x1a6b+-0x27ff*0x1)):!(-0x147f+-0xff2*0x1+-0x137*-0x1e);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x1e29e4,_0x3dc91b){var _0x5db154,_0x4a6f2b,_0x493275;const _0x4aa025=this['entity']['script'];for(const _0x430166 in _0x1e29e4['_scriptsIn'+'dex']){const _0x165888=this['system']['app']['scripts']['get'](_0x430166);if(!_0x165888)continue;const _0x18ba37=_0x1e29e4['_scriptsIn'+'dex'][_0x430166];if(!_0x18ba37||!_0x18ba37['instance'])continue;const _0x3ac237=_0x4aa025[_0x430166]['__attribut'+'esRaw']??_0x4aa025['_attribute'+'DataMap']['get'](_0x430166),_0x381cdd=_0x4aa025[_0x430166]['__attribut'+'es'];if(!_0x3ac237&&!_0x381cdd)continue;const _0x133513=!!_0x3ac237,_0x304287=_0x18ba37['instance']['__attribut'+'es']??_0x4aa025['_attribute'+'DataMap']['get'](_0x430166);for(const _0x5e9b17 in _0x304287){if(!_0x304287[_0x5e9b17])continue;const _0x4db243=((_0x5db154=_0x165888['attributes'])==null?void(-0x1*0x150+0x296*0xe+-0x22e4):_0x5db154['get'](_0x5e9b17))??((_0x493275=(_0x4a6f2b=this['system']['app']['scripts']['getSchema'](_0x430166))==null?void(-0x1586+0x206b*0x1+-0xae5):_0x4a6f2b['attributes'])==null?void(0x2606*0x1+-0x124b+-0x13bb):_0x493275[_0x5e9b17]);if(_0x4db243){if(_0x4db243['type']==='entity')this['_resolveEn'+'tityScript'+'Attribute'](_0x4db243,_0x5e9b17,_0x304287[_0x5e9b17],_0x133513,_0x3ac237||_0x381cdd,_0x3dc91b);else{if(_0x4db243['type']==='json'&&Array['isArray'](_0x4db243['schema'])){const _0x4dd16f=_0x304287[_0x5e9b17],_0x50c2c3=_0x3ac237?_0x3ac237[_0x5e9b17]:_0x381cdd[_0x5e9b17];for(let _0xd167b8=0x1322+-0x1f*-0xb+0x1*-0x1477;_0xd167b8<_0x4db243['schema']['length'];_0xd167b8++){const _0x5fe60f=_0x4db243['schema'][_0xd167b8];if(_0x5fe60f['type']==='entity'){if(_0x4db243['array']){for(let _0x1a4de9=-0x2*-0xe62+-0x1*-0x1cc9+0x9*-0x665;_0x1a4de9<_0x4dd16f['length'];_0x1a4de9++)this['_resolveEn'+'tityScript'+'Attribute'](_0x5fe60f,_0x5fe60f['name'],_0x4dd16f[_0x1a4de9][_0x5fe60f['name']],_0x133513,_0x50c2c3[_0x1a4de9],_0x3dc91b);}else this['_resolveEn'+'tityScript'+'Attribute'](_0x5fe60f,_0x5fe60f['name'],_0x4dd16f[_0x5fe60f['name']],_0x133513,_0x50c2c3,_0x3dc91b);}}}}}}}}['move'](_0x46fdb4,_0x48443f){const _0x4fead7=this['_scripts']['length'];if(_0x48443f>=_0x4fead7||_0x48443f<-0xda7+0x22ee+-0x1547)return!(-0x210c+0x13f*0xd+-0x1*-0x10da);let _0x281306=_0x46fdb4,_0x18f8b7=_0x46fdb4;typeof _0x18f8b7!='string'?_0x18f8b7=_0x46fdb4['__name']:_0x281306=null;const _0x5decdf=this['_scriptsIn'+'dex'][_0x18f8b7];if(!_0x5decdf||!_0x5decdf['instance'])return!(-0x1af6*0x1+-0x148d*-0x1+-0x1*-0x66a);const _0x2e8489=_0x5decdf['instance'];if(_0x281306&&!(_0x2e8489 instanceof _0x281306))return!(0xadc+-0x1*0x1066+0x58b);const _0x45ac12=this['_scripts']['indexOf'](_0x2e8489);return _0x45ac12===-(0x1*-0x13+-0x1c3d*0x1+0x293*0xb)||_0x45ac12===_0x48443f?!(0x1*0xacb+-0x3e*-0x9f+-0x314c):(this['_scripts']['splice'](_0x48443f,-0x1*-0x1d8a+0x1*-0x1882+-0x508,this['_scripts']['splice'](_0x45ac12,0xf7e+-0x23a6+-0x1*-0x1429)[-0x11e3*0x1+-0x2*-0x12ae+-0x1379]),this['_resetExec'+'utionOrder'](0x262+-0x2705+-0x24a3*-0x1,_0x4fead7),this['_updateLis'+'t']['sort'](),this['_postUpdat'+'eList']['sort'](),this['fire']('move',_0x18f8b7,_0x2e8489,_0x48443f,_0x45ac12),this['fire']('move:'+_0x18f8b7,_0x2e8489,_0x48443f,_0x45ac12),!(0x1f55+0x9b2+-0x2907));}}h(Ii,'EVENT_CREA'+'TE','create'),h(Ii,'EVENT_DEST'+'ROY','destroy'),h(Ii,'EVENT_ENAB'+'LE','enable'),h(Ii,'EVENT_DISA'+'BLE','disable'),h(Ii,'EVENT_REMO'+'VE','remove'),h(Ii,'EVENT_STAT'+'E','state'),h(Ii,'EVENT_MOVE','move'),h(Ii,'EVENT_ERRO'+'R','error');class IF{constructor(){this['enabled']=!(-0x1a72+-0x1375+-0x2de7*-0x1);}}const LF='_onInitial'+'izeAttribu'+'tes',RF='_onInitial'+'ize',OF='_onPostIni'+'tialize',FF='_onUpdate',NF='_onPostUpd'+'ate';let Mc=0xd5d+-0xdd6+-0x79*-0x1;class kF extends ct{constructor(_0x6ef311){super(_0x6ef311),this['id']='script',this['ComponentT'+'ype']=Ii,this['DataType']=IF,this['_component'+'s']=new oh({'sortBy':'_execution'+'Order'}),this['_enabledCo'+'mponents']=new oh({'sortBy':'_execution'+'Order'}),this['preloading']=!(-0x6*0x5+-0x1*0x1d9+0x1*0x1f7),this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this),this['app']['systems']['on']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['on']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x55b6be,_0x2ded44){if(_0x55b6be['_execution'+'Order']=Mc++,this['_component'+'s']['append'](_0x55b6be),Mc>Number['MAX_SAFE_I'+'NTEGER']&&this['_resetExec'+'utionOrder'](),_0x55b6be['enabled']=_0x2ded44['hasOwnProp'+'erty']('enabled')?!!_0x2ded44['enabled']:!(0x5f3*-0x1+0xf1d+0x3*-0x30e),_0x55b6be['enabled']&&_0x55b6be['entity']['enabled']&&this['_enabledCo'+'mponents']['append'](_0x55b6be),_0x2ded44['hasOwnProp'+'erty']('order')&&_0x2ded44['hasOwnProp'+'erty']('scripts')){_0x55b6be['_scriptsDa'+'ta']=_0x2ded44['scripts'];for(let _0x308686=0x1*-0x14e+0x12fb+-0x11ad;_0x308686<_0x2ded44['order']['length'];_0x308686++)_0x55b6be['create'](_0x2ded44['order'][_0x308686],{'enabled':_0x2ded44['scripts'][_0x2ded44['order'][_0x308686]]['enabled'],'attributes':_0x2ded44['scripts'][_0x2ded44['order'][_0x308686]]['attributes'],'preloading':this['preloading']});}}['cloneCompo'+'nent'](_0x7d430a,_0x51540b){var _0x3e41a6;const _0x51c564=[],_0xbcede0={};for(let _0x1fb505=-0x19a9+0x1eba+0x511*-0x1;_0x1fb505<_0x7d430a['script']['_scripts']['length'];_0x1fb505++){const _0x3c5d49=_0x7d430a['script']['_scripts'][_0x1fb505],_0x3ad119=_0x3c5d49['__scriptTy'+'pe']['__name'];_0x51c564['push'](_0x3ad119);const _0x3a1a5f=((_0x3e41a6=_0x7d430a['script']['_attribute'+'DataMap'])==null?void(-0x67*-0xb+0x4d9+-0x946):_0x3e41a6['get'](_0x3ad119))||{};for(const _0x59edd0 in _0x3c5d49['__attribut'+'es'])_0x3a1a5f[_0x59edd0]=_0x3c5d49['__attribut'+'es'][_0x59edd0];_0xbcede0[_0x3ad119]={'enabled':_0x3c5d49['_enabled'],'attributes':_0x3a1a5f};}for(const _0x4e99a9 in _0x7d430a['script']['_scriptsIn'+'dex'])_0x4e99a9['awaiting']&&_0x51c564['splice'](_0x4e99a9['ind'],0xfb*0x1f+-0x1*-0xff5+-0x15d*0x22,_0x4e99a9);const _0x294235={'enabled':_0x7d430a['script']['enabled'],'order':_0x51c564,'scripts':_0xbcede0};return this['addCompone'+'nt'](_0x51540b,_0x294235);}['_resetExec'+'utionOrder'](){Mc=-0x2*-0xac9+-0x1c27*0x1+0x5*0x151;for(let _0x1ad499=-0x1502*0x1+0x13b*0x1b+-0xc37,_0x194d49=this['_component'+'s']['length'];_0x1ad499<_0x194d49;_0x1ad499++)this['_component'+'s']['items'][_0x1ad499]['_execution'+'Order']=Mc++;}['_callCompo'+'nentMethod'](_0x538d68,_0x5ae120,_0x2968a){for(_0x538d68['loopIndex']=-0xd1d+-0x3*0xce7+0x33d2;_0x538d68['loopIndex']<_0x538d68['length'];_0x538d68['loopIndex']++)_0x538d68['items'][_0x538d68['loopIndex']][_0x5ae120](_0x2968a);}['_onInitial'+'ize'](){this['preloading']=!(0x5ac+0x78*0x38+-0x1feb),this['_callCompo'+'nentMethod'](this['_component'+'s'],LF),this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],RF);}['_onPostIni'+'tialize'](){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],OF);}['_onUpdate'](_0x2a479e){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],FF,_0x2a479e);}['_onPostUpd'+'ate'](_0x174a27){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],NF,_0x174a27);}['_addCompon'+'entToEnabl'+'ed'](_0x5dc1ef){this['_enabledCo'+'mponents']['insert'](_0x5dc1ef);}['_removeCom'+'ponentFrom'+'Enabled'](_0x372440){this['_enabledCo'+'mponents']['remove'](_0x372440);}['_onBeforeR'+'emove'](_0x49c4d2,_0x19d109){this['_component'+'s']['items']['indexOf'](_0x19d109)>=-0x43+0x1042+-0xfff&&_0x19d109['_onBeforeR'+'emove'](),this['_removeCom'+'ponentFrom'+'Enabled'](_0x19d109),this['_component'+'s']['remove'](_0x19d109);}['destroy'](){super['destroy'](),this['app']['systems']['off']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['off']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}class y0 extends we{constructor(_0x543be0,_0x458091){super(_0x543be0,_0x458091),h(this,'_layers',[er]),h(this,'_instance',null),h(this,'_materialT'+'mp',null),h(this,'_highQuali'+'tySH',!(0x1987*-0x1+0x65+-0x2*-0xc91)),h(this,'_customAab'+'b',null),h(this,'_assetRefe'+'rence'),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_castShado'+'ws',!(-0x11*0x7b+-0xc99+0x14c5)),(this['_assetRefe'+'rence']=new gl('asset',this,_0x543be0['app']['assets'],{'add':this['_onGSplatA'+'ssetAdded'],'load':this['_onGSplatA'+'ssetLoad'],'remove':this['_onGSplatA'+'ssetRemove'],'unload':this['_onGSplatA'+'ssetUnload']},this),_0x458091['on']('remove',this['onRemoveCh'+'ild'],this),_0x458091['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x458091['on']('insert',this['onInsertCh'+'ild'],this),_0x458091['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['customAabb'](_0xa077b8){var _0x187589,_0x130c98;this['_customAab'+'b']=_0xa077b8,(_0x130c98=(_0x187589=this['_instance'])==null?void(-0x1a5*0x14+0x150a+0xbda):_0x187589['meshInstan'+'ce'])==null||_0x130c98['setCustomA'+'abb'](this['_customAab'+'b']);}get['customAabb'](){return this['_customAab'+'b'];}set['instance'](_0x1f5eba){if(this['destroyIns'+'tance'](),this['_instance']=_0x1f5eba,this['_instance']){const _0x15f2d8=this['_instance']['meshInstan'+'ce'];_0x15f2d8['node']||(_0x15f2d8['node']=this['entity']),_0x15f2d8['castShadow']=this['_castShado'+'ws'],_0x15f2d8['setCustomA'+'abb'](this['_customAab'+'b']),this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['instance'](){return this['_instance'];}set['material'](_0x123302){this['_instance']?this['_instance']['material']=_0x123302:this['_materialT'+'mp']=_0x123302;}get['material'](){var _0x55d633;return((_0x55d633=this['_instance'])==null?void(-0x225*-0x1+0x15b*0xf+0x1*-0x167a):_0x55d633['material'])??this['_materialT'+'mp']??null;}set['highQualit'+'ySH'](_0x499cb2){_0x499cb2!==this['_highQuali'+'tySH']&&(this['_highQuali'+'tySH']=_0x499cb2,this['_instance']&&this['_instance']['setHighQua'+'litySH'](_0x499cb2));}get['highQualit'+'ySH'](){return this['_highQuali'+'tySH'];}set['castShadow'+'s'](_0x31b2f0){var _0x479607;if(this['_castShado'+'ws']!==_0x31b2f0){const _0x1afd6e=(_0x479607=this['instance'])==null?void(0x71f+-0x9ea+0xd*0x37):_0x479607['meshInstan'+'ce'];if(_0x1afd6e){const _0x45d323=this['layers'],_0x46a891=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x31b2f0)for(let _0x3b1409=-0x25f*0x6+-0xd7c*-0x2+0x2*-0x65f;_0x3b1409<_0x45d323['length'];_0x3b1409++){const _0x4d5fb3=_0x46a891['layers']['getLayerBy'+'Id'](this['layers'][_0x3b1409]);_0x4d5fb3&&_0x4d5fb3['removeShad'+'owCasters']([_0x1afd6e]);}if(_0x1afd6e['castShadow']=_0x31b2f0,!this['_castShado'+'ws']&&_0x31b2f0)for(let _0x14c20a=-0x1fbd+0xac*0x27+0x589;_0x14c20a<_0x45d323['length'];_0x14c20a++){const _0xd7253c=_0x46a891['layers']['getLayerBy'+'Id'](_0x45d323[_0x14c20a]);_0xd7253c&&_0xd7253c['addShadowC'+'asters']([_0x1afd6e]);}}this['_castShado'+'ws']=_0x31b2f0;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['layers'](_0x37892e){this['removeFrom'+'Layers'](),this['_layers']['length']=-0x261+-0x36*0xb2+0x27ed;for(let _0x40b69a=0xe77+-0x80f+-0x4*0x19a;_0x40b69a<_0x37892e['length'];_0x40b69a++)this['_layers'][_0x40b69a]=_0x37892e[_0x40b69a];!this['enabled']||!this['entity']['enabled']||this['addToLayer'+'s']();}get['layers'](){return this['_layers'];}set['asset'](_0x48cf02){const _0x57810d=_0x48cf02 instanceof pe?_0x48cf02['id']:_0x48cf02;this['_assetRefe'+'rence']['id']!==_0x57810d&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onGSplatA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x57810d,this['_assetRefe'+'rence']['asset']&&this['_onGSplatA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['destroyIns'+'tance'](){var _0x19533c;this['_instance']&&(this['removeFrom'+'Layers'](),(_0x19533c=this['_instance'])==null||_0x19533c['destroy'](),this['_instance']=null);}['addToLayer'+'s'](){var _0x3f9280,_0x4ad68d;const _0x57b132=(_0x3f9280=this['instance'])==null?void(-0x584+0x1231+-0xcad):_0x3f9280['meshInstan'+'ce'];if(_0x57b132){const _0x19be1b=this['system']['app']['scene']['layers'];for(let _0x2fdfef=0x1cd6+-0x82a+-0x14ac;_0x2fdfef<this['_layers']['length'];_0x2fdfef++)(_0x4ad68d=_0x19be1b['getLayerBy'+'Id'](this['_layers'][_0x2fdfef]))==null||_0x4ad68d['addMeshIns'+'tances']([_0x57b132]);}}['removeFrom'+'Layers'](){var _0x536c02,_0x35be17;const _0x3eabe2=(_0x536c02=this['instance'])==null?void(0x4*-0x7e2+0x6*-0x125+0x2666):_0x536c02['meshInstan'+'ce'];if(_0x3eabe2){const _0x1e65da=this['system']['app']['scene']['layers'];for(let _0x3cb753=0x11fb+-0x20a8+0xead;_0x3cb753<this['_layers']['length'];_0x3cb753++)(_0x35be17=_0x1e65da['getLayerBy'+'Id'](this['_layers'][_0x3cb753]))==null||_0x35be17['removeMesh'+'Instances']([_0x3eabe2]);}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_instance']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyIns'+'tance'](),this['asset']=null,this['_assetRefe'+'rence']['id']=null,this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x22e477,_0x4ee4ac){this['addToLayer'+'s'](),_0x22e477['off']('add',this['onLayerAdd'+'ed'],this),_0x22e477['off']('remove',this['onLayerRem'+'oved'],this),_0x4ee4ac['on']('add',this['onLayerAdd'+'ed'],this),_0x4ee4ac['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x1a7eee){this['layers']['indexOf'](_0x1a7eee['id'])<0x10f6+-0x1*-0x220d+0x3*-0x1101||this['_instance']&&_0x1a7eee['addMeshIns'+'tances'](this['_instance']['meshInstan'+'ce']);}['onLayerRem'+'oved'](_0x5753e8){this['layers']['indexOf'](_0x5753e8['id'])<0x2*0xacc+0x1ec5+0x7*-0x77b||this['_instance']&&_0x5753e8['removeMesh'+'Instances'](this['_instance']['meshInstan'+'ce']);}['onEnable'](){const _0x909b7b=this['system']['app']['scene'],_0x3ecd5c=_0x909b7b['layers'];this['_evtLayers'+'Changed']=_0x909b7b['on']('set:layers',this['onLayersCh'+'anged'],this),_0x3ecd5c&&(this['_evtLayerA'+'dded']=_0x3ecd5c['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x3ecd5c['on']('remove',this['onLayerRem'+'oved'],this)),this['_instance']?this['addToLayer'+'s']():this['asset']&&this['_onGSplatA'+'ssetAdded']();}['onDisable'](){var _0x59a258,_0x220b48,_0x1232a7;const _0x1b1571=this['system']['app']['scene']['layers'];(_0x59a258=this['_evtLayers'+'Changed'])==null||_0x59a258['off'](),this['_evtLayers'+'Changed']=null,_0x1b1571&&((_0x220b48=this['_evtLayerA'+'dded'])==null||_0x220b48['off'](),this['_evtLayerA'+'dded']=null,(_0x1232a7=this['_evtLayerR'+'emoved'])==null||_0x1232a7['off'](),this['_evtLayerR'+'emoved']=null),this['removeFrom'+'Layers']();}['hide'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(-0x1*-0xdc1+-0x40*0x5c+-0x40*-0x25));}['show'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(-0xe3*-0x25+-0x873*-0x3+-0x3a28));}['_onGSplatA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onGSplatA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onGSplatA'+'ssetLoad'](){this['destroyIns'+'tance']();const _0x42a866=this['_assetRefe'+'rence']['asset'];_0x42a866&&(this['instance']=_0x42a866['resource']['createInst'+'ance'](_0x42a866['resource'],{'material':this['_materialT'+'mp'],'highQualitySH':this['_highQuali'+'tySH']}),this['_materialT'+'mp']=null,this['customAabb']=this['instance']['resource']['aabb']['clone']());}['_onGSplatA'+'ssetUnload'](){this['destroyIns'+'tance']();}['_onGSplatA'+'ssetRemove'](){this['_onGSplatA'+'ssetUnload']();}}class UF{constructor(){this['enabled']=!(0x1*0x9f+-0x2544+0x24a5);}}const Vu=['enabled'],To=['castShadow'+'s','material','highQualit'+'ySH','asset','layers'];class BF extends ct{constructor(_0x2643c9){super(_0x2643c9),this['id']='gsplat',this['ComponentT'+'ype']=y0,this['DataType']=UF,this['schema']=Vu,this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x2ed2f0,_0x5f2990,_0xbca18f){_0x5f2990['layers']&&_0x5f2990['layers']['length']&&(_0x5f2990['layers']=_0x5f2990['layers']['slice'](-0x2061+-0x230+0x2291));for(let _0x109ff9=-0xefa+-0xe10+0x1d0a;_0x109ff9<To['length'];_0x109ff9++)_0x5f2990['hasOwnProp'+'erty'](To[_0x109ff9])&&(_0x2ed2f0[To[_0x109ff9]]=_0x5f2990[To[_0x109ff9]]);_0x5f2990['aabbCenter']&&_0x5f2990['aabbHalfEx'+'tents']&&(_0x2ed2f0['customAabb']=new De(new D(_0x5f2990['aabbCenter']),new D(_0x5f2990['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x2ed2f0,_0x5f2990,Vu);}['cloneCompo'+'nent'](_0x356546,_0x1383cc){const _0x364610=_0x356546['gsplat'],_0x350896={};To['forEach'](_0x1482ae=>{_0x1482ae==='material'?_0x350896[_0x1482ae]=_0x364610[_0x1482ae]['clone']():_0x350896[_0x1482ae]=_0x364610[_0x1482ae];}),_0x350896['enabled']=_0x364610['enabled'];const _0x121b24=this['addCompone'+'nt'](_0x1383cc,_0x350896);return _0x364610['customAabb']&&(_0x121b24['customAabb']=_0x364610['customAabb']['clone']()),_0x121b24;}['onRemove'](_0x266753,_0x2d7ce0){_0x2d7ce0['onRemove']();}}we['_buildAcce'+'ssors'](y0['prototype'],Vu);class Em extends me{constructor(){super(...arguments),h(this,'_meshes',null);}set['meshes'](_0x59bb1a){this['decRefMesh'+'es'](),this['_meshes']=_0x59bb1a,this['incRefMesh'+'es'](),this['fire']('set:meshes',_0x59bb1a);}get['meshes'](){return this['_meshes'];}['destroy'](){this['meshes']=null;}['decRefMesh'+'es'](){var _0x58b13c;(_0x58b13c=this['_meshes'])==null||_0x58b13c['forEach']((_0x27eff4,_0x420801)=>{_0x27eff4&&(_0x27eff4['decRefCoun'+'t'](),_0x27eff4['refCount']<-0xc5b*-0x2+-0xed8+0x1f9*-0x5&&(_0x27eff4['destroy'](),this['_meshes'][_0x420801]=null));});}['incRefMesh'+'es'](){var _0x5c4cba;(_0x5c4cba=this['_meshes'])==null||_0x5c4cba['forEach'](_0x3008f9=>{_0x3008f9==null||_0x3008f9['incRefCoun'+'t']();});}}h(Em,'EVENT_SETM'+'ESHES','set:meshes');function sh(_0x1be402){const _0x2c4db7=this;if(!_0x2c4db7['resource'])return;const _0x35a3a2=_0x1be402['resource'],_0x403e53=_0x35a3a2['renders']&&_0x35a3a2['renders'][_0x2c4db7['data']['renderInde'+'x']];_0x403e53&&(_0x2c4db7['resource']['meshes']=_0x403e53['resource']['meshes']);}function pS(_0x5234f8){const _0x218a7e=this;_0x218a7e['registry']['off']('load:'+_0x5234f8['id'],sh,_0x218a7e),_0x218a7e['registry']['on']('load:'+_0x5234f8['id'],sh,_0x218a7e),_0x218a7e['registry']['off']('remove:'+_0x5234f8['id'],mS,_0x218a7e),_0x218a7e['registry']['once']('remove:'+_0x5234f8['id'],mS,_0x218a7e),_0x5234f8['resource']?sh['call'](_0x218a7e,_0x5234f8):_0x218a7e['registry']['load'](_0x5234f8);}function mS(_0x4770fb){const _0xd9f051=this;_0xd9f051['registry']['off']('load:'+_0x4770fb['id'],sh,_0xd9f051),_0xd9f051['resource']&&_0xd9f051['resource']['destroy']();}class zF extends Qe{constructor(_0x3a4a83){super(_0x3a4a83,'render'),this['_registry']=_0x3a4a83['assets'];}['open'](_0x29a010,_0x5024c8){return new Em();}['patch'](_0x4e7c2d,_0x208ea5){if(!_0x4e7c2d['data']['containerA'+'sset'])return;const _0x5c10d7=_0x208ea5['get'](_0x4e7c2d['data']['containerA'+'sset']);if(!_0x5c10d7){_0x208ea5['once']('add:'+_0x4e7c2d['data']['containerA'+'sset'],pS,_0x4e7c2d);return;}pS['call'](_0x4e7c2d,_0x5c10d7);}}class v0{constructor(_0x73310,_0x1f3e04,_0x4fdb4d,_0x38a3fa){this['_paths']=_0x73310,this['_input']=_0x1f3e04,this['_output']=_0x4fdb4d,this['_interpola'+'tion']=_0x38a3fa;}get['paths'](){return this['_paths'];}get['input'](){return this['_input'];}get['output'](){return this['_output'];}get['interpolat'+'ion'](){return this['_interpola'+'tion'];}}class Fh{constructor(_0x5e02aa,_0x38ab6e){this['_component'+'s']=_0x5e02aa,this['_data']=_0x38ab6e;}get['components'](){return this['_component'+'s'];}get['data'](){return this['_data'];}}function VF(_0x5e495b,_0x21efd5){let _0x4033cb;const _0x232d69=(_0x4943a2,_0x384384)=>{switch(_0x384384){case _0x4033cb['DT_INT8']:return new Int8Array(_0x4943a2['buffer'],_0x4943a2['byteOffset'],_0x4943a2['byteLength']);case _0x4033cb['DT_INT16']:return new Int16Array(_0x4943a2['buffer'],_0x4943a2['byteOffset'],_0x4943a2['byteLength']/(-0x24af+0x1*-0x26b1+0x4b62));case _0x4033cb['DT_INT32']:return new Int32Array(_0x4943a2['buffer'],_0x4943a2['byteOffset'],_0x4943a2['byteLength']/(0x1405+0x2a2*0x3+-0x1be7));case _0x4033cb['DT_UINT8']:return new Uint8Array(_0x4943a2['buffer'],_0x4943a2['byteOffset'],_0x4943a2['byteLength']);case _0x4033cb['DT_UINT16']:return new Uint16Array(_0x4943a2['buffer'],_0x4943a2['byteOffset'],_0x4943a2['byteLength']/(0x1378+0x28*0x83+-0x27ee));case _0x4033cb['DT_UINT32']:return new Uint32Array(_0x4943a2['buffer'],_0x4943a2['byteOffset'],_0x4943a2['byteLength']/(-0x22b6*-0x1+0x1*-0x171f+-0xb93));case _0x4033cb['DT_FLOAT32']:return new Float32Array(_0x4943a2['buffer'],_0x4943a2['byteOffset'],_0x4943a2['byteLength']/(0x3*0x7c5+0x40a+-0x1b55));}return null;},_0x463afa=_0x49b7e3=>{switch(_0x49b7e3){case _0x4033cb['DT_INT8']:return 0x7d*0x4a+-0x1*-0x2525+0xa6*-0x71;case _0x4033cb['DT_INT16']:return 0xffd+0x1ccf+-0x15*0x222;case _0x4033cb['DT_INT32']:return-0x270c+0x54*-0x6f+0x4b7c;case _0x4033cb['DT_UINT8']:return 0x1547+-0x30a*-0x5+-0x2478;case _0x4033cb['DT_UINT16']:return-0x1e4+0x6f5+-0x23*0x25;case _0x4033cb['DT_UINT32']:return 0x1c07+-0x3*0xa11+0x1c*0x14;case _0x4033cb['DT_FLOAT32']:return 0x12e7*-0x1+-0x1*-0x153d+-0x252;}return 0x1a04+-0xac*0xf+-0xfef;},_0xa03b22=_0x4e90ee=>_0x4e90ee['num_compon'+'ents']()*_0x463afa(_0x4e90ee['data_type']()),_0x2bc18d={0x0:0x0,0x1:0x1,0x5:0x2,0x2:0x3,0x7:0x4,0x8:0x5,0x4:0x6,0x3:0x7},_0x3a09d1=(_0x4e1199,_0x217225)=>{const _0x41f133=(_0x322b67,_0x2207b6,_0x3002a1)=>{_0x322b67[0x5*0x69d+-0x3*0x761+0xaee*-0x1]=_0x2207b6[-0x3*-0x62b+0x959*0x4+-0x37e5]-_0x3002a1[0x14ae+0x931+-0x1ddf],_0x322b67[0x200*0x2+0x5*0x5ba+-0x20a1*0x1]=_0x2207b6[0x9ce+-0x22bc+0x18ef*0x1]-_0x3002a1[0x2449+-0x1*-0x1863+0x1439*-0x3],_0x322b67[-0xac1*-0x2+-0x25b6+0x81b*0x2]=_0x2207b6[-0x1bf9+0x1*-0x1c55+0x3850*0x1]-_0x3002a1[-0x8b*-0x31+-0x5*-0x265+-0x2692];},_0x405054=(_0x3c6781,_0x15c2f1,_0x505549)=>{_0x3c6781[0x254f*0x1+-0x2168+0x1b*-0x25]=_0x15c2f1[-0x1629+0x1aad+-0x483]*_0x505549[-0x1b4*0xb+0xbdb+-0x1*-0x6e3]-_0x505549[0x1979+-0x2e8*0x5+-0xaf0]*_0x15c2f1[0x1dd3+-0x1aed+0x2e4*-0x1],_0x3c6781[-0x1a65+0xeb3*-0x1+0x2919]=_0x15c2f1[-0x1a*0x3a+0x2fe*-0x7+0x1ad8]*_0x505549[-0x41*-0x21+-0x1*0x1976+0x1115]-_0x505549[-0xab3+-0x2597+0x304c]*_0x15c2f1[0x665+0x1c9c+0x67*-0x57],_0x3c6781[0xf*0x1e4+0x18b*-0x1+-0x1acf*0x1]=_0x15c2f1[-0x1da*0x6+0x248e+-0x1972]*_0x505549[0x218*0x5+0xb6*-0x34+0x1a81]-_0x505549[-0xbec+-0x6*0x33b+0xfa7*0x2]*_0x15c2f1[0x1322+0x313*0x4+0x5*-0x649];},_0x18cedb=(_0x57e6a0,_0x43052f)=>{const _0xea249b=_0x57e6a0[_0x43052f+(0xa29+-0x28e*0x9+-0x2d*-0x49)],_0x182916=_0x57e6a0[_0x43052f+(-0x1*0x1039+-0x25ad+0x35e7)],_0x17a93c=_0x57e6a0[_0x43052f+(0xe12*0x1+0x3*-0xac1+0x1233)],_0x233f29=(-0x1*0xc25+-0x1d4d+0x2973)/Math['sqrt'](_0xea249b*_0xea249b+_0x182916*_0x182916+_0x17a93c*_0x17a93c);_0x57e6a0[_0x43052f+(-0xb4b+0x151a+0x5d*-0x1b)]*=_0x233f29,_0x57e6a0[_0x43052f+(-0x1a76+0x184b*0x1+0x4*0x8b)]*=_0x233f29,_0x57e6a0[_0x43052f+(-0x4*-0x12d+0x520*0x5+0xf29*-0x2)]*=_0x233f29;},_0x1bfe84=(_0x1b51d2,_0x1bf713,_0x2298a2)=>{for(let _0x5b9f71=-0x1*-0x1a23+0x334*-0x7+0x3b7*-0x1;_0x5b9f71<-0xf89+0x21c6+-0x123a;++_0x5b9f71)_0x1b51d2[_0x5b9f71]=_0x1bf713[_0x2298a2+_0x5b9f71];},_0x32db9a=_0x217225['length']/(0x1c3d+0x1*-0xc07+0x179*-0xb),_0x223af9=_0x4e1199['length']/(0x1*-0x14eb+0x1*0x114a+0x3a4),_0x7f504=new Float32Array(_0x4e1199['length']),_0x241759=[-0x1382+0x6d9*-0x3+-0x280d*-0x1,-0x67*-0x1+0x5fd+-0x664,0x1a25*-0x1+0x4cf*-0x3+0x2892],_0x4527e6=[0xc97+-0x5f+-0xc38,0x22*-0xe2+-0x98*-0x1f+0xb9c,0x1f8+0x179d+-0x1995],_0x449a92=[0x2450+-0x962+0x1aee*-0x1,0x213c+0x1860+-0x1*0x399c,-0x187f*0x1+-0x7f7+-0x1e*-0x115],_0x379596=[0x9*0x23b+0x21bb+-0x35ce,-0x1*-0x1ebe+-0x20b1+-0x1*-0x1f3,-0x1*-0x133+-0x7*-0x365+-0x18f6],_0x416e33=[0x12d9+-0x1*-0xf13+-0x21ec,-0x1cf5+-0x49d*-0x5+0x1d*0x34,-0x22f1*0x1+0x7d*0x7+0x1f86],_0x44983f=[-0x1a11+-0x1250+-0x2c61*-0x1,-0x6a*0x1f+0x8c3+0x1*0x413,0x3f*-0x39+-0x1*0x526+-0x1*-0x132d];for(let _0x4132d5=-0x2671+0x1996+0x449*0x3;_0x4132d5<_0x32db9a;++_0x4132d5){const _0x468a06=_0x217225[_0x4132d5*(0xf1e+-0x19*-0x174+-0x336f)+(0xf65+0x9*0x3d9+-0x3206)]*(0x81*0x20+-0x1*-0x22d1+-0x32ee),_0x5b24fd=_0x217225[_0x4132d5*(-0x1*0x35b+-0xa0+-0x49*-0xe)+(0x1e73+-0x230a+-0x3*-0x188)]*(0x99a+-0x1*0x1bef+0x1258),_0x114964=_0x217225[_0x4132d5*(-0x1174+0x1*0x22b3+0x44f*-0x4)+(0xd7+0x3*0x85d+-0x9e*0x2a)]*(-0xfe0+0x66c*0x3+-0x1*0x361);_0x1bfe84(_0x241759,_0x4e1199,_0x468a06),_0x1bfe84(_0x4527e6,_0x4e1199,_0x5b24fd),_0x1bfe84(_0x449a92,_0x4e1199,_0x114964),_0x41f133(_0x379596,_0x4527e6,_0x241759),_0x41f133(_0x416e33,_0x449a92,_0x241759),_0x405054(_0x44983f,_0x379596,_0x416e33),_0x18cedb(_0x44983f,-0x655+0x1379+-0xd24);for(let _0xe7dbb7=-0x852+-0x5ff*0x1+0xe51;_0xe7dbb7<-0x71b*-0x4+-0xb6*0x1f+-0x65f;++_0xe7dbb7)_0x7f504[_0x468a06+_0xe7dbb7]+=_0x44983f[_0xe7dbb7],_0x7f504[_0x5b24fd+_0xe7dbb7]+=_0x44983f[_0xe7dbb7],_0x7f504[_0x114964+_0xe7dbb7]+=_0x44983f[_0xe7dbb7];}for(let _0x4f63ff=0x2019+-0x962+-0x16b7;_0x4f63ff<_0x223af9;++_0x4f63ff)_0x18cedb(_0x7f504,_0x4f63ff*(-0xaed*0x1+0x146b+-0x97b));return new Uint8Array(_0x7f504['buffer']);},_0x9883a9=_0x34c8e0=>{const _0x43aede={},_0x3ee7aa=new _0x4033cb['DecoderBuf'+'fer']();_0x3ee7aa['Init'](_0x34c8e0,_0x34c8e0['length']);const _0x45969a=new _0x4033cb['Decoder']();if(_0x45969a['GetEncoded'+'GeometryTy'+'pe'](_0x3ee7aa)!==_0x4033cb['TRIANGULAR'+'_MESH'])return _0x43aede['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20mesh:\x20n'+'ot\x20a\x20mesh',_0x43aede;const _0x1f2214=new _0x4033cb['Mesh'](),_0x4502cf=_0x45969a['DecodeBuff'+'erToMesh'](_0x3ee7aa,_0x1f2214);if(!_0x4502cf||!_0x4502cf['ok']()||_0x4033cb['getPointer'](_0x1f2214)===-0xbaf+0x2fe+0x1*0x8b1)return _0x43aede['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20asset',_0x43aede;const _0x584968=_0x1f2214['num_faces']()*(-0x11fb*0x1+-0x38+-0x3*-0x612),_0x2d08e2=_0x1f2214['num_points']()<=-0x12120+0x1ee2*-0x2+0x1067*0x25,_0x3782c8=_0x584968*(_0x2d08e2?-0x1010+-0x9bb+-0x529*-0x5:0x1a4+0x2664+-0x2804),_0x17fe49=_0x4033cb['_malloc'](_0x3782c8);_0x2d08e2?(_0x45969a['GetTriangl'+'esUInt16Ar'+'ray'](_0x1f2214,_0x3782c8,_0x17fe49),_0x43aede['indices']=new Uint16Array(_0x4033cb['HEAPU16']['buffer'],_0x17fe49,_0x584968)['slice']()['buffer']):(_0x45969a['GetTriangl'+'esUInt32Ar'+'ray'](_0x1f2214,_0x3782c8,_0x17fe49),_0x43aede['indices']=new Uint32Array(_0x4033cb['HEAPU32']['buffer'],_0x17fe49,_0x584968)['slice']()['buffer']),_0x4033cb['_free'](_0x17fe49);const _0x2f5c93=[];for(let _0x56a37d=-0x1*-0xabd+-0x337*-0x9+-0x27ac;_0x56a37d<_0x1f2214['num_attrib'+'utes']();++_0x56a37d)_0x2f5c93['push'](_0x45969a['GetAttribu'+'te'](_0x1f2214,_0x56a37d));_0x2f5c93['sort']((_0x555555,_0x2ac66a)=>(_0x2bc18d[_0x555555['attribute_'+'type']()]??_0x2bc18d['length'])-(_0x2bc18d[_0x2ac66a['attribute_'+'type']()]??_0x2bc18d['length'])),_0x43aede['attributes']=_0x2f5c93['map'](_0x42e831=>_0x42e831['unique_id']());let _0x15078d=-0x79d+0x449*0x3+0x7a*-0xb;const _0x153173=_0x2f5c93['map'](_0x3abcb9=>{const _0x53e643=_0x15078d;return _0x15078d+=Math['ceil'](_0xa03b22(_0x3abcb9)/(0x258e+-0x7*-0x103+0x2c9f*-0x1))*(-0x20d6+-0x6*0x4c1+0x3d60),_0x53e643;}),_0xa459bc=_0x2f5c93['some'](_0x1adc13=>_0x1adc13['attribute_'+'type']()===0x7b8+-0x85e+-0xa7*-0x1),_0x58ac8c=_0x153173[0x4dc*-0x8+0x560+0x2181];if(!_0xa459bc){for(let _0x2ae11b=0xb81*0x1+-0x3*0x1df+-0x5e3;_0x2ae11b<_0x153173['length'];++_0x2ae11b)_0x153173[_0x2ae11b]+=0x4d9+-0xb9d+0xda*0x8;_0x15078d+=-0x1dbd*0x1+0x5da*-0x3+0x2f57;}_0x43aede['vertices']=new ArrayBuffer(_0x1f2214['num_points']()*_0x15078d);const _0x45e41c=new Uint8Array(_0x43aede['vertices']);for(let _0x4ed62e=-0x2*0x81+-0x1bcf+0x1cd1;_0x4ed62e<_0x1f2214['num_attrib'+'utes']();++_0x4ed62e){const _0x1ec984=_0x2f5c93[_0x4ed62e],_0x510303=_0xa03b22(_0x1ec984),_0x80cc88=_0x1f2214['num_points']()*_0x510303,_0x401196=_0x4033cb['_malloc'](_0x80cc88);_0x45969a['GetAttribu'+'teDataArra'+'yForAllPoi'+'nts'](_0x1f2214,_0x1ec984,_0x1ec984['data_type'](),_0x80cc88,_0x401196);const _0x1ca849=new Uint8Array(_0x4033cb['HEAPU8']['buffer'],_0x401196,_0x80cc88);for(let _0x5f05a0=0x2*-0x71e+0x100*0xe+0x1e*0x2;_0x5f05a0<_0x1f2214['num_points']();++_0x5f05a0)for(let _0x1c3603=0x3*0x93c+-0x2269+0x6b5;_0x1c3603<_0x510303;++_0x1c3603)_0x45e41c[_0x5f05a0*_0x15078d+_0x153173[_0x4ed62e]+_0x1c3603]=_0x1ca849[_0x5f05a0*_0x510303+_0x1c3603];if(!_0xa459bc&&_0x1ec984['attribute_'+'type']()===0x1ed1+0x16b9+-0x358a){const _0x1b5d11=_0x3a09d1(_0x232d69(_0x1ca849,_0x1ec984['data_type']()),_0x2d08e2?new Uint16Array(_0x43aede['indices']):new Uint32Array(_0x43aede['indices']));for(let _0x500299=0x1390*0x1+-0x105b*-0x1+-0xbf9*0x3;_0x500299<_0x1f2214['num_points']();++_0x500299)for(let _0xd7d27b=0x1c8e+-0xe*-0x26e+0x1f49*-0x2;_0xd7d27b<-0x107e+0x15d*0xd+-0x12f;++_0xd7d27b)_0x45e41c[_0x500299*_0x15078d+_0x58ac8c+_0xd7d27b]=_0x1b5d11[_0x500299*(0x1961+-0x888+-0x10cd)+_0xd7d27b];}_0x4033cb['_free'](_0x401196);}return _0x4033cb['destroy'](_0x1f2214),_0x4033cb['destroy'](_0x45969a),_0x4033cb['destroy'](_0x3ee7aa),_0x43aede;},_0x323231=_0x24a067=>{const _0x47ee71=_0x9883a9(new Uint8Array(_0x24a067['buffer']));self['postMessag'+'e']({'jobId':_0x24a067['jobId'],'error':_0x47ee71['error'],'indices':_0x47ee71['indices'],'vertices':_0x47ee71['vertices'],'attributes':_0x47ee71['attributes']},[_0x47ee71['indices'],_0x47ee71['vertices']]['filter'](_0xaf94d4=>_0xaf94d4!=null));},_0xacec62=[];self['onmessage']=_0x569bda=>{const _0x2f82f1=_0x569bda['data'];switch(_0x2f82f1['type']){case'init':self['DracoDecod'+'erModule']({'instantiateWasm':(_0x42bb9d,_0x1cbaf3)=>(WebAssembly['instantiat'+'e'](_0x2f82f1['module'],_0x42bb9d)['then'](_0x5c8cdc=>_0x1cbaf3(_0x5c8cdc))['catch'](_0x10737a=>console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x10737a)),{})})['then'](_0x2f3e26=>{_0x4033cb=_0x2f3e26,_0xacec62['forEach'](_0x561149=>_0x323231(_0x561149));});break;case'decodeMesh':_0x4033cb?_0x323231(_0x2f82f1):_0xacec62['push'](_0x2f82f1);break;}};}const _S=0xe*0x15d+-0x6*0x39d+-0x1*-0x29b;class GF{constructor(){this['workers']=[[],[],[]],this['jobId']=-0x24f7+0x7*-0x2d7+0x38d8,this['jobQueue']=[],this['jobCallbac'+'ks']=new Map(),this['run']=(_0x3f886a,_0xae65f6)=>{_0x3f886a['postMessag'+'e']({'type':'decodeMesh','jobId':_0xae65f6['jobId'],'buffer':_0xae65f6['buffer']},[_0xae65f6['buffer']]);};}['init'](_0x30ee95){for(_0x30ee95['forEach'](_0x3860fe=>{_0x3860fe['addEventLi'+'stener']('message',_0xb6feee=>{const _0x11dd13=_0xb6feee['data'],_0x2a15e0=this['jobCallbac'+'ks']['get'](_0x11dd13['jobId']);if(_0x2a15e0&&_0x2a15e0(_0x11dd13['error'],{'indices':_0x11dd13['indices'],'vertices':_0x11dd13['vertices'],'attributes':_0x11dd13['attributes']}),this['jobCallbac'+'ks']['delete'](_0x11dd13['jobId']),this['jobQueue']['length']>-0x243+-0x21cc+0x11*0x21f){const _0xe2c58d=this['jobQueue']['shift']();this['run'](_0x3860fe,_0xe2c58d);}else{const _0x366818=this['workers'][0xc16+-0x139*-0x10+0x4*-0x7e9]['indexOf'](_0x3860fe);if(_0x366818!==-(0x88a*0x1+-0x37*0x2e+0x159))this['workers'][0xe*-0x1a7+-0x7d*0x11+-0x3*-0xa7b]['splice'](_0x366818,0xa32+0x9*0x27f+-0x20a8),this['workers'][-0x21ba+-0x1*-0x110+0x20ab]['push'](_0x3860fe);else{const _0x1eda5a=this['workers'][-0x8a0+-0x9c1+0xb5*0x1a]['indexOf'](_0x3860fe);_0x1eda5a!==-(-0x1031*0x1+-0x40*-0x33+0x3*0x126)?(this['workers'][0x202b+0x4*-0x4eb+0x1a*-0x7b]['splice'](_0x1eda5a,0x1c3b+-0x7*0x38f+-0x3*0x11b),this['workers'][0x12f2+0x5*-0x6f3+-0x329*-0x5]['push'](_0x3860fe)):w['error']('logical\x20er'+'ror');}}});}),this['workers'][0x23f2+-0xb3+-0x233f]=_0x30ee95;this['jobQueue']['length']&&(this['workers'][-0xc44+-0x14ed+0x2131]['length']||this['workers'][0x83*-0x29+0x2163+-0x5*0x27b]['length']);){const _0x188969=this['jobQueue']['shift']();if(this['workers'][-0x3*-0x1be+0x95a+0xc*-0x137]['length']>-0x13be+-0x1892+0x2c50){const _0x44d12d=this['workers'][-0x1b12+0x1260+-0x459*-0x2]['shift']();this['workers'][0x86c+0xef*-0x11+0x774]['push'](_0x44d12d),this['run'](_0x44d12d,_0x188969);}else{const _0x1baf92=this['workers'][0x8*0x135+0xbb*-0xa+-0x259*0x1]['shift']();this['workers'][-0x1*-0x26f+-0xea6*-0x2+-0x1fb9]['push'](_0x1baf92),this['run'](_0x1baf92,_0x188969);}}}['enqueueJob'](_0x4e0980,_0x586944){const _0x3c4d88={'jobId':this['jobId']++,'buffer':_0x4e0980};if(this['jobCallbac'+'ks']['set'](_0x3c4d88['jobId'],_0x586944),this['workers'][0x2*0x1b4+0x290+-0x5f8]['length']>-0x11d+-0x1de3*0x1+0x1f00){const _0x50b667=this['workers'][-0x147f+-0xa*0x10b+-0x27*-0xcb]['shift']();this['workers'][-0x4*0x1ea+-0xd9a+-0x1543*-0x1]['push'](_0x50b667),this['run'](_0x50b667,_0x3c4d88);}else{if(this['workers'][-0x1*0x1e52+-0x2*0x626+-0x3*-0xe35]['length']>0xed*0x13+0x1eee+-0x3085*0x1){const _0x32da80=this['workers'][-0x32c+0x1*-0xb43+0xe70]['shift']();this['workers'][-0xdb*0x1+0x3*0x63a+-0x11d1]['push'](_0x32da80),this['run'](_0x32da80,_0x3c4d88);}else this['jobQueue']['push'](_0x3c4d88);}}}const HF=_0x2d4061=>new Promise((_0x56d9f8,_0xef66f8)=>{const _0x338778={'cache':!(0x15*-0x17b+-0x1*0x15a7+0x34be),'responseType':'text','retry':_S>-0xe98+-0x264a+0x34e2,'maxRetries':_S};ot['get'](_0x2d4061,_0x338778,(_0x833dfa,_0x1722a8)=>{_0x833dfa?_0xef66f8(_0x833dfa):_0x56d9f8(_0x1722a8);});}),WF=_0x5e10fc=>{const _0x2e2e09=()=>fetch(_0x5e10fc)['then'](_0x5760ff=>_0x5760ff['arrayBuffe'+'r']())['then'](_0x2ee38a=>WebAssembly['compile'](_0x2ee38a)),_0x3dc654=()=>WebAssembly['compileStr'+'eaming'](fetch(_0x5e10fc))['catch'](_0xb2e40d=>(w['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x5e10fc+'\x20('+_0xb2e40d+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x2e2e09()));return WebAssembly['compileStr'+'eaming']?_0x3dc654():_0x2e2e09();},gS=0xf8*-0xb+0x1274+0x39*-0x23;let ih;const $F=_0x4cec62=>{if(ih)return!(-0x2*-0x6a7+-0x10*-0x4+-0xd8e);if(!_0x4cec62){const _0x59034e=YS['getConfig']('DracoDecod'+'erModule');_0x59034e?_0x4cec62={'jsUrl':_0x59034e['glueUrl'],'wasmUrl':_0x59034e['wasmUrl'],'numWorkers':_0x59034e['numWorkers']}:_0x4cec62={'jsUrl':'draco.wasm'+'.js','wasmUrl':'draco.wasm'+'.wasm','numWorkers':gS};}return!_0x4cec62['jsUrl']||!_0x4cec62['wasmUrl']?!(-0x301*-0x1+-0x945*-0x3+-0x1ecf*0x1):(ih=new GF(),Promise['all']([HF(_0x4cec62['jsUrl']),WF(_0x4cec62['wasmUrl'])])['then'](([_0x3e1211,_0x54417e])=>{const _0x1defcf=['/*\x20draco\x20*'+'/',_0x3e1211,'/*\x20worker\x20'+'*/','(\x0a'+VF['toString']()+'\x0a)()\x0a\x0a']['join']('\x0a'),_0x44c08a=new Blob([_0x1defcf],{'type':'applicatio'+'n/javascri'+'pt'}),_0x28e676=URL['createObje'+'ctURL'](_0x44c08a),_0x32f235=Math['max'](0x1130+-0x1*0x23b1+0x1282,Math['min'](0x577+0xb84+-0x10eb,_0x4cec62['numWorkers']||gS)),_0x525e05=[];for(let _0x3c4f89=-0x1*0x907+-0x2011+-0x8*-0x523;_0x3c4f89<_0x32f235;++_0x3c4f89){const _0x33a4de=new Worker(_0x28e676);_0x33a4de['postMessag'+'e']({'type':'init','module':_0x54417e}),_0x525e05['push'](_0x33a4de);}ih['init'](_0x525e05);}),!(0x8d6+0x10f+-0x11*0x95));},XF=(_0x23af76,_0x27c987)=>$F()?(ih['enqueueJob'](_0x23af76,_0x27c987),!(-0x2493+-0x13*-0x1ab+-0x19*-0x32)):!(0x248b+0x72b+0xa7*-0x43);class qF{constructor(){h(this,'gltf'),h(this,'nodes'),h(this,'scenes'),h(this,'animations'),h(this,'textures'),h(this,'materials'),h(this,'variants'),h(this,'meshVarian'+'ts'),h(this,'meshDefaul'+'tMaterials'),h(this,'renders'),h(this,'skins'),h(this,'lights'),h(this,'cameras'),h(this,'nodeInstan'+'cingMap');}['destroy'](){this['renders']&&this['renders']['forEach'](_0x4dd1da=>{_0x4dd1da['meshes']=null;});}}const x0=_0x541d61=>/^data:[^\n\r,\u2028\u2029]*,.*$/i['test'](_0x541d61),jF=_0x7ab301=>_0x7ab301['substring'](_0x7ab301['indexOf'](':')+(-0x1f*-0xa1+0x1*-0x13f9+0x7b),_0x7ab301['indexOf'](';')),yl=_0x3d6aab=>{switch(_0x3d6aab){case'SCALAR':return 0x67b+-0x11ea+-0x1e8*-0x6;case'VEC2':return-0xd53+0x1000+-0x2ab;case'VEC3':return 0x149c*0x1+-0x1*0x1945+-0x5c*-0xd;case'VEC4':return 0x12ba+-0x1609*0x1+0x353;case'MAT2':return-0xefd+0x26*-0x41+0x18a7;case'MAT3':return-0x219+0xa8c+0x6*-0x167;case'MAT4':return 0x102e+-0x2004+0x2*0x7f3;default:return-0x2f6*-0x4+0x1c22+-0x1*0x27f7;}},Dd=_0x662bac=>{switch(_0x662bac){case 0xd57+-0x20cf+-0x34a*-0xc:return dd;case-0x1*0x1066+0x180a+0x279*0x5:return la;case 0x1d4a*-0x1+-0x16b4+0x4800:return fd;case 0x2e3*-0x3+-0x14b0+-0x315c*-0x1:return Ml;case-0x136c+0x1fa2+-0x36*-0x25:return Ty;case-0x1e13*0x1+0x13*0x2e+-0x956*-0x5:return el;case 0x39*0xa7+0x1075*0x2+0x3*-0x10b1:return Ve;default:return-0x1807+0x23d5+-0xbce;}},YF=_0x416db3=>{switch(_0x416db3){case 0x568+-0x23ed+0x3285*0x1:return-0x1160+0x23da+0x1279*-0x1;case 0x1f78+-0x1ef*-0x1+-0x1ea*0x7:return-0xe45*0x2+0x204a+-0x3bf;case-0x68f+0xbaa+-0x23*-0x6d:return 0x1*-0xcf2+0x5*-0x62e+0x3*0xe9e;case 0x16d8+0x10e2*0x1+0x1*-0x13b7:return-0x352*0xa+-0x1295+0x33cb;case-0x2b0+0x1*0x1ee5+-0x2bb*0x3:return-0xc9b+-0x2*-0xbc3+-0xae7;case 0x1a78+-0x1c0*0xf+0x13cd*0x1:return 0x1*-0x80b+-0x8fa+0x1109;case 0x1a92+0x3*0x74+-0x7e8:return-0x1081*0x1+-0x1179+-0x26*-0xe5;default:return 0x514+0x23e9+-0x28fd;}},KF=_0x3dea33=>{switch(_0x3dea33){case 0x207+-0x11*0x64+0x189d:return Int8Array;case-0x1*0x1602+0x22f4+-0xd*-0x8b:return Uint8Array;case 0x1cc1+-0x358*-0x4+-0x1*0x161f:return Int16Array;case-0xe*-0x34+-0x4*0x34f+0x1e67:return Uint16Array;case-0x1*-0x253b+-0x1d9b+0xc64:return Int32Array;case 0x11*-0x1e6+0x1c1b+-0x6*-0x408:return Uint32Array;case-0x7*0x2c6+0x1824+0x3d3*0x4:return Float32Array;default:return null;}},Nh={'POSITION':Me,'NORMAL':gs,'TANGENT':yi,'COLOR_0':Wt,'JOINTS_0':us,'WEIGHTS_0':gi,'TEXCOORD_0':is,'TEXCOORD_1':ba,'TEXCOORD_2':wl,'TEXCOORD_3':El,'TEXCOORD_4':bl,'TEXCOORD_5':Al,'TEXCOORD_6':Cl,'TEXCOORD_7':Pl},SS={[Me]:0x35*-0x89+-0x15*-0xa5+-0x49*-0x34,[gs]:0xac4+-0x2*-0x6d+-0xb9d,[yi]:-0x12da+0x399+0x1*0xf43,[Wt]:0x2431+-0x326*0x1+-0x2108,[us]:0x15a1+0x77f*-0x3+0xe0,[gi]:-0x457*-0x6+-0xf73+-0xa92,[is]:0x10a1+0x1*0x3f5+-0x1490,[ba]:-0x2628*-0x1+0x204a+-0x466b,[wl]:-0x663*-0x3+-0xc6*0x1e+0x413,[El]:-0x26e8+-0x1*-0x1d1e+-0x1f7*-0x5,[bl]:0x21*-0x2f+-0x38*-0x2a+0x317*-0x1,[Al]:-0x573+0x2010+-0x1a92,[Cl]:0x1*0x223+-0x239c+0x1*0x2185,[Pl]:-0x1a5e+-0x237c+-0xd*-0x4c3},ZF=_0x509b93=>{switch(_0x509b93){case dd:return _0x27f845=>Math['max'](_0x27f845/(0xb*-0x35f+0x1b*0x20+0x2234),-(-0x61*-0x56+0xa35*-0x1+-0x1660));case la:return _0x4dc588=>_0x4dc588/(-0x4f4+-0x1*0x1740+0x1d33);case fd:return _0x39f2f5=>Math['max'](_0x39f2f5/(0x752+-0xb1ee+-0x1*-0x12a9b),-(-0x3*-0x301+0x5b*-0xf+-0x3ad));case Ml:return _0x4f4de1=>_0x4f4de1/(-0xd14f+-0x31*-0x6c7+0x8537);default:return _0x3976c4=>_0x3976c4;}},Gu=(_0x5892a4,_0x485fb1,_0x9095b2)=>{const _0x71d07c=ZF(_0x9095b2),_0x50ae42=_0x485fb1['length'];for(let _0x2845dc=0xd*-0x5+-0x1351+0x1392;_0x2845dc<_0x50ae42;++_0x2845dc)_0x5892a4[_0x2845dc]=_0x71d07c(_0x485fb1[_0x2845dc]);return _0x5892a4;},ua=(_0x34cb27,_0x9c29ca,_0x1925f4=!(-0x48e*0x1+-0x14ae+0x193d))=>{const _0x38a344=yl(_0x34cb27['type']),_0x12ebc5=KF(_0x34cb27['componentT'+'ype']);if(!_0x12ebc5)return null;let _0x48f382;if(_0x34cb27['sparse']){const _0x5869c2=_0x34cb27['sparse'],_0x13b855={'count':_0x5869c2['count'],'type':'SCALAR'},_0x255b1c=ua(Object['assign'](_0x13b855,_0x5869c2['indices']),_0x9c29ca,!(-0x12e0+-0x2561+0x1*0x3841)),_0x3a264b={'count':_0x5869c2['count'],'type':_0x34cb27['type'],'componentType':_0x34cb27['componentT'+'ype']},_0x128110=ua(Object['assign'](_0x3a264b,_0x5869c2['values']),_0x9c29ca,!(0x35f+0x19c6+0x1*-0x1d25));if(_0x34cb27['hasOwnProp'+'erty']('bufferView')){const _0x100f87={'bufferView':_0x34cb27['bufferView'],'byteOffset':_0x34cb27['byteOffset'],'componentType':_0x34cb27['componentT'+'ype'],'count':_0x34cb27['count'],'type':_0x34cb27['type']};_0x48f382=ua(_0x100f87,_0x9c29ca,!(0x612*0x3+0x51e+-0x1*0x1754))['slice']();}else _0x48f382=new _0x12ebc5(_0x34cb27['count']*_0x38a344);for(let _0x1f3d9e=-0x24d6+-0x21c2+-0x24*-0x1f6;_0x1f3d9e<_0x5869c2['count'];++_0x1f3d9e){const _0x4b8d9d=_0x255b1c[_0x1f3d9e];for(let _0xc2d490=-0x20c8*0x1+0x13ec+0xcdc*0x1;_0xc2d490<_0x38a344;++_0xc2d490)_0x48f382[_0x4b8d9d*_0x38a344+_0xc2d490]=_0x128110[_0x1f3d9e*_0x38a344+_0xc2d490];}}else{if(_0x34cb27['hasOwnProp'+'erty']('bufferView')){const _0x35ebe6=_0x9c29ca[_0x34cb27['bufferView']];if(_0x1925f4&&_0x35ebe6['hasOwnProp'+'erty']('byteStride')){const _0x23e745=_0x38a344*_0x12ebc5['BYTES_PER_'+'ELEMENT'],_0x4faeae=new ArrayBuffer(_0x34cb27['count']*_0x23e745),_0x53896d=new Uint8Array(_0x4faeae);let _0xe6be02=0x40*-0x8c+-0x1*-0x100e+0x12f2*0x1;for(let _0x4ea795=0x3b*-0x95+-0x1314+0x356b;_0x4ea795<_0x34cb27['count'];++_0x4ea795){let _0xf9018a=(_0x34cb27['byteOffset']||-0x2*0xec1+0x40*-0x9a+0x4402)+_0x4ea795*_0x35ebe6['byteStride'];for(let _0x20371f=0xfb7+-0x3*-0xbd8+-0x333f;_0x20371f<_0x23e745;++_0x20371f)_0x53896d[_0xe6be02++]=_0x35ebe6[_0xf9018a++];}_0x48f382=new _0x12ebc5(_0x4faeae);}else _0x48f382=new _0x12ebc5(_0x35ebe6['buffer'],_0x35ebe6['byteOffset']+(_0x34cb27['byteOffset']||0x1402+0x1716+-0x2b18),_0x34cb27['count']*_0x38a344);}else _0x48f382=new _0x12ebc5(_0x34cb27['count']*_0x38a344);}return _0x48f382;},Pn=(_0x4b966e,_0x5b853e)=>{const _0x49196f=ua(_0x4b966e,_0x5b853e,!(-0x40*0x38+0x480+0x980));if(_0x49196f instanceof Float32Array||!_0x4b966e['normalized'])return _0x49196f;const _0xbf8c8f=new Float32Array(_0x49196f['length']);return Gu(_0xbf8c8f,_0x49196f,Dd(_0x4b966e['componentT'+'ype'])),_0xbf8c8f;},Hu=_0x2c7d80=>{let _0x3871a8=_0x2c7d80['min'],_0x322e18=_0x2c7d80['max'];if(!_0x3871a8||!_0x322e18)return null;if(_0x2c7d80['normalized']){const _0x1227ed=Dd(_0x2c7d80['componentT'+'ype']);_0x3871a8=Gu([],_0x3871a8,_0x1227ed),_0x322e18=Gu([],_0x322e18,_0x1227ed);}return new De(new D((_0x322e18[-0x179*-0x4+0x1639+0x3*-0x95f]+_0x3871a8[-0xa8c+-0x1*0x3d+0xb*0xfb])*(-0x5*0x5a3+0x2675+-0x5*0x20e+0.5),(_0x322e18[-0xc19+0x2*0x18c+0x1*0x902]+_0x3871a8[-0x1bff+0xccf+-0x1*-0xf31])*(0x1053+0xd*0x71+-0x1610+0.5),(_0x322e18[0x19a7+0x8a9+0x2*-0x1127]+_0x3871a8[-0x153*-0x17+-0x505*0x7+-0x30*-0x19])*(0xa*0x12b+-0x1*-0x1e52+-0x2a00+0.5)),new D((_0x322e18[-0x21a3*-0x1+0x2140+-0x42e3]-_0x3871a8[0xdbb*-0x1+0x1*0x1d3f+0x3*-0x52c])*(0x232f*-0x1+-0xaab*0x1+-0x16ed*-0x2+0.5),(_0x322e18[-0x2055+-0xd6c+0x2dc2]-_0x3871a8[-0x10a1+-0x267c+-0x583*-0xa])*(-0x1d57*0x1+-0x739+0x3c*0x9c+0.5),(_0x322e18[-0x2198+-0x1817+0x3*0x133b]-_0x3871a8[0x12d3+0x615+-0x18e6])*(-0x16a*0xd+0x1*-0x8c2+0x1b24+0.5)));},T0=_0x17c608=>{if(!_0x17c608['hasOwnProp'+'erty']('mode'))return js;switch(_0x17c608['mode']){case 0x1a21*0x1+-0x1022+-0x9ff:return cd;case-0x584+0xf39+-0x4*0x26d:return hd;case 0x58f*-0x7+-0x1cc5+-0xe4*-0x4c:return _y;case-0x181+0x15dd+-0x1459:return gy;case-0x1599+0x25af+0x1012*-0x1:return js;case 0x779*-0x2+-0x7a9+0x16a0:return Er;case 0x1e52+-0x14d*0x9+-0x1297:return oa;default:return js;}},QF=_0x53abc6=>{const _0x5a63a9=new Uint16Array(_0x53abc6);for(let _0x468949=0xf*0x255+-0x96e+-0x198d;_0x468949<_0x53abc6;_0x468949++)_0x5a63a9[_0x468949]=_0x468949;return _0x5a63a9;},JF=(_0x2c3733,_0x15801f)=>{const _0x3b9dcf=_0x2c3733[Me];if(!_0x3b9dcf||_0x3b9dcf['components']!==0x21e9*-0x1+0x1df1+0x3fb)return;let _0x54d723;if(_0x3b9dcf['size']!==_0x3b9dcf['stride']){const _0x5180a4=_0x3b9dcf['stride']/No[_0x3b9dcf['type']],_0x49b1a4=new wn[_0x3b9dcf['type']](_0x3b9dcf['buffer'],_0x3b9dcf['offset'],_0x3b9dcf['count']*_0x5180a4);_0x54d723=new wn[_0x3b9dcf['type']](_0x3b9dcf['count']*(-0x9*0x23d+-0x1720+0x2b48));for(let _0x55cbf0=-0x1b10+0x4*0x133+0x1644;_0x55cbf0<_0x3b9dcf['count'];++_0x55cbf0)_0x54d723[_0x55cbf0*(-0x1d+0x11*-0xdf+0xeef)+(-0x1e61+0x21b+0x1*0x1c46)]=_0x49b1a4[_0x55cbf0*_0x5180a4+(0x68a*-0x5+-0x5*-0x39b+0x1*0xeab)],_0x54d723[_0x55cbf0*(-0x2bf*0xd+-0x173f*-0x1+0xc77)+(0x342*-0x7+0x217e+-0xaaf)]=_0x49b1a4[_0x55cbf0*_0x5180a4+(-0x9c*-0x3+-0x1d*-0x3d+0x2b*-0x34)],_0x54d723[_0x55cbf0*(0xf*-0xc6+0x134f+0x2*-0x3d9)+(-0x17d*0x3+0x192d*0x1+-0x424*0x5)]=_0x49b1a4[_0x55cbf0*_0x5180a4+(0x1c2f+0x19eb+-0x6*0x904)];}else _0x54d723=new wn[_0x3b9dcf['type']](_0x3b9dcf['buffer'],_0x3b9dcf['offset'],_0x3b9dcf['count']*(0x47*-0x27+0x202a+-0x1556));const _0x22a768=_0x3b9dcf['count'];_0x15801f||(_0x15801f=QF(_0x22a768));const _0x3c9057=Iv(_0x54d723,_0x15801f),_0x7711b3=new Float32Array(_0x3c9057['length']);_0x7711b3['set'](_0x3c9057),_0x2c3733[gs]={'buffer':_0x7711b3['buffer'],'size':0xc,'offset':0x0,'stride':0xc,'count':_0x22a768,'components':0x3,'type':Ve};},eN=_0x4c6ead=>{const _0x2b2ae4=_0x3fe33b=>{const _0x27f40b=[];for(let _0xda75e7=-0xce2*0x2+0x1381*-0x2+0x40c6*0x1;_0xda75e7<_0x3fe33b['_levels']['length'];++_0xda75e7){let _0x373708=[];if(_0x3fe33b['cubemap']){for(let _0x157c16=0x124*0x3+0x12e2+-0x164e;_0x157c16<0x3b6+0x26ae+-0x2a5e;++_0x157c16)_0x373708['push'](_0x3fe33b['_levels'][_0xda75e7][_0x157c16]);}else _0x373708=_0x3fe33b['_levels'][_0xda75e7];_0x27f40b['push'](_0x373708);}return _0x27f40b;},_0x2dc633=new _e(_0x4c6ead['device'],_0x4c6ead);return _0x2dc633['_levels']=_0x2b2ae4(_0x4c6ead),_0x2dc633;},tN=_0x3b9c4c=>{const _0x2c5d2d=new pe(_0x3b9c4c['name']+'_clone',_0x3b9c4c['type'],_0x3b9c4c['file'],_0x3b9c4c['data'],_0x3b9c4c['options']);return _0x2c5d2d['loaded']=!(0x7*-0x485+-0x189f+0x3842),_0x2c5d2d['resource']=eN(_0x3b9c4c['resource']),_0x3b9c4c['registry']['add'](_0x2c5d2d),_0x2c5d2d;},sN=(_0x4213bf,_0x265dce)=>{const _0x58a68e=_0x265dce[Me];if(!_0x58a68e)return null;const _0x2dc8e3=_0x58a68e['count'],_0x456b2d=[];for(const _0x3a5459 in _0x265dce)if(_0x265dce['hasOwnProp'+'erty'](_0x3a5459)){const _0x186104={'semantic':_0x3a5459,'components':_0x265dce[_0x3a5459]['components'],'type':_0x265dce[_0x3a5459]['type'],'normalize':!!_0x265dce[_0x3a5459]['normalize']};kt['isElementV'+'alid'](_0x4213bf,_0x186104)||_0x186104['components']++,_0x456b2d['push'](_0x186104);}_0x456b2d['sort']((_0x36b27b,_0x2cd3cb)=>SS[_0x36b27b['semantic']]-SS[_0x2cd3cb['semantic']]);let _0x3c06bc,_0x1350ab,_0x512901,_0x19876b,_0xe5d4e4,_0x2089b4;const _0xa57ca8=new kt(_0x4213bf,_0x456b2d);let _0x5507d6=!(0xe95+0x5c7+0xa2e*-0x2);for(_0x3c06bc=0x1b8c+0xcc6+0xd*-0x31a;_0x3c06bc<_0xa57ca8['elements']['length'];++_0x3c06bc)if(_0xe5d4e4=_0xa57ca8['elements'][_0x3c06bc],_0x19876b=_0x265dce[_0xe5d4e4['name']],_0x2089b4=_0x19876b['offset']-_0x58a68e['offset'],_0x19876b['buffer']!==_0x58a68e['buffer']||_0x19876b['stride']!==_0xe5d4e4['stride']||_0x19876b['size']!==_0xe5d4e4['size']||_0x2089b4!==_0xe5d4e4['offset']){_0x5507d6=!(-0x342*-0x1+0x3f3*-0x3+0x28*0x37);break;}const _0x441d36=new Is(_0x4213bf,_0xa57ca8,_0x2dc8e3),_0xafb14f=_0x441d36['lock'](),_0x3972cf=new Uint32Array(_0xafb14f);let _0x18b739;if(_0x5507d6)_0x18b739=new Uint32Array(_0x58a68e['buffer'],_0x58a68e['offset'],_0x2dc8e3*_0x441d36['format']['size']/(-0x1d5b*0x1+0x2414+-0x6b5)),_0x3972cf['set'](_0x18b739);else{let _0x5ac6e8,_0x1745b6;for(_0x3c06bc=-0x2442+0xb*-0x19b+-0x81*-0x6b;_0x3c06bc<_0x441d36['format']['elements']['length'];++_0x3c06bc){_0xe5d4e4=_0x441d36['format']['elements'][_0x3c06bc],_0x5ac6e8=_0xe5d4e4['stride']/(0x2663*0x1+0x1*-0xf5f+-0x1700),_0x19876b=_0x265dce[_0xe5d4e4['name']],_0x1745b6=_0x19876b['stride']/(0x40a+0xd83+-0x1189),_0x18b739=new Uint32Array(_0x19876b['buffer'],_0x19876b['offset'],(_0x19876b['count']-(-0x1395+0x1*-0x27e+0x2*0xb0a))*_0x1745b6+(_0x19876b['size']+(0x6*0x31e+0xb49+-0x1dfa))/(0x3*-0xb0e+-0x27d*-0xf+-0x1*0x425));let _0x3f566f=-0x8*0x1e4+0x2*-0x62f+-0x45*-0x66,_0x46fe6c=_0xe5d4e4['offset']/(0x1199+-0x20cc+-0x29*-0x5f);const _0x3faa0b=Math['floor']((_0x19876b['size']+(-0xfc9+0x1bd0+-0xc04))/(-0x1fca+0x1ee4+-0x9*-0x1a));for(_0x1350ab=-0xac3*0x1+-0x3*0x65c+0x1dd7;_0x1350ab<_0x2dc8e3;++_0x1350ab){for(_0x512901=0x2*0x104b+-0x25fd+0x567;_0x512901<_0x3faa0b;++_0x512901)_0x3972cf[_0x46fe6c+_0x512901]=_0x18b739[_0x3f566f+_0x512901];_0x3f566f+=_0x1745b6,_0x46fe6c+=_0x5ac6e8;}}}return _0x441d36['unlock'](),_0x441d36;},iN=(_0x347ea7,_0x5b09c0,_0x4b01c1,_0x5576c1,_0x5318c4,_0x2b8d8b)=>{const _0x2217b1={},_0x174ce3=[];for(const _0x4744a4 in _0x5b09c0)_0x5b09c0['hasOwnProp'+'erty'](_0x4744a4)&&Nh['hasOwnProp'+'erty'](_0x4744a4)&&(_0x2217b1[_0x4744a4]=_0x5b09c0[_0x4744a4],_0x174ce3['push'](_0x4744a4+':'+_0x5b09c0[_0x4744a4]));_0x174ce3['sort']();const _0x26cb7f=_0x174ce3['join']();let _0x222fe7=_0x2b8d8b[_0x26cb7f];if(!_0x222fe7){const _0x5149ce={};for(const _0x26bc8e in _0x2217b1){const _0x11bc1f=_0x5576c1[_0x5b09c0[_0x26bc8e]],_0x4a8e42=ua(_0x11bc1f,_0x5318c4),_0x286060=_0x5318c4[_0x11bc1f['bufferView']],_0x40359b=Nh[_0x26bc8e],_0xcba36=yl(_0x11bc1f['type'])*YF(_0x11bc1f['componentT'+'ype']),_0x2e75a1=_0x286060&&_0x286060['hasOwnProp'+'erty']('byteStride')?_0x286060['byteStride']:_0xcba36;_0x5149ce[_0x40359b]={'buffer':_0x4a8e42['buffer'],'size':_0xcba36,'offset':_0x4a8e42['byteOffset'],'stride':_0x2e75a1,'count':_0x11bc1f['count'],'components':yl(_0x11bc1f['type']),'type':Dd(_0x11bc1f['componentT'+'ype']),'normalize':_0x11bc1f['normalized']};}_0x5149ce['hasOwnProp'+'erty'](gs)||JF(_0x5149ce,_0x4b01c1),_0x222fe7=sN(_0x347ea7,_0x5149ce),_0x2b8d8b[_0x26cb7f]=_0x222fe7;}return _0x222fe7;},rN=(_0x1fe91e,_0x1bcfd1,_0x1c473a,_0xfac56b,_0x7e876a,_0x4ecdcd)=>{let _0x5cc8a7,_0x36a56d,_0x2ef836;const _0x5c5f01=_0x1bcfd1['joints'],_0x552456=_0x5c5f01['length'],_0x2e55d6=[];if(_0x1bcfd1['hasOwnProp'+'erty']('inverseBin'+'dMatrices')){const _0x555d5e=_0x1bcfd1['inverseBin'+'dMatrices'],_0x28a232=ua(_0x1c473a[_0x555d5e],_0xfac56b,!(-0x13ea+0x8b5+0xb35)),_0x1d6012=[];for(_0x5cc8a7=0x1452*0x1+-0x1e23*0x1+-0x7*-0x167;_0x5cc8a7<_0x552456;_0x5cc8a7++){for(_0x36a56d=-0x57*0xd+0x6*-0x579+-0xc6b*-0x3;_0x36a56d<0x261a+0x3a5+-0x29af;_0x36a56d++)_0x1d6012[_0x36a56d]=_0x28a232[_0x5cc8a7*(0x5b2+0x5*0x3f2+-0x195c)+_0x36a56d];_0x2ef836=new te(),_0x2ef836['set'](_0x1d6012),_0x2e55d6['push'](_0x2ef836);}}else{for(_0x5cc8a7=0x25ca+-0x43*0x11+0x5*-0x6ab;_0x5cc8a7<_0x552456;_0x5cc8a7++)_0x2ef836=new te(),_0x2e55d6['push'](_0x2ef836);}const _0x4e7f2e=[];for(_0x5cc8a7=0xd42+-0x1ad0+0xd8e;_0x5cc8a7<_0x552456;_0x5cc8a7++)_0x4e7f2e[_0x5cc8a7]=_0x7e876a[_0x5c5f01[_0x5cc8a7]]['name'];const _0x41cf54=_0x4e7f2e['join']('#');let _0x5c8f3b=_0x4ecdcd['get'](_0x41cf54);return _0x5c8f3b||(_0x5c8f3b=new Lv(_0x1fe91e,_0x2e55d6,_0x4e7f2e),_0x4ecdcd['set'](_0x41cf54,_0x5c8f3b)),_0x5c8f3b;},aN=(_0x2dde8f,_0x4673a4,_0x44ee8d,_0x14662e,_0x505ee4,_0x447fee,_0x15d3ce)=>{var _0x59549f;const _0x2171dd=new Ge(_0x2dde8f);_0x2171dd['aabb']=Hu(_0x44ee8d[_0x4673a4['attributes']['POSITION']]);const _0x250047=[];for(const [_0x3939e5,_0xa3f58b]of Object['entries'](_0x4673a4['attributes'])){const _0x22a520=_0x44ee8d[_0xa3f58b],_0x5a81fd=Nh[_0x3939e5],_0x1e22de=Dd(_0x22a520['componentT'+'ype']);_0x250047['push']({'semantic':_0x5a81fd,'components':yl(_0x22a520['type']),'type':_0x1e22de,'normalize':_0x22a520['normalized']??(_0x5a81fd===Wt&&(_0x1e22de===la||_0x1e22de===Ml))});}if(_0x15d3ce['push'](new Promise((_0x131d03,_0x272631)=>{const _0x4f82e3=_0x4673a4['extensions']['KHR_draco_'+'mesh_compr'+'ession'];XF(_0x14662e[_0x4f82e3['bufferView']]['slice']()['buffer'],(_0x45906e,_0x728bc4)=>{var _0x3a32a0;if(_0x45906e)console['log'](_0x45906e),_0x272631(_0x45906e);else{const _0x3922c3={};for(const [_0x3fd815,_0x49d1f4]of Object['entries'](_0x4f82e3['attributes']))_0x3922c3[Nh[_0x3fd815]]=_0x728bc4['attributes']['indexOf'](_0x49d1f4);_0x250047['sort']((_0x151d66,_0x2cb233)=>_0x3922c3[_0x151d66['semantic']]-_0x3922c3[_0x2cb233['semantic']]),(_0x3a32a0=_0x4673a4['attributes'])!=null&&_0x3a32a0['NORMAL']||_0x250047['splice'](-0x247*0x11+-0x10b8*-0x1+-0x1600*-0x1,-0x9e6+0x25ab+0x1bc5*-0x1,{'semantic':'NORMAL','components':0x3,'type':Ve});const _0xd38b43=new kt(_0x2dde8f,_0x250047),_0x2cd54e=_0x728bc4['vertices']['byteLength']/_0xd38b43['size'],_0x3c8936=_0x2cd54e<=-0x9cef+-0xd616+0x27304?Yi:wr,_0x5bda99=_0x728bc4['indices']['byteLength']/(_0x2cd54e<=-0xa5d3+-0x102f8+0x2a8ca*0x1?0x2*0x2e7+-0x6b*-0x31+-0x1a47:-0x4b*0x4e+0x2a6*-0xb+-0x1a00*-0x2);w['call'](()=>{_0x2cd54e!==_0x44ee8d[_0x4673a4['attributes']['POSITION']]['count']&&w['warn']('mesh\x20has\x20i'+'nvalid\x20ver'+'tex\x20count'),_0x5bda99!==_0x44ee8d[_0x4673a4['indices']]['count']&&w['warn']('mesh\x20has\x20i'+'nvalid\x20ind'+'ex\x20count');});const _0xf7c5e4=new Is(_0x2dde8f,_0xd38b43,_0x2cd54e,{'data':_0x728bc4['vertices']}),_0x419383=new br(_0x2dde8f,_0x3c8936,_0x5bda99,ms,_0x728bc4['indices']);_0x2171dd['vertexBuff'+'er']=_0xf7c5e4,_0x2171dd['indexBuffe'+'r'][-0x21ef+0xc0b+-0x3a6*-0x6]=_0x419383,_0x2171dd['primitive'][-0x16ae+-0x3*-0xba3+0x65*-0x1f]['type']=T0(_0x4673a4),_0x2171dd['primitive'][-0x18ba+-0x12d5*0x1+0x2b8f]['base']=0x23f*-0xd+0x529+-0xb5*-0x22,_0x2171dd['primitive'][0xa8d*0x1+0x133b+-0x1dc8]['count']=_0x419383?_0x5bda99:_0x2cd54e,_0x2171dd['primitive'][0x23f4+0x202b+-0x441f]['indexed']=!!_0x419383,_0x131d03();}});})),(_0x59549f=_0x4673a4==null?void(-0xa59+0x1*0x1ddb+-0x1382):_0x4673a4['extensions'])!=null&&_0x59549f['KHR_materi'+'als_varian'+'ts']){const _0x46f286=_0x4673a4['extensions']['KHR_materi'+'als_varian'+'ts'],_0x528752={};_0x46f286['mappings']['forEach'](_0x2ca15b=>{_0x2ca15b['variants']['forEach'](_0x29dbac=>{_0x528752[_0x29dbac]=_0x2ca15b['material'];});}),_0x505ee4[_0x2171dd['id']]=_0x528752;}return _0x447fee[_0x2171dd['id']]=_0x4673a4['material'],_0x2171dd;},nN=(_0x2e27af,_0x461939,_0x3e4cc5,_0x45a92a,_0x45b7ab,_0x15d492,_0x264c26,_0x1ab2f2,_0xb4d294)=>{const _0x538ed0=[];return _0x461939['primitives']['forEach'](_0x2d91c0=>{var _0x16cfb1;if((_0x16cfb1=_0x2d91c0['extensions'])!=null&&_0x16cfb1['KHR_draco_'+'mesh_compr'+'ession'])_0x538ed0['push'](aN(_0x2e27af,_0x2d91c0,_0x3e4cc5,_0x45a92a,_0x15d492,_0x264c26,_0xb4d294));else{let _0x2ac3b4=_0x2d91c0['hasOwnProp'+'erty']('indices')?ua(_0x3e4cc5[_0x2d91c0['indices']],_0x45a92a,!(0x1565+0x81a+-0x1*0x1d7f)):null;const _0x4b55dc=iN(_0x2e27af,_0x2d91c0['attributes'],_0x2ac3b4,_0x3e4cc5,_0x45a92a,_0x45b7ab),_0x5f00cd=T0(_0x2d91c0),_0x30b768=new Ge(_0x2e27af);if(_0x30b768['vertexBuff'+'er']=_0x4b55dc,_0x30b768['primitive'][-0xb85+0xf*0x1d1+-0x3*0x53e]['type']=_0x5f00cd,_0x30b768['primitive'][0x3*-0xb07+-0x3*-0x2dd+0x187e]['base']=-0x1a74+-0x806+0x227a,_0x30b768['primitive'][-0x479+-0x242f+0x28a8]['indexed']=_0x2ac3b4!==null,_0x2ac3b4!==null){let _0x42b002;_0x2ac3b4 instanceof Uint8Array?_0x42b002=$f:_0x2ac3b4 instanceof Uint16Array?_0x42b002=Yi:_0x42b002=wr,_0x42b002===$f&&_0x2e27af['isWebGPU']&&(_0x42b002=Yi,_0x2ac3b4=new Uint16Array(_0x2ac3b4));const _0x2f6ab0=new br(_0x2e27af,_0x42b002,_0x2ac3b4['length'],ms,_0x2ac3b4);_0x30b768['indexBuffe'+'r'][-0x2*0x779+0x16a+0x1*0xd88]=_0x2f6ab0,_0x30b768['primitive'][-0x949+0x1*-0x1033+0x197c]['count']=_0x2ac3b4['length'];}else _0x30b768['primitive'][0x2388+-0x5*-0x661+-0x436d*0x1]['count']=_0x4b55dc['numVertice'+'s'];if(_0x2d91c0['hasOwnProp'+'erty']('extensions')&&_0x2d91c0['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts')){const _0x130549=_0x2d91c0['extensions']['KHR_materi'+'als_varian'+'ts'],_0x2d42dc={};_0x130549['mappings']['forEach'](_0x580939=>{_0x580939['variants']['forEach'](_0x4dc5d2=>{_0x2d42dc[_0x4dc5d2]=_0x580939['material'];});}),_0x15d492[_0x30b768['id']]=_0x2d42dc;}_0x264c26[_0x30b768['id']]=_0x2d91c0['material'];let _0x1e75a7=_0x3e4cc5[_0x2d91c0['attributes']['POSITION']];if(_0x30b768['aabb']=Hu(_0x1e75a7),_0x2d91c0['hasOwnProp'+'erty']('targets')){const _0x224f22=[];_0x2d91c0['targets']['forEach']((_0x4fcd47,_0x5d9626)=>{const _0x1aea3e={};_0x4fcd47['hasOwnProp'+'erty']('POSITION')&&(_0x1e75a7=_0x3e4cc5[_0x4fcd47['POSITION']],_0x1aea3e['deltaPosit'+'ions']=Pn(_0x1e75a7,_0x45a92a),_0x1aea3e['aabb']=Hu(_0x1e75a7)),_0x4fcd47['hasOwnProp'+'erty']('NORMAL')&&(_0x1e75a7=_0x3e4cc5[_0x4fcd47['NORMAL']],_0x1aea3e['deltaNorma'+'ls']=Pn(_0x1e75a7,_0x45a92a)),_0x461939['hasOwnProp'+'erty']('extras')&&_0x461939['extras']['hasOwnProp'+'erty']('targetName'+'s')?_0x1aea3e['name']=_0x461939['extras']['targetName'+'s'][_0x5d9626]:_0x1aea3e['name']=_0x5d9626['toString'](-0xdca+0x18ca+0x2e*-0x3d),_0x461939['hasOwnProp'+'erty']('weights')&&(_0x1aea3e['defaultWei'+'ght']=_0x461939['weights'][_0x5d9626]),_0x1aea3e['preserveDa'+'ta']=_0x1ab2f2['morphPrese'+'rveData'],_0x224f22['push'](new Md(_0x1aea3e));}),_0x30b768['morph']=new mm(_0x224f22,_0x2e27af,{'preferHighPrecision':_0x1ab2f2['morphPrefe'+'rHighPreci'+'sion']});}_0x538ed0['push'](_0x30b768);}}),_0x538ed0;},Dt=(_0x5446ba,_0x2f48cc,_0x1e81bd)=>{var _0xe02357;let _0x5486fd;const _0x96a3c3=_0x5446ba['texCoord'];if(_0x96a3c3){for(_0x5486fd=-0x19b1*0x1+-0x24a3+-0x1*-0x3e54;_0x5486fd<_0x1e81bd['length'];++_0x5486fd)_0x2f48cc[_0x1e81bd[_0x5486fd]+'MapUv']=_0x96a3c3;}const _0x59ac4d=[-0x182+-0x1*0x1507+0x1689,-0xd39*0x2+0x215*0xb+0x38b],_0x56f357=[0x19c0*0x1+0x1dda*-0x1+-0x41b*-0x1,0x2f*0x85+-0x11c*-0x4+-0x1cda],_0x594f3d=(_0xe02357=_0x5446ba['extensions'])==null?void(0x5d8+-0x1*-0x1ce7+-0x22bf):_0xe02357['KHR_textur'+'e_transfor'+'m'];if(_0x594f3d){const _0x504925=_0x594f3d['offset']||_0x59ac4d,_0x3cfb8f=_0x594f3d['scale']||_0x56f357,_0x48f00c=_0x594f3d['rotation']?-_0x594f3d['rotation']*Y['RAD_TO_DEG']:-0x1*-0x233c+-0x301*0xd+-0x3d1*-0x1,_0x5b2544=new J(_0x3cfb8f[0x44*-0x65+-0x347*0xb+0x1*0x3ee1],_0x3cfb8f[0x1*0x1555+0x6b9+-0x1c0d]),_0x492839=new J(_0x504925[-0x5de*0x6+0x4*0x241+-0xd18*-0x2],0x4*0x2c+0x1973*-0x1+-0x4*-0x631-_0x3cfb8f[-0x18d1+-0xd2e+-0x4c0*-0x8]-_0x504925[-0x7dc+0x1590+0xa7*-0x15]);for(_0x5486fd=-0x163b+-0x1f*0xf1+0x336a;_0x5486fd<_0x1e81bd['length'];++_0x5486fd)_0x2f48cc[_0x1e81bd[_0x5486fd]+'MapTiling']=_0x5b2544,_0x2f48cc[_0x1e81bd[_0x5486fd]+'MapOffset']=_0x492839,_0x2f48cc[_0x1e81bd[_0x5486fd]+('MapRotatio'+'n')]=_0x48f00c;}},oN=(_0x35f1fd,_0x1fec16,_0xab8a49)=>{let _0x410bd1,_0x49ccce;if(_0x35f1fd['hasOwnProp'+'erty']('diffuseFac'+'tor')?(_0x410bd1=_0x35f1fd['diffuseFac'+'tor'],_0x1fec16['diffuse']['set'](Math['pow'](_0x410bd1[0x10da+-0x6*0x534+0xe5e],(-0x101b+-0x3*-0x6be+-0x41e)/(0x5ae+0x11c3+-0x176f+0.20000000000000018)),Math['pow'](_0x410bd1[0x11ae+-0x1986+-0x7d9*-0x1],(0x1381+0x1d6a+0x2*-0x1875)/(0x183e+-0x1*-0xcd1+0x10f*-0x23+0.20000000000000018)),Math['pow'](_0x410bd1[0x1b0e+-0x3eb*0x3+-0xf4b],(-0x9e8*-0x1+-0x1*-0x11c5+-0x6eb*0x4)/(-0x22a+-0x1c23+0x1*0x1e4f+0.20000000000000018))),_0x1fec16['opacity']=_0x410bd1[0x873+0x1d7c+-0x25ec]):(_0x1fec16['diffuse']['set'](-0x145e+0x5e7+0x4*0x39e,0x606*0x2+-0x11d6+0x5cb,-0x17a9*0x1+0x1b21+-0x377*0x1),_0x1fec16['opacity']=0x242d*-0x1+-0x16b3+0x3ae1),_0x35f1fd['hasOwnProp'+'erty']('diffuseTex'+'ture')){const _0x3c7196=_0x35f1fd['diffuseTex'+'ture'];_0x49ccce=_0xab8a49[_0x3c7196['index']],_0x1fec16['diffuseMap']=_0x49ccce,_0x1fec16['diffuseMap'+'Channel']='rgb',_0x1fec16['opacityMap']=_0x49ccce,_0x1fec16['opacityMap'+'Channel']='a',Dt(_0x3c7196,_0x1fec16,['diffuse','opacity']);}if(_0x1fec16['useMetalne'+'ss']=!(-0x16c6+0x146*-0x4+0x1bdf),_0x35f1fd['hasOwnProp'+'erty']('specularFa'+'ctor')?(_0x410bd1=_0x35f1fd['specularFa'+'ctor'],_0x1fec16['specular']['set'](Math['pow'](_0x410bd1[0x1*0x1f0a+0x527+0x1*-0x2431],(0x313+0x1a8d*0x1+-0x1d9f)/(-0x15c0+0x1be*0x1+0x1404+0.20000000000000018)),Math['pow'](_0x410bd1[0x1798+0x1c70*0x1+-0x3407*0x1],(0x21de+-0x284+-0x4b*0x6b)/(-0x1cb0+0x8fc+-0x13b6*-0x1+0.20000000000000018)),Math['pow'](_0x410bd1[-0x97f+-0x797+0x1118],(0x2*-0x136e+0x5a+0x2683)/(-0x272*0x2+-0x2cc+0x7b2+0.20000000000000018)))):_0x1fec16['specular']['set'](-0x2e3+0x6be*0x1+-0x3da,0x1*-0x1402+0x39*0x13+0xfc8,0x14b7+0x121*-0x12+-0x64*0x1),_0x35f1fd['hasOwnProp'+'erty']('glossiness'+'Factor')?_0x1fec16['gloss']=_0x35f1fd['glossiness'+'Factor']:_0x1fec16['gloss']=0xd9f+-0x84e+-0x550,_0x35f1fd['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x309585=_0x35f1fd['specularGl'+'ossinessTe'+'xture'];_0x1fec16['specularMa'+'p']=_0x1fec16['glossMap']=_0xab8a49[_0x309585['index']],_0x1fec16['specularMa'+'pChannel']='rgb',_0x1fec16['glossMapCh'+'annel']='a',Dt(_0x309585,_0x1fec16,['gloss','metalness']);}},lN=(_0x2522b8,_0x12b7bb,_0x5391dc)=>{if(_0x2522b8['hasOwnProp'+'erty']('clearcoatF'+'actor')?_0x12b7bb['clearCoat']=_0x2522b8['clearcoatF'+'actor']*(-0x1*0x1c67+0x369*0x5+0xb5a+0.25):_0x12b7bb['clearCoat']=-0x1ccd+-0x2708*-0x1+-0xa3b,_0x2522b8['hasOwnProp'+'erty']('clearcoatT'+'exture')){const _0x3c1961=_0x2522b8['clearcoatT'+'exture'];_0x12b7bb['clearCoatM'+'ap']=_0x5391dc[_0x3c1961['index']],_0x12b7bb['clearCoatM'+'apChannel']='r',Dt(_0x3c1961,_0x12b7bb,['clearCoat']);}if(_0x2522b8['hasOwnProp'+'erty']('clearcoatR'+'oughnessFa'+'ctor')?_0x12b7bb['clearCoatG'+'loss']=_0x2522b8['clearcoatR'+'oughnessFa'+'ctor']:_0x12b7bb['clearCoatG'+'loss']=-0x469*-0x8+-0xeae*0x1+-0x125*0x12,_0x2522b8['hasOwnProp'+'erty']('clearcoatR'+'oughnessTe'+'xture')){const _0x539173=_0x2522b8['clearcoatR'+'oughnessTe'+'xture'];_0x12b7bb['clearCoatG'+'lossMap']=_0x5391dc[_0x539173['index']],_0x12b7bb['clearCoatG'+'lossMapCha'+'nnel']='g',Dt(_0x539173,_0x12b7bb,['clearCoatG'+'loss']);}if(_0x2522b8['hasOwnProp'+'erty']('clearcoatN'+'ormalTextu'+'re')){const _0x4ffc9c=_0x2522b8['clearcoatN'+'ormalTextu'+'re'];_0x12b7bb['clearCoatN'+'ormalMap']=_0x5391dc[_0x4ffc9c['index']],Dt(_0x4ffc9c,_0x12b7bb,['clearCoatN'+'ormal']),_0x4ffc9c['hasOwnProp'+'erty']('scale')?_0x12b7bb['clearCoatB'+'umpiness']=_0x4ffc9c['scale']:_0x12b7bb['clearCoatB'+'umpiness']=0x15*0xb7+0x1684+0x3*-0xc82;}_0x12b7bb['clearCoatG'+'lossInvert']=!(-0xa75*0x3+-0x1*-0x128a+-0x49*-0x2d);},cN=(_0x51bb9e,_0x433f41,_0x72b03f)=>{_0x433f41['useLightin'+'g']=!(-0x64+-0x25*-0xb9+0x8*-0x34b),_0x433f41['emissive']['copy'](_0x433f41['diffuse']),_0x433f41['emissiveMa'+'p']=_0x433f41['diffuseMap'],_0x433f41['emissiveMa'+'pUv']=_0x433f41['diffuseMap'+'Uv'],_0x433f41['emissiveMa'+'pTiling']['copy'](_0x433f41['diffuseMap'+'Tiling']),_0x433f41['emissiveMa'+'pOffset']['copy'](_0x433f41['diffuseMap'+'Offset']),_0x433f41['emissiveMa'+'pRotation']=_0x433f41['diffuseMap'+'Rotation'],_0x433f41['emissiveMa'+'pChannel']=_0x433f41['diffuseMap'+'Channel'],_0x433f41['emissiveVe'+'rtexColor']=_0x433f41['diffuseVer'+'texColor'],_0x433f41['emissiveVe'+'rtexColorC'+'hannel']=_0x433f41['diffuseVer'+'texColorCh'+'annel'],_0x433f41['useLightin'+'g']=!(-0x79c+0x1*-0xa3f+-0x5f4*-0x3),_0x433f41['useSkybox']=!(-0x1ff6+0xc9d+0x135a),_0x433f41['diffuse']['set'](0x1d5+-0x7*0x8+-0x19c,-0x1426+0x5ab+0xe7c,-0x3*0x93f+-0x1*0x9f3+0x25b1*0x1),_0x433f41['diffuseMap']=null,_0x433f41['diffuseVer'+'texColor']=!(-0x23b+0xed*-0x2a+-0x115*-0x26);},hN=(_0x55dfbd,_0x1cd77e,_0x230b4a)=>{if(_0x1cd77e['useMetalne'+'ssSpecular'+'Color']=!(0x6c+-0x1*-0x19a5+-0x1a11),_0x55dfbd['hasOwnProp'+'erty']('specularCo'+'lorTexture')&&(_0x1cd77e['specularMa'+'p']=_0x230b4a[_0x55dfbd['specularCo'+'lorTexture']['index']],_0x1cd77e['specularMa'+'pChannel']='rgb',Dt(_0x55dfbd['specularCo'+'lorTexture'],_0x1cd77e,['specular'])),_0x55dfbd['hasOwnProp'+'erty']('specularCo'+'lorFactor')){const _0x59abfa=_0x55dfbd['specularCo'+'lorFactor'];_0x1cd77e['specular']['set'](Math['pow'](_0x59abfa[-0x20b8+0xb*-0x337+0x4415],(-0x1f1b+-0x1bc7*0x1+-0x14f*-0x2d)/(0x15d*0x17+-0xb02*0x3+-0x1*-0x1ad+0.20000000000000018)),Math['pow'](_0x59abfa[-0x9ac+0x262b+-0x1c7e],(0x16f6+0x1ad4+-0x31c9)/(-0x4*0x7ae+0x25e7+0x1*-0x72d+0.20000000000000018)),Math['pow'](_0x59abfa[0x481*0x6+0x1490+-0x2f94],(-0x254a+-0x2ea+0x2835)/(-0x2e*-0x88+-0xec2+-0x9ac+0.20000000000000018)));}else _0x1cd77e['specular']['set'](-0x7a*0x13+0x3*-0x8e9+-0x1*-0x23ca,0x2059+0x1*-0xe2f+-0x1229*0x1,0xf44+-0x376+0x9f*-0x13);_0x55dfbd['hasOwnProp'+'erty']('specularFa'+'ctor')?_0x1cd77e['specularit'+'yFactor']=_0x55dfbd['specularFa'+'ctor']:_0x1cd77e['specularit'+'yFactor']=0x1*0xa09+-0x1c2b+0x1223,_0x55dfbd['hasOwnProp'+'erty']('specularTe'+'xture')&&(_0x1cd77e['specularit'+'yFactorMap'+'Channel']='a',_0x1cd77e['specularit'+'yFactorMap']=_0x230b4a[_0x55dfbd['specularTe'+'xture']['index']],Dt(_0x55dfbd['specularTe'+'xture'],_0x1cd77e,['specularit'+'yFactor']));},dN=(_0x1cb92b,_0x5f463f,_0x25da8d)=>{_0x1cb92b['hasOwnProp'+'erty']('ior')&&(_0x5f463f['refraction'+'Index']=(-0x1506+0x4ad+-0x17*-0xb6)/_0x1cb92b['ior']);},fN=(_0x5c65a2,_0x4cca45,_0x53c1cf)=>{_0x5c65a2['hasOwnProp'+'erty']('dispersion')&&(_0x4cca45['dispersion']=_0x5c65a2['dispersion']);},uN=(_0x4784f8,_0x53cf8f,_0x28f918)=>{_0x53cf8f['blendType']=Zs,_0x53cf8f['useDynamic'+'Refraction']=!(0xef7+-0x1b3+-0xd44),_0x4784f8['hasOwnProp'+'erty']('transmissi'+'onFactor')&&(_0x53cf8f['refraction']=_0x4784f8['transmissi'+'onFactor']),_0x4784f8['hasOwnProp'+'erty']('transmissi'+'onTexture')&&(_0x53cf8f['refraction'+'MapChannel']='r',_0x53cf8f['refraction'+'Map']=_0x28f918[_0x4784f8['transmissi'+'onTexture']['index']],Dt(_0x4784f8['transmissi'+'onTexture'],_0x53cf8f,['refraction']));},pN=(_0x2f68b1,_0x436bbc,_0x3bb3ca)=>{if(_0x436bbc['useSheen']=!(0x363+0x56b+-0x8ce),_0x2f68b1['hasOwnProp'+'erty']('sheenColor'+'Factor')){const _0x53b5ad=_0x2f68b1['sheenColor'+'Factor'];_0x436bbc['sheen']['set'](Math['pow'](_0x53b5ad[0x111+-0x10f7+-0x37*-0x4a],(0xc81+-0x2565*0x1+0x18e5)/(-0x1258+-0x715+0x11*0x17f+0.20000000000000018)),Math['pow'](_0x53b5ad[-0x45c*0x3+-0x2485+0x319a],(0x416*0x3+0x11e0+0x9*-0x359)/(0x2146+-0x3*-0xa0c+-0x2*0x1fb4+0.20000000000000018)),Math['pow'](_0x53b5ad[0x18b1+0x4da+0x1d89*-0x1],(-0x1594+0x2409+0x64*-0x25)/(0x166e+0x1cf2+-0x335e+0.20000000000000018)));}else _0x436bbc['sheen']['set'](-0x761*0x2+0x2361+-0x149e,0x67a+0xebb+-0x1534,0xb15*0x1+0x755*0x1+-0x1269);_0x2f68b1['hasOwnProp'+'erty']('sheenColor'+'Texture')&&(_0x436bbc['sheenMap']=_0x3bb3ca[_0x2f68b1['sheenColor'+'Texture']['index']],Dt(_0x2f68b1['sheenColor'+'Texture'],_0x436bbc,['sheen'])),_0x436bbc['sheenGloss']=_0x2f68b1['hasOwnProp'+'erty']('sheenRough'+'nessFactor')?_0x2f68b1['sheenRough'+'nessFactor']:0x26f6*0x1+0x1*0x1493+-0x1*0x3b89,_0x2f68b1['hasOwnProp'+'erty']('sheenRough'+'nessTextur'+'e')&&(_0x436bbc['sheenGloss'+'Map']=_0x3bb3ca[_0x2f68b1['sheenRough'+'nessTextur'+'e']['index']],_0x436bbc['sheenGloss'+'MapChannel']='a',Dt(_0x2f68b1['sheenRough'+'nessTextur'+'e'],_0x436bbc,['sheenGloss'])),_0x436bbc['sheenGloss'+'Invert']=!(-0xc*0x51+0x99+0x333*0x1);},mN=(_0x371a73,_0x4eeb45,_0x146d97)=>{if(_0x4eeb45['blendType']=Zs,_0x4eeb45['useDynamic'+'Refraction']=!(-0xdf1+0x700+0x6f1),_0x371a73['hasOwnProp'+'erty']('thicknessF'+'actor')&&(_0x4eeb45['thickness']=_0x371a73['thicknessF'+'actor']),_0x371a73['hasOwnProp'+'erty']('thicknessT'+'exture')&&(_0x4eeb45['thicknessM'+'ap']=_0x146d97[_0x371a73['thicknessT'+'exture']['index']],_0x4eeb45['thicknessM'+'apChannel']='g',Dt(_0x371a73['thicknessT'+'exture'],_0x4eeb45,['thickness'])),_0x371a73['hasOwnProp'+'erty']('attenuatio'+'nDistance')&&(_0x4eeb45['attenuatio'+'nDistance']=_0x371a73['attenuatio'+'nDistance']),_0x371a73['hasOwnProp'+'erty']('attenuatio'+'nColor')){const _0x136631=_0x371a73['attenuatio'+'nColor'];_0x4eeb45['attenuatio'+'n']['set'](Math['pow'](_0x136631[0x4*0x2c1+-0x76d*0x3+0x3*0x3c1],(0x1077*-0x1+-0x16e5+0x275d)/(-0x430*0x9+0x108a+0x1528+0.20000000000000018)),Math['pow'](_0x136631[-0xc5e*-0x1+-0x10f6+-0x1*-0x499],(-0x8*0x257+0x2d*-0x49+-0x7*-0x482)/(-0x5*-0x2ef+-0x2710+-0x1867*-0x1+0.20000000000000018)),Math['pow'](_0x136631[-0x208b+0x1*-0x2273+0x4300],(-0x9e0+0x18b2+-0xed1*0x1)/(-0x6b+0x15c1+-0x1554+0.20000000000000018)));}},_N=(_0x1da084,_0x2626fa,_0x3cae3a)=>{_0x1da084['hasOwnProp'+'erty']('emissiveSt'+'rength')&&(_0x2626fa['emissiveIn'+'tensity']=_0x1da084['emissiveSt'+'rength']);},gN=(_0x5dc049,_0x10512e,_0x3d5b1f)=>{_0x10512e['useIridesc'+'ence']=!(0x109*-0x14+-0x2294*-0x1+-0xde0),_0x5dc049['hasOwnProp'+'erty']('iridescenc'+'eFactor')&&(_0x10512e['iridescenc'+'e']=_0x5dc049['iridescenc'+'eFactor']),_0x5dc049['hasOwnProp'+'erty']('iridescenc'+'eTexture')&&(_0x10512e['iridescenc'+'eMapChanne'+'l']='r',_0x10512e['iridescenc'+'eMap']=_0x3d5b1f[_0x5dc049['iridescenc'+'eTexture']['index']],Dt(_0x5dc049['iridescenc'+'eTexture'],_0x10512e,['iridescenc'+'e'])),_0x5dc049['hasOwnProp'+'erty']('iridescenc'+'eIor')&&(_0x10512e['iridescenc'+'eRefractio'+'nIndex']=_0x5dc049['iridescenc'+'eIor']),_0x5dc049['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Minimum')&&(_0x10512e['iridescenc'+'eThickness'+'Min']=_0x5dc049['iridescenc'+'eThickness'+'Minimum']),_0x5dc049['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Maximum')&&(_0x10512e['iridescenc'+'eThickness'+'Max']=_0x5dc049['iridescenc'+'eThickness'+'Maximum']),_0x5dc049['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Texture')&&(_0x10512e['iridescenc'+'eThickness'+'MapChannel']='g',_0x10512e['iridescenc'+'eThickness'+'Map']=_0x3d5b1f[_0x5dc049['iridescenc'+'eThickness'+'Texture']['index']],Dt(_0x5dc049['iridescenc'+'eThickness'+'Texture'],_0x10512e,['iridescenc'+'eThickness']));},SN=(_0x4c3e77,_0x459a08,_0x23c699)=>{if(_0x459a08['enableGGXS'+'pecular']=!(-0x36*-0x8+-0x3f6*0x6+0x1614),_0x4c3e77['hasOwnProp'+'erty']('anisotropy'+'Strength')?_0x459a08['anisotropy'+'Intensity']=_0x4c3e77['anisotropy'+'Strength']:_0x459a08['anisotropy'+'Intensity']=-0x300+0x14e8+-0x11e8,_0x4c3e77['hasOwnProp'+'erty']('anisotropy'+'Texture')){const _0x4ceb29=_0x4c3e77['anisotropy'+'Texture'];_0x459a08['anisotropy'+'Map']=_0x23c699[_0x4ceb29['index']],Dt(_0x4ceb29,_0x459a08,['anisotropy']);}_0x4c3e77['hasOwnProp'+'erty']('anisotropy'+'Rotation')?_0x459a08['anisotropy'+'Rotation']=_0x4c3e77['anisotropy'+'Rotation']*Y['RAD_TO_DEG']:_0x459a08['anisotropy'+'Rotation']=-0x2*0xc8e+-0x7*-0x327+-0x13*-0x29;},w0=(_0x36cccf,_0x5991b3)=>{const _0x35c9a2=new Ut();_0x36cccf['hasOwnProp'+'erty']('name')&&(_0x35c9a2['name']=_0x36cccf['name']),_0x35c9a2['occludeSpe'+'cular']=bd,_0x35c9a2['diffuseVer'+'texColor']=!(0x4f4+0xd16+-0x120a),_0x35c9a2['specularTi'+'nt']=!(-0x4*-0x5cc+0x3*0x3c3+0x1*-0x2279),_0x35c9a2['specularVe'+'rtexColor']=!(0x195d+0xaab*-0x3+0x6a4),_0x35c9a2['specular']['set'](0x6ff*-0x1+-0x653*0x6+0x2cf2,-0x1759+-0x1e65+0x35bf,-0xeaf+-0x305+-0x3*-0x5e7),_0x35c9a2['gloss']=-0xa51*0x1+0x15d*0x4+0x59*0xe,_0x35c9a2['glossInver'+'t']=!(-0x21de+0x25d8+-0x1fd*0x2),_0x35c9a2['useMetalne'+'ss']=!(0x910+-0x3*0xc15+-0x1b2f*-0x1);let _0x1c0366,_0x3afe5f;if(_0x36cccf['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x2c155b=_0x36cccf['pbrMetalli'+'cRoughness'];if(_0x2c155b['hasOwnProp'+'erty']('baseColorF'+'actor')&&(_0x1c0366=_0x2c155b['baseColorF'+'actor'],_0x35c9a2['diffuse']['set'](Math['pow'](_0x1c0366[-0x7*0x47+0x17*-0x31+0x658],(-0x1*0x1223+-0x32e*0x3+-0x3*-0x93a)/(0xa9*0x33+-0x14f*0x7+0x2*-0xc40+0.20000000000000018)),Math['pow'](_0x1c0366[-0xf08+-0x1e21+0x5e*0x7b],(0x79*0x17+0x4c*0x38+-0x1b7e)/(0x12cf+-0x215f*0x1+0xe92+0.20000000000000018)),Math['pow'](_0x1c0366[0x2512+0x10e9+-0x35f9],(0x1*-0x14bd+-0x2324+0x37e2)/(-0xc23*-0x2+-0x7*-0x1e7+-0x2595+0.20000000000000018))),_0x35c9a2['opacity']=_0x1c0366[-0x12d3+-0xb71*0x1+0x17*0x151]),_0x2c155b['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x57169d=_0x2c155b['baseColorT'+'exture'];_0x3afe5f=_0x5991b3[_0x57169d['index']],_0x35c9a2['diffuseMap']=_0x3afe5f,_0x35c9a2['diffuseMap'+'Channel']='rgb',_0x35c9a2['opacityMap']=_0x3afe5f,_0x35c9a2['opacityMap'+'Channel']='a',Dt(_0x57169d,_0x35c9a2,['diffuse','opacity']);}if(_0x2c155b['hasOwnProp'+'erty']('metallicFa'+'ctor')&&(_0x35c9a2['metalness']=_0x2c155b['metallicFa'+'ctor']),_0x2c155b['hasOwnProp'+'erty']('roughnessF'+'actor')&&(_0x35c9a2['gloss']=_0x2c155b['roughnessF'+'actor']),_0x2c155b['hasOwnProp'+'erty']('metallicRo'+'ughnessTex'+'ture')){const _0x5eb843=_0x2c155b['metallicRo'+'ughnessTex'+'ture'];_0x35c9a2['metalnessM'+'ap']=_0x35c9a2['glossMap']=_0x5991b3[_0x5eb843['index']],_0x35c9a2['metalnessM'+'apChannel']='b',_0x35c9a2['glossMapCh'+'annel']='g',Dt(_0x5eb843,_0x35c9a2,['gloss','metalness']);}}if(_0x36cccf['hasOwnProp'+'erty']('normalText'+'ure')){const _0x43933f=_0x36cccf['normalText'+'ure'];_0x35c9a2['normalMap']=_0x5991b3[_0x43933f['index']],Dt(_0x43933f,_0x35c9a2,['normal']),_0x43933f['hasOwnProp'+'erty']('scale')&&(_0x35c9a2['bumpiness']=_0x43933f['scale']);}if(_0x36cccf['hasOwnProp'+'erty']('occlusionT'+'exture')){const _0x2d6fe5=_0x36cccf['occlusionT'+'exture'];_0x35c9a2['aoMap']=_0x5991b3[_0x2d6fe5['index']],_0x35c9a2['aoMapChann'+'el']='r',Dt(_0x2d6fe5,_0x35c9a2,['ao']);}if(_0x36cccf['hasOwnProp'+'erty']('emissiveFa'+'ctor')&&(_0x1c0366=_0x36cccf['emissiveFa'+'ctor'],_0x35c9a2['emissive']['set'](Math['pow'](_0x1c0366[0xf1*-0x11+0x4*-0x172+0x15c9],(-0x1b77*0x1+0x1*-0x281+0x1df9*0x1)/(0x753+-0xb8a+0x439*0x1+0.20000000000000018)),Math['pow'](_0x1c0366[-0x3c5+0x17ce+-0x8*0x281],(-0x52f*-0x7+0x1*-0xace+-0x87e*0x3)/(-0x19c9+-0x2f3+0x1cbe+0.20000000000000018)),Math['pow'](_0x1c0366[-0x3ac+-0xc5f+-0x1*-0x100d],(0x1cf*0xd+0x15ca+0x1a*-0x1be)/(0xd1f+0x2*-0x101+-0xb1b+0.20000000000000018)))),_0x36cccf['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x31bfc0=_0x36cccf['emissiveTe'+'xture'];_0x35c9a2['emissiveMa'+'p']=_0x5991b3[_0x31bfc0['index']],Dt(_0x31bfc0,_0x35c9a2,['emissive']);}if(_0x36cccf['hasOwnProp'+'erty']('alphaMode'))switch(_0x36cccf['alphaMode']){case'MASK':_0x35c9a2['blendType']=Cs,_0x36cccf['hasOwnProp'+'erty']('alphaCutof'+'f')?_0x35c9a2['alphaTest']=_0x36cccf['alphaCutof'+'f']:_0x35c9a2['alphaTest']=0x1d5c+-0x476+-0x18e6+0.5;break;case'BLEND':_0x35c9a2['blendType']=Zs,_0x35c9a2['depthWrite']=!(-0x79e+0x2277+0xd6c*-0x2);break;default:case'OPAQUE':_0x35c9a2['blendType']=Cs;break;}else _0x35c9a2['blendType']=Cs;_0x36cccf['hasOwnProp'+'erty']('doubleSide'+'d')?(_0x35c9a2['twoSidedLi'+'ghting']=_0x36cccf['doubleSide'+'d'],_0x35c9a2['cull']=_0x36cccf['doubleSide'+'d']?bt:pa):(_0x35c9a2['twoSidedLi'+'ghting']=!(0x615+-0x271*-0xd+-0x25d1),_0x35c9a2['cull']=pa);const _0x268da3={'KHR_materials_clearcoat':lN,'KHR_materials_emissive_strength':_N,'KHR_materials_ior':dN,'KHR_materials_dispersion':fN,'KHR_materials_iridescence':gN,'KHR_materials_pbrSpecularGlossiness':oN,'KHR_materials_sheen':pN,'KHR_materials_specular':hN,'KHR_materials_transmission':uN,'KHR_materials_unlit':cN,'KHR_materials_volume':mN,'KHR_materials_anisotropy':SN};if(_0x36cccf['hasOwnProp'+'erty']('extensions'))for(const _0x376142 in _0x36cccf['extensions']){const _0x457f6f=_0x268da3[_0x376142];_0x457f6f!==void(-0x139+-0x1*-0x21c1+0x1044*-0x2)&&_0x457f6f(_0x36cccf['extensions'][_0x376142],_0x35c9a2,_0x5991b3);}return _0x35c9a2['update'](),_0x35c9a2;},yN=(_0x502666,_0x2341ca,_0x34ca48,_0xfc2524,_0x1060c7,_0x323cc0,_0x79650a)=>{const _0x1a2bf9=_0x2f3a25=>new Fh(yl(_0x2f3a25['type']),Pn(_0x2f3a25,_0xfc2524)),_0x54dffb={'STEP':Bv,'LINEAR':Su,'CUBICSPLINE':yu},_0x9283d2={},_0x31142a={},_0x13cc40={};let _0x32a902=-0xe42+0x17ab+-0x968,_0x564cc3;for(_0x564cc3=-0x3*0xc0d+-0x2133+0x455a;_0x564cc3<_0x502666['samplers']['length'];++_0x564cc3){const _0x12fed6=_0x502666['samplers'][_0x564cc3];_0x9283d2['hasOwnProp'+'erty'](_0x12fed6['input'])||(_0x9283d2[_0x12fed6['input']]=_0x1a2bf9(_0x34ca48[_0x12fed6['input']])),_0x31142a['hasOwnProp'+'erty'](_0x12fed6['output'])||(_0x31142a[_0x12fed6['output']]=_0x1a2bf9(_0x34ca48[_0x12fed6['output']]));const _0x179169=_0x12fed6['hasOwnProp'+'erty']('interpolat'+'ion')&&_0x54dffb['hasOwnProp'+'erty'](_0x12fed6['interpolat'+'ion'])?_0x54dffb[_0x12fed6['interpolat'+'ion']]:Su,_0x227e2a={'paths':[],'input':_0x12fed6['input'],'output':_0x12fed6['output'],'interpolation':_0x179169};_0x13cc40[_0x564cc3]=_0x227e2a;}const _0x384822=[],_0x520586={'translation':'localPosit'+'ion','rotation':'localRotat'+'ion','scale':'localScale'},_0x1bf174=_0x470e6a=>{const _0xfca1ff=[];for(;_0x470e6a;)_0xfca1ff['unshift'](_0x470e6a['name']),_0x470e6a=_0x470e6a['parent'];return _0xfca1ff;},_0x1d0c95=(_0x564e46,_0x56a3d7,_0x2a8881)=>{const _0x30ebdb=_0x31142a[_0x564e46['output']];if(!_0x30ebdb){w['warn']('glb-parser'+':\x20No\x20outpu'+'t\x20data\x20is\x20'+'available\x20'+'for\x20the\x20mo'+'rph\x20target'+'\x20curve\x20('+_0x2a8881+('/graph/wei'+'ghts).\x20Ski'+'pping.'));return;}let _0x26c3ff;if(_0x323cc0&&_0x323cc0[_0x56a3d7['mesh']]){const _0x1ccd80=_0x323cc0[_0x56a3d7['mesh']];_0x1ccd80['hasOwnProp'+'erty']('extras')&&_0x1ccd80['extras']['hasOwnProp'+'erty']('targetName'+'s')&&(_0x26c3ff=_0x1ccd80['extras']['targetName'+'s']);}const _0x172408=_0x30ebdb['data'],_0x30f94a=_0x172408['length']/_0x9283d2[_0x564e46['input']]['data']['length'],_0x4138d5=_0x172408['length']/_0x30f94a,_0x2b14bb=_0x4138d5*(0x1424+-0x1*0xd8f+0x691*-0x1),_0x12fd6e=new ArrayBuffer(_0x2b14bb*_0x30f94a);for(let _0x407e66=-0x1*-0x25b6+-0x3*0x6b4+-0x119a;_0x407e66<_0x30f94a;_0x407e66++){const _0x9eae25=new Float32Array(_0x12fd6e,_0x2b14bb*_0x407e66,_0x4138d5);for(let _0x175236=0x190b+0x1a*0xc5+-0x2d0d;_0x175236<_0x4138d5;_0x175236++)_0x9eae25[_0x175236]=_0x172408[_0x175236*_0x30f94a+_0x407e66];const _0x3f7d7=new Fh(0x1*0x11b9+-0x704*-0x2+-0x1fc0,_0x9eae25),_0x3825fb=_0x26c3ff!=null&&_0x26c3ff[_0x407e66]?'name.'+_0x26c3ff[_0x407e66]:_0x407e66;_0x31142a[-_0x32a902]=_0x3f7d7;const _0x53ab0e={'paths':[{'entityPath':_0x2a8881,'component':'graph','propertyPath':['weight.'+_0x3825fb]}],'input':_0x564e46['input'],'output':-_0x32a902,'interpolation':_0x564e46['interpolat'+'ion']};_0x32a902++,_0x13cc40['morphCurve'+'-'+_0x564cc3+'-'+_0x407e66]=_0x53ab0e;}};for(_0x564cc3=-0xe1*0x11+0x222*-0x6+0x1bbd;_0x564cc3<_0x502666['channels']['length'];++_0x564cc3){const _0x217843=_0x502666['channels'][_0x564cc3],_0x306da8=_0x217843['target'],_0x584142=_0x13cc40[_0x217843['sampler']],_0x3506bb=_0x1060c7[_0x306da8['node']],_0x3ecec4=_0x79650a[_0x306da8['node']],_0x2e0f74=_0x1bf174(_0x3506bb);_0x306da8['path']['startsWith']('weights')?(_0x1d0c95(_0x584142,_0x3ecec4,_0x2e0f74),_0x13cc40[_0x217843['sampler']]['morphCurve']=!(-0x221a+0xb69*0x2+0x26*0x4c)):_0x584142['paths']['push']({'entityPath':_0x2e0f74,'component':'graph','propertyPath':[_0x520586[_0x306da8['path']]]});}const _0x1fa856=[],_0x5ab780=[],_0x240191=[];for(const _0x4ec9fc in _0x9283d2)_0x1fa856['push'](_0x9283d2[_0x4ec9fc]),_0x9283d2[_0x4ec9fc]=_0x1fa856['length']-(0x1*-0x769+0x9b2+0x1*-0x248);for(const _0x426c5d in _0x31142a)_0x5ab780['push'](_0x31142a[_0x426c5d]),_0x31142a[_0x426c5d]=_0x5ab780['length']-(-0xef0+-0x8f4*0x2+0x20d9);for(const _0x2109ee in _0x13cc40){const _0x51688b=_0x13cc40[_0x2109ee];_0x51688b['morphCurve']||(_0x240191['push'](new v0(_0x51688b['paths'],_0x9283d2[_0x51688b['input']],_0x31142a[_0x51688b['output']],_0x51688b['interpolat'+'ion'])),_0x51688b['paths']['length']>0x15*-0x105+-0x8cb*0x1+0x1e34&&_0x51688b['paths'][0x16b0+0x134+-0x17e4]['propertyPa'+'th'][-0x24c5+-0x6df*-0x1+0xef3*0x2]==='localRotat'+'ion'&&_0x51688b['interpolat'+'ion']!==yu&&_0x384822['push'](_0x240191[_0x240191['length']-(-0x5*0x70b+0xa3f+0x18f9)]['output']));}_0x384822['sort']();let _0x5a4fb3=null,_0x22ae7a;for(_0x564cc3=0x1777+0x12f*0x1f+0x64*-0x9a;_0x564cc3<_0x384822['length'];++_0x564cc3){const _0x49e06f=_0x384822[_0x564cc3];if(_0x564cc3===0x1a5*-0x4+0x156c+-0xed8||_0x49e06f!==_0x5a4fb3){if(_0x22ae7a=_0x5ab780[_0x49e06f],_0x22ae7a['components']===0x2621+-0xe7c+-0x17a1){const _0x54acd5=_0x22ae7a['data'],_0x458cd6=_0x54acd5['length']-(0xff0+0x737*-0x1+0x1*-0x8b5);for(let _0x1e3f06=-0xd9a*0x1+-0x1*-0x22e7+0x30b*-0x7;_0x1e3f06<_0x458cd6;_0x1e3f06+=-0x1fd*0x9+-0x20*-0x1+0x11c9)_0x54acd5[_0x1e3f06+(0x3*0xa05+0x9*-0x11b+-0x141c)]*_0x54acd5[_0x1e3f06+(-0x2642+-0x1a53+0x4099)]+_0x54acd5[_0x1e3f06+(0xf09+0x3fd*-0x5+-0x1*-0x4e9)]*_0x54acd5[_0x1e3f06+(0x11*0x158+0x41*-0x43+0x3*-0x1f0)]+_0x54acd5[_0x1e3f06+(-0x487+-0xcc8+0x1151)]*_0x54acd5[_0x1e3f06+(-0xa1b*0x3+-0x18f1+0x3748)]+_0x54acd5[_0x1e3f06+(0x1d3a+-0x9*-0x37e+0x19*-0x26d)]*_0x54acd5[_0x1e3f06+(-0x1761+-0x4*-0x520+0x174*0x2)]<0xae9+-0xd*-0x209+-0x2*0x12af&&(_0x54acd5[_0x1e3f06+(-0xc5*0x2f+-0x351*-0x3+0x1a3c)]*=-(-0x1cd0+-0x163f*0x1+-0x1*-0x3310),_0x54acd5[_0x1e3f06+(-0x223*0x7+-0x2*-0x1355+-0x17b0)]*=-(-0x1247+0xcfc+0x1*0x54c),_0x54acd5[_0x1e3f06+(-0x1*0x1dfc+-0x804*0x4+0x5*0xc6a)]*=-(0x727+-0x128f*-0x2+-0xb11*0x4),_0x54acd5[_0x1e3f06+(0x1*0x8cd+-0x1d02+0x25*0x8c)]*=-(-0x2578+-0x1*-0xd85+-0x124*-0x15));}_0x5a4fb3=_0x49e06f;}}let _0x1d7e1d=-0x1*0x2162+-0x29*-0x6d+0xfed;for(_0x564cc3=0x2*-0x115f+-0x2125+0x43e3;_0x564cc3<_0x1fa856['length'];_0x564cc3++)_0x22ae7a=_0x1fa856[_0x564cc3]['_data'],_0x1d7e1d=Math['max'](_0x1d7e1d,_0x22ae7a['length']===-0x1*-0x948+0x8*-0x44d+0x8*0x324?-0x1661+0xe0+0x1581:_0x22ae7a[_0x22ae7a['length']-(0x1a0+0xc7a+-0xe19)]);return new Qi(_0x502666['hasOwnProp'+'erty']('name')?_0x502666['name']:'animation_'+_0x2341ca,_0x1d7e1d,_0x1fa856,_0x5ab780,_0x240191);},Dc=new te(),Qa=new D(),vN=(_0x2fce7c,_0x48f040,_0x24ef3c)=>{const _0x7b5fb9=new Ie();if(_0x2fce7c['hasOwnProp'+'erty']('name')&&_0x2fce7c['name']['length']>-0x13*0x89+0x3*-0xa19+-0x1*-0x2876?_0x7b5fb9['name']=_0x2fce7c['name']:_0x7b5fb9['name']='node_'+_0x48f040,_0x2fce7c['hasOwnProp'+'erty']('matrix')&&(Dc['data']['set'](_0x2fce7c['matrix']),Dc['getTransla'+'tion'](Qa),_0x7b5fb9['setLocalPo'+'sition'](Qa),Dc['getEulerAn'+'gles'](Qa),_0x7b5fb9['setLocalEu'+'lerAngles'](Qa),Dc['getScale'](Qa),_0x7b5fb9['setLocalSc'+'ale'](Qa)),_0x2fce7c['hasOwnProp'+'erty']('rotation')){const _0x5f6401=_0x2fce7c['rotation'];_0x7b5fb9['setLocalRo'+'tation'](_0x5f6401[-0x2478+-0xa10+-0x2*-0x1744],_0x5f6401[-0x11*-0xef+0x112a+-0x2*0x1084],_0x5f6401[0x14a+0x19c8+-0x1b10],_0x5f6401[-0x12f6+0x1*-0x20e2+0x1*0x33db]);}if(_0x2fce7c['hasOwnProp'+'erty']('translatio'+'n')){const _0x2e5d37=_0x2fce7c['translatio'+'n'];_0x7b5fb9['setLocalPo'+'sition'](_0x2e5d37[0x698+-0x14c6+-0xf*-0xf2],_0x2e5d37[-0x26b0+0xc99+0x1a18],_0x2e5d37[0xf19+-0x544*0x7+0x15c5]);}if(_0x2fce7c['hasOwnProp'+'erty']('scale')){const _0x32e025=_0x2fce7c['scale'];_0x7b5fb9['setLocalSc'+'ale'](_0x32e025[0x1*-0x72e+0x7fa+-0xcc],_0x32e025[-0x160b+0x8*0xb5+0x1064],_0x32e025[0x1541+0xeda+-0x2419]);}return _0x2fce7c['hasOwnProp'+'erty']('extensions')&&_0x2fce7c['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']&&_0x24ef3c['set'](_0x2fce7c,{'ext':_0x2fce7c['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']}),_0x7b5fb9;},xN=(_0x433156,_0xc1559)=>{const _0xe5a2d8=_0x433156['type']==='orthograph'+'ic'?En:ni,_0x531e5b=_0xe5a2d8===En?_0x433156['orthograph'+'ic']:_0x433156['perspectiv'+'e'],_0x5d5174={'enabled':!(-0x18fc+0x3*-0xa8b+0x389e),'projection':_0xe5a2d8,'nearClip':_0x531e5b['znear'],'aspectRatioMode':hm};_0x531e5b['zfar']&&(_0x5d5174['farClip']=_0x531e5b['zfar']),_0xe5a2d8===En?(_0x5d5174['orthoHeigh'+'t']=(-0x2591+0x1*-0x1521+-0x3ab2*-0x1+0.5)*_0x531e5b['ymag'],_0x531e5b['ymag']&&(_0x5d5174['aspectRati'+'oMode']=lu,_0x5d5174['aspectRati'+'o']=_0x531e5b['xmag']/_0x531e5b['ymag'])):(_0x5d5174['fov']=_0x531e5b['yfov']*Y['RAD_TO_DEG'],_0x531e5b['aspectRati'+'o']&&(_0x5d5174['aspectRati'+'oMode']=lu,_0x5d5174['aspectRati'+'o']=_0x531e5b['aspectRati'+'o']));const _0x8e949f=new lt(_0x433156['name']);return _0x8e949f['addCompone'+'nt']('camera',_0x5d5174),_0x8e949f;},TN=(_0x4a7234,_0x5a383f)=>{const _0xc24631={'enabled':!(-0xa28+0x1*0x1031+-0x608),'type':_0x4a7234['type']==='point'?'omni':_0x4a7234['type'],'color':_0x4a7234['hasOwnProp'+'erty']('color')?new ie(_0x4a7234['color']):ie['WHITE'],'range':_0x4a7234['hasOwnProp'+'erty']('range')?_0x4a7234['range']:-0x4511+0x25*0x21b+0x3*0xa13,'falloffMode':ev,'intensity':_0x4a7234['hasOwnProp'+'erty']('intensity')?Y['clamp'](_0x4a7234['intensity'],0xc+-0xc55+0xc49,-0x29e+0x1987+-0x1*0x16e7):0x1d7+0x16*0x6a+-0xaf2};_0x4a7234['hasOwnProp'+'erty']('spot')&&(_0xc24631['innerConeA'+'ngle']=_0x4a7234['spot']['hasOwnProp'+'erty']('innerConeA'+'ngle')?_0x4a7234['spot']['innerConeA'+'ngle']*Y['RAD_TO_DEG']:-0xff+-0x713+0x409*0x2,_0xc24631['outerConeA'+'ngle']=_0x4a7234['spot']['hasOwnProp'+'erty']('outerConeA'+'ngle')?_0x4a7234['spot']['outerConeA'+'ngle']*Y['RAD_TO_DEG']:Math['PI']/(-0x1*0x1670+-0x1*0x641+0x1cb5)),_0x4a7234['hasOwnProp'+'erty']('intensity')&&(_0xc24631['luminance']=_0x4a7234['intensity']*pl['getLightUn'+'itConversi'+'on'](fu[_0xc24631['type']],_0xc24631['outerConeA'+'ngle'],_0xc24631['innerConeA'+'ngle']));const _0x3a9509=new lt(_0x5a383f['name']);return _0x3a9509['rotateLoca'+'l'](0x1d6+0x33*0x31+-0xb3f,-0x30*0x13+-0x32*-0x9e+0x4*-0x6d3,-0xde+0x1d09*0x1+-0x1c2b),_0x3a9509['addCompone'+'nt']('light',_0xc24631),_0x3a9509;},wN=(_0x3520d2,_0x2c15a0,_0x28337c,_0xd3e51b)=>{if(!_0x2c15a0['hasOwnProp'+'erty']('skins')||_0x2c15a0['skins']['length']===0x11*-0xce+-0x26f3+0x3*0x118b)return[];const _0x2aeceb=new Map();return _0x2c15a0['skins']['map'](_0x2a9080=>rN(_0x3520d2,_0x2a9080,_0x2c15a0['accessors'],_0xd3e51b,_0x28337c,_0x2aeceb));},EN=(_0x5f16fb,_0x1f8c6b,_0x5892e4,_0x1bd798)=>{var _0x3a0dbd,_0x23dd29,_0x44be9d;const _0x4d1a62={},_0x3eb9d6={},_0x2ce595={},_0x3ede1e=[];return{'meshes':!_0x1bd798['skipMeshes']&&((_0x3a0dbd=_0x1f8c6b==null?void(0x177d+-0x11db+-0x5a2):_0x1f8c6b['meshes'])==null?void(0x2fd*0x3+0x601*0x1+0x1df*-0x8):_0x3a0dbd['length'])&&((_0x23dd29=_0x1f8c6b==null?void(0x1999+0x5d5*0x2+-0x1*0x2543):_0x1f8c6b['accessors'])==null?void(0x2390+0x2*0x5ea+-0x2f64):_0x23dd29['length'])&&((_0x44be9d=_0x1f8c6b==null?void(0x33*-0x60+0x6*0x50b+-0xb22):_0x1f8c6b['bufferView'+'s'])==null?void(-0x448*0x5+0x9f1+0xb77):_0x44be9d['length'])?_0x1f8c6b['meshes']['map'](_0x171e6c=>nN(_0x5f16fb,_0x171e6c,_0x1f8c6b['accessors'],_0x5892e4,_0x4d1a62,_0x3eb9d6,_0x2ce595,_0x1bd798,_0x3ede1e)):[],'meshVariants':_0x3eb9d6,'meshDefaultMaterials':_0x2ce595,'promises':_0x3ede1e};},bN=(_0x347aab,_0x14e63d,_0x18231f)=>{var _0x508973,_0x170304,_0x7d2c2d;if(!_0x347aab['hasOwnProp'+'erty']('materials')||_0x347aab['materials']['length']===-0xdf*0x10+-0x313*0x7+0x2375)return[];const _0x4bbe6a=(_0x508973=_0x18231f==null?void(0x1a78+0x3be*-0x7+-0x46):_0x18231f['material'])==null?void(0x1*0x17b5+-0x12e3+-0x4d2):_0x508973['preprocess'],_0x439ecb=((_0x170304=_0x18231f==null?void(0x5*-0x5c2+0x2641+0x977*-0x1):_0x18231f['material'])==null?void(-0x8*0x4c+0x6b*0x3d+-0x171f):_0x170304['process'])??w0,_0x3a8bcb=(_0x7d2c2d=_0x18231f==null?void(-0x479*0x3+0x12b*0x11+-0x670):_0x18231f['material'])==null?void(0x13*0x25+0x111d+-0x13dc):_0x7d2c2d['postproces'+'s'];return _0x347aab['materials']['map'](_0x2b66d9=>{_0x4bbe6a&&_0x4bbe6a(_0x2b66d9);const _0x2a5c3e=_0x439ecb(_0x2b66d9,_0x14e63d);return _0x3a8bcb&&_0x3a8bcb(_0x2b66d9,_0x2a5c3e),_0x2a5c3e;});},AN=_0x106edc=>{if(!_0x106edc['hasOwnProp'+'erty']('extensions')||!_0x106edc['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts'))return null;const _0x20b8e7=_0x106edc['extensions']['KHR_materi'+'als_varian'+'ts']['variants'],_0x42da2d={};for(let _0x60765=0x204b+0x12e5+-0x3330*0x1;_0x60765<_0x20b8e7['length'];_0x60765++)_0x42da2d[_0x20b8e7[_0x60765]['name']]=_0x60765;return _0x42da2d;},CN=(_0x4a6d96,_0x3c7c33,_0x40dff2,_0x39133a)=>{var _0x260095,_0xac0abb;if(!_0x4a6d96['hasOwnProp'+'erty']('animations')||_0x4a6d96['animations']['length']===-0xcb2+0x9d*0x1a+-0x340)return[];const _0x3dc99e=(_0x260095=_0x39133a==null?void(0x1*-0x76c+0x58*0x8+0x4ac):_0x39133a['animation'])==null?void(-0x2*0x1249+-0x6b5*0x2+0x31fc):_0x260095['preprocess'],_0x37f9c3=(_0xac0abb=_0x39133a==null?void(-0x1*-0x2137+0x2*-0xb5d+-0xa7d):_0x39133a['animation'])==null?void(-0x1*-0x1f19+0x761+-0x19*0x18a):_0xac0abb['postproces'+'s'];return _0x4a6d96['animations']['map']((_0x230df2,_0x91082)=>{_0x3dc99e&&_0x3dc99e(_0x230df2);const _0x303ff1=yN(_0x230df2,_0x91082,_0x4a6d96['accessors'],_0x40dff2,_0x3c7c33,_0x4a6d96['meshes'],_0x4a6d96['nodes']);return _0x37f9c3&&_0x37f9c3(_0x230df2,_0x303ff1),_0x303ff1;});},PN=(_0x1df6c0,_0x18b60d,_0x2780bf,_0x2765be)=>{const _0x4d4571=_0x18b60d['accessors'];_0x2780bf['forEach']((_0x4af02a,_0x4a0320)=>{const _0x78eacf=_0x4af02a['ext']['attributes'];let _0x999a61;if(_0x78eacf['hasOwnProp'+'erty']('TRANSLATIO'+'N')){const _0x22e13a=_0x4d4571[_0x78eacf['TRANSLATIO'+'N']];_0x999a61=Pn(_0x22e13a,_0x2765be);}let _0x224bd4;if(_0x78eacf['hasOwnProp'+'erty']('ROTATION')){const _0xec193e=_0x4d4571[_0x78eacf['ROTATION']];_0x224bd4=Pn(_0xec193e,_0x2765be);}let _0x4d0489;if(_0x78eacf['hasOwnProp'+'erty']('SCALE')){const _0x3efd4a=_0x4d4571[_0x78eacf['SCALE']];_0x4d0489=Pn(_0x3efd4a,_0x2765be);}const _0x4bba4e=(_0x999a61?_0x999a61['length']/(-0x1da9+0x1f23+-0x177):0xac0*-0x1+-0x16b5+-0x2175*-0x1)||(_0x224bd4?_0x224bd4['length']/(-0x1fe5+-0x122e+0x1*0x3217):-0x1597+0x2163+0xa*-0x12e)||(_0x4d0489?_0x4d0489['length']/(0xf95+-0x24d9+0x1547*0x1):0x1367+-0xffb+-0x49*0xc);if(_0x4bba4e){const _0x3c0e1b=new Float32Array(_0x4bba4e*(0x2*-0x1161+-0x2094+0x4366)),_0x3599b1=new D(),_0x31d94c=new le(),_0x389f1b=new D(-0x4db+0x15*0x167+-0x1897,0x2492+0x8*0x427+0x18d*-0x2d,-0x7a3+0xb1e+0x37a*-0x1),_0x58a551=new te();let _0x9f9c0a=-0x1*0xe7d+-0x1*-0x25e9+-0x176c;for(let _0x4c5e93=0x2195*-0x1+-0xe3a+0x2fcf;_0x4c5e93<_0x4bba4e;_0x4c5e93++){const _0x454fb4=_0x4c5e93*(0x391+0xa9d+-0xe2b);if(_0x999a61&&_0x3599b1['set'](_0x999a61[_0x454fb4],_0x999a61[_0x454fb4+(0x409*0x1+0x1*0x1b0e+-0x1f16)],_0x999a61[_0x454fb4+(-0x3*-0x701+0x1a7c+0x2f7d*-0x1)]),_0x224bd4){const _0x4f3f04=_0x4c5e93*(0xe08+0x1421+-0x2225);_0x31d94c['set'](_0x224bd4[_0x4f3f04],_0x224bd4[_0x4f3f04+(0x1*0xc97+0xdef+0x1f*-0xdb)],_0x224bd4[_0x4f3f04+(0x253b+-0x2a8+-0x2291)],_0x224bd4[_0x4f3f04+(0x8be+-0x1697+0x377*0x4)]);}_0x4d0489&&_0x389f1b['set'](_0x4d0489[_0x454fb4],_0x4d0489[_0x454fb4+(0x47+0xe89*-0x1+0xe43)],_0x4d0489[_0x454fb4+(0xe39+-0x1*-0x35d+-0x1194)]),_0x58a551['setTRS'](_0x3599b1,_0x31d94c,_0x389f1b);for(let _0x5531f5=0x190d+0x13*-0x12+-0x17b7;_0x5531f5<0x357+-0x48a*0x6+0x17f5;_0x5531f5++)_0x3c0e1b[_0x9f9c0a++]=_0x58a551['data'][_0x5531f5];}_0x4af02a['matrices']=_0x3c0e1b;}});},MN=(_0x2451d6,_0x49a42e,_0x1f14b7)=>{var _0x40d824,_0x204b79,_0x568df5;if(!_0x2451d6['hasOwnProp'+'erty']('nodes')||_0x2451d6['nodes']['length']===0x31*-0xb6+0x22ef*-0x1+0x45c5)return[];const _0x1a5807=(_0x40d824=_0x49a42e==null?void(-0x1*0x2a5+0xb99+0x3*-0x2fc):_0x49a42e['node'])==null?void(-0x9a*0x26+-0x1db2+0x348e):_0x40d824['preprocess'],_0x114fbb=((_0x204b79=_0x49a42e==null?void(0x1d7b+0x62c+0x23a7*-0x1):_0x49a42e['node'])==null?void(-0x4ed*0x5+0x1ae8+-0x247):_0x204b79['process'])??vN,_0x23e35b=(_0x568df5=_0x49a42e==null?void(-0x1d*-0x13d+-0x1*-0x5ad+0x2*-0x14cb):_0x49a42e['node'])==null?void(0x5*-0xf7+-0x71*0x13+0x2*0x69b):_0x568df5['postproces'+'s'],_0x5888d6=_0x2451d6['nodes']['map']((_0x99cbc9,_0x31b8ba)=>{_0x1a5807&&_0x1a5807(_0x99cbc9);const _0x1b30f7=_0x114fbb(_0x99cbc9,_0x31b8ba,_0x1f14b7);return _0x23e35b&&_0x23e35b(_0x99cbc9,_0x1b30f7),_0x1b30f7;});for(let _0x4c21b3=0x6ec*0x2+0xcad*-0x1+-0xd*0x17;_0x4c21b3<_0x2451d6['nodes']['length'];++_0x4c21b3){const _0x641e5e=_0x2451d6['nodes'][_0x4c21b3];if(_0x641e5e['hasOwnProp'+'erty']('children')){const _0x173cfa=_0x5888d6[_0x4c21b3],_0x2aec67={};for(let _0x53653b=-0x4*-0x59e+-0x1458+-0x20*0x11;_0x53653b<_0x641e5e['children']['length'];++_0x53653b){const _0x29d4d6=_0x5888d6[_0x641e5e['children'][_0x53653b]];_0x29d4d6['parent']||(_0x2aec67['hasOwnProp'+'erty'](_0x29d4d6['name'])?_0x29d4d6['name']+=_0x2aec67[_0x29d4d6['name']]++:_0x2aec67[_0x29d4d6['name']]=-0x2264+-0x1b25+0x2*0x1ec5,_0x173cfa['addChild'](_0x29d4d6));}}}return _0x5888d6;},DN=(_0x28ae8d,_0x33060d)=>{var _0x353fe7;const _0x2baa65=[],_0xcb235f=_0x28ae8d['scenes']['length'];if(_0xcb235f===0x188e+0xf1*0xb+-0x22e8&&((_0x353fe7=_0x28ae8d['scenes'][-0x763+-0x12af+0x1a12]['nodes'])==null?void(-0xd7b+-0x2c4+0x103f):_0x353fe7['length'])===-0x378+0x611*0x6+-0x1*0x20ed){const _0x9cdca6=_0x28ae8d['scenes'][-0x17c8*0x1+0xa6e+0xd5a]['nodes'][-0x17*-0x28+0x32*-0x13+0x1e];_0x2baa65['push'](_0x33060d[_0x9cdca6]);}else for(let _0x49474d=-0x875*0x1+-0x2b*0x4+0x30b*0x3;_0x49474d<_0xcb235f;_0x49474d++){const _0x59ee3c=_0x28ae8d['scenes'][_0x49474d];if(_0x59ee3c['nodes']){const _0x378a52=new Ie(_0x59ee3c['name']);for(let _0xa90838=0x8be+-0xc86+0x3c8;_0xa90838<_0x59ee3c['nodes']['length'];_0xa90838++){const _0x5b4124=_0x33060d[_0x59ee3c['nodes'][_0xa90838]];_0x378a52['addChild'](_0x5b4124);}_0x2baa65['push'](_0x378a52);}}return _0x2baa65;},IN=(_0xa5392e,_0x4fa5c6,_0x2decd7)=>{var _0x329b35,_0x202707,_0x176ffe;let _0x21ef31=null;if(_0xa5392e['hasOwnProp'+'erty']('nodes')&&_0xa5392e['hasOwnProp'+'erty']('cameras')&&_0xa5392e['cameras']['length']>-0xa3*0x37+0x50d*-0x5+0x607*0xa){const _0x4a78df=(_0x329b35=_0x2decd7==null?void(0x1b62*0x1+-0x307+-0x185b*0x1):_0x2decd7['camera'])==null?void(0x24b*-0x1+-0x9*0x2a3+0xd03*0x2):_0x329b35['preprocess'],_0x158afb=((_0x202707=_0x2decd7==null?void(-0xc6d*0x2+0x5bc+-0x98f*-0x2):_0x2decd7['camera'])==null?void(0x7*-0x1b+-0xa1+0x15e):_0x202707['process'])??xN,_0x58c3dd=(_0x176ffe=_0x2decd7==null?void(0x227c+-0x442+-0x1e3a):_0x2decd7['camera'])==null?void(-0x1*0x463+-0x56b+0x9ce):_0x176ffe['postproces'+'s'];_0xa5392e['nodes']['forEach']((_0x2a2f2b,_0x51d8ce)=>{if(_0x2a2f2b['hasOwnProp'+'erty']('camera')){const _0x283118=_0xa5392e['cameras'][_0x2a2f2b['camera']];if(_0x283118){_0x4a78df&&_0x4a78df(_0x283118);const _0x4e3ccc=_0x158afb(_0x283118,_0x4fa5c6[_0x51d8ce]);_0x58c3dd&&_0x58c3dd(_0x283118,_0x4e3ccc),_0x4e3ccc&&(_0x21ef31||(_0x21ef31=new Map()),_0x21ef31['set'](_0x2a2f2b,_0x4e3ccc));}}});}return _0x21ef31;},LN=(_0x6af646,_0x55cc37,_0x4be636)=>{var _0x5c20b5,_0x469a8e,_0x12fe68;let _0x1aff76=null;if(_0x6af646['hasOwnProp'+'erty']('nodes')&&_0x6af646['hasOwnProp'+'erty']('extensions')&&_0x6af646['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x6af646['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('lights')){const _0x4f3763=_0x6af646['extensions']['KHR_lights'+'_punctual']['lights'];if(_0x4f3763['length']){const _0x6e659a=(_0x5c20b5=_0x4be636==null?void(-0x13f*-0x11+-0x1*-0x19db+-0x2f0a):_0x4be636['light'])==null?void(-0x247*-0x3+-0xf90+0x8bb):_0x5c20b5['preprocess'],_0x5c400a=((_0x469a8e=_0x4be636==null?void(0x7*-0x1bb+0x104*-0x5+0x1131):_0x4be636['light'])==null?void(0x2*0x1066+-0x1a98+-0x634):_0x469a8e['process'])??TN,_0x172461=(_0x12fe68=_0x4be636==null?void(0x107a+0x1*-0xafd+-0x1*0x57d):_0x4be636['light'])==null?void(0x1ed8+0x25e8+-0x44c0):_0x12fe68['postproces'+'s'];_0x6af646['nodes']['forEach']((_0x3887ad,_0x1609e8)=>{if(_0x3887ad['hasOwnProp'+'erty']('extensions')&&_0x3887ad['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x3887ad['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('light')){const _0x1ccbe7=_0x3887ad['extensions']['KHR_lights'+'_punctual']['light'],_0x2f8ea3=_0x4f3763[_0x1ccbe7];if(_0x2f8ea3){_0x6e659a&&_0x6e659a(_0x2f8ea3);const _0xd587d=_0x5c400a(_0x2f8ea3,_0x55cc37[_0x1609e8]);_0x172461&&_0x172461(_0x2f8ea3,_0xd587d),_0xd587d&&(_0x1aff76||(_0x1aff76=new Map()),_0x1aff76['set'](_0x3887ad,_0xd587d));}}});}}return _0x1aff76;},RN=(_0x45b541,_0x22f895,_0x10eefe)=>{_0x45b541['nodes']['forEach'](_0x4c9a30=>{_0x4c9a30['hasOwnProp'+'erty']('mesh')&&_0x4c9a30['hasOwnProp'+'erty']('skin')&&_0x22f895[_0x4c9a30['mesh']]['meshes']['forEach'](_0x318907=>{_0x318907['skin']=_0x10eefe[_0x4c9a30['skin']];});});},ON=async(_0x19b5c6,_0x16ec2c,_0xc8788,_0x15bc70,_0x54b721)=>{var _0x36ff93,_0x1e0e82;const _0x505aa3=(_0x36ff93=_0x54b721==null?void(0x109a+-0x66*0x1b+-0x5d8):_0x54b721['global'])==null?void(-0x25bd*0x1+0x127d*-0x1+-0x95f*-0x6):_0x36ff93['preprocess'],_0xb0e9d5=(_0x1e0e82=_0x54b721==null?void(-0xd40+-0x3ae+0x10ee):_0x54b721['global'])==null?void(-0x2f2*-0xd+-0x5*-0x25f+-0x21*0x185):_0x1e0e82['postproces'+'s'];_0x505aa3&&_0x505aa3(_0x16ec2c),_0x16ec2c['asset']&&_0x16ec2c['asset']['generator']==='PlayCanvas'&&w['warn']('glTF\x20model'+'\x20may\x20have\x20'+'been\x20gener'+'ated\x20with\x20'+'flipped\x20UV'+'s.\x20Please\x20'+'reconvert.');const _0x3c2a05=new Map(),_0x155a7d=MN(_0x16ec2c,_0x54b721,_0x3c2a05),_0x42ba51=DN(_0x16ec2c,_0x155a7d),_0x35cf18=LN(_0x16ec2c,_0x155a7d,_0x54b721),_0x415d53=IN(_0x16ec2c,_0x155a7d,_0x54b721),_0x464bb3=AN(_0x16ec2c),_0x535a45=await Promise['all'](_0xc8788),{meshes:_0x244173,meshVariants:_0x3c05f5,meshDefaultMaterials:_0x21ffcf,promises:_0x2ad0cc}=EN(_0x19b5c6,_0x16ec2c,_0x535a45,_0x54b721),_0x27be98=CN(_0x16ec2c,_0x155a7d,_0x535a45,_0x54b721);PN(_0x19b5c6,_0x16ec2c,_0x3c2a05,_0x535a45);const _0x79f267=await Promise['all'](_0x15bc70),_0x4db751=_0x79f267['map'](_0x4d35ae=>_0x4d35ae['resource']),_0x1636da=bN(_0x16ec2c,_0x4db751,_0x54b721),_0x1ec8c6=wN(_0x19b5c6,_0x16ec2c,_0x155a7d,_0x535a45),_0x25b7e2=[];for(let _0x140d09=0x192f+-0xe68*-0x1+-0x7eb*0x5;_0x140d09<_0x244173['length'];_0x140d09++)_0x25b7e2[_0x140d09]=new Em(),_0x25b7e2[_0x140d09]['meshes']=_0x244173[_0x140d09];RN(_0x16ec2c,_0x25b7e2,_0x1ec8c6);const _0x673e3f=new qF();return _0x673e3f['gltf']=_0x16ec2c,_0x673e3f['nodes']=_0x155a7d,_0x673e3f['scenes']=_0x42ba51,_0x673e3f['animations']=_0x27be98,_0x673e3f['textures']=_0x79f267,_0x673e3f['materials']=_0x1636da,_0x673e3f['variants']=_0x464bb3,_0x673e3f['meshVarian'+'ts']=_0x3c05f5,_0x673e3f['meshDefaul'+'tMaterials']=_0x21ffcf,_0x673e3f['renders']=_0x25b7e2,_0x673e3f['skins']=_0x1ec8c6,_0x673e3f['lights']=_0x35cf18,_0x673e3f['cameras']=_0x415d53,_0x673e3f['nodeInstan'+'cingMap']=_0x3c2a05,_0xb0e9d5&&_0xb0e9d5(_0x16ec2c,_0x673e3f),await Promise['all'](_0x2ad0cc),_0x673e3f;},FN=(_0x4d3ecc,_0x42d229)=>{const _0x5ef36a=(_0x3d6777,_0xf17b94)=>{switch(_0x3d6777){case 0x4bc4+-0x2c3e+0x1*0x67a:return Te;case-0x2304+-0x8*-0x2ea+-0x1fd*-0x19:return vt;case-0x4569+0x1*0x3095+-0x4*-0xef5:return Kh;case 0x7*0xa1e+0x320f+0xa3c*-0x8:return Qh;case-0xb95+0x2a6c+0x82b:return Zh;case 0x1*-0x2ac9+0x1*0x8b1+-0xe9f*-0x5:return ma;default:return _0xf17b94;}},_0x1abd5b=(_0x4f88a5,_0x12bed0)=>{switch(_0x4f88a5){case 0x80da*-0x2+-0x245*0x21+0x1cdc8:return ue;case 0x571f+0x5e25+-0x31d4:return ip;case-0x3e35+-0x4bfc+-0xb332*-0x1:return yt;default:return _0x12bed0;}};_0x4d3ecc&&(_0x42d229=_0x42d229??{},_0x4d3ecc['minFilter']=_0x5ef36a(_0x42d229['minFilter'],ma),_0x4d3ecc['magFilter']=_0x5ef36a(_0x42d229['magFilter'],vt),_0x4d3ecc['addressU']=_0x1abd5b(_0x42d229['wrapS'],yt),_0x4d3ecc['addressV']=_0x1abd5b(_0x42d229['wrapT'],yt));};let NN=-0x23a7+-0xfef*-0x1+0x13b8;const nn=_0x20738a=>{var _0x14af6f,_0x156195,_0x3fab9b,_0x5ee3cf;return((_0x156195=(_0x14af6f=_0x20738a['extensions'])==null?void(0x156e+0x11aa+-0x2718):_0x14af6f['KHR_textur'+'e_basisu'])==null?void(-0x253+0x5aa*0x3+0x5*-0x2ef):_0x156195['source'])??((_0x5ee3cf=(_0x3fab9b=_0x20738a['extensions'])==null?void(0x5c2*0x6+-0x53*0x59+0x2f*-0x1f):_0x3fab9b['EXT_textur'+'e_webp'])==null?void(0x11d2+0x7bd*-0x5+0x14df):_0x5ee3cf['source'])??_0x20738a['source'];},kN=(_0x295048,_0x5a3bc4,_0x543761,_0x1a062e,_0x5c56bf)=>{var _0x2f71e3,_0x37905f,_0x2de99e;if(!_0x295048['images']||_0x295048['images']['length']===-0x780+-0x55*-0x13+-0x131*-0x1)return[];const _0x5e62b1=(_0x2f71e3=_0x5c56bf==null?void(0x1*-0x19c1+-0x1f73+0x3934):_0x5c56bf['image'])==null?void(-0x20d5+0x29*-0x5c+-0x1b*-0x1c3):_0x2f71e3['preprocess'],_0x457d32=(_0x37905f=_0x5c56bf==null?void(0x1*0x20c5+-0x79*-0x1d+-0x9*0x52a):_0x5c56bf['image'])==null?void(-0x17db+0x1*0x958+0xe83):_0x37905f['processAsy'+'nc'],_0x1f71ac=(_0x2de99e=_0x5c56bf==null?void(0x1548+-0x24*0x6e+-0xba*0x8):_0x5c56bf['image'])==null?void(0x8*-0x10c+-0x2291+0x2af1):_0x2de99e['postproces'+'s'],_0x318aeb={'image/png':'png','image/jpeg':'jpg','image/basis':'basis','image/ktx':'ktx','image/ktx2':'ktx2','image/vnd-ms.dds':'dds'},_0x2b7fcb=_0x4434ce=>{const _0x377df5=new Set();return _0x4434ce['hasOwnProp'+'erty']('materials')&&_0x4434ce['materials']['forEach'](_0x20ede1=>{if(_0x20ede1['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0xb4664f=_0x20ede1['pbrMetalli'+'cRoughness'];if(_0xb4664f['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x48787e=_0x4434ce['textures'][_0xb4664f['baseColorT'+'exture']['index']];_0x377df5['add'](nn(_0x48787e));}}if(_0x20ede1['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x322017=_0x4434ce['textures'][_0x20ede1['emissiveTe'+'xture']['index']];_0x377df5['add'](nn(_0x322017));}if(_0x20ede1['hasOwnProp'+'erty']('extensions')){const _0x51ae32=_0x20ede1['extensions']['KHR_materi'+'als_sheen'];if(_0x51ae32&&_0x51ae32['hasOwnProp'+'erty']('sheenColor'+'Texture')){const _0xdba97f=_0x4434ce['textures'][_0x51ae32['sheenColor'+'Texture']['index']];_0x377df5['add'](nn(_0xdba97f));}const _0x59a1ec=_0x20ede1['extensions']['KHR_materi'+'als_pbrSpe'+'cularGloss'+'iness'];if(_0x59a1ec&&_0x59a1ec['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x4a32e6=_0x4434ce['textures'][_0x59a1ec['specularGl'+'ossinessTe'+'xture']['index']];_0x377df5['add'](nn(_0x4a32e6));}const _0x2c7ed1=_0x20ede1['extensions']['KHR_materi'+'als_specul'+'ar'];if(_0x2c7ed1&&_0x2c7ed1['hasOwnProp'+'erty']('specularCo'+'lorTexture')){const _0x34a594=_0x4434ce['textures'][_0x2c7ed1['specularCo'+'lorTexture']['index']];_0x377df5['add'](nn(_0x34a594));}}}),_0x377df5;},_0x71e0a5=(_0xd61671,_0xc9cfe6,_0x18d119,_0x4c9514,_0x12e262,_0x44b0f7)=>new Promise((_0x3ce797,_0x33c72e)=>{const _0x36ebd7=_0x111eb9=>{const _0x15909e=(_0xd61671['name']||'gltf-textu'+'re')+'-'+NN++,_0x225e24={'url':_0xc9cfe6||_0x15909e};if(_0x111eb9&&(_0x225e24['contents']=_0x111eb9['slice'](0x2445+-0x58d+-0x1eb8)['buffer']),_0x4c9514){const _0xc9198=_0x318aeb[_0x4c9514];_0xc9198&&(_0x225e24['filename']=_0x225e24['url']+'.'+_0xc9198);}const _0x38bf4b={'srgb':_0x44b0f7},_0x4bb298=new pe(_0x15909e,'texture',_0x225e24,_0x38bf4b,_0x12e262);_0x4bb298['on']('load',_0x1434b4=>_0x3ce797(_0x1434b4)),_0x4bb298['on']('error',_0x499dc1=>_0x33c72e(_0x499dc1)),_0x1a062e['add'](_0x4bb298),_0x1a062e['load'](_0x4bb298);};_0x18d119?_0x18d119['then'](_0x5955c1=>_0x36ebd7(_0x5955c1)):_0x36ebd7(null);}),_0x15e33d=_0x2b7fcb(_0x295048);return _0x295048['images']['map']((_0x1988d5,_0x1b4948)=>{_0x5e62b1&&_0x5e62b1(_0x1988d5);let _0x53ca06;return _0x457d32?_0x53ca06=new Promise((_0x54d4eb,_0x42d360)=>{_0x457d32(_0x1988d5,(_0x379938,_0x5f439e)=>{_0x379938?_0x42d360(_0x379938):_0x54d4eb(_0x5f439e);});}):_0x53ca06=new Promise(_0x5b356d=>{_0x5b356d(null);}),_0x53ca06=_0x53ca06['then'](_0xea69b9=>{const _0x34ae46=_0x15e33d['has'](_0x1b4948);return _0xea69b9||(_0x1988d5['hasOwnProp'+'erty']('uri')?x0(_0x1988d5['uri'])?_0x71e0a5(_0x1988d5,_0x1988d5['uri'],null,jF(_0x1988d5['uri']),null,_0x34ae46):_0x71e0a5(_0x1988d5,jn['test'](_0x1988d5['uri'])?_0x1988d5['uri']:xe['join'](_0x543761,_0x1988d5['uri']),null,null,{'crossOrigin':'anonymous'},_0x34ae46):_0x1988d5['hasOwnProp'+'erty']('bufferView')&&_0x1988d5['hasOwnProp'+'erty']('mimeType')?_0x71e0a5(_0x1988d5,null,_0x5a3bc4[_0x1988d5['bufferView']],_0x1988d5['mimeType'],null,_0x34ae46):Promise['reject'](new Error('Invalid\x20im'+'age\x20found\x20'+'in\x20gltf\x20(n'+'either\x20uri'+'\x20or\x20buffer'+'View\x20found'+').\x20index='+_0x1b4948)));}),_0x1f71ac&&(_0x53ca06=_0x53ca06['then'](_0x2194e1=>(_0x1f71ac(_0x1988d5,_0x2194e1),_0x2194e1))),_0x53ca06;});},UN=(_0x15e28c,_0x1cddf2,_0x8d4e3d)=>{var _0x1672d2,_0x253f7c,_0x5b880c,_0x394c6c,_0x2630fb;if(!((_0x1672d2=_0x15e28c==null?void(-0x2a6+0x1*0x1e9a+-0x1bf4):_0x15e28c['images'])!=null&&_0x1672d2['length'])||!((_0x253f7c=_0x15e28c==null?void(0x1bed*-0x1+-0x94e+0x253b):_0x15e28c['textures'])!=null&&_0x253f7c['length']))return[];const _0x57f4bf=(_0x5b880c=_0x8d4e3d==null?void(0x1bf1+0x17b*-0x6+0x7*-0x2b9):_0x8d4e3d['texture'])==null?void(0x11*0xb+-0xd59+0xc9e):_0x5b880c['preprocess'],_0x27452f=(_0x394c6c=_0x8d4e3d==null?void(-0x71e+-0x2c*-0xb9+-0x18ae):_0x8d4e3d['texture'])==null?void(0x200a+-0x1628+0xa*-0xfd):_0x394c6c['processAsy'+'nc'],_0x281741=(_0x2630fb=_0x8d4e3d==null?void(-0x2ec*-0x1+-0x58*-0x17+-0xad4):_0x8d4e3d['texture'])==null?void(-0xb9a+0x2471*0x1+-0x1*0x18d7):_0x2630fb['postproces'+'s'],_0x17ec8c=new Set();return _0x15e28c['textures']['map'](_0x36daf3=>{_0x57f4bf&&_0x57f4bf(_0x36daf3);let _0x48345a;return _0x27452f?_0x48345a=new Promise((_0x23f9b8,_0x1429b2)=>{_0x27452f(_0x36daf3,_0x15e28c['images'],(_0x5d4e0f,_0x2aa37e)=>{_0x5d4e0f?_0x1429b2(_0x5d4e0f):_0x23f9b8(_0x2aa37e);});}):_0x48345a=new Promise(_0x410b98=>{_0x410b98(null);}),_0x48345a=_0x48345a['then'](_0x571bd4=>{_0x571bd4=_0x571bd4??nn(_0x36daf3);const _0x39226b=_0x17ec8c['has'](_0x571bd4);return _0x17ec8c['add'](_0x571bd4),_0x1cddf2[_0x571bd4]['then'](_0x215897=>{const _0x5410be=_0x39226b?tN(_0x215897):_0x215897;return FN(_0x5410be['resource'],(_0x15e28c['samplers']??[])[_0x36daf3['sampler']]),_0x5410be;});}),_0x281741&&(_0x48345a=_0x48345a['then'](_0xfde071=>(_0x281741(_0x36daf3,_0xfde071),_0xfde071))),_0x48345a;});},BN=(_0x5735f0,_0x268101,_0x5275a5,_0x4129f7)=>{var _0x41b568,_0x34d9fe,_0x17cf55;if(!_0x5735f0['buffers']||_0x5735f0['buffers']['length']===0x1*0x833+0x3*0x6c7+0x14c*-0x16)return[];const _0x4e1285=(_0x41b568=_0x4129f7==null?void(-0x777+-0xe2b+0x15a2):_0x4129f7['buffer'])==null?void(-0x10c4+0x6*-0x1cd+-0x1b92*-0x1):_0x41b568['preprocess'],_0xb4b224=(_0x34d9fe=_0x4129f7==null?void(0xacd+0xefe+-0x5d*0x47):_0x4129f7['buffer'])==null?void(0x39*0x4d+0x1*0xb1+-0x11d6):_0x34d9fe['processAsy'+'nc'],_0x5c3f2e=(_0x17cf55=_0x4129f7==null?void(0x235+0x11f*0x1+-0x354):_0x4129f7['buffer'])==null?void(0x1*0x472+-0x441+-0x31):_0x17cf55['postproces'+'s'];return _0x5735f0['buffers']['map']((_0xcc82df,_0x3cfc88)=>{_0x4e1285&&_0x4e1285(_0xcc82df);let _0x2f2069;return _0xb4b224?_0x2f2069=new Promise((_0x44b019,_0xcfeec5)=>{_0xb4b224(_0xcc82df,(_0x344900,_0x568522)=>{_0x344900?_0xcfeec5(_0x344900):_0x44b019(_0x568522);});}):_0x2f2069=new Promise(_0x4b6003=>{_0x4b6003(null);}),_0x2f2069=_0x2f2069['then'](_0x36320d=>{if(_0x36320d)return _0x36320d;if(_0xcc82df['hasOwnProp'+'erty']('uri')){if(x0(_0xcc82df['uri'])){const _0x3e097d=atob(_0xcc82df['uri']['split'](',')[0x2565+0x2*-0xb43+0x16*-0xad]),_0x1118f2=new Uint8Array(_0x3e097d['length']);for(let _0x59f842=-0x5*0xe5+0x97d+-0x504;_0x59f842<_0x3e097d['length'];_0x59f842++)_0x1118f2[_0x59f842]=_0x3e097d['charCodeAt'](_0x59f842);return _0x1118f2;}return new Promise((_0x28e05c,_0x2157ae)=>{ot['get'](jn['test'](_0xcc82df['uri'])?_0xcc82df['uri']:xe['join'](_0x5275a5,_0xcc82df['uri']),{'cache':!(-0xc09+-0xfc0+0x1*0x1bc9),'responseType':'arraybuffe'+'r','retry':!(-0x22ed+0x140b+-0x1*-0xee3)},(_0x18ff48,_0x276baf)=>{_0x18ff48?_0x2157ae(_0x18ff48):_0x28e05c(new Uint8Array(_0x276baf));});});}return _0x268101;}),_0x5c3f2e&&(_0x2f2069=_0x2f2069['then'](_0x1457af=>(_0x5c3f2e(_0x5735f0['buffers'][_0x3cfc88],_0x1457af),_0x1457af))),_0x2f2069;});},zN=(_0x704756,_0x2af04e)=>{const _0x59328f=JSON['parse']((_0x2e1302=>{if(typeof TextDecoder<'u')return new TextDecoder()['decode'](_0x2e1302);let _0x1bbd2d='';for(let _0x3bd79c=0xe70*-0x2+-0x5a4+-0x5e*-0x5e;_0x3bd79c<_0x2e1302['length'];_0x3bd79c++)_0x1bbd2d+=String['fromCharCo'+'de'](_0x2e1302[_0x3bd79c]);return decodeURIComponent(escape(_0x1bbd2d));})(_0x704756));if(_0x59328f['asset']&&_0x59328f['asset']['version']&&parseFloat(_0x59328f['asset']['version'])<-0x59*-0x3b+-0xa63+-0xe*0xb9){_0x2af04e('Invalid\x20gl'+'tf\x20version'+'.\x20Expected'+'\x20version\x202'+'.0\x20or\x20abov'+'e\x20but\x20foun'+'d\x20version\x20'+'\x27'+_0x59328f['asset']['version']+'\x27.');return;}_0x2af04e(null,_0x59328f);},VN=(_0x3fe419,_0x46ac15)=>{const _0x33ee89=_0x3fe419 instanceof ArrayBuffer?new DataView(_0x3fe419):new DataView(_0x3fe419['buffer'],_0x3fe419['byteOffset'],_0x3fe419['byteLength']),_0x3a3847=_0x33ee89['getUint32'](0x21*0x9b+0x18*-0xb1+-0x363,!(0x15b2+0x1*0x13d5+-0x2987)),_0x226e46=_0x33ee89['getUint32'](0x2178+0x8*0x3d2+-0x4004*0x1,!(-0x6a5+0x9b*-0xb+0xd4e)),_0x5de505=_0x33ee89['getUint32'](-0x1ea+0x1*-0x634+0x7*0x12a,!(-0x2*-0x129d+-0x4fc+-0x203e));if(_0x3a3847!==0x1dda*0x69df+0x4d*0x1e5e4d+-0x2*-0x186cd22c){_0x46ac15('Invalid\x20ma'+'gic\x20number'+'\x20found\x20in\x20'+'glb\x20header'+'.\x20Expected'+'\x200x46546C6'+'7,\x20found\x200'+'x'+_0x3a3847['toString'](-0x1*-0x1227+0x17*-0x123+-0x1*-0x80e));return;}if(_0x226e46!==-0xefa+0x2*0x2a5+0x9b2){_0x46ac15('Invalid\x20ve'+'rsion\x20numb'+'er\x20found\x20i'+'n\x20glb\x20head'+'er.\x20Expect'+'ed\x202,\x20foun'+'d\x20'+_0x226e46);return;}if(_0x5de505<=-0x1324*-0x2+-0x1*-0xc23+-0x326b||_0x5de505>_0x33ee89['byteLength']){_0x46ac15('Invalid\x20le'+'ngth\x20found'+'\x20in\x20glb\x20he'+'ader.\x20Foun'+'d\x20'+_0x5de505);return;}const _0x57eaec=[];let _0x2cbdec=0x19*-0x4+-0x1*0xf44+-0x53c*-0x3;for(;_0x2cbdec<_0x5de505;){const _0x31a183=_0x33ee89['getUint32'](_0x2cbdec,!(0x183+-0x5f*-0x2b+-0x1178));_0x2cbdec+_0x31a183+(0x221b*0x1+-0x321*0x1+-0x1ef2*0x1)>_0x33ee89['byteLength']&&_0x46ac15('Invalid\x20ch'+'unk\x20length'+'\x20found\x20in\x20'+'glb.\x20Found'+'\x20'+_0x31a183);const _0x5eb486=_0x33ee89['getUint32'](_0x2cbdec+(-0x1db3+-0x13*-0x183+-0x7f*-0x2),!(-0x2*0x74f+0x16bf+-0x1*0x821)),_0x280adf=new Uint8Array(_0x33ee89['buffer'],_0x33ee89['byteOffset']+_0x2cbdec+(-0x1fac+0x4*0x737+0x2d8),_0x31a183);_0x57eaec['push']({'length':_0x31a183,'type':_0x5eb486,'data':_0x280adf}),_0x2cbdec+=_0x31a183+(-0x380+0x11f1+-0x1f*0x77);}if(_0x57eaec['length']!==0xc82+-0x97b*0x1+-0x306&&_0x57eaec['length']!==-0x1d22+-0x34*0x43+0x2ac0){_0x46ac15('Invalid\x20nu'+'mber\x20of\x20ch'+'unks\x20found'+'\x20in\x20glb\x20fi'+'le.');return;}if(_0x57eaec[0x165*0xa+-0x161*-0x4+-0x1376]['type']!==-0x493be83f*0x1+-0x81*0x7c1215+0x2*0x6b082c0f){_0x46ac15('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x4'+'E4F534A,\x20f'+'ound\x200x'+_0x57eaec[-0x1f5d+-0x1*-0x239b+-0x43e]['type']['toString'](-0x13f6+0x153*0xa+-0x7c*-0xe));return;}if(_0x57eaec['length']>-0x1ddf+-0x371*0x2+0x2*0x1261&&_0x57eaec[0x9c5+0x14e3*0x1+-0x1ea7]['type']!==0x37763c+0x102145*-0x1+0x26f44b){_0x46ac15('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x0'+'04E4942,\x20f'+'ound\x200x'+_0x57eaec[0x1*0xad8+-0x31f+-0x7b8]['type']['toString'](-0x24ac+-0xe50+0x330c));return;}_0x46ac15(null,{'gltfChunk':_0x57eaec[0x1*-0x97+0x115c+0x3*-0x597]['data'],'binaryChunk':_0x57eaec['length']===0x2e7*0x1+-0x1697+0x13b2?_0x57eaec[0x479+0x17c2+-0x2*0xe1d]['data']:null});},GN=(_0x44d163,_0xafd33a,_0x1a39a8)=>{const _0x40ee08=()=>{const _0x5497ec=new Uint8Array(_0xafd33a);return _0x5497ec[-0xbf*0x11+-0xbb3+0xc31*0x2]===0x1c6b+0xd46*0x1+-0x294a&&_0x5497ec[0x7b*0x7+-0x1*-0x3a9+-0x705]===-0x1f68+0xd85*-0x2+0x3ade&&_0x5497ec[0x1*0x97d+-0xb6*0x33+-0x1c9*-0xf]===0x1fc4+0x2063+0x3fd3*-0x1&&_0x5497ec[-0xf31+-0x22ca+-0x10aa*-0x3]===-0x8*-0x37f+0xf58+0x313*-0xe;};_0x44d163&&_0x44d163['toLowerCas'+'e']()['endsWith']('.glb')||_0x40ee08()?VN(_0xafd33a,_0x1a39a8):_0x1a39a8(null,{'gltfChunk':_0xafd33a,'binaryChunk':null});},HN=(_0x32be75,_0x43072e,_0x3301b7)=>{var _0x5aff44,_0x6267a8,_0x4fb865,_0x1f9050;const _0x1f3bb9=[],_0xe69097=(_0x5aff44=_0x3301b7==null?void(0x237b*0x1+-0x3*0x59a+-0x7*0x2ab):_0x3301b7['bufferView'])==null?void(0x9b*-0x5+-0x19c3+0x1cca):_0x5aff44['preprocess'],_0x407d1c=(_0x6267a8=_0x3301b7==null?void(-0xe*0x33+0x5*-0x5a4+0x1efe*0x1):_0x3301b7['bufferView'])==null?void(0x244e*-0x1+-0x5ae*-0x2+0x18f2):_0x6267a8['processAsy'+'nc'],_0x41719c=(_0x4fb865=_0x3301b7==null?void(-0x1d22+0x1d00+0x22):_0x3301b7['bufferView'])==null?void(0x158e+-0x1d5b+0x1*0x7cd):_0x4fb865['postproces'+'s'];if(!((_0x1f9050=_0x32be75['bufferView'+'s'])!=null&&_0x1f9050['length']))return _0x1f3bb9;for(let _0x5c99da=-0x93e+0x22a6+-0x1968;_0x5c99da<_0x32be75['bufferView'+'s']['length'];++_0x5c99da){const _0x10e9c0=_0x32be75['bufferView'+'s'][_0x5c99da];_0xe69097&&_0xe69097(_0x10e9c0);let _0x2a2e06;_0x407d1c?_0x2a2e06=new Promise((_0x10374b,_0x5285b8)=>{_0x407d1c(_0x10e9c0,_0x43072e,(_0x2bb20b,_0x1170c6)=>{_0x2bb20b?_0x5285b8(_0x2bb20b):_0x10374b(_0x1170c6);});}):_0x2a2e06=new Promise(_0x32096c=>{_0x32096c(null);}),_0x2a2e06=_0x2a2e06['then'](_0x49148d=>_0x49148d||_0x43072e[_0x10e9c0['buffer']]['then'](_0x5b9e24=>new Uint8Array(_0x5b9e24['buffer'],_0x5b9e24['byteOffset']+(_0x10e9c0['byteOffset']||-0x1274+0x1*0x262e+-0xa*0x1f9),_0x10e9c0['byteLength']))),_0x10e9c0['hasOwnProp'+'erty']('byteStride')&&(_0x2a2e06=_0x2a2e06['then'](_0x538c44=>(_0x538c44['byteStride']=_0x10e9c0['byteStride'],_0x538c44))),_0x41719c&&(_0x2a2e06=_0x2a2e06['then'](_0x5187aa=>(_0x41719c(_0x10e9c0,_0x5187aa),_0x5187aa))),_0x1f3bb9['push'](_0x2a2e06);}return _0x1f3bb9;};class kh{static['parse'](_0x5c7568,_0x3d1247,_0x4ce050,_0x2506dc,_0x18385b,_0x3a61b8,_0x4cc0f9){GN(_0x5c7568,_0x4ce050,(_0x4ac366,_0x2730f6)=>{if(_0x4ac366){_0x4cc0f9(_0x4ac366);return;}zN(_0x2730f6['gltfChunk'],(_0x598d28,_0xe814f1)=>{if(_0x598d28){_0x4cc0f9(_0x598d28);return;}const _0x215bca=BN(_0xe814f1,_0x2730f6['binaryChun'+'k'],_0x3d1247,_0x3a61b8),_0x12e981=HN(_0xe814f1,_0x215bca,_0x3a61b8),_0x555deb=kN(_0xe814f1,_0x12e981,_0x3d1247,_0x18385b,_0x3a61b8),_0x18ba72=UN(_0xe814f1,_0x555deb,_0x3a61b8);ON(_0x2506dc,_0xe814f1,_0x12e981,_0x18ba72,_0x3a61b8)['then'](_0x20d015=>_0x4cc0f9(null,_0x20d015))['catch'](_0x3552fb=>_0x4cc0f9(_0x3552fb));});});}static['createDefa'+'ultMateria'+'l'](){return w0({'name':'defaultGlb'+'Material'},[]);}}class WN extends Qe{constructor(_0x4f25b8){super(_0x4f25b8,'animation'),this['device']=_0x4f25b8['graphicsDe'+'vice'],this['assets']=_0x4f25b8['assets'];}['load'](_0x509cbf,_0x2185d9,_0x15b7dc){typeof _0x509cbf=='string'&&(_0x509cbf={'load':_0x509cbf,'original':_0x509cbf});const _0x5cbd57={'retry':this['maxRetries']>-0x8c6+0x1c5a+-0x4*0x4e5,'maxRetries':this['maxRetries']};(_0x509cbf['load']['startsWith']('blob:')||_0x509cbf['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x509cbf['original'])['toLowerCas'+'e']()==='.glb'?_0x5cbd57['responseTy'+'pe']=Ls['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x5cbd57['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x509cbf['load'],_0x5cbd57,(_0x9eed51,_0xa97934)=>{_0x9eed51?_0x2185d9('Error\x20load'+'ing\x20animat'+'ion\x20resour'+'ce:\x20'+_0x509cbf['original']+'\x20['+_0x9eed51+']'):xe['getExtensi'+'on'](_0x509cbf['original'])['toLowerCas'+'e']()==='.glb'?kh['parse']('filename.g'+'lb','',_0xa97934,this['device'],this['assets'],(_0x15b7dc==null?void(0x25d1+0xc38+0x1*-0x3209):_0x15b7dc['options'])??{},(_0x51e36e,_0x3295e4)=>{var _0x12cd6a;if(_0x51e36e)_0x2185d9(_0x51e36e);else{const _0xafab84=_0x3295e4['animations'];if((_0x12cd6a=_0x15b7dc==null?void(0x703+-0x6ee+-0x3*0x7):_0x15b7dc['data'])!=null&&_0x12cd6a['events']){for(let _0x3ae85e=0x238b+-0x31b+0xad0*-0x3;_0x3ae85e<_0xafab84['length'];_0x3ae85e++)_0xafab84[_0x3ae85e]['events']=new Hv(Object['values'](_0x15b7dc['data']['events']));}_0x3295e4['destroy'](),_0x2185d9(null,_0xafab84);}}):_0x2185d9(null,this['_parseAnim'+'ationV'+_0xa97934['animation']['version']](_0xa97934));});}['open'](_0x3fcf12,_0xb30202,_0x5ab135){return _0xb30202;}['_parseAnim'+'ationV3'](_0x4a267a){const _0x2d5cd1=_0x4a267a['animation'],_0x401de0=new ug();_0x401de0['name']=_0x2d5cd1['name'],_0x401de0['duration']=_0x2d5cd1['duration'];for(let _0x1ee34a=0x1*0x347+-0x371*0x7+0x12*0x128;_0x1ee34a<_0x2d5cd1['nodes']['length'];_0x1ee34a++){const _0x42a91b=new fg(),_0x5c44fe=_0x2d5cd1['nodes'][_0x1ee34a];_0x42a91b['_name']=_0x5c44fe['name'];for(let _0x24f7fc=0x1a77+0x10b*0x1+-0x1b82;_0x24f7fc<_0x5c44fe['keys']['length'];_0x24f7fc++){const _0x1caa21=_0x5c44fe['keys'][_0x24f7fc],_0x486131=_0x1caa21['time'],_0x16a64a=_0x1caa21['pos'],_0x28d1de=_0x1caa21['rot'],_0x5dfbe2=_0x1caa21['scale'],_0x1ce51b=new D(_0x16a64a[-0x4a9*0x1+0x353+0xab*0x2],_0x16a64a[-0x122f+-0x18b3+0x2ae3],_0x16a64a[-0x1be*-0x1+0x23ac+-0x2568]),_0x5957d8=new le()['setFromEul'+'erAngles'](_0x28d1de[0x564+0x21b5+-0x2719],_0x28d1de[-0x241a+-0x24b0+0x48cb],_0x28d1de[-0xec9+-0x22d5+0x18d0*0x2]),_0x5511f2=new D(_0x5dfbe2[-0xdd*-0x6+-0x2338+0x1e0a],_0x5dfbe2[-0x1c*0x61+-0x1*-0x641+-0x9*-0x7c],_0x5dfbe2[0x5c9*-0x6+0xebb+-0x12d*-0x11]),_0x417521=new dg(_0x486131,_0x1ce51b,_0x5957d8,_0x5511f2);_0x42a91b['_keys']['push'](_0x417521);}_0x401de0['addNode'](_0x42a91b);}return _0x401de0;}['_parseAnim'+'ationV4'](_0x18a0b7){const _0x555945=_0x18a0b7['animation'],_0x2c730e=new ug();_0x2c730e['name']=_0x555945['name'],_0x2c730e['duration']=_0x555945['duration'];for(let _0x62650e=-0x22b*0x1+0x17*0x70+-0x7e5;_0x62650e<_0x555945['nodes']['length'];_0x62650e++){const _0x26e2a1=new fg(),_0x313286=_0x555945['nodes'][_0x62650e];_0x26e2a1['_name']=_0x313286['name'];const _0x4119d8=_0x313286['defaults']['p'],_0x4abf4b=_0x313286['defaults']['r'],_0x55dc47=_0x313286['defaults']['s'];for(let _0x581e98=-0x18fd*-0x1+-0x46d+-0x1490;_0x581e98<_0x313286['keys']['length'];_0x581e98++){const _0x278d0d=_0x313286['keys'][_0x581e98],_0x4786d4=_0x278d0d['t'],_0x16473b=_0x4119d8||_0x278d0d['p'],_0x572dd9=_0x4abf4b||_0x278d0d['r'],_0x42e3c4=_0x55dc47||_0x278d0d['s'],_0x164bf6=new D(_0x16473b[-0x1*0xab5+-0x16bb+0x2170],_0x16473b[-0xac9+-0x6b*0x41+0x25f5],_0x16473b[-0x27d*-0x4+0x4*0x13f+0x15*-0xb6]),_0x4a9830=new le()['setFromEul'+'erAngles'](_0x572dd9[0x1dc3*0x1+-0x330+-0x1a93],_0x572dd9[0x178d+0xc26+-0x23b2],_0x572dd9[-0x239b+0x157*-0xe+0x365f]),_0x366fe6=new D(_0x42e3c4[0x397+0x41*-0x3d+-0xbe6*-0x1],_0x42e3c4[-0xbea+0x484*0x1+0x767],_0x42e3c4[-0x3*0x92+0x1449+-0x1291]),_0x4a3b1e=new dg(_0x4786d4,_0x164bf6,_0x4a9830,_0x366fe6);_0x26e2a1['_keys']['push'](_0x4a3b1e);}_0x2c730e['addNode'](_0x26e2a1);}return _0x2c730e;}}class $N extends Qe{constructor(_0x23c62a){super(_0x23c62a,'animclip');}['load'](_0x12b7d9,_0x11c895){typeof _0x12b7d9=='string'&&(_0x12b7d9={'load':_0x12b7d9,'original':_0x12b7d9});const _0x25f857={'retry':this['maxRetries']>-0x862+0xd*0x2df+0x1f*-0xef,'maxRetries':this['maxRetries']};_0x12b7d9['load']['startsWith']('blob:')&&(_0x25f857['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x12b7d9['load'],_0x25f857,(_0x5ec096,_0x347852)=>{_0x5ec096?_0x11c895('Error\x20load'+'ing\x20animat'+'ion\x20clip\x20r'+'esource:\x20'+_0x12b7d9['original']+'\x20['+_0x5ec096+']'):_0x11c895(null,_0x347852);});}['open'](_0x22a6fb,_0x53f121){const _0x594145=_0x53f121['name'],_0xa95a1d=_0x53f121['duration'],_0x59b22e=_0x53f121['inputs']['map'](_0x4b8ee6=>new Fh(-0x5*-0x53f+-0x2a*0x7+-0x1914,_0x4b8ee6)),_0x2112f0=_0x53f121['outputs']['map'](_0x27c71b=>new Fh(_0x27c71b['components'],_0x27c71b['data'])),_0x60c6d8=_0x53f121['curves']['map'](_0x3a5b4a=>new v0([_0x3a5b4a['path']],_0x3a5b4a['inputIndex'],_0x3a5b4a['outputInde'+'x'],_0x3a5b4a['interpolat'+'ion']));return new Qi(_0x594145,_0xa95a1d,_0x59b22e,_0x2112f0,_0x60c6d8);}}class XN extends Qe{constructor(_0x2302ff){super(_0x2302ff,'animstateg'+'raph');}['load'](_0x165468,_0x4f7a2b){typeof _0x165468=='string'&&(_0x165468={'load':_0x165468,'original':_0x165468});const _0x1d7265={'retry':this['maxRetries']>0x1f*0x76+-0x8*-0x3d0+0x93*-0x4e,'maxRetries':this['maxRetries']};_0x165468['load']['startsWith']('blob:')&&(_0x1d7265['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x165468['load'],_0x1d7265,(_0x760872,_0xb85ae0)=>{_0x760872?_0x4f7a2b('Error\x20load'+'ing\x20animat'+'ion\x20state\x20'+'graph\x20reso'+'urce:\x20'+_0x165468['original']+'\x20['+_0x760872+']'):_0x4f7a2b(null,_0xb85ae0);});}['open'](_0x33d3f5,_0x3ac293){return new Jc(_0x3ac293);}}const Af=(function(){if(typeof window>'u')return!(-0x199d+-0x1*-0x925+0x1079*0x1);const _0x247430=window['navigator']['userAgent'],_0x54b171=_0x247430['indexOf']('MSIE\x20');if(_0x54b171>0xa5+-0x1*0x209d+0x6*0x554)return parseInt(_0x247430['substring'](_0x54b171+(-0x15de+0x1955+0x7e*-0x7),_0x247430['indexOf']('.',_0x54b171)),0x2292+0x7a3+0x2a2b*-0x1);if(_0x247430['indexOf']('Trident/')>-0x1*-0xddf+0x53*-0x6d+-0x3*-0x728){const _0x133051=_0x247430['indexOf']('rv:');return parseInt(_0x247430['substring'](_0x133051+(-0x2171+0x27*0x94+0xae8),_0x247430['indexOf']('.',_0x133051)),-0xa9*0x1f+-0x1b77+-0x133*-0x28);}return!(-0x13d*-0x1+0x1474+-0x15b0);}()),qN=['.ogg','.mp3','.wav','.mp4a','.m4a','.mp4','.aac','.opus'];class jN extends Qe{constructor(_0x472078){super(_0x472078,'audio'),this['manager']=_0x472078['soundManag'+'er'],w['assert'](this['manager'],'AudioHandl'+'er\x20cannot\x20'+'be\x20created'+'\x20without\x20s'+'ound\x20manag'+'er');}['_isSupport'+'ed'](_0x2373bc){const _0x1b8a87=xe['getExtensi'+'on'](_0x2373bc);return qN['indexOf'](_0x1b8a87)>-(-0x67a+0x10f0*0x2+-0x1b65)||_0x2373bc['startsWith']('blob:');}['load'](_0x1de372,_0x51b39a){typeof _0x1de372=='string'&&(_0x1de372={'load':_0x1de372,'original':_0x1de372});const _0x4f4990=function(_0x59b6e1){_0x51b39a(null,new Mw(_0x59b6e1));},_0x3e2dd9=function(_0x161b34){let _0x5b4ff1='Error\x20load'+'ing\x20audio\x20'+'url:\x20'+_0x1de372['original'];_0x161b34&&(_0x5b4ff1+=':\x20'+(_0x161b34['message']||_0x161b34)),console['warn'](_0x5b4ff1),_0x51b39a(_0x5b4ff1);};if(this['_createSou'+'nd']){if(!this['_isSupport'+'ed'](_0x1de372['original'])){_0x3e2dd9('Audio\x20form'+'at\x20for\x20'+_0x1de372['original']+('\x20not\x20suppo'+'rted'));return;}this['_createSou'+'nd'](_0x1de372['load'],_0x4f4990,_0x3e2dd9);}else _0x3e2dd9(null);}['_createSou'+'nd'](_0x2d2bc6,_0x593bd8,_0x285261){if(Dl()){const _0x425b98=this['manager'];if(!_0x425b98['context']){_0x285261('Audio\x20mana'+'ger\x20has\x20no'+'\x20audio\x20con'+'text');return;}const _0x136349={'retry':this['maxRetries']>-0x178*-0x5+0x1991+0x5*-0x695,'maxRetries':this['maxRetries']};(_0x2d2bc6['startsWith']('blob:')||_0x2d2bc6['startsWith']('data:'))&&(_0x136349['responseTy'+'pe']=Ls['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']),ot['get'](_0x2d2bc6,_0x136349,(_0x39e382,_0x49f1d7)=>{if(_0x39e382){_0x285261(_0x39e382);return;}_0x425b98['context']['decodeAudi'+'oData'](_0x49f1d7,_0x593bd8,_0x285261);});}else{let _0x5026f9=null;try{_0x5026f9=new Audio();}catch{_0x285261('No\x20support'+'\x20for\x20Audio'+'\x20element');return;}Af&&document['body']['appendChil'+'d'](_0x5026f9);const _0x27b26a=function(){_0x5026f9['removeEven'+'tListener']('canplaythr'+'ough',_0x27b26a),Af&&document['body']['removeChil'+'d'](_0x5026f9),_0x593bd8(_0x5026f9);};_0x5026f9['onerror']=function(){_0x5026f9['onerror']=null,Af&&document['body']['removeChil'+'d'](_0x5026f9),_0x285261();},_0x5026f9['addEventLi'+'stener']('canplaythr'+'ough',_0x27b26a),_0x5026f9['src']=_0x2d2bc6;}}}class YN extends Qe{constructor(_0x15b0d6){super(_0x15b0d6,'binary');}['load'](_0x561920,_0x4c4046){typeof _0x561920=='string'&&(_0x561920={'load':_0x561920,'original':_0x561920}),ot['get'](_0x561920['load'],{'responseType':Ls['ResponseTy'+'pe']['ARRAY_BUFF'+'ER'],'retry':this['maxRetries']>-0x1947+-0x11*-0x1+0x39a*0x7,'maxRetries':this['maxRetries']},(_0x41db80,_0x19bfbb)=>{_0x41db80?_0x4c4046('Error\x20load'+'ing\x20binary'+'\x20resource:'+'\x20'+_0x561920['original']+'\x20['+_0x41db80+']'):_0x4c4046(null,_0x19bfbb);});}['openBinary'](_0x165cd5){return _0x165cd5['buffer'];}}class yr{constructor(_0x109223,_0x2ba958,_0x134850,_0x403a3c){const _0x4c8fce=function(_0x3f6b60,_0x7c87e7,_0x4cb0bf){const _0x47ad99=yr['createAsse'+'t'](_0x2ba958['name'],_0x3f6b60,_0x7c87e7,_0x4cb0bf);return _0x134850['add'](_0x47ad99),_0x47ad99;},_0x43d639=[];for(let _0x27229a=-0xfb+-0x3f8*-0x4+-0x7b*0x1f;_0x27229a<_0x109223['renders']['length'];++_0x27229a)_0x43d639['push'](_0x4c8fce('render',_0x109223['renders'][_0x27229a],_0x27229a));const _0x41c2ba=[];for(let _0x447a7b=0xff0+0x2510+-0x80*0x6a;_0x447a7b<_0x109223['materials']['length'];++_0x447a7b)_0x41c2ba['push'](_0x4c8fce('material',_0x109223['materials'][_0x447a7b],_0x447a7b));const _0x18a052=[];for(let _0x2a1ce9=0x52*-0x5d+-0x1b5d+0x3927*0x1;_0x2a1ce9<_0x109223['animations']['length'];++_0x2a1ce9)_0x18a052['push'](_0x4c8fce('animation',_0x109223['animations'][_0x2a1ce9],_0x2a1ce9));this['data']=_0x109223,this['_model']=null,this['_assetName']=_0x2ba958['name'],this['_assets']=_0x134850,this['_defaultMa'+'terial']=_0x403a3c,this['renders']=_0x43d639,this['materials']=_0x41c2ba,this['textures']=_0x109223['textures'],this['animations']=_0x18a052;}get['model'](){if(!this['_model']){const _0x526428=yr['createMode'+'l'](this['data'],this['_defaultMa'+'terial']),_0x12bd16=yr['createAsse'+'t'](this['_assetName'],'model',_0x526428,-0x1319+-0x20c3+-0x1*-0x33dc);this['_assets']['add'](_0x12bd16),this['_model']=_0x12bd16;}return this['_model'];}static['createAsse'+'t'](_0x230d36,_0x284c54,_0x2afe16,_0x460648){const _0x367324=new pe(_0x230d36+'/'+_0x284c54+'/'+_0x460648,_0x284c54,{'url':''});return _0x367324['resource']=_0x2afe16,_0x367324['loaded']=!(0xb9+-0x2401+0x469*0x8),_0x367324;}['instantiat'+'eModelEnti'+'ty'](_0x5ea26b){const _0x553fe0=new lt(void(0xa30+-0x5fb*0x5+0x13b7),this['_assets']['_loader']['_app']);return _0x553fe0['addCompone'+'nt']('model',Object['assign']({'type':'asset','asset':this['model']},_0x5ea26b)),_0x553fe0;}['instantiat'+'eRenderEnt'+'ity'](_0x5dee51){const _0x504eb5=this['_defaultMa'+'terial'],_0x40b2f2=[],_0x5c59bf=function(_0x16ed06,_0x37fc8d,_0x33b24b,_0x29c5e8,_0x4ba879,_0x5ed7d8,_0x29b810,_0x50dcb8){const _0x398651=_0x4ba879[_0x33b24b['id']],_0x5d4eaf=_0x398651===void(-0x8d*0x33+-0x4d9+0x20f0)?_0x504eb5:_0x29c5e8[_0x398651],_0x44dd60=new He(_0x33b24b,_0x5d4eaf);_0x33b24b['morph']&&(_0x44dd60['morphInsta'+'nce']=new xa(_0x33b24b['morph'])),_0x29b810['hasOwnProp'+'erty']('skin')&&_0x40b2f2['push']({'meshInstance':_0x44dd60,'rootBone':_0x16ed06,'entity':_0x37fc8d});const _0x2552b1=_0x50dcb8['get'](_0x29b810);if(_0x2552b1){const _0x17e213=_0x2552b1['matrices'],_0x1c6323=kt['getDefault'+'Instancing'+'Format'](_0x33b24b['device']),_0x46d5a4=new Is(_0x33b24b['device'],_0x1c6323,_0x17e213['length']/(-0x1*-0x13cc+-0x1849*0x1+0x1*0x48d),{'data':_0x17e213});_0x44dd60['setInstanc'+'ing'](_0x46d5a4),_0x44dd60['instancing'+'Data']['_destroyVe'+'rtexBuffer']=!(0x13f+-0xa8b*0x1+0x2*0x4a6);}return _0x44dd60;},_0xc01843=(_0x3193e4,_0x22c797,_0x5531f1)=>{const _0x3debe6=new lt(void(0x94*0x11+-0x1*0x242+-0x792),this['_assets']['_loader']['_app']);_0x22c797['_cloneInte'+'rnal'](_0x3debe6),_0x3193e4||(_0x3193e4=_0x3debe6);let _0x32fcff=null,_0x4a552d=null;for(let _0x11ac4f=0x23b+-0x55*-0x6d+-0x2*0x1336;_0x11ac4f<_0x5531f1['nodes']['length'];_0x11ac4f++)if(_0x5531f1['nodes'][_0x11ac4f]===_0x22c797){const _0x83c6c2=_0x5531f1['gltf']['nodes'][_0x11ac4f];if(_0x83c6c2['hasOwnProp'+'erty']('mesh')){const _0x362158=_0x5531f1['renders'][_0x83c6c2['mesh']]['meshes'];_0x4a552d=this['renders'][_0x83c6c2['mesh']];for(let _0x5825e6=0x23ed+-0x24ec+0xff;_0x5825e6<_0x362158['length'];_0x5825e6++){const _0x1bc549=_0x362158[_0x5825e6];if(_0x1bc549){const _0x178ee4=_0x5c59bf(_0x3193e4,_0x3debe6,_0x1bc549,_0x5531f1['materials'],_0x5531f1['meshDefaul'+'tMaterials'],_0x5531f1['skins'],_0x83c6c2,_0x5531f1['nodeInstan'+'cingMap']);_0x32fcff||(_0x32fcff=[]),_0x32fcff['push'](_0x178ee4);}}}if(_0x5531f1['lights']){const _0x18b586=_0x5531f1['lights']['get'](_0x83c6c2);_0x18b586&&_0x3debe6['addChild'](_0x18b586['clone']());}if(_0x5531f1['cameras']){const _0x3d6c60=_0x5531f1['cameras']['get'](_0x83c6c2);_0x3d6c60&&_0x3d6c60['camera']['system']['cloneCompo'+'nent'](_0x3d6c60,_0x3debe6);}}_0x32fcff&&(_0x3debe6['addCompone'+'nt']('render',Object['assign']({'type':'asset','meshInstances':_0x32fcff},_0x5dee51)),_0x3debe6['render']['assignAsse'+'t'](_0x4a552d));const _0x48b72c=_0x22c797['children'];for(let _0x5bb95c=-0x2690+0x23ae+0x3*0xf6;_0x5bb95c<_0x48b72c['length'];_0x5bb95c++){const _0x4e7284=_0xc01843(_0x3193e4,_0x48b72c[_0x5bb95c],_0x5531f1);_0x3debe6['addChild'](_0x4e7284);}return _0x3debe6;},_0x1eae68=[];for(const _0x53986b of this['data']['scenes'])_0x1eae68['push'](_0xc01843(null,_0x53986b,this['data']));return _0x40b2f2['forEach'](_0x5de0d4=>{_0x5de0d4['meshInstan'+'ce']['skinInstan'+'ce']=_l['createCach'+'edSkinInst'+'ance'](_0x5de0d4['meshInstan'+'ce']['mesh']['skin'],_0x5de0d4['rootBone'],_0x5de0d4['entity']),_0x5de0d4['meshInstan'+'ce']['node']['render']['rootBone']=_0x5de0d4['rootBone'];}),yr['createScen'+'eHierarchy'](_0x1eae68,lt);}['getMateria'+'lVariants'](){return this['data']['variants']?Object['keys'](this['data']['variants']):[];}['applyMater'+'ialVariant'](_0x545460,_0x3c0199){const _0x5a8252=_0x3c0199?this['data']['variants'][_0x3c0199]:null;if(_0x5a8252===void(0x28*-0x5d+0x1bc*0x9+-0x114)){w['warn']('No\x20variant'+'\x20named\x20'+_0x3c0199+('\x20exists\x20in'+'\x20resource'));return;}const _0x49829a=_0x545460['findCompon'+'ents']('render');for(let _0x2b6472=-0x1*-0xd4e+0x2*0x12c4+0x5a6*-0x9;_0x2b6472<_0x49829a['length'];_0x2b6472++){const _0x206e9a=_0x49829a[_0x2b6472];this['_applyMate'+'rialVarian'+'t'](_0x5a8252,_0x206e9a['meshInstan'+'ces']);}}['applyMater'+'ialVariant'+'Instances'](_0x5377aa,_0x295edf){const _0x5ee161=_0x295edf?this['data']['variants'][_0x295edf]:null;if(_0x5ee161===void(0x7f*-0x49+0xd20+0x1*0x1717)){w['warn']('No\x20variant'+'\x20named\x20'+_0x295edf+('\x20exists\x20in'+'\x20resource'));return;}this['_applyMate'+'rialVarian'+'t'](_0x5ee161,_0x5377aa);}['_applyMate'+'rialVarian'+'t'](_0x115836,_0x214268){_0x214268['forEach'](_0x3b7838=>{if(_0x115836===null)_0x3b7838['material']=this['_defaultMa'+'terial'];else{const _0x1a8136=this['data']['meshVarian'+'ts'][_0x3b7838['mesh']['id']];_0x1a8136&&(_0x3b7838['material']=this['data']['materials'][_0x1a8136[_0x115836]]);}w['assert'](_0x3b7838['material']);});}static['createScen'+'eHierarchy'](_0x35fdc9,_0x3b1f20){let _0x557f0e=null;if(_0x35fdc9['length']===0x17ac+-0x2*-0xaae+-0x1*0x2d07)_0x557f0e=_0x35fdc9[0x2653+-0x6ca+0x45*-0x75];else{_0x557f0e=new _0x3b1f20('SceneGroup');for(const _0x5bdd3f of _0x35fdc9)_0x557f0e['addChild'](_0x5bdd3f);}return _0x557f0e;}static['createMode'+'l'](_0x20b009,_0xc99e4c){const _0x11e79e=function(_0x5f062b,_0x592ebb,_0x31f1b2,_0x216c15,_0x51cc9d,_0x3b1e71,_0x4d5049){const _0x25b500=_0x20b009['meshDefaul'+'tMaterials'][_0x592ebb['id']],_0x394423=_0x25b500===void(0xd*0x160+-0x1*-0x2623+-0x3803)?_0xc99e4c:_0x51cc9d[_0x25b500],_0x6b1bde=new He(_0x592ebb,_0x394423,_0x3b1e71);if(_0x592ebb['morph']){const _0x55f10a=new xa(_0x592ebb['morph']);_0x6b1bde['morphInsta'+'nce']=_0x55f10a,_0x5f062b['morphInsta'+'nces']['push'](_0x55f10a);}if(_0x4d5049['hasOwnProp'+'erty']('skin')){const _0x292eb0=_0x4d5049['skin'],_0x1a3942=_0x31f1b2[_0x292eb0];_0x592ebb['skin']=_0x1a3942;const _0x280991=_0x216c15[_0x292eb0];_0x6b1bde['skinInstan'+'ce']=_0x280991,_0x5f062b['skinInstan'+'ces']['push'](_0x280991);}_0x5f062b['meshInstan'+'ces']['push'](_0x6b1bde);},_0x1e0810=new sr(),_0x3aad60=[];for(const _0x1ae1d2 of _0x20b009['skins']){const _0x5125c6=new Ol(_0x1ae1d2);_0x5125c6['bones']=_0x1ae1d2['bones'],_0x3aad60['push'](_0x5125c6);}_0x1e0810['graph']=yr['createScen'+'eHierarchy'](_0x20b009['scenes'],Ie);for(let _0x3379dd=0x1*0x1f25+0xdc6*0x1+0x3*-0xef9;_0x3379dd<_0x20b009['nodes']['length'];_0x3379dd++){const _0x56420a=_0x20b009['nodes'][_0x3379dd];if(_0x56420a['root']===_0x1e0810['graph']){const _0x39d51e=_0x20b009['gltf']['nodes'][_0x3379dd];if(_0x39d51e['hasOwnProp'+'erty']('mesh')){const _0x10b54a=_0x20b009['renders'][_0x39d51e['mesh']]['meshes'];for(let _0x1a6057=-0x1*-0xbab+-0x9ce*0x2+0x7f1;_0x1a6057<_0x10b54a['length'];_0x1a6057++){const _0xd9ec51=_0x10b54a[_0x1a6057];_0xd9ec51&&_0x11e79e(_0x1e0810,_0xd9ec51,_0x20b009['skins'],_0x3aad60,_0x20b009['materials'],_0x56420a,_0x39d51e);}}}}return _0x1e0810;}['destroy'](){const _0x931e52=this['_assets'],_0x130520=function(_0x22dba7){_0x931e52['remove'](_0x22dba7),_0x22dba7['unload']();},_0x352d9d=function(_0x22a3c6){_0x22a3c6['forEach'](_0xf58a31=>{_0x130520(_0xf58a31);});};this['animations']&&(_0x352d9d(this['animations']),this['animations']=null),this['textures']&&(_0x352d9d(this['textures']),this['textures']=null),this['materials']&&(_0x352d9d(this['materials']),this['materials']=null),this['renders']&&(_0x352d9d(this['renders']),this['renders']=null),this['_model']&&(_0x130520(this['_model']),this['_model']=null),this['data']=null,this['assets']=null;}}class KN{constructor(_0xc9a756,_0x271366,_0x5eb593){this['_device']=_0xc9a756,this['_assets']=_0x271366,this['_defaultMa'+'terial']=kh['createDefa'+'ultMateria'+'l'](),this['maxRetries']=_0x5eb593;}['_getUrlWit'+'houtParams'](_0x2211af){return _0x2211af['indexOf']('?')>=0x137*-0x5+0x2e*-0x6b+0x194d?_0x2211af['split']('?')[-0x1290+-0xb77*0x1+0x1e07]:_0x2211af;}['load'](_0x31bbbb,_0x8ec028,_0x2e3695){pe['fetchArray'+'Buffer'](_0x31bbbb['load'],(_0x21fa66,_0x31e83c)=>{_0x21fa66?_0x8ec028(_0x21fa66):kh['parse'](this['_getUrlWit'+'houtParams'](_0x31bbbb['original']),xe['extractPat'+'h'](_0x31bbbb['load']),_0x31e83c,this['_device'],_0x2e3695['registry'],_0x2e3695['options'],(_0x5c9667,_0x4b882f)=>{_0x5c9667?_0x8ec028(_0x5c9667):_0x8ec028(null,new yr(_0x4b882f,_0x2e3695,this['_assets'],this['_defaultMa'+'terial']));});},_0x2e3695,this['maxRetries']);}['open'](_0x59977b,_0x587258,_0x674a98){return _0x587258;}['patch'](_0x535b64,_0x427d13){}}class ZN extends Qe{constructor(_0x4f32bd){super(_0x4f32bd,'container'),this['glbContain'+'erParser']=new KN(_0x4f32bd['graphicsDe'+'vice'],_0x4f32bd['assets'],-0x1c*-0x48+0xae8+-0x12c8),this['parsers']={};}set['maxRetries'](_0x45aa4b){this['glbContain'+'erParser']['maxRetries']=_0x45aa4b;for(const _0x3b3710 in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x3b3710)&&(this['parsers'][_0x3b3710]['maxRetries']=_0x45aa4b);}get['maxRetries'](){return this['glbContain'+'erParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x3cbf19){return _0x3cbf19['indexOf']('?')>=0x264b*0x1+0xe72*-0x2+0x967*-0x1?_0x3cbf19['split']('?')[0x2044+-0x1146+-0x65*0x26]:_0x3cbf19;}['_getParser'](_0x5cc747){const _0x115cfe=_0x5cc747?xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x5cc747))['toLowerCas'+'e']()['replace']('.',''):null;return this['parsers'][_0x115cfe]||this['glbContain'+'erParser'];}['load'](_0x2e76ad,_0x202258,_0x46b03b){typeof _0x2e76ad=='string'&&(_0x2e76ad={'load':_0x2e76ad,'original':_0x2e76ad}),this['_getParser'](_0x2e76ad['original'])['load'](_0x2e76ad,_0x202258,_0x46b03b);}['open'](_0x33d04,_0x1fea10,_0x26089d){return this['_getParser'](_0x33d04)['open'](_0x33d04,_0x1fea10,_0x26089d);}}class QN extends Qe{constructor(_0x7e7a3){super(_0x7e7a3,'css'),h(this,'decoder',null);}['load'](_0x469e24,_0x2a8e54){typeof _0x469e24=='string'&&(_0x469e24={'load':_0x469e24,'original':_0x469e24}),ot['get'](_0x469e24['load'],{'retry':this['maxRetries']>-0x29b+0xb71*-0x2+0x197d,'maxRetries':this['maxRetries']},(_0xbe4f95,_0x587ffb)=>{_0xbe4f95?_0x2a8e54('Error\x20load'+'ing\x20css\x20re'+'source:\x20'+_0x469e24['original']+'\x20['+_0xbe4f95+']'):_0x2a8e54(null,_0x587ffb);});}['openBinary'](_0x592041){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x592041);}}class JN extends Qe{constructor(_0x1c9046){super(_0x1c9046,'cubemap'),this['_device']=_0x1c9046['graphicsDe'+'vice'],this['_registry']=_0x1c9046['assets'],this['_loader']=_0x1c9046['loader'];}['load'](_0x42663c,_0x445aa3,_0x1348d6){this['loadAssets'](_0x1348d6,_0x445aa3);}['open'](_0x55fa8e,_0xaec632,_0x670605){return _0x670605?_0x670605['resource']:null;}['patch'](_0x57329b,_0x250059){this['loadAssets'](_0x57329b,(_0xe4886a,_0x35e1d6)=>{_0xe4886a&&(_0x250059['fire']('error',_0x57329b),_0x250059['fire']('error:'+_0x57329b['id'],_0xe4886a,_0x57329b),_0x57329b['fire']('error',_0x57329b));});}['getAssetId'+'s'](_0x30b445){const _0x39411c=[];if(_0x39411c[0x77b*0x1+-0x3*-0x61+-0x89e]=_0x30b445['file'],(_0x30b445['loadFaces']||!_0x30b445['file'])&&_0x30b445['data']&&_0x30b445['data']['textures']){for(let _0x505394=-0x25c9+-0x231e+0x48e7;_0x505394<0x664+-0x4*0x8b5+0xe3b*0x2;++_0x505394)_0x39411c[_0x505394+(-0x3*-0x365+0x1b04+-0x2532)]=_0x30b445['data']['textures'][_0x505394];}else _0x39411c[0x3*0xaa2+0x3b*0xd+-0x22e4]=_0x39411c[0x1215*-0x2+0x1c67*0x1+-0x297*-0x3]=_0x39411c[-0x695*-0x3+-0x65*-0x4c+-0x4a*0xac]=_0x39411c[0x1*-0x1463+-0x8*0x9e+-0x1f3*-0xd]=_0x39411c[0x1cb*0x2+-0x1d32+0x19a1]=_0x39411c[-0x1f85+-0x2009*0x1+-0x1*-0x3f94]=null;return _0x39411c;}['compareAss'+'etIds'](_0x579729,_0x16dd06){return _0x579729&&_0x16dd06?parseInt(_0x579729,0x2115+-0x26a5*0x1+0x59a)===_0x579729||typeof _0x579729=='string'?_0x579729===_0x16dd06:_0x579729['url']===_0x16dd06['url']:_0x579729!==null==(_0x16dd06!==null);}['update'](_0x5bae01,_0x4d0efd,_0x23120c){const _0x54f8fe=_0x5bae01['data']||{},_0x5b8279=_0x5bae01['_handlerSt'+'ate']['assets'],_0x1ea8a2=_0x5bae01['_resources'];let _0x373b9e,_0x231ccb,_0x24ac81;const _0x3bca59=[null,null,null,null,null,null,null],_0xde3821=function(){return _0x54f8fe['hasOwnProp'+'erty']('type')?_0x54f8fe['type']:_0x54f8fe['hasOwnProp'+'erty']('rgbm')?_0x54f8fe['rgbm']?Zi:Ds:null;};if(!_0x5bae01['loaded']||_0x23120c[-0xf4a*-0x1+-0x2bd+-0xc8d]!==_0x5b8279[0x22be+-0x1840+0x2*-0x53f]){if(_0x23120c[-0x1edd+-0x85*-0x33+0x45e]){if(_0x373b9e=_0x23120c[-0xb*0x301+0x1d45*0x1+0x3c6]['resource'],_0x373b9e['cubemap']){for(_0x24ac81=-0x8*-0xb2+0x12d1+-0x1861;_0x24ac81<-0xd21*0x2+-0x324+0x1c*0x10d;++_0x24ac81)_0x3bca59[_0x24ac81+(0xcb3+0x22f*0x1+0x125*-0xd)]=new _e(this['_device'],{'name':_0x5bae01['name']+('_prelitCub'+'emap')+(_0x373b9e['width']>>_0x24ac81),'cubemap':!(0x115c+-0x1de1+-0xc85*-0x1),'type':_0xde3821()||_0x373b9e['type'],'width':_0x373b9e['width']>>_0x24ac81,'height':_0x373b9e['height']>>_0x24ac81,'format':_0x373b9e['format'],'levels':[_0x373b9e['_levels'][_0x24ac81]],'addressU':ue,'addressV':ue,'mipmaps':_0x24ac81===-0xcc9+-0x91f*0x3+-0x2*-0x1413});}else _0x3bca59[0x2144+0x1*-0xbe3+-0x72*0x30]=_0x373b9e;}}else _0x3bca59[0x444+-0x11fc+-0x493*-0x3]=_0x1ea8a2[0x52c*-0x4+0x61*0x4+-0x1*-0x132d]||null,_0x3bca59[0x59d+0x1692+-0x1c2d]=_0x1ea8a2[-0x2bd+-0x335*0x1+-0x7f*-0xc]||null,_0x3bca59[0x159f+-0x977+-0xc25*0x1]=_0x1ea8a2[-0x3*-0x6f7+-0xd9+0x17*-0xdf]||null,_0x3bca59[0x35f*-0x8+-0x10bf+0x2bbb]=_0x1ea8a2[-0x20*-0x23+0x857+-0xcb3*0x1]||null,_0x3bca59[-0xc62+-0x12aa+0x1f11]=_0x1ea8a2[-0x1fca+-0x83e+-0x1*-0x280d]||null,_0x3bca59[-0x1*-0x1985+0x2531+-0x3eb0]=_0x1ea8a2[-0x167*-0x13+-0x933+0xa*-0x1be]||null;const _0x2b014c=_0x23120c['slice'](-0x7a2+0x1d27+-0x6c*0x33);if(!_0x5bae01['loaded']||!this['cmpArrays'](_0x2b014c,_0x5b8279['slice'](0xbb9+0x1*-0x2189+0x15d1))){if(_0x2b014c['indexOf'](null)===-(-0xbf*-0x2f+0x461*0x4+-0x1a4a*0x2)){const _0x3613d9=_0x2b014c['map'](_0x44fcdd=>_0x44fcdd['resource']),_0x10e6f7=[];for(_0x231ccb=0x17c7+-0x5*-0x329+-0x2794;_0x231ccb<_0x3613d9[0x2*-0x17e+0x11c1+-0xec5]['_levels']['length'];++_0x231ccb)_0x10e6f7['push'](_0x3613d9['map'](_0x3c71b4=>_0x3c71b4['_levels'][_0x231ccb]));const _0x42a94b=_0x3613d9[0xf2c+0x1adc+-0x2a08]['format'],_0x444891=new _e(this['_device'],{'name':_0x5bae01['name']+'_faces','cubemap':!(-0x27f*-0x3+0xe2*-0x2+-0x5b9*0x1),'type':_0xde3821()||_0x3613d9[-0x3*0x463+0x346*0xb+-0x16d9]['type'],'width':_0x3613d9[0x7*0x4b0+0xf1*0x19+0x19*-0x241]['width'],'height':_0x3613d9[0x3b*0x7c+-0x8*-0x53+0x31e*-0xa]['height'],'format':_0x42a94b===Cr?Ne:_0x42a94b,'mipmaps':_0x54f8fe['mipmaps']??!(-0x3*0x180+0x11b0+0x1*-0xd30),'levels':_0x10e6f7,'minFilter':_0x54f8fe['hasOwnProp'+'erty']('minFilter')?_0x54f8fe['minFilter']:_0x3613d9[-0x59*0x5+-0x17e6+0x19a3]['minFilter'],'magFilter':_0x54f8fe['hasOwnProp'+'erty']('magFilter')?_0x54f8fe['magFilter']:_0x3613d9[-0x7*-0x1bb+0xf65+-0x2*0xdc1]['magFilter'],'anisotropy':_0x54f8fe['hasOwnProp'+'erty']('anisotropy')?_0x54f8fe['anisotropy']:-0x164d+0x15*-0x18b+-0xaf1*-0x5,'addressU':ue,'addressV':ue});_0x3bca59[-0x18d1+0x1ea+0x16e7]=_0x444891;}}else _0x3bca59[-0x1f2a+-0x775+-0x1*-0x269f]=_0x1ea8a2[-0x1*0x556+0x1810+-0x12ba]||null;if(!this['cmpArrays'](_0x3bca59,_0x1ea8a2)){for(_0x5bae01['resources']=_0x3bca59,_0x5bae01['_handlerSt'+'ate']['assetIds']=_0x4d0efd,_0x5bae01['_handlerSt'+'ate']['assets']=_0x23120c,_0x24ac81=-0x12b3*0x1+0x12f5+-0x6*0xb;_0x24ac81<_0x1ea8a2['length'];++_0x24ac81)_0x1ea8a2[_0x24ac81]!==null&&_0x3bca59['indexOf'](_0x1ea8a2[_0x24ac81])===-(0xacd+0xa84+-0x1550)&&_0x1ea8a2[_0x24ac81]['destroy']();}for(_0x24ac81=-0x1*-0x6a9+0x4*-0x466+0xaef;_0x24ac81<_0x5b8279['length'];++_0x24ac81)_0x5b8279[_0x24ac81]!==null&&_0x23120c['indexOf'](_0x5b8279[_0x24ac81])===-(0x18c0+-0x8*-0x3c+-0x1a9f*0x1)&&_0x5b8279[_0x24ac81]['unload']();}['cmpArrays'](_0x27df76,_0x3e93c7){if(_0x27df76['length']!==_0x3e93c7['length'])return!(-0x238f*-0x1+0xbd*-0x19+-0x1119);for(let _0x16d95a=0x12b*-0x3+-0xfc8+0x1*0x1349;_0x16d95a<_0x27df76['length'];++_0x16d95a)if(_0x27df76[_0x16d95a]!==_0x3e93c7[_0x16d95a])return!(0x16bb+0x19f3+-0x30ad);return!(0x3*0xb4f+0x21b*0x2+0xd*-0x2ef);}['resolveId'](_0x357022){const _0x31e9e0=parseInt(_0x357022,-0x4f1+0x481+0x2*0x3d);return _0x31e9e0===_0x357022||_0x31e9e0['toString']()===_0x357022?_0x31e9e0:_0x357022;}['loadAssets'](_0x27d5c4,_0x27554f){_0x27d5c4['hasOwnProp'+'erty']('_handlerSt'+'ate')||(_0x27d5c4['_handlerSt'+'ate']={'assetIds':[null,null,null,null,null,null,null],'assets':[null,null,null,null,null,null,null]});const _0x12320a=this,_0x3d6244=_0x12320a['getAssetId'+'s'](_0x27d5c4),_0x5e92a0=[null,null,null,null,null,null,null],_0xea5a3=_0x27d5c4['_handlerSt'+'ate']['assetIds'],_0x47d3d6=_0x27d5c4['_handlerSt'+'ate']['assets'],_0x42a06a=_0x12320a['_registry'];let _0x2fe9d2=-0x173e+0x1a+-0x3*-0x7b9;const _0x2749d9=function(_0x301502,_0x5da74a){_0x5e92a0[_0x301502]=_0x5da74a,_0x2fe9d2--,_0x2fe9d2===-0xd*-0x7+0x7a4+-0x7ff*0x1&&(_0x12320a['update'](_0x27d5c4,_0x3d6244,_0x5e92a0),_0x27554f(null,_0x27d5c4['resources']));},_0x1cc225=function(_0x3c5353,_0x47d2f8,_0x1f5f18){_0x27554f(_0x47d2f8);},_0x43337f=function(_0x1b5ec1,_0x48d7f8){_0x48d7f8['loaded']?_0x2749d9(_0x1b5ec1,_0x48d7f8):(_0x42a06a['once']('load:'+_0x48d7f8['id'],_0x2749d9['bind'](_0x12320a,_0x1b5ec1)),_0x42a06a['once']('error:'+_0x48d7f8['id'],_0x1cc225['bind'](_0x12320a,_0x1b5ec1)),_0x48d7f8['loading']||_0x42a06a['load'](_0x48d7f8));};let _0x143e53;for(let _0x481292=0x10b0+-0x1e29+0x1*0xd79;_0x481292<-0x1*-0x2690+-0x3*-0x52f+-0x2*0x1b0b;++_0x481292){const _0x30e11f=this['resolveId'](_0x3d6244[_0x481292]);if(!_0x30e11f)_0x2749d9(_0x481292,null);else{if(_0x12320a['compareAss'+'etIds'](_0x30e11f,_0xea5a3[_0x481292]))_0x43337f(_0x481292,_0x47d3d6[_0x481292]);else{if(parseInt(_0x30e11f,0x1394+-0x270f+-0x107*-0x13)===_0x30e11f)_0x143e53=_0x42a06a['get'](_0x30e11f),_0x143e53?_0x43337f(_0x481292,_0x143e53):setTimeout(((_0x2a0e6b,_0x2f3f48)=>{const _0x4e5899=_0x42a06a['get'](_0x2f3f48);_0x4e5899?_0x43337f(_0x2a0e6b,_0x4e5899):_0x1cc225(_0x2a0e6b,'failed\x20to\x20'+'find\x20depen'+'dent\x20cubem'+'ap\x20asset='+_0x2f3f48);})['bind'](null,_0x481292,_0x30e11f));else{const _0xe7293c=typeof _0x30e11f=='string'?{'url':_0x30e11f,'filename':_0x30e11f}:_0x30e11f,_0x4b69d4=_0xe7293c['url']['search']('.dds')===-(0x5c+0x1*0x3af+-0x205*0x2)?{'type':'rgbp','addressu':'clamp','addressv':'clamp','mipmaps':!(-0x14ba+-0x13dd+-0xa26*-0x4)}:null;_0x143e53=new pe(_0x27d5c4['name']+'_part_'+_0x481292,'texture',_0xe7293c,_0x4b69d4),_0x42a06a['add'](_0x143e53),_0x43337f(_0x481292,_0x143e53);}}}}}}class ek extends Qe{constructor(_0x3b9772){super(_0x3b9772,'folder');}['load'](_0x33a2f1,_0x51adfe){_0x51adfe(null,null);}}class yS{constructor(_0x12b08d,_0x1c4629){this['type']=_0x1c4629&&_0x1c4629['type']||Rh,this['em']=-0x1*-0x149f+-0xd21*0x2+-0x169*-0x4,this['textures']=_0x12b08d,this['intensity']=0x12f0+0x11*-0x2c+-0xa*0x19a,this['_data']=null,this['data']=_0x1c4629;}set['data'](_0x354051){if(this['_data']=_0x354051,!!_0x354051&&(this['_data']['intensity']!==void(-0x11*-0xd+-0x1a61+0x1*0x1984)&&(this['intensity']=this['_data']['intensity']),this['_data']['info']||(this['_data']['info']={}),(!this['_data']['version']||this['_data']['version']<0x15b9*0x1+-0xdcd*-0x1+-0x2384)&&(this['_data']['info']['maps']=[{'width':this['_data']['info']['width'],'height':this['_data']['info']['height']}],this['_data']['chars']))){for(const _0x2bcf60 in this['_data']['chars'])this['_data']['chars'][_0x2bcf60]['map']=-0x7c9*0x1+-0x127a+0x1b*0xf9;}}get['data'](){return this['_data'];}}function Cf(_0x498ab6){return _0x498ab6['version']<0x162a+0x1be9+-0x3210&&(_0x498ab6['version']<-0x15be+0x120+0x294*0x8&&(_0x498ab6['info']['maps']=_0x498ab6['info']['maps']||[{'width':_0x498ab6['info']['width'],'height':_0x498ab6['info']['height']}]),_0x498ab6['chars']=Object['keys'](_0x498ab6['chars']||{})['reduce']((_0x2f2851,_0x1e80be)=>{const _0x2496ce=_0x498ab6['chars'][_0x1e80be],_0x1b2e12=_0x2496ce['letter']!==void(0x1893+0x1bc6+-0x3459*0x1)?_0x2496ce['letter']:Hc['fromCodePo'+'int'](_0x1e80be);return _0x498ab6['version']<-0xe9*0x22+-0x1d99+-0x1*-0x3c8d&&(_0x2496ce['map']=_0x2496ce['map']||-0x24f9+-0x1529+0xe*0x427),_0x2f2851[_0x1b2e12]=_0x2496ce,_0x2f2851;},{}),_0x498ab6['version']=0x1*-0x1fb9+-0x2270*0x1+0x422c),_0x498ab6;}class tk extends Qe{constructor(_0x371cee){super(_0x371cee,'font'),this['_loader']=_0x371cee['loader'],this['maxRetries']=0x107b+0x1807*-0x1+0x78c;}['load'](_0x348171,_0x125fe3,_0x442e14){typeof _0x348171=='string'&&(_0x348171={'load':_0x348171,'original':_0x348171});const _0x411109=this;xe['getExtensi'+'on'](_0x348171['original'])==='.json'?ot['get'](_0x348171['load'],{'retry':this['maxRetries']>0x32*-0x1+-0x478*0x8+0x6b*0x56,'maxRetries':this['maxRetries']},(_0x2f7e5f,_0x24ed07)=>{if(_0x2f7e5f)_0x125fe3('Error\x20load'+'ing\x20font\x20r'+'esource:\x20'+_0x348171['original']+'\x20['+_0x2f7e5f+']');else{const _0x32dc35=Cf(_0x24ed07);_0x411109['_loadTextu'+'res'](_0x348171['load']['replace']('.json','.png'),_0x32dc35,(_0x5b0444,_0x1a98d3)=>{_0x5b0444?_0x125fe3(_0x5b0444):_0x125fe3(null,{'data':_0x32dc35,'textures':_0x1a98d3});});}}):(_0x442e14&&_0x442e14['data']&&(_0x442e14['data']=Cf(_0x442e14['data'])),this['_loadTextu'+'res'](_0x348171['load'],_0x442e14&&_0x442e14['data'],_0x125fe3));}['_loadTextu'+'res'](_0x58cbc3,_0x5847ab,_0x15ffe7){const _0x3feae9=_0x5847ab['info']['maps']['length'];let _0x5aacc6=-0x53b+0x1e7a+0x1*-0x193f,_0x4be7d9=null;const _0x3563e0=new Array(_0x3feae9),_0x37aa76=this['_loader'],_0x1193b8=function(_0x95709e){const _0x17683c=function(_0x3585ad,_0x465045){if(!_0x4be7d9){if(_0x3585ad){_0x4be7d9=_0x3585ad,_0x15ffe7(_0x3585ad);return;}_0x465045['upload'](),_0x3563e0[_0x95709e]=_0x465045,_0x5aacc6++,_0x5aacc6===_0x3feae9&&_0x15ffe7(null,_0x3563e0);}};_0x95709e===0x9c8+-0x614*0x5+0x4*0x527?_0x37aa76['load'](_0x58cbc3,'texture',_0x17683c):_0x37aa76['load'](_0x58cbc3['replace']('.png',_0x95709e+'.png'),'texture',_0x17683c);};for(let _0x101520=0x13*-0x1f3+0x2f*-0xa3+0x42f6;_0x101520<_0x3feae9;_0x101520++)_0x1193b8(_0x101520);}['open'](_0xfbb54e,_0x43f888,_0x38386b){let _0x2746b5;return _0x43f888['textures']?_0x2746b5=new yS(_0x43f888['textures'],_0x43f888['data']):_0x2746b5=new yS(_0x43f888,null),_0x2746b5;}['patch'](_0x5ad3b0,_0x6188c1){const _0x43d7a3=_0x5ad3b0['resource'];!_0x43d7a3['data']&&_0x5ad3b0['data']?_0x43d7a3['data']=_0x5ad3b0['data']:!_0x5ad3b0['data']&&_0x43d7a3['data']&&(_0x5ad3b0['data']=_0x43d7a3['data']),_0x5ad3b0['data']&&(_0x5ad3b0['data']=Cf(_0x5ad3b0['data']));}}async function sk(){const _0xc2de9a=-0x1475+-0x4d5*-0x7+-0xd5e+0.28209479177387814;class _0xfdb39e{constructor(_0x1e46ba,_0x26e805,_0x5b78e9){this['x']=_0x1e46ba,this['y']=_0x26e805,this['z']=_0x5b78e9;}}class _0x28b462{constructor(_0xa4f07f,_0x411477,_0x1bcb1a,_0xc9fdbe){this['x']=_0xa4f07f,this['y']=_0x411477,this['z']=_0x1bcb1a,this['w']=_0xc9fdbe;}}class _0x3643f9{constructor(_0x19daaa,_0x34c8c6,_0x1b6a14,_0x5d63d1){this['x']=_0x19daaa,this['y']=_0x34c8c6,this['z']=_0x1b6a14,this['w']=_0x5d63d1;}['set'](_0x877f82,_0x252c1a,_0x2f3631,_0xaca1de){this['x']=_0x877f82,this['y']=_0x252c1a,this['z']=_0x2f3631,this['w']=_0xaca1de;}}class _0x587d68{constructor(_0x378631,_0x3910b4,_0x3a1d0b,_0x432207,_0x5d4d42,_0x5127e2,_0x160e8d,_0x56275e,_0x38cccc,_0x1a8bfc,_0x1d8af9,_0x197cf6,_0x581976,_0x3d0ba5){const _0x4b2329=(_0x44144b,_0x3d1b3e)=>{const _0x3cf9f4=(-0x175f+0x2d0+0x1490<<_0x3d1b3e)-(-0x7ec+-0x463+0xc50);return(_0x44144b&_0x3cf9f4)/_0x3cf9f4;},_0x21cf35=(_0x564ac8,_0x21a9bf)=>{_0x564ac8['x']=_0x4b2329(_0x21a9bf>>>0x4a0*-0x1+-0x128e+0x5*0x4a7,0x59*-0x1e+-0x104+0xb7d),_0x564ac8['y']=_0x4b2329(_0x21a9bf>>>0x590+0x11c9*0x1+-0x1*0x174e,0x98c+0x20b9*0x1+-0x2a3b*0x1),_0x564ac8['z']=_0x4b2329(_0x21a9bf,0xc5*-0x27+-0x15a*-0x11+0x714);},_0x6c3a07=(_0xf01878,_0x4e1dd6)=>{_0xf01878['x']=_0x4b2329(_0x4e1dd6>>>0x117*0x12+0x11*0x235+-0x390b,0x3b6+-0xe00+0xa52),_0xf01878['y']=_0x4b2329(_0x4e1dd6>>>-0x2b2*0x1+-0xf0c+0x1*0x11ce,-0xcdf*-0x3+0x1299+-0x392e),_0xf01878['z']=_0x4b2329(_0x4e1dd6>>>0xec8+0xa7*0xe+-0x3*0x7f6,-0x6*0x65b+-0x79e+0x2dc8),_0xf01878['w']=_0x4b2329(_0x4e1dd6,0x146b*0x1+0xed0+-0x2333);},_0x20c03b=(_0x40b959,_0x43092c)=>{const _0x5381f3=(0x90f*-0x3+-0x73*-0x25+0x1*0xa8f)/(Math['sqrt'](0x22c+0x109d+-0x12c7)*(-0xbd6+0x22b9*0x1+-0x16e3+0.5)),_0x56c184=(_0x4b2329(_0x43092c>>>0x16c+0x14a3+-0x15fb,0x82c+0x982+-0x11a4)-(0x1e1d+-0x12a7+-0x3*0x3d2+0.5))*_0x5381f3,_0x2abe6b=(_0x4b2329(_0x43092c>>>-0x22ab+0x1a43+0x5e*0x17,0x1727+-0x102c+-0x1*0x6f1)-(-0xfd7+0xd2c+-0x1*-0x2ab+0.5))*_0x5381f3,_0x49e2a3=(_0x4b2329(_0x43092c,0x116c+-0x24c6+0x1364)-(-0x8b5*0x2+-0x1063*-0x1+0x107+0.5))*_0x5381f3,_0x304dea=Math['sqrt'](0x347+0x6ff+-0xa45-(_0x56c184*_0x56c184+_0x2abe6b*_0x2abe6b+_0x49e2a3*_0x49e2a3));switch(_0x43092c>>>-0x576*0x5+-0x17d3+-0x1*-0x333f){case-0x23a6+-0x125f+0x3605:_0x40b959['set'](_0x56c184,_0x2abe6b,_0x49e2a3,_0x304dea);break;case 0xb05+-0x6ca+-0x43a:_0x40b959['set'](_0x304dea,_0x2abe6b,_0x49e2a3,_0x56c184);break;case 0x2e*0x31+0x24f3+-0x689*0x7:_0x40b959['set'](_0x2abe6b,_0x304dea,_0x49e2a3,_0x56c184);break;case-0x467+-0x528+-0x4c9*-0x2:_0x40b959['set'](_0x2abe6b,_0x49e2a3,_0x304dea,_0x56c184);break;}},_0x5dfa31=(_0x3f4767,_0x34d1d6,_0x3aefeb)=>_0x3f4767*(0x3fb*0x4+-0xe9*-0x4+-0x3*0x685-_0x3aefeb)+_0x34d1d6*_0x3aefeb,_0x7dc5a8=[-0x1b74+0x69b*-0x1+0xb2*0x31,-0x249+-0x2b*0x35+0xb38,-0x16bd+0x3e0*-0x8+0x35cc][_0x160e8d-(-0xa*-0x38f+-0x43*0x4d+-0xf6e)],_0x1042cc=-0xb97*0x2+0x2697+-0xf63;this['read']=_0x2eb75c=>{const _0x5e0703=Math['floor'](_0x2eb75c/(0xce*-0x4+0x1af*-0x1+0x5e7))*_0x3910b4;if(_0x56275e&&(_0x21cf35(_0x56275e,_0x3a1d0b[_0x2eb75c*_0x1042cc+(-0x2*0x34c+0x7d9*0x1+0x1*-0x141)]),_0x56275e['x']=_0x5dfa31(_0x378631[_0x5e0703+(0x942+0x1c*0xa3+-0x1b16)],_0x378631[_0x5e0703+(-0x582+0x998*0x2+-0xdab)],_0x56275e['x']),_0x56275e['y']=_0x5dfa31(_0x378631[_0x5e0703+(-0xab6+-0x1d92+0x2849)],_0x378631[_0x5e0703+(-0x1*-0x13cd+-0x16e+0x1*-0x125b)],_0x56275e['y']),_0x56275e['z']=_0x5dfa31(_0x378631[_0x5e0703+(-0x654+0x1596+0x1e8*-0x8)],_0x378631[_0x5e0703+(-0x367+0xf35+-0xbc9)],_0x56275e['z'])),_0x38cccc&&_0x20c03b(_0x38cccc,_0x3a1d0b[_0x2eb75c*_0x1042cc+(0xaff+-0x26ba*0x1+-0xdde*-0x2)]),_0x1a8bfc&&(_0x21cf35(_0x1a8bfc,_0x3a1d0b[_0x2eb75c*_0x1042cc+(0x4c2*0x3+0x1ad8+0x2*-0x148e)]),_0x1a8bfc['x']=_0x5dfa31(_0x378631[_0x5e0703+(-0x14ed+-0x21c7+0x36ba)],_0x378631[_0x5e0703+(0x174*0x6+0x2*0xf41+-0x2731)],_0x1a8bfc['x']),_0x1a8bfc['y']=_0x5dfa31(_0x378631[_0x5e0703+(-0x14f0+0x42a+0x10cd)],_0x378631[_0x5e0703+(0x97f+-0xb51+0x1dc)],_0x1a8bfc['y']),_0x1a8bfc['z']=_0x5dfa31(_0x378631[_0x5e0703+(0x143f*0x1+0x50d+0x2a*-0x9a)],_0x378631[_0x5e0703+(0x457+-0x1fe2+-0xdcb*-0x2)],_0x1a8bfc['z'])),_0x1d8af9&&(_0x6c3a07(_0x1d8af9,_0x3a1d0b[_0x2eb75c*_0x1042cc+(0x2*-0x6db+0x11dc+-0x423)]),_0x3910b4>-0xe*0x119+-0xc1a*-0x3+-0xa72*0x2&&(_0x1d8af9['x']=_0x5dfa31(_0x378631[_0x5e0703+(0x1*0x1ef5+0x1207+0x15c*-0x24)],_0x378631[_0x5e0703+(-0x3*-0x66f+0x23ed+-0x372b)],_0x1d8af9['x']),_0x1d8af9['y']=_0x5dfa31(_0x378631[_0x5e0703+(0x6f*-0x35+-0x101*-0xf+0x7f9*0x1)],_0x378631[_0x5e0703+(0x1*0x1a87+0x2697+-0x16*0x2f5)],_0x1d8af9['y']),_0x1d8af9['z']=_0x5dfa31(_0x378631[_0x5e0703+(0xd39*-0x1+0x1ff5+-0x31d*0x6)],_0x378631[_0x5e0703+(-0x1*-0x17f2+-0xbec+0x1*-0xbf5)],_0x1d8af9['z']))),_0x197cf6&&(_0x21cf35(_0x197cf6,_0x3a1d0b[_0x2eb75c*_0x1042cc+(-0x1eb5+-0x19*-0x117+-0x1*-0x37a)]),_0x197cf6['x']=_0x5dfa31(_0x378631[_0x5e0703+(0x25+0x2*0x57a+-0x1*0xb07)],_0x378631[_0x5e0703+(0x22f*-0xd+0x1b44+-0xb*-0x1c)],_0x197cf6['x']),_0x197cf6['y']=_0x5dfa31(_0x378631[_0x5e0703+(-0x2ff*0x3+-0x1f53+0x2863)],_0x378631[_0x5e0703+(0x197+-0xcc3+-0x5a1*-0x2)],_0x197cf6['y']),_0x197cf6['z']=_0x5dfa31(_0x378631[_0x5e0703+(-0x1071*0x1+0x708+0x97d)],_0x378631[_0x5e0703+(-0x196a+0x10*0x148+0x501)],_0x197cf6['z'])),_0x581976&&(_0x21cf35(_0x581976,_0x3a1d0b[_0x2eb75c*_0x1042cc+(0x82*-0x25+-0x4eb*-0x3+0x40e)]),_0x581976['x']=_0x5dfa31(_0x378631[_0x5e0703+(0x4*-0x593+0x1b59*0x1+-0x4f5)],_0x378631[_0x5e0703+(-0x103f*0x1+0xdfb+0xb*0x37)],_0x581976['x']),_0x581976['y']=_0x5dfa31(_0x378631[_0x5e0703+(-0x52c*-0x2+0x218d+-0x2bcb)],_0x378631[_0x5e0703+(0x163a+-0x1*-0x339+-0x1958)],_0x581976['y'])),_0x3d0ba5&&_0x160e8d>-0x902+0x866+0x34*0x3){const _0x146fc3=[_0x432207,_0x5d4d42,_0x5127e2];for(let _0x286e96=-0x1*0x1e1+-0x1*0x679+-0x42d*-0x2;_0x286e96<0x22d9+-0x17*0x10f+-0xa7d;++_0x286e96)for(let _0x55ea38=0x32b*-0xc+0x1*-0x24d4+-0x4ad8*-0x1;_0x55ea38<0xa40+-0x1438+0xa07;++_0x55ea38)_0x3d0ba5[_0x286e96*(-0x1*0x3af+-0x1252+0x1610)+_0x55ea38]=_0x55ea38<_0x7dc5a8?_0x146fc3[_0x286e96][_0x2eb75c*(0x70b+-0x2*-0x7d3+0x16a1*-0x1)+_0x55ea38]*((0x14f*-0x1a+-0x19d1*-0x1+0x83d)/(0x9*-0x17+-0xb0f+-0xcdd*-0x1))-(-0x1b1*-0xe+-0x1bdd+-0x2b*-0x19):-0x5e*-0x50+0xa*0x1ff+-0x9de*0x5;}};}}self['onmessage']=async _0x56fdd1=>{const {data:_0x3f83fd}=_0x56fdd1;switch(_0x3f83fd['type']){case'initWorker':break;case'decompress':_0x3a9ce1(_0x3f83fd['numSplats'],_0x3f83fd['chunkData'],_0x3f83fd['chunkSize'],_0x3f83fd['vertexData'],_0x3f83fd['shData0'],_0x3f83fd['shData1'],_0x3f83fd['shData2'],_0x3f83fd['shBands']);break;}};const _0x3a9ce1=(_0x301cdf,_0x39f3c2,_0x11ce59,_0xd17b72,_0x252e08,_0x190351,_0xefe6bd,_0x11bcf8)=>{const _0x50436e=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'];if(_0x11bcf8>-0x1*0x12b5+0x150e+0x1*-0x259){const _0x1bf2cc=[];for(let _0x161282=0xc5e*0x3+-0x222a+-0x2f0;_0x161282<0x53*0x73+0x2*-0x84+-0x2414;++_0x161282)_0x1bf2cc['push']('f_rest_'+_0x161282);_0x50436e['splice'](_0x50436e['indexOf']('f_dc_0')+(-0xb81*-0x1+-0x2172+0x15f2),-0x144c*0x1+-0xf9b*-0x1+-0x4b1*-0x1,..._0x1bf2cc);}const _0x20fa48={};_0x50436e['forEach'](_0x5397ed=>{_0x20fa48[_0x5397ed]=new Float32Array(_0x301cdf);});const _0x1debf6=new _0xfdb39e(),_0x41a0c7=new _0x3643f9(),_0x164a0f=new _0xfdb39e(),_0x457847=new _0x28b462(),_0x1347a8=new _0xfdb39e(),_0x4e4d73=new _0xfdb39e(),_0x5c09bf=_0x11bcf8>-0x26ac+0xef9+0x1*0x17b3?new Float32Array(-0xc6e+-0x469+0x16b*0xc):null,_0x2a74ea=new _0x587d68(_0x39f3c2,_0x11ce59,_0xd17b72,_0x252e08,_0x190351,_0xefe6bd,_0x11bcf8,_0x1debf6,_0x41a0c7,_0x164a0f,_0x457847,_0x1347a8,_0x4e4d73,_0x5c09bf);for(let _0x23128c=-0x1*-0x1877+0x5c7+-0x2*0xf1f;_0x23128c<_0x301cdf;++_0x23128c)if(_0x2a74ea['read'](_0x23128c),_0x20fa48['x'][_0x23128c]=_0x1debf6['x'],_0x20fa48['y'][_0x23128c]=_0x1debf6['y'],_0x20fa48['z'][_0x23128c]=_0x1debf6['z'],_0x20fa48['rot_1'][_0x23128c]=_0x41a0c7['x'],_0x20fa48['rot_2'][_0x23128c]=_0x41a0c7['y'],_0x20fa48['rot_3'][_0x23128c]=_0x41a0c7['z'],_0x20fa48['rot_0'][_0x23128c]=_0x41a0c7['w'],_0x20fa48['scale_0'][_0x23128c]=_0x164a0f['x'],_0x20fa48['scale_1'][_0x23128c]=_0x164a0f['y'],_0x20fa48['scale_2'][_0x23128c]=_0x164a0f['z'],_0x20fa48['motion_0'][_0x23128c]=_0x1347a8['x'],_0x20fa48['motion_1'][_0x23128c]=_0x1347a8['y'],_0x20fa48['motion_2'][_0x23128c]=_0x1347a8['z'],_0x20fa48['t_scale'][_0x23128c]=_0x4e4d73['x'],_0x20fa48['t'][_0x23128c]=_0x4e4d73['y'],_0x20fa48['f_dc_0'][_0x23128c]=(_0x457847['x']-(0x11a2+0x1fd4+-0x3176+0.5))/_0xc2de9a,_0x20fa48['f_dc_1'][_0x23128c]=(_0x457847['y']-(0xa1+-0x131a+-0x1279*-0x1+0.5))/_0xc2de9a,_0x20fa48['f_dc_2'][_0x23128c]=(_0x457847['z']-(0x1*-0x971+-0x16cc+0x203d+0.5))/_0xc2de9a,_0x20fa48['opacity'][_0x23128c]=_0x457847['w']<=0xd09*-0x1+-0x1815+0x251e?-(0xe*0xbf+-0x303*0xb+0x16d7):_0x457847['w']>=-0x1de*-0x7+-0x4f*0x6f+-0x18*-0xe2?0x21da+-0x1b00+-0x6b2:-Math['log']((-0x6ee*0x5+-0x3b*-0x2e+-0x83*-0x2f)/_0x457847['w']-(-0x49*-0x42+-0x12f5+0x24)),_0x5c09bf){for(let _0x3b54d2=-0x1*-0x84f+-0xc06+0x3b7;_0x3b54d2<0x223f*-0x1+-0x149*0x1d+0x47b1;++_0x3b54d2)_0x20fa48['f_rest_'+_0x3b54d2][_0x23128c]=_0x5c09bf[_0x3b54d2];}let _0x26c646={'x':_0x20fa48['x'],'y':_0x20fa48['y'],'z':_0x20fa48['z'],'rot_1':_0x20fa48['rot_1'],'rot_2':_0x20fa48['rot_2'],'rot_3':_0x20fa48['rot_3'],'rot_0':_0x20fa48['rot_0'],'scale_0':_0x20fa48['scale_0'],'scale_1':_0x20fa48['scale_1'],'scale_2':_0x20fa48['scale_2'],'motion_0':_0x20fa48['motion_0'],'motion_1':_0x20fa48['motion_1'],'motion_2':_0x20fa48['motion_2'],'t_scale':_0x20fa48['t_scale'],'t':_0x20fa48['t'],'f_dc_0':_0x20fa48['f_dc_0'],'f_dc_1':_0x20fa48['f_dc_1'],'f_dc_2':_0x20fa48['f_dc_2'],'opacity':_0x20fa48['opacity']};_0x5c09bf&&(_0x26c646={..._0x26c646,'f_rest_0':_0x20fa48['f_rest_0'],'f_rest_1':_0x20fa48['f_rest_1'],'f_rest_2':_0x20fa48['f_rest_2'],'f_rest_3':_0x20fa48['f_rest_3'],'f_rest_4':_0x20fa48['f_rest_4'],'f_rest_5':_0x20fa48['f_rest_5'],'f_rest_6':_0x20fa48['f_rest_6'],'f_rest_7':_0x20fa48['f_rest_7'],'f_rest_8':_0x20fa48['f_rest_8'],'f_rest_9':_0x20fa48['f_rest_9'],'f_rest_10':_0x20fa48['f_rest_10'],'f_rest_11':_0x20fa48['f_rest_11'],'f_rest_12':_0x20fa48['f_rest_12'],'f_rest_13':_0x20fa48['f_rest_13'],'f_rest_14':_0x20fa48['f_rest_14'],'f_rest_15':_0x20fa48['f_rest_15'],'f_rest_16':_0x20fa48['f_rest_16'],'f_rest_17':_0x20fa48['f_rest_17'],'f_rest_18':_0x20fa48['f_rest_18'],'f_rest_19':_0x20fa48['f_rest_19'],'f_rest_20':_0x20fa48['f_rest_20'],'f_rest_21':_0x20fa48['f_rest_21'],'f_rest_22':_0x20fa48['f_rest_22'],'f_rest_23':_0x20fa48['f_rest_23'],'f_rest_24':_0x20fa48['f_rest_24'],'f_rest_25':_0x20fa48['f_rest_25'],'f_rest_26':_0x20fa48['f_rest_26'],'f_rest_27':_0x20fa48['f_rest_27'],'f_rest_28':_0x20fa48['f_rest_28'],'f_rest_29':_0x20fa48['f_rest_29'],'f_rest_30':_0x20fa48['f_rest_30'],'f_rest_31':_0x20fa48['f_rest_31'],'f_rest_32':_0x20fa48['f_rest_32'],'f_rest_33':_0x20fa48['f_rest_33'],'f_rest_34':_0x20fa48['f_rest_34'],'f_rest_35':_0x20fa48['f_rest_35'],'f_rest_36':_0x20fa48['f_rest_36'],'f_rest_37':_0x20fa48['f_rest_37'],'f_rest_38':_0x20fa48['f_rest_38'],'f_rest_39':_0x20fa48['f_rest_39'],'f_rest_40':_0x20fa48['f_rest_40'],'f_rest_41':_0x20fa48['f_rest_41'],'f_rest_42':_0x20fa48['f_rest_42'],'f_rest_43':_0x20fa48['f_rest_43'],'f_rest_44':_0x20fa48['f_rest_44']});const _0xff2e67=Object['values'](_0x26c646)['map'](_0x34a14a=>_0x34a14a['buffer']);self['postMessag'+'e']({'type':'decompress'+'ed','data':_0x26c646},_0xff2e67);};}class ik extends me{constructor(){super(),h(this,'worker'),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+sk['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x285332=>{if(!this['worker'])return;const {data:_0x5aacb8}=_0x285332;switch(_0x5aacb8['type']){case'decompress'+'ed':console['log']('decompress'+'ed'),this['fire']('decompress'+'ed',_0x5aacb8['data']);break;}};}['decompress'](_0x538db1,_0x4e58fc,_0xe5af5e,_0x95cd1,_0x1570c8,_0x17efd4,_0x4455b4,_0x5e62d1){const _0x340f9e=[_0x4e58fc['buffer'],_0x95cd1['buffer']];_0x1570c8&&_0x340f9e['push'](_0x1570c8['buffer']),_0x17efd4&&_0x340f9e['push'](_0x17efd4['buffer']),_0x4455b4&&_0x340f9e['push'](_0x4455b4['buffer']),this['worker']['postMessag'+'e']({'type':'decompress','numSplats':_0x538db1,'chunkData':_0x4e58fc,'chunkSize':_0xe5af5e,'vertexData':_0x95cd1,'shData0':_0x1570c8,'shData1':_0x17efd4,'shData2':_0x4455b4,'shBands':_0x5e62d1},_0x340f9e);}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}class rk{constructor(_0x2d69c1,_0x4d8b01,_0x502321,_0x168930,_0x3dc849,_0x1e3fe3,_0x589c31,_0x33c3b3){const _0x448b59=(_0x1b3c59,_0x168219)=>{const _0x5edd38=(0x5*-0x1a9+0x6*0x3c3+-0xe44<<_0x168219)-(-0x1e*-0xc+0x13e7+-0x2*0xaa7);return(_0x1b3c59&_0x5edd38)/_0x5edd38;},_0x3a6a3f=(_0x471b8,_0x279b4a)=>{_0x471b8['x']=_0x448b59(_0x279b4a>>>-0x1092+-0x4*-0x46+0x1*0xf8f,0xf40+0x1*0x114a+-0x207f),_0x471b8['y']=_0x448b59(_0x279b4a>>>0x1*0xab5+0xa7b+-0x1525,0xf48+0x1*0x74b+-0x1689),_0x471b8['z']=_0x448b59(_0x279b4a,0x76+-0x19*-0x143+-0x1ff6);},_0x187277=(_0x35e958,_0x4ddf06)=>{_0x35e958['x']=_0x448b59(_0x4ddf06>>>-0x1d84+0x41*-0x8d+-0xc5*-0x55,-0x4*0x59f+-0x734+-0x8*-0x3b7),_0x35e958['y']=_0x448b59(_0x4ddf06>>>-0x1ec7*0x1+0xdd0+0x3*0x5ad,-0x204a+-0x2*-0x522+-0x160e*-0x1),_0x35e958['z']=_0x448b59(_0x4ddf06>>>0x8*-0x2a+-0x1946+0x1a9e*0x1,-0x1*-0xd2c+0x6*0x10e+-0x7*0x2c8),_0x35e958['w']=_0x448b59(_0x4ddf06,0x13e7+-0x876+-0xb69);},_0x417ebf=(_0x535d6c,_0x389026)=>{const _0x430b32=(-0xc06+-0x1563+0x5e*0x5b)/(Math['sqrt'](0x43*-0x71+-0x2702+0x4497)*(0x11fb*0x2+0xd64+-0x315a+0.5)),_0x9e2547=(_0x448b59(_0x389026>>>-0x1*-0x19ad+-0x220a+0x1*0x871,0x19f1+-0xf85+-0xa62*0x1)-(-0xe49+-0x2d4*-0x2+0x8a1*0x1+0.5))*_0x430b32,_0x2671eb=(_0x448b59(_0x389026>>>-0x2072+-0x72e*0x4+0x3d34,-0x202*0x11+0x14e7*0x1+0xd45)-(-0x1b1a*-0x1+0x9*-0x431+-0xa9f*-0x1+0.5))*_0x430b32,_0x631f11=(_0x448b59(_0x389026,-0x8fa+-0x16ea+-0x86*-0x3d)-(-0x5*-0x2ef+-0x1*0x1633+0x788+0.5))*_0x430b32,_0x1687a2=Math['sqrt'](-0x236a*-0x1+0x24fe+-0xe7b*0x5-(_0x9e2547*_0x9e2547+_0x2671eb*_0x2671eb+_0x631f11*_0x631f11));switch(_0x389026>>>0x1*0x15d+0x6*0x623+-0x1*0x2611){case-0x3d4+0xa02+-0x317*0x2:_0x535d6c['set'](_0x9e2547,_0x2671eb,_0x631f11,_0x1687a2);break;case-0x22c+-0x2c*0xb7+0x21a1:_0x535d6c['set'](_0x1687a2,_0x2671eb,_0x631f11,_0x9e2547);break;case-0x38*0x28+-0x1*-0x2691+-0x1dcf:_0x535d6c['set'](_0x2671eb,_0x1687a2,_0x631f11,_0x9e2547);break;case-0x18d9*-0x1+-0x20c5+0x7ef*0x1:_0x535d6c['set'](_0x2671eb,_0x631f11,_0x1687a2,_0x9e2547);break;}},_0x47082c=(_0xda63b2,_0xdec83f,_0x19f0e5)=>_0xda63b2*(-0x8f9*0x4+0x1*-0x43d+-0x16*-0x1d3-_0x19f0e5)+_0xdec83f*_0x19f0e5,{chunkData:_0x453a78,chunkSize:_0xca2173,vertexData:_0x2fe53e,shData0:_0x589a29,shData1:_0x1886cf,shData2:_0x2ae7a3,shBands:_0x235156}=_0x2d69c1,_0x9bb8ed=[0x2ec*-0x6+0x1*0x7d5+0x9b6,0x1487+-0x2*0x122+-0x1*0x123b,0x2582+-0x176f+0x34*-0x45][_0x235156-(0x2e3*0x7+0x65e+-0x13*0x166)],_0x1555f8=0x1*-0x22e5+-0x1*0x2179+0x4464;this['read']=_0x52fcf9=>{const _0x27a8f1=Math['floor'](_0x52fcf9/(-0x2703+-0x73b*-0x2+0xd3*0x1f))*_0xca2173;if(_0x4d8b01&&(_0x3a6a3f(_0x4d8b01,_0x2fe53e[_0x52fcf9*_0x1555f8+(0x1*0x176e+0x12a6+-0x2a14)]),_0x4d8b01['x']=_0x47082c(_0x453a78[_0x27a8f1+(-0x740+-0x7c8+0xf08)],_0x453a78[_0x27a8f1+(-0xb9b+-0x21+0xbbf)],_0x4d8b01['x']),_0x4d8b01['y']=_0x47082c(_0x453a78[_0x27a8f1+(-0x599*0x5+-0xd7*0xb+0x253b)],_0x453a78[_0x27a8f1+(0x3ed+-0x1*-0x8+0x1*-0x3f1)],_0x4d8b01['y']),_0x4d8b01['z']=_0x47082c(_0x453a78[_0x27a8f1+(0x105a+0xf8f*0x2+-0x2f76)],_0x453a78[_0x27a8f1+(0x4*0x30e+-0x1*0xaa1+0x2*-0xc9)],_0x4d8b01['z'])),_0x502321&&_0x417ebf(_0x502321,_0x2fe53e[_0x52fcf9*_0x1555f8+(-0x71*-0x52+0xa08+-0x2e39)]),_0x168930&&(_0x3a6a3f(_0x168930,_0x2fe53e[_0x52fcf9*_0x1555f8+(-0x154*0x19+-0x25a*-0x10+-0x2*0x235)]),_0x168930['x']=_0x47082c(_0x453a78[_0x27a8f1+(-0x1354+-0x2ec+-0xb23*-0x2)],_0x453a78[_0x27a8f1+(0x41*-0x95+0x1634*0x1+-0xfaa*-0x1)],_0x168930['x']),_0x168930['y']=_0x47082c(_0x453a78[_0x27a8f1+(-0x2*-0xb3+0x18b5+-0x1a14)],_0x453a78[_0x27a8f1+(-0x3*0x85f+-0x10*0xdf+0x2717)],_0x168930['y']),_0x168930['z']=_0x47082c(_0x453a78[_0x27a8f1+(-0x1982+-0xf3*-0x6+-0x14*-0xfe)],_0x453a78[_0x27a8f1+(0x1798*-0x1+0xb6a+0xc39*0x1)],_0x168930['z'])),_0x3dc849&&(_0x187277(_0x3dc849,_0x2fe53e[_0x52fcf9*_0x1555f8+(-0x12d2+0x1ad9+-0x804)]),_0xca2173>-0x22fc+-0xb5*0x8+-0x8*-0x516&&(_0x3dc849['x']=_0x47082c(_0x453a78[_0x27a8f1+(0x16a2*0x1+0x387*0x1+-0x539*0x5)],_0x453a78[_0x27a8f1+(0xfc4*0x1+0x1349*-0x2+0x3*0x79f)],_0x3dc849['x']),_0x3dc849['y']=_0x47082c(_0x453a78[_0x27a8f1+(-0xc6e+0x16*-0xd3+0x1e9d)],_0x453a78[_0x27a8f1+(-0x3b*0x17+0x26c4+0x2167*-0x1)],_0x3dc849['y']),_0x3dc849['z']=_0x47082c(_0x453a78[_0x27a8f1+(-0xbe9+0x133*-0x1+0xd2a)],_0x453a78[_0x27a8f1+(0xfc2+-0x1a38+0xa87)],_0x3dc849['z']))),_0x1e3fe3&&(_0x3a6a3f(_0x1e3fe3,_0x2fe53e[_0x52fcf9*_0x1555f8+(0x589+0x432+-0x9b7)]),_0x1e3fe3['x']=_0x47082c(_0x453a78[_0x27a8f1+(-0xf9e+0x11*-0x139+0x2479)],_0x453a78[_0x27a8f1+(-0x10d1+0x96f+0x777)],_0x1e3fe3['x']),_0x1e3fe3['y']=_0x47082c(_0x453a78[_0x27a8f1+(0x1f4+-0x1*-0x144+-0x73*0x7)],_0x453a78[_0x27a8f1+(-0x6c*-0x29+0xbf5+-0x1d2b)],_0x1e3fe3['y']),_0x1e3fe3['z']=_0x47082c(_0x453a78[_0x27a8f1+(0x75*0x2+-0x16d*0xb+0xed9)],_0x453a78[_0x27a8f1+(-0x1b1e+0x1772+0x141*0x3)],_0x1e3fe3['z'])),_0x589c31&&(_0x3a6a3f(_0x589c31,_0x2fe53e[_0x52fcf9*_0x1555f8+(0x30f+-0x88*-0x1+-0x392)]),_0x589c31['x']=_0x47082c(_0x453a78[_0x27a8f1+(0x5*-0x459+0x186c+-0x297)],_0x453a78[_0x27a8f1+(-0x12da+0x1*0x14ab+0x2c*-0xa)],_0x589c31['x']),_0x589c31['y']=_0x47082c(_0x453a78[_0x27a8f1+(-0x1a7*-0x15+0x12e+-0x23c7)],_0x453a78[_0x27a8f1+(-0x1aa7+0x1*0x1ed1+-0x40f)],_0x589c31['y'])),_0x33c3b3&&_0x235156>0x1607*-0x1+-0x14d1+-0x2ad8*-0x1){const _0x2111c4=[_0x589a29,_0x1886cf,_0x2ae7a3];for(let _0x1371d2=0x1*0xd67+0x1b6b+-0x28d2;_0x1371d2<0x2074+0x32c+0x1*-0x239d;++_0x1371d2)for(let _0x512d73=0x269e*0x1+-0x51*0x53+-0xc5b;_0x512d73<-0x118d+0x95*0x1+0x1107*0x1;++_0x512d73)_0x33c3b3[_0x1371d2*(-0x174f+-0x38*0xa2+0xc1*0x4e)+_0x512d73]=_0x512d73<_0x9bb8ed?_0x2111c4[_0x1371d2][_0x52fcf9*(0x142d+-0x1*0x1e31+0xa14)+_0x512d73]*((-0x123d+0x14b3+-0x1*0x26e)/(-0x1c*-0x24+-0xbf6+-0x905*-0x1))-(-0x15f3+-0x1d7e*-0x1+-0x787):-0x2bd+0x11*-0x135+0x1742;}};}}class ak{constructor(){h(this,'numSplats'),h(this,'comments'),h(this,'chunkData'),h(this,'vertexData'),h(this,'is4D'),h(this,'shData0'),h(this,'shData1'),h(this,'shData2'),h(this,'shBands');}['createIter'](_0x3e0175,_0x252c2c,_0x28121a,_0x32a96e,_0x5d37e5,_0x1a1030,_0x3da86b){return new rk(this,_0x3e0175,_0x252c2c,_0x28121a,_0x32a96e,_0x5d37e5,_0x1a1030,_0x3da86b);}['calcAabb'](_0x330d78){const {chunkData:_0x208b48,numChunks:_0x2ce5a1,chunkSize:_0x1b9fc4}=this;let _0x368a36=Math['exp'](Math['max'](_0x208b48[0x18ad+0x14cd+-0x2d71],_0x208b48[-0x1f38+-0x222+-0x2164*-0x1],_0x208b48[-0x710+0x1292+0x1*-0xb77])),_0x4ba61c=_0x208b48[-0x3*-0xc5e+0x1*-0xcaa+-0x5c*0x44]-_0x368a36,_0x3f0a3a=_0x208b48[0x8*0x26+0x886+-0x1*0x9b5]-_0x368a36,_0x38d70d=_0x208b48[0x8c5+-0xfdb+0x718]-_0x368a36,_0x388734=_0x208b48[-0x2485+-0x3*-0x469+0x174d]+_0x368a36,_0x568e1e=_0x208b48[-0x147*-0x1+0x1d85+0xc5*-0x28]+_0x368a36,_0x12b094=_0x208b48[0x131d+0x25fc+0x4*-0xe45]+_0x368a36;for(let _0x47e234=0x1cf*-0x1+-0x1127+0x12f7;_0x47e234<_0x2ce5a1;++_0x47e234){const _0x5d8db5=_0x47e234*_0x1b9fc4;_0x368a36=Math['exp'](Math['max'](_0x208b48[_0x5d8db5+(-0x365*0x8+0x7*0x297+0x910)],_0x208b48[_0x5d8db5+(0x2*0x27a+-0x1*0x10f3+0xc09)],_0x208b48[_0x5d8db5+(-0x1*-0x251+-0xdc*0x7+-0x3be*-0x1)])),_0x4ba61c=Math['min'](_0x4ba61c,_0x208b48[_0x5d8db5+(-0x536+-0x16*0x191+0x4*0x9eb)]-_0x368a36),_0x3f0a3a=Math['min'](_0x3f0a3a,_0x208b48[_0x5d8db5+(0x1970+-0x1a3e+0xcf)]-_0x368a36),_0x38d70d=Math['min'](_0x38d70d,_0x208b48[_0x5d8db5+(-0x2285+-0x1e2*-0x3+0x1ce1)]-_0x368a36),_0x388734=Math['max'](_0x388734,_0x208b48[_0x5d8db5+(-0xddf+-0x14ea+-0x2*-0x1166)]+_0x368a36),_0x568e1e=Math['max'](_0x568e1e,_0x208b48[_0x5d8db5+(0x1dff+-0x1*-0x1723+-0x1a8f*0x2)]+_0x368a36),_0x12b094=Math['max'](_0x12b094,_0x208b48[_0x5d8db5+(0x2*-0xf3b+-0x4c7+-0x11a1*-0x2)]+_0x368a36);}return _0x330d78['center']['set']((_0x4ba61c+_0x388734)*(0x2*-0x12b9+0x705+0x1*0x1e6d+0.5),(_0x3f0a3a+_0x568e1e)*(-0x1eff+0x3e*0x97+-0x593+0.5),(_0x38d70d+_0x12b094)*(-0x206f+0x26*-0x12+0x231b+0.5)),_0x330d78['halfExtent'+'s']['set']((_0x388734-_0x4ba61c)*(-0xf5b*0x2+0x29*-0xdd+0x1609*0x3+0.5),(_0x568e1e-_0x3f0a3a)*(-0x1*0x5c5+-0xfb2+0x1577+0.5),(_0x12b094-_0x38d70d)*(0x628+-0x1f49+0x1921+0.5)),!(-0x955*-0x1+-0x1370+-0x1*-0xa1b);}['getCenters'](_0x453034){const {vertexData:_0x5af7b2,chunkData:_0x525c2c,numChunks:_0x533d23,chunkSize:_0xbf19eb}=this;let _0x4b7555,_0x126893,_0x32540b,_0x2a4527,_0x11a14d,_0x5d9fa8;for(let _0xf7dc04=0x2530+-0x2*0x726+-0x16e4;_0xf7dc04<_0x533d23;++_0xf7dc04){const _0x223d9a=_0xf7dc04*_0xbf19eb;_0x4b7555=_0x525c2c[_0x223d9a+(0x5c0+-0x49c+-0x124)],_0x126893=_0x525c2c[_0x223d9a+(0x1bce+-0x6d*-0x1f+-0x2900)],_0x32540b=_0x525c2c[_0x223d9a+(-0x1700+0x2*0xeb7+0xc*-0x89)],_0x2a4527=_0x525c2c[_0x223d9a+(0x6c8*0x1+-0xf7*-0x23+0x2*-0x1445)],_0x11a14d=_0x525c2c[_0x223d9a+(0x7*0x175+-0x16cf+0xca0)],_0x5d9fa8=_0x525c2c[_0x223d9a+(0xb12+-0x1c14+-0x1*-0x1107)];const _0x421ccc=Math['min'](this['numSplats'],(_0xf7dc04+(-0x1de5+-0x59d*0x4+0x1a2d*0x2))*(0x157a+-0x3*0xb6f+0x1*0xdd3));for(let _0x3535a2=_0xf7dc04*(0xdd7+0x1f*-0xd1+0x1*0xc78);_0x3535a2<_0x421ccc;++_0x3535a2){const _0x207b81=_0x5af7b2[_0x3535a2*(0x4*0x1f3+-0x4bb*0x6+0x1*0x149a)],_0x37e048=(_0x207b81>>>-0xd*-0x10+0x7b8+-0x3*0x2d1)/(-0xcfe*0x1+0x11*-0x1a+0x5*0x48b),_0xf9ca8=(_0x207b81>>>0x1b29*0x1+-0x47*-0x16+-0x2138&0xbd9+-0x20dc+-0x1902*-0x1)/(-0x1e13+0xb04+0x170e),_0x2c2d48=(_0x207b81&-0xf9e+-0x19bf+0x315c)/(0x218a+0x118e+0x3eb*-0xb);_0x453034[_0x3535a2*(0x7b6+-0x14e7*0x1+0xd34)+(0x242d+-0x109c*-0x1+-0x1*0x34c9)]=(0x1*0x7f7+0x6bb*0x3+-0x1c27*0x1-_0x37e048)*_0x4b7555+_0x37e048*_0x2a4527,_0x453034[_0x3535a2*(0x311*0xc+0x6*0x5db+-0x33*0x169)+(0x29*-0x83+-0x7d*0x3d+0x32c5)]=(-0x13*-0xe9+-0x158a+0x440-_0xf9ca8)*_0x126893+_0xf9ca8*_0x11a14d,_0x453034[_0x3535a2*(-0x3cc+0x1eab+0xc*-0x23d)+(0x2*0xe19+-0x158c+-0x6a4)]=(-0xdbe+-0x2cd*-0x9+-0x6*0x1e9-_0x2c2d48)*_0x32540b+_0x2c2d48*_0x5d9fa8;}}}['getChunks'](_0x56c892){const {chunkData:_0x371b2a,numChunks:_0x212b14,chunkSize:_0x187c2a}=this;let _0x82f0a6,_0xaf934f,_0x45e74b,_0x354542,_0x4afd6e,_0x3c1df5;for(let _0x222c87=0x110b+-0x143b+0x88*0x6;_0x222c87<_0x212b14;++_0x222c87){const _0x38d9e0=_0x222c87*_0x187c2a;_0x82f0a6=_0x371b2a[_0x38d9e0+(-0x1445+-0x10b3+0x24f8)],_0xaf934f=_0x371b2a[_0x38d9e0+(0x1770+0x2509*-0x1+0xd9a*0x1)],_0x45e74b=_0x371b2a[_0x38d9e0+(-0x206b+0x917+-0x67*-0x3a)],_0x354542=_0x371b2a[_0x38d9e0+(-0x1e3e*-0x1+0x7cf+0x1*-0x260a)],_0x4afd6e=_0x371b2a[_0x38d9e0+(0x614+-0x162*0xd+-0x1*-0xbea)],_0x3c1df5=_0x371b2a[_0x38d9e0+(-0x6*-0x21f+-0x684+0x5*-0x13d)],_0x56c892[_0x222c87*(-0x1*-0xae5+-0x1*-0x35e+0x51*-0x2d)+(-0x19b1+0x36a+0x1647*0x1)]=_0x82f0a6,_0x56c892[_0x222c87*(-0x4*-0x944+-0xf2*0x1d+-0x9a0)+(-0x1*0xa97+-0x1521+-0x3*-0xa93)]=_0xaf934f,_0x56c892[_0x222c87*(0x1278+-0x2e5+-0x1*0xf8d)+(-0x11*0x103+0x1fed*0x1+-0xeb8)]=_0x45e74b,_0x56c892[_0x222c87*(0x1517+-0x154e+0x3d*0x1)+(-0x781+-0x2*-0x957+-0x595*0x2)]=_0x354542,_0x56c892[_0x222c87*(0xe*-0x11b+-0x134a+-0x92*-0x3d)+(0x242d+0x6d*-0xb+0x1f7a*-0x1)]=_0x4afd6e,_0x56c892[_0x222c87*(0x1f7+0x2570+0x251*-0x11)+(-0x1a3a+-0x680+0x1*0x20bf)]=_0x3c1df5;}}['calcFocalP'+'oint'](_0x36807a){const {chunkData:_0x317ca3,numChunks:_0x46b62e,chunkSize:_0x4c951a}=this;_0x36807a['x']=-0x57c*0x2+0x5c*0x63+-0x189c,_0x36807a['y']=0x11f+-0x12*0x91+-0x17*-0x65,_0x36807a['z']=-0xb*-0x30d+0x2482*0x1+0x1*-0x4611;for(let _0x13b01e=0x1714+0x2216*0x1+0x36*-0x10f;_0x13b01e<_0x46b62e;++_0x13b01e){const _0x337d87=_0x13b01e*_0x4c951a;_0x36807a['x']+=_0x317ca3[_0x337d87+(-0x23a3+-0x63*0x3e+0x13df*0x3)]+_0x317ca3[_0x337d87+(0x5ab+-0x1e3*0x6+0x5aa)],_0x36807a['y']+=_0x317ca3[_0x337d87+(-0x110b*0x2+-0x135+0x234c)]+_0x317ca3[_0x337d87+(-0x2*-0x3bc+-0x1f51+0x17dd)],_0x36807a['z']+=_0x317ca3[_0x337d87+(-0x22d*-0x5+-0x25c8+0x1ae9)]+_0x317ca3[_0x337d87+(-0x24f*-0x7+-0x1c67*-0x1+0xb5*-0x3f)];}_0x36807a['mulScalar']((-0x2*-0x613+0x1657+-0x51*0x6d+0.5)/_0x46b62e);}get['isCompress'+'ed'](){return!(-0x40b*0x9+-0x5*0x1b1+0x2cd8);}get['numChunks'](){return Math['ceil'](this['numSplats']/(-0x1*0x120e+-0xadb+-0x1de9*-0x1));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}async['decompress'](){const _0x339f23=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'],{shBands:_0x20776a}=this;if(_0x20776a>0x2*0xa56+-0x2*0x917+-0x27e){const _0x27e8fa=[];for(let _0x27234a=0xda3+-0x7af+-0x2*0x2fa;_0x27234a<0xb*0xf9+0x557*0x5+0x1*-0x2539;++_0x27234a)_0x27e8fa['push']('f_rest_'+_0x27234a);_0x339f23['splice'](_0x339f23['indexOf']('f_dc_0')+(0x802+-0x1817+0x1016),-0x7*0x195+-0x1fb5+0x2ac8,..._0x27e8fa);}const _0x1ee565=new ik();return _0x1ee565['decompress'](this['numSplats'],this['chunkData'],this['chunkSize'],this['vertexData'],this['shData0'],this['shData1'],this['shData2'],this['shBands']),new Promise((_0x3b7874,_0x40d79c)=>{_0x1ee565['on']('decompress'+'ed',_0x788c2c=>{_0x1ee565['destroy'](),_0x3b7874(new qn([{'name':'vertex','count':this['numSplats'],'properties':_0x339f23['map'](_0x2a6f0a=>({'type':'float','name':_0x2a6f0a,'storage':_0x788c2c[_0x2a6f0a],'byteSize':0x4}))}],this['comments']));});});}}async function nk(){const _0x4723de='super4d-ca'+'che-v1',_0x12c599={'maxAge':0x9a7ec800,'maxSize':0x280000000},_0x11d9a4=new Uint8Array([-0x1*-0x257e+-0x1*-0xa63+-0x1*0x2f71,0x1*-0x1857+0x1de3+-0x520,-0x195f+0x8c6+0x1112,-0x4*-0x503+-0xcc1*-0x3+-0x3a45*0x1]),_0x57ab15=new Uint8Array([-0x4de+-0xe12+-0xe*-0x15b,-0x313+-0x4*-0x434+-0xd58*0x1,0x547+0x2041+-0x251a,-0x45a+0xaea+-0x62c,-0x1fb*0x11+-0xfe7+0x31f1,-0x22e*0xb+-0xd17+0xb5*0x35,-0x2135*0x1+0x3e6+0x1db4,-0x2*-0x11a1+-0x15d8+-0xd09,0xb2c+-0x1803+0xd3b,0xac1*-0x1+-0x1f72+0x2a98,0x379*-0x7+0x24c1+-0xc00,0xe*-0x6f+-0x32b*-0x2+-0x3a*0x1]),_0x581f7c=0x5d7+0x9aa+-0xf81+0.28209479177387814,_0x1f1782=new Map([['char',Int8Array],['uchar',Uint8Array],['short',Int16Array],['ushort',Uint16Array],['int',Int32Array],['uint',Uint32Array],['float',Float32Array],['double',Float64Array]]);class _0x2d8cfc{constructor(_0xb8c282={}){this['options']={..._0x12c599,..._0xb8c282},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=0x28c*0x1+-0xba4+0x918,this['initialize'+'d']=!(-0x16c7+-0x2*-0x25c+-0x110*-0x11);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x4723de);const _0x432127=await this['cache']['keys'](),_0xb53441=[];for(const _0x27c36d of _0x432127){const _0x56a62e=_0x27c36d['url'],_0x563204=await this['cache']['match'](_0x56a62e);if(_0x563204){const _0x3faa58=(await _0x563204['blob']())['size'],_0x25dfc3=_0x563204['headers']['get']('x-cache-ti'+'me');_0x25dfc3&&_0xb53441['push']({'url':_0x56a62e,'size':_0x3faa58,'cacheTime':parseInt(_0x25dfc3)});}}_0xb53441['sort']((_0x40d1d0,_0x49eb9b)=>_0x40d1d0['cacheTime']-_0x49eb9b['cacheTime']);for(const _0x3eb00c of _0xb53441)this['cacheSizes']['set'](_0x3eb00c['url'],_0x3eb00c['size']),this['currentSiz'+'e']+=_0x3eb00c['size'],this['lruList']['push'](_0x3eb00c['url']);}catch(_0x19ecc5){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x19ecc5);}this['initialize'+'d']=!(0x1dd1+0x5ac+-0x237d);}}async['get'](_0x456f37){if(await this['init'](),!this['cache'])return null;try{const _0x4e1e8c=await this['cache']['match'](_0x456f37);if(!_0x4e1e8c)return null;const _0x49d7f1=_0x4e1e8c['headers']['get']('x-cache-ti'+'me');return _0x49d7f1&&Date['now']()-parseInt(_0x49d7f1)>this['options']['maxAge']?(await this['delete'](_0x456f37),null):(this['updateLRU'](_0x456f37),_0x4e1e8c);}catch{return null;}}async['set'](_0xbf1f4d,_0x207817){if(!(!this['cache']||_0xbf1f4d['startsWith']('blob:')))try{const _0x3aafc8=_0x207817['clone'](),_0x3480fa=await _0x3aafc8['blob'](),_0x5a72ce=_0x3480fa['size'];this['currentSiz'+'e']+_0x5a72ce>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x5a72ce);const _0x9a2eca=new Headers(_0x3aafc8['headers']);_0x9a2eca['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x230718=new Response(_0x3480fa,{'status':_0x3aafc8['status'],'statusText':_0x3aafc8['statusText'],'headers':_0x9a2eca});await this['cache']['put'](_0xbf1f4d,_0x230718),this['cacheSizes']['set'](_0xbf1f4d,_0x5a72ce),this['currentSiz'+'e']+=_0x5a72ce,this['updateLRU'](_0xbf1f4d);}catch(_0x38e20f){console['error']('Cache\x20set\x20'+'error:',_0x38e20f);}}['updateLRU'](_0x156e60){const _0xdcabbc=this['lruList']['indexOf'](_0x156e60);_0xdcabbc>-(-0x60d+0x17f2*-0x1+-0x14*-0x180)&&this['lruList']['splice'](_0xdcabbc,-0x24bb+0x1eb4+0x608),this['lruList']['push'](_0x156e60);}async['cleanupSpa'+'ce'](_0x4afa22){const _0x5aac43=this['options']['maxSize']*(0xbcc*-0x1+-0x134c+0xa*0x31c+0.9);if(!(this['currentSiz'+'e']<=_0x5aac43))for(;this['lruList']['length']>0x2280+0x7f5+0x3*-0xe27&&this['currentSiz'+'e']>_0x5aac43;){const _0xd775aa=this['lruList']['shift']();_0xd775aa&&await this['delete'](_0xd775aa);}}async['delete'](_0x3c27e5){if(this['cache'])try{await this['cache']['delete'](_0x3c27e5);const _0xb4b7e3=this['cacheSizes']['get'](_0x3c27e5)||-0x2047+0x422+-0x28f*-0xb;this['currentSiz'+'e']-=_0xb4b7e3,this['cacheSizes']['delete'](_0x3c27e5);const _0x203a0c=this['lruList']['indexOf'](_0x3c27e5);_0x203a0c>-(-0x2680+-0x1caa*0x1+0x432b)&&this['lruList']['splice'](_0x203a0c,-0x121*-0x13+-0x1bf9+0x687);}catch(_0x3aa865){console['error']('Cache\x20dele'+'te\x20error:',_0x3aa865);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x43fd7d=>Promise['all'](_0x43fd7d['map'](_0x152a4d=>{var _0x4c7f66;return(_0x4c7f66=this['cache'])==null?void(0x15cb+-0x18aa+0x2df):_0x4c7f66['delete'](_0x152a4d);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x8b7+-0x565+-0x352*0x1;}catch(_0x46be88){console['error']('Cache\x20clea'+'r\x20error:',_0x46be88);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x1*0x1c53+0x1*0x4df+0x1774;}}class _0x2721b4{constructor(_0x5b78b6=[],_0x1a735b={}){this['cacheManag'+'er']=new _0x2d8cfc(_0x1a735b['cache']),this['retryCount']=_0x1a735b['retryCount']||0xc3b+0x110b*0x1+-0x1d43,this['retryDelay']=_0x1a735b['retryDelay']||0x1*0x1d8c+-0x128e+-0x90a,this['maxConcurr'+'ency']=_0x1a735b['maxConcurr'+'ency']||-0x2a*-0x5b+0x71a+-0x2*0xb03,this['downloadQu'+'eue']=_0x5b78b6,this['isProcessi'+'ngDownload'+'Queue']=!(0x53*0x6e+0x14e+-0x24f7),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(0x495+0xef3+-0x7d*0x28);this['downloadQu'+'eue']['length']>-0x14c2+0x18b8+0x1a*-0x27;)try{const _0x28625f=this['downloadQu'+'eue']['splice'](-0xe9b*0x2+-0x1*-0x12fb+0xa3b,this['maxConcurr'+'ency'])['map'](_0x5c8abd=>{if(!this['pendingRes'+'ponses']['has'](_0x5c8abd)){const _0x5930bf=this['download'](_0x5c8abd);return this['pendingRes'+'ponses']['set'](_0x5c8abd,_0x5930bf),_0x5930bf['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x5c8abd);});}return Promise['resolve']();});await Promise['all'](_0x28625f);}catch(_0x44d889){console['error']('Download\x20e'+'rror:',_0x44d889);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(-0x2211+0x179f+0xa73);}}}async['fetch'](_0x5853ba,_0x59b386={}){if(this['pendingRes'+'ponses']['has'](_0x5853ba))return this['pendingRes'+'ponses']['get'](_0x5853ba);const {forceRefresh:_0x1d5a95=!(-0x18fd+-0xe2*-0x26+-0x88e),..._0x2348bd}=_0x59b386;this['pendingRes'+'ponses']['set'](_0x5853ba,this['download'](_0x5853ba,_0x2348bd));const _0x4ad40e=await this['pendingRes'+'ponses']['get'](_0x5853ba);return this['pendingRes'+'ponses']['delete'](_0x5853ba),_0x4ad40e;}async['download'](_0x844a54,_0x5de22e={}){var _0xc5b340;await((_0xc5b340=this['cacheManag'+'er'])==null?void(-0x18*0x83+0x8*0x2a+0xaf8):_0xc5b340['init']());const {forceRefresh:_0x13e358=!(-0x533+-0x3*0x2b9+0x3*0x475),..._0xa65f64}=_0x5de22e;_0x13e358&&await this['cacheManag'+'er']['delete'](_0x844a54);const _0x59bbd7=await this['cacheManag'+'er']['get'](_0x844a54);if(_0x59bbd7)return _0x59bbd7;let _0x152a48;for(let _0x17eeed=-0x13*0x59+0x1*-0x68b+-0x66*-0x21;_0x17eeed<this['retryCount'];_0x17eeed++)try{const _0x10aef0=await fetch(_0x844a54,_0xa65f64);if(!_0x10aef0['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x10aef0['status']);return await this['cacheManag'+'er']['set'](_0x844a54,_0x10aef0),_0x10aef0;}catch(_0x245445){console['error']('Download\x20e'+'rror:',_0x245445),_0x152a48=_0x245445,_0x17eeed<this['retryCount']-(-0x2286+-0x1*-0x25dd+-0x356)&&await new Promise(_0x167fe7=>setTimeout(_0x167fe7,this['retryDelay']*(_0x17eeed+(-0xe40+-0x8c6+0x2d*0x83))));}throw _0x152a48;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){this['cacheManag'+'er']['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(0x1045+-0x1*-0x2286+0x32ca*-0x1),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x239330{constructor(){this['numSplats']=-0x27*-0x99+0x1aeb+-0x85f*0x6,this['comments']=[],this['chunkData']=new Float32Array(-0x106*0x4+-0x5a7+-0x1f3*-0x5),this['vertexData']=new Uint32Array(0xacc+0x1181+-0x1c4d),this['is4D']=!(-0x2aa*-0x4+0x1*0x4a0+-0x3*0x518),this['shBands']=0x76d+0x26e7+-0x2e54,this['shData0']=new Uint8Array(0x786*0x2+-0x22ed+0x13e1),this['shData1']=new Uint8Array(-0x3c6+0x23ee+-0x2028),this['shData2']=new Uint8Array(-0xe6+-0x7a4+0x88a),this['elements']=[],this['isCompress'+'ed']=!(-0x2235+-0x29*-0x7c+0xe59);}get['numChunks'](){return Math['ceil'](this['numSplats']/(0x242b+0x23b5+0x120*-0x3f));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}}class _0x26d294{constructor(_0x246ace,_0x299b56=[]){this['elements']=_0x246ace,this['comments']=_0x299b56,this['isCompress'+'ed']=!(0x1*-0x196a+-0x21bf+0x1*0x3b2a);}}class _0x16c228{constructor(_0x4c28d9,_0x2e95da){this['reader']=_0x4c28d9,this['progressFu'+'nc']=_0x2e95da,this['head']=-0x1973+-0x18df+-0x3*-0x10c6,this['tail']=-0x145b+-0x237c+-0x3b9*-0xf;}async['read'](){var _0x90b42c;const {value:_0x383e6a,done:_0x1aef29}=await this['reader']['read']();if(_0x1aef29)throw new Error('Stream\x20fin'+'ished\x20befo'+'re\x20end\x20of\x20'+'header');this['push'](_0x383e6a),(_0x90b42c=this['progressFu'+'nc'])==null||_0x90b42c['call'](this,_0x383e6a['byteLength']);}['push'](_0x4af35f){if(!this['data'])this['data']=_0x4af35f,this['view']=new DataView(this['data']['buffer']),this['tail']=_0x4af35f['length'];else{const _0x20c55f=this['tail']-this['head'],_0x4597cf=_0x20c55f+_0x4af35f['length'];if(this['data']['length']>=_0x4597cf)this['head']>-0x19ab*0x1+0x7fa+0x1*0x11b1?(this['data']['copyWithin'](-0xc62+-0x1471*-0x1+-0x80f,this['head'],this['tail']),this['data']['set'](_0x4af35f,_0x20c55f),this['head']=-0x1*0x1101+0x16c2+0x1*-0x5c1,this['tail']=_0x4597cf):(this['data']['set'](_0x4af35f,this['tail']),this['tail']+=_0x4af35f['length']);else{const _0x391d27=new Uint8Array(_0x4597cf);this['head']>0x510+-0x13*0x15a+0x149e||this['tail']<this['data']['length']?_0x391d27['set'](this['data']['subarray'](this['head'],this['tail']),0x45d+0x1*-0x1d72+0x1*0x1915):_0x391d27['set'](this['data'],0x562+-0x7bf*0x2+0xa1c),_0x391d27['set'](_0x4af35f,_0x20c55f),this['data']=_0x391d27,this['view']=new DataView(this['data']['buffer']),this['head']=0x1925+0x7b9+0x4b2*-0x7,this['tail']=_0x4597cf;}}}['compact'](){this['head']>-0x231+-0x2195*-0x1+0x1f64*-0x1&&(this['data']['copyWithin'](0x33*-0x7f+-0x1051*-0x2+-0x755,this['head'],this['tail']),this['tail']-=this['head'],this['head']=0x314+-0x10c2*-0x2+-0x926*0x4);}get['remaining'](){return this['tail']-this['head'];}['getInt8'](){const _0x319de9=this['view']['getInt8'](this['head']);return this['head']++,_0x319de9;}['getUint8'](){const _0x1d525a=this['view']['getUint8'](this['head']);return this['head']++,_0x1d525a;}['getInt16'](){const _0x58c767=this['view']['getInt16'](this['head'],!(-0x7f*0x8+0xfa3+-0x67*0x1d));return this['head']+=0x4de+0x1463+-0x1*0x193f,_0x58c767;}['getUint16'](){const _0x27dcf1=this['view']['getUint16'](this['head'],!(-0x26*-0x3f+0x42+-0x19a*0x6));return this['head']+=-0x1*0x19b7+0x17f1+-0x4*-0x72,_0x27dcf1;}['getInt32'](){const _0x1fb02d=this['view']['getInt32'](this['head'],!(-0x1aa9+0x16a4+-0x15*-0x31));return this['head']+=-0x8*-0xb8+-0x1c15+0x1659,_0x1fb02d;}['getUint32'](){const _0x122b9b=this['view']['getUint32'](this['head'],!(-0x5c1*0x6+0xb5e+0x3dc*0x6));return this['head']+=0x17c4+-0x95*-0x2+-0x18ea,_0x122b9b;}['getFloat32'](){const _0x34e8c5=this['view']['getFloat32'](this['head'],!(-0x1adf+0x904+-0x1*-0x11db));return this['head']+=-0x253c+-0xc4b*-0x1+0x18f5*0x1,_0x34e8c5;}['getFloat64'](){const _0x3b4d48=this['view']['getFloat64'](this['head'],!(-0x1*-0xa7f+-0xfd3+0x554));return this['head']+=-0x16ec+-0x1*0x8a1+0x31*0xa5,_0x3b4d48;}}class _0x119839{constructor(_0x660b1e,_0x526a66,_0x1b4c75){this['x']=_0x660b1e,this['y']=_0x526a66,this['z']=_0x1b4c75;}}class _0x410e23{constructor(_0x506fc8,_0x1a1bed,_0x59d9de,_0x48bf00){this['x']=_0x506fc8,this['y']=_0x1a1bed,this['z']=_0x59d9de,this['w']=_0x48bf00;}}class _0x11c733{constructor(_0x113cce,_0x4ca27d,_0x25bcab,_0x2f1f3a){this['x']=_0x113cce,this['y']=_0x4ca27d,this['z']=_0x25bcab,this['w']=_0x2f1f3a;}['set'](_0x593688,_0xf7eee7,_0xe0a2c1,_0x5c8bb7){this['x']=_0x593688,this['y']=_0xf7eee7,this['z']=_0xe0a2c1,this['w']=_0x5c8bb7;}}class _0x53dda0{constructor(_0x5cfb66,_0xb008fc,_0x1cea9a,_0x447115,_0x331499,_0x2c8838,_0xa3c9c7,_0x1791a5,_0x2c572c,_0x1c349e,_0x5ebd65,_0x3ee966,_0x19421c,_0x2798cf){const _0x339df5=(_0x3a9c2d,_0x502249)=>{const _0x4ea269=(-0x1*0x47d+0x26ce+-0x2250<<_0x502249)-(0x2325+-0x33*0x15+-0x1ef5);return(_0x3a9c2d&_0x4ea269)/_0x4ea269;},_0x5de24e=(_0x30737d,_0x234e8c)=>{_0x30737d['x']=_0x339df5(_0x234e8c>>>-0x2*-0x12a1+-0x102b+-0x2*0xa81,-0x81a+0x20f6*0x1+0x1*-0x18d1),_0x30737d['y']=_0x339df5(_0x234e8c>>>-0xcb*0x29+-0x6*-0x58a+0x1*-0xae,-0x3*-0x691+-0x8e*0x2f+0x669),_0x30737d['z']=_0x339df5(_0x234e8c,-0xf15+-0x9b3+0x18d3);},_0x45c600=(_0xb537b8,_0x5e90d6)=>{_0xb537b8['x']=_0x339df5(_0x5e90d6>>>0x18ae+0x1128+0x6f5*-0x6,0x1438+-0x2*0xd7b+-0x363*-0x2),_0xb537b8['y']=_0x339df5(_0x5e90d6>>>-0x205b+-0x1*0x1001+0x1*0x306c,0x1*0x2531+0x1ec+0x17*-0x1b3),_0xb537b8['z']=_0x339df5(_0x5e90d6>>>-0x120b+0xaf7+0x16c*0x5,0x23de*-0x1+0xfeb*-0x1+0x33d1),_0xb537b8['w']=_0x339df5(_0x5e90d6,-0x37e+0x15d*-0x1b+0x2855);},_0x30fdcf=(_0x12bbb2,_0xe9d734)=>{const _0x3d47b0=(-0xfea+-0x5cb*-0x1+-0x144*-0x8)/(Math['sqrt'](0x1fa7+-0x4f*0x25+-0x143a)*(0x112c+0x25d6+0x1*-0x3702+0.5)),_0x1ce3a1=(_0x339df5(_0xe9d734>>>-0x23f5+-0x9*-0x67+0x2*0x1035,-0x226a+0x1*0x1d15+-0x113*-0x5)-(0xb*0x180+0x4bf*0x3+-0x1ebd+0.5))*_0x3d47b0,_0x11e056=(_0x339df5(_0xe9d734>>>0x1ed1+0x1*-0x957+0x1c*-0xc4,0x1692+-0x1cae*0x1+0x626)-(-0x1455+-0x8*0x41b+0x1*0x352d+0.5))*_0x3d47b0,_0xd7dbf9=(_0x339df5(_0xe9d734,-0xce+0x1121+-0x1049)-(0x15f8+0x2*0x476+-0x1ee4+0.5))*_0x3d47b0,_0x3057a6=Math['sqrt'](0x8b*-0x35+0x95b+-0x136d*-0x1-(_0x1ce3a1*_0x1ce3a1+_0x11e056*_0x11e056+_0xd7dbf9*_0xd7dbf9));switch(_0xe9d734>>>0x249a*-0x1+0x17cb+0xced){case-0x70d+-0xff*-0x1f+-0x17d4:_0x12bbb2['set'](_0x1ce3a1,_0x11e056,_0xd7dbf9,_0x3057a6);break;case 0x2605+-0x67*-0x59+-0x49d3:_0x12bbb2['set'](_0x3057a6,_0x11e056,_0xd7dbf9,_0x1ce3a1);break;case-0x362*-0x5+-0x3*-0x919+-0x2c33:_0x12bbb2['set'](_0x11e056,_0x3057a6,_0xd7dbf9,_0x1ce3a1);break;case-0x3*0x147+0x231+-0x1*-0x1a7:_0x12bbb2['set'](_0x11e056,_0xd7dbf9,_0x3057a6,_0x1ce3a1);break;}},_0x494dbf=(_0x4f9554,_0x1b1bce,_0x52e3c3)=>_0x4f9554*(-0x9dc+0x23*-0x71+-0x32a*-0x8-_0x52e3c3)+_0x1b1bce*_0x52e3c3,_0x79ec75=[-0x11*-0x7c+0x2109*-0x1+-0x10*-0x18d,0x1906+-0xf08+0x6*-0x1a9,-0x10d*0x11+0xd23+0x4c9][_0xa3c9c7-(0x15d*-0x8+0x41*0x84+-0x169b)],_0x1834a7=0x1601+0xd*-0x1c9+-0x13a*-0x1;this['read']=_0x30fd61=>{const _0x4c43da=Math['floor'](_0x30fd61/(-0x13*-0x1fb+0x1e1c+-0x14f*0x33))*_0xb008fc;if(_0x1791a5&&(_0x5de24e(_0x1791a5,_0x1cea9a[_0x30fd61*_0x1834a7+(-0xf7*-0x26+-0x3c6+-0x20e4)]),_0x1791a5['x']=_0x494dbf(_0x5cfb66[_0x4c43da+(-0x12*-0x181+-0xaed+0x1025*-0x1)],_0x5cfb66[_0x4c43da+(-0x146b+0x2a2+0x11cc)],_0x1791a5['x']),_0x1791a5['y']=_0x494dbf(_0x5cfb66[_0x4c43da+(-0x15e1+-0xf15+-0x1*-0x24f7)],_0x5cfb66[_0x4c43da+(-0x6df*0x5+-0xc29*-0x1+0x1636)],_0x1791a5['y']),_0x1791a5['z']=_0x494dbf(_0x5cfb66[_0x4c43da+(-0x1705*-0x1+-0x2*0xcf0+-0x2dd*-0x1)],_0x5cfb66[_0x4c43da+(0x14be+0x5*-0x6e6+0xdc5)],_0x1791a5['z'])),_0x2c572c&&_0x30fdcf(_0x2c572c,_0x1cea9a[_0x30fd61*_0x1834a7+(-0x1*-0x1c41+0x741+0x95*-0x3d)]),_0x1c349e&&(_0x5de24e(_0x1c349e,_0x1cea9a[_0x30fd61*_0x1834a7+(-0x9ce+-0x4*-0x3+0x9c4)]),_0x1c349e['x']=_0x494dbf(_0x5cfb66[_0x4c43da+(0x16*0x95+-0xd4c+0x84)],_0x5cfb66[_0x4c43da+(-0x35*-0x23+-0x1fbb+0x1885)],_0x1c349e['x']),_0x1c349e['y']=_0x494dbf(_0x5cfb66[_0x4c43da+(-0xc12+0x522+0x6f7)],_0x5cfb66[_0x4c43da+(-0x419+0x4f*0x49+-0x1264)],_0x1c349e['y']),_0x1c349e['z']=_0x494dbf(_0x5cfb66[_0x4c43da+(0xbed+-0x225d+0x1678)],_0x5cfb66[_0x4c43da+(-0x28*0xb9+-0xf6d+0x2c60)],_0x1c349e['z'])),_0x5ebd65&&(_0x45c600(_0x5ebd65,_0x1cea9a[_0x30fd61*_0x1834a7+(-0x13a*-0x19+0x1*-0x185f+0x4*-0x192)]),_0xb008fc>-0xc25+0x112*-0x6+0x129d*0x1&&(_0x5ebd65['x']=_0x494dbf(_0x5cfb66[_0x4c43da+(-0x15b2+0x1*0xe9e+0x720)],_0x5cfb66[_0x4c43da+(0xb*-0x1c6+-0x16a0+0x2a31)],_0x5ebd65['x']),_0x5ebd65['y']=_0x494dbf(_0x5cfb66[_0x4c43da+(-0x820+0xc3e+-0x3*0x15b)],_0x5cfb66[_0x4c43da+(-0xe45+0x657*0x3+-0x4b0)],_0x5ebd65['y']),_0x5ebd65['z']=_0x494dbf(_0x5cfb66[_0x4c43da+(0x93f+-0xc6a+0x1*0x339)],_0x5cfb66[_0x4c43da+(-0x340+-0x1759+0xd55*0x2)],_0x5ebd65['z']))),_0x3ee966&&(_0x5de24e(_0x3ee966,_0x1cea9a[_0x30fd61*_0x1834a7+(0x2*-0xf72+-0x1dd2+0x3cba)]),_0x3ee966['x']=_0x494dbf(_0x5cfb66[_0x4c43da+(0xebb+0x30f*-0x8+-0x5d*-0x1b)],_0x5cfb66[_0x4c43da+(0x6b9+0x1713+0x1db7*-0x1)],_0x3ee966['x']),_0x3ee966['y']=_0x494dbf(_0x5cfb66[_0x4c43da+(-0x11d7+0x198+-0x2*-0x829)],_0x5cfb66[_0x4c43da+(-0x1021+-0x1252+-0x4ef*-0x7)],_0x3ee966['y']),_0x3ee966['z']=_0x494dbf(_0x5cfb66[_0x4c43da+(0x258e+-0x1*0x265a+0xe0)],_0x5cfb66[_0x4c43da+(-0x4*-0x662+-0x2c1*0x1+-0x16b0)],_0x3ee966['z'])),_0x19421c&&(_0x5de24e(_0x19421c,_0x1cea9a[_0x30fd61*_0x1834a7+(0xbb2+0x3eb*0x6+-0x232f*0x1)]),_0x19421c['x']=_0x494dbf(_0x5cfb66[_0x4c43da+(-0xcaf*0x3+0x1*-0xe11+-0x2*-0x1a1b)],_0x5cfb66[_0x4c43da+(-0xa86*-0x2+0xd72+-0x2265)],_0x19421c['x']),_0x19421c['y']=_0x494dbf(_0x5cfb66[_0x4c43da+(0x1f3f*0x1+0x1113+-0x3038)],_0x5cfb66[_0x4c43da+(-0x2ee+-0x1b*0x16d+-0x376*-0xc)],_0x19421c['y'])),_0x2798cf&&_0xa3c9c7>-0x1ccd+-0xdba+0x2a87){const _0x1cc777=[_0x447115,_0x331499,_0x2c8838];for(let _0x32a4d9=0x23ce+-0x5d*-0xe+-0xa39*0x4;_0x32a4d9<0x24*0x8+0x3a*0x29+0xa67*-0x1;++_0x32a4d9)for(let _0x3171cd=0x1703+-0x19f+-0x1564*0x1;_0x3171cd<-0x215a*-0x1+0xb61*0x1+0x6*-0x772;++_0x3171cd)_0x2798cf[_0x32a4d9*(-0x2b*-0x2f+-0x1542+0xd6c)+_0x3171cd]=_0x3171cd<_0x79ec75?_0x1cc777[_0x32a4d9][_0x30fd61*(-0x3*-0x43f+0x1*-0x9e5+0x59*-0x8)+_0x3171cd]*((-0x1*0xd4f+0x116a+-0x7*0x95)/(-0x1a77+0x1*-0x177b+0x32f1))-(0x1076+0x204e+-0x30c0):0xd48+-0x1c92+0xf4a;}};}}self['onmessage']=async _0x37b235=>{var _0x4841d2,_0x40571b,_0x1cd868;const {data:_0x5e4698}=_0x37b235;switch(_0x5e4698['type']){case'initWorker':globalThis['loadUrlLis'+'t']=_0x5e4698['loadUrlLis'+'t'],globalThis['fetchWorke'+'r']=new _0x2721b4(globalThis['loadUrlLis'+'t']);break;case'destroyWor'+'ker':(_0x4841d2=globalThis['fetchWorke'+'r'])==null||_0x4841d2['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['loadUrlLis'+'t']=[];break;case'loadPly':const {url:_0x140452,decompress:_0x5efb2e}=_0x5e4698;try{globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x2721b4(globalThis['loadUrlLis'+'t']));const _0x4ea78f=await globalThis['fetchWorke'+'r']['fetch'](_0x140452);if(!_0x4ea78f||!_0x4ea78f['body'])self['postMessag'+'e']({'type':'error','data':'Error\x20load'+'ing\x20resour'+'ce','url':_0x140452});else{const _0x1ff459=parseInt(_0x4ea78f['headers']['get']('content-le'+'ngth')??'0',-0x554+0x883+-0x325);self['postMessag'+'e']({'type':'totalLengt'+'h','totalLength':_0x1ff459,'bytes':0x0,'url':_0x140452});let _0x4f6dfe=await _0x2cce66(_0x4ea78f['body']['getReader'](),_0x53f90e=>{self['postMessag'+'e']({'type':'progress','bytes':_0x53f90e,'totalLength':_0x1ff459,'url':_0x140452});});if(_0x5efb2e&&_0x4f6dfe['isCompress'+'ed']){const _0x32dbbb=_0x335c1f(_0x4f6dfe),_0x199b3b=(_0x40571b=_0x32dbbb==null?void(-0x33c+-0x679+0x9b5):_0x32dbbb['elements'][-0x7f7*0x3+-0x1a74+0x1*0x3259])==null?void(0x1dea+0x9*-0x32b+-0x167):_0x40571b['properties']['map'](_0x56e16d=>_0x56e16d['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x32dbbb,'url':_0x140452},_0x199b3b);}else{if(_0x4f6dfe['isCompress'+'ed']){const _0x1a4e05=['chunkData','vertexData'];_0x4f6dfe['shData0']&&_0x1a4e05['push']('shData0','shData1','shData2');const _0x4a1c2c=_0x1a4e05['map'](_0x29fcbc=>{var _0x15cd79;return(_0x15cd79=_0x4f6dfe[_0x29fcbc])==null?void(-0xde2+-0x34a*-0xb+-0x164c):_0x15cd79['buffer'];});self['postMessag'+'e']({'type':'splatData','data':_0x4f6dfe,'url':_0x140452},_0x4a1c2c);}else{_0x4f6dfe=_0x5392c9(_0x4f6dfe);const _0x484b0f=(_0x1cd868=_0x4f6dfe==null?void(0x5*0x5bf+0x23c6+-0x4081):_0x4f6dfe['elements'][0xe43+0xe71*0x1+-0x1cb4])==null?void(0xed1*-0x2+0x6c1+0x16e1):_0x1cd868['properties']['map'](_0x1f5ce5=>_0x1f5ce5['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x4f6dfe,'url':_0x140452},_0x484b0f);}}}}catch(_0x44a060){self['postMessag'+'e']({'type':'error','data':_0x44a060['message'],'url':_0x140452});}break;}};const _0x5392c9=_0x340f08=>{var _0x3c8067;const _0x1646f2=(_0x3c8067=_0x340f08==null?void(-0xd5d*0x1+-0xbce+-0x17b*-0x11):_0x340f08['elements'][0x1474+-0x1139*-0x2+-0x36e6])==null?void(-0x6*-0x4c1+0x1af3*0x1+-0x3779):_0x3c8067['properties']['find'](_0x2118b3=>_0x2118b3['name']==='opacity');if(_0x1646f2){for(let _0x3340ee=-0x1ce7+0x2092+-0x3ab;_0x3340ee<_0x1646f2['storage']['length'];_0x3340ee++)_0x1646f2['storage'][_0x3340ee]=(-0x1*0x15e9+-0xc79+-0x1*-0x2263)/(-0x51d+-0x233a+-0x4*-0xa16+Math['exp'](-_0x1646f2['storage'][_0x3340ee]));}return _0x340f08;},_0x171304=_0x4f2e8a=>{const _0x21e0dc=[],_0x1cd51d=[];let _0x2a7514;for(let _0x3b5c02=-0x263b*-0x1+0x9ad*0x1+-0x2fe7;_0x3b5c02<_0x4f2e8a['length'];++_0x3b5c02){const _0x49c943=_0x4f2e8a[_0x3b5c02]['split']('\x20');switch(_0x49c943[-0xfd8+-0x1117*-0x1+-0x1d*0xb]){case'comment':_0x1cd51d['push'](_0x49c943['slice'](0x1795*-0x1+-0x2330+0x3ac6*0x1)['join']('\x20'));break;case'format':_0x2a7514=_0x49c943[0xb57+-0x18*-0x80+0x67*-0x3a];break;case'element':_0x21e0dc['push']({'name':_0x49c943[0x1d4d+-0x2*0x5d1+0x22*-0x85],'count':parseInt(_0x49c943[-0x1fc3+0xb*-0x11b+0x15f7*0x2],-0x53c+-0x26a7+0x8c9*0x5),'properties':[]});break;case'property':{if(!_0x1f1782['has'](_0x49c943[-0x5*0x4cd+0x128a+-0x4*-0x15e]))throw new Error('Unrecogniz'+'ed\x20propert'+'y\x20data\x20typ'+'e\x20\x27'+_0x49c943[0x1fb3+0x20f6+-0x2054*0x2]+('\x27\x20in\x20ply\x20h'+'eader'));_0x21e0dc[_0x21e0dc['length']-(-0x18a4+-0x74c+0x1ff1)]['properties']['push']({'type':_0x49c943[0x7f*-0x45+0x564+-0x238*-0xd],'name':_0x49c943[0x43a+0x49*0x65+0x4f*-0x6b],'storage':null,'byteSize':_0x1f1782['get'](_0x49c943[0x1a5c+0xc8e+-0x26e9*0x1])['BYTES_PER_'+'ELEMENT']});break;}default:throw new Error('Unrecogniz'+'ed\x20header\x20'+'value\x20\x27'+_0x49c943[0x26be+0x6b*-0x19+0x1c4b*-0x1]+('\x27\x20in\x20ply\x20h'+'eader'));}}return{'elements':_0x21e0dc,'format':_0x2a7514,'comments':_0x1cd51d};},_0x10bf68=_0x40707e=>{const _0x21ff9b=['min_x','min_y','min_z','max_x','max_y','max_z','min_scale_'+'x','min_scale_'+'y','min_scale_'+'z','max_scale_'+'x','max_scale_'+'y','max_scale_'+'z','min_r','min_g','min_b','max_r','max_g','max_b','min_motion'+'_x','min_motion'+'_y','min_motion'+'_z','max_motion'+'_x','max_motion'+'_y','max_motion'+'_z','min_time_s'+'cale','max_time_s'+'cale','min_time','max_time'],_0xb974f2=['packed_pos'+'ition','packed_rot'+'ation','packed_sca'+'le','packed_col'+'or','packed_mot'+'ion','packed_tim'+'e'],_0x437982=new Array(-0x1*-0x1891+0x520+-0x1d84)['fill']('')['map']((_0x2582d8,_0x4afd31)=>'f_rest_'+_0x4afd31),_0x365b16=()=>_0x40707e[0x294+0x794+-0xa28]['name']==='chunk'&&_0x40707e[0x1196+-0xb11+-0x685]['properties']['every']((_0x4ca8ab,_0x56831c)=>_0x4ca8ab['name']===_0x21ff9b[_0x56831c]&&_0x4ca8ab['type']==='float')&&_0x40707e[-0x1*0x164d+-0x1*0xeab+0xf*0x277]['name']==='vertex'&&_0x40707e[0x1*0x2e+0x24c1+-0x1*0x24ee]['properties']['every']((_0x39b004,_0x3444b3)=>_0x39b004['name']===_0xb974f2[_0x3444b3]&&_0x39b004['type']==='uint'),_0x1eec35=()=>_0x40707e[-0x815+-0x16+-0x1*-0x82d]['name']==='sh'&&[0x1717+0x76*-0x4e+-0xce6*-0x1,-0x1*0x1892+0x10ed+0x7bd,-0x13*0x7f+-0x1403+0x1d9d]['indexOf'](_0x40707e[-0x1*0x9fd+0x1334+-0x935]['properties']['length'])!==-(-0xf05+-0x19ff+-0x1*-0x2905)&&_0x40707e[-0x8bd*0x1+-0x1*-0xaf1+0x232*-0x1]['properties']['every']((_0x4a473f,_0x491056)=>_0x4a473f['name']===_0x437982[_0x491056]&&_0x4a473f['type']==='uchar');return _0x40707e['length']===0xc51+0x1e8f*0x1+-0x2ade&&_0x365b16()||_0x40707e['length']===-0x61*-0x55+-0x1765+0x3*-0x2ef&&_0x365b16()&&_0x1eec35();},_0x90ec83=_0x144cac=>_0x144cac['length']===-0x13ca+0xb*-0x57+0x1788&&_0x144cac[0x5*-0x783+0x1*-0x1d+0x1*0x25ac]['name']==='vertex'&&_0x144cac[-0x17ce+0x85d*-0x4+-0x1ca1*-0x2]['properties']['every'](_0x410a5c=>_0x410a5c['type']==='float'),_0x87c2ee=async(_0x4b9963,_0x199f1a,_0xad66d9)=>{const _0x4c6d9f=new _0x239330();_0x4c6d9f['comments']=_0xad66d9;const _0x4a9a79=_0x199f1a[0x9*-0x3aa+-0xef2+0x17f6*0x2]['count'],_0x2c74e7=_0x199f1a[0x5bb+-0x274+-0x347]['properties']['length'],_0x1328f7=_0x199f1a[0x10df+0x1*-0x1ab1+0x9d3]['count'],_0x1a8fc5=_0x199f1a[0x1b7c+-0x1*-0x2ab+-0x1e26]['properties']['some'](_0x419375=>_0x419375['name']==='packed_tim'+'e'),_0xfcdb0b=(_0x3df21e=>{const _0x4a10d7=Math['ceil'](Math['sqrt'](_0x3df21e)),_0x368fd5=Math['ceil'](_0x3df21e/_0x4a10d7);return _0x4a10d7*_0x368fd5;})(_0x1328f7);_0x4c6d9f['numSplats']=_0x1328f7,_0x4c6d9f['is4D']=_0x1a8fc5,_0x4c6d9f['chunkData']=new Float32Array(_0x4a9a79*_0x2c74e7),_0x4c6d9f['vertexData']=new Uint32Array(_0xfcdb0b*(0x1fe7+-0x15*0x136+-0x673));const _0x2f5bef=async(_0x4e2dc4,_0x4a5418)=>{const _0x46732f=new Uint8Array(_0x4e2dc4);let _0x179e2b=0x1d*-0x9f+0x1923+0x98*-0xc;for(;_0x179e2b<_0x4a5418;){for(;_0x4b9963['remaining']===0x17de+-0x697*-0x1+0x3*-0xa27;)await _0x4b9963['read']();const _0x17b1a9=Math['min'](_0x4a5418-_0x179e2b,_0x4b9963['remaining']),_0x55cea6=_0x4b9963['data'];for(let _0x495388=-0x1*0x1f6a+0x4b7+-0x5*-0x557;_0x495388<_0x17b1a9;++_0x495388)_0x46732f[_0x179e2b++]=_0x55cea6[_0x4b9963['head']++];}};if(await _0x2f5bef(_0x4c6d9f['chunkData']['buffer'],_0x4a9a79*_0x2c74e7*(0x8df*0x1+-0x1bed+0x1312)),await _0x2f5bef(_0x4c6d9f['vertexData']['buffer'],_0x1328f7*(0x59d*-0x1+-0xb18+0x10bb)*(-0xf48+0x1af7+-0xbab)),_0x199f1a['length']===0x1b1e+-0x1e2a+0x30f){const _0x1057f4=_0xfcdb0b*(-0x46f+-0x95b+0xdda),_0x44229e=new Uint8Array(_0x1057f4),_0x379979=new Uint8Array(_0x1057f4),_0x41dcff=new Uint8Array(_0x1057f4),_0x4bab12=-0x21e6*-0x1+0x1cb1+0x3a97*-0x1,_0xabbc4=_0x199f1a[0x1b58+0x880+-0x23d6]['properties']['length']/(0x2*-0x5e0+-0x83*0x41+0x6*0x781),_0x7954f3=new Uint8Array(_0x4bab12*_0xabbc4*(-0x18*-0x17f+0x63*0x1b+-0x2e56));for(let _0x392494=0xf2d+0x1e7+-0x1114;_0x392494<_0x4c6d9f['numSplats'];_0x392494+=_0x4bab12){const _0x3eb75d=Math['min'](_0x4bab12,_0x4c6d9f['numSplats']-_0x392494);await _0x2f5bef(_0x7954f3['buffer'],_0x3eb75d*_0xabbc4*(0x65f+-0x1893*0x1+0x1*0x1237));for(let _0x1d46f8=-0x2*0x1085+0x4*-0x2c3+0x2c16;_0x1d46f8<_0x3eb75d;++_0x1d46f8)for(let _0x4280c8=-0x1*-0x1fab+0x1*0x15b5+0x1ab*-0x20;_0x4280c8<0x5db+-0x25e0+-0x1*-0x2014;++_0x4280c8){const _0x355817=(_0x392494+_0x1d46f8)*(0x1f1c+0x20fb+-0x4007)+_0x4280c8;_0x4280c8<_0xabbc4?(_0x44229e[_0x355817]=_0x7954f3[(_0x1d46f8*(-0xa4*0x35+0x133+-0x12*-0x1d2)+(-0x199a+0x8*0x13+0x2*0xc81))*_0xabbc4+_0x4280c8],_0x379979[_0x355817]=_0x7954f3[(_0x1d46f8*(-0x1af*0x4+-0x1d04*0x1+0x23c3)+(0x52c+0x2d*0x97+0x3*-0xa92))*_0xabbc4+_0x4280c8],_0x41dcff[_0x355817]=_0x7954f3[(_0x1d46f8*(0x20e2+0xd5*0xd+-0x1d2*0x18)+(-0x1*0xdd3+-0x608+0x153*0xf))*_0xabbc4+_0x4280c8]):(_0x44229e[_0x355817]=0x1*0x12f+0x90*0x21+-0x1340,_0x379979[_0x355817]=0x139*0x7+0x2606*0x1+-0x2e16,_0x41dcff[_0x355817]=-0xfc4+0x1*-0xe2f+0x2*0xf39);}}_0x4c6d9f['shData0']=_0x44229e,_0x4c6d9f['shData1']=_0x379979,_0x4c6d9f['shData2']=_0x41dcff,_0x4c6d9f['shBands']={0x3:0x1,0x8:0x2,0xf:0x3}[_0xabbc4];}else _0x4c6d9f['shBands']=0xfc+0x10*-0x15+0x54;return _0x4c6d9f;},_0x4a9d37=async(_0x1050e3,_0x4b692f,_0x5c5a2b)=>{const _0x397fda=_0x4b692f[0x1*0x25fa+-0xb*-0xce+-0x2*0x176a],_0x31acfb=_0x397fda['properties'],_0x26b041=_0x31acfb['length'],_0x262033=_0x31acfb['map'](_0xf21a26=>_0xf21a26['storage']),_0x321c4d=_0x31acfb['reduce']((_0x5e27ab,_0x5bbc93)=>_0x5e27ab+_0x5bbc93['byteSize'],0x27b*-0xa+0x1*0x3e3+0x14eb);let _0x5f0e68=0x1b50+0x10*0x1d3+-0x3880,_0x3bf7c3;const _0x1ba2c2=()=>{const _0x106756=_0x1050e3['data']['buffer'];(_0x3bf7c3==null?void(-0x14*-0x13+0x3*0x245+0x1*-0x84b):_0x3bf7c3['buffer'])!==_0x106756&&(_0x3bf7c3=new Float32Array(_0x106756,-0x26ab+0x9*-0x172+-0x1*-0x33ad,_0x106756['byteLength']/(-0xe*-0x101+-0x2359+0x5*0x443)));};for(_0x1ba2c2();_0x5f0e68<_0x397fda['count'];){for(;_0x1050e3['remaining']<_0x321c4d;)await _0x1050e3['read'](),_0x1ba2c2();const _0x17e35e=Math['min'](_0x397fda['count']-_0x5f0e68,Math['floor'](_0x1050e3['remaining']/_0x321c4d));for(let _0x1aa68d=-0x810*0x1+0x8d*-0x39+0x2775;_0x1aa68d<_0x26b041;++_0x1aa68d){const _0x55fc1d=_0x262033[_0x1aa68d];for(let _0x5a4c12=0x4*-0x5d1+-0x132+0x1876;_0x5a4c12<_0x17e35e;++_0x5a4c12)_0x55fc1d[_0x5a4c12+_0x5f0e68]=_0x3bf7c3[_0x5a4c12*_0x26b041+_0x1aa68d];}_0x5f0e68+=_0x17e35e,_0x1050e3['head']+=_0x17e35e*_0x321c4d;}return new _0x26d294(_0x4b692f,_0x5c5a2b);},_0x58c29f=async(_0x2f4449,_0x327ff9,_0x3f90fc)=>{for(let _0xab06d5=-0x1*-0x231b+0x1d7c+0x4097*-0x1;_0xab06d5<_0x327ff9['length'];++_0xab06d5){const _0x346fe9=_0x327ff9[_0xab06d5],_0x4fb162=_0x346fe9['properties']['reduce']((_0x517001,_0x5d6670)=>_0x517001+_0x5d6670['byteSize'],0x2da+0x2c*-0x31+0x592),_0x31badc=_0x346fe9['properties']['map'](_0x374602=>{if(_0x374602['storage'])switch(_0x374602['type']){case'char':return(_0xc90a98,_0x592a78)=>{_0x374602['storage'][_0x592a78]=_0xc90a98['getInt8']();};case'uchar':return(_0x410e7d,_0x29555a)=>{_0x374602['storage'][_0x29555a]=_0x410e7d['getUint8']();};case'short':return(_0x279e3d,_0x29fe7c)=>{_0x374602['storage'][_0x29fe7c]=_0x279e3d['getInt16']();};case'ushort':return(_0x590c4a,_0x1f4ebb)=>{_0x374602['storage'][_0x1f4ebb]=_0x590c4a['getUint16']();};case'int':return(_0x428a6e,_0x5b447f)=>{_0x374602['storage'][_0x5b447f]=_0x428a6e['getInt32']();};case'uint':return(_0x36c719,_0x5b7b9e)=>{_0x374602['storage'][_0x5b7b9e]=_0x36c719['getUint32']();};case'float':return(_0xfb17bc,_0x2f3ba3)=>{_0x374602['storage'][_0x2f3ba3]=_0xfb17bc['getFloat32']();};case'double':return(_0x3c9d62,_0x3ac88b)=>{_0x374602['storage'][_0x3ac88b]=_0x3c9d62['getFloat64']();};default:throw new Error('Unsupporte'+'d\x20property'+'\x20data\x20type'+'\x20\x27'+_0x374602['type']+('\x27\x20in\x20ply\x20h'+'eader'));}else return _0x4ab07c=>{_0x4ab07c['head']+=_0x374602['byteSize'];};});let _0x5c41a7=0xbad*0x3+0x1*-0x243e+-0x1*-0x137;for(;_0x5c41a7<_0x346fe9['count'];){for(;_0x2f4449['remaining']<_0x4fb162;)await _0x2f4449['read']();const _0x5eb75a=Math['min'](_0x346fe9['count']-_0x5c41a7,Math['floor'](_0x2f4449['remaining']/_0x4fb162));for(let _0x385da9=-0xea6+-0x5ba+-0x4*-0x518;_0x385da9<_0x5eb75a;++_0x385da9){for(let _0x23aaba=-0xd3+-0xf*-0x71+-0x5cc;_0x23aaba<_0x346fe9['properties']['length'];++_0x23aaba)_0x31badc[_0x23aaba](_0x2f4449,_0x5c41a7);_0x5c41a7++;}}}return new _0x26d294(_0x327ff9,_0x3f90fc);},_0x2cce66=async(_0x51ff73,_0x5f3387=null)=>{const _0x5c6d0e=(_0x460c06,_0x4d8096)=>{const _0x3c3bbc=_0x460c06['length']-_0x4d8096['length'];let _0x382776,_0xd901af;for(_0x382776=-0x1d3e+0x4bd+0x1881;_0x382776<=_0x3c3bbc;++_0x382776){for(_0xd901af=-0xe65+0x23*0x3+-0x2*-0x6fe;_0xd901af<_0x4d8096['length']&&_0x460c06[_0x382776+_0xd901af]===_0x4d8096[_0xd901af];++_0xd901af);if(_0xd901af===_0x4d8096['length'])return _0x382776;}return-(0xb10+-0xad+-0x531*0x2);},_0x3360b5=(_0x17f9f7,_0x3935c8)=>{if(_0x17f9f7['length']<_0x3935c8['length'])return!(-0x53*0x17+-0x1*0x1063+0x17d9);for(let _0xbbb1f5=0x1*0x2311+-0x21b9*0x1+-0x1*0x158;_0xbbb1f5<_0x3935c8['length'];++_0xbbb1f5)if(_0x17f9f7[_0xbbb1f5]!==_0x3935c8[_0xbbb1f5])return!(-0x490+-0x1b7e+0x200f);return!(0x20fc+0x1*0x253d+0x4639*-0x1);},_0x37af19=new _0x16c228(_0x51ff73,_0x5f3387);let _0x550f16;for(;;){if(await _0x37af19['read'](),_0x37af19['tail']>=_0x11d9a4['length']&&!_0x3360b5(_0x37af19['data'],_0x11d9a4))throw new Error('Invalid\x20pl'+'y\x20header');if(_0x550f16=_0x5c6d0e(_0x37af19['data'],_0x57ab15),_0x550f16!==-(0x963*0x4+0x14*0x1ac+0x46fb*-0x1))break;}const _0xdbea11=new TextDecoder('ascii')['decode'](_0x37af19['data']['subarray'](-0x1*0xc0b+-0x1dea+-0x29f5*-0x1,_0x550f16))['split']('\x0a'),{elements:_0x487a78,format:_0x1871a1,comments:_0x1036ff}=_0x171304(_0xdbea11);if(_0x1871a1!=='binary_lit'+'tle_endian')throw new Error('Unsupporte'+'d\x20ply\x20form'+'at');return _0x37af19['head']=_0x550f16+_0x57ab15['length'],_0x37af19['compact'](),await((async()=>_0x10bf68(_0x487a78)?await _0x87c2ee(_0x37af19,_0x487a78,_0x1036ff):(_0x487a78['forEach'](_0x36c41d=>{_0x36c41d['properties']['forEach'](_0x2385b4=>{const _0x63c4eb=_0x1f1782['get'](_0x2385b4['type']);if(_0x63c4eb){const _0x4c0830=new _0x63c4eb(_0x36c41d['count']);_0x2385b4['storage']=_0x4c0830;}});}),_0x90ec83(_0x487a78)?await _0x4a9d37(_0x37af19,_0x487a78,_0x1036ff):await _0x58c29f(_0x37af19,_0x487a78,_0x1036ff)))());},_0x335c1f=_0xf25d0d=>{const {numSplats:_0x9c05cd,chunkData:_0x5adb94,chunkSize:_0x3a9851,vertexData:_0xf34b70,shData0:_0x184a88,shData1:_0x4fef23,shData2:_0x4cd0c4,shBands:_0x23150a,comments:_0x59c79d,is4D:_0x543a1a}=_0xf25d0d,_0x4e04a4=['x','y','z','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','f_dc_0','f_dc_1','f_dc_2','opacity'];if(_0x543a1a&&_0x4e04a4['push']('t','t_scale','motion_0','motion_1','motion_2'),_0x23150a>0x40e+-0xaa9+0x69b){const _0x3fe5d1=[];for(let _0x4b7b05=0x452+-0x2608*-0x1+0x70f*-0x6;_0x4b7b05<0x246b*0x1+-0x4f1+-0x1f4d;++_0x4b7b05)_0x3fe5d1['push']('f_rest_'+_0x4b7b05);_0x4e04a4['splice'](_0x4e04a4['indexOf']('f_dc_0')+(-0x1991+-0x1f*-0x3f+0x11f1),0xa5*-0x26+0x11e0+-0x79*-0xe,..._0x3fe5d1);}const _0x32171e={};_0x4e04a4['forEach'](_0x1149e=>{_0x32171e[_0x1149e]=new Float32Array(_0x9c05cd);});const _0x21d36f=new _0x119839(),_0x5dc45a=new _0x11c733(),_0x390cf3=new _0x119839(),_0x543d10=new _0x410e23(),_0x434849=new _0x119839(),_0x249c57=new _0x119839(),_0x544a6c=_0x23150a>0x12e6+-0x7b*-0x34+-0x2be2?new Float32Array(-0x409*0x2+0xca7+-0x468):null,_0x2fd5fd=new _0x53dda0(_0x5adb94,_0x3a9851,_0xf34b70,_0x184a88,_0x4fef23,_0x4cd0c4,_0x23150a,_0x21d36f,_0x5dc45a,_0x390cf3,_0x543d10,_0x434849,_0x249c57,_0x544a6c);for(let _0x47619b=-0xe26+0x3b9+0xa6d;_0x47619b<_0x9c05cd;++_0x47619b){_0x2fd5fd['read'](_0x47619b),_0x32171e['x'][_0x47619b]=_0x21d36f['x'],_0x32171e['y'][_0x47619b]=_0x21d36f['y'],_0x32171e['z'][_0x47619b]=_0x21d36f['z'],_0x32171e['rot_1'][_0x47619b]=_0x5dc45a['x'],_0x32171e['rot_2'][_0x47619b]=_0x5dc45a['y'],_0x32171e['rot_3'][_0x47619b]=_0x5dc45a['z'],_0x32171e['rot_0'][_0x47619b]=_0x5dc45a['w'],_0x32171e['scale_0'][_0x47619b]=_0x390cf3['x'],_0x32171e['scale_1'][_0x47619b]=_0x390cf3['y'],_0x32171e['scale_2'][_0x47619b]=_0x390cf3['z'],_0x32171e['motion_0'][_0x47619b]=_0x434849['x'],_0x32171e['motion_1'][_0x47619b]=_0x434849['y'],_0x32171e['motion_2'][_0x47619b]=_0x434849['z'],_0x32171e['t_scale'][_0x47619b]=_0x249c57['x'],_0x32171e['t'][_0x47619b]=_0x249c57['y'],_0x32171e['f_dc_0'][_0x47619b]=(_0x543d10['x']-(0x13*0x3e+0x1*0x1d77+-0x2211+0.5))/_0x581f7c,_0x32171e['f_dc_1'][_0x47619b]=(_0x543d10['y']-(0x187a+0x21b6+-0x3a30+0.5))/_0x581f7c,_0x32171e['f_dc_2'][_0x47619b]=(_0x543d10['z']-(-0x1*-0x546+0x6ee+-0x61a*0x2+0.5))/_0x581f7c;const _0x47f70a=_0x543d10['w']<=0x113c+-0x59d+-0xb9f?-(0x1e7e+0x8c+-0x1ee2):_0x543d10['w']>=0x2b*-0xa6+0x1934*0x1+0x2af?0x2533+0xad*0x5+-0x286c:-Math['log']((0x7*-0x52+-0x1bc+0x3fb)/_0x543d10['w']-(0x2472+0x1*0x7e3+0x4*-0xb15));if(_0x32171e['opacity'][_0x47619b]=(-0x2*-0x94e+0x500*0x1+-0x179b)/(0x2479+-0xfb0*0x2+-0x518+Math['exp'](-_0x47f70a)),_0x544a6c){for(let _0x324e0b=-0x1df2+0x2026*0x1+0x5e*-0x6;_0x324e0b<0xa49*-0x1+0x2*-0xc0e+0x2292;++_0x324e0b)_0x32171e['f_rest_'+_0x324e0b][_0x47619b]=_0x544a6c[_0x324e0b];}}const _0x3021b9=[{'count':_0x9c05cd,'name':'vertex','properties':_0x4e04a4['map'](_0x4bab6f=>({'byteSize':0x4,'name':_0x4bab6f,'type':'float','storage':_0x32171e[_0x4bab6f]}))}];return new _0x26d294(_0x3021b9,_0x59c79d);};}class ok extends me{constructor(_0x197be7){super(),h(this,'worker'),h(this,'loadUrlLis'+'t'),(this['loadUrlLis'+'t']=_0x197be7,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+nk['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','loadUrlList':this['loadUrlLis'+'t']});}['loadPly'](_0x3e0f9f,_0x4039d1,_0xca214b=(_0x3ba4fd,_0x23f9c1)=>{},_0x2bb557=(_0x1f798a,_0x270003,_0x12d1ee)=>{},_0x2d1868=(_0x52273f,_0x1941a7)=>{}){var _0x45ec4a;return(_0x45ec4a=this['worker'])==null||_0x45ec4a['postMessag'+'e']({'type':'loadPly','url':_0x3e0f9f,'decompress':_0x4039d1}),new Promise((_0x22b940,_0x54489f)=>{if(!this['worker']){_0x54489f(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x503e12=>{if(!this['worker'])return;const {data:_0x24e9de}=_0x503e12;if(_0x3e0f9f===_0x24e9de['url'])switch(_0x24e9de['type']){case'totalLengt'+'h':_0xca214b==null||_0xca214b(_0x24e9de['totalLengt'+'h'],_0x24e9de['url']);break;case'progress':_0x2bb557==null||_0x2bb557(_0x24e9de['bytes'],_0x24e9de['totalLengt'+'h'],_0x24e9de['url']);break;case'splatData':_0x22b940(_0x24e9de['data']);break;case'error':_0x2d1868==null||_0x2d1868(_0x24e9de['data'],_0x24e9de['url']);break;}};});}['destroy'](){this['loadUrl']='',this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(0x1f2a+-0x2a8+-0x1c82));}}class lk{constructor(_0x3e2dd4,_0x5d5499){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'readWorker'),(console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','Register\x20P'+'lyParser.c'+'onstructor'),this['app']=_0x3e2dd4,this['maxRetries']=_0x5d5499,this['urlList']=[],this['gsplatReso'+'urce']=null,this['readWorker']=null,this['totalRecei'+'ved']=0x1bee+-0x122e+-0xc*0xd0);}async['load'](_0x38f796,_0x1f1546,_0x4f14a9){var _0x31858c,_0x71031,_0x33bf9e;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','PlyParser.'+'load'),this['urlList']=[],_0x38f796['load']['includes'](',')?this['urlList']=_0x38f796['load']['split'](','):this['urlList']['push'](_0x38f796['load']);const _0x5c6295=_0x4f14a9['data']['createTime']!==((_0x71031=(_0x31858c=this['onlyOneAss'+'et'])==null?void(-0xec7+0x2*-0x94f+0x67*0x53):_0x31858c['data'])==null?void(0xd*-0x1cd+0x18a*0x3+0x12cb):_0x71031['createTime']);(!this['readWorker']||_0x5c6295)&&((_0x33bf9e=this['readWorker'])==null||_0x33bf9e['destroy'](),this['readWorker']=new ok(this['urlList']));const _0x2d3088=_0x4f14a9['data']['loadIndex']>=-0xdf0*-0x1+-0x12c7+0x4d7?_0x4f14a9['data']['loadIndex']:0x71*0x38+0xfa1+-0x3ab*0xb,_0x46d6fc=_0x4f14a9['data']['loadMode']==='all'?this['urlList']['length']-_0x2d3088:_0x2d3088+(-0x845+0xc2e+0x2*-0x1f4),_0xd4e961=_0x4f14a9['data']['timeOption'],_0x4c4643=_0x4f14a9['data']['events'];for(let _0x2db08c=_0x2d3088;_0x2db08c<_0x46d6fc;_0x2db08c++)await this['loadGsplat'+'Data'](this['urlList'],_0x1f1546,_0x4f14a9,_0x2db08c,_0xd4e961,_0x4c4643,_0x46d6fc);_0x4c4643['fire']('loadAllAss'+'etsDone');}async['loadGsplat'+'Data'](_0x2e597c,_0x209ce9,_0x4cdbcb,_0x313b62,_0x1466c5,_0x2332b2,_0x5d6119){var _0x1609c3,_0x1d4319,_0x380f60;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','loadGsplat'+'Data',_0x2e597c[_0x313b62]['trim'](),_0x313b62);const _0x16ba28=_0x1466c5[(0x461*-0x7+-0x143b+0x32e4)*_0x313b62]+_0x1466c5[(0x12f5+-0x230d*0x1+-0xe5*-0x12)*_0x313b62+(-0x409*0x3+-0x1ce2+-0x6*-0x6d5)],_0x219b83=_0x2e597c[_0x313b62]['trim']();globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('loadTime','=========='+'=========='+'=========='+'=========='+'=========='+'====='),console['log']('loadTime','start\x20load'+'\x20ply\x20data',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(-0x1490+-0x121c+0x3a34))['toFixed'](0x6cd*-0x1+-0xe*-0x1c1+-0x11bf));try{const _0x1e7395=await((_0x1609c3=this['readWorker'])==null?void(0x3d2*-0x6+0x3*-0x3e5+0x229b*0x1):_0x1609c3['loadPly'](_0x219b83,_0x4cdbcb['data']['decompress'],()=>{this['totalRecei'+'ved']=-0x16e1+-0x79a+0x1e7b;},(_0x15ec40,_0x189487)=>{this['totalRecei'+'ved']+=_0x15ec40,_0x4cdbcb&&_0x2332b2['fire']('progress',_0x189487*_0x313b62/_0x5d6119+this['totalRecei'+'ved']/_0x5d6119,_0x189487);},(_0xca2adb,_0xcedc40)=>{debugger;console['warn']('ERROE\x20Load'+'\x20Ply',_0xcedc40,_0xca2adb);}));let _0xe9d7c;console['log']('loadTime','load\x20ply\x20d'+'ata\x20done',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(-0xa01*0x3+0x2445+-0xd46*-0x1))['toFixed'](0x11c*-0x13+0x597+0xf7f)),_0x1e7395['isCompress'+'ed']?(_0xe9d7c=new ak(),_0xe9d7c['comments']=_0x1e7395['comments'],_0xe9d7c['numSplats']=_0x1e7395['numSplats'],_0xe9d7c['is4D']=_0x1e7395['is4D'],_0xe9d7c['chunkData']=_0x1e7395['chunkData'],_0xe9d7c['vertexData']=_0x1e7395['vertexData'],_0xe9d7c['shData0']=_0x1e7395['shData0'],_0xe9d7c['shData1']=_0x1e7395['shData1'],_0xe9d7c['shData2']=_0x1e7395['shData2'],_0xe9d7c['shBands']=_0x1e7395['shBands']):_0xe9d7c=new qn(_0x1e7395['elements'],_0x1e7395['comments']),_0x4cdbcb['fire']('load:data',_0xe9d7c),_0xe9d7c['isCompress'+'ed']||_0x4cdbcb['data']['reorder'];const _0x3a6fce=_0x4cdbcb['data']['createTime']!==((_0x380f60=(_0x1d4319=this['onlyOneAss'+'et'])==null?void(-0x16*0x1bd+0x7ae*0x2+0x1*0x16e2):_0x1d4319['data'])==null?void(-0x1b55+-0x2ae*-0xe+0x365*-0x3):_0x380f60['createTime']);this['gsplatReso'+'urce']&&!_0x3a6fce?this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0xe9d7c['isCompress'+'ed']?await _0xe9d7c['decompress']():_0xe9d7c,_0x1466c5,_0x16ba28,_0x4cdbcb,_0x2332b2):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),this['gsplatReso'+'urce']=new EC(this['app']['graphicsDe'+'vice'],_0xe9d7c['isCompress'+'ed']?await _0xe9d7c['decompress']():_0xe9d7c),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x1466c5,this['onlyOneAss'+'et']=_0x4cdbcb),_0x209ce9(null,this['gsplatReso'+'urce']);}catch(_0x4a10ec){_0x209ce9(_0x4a10ec,null);}}['open'](_0x4a7c23,_0x43799f){return _0x43799f;}}async function ck(){const _0x476b6e='super4d-ca'+'che-v1',_0x506314={'maxAge':0x202fbf000,'maxSize':0x280000000},_0x1f3dc6=0x191e*0x1+-0x3*0x15f+-0x1501*0x1+0.28209479177387814;class _0x58dffd{constructor(_0x364940={}){this['options']={..._0x506314,..._0x364940},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=0x19b7+-0x47*0x35+-0xb04,this['initialize'+'d']=!(0xb*-0x1a3+0x3cd*0x1+0xe35);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x476b6e);const _0x212025=await this['cache']['keys'](),_0x10b865=[];for(const _0x58e3bc of _0x212025){const _0x246128=_0x58e3bc['url'],_0x2d9852=await this['cache']['match'](_0x246128);if(_0x2d9852){const _0x45fd55=(await _0x2d9852['blob']())['size'],_0x47925e=_0x2d9852['headers']['get']('x-cache-ti'+'me');_0x47925e&&_0x10b865['push']({'url':_0x246128,'size':_0x45fd55,'cacheTime':parseInt(_0x47925e)});}}_0x10b865['sort']((_0x1623b3,_0x3ae1d6)=>_0x1623b3['cacheTime']-_0x3ae1d6['cacheTime']);for(const _0xa67dfb of _0x10b865)this['cacheSizes']['set'](_0xa67dfb['url'],_0xa67dfb['size']),this['currentSiz'+'e']+=_0xa67dfb['size'],this['lruList']['push'](_0xa67dfb['url']);}catch(_0x58fd7b){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x58fd7b);}this['initialize'+'d']=!(-0x1*-0x1173+-0x15a6+0x5*0xd7);}}async['get'](_0x25e15a){if(await this['init'](),!this['cache'])return null;try{const _0x13f227=await this['cache']['match'](_0x25e15a);if(!_0x13f227)return null;const _0x1cb65a=_0x13f227['headers']['get']('x-cache-ti'+'me');return _0x1cb65a&&Date['now']()-parseInt(_0x1cb65a)>this['options']['maxAge']?(await this['delete'](_0x25e15a),null):(this['updateLRU'](_0x25e15a),_0x13f227);}catch{return null;}}async['set'](_0x18254b,_0x6948ce){if(!(!this['cache']||_0x18254b['startsWith']('blob:')))try{const _0x315f7b=_0x6948ce['clone'](),_0x51f18a=await _0x315f7b['blob'](),_0x1f9466=_0x51f18a['size'];this['currentSiz'+'e']+_0x1f9466>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x1f9466);const _0x737938=new Headers(_0x315f7b['headers']);_0x737938['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x4ec8ce=new Response(_0x51f18a,{'status':_0x315f7b['status'],'statusText':_0x315f7b['statusText'],'headers':_0x737938});await this['cache']['put'](_0x18254b,_0x4ec8ce),this['cacheSizes']['set'](_0x18254b,_0x1f9466),this['currentSiz'+'e']+=_0x1f9466,this['updateLRU'](_0x18254b);}catch(_0x2b6545){console['error']('Cache\x20set\x20'+'error:',_0x2b6545);}}['updateLRU'](_0x7b168f){const _0x8d95d4=this['lruList']['indexOf'](_0x7b168f);_0x8d95d4>-(0x2620+-0xcc9+-0x1956)&&this['lruList']['splice'](_0x8d95d4,0x1fa*0x9+0x258c+-0x3755),this['lruList']['push'](_0x7b168f);}async['cleanupSpa'+'ce'](_0x88ab66){const _0x458941=this['options']['maxSize']*(-0x6e4+-0x1d41+0x2425*0x1+0.9);if(!(this['currentSiz'+'e']<=_0x458941))for(;this['lruList']['length']>-0x405*0x5+0x257f+-0x1166&&this['currentSiz'+'e']>_0x458941;){const _0x2186e0=this['lruList']['shift']();_0x2186e0&&await this['delete'](_0x2186e0);}}async['delete'](_0x2cc524){if(this['cache'])try{await this['cache']['delete'](_0x2cc524);const _0x496294=this['cacheSizes']['get'](_0x2cc524)||0x172e+-0x15bf*0x1+-0x16f;this['currentSiz'+'e']-=_0x496294,this['cacheSizes']['delete'](_0x2cc524);const _0x4ce1a4=this['lruList']['indexOf'](_0x2cc524);_0x4ce1a4>-(0x4d*-0x26+-0x1f7d+0x10c*0x29)&&this['lruList']['splice'](_0x4ce1a4,0x1f*-0x21+0x25e1*0x1+-0x21e1);}catch(_0x281d70){console['error']('Cache\x20dele'+'te\x20error:',_0x281d70);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x9389c9=>Promise['all'](_0x9389c9['map'](_0xa895fa=>{var _0x5507ce;return(_0x5507ce=this['cache'])==null?void(-0xe*0x154+-0x1ec4+0x315c):_0x5507ce['delete'](_0xa895fa);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x2277+0x107*0xa+0x1831;}catch(_0x4c0756){console['error']('Cache\x20clea'+'r\x20error:',_0x4c0756);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x8b*0x37+0x239a*-0x1+0x71*0xd;}}class _0x212176{constructor(_0x3ef9ac=[],_0x4a82f6={}){this['cacheManag'+'er']=new _0x58dffd(_0x4a82f6['cache']),this['retryCount']=_0x4a82f6['retryCount']||0x2261*0x1+-0x152*0x1a+-0x1*0xa,this['retryDelay']=_0x4a82f6['retryDelay']||-0x13*0x203+0x93b*-0x4+0x4d19,this['maxConcurr'+'ency']=_0x4a82f6['maxConcurr'+'ency']||-0x872+-0x1*-0x1601+-0xd89,this['downloadQu'+'eue']=_0x3ef9ac,this['isProcessi'+'ngDownload'+'Queue']=!(-0x4*-0x60e+0xf9e+-0x3*0xd47),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(-0x3*0x825+0x23b0+-0x2b*0x43);this['downloadQu'+'eue']['length']>0x3f1*0x2+-0x12f*-0xc+-0x1616;)try{const _0x5b2934=this['downloadQu'+'eue']['splice'](-0x10d*-0x12+0x385*0x5+-0x2483,this['maxConcurr'+'ency'])['map'](_0x2e2396=>{if(!this['pendingRes'+'ponses']['has'](_0x2e2396)){const _0x1f5cac=this['download'](_0x2e2396);return this['pendingRes'+'ponses']['set'](_0x2e2396,_0x1f5cac),_0x1f5cac['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x2e2396);});}return Promise['resolve']();});await Promise['all'](_0x5b2934);}catch(_0x4d4659){console['error']('Download\x20e'+'rror:',_0x4d4659);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(0x870+0x443*-0x3+0x45a);}}}async['fetch'](_0x19382a,_0x4fdfb8={}){if(this['pendingRes'+'ponses']['has'](_0x19382a))return this['pendingRes'+'ponses']['get'](_0x19382a);const {forceRefresh:_0x17d6b9=!(-0x10d6+-0xf9c*-0x1+0x13b),..._0x6211fb}=_0x4fdfb8;this['pendingRes'+'ponses']['set'](_0x19382a,this['download'](_0x19382a,_0x6211fb));const _0x225891=await this['pendingRes'+'ponses']['get'](_0x19382a);return this['pendingRes'+'ponses']['delete'](_0x19382a),_0x225891;}async['download'](_0x450dd9,_0x4f19ef={}){var _0x12dbb8;await((_0x12dbb8=this['cacheManag'+'er'])==null?void(0x2*0xdf+-0x129+-0x95):_0x12dbb8['init']());const {forceRefresh:_0x2d3a05=!(-0x1*0x153b+0x1*-0xc41+0x217d),..._0x5b481f}=_0x4f19ef;_0x2d3a05&&await this['cacheManag'+'er']['delete'](_0x450dd9);const _0x55abdb=await this['cacheManag'+'er']['get'](_0x450dd9);if(_0x55abdb)return _0x55abdb;let _0x490955;for(let _0x16a2f1=0x27e*-0x1+0x1041+0xd*-0x10f;_0x16a2f1<this['retryCount'];_0x16a2f1++)try{const _0x56c550=await fetch(_0x450dd9,_0x5b481f);if(!_0x56c550['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x56c550['status']);return await this['cacheManag'+'er']['set'](_0x450dd9,_0x56c550),_0x56c550;}catch(_0x160c05){console['error']('Download\x20e'+'rror:',_0x160c05),_0x490955=_0x160c05,_0x16a2f1<this['retryCount']-(-0x653*-0x1+-0x23f9*0x1+-0x1da7*-0x1)&&await new Promise(_0x50cf18=>setTimeout(_0x50cf18,this['retryDelay']*(_0x16a2f1+(-0x5c5*0x2+-0xca*0xb+-0xa7*-0x1f))));}throw _0x490955;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){var _0x48311e;(_0x48311e=this['cacheManag'+'er'])==null||_0x48311e['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(-0x2142+-0xada*-0x2+-0xb8f*-0x1),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x1709a4{constructor(_0xecfdec,_0x78398d=[]){this['elements']=_0xecfdec,this['comments']=_0x78398d,this['isCompress'+'ed']=!(-0x43*0x19+-0x1*0xf6e+0x15fa);}}class _0x4c9220{constructor(_0x1b71e5){this['url']=_0x1b71e5;}async['readFragme'+'nt'](){globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x212176(globalThis['downloadQu'+'eueUrlList']));const _0x5c8440=await globalThis['fetchWorke'+'r']['fetch'](this['url']);if(!_0x5c8440['ok'])throw new Error('Failed\x20to\x20'+'fetch\x20'+this['url']+':\x20'+_0x5c8440['statusText']);const _0x5eb5b0=await _0x5c8440['arrayBuffe'+'r'](),_0x8af6f2=new Uint8Array(_0x5eb5b0);let _0x45cd68=-0x1ec*0x9+0x2301+-0x5e7*0x3,{size:_0x4709a8,type:_0x2d69ee}=this['_readBoxHe'+'ader'](_0x8af6f2,_0x45cd68);if(_0x2d69ee!=='moof')throw new Error('Not\x20a\x20moof');_0x45cd68+=0x1*0x24d0+-0x1b0b+-0x9bd;const _0x59d6d4=_0x45cd68+_0x4709a8-(0x2396+0xc87+0x3015*-0x1);let _0x414699=null;for(;_0x45cd68<_0x59d6d4;){const {size:_0x1b6207,type:_0x34a5e4}=this['_readBoxHe'+'ader'](_0x8af6f2,_0x45cd68);_0x45cd68+=-0x1a1a+-0x6f7*0x1+0x2119;const _0x19f1ef=_0x8af6f2['slice'](_0x45cd68,_0x45cd68+_0x1b6207-(-0xe43+0x17*0x19c+-0x16b9));_0x45cd68+=_0x1b6207-(-0x7a*0x44+0x6*-0x47c+0x76b*0x8),_0x34a5e4==='emsg'&&(_0x414699=this['_parseEmsg'](_0x19f1ef));}if(!_0x414699)throw new Error('Incomplete'+'\x20moof');const {size:_0x2891a7,type:_0x23aa70}=this['_readBoxHe'+'ader'](_0x8af6f2,_0x45cd68);if(_0x23aa70!=='mdat')throw new Error('Expected\x20m'+'dat\x20box\x20af'+'ter\x20moof');_0x45cd68+=-0x158c*-0x1+0x1*0x21a3+-0x3727*0x1;const _0x4717d=_0x8af6f2['slice'](_0x45cd68,_0x45cd68+(_0x2891a7-(0x1*-0xfa9+-0x22e8+-0x1*-0x3299)));return{'metadata':_0x414699,'segmentData':_0x4717d};}['_readBoxHe'+'ader'](_0x4718ce,_0x32b99e){if(_0x32b99e+(0x171*0x15+0x125*0x20+0x1*-0x42dd)>_0x4718ce['length'])throw new Error('EOF');const _0x5adc07=_0x4718ce[_0x32b99e]<<0x4*0x66a+-0x2d*-0x3e+-0x2476|_0x4718ce[_0x32b99e+(-0x30b*-0x5+-0x1*0x236e+0x287*0x8)]<<-0x12c0+0x2205+-0x11*0xe5|_0x4718ce[_0x32b99e+(-0x24d2+-0x96c+0x2e40)]<<-0x77*-0x1+-0x13fd+0x138e|_0x4718ce[_0x32b99e+(-0x5f6+0x209d+-0x1f*0xdc)],_0x3f2d65=String['fromCharCo'+'de'](_0x4718ce[_0x32b99e+(-0xf*-0x26e+-0xa5c+0x1*-0x1a12)],_0x4718ce[_0x32b99e+(0x61e+-0xa1b*0x1+0x402)],_0x4718ce[_0x32b99e+(-0x201c+-0xd*-0x10d+0x1*0x1279)],_0x4718ce[_0x32b99e+(0x15dc+0x146f*0x1+0xa91*-0x4)]);return{'size':_0x5adc07,'type':_0x3f2d65};}['_parseEmsg'](_0x5c6eac){let _0x530e6e=-0x738+0xab2*0x3+0xc6f*-0x2;_0x530e6e=_0x5c6eac['indexOf'](0x88+0x3a*-0x49+0x3*0x556,_0x530e6e)+(0xf05*-0x1+0x142*0x4+0x9fe),_0x530e6e=_0x5c6eac['indexOf'](-0x92*0x35+-0x7*-0xf1+0x17a3,_0x530e6e)+(-0x1b91+0x1b6e+-0x12*-0x2),_0x530e6e+=0xd3a*-0x1+-0x1d86+0x2ad0;const _0x3d75d5=_0x5c6eac['slice'](_0x530e6e);return globalThis['CBOR']['decode'](_0x3d75d5);}}class _0x625f5c{constructor(_0x9360a8=-0xebe+0x1058+0x19a*-0x1,_0x17e228=0x151a+-0xa04+-0xb16,_0x582ea0=0x1*-0x1db9+-0xc96*0x1+0x1*0x2a4f,_0x12eb18=-0x1795+-0xf7e+0x2714){this['x']=_0x9360a8,this['y']=_0x17e228,this['z']=_0x582ea0,this['w']=_0x12eb18;}['set'](_0x425891,_0x2912b6,_0x1da012,_0x274ae3){return this['x']=_0x425891,this['y']=_0x2912b6,this['z']=_0x1da012,this['w']=_0x274ae3,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x8cfc8c=this){let _0x115f94=_0x8cfc8c['length']();return _0x115f94===0x203*0xd+-0x6cd+-0x135a?(this['x']=this['y']=this['z']=-0x1e05+-0x17eb+0x35f0,this['w']=-0x742+0x242c+-0x1ce9):(_0x115f94=(-0x1b*0x8a+0x4*0x6e6+0xd09*-0x1)/_0x115f94,this['x']=_0x8cfc8c['x']*_0x115f94,this['y']=_0x8cfc8c['y']*_0x115f94,this['z']=_0x8cfc8c['z']*_0x115f94,this['w']=_0x8cfc8c['w']*_0x115f94),this;}['mulScalar'](_0x57de19,_0x1d4e9a=this){return this['x']=_0x1d4e9a['x']*_0x57de19,this['y']=_0x1d4e9a['y']*_0x57de19,this['z']=_0x1d4e9a['z']*_0x57de19,this['w']=_0x1d4e9a['w']*_0x57de19,this;}}self['onmessage']=async _0x3b9ba2=>{var _0x5c74b8,_0x9503cd;const {data:_0x45e52c}=_0x3b9ba2;switch(_0x45e52c['type']){case'initWorker':importScripts(_0x45e52c['cborXUrl']);break;case'destroyWor'+'ker':_0x345df1();break;case'loadGsdMan'+'ifest':const {manifestUrl:_0x1f8c29,loadRepresentation:_0xb83157}=_0x45e52c,_0x1467de=await _0x349286(_0x1f8c29,_0xb83157);globalThis['manifestUr'+'l']=_0x1f8c29,globalThis['manifest']=_0x1467de,globalThis['resentatio'+'n']=_0x1467de['representa'+'tion'],globalThis['downloadQu'+'eueUrlList']=_0x191a99(),globalThis['fetchWorke'+'r']=new _0x212176(globalThis['downloadQu'+'eueUrlList']),self['postMessag'+'e']({'type':'onloadMani'+'fest','data':_0x1467de,'url':_0x1f8c29,'representation':_0xb83157});break;case'loadGsdSeg'+'ments':try{const _0x21a9e0=_0x1b2def(globalThis['manifest'],globalThis['resentatio'+'n']),_0xdd8756=await _0x41a4e1(globalThis['manifest'],_0x21a9e0),_0xd39df3=(_0x5c74b8=_0xdd8756==null?void(0x2322+0x1e18+-0x413a):_0xdd8756['elements'][-0x137d+-0x63c*0x4+0x2c6d])==null?void(0x26ca+0x4cf*-0x2+0x74b*-0x4):_0x5c74b8['properties']['map'](_0x4eaf44=>_0x4eaf44['storage']['buffer']);self['postMessag'+'e']({'type':'loadGsdSeg'+'mentsDone','data':_0xdd8756,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0xd39df3);}catch(_0x464179){console['error']('Error\x20load'+'ing\x20GSD:',_0x464179),self['postMessag'+'e']({'type':'error','data':_0x464179['message'],'url':globalThis['manifestUr'+'l']});}break;case'loadTimeli'+'neIndexSeg'+'ments':const {timelineIndexs:_0x47579a}=_0x45e52c;try{const _0x302a40=_0x1b2def(globalThis['manifest'],globalThis['resentatio'+'n']),_0x108f91=await _0x284893(globalThis['manifest'],_0x302a40,_0x47579a),_0x1c7e8e=(_0x9503cd=_0x108f91==null?void(0x25*-0x37+-0x1*-0x16d9+-0xee6):_0x108f91['elements'][-0x2*-0xdf1+-0xb0a*0x3+0x43*0x14])==null?void(0x98b*-0x1+-0x1ab8+-0x1*-0x2443):_0x9503cd['properties']['map'](_0x5c8a2a=>_0x5c8a2a['storage']['buffer']);self['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'mentsDone','data':_0x108f91,'timelineIndexs':_0x47579a,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x1c7e8e);}catch(_0x4a2008){console['error']('Error\x20load'+'ing\x20GSD:',_0x4a2008),self['postMessag'+'e']({'type':'error','data':_0x4a2008['message'],'url':globalThis['manifestUr'+'l']});}break;}};const _0x345df1=()=>{var _0x3a6011;globalThis['manifestUr'+'l']=null,globalThis['manifest']=null,globalThis['resentatio'+'n']=null,(_0x3a6011=globalThis['fetchWorke'+'r'])==null||_0x3a6011['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['downloadQu'+'eueUrlList']=[],globalThis['loadedSegm'+'ents']=[],globalThis['currentLoa'+'dSg']=null;},_0x191a99=()=>{const _0xf5eff1=new Set(),_0x458a16=_0x1b2def(globalThis['manifest'],globalThis['resentatio'+'n']),_0x412908=globalThis['manifest']['baseUrl'],_0x5dc4ab=_0x458a16['segmentTem'+'plate'][0x1dbf*0x1+-0x1b32+-0x28d];for(const _0x3a65cb of _0x5dc4ab['segmentTim'+'eline'])for(const _0x3079d8 of _0x3a65cb['nl']){const _0x3f989e=''+_0x412908+_0x5dc4ab['media']['replace']('$SegGroupI'+'ndex$',String(_0x3a65cb['sg']))['replace']('$NodeIndex'+'$',String(_0x3079d8));_0xf5eff1['add'](_0x3f989e);}return Array['from'](_0xf5eff1);},_0x349286=async(_0x4afd06,_0x9adf20)=>{const _0x3771f1=await(await fetch(_0x4afd06))['text'](),_0x3f0c9d=JSON['parse'](_0x3771f1);_0x3f0c9d['baseUrl']=_0x4afd06['replace'](/\/[^\/]*$/,'/');const {schemas:_0x308c3d,gsiUrl:_0x1494f8,repId:_0x527f64}=await _0x2138e9(_0x3f0c9d,_0x9adf20);return _0x3f0c9d['schemas']=_0x308c3d,_0x3f0c9d['gsiUrl']=_0x1494f8,_0x3f0c9d['representa'+'tion']=_0x527f64,_0x3f0c9d;},_0x2138e9=async(_0x7d7c09,_0x533461)=>{let _0x274409=null,_0x50b905=null;for(const _0x1d5d2a of _0x7d7c09['adaptation'+'Sets'])if(_0x1d5d2a['contentTyp'+'e']==='4dgs'){_0x50b905=_0x1d5d2a;for(const _0x2497fe of _0x1d5d2a['representa'+'tions'])if(_0x2497fe['id']===_0x533461){_0x274409=_0x2497fe;break;}break;}_0x274409||(_0x274409=_0x50b905['representa'+'tions'][0x1f51+0xa1*-0x26+-0x76b],console['warn']('Representa'+'tion\x20\x27'+_0x533461+('\x27\x20not\x20foun'+'d,\x20use\x20the'+'\x20first\x20rep'+'resentatio'+'n\x20instead')));const _0x7dfb21=_0x274409['id'],_0x1b1b05=_0x7d7c09['baseUrl']+_0x7dfb21+('/init.gsi.'+'json'),_0x56ac9a=await(await fetch(_0x1b1b05))['text'](),_0x62357e=JSON['parse'](_0x56ac9a),_0x4fc5e6={};return _0x4fc5e6[_0x7dfb21]=_0x62357e,{'schemas':_0x4fc5e6,'gsiUrl':_0x1b1b05,'repId':_0x7dfb21};},_0x1b2def=(_0x591e9f,_0x10de77='high-quant'+'ized')=>{let _0x5c7f7d=null;for(const _0x30a75c of _0x591e9f['adaptation'+'Sets'])if(_0x30a75c['contentTyp'+'e']==='4dgs'){for(const _0x53d89a of _0x30a75c['representa'+'tions'])if(_0x53d89a['id']===_0x10de77){_0x5c7f7d=_0x53d89a;break;}break;}if(!_0x5c7f7d)throw new Error('Representa'+'tion\x20\x27'+_0x10de77+('\x27\x20not\x20foun'+'d'));return _0x5c7f7d;},_0x41a4e1=async(_0x53c796,_0x42f425)=>{const _0xf037f1=_0x42f425['id'],_0x1f5d6c=_0x53c796['schemas'][_0xf037f1]['attributes'],_0x905749=_0x42f425['segmentTem'+'plate'][0xadf+0x2194*-0x1+0x16b5];globalThis['loadedSegm'+'ents']=[];const _0x40f753=[],_0x27e77b=[];for(const _0x1a80b4 of _0x905749['segmentTim'+'eline'])for(const _0xf4a346 of _0x1a80b4['nl']){if(globalThis['loadedSegm'+'ents']['includes'](_0x1a80b4['sg']+'_'+_0xf4a346))continue;globalThis['loadedSegm'+'ents']['push'](_0x1a80b4['sg']+'_'+_0xf4a346);const _0x3aed7c=await _0x288e8c(_0x53c796,_0x42f425,_0x1f5d6c,_0x1a80b4['sg'],_0xf4a346);_0x27e77b['push'](_0x3aed7c['decoded']),_0x40f753['push'](_0x3aed7c['metadata']);}return _0x36a698(_0x27e77b,_0x1f5d6c,_0x53c796['comments']);},_0x284893=async(_0x7b6f96,_0x2afe87,_0x540e94)=>{if(!_0x540e94||_0x540e94['length']===0x1f3*0xb+0x437*-0x2+-0xd03)return{'decoded':[],'metadata':[]};const _0x4c1249=_0x2afe87['id'],_0x4e900a=_0x7b6f96['schemas'][_0x4c1249]['attributes'],_0x319a91=_0x2afe87['segmentTem'+'plate'][-0x1*0x264b+-0x673*-0x4+0x7*0x1c9];globalThis['loadedSegm'+'ents']||(globalThis['loadedSegm'+'ents']=[]);const _0x44cff1=_0x319a91['segmentTim'+'eline'][_0x540e94[0x147d+-0x1*-0xbcf+0x2*-0x1026]];globalThis['currentLoa'+'dSg']!==_0x44cff1['sg']&&(globalThis['loadedSegm'+'ents']=globalThis['loadedSegm'+'ents']['filter'](_0x2051b6=>!_0x2051b6['startsWith'](globalThis['currentLoa'+'dSg'])),globalThis['currentLoa'+'dSg']=_0x44cff1['sg']);let _0x4ff0af;const _0x354266=[];for(const _0x485ab1 of _0x540e94){_0x4ff0af=_0x319a91['segmentTim'+'eline'][_0x485ab1];for(const _0x464438 of _0x4ff0af['nl'])globalThis['loadedSegm'+'ents']['includes'](_0x4ff0af['sg']+'_'+_0x464438)||(globalThis['loadedSegm'+'ents']['push'](_0x4ff0af['sg']+'_'+_0x464438),_0x354266['push'](_0x464438));}const _0x5276cc=await _0x288e8c(_0x7b6f96,_0x2afe87,_0x4e900a,_0x4ff0af['sg'],_0x354266);_0x5276cc['metadata'];const _0x4023c7=_0x5276cc['decoded'];return _0x36a698(_0x4023c7,_0x4e900a,_0x7b6f96['comments']);},_0x288e8c=async(_0x5394aa,_0x29c921,_0x2bd672,_0x46769d,_0x17638d)=>{const _0x10268d=_0x5394aa['baseUrl'],_0x258933=_0x29c921['segmentTem'+'plate'][0x22e5*0x1+0x1*0x1555+-0x383a]['media'],_0x5d997d=_0x17638d['map'](_0xcea41d=>''+_0x10268d+_0x258933['replace']('$SegGroupI'+'ndex$',String(_0x46769d))['replace']('$NodeIndex'+'$',String(_0xcea41d))),_0x45d150=await Promise['all'](_0x5d997d['map'](async _0x45aa3d=>{const _0x528bed=await _0x40f18d(_0x45aa3d),_0x57fd4e=_0x528bed['metadata'],_0x478269=_0x528bed['segmentDat'+'a'],_0x388544=_0x57fd4e['gaussianCo'+'unt'];console['log']('loadSegmen'+'t\x20'+_0x45aa3d),console['log']('loadSegmen'+'t\x20timeStar'+'t:',_0x57fd4e['timeStart'],'segment\x20ti'+'meEnd:',_0x57fd4e['timeEnd'],'segment\x20ga'+'ussianCoun'+'t:',_0x388544);let _0xe7e805;if(_0x29c921['id']['includes']('quantized')){const _0x112e5e=_0x57fd4e['chunk_boun'+'ds'];_0xe7e805=_0x5040d6(_0x478269,_0x388544,_0x2bd672,_0x46769d,_0x112e5e);}else _0xe7e805=_0x1c312f(_0x478269,_0x388544,_0x2bd672,_0x46769d);return{'decoded':_0xe7e805,'metadata':_0x57fd4e};})),_0x4f1bed=_0x45d150['map'](_0x255f4a=>_0x255f4a['decoded']),_0x54cd16=_0x45d150['map'](_0x11c9a5=>_0x11c9a5['metadata']);return{'decoded':_0x4f1bed,'metadata':_0x54cd16};},_0x36a698=(_0x549b2e,_0xa64bf,_0x3863b5)=>{if(_0x549b2e['length']===-0x25a7+-0x664+0x2c0b)return new _0x1709a4([{'name':'vertex','count':0x0,'properties':[{'name':'position','type':'float','storage':new Float32Array(0x1b23+0x1384*0x1+-0x2ea7),'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':new Uint16Array(0x588*0x1+-0x8ee*-0x2+-0x1764),'byteSize':0x2},{'name':'t','type':'float','storage':new Float32Array(-0x363+0xaa6+-0x743),'byteSize':0x4},{'name':'t_scale','type':'float','storage':new Float32Array(-0x5c6*0x4+0x67f*0x3+-0x39b*-0x1),'byteSize':0x4},{'name':'cutoff','type':'float','storage':new Float32Array(0x1319*0x2+-0x10a*-0xe+0x34be*-0x1),'byteSize':0x4},{'name':'motion','type':'float','storage':new Float32Array(-0x9*0x260+0x395*-0x5+0x71*0x59),'byteSize':0x4},{'name':'rotation','type':'float','storage':new Float32Array(0x180c+-0x7*-0x454+-0x3658),'byteSize':0x4},{'name':'scale','type':'uint16','storage':new Uint16Array(-0x1056+0x5*0xe+0x1010),'byteSize':0x2},{'name':'time_index','type':'float','storage':new Float32Array(0x7*0x357+0x2*0x5ba+-0x22d5),'byteSize':0x4}]}],_0x3863b5);const _0x352723=_0x46a884(_0x549b2e),[_0xedd562,_0x1fdd17,_0x2591cf]=_0x48ccf7(_0x352723['lifecycle'],-0x1399+-0xc69+0x1*0x2005,Float32Array),_0x54ff26=_0x352723['time_index'],_0x177345=_0xa64bf['find'](_0x55acfc=>_0x55acfc['name']==='feature_re'+'st'),_0x389a72=[];if(_0x177345&&_0x352723['feature_re'+'st']){const _0x232e81=_0x177345['dataType']['split'](',')[0x9*0x141+-0x15*-0x145+-0x25f1]['trim']()['replace']('>',''),_0x557f42=_0x48ccf7(_0x352723['feature_re'+'st'],-0x1365+-0x2489+-0x37f1*-0x1,Float32Array);for(const _0x306051 of _0x557f42){const _0x2b649f=_0x48ccf7(_0x306051,_0x232e81/(-0x199*-0x11+-0x2333+-0x1*-0x80d),Float32Array);for(let _0x300fbb=-0x1*0x12b+-0x160b+-0x1736*-0x1;_0x300fbb<_0x2b649f['length'];_0x300fbb++)_0x389a72['push']({'name':'f_rest_'+_0x300fbb,'type':'float','storage':_0x2b649f[_0x300fbb],'byteSize':0x4});}}return new _0x1709a4([{'name':'vertex','count':_0x352723['position']['length']/(0x1*-0x17e1+-0x74*0x40+0x2*0x1a72),'properties':[{'name':'position','type':'float','storage':_0x352723['position'],'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':_0x352723['color_opac'+'ity'],'byteSize':0x2},{'name':'t','type':'float','storage':_0x1fdd17,'byteSize':0x4},{'name':'t_scale','type':'float','storage':_0xedd562,'byteSize':0x4},{'name':'cutoff','type':'float','storage':_0x2591cf,'byteSize':0x4},{'name':'motion','type':'float','storage':_0x352723['motion'],'byteSize':0x4},{'name':'rotation','type':'float','storage':_0x352723['rotation'],'byteSize':0x4},{'name':'scale','type':'uint16','storage':_0x352723['scale'],'byteSize':0x2},{'name':'time_index','type':'float','storage':_0x54ff26,'byteSize':0x4},..._0x389a72]}],_0x3863b5);},_0x48ccf7=(_0xdcd350,_0x2192ec,_0x56ee32)=>{const _0x17083b=new Array(_0x2192ec),_0x5e8214=Math['floor'](_0xdcd350['length']/_0x2192ec),_0x4ddb50=_0xdcd350['length']%_0x2192ec;for(let _0x2f18b2=-0x2308+-0x9fc*-0x3+0x32*0x1a;_0x2f18b2<_0x2192ec;_0x2f18b2++){const _0x3509ab=_0x2f18b2<_0x4ddb50?_0x5e8214+(-0x5*-0x6bb+0x17*-0x89+-0x1*0x1557):_0x5e8214;_0x17083b[_0x2f18b2]=new _0x56ee32(_0x3509ab);}for(let _0x10c680=-0x1*0x281+0x676*0x3+-0x10e1*0x1;_0x10c680<_0xdcd350['length'];_0x10c680++){const _0x2e04ea=_0x10c680%_0x2192ec,_0x8fea5d=Math['floor'](_0x10c680/_0x2192ec);_0x17083b[_0x2e04ea][_0x8fea5d]=_0xdcd350[_0x10c680];}return _0x17083b;},_0x40f18d=async _0x247043=>{const _0x50f8c5=new _0x4c9220(_0x247043),{metadata:_0x135e1c,segmentData:_0x1703e8}=await _0x50f8c5['readFragme'+'nt']();return{'metadata':_0x135e1c,'segmentData':_0x1703e8};},_0x2cbdda=(_0x3d7478,_0x20ce3b)=>{let _0x260f8,_0x53cdb1,_0x5dd249=-(-0x3*-0x593+-0x1d78+0xcc0);if(_0x3d7478['encoding']){const _0x593d81=_0x3d7478['encoding']['storageTyp'+'e'];if(_0x593d81==='uint32')_0x53cdb1=Uint32Array,_0x260f8=Uint32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x593d81['startsWith']('array<ucha'+'r')){_0x53cdb1=Uint8Array;const _0x1f905e=_0x593d81['split'](',')[0x72c+0x1b4f*0x1+0x5bf*-0x6]['trim']()['replace']('>','');_0x5dd249=parseInt(_0x1f905e),_0x260f8=_0x5dd249*Uint8Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20storage\x20'+'type:\x20'+_0x593d81);}}else{if(_0x53cdb1=Float32Array,_0x3d7478['dataType']==='vec3f')_0x260f8=(0x5*0x6e5+-0xaa6+0x17d*-0x10)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x3d7478['dataType']==='vec4f')_0x260f8=(0x130a+-0xe07+0x4ff*-0x1)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x3d7478['dataType']==='vec2f')_0x260f8=(-0x534*-0x7+-0x1eb2+-0xf4*0x6)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x3d7478['dataType']['startsWith']('array<floa'+'t')){const _0x3a772f=_0x3d7478['dataType']['split'](',')[0x97b+0x4aa+-0x4*0x389]['trim']()['replace']('>','');_0x5dd249=parseInt(_0x3a772f),_0x260f8=_0x5dd249*Float32Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x3d7478['dataType']);}}}}return{'dataSize':_0x20ce3b*_0x260f8,'datatype':_0x53cdb1,'arraySize':_0x5dd249};},_0x508cc0=(_0x913237,_0x5b7603)=>{const _0x2e12b2=(-0x4*-0x106+0x1119+-0x6*0x388<<_0x5b7603)-(-0x4*-0x9a9+0xa44+-0x104d*0x3);return(_0x913237&_0x2e12b2)/_0x2e12b2;},_0x4b84ea=_0x40a051=>{const _0x2d7b97=new Float32Array(_0x40a051['length']*(0x21c9+0xc04+-0x2dca));for(let _0x30be0d=-0x329*0x7+-0x193c+0x2f5b;_0x30be0d<_0x40a051['length'];_0x30be0d++)_0x2d7b97[_0x30be0d*(-0xea5+-0x135+-0xfdd*-0x1)]=_0x508cc0(_0x40a051[_0x30be0d]>>>-0x1826+-0xf*-0x188+0x143,-0x57*0x5f+0x247*0x3+0x197f),_0x2d7b97[_0x30be0d*(0x133a+0x1261+-0x2598)+(0x2*-0x80f+0x26ab+-0x168c)]=_0x508cc0(_0x40a051[_0x30be0d]>>>-0x8bd*-0x2+-0x10*-0x91+-0x3c9*0x7,-0x1*0x2267+0x19d4+0x7*0x13b),_0x2d7b97[_0x30be0d*(0x3*-0x466+-0x1*0x104e+0x1d83)+(-0x1632+-0x23e2+0x3a16)]=_0x508cc0(_0x40a051[_0x30be0d],-0x1*0x137b+0x3ce+0xfb8);return _0x2d7b97;},_0x39169b=_0x3f24d0=>{const _0x104b91=new Float32Array(_0x3f24d0['length']*(0x1*0xf6b+0x1*0x1fc3+-0x2f2a));for(let _0x458581=0x14e5+-0x35f*0x6+-0xab;_0x458581<_0x3f24d0['length'];_0x458581++)_0x104b91[_0x458581*(-0x155*-0x12+-0xe8*0xa+-0xee6)]=_0x508cc0(_0x3f24d0[_0x458581]>>>0x12a8+0x1e63+0x3*-0x1051,-0x435*0x2+-0x1c28+0x249a),_0x104b91[_0x458581*(-0x2665*0x1+-0x397*-0x4+0x180d)+(0x3*-0x67+0x2355+-0x221f)]=_0x508cc0(_0x3f24d0[_0x458581]>>>0x1ff2+0x2434+-0x4416,0xd08+0x1c8f+-0x298f),_0x104b91[_0x458581*(0x1d22+0x2c*-0xb+-0x1*0x1b3a)+(0x6c5*0x1+-0x130c+-0xc49*-0x1)]=_0x508cc0(_0x3f24d0[_0x458581]>>>0x1*0xe0d+-0x1b74+0xb5*0x13,-0x262a+0x218a+0x95*0x8),_0x104b91[_0x458581*(-0x1*-0x1882+0x25c5+-0xfd*0x3f)+(0xf2f+-0x4*-0x10f+-0x2*0x9b4)]=_0x508cc0(_0x3f24d0[_0x458581],0x2483+0x133e+-0x37b9);return _0x104b91;},_0x156cdd=_0x510575=>{const _0x552073=new Float32Array(_0x510575['length']*(-0x9*-0x24a+0xa50+-0x1ee7)),_0x1da013=(-0x306+-0xbfb+0xf02)/(Math['sqrt'](0x92*0x12+0x4*0x33d+-0x1736)*(0x22f6+0x584+0x1d7*-0x16+0.5));for(let _0x159710=0x18f8*-0x1+-0x20b*-0x7+0x1*0xaab;_0x159710<_0x510575['length'];_0x159710++){const _0x30b222=(_0x508cc0(_0x510575[_0x159710]>>>-0x1fca+-0x1efc+0x3eda,0x9*-0x421+-0x2*-0x1021+0x1*0x4f1)-(0x1a*-0x6a+-0x16e2+0x21a6+0.5))*_0x1da013,_0xf1595b=(_0x508cc0(_0x510575[_0x159710]>>>-0x10f*0xc+0xae3+0x1db,0x1102+0x33c*-0xb+-0x4*-0x4a7)-(-0xfba*-0x1+-0x2*-0x66+-0x1086+0.5))*_0x1da013,_0x33bbcc=(_0x508cc0(_0x510575[_0x159710],-0x3cb*0x3+0x1*0x1b40+-0xfd5)-(-0x7d4+-0x6e+0x842+0.5))*_0x1da013,_0x2b2153=Math['sqrt'](0x1*0x2006+0x21b3+-0x1*0x41b8-(_0x30b222*_0x30b222+_0xf1595b*_0xf1595b+_0x33bbcc*_0x33bbcc));let _0x426d59=0x142a+-0x7*-0x109+-0x1*0x1b69,_0x57b131=-0x2699+-0x50*-0x64+0xd1*0x9,_0x26e68a=-0xabb+0x2033*0x1+0x8*-0x2af,_0x300984=0x3c+-0xce5*0x2+0x198e;switch(_0x510575[_0x159710]>>>0x5d*-0xa+0x11f4+-0xe34){case 0x1096*0x2+-0x17ef+-0x93d*0x1:_0x426d59=_0x2b2153,_0x57b131=_0x30b222,_0x26e68a=_0xf1595b,_0x300984=_0x33bbcc;break;case-0xc7a+0xdd6+-0x1*0x15b:_0x426d59=_0x2b2153,_0x57b131=_0xf1595b,_0x26e68a=_0x33bbcc,_0x300984=_0x30b222;break;case-0x1284+0x1db3+-0xb2d*0x1:_0x426d59=_0xf1595b,_0x57b131=_0x2b2153,_0x26e68a=_0x33bbcc,_0x300984=_0x30b222;break;case-0x2531+0x79*0x45+0x497:_0x426d59=_0xf1595b,_0x57b131=_0x33bbcc,_0x26e68a=_0x2b2153,_0x300984=_0x30b222;break;}const _0x114abe=_0x435c0b(_0x426d59,_0x57b131,_0x26e68a,_0x300984);_0x552073[_0x159710*(0x7*0x4ca+-0x10d*-0x5+-0x9b1*0x4)]=_0x114abe['x'],_0x552073[_0x159710*(0x24ae+-0x1d5a+-0x1*0x751)+(-0x226e+0x2*0x1d1+-0x1ecd*-0x1)]=_0x114abe['y'],_0x552073[_0x159710*(0x2*0x9a4+-0x123a*-0x1+-0x257f)+(0x1d*0x14b+-0x7f*-0x49+-0x49b4)]=_0x114abe['z'];}return _0x552073;},_0x1d4bb5=(_0xb79a44,_0x2ebc2e,_0x58b888)=>{const _0x3d64b5=_0x58b888-_0x2ebc2e,_0x3dcfd3=new Float32Array(_0xb79a44['length']);for(let _0x45af46=-0x2f*0xe+-0x6ba+0x8c*0x11;_0x45af46<_0xb79a44['length'];_0x45af46++)_0x3dcfd3[_0x45af46]=_0xb79a44[_0x45af46]/(0x3*-0x66+0x1cf+0x2*0x31)*_0x3d64b5+_0x2ebc2e;return _0x3dcfd3;},_0x57849c=new Float32Array(-0x15d5+-0x4d*0x3b+0x2795),_0x3f46cf=new Int32Array(_0x57849c['buffer']),_0xd9680d=_0x3da991=>{_0x57849c[0x55c+-0x946*0x3+0x1676]=_0x3da991;const _0x3bed98=_0x3f46cf[0x1147+0xee*-0x3+-0xe7d];let _0x30677d=_0x3bed98>>0x7c9*-0x3+-0x267c+0x4c3*0xd&0x817f+-0x1*0x1f4+-0x27*-0x3,_0x4146c1=_0x3bed98>>0x1dab+-0x16f4+-0x6ab&-0x11c4+0x52f*-0x1+0x1ef2;const _0x4c4eb9=_0x3bed98>>0x161*0x2+0xa51+-0xcfc&-0xfe2+-0x2*-0xa39+-0x53*0xb;return _0x4c4eb9<0xbbd+0x107b+-0x1bd1*0x1?_0x30677d:_0x4c4eb9>-0x25b6+0x3*0x99e+0x96a?(_0x30677d|=-0xcfe4+-0xc1e5+0x20dc9,_0x30677d|=(_0x4c4eb9===-0x8*0x44f+0x234b+0x2*0x16?-0x1*0x774+0x24d*0x9+0x46b*-0x3:0x63*-0x5+-0x1a1a+0x25*0xc2)&&_0x3bed98&-0x10a*-0x2ab3+-0xa89bcf+0xfc3dd0,_0x30677d):_0x4c4eb9<0x11e3+-0x66*-0x3a+-0x288e?(_0x4146c1|=-0x11*-0x1ce+0x1*-0x449+-0x1265,_0x30677d|=(_0x4146c1>>0x2659+-0x1f6*0x1+-0xbfb*0x3-_0x4c4eb9)+(_0x4146c1>>-0xf3e+-0x5*0x1e5+0x508*0x5-_0x4c4eb9&-0x106e+0x2270+-0x1201),_0x30677d):(_0x30677d|=_0x4c4eb9-(0xd34+0x1*0xf60+-0x1c24)<<0xf7c+-0x1*-0xaf1+-0x1a63|_0x4146c1>>-0x264+-0x9b*0x10+0xc15,_0x30677d+=_0x4146c1&0x33f+0x4ae*-0x5+0xac*0x1e,_0x30677d);},_0x562fee=_0x122343=>{const _0x44ac4e=new Uint16Array(_0x122343['length']);for(let _0x1b82ed=0x239*-0x10+0x6c4*0x3+0x4*0x3d1;_0x1b82ed<_0x122343['length']/(0x152d+-0x8a6+-0xc83);++_0x1b82ed)_0x44ac4e[_0x1b82ed*(-0x1*-0x22e5+-0x1f4b*0x1+0x2*-0x1cb)]=_0xd9680d(_0x122343[_0x1b82ed*(-0x1af+0x4a2*0x5+0x1*-0x1577)]*_0x1f3dc6+(0x7f4+-0xf61+0x76d+0.5)),_0x44ac4e[_0x1b82ed*(0x2*-0xc5e+0x2326+-0xa66*0x1)+(0xd44+-0x15fd+0x8ba)]=_0xd9680d(_0x122343[_0x1b82ed*(-0x1*-0x1915+0x1e15+-0x3726)+(-0x129c+-0x208c+0x3329)]*_0x1f3dc6+(0x1*0x703+-0x112*-0x13+-0x1*0x1b59+0.5)),_0x44ac4e[_0x1b82ed*(0x3*0x5c6+-0xf67*0x1+0x1*-0x1e7)+(0x26d*-0x4+-0x67c*0x4+0x9*0x3f6)]=_0xd9680d(_0x122343[_0x1b82ed*(0xd*0x295+0x2b*0x72+0x9*-0x5db)+(-0x11d7*0x2+-0x57*0x2d+-0x1f*-0x1a5)]*_0x1f3dc6+(0x1bb*0x15+0x10b*0x5+-0x298e+0.5)),_0x44ac4e[_0x1b82ed*(0x1*-0xc11+0xd7a+-0x165)+(0x165b+0x1*-0x3fd+0x1*-0x125b)]=_0xd9680d(_0x122343[_0x1b82ed*(0x2fc*0x7+-0x11e8+0x2*-0x17c)+(-0x17b6+0x22*-0x10e+0x3b95)]);return _0x44ac4e;},_0x2d184a=new _0x625f5c(-0x1*-0x58+0xd0c+0x4*-0x359,0x15d*0x2+0x1c*0xd+-0x426,0x13ab+-0x253d+0x1192,0xd*-0x1+0x1c4*0x10+-0x1*0x1c33),_0x435c0b=(_0x1671a7,_0x37622f,_0x14c847,_0x5ebdb1)=>(_0x2d184a['set'](_0x37622f,_0x14c847,_0x5ebdb1,_0x1671a7),_0x2d184a['normalize'](),_0x2d184a['w']<0xd87*0x1+-0x26a+-0xb1d&&_0x2d184a['mulScalar'](-(0x2*-0x12fa+0x1*0x1d67+0x1b6*0x5)),_0x2d184a);function _0x5040d6(_0x3116b3,_0x4cc3ea,_0x1ddd14,_0x32fdaa,_0x572ca4){const _0x49ab1a=_0x572ca4[Object['keys'](_0x572ca4)[0x31d+0x1b*-0x165+0x228a]]['length'],_0x567346=-0x25a1*-0x1+0x2*0x7dd+-0x345b;let _0x403035=[],_0x5ef0d8=_0x4cc3ea;for(let _0x59567b=0xc4c+0x199*0x9+0x1aad*-0x1;_0x59567b<_0x49ab1a;_0x59567b++){const _0x1b5ac1=Math['min'](_0x567346,_0x5ef0d8);_0x403035['push'](_0x1b5ac1),_0x5ef0d8-=_0x1b5ac1;}let _0x470666=0x3d*0x1d+0x95b+-0x1044,_0xb413ba={};for(let _0x22ccaa of _0x1ddd14){const _0x4b7b12=_0x22ccaa['name'],{dataSize:_0x1b054a,datatype:_0x1aa6ee}=_0x2cbdda(_0x22ccaa,_0x4cc3ea);let _0x43ff4d=_0x3116b3['buffer']['slice'](_0x470666,_0x470666+_0x1b054a),_0x1bc60c=new _0x1aa6ee(_0x43ff4d);_0xb413ba[_0x4b7b12]=_0x1bc60c,_0x470666+=_0x1b054a;}let _0x159691=[],_0x885f02=0x570+-0xd83+-0x813*-0x1;for(let _0x327e7c=-0xeb*-0xd+0x21b3*-0x1+0x2*0xae2;_0x327e7c<_0x49ab1a;_0x327e7c++){const _0x4eedbe=_0x37db44(_0xb413ba,_0x572ca4,_0x327e7c,_0x403035,_0x885f02,_0x1ddd14),_0x319ebb=_0x4eedbe['chunkDecom'+'pressed'];_0x159691['push'](_0x319ebb),_0x885f02=_0x4eedbe['chunkStart'+'Idx'];}let _0x2be1f2={};for(let _0xf05fe of Object['keys'](_0x159691[0xee6+0x5*0x91+-0x11bb*0x1])){let _0x27200d=-0x1a90+0x185*0x13+-0x24f;for(let _0x31f2ad=-0x1652*0x1+0x120e+0x444;_0x31f2ad<_0x159691['length'];_0x31f2ad++)_0x27200d+=_0x159691[_0x31f2ad][_0xf05fe]['length'];_0xf05fe==='color_opac'+'ity'||_0xf05fe==='scale'?_0x2be1f2[_0xf05fe]=new Uint16Array(_0x27200d):_0x2be1f2[_0xf05fe]=new Float32Array(_0x27200d);let _0x437758=0x1*-0x13a+0x21fa+-0x20c0;for(let _0x103067=0x1*-0x1b97+-0x24f9+0x4090;_0x103067<_0x159691['length'];_0x103067++)_0x2be1f2[_0xf05fe]['set'](_0x159691[_0x103067][_0xf05fe],_0x437758),_0x437758+=_0x159691[_0x103067][_0xf05fe]['length'];}return _0x1ddd14['some'](_0x8d157e=>_0x8d157e['name']==='feature_re'+'st')&&(_0x2be1f2['feature_re'+'st']=_0xa49178(_0xb413ba,_0x1ddd14)),_0x2be1f2['time_index']=new Float32Array(_0x4cc3ea),_0x2be1f2['time_index']['fill'](_0x32fdaa-(0x51*0xc+0x3*-0x4e+0x1*-0x2e1)),_0x2be1f2;}const _0x37db44=(_0x360fd6,_0x2b364b,_0x3999ac,_0x2a3ec9,_0x133e78,_0x2dc546)=>{const _0x4bbbba=_0x2a3ec9[_0x3999ac],_0x5440b5=_0x133e78+_0x4bbbba,_0x5ef0a8=(_0xdb45d4,_0x285fb2,_0x75915b)=>_0xdb45d4*(-0x1bbb+0x36b*0x1+0x5*0x4dd-_0x75915b)+_0x285fb2*_0x75915b;let _0xcfcc9={};for(let _0x441a80 of _0x2dc546){const _0xbaa01c=_0x441a80['name'],_0x1a5fe7=_0x441a80['encoding']['codec'],_0x26eb9f=_0x360fd6[_0xbaa01c]['slice'](_0x133e78,_0x5440b5);if(_0x1a5fe7==='pack_11_10'+'_11'){if(_0xbaa01c==='scale'){const _0x2b84ab=_0x2b364b['min_scales'][_0x3999ac],_0x132457=_0x2b364b['max_scales'][_0x3999ac],_0x39fb67=_0x4b84ea(_0x26eb9f),_0x4ae470=_0x39fb67['length'],_0x55d1b1=new Uint16Array(_0x4ae470);for(let _0x1f7249=-0xfcf+-0x573+-0x716*-0x3;_0x1f7249<_0x4ae470;_0x1f7249++)_0x55d1b1[_0x1f7249]=_0xd9680d(Math['exp'](_0x5ef0a8(_0x2b84ab[_0x1f7249%(-0x2*0x1101+-0x1d3c+-0x3f41*-0x1)],_0x132457[_0x1f7249%(-0x29*-0x11+0x163d*0x1+-0x18f3)],_0x39fb67[_0x1f7249])));_0xcfcc9[_0xbaa01c]=_0x55d1b1;}else{const _0x3e20de=_0x4b84ea(_0x26eb9f);let _0x3df4be,_0x3acae2;if(_0xbaa01c==='position')_0x3df4be=_0x2b364b['min_means'][_0x3999ac],_0x3acae2=_0x2b364b['max_means'][_0x3999ac];else{if(_0xbaa01c==='motion')_0x3df4be=_0x2b364b['min_motion'][_0x3999ac],_0x3acae2=_0x2b364b['max_motion'][_0x3999ac];else{if(_0xbaa01c==='lifecycle'){const _0x188335=_0x2b364b['min_t_scal'+'e'][_0x3999ac],_0x13206d=_0x2b364b['max_t_scal'+'e'][_0x3999ac],_0x292d2c=_0x2b364b['min_time'][_0x3999ac],_0x2369b8=_0x2b364b['max_time'][_0x3999ac],_0x3e272d=_0x2b364b['min_cutoff'][_0x3999ac],_0x3726d1=_0x2b364b['max_cutoff'][_0x3999ac];_0x3df4be=[_0x188335[0x1194+-0x1*0x13f8+0x264],_0x292d2c[0x77f*0x2+0x9f*-0x16+-0x154],_0x3e272d[-0x1ee3*-0x1+0x1990+0x1*-0x3873]],_0x3acae2=[_0x13206d[0x1*0x5c9+-0x1*0x289+-0x8*0x68],_0x2369b8[-0xa10+0x93d+0xd3],_0x3726d1[-0x6e3+0x5*0x2ca+-0x70f*0x1]];}else throw new Error('Unknown\x20at'+'tribute\x20fo'+'r\x20pack_11_'+'10_11:\x20'+_0xbaa01c);}}for(let _0x164897=-0x8c6*0x3+0x5d+0x5*0x531;_0x164897<_0x3e20de['length'];_0x164897++)_0x3e20de[_0x164897]=_0x5ef0a8(_0x3df4be[_0x164897%(0x1579+-0xb8b+-0x9eb)],_0x3acae2[_0x164897%(0x1*0xd9b+0x1600+-0x2398)],_0x3e20de[_0x164897]);_0xcfcc9[_0xbaa01c]=_0x3e20de;}}else{if(_0x1a5fe7==='pack_8888'){let _0xbb7217=_0x39169b(_0x26eb9f);const _0x4291f3=_0x2b364b['min_colors'][_0x3999ac],_0x337088=_0x2b364b['max_colors'][_0x3999ac],_0x3a54e0=new Uint16Array(_0xbb7217['length']);for(let _0x52d1c5=-0x847*-0x2+-0x1*0x181+-0xf0d;_0x52d1c5<_0xbb7217['length'];_0x52d1c5++){const _0x48b915=_0x52d1c5*(-0x1*-0x1435+0x3b*0x45+-0x2*0x120c);_0x3a54e0[_0x48b915]=_0xd9680d(_0x5ef0a8(_0x4291f3[-0x192c+-0x1*-0xd8d+-0x11*-0xaf],_0x337088[0x448+0x2*0x344+-0x15a*0x8],_0xbb7217[_0x48b915])),_0x3a54e0[_0x48b915+(-0x24f5+-0x7eb*-0x1+0x1d0b)]=_0xd9680d(_0x5ef0a8(_0x4291f3[0x1b9d+0x24b3+-0x404f],_0x337088[-0x20e6+0x510+0x1bd7],_0xbb7217[_0x48b915+(0x1558+-0xf67+-0x5f0)])),_0x3a54e0[_0x48b915+(0x2628+0x9df+-0x3005)]=_0xd9680d(_0x5ef0a8(_0x4291f3[0x10ec+0x9e5+-0x1*0x1acf],_0x337088[0xc*-0x14b+0xa2b*0x1+-0x3*-0x1c9],_0xbb7217[_0x48b915+(0x1cb*0x2+-0xe*0x1df+0x169e)])),_0x3a54e0[_0x48b915+(-0xf1*-0x17+-0x215f+0x3*0x3e9)]=_0xd9680d(_0xbb7217[_0x48b915+(0xb76+-0x1*-0x5d5+-0x1148)]);}_0xcfcc9[_0xbaa01c]=_0x3a54e0;}else{if(_0x1a5fe7==='pack_rotat'+'ion_32'){const _0x5e0672=_0x156cdd(_0x26eb9f);_0xcfcc9[_0xbaa01c]=_0x5e0672;}else{if(_0x1a5fe7==='range_quan'+'t_u8'){if(_0xbaa01c==='feature_re'+'st')continue;throw new Error('Unknown\x20co'+'dec:\x20'+_0x1a5fe7);}}}}}return{'chunkDecompressed':_0xcfcc9,'chunkStartIdx':_0x5440b5};},_0xa49178=(_0x505b43,_0x461b1d)=>{const _0x38a95a='feature_re'+'st',_0x49f76a=_0x461b1d['find'](_0x379131=>_0x379131['name']===_0x38a95a);let _0x1959d4;const _0x2ea587=_0x49f76a['encoding']['codec'],_0x223961=_0x505b43[_0x38a95a];if(_0x2ea587==='range_quan'+'t_u8'){const [_0x7d95e1,_0x484e6f]=_0x49f76a['encoding']['range'];_0x1959d4=_0x1d4bb5(_0x223961,_0x7d95e1,_0x484e6f);}else throw new Error('Unknown\x20co'+'dec:\x20'+_0x2ea587);return _0x1959d4;},_0x1c312f=(_0x5e1ff2,_0x1c2fd1,_0x37841d,_0x2d3442)=>{let _0x517e3f=-0x2*0xcc+0x2f9+-0x161;const _0x18fb88={};for(const _0x3e0208 of _0x37841d){const {dataSize:_0x22754e}=_0x2cbdda(_0x3e0208,_0x1c2fd1);if(['vec3f','vec4f','vec2f']['includes'](_0x3e0208['dataType']))_0x18fb88[_0x3e0208['name']]=new Float32Array(_0x5e1ff2['buffer']['slice'](_0x517e3f,_0x517e3f+_0x22754e));else{if(_0x3e0208['dataType']['startsWith']('array<floa'+'t'))_0x18fb88[_0x3e0208['name']]=new Float32Array(_0x5e1ff2['buffer']['slice'](_0x517e3f,_0x517e3f+_0x22754e));else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x3e0208['dataType']);}_0x517e3f+=_0x22754e;}const _0x4432f8=new Uint16Array(_0x18fb88['scale']['length']);for(let _0x26e960=-0x204d*-0x1+0x21d5+-0x4222;_0x26e960<_0x18fb88['scale']['length'];_0x26e960++)_0x4432f8[_0x26e960]=_0xd9680d(Math['exp'](_0x18fb88['scale'][_0x26e960]));_0x18fb88['scale']=_0x4432f8;const _0x1b3510=_0x18fb88['rotation']['length']/(-0x1*0x1229+-0x7*0x4ea+-0x2b*-0x139),_0xd6b9c1=new Float32Array(_0x1b3510*(-0x46d+-0x1fef+-0x1*-0x245f));for(let _0x4da6af=-0x2*0x38b+0xc11*-0x2+0x1f38;_0x4da6af<_0x1b3510;_0x4da6af++){const _0x585f12=_0x435c0b(_0x18fb88['rotation'][_0x4da6af*(0x1*0x9e9+0x17*0x80+0x1*-0x1565)],_0x18fb88['rotation'][_0x4da6af*(-0xfcc+0xf12+-0x5f*-0x2)+(0x206b+-0x31*-0x4d+-0x2f27*0x1)],_0x18fb88['rotation'][_0x4da6af*(0x3ef*-0x8+0x1*0x1623+0x959)+(-0x1*-0x118c+-0x5*0xd+0x375*-0x5)],_0x18fb88['rotation'][_0x4da6af*(-0x1f80+-0x37*-0x2+0x1f16)+(0xcc9*0x2+0x1b*-0x16e+0xd0b)]);_0xd6b9c1[_0x4da6af*(0x1c3d+0x1f75+0x1*-0x3baf)]=_0x585f12['x'],_0xd6b9c1[_0x4da6af*(0x9a4*-0x4+-0x121a+0x38ad)+(0x23*0x111+0xbfe+-0x107*0x30)]=_0x585f12['y'],_0xd6b9c1[_0x4da6af*(-0x2*-0x15b+-0x7d0+0x51d)+(0x14da+0xec+-0x15c4)]=_0x585f12['z'];}return _0x18fb88['rotation']=_0xd6b9c1,_0x18fb88['color_opac'+'ity']=_0x562fee(_0x18fb88['color_opac'+'ity']),_0x18fb88['time_index']=new Float32Array(_0x1c2fd1),_0x18fb88['time_index']['fill'](_0x2d3442-(0x2381*-0x1+0x67f+0x7*0x425)),_0x18fb88;},_0x46a884=(_0xb47065,_0x56f1d8)=>{const _0x195a92={};if(_0xb47065['length']===0x2298+0x149c+0x3733*-0x1)return _0xb47065[-0x11*0x49+-0xfd3*0x1+0x14ac];for(const _0x2712c8 of Object['keys'](_0xb47065[0xf4a+0x25*-0x1+-0xf25]))if(_0xb47065[-0x2561+-0x427+0x2988][_0x2712c8]instanceof Float32Array||_0xb47065[-0x222c+-0x1b9e+0x3dca][_0x2712c8]instanceof Uint16Array){const _0x464122=_0xb47065['reduce']((_0x1a8797,_0x597773)=>_0x1a8797+_0x597773[_0x2712c8]['length'],0x1c10*-0x1+-0xbcf*-0x2+0x472);let _0x23bec4;_0xb47065[-0xdb3*-0x1+-0x1*0x24b+0xb68*-0x1][_0x2712c8]instanceof Uint16Array?_0x23bec4=new Uint16Array(_0x464122):_0x23bec4=new Float32Array(_0x464122);let _0x5c86b7=0x16*-0x4d+0x745*-0x3+-0x1c6d*-0x1;for(const _0x50ffd7 of _0xb47065)_0x23bec4['set'](_0x50ffd7[_0x2712c8],_0x5c86b7),_0x5c86b7+=_0x50ffd7[_0x2712c8]['length'];_0x195a92[_0x2712c8]=_0x23bec4;}else Array['isArray'](_0xb47065[0x1520+0x1720+-0x2c40][_0x2712c8])?_0x195a92[_0x2712c8]=_0xb47065['flatMap'](_0x24ea1b=>Array['from'](_0x24ea1b[_0x2712c8])):_0x195a92[_0x2712c8]=_0xb47065['map'](_0x2b1c75=>_0x2b1c75[_0x2712c8])['flat']();return _0x195a92;};}class hk extends me{constructor(_0x2c4e49){super(),h(this,'manifestUr'+'l'),h(this,'worker'),(this['manifestUr'+'l']=_0x2c4e49,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+ck['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','cborXUrl':'https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/cbor-x@1'+'.6.0.min.j'+'s'});}['loadGsdMan'+'ifest'](_0xc5da8b){var _0xd39405;return(_0xd39405=this['worker'])==null||_0xd39405['postMessag'+'e']({'type':'loadGsdMan'+'ifest','manifestUrl':this['manifestUr'+'l'],'loadRepresentation':_0xc5da8b}),new Promise((_0x2e36f6,_0x4776e2)=>{if(!this['worker']){_0x4776e2(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x49679b=>{if(!this['worker'])return;const {data:_0x17d5c5}=_0x49679b;if(this['manifestUr'+'l']===_0x17d5c5['url'])switch(_0x17d5c5['type']){case'onloadMani'+'fest':_0x2e36f6({'manifest':_0x17d5c5['data'],'url':_0x17d5c5['url'],'representation':_0x17d5c5['representa'+'tion']});break;case'error':_0x4776e2(_0x17d5c5['data']);break;}};});}['loadGsdSeg'+'ments'](_0x58971a,_0x7edf42){var _0x3be753;return(_0x3be753=this['worker'])==null||_0x3be753['postMessag'+'e']({'type':'loadGsdSeg'+'ments'}),new Promise((_0x99b3c4,_0x562091)=>{if(!this['worker']){_0x562091(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x4c2f70=>{if(!this['worker'])return;const {data:_0x1c4065}=_0x4c2f70;if(this['manifestUr'+'l']===_0x1c4065['url'])switch(_0x1c4065['type']){case'progress':_0x58971a==null||_0x58971a(_0x1c4065['bytes'],_0x1c4065['totalLengt'+'h'],_0x1c4065['url']);break;case'loadGsdSeg'+'mentsDone':_0x99b3c4(_0x1c4065['data']);break;case'error':_0x7edf42==null||_0x7edf42(_0x1c4065['data'],_0x1c4065['url']);break;}};});}['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x5d9ffd,_0x23bb42,_0x3f8cee){var _0x4bb8ab;return(_0x4bb8ab=this['worker'])==null||_0x4bb8ab['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'ments','timelineIndexs':_0x5d9ffd}),new Promise((_0x17a7e5,_0x540f85)=>{if(!this['worker']){_0x540f85(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x102edc=>{if(!this['worker'])return;const {data:_0x229c14}=_0x102edc;if(this['manifestUr'+'l']===_0x229c14['url'])switch(_0x229c14['type']){case'progress':_0x23bb42==null||_0x23bb42(_0x229c14['bytes'],_0x229c14['totalLengt'+'h'],_0x229c14['url']);break;case'loadTimeli'+'neIndexSeg'+'mentsDone':_0x17a7e5(_0x229c14);break;case'error':_0x3f8cee==null||_0x3f8cee(_0x229c14['data'],_0x229c14['url']);break;}};});}['destroy'](){this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(0xd7b+0x1835+-0x25b0));}}const Xh=class Xh{constructor(_0x3056b6,_0x37f51a,_0x50e57a){h(this,'lastLoadIn'+'dex',-0x1462+-0x1087*-0x1+-0x149*-0x3),h(this,'gsdAssetPa'+'rser'),(this['manifest']=_0x3056b6,this['representa'+'tion']=_0x37f51a,this['gsdAssetPa'+'rser']=_0x50e57a,this['segmentTim'+'elines']=this['getSegment'+'Timeline'](_0x3056b6,_0x37f51a));}['getSegment'+'Timeline'](_0x52ea37,_0x32e43e){let _0x5ba0d6=null;for(const _0xb90168 of _0x52ea37['adaptation'+'Sets'])if(_0xb90168['contentTyp'+'e']==='4dgs'){for(const _0x40269a of _0xb90168['representa'+'tions'])if(_0x40269a['id']===_0x32e43e){_0x5ba0d6=_0x40269a;break;}break;}if(!_0x5ba0d6)throw new Error('Representa'+'tion\x20\x27'+_0x32e43e+('\x27\x20not\x20foun'+'d'));return _0x5ba0d6['segmentTem'+'plate'][0x1094*0x2+0x1cde+-0x1d3*0x22]['segmentTim'+'eline'];}['onTimeChan'+'ged'](_0x569a61){const _0xc1834f=this['findSegmen'+'tTimeline'](_0x569a61);if(!_0xc1834f)return;const _0x471ec3=_0xc1834f['timelineIn'+'dex']<this['segmentTim'+'elines']['length']-(-0x2558+-0x23c7*-0x1+-0x43*-0x6)?_0xc1834f['timelineIn'+'dex']+(0x12b1+0x1*-0x775+-0xb3b):-0xdf2+-0xfb9+0x1dab;this['lastLoadIn'+'dex']!==_0x471ec3&&(this['lastLoadIn'+'dex']=_0x471ec3,this['loadNextSe'+'gment'](_0x471ec3));}async['loadNextSe'+'gment'](_0x2764bd){const _0x1c0148=[];for(let _0x407ef0=-0xd0b+-0x8fd+0x1d6*0xc;_0x407ef0<Xh['CACHE_COUN'+'T'];_0x407ef0++)_0x1c0148['push']((_0x2764bd+_0x407ef0)%this['segmentTim'+'elines']['length']);const _0x2483c1=_0x1c0148[_0x1c0148['length']-(0x1*-0x215f+-0x1*0x20ff+0x425f)],_0x540b84=this['segmentTim'+'elines'][_0x2483c1]['t']+this['segmentTim'+'elines'][_0x2483c1]['d'];this['gsdAssetPa'+'rser']['appendload'+'DataTask'](_0x1c0148,_0x540b84);}['findSegmen'+'tTimeline'](_0x4c8b01){let _0x3e2cdb=0x985+-0x1*0xb47+0x2d*0xa,_0x1414d8=this['segmentTim'+'elines']['length']-(0x163*-0x11+0xe6b+0x929);for(;_0x3e2cdb<=_0x1414d8;){const _0x395be8=_0x3e2cdb+_0x1414d8>>0x7*0x42d+0x1cb7+-0xd*0x475,{t:_0x25ddd8,d:_0x4a786e}=this['segmentTim'+'elines'][_0x395be8];if(_0x4c8b01<_0x25ddd8)_0x1414d8=_0x395be8-(0xbd0+-0x2669+-0x552*-0x5);else{if(_0x4c8b01>=_0x25ddd8+_0x4a786e)_0x3e2cdb=_0x395be8+(0x1f2e+-0x25b3+0x686);else return{'timeline':this['segmentTim'+'elines'][_0x395be8],'timelineIndex':_0x395be8};}}return null;}};h(Xh,'CACHE_COUN'+'T',0x184+-0x565*-0x7+-0xd*0x305);let Wu=Xh;class dk{constructor(_0x3fd23c,_0x1a66e5){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'manifest'),h(this,'schedule'),h(this,'readWorker'),h(this,'loadDataTa'+'skQueue',[]),h(this,'isProcessi'+'ngLoadTask'+'Queue',!(-0xe3c*0x1+0x1*-0x81b+0x1658)),(console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','Register\x20G'+'sdParser.c'+'onstructor'),this['app']=_0x3fd23c,this['maxRetries']=_0x1a66e5,this['urlList']=[],this['gsplatReso'+'urce']=null,this['totalRecei'+'ved']=-0x126c+0x4bc+0x49*0x30,this['manifest']={});}async['load'](_0x405b27,_0x2015e4,_0xd3fdb2){console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','GsdParser.'+'load',_0x405b27['load']);const _0x4d9514=_0xd3fdb2['data']['events'];this['events']=_0x4d9514,this['asset']=_0xd3fdb2,this['callback']=_0x2015e4,this['timeOption']=_0xd3fdb2['data']['timeOption'];let _0x461da5=_0xd3fdb2['data']['representa'+'tion']||'high-raw';this['readWorker']=new hk(_0x405b27['load']);const _0x48ac0b=await this['readWorker']['loadGsdMan'+'ifest'](_0x461da5);this['manifest']=_0x48ac0b['manifest'],_0x461da5=_0x48ac0b['manifest']['representa'+'tion']||_0x461da5,this['schedule']=new Wu(this['manifest'],_0x461da5,this),this['totalRecei'+'vedCount']=-0xa*-0x26b+-0x95a+-0x34*0x49;const _0x3680bc=this['getSegment'+'Timeline'](this['manifest'],_0x461da5),_0xcfa0a=_0x3680bc[-0x21b*0x12+-0x24a4+-0x553*-0xe]['t']+_0x3680bc[0x2*-0x313+-0x240a+-0x2a30*-0x1]['d'];this['appendload'+'DataTask']([-0x2415+-0x1b1f+-0x1*-0x3f34,0x1712+0x332+-0x1a43],_0xcfa0a),_0x4d9514['on']('timeChange'+'d',_0x23e9b1=>{var _0x5a9f78;(_0x5a9f78=this['schedule'])==null||_0x5a9f78['onTimeChan'+'ged'](_0x23e9b1);});}['getSegment'+'Timeline'](_0x4baec7,_0x673160){let _0x5024d0=null;for(const _0x525a51 of _0x4baec7['adaptation'+'Sets'])if(_0x525a51['contentTyp'+'e']==='4dgs'){for(const _0x46110f of _0x525a51['representa'+'tions'])if(_0x46110f['id']===_0x673160){_0x5024d0=_0x46110f;break;}break;}if(!_0x5024d0)throw new Error('Representa'+'tion\x20\x27'+_0x673160+('\x27\x20not\x20foun'+'d'));return _0x5024d0['segmentTem'+'plate'][0xc2*0x20+-0x1*0x156f+-0x2d1]['segmentTim'+'eline'];}['appendload'+'DataTask'](_0x339fd8,_0x2ec277){this['loadDataTa'+'skQueue']['push']({'segmentIndexs':_0x339fd8,'loadedTime':_0x2ec277}),this['isProcessi'+'ngLoadTask'+'Queue']||Promise['resolve']()['then'](()=>this['processLoa'+'dQueue']());}async['processLoa'+'dQueue'](){if(!this['isProcessi'+'ngLoadTask'+'Queue']){this['isProcessi'+'ngLoadTask'+'Queue']=!(0x1*-0xa9d+-0x937*-0x3+-0x1108*0x1);try{for(;this['loadDataTa'+'skQueue']['length']>0x1f96+-0x1428+-0x85*0x16;){const _0xecdc13=this['loadDataTa'+'skQueue']['shift']();await this['loadGsplat'+'Data'](_0xecdc13);}}finally{this['isProcessi'+'ngLoadTask'+'Queue']=!(0xfb*-0x21+-0x5*-0x3a+0x2*0xf9d);}}}async['loadGsplat'+'Data'](_0x409616){var _0x4751d6,_0x105651;const {segmentIndexs:_0x32d588,loadedTime:_0x574888}=_0x409616,_0x2c298e=this['events'],_0xc76804=this['asset'],_0x475bf3=this['callback'],_0x346ef9=this['timeOption'];globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('____loadTi'+'me','gsd\x20======'+'=========='+'=========='+'=========='+'=========='+'========='),console['log']('____loadTi'+'me','gsd\x20start\x20'+'loadGsplat'+'Data',_0x32d588,(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](0x1b7*-0x4+-0x1d35+0x2413));try{const _0x296c0e=await this['readWorker']['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x32d588,(_0x3750fa,_0x4a6af7)=>{this['totalRecei'+'ved']+=_0x3750fa,_0xc76804&&_0x2c298e['fire']('progress',this['totalRecei'+'ved'],_0x4a6af7);},(_0x404691,_0x179f59)=>{debugger;console['warn']('ERROE\x20Load'+'\x20GSD',_0x179f59,_0x404691);});console['log']('____loadTi'+'me','gsd\x20end\x20lo'+'adGsplatDa'+'ta',(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](-0x250d+-0x1723+0x14f*0x2e),_0x296c0e['data']['elements'][-0x146d+-0x9*-0x3c8+-0xd9b]['count'],((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/_0x296c0e['data']['elements'][0x9fb+-0x2665*0x1+0x1c6a]['count']*(-0x5*-0xe29+-0x1041+-0xf7c))['toFixed'](0x7*-0x39a+0x1*0x9f5+0xf43));const _0x4ff075=_0x296c0e['data'];if(_0x4ff075['elements'][-0x5ef+0xddf*0x1+0x2*-0x3f8]['count']===-0x1445*-0x1+0xc8d*0x1+-0x20d2)return;this['totalRecei'+'vedCount']+=_0x4ff075['elements'][-0x1*0x219b+0x5*0x36b+-0x842*-0x2]['count'];const _0x304bc9=new iC(_0x4ff075['elements'],_0x4ff075['comments']);_0xc76804['fire']('load:data',_0x304bc9);const _0x46d0f5=_0xc76804['data']['createTime']!==((_0x105651=(_0x4751d6=this['onlyOneAss'+'et'])==null?void(0x1*-0x24eb+0x1900+0x1*0xbeb):_0x4751d6['data'])==null?void(0x6*0x89+-0x1592+0x14*0xeb):_0x105651['createTime']);this['gsplatReso'+'urce']&&!_0x46d0f5?(console['log']('____\x20ENGIN'+'E\x20IVAN','appendGSpl'+'atDecodedR'+'esource'),this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x304bc9,_0x346ef9,_0x574888,_0xc76804)):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'DecodedRes'+'ource'),this['gsplatReso'+'urce']=new CC(this['app']['graphicsDe'+'vice'],_0x304bc9),this['gsplatReso'+'urce']['setSceneIn'+'fo'](this['manifest']['sceneInfo']),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x346ef9,this['onlyOneAss'+'et']=_0xc76804,_0x475bf3&&_0x475bf3(null,this['gsplatReso'+'urce']),_0x2c298e['fire']('loadAllAss'+'etsDone'));}catch(_0x39676e){console['error']('loadGsplat'+'Data','error',_0x39676e),_0x475bf3&&_0x475bf3(_0x39676e,null);}}['open'](_0x4a5a2a,_0x6be8b4){return _0x6be8b4;}}class fk extends Qe{constructor(_0x770821){console['log']('____\x20ENGIN'+'E\x20IVAN','Register\x20G'+'SplatHandl'+'er.constru'+'ctor\x20by\x20ap'+'plication\x20'+'addResourc'+'eHandles'),super(_0x770821,'gsplat'),this['parsers']={'ply':new lk(_0x770821,0x325+0x1316+-0x2*0xb1c),'json':new dk(_0x770821,0x9d*-0x4+0x1299+-0x23*0x76)};}['_getUrlWit'+'houtParams'](_0x383c49){return _0x383c49['indexOf']('?')>=-0x3*-0x2dd+-0x14a*-0x19+-0x28d1?_0x383c49['split']('?')[-0x1*0x3cb+0x2*0xcf5+-0x161f]:_0x383c49;}['_getParser'](_0x11b934){const _0x105e8e=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x11b934))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x105e8e]||this['parsers']['ply'];}['load'](_0x252bff,_0x454dfc,_0x4ab237){console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.load'),typeof _0x252bff=='string'&&(_0x252bff={'load':_0x252bff,'original':_0x252bff}),this['_getParser'](_0x252bff['original'])['load'](_0x252bff,_0x454dfc,_0x4ab237);}['open'](_0x47b4c8,_0x56968f,_0x538f41){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.open'),_0x56968f;}}class $u{static['setCompres'+'sedPRS'](_0x111fee,_0x3c57ba,_0x43cb7a){const _0x40fff1=_0x43cb7a['singleVecs'];let _0x3eee76,_0x48deda;const _0x9d0e8a=_0x3c57ba['___1'];_0x9d0e8a||(_0x3eee76=_0x43cb7a['tripleVecs'],_0x48deda=_0x3c57ba['___2']);let _0x247284=_0x9d0e8a?_0x9d0e8a[-0x5fb*0x2+0x1a32+-0x38f*0x4]:_0x3eee76[_0x48deda];_0x111fee['setLocalPo'+'sition'](_0x40fff1[_0x247284],_0x40fff1[_0x247284+(-0x708+-0x10c*-0x1+0x5fd)],_0x40fff1[_0x247284+(0x1b2a+-0x201e+0x4f6)]),_0x247284=_0x9d0e8a?_0x9d0e8a[0x3*-0x3fb+0x1*0x259d+-0x19ab]:_0x3eee76[_0x48deda+(-0x1ee1+-0x23e2+0x42c4)],_0x111fee['setLocalEu'+'lerAngles'](_0x40fff1[_0x247284],_0x40fff1[_0x247284+(0x994*-0x3+-0x1d9d+0x3a5a)],_0x40fff1[_0x247284+(-0xff6+0x1*0x255e+-0x1566)]),_0x247284=_0x9d0e8a?_0x9d0e8a[-0x1115*0x2+0x1300+0xf2c]:_0x3eee76[_0x48deda+(0x2444+0x469*-0x6+-0x9cc)],_0x111fee['setLocalSc'+'ale'](_0x40fff1[_0x247284],_0x40fff1[_0x247284+(-0x2642+-0x4dd+-0x10*-0x2b2)],_0x40fff1[_0x247284+(0x1*-0x786+-0x125+0x8ad)]);}static['oneCharToK'+'ey'](_0x12d5cf,_0x387f41){const _0x3ccb18=_0x12d5cf['charCodeAt'](-0x132b+0x139*-0x1b+-0x342e*-0x1)-_0x387f41['fieldFirst'+'Code'];return _0x387f41['fieldArray'][_0x3ccb18];}static['multCharTo'+'Key'](_0x96abbc,_0x5af790){let _0x43ab54=0x1*-0x120a+-0x26c3+0x38cd;for(let _0x40f1a6=-0x7*-0x529+-0xb*-0x2f3+0x10*-0x449;_0x40f1a6<_0x96abbc['length'];_0x40f1a6++)_0x43ab54=_0x43ab54*_0x5af790['fieldCodeB'+'ase']+_0x96abbc['charCodeAt'](_0x40f1a6)-_0x5af790['fieldFirst'+'Code'];return _0x5af790['fieldArray'][_0x43ab54];}}class Uh{constructor(_0x3dc0ae,_0x589ab6){this['_node']=_0x3dc0ae,this['_data']=_0x589ab6;}['run'](){const _0x12b34f=Object['prototype']['toString']['call'](this['_node']);return _0x12b34f==='[object\x20Ob'+'ject]'?this['_handleMap']():_0x12b34f==='[object\x20Ar'+'ray]'?this['_handleArr'+'ay']():this['_result']=this['_node'],this['_result'];}['_handleMap'](){this['_result']={},Object['keys'](this['_node'])['forEach'](this['_handleKey'],this);}['_handleKey'](_0x1e63f2){let _0x313b56=_0x1e63f2;const _0x40a829=_0x1e63f2['length'];_0x40a829===-0x6ba+0x25a3+-0x1*0x1ee8?_0x313b56=$u['oneCharToK'+'ey'](_0x1e63f2,this['_data']):_0x40a829===-0x7a7*-0x2+0x1*0x44f+-0x139b&&(_0x313b56=$u['multCharTo'+'Key'](_0x1e63f2,this['_data'])),this['_result'][_0x313b56]=new Uh(this['_node'][_0x1e63f2],this['_data'])['run']();}['_handleArr'+'ay'](){this['_result']=[],this['_node']['forEach'](this['_handleArE'+'lt'],this);}['_handleArE'+'lt'](_0x4dfd91){const _0x14711a=new Uh(_0x4dfd91,this['_data'])['run']();this['_result']['push'](_0x14711a);}}class bm{constructor(_0x137ac1,_0x2457e6){this['_app']=_0x137ac1,this['_isTemplat'+'e']=_0x2457e6;}['parse'](_0x43e979){const _0x4b4994={};let _0x495361=null;const _0x393905=_0x43e979['compressed'+'Format'];_0x393905&&!_0x43e979['entDecompr'+'essed']&&(_0x43e979['entDecompr'+'essed']=!(0x1554+0x16b5*-0x1+0x161),_0x43e979['entities']=new Uh(_0x43e979['entities'],_0x393905)['run']());for(const _0x5169d in _0x43e979['entities']){const _0x117c81=_0x43e979['entities'][_0x5169d],_0x517f18=this['_createEnt'+'ity'](_0x117c81,_0x393905);_0x4b4994[_0x5169d]=_0x517f18,_0x117c81['parent']===null&&(_0x495361=_0x517f18);}for(const _0xad3754 in _0x43e979['entities']){const _0x4f9a29=_0x4b4994[_0xad3754],_0x34e61c=_0x43e979['entities'][_0xad3754]['children'],_0x55f57b=_0x34e61c['length'];for(let _0x319f71=-0x113a+-0x1*-0x26b3+0x1579*-0x1;_0x319f71<_0x55f57b;_0x319f71++){const _0x1037d2=_0x4b4994[_0x34e61c[_0x319f71]];_0x1037d2&&_0x4f9a29['addChild'](_0x1037d2);}}return this['_openCompo'+'nentData'](_0x495361,_0x43e979['entities']),_0x495361;}['_createEnt'+'ity'](_0x4d1e52,_0x44315f){const _0x5561d3=new lt(_0x4d1e52['name'],this['_app']);if(_0x5561d3['setGuid'](_0x4d1e52['resource_i'+'d']),this['_setPosRot'+'Scale'](_0x5561d3,_0x4d1e52,_0x44315f),_0x5561d3['_enabled']=_0x4d1e52['enabled']??!(-0x19ac*0x1+-0x2*-0x16a+0x16d8),this['_isTemplat'+'e']?_0x5561d3['_template']=!(0x1da2+-0x14ae+-0x8f4):_0x5561d3['_enabledIn'+'Hierarchy']=_0x5561d3['_enabled'],_0x5561d3['template']=_0x4d1e52['template'],_0x4d1e52['tags']){for(let _0x1a4b49=-0x7*0x185+-0x413+0xeb6;_0x1a4b49<_0x4d1e52['tags']['length'];_0x1a4b49++)_0x5561d3['tags']['add'](_0x4d1e52['tags'][_0x1a4b49]);}return _0x5561d3;}['_setPosRot'+'Scale'](_0x385bdc,_0x5e593c,_0x44ca20){if(_0x44ca20)$u['setCompres'+'sedPRS'](_0x385bdc,_0x5e593c,_0x44ca20);else{const _0x2a871b=_0x5e593c['position'],_0x2d2ec6=_0x5e593c['rotation'],_0x49e33f=_0x5e593c['scale'];_0x385bdc['setLocalPo'+'sition'](_0x2a871b[0x23b3*0x1+-0x1379*0x1+0x43*-0x3e],_0x2a871b[-0x37a*0x9+-0x11*0x9d+0x29b8],_0x2a871b[0xa76+0x1c42+-0x7be*0x5]),_0x385bdc['setLocalEu'+'lerAngles'](_0x2d2ec6[0x1a44+-0x1a1f+-0x25],_0x2d2ec6[-0x26a5+-0xd19+0x33bf],_0x2d2ec6[0x1*-0x155e+0x604+0x2*0x7ae]),_0x385bdc['setLocalSc'+'ale'](_0x49e33f[0xc6+0x16*-0x28+0x2aa],_0x49e33f[0x2640+-0x3f*0x89+-0x488],_0x49e33f[0x37+-0x1124*0x2+0x1*0x2213]);}}['_openCompo'+'nentData'](_0x1235c6,_0x3eb42f){const _0x3d9a9e=this['_app']['systems']['list'];let _0x338e5c=_0x3d9a9e['length'];const _0x407ca0=_0x3eb42f[_0x1235c6['getGuid']()];for(let _0x3e8f98=0x1*-0x6b3+0x22e9+-0x1c36;_0x3e8f98<_0x338e5c;_0x3e8f98++){const _0x5e0d61=_0x3d9a9e[_0x3e8f98],_0xb54562=_0x407ca0['components'][_0x5e0d61['id']];_0xb54562&&_0x5e0d61['addCompone'+'nt'](_0x1235c6,_0xb54562);}_0x338e5c=_0x407ca0['children']['length'];const _0x38e8b0=_0x1235c6['_children'];for(let _0x1b67c9=0x1*-0x2282+-0x704*-0x1+0x1b7e;_0x1b67c9<_0x338e5c;_0x1b67c9++)_0x38e8b0[_0x1b67c9]?_0x38e8b0[_0x1b67c9]=this['_openCompo'+'nentData'](_0x38e8b0[_0x1b67c9],_0x3eb42f):w['warn']('Scene\x20data'+'\x20is\x20invali'+'d\x20where\x20a\x20'+'child\x20unde'+'r\x20\x22'+_0x1235c6['name']+('\x22\x20Entity\x20d'+'oesn\x27t\x20exi'+'st.\x20Please'+'\x20check\x20the'+'\x20scene\x20dat'+'a.'));return _0x1235c6;}}class E0{static['load'](_0x3db8e6,_0x3afb30,_0x512d67){typeof _0x3db8e6=='string'&&(_0x3db8e6={'load':_0x3db8e6,'original':_0x3db8e6}),ot['get'](_0x3db8e6['load'],{'retry':_0x3afb30>-0x16d6+0x1ab*-0xd+0x2c85,'maxRetries':_0x3afb30},(_0x1ad0a6,_0x369dc9)=>{if(!_0x1ad0a6)_0x512d67(_0x1ad0a6,_0x369dc9);else{let _0x3b595e='Error\x20whil'+'e\x20loading\x20'+'scene\x20JSON'+'\x20'+_0x3db8e6['original'];_0x1ad0a6['message']?(_0x3b595e+=':\x20'+_0x1ad0a6['message'],_0x1ad0a6['stack']&&(_0x3b595e+='\x0a'+_0x1ad0a6['stack'])):_0x3b595e+=':\x20'+_0x1ad0a6,_0x512d67(_0x3b595e);}});}}class uk extends Qe{constructor(_0x36dcb8){super(_0x36dcb8,'hierarchy');}['load'](_0x41059e,_0x9ce20c){E0['load'](_0x41059e,this['maxRetries'],_0x9ce20c);}['open'](_0x58b5c8,_0x1e2e40){this['_app']['systems']['script']['preloading']=!(-0x1be5+-0xb15*-0x1+0x10d0);const _0x21d8e0=new bm(this['_app'],!(-0x256e+-0xde4+0x3353))['parse'](_0x1e2e40);return this['_app']['systems']['script']['preloading']=!(0xf*-0x4c+-0x371+0x7e6),_0x21d8e0;}}class pk extends Qe{constructor(_0x4b65de){super(_0x4b65de,'html'),h(this,'decoder',null);}['load'](_0x313545,_0x304ab1){typeof _0x313545=='string'&&(_0x313545={'load':_0x313545,'original':_0x313545}),ot['get'](_0x313545['load'],{'retry':this['maxRetries']>0x7b*0x10+-0x5*-0x49d+-0x1ec1,'maxRetries':this['maxRetries']},(_0x40b49b,_0x39340f)=>{_0x40b49b?_0x304ab1('Error\x20load'+'ing\x20html\x20r'+'esource:\x20'+_0x313545['original']+'\x20['+_0x40b49b+']'):_0x304ab1(null,_0x39340f);});}['openBinary'](_0x29d41d){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x29d41d);}}class mk extends Qe{constructor(_0x2ed799){super(_0x2ed799,'json'),h(this,'decoder',null);}['load'](_0x393c4e,_0x5d64cd){typeof _0x393c4e=='string'&&(_0x393c4e={'load':_0x393c4e,'original':_0x393c4e});const _0x5d6367={'retry':this['maxRetries']>0x1f8+-0xd60+0xb68,'maxRetries':this['maxRetries']};_0x393c4e['load']['startsWith']('blob:')&&(_0x5d6367['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x393c4e['load'],_0x5d6367,(_0x594216,_0x3676c4)=>{_0x594216?_0x5d64cd('Error\x20load'+'ing\x20JSON\x20r'+'esource:\x20'+_0x393c4e['original']+'\x20['+_0x594216+']'):_0x5d64cd(null,_0x3676c4);});}['openBinary'](_0x3bdeb8){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),JSON['parse'](this['decoder']['decode'](_0x3bdeb8));}}class _k{constructor(){this['removeInva'+'lid']=!(-0x1*-0x2029+0x1*-0xd55+-0xf1*0x14),this['valid']=!(-0x1a15*0x1+-0xb*-0x35f+-0xb00),this['enumValida'+'tors']={'occludeSpecular':this['_createEnu'+'mValidator']([lv,bd,cv]),'cull':this['_createEnu'+'mValidator']([bt,pa,Fo,Ax]),'blendType':this['_createEnu'+'mValidator']([Gp,Hp,Zs,Cs,Gn,Wp,Ed,$p,Xp,qp,jp]),'depthFunc':this['_createEnu'+'mValidator']([Cx,hh,dh,Wf,Px,Mx,Dx,Wi])};}['setInvalid'](_0x48748c,_0x221c5f){this['valid']=!(-0x1f60+-0x1f5a*-0x1+-0x7*-0x1),w['warn']('Ignoring\x20i'+'nvalid\x20Sta'+'ndardMater'+'ial\x20proper'+'ty:\x20'+_0x48748c,_0x221c5f[_0x48748c]),this['removeInva'+'lid']&&delete _0x221c5f[_0x48748c];}['validate'](_0x5322bf){const _0x476eb8=$n,_0xf7dfe3=gb,_0x400c3b=_0x5322bf['mappingFor'+'mat']==='path';for(const _0x1b188f in _0x5322bf){const _0x22d42f=_0x476eb8[_0x1b188f];if(!_0x22d42f){_0xf7dfe3[_0x1b188f]?delete _0x5322bf[_0x1b188f]:(w['warnOnce']('Ignoring\x20u'+'nsupported'+'\x20input\x20pro'+'perty\x20to\x20s'+'tandard\x20ma'+'terial:\x20'+_0x1b188f),this['valid']=!(-0x1573+-0x1850+-0x16e2*-0x2));continue;}if(_0x22d42f['startsWith']('enum')){const _0x1582bb=_0x22d42f['split'](':')[0x8*0x1d+0xef8+-0xfdf];this['enumValida'+'tors'][_0x1582bb]&&(this['enumValida'+'tors'][_0x1582bb](_0x5322bf[_0x1b188f])||this['setInvalid'](_0x1b188f,_0x5322bf));}else{if(_0x22d42f==='number')typeof _0x5322bf[_0x1b188f]!='number'&&this['setInvalid'](_0x1b188f,_0x5322bf);else{if(_0x22d42f==='boolean')typeof _0x5322bf[_0x1b188f]!='boolean'&&this['setInvalid'](_0x1b188f,_0x5322bf);else{if(_0x22d42f==='string')typeof _0x5322bf[_0x1b188f]!='string'&&this['setInvalid'](_0x1b188f,_0x5322bf);else{if(_0x22d42f==='vec2')_0x5322bf[_0x1b188f]instanceof Array&&_0x5322bf[_0x1b188f]['length']===-0x85a*0x2+-0x17ae+-0xeb*-0x2c||this['setInvalid'](_0x1b188f,_0x5322bf);else{if(_0x22d42f==='rgb')_0x5322bf[_0x1b188f]instanceof Array&&_0x5322bf[_0x1b188f]['length']===0x1ca5+0x1b6a+-0x380c||this['setInvalid'](_0x1b188f,_0x5322bf);else{if(_0x22d42f==='texture')_0x400c3b?typeof _0x5322bf[_0x1b188f]=='string'||_0x5322bf[_0x1b188f]===null||_0x5322bf[_0x1b188f]instanceof _e||this['setInvalid'](_0x1b188f,_0x5322bf):typeof _0x5322bf[_0x1b188f]=='number'||_0x5322bf[_0x1b188f]===null||_0x5322bf[_0x1b188f]instanceof _e||this['setInvalid'](_0x1b188f,_0x5322bf);else{if(_0x22d42f==='boundingbo'+'x')_0x5322bf[_0x1b188f]['center']&&_0x5322bf[_0x1b188f]['center']instanceof Array&&_0x5322bf[_0x1b188f]['center']['length']===-0x8f0+0x624+0x2cf||this['setInvalid'](_0x1b188f,_0x5322bf),_0x5322bf[_0x1b188f]['halfExtent'+'s']&&_0x5322bf[_0x1b188f]['halfExtent'+'s']instanceof Array&&_0x5322bf[_0x1b188f]['halfExtent'+'s']['length']===0x1f92+-0x2187*-0x1+-0x4116||this['setInvalid'](_0x1b188f,_0x5322bf);else{if(_0x22d42f==='cubemap')typeof _0x5322bf[_0x1b188f]=='number'||_0x5322bf[_0x1b188f]===null||_0x5322bf[_0x1b188f]===void(0xa1b+0xe22+-0x183d)||_0x5322bf[_0x1b188f]instanceof _e&&_0x5322bf[_0x1b188f]['cubemap']||this['setInvalid'](_0x1b188f,_0x5322bf);else{if(_0x22d42f==='chunks'){const _0x4915a4=Object['keys'](_0x5322bf[_0x1b188f]);for(let _0x13a285=-0x6*-0x6b+0x206f+-0x22f1;_0x13a285<_0x4915a4['length'];_0x13a285++)typeof _0x5322bf[_0x1b188f][_0x4915a4[_0x13a285]]!='string'&&this['setInvalid'](_0x4915a4[_0x13a285],_0x5322bf[_0x1b188f]);}else console['error']('Unknown\x20ma'+'terial\x20typ'+'e:\x20'+_0x22d42f);}}}}}}}}}}return _0x5322bf['validated']=!(-0x1e2*0x13+-0x267e+0xe*0x54e),this['valid'];}['_createEnu'+'mValidator'](_0x28cbb8){return function(_0x5ecf09){return _0x28cbb8['indexOf'](_0x5ecf09)>=0x7a*0x4+0x24d4+-0x26bc;};}}class gk{constructor(){this['_validator']=null;}['parse'](_0x5e9642){const _0x48d6d6=this['migrate'](_0x5e9642),_0x572f0f=this['_validate'](_0x48d6d6),_0x5cdc7a=new Ut();return this['initialize'](_0x5cdc7a,_0x572f0f),_0x5cdc7a;}['initialize'](_0x379a17,_0x1a6cd0){if(_0x1a6cd0['validated']||(_0x1a6cd0=this['_validate'](_0x1a6cd0)),_0x1a6cd0['chunks']&&_0x1a6cd0['chunks']&&Object['keys'](_0x1a6cd0['chunks'])['length']>-0x1462*0x1+0x2404+-0x7d1*0x2){const _0x288ac7=_0x379a17['shaderChun'+'ks']['glsl'];Object['entries'](_0x1a6cd0['chunks'])['forEach'](([_0x1ee8f2,_0x51422f])=>_0x288ac7['set'](_0x1ee8f2,_0x51422f));}for(const _0x2aa099 in _0x1a6cd0){const _0x1d0061=$n[_0x2aa099],_0x30f70a=_0x1a6cd0[_0x2aa099];if(_0x1d0061==='vec2')_0x379a17[_0x2aa099]=new J(_0x30f70a[-0x1696+-0x5*-0x79f+0x89*-0x1d],_0x30f70a[-0x2625+-0x1*0x232+0xa16*0x4]);else{if(_0x1d0061==='rgb')_0x379a17[_0x2aa099]=new ie(_0x30f70a[-0xc*0xc6+0xe7f+-0x537],_0x30f70a[-0x13a7+-0x23ad+-0x3755*-0x1],_0x30f70a[0xa*-0x1eb+-0x50d*0x7+-0x368b*-0x1]);else{if(_0x1d0061==='texture')_0x30f70a instanceof _e?_0x379a17[_0x2aa099]=_0x30f70a:_0x379a17[_0x2aa099]instanceof _e&&typeof _0x30f70a=='number'&&_0x30f70a>0x189+-0x66+0x3*-0x61||(_0x379a17[_0x2aa099]=null);else{if(_0x1d0061==='cubemap')_0x30f70a instanceof _e?_0x379a17[_0x2aa099]=_0x30f70a:_0x379a17[_0x2aa099]instanceof _e&&typeof _0x30f70a=='number'&&_0x30f70a>-0x9e7+0x17*0x11b+0x2*-0x7c3||(_0x379a17[_0x2aa099]=null),_0x2aa099==='cubeMap'&&!_0x30f70a&&(_0x379a17['prefiltere'+'dCubemaps']=null);else{if(_0x1d0061==='boundingbo'+'x'){const _0x59dbcc=new D(_0x30f70a['center'][0x1d56+-0x1731+0x8f*-0xb],_0x30f70a['center'][0x4*-0x966+0x4f2+-0x20a7*-0x1],_0x30f70a['center'][0x923+0x9e4+0x21d*-0x9]),_0x16869f=new D(_0x30f70a['halfExtent'+'s'][-0x84b+0x1916+-0x10cb],_0x30f70a['halfExtent'+'s'][-0xbc*0x1f+-0x2149+0x380e],_0x30f70a['halfExtent'+'s'][0xa44+-0x377+-0x6cb]);_0x379a17[_0x2aa099]=new De(_0x59dbcc,_0x16869f);}else _0x379a17[_0x2aa099]=_0x1a6cd0[_0x2aa099];}}}}}_0x379a17['update']();}['migrate'](_0x367e6b){_0x367e6b['shader']&&delete _0x367e6b['shader'],_0x367e6b['mapping_fo'+'rmat']&&(_0x367e6b['mappingFor'+'mat']=_0x367e6b['mapping_fo'+'rmat'],delete _0x367e6b['mapping_fo'+'rmat']);let _0x2e1b0d;const _0x3d95e3=[['bumpMapFac'+'tor','bumpiness'],['aoUvSet','aoMapUv'],['aoMapVerte'+'xColor','aoVertexCo'+'lor'],['diffuseMap'+'VertexColo'+'r','diffuseVer'+'texColor'],['emissiveMa'+'pVertexCol'+'or','emissiveVe'+'rtexColor'],['specularMa'+'pVertexCol'+'or','specularVe'+'rtexColor'],['metalnessM'+'apVertexCo'+'lor','metalnessV'+'ertexColor'],['opacityMap'+'VertexColo'+'r','opacityVer'+'texColor'],['glossMapVe'+'rtexColor','glossVerte'+'xColor'],['lightMapVe'+'rtexColor','lightVerte'+'xColor'],['specularMa'+'pTint','specularTi'+'nt'],['metalnessM'+'apTint','metalnessT'+'int'],['clearCoatG'+'lossiness','clearCoatG'+'loss']];for(_0x2e1b0d=-0x111*0xf+-0x5cf*0x3+0x2e*0xba;_0x2e1b0d<_0x3d95e3['length'];_0x2e1b0d++){const _0x15e646=_0x3d95e3[_0x2e1b0d][0x1*-0x10f5+-0x21a5+0x329a],_0x369f5d=_0x3d95e3[_0x2e1b0d][-0xe5d*0x1+-0x94f*0x1+0x17ad];_0x367e6b[_0x15e646]!==void(-0x9f*-0x2+0xa*0x3ad+-0x40*0x98)&&(_0x367e6b[_0x369f5d]===void(-0x9b*0xa+0x22b9+0xb3*-0x29)&&(_0x367e6b[_0x369f5d]=_0x367e6b[_0x15e646]),delete _0x367e6b[_0x15e646]);}const _0x4766c8=['fresnelFac'+'tor','shadowSamp'+'leType'];for(_0x2e1b0d=-0x24b4+-0x5*0x686+0x22a9*0x2;_0x2e1b0d<_0x4766c8['length'];_0x2e1b0d++){const _0x315769=_0x4766c8[_0x2e1b0d];_0x367e6b['hasOwnProp'+'erty'](_0x315769)&&delete _0x367e6b[_0x315769];}return _0x367e6b;}['_validate'](_0xef6343){return _0xef6343['validated']||(this['_validator']||(this['_validator']=new _k()),this['_validator']['validate'](_0xef6343)),_0xef6343;}}const Sk={'aoMap':'white','aoDetailMap':'white','diffuseMap':'gray','diffuseDetailMap':'gray','specularMap':'gray','specularityFactorMap':'white','metalnessMap':'black','glossMap':'gray','sheenMap':'black','sheenGlossMap':'gray','clearCoatMap':'black','clearCoatGlossMap':'gray','clearCoatNormalMap':'normal','refractionMap':'white','emissiveMap':'gray','normalMap':'normal','normalDetailMap':'normal','heightMap':'gray','opacityMap':'gray','sphereMap':'gray','lightMap':'white','thicknessMap':'black','iridescenceMap':'black','iridescenceThicknessMap':'black','envAtlas':'black','anisotropyMap':'black'};class yk extends Qe{constructor(_0x58bd97){super(_0x58bd97,'material'),this['_assets']=_0x58bd97['assets'],this['_device']=_0x58bd97['graphicsDe'+'vice'],this['_parser']=new gk();}['load'](_0x52672d,_0x416182){typeof _0x52672d=='string'&&(_0x52672d={'load':_0x52672d,'original':_0x52672d}),ot['get'](_0x52672d['load'],{'retry':this['maxRetries']>0xd2a*-0x1+0x1642+0x3*-0x308,'maxRetries':this['maxRetries']},(_0x3deb9f,_0x1e596d)=>{_0x3deb9f?_0x416182&&_0x416182('Error\x20load'+'ing\x20materi'+'al:\x20'+_0x52672d['original']+'\x20['+_0x3deb9f+']'):_0x416182&&(_0x1e596d['_engine']=!(0x25dc+0xb21+0x1*-0x30fd),_0x416182(null,_0x1e596d));});}['open'](_0x5487aa,_0x371367){const _0x407bc0=this['_parser']['parse'](_0x371367);return _0x371367['_engine']&&(_0x407bc0['_data']=_0x371367,delete _0x371367['_engine']),_0x407bc0;}['patch'](_0x1cae00,_0x23bae3){_0x1cae00['resource']['_data']&&(_0x1cae00['_data']=_0x1cae00['resource']['_data'],delete _0x1cae00['resource']['_data']),_0x1cae00['data']['name']=_0x1cae00['name'],_0x1cae00['resource']['name']=_0x1cae00['name'],this['_bindAndAs'+'signAssets'](_0x1cae00,_0x23bae3),_0x1cae00['off']('unload',this['_onAssetUn'+'load'],this),_0x1cae00['on']('unload',this['_onAssetUn'+'load'],this);}['_onAssetUn'+'load'](_0x356a21){delete _0x356a21['data']['parameters'],delete _0x356a21['data']['chunks'],delete _0x356a21['data']['name'];}['_assignTex'+'ture'](_0x322cc0,_0x5acc7c,_0x1d2cd3){_0x5acc7c['resource'][_0x322cc0]=_0x1d2cd3;}['_getPlaceh'+'olderTextu'+'re'](_0x2f8227){const _0x22c3d4=Sk[_0x2f8227];return w['assert'](_0x22c3d4,'No\x20placeho'+'lder\x20textu'+'re\x20found\x20f'+'or\x20paramet'+'er:\x20'+_0x2f8227),fa(this['_device'],_0x22c3d4);}['_assignPla'+'ceholderTe'+'xture'](_0x19b853,_0x375d32){_0x375d32['resource'][_0x19b853]=this['_getPlaceh'+'olderTextu'+'re'](_0x19b853);}['_onTexture'+'Load'](_0x8c8d53,_0x593906,_0x23a2b3){this['_assignTex'+'ture'](_0x8c8d53,_0x593906,_0x23a2b3['resource']),_0x593906['resource']['update']();}['_onTexture'+'Add'](_0x3f10fe,_0x44255c,_0x44a559){this['_assets']['load'](_0x44a559);}['_onTexture'+'RemoveOrUn'+'load'](_0x6c0d0c,_0x30353e,_0x4abe85){const _0x5d2664=_0x30353e['resource'];_0x5d2664&&_0x30353e['resource'][_0x6c0d0c]===_0x4abe85['resource']&&(this['_assignPla'+'ceholderTe'+'xture'](_0x6c0d0c,_0x30353e),_0x5d2664['update']());}['_assignCub'+'emap'](_0x15976b,_0x3fcbcf,_0xca4dff){if(_0x3fcbcf['resource'][_0x15976b]=_0xca4dff[0x617*0x2+-0x4*0x2ff+0x32*-0x1],_0x15976b==='cubeMap'){const _0x17aa04=_0xca4dff['slice'](-0x59*0x5c+0x12cd+0xd3*0x10);_0x17aa04['every'](_0x840ef7=>_0x840ef7)?_0x3fcbcf['resource']['prefiltere'+'dCubemaps']=_0x17aa04:_0x17aa04[0x30*-0x81+-0x62f+0x1e5f]&&(_0x3fcbcf['resource']['envAtlas']=_0x17aa04[0x7*0x5b+-0x24f*-0x3+0xa*-0xf1]);}}['_onCubemap'+'Load'](_0x2952cd,_0x297be3,_0xf10b15){this['_assignCub'+'emap'](_0x2952cd,_0x297be3,_0xf10b15['resources']),this['_parser']['initialize'](_0x297be3['resource'],_0x297be3['data']);}['_onCubemap'+'Add'](_0x3af093,_0x119191,_0x3def0b){this['_assets']['load'](_0x3def0b);}['_onCubemap'+'RemoveOrUn'+'load'](_0x2ec8fc,_0x3b330b,_0x22acac){const _0x312104=_0x3b330b['resource'];_0x3b330b['data']['prefiltere'+'dCubeMap12'+'8']===_0x22acac['resources'][-0x1d5*-0x7+0x2*0xce6+-0x134f*0x2]&&(this['_assignCub'+'emap'](_0x2ec8fc,_0x3b330b,[null,null,null,null,null,null,null]),_0x312104['update']());}['_bindAndAs'+'signAssets'](_0x41740b,_0x41f9c6){const _0x3ae94f=this['_parser']['migrate'](_0x41740b['data']),_0x3fbc67=_0x41740b['resource'],_0x1c5b56=_0x3ae94f['mappingFor'+'mat']==='path',_0x10f0a9=Cd;let _0x8f643c,_0x2810b8,_0x32205a;for(_0x8f643c=-0x13cb+0x162f+0x3*-0xcc;_0x8f643c<_0x10f0a9['length'];_0x8f643c++){_0x2810b8=_0x10f0a9[_0x8f643c],_0x32205a=_0x3fbc67['_assetRefe'+'rences'][_0x2810b8];const _0x109602=_0x3ae94f[_0x2810b8],_0x1e5fdc=_0x3fbc67[_0x2810b8],_0x5d802e=_0x1e5fdc===this['_getPlaceh'+'olderTextu'+'re'](_0x2810b8),_0x4cfc8b=_0x3ae94f['validated'];_0x109602&&(!_0x1e5fdc||!_0x4cfc8b||_0x5d802e)?(_0x32205a||(_0x32205a=new gl(_0x2810b8,_0x41740b,_0x41f9c6,{'load':this['_onTexture'+'Load'],'add':this['_onTexture'+'Add'],'remove':this['_onTexture'+'RemoveOrUn'+'load'],'unload':this['_onTexture'+'RemoveOrUn'+'load']},this),_0x3fbc67['_assetRefe'+'rences'][_0x2810b8]=_0x32205a),_0x1c5b56?_0x32205a['url']=_0x41740b['getAbsolut'+'eUrl'](_0x109602):_0x32205a['id']=_0x109602,_0x32205a['asset']&&(_0x32205a['asset']['resource']?this['_assignTex'+'ture'](_0x2810b8,_0x41740b,_0x32205a['asset']['resource']):this['_assignPla'+'ceholderTe'+'xture'](_0x2810b8,_0x41740b),_0x41f9c6['load'](_0x32205a['asset']))):_0x32205a&&(_0x1c5b56?_0x32205a['url']=null:_0x32205a['id']=null);}const _0x46fcb4=fm;for(_0x8f643c=-0x1*-0x19bf+0x1*0x258f+0x1fa7*-0x2;_0x8f643c<_0x46fcb4['length'];_0x8f643c++)_0x2810b8=_0x46fcb4[_0x8f643c],_0x32205a=_0x3fbc67['_assetRefe'+'rences'][_0x2810b8],_0x3ae94f[_0x2810b8]&&!_0x41740b['data']['prefiltere'+'dCubeMap12'+'8']&&(_0x32205a||(_0x32205a=new gl(_0x2810b8,_0x41740b,_0x41f9c6,{'load':this['_onCubemap'+'Load'],'add':this['_onCubemap'+'Add'],'remove':this['_onCubemap'+'RemoveOrUn'+'load'],'unload':this['_onCubemap'+'RemoveOrUn'+'load']},this),_0x3fbc67['_assetRefe'+'rences'][_0x2810b8]=_0x32205a),_0x1c5b56?_0x32205a['url']=_0x3ae94f[_0x2810b8]:_0x32205a['id']=_0x3ae94f[_0x2810b8],_0x32205a['asset']&&(_0x32205a['asset']['loaded']&&this['_assignCub'+'emap'](_0x2810b8,_0x41740b,_0x32205a['asset']['resources']),_0x41f9c6['load'](_0x32205a['asset'])));this['_parser']['initialize'](_0x3fbc67,_0x3ae94f);}}class vk{constructor(_0x18f5ed){this['_device']=_0x18f5ed['device'],this['_defaultMa'+'terial']=_0x18f5ed['defaultMat'+'erial'],this['_assets']=_0x18f5ed['assets'];}['parse'](_0x192345,_0x17549a,_0x29a72d){kh['parse']('filename.g'+'lb','',_0x192345,this['_device'],this['_assets'],(_0x29a72d==null?void(0xe17+0x237f+0x3196*-0x1):_0x29a72d['options'])??{},(_0x481468,_0x666671)=>{if(_0x481468)_0x17549a(_0x481468);else{const _0x44d850=yr['createMode'+'l'](_0x666671,this['_defaultMa'+'terial']);_0x666671['destroy'](),_0x17549a(null,_0x44d850);}});}}const xk={'points':cd,'lines':hd,'lineloop':_y,'linestrip':gy,'triangles':js,'trianglestrip':Er,'trianglefan':oa},Tk={'int8':dd,'uint8':la,'int16':fd,'uint16':Ml,'int32':Ty,'uint32':el,'float32':Ve};class wk{constructor(_0x47884c){this['_device']=_0x47884c['device'],this['_defaultMa'+'terial']=_0x47884c['defaultMat'+'erial'];}['parse'](_0x282785,_0x5c5b95){const _0x78eb81=_0x282785['model'];if(!_0x78eb81){_0x5c5b95(null,null);return;}if(_0x78eb81['version']<=0x16ec+0xd28+-0x2413){_0x5c5b95('JsonModelP'+'arser#pars'+'e:\x20Trying\x20'+'to\x20parse\x20u'+'nsupported'+'\x20model\x20for'+'mat.');return;}const _0x2c8ded=this['_parseNode'+'s'](_0x282785),_0x3ff8af=this['_parseSkin'+'s'](_0x282785,_0x2c8ded),_0x47643f=this['_parseVert'+'exBuffers'](_0x282785),_0x743298=this['_parseInde'+'xBuffers'](_0x282785,_0x47643f),_0xc0f834=this['_parseMorp'+'hs'](_0x282785,_0x2c8ded,_0x47643f),_0x207bc7=this['_parseMesh'+'es'](_0x282785,_0x3ff8af['skins'],_0xc0f834['morphs'],_0x47643f,_0x743298['buffer'],_0x743298['data']),_0x429586=this['_parseMesh'+'Instances'](_0x282785,_0x2c8ded,_0x207bc7,_0x3ff8af['skins'],_0x3ff8af['instances'],_0xc0f834['morphs'],_0xc0f834['instances']),_0x3ef084=new sr();_0x3ef084['graph']=_0x2c8ded[-0x1cba+0x1772+-0x2*-0x2a4],_0x3ef084['meshInstan'+'ces']=_0x429586,_0x3ef084['skinInstan'+'ces']=_0x3ff8af['instances'],_0x3ef084['morphInsta'+'nces']=_0xc0f834['instances'],_0x3ef084['getGraph']()['syncHierar'+'chy'](),_0x5c5b95(null,_0x3ef084);}['_parseNode'+'s'](_0x19fa63){const _0x5aad1f=_0x19fa63['model'],_0x3ef753=[];let _0x5959ee;for(_0x5959ee=0x3*0x12f+-0x2*-0x5c4+-0xf15;_0x5959ee<_0x5aad1f['nodes']['length'];_0x5959ee++){const _0x441028=_0x5aad1f['nodes'][_0x5959ee],_0x215abb=new Ie(_0x441028['name']);_0x215abb['setLocalPo'+'sition'](_0x441028['position'][0x249c+-0x407+-0x1b7*0x13],_0x441028['position'][-0xced+-0x22c4+0x2fb2],_0x441028['position'][0x1c46+-0x244*0x10+0x7fc]),_0x215abb['setLocalEu'+'lerAngles'](_0x441028['rotation'][0x1*-0xb5b+-0x871+-0x7*-0x2d4],_0x441028['rotation'][0x21af*-0x1+0x175*0x7+0x35b*0x7],_0x441028['rotation'][0x1*-0x159+0x1c1+-0x66]),_0x215abb['setLocalSc'+'ale'](_0x441028['scale'][-0x1*0x1843+0xab4*0x2+0x2db],_0x441028['scale'][0x2*-0x409+0x2*0xcf7+-0x11db*0x1],_0x441028['scale'][-0x847*0x3+0x1*-0x25c6+0x3e9d]),_0x215abb['scaleCompe'+'nsation']=!!_0x441028['scaleCompe'+'nsation'],_0x3ef753['push'](_0x215abb);}for(_0x5959ee=-0xc14+0x4e1+-0x4*-0x1cd;_0x5959ee<_0x5aad1f['parents']['length'];_0x5959ee++)_0x3ef753[_0x5aad1f['parents'][_0x5959ee]]['addChild'](_0x3ef753[_0x5959ee]);return _0x3ef753;}['_parseSkin'+'s'](_0x5a3f17,_0x34ab8c){const _0x13ae52=_0x5a3f17['model'],_0x2069b2=[],_0x1e51c9=[];let _0x3f05f5,_0x5ae5ea;for(_0x3f05f5=0x19a2+0x12ce+-0x2c70;_0x3f05f5<_0x13ae52['skins']['length'];_0x3f05f5++){const _0x425d2f=_0x13ae52['skins'][_0x3f05f5],_0x2b4c96=[];for(_0x5ae5ea=-0xae1+-0xc*0x185+0x1d1d;_0x5ae5ea<_0x425d2f['inverseBin'+'dMatrices']['length'];_0x5ae5ea++){const _0x22575c=_0x425d2f['inverseBin'+'dMatrices'][_0x5ae5ea];_0x2b4c96[_0x5ae5ea]=new te()['set'](_0x22575c);}const _0x93a1d=new Lv(this['_device'],_0x2b4c96,_0x425d2f['boneNames']);_0x2069b2['push'](_0x93a1d);const _0x440910=new Ol(_0x93a1d),_0x570e9b=[];for(_0x5ae5ea=-0x79b*0x1+-0x2*-0x80+-0x1*-0x69b;_0x5ae5ea<_0x93a1d['boneNames']['length'];_0x5ae5ea++){const _0xe7c27d=_0x93a1d['boneNames'][_0x5ae5ea],_0x2f5814=_0x34ab8c[-0x7a*0x4c+0x1*-0x1c06+0x403e]['findByName'](_0xe7c27d);_0x570e9b['push'](_0x2f5814);}_0x440910['bones']=_0x570e9b,_0x1e51c9['push'](_0x440910);}return{'skins':_0x2069b2,'instances':_0x1e51c9};}['_getMorphV'+'ertexCount'](_0x494358,_0x8e36fc,_0x3895bf){for(let _0x126c20=0x1212+-0x1031+-0x1e1;_0x126c20<_0x494358['meshes']['length'];_0x126c20++){const _0x27d199=_0x494358['meshes'][_0x126c20];if(_0x27d199['morph']===_0x8e36fc)return _0x3895bf[_0x27d199['vertices']]['numVertice'+'s'];}}['_parseMorp'+'hs'](_0x297287,_0x491c6c,_0x5c9346){const _0x55f2a4=_0x297287['model'],_0x30530c=[],_0x14e813=[];let _0x186262,_0x2fe0df,_0x1114f9,_0x38f519,_0x55d799,_0x383545;if(_0x55f2a4['morphs']){const _0x5262c5=function(_0xb5f071,_0x940418,_0x3f2a91){const _0x4f15f9=new Float32Array(_0x3f2a91*(-0x15*0x199+0x1*-0xd5b+0x2eeb));for(let _0x3611db=-0x2*-0xd88+-0x1eb*-0x7+-0x287d;_0x3611db<_0x940418['length'];_0x3611db++){const _0x4fad05=_0x940418[_0x3611db]*(0x100a*0x1+0x38b+-0x1392);_0x4f15f9[_0x4fad05]=_0xb5f071[_0x3611db*(-0x25b+0x89e+-0x640)],_0x4f15f9[_0x4fad05+(0x2*-0x7e5+0x1*0x911+0x6ba)]=_0xb5f071[_0x3611db*(0x1*0x1795+-0x328+0x192*-0xd)+(-0x1a55+-0x2*-0x11f5+-0x994)],_0x4f15f9[_0x4fad05+(0x1*0x12f9+-0xc*-0x303+-0x371b*0x1)]=_0xb5f071[_0x3611db*(0x115d+-0x5a*0x3b+-0x1*-0x364)+(0x3a9*-0x7+-0xb*-0x283+-0x200)];}return _0x4f15f9;};for(_0x186262=0x10a1*0x1+-0x1bba+0xb19;_0x186262<_0x55f2a4['morphs']['length'];_0x186262++){for(_0x38f519=_0x55f2a4['morphs'][_0x186262]['targets'],_0x383545=[],_0x1114f9=this['_getMorphV'+'ertexCount'](_0x55f2a4,_0x186262,_0x5c9346),_0x2fe0df=0xb90+0x85c+-0x6a4*0x3;_0x2fe0df<_0x38f519['length'];_0x2fe0df++){const _0x5d77dc=_0x38f519[_0x2fe0df]['aabb'],_0x5ae8ee=_0x5d77dc['min'],_0x2b9622=_0x5d77dc['max'],_0x2aec7e=new De(new D((_0x2b9622[0xf6c+0x124*0x22+-0x3634]+_0x5ae8ee[0x86f+0x1d*0x139+0x2*-0x15f2])*(0xb38+0x18d6+0x1*-0x240e+0.5),(_0x2b9622[0xa63*0x1+0x942+0x13a4*-0x1]+_0x5ae8ee[0x137f+-0xb*-0x3b+-0x1607])*(-0x934+-0x2300+0x2c34+0.5),(_0x2b9622[0x711+0x98+0x28d*-0x3]+_0x5ae8ee[-0xc0*0x14+-0x58*0x3e+-0x2*-0x1229])*(0x1*0xb6f+0x7b*-0x13+0x1*-0x24e+0.5)),new D((_0x2b9622[0x11e7+0x1*-0x131e+0x137]-_0x5ae8ee[-0x1*0x1bf6+-0x1c96+0x1c46*0x2])*(0x1947+-0x1352*0x2+0xd5d+0.5),(_0x2b9622[0x1317+0xa*-0x62+-0x3f*0x3e]-_0x5ae8ee[-0x899+-0xbb9+-0x2b*-0x79])*(-0x10c+-0x1d92+0x1e9e+0.5),(_0x2b9622[0x1af+0x1fd*0x11+-0x237a]-_0x5ae8ee[-0xbf*0x11+0x7c6*-0x1+0x1477])*(0x967+-0x8*-0x107+-0x119f+0.5))),_0x5ba10a=_0x38f519[_0x2fe0df]['indices'];let _0x29e807=_0x38f519[_0x2fe0df]['deltaPosit'+'ions'],_0x4d4aec=_0x38f519[_0x2fe0df]['deltaNorma'+'ls'];_0x5ba10a&&(_0x29e807=_0x5262c5(_0x29e807,_0x5ba10a,_0x1114f9),_0x4d4aec=_0x5262c5(_0x4d4aec,_0x5ba10a,_0x1114f9)),_0x55d799=new Md({'deltaPositions':_0x29e807,'deltaNormals':_0x4d4aec,'name':_0x38f519[_0x2fe0df]['name'],'aabb':_0x2aec7e}),_0x383545['push'](_0x55d799);}const _0x388818=new mm(_0x383545,this['_device']);_0x30530c['push'](_0x388818);const _0x5f5338=new xa(_0x388818);_0x14e813['push'](_0x5f5338);}}return{'morphs':_0x30530c,'instances':_0x14e813};}['_parseVert'+'exBuffers'](_0x333139){const _0x35bf5c=_0x333139['model'],_0x772230=[],_0xc4e48d={'position':Me,'normal':gs,'tangent':yi,'blendWeight':gi,'blendIndices':us,'color':Wt,'texCoord0':is,'texCoord1':ba,'texCoord2':wl,'texCoord3':El,'texCoord4':bl,'texCoord5':Al,'texCoord6':Cl,'texCoord7':Pl};for(let _0x233c5b=0x81*0x2+0x1e8*0x5+-0xa8a;_0x233c5b<_0x35bf5c['vertices']['length'];_0x233c5b++){const _0x565282=_0x35bf5c['vertices'][_0x233c5b],_0x568d0f=[];for(const _0x1bdda8 in _0x565282){const _0x3ef0e5=_0x565282[_0x1bdda8];_0x568d0f['push']({'semantic':_0xc4e48d[_0x1bdda8],'components':_0x3ef0e5['components'],'type':Tk[_0x3ef0e5['type']],'normalize':_0xc4e48d[_0x1bdda8]===Wt});}const _0x2afdc0=new kt(this['_device'],_0x568d0f),_0x2e1535=_0x565282['position']['data']['length']/_0x565282['position']['components'],_0x4d2b12=new Is(this['_device'],_0x2afdc0,_0x2e1535),_0x45a910=new Uo(_0x4d2b12);for(let _0x4189d0=-0x228+0x215b+0x31*-0xa3;_0x4189d0<_0x2e1535;_0x4189d0++){for(const _0x32c23c in _0x565282){const _0x1c8063=_0x565282[_0x32c23c];switch(_0x1c8063['components']){case 0x4cf*-0x2+0xf32*-0x1+0x18d1:_0x45a910['element'][_0xc4e48d[_0x32c23c]]['set'](_0x1c8063['data'][_0x4189d0]);break;case 0x3*-0x476+-0x175*-0x7+0x331:_0x45a910['element'][_0xc4e48d[_0x32c23c]]['set'](_0x1c8063['data'][_0x4189d0*(-0x171e+0x1bb4+-0x2*0x24a)],-0x19b*-0x18+0x18d0+0xcab*-0x5-_0x1c8063['data'][_0x4189d0*(0x1*-0x22d5+-0x16d2+0x1fd*0x1d)+(-0x12*0x194+0x4*0x3d9+-0x65*-0x21)]);break;case-0x4*0x84+-0xb26+0xd39:_0x45a910['element'][_0xc4e48d[_0x32c23c]]['set'](_0x1c8063['data'][_0x4189d0*(0x22dd+0x1cca+-0x4*0xfe9)],_0x1c8063['data'][_0x4189d0*(-0x50*-0x12+-0x2*-0xffd+-0x2597)+(-0x6b*-0x59+0x643+-0x2b75*0x1)],_0x1c8063['data'][_0x4189d0*(-0x123a+-0x17b*-0x5+0x49*0x26)+(-0x544+-0x39*-0x2b+0x44d*-0x1)]);break;case 0x6*0x611+0x4d*0x16+-0x2b00:_0x45a910['element'][_0xc4e48d[_0x32c23c]]['set'](_0x1c8063['data'][_0x4189d0*(-0x26e4+0x1c02+0xae6)],_0x1c8063['data'][_0x4189d0*(0x70+-0x7*0x19+0x1*0x43)+(0x12*-0x7f+0x17b*-0x18+-0x1*-0x2c77)],_0x1c8063['data'][_0x4189d0*(0x9d+0x26c3+0x1*-0x275c)+(-0x5be+0x6a4*-0x4+0x2050)],_0x1c8063['data'][_0x4189d0*(0x1e2e*-0x1+0x3*0x7a1+0x74f)+(0x1*0x139f+-0xab*-0x13+-0x204d)]);break;}}_0x45a910['next']();}_0x45a910['end'](),_0x772230['push'](_0x4d2b12);}return _0x772230;}['_parseInde'+'xBuffers'](_0xd62f1,_0x386390){const _0x15f84c=_0xd62f1['model'];let _0xc984c8=null,_0x27fcf8=null,_0x50d062,_0x59c4d4=-0x25*0x4+-0x5e3*-0x4+-0x3*0x7a8;for(_0x50d062=-0x149*0x5+0x2*-0x4f7+0x105b;_0x50d062<_0x15f84c['meshes']['length'];_0x50d062++){const _0x7b9f97=_0x15f84c['meshes'][_0x50d062];_0x7b9f97['indices']!==void(-0x12f5*-0x1+-0x9*-0x2ec+-0x2d41)&&(_0x59c4d4+=_0x7b9f97['indices']['length']);}let _0x3c4448=0xae3+0x17c0+-0x22a3;for(_0x50d062=-0xda*0x7+0x1690+-0x109a;_0x50d062<_0x386390['length'];_0x50d062++)_0x3c4448=Math['max'](_0x3c4448,_0x386390[_0x50d062]['numVertice'+'s']);return _0x59c4d4>0xbe1+-0x13*-0x1a5+-0x2b2*0x10&&(_0x3c4448>-0x7*-0x21b1+0xb622+-0x2*0x50fd?(_0xc984c8=new br(this['_device'],wr,_0x59c4d4),_0x27fcf8=new Uint32Array(_0xc984c8['lock']())):(_0xc984c8=new br(this['_device'],Yi,_0x59c4d4),_0x27fcf8=new Uint16Array(_0xc984c8['lock']()))),{'buffer':_0xc984c8,'data':_0x27fcf8};}['_parseMesh'+'es'](_0xf1a545,_0x4291da,_0x4ea484,_0x106717,_0x2d6454,_0x69734e){const _0x3ac86f=_0xf1a545['model'],_0xc75d2f=[];let _0x5c7c41=-0xcd1+0x62e+-0x6a3*-0x1;for(let _0xc2edda=0x2*-0x110b+-0x1*-0x11c0+-0x52*-0x33;_0xc2edda<_0x3ac86f['meshes']['length'];_0xc2edda++){const _0x2d31b9=_0x3ac86f['meshes'][_0xc2edda],_0x44543=_0x2d31b9['aabb'],_0x14813c=_0x44543['min'],_0x573eb1=_0x44543['max'],_0x178950=new De(new D((_0x573eb1[0x1b1e+-0x223f+0x49*0x19]+_0x14813c[-0x1df7+-0x2070+0x14cd*0x3])*(-0x1*-0x25f6+0xb5*0x1f+-0x3be1+0.5),(_0x573eb1[-0x12fa+-0x1*-0x1cf+-0xe*-0x13a]+_0x14813c[0x5*0x531+-0x224b+0x23*0x3d])*(-0xc80+-0x748*0x1+0x13c8+0.5),(_0x573eb1[0x15bc+0x18aa+0x1*-0x2e64]+_0x14813c[0x1408+-0x1*0x1996+0x590])*(-0x2d3*0x3+0x1*-0x1fd3+0x284c*0x1+0.5)),new D((_0x573eb1[0x2c3*-0x6+0x1838+-0x7a6]-_0x14813c[-0xf06+0xd*-0x2f9+-0x35ab*-0x1])*(0x1c95+0x108+-0x1d9d+0.5),(_0x573eb1[-0x1d96+-0xd13+0x2aaa]-_0x14813c[0x40b+0x1d*-0x80+0xa76])*(0x6d5+0x1*-0x209+-0x133*0x4+0.5),(_0x573eb1[-0x20c5+0x130e+0xdb9]-_0x14813c[-0x582+0xc*-0x2fc+0x844*0x5])*(0xde5+0x20b*-0x4+-0x5b9*0x1+0.5))),_0x2ee584=_0x2d31b9['indices']!==void(0x7*0x39+0x10c7+0x1*-0x1256),_0x8e7bb2=new Ge(this['_device']);_0x8e7bb2['vertexBuff'+'er']=_0x106717[_0x2d31b9['vertices']],_0x8e7bb2['indexBuffe'+'r'][0x9e1+-0x1e3e+0x145d]=_0x2ee584?_0x2d6454:null,_0x8e7bb2['primitive'][-0x6c*-0x51+0x18b4+-0x3ae0]['type']=xk[_0x2d31b9['type']],_0x8e7bb2['primitive'][-0x12b5*0x1+-0x22f+-0x539*-0x4]['base']=_0x2ee584?_0x2d31b9['base']+_0x5c7c41:_0x2d31b9['base'],_0x8e7bb2['primitive'][0x232c*-0x1+-0x21ff+-0x452b*-0x1]['count']=_0x2d31b9['count'],_0x8e7bb2['primitive'][-0x1*0x1055+-0x1285+-0x5cf*-0x6]['indexed']=_0x2ee584,_0x8e7bb2['skin']=_0x2d31b9['skin']!==void(-0x1944+0x1*-0xe95+0x27d9)?_0x4291da[_0x2d31b9['skin']]:null,_0x8e7bb2['morph']=_0x2d31b9['morph']!==void(-0xa*0x189+0x150b*-0x1+0x34f*0xb)?_0x4ea484[_0x2d31b9['morph']]:null,_0x8e7bb2['aabb']=_0x178950,_0x2ee584&&(_0x69734e['set'](_0x2d31b9['indices'],_0x5c7c41),_0x5c7c41+=_0x2d31b9['indices']['length']),_0xc75d2f['push'](_0x8e7bb2);}return _0x2d6454!==null&&_0x2d6454['unlock'](),_0xc75d2f;}['_parseMesh'+'Instances'](_0x3c2067,_0x2dacff,_0x18f3ee,_0x2fe6e4,_0xbd2df6,_0x1522fe,_0x4abf3c){const _0x3f76ef=_0x3c2067['model'],_0x34e6b9=[];let _0x13112c;for(_0x13112c=0xa52*-0x2+0x1*0x18e9+-0x445;_0x13112c<_0x3f76ef['meshInstan'+'ces']['length'];_0x13112c++){const _0x115713=_0x3f76ef['meshInstan'+'ces'][_0x13112c],_0x148ac9=_0x2dacff[_0x115713['node']],_0xe8b9aa=_0x18f3ee[_0x115713['mesh']],_0xc91166=new He(_0xe8b9aa,this['_defaultMa'+'terial'],_0x148ac9);if(_0xe8b9aa['skin']){const _0x49070b=_0x2fe6e4['indexOf'](_0xe8b9aa['skin']);if(_0x49070b===-(-0x1be3+-0xd*0x1c1+0x32b1))throw new Error('Mesh\x27s\x20ski'+'n\x20does\x20not'+'\x20appear\x20in'+'\x20skin\x20arra'+'y.');_0xc91166['skinInstan'+'ce']=_0xbd2df6[_0x49070b];}if(_0xe8b9aa['morph']){const _0x1384cf=_0x1522fe['indexOf'](_0xe8b9aa['morph']);if(_0x1384cf===-(-0x1*-0x8bd+0x4*-0x9a9+0x1de8))throw new Error('Mesh\x27s\x20mor'+'ph\x20does\x20no'+'t\x20appear\x20i'+'n\x20morph\x20ar'+'ray.');_0xc91166['morphInsta'+'nce']=_0x4abf3c[_0x1384cf];}_0x34e6b9['push'](_0xc91166);}return _0x34e6b9;}}class Ek extends Qe{constructor(_0x36c3ac){super(_0x36c3ac,'model'),this['_parsers']=[],this['device']=_0x36c3ac['graphicsDe'+'vice'],this['assets']=_0x36c3ac['assets'],this['defaultMat'+'erial']=Qn(this['device']),this['addParser'](new wk(this),(_0x36d6bf,_0xf4bd20)=>xe['getExtensi'+'on'](_0x36d6bf)==='.json'),this['addParser'](new vk(this),(_0x57a7d3,_0x2bf0bf)=>xe['getExtensi'+'on'](_0x57a7d3)==='.glb');}['load'](_0x215c25,_0x2a8bef,_0x5653a7){typeof _0x215c25=='string'&&(_0x215c25={'load':_0x215c25,'original':_0x215c25});const _0x4c9f7b={'retry':this['maxRetries']>0x2509+-0x1823+0xd*-0xfe,'maxRetries':this['maxRetries']};(_0x215c25['load']['startsWith']('blob:')||_0x215c25['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x215c25['original'])['toLowerCas'+'e']()==='.glb'?_0x4c9f7b['responseTy'+'pe']=Ls['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x4c9f7b['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x215c25['load'],_0x4c9f7b,(_0x340f88,_0x1aa0ea)=>{if(_0x2a8bef){if(_0x340f88)_0x2a8bef('Error\x20load'+'ing\x20model:'+'\x20'+_0x215c25['original']+'\x20['+_0x340f88+']');else{for(let _0x2080e5=0xd7b+-0x897*-0x3+-0x8*0x4e8;_0x2080e5<this['_parsers']['length'];_0x2080e5++){const _0x461ce3=this['_parsers'][_0x2080e5];if(_0x461ce3['decider'](_0x215c25['original'],_0x1aa0ea)){_0x461ce3['parser']['parse'](_0x1aa0ea,(_0x375665,_0x13cd17)=>{_0x375665?_0x2a8bef(_0x375665):_0x2a8bef(null,_0x13cd17);},_0x5653a7);return;}}_0x2a8bef('No\x20parsers'+'\x20found');}}});}['open'](_0x1b8663,_0x5dd5f4){return _0x5dd5f4;}['patch'](_0x314f7f,_0x2bfc58){if(!_0x314f7f['resource'])return;const _0x4c1fd7=_0x314f7f['data'],_0x4a6312=this;_0x314f7f['resource']['meshInstan'+'ces']['forEach']((_0x43f12f,_0x11e652)=>{if(_0x4c1fd7['mapping']){const _0x13efaa=function(_0xd3b5e5){_0xd3b5e5['resource']?_0x43f12f['material']=_0xd3b5e5['resource']:(_0xd3b5e5['once']('load',_0x13efaa),_0x2bfc58['load'](_0xd3b5e5)),_0xd3b5e5['once']('remove',_0xd8dc6=>{_0x43f12f['material']===_0xd8dc6['resource']&&(_0x43f12f['material']=_0x4a6312['defaultMat'+'erial']);});};if(!_0x4c1fd7['mapping'][_0x11e652]){_0x43f12f['material']=_0x4a6312['defaultMat'+'erial'];return;}const _0x8c58d9=_0x4c1fd7['mapping'][_0x11e652]['material'],_0x1e4f27=_0x4c1fd7['mapping'][_0x11e652]['path'];let _0x355442;if(_0x8c58d9!==void(-0x10f6+0xf13+-0x15*-0x17))_0x8c58d9?(_0x355442=_0x2bfc58['get'](_0x8c58d9),_0x355442?_0x13efaa(_0x355442):_0x2bfc58['once']('add:'+_0x8c58d9,_0x13efaa)):_0x43f12f['material']=_0x4a6312['defaultMat'+'erial'];else{if(_0x1e4f27){const _0x97e684=_0x314f7f['getAbsolut'+'eUrl'](_0x4c1fd7['mapping'][_0x11e652]['path']);_0x355442=_0x2bfc58['getByUrl'](_0x97e684),_0x355442?_0x13efaa(_0x355442):_0x2bfc58['once']('add:url:'+_0x97e684,_0x13efaa);}}}});}['addParser'](_0x5606b7,_0x22b53a){this['_parsers']['push']({'parser':_0x5606b7,'decider':_0x22b53a});}}class bk extends Qe{constructor(_0x5e7a5e){super(_0x5e7a5e,'scene');}['load'](_0x59e4f,_0x29c233){E0['load'](_0x59e4f,this['maxRetries'],_0x29c233);}['open'](_0x2055ec,_0x5b7bf9){this['_app']['systems']['script']['preloading']=!(-0x1*-0x10d5+-0x335*-0x3+0x2*-0xd3a);const _0x281a6f=new bm(this['_app'],!(-0x1c59+0x1*-0x79+0x1cd3*0x1))['parse'](_0x5b7bf9),_0x11af8e=this['_app']['scene'];return _0x11af8e['root']=_0x281a6f,this['_app']['applyScene'+'Settings'](_0x5b7bf9['settings']),this['_app']['systems']['script']['preloading']=!(0x1*0x1dce+0x19cd+-0x379a),_0x11af8e;}}const qh=class qh{static['push'](_0x169694){qh['_types']['push'](_0x169694);}};h(qh,'_types',[]);let aa=qh;const Ak=new Set(['system','entity','create','destroy','swap','move','data','scripts','_scripts','_scriptsIn'+'dex','_scriptsDa'+'ta','enabled','_oldState','onEnable','onDisable','onPostStat'+'eChange','_onSetEnab'+'led','_checkStat'+'e','_onBeforeR'+'emove','_onInitial'+'izeAttribu'+'tes','_onInitial'+'ize','_onPostIni'+'tialize','_onUpdate','_onPostUpd'+'ate','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']),Ck={};Sl['reservedNa'+'mes']['forEach']((_0x15a1ec,_0x598baa,_0x48e6a6)=>{Ck[_0x15a1ec]=-0x2ad+0x24d6+-0x2228;});function Pk(_0x1f0d64,_0x555eec,_0x25daca){if(typeof _0x1f0d64!='function')throw new Error('script\x20cla'+'ss:\x20\x27'+_0x1f0d64+('\x27\x20must\x20be\x20'+'a\x20construc'+'tor\x20functi'+'on\x20(i.e.\x20c'+'lass).'));if(!(_0x1f0d64['prototype']instanceof ts))throw new Error('script\x20cla'+'ss:\x20\x27'+Wo['__getScrip'+'tName'](_0x1f0d64)+('\x27\x20does\x20not'+'\x20extend\x20pc'+'.Script.'));if(_0x555eec=_0x555eec||_0x1f0d64['__name']||Wo['__getScrip'+'tName'](_0x1f0d64),Ak['has'](_0x555eec))throw new Error('script\x20nam'+'e:\x20\x27'+_0x555eec+('\x27\x20is\x20reser'+'ved,\x20pleas'+'e\x20change\x20s'+'cript\x20name'));_0x1f0d64['__name']=_0x555eec,Ks['getApplica'+'tion']()['scripts']['add'](_0x1f0d64),aa['push'](_0x1f0d64);}const Mk=_0x19474e=>_0x19474e[-0x1e*-0x65+0x2*-0x455+-0x7*0x74]['toLowerCas'+'e']()+_0x19474e['substring'](0x22b6+-0x29*-0xa+-0x244f);class Dk extends Qe{constructor(_0x14735f){super(_0x14735f,'script'),this['_scripts']={},this['_cache']={};}['clearCache'](){for(const _0x4c86ad in this['_cache']){const _0x1a51cb=this['_cache'][_0x4c86ad],_0x35f747=_0x1a51cb['parentNode'];_0x35f747&&_0x35f747['removeChil'+'d'](_0x1a51cb);}this['_cache']={};}['load'](_0x4037aa,_0x549652){typeof _0x4037aa=='string'&&(_0x4037aa={'load':_0x4037aa,'original':_0x4037aa});const _0x3d0160=this;this['_app'];const _0x109166=(_0x4037aa['load'],(_0x4fcc63,_0xdc303,_0x8e4c61)=>{if(_0x4fcc63)_0x549652(_0x4fcc63);else{const _0x450b9a={};for(let _0x4cdd35=-0xa83*-0x1+0x152*-0x19+-0x1*-0x167f;_0x4cdd35<aa['_types']['length'];_0x4cdd35++)_0x450b9a[aa['_types'][_0x4cdd35]['name']]=aa['_types'][_0x4cdd35];aa['_types']['length']=0x12e0*-0x2+0xfb*-0x9+0x2e93*0x1,_0x549652(null,_0x450b9a,_0x8e4c61);const _0x2515bf=_0xdc303['split']('&hash=')[0x1*-0x9a1+0x2652+0x1*-0x1cb1];delete _0x3d0160['_loader']['_cache'][Cn['makeKey'](_0x2515bf,'script')];}}),[_0x1e4a9f]=_0x4037aa['load']['split']('?');_0x1e4a9f['endsWith']('.mjs')?this['_loadModul'+'e'](_0x1e4a9f,_0x109166):this['_loadScrip'+'t'](_0x4037aa['load'],_0x109166);}['open'](_0x100d0b,_0x242cf7){return _0x242cf7;}['patch'](_0x55f847,_0x1361ca){}['_loadScrip'+'t'](_0x2d8993,_0x2146f2){const _0x4e2d35=document['head'],_0x4ba170=document['createElem'+'ent']('script');this['_cache'][_0x2d8993]=_0x4ba170,_0x4ba170['async']=!(-0x17a*0xb+-0xa3*0x2e+0x2d89),_0x4ba170['addEventLi'+'stener']('error',_0x3471f0=>{_0x2146f2('Script:\x20'+_0x3471f0['target']['src']+('\x20failed\x20to'+'\x20load'));},!(0x7*-0x20b+0xf8d+-0x13f));let _0x5b5adf=!(-0x1327+0x10e6+0x2*0x121);_0x4ba170['onload']=_0x4ba170['onreadysta'+'techange']=function(){!_0x5b5adf&&(!this['readyState']||this['readyState']==='loaded'||this['readyState']==='complete')&&(_0x5b5adf=!(0x1db7*-0x1+-0x1*0x67+0x101*0x1e),_0x2146f2(null,_0x2d8993,_0x4ba170));},_0x4ba170['src']=_0x2d8993,_0x4e2d35['appendChil'+'d'](_0x4ba170);}['_loadModul'+'e'](_0x126eb4,_0x5054bb){const _0x2f0bf9=Ae['browser']&&window['location']['origin']!=='null'?window['location']['origin']+window['location']['pathname']:import.meta['url'],_0x194457=new URL(_0x126eb4,_0x2f0bf9);import(_0x194457['toString']())['then'](_0x46530f=>{var _0x4ca98a,_0x4a8f72;const _0x2ec663=_0x194457['pathname']['split']('/')['pop'](),_0x181b6b=(_0x4a8f72=(_0x4ca98a=this['_app']['assets']['find'](_0x2ec663,'script'))==null?void(-0x1707+0x1a49+-0x1*0x342):_0x4ca98a['data'])==null?void(0x2d3*0x7+0x13d*0x7+-0x1c70):_0x4a8f72['scripts'];for(const _0x38f47b in _0x46530f){const _0x26cc18=_0x46530f[_0x38f47b];if(_0x26cc18['prototype']instanceof ts){const _0x2380f5=Mk(_0x26cc18['name']);_0x26cc18['scriptName']||w['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x26cc18['name']+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x26cc18['name']+('.scriptNam'+'e\x20=\x20\x22')+_0x2380f5+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.'));const _0x436016=_0x26cc18['scriptName']??_0x2380f5;Pk(_0x26cc18,_0x436016),_0x181b6b&&this['_app']['scripts']['addSchema'](_0x436016,_0x181b6b[_0x436016]);}}_0x5054bb(null,_0x126eb4,null);})['catch'](_0x157d54=>{_0x5054bb(_0x157d54);});}}class Ik extends Qe{constructor(_0x365e8f){super(_0x365e8f,'shader'),h(this,'decoder',null);}['load'](_0x328439,_0x37912e){typeof _0x328439=='string'&&(_0x328439={'load':_0x328439,'original':_0x328439}),ot['get'](_0x328439['load'],{'retry':this['maxRetries']>0x2d4+-0x1*0x155+-0x17f,'maxRetries':this['maxRetries']},(_0x1b6295,_0x2f6cce)=>{_0x1b6295?_0x37912e('Error\x20load'+'ing\x20shader'+'\x20resource:'+'\x20'+_0x328439['original']+'\x20['+_0x1b6295+']'):_0x37912e(null,_0x2f6cce);});}['openBinary'](_0x5d7bec){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x5d7bec);}}function Pf(_0x1ab7c9){const _0xc0d9ef=this;_0xc0d9ef['resource']&&(_0xc0d9ef['resource']['atlas']=_0x1ab7c9['resource']);}function Mf(_0x41e97a){this['registry']['load'](_0x41e97a);}class Lk extends Qe{constructor(_0x336330){super(_0x336330,'sprite'),this['_assets']=_0x336330['assets'],this['_device']=_0x336330['graphicsDe'+'vice'];}['load'](_0x3c3a7b,_0x43b5d4){typeof _0x3c3a7b=='string'&&(_0x3c3a7b={'load':_0x3c3a7b,'original':_0x3c3a7b}),xe['getExtensi'+'on'](_0x3c3a7b['original'])==='.json'&&ot['get'](_0x3c3a7b['load'],{'retry':this['maxRetries']>0x24f0+-0x427*-0x2+-0x2d3e,'maxRetries':this['maxRetries']},(_0x27a137,_0x22dfbb)=>{_0x27a137?_0x43b5d4(_0x27a137):_0x43b5d4(null,_0x22dfbb);});}['open'](_0x22603f,_0x3d19c7){const _0x342022=new BA(this['_device']);return _0x22603f&&(_0x342022['__data']=_0x3d19c7),_0x342022;}['patch'](_0x4690c8,_0x4a4946){const _0x4a1122=_0x4690c8['resource'];if(_0x4a1122['__data']&&(_0x4690c8['data']['pixelsPerU'+'nit']=_0x4a1122['__data']['pixelsPerU'+'nit'],_0x4690c8['data']['renderMode']=_0x4a1122['__data']['renderMode'],_0x4690c8['data']['frameKeys']=_0x4a1122['__data']['frameKeys'],_0x4a1122['__data']['textureAtl'+'asAsset'])){const _0x3d0460=_0x4a4946['getByUrl'](_0x4a1122['__data']['textureAtl'+'asAsset']);_0x3d0460?_0x4690c8['data']['textureAtl'+'asAsset']=_0x3d0460['id']:console['warn']('Could\x20not\x20'+'find\x20textu'+'reatlas\x20wi'+'th\x20url:\x20'+_0x4a1122['__data']['textureAtl'+'asAsset']);}_0x4a1122['startUpdat'+'e'](),_0x4a1122['renderMode']=_0x4690c8['data']['renderMode'],_0x4a1122['pixelsPerU'+'nit']=_0x4690c8['data']['pixelsPerU'+'nit'],_0x4a1122['frameKeys']=_0x4690c8['data']['frameKeys'],this['_updateAtl'+'as'](_0x4690c8),_0x4a1122['endUpdate'](),_0x4690c8['off']('change',this['_onAssetCh'+'ange'],this),_0x4690c8['on']('change',this['_onAssetCh'+'ange'],this);}['_updateAtl'+'as'](_0x2f1457){const _0x20b878=_0x2f1457['resource'];if(!_0x2f1457['data']['textureAtl'+'asAsset']){_0x20b878['atlas']=null;return;}this['_assets']['off']('load:'+_0x2f1457['data']['textureAtl'+'asAsset'],Pf,_0x2f1457),this['_assets']['on']('load:'+_0x2f1457['data']['textureAtl'+'asAsset'],Pf,_0x2f1457);const _0x314d72=this['_assets']['get'](_0x2f1457['data']['textureAtl'+'asAsset']);_0x314d72&&_0x314d72['resource']?_0x20b878['atlas']=_0x314d72['resource']:_0x314d72?this['_assets']['load'](_0x314d72):(this['_assets']['off']('add:'+_0x2f1457['data']['textureAtl'+'asAsset'],Mf,_0x2f1457),this['_assets']['on']('add:'+_0x2f1457['data']['textureAtl'+'asAsset'],Mf,_0x2f1457));}['_onAssetCh'+'ange'](_0x593823,_0x521697,_0x303a8a,_0x318157){_0x521697==='data'&&_0x303a8a&&_0x303a8a['textureAtl'+'asAsset']&&_0x318157&&_0x303a8a['textureAtl'+'asAsset']!==_0x318157['textureAtl'+'asAsset']&&(this['_assets']['off']('load:'+_0x318157['textureAtl'+'asAsset'],Pf,_0x593823),this['_assets']['off']('add:'+_0x318157['textureAtl'+'asAsset'],Mf,_0x593823));}}class vS{constructor(_0x3186a4,_0x5c7c16){h(this,'_app'),h(this,'_data'),h(this,'_templateR'+'oot',null),(this['_app']=_0x3186a4,this['_data']=_0x5c7c16);}['instantiat'+'e'](){return this['_templateR'+'oot']||this['_parseTemp'+'late'](),this['_templateR'+'oot']['clone']();}['_parseTemp'+'late'](){const _0x8ad2db=new bm(this['_app'],!(0x7*-0x23e+0xe2a+0x1c*0xe));this['_templateR'+'oot']=_0x8ad2db['parse'](this['_data']);}}class Rk extends Qe{constructor(_0x1f88bf){super(_0x1f88bf,'template'),h(this,'decoder',null);}['load'](_0x18f22c,_0x4383c3){typeof _0x18f22c=='string'&&(_0x18f22c={'load':_0x18f22c,'original':_0x18f22c});const _0x5d891a={'retry':this['maxRetries']>0x1888+0x400+-0xe44*0x2,'maxRetries':this['maxRetries']};ot['get'](_0x18f22c['load'],_0x5d891a,(_0x5f35e8,_0x5dc09b)=>{_0x5f35e8?_0x4383c3('Error\x20requ'+'esting\x20tem'+'plate:\x20'+_0x18f22c['original']):_0x4383c3(_0x5f35e8,_0x5dc09b);});}['open'](_0x1232fb,_0x30e9b7){return new vS(this['_app'],_0x30e9b7);}['openBinary'](_0x2e56d1){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),new vS(this['_app'],JSON['parse'](this['decoder']['decode'](_0x2e56d1)));}}class Ok extends Qe{constructor(_0x9a328c){super(_0x9a328c,'text'),h(this,'decoder',null);}['load'](_0x2ccb78,_0x2dc4a6){typeof _0x2ccb78=='string'&&(_0x2ccb78={'load':_0x2ccb78,'original':_0x2ccb78}),ot['get'](_0x2ccb78['load'],{'retry':this['maxRetries']>-0x709*0x1+0x5b4+0x155,'maxRetries':this['maxRetries']},(_0x14a487,_0x4c8864)=>{_0x14a487?_0x2dc4a6('Error\x20load'+'ing\x20text\x20r'+'esource:\x20'+_0x2ccb78['original']+'\x20['+_0x14a487+']'):_0x2dc4a6(null,_0x4c8864);});}['openBinary'](_0x3b1be4){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x3b1be4);}}const Ic={'repeat':yt,'clamp':ue,'mirror':ip},Lc={'nearest':Te,'linear':vt,'nearest_mip_nearest':Kh,'linear_mip_nearest':Qh,'nearest_mip_linear':Zh,'linear_mip_linear':ma},Fk=/^data\.frames\.(\d+)$/;class Nk extends Qe{constructor(_0x312015){super(_0x312015,'textureatl'+'as'),this['_loader']=_0x312015['loader'];}['load'](_0x3db666,_0x53a68b){typeof _0x3db666=='string'&&(_0x3db666={'load':_0x3db666,'original':_0x3db666});const _0x19fa90=this,_0x24ae89=this['_loader']['getHandler']('texture');xe['getExtensi'+'on'](_0x3db666['original'])==='.json'?ot['get'](_0x3db666['load'],{'retry':this['maxRetries']>-0xe21+0x29*0xd3+-0x13aa*0x1,'maxRetries':this['maxRetries']},(_0x209961,_0x36be29)=>{if(_0x209961)_0x53a68b(_0x209961);else{const _0x2397a2=_0x3db666['original']['replace']('.json','.png');_0x19fa90['_loader']['load'](_0x2397a2,'texture',(_0x482bf6,_0x446740)=>{_0x482bf6?_0x53a68b(_0x482bf6):_0x53a68b(null,{'data':_0x36be29,'texture':_0x446740});});}}):_0x24ae89['load'](_0x3db666,_0x53a68b);}['open'](_0x401456,_0x50a2a1,_0x4349c1){const _0x3310f4=new zA();if(_0x50a2a1['texture']&&_0x50a2a1['data'])_0x3310f4['texture']=_0x50a2a1['texture'],_0x3310f4['__data']=_0x50a2a1['data'];else{const _0x406036=this['_loader']['getHandler']('texture')['open'](_0x401456,_0x50a2a1,_0x4349c1);if(!_0x406036)return null;_0x3310f4['texture']=_0x406036;}return _0x3310f4;}['patch'](_0x38b0cb,_0x70264e){if(!_0x38b0cb['resource'])return;_0x38b0cb['resource']['__data']&&(_0x38b0cb['resource']['__data']['minfilter']!==void(0x1db7*-0x1+0x9d3*-0x3+-0x3b3*-0x10)&&(_0x38b0cb['data']['minfilter']=_0x38b0cb['resource']['__data']['minfilter']),_0x38b0cb['resource']['__data']['magfilter']!==void(0x2*0x10ed+-0x1*-0x2390+-0x1*0x456a)&&(_0x38b0cb['data']['magfilter']=_0x38b0cb['resource']['__data']['magfilter']),_0x38b0cb['resource']['__data']['addressu']!==void(-0x1*-0x1729+-0x3*0x289+0xb*-0x16a)&&(_0x38b0cb['data']['addressu']=_0x38b0cb['resource']['__data']['addressu']),_0x38b0cb['resource']['__data']['addressv']!==void(-0xf39+0x2514+-0x15db)&&(_0x38b0cb['data']['addressv']=_0x38b0cb['resource']['__data']['addressv']),_0x38b0cb['resource']['__data']['mipmaps']!==void(0x12a*-0xc+0x9a4*-0x1+-0x179c*-0x1)&&(_0x38b0cb['data']['mipmaps']=_0x38b0cb['resource']['__data']['mipmaps']),_0x38b0cb['resource']['__data']['anisotropy']!==void(-0x733+0x15b+-0x22*-0x2c)&&(_0x38b0cb['data']['anisotropy']=_0x38b0cb['resource']['__data']['anisotropy']),_0x38b0cb['resource']['__data']['rgbm']!==void(-0x313*0x1+-0x1*-0x101e+-0xd0b)&&(_0x38b0cb['data']['rgbm']=!!_0x38b0cb['resource']['__data']['rgbm']),_0x38b0cb['data']['frames']=_0x38b0cb['resource']['__data']['frames'],delete _0x38b0cb['resource']['__data']);const _0x44530a=_0x38b0cb['resource']['texture'];if(_0x44530a&&(_0x44530a['name']=_0x38b0cb['name'],_0x38b0cb['data']['hasOwnProp'+'erty']('minfilter')&&_0x44530a['minFilter']!==Lc[_0x38b0cb['data']['minfilter']]&&(_0x44530a['minFilter']=Lc[_0x38b0cb['data']['minfilter']]),_0x38b0cb['data']['hasOwnProp'+'erty']('magfilter')&&_0x44530a['magFilter']!==Lc[_0x38b0cb['data']['magfilter']]&&(_0x44530a['magFilter']=Lc[_0x38b0cb['data']['magfilter']]),_0x38b0cb['data']['hasOwnProp'+'erty']('addressu')&&_0x44530a['addressU']!==Ic[_0x38b0cb['data']['addressu']]&&(_0x44530a['addressU']=Ic[_0x38b0cb['data']['addressu']]),_0x38b0cb['data']['hasOwnProp'+'erty']('addressv')&&_0x44530a['addressV']!==Ic[_0x38b0cb['data']['addressv']]&&(_0x44530a['addressV']=Ic[_0x38b0cb['data']['addressv']]),_0x38b0cb['data']['hasOwnProp'+'erty']('mipmaps')&&_0x44530a['mipmaps']!==_0x38b0cb['data']['mipmaps']&&(_0x44530a['mipmaps']=_0x38b0cb['data']['mipmaps']),_0x38b0cb['data']['hasOwnProp'+'erty']('anisotropy')&&_0x44530a['anisotropy']!==_0x38b0cb['data']['anisotropy']&&(_0x44530a['anisotropy']=_0x38b0cb['data']['anisotropy']),_0x38b0cb['data']['hasOwnProp'+'erty']('rgbm'))){const _0x1ec682=_0x38b0cb['data']['rgbm']?Zi:Ds;_0x44530a['type']!==_0x1ec682&&(_0x44530a['type']=_0x1ec682);}_0x38b0cb['resource']['texture']=_0x44530a;const _0x926cc3={};for(const _0x1b9700 in _0x38b0cb['data']['frames']){const _0x64c8fc=_0x38b0cb['data']['frames'][_0x1b9700];_0x926cc3[_0x1b9700]={'rect':new re(_0x64c8fc['rect']),'pivot':new J(_0x64c8fc['pivot']),'border':new re(_0x64c8fc['border'])};}_0x38b0cb['resource']['frames']=_0x926cc3,_0x38b0cb['off']('change',this['_onAssetCh'+'ange'],this),_0x38b0cb['on']('change',this['_onAssetCh'+'ange'],this);}['_onAssetCh'+'ange'](_0x2d659f,_0x1dff37,_0x1a1dcb){let _0x1821e1;if(_0x1dff37==='data'||_0x1dff37==='data.frame'+'s'){const _0x32988b={};for(const _0x2cd691 in _0x1a1dcb['frames'])_0x1821e1=_0x1a1dcb['frames'][_0x2cd691],_0x32988b[_0x2cd691]={'rect':new re(_0x1821e1['rect']),'pivot':new J(_0x1821e1['pivot']),'border':new re(_0x1821e1['border'])};_0x2d659f['resource']['frames']=_0x32988b;}else{const _0x1f3a85=_0x1dff37['match'](Fk);if(_0x1f3a85){const _0x1429c2=_0x1f3a85[0x1*-0x241a+-0x9*0x97+0x5d*0x72];_0x1a1dcb?(_0x2d659f['resource']['frames'][_0x1429c2]?(_0x1821e1=_0x2d659f['resource']['frames'][_0x1429c2],_0x1821e1['rect']['set'](_0x1a1dcb['rect'][0x2a7*-0x3+-0x17*0x13a+0x242b],_0x1a1dcb['rect'][0x24ff+0x18bf+-0x3dbd],_0x1a1dcb['rect'][-0x16*0xff+-0x229*-0xa+-0x1*-0x52],_0x1a1dcb['rect'][-0x2*0x1065+0xb*0x35+0x1e86]),_0x1821e1['pivot']['set'](_0x1a1dcb['pivot'][0x22a+0x1*0x1a0f+-0x1c39],_0x1a1dcb['pivot'][-0x23*0xc3+-0xab9+0x2563]),_0x1821e1['border']['set'](_0x1a1dcb['border'][0xaab*0x2+-0x1*0x1f1c+0x9c6],_0x1a1dcb['border'][0x1*-0x2263+0x7*0x151+-0x192d*-0x1],_0x1a1dcb['border'][0x52c+0xea*-0x1a+0x129a],_0x1a1dcb['border'][-0x1*0x113d+-0xa51*-0x1+0x1*0x6ef])):_0x2d659f['resource']['frames'][_0x1429c2]={'rect':new re(_0x1a1dcb['rect']),'pivot':new J(_0x1a1dcb['pivot']),'border':new re(_0x1a1dcb['border'])},_0x2d659f['resource']['fire']('set:frame',_0x1429c2,_0x2d659f['resource']['frames'][_0x1429c2])):_0x2d659f['resource']['frames'][_0x1429c2]&&(delete _0x2d659f['resource']['frames'][_0x1429c2],_0x2d659f['resource']['fire']('remove:fra'+'me',_0x1429c2));}}}}function kk(){const _0x29e90d={'cTFETC1':0x0,'cTFETC2':0x1,'cTFBC1':0x2,'cTFBC3':0x3,'cTFPVRTC1_4_RGB':0x8,'cTFPVRTC1_4_RGBA':0x9,'cTFASTC_4x4':0xa,'cTFATC_RGB':0xb,'cTFATC_RGBA_INTERPOLATED_ALPHA':0xc,'cTFRGBA32':0xd,'cTFRGB565':0xe,'cTFRGBA4444':0x10},_0x2ed4d8={'astc':_0x29e90d['cTFASTC_4x'+'4'],'dxt':_0x29e90d['cTFBC1'],'etc1':_0x29e90d['cTFETC1'],'etc2':_0x29e90d['cTFETC1'],'pvr':_0x29e90d['cTFPVRTC1_'+'4_RGB'],'atc':_0x29e90d['cTFATC_RGB'],'none':_0x29e90d['cTFRGB565']},_0x135f86={'astc':_0x29e90d['cTFASTC_4x'+'4'],'dxt':_0x29e90d['cTFBC3'],'etc1':_0x29e90d['cTFRGBA444'+'4'],'etc2':_0x29e90d['cTFETC2'],'pvr':_0x29e90d['cTFPVRTC1_'+'4_RGBA'],'atc':_0x29e90d['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA'],'none':_0x29e90d['cTFRGBA444'+'4']},_0x1dc93f={'ETC1':0x15,'ETC2_RGB':0x16,'ETC2_RGBA':0x17,'DXT1':0x8,'DXT5':0xa,'PVRTC_4BPP_RGB_1':0x1a,'PVRTC_4BPP_RGBA_1':0x1b,'ASTC_4x4':0x1c,'ATC_RGB':0x1d,'ATC_RGBA':0x1e,'R8_G8_B8_A8':0x7,'R5_G6_B5':0x3,'R4_G4_B4_A4':0x5},_0x1bbd5f=(_0x2200ba,_0x38454b)=>{switch(_0x2200ba){case _0x29e90d['cTFETC1']:return _0x38454b['formats']['etc2']?_0x1dc93f['ETC2_RGB']:_0x1dc93f['ETC1'];case _0x29e90d['cTFETC2']:return _0x1dc93f['ETC2_RGBA'];case _0x29e90d['cTFBC1']:return _0x1dc93f['DXT1'];case _0x29e90d['cTFBC3']:return _0x1dc93f['DXT5'];case _0x29e90d['cTFPVRTC1_'+'4_RGB']:return _0x1dc93f['PVRTC_4BPP'+'_RGB_1'];case _0x29e90d['cTFPVRTC1_'+'4_RGBA']:return _0x1dc93f['PVRTC_4BPP'+'_RGBA_1'];case _0x29e90d['cTFASTC_4x'+'4']:return _0x1dc93f['ASTC_4x4'];case _0x29e90d['cTFATC_RGB']:return _0x1dc93f['ATC_RGB'];case _0x29e90d['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return _0x1dc93f['ATC_RGBA'];case _0x29e90d['cTFRGBA32']:return _0x1dc93f['R8_G8_B8_A'+'8'];case _0x29e90d['cTFRGB565']:return _0x1dc93f['R5_G6_B5'];case _0x29e90d['cTFRGBA444'+'4']:return _0x1dc93f['R4_G4_B4_A'+'4'];}},_0x32c94b=_0x1a0300=>{const _0x43a801=function(_0x43d101,_0x2f3e79){const _0x4cced1=_0x43d101*(-0x1ed1*-0x1+-0x1b6+-0x1d1b*0x1+0.00784313725490196)-(0x1*-0x2333+0x7f9+0x1b3b),_0x267017=_0x2f3e79*((0x1cf*-0xd+0x5f*0x25+-0x4e5*-0x2)/(-0xfd1+0xe60+-0xd*-0x30))-(0xc71+0x51d+0x118d*-0x1),_0x1ad43a=Math['sqrt'](-0x6c6+0x69+0x65e-Math['min'](-0x2537+0x175e+0x6*0x24f,_0x4cced1*_0x4cced1+_0x267017*_0x267017));return Math['max'](-0x1*0x21c1+0x2569+-0x3a8,Math['min'](-0x653+0x50b*0x4+-0xcda,Math['floor']((_0x1ad43a+(0x1*0x3fa+0x582+-0x97b))*(-0xc05+0x21*-0x87+0x2*0xeb6+0.5)*(-0x68b*0x1+-0x135*-0x5+-0x1*-0x181))));};for(let _0x2d4998=-0x48*0x57+-0x1afd+-0x3*-0x1127;_0x2d4998<_0x1a0300['length'];_0x2d4998+=0x1d02+0x1607+0x25*-0x161){const _0x465b7f=_0x1a0300[_0x2d4998+(-0x3e1*0x5+0xa1d+0x319*0x3)],_0x49d5fc=_0x1a0300[_0x2d4998+(0x12b0+0x1*-0x1517+0x1c*0x16)];_0x1a0300[_0x2d4998+(0x2a3+-0xd62+0xabf)]=_0x465b7f,_0x1a0300[_0x2d4998+(-0xd9e+-0x1190+-0x7cc*-0x4)]=_0x43a801(_0x465b7f,_0x49d5fc),_0x1a0300[_0x2d4998+(-0x1411+-0x171f+0x2b33)]=-0x23f7+-0x102b*0x2+0x2*0x22a6;}return _0x1a0300;},_0x295525=_0x324838=>{const _0x5b38d2=new Uint16Array(_0x324838['length']/(-0x1e4*0xd+-0x16a7+0x2f3f));for(let _0x28187e=-0x1362+0x202b+-0xcc9;_0x28187e<_0x324838['length'];_0x28187e+=-0x40*0x83+-0x4c9+0x258d){const _0x5d9de3=_0x324838[_0x28187e+(-0xd*-0x2ce+0x19a4+-0x3e1a)],_0x462054=_0x324838[_0x28187e+(-0x113*-0x1d+0x183f+-0x3765)],_0x34f7cc=_0x324838[_0x28187e+(0x1c10+0x36b+0x1f79*-0x1)];_0x5b38d2[_0x28187e/(0x9b8*-0x1+-0x193d+0x22f9)]=(_0x5d9de3&-0x4*-0x1eb+-0x1e7e+0x3f7*0x6)<<-0x1*0x1dde+-0x79b+-0x2581*-0x1|(_0x462054&-0x3*0xb11+0x1436+0x7*0x1ff)<<0x2635+0x7bf+-0x1*0x2df1|_0x34f7cc>>-0x188e+0x1179+0x718;}return _0x5b38d2;},_0x5b28e4=(_0x583a12,_0x55173c)=>(_0x583a12&_0x583a12-(-0x4fb*0x1+0x17f4+-0x12f8))===-0x2*0x199+0x560*-0x6+0x2372&&(_0x55173c&_0x55173c-(0x1*0x90d+0x1a*-0x12e+-0x4*-0x568))===0x3fb*0x5+-0x17*-0x17d+-0x3622,_0x1cac96=()=>typeof performance<'u'?performance['now']():0x81*-0x16+0x17f4+0x16e*-0x9;let _0x45f1ba,_0x53419a,_0x2ba7c9;const _0x143e64=(_0x202814,_0x4c55f6,_0x3403db)=>{if(_0x3403db){if(_0x202814['formats']['astc'])return'astc';}else{if(_0x4c55f6){if(_0x202814['formats']['etc2'])return'etc2';}else{if(_0x202814['formats']['etc2'])return'etc2';if(_0x202814['formats']['etc1'])return'etc1';}}return(_0x586fce=>{for(let _0x7ceb7e=-0x261f*-0x1+-0x1*-0x20a2+0x46c1*-0x1;_0x7ceb7e<_0x586fce['length'];++_0x7ceb7e){const _0x1c5057=_0x586fce[_0x7ceb7e];if(_0x202814['formats'][_0x1c5057])return _0x1c5057;}return'none';})(_0x4c55f6?_0x2ba7c9:_0x53419a);},_0x51337c=(_0x2b1a2a,_0x3db1d8,_0x228b3c)=>{switch(_0x228b3c){case _0x29e90d['cTFETC1']:case _0x29e90d['cTFETC2']:return!(0x868+-0x4eb+-0x37d);case _0x29e90d['cTFBC1']:case _0x29e90d['cTFBC3']:return(_0x2b1a2a&-0x1d93+0x1ce8+0xae*0x1)===-0x243d*-0x1+0x229e+-0x46db&&(_0x3db1d8&0xdd2+0x20c*-0xf+0x10e5)===0x25c1+0x1*0x1c24+-0x15f7*0x3;case _0x29e90d['cTFPVRTC1_'+'4_RGB']:case _0x29e90d['cTFPVRTC1_'+'4_RGBA']:return _0x5b28e4(_0x2b1a2a,_0x3db1d8);case _0x29e90d['cTFASTC_4x'+'4']:return!(-0x18ab+0x1485+-0x76*-0x9);case _0x29e90d['cTFATC_RGB']:case _0x29e90d['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return!(-0x4*0x5d5+0x1c26+-0x1*0x4d2);}return!(-0x2684+-0x19b*-0x3+0x2*0x10da);},_0x3086c2=(_0x399197,_0xb0e2ca,_0x2a7501)=>{if(!_0x45f1ba['KTX2File'])throw new Error('Basis\x20tran'+'scoder\x20mod'+'ule\x20does\x20n'+'ot\x20include'+'\x20support\x20f'+'or\x20KTX2.');const _0x29579d=_0x1cac96(),_0x4f00dc=new _0x45f1ba['KTX2File'](new Uint8Array(_0xb0e2ca)),_0x565291=_0x4f00dc['getWidth'](),_0x43cf16=_0x4f00dc['getHeight'](),_0x2c83a5=_0x4f00dc['getLevels'](),_0x4009ab=!!_0x4f00dc['getHasAlph'+'a'](),_0x9ca81=_0x4f00dc['isUASTC']&&_0x4f00dc['isUASTC']();if(!_0x565291||!_0x43cf16||!_0x2c83a5)throw _0x4f00dc['close'](),_0x4f00dc['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x399197+'\x20width='+_0x565291+'\x20height='+_0x43cf16+'\x20levels='+_0x2c83a5);const _0x578274=_0x143e64(_0x2a7501['deviceDeta'+'ils'],_0x4009ab,_0x9ca81),_0x2157ca=!!_0x2a7501['isGGGR']&&_0x578274==='pvr';let _0x15cf5b;if(_0x2157ca?_0x15cf5b=_0x29e90d['cTFRGBA32']:(_0x15cf5b=_0x4009ab?_0x135f86[_0x578274]:_0x2ed4d8[_0x578274],_0x51337c(_0x565291,_0x43cf16,_0x15cf5b)||(_0x15cf5b=_0x4009ab?_0x29e90d['cTFRGBA32']:_0x29e90d['cTFRGB565'])),!_0x4f00dc['startTrans'+'coding']())throw _0x4f00dc['close'](),_0x4f00dc['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x399197);let _0x55a041;const _0x6a23db=[];for(let _0x3fcef0=0x256b+-0x1f1*-0xd+-0x4*0xfaa;_0x3fcef0<_0x2c83a5;++_0x3fcef0){const _0x3c8b26=_0x4f00dc['getImageTr'+'anscodedSi'+'zeInBytes'](_0x3fcef0,-0x2*0x503+-0x1e31*-0x1+-0x1*0x142b,0x115e+0x1ca6+0x2e04*-0x1,_0x15cf5b),_0x40ecc2=new Uint8Array(_0x3c8b26);if(!_0x4f00dc['transcodeI'+'mage'](_0x40ecc2,_0x3fcef0,-0xa03*-0x1+-0x511*-0x4+-0x1e47,0xa16+0x1*0x756+-0x116c,_0x15cf5b,-0xfaf+-0x2*0x400+-0x2f*-0x81,-(-0x2663+0x12fd+0x1367),-(0x1a89+-0x2189+0xb*0xa3)))throw _0x4f00dc['close'](),_0x4f00dc['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x399197);const _0x3cd3b9=_0x15cf5b===_0x29e90d['cTFRGB565']||_0x15cf5b===_0x29e90d['cTFRGBA444'+'4'];_0x6a23db['push'](_0x3cd3b9?new Uint16Array(_0x40ecc2['buffer']):_0x40ecc2);}if(_0x4f00dc['close'](),_0x4f00dc['delete'](),_0x2157ca){for(_0x15cf5b=_0x29e90d['cTFRGB565'],_0x55a041=-0xe0e+0x5ad+-0x2cb*-0x3;_0x55a041<_0x6a23db['length'];++_0x55a041)_0x6a23db[_0x55a041]=_0x295525(_0x32c94b(_0x6a23db[_0x55a041]));}return{'format':_0x1bbd5f(_0x15cf5b,_0x2a7501['deviceDeta'+'ils']),'width':_0x565291,'height':_0x43cf16,'levels':_0x6a23db,'cubemap':!(0x10de+0xf30+-0x5*0x669),'transcodeTime':_0x1cac96()-_0x29579d,'url':_0x399197,'unswizzledGGGR':_0x2157ca};},_0x35b111=(_0x37444e,_0x28f09a,_0x177ce4)=>{const _0x5add6e=_0x1cac96(),_0x4fd889=new _0x45f1ba['BasisFile'](new Uint8Array(_0x28f09a)),_0x256e65=_0x4fd889['getImageWi'+'dth'](0x1192+-0x1cdc*-0x1+0x236*-0x15,-0x3a*0x13+0x2b6*0x2+-0x11e),_0x1e305d=_0x4fd889['getImageHe'+'ight'](-0x833*0x4+0x69d*0x2+-0x1e*-0xa7,0xb2f+0x2*-0xa19+-0x1*-0x903),_0x36c8ba=_0x4fd889['getNumImag'+'es'](),_0x3fb229=_0x4fd889['getNumLeve'+'ls'](-0x56d+-0x91a*-0x1+-0x3ad*0x1),_0x11ba1d=!!_0x4fd889['getHasAlph'+'a'](),_0x3cae41=_0x4fd889['isUASTC']&&_0x4fd889['isUASTC']();if(!_0x256e65||!_0x1e305d||!_0x36c8ba||!_0x3fb229)throw _0x4fd889['close'](),_0x4fd889['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x37444e+'\x20width='+_0x256e65+'\x20height='+_0x1e305d+'\x20images='+_0x36c8ba+'\x20levels='+_0x3fb229);const _0x39b838=_0x143e64(_0x177ce4['deviceDeta'+'ils'],_0x11ba1d,_0x3cae41),_0x5f3b08=!!_0x177ce4['isGGGR']&&_0x39b838==='pvr';let _0x30da19;if(_0x5f3b08?_0x30da19=_0x29e90d['cTFRGBA32']:(_0x30da19=_0x11ba1d?_0x135f86[_0x39b838]:_0x2ed4d8[_0x39b838],_0x51337c(_0x256e65,_0x1e305d,_0x30da19)||(_0x30da19=_0x11ba1d?_0x29e90d['cTFRGBA32']:_0x29e90d['cTFRGB565'])),!_0x4fd889['startTrans'+'coding']())throw _0x4fd889['close'](),_0x4fd889['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x37444e);let _0xcb9018;const _0x878b6f=[];for(let _0x1a0809=0x2096+-0x2*0x529+-0x1644;_0x1a0809<_0x3fb229;++_0x1a0809){const _0x489b85=_0x4fd889['getImageTr'+'anscodedSi'+'zeInBytes'](0x1ae+0x2241+-0x23ef,_0x1a0809,_0x30da19),_0x40cb05=new Uint8Array(_0x489b85);if(!_0x4fd889['transcodeI'+'mage'](_0x40cb05,-0x1c38+0x21a*-0x1+0x1e52,_0x1a0809,_0x30da19,-0x649*0x5+0x54a*-0x1+0x24b7,-0x1*-0xc29+-0x1c3+-0xa66)){if(_0x1a0809===_0x3fb229-(-0x2c*0x8b+0x25ce+-0x1*0xde9)&&_0x489b85===_0x878b6f[_0x1a0809-(0x119e+-0x11e*-0x15+-0x2913)]['buffer']['byteLength'])_0x40cb05['set'](new Uint8Array(_0x878b6f[_0x1a0809-(0x1e6*0x6+0x40*0x18+0x1163*-0x1)]['buffer'])),console['warn']('Failed\x20to\x20'+'transcode\x20'+'last\x20mipma'+'p\x20level,\x20u'+'sing\x20previ'+'ous\x20level\x20'+'instead\x20ur'+'l='+_0x37444e);else throw _0x4fd889['close'](),_0x4fd889['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x37444e);}const _0x2b984a=_0x30da19===_0x29e90d['cTFRGB565']||_0x30da19===_0x29e90d['cTFRGBA444'+'4'];_0x878b6f['push'](_0x2b984a?new Uint16Array(_0x40cb05['buffer']):_0x40cb05);}if(_0x4fd889['close'](),_0x4fd889['delete'](),_0x5f3b08){for(_0x30da19=_0x29e90d['cTFRGB565'],_0xcb9018=-0x30a+-0x16ba+0x19c4;_0xcb9018<_0x878b6f['length'];++_0xcb9018)_0x878b6f[_0xcb9018]=_0x295525(_0x32c94b(_0x878b6f[_0xcb9018]));}return{'format':_0x1bbd5f(_0x30da19,_0x177ce4['deviceDeta'+'ils']),'width':_0x256e65,'height':_0x1e305d,'levels':_0x878b6f,'cubemap':!(0x926*0x3+-0x38a+-0xd3*0x1d),'transcodeTime':_0x1cac96()-_0x5add6e,'url':_0x37444e,'unswizzledGGGR':_0x5f3b08};},_0x3b8f62=(_0x2d379a,_0x465545,_0x5cdca4)=>_0x5cdca4['isKTX2']?_0x3086c2(_0x2d379a,_0x465545,_0x5cdca4):_0x35b111(_0x2d379a,_0x465545,_0x5cdca4),_0xa9097b=(_0x25b953,_0x2f7e9b,_0x3b3f3c)=>{try{const _0xcd478c=_0x3b8f62(_0x25b953,_0x2f7e9b,_0x3b3f3c);_0xcd478c['levels']=_0xcd478c['levels']['map'](_0x3f00f9=>_0x3f00f9['buffer']),self['postMessag'+'e']({'url':_0x25b953,'data':_0xcd478c},_0xcd478c['levels']);}catch(_0x175b62){self['postMessag'+'e']({'url':_0x25b953,'err':_0x175b62},null);}},_0x506760=(_0x45a1e3,_0x4f95d2)=>{const _0x1c3ffa=(_0x4865c9,_0xd88e4d)=>(WebAssembly['instantiat'+'e'](_0x45a1e3['module'],_0x4865c9)['then'](_0x367dca=>{_0xd88e4d(_0x367dca);})['catch'](_0x78db81=>{console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x78db81);}),{});self['BASIS'](_0x45a1e3['module']?{'instantiateWasm':_0x1c3ffa}:null)['then'](_0x2f259f=>{_0x2f259f['initialize'+'Basis'](),_0x45f1ba=_0x2f259f,_0x53419a=_0x45a1e3['rgbPriorit'+'y'],_0x2ba7c9=_0x45a1e3['rgbaPriori'+'ty'],_0x4f95d2(null);});},_0x12ddb8=[];self['onmessage']=_0x4002cc=>{const _0x1fd0cd=_0x4002cc['data'];switch(_0x1fd0cd['type']){case'init':_0x506760(_0x1fd0cd['config'],()=>{for(let _0xc33b90=0x9*-0xb3+-0x2*0x991+0x196d;_0xc33b90<_0x12ddb8['length'];++_0xc33b90)_0xa9097b(_0x12ddb8[_0xc33b90]['url'],_0x12ddb8[_0xc33b90]['data'],_0x12ddb8[_0xc33b90]['options']);_0x12ddb8['length']=0x1*-0x1799+0x243c+-0xca3;});break;case'transcode':_0x45f1ba?_0xa9097b(_0x1fd0cd['url'],_0x1fd0cd['data'],_0x1fd0cd['options']):_0x12ddb8['push'](_0x1fd0cd);break;}};}const Uk=_0xb8b183=>({'astc':!!_0xb8b183['extCompres'+'sedTexture'+'ASTC'],'atc':!!_0xb8b183['extCompres'+'sedTexture'+'ATC'],'dxt':!!_0xb8b183['extCompres'+'sedTexture'+'S3TC'],'etc1':!!_0xb8b183['extCompres'+'sedTexture'+'ETC1'],'etc2':!!_0xb8b183['extCompres'+'sedTexture'+'ETC'],'pvr':!!_0xb8b183['extCompres'+'sedTexture'+'PVRTC']}),Bk=(_0x3eaab4,_0x2f4ffd)=>{const _0x44b4c2=_0x1cb7da=>{const _0x439199=['/*\x20basis\x20*'+'/',_0x1cb7da,'','('+kk['toString']()+')()\x0a\x0a']['join']('\x0a');return new Blob([_0x439199],{'type':'applicatio'+'n/javascri'+'pt'});},_0x141e97=()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x485142=new WebAssembly['Module'](Uint8Array['of'](0x1*-0x2362+-0x1f2*0x1+0x955*0x4,-0x1*-0x15fb+0x91*0x1d+0x21*-0x127,0x1e29*-0x1+0x1*-0x412+0x1*0x22ae,-0x1*0x21c7+-0xb85+0x5*0x925,0x1cf9+-0x227e*-0x1+-0x3f76,-0x1*0x262b+-0x1*-0x206b+0x5c0,-0x21a9+-0x30a*0x3+0xe9*0x2f,0x190e+0xb3*0x2f+-0x39eb*0x1));if(_0x485142 instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x485142)instanceof WebAssembly['Instance'];}}catch{}return!(-0x148*-0x11+-0x1d3*0x6+-0x1*0xad5);},_0x565cde=(_0x5c5864,_0x3587b0)=>{_0x2f4ffd(null,{'workerUrl':URL['createObje'+'ctURL'](_0x44b4c2(_0x5c5864)),'module':_0x3587b0,'rgbPriority':_0x3eaab4['rgbPriorit'+'y'],'rgbaPriority':_0x3eaab4['rgbaPriori'+'ty']});},_0x4752fd={'cache':!(-0x1839+0x1e07+-0x5ce),'responseType':'text','retry':_0x3eaab4['maxRetries']>-0x3e*0x5c+0xba1+0xaa7,'maxRetries':_0x3eaab4['maxRetries']};if(_0x3eaab4['glueUrl']&&_0x3eaab4['wasmUrl']&&_0x141e97()){let _0xf7cc7a=null,_0x5d5c31=null;ot['get'](_0x3eaab4['glueUrl'],_0x4752fd,(_0x2fadd9,_0x475bb2)=>{_0x2fadd9?_0x2f4ffd(_0x2fadd9):_0x5d5c31?_0x565cde(_0x475bb2,_0x5d5c31):_0xf7cc7a=_0x475bb2;});const _0x3d42a5=fetch(_0x3eaab4['wasmUrl']),_0x4ebd60=()=>{_0x3d42a5['then'](_0x20ab1f=>_0x20ab1f['arrayBuffe'+'r']())['then'](_0x9695c6=>WebAssembly['compile'](_0x9695c6))['then'](_0x14c82a=>{_0xf7cc7a?_0x565cde(_0xf7cc7a,_0x14c82a):_0x5d5c31=_0x14c82a;})['catch'](_0x28e530=>{_0x2f4ffd(_0x28e530,null);});};WebAssembly['compileStr'+'eaming']?WebAssembly['compileStr'+'eaming'](_0x3d42a5)['then'](_0x2330bf=>{_0xf7cc7a?_0x565cde(_0xf7cc7a,_0x2330bf):_0x5d5c31=_0x2330bf;})['catch'](_0x552b38=>{w['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x3eaab4['wasmUrl']+'\x20('+_0x552b38+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x4ebd60();}):_0x4ebd60();}else ot['get'](_0x3eaab4['fallbackUr'+'l'],_0x4752fd,(_0x4691c3,_0x2ed48e)=>{_0x4691c3?_0x2f4ffd(_0x4691c3,null):_0x565cde(_0x2ed48e,null);});};class zk{constructor(){this['callbacks']={},this['queue']=[],this['clients']=[];}['enqueueJob'](_0x5bdea,_0x106f51,_0x5ded24,_0x279377){if(this['callbacks']['hasOwnProp'+'erty'](_0x5bdea))this['callbacks'][_0x5bdea]['push'](_0x5ded24);else{this['callbacks'][_0x5bdea]=[_0x5ded24];const _0x3a82c3={'url':_0x5bdea,'data':_0x106f51,'options':_0x279377};this['clients']['length']>-0x1be8+-0x1636+0x321e?this['clients']['shift']()['run'](_0x3a82c3):this['queue']['push'](_0x3a82c3);}}['enqueueCli'+'ent'](_0x4bb047){this['queue']['length']>-0x11e*-0x3+0x1b7d+-0x1ed7?_0x4bb047['run'](this['queue']['shift']()):this['clients']['push'](_0x4bb047);}['handleResp'+'onse'](_0x4ef462,_0x19c2a8,_0x5b0b7a){const _0x307d07=this['callbacks'][_0x4ef462];if(_0x19c2a8){for(let _0x1d608d=-0x79a+-0xbf7+-0x1391*-0x1;_0x1d608d<_0x307d07['length'];++_0x1d608d)_0x307d07[_0x1d608d](_0x19c2a8);}else{_0x5b0b7a['format']===Jh||_0x5b0b7a['format']===ed?_0x5b0b7a['levels']=_0x5b0b7a['levels']['map'](_0xb0878f=>new Uint16Array(_0xb0878f)):_0x5b0b7a['levels']=_0x5b0b7a['levels']['map'](_0x1a4dea=>new Uint8Array(_0x1a4dea));for(let _0x1c8c07=-0x1b5b+0x7cf*0x5+-0x2c*0x44;_0x1c8c07<_0x307d07['length'];++_0x1c8c07)_0x307d07[_0x1c8c07](null,_0x5b0b7a);}delete this['callbacks'][_0x4ef462];}}class Vk{constructor(_0x24b7ff,_0x1533fa,_0x4262a7){this['queue']=_0x24b7ff,this['worker']=new Worker(_0x1533fa['workerUrl']),this['worker']['addEventLi'+'stener']('message',_0x5ac8b8=>{const _0x32c2ad=_0x5ac8b8['data'];this['queue']['handleResp'+'onse'](_0x32c2ad['url'],_0x32c2ad['err'],_0x32c2ad['data']),this['eager']||this['queue']['enqueueCli'+'ent'](this);}),this['worker']['postMessag'+'e']({'type':'init','config':_0x1533fa}),this['eager']=_0x4262a7;}['run'](_0x3789ce){const _0x204dff=[];_0x3789ce['data']instanceof ArrayBuffer&&_0x204dff['push'](_0x3789ce['data']),this['worker']['postMessag'+'e']({'type':'transcode','url':_0x3789ce['url'],'format':_0x3789ce['format'],'data':_0x3789ce['data'],'options':_0x3789ce['options']},_0x204dff),this['eager']&&this['queue']['enqueueCli'+'ent'](this);}}const Gk=-0xfec+-0xe3c+0x1e29,Hk=['etc2','etc1','astc','dxt','pvr','atc'],Wk=['astc','dxt','etc2','pvr','atc'],$k=0xe2d*-0x1+-0x15a4+0x23d6,Xu=new zk();let xS=null,qu=!(-0x1f0a+0x7c3*0x4+-0x1*0x1);function Xk(_0xf9a8d7){if(!qu){if(!_0xf9a8d7)_0xf9a8d7=xS||{};else{if(_0xf9a8d7['lazyInit']){xS=_0xf9a8d7;return;}}if(!_0xf9a8d7['glueUrl']||!_0xf9a8d7['wasmUrl']||!_0xf9a8d7['fallbackUr'+'l']){const _0x5435f3=YS['getConfig']('BASIS');_0x5435f3&&(_0xf9a8d7={'glueUrl':_0x5435f3['glueUrl'],'wasmUrl':_0x5435f3['wasmUrl'],'fallbackUrl':_0x5435f3['fallbackUr'+'l'],'numWorkers':_0x5435f3['numWorkers']});}if(_0xf9a8d7['glueUrl']||_0xf9a8d7['wasmUrl']||_0xf9a8d7['fallbackUr'+'l']){qu=!(0xfb9+0x2*0x306+0x15c5*-0x1);const _0x9268e5=Math['max'](0x197c+-0x7e6*-0x4+-0x3913,Math['min'](-0x713+-0x286+0x1*0x9a9,_0xf9a8d7['numWorkers']||Gk)),_0x12f5db=_0xf9a8d7['numWorkers']===0x1*-0xc45+0xec2*-0x1+0x1*0x1b08||(_0xf9a8d7['hasOwnProp'+'erty']('eagerWorke'+'rs')?_0xf9a8d7['eagerWorke'+'rs']:!(0x17b3+0x3d*-0x4c+0x9*-0x9f));_0xf9a8d7['rgbPriorit'+'y']=_0xf9a8d7['rgbPriorit'+'y']||Hk,_0xf9a8d7['rgbaPriori'+'ty']=_0xf9a8d7['rgbaPriori'+'ty']||Wk,_0xf9a8d7['maxRetries']=_0xf9a8d7['hasOwnProp'+'erty']('maxRetries')?_0xf9a8d7['maxRetries']:$k,Bk(_0xf9a8d7,(_0xb4bb9b,_0x5b0cb2)=>{if(_0xb4bb9b)console['error']('failed\x20to\x20'+'initialize'+'\x20basis\x20wor'+'ker:\x20'+_0xb4bb9b);else{for(let _0x4126ab=0x1*0xb59+-0x182d*0x1+0xcd4;_0x4126ab<_0x9268e5;++_0x4126ab)Xu['enqueueCli'+'ent'](new Vk(Xu,_0x5b0cb2,_0x12f5db));}});}}}let Df=null;function b0(_0x4298a3,_0x48592b,_0x778ed6,_0x19b176,_0x17e11b){return Xk(),Df||(Df={'formats':Uk(_0x4298a3)}),Xu['enqueueJob'](_0x48592b,_0x778ed6,_0x19b176,{'deviceDetails':Df,'isGGGR':!!(_0x17e11b!=null&&_0x17e11b['isGGGR']),'isKTX2':!!(_0x17e11b!=null&&_0x17e11b['isKTX2'])}),qu;}class eo{['load'](_0xfec9df,_0x15bd29,_0x30615f){throw new Error('not\x20implem'+'ented');}['open'](_0x32a31d,_0x1204f7,_0x20cc94){throw new Error('not\x20implem'+'ented');}}class qk extends eo{constructor(_0x544e68,_0xdba16d){super(),this['device']=_0xdba16d,this['maxRetries']=-0x1ea*0x10+-0x371*0xb+0x175*0x2f;}['load'](_0x2749bb,_0x110c61,_0x3ce377){const _0x107a00=this['device'],_0x135b51=_0x533249=>{var _0x2417d7,_0x36ec28,_0x1d0780;b0(_0x107a00,_0x2749bb['load'],_0x533249,_0x110c61,{'isGGGR':(((_0x1d0780=(_0x36ec28=(_0x2417d7=_0x3ce377==null?void(-0x1*0x9d3+0x100f*-0x2+-0xdfb*-0x3):_0x3ce377['file'])==null?void(-0x5*0x595+-0x20ae+0x3c97):_0x2417d7['variants'])==null?void(-0x1664+-0x1*-0x496+0x11ce):_0x36ec28['basis'])==null?void(-0x2406+-0x269*-0x1+-0x219d*-0x1):_0x1d0780['opt'])&0x1fc8+-0x123*-0x13+-0x3559)!==-0x1*-0xa16+-0x1*0x200d+0x15f7})||_0x110c61('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x3ce377['name']+']('+_0x3ce377['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.'));};pe['fetchArray'+'Buffer'](_0x2749bb['load'],(_0xddeda5,_0x43e078)=>{_0xddeda5?_0x110c61(_0xddeda5):_0x135b51(_0x43e078);},_0x3ce377,this['maxRetries']);}['open'](_0x356568,_0x48d4af,_0xb0bb8e,_0xe9a8e2={}){const _0x4e12ff=_0xe9a8e2['srgb']?ld(_0x48d4af['format']):_0x48d4af['format'],_0x42e475=new _e(_0xb0bb8e,{'name':_0x356568,'profilerHint':Pr,'addressU':_0x48d4af['cubemap']?ue:yt,'addressV':_0x48d4af['cubemap']?ue:yt,'width':_0x48d4af['width'],'height':_0x48d4af['height'],'format':_0x4e12ff,'cubemap':_0x48d4af['cubemap'],'levels':_0x48d4af['levels'],..._0xe9a8e2});return _0x42e475['upload'](),_0x42e475;}}const A0=new Uint8Array([-0x244a*0x1+-0x13ee*0x1+-0x38c1*-0x1,-0x1*-0x76a+0x234*-0x1+-0x4e6,0x2205+0x1*0x17de+-0x1*0x3995,-0x33*0xb+0x1c95+-0x1a1d,-0x1fb2+0x1b33+-0x3*-0x184,-0x147b+0x185f*0x1+0x2*-0x1ed,-0x8b*0x22+0xb33+0x75d,0x1c41+0x1803+0x2*-0x1a1d,0x2289+-0x1*-0xe08+-0x3091,0x1d13+0xcb*-0xd+-0x962*0x2,0x1e36+-0x98*-0x12+-0x28e6,0x833*-0x4+0x170+-0x1f69*-0x1,-0x267d*-0x1+0xf12+0x6*-0x8e1,0x1*0x4da+-0xee0+0x527*0x2,-0x7df+-0x6fc+-0x4f*-0x31,0x1a37+0xaac+-0x2491,-0xad4+-0x1*-0x10a3+0x1*-0x5cf,-0x137e*0x2+0xd63+0x1999,-0x9*0x447+0x1*0x213a+0x545,-0x40b+-0xa0e+0xe1a,-0x1*-0x1799+0x1114+-0x10b*0x27,0x1756+-0x56*0x11+-0x11a0,0x1*-0xb8d+-0x58e*0x6+0x2ce1,0x1a9d+-0x1a*0x28+0x25*-0x9c,0x660+-0x1*0x78b+0x133,-0xa*0x115+-0x233e+0x2e16,0x1acc+0x7ed+-0x22b9*0x1,-0x1*-0x1725+0x3*-0x96b+0x6d*0xc,-0x1*-0x2164+0x18a+0x20e*-0x11,0x769+0x25ce+-0x2d18,0x347*-0xb+-0x1*0xb3+0x24d5,0xa80+-0x939+0x1*-0x83,-0x5d*-0x2b+0xc16+-0xd96*0x2,-0xf08+-0x7*-0xe4+0x466*0x2,0x1*-0x1d62+-0x29*-0x51+-0x1069*-0x1,0x2f*0xa3+0x64*-0x1d+-0x1299,-0x101*-0x23+0x747*-0x1+-0x1bcf,-0x2371+-0x1ce7*-0x1+0x6d3,0x20b3+-0x3c5+-0x1caa,0xa4*-0xb+0x35*0x4+0x1*0x679,-0x2*-0x98f+-0x8c7+0xb*-0xe9,0xb2c+0x1d41+0x1*-0x27f5,0x23e7+0x1d3f+-0x404c,0x1*-0x160f+0xbb9*0x1+0xab9,0x1892+0x222b+0x3*-0x1373,-0xf1*-0x25+0xdaf+-0x3020,-0x1722+-0x2d*-0x9+0x15ef,0x2*0x659+0x1*0xbd5+0x7*-0x367,-0xa63*-0x2+-0x1d4+-0x12eb,-0x2673+-0xcae+0x3321,0x41*0x76+-0x26ff*0x1+0x3*0x303,-0x197+0x1600+0x6*-0x358,0x2040+-0x1a14*-0x1+-0x1d2a*0x2,-0x9a4+-0x11*-0x11c+0x2fb*-0x3,-0xd*0x2e7+0x16f8+-0x502*-0x3,0x431+-0x19c3*-0x1+-0x1d6f,0x1848+-0x2*0x6d9+-0x3d*0x2a,-0x4*0x38b+0x347*-0x2+-0x15a7*-0x1,-0x1ac2+-0x49e+0x1f60,0x65e*-0x2+0x123*0x16+0x1*-0xc46,-0x686+0x18a4+-0x305*0x6,-0x264c+-0xf5e+-0x35aa*-0x1,0x20c9+-0x2*0xdab+-0x2*0x295,-0x15cf*-0x1+-0xec3*-0x1+-0x244d,0xd*0xa4+-0x1*-0xe1d+-0x3*0x761,0x3*-0x7c3+-0x3f*-0x38+0x9c5,0x3*0xcfe+0x11b8+-0x3804,0x1*-0x1f05+-0x83d*0x3+0x37fe,-0xb*-0x229+0x1f06*-0x1+0x7a3,-0x1b*0x11+-0x4*0x8c3+-0x3*-0xc73]),C0=(_0x5b485b,_0xa8a9ed)=>{const _0x38a218=new _e(_0x5b485b,{'width':0x1,'height':0x1,'format':Ne,'mipmaps':!(0x14e*0xf+0x25dc+-0x396d),'levels':[_0xa8a9ed]}),_0x10e563=new gt({'colorBuffer':_0x38a218,'depth':!(0x258f+-0x107f+0x9*-0x257)});_0x5b485b['setFramebu'+'ffer'](_0x10e563['impl']['_glFrameBu'+'ffer']),_0x5b485b['initRender'+'Target'](_0x10e563);const _0x4c51fa=new Uint8ClampedArray(-0x165*-0x9+-0x119*0x8+-0x1*0x3c1);return _0x5b485b['gl']['readPixels'](-0x2*-0x831+0x26c9+-0x1e7*0x1d,-0xba0+-0xb4c*-0x3+0xe4*-0x19,-0x140c+0x1*0xbb6+-0x131*-0x7,0xbee+0x1bd0+-0x27bd,_0x5b485b['gl']['RGBA'],_0x5b485b['gl']['UNSIGNED_B'+'YTE'],_0x4c51fa),_0x10e563['destroy'](),_0x38a218['destroy'](),_0x4c51fa[0xc8b*-0x2+-0x1*-0x15ff+0x317]===-0x1*-0x1ba3+-0x1d*-0x78+-0x293a&&_0x4c51fa[-0x4bc+0x8*0x41b+-0x1c1b]===0x5b1+-0x3e3*-0x1+-0x992&&_0x4c51fa[-0x5*0x57d+0x1*0x229+-0x194a*-0x1]===-0x4d+-0x1a68+0xf*0x1c8&&_0x4c51fa[-0xf20+0x190*-0x5+0x19*0xeb]===0xeb5+0x2066+-0x1*0x2edc;},jk=_0x330d40=>createImageBitmap(new Blob([A0],{'type':'image/png'}),{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0x4d74a8=>C0(_0x330d40,_0x4d74a8))['catch'](_0x365801=>!(0x78d+0x1*-0x1f83+0x17f7)),Yk=_0x191003=>new Promise((_0x4f400b,_0x4b34e9)=>{const _0x386d0f=new Image();_0x386d0f['src']=URL['createObje'+'ctURL'](new Blob([A0])),_0x386d0f['onload']=()=>{_0x4f400b(C0(_0x191003,_0x386d0f));};});class Kk{static['run'](_0x9f35){jk(_0x9f35)['then'](_0x1b4ad3=>{console['log']('imageBitma'+'pIsCorrect'+'='+_0x1b4ad3);}),Yk(_0x9f35)['then'](_0x17e22c=>{console['log']('imgElement'+'IsCorrect='+_0x17e22c);});}}class Zk extends eo{constructor(_0x119f4b,_0x98e96b){super(),this['crossOrigi'+'n']=_0x119f4b['prefix']?'anonymous':null,this['maxRetries']=0x28*0x23+0x3*-0xb0c+0x1bac,this['device']=_0x98e96b,mi['get']('IMG_ALPHA_'+'TEST')&&Kk['run'](this['device']);}['load'](_0x344ed0,_0x2cdd1b,_0x1f1249){var _0x27c400;const _0x4b4861=!!((_0x27c400=_0x1f1249==null?void(0x1c5b*-0x1+0x772+0x14e9):_0x1f1249['file'])!=null&&_0x27c400['contents']);if(_0x4b4861){if(this['device']['supportsIm'+'ageBitmap']){this['_loadImage'+'BitmapFrom'+'Blob'](new Blob([_0x1f1249['file']['contents']]),_0x2cdd1b);return;}_0x344ed0={'load':URL['createObje'+'ctURL'](new Blob([_0x1f1249['file']['contents']])),'original':_0x344ed0['original']};}const _0x497b3e=(_0x1e6ac4,_0x21a6b4)=>{_0x4b4861&&URL['revokeObje'+'ctURL'](_0x344ed0['load']),_0x2cdd1b(_0x1e6ac4,_0x21a6b4);};let _0x546a41;_0x1f1249&&_0x1f1249['options']&&_0x1f1249['options']['hasOwnProp'+'erty']('crossOrigi'+'n')?_0x546a41=_0x1f1249['options']['crossOrigi'+'n']:jn['test'](_0x344ed0['load'])&&(_0x546a41=this['crossOrigi'+'n']),this['device']['supportsIm'+'ageBitmap']?this['_loadImage'+'Bitmap'](_0x344ed0['load'],_0x344ed0['original'],_0x546a41,_0x497b3e,_0x1f1249):this['_loadImage'](_0x344ed0['load'],_0x344ed0['original'],_0x546a41,_0x497b3e);}['open'](_0x1abe14,_0xf454fa,_0x46b773,_0x35f7ea={}){const _0x16f851=new _e(_0x46b773,{'name':_0x1abe14,'profilerHint':Pr,'width':_0xf454fa['width'],'height':_0xf454fa['height'],'format':_0x35f7ea['srgb']?_s:Ne,..._0x35f7ea});return _0x16f851['setSource'](_0xf454fa),_0x16f851;}['_loadImage'](_0x27b3ae,_0x245dbb,_0x362a24,_0x31c1d5){const _0x23a2e9=new Image();_0x362a24&&(_0x23a2e9['crossOrigi'+'n']=_0x362a24);let _0x8b1827=0xbac+0x671*0x4+-0x4*0x95c;const _0x5d5014=this['maxRetries'];let _0x4c3176;_0x23a2e9['onload']=function(){_0x31c1d5(null,_0x23a2e9);},_0x23a2e9['onerror']=function(){if(!_0x4c3176){if(_0x5d5014>-0x1b1f+-0x1*0x15dc+0x30fb*0x1&&++_0x8b1827<=_0x5d5014){const _0xd6133=Math['pow'](-0x127e+-0xac3+0x1d43,_0x8b1827)*(-0x1ddb*0x1+-0x6*-0x55d+0x5*-0x63);console['log']('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0x245dbb+('\x27\x20-\x20Retryi'+'ng\x20in\x20')+_0xd6133+'ms...');const _0x62d41b=_0x27b3ae['indexOf']('?')>=0x1239+0x51b*-0x1+0x49*-0x2e?'&':'?';_0x4c3176=setTimeout(()=>{_0x23a2e9['src']=_0x27b3ae+_0x62d41b+'retry='+Date['now'](),_0x4c3176=null;},_0xd6133);}else _0x31c1d5('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0x245dbb+'\x27');}},_0x23a2e9['src']=_0x27b3ae;}['_loadImage'+'Bitmap'](_0xc11357,_0x2f53b6,_0x517896,_0xff7ad8,_0xce3a67){const _0x34be47={'cache':!(0xbf1+0xd8a*0x2+-0x7*0x593),'responseType':'blob','retry':this['maxRetries']>-0x412*-0x4+-0x3a9+-0xc9f,'maxRetries':this['maxRetries'],'progress':_0xce3a67};ot['get'](_0xc11357,_0x34be47,(_0x4a6a8f,_0x39f056)=>{_0x4a6a8f?_0xff7ad8(_0x4a6a8f):this['_loadImage'+'BitmapFrom'+'Blob'](_0x39f056,_0xff7ad8);});}['_loadImage'+'BitmapFrom'+'Blob'](_0x1fded7,_0x35494b){createImageBitmap(_0x1fded7,{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0x43cdb9=>_0x35494b(null,_0x43cdb9))['catch'](_0x2fb2f5=>_0x35494b(_0x2fb2f5));}}const If=[-0x89378779+-0x3d8da4a7*0x2+0x15ca71c72,0xdf183992*0x1+-0xcbb*-0x15eecd+-0x13b1e1431,0x19*-0x2ca4bd+-0x1*0x82a0fda+0x16a0305c],Qk={0x83f0:td,0x83f2:op,0x83f3:vl,0x8d64:id,0x9274:cp,0x9278:hp,0x8c00:rd,0x8c01:xl,0x8c02:ad,0x8c03:Tl,0x8051:Cr,0x8058:Ne,0x8c41:lp,0x8c43:_s,0x8c3a:In,0x881b:ui,0x881a:nt};function Jk(_0x2cc9aa,_0x4a11cb,_0x5aae5f,_0x4740bd){return _0x2cc9aa===In?new Uint32Array(_0x4a11cb,_0x5aae5f,_0x4740bd/(0x25c6+0xe*0xd1+-0x3130)):new Uint8Array(_0x4a11cb,_0x5aae5f,_0x4740bd);}class eU extends eo{constructor(_0x55a901){super(),this['maxRetries']=-0x3d7*-0x1+-0x9a5+0x2*0x2e7;}['load'](_0x51443d,_0x44d2f4,_0x5c33b1){pe['fetchArray'+'Buffer'](_0x51443d['load'],_0x44d2f4,_0x5c33b1,this['maxRetries']);}['open'](_0x1e0156,_0x20fd7b,_0x409264,_0x1a2485={}){const _0xfb6404=this['parse'](_0x20fd7b);if(!_0xfb6404)return null;const _0x29d193=_0x1a2485['srgb']?ld(_0xfb6404['format']):_0xfb6404['format'],_0x5b4ee4=new _e(_0x409264,{'name':_0x1e0156,'profilerHint':Pr,'addressU':_0xfb6404['cubemap']?ue:yt,'addressV':_0xfb6404['cubemap']?ue:yt,'width':_0xfb6404['width'],'height':_0xfb6404['height'],'format':_0x29d193,'cubemap':_0xfb6404['cubemap'],'levels':_0xfb6404['levels'],..._0x1a2485});return _0x5b4ee4['upload'](),_0x5b4ee4;}['parse'](_0x3badab){const _0x2ccf0e=new Uint32Array(_0x3badab);if(If[0x1*-0xee3+-0xc43+0x1b26]!==_0x2ccf0e[0xece+0x1*0xe15+-0x1*0x1ce3]||If[-0xe56*0x2+0xcf1+0xd4*0x13]!==_0x2ccf0e[0x2db+-0x197d+0x131*0x13]||If[-0x40f+0x1b91+-0x10*0x178]!==_0x2ccf0e[-0x1c3a*0x1+-0x1f91+0x3bcd])return w['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX\x20f'+'ile.\x20Expec'+'ted\x200xAB4B'+'5458,\x200x20'+'3131BB,\x200x'+'0D0A1A0A'),null;const _0x12f736={'endianness':_0x2ccf0e[0x17*0x10b+0x2*0x1187+-0x3b08],'glType':_0x2ccf0e[-0x1b7*-0x15+-0xe2c+0x1*-0x15d3],'glTypeSize':_0x2ccf0e[-0xae6+0x4*0x52c+0x3d*-0x29],'glFormat':_0x2ccf0e[0x8ae+0x1680+-0x1f28],'glInternalFormat':_0x2ccf0e[-0xff2+-0x1012+0x200b],'glBaseInternalFormat':_0x2ccf0e[-0x52+-0x2104*-0x1+0x4a*-0x71],'pixelWidth':_0x2ccf0e[-0xd8e*0x1+-0x1ebc*0x1+0x2c53],'pixelHeight':_0x2ccf0e[0x410+-0x26b*-0x10+-0x2ab6],'pixelDepth':_0x2ccf0e[0x6b*-0xb+0x22d*-0x1+0x1*0x6d1],'numberOfArrayElements':_0x2ccf0e[-0x1*-0x19+-0x25f1+0x25e4],'numberOfFaces':_0x2ccf0e[0x1*-0x24d7+0x11ef*-0x1+0x36d3],'numberOfMipmapLevels':_0x2ccf0e[0xd+-0x3*-0x8ba+0x1a2d*-0x1],'bytesOfKeyValueData':_0x2ccf0e[-0x1*-0x1c9c+-0x2*0x1065+0x43d]};if(_0x12f736['pixelDepth']>0x1*-0xec5+-0x7f0+-0xb5b*-0x2)return w['warn']('More\x20than\x20'+'1\x20pixel\x20de'+'pth\x20not\x20su'+'pported!'),null;if(_0x12f736['numberOfAr'+'rayElement'+'s']!==0x8dd+0x7f5+-0x10d2)return w['warn']('Array\x20text'+'ure\x20not\x20su'+'pported!'),null;const _0x9d281c=Qk[_0x12f736['glInternal'+'Format']];if(_0x9d281c===void(0xac9*0x1+-0x22b*-0xf+-0x2b4e))return w['warn']('Unknown\x20gl'+'InternalFo'+'rmat:\x20'+_0x12f736['glInternal'+'Format']),null;let _0x1f8e73=0x1865+-0x492+-0x1*0x13c3+_0x12f736['bytesOfKey'+'ValueData']/(0xf13*0x1+0x24d*-0x9+0x5a6);const _0x347e13=_0x12f736['numberOfFa'+'ces']>-0x3b2+0x1719+0xd*-0x17e,_0x775c5b=[];for(let _0x21936e=0xd13*-0x1+0x35*-0xb7+0x251*0x16;_0x21936e<(_0x12f736['numberOfMi'+'pmapLevels']||-0x12b0+0x19f8*0x1+-0x747*0x1);_0x21936e++){const _0x5e2f94=_0x2ccf0e[_0x1f8e73++];_0x347e13&&_0x775c5b['push']([]);const _0x563ef8=_0x347e13?_0x775c5b[_0x21936e]:_0x775c5b;for(let _0x28e2e0=0x3b6+-0xbd*0x5+0x5*-0x1;_0x28e2e0<(_0x347e13?0x1343*-0x1+0x22be+-0xf75:-0x112e+-0xbf4+0x1d23);++_0x28e2e0)_0x563ef8['push'](Jk(_0x9d281c,_0x3badab,_0x1f8e73*(-0x84+-0x3d6*-0x9+-0x13*0x1ca),_0x5e2f94)),_0x1f8e73+=_0x5e2f94+(0x1383+-0x1810+0x49*0x10)>>0x154f+-0x1*0x31c+-0x1*0x1231;}return{'format':_0x9d281c,'width':_0x12f736['pixelWidth'],'height':_0x12f736['pixelHeigh'+'t'],'levels':_0x775c5b,'cubemap':_0x347e13};}}const tU={'KHR_DF_MODEL_UASTC':0xa6};class sU extends eo{constructor(_0x30e6c6,_0x349ee2){super(),this['maxRetries']=-0x19ce+0x72e*-0x1+-0x1*-0x20fc,this['device']=_0x349ee2;}['load'](_0x1cd85e,_0x50bc1f,_0x7b644b){pe['fetchArray'+'Buffer'](_0x1cd85e['load'],(_0x5a8e6d,_0x1b4e20)=>{_0x5a8e6d?_0x50bc1f(_0x5a8e6d,_0x1b4e20):this['parse'](_0x1b4e20,_0x1cd85e,_0x50bc1f,_0x7b644b);},_0x7b644b,this['maxRetries']);}['open'](_0x5e6c93,_0x36eb66,_0x4cfad9,_0x330fff={}){const _0x2aa7d6=_0x330fff['srgb']?ld(_0x36eb66['format']):_0x36eb66['format'],_0x45371d=new _e(_0x4cfad9,{'name':_0x5e6c93,'profilerHint':Pr,'addressU':_0x36eb66['cubemap']?ue:yt,'addressV':_0x36eb66['cubemap']?ue:yt,'width':_0x36eb66['width'],'height':_0x36eb66['height'],'format':_0x2aa7d6,'cubemap':_0x36eb66['cubemap'],'levels':_0x36eb66['levels'],..._0x330fff});return _0x45371d['upload'](),_0x45371d;}['parse'](_0x414d87,_0x2cdb5a,_0x2831a4,_0x5d1d4c){var _0x348fa6,_0x43ac4e,_0xe6cecf;const _0x3e43bf=new KS(_0x414d87),_0x1fe27d=[_0x3e43bf['readU32be'](),_0x3e43bf['readU32be'](),_0x3e43bf['readU32be']()];if(_0x1fe27d[0x25f3+-0x74c+-0x461*0x7]!==-0xc96c043+-0x1166abe61+0x1ce4cd2fc||_0x1fe27d[0x14cb+-0x2*-0x81d+-0x2504]!==-0x3*0x128c0457+0x4*-0x835a02+0x48*0x13f9b31||_0x1fe27d[0x93a+0x229*-0x8+0x3*0x2b0]!==-0x15a173b2+0x12b07e15*0x1+-0x61*-0x2a2d07)return w['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX2\x20'+'file.\x20Expe'+'cted\x200xAB4'+'B5458,\x200x2'+'03131BB,\x200'+'x0D0A1A0A'),null;const _0xd1bee9={'vkFormat':_0x3e43bf['readU32'](),'typeSize':_0x3e43bf['readU32'](),'pixelWidth':_0x3e43bf['readU32'](),'pixelHeight':_0x3e43bf['readU32'](),'pixelDepth':_0x3e43bf['readU32'](),'layerCount':_0x3e43bf['readU32'](),'faceCount':_0x3e43bf['readU32'](),'levelCount':_0x3e43bf['readU32'](),'supercompressionScheme':_0x3e43bf['readU32']()},_0x4282ae={'dfdByteOffset':_0x3e43bf['readU32'](),'dfdByteLength':_0x3e43bf['readU32'](),'kvdByteOffset':_0x3e43bf['readU32'](),'kvdByteLength':_0x3e43bf['readU32'](),'sgdByteOffset':_0x3e43bf['readU64'](),'sgdByteLength':_0x3e43bf['readU64']()},_0x5d7267=[];for(let _0x15a5c0=0x198a+0x1332+-0x2cbc*0x1;_0x15a5c0<Math['max'](0x1fae+0x7d1+-0x7e6*0x5,_0xd1bee9['levelCount']);++_0x15a5c0)_0x5d7267['push']({'byteOffset':_0x3e43bf['readU64'](),'byteLength':_0x3e43bf['readU64'](),'uncompressedByteLength':_0x3e43bf['readU64']()});if(_0x3e43bf['readU32']()!==_0x4282ae['kvdByteOff'+'set']-_0x4282ae['dfdByteOff'+'set'])return w['warn']('Invalid\x20fi'+'le\x20data\x20en'+'countered.'),null;_0x3e43bf['skip'](-0x18c1*-0x1+-0x22ca+0x1*0xa11);const _0x3cd317=_0x3e43bf['readU8']();_0x3e43bf['skip'](_0x4282ae['dfdByteLen'+'gth']-(-0x6a*-0x33+0x1820+-0x1*0x2d35)),_0x3e43bf['skip'](_0x4282ae['kvdByteLen'+'gth']),_0xd1bee9['supercompr'+'essionSche'+'me']===0x3*0x9b+0x2af*0xb+-0x1f55||_0x3cd317===tU['KHR_DF_MOD'+'EL_UASTC']?b0(this['device'],_0x2cdb5a['load'],_0x414d87,_0x2831a4,{'isGGGR':(((_0xe6cecf=(_0x43ac4e=(_0x348fa6=_0x5d1d4c==null?void(0x26c+0x13e3+-0x164f):_0x5d1d4c['file'])==null?void(0xbb*-0xc+-0x19d7+0x229b):_0x348fa6['variants'])==null?void(0x174a+0x65b+-0x1da5):_0x43ac4e['basis'])==null?void(-0x3*0xdd+-0x1d12+0x1fa9):_0xe6cecf['opt'])&-0x53c+-0x1240+0x1784*0x1)!==0x33*-0x88+0xb93*0x3+-0x3*0x28b,'isKTX2':!(-0x1f0f*-0x1+-0x1223*-0x1+-0x3132)})||_0x2831a4('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x5d1d4c['name']+']('+_0x5d1d4c['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.')):_0x2831a4('unsupporte'+'d\x20KTX2\x20pix'+'el\x20format');}}class iU extends eo{constructor(_0x53a5da){super(),this['maxRetries']=0x93+-0x16be+-0x162b*-0x1;}['load'](_0x5dc466,_0x2879c4,_0x3ed397){pe['fetchArray'+'Buffer'](_0x5dc466['load'],_0x2879c4,_0x3ed397,this['maxRetries']);}['open'](_0x4a0468,_0x48756f,_0x438743,_0x1121d9={}){const _0x5f1eeb=new Uint32Array(_0x48756f,0xc0*0x25+0xd47+-0x9*0x48f,-0x1*-0x18f+-0x1bda+0x1a6b),_0x898d7a=_0x5f1eeb[-0x2*-0x113b+-0x21d5+0x1*-0x9d],_0x1ef7e6=_0x5f1eeb[-0x1*0x206a+-0xf5f+0x1b5*0x1c],_0x28effd=Math['max'](_0x5f1eeb[-0x3*-0x6a1+-0x2*-0x1b1+-0x11*0x15e],0x9c6+0x1206+-0x1bcb),_0x340943=_0x5f1eeb[-0x20c1+0xad*-0x17+-0x102*-0x30]===-0xd05+0x2654+-0x194b,_0x415dbd=_0x5f1eeb[-0xe21*0x1+-0x1c81*-0x1+-0x1*0xe4b],_0xdc509b=_0x5f1eeb[0xbcf*0x1+0x42*-0xc+-0x1*0x8a1],_0x12599b=_0x5f1eeb[0x5ad*0x3+-0x35*-0x58+-0x707*0x5]===0xf796+0x6*-0x319+0x1900,_0x49983c=0x45b66ecc+0x5deed*0x98e+-0xb392*0x6d07,_0x1eab71=-0x49e8ad41*-0x1+-0x65dbcc1a+0x19eb1*0x322d,_0x170145=-0x22e2+-0xf59*0x2+-0x1*-0x4205,_0x23c32d=-0x1eb7+-0x3*0x2bb+-0x394*-0xb,_0x369618=-0x18b*-0x2a7256+0x1e4be6*-0x10d+-0x1*-0xf9aaa41,_0x59858b=0x477f32f1*0x1+-0x92b*-0x4d311+-0x42870d7c,_0x5af93c=-0xad2c27*-0x4b+0x2aeb83a6+-0x2c7340c3,_0x455995=-0x3*-0x10000e86+-0x141823*0x115+-0xb999*-0x1fa5,_0x1612b0=-0x50d5ca30+0x486e6a41+0x399b943f;let _0x16060e=!(-0x1e3f+-0x21be+0x3ffe),_0x2a0c1f=!(0xdac+-0x2*0x68f+-0x8d),_0x28b0db=!(0xfba+-0x25b*-0x6+-0x1ddb),_0x28baaa=!(-0x1986+0x81*-0x33+-0x4f*-0xa6),_0x50c295=null,_0x5359dc=-0x1a3b+0x3e6*-0x9+0x3d52,_0x1dc0a7;if(_0x340943?_0x415dbd===_0x49983c?(_0x50c295=td,_0x16060e=!(-0x20b*0x2+-0x224c+0x2662)):_0x415dbd===_0x1eab71?(_0x50c295=vl,_0x16060e=!(-0x28+0x98b*-0x3+0x1cc9)):_0x415dbd===_0x170145?(_0x50c295=nt,_0x5359dc=0x3*-0x9f2+-0xcaa*0x3+-0x26*-0x1c9):_0x415dbd===_0x23c32d?(_0x50c295=Xt,_0x5359dc=0x2*0x4cb+0xe83*-0x1+0x4f1):_0x415dbd===_0x369618?(_0x50c295=id,_0x16060e=!(-0x1457+0x1a6*-0x10+0x1*0x2eb7),_0x2a0c1f=!(0x2fe*-0x2+-0x37*-0x44+0x60*-0x17)):_0x415dbd===_0x59858b||_0x415dbd===_0x5af93c?(_0x50c295=_0x415dbd===_0x59858b?xl:Tl,_0x16060e=!(0x1bbf+0x4*-0x2f+-0x901*0x3),_0x28b0db=!(-0x13a*-0x11+-0x632+-0xea8)):(_0x415dbd===_0x455995||_0x415dbd===_0x1612b0)&&(_0x50c295=_0x415dbd===_0x455995?rd:ad,_0x16060e=!(0x2*0x5a7+-0x1*0x1322+0x7d4),_0x28baaa=!(-0xd*0x1df+0xf88+0x1*0x8cb)):_0xdc509b===-0x1*0x1d35+0xa*0x335+-0x2bd&&(_0x50c295=Ne),!_0x50c295)return w['error']('This\x20DDS\x20p'+'ixel\x20forma'+'t\x20is\x20curre'+'ntly\x20unsup'+'ported.\x20Em'+'pty\x20textur'+'e\x20will\x20be\x20'+'created\x20in'+'stead\x20of\x20'+_0x4a0468+'.'),_0x1dc0a7=new _e(_0x438743,{'width':0x4,'height':0x4,'format':Cr,'name':'dds-legacy'+'-empty'}),_0x1dc0a7;_0x1dc0a7=new _e(_0x438743,{'name':_0x4a0468,'profilerHint':Pr,'addressU':_0x12599b?ue:yt,'addressV':_0x12599b?ue:yt,'width':_0x898d7a,'height':_0x1ef7e6,'format':_0x50c295,'cubemap':_0x12599b,'mipmaps':_0x28effd>0xb0*0x33+0x5*0x48d+0x190*-0x25,..._0x1121d9});let _0x4b0cb0=0x3ad*-0x5+-0x1*-0x147b+-0x19a;const _0x1bc739=_0x12599b?-0x112+-0x2c3*0xb+0x1f79:0x18*-0xde+-0x17a0+0x1*0x2c71;let _0x2ea08f;const _0x2b12ec=-0x1bfc*0x1+-0x247d+0x407d,_0x5789ec=-0x7c5+-0x78+0x841,_0x5d386e=_0x415dbd===_0x49983c?-0x2b*-0x4e+0x2*0x2a9+-0x1264:-0x2308+0x1*-0x1945+-0x11*-0x38d;let _0x283b88,_0x37a7bb,_0x4e34c8;for(let _0x486eda=-0x4f*0x49+-0x1*0x14bd+0x2b44;_0x486eda<_0x1bc739;_0x486eda++){let _0x122f4b=_0x898d7a,_0x3af020=_0x1ef7e6;for(let _0x15935e=-0x173f+0x26fb+-0xfbc;_0x15935e<_0x28effd;_0x15935e++){_0x16060e?_0x2a0c1f?_0x2ea08f=Math['floor']((_0x122f4b+(0xe54+0x31d*-0xc+0x170b))/(-0x2194+0xffd*0x2+0x19e))*Math['floor']((_0x3af020+(0x2*0x1245+-0x22*0x1+-0x2465))/(-0x3dd*-0x7+0x109b+0x2ba2*-0x1))*(-0x2258+0x40*0x83+0x1a0):_0x28b0db?_0x2ea08f=Math['max'](_0x122f4b,-0x2619+-0x1259+0x2*0x1c41)*Math['max'](_0x3af020,0x9f*0x17+0x1*-0x644+0x1*-0x7fd)/(-0x8ac+0xf48+-0x698):_0x28baaa?_0x2ea08f=Math['max'](_0x122f4b,0x6e2+-0x1*0x144b+0xd71)*Math['max'](_0x3af020,-0x1*-0xd2+-0x1*0x1f4b+0x1e81)/(0xa45*0x1+0x23c+-0x1c9*0x7):(_0x283b88=Math['floor']((_0x122f4b+_0x2b12ec-(0xaa7+-0x19f7+0xf51))/_0x2b12ec),_0x37a7bb=Math['floor']((_0x3af020+_0x5789ec-(0x1a*-0xa7+-0x96*0x38+0x31c7))/_0x5789ec),_0x4e34c8=_0x283b88*_0x37a7bb,_0x2ea08f=_0x4e34c8*_0x5d386e):_0x2ea08f=_0x122f4b*_0x3af020*(0xf2f+0x6fb+-0x2a*0x87);const _0x4d654b=_0x50c295===Xt?new Float32Array(_0x48756f,_0x4b0cb0,_0x2ea08f):_0x50c295===nt?new Uint16Array(_0x48756f,_0x4b0cb0,_0x2ea08f):new Uint8Array(_0x48756f,_0x4b0cb0,_0x2ea08f);_0x12599b?(_0x1dc0a7['_levels'][_0x15935e]||(_0x1dc0a7['_levels'][_0x15935e]=[]),_0x1dc0a7['_levels'][_0x15935e][_0x486eda]=_0x4d654b):_0x1dc0a7['_levels'][_0x15935e]=_0x4d654b,_0x4b0cb0+=_0x2ea08f*_0x5359dc,_0x122f4b=Math['max'](_0x122f4b*(-0x1ca+0x1b9d+-0x19d3+0.5),-0x49f+0x210f+0xfb*-0x1d),_0x3af020=Math['max'](_0x3af020*(-0x21dc+-0x242*0x8+-0x33ec*-0x1+0.5),-0x1c8c+0x1643*-0x1+0x30*0x10f);}}return _0x1dc0a7['upload'](),_0x1dc0a7;}}class rU extends eo{constructor(_0xd1ae42){super(),this['maxRetries']=-0x1*0xe32+0x1a63*0x1+-0xc31;}['load'](_0x345583,_0x4e20f8,_0x261ddf){pe['fetchArray'+'Buffer'](_0x345583['load'],_0x4e20f8,_0x261ddf,this['maxRetries']),_0x261ddf['data']&&!_0x261ddf['data']['type']&&(_0x261ddf['data']['type']=mh);}['open'](_0x5d3724,_0x392de1,_0xdaa32c,_0x3648bd={}){const _0xc97c9e=this['parse'](_0x392de1);if(!_0xc97c9e)return null;const _0x62a851=new _e(_0xdaa32c,{'name':_0x5d3724,'profilerHint':Pr,'addressU':yt,'addressV':ue,'minFilter':Te,'magFilter':Te,'width':_0xc97c9e['width'],'height':_0xc97c9e['height'],'levels':_0xc97c9e['levels'],'format':Ne,'type':mh,'mipmaps':!(0x1d95+0x1*-0xa7+-0x1ced),..._0x3648bd});return _0x62a851['upload'](),_0x62a851;}['parse'](_0x2c190c){const _0x5c1b9b=new KS(_0x2c190c);if(!_0x5c1b9b['readLine']()['startsWith']('#?RADIANCE'))return w['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20ma'+'gic'),null;const _0x1f5583={};for(;;){const _0xf0f797=_0x5c1b9b['readLine']();if(_0xf0f797['length']===-0x1c09*0x1+-0xa61+0x266a)break;{const _0x58f4a0=_0xf0f797['split']('=');_0x58f4a0['length']===0x3*0xbdd+-0x1350+0x1*-0x1045&&(_0x1f5583[_0x58f4a0[0xd14*-0x2+-0x3*-0x1+0x1a25]]=_0x58f4a0[0x4b6+-0x3d*-0x13+-0x93c]);}}if(!_0x1f5583['hasOwnProp'+'erty']('FORMAT'))return w['error']('radiance\x20h'+'eader\x20miss'+'ing\x20FORMAT'+'\x20variable'),null;const _0x3b578c=_0x5c1b9b['readLine']()['split']('\x20');if(_0x3b578c['length']!==0x3dd+-0x239+0x8*-0x34)return w['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20re'+'solution'),null;const _0x51596f=parseInt(_0x3b578c[0x1840+-0x1556+-0x2e9],0xa86+-0x1977+0xefb),_0x280b76=parseInt(_0x3b578c[0x1e07+-0x12c8+0xb3c*-0x1],-0x23bb+-0x19*-0x1+0x23ac),_0x2ce32d=this['_readPixel'+'s'](_0x5c1b9b,_0x280b76,_0x51596f,_0x3b578c[0x104f*-0x1+-0x1464+0x24b3]==='-Y');return _0x2ce32d?{'width':_0x280b76,'height':_0x51596f,'levels':[_0x2ce32d]}:null;}['_readPixel'+'s'](_0x4cc3fd,_0x5dccca,_0x49db83,_0x15d8ec){if(_0x5dccca<-0x1d5+0x9d*0x1+0x1*0x140||_0x5dccca>0xc15d+0x11*-0xf4+-0x312a)return this['_readPixel'+'sFlat'](_0x4cc3fd,_0x5dccca,_0x49db83);const _0x16b99c=[0x6b6+0xd33+0x1*-0x13e9,0x14b*-0x1+0xb*-0x337+0x24a8,0xc16+-0x21a*0x2+-0x7e2,0x1*0x1dd4+0x237c+0x5*-0xd10];if(_0x4cc3fd['readArray'](_0x16b99c),_0x16b99c[-0x247*-0xd+-0xbe9+-0x11b2]!==0xddd+-0x11*0x16e+-0x5*-0x217||_0x16b99c[-0x2e*-0xd9+0x2e2+0x9*-0x4a7]!==0x2135+0xbf0+-0x2d23||(_0x16b99c[-0x529*-0x2+-0xb3*0x31+-0x17f3*-0x1]&0x1a60+-0x2207+0x1*0x827)!==0x16e7+-0x1b96+-0xb*-0x6d)return _0x4cc3fd['skip'](-(-0x13f3+-0x1c4f*-0x1+0x6*-0x164)),this['_readPixel'+'sFlat'](_0x4cc3fd,_0x5dccca,_0x49db83);const _0x3261cb=new ArrayBuffer(_0x5dccca*_0x49db83*(-0x1a9*0xb+-0xcc1+0x1f08)),_0x15c093=new Uint8Array(_0x3261cb);let _0x1a04a1=_0x15d8ec?-0x31a*-0x1+0x70f+-0xa29:_0x5dccca*(0x80*-0x26+-0x188*-0x4+-0x672*-0x2)*(_0x49db83-(-0x16b7+0x1ee1+-0x829*0x1)),_0x3fc089,_0x577200,_0x9aef90,_0x4c6948,_0x427d8d,_0x21bd2f;for(_0x577200=-0xa2e+0x1a4f+-0x1*0x1021;_0x577200<_0x49db83;++_0x577200){if(_0x577200&&_0x4cc3fd['readArray'](_0x16b99c),(_0x16b99c[0x2007+0x8b*0x3+-0x21a6]<<0x1*-0x17e3+0x21d8+-0x9ed)+_0x16b99c[0x212b+-0x581*-0x3+-0x31ab]!==_0x5dccca)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'width'),null;for(_0x4c6948=-0xd81+0x147+0xc3a;_0x4c6948<-0xd74+0x107d+0x305*-0x1;++_0x4c6948)for(_0x3fc089=-0xd13+-0x1*0x1630+0x2343;_0x3fc089<_0x5dccca;)if(_0x427d8d=_0x4cc3fd['readU8'](),_0x427d8d>0x1718+-0x5*0xd1+-0x1283){if(_0x427d8d-=0x577*-0x1+0x70b+0x1*-0x114,_0x3fc089+_0x427d8d>_0x5dccca)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x21bd2f=_0x4cc3fd['readU8'](),_0x9aef90=-0xa24+-0x95f+0x9*0x22b;_0x9aef90<_0x427d8d;++_0x9aef90)_0x15c093[_0x1a04a1+_0x4c6948+(0x121*0x14+-0x979+-0x1*0xd17)*_0x3fc089++]=_0x21bd2f;}else{if(_0x427d8d===0x3*-0x851+0x1151+0x7a2||_0x3fc089+_0x427d8d>_0x5dccca)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x9aef90=0x1bad+-0x1df6+0x249;_0x9aef90<_0x427d8d;++_0x9aef90)_0x15c093[_0x1a04a1+_0x4c6948+(0x3*-0x543+0x2*0x1eb+0x3fd*0x3)*_0x3fc089++]=_0x4cc3fd['readU8']();}_0x1a04a1+=_0x5dccca*(0x19e4+-0x16*-0x1d+-0x1c5e)*(_0x15d8ec?-0x897+0x1a9*-0x6+0x128e:-(-0x15d7+-0x13ce+0x29a6));}return _0x15c093;}['_readPixel'+'sFlat'](_0x326c24,_0x27f3ae,_0x2d864d){return _0x326c24['remainingB'+'ytes']===_0x27f3ae*_0x2d864d*(-0x5*-0x5aa+-0x2376+0x728*0x1)?new Uint8Array(_0x326c24['arraybuffe'+'r'],_0x326c24['offset']):null;}}const TS={'repeat':yt,'clamp':ue,'mirror':ip},wS={'nearest':Te,'linear':vt,'nearest_mip_nearest':Kh,'linear_mip_nearest':Qh,'nearest_mip_linear':Zh,'linear_mip_linear':ma},aU={'default':Ds,'rgbm':Zi,'rgbe':mh,'rgbp':Qo,'swizzleGGGR':Jo},nU=function(_0x26ebc0){const _0xd195a2=Xi['calcMipLev'+'elsCount'](_0x26ebc0['_width'],_0x26ebc0['_height']),_0x30f48e=function(_0x583f86){return _0x583f86 instanceof HTMLCanvasElement||_0x583f86 instanceof HTMLImageElement||_0x583f86 instanceof HTMLVideoElement;};if(!(_0x26ebc0['_format']===Ne||_0x26ebc0['_format']===Xt)||_0x26ebc0['_volume']||_0x26ebc0['_compresse'+'d']||_0x26ebc0['_levels']['length']===0x1f5+0x1c7a+-0x5f*0x52||_0x26ebc0['_levels']['length']===_0xd195a2||_0x30f48e(_0x26ebc0['_cubemap']?_0x26ebc0['_levels'][-0x715+0xac3+0x9d*-0x6][0x2014+0x1d1b+0x2a9*-0x17]:_0x26ebc0['_levels'][-0x527*-0x1+-0x337+-0x1*0x1f0]))return;const _0x3ffc0b=function(_0x2b798b,_0x1be5c3,_0x3a5276){const _0x719076=Math['max'](0x12d2*0x2+0x1cfd+-0x854*0x8,_0x2b798b>>-0xc7*-0x1+-0x1d0f+0x1c49),_0x4d0c94=Math['max'](-0x188c*0x1+0xd36+0xb57,_0x1be5c3>>-0xb*-0x15a+0xbc5*0x1+-0x1aa2),_0x5ba821=new _0x3a5276['constructo'+'r'](_0x719076*_0x4d0c94*(-0xb69+0x1a31+-0xec4)),_0x4a29e2=Math['floor'](_0x2b798b/_0x719076),_0xfe8651=Math['floor'](_0x1be5c3/_0x4d0c94),_0x3e8e3f=_0x4a29e2*_0xfe8651;for(let _0x2236d9=-0x47*0x23+-0xaab*0x1+0x1460;_0x2236d9<_0x4d0c94;++_0x2236d9)for(let _0x43e8ce=0x11d6*0x1+0x25*0xbc+-0x2d02;_0x43e8ce<_0x719076;++_0x43e8ce)for(let _0x432850=-0x1781+0xab4*0x2+0x219;_0x432850<-0x384+-0x5d+-0x1*-0x3e5;++_0x432850){let _0x4922a2=-0xf6c+-0x152c+0x2498*0x1;for(let _0x196f74=-0x13*0x16f+-0x2f*-0x9c+-0x167;_0x196f74<_0xfe8651;++_0x196f74)for(let _0x492d2c=0x1699*0x1+-0x1297+-0x402;_0x492d2c<_0x4a29e2;++_0x492d2c)_0x4922a2+=_0x3a5276[(_0x43e8ce*_0x4a29e2+_0x492d2c+(_0x2236d9*_0xfe8651+_0x196f74)*_0x2b798b)*(-0x284+0x685*-0x5+0x2321)+_0x432850];_0x5ba821[(_0x43e8ce+_0x2236d9*_0x719076)*(0x228e+-0xf*-0x16f+0x1*-0x380b)+_0x432850]=_0x4922a2/_0x3e8e3f;}return _0x5ba821;};for(let _0x5b18f4=_0x26ebc0['_levels']['length'];_0x5b18f4<_0xd195a2;++_0x5b18f4){const _0x80efa3=Math['max'](-0x1efb+-0x3*-0x9d6+0x17a,_0x26ebc0['_width']>>_0x5b18f4-(0xa*-0x35f+0x2*0x9fd+0xdbd*0x1)),_0x1622d0=Math['max'](-0x10*-0x10c+0x56*-0x2+-0x1013,_0x26ebc0['_height']>>_0x5b18f4-(-0x735+-0xa41*-0x1+0x1*-0x30b));if(_0x26ebc0['_cubemap']){const _0x529cf7=[];for(let _0x10bfdf=0x1e*-0x113+0x743+0x18f7*0x1;_0x10bfdf<0x788+0x56+-0x7d8;++_0x10bfdf)_0x529cf7['push'](_0x3ffc0b(_0x80efa3,_0x1622d0,_0x26ebc0['_levels'][_0x5b18f4-(0x1*0x12f5+0x2*-0x103d+0xd86)][_0x10bfdf]));_0x26ebc0['_levels']['push'](_0x529cf7);}else _0x26ebc0['_levels']['push'](_0x3ffc0b(_0x80efa3,_0x1622d0,_0x26ebc0['_levels'][_0x5b18f4-(-0x854+-0xd4a+0x159f)]));}_0x26ebc0['_levelsUpd'+'ated']=_0x26ebc0['_cubemap']?[[!(0x1*0x2627+-0x1*-0x32+-0x2659*0x1),!(0x4*0x8db+0x2*0xea7+-0x40ba),!(-0x1240+-0x1528+0x68*0x61),!(0x18c+0x1b05+-0x1c91),!(-0x3*-0x32b+0xdaa+-0x7b9*0x3),!(-0x6*-0x3a3+0x41*-0x61+0x2cf)]]:[!(-0xc40+0x1ae7+0xea7*-0x1)];};class oU extends Qe{constructor(_0x2a319b){super(_0x2a319b,'texture');const _0x235f3b=_0x2a319b['assets'],_0x1c5073=_0x2a319b['graphicsDe'+'vice'];this['_device']=_0x1c5073,this['_assets']=_0x235f3b,this['imgParser']=new Zk(_0x235f3b,_0x1c5073),this['parsers']={'dds':new iU(_0x235f3b),'ktx':new eU(_0x235f3b),'ktx2':new sU(_0x235f3b,_0x1c5073),'basis':new qk(_0x235f3b,_0x1c5073),'hdr':new rU(_0x235f3b)};}set['crossOrigi'+'n'](_0x733518){this['imgParser']['crossOrigi'+'n']=_0x733518;}get['crossOrigi'+'n'](){return this['imgParser']['crossOrigi'+'n'];}set['maxRetries'](_0x41647a){this['imgParser']['maxRetries']=_0x41647a;for(const _0x128b4d in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x128b4d)&&(this['parsers'][_0x128b4d]['maxRetries']=_0x41647a);}get['maxRetries'](){return this['imgParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x4dd536){return _0x4dd536['indexOf']('?')>=0x1442+-0x1cfb+0x8b9?_0x4dd536['split']('?')[-0x1*0x5ab+0x1*-0x12d+0x36c*0x2]:_0x4dd536;}['_getParser'](_0x4f2d64){const _0x26ef7c=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x4f2d64))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x26ef7c]||this['imgParser'];}['_getTextur'+'eOptions'](_0x47c943){var _0x6b632e;const _0x553a31={'profilerHint':Pr};if(_0x47c943){((_0x6b632e=_0x47c943['name'])==null?void(0xa0e+0x13a1+-0x1daf):_0x6b632e['length'])>0xf*0x23d+0x1c40+-0x3dd3*0x1&&(_0x553a31['name']=_0x47c943['name']);const _0x4442ee=_0x47c943['data'];_0x4442ee['hasOwnProp'+'erty']('minfilter')&&(_0x553a31['minFilter']=wS[_0x4442ee['minfilter']]),_0x4442ee['hasOwnProp'+'erty']('magfilter')&&(_0x553a31['magFilter']=wS[_0x4442ee['magfilter']]),_0x4442ee['hasOwnProp'+'erty']('addressu')&&(_0x553a31['addressU']=TS[_0x4442ee['addressu']]),_0x4442ee['hasOwnProp'+'erty']('addressv')&&(_0x553a31['addressV']=TS[_0x4442ee['addressv']]),_0x4442ee['hasOwnProp'+'erty']('mipmaps')&&(_0x553a31['mipmaps']=_0x4442ee['mipmaps']),_0x4442ee['hasOwnProp'+'erty']('anisotropy')&&(_0x553a31['anisotropy']=_0x4442ee['anisotropy']),_0x4442ee['hasOwnProp'+'erty']('flipY')&&(_0x553a31['flipY']=!!_0x4442ee['flipY']),_0x4442ee['hasOwnProp'+'erty']('srgb')&&(_0x553a31['srgb']=!!_0x4442ee['srgb']),_0x553a31['type']=Ds,_0x4442ee['hasOwnProp'+'erty']('type')?_0x553a31['type']=aU[_0x4442ee['type']]:_0x4442ee['hasOwnProp'+'erty']('rgbm')&&_0x4442ee['rgbm']?_0x553a31['type']=Zi:_0x47c943['file']&&(_0x47c943['file']['opt']&0xe3*-0x11+-0x4f*0x70+0x31ab)!==-0x5*-0x1ab+-0x15c7*0x1+-0x50*-0x2b&&(_0x553a31['type']=Jo);}return _0x553a31;}['load'](_0x127b8f,_0x5783ee,_0x556377){typeof _0x127b8f=='string'&&(_0x127b8f={'load':_0x127b8f,'original':_0x127b8f}),this['_getParser'](_0x127b8f['original'])['load'](_0x127b8f,_0x5783ee,_0x556377);}['open'](_0x1ecbad,_0x84b745,_0x372881){if(!_0x1ecbad)return;const _0x490c6b=this['_getTextur'+'eOptions'](_0x372881);let _0x12c612=this['_getParser'](_0x1ecbad)['open'](_0x1ecbad,_0x84b745,this['_device'],_0x490c6b);return _0x12c612===null?_0x12c612=new _e(this['_device'],{'width':0x4,'height':0x4,'format':Cr}):(nU(_0x12c612),_0x84b745['unswizzled'+'GGGR']&&(_0x372881['file']['variants']['basis']['opt']&=-(-0x1*-0x10d8+0x11ab+-0x6*0x5bf))),_0x12c612;}['patch'](_0x34cf78,_0x2aeec5){const _0x1ee4eb=_0x34cf78['resource'];if(!_0x1ee4eb)return;const _0x879211=this['_getTextur'+'eOptions'](_0x34cf78);for(const _0xb297df of Object['keys'](_0x879211))_0x1ee4eb[_0xb297df]=_0x879211[_0xb297df];}}const lU='inline',cU='immersive-'+'vr',$o='immersive-'+'ar',ES='viewer',hU='left',dU='cpu-optimi'+'zed',P0='gpu-optimi'+'zed',M0='luminance-'+'alpha',D0='unsigned-s'+'hort',I0='float32';class fU{constructor(_0x4e9ade){h(this,'_manager'),h(this,'_supported',Ae['browser']&&!!window['XRDOMOverl'+'ayState']),h(this,'_root',null),this['_manager']=_0x4e9ade;}get['supported'](){return this['_supported'];}get['available'](){return this['_supported']&&this['_manager']['active']&&this['_manager']['_session']['domOverlay'+'State']!==null;}get['state'](){return!this['_supported']||!this['_manager']['active']||!this['_manager']['_session']['domOverlay'+'State']?null:this['_manager']['_session']['domOverlay'+'State']['type'];}set['root'](_0x3c7bac){!this['_supported']||this['_manager']['active']||(this['_root']=_0x3c7bac);}get['root'](){return this['_root'];}}const Rc=[],bS=[];class ju extends me{constructor(_0x28dfb9,_0x821327,_0x5a8928,_0x4d201c=null){super(),h(this,'manager'),h(this,'_xrHitTest'+'Source'),h(this,'_transient'),h(this,'_inputSour'+'ce'),(this['manager']=_0x28dfb9,this['_xrHitTest'+'Source']=_0x821327,this['_transient']=_0x5a8928,this['_inputSour'+'ce']=_0x4d201c);}['remove'](){if(!this['_xrHitTest'+'Source'])return;const _0xdf7781=this['manager']['hitTest']['sources'],_0x1d8979=_0xdf7781['indexOf'](this);_0x1d8979!==-(-0x7bc*0x1+-0xf6+0x8b3)&&_0xdf7781['splice'](_0x1d8979,0x1714+-0x1*-0x22d+0x1*-0x1940),this['onStop']();}['onStop'](){this['_xrHitTest'+'Source']['cancel'](),this['_xrHitTest'+'Source']=null,this['fire']('remove'),this['manager']['hitTest']['fire']('remove',this);}['update'](_0x16b86b){if(this['_transient']){const _0x1b7bdf=_0x16b86b['getHitTest'+'ResultsFor'+'TransientI'+'nput'](this['_xrHitTest'+'Source']);for(let _0x49faac=0x1d60+-0x1db4+0x54;_0x49faac<_0x1b7bdf['length'];_0x49faac++){const _0x11784b=_0x1b7bdf[_0x49faac];if(!_0x11784b['results']['length'])continue;let _0x21061e;_0x11784b['inputSourc'+'e']&&(_0x21061e=this['manager']['input']['_getByInpu'+'tSource'](_0x11784b['inputSourc'+'e'])),this['updateHitR'+'esults'](_0x11784b['results'],_0x21061e);}}else{const _0x13164a=_0x16b86b['getHitTest'+'Results'](this['_xrHitTest'+'Source']);if(!_0x13164a['length'])return;this['updateHitR'+'esults'](_0x13164a);}}['updateHitR'+'esults'](_0x260983,_0x3da332){if(this['_inputSour'+'ce']&&this['_inputSour'+'ce']!==_0x3da332)return;const _0x32b737=Rc['pop']()??new D();_0x3da332?_0x32b737['copy'](_0x3da332['getOrigin']()):_0x32b737['copy'](this['manager']['camera']['getPositio'+'n']());let _0x5c79da=(-0x10b1+-0x920+0x5*0x52a)/(0x18d9+0x224f+-0x3b28),_0x33c4d9=null;const _0x2b0435=Rc['pop']()??new D(),_0xc78bfb=bS['pop']()??new le();for(let _0x3c6510=-0xb26+-0x21*-0xb3+-0x1*0xbed;_0x3c6510<_0x260983['length'];_0x3c6510++){const _0x48e0a9=_0x260983[_0x3c6510]['getPose'](this['manager']['_reference'+'Space']),_0x2ffd4a=_0x32b737['distance'](_0x48e0a9['transform']['position']);_0x2ffd4a>=_0x5c79da||(_0x5c79da=_0x2ffd4a,_0x33c4d9=_0x260983[_0x3c6510],_0x2b0435['copy'](_0x48e0a9['transform']['position']),_0xc78bfb['copy'](_0x48e0a9['transform']['orientatio'+'n']));}this['fire']('result',_0x2b0435,_0xc78bfb,_0x3da332||this['_inputSour'+'ce'],_0x33c4d9),this['manager']['hitTest']['fire']('result',this,_0x2b0435,_0xc78bfb,_0x3da332||this['_inputSour'+'ce'],_0x33c4d9),Rc['push'](_0x32b737),Rc['push'](_0x2b0435),bS['push'](_0xc78bfb);}}h(ju,'EVENT_REMO'+'VE','remove'),h(ju,'EVENT_RESU'+'LT','result');class jr extends me{constructor(_0x1a612f){super(),h(this,'manager'),h(this,'_supported',Ae['browser']&&!!(window['XRSession']&&window['XRSession']['prototype']['requestHit'+'TestSource'])),h(this,'_available',!(0xb*-0xd7+0x2200+-0x2*0xc61)),h(this,'_checkingA'+'vailabilit'+'y',!(-0x1*0x2148+-0x1ec7+0x4010)),h(this,'sources',[]),(this['manager']=_0x1a612f,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){if(this['manager']['session']['enabledFea'+'tures']){const _0x3416a5=this['manager']['session']['enabledFea'+'tures']['indexOf']('hit-test')!==-(0xbc+0x1*0x247f+-0x253a);if(!_0x3416a5)return;this['_available']=_0x3416a5,this['fire']('available');}else this['_checkingA'+'vailabilit'+'y']||(this['_checkingA'+'vailabilit'+'y']=!(-0x12cc+-0x15*0x7+0x135f),this['manager']['session']['requestRef'+'erenceSpac'+'e'](ES)['then'](_0x3d1e7b=>{this['manager']['session']['requestHit'+'TestSource']({'space':_0x3d1e7b})['then'](_0x449216=>{_0x449216['cancel'](),this['manager']['active']&&(this['_available']=!(0x73f*0x3+-0x4*0x305+-0x9a9),this['fire']('available'));})['catch'](()=>{});})['catch'](()=>{}));}['_onSession'+'End'](){if(this['_available']){this['_available']=!(-0x9d*-0x32+-0xbe*-0x11+-0x2b47);for(let _0x590a76=0x20dd+-0x23b7+0x2*0x16d;_0x590a76<this['sources']['length'];_0x590a76++)this['sources'][_0x590a76]['onStop']();this['sources']=[],this['fire']('unavailabl'+'e');}}['start'](_0x5776dd={}){var _0x34ee3c,_0x3c8b0f;if(!this['_supported']){(_0x34ee3c=_0x5776dd['callback'])==null||_0x34ee3c['call'](_0x5776dd,new Error('XR\x20HitTest'+'\x20is\x20not\x20su'+'pported'),null);return;}if(!this['_available']){(_0x3c8b0f=_0x5776dd['callback'])==null||_0x3c8b0f['call'](_0x5776dd,new Error('XR\x20HitTest'+'\x20is\x20not\x20av'+'ailable'),null);return;}!_0x5776dd['profile']&&!_0x5776dd['spaceType']&&(_0x5776dd['spaceType']=ES);let _0x5d6692;const _0x939114=_0x5776dd['offsetRay'];if(_0x939114){const _0x347ed6=new DOMPoint(_0x939114['origin']['x'],_0x939114['origin']['y'],_0x939114['origin']['z'],-0x1*0x161b+0x1*-0x170f+0x2d2b),_0x3ccefc=new DOMPoint(_0x939114['direction']['x'],_0x939114['direction']['y'],_0x939114['direction']['z'],0x2f5*-0x5+-0xb19*-0x1+0x3b0);_0x5d6692=new XRRay(_0x347ed6,_0x3ccefc);}const _0x420bec=_0x5776dd['callback'];_0x5776dd['spaceType']?this['manager']['session']['requestRef'+'erenceSpac'+'e'](_0x5776dd['spaceType'])['then'](_0x35781e=>{if(!this['manager']['session']){const _0x1d280d=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(2)');_0x420bec&&_0x420bec(_0x1d280d),this['fire']('error',_0x1d280d);return;}this['manager']['session']['requestHit'+'TestSource']({'space':_0x35781e,'entityTypes':_0x5776dd['entityType'+'s']||void(-0x1*0x183b+-0x181+0xb7*0x24),'offsetRay':_0x5d6692})['then'](_0x2ae2a9=>{this['_onHitTest'+'Source'](_0x2ae2a9,!(0x499+0x4b*0x67+-0x22c5),_0x5776dd['inputSourc'+'e'],_0x420bec);})['catch'](_0x4ee73a=>{_0x420bec&&_0x420bec(_0x4ee73a),this['fire']('error',_0x4ee73a);});})['catch'](_0x4f8f30=>{_0x420bec&&_0x420bec(_0x4f8f30),this['fire']('error',_0x4f8f30);}):this['manager']['session']['requestHit'+'TestSource'+'ForTransie'+'ntInput']({'profile':_0x5776dd['profile'],'entityTypes':_0x5776dd['entityType'+'s']||void(0x65*0xd+-0x2308+0x1de7),'offsetRay':_0x5d6692})['then'](_0x2b0b23=>{this['_onHitTest'+'Source'](_0x2b0b23,!(-0x1*0x2fe+-0x23d5*0x1+0x26d3),_0x5776dd['inputSourc'+'e'],_0x420bec);})['catch'](_0x2df9d5=>{_0x420bec&&_0x420bec(_0x2df9d5),this['fire']('error',_0x2df9d5);});}['_onHitTest'+'Source'](_0x529bc1,_0x2cdcd9,_0xf09648,_0x35390d){if(!this['manager']['session']){_0x529bc1['cancel']();const _0x1a245a=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(3)');_0x35390d&&_0x35390d(_0x1a245a),this['fire']('error',_0x1a245a);return;}const _0x57ccd4=new ju(this['manager'],_0x529bc1,_0x2cdcd9,_0xf09648??null);this['sources']['push'](_0x57ccd4),_0x35390d&&_0x35390d(null,_0x57ccd4),this['fire']('add',_0x57ccd4);}['update'](_0x32bbfc){if(this['_available']){for(let _0x4c19f2=0x1*-0x271+-0x2c*0xa9+0xa7f*0x3;_0x4c19f2<this['sources']['length'];_0x4c19f2++)this['sources'][_0x4c19f2]['update'](_0x32bbfc);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}}h(jr,'EVENT_AVAI'+'LABLE','available'),h(jr,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(jr,'EVENT_ADD','add'),h(jr,'EVENT_REMO'+'VE','remove'),h(jr,'EVENT_RESU'+'LT','result'),h(jr,'EVENT_ERRO'+'R','error');class Yu extends me{constructor(_0x1c097a,_0x5c9919){super(),h(this,'_image'),h(this,'_width'),h(this,'_bitmap',null),h(this,'_measuredW'+'idth',0x359*0x5+0x1cce+0x83*-0x59),h(this,'_trackable',!(-0x540+0x132f+0xdee*-0x1)),h(this,'_tracking',!(0x255f+0x4d9+-0x65*0x6b)),h(this,'_emulated',!(0x697+-0x59a*0x1+0xe*-0x12)),h(this,'_pose',null),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_image']=_0x1c097a,this['_width']=_0x5c9919);}get['image'](){return this['_image'];}set['width'](_0xddd8f9){this['_width']=_0xddd8f9;}get['width'](){return this['_width'];}get['trackable'](){return this['_trackable'];}get['tracking'](){return this['_tracking'];}get['emulated'](){return this['_emulated'];}['prepare'](){return this['_bitmap']?{'image':this['_bitmap'],'widthInMeters':this['_width']}:createImageBitmap(this['_image'])['then'](_0x3a1ea5=>(this['_bitmap']=_0x3a1ea5,{'image':this['_bitmap'],'widthInMeters':this['_width']}));}['destroy'](){this['_image']=null,this['_pose']=null,this['_bitmap']&&(this['_bitmap']['close'](),this['_bitmap']=null);}['getPositio'+'n'](){return this['_pose']&&this['_position']['copy'](this['_pose']['transform']['position']),this['_position'];}['getRotatio'+'n'](){return this['_pose']&&this['_rotation']['copy'](this['_pose']['transform']['orientatio'+'n']),this['_rotation'];}}h(Yu,'EVENT_TRAC'+'KED','tracked'),h(Yu,'EVENT_UNTR'+'ACKED','untracked');class L0 extends me{constructor(_0x2868aa){super(),h(this,'_manager'),h(this,'_supported',Ae['browser']&&!!window['XRImageTra'+'ckingResul'+'t']),h(this,'_available',!(-0x5b*0x7+-0x1*0x108f+0x130d*0x1)),h(this,'_images',[]),(this['_manager']=_0x2868aa,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['add'](_0x1cd017,_0x2771cd){if(!this['_supported']||this['_manager']['active'])return null;const _0x31eb7c=new Yu(_0x1cd017,_0x2771cd);return this['_images']['push'](_0x31eb7c),_0x31eb7c;}['remove'](_0x4fb877){if(this['_manager']['active'])return;const _0x2743f5=this['_images']['indexOf'](_0x4fb877);_0x2743f5!==-(-0x1*0x229f+0x26f5+-0x1*0x455)&&(_0x4fb877['destroy'](),this['_images']['splice'](_0x2743f5,0x133*-0xb+-0x14f7+0x2229));}['_onSession'+'Start'](){this['_manager']['session']['getTracked'+'ImageScore'+'s']()['then'](_0x2e460e=>{this['_available']=!(0x13f2+0x2312+-0x3704);for(let _0x351620=-0x2b*0xa4+-0x42c*-0x2+0x1334;_0x351620<_0x2e460e['length'];_0x351620++)this['_images'][_0x351620]['_trackable']=_0x2e460e[_0x351620]==='trackable';})['catch'](_0x38d701=>{this['_available']=!(-0x1*-0x635+-0x5*0x26b+0x5e3),this['fire']('error',_0x38d701);});}['_onSession'+'End'](){this['_available']=!(0xa5*0x11+0x665*0x1+0x1159*-0x1);for(let _0x407281=-0x9e9+-0x963+-0xd*-0x17c;_0x407281<this['_images']['length'];_0x407281++){const _0x1458b1=this['_images'][_0x407281];_0x1458b1['_pose']=null,_0x1458b1['_measuredW'+'idth']=-0x1b1b*-0x1+0x2f+-0x1b4a,_0x1458b1['_tracking']&&(_0x1458b1['_tracking']=!(0x1408+0x15b*-0xc+0x3*-0x141),_0x1458b1['fire']('untracked'));}}['prepareIma'+'ges'](_0x2a3bfa){this['_images']['length']?Promise['all'](this['_images']['map'](_0x4dd1a6=>_0x4dd1a6['prepare']()))['then'](_0x11294c=>{_0x2a3bfa(null,_0x11294c);})['catch'](_0x4bbdf5=>{_0x2a3bfa(_0x4bbdf5,null);}):_0x2a3bfa(null,null);}['update'](_0x2211aa){if(!this['_available'])return;const _0x517cc8=_0x2211aa['getImageTr'+'ackingResu'+'lts'](),_0x351610={};for(let _0x43dde8=0x18d2+0x123b+-0x2b0d;_0x43dde8<_0x517cc8['length'];_0x43dde8++){_0x351610[_0x517cc8[_0x43dde8]['index']]=_0x517cc8[_0x43dde8];const _0x3f117a=this['_images'][_0x517cc8[_0x43dde8]['index']];_0x3f117a['_emulated']=_0x517cc8[_0x43dde8]['trackingSt'+'ate']==='emulated',_0x3f117a['_measuredW'+'idth']=_0x517cc8[_0x43dde8]['measuredWi'+'dthInMeter'+'s'],_0x3f117a['_pose']=_0x2211aa['getPose'](_0x517cc8[_0x43dde8]['imageSpace'],this['_manager']['_reference'+'Space']);}for(let _0x4019a9=-0x1705+0x10*0x201+-0x90b;_0x4019a9<this['_images']['length'];_0x4019a9++)this['_images'][_0x4019a9]['_tracking']&&!_0x351610[_0x4019a9]?(this['_images'][_0x4019a9]['_tracking']=!(0x1*0x42e+-0x6af*0x3+-0x1*-0xfe0),this['_images'][_0x4019a9]['fire']('untracked')):!this['_images'][_0x4019a9]['_tracking']&&_0x351610[_0x4019a9]&&(this['_images'][_0x4019a9]['_tracking']=!(-0x70d+-0x4*0x210+0x1*0xf4d),this['_images'][_0x4019a9]['fire']('tracked'));}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['images'](){return this['_images'];}}h(L0,'EVENT_ERRO'+'R','error');class uU{constructor(_0x1376eb,_0x20f7c3){h(this,'_index'),h(this,'_hand'),h(this,'_joints',[]),h(this,'_tip',null),(this['_index']=_0x1376eb,this['_hand']=_0x20f7c3,this['_hand']['_fingers']['push'](this));}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['joints'](){return this['_joints'];}get['tip'](){return this['_tip'];}}const AS=Ae['browser']&&window['XRHand']?['thumb-tip','index-fing'+'er-tip','middle-fin'+'ger-tip','ring-finge'+'r-tip','pinky-fing'+'er-tip']:[],R0={};for(let l=-0x237f+-0x2f*0x65+0x360a;l<AS['length'];l++)R0[AS[l]]=!(-0x2676+-0x1063*0x1+-0x1*-0x36d9);class CS{constructor(_0x55d899,_0x1f5d4a,_0xd1f4f0,_0x14489e=null){h(this,'_index'),h(this,'_id'),h(this,'_hand'),h(this,'_finger'),h(this,'_wrist'),h(this,'_tip'),h(this,'_radius',null),h(this,'_localTran'+'sform',new te()),h(this,'_worldTran'+'sform',new te()),h(this,'_localPosi'+'tion',new D()),h(this,'_localRota'+'tion',new le()),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_dirtyLoca'+'l',!(0x1*0x1d7b+0xbcf*0x1+-0x23*0x12e)),(this['_index']=_0x55d899,this['_id']=_0x1f5d4a,this['_hand']=_0xd1f4f0,this['_finger']=_0x14489e,this['_wrist']=_0x1f5d4a==='wrist',this['_tip']=this['_finger']&&!!R0[_0x1f5d4a]);}['update'](_0x38838e){this['_dirtyLoca'+'l']=!(0x16b7+0x1ec6+0x1*-0x357d),this['_radius']=_0x38838e['radius'],this['_localPosi'+'tion']['copy'](_0x38838e['transform']['position']),this['_localRota'+'tion']['copy'](_0x38838e['transform']['orientatio'+'n']);}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(0x1*0x851+0x41*-0x6c+0x131c),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],D['ONE']));const _0x5d9528=this['_hand']['_manager']['camera']['parent'];_0x5d9528?this['_worldTran'+'sform']['mul2'](_0x5d9528['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['getPositio'+'n'](){return this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position'];}['getRotatio'+'n'](){return this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation'];}get['id'](){return this['_id'];}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['finger'](){return this['_finger'];}get['wrist'](){return this['_wrist'];}get['tip'](){return this['_tip'];}get['radius'](){return this['_radius']||-0x19*-0xba+0x660+-0x188a+0.005;}}let rh=[];const Wr=new D(),Oc=new D(),PS=new D();Ae['browser']&&window['XRHand']&&(rh=[['thumb-meta'+'carpal','thumb-phal'+'anx-proxim'+'al','thumb-phal'+'anx-distal','thumb-tip'],['index-fing'+'er-metacar'+'pal','index-fing'+'er-phalanx'+'-proximal','index-fing'+'er-phalanx'+'-intermedi'+'ate','index-fing'+'er-phalanx'+'-distal','index-fing'+'er-tip'],['middle-fin'+'ger-metaca'+'rpal','middle-fin'+'ger-phalan'+'x-proximal','middle-fin'+'ger-phalan'+'x-intermed'+'iate','middle-fin'+'ger-phalan'+'x-distal','middle-fin'+'ger-tip'],['ring-finge'+'r-metacarp'+'al','ring-finge'+'r-phalanx-'+'proximal','ring-finge'+'r-phalanx-'+'intermedia'+'te','ring-finge'+'r-phalanx-'+'distal','ring-finge'+'r-tip'],['pinky-fing'+'er-metacar'+'pal','pinky-fing'+'er-phalanx'+'-proximal','pinky-fing'+'er-phalanx'+'-intermedi'+'ate','pinky-fing'+'er-phalanx'+'-distal','pinky-fing'+'er-tip']]);class Ku extends me{constructor(_0x3053a0){super(),h(this,'_manager'),h(this,'_inputSour'+'ce'),h(this,'_tracking',!(0x6e*0x13+0x1551+-0x1d7a)),h(this,'_fingers',[]),h(this,'_joints',[]),h(this,'_jointsByI'+'d',{}),h(this,'_tips',[]),h(this,'_wrist',null);const _0x2d5314=_0x3053a0['_xrInputSo'+'urce']['hand'];if(this['_manager']=_0x3053a0['_manager'],this['_inputSour'+'ce']=_0x3053a0,_0x2d5314['get']('wrist')){const _0x42ef53=new CS(-0x4d9+0x8a9+-0x3d0,'wrist',this,null);this['_wrist']=_0x42ef53,this['_joints']['push'](_0x42ef53),this['_jointsByI'+'d']['wrist']=_0x42ef53;}for(let _0x4f4fa=0x1c9*0x1+-0x645+0x47c;_0x4f4fa<rh['length'];_0x4f4fa++){const _0x311935=new uU(_0x4f4fa,this);for(let _0x22ce5f=0x1*0x1e63+-0x1*-0x21fa+-0x405d;_0x22ce5f<rh[_0x4f4fa]['length'];_0x22ce5f++){const _0x153101=rh[_0x4f4fa][_0x22ce5f];if(!_0x2d5314['get'](_0x153101))continue;const _0x91a9d1=new CS(_0x22ce5f,_0x153101,this,_0x311935);this['_joints']['push'](_0x91a9d1),this['_jointsByI'+'d'][_0x153101]=_0x91a9d1,_0x91a9d1['tip']&&(this['_tips']['push'](_0x91a9d1),_0x311935['_tip']=_0x91a9d1),_0x311935['_joints']['push'](_0x91a9d1);}}}['update'](_0xa14ca6){const _0x172d56=this['_inputSour'+'ce']['_xrInputSo'+'urce'];for(let _0x2c18f0=-0x124d*-0x1+0xb*-0x2a0+0xa93;_0x2c18f0<this['_joints']['length'];_0x2c18f0++){const _0x4226cf=this['_joints'][_0x2c18f0],_0x44bce1=_0x172d56['hand']['get'](_0x4226cf['_id']);if(_0x44bce1){let _0x368abd;if(_0xa14ca6['session']['visibility'+'State']!=='hidden'&&(_0x368abd=_0xa14ca6['getJointPo'+'se'](_0x44bce1,this['_manager']['_reference'+'Space'])),_0x368abd)_0x4226cf['update'](_0x368abd),_0x4226cf['wrist']&&!this['_tracking']&&(this['_tracking']=!(0x1cd*-0x15+-0x1669+0x3c3a),this['fire']('tracking'));else{if(_0x4226cf['wrist']){this['_tracking']&&(this['_tracking']=!(-0x10f3*0x1+0x26e+-0x1*-0xe86),this['fire']('trackinglo'+'st'));break;}}}}const _0x528343=this['_jointsByI'+'d']['thumb-meta'+'carpal'],_0x4cf8b5=this['_jointsByI'+'d']['thumb-tip'],_0x138d1c=this['_jointsByI'+'d']['index-fing'+'er-phalanx'+'-proximal'],_0x23bd35=this['_jointsByI'+'d']['index-fing'+'er-tip'],_0x81decc=this['_jointsByI'+'d']['ring-finge'+'r-phalanx-'+'proximal'],_0x4d0702=this['_jointsByI'+'d']['pinky-fing'+'er-phalanx'+'-proximal'];if(_0x528343&&_0x4cf8b5&&_0x138d1c&&_0x23bd35&&_0x81decc&&_0x4d0702){this['_inputSour'+'ce']['_dirtyRay']=!(-0x8f4+-0x726*0x2+-0x10*-0x174),this['_inputSour'+'ce']['_rayLocal']['origin']['lerp'](_0x4cf8b5['_localPosi'+'tion'],_0x23bd35['_localPosi'+'tion'],-0x24fd+-0x1ed9+-0x2*-0x21eb+0.5);let _0x4e60c4=_0x528343,_0x878850=_0x4d0702;if(this['_inputSour'+'ce']['handedness']===hU){const _0x5db542=_0x4e60c4;_0x4e60c4=_0x878850,_0x878850=_0x5db542;}Wr['sub2'](_0x4e60c4['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),Oc['sub2'](_0x878850['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),PS['cross'](Wr,Oc)['normalize'](),Wr['lerp'](_0x138d1c['_localPosi'+'tion'],_0x81decc['_localPosi'+'tion'],-0x899*-0x2+-0x329*0x1+-0xe09+0.5),Wr['sub'](this['_wrist']['_localPosi'+'tion'])['normalize'](),this['_inputSour'+'ce']['_rayLocal']['direction']['lerp'](PS,Wr,-0x1345+0x4c6+0xe7f+0.5)['normalize']();}this['_fingerIsC'+'losed'](-0x992*-0x1+-0xa0a*0x2+0xd*0xcf)&&this['_fingerIsC'+'losed'](0x11*0x17f+-0x1bac+0x23f)&&this['_fingerIsC'+'losed'](-0x6d*0x22+0x29*0x1d+-0x4*-0x276)&&this['_fingerIsC'+'losed'](0x1349+0x1fcc+-0x3311)?this['_inputSour'+'ce']['_squeezing']||(this['_inputSour'+'ce']['_squeezing']=!(0x1276+0x87b+0x273*-0xb),this['_inputSour'+'ce']['fire']('squeezesta'+'rt'),this['_manager']['input']['fire']('squeezesta'+'rt',this['_inputSour'+'ce'])):this['_inputSour'+'ce']['_squeezing']&&(this['_inputSour'+'ce']['_squeezing']=!(-0x202f+0x2056+-0x26),this['_inputSour'+'ce']['fire']('squeeze'),this['_manager']['input']['fire']('squeeze',this['_inputSour'+'ce']),this['_inputSour'+'ce']['fire']('squeezeend'),this['_manager']['input']['fire']('squeezeend',this['_inputSour'+'ce']));}['_fingerIsC'+'losed'](_0x393edf){const _0x485c3d=this['_fingers'][_0x393edf];return Wr['sub2'](_0x485c3d['joints'][0x246*-0x9+0x25cd+-0x1157]['_localPosi'+'tion'],_0x485c3d['joints'][0x106*-0x9+-0x1*0x2433+0x2d6a]['_localPosi'+'tion'])['normalize'](),Oc['sub2'](_0x485c3d['joints'][0x2e*-0x15+0xcb*0x1e+0x1402*-0x1]['_localPosi'+'tion'],_0x485c3d['joints'][0xb66*-0x2+-0x1*-0x25c7+-0x2*0x77c]['_localPosi'+'tion'])['normalize'](),Wr['dot'](Oc)<-(-0x2f*-0xb+0x3be*0x7+0x1*-0x1c37+0.8);}['getJointBy'+'Id'](_0x2e2598){return this['_jointsByI'+'d'][_0x2e2598]||null;}get['fingers'](){return this['_fingers'];}get['joints'](){return this['_joints'];}get['tips'](){return this['_tips'];}get['wrist'](){return this['_wrist'];}get['tracking'](){return this['_tracking'];}}h(Ku,'EVENT_TRAC'+'KING','tracking'),h(Ku,'EVENT_TRAC'+'KINGLOST','trackinglo'+'st');const MS=new D(),DS=new le();let pU=0x3*0x91f+0x2*0xb16+-0x3189;class Qt extends me{constructor(_0x1e9583,_0x45923a){super(),h(this,'_id'),h(this,'_manager'),h(this,'_xrInputSo'+'urce'),h(this,'_ray',new Dn()),h(this,'_rayLocal',new Dn()),h(this,'_grip',!(0x1*-0x24cb+-0x403*-0x4+-0x2*-0xa60)),h(this,'_hand',null),h(this,'_velocitie'+'sAvailable',!(0x650+-0x1*-0x1b9f+0x65*-0x56)),h(this,'_velocitie'+'sTimestamp',de()),h(this,'_localTran'+'sform',null),h(this,'_worldTran'+'sform',null),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_localPosi'+'tion',null),h(this,'_localPosi'+'tionLast',null),h(this,'_localRota'+'tion',null),h(this,'_linearVel'+'ocity',null),h(this,'_dirtyLoca'+'l',!(-0xe25+-0x3*0x213+0x145e)),h(this,'_dirtyRay',!(-0x75*0x3a+0xfb5*-0x2+0x39ed*0x1)),h(this,'_selecting',!(-0x156b+0x3*-0x5f3+-0x1*-0x2745)),h(this,'_squeezing',!(0x1f0*-0x1+-0x7*-0x1af+-0x9d8)),h(this,'_elementIn'+'put',!(-0x2434+-0x1*0xdfb+0x1bb*0x1d)),h(this,'_elementEn'+'tity',null),h(this,'_hitTestSo'+'urces',[]),(this['_id']=++pU,this['_manager']=_0x1e9583,this['_xrInputSo'+'urce']=_0x45923a,_0x45923a['hand']&&(this['_hand']=new Ku(this)));}get['id'](){return this['_id'];}get['inputSourc'+'e'](){return this['_xrInputSo'+'urce'];}get['targetRayM'+'ode'](){return this['_xrInputSo'+'urce']['targetRayM'+'ode'];}get['handedness'](){return this['_xrInputSo'+'urce']['handedness'];}get['profiles'](){return this['_xrInputSo'+'urce']['profiles'];}get['grip'](){return this['_grip'];}get['hand'](){return this['_hand'];}get['gamepad'](){return this['_xrInputSo'+'urce']['gamepad']||null;}get['selecting'](){return this['_selecting'];}get['squeezing'](){return this['_squeezing'];}set['elementInp'+'ut'](_0x5124b9){this['_elementIn'+'put']!==_0x5124b9&&(this['_elementIn'+'put']=_0x5124b9,this['_elementIn'+'put']||(this['_elementEn'+'tity']=null));}get['elementInp'+'ut'](){return this['_elementIn'+'put'];}get['elementEnt'+'ity'](){return this['_elementEn'+'tity'];}get['hitTestSou'+'rces'](){return this['_hitTestSo'+'urces'];}['update'](_0x362dee){if(this['_hand'])this['_hand']['update'](_0x362dee);else{const _0x2e8b9a=this['_xrInputSo'+'urce']['gripSpace'];if(_0x2e8b9a){const _0x16c1b8=_0x362dee['getPose'](_0x2e8b9a,this['_manager']['_reference'+'Space']);if(_0x16c1b8){this['_grip']||(this['_grip']=!(0x2411+0x1602+0x1*-0x3a13),this['_localTran'+'sform']=new te(),this['_worldTran'+'sform']=new te(),this['_localPosi'+'tionLast']=new D(),this['_localPosi'+'tion']=new D(),this['_localRota'+'tion']=new le(),this['_linearVel'+'ocity']=new D());const _0x7f27da=de(),_0x1ae1c6=(_0x7f27da-this['_velocitie'+'sTimestamp'])/(-0x1099+0x2056+-0xbd5);this['_velocitie'+'sTimestamp']=_0x7f27da,this['_dirtyLoca'+'l']=!(0x2051+-0x1c68+-0x3e9),this['_localPosi'+'tionLast']['copy'](this['_localPosi'+'tion']),this['_localPosi'+'tion']['copy'](_0x16c1b8['transform']['position']),this['_localRota'+'tion']['copy'](_0x16c1b8['transform']['orientatio'+'n']),this['_velocitie'+'sAvailable']=!(-0x3d1+0x4*-0x1a3+-0x7*-0x17b),this['_manager']['input']['velocities'+'Supported']&&_0x16c1b8['linearVelo'+'city']?this['_linearVel'+'ocity']['copy'](_0x16c1b8['linearVelo'+'city']):_0x1ae1c6>0xf6d*0x1+-0xb*-0x9+-0xfd0&&(MS['sub2'](this['_localPosi'+'tion'],this['_localPosi'+'tionLast'])['divScalar'](_0x1ae1c6),this['_linearVel'+'ocity']['lerp'](this['_linearVel'+'ocity'],MS,0x25e1+-0xa*0x2b5+-0xacf*0x1+0.15));}else this['_velocitie'+'sAvailable']=!(0x433*0x9+0x1eaa+0x151*-0x34);}const _0x334712=_0x362dee['getPose'](this['_xrInputSo'+'urce']['targetRayS'+'pace'],this['_manager']['_reference'+'Space']);_0x334712&&(this['_dirtyRay']=!(-0x1a8c+0x19e5*-0x1+0x3471),this['_rayLocal']['origin']['copy'](_0x334712['transform']['position']),this['_rayLocal']['direction']['set'](0xca9*0x2+0x6fd*0x3+0x29*-0x121,-0x9f9+0x3*-0x63d+-0x3*-0x990,-(0x8f5*-0x4+0x11+0x23c4)),DS['copy'](_0x334712['transform']['orientatio'+'n']),DS['transformV'+'ector'](this['_rayLocal']['direction'],this['_rayLocal']['direction']));}}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(0x1a5e+0x1fc1+-0x56*0xad),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],D['ONE']));const _0x5ef147=this['_manager']['camera']['parent'];_0x5ef147?this['_worldTran'+'sform']['mul2'](_0x5ef147['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['_updateRay'+'Transforms'](){const _0x33209c=this['_dirtyRay'];if(this['_dirtyRay']=!(0xdc3+0x96d*-0x4+0xa*0x265),this['_manager']['camera']['parent']){const _0x22de83=this['_manager']['camera']['parent']['getWorldTr'+'ansform']();_0x22de83['getTransla'+'tion'](this['_position']),this['_rotation']['setFromMat'+'4'](_0x22de83),this['_rotation']['transformV'+'ector'](this['_rayLocal']['origin'],this['_ray']['origin']),this['_ray']['origin']['add'](this['_position']),this['_rotation']['transformV'+'ector'](this['_rayLocal']['direction'],this['_ray']['direction']);}else _0x33209c&&(this['_ray']['origin']['copy'](this['_rayLocal']['origin']),this['_ray']['direction']['copy'](this['_rayLocal']['direction']));}['getPositio'+'n'](){return this['_position']?(this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position']):null;}['getLocalPo'+'sition'](){return this['_localPosi'+'tion'];}['getRotatio'+'n'](){return this['_rotation']?(this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation']):null;}['getLocalRo'+'tation'](){return this['_localRota'+'tion'];}['getLinearV'+'elocity'](){return this['_velocitie'+'sAvailable']?this['_linearVel'+'ocity']:null;}['getOrigin'](){return this['_updateRay'+'Transforms'](),this['_ray']['origin'];}['getDirecti'+'on'](){return this['_updateRay'+'Transforms'](),this['_ray']['direction'];}['hitTestSta'+'rt'](_0x584f66={}){_0x584f66['inputSourc'+'e']=this,_0x584f66['profile']=this['_xrInputSo'+'urce']['profiles'][0x1*-0x4f+-0x142f*0x1+0x7a*0x2b];const _0x1a236f=_0x584f66['callback'];_0x584f66['callback']=(_0x27aa33,_0x5b1e7e)=>{_0x5b1e7e&&this['onHitTestS'+'ourceAdd'](_0x5b1e7e),_0x1a236f&&_0x1a236f(_0x27aa33,_0x5b1e7e);},this['_manager']['hitTest']['start'](_0x584f66);}['onHitTestS'+'ourceAdd'](_0x4ea353){this['_hitTestSo'+'urces']['push'](_0x4ea353),this['fire']('hittest:ad'+'d',_0x4ea353),_0x4ea353['on']('result',(_0x45d87d,_0x3e323a,_0x4ba575,_0x236aea)=>{_0x4ba575===this&&this['fire']('hittest:re'+'sult',_0x4ea353,_0x45d87d,_0x3e323a,_0x236aea);}),_0x4ea353['once']('remove',()=>{this['onHitTestS'+'ourceRemov'+'e'](_0x4ea353),this['fire']('hittest:re'+'move',_0x4ea353);});}['onHitTestS'+'ourceRemov'+'e'](_0x3f31d2){const _0x21b7d5=this['_hitTestSo'+'urces']['indexOf'](_0x3f31d2);_0x21b7d5!==-(-0x2450+-0x3*-0x1c9+0x1ef6)&&this['_hitTestSo'+'urces']['splice'](_0x21b7d5,0x2483+0x649+-0x2acb);}}h(Qt,'EVENT_REMO'+'VE','remove'),h(Qt,'EVENT_SELE'+'CT','select'),h(Qt,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Qt,'EVENT_SELE'+'CTEND','selectend'),h(Qt,'EVENT_SQUE'+'EZE','squeeze'),h(Qt,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Qt,'EVENT_SQUE'+'EZEEND','squeezeend'),h(Qt,'EVENT_HITT'+'ESTADD','hittest:ad'+'d'),h(Qt,'EVENT_HITT'+'ESTREMOVE','hittest:re'+'move'),h(Qt,'EVENT_HITT'+'ESTRESULT','hittest:re'+'sult');class Li extends me{constructor(_0x448ace){var _0x40846b,_0x4f1ced;super(),h(this,'manager'),h(this,'_inputSour'+'ces',[]),h(this,'_onInputSo'+'urcesChang'+'eEvt'),h(this,'velocities'+'Supported',!(-0xa91+-0x10a7+0x1b39)),(this['manager']=_0x448ace,this['velocities'+'Supported']=!!(Ae['browser']&&((_0x4f1ced=(_0x40846b=window['XRPose'])==null?void(0x1*0xfe+-0x5d8+-0x1b*-0x2e):_0x40846b['prototype'])!=null&&_0x4f1ced['hasOwnProp'+'erty']('linearVelo'+'city'))),this['_onInputSo'+'urcesChang'+'eEvt']=_0x3add2a=>{this['_onInputSo'+'urcesChang'+'e'](_0x3add2a);},this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){const _0x4b9f05=this['manager']['session'];_0x4b9f05['addEventLi'+'stener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']),_0x4b9f05['addEventLi'+'stener']('select',_0x43f54c=>{const _0x362a29=this['_getByInpu'+'tSource'](_0x43f54c['inputSourc'+'e']);_0x362a29['update'](_0x43f54c['frame']),_0x362a29['fire']('select',_0x43f54c),this['fire']('select',_0x362a29,_0x43f54c);}),_0x4b9f05['addEventLi'+'stener']('selectstar'+'t',_0x10a270=>{const _0x3bd912=this['_getByInpu'+'tSource'](_0x10a270['inputSourc'+'e']);_0x3bd912['_selecting']||(_0x3bd912['update'](_0x10a270['frame']),_0x3bd912['_selecting']=!(0x2b5*0x1+0x18f5+-0x2*0xdd5),_0x3bd912['fire']('selectstar'+'t',_0x10a270),this['fire']('selectstar'+'t',_0x3bd912,_0x10a270));}),_0x4b9f05['addEventLi'+'stener']('selectend',_0x14ec3d=>{const _0x1e194a=this['_getByInpu'+'tSource'](_0x14ec3d['inputSourc'+'e']);_0x1e194a['update'](_0x14ec3d['frame']),_0x1e194a['_selecting']=!(0x12e6+0x21c6+-0x8b*0x61),_0x1e194a['fire']('selectend',_0x14ec3d),this['fire']('selectend',_0x1e194a,_0x14ec3d);}),_0x4b9f05['addEventLi'+'stener']('squeeze',_0x559a38=>{const _0x9f7705=this['_getByInpu'+'tSource'](_0x559a38['inputSourc'+'e']);_0x9f7705['update'](_0x559a38['frame']),_0x9f7705['fire']('squeeze',_0x559a38),this['fire']('squeeze',_0x9f7705,_0x559a38);}),_0x4b9f05['addEventLi'+'stener']('squeezesta'+'rt',_0x37976b=>{const _0xc863e=this['_getByInpu'+'tSource'](_0x37976b['inputSourc'+'e']);_0xc863e['update'](_0x37976b['frame']),_0xc863e['_squeezing']=!(0x197b+0x1ab2+0x169*-0x25),_0xc863e['fire']('squeezesta'+'rt',_0x37976b),this['fire']('squeezesta'+'rt',_0xc863e,_0x37976b);}),_0x4b9f05['addEventLi'+'stener']('squeezeend',_0x3d0f07=>{const _0x28894e=this['_getByInpu'+'tSource'](_0x3d0f07['inputSourc'+'e']);_0x28894e['update'](_0x3d0f07['frame']),_0x28894e['_squeezing']=!(-0x3c6+-0x1*0x2525+0x28ec),_0x28894e['fire']('squeezeend',_0x3d0f07),this['fire']('squeezeend',_0x28894e,_0x3d0f07);});const _0x21bf38=_0x4b9f05['inputSourc'+'es'];for(let _0xcbfc1b=-0x1*-0x869+-0x26ea+0x1e81;_0xcbfc1b<_0x21bf38['length'];_0xcbfc1b++)this['_addInputS'+'ource'](_0x21bf38[_0xcbfc1b]);}['_onSession'+'End'](){let _0x1d69fc=this['_inputSour'+'ces']['length'];for(;_0x1d69fc--;){const _0x5393ba=this['_inputSour'+'ces'][_0x1d69fc];this['_inputSour'+'ces']['splice'](_0x1d69fc,0x31*-0xa9+0x173d+0x1*0x91d),_0x5393ba['fire']('remove'),this['fire']('remove',_0x5393ba);}this['fire']('removeall'),this['manager']['session']['removeEven'+'tListener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']);}['_onInputSo'+'urcesChang'+'e'](_0x1dd347){for(let _0x5439c5=0x5*-0x24b+-0x3*-0x842+-0xd4f;_0x5439c5<_0x1dd347['removed']['length'];_0x5439c5++)this['_removeInp'+'utSource'](_0x1dd347['removed'][_0x5439c5]);for(let _0x3cc56e=0xc*0x2ba+-0x3*0x9e3+-0x30f;_0x3cc56e<_0x1dd347['added']['length'];_0x3cc56e++)this['_addInputS'+'ource'](_0x1dd347['added'][_0x3cc56e]);}['_getByInpu'+'tSource'](_0x139127){for(let _0x455718=0x23ce+-0x1*-0x1813+-0x3be1;_0x455718<this['_inputSour'+'ces']['length'];_0x455718++)if(this['_inputSour'+'ces'][_0x455718]['inputSourc'+'e']===_0x139127)return this['_inputSour'+'ces'][_0x455718];return null;}['_removeApp'+'Entity'](_0x208e22){const _0x1d4d81=this['manager']['app']['root']['findByName']('Armature_'+_0x208e22);_0x1d4d81&&this['manager']['app']['root']['removeChil'+'d'](_0x1d4d81);}['_addInputS'+'ource'](_0x1b1004){if(this['_removeApp'+'Entity'](_0x1b1004['handedness']),this['_getByInpu'+'tSource'](_0x1b1004))return;const _0x260619=new Qt(this['manager'],_0x1b1004);this['_inputSour'+'ces']['push'](_0x260619),this['fire']('add',_0x260619);}['_removeInp'+'utSource'](_0x13ce02){for(let _0x525a91=0x3d3+0x5f8*0x3+-0x15bb;_0x525a91<this['_inputSour'+'ces']['length'];_0x525a91++){if(this['_inputSour'+'ces'][_0x525a91]['inputSourc'+'e']!==_0x13ce02)continue;const _0xabf778=this['_inputSour'+'ces'][_0x525a91];this['_inputSour'+'ces']['splice'](_0x525a91,0x23e2+-0x82e+0x3f5*-0x7);let _0x2d3992=_0xabf778['hitTestSou'+'rces']['length'];for(;_0x2d3992--;)_0xabf778['hitTestSou'+'rces'][_0x2d3992]['remove']();this['_removeApp'+'Entity'](_0xabf778['handedness']),_0xabf778['fire']('remove'),this['fire']('remove',_0xabf778);return;}}['update'](_0xa5a076){for(let _0x4b183f=0x1042+-0x2c*0x1+-0x3a*0x47;_0x4b183f<this['_inputSour'+'ces']['length'];_0x4b183f++)this['_inputSour'+'ces'][_0x4b183f]['update'](_0xa5a076);}get['inputSourc'+'es'](){return this['_inputSour'+'ces'];}}h(Li,'EVENT_ADD','add'),h(Li,'EVENT_REMO'+'VE','remove'),h(Li,'EVENT_SELE'+'CT','select'),h(Li,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Li,'EVENT_SELE'+'CTEND','selectend'),h(Li,'EVENT_SQUE'+'EZE','squeeze'),h(Li,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Li,'EVENT_SQUE'+'EZEEND','squeezeend');const Ja=new D(),IS=new D(),Lf=new te(),LS=new te();class Zu extends me{constructor(_0x28ab96){super(),h(this,'_manager'),h(this,'_supported',!(-0xb*0x22a+-0x17*0x9e+0x2601*0x1)),h(this,'_available',!(-0x2cf*0x5+-0x7fb*-0x3+-0x9e5*0x1)),h(this,'_lightProb'+'eRequested',!(0x12c5+0xae5*-0x2+0x2b*0x12)),h(this,'_lightProb'+'e',null),h(this,'_intensity',-0xb34+0xc*-0x1de+0x12*0x1de),h(this,'_rotation',new le()),h(this,'_color',new ie()),h(this,'_spherical'+'Harmonics',new Float32Array(-0x20cf+0x24c3*0x1+0x3d9*-0x1)),(this['_manager']=_0x28ab96,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){this['_manager']['session']['requestLig'+'htProbe']&&(this['_supported']=!(0xc21+-0x2617+-0x19f6*-0x1));}['_onSession'+'End'](){this['_supported']=!(0xd9b+-0x1e7f+0x10e5),this['_available']=!(0x210e+-0x7*-0x245+-0x30f0),this['_lightProb'+'eRequested']=!(-0x3d1*0x8+-0xa*-0x11f+-0x3*-0x671),this['_lightProb'+'e']=null;}['start'](){let _0x3a8184;if(this['_manager']['session']||(_0x3a8184=new Error('XR\x20session'+'\x20is\x20not\x20ru'+'nning')),!_0x3a8184&&this['_manager']['type']!==$o&&(_0x3a8184=new Error('XR\x20session'+'\x20type\x20is\x20n'+'ot\x20AR')),!_0x3a8184&&!this['_supported']&&(_0x3a8184=new Error('light-esti'+'mation\x20is\x20'+'not\x20suppor'+'ted')),(!_0x3a8184&&this['_lightProb'+'e']||this['_lightProb'+'eRequested'])&&(_0x3a8184=new Error('light\x20esti'+'mation\x20is\x20'+'already\x20re'+'quested')),_0x3a8184){this['fire']('error',_0x3a8184);return;}this['_lightProb'+'eRequested']=!(0x112*0x1d+0x1*0x18fd+0x3*-0x12ad),this['_manager']['session']['requestLig'+'htProbe']()['then'](_0x5a5d57=>{const _0x438658=this['_lightProb'+'eRequested'];this['_lightProb'+'eRequested']=!(0x18b6*-0x1+0x11d2*-0x1+0x2a89),this['_manager']['active']?_0x438658&&(this['_lightProb'+'e']=_0x5a5d57):this['fire']('error',new Error('XR\x20session'+'\x20is\x20not\x20ac'+'tive'));})['catch'](_0xcc9f02=>{this['_lightProb'+'eRequested']=!(0x144b+-0x2602+-0x2f4*-0x6),this['fire']('error',_0xcc9f02);});}['end'](){this['_lightProb'+'eRequested']=!(0x10a2+0x2067+-0x3108),this['_lightProb'+'e']=null,this['_available']=!(0x9*-0x1df+0x2260+-0x1188);}['update'](_0xc48180){if(!this['_lightProb'+'e'])return;const _0x6559da=_0xc48180['getLightEs'+'timate'](this['_lightProb'+'e']);if(!_0x6559da)return;this['_available']||(this['_available']=!(-0x11*0xa3+0x3e*0x43+-0x567),this['fire']('available'));const _0x3570f3=_0x6559da['primaryLig'+'htIntensit'+'y'];this['_intensity']=Math['max'](-0x443+0x28*-0x1c+0x8a4,Math['max'](_0x3570f3['x'],Math['max'](_0x3570f3['y'],_0x3570f3['z']))),Ja['copy'](_0x3570f3)['mulScalar']((0xf32+-0x182c+0xd1*0xb)/this['_intensity']),this['_color']['set'](Ja['x'],Ja['y'],Ja['z']),Ja['set'](-0x1466+0x7bd*-0x1+0x1c23,0x1c13*-0x1+0xd7f+0x1*0xe94,0xaaa+0x83e+-0x12e8),IS['copy'](_0x6559da['primaryLig'+'htDirectio'+'n']),Lf['setLookAt'](IS,Ja,D['UP']),LS['setFromAxi'+'sAngle'](D['RIGHT'],0x1*-0x1b34+0x7*-0x3f5+-0x7b*-0x73),Lf['mul'](LS),this['_rotation']['setFromMat'+'4'](Lf),this['_spherical'+'Harmonics']['set'](_0x6559da['sphericalH'+'armonicsCo'+'efficients']);}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['intensity'](){return this['_available']?this['_intensity']:null;}get['color'](){return this['_available']?this['_color']:null;}get['rotation'](){return this['_available']?this['_rotation']:null;}get['sphericalH'+'armonics'](){return this['_available']?this['_spherical'+'Harmonics']:null;}}h(Zu,'EVENT_AVAI'+'LABLE','available'),h(Zu,'EVENT_ERRO'+'R','error');let mU=-0x26c+0x1a7e+0x3*-0x806;class Qu extends me{constructor(_0x1176a4,_0x577f04){super(),h(this,'_id'),h(this,'_planeDete'+'ction'),h(this,'_xrPlane'),h(this,'_lastChang'+'edTime'),h(this,'_orientati'+'on'),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_id']=++mU,this['_planeDete'+'ction']=_0x1176a4,this['_xrPlane']=_0x577f04,this['_lastChang'+'edTime']=_0x577f04['lastChange'+'dTime'],this['_orientati'+'on']=_0x577f04['orientatio'+'n']);}['destroy'](){this['_xrPlane']&&(this['_xrPlane']=null,this['fire']('remove'));}['update'](_0x196f2b){const _0x5b43ec=this['_planeDete'+'ction']['_manager'],_0x1c4755=_0x196f2b['getPose'](this['_xrPlane']['planeSpace'],_0x5b43ec['_reference'+'Space']);_0x1c4755&&(this['_position']['copy'](_0x1c4755['transform']['position']),this['_rotation']['copy'](_0x1c4755['transform']['orientatio'+'n'])),this['_lastChang'+'edTime']!==this['_xrPlane']['lastChange'+'dTime']&&(this['_lastChang'+'edTime']=this['_xrPlane']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}get['id'](){return this['_id'];}get['orientatio'+'n'](){return this['_orientati'+'on'];}get['points'](){return this['_xrPlane']['polygon'];}get['label'](){return this['_xrPlane']['semanticLa'+'bel']||'';}}h(Qu,'EVENT_REMO'+'VE','remove'),h(Qu,'EVENT_CHAN'+'GE','change');class Do extends me{constructor(_0x3bee82){super(),h(this,'_manager'),h(this,'_supported',Ae['browser']&&!!window['XRPlane']),h(this,'_available',!(-0x6e*-0xc+-0x7*-0x16+-0x1*0x5c1)),h(this,'_planesInd'+'ex',new Map()),h(this,'_planes',[]),(this['_manager']=_0x3bee82,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){this['_manager']['session']['enabledFea'+'tures']&&this['_manager']['session']['enabledFea'+'tures']['indexOf']('plane-dete'+'ction')!==-(-0xf66+-0x11e6+-0x37*-0x9b)&&(this['_available']=!(-0xb1d+-0x47*-0x2e+-0x1a5),this['fire']('available'));}['_onSession'+'End'](){for(let _0x3926cd=0x1237+-0xedb*-0x1+-0x2112;_0x3926cd<this['_planes']['length'];_0x3926cd++)this['_planes'][_0x3926cd]['destroy'](),this['fire']('remove',this['_planes'][_0x3926cd]);this['_planesInd'+'ex']['clear'](),this['_planes']['length']=-0x8c*0x5+0x2d1*-0xd+0x2759,this['_available']&&(this['_available']=!(0x2*-0x887+-0x1092+0x21a1),this['fire']('unavailabl'+'e'));}['update'](_0xc1eab9){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0xc1eab9['detectedPl'+'anes']['size'])this['_available']=!(-0x1*-0x633+-0x483+-0x1b0),this['fire']('available');else return;}const _0x4402a4=_0xc1eab9['detectedPl'+'anes'];for(const [_0x518cbc,_0x5789c6]of this['_planesInd'+'ex'])_0x4402a4['has'](_0x518cbc)||(this['_planesInd'+'ex']['delete'](_0x518cbc),this['_planes']['splice'](this['_planes']['indexOf'](_0x5789c6),-0x7*-0x2cc+-0x1c98+0x905),_0x5789c6['destroy'](),this['fire']('remove',_0x5789c6));for(const _0x3c56c7 of _0x4402a4){let _0xf45b82=this['_planesInd'+'ex']['get'](_0x3c56c7);_0xf45b82?_0xf45b82['update'](_0xc1eab9):(_0xf45b82=new Qu(this,_0x3c56c7),this['_planesInd'+'ex']['set'](_0x3c56c7,_0xf45b82),this['_planes']['push'](_0xf45b82),_0xf45b82['update'](_0xc1eab9),this['fire']('add',_0xf45b82));}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['planes'](){return this['_planes'];}}h(Do,'EVENT_AVAI'+'LABLE','available'),h(Do,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Do,'EVENT_ADD','add'),h(Do,'EVENT_REMO'+'VE','remove');class Io extends me{constructor(_0x451fbb,_0x5acb99,_0xb7b495=null){super(),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_uuid',null),h(this,'_uuidReque'+'sts',null),(this['_anchors']=_0x451fbb,this['_xrAnchor']=_0x5acb99,this['_uuid']=_0xb7b495);}['destroy'](){if(!this['_xrAnchor'])return;const _0x240943=this['_xrAnchor'];this['_xrAnchor']['delete'](),this['_xrAnchor']=null,this['fire']('destroy',_0x240943,this);}['update'](_0x1f3fb4){if(!this['_xrAnchor'])return;const _0x13d4f6=_0x1f3fb4['getPose'](this['_xrAnchor']['anchorSpac'+'e'],this['_anchors']['manager']['_reference'+'Space']);if(_0x13d4f6){if(this['_position']['equals'](_0x13d4f6['transform']['position'])&&this['_rotation']['equals'](_0x13d4f6['transform']['orientatio'+'n']))return;this['_position']['copy'](_0x13d4f6['transform']['position']),this['_rotation']['copy'](_0x13d4f6['transform']['orientatio'+'n']),this['fire']('change');}}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}['persist'](_0x42a1a3){if(!this['_anchors']['persistenc'+'e']){_0x42a1a3==null||_0x42a1a3(new Error('Persistent'+'\x20Anchors\x20a'+'re\x20not\x20sup'+'ported'),null);return;}if(this['_uuid']){_0x42a1a3==null||_0x42a1a3(null,this['_uuid']);return;}if(this['_uuidReque'+'sts']){_0x42a1a3&&this['_uuidReque'+'sts']['push'](_0x42a1a3);return;}this['_uuidReque'+'sts']=[],this['_xrAnchor']['requestPer'+'sistentHan'+'dle']()['then'](_0x1e3cc7=>{this['_uuid']=_0x1e3cc7,this['_anchors']['_indexByUu'+'id']['set'](this['_uuid'],this),_0x42a1a3==null||_0x42a1a3(null,_0x1e3cc7);for(const _0x3fdc0e of this['_uuidReque'+'sts'])_0x3fdc0e(null,_0x1e3cc7);this['_uuidReque'+'sts']=null,this['fire']('persist',_0x1e3cc7);})['catch'](_0x5e0ad9=>{_0x42a1a3==null||_0x42a1a3(_0x5e0ad9,null);for(const _0x83ec1e of this['_uuidReque'+'sts'])_0x83ec1e(_0x5e0ad9,null);this['_uuidReque'+'sts']=null;});}['forget'](_0x32530c){if(!this['_uuid']){_0x32530c==null||_0x32530c(new Error('Anchor\x20is\x20'+'not\x20persis'+'tent'));return;}this['_anchors']['forget'](this['_uuid'],_0x54a30d=>{this['_uuid']=null,_0x32530c==null||_0x32530c(_0x54a30d),this['fire']('forget');});}get['uuid'](){return this['_uuid'];}get['persistent'](){return!!this['_uuid'];}}h(Io,'EVENT_DEST'+'ROY','destroy'),h(Io,'EVENT_CHAN'+'GE','change'),h(Io,'EVENT_PERS'+'IST','persist'),h(Io,'EVENT_FORG'+'ET','forget');var VS;class on extends me{constructor(_0x426269){super(),h(this,'manager'),h(this,'_supported',Ae['browser']&&!!window['XRAnchor']),h(this,'_available',!(0x14f5+0x403+-0x18f7)),h(this,'_checkingA'+'vailabilit'+'y',!(0x72b*-0x1+-0x4a4+0x6c*0x1c)),h(this,'_persisten'+'ce',Ae['browser']&&!!((VS=window==null?void(0x35f*-0x2+0x1617+-0x1*0xf59):window['XRSession'])!=null&&VS['prototype']['restorePer'+'sistentAnc'+'hor'])),h(this,'_creationQ'+'ueue',[]),h(this,'_index',new Map()),h(this,'_indexByUu'+'id',new Map()),h(this,'_list',[]),h(this,'_callbacks'+'Anchors',new Map()),(this['manager']=_0x426269,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){var _0x20d546;const _0x23e34e=((_0x20d546=this['manager']['session']['enabledFea'+'tures'])==null?void(-0x1c77+0xfab*-0x1+0x2c22):_0x20d546['indexOf']('anchors'))>=-0xe51+0x37*0x73+-0xa64;_0x23e34e&&(this['_available']=_0x23e34e,this['fire']('available'));}['_onSession'+'End'](){if(!this['_available'])return;this['_available']=!(-0x1f1e+-0x10b2*0x2+-0xce7*-0x5);for(let _0x5cb912=0x39*0x79+-0x9e7+0x110a*-0x1;_0x5cb912<this['_creationQ'+'ueue']['length'];_0x5cb912++)this['_creationQ'+'ueue'][_0x5cb912]['callback']&&this['_creationQ'+'ueue'][_0x5cb912]['callback'](new Error('session\x20en'+'ded'),null);this['_creationQ'+'ueue']['length']=0x5*0x3d7+-0x1369+-0x36*-0x1,this['_index']['clear'](),this['_indexByUu'+'id']['clear']();let _0x5e35d6=this['_list']['length'];for(;_0x5e35d6--;)this['_list'][_0x5e35d6]['destroy']();this['_list']['length']=0x1a55+-0xb8c+-0xec9,this['fire']('unavailabl'+'e');}['_createAnc'+'hor'](_0x5abc87,_0x41f187=null){const _0x351bd9=new Io(this,_0x5abc87,_0x41f187);return this['_index']['set'](_0x5abc87,_0x351bd9),_0x41f187&&this['_indexByUu'+'id']['set'](_0x41f187,_0x351bd9),this['_list']['push'](_0x351bd9),_0x351bd9['once']('destroy',this['_onAnchorD'+'estroy'],this),_0x351bd9;}['_onAnchorD'+'estroy'](_0x30d7d5,_0x258de8){this['_index']['delete'](_0x30d7d5),_0x258de8['uuid']&&this['_indexByUu'+'id']['delete'](_0x258de8['uuid']);const _0x500e66=this['_list']['indexOf'](_0x258de8);_0x500e66!==-(0x8b5*0x3+-0x1*-0x1727+0x3145*-0x1)&&this['_list']['splice'](_0x500e66,0x8c3+0x2534+-0x2df6),this['fire']('destroy',_0x258de8);}['create'](_0x1e4e63,_0x2c29d3,_0x28d28a){if(!this['_available']){_0x28d28a==null||_0x28d28a(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(window['XRHitTestR'+'esult']&&_0x1e4e63 instanceof XRHitTestResult){const _0x5b0b07=_0x1e4e63;if(_0x28d28a=_0x2c29d3,!this['_supported']){_0x28d28a==null||_0x28d28a(new Error('Anchors\x20AP'+'I\x20is\x20not\x20s'+'upported'),null);return;}if(!_0x5b0b07['createAnch'+'or']){_0x28d28a==null||_0x28d28a(new Error('Creating\x20A'+'nchor\x20from'+'\x20Hit\x20Test\x20'+'is\x20not\x20sup'+'ported'),null);return;}_0x5b0b07['createAnch'+'or']()['then'](_0x5d7706=>{const _0x37c73a=this['_createAnc'+'hor'](_0x5d7706);_0x28d28a==null||_0x28d28a(null,_0x37c73a),this['fire']('add',_0x37c73a);})['catch'](_0x87d52b=>{_0x28d28a==null||_0x28d28a(_0x87d52b,null),this['fire']('error',_0x87d52b);});}else this['_creationQ'+'ueue']['push']({'transform':new XRRigidTransform(_0x1e4e63,_0x2c29d3),'callback':_0x28d28a});}['restore'](_0x3fc32c,_0x27c19d){if(!this['_available']){_0x27c19d==null||_0x27c19d(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(!this['_persisten'+'ce']){_0x27c19d==null||_0x27c19d(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'),null);return;}if(!this['manager']['active']){_0x27c19d==null||_0x27c19d(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'),null);return;}this['manager']['session']['restorePer'+'sistentAnc'+'hor'](_0x3fc32c)['then'](_0x21d256=>{const _0x56daf2=this['_createAnc'+'hor'](_0x21d256,_0x3fc32c);_0x27c19d==null||_0x27c19d(null,_0x56daf2),this['fire']('add',_0x56daf2);})['catch'](_0x5bff9e=>{_0x27c19d==null||_0x27c19d(_0x5bff9e,null),this['fire']('error',_0x5bff9e);});}['forget'](_0x2c8d5a,_0x9da64){if(!this['_available']){_0x9da64==null||_0x9da64(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'));return;}if(!this['_persisten'+'ce']){_0x9da64==null||_0x9da64(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'));return;}if(!this['manager']['active']){_0x9da64==null||_0x9da64(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'));return;}this['manager']['session']['deletePers'+'istentAnch'+'or'](_0x2c8d5a)['then'](()=>{_0x9da64==null||_0x9da64(null);})['catch'](_0x58cdb0=>{_0x9da64==null||_0x9da64(_0x58cdb0),this['fire']('error',_0x58cdb0);});}['update'](_0x2c5192){if(!this['_available']){!this['manager']['session']['enabledFea'+'tures']&&!this['_checkingA'+'vailabilit'+'y']&&(this['_checkingA'+'vailabilit'+'y']=!(0x1*-0x28c+-0xd82+0x100e),_0x2c5192['createAnch'+'or'](new XRRigidTransform(),this['manager']['_reference'+'Space'])['then'](_0x3c5688=>{_0x3c5688['delete'](),this['manager']['active']&&(this['_available']=!(0x853+-0x2*-0x47+-0x8e1),this['fire']('available'));})['catch'](()=>{}));return;}if(this['_creationQ'+'ueue']['length']){for(let _0x33c97e=0x23e1+-0x3*-0x49+0x4*-0x92f;_0x33c97e<this['_creationQ'+'ueue']['length'];_0x33c97e++){const _0x1882ca=this['_creationQ'+'ueue'][_0x33c97e];_0x2c5192['createAnch'+'or'](_0x1882ca['transform'],this['manager']['_reference'+'Space'])['then'](_0x367b82=>{_0x1882ca['callback']&&this['_callbacks'+'Anchors']['set'](_0x367b82,_0x1882ca['callback']);})['catch'](_0xec0c8=>{_0x1882ca['callback']&&_0x1882ca['callback'](_0xec0c8,null),this['fire']('error',_0xec0c8);});}this['_creationQ'+'ueue']['length']=-0x154c+0x157f*0x1+0x3*-0x11;}for(const [_0x1b56b7,_0x293333]of this['_index'])_0x2c5192['trackedAnc'+'hors']['has'](_0x1b56b7)||(this['_index']['delete'](_0x1b56b7),_0x293333['destroy']());for(let _0x3f9679=0xc7a+0x1406+-0x8*0x410;_0x3f9679<this['_list']['length'];_0x3f9679++)this['_list'][_0x3f9679]['update'](_0x2c5192);for(const _0x2a73c8 of _0x2c5192['trackedAnc'+'hors']){if(this['_index']['has'](_0x2a73c8))continue;try{const _0x221f03=_0x2a73c8['anchorSpac'+'e'];}catch{continue;}const _0x5deb60=this['_createAnc'+'hor'](_0x2a73c8);_0x5deb60['update'](_0x2c5192);const _0x1cfc59=this['_callbacks'+'Anchors']['get'](_0x2a73c8);_0x1cfc59&&(this['_callbacks'+'Anchors']['delete'](_0x2a73c8),_0x1cfc59(null,_0x5deb60)),this['fire']('add',_0x5deb60);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['persistenc'+'e'](){return this['_persisten'+'ce'];}get['uuids'](){return!this['_available']||!this['_persisten'+'ce']||!this['manager']['active']?null:this['manager']['session']['persistent'+'Anchors'];}get['list'](){return this['_list'];}}h(on,'EVENT_AVAI'+'LABLE','available'),h(on,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(on,'EVENT_ERRO'+'R','error'),h(on,'EVENT_ADD','add'),h(on,'EVENT_DEST'+'ROY','destroy');class Ju extends me{constructor(_0x4573dd,_0x4490e1){super(),h(this,'_meshDetec'+'tion'),h(this,'_xrMesh'),h(this,'_lastChang'+'ed',-0x1*-0x41d+0x1*-0x22a7+-0xa2e*-0x3),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_meshDetec'+'tion']=_0x4573dd,this['_xrMesh']=_0x4490e1,this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime']);}get['xrMesh'](){return this['_xrMesh'];}get['label'](){return this['_xrMesh']['semanticLa'+'bel']||'';}get['vertices'](){return this['_xrMesh']['vertices'];}get['indices'](){return this['_xrMesh']['indices'];}['destroy'](){this['_xrMesh']&&(this['_xrMesh']=null,this['fire']('remove'));}['update'](_0x54bb03){const _0x488986=this['_meshDetec'+'tion']['_manager'],_0x57285f=_0x54bb03['getPose'](this['_xrMesh']['meshSpace'],_0x488986['_reference'+'Space']);_0x57285f&&(this['_position']['copy'](_0x57285f['transform']['position']),this['_rotation']['copy'](_0x57285f['transform']['orientatio'+'n'])),this['_lastChang'+'ed']!==this['_xrMesh']['lastChange'+'dTime']&&(this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}}h(Ju,'EVENT_REMO'+'VE','remove'),h(Ju,'EVENT_CHAN'+'GE','change');class Lo extends me{constructor(_0x49c1f4){super(),h(this,'_manager'),h(this,'_supported',Ae['browser']&&!!window['XRMesh']),h(this,'_available',!(-0x2*0x1025+0x61*-0x4a+0x3c55)),h(this,'_index',new Map()),h(this,'_list',[]),(this['_manager']=_0x49c1f4,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['update'](_0x5e6e5b){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x5e6e5b['detectedMe'+'shes']['size'])this['_available']=!(0x1a86+-0x1b*0xf7+-0xb*0xb),this['fire']('available');else return;}for(const _0x22dd98 of _0x5e6e5b['detectedMe'+'shes']){let _0x2a2f7e=this['_index']['get'](_0x22dd98);_0x2a2f7e?_0x2a2f7e['update'](_0x5e6e5b):(_0x2a2f7e=new Ju(this,_0x22dd98),this['_index']['set'](_0x22dd98,_0x2a2f7e),this['_list']['push'](_0x2a2f7e),_0x2a2f7e['update'](_0x5e6e5b),this['fire']('add',_0x2a2f7e));}for(const _0x372554 of this['_index']['values']())_0x5e6e5b['detectedMe'+'shes']['has'](_0x372554['xrMesh'])||this['_removeMes'+'h'](_0x372554);}['_removeMes'+'h'](_0x5736cf){this['_index']['delete'](_0x5736cf['xrMesh']),this['_list']['splice'](this['_list']['indexOf'](_0x5736cf),-0x4*0x27a+-0x21db+0x1*0x2bc4),_0x5736cf['destroy'](),this['fire']('remove',_0x5736cf);}['_onSession'+'Start'](){if(this['_manager']['session']['enabledFea'+'tures']){const _0x4211eb=this['_manager']['session']['enabledFea'+'tures']['indexOf']('mesh-detec'+'tion')!==-(0x1*-0x649+-0x2681*-0x1+-0x2037);if(!_0x4211eb)return;this['_available']=_0x4211eb,this['fire']('available');}}['_onSession'+'End'](){if(this['_available']){this['_available']=!(0x1*-0x1f67+-0xd87+0x2cef);for(const _0x5d3315 of this['_index']['values']())this['_removeMes'+'h'](_0x5d3315);this['fire']('unavailabl'+'e');}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['meshes'](){return this['_list'];}}h(Lo,'EVENT_AVAI'+'LABLE','available'),h(Lo,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Lo,'EVENT_ADD','add'),h(Lo,'EVENT_REMO'+'VE','remove');class O0 extends me{constructor(_0x4a7c05,_0xa66377,_0x324c47){super(),h(this,'_manager'),h(this,'_xrView'),h(this,'_positionD'+'ata',new Float32Array(0x147a+0x1607+-0x206*0x15)),h(this,'_viewport',new re()),h(this,'_projMat',new te()),h(this,'_projViewO'+'ffMat',new te()),h(this,'_viewMat',new te()),h(this,'_viewOffMa'+'t',new te()),h(this,'_viewMat3',new _i()),h(this,'_viewInvMa'+'t',new te()),h(this,'_viewInvOf'+'fMat',new te()),h(this,'_xrCamera',null),h(this,'_textureCo'+'lor',null),h(this,'_textureDe'+'pth',null),h(this,'_depthInfo',null),h(this,'_emptyDept'+'hBuffer',new Uint8Array(-0x2ff*-0x7+0x231a+-0x37f3)),h(this,'_depthMatr'+'ix',new te()),(this['_manager']=_0x4a7c05,this['_xrView']=_0xa66377);const _0x430855=this['_manager']['app']['graphicsDe'+'vice'];if(this['_manager']['views']['supportedC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera'],this['_manager']['views']['availableC'+'olor']&&this['_xrCamera']&&(this['_textureCo'+'lor']=new _e(_0x430855,{'format':Cr,'mipmaps':!(0x3*0xa7+-0x750+0x55c),'addressU':ue,'addressV':ue,'minFilter':vt,'magFilter':vt,'width':this['_xrCamera']['width'],'height':this['_xrCamera']['height'],'name':'XrView-'+this['_xrView']['eye']+'-Color'}))),this['_manager']['views']['supportedD'+'epth']&&this['_manager']['views']['availableD'+'epth']){const _0x29f00e=this['_manager']['views']['depthGpuOp'+'timized']?Te:vt;this['_textureDe'+'pth']=new _e(_0x430855,{'format':this['_manager']['views']['depthPixel'+'Format'],'arrayLength':_0x324c47===0x67*0x15+0x539+0x1*-0xdab?-0x2009*-0x1+-0xfc4+0x23*-0x77:_0x324c47,'mipmaps':!(-0x74b*0x3+0x2*0x34a+0x6*0x28d),'addressU':ue,'addressV':ue,'minFilter':_0x29f00e,'magFilter':_0x29f00e,'width':0x4,'height':0x4,'name':'XrView-'+this['_xrView']['eye']+'-Depth'});for(let _0x2f3da2=0x941+0x10c+-0xa4d;_0x2f3da2<this['_textureDe'+'pth']['_levels']['length'];_0x2f3da2++)this['_textureDe'+'pth']['_levels'][_0x2f3da2]=this['_emptyDept'+'hBuffer'];this['_textureDe'+'pth']['upload']();}(this['_textureCo'+'lor']||this['_textureDe'+'pth'])&&_0x430855['on']('devicelost',this['_onDeviceL'+'ost'],this);}get['textureCol'+'or'](){return this['_textureCo'+'lor'];}get['textureDep'+'th'](){return this['_textureDe'+'pth'];}get['depthUvMat'+'rix'](){return this['_depthMatr'+'ix'];}get['depthValue'+'ToMeters'](){var _0x4407ce;return((_0x4407ce=this['_depthInfo'])==null?void(-0x11ab*-0x1+-0x87*0x1f+-0x152):_0x4407ce['rawValueTo'+'Meters'])||-0xc04*-0x3+-0x7*-0x4da+-0x2301*0x2;}get['eye'](){return this['_xrView']['eye'];}get['viewport'](){return this['_viewport'];}get['projMat'](){return this['_projMat'];}get['projViewOf'+'fMat'](){return this['_projViewO'+'ffMat'];}get['viewOffMat'](){return this['_viewOffMa'+'t'];}get['viewInvOff'+'Mat'](){return this['_viewInvOf'+'fMat'];}get['viewMat3'](){return this['_viewMat3'];}get['positionDa'+'ta'](){return this['_positionD'+'ata'];}['update'](_0xfec010,_0x437ce5){this['_xrView']=_0x437ce5,this['_manager']['views']['availableC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera']);const _0x12a556=_0xfec010['session']['renderStat'+'e']['baseLayer']['getViewpor'+'t'](this['_xrView']);this['_viewport']['x']=_0x12a556['x'],this['_viewport']['y']=_0x12a556['y'],this['_viewport']['z']=_0x12a556['width'],this['_viewport']['w']=_0x12a556['height'],this['_projMat']['set'](this['_xrView']['projection'+'Matrix']),this['_viewMat']['set'](this['_xrView']['transform']['inverse']['matrix']),this['_viewInvMa'+'t']['set'](this['_xrView']['transform']['matrix']),this['_updateTex'+'tureColor'](),this['_updateDep'+'th'](_0xfec010);}['_updateTex'+'tureColor'](){if(!this['_manager']['views']['availableC'+'olor']||!this['_xrCamera']||!this['_textureCo'+'lor'])return;const _0x3ec81d=this['_manager']['webglBindi'+'ng'];if(!_0x3ec81d)return;const _0x2cd737=_0x3ec81d['getCameraI'+'mage'](this['_xrCamera']);if(!_0x2cd737)return;const _0x2206b0=this['_manager']['app']['graphicsDe'+'vice'],_0x2b102b=_0x2206b0['gl'];if(!this['_frameBuff'+'erSource'])this['_frameBuff'+'erSource']=_0x2b102b['createFram'+'ebuffer'](),this['_frameBuff'+'er']=_0x2b102b['createFram'+'ebuffer']();else{const _0xb6993a=_0x2b102b['COLOR_ATTA'+'CHMENT0'],_0x510cad=this['_xrCamera']['width'],_0x18b712=this['_xrCamera']['height'];_0x2206b0['setFramebu'+'ffer'](this['_frameBuff'+'erSource']),_0x2b102b['framebuffe'+'rTexture2D'](_0x2b102b['FRAMEBUFFE'+'R'],_0xb6993a,_0x2b102b['TEXTURE_2D'],_0x2cd737,-0xf6b+0x283+0xce8),_0x2206b0['setFramebu'+'ffer'](this['_frameBuff'+'er']),_0x2b102b['framebuffe'+'rTexture2D'](_0x2b102b['FRAMEBUFFE'+'R'],_0xb6993a,_0x2b102b['TEXTURE_2D'],this['_textureCo'+'lor']['impl']['_glTexture'],0xd*-0x1fd+0x1*-0x1441+0x2e1a),_0x2b102b['bindFrameb'+'uffer'](_0x2b102b['READ_FRAME'+'BUFFER'],this['_frameBuff'+'erSource']),_0x2b102b['bindFrameb'+'uffer'](_0x2b102b['DRAW_FRAME'+'BUFFER'],this['_frameBuff'+'er']),_0x2b102b['blitFrameb'+'uffer'](-0xd1d+0x13e9+-0x6cc,_0x18b712,_0x510cad,0x17b1+0x7f*0x43+0x1c77*-0x2,0x2b*0x8b+0x251c+-0x2e1*0x15,-0x1*-0x6d+0x1b31+-0x1b9e,_0x510cad,_0x18b712,_0x2b102b['COLOR_BUFF'+'ER_BIT'],_0x2b102b['NEAREST']);}}['_updateDep'+'th'](_0x1269b1){var _0x3d2913,_0x372fb8;if(!this['_manager']['views']['availableD'+'epth']||!this['_textureDe'+'pth'])return;const _0x35ae4b=this['_manager']['views']['depthGpuOp'+'timized'],_0x53153a=_0x35ae4b?this['_manager']['webglBindi'+'ng']:_0x1269b1;if(!_0x53153a){this['_depthInfo']=null;return;}const _0x5b61f8=_0x53153a['getDepthIn'+'formation'](this['_xrView']);if(!_0x5b61f8){this['_depthInfo']=null;return;}let _0x3d40fa=!this['_depthInfo']!=!_0x5b61f8;this['_depthInfo']=_0x5b61f8;const _0x4a26eb=((_0x3d2913=this['_depthInfo'])==null?void(0x12*0x187+0x10*0x262+-0x419e):_0x3d2913['width'])||0x2*0x916+-0x3*0x308+-0x910,_0x12f8e7=((_0x372fb8=this['_depthInfo'])==null?void(0xacb+0x112*-0x2+-0x8a7):_0x372fb8['height'])||0x1*-0x7ab+0x16bb+-0xf0c*0x1;let _0x55fc2c=!(-0x3*0x463+-0x20c8*-0x1+-0x139e);if((this['_textureDe'+'pth']['width']!==_0x4a26eb||this['_textureDe'+'pth']['height']!==_0x12f8e7)&&(this['_textureDe'+'pth']['_width']=_0x4a26eb,this['_textureDe'+'pth']['_height']=_0x12f8e7,_0x3d40fa=!(0x137e+0x1892+-0x2c10),_0x55fc2c=!(0x207f+-0x29*0x54+-0x130b)),_0x3d40fa&&(this['_depthInfo']?this['_depthMatr'+'ix']['data']['set'](this['_depthInfo']['normDepthB'+'ufferFromN'+'ormView']['matrix']):this['_depthMatr'+'ix']['setIdentit'+'y']()),this['_depthInfo']){if(_0x35ae4b){if(this['_depthInfo']['texture']){const _0x389596=this['_manager']['app']['graphicsDe'+'vice']['gl'];switch(this['_textureDe'+'pth']['impl']['_glTexture']=this['_depthInfo']['texture'],this['_depthInfo']['textureTyp'+'e']==='texture-ar'+'ray'?this['_textureDe'+'pth']['impl']['_glTarget']=_0x389596['TEXTURE_2D'+'_ARRAY']:this['_textureDe'+'pth']['impl']['_glTarget']=_0x389596['TEXTURE_2D'],this['_manager']['views']['depthPixel'+'Format']){case Ji:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x389596['R32F'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x389596['FLOAT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x389596['RED'];break;case $i:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x389596['DEPTH_COMP'+'ONENT16'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x389596['UNSIGNED_S'+'HORT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x389596['DEPTH_COMP'+'ONENT'];break;}this['_textureDe'+'pth']['impl']['_glCreated']=!(0x455+0x1c2d*0x1+-0x2082);}}else this['_textureDe'+'pth']['_levels'][-0x1ec8*-0x1+0x21c1+0x1583*-0x3]=new Uint8Array(this['_depthInfo']['data']),this['_textureDe'+'pth']['upload']();}else this['_textureDe'+'pth']['_levels'][0x1*0x234a+0x11c5+-0x121*0x2f]=this['_emptyDept'+'hBuffer'],this['_textureDe'+'pth']['upload']();_0x55fc2c&&this['fire']('depth:resi'+'ze',_0x4a26eb,_0x12f8e7);}['updateTran'+'sforms'](_0x4e05bf){_0x4e05bf?(this['_viewInvOf'+'fMat']['mul2'](_0x4e05bf,this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewInvOf'+'fMat'])['invert']()):(this['_viewInvOf'+'fMat']['copy'](this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewMat'])),this['_viewMat3']['setFromMat'+'4'](this['_viewOffMa'+'t']),this['_projViewO'+'ffMat']['mul2'](this['_projMat'],this['_viewOffMa'+'t']),this['_positionD'+'ata'][0x26e0+-0x1*-0x10bd+-0x379d]=this['_viewInvOf'+'fMat']['data'][-0xab5+0x20e1+-0x1620],this['_positionD'+'ata'][-0x107d+0x2*0xfbd+0x112*-0xe]=this['_viewInvOf'+'fMat']['data'][0x1829+0x102d+-0x2849],this['_positionD'+'ata'][0x209b+0x2569*0x1+-0x4602]=this['_viewInvOf'+'fMat']['data'][0x13*0x9d+-0x398+-0x801];}['_onDeviceL'+'ost'](){this['_frameBuff'+'erSource']=null,this['_frameBuff'+'er']=null,this['_depthInfo']=null;}['getDepth'](_0x6f1c8a,_0x2c9eb3){var _0x5956b9;return this['_manager']['views']['depthGpuOp'+'timized']?null:((_0x5956b9=this['_depthInfo'])==null?void(0x1035*-0x1+-0x1e53*0x1+-0x5d1*-0x8):_0x5956b9['getDepthIn'+'Meters'](_0x6f1c8a,_0x2c9eb3))??null;}['destroy'](){if(this['_depthInfo']=null,this['_textureCo'+'lor']&&(this['_textureCo'+'lor']['destroy'](),this['_textureCo'+'lor']=null),this['_textureDe'+'pth']&&(this['_textureDe'+'pth']['destroy'](),this['_textureDe'+'pth']=null),this['_frameBuff'+'erSource']){const _0x3c8d3b=this['_manager']['app']['graphicsDe'+'vice']['gl'];_0x3c8d3b['deleteFram'+'ebuffer'](this['_frameBuff'+'erSource']),this['_frameBuff'+'erSource']=null,_0x3c8d3b['deleteFram'+'ebuffer'](this['_frameBuff'+'er']),this['_frameBuff'+'er']=null;}}}h(O0,'EVENT_DEPT'+'HRESIZE','depth:resi'+'ze');class Bh extends me{constructor(_0x16c924){super(),h(this,'_manager'),h(this,'_index',new Map()),h(this,'_indexTmp',new Map()),h(this,'_list',[]),h(this,'_supported'+'Color',Ae['browser']&&!!window['XRCamera']&&!!window['XRWebGLBin'+'ding']),h(this,'_supported'+'Depth',Ae['browser']&&!!window['XRDepthInf'+'ormation']),h(this,'_available'+'Color',!(0xdfb+-0x4c8+-0x932)),h(this,'_available'+'Depth',!(-0x8*0x7c+-0x22bd+0x2*0x134f)),h(this,'_depthUsag'+'e',''),h(this,'_depthForm'+'at',''),h(this,'_depthForm'+'ats',{[M0]:ap,[D0]:$i,[I0]:Ji}),(this['_manager']=_0x16c924,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}get['list'](){return this['_list'];}get['supportedC'+'olor'](){return this['_supported'+'Color'];}get['supportedD'+'epth'](){return this['_supported'+'Depth'];}get['availableC'+'olor'](){return this['_available'+'Color'];}get['availableD'+'epth'](){return this['_available'+'Depth'];}get['depthUsage'](){return this['_depthUsag'+'e'];}get['depthGpuOp'+'timized'](){return this['_depthUsag'+'e']===P0;}get['depthForma'+'t'](){return this['_depthForm'+'at'];}get['depthPixel'+'Format'](){return this['_depthForm'+'ats'][this['_depthForm'+'at']]??null;}['update'](_0xcb598f,_0x12217d){for(let _0x46dc3a=0x130f+-0xf*0x9+-0x2*0x944;_0x46dc3a<_0x12217d['length'];_0x46dc3a++)this['_indexTmp']['set'](_0x12217d[_0x46dc3a]['eye'],_0x12217d[_0x46dc3a]);for(const [_0x4cba06,_0x5276b8]of this['_indexTmp']){let _0xe40c82=this['_index']['get'](_0x4cba06);_0xe40c82?_0xe40c82['update'](_0xcb598f,_0x5276b8):(_0xe40c82=new O0(this['_manager'],_0x5276b8,_0x12217d['length']),this['_index']['set'](_0x4cba06,_0xe40c82),this['_list']['push'](_0xe40c82),_0xe40c82['update'](_0xcb598f,_0x5276b8),this['fire']('add',_0xe40c82));}for(const [_0x5596c2,_0x268736]of this['_index']){if(this['_indexTmp']['has'](_0x5596c2))continue;_0x268736['destroy'](),this['_index']['delete'](_0x5596c2);const _0x4d3321=this['_list']['indexOf'](_0x268736);_0x4d3321!==-(-0x16d0+-0xf92+0x2663)&&this['_list']['splice'](_0x4d3321,-0x7b9*0x2+0x1e4*-0x1+0x1157),this['fire']('remove',_0x268736);}this['_indexTmp']['clear']();}['get'](_0x4a93d1){return this['_index']['get'](_0x4a93d1)||null;}['_onSession'+'Start'](){if(this['_manager']['type']===$o&&this['_manager']['session']['enabledFea'+'tures']&&(this['_available'+'Color']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('camera-acc'+'ess')!==-(-0x707+0x2511+-0x3*0xa03),this['_available'+'Depth']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('depth-sens'+'ing')!==-(0x19aa+0xaf*0x16+-0x28b3),this['_available'+'Depth'])){const _0x1c5d94=this['_manager']['session'];this['_depthUsag'+'e']=_0x1c5d94['depthUsage'],this['_depthForm'+'at']=_0x1c5d94['depthDataF'+'ormat'];}}['_onSession'+'End'](){for(const _0x5d5c15 of this['_index']['values']())_0x5d5c15['destroy']();this['_index']['clear'](),this['_available'+'Color']=!(-0x1d4b+-0x148a+-0x2*-0x18eb),this['_available'+'Depth']=!(0xf62*-0x1+-0x6a*-0x17+0x5dd),this['_depthUsag'+'e']='',this['_depthForm'+'at']='',this['_list']['length']=0x9*-0x26e+0x68d*-0x1+0x1c6b;}}h(Bh,'EVENT_ADD','add'),h(Bh,'EVENT_REMO'+'VE','remove');class ln extends me{constructor(_0x5d4b5a){super(),h(this,'app'),h(this,'_supported',Ae['browser']&&!!navigator['xr']),h(this,'_available',{}),h(this,'_type',null),h(this,'_spaceType',null),h(this,'_session',null),h(this,'_baseLayer',null),h(this,'webglBindi'+'ng',null),h(this,'_reference'+'Space',null),h(this,'domOverlay'),h(this,'hitTest'),h(this,'imageTrack'+'ing'),h(this,'planeDetec'+'tion'),h(this,'meshDetect'+'ion'),h(this,'input'),h(this,'lightEstim'+'ation'),h(this,'views'),h(this,'anchors'),h(this,'_camera',null),h(this,'_localPosi'+'tion',new D()),h(this,'_localRota'+'tion',new le()),h(this,'_depthNear',-0x4a*0x35+0x1016+-0xc4+0.1),h(this,'_depthFar',-0x325*0x2+0xaac+-0x2*0x3d),h(this,'_supported'+'FrameRates',null),h(this,'_width',0xc4b*-0x2+0x1257+0x63f),h(this,'_height',-0x18bd+0xdac+0xb11*0x1),h(this,'_framebuff'+'erScaleFac'+'tor',0x49*-0x1+0x1c31+-0x1be7),(this['app']=_0x5d4b5a,this['_available'][lU]=!(0x1d5f*-0x1+-0x414+0x1*0x2174),this['_available'][cU]=!(-0xa46+0x2e3*0x5+0x13*-0x38),this['_available'][$o]=!(-0xaed+-0x65*0x2e+0x4*0x745),this['views']=new Bh(this),this['domOverlay']=new fU(this),this['hitTest']=new jr(this),this['imageTrack'+'ing']=new L0(this),this['planeDetec'+'tion']=new Do(this),this['meshDetect'+'ion']=new Lo(this),this['input']=new Li(this),this['lightEstim'+'ation']=new Zu(this),this['anchors']=new on(this),this['views']=new Bh(this),this['_supported']&&(navigator['xr']['addEventLi'+'stener']('devicechan'+'ge',()=>{this['_deviceAva'+'ilabilityC'+'heck']();}),this['_deviceAva'+'ilabilityC'+'heck'](),this['app']['graphicsDe'+'vice']['on']('devicelost',this['_onDeviceL'+'ost'],this),this['app']['graphicsDe'+'vice']['on']('devicerest'+'ored',this['_onDeviceR'+'estored'],this)),this['isPC']=z0());}['destroy'](){}['start'](_0x44f90c,_0x38abbb,_0x18027e,_0x42ff1b){let _0x411116=_0x42ff1b;if(typeof _0x42ff1b=='object'&&(_0x411116=_0x42ff1b['callback']),!this['_available'][_0x38abbb]){_0x411116&&_0x411116(new Error('XR\x20is\x20not\x20'+'available'));return;}if(this['_session']){_0x411116&&_0x411116(new Error('XR\x20session'+'\x20is\x20alread'+'y\x20started'));return;}this['_camera']=_0x44f90c,this['_camera']['camera']['xr']=this,this['_type']=_0x38abbb,this['_spaceType']=_0x18027e,this['_framebuff'+'erScaleFac'+'tor']=(_0x42ff1b==null?void(0x5ba*0x2+-0xfdd+0x469):_0x42ff1b['framebuffe'+'rScaleFact'+'or'])??-0x3*0x8f8+-0x15d4+0x30bd,this['_setClipPl'+'anes'](_0x44f90c['nearClip'],_0x44f90c['farClip']);const _0x4be09b={'requiredFeatures':[_0x18027e],'optionalFeatures':[]},_0x197c9e=this['app']['graphicsDe'+'vice'];_0x197c9e!=null&&_0x197c9e['isWebGPU']&&_0x4be09b['requiredFe'+'atures']['push']('webgpu');const _0x496da0=_0x197c9e==null?void(-0x775*-0x3+0x1e6a+-0x34c9):_0x197c9e['isWebGL2'];if(_0x38abbb===$o){if(_0x4be09b['optionalFe'+'atures']['push']('light-esti'+'mation'),_0x4be09b['optionalFe'+'atures']['push']('hit-test'),_0x42ff1b&&(_0x42ff1b['imageTrack'+'ing']&&this['imageTrack'+'ing']['supported']&&_0x4be09b['optionalFe'+'atures']['push']('image-trac'+'king'),_0x42ff1b['planeDetec'+'tion']&&_0x4be09b['optionalFe'+'atures']['push']('plane-dete'+'ction'),_0x42ff1b['meshDetect'+'ion']&&_0x4be09b['optionalFe'+'atures']['push']('mesh-detec'+'tion')),this['domOverlay']['supported']&&this['domOverlay']['root']&&(_0x4be09b['optionalFe'+'atures']['push']('dom-overla'+'y'),_0x4be09b['domOverlay']={'root':this['domOverlay']['root']}),_0x42ff1b&&_0x42ff1b['anchors']&&this['anchors']['supported']&&_0x4be09b['optionalFe'+'atures']['push']('anchors'),_0x42ff1b&&_0x42ff1b['depthSensi'+'ng']&&this['views']['supportedD'+'epth']){_0x4be09b['optionalFe'+'atures']['push']('depth-sens'+'ing');const _0x327157=[],_0x32150b=[];if(_0x327157['push'](P0,dU),_0x32150b['push'](I0,M0,D0),_0x42ff1b['depthSensi'+'ng']['usagePrefe'+'rence']){const _0x339dea=_0x327157['indexOf'](_0x42ff1b['depthSensi'+'ng']['usagePrefe'+'rence']);_0x339dea!==-(0x16*0x1c6+0xb85+0x7*-0x738)&&_0x327157['splice'](_0x339dea,-0x26*0x63+0x4da+0x9d9),_0x327157['unshift'](_0x42ff1b['depthSensi'+'ng']['usagePrefe'+'rence']);}if(_0x42ff1b['depthSensi'+'ng']['dataFormat'+'Preference']){const _0xe06cd7=_0x32150b['indexOf'](_0x42ff1b['depthSensi'+'ng']['dataFormat'+'Preference']);_0xe06cd7!==-(0xdec+-0x10ca+0x2df)&&_0x32150b['splice'](_0xe06cd7,-0x1168*0x1+0x2432+-0x12c9),_0x32150b['unshift'](_0x42ff1b['depthSensi'+'ng']['dataFormat'+'Preference']);}_0x4be09b['depthSensi'+'ng']={'usagePreference':_0x327157,'dataFormatPreference':_0x32150b};}_0x496da0&&_0x42ff1b&&_0x42ff1b['cameraColo'+'r']&&this['views']['supportedC'+'olor']&&_0x4be09b['optionalFe'+'atures']['push']('camera-acc'+'ess');}_0x4be09b['optionalFe'+'atures']['push']('hand-track'+'ing'),_0x42ff1b&&_0x42ff1b['optionalFe'+'atures']&&(_0x4be09b['optionalFe'+'atures']=_0x4be09b['optionalFe'+'atures']['concat'](_0x42ff1b['optionalFe'+'atures'])),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['images']['length']?this['imageTrack'+'ing']['prepareIma'+'ges']((_0x44a843,_0x2c99d3)=>{if(_0x44a843){_0x411116&&_0x411116(_0x44a843),this['fire']('error',_0x44a843);return;}_0x2c99d3!==null&&(_0x4be09b['trackedIma'+'ges']=_0x2c99d3),this['_onStartOp'+'tionsReady'](_0x38abbb,_0x18027e,_0x4be09b,_0x411116);}):this['_onStartOp'+'tionsReady'](_0x38abbb,_0x18027e,_0x4be09b,_0x411116);}['_onStartOp'+'tionsReady'](_0x36b20a,_0x6ca8a1,_0x4db4cf,_0x24396e){const _0x2998a6=this['isPC']?{'requiredFeatures':['local-floo'+'r']}:_0x4db4cf;navigator['xr']['requestSes'+'sion'](_0x36b20a,_0x2998a6)['then'](_0x11880f=>{this['_onSession'+'Start'](_0x11880f,_0x6ca8a1,_0x24396e);})['catch'](_0x3b137c=>{this['_camera']['camera']['xr']=null,this['_camera']=null,this['_type']=null,this['_spaceType']=null,_0x24396e&&_0x24396e(_0x3b137c),this['fire']('error',_0x3b137c);});}['end'](_0x17a501){if(!this['_session']){_0x17a501&&_0x17a501(new Error('XR\x20Session'+'\x20is\x20not\x20in'+'itialized'));return;}this['webglBindi'+'ng']=null,_0x17a501&&this['once']('end',_0x17a501),this['_session']['end']();}['isAvailabl'+'e'](_0x43b17d){return this['_available'][_0x43b17d];}['_deviceAva'+'ilabilityC'+'heck'](){for(const _0x1c0b99 in this['_available'])this['_sessionSu'+'pportCheck'](_0x1c0b99);}['initiateRo'+'omCapture'](_0xa171bb){if(!this['_session']){_0xa171bb(new Error('Session\x20is'+'\x20not\x20activ'+'e'));return;}if(!this['_session']['initiateRo'+'omCapture']){_0xa171bb(new Error('Session\x20do'+'es\x20not\x20sup'+'port\x20manua'+'l\x20room\x20cap'+'ture'));return;}this['_session']['initiateRo'+'omCapture']()['then'](()=>{_0xa171bb&&_0xa171bb(null);})['catch'](_0x259789=>{_0xa171bb&&_0xa171bb(_0x259789);});}['updateTarg'+'etFrameRat'+'e'](_0x329c76,_0x5b9936){var _0x3fb8ec;if(!((_0x3fb8ec=this['_session'])!=null&&_0x3fb8ec['updateTarg'+'etFrameRat'+'e'])){_0x5b9936==null||_0x5b9936(new Error('unable\x20to\x20'+'update\x20fra'+'meRate'));return;}this['_session']['updateTarg'+'etFrameRat'+'e'](_0x329c76)['then'](()=>{_0x5b9936==null||_0x5b9936();})['catch'](_0x38dee4=>{_0x5b9936==null||_0x5b9936(_0x38dee4);});}['_sessionSu'+'pportCheck'](_0x46a2a3){navigator['xr']['isSessionS'+'upported'](_0x46a2a3)['then'](_0x320b04=>{this['_available'][_0x46a2a3]!==_0x320b04&&(this['_available'][_0x46a2a3]=_0x320b04,this['fire']('available',_0x46a2a3,_0x320b04),this['fire']('available:'+_0x46a2a3,_0x320b04));})['catch'](_0x233ba4=>{this['fire']('error',_0x233ba4);});}['_onSession'+'Start'](_0x1b0eaf,_0x2f0ada,_0x4da732){let _0x45e8e8=!(0x25b5+0x1aa+-0x275e*0x1);this['_session']=_0x1b0eaf;const _0x50f42b=()=>{this['fire']('visibility'+':change',_0x1b0eaf['visibility'+'State']);},_0xc2223f=()=>{this['_setClipPl'+'anes'](this['_camera']['nearClip'],this['_camera']['farClip']);},_0x361e65=()=>{this['_camera']&&(this['_camera']['off']('set_nearCl'+'ip',_0xc2223f),this['_camera']['off']('set_farCli'+'p',_0xc2223f),this['_camera']['camera']['xr']=null,this['_camera']=null),_0x1b0eaf['removeEven'+'tListener']('end',_0x361e65),_0x1b0eaf['removeEven'+'tListener']('visibility'+'change',_0x50f42b),_0x45e8e8||this['fire']('end'),this['_session']=null,this['_reference'+'Space']=null,this['_width']=0x2593*0x1+0x153d*-0x1+-0x1056,this['_height']=0x15d*0x1+0x1*-0x2207+-0x25*-0xe2,this['_type']=null,this['_spaceType']=null,this['app']['systems']&&this['app']['tick']();};_0x1b0eaf['addEventLi'+'stener']('end',_0x361e65),_0x1b0eaf['addEventLi'+'stener']('visibility'+'change',_0x50f42b),this['_camera']['on']('set_nearCl'+'ip',_0xc2223f),this['_camera']['on']('set_farCli'+'p',_0xc2223f),w['assert'](window,'window\x20is\x20'+'needed\x20to\x20'+'scale\x20the\x20'+'XR\x20framebu'+'ffer.\x20Are\x20'+'you\x20runnin'+'g\x20XR\x20headl'+'ess?'),this['_createBas'+'eLayer'](),this['session']['supportedF'+'rameRates']?this['_supported'+'FrameRates']=Array['from'](this['session']['supportedF'+'rameRates']):this['_supported'+'FrameRates']=null,this['_session']['addEventLi'+'stener']('frameratec'+'hange',()=>{var _0x25c48a;this['fire']('frameratec'+'hange',(_0x25c48a=this['_session'])==null?void(-0x9b8*-0x4+0x24c6+0x1*-0x4ba6):_0x25c48a['frameRate']);}),_0x1b0eaf['requestRef'+'erenceSpac'+'e'](_0x2f0ada)['then'](_0x63a149=>{this['_reference'+'Space']=_0x63a149,this['app']['tick'](),_0x4da732&&_0x4da732(null),this['fire']('start');})['catch'](_0x18980f=>{_0x45e8e8=!(0x116*0x3+-0xb2b+0x7e9),_0x1b0eaf['end'](),_0x4da732&&_0x4da732(_0x18980f),this['fire']('error',_0x18980f);});}['_setClipPl'+'anes'](_0x39234c,_0x1832c3){this['_depthNear']===_0x39234c&&this['_depthFar']===_0x1832c3||(this['_depthNear']=_0x39234c,this['_depthFar']=_0x1832c3,this['_session']&&this['_session']['updateRend'+'erState']({'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_createBas'+'eLayer'](){const _0x59baef=this['app']['graphicsDe'+'vice'],_0x5cb568=_0x59baef['maxPixelRa'+'tio']/window['devicePixe'+'lRatio']*this['_framebuff'+'erScaleFac'+'tor'];if(this['_baseLayer']=new XRWebGLLayer(this['_session'],_0x59baef['gl'],{'alpha':!(-0x8*0x1ed+0x1*0x1055+-0x1*0xed),'depth':!(-0xc1*-0x11+0x2b7*-0x2+-0x763),'stencil':!(-0x1957+-0x1903*0x1+0x325a),'framebufferScaleFactor':_0x5cb568,'antialias':!(-0xf3*-0x1f+-0x1*-0x1fdd+-0x3d49)}),_0x59baef!=null&&_0x59baef['isWebGL2']&&window['XRWebGLBin'+'ding'])try{this['webglBindi'+'ng']=new XRWebGLBinding(this['_session'],_0x59baef['gl']);}catch(_0x525b50){this['fire']('error',_0x525b50);}this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']});}['_onDeviceL'+'ost'](){this['_session']&&(this['webglBindi'+'ng']&&(this['webglBindi'+'ng']=null),this['_baseLayer']=null,this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_onDeviceR'+'estored'](){this['_session']&&setTimeout(()=>{this['app']['graphicsDe'+'vice']['gl']['makeXRComp'+'atible']()['then'](()=>{this['_createBas'+'eLayer']();})['catch'](_0x16d886=>{this['fire']('error',_0x16d886);});},0x5c+0x3*-0x359+0x9af);}['update'](_0x1d720a){if(!this['_session'])return!(0xb0a*0x1+0xa10+-0x1519);const _0x4be92e=_0x1d720a['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rWidth'],_0x339695=_0x1d720a['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rHeight'];(this['_width']!==_0x4be92e||this['_height']!==_0x339695)&&(this['_width']=_0x4be92e,this['_height']=_0x339695,this['app']['graphicsDe'+'vice']['setResolut'+'ion'](_0x4be92e,_0x339695));const _0x4c79f9=_0x1d720a['getViewerP'+'ose'](this['_reference'+'Space']);if(!_0x4c79f9)return!(-0x1*0x1c29+0x13ff*-0x1+0x3029);const _0x4c9b0f=this['views']['list']['length'];this['views']['update'](_0x1d720a,_0x4c79f9['views']);const _0x2ec2b7=_0x4c79f9['transform']['position'],_0x310f79=_0x4c79f9['transform']['orientatio'+'n'];if(this['_localPosi'+'tion']['set'](_0x2ec2b7['x'],_0x2ec2b7['y'],_0x2ec2b7['z']),this['_localRota'+'tion']['set'](_0x310f79['x'],_0x310f79['y'],_0x310f79['z'],_0x310f79['w']),_0x4c9b0f===0xe3b+-0x1cf7+0xebc&&this['views']['list']['length']>-0x1ee3+0x226+0x1cbd*0x1){const _0x1af8cf=new te(),_0x2abc61=this['views']['list'][0x42b*0x3+0x291*-0xb+-0x53e*-0x3];_0x1af8cf['copy'](_0x2abc61['projMat']);const _0x202967=_0x1af8cf['data'],_0x343d2e=(0xbc0+0x2060+0x2*-0x160f)*Math['atan']((0x2b5*0x3+-0x332*0x5+0x7dc)/_0x202967[-0x18*-0x86+0x1*0x21d8+-0x5f*0x7d])*(0x8ca+-0x218f+0x1979)/Math['PI'],_0x418042=_0x202967[0x4a6+-0x1192+0x1*0xcf1]/_0x202967[-0x12*-0x2e+0x10e2+-0x141e*0x1],_0x3582ea=_0x202967[0x7a3+-0x10f*0x3+0x5e*-0xc]/(_0x202967[0x381+-0x1f6+-0x181]+(0x1e52+0x1*-0x1598+-0x13f*0x7)),_0x5d5bd=_0x202967[-0x55e+0x35*-0x9d+0x13*0x1ff]/(_0x202967[-0x219e+0x89*-0x6+0x1*0x24de]-(0x12b0+-0x1830*0x1+-0x581*-0x1));this['_camera']['camera']['setXrPrope'+'rties']({'aspectRatio':_0x418042,'farClip':_0x3582ea,'fov':_0x343d2e,'horizontalFov':!(-0x1118+-0xa62*-0x1+0x6b7),'nearClip':_0x5d5bd});}return this['_camera']['camera']['_node']['setLocalPo'+'sition'](this['_localPosi'+'tion']),this['_camera']['camera']['_node']['setLocalRo'+'tation'](this['_localRota'+'tion']),this['input']['update'](_0x1d720a),this['_type']===$o&&(this['hitTest']['supported']&&this['hitTest']['update'](_0x1d720a),this['lightEstim'+'ation']['supported']&&this['lightEstim'+'ation']['update'](_0x1d720a),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['update'](_0x1d720a),this['anchors']['supported']&&this['anchors']['update'](_0x1d720a),this['planeDetec'+'tion']['supported']&&this['planeDetec'+'tion']['update'](_0x1d720a),this['meshDetect'+'ion']['supported']&&this['meshDetect'+'ion']['update'](_0x1d720a)),this['fire']('update',_0x1d720a),!(0xb0f+-0x68a+0x59*-0xd);}get['supported'](){return this['_supported'];}get['active'](){return!!this['_session'];}get['type'](){return this['_type'];}get['spaceType'](){return this['_spaceType'];}get['session'](){return this['_session'];}get['frameRate'](){var _0x32d056;return((_0x32d056=this['_session'])==null?void(0x107c+0x269c*0x1+-0x3718):_0x32d056['frameRate'])??null;}get['supportedF'+'rameRates'](){return this['_supported'+'FrameRates'];}get['framebuffe'+'rScaleFact'+'or'](){return this['_framebuff'+'erScaleFac'+'tor'];}set['fixedFovea'+'tion'](_0x23d9ca){var _0x115cfc;(((_0x115cfc=this['_baseLayer'])==null?void(0x2452+0x7bf+-0x2c11):_0x115cfc['fixedFovea'+'tion'])??null)!==null&&(this['app']['graphicsDe'+'vice']['samples']>-0x2*0x12b6+-0x1*0xc5f+0x31cc&&w['warn']('Fixed\x20Fove'+'ation\x20is\x20i'+'gnored.\x20Di'+'sable\x20anti'+'-aliasing\x20'+'for\x20it\x20to\x20'+'be\x20effecti'+'ve.'),this['_baseLayer']['fixedFovea'+'tion']=_0x23d9ca);}get['fixedFovea'+'tion'](){var _0x46e27e;return((_0x46e27e=this['_baseLayer'])==null?void(-0xebd+-0x55d*0x1+0x1*0x141a):_0x46e27e['fixedFovea'+'tion'])??null;}get['camera'](){return this['_camera']?this['_camera']['entity']:null;}get['visibility'+'State'](){return this['_session']?this['_session']['visibility'+'State']:null;}}h(ln,'EVENT_AVAI'+'LABLE','available'),h(ln,'EVENT_STAR'+'T','start'),h(ln,'EVENT_END','end'),h(ln,'EVENT_UPDA'+'TE','update'),h(ln,'EVENT_ERRO'+'R','error');class $U extends Ks{constructor(_0x371c19,_0x19c48c={}){super(_0x371c19);const _0x4b3108=new tL();_0x4b3108['graphicsDe'+'vice']=_0x19c48c['graphicsDe'+'vice']??this['createDevi'+'ce'](_0x371c19,_0x19c48c),this['addCompone'+'ntSystems'](_0x4b3108),this['addResourc'+'eHandles'](_0x4b3108),_0x4b3108['elementInp'+'ut']=_0x19c48c['elementInp'+'ut'],_0x4b3108['keyboard']=_0x19c48c['keyboard'],_0x4b3108['mouse']=_0x19c48c['mouse'],_0x4b3108['touch']=_0x19c48c['touch'],_0x4b3108['gamepads']=_0x19c48c['gamepads'],_0x4b3108['scriptPref'+'ix']=_0x19c48c['scriptPref'+'ix'],_0x4b3108['assetPrefi'+'x']=_0x19c48c['assetPrefi'+'x'],_0x4b3108['scriptsOrd'+'er']=_0x19c48c['scriptsOrd'+'er'],_0x4b3108['soundManag'+'er']=new Pw(),_0x4b3108['lightmappe'+'r']=pL,_0x4b3108['batchManag'+'er']=IE,_0x4b3108['xr']=ln,this['init'](_0x4b3108);}['createDevi'+'ce'](_0x253e28,_0xd15332){return _0xd15332['graphicsDe'+'viceOption'+'s']||(_0xd15332['graphicsDe'+'viceOption'+'s']={}),Ae['browser']&&navigator['xr']&&(_0xd15332['graphicsDe'+'viceOption'+'s']['xrCompatib'+'le']=!(0x2a*-0x44+-0x12bb*0x1+-0x1de3*-0x1)),_0xd15332['graphicsDe'+'viceOption'+'s']['alpha']=_0xd15332['graphicsDe'+'viceOption'+'s']['alpha']||!(-0x1612+-0x1c1d*-0x1+0x2*-0x305),new aw(_0x253e28,_0xd15332['graphicsDe'+'viceOption'+'s']);}['addCompone'+'ntSystems'](_0x236166){_0x236166['componentS'+'ystems']=[wm,nR,NR,RL,BL,KR,zO,xF,wF,kF,hF,VL,kO,YO,LR,$L,aF,oF,mF,XR,UR,gF,BF];}['addResourc'+'eHandles'](_0x1bc336){_0x1bc336['resourceHa'+'ndlers']=[zF,WN,$N,XN,Ek,yk,oU,Ok,mk,jN,Dk,bk,JN,pk,QN,Ik,uk,ek,tk,YN,Nk,Lk,Rk,ZN,fk];}}class XU extends me{constructor(_0xe1ad84,_0x1164b9){super(),h(this,'_assets',new Set()),h(this,'_loadingAs'+'sets',new Set()),h(this,'_waitingAs'+'sets',new Set()),h(this,'_loading',!(0x285*-0x1+0x169d+0x1417*-0x1)),h(this,'_loaded',!(0x9*-0xdb+0xb*0x1f5+-0xdd3)),h(this,'_failed',[]),(this['_registry']=_0x1164b9,_0xe1ad84['forEach'](_0x5604c9=>{if(_0x5604c9 instanceof pe)_0x5604c9['registry']||(_0x5604c9['registry']=_0x1164b9),this['_assets']['add'](_0x5604c9);else{const _0x1b7791=_0x1164b9['get'](_0x5604c9);_0x1b7791?this['_assets']['add'](_0x1b7791):this['_waitForAs'+'set'](_0x5604c9);}}));}['destroy'](){this['_registry']['off']('load',this['_onLoad']),this['_registry']['off']('error',this['_onError']),this['_waitingAs'+'sets']['forEach'](_0x2b91d0=>{this['_registry']['off']('add:'+_0x2b91d0,this['_onAddAsse'+'t']);}),this['off']('progress'),this['off']('load');}['_assetHasD'+'ependencie'+'s'](_0x12675c){var _0x46ad86;return _0x12675c['type']==='model'&&((_0x46ad86=_0x12675c['file'])==null?void(-0xcd9+0x1*0xbb1+-0x4a*-0x4):_0x46ad86['url'])&&_0x12675c['file']['url']&&_0x12675c['file']['url']['match'](/.json$/g);}['load'](_0x4ae07e,_0x229ae7){if(this['_loading']){console['debug']('AssetListL'+'oader:\x20Loa'+'d\x20function'+'\x20called\x20mu'+'ltiple\x20tim'+'es.');return;}this['_loading']=!(0x94b+-0x1724+0xdd9),this['_callback']=_0x4ae07e,this['_scope']=_0x229ae7,this['_registry']['on']('load',this['_onLoad'],this),this['_registry']['on']('error',this['_onError'],this);let _0x595332=!(0x83*0xb+-0x226e+0x1cce);this['_assets']['forEach'](_0x9e258f=>{_0x9e258f['loaded']||(_0x595332=!(0x53e*-0x1+0x1de1+-0x18a3),this['_assetHasD'+'ependencie'+'s'](_0x9e258f)&&this['_registry']['loadFromUr'+'l'](_0x9e258f['file']['url'],_0x9e258f['type'],(_0xdf154f,_0x4839f3)=>{if(_0xdf154f){this['_onError'](_0xdf154f,_0x9e258f);return;}this['_onLoad'](_0x9e258f);}),this['_loadingAs'+'sets']['add'](_0x9e258f),this['_registry']['add'](_0x9e258f));}),this['_loadingAs'+'sets']['forEach'](_0x225e6a=>{this['_assetHasD'+'ependencie'+'s'](_0x225e6a)||this['_registry']['load'](_0x225e6a);}),!_0x595332&&this['_waitingAs'+'sets']['size']===-0x1ae*-0x3+-0x1b6a+0x1660&&this['_loadingCo'+'mplete']();}['ready'](_0x2244c9,_0xe9d374=this){this['_loaded']?_0x2244c9['call'](_0xe9d374,Array['from'](this['_assets'])):this['once']('load',_0x118fc7=>{_0x2244c9['call'](_0xe9d374,_0x118fc7);});}['_loadingCo'+'mplete'](){this['_loaded']||(this['_loaded']=!(-0x2d1*0x7+0x3*-0x5c9+0x2512),this['_registry']['off']('load',this['_onLoad'],this),this['_registry']['off']('error',this['_onError'],this),this['_failed']['length']?(this['_callback']&&this['_callback']['call'](this['_scope'],'Failed\x20to\x20'+'load\x20some\x20'+'assets',this['_failed']),this['fire']('error',this['_failed'])):(this['_callback']&&this['_callback']['call'](this['_scope']),this['fire']('load',Array['from'](this['_assets']))));}['_onLoad'](_0x47ad33){this['_loadingAs'+'sets']['has'](_0x47ad33)&&(this['fire']('progress',_0x47ad33),this['_loadingAs'+'sets']['delete'](_0x47ad33)),this['_loadingAs'+'sets']['size']===-0x3f*-0x8b+0x29c*0x1+-0x24d1&&setTimeout(()=>{this['_loadingCo'+'mplete']();},0xe75+0x2*0x3ad+-0x15cf);}['_onError'](_0x2b1f68,_0x141f47){this['_loadingAs'+'sets']['has'](_0x141f47)&&(this['_failed']['push'](_0x141f47),this['_loadingAs'+'sets']['delete'](_0x141f47)),this['_loadingAs'+'sets']['size']===-0xb0*0x2+-0x4*0x572+0x1728&&setTimeout(()=>{this['_loadingCo'+'mplete']();},-0x1b01+-0x1b2f+0x3630);}['_onAddAsse'+'t'](_0x5e9537){this['_waitingAs'+'sets']['delete'](_0x5e9537),this['_assets']['add'](_0x5e9537),_0x5e9537['loaded']||(this['_loadingAs'+'sets']['add'](_0x5e9537),this['_registry']['load'](_0x5e9537));}['_waitForAs'+'set'](_0xd27728){this['_waitingAs'+'sets']['add'](_0xd27728),this['_registry']['once']('add:'+_0xd27728,this['_onAddAsse'+'t'],this);}}const Fc=[],_U=[[],[],[]];class gU extends ys{constructor(_0x1deb23,_0x778504){super(_0x1deb23),h(this,'viewBindGr'+'oups',[]),this['renderer']=_0x778504;}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x283d42=>{_0x283d42['defaultUni'+'formBuffer']['destroy'](),_0x283d42['destroy']();}),this['viewBindGr'+'oups']['length']=0xa57+0x10e1+-0x1b38;}['update'](_0x1cb95e,_0x50e932,_0x40345f,_0x1b716b){this['camera']=_0x1cb95e,this['scene']=_0x50e932,this['layers']=_0x40345f,this['mapping']=_0x1b716b;}['execute'](){const _0x21a169=this['device'],{renderer:_0x3ce997,camera:_0x330984,scene:_0x5397c7,layers:_0x5a3c9e,mapping:_0x33eb15,renderTarget:_0x297636}=this,_0x8b24af=_0x5397c7['layers']['layerList'],_0x25e18a=_0x5397c7['layers']['subLayerEn'+'abled'],_0x428119=_0x5397c7['layers']['subLayerLi'+'st'];for(let _0x456ee4=0x1*0x19c7+0x786+-0x214d;_0x456ee4<_0x8b24af['length'];_0x456ee4++){const _0x26ee4b=_0x8b24af[_0x456ee4];if(!(_0x5a3c9e&&_0x5a3c9e['indexOf'](_0x26ee4b)<-0x14f9+-0x23b2+0x38ab*0x1)&&_0x26ee4b['enabled']&&_0x25e18a[_0x456ee4]&&_0x26ee4b['camerasSet']['has'](_0x330984['camera'])){const _0x3a55e3=_0x428119[_0x456ee4];Q['pushGpuMar'+'ker'](_0x21a169,_0x26ee4b['name']+'('+(_0x3a55e3?'TRANSP':'OPAQUE')+')'),_0x26ee4b['_clearDept'+'hBuffer']&&_0x3ce997['clear'](_0x330984['camera'],!(-0xe2*0x3+0x2345*0x1+-0x209e),!(-0x1d13*-0x1+-0x1c8a+-0x89*0x1),!(-0xe80+0x155a+-0x6d9));const _0xd08b2f=_0x26ee4b['meshInstan'+'ces'];for(let _0x1cc990=0x436*0x9+0xb*-0x11e+-0x199c;_0x1cc990<_0xd08b2f['length'];_0x1cc990++){const _0x2aa49c=_0xd08b2f[_0x1cc990];_0x2aa49c['pick']&&_0x2aa49c['transparen'+'t']===_0x3a55e3&&(Fc['push'](_0x2aa49c),_0x33eb15['set'](_0x2aa49c['id'],_0x2aa49c));}Fc['length']>-0x10*-0x16c+0x621*0x2+-0x2302&&(_0x5397c7['clusteredL'+'ightingEna'+'bled']&&_0x3ce997['worldClust'+'ersAllocat'+'or']['empty']['activate'](),_0x3ce997['setCameraU'+'niforms'](_0x330984['camera'],_0x297636),_0x21a169['supportsUn'+'iformBuffe'+'rs']&&_0x3ce997['setupViewU'+'niformBuff'+'ers'](this['viewBindGr'+'oups'],_0x3ce997['viewUnifor'+'mFormat'],_0x3ce997['viewBindGr'+'oupFormat'],null),_0x3ce997['renderForw'+'ard'](_0x330984['camera'],_0x297636,Fc,_U,Zn,_0x15ee30=>{_0x21a169['setBlendSt'+'ate'](pt['NOBLEND']);}),Fc['length']=-0x2f*0x26+0xd1a+-0x620),Q['popGpuMark'+'er'](_0x21a169);}}}}const Rf=new Set(),SU=new re();let qU=class{constructor(_0x13c438,_0x1e441d,_0x57d34c){h(this,'renderTarg'+'et',null),h(this,'mapping',new Map()),h(this,'deviceVali'+'d',!(-0x1ac9+-0x3e5+0x1eae)),(w['assert'](_0x13c438),this['renderer']=_0x13c438['renderer'],this['device']=_0x13c438['graphicsDe'+'vice'],this['renderPass']=new gU(this['device'],_0x13c438['renderer']),this['width']=-0x241*-0xb+0x1*-0x146b+-0x10*0x46,this['height']=0xe2*-0x1b+0x8ec+0x53*0x2e,this['resize'](_0x1e441d,_0x57d34c),this['device']['on']('destroy',()=>{this['deviceVali'+'d']=!(0xfc1*0x1+0x22d9+-0x3299);}));}['getSelecti'+'on'](_0x5d3f18,_0x368591,_0x1f57fa=0x4f*0x52+0xa67*-0x1+-0xee6,_0x237cca=0x8*-0xd+-0x1a17+0x80*0x35){const _0x238d90=this['device'];if(_0x238d90['isWebGPU'])return w['errorOnce']('pc.Picker#'+'getSelecti'+'on\x20is\x20not\x20'+'supported\x20'+'on\x20WebGPU,'+'\x20use\x20pc.Pi'+'cker#getSe'+'lectionAsy'+'nc\x20instead'+'.'),[];w['assert'](typeof _0x5d3f18!='object','Picker.get'+'Selection:'+'param\x20\x27rec'+'t\x27\x20is\x20depr'+'ecated,\x20us'+'e\x20\x27x,\x20y,\x20w'+'idth,\x20heig'+'ht\x27\x20instea'+'d.'),_0x368591=this['renderTarg'+'et']['height']-(_0x368591+_0x237cca);const _0x16371f=this['sanitizeRe'+'ct'](_0x5d3f18,_0x368591,_0x1f57fa,_0x237cca);_0x238d90['setRenderT'+'arget'](this['renderTarg'+'et']),_0x238d90['updateBegi'+'n']();const _0x3c3934=new Uint8Array((-0xd96+0x1fa1+-0x1207)*_0x16371f['z']*_0x16371f['w']);return _0x238d90['readPixels'](_0x16371f['x'],_0x16371f['y'],_0x16371f['z'],_0x16371f['w'],_0x3c3934),_0x238d90['updateEnd'](),this['decodePixe'+'ls'](_0x3c3934,this['mapping']);}['getSelecti'+'onAsync'](_0x555d56,_0x43b0b8,_0x2a9c4a=-0x1902+-0xbcd+-0x130*-0x1f,_0x52f60a=0x1b02*0x1+-0x21b5+0x35a*0x2){var _0x2301e7;(_0x2301e7=this['device'])!=null&&_0x2301e7['isWebGL2']&&(_0x43b0b8=this['renderTarg'+'et']['height']-(_0x43b0b8+_0x52f60a));const _0x3769fb=this['sanitizeRe'+'ct'](_0x555d56,_0x43b0b8,_0x2a9c4a,_0x52f60a);return this['renderTarg'+'et']['colorBuffe'+'r']['read'](_0x3769fb['x'],_0x3769fb['y'],_0x3769fb['z'],_0x3769fb['w'],{'renderTarget':this['renderTarg'+'et'],'immediate':!(-0x1af2+-0x1*0xe27+-0x9*-0x491)})['then'](_0xcaee04=>this['decodePixe'+'ls'](_0xcaee04,this['mapping']));}['sanitizeRe'+'ct'](_0x150138,_0x9f447f,_0x4f166a,_0x11463e){const _0x3c9c83=this['renderTarg'+'et']['width'],_0x3168c1=this['renderTarg'+'et']['height'];return _0x150138=Y['clamp'](Math['floor'](_0x150138),-0x1870+-0x698+0x52c*0x6,_0x3c9c83-(-0x275+0x348+-0xd2)),_0x9f447f=Y['clamp'](Math['floor'](_0x9f447f),-0x173*0xe+-0x1e0a+-0x1*-0x3254,_0x3168c1-(0x4*-0x4e5+0x4bb+0xeda)),_0x4f166a=Math['floor'](Math['max'](_0x4f166a,-0x9*-0x2e6+0x215b+-0x3b70)),_0x4f166a=Math['min'](_0x4f166a,_0x3c9c83-_0x150138),_0x11463e=Math['floor'](Math['max'](_0x11463e,-0x3a2+-0x1423*-0x1+-0x8*0x210)),_0x11463e=Math['min'](_0x11463e,_0x3168c1-_0x9f447f),SU['set'](_0x150138,_0x9f447f,_0x4f166a,_0x11463e);}['decodePixe'+'ls'](_0x48a0a7,_0x5a23a7){const _0x520c8e=[];if(this['deviceVali'+'d']){const _0x3e850a=_0x48a0a7['length'];for(let _0xb4fb9f=-0xe78+-0x92a+0x17a2*0x1;_0xb4fb9f<_0x3e850a;_0xb4fb9f+=-0x2*0x311+0x5a3+0x83){const _0x35cabe=_0x48a0a7[_0xb4fb9f+(-0x3*-0x38+0x1ea4+-0x4*0x7d3)],_0x331676=_0x48a0a7[_0xb4fb9f+(0x300+0x42d+-0x33*0x24)],_0x493dcf=_0x48a0a7[_0xb4fb9f+(-0x9*-0xd+-0xad*0x2+-0x4d*-0x3)],_0x59f07b=(_0x48a0a7[_0xb4fb9f+(0x1f0f+-0x4fc*0x7+-0x1ec*-0x2)]<<0x1*-0x18eb+0xf24+0x9df|_0x35cabe<<-0x20a1*-0x1+0x446+-0x24d7|_0x331676<<0x12d7+0x2*0xc54+-0x2b77*0x1|_0x493dcf)>>>0xd*0x101+-0x72*-0x7+0x102b*-0x1;_0x59f07b!==-0xa5*0x3514fc+-0x128*0x922541+0x1cb319993&&Rf['add'](_0x5a23a7['get'](_0x59f07b));}Rf['forEach'](_0x1a37eb=>{_0x1a37eb&&_0x520c8e['push'](_0x1a37eb);}),Rf['clear']();}return _0x520c8e;}['allocateRe'+'nderTarget'](){const _0x9fc6bf=new _e(this['device'],{'format':Ne,'width':this['width'],'height':this['height'],'mipmaps':!(0x239c+-0x3c*-0x7+-0x253f),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':'pick'});this['renderTarg'+'et']=new gt({'colorBuffer':_0x9fc6bf,'depth':!(0x1*0x18e2+0xd*-0x209+-0x193*-0x1)});}['releaseRen'+'derTarget'](){this['renderTarg'+'et']&&(this['renderTarg'+'et']['destroyTex'+'tureBuffer'+'s'](),this['renderTarg'+'et']['destroy'](),this['renderTarg'+'et']=null);}['prepare'](_0x27bde3,_0x66cbc4,_0x296055){_0x296055 instanceof Ot&&(_0x296055=[_0x296055]),(!this['renderTarg'+'et']||this['width']!==this['renderTarg'+'et']['width']||this['height']!==this['renderTarg'+'et']['height'])&&(this['releaseRen'+'derTarget'](),this['allocateRe'+'nderTarget']()),this['mapping']['clear']();const _0x4f8083=this['renderPass'];_0x4f8083['init'](this['renderTarg'+'et']),_0x4f8083['colorOps']['clearValue']=ie['WHITE'],_0x4f8083['colorOps']['clear']=!(0x17f*0x1+-0x3b0+0x231),_0x4f8083['depthStenc'+'ilOps']['clearDepth']=!(0x22c3+0x14c9*-0x1+-0x2*0x6fd),_0x4f8083['update'](_0x27bde3,_0x66cbc4,_0x296055,this['mapping']),_0x4f8083['render']();}['resize'](_0x1e6e12,_0x42cd73){this['width']=Math['floor'](_0x1e6e12),this['height']=Math['floor'](_0x42cd73);}},cr,hr;const Of=new D(),RS=new D(),Ri=new Dn(),Ro=new Dn(),ep=new Dn();Ri['end']=new D(),Ro['end']=new D(),ep['end']=new D();const en=new D(),Nc=new D(),Ff=new D(),OS=new D(),Nf=new D(),kc=new D(),Uc=new D(),Bc=new D(),zc=new D(),kf=new D(),yU=new D(),tn=new D(),wo=new D(),Vc=new D(),Gc=new D(),Eo=new D(),FS=new D(),NS=new D(),kS=new D(),US=new D(),vU=new re();function BS(_0x509615,_0x4175f2,_0x12b9d5){return yU['cross'](_0x509615,_0x4175f2)['dot'](_0x12b9d5);}function xU(_0x59d804,_0x1ea010,_0x182d97){en['sub2'](_0x1ea010,_0x59d804),Nc['sub2'](_0x182d97[-0x2200+-0x434*-0x1+0x1dcc],_0x59d804),Ff['sub2'](_0x182d97[0xab9+0xe3*-0x2b+0x3*0x923],_0x59d804),OS['sub2'](_0x182d97[0x1d05+-0x34*-0x97+0x3*-0x13e5],_0x59d804),kc['cross'](OS,en);let _0x215a85=Nc['dot'](kc),_0x58ef65,_0xd7bb50;if(_0x215a85>=-0x1fa1+0x1e6a*-0x1+0x3e0b){if(_0x58ef65=-Ff['dot'](kc),_0x58ef65<-0x25*-0xbe+-0x1c*0xe+-0x19ee||(_0xd7bb50=BS(en,Ff,Nc),_0xd7bb50<0x2480+0x1abb+-0x3f3b))return-(-0x12f3+-0x238e+0x3682);const _0x17207e=(0x2*0xd67+-0x1a01+-0xcc)/(_0x58ef65+_0x215a85+_0xd7bb50);Uc['copy'](_0x182d97[-0x22dd+0x1*-0x1809+0x3ae6])['mulScalar'](_0x58ef65*_0x17207e),Bc['copy'](_0x182d97[-0x1237+0x1b41+-0x909])['mulScalar'](_0x215a85*_0x17207e),zc['copy'](_0x182d97[-0x925+0x61f*0x3+-0x936])['mulScalar'](_0xd7bb50*_0x17207e),kf['copy'](Uc)['add'](Bc)['add'](zc);}else{if(Nf['sub2'](_0x182d97[0x189*-0x3+0x122f+-0xd91],_0x59d804),_0x58ef65=Nf['dot'](kc),_0x58ef65<0x2221+0xa00+-0x365*0xd||(_0xd7bb50=BS(en,Nc,Nf),_0xd7bb50<-0x1c62+0x8e+0x34*0x89))return-(-0x328*-0x9+-0x93f+0x265*-0x8);_0x215a85=-_0x215a85;const _0x50ec7f=(0x186e+-0xa9*-0x2c+0x1b*-0x1fb)/(_0x58ef65+_0x215a85+_0xd7bb50);Uc['copy'](_0x182d97[-0x33a*0x1+-0x1a3d+0x18d*0x13])['mulScalar'](_0x58ef65*_0x50ec7f),Bc['copy'](_0x182d97[-0xfae+-0x2ab*0x4+0x1a5d])['mulScalar'](_0x215a85*_0x50ec7f),zc['copy'](_0x182d97[0x16cc+0x6bb*0x3+-0x2afb*0x1])['mulScalar'](_0xd7bb50*_0x50ec7f),kf['copy'](Uc)['add'](Bc)['add'](zc);}return en['sub2'](_0x182d97[-0x90a+-0x1*0xcf9+0x23*0xa1],_0x182d97[0x389*-0xb+-0x1579+0x3c5e])['lengthSq']()<(0x5*0x37f+-0x7ac+-0x9cf+0.0001)*(0x108d*0x1+-0x136d*0x2+0x76f*0x3+0.0001)||en['sub2'](_0x182d97[-0x35*0x22+0x51f*0x1+-0x1*-0x1ec],_0x182d97[-0x1af*0x3+0x16*-0x199+0x2836])['lengthSq']()<(-0x38c+-0x1e62+0x10f7*0x2+0.0001)*(-0x15aa+-0x1d1d+-0x741*-0x7+0.0001)?-(0xf73+-0x6ce+-0x8a4):kf['sub'](_0x59d804)['lengthSq']();}class Am{constructor(_0x305e9d,_0x24cb94,_0x16ddea){this['event']=_0x305e9d,this['element']=_0x24cb94,this['camera']=_0x16ddea,this['_stopPropa'+'gation']=!(-0x1*0x1799+0x1ca1+0x9*-0x8f);}['stopPropag'+'ation'](){this['_stopPropa'+'gation']=!(-0xc*0x2f6+-0x182e*-0x1+0x1*0xb5a),this['event']&&(this['event']['stopImmedi'+'atePropaga'+'tion'](),this['event']['stopPropag'+'ation']());}}class bo extends Am{constructor(_0x44db5a,_0x32e740,_0x140ce4,_0x2aadc8,_0x4319d5,_0x1099ce,_0x4f64d5){super(_0x44db5a,_0x32e740,_0x140ce4),this['x']=_0x2aadc8,this['y']=_0x4319d5,this['ctrlKey']=_0x44db5a['ctrlKey']||!(0x24a4*0x1+0x26fc+-0x4b9f),this['altKey']=_0x44db5a['altKey']||!(0x1f9b+0xe11+-0x3*0xf39),this['shiftKey']=_0x44db5a['shiftKey']||!(0x16*0x19+-0x6fd+0x4d8),this['metaKey']=_0x44db5a['metaKey']||!(-0x2706+-0x12*-0x1aa+0x913*0x1),this['button']=_0x44db5a['button'],sa['isPointerL'+'ocked']()?(this['dx']=_0x44db5a['movementX']||_0x44db5a['webkitMove'+'mentX']||_0x44db5a['mozMovemen'+'tX']||0x3c2+-0x1469+0xcb*0x15,this['dy']=_0x44db5a['movementY']||_0x44db5a['webkitMove'+'mentY']||_0x44db5a['mozMovemen'+'tY']||0x1*0x2231+0x6f2+-0x2923):(this['dx']=_0x2aadc8-_0x1099ce,this['dy']=_0x4319d5-_0x4f64d5),this['wheelDelta']=0x2*0x5e2+0xdcc+-0x1990,_0x44db5a['type']==='wheel'&&(_0x44db5a['deltaY']>0x46d*-0x4+-0xc71+0x1e25?this['wheelDelta']=-0xd*-0x172+0xd*0x195+-0x275a:_0x44db5a['deltaY']<0x153+-0xcd4+-0x5*-0x24d&&(this['wheelDelta']=-(0x2ac+0x1*0x20b1+0x1f*-0x124)));}}class Ao extends Am{constructor(_0x16d7bd,_0x1acce4,_0x276ff6,_0x599bf0,_0x324258,_0x2cccb2){super(_0x16d7bd,_0x1acce4,_0x276ff6),this['touches']=_0x16d7bd['touches'],this['changedTou'+'ches']=_0x16d7bd['changedTou'+'ches'],this['x']=_0x599bf0,this['y']=_0x324258,this['touch']=_0x2cccb2;}}class dr extends Am{constructor(_0x4d63fe,_0xc278bf,_0x5b755f,_0x4a567e){super(_0x4d63fe,_0xc278bf,_0x5b755f),this['inputSourc'+'e']=_0x4a567e;}}class Xo{constructor(_0x3c1fad,_0x1a47ac){this['_app']=null,this['_attached']=!(0xf8b+-0x1a80+-0xaf6*-0x1),this['_target']=null,this['_enabled']=!(0x1b45+0x23f8+-0x3f3d),this['_lastX']=-0x144a+-0x25b*-0x7+0x3cd,this['_lastY']=-0x1ac3+-0x11*-0x22f+-0x66*0x1a,this['_upHandler']=this['_handleUp']['bind'](this),this['_downHandl'+'er']=this['_handleDow'+'n']['bind'](this),this['_moveHandl'+'er']=this['_handleMov'+'e']['bind'](this),this['_wheelHand'+'ler']=this['_handleWhe'+'el']['bind'](this),this['_touchstar'+'tHandler']=this['_handleTou'+'chStart']['bind'](this),this['_touchendH'+'andler']=this['_handleTou'+'chEnd']['bind'](this),this['_touchcanc'+'elHandler']=this['_touchendH'+'andler'],this['_touchmove'+'Handler']=this['_handleTou'+'chMove']['bind'](this),this['_sortHandl'+'er']=this['_sortEleme'+'nts']['bind'](this),this['_elements']=[],this['_hoveredEl'+'ement']=null,this['_pressedEl'+'ement']=null,this['_touchedEl'+'ements']={},this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired']={},this['_selectedE'+'lements']={},this['_selectedP'+'ressedElem'+'ents']={},this['_useMouse']=!_0x1a47ac||_0x1a47ac['useMouse']!==!(0x1b73+-0x1c7c*-0x1+0x1bf7*-0x2),this['_useTouch']=!_0x1a47ac||_0x1a47ac['useTouch']!==!(-0x697*0x1+0x1*-0x4cd+0x1*0xb65),this['_useXr']=!_0x1a47ac||_0x1a47ac['useXr']!==!(0x4*0x219+0x1af*0x5+0x12*-0xef),this['_selectEve'+'ntsAttache'+'d']=!(0x4*-0x5bf+0x160d+-0x50*-0x3),Ae['touch']&&(this['_clickedEn'+'tities']={}),this['attach'](_0x3c1fad);}set['enabled'](_0x46a4ad){this['_enabled']=_0x46a4ad;}get['enabled'](){return this['_enabled'];}set['app'](_0x39a275){this['_app']=_0x39a275;}get['app'](){return this['_app']||Ms();}['attach'](_0x1affa3){this['_attached']&&(this['_attached']=!(0x2*0x925+0x2*0x278+0x1*-0x1739),this['detach']()),this['_target']=_0x1affa3,this['_attached']=!(-0x1*-0x172e+-0x991*-0x1+0x20bf*-0x1);const _0x9931e5=Ae['passiveEve'+'nts']?{'passive':!(0x2*-0x247+0x1021+-0xb93)}:!(-0x5*0x691+0xa2+0x2034);this['_useMouse']&&(window['addEventLi'+'stener']('mouseup',this['_upHandler'],_0x9931e5),window['addEventLi'+'stener']('mousedown',this['_downHandl'+'er'],_0x9931e5),window['addEventLi'+'stener']('mousemove',this['_moveHandl'+'er'],_0x9931e5),window['addEventLi'+'stener']('wheel',this['_wheelHand'+'ler'],_0x9931e5)),this['_useTouch']&&Ae['touch']&&(this['_target']['addEventLi'+'stener']('touchstart',this['_touchstar'+'tHandler'],_0x9931e5),this['_target']['addEventLi'+'stener']('touchend',this['_touchendH'+'andler'],!(0x13b1*-0x1+0x1c46+0x4*-0x225)),this['_target']['addEventLi'+'stener']('touchmove',this['_touchmove'+'Handler'],!(-0x1*-0x3ae+-0x1*-0xb11+-0xebe)),this['_target']['addEventLi'+'stener']('touchcance'+'l',this['_touchcanc'+'elHandler'],!(-0x1f0+-0x10cf*-0x1+-0xede*0x1))),this['attachSele'+'ctEvents']();}['attachSele'+'ctEvents'](){!this['_selectEve'+'ntsAttache'+'d']&&this['_useXr']&&this['app']&&this['app']['xr']&&this['app']['xr']['supported']&&(this['_clickedEn'+'tities']||(this['_clickedEn'+'tities']={}),this['_selectEve'+'ntsAttache'+'d']=!(-0xf3+-0xd4f*0x1+0x16d*0xa),this['app']['xr']['on']('start',this['_onXrStart'],this));}['detach'](){if(!this['_attached'])return;this['_attached']=!(0x110c+-0x1592*-0x1+-0x269d*0x1);const _0x554b3b=Ae['passiveEve'+'nts']?{'passive':!(-0x1*-0x180d+-0x1*-0xe5+-0x2*0xc79)}:!(-0xb04+-0x43e+0xf43);this['_useMouse']&&(window['removeEven'+'tListener']('mouseup',this['_upHandler'],_0x554b3b),window['removeEven'+'tListener']('mousedown',this['_downHandl'+'er'],_0x554b3b),window['removeEven'+'tListener']('mousemove',this['_moveHandl'+'er'],_0x554b3b),window['removeEven'+'tListener']('wheel',this['_wheelHand'+'ler'],_0x554b3b)),this['_useTouch']&&(this['_target']['removeEven'+'tListener']('touchstart',this['_touchstar'+'tHandler'],_0x554b3b),this['_target']['removeEven'+'tListener']('touchend',this['_touchendH'+'andler'],!(-0x6*-0x43a+-0x1*0x191+0x5*-0x4c2)),this['_target']['removeEven'+'tListener']('touchmove',this['_touchmove'+'Handler'],!(-0x466*-0x6+0x133d+0x5*-0x920)),this['_target']['removeEven'+'tListener']('touchcance'+'l',this['_touchcanc'+'elHandler'],!(0x18b6+-0x7c8+-0x10ed))),this['_selectEve'+'ntsAttache'+'d']&&(this['_selectEve'+'ntsAttache'+'d']=!(-0xb50+-0x3fb*-0x3+0x2*-0x50),this['app']['xr']['off']('start',this['_onXrStart'],this),this['app']['xr']['off']('end',this['_onXrEnd'],this),this['app']['xr']['off']('update',this['_onXrUpdat'+'e'],this),this['app']['xr']['input']['off']('selectstar'+'t',this['_onSelectS'+'tart'],this),this['app']['xr']['input']['off']('selectend',this['_onSelectE'+'nd'],this),this['app']['xr']['input']['off']('remove',this['_onXrInput'+'Remove'],this)),this['_target']=null;}['addElement'](_0x1ad4a1){this['_elements']['indexOf'](_0x1ad4a1)===-(-0x5d*0x1f+-0x1*0x1b13+-0x2657*-0x1)&&this['_elements']['push'](_0x1ad4a1);}['removeElem'+'ent'](_0xa83d81){const _0x551f51=this['_elements']['indexOf'](_0xa83d81);_0x551f51!==-(-0x391+0x6*-0x1af+-0x36b*-0x4)&&this['_elements']['splice'](_0x551f51,-0xd*0x1ba+-0x72+0x16e5*0x1);}['_handleUp'](_0x4604ec){this['_enabled']&&(sa['isPointerL'+'ocked']()||(this['_calcMouse'+'Coords'](_0x4604ec),this['_onElement'+'MouseEvent']('mouseup',_0x4604ec)));}['_handleDow'+'n'](_0x5c4533){this['_enabled']&&(sa['isPointerL'+'ocked']()||(this['_calcMouse'+'Coords'](_0x5c4533),this['_onElement'+'MouseEvent']('mousedown',_0x5c4533)));}['_handleMov'+'e'](_0x2648f8){this['_enabled']&&(this['_calcMouse'+'Coords'](_0x2648f8),this['_onElement'+'MouseEvent']('mousemove',_0x2648f8),this['_lastX']=cr,this['_lastY']=hr);}['_handleWhe'+'el'](_0xc07ce9){this['_enabled']&&(this['_calcMouse'+'Coords'](_0xc07ce9),this['_onElement'+'MouseEvent']('mousewheel',_0xc07ce9));}['_determine'+'TouchedEle'+'ments'](_0x18d096){const _0x1d0657={},_0x56d3ac=this['app']['systems']['camera']['cameras'];for(let _0x5a61b2=_0x56d3ac['length']-(-0xa93+0x10fd+0x3*-0x223);_0x5a61b2>=0x1*0x45f+0x26c0+-0x2b1f;_0x5a61b2--){const _0x3c3dda=_0x56d3ac[_0x5a61b2];let _0x36dc55=-0xf16+-0x1eeb+0x2e01*0x1;const _0x42a6fb=_0x18d096['changedTou'+'ches']['length'];for(let _0x50359b=-0x6*-0x2a5+0x23f+0x1*-0x121d;_0x50359b<_0x42a6fb;_0x50359b++){if(_0x1d0657[_0x18d096['changedTou'+'ches'][_0x50359b]['identifier']]){_0x36dc55++;continue;}const _0x154070=Wc(_0x18d096['changedTou'+'ches'][_0x50359b]),_0x3afbe6=this['_getTarget'+'ElementByC'+'oords'](_0x3c3dda,_0x154070['x'],_0x154070['y']);_0x3afbe6&&(_0x36dc55++,_0x1d0657[_0x18d096['changedTou'+'ches'][_0x50359b]['identifier']]={'element':_0x3afbe6,'camera':_0x3c3dda,'x':_0x154070['x'],'y':_0x154070['y']});}if(_0x36dc55===_0x42a6fb)break;}return _0x1d0657;}['_handleTou'+'chStart'](_0x4ba6ed){if(!this['_enabled'])return;const _0x26c091=this['_determine'+'TouchedEle'+'ments'](_0x4ba6ed);for(let _0x4ff94f=-0x119c*0x2+0x9a3+-0x1995*-0x1,_0x5b9583=_0x4ba6ed['changedTou'+'ches']['length'];_0x4ff94f<_0x5b9583;_0x4ff94f++){const _0x14f000=_0x4ba6ed['changedTou'+'ches'][_0x4ff94f],_0x15ccda=_0x26c091[_0x14f000['identifier']],_0x4200f4=this['_touchedEl'+'ements'][_0x14f000['identifier']];_0x15ccda&&(!_0x4200f4||_0x15ccda['element']!==_0x4200f4['element'])&&(this['_fireEvent'](_0x4ba6ed['type'],new Ao(_0x4ba6ed,_0x15ccda['element'],_0x15ccda['camera'],_0x15ccda['x'],_0x15ccda['y'],_0x14f000)),this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired'][_0x14f000['identifier']]=!(-0x2*-0x36d+0x1*0x25b9+0x8ea*-0x5));}for(const _0x4cd5dc in _0x26c091)this['_touchedEl'+'ements'][_0x4cd5dc]=_0x26c091[_0x4cd5dc];}['_handleTou'+'chEnd'](_0x183efa){if(!this['_enabled'])return;const _0x422359=this['app']['systems']['camera']['cameras'];for(const _0x40164f in this['_clickedEn'+'tities'])delete this['_clickedEn'+'tities'][_0x40164f];for(let _0x5c6758=0x2*-0x338+-0x2*0x901+0x2a*0x95,_0x43eacf=_0x183efa['changedTou'+'ches']['length'];_0x5c6758<_0x43eacf;_0x5c6758++){const _0x4d6981=_0x183efa['changedTou'+'ches'][_0x5c6758],_0x6b47b4=this['_touchedEl'+'ements'][_0x4d6981['identifier']];if(!_0x6b47b4)continue;const _0x2f0207=_0x6b47b4['element'],_0x4c7a68=_0x6b47b4['camera'],_0x3832b2=_0x6b47b4['x'],_0x205661=_0x6b47b4['y'];delete this['_touchedEl'+'ements'][_0x4d6981['identifier']],delete this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired'][_0x4d6981['identifier']];const _0x165aa4=Wc(_0x4d6981);for(let _0x11f002=_0x422359['length']-(-0x1b95+-0x1*0xc5a+0x27f0);_0x11f002>=-0x18f6+-0x211a+0x3a10;_0x11f002--)this['_getTarget'+'ElementByC'+'oords'](_0x422359[_0x11f002],_0x165aa4['x'],_0x165aa4['y'])===_0x2f0207&&(this['_clickedEn'+'tities'][_0x2f0207['entity']['getGuid']()]||(this['_fireEvent']('click',new Ao(_0x183efa,_0x2f0207,_0x4c7a68,_0x3832b2,_0x205661,_0x4d6981)),this['_clickedEn'+'tities'][_0x2f0207['entity']['getGuid']()]=Date['now']()));this['_fireEvent'](_0x183efa['type'],new Ao(_0x183efa,_0x2f0207,_0x4c7a68,_0x3832b2,_0x205661,_0x4d6981));}}['_handleTou'+'chMove'](_0x55c88f){if(_0x55c88f['preventDef'+'ault'](),!this['_enabled'])return;const _0x5f02a0=this['_determine'+'TouchedEle'+'ments'](_0x55c88f);for(let _0x3bffab=-0x6a1*-0x2+0x22f5+-0x3037*0x1,_0x2c6ead=_0x55c88f['changedTou'+'ches']['length'];_0x3bffab<_0x2c6ead;_0x3bffab++){const _0x46d84e=_0x55c88f['changedTou'+'ches'][_0x3bffab],_0xfeaab2=_0x5f02a0[_0x46d84e['identifier']],_0x28c880=this['_touchedEl'+'ements'][_0x46d84e['identifier']];if(_0x28c880){const _0x452794=Wc(_0x46d84e);(!_0xfeaab2||_0xfeaab2['element']!==_0x28c880['element'])&&!this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired'][_0x46d84e['identifier']]&&(this['_fireEvent']('touchleave',new Ao(_0x55c88f,_0x28c880['element'],_0x28c880['camera'],_0x452794['x'],_0x452794['y'],_0x46d84e)),this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired'][_0x46d84e['identifier']]=!(0x1ad1+0x697*-0x1+-0x143a)),this['_fireEvent']('touchmove',new Ao(_0x55c88f,_0x28c880['element'],_0x28c880['camera'],_0x452794['x'],_0x452794['y'],_0x46d84e));}}}['_onElement'+'MouseEvent'](_0x39a260,_0x578e41){let _0x1f3345=null;const _0x3807a7=this['_hoveredEl'+'ement'];this['_hoveredEl'+'ement']=null;const _0x3499da=this['app']['systems']['camera']['cameras'];let _0x1e61a8;for(let _0x5355ca=_0x3499da['length']-(-0x2*0x723+0x1*0x13b5+-0x8b*0xa);_0x5355ca>=-0x26be*-0x1+0x14f3+-0x1*0x3bb1&&(_0x1e61a8=_0x3499da[_0x5355ca],_0x1f3345=this['_getTarget'+'ElementByC'+'oords'](_0x1e61a8,cr,hr),!_0x1f3345);_0x5355ca--);if(this['_hoveredEl'+'ement']=_0x1f3345,(_0x39a260==='mousemove'||_0x39a260==='mouseup')&&this['_pressedEl'+'ement']?this['_fireEvent'](_0x39a260,new bo(_0x578e41,this['_pressedEl'+'ement'],_0x1e61a8,cr,hr,this['_lastX'],this['_lastY'])):_0x1f3345&&(this['_fireEvent'](_0x39a260,new bo(_0x578e41,_0x1f3345,_0x1e61a8,cr,hr,this['_lastX'],this['_lastY'])),_0x39a260==='mousedown'&&(this['_pressedEl'+'ement']=_0x1f3345)),_0x3807a7!==this['_hoveredEl'+'ement']&&(_0x3807a7&&this['_fireEvent']('mouseleave',new bo(_0x578e41,_0x3807a7,_0x1e61a8,cr,hr,this['_lastX'],this['_lastY'])),this['_hoveredEl'+'ement']&&this['_fireEvent']('mouseenter',new bo(_0x578e41,this['_hoveredEl'+'ement'],_0x1e61a8,cr,hr,this['_lastX'],this['_lastY']))),_0x39a260==='mouseup'&&this['_pressedEl'+'ement']){if(this['_pressedEl'+'ement']===this['_hoveredEl'+'ement']){const _0x981a35=this['_hoveredEl'+'ement']['entity']['getGuid']();let _0x409bc2=!this['_clickedEn'+'tities'];if(this['_clickedEn'+'tities']){const _0x4b6421=this['_clickedEn'+'tities'][_0x981a35]||-0x3*0x491+0x9c3+0x3f0;_0x409bc2=Date['now']()-_0x4b6421>-0x1c36+0x4bc+0x18a6*0x1,delete this['_clickedEn'+'tities'][_0x981a35];}_0x409bc2&&this['_fireEvent']('click',new bo(_0x578e41,this['_hoveredEl'+'ement'],_0x1e61a8,cr,hr,this['_lastX'],this['_lastY']));}this['_pressedEl'+'ement']=null;}}['_onXrStart'](){this['app']['xr']['on']('end',this['_onXrEnd'],this),this['app']['xr']['on']('update',this['_onXrUpdat'+'e'],this),this['app']['xr']['input']['on']('selectstar'+'t',this['_onSelectS'+'tart'],this),this['app']['xr']['input']['on']('selectend',this['_onSelectE'+'nd'],this),this['app']['xr']['input']['on']('remove',this['_onXrInput'+'Remove'],this);}['_onXrEnd'](){this['app']['xr']['off']('update',this['_onXrUpdat'+'e'],this),this['app']['xr']['input']['off']('selectstar'+'t',this['_onSelectS'+'tart'],this),this['app']['xr']['input']['off']('selectend',this['_onSelectE'+'nd'],this),this['app']['xr']['input']['off']('remove',this['_onXrInput'+'Remove'],this);}['_onXrUpdat'+'e'](){if(!this['_enabled'])return;const _0xb8f04e=this['app']['xr']['input']['inputSourc'+'es'];for(let _0x8ac81f=0x17*0x35+-0x1bd3*-0x1+-0x2096;_0x8ac81f<_0xb8f04e['length'];_0x8ac81f++)this['_onElement'+'SelectEven'+'t']('selectmove',_0xb8f04e[_0x8ac81f],null);}['_onXrInput'+'Remove'](_0x163322){const _0x3deb66=this['_selectedE'+'lements'][_0x163322['id']];_0x3deb66&&(_0x163322['_elementEn'+'tity']=null,this['_fireEvent']('selectleav'+'e',new dr(null,_0x3deb66,null,_0x163322))),delete this['_selectedE'+'lements'][_0x163322['id']],delete this['_selectedP'+'ressedElem'+'ents'][_0x163322['id']];}['_onSelectS'+'tart'](_0x357c4a,_0x28819e){this['_enabled']&&this['_onElement'+'SelectEven'+'t']('selectstar'+'t',_0x357c4a,_0x28819e);}['_onSelectE'+'nd'](_0x3c7191,_0x2cf605){this['_enabled']&&this['_onElement'+'SelectEven'+'t']('selectend',_0x3c7191,_0x2cf605);}['_onElement'+'SelectEven'+'t'](_0x2960f1,_0x5b1253,_0x23f720){let _0x451e87;const _0x1c8635=this['_selectedE'+'lements'][_0x5b1253['id']];let _0x17f28a;const _0x9b8a6=this['app']['systems']['camera']['cameras'];let _0x2c0d1b;if(_0x5b1253['elementInp'+'ut']){ep['set'](_0x5b1253['getOrigin'](),_0x5b1253['getDirecti'+'on']());for(let _0x29ba72=_0x9b8a6['length']-(0x5*0x542+0x9*0xc1+-0x2112);_0x29ba72>=0x8f2+-0x1160+0x1*0x86e&&(_0x2c0d1b=_0x9b8a6[_0x29ba72],_0x451e87=this['_getTarget'+'ElementByR'+'ay'](ep,_0x2c0d1b),!_0x451e87);_0x29ba72--);}_0x5b1253['_elementEn'+'tity']=_0x451e87||null,_0x451e87?(this['_selectedE'+'lements'][_0x5b1253['id']]=_0x451e87,_0x17f28a=_0x451e87):delete this['_selectedE'+'lements'][_0x5b1253['id']],_0x1c8635!==_0x17f28a&&(_0x1c8635&&this['_fireEvent']('selectleav'+'e',new dr(_0x23f720,_0x1c8635,_0x2c0d1b,_0x5b1253)),_0x17f28a&&this['_fireEvent']('selectente'+'r',new dr(_0x23f720,_0x17f28a,_0x2c0d1b,_0x5b1253)));const _0x522b23=this['_selectedP'+'ressedElem'+'ents'][_0x5b1253['id']];_0x2960f1==='selectmove'&&_0x522b23&&this['_fireEvent']('selectmove',new dr(_0x23f720,_0x522b23,_0x2c0d1b,_0x5b1253)),_0x2960f1==='selectstar'+'t'&&(this['_selectedP'+'ressedElem'+'ents'][_0x5b1253['id']]=_0x17f28a,_0x17f28a&&this['_fireEvent']('selectstar'+'t',new dr(_0x23f720,_0x17f28a,_0x2c0d1b,_0x5b1253))),!_0x5b1253['elementInp'+'ut']&&_0x522b23&&(delete this['_selectedP'+'ressedElem'+'ents'][_0x5b1253['id']],_0x1c8635&&this['_fireEvent']('selectend',new dr(_0x23f720,_0x522b23,_0x2c0d1b,_0x5b1253))),_0x2960f1==='selectend'&&_0x5b1253['elementInp'+'ut']&&(delete this['_selectedP'+'ressedElem'+'ents'][_0x5b1253['id']],_0x522b23&&this['_fireEvent']('selectend',new dr(_0x23f720,_0x522b23,_0x2c0d1b,_0x5b1253)),_0x522b23&&_0x522b23===_0x1c8635&&this['_fireEvent']('click',new dr(_0x23f720,_0x522b23,_0x2c0d1b,_0x5b1253)));}['_fireEvent'](_0x388ad6,_0x29d953){let _0x226ab7=_0x29d953['element'];for(;_0x226ab7['fire'](_0x388ad6,_0x29d953),!(_0x29d953['_stopPropa'+'gation']||!_0x226ab7['entity']['parent']||(_0x226ab7=_0x226ab7['entity']['parent']['element'],!_0x226ab7)););}['_calcMouse'+'Coords'](_0x46e4b1){const _0x545ffd=this['_target']['getBoundin'+'gClientRec'+'t'](),_0x100c0b=Math['floor'](_0x545ffd['left']),_0x4c974d=Math['floor'](_0x545ffd['top']);cr=_0x46e4b1['clientX']-_0x100c0b,hr=_0x46e4b1['clientY']-_0x4c974d;}['_sortEleme'+'nts'](_0x4103eb,_0x1079e8){const _0x2ab9b3=this['app']['scene']['layers']['sortTransp'+'arentLayer'+'s'](_0x4103eb['layers'],_0x1079e8['layers']);return _0x2ab9b3!==0x1f63+0x1*-0x1999+-0x5ca?_0x2ab9b3:_0x4103eb['screen']&&!_0x1079e8['screen']?-(0x103e+-0x15cf+0x2*0x2c9):!_0x4103eb['screen']&&_0x1079e8['screen']?0x803+0x1d8*0x2+-0xbb2:!_0x4103eb['screen']&&!_0x1079e8['screen']?-0x13*-0x9b+-0xe8a*-0x1+-0x1a0b:_0x4103eb['screen']['screen']['screenSpac'+'e']&&!_0x1079e8['screen']['screen']['screenSpac'+'e']?-(-0x2658+0x1cfb+0x95e):_0x1079e8['screen']['screen']['screenSpac'+'e']&&!_0x4103eb['screen']['screen']['screenSpac'+'e']?-0x1a3d+-0x1438+-0x2e76*-0x1:_0x1079e8['drawOrder']-_0x4103eb['drawOrder'];}['_getTarget'+'ElementByC'+'oords'](_0x31c8ef,_0x5953ee,_0x453de2){const _0x33df40=this['_calculate'+'RayScreen'](_0x5953ee,_0x453de2,_0x31c8ef,Ri)?Ri:null,_0x530458=this['_calculate'+'Ray3d'](_0x5953ee,_0x453de2,_0x31c8ef,Ro)?Ro:null;return this['_getTarget'+'Element'](_0x31c8ef,_0x33df40,_0x530458);}['_getTarget'+'ElementByR'+'ay'](_0x402c83,_0x1e79a8){Ri['origin']['copy'](_0x402c83['origin']),Ri['direction']['copy'](_0x402c83['direction']),Ri['end']['copy'](Ri['direction'])['mulScalar'](_0x1e79a8['farClip']*(0x24*0x7b+-0x108b*-0x2+0x34*-0xf8))['add'](Ri['origin']);const _0x1d466b=Ri,_0x29ba6b=_0x1e79a8['worldToScr'+'een'](_0x1d466b['origin'],Of),_0x7a4efd=this['_calculate'+'RayScreen'](_0x29ba6b['x'],_0x29ba6b['y'],_0x1e79a8,Ro)?Ro:null;return this['_getTarget'+'Element'](_0x1e79a8,_0x7a4efd,_0x1d466b);}['_getTarget'+'Element'](_0x58f6b1,_0x1cedd4,_0x3f989b){let _0xe40fe6=null,_0x86a128=(-0x120*0x1c+-0xc6b+0x2bec)/(0x1828+0x135c+-0x2b84);this['_elements']['sort'](this['_sortHandl'+'er']);for(let _0x4233aa=0x11b*0x21+0x1*0x1024+-0x349f,_0x62c5ce=this['_elements']['length'];_0x4233aa<_0x62c5ce;_0x4233aa++){const _0x58f6cc=this['_elements'][_0x4233aa];if(_0x58f6cc['layers']['some'](_0x7936ab=>_0x58f6b1['layersSet']['has'](_0x7936ab))){if(_0x58f6cc['screen']&&_0x58f6cc['screen']['screen']['screenSpac'+'e']){if(!_0x1cedd4)continue;if(this['_checkElem'+'ent'](_0x1cedd4,_0x58f6cc,!(-0x1cf*0x7+-0x1*0x4db+0x1184))>=0x1f19+-0xc45*-0x3+-0x43e8){_0xe40fe6=_0x58f6cc;break;}}else{if(!_0x3f989b)continue;const _0x5a33ef=this['_checkElem'+'ent'](_0x3f989b,_0x58f6cc,!(0x1449+0x167*0x17+0x3*-0x1183));if(_0x5a33ef>=-0x1525+0x229*0x1+0x12fc&&(_0x5a33ef<_0x86a128&&(_0xe40fe6=_0x58f6cc,_0x86a128=_0x5a33ef),_0x58f6cc['screen'])){_0xe40fe6=_0x58f6cc;break;}}}}return _0xe40fe6;}['_calculate'+'RayScreen'](_0x3ee3b7,_0x54e9af,_0x2790fa,_0xb76402){const _0xed04ce=this['app']['graphicsDe'+'vice']['width'],_0x2d145b=this['app']['graphicsDe'+'vice']['height'],_0x34703e=_0x2790fa['rect']['z']*_0xed04ce,_0x14355d=_0x2790fa['rect']['w']*_0x2d145b,_0x315daf=_0x2790fa['rect']['x']*_0xed04ce,_0x3accef=_0x315daf+_0x34703e,_0x2676a4=(-0x10f6+-0x7*-0x2e7+-0xb*0x4e-_0x2790fa['rect']['y'])*_0x2d145b,_0x34de62=_0x2676a4-_0x14355d;let _0x1708ab=_0x3ee3b7*_0xed04ce/this['_target']['clientWidt'+'h'],_0x36a330=_0x54e9af*_0x2d145b/this['_target']['clientHeig'+'ht'];return _0x1708ab>=_0x315daf&&_0x1708ab<=_0x3accef&&_0x36a330<=_0x2676a4&&_0x36a330>=_0x34de62?(_0x1708ab=_0xed04ce*(_0x1708ab-_0x315daf)/_0x34703e,_0x36a330=_0x2d145b*(_0x36a330-_0x34de62)/_0x14355d,_0x36a330=_0x2d145b-_0x36a330,_0xb76402['origin']['set'](_0x1708ab,_0x36a330,-0x13e9+0x5*-0x5df+-0x3145*-0x1),_0xb76402['direction']['set'](0x222+0xc1f+-0xe41,-0x2*0x9ee+-0x1*0xf05+-0x22e1*-0x1,-(0x1794*0x1+-0xd*-0x13+-0x12*0x15d)),_0xb76402['end']['copy'](_0xb76402['direction'])['mulScalar'](0xac2*-0x1+0x7de+0x6a*0x7)['add'](_0xb76402['origin']),!(-0x1*0x19df+-0x234d+0x2*0x1e96)):!(-0x705+0xb50+-0x44a);}['_calculate'+'Ray3d'](_0x2a808a,_0x571df9,_0x30e5b4,_0x2a4250){const _0xc7e6ef=this['_target']['clientWidt'+'h'],_0x330911=this['_target']['clientHeig'+'ht'],_0x310bc6=_0x30e5b4['rect']['z']*_0xc7e6ef,_0x10ec32=_0x30e5b4['rect']['w']*_0x330911,_0x555c25=_0x30e5b4['rect']['x']*_0xc7e6ef,_0x1d77d1=_0x555c25+_0x310bc6,_0x17e791=(-0x4fc+0x18fd+0x2*-0xa00-_0x30e5b4['rect']['y'])*_0x330911,_0x78bc6b=_0x17e791-_0x10ec32;let _0x23ce4d=_0x2a808a,_0x199fd0=_0x571df9;return _0x2a808a>=_0x555c25&&_0x2a808a<=_0x1d77d1&&_0x571df9<=_0x17e791&&_0x199fd0>=_0x78bc6b?(_0x23ce4d=_0xc7e6ef*(_0x23ce4d-_0x555c25)/_0x310bc6,_0x199fd0=_0x330911*(_0x199fd0-_0x78bc6b)/_0x10ec32,_0x30e5b4['screenToWo'+'rld'](_0x23ce4d,_0x199fd0,_0x30e5b4['nearClip'],Of),_0x30e5b4['screenToWo'+'rld'](_0x23ce4d,_0x199fd0,_0x30e5b4['farClip'],RS),_0x2a4250['origin']['copy'](Of),_0x2a4250['direction']['set'](-0x1*0x1fde+-0x1300*0x2+0x42*0x10f,-0x25b1+0x228+-0xb*-0x33b,-(0x2269+-0x2f9+-0x1f6f)),_0x2a4250['end']['copy'](RS),!(-0x16dc+-0x98c+-0x7a*-0x44)):!(0x1ee*-0xb+-0x252b+0x3a66);}['_checkElem'+'ent'](_0x5d182a,_0x167325,_0x1c6fe4){if(_0x167325['maskedBy']&&this['_checkElem'+'ent'](_0x5d182a,_0x167325['maskedBy']['element'],_0x1c6fe4)<-0x27*0x6f+-0x2500+0x35e9)return-(-0x5c6+-0x1da2+-0x715*-0x5);let _0x43b515;_0x1c6fe4?_0x43b515=Xo['calculateS'+'caleToScre'+'en'](_0x167325):_0x43b515=Xo['calculateS'+'caleToWorl'+'d'](_0x167325);const _0x597a18=Xo['buildHitCo'+'rners'](_0x167325,_0x1c6fe4?_0x167325['screenCorn'+'ers']:_0x167325['worldCorne'+'rs'],_0x43b515);return xU(_0x5d182a['origin'],_0x5d182a['end'],_0x597a18);}static['buildHitCo'+'rners'](_0x27a3d5,_0x2cd3c1,_0x459d3c){let _0xa9f743=_0x2cd3c1;if(_0x27a3d5['entity']&&_0x27a3d5['entity']['button']){const _0x4de90a=_0x27a3d5['entity']['button']['hitPadding']||vU;wo['copy'](_0x27a3d5['entity']['up']),Vc['copy'](wo)['mulScalar'](-(0x176*0x11+0x2462*0x1+0x3d37*-0x1)),Eo['copy'](_0x27a3d5['entity']['right']),Gc['copy'](Eo)['mulScalar'](-(0x225*-0x4+0x65*0x3a+-0xe4d)),wo['mulScalar'](_0x4de90a['w']*_0x459d3c['y']),Vc['mulScalar'](_0x4de90a['y']*_0x459d3c['y']),Eo['mulScalar'](_0x4de90a['z']*_0x459d3c['x']),Gc['mulScalar'](_0x4de90a['x']*_0x459d3c['x']),FS['copy'](_0xa9f743[-0x528+-0x1*-0x1c09+0x16e1*-0x1])['add'](Vc)['add'](Gc),NS['copy'](_0xa9f743[-0xa*-0x313+0x10a5+0xa*-0x4bd])['add'](Vc)['add'](Eo),kS['copy'](_0xa9f743[0x10d7+0xd83+-0x4*0x796])['add'](wo)['add'](Eo),US['copy'](_0xa9f743[0xd*-0x35+0x1d3*-0xc+0x1898])['add'](wo)['add'](Gc),_0xa9f743=[FS,NS,kS,US];}if(_0x459d3c['x']<0x14e8*0x1+-0x5b*-0x22+-0x20fe){const _0x49a68e=_0xa9f743[0x119e+-0x17*0x144+0x170*0x8]['x'],_0x1891e1=_0xa9f743[-0x41*0x92+0x674*-0x1+0x15c3*0x2]['x'];_0xa9f743[-0x531*0x1+-0x24a*-0x1+-0x1*-0x2e7]['x']=_0x49a68e,_0xa9f743[-0x904+0x2e*0x34+0x1*-0x53]['x']=_0x1891e1,_0xa9f743[0x1*0x221+0x220e+-0x242d]['x']=_0x1891e1,_0xa9f743[-0xd82+-0x780+-0x1*-0x1505]['x']=_0x49a68e;}if(_0x459d3c['y']<-0x2439+-0x9e*-0x24+0xe01){const _0x1560ff=_0xa9f743[-0x195f+0x2*0xcb3+-0x5]['y'],_0x1e9039=_0xa9f743[0x6cb+0x18c+-0x857*0x1]['y'];_0xa9f743[-0x121+0x17af+-0x168e]['y']=_0x1560ff,_0xa9f743[0x9c8+-0x426+-0x5a1]['y']=_0x1560ff,_0xa9f743[-0x92b*-0x4+0x2*-0xb0b+-0xe94]['y']=_0x1e9039,_0xa9f743[0x14be+0xf0a+-0x23c5]['y']=_0x1e9039;}if(_0x459d3c['z']<0x8cb*-0x1+-0x1d1c+0x139*0x1f){const _0x56e8e8=_0xa9f743[-0x1c9*-0x14+0x217*0x10+-0x4522]['x'],_0x30f5a5=_0xa9f743[0x13d7+0x3*-0xcf4+-0x1307*-0x1]['y'],_0x13bf4f=_0xa9f743[0x6f3*0x5+0x16ad+-0x396a]['z'];_0xa9f743[0x558+-0x2d6+-0x280]['x']=_0xa9f743[0x190b+0x7*0x310+-0x1*0x2e7b]['x'],_0xa9f743[0xd1f+-0x1*0x1af5+0x4*0x376]['y']=_0xa9f743[0x1677+-0x161e+-0x1*0x59]['y'],_0xa9f743[0x1*0x67+-0x1ac2+0x1a5d]['z']=_0xa9f743[-0x1f21+-0x2*-0x12ce+-0x67b]['z'],_0xa9f743[-0x1*-0x1f67+0xa1d+-0x2984]['x']=_0x56e8e8,_0xa9f743[-0x74*0x43+0x104+-0x4*-0x756]['y']=_0x30f5a5,_0xa9f743[0xf*-0x55+0x22b*0x10+-0x1db5]['z']=_0x13bf4f;}return _0xa9f743;}static['calculateS'+'caleToScre'+'en'](_0x367aa7){let _0xe9088b=_0x367aa7['entity'];const _0xbcb439=_0x367aa7['screen']['screen']['scale'];for(tn['set'](_0xbcb439,_0xbcb439,_0xbcb439);_0xe9088b&&!_0xe9088b['screen'];)tn['mul'](_0xe9088b['getLocalSc'+'ale']()),_0xe9088b=_0xe9088b['parent'];return tn;}static['calculateS'+'caleToWorl'+'d'](_0x2c2163){let _0x5d8225=_0x2c2163['entity'];for(tn['set'](-0xeda+0x56*-0x51+0x2a11,-0x13*0x1d2+-0x1d4e*0x1+0x3fe5*0x1,-0x2*0x38f+-0x148*-0x1b+-0x1b79);_0x5d8225;)tn['mul'](_0x5d8225['getLocalSc'+'ale']()),_0x5d8225=_0x5d8225['parent'];return tn;}}J['prototype']['scale']=J['prototype']['mulScalar'],D['prototype']['scale']=D['prototype']['mulScalar'],re['prototype']['scale']=re['prototype']['mulScalar'],new re();function YU(_0x64c7fd,_0x3e9f8e){return w['deprecated']('pc.createS'+'phere\x20is\x20d'+'eprecated.'+'\x20Use\x20\x27pc.M'+'esh.fromGe'+'ometry(dev'+'ice,\x20new\x20S'+'phereGeome'+'try(option'+'s);\x27\x20forma'+'t\x20instead.'),Ge['fromGeomet'+'ry'](_0x64c7fd,new _m(_0x3e9f8e));}Object['defineProp'+'erties'](gt['prototype'],{'_glFrameBuffer':{'get':function(){return w['deprecated']('pc.RenderT'+'arget#_glF'+'rameBuffer'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RenderT'+'arget.impl'+'#_glFrameB'+'uffer\x20inst'+'ead.'),this['impl']['_glFrameBu'+'ffer'];},'set':function(_0x9152){w['deprecated']('pc.RenderT'+'arget#_glF'+'rameBuffer'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RenderT'+'arget.impl'+'#_glFrameB'+'uffer\x20inst'+'ead.');}}}),Object['defineProp'+'erty'](kt,'defaultIns'+'tancingFor'+'mat',{'get':function(){return w['assert']('pc.VertexF'+'ormat.defa'+'ultInstanc'+'ingFormat\x20'+'is\x20depreca'+'ted,\x20use\x20p'+'c.VertexFo'+'rmat.getDe'+'faultInsta'+'ncingForma'+'t(graphics'+'Device).'),null;}}),Object['defineProp'+'erties'](_e['prototype'],{'rgbm':{'get':function(){return w['deprecated']('pc.Texture'+'#rgbm\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Te'+'xture#type'+'\x20instead.'),this['type']===Zi;},'set':function(_0x37f576){w['deprecated']('pc.Texture'+'#rgbm\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Te'+'xture#type'+'\x20instead.'),this['type']=_0x37f576?Zi:Ds;}},'swizzleGGGR':{'get':function(){return w['deprecated']('pc.Texture'+'#swizzleGG'+'GR\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Textu'+'re#type\x20in'+'stead.'),this['type']===Jo;},'set':function(_0x3721ab){w['deprecated']('pc.Texture'+'#swizzleGG'+'GR\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Textu'+'re#type\x20in'+'stead.'),this['type']=_0x3721ab?Jo:Ds;}},'_glTexture':{'get':function(){return w['deprecated']('pc.Texture'+'#_glTextur'+'e\x20is\x20no\x20lo'+'nger\x20avail'+'able,\x20use\x20'+'Use\x20pc.Tex'+'ture.impl.'+'_glTexture'+'\x20instead.'),this['impl']['_glTexture'];}}}),(function(){let _0x51b058;try{const _0x2b5fc6=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');');_0x51b058=_0x2b5fc6();}catch(_0x42ea0e){_0x51b058=window;}_0x51b058['setInterva'+'l'](_0xac72ea,-0x354*0x8+-0x1feb*0x1+0x4a2b);}()),Object['defineProp'+'erty']($e['prototype'],'boneLimit',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#bo'+'neLimit\x20is'+'\x20deprecate'+'d\x20and\x20the\x20'+'limit\x20has\x20'+'been\x20remov'+'ed.'),0x212e+-0x25af+0x7*0x137;}}),Object['defineProp'+'erty']($e['prototype'],'webgl2',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#we'+'bgl2\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e#isWebGL2'+'\x20instead.'),this['isWebGL2'];}}),Object['defineProp'+'erty']($e['prototype'],'textureFlo'+'atHighPrec'+'ision',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureFloat'+'HighPrecis'+'ion\x20is\x20dep'+'recated\x20an'+'d\x20always\x20r'+'eturns\x20tru'+'e.'),!(0xd92+-0x7*0x10+-0xd22);}}),Object['defineProp'+'erty']($e['prototype'],'extBlendMi'+'nmax',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tBlendMinm'+'ax\x20is\x20depr'+'ecated\x20as\x20'+'it\x20is\x20alwa'+'ys\x20true.'),!(0x2cf*-0x6+-0x2d6*0x3+-0x21d*-0xc);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'HalfFloat',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureHa'+'lfFloat\x20is'+'\x20deprecate'+'d\x20as\x20it\x20is'+'\x20always\x20tr'+'ue.'),!(-0x11*-0x182+-0x6d9+-0x12c9);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'Lod',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureLo'+'d\x20is\x20depre'+'cated\x20as\x20i'+'t\x20is\x20alway'+'s\x20true.'),!(-0x1d*0x12e+-0x3d1*-0x1+0xfb*0x1f);}}),Object['defineProp'+'erty']($e['prototype'],'textureHal'+'fFloatFilt'+'erable',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureHalfF'+'loatFilter'+'able\x20is\x20de'+'precated\x20a'+'s\x20it\x20is\x20al'+'ways\x20true.'),!(-0x3*-0x8be+0x1ce+-0x1c08);}}),Object['defineProp'+'erty']($e['prototype'],'supportsMr'+'t',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsMrt\x20'+'is\x20depreca'+'ted\x20as\x20it\x20'+'is\x20always\x20'+'true.'),!(0x57*0x1b+-0xb90+-0xd*-0x2f);}}),Object['defineProp'+'erty']($e['prototype'],'supportsVo'+'lumeTextur'+'es',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsVolu'+'meTextures'+'\x20is\x20deprec'+'ated\x20as\x20it'+'\x20is\x20always'+'\x20true.'),!(-0x1*0xe43+-0x75e+0x15a1);}}),Object['defineProp'+'erty']($e['prototype'],'supportsIn'+'stancing',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsInst'+'ancing\x20is\x20'+'deprecated'+'\x20as\x20it\x20is\x20'+'always\x20tru'+'e.'),!(0x2571*-0x1+-0x2*0x31d+0x2bab);}}),Object['defineProp'+'erty']($e['prototype'],'textureHal'+'fFloatUpda'+'table',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureHalfF'+'loatUpdata'+'ble\x20is\x20dep'+'recated\x20as'+'\x20it\x20is\x20alw'+'ays\x20true.'),!(0xa4d+-0x1704+0xcb7);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'Float',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureFl'+'oat\x20is\x20dep'+'recated\x20as'+'\x20it\x20is\x20alw'+'ays\x20true'),!(-0x1524+-0xe68+0x238c);}}),Object['defineProp'+'erty']($e['prototype'],'extStandar'+'dDerivativ'+'es',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tStandardD'+'erivatives'+'\x20is\x20deprec'+'ated\x20as\x20it'+'\x20is\x20always'+'\x20true.'),!(0x14c2+0x14*0x1eb+-0xe*0x439);}}),pt['DEFAULT']=Object['freeze'](new pt());const ut=new pt(),ji=new Yt();$e['prototype']['setBlendFu'+'nction']=function(_0x982190,_0x125a15){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendFunc'+'tion\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e.setBlend'+'State\x20inst'+'ead.');const _0x2d1ca7=this['blendState'];ut['copy'](_0x2d1ca7),ut['setColorBl'+'end'](_0x2d1ca7['colorOp'],_0x982190,_0x125a15),ut['setAlphaBl'+'end'](_0x2d1ca7['alphaOp'],_0x982190,_0x125a15),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendFu'+'nctionSepa'+'rate']=function(_0x5326dc,_0x2e084b,_0x5d48a9,_0x3b20fa){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendFunc'+'tionSepara'+'te\x20is\x20depr'+'ecated,\x20us'+'e\x20pc.Graph'+'icsDevice.'+'setBlendSt'+'ate\x20instea'+'d.');const _0x2a2731=this['blendState'];ut['copy'](_0x2a2731),ut['setColorBl'+'end'](_0x2a2731['colorOp'],_0x5326dc,_0x2e084b),ut['setAlphaBl'+'end'](_0x2a2731['alphaOp'],_0x5d48a9,_0x3b20fa),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendEq'+'uation']=function(_0x2ba15d){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendEqua'+'tion\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e.setBlend'+'State\x20inst'+'ead.');const _0x2bccbc=this['blendState'];ut['copy'](_0x2bccbc),ut['setColorBl'+'end'](_0x2ba15d,_0x2bccbc['colorSrcFa'+'ctor'],_0x2bccbc['colorDstFa'+'ctor']),ut['setAlphaBl'+'end'](_0x2ba15d,_0x2bccbc['alphaSrcFa'+'ctor'],_0x2bccbc['alphaDstFa'+'ctor']),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendEq'+'uationSepa'+'rate']=function(_0x25b61c,_0xa9f831){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendEqua'+'tionSepara'+'te\x20is\x20depr'+'ecated,\x20us'+'e\x20pc.Graph'+'icsDevice.'+'setBlendSt'+'ate\x20instea'+'d.');const _0x2ea2cc=this['blendState'];ut['copy'](_0x2ea2cc),ut['setColorBl'+'end'](_0x25b61c,_0x2ea2cc['colorSrcFa'+'ctor'],_0x2ea2cc['colorDstFa'+'ctor']),ut['setAlphaBl'+'end'](_0xa9f831,_0x2ea2cc['alphaSrcFa'+'ctor'],_0x2ea2cc['alphaDstFa'+'ctor']),this['setBlendSt'+'ate'](ut);},$e['prototype']['setColorWr'+'ite']=function(_0x5717f5,_0x1ef730,_0xdf695e,_0x9fea8b){w['deprecated']('pc.Graphic'+'sDevice#se'+'tColorWrit'+'e\x20is\x20depre'+'cated,\x20use'+'\x20pc.Graphi'+'csDevice.s'+'etBlendSta'+'te\x20instead'+'.');const _0x566d79=this['blendState'];ut['copy'](_0x566d79),ut['setColorWr'+'ite'](_0x5717f5,_0x1ef730,_0xdf695e,_0x9fea8b),this['setBlendSt'+'ate'](ut);},$e['prototype']['getBlendin'+'g']=function(){return this['blendState']['blend'];},$e['prototype']['setBlendin'+'g']=function(_0x1dfe32){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlending\x20'+'is\x20depreca'+'ted,\x20use\x20p'+'c.Graphics'+'Device.set'+'BlendState'+'\x20instead.'),ut['copy'](this['blendState']),ut['blend']=_0x1dfe32,this['setBlendSt'+'ate'](ut);},$e['prototype']['setDepthWr'+'ite']=function(_0x2ae02d){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthWrit'+'e\x20is\x20depre'+'cated,\x20use'+'\x20pc.Graphi'+'csDevice.s'+'etDepthSta'+'te\x20instead'+'.'),ji['copy'](this['depthState']),ji['write']=_0x2ae02d,this['setDepthSt'+'ate'](ji);},$e['prototype']['setDepthFu'+'nc']=function(_0xcbc677){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthFunc'+'\x20is\x20deprec'+'ated,\x20use\x20'+'pc.Graphic'+'sDevice.se'+'tDepthStat'+'e\x20instead.'),ji['copy'](this['depthState']),ji['func']=_0xcbc677,this['setDepthSt'+'ate'](ji);},$e['prototype']['setDepthTe'+'st']=function(_0x3f87cd){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthTest'+'\x20is\x20deprec'+'ated,\x20use\x20'+'pc.Graphic'+'sDevice.se'+'tDepthStat'+'e\x20instead.'),ji['copy'](this['depthState']),ji['test']=_0x3f87cd,this['setDepthSt'+'ate'](ji);},$e['prototype']['getCullMod'+'e']=function(){return this['cullMode'];},new Proxy({},{'get'(_0x48bf53,_0x4c6d65){return w['deprecated']('Using\x20pc.s'+'haderChunk'+'s\x20to\x20acces'+'s\x20global\x20s'+'hader\x20chun'+'ks\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Shade'+'rChunks.ge'+'t\x20instead,'+'\x20for\x20examp'+'le:\x20pc.Sha'+'derChunks.'+'get(this.a'+'pp.graphic'+'sDevice,\x20p'+'c.SHADERLA'+'NGUAGE_GLS'+'L).get(\x27'+_0x4c6d65+'\x27);'),Pe['get'](Ms()['graphicsDe'+'vice'],Fe)['get'](_0x4c6d65);},'set'(_0x11dfff,_0x17dd20,_0x7b91aa){return w['deprecated']('Using\x20pc.s'+'haderChunk'+'s\x20to\x20overr'+'ide\x20global'+'\x20shader\x20ch'+'unks\x20is\x20de'+'precated.\x20'+'Use\x20pc.Sha'+'derChunks.'+'get\x20instea'+'d,\x20for\x20exa'+'mple:\x20pc.S'+'haderChunk'+'s.get(this'+'.app.graph'+'icsDevice,'+'\x20pc.SHADER'+'LANGUAGE_G'+'LSL).set(\x27'+_0x17dd20+'\x27);'),Pe['get'](Ms()['graphicsDe'+'vice'],Fe)['set'](_0x17dd20,_0x7b91aa),!(0x1ffb+0xac*0x27+-0x3e1*0xf);}}),Object['defineProp'+'erty'](Et['prototype'],'defaultMat'+'erial',{'get':function(){return w['deprecated']('pc.Scene#d'+'efaultMate'+'rial\x20is\x20de'+'precated.'),Qn(Ms()['graphicsDe'+'vice']);}}),Object['defineProp'+'erty'](Et['prototype'],'fogColor',{'set':function(_0x3ccdf3){w['deprecated']('Scene#fogC'+'olor\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.color\x20'+'instead.'),this['fog']['color']=_0x3ccdf3;},'get':function(){return w['deprecated']('Scene#fogC'+'olor\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.color\x20'+'instead.'),this['fog']['color'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogEnd',{'set':function(_0xffce70){w['deprecated']('Scene#fogE'+'nd\x20is\x20depr'+'ecated.\x20Us'+'e\x20Scene#fo'+'g.end\x20inst'+'ead.'),this['fog']['end']=_0xffce70;},'get':function(){return w['deprecated']('Scene#fogE'+'nd\x20is\x20depr'+'ecated.\x20Us'+'e\x20Scene#fo'+'g.end\x20inst'+'ead.'),this['fog']['end'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogStart',{'set':function(_0x5a4a59){w['deprecated']('Scene#fogS'+'tart\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.start\x20'+'instead.'),this['fog']['start']=_0x5a4a59;},'get':function(){return w['deprecated']('Scene#fogS'+'tart\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.start\x20'+'instead.'),this['fog']['start'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogDensity',{'set':function(_0x300e04){w['deprecated']('Scene#fogD'+'ensity\x20is\x20'+'deprecated'+'.\x20Use\x20Scen'+'e#fog.dens'+'ity\x20instea'+'d.'),this['fog']['density']=_0x300e04;},'get':function(){return w['deprecated']('Scene#fogD'+'ensity\x20is\x20'+'deprecated'+'.\x20Use\x20Scen'+'e#fog.dens'+'ity\x20instea'+'d.'),this['fog']['density'];}}),Object['defineProp'+'erty'](Et['prototype'],'toneMappin'+'g',{'set':function(_0x25393f){w['removed']('Scene#tone'+'Mapping\x20is'+'\x20removed.\x20'+'Use\x20Camera'+'Component#'+'toneMappin'+'g\x20instead.');},'get':function(){w['removed']('Scene#tone'+'Mapping\x20is'+'\x20removed.\x20'+'Use\x20Camera'+'Component#'+'toneMappin'+'g\x20instead.');}}),Object['defineProp'+'erty'](Et['prototype'],'gammaCorre'+'ction',{'set':function(_0x146ac7){w['removed']('Scene#gamm'+'aCorrectio'+'n\x20is\x20remov'+'ed.\x20Use\x20Ca'+'meraCompon'+'ent#gammaC'+'orrection\x20'+'instead.');},'get':function(){w['removed']('Scene#gamm'+'aCorrectio'+'n\x20is\x20remov'+'ed.\x20Use\x20Ca'+'meraCompon'+'ent#gammaC'+'orrection\x20'+'instead.');}}),Object['defineProp'+'erty'](Et['prototype'],'rendering',{'set':function(_0x58a3bb){w['removed']('Scene#rend'+'ering\x20is\x20r'+'emoved.\x20Us'+'e\x20Scene#fo'+'g\x20or\x20Camer'+'aComponent'+'#gammaCorr'+'ection\x20or\x20'+'CameraComp'+'onent#tone'+'Mapping\x20in'+'stead.');},'get':function(){w['removed']('Scene#rend'+'ering\x20is\x20r'+'emoved.\x20Us'+'e\x20Scene#fo'+'g\x20or\x20Camer'+'aComponent'+'#gammaCorr'+'ection\x20or\x20'+'CameraComp'+'onent#tone'+'Mapping\x20in'+'stead.');}}),Object['defineProp'+'erty'](du['prototype'],'_meshInsta'+'nces',{'get':function(){return w['deprecated']('pc.LayerCo'+'mposition#'+'_meshInsta'+'nces\x20is\x20de'+'precated.'),null;}}),Object['defineProp'+'erty'](Et['prototype'],'drawCalls',{'get':function(){return w['deprecated']('pc.Scene#d'+'rawCalls\x20i'+'s\x20deprecat'+'ed\x20and\x20no\x20'+'longer\x20pro'+'vides\x20mesh'+'\x20instances'+'.'),null;}}),['128','64','32','16','8','4']['forEach']((_0xf25881,_0xd7f107)=>{Object['defineProp'+'erty'](Et['prototype'],'skyboxPref'+'iltered'+_0xf25881,{'get':function(){return w['deprecated']('pc.Scene#s'+'kyboxPrefi'+'ltered'+_0xf25881+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Scene#p'+'refiltered'+'Cubemaps\x20i'+'nstead.')),this['_prefilter'+'edCubemaps'][_0xd7f107];},'set':function(_0x2f39bf){w['deprecated']('pc.Scene#s'+'kyboxPrefi'+'ltered'+_0xf25881+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Scene#p'+'refiltered'+'Cubemaps\x20i'+'nstead.')),this['_prefilter'+'edCubemaps'][_0xd7f107]=_0x2f39bf,this['updateShad'+'ers']=!(-0x2113+-0x3d5+0x24e8);}});}),Object['defineProp'+'erty'](Et['prototype'],'models',{'get':function(){return this['_models']||(this['_models']=[]),this['_models'];}});function Bt(_0x2439e4,_0x2dd1a5,_0x19cc98=''){Object['defineProp'+'erty'](_0x2439e4['prototype'],_0x2dd1a5,{'set':function(_0xbf55c2){w['errorOnce'](_0x2439e4['name']+'#'+_0x2dd1a5+('\x20has\x20been\x20'+'removed.\x20')+_0x19cc98);},'get':function(){w['errorOnce'](_0x2439e4['name']+'#'+_0x2dd1a5+('\x20has\x20been\x20'+'removed.\x20')+_0x19cc98);}});}Bt(Ot,'renderTarg'+'et'),Bt(Ot,'onPreCull'),Bt(Ot,'onPreRende'+'r'),Bt(Ot,'onPreRende'+'rOpaque'),Bt(Ot,'onPreRende'+'rTranspare'+'nt'),Bt(Ot,'onPostCull'),Bt(Ot,'onPostRend'+'er'),Bt(Ot,'onPostRend'+'erOpaque'),Bt(Ot,'onPostRend'+'erTranspar'+'ent'),Bt(Ot,'onDrawCall'),Bt(Ot,'layerRefer'+'ence'),Bt(Ir,'onPreCull','Use\x20Scene#'+'EVENT_PREC'+'ULL\x20event\x20'+'instead.'),Bt(Ir,'onPostCull','Use\x20Scene#'+'EVENT_POST'+'CULL\x20event'+'\x20instead.'),Bt(Ir,'onPreRende'+'r','Use\x20Scene#'+'EVENT_PRER'+'ENDER\x20even'+'t\x20instead.'),Bt(Ir,'onPostRend'+'er','Use\x20Scene#'+'EVENT_POST'+'RENDER\x20eve'+'nt\x20instead'+'.'),Bt(Ir,'onPreRende'+'rLayer','Use\x20Scene#'+'EVENT_PRER'+'ENDER_LAYE'+'R\x20event\x20in'+'stead.'),Bt(Ir,'onPostRend'+'erLayer','Use\x20Scene#'+'EVENT_POST'+'RENDER_LAY'+'ER\x20event\x20i'+'nstead.'),fl['prototype']['renderComp'+'osition']=function(_0x19522f){w['deprecated']('pc.Forward'+'Renderer#r'+'enderCompo'+'sition\x20is\x20'+'deprecated'+'.\x20Use\x20pc.A'+'ppBase.ren'+'derComposi'+'tion\x20inste'+'ad.'),Ms()['renderComp'+'osition'](_0x19522f);},He['prototype']['syncAabb']=function(){w['deprecated']('pc.MeshIns'+'tance#sync'+'Aabb\x20is\x20de'+'precated.');},mm['prototype']['getTarget']=function(_0xe42265){return w['deprecated']('pc.Morph#g'+'etTarget\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.Morph#tar'+'gets\x20inste'+'ad.'),this['targets'][_0xe42265];},Ie['prototype']['getChildre'+'n']=function(){return w['deprecated']('pc.GraphNo'+'de#getChil'+'dren\x20is\x20de'+'precated.\x20'+'Use\x20pc.Gra'+'phNode#chi'+'ldren\x20inst'+'ead.'),this['children'];},Ie['prototype']['getName']=function(){return w['deprecated']('pc.GraphNo'+'de#getName'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#name\x20in'+'stead.'),this['name'];},Ie['prototype']['getPath']=function(){return w['deprecated']('pc.GraphNo'+'de#getPath'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#path\x20in'+'stead.'),this['path'];},Ie['prototype']['getRoot']=function(){return w['deprecated']('pc.GraphNo'+'de#getRoot'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#root\x20in'+'stead.'),this['root'];},Ie['prototype']['getParent']=function(){return w['deprecated']('pc.GraphNo'+'de#getPare'+'nt\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Graph'+'Node#paren'+'t\x20instead.'),this['parent'];},Ie['prototype']['setName']=function(_0x22c829){w['deprecated']('pc.GraphNo'+'de#setName'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#name\x20in'+'stead.'),this['name']=_0x22c829;},Object['defineProp'+'erty'](tr['prototype'],'shader',{'set':function(_0xb830dd){w['deprecated']('pc.Materia'+'l#shader\x20i'+'s\x20deprecat'+'ed,\x20use\x20pc'+'.ShaderMat'+'erial\x20inst'+'ead.');},'get':function(){return w['deprecated']('pc.Materia'+'l#shader\x20i'+'s\x20deprecat'+'ed,\x20use\x20pc'+'.ShaderMat'+'erial\x20inst'+'ead.'),null;}}),Object['defineProp'+'erty'](tr['prototype'],'blend',{'set':function(_0x41811f){w['deprecated']('pc.Materia'+'l#blend\x20is'+'\x20deprecate'+'d,\x20use\x20pc.'+'Material.b'+'lendState.'),this['blendState']['blend']=_0x41811f;},'get':function(){return this['blendState']['blend'];}}),Object['defineProp'+'erty'](Ut['prototype'],'shininess',{'get':function(){return this['gloss']*(0x1*0xc2f+-0x1*-0x1cc9+-0x1c*0x173);},'set':function(_0x598a0d){this['gloss']=_0x598a0d*(-0x1478+-0xd86+-0x1*-0x21fe+0.01);}}),Object['defineProp'+'erty'](Ut['prototype'],'useGammaTo'+'nemap',{'get':function(){return this['useTonemap'];},'set':function(_0x191846){this['useTonemap']=_0x191846;}}),Object['defineProp'+'erty'](Ut['prototype'],'anisotropy',{'get':function(){w['deprecated']('pc.Standar'+'dMaterial#'+'anisotropy'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#'+'anisotropy'+'Intensity\x20'+'and\x20pc.Sta'+'ndardMater'+'ial#anisot'+'ropyRotati'+'on\x20instead'+'.');const _0x289380=Math['sign'](Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']*(0x87b*-0x3+0x393+0x15e0)));return this['anisotropy'+'Intensity']*_0x289380;},'set':function(_0x89b06a){w['deprecated']('pc.Standar'+'dMaterial#'+'anisotropy'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#'+'anisotropy'+'Intensity\x20'+'and\x20pc.Sta'+'ndardMater'+'ial#anisot'+'ropyRotati'+'on\x20instead'+'.'),this['anisotropy'+'Intensity']=Math['abs'](_0x89b06a),_0x89b06a>=0x7f3+0x1838+-0xf*0x225?this['anisotropy'+'Rotation']=-0xdbb*0x2+0x1a82*0x1+0xf4*0x1:this['anisotropy'+'Rotation']=-0x23dc+-0x12*-0x1f4+0x10e;}});function Qs(_0x169881,_0x4c2028){Object['defineProp'+'erty'](Ut['prototype'],_0x4c2028,{'get':function(){return w['deprecated']('pc.Standar'+'dMaterial#'+_0x4c2028+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#')+_0x169881+'\x20instead.'),this[_0x169881];},'set':function(_0x216b25){w['deprecated']('pc.Standar'+'dMaterial#'+_0x4c2028+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#')+_0x169881+'\x20instead.'),this[_0x169881]=_0x216b25;}});}function Id(_0x53ca67){Object['defineProp'+'erty'](Ut['prototype'],_0x53ca67,{'get':function(){return w['deprecated']('pc.Standar'+'dMaterial#'+_0x53ca67+('\x20is\x20deprec'+'ated,\x20and\x20'+'the\x20behavi'+'our\x20is\x20as\x20'+'if\x20')+_0x53ca67+('\x20was\x20alway'+'s\x20true')),!(-0x1f*0x59+-0x10*-0x8+-0xa47*-0x1);},'set':function(_0x36d58a){w['deprecated']('pc.Standar'+'dMaterial#'+_0x53ca67+('\x20is\x20deprec'+'ated,\x20and\x20'+'the\x20behavi'+'our\x20is\x20as\x20'+'if\x20')+_0x53ca67+('\x20was\x20alway'+'s\x20true'));}});}Id('sheenTint'),Id('diffuseTin'+'t'),Id('emissiveTi'+'nt'),Id('ambientTin'+'t'),Qs('specularTi'+'nt','specularMa'+'pTint'),Qs('aoVertexCo'+'lor','aoMapVerte'+'xColor'),Qs('diffuseVer'+'texColor','diffuseMap'+'VertexColo'+'r'),Qs('specularVe'+'rtexColor','specularMa'+'pVertexCol'+'or'),Qs('emissiveVe'+'rtexColor','emissiveMa'+'pVertexCol'+'or'),Qs('metalnessV'+'ertexColor','metalnessM'+'apVertexCo'+'lor'),Qs('glossVerte'+'xColor','glossMapVe'+'rtexColor'),Qs('opacityVer'+'texColor','opacityMap'+'VertexColo'+'r'),Qs('lightVerte'+'xColor','lightMapVe'+'rtexColor'),Qs('sheenGloss','sheenGloss'+'iess'),Qs('clearCoatG'+'loss','clearCostG'+'lossiness');function F0(_0x82e252,_0x2cd789){_0x82e252!=='pass'&&Object['defineProp'+'erty'](dl['prototype'],_0x82e252,{'get':function(){return w['deprecated']('Getting\x20pc'+'.Options#'+_0x82e252+('\x20has\x20been\x20'+'deprecated'+'\x20as\x20the\x20pr'+'operty\x20has'+'\x20been\x20move'+'d\x20to\x20pc.Op'+'tions.LitS'+'haderOptio'+'ns#')+(_0x2cd789||_0x82e252)+'.'),this['litOptions'][_0x2cd789||_0x82e252];},'set':function(_0x4598d7){w['deprecated']('Setting\x20pc'+'.Options#'+_0x82e252+('\x20has\x20been\x20'+'deprecated'+'\x20as\x20the\x20pr'+'operty\x20has'+'\x20been\x20move'+'d\x20to\x20pc.Op'+'tions.LitS'+'haderOptio'+'ns#')+(_0x2cd789||_0x82e252)+'.'),this['litOptions'][_0x2cd789||_0x82e252]=_0x4598d7;}});}F0('refraction','useRefract'+'ion');const TU=new wv(),zS=Object['getOwnProp'+'ertyNames'](TU);for(const l in zS)F0(zS[l]);mn['prototype']['getAssetBy'+'Id']=function(_0x2219c3){return w['deprecated']('pc.AssetRe'+'gistry#get'+'AssetById\x20'+'is\x20depreca'+'ted.\x20Use\x20p'+'c.AssetReg'+'istry#get\x20'+'instead.'),this['get'](_0x2219c3);},Object['defineProp'+'erty'](Qt['prototype'],'ray',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#ray'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.XrInput'+'Source#get'+'Origin\x20and'+'\x20pc.XrInpu'+'tSource#ge'+'tDirection'+'\x20instead.'),this['_rayLocal'];}}),Object['defineProp'+'erty'](Qt['prototype'],'position',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#pos'+'ition\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Xr'+'InputSourc'+'e#getLocal'+'Position\x20i'+'nstead.'),this['_localPosi'+'tion'];}}),Object['defineProp'+'erty'](Qt['prototype'],'rotation',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#rot'+'ation\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Xr'+'InputSourc'+'e#getLocal'+'Rotation\x20i'+'nstead.'),this['_localRota'+'tion'];}}),Object['defineProp'+'erty'](Xo['prototype'],'wheel',{'get':function(){return this['wheelDelta']*-(-0x20e*0x2+-0x756*-0x1+-0x4*0xce);}}),Object['defineProp'+'erty'](ta['prototype'],'wheel',{'get':function(){return this['wheelDelta']*-(0x60a+0x48f+-0x1*0xa97);}}),Ks['prototype']['isFullscre'+'en']=function(){return w['deprecated']('pc.AppBase'+'#isFullscr'+'een\x20is\x20dep'+'recated.\x20U'+'se\x20the\x20Ful'+'lscreen\x20AP'+'I\x20directly'+'.'),!!document['fullscreen'+'Element'];},Ks['prototype']['enableFull'+'screen']=function(_0x3357d6,_0x4a1e63,_0x141bfb){w['deprecated']('pc.AppBase'+'#enableFul'+'lscreen\x20is'+'\x20deprecate'+'d.\x20Use\x20the'+'\x20Fullscree'+'n\x20API\x20dire'+'ctly.'),_0x3357d6=_0x3357d6||this['graphicsDe'+'vice']['canvas'];const _0x2fcc3e=function(){_0x4a1e63(),document['removeEven'+'tListener']('fullscreen'+'change',_0x2fcc3e);},_0x139598=function(){_0x141bfb(),document['removeEven'+'tListener']('fullscreen'+'error',_0x139598);};_0x4a1e63&&document['addEventLi'+'stener']('fullscreen'+'change',_0x2fcc3e,!(-0x1483*-0x1+-0x7*-0xd3+-0x1a47)),_0x141bfb&&document['addEventLi'+'stener']('fullscreen'+'error',_0x139598,!(0x1f25+-0xda3*0x2+-0x3de)),_0x3357d6['requestFul'+'lscreen']?_0x3357d6['requestFul'+'lscreen'](Element['ALLOW_KEYB'+'OARD_INPUT']):_0x141bfb();},Ks['prototype']['disableFul'+'lscreen']=function(_0x1113bc){w['deprecated']('pc.AppBase'+'#disableFu'+'llscreen\x20i'+'s\x20deprecat'+'ed.\x20Use\x20th'+'e\x20Fullscre'+'en\x20API\x20dir'+'ectly.');const _0x51520d=function(){_0x1113bc(),document['removeEven'+'tListener']('fullscreen'+'change',_0x51520d);};_0x1113bc&&document['addEventLi'+'stener']('fullscreen'+'change',_0x51520d,!(0x12*0x19e+0x2*0x126d+0x5ff*-0xb)),document['exitFullsc'+'reen']();},Ks['prototype']['getSceneUr'+'l']=function(_0x164433){w['deprecated']('pc.AppBase'+'#getSceneU'+'rl\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.AppBa'+'se#scenes\x20'+'and\x20pc.Sce'+'neRegistry'+'#find\x20inst'+'ead.');const _0x1f557c=this['scenes']['find'](_0x164433);return _0x1f557c?_0x1f557c['url']:null;},Ks['prototype']['loadScene']=function(_0x329ee2,_0x2a0367){w['deprecated']('pc.AppBase'+'#loadScene'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.AppBase'+'#scenes\x20an'+'d\x20pc.Scene'+'Registry#l'+'oadScene\x20i'+'nstead.'),this['scenes']['loadScene'](_0x329ee2,_0x2a0367);},Ks['prototype']['loadSceneH'+'ierarchy']=function(_0xd8ea86,_0x5bcc3a){w['deprecated']('pc.AppBase'+'#loadScene'+'Hierarchy\x20'+'is\x20depreca'+'ted.\x20Use\x20p'+'c.AppBase#'+'scenes\x20and'+'\x20pc.SceneR'+'egistry#lo'+'adSceneHie'+'rarchy\x20ins'+'tead.'),this['scenes']['loadSceneH'+'ierarchy'](_0xd8ea86,_0x5bcc3a);},Ks['prototype']['loadSceneS'+'ettings']=function(_0x4c97fb,_0x552416){w['deprecated']('pc.AppBase'+'#loadScene'+'Settings\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.AppBase#s'+'cenes\x20and\x20'+'pc.SceneRe'+'gistry#loa'+'dSceneSett'+'ings\x20inste'+'ad.'),this['scenes']['loadSceneS'+'ettings'](_0x4c97fb,_0x552416);},Tm['prototype']['setVisible']=function(_0x160448){w['deprecated']('pc.ModelCo'+'mponent#se'+'tVisible\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.ModelComp'+'onent#enab'+'led\x20instea'+'d.'),this['enabled']=_0x160448;},Object['defineProp'+'erty'](bs['prototype'],'bodyType',{'get':function(){return w['deprecated']('pc.RigidBo'+'dyComponen'+'t#bodyType'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RigidBo'+'dyComponen'+'t#type\x20ins'+'tead.'),this['type'];},'set':function(_0x366f78){w['deprecated']('pc.RigidBo'+'dyComponen'+'t#bodyType'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RigidBo'+'dyComponen'+'t#type\x20ins'+'tead.'),this['type']=_0x366f78;}}),bs['prototype']['syncBodyTo'+'Entity']=function(){w['deprecated']('pc.RigidBo'+'dyComponen'+'t#syncBody'+'ToEntity\x20i'+'s\x20not\x20publ'+'ic\x20API\x20and'+'\x20should\x20no'+'t\x20be\x20used.'),this['_updateDyn'+'amic']();},wm['prototype']['setGravity']=function(){w['deprecated']('pc.RigidBo'+'dyComponen'+'tSystem#se'+'tGravity\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.RigidBody'+'ComponentS'+'ystem#grav'+'ity\x20instea'+'d.'),arguments['length']===0x2e6+0x1*-0xab6+-0x1d*-0x45?this['gravity']['copy'](arguments[-0x66e*-0x2+-0x1645*0x1+0x969*0x1]):this['gravity']['set'](arguments[-0x146a+-0x13b1+0x281b],arguments[-0x1ebe+0x1e46+0x1*0x79],arguments[0xb70+-0xe*0x9a+0x37*-0xe]);};class wU{constructor(_0x4fc3a9){this['_frameInde'+'x']=0x1e25*-0x1+-0x109f+0x2ec4,this['_frameTimi'+'ngs']=[],this['_timings']=[],this['_prevTimin'+'gs']=[],this['unitsName']='ms',this['decimalPla'+'ces']=-0x123a+-0x1e33+-0x1837*-0x2,this['enabled']=!(-0x1*-0x611+-0x1247*0x2+0x1e7d),_0x4fc3a9['on']('frameupdat'+'e',this['begin']['bind'](this,'update')),_0x4fc3a9['on']('framerende'+'r',this['mark']['bind'](this,'render')),_0x4fc3a9['on']('frameend',this['mark']['bind'](this,'other'));}['begin'](_0x3c56e0){if(!this['enabled'])return;this['_frameInde'+'x']<this['_frameTimi'+'ngs']['length']&&this['_frameTimi'+'ngs']['splice'](this['_frameInde'+'x']);const _0x458120=this['_prevTimin'+'gs'];this['_prevTimin'+'gs']=this['_timings'],this['_timings']=this['_frameTimi'+'ngs'],this['_frameTimi'+'ngs']=_0x458120,this['_frameInde'+'x']=-0x1d*-0x5f+-0x5e*0x5b+0x16a7,this['mark'](_0x3c56e0);}['mark'](_0x4b3f9f){if(!this['enabled'])return;const _0x20f713=de();if(this['_frameInde'+'x']>-0x58f+-0x1b32+-0x1*-0x20c1){const _0xe2cdc3=this['_frameTimi'+'ngs'][this['_frameInde'+'x']-(0x4*0x34a+-0x1*0x26e1+0x19ba)];_0xe2cdc3[0x176b+-0x118e+-0x5dc]=_0x20f713-_0xe2cdc3[-0xe7+0x2*0xc8b+-0x182e];}else{if(this['_timings']['length']>0x3*-0x6d1+0x7*0x49d+-0x8*0x17b){const _0x572f78=this['_timings'][this['_timings']['length']-(0x1cb8+-0x2*0x556+0x1*-0x120b)];_0x572f78[-0x16f5+0x1826+-0x130]=_0x20f713-_0x572f78[0x122d*-0x2+-0x1*0x70b+0x3f2*0xb];}}if(this['_frameInde'+'x']>=this['_frameTimi'+'ngs']['length'])this['_frameTimi'+'ngs']['push']([_0x4b3f9f,_0x20f713]);else{const _0x2d3ae9=this['_frameTimi'+'ngs'][this['_frameInde'+'x']];_0x2d3ae9[0x55c+-0x902+0x1d3*0x2]=_0x4b3f9f,_0x2d3ae9[0xba+-0x265e*-0x1+-0x2717*0x1]=_0x20f713;}this['_frameInde'+'x']++;}get['timings'](){return this['_timings']['slice'](-0x1fa+-0x11*0x21d+0x25e7,-(0x2036+0x1*-0x17+0x201e*-0x1))['map'](_0x485d3a=>_0x485d3a[-0x25a1*0x1+-0x10e*0x1d+-0x4a*-0xec]);}}class EU{constructor(_0x1d08db){this['device']=_0x1d08db,_0x1d08db['gpuProfile'+'r']['enabled']=!(0x31*-0x95+-0x9*0x11+0xe8f*0x2),this['enabled']=!(-0x287*-0x9+0x805+-0x1ec4),this['unitsName']='ms',this['decimalPla'+'ces']=0x1cbc+-0x3*-0xa45+-0x3b8a,this['_timings']=[];}get['timings'](){return this['_timings'][0x953+-0x1279+0x493*0x2]=this['device']['gpuProfile'+'r']['_frameTime'],this['_timings'];}}class bU{constructor(_0x876d09,_0x43743d,_0x5684c1,_0x25b36a,_0x1ed279){this['app']=_0x876d09,this['values']=[],this['statNames']=_0x43743d,this['statNames']['length']>-0x1*0x1f2a+0x2016+-0xe9&&(this['statNames']['length']=0x249b*-0x1+-0x1*-0x17dd+0xcc1*0x1),this['unitsName']=_0x25b36a,this['decimalPla'+'ces']=_0x5684c1,this['multiplier']=_0x1ed279||0x900+-0x95*-0x1+-0x994;const _0x5b69e9=(_0x46b8d8,_0x4d5477)=>_0x46b8d8['split']('.')['reduce']((_0x574ad3,_0x4cdefc)=>_0x574ad3?_0x574ad3[_0x4cdefc]:null,_0x4d5477||this);_0x876d09['on']('frameupdat'+'e',_0x5430fb=>{for(let _0x1622c7=-0xf*-0x1a5+-0x103f+-0x86c;_0x1622c7<this['statNames']['length'];_0x1622c7++)this['values'][_0x1622c7]=_0x5b69e9(this['statNames'][_0x1622c7],this['app']['stats'])*this['multiplier'];});}get['timings'](){return this['values'];}}class Uf{constructor(_0x54b6c7,_0x1b7201,_0x3a3893,_0x211169,_0xcc1693){this['app']=_0x1b7201,this['name']=_0x54b6c7,this['device']=_0x1b7201['graphicsDe'+'vice'],this['timer']=_0xcc1693,this['watermark']=_0x3a3893,this['enabled']=!(-0x10bf+-0x1920+0x29e0),this['textRefres'+'hRate']=_0x211169,this['avgTotal']=-0x8f4+-0x1*-0x66d+0x287,this['avgTimer']=-0xfb2+-0xa*-0x186+-0x2*-0x3b,this['avgCount']=0xc*0x1aa+0x16fd+-0x2af5,this['timingText']='',this['texture']=null,this['yOffset']=0x1851+0x19e9+-0x323a,this['cursor']=-0x1c60+0x1a97+0x1c9,this['sample']=new Uint8ClampedArray(0x11*0x8b+0x103*-0x19+-0xc4*-0x15),this['sample']['set']([-0x1109+-0x53*0x4+0x1255,-0x1*-0x931+-0xd40+0x40f,-0xf8d+-0xaae+0x1a3b,0x1*0x22a3+0x1*-0x4b3+-0x1cf1]),this['counter']=0x261c+0xcf*0x10+-0x330c,this['app']['on']('frameupdat'+'e',this['update'],this);}['destroy'](){this['app']['off']('frameupdat'+'e',this['update'],this);}['loseContex'+'t'](){this['timer']&&typeof this['timer']['loseContex'+'t']=='function'&&this['timer']['loseContex'+'t']();}['update'](_0x4e6411){const _0x30ce69=this['timer']['timings'],_0x5abb31=_0x30ce69['reduce']((_0x24e985,_0x2cee7f)=>_0x24e985+_0x2cee7f,-0x1502+0x13*-0xa+0x1*0x15c0);if(this['avgTotal']+=_0x5abb31,this['avgTimer']+=_0x4e6411,this['avgCount']++,this['avgTimer']>this['textRefres'+'hRate']&&(this['timingText']=(this['avgTotal']/this['avgCount'])['toFixed'](this['timer']['decimalPla'+'ces']),this['avgTimer']=0x12c7+0x25*0x43+0x2*-0xe3b,this['avgTotal']=0xc48+0x201a+0x1b5*-0x1a,this['avgCount']=-0xf5+-0x1d16+0x1e0b),this['enabled']){let _0x5d5f72=-0x2345+0x16b4+0xc91;const _0x2cb0e0=(0x13c5+-0x3*0x82e+-0x2*-0x263+0.5)*this['watermark'];for(let _0x25819b=0x1410+-0x203e+0x617*0x2;_0x25819b<_0x30ce69['length'];++_0x25819b)_0x5d5f72+=Math['floor'](_0x30ce69[_0x25819b]/_0x2cb0e0*(0x1*-0x1519+-0xd9*0x6+0x1b2e)),this['sample'][_0x25819b]=_0x5d5f72;this['sample'][0x298+-0x1f08+0x1c73]=this['watermark']/_0x2cb0e0*(0x2a0+0xa9*0x16+0x33b*-0x5),this['texture']['lock']()['set'](this['sample'],(this['cursor']+this['yOffset']*this['texture']['width'])*(-0x209b+0x292*-0x1+0x2331)),this['texture']['unlock'](),this['cursor']++,this['cursor']===this['texture']['width']&&(this['cursor']=-0x23d5*0x1+0xd75+0x1660);}}['render'](_0x43b335,_0x18f646,_0x3e73fd,_0x398af8,_0x16f645){_0x43b335['quad'](_0x18f646+_0x398af8,_0x3e73fd,-_0x398af8,_0x16f645,this['enabled']?this['cursor']:-0x6d*-0x1+-0x146e+0x1401,this['enabled']?-0x73a+0x64d*0x2+-0x560+0.5+this['yOffset']:this['texture']['height']-(0x87f+0xac*-0x9+-0x1*0x272),-_0x398af8,0x1b41*0x1+-0xb1c+-0x1025,this['texture'],0x122d+0x16ed*-0x1+0x98*0x8);}}class AU{constructor(_0x36f59f,_0x14699c){const _0x4d36d8=_0x1473d0=>{_0x1473d0['font']='10px\x20\x22Luci'+'da\x20Console'+'\x22,\x20Monaco,'+'\x20monospace',_0x1473d0['textAlign']='left',_0x1473d0['textBaseli'+'ne']='alphabetic';},_0xd20f53=_0x104ef6=>_0x104ef6==='.'||_0x104ef6['length']===-0x1*-0x748+-0xe59+0x712&&_0x104ef6['charCodeAt'](-0x1c03*0x1+-0x788+0x238b)>=0x1a13+0xc1*0xb+-0x222e&&_0x104ef6['charCodeAt'](0xc96+0x21*0xc7+-0x263d)<=0x1*-0x16c5+-0x6*0x4cd+0x33cc,_0x1088d6=document['createElem'+'ent']('canvas'),_0x4b9649=_0x1088d6['getContext']('2d',{'alpha':!(-0x9*0x162+-0x30d+0x1*0xf7f)});_0x4d36d8(_0x4b9649);const _0x1fb437=new Map(),_0x2471f7=0x2*0x237+-0x1e15+0x19ac,_0x4fd9ac=-0x1*0x107f+0x1*-0x158d+0x280c;let _0x2ada97=_0x2471f7,_0x4835dc=_0x2471f7;_0x14699c['forEach'](_0x57d76f=>{const _0x334c0a=_0x4b9649['measureTex'+'t'](_0x57d76f),_0x36eea9=Math['ceil'](-_0x334c0a['actualBoun'+'dingBoxLef'+'t']),_0x4f11d8=Math['ceil'](_0x334c0a['actualBoun'+'dingBoxRig'+'ht']),_0x4a0a6a=Math['ceil'](_0x334c0a['actualBoun'+'dingBoxAsc'+'ent']),_0x4e2bd7=Math['ceil'](_0x334c0a['actualBoun'+'dingBoxDes'+'cent']),_0x4e5980=_0x36eea9+_0x4f11d8,_0x77c387=_0x4a0a6a+_0x4e2bd7;_0x2ada97+_0x4e5980+_0x2471f7>=_0x4fd9ac&&(_0x2ada97=_0x2471f7,_0x4835dc+=0x21a*-0x8+0x930*0x1+0x3d8*0x2),_0x1fb437['set'](_0x57d76f,{'l':_0x36eea9,'r':_0x4f11d8,'a':_0x4a0a6a,'d':_0x4e2bd7,'w':_0x4e5980,'h':_0x77c387,'x':_0x2ada97,'y':_0x4835dc}),_0x2ada97+=_0x4e5980+_0x2471f7;}),_0x1088d6['width']=-0x12c5+0x26fb*-0x1+0x778*0x8,_0x1088d6['height']=Y['nextPowerO'+'fTwo'](_0x4835dc+(-0x1d77+0x13*-0x1a5+0x3cc6)+_0x2471f7),_0x4d36d8(_0x4b9649),_0x4b9649['fillStyle']='rgb(0,\x200,\x20'+'0)',_0x4b9649['fillRect'](0x1af*0x14+0x23a7*0x1+-0x4553*0x1,-0x22*-0x8f+0x5dd*0x3+-0x751*0x5,_0x1088d6['width'],_0x1088d6['height']),_0x1fb437['forEach']((_0x43ec15,_0x5cfb8e)=>{_0x4b9649['fillStyle']=_0xd20f53(_0x5cfb8e)?'rgb(255,\x202'+'55,\x20255)':'rgb(170,\x201'+'70,\x20170)',_0x4b9649['fillText'](_0x5cfb8e,_0x43ec15['x']-_0x43ec15['l'],_0x43ec15['y']+_0x43ec15['a']);}),this['placements']=_0x1fb437;const _0x134b8e=_0x4b9649['getImageDa'+'ta'](-0x1d*0xed+-0x1273+-0x1be*-0x1a,0x230c+0x96d+-0xfd*0x2d,_0x1088d6['width'],_0x1088d6['height'])['data'];for(let _0x24d212=-0xb*-0x1d8+0xd*0x26e+-0x33de;_0x24d212<_0x134b8e['length'];_0x24d212+=0x2038+-0xc9f+0x1395*-0x1)_0x134b8e[_0x24d212+(0xda*0x2c+-0x151e+-0x1057)]=_0x134b8e[_0x24d212+(0x1*-0x11c5+0x6a1*-0x1+0x1866)],_0x134b8e[_0x24d212+(-0x195+0x2*0x522+-0x75*0x13)]=-0x14cb+-0x172f+0x2cf9*0x1,_0x134b8e[_0x24d212+(0x3*0x223+0xd3*-0x25+0x1817)]=-0x1*-0x21f5+0x1d72+-0x3e68,_0x134b8e[_0x24d212+(0x2274+-0x23d4+0x162)]=-0x1*0x652+0x140d+-0xcbc;this['texture']=new _e(_0x36f59f,{'name':'mini-stats'+'-word-atla'+'s','width':_0x1088d6['width'],'height':_0x1088d6['height'],'mipmaps':!(-0x10e5*0x2+0x17*-0x16+0x23c5),'minFilter':Te,'magFilter':Te,'levels':[_0x134b8e]});}['destroy'](){this['texture']['destroy'](),this['texture']=null;}['render'](_0x22343e,_0xac7462,_0x3c96f5,_0x45ef8){const _0x497af8=this['placements']['get'](_0xac7462);return _0x497af8?(_0x22343e['quad'](_0x3c96f5+_0x497af8['l']-(-0x9*0x7f+0x1a6d+-0x1*0x15f5),_0x45ef8-_0x497af8['d']+(0x1*0x19a1+0x1b3d+-0x34dd),_0x497af8['w']+(-0x1ad8+0x24b*0x9+-0x1*-0x637),_0x497af8['h']+(0x5*0x1b3+0x5cb*-0x1+-0x2b2),_0x497af8['x']-(0x1dc1+-0x2d2+-0xd77*0x2),this['texture']['height']-_0x497af8['y']-_0x497af8['h']-(-0x1943+0x117+0x3*0x80f),void(0x9eb*-0x1+-0xd25*0x2+-0x2435*-0x1),void(-0xb5*-0x7+-0x75b+0x8*0x4d),this['texture'],-0x1d65+-0x1*0x6ef+0x2455),_0x497af8['w']):0x331+0x28c+-0x5bd;}}const CU='\x0a\x20\x20\x20\x20attri'+'bute\x20vec3\x20'+'vertex_pos'+'ition;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20un'+'normalized'+'\x20xy,\x20word\x20'+'flag\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_texCoord0'+';\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20unnormal'+'ized\x20textu'+'re\x20space\x20u'+'v,\x20normali'+'zed\x20uv\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec4\x20uv0;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20float\x20wo'+'rdFlag;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion.xy\x20*\x202'+'.0\x20-\x201.0,\x20'+'0.5,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20verte'+'x_texCoord'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20wordFlag\x20'+'=\x20vertex_p'+'osition.z;'+'\x0a\x20\x20\x20\x20}\x0a',PU='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec3f;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'unnormaliz'+'ed\x20xy,\x20wor'+'d\x20flag\x0a\x20\x20\x20'+'\x20attribute'+'\x20vertex_te'+'xCoord0:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20unno'+'rmalized\x20t'+'exture\x20spa'+'ce\x20uv,\x20nor'+'malized\x20uv'+'\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'varying\x20wo'+'rdFlag:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x20fn\x20v'+'ertexMain('+'input\x20:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output\x20:\x20'+'VertexOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4(input'+'.vertex_po'+'sition.xy\x20'+'*\x202.0\x20-\x201.'+'0,\x200.5,\x201.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.u'+'v0\x20=\x20input'+'.vertex_te'+'xCoord0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.wordFl'+'ag\x20=\x20input'+'.vertex_po'+'sition.z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',MU='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20uv'+'0;\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20wordFlag;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'lr;\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20grap'+'hTex;\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20wo'+'rdsTex;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in\x20(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20graph'+'Sample\x20=\x20t'+'exture2D(g'+'raphTex,\x20u'+'v0.xy);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20graph;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv0.w\x20<\x20g'+'raphSample'+'.r)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20grap'+'h\x20=\x20vec4(0'+'.7,\x200.2,\x200'+'.2,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20graph\x20=\x20'+'vec4(0.2,\x20'+'0.7,\x200.2,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20else\x20i'+'f\x20(uv0.w\x20<'+'\x20graphSamp'+'le.b)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gr'+'aph\x20=\x20vec4'+'(0.2,\x200.2,'+'\x200.7,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20gra'+'ph\x20=\x20vec4('+'0.0,\x200.0,\x20'+'0.0,\x201.0\x20-'+'\x200.25\x20*\x20si'+'n(uv0.w\x20*\x20'+'3.14159));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20words'+'\x20=\x20texture'+'2D(wordsTe'+'x,\x20vec2(uv'+'0.x,\x201.0\x20-'+'\x20uv0.y));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20mix(gr'+'aph,\x20words'+',\x20wordFlag'+')\x20*\x20clr;\x0a\x20'+'\x20\x20\x20}\x0a',DU='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c4f;\x0a\x20\x20\x20\x20v'+'arying\x20wor'+'dFlag:\x20f32'+';\x0a\x0a\x20\x20\x20\x20uni'+'form\x20clr:\x20'+'vec4f;\x0a\x0a\x20\x20'+'\x20\x20var\x20grap'+'hTex\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20graphTex'+'_sampler\x20:'+'\x20sampler;\x0a'+'\x0a\x20\x20\x20\x20var\x20w'+'ordsTex\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20words'+'Tex_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20u'+'v0:\x20vec4f\x20'+'=\x20input.uv'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20graph'+'Sample:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'graphTex,\x20'+'graphTex_s'+'ampler,\x20uv'+'0.xy);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'graph:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(uv0.'+'w\x20<\x20graphS'+'ample.r)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20graph\x20='+'\x20vec4f(0.7'+',\x200.2,\x200.2'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20graph\x20'+'=\x20vec4f(0.'+'2,\x200.7,\x200.'+'2,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(uv'+'0.w\x20<\x20grap'+'hSample.b)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20graph'+'\x20=\x20vec4f(0'+'.2,\x200.2,\x200'+'.7,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'raph\x20=\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x201.'+'0\x20-\x200.25\x20*'+'\x20sin(uv0.w'+'\x20*\x203.14159'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20wor'+'ds:\x20vec4f\x20'+'=\x20textureS'+'ample(word'+'sTex,\x20word'+'sTex_sampl'+'er,\x20vec2f('+'uv0.x,\x201.0'+'\x20-\x20uv0.y))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20mix(grap'+'h,\x20words,\x20'+'input.word'+('Flag)\x20*\x20un'+'iform.clr;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a');class IU{constructor(_0x77ca36,_0x38eab6=-0x126a*0x2+0x1*0xc2f+-0x167*-0x13){const _0x4bc29c=new kt(_0x77ca36,[{'semantic':Me,'components':0x3,'type':Ve},{'semantic':is,'components':0x4,'type':Ve}]),_0x49ffe8=new Uint16Array(_0x38eab6*(0x1faa+0xa5e*-0x1+0x30a*-0x7));for(let _0x2e6125=0x10*0x185+0x131*0x1+0x1981*-0x1;_0x2e6125<_0x38eab6;++_0x2e6125)_0x49ffe8[_0x2e6125*(-0x1*-0x105b+-0x1*-0x175+-0x2e*0x63)+(0x146f+-0x8a4+-0xbcb)]=_0x2e6125*(-0xce5*-0x2+-0xa9d+-0xf29),_0x49ffe8[_0x2e6125*(-0x12b3+-0x2104+0x33bd)+(-0x13bd*-0x1+-0x16d2+0x9e*0x5)]=_0x2e6125*(0xd*-0x6b+-0x17*0x13f+-0xec*-0x25)+(-0x1*-0x20cf+0x13ae+-0x347c),_0x49ffe8[_0x2e6125*(-0x22ce+-0x14*0xd0+-0xcc5*-0x4)+(-0xf33*-0x1+-0x44a+-0xae7)]=_0x2e6125*(-0xd70+-0x1a38+0x27ac)+(0x192+0x1698+-0x1828*0x1),_0x49ffe8[_0x2e6125*(-0x196d+-0xe*0x17f+0x2e65)+(-0x4*0x449+0x1d2*0x9+0xc5)]=_0x2e6125*(-0x1*-0x9a3+0x66*0x11+-0x1065),_0x49ffe8[_0x2e6125*(-0x1afa+-0x1f39+0x3a39)+(0x787+-0x107*0x1f+0x1856)]=_0x2e6125*(0x1f58+0x3*-0x2cd+-0x16ed)+(-0x3*0x45b+-0xdbb*-0x2+-0x7f*0x1d),_0x49ffe8[_0x2e6125*(-0x198+0x97e+-0x7e0)+(0x2*0xe7d+0x565+-0x225a)]=_0x2e6125*(0x26d6+0x1203+0x1*-0x38d5)+(0xd6c*-0x1+-0x1*-0xa36+0x339);this['device']=_0x77ca36,this['buffer']=new Is(_0x77ca36,_0x4bc29c,_0x38eab6*(0xd1f+-0xba*0xf+-0x71*0x5),{'usage':ey}),this['data']=new Float32Array(this['buffer']['numBytes']/(-0x2219+-0xdc1*0x2+0x3d9f)),this['indexBuffe'+'r']=new br(_0x77ca36,Yi,_0x38eab6*(-0xc7e*0x1+0x1*0x171d+-0xa99),ms,_0x49ffe8),this['prim']={'type':js,'indexed':!(0x19*-0x11f+-0x707+0x230e),'base':0x0,'baseVertex':0x0,'count':0x0},this['quads']=0x919*-0x3+0x215d+0x309*-0x2,this['mesh']=new Ge(_0x77ca36),this['mesh']['vertexBuff'+'er']=this['buffer'],this['mesh']['indexBuffe'+'r'][0x11*-0x199+-0x2106+0x899*0x7]=this['indexBuffe'+'r'],this['mesh']['primitive']=[this['prim']];const _0x327163=new Xn({'uniqueName':'MiniStats','vertexGLSL':CU,'fragmentGLSL':MU,'vertexWGSL':PU,'fragmentWGSL':DU,'attributes':{'vertex_position':Me,'vertex_texCoord0':is}});this['material']=_0x327163,_0x327163['cull']=bt,_0x327163['depthState']=Yt['NODEPTH'],_0x327163['blendState']=new pt(!(0xc5*-0x13+-0x25*0xbc+0x29cb),fs,jh,Yh,fs,Ft,Ft),_0x327163['update'](),this['meshInstan'+'ce']=new He(this['mesh'],_0x327163,new Ie('MiniStatsM'+'esh')),this['uniforms']={'clr':new Float32Array(-0x1*-0x102b+0x2*-0xac1+0x55b)},this['targetSize']={'width':_0x77ca36['width'],'height':_0x77ca36['height']};}['quad'](_0x2d8ae5,_0x5cef8e,_0xa6ebd7,_0x1a79d4,_0x284ba4,_0x3da315,_0x3fc603,_0x571954,_0x1a29e2,_0x1d9eea=-0x1a11+-0x23cc+0x3ddd){const _0x41409f=this['targetSize']['width'],_0x16a43e=this['targetSize']['height'],_0x150139=_0x2d8ae5/_0x41409f,_0x57e2b6=_0x5cef8e/_0x16a43e,_0x55ac9e=(_0x2d8ae5+_0xa6ebd7)/_0x41409f,_0x2fab89=(_0x5cef8e+_0x1a79d4)/_0x16a43e,_0x402bcf=_0x1a29e2['width'],_0xba575b=_0x1a29e2['height'],_0x19ec53=_0x284ba4/_0x402bcf,_0x4eb4ba=_0x3da315/_0xba575b,_0x1cf0fb=(_0x284ba4+(_0x3fc603??_0xa6ebd7))/_0x402bcf,_0x3f1327=(_0x3da315+(_0x571954??_0x1a79d4))/_0xba575b;this['data']['set']([_0x150139,_0x57e2b6,_0x1d9eea,_0x19ec53,_0x4eb4ba,-0xde3+-0x605+0x13e8,-0x9ef+0x925+-0xca*-0x1,_0x55ac9e,_0x57e2b6,_0x1d9eea,_0x1cf0fb,_0x4eb4ba,0x43*0x25+0x1*0x1a3f+-0x23ed,-0x1e2d+0x3e2*-0x4+0x2db5,_0x55ac9e,_0x2fab89,_0x1d9eea,_0x1cf0fb,_0x3f1327,-0x8f1*-0x4+-0xd*-0x140+-0x3403,0x597+0x39b+-0x931,_0x150139,_0x2fab89,_0x1d9eea,_0x19ec53,_0x3f1327,0x25f+-0xf5c+0xcfd,-0x606*-0x6+-0x85f*0x4+-0x2a7],(0x79b+-0x19a4+-0x3a1*-0x5)*this['quads']),this['quads']++,this['prim']['count']+=-0x1ba3+0x2*-0x135e+-0x4265*-0x1;}['startFrame'](){this['quads']=-0x1386+-0x749+-0x1*-0x1acf,this['prim']['count']=-0x4*-0x47b+-0x24a3+-0x1*-0x12b7,this['targetSize']['width']=this['device']['canvas']['scrollWidt'+'h'],this['targetSize']['height']=this['device']['canvas']['scrollHeig'+'ht'];}['render'](_0x2380b7,_0xc05e88,_0xeea6a1,_0x52d807,_0x444a68,_0x1d24cd){this['buffer']['setData'](this['data']['buffer']),this['uniforms']['clr']['set'](_0x444a68,0x6ab+0xec6+-0xb*0x1f3),this['material']['setParamet'+'er']('clr',this['uniforms']['clr']),this['material']['setParamet'+'er']('graphTex',_0xeea6a1),this['material']['setParamet'+'er']('wordsTex',_0x52d807),_0x2380b7['drawMeshIn'+'stance'](this['meshInstan'+'ce'],_0xc05e88);}}class N0{constructor(_0x2b1577,_0x292479){const _0x161c3a=_0x2b1577['graphicsDe'+'vice'];this['deviceHeig'+'ht']=_0x161c3a['height']/_0x161c3a['maxPixelRa'+'tio'],_0x292479={...N0['getDefault'+'Options'](),..._0x292479},this['options']=_0x292479,this['initGraphs'](_0x2b1577,_0x161c3a,_0x292479);const _0xf77d27=new Set(['','ms','0','1','2','3','4','5','6','7','8','9','.']['concat'](this['graphs']['map'](_0x2089a0=>_0x2089a0['name']))['concat'](_0x292479['stats']?_0x292479['stats']['map'](_0x271cf7=>_0x271cf7['unitsName']):[])['filter'](_0x2f4dae=>!!_0x2f4dae));this['wordAtlas']=new AU(_0x161c3a,_0xf77d27),this['sizes']=_0x292479['sizes'],this['_activeSiz'+'eIndex']=_0x292479['startSizeI'+'ndex'];const _0x1a0959=document['createElem'+'ent']('div');_0x1a0959['setAttribu'+'te']('id','mini-stats'),_0x292479['position']==='top'?_0x1a0959['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';':_0x1a0959['style']['cssText']='position:f'+'ixed;botto'+'m:0;left:0'+';backgroun'+'d:transpar'+'ent;',_0x1a0959['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';',document['body']['appendChil'+'d'](_0x1a0959),_0x1a0959['addEventLi'+'stener']('mouseenter',_0x5f5a4e=>{this['opacity']=0x12e*-0x1d+0x1f3d+0x2fa;}),_0x1a0959['addEventLi'+'stener']('mouseleave',_0x5303c6=>{this['opacity']=-0x2f*-0xcd+-0x245+-0x5e5*0x6+0.7;}),_0x1a0959['addEventLi'+'stener']('click',_0x55a725=>{_0x55a725['preventDef'+'ault'](),this['_enabled']&&(this['activeSize'+'Index']=(this['activeSize'+'Index']+(-0x1979+0x217e+-0x1b*0x4c))%this['sizes']['length'],this['resize'](this['sizes'][this['activeSize'+'Index']]['width'],this['sizes'][this['activeSize'+'Index']]['height'],this['sizes'][this['activeSize'+'Index']]['graphs']));}),_0x161c3a['on']('resizecanv'+'as',this['updateDiv'],this),_0x161c3a['on']('losecontex'+'t',this['loseContex'+'t'],this),_0x2b1577['on']('postrender',this['postRender'],this),this['app']=_0x2b1577,this['drawLayer']=_0x2b1577['scene']['layers']['getLayerBy'+'Id'](Il),this['device']=_0x161c3a,this['render2d']=new IU(_0x161c3a),this['div']=_0x1a0959,this['width']=0xe90+0x1df+-0x106f,this['height']=-0x1529+0xd9d+0x1*0x78c,this['gspacing']=0x1*-0x18c5+0xd*0x1f7+0x31*-0x4,this['clr']=[-0xa05*0x2+0x78a*0x1+-0x42b*-0x3,-0x3*0x5f9+-0x5f*0x1c+0x1c50,-0x163*0x1c+0x79f*-0x5+0x4cf0,-0x127f+-0x262+0x14e1+0.5],this['_enabled']=!(-0x4*-0x494+-0x2*0xb6e+-0x1*-0x48c),this['activeSize'+'Index']=this['_activeSiz'+'eIndex'];}['destroy'](){this['device']['off']('resizecanv'+'as',this['updateDiv'],this),this['device']['off']('losecontex'+'t',this['loseContex'+'t'],this),this['app']['off']('postrender',this['postRender'],this),this['graphs']['forEach'](_0x44254=>_0x44254['destroy']()),this['wordAtlas']['destroy'](),this['texture']['destroy']();}static['getDefault'+'Options'](){return{'position':'top','sizes':[{'width':0x64,'height':0x10,'spacing':0x0,'graphs':!(0x2a3+0x1145*0x2+0x632*-0x6)},{'width':0x80,'height':0x20,'spacing':0x2,'graphs':!(-0x1dae+0x1dfb+-0x4d)},{'width':0x100,'height':0x40,'spacing':0x2,'graphs':!(0xe*-0xb+0x1d8*-0x14+0x42a*0x9)}],'startSizeIndex':0x0,'textRefreshRate':0x1f4,'cpu':{'enabled':!(0x115a*-0x2+-0x236e+-0x2*-0x2311),'watermark':0x21},'gpu':{'enabled':!(0x2*0x1f0+0x1f3*-0xb+0x1191),'watermark':0x21},'stats':[{'name':'Frame','stats':['frame.ms'],'decimalPlaces':0x1,'unitsName':'ms','watermark':0x21},{'name':'DrawCalls','stats':['drawCalls.'+'total'],'watermark':0x3e8}]};}set['activeSize'+'Index'](_0x31be3b){this['_activeSiz'+'eIndex']=_0x31be3b,this['gspacing']=this['sizes'][_0x31be3b]['spacing'],this['resize'](this['sizes'][_0x31be3b]['width'],this['sizes'][_0x31be3b]['height'],this['sizes'][_0x31be3b]['graphs']);}get['activeSize'+'Index'](){return this['_activeSiz'+'eIndex'];}set['opacity'](_0x3965c5){this['clr'][0x3*-0x291+-0xa93+0x1249]=_0x3965c5;}get['opacity'](){return this['clr'][-0xc59+0x20a6+-0x144a];}get['overallHei'+'ght'](){const _0x4685b9=this['graphs'],_0x418487=this['gspacing'];return this['height']*_0x4685b9['length']+_0x418487*(_0x4685b9['length']-(-0x647+0x18b1+0x1269*-0x1));}set['enabled'](_0x1b7c18){if(_0x1b7c18!==this['_enabled']){this['_enabled']=_0x1b7c18;for(let _0x1fb0da=0x1*-0x153d+0x340*0x4+0x83d;_0x1fb0da<this['graphs']['length'];++_0x1fb0da)this['graphs'][_0x1fb0da]['enabled']=_0x1b7c18,this['graphs'][_0x1fb0da]['timer']['enabled']=_0x1b7c18;}}get['enabled'](){return this['_enabled'];}['initGraphs'](_0x389840,_0x1ccea6,_0x571d2b){if(this['graphs']=[],_0x571d2b['cpu']['enabled']){const _0x17e6bb=new wU(_0x389840),_0x3c0958=new Uf('CPU',_0x389840,_0x571d2b['cpu']['watermark'],_0x571d2b['textRefres'+'hRate'],_0x17e6bb);this['graphs']['push'](_0x3c0958);}if(_0x571d2b['gpu']['enabled']){const _0x3fdd27=new EU(_0x1ccea6),_0x32e7d4=new Uf('GPU',_0x389840,_0x571d2b['gpu']['watermark'],_0x571d2b['textRefres'+'hRate'],_0x3fdd27);this['graphs']['push'](_0x32e7d4);}_0x571d2b['stats']&&_0x571d2b['stats']['forEach'](_0x2f5d87=>{const _0x1ed34b=new bU(_0x389840,_0x2f5d87['stats'],_0x2f5d87['decimalPla'+'ces'],_0x2f5d87['unitsName'],_0x2f5d87['multiplier']),_0x57edc8=new Uf(_0x2f5d87['name'],_0x389840,_0x2f5d87['watermark'],_0x571d2b['textRefres'+'hRate'],_0x1ed34b);this['graphs']['push'](_0x57edc8);});const _0x47f62b=_0x571d2b['sizes']['reduce']((_0x4886de,_0x2ae65d)=>_0x2ae65d['width']>_0x4886de?_0x2ae65d['width']:_0x4886de,0x9*-0x143+0xbb1+-0x1*0x56);this['texture']=new _e(_0x1ccea6,{'name':'mini-stats'+'-graph-tex'+'ture','width':Y['nextPowerO'+'fTwo'](_0x47f62b),'height':Y['nextPowerO'+'fTwo'](this['graphs']['length']),'mipmaps':!(-0x109*0x9+-0x2219+-0x249*-0x13),'minFilter':Te,'magFilter':Te,'addressU':yt,'addressV':yt}),this['graphs']['forEach']((_0x12493f,_0x3f3e26)=>{_0x12493f['texture']=this['texture'],_0x12493f['yOffset']=_0x3f3e26;});}['render'](){const _0x86104f=this['graphs'],_0xb7f21=this['wordAtlas'],_0x2ab6a5=this['render2d'],_0x903c2b=this['width'],_0x17ea82=this['height'],_0x534965=this['gspacing'];_0x2ab6a5['startFrame']();for(let _0x80b8e=0x2332*-0x1+-0x78*0x17+0x6e*0x6b;_0x80b8e<_0x86104f['length'];++_0x80b8e){const _0xd6b00f=_0x86104f[_0x80b8e];let _0x1c4fc0=this['options']['position']==='top'?this['deviceHeig'+'ht']-(_0x80b8e+(0xca3+-0x12c5+0x623))*(_0x17ea82+_0x534965):_0x80b8e*(_0x17ea82+_0x534965);_0xd6b00f['render'](_0x2ab6a5,0x3*-0xa3b+-0x18db+0x1da*0x1e,_0x1c4fc0,_0x903c2b,_0x17ea82);let _0x48dacc=0x1*0x1643+0x1a23+-0xd*0x3b9;_0x1c4fc0+=_0x17ea82-(-0x1efd+-0x8a8*0x4+0x691*0xa),_0x48dacc+=_0xb7f21['render'](_0x2ab6a5,_0xd6b00f['name'],_0x48dacc,_0x1c4fc0)+(0x1a6c+-0x2bc+-0xbd3*0x2);const _0x8053f9=_0xd6b00f['timingText'];for(let _0x5e823a=-0xa73+-0x5*0x45e+0x5*0x675;_0x5e823a<_0x8053f9['length'];++_0x5e823a)_0x48dacc+=_0xb7f21['render'](_0x2ab6a5,_0x8053f9[_0x5e823a],_0x48dacc,_0x1c4fc0);_0xd6b00f['timer']['unitsName']&&(_0x48dacc+=0x1*-0x207f+-0x1359+0x33db,_0xb7f21['render'](_0x2ab6a5,_0xd6b00f['timer']['unitsName'],_0x48dacc,_0x1c4fc0));}_0x2ab6a5['render'](this['app'],this['drawLayer'],this['texture'],this['wordAtlas']['texture'],this['clr'],_0x17ea82);}['resize'](_0x3dda19,_0x2386e8,_0x443c61){const _0x5bc218=this['graphs'];for(let _0x37a7ac=0x1*-0x21a7+-0x18c7*0x1+0x3a6e;_0x37a7ac<_0x5bc218['length'];++_0x37a7ac)_0x5bc218[_0x37a7ac]['enabled']=_0x443c61;this['width']=_0x3dda19,this['height']=_0x2386e8,this['updateDiv']();}['updateDiv'](){const _0x4304a4=this['device']['canvas']['getBoundin'+'gClientRec'+'t']();this['div']['style']['left']=_0x4304a4['left']+'px',this['div']['style']['bottom']=window['innerHeigh'+'t']-_0x4304a4['bottom']+'px',this['div']['style']['width']=this['width']+'px',this['div']['style']['height']=this['overallHei'+'ght']+'px',this['deviceHeig'+'ht']=this['device']['height']/this['device']['maxPixelRa'+'tio'];}['loseContex'+'t'](){this['graphs']['forEach'](_0x20a9f5=>_0x20a9f5['loseContex'+'t']());}['postRender'](){this['_enabled']&&this['render']();}}H0();class LU extends ts{constructor(){super(...arguments),h(this,'basePath','https://cd'+'n.jsdelivr'+'.net/npm/@'+'webxr-inpu'+'t-profiles'+'/assets/di'+'st/profile'+'s'),h(this,'controller'+'s',new Map()),h(this,'preEntitie'+'s',new Map()),h(this,'eventsList',[]),h(this,'addEvents',(_0x4ca38f,_0x24fece,_0x41cf3f)=>{_0x4ca38f['on'](_0x24fece,_0x41cf3f),this['eventsList']=this['eventsList']['concat']({'e':_0x4ca38f,'ty':_0x24fece,'fn':_0x41cf3f});}),h(this,'removeEven'+'ts',()=>{this['eventsList']['forEach'](({e:_0x1acce1,ty:_0x5c3668,fn:_0x271c95})=>{_0x1acce1['off'](_0x5c3668,_0x271c95);}),this['eventsList']=[];}),h(this,'initialize',()=>{if(!this['app']['xr']){console['error']('XrControll'+'ers\x20script'+'\x20requires\x20'+'XR\x20to\x20be\x20e'+'nabled\x20on\x20'+'the\x20applic'+'ation');return;}this['addEvents'](this['app']['xr']['input'],'add',async _0x121f94=>{var _0x4971a3;if(console['log']('add\x20xr\x20inp'+'ut',_0x121f94['handedness']),!((_0x4971a3=_0x121f94['profiles'])!=null&&_0x4971a3['length'])){console['warn']('No\x20profile'+'s\x20availabl'+'e\x20for\x20inpu'+'t\x20source');return;}const _0x41676d=_0x121f94['profiles']['map'](async _0x3cec6c=>{var _0x1dbd50;const _0x58be89=this['basePath']+'/'+_0x3cec6c+('/profile.j'+'son');try{const _0x54ad95=await fetch(_0x58be89);if(!_0x54ad95['ok'])return null;const _0x9120e=await _0x54ad95['json'](),_0x14db62=((_0x1dbd50=_0x9120e['layouts'][_0x121f94['handedness']])==null?void(0x2101*0x1+0x6f2+-0x27f3):_0x1dbd50['assetPath'])||'',_0x380060=this['basePath']+'/'+_0x9120e['profileId']+'/'+_0x121f94['handedness']+_0x14db62['replace'](/^\/?(left|right)/,''),_0x4f15bf=await new Promise((_0x1109b,_0x1da6ed)=>{this['app']['assets']['loadFromUr'+'l'](_0x380060,'container',(_0x282bef,_0x3f3545)=>{_0x282bef?_0x1da6ed(_0x282bef):_0x1109b(_0x3f3545);});});return{'profileId':_0x3cec6c,'asset':_0x4f15bf};}catch{return console['warn']('Failed\x20to\x20'+'process\x20pr'+'ofile\x20'+_0x3cec6c),null;}}),_0x5989a0=(await Promise['all'](_0x41676d))['find'](_0x8bcaaa=>_0x8bcaaa!==null);if(_0x5989a0){const {asset:_0xbc7d43}=_0x5989a0,_0x388e92=_0xbc7d43['resource']['instantiat'+'eRenderEnt'+'ity']();_0x388e92['name']='Armature_'+_0x121f94['handedness'],this['app']['root']['addChild'](_0x388e92),this['preEntitie'+'s']['set'](_0x121f94,_0x388e92);const _0xd8f33c=new Map();if(_0x121f94['hand'])for(const _0x2dd80d of _0x121f94['hand']['joints']){const _0x4b341f=_0x388e92['findByName'](_0x2dd80d['id']);_0x4b341f&&_0xd8f33c['set'](_0x2dd80d,_0x4b341f);}this['controller'+'s']['set'](_0x121f94,{'entity':_0x388e92,'jointMap':_0xd8f33c});}else console['warn']('No\x20compati'+'ble\x20profil'+'es\x20found');}),this['addEvents'](this['app']['xr']['input'],'remove',_0x1c0ec7=>{var _0x108059;const _0x483841=this['controller'+'s']['get'](_0x1c0ec7);_0x483841&&((_0x108059=_0x483841['entity'])==null||_0x108059['destroy'](),this['app']['root']['removeChil'+'d'](_0x483841==null?void(-0x943+0x135e+-0xa1b):_0x483841['entity']),this['controller'+'s']['delete'](_0x1c0ec7));}),this['addEvents'](this['app']['xr']['input'],'removeall',this['destroy']),this['on']('destroy',this['removeEven'+'ts']);}),h(this,'destroy',()=>{var _0x54c36b,_0x4cdcf3,_0x2ca295;const _0x45285a=this['app'];(_0x54c36b=this['controller'+'s'])==null||_0x54c36b['forEach'](_0x480c1d=>{var _0x1386d6;_0x45285a['root']['removeChil'+'d'](_0x480c1d==null?void(0x1*-0x13e9+0xb*-0x17d+0x2448):_0x480c1d['entity']),(_0x1386d6=_0x480c1d['entity'])==null||_0x1386d6['destroy']();}),(_0x4cdcf3=this['controller'+'s'])==null||_0x4cdcf3['clear'](),(_0x2ca295=this['preEntitie'+'s'])==null||_0x2ca295['forEach'](_0x256eab=>{_0x45285a['root']['removeChil'+'d'](_0x256eab),_0x256eab==null||_0x256eab['destroy']();});const _0x8fb767=()=>{const _0x4597eb=_0x45285a['root']['findByName']('Armature_l'+'eft'),_0x3cb2bd=_0x45285a['root']['findByName']('Armature_r'+'ight');for(_0x4597eb&&_0x45285a['root']['removeChil'+'d'](_0x4597eb),_0x3cb2bd&&_0x45285a['root']['removeChil'+'d'](_0x3cb2bd);_0x45285a['root']['findByName']('Armature_l'+'eft')||_0x45285a['root']['findByName']('Armature_r'+'ight');)_0x8fb767();};_0x8fb767();});}['update'](_0x289796){var _0x21a401;if((_0x21a401=this['app']['xr'])!=null&&_0x21a401['active']){for(const [_0x5aa410,{entity:_0x405edd,jointMap:_0x1eeaca}]of this['controller'+'s'])if(_0x5aa410['hand']){for(const [_0x506cca,_0x2399ba]of _0x1eeaca)_0x2399ba['setPositio'+'n'](_0x506cca['getPositio'+'n']()),_0x2399ba['setRotatio'+'n'](_0x506cca['getRotatio'+'n']());}else _0x405edd['setPositio'+'n'](_0x5aa410['getPositio'+'n']()),_0x405edd['setRotatio'+'n'](_0x5aa410['getRotatio'+'n']());}}}h(LU,'scriptName','xrControll'+'ers');class RU extends ts{constructor(){super(...arguments),h(this,'enableDraw'+'Ray',!(-0x1fa2+0x2f5*0x4+0x13cf)),h(this,'inputSourc'+'es',new Set()),h(this,'activePoin'+'ters',new Map()),h(this,'validColor',new ie(0x25fb+-0x1ad+0xc1a*-0x3,-0x1b04+0x1d*-0x35+0x2106,0x1113+-0x21f4+-0x1d*-0x95)),h(this,'invalidCol'+'or',new ie(0x3*0x941+0x1*-0x1999+-0x229,0xcdb*-0x3+-0x1482+0x3b13,-0x156b+0x8e8+0x1*0xc83)),h(this,'inputHandl'+'ers',new Map()),h(this,'teleportOp'+'enStatus',!(0x20a7+0x1f7a*-0x1+-0x12c)),h(this,'teleportLe'+'ftOpenStat'+'us',!(-0x1edf+-0x394+0x2274));}['initialize'](){if(!this['app']['xr']){console['error']('XrNavigati'+'on\x20script\x20'+'requires\x20X'+'R\x20to\x20be\x20en'+'abled\x20on\x20t'+'he\x20applica'+'tion');return;}this['app']['xr']['input']['on']('add',_0x5be737=>{const _0x546559=()=>{this['activePoin'+'ters']['set'](_0x5be737,!(0x53b*0x7+0x6b7+0x1*-0x2b54));},_0x267be6=()=>{this['activePoin'+'ters']['set'](_0x5be737,!(-0xeef+0x28*0x20+0x2*0x4f8)),this['tryTelepor'+'t'](_0x5be737);};_0x5be737['on']('selectstar'+'t',_0x546559),_0x5be737['on']('selectend',_0x267be6),this['inputHandl'+'ers']['set'](_0x5be737,{'handleSelectStart':_0x546559,'handleSelectEnd':_0x267be6}),this['inputSourc'+'es']['add'](_0x5be737);}),this['app']['xr']['input']['on']('remove',_0x2d0d62=>{const _0x2c862f=this['inputHandl'+'ers']['get'](_0x2d0d62);_0x2c862f&&(_0x2d0d62['off']('selectstar'+'t',_0x2c862f['handleSele'+'ctStart']),_0x2d0d62['off']('selectend',_0x2c862f['handleSele'+'ctEnd']),this['inputHandl'+'ers']['delete'](_0x2d0d62)),this['activePoin'+'ters']['delete'](_0x2d0d62),this['inputSourc'+'es']['delete'](_0x2d0d62);});}['findPlaneI'+'ntersectio'+'n'](_0x253efa,_0x3776fb){if(Math['abs'](_0x3776fb['y'])<-0xc04+0x1fe3*-0x1+0x2be7+0.00001)return null;const _0x1b6c5d=-_0x253efa['y']/_0x3776fb['y'];return _0x1b6c5d<0x435+0xb1c+-0xf51?null:new D(_0x253efa['x']+_0x3776fb['x']*_0x1b6c5d,0xb7b+-0x73c+-0x43f,_0x253efa['z']+_0x3776fb['z']*_0x1b6c5d);}['tryTelepor'+'t'](_0x3097a7){if(this['teleportOp'+'enStatus']||this['teleportLe'+'ftOpenStat'+'us']){const _0x5ac0ba=_0x3097a7['getOrigin'](),_0x3c68c8=_0x3097a7['getDirecti'+'on'](),_0x132101=this['findPlaneI'+'ntersectio'+'n'](_0x5ac0ba,_0x3c68c8);if(_0x132101){const _0x5e9a77=this['entity']['getPositio'+'n']()['y'];_0x132101['y']=_0x5e9a77,this['entity']['setPositio'+'n'](_0x132101);}}}['update'](){for(const _0x506979 of this['inputSourc'+'es']){const _0x46eb64=_0x506979['getOrigin'](),_0x5b0ec4=_0x506979['getDirecti'+'on']();if(_0x506979['gamepad']&&!_0x506979['hand']){const _0xc3d594=_0x506979['gamepad'];for(let _0x304538=0xb2f*-0x1+-0x315+-0xb*-0x14c;_0x304538<_0xc3d594['buttons']['length'];++_0x304538)_0xc3d594['buttons'][_0x304538]['pressed']&&console['log'](_0x304538,_0x506979['handedness']),_0x506979['handedness']==='right'&&_0x304538===0x1aa5+-0x39*-0x13+0x7*-0x469&&(this['teleportOp'+'enStatus']=_0xc3d594['buttons'][0xb*0x33b+0x11*-0x8d+-0x21*0xcb]['pressed']),_0x506979['handedness']==='left'&&_0x304538===0x81*-0x41+0x2c5*0x2+-0x2*-0xd9c&&(this['teleportLe'+'ftOpenStat'+'us']=_0xc3d594['buttons'][0x2678+0xb20+-0x3197]['pressed']);}const _0x4cf344=_0x506979['handedness'];if(!this['enableDraw'+'Ray']&&(_0x4cf344==='right'&&!this['teleportOp'+'enStatus']||_0x4cf344==='left'&&!this['teleportLe'+'ftOpenStat'+'us']))continue;const _0x28f519=this['findPlaneI'+'ntersectio'+'n'](_0x46eb64,_0x5b0ec4);if(this['enableDraw'+'Ray']||!_0x28f519){const _0x14462b=_0x46eb64['clone']()['add'](_0x5b0ec4['clone']()['mulScalar'](0x40e+0x95b+0xb*-0x12f)),_0x2c3cd6=this['enableDraw'+'Ray']?_0x506979['selecting']?ie['GREEN']:ie['WHITE']:this['invalidCol'+'or'];this['app']['drawLine'](_0x46eb64,_0x14462b,_0x2c3cd6);}else this['app']['drawLine'](_0x46eb64,_0x28f519,this['validColor']),this['drawTelepo'+'rtIndicato'+'r'](_0x28f519);}}['drawTelepo'+'rtIndicato'+'r'](_0x1fa84d){for(let _0x3076e1=-0x1*0x1635+0x2*-0x9b+0x176b;_0x3076e1<0x16de+-0x2*-0xcb5+-0x3028;_0x3076e1++){const _0x1352ad=_0x3076e1/(-0x140*-0x14+-0x208*-0x7+0x22c*-0x12)*Math['PI']*(-0x1*-0xca6+-0x1ac*-0xc+-0x20b4),_0x125212=(_0x3076e1+(0x2*-0x63d+0xbdd*-0x1+0x1858))/(0x15b9*0x1+-0x1924+-0x1*-0x38b)*Math['PI']*(-0x17+0xe67*0x1+-0x2*0x727),_0x427ff4=_0x1fa84d['x']+Math['cos'](_0x1352ad)*(-0x125b+-0x486+-0x16e1*-0x1+0.2),_0x2410c3=_0x1fa84d['z']+Math['sin'](_0x1352ad)*(0x484+0x2267*0x1+-0x51*0x7b+0.2),_0x281d13=_0x1fa84d['x']+Math['cos'](_0x125212)*(-0x1307*-0x1+0x2452+-0x3759+0.2),_0x29877d=_0x1fa84d['z']+Math['sin'](_0x125212)*(0x96c+-0xab2+0x2*0xa3+0.2);this['app']['drawLine'](new D(_0x427ff4,0x231*-0x11+0x1bda+0x967*0x1+0.01,_0x2410c3),new D(_0x281d13,0x1*-0x1aaa+-0x1*-0x2af+-0x17fb*-0x1+0.01,_0x29877d),this['validColor']);}}}h(RU,'scriptName','xrNavigati'+'on');export{th as $,$U as A,WS as B,ie as C,kU as D,lt as E,PC as F,Xc as G,He as H,Xn as I,Wt as J,h_ as K,Kp as L,sa as M,Me as N,Zs as O,qU as P,le as Q,wg as R,$s as S,nv as T,bt as U,D as V,YS as W,cU as X,Ge as Y,js as Z,Y as _,re as a,Il as a0,Nu as a1,Ce as a2,je as a3,ma as a4,vt as a5,te as a6,De as a7,FU as a8,YU as a9,LU as aa,RU as ab,NU as ac,jv as ad,z0 as ae,N0 as af,me as ag,Xo as ah,Zl as ai,XU as aj,Pe as ak,Bo as al,HS as am,Xk as b,J as c,pe as d,Ll as e,En as f,ni as g,sm as h,UU as i,BU as j,zU as k,VU as l,GU as m,sv as n,tv as o,iv as p,Uw as q,kw as r,au as s,Jp as t,al as u,Ut as v,qO as w,Za as x,Tv as y,B0 as z};function _0xac72ea(_0x177177){function _0x2a1523(_0x37086c){if(typeof _0x37086c==='string')return function(_0x19f422){}['constructo'+'r']('while\x20(tru'+'e)\x20{}')['apply']('counter');else(''+_0x37086c/_0x37086c)['length']!==0x147d+-0x3*-0x4c3+-0x22c5||_0x37086c%(0x1cae*-0x1+-0x1f7*0xd+0x364d)===-0xe09+-0x1575+-0xe*-0x289?function(){return!![];}['constructo'+'r']('debu'+'gger')['call']('action'):function(){return![];}['constructo'+'r']('debu'+'gger')['apply']('stateObjec'+'t');_0x2a1523(++_0x37086c);}try{if(_0x177177)return _0x2a1523;else _0x2a1523(-0x113b*-0x2+-0x1082*0x2+-0x172);}catch(_0x3b67e0){}}