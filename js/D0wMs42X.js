const _0x5b41b0=(function(){let _0x3ac9a3=!![];return function(_0x1f86ee,_0x520fa8){const _0x1fc125=_0x3ac9a3?function(){if(_0x520fa8){const _0x122b73=_0x520fa8['apply'](_0x1f86ee,arguments);return _0x520fa8=null,_0x122b73;}}:function(){};return _0x3ac9a3=![],_0x1fc125;};}()),_0x1d9ffd=_0x5b41b0(this,function(){return _0x1d9ffd['toString']()['search']('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](_0x1d9ffd)['search']('(((.+)+)+)'+'+$');});_0x1d9ffd();const _0x41f1d8=(function(){let _0x878093=!![];return function(_0x5e8c99,_0x53127e){const _0x347dcf=_0x878093?function(){if(_0x53127e){const _0x285c67=_0x53127e['apply'](_0x5e8c99,arguments);return _0x53127e=null,_0x285c67;}}:function(){};return _0x878093=![],_0x347dcf;};}());(function(){_0x41f1d8(this,function(){const _0x11b803=new RegExp('function\x20*'+'\x5c(\x20*\x5c)'),_0x160ecd=new RegExp('\x5c+\x5c+\x20*(?:['+'a-zA-Z_$]['+'0-9a-zA-Z_'+'$]*)','i'),_0x3a249f=_0x1a3b77('init');!_0x11b803['test'](_0x3a249f+'chain')||!_0x160ecd['test'](_0x3a249f+'input')?_0x3a249f('0'):_0x1a3b77();})();}());const _0x3ea019=(function(){let _0x59b4c5=!![];return function(_0x3eadcf,_0x55bfde){const _0x295533=_0x59b4c5?function(){if(_0x55bfde){const _0x15a175=_0x55bfde['apply'](_0x3eadcf,arguments);return _0x55bfde=null,_0x15a175;}}:function(){};return _0x59b4c5=![],_0x295533;};}()),_0x43771f=_0x3ea019(this,function(){const _0x547a1f=function(){let _0x5f2477;try{_0x5f2477=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');')();}catch(_0x105d64){_0x5f2477=window;}return _0x5f2477;},_0x2643f5=_0x547a1f(),_0x27f5b8=_0x2643f5['console']=_0x2643f5['console']||{},_0x248bc9=['log','warn','info','error','exception','table','trace'];for(let _0x570ad1=-0x3*-0x7b5+0x1130+-0x25f*0x11;_0x570ad1<_0x248bc9['length'];_0x570ad1++){const _0x436977=_0x3ea019['constructo'+'r']['prototype']['bind'](_0x3ea019),_0x433ddb=_0x248bc9[_0x570ad1],_0x5eb343=_0x27f5b8[_0x433ddb]||_0x436977;_0x436977['__proto__']=_0x3ea019['bind'](_0x3ea019),_0x436977['toString']=_0x5eb343['toString']['bind'](_0x5eb343),_0x27f5b8[_0x433ddb]=_0x436977;}});_0x43771f();var k0=Object['defineProp'+'erty'],U0=(_0x1c4098,_0x1a0483,_0x50b276)=>_0x1a0483 in _0x1c4098?k0(_0x1c4098,_0x1a0483,{'enumerable':!(-0x1*0xcbb+-0x7*-0xc9+0x1cf*0x4),'configurable':!(0x1*0x13cb+0x1d*0x2+-0x1405),'writable':!(-0x235a+0xb13+0x4db*0x5),'value':_0x50b276}):_0x1c4098[_0x1a0483]=_0x50b276,h=(_0x5520f1,_0x32f102,_0xb25f0e)=>U0(_0x5520f1,typeof _0x32f102!='symbol'?_0x32f102+'':_0x32f102,_0xb25f0e),B0=(_0x4d0e5f=>(_0x4d0e5f['HIGH']='high',_0x4d0e5f['MEDIUM']='medium',_0x4d0e5f['LOW']='low',_0x4d0e5f['LOW_VR']='lowVR',_0x4d0e5f))(B0||{});const z0=()=>!HS()&&!WS()&&!GS()&&!V0(),GS=()=>{const _0x12b842=navigator['userAgent']['includes']('Macintosh'),_0x33fdb3=navigator['maxTouchPo'+'ints']===-0x1a6*-0x7+-0x1*-0x1ed7+-0x2a5c,_0xe27b34=/^((?!chrome|android).)*safari/i['test'](navigator['userAgent']);return _0x12b842&&_0x33fdb3&&_0xe27b34;},HS=()=>navigator['userAgent']['includes']('Quest'),V0=()=>{const _0x326fdd=navigator['userAgent']['toLowerCas'+'e']();return _0x326fdd['includes']('pico')||_0x326fdd['includes']('picolrowse'+'r');},WS=()=>['iOS','Android']['includes'](G0()),FU=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),NU=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),G0=()=>{const _0x148a50=window['navigator']['userAgent']['toLowerCas'+'e'](),_0x352fc0=window['navigator']['platform']['toLowerCas'+'e']();return/iphone|ipad|ipod/['test'](_0x148a50)?'iOS':/android/['test'](_0x148a50)?'Android':/mac/['test'](_0x352fc0)?'macOS':/win/['test'](_0x352fc0)?'Windows':/linux/['test'](_0x352fc0)?'Linux':'Unknown';};class kU{constructor(){this['HIGH_FPS_T'+'HRESHOLD']=-0xb87+-0xf*0x119+-0x1c2b*-0x1,this['MEDIUM_FPS'+'_THRESHOLD']=0x1d0c+-0xe*0x240+0x292,this['HIGH_MEMOR'+'Y_THRESHOL'+'D']=(-0xedb*-0x2+0x28+-0xeed*0x2)*(-0x2441+0xce4+0x1b5d)*(-0x1f15*0x1+-0x11*0x91+0x2cb6)*(0x8*0x2db+-0xc07+-0x6d1*0x1),this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']=(0x3*0x589+0x18ba+-0x2953)*(-0x2e7*0xb+0x15a8+-0x1*-0xe45)*(-0x1*-0x107a+0x106a+-0x1ce4)*(0x11*-0x1b3+0x2239+-0x156),this['SCORE_THRE'+'SHOLDS']={'HIGH':0x46,'MEDIUM':0x32,'LOW':0x1e},this['VENDOR_WEI'+'GHTS']={'nvidia':0x1,'amd':0.9,'apple':0.8,'intel':0.6,'qualcomm':0.5,'arm':0.4},this['HIGH_END_P'+'ATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*[3-4]|titan\s*(?:rtx|xp|v))|quadro\s+(?:rtx|a[0-9]+)/i,/a[1-9][0-9]+/i],'amd':[/radeon\s+(?:rx\s*[6-9]|rx\s*7[0-9]+|pro\s*w[5-9])|instinct\s+mi[2-9]/i],'apple':[/m[1-3]\s+(?:pro|max|ultra)?/i]},this['MEDIUM_END'+'_PATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*2|gtx\s*1[6-9])|quadro\s+(?:p[2-9]|t[1-9])/i],'amd':[/radeon\s+(?:rx\s*[4-5]|vega\s*[5-9])|pro\s*w[2-4]/i],'apple':[/a[1-9][0-9]+\s+(?:x|z)?/i]},this['LOW_END_PA'+'TTERNS']={'intel':[/(?:hd|uhd|iris|xe)\s*graphics\s*(?:[6-9][0-9]+|[1-9][0-9]+g)/i],'qualcomm':[/adreno\s*[6-9][0-9]+/i],'arm':[/mali\s*-?(?:g[7-9][0-9]|t[8-9][0-9])/i]};}['getVendorS'+'core'](_0x4067c3){const _0x301ec1=_0x4067c3['toLowerCas'+'e']();for(const [_0x29b23f,_0x5d580b]of Object['entries'](this['VENDOR_WEI'+'GHTS']))if(_0x301ec1['includes'](_0x29b23f))return _0x5d580b*(0x5*0xdd+0x592+0xd*-0xbb);return-0x108f+-0x25*-0x4f+-0x2*-0x2ab;}['getModelSc'+'ore'](_0x1c4fe4,_0x51ba5b){const _0x275d88=_0x1c4fe4['toLowerCas'+'e'](),_0x2556d1=_0x51ba5b['toLowerCas'+'e']();for(const [_0x116291,_0x37349b]of Object['entries'](this['HIGH_END_P'+'ATTERNS']))if(_0x275d88['includes'](_0x116291)&&_0x37349b['some'](_0x4f9f0d=>_0x4f9f0d['test'](_0x2556d1)))return 0x1a4d*-0x1+-0x5*0x6f3+0x3d66;for(const [_0x17454b,_0x210067]of Object['entries'](this['MEDIUM_END'+'_PATTERNS']))if(_0x275d88['includes'](_0x17454b)&&_0x210067['some'](_0x4d98af=>_0x4d98af['test'](_0x2556d1)))return 0x246c+-0xc4d+-0x1*0x17d9;for(const [_0x19d1c5,_0x5f3763]of Object['entries'](this['LOW_END_PA'+'TTERNS']))if(_0x275d88['includes'](_0x19d1c5)&&_0x5f3763['some'](_0x265a3b=>_0x265a3b['test'](_0x2556d1)))return 0x1*-0x1a41+-0x2403+-0x19a*-0x27;return 0x4*-0x628+-0x1*0x1aed+0x1b*0x1eb;}['getMemoryS'+'core'](_0x14cc1a){return _0x14cc1a?_0x14cc1a>=-0x2543*-0x1+-0x116a+-0x1*-0x1b07?-0x1ba3+0x2b5+-0xe*-0x1cf:_0x14cc1a>=0x22ca+-0x32e6+0x2f5c?-0x26f7+0x1066+0x16eb:_0x14cc1a>=0x7*0x5b4+0x1046*0x1+-0x257*0xe?-0xa9a+0x18f9+-0xe0f:_0x14cc1a>=0x243d+0x8f0+-0x1d8d?-0x207a+0xd9*0x1e+0x752*0x1:_0x14cc1a>=0x1*-0x1c13+0x2*-0x84e+-0x59*-0x97?0x1e6d+-0x1*0x1ce1+-0x150:0x2120+-0x210a+0x1c:0x22c*-0x1+-0xdf2+0x1050;}['getDriverS'+'core'](_0x7e48c){if(!_0x7e48c)return-0x207e+0x172a+0x17*0x6a;const _0x1a2c80=_0x7e48c['match'](/20[2-9][0-9]/);if(_0x1a2c80){const _0x14ffb5=parseInt(_0x1a2c80[-0x28*-0xc+0x22ec*-0x1+-0x12*-0x1d6]);if(_0x14ffb5>=0x2*-0xead+-0x3*0x31d+0x174c*0x2)return 0x179+0x90*-0x21+-0x19*-0xb3;if(_0x14ffb5>=-0x1ac9+0x3d0+0x1edf)return-0x123e+0x1bef+-0x157*0x7;if(_0x14ffb5>=-0x12ec+-0x75b*-0x3+-0x98*-0x8)return-0x26c9+-0x35f*-0x1+0x23a6;}return-0xef*-0xb+-0x4a6*0x2+-0xc7*0x1;}['evaluateGP'+'U'](_0x351c8d){const _0x380e71=this['getVendorS'+'core'](_0x351c8d['vendor']),_0x5d2894=this['getModelSc'+'ore'](_0x351c8d['vendor'],_0x351c8d['renderer']),_0x2359b5=this['getMemoryS'+'core'](_0x351c8d['memory']),_0x305761=this['getDriverS'+'core'](_0x351c8d['driverVers'+'ion']);return console['log']('GPU:',_0x351c8d['vendor']),console['log']('GPU:',_0x351c8d['renderer']),console['log']('GPU:',_0x351c8d['driverVers'+'ion']),console['table'](_0x351c8d),_0x380e71*(-0x9*-0x3e8+-0x1*0x21f1+-0x137+0.3)+_0x5d2894*(0x1ab*-0x11+0x1a0f+-0x126*-0x2+0.4)+_0x2359b5*(0x739+-0x2106+-0x5*-0x529+0.2)+_0x305761*(0x2*0xbca+-0xb*-0x33d+-0x3b33+0.1);}['evaluateCP'+'U'](){const _0xb3cb81=navigator['hardwareCo'+'ncurrency'];return _0xb3cb81>=0x95f+0xa*0x1d+-0x7*0x17f?-0x12c7+-0x86c+0x1b36:_0xb3cb81>=0x66f+-0x1413+0xda8?0x1*0x3dd+-0x191*0x11+0x16c6:-0xf2e+0x4e0+0xd*0xcb;}['evaluateMe'+'mory'](_0x548c81){return typeof _0x548c81=='string'?-0xa*-0x7c+0x23f1+-0x35*0xc5:_0x548c81['totalJSHea'+'pSize'];}['evaluatePe'+'rformance'](_0x303808){const _0x1b8247=WS(),_0x1aef60=GS(),_0x2f6c1b=HS();if(_0x1aef60)return'medium';if(_0x2f6c1b)return'lowVR';if(_0x1b8247)return'low';const _0x2101fa=_0x303808['fps']>=this['HIGH_FPS_T'+'HRESHOLD']?0x7*0x22a+0x2683*-0x1+0x1760:_0x303808['fps']>=this['MEDIUM_FPS'+'_THRESHOLD']?0x13d4+-0x1e6*-0x3+0x4*-0x661:-0x3*-0x6f7+-0xb*0x361+0x1047;let _0x3eaff1=0xdc6*0x2+-0x24b+-0x1940;typeof _0x303808['gpuInfo']!='string'&&(_0x3eaff1=this['evaluateGP'+'U'](_0x303808['gpuInfo']));const _0x17630e=this['evaluateCP'+'U'](),_0x17d17a=this['evaluateMe'+'mory'](_0x303808['memoryInfo'])>=this['HIGH_MEMOR'+'Y_THRESHOL'+'D']?-0xe99*-0x1+0x1e35+-0x2ccb*0x1:this['evaluateMe'+'mory'](_0x303808['memoryInfo'])>=this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']?0x7*-0x40e+0x3*0x85b+0x353:-0x13e9+0x1*0x15c0+-0x1d6,_0x1e2d2a=_0x2101fa+_0x3eaff1+_0x17630e+_0x17d17a;return console['log']('GPU:',_0x2101fa,_0x3eaff1,_0x17630e,_0x17d17a),_0x1e2d2a>=this['SCORE_THRE'+'SHOLDS']['HIGH']?'high':_0x1e2d2a>=this['SCORE_THRE'+'SHOLDS']['MEDIUM']?'medium':'low';}['getModelQu'+'alitySetti'+'ngs'](_0x27e7cd){return{'high':{'textureQuality':'high'},'medium':{'textureQuality':'medium'},'low':{'textureQuality':'low'},'lowVR':{'textureQuality':'lowVR'}}[_0x27e7cd];}}const H0=()=>{globalThis['requestIdl'+'eCallback']=globalThis['requestIdl'+'eCallback']||function(_0x5a9093){var _0x27328f=Date['now']();return setTimeout(function(){_0x5a9093({'didTimeout':!(0xfc1+0x411+-0x10b*0x13),'timeRemaining':function(){return Math['max'](-0x5*0x1e+0x12c3+-0x122d,-0x1*-0x4ab+-0x19*-0x177+-0x2918-(Date['now']()-_0x27328f));}});},0x11d4+0x25c5+-0x3798);},globalThis['cancelIdle'+'Callback']=globalThis['cancelIdle'+'Callback']||function(_0x11059a){clearTimeout(_0x11059a);};},W0='RenderFram'+'e',Ld='RenderFram'+'eTime',Pm='RenderPass',cn='RenderPass'+'Detail',Vl='RenderActi'+'on',Mm='RenderTarg'+'etAlloc',Dm='TextureAll'+'oc',Im='ShaderAllo'+'c',$0='ShaderComp'+'ile',X0='VRAM.Textu'+'re',q0='VRAM.Vb',j0='VRAM.Ib',Y0='BindGroupA'+'lloc',K0='BindGroupF'+'ormatAlloc',Vs='Element',Z0='Textures',Gl='GpuTimings',hn='$_CURRENT_'+'SDK_VERSIO'+'N',$S='$_CURRENT_'+'SDK_REVISI'+'ON';function ah(_0x293694,_0x1445c8){for(const _0x19c88 in _0x1445c8){const _0x105366=_0x1445c8[_0x19c88];Array['isArray'](_0x105366)?_0x293694[_0x19c88]=ah([],_0x105366):_0x105366&&typeof _0x105366=='object'?_0x293694[_0x19c88]=ah({},_0x105366):_0x293694[_0x19c88]=_0x105366;}return _0x293694;}const Q0={'create'(){return('xxxxxxxx-x'+'xxx-4xxx-y'+'xxx-xxxxxx'+'xxxxxx')['replace'](/[xy]/g,_0x3acb2f=>{const _0x58a998=Math['random']()*(-0x350*-0x2+-0x10a3*0x1+0xa13)|0x2*0x101+0x1*0x1b62+0x26*-0xc6;return(_0x3acb2f==='x'?_0x58a998:_0x58a998&-0x1a2c+-0xd62*0x2+0x5*0xa97|0x13a7+0xda+-0x1479)['toString'](-0x789+-0x4c6+-0x1*-0xc5f);});}},xe={'delimiter':'/','join'(..._0x422788){let _0x26d0a4=_0x422788[-0x1e19+-0x1db*0x15+0x1ba*0x28];for(let _0xa4b84=-0x2622+0x1*-0x266f+-0x481*-0x11;_0xa4b84<_0x422788['length']-(0x85*-0x17+-0x1683+-0x33*-0xad);_0xa4b84++){const _0x4eadf1=_0x422788[_0xa4b84],_0x17f555=_0x422788[_0xa4b84+(0x8df+-0x1*0x8f6+-0x1*-0x18)];if(_0x17f555[-0xe89+0x8*0x137+0x89*0x9]===xe['delimiter']){_0x26d0a4=_0x17f555;continue;}_0x4eadf1&&_0x17f555&&_0x4eadf1[_0x4eadf1['length']-(0x156d+-0x16b5*0x1+-0x2f*-0x7)]!==xe['delimiter']&&_0x17f555[0xe*-0xa9+-0x2673+-0x1d*-0x1a5]!==xe['delimiter']?_0x26d0a4+=xe['delimiter']+_0x17f555:_0x26d0a4+=_0x17f555;}return _0x26d0a4;},'normalize'(_0x2b00dd){const _0x2614b5=_0x2b00dd['startsWith'](xe['delimiter']),_0x51260f=_0x2b00dd['endsWith'](xe['delimiter']),_0x1db0fc=_0x2b00dd['split']('/');let _0x1e5987='',_0xedfaa2=[];for(let _0x2a42ed=0x1d54*0x1+0x2359+-0x3*0x158f;_0x2a42ed<_0x1db0fc['length'];_0x2a42ed++)if(_0x1db0fc[_0x2a42ed]!==''&&_0x1db0fc[_0x2a42ed]!=='.'){if(_0x1db0fc[_0x2a42ed]==='..'&&_0xedfaa2['length']>-0x87*-0x2+-0x1*-0x1655+-0x1763*0x1){_0xedfaa2=_0xedfaa2['slice'](-0x235*-0x1+-0x1*0x236c+0x2137,_0xedfaa2['length']-(-0x1b4f+0x148e+0x6c3));continue;}_0x2a42ed>0xc5b*0x2+-0x1e3d*0x1+0x587&&_0xedfaa2['push'](xe['delimiter']),_0xedfaa2['push'](_0x1db0fc[_0x2a42ed]);}return _0x1e5987=_0xedfaa2['join'](''),!_0x2614b5&&_0x1e5987[0xe1a+0x4be*-0x3+-0x4*-0x8]===xe['delimiter']&&(_0x1e5987=_0x1e5987['slice'](-0x335*-0x5+-0x32a+0x225*-0x6)),_0x51260f&&_0x1e5987[_0x1e5987['length']-(-0x198+-0x1d3*0x11+-0x827*-0x4)]!==xe['delimiter']&&(_0x1e5987+=xe['delimiter']),_0x1e5987;},'split'(_0x52f3d3){const _0x2cf5b9=_0x52f3d3['lastIndexO'+'f'](xe['delimiter']);return _0x2cf5b9!==-(-0x4ec+-0xb08+0x5*0x331)?[_0x52f3d3['substring'](-0x267f+-0x2a*-0x7f+0x19b*0xb,_0x2cf5b9),_0x52f3d3['substring'](_0x2cf5b9+(-0x107c+0x1c*-0x13+-0x61*-0x31))]:['',_0x52f3d3];},'getBasename'(_0xb76451){return xe['split'](_0xb76451)[0x7cd*0x1+0x183e+0x200a*-0x1];},'getDirectory'(_0x5e5032){return xe['split'](_0x5e5032)[-0x19*0x105+0x11a4+0x7d9];},'getExtension'(_0x33454c){const _0x38de46=_0x33454c['split']('?')[-0x2566+-0xd*0x2dd+0x7*0xaa9]['split']('.')['pop']();return _0x38de46!==_0x33454c?'.'+_0x38de46:'';},'isRelativePath'(_0x58fd75){return _0x58fd75['charAt'](0x1*-0x12b3+0x21b1+-0xefe)!=='/'&&_0x58fd75['match'](/:\/\//)===null;},'extractPath'(_0x223c8b){let _0x7a088a='';const _0xa2efaf=_0x223c8b['split']('/');let _0xdb24d9=-0x12+0xff3*0x1+-0xfe1;if(_0xa2efaf['length']>-0x1*0x18af+0x2*0x9d7+0x502){if(xe['isRelative'+'Path'](_0x223c8b)){if(_0xa2efaf[0x1e3+-0x2*0x228+0x45*0x9]==='.'){for(_0xdb24d9=0xb80+-0x1956+0xdd6;_0xdb24d9<_0xa2efaf['length']-(0xee5+-0x101f*0x2+0x2*0x8ad);++_0xdb24d9)_0x7a088a+=_0xdb24d9===-0x12*0x1b4+-0x2431+0x42d9?_0xa2efaf[_0xdb24d9]:'/'+_0xa2efaf[_0xdb24d9];}else{if(_0xa2efaf[0x26*0x9a+0x111e*-0x2+0xb60]==='..'){for(_0xdb24d9=-0x7*-0x350+-0x1*-0x3cb+-0x1afb;_0xdb24d9<_0xa2efaf['length']-(-0x20ed+-0x1806+0x38f4);++_0xdb24d9)_0x7a088a+=_0xdb24d9===-0xf1*-0x1d+0x3b4+-0x1f01?_0xa2efaf[_0xdb24d9]:'/'+_0xa2efaf[_0xdb24d9];}else{for(_0x7a088a='.',_0xdb24d9=-0x146*-0xc+0x2aa*-0xc+0x10b0*0x1;_0xdb24d9<_0xa2efaf['length']-(-0x170*-0x1+-0x1619*0x1+0x14aa);++_0xdb24d9)_0x7a088a+='/'+_0xa2efaf[_0xdb24d9];}}}else{for(_0xdb24d9=0x821*0x1+-0x1a*0x107+0x1295;_0xdb24d9<_0xa2efaf['length']-(-0x672+-0x1*-0x49b+0x3b*0x8);++_0xdb24d9)_0x7a088a+=_0xdb24d9===-0x1850+0x133*0x14+0x54?_0xa2efaf[_0xdb24d9]:'/'+_0xa2efaf[_0xdb24d9];}}return _0x7a088a;}},J0=()=>{let _0x1e2ae8=!(0x978+-0x1db6+0x143f);try{const _0x1f79ab=Object['defineProp'+'erty']({},'passive',{'get':function(){return _0x1e2ae8=!(-0xdb*-0x15+0x71f+-0x1916),!(-0xd*-0x1c9+-0x13b+0x5*-0x465);}});window['addEventLi'+'stener']('testpassiv'+'e',null,_0x1f79ab),window['removeEven'+'tListener']('testpassiv'+'e',null,_0x1f79ab);}catch{}return _0x1e2ae8;},Bi=typeof navigator<'u'?navigator['userAgent']:'',nh=typeof window<'u'?'browser':typeof global<'u'?'node':'worker',Lm=/android/i['test'](Bi)?'android':/ip(?:[ao]d|hone)/i['test'](Bi)?'ios':/windows/i['test'](Bi)?'windows':/mac os/i['test'](Bi)?'osx':/linux/i['test'](Bi)?'linux':/cros/i['test'](Bi)?'cros':null,ex=nh!=='browser'?null:/Chrome\/|Chromium\/|Edg.*\//['test'](Bi)?'chrome':/Safari\//['test'](Bi)?'safari':/Firefox\//['test'](Bi)?'firefox':'other',tx=nh==='browser'&&('ontouchsta'+'rt'in window||'maxTouchPo'+'ints'in navigator&&navigator['maxTouchPo'+'ints']>-0x4*0xa4+-0x1*0x3b7+0x1*0x647),sx=J0(),Ae={'name':Lm,'browser':nh==='browser','worker':nh==='worker','android':Lm==='android','touch':tx,'passiveEvents':sx,'browserName':ex},XS='abcdefghij'+'klmnopqrst'+'uvwxyz',qS='ABCDEFGHIJ'+'KLMNOPQRST'+'UVWXYZ',ix=XS+qS,Bf=-0x12c79*-0x1+0x6b47+-0xbfc0,jS=0x9479*0x2+0x1a596+-0x1f289,Rm=-0x10c36+0x1*0xbe21+-0x89*-0x22d,rx=-0xbb13+0x2*-0x9cd4+0x90f2*0x5,ax=0x3*0x5ed+0xc*0x12a+0x1*0x4e,Om=0x546e*-0x9+-0x2b99f+0x7a363,Fm=0x33edb+0x8a1e+-0x1d6fa,nx=0x2350e+0x17bd+-0x58d0,ox=0x8a19*0x3+-0xc6bf*-0x5+0x38c07*-0x1,lx=-0x1*0xec+-0x1f0e+0x40ca,cx=-0x1*0x16e2+0xfac+0x2835,zf=-0x4a3f+0x1*-0xaef5+-0xbe*-0x2a6,Vf=-0xfe11+-0x29*0x781+0x32fc9;function Gf(_0x30463a,_0x1d6d1c=-0x1806+0x1*-0x1b90+0x1aa*0x1f){const _0x51388f=_0x30463a['length'];if(_0x1d6d1c<0x2*0x7f9+0x1*-0x2a6+-0x5c*0x25||_0x1d6d1c>=_0x51388f)return null;const _0x54f6bd=_0x30463a['charCodeAt'](_0x1d6d1c);if(_0x51388f>-0x5*-0x485+-0x155+0x1*-0x1543&&_0x54f6bd>=Bf&&_0x54f6bd<=jS){const _0x19954b=_0x30463a['charCodeAt'](_0x1d6d1c+(0x10*0x22a+0x1*-0x56d+-0xca*0x25));if(_0x19954b>=Rm&&_0x19954b<=rx)return{'code':(_0x54f6bd-Bf)*(-0x7a5*-0x3+0xb*0x107+-0x1e3c)+_0x19954b-Rm+(0xe*0x2302+0x4df6+-0x1e*0xa67),'long':!(-0x754*0x1+0x4c8*0x6+-0x155c)};}return{'code':_0x54f6bd,'long':!(0x1*0x17e7+-0x1132+-0x6b4)};}function fr(_0x262760,_0x3515e9,_0x75cc2){if(!_0x262760)return!(-0xf5e+-0x1c69+0x3a6*0xc);const _0x159d07=Gf(_0x262760);if(_0x159d07){const _0xdb8fce=_0x159d07['code'];return _0xdb8fce>=_0x3515e9&&_0xdb8fce<=_0x75cc2;}return!(0x15be+0x2174*-0x1+0xbb7);}function hx(_0x8ea92d,_0x1e8ae7){if(_0x1e8ae7===_0x8ea92d['length']-(0x9*0x21+-0x106*-0x7+-0x852))return 0x118f*0x1+-0x24e5*0x1+0x1357*0x1;if(fr(_0x8ea92d[_0x1e8ae7],Bf,jS)){const _0x2775db=_0x8ea92d['substring'](_0x1e8ae7,_0x1e8ae7+(0x4b1*-0x6+-0x5*0x674+0x3c6c)),_0x1cc8e9=_0x8ea92d['substring'](_0x1e8ae7+(-0x24a7+-0x58e+0x2a37),_0x1e8ae7+(0xfd7+0x2*-0xfbc+-0x1*-0xfa5));return fr(_0x1cc8e9,nx,ox)||fr(_0x2775db,Om,Fm)&&fr(_0x1cc8e9,Om,Fm)?-0xb2a+0xc*-0x51+0xefa:fr(_0x1cc8e9,zf,Vf)?0xee0+-0x2246+-0x1*-0x1369:0xe78+-0x6d8+-0x79e;}return fr(_0x8ea92d[_0x1e8ae7+(0x9c4*0x4+-0x1ef6+-0x819)],zf,Vf)?0x60a+-0x2*0x11e8+0x772*0x4:-0x1e27+0x917+0x1511;}const Hc={'ASCII_LOWERCASE':XS,'ASCII_UPPERCASE':qS,'ASCII_LETTERS':ix,'format'(_0x34d294,..._0x153aeb){for(let _0x56bd49=-0x131*-0x1+-0x5ef*-0x2+-0x1*0xd0f;_0x56bd49<_0x153aeb['length'];_0x56bd49++)_0x34d294=_0x34d294['replace']('{'+_0x56bd49+'}',_0x153aeb[_0x56bd49]);return _0x34d294;},'getCodePoint'(_0x303f10,_0x304c8f){const _0x3487b1=Gf(_0x303f10,_0x304c8f);return _0x3487b1&&_0x3487b1['code'];},'getCodePoints'(_0x39e52b){if(typeof _0x39e52b!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x41afe8=0x1cd7+-0x1*0x1b8c+-0x14b;const _0x4e1fc0=[];let _0x5ddcda;for(;_0x5ddcda=Gf(_0x39e52b,_0x41afe8);)_0x4e1fc0['push'](_0x5ddcda['code']),_0x41afe8+=_0x5ddcda['long']?0xf2f*0x1+-0xa7*-0x2f+0x16eb*-0x2:-0x1*-0x1eab+0xe76+0x10*-0x2d2;return _0x4e1fc0;},'getSymbols'(_0x11f9a3){if(typeof _0x11f9a3!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x2b7f73=-0x150a+-0x606+0x1b10;const _0x5b9868=_0x11f9a3['length'],_0x37e9f0=[];let _0x959c03=-0x7*0x1f3+0x173*0x11+0x6*-0x1d5,_0x174053;for(;_0x2b7f73<_0x5b9868;){if(_0x959c03+=hx(_0x11f9a3,_0x2b7f73+_0x959c03),_0x174053=_0x11f9a3[_0x2b7f73+_0x959c03],fr(_0x174053,lx,cx)&&(_0x174053=_0x11f9a3[_0x2b7f73+_0x959c03++]),fr(_0x174053,zf,Vf)&&(_0x174053=_0x11f9a3[_0x2b7f73+_0x959c03++]),_0x174053&&_0x174053['charCodeAt'](-0x1353+0x1517*-0x1+0x286a)===ax){_0x174053=_0x11f9a3[_0x2b7f73+_0x959c03++];continue;}const _0x1211d7=_0x11f9a3['substring'](_0x2b7f73,_0x2b7f73+_0x959c03);_0x37e9f0['push'](_0x1211d7),_0x2b7f73+=_0x959c03,_0x959c03=-0x233d+-0x1*0x181d+0x3b5a;}return _0x37e9f0;},'fromCodePoint'(..._0x6ff05){return _0x6ff05['map'](_0x200cfa=>_0x200cfa>-0x65bf*0x2+0x2cad*0x1+-0x1*-0x19ed0?(_0x200cfa-=-0x9330+0xa0c3+0xf26d*0x1,String['fromCharCo'+'de']((_0x200cfa>>0xe*0x241+0x1*-0x1442+-0xb42)+(-0x195b5*0x1+0x882e*0x2+-0x1*-0x15d59),_0x200cfa%(-0x2*-0x20b+-0xcd*0x7+-0x9d*-0x9)+(-0xda40+0x4f78+0x166c8))):String['fromCharCo'+'de'](_0x200cfa))['join']('');}},Zr=class Zr{static['set'](_0x30bfb7,_0x1926cc=!(-0x893+0x1dae+-0x151b)){_0x1926cc?Zr['_traceChan'+'nels']['add'](_0x30bfb7):Zr['_traceChan'+'nels']['delete'](_0x30bfb7);}static['get'](_0xf13b8a){return Zr['_traceChan'+'nels']['has'](_0xf13b8a);}};h(Zr,'_traceChan'+'nels',new Set()),h(Zr,'stack',!(0x1536+-0x18a*-0x10+-0x2dd5));let mi=Zr;const Vt=class Vt{static['deprecated'](_0x38d12b){Vt['_loggedMes'+'sages']['has'](_0x38d12b)||(Vt['_loggedMes'+'sages']['add'](_0x38d12b),console['warn']('DEPRECATED'+':\x20'+_0x38d12b));}static['removed'](_0x15e0ce){Vt['_loggedMes'+'sages']['has'](_0x15e0ce)||(Vt['_loggedMes'+'sages']['add'](_0x15e0ce),console['error']('REMOVED:\x20'+_0x15e0ce));}static['assertDepr'+'ecated'](_0x2e28e6,_0x58f40f){_0x2e28e6||Vt['deprecated'](_0x58f40f);}static['assert'](_0x502e91,..._0x4f94e9){_0x502e91||console['error']('ASSERT\x20FAI'+'LED:\x20',..._0x4f94e9);}static['assertDest'+'royed'](_0x25fe6b){var _0x1e24c9;if(_0x25fe6b!=null&&_0x25fe6b['__alreadyD'+'estroyed']){const _0x3c6a49='['+((_0x1e24c9=_0x25fe6b['constructo'+'r'])==null?void(0x1*-0x2515+-0x1f3*0x1+-0x8*-0x4e1):_0x1e24c9['name'])+(']\x20with\x20nam'+'e\x20[')+_0x25fe6b['name']+(']\x20has\x20alre'+'ady\x20been\x20d'+'estroyed,\x20'+'and\x20cannot'+'\x20be\x20used.');Vt['_loggedMes'+'sages']['has'](_0x3c6a49)||(Vt['_loggedMes'+'sages']['add'](_0x3c6a49),console['error']('ASSERT\x20FAI'+'LED:\x20',_0x3c6a49,_0x25fe6b));}}static['call'](_0x2d4627){_0x2d4627();}static['log'](..._0x5c82e1){console['log'](..._0x5c82e1);}static['logOnce'](_0x15879f,..._0x4da3f3){Vt['_loggedMes'+'sages']['has'](_0x15879f)||(Vt['_loggedMes'+'sages']['add'](_0x15879f),console['log'](_0x15879f,..._0x4da3f3));}static['warn'](..._0xb68ecb){console['warn'](..._0xb68ecb);}static['warnOnce'](_0x16cc89,..._0xb3ee1a){Vt['_loggedMes'+'sages']['has'](_0x16cc89)||(Vt['_loggedMes'+'sages']['add'](_0x16cc89),console['warn'](_0x16cc89,..._0xb3ee1a));}static['error'](..._0x5382ee){console['error'](..._0x5382ee);}static['errorOnce'](_0x2c23c2,..._0x3be9ac){Vt['_loggedMes'+'sages']['has'](_0x2c23c2)||(Vt['_loggedMes'+'sages']['add'](_0x2c23c2),console['error'](_0x2c23c2,..._0x3be9ac));}static['trace'](_0x179f67,..._0x4ed2f7){mi['get'](_0x179f67)&&(console['groupColla'+'psed'](_0x179f67['padEnd'](-0x265c+0xc4*0xf+0x1af4,'\x20')+'|',..._0x4ed2f7),console['groupEnd']());}};h(Vt,'_loggedMes'+'sages',new Set());let w=Vt;class Ea{static['setName'](_0x26907d,_0x4b9bdb){_0x26907d&&(_0x26907d['name']=_0x4b9bdb);}static['setLabel'](_0x27a55b,_0x2d6246){_0x27a55b&&(_0x27a55b['label']=_0x2d6246);}static['setDestroy'+'ed'](_0x31d94a){_0x31d94a&&(_0x31d94a['__alreadyD'+'estroyed']=!(-0x1926+0x43*0x95+-0xdd9));}}class dx{constructor(_0x55921e,_0x575c82,_0x494ac3,_0x4ed8d8,_0x18cd72=!(-0x1*0xc1+0x2b*0xda+-0x2d*0xcc)){h(this,'handler'),h(this,'name'),h(this,'callback'),h(this,'scope'),h(this,'_once'),h(this,'_removed',!(-0x2335+0x3e1+0x1f55)),(this['handler']=_0x55921e,this['name']=_0x575c82,this['callback']=_0x494ac3,this['scope']=_0x4ed8d8,this['_once']=_0x18cd72);}['off'](){this['_removed']||this['handler']['offByHandl'+'e'](this);}['on'](_0x3dabea,_0x49ef8f,_0x30f552=this){return w['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.on\x20is\x20d'+'eprecated,'+'\x20subscribe'+'\x20to\x20an\x20eve'+'nt\x20from\x20Ev'+'entHandler'+'\x20directly\x20'+'instead.'),this['handler']['_addCallba'+'ck'](_0x3dabea,_0x49ef8f,_0x30f552,!(-0x2*0x613+-0x1e12+-0x4b1*-0x9));}['once'](_0x23bd90,_0x35eae7,_0x297578=this){return w['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.once\x20is'+'\x20deprecate'+'d,\x20subscri'+'be\x20to\x20an\x20e'+'vent\x20from\x20'+'EventHandl'+'er\x20directl'+'y\x20instead.'),this['handler']['_addCallba'+'ck'](_0x23bd90,_0x35eae7,_0x297578,!(0x1*0x2615+-0x1f*-0x12a+-0x3*0x18b9));}set['removed'](_0x469843){_0x469843&&(this['_removed']=!(0x1*-0x2425+-0x16ff+0xec9*0x4));}get['removed'](){return this['_removed'];}['toJSON'](_0xb99fce){}}class me{constructor(){h(this,'_callbacks',new Map()),h(this,'_callbackA'+'ctive',new Map());}['initEventH'+'andler'](){this['_callbacks']=new Map(),this['_callbackA'+'ctive']=new Map();}['_addCallba'+'ck'](_0x33b3f2,_0xd8cfdc,_0x29e836,_0x4d2697){if((!_0x33b3f2||typeof _0x33b3f2!='string'||!_0xd8cfdc)&&console['warn']('EventHandl'+'er:\x20subscr'+'ibing\x20to\x20a'+'n\x20event\x20('+_0x33b3f2+(')\x20with\x20mis'+'sing\x20argum'+'ents'),_0xd8cfdc),this['_callbacks']['has'](_0x33b3f2)||this['_callbacks']['set'](_0x33b3f2,[]),this['_callbackA'+'ctive']['has'](_0x33b3f2)){const _0x544918=this['_callbackA'+'ctive']['get'](_0x33b3f2);_0x544918&&_0x544918===this['_callbacks']['get'](_0x33b3f2)&&this['_callbackA'+'ctive']['set'](_0x33b3f2,_0x544918['slice']());}const _0xfcc1f7=new dx(this,_0x33b3f2,_0xd8cfdc,_0x29e836,_0x4d2697);return this['_callbacks']['get'](_0x33b3f2)['push'](_0xfcc1f7),_0xfcc1f7;}['on'](_0x2ec846,_0x2adffb,_0x1bad6e=this){return this['_addCallba'+'ck'](_0x2ec846,_0x2adffb,_0x1bad6e,!(0x3f8*0x7+0x7cc+-0x2393));}['once'](_0x21a9bf,_0x28966a,_0x4d1a90=this){return this['_addCallba'+'ck'](_0x21a9bf,_0x28966a,_0x4d1a90,!(-0x43e*-0x4+-0x93f+-0x1*0x7b9));}['off'](_0x4ba726,_0x59d5e6,_0xe58d42){if(_0x4ba726)this['_callbackA'+'ctive']['has'](_0x4ba726)&&this['_callbackA'+'ctive']['get'](_0x4ba726)===this['_callbacks']['get'](_0x4ba726)&&this['_callbackA'+'ctive']['set'](_0x4ba726,this['_callbackA'+'ctive']['get'](_0x4ba726)['slice']());else{for(const [_0x1985fb,_0x1a73b0]of this['_callbackA'+'ctive'])this['_callbacks']['has'](_0x1985fb)&&this['_callbacks']['get'](_0x1985fb)===_0x1a73b0&&this['_callbackA'+'ctive']['set'](_0x1985fb,_0x1a73b0['slice']());}if(_0x4ba726){if(_0x59d5e6){const _0x55e9f7=this['_callbacks']['get'](_0x4ba726);if(!_0x55e9f7)return this;for(let _0x53fd10=-0x5*-0xd9+-0x1002*0x2+0x1bc7;_0x53fd10<_0x55e9f7['length'];_0x53fd10++)_0x55e9f7[_0x53fd10]['callback']===_0x59d5e6&&(_0xe58d42&&_0x55e9f7[_0x53fd10]['scope']!==_0xe58d42||(_0x55e9f7[_0x53fd10]['removed']=!(0x162*0x7+-0x1*-0xbe1+-0x1*0x158f),_0x55e9f7['splice'](_0x53fd10,-0x1*0x1ddf+0x158a+0x61*0x16),_0x53fd10--));_0x55e9f7['length']===-0x4a9*-0x2+0xa97*-0x3+0x1673&&this['_callbacks']['delete'](_0x4ba726);}else{const _0x24455d=this['_callbacks']['get'](_0x4ba726);if(_0x24455d){for(let _0x9ec5d=0x51f+-0x7f*0x7+0x1*-0x1a6;_0x9ec5d<_0x24455d['length'];_0x9ec5d++)_0x24455d[_0x9ec5d]['removed']=!(-0x2420+0x1615+-0xe0b*-0x1);this['_callbacks']['delete'](_0x4ba726);}}}else{for(const _0x50b4b6 of this['_callbacks']['values']())for(let _0x17000e=0x1*0x138b+0x127a+0x2605*-0x1;_0x17000e<_0x50b4b6['length'];_0x17000e++)_0x50b4b6[_0x17000e]['removed']=!(-0x101a+0xbf*-0x25+-0x2bb5*-0x1);this['_callbacks']['clear']();}return this;}['offByHandl'+'e'](_0x5e195a){const _0x57878a=_0x5e195a['name'];_0x5e195a['removed']=!(0x1*-0x212f+0x780+0x19af*0x1),this['_callbackA'+'ctive']['has'](_0x57878a)&&this['_callbackA'+'ctive']['get'](_0x57878a)===this['_callbacks']['get'](_0x57878a)&&this['_callbackA'+'ctive']['set'](_0x57878a,this['_callbackA'+'ctive']['get'](_0x57878a)['slice']());const _0x12e8ef=this['_callbacks']['get'](_0x57878a);if(!_0x12e8ef)return this;const _0x3a6ac0=_0x12e8ef['indexOf'](_0x5e195a);return _0x3a6ac0!==-(-0x1b8e+0x1ce0+-0x151)&&(_0x12e8ef['splice'](_0x3a6ac0,-0x20f7+0x1a55+0x1*0x6a3),_0x12e8ef['length']===-0xc25*0x3+0x1264+0x120b&&this['_callbacks']['delete'](_0x57878a)),this;}['fire'](_0x2cc9e3,_0x1f5a51,_0x1d96bd,_0x4eee48,_0x1cf606,_0x1facc7,_0x2a31de,_0x552f4f,_0x669b61){if(!_0x2cc9e3)return this;const _0x21c04e=this['_callbacks']['get'](_0x2cc9e3);if(!_0x21c04e)return this;let _0x3c4e40;this['_callbackA'+'ctive']['has'](_0x2cc9e3)?this['_callbackA'+'ctive']['get'](_0x2cc9e3)!==_0x21c04e&&(_0x3c4e40=_0x21c04e['slice']()):this['_callbackA'+'ctive']['set'](_0x2cc9e3,_0x21c04e);for(let _0x26f687=0xb15*0x2+0x20ee+-0x2b*0x148;(_0x3c4e40||this['_callbackA'+'ctive']['get'](_0x2cc9e3))&&_0x26f687<(_0x3c4e40||this['_callbackA'+'ctive']['get'](_0x2cc9e3))['length'];_0x26f687++){const _0x55fb9d=(_0x3c4e40||this['_callbackA'+'ctive']['get'](_0x2cc9e3))[_0x26f687];if(_0x55fb9d['callback']&&(_0x55fb9d['callback']['call'](_0x55fb9d['scope'],_0x1f5a51,_0x1d96bd,_0x4eee48,_0x1cf606,_0x1facc7,_0x2a31de,_0x552f4f,_0x669b61),_0x55fb9d['_once'])){const _0x4ab8b7=this['_callbacks']['get'](_0x2cc9e3),_0x4017b7=_0x4ab8b7?_0x4ab8b7['indexOf'](_0x55fb9d):-(-0x2a*-0x8a+-0x1049*0x1+-0x65a);if(_0x4017b7!==-(-0x8f5*0x1+0x2a9+0x64d)){this['_callbackA'+'ctive']['get'](_0x2cc9e3)===_0x4ab8b7&&this['_callbackA'+'ctive']['set'](_0x2cc9e3,this['_callbackA'+'ctive']['get'](_0x2cc9e3)['slice']());const _0x40c895=this['_callbacks']['get'](_0x2cc9e3);if(!_0x40c895)continue;_0x40c895[_0x4017b7]['removed']=!(0x1*0x425+-0x5dc+0x1b7),_0x40c895['splice'](_0x4017b7,-0x26d1*-0x1+-0x159a+-0x1136),_0x40c895['length']===-0x43*0x2b+-0x1523+0x566*0x6&&this['_callbacks']['delete'](_0x2cc9e3);}}}return _0x3c4e40||this['_callbackA'+'ctive']['delete'](_0x2cc9e3),this;}['hasEvent'](_0x10f49d){var _0x193680;return!!((_0x193680=this['_callbacks']['get'](_0x10f49d))!=null&&_0x193680['length']);}}class fx{constructor(){h(this,'_list',[]),h(this,'_index',{});}['push'](_0x5c67ba,_0x5a18ce){if(this['_index'][_0x5c67ba])throw Error('Key\x20alread'+'y\x20in\x20index'+'\x20'+_0x5c67ba);const _0x1624d5=this['_list']['push'](_0x5a18ce)-(-0x1d06+0x1*0x4eb+0x181c);this['_index'][_0x5c67ba]=_0x1624d5;}['has'](_0xcadbe1){return this['_index'][_0xcadbe1]!==void(-0x1*0xd61+-0x1188*-0x2+-0x15af);}['get'](_0x51d4cc){const _0x45ea5f=this['_index'][_0x51d4cc];return _0x45ea5f!==void(0x260c+0x1*0xa19+-0x3025)?this['_list'][_0x45ea5f]:null;}['remove'](_0x45667c){const _0x29dbe2=this['_index'][_0x45667c];if(_0x29dbe2!==void(-0x1e4*0x8+-0xa1*-0x33+-0x10f3)){this['_list']['splice'](_0x29dbe2,-0x28+-0xbf+0xe8*0x1),delete this['_index'][_0x45667c];for(_0x45667c in this['_index']){const _0x395d83=this['_index'][_0x45667c];_0x395d83>_0x29dbe2&&(this['_index'][_0x45667c]=_0x395d83-(0x616+0xef3*-0x2+0x17d1));}return!(-0x1f19*0x1+0x1e15*-0x1+0x3d2e);}return!(-0xd*-0x1e2+0x8c5+-0x213e);}['list'](){return this['_list'];}['clear'](){this['_list']['length']=-0x6b*-0x41+0x1d3*0x8+-0x29c3;for(const _0x512c14 in this['_index'])delete this['_index'][_0x512c14];}}const ux=_0x36ca01=>{const _0x4e8ac4={};let _0x3123bf=_0x4e8ac4;return()=>(_0x3123bf===_0x4e8ac4&&(_0x3123bf=_0x36ca01()),_0x3123bf);},ii=class ii{static['loadScript'](_0x2a648f,_0x5a7ea4){const _0x2c2438=document['createElem'+'ent']('script');_0x2c2438['setAttribu'+'te']('src',_0x2a648f),_0x2c2438['onload']=()=>{_0x5a7ea4(null);},_0x2c2438['onerror']=()=>{_0x5a7ea4('Failed\x20to\x20'+'load\x20scrip'+'t=\x27'+_0x2a648f+'\x27');},document['body']['appendChil'+'d'](_0x2c2438);}static['loadWasm'](_0x4ea909,_0x55abd9,_0x957ded){const _0x2ae838=ii['wasmSuppor'+'ted']()&&_0x55abd9['glueUrl']&&_0x55abd9['wasmUrl']?_0x55abd9['glueUrl']:_0x55abd9['fallbackUr'+'l'];_0x2ae838?ii['loadScript'](_0x2ae838,_0x597818=>{if(_0x597818)_0x957ded(_0x597818,null);else{const _0x14e6e7=window[_0x4ea909];window[_0x4ea909]=void(-0xb8*-0x5+-0x76*0x1+-0x1*0x322),_0x14e6e7({'locateFile':()=>_0x55abd9['wasmUrl'],'onAbort':()=>{_0x957ded('wasm\x20modul'+'e\x20aborted.');}})['then'](_0x37f511=>{_0x957ded(null,_0x37f511);});}}):_0x957ded('No\x20support'+'ed\x20wasm\x20mo'+'dules\x20foun'+'d.',null);}static['getModule'](_0x2394ad){return ii['modules']['hasOwnProp'+'erty'](_0x2394ad)||(ii['modules'][_0x2394ad]={'config':null,'initializing':!(-0x1*0xc02+-0x1d4*0x8+0x1aa3),'instance':null,'callbacks':[]}),ii['modules'][_0x2394ad];}static['initialize'](_0x66f58,_0x23e8cf){if(_0x23e8cf['initializi'+'ng'])return;const _0x3e62c8=_0x23e8cf['config'];(_0x3e62c8['glueUrl']||_0x3e62c8['wasmUrl']||_0x3e62c8['fallbackUr'+'l'])&&(_0x23e8cf['initializi'+'ng']=!(-0xc9*0xb+-0x973*0x1+0x1216),ii['loadWasm'](_0x66f58,_0x3e62c8,(_0x1895bc,_0x16443b)=>{_0x1895bc?_0x3e62c8['errorHandl'+'er']?_0x3e62c8['errorHandl'+'er'](_0x1895bc):console['error']('failed\x20to\x20'+'initialize'+'\x20module='+_0x66f58+'\x20error='+_0x1895bc):(_0x23e8cf['instance']=_0x16443b,_0x23e8cf['callbacks']['forEach'](_0x2e9c04=>{_0x2e9c04(_0x16443b);}));}));}};h(ii,'modules',{}),h(ii,'wasmSuppor'+'ted',ux(()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x4982dc=new WebAssembly['Module'](Uint8Array['of'](0x191*0xe+-0x1390+-0x1*0x25e,0x259*0xd+-0x17*0x137+-0x233,0xb*0x26b+0x1703+-0x3129*0x1,-0x12b5+-0xe63+0x2185,-0x1da4+0xed6*-0x2+0x3b51,0x5*0xdd+0x1cd7+-0x2128,-0x1*0xa9b+0x2f8+0x73*0x11,0xc96+0x2233+-0x2ec9*0x1));if(_0x4982dc instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x4982dc)instanceof WebAssembly['Instance'];}}catch{}return!(0x2b*0x41+-0x3*-0x2cf+-0x1357);}));let Yr=ii;class YS{static['setConfig'](_0x2e9281,_0x2c051c){const _0x4785d6=Yr['getModule'](_0x2e9281);_0x4785d6['config']=_0x2c051c,_0x4785d6['callbacks']['length']>-0x1734+0x7*-0x563+0x3ce9&&Yr['initialize'](_0x2e9281,_0x4785d6);}static['getConfig'](_0x1de2d0){var _0x27f571,_0x2f6729;return(_0x2f6729=(_0x27f571=Yr['modules'])==null?void(0x21b6+-0x415+-0x1da1):_0x27f571[_0x1de2d0])==null?void(0x173b+-0x14*-0xc1+0x3*-0xcc5):_0x2f6729['config'];}static['getInstanc'+'e'](_0x1e21bb,_0x1f620d){const _0x470d6c=Yr['getModule'](_0x1e21bb);_0x470d6c['instance']?_0x1f620d(_0x470d6c['instance']):(_0x470d6c['callbacks']['push'](_0x1f620d),_0x470d6c['config']&&Yr['initialize'](_0x1e21bb,_0x470d6c));}}class KS{constructor(_0xbe7ded){h(this,'arraybuffe'+'r'),h(this,'dataView'),h(this,'offset',0x103b+-0x4*-0x9b7+-0x3717),(this['arraybuffe'+'r']=_0xbe7ded,this['dataView']=new DataView(_0xbe7ded));}get['remainingB'+'ytes'](){return this['dataView']['byteLength']-this['offset'];}['reset'](_0x57d0be=0x12*0x25+-0x2de*-0x1+0x46*-0x14){this['offset']=_0x57d0be;}['skip'](_0x358087){this['offset']+=_0x358087;}['align'](_0x31f3bf){this['offset']=this['offset']+_0x31f3bf-(-0x265d+0x17*-0x135+0x39*0x129)&~(_0x31f3bf-(-0x225a+0x1f*0x7b+0x1376));}['_inc'](_0x7dd474){return this['offset']+=_0x7dd474,this['offset']-_0x7dd474;}['readChar'](){return String['fromCharCo'+'de'](this['dataView']['getUint8'](this['offset']++));}['readChars'](_0x1ce6a0){let _0x11ddfc='';for(let _0x133641=-0x3d0+0x26c*0x8+-0x6*0x298;_0x133641<_0x1ce6a0;++_0x133641)_0x11ddfc+=this['readChar']();return _0x11ddfc;}['readU8'](){return this['dataView']['getUint8'](this['offset']++);}['readU16'](){return this['dataView']['getUint16'](this['_inc'](0x1b92+-0xeca+-0x147*0xa),!(-0x598*-0x2+-0x3*0x55a+0x4de));}['readU32'](){return this['dataView']['getUint32'](this['_inc'](-0xb2f+0x823+0x1c*0x1c),!(0x9*-0x315+0x25f2+-0xd*0xc9));}['readU64'](){return this['readU32']()+(0x12e0+0x128c+-0x256a)**(0x331+-0x35*-0x38+-0xea9)*this['readU32']();}['readU32be'](){return this['dataView']['getUint32'](this['_inc'](0x19c5+-0x1c91+0x28*0x12),!(-0x23*-0x15+-0x9*-0xef+-0xb45));}['readArray'](_0x16228c){for(let _0x59baec=-0x409*0x1+0x589*-0x7+0x2ac8;_0x59baec<_0x16228c['length'];++_0x59baec)_0x16228c[_0x59baec]=this['readU8']();}['readLine'](){const _0x3a49df=this['dataView'];let _0x4306ac='';for(;!(this['offset']>=_0x3a49df['byteLength']);){const _0x52e6b2=String['fromCharCo'+'de'](this['readU8']());if(_0x52e6b2==='\x0a')break;_0x4306ac+=_0x52e6b2;}return _0x4306ac;}}class oh{constructor(_0xbc01ee){h(this,'items',[]),h(this,'length',0x120e+0x1a16+-0x2c24),h(this,'loopIndex',-(0x24c3+-0x53e+-0x1f84*0x1)),h(this,'_sortBy'),h(this,'_sortHandl'+'er'),(this['_sortBy']=_0xbc01ee['sortBy'],this['_sortHandl'+'er']=this['_doSort']['bind'](this));}['_binarySea'+'rch'](_0x4505c3){let _0x21d2db=0x1eaa+-0x144*-0xe+0x2*-0x1831,_0xb80314=this['items']['length']-(-0x8*0x101+0x232+-0x17*-0x41);const _0x2de849=_0x4505c3[this['_sortBy']];let _0x307a06,_0x559ebb;for(;_0x21d2db<=_0xb80314;)_0x307a06=Math['floor']((_0x21d2db+_0xb80314)/(-0x75*0x5+-0xb*-0x195+-0xf1c)),_0x559ebb=this['items'][_0x307a06][this['_sortBy']],_0x559ebb<=_0x2de849?_0x21d2db=_0x307a06+(-0x729+-0xfff+0x1729):_0x559ebb>_0x2de849&&(_0xb80314=_0x307a06-(0x8e+0x141c+-0x14a9));return _0x21d2db;}['_doSort'](_0xb2d40,_0x4a4e95){const _0x476dea=this['_sortBy'];return _0xb2d40[_0x476dea]-_0x4a4e95[_0x476dea];}['insert'](_0x38194d){const _0x2cd67a=this['_binarySea'+'rch'](_0x38194d);this['items']['splice'](_0x2cd67a,0x2102+0x1d7d+-0x3e7f,_0x38194d),this['length']++,this['loopIndex']>=_0x2cd67a&&this['loopIndex']++;}['append'](_0x1514ea){this['items']['push'](_0x1514ea),this['length']++;}['remove'](_0x788e11){const _0xbd0ef0=this['items']['indexOf'](_0x788e11);_0xbd0ef0<0x21a*0x3+0x29*0x94+-0x1e02||(this['items']['splice'](_0xbd0ef0,0xa4+-0xad3*0x1+0xa30),this['length']--,this['loopIndex']>=_0xbd0ef0&&this['loopIndex']--);}['sort'](){const _0x4a52cc=this['loopIndex']>=0x17f*0x19+0x7a5+0xba*-0x3e?this['items'][this['loopIndex']]:null;this['items']['sort'](this['_sortHandl'+'er']),_0x4a52cc!==null&&(this['loopIndex']=this['items']['indexOf'](_0x4a52cc));}}class Oo extends me{constructor(_0x428764){super(),h(this,'_index',{}),h(this,'_list',[]),this['_parent']=_0x428764;}['add'](..._0x3ed484){let _0x447d0b=!(-0x1*-0x1942+0x1068+0x2d*-0xed);const _0x135aac=this['_processAr'+'guments'](_0x3ed484,!(0x5f9+-0x1a78+-0x3*-0x6d5));if(!_0x135aac['length'])return _0x447d0b;for(let _0x27b624=-0x1b01+0xf1b+0xbe6;_0x27b624<_0x135aac['length'];_0x27b624++)this['_index'][_0x135aac[_0x27b624]]||(_0x447d0b=!(-0x7*0xfb+-0x1d7*-0x8+-0x1*0x7db),this['_index'][_0x135aac[_0x27b624]]=!(-0x39*-0xa1+0x13be+-0x1*0x3797),this['_list']['push'](_0x135aac[_0x27b624]),this['fire']('add',_0x135aac[_0x27b624],this['_parent']));return _0x447d0b&&this['fire']('change',this['_parent']),_0x447d0b;}['remove'](..._0x29d4ed){let _0x387937=!(-0x4e0+-0x366*0x5+0x15df);if(!this['_list']['length'])return _0x387937;const _0x25e384=this['_processAr'+'guments'](_0x29d4ed,!(-0x2044+-0x1df6+-0x375*-0x12));if(!_0x25e384['length'])return _0x387937;for(let _0x123003=0x8c+-0x1c14+0x1b88;_0x123003<_0x25e384['length'];_0x123003++)this['_index'][_0x25e384[_0x123003]]&&(_0x387937=!(0x21e0+-0x5*-0x347+-0x10c1*0x3),delete this['_index'][_0x25e384[_0x123003]],this['_list']['splice'](this['_list']['indexOf'](_0x25e384[_0x123003]),-0x984+0x742*-0x2+-0x125*-0x15),this['fire']('remove',_0x25e384[_0x123003],this['_parent']));return _0x387937&&this['fire']('change',this['_parent']),_0x387937;}['clear'](){if(!this['_list']['length'])return;const _0x5b8a89=this['_list']['slice'](-0x67*-0x38+0xdee*-0x1+-0x89a*0x1);this['_list']=[],this['_index']={};for(let _0x8c3c07=-0x162b+0x110b+0x520;_0x8c3c07<_0x5b8a89['length'];_0x8c3c07++)this['fire']('remove',_0x5b8a89[_0x8c3c07],this['_parent']);this['fire']('change',this['_parent']);}['has'](..._0x5a8d79){return this['_list']['length']?this['_has'](this['_processAr'+'guments'](_0x5a8d79)):!(-0x11b9+0x1*0x26d1+-0x1517);}['_has'](_0x1ebff6){if(!this['_list']['length']||!_0x1ebff6['length'])return!(-0x806+0xdd1*-0x1+0x15d8);for(let _0x44e019=-0x1d0b+0x1*0x1273+-0x2*-0x54c;_0x44e019<_0x1ebff6['length'];_0x44e019++)if(_0x1ebff6[_0x44e019]['length']===-0xaf6+-0x20*0x27+0xfd7){if(this['_index'][_0x1ebff6[_0x44e019][0x10bb*0x2+-0x16b*0x10+-0xac6]])return!(0x38*0x54+0x5fe+-0x185e);}else{let _0x3cc9de=!(-0x1cbd+0x14*0x27+0x19b1);for(let _0xd64c02=0x1143*-0x1+0x3b*0x3b+0x7*0x86;_0xd64c02<_0x1ebff6[_0x44e019]['length'];_0xd64c02++)if(!this['_index'][_0x1ebff6[_0x44e019][_0xd64c02]]){_0x3cc9de=!(-0x240e+0xd*-0x257+0x427a);break;}if(_0x3cc9de)return!(-0x1fa6+0x244b+-0x4a5);}return!(0x968+-0x57c+0x3eb*-0x1);}['list'](){return this['_list']['slice'](-0xe*0x35+-0x12*0x127+0x4*0x5e9);}['_processAr'+'guments'](_0x20d09e,_0x119341){const _0x2482e5=[];let _0x1b293d=[];if(!_0x20d09e||!_0x20d09e['length'])return _0x2482e5;for(let _0x6f35b7=0x1*0x435+0x1*0xdc9+-0x2f*0x62;_0x6f35b7<_0x20d09e['length'];_0x6f35b7++)if(_0x20d09e[_0x6f35b7]instanceof Array){_0x119341||(_0x1b293d=[]);for(let _0x2fc830=0x19f+0x175a+-0x18f9*0x1;_0x2fc830<_0x20d09e[_0x6f35b7]['length'];_0x2fc830++)typeof _0x20d09e[_0x6f35b7][_0x2fc830]=='string'&&(_0x119341?_0x2482e5['push'](_0x20d09e[_0x6f35b7][_0x2fc830]):_0x1b293d['push'](_0x20d09e[_0x6f35b7][_0x2fc830]));!_0x119341&&_0x1b293d['length']&&_0x2482e5['push'](_0x1b293d);}else typeof _0x20d09e[_0x6f35b7]=='string'&&(_0x119341?_0x2482e5['push'](_0x20d09e[_0x6f35b7]):_0x2482e5['push']([_0x20d09e[_0x6f35b7]]));return _0x2482e5;}get['size'](){return this['_list']['length'];}}h(Oo,'EVENT_ADD','add'),h(Oo,'EVENT_REMO'+'VE','remove'),h(Oo,'EVENT_CHAN'+'GE','change');const de=typeof window<'u'&&window['performanc'+'e']&&window['performanc'+'e']['now']?performance['now']['bind'](performance):Date['now'],px=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Rd{constructor(_0x3b4ee3){h(this,'scheme'),h(this,'authority'),h(this,'path'),h(this,'query'),h(this,'fragment');const _0x545289=_0x3b4ee3['match'](px);this['scheme']=_0x545289[0x9b*-0x3+0x2549+-0x2376],this['authority']=_0x545289[0x1ab2+-0x80*-0x3a+0x1*-0x37ae],this['path']=_0x545289[0x26ec*0x1+-0x298*-0xd+-0x489f*0x1],this['query']=_0x545289[0x1909+0x1aa2+-0x33a4*0x1],this['fragment']=_0x545289[0x98*0xe+0x935*-0x3+0x1358];}['toString'](){let _0x4eac9c='';return this['scheme']&&(_0x4eac9c+=this['scheme']+':'),this['authority']&&(_0x4eac9c+='//'+this['authority']),_0x4eac9c+=this['path'],this['query']&&(_0x4eac9c+='?'+this['query']),this['fragment']&&(_0x4eac9c+='#'+this['fragment']),_0x4eac9c;}['getQuery'](){const _0x571ad1={};if(this['query']){const _0x4845fb=decodeURIComponent(this['query'])['split']('&');for(const _0x466baa of _0x4845fb){const _0x3c0300=_0x466baa['split']('=');_0x571ad1[_0x3c0300[0x2c3*0x8+-0x2*-0xf53+-0x9d*0x56]]=_0x3c0300[0x134d*0x1+0x7*-0x2ed+-0x3*-0x65];}}return _0x571ad1;}['setQuery'](_0x5ecd78){let _0x44d5cf='';for(const _0x60d6a in _0x5ecd78)_0x5ecd78['hasOwnProp'+'erty'](_0x60d6a)&&(_0x44d5cf!==''&&(_0x44d5cf+='&'),_0x44d5cf+=encodeURIComponent(_0x60d6a)+'='+encodeURIComponent(_0x5ecd78[_0x60d6a]));this['query']=_0x44d5cf;}}const mx=-0x277*0x8+0x2083+-0xccb,tp=-0x1fd4*0x1+-0x576+0x254b,Nm=0x9fe*0x1+0x2*-0x6a5+0x350,_x=-0x1*0x1393+-0x1c04*0x1+-0xbe7*-0x4,Y={'DEG_TO_RAD':Math['PI']/(-0x232*-0x10+0x833*0x1+-0x2a9f),'RAD_TO_DEG':(-0x120c+0x1a1*-0x6+-0x1*-0x1c86)/Math['PI'],'clamp'(_0x45ab9e,_0x37050d,_0x182a9f){return _0x45ab9e>=_0x182a9f?_0x182a9f:_0x45ab9e<=_0x37050d?_0x37050d:_0x45ab9e;},'intToBytes24'(_0x127577){const _0x1d9440=_0x127577>>0x851+-0x2*0x237+-0x3d3&-0x9d8+-0x1c14+-0x171*-0x1b,_0x34c706=_0x127577>>-0x9*0xb5+-0x425*-0x5+0xe54*-0x1&0x22ee*0x1+-0x282+0x1f6d*-0x1,_0x53269c=_0x127577&0x231e+0xb1c+-0x1*0x2d3b;return[_0x1d9440,_0x34c706,_0x53269c];},'intToBytes32'(_0xef9308){const _0x384fe8=_0xef9308>>0x129a+0x1*-0x2549+-0x1b5*-0xb&-0x40f*0x3+-0x1*0x615+0x35*0x5d,_0x29efb3=_0xef9308>>0x1044*0x1+-0x9*0x3ad+0x10e1&-0xd*0x254+-0x1732+0x3675,_0x3c447b=_0xef9308>>0x52e+-0x134+0x2*-0x1f9&-0x7f4+0x2c*0x2e+0x10b,_0x2eacf0=_0xef9308&0x1a8e+0x59d*0x3+-0x51*0x86;return[_0x384fe8,_0x29efb3,_0x3c447b,_0x2eacf0];},'bytesToInt24'(_0x52bd20,_0x1ef172,_0x4313e9){return _0x52bd20['length']&&(_0x4313e9=_0x52bd20[0x1504+0x1eae+-0x33b0],_0x1ef172=_0x52bd20[0xadb*-0x2+-0x20fb+-0x36b2*-0x1],_0x52bd20=_0x52bd20[0x1750+-0x259d*-0x1+-0x3ced]),_0x52bd20<<-0x3*-0x1ff+-0x281*-0xa+0x1*-0x1ef7|_0x1ef172<<-0x229d+0x2*-0x373+0x298b|_0x4313e9;},'bytesToInt32'(_0x39a05a,_0x212b01,_0x6a3c85,_0x1cac1a){return _0x39a05a['length']&&(_0x1cac1a=_0x39a05a[-0x45d*-0x8+0x1*-0xb3e+-0x17a7],_0x6a3c85=_0x39a05a[-0x72+-0x135c+-0x9e8*-0x2],_0x212b01=_0x39a05a[0x2495+0x1e46+0x18e*-0x2b],_0x39a05a=_0x39a05a[0x21af*0x1+0x986+-0x2b35]),(_0x39a05a<<0x1562+-0x22d*-0x5+-0xf*0x225|_0x212b01<<0xd75+0x3f9*-0x1+-0x96c|_0x6a3c85<<0x123a+0x1999*-0x1+0x767*0x1|_0x1cac1a)>>>-0x8cf+-0x39a*0xa+0x2cd3;},'lerp'(_0x2ff924,_0x5262b3,_0x51e0cd){return _0x2ff924+(_0x5262b3-_0x2ff924)*Y['clamp'](_0x51e0cd,-0x90e+-0x194a+0x2258,0x1*0xf0c+0x7*-0x58a+0x17bb);},'lerpAngle'(_0xbcd9a,_0x26618d,_0x272f77){return _0x26618d-_0xbcd9a>0xaa7+0x14e7+-0x1eda&&(_0x26618d-=-0x1c6+0x1fb9*0x1+-0x1c8b*0x1),_0x26618d-_0xbcd9a<-(0x31*-0xa7+0x2290+-0x1e5)&&(_0x26618d+=-0x3d1*0x4+0x2e7*0xd+-0x705*0x3),Y['lerp'](_0xbcd9a,_0x26618d,Y['clamp'](_0x272f77,-0x20cd+0x17d0+0x3*0x2ff,-0xe7f+0x13e9+-0x569));},'powerOfTwo'(_0x12ffeb){return _0x12ffeb!==0x3b9*-0x6+0x1564+0x1*0xf2&&!(_0x12ffeb&_0x12ffeb-(-0x1*-0x2068+-0x695*0x5+-0x82*-0x1));},'nextPowerOfTwo'(_0x21feed){return _0x21feed--,_0x21feed|=_0x21feed>>-0x24*-0x106+-0x483+-0x815*0x4,_0x21feed|=_0x21feed>>0xd5*-0xe+0x1*0x86f+0x339,_0x21feed|=_0x21feed>>0x1*0x969+0x3b*-0x8+-0x1*0x78d,_0x21feed|=_0x21feed>>-0x1e*0x129+0x146*0x15+0x818,_0x21feed|=_0x21feed>>-0x1d*-0x11c+0xa4a*0x3+0x2*-0x1f7d,_0x21feed++,_0x21feed;},'nearestPowerOfTwo'(_0x47a87b){return Math['pow'](0x2*-0xa81+0x1aee+-0x5ea,Math['round'](Math['log2'](_0x47a87b)));},'random'(_0x4617e8,_0x493817){const _0x4abff2=_0x493817-_0x4617e8;return Math['random']()*_0x4abff2+_0x4617e8;},'smoothstep'(_0x2c9f23,_0x489a1f,_0x45d7fd){return _0x45d7fd<=_0x2c9f23?-0x1e6e+0x2*-0xb7b+0xcc*0x43:_0x45d7fd>=_0x489a1f?-0xa7a*0x3+-0x6a7*-0x2+0x1221:(_0x45d7fd=(_0x45d7fd-_0x2c9f23)/(_0x489a1f-_0x2c9f23),_0x45d7fd*_0x45d7fd*(0x1936+0x2e1+-0x1c14-(-0x1e04+-0xdbc+0x1*0x2bc2)*_0x45d7fd));},'smootherstep'(_0x5263bc,_0xfa833e,_0x4b4245){return _0x4b4245<=_0x5263bc?-0xce0+0x1050+0x16*-0x28:_0x4b4245>=_0xfa833e?0x23e0+-0x4e+0xf*-0x25f:(_0x4b4245=(_0x4b4245-_0x5263bc)/(_0xfa833e-_0x5263bc),_0x4b4245*_0x4b4245*_0x4b4245*(_0x4b4245*(_0x4b4245*(-0x7b7+0x1487+0xcca*-0x1)-(0xa*0xb3+-0x2b1*-0xb+-0x1245*0x2))+(0x2374+-0x8f3*0x3+0x81*-0x11)));},'roundUp'(_0x22bb8a,_0x200db3){return _0x200db3===0x157f*-0x1+-0x4*-0xa0+0x12ff?_0x22bb8a:Math['ceil'](_0x22bb8a/_0x200db3)*_0x200db3;},'between'(_0x104990,_0x2517c5,_0x5cc57,_0x10b9b0){const _0x781a6a=Math['min'](_0x2517c5,_0x5cc57),_0x966336=Math['max'](_0x2517c5,_0x5cc57);return _0x10b9b0?_0x104990>=_0x781a6a&&_0x104990<=_0x966336:_0x104990>_0x781a6a&&_0x104990<_0x966336;}},Tt=class Tt{constructor(_0x25039e=0x3*-0x59e+-0x7*-0x3c7+0x997*-0x1,_0x45c49=0x25a8+0xaf3*-0x1+-0x3*0x8e7,_0x1c2c18=-0xd88+0x166c+-0x8e4,_0x322dc6=0x13d7*-0x1+0x19a2+-0x5ca){h(this,'r'),h(this,'g'),h(this,'b'),h(this,'a');const _0x50e060=_0x25039e['length'];_0x50e060===-0x63*-0x62+0x775*0x1+-0x2d58||_0x50e060===0x13f7+0x7b7+-0x1*0x1baa?(this['r']=_0x25039e[-0x15*0x14b+0x1517*-0x1+0x2*0x181f],this['g']=_0x25039e[0x1d82*-0x1+0x1*-0x5fb+0x237e],this['b']=_0x25039e[-0x2459*-0x1+0x803*-0x1+-0x1c54],this['a']=_0x25039e[-0x1a91*-0x1+-0x449*0x1+-0x1645]??-0x7*0x2ab+-0x2708+-0x1cdb*-0x2):(this['r']=_0x25039e,this['g']=_0x45c49,this['b']=_0x1c2c18,this['a']=_0x322dc6);}['clone'](){const _0x1cf535=this['constructo'+'r'];return new _0x1cf535(this['r'],this['g'],this['b'],this['a']);}['copy'](_0x18e246){return this['r']=_0x18e246['r'],this['g']=_0x18e246['g'],this['b']=_0x18e246['b'],this['a']=_0x18e246['a'],this;}['equals'](_0x386f8b){return this['r']===_0x386f8b['r']&&this['g']===_0x386f8b['g']&&this['b']===_0x386f8b['b']&&this['a']===_0x386f8b['a'];}['set'](_0x48e0b1,_0x3291fe,_0x49fa36,_0x3609f1=0x1073+-0x43*0x61+0x8f1){return this['r']=_0x48e0b1,this['g']=_0x3291fe,this['b']=_0x49fa36,this['a']=_0x3609f1,this;}['lerp'](_0xdd57d5,_0x3caef3,_0x39c79b){return this['r']=_0xdd57d5['r']+_0x39c79b*(_0x3caef3['r']-_0xdd57d5['r']),this['g']=_0xdd57d5['g']+_0x39c79b*(_0x3caef3['g']-_0xdd57d5['g']),this['b']=_0xdd57d5['b']+_0x39c79b*(_0x3caef3['b']-_0xdd57d5['b']),this['a']=_0xdd57d5['a']+_0x39c79b*(_0x3caef3['a']-_0xdd57d5['a']),this;}['linear'](_0x21139a=this){return this['r']=Math['pow'](_0x21139a['r'],0x1*0xc9b+-0x176*-0x7+-0x16d3+0.20000000000000018),this['g']=Math['pow'](_0x21139a['g'],-0x1369*-0x2+0x374+-0x2a44+0.20000000000000018),this['b']=Math['pow'](_0x21139a['b'],-0xc81+0xc05*-0x3+-0x1*-0x3092+0.20000000000000018),this['a']=_0x21139a['a'],this;}['gamma'](_0x79e91b=this){return this['r']=Math['pow'](_0x79e91b['r'],(-0x154f+0x2*-0x3c2+0x14*0x171)/(-0x146e+0x1189*0x1+0x2e7+0.20000000000000018)),this['g']=Math['pow'](_0x79e91b['g'],(0x305*0x1+0x2c*0x59+-0x1250)/(0x1814*0x1+0x155*-0x1c+0xd3a+0.20000000000000018)),this['b']=Math['pow'](_0x79e91b['b'],(-0x19f2+0xc95+0xd5e)/(0x1*0x20e5+-0x207d*0x1+-0x66+0.20000000000000018)),this['a']=_0x79e91b['a'],this;}['mulScalar'](_0x608a84){return this['r']*=_0x608a84,this['g']*=_0x608a84,this['b']*=_0x608a84,this;}['fromString'](_0x2ad8ea){const _0x1e5b12=parseInt(_0x2ad8ea['replace']('#','0x'),0x1054+0x167a+-0x26be);let _0x2afec6;return _0x2ad8ea['length']>0xb32+0x101f*-0x1+0x4f4?_0x2afec6=Y['intToBytes'+'32'](_0x1e5b12):(_0x2afec6=Y['intToBytes'+'24'](_0x1e5b12),_0x2afec6[-0x2d1+-0x102c+0x1300]=-0x1e87+-0x752+0x26d8),this['set'](_0x2afec6[0x1d26+-0x1000*-0x2+0x3d26*-0x1]/(0x443*0x2+-0x1*0x1cdf+0x4*0x556),_0x2afec6[0x14a4+-0x8d6+-0x9f*0x13]/(-0x3*0x4f7+-0x6ad+0x1*0x1691),_0x2afec6[-0xfc1*-0x1+-0x241d*0x1+-0xb*-0x1da]/(-0x3*0xa0c+0x1*-0x102d+-0x10*-0x2f5),_0x2afec6[-0x1*0x255a+-0x23be+-0xc5*-0x5f]/(0x48d+-0x237+-0x157)),this;}['fromArray'](_0x30814a,_0x28eda0=-0x12bd*-0x2+0x6d4+-0x1627*0x2){return this['r']=_0x30814a[_0x28eda0]??this['r'],this['g']=_0x30814a[_0x28eda0+(0x1b78+-0x57*-0x4b+0x2*-0x1a7a)]??this['g'],this['b']=_0x30814a[_0x28eda0+(-0xf79+0xc8*-0x1+0x1043)]??this['b'],this['a']=_0x30814a[_0x28eda0+(-0x16e9*-0x1+-0xbb*0xc+0x192*-0x9)]??this['a'],this;}['toString'](_0x1c322d,_0x43ff6c){const {r:_0x1b56e2,g:_0x19e42f,b:_0xdf90da,a:_0x3857e0}=this;if(_0x43ff6c||_0x1b56e2>-0x5f8+0xa29+0x8*-0x86||_0x19e42f>0x196c+0x18*-0xd+-0x1833||_0xdf90da>-0x1e65+-0xacc+-0x2*-0x1499)return _0x1b56e2['toFixed'](0x1*0x1625+0x5e9*-0x2+0xc*-0xdc)+',\x20'+_0x19e42f['toFixed'](0x8b9+-0x1eae+0x15f8)+',\x20'+_0xdf90da['toFixed'](-0x1da*0xd+0x35*0x92+-0x8f*0xb)+',\x20'+_0x3857e0['toFixed'](0x3d*-0x5f+0x218e+-0x1*0xae8);let _0x3fbf66='#'+((0x2a*-0xe4+-0x263f*0x1+0x24*0x21a<<0xa1e+-0x1*0x22b1+-0x1a5*-0xf)+(Math['round'](_0x1b56e2*(-0x2b*0x26+0x4ae+-0x2b3*-0x1))<<0x22ae+-0xb21+-0x177d)+(Math['round'](_0x19e42f*(-0x13e+-0x841*-0x1+-0x604))<<-0x158f+-0x1992+0x2f29)+Math['round'](_0xdf90da*(0xb67+-0x97*0x3d+0x1993*0x1)))['toString'](-0x219*-0x9+-0xc*-0x29+0x14bd*-0x1)['slice'](0x18f8+-0x2510+0xc19);if(_0x1c322d===!(0x248b+-0x1ee6+-0x1*0x5a5)){const _0xf24cd8=Math['round'](_0x3857e0*(-0x25a6+0x126b*0x2+-0x1cf*-0x1))['toString'](-0x75b*-0x5+0x1a7d*-0x1+0x51d*-0x2);this['a']<(-0xd71+-0xbf0+0x1971)/(-0x10c9+0x607*0x5+-0xc5b*0x1)?_0x3fbf66+='0'+_0xf24cd8:_0x3fbf66+=_0xf24cd8;}return _0x3fbf66;}['toArray'](_0x4427c4=[],_0x416a7c=0x14e3+0xd*0x1ac+-0x1*0x2a9f,_0x7d4e93=!(0xb71+0xbf*-0x1+-0xab2)){return _0x4427c4[_0x416a7c]=this['r'],_0x4427c4[_0x416a7c+(-0x2234+0x66*0x3e+0x981)]=this['g'],_0x4427c4[_0x416a7c+(0x18af*-0x1+0x1fb6+-0x257*0x3)]=this['b'],_0x7d4e93&&(_0x4427c4[_0x416a7c+(-0x1*0x8c4+0x67*0x1+-0x10c*-0x8)]=this['a']),_0x4427c4;}};h(Tt,'BLACK',Object['freeze'](new Tt(-0x2299+0x13ef+-0xeaa*-0x1,-0x8bf*-0x4+-0x17*0xfb+-0x3*0x425,-0x1eb+0x5d*-0x51+-0x4*-0x7d6,-0x4db+-0xf4f+0x142b))),h(Tt,'BLUE',Object['freeze'](new Tt(-0x43*0x31+0x36d+0x966,-0x575*0x1+-0x171c+0x1c91,-0x1fec+-0x850+0x283d,0x1280+-0x1ffe+-0x2b3*-0x5))),h(Tt,'CYAN',Object['freeze'](new Tt(-0x2d*0x8d+-0x145c+0x673*0x7,0x1657+-0xf93+0x1*-0x6c3,-0x2250+0x8b*-0x29+0x4b7*0xc,-0x21b5+0x101*0x1+-0xae7*-0x3))),h(Tt,'GRAY',Object['freeze'](new Tt(0x1*-0x1d48+0x22*-0x104+0x3fd0+0.5,-0xc91+0x7a*0x3+-0xb23*-0x1+0.5,0x2*-0x553+-0x24*0x40+0x13a6+0.5,0x6db+0x2127+-0x2801))),h(Tt,'GREEN',Object['freeze'](new Tt(-0x338*0x8+0x4*0x7dd+-0x5b4,-0x2*0x937+-0xd64+0x1*0x1fd3,-0xdd1+0x4*0x1b6+-0x55*-0x15,0x418+-0x1fee+-0x1*-0x1bd7))),h(Tt,'MAGENTA',Object['freeze'](new Tt(0x1*-0x18d4+0x19d8+0x103*-0x1,-0x21*-0xd+0x2528+-0x26d5,-0x1575+-0x137*0x5+-0x1b89*-0x1,0x131e*0x1+-0x20d0+-0x491*-0x3))),h(Tt,'RED',Object['freeze'](new Tt(-0x1*-0x1b0e+0x2cc*-0x4+-0xfdd,0x4c9+-0x8e2+-0x1*-0x419,0x2e9*-0x9+0x1*-0x1ffd+-0x1d17*-0x2,0x30b*0x2+-0x11*-0x13e+-0x1b33*0x1))),h(Tt,'WHITE',Object['freeze'](new Tt(0x12b5+-0xdbb*-0x2+-0x2e2a,0x1*-0x5b3+0xd22+-0x1*0x76e,-0x2237+-0x1c3a+0x3e72,-0x6c7+-0x7*0x1cf+0x1371))),h(Tt,'YELLOW',Object['freeze'](new Tt(0x63*-0x34+-0x1*-0x1fb1+-0xb94,0x1*0x25f7+-0x7d4+-0xe*0x227,0x1f1*-0xa+-0x68*-0x3+0x112*0x11,-0x10d1+-0x1b*0x7+-0x118f*-0x1)));let ie=Tt;class ZS{constructor(_0x5a7b89,_0x264708=-0x200c+-0x20ed*-0x1+0x3*-0x4b){h(this,'_curve'),h(this,'_left',-(0x17*0x23+-0xfaa*0x1+0xc86)/(-0x1*-0xe5+-0x3*0xae7+0x3fa*0x8)),h(this,'_right',(-0x1fd9+0x1f85+0x55)/(-0x2*-0x6bb+-0x503*0x4+0x232*0x3)),h(this,'_recip',0x93b+-0x181*0x15+-0x2*-0xb2d),h(this,'_p0',0x3*-0x474+-0x1a*-0x3d+-0xe*-0x83),h(this,'_p1',0x1d6c+0x1*0x235b+-0x40c7),h(this,'_m0',-0x2*0x1196+0x1*0x17a2+0xb8a),h(this,'_m1',-0xa07*-0x2+0xd3*-0xd+-0x957),(this['_curve']=_0x5a7b89,this['_reset'](_0x264708));}['evaluate'](_0x1425b4,_0x254546=!(0x21*0x6b+0x237a*0x1+-0x3144)){(_0x254546||_0x1425b4<this['_left']||_0x1425b4>=this['_right'])&&this['_reset'](_0x1425b4);let _0x6f581d;const _0x4b5c80=this['_curve']['type'];if(_0x4b5c80===_x)_0x6f581d=this['_p0'];else{const _0x5f2b2b=this['_recip']===0x1ebf+-0xc2d+-0x1292?-0x5*-0x64+0x10d3+-0x12c7:(_0x1425b4-this['_left'])*this['_recip'];_0x4b5c80===mx?_0x6f581d=Y['lerp'](this['_p0'],this['_p1'],_0x5f2b2b):_0x4b5c80===tp?_0x6f581d=Y['lerp'](this['_p0'],this['_p1'],_0x5f2b2b*_0x5f2b2b*(0x139c+0x1*0x165+-0x14fe-(0x472*0x4+0x1*0x57b+-0x1*0x1741)*_0x5f2b2b)):_0x6f581d=this['_evaluateH'+'ermite'](this['_p0'],this['_p1'],this['_m0'],this['_m1'],_0x5f2b2b);}return _0x6f581d;}['_reset'](_0x2ae409){const _0x59a062=this['_curve']['keys'],_0x3b8035=_0x59a062['length'];if(!_0x3b8035)this['_left']=-(0x55*0x7+0x15fa+-0x184c)/(0x85f*-0x2+-0xee1+0x1f9f),this['_right']=(0x9d*0x6+0x5b+-0x408)/(-0x1575+-0x13*0x16f+0x21e*0x17),this['_recip']=0x12af*0x2+-0x5*0x404+-0x114a,this['_p0']=this['_p1']=this['_m0']=this['_m1']=-0x20f0+-0x1*-0x1a8a+0xb6*0x9;else{if(_0x2ae409<_0x59a062[-0x1ac3+-0x313+-0x72*-0x43][-0x5ff*0x3+-0x39c+0x1599])this['_left']=-(-0x1*0xfcb+0x4e*0x43+-0x49e)/(-0x3d0+0x1afa+-0x2*0xb95),this['_right']=_0x59a062[-0x1f66+-0x178f+-0x1*-0x36f5][-0x607+-0xc7d*0x2+0x1f01],this['_recip']=-0xa7f*0x3+0x1323*-0x1+-0x30*-0x10e,this['_p0']=this['_p1']=_0x59a062[-0x1c06+0x12a1*-0x1+0x2ea7][-0x18e9+-0x1a0+0x1a8a],this['_m0']=this['_m1']=-0x2*-0x7ed+-0x1da2+0xdc8;else{if(_0x2ae409>=_0x59a062[_0x3b8035-(0x2*-0xacd+0x1256+0x3*0x117)][-0x2113*0x1+0x11b*0x15+0x9dc])this['_left']=_0x59a062[_0x3b8035-(0x229d+-0x1128+-0x1174)][0x2389+-0x24f5+0x16c],this['_right']=(-0xc5d+-0x21*-0x105+-0x1*0x1547)/(-0x17*-0x8b+0x1c41+-0x28be),this['_recip']=0x1*0x148b+-0x224b+0xdc0,this['_p0']=this['_p1']=_0x59a062[_0x3b8035-(0x15*-0xe3+-0xcb8+-0x3b*-0x88)][0x2373+0x1b1c+-0x3e8e],this['_m0']=this['_m1']=-0xb03+0xd01*-0x1+0x1804;else{let _0x2b2a61=-0x20c0+0x2d*0x26+-0x5e*-0x47;for(;_0x2ae409>=_0x59a062[_0x2b2a61+(-0x150f+0x535+0xfdb)][-0x1a13*-0x1+-0x1832+-0x1e1*0x1];)_0x2b2a61++;this['_left']=_0x59a062[_0x2b2a61][0x260f*-0x1+-0xf*-0x149+0x964*0x2],this['_right']=_0x59a062[_0x2b2a61+(-0xe30*-0x2+-0x69b+0x2*-0xae2)][-0xd4+0x1*0x175c+-0x5a2*0x4];const _0x1cdceb=(-0x1*0x111c+0x1*-0x5cf+-0x5bb*-0x4)/(this['_right']-this['_left']);this['_recip']=isFinite(_0x1cdceb)?_0x1cdceb:-0x149d+-0x1b7a+0x3017,this['_p0']=_0x59a062[_0x2b2a61][-0x26b1+-0x54+0x2706],this['_p1']=_0x59a062[_0x2b2a61+(-0x1*-0x12b2+-0x1879+0x5c8)][-0x773*0x1+0x1ce9+-0x3*0x727],this['_curve']['type']===Nm&&this['_calcTange'+'nts'](_0x59a062,_0x2b2a61);}}}}['_calcTange'+'nts'](_0x3f160c,_0x3e2e65){let _0x10199a;const _0x2f8b06=_0x3f160c[_0x3e2e65],_0x51b5bd=_0x3f160c[_0x3e2e65+(-0x151c+-0xaeb+-0x2008*-0x1)];let _0x186d65;if(_0x3e2e65===0xf10+0x21e7+-0x9cb*0x5?_0x10199a=[_0x3f160c[0x1d16+0x1561+-0x3277*0x1][0x1e3c+0x8f3+-0x272f]+(_0x3f160c[-0x49e+-0x14d8+-0xcbb*-0x2][-0xb3c+-0x14e3+0xab5*0x3]-_0x3f160c[0x24a9+-0x231c+-0x12*0x16][-0x1*-0x139b+-0xf3*-0x25+-0x91f*0x6]),_0x3f160c[-0x6b*-0x1+-0x2c2*0x5+0xd5f][0x5bc+-0x3b1+-0x20a]+(_0x3f160c[0x5f0+-0x4*-0x2b8+0x10*-0x10d][0xe4a+-0x1*0x1ba6+0xd5d]-_0x3f160c[0x23bf*-0x1+-0x9eb+0x2dab][-0x783*-0x5+0xa83*0x3+-0x4517])]:_0x10199a=_0x3f160c[_0x3e2e65-(0xda1*0x1+-0x1f37+0xed*0x13)],_0x3e2e65===_0x3f160c['length']-(0x2f5*-0xb+-0x1bed+0x3c76)?_0x186d65=[_0x3f160c[_0x3e2e65+(-0xca5+0x1ce5*-0x1+0x1*0x298b)][0x2b*0xde+0x26*-0x95+-0xf2c]+(_0x3f160c[_0x3e2e65+(0x8*-0x295+0x9*0x9b+0xf36)][-0x584*-0x7+-0x1319*0x2+-0x6a]-_0x3f160c[_0x3e2e65][-0x5*0x521+-0xb88+0x252d]),_0x3f160c[_0x3e2e65+(0x133*-0x1+-0x2*-0x9cf+0x126a*-0x1)][0x2454+0x10*0x104+0x2b*-0x139]+(_0x3f160c[_0x3e2e65+(-0x1*-0x16e5+-0x26*-0x35+-0x1ec2)][0x3*0x744+0x15*0xba+-0x250d]-_0x3f160c[_0x3e2e65][0x159*0x13+-0x1c*-0xbf+-0x2e7e])]:_0x186d65=_0x3f160c[_0x3e2e65+(0xcb5+0x1a04+-0x1*0x26b7)],this['_curve']['type']===Nm){const _0x264ac2=(-0x85b+-0x1af*-0xe+-0x1*0xf35)*(_0x51b5bd[0x4f*-0x10+0x1*0x64d+-0x1*0x15d]-_0x2f8b06[0x9*-0x379+-0x1*0x1579+0x18d*0x22])/(_0x51b5bd[-0xabb+0x116a+-0x6af]-_0x10199a[0x11*0x1ea+-0x7*0x2f1+0x1*-0xbf3]),_0x4734a7=(-0x1*0x25db+0x18d9+0x31*0x44)*(_0x51b5bd[0xc2*0x19+0x158f*-0x1+0x29d]-_0x2f8b06[-0xd4*0x1c+0x334*0xb+-0xc0c])/(_0x186d65[0x83*0x43+-0xbb3+0x31*-0x76]-_0x2f8b06[-0x265c+0xcb+0x2591]);this['_m0']=this['_curve']['tension']*(isFinite(_0x264ac2)?_0x264ac2:-0x1e74+0x26a5+0x3*-0x2bb)*(_0x51b5bd[-0x1*0x815+-0x11*0x6f+0xf75*0x1]-_0x10199a[-0xd3d+-0x2353+-0x1*-0x3091]),this['_m1']=this['_curve']['tension']*(isFinite(_0x4734a7)?_0x4734a7:0xd*-0x224+-0x6*-0x647+0x9d6*-0x1)*(_0x186d65[0x263d+-0x1841+-0x4a9*0x3]-_0x2f8b06[0x235*-0x5+-0x676*-0x1+0x494]);}else{const _0x12c4e9=(_0x51b5bd[0x1c3b+-0x76*-0x2a+-0x3*0xfdd]-_0x2f8b06[-0x1683+-0xfdf*-0x1+-0x64*-0x11])/(_0x2f8b06[0xd8d*-0x1+-0x23+0xdb0]-_0x10199a[0x265b+-0x495*-0x5+-0x1ea2*0x2]),_0x226ec5=(_0x51b5bd[-0x11dd+-0x1f*0x80+0x215d]-_0x2f8b06[-0x106*-0x8+-0x1c87+0x29*0x7f])/(_0x186d65[0x1688+-0x14f4+-0x194]-_0x51b5bd[0x87b*0x2+0x114f*0x1+-0x2245]),_0x3199f5=_0x2f8b06[0x3a5+-0x7*0x255+-0x1*-0xcaf]+(_0x10199a[0x11*0xb3+-0x1423+-0x1*-0x841]-_0x2f8b06[0x1*-0xe+0x47*-0x85+0x1279*0x2])*(isFinite(_0x12c4e9)?_0x12c4e9:-0x1929+0x1db6+-0x1*0x48d),_0x337a14=_0x51b5bd[-0x952+-0x2248+0xb7*0x3d]+(_0x186d65[0xa64+-0x2a*-0x5c+0x1*-0x197b]-_0x51b5bd[0x33+0x720+0x752*-0x1])*(isFinite(_0x226ec5)?_0x226ec5:0xb5*-0x8+-0x1afc+0x20a4),_0x554350=this['_curve']['tension'];this['_m0']=_0x554350*(_0x51b5bd[0xb*-0x2f5+0xc81*-0x2+-0x132e*-0x3]-_0x3199f5),this['_m1']=_0x554350*(_0x337a14-_0x2f8b06[0x8a5+0x20ea*-0x1+-0x1846*-0x1]);}}['_evaluateH'+'ermite'](_0x57ef4e,_0x37ee98,_0x18dd87,_0x1a2bbc,_0x4acacd){const _0x4cf613=_0x4acacd*_0x4acacd,_0x171361=_0x4acacd+_0x4acacd,_0x5aed89=-0x1*0x24b5+0x22d1+0x1*0x1e5-_0x4acacd,_0x3ac710=_0x5aed89*_0x5aed89;return _0x57ef4e*((0x2*0xb1b+0x1597+-0x2bcc+_0x171361)*_0x3ac710)+_0x18dd87*(_0x4acacd*_0x3ac710)+_0x37ee98*(_0x4cf613*(0x9e*0xd+-0x1da8+0x15a5-_0x171361))+_0x1a2bbc*(_0x4cf613*(_0x4acacd-(0x8ef+0x51c+0x705*-0x2)));}}class qs{constructor(_0x1b6efe){h(this,'keys',[]),h(this,'type',tp),h(this,'tension',-0x1cab*-0x1+-0x538*-0x1+-0x21e3+0.5),h(this,'_eval',new ZS(this));if(_0x1b6efe){for(let _0x4ae68d=0x6cb+0xb33*0x2+-0x1d31;_0x4ae68d<_0x1b6efe['length']-(-0x1c18+0x135b*-0x2+0x42cf);_0x4ae68d+=0xc*0x5+0x16f1*-0x1+-0x16b7*-0x1)this['keys']['push']([_0x1b6efe[_0x4ae68d],_0x1b6efe[_0x4ae68d+(0xef0*-0x2+-0x3be*0x8+0x3bd1)]]);}this['sort']();}get['length'](){return this['keys']['length'];}['add'](_0x35110a,_0x472b5e){const _0x97c307=this['keys'],_0x48b327=_0x97c307['length'];let _0x163f52=0x198+0x22c7+-0x245f;for(;_0x163f52<_0x48b327&&!(_0x97c307[_0x163f52][-0xe1f+0x6*0x662+0x80f*-0x3]>_0x35110a);_0x163f52++);const _0x1e2d35=[_0x35110a,_0x472b5e];return this['keys']['splice'](_0x163f52,-0x1b6f+0x5da*-0x1+0x2149,_0x1e2d35),_0x1e2d35;}['get'](_0x20c6d0){return this['keys'][_0x20c6d0];}['sort'](){this['keys']['sort']((_0x580bf0,_0x557edb)=>_0x580bf0[0x1226+-0x1e1d+0xbf7]-_0x557edb[-0x1e87+-0x1afe+0x3985]);}['value'](_0xe6c7fb){return this['_eval']['evaluate'](_0xe6c7fb,!(0x985*0x1+0x2*0x93e+-0x1*0x1c01));}['closest'](_0x59585a){const _0x4f010c=this['keys'],_0x57e9f0=_0x4f010c['length'];let _0x2414bb=0x4c7+0xfc0+-0x33*0x67,_0x14596a=null;for(let _0x23cd28=0x1f3a+-0x65e+-0x18dc;_0x23cd28<_0x57e9f0;_0x23cd28++){const _0x4d150d=Math['abs'](_0x59585a-_0x4f010c[_0x23cd28][0x114d+-0x16cd+-0x20*-0x2c]);if(_0x2414bb>=_0x4d150d)_0x2414bb=_0x4d150d,_0x14596a=_0x4f010c[_0x23cd28];else break;}return _0x14596a;}['clone'](){const _0x19d66a=new this['constructo'+'r']();return _0x19d66a['keys']=this['keys']['map'](_0x5d8fad=>[..._0x5d8fad]),_0x19d66a['type']=this['type'],_0x19d66a['tension']=this['tension'],_0x19d66a;}['quantize'](_0x507a06){_0x507a06=Math['max'](_0x507a06,0x1*0x25a1+-0x1*0xf9b+-0x1604);const _0x1f9db8=new Float32Array(_0x507a06),_0x8a65ad=(-0x1*-0x2205+0x1*0x74c+0xa54*-0x4)/(_0x507a06-(-0x38d*0x7+0x43f*0x1+0x149d));_0x1f9db8[0x1e83+-0x47*0x38+-0xefb]=this['_eval']['evaluate'](-0x1434+0x1*0x86b+0xbc9*0x1,!(0x25d5+0x1134+-0x1*0x3709));for(let _0x59be3a=0x63c+-0x3*0x338+0x1*0x36d;_0x59be3a<_0x507a06;_0x59be3a++)_0x1f9db8[_0x59be3a]=this['_eval']['evaluate'](_0x8a65ad*_0x59be3a);return _0x1f9db8;}['quantizeCl'+'amped'](_0x42a4a2,_0x3c4c76,_0x1d55e4){const _0x4aa6b6=this['quantize'](_0x42a4a2);for(let _0x2b2c0e=0xb*0x92+-0x1*-0x1358+0xccf*-0x2;_0x2b2c0e<_0x4aa6b6['length'];++_0x2b2c0e)_0x4aa6b6[_0x2b2c0e]=Math['min'](_0x1d55e4,Math['max'](_0x3c4c76,_0x4aa6b6[_0x2b2c0e]));return _0x4aa6b6;}}class na{constructor(..._0x563ae8){h(this,'curves',[]),h(this,'_type',tp);if(_0x563ae8['length']>0x1f34+-0x19f9+0x6*-0xdf){for(let _0x4c4268=-0x18b5+0x166e+-0x1*-0x247;_0x4c4268<_0x563ae8['length'];_0x4c4268++)this['curves']['push'](new qs(_0x563ae8[_0x4c4268]));}else{if(_0x563ae8['length']===0xe38*-0x2+-0x1*0x1621+0x3291)this['curves']['push'](new qs());else{const _0x3fe8b6=_0x563ae8[-0x399+-0x298*-0xa+0x7*-0x331];if(typeof _0x3fe8b6=='number'){for(let _0x486a8f=-0x24d5+-0x2*0x5e7+-0x30a3*-0x1;_0x486a8f<_0x3fe8b6;_0x486a8f++)this['curves']['push'](new qs());}else{for(let _0x380cda=-0x2*0x865+-0x1165*-0x1+-0x9b*0x1;_0x380cda<_0x3fe8b6['length'];_0x380cda++)this['curves']['push'](new qs(_0x3fe8b6[_0x380cda]));}}}}get['length'](){return this['curves']['length'];}set['type'](_0x174951){this['_type']=_0x174951;for(let _0x306188=-0x115f+0x24*0x8f+-0x2bd;_0x306188<this['curves']['length'];_0x306188++)this['curves'][_0x306188]['type']=_0x174951;}get['type'](){return this['_type'];}['get'](_0x5b960d){return this['curves'][_0x5b960d];}['value'](_0x960457,_0x55e762=[]){const _0x370786=this['curves']['length'];_0x55e762['length']=_0x370786;for(let _0x56d141=0x1*0x327+0x1cda+0x1*-0x2001;_0x56d141<_0x370786;_0x56d141++)_0x55e762[_0x56d141]=this['curves'][_0x56d141]['value'](_0x960457);return _0x55e762;}['clone'](){const _0xf219fd=new this['constructo'+'r']();_0xf219fd['curves']=[];for(let _0xcc930=-0x25f7+-0x207*-0x13+0x8e*-0x1;_0xcc930<this['curves']['length'];_0xcc930++)_0xf219fd['curves']['push'](this['curves'][_0xcc930]['clone']());return _0xf219fd['_type']=this['_type'],_0xf219fd;}['quantize'](_0xeb82b0){_0xeb82b0=Math['max'](_0xeb82b0,-0x18e5+-0x1a*-0x22+0x1*0x1573);const _0x7c3efc=this['curves']['length'],_0x3022c8=new Float32Array(_0xeb82b0*_0x7c3efc),_0x27e048=(0x1000+-0x1124+0x125*0x1)/(_0xeb82b0-(-0x197*-0xe+0x13b5+-0x29f6));for(let _0x45e415=0x4*-0x434+-0x1343+-0x5*-0x737;_0x45e415<_0x7c3efc;_0x45e415++){const _0x85c05e=new ZS(this['curves'][_0x45e415]);for(let _0x7a9c0a=-0x1*0xeb9+0x1501+-0x8*0xc9;_0x7a9c0a<_0xeb82b0;_0x7a9c0a++)_0x3022c8[_0x7a9c0a*_0x7c3efc+_0x45e415]=_0x85c05e['evaluate'](_0x27e048*_0x7a9c0a);}return _0x3022c8;}['quantizeCl'+'amped'](_0x34d189,_0x3b429c,_0x1f3b3e){const _0x4aba73=this['quantize'](_0x34d189);for(let _0x59b2a4=0x17f3*-0x1+0x4*0x1a2+0x31*0x5b;_0x59b2a4<_0x4aba73['length'];++_0x59b2a4)_0x4aba73[_0x59b2a4]=Math['min'](_0x1f3b3e,Math['max'](_0x3b429c,_0x4aba73[_0x59b2a4]));return _0x4aba73;}}const Hf=new Float32Array(-0x26bb+0xd36+0x1986),km=new Int32Array(Hf['buffer']);class Mn{static['float2Half'](_0x422f1c){Hf[-0x3*-0xb61+0xb7a+-0x2d9d]=_0x422f1c;const _0x493988=km[-0x111*-0x1+0xc7e+0xd*-0x10b];let _0x1c5524=_0x493988>>-0xa36+0x3e9+0xb5*0x9&0xe311+-0x7cdd+-0x2*-0xce6,_0x460dca=_0x493988>>0x31*-0xbf+-0xde2+0x327d&0x5*-0x4c3+-0x5*-0x1d8+-0x33a*-0x7;const _0x2deaa6=_0x493988>>-0xa6d*0x1+-0xf15+0x1999&0x18b6+0x6e*-0x35+-0xf1;return _0x2deaa6<0x321+-0x4cd*-0x1+-0x2f*0x29?_0x1c5524:_0x2deaa6>0x11ee+0xfa5+-0x1*0x2105?(_0x1c5524|=0xda1+-0x1*0x6fb5+0xde14,_0x1c5524|=(_0x2deaa6===0x3de+-0xf09+0xc2a?0x1d33+-0x1841+0x1a6*-0x3:-0x106b+-0x221c+0x3288)&&_0x493988&0x4b5*0x1a4c+0xcdf530+-0xc9bced*0x1,_0x1c5524):_0x2deaa6<0x1*-0xb2a+-0xe28+-0x5*-0x527?(_0x460dca|=0x1*0x86e+0x1*0x26c7+-0x1*0x2735,_0x1c5524|=(_0x460dca>>0x1ed*-0x13+-0x225c+0x4765-_0x2deaa6)+(_0x460dca>>0x1552*0x1+0x12*-0x98+-0x1*0xa31-_0x2deaa6&0xeae+0x1231*0x2+-0x330f),_0x1c5524):(_0x1c5524|=_0x2deaa6-(-0x3*-0x434+0x1*-0x18b9+0xc8d)<<0x26bc+0x1*0x331+-0x29e3|_0x460dca>>0x54a+0x102a+-0x1573,_0x1c5524+=_0x460dca&-0x111+0x1*0x1629+-0x1517,_0x1c5524);}static['float2RGBA'+'8'](_0xb365e8,_0x58b30f){Hf[-0x2445+-0x22ad*-0x1+0x198]=_0xb365e8;const _0x23cac1=km[0x268d*-0x1+0x23f*-0x5+0x31c8];_0x58b30f['r']=(_0x23cac1>>0x42d*0x1+0xbf5+-0x100a&0xc8f+0x2cf+-0xe5f)/(0x17ed+0x38d*-0xb+0x1021),_0x58b30f['g']=(_0x23cac1>>0x667*0x4+0x1*-0x414+-0x1578&-0x2703+-0x1*-0x727+0x20db)/(0x329*0xa+0xbf5+-0x4*0xaa4),_0x58b30f['b']=(_0x23cac1>>-0x1*0x4b2+0x9b5+0x1a9*-0x3&-0x1b20+-0x1427+-0x2*-0x1823)/(0x1b77+-0x2335+-0x1*-0x8bd),_0x58b30f['a']=(_0x23cac1&0x3d+0x29+0x3*0x33)/(0x24d4+0x1*-0x548+0x1*-0x1e8d);}}const wt=class wt{constructor(_0x3ee23e=-0x236b*0x1+-0x1da1+0x16a*0x2e,_0x748aac=0x675*0x2+0x6e1*-0x1+-0x203*0x3,_0x5992d0=-0x7a5+-0x1e47+0x25ec){h(this,'x'),h(this,'y'),h(this,'z'),_0x3ee23e['length']===-0x2227+0x24e*0x6+0x1456?(this['x']=_0x3ee23e[0x1*0x11b7+-0xadb+0x6dc*-0x1],this['y']=_0x3ee23e[-0x2422+-0xa*-0x3b9+-0x117],this['z']=_0x3ee23e[0x939*-0x4+-0x867+-0x2d4d*-0x1]):(this['x']=_0x3ee23e,this['y']=_0x748aac,this['z']=_0x5992d0);}['add'](_0x51d6fb){return this['x']+=_0x51d6fb['x'],this['y']+=_0x51d6fb['y'],this['z']+=_0x51d6fb['z'],this;}['add2'](_0x283bd7,_0x912da1){return this['x']=_0x283bd7['x']+_0x912da1['x'],this['y']=_0x283bd7['y']+_0x912da1['y'],this['z']=_0x283bd7['z']+_0x912da1['z'],this;}['addScalar'](_0x999a3c){return this['x']+=_0x999a3c,this['y']+=_0x999a3c,this['z']+=_0x999a3c,this;}['addScaled'](_0x6ae1d0,_0x5ceb29){return this['x']+=_0x6ae1d0['x']*_0x5ceb29,this['y']+=_0x6ae1d0['y']*_0x5ceb29,this['z']+=_0x6ae1d0['z']*_0x5ceb29,this;}['clone'](){const _0x3a1791=this['constructo'+'r'];return new _0x3a1791(this['x'],this['y'],this['z']);}['copy'](_0xf25d78){return this['x']=_0xf25d78['x'],this['y']=_0xf25d78['y'],this['z']=_0xf25d78['z'],this;}['cross'](_0xc316a8,_0x195cbd){const _0x470eee=_0xc316a8['x'],_0x2e3a7a=_0xc316a8['y'],_0x21511f=_0xc316a8['z'],_0x296d33=_0x195cbd['x'],_0x144df2=_0x195cbd['y'],_0x292e61=_0x195cbd['z'];return this['x']=_0x2e3a7a*_0x292e61-_0x144df2*_0x21511f,this['y']=_0x21511f*_0x296d33-_0x292e61*_0x470eee,this['z']=_0x470eee*_0x144df2-_0x296d33*_0x2e3a7a,this;}['distance'](_0x323e46){const _0x5dc21a=this['x']-_0x323e46['x'],_0x536f0f=this['y']-_0x323e46['y'],_0x3d24a6=this['z']-_0x323e46['z'];return Math['sqrt'](_0x5dc21a*_0x5dc21a+_0x536f0f*_0x536f0f+_0x3d24a6*_0x3d24a6);}['div'](_0x2e9850){return this['x']/=_0x2e9850['x'],this['y']/=_0x2e9850['y'],this['z']/=_0x2e9850['z'],this;}['div2'](_0x2b5160,_0x2da5ea){return this['x']=_0x2b5160['x']/_0x2da5ea['x'],this['y']=_0x2b5160['y']/_0x2da5ea['y'],this['z']=_0x2b5160['z']/_0x2da5ea['z'],this;}['divScalar'](_0x4b0fd7){return this['x']/=_0x4b0fd7,this['y']/=_0x4b0fd7,this['z']/=_0x4b0fd7,this;}['dot'](_0x45e888){return this['x']*_0x45e888['x']+this['y']*_0x45e888['y']+this['z']*_0x45e888['z'];}['equals'](_0x4e83d1){return this['x']===_0x4e83d1['x']&&this['y']===_0x4e83d1['y']&&this['z']===_0x4e83d1['z'];}['equalsAppr'+'ox'](_0x50637b,_0x2b3c95=0x1*-0x56b+0x4ee+0x7d+0.000001){return Math['abs'](this['x']-_0x50637b['x'])<_0x2b3c95&&Math['abs'](this['y']-_0x50637b['y'])<_0x2b3c95&&Math['abs'](this['z']-_0x50637b['z'])<_0x2b3c95;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z'];}['lerp'](_0x13279f,_0x4e590a,_0x6eb751){return this['x']=_0x13279f['x']+_0x6eb751*(_0x4e590a['x']-_0x13279f['x']),this['y']=_0x13279f['y']+_0x6eb751*(_0x4e590a['y']-_0x13279f['y']),this['z']=_0x13279f['z']+_0x6eb751*(_0x4e590a['z']-_0x13279f['z']),this;}['mul'](_0x117512){return this['x']*=_0x117512['x'],this['y']*=_0x117512['y'],this['z']*=_0x117512['z'],this;}['mul2'](_0xe7d5ac,_0x19e1ed){return this['x']=_0xe7d5ac['x']*_0x19e1ed['x'],this['y']=_0xe7d5ac['y']*_0x19e1ed['y'],this['z']=_0xe7d5ac['z']*_0x19e1ed['z'],this;}['mulScalar'](_0x32ef8b){return this['x']*=_0x32ef8b,this['y']*=_0x32ef8b,this['z']*=_0x32ef8b,this;}['normalize'](_0xd399bc=this){const _0x2be1a3=_0xd399bc['x']*_0xd399bc['x']+_0xd399bc['y']*_0xd399bc['y']+_0xd399bc['z']*_0xd399bc['z'];if(_0x2be1a3>0xdeb*-0x2+0x208*-0x4+0x23f6){const _0x512784=(0x2475+0x1d7d+-0x41f1)/Math['sqrt'](_0x2be1a3);this['x']=_0xd399bc['x']*_0x512784,this['y']=_0xd399bc['y']*_0x512784,this['z']=_0xd399bc['z']*_0x512784;}return this;}['floor'](_0x380420=this){return this['x']=Math['floor'](_0x380420['x']),this['y']=Math['floor'](_0x380420['y']),this['z']=Math['floor'](_0x380420['z']),this;}['ceil'](_0xdb5211=this){return this['x']=Math['ceil'](_0xdb5211['x']),this['y']=Math['ceil'](_0xdb5211['y']),this['z']=Math['ceil'](_0xdb5211['z']),this;}['round'](_0x50f205=this){return this['x']=Math['round'](_0x50f205['x']),this['y']=Math['round'](_0x50f205['y']),this['z']=Math['round'](_0x50f205['z']),this;}['min'](_0x470f4a){return _0x470f4a['x']<this['x']&&(this['x']=_0x470f4a['x']),_0x470f4a['y']<this['y']&&(this['y']=_0x470f4a['y']),_0x470f4a['z']<this['z']&&(this['z']=_0x470f4a['z']),this;}['max'](_0x5cab22){return _0x5cab22['x']>this['x']&&(this['x']=_0x5cab22['x']),_0x5cab22['y']>this['y']&&(this['y']=_0x5cab22['y']),_0x5cab22['z']>this['z']&&(this['z']=_0x5cab22['z']),this;}['project'](_0x1e0b41){const _0x3da1d2=this['x']*_0x1e0b41['x']+this['y']*_0x1e0b41['y']+this['z']*_0x1e0b41['z'],_0x1fceed=_0x1e0b41['x']*_0x1e0b41['x']+_0x1e0b41['y']*_0x1e0b41['y']+_0x1e0b41['z']*_0x1e0b41['z'],_0x1854d3=_0x3da1d2/_0x1fceed;return this['x']=_0x1e0b41['x']*_0x1854d3,this['y']=_0x1e0b41['y']*_0x1854d3,this['z']=_0x1e0b41['z']*_0x1854d3,this;}['set'](_0x548084,_0x1d0320,_0x2d1f65){return this['x']=_0x548084,this['y']=_0x1d0320,this['z']=_0x2d1f65,this;}['sub'](_0x322078){return this['x']-=_0x322078['x'],this['y']-=_0x322078['y'],this['z']-=_0x322078['z'],this;}['sub2'](_0x3c49ee,_0x47460b){return this['x']=_0x3c49ee['x']-_0x47460b['x'],this['y']=_0x3c49ee['y']-_0x47460b['y'],this['z']=_0x3c49ee['z']-_0x47460b['z'],this;}['subScalar'](_0x385959){return this['x']-=_0x385959,this['y']-=_0x385959,this['z']-=_0x385959,this;}['fromArray'](_0x393a0b,_0x1fb60b=-0x16e6+0x1597+0x14f){return this['x']=_0x393a0b[_0x1fb60b]??this['x'],this['y']=_0x393a0b[_0x1fb60b+(0x480+-0x13*0x1e2+-0x9d*-0x33)]??this['y'],this['z']=_0x393a0b[_0x1fb60b+(-0x1d23+-0x7*-0x115+0x1592)]??this['z'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+']';}['toArray'](_0x52f48a=[],_0x51a9f0=-0xad1+0x7*0x89+0x712){return _0x52f48a[_0x51a9f0]=this['x'],_0x52f48a[_0x51a9f0+(-0x13fe+0x76*-0xf+0x1ae9)]=this['y'],_0x52f48a[_0x51a9f0+(-0x20a4+0xf50*-0x2+-0xe*-0x485)]=this['z'],_0x52f48a;}};h(wt,'ZERO',Object['freeze'](new wt(-0x2530+-0x2185+0x46b5,0x216d+-0x81*-0x1b+-0x2f08,0x33*-0x21+-0x2573+0x2c06))),h(wt,'HALF',Object['freeze'](new wt(0x410+0x1ab*-0xe+0x134a+0.5,0x5*-0x5f5+-0x17ce+0x3597+0.5,-0x1d*-0x77+0x1*-0xb19+-0x262+0.5))),h(wt,'ONE',Object['freeze'](new wt(-0x25+-0x762+0x788,-0x277*0x7+0x13b4+-0x272,0x6d+-0xb*-0x259+-0x1a3f))),h(wt,'UP',Object['freeze'](new wt(0x1b4c+-0x653+-0x1*0x14f9,0x1*0xdd+0x1dac+-0x1e88,-0x16cf*0x1+-0x706+0x1dd5))),h(wt,'DOWN',Object['freeze'](new wt(0x1*0x1da2+-0x2172+0x3d0,-(0xd56+-0x6f5*0x2+0x95*0x1),0x7*0x563+-0x2f*0x53+-0x1678))),h(wt,'RIGHT',Object['freeze'](new wt(-0x1*0x2563+-0x1b34+-0x1588*-0x3,-0xda+-0x9d3*0x1+0x3*0x38f,0x1834+0xe35+-0x2669))),h(wt,'LEFT',Object['freeze'](new wt(-(-0x378*-0xb+0x20e4+-0x470b),-0x5e*-0x67+0x17ed*-0x1+-0x1*0xde5,-0x1e9d+-0x767*0x3+-0x2*-0x1a69))),h(wt,'FORWARD',Object['freeze'](new wt(-0x21b5*-0x1+0x1dea+0x10b*-0x3d,0x12*-0x1ac+-0x56e*-0x6+-0x27c,-(0x14c1+-0x159b*0x1+0xdb*0x1)))),h(wt,'BACK',Object['freeze'](new wt(0x7a4+0x2*-0x296+-0x4*0x9e,-0x301*0x1+0xd0f*-0x2+0x23*0xd5,-0x1cfa+0x228c+-0x591)));let D=wt;const gn=class gn{constructor(){h(this,'data',new Float32Array(0x678*-0x6+-0xc64+-0x333d*-0x1)),this['data'][-0x7ad+-0xe0f*-0x1+-0x662]=this['data'][0x1*-0x159b+0x22*0x106+-0xd2d]=this['data'][-0xb14+0x1a3f+-0x1f*0x7d]=-0x177b*-0x1+0x1*0xb9d+-0xd*0x2b3;}['clone'](){const _0x1537ed=this['constructo'+'r'];return new _0x1537ed()['copy'](this);}['copy'](_0x17b633){const _0x324e2d=_0x17b633['data'],_0x40c1f7=this['data'];return _0x40c1f7[0x1*0x1204+0xdfd*-0x1+0x407*-0x1]=_0x324e2d[0xbce+0x76c+-0x17*0xd6],_0x40c1f7[0x9*-0x397+-0x307+0x2357]=_0x324e2d[0x1ce1*0x1+-0x24ba+0x7da],_0x40c1f7[-0x1*-0x14cc+0x2285+0x374f*-0x1]=_0x324e2d[-0x1*0x523+0x85a+-0x335],_0x40c1f7[0x3d*0x34+0x1c19+-0x287a]=_0x324e2d[0x125d+0x1154+0x23ae*-0x1],_0x40c1f7[0x26f1+0x27*0x17+0x1537*-0x2]=_0x324e2d[-0xbce+-0xbd6+0x17a8],_0x40c1f7[0x27c+0x1*0x223e+0x24b5*-0x1]=_0x324e2d[0x5b8+-0x1b1d+0x156a],_0x40c1f7[-0x58*-0x3+-0x5ea+0x4e8]=_0x324e2d[0x1e45+0x1ea6+0x83*-0x77],_0x40c1f7[0xd6a+-0x24a6+-0x7c1*-0x3]=_0x324e2d[0x1f71+-0x1373+-0x1*0xbf7],_0x40c1f7[0x1f*-0x4d+0x10c2+-0x17b*0x5]=_0x324e2d[0x18*0x151+0x1*0xcdf+-0x659*0x7],this;}['set'](_0x35cd82){const _0x237c8d=this['data'];return _0x237c8d[0x1a59*0x1+0x54f*0x6+-0x3a33]=_0x35cd82[0x24f2+-0x1845+-0xcad],_0x237c8d[0x1eb*0xd+0xdda+0x2*-0x1364]=_0x35cd82[-0x13*-0xef+-0x317+-0xea5],_0x237c8d[-0x248+0x634+-0x3*0x14e]=_0x35cd82[0x125e*0x1+-0x3d2+-0xe8a],_0x237c8d[-0x2b*0x53+0x2c1*-0x1+0x10b5]=_0x35cd82[0x2361+-0x13b6+0x18*-0xa7],_0x237c8d[0x212d+-0x24aa+0x381*0x1]=_0x35cd82[0xa9c+0xde6*0x2+0x7*-0x57c],_0x237c8d[-0x1*0x5fb+-0x5db*-0x6+0xe91*-0x2]=_0x35cd82[0x15bd+-0x1be*-0x6+-0x202c],_0x237c8d[0x1*0x1fb3+0x2357+0x4304*-0x1]=_0x35cd82[0x2068+0x1*0x11e7+-0x7*0x72f],_0x237c8d[0xe24+0x2643*-0x1+0x2*0xc13]=_0x35cd82[-0x25ca+-0x1685+0x3c56],_0x237c8d[0xf45+-0x1362+0x425]=_0x35cd82[-0x1b9f*-0x1+-0x1*-0xac5+-0x265c],this;}['getX'](_0x475632=new D()){return _0x475632['set'](this['data'][-0x1f*0xda+0x209d+-0x637],this['data'][0x1727+-0x6cd*0x1+0xf*-0x117],this['data'][-0x1ab*0x9+0x898+0x66d]);}['getY'](_0x2a46db=new D()){return _0x2a46db['set'](this['data'][-0x1d1*-0x12+0x1de6*-0x1+0x1f*-0x17],this['data'][-0x4a*0x15+0x758+-0x142],this['data'][-0x2f3*0x2+0x167c+-0x1091]);}['getZ'](_0x12c0d0=new D()){return _0x12c0d0['set'](this['data'][0x1339+-0x2*0x3f2+-0xb4f],this['data'][0x1c16+-0x2431+0x1*0x822],this['data'][-0x31+-0x1ed4+-0x1f0d*-0x1]);}['equals'](_0x5e59cd){const _0x1a2890=this['data'],_0xdf37be=_0x5e59cd['data'];return _0x1a2890[-0x1*0x2055+0x216*0x12+0x5*-0x10b]===_0xdf37be[-0x189e+-0x219f+0x11*0x36d]&&_0x1a2890[0x1b8a+-0xc0b+-0xf7e]===_0xdf37be[-0x122*0x2+-0x13b8+0x15fd]&&_0x1a2890[0x9c3+0x25*0x43+0x1370*-0x1]===_0xdf37be[0xbe0+-0x958*0x3+0x815*0x2]&&_0x1a2890[0x1770+0x16e3+-0x2e50]===_0xdf37be[0x1d59+0xce4*0x2+-0x371e]&&_0x1a2890[-0x4c*-0x4d+-0x12f6+-0x3e2]===_0xdf37be[0x4ab*0x8+0x2*-0x6c4+-0xbe6*0x2]&&_0x1a2890[-0x5*0x779+-0x12cf+0x3831]===_0xdf37be[-0x1*0xde1+-0x75+0xe5b]&&_0x1a2890[-0x2*0x1366+-0x583*0x1+0x2c55]===_0xdf37be[-0xcee*0x1+-0x38d*0xb+0x3403]&&_0x1a2890[-0x1dc2+0x1421+0x9a8]===_0xdf37be[-0x1f7*0x13+-0xba2+0x30fe]&&_0x1a2890[-0x5e6+0x113b+-0xb4d]===_0xdf37be[-0x1c63+0x6e7+-0x144*-0x11];}['isIdentity'](){const _0x70c36=this['data'];return _0x70c36[-0x18+0x6*0x41b+-0x188a]===0x25f*-0x7+0x2614+0x2*-0xabd&&_0x70c36[0x200d+-0x6*-0xa4+-0x23e4]===0xa77+0x6*0x4b9+0x1*-0x26cd&&_0x70c36[0x19a4*0x1+-0x115+-0x188d]===-0x1*-0x127d+-0x47*-0x36+-0x2177&&_0x70c36[-0x6ea+0xb*-0x1be+0x1a17]===0x284+0x2b6*-0x2+-0xc*-0x3e&&_0x70c36[0x1ec8+0x121a+-0x30de]===0x1c09+-0x22f3+0x6eb*0x1&&_0x70c36[0x2127+0x1e4d+0x3*-0x1525]===0xe71+0x1331*0x1+-0x21a2&&_0x70c36[0x1f35+0x9*-0x1ca+0x27*-0x63]===-0x8c9+-0x1e20*-0x1+-0x1557&&_0x70c36[-0x800+-0x2f8*-0xd+0x1e91*-0x1]===-0x1daa+-0x428*0x9+-0x22*-0x1f9&&_0x70c36[-0x2068+0x4c*0x5e+-0x3a*-0x14]===0x51a*0x1+-0x5cb*0x6+0x1da9;}['setIdentit'+'y'](){const _0x1cc8b4=this['data'];return _0x1cc8b4[-0x516+0x2*0x42b+0xd0*-0x4]=0x3a*0x3f+0xa48+-0x188d,_0x1cc8b4[-0x24ec+-0x745*0x5+-0x53*-0xe2]=0x15*-0xae+-0x25*-0x32+0x70c,_0x1cc8b4[-0x5*-0x335+-0xcdd+-0xa*0x51]=0xfc5+0xc*-0x264+-0xceb*-0x1,_0x1cc8b4[0x2*-0x637+-0x22c5+-0x2*-0x179b]=0xcad*0x3+0x1337*0x1+0x393e*-0x1,_0x1cc8b4[-0x547*-0x1+0x6*0x182+-0x3*0x4c5]=-0x2*-0xd12+0x1385+-0xf38*0x3,_0x1cc8b4[-0x1145+-0x3*-0x8ea+-0x974]=-0x1066+0x1*-0x1256+0x22bc,_0x1cc8b4[-0x39*0x2f+-0x1cf5+0x2772]=0x112*-0xb+-0x628+0x11ee,_0x1cc8b4[0x759+-0x13eb+0xc99]=0xe3b*-0x1+-0x2627+0x3462,_0x1cc8b4[0x6*0x2d1+-0x1*-0x1afb+-0x19*0x1c1]=0x1*0x897+0x5*0x419+-0x1d13,this;}['toString'](){return'['+this['data']['join'](',\x20')+']';}['transpose'](_0x52541b=this){const _0x1b03a1=_0x52541b['data'],_0x24348d=this['data'];if(_0x1b03a1===_0x24348d){let _0x9a1f60;_0x9a1f60=_0x1b03a1[0x92*-0x7+0xc67+-0x868],_0x24348d[0x26cc+-0x2489+-0x242]=_0x1b03a1[-0x1*-0x196b+-0x2526+-0xa7*-0x12],_0x24348d[0x1a4c+0x47d*-0x8+0x99f]=_0x9a1f60,_0x9a1f60=_0x1b03a1[-0x1016+0x1fd+-0x9d*-0x17],_0x24348d[-0x1*0x20dc+0x47*0x31+0xf*0x149]=_0x1b03a1[-0x1a97+0x9d*0xa+-0x2ed*-0x7],_0x24348d[-0x608*0x2+0xd48*-0x2+0x26a6]=_0x9a1f60,_0x9a1f60=_0x1b03a1[0x1bc4+-0x1942+-0x27d],_0x24348d[0x5*0x9c+0x22*0xc3+-0x1ced]=_0x1b03a1[0x2041+0x1*-0x22c7+0x28d],_0x24348d[-0x2445+-0xb85+0x2fd1]=_0x9a1f60;}else _0x24348d[0x5*-0x18d+-0x1319*-0x1+-0xb58]=_0x1b03a1[-0xa*-0x5+-0x886+-0x4*-0x215],_0x24348d[-0xc7*0xa+0x315*0xc+-0x1d35]=_0x1b03a1[-0x230b*-0x1+0x4f0*-0x4+0x3d2*-0x4],_0x24348d[-0x14c4+0x796+0xd30]=_0x1b03a1[0x852+-0x449+-0x403],_0x24348d[-0x1d21*0x1+-0x104f+0xd*0x37f]=_0x1b03a1[0x2*0xee1+-0x8fe+-0x14c3],_0x24348d[-0x6*0x11f+0x1d19+-0x3b*0x61]=_0x1b03a1[0x1ce*-0x4+0x3*-0x456+0x143e],_0x24348d[-0x54c+0x2*0x680+-0x7af]=_0x1b03a1[-0x148*0x8+-0x95d+0x13a4],_0x24348d[0x4*-0x315+0x2*0xb3e+-0xa22]=_0x1b03a1[0x2050+0x19c6+-0x15*0x2c4],_0x24348d[-0x1d11+-0x18b*-0x6+0x13d6]=_0x1b03a1[0xcf4+-0x76*-0x26+-0x1e73],_0x24348d[0x1*-0x10a5+-0x2027*0x1+0x30d4]=_0x1b03a1[-0x2ce+-0x1*-0xd4b+0x1*-0xa75];return this;}['setFromMat'+'4'](_0x1fdd5b){const _0x19e599=_0x1fdd5b['data'],_0x7aab11=this['data'];return _0x7aab11[0xc5e+-0x3*-0x895+-0x261d]=_0x19e599[0x3*-0xbd2+-0x76*0x1f+-0x31c0*-0x1],_0x7aab11[-0x1db7+0x14b3+-0x1*-0x905]=_0x19e599[-0x1c2d+0x1026+0xc08],_0x7aab11[-0x5*-0x3ce+-0xe08+-0x2c*0x1d]=_0x19e599[-0xbb7+-0x151b+0x20d4],_0x7aab11[0x89b*-0x2+0x811+0x928]=_0x19e599[-0x137d+0x9*-0x32d+0x3016],_0x7aab11[-0x70*-0x6+0x179*0x13+-0x1*0x1e97]=_0x19e599[0x1*-0x1ca9+0x1*0x2333+-0x1*0x685],_0x7aab11[-0x43+0x119*0x16+-0x17de]=_0x19e599[0x1dbe+0x1fec+-0x3da4],_0x7aab11[-0x1*0x1da5+-0x3*0xd+-0x2b6*-0xb]=_0x19e599[-0x1d28+-0x1079*0x1+0x2da9],_0x7aab11[0x25c6+-0x1c83+-0x93c]=_0x19e599[-0x368*0x3+0x1*-0x1acf+-0x8*-0x4a2],_0x7aab11[-0x1*0x1a64+-0x1c*-0x62+-0x43*-0x3c]=_0x19e599[-0x1*0x34d+-0x1a02+0x1d59],this;}['setFromQua'+'t'](_0x4a10ab){const _0x238ab2=_0x4a10ab['x'],_0x4f8ab0=_0x4a10ab['y'],_0x5cf56d=_0x4a10ab['z'],_0x365849=_0x4a10ab['w'],_0x1a558e=_0x238ab2+_0x238ab2,_0x1f68e2=_0x4f8ab0+_0x4f8ab0,_0x1aee78=_0x5cf56d+_0x5cf56d,_0x389689=_0x238ab2*_0x1a558e,_0x2f200a=_0x238ab2*_0x1f68e2,_0xdd5da7=_0x238ab2*_0x1aee78,_0x20bba3=_0x4f8ab0*_0x1f68e2,_0x4ee230=_0x4f8ab0*_0x1aee78,_0x322ac7=_0x5cf56d*_0x1aee78,_0x4c1ffa=_0x365849*_0x1a558e,_0x31bce3=_0x365849*_0x1f68e2,_0x2a67cf=_0x365849*_0x1aee78,_0x30af1a=this['data'];return _0x30af1a[0x1766+-0x1*0x254+-0xba*0x1d]=0xa3*0x25+-0xf0e+-0x880-(_0x20bba3+_0x322ac7),_0x30af1a[-0x90d+-0x55*0x40+0x1e4e]=_0x2f200a+_0x2a67cf,_0x30af1a[0x3c5*-0x8+-0x5ae*-0x4+0x772]=_0xdd5da7-_0x31bce3,_0x30af1a[-0xd*0x24e+0x12a5+0xb54]=_0x2f200a-_0x2a67cf,_0x30af1a[-0x38*0x1c+-0x1b2d+0x2151]=0x9e9*-0x2+-0x1124+0x24f7-(_0x389689+_0x322ac7),_0x30af1a[-0x7e8+-0x3*-0x806+-0x1*0x1025]=_0x4ee230+_0x4c1ffa,_0x30af1a[-0x7*0x17+0x26*-0x51+0xcad]=_0xdd5da7+_0x31bce3,_0x30af1a[0x1bcf+0x1e6f+-0x1*0x3a37]=_0x4ee230-_0x4c1ffa,_0x30af1a[-0x21be+-0x3c*-0x2c+0x111*0x16]=0x34*-0x76+-0xf0d*0x2+-0x3613*-0x1-(_0x389689+_0x20bba3),this;}['invertMat4'](_0x235c69){const _0x17d281=_0x235c69['data'],_0x576ddc=_0x17d281[-0x1647+-0x1867*0x1+0x956*0x5],_0x34fb27=_0x17d281[0x3*-0x7ef+-0x28d+0x1*0x1a5b],_0x5381ef=_0x17d281[0x6ce*0x5+0x479+0xa7*-0x3b],_0x194d38=_0x17d281[-0x12dd+-0xef9+0x21da],_0x1e35ac=_0x17d281[-0x1a34+-0xc4*0x29+0x399d],_0x2fe29f=_0x17d281[-0x25fb+-0x55*0x73+-0x2618*-0x2],_0x1af629=_0x17d281[0x14b2+-0x1f7*-0x10+-0x341a],_0x5569f6=_0x17d281[-0x8e1*-0x1+-0x55*0x11+-0x333],_0x240470=_0x17d281[-0x2688+-0x22ce+0x92c*0x8],_0x5dba32=_0x240470*_0x1e35ac-_0x2fe29f*_0x5569f6,_0x446a7c=-_0x240470*_0x34fb27+_0x5381ef*_0x5569f6,_0x5a2761=_0x2fe29f*_0x34fb27-_0x5381ef*_0x1e35ac,_0x38339b=-_0x240470*_0x194d38+_0x2fe29f*_0x1af629,_0x470fc6=_0x240470*_0x576ddc-_0x5381ef*_0x1af629,_0x5b6d01=-_0x2fe29f*_0x576ddc+_0x5381ef*_0x194d38,_0x1b2b5d=_0x5569f6*_0x194d38-_0x1e35ac*_0x1af629,_0x50988f=-_0x5569f6*_0x576ddc+_0x34fb27*_0x1af629,_0x4d2536=_0x1e35ac*_0x576ddc-_0x34fb27*_0x194d38,_0x59ebd0=_0x576ddc*_0x5dba32+_0x34fb27*_0x38339b+_0x5381ef*_0x1b2b5d;if(_0x59ebd0===-0x1*-0x21b9+0x2*0x6b+0x1*-0x228f)this['setIdentit'+'y']();else{const _0x5bd6db=(-0x12cf+-0xe14+-0x2*-0x1072)/_0x59ebd0,_0xdac669=this['data'];_0xdac669[-0x563*-0x3+-0x1dc+-0xe4d]=_0x5dba32*_0x5bd6db,_0xdac669[-0x22c6+0x1c9*-0x8+-0x1*-0x310f]=_0x446a7c*_0x5bd6db,_0xdac669[-0x22e9+0x20cb+0x20*0x11]=_0x5a2761*_0x5bd6db,_0xdac669[-0x2*0x1102+-0x1*0x20a2+-0x5*-0xd55]=_0x38339b*_0x5bd6db,_0xdac669[0x129a+0x991+0x1*-0x1c27]=_0x470fc6*_0x5bd6db,_0xdac669[0x1500+-0x1087*0x1+-0x474]=_0x5b6d01*_0x5bd6db,_0xdac669[-0x2*0x941+0x1*-0x845+0x1acd*0x1]=_0x1b2b5d*_0x5bd6db,_0xdac669[0x17d3+-0x2205+-0x1*-0xa39]=_0x50988f*_0x5bd6db,_0xdac669[-0xe42+0x11d6+-0x38c]=_0x4d2536*_0x5bd6db;}return this;}['transformV'+'ector'](_0x2f5654,_0x4803e5=new D()){const _0x50d2b3=this['data'],{x:_0x142c85,y:_0x532229,z:_0x3b1b8e}=_0x2f5654;return _0x4803e5['x']=_0x142c85*_0x50d2b3[-0x1c43+-0x2*-0xc84+0x33b]+_0x532229*_0x50d2b3[-0x26fd+-0x1*0x11f+0x1*0x281f]+_0x3b1b8e*_0x50d2b3[0x1793+-0x937+-0xe56],_0x4803e5['y']=_0x142c85*_0x50d2b3[0x1904+0x692+0x21*-0xf5]+_0x532229*_0x50d2b3[0x1942+-0x1ae3+0x1a5]+_0x3b1b8e*_0x50d2b3[0x23d*-0x9+-0x1f*-0x104+-0x2*0x5a8],_0x4803e5['z']=_0x142c85*_0x50d2b3[-0x9d2*-0x3+0x1a97+-0x380b*0x1]+_0x532229*_0x50d2b3[-0x2*-0x1219+0x2409+-0x4836]+_0x3b1b8e*_0x50d2b3[0xb78+0x22fd+0x5*-0x949],_0x4803e5;}};h(gn,'IDENTITY',Object['freeze'](new gn())),h(gn,'ZERO',Object['freeze'](new gn()['set']([0x74c+-0x146b+0x1*0xd1f,0x1*0x2611+-0x19c9+-0xc48,-0x1*-0x1d7d+0x2587+-0x2*0x2182,-0x43*-0x49+-0x17a3+0xa*0x74,0x1fdf+0x12d6*-0x1+-0xd09*0x1,0x110f*0x2+0x964+-0x2b82,0x1*-0x1874+0xf98+0xa2*0xe,0x15ae+0x7*0x4bd+0x36d9*-0x1,0xf3c+0x1379+0x5*-0x6f1])));let _i=gn;const Gt=class Gt{constructor(_0xafa51f=-0x213e+-0x6a0+-0x2*-0x13ef,_0x279517=0x16*-0x11d+-0x32*-0x61+0x58c){h(this,'x'),h(this,'y'),_0xafa51f['length']===0x5*-0x155+0x3*0x327+-0x1*0x2ca?(this['x']=_0xafa51f[-0x203d+-0x1*-0x1ae+-0x1*-0x1e8f],this['y']=_0xafa51f[0x832+-0x345*-0x9+-0x259e]):(this['x']=_0xafa51f,this['y']=_0x279517);}['add'](_0x5091ac){return this['x']+=_0x5091ac['x'],this['y']+=_0x5091ac['y'],this;}['add2'](_0xf83ddf,_0x14a17b){return this['x']=_0xf83ddf['x']+_0x14a17b['x'],this['y']=_0xf83ddf['y']+_0x14a17b['y'],this;}['addScalar'](_0x10ffb8){return this['x']+=_0x10ffb8,this['y']+=_0x10ffb8,this;}['addScaled'](_0x57c482,_0x3b6e63){return this['x']+=_0x57c482['x']*_0x3b6e63,this['y']+=_0x57c482['y']*_0x3b6e63,this;}['clone'](){const _0x2a4def=this['constructo'+'r'];return new _0x2a4def(this['x'],this['y']);}['copy'](_0x47da7f){return this['x']=_0x47da7f['x'],this['y']=_0x47da7f['y'],this;}['cross'](_0x38eb0f){return this['x']*_0x38eb0f['y']-this['y']*_0x38eb0f['x'];}['distance'](_0x56e2bb){const _0x3659c1=this['x']-_0x56e2bb['x'],_0x41084d=this['y']-_0x56e2bb['y'];return Math['sqrt'](_0x3659c1*_0x3659c1+_0x41084d*_0x41084d);}['div'](_0x2b240b){return this['x']/=_0x2b240b['x'],this['y']/=_0x2b240b['y'],this;}['div2'](_0xe8a183,_0x4940cb){return this['x']=_0xe8a183['x']/_0x4940cb['x'],this['y']=_0xe8a183['y']/_0x4940cb['y'],this;}['divScalar'](_0x46e1b5){return this['x']/=_0x46e1b5,this['y']/=_0x46e1b5,this;}['dot'](_0x48d87d){return this['x']*_0x48d87d['x']+this['y']*_0x48d87d['y'];}['equals'](_0x5776a1){return this['x']===_0x5776a1['x']&&this['y']===_0x5776a1['y'];}['equalsAppr'+'ox'](_0x1bf600,_0x23d138=0x1411+0x4f5*-0x3+-0x532+0.000001){return Math['abs'](this['x']-_0x1bf600['x'])<_0x23d138&&Math['abs'](this['y']-_0x1bf600['y'])<_0x23d138;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y'];}['lerp'](_0x4a7b52,_0x3ceb84,_0x2c2e1a){return this['x']=_0x4a7b52['x']+_0x2c2e1a*(_0x3ceb84['x']-_0x4a7b52['x']),this['y']=_0x4a7b52['y']+_0x2c2e1a*(_0x3ceb84['y']-_0x4a7b52['y']),this;}['mul'](_0x38d13d){return this['x']*=_0x38d13d['x'],this['y']*=_0x38d13d['y'],this;}['mul2'](_0x5b16c1,_0x39ff63){return this['x']=_0x5b16c1['x']*_0x39ff63['x'],this['y']=_0x5b16c1['y']*_0x39ff63['y'],this;}['mulScalar'](_0x51652b){return this['x']*=_0x51652b,this['y']*=_0x51652b,this;}['normalize'](_0x4c115a=this){const _0x3e5232=_0x4c115a['x']*_0x4c115a['x']+_0x4c115a['y']*_0x4c115a['y'];if(_0x3e5232>-0x1f1+-0xbd6+0xdc7){const _0x486717=(-0x36f*-0x3+-0x1ece+0x1482)/Math['sqrt'](_0x3e5232);this['x']=_0x4c115a['x']*_0x486717,this['y']=_0x4c115a['y']*_0x486717;}return this;}['rotate'](_0x2b3a43){const _0x284dff=Math['atan2'](this['x'],this['y'])+_0x2b3a43*Y['DEG_TO_RAD'],_0x1b8e13=Math['sqrt'](this['x']*this['x']+this['y']*this['y']);return this['x']=Math['sin'](_0x284dff)*_0x1b8e13,this['y']=Math['cos'](_0x284dff)*_0x1b8e13,this;}['angle'](){return Math['atan2'](this['x'],this['y'])*Y['RAD_TO_DEG'];}['angleTo'](_0x422e90){return Math['atan2'](this['x']*_0x422e90['y']+this['y']*_0x422e90['x'],this['x']*_0x422e90['x']+this['y']*_0x422e90['y'])*Y['RAD_TO_DEG'];}['floor'](_0x3a2de6=this){return this['x']=Math['floor'](_0x3a2de6['x']),this['y']=Math['floor'](_0x3a2de6['y']),this;}['ceil'](_0x3dc7b7=this){return this['x']=Math['ceil'](_0x3dc7b7['x']),this['y']=Math['ceil'](_0x3dc7b7['y']),this;}['round'](_0x32a396=this){return this['x']=Math['round'](_0x32a396['x']),this['y']=Math['round'](_0x32a396['y']),this;}['min'](_0x4b6a58){return _0x4b6a58['x']<this['x']&&(this['x']=_0x4b6a58['x']),_0x4b6a58['y']<this['y']&&(this['y']=_0x4b6a58['y']),this;}['max'](_0x45b79f){return _0x45b79f['x']>this['x']&&(this['x']=_0x45b79f['x']),_0x45b79f['y']>this['y']&&(this['y']=_0x45b79f['y']),this;}['set'](_0x4c3216,_0x17d264){return this['x']=_0x4c3216,this['y']=_0x17d264,this;}['sub'](_0x29586a){return this['x']-=_0x29586a['x'],this['y']-=_0x29586a['y'],this;}['sub2'](_0x49cb06,_0x35388f){return this['x']=_0x49cb06['x']-_0x35388f['x'],this['y']=_0x49cb06['y']-_0x35388f['y'],this;}['subScalar'](_0xbc6ac8){return this['x']-=_0xbc6ac8,this['y']-=_0xbc6ac8,this;}['fromArray'](_0x95cfcc,_0x1c428d=-0x23e3+0x2409+-0x26){return this['x']=_0x95cfcc[_0x1c428d]??this['x'],this['y']=_0x95cfcc[_0x1c428d+(0x16bb+0x2080+-0x373a)]??this['y'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+']';}['toArray'](_0xbd14c7=[],_0x254e4a=-0x25*0xed+-0x5*0x7ce+0x4947*0x1){return _0xbd14c7[_0x254e4a]=this['x'],_0xbd14c7[_0x254e4a+(0x160f+0x2*-0x33d+-0xf94)]=this['y'],_0xbd14c7;}static['angleRad'](_0x3ea295,_0x5b15c0){return Math['atan2'](_0x3ea295['x']*_0x5b15c0['y']-_0x3ea295['y']*_0x5b15c0['x'],_0x3ea295['x']*_0x5b15c0['x']+_0x3ea295['y']*_0x5b15c0['y']);}};h(Gt,'ZERO',Object['freeze'](new Gt(0x1d35+-0x10b+-0x1c2a,0x459+0x1388+-0x17e1*0x1))),h(Gt,'HALF',Object['freeze'](new Gt(0xda0+-0x1*-0xff2+-0x1d92+0.5,-0xb*-0x233+0xa*-0xfa+0x4cf*-0x3+0.5))),h(Gt,'ONE',Object['freeze'](new Gt(-0x221f+-0x449*-0x6+0x86a,-0xeaa+0x1439*0x1+-0x1da*0x3))),h(Gt,'UP',Object['freeze'](new Gt(0x198a+-0xf8c+-0x4ff*0x2,-0x1f57+0x64*0x8+0xa8*0x2b))),h(Gt,'DOWN',Object['freeze'](new Gt(-0xd5*0x2e+0x270f+0x43*-0x3,-(-0x13fd+-0xbcd+-0xa99*-0x3)))),h(Gt,'RIGHT',Object['freeze'](new Gt(-0x10b8+0xe23+0x296,-0x112b*-0x1+0x1a2d+-0x2b58))),h(Gt,'LEFT',Object['freeze'](new Gt(-(-0xc89+0x2f*0xc1+-0x16e5),0x23ec+0x18db+-0x3cc7)));let J=Gt;const pr=class pr{constructor(_0x1d96f4=0xbd2+0x1a12+-0x25e4,_0x2e24ab=0x9e1+0x1*0x1e71+0x18d*-0x1a,_0x11fc94=-0x696*-0x5+-0xc98+-0x89*0x26,_0x552fa1=-0x9f3+0x2257*-0x1+0x2c4a){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x1d96f4['length']===0x77*-0x26+-0x1*-0xc53+0x1c9*0x3?(this['x']=_0x1d96f4[-0x1263*-0x1+-0x1*0xdbd+0x22*-0x23],this['y']=_0x1d96f4[-0x605+0x16f4+0x10ee*-0x1],this['z']=_0x1d96f4[0x1*-0x24f7+-0x14cb+0x39c4],this['w']=_0x1d96f4[0x1*0x2ed+0x1*-0x1639+-0x134f*-0x1]):(this['x']=_0x1d96f4,this['y']=_0x2e24ab,this['z']=_0x11fc94,this['w']=_0x552fa1);}['add'](_0x1cbbc1){return this['x']+=_0x1cbbc1['x'],this['y']+=_0x1cbbc1['y'],this['z']+=_0x1cbbc1['z'],this['w']+=_0x1cbbc1['w'],this;}['add2'](_0xa96ca6,_0x273b02){return this['x']=_0xa96ca6['x']+_0x273b02['x'],this['y']=_0xa96ca6['y']+_0x273b02['y'],this['z']=_0xa96ca6['z']+_0x273b02['z'],this['w']=_0xa96ca6['w']+_0x273b02['w'],this;}['addScalar'](_0x295caf){return this['x']+=_0x295caf,this['y']+=_0x295caf,this['z']+=_0x295caf,this['w']+=_0x295caf,this;}['addScaled'](_0x31195b,_0x44ea5b){return this['x']+=_0x31195b['x']*_0x44ea5b,this['y']+=_0x31195b['y']*_0x44ea5b,this['z']+=_0x31195b['z']*_0x44ea5b,this['w']+=_0x31195b['w']*_0x44ea5b,this;}['clone'](){const _0x1f00e8=this['constructo'+'r'];return new _0x1f00e8(this['x'],this['y'],this['z'],this['w']);}['copy'](_0x9c4481){return this['x']=_0x9c4481['x'],this['y']=_0x9c4481['y'],this['z']=_0x9c4481['z'],this['w']=_0x9c4481['w'],this;}['div'](_0x1d99b7){return this['x']/=_0x1d99b7['x'],this['y']/=_0x1d99b7['y'],this['z']/=_0x1d99b7['z'],this['w']/=_0x1d99b7['w'],this;}['div2'](_0x2e6041,_0x3ca048){return this['x']=_0x2e6041['x']/_0x3ca048['x'],this['y']=_0x2e6041['y']/_0x3ca048['y'],this['z']=_0x2e6041['z']/_0x3ca048['z'],this['w']=_0x2e6041['w']/_0x3ca048['w'],this;}['divScalar'](_0x5ef44e){return this['x']/=_0x5ef44e,this['y']/=_0x5ef44e,this['z']/=_0x5ef44e,this['w']/=_0x5ef44e,this;}['dot'](_0x1ed388){return this['x']*_0x1ed388['x']+this['y']*_0x1ed388['y']+this['z']*_0x1ed388['z']+this['w']*_0x1ed388['w'];}['equals'](_0x39cee2){return this['x']===_0x39cee2['x']&&this['y']===_0x39cee2['y']&&this['z']===_0x39cee2['z']&&this['w']===_0x39cee2['w'];}['equalsAppr'+'ox'](_0x171dc7,_0x527a78=-0x1*0x16f5+-0xddb+0x24d0+0.000001){return Math['abs'](this['x']-_0x171dc7['x'])<_0x527a78&&Math['abs'](this['y']-_0x171dc7['y'])<_0x527a78&&Math['abs'](this['z']-_0x171dc7['z'])<_0x527a78&&Math['abs'](this['w']-_0x171dc7['w'])<_0x527a78;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x225cad,_0x2f55ba,_0x5e615f){return this['x']=_0x225cad['x']+_0x5e615f*(_0x2f55ba['x']-_0x225cad['x']),this['y']=_0x225cad['y']+_0x5e615f*(_0x2f55ba['y']-_0x225cad['y']),this['z']=_0x225cad['z']+_0x5e615f*(_0x2f55ba['z']-_0x225cad['z']),this['w']=_0x225cad['w']+_0x5e615f*(_0x2f55ba['w']-_0x225cad['w']),this;}['mul'](_0x39bc58){return this['x']*=_0x39bc58['x'],this['y']*=_0x39bc58['y'],this['z']*=_0x39bc58['z'],this['w']*=_0x39bc58['w'],this;}['mul2'](_0x3c075a,_0x5b401e){return this['x']=_0x3c075a['x']*_0x5b401e['x'],this['y']=_0x3c075a['y']*_0x5b401e['y'],this['z']=_0x3c075a['z']*_0x5b401e['z'],this['w']=_0x3c075a['w']*_0x5b401e['w'],this;}['mulScalar'](_0x4cc5ab){return this['x']*=_0x4cc5ab,this['y']*=_0x4cc5ab,this['z']*=_0x4cc5ab,this['w']*=_0x4cc5ab,this;}['normalize'](_0x428a52=this){const _0x2c68a8=_0x428a52['x']*_0x428a52['x']+_0x428a52['y']*_0x428a52['y']+_0x428a52['z']*_0x428a52['z']+_0x428a52['w']*_0x428a52['w'];if(_0x2c68a8>0x2*-0xf7+-0x1d3+0x3c1*0x1){const _0x1a6c88=(-0x1*0x98c+-0x1f7d+-0x1*-0x290a)/Math['sqrt'](_0x2c68a8);this['x']=_0x428a52['x']*_0x1a6c88,this['y']=_0x428a52['y']*_0x1a6c88,this['z']=_0x428a52['z']*_0x1a6c88,this['w']=_0x428a52['w']*_0x1a6c88;}return this;}['floor'](_0x334ad2=this){return this['x']=Math['floor'](_0x334ad2['x']),this['y']=Math['floor'](_0x334ad2['y']),this['z']=Math['floor'](_0x334ad2['z']),this['w']=Math['floor'](_0x334ad2['w']),this;}['ceil'](_0x496b95=this){return this['x']=Math['ceil'](_0x496b95['x']),this['y']=Math['ceil'](_0x496b95['y']),this['z']=Math['ceil'](_0x496b95['z']),this['w']=Math['ceil'](_0x496b95['w']),this;}['round'](_0x421f98=this){return this['x']=Math['round'](_0x421f98['x']),this['y']=Math['round'](_0x421f98['y']),this['z']=Math['round'](_0x421f98['z']),this['w']=Math['round'](_0x421f98['w']),this;}['min'](_0x3cf002){return _0x3cf002['x']<this['x']&&(this['x']=_0x3cf002['x']),_0x3cf002['y']<this['y']&&(this['y']=_0x3cf002['y']),_0x3cf002['z']<this['z']&&(this['z']=_0x3cf002['z']),_0x3cf002['w']<this['w']&&(this['w']=_0x3cf002['w']),this;}['max'](_0x2dddfb){return _0x2dddfb['x']>this['x']&&(this['x']=_0x2dddfb['x']),_0x2dddfb['y']>this['y']&&(this['y']=_0x2dddfb['y']),_0x2dddfb['z']>this['z']&&(this['z']=_0x2dddfb['z']),_0x2dddfb['w']>this['w']&&(this['w']=_0x2dddfb['w']),this;}['set'](_0x40006d,_0xff8850,_0x27ab66,_0x2f9714){return this['x']=_0x40006d,this['y']=_0xff8850,this['z']=_0x27ab66,this['w']=_0x2f9714,this;}['sub'](_0x3340a1){return this['x']-=_0x3340a1['x'],this['y']-=_0x3340a1['y'],this['z']-=_0x3340a1['z'],this['w']-=_0x3340a1['w'],this;}['sub2'](_0x2b4f1d,_0x2a3e3f){return this['x']=_0x2b4f1d['x']-_0x2a3e3f['x'],this['y']=_0x2b4f1d['y']-_0x2a3e3f['y'],this['z']=_0x2b4f1d['z']-_0x2a3e3f['z'],this['w']=_0x2b4f1d['w']-_0x2a3e3f['w'],this;}['subScalar'](_0x5b2f49){return this['x']-=_0x5b2f49,this['y']-=_0x5b2f49,this['z']-=_0x5b2f49,this['w']-=_0x5b2f49,this;}['fromArray'](_0x3537ad,_0xc4fed=-0x26b3+0x1bb*-0x12+0x45d9){return this['x']=_0x3537ad[_0xc4fed]??this['x'],this['y']=_0x3537ad[_0xc4fed+(0x1c0b+0x26b7+-0x42c1)]??this['y'],this['z']=_0x3537ad[_0xc4fed+(0x135b+-0x84a+0xb0f*-0x1)]??this['z'],this['w']=_0x3537ad[_0xc4fed+(0x51a+0x1be*0x1+-0x247*0x3)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x521eb7=[],_0x4f08da=0x659+-0x1b*0x10b+-0x10*-0x15d){return _0x521eb7[_0x4f08da]=this['x'],_0x521eb7[_0x4f08da+(-0x21a8+-0x4*-0xd8+-0x1*-0x1e49)]=this['y'],_0x521eb7[_0x4f08da+(-0x4*0x84+0xbae+-0x99c)]=this['z'],_0x521eb7[_0x4f08da+(-0x2035+0x1*-0x14bc+0x34f4)]=this['w'],_0x521eb7;}};h(pr,'ZERO',Object['freeze'](new pr(-0x4*-0x3ba+0x126b+-0x13*0x1c1,-0x699+-0x7*-0x3c7+-0x13d8,0x426+0xd22*0x2+-0x1e6a,-0x7f7+-0x1*-0x1797+-0xfa0))),h(pr,'HALF',Object['freeze'](new pr(-0x1*0x1ca3+0x1a6*0x10+0x243+0.5,0x1fde+-0x592*-0x2+-0x2b02+0.5,0x2c2*-0x5+0x10f3+-0x329+0.5,-0x7c5+-0x1*-0x16ab+0x2*-0x773+0.5))),h(pr,'ONE',Object['freeze'](new pr(-0x1f6f+-0x60b+0x257b,0x1*-0x1efd+0x1b00+-0x7*-0x92,0x2*0xf71+-0xce2+-0x11ff,0x61f*0x1+-0xc3f+0x621)));let re=pr;const to=new J(),Os=new D(),Js=new D(),ei=new D(),Hl=new D(),Qr=class Qr{constructor(){h(this,'data',new Float32Array(-0x558+0xa58*-0x3+0x2470)),this['data'][0x152e+-0x24f1+0xfc3]=this['data'][0xea2+-0x5*0x347+0x1c6]=this['data'][-0x1642*0x1+-0x1*-0x2513+-0xec7]=this['data'][-0x2*0xf4e+-0x18b7+0x3762]=0x1da2+-0x1fac+-0x20b*-0x1;}static['_getPerspe'+'ctiveHalfS'+'ize'](_0x1347f0,_0x44257b,_0x49e116,_0x53e107,_0x5191eb){_0x5191eb?(_0x1347f0['x']=_0x53e107*Math['tan'](_0x44257b*Math['PI']/(0x115f*0x2+-0x1de*0x5+-0x400*0x6)),_0x1347f0['y']=_0x1347f0['x']/_0x49e116):(_0x1347f0['y']=_0x53e107*Math['tan'](_0x44257b*Math['PI']/(-0xbd5+0x2535+-0x17f8)),_0x1347f0['x']=_0x1347f0['y']*_0x49e116);}['add2'](_0x52d14f,_0x17d980){const _0x39a977=_0x52d14f['data'],_0x5b373e=_0x17d980['data'],_0x3eca3b=this['data'];return _0x3eca3b[-0xe05+0x1*-0x48d+0x1292]=_0x39a977[0x3*0x4ff+-0x217b*0x1+0x20e*0x9]+_0x5b373e[0x2c2*0x8+-0x1*-0xcb0+-0x458*0x8],_0x3eca3b[0x14c4+-0x85f+0x4*-0x319]=_0x39a977[-0x9*-0x25+0x22ff+-0x244b]+_0x5b373e[-0x585+0x13d5+-0xe4f],_0x3eca3b[-0x3+-0x238*0x4+-0x9*-0xfd]=_0x39a977[0x1e5f+-0x111*-0x19+0x2*-0x1c83]+_0x5b373e[-0x1d*-0x20+0x17*0x15+-0x581],_0x3eca3b[0x8a9+-0x9*-0x35e+-0x12*0x22a]=_0x39a977[0x3b3+-0xb*-0x34+-0x5ec]+_0x5b373e[-0xf06*0x2+0x270+0x1b9f],_0x3eca3b[0x24fb+0x202+-0x26f9]=_0x39a977[-0xc9e+0x1423+-0x781]+_0x5b373e[0x93*-0x37+0x2604+0x66b*-0x1],_0x3eca3b[-0x1888+0x1d36+-0x4a9*0x1]=_0x39a977[0x139d+-0x3ec*0x6+0x3f0]+_0x5b373e[-0x4e*-0x11+-0x2*-0xe6b+-0x21ff],_0x3eca3b[-0xf39*-0x1+-0xa69+-0x4ca]=_0x39a977[0x1*0x25c3+-0x46f*0x3+-0x8*0x30e]+_0x5b373e[-0xf03+0x1b*0x1+0xeee],_0x3eca3b[-0x544+-0x26b5+0x2c00]=_0x39a977[0x1*0x1e34+0x64f+0x1*-0x247c]+_0x5b373e[0x17d7*0x1+0x1b*-0xa4+-0xc*0x8b],_0x3eca3b[-0xa7f*0x1+-0x578+-0x5*-0x333]=_0x39a977[0xd1f+0x1*0xfda+0x1*-0x1cf1]+_0x5b373e[-0xaa7+0x16d9*-0x1+0x2*0x10c4],_0x3eca3b[0x130a+0x4c3+-0x17c4]=_0x39a977[0x1*-0x68f+0x815+-0x17d]+_0x5b373e[0xf1*-0x21+-0xa6f*-0x1+0x14ab],_0x3eca3b[-0x165*0x7+0xdec+-0x41f]=_0x39a977[-0xe8f+-0x14bb+0x77*0x4c]+_0x5b373e[-0x1717+0x1*-0x1382+-0x25*-0x127],_0x3eca3b[-0x3d*-0x16+-0x1*-0x4a5+-0x4*0x276]=_0x39a977[0x1098+-0x11b2+0x125]+_0x5b373e[-0x29d*0x9+-0x7ea+-0xa7e*-0x3],_0x3eca3b[0x2489*0x1+-0x19e+-0x22df]=_0x39a977[-0x7db*-0x3+-0x3*-0x249+-0x1e60]+_0x5b373e[0x1db3+0x1*-0x11fb+-0xbac],_0x3eca3b[-0x1*-0x4a1+0xe*-0x66+0x8*0x20]=_0x39a977[-0x8c6+0x1*-0x1aeb+0x23be]+_0x5b373e[0x4e*0x51+-0x18*0x9a+-0xa31*0x1],_0x3eca3b[0x15ec+0x1*-0x1bf+0x11*-0x12f]=_0x39a977[0x1c32+-0x139*-0x6+0xef*-0x26]+_0x5b373e[0x1729+0x58*0x1+0x3*-0x7d1],_0x3eca3b[-0x7a*0x15+-0x562+-0x23*-0x71]=_0x39a977[0xea0+0xb*-0x4+-0xe65]+_0x5b373e[0x4bd+0x1858+-0x1d06],this;}['add'](_0x496908){return this['add2'](this,_0x496908);}['clone'](){const _0x7a624d=this['constructo'+'r'];return new _0x7a624d()['copy'](this);}['copy'](_0x418a4a){const _0x5ae0d2=_0x418a4a['data'],_0xde443a=this['data'];return _0xde443a[-0xab*0xd+-0x1707+-0x9*-0x386]=_0x5ae0d2[-0x229d+0x1*-0xe2c+0x17*0x21f],_0xde443a[0x6e2*-0x3+0xe6+0x185*0xd]=_0x5ae0d2[-0x5*-0x8f+-0x111d+-0x13*-0xc1],_0xde443a[-0xb02*-0x2+-0x1b26+0x524]=_0x5ae0d2[0x9a1+0x4e6+-0xe85],_0xde443a[0xa82+0x235c+0x2ddb*-0x1]=_0x5ae0d2[0x132d+0x12*-0x1cf+0xd64],_0xde443a[0x160d+0x929+-0x2*0xf99]=_0x5ae0d2[-0x23ba+-0x1dd9+-0x243*-0x1d],_0xde443a[-0xae1+0x305*-0x7+-0x3b*-0x8b]=_0x5ae0d2[0x191*0x13+-0x2fd*0xb+0x321],_0xde443a[0xa7*0xf+-0xb*0x26+-0x821]=_0x5ae0d2[0xfb*0x20+-0x7be*0x1+-0x4*0x5e7],_0xde443a[0x37*-0xb+-0xe*-0x258+-0xb1*0x2c]=_0x5ae0d2[0x1*0x1ec2+-0x1fe2+0x127],_0xde443a[0x3*0xc70+0x1a20+-0x3f68]=_0x5ae0d2[-0x7*0x509+0xecc*-0x1+0x3213],_0xde443a[-0x21c5+0x62*0x1+-0x592*-0x6]=_0x5ae0d2[-0x18d8+-0xb48*-0x1+0xd99],_0xde443a[-0x1164+0xc*-0x144+0x32*0xa7]=_0x5ae0d2[-0x2520+0x149c+-0xd*-0x146],_0xde443a[0x43*0x55+-0x9a*0x16+0x1c*-0x52]=_0x5ae0d2[-0x258d+0x4*0x475+0x9e2*0x2],_0xde443a[-0x1*-0x8a2+0x15f3+-0x1*0x1e89]=_0x5ae0d2[0x3cf*-0x1+-0x158f+0x196a],_0xde443a[0xccc+-0x14cd+0x407*0x2]=_0x5ae0d2[-0x10d*0x19+0x19*0xad+0x7f*0x13],_0xde443a[0x1c17*-0x1+0x676*-0x1+0x229b]=_0x5ae0d2[0x358+0x2498+-0x27e2],_0xde443a[-0x41*0xd+0x39*-0x1+0x83*0x7]=_0x5ae0d2[-0x1*-0x13ff+0x21e5+-0x35d5],this;}['equals'](_0xf02028){const _0x10e17e=this['data'],_0x5bb469=_0xf02028['data'];return _0x10e17e[0x2af*0x2+-0x216a+0x1c0c]===_0x5bb469[-0x242a+0x255*-0x1+0x267f]&&_0x10e17e[0x52f+-0xb11+0x5e3]===_0x5bb469[-0xb58+0x28d+-0x466*-0x2]&&_0x10e17e[-0x227f+0x1a35*-0x1+-0x1*-0x3cb6]===_0x5bb469[0x8f5+0x188f+-0x1*0x2182]&&_0x10e17e[0x182*-0x14+-0x2*0xa5b+0x32e1]===_0x5bb469[-0xda9+-0xadf+-0x1*-0x188b]&&_0x10e17e[0x6d*0x3b+-0x19de+0xd*0xf]===_0x5bb469[-0x2599+0x22db*0x1+-0x2c2*-0x1]&&_0x10e17e[0x1*0x1b50+0x2151+0x1434*-0x3]===_0x5bb469[-0x105*0x1f+-0x19b2+0x3952]&&_0x10e17e[-0x10f4+0xc25*0x1+0x4d5*0x1]===_0x5bb469[-0x16fb+0x14d*-0x13+-0xbee*-0x4]&&_0x10e17e[0x13*-0xe5+0x1*0x1813+0x5*-0x169]===_0x5bb469[-0x9*-0xf6+0xf3d+0xc*-0x1fd]&&_0x10e17e[0x5c*-0x4+-0xdaf*0x1+0xf27]===_0x5bb469[0xc06+-0x2330+0x1732*0x1]&&_0x10e17e[0x1dd3*0x1+-0x1*0x8df+-0x77*0x2d]===_0x5bb469[-0x1c3+-0x4*-0x481+-0x1038]&&_0x10e17e[-0x4*-0xec+-0x208d+0x1ce7]===_0x5bb469[0xe46+0xa8f+-0x18cb]&&_0x10e17e[0x7c9+0x13*-0x51+-0x1bb]===_0x5bb469[0x26d8+-0x1d92+-0x11*0x8b]&&_0x10e17e[-0x1d5b+-0x3*-0xa2f+0x3*-0x62]===_0x5bb469[0x39d+0x1fa*-0x6+0x84b]&&_0x10e17e[0x1fcc+0x1170+-0x312f]===_0x5bb469[0x19d9+-0x126*0x6+-0x974*0x2]&&_0x10e17e[-0x569+-0x180d+-0x2*-0xec2]===_0x5bb469[-0x9f*-0xb+0x55d*0x1+-0xc24]&&_0x10e17e[-0xe8+0x5f*-0x67+0x2730]===_0x5bb469[0x1*-0x6f7+-0xbd*-0xe+-0x2*0x1a8];}['isIdentity'](){const _0x13ad94=this['data'];return _0x13ad94[-0xd80+0x9*-0x2bd+0x9b*0x3f]===0x1bab*0x1+-0x1bd1+-0x27*-0x1&&_0x13ad94[-0xcc1+0x2*0x86e+0x1e*-0x23]===0x153f*-0x1+-0x88*-0x3c+-0xaa1&&_0x13ad94[0x1ac8+0x425*-0x9+0xa87]===0x84f+0x1065+0x18b4*-0x1&&_0x13ad94[-0x1cf+-0xf42+0x445*0x4]===0x328*0xb+0x994*-0x2+-0xf90&&_0x13ad94[0x14e5+-0x865+-0xc7c]===-0x40e+0x1*0x1979+-0x156b&&_0x13ad94[0x216f+0xd1e+-0x2e88]===0x4f*-0x9+-0x1edc+0x21a4&&_0x13ad94[0x18ee*-0x1+-0x16ae+-0xb6*-0x43]===0xb09+-0x8a3*0x1+-0x266*0x1&&_0x13ad94[0x1d*-0x135+-0x137d*0x2+0x2*0x2501]===-0x3c*-0x92+0x1cab+0x1*-0x3ee3&&_0x13ad94[-0x1*0x19b3+-0x86b+-0x8d*-0x3e]===-0x421+0x2560+0x3*-0xb15&&_0x13ad94[-0xd*-0x275+-0x1386*-0x2+-0x46f4]===0x1*-0x224d+0x15*-0x142+0x3cb7&&_0x13ad94[0x1*-0xa36+0x13be+-0x97e]===0x2632*-0x1+0x1*0x2e0+0x1*0x2353&&_0x13ad94[0x56b+-0x42a*0x7+0x17c6]===0x2426+-0x1*0x24df+-0x1*-0xb9&&_0x13ad94[0x462+-0x1de9*-0x1+0xb*-0x31d]===-0x1c85+-0x7eb*-0x4+0x327*-0x1&&_0x13ad94[-0xb1+0x7d2+-0x714]===0x448+0x1f7d+-0x23c5&&_0x13ad94[0x1*0x1414+0x19f5+-0x2dfb*0x1]===0xd*0x26b+0x585*-0x5+0x2*-0x1eb&&_0x13ad94[0x6*0x1ca+0x1d50+-0x27fd]===-0xe76*0x2+0x1f82+0x1*-0x295;}['mul2'](_0x36df34,_0x26197f){const _0x109194=_0x36df34['data'],_0x32f860=_0x26197f['data'],_0x5dc915=this['data'],_0x298377=_0x109194[0x1a5*-0x13+-0x56c+0x1bf*0x15],_0x2a7834=_0x109194[0x1*-0x10e1+0x1069+0x79],_0x5014a8=_0x109194[-0x1f6c+0x117d+-0x53*-0x2b],_0x5a8739=_0x109194[-0x3b2+-0x1673+0x1a28],_0x44b80c=_0x109194[-0x160a+-0xbdd*-0x2+-0xd6*0x2],_0x1c6349=_0x109194[0x15fd*-0x1+0xe83+0x77f],_0x53a784=_0x109194[0x1*-0xdc9+-0x1e3e+0x2c0d],_0x33b1c2=_0x109194[-0x19a5+0x1*-0xa76+0x2422],_0x556bb0=_0x109194[0xb45*-0x3+0x14f8+0x5*0x293],_0x136c34=_0x109194[-0x267a+-0xa*0x355+0x47d5],_0x58e95d=_0x109194[-0x24d*0x2+0x3*0x445+-0x82b],_0xf2ec63=_0x109194[0x7c*0x4+0x1a2e*0x1+-0x1c13*0x1],_0x11c83e=_0x109194[-0x185f+-0x1492*-0x1+0x3d9],_0x1edf10=_0x109194[0x2424+0x1990+-0x3da7],_0x3fce11=_0x109194[0x9dd*-0x1+-0x47*0x56+0x4d3*0x7],_0x17ac0e=_0x109194[-0x1350+-0x1bf8+-0x1*-0x2f57];let _0x330646,_0x4db30b,_0x1dc3c9,_0x2a1e34;return _0x330646=_0x32f860[0x147*-0xf+-0x112d+0x2456],_0x4db30b=_0x32f860[0xea2+-0x1*0xc79+-0x228],_0x1dc3c9=_0x32f860[0x1c5b+-0x2b9+-0x19a0],_0x2a1e34=_0x32f860[0x1753+-0x21e4+0xa94],_0x5dc915[-0xd13+-0x117*-0x10+-0x45d]=_0x298377*_0x330646+_0x44b80c*_0x4db30b+_0x556bb0*_0x1dc3c9+_0x11c83e*_0x2a1e34,_0x5dc915[0x9b*0x3e+-0x250f+-0x7a]=_0x2a7834*_0x330646+_0x1c6349*_0x4db30b+_0x136c34*_0x1dc3c9+_0x1edf10*_0x2a1e34,_0x5dc915[0x16f+0x1*0x10c9+-0x1236]=_0x5014a8*_0x330646+_0x53a784*_0x4db30b+_0x58e95d*_0x1dc3c9+_0x3fce11*_0x2a1e34,_0x5dc915[0x534+0x153d*-0x1+0x4*0x403]=_0x5a8739*_0x330646+_0x33b1c2*_0x4db30b+_0xf2ec63*_0x1dc3c9+_0x17ac0e*_0x2a1e34,_0x330646=_0x32f860[-0x19ff+-0x6dd*0x1+0x8*0x41c],_0x4db30b=_0x32f860[0x109*-0x5+0x148b+-0xf59],_0x1dc3c9=_0x32f860[-0x232e+-0x3f1+-0x38f*-0xb],_0x2a1e34=_0x32f860[-0x238*0x3+-0x26f1+0x2da0],_0x5dc915[0x25d3*-0x1+0xe73*0x1+0x4*0x5d9]=_0x298377*_0x330646+_0x44b80c*_0x4db30b+_0x556bb0*_0x1dc3c9+_0x11c83e*_0x2a1e34,_0x5dc915[-0x2f*0x52+0x1d*0x47+0xe1*0x8]=_0x2a7834*_0x330646+_0x1c6349*_0x4db30b+_0x136c34*_0x1dc3c9+_0x1edf10*_0x2a1e34,_0x5dc915[-0x1e95+0xfd7*-0x1+0x2e72]=_0x5014a8*_0x330646+_0x53a784*_0x4db30b+_0x58e95d*_0x1dc3c9+_0x3fce11*_0x2a1e34,_0x5dc915[0x268e+-0x1*-0x1069+0x928*-0x6]=_0x5a8739*_0x330646+_0x33b1c2*_0x4db30b+_0xf2ec63*_0x1dc3c9+_0x17ac0e*_0x2a1e34,_0x330646=_0x32f860[0x1a*-0xbc+-0x2172*0x1+0x3492],_0x4db30b=_0x32f860[0x1bf5*-0x1+-0x4*0x3c2+0x2*0x1583],_0x1dc3c9=_0x32f860[-0x13a1*0x1+0xa7b*-0x1+-0x1*-0x1e26],_0x2a1e34=_0x32f860[-0xd5f+-0x139e+0x2108],_0x5dc915[-0x304+-0x37d*-0x8+-0x18dc*0x1]=_0x298377*_0x330646+_0x44b80c*_0x4db30b+_0x556bb0*_0x1dc3c9+_0x11c83e*_0x2a1e34,_0x5dc915[0x88*0x46+-0xa8b+-0x1a9c]=_0x2a7834*_0x330646+_0x1c6349*_0x4db30b+_0x136c34*_0x1dc3c9+_0x1edf10*_0x2a1e34,_0x5dc915[0x7*-0xb2+0x16e*0x17+-0xdfd*0x2]=_0x5014a8*_0x330646+_0x53a784*_0x4db30b+_0x58e95d*_0x1dc3c9+_0x3fce11*_0x2a1e34,_0x5dc915[0x1*-0x1e40+-0xb*0x283+0x39ec]=_0x5a8739*_0x330646+_0x33b1c2*_0x4db30b+_0xf2ec63*_0x1dc3c9+_0x17ac0e*_0x2a1e34,_0x330646=_0x32f860[0x1910+0x1*0xb15+0x1*-0x2419],_0x4db30b=_0x32f860[-0x1*-0xd15+-0x1fb8+0x17*0xd0],_0x1dc3c9=_0x32f860[-0x2506+-0x832*0x1+0x2d46],_0x2a1e34=_0x32f860[-0x19fd*-0x1+0xd0+-0x475*0x6],_0x5dc915[0x13aa+0x2359+-0x1*0x36f7]=_0x298377*_0x330646+_0x44b80c*_0x4db30b+_0x556bb0*_0x1dc3c9+_0x11c83e*_0x2a1e34,_0x5dc915[-0x82c*0x1+0xf*-0x233+0x1a6*0x19]=_0x2a7834*_0x330646+_0x1c6349*_0x4db30b+_0x136c34*_0x1dc3c9+_0x1edf10*_0x2a1e34,_0x5dc915[-0xb34+-0x14*-0x152+0x793*-0x2]=_0x5014a8*_0x330646+_0x53a784*_0x4db30b+_0x58e95d*_0x1dc3c9+_0x3fce11*_0x2a1e34,_0x5dc915[-0x1da4+0x1*0xcaf+-0x12*-0xf2]=_0x5a8739*_0x330646+_0x33b1c2*_0x4db30b+_0xf2ec63*_0x1dc3c9+_0x17ac0e*_0x2a1e34,this;}['mulAffine2'](_0x1ad15c,_0x45f62a){const _0x5a8f83=_0x1ad15c['data'],_0x434c9c=_0x45f62a['data'],_0x2a5613=this['data'],_0x4d3200=_0x5a8f83[0xa7b+0x1266+-0x1ce1],_0x11d075=_0x5a8f83[0x1*0x1b65+0xd*-0x74+-0x1580],_0x55093d=_0x5a8f83[0x337*-0x9+0x6*-0x25b+0x2b13*0x1],_0x313822=_0x5a8f83[0x50*-0x74+0x93a+-0x1*-0x1b0a],_0x18778f=_0x5a8f83[-0x1*-0x129f+0x12b6+-0x31c*0xc],_0x322896=_0x5a8f83[0x9d1*-0x1+0x190c*-0x1+0xe5*0x27],_0x2a3718=_0x5a8f83[0x5ba*0x1+-0x17aa+-0x17*-0xc8],_0x48de4a=_0x5a8f83[0x3*0x683+-0xa22+-0x95e],_0x3ee76f=_0x5a8f83[0x4f*0x58+-0x1d48*-0x1+0x1*-0x3866],_0x23a124=_0x5a8f83[0x1589+0x267b+-0x194*0x26],_0x38a154=_0x5a8f83[-0xc*0x1f0+0x1f91+-0x844],_0x5da824=_0x5a8f83[-0x107e+0xc85+-0x1*-0x407];let _0x862dc2,_0x24551d,_0x21edac;return _0x862dc2=_0x434c9c[-0x1247+-0x170*0xe+-0xccd*-0x3],_0x24551d=_0x434c9c[0x93*0x27+0x432*-0x2+0xe*-0x100],_0x21edac=_0x434c9c[0x1643+-0x14ab+0xe*-0x1d],_0x2a5613[0x989+-0xd96+0x11*0x3d]=_0x4d3200*_0x862dc2+_0x313822*_0x24551d+_0x2a3718*_0x21edac,_0x2a5613[-0x1*0x26d7+-0x10e+0x27e6]=_0x11d075*_0x862dc2+_0x18778f*_0x24551d+_0x48de4a*_0x21edac,_0x2a5613[-0x2*0xcf1+-0x1*-0x1f93+-0x5af]=_0x55093d*_0x862dc2+_0x322896*_0x24551d+_0x3ee76f*_0x21edac,_0x2a5613[-0x32f*-0x5+-0x1b8e+-0x6*-0x1f1]=-0x1a98+-0xfd5*0x2+0x1d21*0x2,_0x862dc2=_0x434c9c[-0x203a+-0x49*-0x44+-0x1d6*-0x7],_0x24551d=_0x434c9c[0xb3b+-0x1e0b+0x12d5],_0x21edac=_0x434c9c[0x1b84*-0x1+0x65b*-0x1+0x1*0x21e5],_0x2a5613[-0x89f*-0x1+-0x9*0x44a+-0x1*-0x1dff]=_0x4d3200*_0x862dc2+_0x313822*_0x24551d+_0x2a3718*_0x21edac,_0x2a5613[0x15*0x18d+0x2190+-0x421c]=_0x11d075*_0x862dc2+_0x18778f*_0x24551d+_0x48de4a*_0x21edac,_0x2a5613[0x20b0+0x2247+0x42f1*-0x1]=_0x55093d*_0x862dc2+_0x322896*_0x24551d+_0x3ee76f*_0x21edac,_0x2a5613[0xac4+-0x2007+0x154a]=0x527+-0x2126*-0x1+-0x264d,_0x862dc2=_0x434c9c[0x4a0*-0x8+0xb*0x1f1+0xfad],_0x24551d=_0x434c9c[-0x5*-0x3a9+0x1*0x25ab+-0x37ef],_0x21edac=_0x434c9c[0x1f27+0x1019+-0x1*0x2f36],_0x2a5613[0x2068+-0x5b9*-0x3+-0x318b]=_0x4d3200*_0x862dc2+_0x313822*_0x24551d+_0x2a3718*_0x21edac,_0x2a5613[0x451+-0x1cbc+-0x139*-0x14]=_0x11d075*_0x862dc2+_0x18778f*_0x24551d+_0x48de4a*_0x21edac,_0x2a5613[-0x1533+-0x1c61+0x319e]=_0x55093d*_0x862dc2+_0x322896*_0x24551d+_0x3ee76f*_0x21edac,_0x2a5613[0x2f*0x65+0x246c+0x4c*-0xb9]=-0x12*-0xd+-0x102d*-0x1+-0x1117,_0x862dc2=_0x434c9c[0x5b3*0x3+0x23*0x5+-0x11bc],_0x24551d=_0x434c9c[0x1413+0x65*0x12+-0x1b20],_0x21edac=_0x434c9c[0x3*-0x85d+-0x2*0x107+-0xd3*-0x21],_0x2a5613[-0xda3+0x464*0x6+-0x1*0xca9]=_0x4d3200*_0x862dc2+_0x313822*_0x24551d+_0x2a3718*_0x21edac+_0x23a124,_0x2a5613[0x20e7+-0x1b*0x161+0x461]=_0x11d075*_0x862dc2+_0x18778f*_0x24551d+_0x48de4a*_0x21edac+_0x38a154,_0x2a5613[-0x1c70+0x936+0x9a4*0x2]=_0x55093d*_0x862dc2+_0x322896*_0x24551d+_0x3ee76f*_0x21edac+_0x5da824,_0x2a5613[-0x53c+-0x1*-0x24a2+0x47*-0x71]=-0x2473+0x1*-0xa03+0x393*0xd,this;}['mul'](_0x454f0b){return this['mul2'](this,_0x454f0b);}['transformP'+'oint'](_0x49ba85,_0x49257b=new D()){const _0x2bf402=this['data'],{x:_0x4f7a2b,y:_0xa0db78,z:_0xf45fec}=_0x49ba85;return _0x49257b['x']=_0x4f7a2b*_0x2bf402[0x1*-0x262e+0x17bd+-0xe71*-0x1]+_0xa0db78*_0x2bf402[-0x1*0x30b+-0x2*0xfda+0x22c3*0x1]+_0xf45fec*_0x2bf402[-0x22fd+0x1*0x116f+0x1196]+_0x2bf402[0x25*-0x4+0x213a+-0x282*0xd],_0x49257b['y']=_0x4f7a2b*_0x2bf402[0x4*0x96b+-0x17f*-0x4+-0x3*0xe8d]+_0xa0db78*_0x2bf402[-0x5b3+0x1*0xaab+0x4f3*-0x1]+_0xf45fec*_0x2bf402[0x2*-0xdca+-0x31*-0xc1+0x3*-0x31c]+_0x2bf402[0x3b7+-0x1785+0x13db],_0x49257b['z']=_0x4f7a2b*_0x2bf402[0xb*-0x256+-0x7f9+-0x25*-0xe9]+_0xa0db78*_0x2bf402[0x20+-0x1f0a+0x1ef0]+_0xf45fec*_0x2bf402[0xa5f+0x6*-0x63c+0xef*0x1d]+_0x2bf402[-0x2*0xd29+-0x23*0x88+-0x167c*-0x2],_0x49257b;}['transformV'+'ector'](_0x5e75af,_0x4fe8fa=new D()){const _0x450362=this['data'],{x:_0x1dd2a5,y:_0x4113ec,z:_0x13975d}=_0x5e75af;return _0x4fe8fa['x']=_0x1dd2a5*_0x450362[0xad*0x35+0x1*-0xe9+-0x22e8]+_0x4113ec*_0x450362[-0x1c1c+0x4a*0x75+-0x5b2]+_0x13975d*_0x450362[-0x2*-0x10cc+0x916+-0x2aa6*0x1],_0x4fe8fa['y']=_0x1dd2a5*_0x450362[-0x23c+0x1f5*-0x5+0xc06]+_0x4113ec*_0x450362[-0x1bc9+0x519+0x1*0x16b5]+_0x13975d*_0x450362[0x65*0x15+-0x22ca+0x2b*0x9e],_0x4fe8fa['z']=_0x1dd2a5*_0x450362[-0x10ff*0x1+0xfb0+-0x1*-0x151]+_0x4113ec*_0x450362[0xae9*0x1+-0xb9*-0xc+-0x138f]+_0x13975d*_0x450362[0xd6f*0x1+-0x1*0x1c21+0xebc],_0x4fe8fa;}['transformV'+'ec4'](_0x43de13,_0x3f8152=new re()){const _0x76a63d=this['data'],{x:_0x519126,y:_0xd76492,z:_0x373b04,w:_0x33ac18}=_0x43de13;return _0x3f8152['x']=_0x519126*_0x76a63d[0x1*0x836+0x2*0xcaf+-0x2194]+_0xd76492*_0x76a63d[-0x24af+0x1383*-0x2+0x4bb9]+_0x373b04*_0x76a63d[0x1*-0xf4a+-0xd13*-0x1+-0x5*-0x73]+_0x33ac18*_0x76a63d[-0x24d2+-0xa*-0x3d2+-0x156],_0x3f8152['y']=_0x519126*_0x76a63d[0xf48+0x92+-0xfd9]+_0xd76492*_0x76a63d[-0x1781*-0x1+-0x4b+-0x1731]+_0x373b04*_0x76a63d[-0xee2+-0x3a*-0x59+-0x11*0x4f]+_0x33ac18*_0x76a63d[0x175*-0x3+0xc02+0x2*-0x3cb],_0x3f8152['z']=_0x519126*_0x76a63d[0xa*-0x2cc+-0x9*0xe8+0x2422]+_0xd76492*_0x76a63d[-0x1c1*-0x16+0x162b+0x7*-0x8ad]+_0x373b04*_0x76a63d[0x35d+0x8cf*-0x2+-0x1*-0xe4b]+_0x33ac18*_0x76a63d[0xb1a+-0xf5a+0x44e],_0x3f8152['w']=_0x519126*_0x76a63d[0x1aa8+0x23f7+-0x3e9c*0x1]+_0xd76492*_0x76a63d[0xa56+-0x57*0x4d+0xfdc]+_0x373b04*_0x76a63d[-0x25a5*-0x1+0x1abf+-0x4059]+_0x33ac18*_0x76a63d[0x21da+-0x9*-0x42c+-0x4757],_0x3f8152;}['setLookAt'](_0x25dcb6,_0x1e5e26,_0x1b1cb3){ei['sub2'](_0x25dcb6,_0x1e5e26)['normalize'](),Js['copy'](_0x1b1cb3)['normalize'](),Os['cross'](Js,ei)['normalize'](),Js['cross'](ei,Os);const _0x203704=this['data'];return _0x203704[0x760*0x5+-0x1ba3+-0xd7*0xb]=Os['x'],_0x203704[-0x10b0+0x2496+-0x1*0x13e5]=Os['y'],_0x203704[-0x1dbf+0x52*0x4+-0x25*-0xc5]=Os['z'],_0x203704[0xcb5+0x1*0x256d+0x3db*-0xd]=0x18f3+0x2*0xe96+0x5*-0xad3,_0x203704[-0x165e+-0x2*-0x5a4+0xb1a]=Js['x'],_0x203704[-0x19e9+0x5c*-0xd+0x1e9a]=Js['y'],_0x203704[0x53a+-0x1340+0xe0c]=Js['z'],_0x203704[-0x1e7b+-0xa*-0x45+0x590*0x5]=0x1109+0x1cd6+-0x1*0x2ddf,_0x203704[-0xc44+0x423*-0x2+0x1492]=ei['x'],_0x203704[-0x5e1*-0x3+0x19*0x1b+-0x143d]=ei['y'],_0x203704[-0x71*0xb+-0x1*-0x20f6+-0x1c11]=ei['z'],_0x203704[0x782+0x5a6*0x1+-0xd1d]=-0x1*0x592+-0x177d*-0x1+0x1*-0x11eb,_0x203704[-0xe5d+-0x9*-0x25b+-0x6ca]=_0x25dcb6['x'],_0x203704[-0x148d+0x9*-0x145+-0x2007*-0x1]=_0x25dcb6['y'],_0x203704[0x8*-0x115+0x24bf*0x1+-0x1*0x1c09]=_0x25dcb6['z'],_0x203704[-0x1eb0+-0x1d4c+0x3c0b]=0x25e*0x1+0xf82*-0x2+-0x2d*-0xa3,this;}['setFrustum'](_0x1a002c,_0x4ba14c,_0x123666,_0x131c63,_0x6fc92e,_0x4c0bc1){const _0x55a17c=(-0x1*-0x155d+0x9*-0x257+-0x13*0x4)*_0x6fc92e,_0x67023e=_0x4ba14c-_0x1a002c,_0x146a3e=_0x131c63-_0x123666,_0x3dc5f4=_0x4c0bc1-_0x6fc92e,_0x50bc23=this['data'];return _0x50bc23[-0x1e97*0x1+-0x6f7*-0x2+0x10a9]=_0x55a17c/_0x67023e,_0x50bc23[-0x9*0x111+-0x1e0a+0x3b*0xac]=-0x79*0x18+0x221d+-0x16c5,_0x50bc23[0x5*-0x3d9+0x95*-0x14+-0x1*-0x1ee3]=0x34c*0x8+-0x1f55*-0x1+0xbb*-0x4f,_0x50bc23[-0x37*-0x3c+-0x10*-0x3e+-0x10c1]=0x3*0x171+0x611+0x532*-0x2,_0x50bc23[-0x1*-0x13ff+0x1dc8+-0x31c3*0x1]=-0x67d+0xfcb+0x2*-0x4a7,_0x50bc23[0x2702*0x1+-0xb00+-0x5*0x599]=_0x55a17c/_0x146a3e,_0x50bc23[0xbb*-0x34+0x1f15+0x6ed]=-0x11e4*-0x1+0xbf*0x7+-0x171d,_0x50bc23[-0x7*-0x17f+-0x17e*-0x8+-0x5*0x47a]=-0x86d*0x1+-0x1921+0x5*0x6b6,_0x50bc23[-0x216*-0xe+-0x50a*0x5+0x3fa*-0x1]=(_0x4ba14c+_0x1a002c)/_0x67023e,_0x50bc23[0x135b+0x87e+-0x2c8*0xa]=(_0x131c63+_0x123666)/_0x146a3e,_0x50bc23[0x997+0x178d*0x1+-0x211a]=(-_0x4c0bc1-_0x6fc92e)/_0x3dc5f4,_0x50bc23[0x10cd+-0x2d2*-0x1+-0x1394]=-(-0x2c*-0x41+-0x26fd+0x1bd2),_0x50bc23[0x1afd+0x1*0x12c9+-0x2dba]=-0x2*-0xb34+0x217a+-0x2*0x1bf1,_0x50bc23[0x206f+-0x1bf7*-0x1+-0x3c59]=-0x2*0x64d+-0xebc+-0x1*-0x1b56,_0x50bc23[-0x1958+0x22e0+0x97a*-0x1]=-_0x55a17c*_0x4c0bc1/_0x3dc5f4,_0x50bc23[-0xf6f+-0x1f8f+-0xf*-0x323]=-0x3e4+-0xfe8+0x13cc,this;}['setPerspec'+'tive'](_0x37c514,_0x1593d2,_0x2c606f,_0x4c0c90,_0x35c5e6){return Qr['_getPerspe'+'ctiveHalfS'+'ize'](to,_0x37c514,_0x1593d2,_0x2c606f,_0x35c5e6),this['setFrustum'](-to['x'],to['x'],-to['y'],to['y'],_0x2c606f,_0x4c0c90);}['setOrtho'](_0x3e3b69,_0x4d3a4c,_0x50c9a1,_0x5b21ce,_0x447b42,_0x5de18c){const _0x5c9ecb=this['data'];return _0x5c9ecb[-0x28c*-0x1+0x18cd+-0x1b59]=(-0x22+-0x2*0xc73+-0xa*-0x281)/(_0x4d3a4c-_0x3e3b69),_0x5c9ecb[-0x22df+0xd9e+0xaa1*0x2]=-0x1*-0x311+0x1930+0x3*-0x96b,_0x5c9ecb[-0x19cc+0x25e2+0x4*-0x305]=0x1b1c+-0x162c+0x2*-0x278,_0x5c9ecb[0x5d1*0x3+-0x457*0x8+0x1148]=0xd5d*0x1+0x258+-0xfb5,_0x5c9ecb[-0x283*0x9+-0x2175+-0x4a*-0xc2]=0x2211+0x1*0x1c03+0x89*-0x74,_0x5c9ecb[-0xda1+-0x2*-0x3fb+0x70*0xd]=(0x231f+-0x1329+0x7fa*-0x2)/(_0x5b21ce-_0x50c9a1),_0x5c9ecb[0xd73+-0x26c5+-0x4*-0x656]=-0x10f*-0x14+0xbb7*0x1+-0x20e3*0x1,_0x5c9ecb[-0x3a6+0xed7*0x2+-0x1a01]=0x1c3e+0xe3e+0xa9f*-0x4,_0x5c9ecb[0x1dd7+-0x185d+-0x52*0x11]=0xe3*0xb+0x1c8c+-0x264d,_0x5c9ecb[-0x149*-0x2+0x347+-0xba*0x8]=0xb88*0x2+-0xc8b+0xa85*-0x1,_0x5c9ecb[-0x2313+-0x689*-0x4+-0x1*-0x8f9]=-(-0xd42+-0xde1+0x1*0x1b25)/(_0x5de18c-_0x447b42),_0x5c9ecb[-0x24cc+-0x24e5+0x49bc]=-0x121b+-0x1af3+-0x49*-0x9e,_0x5c9ecb[-0x9*-0x8b+-0x74d+0x276]=-(_0x4d3a4c+_0x3e3b69)/(_0x4d3a4c-_0x3e3b69),_0x5c9ecb[-0x1844+0x13f9+0x1*0x458]=-(_0x5b21ce+_0x50c9a1)/(_0x5b21ce-_0x50c9a1),_0x5c9ecb[-0x4*-0x6fd+-0x227f+-0x699*-0x1]=-(_0x5de18c+_0x447b42)/(_0x5de18c-_0x447b42),_0x5c9ecb[0xad+0xb1b*0x3+-0x21ef]=-0x12a8+-0x1484+0x272d,this;}['setFromAxi'+'sAngle'](_0x4b1dfa,_0x5bd36f){_0x5bd36f*=Y['DEG_TO_RAD'];const {x:_0x1dbb45,y:_0x5ef0ca,z:_0x2c61e8}=_0x4b1dfa,_0x48ac72=Math['cos'](_0x5bd36f),_0xbf1332=Math['sin'](_0x5bd36f),_0x35619c=-0x24b4+0xd9*0x29+0x5*0x64-_0x48ac72,_0xe8c34c=_0x35619c*_0x1dbb45,_0x2439ef=_0x35619c*_0x5ef0ca,_0x4cdf5f=this['data'];return _0x4cdf5f[-0xe10+-0x26*-0xea+0xe*-0x17a]=_0xe8c34c*_0x1dbb45+_0x48ac72,_0x4cdf5f[-0x1898+-0x2dd*0x5+-0x1375*-0x2]=_0xe8c34c*_0x5ef0ca+_0xbf1332*_0x2c61e8,_0x4cdf5f[0x194c+0x25ab*0x1+-0x3ef5]=_0xe8c34c*_0x2c61e8-_0xbf1332*_0x5ef0ca,_0x4cdf5f[0xf94+0x720+-0x16b1]=-0x89a*-0x3+-0x2f2*-0xb+-0x3a34,_0x4cdf5f[-0x1*0x20a1+0x7*-0x541+-0x456c*-0x1]=_0xe8c34c*_0x5ef0ca-_0xbf1332*_0x2c61e8,_0x4cdf5f[-0x1c9e+-0x1ae8+0x378b*0x1]=_0x2439ef*_0x5ef0ca+_0x48ac72,_0x4cdf5f[-0x2*-0x5d5+0x16d*0x4+0x5c8*-0x3]=_0x2439ef*_0x2c61e8+_0xbf1332*_0x1dbb45,_0x4cdf5f[-0x2462*0x1+-0x1205*0x1+0x2*0x1b37]=-0x602+0x2b6*-0x3+0xe24,_0x4cdf5f[0x1a5+0xae9+-0xc86]=_0xe8c34c*_0x2c61e8+_0xbf1332*_0x5ef0ca,_0x4cdf5f[0x679*0x5+0xc52+-0x2ca6]=_0x2439ef*_0x2c61e8-_0x1dbb45*_0xbf1332,_0x4cdf5f[-0x303+0xfa7+-0x2*0x64d]=_0x35619c*_0x2c61e8*_0x2c61e8+_0x48ac72,_0x4cdf5f[0x39a+0x257e+-0x290d]=-0x1*0x2342+0x560+0xef1*0x2,_0x4cdf5f[-0x421+-0x66e*0x6+0x2ac1]=0x5f+0x5e1+-0x32*0x20,_0x4cdf5f[0xfab+0x13c4+-0x2362]=0x22dc+-0x3*0x2f3+-0x1a03,_0x4cdf5f[-0x966+-0x5*0x6c8+0x2b5c]=-0x6*0x18d+-0x327*0x1+0xc75,_0x4cdf5f[0x1a33+-0xa78+0x7d6*-0x2]=-0x4c3+-0x12e+0x5f2,this;}['setTransla'+'te'](_0x11b2fc,_0x5d75a9,_0x3ebcbc){const _0x55fa6c=this['data'];return _0x55fa6c[-0x13f4+0xd62*0x1+0x692]=-0x5d4+0x1*-0x1bcf+0x4*0x869,_0x55fa6c[0x1a61+-0x666+-0x9fd*0x2]=0x2518+0xa*-0x35+-0x2306*0x1,_0x55fa6c[0x1558+0x168f+-0x2be5]=-0xbf*0x13+0xd00+-0x2b*-0x7,_0x55fa6c[-0x10*0x1d2+-0xc*0x16f+0x2e57]=-0x1a27+0x25*-0x10b+-0x1*-0x40be,_0x55fa6c[-0x198b+0x1*-0xae1+0x2470]=-0x4*-0x504+0x2*-0xfb2+0x5*0x244,_0x55fa6c[-0x1839+-0x26af+0x3eed*0x1]=-0x12e0+-0x189e+0x11*0x28f,_0x55fa6c[0x1*-0x11b7+0x11*0x13d+0x6a*-0x8]=0x15f3+-0x2350+0xd5d,_0x55fa6c[-0xa47*-0x3+-0x3fd+0x1ad1*-0x1]=-0x6*0xe0+0x22d*0x6+-0x7ce,_0x55fa6c[0x2230+-0x1b03+-0x725]=0x16f0+0x1440+-0x2b30,_0x55fa6c[-0x867+-0x1e98+-0x4*-0x9c2]=-0xfaa+-0xc9a+-0x1*-0x1c44,_0x55fa6c[-0x3*0x7cd+-0x1d9a+0x350b]=-0x4*0x7e2+-0x8a5*-0x1+-0x125*-0x14,_0x55fa6c[0x1dc9+-0x4a+-0x2f2*0xa]=0x1901+-0xd63+-0xb9e,_0x55fa6c[-0x105b*0x2+-0xbed+0x1*0x2caf]=_0x11b2fc,_0x55fa6c[-0x2*-0xc74+0x2f2+-0x1bcd]=_0x5d75a9,_0x55fa6c[-0x1b3a+-0xf28+0x2a70]=_0x3ebcbc,_0x55fa6c[-0x3a9*0xa+0xafb*0x1+0x19ae*0x1]=0x4db*0x1+-0x9b1*-0x1+-0x4d9*0x3,this;}['setScale'](_0x534fae,_0x13e092,_0xc39521){const _0x24a0fb=this['data'];return _0x24a0fb[-0x212f*-0x1+-0x13*0x189+-0x404]=_0x534fae,_0x24a0fb[0x127d*-0x1+-0x1e9e+0x311c]=-0x1c*0x14c+-0xad2+-0x1791*-0x2,_0x24a0fb[0xb13+-0x250a+-0x6d*-0x3d]=0x3*-0x113+0x3*0x896+-0x1*0x1689,_0x24a0fb[0x5*-0x78d+0x2f9*-0x7+-0x5*-0xbb7]=-0x141+0x61d+-0x4dc,_0x24a0fb[-0x1780+0xb5a*0x1+-0xc2a*-0x1]=0x28f*-0x3+-0x1*0x2152+0x28ff,_0x24a0fb[-0x1818+-0x871*0x2+0x28ff]=_0x13e092,_0x24a0fb[0x1529+0x2*-0x35+-0x14b9]=0x137f+-0x654*0x3+0x83*-0x1,_0x24a0fb[0x2*0x807+0x1715+-0x1*0x271c]=-0x7c8+-0x265e+0x42*0xb3,_0x24a0fb[0x32*0x47+0x15f0+-0xf1*0x26]=-0x16e4+0x4f*-0x39+0x287b,_0x24a0fb[-0xbb9*-0x3+-0x2591*0x1+0x7*0x59]=0x1616+0xb*0x1f3+0xb*-0x3f5,_0x24a0fb[-0x248d+0x1*0x19dd+-0x1*-0xaba]=_0xc39521,_0x24a0fb[-0xa06+-0x799*0x3+0x20dc]=-0x1d2*-0x11+0x2a9*0xe+-0x10*0x443,_0x24a0fb[-0x71e*0x1+-0x4c*0x35+-0x1*-0x16e6]=0x1288+-0x1230+-0x2c*0x2,_0x24a0fb[-0x87e*0x1+-0x207*-0x4+0x6f]=0x307*-0x7+-0x635*-0x1+0xefc,_0x24a0fb[-0x530+0x6f*0x23+-0x1*0x9ef]=0xa7*0x11+-0x18ee+0x3*0x49d,_0x24a0fb[-0xa*0x184+0x33d*0x5+-0xfa]=-0x822+0x1*0x1ecb+-0x122*0x14,this;}['setViewpor'+'t'](_0x3dfc35,_0x4b4863,_0x2d981b,_0x17eb2c){const _0x30db42=this['data'];return _0x30db42[0x8*-0x209+-0x56*-0x5e+-0x3d3*0x4]=_0x2d981b*(-0x155*0x2+0x44b*0x5+0x12cd*-0x1+0.5),_0x30db42[-0x2230+-0x2481+0x1*0x46b2]=0xeb1+0x10f7+-0x2*0xfd4,_0x30db42[-0xf*-0x5b+-0xf84+0xa31]=-0x1*-0x1051+0x241e+0x346f*-0x1,_0x30db42[-0x18c3*0x1+-0x435*0x1+-0x9a9*-0x3]=-0x1177+0x198b*-0x1+0x2b02*0x1,_0x30db42[-0x70d+-0x1b2a+0x223b]=-0x230+-0x264f*0x1+0x287f,_0x30db42[-0x25d6+0x226d+0x36e*0x1]=_0x17eb2c*(0xebc+-0x119c+0x2e0+0.5),_0x30db42[0x31*-0x13+0x1c12+0x823*-0x3]=-0x1d75+0x16bd+0xa*0xac,_0x30db42[0x557+-0x821+-0x2d1*-0x1]=0x335*0x5+0x1*0x4d6+-0x14df,_0x30db42[0x1ad1+0x4*-0x7f0+0x4f7]=0x74*0x2c+0xeba+-0x22aa,_0x30db42[0x2*-0x254+-0x4e*0x67+0x2413]=-0x791+-0x65*-0x17+-0x182,_0x30db42[0x979+-0x1921+0x7d9*0x2]=-0x96e+-0x3*-0x9f2+-0x1468+0.5,_0x30db42[0x151*0x15+-0x8d5*-0x2+-0x2d44]=-0x1292*-0x1+0x1fe1+-0x3273,_0x30db42[0xf7b+0x2*-0xaaf+0xd9*0x7]=_0x3dfc35+_0x2d981b*(-0x1*0x1929+0x11fc*0x2+-0xacf+0.5),_0x30db42[0x29*0x7+-0x1ef6+0x2*0xef2]=_0x4b4863+_0x17eb2c*(0x20c0+-0x1b1*0xd+0xac3*-0x1+0.5),_0x30db42[0xf*-0x16d+-0x29*-0x45+0xa64]=0xdb1*-0x1+0x1b2a+-0xd79+0.5,_0x30db42[0x973*0x4+0x1*-0x23eb+0x1d2*-0x1]=0x172a*-0x1+0x4a*-0x61+-0x1*-0x3335,this;}['setReflect'+'ion'](_0x3f005c,_0x27d7ce){const _0x51f852=_0x3f005c['x'],_0x62b902=_0x3f005c['y'],_0x178ad2=_0x3f005c['z'],_0x4d59d5=this['data'];return _0x4d59d5[-0xdfe+-0x10d6+0x4*0x7b5]=-0x7*-0x10f+-0x941*-0x1+-0x10a9-(-0xbaf+0x3*0x9e5+-0x11fe)*_0x51f852*_0x51f852,_0x4d59d5[-0x5*0x175+0x5e0+0x16a]=-(-0x12a3+-0x1143*0x1+0x23e8)*_0x51f852*_0x62b902,_0x4d59d5[0x1c65*-0x1+-0x3a*0x8b+0x3be5]=-(-0x3b9*-0x1+0x187d*0x1+-0x1*0x1c34)*_0x51f852*_0x178ad2,_0x4d59d5[-0xf9*0x20+-0x1508+0x342b]=-0x206e+-0x107e+0x30ec,_0x4d59d5[-0xca8+0x19a*0x10+-0xcf4]=-(0x394*-0x3+0xd*-0x169+0x9b1*0x3)*_0x51f852*_0x62b902,_0x4d59d5[-0x1*0x1182+-0x405+0x158c]=-0x2107+-0x13ec+0x34f4-(-0x4c*0x81+0x2f5+0x2359)*_0x62b902*_0x62b902,_0x4d59d5[0x2*-0x1a+0x603+0x5c9*-0x1]=-(0x134c+0xff8+0x2342*-0x1)*_0x62b902*_0x178ad2,_0x4d59d5[-0x185e+0x1*0x1595+-0x14*-0x24]=-0x33a+-0x3*-0x509+-0xbe1,_0x4d59d5[0x3*-0x11a+0x160a+-0x156*0xe]=-(-0x1d09*0x1+0x2*0x1192+-0x619)*_0x51f852*_0x178ad2,_0x4d59d5[-0x487*0x6+-0xa3d*-0x1+0xa7*0x1a]=-(-0xd25+-0x2f9*0x5+0x1c04)*_0x62b902*_0x178ad2,_0x4d59d5[-0x811+0x7d5+0x46]=0x19a8+0x20a6+-0x3a4d-(0x1073*-0x1+-0x221e+0x3293*0x1)*_0x178ad2*_0x178ad2,_0x4d59d5[0x1*0x116f+-0x26e0+0x157c]=0x10b0+-0x395*-0xa+0x11e*-0x2f,_0x4d59d5[-0x26d0+-0x22b6*-0x1+-0x3*-0x162]=-(-0x1f82+0x15ce*-0x1+0x7*0x79e)*_0x51f852*_0x27d7ce,_0x4d59d5[-0x22a7+0xe76+-0x2*-0xa1f]=-(-0x90b*0x1+0x1d79+-0x146c)*_0x62b902*_0x27d7ce,_0x4d59d5[-0x987+-0x2376*0x1+0x2d0b]=-(-0x1*-0x9af+-0x12fb*0x1+-0x94e*-0x1)*_0x178ad2*_0x27d7ce,_0x4d59d5[0x1af+-0xa64+0x231*0x4]=0x10eb+-0x1da9+0xcbf,this;}['invert'](_0x408fba=this){const _0x54743d=_0x408fba['data'],_0x4b185b=_0x54743d[0x1494+-0x1*-0x19ab+-0x2e3f],_0x3ef7ef=_0x54743d[0x6a*0x23+-0xaf3+-0x38a],_0x19458e=_0x54743d[-0x4e7+0x1b42+-0x1659],_0x3a6310=_0x54743d[0x17e0*0x1+0x1da7+-0x3584],_0x30aef4=_0x54743d[0x1121*0x1+0x104e+0x1*-0x216b],_0x5407c1=_0x54743d[-0x13d7*0x1+0x2383+-0xfa7],_0xb23895=_0x54743d[0xd4*-0x3+-0x4c9*-0x7+0x1*-0x1efd],_0x551aef=_0x54743d[-0x2269+0x1b7f+0x6f1*0x1],_0x5c92dd=_0x54743d[0x1d40+0x1*-0x23d2+-0xa9*-0xa],_0x43b392=_0x54743d[0x1012+-0x2067+0x105e],_0x4320ed=_0x54743d[0xde3+0x7*0x1+-0x30*0x4a],_0x3eedd9=_0x54743d[0xc58+-0x5a3+0x1*-0x6aa],_0x22b242=_0x54743d[0xdbc+0xa*0x10d+0xc19*-0x2],_0x487a8a=_0x54743d[0xc37+0x23a9+0x1*-0x2fd3],_0x555874=_0x54743d[0x7+-0x3*-0x466+-0xd2b],_0x175a11=_0x54743d[0x251c*0x1+0x1*-0x11d2+-0x223*0x9],_0x3ecf8a=_0x4b185b*_0x5407c1-_0x3ef7ef*_0x30aef4,_0x1696be=_0x4b185b*_0xb23895-_0x19458e*_0x30aef4,_0x28dceb=_0x4b185b*_0x551aef-_0x3a6310*_0x30aef4,_0x35e8d4=_0x3ef7ef*_0xb23895-_0x19458e*_0x5407c1,_0xa36ae9=_0x3ef7ef*_0x551aef-_0x3a6310*_0x5407c1,_0x2c4a76=_0x19458e*_0x551aef-_0x3a6310*_0xb23895,_0xa88471=_0x5c92dd*_0x487a8a-_0x43b392*_0x22b242,_0x322299=_0x5c92dd*_0x555874-_0x4320ed*_0x22b242,_0x167d52=_0x5c92dd*_0x175a11-_0x3eedd9*_0x22b242,_0x3c6266=_0x43b392*_0x555874-_0x4320ed*_0x487a8a,_0x597c5c=_0x43b392*_0x175a11-_0x3eedd9*_0x487a8a,_0x3ee387=_0x4320ed*_0x175a11-_0x3eedd9*_0x555874,_0x29d70a=_0x3ecf8a*_0x3ee387-_0x1696be*_0x597c5c+_0x28dceb*_0x3c6266+_0x35e8d4*_0x167d52-_0xa36ae9*_0x322299+_0x2c4a76*_0xa88471;if(_0x29d70a===0x24b*0x1+-0x1792+-0x1a3*-0xd)this['setIdentit'+'y']();else{const _0x308800=(-0x3b*0x17+-0x26b0*0x1+0x1*0x2bfe)/_0x29d70a,_0x57b12a=this['data'];_0x57b12a[-0x214+0x25*-0xd5+0x20dd]=(_0x5407c1*_0x3ee387-_0xb23895*_0x597c5c+_0x551aef*_0x3c6266)*_0x308800,_0x57b12a[-0xb*0x316+-0x17f1+0x39e4]=(-_0x3ef7ef*_0x3ee387+_0x19458e*_0x597c5c-_0x3a6310*_0x3c6266)*_0x308800,_0x57b12a[0x8a5*0x2+-0x4f3+-0xc55]=(_0x487a8a*_0x2c4a76-_0x555874*_0xa36ae9+_0x175a11*_0x35e8d4)*_0x308800,_0x57b12a[-0x6*-0x11f+0x234+-0x8eb]=(-_0x43b392*_0x2c4a76+_0x4320ed*_0xa36ae9-_0x3eedd9*_0x35e8d4)*_0x308800,_0x57b12a[0x1b8d*-0x1+-0x259a+0x412b*0x1]=(-_0x30aef4*_0x3ee387+_0xb23895*_0x167d52-_0x551aef*_0x322299)*_0x308800,_0x57b12a[0x1dbb+0x2*-0x6bb+-0x1040]=(_0x4b185b*_0x3ee387-_0x19458e*_0x167d52+_0x3a6310*_0x322299)*_0x308800,_0x57b12a[0xa09*-0x1+-0x3*-0x36a+0x2f*-0x1]=(-_0x22b242*_0x2c4a76+_0x555874*_0x28dceb-_0x175a11*_0x1696be)*_0x308800,_0x57b12a[-0x1a71*-0x1+-0xd4c+0x2e*-0x49]=(_0x5c92dd*_0x2c4a76-_0x4320ed*_0x28dceb+_0x3eedd9*_0x1696be)*_0x308800,_0x57b12a[-0x1ce+-0x646+0x81c]=(_0x30aef4*_0x597c5c-_0x5407c1*_0x167d52+_0x551aef*_0xa88471)*_0x308800,_0x57b12a[-0x364+0x5a*0x36+-0xf8f]=(-_0x4b185b*_0x597c5c+_0x3ef7ef*_0x167d52-_0x3a6310*_0xa88471)*_0x308800,_0x57b12a[-0xc*0x5d+0x1*0x20ef+-0x1c89]=(_0x22b242*_0xa36ae9-_0x487a8a*_0x28dceb+_0x175a11*_0x3ecf8a)*_0x308800,_0x57b12a[0x382+-0x124b*0x1+-0x92*-0x1a]=(-_0x5c92dd*_0xa36ae9+_0x43b392*_0x28dceb-_0x3eedd9*_0x3ecf8a)*_0x308800,_0x57b12a[-0x220c+0x8f*-0x7+0x2601]=(-_0x30aef4*_0x3c6266+_0x5407c1*_0x322299-_0xb23895*_0xa88471)*_0x308800,_0x57b12a[-0x1671+-0x63c+0x1cba]=(_0x4b185b*_0x3c6266-_0x3ef7ef*_0x322299+_0x19458e*_0xa88471)*_0x308800,_0x57b12a[-0x63f+-0x47a*-0x3+-0x721]=(-_0x22b242*_0x35e8d4+_0x487a8a*_0x1696be-_0x555874*_0x3ecf8a)*_0x308800,_0x57b12a[0x12c4+0x1*0x175+-0x59*0x3a]=(_0x5c92dd*_0x35e8d4-_0x43b392*_0x1696be+_0x4320ed*_0x3ecf8a)*_0x308800;}return this;}['set'](_0x546fa6){const _0x456a4f=this['data'];return _0x456a4f[0x11*-0xa+-0x26c6+-0x10*-0x277]=_0x546fa6[0x1d11*0x1+0x572+0x11d*-0x1f],_0x456a4f[-0x1*-0x21a+-0xa4*0x11+0x8cb]=_0x546fa6[-0x13d7*0x1+-0xc56+-0x3*-0xaba],_0x456a4f[0x7*0x2d4+-0x4*-0x1c+0xa1d*-0x2]=_0x546fa6[-0x2059+0x60*0x30+0xe5b],_0x456a4f[-0x1852+-0x21e6+-0x3a3b*-0x1]=_0x546fa6[0x175*0x1a+-0x1aa1+-0xb3e],_0x456a4f[0x1*0x167b+-0x2174+0xafd]=_0x546fa6[-0xc34+0x2076+0x1*-0x143e],_0x456a4f[-0x8f6+0x94f+0x1c*-0x3]=_0x546fa6[0x7*-0x20b+0x5d0+0x63*0x16],_0x456a4f[-0x59f*-0x5+0xd*0x277+-0x3c20]=_0x546fa6[-0x15de+-0x2532+-0x1*-0x3b16],_0x456a4f[0xe*-0x8d+-0x3*-0xb5c+-0x1a57*0x1]=_0x546fa6[0x5e0+-0x2b*0x87+0x2*0x86a],_0x456a4f[-0x6*0x5fd+0x707*-0x1+-0x47*-0x9b]=_0x546fa6[0x1345+-0x25af+0x1272],_0x456a4f[-0x21c3+-0x89d+0x2a69]=_0x546fa6[-0x12*0xd9+0x1132+-0x1e7],_0x456a4f[-0x10dc+0x1022+-0x1*-0xc4]=_0x546fa6[-0x8d*0xa+-0x1b*-0x107+-0x1631],_0x456a4f[0x2da*-0x2+0x1c53+0x121*-0x14]=_0x546fa6[-0x1*0x43f+0x978+-0x52e],_0x456a4f[0x2d*-0x3f+-0x1571+0x8*0x412]=_0x546fa6[0x683*0x2+-0x1c*0x153+0x181a],_0x456a4f[0x1*0xc69+-0x3*0x4dc+0x238]=_0x546fa6[-0x2571+0x160d*0x1+-0x43*-0x3b],_0x456a4f[-0x1658+0x2093+-0xa2d]=_0x546fa6[-0x5d*0x1c+-0x2*0xe6a+-0x1*-0x270e],_0x456a4f[0xda+0x6*-0x97+-0x2bf*-0x1]=_0x546fa6[0x17a6*-0x1+-0x1*-0x1b56+-0x3a1],this;}['setIdentit'+'y'](){const _0x1345e1=this['data'];return _0x1345e1[-0x1dfe+0x1be*0x3+0x18c4]=-0xcc5*-0x2+-0x8f*-0x1f+0x2*-0x156d,_0x1345e1[-0x1676+0x2*-0xcc4+0x2fff]=-0x181e+0x1ffa*0x1+-0x2*0x3ee,_0x1345e1[-0x1397*-0x1+0x2638+-0x39cd*0x1]=0x163*-0x19+-0x5c*0x28+0x310b,_0x1345e1[-0x11c3+0x213a+-0xf74]=-0x1d*-0x29+-0xce3*-0x2+-0x1e6b,_0x1345e1[0x3*-0x84a+-0x5f7+0x1*0x1ed9]=-0x37d+-0x1*-0x224b+0xf67*-0x2,_0x1345e1[-0x19e5+-0x10b7+-0x617*-0x7]=-0x5*0x1d3+-0x7e0+0x1100,_0x1345e1[0x7a*-0x3a+-0x1d50+0x38fa]=0x1*0x1492+-0x1*0xb3f+-0x953,_0x1345e1[-0x1253*-0x1+0x1728+0x2974*-0x1]=-0x1e99+0x396+0x1b03,_0x1345e1[-0x12b5+-0x943+-0x2*-0xe00]=0x4aa*0x5+-0x814+-0x1*0xf3e,_0x1345e1[-0xaa0+-0x359+0xe02]=0x13d9+0xf4*-0x8+0x3*-0x413,_0x1345e1[-0x96+0x125c+-0xa*0x1c6]=0x14af+-0x212c+0x27*0x52,_0x1345e1[0x8*0x413+0x123e+-0x32cb]=-0x79c+-0xdc6*-0x2+-0x58*0x3a,_0x1345e1[-0x6b5+-0xc8c+-0xb7*-0x1b]=0x8*-0x17c+-0x1dfc+0x3*0xdf4,_0x1345e1[0x1*-0x1395+0x19d0+-0x62e]=0x377*0x5+-0x412+0x75*-0x1d,_0x1345e1[0x814*0x4+0xd4+0x181*-0x16]=-0x118c+0x22d6+0x2*-0x8a5,_0x1345e1[-0x12b*0xd+-0x18ea+0x2828]=0xe46+0x7*-0x3eb+0xd28,this;}['setTRS'](_0x3675db,_0x77bc00,_0x2c20b7){const _0x48648a=_0x77bc00['x'],_0x26623c=_0x77bc00['y'],_0x2e56b5=_0x77bc00['z'],_0x4dbb03=_0x77bc00['w'],_0x5cea8=_0x2c20b7['x'],_0x3cafc6=_0x2c20b7['y'],_0x2cce35=_0x2c20b7['z'],_0x1d1ffb=_0x48648a+_0x48648a,_0x385341=_0x26623c+_0x26623c,_0x36c6f6=_0x2e56b5+_0x2e56b5,_0x300a0d=_0x48648a*_0x1d1ffb,_0x39d280=_0x48648a*_0x385341,_0x4ab11d=_0x48648a*_0x36c6f6,_0x31ffc5=_0x26623c*_0x385341,_0x1ea5f7=_0x26623c*_0x36c6f6,_0xf9cb72=_0x2e56b5*_0x36c6f6,_0x470e7=_0x4dbb03*_0x1d1ffb,_0x11c1f9=_0x4dbb03*_0x385341,_0x45953a=_0x4dbb03*_0x36c6f6,_0x3b9011=this['data'];return _0x3b9011[-0x13*0xfb+0x99*-0x7+0x14*0x124]=(-0x1*-0x1027+-0x4*-0x3a+-0x4a*0x3b-(_0x31ffc5+_0xf9cb72))*_0x5cea8,_0x3b9011[-0x204e+-0x8aa+0x11*0x269]=(_0x39d280+_0x45953a)*_0x5cea8,_0x3b9011[-0x2240+0x1e78+0x3ca]=(_0x4ab11d-_0x11c1f9)*_0x5cea8,_0x3b9011[-0x1878+-0xcd*-0x19+0x476]=-0x11eb+0x29*0xcc+0x1*-0xec1,_0x3b9011[0x809+0x34*0x6d+-0x1e29]=(_0x39d280-_0x45953a)*_0x3cafc6,_0x3b9011[-0x2*0x774+-0x1*0x2552+-0xa73*-0x5]=(-0x3*0x8b+-0x120+-0x2*-0x161-(_0x300a0d+_0xf9cb72))*_0x3cafc6,_0x3b9011[-0xaa5*0x3+-0x24df+0x44d4]=(_0x1ea5f7+_0x470e7)*_0x3cafc6,_0x3b9011[0x12e*0xb+-0x1*-0x2397+-0x1845*0x2]=-0x2462+-0x1c20+0x2ce*0x17,_0x3b9011[0x60*-0x3+0x1ad4+-0x19ac]=(_0x4ab11d+_0x11c1f9)*_0x2cce35,_0x3b9011[0x3*-0x426+-0x156b*0x1+0x21e6]=(_0x1ea5f7-_0x470e7)*_0x2cce35,_0x3b9011[-0xb9b+-0xf2*0x1d+0x270f]=(-0x1d56+-0x1*-0xbb+0x1c9c-(_0x300a0d+_0x31ffc5))*_0x2cce35,_0x3b9011[0x1*-0x1b0f+0x57f+0x159b]=-0x1*-0x21b3+0xede*0x1+0x3091*-0x1,_0x3b9011[-0x2186+-0x810+-0x49*-0x92]=_0x3675db['x'],_0x3b9011[-0x795+-0x128c*-0x1+-0xaea]=_0x3675db['y'],_0x3b9011[0x2*-0x493+-0x1a11+0x1*0x2345]=_0x3675db['z'],_0x3b9011[-0x27*0xc8+0x3*-0x9de+-0x3c21*-0x1]=0xd99+-0x2653*0x1+0x18bb,this;}['transpose'](_0x17884c=this){const _0x5ba292=_0x17884c['data'],_0x3b6337=this['data'];if(_0x5ba292===_0x3b6337){let _0x56256e;_0x56256e=_0x5ba292[0x2*-0xe30+-0x1d6*-0x9+0xbdb],_0x3b6337[-0x9b9*0x1+-0x15b*-0x1c+0x1*-0x1c3a]=_0x5ba292[-0x471*0x3+0x161+0xbf6],_0x3b6337[-0x2214+-0x25*-0xf9+0x1*-0x1e5]=_0x56256e,_0x56256e=_0x5ba292[0x5*-0x6d9+0x7cc*-0x1+0x2a0b],_0x3b6337[-0x1782*-0x1+0xe10+-0x2590]=_0x5ba292[0x8c2+-0x1901+0x1047],_0x3b6337[0x26bf+-0x1635+-0x1082]=_0x56256e,_0x56256e=_0x5ba292[0x68*-0x4a+-0x97*0x21+0x318a],_0x3b6337[0x1bb2+-0x24e6+0x937]=_0x5ba292[0x1861+0xdf*0x1+-0xc9a*0x2],_0x3b6337[-0x1*0x1de1+-0x17ca+0x35b7]=_0x56256e,_0x56256e=_0x5ba292[-0x124+-0x67a*0x3+0x293*0x8],_0x3b6337[-0x10ca+-0x4fd+0x15cd]=_0x5ba292[-0x3*0x90f+0x1692+0x4a4],_0x3b6337[0xb29*0x1+0x1*0x1c3+0x1*-0xce3]=_0x56256e,_0x56256e=_0x5ba292[-0x263*-0x4+0x64b*-0x6+0x1c3d],_0x3b6337[0x7a2*0x3+-0x2484+-0x7*-0x1f3]=_0x5ba292[-0x2*0x553+0x3*0xbc6+0x189f*-0x1],_0x3b6337[-0x6d*0xa+-0x14f2+0x1941]=_0x56256e,_0x56256e=_0x5ba292[0x349*0x1+-0x7f2+0x1*0x4b4],_0x3b6337[-0x1dba+-0xc5*-0x26+0x87]=_0x5ba292[0x1303+0x2380+-0x3675],_0x3b6337[-0x91+0xc8+-0x29*0x1]=_0x56256e;}else _0x3b6337[-0x11c6+0x59*0x2e+-0x39*-0x8]=_0x5ba292[-0x25d8+0x1*-0x497+0x2a6f],_0x3b6337[-0x1ea8+-0xbd6+0x2a7f]=_0x5ba292[0x1*0x422+0x1d66+-0x2184],_0x3b6337[0x203d+0x7*-0x2ba+-0x2a1*0x5]=_0x5ba292[-0x18de+0x2e8+0x15fe],_0x3b6337[-0x23*-0x31+0x2140+-0x238*0x12]=_0x5ba292[-0x313*0x6+-0x4*-0x171+0xcba],_0x3b6337[0x3d9*0x7+0x1de1+-0x5*0xb5c]=_0x5ba292[-0x6a*0x5b+0x34a*0x6+-0x1*-0x11f3],_0x3b6337[0x2*-0x125+-0x23b*0x9+0x1662]=_0x5ba292[0x195+-0x18*-0x19f+-0x2878],_0x3b6337[-0x21f6+0xcd9*0x1+0x1523]=_0x5ba292[-0xc3c+0x1*0x38+-0xc0d*-0x1],_0x3b6337[0xd78+-0x3*-0x619+-0xa94*0x3]=_0x5ba292[0x9a1*-0x2+0x17*-0xaf+0x2308],_0x3b6337[0x5*0x505+0x165d+-0x1d3*0x1a]=_0x5ba292[-0x648+0xa39*-0x2+0xec*0x1d],_0x3b6337[0x1e00+-0x210c+0x315]=_0x5ba292[0x6*-0x5bf+-0xaf5+-0x3*-0xf27],_0x3b6337[0x241*-0xb+0xc10+0xcc5]=_0x5ba292[0x817+0x24fe+-0x2d0b],_0x3b6337[0x82f+0x24fb+-0x1*0x2d1f]=_0x5ba292[0x86a+-0xcc9*0x1+0x46d],_0x3b6337[0x117a+-0x7*-0x18d+-0xd*0x22d]=_0x5ba292[-0x2155+0xf84+0x11d4],_0x3b6337[0x119*-0x1e+0x1*-0x11b7+-0x135*-0x2a]=_0x5ba292[-0xb5*-0x2d+0x3*0x1+0x7*-0x48b],_0x3b6337[-0xb3e+0x3b*-0x2e+0xaf3*0x2]=_0x5ba292[0x1f69+-0x65+0x9*-0x371],_0x3b6337[-0x1*-0x1103+-0x74b*0x5+-0x9*-0x22b]=_0x5ba292[0x14ea*0x1+0x214b+-0x3626];return this;}['getTransla'+'tion'](_0x3f3ad0=new D()){return _0x3f3ad0['set'](this['data'][0xc*-0x31d+-0xf2*0xb+0x2fce],this['data'][0x1*-0x48a+-0x133b+0x2*0xbe9],this['data'][0x78c+-0x1*-0x12e7+-0x1a65]);}['getX'](_0x5018b4=new D()){return _0x5018b4['set'](this['data'][0xca4+-0x62b+-0x679],this['data'][-0xcf9+-0x3*-0x443+0x31],this['data'][-0x1d57+-0x25ce+0x4327*0x1]);}['getY'](_0x345f24=new D()){return _0x345f24['set'](this['data'][-0x31b*0x2+-0x4*-0x498+-0x26e*0x5],this['data'][0x1*-0x2285+-0x890+0x158d*0x2],this['data'][-0x2003+-0xb*0x33f+0x43be]);}['getZ'](_0x325fb8=new D()){return _0x325fb8['set'](this['data'][0xfbc+-0x413+-0xba1],this['data'][-0x1a21+0x1*-0x18d4+0x32fe],this['data'][-0x2365*-0x1+0x21b9+0x228a*-0x2]);}['getScale'](_0x1f2d97=new D()){return this['getX'](Os),this['getY'](Js),this['getZ'](ei),_0x1f2d97['set'](Os['length'](),Js['length'](),ei['length']()),_0x1f2d97;}get['scaleSign'](){return this['getX'](Os),this['getY'](Js),this['getZ'](ei),Os['cross'](Os,Js),Os['dot'](ei)<0x1035+0xd64+-0x1d99?-(0x1767+0x3*0x5+-0x1775):-0xa14+0x28*-0x21+-0xf3d*-0x1;}['setFromEul'+'erAngles'](_0xb5a86,_0x52ac58,_0x595865){_0xb5a86*=Y['DEG_TO_RAD'],_0x52ac58*=Y['DEG_TO_RAD'],_0x595865*=Y['DEG_TO_RAD'];const _0x57743f=Math['sin'](-_0xb5a86),_0x3796a4=Math['cos'](-_0xb5a86),_0x517601=Math['sin'](-_0x52ac58),_0xaea8ba=Math['cos'](-_0x52ac58),_0x7c519f=Math['sin'](-_0x595865),_0x38a2bc=Math['cos'](-_0x595865),_0x14a44f=this['data'];return _0x14a44f[-0x21f3+0x34b+0x1ea8]=_0xaea8ba*_0x38a2bc,_0x14a44f[0x2168+0x2234+-0x439b]=-_0xaea8ba*_0x7c519f,_0x14a44f[0x1f4*0x1+-0x124+-0xce]=_0x517601,_0x14a44f[-0x6c9+0x2299+-0xb*0x287]=-0x100f+0x1*0x2553+-0x1544,_0x14a44f[-0x8a*-0x35+0x1*0x1c55+0x38e3*-0x1]=_0x3796a4*_0x7c519f+_0x38a2bc*_0x57743f*_0x517601,_0x14a44f[0x944+0x231a*-0x1+0x19db]=_0x3796a4*_0x38a2bc-_0x57743f*_0x517601*_0x7c519f,_0x14a44f[-0x420*0x4+0x750*0x1+0x83*0x12]=-_0xaea8ba*_0x57743f,_0x14a44f[-0x995*0x1+0x1cad+0x1311*-0x1]=-0x2508+0x6e9*0x1+0x1e1f,_0x14a44f[0x2248+0x1*0x1273+-0x34b3]=_0x57743f*_0x7c519f-_0x3796a4*_0x38a2bc*_0x517601,_0x14a44f[-0x1025*-0x2+0xa1c+-0x2a5d]=_0x38a2bc*_0x57743f+_0x3796a4*_0x517601*_0x7c519f,_0x14a44f[-0x228a*-0x1+-0x3*-0x3b5+0x2af*-0x11]=_0x3796a4*_0xaea8ba,_0x14a44f[0x12*-0x18d+0x636*0x6+-0x1*0x94f]=0x793+0x22*-0x9f+0xd8b,_0x14a44f[0x1251+0x169e+0x48b*-0x9]=0x21da+-0x22*0x96+0x6f7*-0x2,_0x14a44f[0x2*-0x12d5+-0x1aa7+0x405e]=-0x1*-0x7dd+0xd5*0x13+-0x17ac,_0x14a44f[0x2cc+0x218b+-0x2449]=0x1fa9+0x2381+-0x2195*0x2,_0x14a44f[-0x157b+0x1*-0x410+0x199a]=-0x998*-0x1+-0x9*-0x407+-0x2*0x16eb,this;}['getEulerAn'+'gles'](_0x3dd1e0=new D()){this['getScale'](Hl);const _0x308cf4=Hl['x'],_0x2c426c=Hl['y'],_0x40ede3=Hl['z'];if(_0x308cf4===-0x83f*0x1+-0x222*-0x4+-0x49||_0x2c426c===0x1171+0x2404+-0x3575||_0x40ede3===-0x1ad1+0x1*0x2624+-0xb53)return _0x3dd1e0['set'](-0x1fa9+-0x269f+0x4648,-0x1779+0x299+0x538*0x4,-0x20f1+0x1c11+0x4e0);const _0x507c24=this['data'],_0x278aa8=Math['asin'](-_0x507c24[0x1a5*-0xc+-0x1*0x152f+0x28ed]/_0x308cf4),_0xa2e71b=Math['PI']*(-0x2191+0x1b6e+-0x1*-0x623+0.5);let _0x19ef41,_0x44ee48;return _0x278aa8<_0xa2e71b?_0x278aa8>-_0xa2e71b?(_0x19ef41=Math['atan2'](_0x507c24[0x2*0x2e+0x24b9+-0x250f]/_0x2c426c,_0x507c24[0xa17*-0x2+0x10b2+-0x16*-0x29]/_0x40ede3),_0x44ee48=Math['atan2'](_0x507c24[0x7df+-0x1585+0xda7]/_0x308cf4,_0x507c24[-0x1a*0x61+0x101f*0x1+0x1*-0x645]/_0x308cf4)):(_0x44ee48=-0x87e+-0x127f+0x1afd,_0x19ef41=-Math['atan2'](_0x507c24[0x3*0x43b+0x12eb*-0x1+-0x22*-0x2f]/_0x2c426c,_0x507c24[0x6c5+-0xdb*-0x18+0x9*-0x308]/_0x2c426c)):(_0x44ee48=0x2*0xfee+0x1069*-0x2+0xf6,_0x19ef41=Math['atan2'](_0x507c24[-0x4d*0x71+-0x1fe5*-0x1+0x21c]/_0x2c426c,_0x507c24[0xe77+0x515+-0x1387]/_0x2c426c)),_0x3dd1e0['set'](_0x19ef41,_0x278aa8,_0x44ee48)['mulScalar'](Y['RAD_TO_DEG']);}['toString'](){return'['+this['data']['join'](',\x20')+']';}};h(Qr,'IDENTITY',Object['freeze'](new Qr())),h(Qr,'ZERO',Object['freeze'](new Qr()['set']([-0x185b+0x5e2*0x3+-0x1*-0x6b5,0x8b*0x3+-0x1*-0x1787+-0x1928,-0x20dd+0x2e+0x20af,0x11f5*0x2+-0x2b*-0x43+-0x2f2b,0x5*0xd0+-0x8e9*-0x1+-0x7b*0x1b,0x160b+0x1*0x274+0x1*-0x187f,-0x1*-0x1e1b+0x511+-0x232c,0x208+-0xea7+0xc9f,-0x51b*0x7+-0x6e*-0x1d+0x1747*0x1,-0x4b*0x7b+-0x79*-0x49+0x2*0xc4,0xfb9+-0x101f+-0x11*-0x6,0x1*-0x577+-0x188d+0x1e04,0x1*-0x705+0x5*-0x694+0x27e9,0x1*0x24fb+-0x12c9+-0x1*0x1232,0x54c*-0x1+0xb8e+-0x3*0x216,0x5d+-0x20bf*-0x1+0x211c*-0x1])));let te=Qr;const Sn=class Sn{constructor(_0x477805=-0x2195*-0x1+0x7*0x9d+0x650*-0x6,_0x93fe7a=0x1*-0xe75+0x822+-0x653*-0x1,_0x320b86=-0x5*-0x734+-0x1da2+0x2*-0x331,_0x4c4fa9=0xa94*0x2+0x129b*-0x1+0x146*-0x2){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x477805['length']===-0x1e62+0x455+0x1a11*0x1?(this['x']=_0x477805[-0x6d*0x27+0xf03+0x198],this['y']=_0x477805[0x1d3*-0x1+0x19*-0xd8+0x16ec],this['z']=_0x477805[-0x266*0x9+-0x1cbd+-0xa11*-0x5],this['w']=_0x477805[-0x17*0x41+0x3*-0xade+0x1*0x2674]):(this['x']=_0x477805,this['y']=_0x93fe7a,this['z']=_0x320b86,this['w']=_0x4c4fa9);}['clone'](){const _0x3de3f4=this['constructo'+'r'];return new _0x3de3f4(this['x'],this['y'],this['z'],this['w']);}['conjugate'](_0x4324a7=this){return this['x']=_0x4324a7['x']*-(0xe86+0x87e+-0x2b*0x89),this['y']=_0x4324a7['y']*-(0x1*0x2333+0xb*-0x1+0x2327*-0x1),this['z']=_0x4324a7['z']*-(-0x11*-0x119+0x903*0x4+-0xdad*0x4),this['w']=_0x4324a7['w'],this;}['copy'](_0x116259){return this['x']=_0x116259['x'],this['y']=_0x116259['y'],this['z']=_0x116259['z'],this['w']=_0x116259['w'],this;}['dot'](_0x2f724c){return this['x']*_0x2f724c['x']+this['y']*_0x2f724c['y']+this['z']*_0x2f724c['z']+this['w']*_0x2f724c['w'];}['equals'](_0x5e3872){return this['x']===_0x5e3872['x']&&this['y']===_0x5e3872['y']&&this['z']===_0x5e3872['z']&&this['w']===_0x5e3872['w'];}['equalsAppr'+'ox'](_0x50c5b2,_0x3f822e=-0x1*0x1d5+0xcc7+-0xaf2+0.000001){return Math['abs'](this['x']-_0x50c5b2['x'])<_0x3f822e&&Math['abs'](this['y']-_0x50c5b2['y'])<_0x3f822e&&Math['abs'](this['z']-_0x50c5b2['z'])<_0x3f822e&&Math['abs'](this['w']-_0x50c5b2['w'])<_0x3f822e;}['getAxisAng'+'le'](_0x36e9ec){let _0x1e6f55=Math['acos'](this['w'])*(-0xa*0x4b+0x1aa9+-0x17b9);const _0x1720e6=Math['sin'](_0x1e6f55/(-0xe0c+-0x3*0x123+0x1177));return _0x1720e6!==-0x10a7*-0x1+-0x1d23+0x22*0x5e?(_0x36e9ec['x']=this['x']/_0x1720e6,_0x36e9ec['y']=this['y']/_0x1720e6,_0x36e9ec['z']=this['z']/_0x1720e6,(_0x36e9ec['x']<0x1e5b+-0x26b5+0x85a||_0x36e9ec['y']<0xcbf+-0x21a3+-0x2fc*-0x7||_0x36e9ec['z']<0x20ba+0x40*-0x26+-0x3*0x7be)&&(_0x36e9ec['x']*=-(-0x2d*-0x5f+-0xb74+-0x53e),_0x36e9ec['y']*=-(-0x58+0x794*0x1+-0x73b),_0x36e9ec['z']*=-(-0x1*0xf8b+0xcf+0xebd),_0x1e6f55*=-(0x7c3*-0x1+0x20c1+-0x18fd))):(_0x36e9ec['x']=0xb6+0x10f+-0xe2*0x2,_0x36e9ec['y']=-0x1*-0x1e39+0xb9c*0x2+0x3571*-0x1,_0x36e9ec['z']=0x1*-0x1e55+0x3db+0x1a7a),_0x1e6f55*Y['RAD_TO_DEG'];}['getEulerAn'+'gles'](_0x3cd3d1=new D()){let _0x26bd56,_0x3e27cb,_0xb8870c;const _0x25193d=this['x'],_0x3f1471=this['y'],_0x491d76=this['z'],_0x2b2a23=this['w'],_0x4a7c3f=(-0x1*-0x2ea+0x25a9+-0x2891)*(_0x2b2a23*_0x3f1471-_0x25193d*_0x491d76);return _0x4a7c3f<=-(0x50*0x16+0x715+-0xdf5+0.99999)?(_0x26bd56=(-0x182b+0x1ac+0x1*0x1681)*Math['atan2'](_0x25193d,_0x2b2a23),_0x3e27cb=-Math['PI']/(-0x22*0x71+-0x1*-0xfef+-0x2f*0x5),_0xb8870c=-0xbf9*-0x1+-0x22*-0xef+-0x2bb7*0x1):_0x4a7c3f>=-0xf38+-0x7*-0x412+-0xd46+0.99999?(_0x26bd56=(0x1297+-0x155+-0x1140)*Math['atan2'](_0x25193d,_0x2b2a23),_0x3e27cb=Math['PI']/(0x20eb+0x1866+0x394f*-0x1),_0xb8870c=0x2165+-0x13*-0x1f3+-0x466e):(_0x26bd56=Math['atan2']((0x547+-0x6*-0x33+-0x677)*(_0x2b2a23*_0x25193d+_0x3f1471*_0x491d76),-0x29d+-0x1*0x161+0x3ff-(-0x19d*-0x2+-0x11a4+0x34*0x47)*(_0x25193d*_0x25193d+_0x3f1471*_0x3f1471)),_0x3e27cb=Math['asin'](_0x4a7c3f),_0xb8870c=Math['atan2']((-0x15a8+0x1*0x837+0xd73)*(_0x2b2a23*_0x491d76+_0x25193d*_0x3f1471),-0x260b+0x1bf*0xc+0x1118-(0x1*0x14b0+-0x1198+-0x316)*(_0x3f1471*_0x3f1471+_0x491d76*_0x491d76))),_0x3cd3d1['set'](_0x26bd56,_0x3e27cb,_0xb8870c)['mulScalar'](Y['RAD_TO_DEG']);}['invert'](_0x514d8c=this){return this['conjugate'](_0x514d8c)['normalize']();}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x5877b8,_0x44e364,_0xbcc7b2){const _0x40794a=(0x3fb*-0x7+-0xa*-0x5+0x1bac-_0xbcc7b2)*(_0x5877b8['dot'](_0x44e364)<-0x24b3+-0x1*-0x247+0x226c?-(-0x1e27+0x180*-0x2+-0x8*-0x425):0x1f51*0x1+-0x5*0x5e9+-0x1c3);return this['x']=_0x5877b8['x']*_0x40794a+_0x44e364['x']*_0xbcc7b2,this['y']=_0x5877b8['y']*_0x40794a+_0x44e364['y']*_0xbcc7b2,this['z']=_0x5877b8['z']*_0x40794a+_0x44e364['z']*_0xbcc7b2,this['w']=_0x5877b8['w']*_0x40794a+_0x44e364['w']*_0xbcc7b2,this['normalize']();}['mul'](_0x341d87){const _0x392ef4=this['x'],_0x292f72=this['y'],_0x4bacf5=this['z'],_0x24d890=this['w'],_0x55795d=_0x341d87['x'],_0x1d0008=_0x341d87['y'],_0x16c1b4=_0x341d87['z'],_0x59652d=_0x341d87['w'];return this['x']=_0x24d890*_0x55795d+_0x392ef4*_0x59652d+_0x292f72*_0x16c1b4-_0x4bacf5*_0x1d0008,this['y']=_0x24d890*_0x1d0008+_0x292f72*_0x59652d+_0x4bacf5*_0x55795d-_0x392ef4*_0x16c1b4,this['z']=_0x24d890*_0x16c1b4+_0x4bacf5*_0x59652d+_0x392ef4*_0x1d0008-_0x292f72*_0x55795d,this['w']=_0x24d890*_0x59652d-_0x392ef4*_0x55795d-_0x292f72*_0x1d0008-_0x4bacf5*_0x16c1b4,this;}['mulScalar'](_0x48546d,_0x19a8ff=this){return this['x']=_0x19a8ff['x']*_0x48546d,this['y']=_0x19a8ff['y']*_0x48546d,this['z']=_0x19a8ff['z']*_0x48546d,this['w']=_0x19a8ff['w']*_0x48546d,this;}['mul2'](_0x29f03c,_0x56234f){const _0x314461=_0x29f03c['x'],_0x9fbd9c=_0x29f03c['y'],_0x34a918=_0x29f03c['z'],_0x2bc9ae=_0x29f03c['w'],_0x5d8cc5=_0x56234f['x'],_0xda20b3=_0x56234f['y'],_0x908fd=_0x56234f['z'],_0x302968=_0x56234f['w'];return this['x']=_0x2bc9ae*_0x5d8cc5+_0x314461*_0x302968+_0x9fbd9c*_0x908fd-_0x34a918*_0xda20b3,this['y']=_0x2bc9ae*_0xda20b3+_0x9fbd9c*_0x302968+_0x34a918*_0x5d8cc5-_0x314461*_0x908fd,this['z']=_0x2bc9ae*_0x908fd+_0x34a918*_0x302968+_0x314461*_0xda20b3-_0x9fbd9c*_0x5d8cc5,this['w']=_0x2bc9ae*_0x302968-_0x314461*_0x5d8cc5-_0x9fbd9c*_0xda20b3-_0x34a918*_0x908fd,this;}['normalize'](_0x33da43=this){let _0x516b39=_0x33da43['length']();return _0x516b39===-0x565*0x5+0x127*-0x13+0x30de?(this['x']=this['y']=this['z']=-0x1*-0x1aeb+0x1600+-0x30eb,this['w']=-0x122e*-0x2+-0x23a+-0x2221):(_0x516b39=(0x2*0x1036+-0x25e2+0x577)/_0x516b39,this['x']=_0x33da43['x']*_0x516b39,this['y']=_0x33da43['y']*_0x516b39,this['z']=_0x33da43['z']*_0x516b39,this['w']=_0x33da43['w']*_0x516b39),this;}['set'](_0x54df13,_0x37ad21,_0x552aa5,_0x589a39){return this['x']=_0x54df13,this['y']=_0x37ad21,this['z']=_0x552aa5,this['w']=_0x589a39,this;}['setFromAxi'+'sAngle'](_0x2ad050,_0x2e3ae6){_0x2e3ae6*=(0x135*0x2+-0xe0e*0x1+-0x2e9*-0x4+0.5)*Y['DEG_TO_RAD'];const _0x421e9b=Math['sin'](_0x2e3ae6),_0x4afcc3=Math['cos'](_0x2e3ae6);return this['x']=_0x421e9b*_0x2ad050['x'],this['y']=_0x421e9b*_0x2ad050['y'],this['z']=_0x421e9b*_0x2ad050['z'],this['w']=_0x4afcc3,this;}['setFromEul'+'erAngles'](_0x3426e1,_0x1d4236,_0x37372d){if(_0x3426e1 instanceof D){const _0x40a793=_0x3426e1;_0x3426e1=_0x40a793['x'],_0x1d4236=_0x40a793['y'],_0x37372d=_0x40a793['z'];}const _0x237e31=(0x33*0x7c+-0x4ab+-0x1409*0x1+0.5)*Y['DEG_TO_RAD'];_0x3426e1*=_0x237e31,_0x1d4236*=_0x237e31,_0x37372d*=_0x237e31;const _0x19a25f=Math['sin'](_0x3426e1),_0x4a4691=Math['cos'](_0x3426e1),_0x1ffc70=Math['sin'](_0x1d4236),_0x41d323=Math['cos'](_0x1d4236),_0x122eb4=Math['sin'](_0x37372d),_0x53f6b3=Math['cos'](_0x37372d);return this['x']=_0x19a25f*_0x41d323*_0x53f6b3-_0x4a4691*_0x1ffc70*_0x122eb4,this['y']=_0x4a4691*_0x1ffc70*_0x53f6b3+_0x19a25f*_0x41d323*_0x122eb4,this['z']=_0x4a4691*_0x41d323*_0x122eb4-_0x19a25f*_0x1ffc70*_0x53f6b3,this['w']=_0x4a4691*_0x41d323*_0x53f6b3+_0x19a25f*_0x1ffc70*_0x122eb4,this;}['setFromMat'+'4'](_0x3269d4){const _0x2e22f3=_0x3269d4['data'];let _0x1ad3ee=_0x2e22f3[-0xea2+-0x7*-0x27d+-0x2c9],_0x2165d7=_0x2e22f3[-0x1*0x1a02+-0x1*-0xa2e+0xfd5],_0x7996bc=_0x2e22f3[-0x15*0x146+-0x1*0x16e1+0x34f*0xf],_0x584d0a=_0x2e22f3[-0x368*-0xa+0x198f+-0x3b9b],_0x10b493=_0x2e22f3[-0x115*0xd+-0x675+-0x3*-0x6d9],_0x45a681=_0x2e22f3[-0xb6c+0xed7*-0x1+-0x1*-0x1a49],_0xe41696=_0x2e22f3[0x19ea+-0x48d*-0x6+-0x94*0x5c],_0x401e43=_0x2e22f3[-0xe1d+0x1*-0x1def+0x3d*0xb9],_0x1697df=_0x2e22f3[0x119d+0x2*0x7fa+-0x3*0xb2d],_0x43622a;return _0x43622a=_0x1ad3ee*_0x1ad3ee+_0x2165d7*_0x2165d7+_0x7996bc*_0x7996bc,_0x43622a===0x986+0x107d+-0x1a03?this['set'](0x1c10+-0xc*0x93+-0x152c*0x1,-0x1*-0x268a+0x220f+-0x4899,0x24a5+-0xb*-0x365+0x5*-0xecc,-0x1*-0xa31+-0x103f+-0x205*-0x3):(_0x43622a=(-0x1237*-0x1+0x68+-0x1*0x129e)/Math['sqrt'](_0x43622a),_0x1ad3ee*=_0x43622a,_0x2165d7*=_0x43622a,_0x7996bc*=_0x43622a,_0x43622a=_0x584d0a*_0x584d0a+_0x10b493*_0x10b493+_0x45a681*_0x45a681,_0x43622a===0x2b*-0x61+0x1189+-0x13e?this['set'](0x3b0+-0x1f*0x6f+0xe3*0xb,-0x1*-0x77b+-0x14dd+-0x6*-0x23b,0x3c1+0xbb+-0x47c,-0x1d10+0x7*-0x8c+0x20e5):(_0x43622a=(-0x3f7+-0x76*0x15+0xda6)/Math['sqrt'](_0x43622a),_0x584d0a*=_0x43622a,_0x10b493*=_0x43622a,_0x45a681*=_0x43622a,_0x43622a=_0xe41696*_0xe41696+_0x401e43*_0x401e43+_0x1697df*_0x1697df,_0x43622a===-0xc8d+-0x254c+0x31d9?this['set'](0x1*-0x2285+-0xd*-0x2d8+0x13*-0x21,0x1ce+-0x37c+0x1ae,-0xf9*0x6+-0x1b*-0xda+-0x48*0x3d,-0x24b2+0x5ad*-0x3+0x1a*0x211):(_0x43622a=(-0x12bf*0x2+0x1*-0x482+0x2a01)/Math['sqrt'](_0x43622a),_0xe41696*=_0x43622a,_0x401e43*=_0x43622a,_0x1697df*=_0x43622a,_0x1697df<-0x77f+-0x128*-0x18+-0x5*0x40d?_0x1ad3ee>_0x10b493?this['set'](0x26fd+0x1*-0x1732+-0x2*0x7e5+_0x1ad3ee-_0x10b493-_0x1697df,_0x2165d7+_0x584d0a,_0xe41696+_0x7996bc,_0x45a681-_0x401e43):this['set'](_0x2165d7+_0x584d0a,0x329+-0x23ad*0x1+0x2085-_0x1ad3ee+_0x10b493-_0x1697df,_0x45a681+_0x401e43,_0xe41696-_0x7996bc):_0x1ad3ee<-_0x10b493?this['set'](_0xe41696+_0x7996bc,_0x45a681+_0x401e43,0x17f1+0x10d9+-0x1*0x28c9-_0x1ad3ee-_0x10b493+_0x1697df,_0x2165d7-_0x584d0a):this['set'](_0x45a681-_0x401e43,_0xe41696-_0x7996bc,_0x2165d7-_0x584d0a,0x3a9*0x2+-0x17b6+0x1065+_0x1ad3ee+_0x10b493+_0x1697df),this['mulScalar']((-0x17d1+0x1d50+0x25*-0x26)/this['length']()))));}['setFromDir'+'ections'](_0x1d1208,_0x28aaea){const _0x5a555e=0x2357*-0x1+0xc29*-0x1+0x2f81+_0x1d1208['dot'](_0x28aaea);return _0x5a555e<Number['EPSILON']?Math['abs'](_0x1d1208['x'])>Math['abs'](_0x1d1208['y'])?(this['x']=-_0x1d1208['z'],this['y']=-0x1010+0xa2b+0x5e5,this['z']=_0x1d1208['x'],this['w']=-0x89*0x3d+0x21ff+-0x15a):(this['x']=0xa12+-0xc34+0x222,this['y']=-_0x1d1208['z'],this['z']=_0x1d1208['y'],this['w']=-0x1730+0x9*-0x290+0x14*0x250):(this['x']=_0x1d1208['y']*_0x28aaea['z']-_0x1d1208['z']*_0x28aaea['y'],this['y']=_0x1d1208['z']*_0x28aaea['x']-_0x1d1208['x']*_0x28aaea['z'],this['z']=_0x1d1208['x']*_0x28aaea['y']-_0x1d1208['y']*_0x28aaea['x'],this['w']=_0x5a555e),this['normalize']();}['slerp'](_0x5d1cf5,_0x164813,_0x1dd453){const _0x2b7cb7=_0x5d1cf5['x'],_0x4809aa=_0x5d1cf5['y'],_0x5ce886=_0x5d1cf5['z'],_0x4e3afe=_0x5d1cf5['w'];let _0x12054b=_0x164813['x'],_0x31d01e=_0x164813['y'],_0x1bf9ee=_0x164813['z'],_0x21da59=_0x164813['w'],_0x374565=_0x4e3afe*_0x21da59+_0x2b7cb7*_0x12054b+_0x4809aa*_0x31d01e+_0x5ce886*_0x1bf9ee;if(_0x374565<-0x1a30*0x1+0x1b*0x1c+0x173c&&(_0x21da59=-_0x21da59,_0x12054b=-_0x12054b,_0x31d01e=-_0x31d01e,_0x1bf9ee=-_0x1bf9ee,_0x374565=-_0x374565),Math['abs'](_0x374565)>=0x142d+0x1ac7+0x6b5*-0x7)return this['w']=_0x4e3afe,this['x']=_0x2b7cb7,this['y']=_0x4809aa,this['z']=_0x5ce886,this;const _0x5c255f=Math['acos'](_0x374565),_0x283b6e=Math['sqrt'](0x21d*0xb+0x1a31+0x9e3*-0x5-_0x374565*_0x374565);if(Math['abs'](_0x283b6e)<0x19*-0xbf+0x1*0xa12+0xd*0xa9+0.001)return this['w']=_0x4e3afe*(-0x398+0xb2b+-0x1*0x793+0.5)+_0x21da59*(-0x10*0x53+0x549+-0x19+0.5),this['x']=_0x2b7cb7*(0x4*0x6b5+0x119*0x1a+-0x375e+0.5)+_0x12054b*(0x4*0x6e6+-0x32e+0xc35*-0x2+0.5),this['y']=_0x4809aa*(-0x8*-0x250+0x804+-0x1a84+0.5)+_0x31d01e*(-0x2*-0x15d+-0x152e+0x1274+0.5),this['z']=_0x5ce886*(-0x997+0xe5*-0x20+0xcbd*0x3+0.5)+_0x1bf9ee*(0x579*0x5+-0x1b*0x3f+-0x14b8+0.5),this;const _0x3cf7af=Math['sin']((0x1413+0x89*-0x1b+-0x59f*0x1-_0x1dd453)*_0x5c255f)/_0x283b6e,_0x3fceb6=Math['sin'](_0x1dd453*_0x5c255f)/_0x283b6e;return this['w']=_0x4e3afe*_0x3cf7af+_0x21da59*_0x3fceb6,this['x']=_0x2b7cb7*_0x3cf7af+_0x12054b*_0x3fceb6,this['y']=_0x4809aa*_0x3cf7af+_0x31d01e*_0x3fceb6,this['z']=_0x5ce886*_0x3cf7af+_0x1bf9ee*_0x3fceb6,this;}['transformV'+'ector'](_0x4c80c4,_0x1067d6=new D()){const _0x34fec5=_0x4c80c4['x'],_0x632ec6=_0x4c80c4['y'],_0x1afb55=_0x4c80c4['z'],_0x64ad59=this['x'],_0x4e8646=this['y'],_0x31729c=this['z'],_0xb48f87=this['w'],_0x89b60a=_0xb48f87*_0x34fec5+_0x4e8646*_0x1afb55-_0x31729c*_0x632ec6,_0x3cb712=_0xb48f87*_0x632ec6+_0x31729c*_0x34fec5-_0x64ad59*_0x1afb55,_0x4c7682=_0xb48f87*_0x1afb55+_0x64ad59*_0x632ec6-_0x4e8646*_0x34fec5,_0x47d6ab=-_0x64ad59*_0x34fec5-_0x4e8646*_0x632ec6-_0x31729c*_0x1afb55;return _0x1067d6['x']=_0x89b60a*_0xb48f87+_0x47d6ab*-_0x64ad59+_0x3cb712*-_0x31729c-_0x4c7682*-_0x4e8646,_0x1067d6['y']=_0x3cb712*_0xb48f87+_0x47d6ab*-_0x4e8646+_0x4c7682*-_0x64ad59-_0x89b60a*-_0x31729c,_0x1067d6['z']=_0x4c7682*_0xb48f87+_0x47d6ab*-_0x31729c+_0x89b60a*-_0x4e8646-_0x3cb712*-_0x64ad59,_0x1067d6;}['fromArray'](_0x38e7ba,_0x3512b8=0x1*-0x1175+0x88d+0x8e8){return this['x']=_0x38e7ba[_0x3512b8]??this['x'],this['y']=_0x38e7ba[_0x3512b8+(0xb*0x15d+0x960*0x3+-0x2b1e)]??this['y'],this['z']=_0x38e7ba[_0x3512b8+(0xd7*0x29+0x2f*0xb1+-0x42ec)]??this['z'],this['w']=_0x38e7ba[_0x3512b8+(-0x276+0x1d92+-0x1b19)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x19491b=[],_0x3bc247=-0x2130*0x1+0x1ea2+-0x3*-0xda){return _0x19491b[_0x3bc247]=this['x'],_0x19491b[_0x3bc247+(0x301+-0x2*0xf36+-0x2be*-0xa)]=this['y'],_0x19491b[_0x3bc247+(0x1630+-0x10*0x26d+-0x10a2*-0x1)]=this['z'],_0x19491b[_0x3bc247+(0x3*0xcbb+0x6c8+0x8fe*-0x5)]=this['w'],_0x19491b;}};h(Sn,'IDENTITY',Object['freeze'](new Sn(0xa31*0x1+0x25*0x99+0x1*-0x204e,0x1f4d*0x1+0x1612+-0xd*0x41b,-0x241b+-0x13c+0x1*0x2557,0xb6+0x1595+0x6*-0x3b7))),h(Sn,'ZERO',Object['freeze'](new Sn(-0x243*-0x2+-0x3*0x7+-0x471*0x1,0x25ba+-0x26cd+-0x1*-0x113,-0x11*-0x22+0x1244+-0x1486,0x1608+-0x3c5+0x55*-0x37)));let le=Sn;const Pa=new D(),Ma=new D(),Um=new D(),Bm=new D(),gx=new D();class De{constructor(_0x449d8a,_0x1d7426){h(this,'center',new D()),h(this,'halfExtent'+'s',new D(0x4c3*-0x3+0x2*0x10bd+-0x1*0x1331+0.5,-0x29*-0x59+-0x1d*0x14e+0x1795+0.5,-0xb*0x369+0x1*-0x352+0x28d5+0.5)),h(this,'_min',new D()),h(this,'_max',new D()),(_0x449d8a&&this['center']['copy'](_0x449d8a),_0x1d7426&&this['halfExtent'+'s']['copy'](_0x1d7426));}['add'](_0xaf10c){const _0x1b086=this['center'],_0x22db12=_0x1b086['x'],_0x9dd9ef=_0x1b086['y'],_0x291422=_0x1b086['z'],_0x4ad3aa=this['halfExtent'+'s'],_0x7fbf13=_0x4ad3aa['x'],_0x525987=_0x4ad3aa['y'],_0x34091e=_0x4ad3aa['z'];let _0x5b57c7=_0x22db12-_0x7fbf13,_0x324788=_0x22db12+_0x7fbf13,_0x455c3f=_0x9dd9ef-_0x525987,_0x36f5cd=_0x9dd9ef+_0x525987,_0x7273a4=_0x291422-_0x34091e,_0x1dc518=_0x291422+_0x34091e;const _0x500722=_0xaf10c['center'],_0x37c337=_0x500722['x'],_0x5260e9=_0x500722['y'],_0x358d11=_0x500722['z'],_0x190d71=_0xaf10c['halfExtent'+'s'],_0x5343f5=_0x190d71['x'],_0x1d98b9=_0x190d71['y'],_0x376739=_0x190d71['z'],_0x1cfb91=_0x37c337-_0x5343f5,_0x4a1581=_0x37c337+_0x5343f5,_0x1eae7e=_0x5260e9-_0x1d98b9,_0x2bf6cb=_0x5260e9+_0x1d98b9,_0x4989fc=_0x358d11-_0x376739,_0x189af2=_0x358d11+_0x376739;_0x1cfb91<_0x5b57c7&&(_0x5b57c7=_0x1cfb91),_0x4a1581>_0x324788&&(_0x324788=_0x4a1581),_0x1eae7e<_0x455c3f&&(_0x455c3f=_0x1eae7e),_0x2bf6cb>_0x36f5cd&&(_0x36f5cd=_0x2bf6cb),_0x4989fc<_0x7273a4&&(_0x7273a4=_0x4989fc),_0x189af2>_0x1dc518&&(_0x1dc518=_0x189af2),_0x1b086['x']=(_0x5b57c7+_0x324788)*(0x178f+0x1958+-0x75*0x6b+0.5),_0x1b086['y']=(_0x455c3f+_0x36f5cd)*(-0x596+0x1afa+-0x1564+0.5),_0x1b086['z']=(_0x7273a4+_0x1dc518)*(-0x1d7a+-0x936*0x1+0x26b0+0.5),_0x4ad3aa['x']=(_0x324788-_0x5b57c7)*(-0x1240+0x1*-0x1454+-0x1*-0x2694+0.5),_0x4ad3aa['y']=(_0x36f5cd-_0x455c3f)*(-0x1315*-0x1+0x1*0xf27+-0x88f*0x4+0.5),_0x4ad3aa['z']=(_0x1dc518-_0x7273a4)*(-0x18f9+0x162+0x3d*0x63+0.5);}['copy'](_0x35a062){this['center']['copy'](_0x35a062['center']),this['halfExtent'+'s']['copy'](_0x35a062['halfExtent'+'s']);}['clone'](){return new De(this['center'],this['halfExtent'+'s']);}['intersects'](_0x309967){const _0x53f5de=this['getMax'](),_0x1acfd8=this['getMin'](),_0x7beb8b=_0x309967['getMax'](),_0x4cc008=_0x309967['getMin']();return _0x1acfd8['x']<=_0x7beb8b['x']&&_0x53f5de['x']>=_0x4cc008['x']&&_0x1acfd8['y']<=_0x7beb8b['y']&&_0x53f5de['y']>=_0x4cc008['y']&&_0x1acfd8['z']<=_0x7beb8b['z']&&_0x53f5de['z']>=_0x4cc008['z'];}['_intersect'+'sRay'](_0x51ee33,_0x1ade04){const _0x3a8e5e=Pa['copy'](this['getMin']())['sub'](_0x51ee33['origin']),_0x1aa21e=Ma['copy'](this['getMax']())['sub'](_0x51ee33['origin']),_0x2b7ce3=_0x51ee33['direction'];_0x2b7ce3['x']===0x9ca*-0x3+0x65f+0x16ff*0x1?(_0x3a8e5e['x']=_0x3a8e5e['x']<-0x13d*0x4+0xd9*-0x1+0x5cd?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x1aa21e['x']=_0x1aa21e['x']<0x466+-0x20c*0x8+-0x2a*-0x49?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x3a8e5e['x']/=_0x2b7ce3['x'],_0x1aa21e['x']/=_0x2b7ce3['x']),_0x2b7ce3['y']===0x2128+-0xf0e*-0x1+-0x3036?(_0x3a8e5e['y']=_0x3a8e5e['y']<-0x14*0xeb+0x1*0xd47+-0x1*-0x515?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x1aa21e['y']=_0x1aa21e['y']<0x3f*-0x72+0x2*-0x766+0x892*0x5?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x3a8e5e['y']/=_0x2b7ce3['y'],_0x1aa21e['y']/=_0x2b7ce3['y']),_0x2b7ce3['z']===-0x1*0xc43+-0x49b*-0x1+0x7a8?(_0x3a8e5e['z']=_0x3a8e5e['z']<0xd*0xa9+0x485+0x102*-0xd?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x1aa21e['z']=_0x1aa21e['z']<-0x1f0d+0xd7a+0x1193?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x3a8e5e['z']/=_0x2b7ce3['z'],_0x1aa21e['z']/=_0x2b7ce3['z']);const _0x5a90a0=Um['set'](Math['min'](_0x3a8e5e['x'],_0x1aa21e['x']),Math['min'](_0x3a8e5e['y'],_0x1aa21e['y']),Math['min'](_0x3a8e5e['z'],_0x1aa21e['z'])),_0x353088=Bm['set'](Math['max'](_0x3a8e5e['x'],_0x1aa21e['x']),Math['max'](_0x3a8e5e['y'],_0x1aa21e['y']),Math['max'](_0x3a8e5e['z'],_0x1aa21e['z'])),_0x36c122=Math['min'](Math['min'](_0x353088['x'],_0x353088['y']),_0x353088['z']),_0x53a71a=Math['max'](Math['max'](_0x5a90a0['x'],_0x5a90a0['y']),_0x5a90a0['z']),_0x387c9d=_0x36c122>=_0x53a71a&&_0x53a71a>=0x2195*0x1+0xf70+0x3*-0x1057;return _0x387c9d&&_0x1ade04['copy'](_0x51ee33['direction'])['mulScalar'](_0x53a71a)['add'](_0x51ee33['origin']),_0x387c9d;}['_fastInter'+'sectsRay'](_0x3bcbac){const _0x517254=Pa,_0x5332ce=Ma,_0x211813=Um,_0x10dd78=Bm,_0x433e36=gx,_0x591c45=_0x3bcbac['direction'];return _0x517254['sub2'](_0x3bcbac['origin'],this['center']),_0x10dd78['set'](Math['abs'](_0x517254['x']),Math['abs'](_0x517254['y']),Math['abs'](_0x517254['z'])),_0x211813['mul2'](_0x517254,_0x591c45),!(_0x10dd78['x']>this['halfExtent'+'s']['x']&&_0x211813['x']>=-0x23d+-0x1428+-0x111*-0x15||_0x10dd78['y']>this['halfExtent'+'s']['y']&&_0x211813['y']>=-0xdf9+0x12b7+-0x25f*0x2||_0x10dd78['z']>this['halfExtent'+'s']['z']&&_0x211813['z']>=0x4*-0x23d+-0xf65*-0x1+-0x61*0x11||(_0x433e36['set'](Math['abs'](_0x591c45['x']),Math['abs'](_0x591c45['y']),Math['abs'](_0x591c45['z'])),_0x5332ce['cross'](_0x591c45,_0x517254),_0x5332ce['set'](Math['abs'](_0x5332ce['x']),Math['abs'](_0x5332ce['y']),Math['abs'](_0x5332ce['z'])),_0x5332ce['x']>this['halfExtent'+'s']['y']*_0x433e36['z']+this['halfExtent'+'s']['z']*_0x433e36['y'])||_0x5332ce['y']>this['halfExtent'+'s']['x']*_0x433e36['z']+this['halfExtent'+'s']['z']*_0x433e36['x']||_0x5332ce['z']>this['halfExtent'+'s']['x']*_0x433e36['y']+this['halfExtent'+'s']['y']*_0x433e36['x']);}['intersects'+'Ray'](_0x4ade3b,_0x44bbb5){return _0x44bbb5?this['_intersect'+'sRay'](_0x4ade3b,_0x44bbb5):this['_fastInter'+'sectsRay'](_0x4ade3b);}['setMinMax'](_0x2448ca,_0x360b4c){this['center']['add2'](_0x360b4c,_0x2448ca)['mulScalar'](0x7b*-0x17+0x1*-0x1eb+0xcf8*0x1+0.5),this['halfExtent'+'s']['sub2'](_0x360b4c,_0x2448ca)['mulScalar'](0xa74+0x1*0xe6e+0x41*-0x62+0.5);}['getMin'](){return this['_min']['copy'](this['center'])['sub'](this['halfExtent'+'s']);}['getMax'](){return this['_max']['copy'](this['center'])['add'](this['halfExtent'+'s']);}['containsPo'+'int'](_0x2b228f){const _0x30a40e=this['getMin'](),_0x11e6f9=this['getMax']();return!(_0x2b228f['x']<_0x30a40e['x']||_0x2b228f['x']>_0x11e6f9['x']||_0x2b228f['y']<_0x30a40e['y']||_0x2b228f['y']>_0x11e6f9['y']||_0x2b228f['z']<_0x30a40e['z']||_0x2b228f['z']>_0x11e6f9['z']);}['setFromTra'+'nsformedAa'+'bb'](_0x203572,_0x58283e,_0x114cd9=!(0x83*-0x23+-0x4e*-0x7+-0x8*-0x1f9)){const _0x2b0ce4=_0x203572['center'],_0x2c07f3=_0x203572['halfExtent'+'s'],_0x46ef70=_0x58283e['data'];let _0x5914d1=_0x46ef70[-0x1*0x1592+0x1f27+-0x995],_0x1f9a05=_0x46ef70[0x126d*0x2+0x7b8*0x2+-0x3446],_0x18a990=_0x46ef70[0xf5*0xa+-0x1*-0x2017+-0x1*0x29a1],_0x3b1f28=_0x46ef70[-0x1c13*-0x1+-0x15e3+-0x62f*0x1],_0x3b7bf9=_0x46ef70[-0x656+0x406+0x255],_0x5308f5=_0x46ef70[0x3*0x57+0x1c5+-0x2c1],_0x5d29a3=_0x46ef70[0x78*-0xf+-0x1b*-0xd5+-0xf6d],_0x22e6db=_0x46ef70[-0x239f+-0x67a+0x1*0x2a1f],_0x121227=_0x46ef70[-0x4f*0x4c+-0x1*-0x12d2+0x4ac];if(_0x114cd9){let _0x2e0478=_0x5914d1*_0x5914d1+_0x1f9a05*_0x1f9a05+_0x18a990*_0x18a990;if(_0x2e0478>0x1*0x1b23+-0x1*-0x60d+-0x3b*0x90){const _0x1b3bff=(-0x1805+-0x1abd+0x32c3)/Math['sqrt'](_0x2e0478);_0x5914d1*=_0x1b3bff,_0x1f9a05*=_0x1b3bff,_0x18a990*=_0x1b3bff;}if(_0x2e0478=_0x3b1f28*_0x3b1f28+_0x3b7bf9*_0x3b7bf9+_0x5308f5*_0x5308f5,_0x2e0478>0x7c6+-0x1*-0x346+-0xb0c){const _0x29d668=(0x1*-0x2225+-0x16e0+0x656*0x9)/Math['sqrt'](_0x2e0478);_0x3b1f28*=_0x29d668,_0x3b7bf9*=_0x29d668,_0x5308f5*=_0x29d668;}if(_0x2e0478=_0x5d29a3*_0x5d29a3+_0x22e6db*_0x22e6db+_0x121227*_0x121227,_0x2e0478>0x268d+-0xf69*0x2+0x1*-0x7bb){const _0x23ba41=(0x856+0x19cf*-0x1+0x117a)/Math['sqrt'](_0x2e0478);_0x5d29a3*=_0x23ba41,_0x22e6db*=_0x23ba41,_0x121227*=_0x23ba41;}}this['center']['set'](_0x46ef70[0x2*0x1319+-0xa9a+-0x56*0x52]+_0x5914d1*_0x2b0ce4['x']+_0x1f9a05*_0x2b0ce4['y']+_0x18a990*_0x2b0ce4['z'],_0x46ef70[0x173b+0x5*-0x1cd+-0xe2d]+_0x3b1f28*_0x2b0ce4['x']+_0x3b7bf9*_0x2b0ce4['y']+_0x5308f5*_0x2b0ce4['z'],_0x46ef70[-0x21d*-0x5+-0x2ec*-0xb+-0x2aa7]+_0x5d29a3*_0x2b0ce4['x']+_0x22e6db*_0x2b0ce4['y']+_0x121227*_0x2b0ce4['z']),this['halfExtent'+'s']['set'](Math['abs'](_0x5914d1)*_0x2c07f3['x']+Math['abs'](_0x1f9a05)*_0x2c07f3['y']+Math['abs'](_0x18a990)*_0x2c07f3['z'],Math['abs'](_0x3b1f28)*_0x2c07f3['x']+Math['abs'](_0x3b7bf9)*_0x2c07f3['y']+Math['abs'](_0x5308f5)*_0x2c07f3['z'],Math['abs'](_0x5d29a3)*_0x2c07f3['x']+Math['abs'](_0x22e6db)*_0x2c07f3['y']+Math['abs'](_0x121227)*_0x2c07f3['z']);}static['computeMin'+'Max'](_0x3526d9,_0x56cd1f,_0xbd52ab,_0x3db28f=_0x3526d9['length']/(0xb35+-0xfbc+0x48a)){if(_0x3db28f>-0x1ec*0x5+0x2207*0x1+-0x186b){let _0x4b8df4=_0x3526d9[0xb99+0xa7*-0x4+-0x8fd],_0x2858a9=_0x3526d9[-0x1*-0x14e6+-0x22ce+-0x4a3*-0x3],_0x22a2a5=_0x3526d9[0x2031+0x2*-0x127f+0x4cf],_0x2a5e36=_0x4b8df4,_0x4f74f4=_0x2858a9,_0x243781=_0x22a2a5;const _0x50a9e7=_0x3db28f*(-0x7b2+0xa0*0x1+0x715);for(let _0x1d5863=-0x2*-0xe67+-0x71d*-0x4+-0x393f;_0x1d5863<_0x50a9e7;_0x1d5863+=0x14e3*-0x1+0x3d3+0x1113){const _0x3c7129=_0x3526d9[_0x1d5863],_0x3af49f=_0x3526d9[_0x1d5863+(0x2b*0xe8+-0x102c+-0x16cb)],_0x3d35d0=_0x3526d9[_0x1d5863+(-0x1c4e+-0x22c3+0x43*0xf1)];_0x3c7129<_0x4b8df4&&(_0x4b8df4=_0x3c7129),_0x3af49f<_0x2858a9&&(_0x2858a9=_0x3af49f),_0x3d35d0<_0x22a2a5&&(_0x22a2a5=_0x3d35d0),_0x3c7129>_0x2a5e36&&(_0x2a5e36=_0x3c7129),_0x3af49f>_0x4f74f4&&(_0x4f74f4=_0x3af49f),_0x3d35d0>_0x243781&&(_0x243781=_0x3d35d0);}_0x56cd1f['set'](_0x4b8df4,_0x2858a9,_0x22a2a5),_0xbd52ab['set'](_0x2a5e36,_0x4f74f4,_0x243781);}}['compute'](_0x5ce7d5,_0x331d10){De['computeMin'+'Max'](_0x5ce7d5,Pa,Ma,_0x331d10),this['setMinMax'](Pa,Ma);}['intersects'+'BoundingSp'+'here'](_0x1edbdc){return this['_distanceT'+'oBoundingS'+'phereSq'](_0x1edbdc)<=_0x1edbdc['radius']*_0x1edbdc['radius'];}['_distanceT'+'oBoundingS'+'phereSq'](_0x577cf1){const _0xba37df=this['getMin'](),_0x9b8b9b=this['getMax']();let _0x530fff=0x1*-0x23ae+0x15d3+0x1*0xddb;const _0x319682=['x','y','z'];for(let _0x5c96c4=0x13ac+-0x1*0x42c+-0xf80;_0x5c96c4<-0x260*-0x6+0xaff*-0x3+-0xf*-0x140;++_0x5c96c4){let _0x352ebe=-0x1*-0xaed+0xb3*0x33+-0x174b*0x2;const _0x307344=_0x577cf1['center'][_0x319682[_0x5c96c4]],_0x488b0b=_0xba37df[_0x319682[_0x5c96c4]],_0x4d9185=_0x9b8b9b[_0x319682[_0x5c96c4]];let _0x426e6d=-0x1c88+0x11df+-0xaa9*-0x1;_0x307344<_0x488b0b&&(_0x426e6d=_0x488b0b-_0x307344,_0x352ebe+=_0x426e6d*_0x426e6d),_0x307344>_0x4d9185&&(_0x426e6d=_0x307344-_0x4d9185,_0x352ebe+=_0x426e6d*_0x426e6d),_0x530fff+=_0x352ebe;}return _0x530fff;}['_expand'](_0x4c28b4,_0x3151af){Pa['add2'](this['getMin'](),_0x4c28b4),Ma['add2'](this['getMax'](),_0x3151af),this['setMinMax'](Pa,Ma);}}const Wl=new D(),Sx=new D();class sp{constructor(_0x2d3327=new D(),_0x3e8c05=-0x4e3+0x891+0x3ae*-0x1+0.5){h(this,'center'),h(this,'radius'),(w['assert'](!Object['isFrozen'](_0x2d3327),'The\x20constr'+'uctor\x20of\x20\x27'+'BoundingSp'+'here\x27\x20does'+'\x20not\x20accep'+'t\x20a\x20consta'+'nt\x20(frozen'+')\x20object\x20a'+'s\x20a\x20\x27cente'+'r\x27\x20paramet'+'er'),this['center']=_0x2d3327,this['radius']=_0x3e8c05);}['containsPo'+'int'](_0x5d9372){const _0x35a304=Wl['sub2'](_0x5d9372,this['center'])['lengthSq'](),_0x4d88fa=this['radius'];return _0x35a304<_0x4d88fa*_0x4d88fa;}['intersects'+'Ray'](_0x40f5ba,_0x46414a){const _0x30e30b=Wl['copy'](_0x40f5ba['origin'])['sub'](this['center']),_0x2db1d1=_0x30e30b['dot'](Sx['copy'](_0x40f5ba['direction'])['normalize']()),_0x581bb7=_0x30e30b['dot'](_0x30e30b)-this['radius']*this['radius'];if(_0x581bb7>-0x9ff+0x8bd+-0x2e*-0x7&&_0x2db1d1>-0xfc+0x1f2a+-0x2*0xf17)return!(0x2537*0x1+0x1*-0x240d+0x21*-0x9);const _0x4e4c11=_0x2db1d1*_0x2db1d1-_0x581bb7;if(_0x4e4c11<-0xf9f+-0x1b0f+0x2aae)return!(0x18e6+-0xe7c+0x5*-0x215);const _0x530075=Math['abs'](-_0x2db1d1-Math['sqrt'](_0x4e4c11));return _0x46414a&&_0x46414a['copy'](_0x40f5ba['direction'])['mulScalar'](_0x530075)['add'](_0x40f5ba['origin']),!(-0x224a+-0xf5e*0x1+0x31a8);}['intersects'+'BoundingSp'+'here'](_0x1cda5e){Wl['sub2'](_0x1cda5e['center'],this['center']);const _0x5b5a60=_0x1cda5e['radius']+this['radius'];return Wl['lengthSq']()<=_0x5b5a60*_0x5b5a60;}}class QS{constructor(_0x4ffd96=D['UP'],_0x113500=0x136e+0x19e2+0x32*-0xe8){h(this,'normal',new D()),h(this,'distance'),(this['normal']['copy'](_0x4ffd96),this['distance']=_0x113500);}['clone'](){const _0x25bd71=this['constructo'+'r'];return new _0x25bd71()['copy'](this);}['copy'](_0x5c17a4){return this['normal']['copy'](_0x5c17a4['normal']),this['distance']=_0x5c17a4['distance'],this;}['intersects'+'Line'](_0x20f533,_0x29447c,_0x36a835){const _0x425688=this['distance'],_0x1bd1a2=this['normal']['dot'](_0x20f533)+_0x425688,_0x114324=this['normal']['dot'](_0x29447c)+_0x425688,_0x1b8e40=_0x1bd1a2/(_0x1bd1a2-_0x114324),_0x45accd=_0x1b8e40>=0x1776+0x1745+-0x2ebb&&_0x1b8e40<=-0xcda+0x3f*-0x29+-0x6*-0x3d3;return _0x45accd&&_0x36a835&&_0x36a835['lerp'](_0x20f533,_0x29447c,_0x1b8e40),_0x45accd;}['intersects'+'Ray'](_0x3cdc16,_0x13e7a1){const _0x36dbb3=this['normal']['dot'](_0x3cdc16['direction']);if(_0x36dbb3===0x23+0x1d91+-0x2*0xeda)return!(0x387*-0x1+0x667+0x69*-0x7);const _0x194517=-(this['normal']['dot'](_0x3cdc16['origin'])+this['distance'])/_0x36dbb3;return _0x194517>=-0x12c4+0x3*0x961+-0x1*0x95f&&_0x13e7a1&&_0x13e7a1['copy'](_0x3cdc16['direction'])['mulScalar'](_0x194517)['add'](_0x3cdc16['origin']),_0x194517>=0x133*-0x13+0xf65+0x764;}['normalize'](){const _0x59d92a=(0x1de6+-0xcaa+-0x191*0xb)/this['normal']['length']();return this['normal']['mulScalar'](_0x59d92a),this['distance']*=_0x59d92a,this;}['set'](_0x3fa8b8,_0x3a7816,_0x5e9210,_0x17f41d){return this['normal']['set'](_0x3fa8b8,_0x3a7816,_0x5e9210),this['distance']=_0x17f41d,this;}['setFromPoi'+'ntNormal'](_0x1ec93b,_0x662c48){return this['normal']['copy'](_0x662c48),this['distance']=-this['normal']['dot'](_0x1ec93b),this;}}class yx{constructor(){h(this,'planes',[]);for(let _0x954f7c=0x14c9+-0x1*0x508+-0xfc1;_0x954f7c<-0x955*-0x1+0x5be*-0x1+-0x391;_0x954f7c++)this['planes'][_0x954f7c]=new QS();}['clone'](){const _0x2ae5e8=this['constructo'+'r'];return new _0x2ae5e8()['copy'](this);}['copy'](_0x2932aa){for(let _0xed26a3=0x696+-0x12e*-0x5+-0xc7c;_0xed26a3<0x7*0x27f+-0x1725+0x12*0x51;_0xed26a3++)this['planes'][_0xed26a3]['copy'](_0x2932aa['planes'][_0xed26a3]);return this;}['setFromMat'+'4'](_0xce42b3){const [_0x3d6833,_0x2090b2,_0x1e52fa,_0x3cc705,_0x5bd06d,_0x7d8d29,_0x4499ac,_0x14e3e1,_0x5920c7,_0x13fe7d,_0x332d7f,_0x33141b,_0x3f3793,_0x363716,_0xfc2cd3,_0x4ec84b]=_0xce42b3['data'],_0x88afb7=this['planes'];_0x88afb7[-0x1392+-0x71e+0x2*0xd58]['set'](_0x3cc705-_0x3d6833,_0x14e3e1-_0x5bd06d,_0x33141b-_0x5920c7,_0x4ec84b-_0x3f3793)['normalize'](),_0x88afb7[0xa93*-0x1+0x2146*-0x1+0xe9e*0x3]['set'](_0x3cc705+_0x3d6833,_0x14e3e1+_0x5bd06d,_0x33141b+_0x5920c7,_0x4ec84b+_0x3f3793)['normalize'](),_0x88afb7[-0x1b60+0x25*-0x50+0x26f2]['set'](_0x3cc705+_0x2090b2,_0x14e3e1+_0x7d8d29,_0x33141b+_0x13fe7d,_0x4ec84b+_0x363716)['normalize'](),_0x88afb7[0xde4+0xa89+-0x186a]['set'](_0x3cc705-_0x2090b2,_0x14e3e1-_0x7d8d29,_0x33141b-_0x13fe7d,_0x4ec84b-_0x363716)['normalize'](),_0x88afb7[-0xb*-0x371+-0x19*-0x116+-0x7f*0x83]['set'](_0x3cc705-_0x1e52fa,_0x14e3e1-_0x4499ac,_0x33141b-_0x332d7f,_0x4ec84b-_0xfc2cd3)['normalize'](),_0x88afb7[-0x15ae+0x937+0x1*0xc7c]['set'](_0x3cc705+_0x1e52fa,_0x14e3e1+_0x4499ac,_0x33141b+_0x332d7f,_0x4ec84b+_0xfc2cd3)['normalize']();}['containsPo'+'int'](_0x77439e){for(let _0x55112b=0xdbd+0x1f*0x13d+-0x3420;_0x55112b<-0x1*0x1834+-0xc*0x1cf+-0x1*-0x2dee;_0x55112b++){const {normal:_0x3a99bc,distance:_0x1058c4}=this['planes'][_0x55112b];if(_0x3a99bc['dot'](_0x77439e)+_0x1058c4<=0xf1*0x2+0x23ff+0x1*-0x25e1)return!(-0x1a51+-0x23de+0x3e30);}return!(-0x1820+0x5b3*-0x5+0x349f);}['containsSp'+'here'](_0x760bd4){const {center:_0x401c33,radius:_0x3e5c2e}=_0x760bd4;let _0x19e32d=-0x49+-0x191b+0xcb2*0x2;for(let _0x1d2b7d=0x107e+0x2*-0x38f+-0x960;_0x1d2b7d<0x182b+0x1*-0x395+-0x1490;_0x1d2b7d++){const {normal:_0x31691c,distance:_0x1eaef7}=this['planes'][_0x1d2b7d],_0x352750=_0x31691c['dot'](_0x401c33)+_0x1eaef7;if(_0x352750<=-_0x3e5c2e)return 0x1*0x225d+-0x25df+0x382;_0x352750>_0x3e5c2e&&_0x19e32d++;}return _0x19e32d===-0x2d1+-0x153e+0x4d1*0x5?0xf13+-0x1df9+-0x3*-0x4f8:-0x1d04+0x15*-0x18a+0x3d57;}}class Dn{constructor(_0x27a44c,_0x47a7c8){h(this,'origin',new D()),h(this,'direction',D['FORWARD']['clone']()),(_0x27a44c&&this['origin']['copy'](_0x27a44c),_0x47a7c8&&this['direction']['copy'](_0x47a7c8));}['set'](_0x245e33,_0x310848){return this['origin']['copy'](_0x245e33),this['direction']['copy'](_0x310848),this;}['copy'](_0xd803d){return this['set'](_0xd803d['origin'],_0xd803d['direction']);}['clone'](){return new this['constructo'+'r'](this['origin'],this['direction']);}}const yt=0xe*0x1fd+-0xb*-0x6d+-0xb9*0x2d,ue=-0x1fde+0x1*-0x68+0x2047*0x1,ip=-0x1d*-0xdc+-0x203+-0x16e7,rp=0x4eb+0x1d44+-0x3*0xb65,Ft=-0x1*-0x2523+-0x4a*0x8+-0x1169*0x2,vx=-0x3a6*0x2+0x22fc*-0x1+0x2a4a,JS=-0x119c+-0x1a7d+0x2c1d,xx=-0x4b9+0x797+-0x2d9,jh=0x1*-0x1525+-0x2483+0x39ae,Yh=0x3*0x981+-0x11*-0xa8+-0x49*0x8b,fs=-0x2c9+-0x128f*0x2+0x27e7,Tx=-0x1f3a+0x1995+0x5a7,wx=-0x248a+0xe3b*0x2+-0x817*-0x1,Ex=-0x9eb*0x1+0x9f3*0x1+0x2*-0x2,ms=0x2*0xd46+0xf2b*-0x1+-0xb61,lh=0x2031*-0x1+-0x16dd+0x370f,ey=-0x501*0x2+-0xbd6+0x15da,bx=0x5c4+-0x479*-0x2+0x1*-0xeb3,jo=-0x232d+-0xbf9+0x2f27,Yo=-0x1005+-0x1*0x599+0xad*0x20,ch=0x16a5+0x202*0x12+0x55*-0xb1,bt=0x1*-0x187c+-0x201+-0x1a7d*-0x1,pa=-0x1*-0x1d7+-0x489+-0x1*-0x2b3,Fo=-0x2278+-0x2d*-0xc7+-0x81,Ax=0x1*0x1441+-0x21c4+0xd86,Te=-0x31*0x52+0x689+0x929,vt=-0x53*0x7+-0x1*-0x1697+0x1*-0x1451,Kh=0xd*0x167+-0x16*0x5f+0x1*-0xa0f,Zh=0x2e1*0x1+0x1909+0x1be7*-0x1,Qh=-0x1adf+0x1*0x1a9b+0xc*0x6,ma=0x2*0xd6d+-0x65*0x5b+0x912,Cx=0xb46+0x17fc+-0x2342,hh=-0x1*0xc87+-0x1d42+0x29ca,dh=-0x2f7+-0x1*-0x753+-0x22d*0x2,Wf=-0x1*-0x1943+-0x158b+-0x3b5,Px=0x4*-0x9a9+0xa47*0x1+0x1c61,Mx=0x125d+-0x11a5+-0x1*0xb3,Dx=0x65*0x11+-0x212+0x1*-0x49d,Wi=0x1c97+-0x2e*0x40+0xc*-0x16c,$f=0xc90+0x2191+0x7*-0x697,Yi=-0x3*0x96d+0x14c*-0x2+-0x13*-0x1a0,wr=-0x53*-0x2b+0x40*0xf+-0x11af,ty=-0x29*-0xd5+-0x2d4*-0x3+-0x2a99,sy=0x1395+0xf*-0x27+-0x114b,ap=0xc*0x101+-0x77b*-0x1+-0x1*0x1385,Jh=-0x155f+0x10ba+0x4a8,np=0x1307*-0x1+0x2639+0x1eb*-0xa,ed=-0x3a7*0x5+-0xb5*0x35+0x37c1,Cr=-0x7*0x501+0x6e2+0x1c2b,Ne=0x3*0x69b+0x5e1*0x2+-0x1*0x1f8c,td=-0x8c6*0x2+-0x2c4+0x1458,op=0x192e+0x1835*-0x1+0x50*-0x3,vl=-0x1*0x25d2+-0x568+0x2b44,ui=-0x1*-0xd21+0x2*-0x967+0x5b8,nt=-0x1ff4+-0x29b*0x4+0xb5*0x3c,Ye=0x2164+-0x267d+0x1*0x526,Xt=0x78a+0x10a7+-0xa7*0x25,Ji=-0x2*0xe55+0x3f*0xf+-0x2c8*-0x9,$i=0x1b17+-0x21e*-0x3+0x1*-0x2161,sd=-0x1edf+-0x2*0x12d1+0x4492,In=-0x2015+-0x1443+-0x1*-0x346a,lp=-0x1*0xe45+0x19f*-0x1+0xff7,_s=0x2006+0xd01*-0x2+0x17c*-0x4,id=-0x463*-0x8+0x5*0x239+0xf6*-0x30,cp=0x3a*-0x1e+0x16b7+0x1*-0xfd5,hp=0x335*-0x2+0x1419+-0xd98,xl=0x17b*0xa+-0x302*-0x2+-0x14ba,Tl=0x3*-0x10b+0x1*0x5c3+-0x289,rd=0x101*-0x7+0xcd1*-0x3+0x2d94,ad=0x21*0xa9+0x12c+0x96*-0x27,iy=-0x12a5+0x3f*0x8c+-0xfb3,ry=0xb*-0x2b4+-0x144f*0x1+0x3228,ay=0xcf8+-0x1864+0x5c5*0x2,ny=-0xb3b+-0xc3c+-0xbcb*-0x2,dp=0x89*-0x37+-0x1cbb*0x1+0x2*0x1d25,oy=-0x397*0x8+0xe59*-0x1+0x2b32,fp=-0x1012+0x112b+0x1*-0xf7,up=-0x38+0x1*0x21e5+-0x218a,pp=-0x1a72+-0x24d7+0x3f6d,Ki=0x1cd2+0x1*-0xc69+-0x1*0x1044,mp=-0x8ab+0x24da+-0x1c09*0x1,ly=0x131f*0x1+0x6fb*0x2+-0x20ee,_p=-0x7b1*0x1+0x5e7+0x6*0x53,gp=0x1b48+-0xfa6+-0xb79,Sp=0x2017*0x1+0x168+-0x2155,yp=0x61*-0x43+-0x143d+0x269*0x13,vp=-0x45*-0x3+0x2323+-0x13*0x1e2,cy=0xd72+-0x1*-0x7ad+-0x2*0xa79,xp=0x4b5*-0x1+0x6*-0x49d+-0x1*-0x2091,nd=0xa4e+0x214*-0x12+0x1b49,Tp=-0x179d+0x56*0x5c+-0x71b,Ue=-0x1*0x1add+-0x2e6*-0xc+0x56*-0x17,od=-0x122+0x2+-0x1*-0x152,wp=-0x1*0x1459+-0x26cc+-0xc*-0x4f2,Ep=0x39*0x1+0x11*-0x19+0x1a4,bp=0x12*-0x164+-0x63*0x6+-0x5*-0x583,Xf=0x3ad*0x7+-0x1f83*0x1+-0x3b*-0x1a,qf=0x1741*0x1+0x1d75+-0x97*0x59,jf=-0x61*0x11+-0x7*0x134+0xf15,Yf=0xfd1+0x7ee+-0x1782,Kf=-0x709*0x1+0x1*0x100d+-0x8c6*0x1,Zf=-0xa3*-0x5+0x1a13+-0x1d03,hy=-0x18fb+-0x1f9c+0x1*0x38d7,dy=0x1d0a+0x1a1*0xb+-0xc4*0x3d,fy=0x1d0b+0x1c93+-0x2*0x1cae,uy=-0x9*0x329+0x2579+-0x8c5,Qf=0x1f78+-0x112f*0x1+0x61*-0x25,vn=-0x1262+-0x23ac+0x3653*0x1,Nt=new Map([[ty,{'name':'A8','size':0x1,'ldr':!(0x1*-0x904+-0x5*0x127+0xec7)}],[Ep,{'name':'R8','size':0x1,'ldr':!(0x48a+0x1f2e+-0x1*0x23b8)}],[sy,{'name':'L8','size':0x1,'ldr':!(0x11d0+-0x68*0x5+0x14*-0xca)}],[ap,{'name':'LA8','size':0x2,'ldr':!(-0x1c2b+0x6*0xd5+0x172d)}],[bp,{'name':'RG8','size':0x2,'ldr':!(0x1fa3+0x20c1+-0x1*0x4064)}],[Jh,{'name':'RGB565','size':0x2,'ldr':!(0x30b*-0x5+0x1547+-0x10*0x61)}],[np,{'name':'RGBA5551','size':0x2,'ldr':!(-0x1004+-0x35*-0x53+-0x12b)}],[ed,{'name':'RGBA4','size':0x2,'ldr':!(0xa6*0x31+0xdf0+-0x2db6)}],[Cr,{'name':'RGB8','size':0x4,'ldr':!(-0x1*0x43c+-0xd73+0x11af)}],[Ne,{'name':'RGBA8','size':0x4,'ldr':!(-0xf*-0xf+-0xb67*0x1+0xa86),'srgbFormat':_s}],[od,{'name':'R16F','size':0x2}],[wp,{'name':'RG16F','size':0x4}],[ui,{'name':'RGB16F','size':0x8}],[nt,{'name':'RGBA16F','size':0x8}],[Ye,{'name':'RGB32F','size':0x10}],[Xt,{'name':'RGBA32F','size':0x10}],[Ji,{'name':'R32F','size':0x4}],[$i,{'name':'DEPTH','size':0x4}],[vn,{'name':'DEPTH16','size':0x2}],[sd,{'name':'DEPTHSTENC'+'IL','size':0x4}],[In,{'name':'111110F','size':0x4}],[lp,{'name':'SRGB8','size':0x4,'ldr':!(-0x477+0xbf*-0x19+0x171e),'srgb':!(-0x1c98+-0x4a6+-0x109f*-0x2)}],[_s,{'name':'SRGBA8','size':0x4,'ldr':!(-0x7e1+-0x1934*-0x1+-0x1153),'srgb':!(0x191a+-0x55*-0x2b+-0x2761)}],[ny,{'name':'BGRA8','size':0x4,'ldr':!(0x51*-0x35+-0x1a26*-0x1+-0x961)}],[hy,{'name':'SBGRA8','size':0x4,'ldr':!(0x1c*-0x159+-0x5*-0x4fd+-0x83*-0x19),'srgb':!(-0x7*-0x34f+-0x547*-0x3+0x1b2*-0x17)}],[td,{'name':'DXT1','blockSize':0x8,'ldr':!(0x45d*-0x5+-0x328*-0x5+-0x5*-0x135),'srgbFormat':Xf}],[op,{'name':'DXT3','blockSize':0x10,'ldr':!(0x358*0x8+0x21e0+0x20*-0x1e5),'srgbFormat':qf}],[vl,{'name':'DXT5','blockSize':0x10,'ldr':!(-0x1159+-0x133*-0x1f+-0x13d4),'srgbFormat':jf}],[id,{'name':'ETC1','blockSize':0x8,'ldr':!(0x853*0x3+-0x1fd9+0x6e0)}],[cp,{'name':'ETC2_RGB','blockSize':0x8,'ldr':!(-0x1d7d+0x1125+0x1*0xc58),'srgbFormat':Yf}],[hp,{'name':'ETC2_RGBA','blockSize':0x10,'ldr':!(0x1c54+-0x1b*0x137+0x479),'srgbFormat':Kf}],[xl,{'name':'PVRTC_2BPP'+'_RGB_1','ldr':!(-0x3f*-0x6b+-0x3*-0x91d+-0x35ac),'blockSize':0x8}],[Tl,{'name':'PVRTC_2BPP'+'_RGBA_1','ldr':!(-0x3d*-0x53+0x5bf*0x1+-0x1986),'blockSize':0x8}],[rd,{'name':'PVRTC_4BPP'+'_RGB_1','ldr':!(0xb66*-0x1+-0x13*0x1fd+0x312d),'blockSize':0x8}],[ad,{'name':'PVRTC_4BPP'+'_RGBA_1','ldr':!(-0xdb+0xb65+-0x1*0xa8a),'blockSize':0x8}],[iy,{'name':'ASTC_4x4','blockSize':0x10,'ldr':!(0x1*-0xc55+0xe4*0x18+-0x90b),'srgbFormat':Zf}],[ry,{'name':'ATC_RGB','blockSize':0x8,'ldr':!(0x4*-0x40d+-0x980+-0x2f*-0x8c)}],[ay,{'name':'ATC_RGBA','blockSize':0x10,'ldr':!(-0x1*0xc6d+-0x741*-0x4+-0x1097)}],[dy,{'name':'BC6H_RGBF','blockSize':0x10}],[fy,{'name':'BC6H_RGBUF','blockSize':0x10}],[uy,{'name':'BC7_RGBA','blockSize':0x10,'ldr':!(-0x1acc+0x2bd*0xb+-0x353*0x1),'srgbFormat':Qf}],[Xf,{'name':'DXT1_SRGB','blockSize':0x8,'ldr':!(0x1a9d+0xe84+-0x2921),'srgb':!(-0x2302*-0x1+0x593*0x5+-0x3ee1*0x1)}],[qf,{'name':'DXT3_SRGBA','blockSize':0x10,'ldr':!(-0x1825+-0x3*-0x803+0x1c),'srgb':!(-0x498+0x123*0xb+-0x7e9)}],[jf,{'name':'DXT5_SRGBA','blockSize':0x10,'ldr':!(0x911+-0x20e9+0x17d8),'srgb':!(0x3be+0x1e9d*-0x1+0x1adf)}],[Yf,{'name':'ETC2_SRGB','blockSize':0x8,'ldr':!(-0x5c1+0x26d1+0x170*-0x17),'srgb':!(-0x222c+0x1fa0*0x1+0x28c)}],[Kf,{'name':'ETC2_SRGBA','blockSize':0x10,'ldr':!(-0x1d*0xc2+-0x1b9a*0x1+-0x14e*-0x26),'srgb':!(0x1998+-0x1*0x447+-0x71b*0x3)}],[Zf,{'name':'ASTC_4x4_S'+'RGB','blockSize':0x10,'ldr':!(-0x251d*-0x1+0x128e+0x37ab*-0x1),'srgb':!(-0x1b3a+0x1*0x773+0x13c7)}],[Qf,{'name':'BC7_SRGBA','blockSize':0x10,'ldr':!(0xcee*0x3+0x62*-0x2c+0x2*-0xaf9),'srgb':!(-0xc6f*-0x1+-0x1*0x321+-0x4a7*0x2)}],[dp,{'name':'R8I','size':0x1,'isInt':!(-0x1*0x1e7a+-0x1*-0xd1d+0x7f*0x23)}],[oy,{'name':'R8U','size':0x1,'isInt':!(-0x60*0x3a+0x209a+-0xada*0x1)}],[fp,{'name':'R16I','size':0x2,'isInt':!(0x115b+0x2522+-0x367d)}],[up,{'name':'R16U','size':0x2,'isInt':!(-0x1683*0x1+0x247+0x143c)}],[pp,{'name':'R32I','size':0x4,'isInt':!(0x1066*-0x1+0x146f+0x1*-0x409)}],[Ki,{'name':'R32U','size':0x4,'isInt':!(0xe97+0x2*0xa63+0x337*-0xb)}],[mp,{'name':'RG8I','size':0x2,'isInt':!(-0x1ea0+-0x1d96+0x3c36)}],[ly,{'name':'RG8U','size':0x2,'isInt':!(-0x8d6*0x1+0x1*0x1d71+0xd3*-0x19)}],[_p,{'name':'RG16I','size':0x4,'isInt':!(0x1*-0x11c8+0x1d3b+0x1*-0xb73)}],[gp,{'name':'RG16U','size':0x4,'isInt':!(-0x33+0xc5e*0x1+-0xc2b)}],[Sp,{'name':'RG32I','size':0x8,'isInt':!(-0x622+-0x18e7+0x5*0x635)}],[yp,{'name':'RG32U','size':0x8,'isInt':!(-0x36f+0xc88+-0x919)}],[vp,{'name':'RGBA8I','size':0x4,'isInt':!(0x2393*-0x1+-0x2*0x1181+-0x1787*-0x3)}],[cy,{'name':'RGBA8U','size':0x4,'isInt':!(0x2e*-0x3c+-0x1783+0x224b)}],[xp,{'name':'RGBA16I','size':0x8,'isInt':!(-0x8ef+-0x123c+0x1b2b)}],[nd,{'name':'RGBA16U','size':0x8,'isInt':!(-0x965+0x1ac3+-0xab*0x1a)}],[Tp,{'name':'RGBA32I','size':0x10,'isInt':!(-0x647+0xa63*-0x1+0x10aa)}],[Ue,{'name':'RGBA32U','size':0x10,'isInt':!(-0x9*0x1f6+-0x22*0x124+0x386e)}]]),Ix=_0x824d42=>{var _0x1798ba;return((_0x1798ba=Nt['get'](_0x824d42))==null?void(0xd38+-0x9f8+-0x340):_0x1798ba['blockSize'])!==void(0x2611+0x1a13+0x1*-0x4024);},fh=_0x457284=>{var _0x279661;return((_0x279661=Nt['get'](_0x457284))==null?void(0x1fff+0x8*0x3a0+0xf*-0x411):_0x279661['srgb'])===!(-0x1*-0xf5f+-0x1f2e*0x1+0xfcf);},dn=_0x242a26=>{var _0x4eb975;return((_0x4eb975=Nt['get'](_0x242a26))==null?void(0x45*0x2f+0xef+-0xd9a):_0x4eb975['isInt'])===!(0xd92+-0x230e*0x1+0x113*0x14);},ld=_0x19430f=>{var _0x2885a6;return((_0x2885a6=Nt['get'](_0x19430f))==null?void(-0x117+0x13*0x131+-0x1c*0xc5):_0x2885a6['srgbFormat'])||_0x19430f;},Lx=_0x2341a6=>{for(const [_0x48ce3c,_0x10acd9]of Nt)if(_0x10acd9['srgbFormat']===_0x2341a6)return _0x48ce3c;return _0x2341a6;},py=_0x1317f4=>{const _0x567341=Nt['get'](_0x1317f4);return!!(_0x567341!=null&&_0x567341['ldr']&&!(_0x567341!=null&&_0x567341['srgb']));},my=_0x46d6e2=>{switch(_0x46d6e2){case Ji:case Ye:case Xt:return Float32Array;case pp:case Sp:case Tp:return Int32Array;case Ki:case yp:case Ue:return Uint32Array;case fp:case _p:case xp:return Int16Array;case bp:case up:case gp:case nd:case Jh:case np:case ed:case od:case wp:case ui:case nt:return Uint16Array;case dp:case mp:case vp:return Int8Array;default:return Uint8Array;}},cd=-0x10a7+-0x1145*-0x2+0x1*-0x11e3,hd=-0x25*-0x4+0x217*0x11+-0x241a,_y=0x173e+-0x4*0x7c+-0x154c,gy=-0x1e74+-0x21f4+0x1579*0x3,js=0xb7e+-0x5e7*-0x4+-0x3e6*0x9,Er=-0xc1*0x23+-0x1087+-0x17b*-0x1d,oa=0x1*0xf05+-0x123c+-0x1*-0x33d,Me='POSITION',gs='NORMAL',yi='TANGENT',gi='BLENDWEIGH'+'T',us='BLENDINDIC'+'ES',Wt='COLOR',zm='TEXCOORD',is='TEXCOORD0',ba='TEXCOORD1',wl='TEXCOORD2',El='TEXCOORD3',bl='TEXCOORD4',Al='TEXCOORD5',Cl='TEXCOORD6',Pl='TEXCOORD7',Jf='ATTR0',uh='ATTR1',Ap='ATTR2',Cp='ATTR3',Pp='ATTR4',Rx='ATTR5',Ox='ATTR6',Fx='ATTR7',Ko='ATTR8',Zo='ATTR9',Nx='ATTR10',Mp='ATTR11',Dp='ATTR12',ph='ATTR13',Ip='ATTR14',Ln='ATTR15',Sy=-0x1*-0xadb+0x1*-0x23e3+0xdd*0x1d,xn=-0x124d+-0x2b*0x9+0x1*0x13d0,kx=-0x3dd*0x1+-0xb16*-0x2+-0x1*0x124d,Ux=-0x26ad+0x120+0x2590,Bx=-0x20fc+-0x16*-0x1ab+-0x69*0x9,$l=0xbaa+0x201f+-0x1*0x2bc9,yy=-0x14bd*-0x1+-0x1*0x200c+0x1*0xb50,Od=0xa75+-0x100*-0x2+-0xc73,Ds='default',Zi='rgbm',mh='rgbe',Qo='rgbp',Jo='swizzleGGG'+'R',eu=-0x18bb*-0x1+-0x1*-0x71d+-0x1fd7,Pr=-0x82d+-0x2*0xe0c+-0x25*-0xfb,vy=0x3*0x593+0x115*-0x1+0x1*-0xfa1,xy='2d',zx=0xcd3+-0x19*0x10e+0xd8b,Vx='none',tu='cube',Vm='equirect',Gx='octahedral',Fe='glsl',it='wgsl',dd=-0x7db*0x4+0x1148+0xe24,la=-0x1a3*-0x4+-0x2*-0x107e+-0x2787,fd=0x2230+0x16ef+-0x391d*0x1,Ml=-0x2041*-0x1+-0x5f8*0x4+0x85e*-0x1,Ty=-0x135*-0x14+0x41*0x99+-0x3ef9*0x1,el=0x449*-0x6+-0x17b8+0x3173,Ve=0x1013+0x3ad+-0x13ba,Tn=-0x4d2+-0xc53+0x1125,_a=-0x63f+-0x36f+0x43*0x25,Xs=0x30b*0xb+-0x1e8a+-0x2ed,ga=0x1d1d*-0x1+0x27*0x8+0x1be8,ds=0x322+0x1886+-0x1ba4,Rn=0x25c*0x2+0xa*0x2dc+0xb19*-0x3,ca=0x1052+-0x302+0x1b*-0x7e,ha=0x14d7+0x1076+-0x1a*0x16f,da=0x1*-0x955+0xfd4+0x677*-0x1,tl=0x1756*-0x1+-0xc26+0x2385,sl=0x41*-0x1d+0x39*-0x1b+-0x22*-0x65,il=0x24cd+-0x3*0xa91+-0x50f,_h=0x1*0xdb2+0x1f1a+0xb3*-0x40,On=0x4*0x100+-0xf9a*-0x2+-0x2327,li=0x2b9+0x55a+0x805*-0x1,Hx=-0x22a2+0x23da+-0x63*0x3,Wx=-0x14ff*0x1+0x3d6*-0x5+0x1*0x283d,ud=0xf*-0x17d+0x4a3+0x11c1,$x=-0x1748+0x1c4f+-0x1*0x4f5,Xx=-0xdb*-0x2b+0x1*0x1311+0x1*-0x37c7,qx=0x39*0x79+-0x1a32*0x1+-0xab,pd=-0x362*-0x7+-0x950+-0x35*0x45,md=-0x3fa*-0x1+0xd5+-0x4b9,Lp=0xc70+0x1d0a+0x5*-0x847,wy=0x170c+0x5*-0x67d+0x15b*0x7,jx=-0x1*-0x24da+-0x1228+-0x1299,Fn=0xd8*-0x29+-0x128b+0x353d,Nn=0xe82+-0x7ae*0x1+-0x6b9,kn=-0x1965+0x5c9+0x13b8*0x1,Un=0xb*-0x18d+0xf56+0xeb*0x2,Bn=-0x709*0x2+0xed1*-0x1+0x1d01,_d=-0x23e6+-0x521+0x2926,gd=-0x1959+-0x1*0xc65+-0x106*-0x25,zn=-0x1e71+0x22*0x11d+-0x748,Sd=-0x6*-0x312+-0xdc2+-0x74*0xa,yd=-0x2315*0x1+-0xcf5+0x302d,Vn=-0x1*-0x205d+0xc82+-0x2cbb,vd=-0x1*-0x80f+-0xdc+-0x7*0x102,xd=-0x1b51+0x50e*-0x1+0x2085,gh=-0x1748+-0x7e6+-0xd*-0x269,Rp=0x16f7+0x1697+-0x2d66,Op=0xd3*-0x7+-0x107*-0x1+0x4e7,Yx=0x1*-0x651+-0x53*0x4c+0x1f1f,Kx=0x142f*0x1+0x3e*-0x8f+0xe9e,Zx=-0x1dfd+0x2*-0xe1d+0x3a63,Qx=0xc3b+0xc17+0x373*-0x7,Jx=0x7*-0x74+-0x18*-0x3d+-0x3*0xca,eT=-0x23e0+-0x2fb*-0x1+0x2114,tT=-0x5e+-0x1f1e+0x1fac*0x1,sT=0x1c*0x11c+0x7ed+-0x26cc,Ey=['bool','int','float','vec2','vec3','vec4','ivec2','ivec3','ivec4','bvec2','bvec3','bvec4','mat2','mat3','mat4','sampler2D','samplerCub'+'e','','sampler2DS'+'hadow','samplerCub'+'eShadow','sampler3D','','','','','sampler2DA'+'rray','uint','uvec2','uvec3','uvec4','','','','','','','','','','','','','isampler2D','usampler2D','isamplerCu'+'be','usamplerCu'+'be','isampler3D','usampler3D','isampler2D'+'Array','usampler2D'+'Array'],iT=[['bool'],['i32'],['f32'],['vec2f','vec2<f32>'],['vec3f','vec3<f32>'],['vec4f','vec4<f32>'],['vec2i','vec2<i32>'],['vec3i','vec3<i32>'],['vec4i','vec4<i32>'],['vec2<bool>'],['vec3<bool>'],['vec4<bool>'],['mat2x2f','mat2x2<f32'+'>'],['mat3x3f','mat3x3<f32'+'>'],['mat4x4f','mat4x4<f32'+'>'],['texture_2d'+'<f32>'],['texture_cu'+'be<f32>'],['array<f32>'],['texture_de'+'pth_2d'],['texture_de'+'pth_cube'],['texture_3d'+'<f32>'],['array<vec2'+'<f32>>'],['array<vec3'+'<f32>>'],['array<vec4'+'<f32>>'],['array<mat4'+'x4<f32>>'],['texture_2d'+'_array<f32'+'>'],['u32'],['vec2u','vec2<u32>'],['vec3u','vec3<u32>'],['vec4u','vec4<u32>'],['array<i32>'],['array<u32>'],['array<bool'+'>'],['array<vec2'+'i>','array<vec2'+'<i32>>'],['array<vec2'+'u>','array<vec2'+'<u32>>'],['array<vec2'+'b>','array<vec2'+'<bool>>'],['array<vec3'+'i>','array<vec3'+'<i32>>'],['array<vec3'+'u>','array<vec3'+'<u32>>'],['array<vec3'+'b>','array<vec3'+'<bool>>'],['array<vec4'+'i>','array<vec4'+'<i32>>'],['array<vec4'+'u>','array<vec4'+'<u32>>'],['array<vec4'+'b>','array<vec4'+'<bool>>'],['texture_2d'+'<i32>'],['texture_2d'+'<u32>'],['texture_cu'+'be<i32>'],['texture_cu'+'be<u32>'],['texture_3d'+'<i32>'],['texture_3d'+'<u32>'],['texture_2d'+'_array<i32'+'>'],['texture_2d'+'_array<u32'+'>']],rT=new Map();iT['forEach']((_0x2a358b,_0x50ed98)=>{_0x2a358b['forEach'](_0x103c42=>rT['set'](_0x103c42,_0x50ed98));});const aT='webgl2',Fp=0xc89*0x2+-0x10bf*-0x2+-0x3a8f,by=-0x982+0x1f*-0x119+0x2b8b,nT=0x23e8+0xe00*-0x2+-0xa*0xca,oT='ldr',Ay=-0xeb2+0x251e+-0x3*0x779,Cy=0xbf3*-0x1+-0xd97+0x198c,Py=-0x10aa+0x1614+0x2*-0x2b3,My=0xf1c+-0x25d9*-0x1+-0x31d*0x11,Dy=-0x396+-0x195f+0x13*0x187,Iy=0x21eb+0x19ae+-0x3b79,Ly=-0x1*0x1a7a+-0xa9*-0xb+0x1*0x1377,Ry=0x1*-0x989+-0x167e+0x2f5*0xb,lT=-0x1bc1+-0x2*-0xb6a+-0x17b*-0x4,rl=-0x13c8+0x27b+-0x67*-0x2b,Oy=0x120e*-0x1+-0x2691+0x12e0*0x3,su=0xc39+-0x148+0x9*-0x137,Np='default',wn=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Uint16Array],No=[-0x510+0x145c*-0x1+0x196d,0x1*-0xa63+-0x1138+0x4c*0x5d,0x795*0x2+0x273*0x1+-0x119b,-0x1d5+0x1b*0x8f+-0x1*0xd3e,-0x1*0x696+-0x3*-0x286+0x8*-0x1f,0x1*-0x1faf+0xe*-0x9a+0x281f,-0x1d7*0x3+0x2663+-0x20da,-0x10*-0x83+0x23ee+-0x2c1c],cT=['INT8','UINT8','INT16','UINT16','INT32','UINT32','FLOAT32','FLOAT16'],Sh=[Uint8Array,Uint16Array,Uint32Array],hT=[0xb*0x7d+0x55d*0x7+-0x2ae9,0x968+-0xcfe*-0x2+-0x2362,-0x2517+-0x1d62+-0x1*-0x427d],Fy=new Map([['float','f32'],['vec2','vec2f'],['vec3','vec3f'],['vec4','vec4f'],['int','i32'],['ivec2','vec2i'],['ivec3','vec3i'],['ivec4','vec4i'],['uint','u32'],['uvec2','vec2u'],['uvec3','vec3u'],['uvec4','vec4u']]),Le={};Le[Me]=-0x196+-0x17a0+0x1936,Le[gs]=-0x1*0x138e+-0x3e2+0x1771,Le[gi]=-0x1193*-0x1+0x1*0x70+-0xb*0x1a3,Le[us]=-0x622+0x23f5+-0x1dd0,Le[Wt]=0x8*-0x44f+-0x1*0x2539+0x47b5,Le[is]=0x1a4c+0x2*0xa7a+-0x6b*0x71,Le[ba]=-0x315*-0xb+-0x18ea+-0x3*0x2fd,Le[wl]=0x2497*0x1+-0xf59+0x1537*-0x1,Le[El]=-0xed2+0xc3b+0x3d*0xb,Le[bl]=0x86e+-0x22*-0x91+-0x1ba7,Le[Al]=-0x1*-0xc1b+0xe6d*0x2+-0x28eb,Le[Cl]=0xdf*0x29+0x5*0x57a+-0x3f0e,Le[Pl]=0x1ad4+0x83f*-0x1+-0x1289,Le[yi]=0x41*-0x2f+0x2a2+0x2*0x4ad,Le[Jf]=-0x1*-0x1757+0x3*0x94d+-0x333e,Le[uh]=0x19ed+-0x13c4+0x18a*-0x4,Le[Ap]=-0x219*-0xb+0x16f*0x18+-0x3979,Le[Cp]=0x21b9+-0x59*-0x6f+-0x484d,Le[Pp]=0x22*0x49+0x2*-0x336+-0x342,Le[Rx]=-0x32*-0x7f+-0x971*-0x1+-0x223a,Le[Ox]=-0x1263+-0x2621+0x1*0x388a,Le[Fx]=-0xb7b+0x1864+-0xce2,Le[Ko]=0x631*-0x4+-0x4d1+0x13*0x18f,Le[Zo]=0x246a+-0x1ca9+-0x26*0x34,Le[Nx]=0x6c4*-0x4+-0x1b3a+0x1*0x3654,Le[Mp]=-0x29*-0xcd+0x2d9+-0x23a3,Le[Dp]=-0x10b1+0x2c5*-0x3+0x190c,Le[ph]=0x416*0x1+0xa22+0xe2b*-0x1,Le[Ip]=0x2*0x7cd+0x2629+-0x35b5*0x1,Le[Ln]=-0x1369+0x2207+-0xe8f;const mr=class mr{static['clearGpuMa'+'rkers'](){mr['markers']['length']=0x987*0x4+0x231b+0x1*-0x4937;}static['pushGpuMar'+'ker'](_0x1e5a70,_0x59b09f){mr['markers']['push'](_0x59b09f),_0x1e5a70['pushMarker'](_0x59b09f);}static['popGpuMark'+'er'](_0x113b59){mr['markers']['length']&&mr['markers']['pop'](),_0x113b59['popMarker']();}static['toString'](){return mr['markers']['join']('\x20|\x20');}};h(mr,'markers',[]);let Q=mr,dT=0xb*-0x38d+-0x115*0xb+0x4a2*0xb;class Td{constructor(_0x5a7b50,_0x4e0c2a){h(this,'slot',-(0x1823+-0x14b4+-0x36e)),h(this,'scopeId',null),(this['name']=_0x5a7b50,this['visibility']=_0x4e0c2a);}}class kp extends Td{}class fT extends Td{constructor(_0x3c332b,_0x34ed35,_0x4bbd9a=!(-0x20db*-0x1+-0x73c*-0x1+0x140b*-0x2)){super(_0x3c332b,_0x34ed35),h(this,'format',''),(this['readOnly']=_0x4bbd9a,w['assert'](_0x4bbd9a||!(_0x34ed35&Fp),'Storage\x20bu'+'ffer\x20can\x20o'+'nly\x20be\x20use'+'d\x20in\x20read-'+'only\x20mode\x20'+'in\x20SHADERS'+'TAGE_VERTE'+'X.'));}}class Gm extends Td{constructor(_0x3c8098,_0x5a00c3,_0x2400d0=xy,_0x52eab3=zx,_0x65db1=!(0x1b6b+-0x1f99+0x42e),_0x166fb8=null){super(_0x3c8098,_0x5a00c3),this['textureDim'+'ension']=_0x2400d0,this['sampleType']=_0x52eab3,this['hasSampler']=_0x65db1,this['samplerNam'+'e']=_0x166fb8??_0x3c8098+'_sampler';}}class uT extends Td{constructor(_0x41a7e1,_0x36b3be=Ne,_0x3e4277=xy,_0x478b21=!(-0x17b6+0x1*-0xfd9+-0x278f*-0x1),_0x3b0afd=!(0x15b9*-0x1+0x107*0x17+-0x1e7)){super(_0x41a7e1,nT),this['format']=_0x36b3be,this['textureDim'+'ension']=_0x3e4277,this['write']=_0x478b21,this['read']=_0x3b0afd;}}class Ny{constructor(_0x12d012,_0xfceb74){h(this,'uniformBuf'+'ferFormats',[]),h(this,'textureFor'+'mats',[]),h(this,'storageTex'+'tureFormat'+'s',[]),h(this,'storageBuf'+'ferFormats',[]),(this['id']=dT++,Ea['setName'](this,'BindGroupF'+'ormat_'+this['id']),w['assert'](_0xfceb74));let _0x4f6726=0x504*0x2+0x26*-0x49+-0x1*-0xce;_0xfceb74['forEach'](_0x227fee=>{_0x227fee['slot']=_0x4f6726++,_0x227fee instanceof Gm&&_0x227fee['hasSampler']&&_0x4f6726++,_0x227fee instanceof kp?this['uniformBuf'+'ferFormats']['push'](_0x227fee):_0x227fee instanceof Gm?this['textureFor'+'mats']['push'](_0x227fee):_0x227fee instanceof uT?this['storageTex'+'tureFormat'+'s']['push'](_0x227fee):_0x227fee instanceof fT?this['storageBuf'+'ferFormats']['push'](_0x227fee):w['assert']('Invalid\x20bi'+'nd\x20format',_0x227fee);}),this['device']=_0x12d012;const _0x1d5bf8=_0x12d012['scope'];this['bufferForm'+'atsMap']=new Map(),this['uniformBuf'+'ferFormats']['forEach']((_0x401cf7,_0x55a4b6)=>this['bufferForm'+'atsMap']['set'](_0x401cf7['name'],_0x55a4b6)),this['textureFor'+'matsMap']=new Map(),this['textureFor'+'mats']['forEach']((_0x1c6f98,_0xdfd4c)=>{this['textureFor'+'matsMap']['set'](_0x1c6f98['name'],_0xdfd4c),_0x1c6f98['scopeId']=_0x1d5bf8['resolve'](_0x1c6f98['name']);}),this['storageTex'+'tureFormat'+'sMap']=new Map(),this['storageTex'+'tureFormat'+'s']['forEach']((_0x5e919d,_0x551603)=>{this['storageTex'+'tureFormat'+'sMap']['set'](_0x5e919d['name'],_0x551603),_0x5e919d['scopeId']=_0x1d5bf8['resolve'](_0x5e919d['name']);}),this['storageBuf'+'ferFormats'+'Map']=new Map(),this['storageBuf'+'ferFormats']['forEach']((_0x28cad4,_0x5d4324)=>{this['storageBuf'+'ferFormats'+'Map']['set'](_0x28cad4['name'],_0x5d4324),_0x28cad4['scopeId']=_0x1d5bf8['resolve'](_0x28cad4['name']);}),this['impl']=_0x12d012['createBind'+'GroupForma'+'tImpl'](this),w['trace'](K0,'Alloc:\x20Id\x20'+this['id']+(',\x20while\x20re'+'ndering\x20[')+Q['toString']()+']',this);}['destroy'](){this['impl']['destroy']();}['getTexture'](_0x2d9ac4){const _0x44dcc8=this['textureFor'+'matsMap']['get'](_0x2d9ac4);return _0x44dcc8!==void(0x48b+0xb*0x269+-0x1f0e)?this['textureFor'+'mats'][_0x44dcc8]:null;}['getStorage'+'Texture'](_0x119d4d){const _0x17410e=this['storageTex'+'tureFormat'+'sMap']['get'](_0x119d4d);return _0x17410e!==void(-0x1b86+0x4*-0x1c4+0x1*0x2296)?this['storageTex'+'tureFormat'+'s'][_0x17410e]:null;}['loseContex'+'t'](){}}class Kt{constructor(){h(this,'_cache',new Map());}['get'](_0x191cdb,_0x56704e){return this['_cache']['has'](_0x191cdb)||(this['_cache']['set'](_0x191cdb,_0x56704e()),_0x191cdb['on']('destroy',()=>{this['remove'](_0x191cdb);}),_0x191cdb['on']('devicelost',()=>{var _0x5aa6ec,_0x41ee77;(_0x41ee77=(_0x5aa6ec=this['_cache']['get'](_0x191cdb))==null?void(0x2389+0xca8+0x1*-0x3031):_0x5aa6ec['loseContex'+'t'])==null||_0x41ee77['call'](_0x5aa6ec,_0x191cdb);})),this['_cache']['get'](_0x191cdb);}['remove'](_0x191010){var _0x1002cc,_0x82e516;(_0x82e516=(_0x1002cc=this['_cache']['get'](_0x191010))==null?void(0x1*-0xde6+-0x1273*-0x1+0x5*-0xe9):_0x1002cc['destroy'])==null||_0x82e516['call'](_0x1002cc,_0x191010),this['_cache']['delete'](_0x191010);}}class Xi{static['calcLevelD'+'imension'](_0x3cbd06,_0x526a8d){return Math['max'](_0x3cbd06>>_0x526a8d,-0x150b+-0x2302*0x1+-0x15e*-0x29);}static['calcMipLev'+'elsCount'](_0x46e7c0,_0xda57d8,_0x2e0bd3=0x477*0x5+0xf*-0x1bf+0x3df*0x1){return 0x15*0x191+-0x14e5*0x1+-0xbff+Math['floor'](Math['log2'](Math['max'](_0x46e7c0,_0xda57d8,_0x2e0bd3)));}static['calcLevelG'+'puSize'](_0x5c9602,_0x24cdc4,_0x2b5a0c,_0x65bf8){var _0x2e8792;const _0xff1522=Nt['get'](_0x65bf8);w['assert'](_0xff1522!==void(-0x6b*-0xf+-0x2605+0x1fc0),'Invalid\x20pi'+'xel\x20format'+'\x20'+_0x65bf8);const _0xefc4a7=((_0x2e8792=Nt['get'](_0x65bf8))==null?void(0x2121+0x2*0xb35+-0x378b):_0x2e8792['size'])??0x1fe6+0x1*0x19d+-0x2183;if(_0xefc4a7>-0x597+-0x9ae+0x3*0x517)return _0x5c9602*_0x24cdc4*_0x2b5a0c*_0xefc4a7;const _0x2135e2=_0xff1522['blockSize']??0x1*-0xf31+-0x184b+0x277c;let _0x2233ca=Math['floor']((_0x5c9602+(0x1099+-0x1706+0x19c*0x4))/(0x2491+-0xbd9+-0x7c*0x33));const _0x50ed43=Math['floor']((_0x24cdc4+(-0x1a76+0x2*0x125c+0xa3f*-0x1))/(-0x17c1*-0x1+-0x13e9+-0x3d4)),_0x212241=Math['floor']((_0x2b5a0c+(-0x1c54+-0xce+0x1d25))/(0x1806+0x268c+0x3*-0x14da));return(_0x65bf8===xl||_0x65bf8===Tl)&&(_0x2233ca=Math['max'](Math['floor'](_0x2233ca/(-0x25e7+-0xb82+0x316b)),-0xf72+0x24e*0xf+-0x131f)),_0x2233ca*_0x50ed43*_0x212241*_0x2135e2;}static['calcGpuSiz'+'e'](_0x2a5c6a,_0x3ba880,_0x5d5449,_0x3929,_0x2b0b07,_0x366704){let _0xf6dd92=0x6e5*-0x1+-0x6f2+0xdd7;for(;_0xf6dd92+=Xi['calcLevelG'+'puSize'](_0x2a5c6a,_0x3ba880,_0x5d5449,_0x3929),!(!_0x2b0b07||_0x2a5c6a===0x1*0x8aa+-0x236c+0x11*0x193&&_0x3ba880===-0x2265+0xe47+-0x3*-0x6b5&&_0x5d5449===-0x159d*-0x1+-0x1*-0xe1+0x3*-0x77f);)_0x2a5c6a=Math['max'](_0x2a5c6a>>0xe5e+-0x2304+0x14a7*0x1,0x189b+-0x9e6*0x2+-0x4ce),_0x3ba880=Math['max'](_0x3ba880>>-0x239a+-0xb5c+0x2ef7*0x1,0x1d11+-0x55f+-0x17b1),_0x5d5449=Math['max'](_0x5d5449>>0x1120+0x2e*-0x1+-0x10f1,0xe60+-0x97*0x11+-0x458);return _0xf6dd92*(_0x366704?-0x1c53+0x2145+0xd2*-0x6:0xa*-0x92+0x767+-0x1b2);}}let pT=0x1943+-0x1696+0x89*-0x5;class _e{constructor(_0x45425b,_0xc322de={}){h(this,'name'),h(this,'_gpuSize',-0x111*0x3+-0x1*-0xeb0+-0xb7d),h(this,'id',pT++),h(this,'_invalid',!(0x436+0x126d+-0x16a2*0x1)),h(this,'_lockedLev'+'el',-(0x110d+-0x19a8*0x1+0x89c)),h(this,'_lockedMod'+'e',$l),h(this,'renderVers'+'ionDirty',0x2549+-0x7b9*0x3+-0xe1e),h(this,'_storage',!(0xb*-0x20b+-0x128e+-0x194*-0x1a)),h(this,'_numLevels',-0x20a2+-0x207*-0xb+0xa55),h(this,'_numLevels'+'Requested');var _0x7ed805;this['device']=_0x45425b,w['assert'](this['device'],'Texture\x20co'+'nstructor\x20'+'requires\x20a'+'\x20graphicsD'+'evice\x20to\x20b'+'e\x20valid'),w['assert'](!_0xc322de['width']||Number['isInteger'](_0xc322de['width']),'Texture\x20wi'+'dth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0xc322de),w['assert'](!_0xc322de['height']||Number['isInteger'](_0xc322de['height']),'Texture\x20he'+'ight\x20must\x20'+'be\x20an\x20inte'+'ger\x20number'+',\x20got',_0xc322de),w['assert'](!_0xc322de['depth']||Number['isInteger'](_0xc322de['depth']),'Texture\x20de'+'pth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0xc322de),this['name']=_0xc322de['name']??'',this['_width']=Math['floor'](_0xc322de['width']??-0x13*0x1d4+-0x240d+0x46cd),this['_height']=Math['floor'](_0xc322de['height']??0x8e9+0x5*0xf1+0x2*-0x6cd),this['_format']=_0xc322de['format']??Ne,this['_compresse'+'d']=Ix(this['_format']),this['_integerFo'+'rmat']=dn(this['_format']),this['_integerFo'+'rmat']&&(_0xc322de['minFilter']=Te,_0xc322de['magFilter']=Te),this['_volume']=_0xc322de['volume']??!(-0xb7*-0x2b+0x19bb+0xb4b*-0x5),this['_depth']=Math['floor'](_0xc322de['depth']??0x16f*0xc+-0x239f+-0x106*-0x12),this['_arrayLeng'+'th']=Math['floor'](_0xc322de['arrayLengt'+'h']??-0x1e7*0x1+-0x1ee+0x9*0x6d),this['_storage']=_0xc322de['storage']??!(0xc40+-0x168e+0xa4f),this['_cubemap']=_0xc322de['cubemap']??!(0x84f+0x1c2e+0x14*-0x1d3),this['_flipY']=_0xc322de['flipY']??!(-0x18e9+0x1e0d+-0x523),this['_premultip'+'lyAlpha']=_0xc322de['premultipl'+'yAlpha']??!(-0x123b+0x1b0+0x108c),this['_mipmaps']=_0xc322de['mipmaps']??!(0x79d*0x1+-0x4*-0x141+-0xca1),this['_numLevels'+'Requested']=_0xc322de['numLevels'],_0xc322de['numLevels']!==void(0x32*0x4+0x26ca+0x3f5*-0xa)&&(this['_numLevels']=_0xc322de['numLevels']),this['_updateNum'+'Level'](),this['_minFilter']=_0xc322de['minFilter']??ma,this['_magFilter']=_0xc322de['magFilter']??vt,this['_anisotrop'+'y']=_0xc322de['anisotropy']??-0x25c6+0xc3d+-0x1*-0x198a,this['_addressU']=_0xc322de['addressU']??yt,this['_addressV']=_0xc322de['addressV']??yt,this['_addressW']=_0xc322de['addressW']??yt,this['_compareOn'+'Read']=_0xc322de['compareOnR'+'ead']??!(-0x1*-0x20ed+0x50a+-0x25f6),this['_compareFu'+'nc']=_0xc322de['compareFun'+'c']??hh,this['_type']=_0xc322de['type']??Ds,w['assert'](!_0xc322de['hasOwnProp'+'erty']('rgbm'),'Use\x20option'+'s.type.'),w['assert'](!_0xc322de['hasOwnProp'+'erty']('swizzleGGG'+'R'),'Use\x20option'+'s.type.'),this['projection']=Vx,this['_cubemap']?this['projection']=tu:_0xc322de['projection']&&_0xc322de['projection']!==tu&&(this['projection']=_0xc322de['projection']),this['profilerHi'+'nt']=_0xc322de['profilerHi'+'nt']??0x3e3*-0x2+-0x78d+0x1*0xf53,this['_levels']=_0xc322de['levels'];const _0x34b224=!!_0xc322de['levels'];this['_levels']||this['_clearLeve'+'ls'](),this['recreateIm'+'pl'](_0x34b224),_0x45425b['textures']['push'](this),w['trace'](Dm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+'\x20['+((_0x7ed805=Nt['get'](this['format']))==null?void(-0x1c54+-0x7*0xdf+0x226d):_0x7ed805['name'])+']'+(this['cubemap']?'[Cubemap]':'')+(this['volume']?'[Volume]':'')+(this['array']?'[Array]':'')+('[MipLevels'+':')+this['numLevels']+']',this);}['destroy'](){w['trace'](Dm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x22c16a=this['device'];if(_0x22c16a){const _0x1b2bae=_0x22c16a['textures']['indexOf'](this);_0x1b2bae!==-(-0x603+0xa3*0x5+0x2d5)&&_0x22c16a['textures']['splice'](_0x1b2bae,-0x428*0x4+-0xf2c+-0x48b*-0x7),_0x22c16a['scope']['removeValu'+'e'](this),this['impl']['destroy'](_0x22c16a),this['adjustVram'+'SizeTracki'+'ng'](_0x22c16a['_vram'],-this['_gpuSize']),this['_levels']=null,this['device']=null;}}['recreateIm'+'pl'](_0x2af62c=!(-0x1*0x1349+0x4f4+0xe55)){var _0x487cb0;const {device:_0x9f5cdd}=this;(_0x487cb0=this['impl'])==null||_0x487cb0['destroy'](_0x9f5cdd),this['impl']=null,this['impl']=_0x9f5cdd['createText'+'ureImpl'](this),this['dirtyAll'](),_0x2af62c&&this['upload']();}['_clearLeve'+'ls'](){this['_levels']=this['_cubemap']?[[null,null,null,null,null,null]]:[null];}['resize'](_0x5dec3f,_0x5926cb,_0xfbc4e8=-0x186f+0x187f+-0xf*0x1){const _0x9b205e=this['device'];this['adjustVram'+'SizeTracki'+'ng'](_0x9b205e['_vram'],-this['_gpuSize']),this['impl']['destroy'](_0x9b205e),this['_clearLeve'+'ls'](),this['_width']=Math['floor'](_0x5dec3f),this['_height']=Math['floor'](_0x5926cb),this['_depth']=Math['floor'](_0xfbc4e8),this['_updateNum'+'Level'](),this['impl']=_0x9b205e['createText'+'ureImpl'](this),this['dirtyAll']();}['loseContex'+'t'](){this['impl']['loseContex'+'t'](),this['dirtyAll']();}['adjustVram'+'SizeTracki'+'ng'](_0x3d0e86,_0x512c7d){w['trace'](X0,this['id']+'\x20'+this['name']+'\x20size:\x20'+_0x512c7d+('\x20vram.text'+'ure:\x20')+_0x3d0e86['tex']+'\x20=>\x20'+(_0x3d0e86['tex']+_0x512c7d)),_0x3d0e86['tex']+=_0x512c7d,this['profilerHi'+'nt']===eu?_0x3d0e86['texShadow']+=_0x512c7d:this['profilerHi'+'nt']===Pr?_0x3d0e86['texAsset']+=_0x512c7d:this['profilerHi'+'nt']===vy&&(_0x3d0e86['texLightma'+'p']+=_0x512c7d);}['propertyCh'+'anged'](_0x124ec5){this['impl']['propertyCh'+'anged'](_0x124ec5),this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion'];}['_updateNum'+'Level'](){const _0x4d9219=this['mipmaps']?Xi['calcMipLev'+'elsCount'](this['width'],this['height']):0x17*-0x143+-0x53*-0x2f+-0xdc9*-0x1,_0x4e2d9e=this['_numLevels'+'Requested'];_0x4e2d9e!==void(-0x65e*0x5+0x1e47*-0x1+0x3e1d)&&_0x4e2d9e>_0x4d9219&&w['warn']('Texture#nu'+'mLevels:\x20r'+'equested\x20m'+'ip\x20level\x20c'+'ount\x20is\x20gr'+'eater\x20than'+'\x20the\x20maxim'+'um\x20possibl'+'e,\x20will\x20be'+'\x20clamped\x20t'+'o',_0x4d9219,this),this['_numLevels']=Math['min'](_0x4e2d9e??_0x4d9219,_0x4d9219),this['_mipmaps']=this['_numLevels']>-0xdee+0x5e8*0x3+-0x3c9;}get['lockedMode'](){return this['_lockedMod'+'e'];}set['minFilter'](_0x8fa49f){this['_minFilter']!==_0x8fa49f&&(dn(this['_format'])?w['warn']('Texture#mi'+'nFilter:\x20m'+'inFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_minFilter']=_0x8fa49f,this['propertyCh'+'anged'](Ay)));}get['minFilter'](){return this['_minFilter'];}set['magFilter'](_0x10c7c4){this['_magFilter']!==_0x10c7c4&&(dn(this['_format'])?w['warn']('Texture#ma'+'gFilter:\x20m'+'agFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_magFilter']=_0x10c7c4,this['propertyCh'+'anged'](Cy)));}get['magFilter'](){return this['_magFilter'];}set['addressU'](_0x53235b){this['_addressU']!==_0x53235b&&(this['_addressU']=_0x53235b,this['propertyCh'+'anged'](Py));}get['addressU'](){return this['_addressU'];}set['addressV'](_0x1c1d41){this['_addressV']!==_0x1c1d41&&(this['_addressV']=_0x1c1d41,this['propertyCh'+'anged'](My));}get['addressV'](){return this['_addressV'];}set['addressW'](_0x3302f1){if(!this['_volume']){w['warn']('pc.Texture'+'#addressW:'+'\x20Can\x27t\x20set'+'\x20W\x20address'+'ing\x20mode\x20f'+'or\x20a\x20non-3'+'D\x20texture.');return;}_0x3302f1!==this['_addressW']&&(this['_addressW']=_0x3302f1,this['propertyCh'+'anged'](Dy));}get['addressW'](){return this['_addressW'];}set['compareOnR'+'ead'](_0x387dbd){this['_compareOn'+'Read']!==_0x387dbd&&(this['_compareOn'+'Read']=_0x387dbd,this['propertyCh'+'anged'](Iy));}get['compareOnR'+'ead'](){return this['_compareOn'+'Read'];}set['compareFun'+'c'](_0x1a1b19){this['_compareFu'+'nc']!==_0x1a1b19&&(this['_compareFu'+'nc']=_0x1a1b19,this['propertyCh'+'anged'](Ly));}get['compareFun'+'c'](){return this['_compareFu'+'nc'];}set['anisotropy'](_0x39926a){this['_anisotrop'+'y']!==_0x39926a&&(this['_anisotrop'+'y']=_0x39926a,this['propertyCh'+'anged'](Ry));}get['anisotropy'](){return this['_anisotrop'+'y'];}set['mipmaps'](_0x5d6ef6){this['_mipmaps']!==_0x5d6ef6&&(this['device']['isWebGPU']?w['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20is\x20curr'+'ently\x20not\x20'+'allowed\x20to'+'\x20be\x20change'+'d\x20on\x20WebGP'+'U,\x20create\x20'+'the\x20textur'+'e\x20appropri'+'ately.',this):dn(this['_format'])?w['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20cannot\x20'+'be\x20changed'+'\x20on\x20an\x20int'+'eger\x20textu'+'re,\x20will\x20r'+'emain\x20fals'+'e',this):this['_mipmaps']=_0x5d6ef6,_0x5d6ef6&&(this['_needsMipm'+'apsUpload']=!(0x1f5d+0x1*-0xebf+-0x6*0x2c5)));}get['mipmaps'](){return this['_mipmaps'];}get['numLevels'](){return this['_numLevels'];}get['storage'](){return this['_storage'];}get['width'](){return this['_width'];}get['height'](){return this['_height'];}get['depth'](){return this['_depth'];}get['format'](){return this['_format'];}get['cubemap'](){return this['_cubemap'];}get['gpuSize'](){const _0x74453b=this['pot']&&this['_mipmaps']&&!(this['_compresse'+'d']&&this['_levels']['length']===0x535+-0x130*-0x17+-0x2084);return Xi['calcGpuSiz'+'e'](this['_width'],this['_height'],this['_depth'],this['_format'],_0x74453b,this['_cubemap']);}get['array'](){return this['_arrayLeng'+'th']>0x737*-0x2+0x639+-0x835*-0x1;}get['arrayLengt'+'h'](){return this['_arrayLeng'+'th'];}get['volume'](){return this['_volume'];}set['type'](_0x5f1f2e){this['_type']!==_0x5f1f2e&&(this['_type']=_0x5f1f2e,this['device']['_shadersDi'+'rty']=!(-0x40*-0x5+0x7b9*0x5+0x9d*-0x41));}get['type'](){return this['_type'];}set['srgb'](_0x54a5cc){var _0x107ac0,_0xfcc044,_0x58aea9,_0x13e5dc;const _0x28493a=fh(this['format']);if(_0x54a5cc!==_0x28493a){if(_0x54a5cc){const _0x2fceb1=ld(this['format']);this['_format']!==_0x2fceb1&&(w['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20sRGB\x20'+'equivalent'+':\x20')+((_0x107ac0=Nt['get'](this['format']))==null?void(0x1c10*0x1+-0x67*0x56+0x3*0x22e):_0x107ac0['name'])+'\x20->\x20'+((_0xfcc044=Nt['get'](_0x2fceb1))==null?void(-0x1*0x1137+-0x1*0x35b+-0x1492*-0x1):_0xfcc044['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x2fceb1,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(-0x3a9*0x1+0x303+0xa6));}else{const _0x5b27f1=Lx(this['format']);this['_format']!==_0x5b27f1&&(w['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20linea'+'r\x20equivale'+'nt:\x20')+((_0x58aea9=Nt['get'](this['format']))==null?void(0x2243+0x1912+-0x3b55):_0x58aea9['name'])+'\x20->\x20'+((_0x13e5dc=Nt['get'](_0x5b27f1))==null?void(-0xd92+0x1cb*0xf+-0x471*0x3):_0x13e5dc['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x5b27f1,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(-0x1*0xe32+0x1966*0x1+-0xb34));}}}get['srgb'](){return fh(this['format']);}set['flipY'](_0x50c492){this['_flipY']!==_0x50c492&&(this['_flipY']=_0x50c492,this['_needsUplo'+'ad']=!(-0x1*0xdef+0xe+0xde1));}get['flipY'](){return this['_flipY'];}set['premultipl'+'yAlpha'](_0x484709){this['_premultip'+'lyAlpha']!==_0x484709&&(this['_premultip'+'lyAlpha']=_0x484709,this['_needsUplo'+'ad']=!(0xa*0xfb+-0x1d2*-0x1+-0xba0));}get['premultipl'+'yAlpha'](){return this['_premultip'+'lyAlpha'];}get['pot'](){return Y['powerOfTwo'](this['_width'])&&Y['powerOfTwo'](this['_height']);}get['encoding'](){switch(this['type']){case Zi:return'rgbm';case mh:return'rgbe';case Qo:return'rgbp';}return py(this['format'])?'srgb':'linear';}['dirtyAll'](){this['_levelsUpd'+'ated']=this['_cubemap']?[[!(-0xb00+-0x1cbf+0x27bf),!(-0xad2+-0x1c6d+-0x33*-0xc5),!(-0x26d0+-0x16*-0x184+-0x38*-0x19),!(-0x642*-0x6+-0xc7+0x1*-0x24c5),!(-0x600*-0x5+-0x43*0x13+-0x1907),!(-0x20c+0xc4c+0x4*-0x290)]]:[!(-0x13ba+-0x1*-0x222d+0x1*-0xe73)],this['_needsUplo'+'ad']=!(-0x263+0x704*0x2+0x1*-0xba5),this['_needsMipm'+'apsUpload']=this['_mipmaps'],this['_mipmapsUp'+'loaded']=!(0x264d*-0x1+0x1b82+0x566*0x2),this['propertyCh'+'anged'](lT);}['lock'](_0xb3bb1a={}){_0xb3bb1a['level']??(_0xb3bb1a['level']=-0x12c4+-0x1499+0x275d),_0xb3bb1a['face']??(_0xb3bb1a['face']=-0x2653*-0x1+-0x2559+-0xfa*0x1),_0xb3bb1a['mode']??(_0xb3bb1a['mode']=Od),w['assert'](this['_lockedMod'+'e']===$l,'The\x20textur'+'e\x20is\x20alrea'+'dy\x20locked.'+'\x20Call\x20`tex'+'ture.unloc'+'k()`\x20befor'+'e\x20attempti'+'ng\x20to\x20lock'+'\x20again.',this),w['assert'](_0xb3bb1a['mode']===yy||_0xb3bb1a['mode']===Od,'Cannot\x20loc'+'k\x20a\x20textur'+'e\x20with\x20TEX'+'TURELOCK_N'+'ONE.\x20To\x20un'+'lock\x20a\x20tex'+'ture,\x20call'+'\x20`texture.'+'unlock()`.',this),this['_lockedMod'+'e']=_0xb3bb1a['mode'],this['_lockedLev'+'el']=_0xb3bb1a['level'];const _0x401058=this['cubemap']?this['_levels'][_0xb3bb1a['face']]:this['_levels'];if((_0x401058==null?void(0x51*-0x5+0x1*-0xd81+-0x1*-0xf16):_0x401058[_0xb3bb1a['level']])===null){const _0x1ee6e3=Math['max'](0x2042+-0x1245+-0xb3*0x14,this['_width']>>_0xb3bb1a['level']),_0x11c56d=Math['max'](0x28e+-0x1c3f*-0x1+0x1b6*-0x12,this['_height']>>_0xb3bb1a['level']),_0x911e5e=Math['max'](-0x121*0x3+0x599*-0x1+0x8fd,this['_depth']>>_0xb3bb1a['level']),_0x5b7800=new ArrayBuffer(Xi['calcLevelG'+'puSize'](_0x1ee6e3,_0x11c56d,_0x911e5e,this['_format']));_0x401058[_0xb3bb1a['level']]=new(my(this['_format']))(_0x5b7800);}return _0x401058==null?void(-0x677*0x5+0x1e17+0x23c):_0x401058[_0xb3bb1a['level']];}['setSource'](_0x276593,_0x37fbb6=-0x57b*0x5+0xf49+0xc1e){let _0x18e992=!(0x135d*0x1+0x199c+-0x2cf8*0x1),_0x5dabdf,_0x440f64;if(this['_cubemap']){if(_0x276593[-0x6c8+-0x948+0x1010]){_0x5dabdf=_0x276593[0x1d*0x25+-0x2f*0x8+0x1*-0x2b9]['width']||-0x99*-0xf+-0x4c*0x6a+0x1681,_0x440f64=_0x276593[-0x1*-0xd39+0x1ee0+0x3*-0xeb3]['height']||-0x88e*0x1+-0x1*0x1e7f+0x270d;for(let _0x455f60=0xd*-0x1bb+-0x1191+0x2810;_0x455f60<-0x1e16+0x22b4+0x3*-0x188;_0x455f60++){const _0x5745fb=_0x276593[_0x455f60];if(!_0x5745fb||_0x5745fb['width']!==_0x5dabdf||_0x5745fb['height']!==_0x440f64||!this['device']['_isBrowser'+'Interface'](_0x5745fb)){_0x18e992=!(0x440+-0x86*-0xb+0x6*-0x1ab);break;}}}else _0x18e992=!(0x3*-0x911+0x1c5e+-0x17*0xd);if(!_0x18e992){for(let _0x16df4d=-0x2146+0x26*0x6+0x2062;_0x16df4d<0x207*-0x5+-0xd*0xd6+-0x1*-0x1507;_0x16df4d++)this['_levels'][_0x37fbb6][_0x16df4d]!==_0x276593[_0x16df4d]&&(this['_levelsUpd'+'ated'][_0x37fbb6][_0x16df4d]=!(0x13d2+0x15*-0x167+0x9a1));}}else this['device']['_isBrowser'+'Interface'](_0x276593)||(_0x18e992=!(-0x239*0xb+0x1ac9+-0x256)),_0x18e992||(_0x276593!==this['_levels'][_0x37fbb6]&&(this['_levelsUpd'+'ated'][_0x37fbb6]=!(-0x2be+0x519+-0x25b)),_0x276593 instanceof HTMLVideoElement?(_0x5dabdf=_0x276593['videoWidth'],_0x440f64=_0x276593['videoHeigh'+'t']):(_0x5dabdf=_0x276593['width'],_0x440f64=_0x276593['height']));if(_0x18e992){if(this['_width']=0x1*-0xaa3+-0xf6b*-0x1+-0x4c4*0x1,this['_height']=0x7ca*0x1+-0x19b3+0x11ed,this['_cubemap']){for(let _0x2e47d4=0x1*-0x2047+-0x8b5+0x28fc;_0x2e47d4<0x1*0x1b6+-0x121*-0xf+-0x129f;_0x2e47d4++)this['_levels'][_0x37fbb6][_0x2e47d4]=null,this['_levelsUpd'+'ated'][_0x37fbb6][_0x2e47d4]=!(-0x1*0x211f+-0x3e*-0x5c+-0x5*-0x22b);}else this['_levels'][_0x37fbb6]=null,this['_levelsUpd'+'ated'][_0x37fbb6]=!(0x498+-0x39+-0x175*0x3);}else _0x37fbb6===0x1*0xe12+-0x1*-0x1f73+0x2b*-0x10f&&(this['_width']=_0x5dabdf,this['_height']=_0x440f64),this['_levels'][_0x37fbb6]=_0x276593;(this['_invalid']!==_0x18e992||!_0x18e992)&&(this['_invalid']=_0x18e992,this['upload']());}['getSource'](_0x58bafa=-0x3*-0x733+0x14*0x1ea+0x1*-0x3be1){return this['_levels'][_0x58bafa];}['unlock'](){this['_lockedMod'+'e']===$l&&w['warn']('pc.Texture'+'#unlock:\x20A'+'ttempting\x20'+'to\x20unlock\x20'+'a\x20texture\x20'+'that\x20is\x20no'+'t\x20locked.',this),this['_lockedMod'+'e']===Od&&this['upload'](),this['_lockedLev'+'el']=-(-0x1785*-0x1+-0x162b+-0x159),this['_lockedMod'+'e']=$l;}['upload'](){var _0x5b3337,_0xbee4d8;this['_needsUplo'+'ad']=!(0x5c3+0x2199+-0x275c),this['_needsMipm'+'apsUpload']=this['_mipmaps'],(_0xbee4d8=(_0x5b3337=this['impl'])['uploadImme'+'diate'])==null||_0xbee4d8['call'](_0x5b3337,this['device'],this);}['read'](_0x4739a8,_0x2ea4aa,_0x3dcfe7,_0x1ff453,_0x34710d={}){var _0x3770b0,_0x2691b1;return(_0x2691b1=(_0x3770b0=this['impl'])['read'])==null?void(-0xb78+-0x1*-0x258d+0x1a15*-0x1):_0x2691b1['call'](_0x3770b0,_0x4739a8,_0x2ea4aa,_0x3dcfe7,_0x1ff453,_0x34710d);}['write'](_0x45689f,_0x10f0a2,_0x590c1b,_0x479271,_0x52b53d){var _0x28f8a0,_0x4467ad;return(_0x4467ad=(_0x28f8a0=this['impl'])['write'])==null?void(0x178e+-0x47a+-0x1314):_0x4467ad['call'](_0x28f8a0,_0x45689f,_0x10f0a2,_0x590c1b,_0x479271,_0x52b53d);}}const mT={'white':[0xb22+0xd49*0x1+-0x176c,0x2271*0x1+0x1*0x1747+-0x38b9,0x194b+-0x434*-0x7+-0x35b8,0x789+-0xb86+-0x4*-0x13f],'gray':[-0x17a1+0x1bfc+0x1*-0x3db,0x80a+-0x10f+-0x67b,0x11fb+-0x7b8+-0x93*0x11,0xdd8*-0x1+0x7*-0x281+0x3*0xaca],'black':[-0x524+0x1972*-0x1+-0x1d*-0x10e,-0x698+-0xecc+-0x4*-0x559,0x9*-0x31e+-0x1b41*-0x1+0x5*0x29,-0x1efa+0x1b*-0xfb+0x3a72],'normal':[-0xaad+0x1*0x1fbb+-0x148e,0x8e6+-0x1a63+0x11fd,0xa64+-0xab7+0x152,0x1739+0x43*0x89+0x3a15*-0x1],'pink':[0x67*0x40+0x19f1*-0x1+0x130,0x873+0x1124*0x1+0x3*-0x85d,-0x101*-0x4+-0x2160*0x1+0x1e5b,0x1*0x1829+0x23b7+0x1*-0x3ae1]};class _T{constructor(){h(this,'map',new Map());}['destroy'](){this['map']['forEach'](_0x3c9c98=>{_0x3c9c98['destroy']();});}}const gT=new Kt(),fa=(_0x2e9ec4,_0x54a01a)=>{const _0x34c908=gT['get'](_0x2e9ec4,()=>new _T());if(!_0x34c908['map']['has'](_0x54a01a)){const _0x540b3c=new _e(_0x2e9ec4,{'name':'built-in-t'+'exture-'+_0x54a01a,'width':0x1,'height':0x1,'format':Ne}),_0x366090=_0x540b3c['lock'](),_0x3b0a90=mT[_0x54a01a];w['assert'](_0x3b0a90,'Data\x20for\x20b'+'uilt-in\x20te'+'xture\x20\x27'+_0x54a01a+('\x27\x20not\x20foun'+'d')),_0x366090['set'](_0x3b0a90),_0x540b3c['unlock'](),_0x34c908['map']['set'](_0x54a01a,_0x540b3c);}return _0x34c908['map']['get'](_0x54a01a);};let ST=-0x7c3+-0x1ff9+-0x1*-0x27bc;class ky{constructor(){h(this,'bindGroup'),h(this,'offsets',[]);}}class Up{constructor(_0x50e95a,_0x2ede08,_0x17207b){h(this,'renderVers'+'ionUpdated',-(0x265e+-0xeef+0x1*-0x176e)),h(this,'uniformBuf'+'fers'),h(this,'uniformBuf'+'ferOffsets',[]),(this['id']=ST++,this['device']=_0x50e95a,this['format']=_0x2ede08,this['dirty']=!(-0x8e2+-0x12ea+0x1bcc*0x1),this['impl']=_0x50e95a['createBind'+'GroupImpl'](this),this['textures']=[],this['storageTex'+'tures']=[],this['storageBuf'+'fers']=[],this['uniformBuf'+'fers']=[],this['defaultUni'+'formBuffer']=_0x17207b,_0x17207b&&this['setUniform'+'Buffer'](Np,_0x17207b),w['trace'](Y0,'Alloc:\x20Id\x20'+this['id'],this,_0x2ede08));}['destroy'](){this['impl']['destroy'](),this['impl']=null,this['format']=null,this['defaultUni'+'formBuffer']=null;}['setUniform'+'Buffer'](_0x2d7865,_0x1e90a6){const _0x32cb62=this['format']['bufferForm'+'atsMap']['get'](_0x2d7865);w['assert'](_0x32cb62!==void(-0x234b+0x34*-0x18+0x282b),'Setting\x20a\x20'+'uniform\x20['+_0x2d7865+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['uniformBuf'+'fers'][_0x32cb62]!==_0x1e90a6&&(this['uniformBuf'+'fers'][_0x32cb62]=_0x1e90a6,this['dirty']=!(-0x1*-0x160f+0x15*0x137+-0x2f92));}['setStorage'+'Buffer'](_0xe46b25,_0x4a1d8c){const _0x45b0b7=this['format']['storageBuf'+'ferFormats'+'Map']['get'](_0xe46b25);w['assert'](_0x45b0b7!==void(-0x23e3*-0x1+-0x1ba3+0x1*-0x840),'Setting\x20a\x20'+'storage\x20bu'+'ffer\x20['+_0xe46b25+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageBuf'+'fers'][_0x45b0b7]!==_0x4a1d8c&&(this['storageBuf'+'fers'][_0x45b0b7]=_0x4a1d8c,this['dirty']=!(-0x1c60+0x3*-0x3d7+-0x27e5*-0x1));}['setTexture'](_0x3d8d53,_0x14bd87){const _0x28b1b7=this['format']['textureFor'+'matsMap']['get'](_0x3d8d53);w['assert'](_0x28b1b7!==void(0x66*-0x48+0xcf6+0x3*0x53e),'Setting\x20a\x20'+'texture\x20['+_0x3d8d53+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['textures'][_0x28b1b7]!==_0x14bd87?(this['textures'][_0x28b1b7]=_0x14bd87,this['dirty']=!(-0x2469*0x1+0x66a+0x1dff)):this['renderVers'+'ionUpdated']<_0x14bd87['renderVers'+'ionDirty']&&(this['dirty']=!(-0x1edb+-0x1c*-0x1c+-0x1*-0x1bcb));}['setStorage'+'Texture'](_0x44537a,_0x5d3492){const _0x1a0325=this['format']['storageTex'+'tureFormat'+'sMap']['get'](_0x44537a);w['assert'](_0x1a0325!==void(-0x2*0x15+-0x1*0x1719+-0x7c1*-0x3),'Setting\x20a\x20'+'storage\x20te'+'xture\x20['+_0x44537a+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageTex'+'tures'][_0x1a0325]!==_0x5d3492?(this['storageTex'+'tures'][_0x1a0325]=_0x5d3492,this['dirty']=!(0x1cdd*-0x1+0x1ac+0x1b31*0x1)):this['renderVers'+'ionUpdated']<_0x5d3492['renderVers'+'ionDirty']&&(this['dirty']=!(-0x1046+-0x136b+0x23b1));}['updateUnif'+'ormBuffers'](){for(let _0x4586cc=0x231d+-0x1*-0x1e71+-0x20c7*0x2;_0x4586cc<this['uniformBuf'+'fers']['length'];_0x4586cc++)this['uniformBuf'+'fers'][_0x4586cc]['update']();}['update'](){const {textureFormats:_0x42f40e,storageTextureFormats:_0x527c14,storageBufferFormats:_0x482646}=this['format'];for(let _0xd79f0f=-0x1f98+0x14d7+0xac1;_0xd79f0f<_0x42f40e['length'];_0xd79f0f++){const _0x296489=_0x42f40e[_0xd79f0f];let _0x47103e=_0x296489['scopeId']['value'];_0x47103e||(_0x296489['name']==='uSceneDept'+'hMap'&&(w['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x47103e=fa(this['device'],'white')),_0x296489['name']==='uSceneColo'+'rMap'&&(w['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x47103e=fa(this['device'],'pink')),_0x47103e||(w['errorOnce']('Texture\x20'+_0x296489['name']+('\x20is\x20requir'+'ed\x20for\x20ren'+'dering\x20but'+'\x20was\x20not\x20s'+'et.\x20Render'+'ing\x20[')+Q['toString']()+']'),_0x47103e=fa(this['device'],'pink'))),this['setTexture'](_0x296489['name'],_0x47103e);}for(let _0x4ffd8d=-0x9*-0x44f+-0x17*0x194+-0x27b;_0x4ffd8d<_0x527c14['length'];_0x4ffd8d++){const _0x16bb46=_0x527c14[_0x4ffd8d],_0x2bd39f=_0x16bb46['scopeId']['value'];w['assert'](_0x2bd39f,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20texture\x20s'+'lot\x20['+_0x16bb46['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Texture'](_0x16bb46['name'],_0x2bd39f);}for(let _0x58aedd=-0xfde+-0x17*-0x173+-0x1177*0x1;_0x58aedd<_0x482646['length'];_0x58aedd++){const _0x352656=_0x482646[_0x58aedd],_0x366972=_0x352656['scopeId']['value'];w['assert'](_0x366972,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20buffer\x20sl'+'ot\x20['+_0x352656['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Buffer'](_0x352656['name'],_0x366972);}this['uniformBuf'+'ferOffsets']['length']=this['uniformBuf'+'fers']['length'];for(let _0x5068ff=-0x1f19*-0x1+0x563*-0x1+-0x19b6;_0x5068ff<this['uniformBuf'+'fers']['length'];_0x5068ff++){const _0x1e7ccc=this['uniformBuf'+'fers'][_0x5068ff];this['uniformBuf'+'ferOffsets'][_0x5068ff]=_0x1e7ccc['offset'],this['renderVers'+'ionUpdated']<_0x1e7ccc['renderVers'+'ionDirty']&&(this['dirty']=!(-0xe41*0x1+0x23a1+-0x39*0x60));}this['dirty']&&(this['dirty']=!(-0x143*0x16+0x1f90+-0x3cd),this['renderVers'+'ionUpdated']=this['device']['renderVers'+'ion'],this['impl']['update'](this));}}const qe={'set'(_0x3ba27f,_0x18f98c,_0x142ebd,_0x2ee187=-0x2e9*-0x4+0xeac+-0x1a4f){return _0x3ba27f&~(_0x2ee187<<_0x142ebd)|_0x18f98c<<_0x142ebd;},'get'(_0x1f8aa7,_0x10a590,_0x5bf93f=0x464+0x1*-0x323+0x5*-0x40){return _0x1f8aa7>>_0x10a590&_0x5bf93f;},'all'(_0x50d236,_0x4bd374,_0x5b2986=-0x1c7b+0xa4*0x8+0x175c){const _0x45f560=_0x5b2986<<_0x4bd374;return(_0x50d236&_0x45f560)===_0x45f560;},'any'(_0x12a485,_0x239d2b,_0xecdb1=0xcb*-0x23+-0x15*-0x8b+0x105b){return(_0x12a485&_0xecdb1<<_0x239d2b)!==-0x1211+-0x3*0xb3+-0xa15*-0x2;}},Xl=0x59b+0x1131*0x2+-0x27f6,ir=0x44+-0x58*-0x49+-0x11*0x17d,Hm=-0x9c*0xb+0x1652+-0xf9e,Wm=0x1*-0x1f1b+0x3*-0x34b+-0x28ff*-0x1,$m=0x33f*0x1+0x23af+-0x26e7,Xm=-0xf7*0x1f+0x5a1*-0x1+0x2395,qm=0x1030*-0x1+0x3f*-0x9c+0x36a2,jm=0x1*-0xa49+-0x182f+0x228a,iu=-0x2450+0x1245+-0x111*-0x11,Ym=0x1247+-0x4d1*0x8+0x7c*0x2a,Km=0x93*0x43+0xf69+0x55*-0xa2,Zm=0x1f68+0x1dd0+-0x3d1f,Qm=-0x1*-0x2d7+0x1*0x23f3+0x9ac*-0x4,yT=0x2*-0x110c+-0x1760+-0x132d*-0x3,vT=iu,ri=class ri{constructor(_0x20d2ac=!(0x71c+-0x1c8b+-0x62*-0x38),_0x2fe42a=fs,_0x57c588=Ft,_0x5890fd=rp,_0xcbd8fe,_0x3e28ce,_0xf60607,_0x59dc89=!(0x472*0x5+-0xa82*0x3+0x94c),_0x244458=!(-0x1404+0x205a+-0x62b*0x2),_0x1349f7=!(0x114a*0x2+0x5ce+-0x2862),_0x2fba05=!(-0x1*0x375+0x1*0x1fb4+-0x7*0x409)){h(this,'target0',-0x2*0xcbe+0x1*-0x1c37+0x35b3),(this['setColorBl'+'end'](_0x2fe42a,_0x57c588,_0x5890fd),this['setAlphaBl'+'end'](_0xcbd8fe??_0x2fe42a,_0x3e28ce??_0x57c588,_0xf60607??_0x5890fd),this['setColorWr'+'ite'](_0x59dc89,_0x244458,_0x1349f7,_0x2fba05),this['blend']=_0x20d2ac);}set['blend'](_0x12fb41){this['target0']=qe['set'](this['target0'],_0x12fb41?0xba0+0xd66+-0x1905:0x268+0x4*0x178+-0x848,Qm);}get['blend'](){return qe['all'](this['target0'],Qm);}['setColorBl'+'end'](_0x40630c,_0x58f2e4,_0x4794bf){this['target0']=qe['set'](this['target0'],_0x40630c,Hm,Xl),this['target0']=qe['set'](this['target0'],_0x58f2e4,Wm,ir),this['target0']=qe['set'](this['target0'],_0x4794bf,$m,ir);}['setAlphaBl'+'end'](_0x3d7e74,_0x56f69b,_0x344c7f){this['target0']=qe['set'](this['target0'],_0x3d7e74,Xm,Xl),this['target0']=qe['set'](this['target0'],_0x56f69b,qm,ir),this['target0']=qe['set'](this['target0'],_0x344c7f,jm,ir);}['setColorWr'+'ite'](_0x3a7fdc,_0x423ed4,_0x14f93b,_0x5d3338){this['redWrite']=_0x3a7fdc,this['greenWrite']=_0x423ed4,this['blueWrite']=_0x14f93b,this['alphaWrite']=_0x5d3338;}get['colorOp'](){return qe['get'](this['target0'],Hm,Xl);}get['colorSrcFa'+'ctor'](){return qe['get'](this['target0'],Wm,ir);}get['colorDstFa'+'ctor'](){return qe['get'](this['target0'],$m,ir);}get['alphaOp'](){return qe['get'](this['target0'],Xm,Xl);}get['alphaSrcFa'+'ctor'](){return qe['get'](this['target0'],qm,ir);}get['alphaDstFa'+'ctor'](){return qe['get'](this['target0'],jm,ir);}set['redWrite'](_0x3895bf){this['target0']=qe['set'](this['target0'],_0x3895bf?0x502+0x1253+-0x1754:0x253d+-0x1322+-0xf*0x135,iu);}get['redWrite'](){return qe['all'](this['target0'],iu);}set['greenWrite'](_0x29855b){this['target0']=qe['set'](this['target0'],_0x29855b?0x223b+0x1d1*0x2+-0x25dc:-0x346+0x49*-0x3e+0x14f4,Ym);}get['greenWrite'](){return qe['all'](this['target0'],Ym);}set['blueWrite'](_0x1513f5){this['target0']=qe['set'](this['target0'],_0x1513f5?0x1e1e+-0x2003+0x1b*0x12:0xc1f*-0x1+-0xf71*-0x1+-0x1a9*0x2,Km);}get['blueWrite'](){return qe['all'](this['target0'],Km);}set['alphaWrite'](_0xda566d){this['target0']=qe['set'](this['target0'],_0xda566d?0x15b4+0x18d7+-0x2e8a*0x1:0x1165+-0x2227+0x10c2,Zm);}get['alphaWrite'](){return qe['all'](this['target0'],Zm);}get['allWrite'](){return qe['get'](this['target0'],vT,yT);}['copy'](_0x1e3c28){return this['target0']=_0x1e3c28['target0'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}get['key'](){return this['target0'];}['equals'](_0x584572){return this['target0']===_0x584572['target0'];}};h(ri,'NOBLEND',Object['freeze'](new ri())),h(ri,'NOWRITE',Object['freeze'](new ri(void(-0x21cb+-0x1*0x2192+-0x435d*-0x1),void(0x79a*-0x1+-0x2*-0xce7+-0x1234),void(-0x16bb+-0x1aec+0xdf*0x39),void(-0x281+-0x1*-0x3fb+-0x7e*0x3),void(0x1b*0x125+0x8bf*-0x1+-0x1628),void(-0xdd6+0x116*-0x21+0x31ac),void(-0x23ab*0x1+-0x1999+-0x2*-0x1ea2),!(0xf*0xa+-0x50*-0xf+-0x545),!(0x1*-0x128c+-0x2*-0x347+0xbff*0x1),!(-0x264d+0x2f*0x5+-0x1*-0x2563),!(-0x5c9*-0x1+-0x8bb+0x2f3)))),h(ri,'ALPHABLEND',Object['freeze'](new ri(!(0x1ba2+0xb9+-0x1ab*0x11),fs,jh,Yh))),h(ri,'ADDBLEND',Object['freeze'](new ri(!(0x577*-0x1+-0x7*-0x586+-0x2133),fs,Ft,Ft)));let pt=ri;class Bp{constructor(){h(this,'map',new Map()),h(this,'id',0x106e+-0xa3*-0x3b+-0x35ff);}['get'](_0x3b6ee7){let _0x4a874c=this['map']['get'](_0x3b6ee7);return _0x4a874c===void(0x92c+-0x659+-0x2d3)&&(_0x4a874c=this['id']++,this['map']['set'](_0x3b6ee7,_0x4a874c)),_0x4a874c;}}const xT=new Bp(),Jm=0xa63*0x1+0x1*-0x14bc+0xa60,e_=-0x40*0x75+0x19cd+0x373,t_=0x8cf+0x113*-0x13+0xb9d,_r=class _r{constructor(_0xf5b2f6=Wf,_0x428540=!(0x183+-0x1*-0x11c+-0x29f)){h(this,'data',-0x15d7+-0x128c+0x2863),h(this,'_depthBias',0xd2f+-0x2245*-0x1+-0x2f74),h(this,'_depthBias'+'Slope',-0x21c0+0x6c7+0x565*0x5),h(this,'key',-0x4fd*0x3+-0x77*-0x3a+-0xbff),(this['func']=_0xf5b2f6,this['write']=_0x428540);}set['test'](_0x29ad11){this['func']=_0x29ad11?Wf:Wi,this['updateKey']();}get['test'](){return this['func']!==Wi;}set['write'](_0x169f2e){this['data']=qe['set'](this['data'],_0x169f2e?0x10c4+-0x6f*-0x3a+-0x29e9:-0x1135*-0x1+-0x2*-0x1225+-0x357f,t_),this['updateKey']();}get['write'](){return qe['all'](this['data'],t_);}set['func'](_0x3c7351){this['data']=qe['set'](this['data'],_0x3c7351,e_,Jm),this['updateKey']();}get['func'](){return qe['get'](this['data'],e_,Jm);}set['depthBias'](_0x8866db){this['_depthBias']=_0x8866db,this['updateKey']();}get['depthBias'](){return this['_depthBias'];}set['depthBiasS'+'lope'](_0x2004c7){this['_depthBias'+'Slope']=_0x2004c7,this['updateKey']();}get['depthBiasS'+'lope'](){return this['_depthBias'+'Slope'];}['copy'](_0x2ada7b){return this['data']=_0x2ada7b['data'],this['_depthBias']=_0x2ada7b['_depthBias'],this['_depthBias'+'Slope']=_0x2ada7b['_depthBias'+'Slope'],this['key']=_0x2ada7b['key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['updateKey'](){const {data:_0x262733,_depthBias:_0x59371e,_depthBiasSlope:_0x46fe23}=this,_0x5ee753=_0x262733+'-'+_0x59371e+'-'+_0x46fe23;this['key']=xT['get'](_0x5ee753);}['equals'](_0x196207){return this['key']===_0x196207['key'];}};h(_r,'DEFAULT',Object['freeze'](new _r())),h(_r,'NODEPTH',Object['freeze'](new _r(Wi,!(0x21d1+-0x3*0xbfe+0x22a*0x1)))),h(_r,'WRITEDEPTH',Object['freeze'](new _r(Wi,!(0x10b3+0x1*0x22e5+-0x3398))));let Yt=_r;class Uy{constructor(){h(this,'globalId',0xc*0x1c6+-0x157a+0x32),h(this,'revision',0xc13+0x832*0x2+-0x97d*0x3);}['equals'](_0x481a5d){return this['globalId']===_0x481a5d['globalId']&&this['revision']===_0x481a5d['revision'];}['copy'](_0x2bf645){this['globalId']=_0x2bf645['globalId'],this['revision']=_0x2bf645['revision'];}['reset'](){this['globalId']=0x1*0x26ba+0x1931*-0x1+-0xd89,this['revision']=0x5*-0x5fa+0xe*-0x287+0x4144;}}let s_=-0x157a+-0x117*-0xe+-0x8*-0xc7;class TT{constructor(){s_++,this['version']=new Uy(),this['version']['globalId']=s_;}['increment'](){this['version']['revision']++;}}class wT{constructor(_0x346402){this['name']=_0x346402,this['value']=null,this['versionObj'+'ect']=new TT();}['toJSON'](_0x4ae665){}['setValue'](_0x2a16c3){this['value']=_0x2a16c3,this['versionObj'+'ect']['increment']();}['getValue'](){return this['value'];}}class ET{constructor(_0x55df19){this['name']=_0x55df19,this['variables']=new Map();}['resolve'](_0x3280c9){return this['variables']['has'](_0x3280c9)||this['variables']['set'](_0x3280c9,new wT(_0x3280c9)),this['variables']['get'](_0x3280c9);}['removeValu'+'e'](_0x486c91){for(const _0x59bf1d in this['variables']){const _0x2a65af=this['variables'][_0x59bf1d];_0x2a65af['value']===_0x486c91&&(_0x2a65af['value']=null);}}}let bT=0xe94*0x1+0x365*0xa+0x1843*-0x2;class Is{constructor(_0xf3cbff,_0x456713,_0x3c0c8e,_0x2f67f2){h(this,'usage',ms),(w['assert'](arguments['length']<=-0x663+-0x1ccd+0x119a*0x2&&(!_0x2f67f2||typeof _0x2f67f2=='object'),'incorrect\x20'+'arguments'),this['usage']=(_0x2f67f2==null?void(0x1abd+0x1162+-0x2c1f):_0x2f67f2['usage'])??ms,this['device']=_0xf3cbff,this['format']=_0x456713,this['numVertice'+'s']=_0x3c0c8e,this['id']=bT++,this['impl']=_0xf3cbff['createVert'+'exBufferIm'+'pl'](this,_0x456713,_0x2f67f2),this['numBytes']=_0x456713['verticesBy'+'teSize']?_0x456713['verticesBy'+'teSize']:_0x456713['size']*_0x3c0c8e,this['adjustVram'+'SizeTracki'+'ng'](_0xf3cbff['_vram'],this['numBytes']));const _0x9b655a=_0x2f67f2==null?void(0x1*-0x2446+0x6dc*-0x3+0x1c6d*0x2):_0x2f67f2['data'];_0x9b655a?this['setData'](_0x9b655a):this['storage']=new ArrayBuffer(this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x4597ba=this['device'],_0x45032a=_0x4597ba['buffers']['indexOf'](this);_0x45032a!==-(0x11a7+-0x6b7+-0xaef)&&_0x4597ba['buffers']['splice'](_0x45032a,-0xedc+0x1631+-0x754),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x4597ba),this['adjustVram'+'SizeTracki'+'ng'](_0x4597ba['_vram'],-this['storage']['byteLength'])),this['storage']=null;}['adjustVram'+'SizeTracki'+'ng'](_0x3e6f20,_0x3f5c41){w['trace'](q0,this['id']+'\x20size:\x20'+_0x3f5c41+'\x20vram.vb:\x20'+_0x3e6f20['vb']+'\x20=>\x20'+(_0x3e6f20['vb']+_0x3f5c41)),_0x3e6f20['vb']+=_0x3f5c41;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getUsage'](){return this['usage'];}['getNumVert'+'ices'](){return this['numVertice'+'s'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x38bde4){return _0x38bde4['byteLength']!==this['numBytes']?(w['error']('VertexBuff'+'er:\x20wrong\x20'+'initial\x20da'+'ta\x20size:\x20e'+'xpected\x20'+this['numBytes']+',\x20got\x20'+_0x38bde4['byteLength']),!(-0x812*-0x2+0xca8+-0x1ccb)):(this['storage']=_0x38bde4,this['unlock'](),!(-0x3be*0x7+-0x1*0x7a2+0x21d4));}}function hi(_0x47493f){if(_0x47493f==null)return-0x175c+0x1b00+-0x3a4;let _0x535962=-0xddd+0x123*0x21+-0x17a6;for(let _0x26a504=-0xb5*-0x1f+0x1d+-0x1*0x1608,_0x225a14=_0x47493f['length'];_0x26a504<_0x225a14;_0x26a504++)_0x535962=(_0x535962<<0x1*-0x1d3+-0x74*-0x40+0x1*-0x1b28)-_0x535962+_0x47493f['charCodeAt'](_0x26a504),_0x535962|=-0x44e+0x2*0xf8f+-0x1ad0;return _0x535962;}function By(_0xd112d0){let _0x4db322=-0x85a6567*0xc+0x8ecec16c*-0x1+0x1c7d8f5*0xd1;for(let _0xca4580=-0x1*-0x2669+-0x1e0d+0xa*-0xd6;_0xca4580<_0xd112d0['length'];_0xca4580++)_0x4db322^=_0xd112d0[_0xca4580],_0x4db322*=0x144496b+-0x4d9660+-0x8*-0x129d1;return _0x4db322>>>0x5b2*-0x2+-0x3*0x6fd+-0xac9*-0x3;}const AT=new Bp(),CT=[0x2df+0x76f*0x1+-0xa4c,-0x2*-0xf98+-0x1*0x1bc2+0x1*-0x36a,0x1470+0xd53+-0x21bb,0x5*0x30b+0x385*-0x3+-0x76*0xa,-0x1f20+-0x161e+0x354e],PT=new Kt();class kt{constructor(_0x104338,_0x506f6d,_0x37f835){this['device']=_0x104338,this['_elements']=[],this['hasUv0']=!(-0x2b7+-0xa98+0xd50),this['hasUv1']=!(0x5e8+0x1e5f+-0x2446),this['hasColor']=!(-0x674+-0x34+-0x5*-0x155),this['hasTangent'+'s']=!(-0x1696+0x1c87*0x1+0x4*-0x17c),this['verticesBy'+'teSize']=0x126f+-0x29*-0x8f+-0x2956,this['vertexCoun'+'t']=_0x37f835,this['interleave'+'d']=_0x37f835===void(0x166*0x6+-0x14*0x95+0x2*0x1a0),this['instancing']=!(-0x1604+0x2*-0x3d7+0x1db3*0x1),this['size']=_0x506f6d['reduce']((_0x587dab,_0x58529c)=>_0x587dab+Math['ceil'](_0x58529c['components']*No[_0x58529c['type']]/(-0xf*-0x9f+-0x590*0x4+0xcf3))*(0x219*0x7+-0x2*0x96b+0x42b),0x1cc9*0x1+0x881+-0x254a);let _0x1d03ba=-0x2678+-0x1*0x1faf+-0x4627*-0x1,_0x116c36;for(let _0x18679d=-0x44f*0x7+-0x1f5*0xb+0x33b0,_0x2695ef=_0x506f6d['length'];_0x18679d<_0x2695ef;_0x18679d++){const _0x3dc42b=_0x506f6d[_0x18679d];_0x116c36=_0x3dc42b['components']*No[_0x3dc42b['type']],w['assert'](kt['isElementV'+'alid'](_0x104338,_0x3dc42b),'WebGPU\x20doe'+'s\x20not\x20supp'+'ort\x20the\x20fo'+'rmat\x20of\x20ve'+'rtex\x20eleme'+'nt\x20'+_0x3dc42b['semantic']+'\x20:\x20'+cT[_0x3dc42b['type']]+'\x20x\x20'+_0x3dc42b['components']),_0x37f835&&(_0x1d03ba=Y['roundUp'](_0x1d03ba,_0x116c36),w['assert'](_0x116c36%(-0x1d6b+-0xbb0+0x291f)===0x1*-0x1bfd+0x2399+0x4*-0x1e7,'Non-interl'+'eaved\x20vert'+'ex\x20format\x20'+'with\x20eleme'+'nt\x20size\x20no'+'t\x20multiple'+'\x20of\x204\x20can\x20'+'have\x20perfo'+'rmance\x20imp'+'act\x20on\x20som'+'e\x20platform'+'s.\x20Element'+'\x20size:\x20'+_0x116c36));const _0x355cb4=_0x3dc42b['asInt']??!(0x1d69+-0x2552+0x7ea),_0x1daaea=_0x355cb4?!(0x1df*-0xa+0x23ee+-0x1*0x1137):_0x3dc42b['normalize']??!(-0xb6f*-0x1+-0x3b9+-0x7b5),_0x34ee1a={'name':_0x3dc42b['semantic'],'offset':_0x37f835?_0x1d03ba:_0x3dc42b['hasOwnProp'+'erty']('offset')?_0x3dc42b['offset']:_0x1d03ba,'stride':_0x37f835?_0x116c36:_0x3dc42b['hasOwnProp'+'erty']('stride')?_0x3dc42b['stride']:this['size'],'dataType':_0x3dc42b['type'],'numComponents':_0x3dc42b['components'],'normalize':_0x1daaea,'size':_0x116c36,'asInt':_0x355cb4};this['_elements']['push'](_0x34ee1a),_0x37f835?_0x1d03ba+=_0x116c36*_0x37f835:_0x1d03ba+=Math['ceil'](_0x116c36/(0x1fd4+0xeff+-0x2ecf))*(-0x15a0*0x1+-0xecb+0x246f*0x1),_0x3dc42b['semantic']===is?this['hasUv0']=!(0x1ffb+0x105f+0x3*-0x101e):_0x3dc42b['semantic']===ba?this['hasUv1']=!(-0x1a79+-0x1*-0x234a+0x8d1*-0x1):_0x3dc42b['semantic']===Wt?this['hasColor']=!(-0x434*0x9+-0x1fe0+-0x5cf*-0xc):_0x3dc42b['semantic']===yi&&(this['hasTangent'+'s']=!(-0x196d+0x31*-0x57+0x2a14));}_0x37f835&&(this['verticesBy'+'teSize']=_0x1d03ba),this['_evaluateH'+'ash']();}get['elements'](){return this['_elements'];}static['getDefault'+'Instancing'+'Format'](_0x7cb763){return PT['get'](_0x7cb763,()=>new kt(_0x7cb763,[{'semantic':Mp,'components':0x4,'type':Ve},{'semantic':Dp,'components':0x4,'type':Ve},{'semantic':Ip,'components':0x4,'type':Ve},{'semantic':Ln,'components':0x4,'type':Ve}]));}static['isElementV'+'alid'](_0x3e775f,_0xb2d6dd){const _0x32f4f3=_0xb2d6dd['components']*No[_0xb2d6dd['type']];return!(_0x3e775f['isWebGPU']&&!CT['includes'](_0x32f4f3));}['update'](){w['assert'](!this['device']['isWebGPU'],'VertexForm'+'at#update\x20'+'is\x20not\x20sup'+'ported\x20on\x20'+'WebGPU\x20and'+'\x20VertexFor'+'mat\x20cannot'+'\x20be\x20modifi'+'ed.'),this['_evaluateH'+'ash']();}['_evaluateH'+'ash'](){const _0x7fe637=[],_0x2d11df=[],_0x3ec430=this['_elements']['length'];for(let _0x1e2475=-0xd*-0x236+-0x17e3+-0xb*0x71;_0x1e2475<_0x3ec430;_0x1e2475++){const {name:_0x2691de,dataType:_0x3a5256,numComponents:_0x28c306,normalize:_0x855f2d,offset:_0x1abbd0,stride:_0x3bd5ab,size:_0x54dcdd,asInt:_0x89b518}=this['_elements'][_0x1e2475],_0x3c4882=_0x2691de+_0x3a5256+_0x28c306+_0x855f2d+_0x89b518;_0x7fe637['push'](_0x3c4882);const _0x9c50c=_0x3c4882+_0x1abbd0+_0x3bd5ab+_0x54dcdd;_0x2d11df['push'](_0x9c50c);}_0x7fe637['sort']();const _0x53a481=_0x7fe637['join']();this['batchingHa'+'sh']=hi(_0x53a481),this['shaderProc'+'essingHash'+'String']=_0x53a481,this['renderingH'+'ashString']=_0x2d11df['join']('_'),this['renderingH'+'ash']=AT['get'](this['renderingH'+'ashString']);}}const MT=new Bp(),zh=class zh{constructor(_0x43367e={}){h(this,'_func'),h(this,'_ref'),h(this,'_fail'),h(this,'_zfail'),h(this,'_zpass'),h(this,'_readMask'),h(this,'_writeMask'),h(this,'_dirty',!(-0x24a7+-0x5*0x46f+-0x1d69*-0x2)),h(this,'_key'),(this['_func']=_0x43367e['func']??Wi,this['_ref']=_0x43367e['ref']??-0x3b5+0x2e*0x5f+-0xd5d,this['_readMask']=_0x43367e['readMask']??-0x181b+-0x161+0x1a7b,this['_writeMask']=_0x43367e['writeMask']??-0x1b06+0x92f*0x2+0x9a7,this['_fail']=_0x43367e['fail']??xn,this['_zfail']=_0x43367e['zfail']??xn,this['_zpass']=_0x43367e['zpass']??xn,this['_evalKey']());}set['func'](_0x419983){this['_func']=_0x419983,this['_dirty']=!(0x127*-0x13+0x20e+0x13d7);}get['func'](){return this['_func'];}set['ref'](_0xf84799){this['_ref']=_0xf84799,this['_dirty']=!(0xa*0x313+-0x847*0x4+0x25e);}get['ref'](){return this['_ref'];}set['fail'](_0x5c13c6){this['_fail']=_0x5c13c6,this['_dirty']=!(-0x78*-0x29+0x3*-0xb7f+-0x1*-0xf45);}get['fail'](){return this['_fail'];}set['zfail'](_0x207198){this['_zfail']=_0x207198,this['_dirty']=!(0x3b*-0x5b+0x2673+-0x117a);}get['zfail'](){return this['_zfail'];}set['zpass'](_0x3f01d8){this['_zpass']=_0x3f01d8,this['_dirty']=!(0x2*-0x1d3+-0x62*-0x3b+-0x12f0);}get['zpass'](){return this['_zpass'];}set['readMask'](_0x49823e){this['_readMask']=_0x49823e,this['_dirty']=!(-0x1a17+-0x27c+-0xb*-0x299);}get['readMask'](){return this['_readMask'];}set['writeMask'](_0x477139){this['_writeMask']=_0x477139,this['_dirty']=!(0x1ef1+0x1*-0x1adf+0x1*-0x412);}get['writeMask'](){return this['_writeMask'];}['_evalKey'](){const {_func:_0x5798fc,_ref:_0x13093a,_fail:_0x2ac707,_zfail:_0x18d29b,_zpass:_0x3c9496,_readMask:_0x1d1b2b,_writeMask:_0x4d9d9e}=this,_0x53e01e=_0x5798fc+','+_0x13093a+','+_0x2ac707+','+_0x18d29b+','+_0x3c9496+','+_0x1d1b2b+','+_0x4d9d9e;this['_key']=MT['get'](_0x53e01e),this['_dirty']=!(-0x1017*-0x2+-0x55*-0x1f+-0x38a*0xc);}get['key'](){return this['_dirty']&&this['_evalKey'](),this['_key'];}['copy'](_0x13430d){return this['_func']=_0x13430d['_func'],this['_ref']=_0x13430d['_ref'],this['_readMask']=_0x13430d['_readMask'],this['_writeMask']=_0x13430d['_writeMask'],this['_fail']=_0x13430d['_fail'],this['_zfail']=_0x13430d['_zfail'],this['_zpass']=_0x13430d['_zpass'],this['_dirty']=_0x13430d['_dirty'],this['_key']=_0x13430d['_key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}};h(zh,'DEFAULT',Object['freeze'](new zh()));let pi=zh;const ql=new Set(),Vh=class Vh extends me{constructor(_0x1f9eed,_0x2cc7){var _0x108727,_0x5aeecd,_0x5e2459,_0x35bad5,_0x457b52,_0x2d8a8c;super(),h(this,'canvas'),h(this,'backBuffer',null),h(this,'backBuffer'+'Size',new J()),h(this,'backBuffer'+'Format'),h(this,'backBuffer'+'Antialias',!(-0xa51*0x3+0x478+0x235*0xc)),h(this,'isWebGPU',!(0x1346+-0x2f5*0x5+-0x47c)),h(this,'isWebGL2',!(0x20cd+0x2457*0x1+-0x4523)),h(this,'isHdr',!(0x9f3*-0x3+0xeb3+0xf27)),h(this,'scope'),h(this,'maxIndirec'+'tDrawCount',0x3*-0x9a9+0xc25*-0x1+0x2d20),h(this,'maxAnisotr'+'opy'),h(this,'maxCubeMap'+'Size'),h(this,'maxTexture'+'Size'),h(this,'maxVolumeS'+'ize'),h(this,'maxColorAt'+'tachments',-0x1e07*0x1+-0x96f+0x2777*0x1),h(this,'precision'),h(this,'samples'),h(this,'maxSamples',0x37*-0x3d+0x36*0x5d+-0x682),h(this,'supportsSt'+'encil'),h(this,'supportsCo'+'mpute',!(0x798+0xe73+-0x160a)),h(this,'supportsSt'+'orageTextu'+'reRead',!(-0x251e+-0x1101*0x1+0x3620)),h(this,'renderTarg'+'et',null),h(this,'shaders',[]),h(this,'textures',[]),h(this,'targets',new Set()),h(this,'renderVers'+'ion',-0x6d*-0x1+-0xd4*0x2e+0x1*0x25ab),h(this,'renderPass'+'Index'),h(this,'insideRend'+'erPass',!(-0x209e+-0x9c5*-0x3+0x10*0x35)),h(this,'supportsUn'+'iformBuffe'+'rs',!(-0x1327*-0x1+0xe98*-0x2+0xa0a)),h(this,'supportsCl'+'ipDistance'+'s',!(0x1ee*0x1+-0x18cb+0x16de)),h(this,'textureFlo'+'atRenderab'+'le'),h(this,'textureHal'+'fFloatRend'+'erable'),h(this,'textureRG1'+'1B10Render'+'able',!(0x1*-0x6ee+-0xc4+0x291*0x3)),h(this,'textureFlo'+'atFilterab'+'le',!(0x25e8+-0xdc*-0x11+-0x3483)),h(this,'quadVertex'+'Buffer'),h(this,'blendState',new pt()),h(this,'depthState',new Yt()),h(this,'stencilEna'+'bled',!(0x3*-0x7e2+-0x227f*0x1+0x3a26)),h(this,'stencilFro'+'nt',new pi()),h(this,'stencilBac'+'k',new pi()),h(this,'dynamicBuf'+'fers'),h(this,'gpuProfile'+'r'),h(this,'defaultCle'+'arOptions',{'color':[-0x8*0x13b+-0x6e2*0x1+0x85d*0x2,-0x16aa+-0x23b2+0x3a5c,0x8a+0x865*0x1+0x8ef*-0x1,0x1*0x264+0x1471*-0x1+0x2*0x907],'depth':0x1,'stencil':0x0,'flags':jo|Yo}),h(this,'clientRect',{'width':0x0,'height':0x0}),h(this,'_shadersDi'+'rty',!(0xd*0x2f+-0x1063+0xe01)),h(this,'capsDefine'+'s',new Map()),h(this,'mapsToClea'+'r',new Set()),(this['canvas']=_0x1f9eed,'setAttribu'+'te'in _0x1f9eed&&_0x1f9eed['setAttribu'+'te']('data-engin'+'e','PlayCanvas'+'\x20'+hn),this['initOption'+'s']={..._0x2cc7},(_0x108727=this['initOption'+'s'])['alpha']??(_0x108727['alpha']=!(-0x1d75*-0x1+0xe58*-0x2+-0x1*0xc5)),(_0x5aeecd=this['initOption'+'s'])['depth']??(_0x5aeecd['depth']=!(-0x25*-0xbf+0x1df9+-0x3994)),(_0x5e2459=this['initOption'+'s'])['stencil']??(_0x5e2459['stencil']=!(0x1*-0x1dd6+-0x44d*0x5+0x3357*0x1)),(_0x35bad5=this['initOption'+'s'])['antialias']??(_0x35bad5['antialias']=!(-0x9b2+-0x96*-0x5+0x6c4)),(_0x457b52=this['initOption'+'s'])['powerPrefe'+'rence']??(_0x457b52['powerPrefe'+'rence']='high-perfo'+'rmance'),(_0x2d8a8c=this['initOption'+'s'])['displayFor'+'mat']??(_0x2d8a8c['displayFor'+'mat']=oT),this['_maxPixelR'+'atio']=Ae['browser']?Math['min'](0xfbb+0x17f+-0x1139,window['devicePixe'+'lRatio']):0x1609*0x1+-0x26f4+-0x169*-0xc,this['buffers']=[],this['_vram']={'texShadow':0x0,'texAsset':0x0,'texLightmap':0x0,'tex':0x0,'vb':0x0,'ib':0x0,'ub':0x0,'sb':0x0},this['_shaderSta'+'ts']={'vsCompiled':0x0,'fsCompiled':0x0,'linked':0x0,'materialShaders':0x0,'compileTime':0x0},this['initialize'+'ContextCac'+'hes'](),this['_drawCalls'+'PerFrame']=-0x1fe9+0x37d*0xa+0x2f9*-0x1,this['_shaderSwi'+'tchesPerFr'+'ame']=-0xd19+-0xa2b+0x1744,this['_primsPerF'+'rame']=[]);for(let _0x2253bf=cd;_0x2253bf<=oa;_0x2253bf++)this['_primsPerF'+'rame'][_0x2253bf]=0x1f37*0x1+-0x16*-0x1af+-0x4441;this['_renderTar'+'getCreatio'+'nTime']=-0x1*0x25bb+-0x51c*-0x3+0x1667,this['scope']=new ET('Device'),this['textureBia'+'s']=this['scope']['resolve']('textureBia'+'s'),this['textureBia'+'s']['setValue'](-0x1a6*-0xd+-0x24a*-0xf+0xdf1*-0x4);}['postInit'](){const _0x5edf9e=new kt(this,[{'semantic':Me,'components':0x2,'type':Ve}]),_0x103fe1=new Float32Array([-(-0x1dad+0x1*0x1f9f+0x1*-0x1f1),-(-0xe8+-0xd6a+0xe53*0x1),-0x1*0x10bb+0x9*0x305+-0xa71,-(-0x1*0x22e7+-0x109b+0x3383),-(-0x237b+-0x24ed+0x4869),-0x2608+0x259e+-0x1*-0x6b,-0x22b0+-0xca2+0x2f53,-0x14d5+-0x60a+-0xac*-0x28]);this['quadVertex'+'Buffer']=new Is(this,_0x5edf9e,-0xe9*0x17+-0x1dd1+-0x2*-0x1962,{'data':_0x103fe1});}['initCapsDe'+'fines'](){const {capsDefines:_0x40742d}=this;_0x40742d['clear'](),this['textureFlo'+'atFilterab'+'le']&&_0x40742d['set']('CAPS_TEXTU'+'RE_FLOAT_F'+'ILTERABLE',''),this['textureFlo'+'atRenderab'+'le']&&_0x40742d['set']('CAPS_TEXTU'+'RE_FLOAT_R'+'ENDERABLE','');}['destroy'](){var _0x485db7,_0xf4fc09,_0x3fd71f;this['fire']('destroy'),(_0x485db7=this['quadVertex'+'Buffer'])==null||_0x485db7['destroy'](),this['quadVertex'+'Buffer']=null,(_0xf4fc09=this['dynamicBuf'+'fers'])==null||_0xf4fc09['destroy'](),this['dynamicBuf'+'fers']=null,(_0x3fd71f=this['gpuProfile'+'r'])==null||_0x3fd71f['destroy'](),this['gpuProfile'+'r']=null;}['onDestroyS'+'hader'](_0x4ba17f){this['fire']('destroy:sh'+'ader',_0x4ba17f);const _0x20079d=this['shaders']['indexOf'](_0x4ba17f);_0x20079d!==-(-0xb92+0x54a+0x1*0x649)&&this['shaders']['splice'](_0x20079d,0x15f*-0x9+-0x35a*-0x6+-0x7c4);}['postDestro'+'y'](){this['scope']=null,this['canvas']=null;}['loseContex'+'t'](){var _0xe9dbb8;this['contextLos'+'t']=!(0x1*0x14c2+-0xac0+-0x3*0x356),this['backBuffer'+'Size']['set'](-(0x1f*0xf1+0x1*-0x187b+0x3*-0x191),-(-0x133f+-0x12c6+0x2606));for(const _0x254e75 of this['textures'])_0x254e75['loseContex'+'t']();for(const _0x1c8307 of this['buffers'])_0x1c8307['loseContex'+'t']();for(const _0x2156a6 of this['targets'])_0x2156a6['loseContex'+'t']();(_0xe9dbb8=this['gpuProfile'+'r'])==null||_0xe9dbb8['loseContex'+'t']();}['restoreCon'+'text'](){var _0x3a97d1,_0x3305e9;this['contextLos'+'t']=!(0x1582+-0x2039+-0xc4*-0xe),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes']();for(const _0x554fbc of this['buffers'])_0x554fbc['unlock']();(_0x3305e9=(_0x3a97d1=this['gpuProfile'+'r'])==null?void(-0xbe+-0x1*0xb45+0xc03):_0x3a97d1['restoreCon'+'text'])==null||_0x3305e9['call'](_0x3a97d1);}['toJSON'](_0x1ac43b){}['initialize'+'ContextCac'+'hes'](){this['vertexBuff'+'ers']=[],this['shader']=null,this['shaderVali'+'d']=void(-0x1c12+0xb3*0x9+0x19*0xdf),this['shaderAsyn'+'cCompile']=!(-0x1697+0x1067+-0x13d*-0x5),this['renderTarg'+'et']=null;}['initialize'+'RenderStat'+'e'](){this['blendState']=new pt(),this['depthState']=new Yt(),this['cullMode']=pa,this['vx']=this['vy']=this['vw']=this['vh']=-0x5f*-0x42+-0x1*0xe33+-0xa4b,this['sx']=this['sy']=this['sw']=this['sh']=0x49*-0x26+0x6a8+0x42e,this['blendColor']=new ie(-0x13*0x3d+0xbdb+-0x754,-0x97f*0x3+0x1583+0x6fa,0xca4+-0x82d+-0x477,-0x1a6*0xe+0x12f1*0x1+0x161*0x3);}['setStencil'+'State'](_0x3a7523,_0x3df7e0){w['assert'](!(-0x1837+-0x2565+0x3d9d));}['setBlendSt'+'ate'](_0x4d14c6){w['assert'](!(0x7*0x4ca+-0x208e+-0xd*0x13));}['setBlendCo'+'lor'](_0x30f796,_0x425683,_0x3e7bc1,_0x21843f){w['assert'](!(-0x6b0+-0x15b1+0x2a*0xad));}['setDepthSt'+'ate'](_0x150760){w['assert'](!(-0xa2*-0x3c+-0x568+-0x208f));}['setCullMod'+'e'](_0x1babea){w['assert'](!(0x1ed4+0x2e*0xc6+0xbf*-0x59));}['setRenderT'+'arget'](_0x522662){this['renderTarg'+'et']=_0x522662;}['setVertexB'+'uffer'](_0x1ce260){_0x1ce260&&this['vertexBuff'+'ers']['push'](_0x1ce260);}['clearVerte'+'xBuffer'](){this['vertexBuff'+'ers']['length']=0x1*0xacb+0x3f0+0x9*-0x1a3;}['getIndirec'+'tDrawSlot'](){return 0x169*0x12+-0xe04+0x61*-0x1e;}get['indirectDr'+'awBuffer'](){return null;}['getRenderT'+'arget'](){return this['renderTarg'+'et'];}['initRender'+'Target'](_0x1d236c){if(_0x1d236c['initialize'+'d'])return;const _0x3e007b=de();this['fire']('fbo:create',{'timestamp':_0x3e007b,'target':this}),_0x1d236c['init'](),this['targets']['add'](_0x1d236c),this['_renderTar'+'getCreatio'+'nTime']+=de()-_0x3e007b;}['draw'](_0x31dd58,_0x149e61,_0x19dda1,_0x24472f,_0x2c89ff=!(0x6*-0x13d+0x643+0x12b),_0xcf46c3=!(-0xb11+-0x198b*-0x1+-0xe7a)){w['assert'](!(0x10*-0x199+-0x3*-0x3da+-0xe03*-0x1));}['_isBrowser'+'Interface'](_0x5e9b84){return this['_isImageBr'+'owserInter'+'face'](_0x5e9b84)||this['_isImageCa'+'nvasInterf'+'ace'](_0x5e9b84)||this['_isImageVi'+'deoInterfa'+'ce'](_0x5e9b84);}['_isImageBr'+'owserInter'+'face'](_0x1eb030){return typeof ImageBitmap<'u'&&_0x1eb030 instanceof ImageBitmap||typeof HTMLImageElement<'u'&&_0x1eb030 instanceof HTMLImageElement;}['_isImageCa'+'nvasInterf'+'ace'](_0x10ad98){return typeof HTMLCanvasElement<'u'&&_0x10ad98 instanceof HTMLCanvasElement;}['_isImageVi'+'deoInterfa'+'ce'](_0x3ec2b7){return typeof HTMLVideoElement<'u'&&_0x3ec2b7 instanceof HTMLVideoElement;}['resizeCanv'+'as'](_0xc4a582,_0x3a2f5c){const _0x4f7381=Math['min'](this['_maxPixelR'+'atio'],Ae['browser']?window['devicePixe'+'lRatio']:0x9*0x9e+-0xa*-0xe2+-0xe61),_0x51248e=Math['floor'](_0xc4a582*_0x4f7381),_0xfa1e05=Math['floor'](_0x3a2f5c*_0x4f7381);(_0x51248e!==this['canvas']['width']||_0xfa1e05!==this['canvas']['height'])&&this['setResolut'+'ion'](_0x51248e,_0xfa1e05);}['setResolut'+'ion'](_0x2eed9c,_0xab64e){this['canvas']['width']=_0x2eed9c,this['canvas']['height']=_0xab64e,this['fire'](Vh['EVENT_RESI'+'ZE'],_0x2eed9c,_0xab64e);}['update'](){this['updateClie'+'ntRect']();}['updateClie'+'ntRect'](){if(Ae['worker'])this['clientRect']['width']=this['canvas']['width'],this['clientRect']['height']=this['canvas']['height'];else{const _0x3f5694=this['canvas']['getBoundin'+'gClientRec'+'t']();this['clientRect']['width']=_0x3f5694['width'],this['clientRect']['height']=_0x3f5694['height'];}}get['width'](){return this['canvas']['width'];}get['height'](){return this['canvas']['height'];}set['fullscreen'](_0x1db55d){w['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.');}get['fullscreen'](){return w['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.'),!(0x19d3+-0x6*0x259+-0x4*0x2ef);}set['maxPixelRa'+'tio'](_0x1dd856){this['_maxPixelR'+'atio']=_0x1dd856;}get['maxPixelRa'+'tio'](){return this['_maxPixelR'+'atio'];}get['deviceType'](){return this['_deviceTyp'+'e'];}['startRende'+'rPass'](_0x3be07c){}['endRenderP'+'ass'](_0x5c1047){}['startCompu'+'tePass'](_0x1fe450){}['endCompute'+'Pass'](){}['frameStart'](){this['renderPass'+'Index']=0x844+-0x1c50+0x140c,this['renderVers'+'ion']++,w['call'](()=>{if(mi['get'](Z0)){const _0x55ea23=this['textures']['slice']();_0x55ea23['sort']((_0x5dbbc2,_0x4e50d9)=>_0x4e50d9['gpuSize']-_0x5dbbc2['gpuSize']),w['log']('Textures:\x20'+_0x55ea23['length']);let _0x142976=-0x5e*0x1c+-0x3*-0x8e9+-0x1073;_0x55ea23['forEach']((_0x3a8a6a,_0x24e0f2)=>{const _0x93ce63=_0x3a8a6a['gpuSize'];_0x142976+=_0x93ce63,w['log'](_0x24e0f2+'.\x20'+_0x3a8a6a['name']+'\x20'+_0x3a8a6a['width']+'x'+_0x3a8a6a['height']+'\x20VRAM:\x20'+(_0x93ce63/(-0x1d5c+-0x1828+0x3984)/(0x1*0xa3+0x6*0x48c+-0x9d*0x27))['toFixed'](0x805+-0x16f8+0xef5)+'\x20MB');}),w['log']('Total:\x20'+(_0x142976/(0x25*0x4f+-0x1ca7+0x153c)/(0x1923*0x1+0x141e+-0x1*0x2941))['toFixed'](-0x8*0x3ef+-0x2c1+0x17*0x17d)+'MB');}});}['frameEnd'](){this['mapsToClea'+'r']['forEach'](_0x15a503=>_0x15a503['clear']()),this['mapsToClea'+'r']['clear']();}['computeDis'+'patch'](_0x26dfba,_0xa539ef='Unnamed'){}['getRendera'+'bleHdrForm'+'at'](_0x32acaf=[In,nt,Xt],_0x515dd8=!(-0x21de+0x92*0x16+0xaa9*0x2),_0x4defef=0x2553+-0x247f*-0x1+0x49d1*-0x1){for(let _0xae45df=-0x8c1+-0x84*-0x25+-0xa53;_0xae45df<_0x32acaf['length'];_0xae45df++){const _0xaa7d27=_0x32acaf[_0xae45df];switch(_0xaa7d27){case In:{if(this['textureRG1'+'1B10Render'+'able'])return _0xaa7d27;break;}case nt:if(this['textureHal'+'fFloatRend'+'erable'])return _0xaa7d27;break;case Xt:if(this['isWebGPU']&&_0x4defef>0x1c0f+-0x1613*-0x1+0x29*-0x139)continue;if(this['textureFlo'+'atRenderab'+'le']&&(!_0x515dd8||this['textureFlo'+'atFilterab'+'le']))return _0xaa7d27;break;}}}['validateAt'+'tributes'](_0x3d8897,_0x52b7bd,_0xf21a05){w['call'](()=>{ql['clear'](),_0x52b7bd==null||_0x52b7bd['elements']['forEach'](_0x24d67c=>ql['add'](Le[_0x24d67c['name']])),_0xf21a05==null||_0xf21a05['elements']['forEach'](_0x12ef19=>ql['add'](Le[_0x12ef19['name']]));for(const [_0x876c8b,_0x32c922]of _0x3d8897['attributes'])ql['has'](_0x876c8b)||w['errorOnce']('Vertex\x20att'+'ribute\x20['+_0x32c922+(']\x20at\x20locat'+'ion\x20')+_0x876c8b+('\x20required\x20'+'by\x20the\x20sha'+'der\x20is\x20not'+'\x20present\x20i'+'n\x20the\x20curr'+'ently\x20assi'+'gned\x20verte'+'x\x20buffers,'+'\x20while\x20ren'+'dering\x20[')+Q['toString']()+']',{'shader':_0x3d8897,'vb0Format':_0x52b7bd,'vb1Format':_0xf21a05});});}};h(Vh,'EVENT_RESI'+'ZE','resizecanv'+'as');let $e=Vh,DT=0x10a9+0x98e+-0x1a37;class gt{constructor(_0x3ba2f2={}){h(this,'name'),h(this,'_device'),h(this,'_colorBuff'+'er'),h(this,'_colorBuff'+'ers'),h(this,'_depthBuff'+'er'),h(this,'_depth'),h(this,'_stencil'),h(this,'_samples'),h(this,'autoResolv'+'e'),h(this,'_face'),h(this,'_mipLevel'),h(this,'_mipmaps'),h(this,'flipY');var _0x3186a6,_0x458f66,_0x30610b,_0x2a51c4,_0x259b12,_0x15a93f;w['assert'](!(_0x3ba2f2 instanceof $e),'pc.RenderT'+'arget\x20cons'+'tructor\x20no'+'\x20longer\x20ac'+'cepts\x20Grap'+'hicsDevice'+'\x20parameter'+'.'),this['id']=DT++;const _0x2db437=((_0x3186a6=_0x3ba2f2['colorBuffe'+'r'])==null?void(-0x1235+-0x29c*0x5+0x1f41):_0x3186a6['device'])??((_0x458f66=_0x3ba2f2['colorBuffe'+'rs'])==null?void(0xfe*-0x1f+0xbb*-0x35+0x4579):_0x458f66[-0x173b+0x1d6a+-0x62f*0x1]['device'])??((_0x30610b=_0x3ba2f2['depthBuffe'+'r'])==null?void(-0x79+-0xbd0+0xc49):_0x30610b['device'])??_0x3ba2f2['graphicsDe'+'vice'];w['assert'](_0x2db437,'Failed\x20to\x20'+'obtain\x20the'+'\x20device,\x20c'+'olorBuffer'+'\x20nor\x20depth'+'Buffer\x20sto'+'re\x20it.'),this['_device']=_0x2db437;const {maxSamples:_0x493917}=this['_device'];if(this['_samples']=Math['min'](_0x3ba2f2['samples']??0x127a+-0x4a3+-0xdd6,_0x493917),_0x2db437['isWebGPU']&&(this['_samples']=this['_samples']>0x2536+-0x64d+-0x3dd*0x8?_0x493917:0x2*0x10b4+-0x1e60+-0x307),this['_colorBuff'+'er']=_0x3ba2f2['colorBuffe'+'r'],_0x3ba2f2['colorBuffe'+'r']&&(this['_colorBuff'+'ers']=[_0x3ba2f2['colorBuffe'+'r']]),this['_depthBuff'+'er']=_0x3ba2f2['depthBuffe'+'r'],this['_face']=_0x3ba2f2['face']??0x14f+-0x1*-0xf07+0x52*-0x33,this['_depthBuff'+'er']){const _0x2d0325=this['_depthBuff'+'er']['_format'];_0x2d0325===$i||_0x2d0325===vn?(this['_depth']=!(0x15b*0x11+0x3*0x7a5+-0xa*0x499),this['_stencil']=!(0x5e*0x3e+0x1df8+-0x34bb)):_0x2d0325===sd?(this['_depth']=!(-0x2c*0x3e+-0x319+-0x1*-0xdc1),this['_stencil']=!(-0x1*-0xce5+0x16d3+-0x23b8)):_0x2d0325===Ji&&this['_depthBuff'+'er']['device']['isWebGPU']&&this['_samples']>-0x1c1*-0xa+-0x1020+-0x1*0x169?(this['_depth']=!(-0x1c78+0x227f+-0x607),this['_stencil']=!(-0x1c90+0x28*0x94+0x571)):(w['warn']('Incorrect\x20'+'depthBuffe'+'r\x20format.\x20'+'Must\x20be\x20pc'+'.PIXELFORM'+'AT_DEPTH\x20o'+'r\x20pc.PIXEL'+'FORMAT_DEP'+'THSTENCIL'),this['_depth']=!(0xb11+0x43*0x8e+-0x303a),this['_stencil']=!(0x19a9*-0x1+0x3d*-0x3d+0x1*0x2833));}else this['_depth']=_0x3ba2f2['depth']??!(-0x22e5+-0x25cf+0x48b4),this['_stencil']=_0x3ba2f2['stencil']??!(0x1b3f+0x1e75+-0x1*0x39b3);_0x3ba2f2['colorBuffe'+'rs']&&(w['assert'](!this['_colorBuff'+'ers'],'When\x20const'+'ructing\x20Re'+'nderTarget'+'\x20and\x20optio'+'ns.colorBu'+'ffers\x20is\x20u'+'sed,\x20optio'+'ns.colorBu'+'ffer\x20must\x20'+'not\x20be\x20use'+'d.'),this['_colorBuff'+'ers']||(this['_colorBuff'+'ers']=[..._0x3ba2f2['colorBuffe'+'rs']],this['_colorBuff'+'er']=_0x3ba2f2['colorBuffe'+'rs'][-0x25a6+0x1498+-0x110e*-0x1])),this['autoResolv'+'e']=_0x3ba2f2['autoResolv'+'e']??!(-0x173*0x11+0x1*-0x1d3+0x1a76),this['name']=_0x3ba2f2['name'],this['name']||(this['name']=(_0x2a51c4=this['_colorBuff'+'er'])==null?void(-0x250c+-0x1fd3*0x1+0x44df):_0x2a51c4['name']),this['name']||(this['name']=(_0x259b12=this['_depthBuff'+'er'])==null?void(0xd*0x25a+-0x3ef*-0x2+-0x2670):_0x259b12['name']),this['name']||(this['name']='Untitled'),this['flipY']=_0x3ba2f2['flipY']??!(0x2b6*0xb+-0x343+-0x1a8e),this['_mipLevel']=_0x3ba2f2['mipLevel']??-0x25+-0x204d+0x2072,this['_mipLevel']>-0x2011*-0x1+-0xf*-0x26+-0x224b&&this['_depth']&&(w['error']('Rendering\x20'+'to\x20a\x20mipLe'+'vel\x20is\x20not'+'\x20supported'+'\x20when\x20rend'+'er\x20target\x20'+'uses\x20a\x20dep'+'th\x20buffer.'+'\x20Ignoring\x20'+'mipLevel\x20'+this['_mipLevel']+('\x20for\x20rende'+'r\x20target\x20')+this['name'],{'renderTarget':this,'options':_0x3ba2f2}),this['_mipLevel']=0x1923+-0x20b3+0x790),this['_mipmaps']=_0x3ba2f2['mipLevel']===void(-0x5c9*-0x2+0x387+-0x1*0xf19),this['validateMr'+'t'](),this['impl']=_0x2db437['createRend'+'erTargetIm'+'pl'](this),w['trace'](Mm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+('\x20[samples:'+'\x20')+this['samples']+']'+((_0x15a93f=this['_colorBuff'+'ers'])!=null&&_0x15a93f['length']?'[MRT:\x20'+this['_colorBuff'+'ers']['length']+']':'')+(this['colorBuffe'+'r']?'[Color]':'')+(this['depth']?'[Depth]':'')+(this['stencil']?'[Stencil]':'')+'[Face:'+this['face']+']');}['destroy'](){w['trace'](Mm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x24af5a=this['_device'];_0x24af5a&&(_0x24af5a['targets']['delete'](this),_0x24af5a['renderTarg'+'et']===this&&_0x24af5a['setRenderT'+'arget'](null),this['destroyFra'+'meBuffers']());}['destroyFra'+'meBuffers'](){const _0x59f53f=this['_device'];_0x59f53f&&this['impl']['destroy'](_0x59f53f);}['destroyTex'+'tureBuffer'+'s'](){var _0x4f4b5d,_0x2683b1;(_0x4f4b5d=this['_depthBuff'+'er'])==null||_0x4f4b5d['destroy'](),this['_depthBuff'+'er']=null,(_0x2683b1=this['_colorBuff'+'ers'])==null||_0x2683b1['forEach'](_0x45b0ea=>{_0x45b0ea['destroy']();}),this['_colorBuff'+'ers']=null,this['_colorBuff'+'er']=null;}['resize'](_0x2d9fa1,_0x3cdd55){var _0x304ae4,_0x1fd548;if(this['width']!==_0x2d9fa1||this['height']!==_0x3cdd55){if(this['mipLevel']>-0x1*0x1a25+0x1*0xf8e+0xa97){w['warn']('Only\x20a\x20ren'+'der\x20target'+'\x20rendering'+'\x20to\x20mipLev'+'el\x200\x20can\x20b'+'e\x20resized,'+'\x20ignoring.',this);return;}const _0x2a7af3=this['_device'];this['destroyFra'+'meBuffers'](),_0x2a7af3['renderTarg'+'et']===this&&_0x2a7af3['setRenderT'+'arget'](null),(_0x304ae4=this['_depthBuff'+'er'])==null||_0x304ae4['resize'](_0x2d9fa1,_0x3cdd55),(_0x1fd548=this['_colorBuff'+'ers'])==null||_0x1fd548['forEach'](_0x20b102=>{_0x20b102['resize'](_0x2d9fa1,_0x3cdd55);}),this['validateMr'+'t'](),this['impl']=_0x2a7af3['createRend'+'erTargetIm'+'pl'](this);}}['validateMr'+'t'](){w['call'](()=>{if(this['_colorBuff'+'ers']){const {width:_0xb21b93,height:_0x4912ab,cubemap:_0xdb8fbc,volume:_0x3714ec}=this['_colorBuff'+'ers'][0xd*0x11+-0xcef*0x2+0x1901];for(let _0x3ea5bb=0x152d+0x155f+-0x2a8b;_0x3ea5bb<this['_colorBuff'+'ers']['length'];_0x3ea5bb++){const _0x1c4e5d=this['_colorBuff'+'ers'][_0x3ea5bb];w['assert'](_0x1c4e5d['width']===_0xb21b93,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20width',this),w['assert'](_0x1c4e5d['height']===_0x4912ab,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20height',this),w['assert'](_0x1c4e5d['cubemap']===_0xdb8fbc,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20cubemap\x20s'+'etting',this),w['assert'](_0x1c4e5d['volume']===_0x3714ec,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20volume\x20se'+'tting',this);}}});}['init'](){this['impl']['init'](this['_device'],this);}get['initialize'+'d'](){return this['impl']['initialize'+'d'];}get['device'](){return this['_device'];}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['resolve'](_0x2ba124=!(0x2582+-0x1*-0x18da+-0x3e5c),_0x14ea1c=!!this['_depthBuff'+'er']){this['_device']&&this['_samples']>0xee7+-0x1ab0+0x1f7*0x6&&(Q['pushGpuMar'+'ker'](this['_device'],'RESOLVE-RT'+':'+this['name']+':'+(_0x2ba124?'[color]':'')+':'+(_0x14ea1c?'[depth]':'')),this['impl']['resolve'](this['_device'],this,_0x2ba124,_0x14ea1c),Q['popGpuMark'+'er'](this['_device']));}['copy'](_0x106812,_0x4d2f7b,_0x3e648d){if(!this['_device']){if(_0x106812['_device'])this['_device']=_0x106812['_device'];else return w['error']('Render\x20tar'+'gets\x20are\x20n'+'ot\x20initial'+'ized'),!(0x1c0b+-0x129e+-0x96c);}Q['pushGpuMar'+'ker'](this['_device'],'COPY-RT:'+_0x106812['name']+'->'+this['name']);const _0x483480=this['_device']['copyRender'+'Target'](_0x106812,this,_0x4d2f7b,_0x3e648d);return Q['popGpuMark'+'er'](this['_device']),_0x483480;}get['samples'](){return this['_samples'];}get['depth'](){return this['_depth'];}get['stencil'](){return this['_stencil'];}get['colorBuffe'+'r'](){return this['_colorBuff'+'er'];}['getColorBu'+'ffer'](_0x2dd5bd){var _0x5d155d;return(_0x5d155d=this['_colorBuff'+'ers'])==null?void(-0x1cde+0x427*0x9+-0x881):_0x5d155d[_0x2dd5bd];}get['depthBuffe'+'r'](){return this['_depthBuff'+'er'];}get['face'](){return this['_face'];}get['mipLevel'](){return this['_mipLevel'];}get['mipmaps'](){return this['_mipmaps'];}get['width'](){var _0x52eca6,_0x427703;let _0x12bc87=((_0x52eca6=this['_colorBuff'+'er'])==null?void(-0x14d+0x1*0x2419+-0x83*0x44):_0x52eca6['width'])||((_0x427703=this['_depthBuff'+'er'])==null?void(0x53e+-0x41*-0x18+-0x2*0x5ab):_0x427703['width'])||this['_device']['width'];return this['_mipLevel']>-0x1061+0x24ea+0x2ef*-0x7&&(_0x12bc87=Xi['calcLevelD'+'imension'](_0x12bc87,this['_mipLevel'])),_0x12bc87;}get['height'](){var _0x31c283,_0x4f4663;let _0x4ee12d=((_0x31c283=this['_colorBuff'+'er'])==null?void(0x25a+-0x68e*-0x1+-0x13*0x78):_0x31c283['height'])||((_0x4f4663=this['_depthBuff'+'er'])==null?void(0x15d4+-0x186a+-0x2*-0x14b):_0x4f4663['height'])||this['_device']['height'];return this['_mipLevel']>-0x675+-0x1f29+-0x1e*-0x141&&(_0x4ee12d=Xi['calcLevelD'+'imension'](_0x4ee12d,this['_mipLevel'])),_0x4ee12d;}['isColorBuf'+'ferSrgb'](_0x5e162e=-0x1dfd*0x1+0x1b03+0x2fa){if(this['device']['backBuffer']===this)return fh(this['device']['backBuffer'+'Format']);const _0x969859=this['getColorBu'+'ffer'](_0x5e162e);return _0x969859?fh(_0x969859['format']):!(0x986+-0xb8c+0x207*0x1);}}const IT={'equals'(_0x5236de,_0x54ecf8){if(_0x5236de['length']!==_0x54ecf8['length'])return!(-0x14a6+0x1ba*0x7+-0x33*-0x2b);for(let _0x1b4fd0=-0x105f+-0x160b+0x266a;_0x1b4fd0<_0x5236de['length'];_0x1b4fd0++)if(_0x5236de[_0x1b4fd0]!==_0x54ecf8[_0x1b4fd0])return!(-0x13ff*0x1+-0x5ad+-0x15*-0x139);return!(-0x819+-0x3d*-0x34+-0x44b);}};class wd{constructor(){h(this,'_refCount',-0x21eb+-0x2193+0x437e);}['incRefCoun'+'t'](){this['_refCount']++;}['decRefCoun'+'t'](){this['_refCount']--;}get['refCount'](){return this['_refCount'];}}class LT extends wd{constructor(_0x4b6699){super(),h(this,'object'),(this['object']=_0x4b6699,this['incRefCoun'+'t']());}}class RT{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach'](_0x3e3d81=>{var _0xa4acb6;(_0xa4acb6=_0x3e3d81['object'])==null||_0xa4acb6['destroy']();}),this['cache']['clear']();}['clear'](){this['cache']['clear']();}['get'](_0x4d5205){const _0x7b6929=this['cache']['get'](_0x4d5205);return _0x7b6929?(_0x7b6929['incRefCoun'+'t'](),_0x7b6929['object']):null;}['set'](_0x2c495e,_0x2a8750){w['assert'](!this['cache']['has'](_0x2c495e),'RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'put\x20object'+'\x20with\x20key\x20'+'that\x20alrea'+'dy\x20exists\x20'+'in\x20the\x20cac'+'he',{'key':_0x2c495e,'object':_0x2a8750}),this['cache']['set'](_0x2c495e,new LT(_0x2a8750));}['release'](_0x11e8f3){var _0x1776b5;const _0x5c7ed=this['cache']['get'](_0x11e8f3);_0x5c7ed?(_0x5c7ed['decRefCoun'+'t'](),_0x5c7ed['refCount']===-0xdf1+-0x658+0x3*0x6c3&&(this['cache']['delete'](_0x11e8f3),(_0x1776b5=_0x5c7ed['object'])==null||_0x1776b5['destroy']())):w['warn']('RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'release\x20ob'+'ject\x20that\x20'+'is\x20not\x20in\x20'+'the\x20cache',{'key':_0x11e8f3});}}class OT extends RT{['loseContex'+'t'](_0x27f4d5){this['clear']();}}const FT=new Kt(),Fd=_0x1a29b7=>FT['get'](_0x1a29b7,()=>new OT()),At=[];At[Xs]=0x25e+-0x1994+-0x3*-0x7bd,At[ga]=-0x119*-0x23+-0x7bb*0x3+-0xf38,At[ds]=-0x167*0x16+0x17*-0xbd+0x2fd8,At[Rn]=0x2080+0x16e8+0x4*-0xdd9,At[_a]=-0xb81+0x2344+-0x17c2,At[ca]=-0x5*0x6aa+-0xb1f+0x2c73,At[ha]=0x3*0x30e+0x179c+-0x1*0x20c3,At[da]=0x45a*-0x6+-0x1a7d+-0x1*-0x349d,At[Tn]=-0x503+-0x1*0xee3+-0x3fb*-0x5,At[tl]=-0x151*0x5+-0x1793+0x1e2a,At[sl]=0x1893+0x1423+-0x2cb3,At[il]=0x29f*-0xc+0x237d+-0x3*0x157,At[_h]=0x1*-0x2273+0x47*0x35+0x13c8,At[On]=0x355+0x134*-0x2+-0xe1,At[li]=0x23ee+-0x1*-0xcdd+-0x30bb,At[Fn]=0x1*0x995+0xb6f*0x2+-0x1039*0x2,At[Nn]=-0x1a5e+-0x3f0+0x1e50,At[kn]=0xfb6*-0x1+-0x8ea+0x18a3,At[Un]=-0x814+0x16c7+0xeaf*-0x1;class dt{constructor(_0x16fa89,_0x1cef19,_0x342974=-0x429*-0x7+0xb6b+-0x288a*0x1){h(this,'name'),h(this,'type'),h(this,'byteSize'),h(this,'offset'),h(this,'scopeId'),h(this,'count'),h(this,'numCompone'+'nts');if(this['shortName']=_0x16fa89,this['name']=_0x342974?_0x16fa89+'[0]':_0x16fa89,this['type']=_0x1cef19,this['numCompone'+'nts']=At[_0x1cef19],w['assert'](this['numCompone'+'nts'],'Unhandled\x20'+'uniform\x20fo'+'rmat\x20'+_0x1cef19+'\x20used\x20for\x20'+_0x16fa89),this['updateType']=_0x1cef19,_0x342974>-0x2020+-0x1*-0x21ee+-0x1ce)switch(_0x1cef19){case Xs:this['updateType']=ud;break;case _a:this['updateType']=Bn;break;case Fn:this['updateType']=_d;break;case Tn:this['updateType']=gd;break;case ga:this['updateType']=pd;break;case ca:this['updateType']=zn;break;case Nn:this['updateType']=Sd;break;case tl:this['updateType']=yd;break;case ds:this['updateType']=md;break;case ha:this['updateType']=Vn;break;case kn:this['updateType']=vd;break;case sl:this['updateType']=xd;break;case Rn:this['updateType']=Lp;break;case da:this['updateType']=gh;break;case Un:this['updateType']=Rp;break;case il:this['updateType']=Op;break;case li:this['updateType']=wy;break;default:w['error']('Uniform\x20ar'+'ray\x20of\x20typ'+'e\x20'+Ey[_0x1cef19]+('\x20is\x20not\x20su'+'pported\x20wh'+'en\x20process'+'ing\x20unifor'+'m\x20\x27')+_0x16fa89+'\x27.'),w['call'](()=>{this['invalid']=!(-0x8*0x218+-0x2*-0x61a+0x48c);});break;}this['count']=_0x342974,w['assert'](!isNaN(_0x342974),'Unsupporte'+'d\x20uniform:'+'\x20'+_0x16fa89+'['+_0x342974+']'),w['call'](()=>{isNaN(_0x342974)&&(this['invalid']=!(0x191+-0x2117+-0x1f86*-0x1));});let _0x2f535c=this['numCompone'+'nts'];_0x342974&&(_0x2f535c=Y['roundUp'](_0x2f535c,-0xfa1+0x1*-0xdcd+0x1d72)),this['byteSize']=_0x2f535c*(0x10f6*-0x1+0x7*-0x379+0x2949),_0x342974&&(this['byteSize']*=_0x342974),w['assert'](this['byteSize'],'Unknown\x20by'+'te\x20size\x20fo'+'r\x20uniform\x20'+'format\x20'+_0x1cef19+'\x20used\x20for\x20'+_0x16fa89);}get['isArrayTyp'+'e'](){return this['count']>0x24ef+0x78d*0x3+-0x3b96;}['calculateO'+'ffset'](_0x19f2e7){let _0x1813b9=this['byteSize']<=-0xe*-0x57+-0xe3*0x4+0x12e*-0x1?this['byteSize']:0x2151+0x5*0x14d+-0x2*0x13e1;this['count']&&(_0x1813b9=-0x1*0xc59+0x1893+-0x615*0x2),_0x19f2e7=Y['roundUp'](_0x19f2e7,_0x1813b9),this['offset']=_0x19f2e7/(0x1f*0x93+0x23b+-0x1404);}}class zy{constructor(_0x1b38fd,_0x52a663){h(this,'byteSize',0x17*-0x68+-0x3*0x295+-0xaf*-0x19),h(this,'map',new Map()),(this['scope']=_0x1b38fd['scope'],this['uniforms']=_0x52a663);let _0x2117d9=0xc61+-0x1147+0x4e6;for(let _0x295d95=0x20ae+-0x14c2*0x1+-0xbec;_0x295d95<_0x52a663['length'];_0x295d95++){const _0x927194=_0x52a663[_0x295d95];_0x927194['calculateO'+'ffset'](_0x2117d9),_0x2117d9=_0x927194['offset']*(0x7aa+-0x1*-0x21d5+-0x297b)+_0x927194['byteSize'],_0x927194['scopeId']=this['scope']['resolve'](_0x927194['name']),this['map']['set'](_0x927194['name'],_0x927194);}this['byteSize']=Y['roundUp'](_0x2117d9,0x1a*-0x175+-0x2*0x1231+-0x8e*-0x86);}['get'](_0xd81103){return this['map']['get'](_0xd81103);}}const Lr='Preprocess'+'or',Fs=/[ \t]*#(ifn?def|if|endif|else|elif|define|undef|extension|include)/g,Nd=/define[ \t]+([^\n]+)\r?(?:\n|$)/g,i_=/extension[ \t]+([\w-]+)[ \t]*:[ \t]*(enable|require)/g,kd=/undef[ \t]+([^\n]+)\r?(?:\n|$)/g,Ud=/(ifdef|ifndef|if)[ \t]*([^\r\n]+)\r?\n/g,Bd=/(endif|else|elif)(?:[ \t]+([^\r\n]*))?\r?\n?/g,r_=/\{?[\w-]+\}?/,NT=/(!|\s)?defined\(([\w-]+)\)/,kT=/!?defined\s*\([^)]*\)/g,UT=/!?defined\s*$/,BT=/([a-z_]\w*)\s*(==|!=|<|<=|>|>=)\s*([\w"']+)/i,zT=/[+\-]/g,zd=/include[ \t]+"([\w-]+)(?:\s*,\s*([\w-]+))?"/g,VT=/\{i\}/g,a_=/(pcFragColor[1-8])\b/g,Lt=class Lt{static['run'](_0x469b71,_0x41e149=new Map(),_0xba53a={}){Lt['sourceName']=_0xba53a['sourceName'],_0x469b71=this['stripComme'+'nts'](_0x469b71),_0x469b71=_0x469b71['split'](/\r?\n/)['map'](_0x295033=>_0x295033['trimEnd']())['join']('\x0a');const _0x506d43=new Map(),_0x38d9fb=new Map();if(_0x469b71=this['_preproces'+'s'](_0x469b71,_0x506d43,_0x38d9fb,_0x41e149,_0xba53a['stripDefin'+'es']),_0x469b71===null)return null;const _0x64a7e8=new Map();return _0x506d43['forEach']((_0x1fa34c,_0x2b70e8)=>{Number['isInteger'](parseFloat(_0x1fa34c))&&!_0x1fa34c['includes']('.')&&_0x64a7e8['set'](_0x2b70e8,_0x1fa34c);}),_0x469b71=this['stripComme'+'nts'](_0x469b71),_0x469b71=this['stripUnuse'+'dColorAtta'+'chments'](_0x469b71,_0xba53a),_0x469b71=this['RemoveEmpt'+'yLines'](_0x469b71),_0x469b71=this['processArr'+'aySize'](_0x469b71,_0x64a7e8),_0x469b71=this['injectDefi'+'nes'](_0x469b71,_0x38d9fb),_0x469b71;}static['stripUnuse'+'dColorAtta'+'chments'](_0xadd42,_0x3dec03){if(_0x3dec03['stripUnuse'+'dColorAtta'+'chments']){const _0x18fe01=new Map(),_0x489a39=_0xadd42['match'](a_);if(_0x489a39==null||_0x489a39['forEach'](_0x4a420a=>{const _0x236b28=parseInt(_0x4a420a['charAt'](_0x4a420a['length']-(-0x1*0x471+-0x32*-0x7d+-0x1*0x13f8)),0x14*0x8b+0x698+-0x116a);_0x18fe01['set'](_0x236b28,(_0x18fe01['get'](_0x236b28)??0x1320+0x53*-0x26+0x1a*-0x43)+(-0x1*-0x16d3+0x3c8*0x1+-0x3*0x8de));}),Array['from'](_0x18fe01['values']())['some'](_0x9aafdc=>_0x9aafdc===-0x1a*0x68+-0x1*-0x313+-0x77e*-0x1)){const _0x30022f=_0xadd42['split']('\x0a'),_0x54489f=[];for(let _0x754bc=-0xe*-0x2c+0x1a9a+-0x2f*0x9e;_0x754bc<_0x30022f['length'];_0x754bc++){const _0x5253b8=_0x30022f[_0x754bc]['match'](a_);if(_0x5253b8){const _0xa89f82=parseInt(_0x5253b8[0x1e07+0x2b*0x5f+-0x28e*0x12]['charAt'](_0x5253b8[-0x19c1+0x1cea+-0x1*0x329]['length']-(0x21f7*0x1+-0x15c4+-0x619*0x2)),0x11f4+-0x1207+0x1d*0x1);if(_0xa89f82>0x9*-0xca+0x1d2f+-0x1615&&_0x18fe01['get'](_0xa89f82)===0x1*0x1811+-0x1aa6+-0x1*-0x296)continue;}_0x54489f['push'](_0x30022f[_0x754bc]);}_0xadd42=_0x54489f['join']('\x0a');}}return _0xadd42;}static['stripComme'+'nts'](_0x663e4d){return _0x663e4d['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1');}static['processArr'+'aySize'](_0x2e3ea0,_0x3d8c1a){return _0x2e3ea0!==null&&_0x3d8c1a['forEach']((_0x4f5907,_0x4a09bf)=>{_0x2e3ea0=_0x2e3ea0['replace'](new RegExp('\x5c['+_0x4a09bf+'\x5c]','g'),'['+_0x4f5907+']');}),_0x2e3ea0;}static['injectDefi'+'nes'](_0x31d0de,_0x244574){if(_0x31d0de!==null&&_0x244574['size']>-0xf29+0x2*-0x141+0x11ab*0x1){const _0x47121f=_0x31d0de['split']('\x0a');_0x244574['forEach']((_0x31b277,_0x397798)=>{const _0x27f4eb=new RegExp(_0x397798,'g');for(let _0x40c562=0x33*0xbd+-0x2191+-0x2*0x20b;_0x40c562<_0x47121f['length'];_0x40c562++)_0x47121f[_0x40c562]['includes']('#')||(_0x47121f[_0x40c562]=_0x47121f[_0x40c562]['replace'](_0x27f4eb,_0x31b277));}),_0x31d0de=_0x47121f['join']('\x0a');}return _0x31d0de;}static['RemoveEmpt'+'yLines'](_0x3ef6e9){return _0x3ef6e9!==null&&(_0x3ef6e9=_0x3ef6e9['split'](/\r?\n/)['map'](_0x55aacc=>_0x55aacc['trim']()===''?'':_0x55aacc)['join']('\x0a'),_0x3ef6e9=_0x3ef6e9['replace'](/(\n\n){3,}/g,'\x0a\x0a')),_0x3ef6e9;}static['_preproces'+'s'](_0x5980d2,_0x27898f=new Map(),_0x5d9ec5,_0x2ac1a6,_0x280071){var _0x20ccb5;const _0x2d6835=_0x5980d2,_0x18bc86=[];let _0xc75b76=!(0x1dc3+0x39*-0x8+-0xdfd*0x2),_0xfef6a6;for(;(_0xfef6a6=Fs['exec'](_0x5980d2))!==null&&!_0xc75b76;){const _0x7dd81b=_0xfef6a6[0x22ae+-0x1*0x267f+-0x146*-0x3];switch(_0x7dd81b){case'define':{Nd['lastIndex']=_0xfef6a6['index'];const _0x551847=Nd['exec'](_0x5980d2);w['assert'](_0x551847,'Invalid\x20['+_0x7dd81b+']:\x20'+_0x5980d2['substring'](_0xfef6a6['index'],_0xfef6a6['index']+(-0x32*0x1+-0xcf1*0x1+0xd87))+'...'),_0xc75b76||(_0xc75b76=_0x551847===null);const _0x3ff05e=_0x551847[0x1847*-0x1+0x67*0x13+0x10a3*0x1];r_['lastIndex']=_0x551847['index'];const _0x3a0270=r_['exec'](_0x3ff05e)[0x2674+0x67b+-0x1*0x2cef];let _0x54d9ee=_0x3ff05e['substring'](_0x3a0270['length'])['trim']();_0x54d9ee===''&&(_0x54d9ee='true');const _0x1c358a=Lt['_keep'](_0x18bc86);let _0x333f0f=_0x280071;if(_0x1c358a){const _0x280bee=_0x3a0270['startsWith']('{')&&_0x3a0270['endsWith']('}');_0x280bee&&(_0x333f0f=!(-0x1f88*-0x1+-0x1*-0x1d4d+-0x219*0x1d)),_0x280bee?_0x5d9ec5['set'](_0x3a0270,_0x54d9ee):_0x27898f['set'](_0x3a0270,_0x54d9ee),_0x333f0f&&(_0x5980d2=_0x5980d2['substring'](-0x80f+-0x7b9*-0x3+-0xf1c,_0x551847['index']-(0x975+-0x2130+0x17bc))+_0x5980d2['substring'](Nd['lastIndex']),Fs['lastIndex']=_0x551847['index']-(-0x2105+-0x4d3*0x2+-0xaab*-0x4));}w['trace'](Lr,_0x7dd81b+':\x20['+_0x3a0270+']\x20'+_0x54d9ee+'\x20'+(_0x1c358a?'':'IGNORED')),_0x333f0f||(Fs['lastIndex']=_0x551847['index']+_0x551847[0x206d*0x1+0x1*-0x365+-0x1d08]['length']);break;}case'undef':{kd['lastIndex']=_0xfef6a6['index'];const _0x579060=kd['exec'](_0x5980d2),_0x1dbae7=_0x579060[0x1*0x192f+-0x1112*-0x1+-0x2a40]['trim'](),_0x439b59=Lt['_keep'](_0x18bc86);_0x439b59&&(_0x27898f['delete'](_0x1dbae7),_0x280071&&(_0x5980d2=_0x5980d2['substring'](0x19e9+0x71*-0x49+-0x650*-0x1,_0x579060['index']-(0x11*-0xd9+0xa45+-0x1*-0x425))+_0x5980d2['substring'](kd['lastIndex']),Fs['lastIndex']=_0x579060['index']-(-0x1479+0x256d+0x10f3*-0x1))),w['trace'](Lr,_0x7dd81b+':\x20['+_0x1dbae7+']\x20'+(_0x439b59?'':'IGNORED')),_0x280071||(Fs['lastIndex']=_0x579060['index']+_0x579060[-0x19cc+0x136f+0x9*0xb5]['length']);break;}case'extension':{i_['lastIndex']=_0xfef6a6['index'];const _0x504a25=i_['exec'](_0x5980d2);if(w['assert'](_0x504a25,'Invalid\x20['+_0x7dd81b+']:\x20'+_0x5980d2['substring'](_0xfef6a6['index'],_0xfef6a6['index']+(-0xbb2+-0xe8*0x1d+-0xcca*-0x3))+'...'),_0xc75b76||(_0xc75b76=_0x504a25===null),_0x504a25){const _0x351051=_0x504a25[0x1fd7+-0xfd5+-0xf1*0x11],_0x394273=Lt['_keep'](_0x18bc86);_0x394273&&_0x27898f['set'](_0x351051,'true'),w['trace'](Lr,_0x7dd81b+':\x20['+_0x351051+']\x20'+(_0x394273?'':'IGNORED'));}Fs['lastIndex']=_0x504a25['index']+_0x504a25[-0xe8a+0x2212+-0x1388]['length'];break;}case'ifdef':case'ifndef':case'if':{Ud['lastIndex']=_0xfef6a6['index'];const _0x2f7f9e=Ud['exec'](_0x5980d2),_0x291de6=_0x2f7f9e[-0xfef*-0x2+0x553*-0x7+-0x569*-0x1],_0x22663e=Lt['evaluate'](_0x291de6,_0x27898f);_0xc75b76||(_0xc75b76=_0x22663e['error']);let _0xd74d7=_0x22663e['result'];_0x7dd81b==='ifndef'&&(_0xd74d7=!_0xd74d7),_0x18bc86['push']({'anyKeep':_0xd74d7,'keep':_0xd74d7,'start':_0xfef6a6['index'],'end':Ud['lastIndex']}),w['trace'](Lr,_0x7dd81b+':\x20['+_0x291de6+']\x20=>\x20'+_0xd74d7),Fs['lastIndex']=_0x2f7f9e['index']+_0x2f7f9e[0x5*0x1a9+0x1362+0x175*-0x13]['length'];break;}case'endif':case'else':case'elif':{Bd['lastIndex']=_0xfef6a6['index'];const _0x51da3c=Bd['exec'](_0x5980d2),_0x25aa17=_0x18bc86['pop']();if(!_0x25aa17){console['error']('Shader\x20pre'+'processing'+'\x20encounter'+'ed\x20\x22#'+_0x51da3c[0x25c3+-0x2*-0xdf5+0x3a6*-0x12]+('\x22\x20without\x20'+'a\x20precedin'+'g\x20#if\x20#ifd'+'ef\x20#ifndef'+'\x20while\x20pre'+'processing'+'\x20')+Lt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x5980d2['substring'](_0xfef6a6['index'],_0xfef6a6['index']+(-0x1d3*-0x2+0x9*0x219+-0x1623*0x1))+'...',{'source':_0x2d6835}),_0xc75b76=!(0x2005+-0x241*-0xf+-0x41d4);continue;}const _0x17b065=_0x25aa17['keep']?_0x5980d2['substring'](_0x25aa17['end'],_0xfef6a6['index']):'';w['trace'](Lr,_0x7dd81b+(':\x20[previou'+'s\x20block]\x20='+'>\x20')+(_0x17b065!=='')),_0x5980d2=_0x5980d2['substring'](-0x21b1+-0x3c7*-0x4+0x1295,_0x25aa17['start'])+_0x17b065+_0x5980d2['substring'](Bd['lastIndex']),Fs['lastIndex']=_0x25aa17['start']+_0x17b065['length'];const _0x5d7fbe=_0x51da3c[-0x1d39+0x4b8+0x2*0xc41];if(_0x5d7fbe==='else'||_0x5d7fbe==='elif'){let _0x3e92a7=!(-0x179a+-0x2f*-0x1e+0x1219);if(!_0x25aa17['anyKeep']){if(_0x5d7fbe==='else')_0x3e92a7=!_0x25aa17['keep'];else{const _0x27a6c9=Lt['evaluate'](_0x51da3c[0x236*0xf+-0x9ac+-0x177c],_0x27898f);_0x3e92a7=_0x27a6c9['result'],_0xc75b76||(_0xc75b76=_0x27a6c9['error']);}}_0x18bc86['push']({'anyKeep':_0x25aa17['anyKeep']||_0x3e92a7,'keep':_0x3e92a7,'start':Fs['lastIndex'],'end':Fs['lastIndex']}),w['trace'](Lr,_0x7dd81b+':\x20['+_0x51da3c[-0x3*-0x3fd+-0x6e*-0x2b+-0x1e6f]+']\x20=>\x20'+_0x3e92a7);}break;}case'include':{zd['lastIndex']=_0xfef6a6['index'];const _0x70764d=zd['exec'](_0x5980d2);if(_0xc75b76||(_0xc75b76=_0x70764d===null),!_0x70764d){w['assert'](_0x70764d,'Invalid\x20['+_0x7dd81b+(']\x20while\x20pr'+'eprocessin'+'g\x20')+Lt['sourceName']+':\x0a'+_0x5980d2['substring'](_0xfef6a6['index'],_0xfef6a6['index']+(-0x37b+0x1fdf+-0x1c00))+'...'),_0xc75b76=!(0x21f+0x929+-0x4*0x2d2);continue;}const _0x3a62b1=_0x70764d[-0x157c+-0x1*0x20bd+0x363a]['trim'](),_0x352fba=(_0x20ccb5=_0x70764d[-0x1a97+-0x2637+0x40d0])==null?void(-0x1ae*-0x12+0xc55+-0x2a91):_0x20ccb5['trim'](),_0x103b50=Lt['_keep'](_0x18bc86);if(_0x103b50){let _0x16cdae=_0x2ac1a6==null?void(0x1*0x787+0x1d88+-0x250f*0x1):_0x2ac1a6['get'](_0x3a62b1);if(_0x16cdae!==void(-0xbaf+0x133*0x2+0x949)){if(_0x16cdae=this['stripComme'+'nts'](_0x16cdae),_0x352fba){const _0x52b476=_0x27898f['get'](_0x352fba),_0x1efa47=parseFloat(_0x52b476);if(Number['isInteger'](_0x1efa47)){let _0x4533d2='';for(let _0x3492aa=0x1c1d*-0x1+-0x1a*-0x9f+0xbf7;_0x3492aa<_0x1efa47;_0x3492aa++)_0x4533d2+=_0x16cdae['replace'](VT,String(_0x3492aa));_0x16cdae=_0x4533d2;}else console['error']('Include\x20Co'+'unt\x20identi'+'fier\x20\x22'+_0x352fba+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Lt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x5980d2['substring'](_0xfef6a6['index'],_0xfef6a6['index']+(0xa65+-0xe7f+0x47e*0x1))+'...',{'originalSource':_0x2d6835,'source':_0x5980d2}),_0xc75b76=!(0x581+-0xb8+0x5*-0xf5);}_0x5980d2=_0x5980d2['substring'](0x18f8+-0x13b2+-0x1b*0x32,_0x70764d['index']-(0x1*0x1b70+0x1af1*-0x1+0x7e*-0x1))+_0x16cdae+_0x5980d2['substring'](zd['lastIndex']),Fs['lastIndex']=_0x70764d['index']-(-0x5f8*0x2+0x2698+-0x1aa7);}else{console['error']('Include\x20\x22'+_0x3a62b1+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Lt['sourceName'],{'originalSource':_0x2d6835,'source':_0x5980d2}),_0xc75b76=!(0x122*-0x15+0x13d1+0x3f9);continue;}}w['trace'](Lr,_0x7dd81b+':\x20['+_0x3a62b1+']\x20'+(_0x103b50?'':'IGNORED'));break;}}}return _0x18bc86['length']>0x1b6b*-0x1+0x5df+0x158c&&(console['error']('Shader\x20pre'+'processing'+'\x20reached\x20t'+'he\x20end\x20of\x20'+'the\x20file\x20w'+'ithout\x20enc'+'ountering\x20'+'the\x20necess'+'ary\x20#endif'+'\x20to\x20close\x20'+'a\x20precedin'+'g\x20#if,\x20#if'+'def,\x20or\x20#i'+'fndef\x20bloc'+'k.\x20'+Lt['sourceName']),_0xc75b76=!(-0x4*-0x61f+-0x43*-0x14+0x18*-0x13d)),_0xc75b76?(console['error']('Failed\x20to\x20'+'preprocess'+'\x20shader:\x20',{'source':_0x2d6835}),null):_0x5980d2;}static['_keep'](_0x29ca88){for(let _0x5d7527=0x9*0x124+-0x4e1*0x2+0x41*-0x2;_0x5d7527<_0x29ca88['length'];_0x5d7527++)if(!_0x29ca88[_0x5d7527]['keep'])return!(0x195+-0x2577+0x23e3);return!(0x2*0x1119+-0x13*-0x175+0x8d7*-0x7);}static['evaluateAt'+'omicExpres'+'sion'](_0xdc6284,_0x1b275d){let _0x580837=!(0x2c3*0x5+-0x1*0x20f1+0x1323);_0xdc6284=_0xdc6284['trim']();let _0x40277b=!(0x19fb+-0xd3f+-0xcbb);if(_0xdc6284==='true')return{'result':!(-0xc7*0x15+0x13c*0x17+-0x1*0xc11),'error':_0x580837};if(_0xdc6284==='false')return{'result':!(0x523+-0x12bb+0xd99),'error':_0x580837};const _0x1a63bf=NT['exec'](_0xdc6284);if(_0x1a63bf){_0x40277b=_0x1a63bf[0x121*0xb+-0x94*-0x25+0x2*-0x10e7]==='!',_0xdc6284=_0x1a63bf[0x12*0x110+-0x1c6e+0x1*0x950]['trim']();const _0x73947f=_0x1b275d['has'](_0xdc6284);return{'result':_0x40277b?!_0x73947f:_0x73947f,'error':_0x580837};}const _0x16e1aa=BT['exec'](_0xdc6284);if(_0x16e1aa){const _0xc6f6e7=_0x1b275d['get'](_0x16e1aa[0x9d9+0x3*-0x15f+-0x1*0x5bb]['trim']())??_0x16e1aa[-0x26aa+-0x939+0x2*0x17f2]['trim'](),_0x4b9ba9=_0x1b275d['get'](_0x16e1aa[0x33*0x21+0xe2d+0x1*-0x14bd]['trim']())??_0x16e1aa[0x1b12+0x3*-0x223+0x371*-0x6]['trim'](),_0x6e4341=_0x16e1aa[0x1*0x19fb+-0xa*0x28d+-0x77]['trim']();let _0xb65276=!(-0x17db+-0x1*-0x5c9+0x1*0x1213);switch(_0x6e4341){case'==':_0xb65276=_0xc6f6e7===_0x4b9ba9;break;case'!=':_0xb65276=_0xc6f6e7!==_0x4b9ba9;break;case'<':_0xb65276=_0xc6f6e7<_0x4b9ba9;break;case'<=':_0xb65276=_0xc6f6e7<=_0x4b9ba9;break;case'>':_0xb65276=_0xc6f6e7>_0x4b9ba9;break;case'>=':_0xb65276=_0xc6f6e7>=_0x4b9ba9;break;default:_0x580837=!(-0xca5+-0x5*-0x663+-0x134a);}return{'result':_0xb65276,'error':_0x580837};}return{'result':_0x1b275d['has'](_0xdc6284),'error':_0x580837};}static['processPar'+'entheses'](_0x52c465,_0x528252){let _0x2e6a1e=!(0x35b*-0x5+0x1*-0x164f+0x2717),_0x34120d=_0x52c465['trim']();for(;_0x34120d['startsWith']('(')&&_0x34120d['endsWith'](')');){let _0xb47798=-0x83e+-0x1e15+0x2653*0x1,_0x3346ea=!(0x2*-0xc93+-0x23c7+0x3ced);for(let _0x37eae1=-0x6*-0x322+-0x17d5+0x509;_0x37eae1<_0x34120d['length']-(-0x1*-0x5b7+-0x1921+0x136b);_0x37eae1++)if(_0x34120d[_0x37eae1]==='(')_0xb47798++;else{if(_0x34120d[_0x37eae1]===')'&&(_0xb47798--,_0xb47798===-0xb65+0x16db+0x3*-0x3d2)){_0x3346ea=!(0xdb*-0x3+0x12f1+-0x21*0x7f);break;}}if(_0x3346ea)_0x34120d=_0x34120d['slice'](-0x691*-0x1+-0x458+-0x238,-(0x8a1+0x2*-0x493+0x86))['trim']();else break;}for(;;){let _0x2e1b4c=!(0x1920+0xf1*0x2+-0x1b01),_0x13dbac=0x1ee9+-0x1afb+-0x3ee,_0x186c2f=0x10c1+-0x18d9+0x818,_0x18b2af=-(0x5*0x3f0+0x15f*0x4+-0x192b),_0xd39219=-(0xe1b+0xe35*0x1+-0x1c4f),_0xd31b60=0x1*0x15e1+-0x1319+0x8*-0x59;for(let _0x44d881=-0x1fb4+-0x1b88+0x3b3c;_0x44d881<_0x34120d['length'];_0x44d881++)if(_0x34120d[_0x44d881]==='('){const _0x2c8577=_0x34120d['substring'](0x1a9+-0x625*-0x1+-0x7ce,_0x44d881);UT['test'](_0x2c8577)?_0xd31b60++:_0xd31b60===0x4a*0x8+-0x138e+-0x2*-0x89f&&(_0x13dbac++,_0x13dbac>_0x186c2f&&(_0x186c2f=_0x13dbac,_0x18b2af=_0x44d881),_0x2e1b4c=!(0x1*-0x14b6+-0x1f84+0xbf*0x46));}else _0x34120d[_0x44d881]===')'&&(_0xd31b60>-0xbd2+0x20a+-0x4e4*-0x2?_0xd31b60--:_0x13dbac>0x1b0a+0x107*0x4+0x376*-0x9&&(_0x13dbac===_0x186c2f&&_0x18b2af!==-(-0x20*0x119+-0x6c*-0x48+0x4c1)&&(_0xd39219=_0x44d881),_0x13dbac--));if(!_0x2e1b4c||_0x18b2af===-(-0x17fa+0x5*-0x2c0+-0xd*-0x2e7)||_0xd39219===-(-0x1c*0x2f+0x49*-0x70+0x2515))break;const _0x10c8d5=_0x34120d['substring'](_0x18b2af+(0xdd0+-0x1ec8+-0x18b*-0xb),_0xd39219),{result:_0x72093b,error:_0x4b3e8f}=Lt['evaluate'](_0x10c8d5,_0x528252);_0x2e6a1e=_0x2e6a1e||_0x4b3e8f,_0x34120d=_0x34120d['substring'](0x1f*0xbf+-0xbc*-0xc+0x1ff1*-0x1,_0x18b2af)+(_0x72093b?'true':'false')+_0x34120d['substring'](_0xd39219+(0x52f*0x1+-0xb49+0x209*0x3));}return{'expression':_0x34120d,'error':_0x2e6a1e};}static['evaluate'](_0x3e4fdb,_0x591b32){const _0xa9d740=zT['exec'](_0x3e4fdb)===null;w['assert'](_0xa9d740,'Resolving\x20'+'expression'+'\x20like\x20this'+'\x20is\x20not\x20su'+'pported:\x20'+_0x3e4fdb);let _0xf6c096=_0x3e4fdb,_0x44de18=!(-0x1529+-0x18b3*-0x1+0x1*-0x389);if(_0x3e4fdb['replace'](kT,'')['indexOf']('(')!==-(-0x1e*0x9d+-0x784*-0x4+-0xba9)){const _0x4238cd=Lt['processPar'+'entheses'](_0x3e4fdb,_0x591b32);_0xf6c096=_0x4238cd['expression'],_0x44de18=_0x4238cd['error'];}if(_0x44de18)return w['log']('Parenthesi'+'s\x20parsing\x20'+'error\x20in\x20e'+'xpression:'+'\x20\x22'+_0x3e4fdb+'\x22'),{'result':!(0x3*-0x869+-0x1*-0x2371+-0x43*0x27),'error':!(-0xe*-0x271+0x355+-0x9*0x42b)};const _0x55e8b8=_0xf6c096['split']('||');for(const _0x5a2427 of _0x55e8b8){const _0x34c9a8=_0x5a2427['split']('&&');let _0x30628b=!(0xf24+-0x26*-0x34+-0x16dc);for(const _0x40eca7 of _0x34c9a8){const {result:_0x5778ee,error:_0x220491}=Lt['evaluateAt'+'omicExpres'+'sion'](_0x40eca7['trim'](),_0x591b32);if(!_0x5778ee||_0x220491){_0x30628b=!(-0x40d*0x5+-0x9d0*-0x1+-0xa72*-0x1);break;}}if(_0x30628b)return{'result':!(-0x4a9*-0x8+-0x1*0x25e7+-0x3*-0x35),'error':!_0xa9d740};}return{'result':!(-0x1*0x1511+-0x4b5*0x3+0x2331),'error':!_0xa9d740};}};h(Lt,'sourceName');let ko=Lt;const Vy='\x0a\x0a#ifndef\x20'+'outType_0\x0a'+'#define\x20ou'+'tType_0\x20ve'+'c4\x0a#endif\x0a'+'\x0alayout(lo'+'cation\x20=\x200'+')\x20out\x20high'+'p\x20outType_'+'0\x20pcFragCo'+'lor0;\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_1\x0a'+'layout(loc'+'ation\x20=\x201)'+'\x20out\x20highp'+'\x20outType_1'+'\x20pcFragCol'+'or1;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_2\x0alayo'+'ut(locatio'+'n\x20=\x202)\x20out'+'\x20highp\x20out'+'Type_2\x20pcF'+'ragColor2;'+'\x0a#endif\x0a\x0a#'+'if\x20COLOR_A'+'TTACHMENT_'+'3\x0alayout(l'+'ocation\x20=\x20'+'3)\x20out\x20hig'+'hp\x20outType'+'_3\x20pcFragC'+'olor3;\x0a#en'+'dif\x0a\x0a#if\x20C'+'OLOR_ATTAC'+'HMENT_4\x0ala'+'yout(locat'+'ion\x20=\x204)\x20o'+'ut\x20highp\x20o'+'utType_4\x20p'+'cFragColor'+'4;\x0a#endif\x0a'+'\x0a#if\x20COLOR'+'_ATTACHMEN'+'T_5\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0a#'+'endif\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_6\x0a'+'layout(loc'+'ation\x20=\x206)'+'\x20out\x20highp'+'\x20outType_6'+'\x20pcFragCol'+'or6;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_7\x0alayo'+'ut(locatio'+'n\x20=\x207)\x20out'+'\x20highp\x20out'+'Type_7\x20pcF'+'ragColor7;'+'\x0a#endif\x0a\x0a#'+'define\x20gl_'+'FragColor\x20'+'pcFragColo'+'r0\x0a\x0a#defin'+'e\x20varying\x20'+'in\x0a\x0a#defin'+'e\x20texture2'+'D\x20texture\x0a'+'#define\x20te'+'xture2DBia'+'s\x20texture\x0a'+'#define\x20te'+'xtureCube\x20'+'texture\x0a#d'+'efine\x20text'+'ure2DProj\x20'+'texturePro'+'j\x0a#define\x20'+'texture2DL'+'od\x20texture'+'Lod\x0a#defin'+'e\x20texture2'+'DProjLod\x20t'+'extureProj'+'Lod\x0a#defin'+'e\x20textureC'+'ubeLod\x20tex'+'tureLod\x0a#d'+'efine\x20text'+('ure2DGrad\x20'+'textureGra'+'d\x0a#define\x20'+'texture2DP'+'rojGrad\x20te'+'xtureProjG'+'rad\x0a#defin'+'e\x20textureC'+'ubeGrad\x20te'+'xtureGrad\x0a'+'#define\x20ut'+'exture2D\x20t'+'exture\x0a#de'+'fine\x20itext'+'ure2D\x20text'+'ure\x0a\x0a//\x20de'+'precated\x20d'+'efines\x0a#de'+'fine\x20textu'+'re2DLodEXT'+'\x20texture2D'+'LodEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DLod_ins'+'tead\x0a#defi'+'ne\x20texture'+'2DProjLodE'+'XT\x20texture'+'2DProjLodE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DP'+'rojLod\x0a#de'+'fine\x20textu'+'reCubeLodE'+'XT\x20texture'+'CubeLodEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeL'+'od_instead'+'\x0a#define\x20t'+'exture2DGr'+'adEXT\x20text'+'ure2DGradE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DG'+'rad_instea'+'d\x0a#define\x20'+'texture2DP'+'rojGradEXT'+'\x20texture2D'+'ProjGradEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DPr'+'ojGrad_ins'+'tead\x0a#defi'+'ne\x20texture'+'CubeGradEX'+'T\x20textureC'+'ubeGradEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeG'+'rad_instea'+'d\x0a\x0a//\x20samp'+'le\x20shadows'+'\x20using\x20tex'+'tureGrad\x20t'+'o\x20remove\x20d'+'erivatives'+'\x20in\x20the\x20dy'+'namic\x20loop'+'s\x20(which\x20a'+'re\x20used\x20by'+'\x0a//\x20cluste'+'red\x20lighti'+'ng)\x20-\x20as\x20D'+'irectX\x20sha'+'der\x20compil'+'er\x20tries\x20t'+'o\x20unroll\x20t'+'he\x20loops\x20a'+'nd\x20takes\x20l'+'ong\x20time\x0a/'+'/\x20to\x20compi'+'le\x20the\x20sha'+'der.\x20Using'+'\x20textureLo'+'d\x20would\x20be'+'\x20even\x20bett')+('er,\x20but\x20We'+'bGl\x20does\x20n'+'ot\x20transla'+'te\x20it\x20to\x0a/'+'/\x20lod\x20inst'+'ruction\x20fo'+'r\x20DirectX\x20'+'correctly\x20'+'and\x20uses\x20S'+'ampleCmp\x20i'+'nstead\x20of\x20'+'SampleCmpL'+'evelZero\x20o'+'r\x20similar.'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureG'+'rad(res,\x20u'+'v,\x20vec2(1,'+'\x201),\x20vec2('+'1,\x201))\x0a\x0a//'+'\x20pass\x20/\x20ac'+'cept\x20shado'+'w\x20map\x20or\x20t'+'exture\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20on\x20webgl'+'\x20this\x20is\x20s'+'imply\x20pass'+'ed\x20as\x20is\x0a/'+'/\x20but\x20this'+'\x20is\x20needed'+'\x20for\x20WebGP'+'U\x0a#define\x20'+'SHADOWMAP_'+'PASS(name)'+'\x20name\x0a#def'+'ine\x20SHADOW'+'MAP_ACCEPT'+'(name)\x20sam'+'pler2DShad'+'ow\x20name\x0a#d'+'efine\x20TEXT'+'URE_PASS(n'+'ame)\x20name\x0a'+'#define\x20TE'+'XTURE_ACCE'+'PT(name)\x20s'+'ampler2D\x20n'+'ame\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP(name)\x20h'+'ighp\x20sampl'+'er2D\x20name\x0a'+'\x0a#define\x20G'+'L2\x0a'),Gy='\x0a#define\x20a'+'ttribute\x20i'+'n\x0a#define\x20'+'varying\x20ou'+'t\x0a#define\x20'+'texture2D\x20'+'texture\x0a#d'+'efine\x20utex'+'ture2D\x20tex'+'ture\x0a#defi'+'ne\x20itextur'+'e2D\x20textur'+'e\x0a#define\x20'+'GL2\x0a#defin'+'e\x20VERTEXSH'+'ADER\x0a\x0a#def'+'ine\x20TEXTUR'+'E_PASS(nam'+'e)\x20name\x0a#d'+'efine\x20TEXT'+'URE_ACCEPT'+'(name)\x20sam'+'pler2D\x20nam'+'e\x0a#define\x20'+'TEXTURE_AC'+'CEPT_HIGHP'+'(name)\x20hig'+'hp\x20sampler'+'2D\x20name\x0a',Hy='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#ifnde'+'f\x20outType_'+'0\x0a#define\x20'+'outType_0\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_1\x0a'+'#define\x20ou'+'tType_1\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_2\x0a#d'+'efine\x20outT'+'ype_2\x20vec4'+'\x0a#endif\x0a#i'+'fndef\x20outT'+'ype_3\x0a#def'+'ine\x20outTyp'+'e_3\x20vec4\x0a#'+'endif\x0a#ifn'+'def\x20outTyp'+'e_4\x0a#defin'+'e\x20outType_'+'4\x20vec4\x0a#en'+'dif\x0a#ifnde'+'f\x20outType_'+'5\x0a#define\x20'+'outType_5\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_6\x0a'+'#define\x20ou'+'tType_6\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_7\x0a#d'+'efine\x20outT'+'ype_7\x20vec4'+'\x0a#endif\x0a\x0al'+'ayout(loca'+'tion\x20=\x200)\x20'+'out\x20highp\x20'+'outType_0\x20'+'pcFragColo'+'r0;\x0alayout'+'(location\x20'+'=\x201)\x20out\x20h'+'ighp\x20outTy'+'pe_1\x20pcFra'+'gColor1;\x0al'+'ayout(loca'+'tion\x20=\x202)\x20'+'out\x20highp\x20'+'outType_2\x20'+'pcFragColo'+'r2;\x0alayout'+'(location\x20'+'=\x203)\x20out\x20h'+'ighp\x20outTy'+'pe_3\x20pcFra'+'gColor3;\x0al'+'ayout(loca'+'tion\x20=\x204)\x20'+'out\x20highp\x20'+'outType_4\x20'+'pcFragColo'+'r4;\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0al'+'ayout(loca'+'tion\x20=\x206)\x20'+'out\x20highp\x20'+'outType_6\x20'+'pcFragColo'+'r6;\x0alayout'+'(location\x20'+'=\x207)\x20out\x20h'+'ighp\x20outTy'+'pe_7\x20pcFra'+'gColor7;\x0a\x0a'+'#define\x20gl'+'_FragColor'+'\x20pcFragCol'+'or0\x0a\x0a#defi'+'ne\x20texture'+'2D(res,\x20uv'+')\x20texture('+'sampler2D('+('res,\x20res\x20#'+'#\x20_sampler'+'),\x20uv)\x0a#de'+'fine\x20textu'+'re2DBias(r'+'es,\x20uv,\x20bi'+'as)\x20textur'+'e(sampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv,\x20b'+'ias)\x0a#defi'+'ne\x20texture'+'2DLod(res,'+'\x20uv,\x20lod)\x20'+'textureLod'+'(sampler2D'+'(res,\x20res\x20'+'##\x20_sample'+'r),\x20uv,\x20lo'+'d)\x0a#define'+'\x20textureCu'+'be(res,\x20uv'+')\x20texture('+'samplerCub'+'e(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a#'+'define\x20tex'+'tureCubeLo'+'d(res,\x20uv,'+'\x20lod)\x20text'+'ureLod(sam'+'plerCube(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x20lod)'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureL'+'od(sampler'+'2DShadow(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x200.0)'+'\x0a#define\x20i'+'texture2D('+'res,\x20uv)\x20t'+'exture(isa'+'mpler2D(re'+'s,\x20res\x20##\x20'+'_sampler),'+'\x20uv)\x0a#defi'+'ne\x20utextur'+'e2D(res,\x20u'+'v)\x20texture'+'(usampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a\x0a'+'//\x20depreca'+'ted\x20define'+'s\x0a#define\x20'+'texture2DL'+'odEXT\x20text'+'ure2DLodEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DLo'+'d_instead\x0a'+'#define\x20te'+'xture2DPro'+'jLodEXT\x20te'+'xture2DPro'+'jLodEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DProjLo'+'d\x0a#define\x20'+'textureCub'+'eLodEXT\x20te'+'xtureCubeL'+'odEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeLod_in'+'stead\x0a#def'+'ine\x20textur'+'e2DGradEXT'+'\x20texture2D'+'GradEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DGrad_i'+'nstead\x0a#de')+('fine\x20textu'+'re2DProjGr'+'adEXT\x20text'+'ure2DProjG'+'radEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DProjGra'+'d_instead\x0a'+'#define\x20te'+'xtureCubeG'+'radEXT\x20tex'+'tureCubeGr'+'adEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeGrad_i'+'nstead\x0a\x0a//'+'\x20TODO:\x20imp'+'lement\x20oth'+'er\x20texture'+'\x20sampling\x20'+'macros\x0a//\x20'+'#define\x20te'+'xture2DPro'+'j\x20textureP'+'roj\x0a//\x20#de'+'fine\x20textu'+'re2DProjLo'+'d\x20textureP'+'rojLod\x0a//\x20'+'#define\x20te'+'xture2DGra'+'d\x20textureG'+'rad\x0a//\x20#de'+'fine\x20textu'+'re2DProjGr'+'ad\x20texture'+'ProjGrad\x0a/'+'/\x20#define\x20'+'textureCub'+'eGrad\x20text'+'ureGrad\x0a\x0a/'+'/\x20pass\x20/\x20a'+'ccept\x20shad'+'ow\x20map\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20passes\x20b'+'oth\x20the\x20te'+'xture\x20as\x20w'+'ell\x20as\x20sam'+'pler\x0a//\x20as'+'\x20the\x20combi'+'ned\x20sample'+'r\x20can\x20be\x20o'+'nly\x20create'+'d\x20at\x20a\x20poi'+'nt\x20of\x20use\x0a'+'#define\x20SH'+'ADOWMAP_PA'+'SS(name)\x20n'+'ame,\x20name\x20'+'##\x20_sample'+'r\x0a#define\x20'+'SHADOWMAP_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'PASS(name)'+'\x20name,\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP\x20TEXTURE'+'_ACCEPT\x0a\x0a#'+'define\x20GL2'+'\x0a#define\x20W'+'EBGPU\x0a'),Wy='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#defin'+'e\x20texture2'+'D(res,\x20uv)'+'\x20texture(s'+'ampler2D(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv)\x0a#def'+'ine\x20itextu'+'re2D(res,\x20'+'uv)\x20textur'+'e(isampler'+'2D(res,\x20re'+'s\x20##\x20_samp'+'ler),\x20uv)\x0a'+'#define\x20ut'+'exture2D(r'+'es,\x20uv)\x20te'+'xture(usam'+'pler2D(res'+',\x20res\x20##\x20_'+'sampler),\x20'+'uv)\x0a\x0a#defi'+'ne\x20TEXTURE'+'_PASS(name'+')\x20name,\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT(na'+'me)\x20textur'+'e2D\x20name,\x20'+'sampler\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT_HI'+'GHP\x20TEXTUR'+'E_ACCEPT\x0a\x0a'+'#define\x20GL'+'2\x0a#define\x20'+'WEBGPU\x0a#de'+'fine\x20VERTE'+'XSHADER\x0a#d'+'efine\x20gl_V'+'ertexID\x20gl'+'_VertexInd'+'ex\x0a#define'+'\x20gl_Instan'+'ceID\x20gl_In'+'stanceInde'+'x\x0a',$y='\x0a',Xy='\x0a#define\x20V'+'ERTEXSHADE'+'R\x0a',n_='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20to'+'\x20sample\x20sc'+'ene\x20grab\x20t'+'extures\x0ave'+'c2\x20getGrab'+'ScreenPos('+'vec4\x20clipP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x200.5;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'WEBGPU\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv.y\x20'+'=\x201.0\x20-\x20uv'+'.y;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a\x0a//\x20con'+'vert\x20uv\x20co'+'ordinates\x20'+'to\x20sample\x20'+'image\x20effe'+'ct\x20texture'+'\x20(render\x20t'+'arget\x20text'+'ure\x20render'+'ed\x20without'+'\x0a//\x20forwar'+'d\x20renderer'+'\x20which\x20doe'+'s\x20the\x20flip'+'\x20in\x20the\x20pr'+'ojection\x20m'+'atrix)\x0avec'+'2\x20getImage'+'EffectUV(v'+'ec2\x20uv)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv.y'+'\x20=\x201.0\x20-\x20u'+'v.y;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20uv'+';\x0a}\x0a',o_='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20fo'+'r\x20sampling'+'\x20scene\x20gra'+'b\x20textures'+'\x0afn\x20getGra'+'bScreenPos'+'(clipPos:\x20'+'vec4<f32>)'+'\x20->\x20vec2<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'var\x20uv:\x20ve'+'c2<f32>\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x20vec2<f3'+'2>(0.5);\x0a\x20'+'\x20\x20\x20uv.y\x20=\x20'+'1.0\x20-\x20uv.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'//\x20convert'+'\x20uv\x20coordi'+'nates\x20to\x20s'+'ample\x20imag'+'e\x20effect\x20t'+'exture\x20(re'+'nder\x20targe'+'t\x20texture\x20'+'rendered\x20w'+'ithout\x0a//\x20'+'forward\x20re'+'nderer\x20whi'+'ch\x20does\x20th'+'e\x20flip\x20in\x20'+'the\x20projec'+'tion\x20matri'+'x)\x0afn\x20getI'+'mageEffect'+'UV(uv:\x20vec'+'2<f32>)\x20->'+'\x20vec2<f32>'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20modifiedU'+'V:\x20vec2<f3'+'2>\x20=\x20uv;\x0a\x20'+'\x20\x20\x20modifie'+'dUV.y\x20=\x201.'+'0\x20-\x20modifi'+'edUV.y;\x0a\x20\x20'+'\x20\x20return\x20m'+'odifiedUV;'+'\x0a}\x0a\x0a//\x20typ'+'es\x20wrapped'+'\x20in\x20size\x20a'+'ligned\x20str'+'uctures\x20to'+'\x20ensure\x20co'+'rrect\x20alig'+'nment\x20in\x20u'+'niform\x20buf'+'fer\x20arrays'+'\x0astruct\x20Wr'+'appedF32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'f32\x20}\x0astru'+'ct\x20Wrapped'+'I32\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20i32\x20}'+'\x0astruct\x20Wr'+'appedU32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'u32\x20}\x0astru'+'ct\x20Wrapped'+'Vec2F\x20{\x20@s'+'ize(16)\x20el'+'ement:\x20vec'+'2f\x20}\x0astruc'+'t\x20WrappedV'+'ec2I\x20{\x20@si'+'ze(16)\x20ele'+'ment:\x20vec2'+'i\x20}\x0astruct'+'\x20WrappedVe'+'c2U\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20vec2u'+'\x20}\x0a',GT={'vertex_position':Me,'vertex_normal':gs,'vertex_tangent':yi,'vertex_texCoord0':is,'vertex_texCoord1':ba,'vertex_texCoord2':wl,'vertex_texCoord3':El,'vertex_texCoord4':bl,'vertex_texCoord5':Al,'vertex_texCoord6':Cl,'vertex_texCoord7':Pl,'vertex_color':Wt,'vertex_boneIndices':us,'vertex_boneWeights':gi};class Jt{static['createDefi'+'nition'](_0x2422bb,_0x9a9f21){w['assert'](_0x9a9f21),w['assert'](!_0x9a9f21['vertexDefi'+'nes']||_0x9a9f21['vertexDefi'+'nes']instanceof Map),w['assert'](!_0x9a9f21['vertexIncl'+'udes']||_0x9a9f21['vertexIncl'+'udes']instanceof Map),w['assert'](!_0x9a9f21['fragmentDe'+'fines']||_0x9a9f21['fragmentDe'+'fines']instanceof Map),w['assert'](!_0x9a9f21['fragmentIn'+'cludes']||_0x9a9f21['fragmentIn'+'cludes']instanceof Map);const _0x758549=_0x1a03a7=>{let _0xc7ad2c=_0x1a03a7['fragmentOu'+'tputTypes']??'vec4';return Array['isArray'](_0xc7ad2c)||(_0xc7ad2c=[_0xc7ad2c]),_0xc7ad2c;},_0x54296e=(_0xabd587,_0x1a4bbe,_0x189da0,_0x2b6421)=>{const _0x2c1fb3=_0x2422bb['isWebGPU']?_0xabd587:_0x1a4bbe;let _0x2845f8='';if(!_0x189da0){const _0x2df6e7=_0x758549(_0x2b6421);for(let _0x40a99e=-0x196f+0xe70+0xaff;_0x40a99e<_0x2422bb['maxColorAt'+'tachments'];_0x40a99e++){_0x2845f8+='#define\x20CO'+'LOR_ATTACH'+'MENT_'+_0x40a99e+'\x0a';const _0xfd9e4b=_0x2df6e7[_0x40a99e]??'vec4';_0x2845f8+='#define\x20ou'+'tType_'+_0x40a99e+'\x20'+_0xfd9e4b+'\x0a';}}return _0x2845f8+_0x2c1fb3;},_0x36b40a=(_0x291262,_0x42ffa4)=>{let _0xd365ad='';if(!_0x291262){const _0x579e17=_0x758549(_0x42ffa4);for(let _0x34f303=-0x359*-0xb+0xd*0x27c+0x1*-0x451f;_0x34f303<_0x2422bb['maxColorAt'+'tachments'];_0x34f303++){const _0x102976=_0x579e17[_0x34f303]??'vec4',_0x35d0e9=Fy['get'](_0x102976);w['assert'](_0x35d0e9,'Unknown\x20ou'+'tput\x20type\x20'+'translatio'+'n:\x20'+_0x102976+'\x20->\x20'+_0x35d0e9),_0xd365ad+='alias\x20pcOu'+'tType'+_0x34f303+'\x20=\x20'+_0x35d0e9+';\x0a';}}return _0xd365ad;},_0x58d705=_0x9a9f21['name']??'Untitled';let _0x15c8df,_0x42e5b1;const _0x3ee977=Jt['getDefines'+'Code'](_0x2422bb,_0x9a9f21['vertexDefi'+'nes']),_0x5a0142=Jt['getDefines'+'Code'](_0x2422bb,_0x9a9f21['fragmentDe'+'fines']);return _0x9a9f21['shaderLang'+'uage']===it?(_0x15c8df='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x36b40a(!(-0x6ed+0x5a6+0x147),_0x9a9f21)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Xy+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+o_+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x3ee977+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x9a9f21['vertexCode']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20'),_0x42e5b1='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x36b40a(!(0x3a*-0x92+0x1c*-0x19+0x23d1),_0x9a9f21)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+$y+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+o_+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x5a0142+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x9a9f21['fragmentCo'+'de']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20')):(w['assert'](_0x9a9f21['vertexCode']),_0x15c8df=Jt['versionCod'+'e'](_0x2422bb)+_0x54296e(Wy,Gy,!(-0xaa+-0x210c+-0x2*-0x10db),_0x9a9f21)+_0x3ee977+Jt['precisionC'+'ode'](_0x2422bb)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+n_+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Jt['getShaderN'+'ameCode'](_0x58d705)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x9a9f21['vertexCode'],w['assert'](_0x9a9f21['fragmentCo'+'de']),_0x42e5b1=(_0x9a9f21['fragmentPr'+'eamble']||'')+Jt['versionCod'+'e'](_0x2422bb)+_0x54296e(Hy,Vy,!(-0x1*-0x67e+0x5e*-0x16+-0x197*-0x1),_0x9a9f21)+_0x5a0142+Jt['precisionC'+'ode'](_0x2422bb)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+n_+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Jt['getShaderN'+'ameCode'](_0x58d705)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x9a9f21['fragmentCo'+'de']),{'name':_0x58d705,'shaderLanguage':_0x9a9f21['shaderLang'+'uage']??Fe,'attributes':_0x9a9f21['attributes'],'vshader':_0x15c8df,'vincludes':_0x9a9f21['vertexIncl'+'udes'],'fincludes':_0x9a9f21['fragmentIn'+'cludes'],'fshader':_0x42e5b1,'useTransformFeedback':_0x9a9f21['useTransfo'+'rmFeedback'],'meshUniformBufferFormat':_0x9a9f21['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x9a9f21['meshBindGr'+'oupFormat']};}static['getDefines'+'Code'](_0xd4227b,_0x2e409f){let _0x5404c8='';return _0xd4227b['capsDefine'+'s']['forEach']((_0x1040f8,_0x39ccf4)=>{_0x5404c8+='#define\x20'+_0x39ccf4+'\x20'+_0x1040f8+'\x0a';}),_0x5404c8+='\x0a',_0x2e409f==null||_0x2e409f['forEach']((_0x21481d,_0x1c36ca)=>{_0x5404c8+='#define\x20'+_0x1c36ca+'\x20'+_0x21481d+'\x0a';}),_0x5404c8+='\x0a',_0x5404c8;}static['getShaderN'+'ameCode'](_0x4d65e2){return'#define\x20SH'+'ADER_NAME\x20'+_0x4d65e2+'\x0a';}static['versionCod'+'e'](_0x111346){return _0x111346['isWebGPU']?'#version\x204'+'50\x0a':'#version\x203'+'00\x20es\x0a';}static['precisionC'+'ode'](_0x1f89f9,_0x4a0b7d){_0x4a0b7d&&_0x4a0b7d!=='highp'&&_0x4a0b7d!=='mediump'&&_0x4a0b7d!=='lowp'&&(_0x4a0b7d=null),_0x4a0b7d&&(_0x4a0b7d==='highp'&&_0x1f89f9['maxPrecisi'+'on']!=='highp'&&(_0x4a0b7d='mediump'),_0x4a0b7d==='mediump'&&_0x1f89f9['maxPrecisi'+'on']==='lowp'&&(_0x4a0b7d='lowp'));const _0x266b49=_0x4a0b7d||_0x1f89f9['precision'];return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20precisi'+'on\x20'+_0x266b49+('\x20float;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x266b49+('\x20int;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20pr'+'ecision\x20')+_0x266b49+('\x20usampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x266b49+('\x20isampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x266b49+('\x20sampler2D'+'Shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x266b49+('\x20samplerCu'+'beShadow;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20precisio'+'n\x20')+_0x266b49+('\x20sampler2D'+'Array;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}static['collectAtt'+'ributes'](_0x284700){const _0x3ff0dd={};let _0x2825f5=0x1cc1+0x13ff*-0x1+-0x461*0x2,_0x2d8a70=_0x284700['indexOf']('attribute');for(;_0x2d8a70>=0x16b2+-0x95*-0x43+-0x3a1*0x11&&!(_0x2d8a70>0x9ce*0x1+-0xb19+0x14b*0x1&&_0x284700[_0x2d8a70-(0x3*-0xa9+-0x30*0xbc+0x4*0x94f)]==='/');){let _0x4e26cf=!(0x1d9*-0x9+-0x2*-0x2cf+0xb04);if(_0x2d8a70>0x161*-0x19+-0x1*-0x266f+0x1fb*-0x2){let _0x356f57=_0x284700['lastIndexO'+'f']('\x0a',_0x2d8a70);_0x356f57=_0x356f57!==-(-0x107e*0x2+-0x1*0x1f33+0xd0*0x4f)?_0x356f57+(-0x8c7+-0x617*0x4+0x2124):0x742+-0x1150+-0xc6*-0xd,_0x284700['substring'](_0x356f57,_0x2d8a70)['includes']('#')&&(_0x4e26cf=!(-0x201+-0x2b0+0x4b1));}if(!_0x4e26cf){const _0x203db3=_0x284700['indexOf'](';',_0x2d8a70),_0x201261=_0x284700['lastIndexO'+'f']('\x20',_0x203db3),_0x4b4814=_0x284700['substring'](_0x201261+(0x121f+-0x5*0x4c7+0x5c5),_0x203db3);if(_0x3ff0dd[_0x4b4814])w['warn']('Attribute\x20'+'['+_0x4b4814+(']\x20already\x20'+'exists\x20whe'+'n\x20extracti'+'ng\x20the\x20att'+'ributes\x20fr'+'om\x20the\x20ver'+'tex\x20shader'+',\x20ignoring'+'.'),{'vsCode':_0x284700});else{const _0x1ee105=GT[_0x4b4814];_0x1ee105!==void(-0x1e62+-0x9f1+0x2853)?_0x3ff0dd[_0x4b4814]=_0x1ee105:(_0x3ff0dd[_0x4b4814]='ATTR'+_0x2825f5,_0x2825f5++);}}_0x2d8a70=_0x284700['indexOf']('attribute',_0x2d8a70+(0xbc1+0x187*0xd+0x5d*-0x57));}return _0x3ff0dd;}}let HT=-0x9*0xf+-0x1def+0x1e76;class qy{constructor(_0x1876b8,_0x1860db){h(this,'meshUnifor'+'mBufferFor'+'mat'),h(this,'meshBindGr'+'oupFormat'),h(this,'attributes',new Map());if(this['id']=HT++,this['device']=_0x1876b8,this['definition']=_0x1860db,this['name']=_0x1860db['name']||'Untitled',this['init'](),_0x1860db['cshader'])w['assert'](_0x1876b8['supportsCo'+'mpute'],'Compute\x20sh'+'aders\x20are\x20'+'not\x20suppor'+'ted\x20on\x20thi'+'s\x20device.'),w['assert'](!_0x1860db['vshader']&&!_0x1860db['fshader'],'Vertex\x20and'+'\x20fragment\x20'+'shaders\x20ar'+'e\x20not\x20supp'+'orted\x20when'+'\x20creating\x20'+'a\x20compute\x20'+'shader.'),_0x1860db['cshader']=ko['run'](_0x1860db['cshader'],_0x1860db['cincludes'],{'sourceName':'compute\x20sh'+'ader\x20for\x20'+this['label'],'stripDefines':!(0x93a*-0x2+-0x134f*0x1+0x25c3)});else{w['assert'](_0x1860db['vshader'],'No\x20vertex\x20'+'shader\x20has'+'\x20been\x20spec'+'ified\x20when'+'\x20creating\x20'+'a\x20shader.'),w['assert'](_0x1860db['fshader'],'No\x20fragmen'+'t\x20shader\x20h'+'as\x20been\x20sp'+'ecified\x20wh'+'en\x20creatin'+'g\x20a\x20shader'+'.'),w['call'](()=>{this['vUnmodifie'+'d']=_0x1860db['vshader'],this['fUnmodifie'+'d']=_0x1860db['fshader'];});const _0x21fdf0=_0x1860db['shaderLang'+'uage']===it;_0x1860db['vshader']=ko['run'](_0x1860db['vshader'],_0x1860db['vincludes'],{'sourceName':'vertex\x20sha'+'der\x20for\x20'+this['label'],'stripDefines':_0x21fdf0}),_0x1860db['shaderLang'+'uage']===Fe&&(_0x1860db['attributes']??(_0x1860db['attributes']=Jt['collectAtt'+'ributes'](_0x1860db['vshader'])));const _0x16e91d=_0x1876b8['isWebGL2']&&(Ae['name']==='osx'||Ae['name']==='ios');if(_0x1860db['fshader']=ko['run'](_0x1860db['fshader'],_0x1860db['fincludes'],{'stripUnusedColorAttachments':_0x16e91d,'stripDefines':_0x21fdf0,'sourceName':'fragment\x20s'+'hader\x20for\x20'+this['label']}),!_0x1860db['vshader']||!_0x1860db['fshader']){w['error']('Shader:\x20Fa'+'iled\x20to\x20cr'+'eate\x20shade'+'r\x20'+this['label']+('.\x20Vertex\x20o'+'r\x20fragment'+'\x20shader\x20so'+'urce\x20is\x20em'+'pty.'),this),this['failed']=!(0x1fcd+-0x37*-0x26+-0x27f7);return;}}this['impl']=_0x1876b8['createShad'+'erImpl'](this),w['trace'](Im,'Alloc:\x20'+this['label']+',\x20stack:\x20'+Q['toString'](),{'instance':this});}['init'](){this['ready']=!(-0xd25+-0xaff*0x3+0x2e23),this['failed']=!(0x10c*0x7+-0x1cb2+-0x155f*-0x1);}get['label'](){return'Shader\x20Id\x20'+this['id']+'\x20('+(this['definition']['shaderLang'+'uage']===it?'WGSL':'GLSL')+')\x20'+this['name'];}['destroy'](){w['trace'](Im,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']),this['device']['onDestroyS'+'hader'](this),this['impl']['destroy'](this);}['loseContex'+'t'](){this['init'](),this['impl']['loseContex'+'t']();}['restoreCon'+'text'](){this['impl']['restoreCon'+'text'](this['device'],this);}}class WT{constructor(){h(this,'storage'),h(this,'gpuBuffer'),h(this,'offset');}}const Be=[];Be[Xs]=function(_0x5cb2c3,_0x10ef38,_0x47eabd){const _0x33ceb2=_0x5cb2c3['storageFlo'+'at32'];_0x33ceb2[_0x47eabd]=_0x10ef38;},Be[ga]=(_0x4483a9,_0x25c250,_0x412089)=>{const _0x1bdfa6=_0x4483a9['storageFlo'+'at32'];_0x1bdfa6[_0x412089]=_0x25c250[0x235b+0x1307*0x1+0x1*-0x3662],_0x1bdfa6[_0x412089+(-0x9b3*-0x1+0x15*0xe3+0x293*-0xb)]=_0x25c250[0x11*-0x34+0x1*0xabc+0x747*-0x1];},Be[ds]=(_0x18a5f0,_0x1e6198,_0x52ad2a)=>{const _0x2b534b=_0x18a5f0['storageFlo'+'at32'];_0x2b534b[_0x52ad2a]=_0x1e6198[-0x2360+0x9*-0x271+0x35*0x115],_0x2b534b[_0x52ad2a+(0x5*-0x2a2+0xc4*-0x23+0x27f7)]=_0x1e6198[-0x2b*-0x5+-0x1e29+0x1d53],_0x2b534b[_0x52ad2a+(-0x3*0xaff+-0x21da+-0x6d*-0x9d)]=_0x1e6198[-0xc*0x1be+-0xa*-0xe+-0xed*-0x16];},Be[Rn]=(_0xfd5f60,_0x46b1e6,_0x337f1f)=>{const _0x405a68=_0xfd5f60['storageFlo'+'at32'];_0x405a68[_0x337f1f]=_0x46b1e6[0x21f+0x1*0x1dfe+-0x201d],_0x405a68[_0x337f1f+(-0x751+-0xa6e+-0x47*-0x40)]=_0x46b1e6[-0x731*0x1+-0x3*0x342+0x10f8],_0x405a68[_0x337f1f+(-0x3e4*-0x2+0x232*0x2+-0xc2a)]=_0x46b1e6[-0x7*0x229+-0x18a4+0x27c5],_0x405a68[_0x337f1f+(-0xdb6+0x1*-0x1271+0x202a)]=_0x46b1e6[-0xa28+-0x137d+0x1da8];},Be[_a]=function(_0x95b1a6,_0x525b80,_0x304f69){const _0x46af15=_0x95b1a6['storageInt'+'32'];_0x46af15[_0x304f69]=_0x525b80;},Be[ca]=function(_0x5290f5,_0xeee501,_0x426462){const _0x630342=_0x5290f5['storageInt'+'32'];_0x630342[_0x426462]=_0xeee501[0x19b*0x7+0x1bf5+0x15a*-0x1d],_0x630342[_0x426462+(-0x22a3+0x25ae+-0x30a)]=_0xeee501[-0xa5f+-0x1482+0x1ee2];},Be[ha]=function(_0x2a6c39,_0x490d82,_0x3cde02){const _0xec066f=_0x2a6c39['storageInt'+'32'];_0xec066f[_0x3cde02]=_0x490d82[0x11df+0x235f+-0x353e],_0xec066f[_0x3cde02+(-0x11*-0x189+-0x4*-0x33f+-0x2714)]=_0x490d82[0x1*0x223f+0x1614+-0x3852],_0xec066f[_0x3cde02+(-0x1*-0x1c96+0x1*-0xc57+-0x1*0x103d)]=_0x490d82[-0x26d9+-0x2496+0xd9*0x59];},Be[da]=function(_0x28ca4d,_0x30ebff,_0x576a7e){const _0x3819a6=_0x28ca4d['storageInt'+'32'];_0x3819a6[_0x576a7e]=_0x30ebff[-0x1acd+-0x1f84+-0x3a51*-0x1],_0x3819a6[_0x576a7e+(-0x2*-0x103c+0x1*0xe3e+-0x2eb5)]=_0x30ebff[-0xdb1+-0x1bd9*-0x1+-0xe27],_0x3819a6[_0x576a7e+(0x63b+-0x5*-0x34d+0x1*-0x16ba)]=_0x30ebff[0xc49+0x2ed*0x3+-0xb*0x1ea],_0x3819a6[_0x576a7e+(-0x100a+-0x2*0x19c+0x1*0x1345)]=_0x30ebff[0x9ff*-0x2+-0x1bd1+0x2fd2*0x1];},Be[_h]=(_0x31d7a2,_0x9d442d,_0x3e821e)=>{const _0x5e3ea1=_0x31d7a2['storageFlo'+'at32'];_0x5e3ea1[_0x3e821e]=_0x9d442d[0x1f4*0x11+0x1*0xbe+0xa*-0x365],_0x5e3ea1[_0x3e821e+(-0x748*0x2+-0x2297+0x11e*0x2c)]=_0x9d442d[-0x2c*0x65+0x1*-0x1816+0x1b*0x189],_0x5e3ea1[_0x3e821e+(-0x200a+-0x1da8+0x3db6)]=_0x9d442d[0x18b5+0x23a6+-0x3c59],_0x5e3ea1[_0x3e821e+(0x79d+-0xe2+-0x6b6)]=_0x9d442d[-0x467*0x2+0x568*0x4+0xccf*-0x1],_0x5e3ea1[_0x3e821e+(-0x21e3+-0x56*-0x3+0x151*0x19)]=_0x9d442d[0x101f+-0xd6f*0x1+0x26*-0x12],_0x5e3ea1[_0x3e821e+(0xe90+-0x3*0x8e2+0xc1f)]=_0x9d442d[-0x4*0x2ac+-0x207f+0x2b34];},Be[On]=(_0x1ea791,_0x1858e4,_0x3302e6)=>{const _0x150c68=_0x1ea791['storageFlo'+'at32'];_0x150c68[_0x3302e6]=_0x1858e4[0xb9e+-0x376*-0xb+-0x31b0],_0x150c68[_0x3302e6+(-0x143f*0x1+-0x2342*-0x1+-0xf02)]=_0x1858e4[-0x1367+-0x1d64+0x30cc],_0x150c68[_0x3302e6+(-0x5*-0x3ca+-0x22c2+0xfd2)]=_0x1858e4[-0x924+-0x2*-0xf31+-0x153c],_0x150c68[_0x3302e6+(0x13*0x109+0x1*0x427+-0x17ce*0x1)]=_0x1858e4[0x1992*0x1+-0x3fd*-0x2+0x65*-0x55],_0x150c68[_0x3302e6+(-0x89*0x2e+-0x10*0x165+-0x77*-0x65)]=_0x1858e4[-0x4ed*-0x2+-0xca*0x5+-0x5e4],_0x150c68[_0x3302e6+(-0x15fc+0xafa*0x1+0x1*0xb08)]=_0x1858e4[0x26fa+0x2018+-0x2b*0x1a7],_0x150c68[_0x3302e6+(0x2*0xa6+0x1b89+-0x1ccd)]=_0x1858e4[-0x949*0x4+-0x1f43+0x446d],_0x150c68[_0x3302e6+(-0xb3f+0x11*-0x1a3+0x271b)]=_0x1858e4[-0x26b2+0x112d+0x1c*0xc5],_0x150c68[_0x3302e6+(0x2f*0xd+0xf0d+-0x2*0x8b3)]=_0x1858e4[0x2635*-0x1+0x76e+0xa45*0x3];},Be[ud]=function(_0x3625a2,_0x3c5e15,_0x1c5054,_0xda0d36){const _0x55c8b4=_0x3625a2['storageFlo'+'at32'];for(let _0x3bbbd1=-0x1754+0x24e0+-0x6*0x242;_0x3bbbd1<_0xda0d36;_0x3bbbd1++)_0x55c8b4[_0x1c5054+_0x3bbbd1*(-0x2448+-0x20d5+0x1*0x4521)]=_0x3c5e15[_0x3bbbd1];},Be[pd]=(_0x51a519,_0x50959b,_0x53b266,_0x42cd59)=>{const _0x28c898=_0x51a519['storageFlo'+'at32'];for(let _0x4fcf01=0x2459+-0x17*0x130+-0x909;_0x4fcf01<_0x42cd59;_0x4fcf01++)_0x28c898[_0x53b266+_0x4fcf01*(-0x15c6+-0xae5+-0x1*-0x20af)]=_0x50959b[_0x4fcf01*(0x232c+0x2d*-0x47+0x16af*-0x1)],_0x28c898[_0x53b266+_0x4fcf01*(-0xa7f+0xf6*-0x5+-0x1*-0xf51)+(0x1e71+-0x157b+-0x8f5*0x1)]=_0x50959b[_0x4fcf01*(0x2618+-0x1*0xe13+0x801*-0x3)+(-0x26c7+-0x1e0f+0x44d7)];},Be[md]=(_0x46e57c,_0x11a43e,_0x3346b8,_0x49b412)=>{const _0x1a5662=_0x46e57c['storageFlo'+'at32'];for(let _0x5ea9aa=-0x25f1+0x2*-0xc2f+-0xd*-0x4cb;_0x5ea9aa<_0x49b412;_0x5ea9aa++)_0x1a5662[_0x3346b8+_0x5ea9aa*(0xd*0x195+0x145e+-0x5*0x82f)]=_0x11a43e[_0x5ea9aa*(-0x3*0xb65+0xad*-0x17+0x31bd)],_0x1a5662[_0x3346b8+_0x5ea9aa*(-0x1cb4+-0x12b*0x5+0x228f)+(-0x1031+-0x18b7+0x28e9*0x1)]=_0x11a43e[_0x5ea9aa*(0x16f2+0x199f+-0x308e)+(-0x1ce4+0x3*-0xac6+0x3d37)],_0x1a5662[_0x3346b8+_0x5ea9aa*(-0x240e+0x1*0xd3b+0x16d7*0x1)+(0x3d2*-0x8+0x1691+0x1*0x801)]=_0x11a43e[_0x5ea9aa*(0x111c+0x2151*-0x1+0x1038)+(-0x250e+-0x47d+-0x3c7*-0xb)];},Be[Fn]=(_0x4fa0a6,_0x344173,_0x2763f9,_0x9a8e24)=>{const _0x19f358=_0x4fa0a6['storageUin'+'t32'];_0x19f358[_0x2763f9]=_0x344173;},Be[Nn]=(_0x5ddf24,_0x205ea6,_0x33c61b,_0x455443)=>{const _0x126c6b=_0x5ddf24['storageUin'+'t32'];_0x126c6b[_0x33c61b]=_0x205ea6[0x1a5c+-0x1*-0x24b+-0x1ca7],_0x126c6b[_0x33c61b+(0x22e1+-0x2*-0x239+0x2cf*-0xe)]=_0x205ea6[0x1e79+0xe94+-0x2d0c];},Be[kn]=(_0x52bd3a,_0x43cd75,_0xca6955,_0x1d58fd)=>{const _0x32addd=_0x52bd3a['storageUin'+'t32'];_0x32addd[_0xca6955]=_0x43cd75[0xbb5+0x168a+-0x223f],_0x32addd[_0xca6955+(-0x135*0xf+0x1ee8+-0xccc*0x1)]=_0x43cd75[0x198c+0x83b+-0x6*0x5a1],_0x32addd[_0xca6955+(0x2032+-0x1*0x399+-0x1c97)]=_0x43cd75[0x1cce+-0x1*-0x1b82+-0x384e];},Be[Un]=(_0x4f5fb9,_0x2ccd00,_0x18ddc5,_0x476bfa)=>{const _0x52acf2=_0x4f5fb9['storageUin'+'t32'];_0x52acf2[_0x18ddc5]=_0x2ccd00[0x239f+0x1da9*0x1+-0x1052*0x4],_0x52acf2[_0x18ddc5+(0x170f+0x3*-0x3a2+-0xc28*0x1)]=_0x2ccd00[0x1e35+-0x20f8+-0x2c4*-0x1],_0x52acf2[_0x18ddc5+(0x347*0x4+0x131e*0x2+0x2*-0x19ab)]=_0x2ccd00[0xa14*0x1+0x7*0x4ea+0xb1e*-0x4],_0x52acf2[_0x18ddc5+(0xee*-0x3+0x13f3*-0x1+0x16c0)]=_0x2ccd00[-0x20c5*-0x1+-0xf5b+-0x1167];},Be[Bn]=function(_0x434c26,_0x1b1b6a,_0x1fc38f,_0x4cbbdb){const _0x2ba66a=_0x434c26['storageInt'+'32'];for(let _0x46096e=0x1362+-0x10a3+0x13*-0x25;_0x46096e<_0x4cbbdb;_0x46096e++)_0x2ba66a[_0x1fc38f+_0x46096e*(0xf74+-0x1e5f+0x1*0xeef)]=_0x1b1b6a[_0x46096e];},Be[gd]=Be[Bn],Be[_d]=function(_0x3a6a2e,_0x469761,_0x54aba9,_0x47a6f2){const _0x2e9e66=_0x3a6a2e['storageUin'+'t32'];for(let _0x498f21=0x55b+0x1bc9*0x1+0xe*-0x25e;_0x498f21<_0x47a6f2;_0x498f21++)_0x2e9e66[_0x54aba9+_0x498f21*(-0x170c+0xcf+0x1641)]=_0x469761[_0x498f21];},Be[zn]=(_0x4a655c,_0xbc4bcd,_0x5c3671,_0xfa8cae)=>{const _0x2dbc7d=_0x4a655c['storageInt'+'32'];for(let _0x3a544e=0x22f+-0xa0*0x38+0x20d1;_0x3a544e<_0xfa8cae;_0x3a544e++)_0x2dbc7d[_0x5c3671+_0x3a544e*(-0x1270+0x58*-0xa+0x15e4)]=_0xbc4bcd[_0x3a544e*(-0x12*0xdf+0x1*0x94f+0x661)],_0x2dbc7d[_0x5c3671+_0x3a544e*(0x5*-0x691+-0x6*0x409+0x390f)+(-0x1677+-0x1cf8+0x3370)]=_0xbc4bcd[_0x3a544e*(0x6c5*-0x5+-0xbd5+0x2db0)+(0x1*-0x1cc7+0x2b2+0x3ba*0x7)];},Be[yd]=Be[zn],Be[Sd]=(_0x38b261,_0x231d25,_0x27a7e9,_0x5ad3)=>{const _0x15e881=_0x38b261['storageUin'+'t32'];for(let _0x1ad9ba=0x102b*0x1+0x4*0x4f9+-0x240f;_0x1ad9ba<_0x5ad3;_0x1ad9ba++)_0x15e881[_0x27a7e9+_0x1ad9ba*(-0xfd*0x1f+0x28*-0x13+0x219f*0x1)]=_0x231d25[_0x1ad9ba*(0x18c0+-0xc45+-0xc79)],_0x15e881[_0x27a7e9+_0x1ad9ba*(-0x1*-0x7ce+-0x1*-0x233f+-0x2b09)+(0x58*0x2+-0x1a85*-0x1+-0x1b34*0x1)]=_0x231d25[_0x1ad9ba*(-0x1*0x1481+0x94+0x13ef)+(-0x1b4d+0x1*0x19+-0x3e3*-0x7)];},Be[Vn]=(_0x36cf85,_0x19f754,_0x5f1f55,_0x7617ec)=>{const _0x29177e=_0x36cf85['storageInt'+'32'];for(let _0x40a11c=-0x16*0xa4+-0x2217+-0x5*-0x9a3;_0x40a11c<_0x7617ec;_0x40a11c++)_0x29177e[_0x5f1f55+_0x40a11c*(-0x1601+-0x3*0xcbf+-0x359*-0x12)]=_0x19f754[_0x40a11c*(-0x85*0xa+-0x1afe*-0x1+-0x15c9)],_0x29177e[_0x5f1f55+_0x40a11c*(-0x24e4+-0x1b1*0x17+0x3*0x1945)+(-0x170d*-0x1+-0x1*-0x1505+-0x2c11)]=_0x19f754[_0x40a11c*(-0xc08+0x3cb*-0x5+0x1f02)+(-0x1054+-0x4*0x18a+-0x65*-0x39)],_0x29177e[_0x5f1f55+_0x40a11c*(-0x1339+0x434+0xf09)+(0x5*-0x19d+-0x9*-0x287+-0xeac)]=_0x19f754[_0x40a11c*(-0x19d8+0x5aa+0x1*0x1431)+(0xb07*-0x1+-0x14d*0x11+0x2126)];},Be[xd]=Be[Vn],Be[vd]=(_0x5d9e75,_0x37b8e2,_0x521461,_0x5c0e26)=>{const _0x1a9f89=_0x5d9e75['storageUin'+'t32'];for(let _0x1748e9=0x1825+0xa39*-0x1+-0x16*0xa2;_0x1748e9<_0x5c0e26;_0x1748e9++)_0x1a9f89[_0x521461+_0x1748e9*(0x1*0x2582+-0xd*-0x59+-0x867*0x5)]=_0x37b8e2[_0x1748e9*(-0x1*-0xd81+0xf7e+-0x1cfc)],_0x1a9f89[_0x521461+_0x1748e9*(0x26b*-0x3+0x2*0x577+0x3a9*-0x1)+(-0xd7e*-0x2+-0x1*0x29+-0x1ad2)]=_0x37b8e2[_0x1748e9*(0x1*-0x2023+0x215e+-0x138)+(0x1019+0x2bc*-0x5+-0x26c)],_0x1a9f89[_0x521461+_0x1748e9*(-0xd*0x3f+-0x3*0x143+0x700)+(0x15d*0x11+0xb3*-0x1b+-0x44a)]=_0x37b8e2[_0x1748e9*(0x25d3+-0x13*-0xdb+-0x3611)+(0x1*-0xdc5+0x1eb2+0x1*-0x10eb)];};class zp{constructor(_0x9e411c,_0x328821,_0x42ca75=!(-0x7ff*0x4+0x1ca3+0x359)){h(this,'device'),h(this,'persistent'),h(this,'allocation'),h(this,'storageFlo'+'at32'),h(this,'storageInt'+'32'),h(this,'storageUin'+'t32'),h(this,'renderVers'+'ionDirty',-0x1*0x12af+0x17d6+-0x527);if(this['device']=_0x9e411c,this['format']=_0x328821,this['persistent']=_0x42ca75,w['assert'](_0x328821),_0x42ca75){this['impl']=_0x9e411c['createUnif'+'ormBufferI'+'mpl'](this);const _0x346f3f=new ArrayBuffer(_0x328821['byteSize']);this['assignStor'+'age'](new Int32Array(_0x346f3f)),_0x9e411c['_vram']['ub']+=this['format']['byteSize'];}else this['allocation']=new WT();}['destroy'](){if(this['persistent']){const _0x3cc38b=this['device'];this['impl']['destroy'](_0x3cc38b),_0x3cc38b['_vram']['ub']-=this['format']['byteSize'];}}get['offset'](){return this['persistent']?0x1d18+0x18be*-0x1+0x2*-0x22d:this['allocation']['offset'];}['assignStor'+'age'](_0xb01e1a){this['storageInt'+'32']=_0xb01e1a,this['storageUin'+'t32']=new Uint32Array(_0xb01e1a['buffer'],_0xb01e1a['byteOffset'],_0xb01e1a['byteLength']/(0x35*-0x6+-0x576+0x14*0x56)),this['storageFlo'+'at32']=new Float32Array(_0xb01e1a['buffer'],_0xb01e1a['byteOffset'],_0xb01e1a['byteLength']/(0x32b*-0x5+0x1b40+0xb65*-0x1));}['loseContex'+'t'](){var _0x1d6b29;(_0x1d6b29=this['impl'])==null||_0x1d6b29['loseContex'+'t']();}['setUniform'](_0x11c66,_0x754347){w['assert'](_0x11c66);const _0x45be32=_0x11c66['offset'];if(_0x754347!=null){const _0x3d396f=Be[_0x11c66['updateType']];_0x3d396f?_0x3d396f(this,_0x754347,_0x45be32,_0x11c66['count']):this['storageFlo'+'at32']['set'](_0x754347,_0x45be32);}else w['warnOnce']('Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20to\x20unif'+'orm\x20['+_0x11c66['name']+('],\x20expecte'+'d\x20type\x20')+Ey[_0x11c66['type']]+('\x20while\x20ren'+'dering\x20')+Q['toString']());}['set'](_0x471f02,_0x103647){const _0x16b195=this['format']['map']['get'](_0x471f02);w['assert'](_0x16b195,'Uniform\x20na'+'me\x20['+_0x471f02+(']\x20is\x20not\x20p'+'art\x20of\x20the'+'\x20Uniform\x20b'+'uffer.')),_0x16b195&&this['setUniform'](_0x16b195,_0x103647);}['startUpdat'+'e'](_0x23f0ff){if(!this['persistent']){const _0x338b7=this['allocation'],_0x1c4ca1=_0x338b7['gpuBuffer'];this['device']['dynamicBuf'+'fers']['alloc'](_0x338b7,this['format']['byteSize']),this['assignStor'+'age'](_0x338b7['storage']),_0x23f0ff&&(_0x23f0ff['bindGroup']=_0x338b7['gpuBuffer']['getBindGro'+'up'](this),_0x23f0ff['offsets'][-0x2643+0x168e*0x1+-0xfb5*-0x1]=_0x338b7['offset']),_0x1c4ca1!==_0x338b7['gpuBuffer']&&(this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion']);}}['endUpdate'](){this['persistent']?this['impl']['unlock'](this):(this['storageFlo'+'at32']=null,this['storageInt'+'32']=null);}['update'](_0x1439c4){this['startUpdat'+'e'](_0x1439c4);const _0x5aac97=this['format']['uniforms'];for(let _0x4160fb=0xaf*-0x7+0x1*0x1fed+0x3*-0x90c;_0x4160fb<_0x5aac97['length'];_0x4160fb++){const _0x57cb95=_0x5aac97[_0x4160fb]['scopeId']['value'];this['setUniform'](_0x5aac97[_0x4160fb],_0x57cb95);}this['endUpdate']();}}class $T{constructor(){h(this,'frameAlloc'+'ations',[]),h(this,'pastFrameA'+'llocations',new Map()),h(this,'_enabled',!(-0x4*0x93c+-0x1c0a+0x40fb)),h(this,'_enableReq'+'uest',!(-0x5e9+0x5*-0x556+0x2098)),h(this,'_frameTime',-0x8af+0x111f+-0x10e*0x8);}['loseContex'+'t'](){this['pastFrameA'+'llocations']['clear']();}set['enabled'](_0x5dfb06){this['_enableReq'+'uest']=_0x5dfb06;}get['enabled'](){return this['_enableReq'+'uest'];}['processEna'+'bleRequest'](){this['_enableReq'+'uest']!==this['_enabled']&&(this['_enabled']=this['_enableReq'+'uest'],this['_enabled']||(this['_frameTime']=-0x248d*0x1+-0x1*0x3cb+0x2858));}['request'](_0x535716){this['pastFrameA'+'llocations']['set'](_0x535716,this['frameAlloc'+'ations']),this['frameAlloc'+'ations']=[];}['report'](_0x43c002,_0x117ca7){if(_0x117ca7){const _0x578855=this['pastFrameA'+'llocations']['get'](_0x43c002);if(w['assert'](_0x578855['length']===_0x117ca7['length']),_0x117ca7['length']>-0xff8+-0x1*0x21b5+-0x585*-0x9&&(this['_frameTime']=_0x117ca7['reduce']((_0x429247,_0x1c4c13)=>_0x429247+_0x1c4c13,-0xc11*0x3+0x550+0x1ee3)),mi['get'](Gl)){w['trace'](Gl,'--\x20GPU\x20tim'+'ings\x20for\x20f'+'rame\x20'+_0x43c002+'\x20--');let _0x157190=0xc3d+-0x1421*0x1+0x1*0x7e4;for(let _0x4476e9=-0x6ee*0x4+0x5d5*0x1+0x15e3;_0x4476e9<_0x578855['length'];++_0x4476e9){const _0x15193b=_0x578855[_0x4476e9];_0x157190+=_0x117ca7[_0x4476e9],w['trace'](Gl,_0x117ca7[_0x4476e9]['toFixed'](0x1c20+-0x22d5+0x6b7)+'\x20ms\x20'+_0x15193b);}w['trace'](Gl,_0x157190['toFixed'](-0x26c+0x14bd*0x1+-0x124f)+'\x20ms\x20TOTAL');}}this['pastFrameA'+'llocations']['delete'](_0x43c002);}['getSlot'](_0x374a35){const _0x2d9012=this['frameAlloc'+'ations']['length'];return this['frameAlloc'+'ations']['push'](_0x374a35),_0x2d9012;}get['slotCount'](){return this['frameAlloc'+'ations']['length'];}}class jy{constructor(){h(this,'bufferId',null);}['destroy'](_0x1181de){this['bufferId']&&(_0x1181de['gl']['deleteBuff'+'er'](this['bufferId']),this['bufferId']=null);}get['initialize'+'d'](){return!!this['bufferId'];}['loseContex'+'t'](){this['bufferId']=null;}['unlock'](_0x24fb88,_0x3bc4e9,_0x22b9d3,_0xa6fe61){const _0x204e27=_0x24fb88['gl'];if(this['bufferId'])_0x204e27['bindBuffer'](_0x22b9d3,this['bufferId']),_0x204e27['bufferSubD'+'ata'](_0x22b9d3,-0x5*-0x62e+-0x1*0x23d5+-0x1*-0x4ef,_0xa6fe61);else{let _0x4754e5;switch(_0x3bc4e9){case ms:_0x4754e5=_0x204e27['STATIC_DRA'+'W'];break;case lh:_0x4754e5=_0x204e27['DYNAMIC_DR'+'AW'];break;case ey:_0x4754e5=_0x204e27['STREAM_DRA'+'W'];break;case bx:_0x4754e5=_0x204e27['DYNAMIC_CO'+'PY'];break;}this['bufferId']=_0x204e27['createBuff'+'er'](),_0x204e27['bindBuffer'](_0x22b9d3,this['bufferId']),_0x204e27['bufferData'](_0x22b9d3,_0xa6fe61,_0x4754e5);}}}class XT extends jy{constructor(){super(...arguments),h(this,'vao',null);}['destroy'](_0x973636){super['destroy'](_0x973636),_0x973636['unbindVert'+'exArray']();}['loseContex'+'t'](){super['loseContex'+'t'](),this['vao']=null;}['unlock'](_0xcdc0e5){const _0x32fe19=_0xcdc0e5['device'];super['unlock'](_0x32fe19,_0xcdc0e5['usage'],_0x32fe19['gl']['ARRAY_BUFF'+'ER'],_0xcdc0e5['storage']);}}class qT extends jy{constructor(_0x47853b){super();const _0x144a09=_0x47853b['device']['gl'],_0x4698c5=_0x47853b['format'];_0x4698c5===$f?this['glFormat']=_0x144a09['UNSIGNED_B'+'YTE']:_0x4698c5===Yi?this['glFormat']=_0x144a09['UNSIGNED_S'+'HORT']:_0x4698c5===wr&&(this['glFormat']=_0x144a09['UNSIGNED_I'+'NT']);}['unlock'](_0xc7d4a6){const _0x430b17=_0xc7d4a6['device'];super['unlock'](_0x430b17,_0xc7d4a6['usage'],_0x430b17['gl']['ELEMENT_AR'+'RAY_BUFFER'],_0xc7d4a6['storage']);}}class jT{constructor(_0x35698e,_0x521a1d,_0x5e63e9,_0x30aabe){if(this['locationId']=_0x30aabe,this['scopeId']=_0x35698e['scope']['resolve'](_0x521a1d),this['version']=new Uy(),_0x521a1d['substring'](_0x521a1d['length']-(0x1*-0x20dc+0x1ad5+-0x60a*-0x1))==='[0]')switch(_0x5e63e9){case Xs:_0x5e63e9=ud;break;case _a:_0x5e63e9=Bn;break;case Fn:_0x5e63e9=_d;break;case Tn:_0x5e63e9=gd;break;case ga:_0x5e63e9=pd;break;case ca:_0x5e63e9=zn;break;case Nn:_0x5e63e9=Sd;break;case tl:_0x5e63e9=yd;break;case ds:_0x5e63e9=md;break;case ha:_0x5e63e9=Vn;break;case kn:_0x5e63e9=vd;break;case sl:_0x5e63e9=xd;break;case Rn:_0x5e63e9=Lp;break;case da:_0x5e63e9=gh;break;case Un:_0x5e63e9=Rp;break;case il:_0x5e63e9=Op;break;}this['dataType']=_0x5e63e9,this['value']=[null,null,null,null],this['array']=[];}}let l_=0xd3c+0x1bd+-0x1*0xef9;const YT=new Set(['gl_VertexI'+'D','gl_Instanc'+'eID','gl_DrawID','gl_BaseVer'+'tex','gl_BaseIns'+'tance']);class KT{constructor(){h(this,'map',new Map());}['destroy'](_0x32ebc1){this['map']['forEach'](_0x3dbb41=>{_0x32ebc1['gl']['deleteShad'+'er'](_0x3dbb41);});}['loseContex'+'t'](_0x25b7e1){this['map']['clear']();}}const ZT=new Kt(),QT=new Kt();class JT{constructor(_0x59016d){h(this,'compileDur'+'ation',-0x3*0xb62+-0x22+-0x2248*-0x1),(this['init'](),this['compile'](_0x59016d['device'],_0x59016d),this['link'](_0x59016d['device'],_0x59016d),_0x59016d['device']['shaders']['push'](_0x59016d));}['destroy'](_0x2435bd){this['glProgram']&&(_0x2435bd['device']['gl']['deleteProg'+'ram'](this['glProgram']),this['glProgram']=null);}['init'](){this['uniforms']=[],this['samplers']=[],this['attributes']=[],this['glProgram']=null,this['glVertexSh'+'ader']=null,this['glFragment'+'Shader']=null;}['loseContex'+'t'](){this['init']();}['restoreCon'+'text'](_0x542753,_0x1e06e7){this['compile'](_0x542753,_0x1e06e7),this['link'](_0x542753,_0x1e06e7);}['compile'](_0x21b12b,_0x45bef3){const _0x4b687e=_0x45bef3['definition'];this['glVertexSh'+'ader']=this['_compileSh'+'aderSource'](_0x21b12b,_0x4b687e['vshader'],!(0x1e26*0x1+0x1f88+-0x3dae)),this['glFragment'+'Shader']=this['_compileSh'+'aderSource'](_0x21b12b,_0x4b687e['fshader'],!(-0x127e+0x943*0x3+0x52*-0x1d));}['link'](_0x399216,_0x203619){if(this['glProgram'])return;const _0x4efea4=_0x399216['gl'];if(_0x4efea4['isContextL'+'ost']())return;let _0x4e2c5e=0x68*-0x52+0x1*0x5c6+0x32*0x8d;w['call'](()=>{this['compileDur'+'ation']=0xd*-0x102+-0xd59+-0x3d*-0x6f,_0x4e2c5e=de();});const _0x49c3be=_0x4efea4['createProg'+'ram']();this['glProgram']=_0x49c3be,_0x4efea4['attachShad'+'er'](_0x49c3be,this['glVertexSh'+'ader']),_0x4efea4['attachShad'+'er'](_0x49c3be,this['glFragment'+'Shader']);const _0x416044=_0x203619['definition'],_0x28f611=_0x416044['attributes'];if(_0x416044['useTransfo'+'rmFeedback']){const _0x4453b8=[];for(const _0x4627f2 in _0x28f611)_0x28f611['hasOwnProp'+'erty'](_0x4627f2)&&_0x4453b8['push']('out_'+_0x4627f2);_0x4efea4['transformF'+'eedbackVar'+'yings'](_0x49c3be,_0x4453b8,_0x4efea4['INTERLEAVE'+'D_ATTRIBS']);}const _0x56fa17={};for(const _0x3994ff in _0x28f611)if(_0x28f611['hasOwnProp'+'erty'](_0x3994ff)){const _0x3e8a74=_0x28f611[_0x3994ff],_0x36fa29=Le[_0x3e8a74];w['assert'](!_0x56fa17['hasOwnProp'+'erty'](_0x36fa29),'WARNING:\x20T'+'wo\x20attribu'+'tes\x20are\x20ma'+'pped\x20to\x20th'+'e\x20same\x20loc'+'ation\x20in\x20a'+'\x20shader:\x20'+_0x56fa17[_0x36fa29]+'\x20and\x20'+_0x3994ff),_0x56fa17[_0x36fa29]=_0x3994ff,_0x4efea4['bindAttrib'+'Location'](_0x49c3be,_0x36fa29,_0x3994ff);}_0x4efea4['linkProgra'+'m'](_0x49c3be),w['call'](()=>{this['compileDur'+'ation']=de()-_0x4e2c5e;}),_0x399216['_shaderSta'+'ts']['linked']++,_0x416044['tag']===Sy&&_0x399216['_shaderSta'+'ts']['materialSh'+'aders']++;}['_compileSh'+'aderSource'](_0x28ca6f,_0x46ed19,_0x5d5f79){const _0x475e1a=_0x28ca6f['gl'];if(_0x475e1a['isContextL'+'ost']())return null;const _0x24d003=(_0x5d5f79?ZT:QT)['get'](_0x28ca6f,()=>new KT());let _0x34f06f=_0x24d003['map']['get'](_0x46ed19);if(!_0x34f06f){const _0x3e573b=de();_0x28ca6f['fire']('shader:com'+'pile:start',{'timestamp':_0x3e573b,'target':_0x28ca6f}),_0x34f06f=_0x475e1a['createShad'+'er'](_0x5d5f79?_0x475e1a['VERTEX_SHA'+'DER']:_0x475e1a['FRAGMENT_S'+'HADER']),_0x475e1a['shaderSour'+'ce'](_0x34f06f,_0x46ed19),_0x475e1a['compileSha'+'der'](_0x34f06f),_0x24d003['map']['set'](_0x46ed19,_0x34f06f);const _0x53cb25=de();_0x28ca6f['fire']('shader:com'+'pile:end',{'timestamp':_0x53cb25,'target':_0x28ca6f}),_0x28ca6f['_shaderSta'+'ts']['compileTim'+'e']+=_0x53cb25-_0x3e573b,_0x5d5f79?_0x28ca6f['_shaderSta'+'ts']['vsCompiled']++:_0x28ca6f['_shaderSta'+'ts']['fsCompiled']++;}return _0x34f06f;}['finalize'](_0x2bba3c,_0x41eaea){var _0x52b96b,_0x5c14b9;const _0x50c517=_0x2bba3c['gl'];if(_0x50c517['isContextL'+'ost']())return!(0x1e09+0x2046+-0x4cb*0xd);const _0x23417f=this['glProgram'],_0x22176e=_0x41eaea['definition'],_0x3e3aab=de();_0x2bba3c['fire']('shader:lin'+'k:start',{'timestamp':_0x3e3aab,'target':_0x2bba3c});let _0x1238d6=0x2*-0x1370+-0x2005+0x46e5;if(w['call'](()=>{_0x1238d6=de();}),!_0x50c517['getProgram'+'Parameter'](_0x23417f,_0x50c517['LINK_STATU'+'S'])){if(!this['_isCompile'+'d'](_0x2bba3c,_0x41eaea,this['glVertexSh'+'ader'],_0x22176e['vshader'],'vertex')||!this['_isCompile'+'d'](_0x2bba3c,_0x41eaea,this['glFragment'+'Shader'],_0x22176e['fshader'],'fragment'))return!(-0x229+-0x1d3*-0x3+0x79*-0x7);const _0x289d2a='Failed\x20to\x20'+'link\x20shade'+'r\x20program.'+'\x20Error:\x20'+_0x50c517['getProgram'+'InfoLog'](_0x23417f);return _0x22176e['translated'+'Frag']=(_0x52b96b=_0x50c517['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(0x13*-0xec+0x2*0xcff+-0x1*0x87a):_0x52b96b['getTransla'+'tedShaderS'+'ource'](this['glFragment'+'Shader']),_0x22176e['translated'+'Vert']=(_0x5c14b9=_0x50c517['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(-0x3a*0x23+0x78a+0x19*0x4):_0x5c14b9['getTransla'+'tedShaderS'+'ource'](this['glVertexSh'+'ader']),console['error'](_0x289d2a,_0x22176e),console['error'](_0x289d2a),!(-0x13cc+-0x64*-0x20+-0x1*-0x74d);}const _0x582ad6=_0x50c517['getProgram'+'Parameter'](_0x23417f,_0x50c517['ACTIVE_ATT'+'RIBUTES']);_0x41eaea['attributes']['clear']();for(let _0x4ebf35=-0xb5*-0x17+0x262a+-0x366d;_0x4ebf35<_0x582ad6;_0x4ebf35++){const _0x56d7b6=_0x50c517['getActiveA'+'ttrib'](_0x23417f,_0x4ebf35),_0x413f7b=_0x50c517['getAttribL'+'ocation'](_0x23417f,_0x56d7b6['name']);YT['has'](_0x56d7b6['name'])||(_0x22176e['attributes'][_0x56d7b6['name']]===void(-0x45e+-0x6dd+0xb3b)?(console['error']('Vertex\x20sha'+'der\x20attrib'+'ute\x20\x22'+_0x56d7b6['name']+('\x22\x20is\x20not\x20m'+'apped\x20to\x20a'+'\x20semantic\x20'+'in\x20shader\x20'+'definition'+',\x20shader\x20[')+_0x41eaea['label']+']',_0x41eaea),_0x41eaea['failed']=!(0x7*0x251+-0x5c4+-0xa73)):_0x41eaea['attributes']['set'](_0x413f7b,_0x56d7b6['name']));}const _0x287b15=_0x2bba3c['_samplerTy'+'pes'],_0x186dfc=_0x50c517['getProgram'+'Parameter'](_0x23417f,_0x50c517['ACTIVE_UNI'+'FORMS']);for(let _0x236117=-0x17a0+0x11d4+-0x1*-0x5cc;_0x236117<_0x186dfc;_0x236117++){const _0xe497f0=_0x50c517['getActiveU'+'niform'](_0x23417f,_0x236117),_0x458736=_0x50c517['getUniform'+'Location'](_0x23417f,_0xe497f0['name']),_0x33fda9=new jT(_0x2bba3c,_0xe497f0['name'],_0x2bba3c['pcUniformT'+'ype'][_0xe497f0['type']],_0x458736);_0x287b15['has'](_0xe497f0['type'])?this['samplers']['push'](_0x33fda9):this['uniforms']['push'](_0x33fda9);}_0x41eaea['ready']=!(-0xd6*-0x11+-0x1*0x1454+-0xae*-0x9);const _0x42164e=de();return _0x2bba3c['fire']('shader:lin'+'k:end',{'timestamp':_0x42164e,'target':_0x2bba3c}),_0x2bba3c['_shaderSta'+'ts']['compileTim'+'e']+=_0x42164e-_0x3e3aab,w['call'](()=>{const _0x1e910b=de()-_0x1238d6;this['compileDur'+'ation']+=_0x1e910b,l_+=this['compileDur'+'ation'],w['trace']($0,'[id:\x20'+_0x41eaea['id']+']\x20'+_0x41eaea['name']+':\x20'+this['compileDur'+'ation']['toFixed'](-0x1322+-0x417*-0x9+-0x11ac)+('ms,\x20TOTAL:'+'\x20')+l_['toFixed'](-0x23*-0x2+-0x5*-0xf0+-0x9*0x8d)+'ms');}),!(0x167d*0x1+0x2119+0x5*-0xb1e);}['_isCompile'+'d'](_0x529659,_0x50fa43,_0x3a388c,_0x94f306,_0x40e79c){const _0x482530=_0x529659['gl'];if(!_0x482530['getShaderP'+'arameter'](_0x3a388c,_0x482530['COMPILE_ST'+'ATUS'])){const _0x4ccb26=_0x482530['getShaderI'+'nfoLog'](_0x3a388c),[_0x4ce14e,_0x54187f]=this['_processEr'+'ror'](_0x94f306,_0x4ccb26),_0x56bd29='Failed\x20to\x20'+'compile\x20'+_0x40e79c+'\x20shader:\x0a\x0a'+_0x4ccb26+'\x0a'+_0x4ce14e+('\x20while\x20ren'+'dering\x20')+Q['toString']();return _0x54187f['shader']=_0x50fa43,console['error'](_0x56bd29,_0x54187f),console['error'](_0x56bd29),!(-0xab4+0xf7*0x25+0xc7f*-0x2);}return!(-0x86b*-0x1+-0x1bdf+0x1374);}['isLinked'](_0x2b7d12){const {extParallelShaderCompile:_0x481f92}=_0x2b7d12;return _0x481f92?_0x2b7d12['gl']['getProgram'+'Parameter'](this['glProgram'],_0x481f92['COMPLETION'+'_STATUS_KH'+'R']):!(0x191*-0x9+-0x11*-0xeb+-0x182);}['_processEr'+'ror'](_0x10a1bc,_0x1ba275){const _0x446175={};let _0x265314='';if(_0x10a1bc){const _0x4f3287=_0x10a1bc['split']('\x0a');let _0xe55078=-0xc94+0x1*0x6a2+0x2f9*0x2,_0x3848d4=_0x4f3287['length'];if(_0x1ba275&&_0x1ba275['startsWith']('ERROR:')){const _0x26efac=_0x1ba275['match'](/^ERROR:\s(\d+):(\d+):\s*(.+)/);_0x26efac&&(_0x446175['message']=_0x26efac[-0xe2*-0xe+-0x4b8+-0x9*0xd9],_0x446175['line']=parseInt(_0x26efac[-0x1e02+-0x1472+0x2*0x193b],-0x249a+-0x4e*0x1e+0x2dc8),_0xe55078=Math['max'](-0x740*0x1+0x5*-0x454+0x1ce4,_0x446175['line']-(-0x2*-0x921+-0x1cd*0x8+-0x62*0xa)),_0x3848d4=Math['min'](_0x4f3287['length'],_0x446175['line']+(0x1dd6+-0x4*0x9e+-0x1*0x1b59)));}for(let _0x21cea2=_0xe55078;_0x21cea2<_0x3848d4;_0x21cea2++){const _0x2f69e8=_0x21cea2+(0xe8a+-0x4a2*-0x5+-0x3*0xc91)===_0x446175['line']?'>\x20':'\x20\x20';_0x265314+=''+_0x2f69e8+(_0x21cea2+(0x1917+0xd22+-0x8*0x4c7))+':\x09'+_0x4f3287[_0x21cea2]+'\x0a';}_0x446175['source']=_0x10a1bc;}return[_0x265314,_0x446175];}}function c_(_0x58c853,_0x104471){const _0x3ff944=_0x58c853['width'],_0x3ceaa5=_0x58c853['height'];if(_0x3ff944>_0x104471||_0x3ceaa5>_0x104471){const _0x345cdd=_0x104471/Math['max'](_0x3ff944,_0x3ceaa5),_0x3a2035=Math['floor'](_0x3ff944*_0x345cdd),_0x228a1c=Math['floor'](_0x3ceaa5*_0x345cdd);w['warn']('Image\x20dime'+'nsions\x20lar'+'ger\x20than\x20m'+'ax\x20support'+'ed\x20texture'+'\x20size\x20of\x20'+_0x104471+('.\x20Resizing'+'\x20from\x20')+_0x3ff944+',\x20'+_0x3ceaa5+'\x20to\x20'+_0x3a2035+',\x20'+_0x228a1c+'.');const _0x1bd1a4=document['createElem'+'ent']('canvas');return _0x1bd1a4['width']=_0x3a2035,_0x1bd1a4['height']=_0x228a1c,_0x1bd1a4['getContext']('2d')['drawImage'](_0x58c853,0x16*-0xdd+-0x42c*-0x4+-0x76*-0x5,0x31*-0x67+-0x26c8+-0x257*-0x19,_0x3ff944,_0x3ceaa5,0x241*-0x6+0x3*0x6bd+0x23b*-0x3,-0x3*-0x98+-0x1*-0x1251+-0x69*0x31,_0x3a2035,_0x228a1c),_0x1bd1a4;}return _0x58c853;}class ew{constructor(_0x291fb2){h(this,'_glTexture',null),h(this,'_glTarget'),h(this,'_glFormat'),h(this,'_glInterna'+'lFormat'),h(this,'_glPixelTy'+'pe'),h(this,'_glCreated'),h(this,'dirtyParam'+'eterFlags',-0x1*0x13+0xc2*0x18+-0x121d*0x1),this['texture']=_0x291fb2;}['destroy'](_0x487a7b){if(this['_glTexture']){for(let _0x1ddd0f=-0x3d*-0x49+-0x1eba+0xd55*0x1;_0x1ddd0f<_0x487a7b['textureUni'+'ts']['length'];_0x1ddd0f++){const _0x1e2b3f=_0x487a7b['textureUni'+'ts'][_0x1ddd0f];for(let _0xd2fa46=0x15fe+0x17*-0xa5+-0x16f*0x5;_0xd2fa46<_0x1e2b3f['length'];_0xd2fa46++)_0x1e2b3f[_0xd2fa46]===this['_glTexture']&&(_0x1e2b3f[_0xd2fa46]=null);}_0x487a7b['gl']['deleteText'+'ure'](this['_glTexture']),this['_glTexture']=null;}}['loseContex'+'t'](){this['_glTexture']=null;}['propertyCh'+'anged'](_0x5da6ba){this['dirtyParam'+'eterFlags']|=_0x5da6ba;}['initialize'](_0x3e2c91,_0x58eb8){const _0x936278=_0x3e2c91['gl'];switch(this['_glTexture']=_0x936278['createText'+'ure'](),this['_glTarget']=_0x58eb8['_cubemap']?_0x936278['TEXTURE_CU'+'BE_MAP']:_0x58eb8['_volume']?_0x936278['TEXTURE_3D']:_0x58eb8['array']?_0x936278['TEXTURE_2D'+'_ARRAY']:_0x936278['TEXTURE_2D'],_0x58eb8['_format']){case ty:this['_glFormat']=_0x936278['ALPHA'],this['_glInterna'+'lFormat']=_0x936278['ALPHA'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_B'+'YTE'];break;case sy:this['_glFormat']=_0x936278['LUMINANCE'],this['_glInterna'+'lFormat']=_0x936278['LUMINANCE'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_B'+'YTE'];break;case ap:this['_glFormat']=_0x936278['LUMINANCE_'+'ALPHA'],this['_glInterna'+'lFormat']=_0x936278['LUMINANCE_'+'ALPHA'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_B'+'YTE'];break;case Ep:this['_glFormat']=_0x936278['RED'],this['_glInterna'+'lFormat']=_0x936278['R8'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_B'+'YTE'];break;case bp:this['_glFormat']=_0x936278['RG'],this['_glInterna'+'lFormat']=_0x936278['RG8'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_B'+'YTE'];break;case Jh:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x936278['RGB565'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_S'+'HORT_5_6_5'];break;case np:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x936278['RGB5_A1'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_S'+'HORT_5_5_5'+'_1'];break;case ed:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x936278['RGBA4'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_S'+'HORT_4_4_4'+'_4'];break;case Cr:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x936278['RGB8'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_B'+'YTE'];break;case Ne:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x936278['RGBA8'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_B'+'YTE'];break;case ny:case hy:w['error']('BGRA8\x20and\x20'+'SBGRA8\x20tex'+'ture\x20forma'+'ts\x20are\x20not'+'\x20supported'+'\x20by\x20WebGL.');break;case td:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGB_S3TC_'+'DXT1_EXT'];break;case op:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT3_EXT'];break;case vl:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT5_EXT'];break;case id:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'ETC1']['COMPRESSED'+'_RGB_ETC1_'+'WEBGL'];break;case xl:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_2BPPV1_IM'+'G'];break;case Tl:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_2BPPV1_I'+'MG'];break;case rd:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_4BPPV1_IM'+'G'];break;case ad:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_4BPPV1_I'+'MG'];break;case cp:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGB8_ETC2'];break;case hp:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGBA8_ETC'+'2_EAC'];break;case iy:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_RGBA_ASTC'+'_4x4_KHR'];break;case ry:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGB_ATC_W'+'EBGL'];break;case ay:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGBA_ATC_'+'INTERPOLAT'+'ED_ALPHA_W'+'EBGL'];break;case dy:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x3e2c91['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'SIGNED_FLO'+'AT_EXT'];break;case fy:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x3e2c91['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'UNSIGNED_F'+'LOAT_EXT'];break;case uy:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x3e2c91['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGBA_BPTC'+'_UNORM_EXT'];break;case Xf:this['_glFormat']=_0x936278['SRGB'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_S3TC'+'_DXT1_EXT'];break;case qf:this['_glFormat']=_0x936278['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'3_EXT'];break;case jf:this['_glFormat']=_0x936278['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'5_EXT'];break;case Yf:this['_glFormat']=_0x936278['SRGB'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ETC'+'2'];break;case Kf:this['_glFormat']=_0x936278['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ETC2_E'+'AC'];break;case Zf:this['_glFormat']=_0x936278['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x3e2c91['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ASTC_4'+'x4_KHR'];break;case Qf:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x3e2c91['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_SRGB_ALPH'+'A_BPTC_UNO'+'RM_EXT'];break;case od:this['_glFormat']=_0x936278['RED'],this['_glInterna'+'lFormat']=_0x936278['R16F'],this['_glPixelTy'+'pe']=_0x936278['HALF_FLOAT'];break;case wp:this['_glFormat']=_0x936278['RG'],this['_glInterna'+'lFormat']=_0x936278['RG16F'],this['_glPixelTy'+'pe']=_0x936278['HALF_FLOAT'];break;case ui:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x936278['RGB16F'],this['_glPixelTy'+'pe']=_0x936278['HALF_FLOAT'];break;case nt:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x936278['RGBA16F'],this['_glPixelTy'+'pe']=_0x936278['HALF_FLOAT'];break;case Ye:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x936278['RGB32F'],this['_glPixelTy'+'pe']=_0x936278['FLOAT'];break;case Xt:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x936278['RGBA32F'],this['_glPixelTy'+'pe']=_0x936278['FLOAT'];break;case Ji:this['_glFormat']=_0x936278['RED'],this['_glInterna'+'lFormat']=_0x936278['R32F'],this['_glPixelTy'+'pe']=_0x936278['FLOAT'];break;case $i:this['_glFormat']=_0x936278['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0x936278['DEPTH_COMP'+'ONENT32F'],this['_glPixelTy'+'pe']=_0x936278['FLOAT'];break;case vn:this['_glFormat']=_0x936278['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0x936278['DEPTH_COMP'+'ONENT16'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_S'+'HORT'];break;case sd:this['_glFormat']=_0x936278['DEPTH_STEN'+'CIL'],this['_glInterna'+'lFormat']=_0x936278['DEPTH24_ST'+'ENCIL8'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_I'+'NT_24_8'];break;case In:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x936278['R11F_G11F_'+'B10F'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_I'+'NT_10F_11F'+'_11F_REV'];break;case lp:this['_glFormat']=_0x936278['RGB'],this['_glInterna'+'lFormat']=_0x936278['SRGB8'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_B'+'YTE'];break;case _s:this['_glFormat']=_0x936278['RGBA'],this['_glInterna'+'lFormat']=_0x936278['SRGB8_ALPH'+'A8'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_B'+'YTE'];break;case dp:this['_glFormat']=_0x936278['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x936278['R8I'],this['_glPixelTy'+'pe']=_0x936278['BYTE'];break;case oy:this['_glFormat']=_0x936278['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x936278['R8UI'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_B'+'YTE'];break;case fp:this['_glFormat']=_0x936278['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x936278['R16I'],this['_glPixelTy'+'pe']=_0x936278['SHORT'];break;case up:this['_glFormat']=_0x936278['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x936278['R16UI'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_S'+'HORT'];break;case pp:this['_glFormat']=_0x936278['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x936278['R32I'],this['_glPixelTy'+'pe']=_0x936278['INT'];break;case Ki:this['_glFormat']=_0x936278['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x936278['R32UI'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_I'+'NT'];break;case mp:this['_glFormat']=_0x936278['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x936278['RG8I'],this['_glPixelTy'+'pe']=_0x936278['BYTE'];break;case ly:this['_glFormat']=_0x936278['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x936278['RG8UI'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_B'+'YTE'];break;case _p:this['_glFormat']=_0x936278['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x936278['RG16I'],this['_glPixelTy'+'pe']=_0x936278['SHORT'];break;case gp:this['_glFormat']=_0x936278['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x936278['RG16UI'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_S'+'HORT'];break;case Sp:this['_glFormat']=_0x936278['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x936278['RG32I'],this['_glPixelTy'+'pe']=_0x936278['INT'];break;case yp:this['_glFormat']=_0x936278['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x936278['RG32UI'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_I'+'NT'];break;case vp:this['_glFormat']=_0x936278['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x936278['RGBA8I'],this['_glPixelTy'+'pe']=_0x936278['BYTE'];break;case cy:this['_glFormat']=_0x936278['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x936278['RGBA8UI'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_B'+'YTE'];break;case xp:this['_glFormat']=_0x936278['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x936278['RGBA16I'],this['_glPixelTy'+'pe']=_0x936278['SHORT'];break;case nd:this['_glFormat']=_0x936278['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x936278['RGBA16UI'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_S'+'HORT'];break;case Tp:this['_glFormat']=_0x936278['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x936278['RGBA32I'],this['_glPixelTy'+'pe']=_0x936278['INT'];break;case Ue:this['_glFormat']=_0x936278['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x936278['RGBA32UI'],this['_glPixelTy'+'pe']=_0x936278['UNSIGNED_I'+'NT'];break;}this['_glCreated']=!(0x95f+-0x9fa*-0x3+-0x13a6*0x2);}['upload'](_0x1d9904,_0x2baac4){w['assert'](_0x2baac4['device'],'Attempting'+'\x20to\x20use\x20a\x20'+'texture\x20th'+'at\x20has\x20bee'+'n\x20destroye'+'d.',_0x2baac4);const _0x2fbbde=_0x1d9904['gl'];if(!_0x2baac4['_needsUplo'+'ad']&&(_0x2baac4['_needsMipm'+'apsUpload']&&_0x2baac4['_mipmapsUp'+'loaded']||!_0x2baac4['pot']))return;let _0x1667e2=-0x1e84+0x11*0x243+-0x7ef,_0x49af07,_0x238667;const _0x1ac77f=_0x2baac4['numLevels'];for(_0x2baac4['array']&&_0x2fbbde['texStorage'+'3D'](_0x2fbbde['TEXTURE_2D'+'_ARRAY'],_0x1ac77f,this['_glInterna'+'lFormat'],_0x2baac4['_width'],_0x2baac4['_height'],_0x2baac4['_arrayLeng'+'th']);_0x2baac4['_levels'][_0x1667e2]||_0x1667e2===0x8a9+-0x234f+0x1aa6;){if(!_0x2baac4['_needsUplo'+'ad']&&_0x1667e2===-0x12d0+0x36d+0xf63){_0x1667e2++;continue;}else{if(_0x1667e2&&(!_0x2baac4['_needsMipm'+'apsUpload']||!_0x2baac4['_mipmaps']))break;}if(_0x49af07=_0x2baac4['_levels'][_0x1667e2],_0x238667=(0x5d7+-0xb*0xa6+0x14c)/Math['pow'](0x869+0x6d+-0xa*0xe2,_0x1667e2),_0x1667e2===0x1*-0x2573+-0x16*0x46+0x2b78&&!_0x2baac4['_compresse'+'d']&&!_0x2baac4['_integerFo'+'rmat']&&_0x2baac4['_levels']['length']<_0x1ac77f&&(_0x2fbbde['generateMi'+'pmap'](this['_glTarget']),_0x2baac4['_mipmapsUp'+'loaded']=!(-0x1f28*-0x1+-0x2440+-0x1*-0x518)),_0x2baac4['_cubemap']){let _0x5459b4;if(_0x1d9904['_isBrowser'+'Interface'](_0x49af07[-0x989+-0x2562+0x2eeb]))for(_0x5459b4=0xef*0x1f+0x2*0x11fe+-0x40ed;_0x5459b4<0x1ae*0x3+-0x373+0x191*-0x1;_0x5459b4++){if(!_0x2baac4['_levelsUpd'+'ated'][-0x438+0x217b+0xb*-0x2a9][_0x5459b4])continue;let _0x4d5c95=_0x49af07[_0x5459b4];_0x1d9904['_isImageBr'+'owserInter'+'face'](_0x4d5c95)&&(_0x4d5c95['width']>_0x1d9904['maxCubeMap'+'Size']||_0x4d5c95['height']>_0x1d9904['maxCubeMap'+'Size'])&&(_0x4d5c95=c_(_0x4d5c95,_0x1d9904['maxCubeMap'+'Size']),_0x1667e2===0x25a2+0x10*-0xb8+-0x1a22&&(_0x2baac4['_width']=_0x4d5c95['width'],_0x2baac4['_height']=_0x4d5c95['height'])),_0x1d9904['setUnpackF'+'lipY'](!(0x349*0x7+0x1839+0x2c7*-0x11)),_0x1d9904['setUnpackP'+'remultiply'+'Alpha'](_0x2baac4['_premultip'+'lyAlpha']),this['_glCreated']?_0x2fbbde['texSubImag'+'e2D'](_0x2fbbde['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x5459b4,_0x1667e2,-0x1*-0x2625+0x123*-0x5+0x67e*-0x5,0x3e3*0x5+-0x1d9*-0x8+-0x1*0x2237,this['_glFormat'],this['_glPixelTy'+'pe'],_0x4d5c95):_0x2fbbde['texImage2D'](_0x2fbbde['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x5459b4,_0x1667e2,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x4d5c95);}else for(_0x238667=(0xfa5+0x12fe+-0x16*0x193)/Math['pow'](0x16b0+0x578+-0x1c26,_0x1667e2),_0x5459b4=0x1c98+-0xd7d+-0xf1b;_0x5459b4<0x1a84+-0x2361+0x8e3;_0x5459b4++){if(!_0x2baac4['_levelsUpd'+'ated'][-0x313*0x9+-0x5*0x226+0x1*0x2669][_0x5459b4])continue;const _0x1a4d17=_0x49af07[_0x5459b4];_0x2baac4['_compresse'+'d']?this['_glCreated']&&_0x1a4d17?_0x2fbbde['compressed'+'TexSubImag'+'e2D'](_0x2fbbde['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x5459b4,_0x1667e2,-0x1*-0x3fa+-0x3*0xbfa+0x1ff4*0x1,-0xe68+-0x16be+0x2526,Math['max'](_0x2baac4['_width']*_0x238667,0x2*0xd1f+-0x252e+-0x1*-0xaf1),Math['max'](_0x2baac4['_height']*_0x238667,0x10de+-0x2*0x40+-0x3b*0x47),this['_glInterna'+'lFormat'],_0x1a4d17):_0x2fbbde['compressed'+'TexImage2D'](_0x2fbbde['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x5459b4,_0x1667e2,this['_glInterna'+'lFormat'],Math['max'](_0x2baac4['_width']*_0x238667,0x82+0x3b*0x3e+-0xecb),Math['max'](_0x2baac4['_height']*_0x238667,0x7b*0x5+-0x3d*0xf+0x12d),-0x13d7+0x1884+0x9*-0x85,_0x1a4d17):(_0x1d9904['setUnpackF'+'lipY'](!(0xd7c+-0x53*0x10+-0x84b)),_0x1d9904['setUnpackP'+'remultiply'+'Alpha'](_0x2baac4['_premultip'+'lyAlpha']),this['_glCreated']&&_0x1a4d17?_0x2fbbde['texSubImag'+'e2D'](_0x2fbbde['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x5459b4,_0x1667e2,-0x1abf+-0xbd5+0x2694,0x2296+-0xce8+-0x15ae,Math['max'](_0x2baac4['_width']*_0x238667,-0x20b1+-0x1887+0x3939),Math['max'](_0x2baac4['_height']*_0x238667,0xf0c+0x1*0x2487+-0x11f*0x2e),this['_glFormat'],this['_glPixelTy'+'pe'],_0x1a4d17):_0x2fbbde['texImage2D'](_0x2fbbde['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x5459b4,_0x1667e2,this['_glInterna'+'lFormat'],Math['max'](_0x2baac4['_width']*_0x238667,0x2*-0x36e+0x8ca+-0x1*0x1ed),Math['max'](_0x2baac4['_height']*_0x238667,0x16*0xb1+0x18c7+-0x27fc),0x1871*0x1+0x1*0xcac+0x3*-0xc5f,this['_glFormat'],this['_glPixelTy'+'pe'],_0x1a4d17));}}else{if(_0x2baac4['_volume'])_0x2baac4['_compresse'+'d']?_0x2fbbde['compressed'+'TexImage3D'](_0x2fbbde['TEXTURE_3D'],_0x1667e2,this['_glInterna'+'lFormat'],Math['max'](_0x2baac4['_width']*_0x238667,0x38b*0x7+-0x19d5*-0x1+0x32a1*-0x1),Math['max'](_0x2baac4['_height']*_0x238667,0x7c*0x43+0x128f+0x1*-0x3302),Math['max'](_0x2baac4['_depth']*_0x238667,0x1*0xd0+-0x20bc+-0x1fed*-0x1),0x120f+0x1faf*-0x1+-0x368*-0x4,_0x49af07):(_0x1d9904['setUnpackF'+'lipY'](!(-0x1272+-0x3d*-0x71+0x9b*-0xe)),_0x1d9904['setUnpackP'+'remultiply'+'Alpha'](_0x2baac4['_premultip'+'lyAlpha']),_0x2fbbde['texImage3D'](_0x2fbbde['TEXTURE_3D'],_0x1667e2,this['_glInterna'+'lFormat'],Math['max'](_0x2baac4['_width']*_0x238667,-0x79*-0x41+-0x88*0x32+-0x428),Math['max'](_0x2baac4['_height']*_0x238667,0x1*-0x1ef9+-0x88+0x1f82),Math['max'](_0x2baac4['_depth']*_0x238667,-0x1*-0x148f+0x24c8+0x166*-0x29),0x24cd*-0x1+0x1475*0x1+0x1058,this['_glFormat'],this['_glPixelTy'+'pe'],_0x49af07));else{if(_0x2baac4['array']&&typeof _0x49af07=='object'){if(_0x2baac4['_arrayLeng'+'th']===_0x49af07['length']){if(_0x2baac4['_compresse'+'d']){for(let _0x2f3618=0x4d3+0x81+-0x16*0x3e;_0x2f3618<_0x2baac4['_arrayLeng'+'th'];_0x2f3618++)_0x2fbbde['compressed'+'TexSubImag'+'e3D'](_0x2fbbde['TEXTURE_2D'+'_ARRAY'],_0x1667e2,0xed7*0x2+-0xa47+0x1*-0x1367,0xcec+-0x496*0x1+0x61*-0x16,_0x2f3618,Math['max'](Math['floor'](_0x2baac4['_width']*_0x238667),-0x1*-0x11+-0x24cb+0x24bb*0x1),Math['max'](Math['floor'](_0x2baac4['_height']*_0x238667),-0x2*-0x8dd+0x4c4+0x12f*-0x13),-0x1*-0x20a3+0x1*-0x26f3+0x15*0x4d,this['_glInterna'+'lFormat'],_0x49af07[_0x2f3618]);}else{for(let _0x3751bc=0x4cf+-0x71*-0x1f+0x6*-0x315;_0x3751bc<_0x2baac4['_arrayLeng'+'th'];_0x3751bc++)_0x2fbbde['texSubImag'+'e3D'](_0x2fbbde['TEXTURE_2D'+'_ARRAY'],_0x1667e2,-0x1db6+0x22*-0xfa+-0x1*-0x3eea,-0xca*0x2+0x1*0x773+-0x5df,_0x3751bc,Math['max'](Math['floor'](_0x2baac4['_width']*_0x238667),0x26be+0x20c6+-0x4783),Math['max'](Math['floor'](_0x2baac4['_height']*_0x238667),-0x19c4+0x1*-0x1f05+0x38ca),0x4d9*0x2+-0x1d47+0x2*0x9cb,this['_glFormat'],this['_glPixelTy'+'pe'],_0x49af07[_0x3751bc]);}}}else{if(_0x1d9904['_isBrowser'+'Interface'](_0x49af07)){_0x1d9904['_isImageBr'+'owserInter'+'face'](_0x49af07)&&(_0x49af07['width']>_0x1d9904['maxTexture'+'Size']||_0x49af07['height']>_0x1d9904['maxTexture'+'Size'])&&(_0x49af07=c_(_0x49af07,_0x1d9904['maxTexture'+'Size']),_0x1667e2===0x9+0x103*-0x1a+0x1a45&&(_0x2baac4['_width']=_0x49af07['width'],_0x2baac4['_height']=_0x49af07['height']));const _0x2f58ee=_0x49af07['width']||_0x49af07['videoWidth'],_0x2e74d4=_0x49af07['height']||_0x49af07['videoHeigh'+'t'];_0x1d9904['setUnpackF'+'lipY'](_0x2baac4['_flipY']),_0x1d9904['setUnpackP'+'remultiply'+'Alpha'](_0x2baac4['_premultip'+'lyAlpha']),this['_glCreated']&&_0x2baac4['_width']===_0x2f58ee&&_0x2baac4['_height']===_0x2e74d4&&!_0x1d9904['_isImageVi'+'deoInterfa'+'ce'](_0x49af07)?_0x2fbbde['texSubImag'+'e2D'](_0x2fbbde['TEXTURE_2D'],_0x1667e2,-0x24d1+0x1*0x1e74+0x65d,0x104b+0x1*0x60f+0x165a*-0x1,this['_glFormat'],this['_glPixelTy'+'pe'],_0x49af07):(_0x2fbbde['texImage2D'](_0x2fbbde['TEXTURE_2D'],_0x1667e2,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x49af07),_0x1667e2===-0x1*-0x2320+-0x635+0x1*-0x1ceb&&(_0x2baac4['_width']=_0x2f58ee,_0x2baac4['_height']=_0x2e74d4));}else _0x238667=(-0x8b*0x1d+-0x1f68+-0x2f28*-0x1)/Math['pow'](0x14*0x1a5+-0x19e8*-0x1+-0x3aca,_0x1667e2),_0x2baac4['_compresse'+'d']?this['_glCreated']&&_0x49af07?_0x2fbbde['compressed'+'TexSubImag'+'e2D'](_0x2fbbde['TEXTURE_2D'],_0x1667e2,-0x557*0x2+0x3fd*-0x5+-0x1e9f*-0x1,0xc1*0x2+-0x110e+0x18e*0xa,Math['max'](Math['floor'](_0x2baac4['_width']*_0x238667),-0x1b3*0x10+0x19b5+0x5*0x4c),Math['max'](Math['floor'](_0x2baac4['_height']*_0x238667),0x15bd+0x113c+0x4*-0x9be),this['_glInterna'+'lFormat'],_0x49af07):_0x2fbbde['compressed'+'TexImage2D'](_0x2fbbde['TEXTURE_2D'],_0x1667e2,this['_glInterna'+'lFormat'],Math['max'](Math['floor'](_0x2baac4['_width']*_0x238667),-0xf2b+0x518+0x2b*0x3c),Math['max'](Math['floor'](_0x2baac4['_height']*_0x238667),-0xa8*-0x25+-0x18e0+0x99),0x36f*-0x7+-0x5dd+-0x1de6*-0x1,_0x49af07):(_0x1d9904['setUnpackF'+'lipY'](!(0x2371+0x5*-0x25f+-0x1795)),_0x1d9904['setUnpackP'+'remultiply'+'Alpha'](_0x2baac4['_premultip'+'lyAlpha']),this['_glCreated']&&_0x49af07?_0x2fbbde['texSubImag'+'e2D'](_0x2fbbde['TEXTURE_2D'],_0x1667e2,0x1f0b+-0x87d*-0x3+-0x3882,0x158+0x83*-0x31+-0x19*-0xf3,Math['max'](_0x2baac4['_width']*_0x238667,0x27*-0x6d+0xcc*0xe+-0x15d*-0x4),Math['max'](_0x2baac4['_height']*_0x238667,0x264*-0xb+0xc8d*-0x1+0x1*0x26da),this['_glFormat'],this['_glPixelTy'+'pe'],_0x49af07):_0x2fbbde['texImage2D'](_0x2fbbde['TEXTURE_2D'],_0x1667e2,this['_glInterna'+'lFormat'],Math['max'](_0x2baac4['_width']*_0x238667,-0x126+0x16f*-0xd+0x13ca),Math['max'](_0x2baac4['_height']*_0x238667,-0x70c+0x14ae+-0x3*0x48b),0x1*-0x16a2+-0x65d+0x1cff,this['_glFormat'],this['_glPixelTy'+'pe'],_0x49af07));_0x1667e2===0x1eb4+-0x23b5+0x501?_0x2baac4['_mipmapsUp'+'loaded']=!(-0x1*0x2202+0xa38+0x17cb):_0x2baac4['_mipmapsUp'+'loaded']=!(0xb9c+0xaf+0xc4b*-0x1);}}}_0x1667e2++;}if(_0x2baac4['_needsUplo'+'ad']){if(_0x2baac4['_cubemap']){for(let _0x576648=0x4af+0x49f*0x1+0x18d*-0x6;_0x576648<0x981+0x1*-0x1279+0x8fe;_0x576648++)_0x2baac4['_levelsUpd'+'ated'][0x1*-0x94f+0x1367+-0xa18][_0x576648]=!(-0x526*0x4+0x1246+0x253);}else _0x2baac4['_levelsUpd'+'ated'][0x12d*-0x5+-0xfaa+0x158b]=!(-0x852+-0x1*0xdf+-0x2*-0x499);}!_0x2baac4['_compresse'+'d']&&!_0x2baac4['_integerFo'+'rmat']&&_0x2baac4['_mipmaps']&&_0x2baac4['_needsMipm'+'apsUpload']&&_0x2baac4['_levels']['length']===0x2b7+0x1f8f+0x2245*-0x1&&(_0x2fbbde['generateMi'+'pmap'](this['_glTarget']),_0x2baac4['_mipmapsUp'+'loaded']=!(-0x1*0x31f+-0x2684+0x29a3)),_0x2baac4['_gpuSize']&&_0x2baac4['adjustVram'+'SizeTracki'+'ng'](_0x1d9904['_vram'],-_0x2baac4['_gpuSize']),_0x2baac4['_gpuSize']=_0x2baac4['gpuSize'],_0x2baac4['adjustVram'+'SizeTracki'+'ng'](_0x1d9904['_vram'],_0x2baac4['_gpuSize']),this['_glCreated']=!(0x2287*-0x1+0x59*-0x5+0x2*0x1222);}['read'](_0x561ca0,_0x1774c6,_0xebad35,_0x15d1e8,_0x556fdd){const _0x24e3c3=this['texture'];return _0x24e3c3['device']['readTextur'+'eAsync'](_0x24e3c3,_0x561ca0,_0x1774c6,_0xebad35,_0x15d1e8,_0x556fdd);}['write'](_0x17ccdc,_0x34d632,_0x1ea0cc,_0x39ceb2,_0x1ccec1){const {texture:_0x57782e}=this,{device:_0x3a5779}=_0x57782e;return _0x3a5779['setTexture'](_0x57782e,-0x74+-0x1448+-0x2*-0xa5e),_0x3a5779['writeTextu'+'reAsync'](_0x57782e,_0x17ccdc,_0x34d632,_0x1ea0cc,_0x39ceb2,_0x1ccec1);}}class tw{constructor(_0x40514a,_0xba82c1){h(this,'msaaFB'),h(this,'resolveFB'),(this['msaaFB']=_0x40514a,this['resolveFB']=_0xba82c1);}['destroy'](_0x331eb9){this['msaaFB']&&(_0x331eb9['deleteRend'+'erbuffer'](this['msaaFB']),this['msaaFB']=null),this['resolveFB']&&(_0x331eb9['deleteRend'+'erbuffer'](this['resolveFB']),this['resolveFB']=null);}}class sw{constructor(){h(this,'_glFrameBu'+'ffer',null),h(this,'_glDepthBu'+'ffer',null),h(this,'_glResolve'+'FrameBuffe'+'r',null),h(this,'colorMrtFr'+'amebuffers',null),h(this,'_glMsaaCol'+'orBuffers',[]),h(this,'_glMsaaDep'+'thBuffer',null),h(this,'msaaDepthB'+'ufferKey'),h(this,'suppliedCo'+'lorFramebu'+'ffer'),h(this,'_isInitial'+'ized',!(-0x144a+-0x58*-0x71+-0x62f*0x3));}['destroy'](_0x58cd94){var _0x166fee;const _0x241630=_0x58cd94['gl'];this['_isInitial'+'ized']=!(-0x1*-0xda1+-0x1148+0x3a8),this['_glFrameBu'+'ffer']&&(this['_glFrameBu'+'ffer']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x241630['deleteFram'+'ebuffer'](this['_glFrameBu'+'ffer']),this['_glFrameBu'+'ffer']=null),this['_glDepthBu'+'ffer']&&(_0x241630['deleteRend'+'erbuffer'](this['_glDepthBu'+'ffer']),this['_glDepthBu'+'ffer']=null),this['_glResolve'+'FrameBuffe'+'r']&&(this['_glResolve'+'FrameBuffe'+'r']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x241630['deleteFram'+'ebuffer'](this['_glResolve'+'FrameBuffe'+'r']),this['_glResolve'+'FrameBuffe'+'r']=null),this['_glMsaaCol'+'orBuffers']['forEach'](_0x283d01=>{_0x241630['deleteRend'+'erbuffer'](_0x283d01);}),this['_glMsaaCol'+'orBuffers']['length']=-0x1*0x20f3+0xe7a+0x1279,(_0x166fee=this['colorMrtFr'+'amebuffers'])==null||_0x166fee['forEach'](_0x492a3b=>{_0x492a3b['destroy'](_0x241630);}),this['colorMrtFr'+'amebuffers']=null,this['_glMsaaDep'+'thBuffer']&&(this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']&&Fd(_0x58cd94)['release'](this['msaaDepthB'+'ufferKey'])),this['suppliedCo'+'lorFramebu'+'ffer']=void(0x1*-0x121d+0x1c0b+-0x9ee);}get['initialize'+'d'](){return this['_isInitial'+'ized'];}['init'](_0x43c568,_0x13068d){var _0x591d92,_0x203165;const _0x2595b3=_0x43c568['gl'];w['assert'](!this['_isInitial'+'ized'],'Render\x20tar'+'get\x20alread'+'y\x20initiali'+'zed.'),this['_isInitial'+'ized']=!(0x448*0x3+-0x73b+-0x59d*0x1);const _0x478427=[];if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(-0x2245+-0x1277+-0xf*-0x384))this['_glFrameBu'+'ffer']=this['suppliedCo'+'lorFramebu'+'ffer'];else{w['call'](()=>{(_0x13068d['width']<=0x1*0x156a+0x96d*-0x1+0x1*-0xbfd||_0x13068d['height']<=-0x5*0x2f5+0x4ff+0x9ca)&&w['warnOnce']('Invalid\x20re'+'nder\x20targe'+'t\x20size:\x20'+_0x13068d['width']+'\x20x\x20'+_0x13068d['height'],_0x13068d);}),this['_glFrameBu'+'ffer']=_0x2595b3['createFram'+'ebuffer'](),_0x43c568['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0xc755f8=((_0x591d92=_0x13068d['_colorBuff'+'ers'])==null?void(0xe2b+0xe29+0x31*-0x94):_0x591d92['length'])??-0x14a2+0x1bcd+-0x72b,_0x3d9592=_0x2595b3['COLOR_ATTA'+'CHMENT0'];for(let _0x3d86e5=0x68e*-0x1+-0x24da+0x2b68;_0x3d86e5<_0xc755f8;++_0x3d86e5){const _0x3f0da2=_0x13068d['getColorBu'+'ffer'](_0x3d86e5);_0x3f0da2&&(_0x3f0da2['impl']['_glTexture']||(_0x3f0da2['_width']=Math['min'](_0x3f0da2['width'],_0x43c568['maxRenderB'+'ufferSize']),_0x3f0da2['_height']=Math['min'](_0x3f0da2['height'],_0x43c568['maxRenderB'+'ufferSize']),_0x43c568['setTexture'](_0x3f0da2,0x35f*0x5+-0x624+-0x1*0xab7)),_0x2595b3['framebuffe'+'rTexture2D'](_0x2595b3['FRAMEBUFFE'+'R'],_0x3d9592+_0x3d86e5,_0x3f0da2['_cubemap']?_0x2595b3['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x13068d['_face']:_0x2595b3['TEXTURE_2D'],_0x3f0da2['impl']['_glTexture'],_0x13068d['mipLevel']),_0x478427['push'](_0x3d9592+_0x3d86e5));}_0x2595b3['drawBuffer'+'s'](_0x478427);const _0x399a05=_0x13068d['_depthBuff'+'er'];if(_0x399a05||_0x13068d['_depth']){const _0x3dd2e3=_0x13068d['_stencil']?_0x2595b3['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x2595b3['DEPTH_ATTA'+'CHMENT'];if(_0x399a05)_0x399a05['impl']['_glTexture']||(_0x399a05['_width']=Math['min'](_0x399a05['width'],_0x43c568['maxRenderB'+'ufferSize']),_0x399a05['_height']=Math['min'](_0x399a05['height'],_0x43c568['maxRenderB'+'ufferSize']),_0x43c568['setTexture'](_0x399a05,-0xdfc+-0x2597+-0x9*-0x5bb)),_0x2595b3['framebuffe'+'rTexture2D'](_0x2595b3['FRAMEBUFFE'+'R'],_0x3dd2e3,_0x399a05['_cubemap']?_0x2595b3['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x13068d['_face']:_0x2595b3['TEXTURE_2D'],_0x13068d['_depthBuff'+'er']['impl']['_glTexture'],_0x13068d['mipLevel']);else{if(!(_0x13068d['_samples']>-0x93f+-0x1f90+0x28d0)){this['_glDepthBu'+'ffer']||(this['_glDepthBu'+'ffer']=_0x2595b3['createRend'+'erbuffer']());const _0x50495c=_0x13068d['_stencil']?_0x2595b3['DEPTH24_ST'+'ENCIL8']:_0x2595b3['DEPTH_COMP'+'ONENT32F'];_0x2595b3['bindRender'+'buffer'](_0x2595b3['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x2595b3['renderbuff'+'erStorage'](_0x2595b3['RENDERBUFF'+'ER'],_0x50495c,_0x13068d['width'],_0x13068d['height']),_0x2595b3['framebuffe'+'rRenderbuf'+'fer'](_0x2595b3['FRAMEBUFFE'+'R'],_0x3dd2e3,_0x2595b3['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x2595b3['bindRender'+'buffer'](_0x2595b3['RENDERBUFF'+'ER'],null);}}}w['call'](()=>this['_checkFbo'](_0x43c568,_0x13068d));}if(_0x13068d['_samples']>-0x200*0x2+-0x4e1+0x8e2){this['_glResolve'+'FrameBuffe'+'r']=this['_glFrameBu'+'ffer'],this['_glFrameBu'+'ffer']=_0x2595b3['createFram'+'ebuffer'](),_0x43c568['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x229c41=((_0x203165=_0x13068d['_colorBuff'+'ers'])==null?void(0x6be*-0x2+-0x203b*0x1+0x2db7):_0x203165['length'])??-0x147a+-0x5*-0x466+-0x184;if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(-0x1485+-0x1aa*-0x9+-0x21*-0x2b)){const _0x75d68a=_0x2595b3['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x75d68a);const _0x4f32e8=_0x43c568['backBuffer'+'Format']===Ne?_0x2595b3['RGBA8']:_0x2595b3['RGB8'];_0x2595b3['bindRender'+'buffer'](_0x2595b3['RENDERBUFF'+'ER'],_0x75d68a),_0x2595b3['renderbuff'+'erStorageM'+'ultisample'](_0x2595b3['RENDERBUFF'+'ER'],_0x13068d['_samples'],_0x4f32e8,_0x13068d['width'],_0x13068d['height']),_0x2595b3['framebuffe'+'rRenderbuf'+'fer'](_0x2595b3['FRAMEBUFFE'+'R'],_0x2595b3['COLOR_ATTA'+'CHMENT0'],_0x2595b3['RENDERBUFF'+'ER'],_0x75d68a);}else for(let _0x5a4d58=-0xeaa+-0x5*-0x5f7+-0xf29;_0x5a4d58<_0x229c41;++_0x5a4d58){const _0x4ba37c=_0x13068d['getColorBu'+'ffer'](_0x5a4d58);if(_0x4ba37c){const _0xc39162=_0x2595b3['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0xc39162),_0x2595b3['bindRender'+'buffer'](_0x2595b3['RENDERBUFF'+'ER'],_0xc39162),_0x2595b3['renderbuff'+'erStorageM'+'ultisample'](_0x2595b3['RENDERBUFF'+'ER'],_0x13068d['_samples'],_0x4ba37c['impl']['_glInterna'+'lFormat'],_0x13068d['width'],_0x13068d['height']),_0x2595b3['framebuffe'+'rRenderbuf'+'fer'](_0x2595b3['FRAMEBUFFE'+'R'],_0x2595b3['COLOR_ATTA'+'CHMENT0']+_0x5a4d58,_0x2595b3['RENDERBUFF'+'ER'],_0xc39162);}}if(_0x13068d['_depth']){w['assert'](!this['_glMsaaDep'+'thBuffer']);const _0x5dd9e0=_0x13068d['_stencil']?_0x2595b3['DEPTH24_ST'+'ENCIL8']:_0x2595b3['DEPTH_COMP'+'ONENT32F'],_0x148341=_0x13068d['_stencil']?_0x2595b3['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x2595b3['DEPTH_ATTA'+'CHMENT'];let _0x32bc48;const _0x1dd35a=_0x13068d['_depthBuff'+'er'];_0x1dd35a&&(_0x32bc48=_0x1dd35a['id']+':'+_0x13068d['width']+':'+_0x13068d['height']+':'+_0x13068d['_samples']+':'+_0x5dd9e0+':'+_0x148341,this['_glMsaaDep'+'thBuffer']=Fd(_0x43c568)['get'](_0x32bc48)),this['_glMsaaDep'+'thBuffer']||(this['_glMsaaDep'+'thBuffer']=_0x2595b3['createRend'+'erbuffer'](),_0x2595b3['bindRender'+'buffer'](_0x2595b3['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']),_0x2595b3['renderbuff'+'erStorageM'+'ultisample'](_0x2595b3['RENDERBUFF'+'ER'],_0x13068d['_samples'],_0x5dd9e0,_0x13068d['width'],_0x13068d['height']),this['_glMsaaDep'+'thBuffer']['destroy']=function(){_0x2595b3['deleteRend'+'erbuffer'](this);},_0x1dd35a&&Fd(_0x43c568)['set'](_0x32bc48,this['_glMsaaDep'+'thBuffer'])),this['msaaDepthB'+'ufferKey']=_0x32bc48,_0x2595b3['framebuffe'+'rRenderbuf'+'fer'](_0x2595b3['FRAMEBUFFE'+'R'],_0x148341,_0x2595b3['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']);}w['call'](()=>this['_checkFbo'](_0x43c568,_0x13068d,'MSAA')),_0x229c41>-0x586+-0x11*-0x5c+0x1*-0x95&&(this['_createMsa'+'aMrtFrameb'+'uffers'](_0x43c568,_0x13068d,_0x229c41),_0x43c568['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']),_0x2595b3['drawBuffer'+'s'](_0x478427));}}['_createMsa'+'aMrtFrameb'+'uffers'](_0x16f251,_0x5319c5,_0x3ef991){const _0x44cac8=_0x16f251['gl'];this['colorMrtFr'+'amebuffers']=[];for(let _0x5cdf3b=0x2*-0xf5b+-0x29*-0x86+0x940;_0x5cdf3b<_0x3ef991;++_0x5cdf3b){const _0x4bdfe9=_0x5319c5['getColorBu'+'ffer'](_0x5cdf3b),_0x4fdec9=_0x44cac8['createFram'+'ebuffer']();_0x16f251['setFramebu'+'ffer'](_0x4fdec9);const _0x5ac189=this['_glMsaaCol'+'orBuffers'][_0x5cdf3b];_0x44cac8['bindRender'+'buffer'](_0x44cac8['RENDERBUFF'+'ER'],_0x5ac189),_0x44cac8['renderbuff'+'erStorageM'+'ultisample'](_0x44cac8['RENDERBUFF'+'ER'],_0x5319c5['_samples'],_0x4bdfe9['impl']['_glInterna'+'lFormat'],_0x5319c5['width'],_0x5319c5['height']),_0x44cac8['framebuffe'+'rRenderbuf'+'fer'](_0x44cac8['FRAMEBUFFE'+'R'],_0x44cac8['COLOR_ATTA'+'CHMENT0'],_0x44cac8['RENDERBUFF'+'ER'],_0x5ac189),_0x44cac8['drawBuffer'+'s']([_0x44cac8['COLOR_ATTA'+'CHMENT0']]),w['call'](()=>this['_checkFbo'](_0x16f251,_0x5319c5,'MSAA-MRT-s'+'rc'+_0x5cdf3b));const _0x1fef95=_0x44cac8['createFram'+'ebuffer']();_0x16f251['setFramebu'+'ffer'](_0x1fef95),_0x44cac8['framebuffe'+'rTexture2D'](_0x44cac8['FRAMEBUFFE'+'R'],_0x44cac8['COLOR_ATTA'+'CHMENT0'],_0x4bdfe9['_cubemap']?_0x44cac8['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x5319c5['_face']:_0x44cac8['TEXTURE_2D'],_0x4bdfe9['impl']['_glTexture'],0x2007+-0x5*0x93+-0x1d28),this['colorMrtFr'+'amebuffers'][_0x5cdf3b]=new tw(_0x4fdec9,_0x1fef95),w['call'](()=>this['_checkFbo'](_0x16f251,_0x5319c5,'MSAA-MRT-d'+'st'+_0x5cdf3b));}}['_checkFbo'](_0x28ea84,_0x2c5e83,_0x28391c=''){const _0x3c81fc=_0x28ea84['gl'],_0x3bac4e=_0x3c81fc['checkFrame'+'bufferStat'+'us'](_0x3c81fc['FRAMEBUFFE'+'R']);let _0x3160bc;switch(_0x3bac4e){case _0x3c81fc['FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT']:_0x3160bc='FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT';break;case _0x3c81fc['FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T']:_0x3160bc='FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T';break;case _0x3c81fc['FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS']:_0x3160bc='FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS';break;case _0x3c81fc['FRAMEBUFFE'+'R_UNSUPPOR'+'TED']:_0x3160bc='FRAMEBUFFE'+'R_UNSUPPOR'+'TED';break;}w['assert'](!_0x3160bc,'Framebuffe'+'r\x20creation'+'\x20failed\x20wi'+'th\x20error\x20c'+'ode\x20'+_0x3160bc+(',\x20render\x20t'+'arget:\x20')+_0x2c5e83['name']+'\x20'+_0x28391c,_0x2c5e83);}['loseContex'+'t'](){this['_glFrameBu'+'ffer']=null,this['_glDepthBu'+'ffer']=null,this['_glResolve'+'FrameBuffe'+'r']=null,this['_glMsaaCol'+'orBuffers']['length']=-0x2203+-0x930+-0x1*-0x2b33,this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']=void(-0x7*0x265+-0x1d67+-0x13*-0x26e),this['colorMrtFr'+'amebuffers']=null,this['suppliedCo'+'lorFramebu'+'ffer']=void(0x8ab*0x1+0x2ef+-0xb9a),this['_isInitial'+'ized']=!(-0x1*0x926+-0x2*0xf64+0x1*0x27ef);}['internalRe'+'solve'](_0x5d9fdf,_0x596400,_0x3578b4,_0x6aaf67,_0x24fca2){w['assert'](_0x596400!==_0x3578b4,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x5d9fdf['setScissor'](0x5*0xb2+0x24fb*0x1+0x1*-0x2875,0x12b9+-0x264a+-0x1391*-0x1,_0x6aaf67['width'],_0x6aaf67['height']);const _0x570e8c=_0x5d9fdf['gl'];_0x570e8c['bindFrameb'+'uffer'](_0x570e8c['READ_FRAME'+'BUFFER'],_0x596400),_0x570e8c['bindFrameb'+'uffer'](_0x570e8c['DRAW_FRAME'+'BUFFER'],_0x3578b4),_0x570e8c['blitFrameb'+'uffer'](0x4*-0x287+-0x97c+-0x26*-0x84,0x171f+0x2*0xde0+0x9*-0x5a7,_0x6aaf67['width'],_0x6aaf67['height'],0x2061+0x21*0xc1+0xe*-0x417,0x2*-0x940+0x1*-0x2421+0x36a1,_0x6aaf67['width'],_0x6aaf67['height'],_0x24fca2,_0x570e8c['NEAREST']);}['resolve'](_0x578718,_0x1cddb,_0x1f8ea9,_0x9396b8){const _0x46aabd=_0x578718['gl'];if(this['colorMrtFr'+'amebuffers']){if(_0x1f8ea9)for(let _0x405f5c=0x22a+0x76b*-0x5+0x22ed;_0x405f5c<this['colorMrtFr'+'amebuffers']['length'];_0x405f5c++){const _0x3b84d2=this['colorMrtFr'+'amebuffers'][_0x405f5c];Q['pushGpuMar'+'ker'](_0x578718,'RESOLVE-MR'+'T'+_0x405f5c),this['internalRe'+'solve'](_0x578718,_0x3b84d2['msaaFB'],_0x3b84d2['resolveFB'],_0x1cddb,_0x46aabd['COLOR_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x578718);}_0x9396b8&&(Q['pushGpuMar'+'ker'](_0x578718,'RESOLVE-MR'+'T-DEPTH'),this['internalRe'+'solve'](_0x578718,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x1cddb,_0x46aabd['DEPTH_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x578718));}else Q['pushGpuMar'+'ker'](_0x578718,'RESOLVE'),this['internalRe'+'solve'](_0x578718,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x1cddb,(_0x1f8ea9?_0x46aabd['COLOR_BUFF'+'ER_BIT']:0x1758+-0xfc7+0x791*-0x1)|(_0x9396b8?_0x46aabd['DEPTH_BUFF'+'ER_BIT']:-0x1106*-0x1+0x167d+-0x2783)),Q['popGpuMark'+'er'](_0x578718);_0x46aabd['bindFrameb'+'uffer'](_0x46aabd['FRAMEBUFFE'+'R'],this['_glFrameBu'+'ffer']);}}class iw{constructor(){h(this,'renderVers'+'ion'),h(this,'queries',[]);}['destroy'](_0x3db8a0){this['queries']['forEach'](_0x4a6655=>_0x3db8a0['deleteQuer'+'y'](_0x4a6655)),this['queries']=null;}}class rw extends $T{constructor(_0x20c606){super(),h(this,'device'),h(this,'freeQuerie'+'s',[]),h(this,'frameQueri'+'es',[]),h(this,'previousFr'+'ameQueries',[]),h(this,'timings',[]),(this['device']=_0x20c606,this['ext']=_0x20c606['extDisjoin'+'tTimerQuer'+'y']);}['destroy'](){this['freeQuerie'+'s']['forEach'](_0x1666cc=>this['device']['gl']['deleteQuer'+'y'](_0x1666cc)),this['frameQueri'+'es']['forEach'](_0x5992fe=>this['device']['gl']['deleteQuer'+'y'](_0x5992fe)),this['previousFr'+'ameQueries']['forEach'](_0x50ab13=>_0x50ab13['destroy'](this['device']['gl'])),this['freeQuerie'+'s']=null,this['frameQueri'+'es']=null,this['previousFr'+'ameQueries']=null;}['loseContex'+'t'](){super['loseContex'+'t'](),this['freeQuerie'+'s']=[],this['frameQueri'+'es']=[],this['previousFr'+'ameQueries']=[];}['restoreCon'+'text'](){this['ext']=this['device']['extDisjoin'+'tTimerQuer'+'y'];}['getQuery'](){return this['freeQuerie'+'s']['pop']()??this['device']['gl']['createQuer'+'y']();}['start'](_0x1b5386){if(this['ext']){const _0x4768ff=this['getSlot'](_0x1b5386),_0x19ff42=this['getQuery']();return this['frameQueri'+'es'][_0x4768ff]=_0x19ff42,this['device']['gl']['beginQuery'](this['ext']['TIME_ELAPS'+'ED_EXT'],_0x19ff42),_0x4768ff;}}['end'](_0x3eeb9f){_0x3eeb9f!==void(-0xb08*0x1+-0x4d4+0xfdc)&&this['device']['gl']['endQuery'](this['ext']['TIME_ELAPS'+'ED_EXT']);}['frameStart'](){this['processEna'+'bleRequest'](),this['_enabled']&&(this['frameGPUMa'+'rkerSlot']=this['start']('GpuFrame'));}['frameEnd'](){this['_enabled']&&this['end'](this['frameGPUMa'+'rkerSlot']);}['request'](){if(this['_enabled']){const _0x1cb260=this['ext'],_0x430a16=this['device']['gl'],_0x2edb67=this['device']['renderVers'+'ion'],_0x592d83=this['frameQueri'+'es'];if(_0x592d83['length']>0x1f1a+-0x1e26+-0xf4){this['frameQueri'+'es']=[];const _0x16f6f6=new iw();_0x16f6f6['queries']=_0x592d83,_0x16f6f6['renderVers'+'ion']=_0x2edb67,this['previousFr'+'ameQueries']['push'](_0x16f6f6);}if(this['previousFr'+'ameQueries']['length']>0x9*-0x2d1+-0x2217+0x9e8*0x6){const _0x327588=this['previousFr'+'ameQueries'][-0x1238+-0x9a5+0x7*0x3fb],_0x2d4a81=_0x327588['queries'],_0x5a9a09=_0x2d4a81[_0x2d4a81['length']-(-0xc95+0xb57+0x13f)],_0x2ced75=_0x430a16['getQueryPa'+'rameter'](_0x5a9a09,_0x430a16['QUERY_RESU'+'LT_AVAILAB'+'LE']),_0x385e3b=_0x430a16['getParamet'+'er'](_0x1cb260['GPU_DISJOI'+'NT_EXT']);if(_0x2ced75&&!_0x385e3b){this['previousFr'+'ameQueries']['shift']();const _0x18b24f=this['timings'];_0x18b24f['length']=0xd2d*-0x2+-0x1d*-0x5f+0x1*0xf97;for(let _0x294520=-0x1f64*-0x1+0xd59*-0x1+-0x120b;_0x294520<_0x2d4a81['length'];_0x294520++){const _0xff208=_0x2d4a81[_0x294520],_0x2a4adf=_0x430a16['getQueryPa'+'rameter'](_0xff208,_0x430a16['QUERY_RESU'+'LT']);_0x18b24f[_0x294520]=_0x2a4adf*(-0x15*-0x11c+-0xab1+-0xc9b+0.000001),this['freeQuerie'+'s']['push'](_0xff208);}this['report'](_0x327588['renderVers'+'ion'],_0x18b24f);}_0x385e3b&&(this['previousFr'+'ameQueries']['forEach'](_0x161bd9=>{this['report'](_0x161bd9['renderVers'+'ion'],null),_0x161bd9['destroy'](_0x430a16);}),this['previousFr'+'ameQueries']['length']=0x7d1+-0x2e*-0x14+0x1*-0xb69);}super['request'](_0x2edb67);}}}const Da=[];class aw extends $e{constructor(_0xe16b79,_0xf6396c={}){super(_0xe16b79,_0xf6396c),h(this,'gl'),h(this,'_defaultFr'+'amebuffer',null),h(this,'_defaultFr'+'amebufferC'+'hanged',!(0x56d*0x1+-0x1*-0xc9+0x1*-0x635)),(_0xf6396c=this['initOption'+'s'],this['updateClie'+'ntRect'](),this['initTextur'+'eUnits'](),this['contextLos'+'t']=!(0x3*-0x1b2+0x823*0x1+0x9c*-0x5),this['_contextLo'+'stHandler']=_0x54abdb=>{_0x54abdb['preventDef'+'ault'](),this['loseContex'+'t'](),w['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20lost.'),this['fire']('devicelost');},this['_contextRe'+'storedHand'+'ler']=()=>{w['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20restore'+'d.'),this['restoreCon'+'text'](),this['fire']('devicerest'+'ored');});const _0x423e19=typeof navigator<'u'&&navigator['userAgent'];if(this['forceDisab'+'leMultisam'+'pling']=_0x423e19&&_0x423e19['includes']('AppleWebKi'+'t')&&(_0x423e19['includes']('15.4')||_0x423e19['includes']('15_4')),this['forceDisab'+'leMultisam'+'pling']&&(_0xf6396c['antialias']=!(-0x1ecb*0x1+0x1a9d+0x42f),w['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'AppleWebKi'+'t\x2015.4')),Ae['browserNam'+'e']==='firefox'){const _0x17b9f5=(typeof navigator<'u'?navigator['userAgent']:'')['match'](/Firefox\/(\d+(\.\d+)*)/),_0x782632=_0x17b9f5?_0x17b9f5[0x7e9+-0xc8*-0x1+-0x8b0]:null;if(_0x782632){const _0x334e61=parseFloat(_0x782632);(Ae['name']==='windows'&&(_0x334e61>=0xe1f+-0x3e*0x6d+0xcbf*0x1||_0x334e61===-0x1*0x1ead+0x1*-0x1de0+0xf40*0x4)||Ae['name']==='android'&&_0x334e61>=-0x16d3+0x8eb*-0x1+0x2042)&&(_0xf6396c['antialias']=!(-0x1*-0xf17+-0x11e*-0x16+-0x27aa*0x1),w['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'Firefox\x20'+Ae['name']+('\x20platform\x20'+'version\x20')+_0x782632));}}this['backBuffer'+'Antialias']=_0xf6396c['antialias']??!(-0x14f*-0x1a+-0x1*-0x19ff+-0x3c04),_0xf6396c['antialias']=!(0xf7*-0x27+0x31*0xc9+-0x2b*0x5);const _0x4c6a59=_0xf6396c['gl']??_0xe16b79['getContext']('webgl2',_0xf6396c);if(!_0x4c6a59)throw new Error('WebGL\x20not\x20'+'supported');this['gl']=_0x4c6a59,this['isWebGL2']=!(0x29a+-0x21c5+0x1f2b),this['_deviceTyp'+'e']=aT,this['updateBack'+'bufferForm'+'at'](null);const _0x33f536=Ae['browserNam'+'e']==='chrome',_0xf58377=Ae['browserNam'+'e']==='safari',_0x21f316=Ae['browser']&&navigator['appVersion']['indexOf']('Mac')!==-(-0xe5*-0x19+0x1595*0x1+-0x2bf1);this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']=_0xf58377,this['_tempMacCh'+'romeBlitFr'+'amebufferW'+'orkaround']=_0x21f316&&_0x33f536&&!_0xf6396c['alpha'],_0xe16b79['addEventLi'+'stener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(-0x265*-0x1+-0x1b33+-0x49*-0x57)),_0xe16b79['addEventLi'+'stener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(0x9f5+0x21fb+0xa3*-0x45)),this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes'](),this['createBack'+'buffer'](null),this['supportsIm'+'ageBitmap']=!_0xf58377&&typeof ImageBitmap<'u',this['_samplerTy'+'pes']=new Set([_0x4c6a59['SAMPLER_2D'],_0x4c6a59['SAMPLER_CU'+'BE'],_0x4c6a59['UNSIGNED_I'+'NT_SAMPLER'+'_2D'],_0x4c6a59['INT_SAMPLE'+'R_2D'],_0x4c6a59['SAMPLER_2D'+'_SHADOW'],_0x4c6a59['SAMPLER_CU'+'BE_SHADOW'],_0x4c6a59['SAMPLER_3D'],_0x4c6a59['INT_SAMPLE'+'R_3D'],_0x4c6a59['UNSIGNED_I'+'NT_SAMPLER'+'_3D'],_0x4c6a59['SAMPLER_2D'+'_ARRAY'],_0x4c6a59['INT_SAMPLE'+'R_2D_ARRAY'],_0x4c6a59['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]),this['glAddress']=[_0x4c6a59['REPEAT'],_0x4c6a59['CLAMP_TO_E'+'DGE'],_0x4c6a59['MIRRORED_R'+'EPEAT']],this['glBlendEqu'+'ation']=[_0x4c6a59['FUNC_ADD'],_0x4c6a59['FUNC_SUBTR'+'ACT'],_0x4c6a59['FUNC_REVER'+'SE_SUBTRAC'+'T'],_0x4c6a59['MIN'],_0x4c6a59['MAX']],this['glBlendFun'+'ctionColor']=[_0x4c6a59['ZERO'],_0x4c6a59['ONE'],_0x4c6a59['SRC_COLOR'],_0x4c6a59['ONE_MINUS_'+'SRC_COLOR'],_0x4c6a59['DST_COLOR'],_0x4c6a59['ONE_MINUS_'+'DST_COLOR'],_0x4c6a59['SRC_ALPHA'],_0x4c6a59['SRC_ALPHA_'+'SATURATE'],_0x4c6a59['ONE_MINUS_'+'SRC_ALPHA'],_0x4c6a59['DST_ALPHA'],_0x4c6a59['ONE_MINUS_'+'DST_ALPHA'],_0x4c6a59['CONSTANT_C'+'OLOR'],_0x4c6a59['ONE_MINUS_'+'CONSTANT_C'+'OLOR']],this['glBlendFun'+'ctionAlpha']=[_0x4c6a59['ZERO'],_0x4c6a59['ONE'],_0x4c6a59['SRC_COLOR'],_0x4c6a59['ONE_MINUS_'+'SRC_COLOR'],_0x4c6a59['DST_COLOR'],_0x4c6a59['ONE_MINUS_'+'DST_COLOR'],_0x4c6a59['SRC_ALPHA'],_0x4c6a59['SRC_ALPHA_'+'SATURATE'],_0x4c6a59['ONE_MINUS_'+'SRC_ALPHA'],_0x4c6a59['DST_ALPHA'],_0x4c6a59['ONE_MINUS_'+'DST_ALPHA'],_0x4c6a59['CONSTANT_A'+'LPHA'],_0x4c6a59['ONE_MINUS_'+'CONSTANT_A'+'LPHA']],this['glComparis'+'on']=[_0x4c6a59['NEVER'],_0x4c6a59['LESS'],_0x4c6a59['EQUAL'],_0x4c6a59['LEQUAL'],_0x4c6a59['GREATER'],_0x4c6a59['NOTEQUAL'],_0x4c6a59['GEQUAL'],_0x4c6a59['ALWAYS']],this['glStencilO'+'p']=[_0x4c6a59['KEEP'],_0x4c6a59['ZERO'],_0x4c6a59['REPLACE'],_0x4c6a59['INCR'],_0x4c6a59['INCR_WRAP'],_0x4c6a59['DECR'],_0x4c6a59['DECR_WRAP'],_0x4c6a59['INVERT']],this['glClearFla'+'g']=[-0xef8+0x7*-0x262+0x1fa6*0x1,_0x4c6a59['COLOR_BUFF'+'ER_BIT'],_0x4c6a59['DEPTH_BUFF'+'ER_BIT'],_0x4c6a59['COLOR_BUFF'+'ER_BIT']|_0x4c6a59['DEPTH_BUFF'+'ER_BIT'],_0x4c6a59['STENCIL_BU'+'FFER_BIT'],_0x4c6a59['STENCIL_BU'+'FFER_BIT']|_0x4c6a59['COLOR_BUFF'+'ER_BIT'],_0x4c6a59['STENCIL_BU'+'FFER_BIT']|_0x4c6a59['DEPTH_BUFF'+'ER_BIT'],_0x4c6a59['STENCIL_BU'+'FFER_BIT']|_0x4c6a59['COLOR_BUFF'+'ER_BIT']|_0x4c6a59['DEPTH_BUFF'+'ER_BIT']],this['glCull']=[-0xe36+0xd*0x1cf+-0x94d,_0x4c6a59['BACK'],_0x4c6a59['FRONT'],_0x4c6a59['FRONT_AND_'+'BACK']],this['glFilter']=[_0x4c6a59['NEAREST'],_0x4c6a59['LINEAR'],_0x4c6a59['NEAREST_MI'+'PMAP_NEARE'+'ST'],_0x4c6a59['NEAREST_MI'+'PMAP_LINEA'+'R'],_0x4c6a59['LINEAR_MIP'+'MAP_NEARES'+'T'],_0x4c6a59['LINEAR_MIP'+'MAP_LINEAR']],this['glPrimitiv'+'e']=[_0x4c6a59['POINTS'],_0x4c6a59['LINES'],_0x4c6a59['LINE_LOOP'],_0x4c6a59['LINE_STRIP'],_0x4c6a59['TRIANGLES'],_0x4c6a59['TRIANGLE_S'+'TRIP'],_0x4c6a59['TRIANGLE_F'+'AN']],this['glType']=[_0x4c6a59['BYTE'],_0x4c6a59['UNSIGNED_B'+'YTE'],_0x4c6a59['SHORT'],_0x4c6a59['UNSIGNED_S'+'HORT'],_0x4c6a59['INT'],_0x4c6a59['UNSIGNED_I'+'NT'],_0x4c6a59['FLOAT'],_0x4c6a59['HALF_FLOAT']],this['pcUniformT'+'ype']={},this['pcUniformT'+'ype'][_0x4c6a59['BOOL']]=Tn,this['pcUniformT'+'ype'][_0x4c6a59['INT']]=_a,this['pcUniformT'+'ype'][_0x4c6a59['FLOAT']]=Xs,this['pcUniformT'+'ype'][_0x4c6a59['FLOAT_VEC2']]=ga,this['pcUniformT'+'ype'][_0x4c6a59['FLOAT_VEC3']]=ds,this['pcUniformT'+'ype'][_0x4c6a59['FLOAT_VEC4']]=Rn,this['pcUniformT'+'ype'][_0x4c6a59['INT_VEC2']]=ca,this['pcUniformT'+'ype'][_0x4c6a59['INT_VEC3']]=ha,this['pcUniformT'+'ype'][_0x4c6a59['INT_VEC4']]=da,this['pcUniformT'+'ype'][_0x4c6a59['BOOL_VEC2']]=tl,this['pcUniformT'+'ype'][_0x4c6a59['BOOL_VEC3']]=sl,this['pcUniformT'+'ype'][_0x4c6a59['BOOL_VEC4']]=il,this['pcUniformT'+'ype'][_0x4c6a59['FLOAT_MAT2']]=_h,this['pcUniformT'+'ype'][_0x4c6a59['FLOAT_MAT3']]=On,this['pcUniformT'+'ype'][_0x4c6a59['FLOAT_MAT4']]=li,this['pcUniformT'+'ype'][_0x4c6a59['SAMPLER_2D']]=Hx,this['pcUniformT'+'ype'][_0x4c6a59['SAMPLER_CU'+'BE']]=Wx,this['pcUniformT'+'ype'][_0x4c6a59['UNSIGNED_I'+'NT']]=Fn,this['pcUniformT'+'ype'][_0x4c6a59['UNSIGNED_I'+'NT_VEC2']]=Nn,this['pcUniformT'+'ype'][_0x4c6a59['UNSIGNED_I'+'NT_VEC3']]=kn,this['pcUniformT'+'ype'][_0x4c6a59['UNSIGNED_I'+'NT_VEC4']]=Un,this['pcUniformT'+'ype'][_0x4c6a59['SAMPLER_2D'+'_SHADOW']]=$x,this['pcUniformT'+'ype'][_0x4c6a59['SAMPLER_CU'+'BE_SHADOW']]=Xx,this['pcUniformT'+'ype'][_0x4c6a59['SAMPLER_2D'+'_ARRAY']]=jx,this['pcUniformT'+'ype'][_0x4c6a59['SAMPLER_3D']]=qx,this['pcUniformT'+'ype'][_0x4c6a59['INT_SAMPLE'+'R_2D']]=Yx,this['pcUniformT'+'ype'][_0x4c6a59['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=Kx,this['pcUniformT'+'ype'][_0x4c6a59['INT_SAMPLE'+'R_CUBE']]=Zx,this['pcUniformT'+'ype'][_0x4c6a59['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=Qx,this['pcUniformT'+'ype'][_0x4c6a59['INT_SAMPLE'+'R_3D']]=Jx,this['pcUniformT'+'ype'][_0x4c6a59['UNSIGNED_I'+'NT_SAMPLER'+'_3D']]=eT,this['pcUniformT'+'ype'][_0x4c6a59['INT_SAMPLE'+'R_2D_ARRAY']]=tT,this['pcUniformT'+'ype'][_0x4c6a59['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]=sT,this['targetToSl'+'ot']={},this['targetToSl'+'ot'][_0x4c6a59['TEXTURE_2D']]=0x146d+0x7*0x584+-0x3b09,this['targetToSl'+'ot'][_0x4c6a59['TEXTURE_CU'+'BE_MAP']]=0x10e3+0xbcc+0x1*-0x1cae,this['targetToSl'+'ot'][_0x4c6a59['TEXTURE_3D']]=0x1608+0x1*-0x1159+-0xab*0x7;let _0x56df7a,_0x29cd48,_0x544c2b,_0x413e87,_0x59f88c;this['commitFunc'+'tion']=[],this['commitFunc'+'tion'][Tn]=function(_0x38b543,_0xf341a4){_0x38b543['value']!==_0xf341a4&&(_0x4c6a59['uniform1i'](_0x38b543['locationId'],_0xf341a4),_0x38b543['value']=_0xf341a4);},this['commitFunc'+'tion'][_a]=this['commitFunc'+'tion'][Tn],this['commitFunc'+'tion'][Xs]=function(_0x5f1bca,_0x50bb29){_0x5f1bca['value']!==_0x50bb29&&(_0x4c6a59['uniform1f'](_0x5f1bca['locationId'],_0x50bb29),_0x5f1bca['value']=_0x50bb29);},this['commitFunc'+'tion'][ga]=function(_0x422de3,_0x1715ae){_0x59f88c=_0x422de3['value'],_0x56df7a=_0x1715ae[0xc3b+0x1d92+-0x3*0xdef],_0x29cd48=_0x1715ae[-0x3a1*-0xa+-0x9*0x73+0x203e*-0x1],(_0x59f88c[-0x2d0+-0x91*-0xb+-0x36b]!==_0x56df7a||_0x59f88c[-0x26a0+-0x19c0+0x4061]!==_0x29cd48)&&(_0x4c6a59['uniform2fv'](_0x422de3['locationId'],_0x1715ae),_0x59f88c[-0x18a+-0x1*0x2287+0x2411]=_0x56df7a,_0x59f88c[0x3*0x519+0x1*0x13a5+-0x22ef]=_0x29cd48);},this['commitFunc'+'tion'][ds]=function(_0x75d7b0,_0x413aef){_0x59f88c=_0x75d7b0['value'],_0x56df7a=_0x413aef[0x9f2+0x8*0x434+-0x27*0x11e],_0x29cd48=_0x413aef[-0x14f4+-0x417+0x190c],_0x544c2b=_0x413aef[-0x1cef+-0x2487+0x4178],(_0x59f88c[0x22d3+-0x1*-0x1ae3+-0x3db6]!==_0x56df7a||_0x59f88c[-0xe*-0x25f+0x199b+-0x8e*0x6a]!==_0x29cd48||_0x59f88c[0x19c2+0x1d24+0x493*-0xc]!==_0x544c2b)&&(_0x4c6a59['uniform3fv'](_0x75d7b0['locationId'],_0x413aef),_0x59f88c[-0x15*0x1a7+0x17e1+-0x5*-0x22a]=_0x56df7a,_0x59f88c[-0x85b+0x8fb*0x3+-0x47*0x43]=_0x29cd48,_0x59f88c[0x2089*-0x1+-0x1be4+0x3c6f]=_0x544c2b);},this['commitFunc'+'tion'][Rn]=function(_0x2be84b,_0x4b0b9b){_0x59f88c=_0x2be84b['value'],_0x56df7a=_0x4b0b9b[0x119*0x22+-0x2172+-0x3e0],_0x29cd48=_0x4b0b9b[0x24f2+-0x1459*0x1+-0x6*0x2c4],_0x544c2b=_0x4b0b9b[-0x1f51*0x1+0xb42*-0x1+0x2a95],_0x413e87=_0x4b0b9b[0xa7+-0x74b+0x6a7*0x1],(_0x59f88c[0x2368+-0x1*-0x1352+-0x36ba]!==_0x56df7a||_0x59f88c[0x21d6+-0x1b1c+-0x1*0x6b9]!==_0x29cd48||_0x59f88c[-0xd61+-0x1*0x1915+0x133c*0x2]!==_0x544c2b||_0x59f88c[-0x8*0x462+-0x37*0x25+-0x1583*-0x2]!==_0x413e87)&&(_0x4c6a59['uniform4fv'](_0x2be84b['locationId'],_0x4b0b9b),_0x59f88c[-0x1a68+-0x7f*0x9+0x1edf]=_0x56df7a,_0x59f88c[0x19c*-0xc+-0x2452*-0x1+-0x1101]=_0x29cd48,_0x59f88c[0xfe8+0x116*0xb+0x63*-0x48]=_0x544c2b,_0x59f88c[-0x559*0x4+-0x176b+0x2cd2]=_0x413e87);},this['commitFunc'+'tion'][ca]=function(_0x582c74,_0x2bf7fd){_0x59f88c=_0x582c74['value'],_0x56df7a=_0x2bf7fd[-0x656*-0x1+0x9b9+-0x100f],_0x29cd48=_0x2bf7fd[0x931+-0x1792*-0x1+-0x1*0x20c2],(_0x59f88c[0x1*-0x1ef1+0x10a*-0xc+0x1*0x2b69]!==_0x56df7a||_0x59f88c[0x1a3*-0x1+-0x1079+0x121d]!==_0x29cd48)&&(_0x4c6a59['uniform2iv'](_0x582c74['locationId'],_0x2bf7fd),_0x59f88c[-0xf73+-0x1269*0x1+0x21dc]=_0x56df7a,_0x59f88c[0x1*-0x1a9e+0x1064*-0x1+-0x79*-0x5b]=_0x29cd48);},this['commitFunc'+'tion'][tl]=this['commitFunc'+'tion'][ca],this['commitFunc'+'tion'][ha]=function(_0x11c384,_0x314b79){_0x59f88c=_0x11c384['value'],_0x56df7a=_0x314b79[-0xc*0x17b+0x438+0x33*0x44],_0x29cd48=_0x314b79[-0x13*-0x10d+0xb9+-0x5*0x423],_0x544c2b=_0x314b79[0x6*0x3c7+-0x1ac3*-0x1+0x1079*-0x3],(_0x59f88c[0x1*0xdb7+-0x1e*0xbc+0x851]!==_0x56df7a||_0x59f88c[0x1*0x1d46+-0x2*-0x783+0x1d*-0x187]!==_0x29cd48||_0x59f88c[0x545+0x24e9+-0x2a2c]!==_0x544c2b)&&(_0x4c6a59['uniform3iv'](_0x11c384['locationId'],_0x314b79),_0x59f88c[0x1d5a+0x2144+-0x3e9e]=_0x56df7a,_0x59f88c[0x2126+0x7ff+-0x1492*0x2]=_0x29cd48,_0x59f88c[0x1194+-0x2391+0x11ff]=_0x544c2b);},this['commitFunc'+'tion'][sl]=this['commitFunc'+'tion'][ha],this['commitFunc'+'tion'][da]=function(_0x34a07c,_0x427234){_0x59f88c=_0x34a07c['value'],_0x56df7a=_0x427234[-0x11c8+0x416+0x6d9*0x2],_0x29cd48=_0x427234[-0x8cb+0x1e66+-0x159a],_0x544c2b=_0x427234[-0x2393*0x1+0x3*-0xac7+0x2*0x21f5],_0x413e87=_0x427234[0xab*0x39+-0x6b6*-0x5+-0x479e],(_0x59f88c[0x2*-0xd+0x25d5+-0x25bb]!==_0x56df7a||_0x59f88c[-0x5*0x194+-0x465+0xc4a]!==_0x29cd48||_0x59f88c[0x3*-0xac9+0xea0+0x11bd]!==_0x544c2b||_0x59f88c[0xe76*-0x1+0x4a5+0x2*0x4ea]!==_0x413e87)&&(_0x4c6a59['uniform4iv'](_0x34a07c['locationId'],_0x427234),_0x59f88c[0x1*0x1230+0xca*-0x29+-0xe*-0x103]=_0x56df7a,_0x59f88c[0x9*0x41f+-0x2592+0x4*0x1f]=_0x29cd48,_0x59f88c[-0x1694+0x1*0x1b41+-0x4ab]=_0x544c2b,_0x59f88c[-0x20f9+0x1*0x230b+-0x20f]=_0x413e87);},this['commitFunc'+'tion'][il]=this['commitFunc'+'tion'][da],this['commitFunc'+'tion'][_h]=function(_0x11a841,_0x7fcbf6){_0x4c6a59['uniformMat'+'rix2fv'](_0x11a841['locationId'],!(0x106a+-0x13b+0xf2e*-0x1),_0x7fcbf6);},this['commitFunc'+'tion'][On]=function(_0x236806,_0x8555c0){_0x4c6a59['uniformMat'+'rix3fv'](_0x236806['locationId'],!(0x5c+-0x9dd+0x982),_0x8555c0);},this['commitFunc'+'tion'][li]=function(_0x20c796,_0xc649e2){_0x4c6a59['uniformMat'+'rix4fv'](_0x20c796['locationId'],!(-0x7b*-0x2f+0x1*0x1f96+-0x362a),_0xc649e2);},this['commitFunc'+'tion'][ud]=function(_0x354db7,_0x53d989){_0x4c6a59['uniform1fv'](_0x354db7['locationId'],_0x53d989);},this['commitFunc'+'tion'][pd]=function(_0x1375e7,_0x31db4b){_0x4c6a59['uniform2fv'](_0x1375e7['locationId'],_0x31db4b);},this['commitFunc'+'tion'][md]=function(_0x170af9,_0x426599){_0x4c6a59['uniform3fv'](_0x170af9['locationId'],_0x426599);},this['commitFunc'+'tion'][Lp]=function(_0x3a66d2,_0x288546){_0x4c6a59['uniform4fv'](_0x3a66d2['locationId'],_0x288546);},this['commitFunc'+'tion'][Fn]=function(_0x5dc66c,_0x4f4841){_0x5dc66c['value']!==_0x4f4841&&(_0x4c6a59['uniform1ui'](_0x5dc66c['locationId'],_0x4f4841),_0x5dc66c['value']=_0x4f4841);},this['commitFunc'+'tion'][Nn]=function(_0x134303,_0x5abc69){_0x59f88c=_0x134303['value'],_0x56df7a=_0x5abc69[0x325*0x3+-0x115*0x19+0x119e*0x1],_0x29cd48=_0x5abc69[-0x581+0x2379+-0x1df7],(_0x59f88c[0xb16+-0x4f8*0x1+-0x61e]!==_0x56df7a||_0x59f88c[-0x26a2+0x26ed+-0x4a]!==_0x29cd48)&&(_0x4c6a59['uniform2ui'+'v'](_0x134303['locationId'],_0x5abc69),_0x59f88c[-0x152e+0x1177+0x3*0x13d]=_0x56df7a,_0x59f88c[0x1*0x1687+-0x4db+-0x11ab]=_0x29cd48);},this['commitFunc'+'tion'][kn]=function(_0x2fd332,_0x58aed3){_0x59f88c=_0x2fd332['value'],_0x56df7a=_0x58aed3[0xfee+0x1ed1+-0x2ebf],_0x29cd48=_0x58aed3[-0x1*0x1bf5+-0x1*0x1f0d+0x3b03],_0x544c2b=_0x58aed3[0x3*0xc11+0xc*-0x297+0x11*-0x4d],(_0x59f88c[0x265+0x23f2+0xd*-0x2f3]!==_0x56df7a||_0x59f88c[0x20bb+-0x6f*0x36+-0x950]!==_0x29cd48||_0x59f88c[0x899+-0x1acb+0x5*0x3a4]!==_0x544c2b)&&(_0x4c6a59['uniform3ui'+'v'](_0x2fd332['locationId'],_0x58aed3),_0x59f88c[-0x2384+-0xb72*0x3+-0x2*-0x22ed]=_0x56df7a,_0x59f88c[-0x1*-0x7ae+-0x1719+0x234*0x7]=_0x29cd48,_0x59f88c[-0xe25*0x2+0x46b*0x1+-0x17e1*-0x1]=_0x544c2b);},this['commitFunc'+'tion'][Un]=function(_0x47ec8a,_0x933fd5){_0x59f88c=_0x47ec8a['value'],_0x56df7a=_0x933fd5[0xc7*-0x32+-0x65*0x3d+-0x1*-0x3eef],_0x29cd48=_0x933fd5[-0x1cf3+0x1195+0xb5f],_0x544c2b=_0x933fd5[-0x6*0x5d1+-0x1*-0xbcf+0xdb*0x1b],_0x413e87=_0x933fd5[-0x9*0x112+-0x4bf*-0x4+0x31d*-0x3],(_0x59f88c[0x1*-0xeb+-0x1e68+0x1f53]!==_0x56df7a||_0x59f88c[0x15f2+0x88e+-0xd3*0x25]!==_0x29cd48||_0x59f88c[-0x2544+0x16e9*-0x1+0x7*0x899]!==_0x544c2b||_0x59f88c[-0x1673+0xe*-0xbf+-0x3*-0xaf8]!==_0x413e87)&&(_0x4c6a59['uniform4ui'+'v'](_0x47ec8a['locationId'],_0x933fd5),_0x59f88c[0x22fb+-0x2401*0x1+-0x2*-0x83]=_0x56df7a,_0x59f88c[-0x1*0x1f98+-0x223f+-0x4*-0x1076]=_0x29cd48,_0x59f88c[0x12dc*-0x1+0x2*-0xf9e+-0x321a*-0x1]=_0x544c2b,_0x59f88c[0x8*0x443+-0x25da+0x3c5]=_0x413e87);},this['commitFunc'+'tion'][Bn]=function(_0x4689dd,_0x2a5782){_0x4c6a59['uniform1iv'](_0x4689dd['locationId'],_0x2a5782);},this['commitFunc'+'tion'][_d]=function(_0x306597,_0x5b3534){_0x4c6a59['uniform1ui'+'v'](_0x306597['locationId'],_0x5b3534);},this['commitFunc'+'tion'][gd]=this['commitFunc'+'tion'][Bn],this['commitFunc'+'tion'][zn]=function(_0x5ec5fd,_0x4f79f3){_0x4c6a59['uniform2iv'](_0x5ec5fd['locationId'],_0x4f79f3);},this['commitFunc'+'tion'][Sd]=function(_0x1ef00b,_0x45c1fe){_0x4c6a59['uniform2ui'+'v'](_0x1ef00b['locationId'],_0x45c1fe);},this['commitFunc'+'tion'][yd]=this['commitFunc'+'tion'][zn],this['commitFunc'+'tion'][Vn]=function(_0x660114,_0x2bb2a1){_0x4c6a59['uniform3iv'](_0x660114['locationId'],_0x2bb2a1);},this['commitFunc'+'tion'][vd]=function(_0x1e8ab1,_0x365f96){_0x4c6a59['uniform3ui'+'v'](_0x1e8ab1['locationId'],_0x365f96);},this['commitFunc'+'tion'][xd]=this['commitFunc'+'tion'][Vn],this['commitFunc'+'tion'][gh]=function(_0x9713a3,_0x410ba5){_0x4c6a59['uniform4iv'](_0x9713a3['locationId'],_0x410ba5);},this['commitFunc'+'tion'][Rp]=function(_0x3de644,_0x429be5){_0x4c6a59['uniform4ui'+'v'](_0x3de644['locationId'],_0x429be5);},this['commitFunc'+'tion'][Op]=this['commitFunc'+'tion'][gh],this['commitFunc'+'tion'][wy]=function(_0x4516ed,_0x392509){_0x4c6a59['uniformMat'+'rix4fv'](_0x4516ed['locationId'],!(-0x160e+-0x71*0x17+0x2036),_0x392509);},this['constantTe'+'xSource']=this['scope']['resolve']('source'),this['postInit']();}['postInit'](){super['postInit'](),this['gpuProfile'+'r']=new rw(this);}['destroy'](){super['destroy']();const _0x2497fd=this['gl'];this['feedback']&&_0x2497fd['deleteTran'+'sformFeedb'+'ack'](this['feedback']),this['clearVerte'+'xArrayObje'+'ctCache'](),this['canvas']['removeEven'+'tListener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(0x243+0x1723+-0xc5*0x21)),this['canvas']['removeEven'+'tListener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(0x1*-0x106f+-0x5e5*-0x2+0x77*0xa)),this['_contextLo'+'stHandler']=null,this['_contextRe'+'storedHand'+'ler']=null,this['gl']=null,super['postDestro'+'y']();}['createBack'+'buffer'](_0x4482bc){this['supportsSt'+'encil']=this['initOption'+'s']['stencil'],this['backBuffer']=new gt({'name':'WebglFrame'+'buffer','graphicsDevice':this,'depth':this['initOption'+'s']['depth'],'stencil':this['supportsSt'+'encil'],'samples':this['samples']}),this['backBuffer']['impl']['suppliedCo'+'lorFramebu'+'ffer']=_0x4482bc;}['updateBack'+'bufferForm'+'at'](_0xb2a15e){const _0x5f0ae3=this['gl'];_0x5f0ae3['bindFrameb'+'uffer'](_0x5f0ae3['FRAMEBUFFE'+'R'],_0xb2a15e);const _0x37b199=this['gl']['getParamet'+'er'](this['gl']['ALPHA_BITS']);this['backBuffer'+'Format']=_0x37b199?Ne:Cr;}['updateBack'+'buffer'](){const _0x3ddc2b=this['canvas']['width']!==this['backBuffer'+'Size']['x']||this['canvas']['height']!==this['backBuffer'+'Size']['y'];(this['_defaultFr'+'amebufferC'+'hanged']||_0x3ddc2b)&&(this['_defaultFr'+'amebufferC'+'hanged']&&this['updateBack'+'bufferForm'+'at'](this['_defaultFr'+'amebuffer']),this['_defaultFr'+'amebufferC'+'hanged']=!(-0xa29+-0x9*0x32+0xbec),this['backBuffer'+'Size']['set'](this['canvas']['width'],this['canvas']['height']),this['backBuffer']['destroy'](),this['createBack'+'buffer'](this['_defaultFr'+'amebuffer']));}['createVert'+'exBufferIm'+'pl'](_0x2225c3,_0x521fcc){return new XT();}['createInde'+'xBufferImp'+'l'](_0x47de70){return new qT(_0x47de70);}['createShad'+'erImpl'](_0x39fbf3){return new JT(_0x39fbf3);}['createText'+'ureImpl'](_0x589bac){return new ew(_0x589bac);}['createRend'+'erTargetIm'+'pl'](_0x3cda09){return new sw();}['pushMarker'](_0x1d6ee8){if(Ae['browser']&&window['spector']){const _0x383390=Q['toString']();window['spector']['setMarker'](_0x383390+'\x20#');}}['popMarker'](){if(Ae['browser']&&window['spector']){const _0x568d64=Q['toString']();_0x568d64['length']?window['spector']['setMarker'](_0x568d64+'\x20#'):window['spector']['clearMarke'+'r']();}}['getPrecisi'+'on'](){const _0x38a384=this['gl'];let _0x575189='highp';if(_0x38a384['getShaderP'+'recisionFo'+'rmat']){const _0x40ab10=_0x38a384['getShaderP'+'recisionFo'+'rmat'](_0x38a384['VERTEX_SHA'+'DER'],_0x38a384['HIGH_FLOAT']),_0x37e283=_0x38a384['getShaderP'+'recisionFo'+'rmat'](_0x38a384['VERTEX_SHA'+'DER'],_0x38a384['MEDIUM_FLO'+'AT']),_0x31d244=_0x38a384['getShaderP'+'recisionFo'+'rmat'](_0x38a384['FRAGMENT_S'+'HADER'],_0x38a384['HIGH_FLOAT']),_0x4835c2=_0x38a384['getShaderP'+'recisionFo'+'rmat'](_0x38a384['FRAGMENT_S'+'HADER'],_0x38a384['MEDIUM_FLO'+'AT']);if(_0x40ab10&&_0x37e283&&_0x31d244&&_0x4835c2){const _0x965e1a=_0x40ab10['precision']>-0x7d2+-0x86*-0x24+-0xb06*0x1&&_0x31d244['precision']>0x6*0x61+-0x226b+0x2025,_0x302cb4=_0x37e283['precision']>-0x122b*-0x1+-0x1*-0xf77+-0x21a2&&_0x4835c2['precision']>0xd1a+-0xa*0xff+-0x192*0x2;_0x965e1a||(_0x302cb4?(_0x575189='mediump',w['warn']('WARNING:\x20h'+'ighp\x20not\x20s'+'upported,\x20'+'using\x20medi'+'ump')):(_0x575189='lowp',w['warn']('WARNING:\x20h'+'ighp\x20and\x20m'+'ediump\x20not'+'\x20supported'+',\x20using\x20lo'+'wp')));}}return _0x575189;}['getExtensi'+'on'](){for(let _0x419741=-0x268f+-0xde1+0x3470;_0x419741<arguments['length'];_0x419741++)if(this['supportedE'+'xtensions']['indexOf'](arguments[_0x419741])!==-(-0xb8*0x30+-0x2239*-0x1+0x48))return this['gl']['getExtensi'+'on'](arguments[_0x419741]);return null;}get['extDisjoin'+'tTimerQuer'+'y'](){return this['_extDisjoi'+'ntTimerQue'+'ry']||(this['_extDisjoi'+'ntTimerQue'+'ry']=this['getExtensi'+'on']('EXT_disjoi'+'nt_timer_q'+'uery_webgl'+'2','EXT_disjoi'+'nt_timer_q'+'uery')),this['_extDisjoi'+'ntTimerQue'+'ry'];}['initialize'+'Extensions'](){const _0x3967f8=this['gl'];this['supportedE'+'xtensions']=_0x3967f8['getSupport'+'edExtensio'+'ns']()??[],this['_extDisjoi'+'ntTimerQue'+'ry']=null,this['textureRG1'+'1B10Render'+'able']=!(-0x1*-0x242f+0x1*0x1c9b+-0x40ca),this['extColorBu'+'fferFloat']=this['getExtensi'+'on']('EXT_color_'+'buffer_flo'+'at'),this['textureFlo'+'atRenderab'+'le']=!!this['extColorBu'+'fferFloat'],this['extColorBu'+'fferHalfFl'+'oat']=this['getExtensi'+'on']('EXT_color_'+'buffer_hal'+'f_float'),this['textureHal'+'fFloatRend'+'erable']=!!this['extColorBu'+'fferHalfFl'+'oat']||!!this['extColorBu'+'fferFloat'],this['extDebugRe'+'ndererInfo']=this['getExtensi'+'on']('WEBGL_debu'+'g_renderer'+'_info'),this['extTexture'+'FloatLinea'+'r']=this['getExtensi'+'on']('OES_textur'+'e_float_li'+'near'),this['textureFlo'+'atFilterab'+'le']=!!this['extTexture'+'FloatLinea'+'r'],this['extFloatBl'+'end']=this['getExtensi'+'on']('EXT_float_'+'blend'),this['extTexture'+'FilterAnis'+'otropic']=this['getExtensi'+'on']('EXT_textur'+'e_filter_a'+'nisotropic','WEBKIT_EXT'+'_texture_f'+'ilter_anis'+'otropic'),this['extParalle'+'lShaderCom'+'pile']=this['getExtensi'+'on']('KHR_parall'+'el_shader_'+'compile'),this['extCompres'+'sedTexture'+'ETC1']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc1'),this['extCompres'+'sedTexture'+'ETC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc'),this['extCompres'+'sedTexture'+'PVRTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_pvrtc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_pvrtc'),this['extCompres'+'sedTexture'+'S3TC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_s3tc'),this['extCompres'+'sedTexture'+'S3TC_SRGB']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc_'+'srgb'),this['extCompres'+'sedTexture'+'ATC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_atc'),this['extCompres'+'sedTexture'+'ASTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_astc'),this['extTexture'+'Compressio'+'nBPTC']=this['getExtensi'+'on']('EXT_textur'+'e_compress'+'ion_bptc');}['initialize'+'Capabiliti'+'es'](){const _0x3cfbeb=this['gl'];let _0x57d5a6;const _0x21904f=typeof navigator<'u'?navigator['userAgent']:'';this['maxPrecisi'+'on']=this['precision']=this['getPrecisi'+'on']();const _0xe9b6bd=_0x3cfbeb['getContext'+'Attributes']();this['supportsMs'+'aa']=(_0xe9b6bd==null?void(-0xd73*-0x1+0x2176+-0x2ee9):_0xe9b6bd['antialias'])??!(0x1dcd+0x2bf*0xe+0xda6*-0x5),this['supportsSt'+'encil']=(_0xe9b6bd==null?void(0xc66+-0x4*-0x232+-0x152e):_0xe9b6bd['stencil'])??!(0x2545*-0x1+0x1*0xd81+0x17c5*0x1),this['maxTexture'+'Size']=_0x3cfbeb['getParamet'+'er'](_0x3cfbeb['MAX_TEXTUR'+'E_SIZE']),this['maxCubeMap'+'Size']=_0x3cfbeb['getParamet'+'er'](_0x3cfbeb['MAX_CUBE_M'+'AP_TEXTURE'+'_SIZE']),this['maxRenderB'+'ufferSize']=_0x3cfbeb['getParamet'+'er'](_0x3cfbeb['MAX_RENDER'+'BUFFER_SIZ'+'E']),this['maxTexture'+'s']=_0x3cfbeb['getParamet'+'er'](_0x3cfbeb['MAX_TEXTUR'+'E_IMAGE_UN'+'ITS']),this['maxCombine'+'dTextures']=_0x3cfbeb['getParamet'+'er'](_0x3cfbeb['MAX_COMBIN'+'ED_TEXTURE'+'_IMAGE_UNI'+'TS']),this['maxVertexT'+'extures']=_0x3cfbeb['getParamet'+'er'](_0x3cfbeb['MAX_VERTEX'+'_TEXTURE_I'+'MAGE_UNITS']),this['vertexUnif'+'ormsCount']=_0x3cfbeb['getParamet'+'er'](_0x3cfbeb['MAX_VERTEX'+'_UNIFORM_V'+'ECTORS']),this['fragmentUn'+'iformsCoun'+'t']=_0x3cfbeb['getParamet'+'er'](_0x3cfbeb['MAX_FRAGME'+'NT_UNIFORM'+'_VECTORS']),this['maxColorAt'+'tachments']=_0x3cfbeb['getParamet'+'er'](_0x3cfbeb['MAX_COLOR_'+'ATTACHMENT'+'S']),this['maxVolumeS'+'ize']=_0x3cfbeb['getParamet'+'er'](_0x3cfbeb['MAX_3D_TEX'+'TURE_SIZE']),_0x57d5a6=this['extDebugRe'+'ndererInfo'],this['unmaskedRe'+'nderer']=_0x57d5a6?_0x3cfbeb['getParamet'+'er'](_0x57d5a6['UNMASKED_R'+'ENDERER_WE'+'BGL']):'',this['unmaskedVe'+'ndor']=_0x57d5a6?_0x3cfbeb['getParamet'+'er'](_0x57d5a6['UNMASKED_V'+'ENDOR_WEBG'+'L']):'';const _0x37461b=/\bMali-G52+/,_0x5dfdd5=/SM-[a-zA-Z0-9]+/;this['supportsGp'+'uParticles']=!(this['unmaskedVe'+'ndor']==='ARM'&&_0x21904f['match'](_0x5dfdd5))&&!this['unmaskedRe'+'nderer']['match'](_0x37461b),_0x57d5a6=this['extTexture'+'FilterAnis'+'otropic'],this['maxAnisotr'+'opy']=_0x57d5a6?_0x3cfbeb['getParamet'+'er'](_0x57d5a6['MAX_TEXTUR'+'E_MAX_ANIS'+'OTROPY_EXT']):0x1b81+-0x23a3+0x823;const _0x8797ac=!this['forceDisab'+'leMultisam'+'pling'];this['maxSamples']=_0x8797ac?_0x3cfbeb['getParamet'+'er'](_0x3cfbeb['MAX_SAMPLE'+'S']):0x903*-0x4+0x17e*-0x5+-0x2f*-0xed,this['maxSamples']=Math['min'](this['maxSamples'],-0x676*0x5+-0xbc6+0x2c18),this['samples']=_0x8797ac&&this['backBuffer'+'Antialias']?this['maxSamples']:-0x1035*0x2+-0x2196+0x4201,this['supportsAr'+'eaLights']=!Ae['android'],this['maxTexture'+'s']<=-0x2636+-0xd9*-0x1+0x2565&&(this['supportsAr'+'eaLights']=!(-0x5d5+-0x6f7*-0x4+-0x1*0x1606)),this['initCapsDe'+'fines']();}['initialize'+'RenderStat'+'e'](){super['initialize'+'RenderStat'+'e']();const _0x342a65=this['gl'];_0x342a65['disable'](_0x342a65['BLEND']),_0x342a65['blendFunc'](_0x342a65['ONE'],_0x342a65['ZERO']),_0x342a65['blendEquat'+'ion'](_0x342a65['FUNC_ADD']),_0x342a65['colorMask'](!(0x28c*-0x1+-0xb9*-0x31+-0x20dd),!(0x110e+-0x2078+0xf6a),!(-0x199e+0x1f*0x3e+0x121c),!(-0x14b7*0x1+-0x10*0x14b+0x2967)),_0x342a65['blendColor'](-0x12*0x5c+-0x1310+0x13*0x158,-0x800+0x1*0xf69+-0x769,-0x1*0x2603+-0x14b3+-0x5*-0xbbe,-0x1b86+0x13*0x10d+0x2d*0x2b),_0x342a65['enable'](_0x342a65['CULL_FACE']),this['cullFace']=_0x342a65['BACK'],_0x342a65['cullFace'](_0x342a65['BACK']),_0x342a65['enable'](_0x342a65['DEPTH_TEST']),_0x342a65['depthFunc'](_0x342a65['LEQUAL']),_0x342a65['depthMask'](!(-0x413*-0x1+0x49c+-0x8af)),this['stencil']=!(0x1*-0xbd9+0x1f2f+0x7*-0x2c3),_0x342a65['disable'](_0x342a65['STENCIL_TE'+'ST']),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=Wi,this['stencilRef'+'Front']=this['stencilRef'+'Back']=0x25fb*-0x1+0x19e5+0xc16,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=0x3b1+-0x86*0x3d+0x1d3c*0x1,_0x342a65['stencilFun'+'c'](_0x342a65['ALWAYS'],-0xba*0x33+0x1*-0x88f+0x2d9d,0x23e7+0x86d*0x2+0x6a*-0x7d),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=xn,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=xn,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=xn,this['stencilWri'+'teMaskFron'+'t']=0x1c6a+0x18a5*0x1+0x188*-0x22,this['stencilWri'+'teMaskBack']=-0x1*0x144d+-0x253+0x179f,_0x342a65['stencilOp'](_0x342a65['KEEP'],_0x342a65['KEEP'],_0x342a65['KEEP']),_0x342a65['stencilMas'+'k'](-0x2555+0x9be*-0x4+0x4d4c),this['alphaToCov'+'erage']=!(0x10f*0x13+0x1bd2+0x3*-0xffa),this['raster']=!(0x2e*0x1a+-0x521+0x1*0x75),_0x342a65['disable'](_0x342a65['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']),_0x342a65['disable'](_0x342a65['RASTERIZER'+'_DISCARD']),this['depthBiasE'+'nabled']=!(0x3*-0x1ad+0x32*0x8d+-0x1682),_0x342a65['disable'](_0x342a65['POLYGON_OF'+'FSET_FILL']),this['clearDepth']=-0x1b3b+-0x580+0x68c*0x5,_0x342a65['clearDepth'](-0x101d+-0xb*0x1de+0x24a8),this['clearColor']=new ie(-0xc*-0x16+0xb*0x282+0x6f*-0x42,0x353*0x7+0x4*-0x4a9+0x18b*-0x3,-0x1a3*-0x1+0xd*0x151+-0x12c0,0x31*0x72+0x1cca*0x1+-0x329c),_0x342a65['clearColor'](-0x2cb+0x2357+0x1*-0x208c,0xf8*0x5+0x7c2+-0xc9a,0x1308+-0x364+-0xfa4,0x1*0xef5+0x1*0x16b+-0x1060),this['clearStenc'+'il']=-0x2265+0x7c9*-0x1+0x2a2e,_0x342a65['clearStenc'+'il'](-0x1bf4+-0x112*0x20+-0x6*-0xa5e),_0x342a65['hint'](_0x342a65['FRAGMENT_S'+'HADER_DERI'+'VATIVE_HIN'+'T'],_0x342a65['NICEST']),_0x342a65['enable'](_0x342a65['SCISSOR_TE'+'ST']),_0x342a65['pixelStore'+'i'](_0x342a65['UNPACK_COL'+'ORSPACE_CO'+'NVERSION_W'+'EBGL'],_0x342a65['NONE']),this['unpackFlip'+'Y']=!(0x44b+0xb39+-0xd1*0x13),_0x342a65['pixelStore'+'i'](_0x342a65['UNPACK_FLI'+'P_Y_WEBGL'],!(-0x33*-0xbf+-0x2401*-0x1+-0x1*0x4a0d)),this['unpackPrem'+'ultiplyAlp'+'ha']=!(-0x2143+-0x1176+0x32ba),_0x342a65['pixelStore'+'i'](_0x342a65['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],!(0x4*0x53a+-0x6b*-0x35+-0x2b0e)),_0x342a65['pixelStore'+'i'](_0x342a65['UNPACK_ALI'+'GNMENT'],0x43*0x66+0xbd5*-0x1+-0xedc);}['initTextur'+'eUnits'](_0x3ffd46=-0x1811*0x1+0x35*-0x95+0x36fa){this['textureUni'+'ts']=[];for(let _0x39d81d=-0xd5a+0x1521*0x1+-0x7c7;_0x39d81d<_0x3ffd46;_0x39d81d++)this['textureUni'+'ts']['push']([null,null,null]);}['initialize'+'ContextCac'+'hes'](){super['initialize'+'ContextCac'+'hes'](),this['_vaoMap']=new Map(),this['boundVao']=null,this['activeFram'+'ebuffer']=null,this['feedback']=null,this['transformF'+'eedbackBuf'+'fer']=null,this['textureUni'+'t']=-0x1c*0xd9+-0x2515+-0x1*-0x3cd1,this['initTextur'+'eUnits'](this['maxCombine'+'dTextures']);}['loseContex'+'t'](){super['loseContex'+'t']();for(const _0x5ee98c of this['shaders'])_0x5ee98c['loseContex'+'t']();}['restoreCon'+'text'](){this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),super['restoreCon'+'text']();for(const _0x29de1a of this['shaders'])_0x29de1a['restoreCon'+'text']();}['setViewpor'+'t'](_0x38c162,_0x374952,_0x54c500,_0x151591){(this['vx']!==_0x38c162||this['vy']!==_0x374952||this['vw']!==_0x54c500||this['vh']!==_0x151591)&&(this['gl']['viewport'](_0x38c162,_0x374952,_0x54c500,_0x151591),this['vx']=_0x38c162,this['vy']=_0x374952,this['vw']=_0x54c500,this['vh']=_0x151591);}['setScissor'](_0x3b7664,_0x43814c,_0x19fb3c,_0x4a5fa5){(this['sx']!==_0x3b7664||this['sy']!==_0x43814c||this['sw']!==_0x19fb3c||this['sh']!==_0x4a5fa5)&&(this['gl']['scissor'](_0x3b7664,_0x43814c,_0x19fb3c,_0x4a5fa5),this['sx']=_0x3b7664,this['sy']=_0x43814c,this['sw']=_0x19fb3c,this['sh']=_0x4a5fa5);}['setFramebu'+'ffer'](_0x5d927e){if(this['activeFram'+'ebuffer']!==_0x5d927e){const _0x2259d3=this['gl'];_0x2259d3['bindFrameb'+'uffer'](_0x2259d3['FRAMEBUFFE'+'R'],_0x5d927e),this['activeFram'+'ebuffer']=_0x5d927e;}}['copyRender'+'Target'](_0x556263,_0x554571,_0x57ab58,_0x4a3a1d){var _0x321a13,_0x2c4811;const _0xeda440=this['gl'];if(_0x556263===this['backBuffer']&&(_0x556263=null),_0x57ab58){if(_0x554571){if(_0x556263){if(!_0x556263['_colorBuff'+'er']||!_0x554571['_colorBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20color\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(-0x4b*0x68+0x1*-0x15e2+0x345b);if(_0x556263['_colorBuff'+'er']['_format']!==_0x554571['_colorBuff'+'er']['_format'])return w['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20c'+'olor\x20forma'+'ts'),!(0x1767+-0x25d*-0x2+-0x1c20);}}else{if(!_0x556263['_colorBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20empty\x20col'+'or\x20buffer\x20'+'to\x20backbuf'+'fer'),!(0x237b+-0x226e+-0x10c);}}if(_0x4a3a1d&&_0x556263&&!_0x556263['_depth']){if(!_0x556263['_depthBuff'+'er']||!_0x554571['_depthBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20depth\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(-0x2500+0x17eb+0xd16);if(_0x556263['_depthBuff'+'er']['_format']!==_0x554571['_depthBuff'+'er']['_format'])return w['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20d'+'epth\x20forma'+'ts'),!(-0x185a+0x16bd*0x1+0x19e);}Q['pushGpuMar'+'ker'](this,'COPY-RT');const _0x349f58=this['renderTarg'+'et'];this['renderTarg'+'et']=_0x554571,this['updateBegi'+'n']();const _0x377ba4=_0x556263?_0x556263['impl']['_glFrameBu'+'ffer']:(_0x321a13=this['backBuffer'])==null?void(-0x241*-0xd+-0x3*0x584+-0xcc1):_0x321a13['impl']['_glFrameBu'+'ffer'],_0x45b862=_0x554571?_0x554571['impl']['_glFrameBu'+'ffer']:(_0x2c4811=this['backBuffer'])==null?void(0xf2e+-0x45+0xee9*-0x1):_0x2c4811['impl']['_glFrameBu'+'ffer'];w['assert'](_0x377ba4!==_0x45b862,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0xeda440['bindFrameb'+'uffer'](_0xeda440['READ_FRAME'+'BUFFER'],_0x377ba4),_0xeda440['bindFrameb'+'uffer'](_0xeda440['DRAW_FRAME'+'BUFFER'],_0x45b862);const _0x1cc273=_0x556263?_0x556263['width']:_0x554571?_0x554571['width']:this['width'],_0x2a7e7e=_0x556263?_0x556263['height']:_0x554571?_0x554571['height']:this['height'];return _0xeda440['blitFrameb'+'uffer'](0xf54+-0xf8a+0x36,0x1*-0x16ef+-0xbdd+0x1*0x22cc,_0x1cc273,_0x2a7e7e,0x90d+-0x1bf+-0x74e,-0x24e8+-0x1*0x1ec4+-0x7a*-0x8e,_0x1cc273,_0x2a7e7e,(_0x57ab58?_0xeda440['COLOR_BUFF'+'ER_BIT']:-0x8*-0x43a+-0x2015*-0x1+-0x41e5)|(_0x4a3a1d?_0xeda440['DEPTH_BUFF'+'ER_BIT']:-0x10bf*0x2+0x84c+-0x19*-0x102),_0xeda440['NEAREST']),this['renderTarg'+'et']=_0x349f58,_0xeda440['bindFrameb'+'uffer'](_0xeda440['FRAMEBUFFE'+'R'],_0x349f58?_0x349f58['impl']['_glFrameBu'+'ffer']:null),Q['popGpuMark'+'er'](this),!(0x121*-0x1d+-0x1539+0x35f6);}['frameStart'](){super['frameStart'](),this['updateBack'+'buffer'](),this['gpuProfile'+'r']['frameStart']();}['frameEnd'](){super['frameEnd'](),this['gpuProfile'+'r']['frameEnd'](),this['gpuProfile'+'r']['request']();}['startRende'+'rPass'](_0x28f583){const _0x11d1f6=_0x28f583['renderTarg'+'et']??this['backBuffer'];this['renderTarg'+'et']=_0x11d1f6,w['assert'](_0x11d1f6),Q['pushGpuMar'+'ker'](this,'Pass:'+_0x28f583['name']+'\x20RT:'+_0x11d1f6['name']),Q['pushGpuMar'+'ker'](this,'START-PASS'),this['updateBegi'+'n']();const {width:_0x468e0c,height:_0x2141dc}=_0x11d1f6;this['setViewpor'+'t'](0x25ce+0x20c3+-0x4691*0x1,-0x23e3+0x6*0x361+0x1*0xf9d,_0x468e0c,_0x2141dc),this['setScissor'](0x13d*0x11+0xa*-0x110+-0x9d*0x11,-0x1d87*0x1+-0x1*0x1445+0x18e6*0x2,_0x468e0c,_0x2141dc);const _0x13e0d1=_0x28f583['colorOps'],_0x956150=_0x28f583['depthStenc'+'ilOps'];if(_0x13e0d1!=null&&_0x13e0d1['clear']||_0x956150['clearDepth']||_0x956150['clearStenc'+'il']){let _0x90872f=-0x501+0x1c98+-0x1797;const _0x30625a={};_0x13e0d1!=null&&_0x13e0d1['clear']&&(_0x90872f|=jo,_0x30625a['color']=[_0x13e0d1['clearValue']['r'],_0x13e0d1['clearValue']['g'],_0x13e0d1['clearValue']['b'],_0x13e0d1['clearValue']['a']]),_0x956150['clearDepth']&&(_0x90872f|=Yo,_0x30625a['depth']=_0x956150['clearDepth'+'Value']),_0x956150['clearStenc'+'il']&&(_0x90872f|=ch,_0x30625a['stencil']=_0x956150['clearStenc'+'ilValue']),_0x30625a['flags']=_0x90872f,this['clear'](_0x30625a);}w['call'](()=>{this['insideRend'+'erPass']&&w['errorOnce']('RenderPass'+'\x20cannot\x20be'+'\x20started\x20w'+'hile\x20insid'+'e\x20another\x20'+'render\x20pas'+'s.');}),this['insideRend'+'erPass']=!(-0x2*-0x1001+0x1*0x1619+0x2d9*-0x13),Q['popGpuMark'+'er'](this);}['endRenderP'+'ass'](_0x386a2f){var _0xd1c066;Q['pushGpuMar'+'ker'](this,'END-PASS'),this['unbindVert'+'exArray']();const _0x312655=this['renderTarg'+'et'],_0xbeb904=_0x386a2f['colorArray'+'Ops']['length'];if(_0x312655){Da['length']=0x12*-0x1bd+0x2*-0x1105+-0x71*-0x94;const _0x2d44a9=this['gl'];for(let _0x2b8931=0x781+0x13c*0x19+-0x265d;_0x2b8931<_0xbeb904;_0x2b8931++){const _0x222609=_0x386a2f['colorArray'+'Ops'][_0x2b8931];_0x222609['store']||_0x222609['resolve']||Da['push'](_0x2d44a9['COLOR_ATTA'+'CHMENT0']+_0x2b8931);}_0x312655!==this['backBuffer']&&(_0x386a2f['depthStenc'+'ilOps']['storeDepth']||Da['push'](_0x2d44a9['DEPTH_ATTA'+'CHMENT']),_0x386a2f['depthStenc'+'ilOps']['storeStenc'+'il']||Da['push'](_0x2d44a9['STENCIL_AT'+'TACHMENT'])),Da['length']>0x20fe+-0x5f3*-0x1+-0xcfb*0x3&&_0x386a2f['fullSizeCl'+'earRect']&&_0x2d44a9['invalidate'+'Framebuffe'+'r'](_0x2d44a9['DRAW_FRAME'+'BUFFER'],Da),_0xbeb904&&((_0xd1c066=_0x386a2f['colorOps'])!=null&&_0xd1c066['resolve'])&&_0x386a2f['samples']>0x101*0x17+-0x1*-0x2061+-0x3777&&_0x312655['autoResolv'+'e']&&_0x312655['resolve'](!(0x1ad5+0x2f6*-0xd+-0x3*-0x3e3),!(-0x1*-0xb80+0x1149+0x4*-0x732)),_0x312655['depthBuffe'+'r']&&_0x386a2f['depthStenc'+'ilOps']['resolveDep'+'th']&&_0x386a2f['samples']>-0x134b+0x6c9*-0x1+0x1a15&&_0x312655['autoResolv'+'e']&&_0x312655['resolve'](!(-0x5cc+-0xc27*-0x1+-0x10f*0x6),!(0x1f*-0xfc+-0xf44+-0x1*-0x2dc8));for(let _0x588527=-0x70*-0x7+0x1b5a+-0x1e6a;_0x588527<_0xbeb904;_0x588527++)if(_0x386a2f['colorArray'+'Ops'][_0x588527]['genMipmaps']){const _0x8c33dc=_0x312655['_colorBuff'+'ers'][_0x588527];_0x8c33dc&&_0x8c33dc['impl']['_glTexture']&&_0x8c33dc['mipmaps']&&(Q['pushGpuMar'+'ker'](this,'MIPS'+_0x588527),this['activeText'+'ure'](this['maxCombine'+'dTextures']-(-0x286+-0x1b23+0x1daa)),this['bindTextur'+'e'](_0x8c33dc),this['gl']['generateMi'+'pmap'](_0x8c33dc['impl']['_glTarget']),Q['popGpuMark'+'er'](this));}}this['insideRend'+'erPass']=!(0x7ef+0x291*0x7+0x1*-0x19e5),Q['popGpuMark'+'er'](this),Q['popGpuMark'+'er'](this);}set['defaultFra'+'mebuffer'](_0x20e7f2){this['_defaultFr'+'amebuffer']!==_0x20e7f2&&(this['_defaultFr'+'amebuffer']=_0x20e7f2,this['_defaultFr'+'amebufferC'+'hanged']=!(-0x416*-0x4+0x15ae+-0x2606));}get['defaultFra'+'mebuffer'](){return this['_defaultFr'+'amebuffer'];}['updateBegi'+'n'](){if(Q['pushGpuMar'+'ker'](this,'UPDATE-BEG'+'IN'),this['boundVao']=null,this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']){for(let _0xd832f4=0x1*-0x1d41+0x205d+-0x31c;_0xd832f4<this['textureUni'+'ts']['length'];++_0xd832f4)for(let _0x4cd63b=0xea*0xe+0x2*-0xeef+0x1112;_0x4cd63b<0xb2e+-0x47*-0x8b+-0x31b8;++_0x4cd63b)this['textureUni'+'ts'][_0xd832f4][_0x4cd63b]=null;}const _0x441b12=this['renderTarg'+'et']??this['backBuffer'];w['assert'](_0x441b12);const _0x59edd2=_0x441b12['impl'];_0x59edd2['initialize'+'d']||this['initRender'+'Target'](_0x441b12),this['setFramebu'+'ffer'](_0x59edd2['_glFrameBu'+'ffer']),Q['popGpuMark'+'er'](this);}['updateEnd'](){Q['pushGpuMar'+'ker'](this,'UPDATE-END'),this['unbindVert'+'exArray']();const _0x2b087c=this['renderTarg'+'et'];if(_0x2b087c&&_0x2b087c!==this['backBuffer']){_0x2b087c['_samples']>0x1693+0xbab+0x1*-0x223d&&_0x2b087c['autoResolv'+'e']&&_0x2b087c['resolve']();const _0x1baaa2=_0x2b087c['_colorBuff'+'er'];_0x1baaa2&&_0x1baaa2['impl']['_glTexture']&&_0x1baaa2['mipmaps']&&(this['activeText'+'ure'](this['maxCombine'+'dTextures']-(-0x21a2+-0x22*-0x5+0x20f9)),this['bindTextur'+'e'](_0x1baaa2),this['gl']['generateMi'+'pmap'](_0x1baaa2['impl']['_glTarget']));}Q['popGpuMark'+'er'](this);}['setUnpackF'+'lipY'](_0x15c460){if(this['unpackFlip'+'Y']!==_0x15c460){this['unpackFlip'+'Y']=_0x15c460;const _0x59f79d=this['gl'];_0x59f79d['pixelStore'+'i'](_0x59f79d['UNPACK_FLI'+'P_Y_WEBGL'],_0x15c460);}}['setUnpackP'+'remultiply'+'Alpha'](_0x320188){if(this['unpackPrem'+'ultiplyAlp'+'ha']!==_0x320188){this['unpackPrem'+'ultiplyAlp'+'ha']=_0x320188;const _0x197f05=this['gl'];_0x197f05['pixelStore'+'i'](_0x197f05['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],_0x320188);}}['activeText'+'ure'](_0x3107c8){this['textureUni'+'t']!==_0x3107c8&&(this['gl']['activeText'+'ure'](this['gl']['TEXTURE0']+_0x3107c8),this['textureUni'+'t']=_0x3107c8);}['bindTextur'+'e'](_0x2804b8){const _0x3b6d56=_0x2804b8['impl'],_0x3a9a97=_0x3b6d56['_glTarget'],_0x48c47d=_0x3b6d56['_glTexture'],_0x45ed48=this['textureUni'+'t'],_0x3c225d=this['targetToSl'+'ot'][_0x3a9a97];this['textureUni'+'ts'][_0x45ed48][_0x3c225d]!==_0x48c47d&&(this['gl']['bindTextur'+'e'](_0x3a9a97,_0x48c47d),this['textureUni'+'ts'][_0x45ed48][_0x3c225d]=_0x48c47d);}['bindTextur'+'eOnUnit'](_0x1c82d2,_0x15cade){const _0x521612=_0x1c82d2['impl'],_0x240f49=_0x521612['_glTarget'],_0x2f0ef7=_0x521612['_glTexture'],_0x582bd6=this['targetToSl'+'ot'][_0x240f49];this['textureUni'+'ts'][_0x15cade][_0x582bd6]!==_0x2f0ef7&&(this['activeText'+'ure'](_0x15cade),this['gl']['bindTextur'+'e'](_0x240f49,_0x2f0ef7),this['textureUni'+'ts'][_0x15cade][_0x582bd6]=_0x2f0ef7);}['setTexture'+'Parameters'](_0x27942a){const _0x408c63=this['gl'],_0x29403a=_0x27942a['impl']['dirtyParam'+'eterFlags'],_0x50fd9e=_0x27942a['impl']['_glTarget'];if(_0x29403a&Ay){let _0x5f21b4=_0x27942a['_minFilter'];(!_0x27942a['_mipmaps']||_0x27942a['_compresse'+'d']&&_0x27942a['_levels']['length']===0x23e0+0x1*-0x1396+-0x1049)&&(_0x5f21b4===Kh||_0x5f21b4===Zh?_0x5f21b4=Te:(_0x5f21b4===Qh||_0x5f21b4===ma)&&(_0x5f21b4=vt)),_0x408c63['texParamet'+'eri'](_0x50fd9e,_0x408c63['TEXTURE_MI'+'N_FILTER'],this['glFilter'][_0x5f21b4]);}if(_0x29403a&Cy&&_0x408c63['texParamet'+'eri'](_0x50fd9e,_0x408c63['TEXTURE_MA'+'G_FILTER'],this['glFilter'][_0x27942a['_magFilter']]),_0x29403a&Py&&_0x408c63['texParamet'+'eri'](_0x50fd9e,_0x408c63['TEXTURE_WR'+'AP_S'],this['glAddress'][_0x27942a['_addressU']]),_0x29403a&My&&_0x408c63['texParamet'+'eri'](_0x50fd9e,_0x408c63['TEXTURE_WR'+'AP_T'],this['glAddress'][_0x27942a['_addressV']]),_0x29403a&Dy&&_0x408c63['texParamet'+'eri'](_0x50fd9e,_0x408c63['TEXTURE_WR'+'AP_R'],this['glAddress'][_0x27942a['_addressW']]),_0x29403a&Iy&&_0x408c63['texParamet'+'eri'](_0x50fd9e,_0x408c63['TEXTURE_CO'+'MPARE_MODE'],_0x27942a['_compareOn'+'Read']?_0x408c63['COMPARE_RE'+'F_TO_TEXTU'+'RE']:_0x408c63['NONE']),_0x29403a&Ly&&_0x408c63['texParamet'+'eri'](_0x50fd9e,_0x408c63['TEXTURE_CO'+'MPARE_FUNC'],this['glComparis'+'on'][_0x27942a['_compareFu'+'nc']]),_0x29403a&Ry){const _0x2fe576=this['extTexture'+'FilterAnis'+'otropic'];_0x2fe576&&_0x408c63['texParamet'+'erf'](_0x50fd9e,_0x2fe576['TEXTURE_MA'+'X_ANISOTRO'+'PY_EXT'],Y['clamp'](Math['round'](_0x27942a['_anisotrop'+'y']),0x2256*-0x1+-0x214b+0x43a2,this['maxAnisotr'+'opy']));}}['setTexture'](_0x33613b,_0x117bd2){const _0x581dcc=_0x33613b['impl'];_0x581dcc['_glTexture']||_0x581dcc['initialize'](this,_0x33613b),_0x581dcc['dirtyParam'+'eterFlags']>0x3*-0x2af+-0x1c8d+0x249a||_0x33613b['_needsUplo'+'ad']||_0x33613b['_needsMipm'+'apsUpload']?(this['activeText'+'ure'](_0x117bd2),this['bindTextur'+'e'](_0x33613b),_0x581dcc['dirtyParam'+'eterFlags']&&(this['setTexture'+'Parameters'](_0x33613b),_0x581dcc['dirtyParam'+'eterFlags']=-0x1*0x18d+-0xd*-0xe2+-0x9ed),(_0x33613b['_needsUplo'+'ad']||_0x33613b['_needsMipm'+'apsUpload'])&&(_0x581dcc['upload'](this,_0x33613b),_0x33613b['_needsUplo'+'ad']=!(0x1f4c+-0x7b8+-0x5*0x4b7),_0x33613b['_needsMipm'+'apsUpload']=!(-0x154f+-0x2067*0x1+-0x35b7*-0x1))):this['bindTextur'+'eOnUnit'](_0x33613b,_0x117bd2);}['createVert'+'exArray'](_0x62bacc){let _0x1b040a,_0x485647;const _0x51ea27=_0x62bacc['length']>0x21c5+0x2302*0x1+-0x44c6;if(_0x51ea27){_0x1b040a='';for(let _0x1f5d6a=-0x16e+-0xb7*-0x10+-0xa02;_0x1f5d6a<_0x62bacc['length'];_0x1f5d6a++){const _0x534bcc=_0x62bacc[_0x1f5d6a];_0x1b040a+=_0x534bcc['id']+_0x534bcc['format']['renderingH'+'ash'];}_0x485647=this['_vaoMap']['get'](_0x1b040a);}if(!_0x485647){const _0x169aaf=this['gl'];_0x485647=_0x169aaf['createVert'+'exArray'](),_0x169aaf['bindVertex'+'Array'](_0x485647),_0x169aaf['bindBuffer'](_0x169aaf['ELEMENT_AR'+'RAY_BUFFER'],null);let _0x3fbfc7=!(0x1b1c+-0x2*-0x114a+-0x3daf);for(let _0xa461da=-0x2*0x5c+0x1*-0x157d+0x1635;_0xa461da<_0x62bacc['length'];_0xa461da++){const _0x20cd32=_0x62bacc[_0xa461da];_0x169aaf['bindBuffer'](_0x169aaf['ARRAY_BUFF'+'ER'],_0x20cd32['impl']['bufferId']);const _0x3dd06b=_0x20cd32['format']['elements'];for(let _0x3d404e=-0x1fd5+0x14a7+0xb2e;_0x3d404e<_0x3dd06b['length'];_0x3d404e++){const _0x350557=_0x3dd06b[_0x3d404e],_0x257ed7=Le[_0x350557['name']];_0x257ed7===0x4*-0x895+0x102b+-0x1*-0x1229&&(_0x3fbfc7=!(0x685*-0x2+-0x1d16+0x544*0x8)),_0x350557['asInt']?_0x169aaf['vertexAttr'+'ibIPointer'](_0x257ed7,_0x350557['numCompone'+'nts'],this['glType'][_0x350557['dataType']],_0x350557['stride'],_0x350557['offset']):_0x169aaf['vertexAttr'+'ibPointer'](_0x257ed7,_0x350557['numCompone'+'nts'],this['glType'][_0x350557['dataType']],_0x350557['normalize'],_0x350557['stride'],_0x350557['offset']),_0x169aaf['enableVert'+'exAttribAr'+'ray'](_0x257ed7),_0x20cd32['format']['instancing']&&_0x169aaf['vertexAttr'+'ibDivisor'](_0x257ed7,0x1024+-0x4*0x744+0x1*0xced);}}_0x169aaf['bindVertex'+'Array'](null),_0x169aaf['bindBuffer'](_0x169aaf['ARRAY_BUFF'+'ER'],null),_0x51ea27&&this['_vaoMap']['set'](_0x1b040a,_0x485647),_0x3fbfc7||w['warn']('No\x20vertex\x20'+'attribute\x20'+'is\x20mapped\x20'+'to\x20locatio'+'n\x200,\x20which'+'\x20might\x20cau'+'se\x20compati'+'bility\x20iss'+'ues\x20on\x20Saf'+'ari\x20on\x20Mac'+'OS\x20-\x20pleas'+'e\x20use\x20attr'+'ibute\x20SEMA'+'NTIC_POSIT'+'ION\x20or\x20SEM'+'ANTIC_ATTR'+'15');}return _0x485647;}['unbindVert'+'exArray'](){this['boundVao']&&(this['boundVao']=null,this['gl']['bindVertex'+'Array'](null));}['setBuffers'](_0x5c1c5b){const _0x381688=this['gl'];let _0xcd9e30;if(this['vertexBuff'+'ers']['length']===0x924+0x1d32+0xcc7*-0x3){const _0x527ef3=this['vertexBuff'+'ers'][-0xd63+-0x1d2a+0x2a8d*0x1];w['assert'](_0x527ef3['device']===this,'The\x20Vertex'+'Buffer\x20was'+'\x20not\x20creat'+'ed\x20using\x20c'+'urrent\x20Gra'+'phicsDevic'+'e'),_0x527ef3['impl']['vao']||(_0x527ef3['impl']['vao']=this['createVert'+'exArray'](this['vertexBuff'+'ers'])),_0xcd9e30=_0x527ef3['impl']['vao'];}else _0xcd9e30=this['createVert'+'exArray'](this['vertexBuff'+'ers']);this['boundVao']!==_0xcd9e30&&(this['boundVao']=_0xcd9e30,_0x381688['bindVertex'+'Array'](_0xcd9e30));const _0x5e62db=_0x5c1c5b?_0x5c1c5b['impl']['bufferId']:null;_0x381688['bindBuffer'](_0x381688['ELEMENT_AR'+'RAY_BUFFER'],_0x5e62db);}['draw'](_0x8b7189,_0x1916c7,_0x485c29,_0x2be49b,_0x116a58=!(-0x1dbf+0x1e53*0x1+0x94*-0x1),_0x52c8be=!(-0x2*-0x63a+0xf33+-0x1ba7*0x1)){const _0x47cf99=this['shader'];if(_0x47cf99&&(this['activateSh'+'ader'](),this['shaderVali'+'d'])){const _0x41d497=this['gl'];_0x116a58&&(w['call'](()=>{var _0x176daf,_0x588583;return this['validateAt'+'tributes'](this['shader'],(_0x176daf=this['vertexBuff'+'ers'][-0x1219+-0x107c*-0x1+0x1*0x19d])==null?void(0x1f50+-0x293+0x7*-0x41b):_0x176daf['format'],(_0x588583=this['vertexBuff'+'ers'][-0x2291+0x2*-0x135b+-0xe*-0x53c])==null?void(0x3*-0xabb+0xf0e+0x1123):_0x588583['format']);}),this['setBuffers'](_0x1916c7));let _0xc8e90=-0x170+0x2109+-0x1f99*0x1;const _0x1a74e8=_0x47cf99['impl']['samplers'];for(let _0x17023a=0x240d+0xa8e+-0xf89*0x3,_0x148435=_0x1a74e8['length'];_0x17023a<_0x148435;_0x17023a++){const _0x582d9c=_0x1a74e8[_0x17023a];let _0xf376c0=_0x582d9c['scopeId']['value'];if(!_0xf376c0){const _0x22480a=_0x582d9c['scopeId']['name'];w['assert'](_0x22480a!=='texture_gr'+'abPass','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27texture'+'_grabPass\x27'+'\x20is\x20not\x20lo'+'nger\x20suppo'+'rted,\x20use\x20'+'\x27uSceneCol'+'orMap\x27\x20ins'+'tead'),w['assert'](_0x22480a!=='uDepthMap','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27uDepthM'+'ap\x27\x20is\x20not'+'\x20longer\x20su'+'pported,\x20u'+'se\x20\x27uScene'+'DepthMap\x27\x20'+'instead'),_0x22480a==='uSceneDept'+'hMap'&&(w['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0xf376c0=fa(this,'white')),_0x22480a==='uSceneColo'+'rMap'&&(w['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0xf376c0=fa(this,'pink')),_0xf376c0||(w['errorOnce']('Shader\x20'+_0x47cf99['name']+'\x20requires\x20'+_0x22480a+('\x20texture\x20w'+'hich\x20was\x20n'+'ot\x20set.\x20Re'+'ndering\x20[')+Q['toString']()+']',_0x47cf99),_0xf376c0=fa(this,'pink'));}if(_0xf376c0 instanceof _e){const _0x2ce542=_0xf376c0;this['setTexture'](_0x2ce542,_0xc8e90),this['renderTarg'+'et']&&this['renderTarg'+'et']['_samples']<-0xb74+-0x1d0b+0x1*0x2881&&(this['renderTarg'+'et']['colorBuffe'+'r']&&this['renderTarg'+'et']['colorBuffe'+'r']===_0x2ce542?w['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20color\x20b'+'uffer\x20as\x20a'+'\x20texture',{'renderTarget':this['renderTarg'+'et'],'texture':_0x2ce542}):this['renderTarg'+'et']['depthBuffe'+'r']&&this['renderTarg'+'et']['depthBuffe'+'r']===_0x2ce542&&w['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20depth\x20b'+'uffer\x20as\x20a'+'\x20texture',{'texture':_0x2ce542})),_0x582d9c['slot']!==_0xc8e90&&(_0x41d497['uniform1i'](_0x582d9c['locationId'],_0xc8e90),_0x582d9c['slot']=_0xc8e90),_0xc8e90++;}else{_0x582d9c['array']['length']=-0x4f*-0x72+0xa4*0x34+-0x447e;const _0x469205=_0xf376c0['length'];for(let _0x1f6048=-0x3*0x283+0x1e4a+-0x16c1;_0x1f6048<_0x469205;_0x1f6048++){const _0x14bc28=_0xf376c0[_0x1f6048];this['setTexture'](_0x14bc28,_0xc8e90),_0x582d9c['array'][_0x1f6048]=_0xc8e90,_0xc8e90++;}_0x41d497['uniform1iv'](_0x582d9c['locationId'],_0x582d9c['array']);}}const _0x4eb798=_0x47cf99['impl']['uniforms'];for(let _0x594c94=0x1d65+0xd8d*0x1+-0x2af2,_0x5bdea6=_0x4eb798['length'];_0x594c94<_0x5bdea6;_0x594c94++){const _0x2b8d7b=_0x4eb798[_0x594c94],_0x4df2df=_0x2b8d7b['scopeId'],_0x2972a7=_0x2b8d7b['version'],_0x4730b9=_0x4df2df['versionObj'+'ect']['version'];if(_0x2972a7['globalId']!==_0x4730b9['globalId']||_0x2972a7['revision']!==_0x4730b9['revision']){_0x2972a7['globalId']=_0x4730b9['globalId'],_0x2972a7['revision']=_0x4730b9['revision'];const _0x4479e6=_0x4df2df['value'];_0x4479e6!=null?this['commitFunc'+'tion'][_0x2b8d7b['dataType']](_0x2b8d7b,_0x4479e6):w['warnOnce']('Shader\x20['+_0x47cf99['label']+(']\x20requires'+'\x20uniform\x20[')+_0x2b8d7b['scopeId']['name']+(']\x20which\x20ha'+'s\x20not\x20been'+'\x20set,\x20whil'+'e\x20renderin'+'g\x20[')+Q['toString']()+']');}}this['transformF'+'eedbackBuf'+'fer']&&(_0x41d497['bindBuffer'+'Base'](_0x41d497['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],-0x92*-0x13+-0x2*-0xf86+-0x29e2,this['transformF'+'eedbackBuf'+'fer']['impl']['bufferId']),_0x41d497['beginTrans'+'formFeedba'+'ck'](_0x41d497['POINTS']));const _0x4d898f=this['glPrimitiv'+'e'][_0x8b7189['type']],_0xcbdea6=_0x8b7189['count'];if(_0x8b7189['indexed']){w['assert'](_0x1916c7['device']===this,'The\x20IndexB'+'uffer\x20was\x20'+'not\x20create'+'d\x20using\x20cu'+'rrent\x20Grap'+'hicsDevice');const _0x6b82d4=_0x1916c7['impl']['glFormat'],_0xc6a00f=_0x8b7189['base']*_0x1916c7['bytesPerIn'+'dex'];_0x485c29>-0x1cb6+0x192b+0x38b?_0x41d497['drawElemen'+'tsInstance'+'d'](_0x4d898f,_0xcbdea6,_0x6b82d4,_0xc6a00f,_0x485c29):_0x41d497['drawElemen'+'ts'](_0x4d898f,_0xcbdea6,_0x6b82d4,_0xc6a00f);}else{const _0x72e286=_0x8b7189['base'];_0x485c29>0xda0+-0x141d*-0x1+-0x21bd?_0x41d497['drawArrays'+'Instanced'](_0x4d898f,_0x72e286,_0xcbdea6,_0x485c29):_0x41d497['drawArrays'](_0x4d898f,_0x72e286,_0xcbdea6);}this['transformF'+'eedbackBuf'+'fer']&&(_0x41d497['endTransfo'+'rmFeedback'](),_0x41d497['bindBuffer'+'Base'](_0x41d497['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],-0x15f2+0x1a1a+-0x428,null)),this['_drawCalls'+'PerFrame']++,this['_primsPerF'+'rame'][_0x8b7189['type']]+=_0x8b7189['count']*(_0x485c29>0x2441*0x1+-0x2257+-0x1e9?_0x485c29:-0x1ea5+-0x515*0x4+0x32fa);}_0x52c8be&&this['clearVerte'+'xBuffer']();}['clear'](_0x35b8fc){const _0x1793e9=this['defaultCle'+'arOptions'];_0x35b8fc=_0x35b8fc||_0x1793e9;const _0x534a77=_0x35b8fc['flags']??_0x1793e9['flags'];if(_0x534a77!==-0x1d44+0xebb+0x1*0xe89){const _0x38025e=this['gl'];if(_0x534a77&jo){const _0x22a306=_0x35b8fc['color']??_0x1793e9['color'],_0x18ff2c=_0x22a306[-0x8*0xa4+0x14e8+-0xfc8*0x1],_0x53b606=_0x22a306[-0x55*0x3a+0x1c99+0xa*-0xef],_0x199a8a=_0x22a306[0x2268+-0xdd1+-0x1*0x1495],_0xcae5ab=_0x22a306[-0x16c0+-0x61a+0x1cdd],_0x302066=this['clearColor'];(_0x18ff2c!==_0x302066['r']||_0x53b606!==_0x302066['g']||_0x199a8a!==_0x302066['b']||_0xcae5ab!==_0x302066['a'])&&(this['gl']['clearColor'](_0x18ff2c,_0x53b606,_0x199a8a,_0xcae5ab),this['clearColor']['set'](_0x18ff2c,_0x53b606,_0x199a8a,_0xcae5ab)),this['setBlendSt'+'ate'](pt['NOBLEND']);}if(_0x534a77&Yo){const _0x4b0e56=_0x35b8fc['depth']??_0x1793e9['depth'];_0x4b0e56!==this['clearDepth']&&(this['gl']['clearDepth'](_0x4b0e56),this['clearDepth']=_0x4b0e56),this['setDepthSt'+'ate'](Yt['WRITEDEPTH']);}if(_0x534a77&ch){const _0x34f776=_0x35b8fc['stencil']??_0x1793e9['stencil'];_0x34f776!==this['clearStenc'+'il']&&(this['gl']['clearStenc'+'il'](_0x34f776),this['clearStenc'+'il']=_0x34f776),_0x38025e['stencilMas'+'k'](0x2522+-0x457*-0x1+0x6*-0x6bf),this['stencilWri'+'teMaskFron'+'t']=-0x3*0x5c9+-0x431+0x168b,this['stencilWri'+'teMaskBack']=-0xaf1+0x1*-0x7f8+0x13e8;}_0x38025e['clear'](this['glClearFla'+'g'][_0x534a77]);}}['submit'](){this['gl']['flush']();}['readPixels'](_0x3185d4,_0x3efef5,_0xc40e6f,_0x5725ff,_0x334ed7){const _0x2171d7=this['gl'];_0x2171d7['readPixels'](_0x3185d4,_0x3efef5,_0xc40e6f,_0x5725ff,_0x2171d7['RGBA'],_0x2171d7['UNSIGNED_B'+'YTE'],_0x334ed7);}['clientWait'+'Async'](_0x1b5156,_0x3efe7c){const _0x597412=this['gl'],_0x22ca0a=_0x597412['fenceSync'](_0x597412['SYNC_GPU_C'+'OMMANDS_CO'+'MPLETE'],-0xe20+-0x1f9a+-0x6*-0x79f);return this['submit'](),new Promise((_0x2c2b5b,_0x5dccd1)=>{function _0x27c0d2(){const _0x2bbbc8=_0x597412['clientWait'+'Sync'](_0x22ca0a,_0x1b5156,0x967+-0x151c*-0x1+-0x1e83);_0x2bbbc8===_0x597412['TIMEOUT_EX'+'PIRED']?setTimeout(_0x27c0d2,_0x3efe7c):(_0x597412['deleteSync'](_0x22ca0a),_0x2bbbc8===_0x597412['WAIT_FAILE'+'D']?_0x5dccd1(new Error('webgl\x20clie'+'ntWaitSync'+'\x20sync\x20fail'+'ed')):_0x2c2b5b());}_0x27c0d2();});}async['readPixels'+'Async'](_0x4e04e4,_0x2781d8,_0x5ab5e4,_0x550f79,_0x185fd8){var _0x5cdf45;const _0x18f060=this['gl'],_0x39ca7a=(_0x5cdf45=this['renderTarg'+'et']['colorBuffe'+'r'])==null?void(-0x1a8a+0x258e+0xeb*-0xc):_0x5cdf45['impl'],_0x36d950=(_0x39ca7a==null?void(0x15ca+-0x52*0x3+0x14d4*-0x1):_0x39ca7a['_glFormat'])??_0x18f060['RGBA'],_0x2e368a=(_0x39ca7a==null?void(0x12cc+-0x59d*0x2+-0x3*0x286):_0x39ca7a['_glPixelTy'+'pe'])??_0x18f060['UNSIGNED_B'+'YTE'],_0x38c1ec=_0x18f060['createBuff'+'er']();return _0x18f060['bindBuffer'](_0x18f060['PIXEL_PACK'+'_BUFFER'],_0x38c1ec),_0x18f060['bufferData'](_0x18f060['PIXEL_PACK'+'_BUFFER'],_0x185fd8['byteLength'],_0x18f060['STREAM_REA'+'D']),_0x18f060['readPixels'](_0x4e04e4,_0x2781d8,_0x5ab5e4,_0x550f79,_0x36d950,_0x2e368a,-0x17f8+0x26e6+-0xeee),_0x18f060['bindBuffer'](_0x18f060['PIXEL_PACK'+'_BUFFER'],null),await this['clientWait'+'Async'](-0x2b3+-0x1e4d+0xc*0x2c0,0x475+-0x1f1a*0x1+0x1ab5),_0x18f060['bindBuffer'](_0x18f060['PIXEL_PACK'+'_BUFFER'],_0x38c1ec),_0x18f060['getBufferS'+'ubData'](_0x18f060['PIXEL_PACK'+'_BUFFER'],0x1*-0x995+0x7a8+0x1ed,_0x185fd8),_0x18f060['bindBuffer'](_0x18f060['PIXEL_PACK'+'_BUFFER'],null),_0x18f060['deleteBuff'+'er'](_0x38c1ec),_0x185fd8;}['readTextur'+'eAsync'](_0x1f5858,_0x37f0a7,_0x155811,_0x269c22,_0x22f470,_0x58a781){const _0x467a29=_0x58a781['face']??-0x21f6+-0x1*-0x19b5+0x841,_0x56c24f=_0x58a781['renderTarg'+'et']??new gt({'colorBuffer':_0x1f5858,'depth':!(-0x7c4+0x9b7+0x6*-0x53),'face':_0x467a29});w['assert'](_0x56c24f['colorBuffe'+'r']===_0x1f5858);const _0x2d11c1=new ArrayBuffer(Xi['calcLevelG'+'puSize'](_0x269c22,_0x22f470,0xb2b*0x1+0x1f74+-0x2a9e,_0x1f5858['_format'])),_0x2000a8=_0x58a781['data']??new(my(_0x1f5858['_format']))(_0x2d11c1);return this['setRenderT'+'arget'](_0x56c24f),this['initRender'+'Target'](_0x56c24f),new Promise((_0x589076,_0x5ab1aa)=>{this['readPixels'+'Async'](_0x37f0a7,_0x155811,_0x269c22,_0x22f470,_0x2000a8)['then'](_0xb1195d=>{_0x58a781['renderTarg'+'et']||_0x56c24f['destroy'](),_0x589076(_0xb1195d);})['catch'](_0x5ab1aa);});}async['writeTextu'+'reAsync'](_0x24c38b,_0x3d6df2,_0x49e531,_0x144243,_0x16a64f,_0x5f16b5){const _0x107113=this['gl'],_0x1f6782=_0x24c38b['impl'],_0x520585=(_0x1f6782==null?void(0xaa3+0x89*-0x22+0x78f):_0x1f6782['_glFormat'])??_0x107113['RGBA'],_0x2eda89=(_0x1f6782==null?void(0xa*0x3e5+0x1ac0+-0x41b2):_0x1f6782['_glPixelTy'+'pe'])??_0x107113['UNSIGNED_B'+'YTE'],_0x3f5317=_0x107113['createBuff'+'er']();_0x107113['bindBuffer'](_0x107113['PIXEL_UNPA'+'CK_BUFFER'],_0x3f5317),_0x107113['bufferData'](_0x107113['PIXEL_UNPA'+'CK_BUFFER'],_0x5f16b5,_0x107113['STREAM_DRA'+'W']),_0x107113['bindTextur'+'e'](_0x107113['TEXTURE_2D'],_0x1f6782['_glTexture']),_0x107113['texSubImag'+'e2D'](_0x107113['TEXTURE_2D'],-0x5*0x377+-0x1*0x474+0x15c7,_0x3d6df2,_0x49e531,_0x144243,_0x16a64f,_0x520585,_0x2eda89,-0x22b4+-0x20ed+0x43a1),_0x107113['bindBuffer'](_0x107113['PIXEL_UNPA'+'CK_BUFFER'],null),_0x24c38b['_needsUplo'+'ad']=!(0x8*-0x192+0x19d8+-0x21*0x67),_0x24c38b['_mipmapsUp'+'loaded']=!(0x252a+-0x86*0x17+0x6d*-0x3b),await this['clientWait'+'Async'](-0x18b3+0x22d5+-0xa22,0x203a+0x1*-0x2211+-0x1e7*-0x1);}['setAlphaTo'+'Coverage'](_0x59118b){this['alphaToCov'+'erage']!==_0x59118b&&(this['alphaToCov'+'erage']=_0x59118b,_0x59118b?this['gl']['enable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']):this['gl']['disable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']));}['setTransfo'+'rmFeedback'+'Buffer'](_0xaf1a2a){if(this['transformF'+'eedbackBuf'+'fer']!==_0xaf1a2a){this['transformF'+'eedbackBuf'+'fer']=_0xaf1a2a;const _0x4b46a0=this['gl'];_0xaf1a2a?(this['feedback']||(this['feedback']=_0x4b46a0['createTran'+'sformFeedb'+'ack']()),_0x4b46a0['bindTransf'+'ormFeedbac'+'k'](_0x4b46a0['TRANSFORM_'+'FEEDBACK'],this['feedback'])):_0x4b46a0['bindTransf'+'ormFeedbac'+'k'](_0x4b46a0['TRANSFORM_'+'FEEDBACK'],null);}}['setRaster'](_0x194d5f){this['raster']!==_0x194d5f&&(this['raster']=_0x194d5f,_0x194d5f?this['gl']['disable'](this['gl']['RASTERIZER'+'_DISCARD']):this['gl']['enable'](this['gl']['RASTERIZER'+'_DISCARD']));}['setStencil'+'Test'](_0x55b37a){if(this['stencil']!==_0x55b37a){const _0x36ba1a=this['gl'];_0x55b37a?_0x36ba1a['enable'](_0x36ba1a['STENCIL_TE'+'ST']):_0x36ba1a['disable'](_0x36ba1a['STENCIL_TE'+'ST']),this['stencil']=_0x55b37a;}}['setStencil'+'Func'](_0x1ff72c,_0x152db5,_0x15e5f9){(this['stencilFun'+'cFront']!==_0x1ff72c||this['stencilRef'+'Front']!==_0x152db5||this['stencilMas'+'kFront']!==_0x15e5f9||this['stencilFun'+'cBack']!==_0x1ff72c||this['stencilRef'+'Back']!==_0x152db5||this['stencilMas'+'kBack']!==_0x15e5f9)&&(this['gl']['stencilFun'+'c'](this['glComparis'+'on'][_0x1ff72c],_0x152db5,_0x15e5f9),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=_0x1ff72c,this['stencilRef'+'Front']=this['stencilRef'+'Back']=_0x152db5,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=_0x15e5f9);}['setStencil'+'FuncFront'](_0x1c2033,_0x2d48a7,_0x37bff9){if(this['stencilFun'+'cFront']!==_0x1c2033||this['stencilRef'+'Front']!==_0x2d48a7||this['stencilMas'+'kFront']!==_0x37bff9){const _0x3fab76=this['gl'];_0x3fab76['stencilFun'+'cSeparate'](_0x3fab76['FRONT'],this['glComparis'+'on'][_0x1c2033],_0x2d48a7,_0x37bff9),this['stencilFun'+'cFront']=_0x1c2033,this['stencilRef'+'Front']=_0x2d48a7,this['stencilMas'+'kFront']=_0x37bff9;}}['setStencil'+'FuncBack'](_0x385ce9,_0x4dbd98,_0x2bb20a){if(this['stencilFun'+'cBack']!==_0x385ce9||this['stencilRef'+'Back']!==_0x4dbd98||this['stencilMas'+'kBack']!==_0x2bb20a){const _0x77cb8f=this['gl'];_0x77cb8f['stencilFun'+'cSeparate'](_0x77cb8f['BACK'],this['glComparis'+'on'][_0x385ce9],_0x4dbd98,_0x2bb20a),this['stencilFun'+'cBack']=_0x385ce9,this['stencilRef'+'Back']=_0x4dbd98,this['stencilMas'+'kBack']=_0x2bb20a;}}['setStencil'+'Operation'](_0x222771,_0x1c4621,_0x3a5215,_0x1b7f49){(this['stencilFai'+'lFront']!==_0x222771||this['stencilZfa'+'ilFront']!==_0x1c4621||this['stencilZpa'+'ssFront']!==_0x3a5215||this['stencilFai'+'lBack']!==_0x222771||this['stencilZfa'+'ilBack']!==_0x1c4621||this['stencilZpa'+'ssBack']!==_0x3a5215)&&(this['gl']['stencilOp'](this['glStencilO'+'p'][_0x222771],this['glStencilO'+'p'][_0x1c4621],this['glStencilO'+'p'][_0x3a5215]),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=_0x222771,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=_0x1c4621,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=_0x3a5215),(this['stencilWri'+'teMaskFron'+'t']!==_0x1b7f49||this['stencilWri'+'teMaskBack']!==_0x1b7f49)&&(this['gl']['stencilMas'+'k'](_0x1b7f49),this['stencilWri'+'teMaskFron'+'t']=_0x1b7f49,this['stencilWri'+'teMaskBack']=_0x1b7f49);}['setStencil'+'OperationF'+'ront'](_0x1b6cd2,_0x3e9454,_0x39ab09,_0x526868){(this['stencilFai'+'lFront']!==_0x1b6cd2||this['stencilZfa'+'ilFront']!==_0x3e9454||this['stencilZpa'+'ssFront']!==_0x39ab09)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['FRONT'],this['glStencilO'+'p'][_0x1b6cd2],this['glStencilO'+'p'][_0x3e9454],this['glStencilO'+'p'][_0x39ab09]),this['stencilFai'+'lFront']=_0x1b6cd2,this['stencilZfa'+'ilFront']=_0x3e9454,this['stencilZpa'+'ssFront']=_0x39ab09),this['stencilWri'+'teMaskFron'+'t']!==_0x526868&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['FRONT'],_0x526868),this['stencilWri'+'teMaskFron'+'t']=_0x526868);}['setStencil'+'OperationB'+'ack'](_0x728d7c,_0x528ce1,_0x3297a3,_0x394e9c){(this['stencilFai'+'lBack']!==_0x728d7c||this['stencilZfa'+'ilBack']!==_0x528ce1||this['stencilZpa'+'ssBack']!==_0x3297a3)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['BACK'],this['glStencilO'+'p'][_0x728d7c],this['glStencilO'+'p'][_0x528ce1],this['glStencilO'+'p'][_0x3297a3]),this['stencilFai'+'lBack']=_0x728d7c,this['stencilZfa'+'ilBack']=_0x528ce1,this['stencilZpa'+'ssBack']=_0x3297a3),this['stencilWri'+'teMaskBack']!==_0x394e9c&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['BACK'],_0x394e9c),this['stencilWri'+'teMaskBack']=_0x394e9c);}['setBlendSt'+'ate'](_0x530954){const _0x538616=this['blendState'];if(!_0x538616['equals'](_0x530954)){const _0x44bd4c=this['gl'],{blend:_0x378ff9,colorOp:_0x3cd736,alphaOp:_0x1897bd,colorSrcFactor:_0x2c18f1,colorDstFactor:_0x27a034,alphaSrcFactor:_0x318de5,alphaDstFactor:_0x119e85}=_0x530954;if(_0x538616['blend']!==_0x378ff9&&(_0x378ff9?_0x44bd4c['enable'](_0x44bd4c['BLEND']):_0x44bd4c['disable'](_0x44bd4c['BLEND'])),_0x538616['colorOp']!==_0x3cd736||_0x538616['alphaOp']!==_0x1897bd){const _0x1b6776=this['glBlendEqu'+'ation'];_0x44bd4c['blendEquat'+'ionSeparat'+'e'](_0x1b6776[_0x3cd736],_0x1b6776[_0x1897bd]);}(_0x538616['colorSrcFa'+'ctor']!==_0x2c18f1||_0x538616['colorDstFa'+'ctor']!==_0x27a034||_0x538616['alphaSrcFa'+'ctor']!==_0x318de5||_0x538616['alphaDstFa'+'ctor']!==_0x119e85)&&_0x44bd4c['blendFuncS'+'eparate'](this['glBlendFun'+'ctionColor'][_0x2c18f1],this['glBlendFun'+'ctionColor'][_0x27a034],this['glBlendFun'+'ctionAlpha'][_0x318de5],this['glBlendFun'+'ctionAlpha'][_0x119e85]),_0x538616['allWrite']!==_0x530954['allWrite']&&this['gl']['colorMask'](_0x530954['redWrite'],_0x530954['greenWrite'],_0x530954['blueWrite'],_0x530954['alphaWrite']),_0x538616['copy'](_0x530954);}}['setBlendCo'+'lor'](_0x1aedaf,_0x53d2eb,_0x170285,_0xae2726){const _0xeb5fd2=this['blendColor'];(_0x1aedaf!==_0xeb5fd2['r']||_0x53d2eb!==_0xeb5fd2['g']||_0x170285!==_0xeb5fd2['b']||_0xae2726!==_0xeb5fd2['a'])&&(this['gl']['blendColor'](_0x1aedaf,_0x53d2eb,_0x170285,_0xae2726),_0xeb5fd2['set'](_0x1aedaf,_0x53d2eb,_0x170285,_0xae2726));}['setStencil'+'State'](_0x5116dc,_0x81cf12){_0x5116dc||_0x81cf12?(this['setStencil'+'Test'](!(0x570+-0x2*-0x439+0xde2*-0x1)),_0x5116dc===_0x81cf12?(this['setStencil'+'Func'](_0x5116dc['func'],_0x5116dc['ref'],_0x5116dc['readMask']),this['setStencil'+'Operation'](_0x5116dc['fail'],_0x5116dc['zfail'],_0x5116dc['zpass'],_0x5116dc['writeMask'])):(_0x5116dc??(_0x5116dc=pi['DEFAULT']),this['setStencil'+'FuncFront'](_0x5116dc['func'],_0x5116dc['ref'],_0x5116dc['readMask']),this['setStencil'+'OperationF'+'ront'](_0x5116dc['fail'],_0x5116dc['zfail'],_0x5116dc['zpass'],_0x5116dc['writeMask']),_0x81cf12??(_0x81cf12=pi['DEFAULT']),this['setStencil'+'FuncBack'](_0x81cf12['func'],_0x81cf12['ref'],_0x81cf12['readMask']),this['setStencil'+'OperationB'+'ack'](_0x81cf12['fail'],_0x81cf12['zfail'],_0x81cf12['zpass'],_0x81cf12['writeMask']))):this['setStencil'+'Test'](!(-0x1be2+0x20b3+-0x4d0));}['setDepthSt'+'ate'](_0x340008){const _0x162f4b=this['depthState'];if(!_0x162f4b['equals'](_0x340008)){const _0x51c976=this['gl'],_0x27c98e=_0x340008['write'];_0x162f4b['write']!==_0x27c98e&&_0x51c976['depthMask'](_0x27c98e);let {func:_0x19bc73,test:_0x9ac82a}=_0x340008;!_0x9ac82a&&_0x27c98e&&(_0x9ac82a=!(0x1e6e+-0x355*-0x1+-0x2b*0xc9),_0x19bc73=Wi),_0x162f4b['func']!==_0x19bc73&&_0x51c976['depthFunc'](this['glComparis'+'on'][_0x19bc73]),_0x162f4b['test']!==_0x9ac82a&&(_0x9ac82a?_0x51c976['enable'](_0x51c976['DEPTH_TEST']):_0x51c976['disable'](_0x51c976['DEPTH_TEST']));const {depthBias:_0x12b246,depthBiasSlope:_0x577fb4}=_0x340008;_0x12b246||_0x577fb4?(this['depthBiasE'+'nabled']||(this['depthBiasE'+'nabled']=!(-0x3f*0x16+0x6d*-0x23+0x1451),this['gl']['enable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x51c976['polygonOff'+'set'](_0x577fb4,_0x12b246)):this['depthBiasE'+'nabled']&&(this['depthBiasE'+'nabled']=!(0x487*0x3+-0x7*-0x2d3+0x2159*-0x1),this['gl']['disable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x162f4b['copy'](_0x340008);}}['setCullMod'+'e'](_0x7d79ac){if(this['cullMode']!==_0x7d79ac){if(_0x7d79ac===bt)this['gl']['disable'](this['gl']['CULL_FACE']);else{this['cullMode']===bt&&this['gl']['enable'](this['gl']['CULL_FACE']);const _0xbfc733=this['glCull'][_0x7d79ac];this['cullFace']!==_0xbfc733&&(this['gl']['cullFace'](_0xbfc733),this['cullFace']=_0xbfc733);}this['cullMode']=_0x7d79ac;}}['setShader'](_0x19ae00,_0x27a403=!(0x12*0x1d3+0x1*0x121c+-0x32f1)){_0x19ae00!==this['shader']&&(this['shader']=_0x19ae00,this['shaderAsyn'+'cCompile']=_0x27a403,this['shaderVali'+'d']=void(-0x26c7+-0x19c3+0x408a),this['_shaderSwi'+'tchesPerFr'+'ame']++);}['activateSh'+'ader'](){const {shader:_0x37973f}=this,{impl:_0x592188}=_0x37973f;this['shaderVali'+'d']===void(0x80c+-0x13f9+0xbed)&&(_0x37973f['failed']?this['shaderVali'+'d']=!(0x25*0x4+-0x24*-0xf+0x2af*-0x1):_0x37973f['ready']||(this['shaderAsyn'+'cCompile']?_0x592188['isLinked'](this)?_0x592188['finalize'](this,_0x37973f)||(_0x37973f['failed']=!(-0x1*0x9df+0x3f8+-0x5e7*-0x1),this['shaderVali'+'d']=!(-0x5de*-0x4+-0x18ea*0x1+0x173)):this['shaderVali'+'d']=!(-0x425*-0x1+0x163*0x12+-0x2*0xe8d):_0x592188['finalize'](this,_0x37973f)||(_0x37973f['failed']=!(-0x25*0x97+-0x174d+0x98*0x4c),this['shaderVali'+'d']=!(-0xdcd+0x228e*-0x1+0x305c)))),this['shaderVali'+'d']===void(-0x80b+-0x2*-0x492+-0x119)&&(this['gl']['useProgram'](_0x592188['glProgram']),this['shaderVali'+'d']=!(-0x4f*0x47+0x1d89+-0x7a0));}['clearVerte'+'xArrayObje'+'ctCache'](){const _0x13bee7=this['gl'];this['_vaoMap']['forEach']((_0x3d6950,_0x1ad0ab,_0x527aba)=>{_0x13bee7['deleteVert'+'exArray'](_0x3d6950);}),this['_vaoMap']['clear']();}set['fullscreen'](_0x2bb0d2){_0x2bb0d2?this['gl']['canvas']['requestFul'+'lscreen']():document['exitFullsc'+'reen']();}get['fullscreen'](){return!!document['fullscreen'+'Element'];}['debugLoseC'+'ontext'](_0x385a47=0xc*-0x28f+0x19*-0x39+0x5*0x755){const _0xea090c=this['gl']['getExtensi'+'on']('WEBGL_lose'+'_context');_0xea090c['loseContex'+'t'](),setTimeout(()=>_0xea090c['restoreCon'+'text'](),_0x385a47);}}let nw=-0x10f3+-0x22d9+0x2*0x19e6;class br{constructor(_0x18f87d,_0x381a92,_0x4716c8,_0x1541f3=ms,_0x26bf8c,_0x3d14ac){this['device']=_0x18f87d,this['format']=_0x381a92,this['numIndices']=_0x4716c8,this['usage']=_0x1541f3,this['id']=nw++,this['impl']=_0x18f87d['createInde'+'xBufferImp'+'l'](this,_0x3d14ac);const _0x1deafa=hT[_0x381a92];this['bytesPerIn'+'dex']=_0x1deafa,this['numBytes']=this['numIndices']*_0x1deafa,_0x26bf8c?this['setData'](_0x26bf8c):this['storage']=new ArrayBuffer(this['numBytes']),this['adjustVram'+'SizeTracki'+'ng'](_0x18f87d['_vram'],this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x3af15d=this['device'],_0x4b0cde=_0x3af15d['buffers']['indexOf'](this);_0x4b0cde!==-(0x2286+-0x20cb*-0x1+0x8*-0x86a)&&_0x3af15d['buffers']['splice'](_0x4b0cde,0x2b*-0x5+-0x7*-0x45f+0x9eb*-0x3),this['device']['indexBuffe'+'r']===this&&(this['device']['indexBuffe'+'r']=null),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x3af15d),this['adjustVram'+'SizeTracki'+'ng'](_0x3af15d['_vram'],-this['storage']['byteLength']));}['adjustVram'+'SizeTracki'+'ng'](_0x306c97,_0x590b6f){w['trace'](j0,this['id']+'\x20size:\x20'+_0x590b6f+'\x20vram.ib:\x20'+_0x306c97['ib']+'\x20=>\x20'+(_0x306c97['ib']+_0x590b6f)),_0x306c97['ib']+=_0x590b6f;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getNumIndi'+'ces'](){return this['numIndices'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0xa87328){return _0xa87328['byteLength']!==this['numBytes']?(w['error']('IndexBuffe'+'r:\x20wrong\x20i'+'nitial\x20dat'+'a\x20size:\x20ex'+'pected\x20'+this['numBytes']+',\x20got\x20'+_0xa87328['byteLength']),!(0x2ce+-0x349*0xb+-0x10ab*-0x2)):(this['storage']=_0xa87328,this['unlock'](),!(0xaed+-0x1*0x18b6+0x1*0xdc9));}['_lockTyped'+'Array'](){const _0x5af26d=this['lock']();return this['format']===wr?new Uint32Array(_0x5af26d):this['format']===Yi?new Uint16Array(_0x5af26d):new Uint8Array(_0x5af26d);}['writeData'](_0x2211b9,_0x355643){const _0x5d6b30=this['_lockTyped'+'Array']();if(_0x2211b9['length']>_0x355643){if(ArrayBuffer['isView'](_0x2211b9))_0x2211b9=_0x2211b9['subarray'](0x1af*0x5+-0x1*-0x150b+-0x1d76,_0x355643),_0x5d6b30['set'](_0x2211b9);else{for(let _0x39e31d=-0x3*0x32b+-0x3b*-0xa0+-0x1b5f;_0x39e31d<_0x355643;_0x39e31d++)_0x5d6b30[_0x39e31d]=_0x2211b9[_0x39e31d];}}else _0x5d6b30['set'](_0x2211b9);this['unlock']();}['readData'](_0x46c35e){const _0xd4fb06=this['_lockTyped'+'Array'](),_0x328336=this['numIndices'];if(ArrayBuffer['isView'](_0x46c35e))_0x46c35e['set'](_0xd4fb06);else{_0x46c35e['length']=0x20c1+-0x5d7+0x6a*-0x41;for(let _0xf22b07=0x598*-0x6+0x1bb2*-0x1+-0x3d42*-0x1;_0xf22b07<_0x328336;_0xf22b07++)_0x46c35e[_0xf22b07]=_0xd4fb06[_0xf22b07];}return _0x328336;}}class ow{constructor(){h(this,'clearValue',new ie(-0x15*-0x9+-0x2cc*-0x6+-0x1185,0x266b+0x64a*-0x2+-0x52b*0x5,-0x607+0x3*-0x3d1+0x117a,0x19cf+0x1*-0x112d+0x8a1*-0x1)),h(this,'clearValue'+'Linear',new ie(-0x1bae+-0x1a4d*-0x1+0x161,0x1191+-0x16*0xaa+0x1*-0x2f5,-0x8d1+0x332+0x59f,-0x163*0x2+-0xea3+0x116a)),h(this,'clear',!(0xaa8+0x3*0xb2a+-0x2c25)),h(this,'store',!(-0x89+0xbd2*0x2+-0x171a)),h(this,'resolve',!(-0x1*0x1b29+0x61d*0x1+0xc*0x1c1)),h(this,'genMipmaps',!(0x671+0x3a9*0x1+-0xa19));}}class lw{constructor(){h(this,'clearDepth'+'Value',-0x2*-0x36b+-0x165b+0xf86),h(this,'clearStenc'+'ilValue',-0x55*0x41+0x3d1*0x4+-0x21*-0x31),h(this,'clearDepth',!(-0x44*-0x93+-0xb90+0x57f*-0x5)),h(this,'clearStenc'+'il',!(-0x7*-0x4bd+-0xa99*-0x1+0x2bc3*-0x1)),h(this,'storeDepth',!(0x1f42+0xa*0x2de+-0x3bed)),h(this,'resolveDep'+'th',!(0x248+-0x1fe8+0x1da1)),h(this,'storeStenc'+'il',!(-0x8d4+-0x419+0x1*0xcee));}}class ys{constructor(_0x11301b){h(this,'_name'),h(this,'device'),h(this,'_enabled',!(0x1a64+-0x10c1*0x2+-0x1*-0x71e)),h(this,'_skipStart',!(-0x4a*-0x5d+-0x4*0x45b+0x10d*-0x9)),h(this,'_skipEnd',!(0x23a+-0x436+0x1*0x1fd)),h(this,'executeEna'+'bled',!(-0x175*-0x6+0x45d*0x6+0x1e*-0x12a)),h(this,'renderTarg'+'et'),h(this,'_options'),h(this,'samples',0x1*0x133f+-0x513*-0x5+-0x2c9e),h(this,'colorArray'+'Ops',[]),h(this,'depthStenc'+'ilOps'),h(this,'requiresCu'+'bemaps',!(-0xdbc+0x1194+-0x18*0x29)),h(this,'fullSizeCl'+'earRect',!(-0x165d*0x1+-0x7*0xe5+-0x394*-0x8)),h(this,'beforePass'+'es',[]),h(this,'afterPasse'+'s',[]),(w['assert'](_0x11301b),this['device']=_0x11301b);}get['colorOps'](){return this['colorArray'+'Ops'][0xe79+0x1*-0x136d+-0x1*-0x4f4];}set['name'](_0x913d7d){this['_name']=_0x913d7d;}get['name'](){return this['_name']||(this['_name']=this['constructo'+'r']['name']),this['_name'];}set['scaleX'](_0x377d30){w['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleX']=_0x377d30;}get['scaleX'](){return this['_options']['scaleX'];}set['scaleY'](_0x1b8b6e){w['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleY']=_0x1b8b6e;}get['scaleY'](){return this['_options']['scaleY'];}set['options'](_0x3b9efa){this['_options']=_0x3b9efa,_0x3b9efa&&(this['scaleX']=this['scaleX']??-0x1*0x1a5b+-0x1*-0x1663+0x3f9,this['scaleY']=this['scaleY']??0x1*0x1ded+-0x2*0x137+-0x1b7e);}get['options'](){return this['_options'];}['init'](_0x2b2801=null,_0xd08f2a){this['options']=_0xd08f2a,this['renderTarg'+'et']=_0x2b2801,this['samples']=Math['max'](this['renderTarg'+'et']?this['renderTarg'+'et']['samples']:this['device']['samples'],0xaef*0x1+0x26c1+-0x31af),this['allocateAt'+'tachments'](),this['postInit']();}['allocateAt'+'tachments'](){var _0x2d683d,_0x3db739,_0x527392,_0x2e2702;const _0x3d6e01=this['renderTarg'+'et'];this['depthStenc'+'ilOps']=new lw(),_0x3d6e01!=null&&_0x3d6e01['depthBuffe'+'r']&&(this['depthStenc'+'ilOps']['storeDepth']=!(-0x1da*0xa+0xe35+-0x1*-0x44f));const _0xda30ac=_0x3d6e01?((_0x2d683d=_0x3d6e01['_colorBuff'+'ers'])==null?void(0xbff+-0xcd9+-0x6d*-0x2):_0x2d683d['length'])??0xa7*-0x19+0x21c*-0x5+0x271*0xb:0x190d+0xc*0x118+-0x262c;this['colorArray'+'Ops']['length']=-0x2595+0x1f9a+0x1*0x5fb;for(let _0x44f71e=0x1350+0x1183*-0x1+0x1cd*-0x1;_0x44f71e<_0xda30ac;_0x44f71e++){const _0x215efe=new ow();this['colorArray'+'Ops'][_0x44f71e]=_0x215efe,this['samples']===-0x3*0xa75+0x24f1*0x1+-0x591&&(_0x215efe['store']=!(-0x1*0x698+-0x732+0x6e5*0x2),_0x215efe['resolve']=!(-0x1*-0x22d3+0x1616+-0x38e8));const _0x2fdf53=(_0x527392=(_0x3db739=this['renderTarg'+'et'])==null?void(0x1*0x16ad+-0x19db+-0x32e*-0x1):_0x3db739['_colorBuff'+'ers'])==null?void(-0x2*-0x1346+0x221f+-0x48ab):_0x527392[_0x44f71e];if((_0x2e2702=this['renderTarg'+'et'])!=null&&_0x2e2702['mipmaps']&&(_0x2fdf53!=null&&_0x2fdf53['mipmaps'])){const _0x1fe431=dn(_0x2fdf53['_format']);_0x215efe['genMipmaps']=!_0x1fe431;}}}['destroy'](){}['postInit'](){}['frameUpdat'+'e'](){if(this['_options']&&this['renderTarg'+'et']){const _0x2c7bf4=this['_options']['resizeSour'+'ce']??this['device']['backBuffer'],_0x613ed0=Math['floor'](_0x2c7bf4['width']*this['scaleX']),_0x980c27=Math['floor'](_0x2c7bf4['height']*this['scaleY']);this['renderTarg'+'et']['resize'](_0x613ed0,_0x980c27);}}['before'](){}['execute'](){}['after'](){}['onEnable'](){}['onDisable'](){}set['enabled'](_0x14a5ea){this['_enabled']!==_0x14a5ea&&(this['_enabled']=_0x14a5ea,_0x14a5ea?this['onEnable']():this['onDisable']());}get['enabled'](){return this['_enabled'];}['setClearCo'+'lor'](_0x218334){const _0x41cbf6=this['colorArray'+'Ops']['length'];for(let _0x4f1cc7=-0x11ca+-0x15*-0x8b+-0x1*-0x663;_0x4f1cc7<_0x41cbf6;_0x4f1cc7++){const _0xb917e9=this['colorArray'+'Ops'][_0x4f1cc7];_0x218334&&(_0xb917e9['clearValue']['copy'](_0x218334),_0xb917e9['clearValue'+'Linear']['linear'](_0x218334)),_0xb917e9['clear']=!!_0x218334;}}['setClearDe'+'pth'](_0x1d6eaa){_0x1d6eaa&&(this['depthStenc'+'ilOps']['clearDepth'+'Value']=_0x1d6eaa),this['depthStenc'+'ilOps']['clearDepth']=_0x1d6eaa!==void(0x240d+-0xb54+-0x18b9);}['setClearSt'+'encil'](_0x7fceae){_0x7fceae&&(this['depthStenc'+'ilOps']['clearStenc'+'ilValue']=_0x7fceae),this['depthStenc'+'ilOps']['clearStenc'+'il']=_0x7fceae!==void(0xfa2+0x1fc0+-0x2f62);}['render'](){if(this['enabled']){const _0x385f6c=this['device'],_0x5988fe=this['renderTarg'+'et']!==void(0x1712+-0x2a7+0x1*-0x146b);w['call'](()=>{this['log'](_0x385f6c,_0x385f6c['renderPass'+'Index']);}),this['before'](),this['executeEna'+'bled']&&(_0x5988fe&&!this['_skipStart']&&_0x385f6c['startRende'+'rPass'](this),this['execute'](),_0x5988fe&&!this['_skipEnd']&&_0x385f6c['endRenderP'+'ass'](this)),this['after'](),_0x385f6c['renderPass'+'Index']++;}}['log'](_0x5bcfff,_0x5be260=-0x1*0xf29+0x2*-0xb75+0x2613){var _0x1321bb,_0x4a34c8,_0x9fa9f4;if(mi['get'](Pm)||mi['get'](cn)){const _0x13be3b=this['renderTarg'+'et']??(this['renderTarg'+'et']===null?_0x5bcfff['backBuffer']:null),_0x544cd2=!!(_0x13be3b!=null&&_0x13be3b['impl']['assignedCo'+'lorTexture'])||(_0x13be3b==null?void(-0x1e05+-0x1f34+-0x1*-0x3d39):_0x13be3b['impl']['suppliedCo'+'lorFramebu'+'ffer'])!==void(0x282*0x4+-0x18f+-0x879),_0x32b899=((_0x1321bb=_0x13be3b==null?void(0x1c76+-0x177b+-0x19*0x33):_0x13be3b['_colorBuff'+'ers'])==null?void(0x43*-0x1d+0x2e7+0x4b0):_0x1321bb['length'])??(_0x544cd2?-0x1609*0x1+-0x1858+0x2e62:-0x1dfb+-0x24ae+-0x42a9*-0x1),_0x1fc58e=_0x13be3b==null?void(-0x1017+0x23f3*-0x1+0x1a05*0x2):_0x13be3b['depth'],_0x240611=_0x13be3b==null?void(0x1*0x1b41+0x94+-0x3*0x947):_0x13be3b['stencil'],_0x280455=_0x13be3b==null?void(0x1*0x10cf+0xb95*0x1+-0x1c64):_0x13be3b['mipLevel'],_0x273190=_0x13be3b?'\x20RT:\x20'+(_0x13be3b?_0x13be3b['name']:'NULL')+'\x20'+(_0x32b899>-0x14a2+-0x5*0x617+0x5ad*0x9?'[Color'+(_0x32b899>-0x19d9+0x2518+-0xb3e?'\x20x\x20'+_0x32b899:'')+']':'')+(_0x1fc58e?'[Depth]':'')+(_0x240611?'[Stencil]':'')+'\x20'+_0x13be3b['width']+'\x20x\x20'+_0x13be3b['height']+(this['samples']>-0x22f6+0x1820+0xad6*0x1?'\x20samples:\x20'+this['samples']:'')+(_0x280455>-0xb2d+0x145+0x8*0x13d?'\x20mipLevel:'+'\x20'+_0x280455:''):'',_0x14f777=this['_skipStart']?'++':_0x5be260['toString']()['padEnd'](0x1141+-0x262+-0xedd,'\x20');w['trace'](Pm,_0x14f777+':\x20'+this['name']['padEnd'](0x38c*-0x4+0x1*0x1639+-0x7f5*0x1,'\x20')+(this['executeEna'+'bled']?'':'\x20DISABLED\x20')+_0x273190['padEnd'](-0xf74+0x1*-0x8d4+0x2b6*0x9));for(let _0x25990d=0x1c76+-0xa01+-0x1275;_0x25990d<_0x32b899;_0x25990d++){const _0x4179b9=this['colorArray'+'Ops'][_0x25990d],_0xa466e1=(_0x4a34c8=Nt['get'](_0x544cd2?_0x5bcfff['backBuffer'+'Format']:_0x13be3b['getColorBu'+'ffer'](_0x25990d)['format']))==null?void(-0x1f36+-0x1*-0x1c1d+0x3d*0xd):_0x4a34c8['name'];w['trace'](cn,'\x20\x20\x20\x20color['+_0x25990d+']:\x20'+(_0x4179b9['clear']?'clear':'load')+'->'+(_0x4179b9['store']?'store':'discard')+'\x20'+(_0x4179b9['resolve']?'resolve\x20':'')+(_0x4179b9['genMipmaps']?'mipmaps\x20':'')+'\x20[format:\x20'+_0xa466e1+']\x20'+(_0x4179b9['clear']?'[clear:\x20'+_0x4179b9['clearValue']['toString'](!(-0x2f*-0xd3+-0x332*-0x5+-0x36b7),!(0x3b*-0x1+0x19d*0x1+-0x6*0x3b))+']':''));}if(this['depthStenc'+'ilOps']){const _0x5ce5f0=''+(_0x13be3b['depthBuffe'+'r']?'\x20[format:\x20'+((_0x9fa9f4=Nt['get'](_0x13be3b['depthBuffe'+'r']['format']))==null?void(0x847*-0x2+0xde*0x2b+-0x14bc):_0x9fa9f4['name'])+']':'');_0x1fc58e&&w['trace'](cn,'\x20\x20\x20\x20depthO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearDepth']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeDepth']?'store':'discard')+(this['depthStenc'+'ilOps']['resolveDep'+'th']?'\x20resolve':'')+_0x5ce5f0+(this['depthStenc'+'ilOps']['clearDepth']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearDepth'+'Value']+']':'')),_0x240611&&w['trace'](cn,'\x20\x20\x20\x20stencO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeStenc'+'il']?'store':'discard')+_0x5ce5f0+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearStenc'+'ilValue']+']':''));}}}}function cw(_0x39e1d6){this['array'][this['index']]=_0x39e1d6;}function hw(_0x49a231,_0x242df8){this['array'][this['index']]=_0x49a231,this['array'][this['index']+(0x26fb+0xe7e+0x1d*-0x1d8)]=_0x242df8;}function dw(_0x40d20e,_0x55144f,_0x1f2a27){this['array'][this['index']]=_0x40d20e,this['array'][this['index']+(-0x208c+0x197d+-0x388*-0x2)]=_0x55144f,this['array'][this['index']+(0x5*-0x359+-0x1e4f*-0x1+-0xd90)]=_0x1f2a27;}function fw(_0xb13daf,_0x4e1887,_0x171df7,_0x12f6b5){this['array'][this['index']]=_0xb13daf,this['array'][this['index']+(-0x5f7*0x2+0x18bc+-0xccd)]=_0x4e1887,this['array'][this['index']+(-0x3cd*0x5+-0x14dd+0x20*0x13f)]=_0x171df7,this['array'][this['index']+(0x5*0x13f+0x4*0x71d+-0x1c*0x13d)]=_0x12f6b5;}function uw(_0x2d3809,_0x8cfd0d,_0x13694d){this['array'][_0x2d3809]=_0x8cfd0d[_0x13694d];}function pw(_0x28216d,_0x48a5ac,_0x55e18d){this['array'][_0x28216d]=_0x48a5ac[_0x55e18d],this['array'][_0x28216d+(-0x1*-0x15b8+0xbd5*0x3+-0x3936)]=_0x48a5ac[_0x55e18d+(-0xe0d+0x20c*-0xa+0x2286)];}function mw(_0x9caba2,_0x5ae13b,_0x55aaa9){this['array'][_0x9caba2]=_0x5ae13b[_0x55aaa9],this['array'][_0x9caba2+(0x2*0x1e7+-0x27*0x11+0x1*-0x136)]=_0x5ae13b[_0x55aaa9+(-0x1*0x2158+0x2*0x119a+-0x1db)],this['array'][_0x9caba2+(-0x1d00+0x1ee0+0x1*-0x1de)]=_0x5ae13b[_0x55aaa9+(0x1992+-0x50e+-0x1482)];}function _w(_0x369431,_0x5a6c51,_0x2a839c){this['array'][_0x369431]=_0x5a6c51[_0x2a839c],this['array'][_0x369431+(-0x1807+0x1959+-0x151)]=_0x5a6c51[_0x2a839c+(-0xbf7+-0x14b0+-0xbe*-0x2c)],this['array'][_0x369431+(-0x1081+0xadf+0x5a4)]=_0x5a6c51[_0x2a839c+(-0x1898+-0x126a+0x2b04)],this['array'][_0x369431+(-0x777+-0x8e*-0x35+-0x4*0x57b)]=_0x5a6c51[_0x2a839c+(-0x564+-0xb*-0x273+-0x397*0x6)];}function gw(_0xbfc1ad,_0x29c5aa,_0xc657a){_0x29c5aa[_0xc657a]=this['array'][_0xbfc1ad];}function Sw(_0x1b26d6,_0x3f528b,_0x1c1e5f){_0x3f528b[_0x1c1e5f]=this['array'][_0x1b26d6],_0x3f528b[_0x1c1e5f+(0xe48+-0xbba+-0x28d)]=this['array'][_0x1b26d6+(-0x1*0x259f+0x1c26+0x1*0x97a)];}function yw(_0x1565d6,_0x13b5d1,_0x570bc6){_0x13b5d1[_0x570bc6]=this['array'][_0x1565d6],_0x13b5d1[_0x570bc6+(-0x7*0x591+-0x19f3+0x40eb)]=this['array'][_0x1565d6+(0x18e6+0x2*-0x12cd+0xcb5)],_0x13b5d1[_0x570bc6+(0x13*0x3e+-0x41f+0x1*-0x79)]=this['array'][_0x1565d6+(-0x546+0x46f*0x6+-0x1552)];}function vw(_0x10e2d3,_0x322e37,_0x3266cc){_0x322e37[_0x3266cc]=this['array'][_0x10e2d3],_0x322e37[_0x3266cc+(0x4e2+0x1e57+-0xe*0x284)]=this['array'][_0x10e2d3+(-0x254*0xf+-0x69*-0x46+-0x1*-0x637)],_0x322e37[_0x3266cc+(-0x4*-0xd+0x532+0x2e*-0x1e)]=this['array'][_0x10e2d3+(-0x8*0x43a+-0x25dc+0x47ae)],_0x322e37[_0x3266cc+(0x1ec9+0x1b09+-0x39cf)]=this['array'][_0x10e2d3+(-0xf*0x1b1+0x1ae5+0x3*-0x81)];}class xw{constructor(_0x223e3d,_0x3a7a46,_0x33f087){switch(this['index']=0x519+0x186b+-0x1d84,this['numCompone'+'nts']=_0x3a7a46['numCompone'+'nts'],_0x33f087['interleave'+'d']?this['array']=new wn[_0x3a7a46['dataType']](_0x223e3d,_0x3a7a46['offset']):this['array']=new wn[_0x3a7a46['dataType']](_0x223e3d,_0x3a7a46['offset'],_0x33f087['vertexCoun'+'t']*_0x3a7a46['numCompone'+'nts']),this['stride']=_0x3a7a46['stride']/this['array']['constructo'+'r']['BYTES_PER_'+'ELEMENT'],_0x3a7a46['numCompone'+'nts']){case 0xeca+-0x8b1*-0x3+0x416*-0xa:this['set']=cw,this['getToArray']=gw,this['setFromArr'+'ay']=uw;break;case 0x2364+0xab8+-0x2e1a:this['set']=hw,this['getToArray']=Sw,this['setFromArr'+'ay']=pw;break;case-0x1460+-0xbe*0x3+0x169d:this['set']=dw,this['getToArray']=yw,this['setFromArr'+'ay']=mw;break;case-0x1e3c+-0x3e4+0x2224:this['set']=fw,this['getToArray']=vw,this['setFromArr'+'ay']=_w;break;}}['get'](_0x53a7bf){return this['array'][this['index']+_0x53a7bf];}['set'](_0x50c001,_0x485050,_0x80946d,_0x27d1e9){}['getToArray'](_0x432995,_0x8736e,_0x541211){}['setFromArr'+'ay'](_0x171895,_0x4ee194,_0x41787e){}}class Uo{constructor(_0x7f36d8){this['vertexBuff'+'er']=_0x7f36d8,this['vertexForm'+'atSize']=_0x7f36d8['getFormat']()['size'],this['buffer']=this['vertexBuff'+'er']['lock'](),this['accessors']=[],this['element']={};const _0x532c14=this['vertexBuff'+'er']['getFormat']();for(let _0x450a76=0xb*0x23b+-0x11*0x166+-0xc3;_0x450a76<_0x532c14['elements']['length'];_0x450a76++){const _0x7a825=_0x532c14['elements'][_0x450a76];this['accessors'][_0x450a76]=new xw(this['buffer'],_0x7a825,_0x532c14),this['element'][_0x7a825['name']]=this['accessors'][_0x450a76];}}['next'](_0x3de49a=-0x1f*-0x117+-0x1f08+-0x2c*0x10){let _0x258fc6=-0x722*-0x1+0x2f0+-0xa12;const _0x53044c=this['accessors'],_0x1af859=this['accessors']['length'];for(;_0x258fc6<_0x1af859;){const _0x571007=_0x53044c[_0x258fc6++];_0x571007['index']+=_0x3de49a*_0x571007['stride'];}}['end'](){this['vertexBuff'+'er']['unlock']();}['writeData'](_0x5d2f07,_0x1cd8be,_0x53c97b){const _0x11d0a8=this['element'][_0x5d2f07];if(_0x11d0a8){_0x53c97b>this['vertexBuff'+'er']['numVertice'+'s']&&(w['error']('NumVertice'+'s\x20provided'+'\x20to\x20setDat'+'a:\x20'+_0x53c97b+('\x20is\x20larger'+'\x20than\x20spac'+'e\x20in\x20Verte'+'xBuffer:\x20')+this['vertexBuff'+'er']['numVertice'+'s']),_0x53c97b=this['vertexBuff'+'er']['numVertice'+'s']);const _0x49892f=_0x11d0a8['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){let _0x41a177=0x4d1*-0x8+0x3*-0x9eb+0x16c3*0x3;for(let _0x1d6011=-0x4a9+-0x1*0xba9+0x1052;_0x1d6011<_0x53c97b;_0x1d6011++)_0x11d0a8['setFromArr'+'ay'](_0x41a177,_0x1cd8be,_0x1d6011*_0x49892f),_0x41a177+=_0x11d0a8['stride'];}else{if(_0x1cd8be['length']>_0x53c97b*_0x49892f){const _0x554f09=_0x53c97b*_0x49892f;if(ArrayBuffer['isView'](_0x1cd8be))_0x1cd8be=_0x1cd8be['subarray'](-0x1f7b+0x16*0x6+0x1ef7*0x1,_0x554f09),_0x11d0a8['array']['set'](_0x1cd8be);else{for(let _0x52f674=-0x261*-0xb+-0x259b+0xb70;_0x52f674<_0x554f09;_0x52f674++)_0x11d0a8['array'][_0x52f674]=_0x1cd8be[_0x52f674];}}else _0x11d0a8['array']['set'](_0x1cd8be);}}}['readData'](_0x3ae836,_0x32517e){const _0x7fc6f0=this['element'][_0x3ae836];let _0x510b2a=0x21a1+-0x20b*-0x2+-0x25b7;if(_0x7fc6f0){_0x510b2a=this['vertexBuff'+'er']['numVertice'+'s'];let _0x5060a5;const _0x505e4d=_0x7fc6f0['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){Array['isArray'](_0x32517e)&&(_0x32517e['length']=-0x3*0x1eb+0x1404+0x1*-0xe43),_0x7fc6f0['index']=0x1ebc+-0x2*-0xb45+-0x3*0x11c2;let _0xdb24de=-0xf*-0x12d+0x182f+-0x29d2;for(_0x5060a5=-0x9*-0x20f+0x646*0x5+-0x31e5*0x1;_0x5060a5<_0x510b2a;_0x5060a5++)_0x7fc6f0['getToArray'](_0xdb24de,_0x32517e,_0x5060a5*_0x505e4d),_0xdb24de+=_0x7fc6f0['stride'];}else{if(ArrayBuffer['isView'](_0x32517e))_0x32517e['set'](_0x7fc6f0['array']);else{_0x32517e['length']=0xe03*0x2+0x1a3b+-0x331*0x11;const _0x446275=_0x510b2a*_0x505e4d;for(_0x5060a5=0xb65*-0x2+-0xb30+0x21fa;_0x5060a5<_0x446275;_0x5060a5++)_0x32517e[_0x5060a5]=_0x7fc6f0['array'][_0x5060a5];}}}return _0x510b2a;}}const Tw=-(-0x19d3+-0x24c4+0x1*0x3e98);class ww{constructor(_0x3c2f26,_0x2ecd42){h(this,'key',null),h(this,'element',null),h(this,'event',null),_0x2ecd42&&(this['key']=_0x2ecd42['keyCode'],this['element']=_0x2ecd42['target'],this['event']=_0x2ecd42);}}const jl=new ww();function Vd(_0x427422){return jl['key']=_0x427422['keyCode'],jl['element']=_0x427422['target'],jl['event']=_0x427422,jl;}function Yl(_0x2dd54c){return typeof _0x2dd54c=='string'?_0x2dd54c['toUpperCas'+'e']()['charCodeAt'](0x1c51+0x17*-0x173+-0x4*-0x141):_0x2dd54c;}const Ew={0x9:'Tab',0xd:'Enter',0x10:'Shift',0x11:'Control',0x12:'Alt',0x1b:'Escape',0x25:'Left',0x26:'Up',0x27:'Right',0x28:'Down',0x2e:'Delete',0x5b:'Win'};class h_ extends me{constructor(_0x19eb75,_0x3d5676={}){super(),h(this,'_element',null),h(this,'_keymap',{}),h(this,'_lastmap',{}),(this['_keyDownHa'+'ndler']=this['_handleKey'+'Down']['bind'](this),this['_keyUpHand'+'ler']=this['_handleKey'+'Up']['bind'](this),this['_keyPressH'+'andler']=this['_handleKey'+'Press']['bind'](this),this['_visibilit'+'yChangeHan'+'dler']=this['_handleVis'+'ibilityCha'+'nge']['bind'](this),this['_windowBlu'+'rHandler']=this['_handleWin'+'dowBlur']['bind'](this),_0x19eb75&&this['attach'](_0x19eb75),this['preventDef'+'ault']=_0x3d5676['preventDef'+'ault']||!(-0xc06+0x1*-0x8d3+0x14da),this['stopPropag'+'ation']=_0x3d5676['stopPropag'+'ation']||!(-0x186d+-0x7*0x46+0x1a58));}['attach'](_0x779043){this['_element']&&this['detach'](),this['_element']=_0x779043,this['_element']['addEventLi'+'stener']('keydown',this['_keyDownHa'+'ndler'],!(-0x3dd+0xfe2+-0xc04)),this['_element']['addEventLi'+'stener']('keypress',this['_keyPressH'+'andler'],!(-0x2*-0x97d+-0x3*-0x5e9+-0xc*0x30f)),this['_element']['addEventLi'+'stener']('keyup',this['_keyUpHand'+'ler'],!(-0xa02+0x222b+-0x1828*0x1)),document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x115+-0x1692+0x17a8)),window['addEventLi'+'stener']('blur',this['_windowBlu'+'rHandler'],!(0xa27*0x3+-0x1c8a+-0x1ea));}['detach'](){if(!this['_element']){w['warn']('Unable\x20to\x20'+'detach\x20key'+'board.\x20It\x20'+'is\x20not\x20att'+'ached\x20to\x20a'+'n\x20element.');return;}this['_element']['removeEven'+'tListener']('keydown',this['_keyDownHa'+'ndler']),this['_element']['removeEven'+'tListener']('keypress',this['_keyPressH'+'andler']),this['_element']['removeEven'+'tListener']('keyup',this['_keyUpHand'+'ler']),this['_element']=null,document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x1a03+-0xe*-0x15d+0x6ee)),window['removeEven'+'tListener']('blur',this['_windowBlu'+'rHandler'],!(-0x17f*-0x9+0x741*-0x3+0x84d));}['toKeyIdent'+'ifier'](_0x3677c4){_0x3677c4=Yl(_0x3677c4);const _0x473a09=Ew[_0x3677c4['toString']()];if(_0x473a09)return _0x473a09;let _0x532eca=_0x3677c4['toString'](-0x2e9+-0x6*0x3e4+-0x1a51*-0x1)['toUpperCas'+'e']();const _0x3f4f65=_0x532eca['length'];for(let _0x16706e=0x2246+0x1*0x1171+-0x33b7*0x1;_0x16706e<-0x9d7*-0x2+-0x181e+-0xa*-0x72-_0x3f4f65;_0x16706e++)_0x532eca='0'+_0x532eca;return'U+'+_0x532eca;}['_handleKey'+'Down'](_0x4cb07f){const _0x14b27d=_0x4cb07f['keyCode']||_0x4cb07f['charCode'];if(_0x14b27d===void(0x3b0+0x1*-0x416+-0x6*-0x11))return;const _0x2f87f0=this['toKeyIdent'+'ifier'](_0x14b27d);this['_keymap'][_0x2f87f0]=!(0x2468+-0x122e+-0x123a),this['fire']('keydown',Vd(_0x4cb07f)),this['preventDef'+'ault']&&_0x4cb07f['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x4cb07f['stopPropag'+'ation']();}['_handleKey'+'Up'](_0x55aa63){const _0x3d481e=_0x55aa63['keyCode']||_0x55aa63['charCode'];if(_0x3d481e===void(-0xac9*0x3+-0x193f+0xca*0x49))return;const _0x426bb5=this['toKeyIdent'+'ifier'](_0x3d481e);delete this['_keymap'][_0x426bb5],this['fire']('keyup',Vd(_0x55aa63)),this['preventDef'+'ault']&&_0x55aa63['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x55aa63['stopPropag'+'ation']();}['_handleKey'+'Press'](_0x2c5ef3){this['fire']('keypress',Vd(_0x2c5ef3)),this['preventDef'+'ault']&&_0x2c5ef3['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x2c5ef3['stopPropag'+'ation']();}['_handleVis'+'ibilityCha'+'nge'](){document['visibility'+'State']==='hidden'&&this['_handleWin'+'dowBlur']();}['_handleWin'+'dowBlur'](){this['_keymap']={},this['_lastmap']={};}['update'](){for(const _0x1e195e in this['_lastmap'])delete this['_lastmap'][_0x1e195e];for(const _0x5b25c6 in this['_keymap'])this['_keymap']['hasOwnProp'+'erty'](_0x5b25c6)&&(this['_lastmap'][_0x5b25c6]=this['_keymap'][_0x5b25c6]);}['isPressed'](_0x49a56d){const _0x20d211=Yl(_0x49a56d),_0x3f4efb=this['toKeyIdent'+'ifier'](_0x20d211);return!!this['_keymap'][_0x3f4efb];}['wasPressed'](_0x200779){const _0x34c56f=Yl(_0x200779),_0xd45317=this['toKeyIdent'+'ifier'](_0x34c56f);return!!this['_keymap'][_0xd45317]&&!this['_lastmap'][_0xd45317];}['wasRelease'+'d'](_0x12aa40){const _0x68c0d2=Yl(_0x12aa40),_0x264ac3=this['toKeyIdent'+'ifier'](_0x68c0d2);return!this['_keymap'][_0x264ac3]&&!!this['_lastmap'][_0x264ac3];}}h(h_,'EVENT_KEYD'+'OWN','keydown'),h(h_,'EVENT_KEYU'+'P','keyup');function ru(){return!!(document['pointerLoc'+'kElement']||document['mozPointer'+'LockElemen'+'t']||document['webkitPoin'+'terLockEle'+'ment']);}class ta{constructor(_0x1fada5,_0x1b3f53){h(this,'x',0x7cd+0x1813+-0x330*0xa),h(this,'y',0x1f*0xa6+0x225*-0x1+-0x11f5),h(this,'dx',0xc0f+0x8*-0x334+0xd91),h(this,'dy',0x362+-0x10d9+0xd77),h(this,'button',Tw),h(this,'wheelDelta',-0x43+-0x29*0x86+0x15b9),h(this,'element'),h(this,'ctrlKey',!(-0x3a*-0x2f+0xa27*-0x2+0x9a9)),h(this,'altKey',!(0xdc4*-0x2+-0x8cd+0x2456)),h(this,'shiftKey',!(0x215a+-0x32d*-0x7+0x3794*-0x1)),h(this,'metaKey',!(-0xd05+-0xf*0x133+0x1f03*0x1)),h(this,'event');let _0x55c7d6={'x':0x0,'y':0x0};if(_0x1b3f53){if(_0x1b3f53 instanceof ta)throw Error('Expected\x20M'+'ouseEvent');_0x55c7d6=_0x1fada5['_getTarget'+'Coords'](_0x1b3f53);}else _0x1b3f53={};if(_0x55c7d6)this['x']=_0x55c7d6['x'],this['y']=_0x55c7d6['y'];else{if(ru())this['x']=-0x26f5*-0x1+-0x12f6+-0x1*0x13ff,this['y']=-0x5b5+0x12e5+-0x1*0xd30;else return;}_0x1b3f53['type']==='wheel'&&(_0x1b3f53['deltaY']>0x533+0x2ea*0x7+-0x1999?this['wheelDelta']=-0x6*-0x115+0x65*-0x2+-0x5b3:_0x1b3f53['deltaY']<0x2*0x56b+-0xb*0x92+-0x490&&(this['wheelDelta']=-(-0x121d*-0x2+0x31e+-0x1b*0x175))),ru()?(this['dx']=_0x1b3f53['movementX']||_0x1b3f53['webkitMove'+'mentX']||_0x1b3f53['mozMovemen'+'tX']||0x59e*0x3+0x1f7a+-0x407*0xc,this['dy']=_0x1b3f53['movementY']||_0x1b3f53['webkitMove'+'mentY']||_0x1b3f53['mozMovemen'+'tY']||0x1*0x925+-0x1*0x9d0+0xab):(this['dx']=this['x']-_0x1fada5['_lastX'],this['dy']=this['y']-_0x1fada5['_lastY']),(_0x1b3f53['type']==='mousedown'||_0x1b3f53['type']==='mouseup')&&(this['button']=_0x1b3f53['button']),this['buttons']=_0x1fada5['_buttons']['slice'](0xb07+-0x24e1+0x19da),this['element']=_0x1b3f53['target'],this['ctrlKey']=_0x1b3f53['ctrlKey']??!(0x8*-0x40b+-0x1593+-0xd7b*-0x4),this['altKey']=_0x1b3f53['altKey']??!(0x7b*-0x19+0x297+-0x13*-0x7f),this['shiftKey']=_0x1b3f53['shiftKey']??!(0x3*-0x8c3+0x627+0x1423),this['metaKey']=_0x1b3f53['metaKey']??!(-0x367*0x6+-0xff8+0x2463),this['event']=_0x1b3f53;}}class sa extends me{constructor(_0xea3cde){super(),h(this,'_lastX',-0x989+0x20e*-0xd+0x243f),h(this,'_lastY',-0x7ac*0x1+-0x1f62+0x270e),h(this,'_buttons',[!(-0x2299+0x2c*0x5b+0x12f6),!(0xfe3+-0x246+-0xd9c),!(-0x17*0xb1+0x155a+0x11*-0x52)]),h(this,'_lastbutto'+'ns',[!(-0x865+0x1*-0x87b+0x10e1),!(0x17*0x175+-0x55*-0x71+-0x17ad*0x3),!(0x51*-0x69+0x1981*0x1+0x293*0x3)]),h(this,'_target',null),h(this,'_attached',!(-0xd5b+-0x6e*0x2+0xe38)),(this['_upHandler']=this['_handleUp']['bind'](this),this['_downHandl'+'er']=this['_handleDow'+'n']['bind'](this),this['_moveHandl'+'er']=this['_handleMov'+'e']['bind'](this),this['_wheelHand'+'ler']=this['_handleWhe'+'el']['bind'](this),this['_contextMe'+'nuHandler']=_0x47584c=>{_0x47584c['preventDef'+'ault']();},this['attach'](_0xea3cde));}static['isPointerL'+'ocked'](){return ru();}['attach'](_0x222e0d){if(this['_target']=_0x222e0d,this['_attached'])return;this['_attached']=!(0xa4*-0xe+0x10b5+-0x7bd*0x1);const _0x51147a={'passive':!(0x3*0x598+0x2*0xf7f+0x1*-0x2fc5)},_0x314448=Ae['passiveEve'+'nts']?_0x51147a:!(-0x74b+-0xdb7+0x21*0xa3);window['addEventLi'+'stener']('mouseup',this['_upHandler'],_0x314448),window['addEventLi'+'stener']('mousedown',this['_downHandl'+'er'],_0x314448),window['addEventLi'+'stener']('mousemove',this['_moveHandl'+'er'],_0x314448),window['addEventLi'+'stener']('wheel',this['_wheelHand'+'ler'],_0x314448);}['detach'](){if(!this['_attached'])return;this['_attached']=!(-0x9f*-0x25+-0x878+0xe82*-0x1),this['_target']=null;const _0x4367e8={'passive':!(-0x21dd+0x167*0x14+0x5d2)},_0x875a76=Ae['passiveEve'+'nts']?_0x4367e8:!(0x9de+0x1869+-0x1123*0x2);window['removeEven'+'tListener']('mouseup',this['_upHandler'],_0x875a76),window['removeEven'+'tListener']('mousedown',this['_downHandl'+'er'],_0x875a76),window['removeEven'+'tListener']('mousemove',this['_moveHandl'+'er'],_0x875a76),window['removeEven'+'tListener']('wheel',this['_wheelHand'+'ler'],_0x875a76);}['disableCon'+'textMenu'](){this['_target']&&this['_target']['addEventLi'+'stener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enableCont'+'extMenu'](){this['_target']&&this['_target']['removeEven'+'tListener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enablePoin'+'terLock'](_0x10f4c6,_0x59e4b8){if(!document['body']['requestPoi'+'nterLock']){_0x59e4b8&&_0x59e4b8();return;}const _0x1a0c2e=()=>{_0x10f4c6(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x1a0c2e);},_0x4b8ec=()=>{_0x59e4b8(),document['removeEven'+'tListener']('pointerloc'+'kerror',_0x4b8ec);};_0x10f4c6&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x1a0c2e,!(-0x617*0x1+0x227b*0x1+0x1c63*-0x1)),_0x59e4b8&&document['addEventLi'+'stener']('pointerloc'+'kerror',_0x4b8ec,!(0x21a0+0x1b79+-0x55*0xb8)),document['body']['requestPoi'+'nterLock']();}['disablePoi'+'nterLock'](_0x56c98f){if(!document['exitPointe'+'rLock'])return;const _0x1d450a=()=>{_0x56c98f(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x1d450a);};_0x56c98f&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x1d450a,!(-0xa04+0x35*-0x11+0xd8a)),document['exitPointe'+'rLock']();}['update'](){this['_lastbutto'+'ns'][0x1ebb+0x2*0x125f+0x2ef*-0x17]=this['_buttons'][0x158d+-0x1*-0x96b+-0x7be*0x4],this['_lastbutto'+'ns'][-0x1*0xc71+0xa*-0x2ba+0x187*0x1a]=this['_buttons'][0x5*-0x4eb+0x3*-0x881+0x321b],this['_lastbutto'+'ns'][-0x1a9d+0xfc9+0xad6]=this['_buttons'][-0x2a1+-0x62a+-0x8cd*-0x1];}['isPressed'](_0x326b00){return this['_buttons'][_0x326b00];}['wasPressed'](_0x231a0a){return this['_buttons'][_0x231a0a]&&!this['_lastbutto'+'ns'][_0x231a0a];}['wasRelease'+'d'](_0x4300b6){return!this['_buttons'][_0x4300b6]&&this['_lastbutto'+'ns'][_0x4300b6];}['_handleUp'](_0x1db394){this['_buttons'][_0x1db394['button']]=!(0xf04+0xe5*-0xf+-0x198);const _0x18e465=new ta(this,_0x1db394);_0x18e465['event']&&this['fire']('mouseup',_0x18e465);}['_handleDow'+'n'](_0x8727){this['_buttons'][_0x8727['button']]=!(-0x158d+-0x4*0x298+0xb*0x2e7);const _0x1e00c6=new ta(this,_0x8727);_0x1e00c6['event']&&this['fire']('mousedown',_0x1e00c6);}['_handleMov'+'e'](_0x5f1cd3){const _0x50c6e2=new ta(this,_0x5f1cd3);_0x50c6e2['event']&&(this['fire']('mousemove',_0x50c6e2),this['_lastX']=_0x50c6e2['x'],this['_lastY']=_0x50c6e2['y']);}['_handleWhe'+'el'](_0x2d0b8d){const _0xfde32a=new ta(this,_0x2d0b8d);_0xfde32a['event']&&this['fire']('mousewheel',_0xfde32a);}['_getTarget'+'Coords'](_0x1b222b){const _0x46be93=this['_target']['getBoundin'+'gClientRec'+'t'](),_0x3a0e90=Math['floor'](_0x46be93['left']),_0x34c644=Math['floor'](_0x46be93['top']);return _0x1b222b['clientX']<_0x3a0e90||_0x1b222b['clientX']>=_0x3a0e90+this['_target']['clientWidt'+'h']||_0x1b222b['clientY']<_0x34c644||_0x1b222b['clientY']>=_0x34c644+this['_target']['clientHeig'+'ht']?null:{'x':_0x1b222b['clientX']-_0x3a0e90,'y':_0x1b222b['clientY']-_0x34c644};}}h(sa,'EVENT_MOUS'+'EMOVE','mousemove'),h(sa,'EVENT_MOUS'+'EDOWN','mousedown'),h(sa,'EVENT_MOUS'+'EUP','mouseup'),h(sa,'EVENT_MOUS'+'EWHEEL','mousewheel');function Wc(_0x6b4727){let _0x4d9aaa=-0x2*-0xbce+-0x1759+-0x43,_0x392f32=0x1f5*0x11+-0x4bd+0x722*-0x4,_0x194965=_0x6b4727['target'];for(;!(_0x194965 instanceof HTMLElement)&&_0x194965;)_0x194965=_0x194965['parentNode'];for(;_0x194965;)_0x4d9aaa+=_0x194965['offsetLeft']-_0x194965['scrollLeft'],_0x392f32+=_0x194965['offsetTop']-_0x194965['scrollTop'],_0x194965=_0x194965['offsetPare'+'nt'];return{'x':_0x6b4727['pageX']-_0x4d9aaa,'y':_0x6b4727['pageY']-_0x392f32};}class d_{constructor(_0x2e0c51){h(this,'id'),h(this,'x'),h(this,'y'),h(this,'target'),h(this,'touch');const _0xa0aa76=Wc(_0x2e0c51);this['id']=_0x2e0c51['identifier'],this['x']=_0xa0aa76['x'],this['y']=_0xa0aa76['y'],this['target']=_0x2e0c51['target'],this['touch']=_0x2e0c51;}}class Kl{constructor(_0x402c46,_0x3d8899){h(this,'element'),h(this,'event'),h(this,'touches',[]),h(this,'changedTou'+'ches',[]),(this['element']=_0x3d8899['target'],this['event']=_0x3d8899,this['touches']=Array['from'](_0x3d8899['touches'])['map'](_0x1fe073=>new d_(_0x1fe073)),this['changedTou'+'ches']=Array['from'](_0x3d8899['changedTou'+'ches'])['map'](_0x3b95e7=>new d_(_0x3b95e7)));}['getTouchBy'+'Id'](_0x25721f,_0x5d7a7b){return _0x5d7a7b['find'](_0x47ac7d=>_0x47ac7d['id']===_0x25721f)||null;}}class Zl extends me{constructor(_0x35b926){super(),this['_element']=null,this['_startHand'+'ler']=this['_handleTou'+'chStart']['bind'](this),this['_endHandle'+'r']=this['_handleTou'+'chEnd']['bind'](this),this['_moveHandl'+'er']=this['_handleTou'+'chMove']['bind'](this),this['_cancelHan'+'dler']=this['_handleTou'+'chCancel']['bind'](this),this['attach'](_0x35b926);}['attach'](_0x37287b){this['_element']&&this['detach'](),this['_element']=_0x37287b,this['_element']['addEventLi'+'stener']('touchstart',this['_startHand'+'ler'],!(-0x5c3+-0x1f*0x3b+0xce9)),this['_element']['addEventLi'+'stener']('touchend',this['_endHandle'+'r'],!(-0x2ed*-0x8+0xac4+0x1*-0x222b)),this['_element']['addEventLi'+'stener']('touchmove',this['_moveHandl'+'er'],!(-0x2*0xce+0x9fd+-0x860)),this['_element']['addEventLi'+'stener']('touchcance'+'l',this['_cancelHan'+'dler'],!(-0x17a2+-0x30d+0x1ab0));}['detach'](){this['_element']&&(this['_element']['removeEven'+'tListener']('touchstart',this['_startHand'+'ler'],!(0x2*0xca4+0x1cdf+-0x3626)),this['_element']['removeEven'+'tListener']('touchend',this['_endHandle'+'r'],!(-0x2560+-0x175f*0x1+0x10*0x3cc)),this['_element']['removeEven'+'tListener']('touchmove',this['_moveHandl'+'er'],!(-0x2*0x77+-0x277*0x6+0xfb9)),this['_element']['removeEven'+'tListener']('touchcance'+'l',this['_cancelHan'+'dler'],!(0x909+-0x6ad*-0x3+-0x1d0f*0x1))),this['_element']=null;}['_handleTou'+'chStart'](_0x431b3b){this['fire']('touchstart',new Kl(this,_0x431b3b));}['_handleTou'+'chEnd'](_0x65d617){this['fire']('touchend',new Kl(this,_0x65d617));}['_handleTou'+'chMove'](_0x772aba){_0x772aba['preventDef'+'ault'](),this['fire']('touchmove',new Kl(this,_0x772aba));}['_handleTou'+'chCancel'](_0x113098){this['fire']('touchcance'+'l',new Kl(this,_0x113098));}}h(Zl,'EVENT_TOUC'+'HSTART','touchstart'),h(Zl,'EVENT_TOUC'+'HEND','touchend'),h(Zl,'EVENT_TOUC'+'HMOVE','touchmove'),h(Zl,'EVENT_TOUC'+'HCANCEL','touchcance'+'l');const Oe=class Oe{['get'](_0x11ce34,_0x546a0f,_0x408611){typeof _0x546a0f=='function'&&(_0x408611=_0x546a0f,_0x546a0f={});const _0x1de339=this['request']('GET',_0x11ce34,_0x546a0f,_0x408611),{progress:_0x34ff85}=_0x546a0f;if(_0x34ff85){const _0x2b3db3=_0x6037c2=>{_0x6037c2['lengthComp'+'utable']&&_0x34ff85['fire']('progress',_0x6037c2['loaded'],_0x6037c2['total']);},_0x379aa7=_0x1e8c3b=>{_0x2b3db3(_0x1e8c3b),_0x1de339['removeEven'+'tListener']('loadstart',_0x2b3db3),_0x1de339['removeEven'+'tListener']('progress',_0x2b3db3),_0x1de339['removeEven'+'tListener']('loadend',_0x379aa7);};_0x1de339['addEventLi'+'stener']('loadstart',_0x2b3db3),_0x1de339['addEventLi'+'stener']('progress',_0x2b3db3),_0x1de339['addEventLi'+'stener']('loadend',_0x379aa7);}return _0x1de339;}['post'](_0x168ddb,_0x126f7b,_0x1afd5c,_0x205f6d){return typeof _0x1afd5c=='function'&&(_0x205f6d=_0x1afd5c,_0x1afd5c={}),_0x1afd5c['postdata']=_0x126f7b,this['request']('POST',_0x168ddb,_0x1afd5c,_0x205f6d);}['put'](_0xa170a5,_0x2cf1fc,_0x3ab435,_0x2f78ff){return typeof _0x3ab435=='function'&&(_0x2f78ff=_0x3ab435,_0x3ab435={}),_0x3ab435['postdata']=_0x2cf1fc,this['request']('PUT',_0xa170a5,_0x3ab435,_0x2f78ff);}['del'](_0x2a81bf,_0x2f0d9b,_0x588b53){return typeof _0x2f0d9b=='function'&&(_0x588b53=_0x2f0d9b,_0x2f0d9b={}),this['request']('DELETE',_0x2a81bf,_0x2f0d9b,_0x588b53);}['request'](_0x21a066,_0x2617f2,_0x262486,_0x3f6c57){let _0x1aa46f,_0x2d0303,_0x3d9bbf,_0xf0fa03=!(0x7*-0x301+0x1b50+0x324*-0x2);if(typeof _0x262486=='function'&&(_0x3f6c57=_0x262486,_0x262486={}),_0x262486['retry']&&(_0x262486=Object['assign']({'retries':0x0,'maxRetries':0x5},_0x262486)),_0x262486['callback']=_0x3f6c57,_0x262486['async']==null&&(_0x262486['async']=!(0x25b+0x140e+-0x1*0x1669)),_0x262486['headers']==null&&(_0x262486['headers']={}),_0x262486['postdata']!=null){if(_0x262486['postdata']instanceof Document)_0x3d9bbf=_0x262486['postdata'];else{if(_0x262486['postdata']instanceof FormData)_0x3d9bbf=_0x262486['postdata'];else{if(_0x262486['postdata']instanceof Object){let _0x51c470=_0x262486['headers']['Content-Ty'+'pe'];switch(_0x51c470===void(-0xc51+0x20b2+-0x1461)&&(_0x262486['headers']['Content-Ty'+'pe']=Oe['ContentTyp'+'e']['FORM_URLEN'+'CODED'],_0x51c470=_0x262486['headers']['Content-Ty'+'pe']),_0x51c470){case Oe['ContentTyp'+'e']['FORM_URLEN'+'CODED']:{_0x3d9bbf='';let _0xb90446=!(-0x19ef+-0x305*0x1+0x1cf4);for(const _0x192aa9 in _0x262486['postdata'])if(_0x262486['postdata']['hasOwnProp'+'erty'](_0x192aa9)){_0xb90446?_0xb90446=!(-0x286+0x3d*-0x1d+0x970):_0x3d9bbf+='&';const _0x3ced5e=encodeURIComponent(_0x192aa9),_0x1f5343=encodeURIComponent(_0x262486['postdata'][_0x192aa9]);_0x3d9bbf+=_0x3ced5e+'='+_0x1f5343;}break;}default:case Oe['ContentTyp'+'e']['JSON']:_0x51c470==null&&(_0x262486['headers']['Content-Ty'+'pe']=Oe['ContentTyp'+'e']['JSON']),_0x3d9bbf=JSON['stringify'](_0x262486['postdata']);break;}}else _0x3d9bbf=_0x262486['postdata'];}}}if(_0x262486['cache']===!(0x12be+-0xd*0xaf+0x2*-0x4ed)){const _0x1ca91d=de();_0x1aa46f=new Rd(_0x2617f2),_0x1aa46f['query']?_0x1aa46f['query']=_0x1aa46f['query']+'&ts='+_0x1ca91d:_0x1aa46f['query']='ts='+_0x1ca91d,_0x2617f2=_0x1aa46f['toString']();}_0x262486['query']&&(_0x1aa46f=new Rd(_0x2617f2),_0x2d0303=ah(_0x1aa46f['getQuery'](),_0x262486['query']),_0x1aa46f['setQuery'](_0x2d0303),_0x2617f2=_0x1aa46f['toString']());const _0x4ff68d=new XMLHttpRequest();_0x4ff68d['open'](_0x21a066,_0x2617f2,_0x262486['async']),_0x4ff68d['withCreden'+'tials']=_0x262486['withCreden'+'tials']!==void(0x23dd+-0x3*0xbed+-0x16)?_0x262486['withCreden'+'tials']:!(0x1*0x1afb+0x2a5*-0xc+0x4c2),_0x4ff68d['responseTy'+'pe']=_0x262486['responseTy'+'pe']||this['_guessResp'+'onseType'](_0x2617f2);for(const _0x5802b4 in _0x262486['headers'])_0x262486['headers']['hasOwnProp'+'erty'](_0x5802b4)&&_0x4ff68d['setRequest'+'Header'](_0x5802b4,_0x262486['headers'][_0x5802b4]);_0x4ff68d['onreadysta'+'techange']=()=>{this['_onReadySt'+'ateChange'](_0x21a066,_0x2617f2,_0x262486,_0x4ff68d);},_0x4ff68d['onerror']=()=>{this['_onError'](_0x21a066,_0x2617f2,_0x262486,_0x4ff68d),_0xf0fa03=!(0x1a*-0xe5+-0x22fe+0x3a40);};try{_0x4ff68d['send'](_0x3d9bbf);}catch(_0x2753fd){_0xf0fa03||_0x262486['error'](_0x4ff68d['status'],_0x4ff68d,_0x2753fd);}return _0x4ff68d;}['_guessResp'+'onseType'](_0xed5dfa){const _0x318309=new Rd(_0xed5dfa),_0x4022bb=xe['getExtensi'+'on'](_0x318309['path'])['toLowerCas'+'e']();return Oe['binaryExte'+'nsions']['indexOf'](_0x4022bb)>=-0xd51+0x1*-0x1567+0x22b8?Oe['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x4022bb==='.json'?Oe['ResponseTy'+'pe']['JSON']:_0x4022bb==='.xml'?Oe['ResponseTy'+'pe']['DOCUMENT']:Oe['ResponseTy'+'pe']['TEXT'];}['_isBinaryC'+'ontentType'](_0x22ff20){return[Oe['ContentTyp'+'e']['BASIS'],Oe['ContentTyp'+'e']['BIN'],Oe['ContentTyp'+'e']['DDS'],Oe['ContentTyp'+'e']['GLB'],Oe['ContentTyp'+'e']['MP3'],Oe['ContentTyp'+'e']['MP4'],Oe['ContentTyp'+'e']['OGG'],Oe['ContentTyp'+'e']['OPUS'],Oe['ContentTyp'+'e']['WAV']]['indexOf'](_0x22ff20)>=-0x23cc+-0x8fb+0x2cc7;}['_isBinaryR'+'esponseTyp'+'e'](_0x3bf31f){return _0x3bf31f===Oe['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']||_0x3bf31f===Oe['ResponseTy'+'pe']['BLOB']||_0x3bf31f===Oe['ResponseTy'+'pe']['JSON'];}['_onReadySt'+'ateChange'](_0x43edad,_0x138d55,_0x38e4da,_0x577d83){if(_0x577d83['readyState']===0x1d4e+-0x2*0xd69+-0x278)switch(_0x577d83['status']){case 0x8d7*0x4+-0x1dbf*0x1+-0x3*0x1df:{_0x577d83['responseUR'+'L']&&_0x577d83['responseUR'+'L']['startsWith']('file:///')?this['_onSuccess'](_0x43edad,_0x138d55,_0x38e4da,_0x577d83):this['_onError'](_0x43edad,_0x138d55,_0x38e4da,_0x577d83);break;}case-0x2582+-0x568+0x2bb2:case 0x12d7+0x245d+0x366b*-0x1:case-0x53+0x101f*-0x2+-0x1*-0x215f:case 0x11b0+-0x16*-0x5b+-0x2*0xc29:{this['_onSuccess'](_0x43edad,_0x138d55,_0x38e4da,_0x577d83);break;}default:{this['_onError'](_0x43edad,_0x138d55,_0x38e4da,_0x577d83);break;}}}['_onSuccess'](_0x28134b,_0x3e6b89,_0x5992ca,_0x206efb){let _0x1c98b2,_0x1f0f39;const _0x49a1b2=_0x206efb['getRespons'+'eHeader']('Content-Ty'+'pe');_0x49a1b2&&(_0x1f0f39=_0x49a1b2['split'](';')[0x31a*-0x5+0x83b+0x9*0xcf]['trim']());try{this['_isBinaryC'+'ontentType'](_0x1f0f39)||this['_isBinaryR'+'esponseTyp'+'e'](_0x206efb['responseTy'+'pe'])?_0x1c98b2=_0x206efb['response']:_0x1f0f39===Oe['ContentTyp'+'e']['JSON']||_0x3e6b89['split']('?')[0x5ea+0x349+0x1d7*-0x5]['endsWith']('.json')?_0x1c98b2=JSON['parse'](_0x206efb['responseTe'+'xt']):_0x206efb['responseTy'+'pe']===Oe['ResponseTy'+'pe']['DOCUMENT']||_0x1f0f39===Oe['ContentTyp'+'e']['XML']?_0x1c98b2=_0x206efb['responseXM'+'L']:_0x1c98b2=_0x206efb['responseTe'+'xt'],_0x5992ca['callback'](null,_0x1c98b2);}catch(_0x2ec48b){_0x5992ca['callback'](_0x2ec48b);}}['_onError'](_0x11874c,_0xd47244,_0x40a603,_0x36379d){if(!_0x40a603['retrying']){if(_0x40a603['retry']&&_0x40a603['retries']<_0x40a603['maxRetries']){_0x40a603['retries']++,_0x40a603['retrying']=!(-0x2*-0x544+-0x1a6d+-0x139*-0xd);const _0x298c97=Y['clamp'](Math['pow'](0x1269*-0x1+-0x159+0x13c4,_0x40a603['retries'])*Oe['retryDelay'],-0x1*-0x12c7+0x11*-0x36+-0x1*0xf31,_0x40a603['maxRetryDe'+'lay']||0x986+0x4c*-0x4d+0x20de);console['log'](_0x11874c+':\x20'+_0xd47244+'\x20-\x20Error\x20'+_0x36379d['status']+('.\x20Retrying'+'\x20in\x20')+_0x298c97+'\x20ms'),setTimeout(()=>{_0x40a603['retrying']=!(0x2ee+-0x2487+0x219a),this['request'](_0x11874c,_0xd47244,_0x40a603,_0x40a603['callback']);},_0x298c97);}else _0x40a603['callback'](_0x36379d['status']===-0x2581*-0x1+-0x856+-0x1d2b?'Network\x20er'+'ror':_0x36379d['status'],null);}}};h(Oe,'ContentTyp'+'e',{'AAC':'audio/aac','BASIS':'image/basi'+'s','BIN':'applicatio'+'n/octet-st'+'ream','DDS':'image/dds','FORM_URLENCODED':'applicatio'+'n/x-www-fo'+'rm-urlenco'+'ded','GIF':'image/gif','GLB':'model/gltf'+'-binary','JPEG':'image/jpeg','JSON':'applicatio'+'n/json','MP3':'audio/mpeg','MP4':'audio/mp4','OGG':'audio/ogg','OPUS':'audio/ogg;'+'\x20codecs=\x22o'+'pus\x22','PNG':'image/png','TEXT':'text/plain','WAV':'audio/x-wa'+'v','XML':'applicatio'+'n/xml'}),h(Oe,'ResponseTy'+'pe',{'TEXT':'text','ARRAY_BUFFER':'arraybuffe'+'r','BLOB':'blob','DOCUMENT':'document','JSON':'json'}),h(Oe,'binaryExte'+'nsions',['.model','.wav','.ogg','.mp3','.mp4','.m4a','.aac','.dds','.basis','.glb','.opus']),h(Oe,'retryDelay',-0xc*0x337+0x196+0x2562);let Ls=Oe;const ot=new Ls(),Vp='linear',bw='inverse',Aw='exponentia'+'l';class Cw{constructor(_0x4b54eb){h(this,'_manager'),h(this,'position',new D()),h(this,'orientatio'+'n',new te()),this['_manager']=_0x4b54eb;}['getPositio'+'n'](){return this['position'];}['setPositio'+'n'](_0x4d65c2){this['position']['copy'](_0x4d65c2);const _0x29f1dc=this['listener'];_0x29f1dc&&('positionX'in _0x29f1dc?(_0x29f1dc['positionX']['value']=_0x4d65c2['x'],_0x29f1dc['positionY']['value']=_0x4d65c2['y'],_0x29f1dc['positionZ']['value']=_0x4d65c2['z']):_0x29f1dc['setPositio'+'n']&&_0x29f1dc['setPositio'+'n'](_0x4d65c2['x'],_0x4d65c2['y'],_0x4d65c2['z']));}['setOrienta'+'tion'](_0x326302){this['orientatio'+'n']['copy'](_0x326302);const _0x4d8d28=this['listener'];if(_0x4d8d28){const _0x41a990=_0x326302['data'];'forwardX'in _0x4d8d28?(_0x4d8d28['forwardX']['value']=-_0x41a990[-0x870+-0x223c+0x71e*0x6],_0x4d8d28['forwardY']['value']=-_0x41a990[0x2*-0x3ac+-0x1e47*0x1+0x25a8],_0x4d8d28['forwardZ']['value']=-_0x41a990[-0x350+0x2*0x328+-0x2f6],_0x4d8d28['upX']['value']=_0x41a990[-0x1b70+-0x1f96*0x1+-0xe5*-0x42],_0x4d8d28['upY']['value']=_0x41a990[0x1467+-0xbfb+-0x867],_0x4d8d28['upZ']['value']=_0x41a990[-0xe*-0x17+-0x2417+0x22db]):_0x4d8d28['setOrienta'+'tion']&&_0x4d8d28['setOrienta'+'tion'](-_0x41a990[0x3*0xa68+-0x23a6+0x476],-_0x41a990[-0x1131*0x1+0x9*-0x13+-0x3*-0x5f7],-_0x41a990[0x28*0x59+-0xa47+0x1*-0x397],_0x41a990[-0x1*0x26ef+-0x5be+0x2cb1],_0x41a990[0x1f16+-0xb*-0x1be+-0x323b],_0x41a990[-0x6c7*0x3+-0x1ef6+-0x3*-0x111b]);}}['getOrienta'+'tion'](){return this['orientatio'+'n'];}get['listener'](){const _0x4c01a7=this['_manager']['context'];return _0x4c01a7?_0x4c01a7['listener']:null;}}const Ql='running',f_=['click','touchstart','mousedown'];class Pw extends me{constructor(){super(),this['_context']=null,this['AudioConte'+'xt']=typeof AudioContext<'u'&&AudioContext||typeof webkitAudioContext<'u'&&webkitAudioContext,this['AudioConte'+'xt']||w['warn']('No\x20support'+'\x20for\x203D\x20au'+'dio\x20found'),this['_unlockHan'+'dlerFunc']=this['_unlockHan'+'dler']['bind'](this),this['_userSuspe'+'nded']=!(0xc*0xce+0x17*0x147+-0x2708),this['listener']=new Cw(this),this['_volume']=-0xba+-0x1568+0x761*0x3;}set['volume'](_0x1b6957){_0x1b6957=Y['clamp'](_0x1b6957,-0x212d+-0x1*0x8bd+0xb9*0x3a,-0xc8e+-0x6da+0x1369),this['_volume']=_0x1b6957,this['fire']('volumechan'+'ge',_0x1b6957);}get['volume'](){return this['_volume'];}get['suspended'](){return this['_userSuspe'+'nded'];}get['context'](){return!this['_context']&&this['AudioConte'+'xt']&&(this['_context']=new this['AudioConte'+'xt'](),this['_context']['state']!==Ql&&this['_registerU'+'nlockListe'+'ners']()),this['_context'];}['suspend'](){this['_userSuspe'+'nded']||(this['_userSuspe'+'nded']=!(0x653*-0x5+-0xfd7*0x2+0x3f4d),this['_context']&&this['_context']['state']===Ql&&this['_suspend']());}['resume'](){this['_userSuspe'+'nded']&&(this['_userSuspe'+'nded']=!(0x87f+0x244d+-0x2ccb),this['_context']&&this['_context']['state']!==Ql&&this['_resume']());}['destroy'](){var _0x4d2a1e;this['fire']('destroy'),this['_context']&&(this['_removeUnl'+'ockListene'+'rs'](),(_0x4d2a1e=this['_context'])==null||_0x4d2a1e['close'](),this['_context']=null);}['_resume'](){this['_context']['resume']()['then'](()=>{const _0x1144b3=this['_context']['createBuff'+'erSource']();_0x1144b3['buffer']=this['_context']['createBuff'+'er'](-0x1cd*-0x3+0x1147+-0x3*0x78f,0x137f+-0x1bdd*-0x1+-0x2f5b,this['_context']['sampleRate']),_0x1144b3['connect'](this['_context']['destinatio'+'n']),_0x1144b3['start'](0x300+-0xa+-0x2*0x17b),_0x1144b3['onended']=_0x360f95=>{_0x1144b3['disconnect'](0x1*0x264c+-0x86d+-0x1ddf),this['fire']('resume');};},_0x16eec6=>{w['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20it\x20'+'was\x20reject'+'ed\x20'+_0x16eec6);})['catch'](_0x2dce75=>{w['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20thr'+'ew\x20an\x20exce'+'ption\x20'+_0x2dce75);});}['_suspend'](){this['_context']['suspend']()['then'](()=>{this['fire']('suspend');},_0x11b586=>{w['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20i'+'t\x20was\x20reje'+'cted\x20'+_0x11b586);})['catch'](_0x3b374b=>{w['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20t'+'hrew\x20an\x20ex'+'ception\x20'+_0x3b374b);});}['_unlockHan'+'dler'](){this['_removeUnl'+'ockListene'+'rs'](),!this['_userSuspe'+'nded']&&this['_context']['state']!==Ql&&this['_resume']();}['_registerU'+'nlockListe'+'ners'](){f_['forEach'](_0x208c0e=>{window['addEventLi'+'stener'](_0x208c0e,this['_unlockHan'+'dlerFunc'],!(-0x1bc7*0x1+0x508*0x4+-0x46*-0x1c));});}['_removeUnl'+'ockListene'+'rs'](){f_['forEach'](_0x1a1e72=>{window['removeEven'+'tListener'](_0x1a1e72,this['_unlockHan'+'dlerFunc'],!(0xc9*0x16+0xe7e+-0x1fc3));});}}class Mw{constructor(_0x5bc0e0){h(this,'audio'),h(this,'buffer'),_0x5bc0e0 instanceof Audio?this['audio']=_0x5bc0e0:this['buffer']=_0x5bc0e0;}get['duration'](){let _0x41468c=-0x1eb3+-0x12c7+-0x1*-0x317a;return this['buffer']?_0x41468c=this['buffer']['duration']:this['audio']&&(_0x41468c=this['audio']['duration']),_0x41468c||-0x9f0+0x6b*0x11+0x2d5;}}function Dl(){return typeof AudioContext<'u'||typeof webkitAudioContext<'u';}const Zt=0x1a4d+0x1991+-0x114a*0x3,fn=0x17c6+0x12f5+-0x155d*0x2,Hs=-0x2*0x1017+-0x2228+0x1*0x4258;function es(_0x3e9c34,_0x890a70){return _0x3e9c34%_0x890a70||0x1ad9+-0x10*0x124+0x899*-0x1;}class As extends me{constructor(_0x313735,_0x1c09bd,_0x263bd9){super(),h(this,'source',null),(this['_manager']=_0x313735,this['_volume']=_0x263bd9['volume']!==void(-0x172a+-0x706+0x10*0x1e3)?Y['clamp'](Number(_0x263bd9['volume'])||-0x5*-0x41b+-0x154c+0xc5,-0xa*-0x21a+0x8b*0x3+-0x20f*0xb,0xa59*-0x1+0x2702*-0x1+0x315c):0x358*0xb+-0x3*0xc9a+0x107,this['_pitch']=_0x263bd9['pitch']!==void(0x95*-0xa+-0x16b3+0x1c85)?Math['max'](-0x104f+-0x15f0+-0x263f*-0x1+0.01,Number(_0x263bd9['pitch'])||0x444+-0x496+0x52):-0x815*0x2+0x16f9*-0x1+0x2724,this['_loop']=!!(_0x263bd9['loop']!==void(-0x4*-0x105+0x1*0x131b+-0x172f)&&_0x263bd9['loop']),this['_sound']=_0x1c09bd,this['_state']=Hs,this['_suspended']=!(-0x24b7+-0x266e+-0x2593*-0x2),this['_suspendEn'+'dEvent']=-0x12*0x7b+-0x141c+-0x996*-0x3,this['_suspendIn'+'stanceEven'+'ts']=!(0x35*-0x8b+0xf*0x117+0xc6f),this['_playWhenL'+'oaded']=!(-0x61*0x44+0x26*0x75+0x866),this['_startTime']=Math['max'](-0xc7a+0x445*0x2+0x3f0,Number(_0x263bd9['startTime'])||0x15b5+-0xe*0x2a+-0x1369),this['_duration']=Math['max'](-0x251*0x1+0x1d2f+-0x1ade,Number(_0x263bd9['duration'])||0x4*-0x59+0x531+-0x8b*0x7),this['_startOffs'+'et']=null,this['_onPlayCal'+'lback']=_0x263bd9['onPlay'],this['_onPauseCa'+'llback']=_0x263bd9['onPause'],this['_onResumeC'+'allback']=_0x263bd9['onResume'],this['_onStopCal'+'lback']=_0x263bd9['onStop'],this['_onEndCall'+'back']=_0x263bd9['onEnd'],Dl()?(this['_startedAt']=0x1*-0x2543+0x10a+0x2439,this['_currentTi'+'me']=0x1c7b+-0xb*0x2fa+-0x443*-0x1,this['_currentOf'+'fset']=0xd*-0xe5+-0x25c2+0x3163,this['_inputNode']=null,this['_connector'+'Node']=null,this['_firstNode']=null,this['_lastNode']=null,this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0x15eb*-0x1+-0x2628+0x103e),this['_initializ'+'eNodes'](),this['_endedHand'+'ler']=this['_onEnded']['bind'](this)):(this['_isReady']=!(0x2189+0x44b+-0x25d3),this['_loadedMet'+'adataHandl'+'er']=this['_onLoadedM'+'etadata']['bind'](this),this['_timeUpdat'+'eHandler']=this['_onTimeUpd'+'ate']['bind'](this),this['_endedHand'+'ler']=this['_onEnded']['bind'](this),this['_createSou'+'rce']()));}set['currentTim'+'e'](_0xbbea41){if(!(_0xbbea41<-0x2*-0xdd9+-0x22f5+0x743)){if(this['_state']===Zt){const _0x59f0b7=this['_suspendIn'+'stanceEven'+'ts'];this['_suspendIn'+'stanceEven'+'ts']=!(-0x18db+0x108c+0x1*0x84f),this['stop'](),this['_startOffs'+'et']=_0xbbea41,this['play'](),this['_suspendIn'+'stanceEven'+'ts']=_0x59f0b7;}else this['_startOffs'+'et']=_0xbbea41,this['_currentTi'+'me']=_0xbbea41;}}get['currentTim'+'e'](){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===fn?this['_currentTi'+'me']:this['_state']===Hs||!this['source']?-0x133a*0x2+0xeec+0x1788:(this['_updateCur'+'rentTime'](),this['_currentTi'+'me']);}set['duration'](_0x96a037){this['_duration']=Math['max'](-0x8d+-0x1*-0x1a69+-0x19dc,Number(_0x96a037)||0x2*0x923+0xa5b+-0x1ca1);const _0x231b82=this['_state']===Zt;this['stop'](),_0x231b82&&this['play']();}get['duration'](){return this['_sound']?this['_duration']?es(this['_duration'],this['_sound']['duration']):this['_sound']['duration']:0x23*-0x35+0x1226+-0xae7;}get['isPaused'](){return this['_state']===fn;}get['isPlaying'](){return this['_state']===Zt;}get['isStopped'](){return this['_state']===Hs;}get['isSuspende'+'d'](){return this['_suspended'];}set['loop'](_0x5ed10e){this['_loop']=!!_0x5ed10e,this['source']&&(this['source']['loop']=this['_loop']);}get['loop'](){return this['_loop'];}set['pitch'](_0x3acfbf){this['_currentOf'+'fset']=this['currentTim'+'e'],this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_pitch']=Math['max'](Number(_0x3acfbf)||-0x22ba+-0x2507+-0x9d*-0x75,-0x1ec2+0x1*0x1cb5+0x20d+0.01),this['source']&&(this['source']['playbackRa'+'te']['value']=this['_pitch']);}get['pitch'](){return this['_pitch'];}set['sound'](_0x585965){this['_sound']=_0x585965,this['_state']!==Hs?this['stop']():this['_createSou'+'rce']();}get['sound'](){return this['_sound'];}set['startTime'](_0x33955d){this['_startTime']=Math['max'](-0x43c*-0x1+-0x6a4*-0x2+-0x1184,Number(_0x33955d)||0x26a*-0x4+-0x1*0x2033+0x29db);const _0x4ca68a=this['_state']===Zt;this['stop'](),_0x4ca68a&&this['play']();}get['startTime'](){return this['_startTime'];}set['volume'](_0x17fccd){_0x17fccd=Y['clamp'](_0x17fccd,-0xb04+-0x1*0x10b1+0x1bb5,0xb*0x19c+-0x17ee*-0x1+-0x29a1),this['_volume']=_0x17fccd,this['gain']&&(this['gain']['gain']['value']=_0x17fccd*this['_manager']['volume']);}get['volume'](){return this['_volume'];}['_onPlay'](){this['fire']('play'),this['_onPlayCal'+'lback']&&this['_onPlayCal'+'lback'](this);}['_onPause'](){this['fire']('pause'),this['_onPauseCa'+'llback']&&this['_onPauseCa'+'llback'](this);}['_onResume'](){this['fire']('resume'),this['_onResumeC'+'allback']&&this['_onResumeC'+'allback'](this);}['_onStop'](){this['fire']('stop'),this['_onStopCal'+'lback']&&this['_onStopCal'+'lback'](this);}['_onEnded'](){if(this['_suspendEn'+'dEvent']>0xc8b+0x1d60+-0x29eb){this['_suspendEn'+'dEvent']--;return;}this['fire']('end'),this['_onEndCall'+'back']&&this['_onEndCall'+'back'](this),this['stop']();}['_onManager'+'VolumeChan'+'ge'](){this['volume']=this['_volume'];}['_onManager'+'Suspend'](){this['_state']===Zt&&!this['_suspended']&&(this['_suspended']=!(0x2b*0x9f+-0x19b6+-0xff),this['pause']());}['_onManager'+'Resume'](){this['_suspended']&&(this['_suspended']=!(-0x2192*0x1+0x134c+0xe47),this['resume']());}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['_inputNode']=this['gain'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}['play'](){return this['_state']!==Hs&&this['stop'](),this['_state']=Zt,this['_playWhenL'+'oaded']=!(-0x2e0+-0x17d0+0x1*0x1ab1),this['_waitingCo'+'ntextSuspe'+'nsion']?!(0x3c*-0x89+0x61*-0x37+-0x1*-0x34f4):this['_manager']['suspended']?(this['_manager']['once']('resume',this['_playAudio'+'Immediate'],this),this['_waitingCo'+'ntextSuspe'+'nsion']=!(0x17cc+-0x5*-0x2ba+-0x256e),!(-0xeca+-0xf38+0x3*0xa01)):(this['_playAudio'+'Immediate'](),!(0x3*-0x4d3+0x1505*-0x1+0x289*0xe));}['_playAudio'+'Immediate'](){if(this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0x3ee*-0x1+-0x74*-0x6+-0x6a5*0x1),this['_state']!==Zt)return;this['source']||this['_createSou'+'rce']();let _0x1fedda=es(this['_startOffs'+'et'],this['duration']);_0x1fedda=es(this['_startTime']+_0x1fedda,this['_sound']['duration']),this['_startOffs'+'et']=null,this['_duration']?this['source']['start'](-0x2*0x10a5+-0xf2a+0x3074,_0x1fedda,this['_duration']):this['source']['start'](0x1dc9+-0x224*0x1+-0x1ba5,_0x1fedda),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentTi'+'me']=-0x1*0x38+0x1b62+-0x487*0x6,this['_currentOf'+'fset']=_0x1fedda,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay']();}['pause'](){return this['_playWhenL'+'oaded']=!(0xcee+-0xed5+0x1e8),this['_state']!==Zt?!(-0xdc3+-0xdde+0x83*0x36):(this['_state']=fn,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_updateCur'+'rentTime'](),this['_suspendEn'+'dEvent']++,this['source']['stop'](0x1ce4+-0xe3*0x14+-0xb28),this['source']=null,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause']()),!(-0x61*0x43+0x1*-0x22a6+0x3c09));}['resume'](){if(this['_state']!==fn)return!(0x23ea*0x1+0x1df+0x5d*-0x68);let _0x54943b=this['currentTim'+'e'];return this['_state']=Zt,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['source']||this['_createSou'+'rce'](),this['_startOffs'+'et']!==null&&(_0x54943b=es(this['_startOffs'+'et'],this['duration']),_0x54943b=es(this['_startTime']+_0x54943b,this['_sound']['duration']),this['_startOffs'+'et']=null),this['_duration']?this['source']['start'](0x7c7+-0x1*0x706+0xc1*-0x1,_0x54943b,this['_duration']):this['source']['start'](-0xd45+-0x4*-0x3e5+-0x1*0x24f,_0x54943b),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentOf'+'fset']=_0x54943b,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_playWhenL'+'oaded']=!(0x1aee+-0x3*0xb7f+-0x10*-0x79),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(-0x1*-0x22ef+-0x209*-0x12+-0x4791);}['stop'](){if(this['_playWhenL'+'oaded']=!(0x4*-0x133+0x1a22+-0x1*0x1555),this['_state']===Hs)return!(-0x20d2+0x617*0x2+0x14a5);const _0x1f6edc=this['_state']===Zt;return this['_state']=Hs,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_startedAt']=0x31c+0x78*-0x14+-0x2*-0x322,this['_currentTi'+'me']=-0x5a8+0x8b4+0x30c*-0x1,this['_currentOf'+'fset']=-0x1f78+-0x5*-0x112+0xd0f*0x2,this['_startOffs'+'et']=null,this['_suspendEn'+'dEvent']++,_0x1f6edc&&this['source']&&this['source']['stop'](-0x1*0xd70+-0x2*0x6d7+-0x10b*-0x1a),this['source']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop']()),!(0x1*-0x16c3+-0x4bd*0x8+0x3cab);}['setExterna'+'lNodes'](_0x429d4f,_0x5c08e4){if(!_0x429d4f){console['error']('The\x20firstN'+'ode\x20must\x20b'+'e\x20a\x20valid\x20'+'Audio\x20Node');return;}_0x5c08e4||(_0x5c08e4=_0x429d4f);const _0x5b717a=this['_manager']['context']['destinatio'+'n'];this['_firstNode']!==_0x429d4f&&(this['_firstNode']?this['_connector'+'Node']['disconnect'](this['_firstNode']):this['_connector'+'Node']['disconnect'](_0x5b717a),this['_firstNode']=_0x429d4f,this['_connector'+'Node']['connect'](_0x429d4f)),this['_lastNode']!==_0x5c08e4&&(this['_lastNode']&&this['_lastNode']['disconnect'](_0x5b717a),this['_lastNode']=_0x5c08e4,this['_lastNode']['connect'](_0x5b717a));}['clearExter'+'nalNodes'](){const _0x632bdf=this['_manager']['context']['destinatio'+'n'];this['_firstNode']&&(this['_connector'+'Node']['disconnect'](this['_firstNode']),this['_firstNode']=null),this['_lastNode']&&(this['_lastNode']['disconnect'](_0x632bdf),this['_lastNode']=null),this['_connector'+'Node']['connect'](_0x632bdf);}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_createSou'+'rce'](){if(!this['_sound'])return null;const _0x4ebc0b=this['_manager']['context'];return this['_sound']['buffer']&&(this['source']=_0x4ebc0b['createBuff'+'erSource'](),this['source']['buffer']=this['_sound']['buffer'],this['source']['connect'](this['_inputNode']),this['source']['onended']=this['_endedHand'+'ler'],this['source']['loopStart']=es(this['_startTime'],this['source']['buffer']['duration']),this['_duration']&&(this['source']['loopEnd']=Math['max'](this['source']['loopStart'],es(this['_startTime']+this['_duration'],this['source']['buffer']['duration'])))),this['source'];}['_updateCur'+'rentTime'](){this['_currentTi'+'me']=es((this['_manager']['context']['currentTim'+'e']-this['_startedAt'])*this['_pitch']+this['_currentOf'+'fset'],this['duration']);}['_onManager'+'Destroy'](){this['source']&&this['_state']===Zt&&(this['source']['stop'](-0x28*0x88+-0xf9e+-0x126f*-0x2),this['source']=null);}}h(As,'EVENT_PLAY','play'),h(As,'EVENT_PAUS'+'E','pause'),h(As,'EVENT_RESU'+'ME','resume'),h(As,'EVENT_STOP','stop'),h(As,'EVENT_END','end'),Dl()||(Object['assign'](As['prototype'],{'play':function(){return this['_state']!==Hs&&this['stop'](),!this['source']&&!this['_createSou'+'rce']()?!(0x2*0xbb+0x4*-0x259+0x2a5*0x3):(this['volume']=this['_volume'],this['pitch']=this['_pitch'],this['loop']=this['_loop'],this['source']['play'](),this['_state']=Zt,this['_playWhenL'+'oaded']=!(-0x1dd9+0x47f+0x195b),this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_manager']['suspended']&&this['_onManager'+'Suspend'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay'](),!(-0x20c8*0x1+0x3c5+0x1d03));},'pause':function(){return!this['source']||this['_state']!==Zt?!(0x1e08+-0x1dfc+-0xb):(this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(0x3*0x3e7+0x192f+0x85*-0x47),this['_state']=fn,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause'](),!(-0x4ca*-0x3+0x14*-0x3e+-0x986));},'resume':function(){return!this['source']||this['_state']!==fn?!(-0xd*-0xb3+-0x3e*-0x20+-0x10d6):(this['_state']=Zt,this['_playWhenL'+'oaded']=!(0x5*-0xa1+-0x4*0x7cf+0x2262),this['source']['paused']&&(this['source']['play'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(0x8*-0x39f+0x1f35*-0x1+0x3c2d));},'stop':function(){return!this['source']||this['_state']===Hs?!(0x3e*-0x74+-0x14b*0x7+0x2526):(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(-0x1f36+0x2183+-0x24c),this['_state']=Hs,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop'](),!(0xc5b*0x1+-0x2070+-0x1*-0x1415));},'setExternalNodes':function(){},'clearExternalNodes':function(){},'getExternalNodes':function(){return[null,null];},'_onLoadedMetadata':function(){this['source']['removeEven'+'tListener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['_isReady']=!(-0x119b+0x9c7+0x7d4);let _0x2b4501=es(this['_startOffs'+'et'],this['duration']);_0x2b4501=es(this['_startTime']+_0x2b4501,this['_sound']['duration']),this['_startOffs'+'et']=null,this['source']['currentTim'+'e']=_0x2b4501;},'_createSource':function(){return this['_sound']&&this['_sound']['audio']&&(this['_isReady']=!(0x1*-0x3f+-0x656*-0x1+-0x30b*0x2),this['source']=this['_sound']['audio']['cloneNode'](!(-0x1*-0x1536+-0x1e7*-0x3+-0x1aeb)),this['source']['addEventLi'+'stener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['source']['addEventLi'+'stener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['onended']=this['_endedHand'+'ler']),this['source'];},'_onTimeUpdate':function(){this['_duration']&&this['source']['currentTim'+'e']>es(this['_startTime']+this['_duration'],this['source']['duration'])&&(this['loop']?this['source']['currentTim'+'e']=es(this['_startTime'],this['source']['duration']):(this['source']['removeEven'+'tListener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['pause'](),this['_onEnded']()));},'_onManagerDestroy':function(){this['source']&&this['source']['pause']();}}),Object['defineProp'+'erty'](As['prototype'],'volume',{'get':function(){return this['_volume'];},'set':function(_0x4f0f33){_0x4f0f33=Y['clamp'](_0x4f0f33,-0x1a12*0x1+0x610+0x1*0x1402,0x116d+-0x1c93+0xb27),this['_volume']=_0x4f0f33,this['source']&&(this['source']['volume']=_0x4f0f33*this['_manager']['volume']);}}),Object['defineProp'+'erty'](As['prototype'],'pitch',{'get':function(){return this['_pitch'];},'set':function(_0x2ab5c2){this['_pitch']=Math['max'](Number(_0x2ab5c2)||-0x91a+0x308*-0x4+0xd1*0x1a,0x23b*-0x7+-0xba2+0x1b3f+0.01),this['source']&&(this['source']['playbackRa'+'te']=this['_pitch']);}}),Object['defineProp'+'erty'](As['prototype'],'sound',{'get':function(){return this['_sound'];},'set':function(_0x2bd589){this['stop'](),this['_sound']=_0x2bd589;}}),Object['defineProp'+'erty'](As['prototype'],'currentTim'+'e',{'get':function(){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===Hs||!this['source']?-0x9d2+0x20f1+-0x171f:this['source']['currentTim'+'e']-this['_startTime'];},'set':function(_0x4c9d4b){_0x4c9d4b<-0x1*0xa2a+0x793+0x297||(this['_startOffs'+'et']=_0x4c9d4b,this['source']&&this['_isReady']&&(this['source']['currentTim'+'e']=es(this['_startTime']+es(_0x4c9d4b,this['duration']),this['_sound']['duration']),this['_startOffs'+'et']=null));}}));const Dw=0x1dfc*-0x1+-0x1880+0x5d8c;class sn extends As{constructor(_0x4dd376,_0x12c771,_0x31f015={}){super(_0x4dd376,_0x12c771,_0x31f015),h(this,'_position',new D()),h(this,'_velocity',new D()),(_0x31f015['position']&&(this['position']=_0x31f015['position']),this['maxDistanc'+'e']=_0x31f015['maxDistanc'+'e']!==void(-0x1*-0x1da5+-0x119*-0x3+0x8*-0x41e)?Number(_0x31f015['maxDistanc'+'e']):Dw,this['refDistanc'+'e']=_0x31f015['refDistanc'+'e']!==void(0x26a9+-0x4*0x95f+-0x12d)?Number(_0x31f015['refDistanc'+'e']):-0x385*-0x6+0x1b59*0x1+-0x3076,this['rollOffFac'+'tor']=_0x31f015['rollOffFac'+'tor']!==void(-0x20*0xa7+0x1*0xaad+-0x7*-0x175)?Number(_0x31f015['rollOffFac'+'tor']):-0x107*0x1f+0xa*-0xf6+0x2976,this['distanceMo'+'del']=_0x31f015['distanceMo'+'del']!==void(-0x261f+0x1cc*-0x2+0x29b7)?_0x31f015['distanceMo'+'del']:Vp);}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['panner']=this['_manager']['context']['createPann'+'er'](),this['panner']['connect'](this['gain']),this['_inputNode']=this['panner'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}set['position'](_0x127fa2){this['_position']['copy'](_0x127fa2);const _0x795529=this['panner'];'positionX'in _0x795529?(_0x795529['positionX']['value']=_0x127fa2['x'],_0x795529['positionY']['value']=_0x127fa2['y'],_0x795529['positionZ']['value']=_0x127fa2['z']):_0x795529['setPositio'+'n']&&_0x795529['setPositio'+'n'](_0x127fa2['x'],_0x127fa2['y'],_0x127fa2['z']);}get['position'](){return this['_position'];}set['velocity'](_0x5d6df9){w['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity']['copy'](_0x5d6df9);}get['velocity'](){return w['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity'];}set['maxDistanc'+'e'](_0x534834){this['panner']['maxDistanc'+'e']=_0x534834;}get['maxDistanc'+'e'](){return this['panner']['maxDistanc'+'e'];}set['refDistanc'+'e'](_0x334fb4){this['panner']['refDistanc'+'e']=_0x334fb4;}get['refDistanc'+'e'](){return this['panner']['refDistanc'+'e'];}set['rollOffFac'+'tor'](_0x2b510e){this['panner']['rolloffFac'+'tor']=_0x2b510e;}get['rollOffFac'+'tor'](){return this['panner']['rolloffFac'+'tor'];}set['distanceMo'+'del'](_0x32a93b){this['panner']['distanceMo'+'del']=_0x32a93b;}get['distanceMo'+'del'](){return this['panner']['distanceMo'+'del'];}}if(!Dl()){let l=new D();const t=function(_0x7c7037,_0x15fc34,_0x53e5f1,_0x16bf64,_0x30c35b,_0x44e26a){l=l['sub2'](_0x7c7037,_0x15fc34);const _0x52fb32=l['length']();if(_0x52fb32<_0x53e5f1)return-0x224*-0x11+-0x2c5*0xb+-0x5ec;if(_0x52fb32>_0x16bf64)return 0x454+-0x138*-0x1d+-0x27ac*0x1;let _0x4e9f99=0xbe3*0x2+-0x14fd+0x2c9*-0x1;return _0x44e26a===Vp?_0x4e9f99=-0x77d+0x8fd*0x1+-0x17f*0x1-_0x30c35b*(_0x52fb32-_0x53e5f1)/(_0x16bf64-_0x53e5f1):_0x44e26a===bw?_0x4e9f99=_0x53e5f1/(_0x53e5f1+_0x30c35b*(_0x52fb32-_0x53e5f1)):_0x44e26a===Aw&&(_0x4e9f99=Math['pow'](_0x52fb32/_0x53e5f1,-_0x30c35b)),Y['clamp'](_0x4e9f99,0x2f*-0xa+-0x23b7*0x1+-0x258d*-0x1,0x114a+0x1*-0x18ef+0x7a6);};Object['defineProp'+'erty'](sn['prototype'],'position',{'get':function(){return this['_position'];},'set':function(_0x2ec0a9){if(this['_position']['copy'](_0x2ec0a9),this['source']){const _0x4973f0=this['_manager']['listener']['getPositio'+'n'](),_0x50aa24=t(_0x4973f0,this['_position'],this['refDistanc'+'e'],this['maxDistanc'+'e'],this['rollOffFac'+'tor'],this['distanceMo'+'del']),_0x4eec64=this['volume'];this['source']['volume']=_0x4eec64*_0x50aa24*this['_manager']['volume'];}}}),Object['defineProp'+'erty'](sn['prototype'],'maxDistanc'+'e',{'get':function(){return this['_maxDistan'+'ce'];},'set':function(_0x18fc10){this['_maxDistan'+'ce']=_0x18fc10;}}),Object['defineProp'+'erty'](sn['prototype'],'refDistanc'+'e',{'get':function(){return this['_refDistan'+'ce'];},'set':function(_0x269ed7){this['_refDistan'+'ce']=_0x269ed7;}}),Object['defineProp'+'erty'](sn['prototype'],'rollOffFac'+'tor',{'get':function(){return this['_rollOffFa'+'ctor'];},'set':function(_0x353855){this['_rollOffFa'+'ctor']=_0x353855;}}),Object['defineProp'+'erty'](sn['prototype'],'distanceMo'+'del',{'get':function(){return this['_distanceM'+'odel'];},'set':function(_0x3ffd32){this['_distanceM'+'odel']=_0x3ffd32;}});}const Gp=-0x1c7b+0xb*0x38c+0x1f*-0x57,Hp=0x1c63+0xfbf+-0xd*0x365,Zs=0x26c4+-0x987*-0x3+0x1*-0x4357,Cs=-0x1b99+0x1*-0x4e9+-0x5*-0x681,Gn=-0x34*-0x21+-0x16a7+0x43*0x3d,Wp=0xedb+0xb*-0x26b+-0x1*-0xbc3,Ed=0x12cb+0x17b3+0x8*-0x54f,$p=-0x1ce9*0x1+-0x433*-0x2+0x148a,Xp=-0x257c+0xd4e+-0x1836*-0x1,qp=0xf*-0x175+0x36d*0xa+-0xc5e,jp=0x917+-0xef7*0x2+0x14e1,Yy={[Gp]:'SUBTRACTIV'+'E',[Hp]:'ADDITIVE',[Zs]:'NORMAL',[Cs]:'NONE',[Gn]:'PREMULTIPL'+'IED',[Wp]:'MULTIPLICA'+'TIVE',[Ed]:'ADDITIVEAL'+'PHA',[$p]:'MULTIPLICA'+'TIVE2X',[Xp]:'SCREEN',[qp]:'MIN',[jp]:'MAX'},Kn='none',Iw='linear',Lw=0x1b0c+0xa53+-0x255f,Yp=0x45f+-0x5*-0x4a8+-0x1ba5,Rw={[Lw]:'NONE',[Yp]:'SCHLICK'},Ow=0x694+-0x7*-0xa5+-0xb17*0x1,Ky=0x38c*-0xb+0x569+0x116*0x1f,er=-0x44*0x62+0x985+0x1083,ps=-0x2*0x5b3+-0x19e3+0x254a,Kp=-0x11*0x9d+-0x1d71*0x1+0x27e0,Zp=-0xc1*-0x11+0x1*0x12bf+0x29*-0xc5,Il=-0x227a+0xb18+-0x1*-0x1766,ve=0x1bfa+0x1988+0x1ac1*-0x2,Ke=0xd3*-0x1f+-0x19c7+-0x11*-0x305,Ze=-0x65b*0x5+-0x1fa6+0x3f6f,u_={[ve]:'DIRECTIONA'+'L',[Ke]:'OMNI',[Ze]:'SPOT'},$c=-0x8*0x40+0x262b*-0x1+0x288f,Ys=-0xf23*-0x2+-0x2*0xba8+-0x1b*0x42,Zy=-0x138c+-0x82f*-0x3+0x80*-0xa,Qy=0x2*0x289+0x321*0x6+0x153*-0x12,Jy=-0x7*0x52+-0x1f0e+0x214f,Fw={[Ys]:'PUNCTUAL',[Zy]:'RECT',[Qy]:'DISK',[Jy]:'SPHERE'},Qp=0x18b*0x9+-0x175a+0x977,ev=-0x2*0x116c+-0x177e*0x1+0x3a57,Nw={[Qp]:'LINEAR',[ev]:'INVERSESQU'+'ARED'},$s=0x11d+-0xc4f*-0x2+-0x3ad*0x7,au=0x17*0x12d+0x151+-0x1c5a*0x1,Jp=-0x1a40+-0x267e+0x40c1,kw=0x138d+0x52b+-0x18b4,tv=-0x1*-0x253d+-0x2076+-0x57*0xe,al=-0x107*0xb+-0x3*-0x20b+0x532,sv=0x565*0x5+0x4*-0x500+-0xfe*0x7,iv=-0x1a29+0xad5+0x2*0x7ae,Uw=-0x1*-0x1eb5+0xb*0x264+0x2*-0x1c7c,qi=new Map([[tv,{'name':'PCF1_32F','kind':'PCF1','format':$i,'pcf':!(0x16a2+-0x6ed*0x4+0x512)}],[$s,{'name':'PCF3_32F','kind':'PCF3','format':$i,'pcf':!(0x141a+-0x1*0x24eb+0x10d1)}],[kw,{'name':'PCF5_32F','kind':'PCF5','format':$i,'pcf':!(0x11ad+-0x2*-0x1229+-0x35ff)}],[sv,{'name':'PCF1_16F','kind':'PCF1','format':vn,'pcf':!(0x2378*-0x1+0x407*0x9+-0xc7)}],[iv,{'name':'PCF3_16F','kind':'PCF3','format':vn,'pcf':!(-0x20c3+0x5*0x5e7+-0x4*-0xd0)}],[Uw,{'name':'PCF5_16F','kind':'PCF5','format':vn,'pcf':!(-0x749*-0x2+-0x15d2+-0x10*-0x74)}],[au,{'name':'VSM_16F','kind':'VSM','format':nt,'vsm':!(-0x2e6*-0xa+-0xdf*-0x15+-0x2f47)}],[Jp,{'name':'VSM_32F','kind':'VSM','format':Xt,'vsm':!(0x17ae+-0x7*0x42a+0x578)}],[al,{'name':'PCSS_32F','kind':'PCSS','format':Ji,'pcss':!(-0x1d*0x123+-0x14f2*-0x1+0x11*0xb5)}]]),Bw=-0x21c1+0x2538+0x4f*-0x8,em=-0x493+0x27*-0x6b+0x14e1,nu=0x14ff+0x18bb+-0x2dba,rv=-0x2*-0x431+-0x312+-0x550,ai=-0x1b*0x4d+-0x26a8+0x19*0x1df,zw=0x3f*-0x84+0x2053+0x2a,yh=0x4e*-0x4c+-0x1*-0x9db+0x2a9*0x5,Vw=0x129c+-0x11c5*-0x2+-0x3625,ni=-0x2*0x11d2+0xef9*-0x1+0x329d*0x1,En=0x930*0x4+0x16e*-0xd+-0x1*0x1229,un=-0x1*0x13ff+-0x257c+0x1*0x397b,$r=0x1d8b+-0x519+-0x1871,Jl=-0x3f0+-0x3e*0x3+0x2e*0x1a,tm=0x1*-0x2362+0xbb3+0x17af,av=-0xcdf+0x9*0x2c3+0x1*-0xbfb,Gw={[tm]:'NONE',[av]:'BOX'},p_='mul',Ll=0x1878+0x523*0x3+-0x27e1,Xc=0x1*0x1966+0x14a5+0x2*-0x1705,Hw={[Ll]:'NONE',[Xc]:'SRGB'},sm=-0x21b3*0x1+0xa65*0x3+0x284,UU=0xf*0x107+0x5*0x766+-0x3466,BU=0x37e+-0x6c9*-0x4+0x8*-0x3d4,zU=-0x22*-0x65+-0x1c13*-0x1+-0x297a,VU=-0x1bdc+-0x21cb*0x1+0x3dab,GU=0x12b*0xd+-0x1794+0x86a,nv=0x1*0xe44+-0xb14*0x3+0x12fe,ov=['LINEAR','FILMIC','HEJL','ACES','ACES2','NEUTRAL','NONE'],lv=0x1f1+-0x64*0x4+-0x61,bd=-0xb*-0x5c+-0xafa*0x2+0x1201*0x1,cv=-0x13*0xac+0x1061+-0x47*0xd,Ww={[lv]:'NONE',[bd]:'AO',[cv]:'GLOSSDEPEN'+'DENT'},vr='none',vh='envAtlas',xh='envAtlasHQ',Th='cubeMap',hv='sphereMap',$w={[vr]:'NONE',[vh]:'ENVATLAS',[xh]:'ENVATLASHQ',[Th]:'CUBEMAP',[hv]:'SPHEREMAP'},im='ambientSH',rm='envAtlas',am='constant',Xw={[im]:'AMBIENTSH',[rm]:'ENVALATLAS',[am]:'CONSTANT'},wh=0x1661+-0x87d+-0xde3,nl=-0x9*-0x3a5+0xb6*-0x1d+-0x40f*0x3,nm=-0x15*-0x116+-0xe28+-0x8a2,dv=-0x1fc*-0x10+-0x8*-0x2e3+0xdb4*-0x4,fv=0x65*-0x2e+0x107*-0x1e+0x6*0x82c,ol=-0x1564+-0x25ea+0x3b6e*0x1,ou=-0x25*0x6+0x471+-0x353,uv=-0x23ff*0x1+-0x1b1a*0x1+0x3f99,Eh=0x793+-0x1*-0x99a+-0x102d,om=-0x1acd+0x25c9+-0x8fc,ll=-0x52a*-0x1+-0x25bd*0x1+0x1*0x2493,cl=0x3d7+0x55c+-0x133,pv=0x20b2+0x1077+-0x2129,hl=-0x6e*0x78+0x16e3*-0x1+0x643*0x11,qc=-0x53*-0x7+-0x1e0f+0x5bca,Ps=-0x2286+0x110e+0x1178*0x1,xr=-0x6b*0x59+-0x9*0x7+0x2573,lm=-0x8*-0x12b+-0xb00*-0x2+0x47a*-0x7,Ss=-0x1dd*-0x9+-0x196+-0xf2e*0x1,di=-0x23c9+0x1a6c+0x95f*0x1,fi=0x1f*0x11f+-0x22d3*-0x1+-0x4590,Aa=-0x2041+0x2178+-0x1*0x137,Rl=0x4*-0x87c+-0x1462+0x3653,cm=0x11f0+-0x184*0x2+-0xee6,Zn=-0x829+0x186f+-0x17*0xb5,ci=0x5ca+0xd99+-0x1363,Pt=-0x372+0x23b*0xf+0x2e*-0xa7,Mt=-0x1483+-0x1f0d+0x3392,qw={[ci]:'SIMPLE',[Pt]:'SLICED',[Mt]:'TILED'},jc=-0x201a+0xfde+0x1*0x103d,ec=0x6b6+0x1995+0x204b*-0x1,Yc=-0x10a0+0x10*-0x251+0x2*0x1ad8,jw=-0x1*0x23ef+-0x1*0xf97+0x3387,Yw=0x8d9*-0x2+0x95f+0x4f*0x1b,m_=0x181*-0x1+0xb2a+-0x9a6,Kw=0x1ca7+-0x1bd8+0xcb*-0x1,Zw=-0x8a*-0x7+-0x18c1*-0x1+-0xb2*0x29,hm=0x2451+0xed6+0x87*-0x61,lu=-0x3*-0x872+-0x2664+0x1*0xd0f,Ce=0x1*-0xa41+0x16*-0x1a2+0x2e2d*0x1,je=0xc61+-0xfdb+0x37b,Bo='infinite',Qw='box',Jw='dome',Sa='none',eE='bayer8',tE='bluenoise',sE='ignnoise',iE={[Sa]:'NONE',[eE]:'BAYER8',[tE]:'BLUENOISE',[sE]:'IGNNOISE'},rE='prerender',aE='postrender',nE='prerender:'+'layer',oE='postrender'+':layer',mv='precull',_v='postcull',lE='cull:end';class Ad{constructor(_0x3c1885,_0x1a2405,_0x4a8cb6){h(this,'uniformFor'+'mats',[]),h(this,'bindGroupF'+'ormats',[]),h(this,'vertexForm'+'at'),(this['uniformFor'+'mats'][rl]=_0x3c1885,this['bindGroupF'+'ormats'][rl]=_0x1a2405,this['vertexForm'+'at']=_0x4a8cb6);}['hasUniform'](_0xeb5ed7){for(let _0x2d43d1=-0x1*-0x5ca+-0x1282+0xb*0x128;_0x2d43d1<this['uniformFor'+'mats']['length'];_0x2d43d1++){const _0xc15488=this['uniformFor'+'mats'][_0x2d43d1];if(_0xc15488!=null&&_0xc15488['get'](_0xeb5ed7))return!(-0x1*-0x1cae+-0x32*0x70+0xd*-0x86);}return!(-0x1*-0x15ef+0x1*0x2544+-0x3b32);}['hasTexture'](_0x31a84b){for(let _0x6a0913=-0x1534+0x4*-0x394+0x2384;_0x6a0913<this['bindGroupF'+'ormats']['length'];_0x6a0913++){const _0x45d624=this['bindGroupF'+'ormats'][_0x6a0913];if(_0x45d624!=null&&_0x45d624['getTexture'](_0x31a84b))return!(0x45b*0x1+-0x58f+0x16*0xe);}return!(0x2f6*-0x8+-0x531+0xe71*0x2);}['getVertexE'+'lement'](_0x24b9d7){var _0x3ca398;return(_0x3ca398=this['vertexForm'+'at'])==null?void(-0x22c+0x141a+-0x11ee):_0x3ca398['elements']['find'](_0x3a11d7=>_0x3a11d7['name']===_0x24b9d7);}['generateKe'+'y'](_0x3c623f){var _0x377a9d;let _0x30e8d2=JSON['stringify'](this['uniformFor'+'mats'])+JSON['stringify'](this['bindGroupF'+'ormats']);return _0x3c623f['isWebGPU']&&(_0x30e8d2+=(_0x377a9d=this['vertexForm'+'at'])==null?void(-0xe9*0x4+0x1*-0x1ea6+-0x273*-0xe):_0x377a9d['shaderProc'+'essingHash'+'String']),_0x30e8d2;}}const gv=new Kt();function Hn(_0x2c1d36){const _0xe2c532=gv['get'](_0x2c1d36);return w['assert'](_0xe2c532),_0xe2c532;}function cE(_0x5a5e8b,_0x14e24c){w['assert'](_0x14e24c),gv['get'](_0x5a5e8b,()=>_0x14e24c);}class ya{static['definesHas'+'h'](_0x41430c){const _0x227d18=Array['from'](_0x41430c)['sort']((_0x4ae55e,_0x2f7654)=>_0x4ae55e[-0x1*-0x6b+0x3*0x7f9+-0x1856]>_0x2f7654[-0x1e6d*-0x1+0x18d1+-0x373e]?0x1*0x162d+0x2687+-0x3cb3:-(-0x8e9*0x3+-0x1*-0x86b+0x61b*0x3));return hi(JSON['stringify'](_0x227d18));}}const hE=new Kt();class dE{constructor(_0x509120,_0x5a3d5b,_0x4a9671={}){h(this,'index'),h(this,'name'),h(this,'defines',new Map()),(w['assert'](/^[a-z]\w*$/i['test'](_0x509120),'ShaderPass'+'\x20name\x20can\x20'+'only\x20conta'+'in\x20letters'+',\x20numbers\x20'+'and\x20unders'+'cores\x20and\x20'+'start\x20with'+'\x20a\x20letter:'+'\x20'+_0x509120),this['name']=_0x509120,this['index']=_0x5a3d5b,Object['assign'](this,_0x4a9671),this['buildShade'+'rDefines']());}['buildShade'+'rDefines'](){let _0x4e7d82;this['isShadow']?_0x4e7d82='SHADOW':this['isForward']?_0x4e7d82='FORWARD':this['index']===Zn&&(_0x4e7d82='PICK'),this['defines']['set'](_0x4e7d82+'_PASS',''),this['defines']['set'](this['name']['toUpperCas'+'e']()+'_PASS','');}}class Si{constructor(){h(this,'passesName'+'d',new Map()),h(this,'passesInde'+'xed',[]),h(this,'nextIndex',-0x786*0x2+0x1*-0x20aa+-0x3e*-0xc5);const _0x3f1fc6=(_0x3cc365,_0x2905fb,_0x2f4184)=>{const _0x940fd1=this['allocate'](_0x3cc365,_0x2f4184);w['assert'](_0x940fd1['index']===_0x2905fb);};_0x3f1fc6('forward',Aa,{'isForward':!(-0x6*-0x172+0x24d7*0x1+-0x2d83)}),_0x3f1fc6('prepass',Rl),_0x3f1fc6('shadow',cm),_0x3f1fc6('pick',Zn);}static['get'](_0x51f3b8){return w['assert'](_0x51f3b8),hE['get'](_0x51f3b8,()=>new Si());}['allocate'](_0x45c685,_0x3e18d7){let _0xab9cee=this['passesName'+'d']['get'](_0x45c685);return _0xab9cee===void(0x118f+-0x2286+0x2b*0x65)&&(_0xab9cee=new dE(_0x45c685,this['nextIndex'],_0x3e18d7),this['passesName'+'d']['set'](_0xab9cee['name'],_0xab9cee),this['passesInde'+'xed'][_0xab9cee['index']]=_0xab9cee,this['nextIndex']++),_0xab9cee;}['getByIndex'](_0x7430fd){const _0x40e4ba=this['passesInde'+'xed'][_0x7430fd];return w['assert'](_0x40e4ba),_0x40e4ba;}['getByName'](_0x4fc8ed){return this['passesName'+'d']['get'](_0x4fc8ed);}}class __ extends Map{constructor(){super(...arguments),h(this,'_keyDirty',!(0xb*0x379+-0x17f8+-0xe3a)),h(this,'_key','');}['set'](_0x4d9435,_0x307f08){return(!this['has'](_0x4d9435)||this['get'](_0x4d9435)!==_0x307f08)&&this['markDirty'](),super['set'](_0x4d9435,_0x307f08);}['add'](_0x1ad245){for(const [_0x3ef42d,_0x1966b7]of Object['entries'](_0x1ad245))this['set'](_0x3ef42d,_0x1966b7);return this;}['delete'](_0x741d35){const _0x31655c=this['has'](_0x741d35),_0x540e1e=super['delete'](_0x741d35);return _0x31655c&&_0x540e1e&&this['markDirty'](),_0x540e1e;}['clear'](){this['size']>0x1*0x799+-0x1*0x24ad+0x745*0x4&&this['markDirty'](),super['clear']();}['markDirty'](){this['_dirty']=!(-0x939+-0x1ce1+-0x130d*-0x2),this['_keyDirty']=!(0x8d2+0x9c+-0x96e);}['isDirty'](){return this['_dirty'];}['resetDirty'](){this['_dirty']=!(-0x9d5+0xf59+-0x11*0x53);}get['key'](){return this['_keyDirty']&&(this['_keyDirty']=!(-0x18b6*-0x1+-0x691+-0x1224*0x1),this['_key']=Array['from'](this['entries']())['sort'](([_0x3ca98b],[_0x3ba46e])=>_0x3ca98b<_0x3ba46e?-(0x15b4+-0x13a2+-0x211):_0x3ca98b>_0x3ba46e?0x1add+0xcce+-0x27aa:0x2*-0xa62+-0x2156+0x361a)['map'](([_0x2390df,_0x266194])=>_0x2390df+'='+hi(_0x266194))['join'](',')),this['_key'];}['copy'](_0x210d09){this['clear']();for(const [_0x3cf75f,_0x50fc39]of _0x210d09)this['set'](_0x3cf75f,_0x50fc39);return this;}}const fE=new Kt();class Pe{constructor(){h(this,'glsl',new __()),h(this,'wgsl',new __()),h(this,'version','');}static['get'](_0x431b9,_0x5e056a=Fe){const _0x9e032a=fE['get'](_0x431b9,()=>new Pe());return _0x5e056a===Fe?_0x9e032a['glsl']:_0x9e032a['wgsl'];}get['useWGSL'](){return this['glsl']['size']===0x1*0xbf5+-0x2*0xb1a+-0x2b*-0x3d||this['wgsl']['size']>0xeed+0x62e*0x1+-0x151b;}get['key'](){return'GLSL:'+this['glsl']['key']+'|WGSL:'+this['wgsl']['key']+'|API:'+this['version'];}['isDirty'](){return this['glsl']['isDirty']()||this['wgsl']['isDirty']();}['resetDirty'](){this['glsl']['resetDirty'](),this['wgsl']['resetDirty']();}['copy'](_0x597b8c){return this['version']=_0x597b8c['version'],this['glsl']['copy'](_0x597b8c['glsl']),this['wgsl']['copy'](_0x597b8c['wgsl']),this;}}class bh{static['merge'](..._0x5afd23){const _0x28505c=new Map(_0x5afd23[-0x69a+-0x4*0x2ec+0x124a]??[]);for(let _0xac325b=0x1a5*-0x2+0x1ff7+-0xe56*0x2;_0xac325b<_0x5afd23['length'];_0xac325b++){const _0x4e244f=_0x5afd23[_0xac325b];if(_0x4e244f){for(const [_0x57c422,_0x3177c0]of _0x4e244f)_0x28505c['set'](_0x57c422,_0x3177c0);}}return _0x28505c;}}class uE extends ya{constructor(_0x17d5ff,_0x58010f){super(),this['key']=_0x17d5ff,this['shaderDefi'+'nition']=_0x58010f;}['generateKe'+'y'](_0x39b3fa){return this['key'];}['createShad'+'erDefiniti'+'on'](_0x38c1f3,_0xd09ec1){return this['shaderDefi'+'nition'];}}class $t{static['createShad'+'er'](_0x2a9999,_0x32fc23){const _0xec90a5=Hn(_0x2a9999);let _0x10525d=_0xec90a5['getCachedS'+'hader'](_0x32fc23['uniqueName']);if(!_0x10525d){const _0x505c0f=_0x2a9999['isWebGPU']&&(!!_0x32fc23['vertexWGSL']||!!_0x32fc23['vertexChun'+'k'])&&(!!_0x32fc23['fragmentWG'+'SL']||!!_0x32fc23['fragmentCh'+'unk']),_0x4af565=Pe['get'](_0x2a9999,_0x505c0f?it:Fe),_0x5f1df6=_0x32fc23['vertexChun'+'k']?_0x4af565['get'](_0x32fc23['vertexChun'+'k']):_0x505c0f?_0x32fc23['vertexWGSL']:_0x32fc23['vertexGLSL'],_0x2329d2=_0x32fc23['fragmentCh'+'unk']?_0x4af565['get'](_0x32fc23['fragmentCh'+'unk']):_0x505c0f?_0x32fc23['fragmentWG'+'SL']:_0x32fc23['fragmentGL'+'SL'];w['assert'](_0x5f1df6,'ShaderUtil'+'s.createSh'+'ader:\x20vert'+'ex\x20shader\x20'+'code\x20not\x20p'+'rovided',_0x32fc23),w['assert'](_0x2329d2,'ShaderUtil'+'s.createSh'+'ader:\x20frag'+'ment\x20shade'+'r\x20code\x20not'+'\x20provided',_0x32fc23);const _0x3dfc4b=bh['merge'](_0x4af565,_0x32fc23['fragmentIn'+'cludes']),_0x4b4e76=bh['merge'](_0x4af565,_0x32fc23['vertexIncl'+'udes']);_0x10525d=new qy(_0x2a9999,Jt['createDefi'+'nition'](_0x2a9999,{'name':_0x32fc23['uniqueName'],'shaderLanguage':_0x505c0f?it:Fe,'attributes':_0x32fc23['attributes'],'vertexCode':_0x5f1df6,'fragmentCode':_0x2329d2,'useTransformFeedback':_0x32fc23['useTransfo'+'rmFeedback'],'vertexIncludes':_0x4b4e76,'vertexDefines':_0x32fc23['vertexDefi'+'nes'],'fragmentIncludes':_0x3dfc4b,'fragmentDefines':_0x32fc23['fragmentDe'+'fines'],'fragmentOutputTypes':_0x32fc23['fragmentOu'+'tputTypes']})),_0xec90a5['setCachedS'+'hader'](_0x32fc23['uniqueName'],_0x10525d);}return _0x10525d;}static['getCoreDef'+'ines'](_0x3ad10f,_0x4101bd){const _0x1aba58=new Map(_0x3ad10f['defines']);return _0x4101bd['cameraShad'+'erParams']['defines']['forEach']((_0x5cfa19,_0x11ee70)=>_0x1aba58['set'](_0x11ee70,_0x5cfa19)),Si['get'](_0x4101bd['device'])['getByIndex'](_0x4101bd['pass'])['defines']['forEach']((_0x32b8a2,_0x49abdd)=>_0x1aba58['set'](_0x49abdd,_0x32b8a2)),_0x1aba58;}static['processSha'+'der'](_0x42e564,_0x5f598e){w['assert'](_0x42e564);const _0x2f5848=_0x42e564['definition'],_0x116018=(_0x2f5848['name']??'shader')+'-id-'+_0x42e564['id'],_0x32399f=new uE(_0x116018,_0x2f5848),_0x21e664='shader',_0x3c1473=Hn(_0x42e564['device']);w['assert'](!_0x3c1473['isRegister'+'ed'](_0x21e664)),_0x3c1473['register'](_0x21e664,_0x32399f);const _0x51b76f=_0x3c1473['getProgram'](_0x21e664,{},_0x5f598e);return _0x3c1473['unregister'](_0x21e664),_0x51b76f;}static['addScreenD'+'epthChunkD'+'efines'](_0x46d2ab,_0xb3415f,_0x1898b1){_0xb3415f['sceneDepth'+'MapLinear']&&_0x1898b1['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',''),_0x46d2ab['textureFlo'+'atRenderab'+'le']&&_0x1898b1['set']('SCENE_DEPT'+'HMAP_FLOAT','');}}const pE={'type':Er,'base':0x0,'baseVertex':0x0,'count':0x4,'indexed':!(-0x1113*-0x2+-0x8*-0x254+-0x34c5)},so=new re(),io=new re(),Gd=new ky();class Ah{constructor(_0x559905){h(this,'uniformBuf'+'fer'),h(this,'bindGroup');const _0x3d993d=_0x559905['device'];if(this['shader']=_0x559905,w['assert'](_0x559905),_0x3d993d['supportsUn'+'iformBuffe'+'rs']){const _0x2a8f77=new Ad();this['shader']=$t['processSha'+'der'](_0x559905,_0x2a8f77);const _0xe8b5a2=this['shader']['meshUnifor'+'mBufferFor'+'mat'];_0xe8b5a2&&(this['uniformBuf'+'fer']=new zp(_0x3d993d,_0xe8b5a2,!(-0x1c69+-0x1fb7*-0x1+-0x34d)));const _0x5544b7=this['shader']['meshBindGr'+'oupFormat'];w['assert'](_0x5544b7),this['bindGroup']=new Up(_0x3d993d,_0x5544b7),Ea['setName'](this['bindGroup'],'QuadRender'+'-MeshBindG'+'roup_'+this['bindGroup']['id']);}}['destroy'](){var _0x2f31d5,_0x2fae91;(_0x2f31d5=this['uniformBuf'+'fer'])==null||_0x2f31d5['destroy'](),this['uniformBuf'+'fer']=null,(_0x2fae91=this['bindGroup'])==null||_0x2fae91['destroy'](),this['bindGroup']=null;}['render'](_0x2a86c8,_0x518e9d){const _0xc6883=this['shader']['device'];Q['pushGpuMar'+'ker'](_0xc6883,'QuadRender'),_0x2a86c8&&(so['set'](_0xc6883['vx'],_0xc6883['vy'],_0xc6883['vw'],_0xc6883['vh']),io['set'](_0xc6883['sx'],_0xc6883['sy'],_0xc6883['sw'],_0xc6883['sh']),_0x518e9d=_0x518e9d??_0x2a86c8,_0xc6883['setViewpor'+'t'](_0x2a86c8['x'],_0x2a86c8['y'],_0x2a86c8['z'],_0x2a86c8['w']),_0xc6883['setScissor'](_0x518e9d['x'],_0x518e9d['y'],_0x518e9d['z'],_0x518e9d['w'])),_0xc6883['setVertexB'+'uffer'](_0xc6883['quadVertex'+'Buffer'],-0xd64+-0x1fe6+0x2d4a);const _0x56b975=this['shader'];if(_0xc6883['setShader'](_0x56b975),_0xc6883['supportsUn'+'iformBuffe'+'rs']){_0xc6883['setBindGro'+'up'](rl,_0xc6883['emptyBindG'+'roup']);const _0x3866d1=this['bindGroup'];_0x3866d1['update'](),_0xc6883['setBindGro'+'up'](Oy,_0x3866d1);const _0x4f5c7e=this['uniformBuf'+'fer'];_0x4f5c7e?(_0x4f5c7e['update'](Gd),_0xc6883['setBindGro'+'up'](su,Gd['bindGroup'],Gd['offsets'])):_0xc6883['setBindGro'+'up'](su,_0xc6883['emptyBindG'+'roup']);}_0xc6883['draw'](pE),_0x2a86c8&&(_0xc6883['setViewpor'+'t'](so['x'],so['y'],so['z'],so['w']),_0xc6883['setScissor'](io['x'],io['y'],io['z'],io['w'])),Q['popGpuMark'+'er'](_0xc6883);}}class mE extends ys{constructor(_0x129263,_0x59c025,_0x10a2a3,_0x405cb2){super(_0x129263),this['quad']=_0x59c025,this['rect']=_0x10a2a3,this['scissorRec'+'t']=_0x405cb2;}['execute'](){const {device:_0x443e26}=this;Q['pushGpuMar'+'ker'](_0x443e26,this['name']+':'+this['quad']['shader']['name']),_0x443e26['setCullMod'+'e'](bt),_0x443e26['setDepthSt'+'ate'](Yt['NODEPTH']),_0x443e26['setStencil'+'State'](null,null),this['quad']['render'](this['rect'],this['scissorRec'+'t']),Q['popGpuMark'+'er'](_0x443e26);}}const _E=new re();function Ar(_0x4fc706,_0x35d082,_0x2f36a8,_0x5d4eac,_0x400aa0){w['assert'](_0x35d082!==void(-0x1*-0x1d13+-0x1*-0x33b+0x33b*-0xa));const _0x57cf3d=arguments[-0x254e+-0x4e4*-0x2+0x1*0x1b8b];w['call'](()=>{_0x57cf3d!==void(-0x2328+0x1279+0x10af)&&w['warnOnce']('pc.drawQua'+'dWithShade'+'r\x20no\x20longe'+'r\x20accepts\x20'+'useBlend\x20p'+'arameter,\x20'+'and\x20blendi'+'ng\x20state\x20n'+'eeds\x20to\x20be'+'\x20set\x20up\x20us'+'ing\x20Graphi'+'csDevice.s'+'etBlendSta'+'te.');});const _0x5ba46f=new Ah(_0x2f36a8);_0x5d4eac||(_0x5d4eac=_E,_0x5d4eac['x']=-0x1a3b+-0xb2b*0x1+0x12b3*0x2,_0x5d4eac['y']=-0x38b+-0xe4e+0x5f3*0x3,_0x5d4eac['z']=_0x35d082?_0x35d082['width']:_0x4fc706['width'],_0x5d4eac['w']=_0x35d082?_0x35d082['height']:_0x4fc706['height']);const _0x16fba3=new mE(_0x4fc706,_0x5ba46f,_0x5d4eac,_0x400aa0);_0x16fba3['init'](_0x35d082),_0x16fba3['colorOps']['clear']=!(0x29*-0x4f+0x4*0x26e+0x5e*0x8),_0x16fba3['depthStenc'+'ilOps']['clearDepth']=!(0x10ff+0x1114+-0x2212*0x1),_0x4fc706['isWebGPU']&&_0x35d082===null&&_0x4fc706['samples']>-0x1070+-0xfbc+-0x202d*-0x1&&(_0x16fba3['colorOps']['store']=!(-0x29*-0x71+0x19a3+0x26e*-0x12)),_0x16fba3['render'](),_0x5ba46f['destroy']();}class g_{constructor(_0x537bc5,_0x52a30a,_0x2e8e35){h(this,'_aabb',new De()),h(this,'origMeshIn'+'stances'),h(this,'meshInstan'+'ce',null),h(this,'dynamic'),h(this,'batchGroup'+'Id'),(this['origMeshIn'+'stances']=_0x537bc5,this['dynamic']=_0x52a30a,this['batchGroup'+'Id']=_0x2e8e35);}['destroy'](_0x56f0de,_0x2d0f62){this['meshInstan'+'ce']&&(this['removeFrom'+'Layers'](_0x56f0de,_0x2d0f62),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}['addToLayer'+'s'](_0x3d4903,_0x42ccd6){for(let _0x1ea509=-0x32d+0x100*0x4+-0xd3;_0x1ea509<_0x42ccd6['length'];_0x1ea509++){const _0x19bacd=_0x3d4903['layers']['getLayerBy'+'Id'](_0x42ccd6[_0x1ea509]);_0x19bacd&&_0x19bacd['addMeshIns'+'tances']([this['meshInstan'+'ce']]);}}['removeFrom'+'Layers'](_0x1636b7,_0x62c358){for(let _0x30c2be=-0x10a7+-0x1*-0xa31+0x33b*0x2;_0x30c2be<_0x62c358['length'];_0x30c2be++){const _0x183f17=_0x1636b7['layers']['getLayerBy'+'Id'](_0x62c358[_0x30c2be]);_0x183f17&&_0x183f17['removeMesh'+'Instances']([this['meshInstan'+'ce']]);}}['updateBoun'+'dingBox'](){this['_aabb']['copy'](this['origMeshIn'+'stances'][-0x5f0+-0x1*-0x9ad+-0x1*0x3bd]['aabb']);for(let _0x3af56c=-0x11e7+0x823+-0x1*-0x9c5;_0x3af56c<this['origMeshIn'+'stances']['length'];_0x3af56c++)this['_aabb']['add'](this['origMeshIn'+'stances'][_0x3af56c]['aabb']);this['meshInstan'+'ce']['aabb']=this['_aabb'],this['meshInstan'+'ce']['_aabbVer']=0x1*-0x98f+-0xb0c+-0xd3*-0x19;}get['model'](){w['removed']('pc.Batch#m'+'odel\x20was\x20r'+'emoved.\x20Us'+'e\x20pc.Batch'+'#meshInsta'+'nce\x20to\x20acc'+'ess\x20batche'+'d\x20mesh\x20ins'+'tead.');}}class St{constructor(_0x2c95a6,_0x6ce324,_0x52005c,_0x174335,_0x3bb707=[er]){h(this,'_ui',!(-0x163*0x8+0x227d+0x6*-0x3e6)),h(this,'_sprite',!(-0x5*0x10+-0x242c+0x247d)),h(this,'_obj',{'model':[],'element':[],'sprite':[],'render':[]}),h(this,'id'),h(this,'name'),h(this,'dynamic'),h(this,'maxAabbSiz'+'e'),h(this,'layers'),(this['id']=_0x2c95a6,this['name']=_0x6ce324,this['dynamic']=_0x52005c,this['maxAabbSiz'+'e']=_0x174335,this['layers']=_0x3bb707);}}h(St,'MODEL','model'),h(St,'ELEMENT','element'),h(St,'SPRITE','sprite'),h(St,'RENDER','render');const S_=new te();class Ol{constructor(_0x1c0ee4){h(this,'bones'),(this['_dirty']=!(-0x217f+0x1c3d+0x542),this['_rootBone']=null,this['_skinUpdat'+'eIndex']=-(-0x7a6*0x1+-0x3*0xa83+0x26*0x108),this['_updateBef'+'oreCull']=!(-0x7f*0x28+0x55*0x14+0x4*0x34d),_0x1c0ee4&&this['initSkin'](_0x1c0ee4));}set['rootBone'](_0x20bfd8){this['_rootBone']=_0x20bfd8;}get['rootBone'](){return this['_rootBone'];}['init'](_0x231f7c,_0x4c8bba){const _0x5e90b1=_0x4c8bba*(-0x110d+-0x1*0x4d0+0x320*0x7);let _0x5d19fd=Math['ceil'](Math['sqrt'](_0x5e90b1));_0x5d19fd=Y['roundUp'](_0x5d19fd,-0x1019+-0x2*-0xf4e+-0xe80);const _0x3830ab=Math['ceil'](_0x5e90b1/_0x5d19fd);this['boneTextur'+'e']=new _e(_0x231f7c,{'width':_0x5d19fd,'height':_0x3830ab,'format':Xt,'mipmaps':!(-0x1*-0x5c5+-0x1288+0xcc4),'minFilter':Te,'magFilter':Te,'name':'skin'}),this['matrixPale'+'tte']=this['boneTextur'+'e']['lock']({'mode':yy}),this['boneTextur'+'e']['unlock']();}['destroy'](){this['boneTextur'+'e']&&(this['boneTextur'+'e']['destroy'](),this['boneTextur'+'e']=null);}['resolve'](_0x47de30,_0x7fd3a5){this['rootBone']=_0x47de30;const _0x48925e=this['skin'],_0x37964d=[];for(let _0x9fd920=-0xb00+0x227f+0x177f*-0x1;_0x9fd920<_0x48925e['boneNames']['length'];_0x9fd920++){const _0x1eb143=_0x48925e['boneNames'][_0x9fd920];let _0x4f27fa=_0x47de30['findByName'](_0x1eb143);_0x4f27fa||(w['error']('Failed\x20to\x20'+'find\x20bone\x20'+'['+_0x1eb143+(']\x20in\x20the\x20e'+'ntity\x20hier'+'archy,\x20Ren'+'derCompone'+'nt\x20on\x20')+_0x7fd3a5['name']+(',\x20rootBone'+':\x20')+_0x47de30['name']),_0x4f27fa=_0x7fd3a5),_0x37964d['push'](_0x4f27fa);}this['bones']=_0x37964d;}['initSkin'](_0x1f86aa){this['skin']=_0x1f86aa,this['bones']=[];const _0x51d8ae=_0x1f86aa['inverseBin'+'dPose']['length'];this['init'](_0x1f86aa['device'],_0x51d8ae),this['matrices']=[];for(let _0x233637=0x94d+0x1279*0x1+0x18b*-0x12;_0x233637<_0x51d8ae;_0x233637++)this['matrices'][_0x233637]=new te();}['uploadBone'+'s'](_0x376768){this['boneTextur'+'e']['upload']();}['_updateMat'+'rices'](_0x3bc850,_0x1445a1){if(this['_skinUpdat'+'eIndex']!==_0x1445a1){this['_skinUpdat'+'eIndex']=_0x1445a1,S_['copy'](_0x3bc850['getWorldTr'+'ansform']())['invert']();for(let _0x519e03=this['bones']['length']-(-0x22e5*0x1+-0x122b+0x3511);_0x519e03>=0x255f+0x1eec+-0x1*0x444b;_0x519e03--)this['matrices'][_0x519e03]['mulAffine2'](S_,this['bones'][_0x519e03]['getWorldTr'+'ansform']()),this['matrices'][_0x519e03]['mulAffine2'](this['matrices'][_0x519e03],this['skin']['inverseBin'+'dPose'][_0x519e03]);}}['updateMatr'+'ices'](_0xadfd05,_0x35404b){this['_updateBef'+'oreCull']&&this['_updateMat'+'rices'](_0xadfd05,_0x35404b);}['updateMatr'+'ixPalette'](_0x397f01,_0xb8b207){this['_updateMat'+'rices'](_0x397f01,_0xb8b207);const _0xe06d6f=this['matrixPale'+'tte'],_0x4dbde8=this['bones']['length'];for(let _0x32b263=-0x2*0x391+-0x2244+0x2966;_0x32b263<_0x4dbde8;_0x32b263++){const _0x106939=this['matrices'][_0x32b263]['data'],_0x518ef9=_0x32b263*(0x12d6+0x1263*-0x1+-0x1*0x67);_0xe06d6f[_0x518ef9]=_0x106939[0x1b59+0x8c4+-0x739*0x5],_0xe06d6f[_0x518ef9+(-0x89d+0x1c6c+-0xa*0x1fb)]=_0x106939[0x13*0x131+-0x15b8+-0xe7],_0xe06d6f[_0x518ef9+(0x11*-0xc8+0x107e*0x1+0x4*-0xcd)]=_0x106939[-0x15d6+0x1*-0x1876+0x2e54],_0xe06d6f[_0x518ef9+(-0x2cf*0x5+-0x1230+0x2*0x101f)]=_0x106939[-0x267b+-0x4*-0x29c+-0x31f*-0x9],_0xe06d6f[_0x518ef9+(0x1894+0xfdd*0x1+-0x286d)]=_0x106939[-0x2e6+0xc39+-0x952],_0xe06d6f[_0x518ef9+(0x1fbd+0x10b9+-0x3071)]=_0x106939[0x1*0x1511+-0x2*-0xdfd+-0x3106],_0xe06d6f[_0x518ef9+(-0xf*-0x1+-0x23ca+0x23c1)]=_0x106939[0x1a9b+0x1692+-0x3124],_0xe06d6f[_0x518ef9+(0x20a6*-0x1+-0x13fb+-0x28*-0x151)]=_0x106939[0xd5a+-0x1da2*0x1+0x71*0x25],_0xe06d6f[_0x518ef9+(0x1*-0x2302+0x45e*-0x3+0x9e*0x4e)]=_0x106939[-0x1f27+0x23*0x75+0xf2a],_0xe06d6f[_0x518ef9+(-0x99b+-0x3cc+0xd70)]=_0x106939[0x1afe+0xef*0x12+-0x2bc6],_0xe06d6f[_0x518ef9+(-0x2391+0x7*-0x499+0x43ca*0x1)]=_0x106939[-0x1d*0x6b+0x1e31+-0x2*0x904],_0xe06d6f[_0x518ef9+(0xeb4*-0x2+0x4*-0x3cc+0xee1*0x3)]=_0x106939[-0x72*0x34+-0x28d+-0x5*-0x527];}this['uploadBone'+'s'](this['skin']['device']);}}class y_ extends Ol{constructor(_0x5542cc,_0x341dce,_0x2b3d0b){super();const _0x283588=_0x341dce['length'];this['init'](_0x5542cc,_0x283588),this['device']=_0x5542cc,this['rootNode']=_0x2b3d0b,this['bones']=_0x341dce;}['updateMatr'+'ices'](_0x4bf3d3,_0x2e7723){}['updateMatr'+'ixPalette'](_0x2514eb,_0x53a989){const _0x17df7a=this['matrixPale'+'tte'],_0x353384=this['bones']['length'];for(let _0x259d11=-0x4bb*0x7+-0xbec+0x2d09;_0x259d11<_0x353384;_0x259d11++){const _0xefbd2e=this['bones'][_0x259d11]['getWorldTr'+'ansform']()['data'],_0x148268=_0x259d11*(0x1875+-0x1*0x2699+0x4*0x38c);_0x17df7a[_0x148268]=_0xefbd2e[-0x1*0x1d07+-0x590*-0x3+0x51*0x27],_0x17df7a[_0x148268+(0x68d*-0x2+-0x3ad+-0x2cc*-0x6)]=_0xefbd2e[0x1eb3*-0x1+0x150f+0x9a8],_0x17df7a[_0x148268+(0x4*0x5e+0x138d+-0x1503*0x1)]=_0xefbd2e[-0x2*-0x336+0xa7e+-0x2*0x871],_0x17df7a[_0x148268+(-0x1a01+-0xc60*-0x3+-0xb1c)]=_0xefbd2e[-0xe07+0x1f85+-0x1172],_0x17df7a[_0x148268+(0x1de5+0x1*0x1daa+-0x3b8b)]=_0xefbd2e[-0x1bdd+-0x879+0x2457],_0x17df7a[_0x148268+(-0x1c93+0xac+0x1bec)]=_0xefbd2e[0x1352+0x2a1*-0x1+-0x10ac],_0x17df7a[_0x148268+(-0x4*0x972+-0x21d9*0x1+0x47a7)]=_0xefbd2e[0x6bf*-0x2+-0x133c+0x20c3],_0x17df7a[_0x148268+(0xa6*-0x1b+0x6*0x247+0x3df)]=_0xefbd2e[0x977*-0x1+-0x95f*-0x2+-0x93a],_0x17df7a[_0x148268+(-0xce1+0x195b+-0xc72*0x1)]=_0xefbd2e[-0x221c+0x1b41+0x7*0xfb],_0x17df7a[_0x148268+(0x1daf*0x1+-0x1*-0x3c7+0x216d*-0x1)]=_0xefbd2e[-0xc7*0x10+0x2185+0x3*-0x705],_0x17df7a[_0x148268+(-0xac2*-0x3+-0x3*-0x9d9+0x1*-0x3dc7)]=_0xefbd2e[-0x1*0x2174+-0x3*0xbd5+0x44fd*0x1],_0x17df7a[_0x148268+(0xdc6+-0x85d+-0x55e)]=_0xefbd2e[0x1fd9*-0x1+0x1297+0x354*0x4];}this['uploadBone'+'s'](this['device']);}}let gE=0xf9*0xd+0x1161+0x12*-0x1ab;class oi{constructor(){this['initDefaul'+'ts']();}['initDefaul'+'ts'](){this['recreate']=!(-0x1a7d*-0x1+0x1a6a+-0x16e*0x25),this['verticesUs'+'age']=ms,this['indicesUsa'+'ge']=ms,this['maxVertice'+'s']=-0x1f4+0x80e+0x8e*-0xb,this['maxIndices']=-0x11ca+0x1115*0x1+0xb5*0x1,this['vertexCoun'+'t']=0x2277+-0x49*-0x62+0x4cd*-0xd,this['indexCount']=-0x2682+0x3*-0x36e+0x30cc,this['vertexStre'+'amsUpdated']=!(-0x1*0x1079+0x1f58+-0xede),this['indexStrea'+'mUpdated']=!(0x1c8e+-0x369*0x4+0x15b*-0xb),this['vertexStre'+'amDictiona'+'ry']={},this['indices']=null;}['_changeVer'+'texCount'](_0x552afa,_0xfd39ce){this['vertexCoun'+'t']?w['assert'](this['vertexCoun'+'t']===_0x552afa,'Vertex\x20str'+'eam\x20'+_0xfd39ce+'\x20has\x20'+_0x552afa+('\x20vertices,'+'\x20which\x20doe'+'s\x20not\x20matc'+'h\x20already\x20'+'set\x20stream'+'s\x20with\x20')+this['vertexCoun'+'t']+'\x20vertices.'):this['vertexCoun'+'t']=_0x552afa;}}h(oi,'DEFAULT_CO'+'MPONENTS_P'+'OSITION',-0x1*0x7c1+0xb*0x2d3+0x4a9*-0x5),h(oi,'DEFAULT_CO'+'MPONENTS_N'+'ORMAL',-0x1*-0x117f+-0x26da+0x155e),h(oi,'DEFAULT_CO'+'MPONENTS_U'+'V',0x5*0x15b+-0x22*0x1+-0x6a3),h(oi,'DEFAULT_CO'+'MPONENTS_C'+'OLORS',0x7*-0x4e5+-0x7*0x176+-0x1*-0x2c81);class SE{constructor(_0x33990a,_0x172b15,_0x237347,_0x4374c4,_0x133b1e){this['data']=_0x33990a,this['componentC'+'ount']=_0x172b15,this['dataType']=_0x237347,this['dataTypeNo'+'rmalize']=_0x4374c4,this['asInt']=_0x133b1e;}}class Ge extends wd{constructor(_0x1b9241,_0x29d6ba){super(),h(this,'indexBuffe'+'r',[null]),h(this,'vertexBuff'+'er',null),h(this,'primitive',[{'type':0x0,'base':0x0,'baseVertex':0x0,'count':0x0}]),h(this,'skin',null),h(this,'boneAabb',null),h(this,'_aabbVer',-0x2396*0x1+0x1*-0xbd3+0x2f69),h(this,'_aabb',new De()),h(this,'_geometryD'+'ata',null),h(this,'_morph',null),h(this,'_storageIn'+'dex',!(0xb*0x54+0x1a9a+-0x1e35)),h(this,'_storageVe'+'rtex',!(0x8f+0x1a*-0x52+0x7c6)),(this['id']=gE++,w['assert'](_0x1b9241,'Mesh\x20const'+'ructor\x20tak'+'es\x20a\x20Graph'+'icsDevice\x20'+'as\x20a\x20param'+'eter,\x20and\x20'+'it\x20was\x20not'+'\x20provided.'),this['device']=_0x1b9241,this['_storageIn'+'dex']=(_0x29d6ba==null?void(0x1f*-0xf9+-0x4*0x581+0x5*0xa6f):_0x29d6ba['storageInd'+'ex'])||!(-0x1*-0x1e93+-0x39*0x6f+-0x5db),this['_storageVe'+'rtex']=(_0x29d6ba==null?void(-0x4c3+0x16ec+-0x1*0x1229):_0x29d6ba['storageVer'+'tex'])||!(-0x1e*-0xc0+0x1b79*0x1+-0x31f8));}static['fromGeomet'+'ry'](_0x436681,_0x5ed039,_0x12c306={}){const _0x1ce882=new Ge(_0x436681,_0x12c306),{positions:_0x2bc384,normals:_0x46dc14,tangents:_0x55cd65,colors:_0x232ae5,uvs:_0x11eeae,uvs1:_0x564c6f,blendIndices:_0x4644e8,blendWeights:_0x1c2524,indices:_0x469e08}=_0x5ed039;return _0x2bc384&&_0x1ce882['setPositio'+'ns'](_0x2bc384),_0x46dc14&&_0x1ce882['setNormals'](_0x46dc14),_0x55cd65&&_0x1ce882['setVertexS'+'tream'](yi,_0x55cd65,0x128+0xe0d+-0x1*0xf31),_0x232ae5&&_0x1ce882['setColors3'+'2'](_0x232ae5),_0x11eeae&&_0x1ce882['setUvs'](0x1f43*0x1+-0x7a9*0x1+0x179a*-0x1,_0x11eeae),_0x564c6f&&_0x1ce882['setUvs'](0x6a3+-0xb2f*-0x1+-0x11d1,_0x564c6f),_0x4644e8&&_0x1ce882['setVertexS'+'tream'](us,_0x4644e8,0x35*-0xad+-0x65*-0x5+0x21dc,_0x4644e8['length']/(-0x1*0x53f+-0x1389+-0x6*-0x422),la),_0x1c2524&&_0x1ce882['setVertexS'+'tream'](gi,_0x1c2524,-0x11a*0x15+-0x2058+0x377e),_0x469e08&&_0x1ce882['setIndices'](_0x469e08),_0x1ce882['update'](),_0x1ce882;}set['morph'](_0x4e59f7){_0x4e59f7!==this['_morph']&&(this['_morph']&&this['_morph']['decRefCoun'+'t'](),this['_morph']=_0x4e59f7,_0x4e59f7&&_0x4e59f7['incRefCoun'+'t']());}get['morph'](){return this['_morph'];}set['aabb'](_0x2908d7){this['_aabb']=_0x2908d7,this['_aabbVer']++;}get['aabb'](){return this['_aabb'];}['destroy'](){const _0x4eda44=this['morph'];_0x4eda44&&(this['morph']=null,_0x4eda44['refCount']<0x2*0x801+0x1*-0x1e01+-0x700*-0x2&&_0x4eda44['destroy']()),this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);for(let _0x31974c=-0x1cf9+0x1681+0x678;_0x31974c<this['indexBuffe'+'r']['length'];_0x31974c++)this['_destroyIn'+'dexBuffer'](_0x31974c);this['indexBuffe'+'r']['length']=-0x160+-0xb*-0xd+0xd1,this['_geometryD'+'ata']=null;}['_destroyIn'+'dexBuffer'](_0x5adb05){this['indexBuffe'+'r'][_0x5adb05]&&(this['indexBuffe'+'r'][_0x5adb05]['destroy'](),this['indexBuffe'+'r'][_0x5adb05]=null);}['_initBoneA'+'abbs'](_0x3f61be){this['boneAabb']=[],this['boneUsed']=[];let _0x13e781,_0x522b87,_0x9ffee0,_0x3e02f9,_0x4995c9;const _0x4ca468=[],_0x3e1f68=[],_0x548b40=this['boneUsed'],_0x3ea6c8=this['skin']['boneNames']['length'];let _0x569ac1,_0xbc30ce,_0x473ee8;for(let _0x17746f=-0xe6c+-0x125b*0x1+0x1*0x20c7;_0x17746f<_0x3ea6c8;_0x17746f++)_0x4ca468[_0x17746f]=new D(Number['MAX_VALUE'],Number['MAX_VALUE'],Number['MAX_VALUE']),_0x3e1f68[_0x17746f]=new D(-Number['MAX_VALUE'],-Number['MAX_VALUE'],-Number['MAX_VALUE']);const _0x3e31c7=new Uo(this['vertexBuff'+'er']),_0x3b1f46=_0x3e31c7['element'][Me],_0x56b96d=_0x3e31c7['element'][gi],_0x301a21=_0x3e31c7['element'][us],_0x5c633d=this['vertexBuff'+'er']['numVertice'+'s'];for(let _0x3f9ce6=0x1*0xde7+-0x260b+0x1824;_0x3f9ce6<_0x5c633d;_0x3f9ce6++){for(let _0x4ff556=-0x7b6+-0x3*0xc9d+0xa9*0x45;_0x4ff556<-0x1*-0x255d+0x1e98+-0x43f1;_0x4ff556++)if(_0x56b96d['array'][_0x56b96d['index']+_0x4ff556]>0x5d*0x27+0x37c+-0x1*0x11a7){const _0x381329=_0x301a21['array'][_0x301a21['index']+_0x4ff556];if(_0x548b40[_0x381329]=!(-0xde3*-0x1+-0x266b+-0xa*-0x274),_0x13e781=_0x3b1f46['array'][_0x3b1f46['index']],_0x522b87=_0x3b1f46['array'][_0x3b1f46['index']+(0x3eb*-0x4+0x8b4*0x3+-0x1*0xa6f)],_0x9ffee0=_0x3b1f46['array'][_0x3b1f46['index']+(-0xb7f+0xbc8+-0x47*0x1)],_0x3e02f9=_0x3e1f68[_0x381329],_0x4995c9=_0x4ca468[_0x381329],_0x4995c9['x']>_0x13e781&&(_0x4995c9['x']=_0x13e781),_0x4995c9['y']>_0x522b87&&(_0x4995c9['y']=_0x522b87),_0x4995c9['z']>_0x9ffee0&&(_0x4995c9['z']=_0x9ffee0),_0x3e02f9['x']<_0x13e781&&(_0x3e02f9['x']=_0x13e781),_0x3e02f9['y']<_0x522b87&&(_0x3e02f9['y']=_0x522b87),_0x3e02f9['z']<_0x9ffee0&&(_0x3e02f9['z']=_0x9ffee0),_0x3f61be){let _0x33a3e7=_0x569ac1=_0x13e781,_0x3bee68=_0xbc30ce=_0x522b87,_0x32b0a5=_0x473ee8=_0x9ffee0;for(let _0x99f341=-0x664*0x2+-0x18c+0x4*0x395;_0x99f341<_0x3f61be['length'];_0x99f341++){const _0x2abb63=_0x3f61be[_0x99f341],_0x4bd14a=_0x2abb63['deltaPosit'+'ions'][_0x3f9ce6*(0x13*0x17b+-0x939+0x2b3*-0x7)],_0x397ecb=_0x2abb63['deltaPosit'+'ions'][_0x3f9ce6*(0x464*0x1+-0x1*0x1f22+0x1ac1*0x1)+(0x1fa2+-0xaac+-0x14f5)],_0x1da3c7=_0x2abb63['deltaPosit'+'ions'][_0x3f9ce6*(-0x1ab1+0x6*-0x20c+0x26fc*0x1)+(-0x201a+0x4*0x6d7+0x13*0x40)];_0x4bd14a<0x916+-0x1ed5*0x1+0x13*0x125?_0x33a3e7+=_0x4bd14a:_0x569ac1+=_0x4bd14a,_0x397ecb<0x1*0x26fc+0x1*0x179a+-0x1f4b*0x2?_0x3bee68+=_0x397ecb:_0xbc30ce+=_0x397ecb,_0x1da3c7<0x63a*0x4+0x8b6+0x219e*-0x1?_0x32b0a5+=_0x1da3c7:_0x473ee8+=_0x1da3c7;}_0x4995c9['x']>_0x33a3e7&&(_0x4995c9['x']=_0x33a3e7),_0x4995c9['y']>_0x3bee68&&(_0x4995c9['y']=_0x3bee68),_0x4995c9['z']>_0x32b0a5&&(_0x4995c9['z']=_0x32b0a5),_0x3e02f9['x']<_0x569ac1&&(_0x3e02f9['x']=_0x569ac1),_0x3e02f9['y']<_0xbc30ce&&(_0x3e02f9['y']=_0xbc30ce),_0x3e02f9['z']<_0x473ee8&&(_0x3e02f9['z']=_0x473ee8);}}_0x3e31c7['next']();}const _0x281def=this['vertexBuff'+'er']['getFormat']()['elements']['find'](_0x45aa3d=>_0x45aa3d['name']===Me);if(_0x281def&&_0x281def['normalize']){const _0x500219=((()=>{switch(_0x281def['dataType']){case dd:return _0x43ec2a=>Math['max'](_0x43ec2a/(0x16d8+0x14*0x1ba+-0x38e1),-(-0x1*-0x689+-0x1*0x219c+0x1b14));case la:return _0x49910b=>_0x49910b/(0x2e*0x6d+-0x1*0x1eb5+0xc1e);case fd:return _0x33ac7d=>Math['max'](_0x33ac7d/(0xc6bf+-0xd84b+0x918b),-(-0x1*-0x1ca2+-0xd62+-0x3*0x515));case Ml:return _0x45f4aa=>_0x45f4aa/(-0xfb95*0x2+-0x51e*0x10+0x9e5*0x55);default:return _0x28cd90=>_0x28cd90;}})());for(let _0x54e80c=-0x1bb8+0x1cf4+-0x13c;_0x54e80c<_0x3ea6c8;_0x54e80c++)if(_0x548b40[_0x54e80c]){const _0x1406f4=_0x4ca468[_0x54e80c],_0x5eac98=_0x3e1f68[_0x54e80c];_0x1406f4['set'](_0x500219(_0x1406f4['x']),_0x500219(_0x1406f4['y']),_0x500219(_0x1406f4['z'])),_0x5eac98['set'](_0x500219(_0x5eac98['x']),_0x500219(_0x5eac98['y']),_0x500219(_0x5eac98['z']));}}for(let _0x4618d8=0x1464+-0x9e3*0x1+0xa81*-0x1;_0x4618d8<_0x3ea6c8;_0x4618d8++){const _0x4ad622=new De();_0x4ad622['setMinMax'](_0x4ca468[_0x4618d8],_0x3e1f68[_0x4618d8]),this['boneAabb']['push'](_0x4ad622);}}['_initGeome'+'tryData'](){this['_geometryD'+'ata']||(this['_geometryD'+'ata']=new oi(),this['vertexBuff'+'er']&&(this['_geometryD'+'ata']['vertexCoun'+'t']=this['vertexBuff'+'er']['numVertice'+'s'],this['_geometryD'+'ata']['maxVertice'+'s']=this['vertexBuff'+'er']['numVertice'+'s']),this['indexBuffe'+'r']['length']>0x1296+0x25*-0x101+0x128f&&this['indexBuffe'+'r'][0xc21+-0x79c*0x2+0x317]&&(this['_geometryD'+'ata']['indexCount']=this['indexBuffe'+'r'][0x21f1+-0x19a3+-0x427*0x2]['numIndices'],this['_geometryD'+'ata']['maxIndices']=this['indexBuffe'+'r'][-0x2041+0x23a5+0xe*-0x3e]['numIndices']));}['clear'](_0x1fc44e,_0x719b27,_0x27bf95=-0x10a1+0x23b2+-0x1311,_0x2f0589=-0x9af*-0x2+-0x6*0x333+-0x2c){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['initDefaul'+'ts'](),this['_geometryD'+'ata']['recreate']=!(-0x1e6a+0x1cf3+0x5*0x4b),this['_geometryD'+'ata']['maxVertice'+'s']=_0x27bf95,this['_geometryD'+'ata']['maxIndices']=_0x2f0589,this['_geometryD'+'ata']['verticesUs'+'age']=_0x1fc44e?ms:lh,this['_geometryD'+'ata']['indicesUsa'+'ge']=_0x719b27?ms:lh;}['setVertexS'+'tream'](_0x5029a3,_0x2ac23c,_0x5f60d1,_0x4a1c49,_0x27c282=Ve,_0x5257e5=!(0x1*-0x2271+-0xb*0x169+0x1d*0x1b9),_0x3feb74=!(-0xb5*0x20+-0x131*0x1+0x17d2)){this['_initGeome'+'tryData']();const _0x94f176=_0x4a1c49||_0x2ac23c['length']/_0x5f60d1;this['_geometryD'+'ata']['_changeVer'+'texCount'](_0x94f176,_0x5029a3),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(0x1879+-0x24f2+0x1f*0x67),this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x5029a3]=new SE(_0x2ac23c,_0x5f60d1,_0x27c282,_0x5257e5,_0x3feb74);}['getVertexS'+'tream'](_0x29cacc,_0x5684ac){let _0xec1c47=0x67f*-0x6+0x2126*-0x1+0x10*0x482,_0x488e9c=!(-0x308*-0xb+0x11e4+-0x333b);if(this['_geometryD'+'ata']){const _0x348bc9=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x29cacc];_0x348bc9&&(_0x488e9c=!(-0x1c4*0x8+0xa*-0x166+-0x2*-0xe0e),_0xec1c47=this['_geometryD'+'ata']['vertexCoun'+'t'],ArrayBuffer['isView'](_0x5684ac)?_0x5684ac['set'](_0x348bc9['data']):(_0x5684ac['length']=-0x1a1b+-0x6a4+0x20bf,_0x5684ac['push'](_0x348bc9['data'])));}return _0x488e9c||this['vertexBuff'+'er']&&(_0xec1c47=new Uo(this['vertexBuff'+'er'])['readData'](_0x29cacc,_0x5684ac)),_0xec1c47;}['setPositio'+'ns'](_0x556861,_0x3dea45=oi['DEFAULT_CO'+'MPONENTS_P'+'OSITION'],_0x1e471b){this['setVertexS'+'tream'](Me,_0x556861,_0x3dea45,_0x1e471b,Ve,!(0x20c9+0xc31*0x1+-0x2cf9));}['setNormals'](_0x307283,_0x215c43=oi['DEFAULT_CO'+'MPONENTS_N'+'ORMAL'],_0x2f2739){this['setVertexS'+'tream'](gs,_0x307283,_0x215c43,_0x2f2739,Ve,!(-0x13*-0x1cf+0xe9*-0x1b+-0x9c9));}['setUvs'](_0x17cb27,_0x369bfe,_0x24fb66=oi['DEFAULT_CO'+'MPONENTS_U'+'V'],_0x133186){this['setVertexS'+'tream'](zm+_0x17cb27,_0x369bfe,_0x24fb66,_0x133186,Ve,!(0x1*-0xc3d+0x2*0x367+0x570));}['setColors'](_0x244925,_0xd89a2f=oi['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x56fe78){this['setVertexS'+'tream'](Wt,_0x244925,_0xd89a2f,_0x56fe78,Ve,!(-0x12e2*0x1+-0x30f*-0xb+-0x2*0x761));}['setColors3'+'2'](_0x37af71,_0x56e783){this['setVertexS'+'tream'](Wt,_0x37af71,oi['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x56e783,la,!(-0x23*0x31+-0x17*0x6a+0x1039));}['setIndices'](_0xa4946a,_0x7d9e9){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(-0x1337+-0x4c7+0x17fe),this['_geometryD'+'ata']['indices']=_0xa4946a,this['_geometryD'+'ata']['indexCount']=_0x7d9e9||_0xa4946a['length'];}['getPositio'+'ns'](_0x203beb){return this['getVertexS'+'tream'](Me,_0x203beb);}['getNormals'](_0x480938){return this['getVertexS'+'tream'](gs,_0x480938);}['getUvs'](_0x5bf889,_0x51d386){return this['getVertexS'+'tream'](zm+_0x5bf889,_0x51d386);}['getColors'](_0x440e80){return this['getVertexS'+'tream'](Wt,_0x440e80);}['getIndices'](_0x333a4b){let _0x5c6830=-0xc*0xfa+0x1f5*-0x3+-0x3*-0x5dd;if(this['_geometryD'+'ata']&&this['_geometryD'+'ata']['indices']){const _0xd1c34a=this['_geometryD'+'ata']['indices'];if(_0x5c6830=this['_geometryD'+'ata']['indexCount'],ArrayBuffer['isView'](_0x333a4b))_0x333a4b['set'](_0xd1c34a);else{_0x333a4b['length']=0x142f+0x1142+-0x2571;for(let _0x10fda9=0xa3d*0x1+0x25ae+-0x553*0x9,_0x5ab242=_0xd1c34a['length'];_0x10fda9<_0x5ab242;_0x10fda9++)_0x333a4b['push'](_0xd1c34a[_0x10fda9]);}}else this['indexBuffe'+'r']['length']>-0xf71+-0xe11+0x1d82&&this['indexBuffe'+'r'][-0x1e0c+0x9d6+0x1436]&&(_0x5c6830=this['indexBuffe'+'r'][-0x2599+0x826*-0x1+0x2dbf]['readData'](_0x333a4b));return _0x5c6830;}['update'](_0x153336=js,_0x4d02dd=!(0x173+-0x892*0x2+0xfb1)){if(this['_geometryD'+'ata']){if(_0x4d02dd){const _0x4efb1f=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][Me];_0x4efb1f&&_0x4efb1f['componentC'+'ount']===0x1361+-0x89d+-0xac1&&(this['_aabb']['compute'](_0x4efb1f['data'],this['_geometryD'+'ata']['vertexCoun'+'t']),this['_aabbVer']++);}let _0x361219=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['vertexCoun'+'t']>this['_geometryD'+'ata']['maxVertice'+'s']&&(_0x361219=!(-0xfff+0x4*-0x632+0x28c7*0x1),this['_geometryD'+'ata']['maxVertice'+'s']=this['_geometryD'+'ata']['vertexCoun'+'t']),_0x361219&&this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);let _0xab28ff=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['indexCount']>this['_geometryD'+'ata']['maxIndices']&&(_0xab28ff=!(-0x676+-0x20e1+0x2757),this['_geometryD'+'ata']['maxIndices']=this['_geometryD'+'ata']['indexCount']),_0xab28ff&&this['indexBuffe'+'r']['length']>-0x2*-0xa90+0xe3d+-0x235d&&this['indexBuffe'+'r'][-0x5*-0x7a9+-0x1176+-0x14d7]&&(this['indexBuffe'+'r'][0x5a*-0xc+0xbc7+0x78f*-0x1]['destroy'](),this['indexBuffe'+'r'][0x81e*0x1+-0x1cd8+0x14ba]=null),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&this['_updateVer'+'texBuffer'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&this['_updateInd'+'exBuffer'](),this['primitive'][0x77b*-0x1+0x25*-0xef+-0x3*-0xe02]['type']=_0x153336,this['indexBuffe'+'r']['length']>0xd31+-0x2115+-0x4*-0x4f9&&this['indexBuffe'+'r'][0x15d2+0x1be7+-0x31b9]?this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&(this['primitive'][0x2*0xe1d+0x4*-0x515+-0x1*0x7e6]['count']=this['_geometryD'+'ata']['indexCount'],this['primitive'][-0x9da+-0x1d*-0x101+-0x1343]['indexed']=!(-0x391+0x946*0x2+-0xefb)):this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&(this['primitive'][-0x1b11+-0x12d*-0xf+-0x47*-0x22]['count']=this['_geometryD'+'ata']['vertexCoun'+'t'],this['primitive'][-0x1f76+-0xf65+0x2edb]['indexed']=!(-0x1a37+-0x1efb+0x3933)),this['_geometryD'+'ata']['vertexCoun'+'t']=0xa93*-0x3+-0x336+0x32d*0xb,this['_geometryD'+'ata']['indexCount']=0x874*-0x3+-0xd74+-0xcf*-0x30,this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(-0xc92+0x1*-0x22a7+-0x1e*-0x193),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(0x1*-0x1e36+-0xc0b*-0x2+0x621),this['_geometryD'+'ata']['recreate']=!(-0x756*0x3+-0x2293+0x3896),this['updateRend'+'erStates']();}}['_buildVert'+'exFormat'](_0x363f8d){const _0x2dc419=[];for(const _0x36eb80 in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x546302=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x36eb80];_0x2dc419['push']({'semantic':_0x36eb80,'components':_0x546302['componentC'+'ount'],'type':_0x546302['dataType'],'normalize':_0x546302['dataTypeNo'+'rmalize'],'asInt':_0x546302['asInt']});}return new kt(this['device'],_0x2dc419,_0x363f8d);}['_updateVer'+'texBuffer'](){if(!this['vertexBuff'+'er']){const _0xa7c4aa=this['_geometryD'+'ata']['maxVertice'+'s'],_0x4cad25=this['_buildVert'+'exFormat'](_0xa7c4aa);this['vertexBuff'+'er']=new Is(this['device'],_0x4cad25,_0xa7c4aa,{'usage':this['_geometryD'+'ata']['verticesUs'+'age'],'storage':this['_storageVe'+'rtex']});}const _0x5a79b9=new Uo(this['vertexBuff'+'er']),_0x4655a6=this['_geometryD'+'ata']['vertexCoun'+'t'];for(const _0x2c2685 in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x3b3f4c=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x2c2685];_0x5a79b9['writeData'](_0x2c2685,_0x3b3f4c['data'],_0x4655a6),delete this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x2c2685];}_0x5a79b9['end']();}['_updateInd'+'exBuffer'](){if(this['indexBuffe'+'r']['length']<=-0x1163+-0x1bf+0x1322||!this['indexBuffe'+'r'][-0x1*-0x258d+-0x1*-0x46e+-0xb*0x3d1]){const _0x351b04=this['_geometryD'+'ata']['maxVertice'+'s'],_0x46bda8=_0x351b04>-0xb*-0x17b3+0x6ef9*0x2+0x14*-0xb55||_0x351b04===0xd*0x23b+-0x1fc*0x12+0x6b9*0x1?wr:Yi,_0x420791=this['_storageIn'+'dex']?{'storage':!(0x1f3f+0x1*-0x25e7+0x2*0x354)}:void(-0x925+-0x6d3+0xff8);this['indexBuffe'+'r'][-0x2049+0x567+0x1ae2]=new br(this['device'],_0x46bda8,this['_geometryD'+'ata']['maxIndices'],this['_geometryD'+'ata']['indicesUsa'+'ge'],void(-0x1573*-0x1+-0x1507+-0x6c*0x1),_0x420791);}const _0x1c526e=this['_geometryD'+'ata']['indices'];_0x1c526e&&(this['indexBuffe'+'r'][0x1861*-0x1+0x64*0x39+0x21d]['writeData'](_0x1c526e,this['_geometryD'+'ata']['indexCount']),this['_geometryD'+'ata']['indices']=null);}['prepareRen'+'derState'](_0x212dff){_0x212dff===$r?this['generateWi'+'reframe']():_0x212dff===Jl&&(this['primitive'][Jl]={'type':cd,'base':0x0,'baseVertex':0x0,'count':this['vertexBuff'+'er']?this['vertexBuff'+'er']['numVertice'+'s']:0xb3e*0x2+-0xa45*0x2+-0x2*0xf9,'indexed':!(0x444+-0x1eb5+0x1a72)});}['updateRend'+'erStates'](){this['primitive'][Jl]&&this['prepareRen'+'derState'](Jl),this['primitive'][$r]&&this['prepareRen'+'derState']($r);}['generateWi'+'reframe'](){this['_destroyIn'+'dexBuffer']($r);const _0x35cfcc=this['vertexBuff'+'er']['numVertice'+'s'],_0x1dce28=[];let _0x3790be;if(this['indexBuffe'+'r']['length']>-0x8*0x27f+-0x209*-0x4+0xbd4&&this['indexBuffe'+'r'][-0xecf+-0x504+0x13d3]){const _0x12da2d=[[0xb49+-0x5*0x26b+-0x67*-0x2,-0xf81+-0x91*-0x38+-0x1036],[0x1d*0xb5+0x1e17+0x1*-0x3297,0x283*0xb+-0x1*0x2709+-0x1e7*-0x6],[-0x26b6+-0x4c7*0x2+0x3046,0x1381+-0x1acd+0x74c]],_0x4880fd=this['primitive'][un]['base'],_0x3b6fa0=this['primitive'][un]['count'],_0x2a333b=this['primitive'][un]['baseVertex']||-0x99c*0x2+-0xa1*0x8+-0x4*-0x610,_0x26216b=this['indexBuffe'+'r'][un],_0x1e15b9=new Sh[_0x26216b['format']](_0x26216b['storage']),_0x5e37fd=new Set();for(let _0x574a5a=_0x4880fd;_0x574a5a<_0x4880fd+_0x3b6fa0;_0x574a5a+=0x1e*0x49+-0x171a+0xe8f*0x1)for(let _0x11813a=-0x122b+-0x346*-0xa+0x153*-0xb;_0x11813a<-0x922+-0x268f*-0x1+0x5e2*-0x5;_0x11813a++){const _0x2321b0=_0x1e15b9[_0x574a5a+_0x12da2d[_0x11813a][0x149d*-0x1+0x7e7+-0xcb6*-0x1]]+_0x2a333b,_0x2cb22a=_0x1e15b9[_0x574a5a+_0x12da2d[_0x11813a][0x1*-0x1dd5+0x1701+0x6d5]]+_0x2a333b,_0x220cba=_0x2321b0>_0x2cb22a?_0x2cb22a*_0x35cfcc+_0x2321b0:_0x2321b0*_0x35cfcc+_0x2cb22a;_0x5e37fd['has'](_0x220cba)||(_0x5e37fd['add'](_0x220cba),_0x1dce28['push'](_0x2321b0,_0x2cb22a));}_0x3790be=_0x26216b['format'];}else{for(let _0x3d7666=-0xc4d*0x1+-0x1*0x1545+0x2192;_0x3d7666<_0x35cfcc;_0x3d7666+=-0x3a1*-0x8+-0xde2+-0xf23)_0x1dce28['push'](_0x3d7666,_0x3d7666+(0xc05+-0x2*-0x3df+0x12*-0x119),_0x3d7666+(-0x170*0x2+-0x2b9*-0x1+0x28),_0x3d7666+(0x67*0x1b+0xb14+-0x15ef),_0x3d7666+(0x1e30+-0x1d*-0xe7+-0x1*0x3859),_0x3d7666);_0x3790be=_0x1dce28['length']>-0x7fbe+0x50b5+-0x4*-0x4bc2?wr:Yi;}const _0x4b5894=new br(this['vertexBuff'+'er']['device'],_0x3790be,_0x1dce28['length']);new Sh[_0x4b5894['format']](_0x4b5894['storage'])['set'](_0x1dce28),_0x4b5894['unlock'](),this['primitive'][$r]={'type':hd,'base':0x0,'baseVertex':0x0,'count':_0x1dce28['length'],'indexed':!(-0x1*0xebd+0xa10+0x4ad)},this['indexBuffe'+'r'][$r]=_0x4b5894;}}const v_=new te(),Hd=new D(),x_=new le(),Wd=new le(),T_=new D(),w_=new D(),yE=new te(),vE=new le(),rs=new D(),ro=new te(),as=new le(),Ia=new le(),E_=new te(),$d=new D(),tc=new D();function b_(_0x474011,_0x1d239d){return _0x474011 instanceof Function?_0x474011:_0x507c74=>{let _0x2ec541=_0x507c74[_0x474011];return _0x2ec541 instanceof Function&&(_0x2ec541=_0x2ec541()),_0x2ec541===_0x1d239d;};}function Sv(_0x151170,_0x2318ee){if(_0x2318ee(_0x151170))return _0x151170;const _0x287a2b=_0x151170['_children'],_0x31531d=_0x287a2b['length'];for(let _0xea2071=-0x205+-0x11c5*0x1+0x13ca;_0xea2071<_0x31531d;++_0xea2071){const _0x243b59=Sv(_0x287a2b[_0xea2071],_0x2318ee);if(_0x243b59)return _0x243b59;}return null;}class Ie extends me{constructor(_0x1e51b5='Untitled'){super(),h(this,'name'),h(this,'tags',new Oo(this)),h(this,'localPosit'+'ion',new D()),h(this,'localRotat'+'ion',new le()),h(this,'localScale',new D(-0x1*0x12b3+-0x102+0x13b6,-0x1966+-0x2177+-0x1d6f*-0x2,0x204f+-0x4*0x5a9+-0x9aa*0x1)),h(this,'localEuler'+'Angles',new D()),h(this,'position',new D()),h(this,'rotation',new le()),h(this,'eulerAngle'+'s',new D()),h(this,'_scale',null),h(this,'localTrans'+'form',new te()),h(this,'_dirtyLoca'+'l',!(-0x2205+0x10*-0x118+0xa*0x527)),h(this,'_aabbVer',0x265a+-0x2398+0x1*-0x2c2),h(this,'_frozen',!(-0x54d*-0x1+0x11*0x1b7+-0x2273)),h(this,'worldTrans'+'form',new te()),h(this,'_dirtyWorl'+'d',!(0x22ed*0x1+-0x193*0x13+-0x503*0x1)),h(this,'_worldScal'+'eSign',-0x258e+0x2*-0x69+0x2660),h(this,'_normalMat'+'rix',new _i()),h(this,'_dirtyNorm'+'al',!(-0x89*-0x13+0x5*0xc8+-0xe13)),h(this,'_right',null),h(this,'_up',null),h(this,'_forward',null),h(this,'_parent',null),h(this,'_children',[]),h(this,'_graphDept'+'h',-0x19cd+0x1395+-0x1*-0x638),h(this,'_enabled',!(-0xd*-0xd3+-0x1*0x1974+-0x7*-0x21b)),h(this,'_enabledIn'+'Hierarchy',!(0x1*0x2356+-0x1e93+-0x4c2)),h(this,'scaleCompe'+'nsation',!(0x1422+0xdd*0x1d+-0xf6*0x2f)),this['name']=_0x1e51b5;}get['right'](){return this['_right']||(this['_right']=new D()),this['getWorldTr'+'ansform']()['getX'](this['_right'])['normalize']();}get['up'](){return this['_up']||(this['_up']=new D()),this['getWorldTr'+'ansform']()['getY'](this['_up'])['normalize']();}get['forward'](){return this['_forward']||(this['_forward']=new D()),this['getWorldTr'+'ansform']()['getZ'](this['_forward'])['normalize']()['mulScalar'](-(-0xc31*0x1+-0x17*0x12f+-0x276b*-0x1));}get['normalMatr'+'ix'](){const _0x54f240=this['_normalMat'+'rix'];return this['_dirtyNorm'+'al']&&(_0x54f240['invertMat4'](this['getWorldTr'+'ansform']())['transpose'](),this['_dirtyNorm'+'al']=!(-0x1591+-0xef5+0x2487)),_0x54f240;}set['enabled'](_0xd7feed){var _0x210f3a;this['_enabled']!==_0xd7feed&&(this['_enabled']=_0xd7feed,(_0xd7feed&&((_0x210f3a=this['_parent'])!=null&&_0x210f3a['enabled'])||!_0xd7feed)&&this['_notifyHie'+'rarchyStat'+'eChanged'](this,_0xd7feed));}get['enabled'](){return this['_enabled']&&this['_enabledIn'+'Hierarchy'];}get['parent'](){return this['_parent'];}get['path'](){let _0x4bacba=this['_parent'];if(!_0x4bacba)return'';let _0x448708=this['name'];for(;_0x4bacba&&_0x4bacba['_parent'];)_0x448708=_0x4bacba['name']+'/'+_0x448708,_0x4bacba=_0x4bacba['_parent'];return _0x448708;}get['root'](){let _0x1f525f=this;for(;_0x1f525f['_parent'];)_0x1f525f=_0x1f525f['_parent'];return _0x1f525f;}get['children'](){return this['_children'];}get['graphDepth'](){return this['_graphDept'+'h'];}['_notifyHie'+'rarchyStat'+'eChanged'](_0x2406d3,_0x3f1759){_0x2406d3['_onHierarc'+'hyStateCha'+'nged'](_0x3f1759);const _0x454629=_0x2406d3['_children'];for(let _0x5dd52e=0x2143*-0x1+0x31c*0x1+0x1e27,_0x4b6821=_0x454629['length'];_0x5dd52e<_0x4b6821;_0x5dd52e++)_0x454629[_0x5dd52e]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x454629[_0x5dd52e],_0x3f1759);}['_onHierarc'+'hyStateCha'+'nged'](_0x2b4915){this['_enabledIn'+'Hierarchy']=_0x2b4915,_0x2b4915&&!this['_frozen']&&this['_unfreezeP'+'arentToRoo'+'t']();}['_cloneInte'+'rnal'](_0x5f5284){_0x5f5284['name']=this['name'];const _0x2b122b=this['tags']['_list'];_0x5f5284['tags']['clear']();for(let _0x477454=0x716*-0x3+-0x5*0x12f+-0x1*-0x1b2d;_0x477454<_0x2b122b['length'];_0x477454++)_0x5f5284['tags']['add'](_0x2b122b[_0x477454]);_0x5f5284['localPosit'+'ion']['copy'](this['localPosit'+'ion']),_0x5f5284['localRotat'+'ion']['copy'](this['localRotat'+'ion']),_0x5f5284['localScale']['copy'](this['localScale']),_0x5f5284['localEuler'+'Angles']['copy'](this['localEuler'+'Angles']),_0x5f5284['position']['copy'](this['position']),_0x5f5284['rotation']['copy'](this['rotation']),_0x5f5284['eulerAngle'+'s']['copy'](this['eulerAngle'+'s']),_0x5f5284['localTrans'+'form']['copy'](this['localTrans'+'form']),_0x5f5284['_dirtyLoca'+'l']=this['_dirtyLoca'+'l'],_0x5f5284['worldTrans'+'form']['copy'](this['worldTrans'+'form']),_0x5f5284['_dirtyWorl'+'d']=this['_dirtyWorl'+'d'],_0x5f5284['_dirtyNorm'+'al']=this['_dirtyNorm'+'al'],_0x5f5284['_aabbVer']=this['_aabbVer']+(0x3*0x46a+-0x1123+-0x2*-0x1f3),_0x5f5284['_enabled']=this['_enabled'],_0x5f5284['scaleCompe'+'nsation']=this['scaleCompe'+'nsation'],_0x5f5284['_enabledIn'+'Hierarchy']=!(0xdb9+0xf15*0x1+-0x1ccd*0x1);}['clone'](){const _0x5ab2a8=new this['constructo'+'r']();return this['_cloneInte'+'rnal'](_0x5ab2a8),_0x5ab2a8;}['copy'](_0x5e0a68){return _0x5e0a68['_cloneInte'+'rnal'](this),this;}['destroy'](){this['remove']();const _0x55b3a6=this['_children'];for(;_0x55b3a6['length'];){const _0x2c1e48=_0x55b3a6['pop']();_0x2c1e48['_parent']=null,_0x2c1e48['destroy']();}this['fire']('destroy',this),this['off']();}['find'](_0x1cb4d7,_0x1f39f5){const _0x1a7ba8=[],_0x3765b8=b_(_0x1cb4d7,_0x1f39f5);return this['forEach'](_0x1a22c7=>{_0x3765b8(_0x1a22c7)&&_0x1a7ba8['push'](_0x1a22c7);}),_0x1a7ba8;}['findOne'](_0x47e85e,_0x3a5f27){const _0x204003=b_(_0x47e85e,_0x3a5f27);return Sv(this,_0x204003);}['findByTag'](..._0xa84ecc){const _0x1e22f4=[],_0x2520e9=(_0x494a48,_0x1bc3dc)=>{_0x1bc3dc&&_0x494a48['tags']['has'](..._0xa84ecc)&&_0x1e22f4['push'](_0x494a48);for(let _0x4e3104=-0x1a4f+0xbcf+0xe80;_0x4e3104<_0x494a48['_children']['length'];_0x4e3104++)_0x2520e9(_0x494a48['_children'][_0x4e3104],!(0x1c4b+-0xbaa*0x1+0xb*-0x183));};return _0x2520e9(this,!(-0x1201+0xa00+0x802)),_0x1e22f4;}['findByName'](_0x242272){return this['findOne']('name',_0x242272);}['findByPath'](_0x93578e){const _0x123d7c=Array['isArray'](_0x93578e)?_0x93578e:_0x93578e['split']('/');let _0x1a530d=this;for(let _0x3eb3fa=0x1*0x1fd0+-0x132*0x5+-0x19d6,_0x57dd80=_0x123d7c['length'];_0x3eb3fa<_0x57dd80;++_0x3eb3fa)if(_0x1a530d=_0x1a530d['children']['find'](_0x14b159=>_0x14b159['name']===_0x123d7c[_0x3eb3fa]),!_0x1a530d)return null;return _0x1a530d;}['forEach'](_0x5cbf46,_0x5dfc03){_0x5cbf46['call'](_0x5dfc03,this);const _0x4dbd4b=this['_children'],_0x581737=_0x4dbd4b['length'];for(let _0x1bbf14=0x2*0x11c5+-0x3d6+-0x1fb4;_0x1bbf14<_0x581737;++_0x1bbf14)_0x4dbd4b[_0x1bbf14]['forEach'](_0x5cbf46,_0x5dfc03);}['isDescenda'+'ntOf'](_0x26d0c1){let _0x4514ff=this['_parent'];for(;_0x4514ff;){if(_0x4514ff===_0x26d0c1)return!(0x1442+-0x351+-0x1*0x10f1);_0x4514ff=_0x4514ff['_parent'];}return!(-0x4ca*-0x2+-0x1e33+0x14a0);}['isAncestor'+'Of'](_0x2fed73){return _0x2fed73['isDescenda'+'ntOf'](this);}['getEulerAn'+'gles'](){return this['getWorldTr'+'ansform']()['getEulerAn'+'gles'](this['eulerAngle'+'s']),this['eulerAngle'+'s'];}['getLocalEu'+'lerAngles'](){return this['localRotat'+'ion']['getEulerAn'+'gles'](this['localEuler'+'Angles']),this['localEuler'+'Angles'];}['getLocalPo'+'sition'](){return this['localPosit'+'ion'];}['getLocalRo'+'tation'](){return this['localRotat'+'ion'];}['getLocalSc'+'ale'](){return this['localScale'];}['getLocalTr'+'ansform'](){return this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(-0xa*0xb5+0x1dcc+0x16b9*-0x1)),this['localTrans'+'form'];}['getPositio'+'n'](){return this['getWorldTr'+'ansform']()['getTransla'+'tion'](this['position']),this['position'];}['getRotatio'+'n'](){return this['rotation']['setFromMat'+'4'](this['getWorldTr'+'ansform']()),this['rotation'];}['getScale'](){return this['_scale']||(this['_scale']=new D()),this['getWorldTr'+'ansform']()['getScale'](this['_scale']);}['getWorldTr'+'ansform'](){return!this['_dirtyLoca'+'l']&&!this['_dirtyWorl'+'d']?this['worldTrans'+'form']:(this['_parent']&&this['_parent']['getWorldTr'+'ansform'](),this['_sync'](),this['worldTrans'+'form']);}get['worldScale'+'Sign'](){return this['_worldScal'+'eSign']===-0x3*-0x619+-0xef*-0x8+-0x19c3&&(this['_worldScal'+'eSign']=this['getWorldTr'+'ansform']()['scaleSign']),this['_worldScal'+'eSign'];}['remove'](){var _0x29e627;(_0x29e627=this['_parent'])==null||_0x29e627['removeChil'+'d'](this);}['reparent'](_0x347b2b,_0x3f3514){this['remove'](),_0x347b2b&&(_0x3f3514>=-0x1e45+0xf92*0x1+0xeb3?_0x347b2b['insertChil'+'d'](this,_0x3f3514):_0x347b2b['addChild'](this));}['setLocalEu'+'lerAngles'](_0x1850d0,_0x5404a7,_0x297919){this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x1850d0,_0x5404a7,_0x297919),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalPo'+'sition'](_0x218443,_0x2c0b6b,_0x1cbfe0){_0x218443 instanceof D?this['localPosit'+'ion']['copy'](_0x218443):this['localPosit'+'ion']['set'](_0x218443,_0x2c0b6b,_0x1cbfe0),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalRo'+'tation'](_0xdcd6e6,_0x21954c,_0x1e3346,_0x191e4d){_0xdcd6e6 instanceof le?this['localRotat'+'ion']['copy'](_0xdcd6e6):this['localRotat'+'ion']['set'](_0xdcd6e6,_0x21954c,_0x1e3346,_0x191e4d),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalSc'+'ale'](_0x46b835,_0x12a6ff,_0x5a04ec){_0x46b835 instanceof D?this['localScale']['copy'](_0x46b835):this['localScale']['set'](_0x46b835,_0x12a6ff,_0x5a04ec),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_dirtifyLo'+'cal'](){this['_dirtyLoca'+'l']||(this['_dirtyLoca'+'l']=!(-0x25*-0x2+0x205d*-0x1+0x2013),this['_dirtyWorl'+'d']||this['_dirtifyWo'+'rld']());}['_unfreezeP'+'arentToRoo'+'t'](){let _0x26fbe8=this['_parent'];for(;_0x26fbe8;)_0x26fbe8['_frozen']=!(-0x3*-0x346+-0xdbb+0x3ea),_0x26fbe8=_0x26fbe8['_parent'];}['_dirtifyWo'+'rld'](){this['_dirtyWorl'+'d']||this['_unfreezeP'+'arentToRoo'+'t'](),this['_dirtifyWo'+'rldInterna'+'l']();}['_dirtifyWo'+'rldInterna'+'l'](){if(!this['_dirtyWorl'+'d']){this['_frozen']=!(0x281*-0xa+0x256c+0xc61*-0x1),this['_dirtyWorl'+'d']=!(-0x1*-0x15cf+0x7*-0x26f+-0x2*0x263);for(let _0x5d8891=-0xef*-0x25+-0x26ed+0x11*0x42;_0x5d8891<this['_children']['length'];_0x5d8891++)this['_children'][_0x5d8891]['_dirtyWorl'+'d']||this['_children'][_0x5d8891]['_dirtifyWo'+'rldInterna'+'l']();}this['_dirtyNorm'+'al']=!(-0x100*-0x3+0x615*0x1+0x1d1*-0x5),this['_worldScal'+'eSign']=-0xe1e+0x22*-0x4f+0x189c,this['_aabbVer']++;}['setPositio'+'n'](_0x57b910,_0x153d36,_0x17f408){_0x57b910 instanceof D?rs['copy'](_0x57b910):rs['set'](_0x57b910,_0x153d36,_0x17f408),this['_parent']===null?this['localPosit'+'ion']['copy'](rs):(ro['copy'](this['_parent']['getWorldTr'+'ansform']())['invert'](),ro['transformP'+'oint'](rs,this['localPosit'+'ion'])),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setRotatio'+'n'](_0x102b13,_0x2cf5b2,_0x37e7a9,_0x50883f){if(_0x102b13 instanceof le?as['copy'](_0x102b13):as['set'](_0x102b13,_0x2cf5b2,_0x37e7a9,_0x50883f),this['_parent']===null)this['localRotat'+'ion']['copy'](as);else{const _0x31f547=this['_parent']['getRotatio'+'n']();Ia['copy'](_0x31f547)['invert'](),this['localRotat'+'ion']['copy'](Ia)['mul'](as);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setPositio'+'nAndRotati'+'on'](_0x151825,_0x4c9ad8){if(this['_parent']===null)this['localPosit'+'ion']['copy'](_0x151825),this['localRotat'+'ion']['copy'](_0x4c9ad8);else{const _0xda95a2=this['_parent']['getWorldTr'+'ansform']();ro['copy'](_0xda95a2)['invert'](),ro['transformP'+'oint'](_0x151825,this['localPosit'+'ion']),this['localRotat'+'ion']['setFromMat'+'4'](ro)['mul'](_0x4c9ad8);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setEulerAn'+'gles'](_0x77e1c7,_0x1118d2,_0x30ff92){if(this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x77e1c7,_0x1118d2,_0x30ff92),this['_parent']!==null){const _0x156ec9=this['_parent']['getRotatio'+'n']();Ia['copy'](_0x156ec9)['invert'](),this['localRotat'+'ion']['mul2'](Ia,this['localRotat'+'ion']);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['addChild'](_0x34f6fa){this['_prepareIn'+'sertChild'](_0x34f6fa),this['_children']['push'](_0x34f6fa),this['_onInsertC'+'hild'](_0x34f6fa);}['addChildAn'+'dSaveTrans'+'form'](_0x577037){const _0x47e11f=_0x577037['getPositio'+'n'](),_0x532235=_0x577037['getRotatio'+'n']();this['_prepareIn'+'sertChild'](_0x577037),_0x577037['setPositio'+'n'](yE['copy'](this['worldTrans'+'form'])['invert']()['transformP'+'oint'](_0x47e11f)),_0x577037['setRotatio'+'n'](vE['copy'](this['getRotatio'+'n']())['invert']()['mul'](_0x532235)),this['_children']['push'](_0x577037),this['_onInsertC'+'hild'](_0x577037);}['insertChil'+'d'](_0x2f958b,_0x2fa1f5){this['_prepareIn'+'sertChild'](_0x2f958b),this['_children']['splice'](_0x2fa1f5,0x575+-0x683+0x10e,_0x2f958b),this['_onInsertC'+'hild'](_0x2f958b);}['_prepareIn'+'sertChild'](_0x384bda){_0x384bda['remove'](),w['assert'](_0x384bda!==this,'GraphNode\x20'+(_0x384bda==null?void(-0x525*0x7+-0x21*0x3d+-0x2be0*-0x1):_0x384bda['name'])+('\x20cannot\x20be'+'\x20a\x20child\x20o'+'f\x20itself')),w['assert'](!this['isDescenda'+'ntOf'](_0x384bda),'GraphNode\x20'+(_0x384bda==null?void(0x983+0x2*-0xc7f+0x1*0xf7b):_0x384bda['name'])+('\x20cannot\x20ad'+'d\x20an\x20ances'+'tor\x20as\x20a\x20c'+'hild'));}['_fireOnHie'+'rarchy'](_0x11fb5f,_0x299b0f,_0x22e5ca){this['fire'](_0x11fb5f,_0x22e5ca);for(let _0x96fc1=-0x4*-0x5ae+-0xc7*0x9+-0xfb9;_0x96fc1<this['_children']['length'];_0x96fc1++)this['_children'][_0x96fc1]['_fireOnHie'+'rarchy'](_0x299b0f,_0x299b0f,_0x22e5ca);}['_onInsertC'+'hild'](_0x1cf268){_0x1cf268['_parent']=this;const _0x326e26=_0x1cf268['_enabled']&&this['enabled'];_0x1cf268['_enabledIn'+'Hierarchy']!==_0x326e26&&(_0x1cf268['_enabledIn'+'Hierarchy']=_0x326e26,_0x1cf268['_notifyHie'+'rarchyStat'+'eChanged'](_0x1cf268,_0x326e26)),_0x1cf268['_updateGra'+'phDepth'](),_0x1cf268['_dirtifyWo'+'rld'](),this['_frozen']&&_0x1cf268['_unfreezeP'+'arentToRoo'+'t'](),_0x1cf268['_fireOnHie'+'rarchy']('insert','inserthier'+'archy',this),this['fire']&&this['fire']('childinser'+'t',_0x1cf268);}['_updateGra'+'phDepth'](){this['_graphDept'+'h']=this['_parent']?this['_parent']['_graphDept'+'h']+(-0x5fb*0x1+0x5*-0x332+0x15f6):0x2479+-0x6d7*-0x1+-0x2b50;for(let _0x250d27=0x1*-0xd6f+0xd8b+0x1c*-0x1,_0x5ee4aa=this['_children']['length'];_0x250d27<_0x5ee4aa;_0x250d27++)this['_children'][_0x250d27]['_updateGra'+'phDepth']();}['removeChil'+'d'](_0x506868){const _0x306dbc=this['_children']['indexOf'](_0x506868);_0x306dbc!==-(0x13cc+0x1329+0x6*-0x67e)&&(this['_children']['splice'](_0x306dbc,0x1d7+-0x10*-0x26f+-0x28c6),_0x506868['_parent']=null,_0x506868['_fireOnHie'+'rarchy']('remove','removehier'+'archy',this),this['fire']('childremov'+'e',_0x506868));}['_sync'](){if(this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(-0x5bb*0x1+-0x41f+0x1d*0x57)),this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['scaleCompe'+'nsation']){let _0x498bee;const _0x4774d6=this['_parent'];let _0x3fca61=this['localScale'],_0x3b6c6a=_0x4774d6;if(_0x3b6c6a){for(;_0x3b6c6a&&_0x3b6c6a['scaleCompe'+'nsation'];)_0x3b6c6a=_0x3b6c6a['_parent'];_0x3b6c6a&&(_0x3b6c6a=_0x3b6c6a['_parent'],_0x3b6c6a&&(_0x498bee=_0x3b6c6a['worldTrans'+'form']['getScale'](),T_['mul2'](_0x498bee,this['localScale']),_0x3fca61=T_));}Wd['setFromMat'+'4'](_0x4774d6['worldTrans'+'form']),x_['mul2'](Wd,this['localRotat'+'ion']);let _0x975067=_0x4774d6['worldTrans'+'form'];_0x4774d6['scaleCompe'+'nsation']&&(w_['mul2'](_0x498bee,_0x4774d6['getLocalSc'+'ale']()),v_['setTRS'](_0x4774d6['worldTrans'+'form']['getTransla'+'tion'](Hd),Wd,w_),_0x975067=v_),_0x975067['transformP'+'oint'](this['localPosit'+'ion'],Hd),this['worldTrans'+'form']['setTRS'](Hd,x_,_0x3fca61);}else this['worldTrans'+'form']['mulAffine2'](this['_parent']['worldTrans'+'form'],this['localTrans'+'form']);}this['_dirtyWorl'+'d']=!(0x1*0x8d7+-0x198*0x17+0x1bd2);}}['syncHierar'+'chy'](){if(!this['_enabled']||this['_frozen'])return;this['_frozen']=!(0x209d+-0x1d86+-0x317),(this['_dirtyLoca'+'l']||this['_dirtyWorl'+'d'])&&this['_sync']();const _0xe0d363=this['_children'];for(let _0x51ebc5=0x879*-0x3+-0x1*-0x1c45+-0x5*0x92,_0x2945a2=_0xe0d363['length'];_0x51ebc5<_0x2945a2;_0x51ebc5++)_0xe0d363[_0x51ebc5]['syncHierar'+'chy']();}['lookAt'](_0x1cfa76,_0x3d7867,_0xee8a8e,_0xc0fb89=-0x3*0x819+-0x49a*0x5+-0x1*-0x2f4d,_0x9265ba=-0x3*-0x163+0x1*-0x139c+-0x4*-0x3dd,_0x353d47=-0x1*0xb5f+0x9*0x3e5+-0x7*0x362){if(_0x1cfa76 instanceof D)$d['copy'](_0x1cfa76),_0x3d7867 instanceof D?tc['copy'](_0x3d7867):tc['copy'](D['UP']);else{if(_0xee8a8e===void(-0x1*0x1677+0x18b*0x7+0xbaa))return;$d['set'](_0x1cfa76,_0x3d7867,_0xee8a8e),tc['set'](_0xc0fb89,_0x9265ba,_0x353d47);}E_['setLookAt'](this['getPositio'+'n'](),$d,tc),as['setFromMat'+'4'](E_),this['setRotatio'+'n'](as);}['translate'](_0x20da88,_0x36cf89,_0x259007){_0x20da88 instanceof D?rs['copy'](_0x20da88):rs['set'](_0x20da88,_0x36cf89,_0x259007),rs['add'](this['getPositio'+'n']()),this['setPositio'+'n'](rs);}['translateL'+'ocal'](_0x13228d,_0x5dd2c7,_0x287cae){_0x13228d instanceof D?rs['copy'](_0x13228d):rs['set'](_0x13228d,_0x5dd2c7,_0x287cae),this['localRotat'+'ion']['transformV'+'ector'](rs,rs),this['localPosit'+'ion']['add'](rs),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotate'](_0x1540a7,_0x54f978,_0x515944){if(as['setFromEul'+'erAngles'](_0x1540a7,_0x54f978,_0x515944),this['_parent']===null)this['localRotat'+'ion']['mul2'](as,this['localRotat'+'ion']);else{const _0x3fd59b=this['getRotatio'+'n'](),_0x5f11df=this['_parent']['getRotatio'+'n']();Ia['copy'](_0x5f11df)['invert'](),as['mul2'](Ia,as),this['localRotat'+'ion']['mul2'](as,_0x3fd59b);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotateLoca'+'l'](_0x155b02,_0x5b9edc,_0x5a9fd0){as['setFromEul'+'erAngles'](_0x155b02,_0x5b9edc,_0x5a9fd0),this['localRotat'+'ion']['mul'](as),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}}const yv=new Kt();function Qn(_0x3b0a1e){const _0x160be5=yv['get'](_0x3b0a1e);return w['assert'](_0x160be5),_0x160be5;}function xE(_0x59e881,_0x58fdef){w['assert'](_0x58fdef),yv['get'](_0x59e881,()=>_0x58fdef);}class TE{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach']((_0xbff775,_0x215c29)=>{_0x215c29['destroy']();}),this['cache']['clear']();}['incRef'](_0x130b78){const _0x298ad3=(this['cache']['get'](_0x130b78)||0x2*0x7ed+0x124*-0x1+0x1*-0xeb6)+(0x109c+0x133*-0x1+-0x3da*0x4);this['cache']['set'](_0x130b78,_0x298ad3);}['decRef'](_0x291671){if(_0x291671){let _0x247520=this['cache']['get'](_0x291671);_0x247520&&(_0x247520--,_0x247520===-0xbd0+-0x137f+0x1f4f*0x1?(this['cache']['delete'](_0x291671),_0x291671['destroy']()):this['cache']['set'](_0x291671,_0x247520));}}}class zi{static['incRef'](_0x13acb2){this['cache']['incRef'](_0x13acb2);}static['decRef'](_0x4240a6){this['cache']['decRef'](_0x4240a6);}static['destroy'](){this['cache']['destroy']();}}h(zi,'cache',new TE());let wE=0x193c+0x24e6*0x1+-0x3*0x14b6;const EE=new De(),sc=new De(),Xd=new sp(),qd=new Set(),Rr=new Uint32Array(-0x2*0x2d2+0x1*0xd55+-0x7ad);class bE{constructor(_0x4787e5){h(this,'vertexBuff'+'er',null),h(this,'_destroyVe'+'rtexBuffer',!(0x26e*-0x5+-0x1619*0x1+0x2240)),this['count']=_0x4787e5;}['destroy'](){var _0x5038b0;this['_destroyVe'+'rtexBuffer']&&((_0x5038b0=this['vertexBuff'+'er'])==null||_0x5038b0['destroy']()),this['vertexBuff'+'er']=null;}}class AE{constructor(){h(this,'map',new Map()),h(this,'meshMetaDa'+'ta',new Int32Array(-0x10e9+-0x240d*0x1+-0x2*-0x1a7d));}['get'](_0x2b1924){return this['map']['get'](_0x2b1924)??this['map']['get'](null);}}class CE{constructor(){h(this,'shader'),h(this,'bindGroup',null),h(this,'uniformBuf'+'fer',null),h(this,'hashes');}['getBindGro'+'up'](_0x14def5){if(!this['bindGroup']){const _0x26ccf1=this['shader'];w['assert'](_0x26ccf1);const _0x515819=_0x26ccf1['meshBindGr'+'oupFormat'];w['assert'](_0x515819),this['bindGroup']=new Up(_0x14def5,_0x515819),Ea['setName'](this['bindGroup'],'MeshBindGr'+'oup_'+this['bindGroup']['id']);}return this['bindGroup'];}['getUniform'+'Buffer'](_0x262ded){if(!this['uniformBuf'+'fer']){const _0x2e3324=this['shader'];w['assert'](_0x2e3324);const _0x4298e6=_0x2e3324['meshUnifor'+'mBufferFor'+'mat'];w['assert'](_0x4298e6),this['uniformBuf'+'fer']=new zp(_0x262ded,_0x4298e6,!(-0x4*-0x69f+0x1445+-0x2ec0));}return this['uniformBuf'+'fer'];}['destroy'](){var _0x76c1bb,_0x1711c3;(_0x76c1bb=this['bindGroup'])==null||_0x76c1bb['destroy'](),this['bindGroup']=null,(_0x1711c3=this['uniformBuf'+'fer'])==null||_0x1711c3['destroy'](),this['uniformBuf'+'fer']=null;}}const Jr=class Jr{constructor(_0x44b047,_0x4fe822,_0x39d245=null){h(this,'castShadow',!(-0xf9+0x21ad+0xb*-0x2f9)),h(this,'shadowCasc'+'adeMask',Bw),h(this,'cull',!(-0x971*-0x1+-0x1ae3*-0x1+0x26c*-0xf)),h(this,'drawOrder',-0x3*0x509+-0x616*-0x2+0x2ef),h(this,'_drawBucke'+'t',-0xd5a+0x21*0xa2+-0x709),h(this,'node'),h(this,'visible',!(0x31*0x40+0x151*0x1b+-0x5*0x98f)),h(this,'visibleThi'+'sFrame',!(-0x491*0x4+-0x496*-0x1+0xdaf)),h(this,'flipFacesF'+'actor',-0x64e+0xb2c+-0x4dd),h(this,'gsplatInst'+'ance',null),h(this,'id',wE++),h(this,'isVisibleF'+'unc',null),h(this,'instancing'+'Data',null),h(this,'indirectDa'+'ta',null),h(this,'parameters',{}),h(this,'pick',!(-0x1*0x2057+0x6c4+0x1993)),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'transparen'+'t',!(0x434+0x5*0x23f+-0xf6e)),h(this,'_aabb',new De()),h(this,'_aabbVer',-(-0x10*-0xe+0x85*-0x3+0xb0)),h(this,'_aabbMeshV'+'er',-(0x67f*0x5+-0xb04+0x2*-0xabb)),h(this,'_customAab'+'b',null),h(this,'_updateAab'+'b',!(-0x1105+-0x24f*-0x1+0x75b*0x2)),h(this,'_updateAab'+'bFunc',null),h(this,'_sortKeySh'+'adow',0x25c9+-0x1282+-0x1347),h(this,'_sortKeyFo'+'rward',-0x15cf+-0x21ce*-0x1+-0x1*0xbff),h(this,'_sortKeyDy'+'namic',-0xe49+0x83*0x3a+-0x1*0xf65),h(this,'_layer',Ky),h(this,'_material',null),h(this,'_skinInsta'+'nce',null),h(this,'_morphInst'+'ance',null),h(this,'_receiveSh'+'adow',!(0x821*-0x1+0x14a8+-0xc87)),h(this,'_renderSty'+'le',un),h(this,'_screenSpa'+'ce',!(-0x120b+0x6f*0xe+-0x15*-0x92)),h(this,'_shaderCac'+'he',new Map()),h(this,'_shaderDef'+'s',Ss<<-0xa21+0x14d3+-0x551*0x2),h(this,'_calculate'+'SortDistan'+'ce',null);if(w['assert'](!(_0x44b047 instanceof Ie),'Incorrect\x20'+'parameters'+'\x20for\x20MeshI'+'nstance\x27s\x20'+'constructo'+'r.\x20Use\x20new'+'\x20MeshInsta'+'nce(mesh,\x20'+'material,\x20'+'node)'),this['node']=_0x39d245,this['_mesh']=_0x44b047,_0x44b047['incRefCoun'+'t'](),this['material']=_0x4fe822,_0x44b047['vertexBuff'+'er']){const _0x138f20=_0x44b047['vertexBuff'+'er']['format'];this['_shaderDef'+'s']|=_0x138f20['hasUv0']?nm:0xe*0x215+0x3d3*0x3+-0x289f*0x1,this['_shaderDef'+'s']|=_0x138f20['hasUv1']?dv:-0x907*0x4+-0x1147+-0x3563*-0x1,this['_shaderDef'+'s']|=_0x138f20['hasColor']?fv:-0x17bf+0x1b2d+-0x36e,this['_shaderDef'+'s']|=_0x138f20['hasTangent'+'s']?om:-0xde9+0x49d*-0x2+0x1*0x1723;}this['updateKey']();}set['drawBucket'](_0x226d19){this['_drawBucke'+'t']=Math['floor'](_0x226d19)&-0x244d+-0xabe+-0x1d9*-0x1a,this['updateKey']();}get['drawBucket'](){return this['_drawBucke'+'t'];}set['renderStyl'+'e'](_0x3c2698){this['_renderSty'+'le']=_0x3c2698,this['mesh']['prepareRen'+'derState'](_0x3c2698);}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['mesh'](_0x42f921){_0x42f921!==this['_mesh']&&(this['_mesh']&&this['_mesh']['decRefCoun'+'t'](),this['_mesh']=_0x42f921,_0x42f921&&_0x42f921['incRefCoun'+'t']());}get['mesh'](){return this['_mesh'];}set['aabb'](_0x116ec8){this['_aabb']=_0x116ec8;}get['aabb'](){if(!this['_updateAab'+'b'])return this['_aabb'];if(this['_updateAab'+'bFunc'])return this['_updateAab'+'bFunc'](this['_aabb']);let _0x46de30=this['_customAab'+'b'],_0x34755e=!!_0x46de30;if(!_0x46de30){if(_0x46de30=EE,this['skinInstan'+'ce']){if(!this['mesh']['boneAabb']){const _0x4b952e=this['_morphInst'+'ance']?this['_morphInst'+'ance']['morph']['_targets']:null;this['mesh']['_initBoneA'+'abbs'](_0x4b952e);}const _0x352174=this['mesh']['boneUsed'];let _0x27f61e=!(0x3*-0x4d2+0x1*-0xa3+0xf19*0x1);for(let _0x276605=0x20f3+-0x212f+0x3c;_0x276605<this['mesh']['boneAabb']['length'];_0x276605++)_0x352174[_0x276605]&&(sc['setFromTra'+'nsformedAa'+'bb'](this['mesh']['boneAabb'][_0x276605],this['skinInstan'+'ce']['matrices'][_0x276605]),_0x27f61e?(_0x27f61e=!(0x449*-0x3+0x3d5*-0x5+0x2005),_0x46de30['center']['copy'](sc['center']),_0x46de30['halfExtent'+'s']['copy'](sc['halfExtent'+'s'])):_0x46de30['add'](sc));_0x34755e=!(0x3b*0x3a+0xef*0x17+-0x22d7);}else{if(this['node']['_aabbVer']!==this['_aabbVer']||this['mesh']['_aabbVer']!==this['_aabbMeshV'+'er']){if(this['mesh']?(_0x46de30['center']['copy'](this['mesh']['aabb']['center']),_0x46de30['halfExtent'+'s']['copy'](this['mesh']['aabb']['halfExtent'+'s'])):(_0x46de30['center']['set'](-0x138e+-0x7*0x365+0x2b51,0x132e+-0x2*-0x4f9+0x1d2*-0x10,0xc5*-0x29+0x24d+0x1d40),_0x46de30['halfExtent'+'s']['set'](0xec1+0x4ca+-0x138b*0x1,0x1*0x18d7+-0x215b+0x221*0x4,0x3*0x858+0x1*0x15b2+-0x2eba)),this['mesh']&&this['mesh']['morph']){const _0x1e3ff1=this['mesh']['morph']['aabb'];_0x46de30['_expand'](_0x1e3ff1['getMin'](),_0x1e3ff1['getMax']());}_0x34755e=!(0x9*-0x119+0xfa4+0x3b*-0x19),this['_aabbVer']=this['node']['_aabbVer'],this['_aabbMeshV'+'er']=this['mesh']['_aabbVer'];}}}return _0x34755e&&this['_aabb']['setFromTra'+'nsformedAa'+'bb'](_0x46de30,this['node']['getWorldTr'+'ansform']()),this['_aabb'];}['clearShade'+'rs'](){this['_shaderCac'+'he']['forEach'](_0x469148=>{_0x469148['destroy']();}),this['_shaderCac'+'he']['clear']();}['getShaderI'+'nstance'](_0x1e9e48,_0x11ff0c,_0x1b42be,_0x3d1b77,_0x2dfd37,_0xe4cb58,_0x4a5d78){var _0x3adfef;const _0x26475d=this['_shaderDef'+'s'];Rr[0x15e5+-0x1a6*-0xe+0x1*-0x2cf9]=_0x1e9e48,Rr[0x2597+0x13*0x1a+-0x2784]=_0x11ff0c,Rr[0x1*-0xd8f+0x4ee*0x5+-0xb15]=_0x26475d,Rr[-0xd*-0x2a+0x25d4+-0x27f3]=_0x3d1b77['hash'];const _0x5e37b5=By(Rr);let _0x45a5d5=this['_shaderCac'+'he']['get'](_0x5e37b5);if(!_0x45a5d5){const _0x2d1c8d=this['_material'];if(_0x45a5d5=new CE(),_0x45a5d5['shader']=_0x2d1c8d['variants']['get'](_0x5e37b5),_0x45a5d5['hashes']=new Uint32Array(Rr),!_0x45a5d5['shader']){Q['pushGpuMar'+'ker'](this['mesh']['device'],'Node:\x20'+this['node']['name']);const _0x592830=_0x2d1c8d['getShaderV'+'ariant']({'device':this['mesh']['device'],'scene':_0x1b42be,'objDefs':_0x26475d,'cameraShaderParams':_0x3d1b77,'pass':_0x1e9e48,'sortedLights':_0x4a5d78,'viewUniformFormat':_0x2dfd37,'viewBindGroupFormat':_0xe4cb58,'vertexFormat':(_0x3adfef=this['mesh']['vertexBuff'+'er'])==null?void(-0x9f8+-0x1*-0x25b9+-0x1d*0xf5):_0x3adfef['format']});Q['popGpuMark'+'er'](this['mesh']['device']),_0x2d1c8d['variants']['set'](_0x5e37b5,_0x592830),_0x45a5d5['shader']=_0x592830;}this['_shaderCac'+'he']['set'](_0x5e37b5,_0x45a5d5);}return w['call'](()=>{IT['equals'](_0x45a5d5['hashes'],Rr)||w['errorOnce']('Hash\x20colli'+'sion\x20in\x20th'+'e\x20shader\x20c'+'ache\x20for\x20m'+'esh\x20instan'+'ce.\x20This\x20i'+'s\x20very\x20unl'+'ikely\x20but\x20'+'still\x20poss'+'ible.\x20Plea'+'se\x20report\x20'+'this\x20issue'+'.');}),_0x45a5d5;}set['material'](_0x33e0e9){this['clearShade'+'rs']();const _0x27ac26=this['_material'];_0x27ac26&&_0x27ac26['removeMesh'+'InstanceRe'+'f'](this),this['_material']=_0x33e0e9,_0x33e0e9&&(_0x33e0e9['addMeshIns'+'tanceRef'](this),this['transparen'+'t']=_0x33e0e9['transparen'+'t'],this['updateKey']());}get['material'](){return this['_material'];}['_updateSha'+'derDefs'](_0x403ab8){_0x403ab8!==this['_shaderDef'+'s']&&(this['_shaderDef'+'s']=_0x403ab8,this['clearShade'+'rs']());}set['calculateS'+'ortDistanc'+'e'](_0x30dca2){this['_calculate'+'SortDistan'+'ce']=_0x30dca2;}get['calculateS'+'ortDistanc'+'e'](){return this['_calculate'+'SortDistan'+'ce'];}set['receiveSha'+'dow'](_0x5a6b7a){this['_receiveSh'+'adow']!==_0x5a6b7a&&(this['_receiveSh'+'adow']=_0x5a6b7a,this['_updateSha'+'derDefs'](_0x5a6b7a?this['_shaderDef'+'s']&~wh:this['_shaderDef'+'s']|wh));}get['receiveSha'+'dow'](){return this['_receiveSh'+'adow'];}set['batching'](_0x1f5f45){this['_updateSha'+'derDefs'](_0x1f5f45?this['_shaderDef'+'s']|qc:this['_shaderDef'+'s']&~qc);}get['batching'](){return(this['_shaderDef'+'s']&qc)!==-0x43f+0xc67+-0x18*0x57;}set['skinInstan'+'ce'](_0x4cb2b5){this['_skinInsta'+'nce']=_0x4cb2b5,this['_updateSha'+'derDefs'](_0x4cb2b5?this['_shaderDef'+'s']|nl:this['_shaderDef'+'s']&~nl),this['_setupSkin'+'Update']();}get['skinInstan'+'ce'](){return this['_skinInsta'+'nce'];}set['morphInsta'+'nce'](_0x5a9ee5){var _0x16f53e;(_0x16f53e=this['_morphInst'+'ance'])==null||_0x16f53e['destroy'](),this['_morphInst'+'ance']=_0x5a9ee5;let _0x2649ca=this['_shaderDef'+'s'];_0x2649ca=_0x5a9ee5&&_0x5a9ee5['morph']['morphPosit'+'ions']?_0x2649ca|ll:_0x2649ca&~ll,_0x2649ca=_0x5a9ee5&&_0x5a9ee5['morph']['morphNorma'+'ls']?_0x2649ca|cl:_0x2649ca&~cl,_0x2649ca=_0x5a9ee5&&_0x5a9ee5['morph']['intRenderF'+'ormat']?_0x2649ca|hl:_0x2649ca&~hl,this['_updateSha'+'derDefs'](_0x2649ca);}get['morphInsta'+'nce'](){return this['_morphInst'+'ance'];}set['screenSpac'+'e'](_0x36768f){this['_screenSpa'+'ce']!==_0x36768f&&(this['_screenSpa'+'ce']=_0x36768f,this['_updateSha'+'derDefs'](_0x36768f?this['_shaderDef'+'s']|Eh:this['_shaderDef'+'s']&~Eh));}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['key'](_0x27ad21){this['_sortKeyFo'+'rward']=_0x27ad21;}get['key'](){return this['_sortKeyFo'+'rward'];}set['mask'](_0x1f7eb5){const _0x43a0b2=this['_shaderDef'+'s']&-0x10ad*0xd+-0x2*0x2766+0x22794;this['_updateSha'+'derDefs'](_0x43a0b2|_0x1f7eb5<<0x47*0x25+-0x4a6+0x1d*-0x31);}get['mask'](){return this['_shaderDef'+'s']>>-0x1*0xd1a+-0x12b6+0x1fe0;}set['instancing'+'Count'](_0x305ecf){this['instancing'+'Data']&&(this['instancing'+'Data']['count']=_0x305ecf);}get['instancing'+'Count'](){return this['instancing'+'Data']?this['instancing'+'Data']['count']:0x4*-0x2b1+0x101*0x7+0x3bd;}['destroy'](){var _0x28ea21,_0x21ea75,_0x25ff9e;const _0x38331f=this['mesh'];_0x38331f&&(this['mesh']=null,_0x38331f['refCount']<-0x17*0x162+-0x8c1+0x2890&&_0x38331f['destroy']()),this['setRealtim'+'eLightmap'](Jr['lightmapPa'+'ramNames'][0x2*0x1343+-0x1f40+-0x10a*0x7],null),this['setRealtim'+'eLightmap'](Jr['lightmapPa'+'ramNames'][-0x14*0x17c+-0x7f7+0x1e2*0x14],null),(_0x28ea21=this['_skinInsta'+'nce'])==null||_0x28ea21['destroy'](),this['_skinInsta'+'nce']=null,(_0x21ea75=this['morphInsta'+'nce'])==null||_0x21ea75['destroy'](),this['morphInsta'+'nce']=null,this['clearShade'+'rs'](),this['material']=null,(_0x25ff9e=this['instancing'+'Data'])==null||_0x25ff9e['destroy']();}static['_prepareRe'+'nderStyleF'+'orArray'](_0xa0d0dd,_0x52f849){if(_0xa0d0dd){for(let _0x5a0696=-0x1c10+-0x20e1*0x1+0x3cf1;_0x5a0696<_0xa0d0dd['length'];_0x5a0696++){_0xa0d0dd[_0x5a0696]['_renderSty'+'le']=_0x52f849;const _0x57f8eb=_0xa0d0dd[_0x5a0696]['mesh'];qd['has'](_0x57f8eb)||(qd['add'](_0x57f8eb),_0x57f8eb['prepareRen'+'derState'](_0x52f849));}qd['clear']();}}['_isVisible'](_0x10bdba){return this['visible']?this['isVisibleF'+'unc']?this['isVisibleF'+'unc'](_0x10bdba):(Xd['center']=this['aabb']['center'],Xd['radius']=this['_aabb']['halfExtent'+'s']['length'](),_0x10bdba['frustum']['containsSp'+'here'](Xd)>-0x25d7+0xfa1*-0x2+0x4519):!(-0x10e6+-0xd3d+-0xc*-0x283);}['updateKey'](){const {material:_0x1a4fa0}=this;this['_sortKeyFo'+'rward']=this['_drawBucke'+'t']<<0x1009*-0x2+-0x1042+-0x306b*-0x1|(_0x1a4fa0['alphaToCov'+'erage']||_0x1a4fa0['alphaTest']?0x2*0xe450a+-0x7c5722+0x35445a*0x3:-0x2d7*-0x6+0x848+0xe*-0x1cf)|_0x1a4fa0['id']&-0x76c6b1+-0x69c03a+0x904375*0x2;}['setInstanc'+'ing'](_0x4e3680,_0x505acf=!(0x1*-0x20e3+0x331+0x1db3)){_0x4e3680?(this['instancing'+'Data']=new bE(_0x4e3680['numVertice'+'s']),this['instancing'+'Data']['vertexBuff'+'er']=_0x4e3680,_0x4e3680['format']['instancing']=!(-0x2598+0x14c7+0x10d1),this['cull']=_0x505acf):(this['instancing'+'Data']=null,this['cull']=!(-0x1849*0x1+-0x1d*-0x64+0xcf5)),this['_updateSha'+'derDefs'](_0x4e3680?this['_shaderDef'+'s']|ol:this['_shaderDef'+'s']&~ol);}['setIndirec'+'t'](_0x1631c6,_0x3af260){this['_allocIndi'+'rectData'](),this['indirectDa'+'ta']['map']['set']((_0x1631c6==null?void(-0x1*0xdf+-0x5f0+0x6cf):_0x1631c6['camera'])??null,_0x3af260),this['mesh']['device']['mapsToClea'+'r']['add'](this['indirectDa'+'ta']['map']);}['getIndirec'+'tMetaData'](){var _0x1876e6;this['_allocIndi'+'rectData']();const _0xbc7840=(_0x1876e6=this['mesh'])==null?void(-0x15f3*0x1+-0x8a7+-0xf4d*-0x2):_0x1876e6['primitive'][this['renderStyl'+'e']],_0x85025c=this['indirectDa'+'ta']['meshMetaDa'+'ta'];return _0x85025c[-0x1ab5+-0x221f+-0x4*-0xf35]=_0xbc7840['count'],_0x85025c[0x1a33+0x13b8+0x16f5*-0x2]=_0xbc7840['base'],_0x85025c[-0x5b3*-0x3+-0x1747+0x630]=_0xbc7840['baseVertex'],_0x85025c;}['_allocIndi'+'rectData'](){this['indirectDa'+'ta']||(this['indirectDa'+'ta']=new AE());}['ensureMate'+'rial'](_0x205b3c){this['material']||(w['warn']('Mesh\x20attac'+'hed\x20to\x20ent'+'ity\x20\x27'+this['node']['name']+('\x27\x20does\x20not'+'\x20have\x20a\x20ma'+'terial,\x20us'+'ing\x20a\x20defa'+'ult\x20one.')),this['material']=Qn(_0x205b3c));}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['getParamet'+'er'](_0x27c8d6){return this['parameters'][_0x27c8d6];}['setParamet'+'er'](_0x571536,_0x45f8d3,_0x5c2b4e=-0x712664d0+0x1*-0x1b70feaf3+-0x1027*-0x32096e){const _0x110e84=this['parameters'][_0x571536];_0x110e84?(_0x110e84['data']=_0x45f8d3,_0x110e84['passFlags']=_0x5c2b4e):this['parameters'][_0x571536]={'scopeId':null,'data':_0x45f8d3,'passFlags':_0x5c2b4e};}['setRealtim'+'eLightmap'](_0xa15eae,_0x1b5aae){const _0x8ba4bc=this['getParamet'+'er'](_0xa15eae);_0x8ba4bc!==_0x1b5aae&&(_0x8ba4bc&&zi['decRef'](_0x8ba4bc['data']),_0x1b5aae?(zi['incRef'](_0x1b5aae),this['setParamet'+'er'](_0xa15eae,_0x1b5aae)):this['deletePara'+'meter'](_0xa15eae));}['deletePara'+'meter'](_0x48a063){this['parameters'][_0x48a063]&&delete this['parameters'][_0x48a063];}['setParamet'+'ers'](_0x17750b,_0x894ba4){const _0x2762cc=this['parameters'];for(const _0x349141 in _0x2762cc){const _0x48bd36=_0x2762cc[_0x349141];_0x48bd36['passFlags']&_0x894ba4&&(_0x48bd36['scopeId']||(_0x48bd36['scopeId']=_0x17750b['scope']['resolve'](_0x349141)),_0x48bd36['scopeId']['setValue'](_0x48bd36['data']));}}['setLightma'+'pped'](_0x26f015){_0x26f015?this['mask']=(this['mask']|di)&-(-0xd*0x223+0x3*0xa7c+-0x3a7):(this['setRealtim'+'eLightmap'](Jr['lightmapPa'+'ramNames'][0x24ab+0xfec+-0x3497],null),this['setRealtim'+'eLightmap'](Jr['lightmapPa'+'ramNames'][0xc13+0x1eb*-0x5+-0x27b],null),this['_shaderDef'+'s']&=-(-0x2*0x6da+0x1a*0x6e+0x1349),this['mask']=(this['mask']|Ss)&-(-0x21e5*0x1+0x1354*0x2+0x1*-0x4bc));}['setCustomA'+'abb'](_0x20023b){_0x20023b?this['_customAab'+'b']?this['_customAab'+'b']['copy'](_0x20023b):this['_customAab'+'b']=_0x20023b['clone']():(this['_customAab'+'b']=null,this['_aabbVer']=-(0x1daa+-0x6*-0x3b2+-0x33d5)),this['_setupSkin'+'Update']();}['_setupSkin'+'Update'](){this['_skinInsta'+'nce']&&(this['_skinInsta'+'nce']['_updateBef'+'oreCull']=!this['_customAab'+'b']);}};h(Jr,'lightmapPa'+'ramNames',['texture_li'+'ghtMap','texture_di'+'rLightMap']);let He=Jr;const PE=[0xfd4+0x1e9d+0x2e71*-0x1,0x2099*0x1+0x22ea+-0x21c1*0x2,-0x16b3+-0x10*0x6d+0x1d86,-0x1ab8+0xaf9+0x25*0x6d,0x24e3+-0x1ceb+-0x3*0x2a7,-0x7a6+-0xd2+0x879],ME=[0x1e8d+0x1397+-0x1912*0x2,-0x3f3*-0x6+-0x64f+-0x1162,-0x6c1*-0x3+0x3*0x14f+-0x182d,-0x3*-0x2c5+0x1a77*0x1+-0x22c6,0x25c3+0x12f2+-0x38b2*0x1,0x20cf+0x26ae+-0x477b],A_=new _i();function C_(_0x43723f,_0x1ef9f1){if(_0x43723f&&!_0x1ef9f1||!_0x43723f&&_0x1ef9f1)return!(0x232b+0x269e+-0x49c8);if(_0x43723f=_0x43723f['data'],_0x1ef9f1=_0x1ef9f1['data'],_0x43723f===_0x1ef9f1)return!(0x9f0+-0x2374*-0x1+-0x2d64);if(_0x43723f instanceof Float32Array&&_0x1ef9f1 instanceof Float32Array){if(_0x43723f['length']!==_0x1ef9f1['length'])return!(-0x1*0x20c+-0xa98+-0x53*-0x27);for(let _0x431fbf=0x47*-0x3b+0x12a+0x511*0x3;_0x431fbf<_0x43723f['length'];_0x431fbf++)if(_0x43723f[_0x431fbf]!==_0x1ef9f1[_0x431fbf])return!(0x232b+-0x25be+0x5*0x84);return!(0x15fc+-0x2660+0x1064);}return!(-0x325+-0x1ef8+0x18d*0x16);}function DE(_0x369ce4,_0x1f2970){for(const _0x84850 in _0x369ce4)if(_0x369ce4['hasOwnProp'+'erty'](_0x84850)&&!C_(_0x369ce4[_0x84850],_0x1f2970[_0x84850]))return!(-0x3*0xe3+-0xbf*-0x1d+-0x12f9);for(const _0x376835 in _0x1f2970)if(_0x1f2970['hasOwnProp'+'erty'](_0x376835)&&!C_(_0x1f2970[_0x376835],_0x369ce4[_0x376835]))return!(0x148d+-0x11*-0x14e+-0x2aba);return!(0x1*-0xd2d+0x1d0f+-0xfe2);}function jd(_0x2de5ab){return _0x2de5ab['node']['worldTrans'+'form']['scaleSign'];}class IE{constructor(_0x41f351,_0x30c7c4,_0x17f34b){this['device']=_0x41f351,this['rootNode']=_0x30c7c4,this['scene']=_0x17f34b,this['_init']=!(0xa06+0x13*-0x65+-0x286),this['_batchGrou'+'ps']={},this['_batchGrou'+'pCounter']=0x16*0x3+0x135c+-0x345*0x6,this['_batchList']=[],this['_dirtyGrou'+'ps']=[],this['_stats']={'createTime':0x0,'updateLastFrameTime':0x0};}['destroy'](){this['device']=null,this['rootNode']=null,this['scene']=null,this['_batchGrou'+'ps']={},this['_batchList']=[],this['_dirtyGrou'+'ps']=[];}['addGroup'](_0x2cb3aa,_0x1c148d,_0x12dd0e,_0x57d629,_0x1c9c70){if(_0x57d629===void(0x126+0x155f+-0x1685*0x1)&&(_0x57d629=this['_batchGrou'+'pCounter'],this['_batchGrou'+'pCounter']++),this['_batchGrou'+'ps'][_0x57d629]){w['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x57d629+('\x20already\x20e'+'xists.'));return;}const _0x3b934c=new St(_0x57d629,_0x2cb3aa,_0x1c148d,_0x12dd0e,_0x1c9c70);return this['_batchGrou'+'ps'][_0x57d629]=_0x3b934c,_0x3b934c;}['removeGrou'+'p'](_0x110e99){if(!this['_batchGrou'+'ps'][_0x110e99]){w['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x110e99+('\x20doesn\x27t\x20e'+'xist.'));return;}const _0x4fe753=[];for(let _0x2ff677=0x152d+0x199c+0x1d*-0x19d;_0x2ff677<this['_batchList']['length'];_0x2ff677++)this['_batchList'][_0x2ff677]['batchGroup'+'Id']===_0x110e99?this['destroyBat'+'ch'](this['_batchList'][_0x2ff677]):_0x4fe753['push'](this['_batchList'][_0x2ff677]);this['_batchList']=_0x4fe753,this['_removeMod'+'elsFromBat'+'chGroup'](this['rootNode'],_0x110e99),delete this['_batchGrou'+'ps'][_0x110e99];}['markGroupD'+'irty'](_0xf820d5){this['_dirtyGrou'+'ps']['indexOf'](_0xf820d5)<-0x1*0x12bd+-0x6cb+0x331*0x8&&this['_dirtyGrou'+'ps']['push'](_0xf820d5);}['getGroupBy'+'Name'](_0x7ca340){const _0x2a99d0=this['_batchGrou'+'ps'];for(const _0x27f623 in _0x2a99d0)if(_0x2a99d0['hasOwnProp'+'erty'](_0x27f623)&&_0x2a99d0[_0x27f623]['name']===_0x7ca340)return _0x2a99d0[_0x27f623];return null;}['getBatches'](_0x45a1e5){const _0x41ebca=[],_0x5368eb=this['_batchList']['length'];for(let _0xea9dd3=0xc0a+-0x103d+0x433*0x1;_0xea9dd3<_0x5368eb;_0xea9dd3++){const _0x31be4c=this['_batchList'][_0xea9dd3];_0x31be4c['batchGroup'+'Id']===_0x45a1e5&&_0x41ebca['push'](_0x31be4c);}return _0x41ebca;}['_removeMod'+'elsFromBat'+'chGroup'](_0x3d539c,_0x2d9679){if(_0x3d539c['enabled']){_0x3d539c['model']&&_0x3d539c['model']['batchGroup'+'Id']===_0x2d9679&&(_0x3d539c['model']['batchGroup'+'Id']=-(0xc7*-0x29+-0xad4+-0x38f*-0xc)),_0x3d539c['render']&&_0x3d539c['render']['batchGroup'+'Id']===_0x2d9679&&(_0x3d539c['render']['batchGroup'+'Id']=-(0x1*-0x7e1+0xbaa+-0xf2*0x4)),_0x3d539c['element']&&_0x3d539c['element']['batchGroup'+'Id']===_0x2d9679&&(_0x3d539c['element']['batchGroup'+'Id']=-(-0x5*-0x419+-0x1*-0xecd+0x2349*-0x1)),_0x3d539c['sprite']&&_0x3d539c['sprite']['batchGroup'+'Id']===_0x2d9679&&(_0x3d539c['sprite']['batchGroup'+'Id']=-(-0x263e+0x2e2+0x337*0xb));for(let _0x10cec9=-0x18a1+0x13c0+0x4e1;_0x10cec9<_0x3d539c['_children']['length'];_0x10cec9++)this['_removeMod'+'elsFromBat'+'chGroup'](_0x3d539c['_children'][_0x10cec9],_0x2d9679);}}['insert'](_0x300a1e,_0x48f95a,_0x1ee866){const _0x2255aa=this['_batchGrou'+'ps'][_0x48f95a];w['assert'](_0x2255aa,'Invalid\x20ba'+'tch\x20'+_0x48f95a+'\x20insertion'),_0x2255aa&&_0x2255aa['_obj'][_0x300a1e]['indexOf'](_0x1ee866)<0x1973*0x1+-0x95*-0x26+-0x129*0x29&&(_0x2255aa['_obj'][_0x300a1e]['push'](_0x1ee866),this['markGroupD'+'irty'](_0x48f95a));}['remove'](_0x146251,_0x4c07c1,_0x2b2ea8){const _0x3b5280=this['_batchGrou'+'ps'][_0x4c07c1];if(w['assert'](_0x3b5280,'Invalid\x20ba'+'tch\x20'+_0x4c07c1+'\x20insertion'),_0x3b5280){const _0x5e95fe=_0x3b5280['_obj'][_0x146251]['indexOf'](_0x2b2ea8);_0x5e95fe>=-0xa53+0x2b9*0x9+-0x14a*0xb&&(_0x3b5280['_obj'][_0x146251]['splice'](_0x5e95fe,-0x1*0x1ad2+0x3ee*-0x9+0x1d*0x225),this['markGroupD'+'irty'](_0x4c07c1));}}['_extractRe'+'nder'](_0x4d48e8,_0x47fbdc,_0xd98467,_0x3d7ce6){return _0x4d48e8['render']&&(_0x47fbdc=_0x3d7ce6[_0x4d48e8['render']['batchGroup'+'Id']]=_0x47fbdc['concat'](_0x4d48e8['render']['meshInstan'+'ces']),_0x4d48e8['render']['removeFrom'+'Layers']()),_0x47fbdc;}['_extractMo'+'del'](_0x55fde9,_0x39ca89,_0x589b0d,_0x167dda){return _0x55fde9['model']&&_0x55fde9['model']['model']&&(_0x39ca89=_0x167dda[_0x55fde9['model']['batchGroup'+'Id']]=_0x39ca89['concat'](_0x55fde9['model']['meshInstan'+'ces']),_0x55fde9['model']['removeMode'+'lFromLayer'+'s'](),_0x55fde9['model']['_batchGrou'+'p']=_0x589b0d),_0x39ca89;}['_extractEl'+'ement'](_0x2e25dd,_0x184de7,_0x3dc028){if(!_0x2e25dd['element'])return;let _0x1d4276=!(-0x26ba+-0x37*-0x7+0x253a);_0x2e25dd['element']['_text']&&_0x2e25dd['element']['_text']['_model']['meshInstan'+'ces']['length']>-0x2*-0x7ca+0x231+-0x11c5?(_0x184de7['push'](_0x2e25dd['element']['_text']['_model']['meshInstan'+'ces'][-0x773+-0x1*-0xf50+-0x7dd]),_0x2e25dd['element']['removeMode'+'lFromLayer'+'s'](_0x2e25dd['element']['_text']['_model']),_0x1d4276=!(-0x551*0x1+0x899+-0x348)):_0x2e25dd['element']['_image']&&(_0x184de7['push'](_0x2e25dd['element']['_image']['_renderabl'+'e']['meshInstan'+'ce']),_0x2e25dd['element']['removeMode'+'lFromLayer'+'s'](_0x2e25dd['element']['_image']['_renderabl'+'e']['model']),_0x2e25dd['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']&&(_0x184de7['push'](_0x2e25dd['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']),(!_0x2e25dd['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']||!_0x2e25dd['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k'])&&(_0x2e25dd['element']['_dirtifyMa'+'sk'](),_0x2e25dd['element']['_onPrerend'+'er']())),_0x1d4276=!(-0xe33*-0x2+0x221*0x1+-0x1e87)),_0x1d4276&&(_0x3dc028['_ui']=!(0x243+-0xc*-0x226+0x959*-0x3),_0x2e25dd['element']['_batchGrou'+'p']=_0x3dc028);}['_collectAn'+'dRemoveMes'+'hInstances'](_0x5b91b6,_0x1ac5f7){for(let _0x7dc534=0x19*-0x59+0x1582+0x11*-0xc1;_0x7dc534<_0x1ac5f7['length'];_0x7dc534++){const _0x2f0497=_0x1ac5f7[_0x7dc534],_0x169e78=this['_batchGrou'+'ps'][_0x2f0497];if(!_0x169e78)continue;let _0x3fe493=_0x5b91b6[_0x2f0497];_0x3fe493||(_0x3fe493=_0x5b91b6[_0x2f0497]=[]);for(let _0x25cfee=-0x265*-0x1+0x1*0x1952+-0x285*0xb;_0x25cfee<_0x169e78['_obj']['model']['length'];_0x25cfee++)_0x3fe493=this['_extractMo'+'del'](_0x169e78['_obj']['model'][_0x25cfee],_0x3fe493,_0x169e78,_0x5b91b6);for(let _0x39a815=0xf7+0x1*-0xc1b+-0x4*-0x2c9;_0x39a815<_0x169e78['_obj']['render']['length'];_0x39a815++)_0x3fe493=this['_extractRe'+'nder'](_0x169e78['_obj']['render'][_0x39a815],_0x3fe493,_0x169e78,_0x5b91b6);for(let _0x31c04c=-0x1*0x1184+-0x183*-0xf+-0x529;_0x31c04c<_0x169e78['_obj']['element']['length'];_0x31c04c++)this['_extractEl'+'ement'](_0x169e78['_obj']['element'][_0x31c04c],_0x3fe493,_0x169e78);for(let _0x59dcf2=0x955+-0x1*-0xdf6+-0x174b;_0x59dcf2<_0x169e78['_obj']['sprite']['length'];_0x59dcf2++){const _0x2afe1b=_0x169e78['_obj']['sprite'][_0x59dcf2];_0x2afe1b['sprite']&&_0x2afe1b['sprite']['_meshInsta'+'nce']&&(_0x169e78['dynamic']||_0x2afe1b['sprite']['sprite']['_renderMod'+'e']===ci)&&(_0x3fe493['push'](_0x2afe1b['sprite']['_meshInsta'+'nce']),_0x2afe1b['sprite']['removeMode'+'lFromLayer'+'s'](),_0x169e78['_sprite']=!(-0x258a+-0x97f*0x2+-0x12d8*-0x3),_0x2afe1b['sprite']['_batchGrou'+'p']=_0x169e78);}}}['generate'](_0x333e79){const _0x458c10={};_0x333e79||(_0x333e79=Object['keys'](this['_batchGrou'+'ps']));const _0x4f45ea=[];for(let _0x31f38a=-0x16*-0xae+-0x1*0xf47+0x53;_0x31f38a<this['_batchList']['length'];_0x31f38a++){if(_0x333e79['indexOf'](this['_batchList'][_0x31f38a]['batchGroup'+'Id'])<0x1119*0x1+0x2361*0x1+-0x347a){_0x4f45ea['push'](this['_batchList'][_0x31f38a]);continue;}this['destroyBat'+'ch'](this['_batchList'][_0x31f38a]);}if(this['_batchList']=_0x4f45ea,this['_collectAn'+'dRemoveMes'+'hInstances'](_0x458c10,_0x333e79),_0x333e79===this['_dirtyGrou'+'ps'])this['_dirtyGrou'+'ps']['length']=-0x116+-0x522+0x18e*0x4;else{const _0x16d0fc=[];for(let _0x156f15=-0x206a+-0x980+0x29ea;_0x156f15<this['_dirtyGrou'+'ps']['length'];_0x156f15++)_0x333e79['indexOf'](this['_dirtyGrou'+'ps'][_0x156f15])<0x94*-0x40+-0x1e3d+-0x99b*-0x7&&_0x16d0fc['push'](this['_dirtyGrou'+'ps'][_0x156f15]);this['_dirtyGrou'+'ps']=_0x16d0fc;}let _0x41f987,_0x2721ef,_0x647bd3,_0x1c0a8a;for(const _0x20acef in _0x458c10)if(_0x458c10['hasOwnProp'+'erty'](_0x20acef)){if(_0x41f987=_0x458c10[_0x20acef],_0x647bd3=this['_batchGrou'+'ps'][_0x20acef],!_0x647bd3){w['error']('batch\x20grou'+'p\x20'+_0x20acef+'\x20not\x20found');continue;}_0x2721ef=this['prepare'](_0x41f987,_0x647bd3['dynamic'],_0x647bd3['maxAabbSiz'+'e'],_0x647bd3['_ui']||_0x647bd3['_sprite']);for(let _0x26b3e6=0x1af7+-0x6*-0x2a2+-0x2ac3;_0x26b3e6<_0x2721ef['length'];_0x26b3e6++)_0x1c0a8a=this['create'](_0x2721ef[_0x26b3e6],_0x647bd3['dynamic'],parseInt(_0x20acef,0xef9*-0x1+-0x18be+0x27c1)),_0x1c0a8a&&_0x1c0a8a['addToLayer'+'s'](this['scene'],_0x647bd3['layers']);}}['prepare'](_0x5e48cb,_0xb28359,_0x239a2a=Number['POSITIVE_I'+'NFINITY'],_0x20ddf3){if(_0x5e48cb['length']===0x13*-0x9d+-0x3f*0xe+0x5*0x305)return[];const _0x5299b1=_0x239a2a*(-0x1ea5*-0x1+-0x2*-0x1313+-0xb*0x641+0.5),_0x54a9e4=0x6df+0x1993+0x1*-0x1c72,_0x2ca51a=0x2f5d75*0x91f+-0x38845270+-0x77811bbc,_0x8ecff7=new De(),_0x16eb93=new De();let _0x15dcdd=null,_0xb1f18f;const _0x549d72=[];let _0x4baa99=-0xf6c+0x41*0x5f+-0x8b3;_0x20ddf3&&_0x5e48cb['sort']((_0x18d1da,_0x175f05)=>_0x18d1da['drawOrder']-_0x175f05['drawOrder']);let _0x13203e=_0x5e48cb,_0x585849;const _0x3c04cf=_0x20ddf3?function(_0x21fd5c){_0x15dcdd?_0x15dcdd['add'](_0x21fd5c['aabb']):_0x15dcdd=_0x21fd5c['aabb']['clone'](),_0x585849['push'](_0x21fd5c);}:function(_0x1573fe){_0x585849['push'](_0x1573fe);};for(;_0x13203e['length']>-0xd49+-0x13aa+0x20f3;){_0x549d72[_0x4baa99]=[_0x13203e[0x32*-0x12+-0x270a+-0x2*-0x1547]],_0x585849=[];const _0x403717=_0x13203e[0x42d*-0x1+0x276+0x1b7*0x1]['material'],_0x254f0b=_0x13203e[-0x2275*0x1+0xf82*-0x2+0x4179*0x1]['layer'],_0x44af2e=_0x13203e[-0x1f50+-0x67+0x1fb7]['_shaderDef'+'s'],_0xd667c0=_0x13203e[0x11*0x1f7+-0x1*-0x20d7+-0x423e]['parameters'],_0xda9714=_0x13203e[0x745+-0x206a+0x1925]['stencilFro'+'nt'];let _0x2e373c=_0x13203e[0x1*-0x24f5+0xc7*-0x23+0x2*0x2015]['mesh']['vertexBuff'+'er']['getNumVert'+'ices']();const _0x422940=_0x13203e[0x10b*0x14+-0x109*0x3+-0x11c1]['drawOrder'];_0x8ecff7['copy'](_0x13203e[-0x1*0x1126+-0x24da+-0x40*-0xd8]['aabb']);const _0x4813d2=jd(_0x13203e[-0x2206*0x1+0x19e2+-0x412*-0x2]),_0x3c8fd9=_0x13203e[-0x19*0x148+0x69a+0x196e]['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh'],_0x8a56d9=_0x13203e[-0x1e*-0x58+0x4b1+0xf01*-0x1]['mesh']['primitive'][0x209a+-0x1*0x150b+0xb*-0x10d]['indexed'];_0x15dcdd=null;for(let _0x8c273c=0x15d0+0x414+-0x19e3;_0x8c273c<_0x13203e['length'];_0x8c273c++){const _0x5adc99=_0x13203e[_0x8c273c];if(_0xb28359&&_0x549d72[_0x4baa99]['length']>=_0x54a9e4){_0x585849=_0x585849['concat'](_0x13203e['slice'](_0x8c273c));break;}if(_0x403717!==_0x5adc99['material']||_0x254f0b!==_0x5adc99['layer']||_0x3c8fd9!==_0x5adc99['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh']||_0x8a56d9!==_0x5adc99['mesh']['primitive'][0x1d71*0x1+0xdb7+-0x1*0x2b28]['indexed']||_0x44af2e!==_0x5adc99['_shaderDef'+'s']||_0x2e373c+_0x5adc99['mesh']['vertexBuff'+'er']['getNumVert'+'ices']()>_0x2ca51a){_0x3c04cf(_0x5adc99);continue;}if(_0x16eb93['copy'](_0x8ecff7),_0x16eb93['add'](_0x5adc99['aabb']),_0x16eb93['halfExtent'+'s']['x']>_0x5299b1||_0x16eb93['halfExtent'+'s']['y']>_0x5299b1||_0x16eb93['halfExtent'+'s']['z']>_0x5299b1){_0x3c04cf(_0x5adc99);continue;}if(_0xda9714&&(!(_0xb1f18f=_0x5adc99['stencilFro'+'nt'])||_0xda9714['func']!==_0xb1f18f['func']||_0xda9714['zpass']!==_0xb1f18f['zpass'])){_0x3c04cf(_0x5adc99);continue;}if(_0x4813d2!==jd(_0x5adc99)){_0x3c04cf(_0x5adc99);continue;}if(!DE(_0xd667c0,_0x5adc99['parameters'])){_0x3c04cf(_0x5adc99);continue;}if(_0x20ddf3&&_0x15dcdd&&_0x15dcdd['intersects'](_0x5adc99['aabb'])&&_0x5adc99['drawOrder']!==_0x422940){_0x3c04cf(_0x5adc99);continue;}_0x8ecff7['add'](_0x5adc99['aabb']),_0x2e373c+=_0x5adc99['mesh']['vertexBuff'+'er']['getNumVert'+'ices'](),_0x549d72[_0x4baa99]['push'](_0x5adc99);}_0x4baa99++,_0x13203e=_0x585849;}return _0x549d72;}['collectBat'+'chedMeshDa'+'ta'](_0x4bae63,_0x2c41c3){let _0x367c2d=null,_0x54c03b=0x40f+0xd*-0x2f7+-0x1*-0x227c,_0x1c07fb=-0x22bb+-0x1742+-0xb99*-0x5,_0x55af8a=null;for(let _0x47cd2c=-0x4a*-0x3d+0xdc9+-0x3*0xa79;_0x47cd2c<_0x4bae63['length'];_0x47cd2c++)if(_0x4bae63[_0x47cd2c]['visible']){const _0x53f7f5=_0x4bae63[_0x47cd2c]['mesh'],_0x51dcab=_0x53f7f5['vertexBuff'+'er']['numVertice'+'s'];if(_0x54c03b+=_0x51dcab,_0x53f7f5['primitive'][0x1*0x1c87+0x95*0x23+-0x1*0x30e6]['indexed'])_0x1c07fb+=_0x53f7f5['primitive'][0x26de+-0x1353+-0x1*0x138b]['count'];else{const _0x49b537=_0x53f7f5['primitive'][-0x17c7+-0x55a+0x1d21]['type'];(_0x49b537===oa||_0x49b537===Er)&&_0x53f7f5['primitive'][0xf84+-0x22*0x51+-0x2*0x261]['count']===-0x1*0x782+-0x1*-0x267d+0x1*-0x1ef7&&(_0x1c07fb+=-0x11e3+-0x793+0x197c);}if(!_0x367c2d){_0x55af8a=_0x4bae63[_0x47cd2c]['material'],_0x367c2d={};const _0x333ae4=_0x53f7f5['vertexBuff'+'er']['format']['elements'];for(let _0x11ccf2=0x82f+0x1*-0x1e53+-0xda*-0x1a;_0x11ccf2<_0x333ae4['length'];_0x11ccf2++){const _0x2505a8=_0x333ae4[_0x11ccf2]['name'];_0x367c2d[_0x2505a8]={'numComponents':_0x333ae4[_0x11ccf2]['numCompone'+'nts'],'dataType':_0x333ae4[_0x11ccf2]['dataType'],'normalize':_0x333ae4[_0x11ccf2]['normalize'],'count':0x0};}_0x2c41c3&&(_0x367c2d[us]={'numComponents':0x1,'dataType':Ve,'normalize':!(-0x3b9+0xdd*-0x25+0x23ab),'count':0x0});}}return{'streams':_0x367c2d,'batchNumVerts':_0x54c03b,'batchNumIndices':_0x1c07fb,'material':_0x55af8a};}['create'](_0x516f25,_0x5bb68a,_0x381eaf){const _0x2fa055=de();this['_init']||(this['vertexForm'+'ats']={},this['_init']=!(-0x81*-0x2b+0x556+0xdf*-0x1f));let _0x3068a2=null,_0x167dae,_0x181d6b,_0x307b87,_0x24e653=null;const _0x2f270c=this['collectBat'+'chedMeshDa'+'ta'](_0x516f25,_0x5bb68a);if(_0x2f270c['streams']){const _0x3b8605=_0x2f270c['streams'];let _0x112197=_0x2f270c['material'];const _0x170343=_0x2f270c['batchNumVe'+'rts'],_0x3134c3=_0x2f270c['batchNumIn'+'dices'];_0x24e653=new g_(_0x516f25,_0x5bb68a,_0x381eaf),this['_batchList']['push'](_0x24e653);let _0x5161c6,_0x58de58,_0x3840a3,_0x25becf,_0x5c6d8a=0x2159+-0x2479+-0xa0*-0x5,_0x3ba9c9=0x142*0xd+0x11a4+0x13*-0x1ca,_0x39c998;const _0x2c5ad7=_0x170343<=0x5bd1*0x5+-0x1377a*-0x1+-0x20290?Uint16Array:Uint32Array,_0x201f71=new _0x2c5ad7(_0x3134c3);for(_0x167dae in _0x3b8605)_0x3068a2=_0x3b8605[_0x167dae],_0x3068a2['typeArrayT'+'ype']=wn[_0x3068a2['dataType']],_0x3068a2['elementByt'+'eSize']=No[_0x3068a2['dataType']],_0x3068a2['buffer']=new _0x3068a2['typeArrayT'+'ype'](_0x170343*_0x3068a2['numCompone'+'nts']);for(let _0x25755b=0x59*0xd+0x6aa+-0xb2f;_0x25755b<_0x516f25['length'];_0x25755b++)if(_0x516f25[_0x25755b]['visible']){_0x181d6b=_0x516f25[_0x25755b]['mesh'],_0x307b87=_0x181d6b['vertexBuff'+'er']['numVertice'+'s'],_0x5bb68a||(_0x39c998=_0x516f25[_0x25755b]['node']['getWorldTr'+'ansform']());for(_0x167dae in _0x3b8605)if(_0x167dae!==us){_0x3068a2=_0x3b8605[_0x167dae];const _0x172a8c=new _0x3068a2['typeArrayT'+'ype'](_0x3068a2['buffer']['buffer'],_0x3068a2['elementByt'+'eSize']*_0x3068a2['count']),_0x2aef2f=_0x181d6b['getVertexS'+'tream'](_0x167dae,_0x172a8c)*_0x3068a2['numCompone'+'nts'];if(_0x3068a2['count']+=_0x2aef2f,!_0x5bb68a&&_0x3068a2['numCompone'+'nts']>=-0x923+-0x22c*-0x1+-0x2f*-0x26){if(_0x167dae===Me){const _0x21be12=_0x39c998['data'],_0x243a40=_0x21be12[0x1c*-0x129+0x5df+0x1a9d],_0xdc2f32=_0x21be12[-0x200+0x9fa*0x1+-0x7f9],_0x1b8f3e=_0x21be12[-0x1*0xac3+-0x2198+0x2c5d],_0x2adbd2=_0x21be12[0x31*-0x83+0x1ebf+-0x5a8],_0x5b74cd=_0x21be12[0x1670+-0x267b+0x2*0x808],_0x138a43=_0x21be12[0x3*0x30a+-0x2*-0x946+0x74*-0x3d],_0x466baf=_0x21be12[0xb*0x2ef+-0x134b+-0xcf2],_0x3ba7e8=_0x21be12[-0x69+0xa4b*-0x1+0xabd],_0xd03e36=_0x21be12[-0x30a*0x3+-0x1776+0x209e],_0x20f52c=_0x21be12[-0x15a*0x19+0x200*0xf+0x3d6],_0x23bc6f=_0x21be12[0x55c+-0xf79+0xa2a*0x1],_0x2d27fa=_0x21be12[-0x111a+0x45*-0x11+0x15bd];let _0x35d7e2,_0x436305,_0x1489a6;for(let _0x5a224d=-0x225*0x8+-0xe46+0x12a*0x1b;_0x5a224d<_0x2aef2f;_0x5a224d+=_0x3068a2['numCompone'+'nts'])_0x35d7e2=_0x172a8c[_0x5a224d],_0x436305=_0x172a8c[_0x5a224d+(0x14a9+0x1*0x203f+-0x34e7)],_0x1489a6=_0x172a8c[_0x5a224d+(-0x5*0x519+0x5*0x55d+0xa9*-0x2)],_0x172a8c[_0x5a224d]=_0x35d7e2*_0x243a40+_0x436305*_0x2adbd2+_0x1489a6*_0x466baf+_0x20f52c,_0x172a8c[_0x5a224d+(0x67f*0x1+0x1209+-0x1887)]=_0x35d7e2*_0xdc2f32+_0x436305*_0x5b74cd+_0x1489a6*_0x3ba7e8+_0x23bc6f,_0x172a8c[_0x5a224d+(0x621*0x3+0x1*0x4af+-0xb88*0x2)]=_0x35d7e2*_0x1b8f3e+_0x436305*_0x138a43+_0x1489a6*_0xd03e36+_0x2d27fa;}else{if(_0x167dae===gs||_0x167dae===yi){A_['invertMat4'](_0x39c998)['transpose']();const [_0x4a3801,_0x79ca3b,_0x1a5be1,_0x11a926,_0x53f839,_0x19ebcf,_0x2c36cc,_0x18b877,_0x769cfd]=A_['data'];let _0x5a2553,_0x2cb0e5,_0x3fcfb9;for(let _0x400170=0x2175+0x5*-0x3f5+0x23*-0x64;_0x400170<_0x2aef2f;_0x400170+=_0x3068a2['numCompone'+'nts'])_0x5a2553=_0x172a8c[_0x400170],_0x2cb0e5=_0x172a8c[_0x400170+(0x1ee+-0x2170+-0xa81*-0x3)],_0x3fcfb9=_0x172a8c[_0x400170+(-0x3*-0x4a+0x3*-0xa3+0x10d)],_0x172a8c[_0x400170]=_0x5a2553*_0x4a3801+_0x2cb0e5*_0x11a926+_0x3fcfb9*_0x2c36cc,_0x172a8c[_0x400170+(0x164*-0x1+-0x469+0x5ce)]=_0x5a2553*_0x79ca3b+_0x2cb0e5*_0x53f839+_0x3fcfb9*_0x18b877,_0x172a8c[_0x400170+(-0x72b+-0x1e6*0x12+-0x1d*-0x16d)]=_0x5a2553*_0x1a5be1+_0x2cb0e5*_0x19ebcf+_0x3fcfb9*_0x769cfd;}}}}if(_0x5bb68a){_0x3068a2=_0x3b8605[us];for(let _0x5030c2=-0xb2e+0x5f7*-0x6+-0x3*-0xfa8;_0x5030c2<_0x307b87;_0x5030c2++)_0x3068a2['buffer'][_0x3068a2['count']++]=_0x25755b;}if(_0x181d6b['primitive'][0x723+0x1b5*-0xa+-0x9ef*-0x1]['indexed']){_0x5161c6=_0x181d6b['primitive'][-0xe7d*0x1+0x55a+-0x1*-0x923]['base'],_0x58de58=_0x181d6b['primitive'][0xa77+-0x15*0xa7+-0xcf*-0x4]['baseVertex']||0xf*0x97+0xa*0x32d+-0x289b,_0x3840a3=_0x181d6b['primitive'][0xc2c+-0x181c+0xbf0]['count'];const _0x3953e9=_0x181d6b['indexBuffe'+'r'][-0x2119+-0x1d8+0x22f1]['getFormat']();_0x25becf=new Sh[_0x3953e9](_0x181d6b['indexBuffe'+'r'][-0x23eb+0x62*0x56+0x2ff]['storage']);}else{_0x58de58=-0x134b+-0x53*-0x6d+-0x100c;const _0x424c76=_0x181d6b['primitive'][0x1*0x16e6+0x3*0x48+0xbdf*-0x2]['type'];if(_0x424c76===oa||_0x424c76===Er){if(_0x181d6b['primitive'][-0x1b1+-0x212d+0x22de]['count']===-0x18db+-0x5b7*-0x1+0x1328)_0x5161c6=0x2*0xeed+-0x184f*-0x1+0x1*-0x3629,_0x3840a3=-0x1*-0x204a+0x9*-0x20+-0x1f24,_0x25becf=_0x424c76===oa?PE:ME;else{_0x3840a3=-0x2441+0x17b1+0x10c*0xc;continue;}}}for(let _0x419d29=-0x1a*-0xef+0x4b3+-0x1cf9;_0x419d29<_0x3840a3;_0x419d29++)_0x201f71[_0x419d29+_0x3ba9c9]=_0x25becf[_0x5161c6+_0x419d29]+_0x58de58+_0x5c6d8a;_0x3ba9c9+=_0x3840a3,_0x5c6d8a+=_0x307b87;}_0x181d6b=new Ge(this['device']);for(_0x167dae in _0x3b8605)_0x3068a2=_0x3b8605[_0x167dae],_0x181d6b['setVertexS'+'tream'](_0x167dae,_0x3068a2['buffer'],_0x3068a2['numCompone'+'nts'],void(-0x6*0x553+0x347*-0x5+0x1*0x3055),_0x3068a2['dataType'],_0x3068a2['normalize']);_0x201f71['length']>-0x1b41+-0x2*-0x63d+-0x1*-0xec7&&_0x181d6b['setIndices'](_0x201f71),_0x181d6b['update'](js,!(-0x20*-0x10b+-0x1*-0xe3+0x5*-0x6da)),_0x5bb68a&&(_0x112197=_0x112197['clone'](),_0x112197['update']());const _0x55dc12=new He(_0x181d6b,_0x112197,this['rootNode']);_0x55dc12['castShadow']=_0x24e653['origMeshIn'+'stances'][-0x1025*0x1+0x3ed+0xc38]['castShadow'],_0x55dc12['parameters']=_0x24e653['origMeshIn'+'stances'][0x6b*0x4a+-0x7c4+0x1*-0x172a]['parameters'],_0x55dc12['layer']=_0x24e653['origMeshIn'+'stances'][0xb5*0x2b+0x1*0x72f+-0x2596*0x1]['layer'],_0x55dc12['_shaderDef'+'s']=_0x24e653['origMeshIn'+'stances'][0x1177+-0x141f+0x55*0x8]['_shaderDef'+'s'],_0x55dc12['batching']=!(-0x1056+0x1*-0x19c1+0x86b*0x5),_0x55dc12['cull']=_0x24e653['origMeshIn'+'stances'][-0x8f*-0xa+0x19b5*-0x1+0x141f]['cull'];const _0x3c5c18=this['_batchGrou'+'ps'][_0x381eaf];if(_0x3c5c18&&_0x3c5c18['_ui']&&(_0x55dc12['cull']=!(0x1c*-0x133+-0x109a+0x322f)),_0x5bb68a){const _0x5376d1=[];for(let _0x2ffa1f=0x517*0x6+0x1*0x19b+0x1*-0x2025;_0x2ffa1f<_0x24e653['origMeshIn'+'stances']['length'];_0x2ffa1f++)_0x5376d1['push'](_0x24e653['origMeshIn'+'stances'][_0x2ffa1f]['node']);_0x55dc12['skinInstan'+'ce']=new y_(this['device'],_0x5376d1,this['rootNode']);}_0x55dc12['_updateAab'+'b']=!(-0x214a+-0x24dc+0x4627),_0x55dc12['drawOrder']=_0x24e653['origMeshIn'+'stances'][0x33*0x53+-0x1c90+0x1*0xc07]['drawOrder'],_0x55dc12['stencilFro'+'nt']=_0x24e653['origMeshIn'+'stances'][-0x3*-0x2e8+0x1ced+-0x25a5]['stencilFro'+'nt'],_0x55dc12['stencilBac'+'k']=_0x24e653['origMeshIn'+'stances'][-0xf*0x229+-0x5*-0x4ee+0x7c1]['stencilBac'+'k'],_0x55dc12['flipFacesF'+'actor']=jd(_0x24e653['origMeshIn'+'stances'][0x3d*-0xa3+-0x17e*0x1+0x2855]),_0x55dc12['castShadow']=_0x24e653['origMeshIn'+'stances'][0x53f+0x20d+0x2*-0x3a6]['castShadow'],_0x24e653['meshInstan'+'ce']=_0x55dc12,_0x24e653['updateBoun'+'dingBox']();}return this['_stats']['createTime']+=de()-_0x2fa055,_0x24e653;}['updateAll'](){this['_dirtyGrou'+'ps']['length']>-0x47*0x37+-0x1*0x353+0x1294&&this['generate'](this['_dirtyGrou'+'ps']);const _0x46b43f=de();for(let _0x35ade8=-0x1d0+0x6c7+-0x4f7;_0x35ade8<this['_batchList']['length'];_0x35ade8++)this['_batchList'][_0x35ade8]['dynamic']&&this['_batchList'][_0x35ade8]['updateBoun'+'dingBox']();this['_stats']['updateLast'+'FrameTime']=de()-_0x46b43f;}['clone'](_0x2cc021,_0x3701c1){const _0x573d0b=new g_(_0x3701c1,_0x2cc021['dynamic'],_0x2cc021['batchGroup'+'Id']);this['_batchList']['push'](_0x573d0b);const _0x3db843=[];for(let _0x77e162=0x226f*-0x1+0x1a06+0x1*0x869;_0x77e162<_0x3701c1['length'];_0x77e162++)_0x3db843['push'](_0x3701c1[_0x77e162]['node']);return _0x573d0b['meshInstan'+'ce']=new He(_0x2cc021['meshInstan'+'ce']['mesh'],_0x2cc021['meshInstan'+'ce']['material'],_0x2cc021['meshInstan'+'ce']['node']),_0x573d0b['meshInstan'+'ce']['_updateAab'+'b']=!(0x36*0x50+0xcb*0x26+-0x539*0x9),_0x573d0b['meshInstan'+'ce']['parameters']=_0x3701c1[0x22bc+0x83*0x4c+-0x1f*0x260]['parameters'],_0x573d0b['meshInstan'+'ce']['cull']=_0x3701c1[-0x1a*0x27+-0x242e+0x2824]['cull'],_0x573d0b['meshInstan'+'ce']['layer']=_0x3701c1[0x1043+-0x1ace+0xa8b*0x1]['layer'],_0x2cc021['dynamic']&&(_0x573d0b['meshInstan'+'ce']['skinInstan'+'ce']=new y_(this['device'],_0x3db843,this['rootNode'])),_0x573d0b['meshInstan'+'ce']['castShadow']=_0x2cc021['meshInstan'+'ce']['castShadow'],_0x573d0b;}['destroyBat'+'ch'](_0x287feb){_0x287feb['destroy'](this['scene'],this['_batchGrou'+'ps'][_0x287feb['batchGroup'+'Id']]['layers']);}}const P_='uSceneColo'+'rMap';class LE extends ys{constructor(){super(...arguments),h(this,'colorRende'+'rTarget',null),h(this,'source',null);}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']);}['shouldReal'+'locate'](_0x341385,_0xa70d8f,_0x3d68cf){if((_0x341385==null?void(0xc5*-0x4+0x3*-0x633+0x15ad):_0x341385['colorBuffe'+'r']['format'])!==_0x3d68cf)return!(0x2*0x1af+0x22b6*-0x1+0x4*0x7d6);const _0x1d1ab2=(_0xa70d8f==null?void(0x1864*-0x1+-0x342+0x1ba6):_0xa70d8f['width'])||this['device']['width'],_0x595e18=(_0xa70d8f==null?void(-0xf00+0x471+0xa8f):_0xa70d8f['height'])||this['device']['height'];return!_0x341385||_0x1d1ab2!==_0x341385['width']||_0x595e18!==_0x341385['height'];}['allocateRe'+'nderTarget'](_0x51c43b,_0x8a7b0c,_0x115047,_0x53d55b){const _0x722194=new _e(_0x115047,{'name':P_,'format':_0x53d55b,'width':_0x8a7b0c?_0x8a7b0c['colorBuffe'+'r']['width']:_0x115047['width'],'height':_0x8a7b0c?_0x8a7b0c['colorBuffe'+'r']['height']:_0x115047['height'],'mipmaps':!(0x72e*-0x1+0x194d+-0x121f),'minFilter':ma,'magFilter':vt,'addressU':ue,'addressV':ue});return _0x51c43b?(_0x51c43b['destroyFra'+'meBuffers'](),_0x51c43b['_colorBuff'+'er']=_0x722194,_0x51c43b['_colorBuff'+'ers']=[_0x722194]):_0x51c43b=new gt({'name':'ColorGrabR'+'T','colorBuffer':_0x722194,'depth':!(0x131b*-0x1+0x3*-0x255+0x1a1b),'stencil':!(-0xaa8+0x1b3+0x8f6),'autoResolve':!(-0x1772+0x2177+-0xa04*0x1)}),_0x51c43b;}['releaseRen'+'derTarget'](_0x326a88){_0x326a88&&(_0x326a88['destroyTex'+'tureBuffer'+'s'](),_0x326a88['destroy']());}['frameUpdat'+'e'](){const _0xa0d56a=this['device'],_0x376bab=this['source'],_0x1f081b=(_0x376bab==null?void(-0x167a+-0x16*-0x1a5+0x6da*-0x2):_0x376bab['colorBuffe'+'r']['format'])??this['device']['backBuffer'+'Format'];this['shouldReal'+'locate'](this['colorRende'+'rTarget'],_0x376bab==null?void(0x1846+0x13ed+0x2c33*-0x1):_0x376bab['colorBuffe'+'r'],_0x1f081b)&&(this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']),this['colorRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['colorRende'+'rTarget'],_0x376bab,_0xa0d56a,_0x1f081b));const _0x7ae439=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0xa0d56a['scope']['resolve'](P_)['setValue'](_0x7ae439);}['execute'](){const _0xccc361=this['device'];Q['pushGpuMar'+'ker'](_0xccc361,'GRAB-COLOR');const _0x190529=this['source'],_0x52c005=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0xccc361['isWebGPU']?(_0xccc361['copyRender'+'Target'](_0x190529,this['colorRende'+'rTarget'],!(0x1e45*0x1+0x7*-0x151+0x6e*-0x31),!(-0x1145*0x2+0x48f*0x1+0x1dfc)),_0xccc361['mipmapRend'+'erer']['generate'](this['colorRende'+'rTarget']['colorBuffe'+'r']['impl'])):(_0xccc361['copyRender'+'Target'](_0x190529,this['colorRende'+'rTarget'],!(-0x11ff+-0xbf3+0x1*0x1df2),!(-0x761+0x1c3d*-0x1+0x239f)),_0xccc361['activeText'+'ure'](_0xccc361['maxCombine'+'dTextures']-(0x21c4+0x1b48+-0x3d0b)),_0xccc361['bindTextur'+'e'](_0x52c005),_0xccc361['gl']['generateMi'+'pmap'](_0x52c005['impl']['_glTarget'])),Q['popGpuMark'+'er'](_0xccc361);}}const M_='uSceneDept'+'hMap';class RE extends ys{constructor(_0x25a3f9,_0x3b47de){super(_0x25a3f9),h(this,'depthRende'+'rTarget',null),h(this,'camera',null),this['camera']=_0x3b47de;}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']);}['shouldReal'+'locate'](_0x585dad,_0x288d4e){const _0x1392a4=(_0x288d4e==null?void(0xd4*-0x21+0x3*0x65+0x1a25):_0x288d4e['width'])||this['device']['width'],_0x21714f=(_0x288d4e==null?void(-0xc6*-0x2b+0x25e*0xf+-0x44c4):_0x288d4e['height'])||this['device']['height'];return!_0x585dad||_0x1392a4!==_0x585dad['width']||_0x21714f!==_0x585dad['height'];}['allocateRe'+'nderTarget'](_0xc031f0,_0x5ed24f,_0xcde49e,_0x5ef46d,_0x3ce5e8){const _0x3f9514=new _e(_0xcde49e,{'name':M_,'format':_0x5ef46d,'width':_0x5ed24f?_0x5ed24f['colorBuffe'+'r']['width']:_0xcde49e['width'],'height':_0x5ed24f?_0x5ed24f['colorBuffe'+'r']['height']:_0xcde49e['height'],'mipmaps':!(0x18a1+-0x1c46+0x2*0x1d3),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});return _0xc031f0?(_0xc031f0['destroyFra'+'meBuffers'](),_0x3ce5e8?_0xc031f0['_depthBuff'+'er']=_0x3f9514:(_0xc031f0['_colorBuff'+'er']=_0x3f9514,_0xc031f0['_colorBuff'+'ers']=[_0x3f9514])):_0xc031f0=new gt({'name':'DepthGrabR'+'T','colorBuffer':_0x3ce5e8?null:_0x3f9514,'depthBuffer':_0x3ce5e8?_0x3f9514:null,'depth':!_0x3ce5e8,'stencil':_0xcde49e['supportsSt'+'encil'],'autoResolve':!(0xb*-0x1c5+0x15f4+-0x1*0x27c)}),_0xc031f0;}['releaseRen'+'derTarget'](_0x443c90){_0x443c90&&(_0x443c90['destroyTex'+'tureBuffer'+'s'](),_0x443c90['destroy']());}['before'](){var _0x34f02d,_0x54705f;const _0x457da1=this['camera'],_0x46048b=this['device'],_0x5750c9=(_0x457da1==null?void(-0x207d*-0x1+0x25a1+-0x461e):_0x457da1['renderTarg'+'et'])??_0x46048b['backBuffer'];let _0x5565cd=!(0x93e+-0x28*0xd7+-0x81e*-0x3),_0x3cc98b=_0x5750c9['stencil']?sd:$i;_0x46048b['isWebGPU']&&_0x5750c9['samples']>0x2370+0x20b*0x3+-0x10*0x299&&(_0x3cc98b=Ji,_0x5565cd=!(-0x22dd+-0x1*0xffb+0x32d9));const _0x5d00c9=((_0x34f02d=_0x457da1['renderTarg'+'et'])==null?void(0x1ce5+0x3*0x481+0x1534*-0x2):_0x34f02d['depthBuffe'+'r'])??((_0x54705f=_0x457da1['renderTarg'+'et'])==null?void(0x2152+0xb83+0x1*-0x2cd5):_0x54705f['colorBuffe'+'r']);this['shouldReal'+'locate'](this['depthRende'+'rTarget'],_0x5d00c9)&&(this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']),this['depthRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['depthRende'+'rTarget'],_0x457da1['renderTarg'+'et'],_0x46048b,_0x3cc98b,_0x5565cd));const _0x220f86=_0x5565cd?this['depthRende'+'rTarget']['depthBuffe'+'r']:this['depthRende'+'rTarget']['colorBuffe'+'r'];_0x46048b['scope']['resolve'](M_)['setValue'](_0x220f86);}['execute'](){const _0x35365d=this['device'];if(Q['pushGpuMar'+'ker'](_0x35365d,'GRAB-DEPTH'),_0x35365d['isWebGL2']&&_0x35365d['renderTarg'+'et']['samples']>0x169f+-0x18*-0x103+0x2*-0x1773){const _0x5ad9b0=_0x35365d['renderTarg'+'et']['impl']['_glFrameBu'+'ffer'],_0x5f702=this['depthRende'+'rTarget'];_0x35365d['renderTarg'+'et']=_0x5f702,_0x35365d['updateBegi'+'n'](),this['depthRende'+'rTarget']['impl']['internalRe'+'solve'](_0x35365d,_0x5ad9b0,_0x5f702['impl']['_glFrameBu'+'ffer'],this['depthRende'+'rTarget'],_0x35365d['gl']['DEPTH_BUFF'+'ER_BIT']);}else _0x35365d['copyRender'+'Target'](_0x35365d['renderTarg'+'et'],this['depthRende'+'rTarget'],!(0x1af7+-0x5*0x5c5+-0x15*-0x17),!(0xd09+0x57b+-0x1284));Q['popGpuMark'+'er'](_0x35365d);}}class vv{constructor(){h(this,'_gammaCorr'+'ection',Xc),h(this,'_toneMappi'+'ng',sm),h(this,'_srgbRende'+'rTarget',!(0x1f26*0x1+-0xba4+-0x1381)),h(this,'_ssaoEnabl'+'ed',!(0xec2+0x289+-0x114a)),h(this,'_fog',Kn),h(this,'_sceneDept'+'hMapLinear',!(-0x1*0x24af+-0x1e4c+0x42fc)),h(this,'_hash'),h(this,'_defines',new Map()),h(this,'_definesDi'+'rty',!(-0x1198+0x1984+0x9c*-0xd));}get['hash'](){if(this['_hash']===void(-0x1*0x2b8+-0x6ab+0x3*0x321)){const _0x5511be=this['gammaCorre'+'ction']+'_'+this['toneMappin'+'g']+'_'+this['srgbRender'+'Target']+'_'+this['fog']+'_'+this['ssaoEnable'+'d']+'_'+this['sceneDepth'+'MapLinear'];this['_hash']=hi(_0x5511be);}return this['_hash'];}get['defines'](){const _0x5e60b1=this['_defines'];return this['_definesDi'+'rty']&&(this['_definesDi'+'rty']=!(-0x234c+-0xb9+-0x57*-0x6a),_0x5e60b1['clear'](),this['_sceneDept'+'hMapLinear']&&_0x5e60b1['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',!(0x869*-0x2+0x2279+-0x11a7)),_0x5e60b1['set']('FOG',this['_fog']['toUpperCas'+'e']()),_0x5e60b1['set']('TONEMAP',ov[this['_toneMappi'+'ng']]),_0x5e60b1['set']('GAMMA',Hw[this['shaderOutp'+'utGamma']])),_0x5e60b1;}['markDirty'](){this['_hash']=void(-0xcf9*-0x2+-0x1a14+-0x11*-0x2),this['_definesDi'+'rty']=!(0x1f*-0x55+-0xee5+0x1930);}set['fog'](_0xf9c5bc){this['_fog']!==_0xf9c5bc&&(this['_fog']=_0xf9c5bc,this['markDirty']());}get['fog'](){return this['_fog'];}set['ssaoEnable'+'d'](_0xead915){this['_ssaoEnabl'+'ed']!==_0xead915&&(this['_ssaoEnabl'+'ed']=_0xead915,this['markDirty']());}get['ssaoEnable'+'d'](){return this['_ssaoEnabl'+'ed'];}set['gammaCorre'+'ction'](_0x3adbc9){this['_gammaCorr'+'ectionAssi'+'gned']=!(0x21f7+-0x24bb*0x1+-0x4*-0xb1),this['_gammaCorr'+'ection']!==_0x3adbc9&&(this['_gammaCorr'+'ection']=_0x3adbc9,this['markDirty']());}get['gammaCorre'+'ction'](){return this['_gammaCorr'+'ection'];}set['toneMappin'+'g'](_0x3c69e8){this['_toneMappi'+'ng']!==_0x3c69e8&&(this['_toneMappi'+'ng']=_0x3c69e8,this['markDirty']());}get['toneMappin'+'g'](){return this['_toneMappi'+'ng'];}set['srgbRender'+'Target'](_0x553a25){this['_srgbRende'+'rTarget']!==_0x553a25&&(this['_srgbRende'+'rTarget']=_0x553a25,this['markDirty']());}get['srgbRender'+'Target'](){return this['_srgbRende'+'rTarget'];}set['sceneDepth'+'MapLinear'](_0x53526e){this['_sceneDept'+'hMapLinear']!==_0x53526e&&(this['_sceneDept'+'hMapLinear']=_0x53526e,this['markDirty']());}get['sceneDepth'+'MapLinear'](){return this['_sceneDept'+'hMapLinear'];}get['shaderOutp'+'utGamma'](){return this['_gammaCorr'+'ection']===Xc&&!this['_srgbRende'+'rTarget']?Xc:Ll;}}const La=new D(),ao=new D(),D_=new D(),I_=new te(),OE=[new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D()];class Fl{constructor(){h(this,'shaderPass'+'Info',null),h(this,'renderPass'+'ColorGrab',null),h(this,'renderPass'+'DepthGrab',null),h(this,'fogParams',null),h(this,'shaderPara'+'ms',new vv()),h(this,'renderPass'+'es',[]),h(this,'jitter',0xd93+0x1*0x739+-0x14cc),(this['_aspectRat'+'io']=(0xb*0x9b+-0x123d+-0x2e9*-0x4)/(-0x4*0x209+-0x1d19+-0x16f*-0x1a),this['_aspectRat'+'ioMode']=hm,this['_calculate'+'Projection']=null,this['_calculate'+'Transform']=null,this['_clearColo'+'r']=new ie(-0xe12+0xeee+0x14*-0xb+0.75,0x1*-0x1b73+0x4b1*0x2+0x1211+0.75,-0x2046+-0x920+-0x1*-0x2966+0.75,0x526+-0xace+0x5a9),this['_clearColo'+'rBuffer']=!(-0xe5*-0x2+-0x9*-0x43b+0x311*-0xd),this['_clearDept'+'h']=-0xc8f*-0x3+-0x9cd+-0x1bdf,this['_clearDept'+'hBuffer']=!(0x19d8+0x9*0xd1+-0x2131),this['_clearSten'+'cil']=-0x2627+0x4*0x859+0x4c3,this['_clearSten'+'cilBuffer']=!(-0x1355+0xfc7+0x38e*0x1),this['_cullFaces']=!(0x374*0x4+-0x180a+-0xb*-0xee),this['_farClip']=-0x4f*0xb+0x5*-0x171+-0x3*-0x4d6,this['_flipFaces']=!(-0x1*-0x22bf+-0x5*-0x182+-0x3*0xe18),this['_fov']=-0x4*0x33e+0x38*0x2e+0x315,this['_frustumCu'+'lling']=!(0x2b1+-0xaf3*-0x3+-0x11c5*0x2),this['_horizonta'+'lFov']=!(-0x1db9*0x1+-0x1aca+0x3884),this['_layers']=[er,ps,Kp,Il,Zp],this['_layersSet']=new Set(this['_layers']),this['_nearClip']=-0x531*-0x5+-0x171+-0x1884*0x1+0.1,this['_node']=null,this['_orthoHeig'+'ht']=0x1ee7+-0x83f+-0x169e,this['_projectio'+'n']=ni,this['_rect']=new re(-0x25ff+-0x3*-0x9fb+0x80e,0xf69+0x3*0xd5+-0x11e8,-0x1458+0x1*0x180d+-0x1da*0x2,-0x1*0x983+0x15f*-0x1+0xae3),this['_renderTar'+'get']=null,this['_scissorRe'+'ct']=new re(-0x13e4*0x1+0x22*0xb2+-0x3c0,-0x5a7*-0x1+0x5dc+-0xb83,-0x4*0x2ea+-0x3*-0x4ac+-0x25b,-0x2cb+-0x915+-0x1*-0xbe1),this['_scissorRe'+'ctClear']=!(-0x1230+0x21d+0x1014),this['_aperture']=-0xfeb+-0x1f37+0x1*0x2f32,this['_shutter']=(0x79f*-0x3+0x17ca+-0xec)/(0xcb9+-0xb23+0x252),this['_sensitivi'+'ty']=-0x2*-0x9a2+-0x64a*0x3+0x382,this['_projMat']=new te(),this['_projMatDi'+'rty']=!(-0x1954+-0x68+0x19bc),this['_projMatSk'+'ybox']=new te(),this['_viewMat']=new te(),this['_viewMatDi'+'rty']=!(-0x1*0x1883+0x9*0x375+-0x69a),this['_viewProjM'+'at']=new te(),this['_viewProjM'+'atDirty']=!(0x1307+-0x1*-0x1d5d+-0x1*0x3064),this['_shaderMat'+'ricesVersi'+'on']=-0x60a*-0x1+0x2279+-0x2883,this['_viewProjI'+'nverse']=new te(),this['_viewProjC'+'urrent']=null,this['_viewProjP'+'revious']=new te(),this['_jitters']=[-0x1c35+-0xf8d+-0x6*-0x74b,0x10e8+-0x265b+0x1573*0x1,0x357*-0x7+-0x13f6+-0x23*-0x13d,-0x41+-0x25*-0x79+-0x89e*0x2],this['frustum']=new yx(),this['_xr']=null,this['_xrPropert'+'ies']={'horizontalFov':this['_horizonta'+'lFov'],'fov':this['_fov'],'aspectRatio':this['_aspectRat'+'io'],'farClip':this['_farClip'],'nearClip':this['_nearClip']});}['destroy'](){var _0x2c5dc2,_0xb626b7;(_0x2c5dc2=this['renderPass'+'ColorGrab'])==null||_0x2c5dc2['destroy'](),this['renderPass'+'ColorGrab']=null,(_0xb626b7=this['renderPass'+'DepthGrab'])==null||_0xb626b7['destroy'](),this['renderPass'+'DepthGrab']=null,this['renderPass'+'es']['length']=-0x14f4+0x2646+-0x1152;}['_storeShad'+'erMatrices'](_0x2e8c6b,_0x50d349,_0x329adb,_0x18992d){this['_shaderMat'+'ricesVersi'+'on']!==_0x18992d&&(this['_shaderMat'+'ricesVersi'+'on']=_0x18992d,this['_viewProjP'+'revious']['copy'](this['_viewProjC'+'urrent']??_0x2e8c6b),this['_viewProjC'+'urrent']??(this['_viewProjC'+'urrent']=new te()),this['_viewProjC'+'urrent']['copy'](_0x2e8c6b),this['_viewProjI'+'nverse']['invert'](_0x2e8c6b),this['_jitters'][0x1ce7+0x1048+0xf*-0x303]=this['_jitters'][0x3c3+0xaac*0x1+-0x1*0xe6f],this['_jitters'][0xbdf+-0x1f43+-0x1*-0x1367]=this['_jitters'][-0x5f6+0x2171+-0x1b7a],this['_jitters'][0x1*-0x2321+0x1*-0x1bbf+-0x7dc*-0x8]=_0x50d349,this['_jitters'][0x95d+0xf*0x13d+0x1*-0x1bef]=_0x329adb);}get['fullSizeCl'+'earRect'](){const _0x2a38db=this['_scissorRe'+'ctClear']?this['scissorRec'+'t']:this['_rect'];return _0x2a38db['x']===-0x1966*-0x1+0x2b7+-0x3*0x95f&&_0x2a38db['y']===-0xb7c+-0x16+0x2*0x5c9&&_0x2a38db['z']===-0xedb+0x1abb+-0xbdf&&_0x2a38db['w']===0x1aed+0x1870+-0x335c;}set['aspectRati'+'o'](_0x48d2cf){this['_aspectRat'+'io']!==_0x48d2cf&&(this['_aspectRat'+'io']=_0x48d2cf,this['_projMatDi'+'rty']=!(-0x2*0xc41+0x465+0x141d));}get['aspectRati'+'o'](){var _0x2c79c1;return(_0x2c79c1=this['xr'])!=null&&_0x2c79c1['active']?this['_xrPropert'+'ies']['aspectRati'+'o']:this['_aspectRat'+'io'];}set['aspectRati'+'oMode'](_0x372526){this['_aspectRat'+'ioMode']!==_0x372526&&(this['_aspectRat'+'ioMode']=_0x372526,this['_projMatDi'+'rty']=!(-0x37*-0x52+0xbf*-0x1c+0x346));}get['aspectRati'+'oMode'](){return this['_aspectRat'+'ioMode'];}set['calculateP'+'rojection'](_0x3c3897){this['_calculate'+'Projection']=_0x3c3897,this['_projMatDi'+'rty']=!(-0x3ab*0x9+-0x2700+0x1801*0x3);}get['calculateP'+'rojection'](){return this['_calculate'+'Projection'];}set['calculateT'+'ransform'](_0x2a302b){this['_calculate'+'Transform']=_0x2a302b;}get['calculateT'+'ransform'](){return this['_calculate'+'Transform'];}set['clearColor'](_0x1fd50e){this['_clearColo'+'r']['copy'](_0x1fd50e);}get['clearColor'](){return this['_clearColo'+'r'];}set['clearColor'+'Buffer'](_0x2d4064){this['_clearColo'+'rBuffer']=_0x2d4064;}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'](_0x5081ac){this['_clearDept'+'h']=_0x5081ac;}get['clearDepth'](){return this['_clearDept'+'h'];}set['clearDepth'+'Buffer'](_0x4c85ef){this['_clearDept'+'hBuffer']=_0x4c85ef;}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'il'](_0x311f8e){this['_clearSten'+'cil']=_0x311f8e;}get['clearStenc'+'il'](){return this['_clearSten'+'cil'];}set['clearStenc'+'ilBuffer'](_0x1b1d87){this['_clearSten'+'cilBuffer']=_0x1b1d87;}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}set['cullFaces'](_0x47ec4e){this['_cullFaces']=_0x47ec4e;}get['cullFaces'](){return this['_cullFaces'];}set['farClip'](_0x5a2dff){this['_farClip']!==_0x5a2dff&&(this['_farClip']=_0x5a2dff,this['_projMatDi'+'rty']=!(-0x1*-0x1387+-0x10*-0x6+-0x13e7*0x1));}get['farClip'](){var _0x369437;return(_0x369437=this['xr'])!=null&&_0x369437['active']?this['_xrPropert'+'ies']['farClip']:this['_farClip'];}set['flipFaces'](_0x3c088d){this['_flipFaces']=_0x3c088d;}get['flipFaces'](){return this['_flipFaces'];}set['fov'](_0x4d9c4a){this['_fov']!==_0x4d9c4a&&(this['_fov']=_0x4d9c4a,this['_projMatDi'+'rty']=!(-0x23bd+0x17*0x16e+0x2db));}get['fov'](){var _0x32f8de;return(_0x32f8de=this['xr'])!=null&&_0x32f8de['active']?this['_xrPropert'+'ies']['fov']:this['_fov'];}set['frustumCul'+'ling'](_0x4015e1){this['_frustumCu'+'lling']=_0x4015e1;}get['frustumCul'+'ling'](){return this['_frustumCu'+'lling'];}set['horizontal'+'Fov'](_0x4ff9e9){this['_horizonta'+'lFov']!==_0x4ff9e9&&(this['_horizonta'+'lFov']=_0x4ff9e9,this['_projMatDi'+'rty']=!(-0xc4*-0x13+-0x19ca+0x1*0xb3e));}get['horizontal'+'Fov'](){var _0x9a102b;return(_0x9a102b=this['xr'])!=null&&_0x9a102b['active']?this['_xrPropert'+'ies']['horizontal'+'Fov']:this['_horizonta'+'lFov'];}set['layers'](_0x5963da){this['_layers']=_0x5963da['slice'](0xcfd+0x95c+-0x1659),this['_layersSet']=new Set(this['_layers']);}get['layers'](){return this['_layers'];}get['layersSet'](){return this['_layersSet'];}set['nearClip'](_0x68e499){this['_nearClip']!==_0x68e499&&(this['_nearClip']=_0x68e499,this['_projMatDi'+'rty']=!(0x1136*0x2+-0x1*-0x218d+-0x43f9*0x1));}get['nearClip'](){var _0x2352a5;return(_0x2352a5=this['xr'])!=null&&_0x2352a5['active']?this['_xrPropert'+'ies']['nearClip']:this['_nearClip'];}set['node'](_0x4a6c6a){this['_node']=_0x4a6c6a;}get['node'](){return this['_node'];}set['orthoHeigh'+'t'](_0x4cd5dd){this['_orthoHeig'+'ht']!==_0x4cd5dd&&(this['_orthoHeig'+'ht']=_0x4cd5dd,this['_projMatDi'+'rty']=!(-0x222f+-0x7f7+0x82*0x53));}get['orthoHeigh'+'t'](){return this['_orthoHeig'+'ht'];}set['projection'](_0x34cd56){this['_projectio'+'n']!==_0x34cd56&&(this['_projectio'+'n']=_0x34cd56,this['_projMatDi'+'rty']=!(-0xa3*0x1f+0x183c+-0x47f*0x1));}get['projection'](){return this['_projectio'+'n'];}get['projection'+'Matrix'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMat'];}set['rect'](_0x1d2df7){this['_rect']['copy'](_0x1d2df7);}get['rect'](){return this['_rect'];}set['renderTarg'+'et'](_0xe67280){this['_renderTar'+'get']=_0xe67280;}get['renderTarg'+'et'](){return this['_renderTar'+'get'];}set['scissorRec'+'t'](_0x4a6229){this['_scissorRe'+'ct']['copy'](_0x4a6229);}get['scissorRec'+'t'](){return this['_scissorRe'+'ct'];}get['viewMatrix'](){if(this['_viewMatDi'+'rty']){const _0x1b4621=this['_node']['getWorldTr'+'ansform']();this['_viewMat']['copy'](_0x1b4621)['invert'](),this['_viewMatDi'+'rty']=!(-0xc7*0x5+0x11dd+-0xdf9);}return this['_viewMat'];}set['aperture'](_0x1c2370){this['_aperture']=_0x1c2370;}get['aperture'](){return this['_aperture'];}set['sensitivit'+'y'](_0x1524b5){this['_sensitivi'+'ty']=_0x1524b5;}get['sensitivit'+'y'](){return this['_sensitivi'+'ty'];}set['shutter'](_0x2a6a99){this['_shutter']=_0x2a6a99;}get['shutter'](){return this['_shutter'];}set['xr'](_0x45f585){this['_xr']!==_0x45f585&&(this['_xr']=_0x45f585,this['_projMatDi'+'rty']=!(-0x79b+-0x2286+-0x86d*-0x5));}get['xr'](){return this['_xr'];}['clone'](){return new Fl()['copy'](this);}['copy'](_0x569e4c){return this['_aspectRat'+'io']=_0x569e4c['_aspectRat'+'io'],this['_farClip']=_0x569e4c['_farClip'],this['_fov']=_0x569e4c['_fov'],this['_horizonta'+'lFov']=_0x569e4c['_horizonta'+'lFov'],this['_nearClip']=_0x569e4c['_nearClip'],this['_xrPropert'+'ies']['aspectRati'+'o']=_0x569e4c['_xrPropert'+'ies']['aspectRati'+'o'],this['_xrPropert'+'ies']['farClip']=_0x569e4c['_xrPropert'+'ies']['farClip'],this['_xrPropert'+'ies']['fov']=_0x569e4c['_xrPropert'+'ies']['fov'],this['_xrPropert'+'ies']['horizontal'+'Fov']=_0x569e4c['_xrPropert'+'ies']['horizontal'+'Fov'],this['_xrPropert'+'ies']['nearClip']=_0x569e4c['_xrPropert'+'ies']['nearClip'],this['aspectRati'+'oMode']=_0x569e4c['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x569e4c['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x569e4c['calculateT'+'ransform'],this['clearColor']=_0x569e4c['clearColor'],this['clearColor'+'Buffer']=_0x569e4c['clearColor'+'Buffer'],this['clearDepth']=_0x569e4c['clearDepth'],this['clearDepth'+'Buffer']=_0x569e4c['clearDepth'+'Buffer'],this['clearStenc'+'il']=_0x569e4c['clearStenc'+'il'],this['clearStenc'+'ilBuffer']=_0x569e4c['clearStenc'+'ilBuffer'],this['cullFaces']=_0x569e4c['cullFaces'],this['flipFaces']=_0x569e4c['flipFaces'],this['frustumCul'+'ling']=_0x569e4c['frustumCul'+'ling'],this['layers']=_0x569e4c['layers'],this['orthoHeigh'+'t']=_0x569e4c['orthoHeigh'+'t'],this['projection']=_0x569e4c['projection'],this['rect']=_0x569e4c['rect'],this['renderTarg'+'et']=_0x569e4c['renderTarg'+'et'],this['scissorRec'+'t']=_0x569e4c['scissorRec'+'t'],this['aperture']=_0x569e4c['aperture'],this['shutter']=_0x569e4c['shutter'],this['sensitivit'+'y']=_0x569e4c['sensitivit'+'y'],this['shaderPass'+'Info']=_0x569e4c['shaderPass'+'Info'],this['jitter']=_0x569e4c['jitter'],this['_projMatDi'+'rty']=!(-0xef1+0x1d12*0x1+-0x1*0xe21),this;}['_enableRen'+'derPassCol'+'orGrab'](_0xc57284,_0x320c85){var _0x25d6fc;_0x320c85?this['renderPass'+'ColorGrab']||(this['renderPass'+'ColorGrab']=new LE(_0xc57284)):((_0x25d6fc=this['renderPass'+'ColorGrab'])==null||_0x25d6fc['destroy'](),this['renderPass'+'ColorGrab']=null);}['_enableRen'+'derPassDep'+'thGrab'](_0x29d89f,_0x24fb25,_0x56222b){var _0x463cb8;_0x56222b?this['renderPass'+'DepthGrab']||(this['renderPass'+'DepthGrab']=new RE(_0x29d89f,this)):((_0x463cb8=this['renderPass'+'DepthGrab'])==null||_0x463cb8['destroy'](),this['renderPass'+'DepthGrab']=null);}['_updateVie'+'wProjMat'](){(this['_projMatDi'+'rty']||this['_viewMatDi'+'rty']||this['_viewProjM'+'atDirty'])&&(this['_viewProjM'+'at']['mul2'](this['projection'+'Matrix'],this['viewMatrix']),this['_viewProjM'+'atDirty']=!(-0x2142+0xd*-0x1a0+0x3663));}['worldToScr'+'een'](_0x2ec643,_0x19056d,_0x44bf78,_0x4688f0=new D()){this['_updateVie'+'wProjMat'](),this['_viewProjM'+'at']['transformP'+'oint'](_0x2ec643,_0x4688f0);const _0x48503a=this['_viewProjM'+'at']['data'],_0x420a06=_0x2ec643['x']*_0x48503a[0xced*0x2+-0xe9*-0x26+-0x3c6d]+_0x2ec643['y']*_0x48503a[-0x1a9a+0x997+0x2d7*0x6]+_0x2ec643['z']*_0x48503a[0x2285+0x312*0x5+-0x3*0x109c]+(0x1*-0x25bf+-0x7ea*0x1+0xa7*0x46)*_0x48503a[-0x1*0x21c0+-0x773*0x5+0x470e];_0x4688f0['x']=(_0x4688f0['x']/_0x420a06+(0x7b*-0x9+0x1fe1*-0x1+0x2435))*(0x54e+-0x1*0x18e3+0x1395+0.5),_0x4688f0['y']=(-0x412*0x4+0xd06*0x2+0x1*-0x9c3-_0x4688f0['y']/_0x420a06)*(-0x7de+-0x115f+0x193d+0.5);const {x:_0x1cb1b5,y:_0x1145c5,z:_0x121a29,w:_0x18f37c}=this['_rect'];return _0x4688f0['x']=_0x4688f0['x']*_0x121a29*_0x19056d+_0x1cb1b5*_0x19056d,_0x4688f0['y']=_0x4688f0['y']*_0x18f37c*_0x44bf78+(-0x4*0xb3+-0x5a*0x56+-0x2109*-0x1-_0x1145c5-_0x18f37c)*_0x44bf78,_0x4688f0;}['screenToWo'+'rld'](_0xce1028,_0x390b4e,_0x490476,_0x555120,_0x32e59e,_0x255705=new D()){const {x:_0x411178,y:_0x4a22a5,z:_0x33996e,w:_0xf1caf2}=this['_rect'],_0x1ed4cc=this['farClip']-this['nearClip'];if(La['set']((_0xce1028-_0x411178*_0x555120)/(_0x33996e*_0x555120),0x2*-0x371+-0xb08+0x11eb-(_0x390b4e-(-0x1*-0x206b+0x7db+-0x2845-_0x4a22a5-_0xf1caf2)*_0x32e59e)/(_0xf1caf2*_0x32e59e),_0x490476/_0x1ed4cc),La['mulScalar'](-0x16*0xec+-0x1132+0x1*0x257c),La['sub'](D['ONE']),this['_projectio'+'n']===ni){te['_getPerspe'+'ctiveHalfS'+'ize'](ao,this['fov'],this['aspectRati'+'o'],this['nearClip'],this['horizontal'+'Fov']),ao['x']*=La['x'],ao['y']*=La['y'];const _0xe10850=this['_node']['getWorldTr'+'ansform']();ao['z']=-this['nearClip'],_0xe10850['transformP'+'oint'](ao,D_);const _0x245fbe=this['_node']['getPositio'+'n']();_0x255705['sub2'](D_,_0x245fbe),_0x255705['normalize'](),_0x255705['mulScalar'](_0x490476),_0x255705['add'](_0x245fbe);}else this['_updateVie'+'wProjMat'](),I_['copy'](this['_viewProjM'+'at'])['invert'](),I_['transformP'+'oint'](La,_0x255705);return _0x255705;}['_evaluateP'+'rojectionM'+'atrix'](){if(this['_projMatDi'+'rty']){if(this['_projectio'+'n']===ni)this['_projMat']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip'],this['horizontal'+'Fov']),this['_projMatSk'+'ybox']['copy'](this['_projMat']);else{const _0xd0102d=this['_orthoHeig'+'ht'],_0x5f479f=_0xd0102d*this['aspectRati'+'o'];this['_projMat']['setOrtho'](-_0x5f479f,_0x5f479f,-_0xd0102d,_0xd0102d,this['nearClip'],this['farClip']),this['_projMatSk'+'ybox']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip']);}this['_projMatDi'+'rty']=!(-0x1638+-0x2674+0x3cad);}}['getProject'+'ionMatrixS'+'kybox'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMatSk'+'ybox'];}['getExposur'+'e'](){const _0x24a545=Math['log2'](this['_aperture']*this['_aperture']/this['_shutter']*(-0x219b+-0x907*-0x2+0xff1)/this['_sensitivi'+'ty']);return(-0x63a+-0x3*0x216+0xc7d)/(Math['pow'](0x150b*-0x1+-0x1270+0xb*0x397,_0x24a545)*(0xb*-0x1bb+0x1c*-0x55+0x1c56+0.19999999999999996));}['getScreenS'+'ize'](_0x4ea4ec){if(this['_projectio'+'n']===ni){const _0x127a4e=this['_node']['getPositio'+'n']()['distance'](_0x4ea4ec['center']);if(_0x127a4e<_0x4ea4ec['radius'])return-0x2*0x73b+0x138c+-0x515;const _0x11b3de=Math['asin'](_0x4ea4ec['radius']/_0x127a4e),_0x3b882b=Math['tan'](_0x11b3de),_0x5733d0=Math['tan'](this['fov']/(0x7*-0x83+0x7a8+-0x411)*Y['DEG_TO_RAD']);return Math['min'](_0x3b882b/_0x5733d0,0xb*-0x341+0x1*-0x1d52+0xd06*0x5);}return Y['clamp'](_0x4ea4ec['radius']/this['_orthoHeig'+'ht'],0xc6+-0x24e9+0x2423,-0x1542+0x247d*-0x1+-0x540*-0xb);}['getFrustum'+'Corners'](_0x316e4b=this['nearClip'],_0x3c766c=this['farClip']){const _0x165d50=this['fov']*Math['PI']/(0x77*0x2b+0x355*0x7+-0xe34*0x3);let _0x56c960,_0x24c5f1;this['projection']===ni?this['horizontal'+'Fov']?(_0x56c960=_0x316e4b*Math['tan'](_0x165d50/(-0x1521+0x81a+-0x1*-0xd09)),_0x24c5f1=_0x56c960/this['aspectRati'+'o']):(_0x24c5f1=_0x316e4b*Math['tan'](_0x165d50/(-0x1905+-0xd*-0xef+0xa5*0x14)),_0x56c960=_0x24c5f1*this['aspectRati'+'o']):(_0x24c5f1=this['_orthoHeig'+'ht'],_0x56c960=_0x24c5f1*this['aspectRati'+'o']);const _0x1ec594=OE;return _0x1ec594[-0x170a+-0x26f2+0x3dfc]['x']=_0x56c960,_0x1ec594[-0x1*-0x793+0x24f*0xd+0x22*-0x11b]['y']=-_0x24c5f1,_0x1ec594[-0x19c2+-0x3*0x6d9+0xf6f*0x3]['z']=-_0x316e4b,_0x1ec594[-0x17*0xd3+-0x89e*0x4+-0x7*-0x7a2]['x']=_0x56c960,_0x1ec594[-0xdb+-0x1a*0xdf+0x11*0x162]['y']=_0x24c5f1,_0x1ec594[-0x624+0x18*0x10b+-0x12e3*0x1]['z']=-_0x316e4b,_0x1ec594[0x2517+0x12e4+0x37f9*-0x1]['x']=-_0x56c960,_0x1ec594[0x1b23+0x48f+-0x2a4*0xc]['y']=_0x24c5f1,_0x1ec594[-0x270d+0x2*0x706+0x1903]['z']=-_0x316e4b,_0x1ec594[0x32f*-0xb+0x1*0x2407+-0xff]['x']=-_0x56c960,_0x1ec594[-0x1341+0xd0*-0x1+-0x1414*-0x1]['y']=-_0x24c5f1,_0x1ec594[0x34d*-0x1+-0x985+0x9*0x16d]['z']=-_0x316e4b,this['_projectio'+'n']===ni&&(this['horizontal'+'Fov']?(_0x56c960=_0x3c766c*Math['tan'](_0x165d50/(0x15ce+0xed0+0xc*-0x30d)),_0x24c5f1=_0x56c960/this['aspectRati'+'o']):(_0x24c5f1=_0x3c766c*Math['tan'](_0x165d50/(0x245e+0xb7a+-0x1d7*0x1a)),_0x56c960=_0x24c5f1*this['aspectRati'+'o'])),_0x1ec594[0x55a+-0x4a2*-0x1+-0x2c*0x3a]['x']=_0x56c960,_0x1ec594[-0x1b6a+-0x254f+0x40bd*0x1]['y']=-_0x24c5f1,_0x1ec594[-0x8ec*0x2+0xdf6*-0x1+0x1fd2]['z']=-_0x3c766c,_0x1ec594[0x14*-0x1d0+0x1147*-0x2+0x1*0x46d3]['x']=_0x56c960,_0x1ec594[0xe87*0x2+0x1461+0x2*-0x18b5]['y']=_0x24c5f1,_0x1ec594[0x1*-0x6c1+0x254d+0xf*-0x209]['z']=-_0x3c766c,_0x1ec594[-0x8*-0xbc+0x18*0x88+-0x129a*0x1]['x']=-_0x56c960,_0x1ec594[0x698+-0x1*-0x1499+0x6b*-0x41]['y']=_0x24c5f1,_0x1ec594[0xe8*-0x18+-0x1ed2+-0x176*-0x24]['z']=-_0x3c766c,_0x1ec594[-0x1*0xf57+-0xb71+0x1acf*0x1]['x']=-_0x56c960,_0x1ec594[-0xf*0x1f1+-0x134f+0x3075]['y']=-_0x24c5f1,_0x1ec594[0x397*-0x8+-0x1106+-0x2dc5*-0x1]['z']=-_0x3c766c,_0x1ec594;}['setXrPrope'+'rties'](_0x5c8b38){Object['assign'](this['_xrPropert'+'ies'],_0x5c8b38),this['_projMatDi'+'rty']=!(0xce*0x1a+0x6*0x4e5+-0x324a*0x1);}}const L_=new te(),R_=new te(),O_=new te(),gr=class gr{static['create'](_0x113a35,_0x406b27,_0x388633){const _0x346306=new Fl();switch(_0x346306['node']=new Ie(_0x113a35),_0x346306['aspectRati'+'o']=-0x19d4+-0x1a38+-0x145*-0x29,_0x346306['aspectRati'+'oMode']=lu,_0x346306['_scissorRe'+'ctClear']=!(0x1487+0x1ed*0x4+-0x1c3b),_0x406b27){case Ke:_0x346306['node']['setRotatio'+'n'](gr['pointLight'+'Rotations'][_0x388633]),_0x346306['fov']=0x74*-0x2b+0x44b+0xf8b,_0x346306['projection']=ni;break;case Ze:_0x346306['projection']=ni;break;case ve:_0x346306['projection']=En;break;}return _0x346306;}static['evalSpotCo'+'okieMatrix'](_0x448d3a){let _0x26b703=gr['_spotCooki'+'eCamera'];_0x26b703||(_0x26b703=gr['create']('SpotCookie'+'Camera',Ze),gr['_spotCooki'+'eCamera']=_0x26b703),_0x26b703['fov']=_0x448d3a['_outerCone'+'Angle']*(0x253c+-0x2*-0xe30+-0x2*0x20cd);const _0x5d295e=_0x26b703['_node'];_0x5d295e['setPositio'+'n'](_0x448d3a['_node']['getPositio'+'n']()),_0x5d295e['setRotatio'+'n'](_0x448d3a['_node']['getRotatio'+'n']()),_0x5d295e['rotateLoca'+'l'](-(-0x213d*0x1+-0x840+0x1*0x29d7),-0x171e+0x1d*-0x11b+0x1*0x372d,-0x2*-0x3c5+0x35*0x7c+0x27*-0xda),L_['setTRS'](_0x5d295e['getPositio'+'n'](),_0x5d295e['getRotatio'+'n'](),D['ONE'])['invert'](),R_['mul2'](_0x26b703['projection'+'Matrix'],L_);const _0x579b3f=_0x448d3a['cookieMatr'+'ix'],_0x5e6a2e=_0x448d3a['atlasViewp'+'ort'];return O_['setViewpor'+'t'](_0x5e6a2e['x'],_0x5e6a2e['y'],_0x5e6a2e['z'],_0x5e6a2e['w']),_0x579b3f['mul2'](O_,R_),_0x579b3f;}};h(gr,'pointLight'+'Rotations',[new le()['setFromEul'+'erAngles'](-0x3*-0x5a6+-0x18c3+0x7d1,0x20e8+0x89*0x1f+-0x3125,0x6*-0x1a3+0x2473+-0x19ed),new le()['setFromEul'+'erAngles'](-0x3*0x4db+0xa81*-0x1+0x1912,-(0x1115+-0x207e+0xfc3),0x25e2+-0x137d+-0x11b1),new le()['setFromEul'+'erAngles'](-0x244*0x10+0x409*-0x3+0x30b5,-0x17*-0x199+-0x35d+-0x2162,-0x1*-0x1589+0x26ae+-0x3c37),new le()['setFromEul'+'erAngles'](-(-0x238c+-0x104f+-0x3*-0x1167),0x1*0x20d3+0x16d6+-0x37a9,-0x22ad+0x1f16+0x397*0x1),new le()['setFromEul'+'erAngles'](-0xfd4+-0x1009+-0x1fdd*-0x1,0x83*0xf+-0x2140+0x1a47*0x1,-0x1*0xee1+-0x1c35+0x2bca),new le()['setFromEul'+'erAngles'](0x2f*-0x1+-0x25f7*0x1+-0x13*-0x202,0x1fe2+0x243b+-0x441d,0xc9*-0x6+-0x1*-0x16cd+-0x1163)]),h(gr,'_spotCooki'+'eCamera',null);let Wn=gr;const vs=new D(),Or=new Float32Array(-0x1339+-0x18b6+-0x16b*-0x1f),FE=new D(-(-0xa30+-0x203c+0x2a6c+0.5),-0x3b*0x61+0x55d*0x1+0x10fe,-0x1*0x258d+-0x4*0x2d7+0x30e9),NE=new D(0x8c+-0x1a05*0x1+-0x1*-0x1979,0x6a*0x3a+-0x1*-0x3fd+0x1*-0x1c01,0x11dc+-0x184f+0x673+0.5),at={'POSITION_RANGE':0x0,'DIRECTION_FLAGS':0x1,'COLOR_ANGLES_BIAS':0x2,'PROJ_MAT_0':0x3,'ATLAS_VIEWPORT':0x3,'PROJ_MAT_1':0x4,'PROJ_MAT_2':0x5,'PROJ_MAT_3':0x6,'AREA_DATA_WIDTH':0x7,'AREA_DATA_HEIGHT':0x8,'COUNT':0x9},kE={'LIGHTSHAPE_PUNCTUAL':Ys+'u','LIGHTSHAPE_RECT':Zy+'u','LIGHTSHAPE_DISK':Qy+'u','LIGHTSHAPE_SPHERE':Jy+'u','LIGHT_COLOR_DIVIDER':$c+'.0'},F_=(_0x337371,_0x21b162)=>Object['keys'](_0x337371)['map'](_0x49675a=>'#define\x20{'+_0x21b162+_0x49675a+'}\x20'+_0x337371[_0x49675a])['join']('\x0a'),N_='\x0a\x0a\x20\x20\x20\x20'+F_(at,'CLUSTER_TE'+'XTURE_')+'\x0a\x20\x20\x20\x20'+F_(kE,'')+'\x0a';class UE{constructor(_0x4eeea4){h(this,'areaLights'+'Enabled',!(0x1*0x6f9+-0x1*0xdfb+-0x1*-0x703)),(this['device']=_0x4eeea4,Pe['get'](_0x4eeea4,Fe)['set']('lightBuffe'+'rDefinesPS',N_),Pe['get'](_0x4eeea4,it)['set']('lightBuffe'+'rDefinesPS',N_),this['cookiesEna'+'bled']=!(-0x1ba6+0x345+-0xc31*-0x2),this['shadowsEna'+'bled']=!(0x1e81+0xd6*-0x3+-0x1bfe),this['areaLights'+'Enabled']=!(-0xcf7+-0x239d+0x3095),this['maxLights']=-0x8ae+0x1301+-0x954);const _0x39bb8f=at['COUNT'];this['lightsFloa'+'t']=new Float32Array((-0x580*-0x4+-0xdf2+-0x7*0x126)*_0x39bb8f*this['maxLights']),this['lightsUint']=new Uint32Array(this['lightsFloa'+'t']['buffer']),this['lightsText'+'ure']=this['createText'+'ure'](this['device'],_0x39bb8f,this['maxLights'],Xt,'LightsText'+'ure'),this['_lightsTex'+'tureId']=this['device']['scope']['resolve']('lightsText'+'ure'),this['invMaxColo'+'rValue']=-0xb*-0x276+-0x2*-0x1346+-0x1*0x419e,this['invMaxAtte'+'nuation']=-0x4*0x2+-0xcd6*-0x1+0xb*-0x12a,this['boundsMin']=new D(),this['boundsDelt'+'a']=new D();}['destroy'](){var _0x47982d;(_0x47982d=this['lightsText'+'ure'])==null||_0x47982d['destroy'](),this['lightsText'+'ure']=null;}['createText'+'ure'](_0x395f3c,_0xa2e31f,_0x3470f6,_0x1ef5a2,_0x50030d){return new _e(_0x395f3c,{'name':_0x50030d,'width':_0xa2e31f,'height':_0x3470f6,'mipmaps':!(0x6*-0x1e2+0xdf*-0x13+0x17*0x136),'format':_0x1ef5a2,'addressU':ue,'addressV':ue,'type':Ds,'magFilter':Te,'minFilter':Te,'anisotropy':0x1});}['setBounds'](_0x4ca52b,_0x124943){this['boundsMin']['copy'](_0x4ca52b),this['boundsDelt'+'a']['copy'](_0x124943);}['uploadText'+'ures'](){this['lightsText'+'ure']['lock']()['set'](this['lightsFloa'+'t']),this['lightsText'+'ure']['unlock']();}['updateUnif'+'orms'](){this['_lightsTex'+'tureId']['setValue'](this['lightsText'+'ure']);}['getSpotDir'+'ection'](_0x1a68ee,_0xf60f52){_0xf60f52['_node']['getWorldTr'+'ansform']()['getY'](_0x1a68ee)['mulScalar'](-(0xc57*-0x3+-0xe99+0x5*0xa53)),_0x1a68ee['normalize']();}['getLightAr'+'eaSizes'](_0x22306e){const _0x2e1d4c=_0x22306e['_node']['getWorldTr'+'ansform']();return _0x2e1d4c['transformV'+'ector'](FE,vs),Or[0x3*0x15d+-0x7*-0x10f+-0x2*0x5c0]=vs['x'],Or[0xcbe+0x405+-0x10c2]=vs['y'],Or[0xd01+-0x1656+0x957]=vs['z'],_0x2e1d4c['transformV'+'ector'](NE,vs),Or[0xc*0x193+0x7c*-0x1c+0x1*-0x551]=vs['x'],Or[-0x202e+0x1d9*-0x1+0x220b]=vs['y'],Or[0x1*0x509+0x2678+-0xadf*0x4]=vs['z'],Or;}['addLightDa'+'ta'](_0x263aaf,_0x68d679){const _0xf0fd60=_0x263aaf['_type']===Ze,_0x1f91ed=_0x263aaf['atlasViewp'+'ortAllocat'+'ed'],_0x5a1aa3=this['cookiesEna'+'bled']&&!!_0x263aaf['_cookie']&&_0x1f91ed,_0x1790ae=this['areaLights'+'Enabled']&&_0x263aaf['shape']!==Ys,_0x5e165f=this['shadowsEna'+'bled']&&_0x263aaf['castShadow'+'s']&&_0x1f91ed,_0x114056=_0x263aaf['_node']['getPositio'+'n']();let _0x2c2abe=null,_0x519b50=null;_0xf0fd60?_0x5e165f?_0x2c2abe=_0x263aaf['getRenderD'+'ata'](null,-0x5*-0x607+0xdc9+0x15f6*-0x2)['shadowMatr'+'ix']:_0x5a1aa3&&(_0x2c2abe=Wn['evalSpotCo'+'okieMatrix'](_0x263aaf)):(_0x5e165f||_0x5a1aa3)&&(_0x519b50=_0x263aaf['atlasViewp'+'ort']);const _0x5e83c5=this['lightsFloa'+'t'],_0x2374e8=this['lightsUint'],_0x44acab=_0x68d679*this['lightsText'+'ure']['width']*(0x13b8+0x26ff+-0x1391*0x3);_0x5e83c5[_0x44acab+(-0x80*0x14+0x812+0x1f2)*at['POSITION_R'+'ANGE']+(-0x24f2+0x5*-0x332+0x4*0xd3b)]=_0x114056['x'],_0x5e83c5[_0x44acab+(-0x443*-0x1+-0x17a3+0x1364)*at['POSITION_R'+'ANGE']+(0x15d7+0x16de+0x1*-0x2cb4)]=_0x114056['y'],_0x5e83c5[_0x44acab+(-0x1a46+0x10be+0x98c)*at['POSITION_R'+'ANGE']+(0x2*0x1e8+0x11f3+-0x15c1)]=_0x114056['z'],_0x5e83c5[_0x44acab+(0x16c4+0xccb+0x1b*-0x151)*at['POSITION_R'+'ANGE']+(0x3*-0x6f4+0x1825*-0x1+-0x56*-0x86)]=_0x263aaf['attenuatio'+'nEnd'];const _0x41a308=_0x263aaf['clusteredD'+'ata'];if(_0x2374e8[_0x44acab+(-0xff3*-0x1+0x21f5*0x1+0x1f*-0x19c)*at['COLOR_ANGL'+'ES_BIAS']+(-0x1c7f*0x1+0x54e+0x3*0x7bb)]=_0x41a308[0x655*-0x5+0x47*-0x31+-0x2d40*-0x1],_0x2374e8[_0x44acab+(-0x2*0x2f0+0x1c28+-0x1644)*at['COLOR_ANGL'+'ES_BIAS']+(-0x268a+-0xe9d+0xfc*0x36)]=_0x41a308[-0x439+-0x2e0+0x71a],_0x2374e8[_0x44acab+(0x26e8+-0xbed+-0x1af7)*at['COLOR_ANGL'+'ES_BIAS']+(-0x153d*0x1+-0x106e*0x1+0x3*0xc8f)]=_0x41a308[0x1de9+-0x449+0x3*-0x88a],_0x263aaf['castShadow'+'s']){const _0x34aed6=_0x263aaf['getRenderD'+'ata'](null,0x19fc+0x2c6+-0x1cc2),_0x202ef4=_0x263aaf['_getUnifor'+'mBiasValue'+'s'](_0x34aed6),_0xe38b01=Mn['float2Half'](_0x202ef4['bias']),_0x3cb45d=Mn['float2Half'](_0x202ef4['normalBias']);_0x2374e8[_0x44acab+(-0x173*-0x7+0x1*-0x18ad+-0x1c*-0x85)*at['COLOR_ANGL'+'ES_BIAS']+(-0x15e9*0x1+0x313*0x6+0x37a)]=_0xe38b01|_0x3cb45d<<-0x147b+-0x14*-0x140+-0x475;}if(_0xf0fd60&&(this['getSpotDir'+'ection'](vs,_0x263aaf),_0x5e83c5[_0x44acab+(0x7b*0x3e+0x3fa*0x5+-0x31a8)*at['DIRECTION_'+'FLAGS']+(-0x45+0x14af+-0xc9*0x1a)]=vs['x'],_0x5e83c5[_0x44acab+(-0x5ff*0x1+-0x24*-0xa7+-0x15*0xd5)*at['DIRECTION_'+'FLAGS']+(0x19*-0x72+-0x5b*-0x5d+0x17*-0xf4)]=vs['y'],_0x5e83c5[_0x44acab+(-0x3*-0x509+0x1*-0x9a9+-0x5*0x116)*at['DIRECTION_'+'FLAGS']+(0x1421*-0x1+-0x290*0x4+0xa21*0x3)]=vs['z']),_0x2374e8[_0x44acab+(-0x1713+-0xbac+0x22c3)*at['DIRECTION_'+'FLAGS']+(0x1168*-0x2+-0x4*0x349+0x1*0x2ff7)]=_0x263aaf['getCluster'+'edFlags'](_0x5e165f,_0x5a1aa3),_0x2c2abe){const _0x1879bc=_0x2c2abe['data'];for(let _0x554d4b=-0x1525+-0xb6e+-0x2093*-0x1;_0x554d4b<-0x7d4+0x61f+-0x1*-0x1c5;_0x554d4b++)_0x5e83c5[_0x44acab+(0x5*-0x39b+-0x9f9+0x1c04)*at['PROJ_MAT_0']+_0x554d4b]=_0x1879bc[_0x554d4b];}if(_0x519b50&&(_0x5e83c5[_0x44acab+(-0x21e4+0x1bb7+0x1*0x631)*at['ATLAS_VIEW'+'PORT']+(-0x11*0x1e6+-0x585+0x25cb)]=_0x519b50['x'],_0x5e83c5[_0x44acab+(0x5f7*0x5+0x5b1*-0x1+-0x126*0x15)*at['ATLAS_VIEW'+'PORT']+(0x2*0x30b+0x1*-0x1779+-0x3*-0x5cc)]=_0x519b50['y'],_0x5e83c5[_0x44acab+(-0x2c2*0xa+-0xfe9+-0x2b*-0x103)*at['ATLAS_VIEW'+'PORT']+(0x2043+0x1*-0x23da+0x3*0x133)]=_0x519b50['z']/(0x211d+-0x824+-0x18f6)),_0x1790ae){const _0x35bd48=this['getLightAr'+'eaSizes'](_0x263aaf);_0x5e83c5[_0x44acab+(0x1cb7+-0x10c*0x1a+-0x17b)*at['AREA_DATA_'+'WIDTH']+(-0x5bc+0x265c+-0x20a0)]=_0x35bd48[-0xe96+0xb32*-0x2+-0x127d*-0x2],_0x5e83c5[_0x44acab+(0x1925+0x1bd3+-0x34f4)*at['AREA_DATA_'+'WIDTH']+(-0x1e87+0x1ad9+0x3af)]=_0x35bd48[0xa9*-0x36+0x136b+-0x81e*-0x2],_0x5e83c5[_0x44acab+(-0x3d7*-0x6+-0x2*0xe96+-0x2*-0x313)*at['AREA_DATA_'+'WIDTH']+(0x197*0x3+0x19af+-0xa26*0x3)]=_0x35bd48[-0xaed*-0x2+-0x801+0x1*-0xdd7],_0x5e83c5[_0x44acab+(-0xcfb+-0x3d5*0x8+-0x95*-0x4b)*at['AREA_DATA_'+'HEIGHT']+(-0x6a4+-0xa0f+-0x591*-0x3)]=_0x35bd48[-0x1c30+0xb*0x23b+-0x43*-0xe],_0x5e83c5[_0x44acab+(0x16f8+-0x2501+-0x147*-0xb)*at['AREA_DATA_'+'HEIGHT']+(0xb+-0x2*0x11d1+0x2*0x11cc)]=_0x35bd48[0x3*0x28c+0x5*0x165+-0x25*0x65],_0x5e83c5[_0x44acab+(-0xa*0x344+-0x1a4f+0x3afb)*at['AREA_DATA_'+'HEIGHT']+(-0x1069+-0x1a5*-0x4+-0x9d7*-0x1)]=_0x35bd48[0xc77*0x3+0x207*-0xb+-0x11*0xe3];}}}const ic=new D(),rc=new D(),ac=new D(),Yd=new De(),k_=0x3*-0xc6d+-0x12ff*0x1+0x4846;class U_{constructor(){this['light']=null,this['min']=new D(),this['max']=new D();}}class cu{constructor(_0x534c76){h(this,'clusterTex'+'ture'),(this['device']=_0x534c76,this['name']='Untitled',this['reportCoun'+'t']=0x13c1*0x1+0x22d*0x1+-0x15ee,this['boundsMin']=new D(),this['boundsMax']=new D(),this['boundsDelt'+'a']=new D(),this['_cells']=new D(-0x24cc+-0x74e+0x2c1b,-0xee9+0x1883+-0x999,0x23b*-0x7+-0x1*-0x246c+-0x14ce),this['_cellsLimi'+'t']=new D(),this['cells']=this['_cells'],this['maxCellLig'+'htCount']=-0x20cd+0x40*0x70+-0x89*-0x9,this['_usedLight'+'s']=[],this['_usedLight'+'s']['push'](new U_()),this['lightsBuff'+'er']=new UE(_0x534c76),this['registerUn'+'iforms'](_0x534c76));}set['maxCellLig'+'htCount'](_0x4d0df5){_0x4d0df5!==this['_maxCellLi'+'ghtCount']&&(this['_maxCellLi'+'ghtCount']=_0x4d0df5,this['_cellsDirt'+'y']=!(0x1*0x994+0x1d13+-0x26a7));}get['maxCellLig'+'htCount'](){return this['_maxCellLi'+'ghtCount'];}set['cells'](_0x3624e6){ic['copy'](_0x3624e6)['floor'](),this['_cells']['equals'](ic)||(this['_cells']['copy'](ic),this['_cellsLimi'+'t']['copy'](ic)['sub'](D['ONE']),this['_cellsDirt'+'y']=!(0x665*0x1+0x1adb+-0x2140));}get['cells'](){return this['_cells'];}['destroy'](){this['lightsBuff'+'er']['destroy'](),this['releaseClu'+'sterTextur'+'e']();}['releaseClu'+'sterTextur'+'e'](){this['clusterTex'+'ture']&&(this['clusterTex'+'ture']['destroy'](),this['clusterTex'+'ture']=null);}['registerUn'+'iforms'](_0x2cd463){this['_clusterSk'+'ipId']=_0x2cd463['scope']['resolve']('clusterSki'+'p'),this['_clusterMa'+'xCellsId']=_0x2cd463['scope']['resolve']('clusterMax'+'Cells'),this['_clusterWo'+'rldTexture'+'Id']=_0x2cd463['scope']['resolve']('clusterWor'+'ldTexture'),this['_clusterTe'+'xtureSizeI'+'d']=_0x2cd463['scope']['resolve']('clusterTex'+'tureSize'),this['_clusterTe'+'xtureSizeD'+'ata']=new Float32Array(0x2*-0x916+-0x47+0x22*0x8b),this['_clusterBo'+'undsMinId']=_0x2cd463['scope']['resolve']('clusterBou'+'ndsMin'),this['_clusterBo'+'undsMinDat'+'a']=new Float32Array(-0x1*-0x2063+-0x6*0x5de+0x2d4),this['_clusterBo'+'undsDeltaI'+'d']=_0x2cd463['scope']['resolve']('clusterBou'+'ndsDelta'),this['_clusterBo'+'undsDeltaD'+'ata']=new Float32Array(0x175b+0x1a1a+-0x3172),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']=_0x2cd463['scope']['resolve']('clusterCel'+'lsCountByB'+'oundsSize'),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']=new Float32Array(-0x1*-0xe42+0x7*0x521+-0x3226),this['_clusterCe'+'llsDotId']=_0x2cd463['scope']['resolve']('clusterCel'+'lsDot'),this['_clusterCe'+'llsDotData']=new Float32Array(0x96c+-0x1b*0x9d+0x726),this['_clusterCe'+'llsMaxId']=_0x2cd463['scope']['resolve']('clusterCel'+'lsMax'),this['_clusterCe'+'llsMaxData']=new Float32Array(0x1*0x128+0x34d+0x1*-0x472);}['updatePara'+'ms'](_0x48b0d4){_0x48b0d4&&(this['cells']=_0x48b0d4['cells'],this['maxCellLig'+'htCount']=_0x48b0d4['maxLightsP'+'erCell'],this['lightsBuff'+'er']['cookiesEna'+'bled']=_0x48b0d4['cookiesEna'+'bled'],this['lightsBuff'+'er']['shadowsEna'+'bled']=_0x48b0d4['shadowsEna'+'bled'],this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x48b0d4['areaLights'+'Enabled']);}['updateCell'+'s'](){if(this['_cellsDirt'+'y']){this['_cellsDirt'+'y']=!(0x2*-0x4eb+-0x34*-0x5e+-0x941);const _0x1f3804=this['_cells']['x'],_0x4e871f=this['_cells']['y'],_0x1f35d9=this['_cells']['z'],_0x58c31d=_0x1f3804*_0x4e871f*_0x1f35d9,_0x1b5054=this['maxCellLig'+'htCount']*_0x58c31d;let _0x42ca91=Math['ceil'](Math['sqrt'](_0x1b5054));_0x42ca91=Y['roundUp'](_0x42ca91,this['maxCellLig'+'htCount']);const _0x2dd0cf=Math['ceil'](_0x1b5054/_0x42ca91);w['assert'](_0x42ca91<=k_&&_0x2dd0cf<=k_,'Clustered\x20'+'lights\x20par'+'ameters\x20ca'+'use\x20the\x20te'+'xture\x20size'+'\x20to\x20be\x20ove'+'r\x20the\x20limi'+'t,\x20please\x20'+'adjust\x20the'+'m.'),this['_clusterCe'+'llsMaxData'][0x251e+0x5*0x63c+-0x444a]=_0x1f3804,this['_clusterCe'+'llsMaxData'][-0x1*0x21ee+0x10c9+0x1126]=_0x4e871f,this['_clusterCe'+'llsMaxData'][0x1*0x13d9+-0x6af*0x3+0x36]=_0x1f35d9,this['_clusterCe'+'llsDotData'][-0x1df2+-0xa*-0x219+0x8f8]=this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][0x1e2c+-0x2548+0x71d]=_0x1f3804*_0x1f35d9*this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][-0x2125+0xc5e*-0x1+0x2d85]=_0x1f3804*this['maxCellLig'+'htCount'],this['clusters']=new Uint8ClampedArray(_0x1b5054),this['counts']=new Int32Array(_0x58c31d),this['_clusterTe'+'xtureSizeD'+'ata'][-0x1*-0xcb9+0x20a3+-0x2d5c]=_0x42ca91,this['_clusterTe'+'xtureSizeD'+'ata'][0x2b*0x9+-0x266a+0x24e8]=(0x187a+0x131e+-0x2b97)/_0x42ca91,this['_clusterTe'+'xtureSizeD'+'ata'][0x161+0x4b6+0x9*-0xad]=(0xcf2*-0x3+-0x5e+-0x2735*-0x1)/_0x2dd0cf,this['releaseClu'+'sterTextur'+'e'](),this['clusterTex'+'ture']=this['lightsBuff'+'er']['createText'+'ure'](this['device'],_0x42ca91,_0x2dd0cf,Ep,'ClusterTex'+'ture');}}['uploadText'+'ures'](){this['clusterTex'+'ture']['lock']()['set'](this['clusters']),this['clusterTex'+'ture']['unlock'](),this['lightsBuff'+'er']['uploadText'+'ures']();}['updateUnif'+'orms'](){this['_clusterSk'+'ipId']['setValue'](this['_usedLight'+'s']['length']>-0x697+0x31*0x14+0xb1*0x4?-0x12dc+0x2527+-0x124b:-0x31*-0x3d+-0xdb*0x7+-0x5af),this['lightsBuff'+'er']['updateUnif'+'orms'](),this['_clusterWo'+'rldTexture'+'Id']['setValue'](this['clusterTex'+'ture']),this['_clusterMa'+'xCellsId']['setValue'](this['maxCellLig'+'htCount']);const _0x28cc41=this['boundsDelt'+'a'];this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0x1029+0x35e+-0x1387]=this['_cells']['x']/_0x28cc41['x'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][-0x1f*-0x7f+0x394+-0x12f4]=this['_cells']['y']/_0x28cc41['y'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0x1d56+0x3*-0x51c+-0xe00*0x1]=this['_cells']['z']/_0x28cc41['z'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']['setValue'](this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']),this['_clusterBo'+'undsMinDat'+'a'][-0x2*0x1bb+-0x58*-0x1+-0x85*-0x6]=this['boundsMin']['x'],this['_clusterBo'+'undsMinDat'+'a'][-0x5fd+0xfa+0x504]=this['boundsMin']['y'],this['_clusterBo'+'undsMinDat'+'a'][0x556+0x1*0x133+-0x22d*0x3]=this['boundsMin']['z'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x27*0x41+0xb97+-0x8*0x36]=_0x28cc41['x'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x744+0x25c1+-0x1e7c]=_0x28cc41['y'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x1de+-0x11*0x22f+0x26ff]=_0x28cc41['z'],this['_clusterTe'+'xtureSizeI'+'d']['setValue'](this['_clusterTe'+'xtureSizeD'+'ata']),this['_clusterBo'+'undsMinId']['setValue'](this['_clusterBo'+'undsMinDat'+'a']),this['_clusterBo'+'undsDeltaI'+'d']['setValue'](this['_clusterBo'+'undsDeltaD'+'ata']),this['_clusterCe'+'llsDotId']['setValue'](this['_clusterCe'+'llsDotData']),this['_clusterCe'+'llsMaxId']['setValue'](this['_clusterCe'+'llsMaxData']);}['evalLightC'+'ellMinMax'](_0x41d521,_0x3b2fd2,_0x29dfc9){_0x3b2fd2['copy'](_0x41d521['min']),_0x3b2fd2['sub'](this['boundsMin']),_0x3b2fd2['div'](this['boundsDelt'+'a']),_0x3b2fd2['mul2'](_0x3b2fd2,this['cells']),_0x3b2fd2['floor'](),_0x29dfc9['copy'](_0x41d521['max']),_0x29dfc9['sub'](this['boundsMin']),_0x29dfc9['div'](this['boundsDelt'+'a']),_0x29dfc9['mul2'](_0x29dfc9,this['cells']),_0x29dfc9['ceil'](),_0x3b2fd2['max'](D['ZERO']),_0x29dfc9['min'](this['_cellsLimi'+'t']);}['collectLig'+'hts'](_0x2d8943){const _0x36dc65=this['lightsBuff'+'er']['maxLights'],_0x386be1=this['_usedLight'+'s'];let _0x1f2700=-0xac9+-0x798+0x1262;_0x2d8943['forEach'](_0x725428=>{const _0x26c6ff=!!(_0x725428['mask']&(Ss|di)),_0x7acc54=_0x725428['type']===Ze&&_0x725428['_outerCone'+'Angle']===0x17d7*0x1+0x2e2+-0x1ab9;if(_0x725428['enabled']&&_0x725428['type']!==ve&&_0x725428['visibleThi'+'sFrame']&&_0x725428['intensity']>0x51a*0x3+0x1*0x24f5+-0x3443&&_0x26c6ff&&!_0x7acc54){if(_0x1f2700<_0x36dc65){let _0x49a048;_0x1f2700<_0x386be1['length']?_0x49a048=_0x386be1[_0x1f2700]:(_0x49a048=new U_(),_0x386be1['push'](_0x49a048)),_0x49a048['light']=_0x725428,_0x725428['getBoundin'+'gBox'](Yd),_0x49a048['min']['copy'](Yd['getMin']()),_0x49a048['max']['copy'](Yd['getMax']()),_0x1f2700++;}else w['warnOnce']('Clustered\x20'+'lighting:\x20'+'more\x20than\x20'+(_0x36dc65-(0xd92*-0x1+-0xa*0x40+0x1013))+('\x20lights\x20in'+'\x20the\x20frame'+',\x20ignoring'+'\x20some.'));}}),_0x386be1['length']=_0x1f2700;}['evaluateBo'+'unds'](){const _0x2633de=this['_usedLight'+'s'],_0x3aa6c8=this['boundsMin'],_0x4e7f67=this['boundsMax'];if(_0x2633de['length']>0x5f7*0x3+-0x512+-0xcd2){_0x3aa6c8['copy'](_0x2633de[-0x110c+0x42*0x7c+-0xeeb]['min']),_0x4e7f67['copy'](_0x2633de[0x269c+-0x170b*-0x1+0x3da6*-0x1]['max']);for(let _0x48c0a7=0x2*0xdf+0x95+-0x251*0x1;_0x48c0a7<_0x2633de['length'];_0x48c0a7++)_0x3aa6c8['min'](_0x2633de[_0x48c0a7]['min']),_0x4e7f67['max'](_0x2633de[_0x48c0a7]['max']);}else _0x3aa6c8['set'](0x215d+0x3*0x133+-0x24f6,-0x621+-0x655+0xb*0x122,0x4b8+0x1*-0x89+-0x3*0x165),_0x4e7f67['set'](-0x1066+0x22d4+-0x126d,-0x2611+0x1*-0x1f+0x2631,-0x3b*0x90+0x1*-0x1a1f+0x3b5*0x10);this['boundsDelt'+'a']['sub2'](_0x4e7f67,_0x3aa6c8),this['lightsBuff'+'er']['setBounds'](_0x3aa6c8,this['boundsDelt'+'a']);}['updateClus'+'ters'](_0x4e41e5){this['counts']['fill'](0x1ade+0x1b9f+-0xd*0x431),this['clusters']['fill'](0x2*0x1223+-0x2*-0xbee+-0xb3*0x56),this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x4e41e5?_0x4e41e5['areaLights'+'Enabled']:!(-0x1*0x1229+-0x2042+0x39a*0xe);const _0x2b0aab=this['_cells']['x'],_0x3d08b9=this['_cells']['z'],_0xe79b6e=this['counts'],_0x4f57b4=this['_maxCellLi'+'ghtCount'],_0x48e869=this['clusters'],_0x397cbf=this['maxCellLig'+'htCount'];let _0x2ff112=!(0x3*0x391+-0x6e2+-0x10*0x3d);const _0x484d7f=this['_usedLight'+'s'];for(let _0x3e19fb=-0x1412+0x23cc+-0xfb9;_0x3e19fb<_0x484d7f['length'];_0x3e19fb++){const _0x3769bf=_0x484d7f[_0x3e19fb],_0x5a6e4d=_0x3769bf['light'];this['lightsBuff'+'er']['addLightDa'+'ta'](_0x5a6e4d,_0x3e19fb),this['evalLightC'+'ellMinMax'](_0x3769bf,rc,ac);const _0x2dd92d=rc['x'],_0x49e635=ac['x'],_0x3c3a2f=rc['y'],_0x273846=ac['y'],_0x39e408=rc['z'],_0x5456ae=ac['z'];for(let _0x55525d=_0x2dd92d;_0x55525d<=_0x49e635;_0x55525d++)for(let _0x4277f4=_0x39e408;_0x4277f4<=_0x5456ae;_0x4277f4++)for(let _0x52bd27=_0x3c3a2f;_0x52bd27<=_0x273846;_0x52bd27++){const _0x4e3482=_0x55525d+_0x2b0aab*(_0x4277f4+_0x52bd27*_0x3d08b9),_0x18c8a3=_0xe79b6e[_0x4e3482];_0x18c8a3<_0x4f57b4?(_0x48e869[_0x397cbf*_0x4e3482+_0x18c8a3]=_0x3e19fb,_0xe79b6e[_0x4e3482]=_0x18c8a3+(-0x9e*0x9+0xf8*0x4+0x1af)):_0x2ff112=!(-0x182*-0x9+-0x1*-0xe9b+-0x1*0x1c2d);}}_0x2ff112&&this['reportCoun'+'t']<0xaff*0x3+0xcf1*0x1+-0x2de9&&(console['warn']('Too\x20many\x20l'+'ights\x20in\x20l'+'ight\x20clust'+'er\x20'+this['name']+(',\x20please\x20a'+'djust\x20para'+'meters.')+(this['reportCoun'+'t']===-0x40*0x13+0x4d*-0x43+0x18eb?'\x20Giving\x20up'+'\x20on\x20report'+'ing\x20it.':'')),this['reportCoun'+'t']++);}['update'](_0x1be901,_0x483bac=null){this['updatePara'+'ms'](_0x483bac),this['updateCell'+'s'](),this['collectLig'+'hts'](_0x1be901),this['evaluateBo'+'unds'](),this['updateClus'+'ters'](_0x483bac),this['uploadText'+'ures']();}['activate'](){this['updateUnif'+'orms']();}}const B_=0x1f*0x10f+-0x6b*-0x5+-0x22e6+0.39996322972865306,Nl={'circlePoint'(_0x19b20f){const _0x15de8a=Math['sqrt'](Math['random']()),_0x47c151=Math['random']()*(0x47*0x16+0x95*0x27+0x333*-0x9)*Math['PI'];_0x19b20f['x']=_0x15de8a*Math['cos'](_0x47c151),_0x19b20f['y']=_0x15de8a*Math['sin'](_0x47c151);},'circlePointDeterministic'(_0x178be3,_0x5e0028,_0x6c2a08){const _0x1630fd=_0x5e0028*B_,_0x33d4c6=Math['sqrt'](_0x5e0028)/Math['sqrt'](_0x6c2a08);_0x178be3['x']=_0x33d4c6*Math['cos'](_0x1630fd),_0x178be3['y']=_0x33d4c6*Math['sin'](_0x1630fd);},'spherePointDeterministic'(_0x1599c0,_0x4e77aa,_0xd61aba,_0x222dc0=-0x1049+0x1a4d+-0xa04,_0xfd3acc=0xa1c+0x118a+-0x1ba5){_0x222dc0=-0x6*-0x4ea+0x34e*0x6+0x314f*-0x1-(-0xdfa+0x11c*-0x3+0x1150)*_0x222dc0,_0xfd3acc=0x1*0xe95+0x239*-0x1+-0x1*0xc5b-(-0x3*0x6fd+-0x246e*-0x1+-0xf75)*_0xfd3acc;const _0x4b5c23=Y['lerp'](_0x222dc0,_0xfd3acc,_0x4e77aa/_0xd61aba),_0xde9051=Math['sqrt'](0x473+0x1c37+-0x3a1*0x9-_0x4b5c23*_0x4b5c23),_0x41ac6b=B_*_0x4e77aa;_0x1599c0['x']=Math['cos'](_0x41ac6b)*_0xde9051,_0x1599c0['y']=_0x4b5c23,_0x1599c0['z']=Math['sin'](_0x41ac6b)*_0xde9051;},'radicalInverse'(_0x47f7bc){let _0x27ec1d=(_0x47f7bc<<-0x62a+0x1*0x1215+-0xbdb|_0x47f7bc>>>0x1*0x259+0xdae+-0xff7)>>>-0x2*-0xd5d+-0x1*0xed+-0x529*0x5;return _0x27ec1d=((_0x27ec1d&0x1b6a5a28+0x60*0x1aa7171+0xe5*-0x720637)<<0x20b*0x1+-0x1d3d+0x1b33|(_0x27ec1d&-0x5dfbb33*0xf+0x142a4d00+-0x277c55*-0x60b)>>>-0x1*-0xb11+0x10*0xb7+0x48*-0x50)>>>-0x2412+-0xda2+0x31b4,_0x27ec1d=((_0x27ec1d&-0x25c1f8f*0x8+-0x208ce4d6+-0x1f93*-0x3401b)<<-0x109*0x9+0x2b1+0x3*0x236|(_0x27ec1d&-0x3*0x4abfe5d5+-0xba32c769+0x2673f45b4)>>>0x163+0x9a4*-0x3+0x1*0x1b8b)>>>-0x1abd+-0x1*-0xc28+0xe95*0x1,_0x27ec1d=((_0x27ec1d&-0x2*-0x719d3bb+0x3295143*0x7+0xbbc96c*-0x1d)<<-0xa2*-0x3a+-0xf78+-0x1538|(_0x27ec1d&-0x3a5*0x425dd3+-0xb0aad9e*-0x4+-0x1*-0x1b6a62c77)>>>-0x6b8*0x5+0x5df*-0x3+-0x9*-0x5b1)>>>0x131f*-0x1+-0xd9c+0x20bb,_0x27ec1d=((_0x27ec1d&-0x10ed*-0x554+0x9*0x27b707+-0xc09d04)<<0x1*0x1de3+0x1f07+-0x3ce2|(_0x27ec1d&0x1dfe35bf7*0x1+0x78a825c6*-0x1+-0x683a3731)>>>-0x561+-0x19b7+0x1f20)>>>-0x1*0x1055+-0x2e*0x5e+0xbd*0x2d,_0x27ec1d*(-0x164a+0x49+0x1601+2.3283064365386963e-10);}},BE={'linear':'decodeLine'+'ar','srgb':'decodeGamm'+'a','rgbm':'decodeRGBM','rgbe':'decodeRGBE','rgbp':'decodeRGBP','xy':'unpackNorm'+'alXY','xyz':'unpackNorm'+'alXYZ'},zE={'linear':'encodeLine'+'ar','srgb':'encodeGamm'+'a','rgbm':'encodeRGBM','rgbe':'encodeRGBE','rgbp':'encodeRGBP'};class Tr{static['decodeFunc'](_0x88c8bb){return BE[_0x88c8bb]??'decodeGamm'+'a';}static['encodeFunc'](_0x11d146){return zE[_0x11d146]??'encodeGamm'+'a';}}const z_=_0x1dc28c=>{switch(_0x1dc28c){case tu:return'Cubemap';case Gx:return'Octahedral';default:return'Equirect';}},nc=(_0x4f37a8,_0x36f669,_0x1d4a0a)=>{if(_0x4f37a8<=-0x7*-0x1a9+0x11*-0x6d+0x231*-0x2)_0x36f669[_0x1d4a0a+(0x822+0xffb*0x1+-0x181d*0x1)]=0xb28+0x2aa+-0xdd2,_0x36f669[_0x1d4a0a+(-0x23c8+0x2316+0xb3)]=-0x5*-0x17+0xf6c+-0x1*0xfdf,_0x36f669[_0x1d4a0a+(0x12f3+0xc*-0x64+-0xe41)]=-0x1*0x1704+-0x9d7+-0xd*-0x287,_0x36f669[_0x1d4a0a+(-0x1*0x106a+-0x234a+0x33b7)]=0x13*-0x137+0xc*0x20e+-0x193;else{if(_0x4f37a8>=-0x185*0x10+0x1c16+-0x3c5*0x1)_0x36f669[_0x1d4a0a+(-0x1*-0x5dd+-0x22*0x8+-0x4cd*0x1)]=-0x1248+-0x6*-0x199+-0x33b*-0x3,_0x36f669[_0x1d4a0a+(0x260a+0x10b1*-0x2+0x1*-0x4a7)]=-0x1c4b+0x1def*-0x1+-0x2*-0x1d1d,_0x36f669[_0x1d4a0a+(0x26*-0xe9+-0x14fe+-0x5*-0xb1e)]=0x1373+0x41e+-0x1791,_0x36f669[_0x1d4a0a+(0x2496+-0x1018+0x7*-0x2ed)]=0x139*0x15+0x12+-0x19bf;else{let _0x329fe3=(0x1cb2+-0x1f00+-0x1*-0x24f)*_0x4f37a8%(0xf*-0x123+-0x18b8+0x14e3*0x2),_0x19fda9=(0x62a+-0x91b+0x3f0)*_0x4f37a8%(0x5e*0x4d+0x141d*-0x1+-0x828),_0x568662=(0x10c5a+0x90b0+-0x1*0x9f09)*_0x4f37a8%(-0x7b2+-0x16ac*-0x1+0xef9*-0x1);const _0x58fb56=(0x4f*0x312ad+0x1039*0x59+0xb*0x6b41)*_0x4f37a8%(-0x1c5e+0xc9c+0xfc3);_0x329fe3-=_0x19fda9/(-0x3b*-0x1b+0x32b*0x3+-0xebb),_0x19fda9-=_0x568662/(-0xc*0x1f3+-0x1*0x179+0x19dc),_0x568662-=_0x58fb56/(-0x213b+0xb3*-0x5+0x14d*0x1d),_0x36f669[_0x1d4a0a+(-0x24ac+0xde1+-0x48f*-0x5)]=Math['min'](0x106a+-0x1066+0xfb*0x1,Math['floor'](_0x329fe3*(0x2701+-0x7*0x286+0x7f*-0x29))),_0x36f669[_0x1d4a0a+(-0x1*0x136f+-0x1*0x1a87+-0x1*-0x2df7)]=Math['min'](-0x1*0x399+0x9d4+0x86*-0xa,Math['floor'](_0x19fda9*(-0x1e2+0x16ab+-0x13c9*0x1))),_0x36f669[_0x1d4a0a+(-0x39*0x2d+0x1*-0x1a93+0x249a)]=Math['min'](0x170+-0x1011+0x20*0x7d,Math['floor'](_0x568662*(0x1cbd+-0x95*-0x7+-0x1fd0))),_0x36f669[_0x1d4a0a+(0x118f+0x5de*0x1+-0x29a*0x9)]=Math['min'](0x554+-0x158b*0x1+0x1136,Math['floor'](_0x58fb56*(0x707*0x1+-0x2133+-0xd96*-0x2)));}}},VE=_0x2b53bd=>{const _0x4ed73d=_0x2b53bd['length'],_0x576adb=Math['min'](_0x4ed73d,0x4fd*0x4+0x2*-0x1315+0x1436),_0x454cf2=Math['ceil'](_0x4ed73d/_0x576adb),_0x4a9488=new Uint8Array(_0x576adb*_0x454cf2*(-0x6b1+0x1219+-0xb64*0x1));let _0x43e971=-0x2485+-0x1*0xc80+0x3105;for(let _0x913508=-0x14*0xa7+0x4b5*0x1+0x3d*0x23;_0x913508<_0x4ed73d;_0x913508+=0x3ad*-0x7+-0x1689+0x3048)nc(_0x2b53bd[_0x913508+(0x29d+0xb1c+0x1*-0xdb9)]*(0xb*0x266+-0x12d6+0x15*-0x5c+0.5)+(-0x5*-0x38+-0x117e+0x833*0x2+0.5),_0x4a9488,_0x43e971+(-0x15*0x101+-0xcee+0x1*0x2203)),nc(_0x2b53bd[_0x913508+(0x1e46+0xbb7*-0x1+0x128e*-0x1)]*(-0x2462*0x1+0x1865+0xbfd+0.5)+(-0x3*0x1e3+-0xe16+0x13bf+0.5),_0x4a9488,_0x43e971+(-0x782*0x2+-0x17*0x41+0x14df)),nc(_0x2b53bd[_0x913508+(-0x2510+0x1a4d+0xac5)]*(0x319*-0x5+0x1301+0xb4*-0x5+0.5)+(-0x7*-0x2a1+0x46a+0x63*-0x3b+0.5),_0x4a9488,_0x43e971+(-0x1*-0x17d6+-0xfb*0x5+-0x3*0x64d)),nc(_0x2b53bd[_0x913508+(0xafd+-0x15da+0x18*0x74)]/(-0x11e5+0xf65+0x288),_0x4a9488,_0x43e971+(-0x2d3*-0x2+0x2b*0x8d+-0x7*0x42f)),_0x43e971+=0x2a1*0x1+-0x14c7+0x29a*0x7;return{'width':_0x576adb,'height':_0x454cf2,'data':_0x4a9488};},GE=(_0x4ff5bb,_0x47f18a,_0x233c7b,_0x2b1ef9)=>{const _0x349efd=_0x233c7b*(-0x187f+-0x2378*-0x1+0xaf7*-0x1)*Math['PI'],_0x580444=Math['pow'](0xd61+-0x1855*0x1+-0x5*-0x231-_0x47f18a,(0x721+-0xd*-0xb+-0x7af)/(_0x2b1ef9+(-0xf*-0x1b3+0xffc+-0x52f*0x8))),_0x5eb7c1=Math['sqrt'](0x1553+-0x1d*-0x4b+-0x1dd1*0x1-_0x580444*_0x580444);_0x4ff5bb['set'](Math['cos'](_0x349efd)*_0x5eb7c1,Math['sin'](_0x349efd)*_0x5eb7c1,_0x580444)['normalize']();},HE=(_0x2d8827,_0x5b2c4a,_0x41c927)=>{const _0x3c5ad1=_0x41c927*(-0xca1+0x11bd*0x1+-0x51a)*Math['PI'],_0x30066e=Math['sqrt'](0x248b+-0x22b2*0x1+0x76*-0x4-_0x5b2c4a),_0x11e169=Math['sqrt'](_0x5b2c4a);_0x2d8827['set'](Math['cos'](_0x3c5ad1)*_0x11e169,Math['sin'](_0x3c5ad1)*_0x11e169,_0x30066e)['normalize']();},WE=(_0xb10696,_0x38d03f,_0x4c927a,_0x5c8389)=>{const _0x1f04c2=_0x4c927a*(0x7*-0x1+-0x1*0x71d+-0x262*-0x3)*Math['PI'],_0x3bc18a=Math['sqrt']((-0x1a1d*0x1+0x209a+-0xa*0xa6-_0x38d03f)/(-0x1786+-0x263+0xcf5*0x2+(_0x5c8389*_0x5c8389-(-0x7*0x304+-0xa60+0x1f7d))*_0x38d03f)),_0x2dd35f=Math['sqrt'](-0x7*-0x11a+0x4*-0x397+0x6a7-_0x3bc18a*_0x3bc18a);_0xb10696['set'](Math['cos'](_0x1f04c2)*_0x2dd35f,Math['sin'](_0x1f04c2)*_0x2dd35f,_0x3bc18a)['normalize']();},$E=(_0x27f29f,_0x376753)=>{const _0x3e97ef=_0x27f29f*_0x376753,_0x43fdf2=_0x376753/(0x33*-0x20+0xe7*0x1a+-0x1115*0x1-_0x27f29f*_0x27f29f+_0x3e97ef*_0x3e97ef);return _0x43fdf2*_0x43fdf2*((-0x3d*-0x65+-0x1473+-0x5*0xb9)/Math['PI']);},XE=(_0xf9e8d3,_0x5a9444)=>{const _0x56d98f=new D(),_0x485af3=[];for(let _0x6fffc6=0x109*0x4+0x1b79+-0x1f9d*0x1;_0x6fffc6<_0xf9e8d3;++_0x6fffc6)GE(_0x56d98f,_0x6fffc6/_0xf9e8d3,Nl['radicalInv'+'erse'](_0x6fffc6),_0x5a9444),_0x485af3['push'](_0x56d98f['x'],_0x56d98f['y'],_0x56d98f['z'],-0x76*0x1+0x226*-0x7+0xf80);return _0x485af3;},qE=(_0x41447d,_0x1d7ed3)=>{const _0x27086b=_0x1d7ed3/_0x41447d,_0x292505=new D(),_0x39e47c=[];for(let _0x12a0ce=0x23cc+0xf57+-0x3323;_0x12a0ce<_0x41447d;++_0x12a0ce){HE(_0x292505,_0x12a0ce/_0x41447d,Nl['radicalInv'+'erse'](_0x12a0ce));const _0x2e1051=_0x292505['z']/Math['PI'],_0x398ad3=(0x7*-0x446+0x1*0x2243+-0x1*0x459+0.5)*Math['log2'](_0x27086b/_0x2e1051);_0x39e47c['push'](_0x292505['x'],_0x292505['y'],_0x292505['z'],_0x398ad3);}return _0x39e47c;},jE={0x10:{0x2:0x1a,0x8:0x14,0x20:0x11,0x80:0x10,0x200:0x10},0x20:{0x2:0x35,0x8:0x28,0x20:0x22,0x80:0x20,0x200:0x20},0x80:{0x2:0xd6,0x8:0xa3,0x20:0x8b,0x80:0x82,0x200:0x80},0x400:{0x2:0x6ba,0x8:0x51e,0x20:0x45a,0x80:0x411,0x200:0x401}},YE=(_0x3a4d66,_0x3c50da)=>{const _0x1d0c19=jE[_0x3a4d66];return _0x1d0c19&&_0x1d0c19[_0x3c50da]||_0x3a4d66;},KE=(_0x47b879,_0x39145d,_0x1fe170)=>{const _0x179254=_0x1fe170/_0x47b879,_0x3b47b1=0x161d+-0x4ee*0x1+-0x112e-Math['log2'](_0x39145d)/(-0x6df+-0x1917+0x2001),_0x46af96=_0x3b47b1*_0x3b47b1,_0xc32706=new D(),_0x28b3f2=new D(),_0x35b833=new D(0x178b+0x2221*-0x1+0xa96,0x506+-0x1*0x211c+0x1c16,-0x138a+-0x2564+0xb63*0x5),_0x505e5d=[],_0x1c13eb=YE(_0x47b879,_0x39145d);for(let _0x5750f8=-0x1cf0*0x1+-0x2148+0x3e38;_0x5750f8<_0x1c13eb;++_0x5750f8){WE(_0xc32706,_0x5750f8/_0x1c13eb,Nl['radicalInv'+'erse'](_0x5750f8),_0x46af96);const _0x20624c=_0xc32706['z'];if(_0x28b3f2['set'](_0xc32706['x'],_0xc32706['y'],_0xc32706['z'])['mulScalar']((0x18fc+0x1a9e*0x1+-0x3398)*_0x20624c)['sub'](_0x35b833),_0x28b3f2['z']>-0x24cf+-0x26a3+0x4b72){const _0x27e140=$E(Math['min'](0x11fa*0x2+0x1*-0x122b+0x8*-0x239,_0x20624c),_0x46af96)/(0x224d+0x1293+-0x1*0x34dc)+(0x62+-0xaac+0xa4a+0.001),_0x5eb42e=(-0x13*0x4d+0x161a+-0x1063+0.5)*Math['log2'](_0x179254/_0x27e140);_0x505e5d['push'](_0x28b3f2['x'],_0x28b3f2['y'],_0x28b3f2['z'],_0x5eb42e);}}for(;_0x505e5d['length']<_0x47b879*(0x1793+0x2*-0xdcd+0x40b);)_0x505e5d['push'](-0x86e*-0x1+0x2*-0x971+0xa74,-0x200b+-0x31*0x8b+-0x1d53*-0x2,-0xde*-0x12+-0x1*0x812+0x182*-0x5,0x1342+0x2046+0x22*-0x184);return _0x505e5d;},ZE=(_0x28e729,_0x1d7736,_0x4d43da)=>{const _0x4c4313=VE(_0x4d43da);return new _e(_0x28e729,{'name':_0x1d7736,'width':_0x4c4313['width'],'height':_0x4c4313['height'],'mipmaps':!(-0x1e79+-0x1*0x26a7+0x4521),'minFilter':Te,'magFilter':Te,'levels':[_0x4c4313['data']]});};class xv{constructor(_0x3e41b2=!(-0x65c+-0x1*-0x140e+-0xdb2)){h(this,'map',new Map()),this['destroyCon'+'tent']=_0x3e41b2;}['destroy'](){this['destroyCon'+'tent']&&this['map']['forEach']((_0x3336e4,_0x2a3527)=>{_0x3336e4['destroy']();});}['get'](_0x570653,_0x509841){if(!this['map']['has'](_0x570653)){const _0x37cb5e=_0x509841();return this['map']['set'](_0x570653,_0x37cb5e),_0x37cb5e;}return this['map']['get'](_0x570653);}}const QE=new xv(!(0xcad+-0xe*-0x16f+-0x575*0x6)),JE=new Kt(),dm=(_0x486147,_0x92e29e,_0xfc5e6d)=>JE['get'](_0x486147,()=>new xv())['get'](_0x92e29e,()=>ZE(_0x486147,_0x92e29e,QE['get'](_0x92e29e,_0xfc5e6d))),eb=(_0x48cfeb,_0x386a4f,_0x50715b)=>{const _0x150da9='lambert-sa'+'mples-'+_0x386a4f+'-'+_0x50715b;return dm(_0x48cfeb,_0x150da9,()=>qE(_0x386a4f,_0x50715b));},tb=(_0x162e87,_0x2bffa6,_0x4ac042)=>{const _0x49f22e='phong-samp'+'les-'+_0x2bffa6+'-'+_0x4ac042;return dm(_0x162e87,_0x49f22e,()=>XE(_0x2bffa6,_0x4ac042));},sb=(_0x3b64a1,_0x454ee6,_0x2a2c77,_0x21d7a9)=>{const _0x41078f='ggx-sample'+'s-'+_0x454ee6+'-'+_0x2a2c77+'-'+_0x21d7a9;return dm(_0x3b64a1,_0x41078f,()=>KE(_0x454ee6,_0x2a2c77,_0x21d7a9));};function vi(_0xa3c236,_0x55caeb,_0x52cd74={}){var _0x17abeb,_0x1ecd8e;w['assert'](_0xa3c236 instanceof _e&&_0x55caeb instanceof _e,'source\x20and'+'\x20target\x20mu'+'st\x20be\x20text'+'ures');const _0x10919d=_0x52cd74['seamPixels']??-0x2215+0x213d*-0x1+0x4352,_0x254df1=(((_0x17abeb=_0x52cd74['rect'])==null?void(0x1b14*-0x1+-0x8*-0x3af+-0x264):_0x17abeb['z'])??_0x55caeb['width'])-_0x10919d*(0xd64+-0x126e+0x50c),_0xd5985d=(((_0x1ecd8e=_0x52cd74['rect'])==null?void(0x61d*0x5+0x1f9e+0x3e2f*-0x1):_0x1ecd8e['w'])??_0x55caeb['height'])-_0x10919d*(-0x1f4e+0x317+0x1c39*0x1);if(_0x254df1<-0x1fcc+0x239a+-0x3cd||_0xd5985d<-0x1aac+-0x2*0xc15+-0x5f*-0x89)return!(0xfbc+0x12*-0x1be+-0xfa1*-0x1);const _0x4d7337={'none':'reproject','lambert':'prefilterS'+'amplesUnwe'+'ighted','phong':'prefilterS'+'amplesUnwe'+'ighted','ggx':'prefilterS'+'amples'},_0x311a93=_0x52cd74['hasOwnProp'+'erty']('specularPo'+'wer')?_0x52cd74['specularPo'+'wer']:-0x2*-0xf1d+-0x2397*0x1+0x55e,_0xca66ca=_0x52cd74['hasOwnProp'+'erty']('face')?_0x52cd74['face']:null,_0x190444=_0x52cd74['hasOwnProp'+'erty']('distributi'+'on')?_0x52cd74['distributi'+'on']:_0x311a93===-0x1329*0x2+-0x1fec+0x463f?'none':'phong',_0x14715f=_0x4d7337[_0x190444]||'reproject',_0x22cd26=_0x14715f['startsWith']('prefilterS'+'amples'),_0x31d2ea=Tr['decodeFunc'](_0xa3c236['encoding']),_0x870d9c=Tr['encodeFunc'](_0x55caeb['encoding']),_0x9db561='sample'+z_(_0xa3c236['projection']),_0x183875='getDirecti'+'on'+z_(_0x55caeb['projection']),_0x5385e6=_0x52cd74['hasOwnProp'+'erty']('numSamples')?_0x52cd74['numSamples']:-0x1fe6+-0x2*0x7d3+-0x338c*-0x1,_0x444f80='ReprojectS'+'hader:'+_0x14715f+'_'+_0x31d2ea+'_'+_0x870d9c+'_'+_0x9db561+'_'+_0x183875+'_'+_0x5385e6,_0x3f6461=_0xa3c236['device'];let _0x587a49=Hn(_0x3f6461)['getCachedS'+'hader'](_0x444f80);if(!_0x587a49){const _0x42c303=new Map();_0x22cd26&&_0x42c303['set']('USE_SAMPLE'+'S_TEX',''),_0xa3c236['cubemap']&&_0x42c303['set']('CUBEMAP_SO'+'URCE',''),_0x42c303['set']('{PROCESS_F'+'UNC}',_0x14715f),_0x42c303['set']('{DECODE_FU'+'NC}',_0x31d2ea),_0x42c303['set']('{ENCODE_FU'+'NC}',_0x870d9c),_0x42c303['set']('{SOURCE_FU'+'NC}',_0x9db561),_0x42c303['set']('{TARGET_FU'+'NC}',_0x183875),_0x42c303['set']('{NUM_SAMPL'+'ES}',_0x5385e6),_0x42c303['set']('{NUM_SAMPL'+'ES_SQRT}',Math['round'](Math['sqrt'](_0x5385e6))['toFixed'](-0x227*-0x11+0xeff+-0x3395));const _0x3d9984=_0x3f6461['isWebGPU'],_0xd3446c=Pe['get'](_0x3f6461,_0x3d9984?it:Fe),_0x4fb91c=new Map();_0x4fb91c['set']('decodePS',_0xd3446c['get']('decodePS')),_0x4fb91c['set']('encodePS',_0xd3446c['get']('encodePS')),_0x587a49=$t['createShad'+'er'](_0x3f6461,{'uniqueName':_0x444f80,'attributes':{'vertex_position':Me},'vertexChunk':'reprojectV'+'S','fragmentChunk':'reprojectP'+'S','fragmentIncludes':_0x4fb91c,'fragmentDefines':_0x42c303});}Q['pushGpuMar'+'ker'](_0x3f6461,'ReprojectT'+'exture'),_0x3f6461['setBlendSt'+'ate'](pt['NOBLEND']);const _0x11510d=_0x3f6461['scope']['resolve'](_0xa3c236['cubemap']?'sourceCube':'sourceTex');w['assert'](_0x11510d),_0x11510d['setValue'](_0xa3c236);const _0x36951f=_0x3f6461['scope']['resolve']('params'),_0x7422b=_0x3f6461['scope']['resolve']('uvMod');_0x10919d>-0x1e2*0xd+0x1*0x251+0x1629?_0x7422b['setValue']([(_0x254df1+_0x10919d*(0xe*0x89+0x79*0x8+-0xb44))/_0x254df1,(_0xd5985d+_0x10919d*(0x78*0xf+-0x1*0x1e13+0x170d))/_0xd5985d,-_0x10919d/_0x254df1,-_0x10919d/_0xd5985d]):_0x7422b['setValue']([-0x1d23*-0x1+0xa6e*-0x1+-0xe4*0x15,0x1c23+-0xe1e+0x4e*-0x2e,-0x1ec9+-0x7a5*0x1+-0x2*-0x1337,-0x16ee+0x2*-0x7dc+-0x1*-0x26a6]);const _0x25afe7=[0x51*0x5a+-0x1*0x10f4+-0xb86,_0x55caeb['width']*_0x55caeb['height']*(_0x55caeb['cubemap']?-0x222+0x1671+-0x1*0x1449:-0x2615+0x1f2e+0x2*0x374),_0xa3c236['width']*_0xa3c236['height']*(_0xa3c236['cubemap']?-0x51e+0x3*0x855+0xd*-0x187:0x1a5a+0x1a84+0x15b*-0x27)];if(_0x22cd26){const _0x31ba21=_0xa3c236['width']*_0xa3c236['height']*(_0xa3c236['cubemap']?-0x29c*0x3+0x88d+0xb3*-0x1:-0xb*-0x33d+0x23b2+0x4750*-0x1),_0xa3b3e0=_0x190444==='ggx'?sb(_0x3f6461,_0x5385e6,_0x311a93,_0x31ba21):_0x190444==='lambert'?eb(_0x3f6461,_0x5385e6,_0x31ba21):tb(_0x3f6461,_0x5385e6,_0x311a93);_0x3f6461['scope']['resolve']('samplesTex')['setValue'](_0xa3b3e0),_0x3f6461['scope']['resolve']('samplesTex'+'InverseSiz'+'e')['setValue']([(0x29*0x24+0x1027+-0x15ea)/_0xa3b3e0['width'],(0x1*0x16eb+0x9ec+-0x106b*0x2)/_0xa3b3e0['height']]);}for(let _0x4d9d08=-0x213b+-0x20e5+-0x4220*-0x1;_0x4d9d08<(_0x55caeb['cubemap']?-0x29b+0x5*-0x337+0x26*0x7e:-0xb51+0x1ba4+-0x1052);_0x4d9d08++)if(_0xca66ca===null||_0x4d9d08===_0xca66ca){const _0x4455a6=new gt({'colorBuffer':_0x55caeb,'face':_0x4d9d08,'depth':!(-0x42a+0x13bf+-0xf94),'flipY':_0x3f6461['isWebGPU']});_0x25afe7[0xa09+0x1a6*0x8+-0x5*0x4a5]=_0x4d9d08,_0x36951f['setValue'](_0x25afe7),Ar(_0x3f6461,_0x4455a6,_0x587a49,_0x52cd74==null?void(-0x3*-0xd01+-0x2118+-0x5eb):_0x52cd74['rect']),_0x4455a6['destroy']();}return Q['popGpuMark'+'er'](_0x3f6461),!(-0x62f*0x1+0xe78+-0x3*0x2c3);}const Kd=(_0x456903,_0x43a437=-0x1f8b+-0x1*-0x1ee5+0xa6)=>-0x18d3+0x161a+-0x15d*-0x2+Math['floor'](Math['log2'](Math['max'](_0x456903,_0x43a437))),ib=_0x177c17=>_0x177c17['textureHal'+'fFloatRend'+'erable'],rb=_0xfabe02=>_0xfabe02['textureFlo'+'atRenderab'+'le'],ab=_0x5b8d27=>ib(_0x5b8d27)?nt:rb(_0x5b8d27)?Xt:Ne,nb=_0xc0bd6a=>Ne,ob=(_0xc3b4d0,_0x45007a,_0x2e5af5,_0x130ccc)=>new _e(_0xc3b4d0,{'name':'lighting-'+_0x45007a,'cubemap':!(0x1613*-0x1+-0x5f5*-0x5+0x2*-0x3db),'width':_0x45007a,'height':_0x45007a,'format':_0x2e5af5,'type':Qo,'addressU':ue,'addressV':ue,'mipmaps':!(0x638+0x222f+-0x2866)});class Tv{static['generateSk'+'yboxCubema'+'p'](_0x1425dc,_0x23c728){const _0x50eef4=_0x1425dc['device'];Q['pushGpuMar'+'ker'](_0x50eef4,'genSkyboxC'+'ubemap');const _0xd6756=ob(_0x50eef4,_0x23c728||(_0x1425dc['cubemap']?_0x1425dc['width']:_0x1425dc['width']/(-0x2238+0xae5*-0x3+-0x25*-0x1cf)),Ne);return vi(_0x1425dc,_0xd6756,{'numSamples':0x400}),Q['popGpuMark'+'er'](_0x50eef4),_0xd6756;}static['generateLi'+'ghtingSour'+'ce'](_0x38ed65,_0x41ecad){const _0x543088=_0x38ed65['device'];Q['pushGpuMar'+'ker'](_0x543088,'genLightin'+'gSource');const _0x18e635=ab(_0x543088),_0x140c84=(_0x41ecad==null?void(0x109*0xa+0x1b*-0x43+-0x349*0x1):_0x41ecad['target'])||new _e(_0x543088,{'name':'lighting-s'+'ource','cubemap':!(-0xb*-0x14b+0x1b8e+-0x45*0x9b),'width':(_0x41ecad==null?void(-0x1b0e*-0x1+-0x3a*-0x8b+0xea3*-0x4):_0x41ecad['size'])||0x1d*0x6+-0x234d+-0x9*-0x3e7,'height':(_0x41ecad==null?void(0x22+-0x5c*0x7+0x1*0x262):_0x41ecad['size'])||-0x1bd+-0xe0*-0x26+-0x11*0x1d3,'format':_0x18e635,'type':_0x18e635===Ne?Qo:Ds,'addressU':ue,'addressV':ue,'mipmaps':!(0x670*0x5+0x1ad0+-0x3b00)});return vi(_0x38ed65,_0x140c84,{'numSamples':_0x38ed65['mipmaps']?-0xdbe+-0xcea+0x1aa9:-0x2351*0x1+0x216e+-0xb*-0x89}),Q['popGpuMark'+'er'](_0x543088),_0x140c84;}static['generateAt'+'las'](_0x313183,_0x149c02){const _0x5babd9=_0x313183['device'],_0x3b6060=nb();Q['pushGpuMar'+'ker'](_0x5babd9,'genAtlas');const _0x44e8e6=(_0x149c02==null?void(0x1*-0x9f3+-0x5a*0x2b+-0x45*-0x5d):_0x149c02['target'])||new _e(_0x5babd9,{'name':'envAtlas','width':(_0x149c02==null?void(-0x12dd*0x1+0x1683+-0x1d3*0x2):_0x149c02['size'])||0x36*0x67+0x3*0xb29+-0x3535,'height':(_0x149c02==null?void(-0xbb0+0x39*-0x8b+-0x3b*-0xb9):_0x149c02['size'])||-0x1b28+-0x5e6*-0x5+-0x56,'format':_0x3b6060,'type':Qo,'projection':Vm,'addressU':ue,'addressV':ue,'mipmaps':!(0x2*-0xfb5+-0x14dd+0x3448)});Q['pushGpuMar'+'ker'](_0x5babd9,'mipmaps');const _0x35a38c=_0x44e8e6['width']/(-0x19ce+0x500+0x16ce),_0x5a5bee=new re(-0x359+-0xf4f*-0x1+-0xbf6,0x347*-0xb+-0x21d9*-0x1+0x234*0x1,(-0x226e+0x26fe+0x8*-0x52)*_0x35a38c,(0x1b65*0x1+-0x10bb*-0x2+-0x3bdb*0x1)*_0x35a38c),_0x4f1324=Kd(0x2a1+0x24ef+-0x2690)-Kd(0x229c+-0x3*-0x1b7+-0xd3f*0x3);for(let _0x1a39a3=-0xbee+0x4*0x61c+0x641*-0x2;_0x1a39a3<_0x4f1324;++_0x1a39a3)vi(_0x313183,_0x44e8e6,{'numSamples':0x1,'rect':_0x5a5bee,'seamPixels':_0x35a38c}),_0x5a5bee['x']+=_0x5a5bee['w'],_0x5a5bee['y']+=_0x5a5bee['w'],_0x5a5bee['z']=Math['max'](-0x19a0+0x223d+-0x89c,Math['floor'](_0x5a5bee['z']*(0x16e9+-0xba5+-0x1c*0x67+0.5))),_0x5a5bee['w']=Math['max'](0x13*0x175+-0x1c13+0x65,Math['floor'](_0x5a5bee['w']*(0x571+0xe*-0x2+-0x555+0.5)));Q['popGpuMark'+'er'](_0x5babd9),Q['pushGpuMar'+'ker'](_0x5babd9,'reflection'+'s'),_0x5a5bee['set'](-0x130*0xd+-0x1d11*0x1+0x2c81,(0x50+-0x19fd+0x1aad)*_0x35a38c,(-0x1*-0x255b+-0x2079+-0x1*0x3e2)*_0x35a38c,(-0x2*-0x58f+-0xf2a+-0x48c*-0x1)*_0x35a38c);for(let _0x4bfde2=0x1*0x13ed+0xc95*0x1+-0x2081;_0x4bfde2<0x909*0x2+0x95a+-0x1b65;++_0x4bfde2)vi(_0x313183,_0x44e8e6,{'numSamples':(_0x149c02==null?void(0x7*0x71+0x2*0x2c3+-0x89d):_0x149c02['numReflect'+'ionSamples'])||0x8*0x1c8+-0x3f8*-0x5+0x48*-0x6b,'distribution':(_0x149c02==null?void(0x705+0xe7a+-0x157f*0x1):_0x149c02['distributi'+'on'])||'ggx','specularPower':Math['max'](-0x5*-0x132+-0x1*0x1f12+0x1*0x1919,0x262a+-0xab3+-0x21*0x97>>_0x4bfde2*(0x10be+-0x2341*0x1+0x1285)),'rect':_0x5a5bee,'seamPixels':_0x35a38c}),_0x5a5bee['y']+=_0x5a5bee['w'],_0x5a5bee['z']=Math['max'](0x688+0x13d9*0x1+0x8*-0x34c,Math['floor'](_0x5a5bee['z']*(-0x24cf*0x1+-0x1a3d*-0x1+0xa92+0.5))),_0x5a5bee['w']=Math['max'](0xb*-0xb+-0x1163+-0x10d*-0x11,Math['floor'](_0x5a5bee['w']*(-0x51f+0x1*-0x1c85+0x21a4+0.5)));return Q['popGpuMark'+'er'](_0x5babd9),Q['pushGpuMar'+'ker'](_0x5babd9,'ambient'),_0x5a5bee['set']((0x2416+-0x23d8+0x42)*_0x35a38c,(-0x2405+-0x765*0x1+-0x2*-0x1675)*_0x35a38c,(-0x2695+0x216f+0x566)*_0x35a38c,(0x20bd*0x1+-0x1*-0xd6+0x2173*-0x1)*_0x35a38c),vi(_0x313183,_0x44e8e6,{'numSamples':(_0x149c02==null?void(-0x22f+0x2407+0x98*-0x39):_0x149c02['numAmbient'+'Samples'])||0x1ec5*0x1+-0xa2*0x1b+-0xf*0x61,'distribution':'lambert','rect':_0x5a5bee,'seamPixels':_0x35a38c}),Q['popGpuMark'+'er'](_0x5babd9),Q['popGpuMark'+'er'](_0x5babd9),_0x44e8e6;}static['generatePr'+'efilteredA'+'tlas'](_0x4ecc34,_0xcda427){const _0x38f4a3=_0x4ecc34[0x2f*-0x59+0x2*-0x12e0+0xe3*0x3d]['device'],_0x455fbf=_0x4ecc34[-0x31*-0xc7+0x113b+-0x3752]['format'],_0x512aa6=_0x4ecc34[0xb12+-0xb40+0x2e]['type'];Q['pushGpuMar'+'ker'](_0x38f4a3,'genPrefilt'+'eredAtlas');const _0xe8a716=(_0xcda427==null?void(-0x1*0x1a7e+-0x17c1*-0x1+0x2bd):_0xcda427['target'])||new _e(_0x38f4a3,{'name':'envPrefilt'+'eredAtlas','width':(_0xcda427==null?void(0x5e2+-0xfa4+0x9c2):_0xcda427['size'])||0x1*-0x1f37+0x3f*-0x65+0x3a12,'height':(_0xcda427==null?void(-0x11ff+-0x1e21+0x3020):_0xcda427['size'])||0x51*-0x13+0x1*0x8e1+-0xde,'format':_0x455fbf,'type':_0x512aa6,'projection':Vm,'addressU':ue,'addressV':ue,'mipmaps':!(-0x21fd+-0x414+-0x2*-0x1309)});Q['pushGpuMar'+'ker'](_0x38f4a3,'mipmaps');const _0x787cb3=_0xe8a716['width']/(-0x1*-0x268e+0x11*0x3+-0x24c1),_0x4ee11b=new re(0x1*-0x182d+0xc82*-0x2+0x3131,-0x4fb+0x188+0x1*0x373,(-0x7*0x202+0x146*-0x16+0x2c12)*_0x787cb3,(-0x1612+-0x8be+-0x10*-0x1fd)*_0x787cb3),_0x1f2e8d=Kd(-0x4a*0x5e+0x191f+0x40d*0x1);for(let _0x98f45c=-0x5*-0x78a+0x2*-0x1136+-0x346;_0x98f45c<_0x1f2e8d;++_0x98f45c)vi(_0x4ecc34[0x22a0+-0x207d*-0x1+0x3*-0x165f],_0xe8a716,{'numSamples':0x1,'rect':_0x4ee11b,'seamPixels':_0x787cb3}),_0x4ee11b['x']+=_0x4ee11b['w'],_0x4ee11b['y']+=_0x4ee11b['w'],_0x4ee11b['z']=Math['max'](0xd*0x1df+-0xdcb+-0xa87,Math['floor'](_0x4ee11b['z']*(0x2330+-0x1734+-0x5fe*0x2+0.5))),_0x4ee11b['w']=Math['max'](-0x2*0xf3e+0x1241+0xc3c,Math['floor'](_0x4ee11b['w']*(0x4*-0x77e+-0x16eb*0x1+0x3*0x11a1+0.5)));Q['popGpuMark'+'er'](_0x38f4a3),Q['pushGpuMar'+'ker'](_0x38f4a3,'reflection'+'s'),_0x4ee11b['set'](-0xd*0xfd+-0x36f*-0x1+0x96a,(-0x25*0xd+0x1*0x230c+-0x9*0x393)*_0x787cb3,(0x15b9+0x7*0x3ed+0x3034*-0x1)*_0x787cb3,(-0x169*0x4+0x1def+0x1*-0x17cb)*_0x787cb3);for(let _0x20da3b=-0x10ed+0x2536+-0x8*0x289;_0x20da3b<_0x4ecc34['length'];++_0x20da3b)vi(_0x4ecc34[_0x20da3b],_0xe8a716,{'numSamples':0x1,'rect':_0x4ee11b,'seamPixels':_0x787cb3}),_0x4ee11b['y']+=_0x4ee11b['w'],_0x4ee11b['z']=Math['max'](-0x1138+0xa31*0x2+-0x329,Math['floor'](_0x4ee11b['z']*(0x1e4b+-0x25db+0x790+0.5))),_0x4ee11b['w']=Math['max'](0x1ada+0x1b2f+-0x10a*0x34,Math['floor'](_0x4ee11b['w']*(-0x1a41+-0x1*-0xa6f+0xfd2+0.5)));return Q['popGpuMark'+'er'](_0x38f4a3),Q['pushGpuMar'+'ker'](_0x38f4a3,'ambient'),_0x4ee11b['set']((-0x159+0xb0c+-0x933)*_0x787cb3,(-0x3f*-0x33+0xea7+0x2*-0xcda)*_0x787cb3,(-0x21ce+0x39b+0x5*0x617)*_0x787cb3,(-0x5ed+0x211+-0xc*-0x55)*_0x787cb3),_0xcda427!=null&&_0xcda427['legacyAmbi'+'ent']?vi(_0x4ecc34[-0x1c7e+0x177b*0x1+0x508],_0xe8a716,{'numSamples':0x1,'rect':_0x4ee11b,'seamPixels':_0x787cb3}):vi(_0x4ecc34[0x25cd*0x1+0x127d*0x1+-0x384a],_0xe8a716,{'numSamples':(_0xcda427==null?void(-0x5*-0x266+-0xac1*-0x3+-0x1*0x2c41):_0xcda427['numSamples'])||-0x3a*-0x10+0x26d6+-0x2276,'distribution':'lambert','rect':_0x4ee11b,'seamPixels':_0x787cb3}),Q['popGpuMark'+'er'](_0x38f4a3),Q['popGpuMark'+'er'](_0x38f4a3),_0xe8a716;}}const lb={'aoPS':'1.57','clearCoatPS':'1.57','clearCoatGlossPS':'1.60','clearCoatNormalPS':'1.57','diffusePS':'1.57','emissivePS':'1.57','glossPS':'1.60','metalnessPS':'1.57','normalMapPS':'1.57','opacityPS':'1.57','parallaxPS':'1.57','sheenPS':'1.57','sheenGlossPS':'1.60','specularPS':'1.57','specularityFactorPS':'1.57','thicknessPS':'1.57','transmissionPS':'1.57','normalVertexPS':'1.55','aoDiffuseOccPS':'1.62','aoSpecOccPS':'2.6','clusteredLightPS':'1.62','clusteredLightShadowPS':'1.62','combinePS':'1.62','falloffInvSquaredPS':'1.62','falloffLinearPS':'1.62','lightDiffuseLambertPS':'1.62','lightSheenPS':'1.62','lightSpecularAnisoGGXPS':'1.62','lightSpecularBlinnPS':'1.62','ltcPS':'1.62','reflDirPS':'1.62','reflDirAnisoPS':'1.62','reflectionCCPS':'1.62','reflectionCubePS':'2.6','reflectionEnvPS':'2.6','reflectionEnvHQPS':'2.6','reflectionSpherePS':'2.6','reflectionSheenPS':'1.62','shadowCommonPS':'1.62','shadowCoordPS':'1.62','shadowCoordPerspZBufferPS':'1.62','shadowEVSMPS':'1.62','spotPS':'1.62','TBNPS':'1.62','endPS':'1.65','metalnessModulatePS':'1.65','outputAlphaPS':'1.65','outputAlphaPremulPS':'1.65','fresnelSchlickPS':'1.65','iridescenceDiffractionPS':'1.65','lightmapAddPS':'1.65','refractionCubePS':'1.70','refractionDynamicPS':'1.70'},V_={'ambientPrefilteredCubePS':'1.51','ambientPrefilteredCubeLodPS':'1.51','dpAtlasQuadPS':'1.51','genParaboloidPS':'1.51','prefilterCubemapPS':'1.51','reflectionDpAtlasPS':'1.51','reflectionPrefilteredCubePS':'1.51','reflectionPrefilteredCubeLodPS':'1.51','refractionPS':'1.56','combineClearCoatPS':'1.56','combineDiffusePS':'1.56','combineDiffuseSpecularPS':'1.56','combineDiffuseSpecularNoReflPS':'1.56','combineDiffuseSpecularNoReflSeparateAmbientPS':'1.56','combineDiffuseSpecularOldPS':'1.56','lightmapSingleVertPS':'1.55','normalMapFastPS':'1.55','specularAaNonePS':'1.55','specularAaToksvigPS':'1.55','specularAaToksvigFastPS':'1.55','skyboxEnvPS':'2.1','skyboxHDRPS':'2.1','shadowVSM8PS':'2.3','fogExpPS':'2.5','fogExp2PS':'2.5','fogLinearPS':'2.5','fogNonePS':'2.5','gamma1_0PS':'2.5','gamma2_2PS':'2.5','storeEVSMPS':'2.6','shadowEVSMnPS':'2.6','shadowVSM_commonPS':'2.6','shadowStandardPS':'2.6','shadowStandardGL2PS':'2.6','startVS':'2.6','endVS':'2.6','baseVS':'2.6','baseNineSlicedVS':'2.6','viewNormalVS':'2.6','lightmapDirAddPS':'2.6','TBNObjectSpacePS':'2.6','TBNderivativePS':'2.6','startPS':'2.6','outputAlphaOpaque':'2.6','outputAlphaPremul':'2.6','cubeMapProjectBoxPS':'2.6','cubeMapProjectNonePS':'2.6','envMultiplyPS':'2.6','envConstPS':'2.6','aoSpecOccConstPS':'2.6','aoSpecOccConstSimplePS':'2.6','aoSpecOccSimplePS':'2.6','ambientConstantPS':'2.6','ambientEnvPS':'2.6','ambientSHPS':'2.6','shadowSampleCoordPS':'2.6','diffuseDetailMapPS':'2.7','normalDetailMapPS':'2.7','normalXYPS':'2.7','normalXYZPS':'2.7','aoDetailMapPS':'2.7','lightmapDirPS':'2.7','lightmapSinglePS':'2.7','tangentBinormalVS':'2.7'},cb=(_0x137c63,_0x4f4f02)=>{const _0x1cd674=_0x137c63['split']('.')['map'](_0x1ea53e=>parseInt(_0x1ea53e,-0x12f0+-0x65*0x1+-0x3*-0x675)),_0x217d25=_0x4f4f02['split']('.')['map'](_0xf766f3=>parseInt(_0xf766f3,-0x407*-0x3+0x121a+-0x1*0x1e25));return _0x1cd674[0x510+-0xed7+-0x9c7*-0x1]<_0x217d25[0x124+0xa*-0x5a+0x260]||_0x1cd674[-0x12ae+-0x33*0x3e+0x1f08]===_0x217d25[0x281*0x9+-0x1*-0x2dd+0x1966*-0x1]&&_0x1cd674[0x168b+-0x5fb+-0x108f]<_0x217d25[-0x2469*-0x1+0xad6+-0x2f3e*0x1];},hb=(_0x4a3df3,_0xddc10d)=>{for(const _0x5e6aff of _0x4a3df3['keys']())if(V_['hasOwnProp'+'erty'](_0x5e6aff)){const _0x56513a=V_[_0x5e6aff];w['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x5e6aff+('\x27\x20was\x20remo'+'ved\x20in\x20API'+'\x20')+_0x56513a+('\x20and\x20is\x20no'+'\x20longer\x20su'+'pported.'));}else{const _0x4de2d5=lb[_0x5e6aff];_0x4de2d5&&(!_0xddc10d||cb(_0xddc10d,_0x4de2d5))&&w['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x5e6aff+('\x27\x20is\x20API\x20v'+'ersion\x20')+_0x4de2d5+(',\x20but\x20the\x20'+'supplied\x20c'+'hunk\x20is\x20ve'+'rsion\x20')+(_0xddc10d||'undefined')+('.\x20Please\x20u'+'pdate\x20to\x20t'+'he\x20latest\x20'+'API:\x20https'+'://develop'+'er.playcan'+'vas.com/us'+'er-manual/'+'graphics/s'+'hader-chun'+'k-migratio'+'ns/'));}},Zd={'vertex_normal':gs,'vertex_tangent':yi,'vertex_texCoord0':is,'vertex_texCoord1':ba,'vertex_color':Wt,'vertex_boneWeights':gi,'vertex_boneIndices':us};class db{constructor(_0x36dad2,_0x3913b9,_0x5713cf=!(0x1ef4+0x18f+0x4a5*-0x7)){h(this,'varyingsCo'+'de',''),h(this,'device'),h(this,'options'),h(this,'shaderLang'+'uage'),h(this,'vDefines',new Map()),h(this,'fDefines',new Map()),h(this,'includes',new Map()),h(this,'chunks',null),(this['device']=_0x36dad2,this['options']=_0x3913b9);const _0x1bf480=_0x3913b9['shaderChun'+'ks'];if(this['shaderLang'+'uage']=_0x36dad2['isWebGPU']&&_0x5713cf&&(_0x1bf480!=null&&_0x1bf480['useWGSL'])?it:Fe,this['attributes']={'vertex_position':Me},_0x3913b9['userAttrib'+'utes']){for(const [_0x162d05,_0x4498cf]of Object['entries'](_0x3913b9['userAttrib'+'utes']))this['attributes'][_0x4498cf]=_0x162d05;}const _0x1a5efd=Pe['get'](_0x36dad2,this['shaderLang'+'uage']);if(this['chunks']=new Map(_0x1a5efd),_0x1bf480){const _0x40dfc3=this['shaderLang'+'uage']===Fe?_0x1bf480['glsl']:_0x1bf480['wgsl'];w['call'](()=>{hb(_0x40dfc3,_0x1bf480['version']);}),_0x40dfc3['forEach']((_0x1e4352,_0x1f8f5e)=>{for(const _0x6b6e24 in Zd)Zd['hasOwnProp'+'erty'](_0x6b6e24)&&_0x1e4352['indexOf'](_0x6b6e24)>=0x2a3*-0x3+0xba0+-0x3b7&&(this['attributes'][_0x6b6e24]=Zd[_0x6b6e24]);this['chunks']['set'](_0x1f8f5e,_0x1e4352);});}this['shaderPass'+'Info']=Si['get'](this['device'])['getByIndex'](_0x3913b9['pass']),this['shadowPass']=this['shaderPass'+'Info']['isShadow'],this['lighting']=_0x3913b9['lights']['length']>-0x543*-0x6+0x1d7e+0x2*-0x1e88||_0x3913b9['dirLightMa'+'pEnabled']||_0x3913b9['clusteredL'+'ightingEna'+'bled'],this['reflection'+'s']=_0x3913b9['reflection'+'Source']!==vr,this['needsNorma'+'l']=this['lighting']||this['reflection'+'s']||_0x3913b9['useSpecula'+'r']||_0x3913b9['ambientSH']||_0x3913b9['useHeights']||_0x3913b9['enableGGXS'+'pecular']||_0x3913b9['clusteredL'+'ightingEna'+'bled']&&!this['shadowPass']||_0x3913b9['useClearCo'+'atNormals'],this['needsNorma'+'l']=this['needsNorma'+'l']&&!this['shadowPass'],this['needsScene'+'Color']=_0x3913b9['useDynamic'+'Refraction'],this['needsScree'+'nSize']=_0x3913b9['useDynamic'+'Refraction'],this['needsTrans'+'forms']=_0x3913b9['useDynamic'+'Refraction'],this['vshader']=null,this['fshader']=null;}['fDefineSet'](_0x335af3,_0xd772c8,_0x37eab6=''){_0x335af3&&this['fDefines']['set'](_0xd772c8,_0x37eab6);}['generateVe'+'rtexShader'](_0x2dda1f,_0x49c83b,_0x378b18){const {options:_0x5be44d,vDefines:_0x37ce1a,attributes:_0x2f348d}=this,_0x15a835=new Map();if(_0x15a835['set']('vPositionW','vec3'),(_0x5be44d['nineSliced'+'Mode']===Pt||_0x5be44d['nineSliced'+'Mode']===Mt)&&_0x37ce1a['set']('NINESLICED',!(0x711+-0xe*-0x223+-0x24fb)),this['options']['linearDept'+'h']&&(_0x37ce1a['set']('LINEAR_DEP'+'TH',!(-0x15c1+0x10b0+-0x1*-0x511)),_0x15a835['set']('vLinearDep'+'th','float')),this['needsNorma'+'l']&&_0x37ce1a['set']('NORMALS',!(0x261a+0x23de*-0x1+0x8f*-0x4)),this['options']['useInstanc'+'ing']){const _0x48dddd=Pe['get'](this['device'],this['shaderLang'+'uage']);this['chunks']['get']('transformI'+'nstancingV'+'S')===_0x48dddd['get']('transformI'+'nstancingV'+'S')&&(_0x2f348d['instance_l'+'ine1']=Mp,_0x2f348d['instance_l'+'ine2']=Dp,_0x2f348d['instance_l'+'ine3']=Ip,_0x2f348d['instance_l'+'ine4']=Ln);}this['needsNorma'+'l']&&(_0x2f348d['vertex_nor'+'mal']=gs,_0x15a835['set']('vNormalW','vec3'),_0x5be44d['hasTangent'+'s']&&(_0x5be44d['useHeights']||_0x5be44d['useNormals']||_0x5be44d['useClearCo'+'atNormals']||_0x5be44d['enableGGXS'+'pecular'])?(_0x37ce1a['set']('TANGENTS',!(0x1faa+0x128*-0xd+0x10a2*-0x1)),_0x2f348d['vertex_tan'+'gent']=yi,_0x15a835['set']('vTangentW','vec3'),_0x15a835['set']('vBinormalW','vec3')):_0x5be44d['enableGGXS'+'pecular']&&(_0x37ce1a['set']('GGX_SPECUL'+'AR',!(0x6b2+0x1*0x2329+-0x29db)),_0x15a835['set']('vObjectSpa'+'ceUpW','vec3')));const _0x1bdb41=-0x4bd*0x6+-0x187f+0x34ef;for(let _0x34eed0=-0x13*-0x71+-0x1aa3*0x1+-0x92*-0x20;_0x34eed0<_0x1bdb41;_0x34eed0++)_0x2dda1f[_0x34eed0]&&(_0x37ce1a['set']('UV'+_0x34eed0,!(0xd0b+0xc2+-0x1*0xdcd)),_0x2f348d['vertex_tex'+'Coord'+_0x34eed0]='TEXCOORD'+_0x34eed0),_0x49c83b[_0x34eed0]&&(_0x37ce1a['set']('UV'+_0x34eed0+('_UNMODIFIE'+'D'),!(-0x1863+0x2*0x10c0+-0x91d)),_0x15a835['set']('vUv'+_0x34eed0,'vec2'));let _0x36cf0a=0x10b5+0x938+-0x19ed;const _0x20dbf0=new Set();_0x378b18['forEach'](_0x11a75b=>{const {id:_0x43bbf1,uv:_0x5332b4,name:_0x143b40}=_0x11a75b,_0x100971=_0x43bbf1+_0x5332b4*(-0x17eb+0x89e*-0x4+0x3ac7);if(!_0x20dbf0['has'](_0x100971)){_0x20dbf0['add'](_0x100971),_0x15a835['set']('vUV'+_0x5332b4+'_'+_0x43bbf1,'vec2');const _0x56747b='texture_'+_0x143b40+('MapTransfo'+'rm');_0x37ce1a['set']('{TRANSFORM'+'_NAME_'+_0x36cf0a+'}',_0x56747b),_0x37ce1a['set']('{TRANSFORM'+'_UV_'+_0x36cf0a+'}',_0x5332b4),_0x37ce1a['set']('{TRANSFORM'+'_ID_'+_0x36cf0a+'}',_0x43bbf1),_0x36cf0a++;}}),_0x37ce1a['set']('UV_TRANSFO'+'RMS_COUNT',_0x36cf0a),_0x5be44d['vertexColo'+'rs']&&(_0x2f348d['vertex_col'+'or']=Wt,_0x37ce1a['set']('VERTEX_COL'+'OR',!(-0x2b9*-0x4+0x2*-0x7ae+0x478)),_0x15a835['set']('vVertexCol'+'or','vec4')),_0x5be44d['useMsdf']&&_0x5be44d['msdfTextAt'+'tribute']&&(_0x2f348d['vertex_out'+'lineParame'+'ters']=Ko,_0x2f348d['vertex_sha'+'dowParamet'+'ers']=Zo,_0x37ce1a['set']('MSDF',!(0x1*-0x1801+0x8af*0x3+0x2*-0x106))),(_0x5be44d['useMorphPo'+'sition']||_0x5be44d['useMorphNo'+'rmal'])&&(_0x37ce1a['set']('MORPHING',!(0x1*-0x25fd+0x1b1*0xa+0x1513)),_0x5be44d['useMorphTe'+'xtureBased'+'Int']&&_0x37ce1a['set']('MORPHING_I'+'NT',!(0xe30+0xf9f+-0xd*0x24b)),_0x5be44d['useMorphPo'+'sition']&&_0x37ce1a['set']('MORPHING_P'+'OSITION',!(-0x1e3a+-0x265c+0x2*0x224b)),_0x5be44d['useMorphNo'+'rmal']&&_0x37ce1a['set']('MORPHING_N'+'ORMAL',!(0x25f7+-0x22af+-0x348)),_0x2f348d['morph_vert'+'ex_id']=Ln),_0x5be44d['skin']&&(_0x2f348d['vertex_bon'+'eIndices']=us,_0x5be44d['batch']?_0x37ce1a['set']('BATCH',!(0x1f87+-0x1*-0xbe6+-0x2b6d)):(_0x2f348d['vertex_bon'+'eWeights']=gi,_0x37ce1a['set']('SKIN',!(-0x9ad+0x1b5*-0x14+0x2bd1)))),_0x5be44d['useInstanc'+'ing']&&_0x37ce1a['set']('INSTANCING',!(-0x1584+0x43*0x3a+0x656)),_0x5be44d['screenSpac'+'e']&&_0x37ce1a['set']('SCREENSPAC'+'E',!(0x314*0x3+-0x4*-0x5bb+0x18*-0x157)),_0x5be44d['pixelSnap']&&_0x37ce1a['set']('PIXELSNAP',!(0x5e9*-0x2+0x56*0x2f+-0x3f8)),_0x15a835['forEach']((_0x391387,_0x142e4e)=>{this['varyingsCo'+'de']+='#define\x20VA'+'RYING_'+_0x142e4e['toUpperCas'+'e']()+'\x0a',this['varyingsCo'+'de']+=this['shaderLang'+'uage']===it?'varying\x20'+_0x142e4e+':\x20'+Fy['get'](_0x391387)+';\x0a':'varying\x20'+_0x391387+'\x20'+_0x142e4e+';\x0a';}),this['includes']['set']('varyingsVS',this['varyingsCo'+'de']),this['includes']['set']('varyingsPS',this['varyingsCo'+'de']),this['vshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}['_setupLigh'+'tingDefine'+'s'](_0x210ccd,_0x3bfe99){const _0x4e0cce=this['fDefines'],_0x148ac8=this['options'];if(this['fDefines']['set']('LIGHT_COUN'+'T',_0x148ac8['lights']['length']),_0x210ccd&&_0x4e0cce['set']('AREA_LIGHT'+'S',!(-0x1*0xa80+-0x252a+-0x1*-0x2faa)),_0x3bfe99&&this['lighting']&&(_0x4e0cce['set']('LIT_CLUSTE'+'RED_LIGHTS',!(0xd07+-0x1a5*-0x13+-0x2c46)),_0x148ac8['clusteredL'+'ightingCoo'+'kiesEnable'+'d']&&_0x4e0cce['set']('CLUSTER_CO'+'OKIES',!(0x1876+0x16e+-0xcf2*0x2)),_0x148ac8['clusteredL'+'ightingAre'+'aLightsEna'+'bled']&&_0x4e0cce['set']('CLUSTER_AR'+'EALIGHTS',!(-0xa9*-0x27+0x16*-0xf1+-0x509)),_0x148ac8['lightMaskD'+'ynamic']&&_0x4e0cce['set']('CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS',!(0x1619+-0x18d3*0x1+0x2ba)),_0x148ac8['clusteredL'+'ightingSha'+'dowsEnable'+'d']&&!_0x148ac8['noShadow'])){const _0x26e61c=qi['get'](_0x148ac8['clusteredL'+'ightingSha'+'dowType']);_0x4e0cce['set']('CLUSTER_SH'+'ADOWS',!(-0x1*0x2553+0x1*0x71e+-0x1e35*-0x1)),_0x4e0cce['set']('SHADOW_KIN'+'D_'+_0x26e61c['kind'],!(0x147e+0x7*0x292+-0x1*0x267c)),_0x4e0cce['set']('CLUSTER_SH'+'ADOW_TYPE_'+_0x26e61c['kind'],!(0x1bdb+0x3fd+-0x1fd8));}for(let _0x56cbda=0x12*-0x1c1+0x137a*-0x2+0xb1*0x66;_0x56cbda<_0x148ac8['lights']['length'];_0x56cbda++){const _0x6c351e=_0x148ac8['lights'][_0x56cbda],_0x362227=_0x6c351e['_type'];if(_0x3bfe99&&_0x362227!==ve)continue;const _0x566980=_0x210ccd&&_0x6c351e['_shape']?_0x6c351e['_shape']:Ys,_0x555d90=_0x6c351e['_shadowTyp'+'e'],_0x3048bb=_0x6c351e['castShadow'+'s']&&!_0x148ac8['noShadow'],_0x11a04a=qi['get'](_0x555d90);w['assert'](_0x11a04a),_0x4e0cce['set']('LIGHT'+_0x56cbda,!(-0x259f*0x1+0x44f+-0x2150*-0x1)),_0x4e0cce['set']('LIGHT'+_0x56cbda+'TYPE',''+u_[_0x362227]),_0x4e0cce['set']('LIGHT'+_0x56cbda+'SHADOWTYPE',''+_0x11a04a['name']),_0x4e0cce['set']('LIGHT'+_0x56cbda+'SHAPE',''+Fw[_0x566980]),_0x4e0cce['set']('LIGHT'+_0x56cbda+'FALLOFF',''+Nw[_0x6c351e['_falloffMo'+'de']]),_0x6c351e['affectSpec'+'ularity']&&_0x4e0cce['set']('LIGHT'+_0x56cbda+('AFFECT_SPE'+'CULARITY'),!(0x1633*-0x1+-0x2b*-0x20+0x10d3)),_0x6c351e['_cookie']&&(_0x362227===Ze&&!_0x6c351e['_cookie']['_cubemap']||_0x362227===Ke&&_0x6c351e['_cookie']['_cubemap'])&&(_0x4e0cce['set']('LIGHT'+_0x56cbda+'COOKIE',!(-0x257*-0xb+-0x1fce+-0x611*-0x1)),_0x4e0cce['set']('{LIGHT'+_0x56cbda+('COOKIE_CHA'+'NNEL}'),_0x6c351e['_cookieCha'+'nnel']),_0x362227===Ze&&(_0x6c351e['_cookieTra'+'nsform']&&_0x4e0cce['set']('LIGHT'+_0x56cbda+('COOKIE_TRA'+'NSFORM'),!(0x2108+0xc*-0xb1+-0x18bc)),_0x6c351e['_cookieFal'+'loff']&&_0x4e0cce['set']('LIGHT'+_0x56cbda+('COOKIE_FAL'+'LOFF'),!(-0xc4c+0x1a3d+-0x53*0x2b)))),_0x3048bb&&(_0x4e0cce['set']('LIGHT'+_0x56cbda+'CASTSHADOW',!(-0x8d*0x16+-0x20cf+-0xd9*-0x35)),_0x11a04a['pcf']&&_0x4e0cce['set']('LIGHT'+_0x56cbda+'SHADOW_PCF',!(-0x4*0x332+-0x185*-0x6+0x3aa*0x1)),_0x6c351e['_normalOff'+'setBias']&&!_0x6c351e['_isVsm']&&_0x4e0cce['set']('LIGHT'+_0x56cbda+('_SHADOW_SA'+'MPLE_NORMA'+'L_OFFSET'),!(0x2d*-0x2a+0x24e2+-0x1d80)),_0x362227===ve&&(_0x4e0cce['set']('LIGHT'+_0x56cbda+('_SHADOW_SA'+'MPLE_ORTHO'),!(0x3*0x34a+0x251d*-0x1+0x1b3f)),_0x6c351e['cascadeBle'+'nd']>0x1546+-0x2362+0xe1c&&_0x4e0cce['set']('LIGHT'+_0x56cbda+('_SHADOW_CA'+'SCADE_BLEN'+'D'),!(0x10c*-0x6+0xb6*0xf+-0x462)),_0x6c351e['numCascade'+'s']>0x2548+0x177*-0x1a+0xcf&&_0x4e0cce['set']('LIGHT'+_0x56cbda+('_SHADOW_CA'+'SCADES'),!(-0xf*0xad+-0x32*-0xb2+-0x18a1))),(_0x11a04a['pcf']||_0x11a04a['pcss']||this['device']['isWebGPU'])&&_0x4e0cce['set']('LIGHT'+_0x56cbda+('_SHADOW_SA'+'MPLE_SOURC'+'E_ZBUFFER'),!(0x2573+-0x5e*-0x3b+-0x25*0x199)),_0x362227===Ke&&_0x4e0cce['set']('LIGHT'+_0x56cbda+('_SHADOW_SA'+'MPLE_POINT'),!(-0x8bf+0x7e2*-0x4+0x2847))),_0x3048bb&&(_0x4e0cce['set']('SHADOW_KIN'+'D_'+_0x11a04a['kind'],!(0x1*0x2+0x7d1+0x7d3*-0x1)),_0x362227===ve&&_0x4e0cce['set']('SHADOW_DIR'+'ECTIONAL',!(-0x259*-0x2+0x2445+-0x28f7)));}}['prepareFor'+'wardPass'](_0x3294a8){const {options:_0x28f619}=this,_0x216cab=_0x28f619['clusteredL'+'ightingEna'+'bled']&&_0x28f619['clusteredL'+'ightingAre'+'aLightsEna'+'bled']||_0x28f619['lights']['some'](_0x4a1e51=>_0x4a1e51['_shape']&&_0x4a1e51['_shape']!==Ys),_0x4def7b=!_0x28f619['lightMapEn'+'abled']||_0x28f619['lightMapWi'+'thoutAmbie'+'nt'],_0x2b5aac=this['needsNorma'+'l']&&(_0x28f619['useNormals']||_0x28f619['useClearCo'+'atNormals']||_0x28f619['enableGGXS'+'pecular']&&!_0x28f619['useHeights']);_0x28f619['useSpecula'+'r']&&(this['fDefineSet'](!(-0xa32+-0x57f*-0x6+-0x16c8),'LIT_SPECUL'+'AR'),this['fDefineSet'](this['reflection'+'s'],'LIT_REFLEC'+'TIONS'),this['fDefineSet'](_0x28f619['useClearCo'+'at'],'LIT_CLEARC'+'OAT'),this['fDefineSet'](_0x28f619['fresnelMod'+'el']>-0x1729+0x112a+0x5ff,'LIT_SPECUL'+'AR_FRESNEL'),this['fDefineSet'](_0x28f619['useSheen'],'LIT_SHEEN'),this['fDefineSet'](_0x28f619['useIridesc'+'ence'],'LIT_IRIDES'+'CENCE')),this['fDefineSet'](this['lighting']&&_0x28f619['useSpecula'+'r']||this['reflection'+'s'],'LIT_SPECUL'+'AR_OR_REFL'+'ECTION'),this['fDefineSet'](this['needsScene'+'Color'],'LIT_SCENE_'+'COLOR'),this['fDefineSet'](this['needsScree'+'nSize'],'LIT_SCREEN'+'_SIZE'),this['fDefineSet'](this['needsTrans'+'forms'],'LIT_TRANSF'+'ORMS'),this['fDefineSet'](this['needsNorma'+'l'],'LIT_NEEDS_'+'NORMAL'),this['fDefineSet'](this['lighting'],'LIT_LIGHTI'+'NG'),this['fDefineSet'](_0x28f619['useMetalne'+'ss'],'LIT_METALN'+'ESS'),this['fDefineSet'](_0x28f619['enableGGXS'+'pecular'],'LIT_GGX_SP'+'ECULAR'),this['fDefineSet'](_0x28f619['useSpecula'+'rityFactor'],'LIT_SPECUL'+'ARITY_FACT'+'OR'),this['fDefineSet'](_0x28f619['useCubeMap'+'Rotation'],'CUBEMAP_RO'+'TATION'),this['fDefineSet'](_0x28f619['occludeSpe'+'cularFloat'],'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT'),this['fDefineSet'](_0x28f619['separateAm'+'bient'],'LIT_SEPARA'+'TE_AMBIENT'),this['fDefineSet'](_0x28f619['twoSidedLi'+'ghting'],'LIT_TWO_SI'+'DED_LIGHTI'+'NG'),this['fDefineSet'](_0x28f619['lightMapEn'+'abled'],'LIT_LIGHTM'+'AP'),this['fDefineSet'](_0x28f619['dirLightMa'+'pEnabled'],'LIT_DIR_LI'+'GHTMAP'),this['fDefineSet'](_0x28f619['skyboxInte'+'nsity']>0xda*0xb+-0x54*-0x5e+-0x2836,'LIT_SKYBOX'+'_INTENSITY'),this['fDefineSet'](_0x28f619['clusteredL'+'ightingSha'+'dowsEnable'+'d'],'LIT_CLUSTE'+'RED_SHADOW'+'S'),this['fDefineSet'](_0x28f619['clusteredL'+'ightingAre'+'aLightsEna'+'bled'],'LIT_CLUSTE'+'RED_AREA_L'+'IGHTS'),this['fDefineSet'](_0x2b5aac,'LIT_TBN'),this['fDefineSet'](_0x4def7b,'LIT_ADD_AM'+'BIENT'),this['fDefineSet'](_0x28f619['hasTangent'+'s'],'LIT_TANGEN'+'TS'),this['fDefineSet'](_0x28f619['useNormals'],'LIT_USE_NO'+'RMALS'),this['fDefineSet'](_0x28f619['useClearCo'+'atNormals'],'LIT_USE_CL'+'EARCOAT_NO'+'RMALS'),this['fDefineSet'](_0x28f619['useRefract'+'ion'],'LIT_REFRAC'+'TION'),this['fDefineSet'](_0x28f619['useDynamic'+'Refraction'],'LIT_DYNAMI'+'C_REFRACTI'+'ON'),this['fDefineSet'](_0x28f619['dispersion'],'LIT_DISPER'+'SION'),this['fDefineSet'](_0x28f619['useHeights'],'LIT_HEIGHT'+'S'),this['fDefineSet'](_0x28f619['opacityFad'+'esSpecular'],'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR'),this['fDefineSet'](_0x28f619['alphaToCov'+'erage'],'LIT_ALPHA_'+'TO_COVERAG'+'E'),this['fDefineSet'](_0x28f619['alphaTest'],'LIT_ALPHA_'+'TEST'),this['fDefineSet'](_0x28f619['useMsdf'],'LIT_MSDF'),this['fDefineSet'](_0x28f619['ssao'],'LIT_SSAO'),this['fDefineSet'](_0x28f619['useAo'],'LIT_AO'),this['fDefineSet'](_0x28f619['occludeDir'+'ect'],'LIT_OCCLUD'+'E_DIRECT'),this['fDefineSet'](_0x28f619['msdfTextAt'+'tribute'],'LIT_MSDF_T'+'EXT_ATTRIB'+'UTE'),this['fDefineSet'](_0x28f619['diffuseMap'+'Enabled'],'LIT_DIFFUS'+'E_MAP'),this['fDefineSet'](_0x28f619['shadowCatc'+'her'],'LIT_SHADOW'+'_CATCHER'),this['fDefineSet'](!(-0xa*0x34b+0x1dcb+-0x49*-0xb),'LIT_FRESNE'+'L_MODEL',Rw[_0x28f619['fresnelMod'+'el']]),this['fDefineSet'](!(0x155+0xc02+-0xd57),'LIT_NONE_S'+'LICE_MODE',qw[_0x28f619['nineSliced'+'Mode']]),this['fDefineSet'](!(0x417*0x5+-0x1a*-0xf1+-0x2ced),'LIT_BLEND_'+'TYPE',Yy[_0x28f619['blendType']]),this['fDefineSet'](!(-0x1e50+0x6e5+-0x4af*-0x5),'LIT_CUBEMA'+'P_PROJECTI'+'ON',Gw[_0x28f619['cubeMapPro'+'jection']]),this['fDefineSet'](!(-0x2f9*-0x4+-0x12bd+0x6d9*0x1),'LIT_OCCLUD'+'E_SPECULAR',Ww[_0x28f619['occludeSpe'+'cular']]),this['fDefineSet'](!(-0xe0*0x25+-0x4*0x652+-0x99c*-0x6),'LIT_REFLEC'+'TION_SOURC'+'E',$w[_0x28f619['reflection'+'Source']]),this['fDefineSet'](!(-0x608*0x1+0x33*0x51+0x1*-0xa1b),'LIT_AMBIEN'+'T_SOURCE',Xw[_0x28f619['ambientSou'+'rce']]),this['fDefineSet'](!(-0x7f+-0xa21*-0x1+-0x9a2),'{lightingU'+'v}',_0x3294a8??''),this['fDefineSet'](!(0x53*0x35+0x1027+-0x1f6*0x11),'{reflectio'+'nDecode}',Tr['decodeFunc'](_0x28f619['reflection'+'Encoding'])),this['fDefineSet'](!(-0x2506+0x38*-0x8b+0x3bf*0x12),'{reflectio'+'nCubemapDe'+'code}',Tr['decodeFunc'](_0x28f619['reflection'+'CubemapEnc'+'oding'])),this['fDefineSet'](!(0x1de5+-0xd3+-0x1d12),'{ambientDe'+'code}',Tr['decodeFunc'](_0x28f619['ambientEnc'+'oding'])),this['_setupLigh'+'tingDefine'+'s'](_0x216cab,_0x28f619['clusteredL'+'ightingEna'+'bled']);}['prepareSha'+'dowPass'](){const {options:_0x294663}=this,_0x47cbb2=this['shaderPass'+'Info']['lightType'],_0x7feed9=this['shaderPass'+'Info']['shadowType'],_0x4e9b5b=qi['get'](_0x7feed9);w['assert'](_0x4e9b5b);const _0x59b344=_0x47cbb2===ve||!_0x4e9b5b['vsm']&&_0x47cbb2===Ze;this['fDefineSet'](_0x59b344,'PERSPECTIV'+'E_DEPTH'),this['fDefineSet'](!(-0xb*-0x28a+0x22dd+-0xc8f*0x5),'LIGHT_TYPE',''+u_[_0x47cbb2]),this['fDefineSet'](!(-0x1922+-0x987*-0x2+0x614),'SHADOW_TYP'+'E',''+_0x4e9b5b['name']),this['fDefineSet'](_0x294663['alphaTest'],'LIT_ALPHA_'+'TEST');}['generateFr'+'agmentShad'+'er'](_0x16c2d9,_0xfcf137,_0x62447b){const _0x4c29bb=this['options'];this['includes']['set']('frontendDe'+'clPS',_0x16c2d9??''),this['includes']['set']('frontendCo'+'dePS',_0xfcf137??''),_0x4c29bb['pass']===Zn||_0x4c29bb['pass']===Rl||(this['shadowPass']?this['prepareSha'+'dowPass']():this['prepareFor'+'wardPass'](_0x62447b)),this['fshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}}class wv{constructor(){h(this,'hasTangent'+'s',!(0x1*0x2072+-0x1ebe+-0x1b3)),h(this,'shaderChun'+'ks',null),h(this,'pass',-0x9*0x43+0x1ce3+0x4*-0x6a2),h(this,'alphaTest',!(0xe*-0xb3+0x1d29+-0x135e)),h(this,'blendType',Cs),h(this,'separateAm'+'bient',!(-0x2396+-0x1072*0x2+0x447b)),h(this,'screenSpac'+'e',!(0x323*-0xa+0x1498+0x1f*0x59)),h(this,'skin',!(0x18c*-0xa+0xdcf+0x1aa)),h(this,'batch',!(-0x4a+0x1*-0x91b+0x966)),h(this,'useInstanc'+'ing',!(-0x7*0x1c6+-0x1c93+0x21*0x13e)),h(this,'useMorphPo'+'sition',!(0x8b1+0xad*0x10+-0x1380)),h(this,'useMorphNo'+'rmal',!(0x236b+-0x1cf0+-0x67a)),h(this,'useMorphTe'+'xtureBased'+'Int',!(0xaf4*-0x1+-0x16da+0x21cf)),h(this,'nineSliced'+'Mode',0x18f2+0x10*0x246+-0x3d52),h(this,'clusteredL'+'ightingEna'+'bled',!(-0x506*0x1+0x1961+-0x145b)),h(this,'clusteredL'+'ightingCoo'+'kiesEnable'+'d',!(0xa89*-0x1+0xa32+0x58)),h(this,'clusteredL'+'ightingSha'+'dowsEnable'+'d',!(-0x3e*-0x18+0x1e97+-0x2466)),h(this,'clusteredL'+'ightingSha'+'dowType',-0x7a7*-0x2+0xb1*0x21+0x261f*-0x1),h(this,'clusteredL'+'ightingAre'+'aLightsEna'+'bled',!(0x1a49+-0x484*-0x1+-0x1ecc)),h(this,'vertexColo'+'rs',!(0x36b*0x7+-0x1eab*-0x1+-0x145*0x2b)),h(this,'lightMapEn'+'abled',!(0x141+0xb8a+0x1*-0xcca)),h(this,'dirLightMa'+'pEnabled',!(-0x240f+-0x1513+0x3923)),h(this,'useHeights',!(-0x22b0+-0x7*-0xf9+-0x2*-0xdf1)),h(this,'useNormals',!(0x739+-0x23e9+0x1cb1)),h(this,'useClearCo'+'atNormals',!(-0xeaf+0x2*-0x68e+0x1bcc)),h(this,'useAo',!(0x5b3*0x1+-0x2*0xf74+-0x1cd*-0xe)),h(this,'diffuseMap'+'Enabled',!(0x779*0x4+0x4ff+-0x26*0xeb)),h(this,'pixelSnap',!(0x1d0f+-0x2*0xe96+0x1e)),h(this,'ambientSH',!(0x19a4+0x1*-0x15e9+-0x9*0x6a)),h(this,'ssao',!(0x85e+0x2210+-0x1*0x2a6d)),h(this,'twoSidedLi'+'ghting',!(0x2d8+0xabe+-0xd95)),h(this,'occludeDir'+'ect',!(0x24a2+-0xac1+-0x30*0x8a)),h(this,'occludeSpe'+'cular',-0x1025+0xf20+0x105),h(this,'occludeSpe'+'cularFloat',!(0x2*0x7a9+0x1*-0x3c0+-0xb91)),h(this,'useMsdf',!(0x1eac+0x6a*-0x13+-0x16cd)),h(this,'msdfTextAt'+'tribute',!(0x2674+-0x5a1+-0x20d2)),h(this,'alphaToCov'+'erage',!(0x1a32+0x1*-0x20c6+0x5*0x151)),h(this,'opacityFad'+'esSpecular',!(-0xb*0xfd+0x10b8+0x4*-0x176)),h(this,'opacityDit'+'her',Sa),h(this,'opacitySha'+'dowDither',Sa),h(this,'cubeMapPro'+'jection',-0x68*-0xa+0x26d1*-0x1+0xd9*0x29),h(this,'useSpecula'+'r',!(0x947+0x5*0x13f+-0x31*0x51)),h(this,'useSpecula'+'rityFactor',!(0x1*0x16fe+-0x18af*-0x1+-0x2fac)),h(this,'enableGGXS'+'pecular',!(-0x23*0xe3+0xd67*-0x1+0x16f*0x1f)),h(this,'fresnelMod'+'el',-0x1ab3+0x254f+-0x1c*0x61),h(this,'useRefract'+'ion',!(0x717+-0x139c+-0x7*-0x1ca)),h(this,'useClearCo'+'at',!(-0x65e+-0x2*0x1093+0x2785)),h(this,'useSheen',!(-0x160f+-0xb5f*-0x3+-0xc0d)),h(this,'useIridesc'+'ence',!(-0xc49+0xbf*-0xf+0x177b)),h(this,'useMetalne'+'ss',!(-0x25ee+-0x6*0xdd+0x2b1d*0x1)),h(this,'useDynamic'+'Refraction',!(0xc*0xbf+0x329*0x1+0x1f*-0x64)),h(this,'dispersion',!(-0x2*-0x886+0xe4e*-0x1+0x1*-0x2bd)),h(this,'fog',Kn),h(this,'gamma',Ll),h(this,'toneMap',-(0x67e*-0x3+0x71*0x31+0x37*-0xa)),h(this,'reflection'+'Source',vr),h(this,'reflection'+'Encoding',null),h(this,'reflection'+'CubemapEnc'+'oding',null),h(this,'ambientSou'+'rce','constant'),h(this,'ambientEnc'+'oding',null),h(this,'skyboxInte'+'nsity',0xb2b+-0x14*-0x12d+-0x22ae),h(this,'useCubeMap'+'Rotation',!(-0x1*-0x83+0x23d5+0x1*-0x2457)),h(this,'lightMapWi'+'thoutAmbie'+'nt',!(-0x3*0xa7+-0x22db+-0x75d*-0x5)),h(this,'lights',[]),h(this,'noShadow',!(0x18a5+0x114e+-0x29f2)),h(this,'lightMaskD'+'ynamic',-0x1c73+0x5*-0x466+0x3271),h(this,'userAttrib'+'utes',{}),h(this,'linearDept'+'h',!(-0x4*-0x521+0x13*0x92+0x645*-0x5)),h(this,'shadowCatc'+'her',!(-0x10de+-0x17*0x80+0x1c5f));}}class dl{constructor(){h(this,'defines',new Map()),h(this,'forceUv1',!(-0xc*0x163+0x1*-0x1ad5+0x9f*0x46)),h(this,'specularTi'+'nt',!(0xf79+0x1043+-0x1fbb)),h(this,'metalnessT'+'int',!(-0x16d8+0x2f5*-0x2+-0x1cc3*-0x1)),h(this,'glossTint',!(0x11b8+-0x2*0x1159+0x10fb)),h(this,'emissiveEn'+'coding','linear'),h(this,'lightMapEn'+'coding','linear'),h(this,'packedNorm'+'al',!(0x727*-0x1+0x1a0a+-0x12e2)),h(this,'normalDeta'+'ilPackedNo'+'rmal',!(-0xe*-0x2b+-0x8*-0x266+-0x1589)),h(this,'clearCoatP'+'ackedNorma'+'l',!(0x2675+-0x11d3+0x1*-0x14a1)),h(this,'glossInver'+'t',!(0x4b*0x51+-0x115f*-0x1+0x5df*-0x7)),h(this,'sheenGloss'+'Invert',!(-0x522*-0x2+0xcd1*0x1+-0x1714)),h(this,'clearCoatG'+'lossInvert',!(-0x1*0x2537+-0x1*-0x16c4+0x39d*0x4)),h(this,'useAO',!(0x50f+0x1f28+-0x2436)),h(this,'litOptions',new wv());}get['pass'](){return this['litOptions']['pass'];}}const Ev={'generateKey'(_0x391a1c){return'lit'+Object['keys'](_0x391a1c)['sort']()['map'](_0x11c893=>{var _0x8d36f7;return _0x11c893==='shaderChun'+'ks'?((_0x8d36f7=_0x391a1c['shaderChun'+'ks'])==null?void(0x115b+-0x40e+0xf*-0xe3):_0x8d36f7['key'])??'':_0x11c893==='lights'?Ev['generateLi'+'ghtsKey'](_0x391a1c):_0x11c893+_0x391a1c[_0x11c893];})['join']('\x0a');},'generateLightsKey'(_0x157ab2){return'lights:'+_0x157ab2['lights']['map'](_0xf70026=>!_0x157ab2['clusteredL'+'ightingEna'+'bled']||_0xf70026['_type']===ve?_0xf70026['key']+',':'')['join']('');}},bn=[],Qd=_0x513e17=>Object['keys'](_0x513e17)['filter'](_0x585624=>_0x585624!=='litOptions')['sort']();class fb extends ya{constructor(){super(...arguments),h(this,'optionsCon'+'text',new dl()),h(this,'optionsCon'+'textMin',new dl());}['generateKe'+'y'](_0x116ece){let _0x1cea1a;return _0x116ece===this['optionsCon'+'textMin']?(this['propsMin']||(this['propsMin']=Qd(_0x116ece)),_0x1cea1a=this['propsMin']):_0x116ece===this['optionsCon'+'text']?(this['props']||(this['props']=Qd(_0x116ece)),_0x1cea1a=this['props']):_0x1cea1a=Qd(_0x116ece),'standard:\x0a'+ya['definesHas'+'h'](_0x116ece['defines'])+'\x0a'+_0x1cea1a['map'](_0x2b474f=>_0x2b474f+_0x116ece[_0x2b474f])['join']('\x0a')+Ev['generateKe'+'y'](_0x116ece['litOptions']);}['_getUvSour'+'ceExpressi'+'on'](_0x5bd18e,_0x24b3dd,_0x3de67b){const _0xf982db=_0x3de67b[_0x5bd18e],_0x5a7a91=_0x3de67b[_0x24b3dd],_0x56efe8=_0x3de67b['litOptions']['pass']===Aa;let _0xde787b;return _0x56efe8&&_0x3de67b['litOptions']['nineSliced'+'Mode']===Pt||_0x56efe8&&_0x3de67b['litOptions']['nineSliced'+'Mode']===Mt?_0xde787b='nineSliced'+'Uv':(_0xf982db===-0x746+0x151a+0x162*-0xa?_0xde787b='vUv'+_0x5a7a91:_0xde787b='vUV'+_0x5a7a91+'_'+_0xf982db,_0x3de67b['heightMap']&&_0x5bd18e!=='heightMapT'+'ransform'&&(_0xde787b+='\x20+\x20dUvOffs'+'et')),_0xde787b;}['_validateM'+'apChunk'](_0x2913c5,_0x477f36,_0x1a1cac){w['call'](()=>{const _0x4bfed6=_0x1a1cac['get'](_0x477f36)['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1'),_0x274799=[],_0x5d8b55=(_0x416ef4,_0x2a92ff)=>{_0x4bfed6['includes'](_0x416ef4)&&_0x274799['push']('\x20\x20'+_0x416ef4+'\x20->\x20'+_0x2a92ff);};[['$UV','{STD_'+_0x2913c5+('_TEXTURE_U'+'V}')],['$CH','{STD_'+_0x2913c5+('_TEXTURE_C'+'HANNEL}')],['$SAMPLER','{STD_'+_0x2913c5+('_TEXTURE_N'+'AME}')],['$DECODE','{STD_'+_0x2913c5+('_TEXTURE_D'+'ECODE}')],['$VC','{STD_'+_0x2913c5+('_VERTEX_CH'+'ANNEL}')],['$DETAILMOD'+'E','{STD_'+_0x2913c5+('_DETAILMOD'+'E}')],['unpackNorm'+'al(','{STD_'+_0x2913c5+('_TEXTURE_D'+'ECODE}(')]]['forEach'](([_0x535499,_0x2a6567])=>_0x5d8b55(_0x535499,_0x2a6567)),[['MAPFLOAT','STD_'+_0x2913c5+'_CONSTANT'],['MAPCOLOR','STD_'+_0x2913c5+'_CONSTANT'],['MAPVERTEX','STD_'+_0x2913c5+'_VERTEX'],['MAPTEXTURE','STD_'+_0x2913c5+'_TEXTURE'],['MAPINVERT','STD_'+_0x2913c5+'_INVERT']]['forEach'](([_0xaaa6eb,_0x1ec0e6])=>_0x5d8b55(_0xaaa6eb,_0x1ec0e6)),_0x4bfed6['includes']('$texture2D'+'SAMPLE')&&_0x5d8b55('$texture2D'+'SAMPLE','(Macro\x20no\x20'+'longer\x20sup'+'ported\x20-\x20r'+'emove/refa'+'ctor)'),_0x274799['length']>-0x213*-0xe+0x15ea+-0x32f4&&w['errorOnce']('Shader\x20chu'+'nk\x20'+_0x477f36+('\x20is\x20in\x20no\x20'+'longer\x20com'+'patible\x20fo'+'rmat.\x20Plea'+'se\x20make\x20th'+'ese\x20replac'+'ements\x20to\x20'+'bring\x20it\x20t'+'o\x20the\x20curr'+'ent\x20versio'+'n:\x0a')+_0x274799['join']('\x0a'),{'code':_0x4bfed6});});}['_addMapDef'+'ines'](_0x153c8b,_0x37c93c,_0x4d7011,_0x462e72,_0x396b8d,_0x5a3478,_0x29e8c0=null){const _0x2bcd96=_0x37c93c+'Map',_0x1d86bf=_0x37c93c['toUpperCas'+'e'](),_0x2f1bf4=_0x2bcd96+'Uv',_0x53bd17=_0x2bcd96+'Identifier',_0x3f319e=_0x2bcd96+'Transform',_0x1cc166=_0x2bcd96+'Channel',_0x3533c9=_0x37c93c+('VertexColo'+'rChannel'),_0x125014=_0x37c93c+'Tint',_0x417e36=_0x37c93c+('VertexColo'+'r'),_0x4cd638=_0x37c93c+'Mode',_0x3f8c56=_0x37c93c+'Invert',_0x161f2e=_0x462e72[_0x125014],_0x2ceff0=_0x462e72[_0x417e36],_0x3d49dc=_0x462e72[_0x2bcd96],_0x5913de=_0x462e72[_0x53bd17],_0x38a623=_0x462e72[_0x4cd638],_0x2fa818=_0x396b8d['get'](_0x4d7011);if(w['assert'](_0x2fa818,'Shader\x20chu'+'nk\x20'+_0x4d7011+('\x20not\x20found'+'.')),w['call'](()=>{_0x2fa818&&this['_validateM'+'apChunk'](_0x1d86bf,_0x4d7011,_0x396b8d);}),_0x3d49dc){_0x153c8b['set']('STD_'+_0x1d86bf+'_TEXTURE','');const _0x3c2e7e=this['_getUvSour'+'ceExpressi'+'on'](_0x3f319e,_0x2f1bf4,_0x462e72);_0x153c8b['set']('{STD_'+_0x1d86bf+('_TEXTURE_U'+'V}'),_0x3c2e7e),_0x153c8b['set']('{STD_'+_0x1d86bf+('_TEXTURE_C'+'HANNEL}'),_0x462e72[_0x1cc166]);const _0x48d519='{STD_'+_0x1d86bf+('_TEXTURE_N'+'AME}');if(_0x2fa818['includes'](_0x48d519)){let _0x3417e2='texture_'+_0x2bcd96;const _0x4849c6=_0x5a3478[_0x5913de];_0x4849c6?_0x3417e2=_0x4849c6:(_0x5a3478[_0x5913de]=_0x3417e2,_0x153c8b['set']('STD_'+_0x1d86bf+('_TEXTURE_A'+'LLOCATE'),'')),_0x153c8b['set'](_0x48d519,_0x3417e2);}if(_0x29e8c0){const _0x5a696e=_0x462e72[_0x1cc166]==='aaa'?'passThroug'+'h':Tr['decodeFunc'](_0x29e8c0);_0x153c8b['set']('{STD_'+_0x1d86bf+('_TEXTURE_D'+'ECODE}'),_0x5a696e);}}_0x2ceff0&&(_0x153c8b['set']('STD_'+_0x1d86bf+'_VERTEX',''),_0x153c8b['set']('{STD_'+_0x1d86bf+('_VERTEX_CH'+'ANNEL}'),_0x462e72[_0x3533c9])),_0x38a623&&_0x153c8b['set']('{STD_'+_0x1d86bf+('_DETAILMOD'+'E}'),_0x38a623),_0x161f2e&&_0x153c8b['set']('STD_'+_0x1d86bf+'_CONSTANT',''),_0x462e72[_0x3f8c56]&&_0x153c8b['set']('STD_'+_0x1d86bf+'_INVERT','');}['_correctCh'+'annel'](_0x2a24db,_0x1adb02,_0x418bce){if(_0x418bce[_0x2a24db]>-0x1191*-0x1+0xb56+-0x1ce7){if(_0x418bce[_0x2a24db]<_0x1adb02['length'])return _0x1adb02['substring'](-0x1d*0x122+-0x3*0x4e9+-0x2f95*-0x1,_0x418bce[_0x2a24db]);if(_0x418bce[_0x2a24db]>_0x1adb02['length']){let _0x5222aa=_0x1adb02;const _0x156269=_0x5222aa['charAt'](_0x5222aa['length']-(0x285*0xc+-0xde3+0x1058*-0x1)),_0x77851c=_0x418bce[_0x2a24db]-_0x5222aa['length'];for(let _0x14e329=0x1b75+-0x1*-0xd+-0x1b82;_0x14e329<_0x77851c;_0x14e329++)_0x5222aa+=_0x156269;return _0x5222aa;}return _0x1adb02;}}['createVert'+'exShader'](_0x157406,_0x4caa6c){const _0x33e624=[],_0x549bf5=[],_0x1e7b65=[];for(const _0x22976b in bn){const _0x1908cb=_0x22976b+'Map';if(_0x4caa6c[_0x22976b+('VertexColo'+'r')]){const _0x317155=_0x22976b+('VertexColo'+'rChannel');_0x4caa6c[_0x317155]=this['_correctCh'+'annel'](_0x22976b,_0x4caa6c[_0x317155],bn);}if(_0x4caa6c[_0x1908cb]){const _0x2618b9=_0x1908cb+'Channel',_0x4da630=_0x1908cb+'Transform',_0x4f10f2=_0x1908cb+'Uv';_0x4caa6c[_0x4f10f2]=Math['min'](_0x4caa6c[_0x4f10f2],0x1287+-0x30*0x71+0x2aa),_0x4caa6c[_0x2618b9]=this['_correctCh'+'annel'](_0x22976b,_0x4caa6c[_0x2618b9],bn);const _0x3359b3=_0x4caa6c[_0x4f10f2];_0x33e624[_0x3359b3]=!(-0xd4b+-0x57*0x70+0x335b),_0x549bf5[_0x3359b3]=_0x549bf5[_0x3359b3]||_0x4caa6c[_0x1908cb]&&!_0x4caa6c[_0x4da630],_0x4caa6c[_0x4da630]&&_0x1e7b65['push']({'name':_0x22976b,'id':_0x4caa6c[_0x4da630],'uv':_0x4caa6c[_0x4f10f2]});}}_0x4caa6c['forceUv1']&&(_0x33e624[-0x1*-0x1439+-0x1*0xa8e+-0x4d5*0x2]=!(-0x179*0x2+0x1*0x20ce+-0xc*0x27d),_0x549bf5[0x25ae+-0x16b6+-0x1*0xef7]=_0x549bf5[-0x1*-0x1627+-0xe95*-0x1+-0x24bb*0x1]!==void(-0x3*0x3+-0x1ce8+0x1f*0xef)?_0x549bf5[0x652+-0xa*-0x89+-0xbab]:!(0x1*0xe5+0x5*0x163+0x6*-0x14e)),_0x157406['generateVe'+'rtexShader'](_0x33e624,_0x549bf5,_0x1e7b65);}['prepareFra'+'gmentDefin'+'es'](_0x26e0a3,_0x11d410,_0x11097b){const _0x58cb72=(_0x1349ef,_0xbad3ff,_0x4dc7bf='')=>{_0x1349ef&&_0x11d410['set'](_0xbad3ff,_0x4dc7bf);};_0x58cb72(_0x26e0a3['lightMap'],'STD_LIGHTM'+'AP',''),_0x58cb72(_0x26e0a3['lightVerte'+'xColor'],'STD_LIGHT_'+'VERTEX_COL'+'OR',''),_0x58cb72(_0x26e0a3['dirLightMa'+'p']&&_0x26e0a3['litOptions']['useSpecula'+'r'],'STD_LIGHTM'+'AP_DIR',''),_0x58cb72(_0x26e0a3['heightMap'],'STD_HEIGHT'+'_MAP',''),_0x58cb72(_0x26e0a3['useSpecula'+'rColor'],'STD_SPECUL'+'AR_COLOR',''),_0x58cb72(_0x26e0a3['aoMap']||_0x26e0a3['aoVertexCo'+'lor']||_0x26e0a3['useAO'],'STD_AO',''),_0x58cb72(!(0x1ebf+0x25f9*-0x1+0xb9*0xa),'STD_OPACIT'+'Y_DITHER',iE[_0x11097b['isForward']?_0x26e0a3['litOptions']['opacityDit'+'her']:_0x26e0a3['litOptions']['opacitySha'+'dowDither']]);}['createShad'+'erDefiniti'+'on'](_0x533b53,_0x3a8958){const _0x14b43e=Si['get'](_0x533b53)['getByIndex'](_0x3a8958['litOptions']['pass']),_0xf5bcb1=_0x14b43e['isForward'],_0x3feaf8=new db(_0x533b53,_0x3a8958['litOptions']);this['createVert'+'exShader'](_0x3feaf8,_0x3a8958);const _0x49351a={};_0x3a8958['litOptions']['fresnelMod'+'el']=_0x3a8958['litOptions']['fresnelMod'+'el']===0xc21+0x1*-0x16ca+0xaa9?Yp:_0x3a8958['litOptions']['fresnelMod'+'el'];const _0x96b968=_0x3feaf8['fDefines'];this['prepareFra'+'gmentDefin'+'es'](_0x3a8958,_0x96b968,_0x14b43e);let _0x558329='';if(_0xf5bcb1){if(_0x3a8958['heightMap']&&this['_addMapDef'+'ines'](_0x96b968,'height','parallaxPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a),(_0x3a8958['litOptions']['blendType']!==Cs||_0x3a8958['litOptions']['alphaTest']||_0x3a8958['litOptions']['alphaToCov'+'erage']||_0x3a8958['litOptions']['opacityDit'+'her']!==Sa)&&this['_addMapDef'+'ines'](_0x96b968,'opacity','opacityPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a),_0x3feaf8['needsNorma'+'l']){if((_0x3a8958['normalMap']||_0x3a8958['clearCoatN'+'ormalMap'])&&!_0x3a8958['litOptions']['hasTangent'+'s']){const _0x5745c1=_0x3a8958['normalMap']?'normalMap':'clearCoatN'+'ormalMap';_0x558329=this['_getUvSour'+'ceExpressi'+'on'](_0x5745c1+'Transform',_0x5745c1+'Uv',_0x3a8958);}this['_addMapDef'+'ines'](_0x96b968,'normalDeta'+'il','normalMapP'+'S',_0x3a8958,_0x3feaf8['chunks'],_0x49351a,_0x3a8958['normalDeta'+'ilPackedNo'+'rmal']?'xy':'xyz'),this['_addMapDef'+'ines'](_0x96b968,'normal','normalMapP'+'S',_0x3a8958,_0x3feaf8['chunks'],_0x49351a,_0x3a8958['packedNorm'+'al']?'xy':'xyz');}_0x3a8958['diffuseDet'+'ail']&&this['_addMapDef'+'ines'](_0x96b968,'diffuseDet'+'ail','diffusePS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a,_0x3a8958['diffuseDet'+'ailEncodin'+'g']),this['_addMapDef'+'ines'](_0x96b968,'diffuse','diffusePS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a,_0x3a8958['diffuseEnc'+'oding']),_0x3a8958['litOptions']['useRefract'+'ion']&&(this['_addMapDef'+'ines'](_0x96b968,'refraction','transmissi'+'onPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a),this['_addMapDef'+'ines'](_0x96b968,'thickness','thicknessP'+'S',_0x3a8958,_0x3feaf8['chunks'],_0x49351a)),_0x3a8958['litOptions']['useIridesc'+'ence']&&(this['_addMapDef'+'ines'](_0x96b968,'iridescenc'+'e','iridescenc'+'ePS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a),this['_addMapDef'+'ines'](_0x96b968,'iridescenc'+'eThickness','iridescenc'+'eThickness'+'PS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a)),(_0x3feaf8['lighting']&&_0x3a8958['litOptions']['useSpecula'+'r']||_0x3feaf8['reflection'+'s'])&&(_0x3a8958['litOptions']['useSheen']&&(this['_addMapDef'+'ines'](_0x96b968,'sheen','sheenPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a,_0x3a8958['sheenEncod'+'ing']),this['_addMapDef'+'ines'](_0x96b968,'sheenGloss','sheenGloss'+'PS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a)),_0x3a8958['litOptions']['useMetalne'+'ss']&&(this['_addMapDef'+'ines'](_0x96b968,'metalness','metalnessP'+'S',_0x3a8958,_0x3feaf8['chunks'],_0x49351a),this['_addMapDef'+'ines'](_0x96b968,'ior','iorPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a)),_0x3a8958['litOptions']['useSpecula'+'rityFactor']&&this['_addMapDef'+'ines'](_0x96b968,'specularit'+'yFactor','specularit'+'yFactorPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a),_0x3a8958['useSpecula'+'rColor']&&this['_addMapDef'+'ines'](_0x96b968,'specular','specularPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a,_0x3a8958['specularEn'+'coding']),this['_addMapDef'+'ines'](_0x96b968,'gloss','glossPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a)),_0x3a8958['aoDetail']&&this['_addMapDef'+'ines'](_0x96b968,'aoDetail','aoPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a),(_0x3a8958['aoMap']||_0x3a8958['aoVertexCo'+'lor']||_0x3a8958['useAO'])&&this['_addMapDef'+'ines'](_0x96b968,'ao','aoPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a),this['_addMapDef'+'ines'](_0x96b968,'emissive','emissivePS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a,_0x3a8958['emissiveEn'+'coding']),_0x3a8958['litOptions']['useClearCo'+'at']&&(this['_addMapDef'+'ines'](_0x96b968,'clearCoat','clearCoatP'+'S',_0x3a8958,_0x3feaf8['chunks'],_0x49351a),this['_addMapDef'+'ines'](_0x96b968,'clearCoatG'+'loss','clearCoatG'+'lossPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a),this['_addMapDef'+'ines'](_0x96b968,'clearCoatN'+'ormal','clearCoatN'+'ormalPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a,_0x3a8958['clearCoatP'+'ackedNorma'+'l']?'xy':'xyz')),_0x3a8958['litOptions']['enableGGXS'+'pecular']&&this['_addMapDef'+'ines'](_0x96b968,'anisotropy','anisotropy'+'PS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a),(_0x3a8958['lightMap']||_0x3a8958['lightVerte'+'xColor'])&&this['_addMapDef'+'ines'](_0x96b968,'light','lightmapPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a,_0x3a8958['lightMapEn'+'coding']);}else{const _0x7445a0=_0x3a8958['litOptions']['opacitySha'+'dowDither'];(_0x3a8958['litOptions']['alphaTest']||_0x7445a0)&&this['_addMapDef'+'ines'](_0x96b968,'opacity','opacityPS',_0x3a8958,_0x3feaf8['chunks'],_0x49351a);}_0x3feaf8['generateFr'+'agmentShad'+'er'](_0x3feaf8['chunks']['get']('stdDeclara'+'tionPS'),_0x3feaf8['chunks']['get']('stdFrontEn'+'dPS'),_0x558329);const _0x5e9747=bh['merge'](_0x3feaf8['chunks'],_0x3feaf8['includes']),_0x51f07e=_0x3feaf8['vDefines'];_0x3a8958['defines']['forEach']((_0x3c0b8c,_0x4b2d0d)=>_0x51f07e['set'](_0x4b2d0d,_0x3c0b8c)),_0x3a8958['defines']['forEach']((_0xd5073f,_0x1874a6)=>_0x96b968['set'](_0x1874a6,_0xd5073f));const _0x2d7d6a=Jt['createDefi'+'nition'](_0x533b53,{'name':'StandardSh'+'ader','attributes':_0x3feaf8['attributes'],'shaderLanguage':_0x3feaf8['shaderLang'+'uage'],'vertexCode':_0x3feaf8['vshader'],'fragmentCode':_0x3feaf8['fshader'],'vertexIncludes':_0x5e9747,'fragmentIncludes':_0x5e9747,'fragmentDefines':_0x96b968,'vertexDefines':_0x51f07e});return _0x3feaf8['shaderPass'+'Info']['isForward']&&(_0x2d7d6a['tag']=Sy),_0x2d7d6a;}}const Jd=new fb(),ss=[];ss[Gp]={'src':Ft,'dst':Ft,'op':Tx},ss[Cs]={'src':Ft,'dst':rp,'op':fs},ss[Zs]={'src':jh,'dst':Yh,'op':fs,'alphaSrc':Ft},ss[Gn]={'src':Ft,'dst':Yh,'op':fs},ss[Hp]={'src':Ft,'dst':Ft,'op':fs},ss[Ed]={'src':jh,'dst':Ft,'op':fs},ss[$p]={'src':JS,'dst':vx,'op':fs},ss[Xp]={'src':xx,'dst':Ft,'op':fs},ss[Wp]={'src':JS,'dst':rp,'op':fs},ss[qp]={'src':Ft,'dst':Ft,'op':wx},ss[jp]={'src':Ft,'dst':Ft,'op':Ex};let ub=0xf09+-0xee*0x1+-0x9d*0x17;class tr{constructor(){h(this,'meshInstan'+'ces',[]),h(this,'name','Untitled'),h(this,'userId',''),h(this,'id',ub++),h(this,'variants',new Map()),h(this,'defines',new Map()),h(this,'_definesDi'+'rty',!(-0xc4+0x1e82+-0x1dbd)),h(this,'parameters',{}),h(this,'alphaTest',-0x1*0x7c3+0x3*-0x251+0xeb6),h(this,'alphaToCov'+'erage',!(0xc88+0x968+0x1*-0x15ef)),h(this,'_blendStat'+'e',new pt()),h(this,'_depthStat'+'e',new Yt()),h(this,'cull',pa),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'_shaderChu'+'nks',null),h(this,'_oldChunks',{}),h(this,'_dirtyShad'+'er',!(-0x423+-0x63*0x10+0xa53)),h(this,'_shaderVer'+'sion',0x1def+0x15*-0x188+0x239*0x1),h(this,'_scene',null),h(this,'dirty',!(-0x10d8+0x1a9e+-0x9*0x116)),new.target===tr&&w['error']('Material\x20c'+'lass\x20canno'+'t\x20be\x20insta'+'ntiated,\x20u'+'se\x20ShaderM'+'aterial\x20in'+'stead');}get['hasShaderC'+'hunks'](){return this['_shaderChu'+'nks']!=null;}get['shaderChun'+'ks'](){return this['_shaderChu'+'nks']||(this['_shaderChu'+'nks']=new Pe()),this['_shaderChu'+'nks'];}['getShaderC'+'hunks'](_0x181782=Fe){const _0x219679=this['shaderChun'+'ks'];return _0x181782===Fe?_0x219679['glsl']:_0x219679['wgsl'];}set['shaderChun'+'ksVersion'](_0x3a2192){this['shaderChun'+'ks']['version']=_0x3a2192;}get['shaderChun'+'ksVersion'](){return this['shaderChun'+'ks']['version'];}set['chunks'](_0x2d61a0){w['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),this['_oldChunks']=_0x2d61a0;}get['chunks'](){return w['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),Object['assign'](this['_oldChunks'],Object['fromEntrie'+'s'](this['shaderChun'+'ks']['glsl'])),this['_oldChunks'];}set['depthBias'](_0x49f9cc){this['_depthStat'+'e']['depthBias']=_0x49f9cc;}get['depthBias'](){return this['_depthStat'+'e']['depthBias'];}set['slopeDepth'+'Bias'](_0x55d677){this['_depthStat'+'e']['depthBiasS'+'lope']=_0x55d677;}get['slopeDepth'+'Bias'](){return this['_depthStat'+'e']['depthBiasS'+'lope'];}set['redWrite'](_0x1577ad){this['_blendStat'+'e']['redWrite']=_0x1577ad;}get['redWrite'](){return this['_blendStat'+'e']['redWrite'];}set['greenWrite'](_0x3eaa23){this['_blendStat'+'e']['greenWrite']=_0x3eaa23;}get['greenWrite'](){return this['_blendStat'+'e']['greenWrite'];}set['blueWrite'](_0x6a04e){this['_blendStat'+'e']['blueWrite']=_0x6a04e;}get['blueWrite'](){return this['_blendStat'+'e']['blueWrite'];}set['alphaWrite'](_0x4eb457){this['_blendStat'+'e']['alphaWrite']=_0x4eb457;}get['alphaWrite'](){return this['_blendStat'+'e']['alphaWrite'];}get['transparen'+'t'](){return this['_blendStat'+'e']['blend'];}['_updateTra'+'nsparency'](){const _0xbd9fcc=this['transparen'+'t'],_0x4538e2=this['meshInstan'+'ces'];for(let _0x1a432a=0x1205+-0x2f*-0xc4+0x3601*-0x1;_0x1a432a<_0x4538e2['length'];_0x1a432a++)_0x4538e2[_0x1a432a]['transparen'+'t']=_0xbd9fcc;}set['blendState'](_0x458d1d){this['_blendStat'+'e']['copy'](_0x458d1d),this['_updateTra'+'nsparency']();}get['blendState'](){return this['_blendStat'+'e'];}set['blendType'](_0x47584e){const _0x1a5ba0=ss[_0x47584e];w['assert'](_0x1a5ba0,'Unknown\x20bl'+'end\x20mode\x20'+_0x47584e),this['_blendStat'+'e']['setColorBl'+'end'](_0x1a5ba0['op'],_0x1a5ba0['src'],_0x1a5ba0['dst']),this['_blendStat'+'e']['setAlphaBl'+'end'](_0x1a5ba0['alphaOp']??_0x1a5ba0['op'],_0x1a5ba0['alphaSrc']??_0x1a5ba0['src'],_0x1a5ba0['alphaDst']??_0x1a5ba0['dst']);const _0x2b07f1=_0x47584e!==Cs;this['_blendStat'+'e']['blend']!==_0x2b07f1&&(this['_blendStat'+'e']['blend']=_0x2b07f1,this['_updateTra'+'nsparency']()),this['_updateMes'+'hInstanceK'+'eys']();}get['blendType'](){if(!this['transparen'+'t'])return Cs;const {colorOp:_0x38e44c,colorSrcFactor:_0x178b55,colorDstFactor:_0x4d43d3,alphaOp:_0x2c7c42,alphaSrcFactor:_0x128355,alphaDstFactor:_0x1469f0}=this['_blendStat'+'e'];for(let _0x2b7afb=0x1*0x2ea+0x2043*-0x1+0x1*0x1d59;_0x2b7afb<ss['length'];_0x2b7afb++){const _0x4f49b1=ss[_0x2b7afb];if(_0x4f49b1['src']===_0x178b55&&_0x4f49b1['dst']===_0x4d43d3&&_0x4f49b1['op']===_0x38e44c&&_0x4f49b1['src']===_0x128355&&_0x4f49b1['dst']===_0x1469f0&&_0x4f49b1['op']===_0x2c7c42)return _0x2b7afb;}return Zs;}set['depthState'](_0x240e52){this['_depthStat'+'e']['copy'](_0x240e52);}get['depthState'](){return this['_depthStat'+'e'];}set['depthTest'](_0x1d154c){this['_depthStat'+'e']['test']=_0x1d154c;}get['depthTest'](){return this['_depthStat'+'e']['test'];}set['depthFunc'](_0x397032){this['_depthStat'+'e']['func']=_0x397032;}get['depthFunc'](){return this['_depthStat'+'e']['func'];}set['depthWrite'](_0x22165b){this['_depthStat'+'e']['write']=_0x22165b;}get['depthWrite'](){return this['_depthStat'+'e']['write'];}['copy'](_0x54465e){var _0x2ead41,_0x28bf72;this['name']=_0x54465e['name'],this['alphaTest']=_0x54465e['alphaTest'],this['alphaToCov'+'erage']=_0x54465e['alphaToCov'+'erage'],this['_blendStat'+'e']['copy'](_0x54465e['_blendStat'+'e']),this['_depthStat'+'e']['copy'](_0x54465e['_depthStat'+'e']),this['cull']=_0x54465e['cull'],this['stencilFro'+'nt']=(_0x2ead41=_0x54465e['stencilFro'+'nt'])==null?void(0x24b7*0x1+0x20cf+-0x4586):_0x2ead41['clone'](),_0x54465e['stencilBac'+'k']&&(this['stencilBac'+'k']=_0x54465e['stencilFro'+'nt']===_0x54465e['stencilBac'+'k']?this['stencilFro'+'nt']:_0x54465e['stencilBac'+'k']['clone']()),this['clearParam'+'eters']();for(const _0x31c768 in _0x54465e['parameters'])_0x54465e['parameters']['hasOwnProp'+'erty'](_0x31c768)&&this['_setParame'+'terSimple'](_0x31c768,_0x54465e['parameters'][_0x31c768]['data']);return this['defines']['clear'](),_0x54465e['defines']['forEach']((_0x310cdf,_0x1975f3)=>this['defines']['set'](_0x1975f3,_0x310cdf)),this['_shaderChu'+'nks']=_0x54465e['hasShaderC'+'hunks']?new Pe():null,(_0x28bf72=this['_shaderChu'+'nks'])==null||_0x28bf72['copy'](_0x54465e['_shaderChu'+'nks']),this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['_updateMes'+'hInstanceK'+'eys'](){const _0xfe3c1c=this['meshInstan'+'ces'];for(let _0x59aa8a=0xe69*0x2+0xc6d+-0x293f;_0x59aa8a<_0xfe3c1c['length'];_0x59aa8a++)_0xfe3c1c[_0x59aa8a]['updateKey']();}['updateUnif'+'orms'](_0x229c2f,_0x208d8f){this['_dirtyShad'+'er']&&this['clearVaria'+'nts']();}['getShaderV'+'ariant'](_0xb1688b){w['assert'](!(-0x24dc+-0x1359*-0x1+-0x2*-0x8c2),'Not\x20implem'+'ented');}['update'](){var _0x44bfde,_0x294e83;if(Object['keys'](this['_oldChunks'])['length']>-0xc71+-0x1d*-0x9d+-0x558){for(const [_0x5b0d45,_0x28283b]of Object['entries'](this['_oldChunks']))this['shaderChun'+'ks']['glsl']['set'](_0x5b0d45,_0x28283b),delete this['_oldChunks'][_0x5b0d45];}(this['_definesDi'+'rty']||(_0x44bfde=this['_shaderChu'+'nks'])!=null&&_0x44bfde['isDirty']())&&(this['_definesDi'+'rty']=!(0x3ac+0x17c9+0x6dd*-0x4),(_0x294e83=this['_shaderChu'+'nks'])==null||_0x294e83['resetDirty'](),this['clearVaria'+'nts']()),this['dirty']=!(0x24ab+0x1*-0x139+-0x11b9*0x2);}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['clearVaria'+'nts'](){this['variants']['clear']();const _0x994525=this['meshInstan'+'ces'],_0x1162c8=_0x994525['length'];for(let _0x1dd341=0x39a*0x2+-0x7fa+0xc6;_0x1dd341<_0x1162c8;_0x1dd341++)_0x994525[_0x1dd341]['clearShade'+'rs']();}['getParamet'+'er'](_0x55525c){return this['parameters'][_0x55525c];}['_setParame'+'terSimple'](_0x25515c,_0x26bb2d){w['call'](()=>{_0x26bb2d===void(-0x1f*0xd3+-0x20d0+0xdf*0x43)&&w['warnOnce']('Material#s'+'etParamete'+'r:\x20Attempt'+'ing\x20to\x20set'+'\x20undefined'+'\x20data\x20for\x20'+'parameter\x20'+'\x22'+_0x25515c+('\x22,\x20this\x20is'+'\x20likely\x20no'+'t\x20expected'+'.'),this);});const _0x147d05=this['parameters'][_0x25515c];_0x147d05?_0x147d05['data']=_0x26bb2d:this['parameters'][_0x25515c]={'scopeId':null,'data':_0x26bb2d};}['setParamet'+'er'](_0x270cd7,_0x28694d){if(_0x28694d===void(0x443*0x2+0xe21+-0x1*0x16a7)&&typeof _0x270cd7=='object'){const _0x38b99f=_0x270cd7;if(_0x38b99f['length']){for(let _0x34cdf2=-0x9*0x323+-0x1ba6+0x37e1;_0x34cdf2<_0x38b99f['length'];_0x34cdf2++)this['setParamet'+'er'](_0x38b99f[_0x34cdf2]);return;}_0x270cd7=_0x38b99f['name'],_0x28694d=_0x38b99f['value'];}this['_setParame'+'terSimple'](_0x270cd7,_0x28694d);}['deletePara'+'meter'](_0x1f1e9d){this['parameters'][_0x1f1e9d]&&delete this['parameters'][_0x1f1e9d];}['setParamet'+'ers'](_0x297b4c,_0x7d7937){const _0x4877d3=this['parameters'];_0x7d7937===void(-0x1c0b+-0x39f+0x182*0x15)&&(_0x7d7937=_0x4877d3);for(const _0x5d0142 in _0x7d7937){const _0x11cd90=_0x4877d3[_0x5d0142];_0x11cd90&&(_0x11cd90['scopeId']||(_0x11cd90['scopeId']=_0x297b4c['scope']['resolve'](_0x5d0142)),_0x11cd90['scopeId']['setValue'](_0x11cd90['data']));}}['setDefine'](_0x33abc2,_0x5ce54d){let _0x3ad794=!(-0x23e0+-0x3db+0x27bc);const {defines:_0x26d6f6}=this;_0x5ce54d!==void(-0x188b+0x11ae+-0xfb*-0x7)&&_0x5ce54d!==!(0xc07+0x97*0x14+-0x17d2)?(_0x3ad794=!_0x26d6f6['has'](_0x33abc2)||_0x26d6f6['get'](_0x33abc2)!==_0x5ce54d,_0x26d6f6['set'](_0x33abc2,_0x5ce54d)):(_0x3ad794=_0x26d6f6['has'](_0x33abc2),_0x26d6f6['delete'](_0x33abc2)),this['_definesDi'+'rty']||(this['_definesDi'+'rty']=_0x3ad794);}['getDefine'](_0x2efaea){return this['defines']['has'](_0x2efaea);}['destroy'](){this['variants']['clear']();for(let _0x54ae4c=-0xb*0x189+-0x1*0xfa7+0x253*0xe;_0x54ae4c<this['meshInstan'+'ces']['length'];_0x54ae4c++){const _0x536564=this['meshInstan'+'ces'][_0x54ae4c];if(_0x536564['clearShade'+'rs'](),_0x536564['_material']=null,_0x536564['mesh']){const _0x976edc=Qn(_0x536564['mesh']['device']);this!==_0x976edc&&(_0x536564['material']=_0x976edc);}else w['warn']('pc.Materia'+'l:\x20MeshIns'+'tance.mesh'+'\x20is\x20null,\x20'+'default\x20ma'+'terial\x20can'+'not\x20be\x20ass'+'igned\x20to\x20t'+'he\x20MeshIns'+'tance');}this['meshInstan'+'ces']['length']=0x2382*0x1+0xef*0x17+-0x38fb;}['addMeshIns'+'tanceRef'](_0x1b7a41){this['meshInstan'+'ces']['push'](_0x1b7a41);}['removeMesh'+'InstanceRe'+'f'](_0x1da309){const _0x155f53=this['meshInstan'+'ces'],_0x2156b6=_0x155f53['indexOf'](_0x1da309);_0x2156b6!==-(0x727*-0x5+0x244*0x4+0x1ab4)&&_0x155f53['splice'](_0x2156b6,0x1*-0x9f+0x410+-0x370);}}class Ws{static['update'](_0x26e572,_0x1a6a19,_0x1df2dc,_0x445b19,_0x4ec883,_0x1af8df,_0x4b3d27){Ws['updateShar'+'edOptions'](_0x26e572,_0x1a6a19,_0x1df2dc,_0x4ec883,_0x1af8df),Ws['updateMate'+'rialOption'+'s'](_0x26e572,_0x1a6a19),Ws['updateEnvO'+'ptions'](_0x26e572,_0x1a6a19,_0x1df2dc,_0x445b19),Ws['updateLigh'+'tingOption'+'s'](_0x26e572,_0x1a6a19,_0x1df2dc,_0x4ec883,_0x4b3d27);}static['updateShar'+'edOptions'](_0x1cbc28,_0x178c2b,_0x1c5476,_0x459893,_0x30905b){_0x1cbc28['shaderChun'+'ks']=_0x178c2b['shaderChun'+'ks'],_0x1cbc28['pass']=_0x30905b,_0x1cbc28['alphaTest']=_0x178c2b['alphaTest']>0x1*0x2054+0x2*-0x59f+-0x2*0xa8b,_0x1cbc28['blendType']=_0x178c2b['blendType'],_0x1cbc28['screenSpac'+'e']=_0x459893&&(_0x459893&Eh)!==0x1227+-0x4*-0x62b+-0x13*0x241,_0x1cbc28['skin']=_0x459893&&(_0x459893&nl)!==-0x26*-0x39+-0x1*0x2551+0x1cdb*0x1,_0x1cbc28['useInstanc'+'ing']=_0x459893&&(_0x459893&ol)!==-0x94*0x33+0x1d01+-0x3*-0x29,_0x1cbc28['useMorphPo'+'sition']=_0x459893&&(_0x459893&ll)!==-0xbaf*-0x2+0x16f5+-0x2e53,_0x1cbc28['useMorphNo'+'rmal']=_0x459893&&(_0x459893&cl)!==-0x3*-0x9b6+-0xcf3+-0x102f,_0x1cbc28['useMorphTe'+'xtureBased'+'Int']=_0x459893&&(_0x459893&hl)!==-0x2*0x78d+0x1*-0x17b1+0x1*0x26cb,_0x1cbc28['hasTangent'+'s']=_0x459893&&(_0x459893&om)!==0x15b5+0x8bd*-0x4+0xd3f,_0x1cbc28['nineSliced'+'Mode']=_0x178c2b['nineSliced'+'Mode']||ci,_0x178c2b['useLightin'+'g']&&_0x1c5476['clusteredL'+'ightingEna'+'bled']?(_0x1cbc28['clusteredL'+'ightingEna'+'bled']=!(0x1f51+-0x3*-0x509+-0x4*0xb9b),_0x1cbc28['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x1c5476['lighting']['cookiesEna'+'bled'],_0x1cbc28['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x1c5476['lighting']['shadowsEna'+'bled'],_0x1cbc28['clusteredL'+'ightingSha'+'dowType']=_0x1c5476['lighting']['shadowType'],_0x1cbc28['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x1c5476['lighting']['areaLights'+'Enabled']):(_0x1cbc28['clusteredL'+'ightingEna'+'bled']=!(-0x6a7+0x1a06+-0x2*0x9af),_0x1cbc28['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(0x35*-0xa3+0x1*-0x210d+-0x7*-0x98b),_0x1cbc28['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(-0x15d8+-0x1*0x137b+0x2954),_0x1cbc28['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(-0x1*-0x1c19+0x15aa+-0x31c2));}static['updateMate'+'rialOption'+'s'](_0x5238d4,_0x5bfdd6){_0x5238d4['separateAm'+'bient']=!(-0x7c*0x16+-0x1*0x19a3+-0x244c*-0x1),_0x5238d4['pixelSnap']=_0x5bfdd6['pixelSnap'],_0x5238d4['ambientSH']=_0x5bfdd6['ambientSH'],_0x5238d4['twoSidedLi'+'ghting']=_0x5bfdd6['twoSidedLi'+'ghting'],_0x5238d4['occludeDir'+'ect']=_0x5bfdd6['occludeDir'+'ect'],_0x5238d4['occludeSpe'+'cular']=_0x5bfdd6['occludeSpe'+'cular'],_0x5238d4['occludeSpe'+'cularFloat']=_0x5bfdd6['occludeSpe'+'cularInten'+'sity']!==-0x2*0x9e1+0x167e+-0x2bb,_0x5238d4['useMsdf']=!(-0x665+0x143*-0x11+-0x1*-0x1bd9),_0x5238d4['msdfTextAt'+'tribute']=!(0x1f3c+-0x1559+-0x9e2),_0x5238d4['alphaToCov'+'erage']=_0x5bfdd6['alphaToCov'+'erage'],_0x5238d4['opacityFad'+'esSpecular']=_0x5bfdd6['opacityFad'+'esSpecular'],_0x5238d4['opacityDit'+'her']=_0x5bfdd6['opacityDit'+'her'],_0x5238d4['cubeMapPro'+'jection']=tm,_0x5238d4['useSpecula'+'r']=_0x5bfdd6['hasSpecula'+'r'],_0x5238d4['useSpecula'+'rityFactor']=_0x5bfdd6['hasSpecula'+'rityFactor'],_0x5238d4['enableGGXS'+'pecular']=_0x5bfdd6['ggxSpecula'+'r'],_0x5238d4['fresnelMod'+'el']=_0x5bfdd6['fresnelMod'+'el'],_0x5238d4['useRefract'+'ion']=_0x5bfdd6['hasRefract'+'ion'],_0x5238d4['useClearCo'+'at']=_0x5bfdd6['hasClearCo'+'at'],_0x5238d4['useSheen']=_0x5bfdd6['hasSheen'],_0x5238d4['useIridesc'+'ence']=_0x5bfdd6['hasIrrides'+'cence'],_0x5238d4['useMetalne'+'ss']=_0x5bfdd6['hasMetalne'+'ss'],_0x5238d4['useDynamic'+'Refraction']=_0x5bfdd6['dynamicRef'+'raction'],_0x5238d4['dispersion']=_0x5bfdd6['dispersion']>-0x2*-0x664+-0x1f53+0x128b,_0x5238d4['vertexColo'+'rs']=!(-0x5*0x29f+0x485*-0x7+0x8f3*0x5),_0x5238d4['lightMapEn'+'abled']=_0x5bfdd6['hasLightin'+'g'],_0x5238d4['dirLightMa'+'pEnabled']=_0x5bfdd6['dirLightMa'+'p'],_0x5238d4['useHeights']=_0x5bfdd6['hasHeights'],_0x5238d4['useNormals']=_0x5bfdd6['hasNormals'],_0x5238d4['useClearCo'+'atNormals']=_0x5bfdd6['hasClearCo'+'atNormals'],_0x5238d4['useAo']=_0x5bfdd6['hasAo'],_0x5238d4['diffuseMap'+'Enabled']=_0x5bfdd6['hasDiffuse'+'Map'];}static['updateEnvO'+'ptions'](_0x3d6136,_0x3c6481,_0x4e93a4,_0x280eee){_0x3d6136['fog']=_0x3c6481['useFog']?_0x280eee['fog']:Kn,_0x3d6136['gamma']=_0x280eee['shaderOutp'+'utGamma'],_0x3d6136['toneMap']=_0x3c6481['useTonemap']?_0x280eee['toneMappin'+'g']:nv,_0x3c6481['useSkybox']&&_0x4e93a4['envAtlas']&&_0x4e93a4['skybox']?(_0x3d6136['reflection'+'Source']=xh,_0x3d6136['reflection'+'Encoding']=_0x4e93a4['envAtlas']['encoding'],_0x3d6136['reflection'+'CubemapEnc'+'oding']=_0x4e93a4['skybox']['encoding']):_0x3c6481['useSkybox']&&_0x4e93a4['envAtlas']?(_0x3d6136['reflection'+'Source']=vh,_0x3d6136['reflection'+'Encoding']=_0x4e93a4['envAtlas']['encoding']):_0x3c6481['useSkybox']&&_0x4e93a4['skybox']?(_0x3d6136['reflection'+'Source']=Th,_0x3d6136['reflection'+'Encoding']=_0x4e93a4['skybox']['encoding']):(_0x3d6136['reflection'+'Source']=vr,_0x3d6136['reflection'+'Encoding']=null),_0x3c6481['ambientSH']?(_0x3d6136['ambientSou'+'rce']=im,_0x3d6136['ambientEnc'+'oding']=null):_0x3d6136['reflection'+'Source']!==vr&&_0x4e93a4['envAtlas']?(_0x3d6136['ambientSou'+'rce']=rm,_0x3d6136['ambientEnc'+'oding']=_0x4e93a4['envAtlas']['encoding']):(_0x3d6136['ambientSou'+'rce']=am,_0x3d6136['ambientEnc'+'oding']=null);const _0x55406f=_0x3d6136['reflection'+'Source']!==vr;_0x3d6136['skyboxInte'+'nsity']=_0x55406f,_0x3d6136['useCubeMap'+'Rotation']=_0x55406f&&_0x4e93a4['_skyboxRot'+'ationShade'+'rInclude'];}static['updateLigh'+'tingOption'+'s'](_0x589bcd,_0x36bded,_0x25114b,_0x5ec037,_0x471e99){if(_0x589bcd['lightMapWi'+'thoutAmbie'+'nt']=!(-0x2*-0x110f+-0x8ed+-0x1930),_0x36bded['useLightin'+'g']){const _0x1c5f48=[],_0xc644a8=_0x5ec037?_0x5ec037>>-0xabe+0xbe5+0x9*-0x1f:Ss;_0x589bcd['lightMaskD'+'ynamic']=!!(_0xc644a8&Ss),_0x589bcd['lightMapWi'+'thoutAmbie'+'nt']=!(0x61*-0xb+0x1*-0x17d2+0x1bfe*0x1),_0x471e99&&(Ws['collectLig'+'hts'](ve,_0x471e99[ve],_0x1c5f48,_0xc644a8),_0x25114b['clusteredL'+'ightingEna'+'bled']||(Ws['collectLig'+'hts'](Ke,_0x471e99[Ke],_0x1c5f48,_0xc644a8),Ws['collectLig'+'hts'](Ze,_0x471e99[Ze],_0x1c5f48,_0xc644a8))),_0x589bcd['lights']=_0x1c5f48;}else _0x589bcd['lights']=[];(_0x589bcd['lights']['length']===0x2577+-0x2151+-0x12*0x3b&&!_0x25114b['clusteredL'+'ightingEna'+'bled']||(_0x5ec037&wh)!==0x644*-0x5+-0x6a2+0x25f6)&&(_0x589bcd['noShadow']=!(-0x1*-0x373+0x1afe*0x1+0x1e71*-0x1));}static['collectLig'+'hts'](_0x1eb4b4,_0x4205a8,_0x52eaa6,_0x3bf7dd){for(let _0x3605db=-0x239a+-0xdd3*-0x2+0x3fa*0x2;_0x3605db<_0x4205a8['length'];_0x3605db++){const _0x4b6d19=_0x4205a8[_0x3605db];_0x4b6d19['enabled']&&_0x4b6d19['mask']&_0x3bf7dd&&_0x52eaa6['push'](_0x4b6d19);}}}const G_=(_0x276171,_0x572c2b)=>{if(_0x276171['length']!==_0x572c2b['length'])return!(-0x1*-0x617+-0xd67*0x1+-0x1*-0x751);for(let _0x1a687f=0x5*-0x65d+0x10c1+0xf10;_0x1a687f<_0x276171['length'];++_0x1a687f)if(_0x276171[_0x1a687f]!==_0x572c2b[_0x1a687f])return!(0x188b+-0x1*-0x243f+0x39*-0x111);return!(-0x8*0x391+0x1710+0x578);},pb=_0x400f8d=>_0x400f8d['r']!==-0x551+0x1eb+0x367||_0x400f8d['g']!==0x146*-0x3+-0x3*0x89+0x56e||_0x400f8d['b']!==-0xfb*-0x1f+0x1634+-0x3498,mb=_0x453341=>_0x453341['r']!==-0x1*0x18df+-0x130c+-0x2beb*-0x1||_0x453341['g']!==-0x1*0x65d+-0x384+0x9e1||_0x453341['b']!==-0x1*0x1c9+-0xe25+0xfee;class _b{constructor(){this['_mapXForms']=null;}['updateMinR'+'ef'](_0x42ce44,_0x28ada7,_0x1621a0,_0x557660,_0x22be1a,_0x55675d){this['_updateSha'+'redOptions'](_0x42ce44,_0x28ada7,_0x1621a0,_0x557660,_0x22be1a),this['_updateMin'+'Options'](_0x42ce44,_0x1621a0,_0x22be1a),this['_updateUVO'+'ptions'](_0x42ce44,_0x1621a0,_0x557660,!(-0x37e*-0x1+0xf34+-0x12b2));}['updateRef'](_0xc0b232,_0x5374f8,_0x4b9deb,_0xa99980,_0xa6a73d,_0x437515,_0x13b8c5){this['_updateSha'+'redOptions'](_0xc0b232,_0x5374f8,_0xa99980,_0xa6a73d,_0x437515),this['_updateEnv'+'Options'](_0xc0b232,_0xa99980,_0x5374f8,_0x4b9deb),this['_updateMat'+'erialOptio'+'ns'](_0xc0b232,_0xa99980,_0x5374f8),_0xc0b232['litOptions']['hasTangent'+'s']=_0xa6a73d&&(_0xa6a73d&om)!==0x1214+-0x1ebc+0x144*0xa,this['_updateLig'+'htOptions'](_0xc0b232,_0x5374f8,_0xa99980,_0xa6a73d,_0x13b8c5),this['_updateUVO'+'ptions'](_0xc0b232,_0xa99980,_0xa6a73d,!(-0x1176+0x1371+-0x1fa),_0x4b9deb);}['_updateSha'+'redOptions'](_0x397f48,_0x2a4565,_0x26de9c,_0x4da478,_0x5882fc){_0x397f48['forceUv1']=_0x26de9c['forceUv1'],_0x26de9c['userAttrib'+'utes']&&(_0x397f48['litOptions']['userAttrib'+'utes']=Object['fromEntrie'+'s'](_0x26de9c['userAttrib'+'utes']['entries']())),_0x397f48['litOptions']['shaderChun'+'ks']=_0x26de9c['shaderChun'+'ks'],_0x397f48['litOptions']['pass']=_0x5882fc,_0x397f48['litOptions']['alphaTest']=_0x26de9c['alphaTest']>-0x13*-0x15b+-0x21*-0x4d+-0x23ae,_0x397f48['litOptions']['blendType']=_0x26de9c['blendType'],_0x397f48['litOptions']['screenSpac'+'e']=_0x4da478&&(_0x4da478&Eh)!==-0x52f+-0x114*-0x17+-0x139d,_0x397f48['litOptions']['skin']=_0x4da478&&(_0x4da478&nl)!==-0x5d9*0x5+-0xa93+0x27d0,_0x397f48['litOptions']['batch']=_0x4da478&&(_0x4da478&qc)!==-0x236b+-0xc02+0x2f6d,_0x397f48['litOptions']['useInstanc'+'ing']=_0x4da478&&(_0x4da478&ol)!==0x1*0x265f+0x23e6+0x1*-0x4a45,_0x397f48['litOptions']['useMorphPo'+'sition']=_0x4da478&&(_0x4da478&ll)!==0x1d*0x9e+-0x21a1+0xfbb,_0x397f48['litOptions']['useMorphNo'+'rmal']=_0x4da478&&(_0x4da478&cl)!==-0xc2*0x2f+0x17*-0xcd+-0x1dd*-0x1d,_0x397f48['litOptions']['useMorphTe'+'xtureBased'+'Int']=_0x4da478&&(_0x4da478&hl)!==-0xa58+-0xd58+0x17b0,_0x397f48['litOptions']['nineSliced'+'Mode']=_0x26de9c['nineSliced'+'Mode']||0x1fd1+0x6*-0x65+-0x9d1*0x3,_0x2a4565['clusteredL'+'ightingEna'+'bled']&&_0x26de9c['useLightin'+'g']?(_0x397f48['litOptions']['clusteredL'+'ightingEna'+'bled']=!(-0x115c+-0x23c7+0x3523),_0x397f48['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x2a4565['lighting']['cookiesEna'+'bled'],_0x397f48['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x2a4565['lighting']['shadowsEna'+'bled'],_0x397f48['litOptions']['clusteredL'+'ightingSha'+'dowType']=_0x2a4565['lighting']['shadowType'],_0x397f48['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x2a4565['lighting']['areaLights'+'Enabled']):(_0x397f48['litOptions']['clusteredL'+'ightingEna'+'bled']=!(-0x309+-0x164e+-0x1*-0x1958),_0x397f48['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(0x1*0xec5+-0x42d+0x1*-0xa97),_0x397f48['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(-0x2e*-0x83+0x11*-0x46+-0x5*0x3c7),_0x397f48['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(-0x4*-0x347+0x2e3+-0xffe));}['_updateUVO'+'ptions'](_0x2ab3b4,_0x2ca8e7,_0x18749,_0x4e32c0,_0x447e76){let _0x3263b4=!(-0xa2b*0x1+-0x4b9+0xee5),_0xa2dd=!(-0xa25*0x1+0x1*-0x1aac+0x6*0x623),_0x2c88f1=!(0x1562+-0x1*0x1d0a+0x7a9*0x1);_0x18749&&(_0x3263b4=(_0x18749&nm)!==-0xb*-0x1c1+-0x19e5+-0x2*-0x34d,_0xa2dd=(_0x18749&dv)!==0x24e8+0x6d4+0x24*-0x137,_0x2c88f1=(_0x18749&fv)!==-0x1f27+0x307+0x1c20),_0x2ab3b4['litOptions']['vertexColo'+'rs']=!(-0x14a9+0x58*-0x2d+0x2422),this['_mapXForms']=[];const _0x270c02={};for(const _0x8e45f7 in bn)this['_updateTex'+'Options'](_0x2ab3b4,_0x2ca8e7,_0x8e45f7,_0x3263b4,_0xa2dd,_0x2c88f1,_0x4e32c0,_0x270c02);this['_mapXForms']=null,_0x2ab3b4['litOptions']['ssao']=_0x447e76==null?void(0x2e*-0x9c+-0x4e8+0x20f0):_0x447e76['ssaoEnable'+'d'],_0x2ab3b4['useAO']=_0x2ab3b4['litOptions']['ssao'],_0x2ab3b4['litOptions']['lightMapEn'+'abled']=_0x2ab3b4['lightMap'],_0x2ab3b4['litOptions']['dirLightMa'+'pEnabled']=_0x2ab3b4['dirLightMa'+'p'],_0x2ab3b4['litOptions']['useHeights']=_0x2ab3b4['heightMap'],_0x2ab3b4['litOptions']['useNormals']=_0x2ab3b4['normalMap'],_0x2ab3b4['litOptions']['useClearCo'+'atNormals']=_0x2ab3b4['clearCoatN'+'ormalMap'],_0x2ab3b4['litOptions']['useAo']=_0x2ab3b4['aoMap']||_0x2ab3b4['aoVertexCo'+'lor']||_0x2ab3b4['litOptions']['ssao'],_0x2ab3b4['litOptions']['diffuseMap'+'Enabled']=_0x2ab3b4['diffuseMap'];}['_updateTex'+'Options'](_0xf6712d,_0x128a90,_0x3ddd47,_0x304bfd,_0x1b0be3,_0x3ad307,_0x593af5,_0x1e840f){const _0xcd69c5=_0x3ddd47==='opacity';if(!_0x593af5||_0xcd69c5){const _0x522ad7=_0x3ddd47+'Map',_0x4bdae9=_0x3ddd47+('VertexColo'+'r'),_0x1b144b=_0x3ddd47+('VertexColo'+'rChannel'),_0x8b4494=_0x522ad7+'Channel',_0x471ef1=_0x522ad7+'Transform',_0x381503=_0x522ad7+'Uv',_0x27be7a=_0x522ad7+'Identifier';if(_0x3ddd47!=='light'&&(_0xf6712d[_0x522ad7]=!(0x2199+0x5f5*-0x1+-0x1ba3),_0xf6712d[_0x27be7a]=void(-0x2302+-0x95*0x34+0x4146),_0xf6712d[_0x8b4494]='',_0xf6712d[_0x471ef1]=-0x98b+-0x50b+0xe96,_0xf6712d[_0x381503]=0x190e+-0x11e8+-0x726),_0xf6712d[_0x4bdae9]=!(-0x2*0x1294+-0xb22+0x304b),_0xf6712d[_0x1b144b]='',_0xcd69c5&&_0x128a90['blendType']===Cs&&_0x128a90['alphaTest']===-0x4*0x5d6+0x703+0x1055&&!_0x128a90['alphaToCov'+'erage']&&_0x128a90['opacityDit'+'her']===Sa)return;if(_0x3ddd47!=='height'&&_0x128a90[_0x4bdae9]&&_0x3ad307&&(_0xf6712d[_0x4bdae9]=_0x128a90[_0x4bdae9],_0xf6712d[_0x1b144b]=_0x128a90[_0x1b144b],_0xf6712d['litOptions']['vertexColo'+'rs']=!(-0x11*0xe2+0x2434+0x1532*-0x1)),_0x128a90[_0x522ad7]){let _0x1628c3=!(0x1*0xd2b+-0x1317+0x2*0x2f6);if(_0x128a90[_0x381503]===-0x10ca*-0x2+0x380+-0x2514&&!_0x304bfd&&(_0x1628c3=!(-0x17f*0x7+0x17e6+-0xd6c)),_0x128a90[_0x381503]===-0x6*0x1b+-0xab2+-0x3c7*-0x3&&!_0x1b0be3&&(_0x1628c3=!(0xdf1+-0x914+-0x4dc*0x1)),_0x1628c3){const _0x166b9b=_0x128a90[_0x522ad7]['id'];let _0x552222=_0x1e840f[_0x166b9b];_0x552222===void(-0x1141+-0x1*-0xa6d+0x2*0x36a)&&(_0x1e840f[_0x166b9b]=_0x3ddd47,_0x552222=_0x3ddd47),_0xf6712d[_0x522ad7]=!!_0x128a90[_0x522ad7],_0xf6712d[_0x27be7a]=_0x552222,_0xf6712d[_0x471ef1]=this['_getMapTra'+'nsformID'](_0x128a90['getUniform'](_0x471ef1),_0x128a90[_0x381503]),_0xf6712d[_0x8b4494]=_0x128a90[_0x8b4494],_0xf6712d[_0x381503]=_0x128a90[_0x381503];}}}}['_updateMin'+'Options'](_0x453107,_0x25523e,_0x57a238){const _0x23b132=_0x57a238===Rl;_0x453107['litOptions']['opacitySha'+'dowDither']=_0x23b132?_0x25523e['opacityDit'+'her']:_0x25523e['opacitySha'+'dowDither'],_0x453107['litOptions']['linearDept'+'h']=_0x23b132,_0x453107['litOptions']['lights']=[];}['_updateMat'+'erialOptio'+'ns'](_0x5dadc0,_0x336a4b,_0x3f1558){var _0x443f42,_0x480c0c,_0x1e99d0,_0x4d7d48,_0x64c0cd,_0x4050b8;const _0x1a930e=!!(_0x336a4b['useMetalne'+'ss']||_0x336a4b['specularMa'+'p']||_0x336a4b['sphereMap']||_0x336a4b['cubeMap']||mb(_0x336a4b['specular'])||_0x336a4b['specularit'+'yFactor']>0x9b3*-0x1+-0x1547+-0x262*-0xd&&_0x336a4b['useMetalne'+'ss']||_0x336a4b['enableGGXS'+'pecular']||_0x336a4b['clearCoat']>-0x1cd8+-0x47*-0x65+0xd5),_0x1e41c0=!_0x336a4b['useMetalne'+'ss']||_0x336a4b['useMetalne'+'ssSpecular'+'Color'],_0x1a3122=_0x1a930e&&(_0x336a4b['specularTi'+'nt']||!_0x336a4b['specularMa'+'p']&&!_0x336a4b['specularVe'+'rtexColor'])&&pb(_0x336a4b['specular']),_0x11defa=_0x1a930e&&_0x336a4b['useMetalne'+'ssSpecular'+'Color']&&(_0x336a4b['specularit'+'yFactorTin'+'t']||_0x336a4b['specularit'+'yFactor']<-0x46d+-0x2*-0x5e+0x3b2&&!_0x336a4b['specularit'+'yFactorMap']),_0x46bd90=_0x5a5a42=>_0x5a5a42?_0x5a5a42['format']===vl||_0x5a5a42['type']===Jo:!(-0xe09+-0x11e7+-0x1*-0x1ff1),_0x367156=(_0x545105,_0x66ae2)=>Math['abs'](_0x545105-_0x66ae2)<0x1*-0x171e+0x1dc7+-0xb*0x9b+0.0001;_0x5dadc0['specularTi'+'nt']=_0x1a3122,_0x5dadc0['specularit'+'yFactorTin'+'t']=_0x11defa,_0x5dadc0['metalnessT'+'int']=_0x336a4b['useMetalne'+'ss']&&_0x336a4b['metalness']<-0xab*0x15+-0x2341+0x155*0x25,_0x5dadc0['glossTint']=!(0x6f9+0x3*0x515+0x9e*-0x24),_0x5dadc0['diffuseEnc'+'oding']=(_0x443f42=_0x336a4b['diffuseMap'])==null?void(-0x6*-0x344+0x72a+-0xd61*0x2):_0x443f42['encoding'],_0x5dadc0['diffuseDet'+'ailEncodin'+'g']=(_0x480c0c=_0x336a4b['diffuseDet'+'ailMap'])==null?void(0x4e*0x6+-0x1*-0x5d4+-0x31*0x28):_0x480c0c['encoding'],_0x5dadc0['emissiveEn'+'coding']=(_0x1e99d0=_0x336a4b['emissiveMa'+'p'])==null?void(0x10d6+0x55b*-0x2+-0x620):_0x1e99d0['encoding'],_0x5dadc0['lightMapEn'+'coding']=(_0x4d7d48=_0x336a4b['lightMap'])==null?void(0x5*0x1e+0xd9+0x1*-0x16f):_0x4d7d48['encoding'],_0x5dadc0['packedNorm'+'al']=_0x46bd90(_0x336a4b['normalMap']),_0x5dadc0['refraction'+'Tint']=_0x367156(_0x336a4b['refraction'],0x2449+-0x2a7+-0x21a1*0x1),_0x5dadc0['refraction'+'IndexTint']=_0x367156(_0x336a4b['refraction'+'Index'],(-0x491+0x92c+-0x2*0x24d)/(-0xd7+0x12db*-0x1+0x13b3+0.5)),_0x5dadc0['thicknessT'+'int']=_0x336a4b['useDynamic'+'Refraction']&&_0x336a4b['thickness']!==-0x18c2+-0x1932+0x31f5,_0x5dadc0['specularEn'+'coding']=(_0x64c0cd=_0x336a4b['specularMa'+'p'])==null?void(-0x2127+-0x1ab3+0x3bda):_0x64c0cd['encoding'],_0x5dadc0['sheenEncod'+'ing']=(_0x4050b8=_0x336a4b['sheenMap'])==null?void(0x1cd*0xc+0x503*0x1+-0x1a9f):_0x4050b8['encoding'],_0x5dadc0['aoMapUv']=_0x336a4b['aoUvSet'],_0x5dadc0['aoDetail']=!!_0x336a4b['aoDetailMa'+'p'],_0x5dadc0['diffuseDet'+'ail']=!!_0x336a4b['diffuseDet'+'ailMap'],_0x5dadc0['normalDeta'+'il']=!!_0x336a4b['normalMap'],_0x5dadc0['normalDeta'+'ilPackedNo'+'rmal']=_0x46bd90(_0x336a4b['normalDeta'+'ilMap']),_0x5dadc0['diffuseDet'+'ailMode']=_0x336a4b['diffuseDet'+'ailMode'],_0x5dadc0['aoDetailMo'+'de']=_0x336a4b['aoDetailMo'+'de'],_0x5dadc0['clearCoatG'+'loss']=!!_0x336a4b['clearCoatG'+'loss'],_0x5dadc0['clearCoatP'+'ackedNorma'+'l']=_0x46bd90(_0x336a4b['clearCoatN'+'ormalMap']),_0x5dadc0['iorTint']=_0x367156(_0x336a4b['refraction'+'Index'],(-0x191a+-0x1*0x1b4f+0x346a)/(0x1173*0x2+0xcfc+-0x2fe1+0.5)),_0x3f1558['forcePassT'+'hroughSpec'+'ular']&&(_0x5dadc0['specularEn'+'coding']='linear',_0x5dadc0['sheenEncod'+'ing']='linear'),_0x5dadc0['iridescenc'+'eTint']=_0x336a4b['iridescenc'+'e']!==0x347+-0x229a+0x1f54,_0x5dadc0['glossInver'+'t']=_0x336a4b['glossInver'+'t'],_0x5dadc0['sheenGloss'+'Invert']=_0x336a4b['sheenGloss'+'Invert'],_0x5dadc0['clearCoatG'+'lossInvert']=_0x336a4b['clearCoatG'+'lossInvert'],_0x5dadc0['useSpecula'+'rColor']=_0x1e41c0,_0x5dadc0['litOptions']['separateAm'+'bient']=!(-0x1b10+-0xd9b+0x28ac*0x1),_0x5dadc0['litOptions']['pixelSnap']=_0x336a4b['pixelSnap'],_0x5dadc0['litOptions']['ambientSH']=!!_0x336a4b['ambientSH'],_0x5dadc0['litOptions']['twoSidedLi'+'ghting']=_0x336a4b['twoSidedLi'+'ghting'],_0x5dadc0['litOptions']['occludeSpe'+'cular']=_0x336a4b['occludeSpe'+'cular'],_0x5dadc0['litOptions']['occludeSpe'+'cularFloat']=_0x336a4b['occludeSpe'+'cularInten'+'sity']!==-0x1*-0xbc5+0x2241+0x15*-0x231,_0x5dadc0['litOptions']['useMsdf']=!!_0x336a4b['msdfMap'],_0x5dadc0['litOptions']['msdfTextAt'+'tribute']=!!_0x336a4b['msdfTextAt'+'tribute'],_0x5dadc0['litOptions']['alphaToCov'+'erage']=_0x336a4b['alphaToCov'+'erage'],_0x5dadc0['litOptions']['opacityFad'+'esSpecular']=_0x336a4b['opacityFad'+'esSpecular'],_0x5dadc0['litOptions']['opacityDit'+'her']=_0x336a4b['opacityDit'+'her'],_0x5dadc0['litOptions']['cubeMapPro'+'jection']=_0x336a4b['cubeMapPro'+'jection'],_0x5dadc0['litOptions']['occludeDir'+'ect']=_0x336a4b['occludeDir'+'ect'],_0x5dadc0['litOptions']['useSpecula'+'r']=_0x1a930e,_0x5dadc0['litOptions']['useSpecula'+'rityFactor']=(_0x11defa||!!_0x336a4b['specularit'+'yFactorMap'])&&_0x336a4b['useMetalne'+'ssSpecular'+'Color'],_0x5dadc0['litOptions']['enableGGXS'+'pecular']=_0x336a4b['enableGGXS'+'pecular'],_0x5dadc0['litOptions']['fresnelMod'+'el']=_0x336a4b['fresnelMod'+'el'],_0x5dadc0['litOptions']['useRefract'+'ion']=(_0x336a4b['refraction']||!!_0x336a4b['refraction'+'Map'])&&(_0x336a4b['useDynamic'+'Refraction']||_0x5dadc0['litOptions']['reflection'+'Source']!==vr),_0x5dadc0['litOptions']['useClearCo'+'at']=!!_0x336a4b['clearCoat'],_0x5dadc0['litOptions']['useSheen']=_0x336a4b['useSheen'],_0x5dadc0['litOptions']['useIridesc'+'ence']=_0x336a4b['useIridesc'+'ence']&&_0x336a4b['iridescenc'+'e']!==-0x287+0x10e9+0x20e*-0x7,_0x5dadc0['litOptions']['useMetalne'+'ss']=_0x336a4b['useMetalne'+'ss'],_0x5dadc0['litOptions']['useDynamic'+'Refraction']=_0x336a4b['useDynamic'+'Refraction'],_0x5dadc0['litOptions']['dispersion']=_0x336a4b['dispersion']>-0x23cb+0x96f*0x2+0x10ed,_0x5dadc0['litOptions']['shadowCatc'+'her']=_0x336a4b['shadowCatc'+'her'];}['_updateEnv'+'Options'](_0x417e81,_0x5ab676,_0x4e8592,_0x266450){_0x417e81['litOptions']['fog']=_0x5ab676['useFog']?_0x266450['fog']:Kn,_0x417e81['litOptions']['gamma']=_0x266450['shaderOutp'+'utGamma'],_0x417e81['litOptions']['toneMap']=_0x5ab676['useTonemap']?_0x266450['toneMappin'+'g']:nv;let _0x621a67=!(-0x1f7+0xad5+-0x8dd*0x1);if(_0x5ab676['envAtlas']&&_0x5ab676['cubeMap']?(_0x417e81['litOptions']['reflection'+'Source']=xh,_0x417e81['litOptions']['reflection'+'Encoding']=_0x5ab676['envAtlas']['encoding'],_0x417e81['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x5ab676['cubeMap']['encoding']):_0x5ab676['envAtlas']?(_0x417e81['litOptions']['reflection'+'Source']=vh,_0x417e81['litOptions']['reflection'+'Encoding']=_0x5ab676['envAtlas']['encoding']):_0x5ab676['cubeMap']?(_0x417e81['litOptions']['reflection'+'Source']=Th,_0x417e81['litOptions']['reflection'+'Encoding']=_0x5ab676['cubeMap']['encoding']):_0x5ab676['sphereMap']?(_0x417e81['litOptions']['reflection'+'Source']=hv,_0x417e81['litOptions']['reflection'+'Encoding']=_0x5ab676['sphereMap']['encoding']):_0x5ab676['useSkybox']&&_0x4e8592['envAtlas']&&_0x4e8592['skybox']?(_0x417e81['litOptions']['reflection'+'Source']=xh,_0x417e81['litOptions']['reflection'+'Encoding']=_0x4e8592['envAtlas']['encoding'],_0x417e81['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x4e8592['skybox']['encoding'],_0x621a67=!(0x3a2+0x9*-0x12a+0x2*0x36c)):_0x5ab676['useSkybox']&&_0x4e8592['envAtlas']?(_0x417e81['litOptions']['reflection'+'Source']=vh,_0x417e81['litOptions']['reflection'+'Encoding']=_0x4e8592['envAtlas']['encoding'],_0x621a67=!(-0xa3*-0x1f+0x7d*-0x2f+0x336)):_0x5ab676['useSkybox']&&_0x4e8592['skybox']?(_0x417e81['litOptions']['reflection'+'Source']=Th,_0x417e81['litOptions']['reflection'+'Encoding']=_0x4e8592['skybox']['encoding'],_0x621a67=!(-0x19ce+-0xb3+0x3b*0x73)):(_0x417e81['litOptions']['reflection'+'Source']=vr,_0x417e81['litOptions']['reflection'+'Encoding']=null),_0x5ab676['ambientSH'])_0x417e81['litOptions']['ambientSou'+'rce']=im,_0x417e81['litOptions']['ambientEnc'+'oding']=null;else{const _0x4bbbb5=_0x5ab676['envAtlas']||(_0x5ab676['useSkybox']&&_0x4e8592['envAtlas']?_0x4e8592['envAtlas']:null);_0x4bbbb5&&!_0x5ab676['sphereMap']?(_0x417e81['litOptions']['ambientSou'+'rce']=rm,_0x417e81['litOptions']['ambientEnc'+'oding']=_0x4bbbb5['encoding']):(_0x417e81['litOptions']['ambientSou'+'rce']=am,_0x417e81['litOptions']['ambientEnc'+'oding']=null);}_0x417e81['litOptions']['skyboxInte'+'nsity']=_0x621a67,_0x417e81['litOptions']['useCubeMap'+'Rotation']=_0x621a67&&_0x4e8592['_skyboxRot'+'ationShade'+'rInclude'];}['_updateLig'+'htOptions'](_0x307840,_0x1e24a9,_0x37a6ba,_0x42f212,_0x5c0582){if(_0x307840['lightMap']=!(-0x159e+-0x4c6+0x1a65),_0x307840['lightMapCh'+'annel']='',_0x307840['lightMapUv']=0x135f*0x1+0xa47+-0x1da6,_0x307840['lightMapTr'+'ansform']=-0x45*-0x57+-0x1985+0x212,_0x307840['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0x1913+-0x1e*-0x6b+-0x1*0x259c),_0x307840['dirLightMa'+'p']=!(-0x55d*-0x1+-0x2083+0x1b27),_0x42f212&&(_0x307840['litOptions']['noShadow']=(_0x42f212&wh)!==0x9*-0x35b+-0x79a*0x1+0x25cd*0x1,(_0x42f212&ou)!==0x1*0x1dd5+0xb*0x240+-0x1*0x3695&&(_0x307840['lightMapEn'+'coding']=_0x1e24a9['lightmapPi'+'xelFormat']===Ne?'rgbm':'linear',_0x307840['lightMap']=!(-0x29*0xe6+0x169f+0xe37),_0x307840['lightMapCh'+'annel']='rgb',_0x307840['lightMapUv']=0x1*-0x1f51+-0x4*0x621+0x37d6,_0x307840['lightMapTr'+'ansform']=-0x12d5+-0x7ce+-0x1*-0x1aa3,_0x307840['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!_0x37a6ba['lightMap'],(_0x42f212&uv)!==0x987+-0x196a+0x7*0x245&&(_0x307840['dirLightMa'+'p']=!(-0x1250+0x5e*0x67+0x1c6*-0xb)),(_0x42f212&pv)!==0x1ffc+0x1*0x1aa7+-0x3aa3*0x1&&(_0x307840['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0x14*0x9d+-0xbf*0x22+-0xb*-0x131)))),_0x37a6ba['useLightin'+'g']){const _0x1bf214=[],_0x16b848=_0x42f212?_0x42f212>>0x21fe+0x1*0x6fe+-0x28ec:Ss;_0x307840['litOptions']['lightMaskD'+'ynamic']=!!(_0x16b848&Ss),_0x5c0582&&(Ws['collectLig'+'hts'](ve,_0x5c0582[ve],_0x1bf214,_0x16b848),_0x1e24a9['clusteredL'+'ightingEna'+'bled']||(Ws['collectLig'+'hts'](Ke,_0x5c0582[Ke],_0x1bf214,_0x16b848),Ws['collectLig'+'hts'](Ze,_0x5c0582[Ze],_0x1bf214,_0x16b848))),_0x307840['litOptions']['lights']=_0x1bf214;}else _0x307840['litOptions']['lights']=[];_0x307840['litOptions']['lights']['length']===-0x235b+-0xb76+0x33*0xeb&&!_0x1e24a9['clusteredL'+'ightingEna'+'bled']&&(_0x307840['litOptions']['noShadow']=!(0xc1*0x16+-0x204+0x2ea*-0x5));}['_getMapTra'+'nsformID'](_0x114033,_0x3275b1){if(!_0x114033)return-0x2*-0x1303+-0x26dd+0xd7;let _0x305969=this['_mapXForms'][_0x3275b1];_0x305969||(_0x305969=[],this['_mapXForms'][_0x3275b1]=_0x305969);for(let _0x110950=-0x1d03*0x1+-0x1*0x73d+0x28*0xe8;_0x110950<_0x305969['length'];_0x110950++)if(G_(_0x305969[_0x110950][-0x1bd+-0x65f+0x81c]['value'],_0x114033[0x1*0x151+0x11fe+-0x134f*0x1]['value'])&&G_(_0x305969[_0x110950][-0x1307+0x1a94+0x284*-0x3]['value'],_0x114033[-0x101f+-0x3*-0x59+0xf15]['value']))return _0x110950+(0x1041+0x2335*-0x1+0x12f5*0x1);return _0x305969['push'](_0x114033);}}function rt(_0x17f884,_0x37bc23=!(-0x3*-0x563+0xdc9+-0x1df2),_0x3d764a=!(-0xc4b*-0x2+0x1*0xe71+0x2707*-0x1)){const _0x5ed6a8={};return _0x5ed6a8[_0x17f884+'Map']='texture',_0x5ed6a8[_0x17f884+'MapTiling']='vec2',_0x5ed6a8[_0x17f884+'MapOffset']='vec2',_0x5ed6a8[_0x17f884+('MapRotatio'+'n')]='number',_0x5ed6a8[_0x17f884+'MapUv']='number',_0x37bc23&&(_0x5ed6a8[_0x17f884+'MapChannel']='string',_0x3d764a&&(_0x5ed6a8[_0x17f884+('VertexColo'+'r')]='boolean',_0x5ed6a8[_0x17f884+('VertexColo'+'rChannel')]='string')),_0x5ed6a8;}const $n={'name':'string','chunks':'chunks','mappingFormat':'string','_engine':'boolean','ambient':'rgb',...rt('ao'),...rt('aoDetail',!(0x1643+-0xf00+-0x743),!(-0x1da4+0x1*-0x74c+0x24f1)),'aoDetailMode':'string','aoIntensity':'number','diffuse':'rgb',...rt('diffuse'),...rt('diffuseDet'+'ail',!(-0x60*-0x30+0x13f4+-0x25f4),!(-0x1*-0xcb3+0x26*0x23+-0x11e4)),'diffuseDetailMode':'string','specular':'rgb','specularTint':'boolean',...rt('specular'),'occludeSpecular':'enum:occlu'+'deSpecular','specularityFactor':'number','specularityFactorTint':'boolean',...rt('specularit'+'yFactor'),'useMetalness':'boolean','metalness':'number','enableGGXSpecular':'boolean','metalnessTint':'boolean',...rt('metalness'),'useMetalnessSpecularColor':'boolean','anisotropyIntensity':'number','anisotropyRotation':'number',...rt('anisotropy'),'shininess':'number','gloss':'number','glossInvert':'boolean',...rt('gloss'),'clearCoat':'number',...rt('clearCoat'),'clearCoatGloss':'number','clearCoatGlossInvert':'boolean',...rt('clearCoatG'+'loss'),'clearCoatBumpiness':'number',...rt('clearCoatN'+'ormal',!(0x2*0x27d+0x11*0x3+-0x296*0x2)),'useSheen':'boolean','sheen':'rgb',...rt('sheen'),'sheenGloss':'number','sheenGlossInvert':'boolean',...rt('sheenGloss'),'fresnelModel':'number','emissive':'rgb',...rt('emissive'),'emissiveIntensity':'number',...rt('normal',!(0x1a93*-0x1+0xca1+0xdf3)),'bumpiness':'number',...rt('normalDeta'+'il',!(-0xd13*0x1+0xd*0xdd+0x1db)),'normalDetailMapBumpiness':'number',...rt('height',!(-0x143a+0x20ba+-0xc80),!(-0x1cb6+0x2e*-0x6+0x1dcb*0x1)),'heightMapFactor':'number','alphaToCoverage':'boolean','alphaTest':'number','alphaFade':'number','opacity':'number',...rt('opacity'),'opacityFadesSpecular':'boolean','opacityDither':'string','opacityShadowDither':'string','reflectivity':'number','refraction':'number','refractionTint':'boolean',...rt('refraction'),'refractionIndex':'number','dispersion':'number','thickness':'number','thicknessTint':'boolean',...rt('thickness'),'attenuation':'rgb','attenuationDistance':'number','useDynamicRefraction':'boolean','sphereMap':'texture','cubeMap':'cubemap','cubeMapProjection':'number','cubeMapProjectionBox':'boundingbo'+'x','useIridescence':'boolean','iridescence':'number','iridescenceTint':'boolean',...rt('iridescenc'+'e'),'iridescenceThicknessTint':'boolean','iridescenceThicknessMin':'number','iridescenceThicknessMax':'number','iridescenceRefractionIndex':'number',...rt('iridescenc'+'eThickness'),...rt('light'),'depthTest':'boolean','depthFunc':'enum:depth'+'Func','depthWrite':'boolean','depthBias':'number','slopeDepthBias':'number','cull':'enum:cull','blendType':'enum:blend'+'Type','useFog':'boolean','useLighting':'boolean','useSkybox':'boolean','useTonemap':'boolean','envAtlas':'texture','twoSidedLighting':'boolean','shadowCatcher':'boolean'},Cd=[];for(const l in $n)$n[l]==='texture'&&Cd['push'](l);const fm=[];for(const l in $n)$n[l]==='cubemap'&&fm['push'](l);const gb={'aoMapVertexColor':'boolean','diffuseMapTint':'boolean','diffuseMapVertexColor':'boolean','emissiveMapTint':'boolean','emissiveMapVertexColor':'boolean','glossMapVertexColor':'boolean','metalnessMapVertexColor':'boolean','opacityMapVertexColor':'boolean','specularAntialias':'boolean','specularMapTint':'boolean','specularMapVertexColor':'boolean','ambientTint':'boolean','emissiveTint':'boolean','diffuseTint':'boolean','sheenTint':'boolean','conserveEnergy':'boolean','useGamma':'boolean','useGammaTonemap':'boolean','sheenGlossTint':'boolean','anisotropy':'boolean'},Kc={},bv={};let no=new Set();const oc=new ie();class Ut extends tr{constructor(){super(),h(this,'userAttrib'+'utes',new Map()),h(this,'onUpdateSh'+'ader'),(this['_assetRefe'+'rences']={},this['_activePar'+'ams']=new Set(),this['_activeLig'+'htingParam'+'s']=new Set(),this['shaderOptB'+'uilder']=new _b(),this['reset']());}['reset'](){Object['keys'](Kc)['forEach'](_0x251150=>{this['_'+_0x251150]=Kc[_0x251150]['value']();}),this['_uniformCa'+'che']={};}['copy'](_0x1f85d5){return super['copy'](_0x1f85d5),Object['keys'](Kc)['forEach'](_0x132716=>{this[_0x132716]=_0x1f85d5[_0x132716];}),this['userAttrib'+'utes']=new Map(_0x1f85d5['userAttrib'+'utes']),this;}['setAttribu'+'te'](_0x16994f,_0x1d5c33){this['userAttrib'+'utes']['set'](_0x1d5c33,_0x16994f);}['_setParame'+'ter'](_0x44fe96,_0x15f2ba){no['add'](_0x44fe96),this['setParamet'+'er'](_0x44fe96,_0x15f2ba);}['_setParame'+'ters'](_0x5b968){_0x5b968['forEach'](_0x39a09e=>{this['_setParame'+'ter'](_0x39a09e['name'],_0x39a09e['value']);});}['_processPa'+'rameters'](_0x1ad8eb){const _0x40a224=this[_0x1ad8eb];_0x40a224['forEach'](_0x3c8e38=>{no['has'](_0x3c8e38)||delete this['parameters'][_0x3c8e38];}),this[_0x1ad8eb]=no,no=_0x40a224,no['clear']();}['_updateMap'](_0x197000){const _0x44f7bc=_0x197000+'Map',_0xbb9ece=this[_0x44f7bc];if(_0xbb9ece){this['_setParame'+'ter']('texture_'+_0x44f7bc,_0xbb9ece);const _0x5b103d=_0x44f7bc+'Transform',_0x468eae=this['getUniform'](_0x5b103d);_0x468eae&&this['_setParame'+'ters'](_0x468eae);}}['_allocUnif'+'orm'](_0x34c4bd,_0x32b31f){let _0x526ebc=this['_uniformCa'+'che'][_0x34c4bd];return _0x526ebc||(_0x526ebc=_0x32b31f(),this['_uniformCa'+'che'][_0x34c4bd]=_0x526ebc),_0x526ebc;}['getUniform'](_0x35dc3f,_0x3c0912,_0x523fcc){return bv[_0x35dc3f](this,_0x3c0912,_0x523fcc);}['updateUnif'+'orms'](_0x382fe8,_0x45e2d0){const _0x3855c9=_0x23ff29=>this['getUniform'](_0x23ff29,_0x382fe8,_0x45e2d0);this['_setParame'+'ter']('material_a'+'mbient',_0x3855c9('ambient')),this['_setParame'+'ter']('material_d'+'iffuse',_0x3855c9('diffuse')),this['_setParame'+'ter']('material_a'+'oIntensity',this['aoIntensit'+'y']),this['useMetalne'+'ss']?((!this['metalnessM'+'ap']||this['metalness']<0x2601+-0x4*0x981+0x4*0x1)&&this['_setParame'+'ter']('material_m'+'etalness',this['metalness']),(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x3855c9('specular')),(!this['specularit'+'yFactorMap']||this['specularit'+'yFactorTin'+'t'])&&this['_setParame'+'ter']('material_s'+'pecularity'+'Factor',this['specularit'+'yFactor']),this['_setParame'+'ter']('material_s'+'heen',_0x3855c9('sheen')),this['_setParame'+'ter']('material_s'+'heenGloss',this['sheenGloss']),this['_setParame'+'ter']('material_r'+'efractionI'+'ndex',this['refraction'+'Index'])):(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x3855c9('specular')),this['enableGGXS'+'pecular']&&(this['_setParame'+'ter']('material_a'+'nisotropyI'+'ntensity',this['anisotropy'+'Intensity']),this['_setParame'+'ter']('material_a'+'nisotropyR'+'otation',[Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']),Math['sin'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD'])])),this['clearCoat']>-0x4*0x633+-0xf2*0x7+0x1f6a&&(this['_setParame'+'ter']('material_c'+'learCoat',this['clearCoat']),this['_setParame'+'ter']('material_c'+'learCoatGl'+'oss',this['clearCoatG'+'loss']),this['_setParame'+'ter']('material_c'+'learCoatBu'+'mpiness',this['clearCoatB'+'umpiness'])),this['_setParame'+'ter']('material_g'+'loss',this['gloss']),w['call'](()=>{this['emissiveMa'+'p']&&this['emissive']['r']===-0xcae*-0x1+0x39*0x89+-0x2b2f&&this['emissive']['g']===0x1fbd+-0x10fc+0x4eb*-0x3&&this['emissive']['b']===-0x3e*0x6c+-0x3*-0xaa3+-0x5c1&&w['warnOnce']('Emissive\x20m'+'ap\x20is\x20set\x20'+'but\x20emissi'+'ve\x20color\x20i'+'s\x20black,\x20m'+'aking\x20the\x20'+'map\x20invisi'+'ble.\x20Set\x20e'+'missive\x20co'+'lor\x20to\x20whi'+'te\x20to\x20make'+'\x20the\x20map\x20v'+'isible.\x20Re'+'ndering\x20['+Q['toString']()+']',this);}),this['_setParame'+'ter']('material_e'+'missive',_0x3855c9('emissive')),this['_setParame'+'ter']('material_e'+'missiveInt'+'ensity',this['emissiveIn'+'tensity']),this['refraction']>0x11d6+0x2532+-0x3708&&this['_setParame'+'ter']('material_r'+'efraction',this['refraction']),this['dispersion']>-0x1*0x1a44+-0x188b+-0x1*-0x32cf&&this['_setParame'+'ter']('material_d'+'ispersion',this['dispersion']),this['useDynamic'+'Refraction']&&(this['_setParame'+'ter']('material_t'+'hickness',this['thickness']),this['_setParame'+'ter']('material_a'+'ttenuation',_0x3855c9('attenuatio'+'n')),this['_setParame'+'ter']('material_i'+'nvAttenuat'+'ionDistanc'+'e',this['attenuatio'+'nDistance']===-0x1*0x15ee+0x1820+0x1*-0x232?0x2f2*-0x1+0x25*0x8b+-0x5b7*0x3:(-0x4b*-0x1e+-0x1*0x2452+0x1b89)/this['attenuatio'+'nDistance'])),this['useIridesc'+'ence']&&(this['_setParame'+'ter']('material_i'+'ridescence',this['iridescenc'+'e']),this['_setParame'+'ter']('material_i'+'ridescence'+'Refraction'+'Index',this['iridescenc'+'eRefractio'+'nIndex']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'in',this['iridescenc'+'eThickness'+'Min']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'ax',this['iridescenc'+'eThickness'+'Max'])),this['_setParame'+'ter']('material_o'+'pacity',this['opacity']),this['opacityFad'+'esSpecular']===!(0x231e*0x1+0x1ee9+-0x4206)&&this['_setParame'+'ter']('material_a'+'lphaFade',this['alphaFade']),this['occludeSpe'+'cular']&&this['_setParame'+'ter']('material_o'+'ccludeSpec'+'ularIntens'+'ity',this['occludeSpe'+'cularInten'+'sity']),this['cubeMapPro'+'jection']===av&&this['_setParame'+'ter'](_0x3855c9('cubeMapPro'+'jectionBox'));for(const _0x2c6af7 in bn)this['_updateMap'](_0x2c6af7);this['ambientSH']&&this['_setParame'+'ter']('ambientSH['+'0]',this['ambientSH']),this['normalMap']&&this['_setParame'+'ter']('material_b'+'umpiness',this['bumpiness']),this['normalMap']&&this['normalDeta'+'ilMap']&&this['_setParame'+'ter']('material_n'+'ormalDetai'+'lMapBumpin'+'ess',this['normalDeta'+'ilMapBumpi'+'ness']),this['heightMap']&&this['_setParame'+'ter']('material_h'+'eightMapFa'+'ctor',_0x3855c9('heightMapF'+'actor')),this['envAtlas']&&this['cubeMap']?(this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap'])):this['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']):this['cubeMap']?this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap']):this['sphereMap']&&this['_setParame'+'ter']('texture_sp'+'hereMap',this['sphereMap']),this['_setParame'+'ter']('material_r'+'eflectivit'+'y',this['reflectivi'+'ty']),this['_processPa'+'rameters']('_activePar'+'ams'),super['updateUnif'+'orms'](_0x382fe8,_0x45e2d0);}['updateEnvU'+'niforms'](_0x38bec9,_0x52c979){!(this['envAtlas']||this['cubeMap']||this['sphereMap'])&&this['useSkybox']&&(_0x52c979['envAtlas']&&_0x52c979['skybox']?(this['_setParame'+'ter']('texture_en'+'vAtlas',_0x52c979['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',_0x52c979['skybox'])):_0x52c979['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',_0x52c979['envAtlas']):_0x52c979['skybox']&&this['_setParame'+'ter']('texture_cu'+'beMap',_0x52c979['skybox'])),this['_processPa'+'rameters']('_activeLig'+'htingParam'+'s');}['getShaderV'+'ariant'](_0x2224c1){const {device:_0x53cbfc,scene:_0x5b0317,pass:_0x5e228f,objDefs:_0x2f911c,sortedLights:_0x17ce90,cameraShaderParams:_0x5a3924}=_0x2224c1;this['updateEnvU'+'niforms'](_0x53cbfc,_0x5b0317);const _0x40713d=Si['get'](_0x53cbfc)['getByIndex'](_0x5e228f),_0x5abc50=_0x5e228f===Zn||_0x5e228f===Rl||_0x40713d['isShadow'];let _0x332d18=_0x5abc50?Jd['optionsCon'+'textMin']:Jd['optionsCon'+'text'];_0x332d18['defines']=$t['getCoreDef'+'ines'](this,_0x2224c1),_0x5abc50?this['shaderOptB'+'uilder']['updateMinR'+'ef'](_0x332d18,_0x5b0317,this,_0x2f911c,_0x5e228f,_0x17ce90):this['shaderOptB'+'uilder']['updateRef'](_0x332d18,_0x5b0317,_0x5a3924,this,_0x2f911c,_0x5e228f,_0x17ce90),this['useFog']||_0x332d18['defines']['set']('FOG','NONE'),_0x332d18['defines']['set']('TONEMAP',ov[_0x332d18['litOptions']['toneMap']]),this['onUpdateSh'+'ader']&&(_0x332d18=this['onUpdateSh'+'ader'](_0x332d18));const _0x3c1846=new Ad(_0x2224c1['viewUnifor'+'mFormat'],_0x2224c1['viewBindGr'+'oupFormat'],_0x2224c1['vertexForm'+'at']),_0x5c0489=Hn(_0x53cbfc);_0x5c0489['register']('standard',Jd);const _0x5e87dd=_0x5c0489['getProgram']('standard',_0x332d18,_0x3c1846,this['userId']);return this['_dirtyShad'+'er']=!(-0x18+0x5f*0x53+-0x1eb4),_0x5e87dd;}['destroy'](){for(const _0x2d9e00 in this['_assetRefe'+'rences'])this['_assetRefe'+'rences'][_0x2d9e00]['_unbind']();this['_assetRefe'+'rences']=null,super['destroy']();}}h(Ut,'TEXTURE_PA'+'RAMETERS',Cd),h(Ut,'CUBEMAP_PA'+'RAMETERS',fm);const Pd=(_0x1a5a31,_0x259623)=>{bv[_0x1a5a31]=_0x259623;},um=(_0x3ab74a,_0x4ab7ca,_0x3b7093,_0x10f951)=>{Object['defineProp'+'erty'](Ut['prototype'],_0x3ab74a,{'get':_0x10f951||function(){return this['_'+_0x3ab74a];},'set':_0x3b7093}),Kc[_0x3ab74a]={'value':_0x4ab7ca};},Sb=_0x5b39c9=>{const _0x321b64='_'+_0x5b39c9['name'],_0xf9b06c=_0x5b39c9['dirtyShade'+'rFunc']||(()=>!(0xc00+-0xdcc+0x1cc)),_0x3347d9=function(_0x406c74){const _0x5c2dee=this[_0x321b64];_0x5c2dee!==_0x406c74&&(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0xf9b06c(_0x5c2dee,_0x406c74),this[_0x321b64]=_0x406c74);};um(_0x5b39c9['name'],()=>_0x5b39c9['defaultVal'+'ue'],_0x3347d9,_0x5b39c9['getterFunc']);},yb=_0x20a331=>{const _0x3ec114='_'+_0x20a331['name'],_0x5c4fb6=_0x20a331['dirtyShade'+'rFunc']||(()=>!(0x1f3*0xe+-0x14a1+-0x6a9)),_0x51e685=function(_0x3966b9){const _0x49050a=this[_0x3ec114];_0x49050a['equals'](_0x3966b9)||(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x5c4fb6(_0x49050a,_0x3966b9),this[_0x3ec114]=_0x49050a['copy'](_0x3966b9));};um(_0x20a331['name'],()=>_0x20a331['defaultVal'+'ue']['clone'](),_0x51e685,_0x20a331['getterFunc']);},Es=_0x16f017=>_0x16f017['defaultVal'+'ue']&&_0x16f017['defaultVal'+'ue']['clone']?yb(_0x16f017):Sb(_0x16f017);function et(_0x437519,_0x4e8fdc='rgb',_0x42ec73=!(0x244d*0x1+-0x7*-0x263+-0x3502),_0x424e37=0xcc+0x750+-0x81c){bn[_0x437519]=_0x4e8fdc['length']||-(-0x212*-0xf+0x1a5*0x5+-0x2746),Es({'name':_0x437519+'Map','defaultValue':null,'dirtyShaderFunc':(_0x42c130,_0x2d8e86)=>!!_0x42c130!=!!_0x2d8e86||_0x42c130&&(_0x42c130['type']!==_0x2d8e86['type']||_0x42c130['format']!==_0x2d8e86['format'])}),Es({'name':_0x437519+'MapTiling','defaultValue':new J(0xd96+0x3a3+-0x89c*0x2,0x278*0xe+0x11b*-0x1+0x10ba*-0x2)}),Es({'name':_0x437519+'MapOffset','defaultValue':new J(-0x172b+-0x1*0x1c28+0x3353,-0x156e+0x2068+-0x5*0x232)}),Es({'name':_0x437519+('MapRotatio'+'n'),'defaultValue':0x0}),Es({'name':_0x437519+'MapUv','defaultValue':_0x424e37}),_0x4e8fdc&&(Es({'name':_0x437519+'MapChannel','defaultValue':_0x4e8fdc}),_0x42ec73&&(Es({'name':_0x437519+('VertexColo'+'r'),'defaultValue':!(0x1cff+-0xce*0x1f+-0x40c)}),Es({'name':_0x437519+('VertexColo'+'rChannel'),'defaultValue':_0x4e8fdc})));const _0xcf12d=_0x437519+'MapTiling',_0x1fa660=_0x437519+'MapOffset',_0x4e6d89=_0x437519+('MapRotatio'+'n'),_0x45bb61=_0x437519+('MapTransfo'+'rm');Pd(_0x45bb61,(_0x10a493,_0x5e08af,_0x2f4fd8)=>{const _0xc8fc56=_0x10a493[_0xcf12d],_0x21c46f=_0x10a493[_0x1fa660],_0x2bbd9a=_0x10a493[_0x4e6d89];if(_0xc8fc56['x']===0x2580+0x25db+0x789*-0xa&&_0xc8fc56['y']===-0xcbc+-0x1bf0+0x75*0x59&&_0x21c46f['x']===-0x10*-0x35+-0x1*0x23a4+0x2054&&_0x21c46f['y']===0x1346+0x2*-0x220+-0xf06&&_0x2bbd9a===0x79*0x10+0x1c9*0x1+0x959*-0x1)return null;const _0x24d78a=_0x10a493['_allocUnif'+'orm'](_0x45bb61,()=>[{'name':'texture_'+_0x45bb61+'0','value':new Float32Array(-0x15f8+-0x136b*0x1+-0x14b3*-0x2)},{'name':'texture_'+_0x45bb61+'1','value':new Float32Array(-0x3*-0x1c7+0x211d+-0x266f)}]),_0x4083e1=Math['cos'](_0x2bbd9a*Y['DEG_TO_RAD']),_0x421450=Math['sin'](_0x2bbd9a*Y['DEG_TO_RAD']),_0x10af7c=_0x24d78a[0x1eb*-0x5+0x39e+-0x8b*-0xb]['value'];_0x10af7c[-0x2*-0x931+0x200+-0x1462]=_0x4083e1*_0xc8fc56['x'],_0x10af7c[0x2*-0x829+0x1*0x1a1+0xeb2]=-_0x421450*_0xc8fc56['y'],_0x10af7c[0xdc9*-0x1+0x1*0x1a71+-0xca6]=_0x21c46f['x'];const _0x4503c2=_0x24d78a[-0x124*-0x6+-0x1382+0xcab]['value'];return _0x4503c2[0xb*0x380+-0x1722+-0xf5e]=_0x421450*_0xc8fc56['x'],_0x4503c2[0x1d4d+-0x8a0+0x1b9*-0xc]=_0x4083e1*_0xc8fc56['y'],_0x4503c2[-0x1*0x1681+0x8d3+0x30*0x49]=-0x19b+0x1*0x11ab+-0x100f-_0xc8fc56['y']-_0x21c46f['y'],_0x24d78a;});}function Ra(_0x1e998f,_0x1856d1){Es({'name':_0x1e998f,'defaultValue':_0x1856d1,'getterFunc':function(){return this['_dirtyShad'+'er']=!(0x1f8c+-0x84*-0x31+-0x18*0x25e),this['_'+_0x1e998f];}}),Pd(_0x1e998f,(_0x27f857,_0xee94fa,_0x23d37f)=>{const _0x4ee39d=_0x27f857['_allocUnif'+'orm'](_0x1e998f,()=>new Float32Array(-0x1*0xc5b+-0x2ad+0xf0b)),_0xd04b47=_0x27f857[_0x1e998f];return oc['linear'](_0xd04b47),_0x4ee39d[0x1*0xa16+-0x1e32+0x141c]=oc['r'],_0x4ee39d[-0x1*0x807+-0x15d8+0x1de0]=oc['g'],_0x4ee39d[0x11b5*0x2+-0x3*0x756+0x31*-0x46]=oc['b'],_0x4ee39d;});}function ze(_0x1d3d84,_0x1547ce,_0x50120a){Es({'name':_0x1d3d84,'defaultValue':_0x1547ce,'dirtyShaderFunc':(_0x5a5c45,_0x4d9f1c)=>(_0x5a5c45===-0x20e1+-0xc9f+0x2d80||_0x5a5c45===0xa6b*0x2+0xc1+0x399*-0x6)!=(_0x4d9f1c===-0x13*-0x1a5+-0xa41+-0x14fe||_0x4d9f1c===-0x15*0x2+0x1288+-0x3*0x61f)}),Pd(_0x1d3d84,_0x50120a);}function oo(_0xe0f40e,_0xfadeef){Es({'name':_0xe0f40e,'defaultValue':null,'dirtyShaderFunc':(_0x318756,_0x1613b8)=>!!_0x318756==!!_0x1613b8}),Pd(_0xe0f40e,_0xfadeef);}function ke(_0x4c1d70,_0x2675bb){Es({'name':_0x4c1d70,'defaultValue':_0x2675bb});}function vb(){Ra('ambient',new ie(-0xe2e+0x1*-0x707+0xf*0x16a,0x6f*-0x1+-0x18b3+0x37*0x75,-0x71*0x3d+-0xb*0x359+0x3fc1)),Ra('diffuse',new ie(-0x214d+-0x2084+0x41d2,-0x1596+0x1*-0xf1e+0x1*0x24b5,-0x225e*0x1+-0x11*0xcb+0x2fda)),Ra('specular',new ie(0x2*-0x94b+-0x397*0x7+0x2bb7,0x1b36*-0x1+-0x1a14+0x2ce*0x13,0xd06+-0x11*0x11f+0xf*0x67)),Ra('emissive',new ie(-0x1977+0x2484+-0xb0d,0xc95+-0x1006+-0x1*-0x371,0x6a*0x35+0x2*-0x39+-0x10*0x158)),Ra('sheen',new ie(-0x1244+0x1df+0x1066,-0x19f9+0x5ad*0x1+0x144d,0x87b+-0x13a*-0x1a+-0x285e)),Ra('attenuatio'+'n',new ie(-0x450+0x1cd8+0x27*-0xa1,-0x1209*0x2+0x2*-0x797+-0x1*-0x3341,-0x1d41*-0x1+0x13b2+-0x1879*0x2)),ze('emissiveIn'+'tensity',-0x1*-0x1ae+0x16fe*0x1+-0x18ab*0x1),ze('specularit'+'yFactor',0x529*-0x5+-0xda3*-0x1+-0x7*-0x1bd),ze('sheenGloss',0x253c+0x1b73+0x40af*-0x1),ze('gloss',0x436+0x1*0x1628+-0x2ee*0x9+0.25),ze('aoIntensit'+'y',0x152*0x1+0x1e7a+0x3*-0xa99),ze('heightMapF'+'actor',-0x1d18+-0xed6+-0x2bef*-0x1,(_0x5bb663,_0xd4eab7,_0x428390)=>_0x5bb663['heightMapF'+'actor']*(-0x1d03*-0x1+-0x947+-0x13bc+0.025)),ze('opacity',0xc55+-0x1*-0x92f+-0x1583*0x1),ze('alphaFade',-0x11b5+0x85c+0x95a),ze('alphaTest',0x222b+0x502+0x3*-0xd0f),ze('bumpiness',0xf9*0x3+0x15d*-0x12+-0x10*-0x15a),ze('normalDeta'+'ilMapBumpi'+'ness',0x1152+-0x1ae4+-0x993*-0x1),ze('reflectivi'+'ty',0x2*-0x2f9+0x1*0xaeb+-0x4f8),ze('occludeSpe'+'cularInten'+'sity',0x180e+0x1*-0x21d7+0x9ca),ze('refraction',-0x16cd*-0x1+-0x54e+-0x117f),ze('refraction'+'Index',(-0x1a+0x1*-0x761+0x77c)/(-0x2078+-0xc57*-0x3+-0xc2*0x6+0.5)),ze('dispersion',0x17f6+-0x647+-0x5e5*0x3),ze('thickness',-0x1063+-0x1fb1*-0x1+-0xf4e),ze('attenuatio'+'nDistance',-0x89d+0x2*-0x62a+0x14f1),ze('metalness',0x3a*0x97+-0x1778*-0x1+0x5*-0xb89),ze('anisotropy'+'Intensity',0x17e3+-0x1458+0x38b*-0x1),ze('anisotropy'+'Rotation',0x108a+0x3f*0x3+-0x1147*0x1),ze('clearCoat',-0xc*0x2c4+0x11d8+0xf58),ze('clearCoatG'+'loss',0x23c4+0x18b7+-0x3c7a),ze('clearCoatB'+'umpiness',-0x2*0x1011+0xce4+0x133f*0x1),ze('aoUvSet',0x1997+0x2381+0x2e*-0x154,null),ze('iridescenc'+'e',0xd9*-0x2+0x3*-0x82f+0x1a3f),ze('iridescenc'+'eRefractio'+'nIndex',(-0x56*0x8+-0x7*-0x349+-0x144e)/(-0x1e8d+0xcbd*0x1+-0x11d1*-0x1+0.5)),ze('iridescenc'+'eThickness'+'Min',-0x206+0xe1*0x3+-0x9d),ze('iridescenc'+'eThickness'+'Max',0x1e+-0x219*0x3+-0x3*-0x20f),oo('ambientSH'),oo('cubeMapPro'+'jectionBox',(_0x3d4635,_0x24ebf1,_0x2db8a1)=>{const _0x491ff7=_0x3d4635['_allocUnif'+'orm']('cubeMapPro'+'jectionBox',()=>[{'name':'envBoxMin','value':new Float32Array(-0x59*0x65+-0xd17+0x3037)},{'name':'envBoxMax','value':new Float32Array(0x727+0x13b1+-0x1ad5)}]),_0x507fa2=_0x3d4635['cubeMapPro'+'jectionBox']['getMin'](),_0x375fef=_0x491ff7[0x3fd*-0x2+-0xc1f*0x1+0xf5*0x15]['value'];_0x375fef[0x2572+0xe39+0x33ab*-0x1]=_0x507fa2['x'],_0x375fef[-0x1*-0x6b2+0x2169*0x1+-0x281a]=_0x507fa2['y'],_0x375fef[0x23c5+-0x2705*-0x1+-0x4ac8]=_0x507fa2['z'];const _0x512aca=_0x3d4635['cubeMapPro'+'jectionBox']['getMax'](),_0x160598=_0x491ff7[0x713*0x5+0x23ee+-0xa9*0x6c]['value'];return _0x160598[-0x25de+0x2*-0x7c9+0x3570]=_0x512aca['x'],_0x160598[0x1051+-0x2a*0x7+-0xf2a]=_0x512aca['y'],_0x160598[-0xa94+-0x21db*-0x1+-0x1745]=_0x512aca['z'],_0x491ff7;}),ke('specularTi'+'nt',!(-0x1299+0x1d*-0x147+0x5*0xb21)),ke('specularit'+'yFactorTin'+'t',!(0xad2+0xb00+-0x15d1)),ke('useMetalne'+'ss',!(-0x12a3+-0x268e+0x1*0x3932)),ke('useMetalne'+'ssSpecular'+'Color',!(-0xa26+-0xa4e+-0x1*-0x1475)),ke('useSheen',!(-0xe4d+-0x3*-0x228+0x7d6)),ke('enableGGXS'+'pecular',!(-0x1*-0x2259+0xd36+-0x3*0xfda)),ke('occludeDir'+'ect',!(-0x436+-0x17df*0x1+0x1c16)),ke('opacityFad'+'esSpecular',!(-0x26b2+0x1*0xb02+-0x1bb0*-0x1)),ke('occludeSpe'+'cular',bd),ke('fresnelMod'+'el',Yp),ke('useDynamic'+'Refraction',!(-0x114b+0x14f5+0x1*-0x3a9)),ke('cubeMapPro'+'jection',tm),ke('useFog',!(0x658+-0xdb0+0x758)),ke('useLightin'+'g',!(-0x3a*0x6a+0x1937+-0x133)),ke('useTonemap',!(-0x2d9+0xccc+-0x9f3)),ke('useSkybox',!(-0x1bbb+0x329+-0x22*-0xb9)),ke('forceUv1',!(-0x35*-0x7f+-0x16f*-0xd+-0x2ced)),ke('pixelSnap',!(-0x9*0x2ef+-0x50a+0x1f72)),ke('twoSidedLi'+'ghting',!(-0x2017+0x1*0x1def+0x229)),ke('nineSliced'+'Mode',void(-0xd5*0x20+0x1cdf+0x1*-0x23f)),ke('msdfTextAt'+'tribute',!(0x176f+-0x1*-0x871+-0xc7*0x29)),ke('useIridesc'+'ence',!(-0x2*0x1133+-0xff9+0x3260)),ke('glossInver'+'t',!(-0x177f+-0x1f01*0x1+0x3681)),ke('sheenGloss'+'Invert',!(0x1a2f+-0x49d*0x3+-0x1b*0x75)),ke('clearCoatG'+'lossInvert',!(0xb73+0x526*-0x1+0x4*-0x193)),ke('opacityDit'+'her',Sa),ke('opacitySha'+'dowDither',Sa),ke('shadowCatc'+'her',!(-0x195+-0x248+0x3de)),et('diffuse'),et('specular'),et('emissive'),et('thickness','g'),et('specularit'+'yFactor','g'),et('normal',''),et('metalness','g'),et('gloss','g'),et('opacity','a'),et('refraction','g'),et('height','g',!(-0xe9a+-0x1*0x18c1+0x275c)),et('ao','g'),et('light','rgb',!(0x1*0xf49+0x3b*-0x7a+0xcd5),-0x1d*0x17+-0xf91+0x122d),et('msdf',''),et('diffuseDet'+'ail','rgb',!(0x1*0x16d3+-0x1c0*0x6+-0xc52)),et('normalDeta'+'il',''),et('aoDetail','g',!(-0xe9a+-0x4*-0x57+0xd3f)),et('clearCoat','g'),et('clearCoatG'+'loss','g'),et('clearCoatN'+'ormal',''),et('sheen','rgb'),et('sheenGloss','g'),et('iridescenc'+'e','g'),et('iridescenc'+'eThickness','g'),et('anisotropy',''),ke('diffuseDet'+'ailMode',p_),ke('aoDetailMo'+'de',p_),oo('cubeMap'),oo('sphereMap'),oo('envAtlas');const _0x398467=function(){return this['_prefilter'+'edCubemaps'];},_0x49d23b=function(_0x5207d6){const _0x2a1d4a=this['_prefilter'+'edCubemaps'];_0x5207d6=_0x5207d6||[];let _0x563d7c=!(-0x231e+-0xe92+-0x31b1*-0x1),_0x3dd9b8=!(0x367+0xb3+-0x2*0x20d);for(let _0x4a805e=-0x1b4c+0x273+-0x1*-0x18d9;_0x4a805e<0x2153+-0x2620+0x4d3;++_0x4a805e){const _0xf686af=_0x5207d6[_0x4a805e]||null;_0x2a1d4a[_0x4a805e]!==_0xf686af&&(_0x2a1d4a[_0x4a805e]=_0xf686af,_0x563d7c=!(0x26af*-0x1+-0x233f+0x49ee)),_0x3dd9b8=_0x3dd9b8&&!!_0x2a1d4a[_0x4a805e];}_0x563d7c&&(_0x3dd9b8?this['envAtlas']=Tv['generatePr'+'efilteredA'+'tlas'](_0x2a1d4a,{'target':this['envAtlas']}):this['envAtlas']&&(this['envAtlas']['destroy'](),this['envAtlas']=null),this['_dirtyShad'+'er']=!(0x14f+0x10ab+-0x11fa));},_0x3af1f4=[null,null,null,null,null,null];um('prefiltere'+'dCubemaps',()=>_0x3af1f4['slice'](),_0x49d23b,_0x398467);}vb();const Rt=class Rt{static['render'](_0x28567f,_0x2b94ff){const _0x11a6bb=_0x2b94ff['device'],_0x18f89b=_0x28567f['cells'],_0x10172c=_0x28567f['lightsBuff'+'er'],_0x1ed2c1=_0x10172c['boundsMin'],_0x2fc908=_0x10172c['boundsDelt'+'a'],_0x579418=_0x1ed2c1['clone']()['add'](_0x2fc908),_0x41402f=_0x10172c['boundsDelt'+'a']['clone']()['div'](_0x18f89b),_0x303a88=Rt['gridPositi'+'ons'],_0x4d0ede=Rt['gridColors'],_0x5683cf=new ie(-0x8c8+-0x19e1+-0x13*-0x1d3+0.3,-0x1fe9+0x21*-0x31+-0x15*-0x1d2+0.3,-0x2*-0xcd+-0x3a*-0x8a+0x2*-0x106f+0.3),_0x888734=(_0x4404d9,_0x4d5a98,_0x8e7638,_0x1f5586,_0xf520c4,_0x124996,_0x3f47ed,_0x3689ab,_0x21fbbb)=>{for(let _0x3437f1=0x260a+0x1dc8*-0x1+-0x842;_0x3437f1<=_0x4404d9;_0x3437f1++)for(let _0x32a5e3=0x1*-0x3bd+0xf0d*0x1+-0x2d4*0x4;_0x32a5e3<=_0x4d5a98;_0x32a5e3++){const _0x29ef21=_0x8e7638+_0x3437f1*_0x1f5586,_0x3ed431=_0xf520c4+_0x32a5e3*_0x124996;_0x21fbbb===-0x2706+-0x2708*-0x1+-0x2?_0x303a88['push'](_0x29ef21,_0x3f47ed,_0x3ed431,_0x29ef21,_0x3689ab,_0x3ed431):_0x21fbbb===-0x1b1b+-0x19f5+0x3511*0x1?_0x303a88['push'](_0x29ef21,_0x3ed431,_0x3f47ed,_0x29ef21,_0x3ed431,_0x3689ab):_0x21fbbb===-0x17*-0x1b+-0x2187+-0x7c7*-0x4&&_0x303a88['push'](_0x3f47ed,_0x29ef21,_0x3ed431,_0x3689ab,_0x29ef21,_0x3ed431);}};if(_0x888734(_0x18f89b['x'],_0x18f89b['z'],_0x1ed2c1['x'],_0x41402f['x'],_0x1ed2c1['z'],_0x41402f['z'],_0x1ed2c1['y'],_0x579418['y'],-0x1*-0x219+-0x1*0x1a+-0x1ff),_0x888734(_0x18f89b['x'],_0x18f89b['y'],_0x1ed2c1['x'],_0x41402f['x'],_0x1ed2c1['y'],_0x41402f['y'],_0x1ed2c1['z'],_0x579418['z'],0xd91+-0xcb5*0x3+0x188f*0x1),_0x888734(_0x18f89b['y'],_0x18f89b['z'],_0x1ed2c1['y'],_0x41402f['y'],_0x1ed2c1['z'],_0x41402f['z'],_0x1ed2c1['x'],_0x579418['x'],-0x1da8+-0x163f+0x33e9),_0x303a88['length']){const _0x5b541d=_0x303a88['length']/(0x244+-0x15a*0x1+-0xb*0x15);if(_0x5b541d!==_0x4d0ede['length']/(-0x489+-0x1fea+0x2477*0x1)){_0x4d0ede['length']=0x1d6f+0x30e*0x7+-0x32d1;for(let _0x54d356=0x21e*0x1+0x96*0x23+-0x16a0;_0x54d356<_0x5b541d;_0x54d356++)_0x4d0ede['push'](_0x5683cf['r'],_0x5683cf['g'],_0x5683cf['b'],_0x5683cf['a']);}_0x2b94ff['drawLineAr'+'rays'](_0x303a88,_0x4d0ede),_0x303a88['length']=-0x1e59+-0xd34+0x2b8d;}let _0x400d8b=Rt['mesh'];_0x400d8b||(_0x400d8b=new Ge(_0x11a6bb),_0x400d8b['clear'](!(0x13e3+0x232d*0x1+-0x3710),!(-0x2110+0x117a+0x1*0xf96)),Rt['mesh']=_0x400d8b);const _0x164ce3=[],_0x33e63b=[],_0x27fd2f=[],_0x55bb3e=_0x28567f['_cells']['x'],_0x29b007=_0x28567f['_cells']['z'],_0x4de869=_0x28567f['counts'],_0x3565bd=_0x28567f['_maxCellLi'+'ghtCount'],_0x3da756=new D(),_0x422d4a=new D(),_0x120976=new D(),_0x1428e0=_0x2fc908['clone']()['div'](_0x18f89b);let _0x15a1bb=0x3*0x7ab+-0xe*-0x1+-0x170f;for(let _0x4d39d0=-0x506+-0x65e+-0xf3*-0xc;_0x4d39d0<_0x18f89b['x'];_0x4d39d0++)for(let _0x26e3ad=0x1a25*-0x1+-0x3*-0x5eb+0x864;_0x26e3ad<_0x18f89b['z'];_0x26e3ad++)for(let _0x2ece01=0x20ee+-0x1dba*0x1+0x1*-0x334;_0x2ece01<_0x18f89b['y'];_0x2ece01++){const _0x42b0fb=_0x4d39d0+_0x55bb3e*(_0x26e3ad+_0x2ece01*_0x29b007),_0x402754=_0x4de869[_0x42b0fb];if(_0x402754>0x384+-0x483+0xff){_0x3da756['x']=_0x1ed2c1['x']+_0x1428e0['x']*_0x4d39d0,_0x3da756['y']=_0x1ed2c1['y']+_0x1428e0['y']*_0x2ece01,_0x3da756['z']=_0x1ed2c1['z']+_0x1428e0['z']*_0x26e3ad,_0x422d4a['add2'](_0x3da756,_0x1428e0),_0x164ce3['push'](_0x3da756['x'],_0x3da756['y'],_0x422d4a['z']),_0x164ce3['push'](_0x422d4a['x'],_0x3da756['y'],_0x422d4a['z']),_0x164ce3['push'](_0x422d4a['x'],_0x422d4a['y'],_0x422d4a['z']),_0x164ce3['push'](_0x3da756['x'],_0x422d4a['y'],_0x422d4a['z']),_0x164ce3['push'](_0x422d4a['x'],_0x3da756['y'],_0x3da756['z']),_0x164ce3['push'](_0x3da756['x'],_0x3da756['y'],_0x3da756['z']),_0x164ce3['push'](_0x3da756['x'],_0x422d4a['y'],_0x3da756['z']),_0x164ce3['push'](_0x422d4a['x'],_0x422d4a['y'],_0x3da756['z']),_0x120976['lerp'](Rt['colorLow'],Rt['colorHigh'],_0x402754/_0x3565bd)['round']();for(let _0x6da652=-0x1bce+-0x22c*0x5+0x26aa;_0x6da652<-0x14*-0x36+-0x6d*-0x21+-0x123d;_0x6da652++)_0x33e63b['push'](_0x120976['x'],_0x120976['y'],_0x120976['z'],-0x9e0+-0x2*-0xc97+-0xf4d);_0x27fd2f['push'](_0x15a1bb*(-0x4a2*0x1+0x3*-0xba5+0x3*0xd33)+(-0x1*-0x4cd+-0x236+-0xdd*0x3),_0x15a1bb*(-0xb37+0x1*0x257+0x8e8)+(-0x9*-0x40f+0x3a7+-0xbb*0x37),_0x15a1bb*(0x18d5+-0x20c1+0x2*0x3fa)+(-0x1b47+0xe9e*0x1+0xcac)),_0x27fd2f['push'](_0x15a1bb*(0x10b1*0x1+-0x2047*0x1+-0xf9e*-0x1)+(-0x96*0x28+0x500+0x1273*0x1),_0x15a1bb*(0x39e+-0x29*0xf1+0x2303)+(-0x2*-0xa8a+0x8*0x161+-0x201b),_0x15a1bb*(-0xa3*-0x1c+-0x18e9*-0x1+-0x1d*0x179)+(-0x3*-0x239+0x81+0x72a*-0x1)),_0x27fd2f['push'](_0x15a1bb*(-0x219d*0x1+-0x150d+-0x36b2*-0x1)+(-0x1de2+0xc79*-0x2+0x36d8),_0x15a1bb*(-0x21ac+-0x17*-0x1a5+-0x41f*0x1)+(-0x14ac+-0x24f5+-0x9d*-0x5e),_0x15a1bb*(-0x19ee+-0x16b9+0x79*0x67)+(-0x6*0x425+-0x1*0x14ba+0x2d9f)),_0x27fd2f['push'](_0x15a1bb*(0xf59*-0x2+-0x2376+0x4230)+(-0x6fc*0x4+0x1113+0xae4),_0x15a1bb*(-0x1*0xd13+-0xc7*-0x1f+0xc9*-0xe)+(-0x1402+-0x1cec+0x30f3),_0x15a1bb*(-0x1473+0x6c1+0x7*0x1f6)+(0x5*-0xff+0x1ded+-0x18ec)),_0x27fd2f['push'](_0x15a1bb*(-0xc*-0xda+-0x18bb*0x1+0xe8b)+(-0x9d*-0x13+0x55d*0x1+0x5ab*-0x3),_0x15a1bb*(-0x63+0x26e8+-0x267d*0x1)+(0x808+-0x22f*-0xc+-0x223a),_0x15a1bb*(0xc1*-0x11+0x74+0xa7*0x13)+(0xb*0x2e3+-0x80f+-0x5eb*0x4)),_0x27fd2f['push'](_0x15a1bb*(-0x45c+0x1307*0x1+-0x4e1*0x3)+(-0x2270+-0x2276*-0x1+-0x2*0x2),_0x15a1bb*(-0x83b*-0x4+-0x117f*-0x1+-0x3263)+(0x1e7*-0x7+-0x860+-0x8b*-0x28),_0x15a1bb*(-0x19fd*-0x1+0x1*-0x141b+0xe*-0x6b)+(-0x12d9+-0xe*-0x1df+-0x3*0x271)),_0x27fd2f['push'](_0x15a1bb*(0x2*0xb17+0x13be+-0x29e4)+(-0x202e+-0x1d*-0xc9+-0xa*-0xf1),_0x15a1bb*(-0x1*-0x761+0x11d4+-0x192d)+(-0x58*0x5b+0x35*-0x3+-0x1*-0x1fe7),_0x15a1bb*(-0x3b3+0x9*-0x17d+-0x2*-0x890)+(-0x4*-0x99b+0x15a2+-0x3c0a)),_0x27fd2f['push'](_0x15a1bb*(-0x2375*0x1+-0x25*0x6d+0x333e)+(0x1367*0x1+0x8e+-0x13f5*0x1),_0x15a1bb*(-0x129a*0x1+-0x1*-0x144d+-0x7*0x3d)+(-0x16ff+-0x1ed*0x7+-0x247f*-0x1),_0x15a1bb*(-0x1c*0x9+0x6b+0x99)+(0x221a+-0x21*-0x2f+0x1*-0x2825)),_0x27fd2f['push'](_0x15a1bb*(0x3*-0x39b+0xdad+-0x2d4)+(-0x137*-0xf+-0x1f86+0xd4e),_0x15a1bb*(-0x4f*0x2b+-0xea5*-0x1+-0x158)+(0x17e5+-0x7da+-0x1*0x1007),_0x15a1bb*(-0x355*-0xb+0xd*-0x15c+-0x651*0x3)+(0x5e1*-0x2+0x1be9+0x1025*-0x1)),_0x27fd2f['push'](_0x15a1bb*(-0x1eb0+-0x16e1*0x1+-0x3599*-0x1)+(-0x332*0x1+-0x1fdc*0x1+0x2312),_0x15a1bb*(-0xb*0x2c4+0xfa*0x22+-0x8*0x58)+(0x2639+0x1c4*0x14+-0x4982*0x1),_0x15a1bb*(0xf62+-0x2115*-0x1+-0x306f)+(0x21c4+0xd35+0x1*-0x2ef7)),_0x27fd2f['push'](_0x15a1bb*(-0xde2+0x819+0x5d1)+(-0x3*0x392+-0xc*0x2ea+0x2db3),_0x15a1bb*(-0xf8*-0x4+0x1*-0x2f2+-0xe6)+(-0x79*0x9+0x1*0xef+0x352),_0x15a1bb*(-0x12dc+-0x10cf+0xd*0x2bf)+(-0x256e+-0x5*-0x42d+0x1093*0x1)),_0x27fd2f['push'](_0x15a1bb*(-0x630*-0x3+0xe7c+-0x1082*0x2)+(0x1b9c*-0x1+-0x1721*0x1+0x32bd),_0x15a1bb*(-0x21dd+0xd*-0x4+0x2219)+(-0x5*0x1b7+-0x3b*0x47+0x18f3),_0x15a1bb*(0x1*0x188+-0x1*0x117b+0x1*0xffb)+(-0x1485+-0x1616+0x2aa1*0x1)),_0x15a1bb++;}}if(_0x15a1bb){if(_0x400d8b['setPositio'+'ns'](_0x164ce3),_0x400d8b['setNormals'](new Float32Array(_0x164ce3['length'])),_0x400d8b['setColors3'+'2'](_0x33e63b),_0x400d8b['setIndices'](_0x27fd2f),_0x400d8b['update'](js,!(-0x7b8+-0x120f+0x19c8)),!Rt['meshInstan'+'ce']){const _0x47e7c3=new Ut();_0x47e7c3['useLightin'+'g']=!(0x1*-0xfa1+0x2e7*0x9+-0xa7d),_0x47e7c3['emissive']=new ie(-0x47b*-0x5+-0x724*0x1+-0xf42*0x1,0x26dd+-0x5*-0x55d+-0x41ad,-0x1*0x1bd9+0x1*0x262a+0x14a*-0x8),_0x47e7c3['emissiveVe'+'rtexColor']=!(-0x12ef+0x161+0x118e),_0x47e7c3['blendType']=Ed,_0x47e7c3['depthWrite']=!(0xfd9+-0xe70+-0x24*0xa),_0x47e7c3['update']();const _0x2925bf=new Ie('WorldClust'+'ersDebug');_0x2925bf['worldTrans'+'form']=te['IDENTITY'],_0x2925bf['_dirtyWorl'+'d']=_0x2925bf['_dirtyNorm'+'al']=!(-0x2*-0xd96+0x2602*-0x1+-0x1*-0xad7),Rt['meshInstan'+'ce']=new He(_0x400d8b,_0x47e7c3,_0x2925bf),Rt['meshInstan'+'ce']['cull']=!(0xda*0xe+0xf35+-0x1b20);}const _0x13718e=Rt['meshInstan'+'ce'];_0x2b94ff['immediate']['drawMesh'](_0x13718e['material'],_0x13718e['node']['worldTrans'+'form'],null,_0x13718e,_0x2b94ff['defaultDra'+'wLayer']);}}};h(Rt,'gridPositi'+'ons',[]),h(Rt,'gridColors',[]),h(Rt,'mesh',null),h(Rt,'meshInstan'+'ce',null),h(Rt,'colorLow',new D(0x1879+-0x165b+0x21d*-0x1,0x2b*0xaa+0x1b23+0xb*-0x510,0x25fe+-0xd3*-0x2d+-0x5*0xf04)),h(Rt,'colorHigh',new D(-0x3*-0x6e5+-0x1*-0x2415+0x1*-0x389c,0xb93+-0x1fa5+0x1412,-0x1223*0x1+0xb39*0x3+-0xf88));let hu=Rt;const xb='muPIHORMLN'+'DCz4DxVR/Z'+'vYfAUVEFR4'+'7KRIC4nwAA'+'AAAP7WxlhD'+'6Ci+2HCe7B'+'F8jRAPZwdH'+'2UPpI5PdLC'+'JdkvG4UTaN'+'DJ/0crAzne'+'71GCrb4kbd'+'MjjCEGzdX6'+'fNxDMLJq5x'+'keoIVTdfiZ'+'kodEeArmZm'+'p/FQzFjD4x'+'8iOW7Dg64n'+'+3mWqyEwLx'+'XT8zoJXfbw'+'8QJKDCaarU'+'YyTlMzNFHb'+'gUe9IQV7g4'+'YOgtSKpIFZ'+'J0qERm7u4P'+'pmiF89ktHW'+'CywaGmD6h+'+'hfh2/Zd8KY'+'lKqqo4Cem4'+'T42bT/Z9Fp'+'CQF1hhSjfB'+'zZ5XFn/y3j'+'egWC6u86Ku'+'ELRundQS/1'+'Rp+XuKKGIg'+'Rv3CvP5y74'+'9yqLlFO495'+'JOT3+f2CXg'+'d71npU0/Kj'+'jpkZucbJ5m'+'78IVyuSrSo'+'zc9jgBUhDr'+'z0hFsyb7LF'+'UH9//wJbBg'+'LdNWJZObfK'+'xrNt8TliLA'+'9w9sXFv6g2'+'6iXpf6r/Bq'+'cAusj/QzGB'+'ZuoUGeEtw8'+'BCXCZ3jUiw'+'4hvM18ZVql'+'UD3C40LAFX'+'W6FRjuAZGR'+'Nstb0/qVk4'+'skwyT+MHrv'+'RorI4rKHVM'+'WZmKyAkzL/'+'78u/9pMQuX'+'14pZN50b2P'+'Hn6fRxeaCQ'+'LsfT4dpvIk'+'WWFuFVENZI'+'h+8xgR6lU+'+'85W0PPdAu1'+'j99kcCG40J'+'BQa4JMyRzq'+'6qriOBLtqF'+'87vpCJan0W'+'EduVr/mOYk'+'S00urVA0mA'+'6M3031+GmG'+'mW48PaJDYO'+'EIb3bIXWPa'+'LoAOEinX1T'+'N3+/vwhG6n'+'qJu0TdHped'+'S7QsGZIoxH'+'3nQYYjQP1j'+'mbahlbNngw'+'5ogsGk1y50'+'XZyUmQBY+/'+'JBJ3Unu4dA'+'pm+WmPwHPU'+'9gLb+4mHh4'+'BiY6M86pq+'+'WeTyWdI3s0'+'CXPEtHGXZ8'+'zMZgUoyRom'+'Bi1VdazzuN'+'+WOmQ9Pa0Z'+'0tlNopUi8A'+'J4x2Xn4mmO'+'KEbXLxlbVs'+'Wu8XhuDGYF'+'OGCRVdSqDP'+'XrHU5SDdUl'+'ti3k5///SB'+'wzTMwK3L4a'+'1H7w4lnpEa'+'s6////AfX8'+('asyIBfeFXV'+'J3tgvxQ/bl'+'ZuUKyIODIf'+'r/UzdWNu7p'+'ciLBpdZRZ4'+'pIfZ1R6szq'+'+XNxkGG///'+'8EZFpu7VHA'+'hFWqHEOrB9'+'unw+YQa5o8'+'/9IR/V5/zq'+'+986rJSyfg'+'JKt2u9hxU1'+'wzyQWPjJGv'+'zG9+eWWxGF'+'OHVKqI4jBQ'+'ALwZZswesn'+'vZ2UmmkEXd'+'iRpz8B+oWE'+'7PY70ZTMnd'+'isYSXg2Tqo'+'I+3y9BxbnY'+'2Y4EfbdcRh'+'AvG59NqDEN'+'NYbxKvK5HJ'+'fPG5M+Wi2A'+'cpLVJrD6ca'+'iEOzgSoVNS'+'gQK8fm2M3z'+'GcF4xtClv/'+'8Hs9oD7C3j'+'itTATYNQxm'+'KqKf1LhIxz'+'f1bmfiNn7U'+'KFmcJu4sLq'+'VLwxGSue3t'+'aBEyknkw5h'+'XTsUCvqmmL'+'/f8n/w0giR'+'7Hu/9EHvpk'+'z3yuu64Tio'+'MkzdTJ30i0'+'+hFnQqW1+v'+'9mMwq+z9qG'+'X0UFu9Momv'+'VG2xod6vc1'+'2AAAAACq7s'+'Ga5qptFR0j'+'F3nQt/D+7P'+'ibKYahaxP3'+'hEixPbGi9n'+'wNf2LAa7Lk'+'EZRKxzXeCD'+'64Xpii5n+8'+'Kpg8eHIv7A'+'WXZltgMoGl'+'tmoJ0XGdOC'+'L8WkzphvR9'+'N2o3ARSZ42'+'l5e5Pe4B58'+'MCRlP3EKv+'+'mcloknH+ft'+'o5BWsmEutW'+'6KvjOVsznF'+'CktkSczVk4'+'aGvj9VXlRc'+'LeDoKG8RkB'+'gdcNG2bf8H'+'UL4MT2DM+a'+'r7NImJhKpx'+'akX4Vk0CnP'+'+/XNhl5UsP'+'0lXgeZXPoD'+'BMSW5An+DX'+'lTCO5FQGwS'+'PYwHLKYVIi'+'mEdAoVe49r'+'QLaaNcye5L'+'xU2/c5TijT'+'gJtD5eQQIe'+'1snxauj5jZ'+'sxJBUJdoP/'+'zqpjqv8qBr'+'uoPsVsP8N4'+'4PCUW5Dd0D'+'zqjSS/Dl5m'+'I9cn1w2ndN'+'/0KAEm1QAA'+'AACwu6KM/0'+'83IBbH5bPa'+'/9oHUwcU8I'+'9v3j6/v18Q'+'Yammrf+P6V'+'L///8BrpuM'+'3fOLCxaLNO'+'FNF1zPbPYT'+'P65ni6njft'+'4eVcyrVXRQ'+'Frs52tr35S'+'tiSp55edVD')+('CBC0H5rIfa'+'c6nzUwxQSt'+'7y15QoKb+5'+'zebEQUmVbr'+'PjXuUa19Ey'+'7sqXMiSUKH'+'aw72PJKDdr'+'utJoQr3u6l'+'EYJ8K0MakW'+'Kj9zjTFi4X'+'94TsKYco0G'+'rLeB60M6D8'+'M/80rhXUW8'+'iMequg8y5F'+'838WI0+gp3'+'GBN5Kj/xIO'+'xTWQuUaPV/'+'LwvARr1VH9'+'3BFgGZR1MF'+'W0Ua30GbYm'+'dnAgo9VWy8'+'SQtpDUgGE2'+'r2zq2eTEMC'+'L7sMKmE1hc'+'hVhuF/TCq9'+'iXKEm86kzO'+'f3Rp9ZnCxb'+'pDUj+FKNxV'+'yXe6pVZkRX'+'v/m95SnB/E'+'B8aME29N85'+'MtAcDoXWlo'+'r8De2Q5Dg1'+'tar+8wgiZu'+'fbMam81j//'+'ASUohoR/zS'+'h2KG4bvT6m'+'kIPz6C5/98'+'DC3LaWlaEZ'+'1zA5JORZRu'+'6J/a0GY285'+'sEYzw71YqO'+'T1ihAG0z5S'+'Dt1xNiDQWZ'+'dFpndArp6x'+'WhqSDkRb4k'+'SJEHb9liPv'+'w7uLV/6i5M'+'Vf//A9Qjr8'+'xkAEUh+KDI'+'+zdtJ68d6M'+'BOktg1iyp/'+'SCq8O9f5pb'+'amn1VVVQPR'+'TWqNBvhQKa'+'07s6P0lc9L'+'uu/3gw4Hey'+'OUfz8MxMwV'+'4UQhua+t9c'+'r4bz/nIB2w'+'nDSK1K7I94'+'M+s6C84hta'+'X/CNlMQUSs'+'2KJO+yaebf'+'TbkNX5yWcq'+'EJevo0vbKU'+'iETuFXiL01'+'9A3E+lmsyZ'+'MwXrXLLiQA'+'Z5t9+jI3Jo'+'bhJTMiDH5Z'+'OQ+8Jau555'+'5NMjHSscP9'+'qCVaa40doh'+'+1a3Ukf6jq'+'BmLddgh79/'+'fwTfCyqiul'+'dNkUoy+nUp'+'+4nerwg0Oj'+'tGv2x485PJ'+'OJvUEokNhY'+'IdWjpx7BWk'+'0VZGWOp3jS'+'FTJ2bnu6KC'+'duZtG/UcBC'+'9RZ3W/jMSf'+'SMw4Etr/Do'+'D/XYP2V5Ov'+'w+YoM3F5g2'+'dGLdvuG6Zk'+'VGLE6Dk5Zr'+'+sdSyGliJP'+'1y2OFf/KFO'+'0RWO+3gsGh'+'esTnfZVpTd'+'8/HwgO216g'+'waqo+vY3Tl'+'jfJWowY+i0'+'p0Os4SLn/1'+'wLqDHMlszg')+('gmT/D8MRFz'+'s+pLv6LNJS'+'sNZ/r41mWi'+'/rF6ZcKp/y'+'zJdK0VU44h'+'skq3RGpgO6'+'mIpJDsf/mZ'+'kFrz0yYOML'+'buaj/wp1v7'+'JMFM5eqvBh'+'mTd7U8frQA'+'tHtys4zgpj'+'ZmzUhOVTfN'+'NLifElGXAD'+'lqHGKrkBT/'+'nYwX8ZRm3R'+'jvyPvjKyEq'+'EGKUpVnvOG'+'x+NKPHiWM/'+'/ZDpDVGvvr'+'jmk8RPF/wi'+'YZD3+Us8YC'+'XjrVOfjdd1'+'UPAfjLp8jg'+'Sn4me7DPTp'+'z1Ggy9XL80'+'guFO7ECT10'+'AvILKfD18Q'+'x+KY/f8aRq'+'u0oOO8hfKR'+'FZa9PUJwCs'+'p6VdZz6LFk'+'m2b9Pl2LIi'+'fCwzRy7Tpd'+'G2uAtOxP2O'+'emY26bJMa9'+'ZGSLIRlMsg'+'pDpnDJwd0o'+'a5pQ13x1hr'+'Hf52HpulUW'+'onGWsfXZbS'+'QYKu9bnEN7'+'6ciQih0opN'+'3deDVrbrxo'+'rfVlnCmL1R'+'9zq3ePGWIv'+'21c7pW8kEi'+'FTM5JX8dAw'+'867s/60cf7'+'9/BH+MDFCZ'+'BHlz1L+qGO'+'Jf/1txhhmr'+'f3//As+RIJ'+'wevDb+fgNX'+'VeHw67QptZ'+'egayhrEwr5'+'Gy+EPo1RLa'+'MtPbqOZYoV'+'zXzwzjMFWZ'+'xyUG9YUIf6'+'////AQWy84'+'iAygLk9COt'+'Xt92+0mT/x'+'g0zMzMBeLk'+'b8y9SL2TDX'+'gSX422hDgp'+'GNLJyuPioA'+'+YJ91G8znr'+'pNqHkwYysc'+'aJDEc9Vc+j'+'4cXle3hvcd'+'2JqDQH2lBZ'+'xDn6mUTs0b'+'75raMvbs72'+'7codX01Anj'+'8f3wir9P2x'+'QaQ22v/TxC'+'MglKDFoTja'+'P01XTLgxnT'+'vPv02JgEUr'+'W6UDgOnobF'+'pLdvKdlypg'+'IzPcq14fgX'+'U5tvVW0FEs'+'7VRlsG1IyA'+'69fN4n+awH'+'hT34cE+xUv'+'dj86C8LgAs'+'FheTjI9Ht9'+'EyYAAAAAAV'+'BVKRx2wLgU'+'TI0/2QfyJo'+'2riRw3JDqz'+'EShmx/Lifo'+'6mRkQVbS7X'+'53t+EvKxcX'+'ogtdts31e9'+'MRHdcHgsA8'+'rt4/mt2unl'+'zQ/wsU8Gu7')+('+W6Oj7eD8E'+'QdDp5XlCsV'+'aS/AV/t5Zp'+'POHR3rGpyA'+'Je9IPV+xMr'+'BL1Oz/8MQh'+'Fs31h0N1cV'+'nq371uqIJY'+'HyafKH1jte'+'AK3VpMXBcu'+'C+yt0ZeKyR'+'UY4QhdrJJ4'+'tJ1wg3Hu6k'+'DsbovxupTM'+'kGdRrm8oZS'+'oYPbJ+PwH/'+'xotgTdkA12'+'05vUEfnqkI'+'04T/fnnd1f'+'iZW5AwNcgg'+'d7fi4j5zas'+'mcntZexIxq'+'FZQMzMJpfn'+'dmI5jn17cg'+'n5EV5t9XN0'+'C///8Q9wlJ'+'pMGXdoiaMT'+'G2sVyHQsn8'+'mWRISCLNG7'+'77S0OuDRP2'+'GlLcJ2UeOg'+'7Fo8hTNPeJ'+'//iTJhyqxh'+'KRUntdXOih'+'q2wfKfH///'+'8B0GGrwT+f'+'SOQRdctKxj'+'jGCSS11d6B'+'lQ9BDfE0J6'+'Z25FaNTKGp'+'FKNCMr2G/0'+'41KpWwBLVe'+'1k08vncseQ'+'bKZdXi8x1t'+'9XA45U/Wd4'+'3D9wAh3Tal'+'0aiLVzGPus'+'OZ1F+W3TWo'+'qlX/A95+dN'+'ef11TsuGfu'+'l+ctGssldk'+'3fqpfqh+43'+'XTxL42+leS'+'HoF/dWHYGX'+'6maqUEuLX7'+'UB+r/6Llr4'+'LKocbVIeu+'+'hB9QTPfz9f'+'CP8RyWmX4S'+'mbhMFsNtCi'+'jV7lVcwejL'+'Klvl0GfCnd'+'nWV7/39VBr'+'tTRuUx92ok'+'e3GBgKkC5f'+'dGK0YvNK+x'+'enKaDmsHDj'+'NFUM3NMz3Z'+'iXXFuLgojo'+'sPVCDEl2W5'+'BjX3Ms+j0G'+'SqACHmh0+R'+'PWyuNm/Qe8'+'vFf9AW7N1u'+'RaxWirrUyt'+'qEJnJ4/Flm'+'8hSoiZ2NQB'+'sS6w/yQlC4'+'gCaFo8q4ny'+'Y6AFdo4hiw'+'hBXzbNKKvZ'+'vktCjSCukR'+'R/BbYVbNwZ'+'i2Yh3hGodE'+'acLW8qijiW'+'JODf0P2bhf'+'aiPspPT4lY'+'JBgi/KfcFw'+'CfvyUIgkJO'+'v///8CG/JE'+'epRBLaMFE+'+'2TgrqsJXOV'+'OWHt6g/bFw'+'VLLMVBsMR5'+'0dis/39/Al'+'BX+/rMTJkU'+'QrnlxpR2iu'+'0Tp8tATkRY'+'GmDIrcAiRP'+'8PjoWIlb7/')+('0ecTdSCE9Y'+'58+a+n/Fov'+'JQTVF4F2jA'+'xMZhTgrM/K'+'VS5BQu6bVb'+'kWY5HXnxRs'+'hks3urDdW4'+'RkWp4M4TeL'+'mFK5KF/uHk'+'kiO5Kv96Ri'+'oH984v/CSD'+'BnG+BwlnU9'+'B+o7Y+0X0N'+'ob+0pLsStx'+'jvPXMy2eCp'+'zhOWV4XbOb'+'BHN4UE2sLQ'+'/DIqXhOzxV'+'f38GlTi6aG'+'7EnePO7TRJ'+'m9yOfUUcqq'+'1I2iQHrVDq'+'n3TUNRi/lM'+'w8KbMW/3/n'+'qCz/Ef8PoW'+'5Qxcz2yHR/'+'f78EPB2Stb'+'d+ZFmfNTUY'+'ILzsb9YNhp'+'aHcaymYrBi'+'NHmFE3Y4cc'+'YJ25Prqm7z'+'HobGHED8/9'+'3ZNlWro9vc'+'KivGZs31Ui'+'K1k5zjUhex'+'UgbqJb+fUT'+'jxce/7Zly8'+'a5KMC1fX5n'+'fjPgibdvzb'+'XV1jRT2asX'+'vmSAusaLdq'+'1TSIJ8fXIN'+'k5AtT34EWP'+'AsfP9IFQqM'+'5K11O6saoH'+'JA==');let Vi=null;const Av=()=>{if(!Vi){const _0x5c7c4c=atob(xb);Vi=Uint8Array['from'](_0x5c7c4c,_0x2199f2=>_0x2199f2['charCodeAt'](-0x45a*-0x1+0x2467*0x1+0x1*-0x28c1));}},Tb=()=>(Av(),Vi);class wb{constructor(_0x410a7c=-0x2190+-0x246b+0x45fb){h(this,'seed',0x132d+0xc5*-0x16+0x23f*-0x1),(this['seed']=_0x410a7c*(-0x222b*0x1+-0x1052+0x1*0x3281),Av());}['_next'](){this['seed']=(this['seed']+(0x2*-0x10fd+-0x1c18+0x3e16))%Vi['length'];}['value'](){return this['_next'](),Vi[this['seed']]/(0x251d+0x2383+-0x47a1);}['vec4'](_0x17db64=new re()){return this['_next'](),_0x17db64['set'](Vi[this['seed']],Vi[this['seed']+(-0xfd8+-0x233*0x3+0x1*0x1672)],Vi[this['seed']+(-0xd*0x80+0x991+-0x30f)],Vi[this['seed']+(-0x6*-0x51e+-0xfe4+0xecd*-0x1)])['mulScalar']((-0x25ce+-0x34*-0x2e+-0x1*-0x1c77)/(-0x7b6+-0x1fc*0x9+0x1a91));}}const Eb=[new D(-(-0x49*0x13+-0xc6*0x22+0x1fb8),0x1*-0x2404+-0x1e6d+0x4271,-0x11*-0xee+-0x187+-0xe47),new D(0x48e+-0x2537+0x20aa,-0x153+0x10d7+-0xf84,0x1dbb+0xc83*0x1+-0x2a3e),new D(0x17b7*0x1+0x2311+0x48*-0xd1,-(0x637*-0x3+0x1d39*-0x1+0x2fdf),0x1ad+-0xd22*0x1+0xb75),new D(0x86*0x11+0x37d*-0x3+0x191*0x1,0xc22+-0xb05+-0x1*0x11c,0x911*-0x1+-0x18f5+-0x1103*-0x2),new D(0x16ef+-0x2b*0x19+-0x12bc,-0x1cdf+0xc61+0x107e,-(-0x1*-0x188f+0x2a9+0x1*-0x1b37)),new D(-0x3*-0xc0a+-0x1721+-0xcfd,0x1*-0x1e95+0x2*0x49d+0x155b,-0x479+-0x11f7+0x1671)];class bb{constructor(){h(this,'colors',new Float32Array(0x1ae4*0x1+0xd5*0x1b+-0x3149));}['update'](_0x486d8b,_0x1b8dca){const _0x54f94f=this['colors'],{r:_0x259bdf,g:_0x33fe76,b:_0x332989}=_0x486d8b;for(let _0x1de21a=0x3*-0x106+0x175f+-0x144d;_0x1de21a<-0x1e3+-0x509+0x6f2;_0x1de21a++)_0x54f94f[_0x1de21a*(-0x1b86+0x4cd*-0x6+0x1*0x3857)]=_0x259bdf,_0x54f94f[_0x1de21a*(-0x1c0a+-0x9*0x1d+-0xe89*-0x2)+(0x2*0x95e+-0x2208+0x1*0xf4d)]=_0x33fe76,_0x54f94f[_0x1de21a*(-0x16b+-0x713*-0x3+-0x13cb*0x1)+(-0x214f*-0x1+0x1c47+-0x3d94)]=_0x332989;for(let _0x421193=0x727*-0x1+-0xd*0x1ba+0x1d99;_0x421193<_0x1b8dca['length'];_0x421193++){const _0x2b3484=_0x1b8dca[_0x421193];if(_0x2b3484['_type']===ve)for(let _0x4bab2e=-0x59*0x1d+0xac0+-0xab;_0x4bab2e<-0x1d9*0xd+0x103b+0x7d0;_0x4bab2e++){const _0x5f5d69=Math['max'](Eb[_0x4bab2e]['dot'](_0x2b3484['_direction']),0x1*-0x3c3+0x1138+0x1*-0xd75)*_0x2b3484['_intensity'],_0x14c8d5=_0x2b3484['_color'];_0x54f94f[_0x4bab2e*(-0x8*0x383+-0x571*-0x3+-0x1a*-0x74)]+=_0x14c8d5['r']*_0x5f5d69,_0x54f94f[_0x4bab2e*(0x6*-0x86+0x1ba9*-0x1+0x1ed0)+(-0x8fe+0x1*0xec0+-0x3*0x1eb)]+=_0x14c8d5['g']*_0x5f5d69,_0x54f94f[_0x4bab2e*(-0x2*0x1349+-0x955+0x17f5*0x2)+(-0xca6*0x2+-0x1*0x3e8+0x1d36)]+=_0x14c8d5['b']*_0x5f5d69;}}}}const Ab=(_0x2ee60a,_0x2c0c86,_0x33c4ad,_0x1938cd)=>{const _0x51b039=new _e(_0x2ee60a,{'name':''+_0x2c0c86+_0x33c4ad,'width':_0x33c4ad,'height':_0x33c4ad,'format':Ne,'addressU':yt,'addressV':yt,'type':Ds,'magFilter':Te,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(-0x2652+0xf11*-0x1+0x1ab2*0x2)});return _0x51b039['lock']()['set'](_0x1938cd),_0x51b039['unlock'](),_0x51b039;},Cb=new Kt(),Pb=_0x2a0764=>Cb['get'](_0x2a0764,()=>{const _0x368596=Tb(),_0x28cac5=Math['sqrt'](_0x368596['length']/(-0x9*-0x1ff+-0xe4*-0x3+-0x1*0x149f));return Ab(_0x2a0764,'BlueNoise',_0x28cac5,_0x368596);});class va{constructor(_0x28730d,_0x45a907){this['texture']=_0x28730d,this['cached']=!(0x1cf3+0x1*0x2527+0x1*-0x4219),this['renderTarg'+'ets']=_0x45a907;}['destroy'](){this['texture']&&(this['texture']['destroy'](),this['texture']=null);const _0x37a4a2=this['renderTarg'+'ets'];for(let _0x57a66b=0x7*-0x161+-0x3db*-0x3+0x1ea*-0x1;_0x57a66b<_0x37a4a2['length'];_0x57a66b++)_0x37a4a2[_0x57a66b]['destroy']();this['renderTarg'+'ets']['length']=0xa9*0x3b+-0xa+-0x26e9;}static['create'](_0x8d613a,_0x87cb2d){let _0x549940=null;return _0x87cb2d['_type']===Ke?_0x549940=this['createCube'+'map'](_0x8d613a,_0x87cb2d['_shadowRes'+'olution'],_0x87cb2d['_shadowTyp'+'e']):_0x549940=this['create2dMa'+'p'](_0x8d613a,_0x87cb2d['_shadowRes'+'olution'],_0x87cb2d['_shadowTyp'+'e']),_0x549940;}static['createAtla'+'s'](_0x5aac9b,_0xa0b208,_0x435656){const _0x3b45aa=this['create2dMa'+'p'](_0x5aac9b,_0xa0b208,_0x435656),_0x15a48e=_0x3b45aa['renderTarg'+'ets'],_0x49e60b=_0x15a48e[-0x102+-0x13c2+0x14c4];for(let _0xe45aa2=0x12*0x21e+0x1d42+-0x2*0x21af;_0xe45aa2<-0x1014+-0x26ad*-0x1+-0x1694;_0xe45aa2++)_0x15a48e['push'](_0x49e60b);return _0x3b45aa;}static['create2dMa'+'p'](_0x58d855,_0x4f6b4c,_0x419b6b){var _0x1b6241;const _0xde5b08=qi['get'](_0x419b6b);w['assert'](_0xde5b08);let _0x4bc5dd=_0xde5b08['format'];_0x4bc5dd===Ji&&!_0x58d855['textureFlo'+'atRenderab'+'le']&&_0x58d855['textureHal'+'fFloatRend'+'erable']&&(_0x4bc5dd=od);const _0x2f4e5a=(_0x1b6241=Nt['get'](_0x4bc5dd))==null?void(0x6e9+0x2*0x55c+-0x1*0x11a1):_0x1b6241['name'];let _0xf2ad33=vt;_0x419b6b===Jp&&(_0xf2ad33=_0x58d855['extTexture'+'FloatLinea'+'r']?vt:Te),_0x419b6b===al&&(_0xf2ad33=Te);const _0x228915=new _e(_0x58d855,{'profilerHint':eu,'format':_0x4bc5dd,'width':_0x4f6b4c,'height':_0x4f6b4c,'mipmaps':!(-0x95*0x5+-0x513*0x7+-0x266f*-0x1),'minFilter':_0xf2ad33,'magFilter':_0xf2ad33,'addressU':ue,'addressV':ue,'name':'ShadowMap2'+'D_'+_0x2f4e5a});let _0x5cb892=null;return _0xde5b08!=null&&_0xde5b08['pcf']?(_0x228915['compareOnR'+'ead']=!(-0x1406+0x202b+-0xc25*0x1),_0x228915['compareFun'+'c']=hh,_0x5cb892=new gt({'depthBuffer':_0x228915})):_0x5cb892=new gt({'colorBuffer':_0x228915,'depth':!(-0x195b*-0x1+0x2ef+-0x1c4a)}),_0x58d855['isWebGPU']&&(_0x5cb892['flipY']=!(0x1*0x2f+-0x696+0x667)),new va(_0x228915,[_0x5cb892]);}static['createCube'+'map'](_0x49246c,_0x3d7f2a,_0x2d16dc){var _0x2c78e6;const _0x4678ab=qi['get'](_0x2d16dc);w['assert'](_0x4678ab);const _0x388462=(_0x2c78e6=Nt['get'](_0x4678ab['format']))==null?void(0x245b+0x18ff+-0x1ead*0x2):_0x2c78e6['name'],_0x27b093=_0x2d16dc===al,_0x3be678=_0x27b093?Te:vt,_0x374086=new _e(_0x49246c,{'profilerHint':eu,'format':_0x4678ab==null?void(-0x1*-0x92f+-0xb7f+0x250):_0x4678ab['format'],'width':_0x3d7f2a,'height':_0x3d7f2a,'cubemap':!(0x1a5d+0x1f78+-0x39d5),'mipmaps':!(0x2c*0x4a+0x277+-0xf2e),'minFilter':_0x3be678,'magFilter':_0x3be678,'addressU':ue,'addressV':ue,'name':'ShadowMapC'+'ube_'+_0x388462});_0x27b093||(_0x374086['compareOnR'+'ead']=!(0x1*-0x1b96+-0x40f+0x1fa5),_0x374086['compareFun'+'c']=hh);const _0xbefe0a=[];for(let _0x52fa6e=0xf8d+0x14fc+-0x2f*0xc7;_0x52fa6e<0x27*0xdb+-0x49c+-0x1cbb;_0x52fa6e++)_0x27b093?_0xbefe0a['push'](new gt({'colorBuffer':_0x374086,'face':_0x52fa6e,'depth':!(0x16ea+0x17d2*-0x1+-0x1*-0xe8)})):_0xbefe0a['push'](new gt({'depthBuffer':_0x374086,'face':_0x52fa6e}));return new va(_0x374086,_0xbefe0a);}}const Mb=[],Db=[],xi=new re(),ef=new re();class tf{constructor(_0x1e9147){this['size']=Math['floor'](_0x1e9147['w']*(0x1*0x9ca+-0x1*-0x265d+0x2c27*-0x1)),this['used']=!(0x609+-0x1a0b+0x1403),this['lightId']=-(0x9e7+0x1918+-0x22fe),this['rect']=_0x1e9147;}}class Ib{constructor(_0x1108b8){this['device']=_0x1108b8,this['version']=-0x1a88+-0x196d+0x33f6,this['shadowAtla'+'sResolutio'+'n']=0x261b+0x2676+0x3*-0x16db,this['shadowAtla'+'s']=null,this['shadowEdge'+'Pixels']=0x245e+0x168e+0x3*-0x13a3,this['cookieAtla'+'sResolutio'+'n']=0x2*-0x709+-0xfb*-0xe+0x2*0x2e,this['cookieAtla'+'s']=new _e(this['device'],{'name':'CookieAtla'+'s','width':this['cookieAtla'+'sResolutio'+'n'],'height':this['cookieAtla'+'sResolutio'+'n'],'format':_s,'cubemap':!(-0xe*0x1b+-0x1*0x116a+0x12e5),'mipmaps':!(-0x4d*0xc+-0x1*-0x1007+0xc6a*-0x1),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue}),this['cookieRend'+'erTarget']=new gt({'colorBuffer':this['cookieAtla'+'s'],'depth':!(0xe*0x1+-0x92*-0x4+0xc7*-0x3),'flipY':!(-0x410*-0x3+0x26ae+-0x196f*0x2)}),this['slots']=[],this['atlasSplit']=[],this['cubeSlotsO'+'ffsets']=[new J(0x1d*0x23+-0x225d+0x1e66,-0x2ab*-0x1+0x1b*0x1+-0x2c6),new J(-0xedb+-0x4*-0x12+-0x1*-0xe93,0x882+-0x1*0xbff+-0x2*-0x1bf),new J(0xeff*-0x1+-0x152+0x1052,-0x24d4+0x1*-0x347+0x281b),new J(-0xc32+-0x1a83+0x26b6,0x49d*-0x5+0x1021+0x6f1),new J(0x11*0xc6+-0xcce*-0x2+0xa0*-0x3e,0x1975+0x148d*0x1+-0x2e02),new J(0x325+0x1996*-0x1+0x1673,-0xd21+0x2352+-0x1630)],this['scissorVec']=new re(),this['allocateSh'+'adowAtlas'](-0x3c5+-0x227*-0x1+0x19f),this['allocateCo'+'okieAtlas'](-0x298+0x36d*-0x3+0x19c*0x8),this['allocateUn'+'iforms']();}['destroy'](){this['destroySha'+'dowAtlas'](),this['destroyCoo'+'kieAtlas']();}['destroySha'+'dowAtlas'](){var _0x19f355;(_0x19f355=this['shadowAtla'+'s'])==null||_0x19f355['destroy'](),this['shadowAtla'+'s']=null;}['destroyCoo'+'kieAtlas'](){var _0x53cf44,_0x3ccff9;(_0x53cf44=this['cookieAtla'+'s'])==null||_0x53cf44['destroy'](),this['cookieAtla'+'s']=null,(_0x3ccff9=this['cookieRend'+'erTarget'])==null||_0x3ccff9['destroy'](),this['cookieRend'+'erTarget']=null;}['allocateSh'+'adowAtlas'](_0x4c9f12,_0x2f2039=$s){var _0x24c0f1;const _0x4cc6aa=(_0x24c0f1=this['shadowAtla'+'s'])==null?void(-0x36*-0x81+-0x8*0xc1+-0x152e):_0x24c0f1['texture']['format'],_0x1b0b4a=qi['get'](_0x2f2039)['format'];if(!this['shadowAtla'+'s']||this['shadowAtla'+'s']['texture']['width']!==_0x4c9f12||_0x4cc6aa!==_0x1b0b4a){this['version']++,this['destroySha'+'dowAtlas'](),this['shadowAtla'+'s']=va['createAtla'+'s'](this['device'],_0x4c9f12,_0x2f2039),this['shadowAtla'+'s']['cached']=!(0x1231*-0x2+-0x15a1*0x1+0x3a03);const _0x282387=(0x20dd+0x1a*0x10a+-0x5*0xbf9)/this['shadowAtla'+'sResolutio'+'n'];this['scissorVec']['set'](_0x282387,_0x282387,-(-0x1453+0x1*0x16e5+-0x52*0x8)*_0x282387,-(0x251+-0xd95+-0x6f*-0x1a)*_0x282387);}}['allocateCo'+'okieAtlas'](_0x3de4af){this['cookieAtla'+'s']['width']!==_0x3de4af&&(this['cookieRend'+'erTarget']['resize'](_0x3de4af,_0x3de4af),this['version']++);}['allocateUn'+'iforms'](){this['_shadowAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('shadowAtla'+'sTexture'),this['_shadowAtl'+'asParamsId']=this['device']['scope']['resolve']('shadowAtla'+'sParams'),this['_shadowAtl'+'asParams']=new Float32Array(0x5ee+0x469*-0x1+0x81*-0x3),this['_cookieAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('cookieAtla'+'sTexture');}['updateUnif'+'orms'](){const _0x1c7082=this['shadowAtla'+'s']['renderTarg'+'ets'][-0x1*-0x15f7+0x1*0x1365+0x4*-0xa57]['depthBuffe'+'r'];this['_shadowAtl'+'asTextureI'+'d']['setValue'](_0x1c7082),this['_shadowAtl'+'asParams'][-0x1*-0x1acf+0x10b1+-0x2b80]=this['shadowAtla'+'sResolutio'+'n'],this['_shadowAtl'+'asParams'][-0x1*0x998+0x14ea+-0xb51]=this['shadowEdge'+'Pixels'],this['_shadowAtl'+'asParamsId']['setValue'](this['_shadowAtl'+'asParams']),this['_cookieAtl'+'asTextureI'+'d']['setValue'](this['cookieAtla'+'s']);}['subdivide'](_0x1891fa,_0x2acc76){let _0x544f03=_0x2acc76['atlasSplit'];if(!_0x544f03){const _0x534afe=Math['ceil'](Math['sqrt'](_0x1891fa));_0x544f03=Db,_0x544f03[0x1*-0x1df5+0x1422+0x9d3]=_0x534afe,_0x544f03['length']=-0xb33+0xd93*0x2+-0xff2;}if(!((_0x470f11,_0x5c947b)=>_0x470f11['length']===_0x5c947b['length']&&_0x470f11['every']((_0x4b7f1c,_0x39fd62)=>_0x4b7f1c===_0x5c947b[_0x39fd62]))(_0x544f03,this['atlasSplit'])){this['version']++,this['slots']['length']=-0x1*-0xb77+-0x1*0x241f+0x18a8,this['atlasSplit']['length']=0xd*-0x95+0x8fe*0x1+-0x16d,this['atlasSplit']['push'](..._0x544f03);const _0x3a3f6c=this['atlasSplit'][0x1e48+-0x1*-0x822+-0xcce*0x3];if(_0x3a3f6c>0x3*-0x61e+-0x1*-0x10b7+0x3c*0x7){const _0x42999b=(0x1*0x1985+-0x8ac+0x62*-0x2c)/_0x3a3f6c;for(let _0x57330e=-0x2056+0xa52+0x1604;_0x57330e<_0x3a3f6c;_0x57330e++)for(let _0x40e3ff=0x1*0x17b4+-0x1c88+0x4d4;_0x40e3ff<_0x3a3f6c;_0x40e3ff++){const _0x1e2e3f=new re(_0x57330e*_0x42999b,_0x40e3ff*_0x42999b,_0x42999b,_0x42999b),_0x467275=this['atlasSplit'][0xc66*-0x2+-0x6fb*-0x2+-0x4b*-0x25+_0x57330e*_0x3a3f6c+_0x40e3ff];if(_0x467275>0xb82*0x1+0x2f*-0x93+0xf7c){for(let _0x592852=0x12ed+0x351+-0x2*0xb1f;_0x592852<_0x467275;_0x592852++)for(let _0x3f787d=-0xfee+-0x2*-0x4a8+0x69e;_0x3f787d<_0x467275;_0x3f787d++){const _0x345c5a=_0x42999b/_0x467275,_0x47d9e1=new re(_0x1e2e3f['x']+_0x592852*_0x345c5a,_0x1e2e3f['y']+_0x3f787d*_0x345c5a,_0x345c5a,_0x345c5a);this['slots']['push'](new tf(_0x47d9e1));}}else this['slots']['push'](new tf(_0x1e2e3f));}}else this['slots']['push'](new tf(new re(0x1*-0x1efd+0xf*0x2+0x1*0x1edf,-0x1f9a+-0x5b6*-0x1+0x19e4,-0xf4+-0xec6+0xfbb,0x2*-0x3ee+0x1c86+-0x14a9)));this['slots']['sort']((_0x365596,_0x471ce8)=>_0x471ce8['size']-_0x365596['size']);}}['collectLig'+'hts'](_0x312bcc,_0x1b0fd5){const _0x5e5c79=_0x1b0fd5['cookiesEna'+'bled'],_0x49576c=_0x1b0fd5['shadowsEna'+'bled'];let _0x493243=!(0x9*-0x1ba+-0x1db9*-0x1+-0xe2e),_0x39e66e=!(0x1*0xb11+0x20b*-0x11+0x17ab);const _0x3b7ea6=Mb;return _0x3b7ea6['length']=-0x1*0x10f3+-0xb57+0x1c4a,(_0x5e5c79||_0x49576c)&&(_0xa2525=>{for(let _0x2e9189=0x6*0x381+0x1a33+-0x2f39;_0x2e9189<_0xa2525['length'];_0x2e9189++){const _0x227e6b=_0xa2525[_0x2e9189];if(_0x227e6b['visibleThi'+'sFrame']){const _0x237e1d=_0x49576c&&_0x227e6b['castShadow'+'s'],_0x1afbf6=_0x5e5c79&&!!_0x227e6b['cookie'];_0x493243||(_0x493243=_0x237e1d),_0x39e66e||(_0x39e66e=_0x1afbf6),(_0x237e1d||_0x1afbf6)&&_0x3b7ea6['push'](_0x227e6b);}}})(_0x312bcc),_0x3b7ea6['sort']((_0x4c66c0,_0x1ee24f)=>_0x1ee24f['maxScreenS'+'ize']-_0x4c66c0['maxScreenS'+'ize']),_0x493243&&this['allocateSh'+'adowAtlas'](this['shadowAtla'+'sResolutio'+'n'],_0x1b0fd5['shadowType']),_0x39e66e&&this['allocateCo'+'okieAtlas'](this['cookieAtla'+'sResolutio'+'n']),(_0x493243||_0x39e66e)&&this['subdivide'](_0x3b7ea6['length'],_0x1b0fd5),_0x3b7ea6;}['setupSlot'](_0x2c3ca9,_0x4f9cc9){_0x2c3ca9['atlasViewp'+'ort']['copy'](_0x4f9cc9);const _0x1f2d9b=_0x2c3ca9['numShadowF'+'aces'];for(let _0x578cef=0x2*0x435+0x4*-0x971+0x1d5a;_0x578cef<_0x1f2d9b;_0x578cef++)if(_0x2c3ca9['castShadow'+'s']||_0x2c3ca9['_cookie']){if(xi['copy'](_0x4f9cc9),ef['copy'](_0x4f9cc9),_0x2c3ca9['_type']===Ze&&xi['add'](this['scissorVec']),_0x2c3ca9['_type']===Ke){const _0x33f4b1=xi['z']/(-0x2355+-0x1b92+-0x1f75*-0x2),_0x50f0fa=this['cubeSlotsO'+'ffsets'][_0x578cef];xi['x']+=_0x33f4b1*_0x50f0fa['x'],xi['y']+=_0x33f4b1*_0x50f0fa['y'],xi['z']=_0x33f4b1,xi['w']=_0x33f4b1,ef['copy'](xi);}if(_0x2c3ca9['castShadow'+'s']){const _0x215213=_0x2c3ca9['getRenderD'+'ata'](null,_0x578cef);_0x215213['shadowView'+'port']['copy'](xi),_0x215213['shadowScis'+'sor']['copy'](ef);}}}['assignSlot'](_0x835f86,_0x23c0e0,_0x570767){_0x835f86['atlasViewp'+'ortAllocat'+'ed']=!(0x27*-0x26+0x12c6+-0xcfc);const _0x41e8fe=this['slots'][_0x23c0e0];_0x41e8fe['lightId']=_0x835f86['id'],_0x41e8fe['used']=!(0x144*-0x11+-0x1*-0x15f7+-0x73),_0x570767&&(_0x835f86['atlasSlotU'+'pdated']=!(0x24cd*0x1+0x9ee*0x1+-0x2ebb),_0x835f86['atlasVersi'+'on']=this['version'],_0x835f86['atlasSlotI'+'ndex']=_0x23c0e0);}['update'](_0x60212f,_0x5081a6){this['shadowAtla'+'sResolutio'+'n']=_0x5081a6['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x5081a6['cookieAtla'+'sResolutio'+'n'];const _0x2dccc0=this['collectLig'+'hts'](_0x60212f,_0x5081a6);if(_0x2dccc0['length']>0x6e0+-0x241+-0x49f){const _0x2cf316=this['slots'];for(let _0x7d1aec=0x1b7*0x10+-0xe3a+0xd36*-0x1;_0x7d1aec<_0x2cf316['length'];_0x7d1aec++)_0x2cf316[_0x7d1aec]['used']=!(-0x76f+0xab*0x2e+0x10f*-0x16);const _0x3afa16=Math['min'](_0x2dccc0['length'],_0x2cf316['length']);for(let _0x5c78eb=-0xf0d*-0x2+-0x51b*0x2+0x86*-0x26;_0x5c78eb<_0x3afa16;_0x5c78eb++){const _0x3c1819=_0x2dccc0[_0x5c78eb];_0x3c1819['castShadow'+'s']&&(_0x3c1819['_shadowMap']=this['shadowAtla'+'s']);const _0x4ac122=_0x2cf316[_0x3c1819['atlasSlotI'+'ndex']];if(_0x3c1819['atlasVersi'+'on']===this['version']&&_0x3c1819['id']===(_0x4ac122==null?void(-0x26aa+0x1d1b+-0x98f*-0x1):_0x4ac122['lightId'])){const _0x3b6694=_0x2cf316[_0x3c1819['atlasSlotI'+'ndex']];_0x3b6694['size']===_0x2cf316[_0x5c78eb]['size']&&!_0x3b6694['used']&&this['assignSlot'](_0x3c1819,_0x3c1819['atlasSlotI'+'ndex'],!(-0x8eb+-0x1*0x21c2+0x2aae*0x1));}}let _0x5d7473=0x2*-0x11b+-0x995+0xbcb;for(let _0x14d023=0x23f8*0x1+-0x1258+-0x11a0;_0x14d023<_0x3afa16;_0x14d023++){for(;_0x5d7473<_0x2cf316['length']&&_0x2cf316[_0x5d7473]['used'];)_0x5d7473++;const _0x34596d=_0x2dccc0[_0x14d023];_0x34596d['atlasViewp'+'ortAllocat'+'ed']||this['assignSlot'](_0x34596d,_0x5d7473,!(0x2*0x118c+0x4c8+0x13f*-0x20));const _0xc8d188=_0x2cf316[_0x34596d['atlasSlotI'+'ndex']];this['setupSlot'](_0x34596d,_0xc8d188['rect']);}}this['updateUnif'+'orms']();}}class Lb{constructor(){this['cache']=new Map();}['destroy'](){this['clear'](),this['cache']=null;}['clear'](){this['cache']['forEach'](_0x7c1e61=>{_0x7c1e61['forEach'](_0x142359=>{_0x142359['destroy']();});}),this['cache']['clear']();}['getKey'](_0x442a97){const _0x2262e7=_0x442a97['_type']===Ke,_0x5411d0=_0x442a97['_shadowTyp'+'e'],_0x5284a5=_0x442a97['_shadowRes'+'olution'];return _0x2262e7+'-'+_0x5411d0+'-'+_0x5284a5;}['get'](_0x524e76,_0x35d6a0){const _0xc43fe6=this['getKey'](_0x35d6a0),_0x269a94=this['cache']['get'](_0xc43fe6);if(_0x269a94&&_0x269a94['length'])return _0x269a94['pop']();const _0x54cc39=va['create'](_0x524e76,_0x35d6a0);return _0x54cc39['cached']=!(0x3*-0x7a0+0xfb*0x1a+-0x29e),_0x54cc39;}['add'](_0x2a0aac,_0x1dc4a2){const _0x3fa6c1=this['getKey'](_0x2a0aac),_0x1bb700=this['cache']['get'](_0x3fa6c1);_0x1bb700?_0x1bb700['push'](_0x1dc4a2):this['cache']['set'](_0x3fa6c1,[_0x1dc4a2]);}}class Rb extends ys{constructor(_0x470251,_0x3a262a,_0x2424bf,_0x359474,_0x202568){super(_0x470251),Ea['setName'](this,this['name']+'-'+_0x2424bf['_node']['name']),this['requiresCu'+'bemaps']=!(0x38d*-0x6+-0x2627*-0x1+-0x10d8),this['shadowRend'+'erer']=_0x3a262a,this['light']=_0x2424bf,this['face']=_0x359474,this['applyVsm']=_0x202568,this['shadowCame'+'ra']=_0x3a262a['prepareFac'+'e'](_0x2424bf,null,_0x359474),_0x3a262a['setupRende'+'rPass'](this,this['shadowCame'+'ra'],!(0x1*-0xea7+0xe0d+0x9a));}['execute'](){this['shadowRend'+'erer']['renderFace'](this['light'],null,this['face'],!(-0x133*-0xb+-0x4*0x3ef+0x28c));}['after'](){this['applyVsm']&&this['shadowRend'+'erer']['renderVsm'](this['light'],this['shadowCame'+'ra']);}}class Ob{constructor(_0x367b31,_0x4513da){h(this,'shadowLigh'+'ts',[]),h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x367b31,this['shadowRend'+'erer']=_0x4513da,this['device']=_0x367b31['device']);}['cull'](_0x129fe7,_0x54e17d,_0x55c41f=null){const _0x3829f4=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled'];_0x129fe7['visibleThi'+'sFrame']=!(-0x1*0x5bf+-0x18b5+0x1e74*0x1),_0x3829f4||_0x129fe7['_shadowMap']||(_0x129fe7['_shadowMap']=va['create'](this['device'],_0x129fe7));const _0x1911be=_0x129fe7['_type'],_0x22d873=_0x1911be===Ze?-0xb*0x2d1+0x4*-0x853+0x2024*0x2:0x4c*-0x59+0x14f8+0x57a*0x1;for(let _0x321c22=0x12*-0x125+-0x5ac+0xd23*0x2;_0x321c22<_0x22d873;_0x321c22++){const _0x37da06=_0x129fe7['getRenderD'+'ata'](null,_0x321c22),_0x236d41=_0x37da06['shadowCame'+'ra'];_0x236d41['nearClip']=_0x129fe7['attenuatio'+'nEnd']/(0x1825+-0xd*-0x98+-0x1bf5),_0x236d41['farClip']=_0x129fe7['attenuatio'+'nEnd'];const _0x5a6b02=_0x236d41['_node'],_0x27be82=_0x129fe7['_node'];if(_0x5a6b02['setPositio'+'n'](_0x27be82['getPositio'+'n']()),_0x1911be===Ze)_0x236d41['fov']=_0x129fe7['_outerCone'+'Angle']*(-0x670+0x13*-0xb+0x743),_0x5a6b02['setRotatio'+'n'](_0x27be82['getRotatio'+'n']()),_0x5a6b02['rotateLoca'+'l'](-(0x3*0x491+0x2117+-0x2e70),0xb5c+-0x10bd+0x561,-0x2381+-0x3e*0x23+0x2bfb);else{if(_0x1911be===Ke){if(_0x3829f4){const _0x4bc92d=(0x6*0x3ce+0x5*0x49a+-0xb75*0x4)/(this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowAtla'+'sResolutio'+'n']*_0x129fe7['atlasViewp'+'ort']['z']/(0x1a1a+-0x660+0x1*-0x13b7))*this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowEdge'+'Pixels'];_0x236d41['fov']=Math['atan'](0x1bfc+-0x21a4+0x5a9+_0x4bc92d)*Y['RAD_TO_DEG']*(0x14*0xd6+0x1f99+-0x304f);}else _0x236d41['fov']=0x442+0x1*-0x2291+0x1ea9;}}this['renderer']['updateCame'+'raFrustum'](_0x236d41),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x54e17d,_0x129fe7,_0x37da06['visibleCas'+'ters'],_0x236d41,_0x55c41f);}}['prepareLig'+'hts'](_0x277f9f,_0x318bce){let _0x564721;for(let _0x5aa6bd=0xa76+-0x5b7*0x3+-0x1d*-0x3b;_0x5aa6bd<_0x318bce['length'];_0x5aa6bd++){const _0x1bf61c=_0x318bce[_0x5aa6bd];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x1bf61c)&&_0x1bf61c['atlasViewp'+'ortAllocat'+'ed']){_0x277f9f['push'](_0x1bf61c);for(let _0x36c17d=-0x1fb5*-0x1+-0x6*0x100+0x19b5*-0x1;_0x36c17d<_0x1bf61c['numShadowF'+'aces'];_0x36c17d++)_0x564721=this['shadowRend'+'erer']['prepareFac'+'e'](_0x1bf61c,null,_0x36c17d);}}return _0x564721;}['buildNonCl'+'usteredRen'+'derPasses'](_0x1cd9e6,_0x53abaa){for(let _0x5ed810=0x1a6e*-0x1+0x23*0x59+-0x4c1*-0x3;_0x5ed810<_0x53abaa['length'];_0x5ed810++){const _0x59ac47=_0x53abaa[_0x5ed810];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x59ac47)){const _0x5ce851=_0x59ac47['_type']===Ze,_0x272a22=_0x59ac47['numShadowF'+'aces'];for(let _0x6c9b5b=-0x1e8b+0xc5*0x13+0xfec;_0x6c9b5b<_0x272a22;_0x6c9b5b++){const _0x13b68d=new Rb(this['device'],this['shadowRend'+'erer'],_0x59ac47,_0x6c9b5b,_0x5ce851);_0x1cd9e6['addRenderP'+'ass'](_0x13b68d);}}}}}class Fb extends ys{constructor(_0x40aae6,_0x2a4c25,_0x401f41,_0x24cd10,_0x446beb){super(_0x40aae6),Ea['setName'](this,this['name']+'-'+_0x401f41['_node']['name']),this['shadowRend'+'erer']=_0x2a4c25,this['light']=_0x401f41,this['camera']=_0x24cd10,this['allCascade'+'sRendering']=_0x446beb;}['execute'](){const {light:_0xd7d716,camera:_0xa186,shadowRenderer:_0x56c90a,allCascadesRendering:_0x2d67fa}=this,_0x72c7d=_0xd7d716['numShadowF'+'aces'],_0xfe9755=_0xd7d716['shadowUpda'+'teOverride'+'s'];for(let _0x56bdb1=0x1d3b+0x24f3+0x2*-0x2117;_0x56bdb1<_0x72c7d;_0x56bdb1++)(_0xfe9755==null?void(0x1e10+-0x3*-0x529+0x83*-0x59):_0xfe9755[_0x56bdb1])!==Ps&&_0x56c90a['renderFace'](_0xd7d716,_0xa186,_0x56bdb1,!_0x2d67fa),(_0xfe9755==null?void(0xf*0x271+-0x1d1e+-0x781):_0xfe9755[_0x56bdb1])===xr&&(_0xfe9755[_0x56bdb1]=Ps);}['after'](){this['shadowRend'+'erer']['renderVsm'](this['light'],this['camera']);}}const lc=new De(),Ti=new D(),H_=new te(),Xe=[new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D()],sf={'min':0x0,'max':0x0};function Nb(_0x4ea557,_0x2a24b4,_0x5b0867){Xe[0x1b0a+-0x1*-0x4fd+0x38f*-0x9]['x']=Xe[-0x51c*-0x5+-0x238f+0xa04*0x1]['x']=Xe[0x1*-0x1cc3+0x171c+0x1*0x5a9]['x']=Xe[0x85*-0x13+0x1c4a+-0x1268]['x']=_0x2a24b4['x'],Xe[-0x125f+-0x238b+-0x141*-0x2b]['y']=Xe[0x5*0x35+-0xd9c+0x432*0x3]['y']=Xe[-0x843+-0x7e*0x4f+0x2f2c]['y']=Xe[-0x2094+0x8e8+0x17b1*0x1]['y']=_0x2a24b4['y'],Xe[0x457*0x7+0xc9f+-0x2afe*0x1]['z']=Xe[0x69d+0x1a1f+-0x20b9*0x1]['z']=Xe[0x2041+-0x17b+-0x1ec0]['z']=Xe[0x50e+0x1*0x1e76+0x18b*-0x17]['z']=_0x2a24b4['z'],Xe[-0x1cd5+0xe9a+-0xe3f*-0x1]['x']=Xe[-0x2692*0x1+0x99*0x31+0x94e]['x']=Xe[-0x1ab+-0x3f1+0x5a2]['x']=Xe[0x1b*0x169+0xdfc+-0x78*0x6f]['x']=_0x5b0867['x'],Xe[-0x32*0x19+-0x1fb1+0x2493]['y']=Xe[-0x1*0x475+-0x1*-0x68c+-0x215]['y']=Xe[0x1ac*-0x3+0x1*-0x775+0xc7d*0x1]['y']=Xe[0x1*-0x1db7+0x1abc+0x301*0x1]['y']=_0x5b0867['y'],Xe[0x1b*-0xe5+0x473*0x6+-0x1*0x28b]['z']=Xe[-0xaa4+-0x7*0x435+0x2818]['z']=Xe[-0x1f39+-0x22df+-0x1087*-0x4]['z']=Xe[-0x45*0x11+0xc5d+0x7c3*-0x1]['z']=_0x5b0867['z'];let _0x189eaf=-0x5*-0xe2ac1552+-0x1*-0xb9a84b1d+-0x2d2f8d1b8,_0x33ad37=-(0x27768d1ea+0x261a623c8+0x1*-0x2850311b3);for(let _0x459a32=-0xac6*-0x3+-0xf09+-0x1149;_0x459a32<0xa*-0xe+-0x4a+0xde;++_0x459a32){_0x4ea557['transformP'+'oint'](Xe[_0x459a32],Xe[_0x459a32]);const _0x2b4726=Xe[_0x459a32]['z'];_0x2b4726<_0x189eaf&&(_0x189eaf=_0x2b4726),_0x2b4726>_0x33ad37&&(_0x33ad37=_0x2b4726);}return sf['min']=_0x189eaf,sf['max']=_0x33ad37,sf;}class kb{constructor(_0x4766a6,_0x55237a){h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x4766a6,this['shadowRend'+'erer']=_0x55237a,this['device']=_0x4766a6['device']);}['cull'](_0x24b9aa,_0x20afdf,_0x592af3,_0x4e8d64=null){_0x24b9aa['visibleThi'+'sFrame']=!(-0x20*-0x47+-0x1*-0x75+-0x955),_0x24b9aa['_shadowMap']||(_0x24b9aa['_shadowMap']=va['create'](this['device'],_0x24b9aa));const _0x163d5f=_0x592af3['_nearClip'];this['generateSp'+'litDistanc'+'es'](_0x24b9aa,_0x163d5f,Math['min'](_0x592af3['_farClip'],_0x24b9aa['shadowDist'+'ance']));const _0x5035b9=_0x24b9aa['shadowUpda'+'teOverride'+'s'];for(let _0x3c6e01=-0x1980+0x1d2a+-0x2*0x1d5;_0x3c6e01<_0x24b9aa['numCascade'+'s']&&(_0x5035b9==null?void(-0x4*0x410+0x4da+0xb66):_0x5035b9[_0x3c6e01])!==Ps;_0x3c6e01++){const _0x3623bf=_0x24b9aa['getRenderD'+'ata'](_0x592af3,_0x3c6e01),_0x1da179=_0x3623bf['shadowCame'+'ra'];_0x1da179['renderTarg'+'et']=_0x24b9aa['_shadowMap']['renderTarg'+'ets'][0x2614*-0x1+-0x6bb*0x5+0x47bb],_0x3623bf['shadowView'+'port']['copy'](_0x24b9aa['cascades'][_0x3c6e01]),_0x3623bf['shadowScis'+'sor']['copy'](_0x24b9aa['cascades'][_0x3c6e01]);const _0x27b62f=_0x1da179['_node'],_0x46c2f8=_0x24b9aa['_node'];_0x27b62f['setPositio'+'n'](_0x46c2f8['getPositio'+'n']()),_0x27b62f['setRotatio'+'n'](_0x46c2f8['getRotatio'+'n']()),_0x27b62f['rotateLoca'+'l'](-(-0x237+-0x3*-0xff+0x9*-0xc),0xfdd*-0x2+-0x3*0x403+-0x293*-0x11,0x19e4+0x5f+-0x1a43*0x1);const _0x4604ea=_0x3c6e01===0x17*-0x153+-0x1*0x17bf+0x4*0xd8d?_0x163d5f:_0x24b9aa['_shadowCas'+'cadeDistan'+'ces'][_0x3c6e01-(0x29e+-0x556*0x1+0x1*0x2b9)],_0x5dfb28=_0x24b9aa['_shadowCas'+'cadeDistan'+'ces'][_0x3c6e01],_0x231806=_0x592af3['getFrustum'+'Corners'](_0x4604ea,_0x5dfb28);Ti['set'](-0x1*-0x4b5+0xb*-0x91+0x186,0x1dd*-0x1+0xbec+0x1*-0xa0f,-0xa67+-0x21f4+0x2c5b);const _0x47b9f9=_0x592af3['node']['getWorldTr'+'ansform']();for(let _0x5be438=-0x44d*0x1+-0x163*-0xb+-0xaf4;_0x5be438<-0x23b*-0x1+-0x71*-0x1d+0x3*-0x500;_0x5be438++)_0x47b9f9['transformP'+'oint'](_0x231806[_0x5be438],_0x231806[_0x5be438]),Ti['add'](_0x231806[_0x5be438]);Ti['mulScalar']((-0x1426+0xcdb+0x74c)/(-0x11*0x217+0x17*-0x1a+0x25e5*0x1));let _0x17b379=-0x1489*0x1+0x1fff+-0xb76;for(let _0x2f3759=-0x62b*0x3+-0x23a7+0x3628;_0x2f3759<-0x9*0x123+-0x1d5a+0x279d*0x1;_0x2f3759++){const _0x9d8038=_0x231806[_0x2f3759]['sub'](Ti)['length']();_0x9d8038>_0x17b379&&(_0x17b379=_0x9d8038);}const _0x3f977c=_0x27b62f['right'],_0x195d9a=_0x27b62f['up'],_0xc6aa1a=_0x27b62f['forward'],_0x4c40c8=(0x17d1+-0x1*-0x1937+-0x4*0xc42+0.25)*_0x24b9aa['_shadowRes'+'olution']/_0x17b379,_0x1a7b8a=Math['ceil'](Ti['dot'](_0x195d9a)*_0x4c40c8)/_0x4c40c8,_0x5dd179=Math['ceil'](Ti['dot'](_0x3f977c)*_0x4c40c8)/_0x4c40c8,_0x29f532=_0x195d9a['mulScalar'](_0x1a7b8a),_0x8f38e4=_0x3f977c['mulScalar'](_0x5dd179),_0x5443df=Ti['dot'](_0xc6aa1a),_0x25b632=_0xc6aa1a['mulScalar'](_0x5443df);Ti['add2'](_0x29f532,_0x8f38e4)['add'](_0x25b632),_0x27b62f['setPositio'+'n'](Ti),_0x27b62f['translateL'+'ocal'](-0xe1e+0x2e*-0x57+-0x22*-0xe0,-0x16b0+0x4bb+0x1*0x11f5,0x1*0x1cc61b+0x1fd1c+-0xf80f7*0x1),_0x1da179['nearClip']=0x1c11+-0x152*0xc+-0xc39+0.01,_0x1da179['farClip']=0x1*0xc938f+-0x3371*-0x7f+-0x5*0x18406,_0x1da179['orthoHeigh'+'t']=_0x17b379,this['renderer']['updateCame'+'raFrustum'](_0x1da179),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x20afdf,_0x24b9aa,_0x3623bf['visibleCas'+'ters'],_0x1da179,_0x4e8d64);const _0x4818ff=0x15f7+-0x177e+0xe*0x1c<<_0x3c6e01,_0x5adc65=_0x3623bf['visibleCas'+'ters'],_0x56fb71=_0x5adc65['length'];let _0x593255=0x10ce*0x2+0x7*-0x407+-0x56b;for(let _0x7b9210=-0x33d*-0x1+-0xbce+-0x2b*-0x33;_0x7b9210<_0x56fb71;_0x7b9210++){const _0x304237=_0x5adc65[_0x7b9210];_0x304237['shadowCasc'+'adeMask']&_0x4818ff&&(_0x5adc65[_0x593255++]=_0x304237,_0x593255===0x850*-0x1+0x4e5*-0x7+0x1b4*0x19?lc['copy'](_0x304237['aabb']):lc['add'](_0x304237['aabb']));}_0x56fb71!==_0x593255&&(_0x5adc65['length']=_0x593255),H_['copy'](_0x27b62f['getWorldTr'+'ansform']())['invert']();const _0x49650f=Nb(H_,lc['getMin'](),lc['getMax']());_0x27b62f['translateL'+'ocal'](-0x9fa+0x1*0x2573+-0x21d*0xd,0x981+-0x6*0x512+0x14eb,_0x49650f['max']+(-0x1db3+-0xfd6+0x2d89+0.1)),_0x1da179['farClip']=_0x49650f['max']-_0x49650f['min']+(0x5*-0x6ef+-0x5*0x613+0x410a+0.2),_0x3623bf['projection'+'Compensati'+'on']=_0x17b379;}}['generateSp'+'litDistanc'+'es'](_0x2ca61a,_0x217324,_0x4f5dcf){_0x2ca61a['_shadowCas'+'cadeDistan'+'ces']['fill'](_0x4f5dcf);for(let _0xd6bf88=-0x11b*-0xd+-0xb0f+-0x34f;_0xd6bf88<_0x2ca61a['numCascade'+'s'];_0xd6bf88++){const _0x197a8a=_0xd6bf88/_0x2ca61a['numCascade'+'s'],_0x29e54f=_0x217324+(_0x4f5dcf-_0x217324)*_0x197a8a,_0x52e1e2=_0x217324*(_0x4f5dcf/_0x217324)**_0x197a8a,_0x45de1d=Y['lerp'](_0x29e54f,_0x52e1e2,_0x2ca61a['cascadeDis'+'tribution']);_0x2ca61a['_shadowCas'+'cadeDistan'+'ces'][_0xd6bf88-(-0x7*-0x3b9+0x330*-0x8+-0x1*0x8e)]=_0x45de1d;}}['getLightRe'+'nderPass'](_0x33792e,_0x4ca5ef){w['assert'](_0x33792e&&_0x33792e['_type']===ve);let _0x3ed6aa=null;if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x33792e)){const _0x41ece9=_0x33792e['numShadowF'+'aces'],_0x26a341=_0x33792e['shadowUpda'+'teOverride'+'s'];let _0x38d9dd=!(0x2ea*-0x4+0x8a*0x3a+0x4e7*-0x4),_0x1d2d50;for(let _0x1043b6=0xb*0x2f+0x1*0x10bb+-0x12c0;_0x1043b6<_0x41ece9;_0x1043b6++)(_0x26a341==null?void(-0x96f+-0x26*0x54+0x15e7):_0x26a341[_0x1043b6])===Ps&&(_0x38d9dd=!(0x186f+-0x2261+0x9f3*0x1)),_0x1d2d50=this['shadowRend'+'erer']['prepareFac'+'e'](_0x33792e,_0x4ca5ef,_0x1043b6);_0x3ed6aa=new Fb(this['device'],this['shadowRend'+'erer'],_0x33792e,_0x4ca5ef,_0x38d9dd),this['shadowRend'+'erer']['setupRende'+'rPass'](_0x3ed6aa,_0x1d2d50,_0x38d9dd);}return _0x3ed6aa;}}const rf=new Set(),W_=new te(),$_=new te(),Fr=new Float32Array(0x101e*-0x2+0x2107+-0xc9),lo=new re(0x26a*-0x10+0x4e4*-0x7+0x17*0x32b,0xd98+-0x12b+-0xc6c,0x1009*0x1+-0x158d+0x584,0x9b7+0xa*0x180+-0x18b7),X_=new te();function Ub(_0x198636,_0x5dea4f){return Math['exp'](-(_0x198636*_0x198636)/((0x3f9*0x2+-0x2364+-0xfb*-0x1c)*_0x5dea4f*_0x5dea4f));}function Bb(_0x164e56){const _0x540c07=(_0x164e56-(0x1*0x911+-0x17eb+0xedb))/(0x1bb4+-0x1*-0x819+-0x23c7),_0x29bbb6=(_0x164e56-(-0x2178+0x26a1+-0x528))*(0x89c+0x5d8+-0x172*0xa+0.5),_0x35a819=new Array(_0x164e56);let _0x439cde=0x106b+0x9ef+0x2*-0xd2d;for(let _0x2beb66=0x7e1*0x1+0x34*0x5f+-0x1b2d;_0x2beb66<_0x164e56;++_0x2beb66)_0x35a819[_0x2beb66]=Ub(_0x2beb66-_0x29bbb6,_0x540c07),_0x439cde+=_0x35a819[_0x2beb66];for(let _0x3b44aa=0x231+-0x166*0x10+-0x1*-0x142f;_0x3b44aa<_0x164e56;++_0x3b44aa)_0x35a819[_0x3b44aa]/=_0x439cde;return _0x35a819;}class Cv{constructor(_0x9a08cb,_0x422e19){h(this,'shadowPass'+'Cache',[]),(this['device']=_0x9a08cb['device'],this['renderer']=_0x9a08cb,this['lightTextu'+'reAtlas']=_0x422e19);const _0x5085e3=this['device']['scope'];this['sourceId']=_0x5085e3['resolve']('source'),this['pixelOffse'+'tId']=_0x5085e3['resolve']('pixelOffse'+'t'),this['weightId']=_0x5085e3['resolve']('weight[0]'),this['blurVsmSha'+'der']=[{},{}],this['blurVsmWei'+'ghts']={},this['shadowMapL'+'ightRadius'+'Id']=_0x5085e3['resolve']('light_radi'+'us'),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['blendState'+'Write']=new pt(),this['blendState'+'NoWrite']=new pt(),this['blendState'+'NoWrite']['setColorWr'+'ite'](!(-0xb16+0x1*0x347+0x7d0),!(0x1702*-0x1+-0x3*-0x229+0xb8*0x17),!(-0x1b1b+0x11d6*-0x2+0x3ec8*0x1),!(0x1*0x796+-0x228e+0x1af9));}static['createShad'+'owCamera'](_0x14a3dc,_0x2b71ab,_0x518fae){const _0x1b9adc=Wn['create']('ShadowCame'+'ra',_0x2b71ab,_0x518fae),_0x25efd7=qi['get'](_0x14a3dc);w['assert'](_0x25efd7);const _0x5c7aa7=(_0x25efd7==null?void(0x242e+-0x54c+0x43*-0x76):_0x25efd7['vsm'])??!(-0x1fc6+-0x37*-0x91+-0x8*-0x14),_0x41b881=(_0x25efd7==null?void(0x5*-0x5c5+-0x1985+0x365e):_0x25efd7['pcf'])??!(-0xfc7*0x1+-0x1457+0x7*0x529);return _0x5c7aa7?_0x1b9adc['clearColor']=new ie(-0xb26+-0x13*0xc5+-0x1*-0x19c5,0x3*-0x355+0x11e9+-0x7ea,0x2*-0xa3d+-0x7d*-0x1+0x13fd,-0x2155+-0x1b9d+-0x3a*-0x10d):_0x1b9adc['clearColor']=new ie(0x1ce1+0x520*-0x1+0x1*-0x17c0,0x1a6e+0x2f2*-0xd+0xbdd,0xc39+0x46b+0x1*-0x10a3,-0xb2d*-0x1+-0x1f03+0x13d7),_0x1b9adc['clearDepth'+'Buffer']=!(-0x88d*-0x2+0xc83+-0x1d9d),_0x1b9adc['clearStenc'+'ilBuffer']=!(0x1d*-0x11a+0x2*0xe32+-0x1*-0x38f),_0x1b9adc['clearColor'+'Buffer']=!_0x41b881,_0x1b9adc;}['_cullShado'+'wCastersIn'+'ternal'](_0x436551,_0x4e0e74,_0x280f5d){const _0x19ec53=_0x436551['length'];for(let _0xbbbcf9=0x1ac4+0x1*0x1e43+-0x3907;_0xbbbcf9<_0x19ec53;_0xbbbcf9++){const _0x205843=_0x436551[_0xbbbcf9];_0x205843['castShadow']&&(!_0x205843['cull']||_0x205843['_isVisible'](_0x280f5d))&&(_0x205843['visibleThi'+'sFrame']=!(-0x17ca+-0x1aac+-0x3276*-0x1),_0x4e0e74['push'](_0x205843));}}['cullShadow'+'Casters'](_0x26e326,_0x1b2420,_0x84482a,_0x1f9392,_0x4dc526){var _0x3dfc3,_0x4543a5;if((_0x3dfc3=this['renderer']['scene'])==null||_0x3dfc3['fire'](mv,_0x1f9392),_0x84482a['length']=-0x1*-0xb92+0x235e+-0x2ef0,_0x4dc526)this['_cullShado'+'wCastersIn'+'ternal'](_0x4dc526,_0x84482a,_0x1f9392);else{const _0x478535=_0x26e326['layerList'],_0x28f8ca=_0x478535['length'];for(let _0x3a586d=-0x1*-0xe5d+-0x655*0x1+-0x1*0x808;_0x3a586d<_0x28f8ca;_0x3a586d++){const _0x31e599=_0x478535[_0x3a586d];_0x31e599['_lightsSet']['has'](_0x1b2420)&&(rf['has'](_0x31e599)||(rf['add'](_0x31e599),this['_cullShado'+'wCastersIn'+'ternal'](_0x31e599['shadowCast'+'ers'],_0x84482a,_0x1f9392)));}rf['clear']();}_0x84482a['sort'](this['sortCompar'+'eShader']),(_0x4543a5=this['renderer']['scene'])==null||_0x4543a5['fire'](_v,_0x1f9392);}['sortCompar'+'eShader'](_0x226b77,_0x4c4b10){const _0x445b0c=_0x226b77['_sortKeySh'+'adow'],_0x148398=_0x4c4b10['_sortKeySh'+'adow'];return _0x445b0c===_0x148398?_0x4c4b10['mesh']['id']-_0x226b77['mesh']['id']:_0x148398-_0x445b0c;}['setupRende'+'rState'](_0x1dfbbf,_0x534425){const _0x161ac7=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']?_0x534425['_isPcf']:_0x534425['_isPcf']&&_0x534425['_type']!==Ke;_0x1dfbbf['setBlendSt'+'ate'](_0x161ac7?this['blendState'+'NoWrite']:this['blendState'+'Write']),_0x1dfbbf['setDepthSt'+'ate'](_0x534425['shadowDept'+'hState']),_0x1dfbbf['setStencil'+'State'](null,null);}['dispatchUn'+'iforms'](_0x37b31d,_0x15efa5,_0x15bbff,_0xb955b2){const _0x5cb516=_0x15efa5['_node'];_0x37b31d['_type']!==ve&&(this['renderer']['dispatchVi'+'ewPos'](_0x5cb516['getPositio'+'n']()),this['shadowMapL'+'ightRadius'+'Id']['setValue'](_0x37b31d['attenuatio'+'nEnd'])),W_['setTRS'](_0x5cb516['getPositio'+'n'](),_0x5cb516['getRotatio'+'n'](),D['ONE'])['invert'](),$_['mul2'](_0x15efa5['projection'+'Matrix'],W_);const _0x405093=_0x15bbff['shadowView'+'port'];_0x15efa5['rect']=_0x405093,_0x15efa5['scissorRec'+'t']=_0x15bbff['shadowScis'+'sor'],X_['setViewpor'+'t'](_0x405093['x'],_0x405093['y'],_0x405093['z'],_0x405093['w']),_0x15bbff['shadowMatr'+'ix']['mul2'](X_,$_),_0x37b31d['_type']===ve&&_0x37b31d['_shadowMat'+'rixPalette']['set'](_0x15bbff['shadowMatr'+'ix']['data'],_0xb955b2*(-0x1*-0xee+-0x1268+0x118a));}['getShadowP'+'ass'](_0x589a9d){var _0x2b7197;const _0x4faa44=_0x589a9d['_type'],_0x369814=_0x589a9d['_shadowTyp'+'e'];let _0x538423=(_0x2b7197=this['shadowPass'+'Cache'][_0x4faa44])==null?void(0x1daf+-0xd79+-0x1036):_0x2b7197[_0x369814];if(!_0x538423){const _0x351299='ShadowPass'+'_'+_0x4faa44+'_'+_0x369814;_0x538423=Si['get'](this['device'])['allocate'](_0x351299,{'isShadow':!(0x2e*0x2e+-0x15f+-0x6e5),'lightType':_0x4faa44,'shadowType':_0x369814}),this['shadowPass'+'Cache'][_0x4faa44]||(this['shadowPass'+'Cache'][_0x4faa44]=[]),this['shadowPass'+'Cache'][_0x4faa44][_0x369814]=_0x538423;}return _0x538423['index'];}['submitCast'+'ers'](_0x266c94,_0x4ded24,_0x5463a4){var _0x4b83f1;const _0x222a7e=this['device'],_0x1f43d1=this['renderer'],_0x47b885=_0x1f43d1['scene'],_0x306c80=-0x3*0x683+0x3*0x409+0xad*0xb<<cm,_0x30ec23=this['getShadowP'+'ass'](_0x4ded24),_0x92b40d=_0x5463a4['shaderPara'+'ms'],_0x346b31=_0x5463a4['renderTarg'+'et']['flipY']?-(0x74f*-0x5+-0x2*0x59d+0x2fc6):0x7*0x1d5+-0x52*-0x6c+0x2*-0x17b5,_0x419997=_0x266c94['length'];for(let _0x33f2cd=0xc3e*0x1+0x21e9*-0x1+0x15ab;_0x33f2cd<_0x419997;_0x33f2cd++){const _0x2226ff=_0x266c94[_0x33f2cd],_0x550ebe=_0x2226ff['mesh'],_0x515178=_0x2226ff['instancing'+'Data'];if(_0x515178&&_0x515178['count']<=0x17e1*-0x1+-0x141*-0x1+0x16a0)continue;_0x2226ff['ensureMate'+'rial'](_0x222a7e);const _0x34935b=_0x2226ff['material'];Q['pushGpuMar'+'ker'](_0x222a7e,'Node:\x20'+_0x2226ff['node']['name']+(',\x20Material'+':\x20')+_0x34935b['name']),_0x1f43d1['setBaseCon'+'stants'](_0x222a7e,_0x34935b),_0x1f43d1['setSkinnin'+'g'](_0x222a7e,_0x2226ff),_0x34935b['dirty']&&(_0x34935b['updateUnif'+'orms'](_0x222a7e,_0x47b885),_0x34935b['dirty']=!(0x22b1+-0x18a7*-0x1+-0x3b57)),_0x1f43d1['setupCullM'+'ode'](!(-0x1e67+0x3e5*-0x1+0x5*0x6dc),_0x346b31,_0x2226ff),_0x34935b['setParamet'+'ers'](_0x222a7e),_0x2226ff['setParamet'+'ers'](_0x222a7e,_0x306c80);const _0x499fae=_0x2226ff['getShaderI'+'nstance'](_0x30ec23,0x17*-0x56+-0xb7d*0x2+0x106*0x1e,_0x47b885,_0x92b40d,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat']),_0x432b29=_0x499fae['shader'];if(w['assert'](_0x432b29,'no\x20shader\x20'+'for\x20pass\x20'+_0x30ec23,_0x34935b),_0x432b29['failed'])continue;_0x2226ff['_sortKeySh'+'adow']=_0x432b29['id'],_0x222a7e['setShader'](_0x432b29),_0x1f43d1['setVertexB'+'uffers'](_0x222a7e,_0x550ebe),_0x1f43d1['setMorphin'+'g'](_0x222a7e,_0x2226ff['morphInsta'+'nce']),_0x515178&&_0x222a7e['setVertexB'+'uffer'](_0x515178['vertexBuff'+'er']),_0x1f43d1['setMeshIns'+'tanceMatri'+'ces'](_0x2226ff),_0x1f43d1['setupMeshU'+'niformBuff'+'ers'](_0x499fae);const _0x2e3fba=_0x2226ff['renderStyl'+'e'],_0x37a9a4=(_0x4b83f1=_0x2226ff['indirectDa'+'ta'])==null?void(-0x2579+-0x1a84+0x3ffd):_0x4b83f1['get'](_0x5463a4);_0x222a7e['draw'](_0x550ebe['primitive'][_0x2e3fba],_0x550ebe['indexBuffe'+'r'][_0x2e3fba],_0x515178==null?void(0x962+-0x23f6+-0x2a*-0xa2):_0x515178['count'],_0x37a9a4),_0x1f43d1['_shadowDra'+'wCalls']++,_0x515178&&_0x1f43d1['_instanced'+'DrawCalls']++,Q['popGpuMark'+'er'](_0x222a7e);}}['needsShado'+'wRendering'](_0x4f9d49){const _0x250727=_0x4f9d49['enabled']&&_0x4f9d49['castShadow'+'s']&&_0x4f9d49['shadowUpda'+'teMode']!==Ps&&_0x4f9d49['visibleThi'+'sFrame'];return _0x4f9d49['shadowUpda'+'teMode']===xr&&(_0x4f9d49['shadowUpda'+'teMode']=Ps),_0x250727&&(this['renderer']['_shadowMap'+'Updates']+=_0x4f9d49['numShadowF'+'aces']),_0x250727;}['getLightRe'+'nderData'](_0x57aceb,_0x5292bb,_0x58dae3){return _0x57aceb['getRenderD'+'ata'](_0x57aceb['_type']===ve?_0x5292bb:null,_0x58dae3);}['setupRende'+'rPass'](_0x14e677,_0x30070c,_0x258701){const _0x15597d=_0x30070c['renderTarg'+'et'];_0x14e677['init'](_0x15597d),_0x14e677['depthStenc'+'ilOps']['clearDepth'+'Value']=0x10*0x21d+0x13ca*-0x1+-0x25*0x61,_0x14e677['depthStenc'+'ilOps']['clearDepth']=_0x258701,_0x15597d['depthBuffe'+'r']?_0x14e677['depthStenc'+'ilOps']['storeDepth']=!(0x4*-0x6d9+0x2023+-0x3*0x195):(_0x14e677['colorOps']['clearValue']['copy'](_0x30070c['clearColor']),_0x14e677['colorOps']['clear']=_0x258701,_0x14e677['depthStenc'+'ilOps']['storeDepth']=!(-0x60a*-0x2+0xdfb*0x1+-0x1a0e)),_0x14e677['requiresCu'+'bemaps']=!(0xd25*0x1+0x69*-0x17+-0x3b5);}['prepareFac'+'e'](_0x3bedb5,_0x58dbd3,_0x407b30){const _0x5472d5=_0x3bedb5['_type'],_0x15347c=this['getLightRe'+'nderData'](_0x3bedb5,_0x58dbd3,_0x407b30)['shadowCame'+'ra'],_0x379b48=_0x5472d5===ve?0x1*0x1498+0xa2e+0x1a*-0x12f:_0x407b30;return _0x15347c['renderTarg'+'et']=_0x3bedb5['_shadowMap']['renderTarg'+'ets'][_0x379b48],_0x15347c;}['renderFace'](_0x2ab3bd,_0x4b166a,_0x116610,_0x2d9ea1,_0x50eeb1=!(0x11*-0x2f+0x35*0x5d+-0x1022)){const _0xfffc00=this['device'],_0x41df97=de();Q['pushGpuMar'+'ker'](_0xfffc00,'SHADOW\x20'+_0x2ab3bd['_node']['name']+'\x20FACE\x20'+_0x116610);const _0x33d32e=this['getLightRe'+'nderData'](_0x2ab3bd,_0x4b166a,_0x116610),_0x4bcb59=_0x33d32e['shadowCame'+'ra'];this['dispatchUn'+'iforms'](_0x2ab3bd,_0x4bcb59,_0x33d32e,_0x116610);const _0x579a90=_0x4bcb59['renderTarg'+'et'],_0x3b7fdc=this['renderer'];_0x3b7fdc['setCameraU'+'niforms'](_0x4bcb59,_0x579a90),_0xfffc00['supportsUn'+'iformBuffe'+'rs']&&_0x3b7fdc['setupViewU'+'niformBuff'+'ers'](_0x33d32e['viewBindGr'+'oups'],this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],null),_0x50eeb1?(_0x3b7fdc['setupViewp'+'ort'](_0x4bcb59,_0x579a90),_0x2d9ea1&&_0x3b7fdc['clear'](_0x4bcb59)):_0x3b7fdc['clearView'](_0x4bcb59,_0x579a90,!(-0x1261+0x2551+0x194*-0xc),!(0x5*0x6d7+-0x1*0xb79+0x793*-0x3)),this['setupRende'+'rState'](_0xfffc00,_0x2ab3bd),this['submitCast'+'ers'](_0x33d32e['visibleCas'+'ters'],_0x2ab3bd,_0x4bcb59),Q['popGpuMark'+'er'](_0xfffc00),_0x3b7fdc['_shadowMap'+'Time']+=de()-_0x41df97;}['render'](_0x51bf53,_0x57f8e8,_0x4a4baa=!(0x1*0x1105+-0xd99+0x3*-0x124)){if(this['needsShado'+'wRendering'](_0x51bf53)){const _0x47aaf5=_0x51bf53['numShadowF'+'aces'];for(let _0xaadb41=0x64c+-0x1b3f+0x14f3;_0xaadb41<_0x47aaf5;_0xaadb41++)this['prepareFac'+'e'](_0x51bf53,_0x57f8e8,_0xaadb41),this['renderFace'](_0x51bf53,_0x57f8e8,_0xaadb41,!(-0x2cd+-0x359*-0x2+0x3e5*-0x1),_0x4a4baa);this['renderVsm'](_0x51bf53,_0x57f8e8);}}['renderVsm'](_0x34883f,_0x823712){_0x34883f['_isVsm']&&_0x34883f['_vsmBlurSi'+'ze']>0x31b+0xd60+-0x107a&&(!this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']||_0x34883f['_type']===ve)&&this['applyVsmBl'+'ur'](_0x34883f,_0x823712);}['getVsmBlur'+'Shader'](_0x4af01e,_0x4426b1){const _0x1c1040=this['blurVsmSha'+'der'];let _0x33c757=_0x1c1040[_0x4af01e][_0x4426b1];if(!_0x33c757){this['blurVsmWei'+'ghts'][_0x4426b1]=Bb(_0x4426b1);const _0x10a396=new Map();_0x10a396['set']('{SAMPLES}',_0x4426b1),_0x4af01e===0xf7c+0x255a*0x1+-0x34d5&&_0x10a396['set']('GAUSS',''),_0x33c757=$t['createShad'+'er'](this['device'],{'uniqueName':'blurVsm'+_0x4af01e+_0x4426b1,'attributes':{'vertex_position':Me},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'blurVSMPS','fragmentDefines':_0x10a396}),_0x1c1040[_0x4af01e][_0x4426b1]=_0x33c757;}return _0x33c757;}['applyVsmBl'+'ur'](_0x2d3426,_0x227438){const _0x5daee9=this['device'];Q['pushGpuMar'+'ker'](_0x5daee9,'VSM\x20'+_0x2d3426['_node']['name']),_0x5daee9['setBlendSt'+'ate'](pt['NOBLEND']);const _0x246faf=_0x2d3426['getRenderD'+'ata'](_0x2d3426['_type']===ve?_0x227438:null,-0x26*0x2b+0x1dc4+-0x1762)['shadowCame'+'ra']['renderTarg'+'et'],_0x414c6a=this['renderer']['shadowMapC'+'ache']['get'](_0x5daee9,_0x2d3426),_0x4256d4=_0x414c6a['renderTarg'+'ets'][0x25b0+0xb15*-0x2+-0xf86],_0x42d9cc=_0x2d3426['vsmBlurMod'+'e'],_0x39faea=_0x2d3426['_vsmBlurSi'+'ze'],_0x4351a7=this['getVsmBlur'+'Shader'](_0x42d9cc,_0x39faea);lo['z']=_0x2d3426['_shadowRes'+'olution']-(-0x2b*-0xd5+-0xcba+0x11*-0x15b),lo['w']=lo['z'],this['sourceId']['setValue'](_0x246faf['colorBuffe'+'r']),Fr[0x2a1*-0x1+-0x1cf+-0x2*-0x238]=(0x1*0x237e+-0x12cb+0x859*-0x2)/_0x2d3426['_shadowRes'+'olution'],Fr[0x1*0x264b+0x1*-0xe68+-0x17e2]=-0x20*0xfb+0x9*0x381+-0x29,this['pixelOffse'+'tId']['setValue'](Fr),_0x42d9cc===em&&this['weightId']['setValue'](this['blurVsmWei'+'ghts'][_0x39faea]),Ar(_0x5daee9,_0x4256d4,_0x4351a7,null,lo),this['sourceId']['setValue'](_0x4256d4['colorBuffe'+'r']),Fr[-0x559+-0xc37+0x1*0x1191]=Fr[-0x3a5*0x2+0x3*0x239+0x9f*0x1],Fr[0x1*-0x6e1+0x1*-0xb15+0x11f6*0x1]=0x1*0x647+0x516+-0xb5d,this['pixelOffse'+'tId']['setValue'](Fr),Ar(_0x5daee9,_0x246faf,_0x4351a7,null,lo),this['renderer']['shadowMapC'+'ache']['add'](_0x2d3426,_0x414c6a),Q['popGpuMark'+'er'](_0x5daee9);}['initViewBi'+'ndGroupFor'+'mat'](){this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']&&(this['viewUnifor'+'mFormat']=new zy(this['device'],[new dt('matrix_vie'+'wProjectio'+'n',li)]),this['viewBindGr'+'oupFormat']=new Ny(this['device'],[new kp(Np,Fp|by)]));}['frameUpdat'+'e'](){this['initViewBi'+'ndGroupFor'+'mat']();}}const cc=[];class zb{constructor(_0x12d24a){h(this,'_empty',null),h(this,'_allocated',[]),h(this,'_clusters',new Map()),this['device']=_0x12d24a;}['destroy'](){this['_empty']&&(this['_empty']['destroy'](),this['_empty']=null),this['_allocated']['forEach'](_0x14ce08=>{_0x14ce08['destroy']();}),this['_allocated']['length']=0xca2+-0x11e*0x1+0x43*-0x2c;}get['count'](){return this['_allocated']['length'];}get['empty'](){if(!this['_empty']){const _0x24f819=new cu(this['device']);_0x24f819['name']='ClusterEmp'+'ty',_0x24f819['update']([]),this['_empty']=_0x24f819;}return this['_empty'];}['assign'](_0x4563f6){const _0x10ef33=this['empty'];cc['push'](...this['_allocated']),this['_allocated']['length']=-0xecc+0x50d+0x9bf*0x1,this['_clusters']['clear']();const _0x2a21ee=_0x4563f6['length'];for(let _0x134fd4=0xac5+-0xa1*0xb+0x2*-0x1ed;_0x134fd4<_0x2a21ee;_0x134fd4++){const _0x2a93e1=_0x4563f6[_0x134fd4]['renderActi'+'ons'];if(_0x2a93e1){const _0x4ca864=_0x2a93e1['length'];for(let _0x57aa35=0x1b92+0xdf0+-0x2982;_0x57aa35<_0x4ca864;_0x57aa35++){const _0x3dd0d1=_0x2a93e1[_0x57aa35];_0x3dd0d1['lightClust'+'ers']=null;const _0x16206a=_0x3dd0d1['layer'];if(_0x16206a['hasCluster'+'edLights']&&_0x16206a['meshInstan'+'ces']['length']){const _0x409636=_0x16206a['getLightId'+'Hash'](),_0x350ecb=this['_clusters']['get'](_0x409636);let _0x61bf2d=_0x350ecb==null?void(-0x3a*-0x29+0xb*0xe8+-0x1342):_0x350ecb['lightClust'+'ers'];_0x61bf2d||(_0x61bf2d=cc['pop']()??new cu(this['device']),Ea['setName'](_0x61bf2d,'Cluster-'+this['_allocated']['length']),this['_allocated']['push'](_0x61bf2d),this['_clusters']['set'](_0x409636,_0x3dd0d1)),_0x3dd0d1['lightClust'+'ers']=_0x61bf2d;}_0x3dd0d1['lightClust'+'ers']||(_0x3dd0d1['lightClust'+'ers']=_0x10ef33);}}}cc['forEach'](_0x5281c7=>_0x5281c7['destroy']()),cc['length']=-0xac3+0x5d*-0x19+0x13d8;}['update'](_0x248e4e,_0x4ae2ea){this['assign'](_0x248e4e),this['_clusters']['forEach'](_0x4a729b=>{const _0x1cd7b9=_0x4a729b['layer'];_0x4a729b['lightClust'+'ers']['update'](_0x1cd7b9['clusteredL'+'ightsSet'],_0x4ae2ea);});}}const rr=new re(),af=[];class pm extends ys{constructor(_0x6cdf7b,_0x5ea911){super(_0x6cdf7b),h(this,'_quadRende'+'rer2D',null),h(this,'_quadRende'+'rerCube',null),h(this,'_filteredL'+'ights',[]),h(this,'_forceCopy',!(-0x95*-0x1c+-0x1*-0x2447+-0x3492)),h(this,'_evtDevice'+'Restored',null),(this['_cubeSlots'+'Offsets']=_0x5ea911,this['requiresCu'+'bemaps']=!(-0x167d+-0x121f*-0x1+-0x1*-0x45f),this['blitTextur'+'eId']=_0x6cdf7b['scope']['resolve']('blitTextur'+'e'),this['invViewPro'+'jId']=_0x6cdf7b['scope']['resolve']('invViewPro'+'j'),this['_evtDevice'+'Restored']=_0x6cdf7b['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this));}['destroy'](){var _0xa3d04e,_0x3f61ea,_0x25d14b;(_0xa3d04e=this['_quadRende'+'rer2D'])==null||_0xa3d04e['destroy'](),this['_quadRende'+'rer2D']=null,(_0x3f61ea=this['_quadRende'+'rerCube'])==null||_0x3f61ea['destroy'](),this['_quadRende'+'rerCube']=null,(_0x25d14b=this['_evtDevice'+'Restored'])==null||_0x25d14b['off'](),this['_evtDevice'+'Restored']=null;}static['create'](_0x20175f,_0x4e50f4){w['assert'](_0x20175f);const _0x165592=new pm(_0x20175f['device'],_0x4e50f4);return _0x165592['init'](_0x20175f),_0x165592['colorOps']['clear']=!(-0x75*-0x3f+0x24b*-0x2+-0x4*0x60d),_0x165592['depthStenc'+'ilOps']['clearDepth']=!(0xcaa+0x23ec+-0x3095*0x1),_0x165592;}['onDeviceRe'+'stored'](){this['_forceCopy']=!(-0x1cc1+-0x1*-0x2590+0x29*-0x37);}['update'](_0x34f61c){const _0xf216bf=this['_filteredL'+'ights'];this['filter'](_0x34f61c,_0xf216bf),this['executeEna'+'bled']=_0xf216bf['length']>-0xd80+-0x13d*-0x19+-0x1175;}['filter'](_0x123b24,_0x399e18){for(let _0x3a9da3=0x18c*0x6+-0x26e9+-0x1*-0x1da1;_0x3a9da3<_0x123b24['length'];_0x3a9da3++){const _0x1bc95a=_0x123b24[_0x3a9da3];_0x1bc95a['_type']!==ve&&_0x1bc95a['atlasViewp'+'ortAllocat'+'ed']&&(!_0x1bc95a['atlasSlotU'+'pdated']&&!this['_forceCopy']||_0x1bc95a['enabled']&&_0x1bc95a['cookie']&&_0x1bc95a['visibleThi'+'sFrame']&&_0x399e18['push'](_0x1bc95a));}this['_forceCopy']=!(0x1de+0x1*-0x1db3+0x1bd6);}['initInvVie'+'wProjMatri'+'ces'](){if(!af['length'])for(let _0x35e464=0x1af8+0x1d*-0xdb+-0x229;_0x35e464<0x3a*0x8+-0x1*-0x1a89+-0x1c53;_0x35e464++){const _0x2e4e6c=Wn['create'](null,Ke,_0x35e464),_0x3132fd=_0x2e4e6c['projection'+'Matrix'],_0x174c0b=_0x2e4e6c['node']['getLocalTr'+'ansform']()['clone']()['invert']();af[_0x35e464]=new te()['mul2'](_0x3132fd,_0x174c0b)['invert']();}}get['quadRender'+'er2D'](){if(!this['_quadRende'+'rer2D']){const _0x120c33=$t['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'erer2d','attributes':{'vertex_position':Me},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'2DPS'});this['_quadRende'+'rer2D']=new Ah(_0x120c33);}return this['_quadRende'+'rer2D'];}get['quadRender'+'erCube'](){if(!this['_quadRende'+'rerCube']){const _0x2af9e6=$t['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'ererCube','attributes':{'vertex_position':Me},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'CubePS'});this['_quadRende'+'rerCube']=new Ah(_0x2af9e6);}return this['_quadRende'+'rerCube'];}['execute'](){const _0x3a7f66=this['device'];_0x3a7f66['setBlendSt'+'ate'](pt['NOBLEND']),_0x3a7f66['setCullMod'+'e'](bt),_0x3a7f66['setDepthSt'+'ate'](Yt['NODEPTH']),_0x3a7f66['setStencil'+'State']();const _0x5c9f71=this['renderTarg'+'et']['colorBuffe'+'r']['width'],_0x207a89=this['_cubeSlots'+'Offsets'],_0x34b6e9=this['_filteredL'+'ights'];for(let _0x442b22=0x1ef2+-0x7e8+0xb85*-0x2;_0x442b22<_0x34b6e9['length'];_0x442b22++){const _0xf3bff3=_0x34b6e9[_0x442b22];Q['pushGpuMar'+'ker'](this['device'],'COOKIE\x20'+_0xf3bff3['_node']['name']);const _0xfb1c=_0xf3bff3['numShadowF'+'aces'],_0xbb3087=_0xfb1c>-0x2386+-0x8*-0x363+-0x1*-0x86f?this['quadRender'+'erCube']:this['quadRender'+'er2D'];_0xfb1c>0x33*-0xc1+0x220b+0x469&&this['initInvVie'+'wProjMatri'+'ces'](),this['blitTextur'+'eId']['setValue'](_0xf3bff3['cookie']);for(let _0x327f2d=0x5d2*0x1+0x2365+-0x2937;_0x327f2d<_0xfb1c;_0x327f2d++){if(rr['copy'](_0xf3bff3['atlasViewp'+'ort']),_0xfb1c>-0x9a*0xa+-0x1f2*-0x4+-0x1c3){const _0x1ceacb=rr['z']/(0x3b*-0x69+0xbc*0x5+0x148a),_0x1f63ab=_0x207a89[_0x327f2d];rr['x']+=_0x1ceacb*_0x1f63ab['x'],rr['y']+=_0x1ceacb*_0x1f63ab['y'],rr['z']=_0x1ceacb,rr['w']=_0x1ceacb,this['invViewPro'+'jId']['setValue'](af[_0x327f2d]['data']);}rr['mulScalar'](_0x5c9f71),_0xbb3087['render'](rr);}Q['popGpuMark'+'er'](_0x3a7f66);}_0x34b6e9['length']=0xd*0xd+0x82c*-0x1+-0x281*-0x3;}}class Vb extends ys{constructor(_0x2bd44f,_0x2707f5,_0x29a89d){super(_0x2bd44f),this['requiresCu'+'bemaps']=!(0x79a*0x5+-0xb83+-0x1a7e*0x1),this['shadowRend'+'erer']=_0x2707f5,this['shadowRend'+'ererLocal']=_0x29a89d;}['update'](_0x324253){const _0x5328e0=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x3d8f81=this['shadowRend'+'ererLocal']['prepareLig'+'hts'](_0x5328e0,_0x324253),_0x4f4114=_0x5328e0['length'];this['enabled']=_0x4f4114>-0x24a6+-0x13cc*0x1+0x121*0x32,_0x4f4114&&this['shadowRend'+'erer']['setupRende'+'rPass'](this,_0x3d8f81,!(-0x122f+-0xb*0x17d+0x228f));}['execute'](){const _0x551045=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x424c2b=_0x551045['length'];for(let _0xa53009=-0x1f23+0xb77+0x13ac;_0xa53009<_0x424c2b;_0xa53009++){const _0x2f574f=_0x551045[_0xa53009];for(let _0x3f663b=-0x61d*-0x5+0x471*-0x1+-0x1a20;_0x3f663b<_0x2f574f['numShadowF'+'aces'];_0x3f663b++)this['shadowRend'+'erer']['renderFace'](_0x2f574f,null,_0x3f663b,!(0xa11*0x3+0x1*-0x245f+0x62c));}_0x551045['length']=0x8b4+0x1237*0x1+-0x1aeb;}}class Gb extends ys{constructor(_0x4e9af5,_0x271142,_0x19052c,_0x13a2c7,_0x5bc88e){super(_0x4e9af5),this['renderer']=_0x271142,this['frameGraph']=null,this['cookiesRen'+'derPass']=pm['create'](_0x5bc88e['cookieRend'+'erTarget'],_0x5bc88e['cubeSlotsO'+'ffsets']),this['beforePass'+'es']['push'](this['cookiesRen'+'derPass']),this['shadowRend'+'erPass']=new Vb(_0x4e9af5,_0x19052c,_0x13a2c7),this['beforePass'+'es']['push'](this['shadowRend'+'erPass']);}['update'](_0x867e1b,_0x5a018e,_0x1bcb71,_0x5d6bd3,_0x479fc7){this['frameGraph']=_0x867e1b,this['cookiesRen'+'derPass']['enabled']=_0x1bcb71,_0x1bcb71&&this['cookiesRen'+'derPass']['update'](_0x5d6bd3),this['shadowRend'+'erPass']['enabled']=_0x5a018e,_0x5a018e&&this['shadowRend'+'erPass']['update'](_0x479fc7);}['destroy'](){this['cookiesRen'+'derPass']['destroy'](),this['cookiesRen'+'derPass']=null;}['execute'](){const _0x502ae9=de(),{renderer:_0x2b0ccc}=this,{scene:_0x1b7403}=_0x2b0ccc;_0x2b0ccc['worldClust'+'ersAllocat'+'or']['update'](this['frameGraph']['renderPass'+'es'],_0x1b7403['lighting']),_0x2b0ccc['_lightClus'+'tersTime']+=de()-_0x502ae9,_0x2b0ccc['_lightClus'+'ters']=_0x2b0ccc['worldClust'+'ersAllocat'+'or']['count'];}}let nf=0x2*-0x1005+0x236b+-0x361;const ar=new te(),nr=new te(),Oa=new te(),q_=new _i(),of=new sp(),j_=new te()['setScale'](0x6*0x434+0x1ab*-0x1+-0x2*0xbc6,-(-0x1e47+0xfb*0x1b+0x3cf),0x2035+0x671*-0x6+0x672),lf=new Set(),cf=new Set(),hf=new ky(),Y_=new te()['set']([-0x21f*-0xf+0x1df3+-0x3dc3,-0x99d+-0x1f04+0x28a1,0x66*-0x3e+-0x79*-0x39+-0x23d,0x1c50+-0x5c4+-0x168c,-0x1161+0x17d8+-0x677*0x1,0x2679+-0x2191+-0x5*0xfb,0x1c3+0x2*-0xbe2+0x83*0x2b,-0x182f+0x176+0x16b9*0x1,-0x1b02+0x4*0x2b+0xd2b*0x2,-0xa7*-0x7+-0x329+-0xf*0x18,-0x24b*-0x5+-0x7d3*-0x2+-0x1b1d+0.5,-0x1143+-0xa85*0x3+0x30d2,-0x14fa+-0x1*0x2+0x53f*0x4,0x411*0x3+0x115e+0x57*-0x57,-0x3e7*0x8+0x1189+0xdaf+0.5,-0xcb*0x1a+0x11*-0x2+0x14c1]),K_=[new J(-0xf3f+0x207*0xc+-0x915+0.5,-0x4*0x65+0x21de+-0x1025*0x2+0.333333),new J(0x1*0x266f+-0x3*0xb0b+0xc2*-0x7+0.25,0x19b*0x8+-0xd21+0x1*0x49+0.666667),new J(-0x2*0xb6c+0x2*0xdf+0x151a+0.75,0x23be+0x3a4+-0x2762+0.111111),new J(0xb*0x29f+-0xdf*-0x19+-0x329c+0.125,0x1ea6+0x15f2+-0x3498+0.444444),new J(-0x364+0x1ca5*0x1+-0x1941+0.625,-0x1ec4+-0x233e+0x4202+0.777778),new J(-0x1ccd*0x1+-0xf1c+0x2be9+0.375,-0xb5a*0x1+0x4c8*0x1+0x692+0.222222),new J(0x20f+-0xd09+0xafa+0.875,-0x1*0x10b2+0x76*-0x21+0x1fe8+0.555556),new J(0x3*-0x1f4+-0x1f45+0x2521+0.0625,0x56*0x2f+0x25ec+-0xb*0x4e2+0.888889),new J(-0x851*0x2+0x240b+0x1369*-0x1+0.5625,-0xcba*0x3+-0x1d72+0x10e8*0x4+0.037037),new J(-0x21f1*-0x1+-0x6*-0x1aa+0x5*-0x8c9+0.3125,-0x457*0x3+-0xabd*-0x2+0x5*-0x1b1+0.37037),new J(-0x3*-0xcff+-0x2231+-0x4cc+0.8125,-0x10d+-0x230a*0x1+-0x2417*-0x1+0.703704),new J(0xbae*-0x1+-0x1*-0x7+0xba7+0.1875,0x12b9*0x1+0x19b9+-0x2c72+0.148148),new J(0x16fb+0x125d*0x1+-0x498*0x9+0.6875,0x1dfd*-0x1+-0x1*-0xc03+0x162*0xd+0.481481),new J(-0xd29+-0xaf7+0x1820+0.4375,-0x59*0xb+-0xb7*-0x33+0x1*-0x20a2+0.814815),new J(0x10*-0x65+-0x1089+-0x1*-0x16d9+0.9375,0x2b*-0x65+0x7*0x527+-0x131a+0.259259),new J(-0x860+-0xbf6*0x1+0x1456+0.03125,0x256a+-0x6*0x191+0x2*-0xe02+0.592593)],Hb=new te(),Wb=new te(),$b=new te(),Xb=new te(),qb=new te(),jb=new te(),Fa=new Set(),df=[],ff=[];class Yb{constructor(_0x2526f2){h(this,'clustersDe'+'bugRendere'+'d',!(0x1be0+0x185a*0x1+-0x1cd*0x1d)),h(this,'processing'+'MeshInstan'+'ces',new Set()),h(this,'worldClust'+'ersAllocat'+'or'),h(this,'lights',[]),h(this,'localLight'+'s',[]),h(this,'cameraDirS'+'hadowLight'+'s',new Map()),h(this,'dirLightSh'+'adows',new Map()),h(this,'blueNoise',new wb(-0x89*0x13+0x1*0xbeb+-0x145)),(this['device']=_0x2526f2,this['scene']=null,this['worldClust'+'ersAllocat'+'or']=new zb(_0x2526f2),this['lightTextu'+'reAtlas']=new Ib(_0x2526f2),this['shadowMapC'+'ache']=new Lb(),this['shadowRend'+'erer']=new Cv(this,this['lightTextu'+'reAtlas']),this['_shadowRen'+'dererLocal']=new Ob(this,this['shadowRend'+'erer']),this['_shadowRen'+'dererDirec'+'tional']=new kb(this,this['shadowRend'+'erer']),this['_renderPas'+'sUpdateClu'+'stered']=new Gb(this['device'],this,this['shadowRend'+'erer'],this['_shadowRen'+'dererLocal'],this['lightTextu'+'reAtlas']),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['_skinTime']=0x1b5d+0x1*-0x22ba+-0x41*-0x1d,this['_morphTime']=0x2066*0x1+-0x652*-0x1+0x15*-0x1d8,this['_cullTime']=-0x178f+0x2*0xa7e+0x293,this['_shadowMap'+'Time']=0xa44+0x2c5*0x1+-0xd09,this['_lightClus'+'tersTime']=0x77e+0x2371+-0x2aef,this['_layerComp'+'ositionUpd'+'ateTime']=0xdce+-0x9e2+-0x1*0x3ec,this['_shadowDra'+'wCalls']=0x1e14+0x119d+-0x2fb1,this['_skinDrawC'+'alls']=-0x60f+0xf15+-0x906,this['_instanced'+'DrawCalls']=0x1*-0x143b+0x24db+-0xe*0x130,this['_shadowMap'+'Updates']=0x1ee7+0x5f*-0x8+-0x1bef,this['_numDrawCa'+'llsCulled']=0x5e*-0x31+0x23*0xa2+-0x428,this['_camerasRe'+'ndered']=0x5*-0x2bf+-0x24b6*-0x1+-0x16fb,this['_lightClus'+'ters']=-0x1a*-0x151+-0x22*0x9d+-0x4*0x358);const _0x152794=_0x2526f2['scope'];this['boneTextur'+'eId']=_0x152794['resolve']('texture_po'+'seMap'),this['modelMatri'+'xId']=_0x152794['resolve']('matrix_mod'+'el'),this['normalMatr'+'ixId']=_0x152794['resolve']('matrix_nor'+'mal'),this['viewInvId']=_0x152794['resolve']('matrix_vie'+'wInverse'),this['viewPos']=new Float32Array(0x5*-0x53f+0x1885+0x1b9),this['viewPosId']=_0x152794['resolve']('view_posit'+'ion'),this['projId']=_0x152794['resolve']('matrix_pro'+'jection'),this['projSkybox'+'Id']=_0x152794['resolve']('matrix_pro'+'jectionSky'+'box'),this['viewId']=_0x152794['resolve']('matrix_vie'+'w'),this['viewId3']=_0x152794['resolve']('matrix_vie'+'w3'),this['viewProjId']=_0x152794['resolve']('matrix_vie'+'wProjectio'+'n'),this['flipYId']=_0x152794['resolve']('projection'+'FlipY'),this['tbnBasis']=_0x152794['resolve']('tbnBasis'),this['nearClipId']=_0x152794['resolve']('camera_nea'+'r'),this['farClipId']=_0x152794['resolve']('camera_far'),this['cameraPara'+'ms']=new Float32Array(-0x4*0x647+0xbcd+0xd53),this['cameraPara'+'msId']=_0x152794['resolve']('camera_par'+'ams'),this['viewIndexI'+'d']=_0x152794['resolve']('view_index'),this['viewIndexI'+'d']['setValue'](0x9ad*0x2+0x1028+-0x2382),this['blueNoiseJ'+'itterVersi'+'on']=0x183e+-0xdee*-0x1+-0x262c,this['blueNoiseJ'+'itterVec']=new re(),this['blueNoiseJ'+'itterData']=new Float32Array(0x244+-0x3*-0x902+-0x1d46),this['blueNoiseJ'+'itterId']=_0x152794['resolve']('blueNoiseJ'+'itter'),this['blueNoiseT'+'extureId']=_0x152794['resolve']('blueNoiseT'+'ex32'),this['alphaTestI'+'d']=_0x152794['resolve']('alpha_ref'),this['opacityMap'+'Id']=_0x152794['resolve']('texture_op'+'acityMap'),this['exposureId']=_0x152794['resolve']('exposure'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']=_0x152794['resolve']('twoSidedLi'+'ghtingNegS'+'caleFactor'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](-0x1602+-0x2529+0x3b2b*0x1),this['morphPosit'+'ionTex']=_0x152794['resolve']('morphPosit'+'ionTex'),this['morphNorma'+'lTex']=_0x152794['resolve']('morphNorma'+'lTex'),this['morphTexPa'+'rams']=_0x152794['resolve']('morph_tex_'+'params'),this['lightCube']=new bb(),this['constantLi'+'ghtCube']=_0x152794['resolve']('lightCube['+'0]');}['destroy'](){this['shadowRend'+'erer']=null,this['_shadowRen'+'dererLocal']=null,this['_shadowRen'+'dererDirec'+'tional']=null,this['shadowMapC'+'ache']['destroy'](),this['shadowMapC'+'ache']=null,this['_renderPas'+'sUpdateClu'+'stered']['destroy'](),this['_renderPas'+'sUpdateClu'+'stered']=null,this['lightTextu'+'reAtlas']['destroy'](),this['lightTextu'+'reAtlas']=null;}['setupViewp'+'ort'](_0x1fdb9f,_0x33e8ff){const _0xc3c501=this['device'],_0x3aaab7=_0x33e8ff?_0x33e8ff['width']:_0xc3c501['width'],_0x55c88d=_0x33e8ff?_0x33e8ff['height']:_0xc3c501['height'],_0x3feff1=_0x1fdb9f['rect'];let _0x5a851d=Math['floor'](_0x3feff1['x']*_0x3aaab7),_0x34a6f7=Math['floor'](_0x3feff1['y']*_0x55c88d),_0x373ab3=Math['floor'](_0x3feff1['z']*_0x3aaab7),_0x4857e9=Math['floor'](_0x3feff1['w']*_0x55c88d);if(_0xc3c501['setViewpor'+'t'](_0x5a851d,_0x34a6f7,_0x373ab3,_0x4857e9),_0x1fdb9f['_scissorRe'+'ctClear']){const _0x24a112=_0x1fdb9f['scissorRec'+'t'];_0x5a851d=Math['floor'](_0x24a112['x']*_0x3aaab7),_0x34a6f7=Math['floor'](_0x24a112['y']*_0x55c88d),_0x373ab3=Math['floor'](_0x24a112['z']*_0x3aaab7),_0x4857e9=Math['floor'](_0x24a112['w']*_0x55c88d);}_0xc3c501['setScissor'](_0x5a851d,_0x34a6f7,_0x373ab3,_0x4857e9);}['setCameraU'+'niforms'](_0x124c50,_0x102c6b){var _0x2f2a1d,_0x28c186;const _0x1eaf63=_0x102c6b==null?void(0x8b*-0x41+0x418+0x1f33*0x1):_0x102c6b['flipY'];let _0x49d644=null;if(_0x124c50['xr']&&_0x124c50['xr']['session']){const _0x1ce32b=((_0x28c186=(_0x2f2a1d=_0x124c50['_node'])==null?void(-0x15f6+0x1*0xbcb+-0x13*-0x89):_0x2f2a1d['parent'])==null?void(0x1bb6+0xe*0xe+-0x1c7a):_0x28c186['getWorldTr'+'ansform']())||null;_0x49d644=_0x124c50['xr']['views']['list'];for(let _0x4f5da5=0x1e*0xa9+-0x2*0x123c+0x10aa;_0x4f5da5<_0x49d644['length'];_0x4f5da5++){const _0x4e37b7=_0x49d644[_0x4f5da5];_0x4e37b7['updateTran'+'sforms'](_0x1ce32b),_0x124c50['frustum']['setFromMat'+'4'](_0x4e37b7['projViewOf'+'fMat']);}}else{let _0x32b686=_0x124c50['projection'+'Matrix'];_0x124c50['calculateP'+'rojection']&&_0x124c50['calculateP'+'rojection'](_0x32b686,ec);let _0x9a6baa=_0x124c50['getProject'+'ionMatrixS'+'kybox']();_0x1eaf63&&(_0x32b686=Hb['mul2'](j_,_0x32b686),_0x9a6baa=Wb['mul2'](j_,_0x9a6baa)),this['device']['isWebGPU']&&(_0x32b686=$b['mul2'](Y_,_0x32b686),_0x9a6baa=Xb['mul2'](Y_,_0x9a6baa));const {jitter:_0x350364}=_0x124c50;let _0x4702d0=0x4ae*0x8+-0xffe+-0x5*0x44a,_0x39975a=0x1070+0x427+-0xfb*0x15;if(_0x350364>-0x54*-0x37+-0xf9*0xd+0x1*-0x567){const _0x591205=_0x102c6b?_0x102c6b['width']:this['device']['width'],_0x368823=_0x102c6b?_0x102c6b['height']:this['device']['height'],_0x32b6f8=K_[this['device']['renderVers'+'ion']%K_['length']];_0x4702d0=_0x350364*(_0x32b6f8['x']*(0x1*0x1bfa+-0x4ab+-0x1*0x174d)-(-0x2089*0x1+-0x343+0x5*0x729))/_0x591205,_0x39975a=_0x350364*(_0x32b6f8['y']*(-0x9*-0x1a+0x1259+-0x1341)-(0x3c*-0x81+0x1d7f+0x1*0xbe))/_0x368823,_0x32b686=qb['copy'](_0x32b686),_0x32b686['data'][0x6*0x502+-0x1b3c+-0x2c8]=_0x4702d0,_0x32b686['data'][0x1449+0xf4*0x20+-0x32c0]=_0x39975a,_0x9a6baa=jb['copy'](_0x9a6baa),_0x9a6baa['data'][-0xb41+-0xb*0x245+0x2440]=_0x4702d0,_0x9a6baa['data'][-0x1*-0x5ed+-0x1*0xc15+0x631]=_0x39975a,this['blueNoiseJ'+'itterVersi'+'on']!==this['device']['renderVers'+'ion']&&(this['blueNoiseJ'+'itterVersi'+'on']=this['device']['renderVers'+'ion'],this['blueNoise']['vec4'](this['blueNoiseJ'+'itterVec']));}const _0x3d494f=_0x350364>-0x6*0x445+0x4*0x28c+0x2*0x7b7?this['blueNoiseJ'+'itterVec']:re['ZERO'];if(this['blueNoiseJ'+'itterData'][0xb*-0x266+0xab*0x1a+0x904]=_0x3d494f['x'],this['blueNoiseJ'+'itterData'][0x109*0x17+0x2b*-0x35+0x6d*-0x23]=_0x3d494f['y'],this['blueNoiseJ'+'itterData'][0x1307*-0x1+0x1839+0x8*-0xa6]=_0x3d494f['z'],this['blueNoiseJ'+'itterData'][-0x184a+0x2c*0x7b+-0x1*-0x329]=_0x3d494f['w'],this['blueNoiseJ'+'itterId']['setValue'](this['blueNoiseJ'+'itterData']),this['projId']['setValue'](_0x32b686['data']),this['projSkybox'+'Id']['setValue'](_0x9a6baa['data']),_0x124c50['calculateT'+'ransform'])_0x124c50['calculateT'+'ransform'](nr,ec);else{const _0xbd9d2b=_0x124c50['_node']['getPositio'+'n'](),_0x5dbd72=_0x124c50['_node']['getRotatio'+'n']();nr['setTRS'](_0xbd9d2b,_0x5dbd72,D['ONE']);}this['viewInvId']['setValue'](nr['data']),Oa['copy'](nr)['invert'](),this['viewId']['setValue'](Oa['data']),q_['setFromMat'+'4'](Oa),this['viewId3']['setValue'](q_['data']),ar['mul2'](_0x32b686,Oa),this['viewProjId']['setValue'](ar['data']),_0x124c50['_storeShad'+'erMatrices'](ar,_0x4702d0,_0x39975a,this['device']['renderVers'+'ion']),this['flipYId']['setValue'](_0x1eaf63?-(0x779*0x2+0x668*0x2+0x31*-0x91):0xa08+0x6*0x44f+0x343*-0xb),this['dispatchVi'+'ewPos'](_0x124c50['_node']['getPositio'+'n']()),_0x124c50['frustum']['setFromMat'+'4'](ar);}this['tbnBasis']['setValue'](_0x1eaf63?-(-0xec0+0x1b31+0x10*-0xc7):0x18de+-0x2*-0xafd+-0x15*0x23b);const _0xb34ee2=_0x124c50['_nearClip'],_0x3d5583=_0x124c50['_farClip'];return this['nearClipId']['setValue'](_0xb34ee2),this['farClipId']['setValue'](_0x3d5583),this['cameraPara'+'ms'][0x3d7*-0x5+0xa*0x3a1+-0x1117]=(0xab3+0x2f*0x52+0xce*-0x20)/_0x3d5583,this['cameraPara'+'ms'][-0x2304+-0x16cc+0x39d1]=_0x3d5583,this['cameraPara'+'ms'][-0x17eb+-0xaa3+0x1*0x2290]=_0xb34ee2,this['cameraPara'+'ms'][-0x1*-0x1bd7+0xf*-0x16d+-0x671]=_0x124c50['projection']===En?-0x4b+-0x1c56+-0xa*-0x2dd:0x30a+-0x712+0x408,this['cameraPara'+'msId']['setValue'](this['cameraPara'+'ms']),this['exposureId']['setValue'](this['scene']['physicalUn'+'its']?_0x124c50['getExposur'+'e']():this['scene']['exposure']),_0x49d644;}['clear'](_0x37cad7,_0x58b1a5,_0x157fcd,_0x3937d3){const _0x3819ab=(_0x58b1a5??_0x37cad7['_clearColo'+'rBuffer']?jo:0x1704+0xe95+0x7*-0x55f)|(_0x157fcd??_0x37cad7['_clearDept'+'hBuffer']?Yo:-0x1376+0x49a+0xc*0x13d)|(_0x3937d3??_0x37cad7['_clearSten'+'cilBuffer']?ch:0x1*-0x17f3+0xfa9+0x84a);if(_0x3819ab){const _0x316a29=this['device'];Q['pushGpuMar'+'ker'](_0x316a29,'CLEAR'),_0x316a29['clear']({'color':[_0x37cad7['_clearColo'+'r']['r'],_0x37cad7['_clearColo'+'r']['g'],_0x37cad7['_clearColo'+'r']['b'],_0x37cad7['_clearColo'+'r']['a']],'depth':_0x37cad7['_clearDept'+'h'],'stencil':_0x37cad7['_clearSten'+'cil'],'flags':_0x3819ab}),Q['popGpuMark'+'er'](_0x316a29);}}['setCamera'](_0x4849ab,_0x2a231c,_0x2df7bb,_0x22d667=null){this['setCameraU'+'niforms'](_0x4849ab,_0x2a231c),this['clearView'](_0x4849ab,_0x2a231c,_0x2df7bb,!(0x9dd*-0x3+-0x53*0x1+-0x9*-0x353));}['clearView'](_0x921bcb,_0x7e6c8b,_0x458003,_0x226106){const _0x5e7926=this['device'];if(Q['pushGpuMar'+'ker'](_0x5e7926,'CLEAR-VIEW'),_0x5e7926['setRenderT'+'arget'](_0x7e6c8b),_0x5e7926['updateBegi'+'n'](),_0x226106&&(_0x5e7926['setColorWr'+'ite'](!(-0x3d7+0x1*0x23f6+-0x201f),!(0x3*0xba1+-0x2c7+-0x201c),!(-0x9*0xe+-0x2041+0x20bf),!(0x7*-0x1a3+0x8f8+0x27d)),_0x5e7926['setDepthWr'+'ite'](!(-0x1059+-0x4*0x854+0x1*0x31a9))),this['setupViewp'+'ort'](_0x921bcb,_0x7e6c8b),_0x458003){const _0x2b52cc=_0x921bcb['_clearOpti'+'ons'];_0x5e7926['clear'](_0x2b52cc||{'color':[_0x921bcb['_clearColo'+'r']['r'],_0x921bcb['_clearColo'+'r']['g'],_0x921bcb['_clearColo'+'r']['b'],_0x921bcb['_clearColo'+'r']['a']],'depth':_0x921bcb['_clearDept'+'h'],'flags':(_0x921bcb['_clearColo'+'rBuffer']?jo:-0x867+-0x13a5+-0x59c*-0x5)|(_0x921bcb['_clearDept'+'hBuffer']?Yo:-0x2169+-0x36+0x219f)|(_0x921bcb['_clearSten'+'cilBuffer']?ch:-0x27f+-0x3*-0x9f1+-0x1b54),'stencil':_0x921bcb['_clearSten'+'cil']});}Q['popGpuMark'+'er'](_0x5e7926);}['setupCullM'+'ode'](_0x5aa0f5,_0x3bb3a9,_0x30fdf7){const _0x32510a=_0x30fdf7['material'];let _0x12d8c8=bt;if(_0x5aa0f5){let _0x55da2d=-0x1*0x22e6+0xc9f+0x1648;(_0x32510a['cull']===Fo||_0x32510a['cull']===pa)&&(_0x55da2d=_0x3bb3a9*_0x30fdf7['flipFacesF'+'actor']*_0x30fdf7['node']['worldScale'+'Sign']),_0x55da2d<-0x467*-0x1+0x1008+-0x146f*0x1?_0x12d8c8=_0x32510a['cull']===Fo?pa:Fo:_0x12d8c8=_0x32510a['cull'];}this['device']['setCullMod'+'e'](_0x12d8c8),_0x12d8c8===bt&&_0x32510a['cull']===bt&&this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](_0x30fdf7['node']['worldScale'+'Sign']);}['updateCame'+'raFrustum'](_0x252c8){if(_0x252c8['xr']&&_0x252c8['xr']['views']['list']['length']){const _0x3d6af8=_0x252c8['xr']['views']['list'][-0x94b+0x17a2+-0x1*0xe57];ar['mul2'](_0x3d6af8['projMat'],_0x3d6af8['viewOffMat']),_0x252c8['frustum']['setFromMat'+'4'](ar);return;}const _0x49eac5=_0x252c8['projection'+'Matrix'];if(_0x252c8['calculateP'+'rojection']&&_0x252c8['calculateP'+'rojection'](_0x49eac5,ec),_0x252c8['calculateT'+'ransform'])_0x252c8['calculateT'+'ransform'](nr,ec);else{const _0x17f5b2=_0x252c8['_node']['getPositio'+'n'](),_0x48d012=_0x252c8['_node']['getRotatio'+'n']();nr['setTRS'](_0x17f5b2,_0x48d012,D['ONE']),this['viewInvId']['setValue'](nr['data']);}Oa['copy'](nr)['invert'](),ar['mul2'](_0x49eac5,Oa),_0x252c8['frustum']['setFromMat'+'4'](ar);}['setBaseCon'+'stants'](_0xfe49db,_0x5d712a){_0xfe49db['setCullMod'+'e'](_0x5d712a['cull']),_0x5d712a['opacityMap']&&this['opacityMap'+'Id']['setValue'](_0x5d712a['opacityMap']),(_0x5d712a['opacityMap']||_0x5d712a['alphaTest']>-0x2091*-0x1+0x1175+0x13*-0x2a2)&&this['alphaTestI'+'d']['setValue'](_0x5d712a['alphaTest']);}['updateCpuS'+'kinMatrice'+'s'](_0x54ae99){nf++;const _0x36aa65=_0x54ae99['length'];if(_0x36aa65===0x1f65+0x1409+0x1c6*-0x1d)return;const _0x4a98ba=de();for(let _0x433af3=-0x17da+0x662*0x2+0xb16;_0x433af3<_0x36aa65;_0x433af3++){const _0x52953e=_0x54ae99[_0x433af3]['skinInstan'+'ce'];_0x52953e&&(_0x52953e['updateMatr'+'ices'](_0x54ae99[_0x433af3]['node'],nf),_0x52953e['_dirty']=!(-0x24*-0x7f+-0x1698*0x1+0x4bc));}this['_skinTime']+=de()-_0x4a98ba;}['updateGpuS'+'kinMatrice'+'s'](_0x539857){const _0x566f1c=de();for(const _0x5bb274 of _0x539857){const _0x3ebc58=_0x5bb274['skinInstan'+'ce'];_0x3ebc58&&_0x3ebc58['_dirty']&&(_0x3ebc58['updateMatr'+'ixPalette'](_0x5bb274['node'],nf),_0x3ebc58['_dirty']=!(0x118f+-0x21db+-0xd*-0x141));}this['_skinTime']+=de()-_0x566f1c;}['updateMorp'+'hing'](_0x1b2f9b){const _0x5eb2c5=de();for(const _0x110989 of _0x1b2f9b){const _0x5a115f=_0x110989['morphInsta'+'nce'];_0x5a115f&&_0x5a115f['_dirty']&&_0x5a115f['update']();}this['_morphTime']+=de()-_0x5eb2c5;}['updateGSpl'+'ats'](_0x3c1aeb){var _0x42b055;for(const _0x18d642 of _0x3c1aeb)(_0x42b055=_0x18d642['gsplatInst'+'ance'])==null||_0x42b055['update']();}['gpuUpdate'](_0x33efd6){this['updateGpuS'+'kinMatrice'+'s'](_0x33efd6),this['updateMorp'+'hing'](_0x33efd6),this['updateGSpl'+'ats'](_0x33efd6);}['setVertexB'+'uffers'](_0x9c9efe,_0x14418f){_0x9c9efe['setVertexB'+'uffer'](_0x14418f['vertexBuff'+'er']);}['setMorphin'+'g'](_0x2ceb9f,_0x4f2839){_0x4f2839&&(_0x4f2839['prepareRen'+'dering'](_0x2ceb9f),_0x2ceb9f['setVertexB'+'uffer'](_0x4f2839['morph']['vertexBuff'+'erIds']),this['morphPosit'+'ionTex']['setValue'](_0x4f2839['texturePos'+'itions']),this['morphNorma'+'lTex']['setValue'](_0x4f2839['textureNor'+'mals']),this['morphTexPa'+'rams']['setValue'](_0x4f2839['_texturePa'+'rams']));}['setSkinnin'+'g'](_0x275faa,_0x4fb53c){const _0x155798=_0x4fb53c['skinInstan'+'ce'];if(_0x155798){this['_skinDrawC'+'alls']++;const _0x1acfaa=_0x155798['boneTextur'+'e'];this['boneTextur'+'eId']['setValue'](_0x1acfaa);}}['dispatchVi'+'ewPos'](_0x5151fb){const _0x2dce9f=this['viewPos'];_0x2dce9f[-0x13ab+-0x247f+0x7*0x806]=_0x5151fb['x'],_0x2dce9f[-0x546+-0x1562+-0x27*-0xaf]=_0x5151fb['y'],_0x2dce9f[-0x12bf*-0x1+-0x8*0x1cf+-0x445*0x1]=_0x5151fb['z'],this['viewPosId']['setValue'](_0x2dce9f);}['initViewBi'+'ndGroupFor'+'mat'](_0x3124e3){if(this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']){const _0x6bf75e=[new dt('matrix_vie'+'w',li),new dt('matrix_vie'+'wInverse',li),new dt('matrix_pro'+'jection',li),new dt('matrix_pro'+'jectionSky'+'box',li),new dt('matrix_vie'+'wProjectio'+'n',li),new dt('matrix_vie'+'w3',On),new dt('cubeMapRot'+'ationMatri'+'x',On),new dt('view_posit'+'ion',ds),new dt('skyboxInte'+'nsity',Xs),new dt('exposure',Xs),new dt('textureBia'+'s',Xs),new dt('view_index',Xs)];_0x3124e3&&_0x6bf75e['push'](new dt('clusterCel'+'lsCountByB'+'oundsSize',ds),new dt('clusterTex'+'tureSize',ds),new dt('clusterBou'+'ndsMin',ds),new dt('clusterBou'+'ndsDelta',ds),new dt('clusterCel'+'lsDot',ds),new dt('clusterCel'+'lsMax',ds),new dt('shadowAtla'+'sParams',ga),new dt('clusterMax'+'Cells',_a),new dt('clusterSki'+'p',Xs)),this['viewUnifor'+'mFormat']=new zy(this['device'],_0x6bf75e);const _0x2f2f70=[new kp(Np,Fp|by)];this['viewBindGr'+'oupFormat']=new Ny(this['device'],_0x2f2f70);}}['setupViewU'+'niforms'](_0x236759,_0xca3100){this['projId']['setValue'](_0x236759['projMat']['data']),this['projSkybox'+'Id']['setValue'](_0x236759['projMat']['data']),this['viewId']['setValue'](_0x236759['viewOffMat']['data']),this['viewInvId']['setValue'](_0x236759['viewInvOff'+'Mat']['data']),this['viewId3']['setValue'](_0x236759['viewMat3']['data']),this['viewProjId']['setValue'](_0x236759['projViewOf'+'fMat']['data']),this['viewPosId']['setValue'](_0x236759['positionDa'+'ta']),this['viewIndexI'+'d']['setValue'](_0xca3100);}['setupViewU'+'niformBuff'+'ers'](_0x35a89e,_0x127ce6,_0x401447,_0x322037){w['assert'](Array['isArray'](_0x35a89e),'viewBindGr'+'oups\x20must\x20'+'be\x20an\x20arra'+'y');const {device:_0x32e0ed}=this,_0x473586=(_0x322037==null?void(-0x1642+0xb35*0x3+-0x1*0xb5d):_0x322037['length'])??0x2096+-0x2551+0x4bc;for(;_0x35a89e['length']<_0x473586;){const _0x22e587=new zp(_0x32e0ed,_0x127ce6,!(-0x7cf+0x1*0x1e07+-0x1637)),_0x3be15b=new Up(_0x32e0ed,_0x401447,_0x22e587);Ea['setName'](_0x3be15b,'ViewBindGr'+'oup_'+_0x3be15b['id']),_0x35a89e['push'](_0x3be15b);}if(_0x322037)for(let _0x241973=0x2097+0x31*-0x7+-0x14*0x190;_0x241973<_0x473586;_0x241973++){const _0x13341f=_0x322037[_0x241973];this['setupViewU'+'niforms'](_0x13341f,_0x241973);const _0x559d13=_0x35a89e[_0x241973];_0x559d13['defaultUni'+'formBuffer']['update'](),_0x559d13['update']();}else{const _0xed1583=_0x35a89e[0x138c+0x167a+0x1503*-0x2];_0xed1583['defaultUni'+'formBuffer']['update'](),_0xed1583['update']();}_0x322037||_0x32e0ed['setBindGro'+'up'](rl,_0x35a89e[0x20b0+-0x4*0x3b3+-0x14*0xe5]);}['setupMeshU'+'niformBuff'+'ers'](_0x508c92){const _0x32a439=this['device'];if(_0x32a439['supportsUn'+'iformBuffe'+'rs']){const _0x3dbaf9=_0x508c92['getBindGro'+'up'](_0x32a439);_0x3dbaf9['update'](),_0x32a439['setBindGro'+'up'](Oy,_0x3dbaf9),_0x508c92['getUniform'+'Buffer'](_0x32a439)['update'](hf),_0x32a439['setBindGro'+'up'](su,hf['bindGroup'],hf['offsets']);}}['setMeshIns'+'tanceMatri'+'ces'](_0x44ebf4,_0x38e5c2=!(-0x7*-0xfd+0x221*-0xb+0x1081)){const _0xb286fd=_0x44ebf4['node']['worldTrans'+'form'];this['modelMatri'+'xId']['setValue'](_0xb286fd['data']),_0x38e5c2&&this['normalMatr'+'ixId']['setValue'](_0x44ebf4['node']['normalMatr'+'ix']['data']);}['cull'](_0x6d9690,_0x236d8c,_0x24bc26){const _0x48356a=de(),_0x4c7955=_0x24bc26['opaque'];_0x4c7955['length']=-0xf64+0x1c0c+0x8*-0x195;const _0x57d3aa=_0x24bc26['transparen'+'t'];_0x57d3aa['length']=0x1b3c+0x26cf*-0x1+0xb93;const _0x27bf72=_0x6d9690['frustumCul'+'ling'],_0x9c8fc7=_0x236d8c['length'];for(let _0xa78be5=-0xc18+0x1*-0x24bb+-0x1af*-0x1d;_0xa78be5<_0x9c8fc7;_0xa78be5++){const _0x444cd9=_0x236d8c[_0xa78be5];_0x444cd9['visible']&&(!_0x27bf72||!_0x444cd9['cull']||_0x444cd9['_isVisible'](_0x6d9690))&&(_0x444cd9['visibleThi'+'sFrame']=!(-0x290+-0x1*-0x2225+-0x181*0x15),(_0x444cd9['transparen'+'t']?_0x57d3aa:_0x4c7955)['push'](_0x444cd9),(_0x444cd9['skinInstan'+'ce']||_0x444cd9['morphInsta'+'nce']||_0x444cd9['gsplatInst'+'ance'])&&(this['processing'+'MeshInstan'+'ces']['add'](_0x444cd9),_0x444cd9['gsplatInst'+'ance']&&_0x444cd9['gsplatInst'+'ance']['cameras']['push'](_0x6d9690)));}this['_cullTime']+=de()-_0x48356a,this['_numDrawCa'+'llsCulled']+=_0x27bf72?_0x9c8fc7:-0x1cd*-0x6+-0xee8+-0x2*-0x20d;}['collectLig'+'hts'](_0x4ad115){this['lights']['length']=-0x215c+0xffd*-0x2+-0x4156*-0x1,this['localLight'+'s']['length']=-0x8*-0x49f+-0x228b+-0xcf*0x3;const _0x2f9da8=this['scene']['_stats'];_0x2f9da8['dynamicLig'+'hts']=0x258e+-0x629*-0x3+-0x3809,_0x2f9da8['bakedLight'+'s']=0x236b*-0x1+0x9cf+-0x199c*-0x1;const _0xff00e9=_0x4ad115['layerList']['length'];for(let _0x2f8541=0x2*0x284+-0x1*0x1aa+0x35e*-0x1;_0x2f8541<_0xff00e9;_0x2f8541++){const _0x128785=_0x4ad115['layerList'][_0x2f8541];if(!cf['has'](_0x128785)){cf['add'](_0x128785);const _0x4dac29=_0x128785['_lights'];for(let _0x4b6008=-0x1e77+0x2b6*0x4+0x1*0x139f;_0x4b6008<_0x4dac29['length'];_0x4b6008++){const _0x2912fb=_0x4dac29[_0x4b6008];lf['has'](_0x2912fb)||(lf['add'](_0x2912fb),this['lights']['push'](_0x2912fb),_0x2912fb['_type']!==ve&&this['localLight'+'s']['push'](_0x2912fb),(_0x2912fb['mask']&Ss||_0x2912fb['mask']&di)&&_0x2f9da8['dynamicLig'+'hts']++,_0x2912fb['mask']&fi&&_0x2f9da8['bakedLight'+'s']++);}}}_0x2f9da8['lights']=this['lights']['length'],lf['clear'](),cf['clear']();}['cullLights'](_0x5b2033,_0x3ac203){const _0x2e6c73=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x4170cf=this['scene']['physicalUn'+'its'];for(let _0x26a069=0x1e17*-0x1+-0x326+0x213d*0x1;_0x26a069<_0x3ac203['length'];_0x26a069++){const _0x742315=_0x3ac203[_0x26a069];if(_0x742315['enabled']){if(_0x742315['_type']!==ve){if(_0x742315['getBoundin'+'gSphere'](of),_0x5b2033['frustum']['containsSp'+'here'](of)){_0x742315['visibleThi'+'sFrame']=!(-0x29*-0x7d+-0xb*0x169+-0x482),_0x742315['usePhysica'+'lUnits']=_0x4170cf;const _0x1b4b70=_0x5b2033['getScreenS'+'ize'](of);_0x742315['maxScreenS'+'ize']=Math['max'](_0x742315['maxScreenS'+'ize'],_0x1b4b70);}else _0x2e6c73||_0x742315['castShadow'+'s']&&!_0x742315['shadowMap']&&(_0x742315['visibleThi'+'sFrame']=!(-0xb*0x1cd+-0x2*-0xfc8+0xbc1*-0x1));}else _0x742315['usePhysica'+'lUnits']=this['scene']['physicalUn'+'its'];}}}['cullShadow'+'maps'](_0x38b8a7){const _0x2dcfac=this['scene']['clusteredL'+'ightingEna'+'bled'];for(let _0x21b7de=0x1db0+0x1f2*0xb+-0x3316*0x1;_0x21b7de<this['localLight'+'s']['length'];_0x21b7de++){const _0x597fed=this['localLight'+'s'][_0x21b7de];_0x597fed['_type']!==ve&&(_0x2dcfac?_0x597fed['atlasSlotU'+'pdated']&&_0x597fed['shadowUpda'+'teMode']===Ps&&(_0x597fed['shadowUpda'+'teMode']=xr):_0x597fed['shadowUpda'+'teMode']===Ps&&_0x597fed['castShadow'+'s']&&(_0x597fed['getRenderD'+'ata'](null,-0x740+0x1*-0x5bd+0xcfd)['shadowCame'+'ra']['renderTarg'+'et']||(_0x597fed['shadowUpda'+'teMode']=xr)),_0x597fed['visibleThi'+'sFrame']&&_0x597fed['castShadow'+'s']&&_0x597fed['shadowUpda'+'teMode']!==Ps&&this['_shadowRen'+'dererLocal']['cull'](_0x597fed,_0x38b8a7));}this['cameraDirS'+'hadowLight'+'s']['clear']();const _0x8068ad=_0x38b8a7['cameras'];for(let _0x2cc89d=0x1*0x2ce+0xc7d+-0x5*0x30f;_0x2cc89d<_0x8068ad['length'];_0x2cc89d++){const _0x4574af=_0x8068ad[_0x2cc89d];if(_0x4574af['enabled']){const _0x2b0c0e=_0x4574af['camera'];let _0x3112e0;const _0x56e0c8=_0x2b0c0e['layers'];for(let _0x1a02ba=0xee3*0x1+0x259f+0x5e*-0x8f;_0x1a02ba<_0x56e0c8['length'];_0x1a02ba++){const _0x1964be=_0x38b8a7['getLayerBy'+'Id'](_0x56e0c8[_0x1a02ba]);if(_0x1964be){const _0x1d7798=_0x1964be['splitLight'+'s'][ve];for(let _0x1eb985=-0xbe*-0x1+0x2*0x1331+-0x2720;_0x1eb985<_0x1d7798['length'];_0x1eb985++){const _0x4cdd6f=_0x1d7798[_0x1eb985];_0x4cdd6f['castShadow'+'s']&&!Fa['has'](_0x4cdd6f)&&(Fa['add'](_0x4cdd6f),_0x3112e0=_0x3112e0??[],_0x3112e0['push'](_0x4cdd6f),this['_shadowRen'+'dererDirec'+'tional']['cull'](_0x4cdd6f,_0x38b8a7,_0x2b0c0e));}}}_0x3112e0&&this['cameraDirS'+'hadowLight'+'s']['set'](_0x2b0c0e,_0x3112e0),Fa['clear']();}}}['cullCompos'+'ition'](_0x2b90ed){const _0xf9671f=de(),{scene:_0x42ff6d}=this;this['processing'+'MeshInstan'+'ces']['clear']();const _0x41d670=_0x2b90ed['cameras']['length'];this['_camerasRe'+'ndered']+=_0x41d670;for(let _0xa38cc1=-0x1c1*-0x11+0x1*0x1ead+-0x3c7e;_0xa38cc1<_0x41d670;_0xa38cc1++){const _0x604c57=_0x2b90ed['cameras'][_0xa38cc1];_0x42ff6d==null||_0x42ff6d['fire'](mv,_0x604c57);const _0x21bbb8=_0x604c57['renderTarg'+'et'];_0x604c57['frameUpdat'+'e'](_0x21bbb8),this['updateCame'+'raFrustum'](_0x604c57['camera']);const _0x5f306f=_0x604c57['layers'];for(let _0x2d1280=-0x2005+0x1d9f+0x266;_0x2d1280<_0x5f306f['length'];_0x2d1280++){const _0x946678=_0x2b90ed['getLayerBy'+'Id'](_0x5f306f[_0x2d1280]);if(_0x946678&&_0x946678['enabled']){this['cullLights'](_0x604c57['camera'],_0x946678['_lights']);const _0x205293=_0x946678['getCulledI'+'nstances'](_0x604c57['camera']);this['cull'](_0x604c57['camera'],_0x946678['meshInstan'+'ces'],_0x205293);}}_0x42ff6d==null||_0x42ff6d['fire'](_v,_0x604c57);}_0x42ff6d['clusteredL'+'ightingEna'+'bled']&&this['updateLigh'+'tTextureAt'+'las'](),this['cullShadow'+'maps'](_0x2b90ed),_0x42ff6d==null||_0x42ff6d['fire'](lE),this['_cullTime']+=de()-_0xf9671f;}['updateShad'+'ers'](_0x58dfcb,_0x1de8ab){const _0x46fd5b=_0x58dfcb['length'];for(let _0x56c3cd=0x1392+-0x1e40+-0x2*-0x557;_0x56c3cd<_0x46fd5b;_0x56c3cd++){const _0x4838b6=_0x58dfcb[_0x56c3cd]['material'];if(_0x4838b6&&!Fa['has'](_0x4838b6)&&(Fa['add'](_0x4838b6),_0x4838b6['getShaderV'+'ariant']!==tr['prototype']['getShaderV'+'ariant'])){if(_0x1de8ab&&(!_0x4838b6['useLightin'+'g']||_0x4838b6['emitter']&&!_0x4838b6['emitter']['lighting']))continue;_0x4838b6['clearVaria'+'nts']();}}Fa['clear']();}['updateFram'+'eUniforms'](){this['blueNoiseT'+'extureId']['setValue'](Pb(this['device']));}['beginFrame'](_0x53d50d){const _0x44004f=this['scene'],_0x33c1bf=_0x44004f['updateShad'+'ers']||this['device']['_shadersDi'+'rty'];let _0x243ce1=0x20b0+-0x237d+0x2cd;const _0x235a43=_0x53d50d['layerList'],_0x3f5a1a=_0x235a43['length'];for(let _0x51800b=-0x23f5+-0x252c+0x1*0x4921;_0x51800b<_0x3f5a1a;_0x51800b++){const _0x23d8cc=_0x235a43[_0x51800b]['meshInstan'+'ces'],_0x33b8c9=_0x23d8cc['length'];_0x243ce1+=_0x33b8c9;for(let _0x2d3d4a=-0x67d+0x7a4+-0x127;_0x2d3d4a<_0x33b8c9;_0x2d3d4a++){const _0x29c87b=_0x23d8cc[_0x2d3d4a];_0x29c87b['visibleThi'+'sFrame']=!(0xe2*-0x29+0x1*-0x483+0x28b6),_0x33c1bf&&df['push'](_0x29c87b),_0x29c87b['skinInstan'+'ce']&&ff['push'](_0x29c87b);}}if(_0x44004f['_stats']['meshInstan'+'ces']=_0x243ce1,_0x33c1bf){const _0x2183b8=!_0x44004f['updateShad'+'ers']||!this['device']['_shadersDi'+'rty'];this['updateShad'+'ers'](df,_0x2183b8),_0x44004f['updateShad'+'ers']=!(0xba2*0x1+0x6*0x644+-0x1*0x3139),this['device']['_shadersDi'+'rty']=!(-0xf8b+-0x23e3+-0x336f*-0x1),_0x44004f['_shaderVer'+'sion']++;}this['updateFram'+'eUniforms'](),this['updateCpuS'+'kinMatrice'+'s'](ff),df['length']=0x1*0x61c+0x67*0x19+-0x1*0x102b,ff['length']=0xda2*0x1+-0x7cf*-0x1+-0x1571;const _0x33afd9=this['lights'],_0x485924=_0x33afd9['length'];for(let _0x1d5ac8=-0x4d*0x4+-0xcf5*0x3+-0x2813*-0x1;_0x1d5ac8<_0x485924;_0x1d5ac8++)_0x33afd9[_0x1d5ac8]['beginFrame']();}['updateLigh'+'tTextureAt'+'las'](){this['lightTextu'+'reAtlas']['update'](this['localLight'+'s'],this['scene']['lighting']);}['updateLaye'+'rCompositi'+'on'](_0x3b8fa0){const _0xf57ede=de(),_0x441efb=_0x3b8fa0['layerList']['length'],_0x480814=this['scene']['_shaderVer'+'sion'];for(let _0x56e179=-0x123b+0x14b+0x10f0;_0x56e179<_0x441efb;_0x56e179++){const _0x65a54=_0x3b8fa0['layerList'][_0x56e179];_0x65a54['_shaderVer'+'sion']=_0x480814,_0x65a54['_skipRende'+'rCounter']=-0x1*0x14fb+-0xc0b*0x3+0x154*0x2b,_0x65a54['_forwardDr'+'awCalls']=-0x153*-0x10+0x8b*-0x27+-0x3,_0x65a54['_shadowDra'+'wCalls']=-0x1089+0x266c*0x1+-0x15e3,_0x65a54['_renderTim'+'e']=-0x17*-0x58+0x1669+0x255*-0xd;}_0x3b8fa0['_update'](),this['_layerComp'+'ositionUpd'+'ateTime']+=de()-_0xf57ede;}['frameUpdat'+'e'](){this['clustersDe'+'bugRendere'+'d']=!(0x1*0xf5f+0x3*0xb68+-0x16*0x241),this['initViewBi'+'ndGroupFor'+'mat'](this['scene']['clusteredL'+'ightingEna'+'bled']),this['dirLightSh'+'adows']['clear']();}}class Pv{constructor(){h(this,'camera',null),(this['layer']=null,this['transparen'+'t']=!(-0xabd*-0x1+0x1c27+-0x26e3*0x1),this['renderTarg'+'et']=null,this['lightClust'+'ers']=null,this['clearColor']=!(0xb7d*-0x3+0x1*-0x25+0x229d),this['clearDepth']=!(0xbec*-0x1+-0x12*-0xb7+0xf1*-0x1),this['clearStenc'+'il']=!(-0x1247+0x2317*-0x1+0xd*0x41b),this['triggerPos'+'tprocess']=!(0x86b*-0x1+0x1*0x18a7+-0x103b),this['firstCamer'+'aUse']=!(0xa57*-0x2+0x66+0x9*0x241),this['lastCamera'+'Use']=!(-0x1867+0x2*0xf89+-0x2*0x355),this['viewBindGr'+'oups']=[],this['useCameraP'+'asses']=!(-0x4f2*-0x1+-0x20ed+0x1bfc));}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x526736=>{_0x526736['defaultUni'+'formBuffer']['destroy'](),_0x526736['destroy']();}),this['viewBindGr'+'oups']['length']=-0x1*0x250d+-0x52b+0x304*0xe;}['setupClear'+'s'](_0x398efa,_0x16f786){this['clearColor']=(_0x398efa==null?void(-0x15*-0x67+-0x19c8+0x1155):_0x398efa['clearColor'+'Buffer'])||_0x16f786['clearColor'+'Buffer'],this['clearDepth']=(_0x398efa==null?void(0x19d5+-0x237+0x2*-0xbcf):_0x398efa['clearDepth'+'Buffer'])||_0x16f786['clearDepth'+'Buffer'],this['clearStenc'+'il']=(_0x398efa==null?void(0x2*-0xa67+-0x265+0x1733):_0x398efa['clearStenc'+'ilBuffer'])||_0x16f786['clearStenc'+'ilBuffer'];}}class Kb extends ys{constructor(_0xd83559,_0x161927,_0x48a753,_0x4d6877){super(_0xd83559),h(this,'layerCompo'+'sition'),h(this,'scene'),h(this,'renderer'),h(this,'renderActi'+'ons',[]),h(this,'gammaCorre'+'ction'),h(this,'toneMappin'+'g'),h(this,'noDepthCle'+'ar',!(0x725+-0x6f3*0x2+0x6c2)),(this['layerCompo'+'sition']=_0x161927,this['scene']=_0x48a753,this['renderer']=_0x4d6877);}get['rendersAny'+'thing'](){return this['renderActi'+'ons']['length']>0x1757+-0x1178+-0x3*0x1f5;}['addRenderA'+'ction'](_0xfb174e){this['renderActi'+'ons']['push'](_0xfb174e);}['addLayer'](_0x466920,_0x1cb737,_0x477802,_0x3d76a8=!(-0x2*0x1+-0x1a3c+0x1a3e)){w['assert'](_0x466920),w['assert'](this['renderTarg'+'et']!==void(0x4*-0x533+-0x645+0x1b11),'Render\x20pas'+'s\x20needs\x20to'+'\x20be\x20initia'+'lized\x20befo'+'re\x20adding\x20'+'layers'),w['assert'](_0x466920['camera']['layersSet']['has'](_0x1cb737['id']),'Camera\x20'+_0x466920['entity']['name']+('\x20does\x20not\x20'+'render\x20lay'+'er\x20')+_0x1cb737['name']+'.');const _0x2dccf3=new Pv();if(_0x2dccf3['renderTarg'+'et']=this['renderTarg'+'et'],_0x2dccf3['camera']=_0x466920,_0x2dccf3['layer']=_0x1cb737,_0x2dccf3['transparen'+'t']=_0x477802,_0x3d76a8){const _0x10ec66=this['renderActi'+'ons']['length']===-0x2665+-0x4*0x341+-0x6b*-0x7b;_0x2dccf3['setupClear'+'s'](_0x10ec66?_0x466920:void(-0x26db+-0x1bf6+0x42d1),_0x1cb737);}this['addRenderA'+'ction'](_0x2dccf3);}['addLayers'](_0x34bdd2,_0x48384b,_0x28bd15,_0x387ae6,_0x1e7b73,_0x14e9b7=!(-0x65+0x1*-0x1142+-0x11a7*-0x1)){const {layerList:_0x3b6ac3,subLayerList:_0x8b6255}=_0x34bdd2;let _0x1aa394=_0x387ae6,_0x318c90=_0x28bd15;for(;_0x318c90<_0x3b6ac3['length'];){const _0x460fd1=_0x3b6ac3[_0x318c90],_0x23c6c9=_0x8b6255[_0x318c90];if(_0x48384b['camera']['layersSet']['has'](_0x460fd1['id'])&&(this['addLayer'](_0x48384b,_0x460fd1,_0x23c6c9,_0x1aa394),_0x1aa394=!(-0x257c+-0x13bb+0x3938)),_0x318c90++,_0x460fd1['id']===_0x1e7b73&&_0x23c6c9===_0x14e9b7)break;}return _0x318c90;}['updateDire'+'ctionalSha'+'dows'](){const {renderer:_0x5bc61f,renderActions:_0x18e783}=this;for(let _0x4f5fae=0xd7f+0x6a*0x5c+-0x3397;_0x4f5fae<_0x18e783['length'];_0x4f5fae++){const _0x184bd1=_0x18e783[_0x4f5fae]['camera']['camera'],_0x42b34d=this['renderer']['cameraDirS'+'hadowLight'+'s']['get'](_0x184bd1);if(_0x42b34d)for(let _0x535417=-0x502*-0x1+-0x1367*-0x2+-0x2bd0;_0x535417<_0x42b34d['length'];_0x535417++){const _0x5a8793=_0x42b34d[_0x535417];if(_0x5bc61f['dirLightSh'+'adows']['get'](_0x5a8793)!==_0x184bd1){_0x5bc61f['dirLightSh'+'adows']['set'](_0x5a8793,_0x184bd1);const _0x23e568=_0x5bc61f['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x5a8793,_0x184bd1);_0x23e568&&this['beforePass'+'es']['push'](_0x23e568);}}}}['updateClea'+'rs'](){const _0x34ad90=this['renderActi'+'ons'][-0xe*0x24a+-0x43*0x67+-0x3*-0x13ab];if(_0x34ad90){const _0x568470=_0x34ad90['camera']['camera'],_0x2bad57=_0x568470['fullSizeCl'+'earRect'];this['setClearCo'+'lor'](_0x2bad57&&_0x34ad90['clearColor']?_0x568470['clearColor']:void(-0xfa1*0x2+0x2b*-0x15+-0x5*-0x6f5)),this['setClearDe'+'pth'](_0x2bad57&&_0x34ad90['clearDepth']&&!this['noDepthCle'+'ar']?_0x568470['clearDepth']:void(-0xa59+-0x13a1+0x1dfa)),this['setClearSt'+'encil'](_0x2bad57&&_0x34ad90['clearStenc'+'il']?_0x568470['clearStenc'+'il']:void(0x536*-0x2+-0xb7*-0x35+-0x1b77));}}['frameUpdat'+'e'](){super['frameUpdat'+'e'](),this['updateDire'+'ctionalSha'+'dows'](),this['updateClea'+'rs']();}['before'](){const {renderActions:_0x5015aa}=this;for(let _0x3d4a5c=0x19b+0x845+-0x9e0;_0x3d4a5c<_0x5015aa['length'];_0x3d4a5c++){const _0x143847=_0x5015aa[_0x3d4a5c];_0x143847['firstCamer'+'aUse']&&this['scene']['fire'](rE,_0x143847['camera']);}}['execute'](){const {layerComposition:_0x24a73b,renderActions:_0x399e28}=this;for(let _0x1232a8=0x1*-0x10f3+-0x1*-0x1c33+-0xb40;_0x1232a8<_0x399e28['length'];_0x1232a8++){const _0x3f83bc=_0x399e28[_0x1232a8],_0x5d447f=_0x3f83bc['layer'];w['call'](()=>{_0x24a73b['getLayerBy'+'Name'](_0x5d447f['name'])||w['warnOnce']('Layer\x20'+_0x5d447f['name']+('\x20is\x20not\x20fo'+'und\x20in\x20the'+'\x20scene\x20and'+'\x20will\x20not\x20'+'be\x20rendere'+'d.\x20Your\x20re'+'nder\x20pass\x20'+'setup\x20migh'+'t\x20need\x20to\x20'+'be\x20updated'+'.'));}),_0x24a73b['isEnabled'](_0x5d447f,_0x3f83bc['transparen'+'t'])&&this['renderRend'+'erAction'](_0x3f83bc,_0x1232a8===0x2db+0xe7b*0x2+0x21f*-0xf);}}['after'](){for(let _0x7dc6b7=0x1a6f*-0x1+0x1342+-0xb*-0xa7;_0x7dc6b7<this['renderActi'+'ons']['length'];_0x7dc6b7++){const _0x1f7a0c=this['renderActi'+'ons'][_0x7dc6b7];_0x1f7a0c['lastCamera'+'Use']&&this['scene']['fire'](aE,_0x1f7a0c['camera']);}this['beforePass'+'es']['length']=-0x90d*-0x1+-0x47*-0x15+-0x20*0x77;}['renderRend'+'erAction'](_0x1e7c31,_0x3c6f3c){var _0x4ba986;const {renderer:_0x3820a2,scene:_0x4bea46}=this,_0xac1473=_0x3820a2['device'],{layer:_0x4054a0,transparent:_0x3b472a,camera:_0x5cd062}=_0x1e7c31;Q['pushGpuMar'+'ker'](this['device'],'Camera:\x20'+(_0x5cd062?_0x5cd062['entity']['name']:'Unnamed')+',\x20Layer:\x20'+_0x4054a0['name']+'('+(_0x3b472a?'TRANSP':'OPAQUE')+')');const _0x2eff32=de();if(_0x5cd062){const _0x65e849=_0x5cd062['gammaCorre'+'ction'],_0x30859c=_0x5cd062['toneMappin'+'g'];this['gammaCorre'+'ction']!==void(-0x1266+-0xfa0+0x2206)&&(_0x5cd062['gammaCorre'+'ction']=this['gammaCorre'+'ction']),this['toneMappin'+'g']!==void(0x18cb+-0x49*-0x15+-0x1ec8)&&(_0x5cd062['toneMappin'+'g']=this['toneMappin'+'g']),_0x4bea46['fire'](nE,_0x5cd062,_0x4054a0,_0x3b472a);const _0x852f4b={'lightClusters':_0x1e7c31['lightClust'+'ers']},_0xb245d4=((_0x4ba986=_0x5cd062['camera']['shaderPass'+'Info'])==null?void(-0xfc3*-0x2+-0xc97+-0x12ef):_0x4ba986['index'])??Aa;(!_0x3c6f3c||!_0x5cd062['camera']['fullSizeCl'+'earRect'])&&(_0x852f4b['clearColor']=_0x1e7c31['clearColor'],_0x852f4b['clearDepth']=_0x1e7c31['clearDepth'],_0x852f4b['clearStenc'+'il']=_0x1e7c31['clearStenc'+'il']);const _0x5f589e=_0x1e7c31['renderTarg'+'et']??_0xac1473['backBuffer'];_0x3820a2['renderForw'+'ardLayer'](_0x5cd062['camera'],_0x5f589e,_0x4054a0,_0x3b472a,_0xb245d4,_0x1e7c31['viewBindGr'+'oups'],_0x852f4b),_0xac1473['setBlendSt'+'ate'](pt['NOBLEND']),_0xac1473['setStencil'+'State'](null,null),_0xac1473['setAlphaTo'+'Coverage'](!(0x1*0xa4b+-0x21d0+0xbc3*0x2)),_0x4bea46['fire'](oE,_0x5cd062,_0x4054a0,_0x3b472a),this['gammaCorre'+'ction']!==void(-0x19f5+0x7*-0x86+0x1d9f)&&(_0x5cd062['gammaCorre'+'ction']=_0x65e849),this['toneMappin'+'g']!==void(0xf8b*0x2+-0x8*-0x139+-0x146f*0x2)&&(_0x5cd062['toneMappin'+'g']=_0x30859c);}Q['popGpuMark'+'er'](this['device']),_0x4054a0['_renderTim'+'e']+=de()-_0x2eff32;}['log'](_0x5aa21c,_0x21e031){if(super['log'](_0x5aa21c,_0x21e031),mi['get'](cn)){const {layerComposition:_0x5cdcf8}=this;this['renderActi'+'ons']['forEach']((_0x1fcf4,_0x3e7101)=>{const _0x5e9a6a=_0x1fcf4['layer'],_0x260fc6=_0x5e9a6a['enabled']&&_0x5cdcf8['isEnabled'](_0x5e9a6a,_0x1fcf4['transparen'+'t']),_0x5a3a0c=_0x1fcf4['camera'];w['trace'](cn,'\x20\x20\x20\x20'+_0x3e7101+':'+('\x20Cam:\x20'+(_0x5a3a0c?_0x5a3a0c['entity']['name']:'-'))['padEnd'](-0x2c5*-0xd+-0x81d+0x1*-0x1bce,'\x20')+('\x20Lay:\x20'+_0x5e9a6a['name'])['padEnd'](0x28a*-0x4+0x862+0x11*0x1c,'\x20')+(_0x1fcf4['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x260fc6?'\x20ENABLED':'\x20DISABLED')+('\x20Meshes:\x20'+_0x5e9a6a['meshInstan'+'ces']['length'])['padEnd'](-0x129a+-0x2538+-0x129d*-0x3,'\x20'));});}}}class Zb extends ys{constructor(_0x24b489,_0x12f25c,_0x1432dd){super(_0x24b489),this['renderer']=_0x12f25c,this['renderActi'+'on']=_0x1432dd,this['requiresCu'+'bemaps']=!(-0x10*0x215+-0x11d3*-0x1+0xf7e);}['execute'](){const _0x5f0d91=this['renderActi'+'on'],_0x51354f=_0x5f0d91['camera'];w['assert'](_0x5f0d91['triggerPos'+'tprocess']&&_0x51354f['onPostproc'+'essing']),_0x51354f['onPostproc'+'essing']();}}const Qb=[[],[],[]],or=new ie(),Nr={'drawCalls':[],'shaderInstances':[],'isNewMaterial':[],'lightMaskChanged':[],'clear':function(){this['drawCalls']['length']=-0x1564+0x1*0x24cb+-0xf67,this['shaderInst'+'ances']['length']=0x22c3+-0xc3c+-0x1687,this['isNewMater'+'ial']['length']=-0x18fc+-0x18*0x155+0x38f4,this['lightMaskC'+'hanged']['length']=0x1*0x1b3b+0x2057+-0x3b92;}};function Jb(_0xc2de84){const _0x28b66f=[];for(let _0x12c255=-0x16dd*-0x1+-0x132e+-0x17*0x29;_0x12c255<_0xc2de84;++_0x12c255){const _0x33eb88=Math['sqrt'](_0x12c255+(-0xaf9*0x2+-0x2f*-0xa9+-0x5*0x1d1+0.5))/Math['sqrt'](_0xc2de84);_0x28b66f['push'](_0x33eb88);}return _0x28b66f;}function eA(_0x210bec){const _0x4d0bb5=[];for(let _0x1bb942=-0x8e2+0x1a82+0x2*-0x8d0;_0x1bb942<_0x210bec;_0x1bb942++){const _0x47db1a=_0x1bb942/_0x210bec,_0x11d738=Math['sqrt'](_0x47db1a*_0x47db1a);_0x4d0bb5['push'](_0x11d738);}return _0x4d0bb5;}const Ni=class Ni extends Yb{constructor(_0x2619c5){super(_0x2619c5);const _0x239605=this['device'];this['_forwardDr'+'awCalls']=-0x3*0x4be+0xa*0x76+0x99e*0x1,this['_materialS'+'witches']=0x2246+0x9*-0x71+0x1*-0x1e4d,this['_depthMapT'+'ime']=-0x334*-0xb+0x93c*0x4+-0x1*0x482c,this['_forwardTi'+'me']=0x25ec+0x2fe*0x1+-0x1*0x28ea,this['_sortTime']=-0x1cf4+-0x103d+0x2d31;const _0x364775=_0x239605['scope'];this['fogColorId']=_0x364775['resolve']('fog_color'),this['fogStartId']=_0x364775['resolve']('fog_start'),this['fogEndId']=_0x364775['resolve']('fog_end'),this['fogDensity'+'Id']=_0x364775['resolve']('fog_densit'+'y'),this['ambientId']=_0x364775['resolve']('light_glob'+'alAmbient'),this['skyboxInte'+'nsityId']=_0x364775['resolve']('skyboxInte'+'nsity'),this['cubeMapRot'+'ationMatri'+'xId']=_0x364775['resolve']('cubeMapRot'+'ationMatri'+'x'),this['pcssDiskSa'+'mplesId']=_0x364775['resolve']('pcssDiskSa'+'mples[0]'),this['pcssSphere'+'SamplesId']=_0x364775['resolve']('pcssSphere'+'Samples[0]'),this['lightColor'+'Id']=[],this['lightDir']=[],this['lightDirId']=[],this['lightShado'+'wMapId']=[],this['lightShado'+'wMatrixId']=[],this['lightShado'+'wParamsId']=[],this['lightShado'+'wIntensity']=[],this['lightRadiu'+'sId']=[],this['lightPos']=[],this['lightPosId']=[],this['lightWidth']=[],this['lightWidth'+'Id']=[],this['lightHeigh'+'t']=[],this['lightHeigh'+'tId']=[],this['lightInAng'+'leId']=[],this['lightOutAn'+'gleId']=[],this['lightCooki'+'eId']=[],this['lightCooki'+'eIntId']=[],this['lightCooki'+'eMatrixId']=[],this['lightCooki'+'eOffsetId']=[],this['lightShado'+'wSearchAre'+'aId']=[],this['lightCamer'+'aParamsId']=[],this['lightSoftS'+'hadowParam'+'sId']=[],this['shadowMatr'+'ixPaletteI'+'d']=[],this['shadowCasc'+'adeDistanc'+'esId']=[],this['shadowCasc'+'adeCountId']=[],this['shadowCasc'+'adeBlendId']=[],this['screenSize'+'Id']=_0x364775['resolve']('uScreenSiz'+'e'),this['_screenSiz'+'e']=new Float32Array(-0x16c4+0x2343*-0x1+0x3a0b),this['fogColor']=new Float32Array(-0x2419*-0x1+-0x174c+-0x1*0xcca),this['ambientCol'+'or']=new Float32Array(0x312*0x7+0x103f+-0x1*0x25ba),this['pcssDiskSa'+'mples']=Jb(0x2f5*0x8+0x1*-0x129b+-0x4fd),this['pcssSphere'+'Samples']=eA(-0x5*0x104+0xc9a*-0x1+-0x8df*-0x2);}['destroy'](){super['destroy']();}['dispatchGl'+'obalLights'](_0x22044d){const _0x542f65=this['ambientCol'+'or'];if(or['linear'](_0x22044d['ambientLig'+'ht']),_0x542f65[-0x245b*0x1+0x2540+-0x1*0xe5]=or['r'],_0x542f65[0xfc7*0x1+0x507+-0x14cd]=or['g'],_0x542f65[-0x297+0x1931+0x788*-0x3]=or['b'],_0x22044d['physicalUn'+'its']){for(let _0x17eaed=-0x193f*-0x1+-0x1878+-0x1*0xc7;_0x17eaed<0x1bda+-0x410+-0x1*0x17c7;_0x17eaed++)_0x542f65[_0x17eaed]*=_0x22044d['ambientLum'+'inance'];}this['ambientId']['setValue'](_0x542f65),this['skyboxInte'+'nsityId']['setValue'](_0x22044d['physicalUn'+'its']?_0x22044d['skyboxLumi'+'nance']:_0x22044d['skyboxInte'+'nsity']),this['cubeMapRot'+'ationMatri'+'xId']['setValue'](_0x22044d['_skyboxRot'+'ationMat3']['data']);}['_resolveLi'+'ght'](_0x22e88a,_0x42f418){const _0x46de73='light'+_0x42f418;this['lightColor'+'Id'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+'_color'),this['lightDir'][_0x42f418]=new Float32Array(0x125*-0xd+0x1*-0x2023+0xfad*0x3),this['lightDirId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+'_direction'),this['lightShado'+'wMapId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+'_shadowMap'),this['lightShado'+'wMatrixId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_shadowMat'+'rix')),this['lightShado'+'wParamsId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_shadowPar'+'ams')),this['lightShado'+'wIntensity'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_shadowInt'+'ensity')),this['lightShado'+'wSearchAre'+'aId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_shadowSea'+'rchArea')),this['lightRadiu'+'sId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+'_radius'),this['lightPos'][_0x42f418]=new Float32Array(0xd73+-0x1b4c+0xddc),this['lightPosId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+'_position'),this['lightWidth'][_0x42f418]=new Float32Array(0x244+-0x7*-0x359+0x18*-0x112),this['lightWidth'+'Id'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+'_halfWidth'),this['lightHeigh'+'t'][_0x42f418]=new Float32Array(0x1*0x2507+0x102*0x25+-0x4a4e),this['lightHeigh'+'tId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_halfHeigh'+'t')),this['lightInAng'+'leId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_innerCone'+'Angle')),this['lightOutAn'+'gleId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_outerCone'+'Angle')),this['lightCooki'+'eId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+'_cookie'),this['lightCooki'+'eIntId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_cookieInt'+'ensity')),this['lightCooki'+'eMatrixId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_cookieMat'+'rix')),this['lightCooki'+'eOffsetId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_cookieOff'+'set')),this['lightCamer'+'aParamsId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_cameraPar'+'ams')),this['lightSoftS'+'hadowParam'+'sId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_softShado'+'wParams')),this['shadowMatr'+'ixPaletteI'+'d'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_shadowMat'+'rixPalette'+'[0]')),this['shadowCasc'+'adeDistanc'+'esId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_shadowCas'+'cadeDistan'+'ces')),this['shadowCasc'+'adeCountId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_shadowCas'+'cadeCount')),this['shadowCasc'+'adeBlendId'][_0x42f418]=_0x22e88a['resolve'](_0x46de73+('_shadowCas'+'cadeBlend'));}['setLTCDire'+'ctionalLig'+'ht'](_0x28e283,_0xd54ef4,_0x66575e,_0x19a308,_0x74c7e4){this['lightPos'][_0xd54ef4][0x75d+-0x1238*-0x1+0xb1*-0x25]=_0x19a308['x']-_0x66575e['x']*_0x74c7e4,this['lightPos'][_0xd54ef4][-0x838*-0x3+-0x1d1a+0x473]=_0x19a308['y']-_0x66575e['y']*_0x74c7e4,this['lightPos'][_0xd54ef4][0x1a14+0x67e*-0x1+0xb3*-0x1c]=_0x19a308['z']-_0x66575e['z']*_0x74c7e4,this['lightPosId'][_0xd54ef4]['setValue'](this['lightPos'][_0xd54ef4]);const _0x2bc1bb=_0x28e283['transformV'+'ector'](new D(-(0x2*-0x5aa+-0x25*0xb0+0x24c4+0.5),0x31*-0x98+0x1f80*0x1+-0xe*0x2c,0x18ef+-0x27f*0x1+-0x1670));this['lightWidth'][_0xd54ef4][-0x1*-0xc82+-0x7e4+0x1*-0x49e]=_0x2bc1bb['x']*_0x74c7e4,this['lightWidth'][_0xd54ef4][-0x1*0xb22+0x2572+-0xf*0x1c1]=_0x2bc1bb['y']*_0x74c7e4,this['lightWidth'][_0xd54ef4][-0x1e5a+0xee2+0xf7a]=_0x2bc1bb['z']*_0x74c7e4,this['lightWidth'+'Id'][_0xd54ef4]['setValue'](this['lightWidth'][_0xd54ef4]);const _0x21c624=_0x28e283['transformV'+'ector'](new D(-0x21c1+-0x2*0x52c+0x2c19,-0x1*-0x788+-0x3*-0x71d+-0x1cdf,-0x4a*-0x2+0x1*0x1e07+-0x1*0x1e9b+0.5));this['lightHeigh'+'t'][_0xd54ef4][0x31a*0x2+-0xad4+-0x8*-0x94]=_0x21c624['x']*_0x74c7e4,this['lightHeigh'+'t'][_0xd54ef4][-0xb41+0x1430+-0x9*0xfe]=_0x21c624['y']*_0x74c7e4,this['lightHeigh'+'t'][_0xd54ef4][-0x974+-0xb2e*0x1+0x14a4]=_0x21c624['z']*_0x74c7e4,this['lightHeigh'+'tId'][_0xd54ef4]['setValue'](this['lightHeigh'+'t'][_0xd54ef4]);}['dispatchDi'+'rectLights'](_0x1bbfa6,_0x265f0c,_0x320e7c){let _0x3aa289=0x3*0x175+-0x2b4*-0x6+0x1*-0x1497;const _0xac2389=this['device']['scope'];for(let _0x388fa2=0x1eca+0x5f*-0x31+-0xc9b;_0x388fa2<_0x1bbfa6['length'];_0x388fa2++){if(!(_0x1bbfa6[_0x388fa2]['mask']&_0x265f0c))continue;const _0x4b13e1=_0x1bbfa6[_0x388fa2],_0x3afd6d=_0x4b13e1['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x3aa289]||this['_resolveLi'+'ght'](_0xac2389,_0x3aa289),this['lightColor'+'Id'][_0x3aa289]['setValue'](_0x4b13e1['_colorLine'+'ar']),_0x3afd6d['getY'](_0x4b13e1['_direction'])['mulScalar'](-(-0x1eae+0xcbc*0x2+-0x537*-0x1)),_0x4b13e1['_direction']['normalize'](),this['lightDir'][_0x3aa289][-0xa*0x2f+-0x1c4b+0x1e21]=_0x4b13e1['_direction']['x'],this['lightDir'][_0x3aa289][0x338*0x5+0x6db*0x5+0x15*-0x266]=_0x4b13e1['_direction']['y'],this['lightDir'][_0x3aa289][-0x1d7d+0xa*-0x2d2+0x39b3]=_0x4b13e1['_direction']['z'],this['lightDirId'][_0x3aa289]['setValue'](this['lightDir'][_0x3aa289]),_0x4b13e1['shape']!==Ys&&this['setLTCDire'+'ctionalLig'+'ht'](_0x3afd6d,_0x3aa289,_0x4b13e1['_direction'],_0x320e7c['_node']['getPositio'+'n'](),_0x320e7c['farClip']),_0x4b13e1['castShadow'+'s']){const _0x38e81c=_0x4b13e1['getRenderD'+'ata'](_0x320e7c,-0x277+-0x1*-0xbff+-0x5*0x1e8),_0x2e4b0d=_0x4b13e1['_getUnifor'+'mBiasValue'+'s'](_0x38e81c);this['lightShado'+'wMapId'][_0x3aa289]['setValue'](_0x38e81c['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x3aa289]['setValue'](_0x38e81c['shadowMatr'+'ix']['data']),this['shadowMatr'+'ixPaletteI'+'d'][_0x3aa289]['setValue'](_0x4b13e1['_shadowMat'+'rixPalette']),this['shadowCasc'+'adeDistanc'+'esId'][_0x3aa289]['setValue'](_0x4b13e1['_shadowCas'+'cadeDistan'+'ces']),this['shadowCasc'+'adeCountId'][_0x3aa289]['setValue'](_0x4b13e1['numCascade'+'s']),this['shadowCasc'+'adeBlendId'][_0x3aa289]['setValue'](-0x1219*-0x1+0xde3+-0x1ffb-_0x4b13e1['cascadeBle'+'nd']),this['lightShado'+'wIntensity'][_0x3aa289]['setValue'](_0x4b13e1['shadowInte'+'nsity']),this['lightSoftS'+'hadowParam'+'sId'][_0x3aa289]['setValue'](_0x4b13e1['_softShado'+'wParams']),_0x38e81c['shadowCame'+'ra']['renderTarg'+'et']&&this['lightShado'+'wSearchAre'+'aId'][_0x3aa289]['setValue'](_0x4b13e1['penumbraSi'+'ze']/_0x38e81c['shadowCame'+'ra']['renderTarg'+'et']['width']*_0x38e81c['projection'+'Compensati'+'on']);const _0x3377bb=_0x4b13e1['_shadowCam'+'eraParams'];_0x3377bb['length']=-0x10a8+-0x20aa+0x3156,_0x3377bb[-0x1957+-0x361+0x8*0x397]=-0x2385+-0x1221+0x35a6,_0x3377bb[-0x857*-0x2+-0x7c*0x26+0x1bb]=_0x38e81c['shadowCame'+'ra']['_farClip'],_0x3377bb[-0x68e*0x1+0x23fb+-0x1d6b]=_0x38e81c['shadowCame'+'ra']['_nearClip'],_0x3377bb[0x6b*-0x2b+-0x1*-0x225b+-0x105f]=0xcb5+-0x14d8+0x824,this['lightCamer'+'aParamsId'][_0x3aa289]['setValue'](_0x3377bb);const _0x531fb4=_0x4b13e1['_shadowRen'+'derParams'];_0x531fb4['length']=-0x116*-0x18+-0x62a+0x13e2*-0x1,_0x531fb4[0x4*-0x619+-0x94d+0x19*0x159]=_0x4b13e1['_shadowRes'+'olution'],_0x531fb4[0x1589+-0x1c1b+0x693]=_0x2e4b0d['normalBias'],_0x531fb4[-0x2eb*-0x2+0xe69*-0x2+-0x36*-0x6d]=_0x2e4b0d['bias'],_0x531fb4[-0x197d+0x120d+-0x773*-0x1]=-0x6f*0x39+0x2f5*0x3+-0x4e*-0x34,this['lightShado'+'wParamsId'][_0x3aa289]['setValue'](_0x531fb4);}_0x3aa289++;}return _0x3aa289;}['setLTCPosi'+'tionalLigh'+'t'](_0x4766bb,_0x83a7a4){const _0x4bf5ff=_0x4766bb['transformV'+'ector'](new D(-(-0x1e66+0x27*0x4+0x4f7*0x6+0.5),-0x54a*0x1+0x1d89+-0x183f,0x758+-0x1818+0x2*0x860));this['lightWidth'][_0x83a7a4][-0x42*0x5d+-0x11eb+0x29e5]=_0x4bf5ff['x'],this['lightWidth'][_0x83a7a4][0x5*-0x798+0x11a3+0x1456]=_0x4bf5ff['y'],this['lightWidth'][_0x83a7a4][0x7c4*-0x2+-0x1*-0xb85+0x405]=_0x4bf5ff['z'],this['lightWidth'+'Id'][_0x83a7a4]['setValue'](this['lightWidth'][_0x83a7a4]);const _0x2dd9f5=_0x4766bb['transformV'+'ector'](new D(0x1cec+-0x1d5f+-0x1*-0x73,-0x17*-0xf1+0x2*-0x36d+-0xecd,0x1*0x18ea+-0xd10+-0x5ed*0x2+0.5));this['lightHeigh'+'t'][_0x83a7a4][-0xfd1*-0x2+0x2*0xc6d+-0x387c]=_0x2dd9f5['x'],this['lightHeigh'+'t'][_0x83a7a4][-0x2*-0x55b+-0x1*-0x626+-0x35f*0x5]=_0x2dd9f5['y'],this['lightHeigh'+'t'][_0x83a7a4][0x1a7*0x11+0xc8d+-0x7*0x5ce]=_0x2dd9f5['z'],this['lightHeigh'+'tId'][_0x83a7a4]['setValue'](this['lightHeigh'+'t'][_0x83a7a4]);}['dispatchOm'+'niLight'](_0x536191,_0x49fa9a,_0xf4db07){const _0x5b1ad9=_0x49fa9a['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0xf4db07]||this['_resolveLi'+'ght'](_0x536191,_0xf4db07),this['lightRadiu'+'sId'][_0xf4db07]['setValue'](_0x49fa9a['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0xf4db07]['setValue'](_0x49fa9a['_colorLine'+'ar']),_0x5b1ad9['getTransla'+'tion'](_0x49fa9a['_position']),this['lightPos'][_0xf4db07][-0x6*-0x71+0xaf8+-0x53*0x2a]=_0x49fa9a['_position']['x'],this['lightPos'][_0xf4db07][-0x281*0x8+-0xd89+-0x1*-0x2192]=_0x49fa9a['_position']['y'],this['lightPos'][_0xf4db07][0x178b+-0x2*-0x957+-0x2a37]=_0x49fa9a['_position']['z'],this['lightPosId'][_0xf4db07]['setValue'](this['lightPos'][_0xf4db07]),_0x49fa9a['shape']!==Ys&&this['setLTCPosi'+'tionalLigh'+'t'](_0x5b1ad9,_0xf4db07),_0x49fa9a['castShadow'+'s']){const _0x452cf4=_0x49fa9a['getRenderD'+'ata'](null,0x25b9+0x1c06*-0x1+-0x9b3);this['lightShado'+'wMapId'][_0xf4db07]['setValue'](_0x452cf4['shadowBuff'+'er']);const _0x1af9e9=_0x49fa9a['_getUnifor'+'mBiasValue'+'s'](_0x452cf4),_0x3b9b96=_0x49fa9a['_shadowRen'+'derParams'];_0x3b9b96['length']=0x30*-0x50+0x160c+0x3*-0x258,_0x3b9b96[0x19c1+0x24a2+-0x3e63*0x1]=_0x49fa9a['_shadowRes'+'olution'],_0x3b9b96[0x2331+0x898+-0x18*0x1d3]=_0x1af9e9['normalBias'],_0x3b9b96[-0x10d2+-0x799+0x1*0x186d]=_0x1af9e9['bias'],_0x3b9b96[0x1531+0x1128+0x132b*-0x2]=(-0x783*0x1+-0xd27+0xb*0x1e1)/_0x49fa9a['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0xf4db07]['setValue'](_0x3b9b96),this['lightShado'+'wIntensity'][_0xf4db07]['setValue'](_0x49fa9a['shadowInte'+'nsity']);const _0x3a58d9=_0x49fa9a['penumbraSi'+'ze']/_0x452cf4['shadowCame'+'ra']['renderTarg'+'et']['width'];this['lightShado'+'wSearchAre'+'aId'][_0xf4db07]['setValue'](_0x3a58d9);const _0x34a1a2=_0x49fa9a['_shadowCam'+'eraParams'];_0x34a1a2['length']=0x20cf+-0xb75+-0xaab*0x2,_0x34a1a2[-0x1*-0x4b3+-0x242a+0x5*0x64b]=0x16*0x14f+0xdeb+-0x2ab5,_0x34a1a2[-0x12b4+0x377+0xf3e]=_0x452cf4['shadowCame'+'ra']['_farClip'],_0x34a1a2[0x584+0xb6+-0x1*0x638]=_0x452cf4['shadowCame'+'ra']['_nearClip'],_0x34a1a2[0x1*-0x150a+0x1*0x1cc2+-0x1*0x7b5]=0x10c*-0xd+0x6*0x179+0x263*0x2,this['lightCamer'+'aParamsId'][_0xf4db07]['setValue'](_0x34a1a2);}_0x49fa9a['_cookie']&&(this['lightCooki'+'eId'][_0xf4db07]['setValue'](_0x49fa9a['_cookie']),this['lightShado'+'wMatrixId'][_0xf4db07]['setValue'](_0x5b1ad9['data']),this['lightCooki'+'eIntId'][_0xf4db07]['setValue'](_0x49fa9a['cookieInte'+'nsity']));}['dispatchSp'+'otLight'](_0x18fc1a,_0x123bf8,_0x2246b6){const _0x3a6e1d=_0x123bf8['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x2246b6]||this['_resolveLi'+'ght'](_0x18fc1a,_0x2246b6),this['lightInAng'+'leId'][_0x2246b6]['setValue'](_0x123bf8['_innerCone'+'AngleCos']),this['lightOutAn'+'gleId'][_0x2246b6]['setValue'](_0x123bf8['_outerCone'+'AngleCos']),this['lightRadiu'+'sId'][_0x2246b6]['setValue'](_0x123bf8['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x2246b6]['setValue'](_0x123bf8['_colorLine'+'ar']),_0x3a6e1d['getTransla'+'tion'](_0x123bf8['_position']),this['lightPos'][_0x2246b6][0x13dd+0x231c+-0x1253*0x3]=_0x123bf8['_position']['x'],this['lightPos'][_0x2246b6][0x181e+-0x25*0xb3+0x1c2]=_0x123bf8['_position']['y'],this['lightPos'][_0x2246b6][0x773*-0x3+0xe3*0x1+0x1578]=_0x123bf8['_position']['z'],this['lightPosId'][_0x2246b6]['setValue'](this['lightPos'][_0x2246b6]),_0x123bf8['shape']!==Ys&&this['setLTCPosi'+'tionalLigh'+'t'](_0x3a6e1d,_0x2246b6),_0x3a6e1d['getY'](_0x123bf8['_direction'])['mulScalar'](-(0x1*0x9d+0x20*-0xa4+0x13e4)),_0x123bf8['_direction']['normalize'](),this['lightDir'][_0x2246b6][-0x5*-0x2cf+0x50c+-0x65d*0x3]=_0x123bf8['_direction']['x'],this['lightDir'][_0x2246b6][0x7df*-0x2+-0x28d+-0x926*-0x2]=_0x123bf8['_direction']['y'],this['lightDir'][_0x2246b6][-0x1*-0x1c87+0x4a8*0x3+-0x2a7d]=_0x123bf8['_direction']['z'],this['lightDirId'][_0x2246b6]['setValue'](this['lightDir'][_0x2246b6]),_0x123bf8['castShadow'+'s']){const _0x93f896=_0x123bf8['getRenderD'+'ata'](null,0x21da+0x17e0+-0x39ba);this['lightShado'+'wMapId'][_0x2246b6]['setValue'](_0x93f896['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x2246b6]['setValue'](_0x93f896['shadowMatr'+'ix']['data']);const _0x1d0e09=_0x123bf8['_getUnifor'+'mBiasValue'+'s'](_0x93f896),_0x5745aa=_0x123bf8['_shadowRen'+'derParams'];_0x5745aa['length']=-0x62b*-0x2+0xb1a+-0x176c,_0x5745aa[-0x23b2+-0x1813+0x56f*0xb]=_0x123bf8['_shadowRes'+'olution'],_0x5745aa[-0x5*-0xf7+0x5cb+-0xa9d]=_0x1d0e09['normalBias'],_0x5745aa[0x466*-0x5+0xcb6+0x94a]=_0x1d0e09['bias'],_0x5745aa[-0xf79+0x2473+0x3*-0x6fd]=(0x502+-0x246f*-0x1+-0x2970)/_0x123bf8['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x2246b6]['setValue'](_0x5745aa),this['lightShado'+'wIntensity'][_0x2246b6]['setValue'](_0x123bf8['shadowInte'+'nsity']);const _0x12a2b6=_0x123bf8['penumbraSi'+'ze']/_0x93f896['shadowCame'+'ra']['renderTarg'+'et']['width'],_0x2385d3=_0x93f896['shadowCame'+'ra']['_fov']*Math['PI']/(-0x1455*0x1+0x1881+0x1bc*-0x2),_0x2912a9=(-0xf*-0x3+0x2*-0x713+-0x2*-0x6fd)/Math['tan'](_0x2385d3/(-0xe21*-0x1+-0xa7*-0x2f+-0x2cc8));this['lightShado'+'wSearchAre'+'aId'][_0x2246b6]['setValue'](_0x12a2b6*_0x2912a9);const _0x384d16=_0x123bf8['_shadowCam'+'eraParams'];_0x384d16['length']=0x237e+-0x1*-0x45b+-0x27d5,_0x384d16[-0x1*0x1c4e+0x2127+-0x4d9]=0x135*0x1d+0x5*-0x161+-0x1c1c,_0x384d16[0x81b+0xd7f+-0x1599*0x1]=_0x93f896['shadowCame'+'ra']['_farClip'],_0x384d16[0x1eb3+0x4*0x246+-0x27c9]=_0x93f896['shadowCame'+'ra']['_nearClip'],_0x384d16[-0xc4f+-0x809+0x243*0x9]=0x11d*-0x1d+-0x20dc*0x1+-0x147*-0x33,this['lightCamer'+'aParamsId'][_0x2246b6]['setValue'](_0x384d16);}if(_0x123bf8['_cookie']){if(!_0x123bf8['castShadow'+'s']){const _0x4078d4=Wn['evalSpotCo'+'okieMatrix'](_0x123bf8);this['lightShado'+'wMatrixId'][_0x2246b6]['setValue'](_0x4078d4['data']);}this['lightCooki'+'eId'][_0x2246b6]['setValue'](_0x123bf8['_cookie']),this['lightCooki'+'eIntId'][_0x2246b6]['setValue'](_0x123bf8['cookieInte'+'nsity']),_0x123bf8['_cookieTra'+'nsform']&&(_0x123bf8['_cookieTra'+'nsformUnif'+'orm'][-0x18f3+-0x45b+0x1d4e]=_0x123bf8['_cookieTra'+'nsform']['x'],_0x123bf8['_cookieTra'+'nsformUnif'+'orm'][0x2f6*-0xc+0xa8b*0x3+-0x32*-0x14]=_0x123bf8['_cookieTra'+'nsform']['y'],_0x123bf8['_cookieTra'+'nsformUnif'+'orm'][-0x23ba+-0x260*0x2+0x287c]=_0x123bf8['_cookieTra'+'nsform']['z'],_0x123bf8['_cookieTra'+'nsformUnif'+'orm'][0xa9b+0x3a*0x65+-0x10bd*0x2]=_0x123bf8['_cookieTra'+'nsform']['w'],this['lightCooki'+'eMatrixId'][_0x2246b6]['setValue'](_0x123bf8['_cookieTra'+'nsformUnif'+'orm']),_0x123bf8['_cookieOff'+'setUniform'][0x24f7*0x1+0x1a72+-0x3f69]=_0x123bf8['_cookieOff'+'set']['x'],_0x123bf8['_cookieOff'+'setUniform'][-0x347+-0x11*0x213+0x27*0xfd]=_0x123bf8['_cookieOff'+'set']['y'],this['lightCooki'+'eOffsetId'][_0x2246b6]['setValue'](_0x123bf8['_cookieOff'+'setUniform']));}}['dispatchLo'+'calLights'](_0x434625,_0x2ff515,_0x310b3c){let _0x2495ae=_0x310b3c;const _0xdd5b9d=this['device']['scope'],_0x5592ae=_0x434625[Ke],_0x192c62=_0x5592ae['length'];for(let _0x4aa4f9=0x25*-0x7e+0x1e59+-0xc23;_0x4aa4f9<_0x192c62;_0x4aa4f9++){const _0x1600dc=_0x5592ae[_0x4aa4f9];_0x1600dc['mask']&_0x2ff515&&(this['dispatchOm'+'niLight'](_0xdd5b9d,_0x1600dc,_0x2495ae),_0x2495ae++);}const _0x2889a2=_0x434625[Ze],_0x21aa29=_0x2889a2['length'];for(let _0x457350=-0x1*0x2501+-0x2*-0x44b+0x1c6b;_0x457350<_0x21aa29;_0x457350++){const _0x3ac957=_0x2889a2[_0x457350];_0x3ac957['mask']&_0x2ff515&&(this['dispatchSp'+'otLight'](_0xdd5b9d,_0x3ac957,_0x2495ae),_0x2495ae++);}}['renderForw'+'ardPrepare'+'Materials'](_0x507909,_0x4f10f4,_0x588fa8,_0x52e971,_0xe70eae,_0x34b200){const _0x12cdf4=_0x507909['fogParams']??this['scene']['fog'],_0x26eeda=_0x507909['shaderPara'+'ms'];_0x26eeda['fog']=_0x12cdf4['type'],_0x26eeda['srgbRender'+'Target']=(_0x4f10f4==null?void(0x816+0x1*0x9d1+-0x11e7):_0x4f10f4['isColorBuf'+'ferSrgb'](0xe1c+-0x21cf+0x13b3))??!(0x17*-0x1a9+-0x17eb+0xd*0x4c7);const _0x3cefc9=(_0x5cf2af,_0x17cec6,_0x26566b,_0x28ab33)=>{Nr['drawCalls']['push'](_0x5cf2af),Nr['shaderInst'+'ances']['push'](_0x17cec6),Nr['isNewMater'+'ial']['push'](_0x26566b),Nr['lightMaskC'+'hanged']['push'](_0x28ab33);};Nr['clear']();const _0xedd02=this['device'],_0x36e34b=this['scene'],_0x3b564e=_0x36e34b['clusteredL'+'ightingEna'+'bled'],_0x3efd56=(_0xe70eae==null?void(-0x17*-0x27+0x17d1*-0x1+0x1450):_0xe70eae['getLightHa'+'sh'](_0x3b564e))??-0x1b*-0xa9+-0x21f5+0x127*0xe;let _0x448086=null,_0x1271b5,_0x41eaa6;const _0x3c1bbd=_0x588fa8['length'];for(let _0x18f4c8=-0x1740+0x1344+0x3fc;_0x18f4c8<_0x3c1bbd;_0x18f4c8++){const _0x4bfbbf=_0x588fa8[_0x18f4c8];if(_0x507909===Ni['skipRender'+'Camera']){if(Ni['_skipRende'+'rCounter']>=Ni['skipRender'+'After'])continue;Ni['_skipRende'+'rCounter']++;}if(_0xe70eae){if(_0xe70eae['_skipRende'+'rCounter']>=_0xe70eae['skipRender'+'After'])continue;_0xe70eae['_skipRende'+'rCounter']++;}const _0xa743a9=_0x4bfbbf['instancing'+'Data'];if(_0xa743a9&&_0xa743a9['count']<=0x68f+-0x1e12+0x1783*0x1)continue;_0x4bfbbf['ensureMate'+'rial'](_0xedd02);const _0x2c415b=_0x4bfbbf['material'],_0x17f543=_0x4bfbbf['_shaderDef'+'s'],_0x5c1868=_0x4bfbbf['mask'];_0x2c415b&&_0x2c415b===_0x448086&&_0x17f543!==_0x1271b5&&(_0x448086=null),_0x2c415b!==_0x448086&&(this['_materialS'+'witches']++,_0x2c415b['_scene']=_0x36e34b,_0x2c415b['dirty']&&(Q['pushGpuMar'+'ker'](_0xedd02,'Node:\x20'+_0x4bfbbf['node']['name']+(',\x20Material'+':\x20')+_0x2c415b['name']),_0x2c415b['updateUnif'+'orms'](_0xedd02,_0x36e34b),_0x2c415b['dirty']=!(0x2*0x9fd+0x1430*-0x1+0x37),Q['popGpuMark'+'er'](_0xedd02)));const _0x14e326=_0x4bfbbf['getShaderI'+'nstance'](_0x34b200,_0x3efd56,_0x36e34b,_0x26eeda,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x52e971);_0x3cefc9(_0x4bfbbf,_0x14e326,_0x2c415b!==_0x448086,!_0x448086||_0x5c1868!==_0x41eaa6),_0x448086=_0x2c415b,_0x1271b5=_0x17f543,_0x41eaa6=_0x5c1868;}return Nr;}['renderForw'+'ardInterna'+'l'](_0x57cad1,_0x4bc960,_0x301a45,_0x58bb8f,_0x49f4a5,_0x39926c,_0x3a1f1f){var _0x3dbf75,_0x1a6c83;const _0x143426=this['device'],_0x37a9b5=this['scene'],_0x2d3e03=-0x15e7+-0x3*0x581+0x266b<<_0x58bb8f,_0x5501d1=_0x39926c?-(-0x209e+0x4b8*0x1+0x1be7):-0xa47+-0xc17*-0x1+-0x1cf,_0x5d9e9a=_0x37a9b5['clusteredL'+'ightingEna'+'bled'],_0x59c251=(_0x3dbf75=_0x57cad1['xr'])!=null&&_0x3dbf75['session']&&_0x57cad1['xr']['views']['list']['length']?_0x57cad1['xr']['views']['list']:null,_0x2a1293=_0x4bc960['drawCalls']['length'];for(let _0x4a8412=0x1c1f+0x17ef*0x1+0x3*-0x115a;_0x4a8412<_0x2a1293;_0x4a8412++){const _0x11471e=_0x4bc960['drawCalls'][_0x4a8412],_0x5e1ffa=_0x4bc960['isNewMater'+'ial'][_0x4a8412],_0x1f0ebe=_0x4bc960['lightMaskC'+'hanged'][_0x4a8412],_0x54832d=_0x4bc960['shaderInst'+'ances'][_0x4a8412],_0xdcf852=_0x11471e['material'],_0x5d1032=_0x11471e['mask'];if(_0x54832d['shader']['failed'])continue;if(_0x5e1ffa){if(_0x143426['setShader'](_0x54832d['shader'],!(-0x1*-0x161e+-0x1e4a+0x82d)),_0xdcf852['setParamet'+'ers'](_0x143426),_0x1f0ebe){const _0x5bae51=this['dispatchDi'+'rectLights'](_0x301a45[ve],_0x5d1032,_0x57cad1);_0x5d9e9a||this['dispatchLo'+'calLights'](_0x301a45,_0x5d1032,_0x5bae51);}this['alphaTestI'+'d']['setValue'](_0xdcf852['alphaTest']),_0x143426['setBlendSt'+'ate'](_0xdcf852['blendState']),_0x143426['setDepthSt'+'ate'](_0xdcf852['depthState']),_0x143426['setAlphaTo'+'Coverage'](_0xdcf852['alphaToCov'+'erage']);}Q['pushGpuMar'+'ker'](_0x143426,'Node:\x20'+_0x11471e['node']['name']+(',\x20Material'+':\x20')+_0xdcf852['name']),this['setupCullM'+'ode'](_0x57cad1['_cullFaces'],_0x5501d1,_0x11471e);const _0x41cced=_0x11471e['stencilFro'+'nt']??_0xdcf852['stencilFro'+'nt'],_0x1dd062=_0x11471e['stencilBac'+'k']??_0xdcf852['stencilBac'+'k'];_0x143426['setStencil'+'State'](_0x41cced,_0x1dd062),_0x11471e['setParamet'+'ers'](_0x143426,_0x2d3e03),_0x143426['scope']['resolve']('meshInstan'+'ceId')['setValue'](_0x11471e['id']);const _0x66a5d9=_0x11471e['mesh'];this['setVertexB'+'uffers'](_0x143426,_0x66a5d9),this['setMorphin'+'g'](_0x143426,_0x11471e['morphInsta'+'nce']),this['setSkinnin'+'g'](_0x143426,_0x11471e);const _0x583474=_0x11471e['instancing'+'Data'];_0x583474&&_0x143426['setVertexB'+'uffer'](_0x583474['vertexBuff'+'er']),this['setMeshIns'+'tanceMatri'+'ces'](_0x11471e,!(-0x512*0x2+-0x1052+-0x1a76*-0x1)),this['setupMeshU'+'niformBuff'+'ers'](_0x54832d);const _0x54a656=_0x11471e['renderStyl'+'e'],_0x26e7a5=_0x66a5d9['indexBuffe'+'r'][_0x54a656];_0x49f4a5==null||_0x49f4a5(_0x11471e,_0x4a8412);const _0x3691df=(_0x1a6c83=_0x11471e['indirectDa'+'ta'])==null?void(-0x8df+-0x21b0+0x1*0x2a8f):_0x1a6c83['get'](_0x57cad1);if(_0x59c251)for(let _0x2d5a03=-0x20b5+-0x14b*0x1d+0x4634;_0x2d5a03<_0x59c251['length'];_0x2d5a03++){const _0x3629ec=_0x59c251[_0x2d5a03];if(_0x143426['setViewpor'+'t'](_0x3629ec['viewport']['x'],_0x3629ec['viewport']['y'],_0x3629ec['viewport']['z'],_0x3629ec['viewport']['w']),_0x143426['supportsUn'+'iformBuffe'+'rs']){const _0x45de66=_0x3a1f1f[_0x2d5a03];_0x143426['setBindGro'+'up'](rl,_0x45de66);}else this['setupViewU'+'niforms'](_0x3629ec,_0x2d5a03);const _0xd45399=_0x2d5a03===0x2170+0x1*0x197+-0x2307,_0x4e2f74=_0x2d5a03===_0x59c251['length']-(0x1cf*-0x13+0x1fd6+0x288);_0x143426['draw'](_0x66a5d9['primitive'][_0x54a656],_0x26e7a5,_0x583474==null?void(-0x16a7*-0x1+0x1160+0x2807*-0x1):_0x583474['count'],_0x3691df,_0xd45399,_0x4e2f74),this['_forwardDr'+'awCalls']++,_0x11471e['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;}else _0x143426['draw'](_0x66a5d9['primitive'][_0x54a656],_0x26e7a5,_0x583474==null?void(0x13eb+-0x3da+0x1*-0x1011):_0x583474['count'],_0x3691df),this['_forwardDr'+'awCalls']++,_0x11471e['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;_0x4a8412<_0x2a1293-(-0x3*0x481+-0x18c*0x11+0x27d0)&&!_0x4bc960['isNewMater'+'ial'][_0x4a8412+(0x87b+0x1c40+-0x24ba)]&&_0xdcf852['setParamet'+'ers'](_0x143426,_0x11471e['parameters']),Q['popGpuMark'+'er'](_0x143426);}}['renderForw'+'ard'](_0x5e616f,_0x5ba26d,_0x2ac43f,_0x512af3,_0x55d5cc,_0x46a199,_0x28d5fc,_0x5ab340,_0x2cf2bf){const _0x4c91da=de(),_0x3bdbab=this['renderForw'+'ardPrepare'+'Materials'](_0x5e616f,_0x5ba26d,_0x2ac43f,_0x512af3,_0x28d5fc,_0x55d5cc);this['renderForw'+'ardInterna'+'l'](_0x5e616f,_0x3bdbab,_0x512af3,_0x55d5cc,_0x46a199,_0x5ab340,_0x2cf2bf),Nr['clear'](),this['_forwardTi'+'me']+=de()-_0x4c91da;}['renderForw'+'ardLayer'](_0x2a8318,_0x43a2e5,_0x1b699b,_0x2f7678,_0x1b2100,_0x572959,_0x5dff6a={}){const {scene:_0x298ffd,device:_0x4f715c}=this,_0x2c4b8e=_0x298ffd['clusteredL'+'ightingEna'+'bled'];this['setupViewp'+'ort'](_0x2a8318,_0x43a2e5);let _0x418802,_0x1dbf4e;if(_0x1b699b){const _0x503266=de();_0x1b699b['sortVisibl'+'e'](_0x2a8318,_0x2f7678),this['_sortTime']+=de()-_0x503266;const _0x5e540e=_0x1b699b['getCulledI'+'nstances'](_0x2a8318);_0x418802=_0x2f7678?_0x5e540e['transparen'+'t']:_0x5e540e['opaque'],_0x298ffd['immediate']['onPreRende'+'rLayer'](_0x1b699b,_0x418802,_0x2f7678),_0x1b699b['requiresLi'+'ghtCube']&&(this['lightCube']['update'](_0x298ffd['ambientLig'+'ht'],_0x1b699b['_lights']),this['constantLi'+'ghtCube']['setValue'](this['lightCube']['colors'])),_0x1dbf4e=_0x1b699b['splitLight'+'s'];}else _0x418802=_0x5dff6a['meshInstan'+'ces'],_0x1dbf4e=_0x5dff6a['splitLight'+'s']??Qb;if(w['assert'](_0x418802,'Either\x20lay'+'er\x20or\x20opti'+'ons.meshIn'+'stances\x20mu'+'st\x20be\x20prov'+'ided'),_0x2c4b8e){const _0x25e5a9=_0x5dff6a['lightClust'+'ers']??this['worldClust'+'ersAllocat'+'or']['empty'];_0x25e5a9['activate'](),_0x1b699b&&!this['clustersDe'+'bugRendere'+'d']&&_0x298ffd['lighting']['debugLayer']===_0x1b699b['id']&&(this['clustersDe'+'bugRendere'+'d']=!(-0x232b+0x8e*-0x5+0x25f1),hu['render'](_0x25e5a9,this['scene']));}_0x298ffd['_activeCam'+'era']=_0x2a8318;const _0x57b2d1=_0x2a8318['fogParams']??this['scene']['fog'];this['setFogCons'+'tants'](_0x57b2d1);const _0x27de99=this['setCameraU'+'niforms'](_0x2a8318,_0x43a2e5);_0x4f715c['supportsUn'+'iformBuffe'+'rs']&&this['setupViewU'+'niformBuff'+'ers'](_0x572959,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x27de99);const _0x51915a=_0x5dff6a['clearColor']??!(-0x1222+-0x74b*-0x2+0x38d),_0x51e400=_0x5dff6a['clearDepth']??!(0x17*0x119+0x1939*-0x1+0x1*-0x5),_0x3cc6ed=_0x5dff6a['clearStenc'+'il']??!(0x6f1*0x4+0x1ed5*-0x1+-0x6*-0x83);(_0x51915a||_0x51e400||_0x3cc6ed)&&this['clear'](_0x2a8318,_0x51915a,_0x51e400,_0x3cc6ed);const _0x12dbb1=!!(_0x2a8318['_flipFaces']^(_0x43a2e5==null?void(-0x129b+0x1ae7+-0x84c):_0x43a2e5['flipY'])),_0x376d5f=this['_forwardDr'+'awCalls'];this['renderForw'+'ard'](_0x2a8318,_0x43a2e5,_0x418802,_0x1dbf4e,_0x1b2100,null,_0x1b699b,_0x12dbb1,_0x572959),_0x1b699b&&(_0x1b699b['_forwardDr'+'awCalls']+=this['_forwardDr'+'awCalls']-_0x376d5f);}['setFogCons'+'tants'](_0x2b2666){if(_0x2b2666['type']!==Kn){or['linear'](_0x2b2666['color']);const _0x2c463d=this['fogColor'];_0x2c463d[0x167*-0x11+-0x132c*-0x1+0x4ab]=or['r'],_0x2c463d[0x1*-0x2209+-0x182*-0x11+-0x21a*-0x4]=or['g'],_0x2c463d[-0x9*0x3eb+0x205e+-0x1*-0x2e7]=or['b'],this['fogColorId']['setValue'](_0x2c463d),_0x2b2666['type']===Iw?(this['fogStartId']['setValue'](_0x2b2666['start']),this['fogEndId']['setValue'](_0x2b2666['end'])):this['fogDensity'+'Id']['setValue'](_0x2b2666['density']);}}['setSceneCo'+'nstants'](){const _0x159066=this['scene'];this['dispatchGl'+'obalLights'](_0x159066);const _0x32f689=this['device'];this['_screenSiz'+'e'][-0xb*0x13f+-0x33e*0x4+0x1*0x1aad]=_0x32f689['width'],this['_screenSiz'+'e'][0x19fa+-0x156*0x15+0x215]=_0x32f689['height'],this['_screenSiz'+'e'][0x1*-0x1dc2+-0x7*0xb3+0x22a9]=(0x64c+-0x49e+0x1*-0x1ad)/_0x32f689['width'],this['_screenSiz'+'e'][0x1*-0x1ab1+-0x7ea+0x3*0xb8a]=(0x1*0x1947+0x1*-0xded+0x5*-0x245)/_0x32f689['height'],this['screenSize'+'Id']['setValue'](this['_screenSiz'+'e']),this['pcssDiskSa'+'mplesId']['setValue'](this['pcssDiskSa'+'mples']),this['pcssSphere'+'SamplesId']['setValue'](this['pcssSphere'+'Samples']);}['buildFrame'+'Graph'](_0x50be04,_0x1a4e89){const _0x3227ff=this['scene'];if(_0x50be04['reset'](),_0x3227ff['clusteredL'+'ightingEna'+'bled']){const {shadowsEnabled:_0x355b85,cookiesEnabled:_0xd6a607}=_0x3227ff['lighting'];this['_renderPas'+'sUpdateClu'+'stered']['update'](_0x50be04,_0x355b85,_0xd6a607,this['lights'],this['localLight'+'s']),_0x50be04['addRenderP'+'ass'](this['_renderPas'+'sUpdateClu'+'stered']);}else this['_shadowRen'+'dererLocal']['buildNonCl'+'usteredRen'+'derPasses'](_0x50be04,this['localLight'+'s']);let _0x413ed7=0x645+-0x251b+0x1*0x1ed6,_0x2737d7=!(0x80*0x1e+0x18fd*0x1+-0x27fd),_0x5454f7=null;const _0x5011d2=_0x1a4e89['_renderAct'+'ions'];for(let _0x3889be=_0x413ed7;_0x3889be<_0x5011d2['length'];_0x3889be++){const _0x404da6=_0x5011d2[_0x3889be],{layer:_0x1d45ba,camera:_0x2a95fa}=_0x404da6;if(_0x404da6['useCameraP'+'asses'])w['call'](()=>{_0x2a95fa['postEffect'+'s']['effects']['length']>-0x26c+0xf*0x23+0x5f&&w['warnOnce']('Camera\x20\x27'+_0x2a95fa['entity']['name']+('\x27\x20uses\x20ren'+'der\x20passes'+',\x20which\x20ar'+'e\x20not\x20comp'+'atible\x20wit'+'h\x20post-eff'+'ects\x20scrip'+'ts.\x20Render'+'ing\x20of\x20the'+'\x20post-effe'+'cts\x20is\x20ign'+'ored,\x20but\x20'+'they\x20shoul'+'d\x20not\x20be\x20a'+'ttached\x20to'+'\x20the\x20camer'+'a.'));}),_0x2a95fa['camera']['renderPass'+'es']['forEach'](_0x2740b3=>{_0x50be04['addRenderP'+'ass'](_0x2740b3);});else{const _0x445e38=_0x1d45ba['id']===ps,_0x1e73d4=_0x445e38&&(_0x2a95fa['renderScen'+'eColorMap']||_0x2a95fa['renderScen'+'eDepthMap']);_0x2737d7&&(_0x2737d7=!(-0xdb7+0x15*0xfb+-0x6df),_0x413ed7=_0x3889be,_0x5454f7=_0x404da6['renderTarg'+'et']);const _0x584993=_0x5011d2[_0x3889be+(0xc*-0x27b+0x1737+0x68e)],_0x26b7b9=(_0x584993?!_0x584993['useCameraP'+'asses']&&_0x584993['layer']['id']===ps:!(-0x199*0x13+-0xd6d+0xb*0x3fb))&&(_0x2a95fa['renderScen'+'eColorMap']||_0x2a95fa['renderScen'+'eDepthMap']),_0x3f96bf=_0x584993?_0x584993['firstCamer'+'aUse']&&this['cameraDirS'+'hadowLight'+'s']['has'](_0x584993['camera']['camera']):!(-0x1*0x2396+0x199f+0x16*0x74);if(!_0x584993||_0x584993['renderTarg'+'et']!==_0x5454f7||_0x3f96bf||_0x26b7b9||_0x1e73d4){if(_0x445e38&&_0x413ed7===_0x3889be||this['addMainRen'+'derPass'](_0x50be04,_0x1a4e89,_0x5454f7,_0x413ed7,_0x3889be),_0x445e38){if(_0x2a95fa['renderScen'+'eColorMap']){const _0x5b17bf=_0x2a95fa['camera']['renderPass'+'ColorGrab'];_0x5b17bf['source']=_0x2a95fa['renderTarg'+'et'],_0x50be04['addRenderP'+'ass'](_0x5b17bf);}_0x2a95fa['renderScen'+'eDepthMap']&&_0x50be04['addRenderP'+'ass'](_0x2a95fa['camera']['renderPass'+'DepthGrab']);}if(_0x404da6['triggerPos'+'tprocess']&&(_0x2a95fa!=null&&_0x2a95fa['onPostproc'+'essing'])){const _0x10a14e=new Zb(this['device'],this,_0x404da6);_0x50be04['addRenderP'+'ass'](_0x10a14e);}_0x2737d7=!(0x1*-0x2c8+-0x1526+0x17ee);}}}}['addMainRen'+'derPass'](_0x563476,_0x4dfb5d,_0x13deb0,_0x475360,_0x3ed85f){const _0x38e66a=new Kb(this['device'],_0x4dfb5d,this['scene'],this);_0x38e66a['init'](_0x13deb0);const _0x51e3bf=_0x4dfb5d['_renderAct'+'ions'];for(let _0x2f06a7=_0x475360;_0x2f06a7<=_0x3ed85f;_0x2f06a7++)_0x38e66a['addRenderA'+'ction'](_0x51e3bf[_0x2f06a7]);_0x563476['addRenderP'+'ass'](_0x38e66a);}['update'](_0x25837f){this['frameUpdat'+'e'](),this['shadowRend'+'erer']['frameUpdat'+'e'](),this['scene']['_updateSky'+'Mesh'](),this['updateLaye'+'rCompositi'+'on'](_0x25837f),this['collectLig'+'hts'](_0x25837f),this['beginFrame'](_0x25837f),this['setSceneCo'+'nstants'](),this['cullCompos'+'ition'](_0x25837f),this['gpuUpdate'](this['processing'+'MeshInstan'+'ces']);}};h(Ni,'skipRender'+'Camera',null),h(Ni,'_skipRende'+'rCounter',0xf03+-0x2*-0xa25+-0x234d),h(Ni,'skipRender'+'After',-0x24d5+-0x13*-0x19f+-0x608*-0x1);let fl=Ni,uf=-0xa74+0x1e79+-0x1405;const co=[],hc=new Set();function tA(_0x518bb5,_0x2bb17e){return _0x518bb5['drawOrder']-_0x2bb17e['drawOrder'];}function sA(_0x13b598,_0x4d2bb3){const _0x43899a=_0x13b598['_sortKeyFo'+'rward'],_0x4290e0=_0x4d2bb3['_sortKeyFo'+'rward'];return _0x43899a===_0x4290e0?_0x4d2bb3['mesh']['id']-_0x13b598['mesh']['id']:_0x4290e0-_0x43899a;}function iA(_0xd47757,_0x5e6c70){return _0x5e6c70['_sortKeyDy'+'namic']-_0xd47757['_sortKeyDy'+'namic'];}function rA(_0x36329e,_0x2c08c1){return _0x36329e['_sortKeyDy'+'namic']-_0x2c08c1['_sortKeyDy'+'namic'];}const aA=[null,tA,sA,iA,rA];class nA{constructor(){h(this,'opaque',[]),h(this,'transparen'+'t',[]);}}class Ot{constructor(_0x5afce6={}){h(this,'meshInstan'+'ces',[]),h(this,'meshInstan'+'cesSet',new Set()),h(this,'shadowCast'+'ers',[]),h(this,'shadowCast'+'ersSet',new Set()),h(this,'_visibleIn'+'stances',new WeakMap()),h(this,'_lights',[]),h(this,'_lightsSet',new Set()),h(this,'_clustered'+'LightsSet',new Set()),h(this,'_splitLigh'+'ts',[[],[],[]]),h(this,'_splitLigh'+'tsDirty',!(-0x5fa+-0x1*-0x355+0x2a5)),h(this,'requiresLi'+'ghtCube',!(0x87*0x11+0x8bf+-0x11b5)),h(this,'cameras',[]),h(this,'camerasSet',new Set()),h(this,'_dirtyComp'+'osition',!(0x884+-0x2*0x123b+0x1bf3)),(_0x5afce6['id']!==void(-0x1ee6+-0x155c+0x3442)?(this['id']=_0x5afce6['id'],uf=Math['max'](this['id']+(0x216a*-0x1+0x777+0x19f4),uf)):this['id']=uf++,this['name']=_0x5afce6['name'],this['_enabled']=_0x5afce6['enabled']??!(0x1b9d+0xc41+-0x12*0x237),this['_refCounte'+'r']=this['_enabled']?0x3df*-0x9+-0xe3*-0x1b+-0xae7*-0x1:-0x26fd*0x1+0x8ec*0x1+-0x1e11*-0x1,this['opaqueSort'+'Mode']=_0x5afce6['opaqueSort'+'Mode']??Yw,this['transparen'+'tSortMode']=_0x5afce6['transparen'+'tSortMode']??m_,_0x5afce6['renderTarg'+'et']&&(this['renderTarg'+'et']=_0x5afce6['renderTarg'+'et']),this['_clearColo'+'rBuffer']=!!_0x5afce6['clearColor'+'Buffer'],this['_clearDept'+'hBuffer']=!!_0x5afce6['clearDepth'+'Buffer'],this['_clearSten'+'cilBuffer']=!!_0x5afce6['clearStenc'+'ilBuffer'],this['onEnable']=_0x5afce6['onEnable'],this['onDisable']=_0x5afce6['onDisable'],this['_enabled']&&this['onEnable']&&this['onEnable'](),this['customSort'+'Callback']=null,this['customCalc'+'ulateSortV'+'alues']=null,this['_lightHash']=-0x26b2+0x1c11+-0x1*-0xaa1,this['_lightHash'+'Dirty']=!(0x11*-0x103+-0x16f2+0x2826),this['_lightIdHa'+'sh']=0x86*-0x20+-0x3f9*0x6+0x2896,this['_lightIdHa'+'shDirty']=!(0xbaa+0x13f+0x4*-0x33a),this['skipRender'+'After']=Number['MAX_VALUE'],this['_skipRende'+'rCounter']=0x2519*-0x1+0x1*-0x15c9+0x1*0x3ae2,this['_renderTim'+'e']=0x35b*0x2+-0x949*-0x1+-0xfff,this['_forwardDr'+'awCalls']=-0x14*-0x1d0+-0x1f3e+0x1*-0x502,this['_shadowDra'+'wCalls']=-0x13c3+0xe*-0x1c6+0x2c97,this['_shaderVer'+'sion']=-(0x102e+-0x1aa6+0x1*0xa79));}set['enabled'](_0x4d60bb){_0x4d60bb!==this['_enabled']&&(this['_dirtyComp'+'osition']=!(-0x1851+-0x21*0x4f+-0x8a0*-0x4),this['_enabled']=_0x4d60bb,_0x4d60bb?(this['incrementC'+'ounter'](),this['onEnable']&&this['onEnable']()):(this['decrementC'+'ounter'](),this['onDisable']&&this['onDisable']()));}get['enabled'](){return this['_enabled'];}set['clearColor'+'Buffer'](_0x54fe54){this['_clearColo'+'rBuffer']=_0x54fe54,this['_dirtyComp'+'osition']=!(-0x1*0x9fc+-0xdfa+0x17f6);}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'+'Buffer'](_0x604e5b){this['_clearDept'+'hBuffer']=_0x604e5b,this['_dirtyComp'+'osition']=!(0x1*0x2537+-0x6dd+-0x2a*0xb9);}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'ilBuffer'](_0x10d7da){this['_clearSten'+'cilBuffer']=_0x10d7da,this['_dirtyComp'+'osition']=!(-0x2*-0x7+-0x1625+-0x91*-0x27);}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}get['hasCluster'+'edLights'](){return this['_clustered'+'LightsSet']['size']>0x8fd+0x35*-0xd+-0x64c;}get['clusteredL'+'ightsSet'](){return this['_clustered'+'LightsSet'];}['incrementC'+'ounter'](){this['_refCounte'+'r']===-0x2*-0x29f+-0xda3+0x865&&(this['_enabled']=!(-0xb48+0x7d7+0x371),this['onEnable']&&this['onEnable']()),this['_refCounte'+'r']++;}['decrementC'+'ounter'](){if(this['_refCounte'+'r']===0x10f9+0x10f1*0x1+0x21e9*-0x1)this['_enabled']=!(0x1*0x20f5+-0x49+-0x20ab),this['onDisable']&&this['onDisable']();else{if(this['_refCounte'+'r']===0x25*0x10d+0x2346+-0x1*0x4a27){w['warn']('Trying\x20to\x20'+'decrement\x20'+'layer\x20coun'+'ter\x20below\x20'+'0');return;}}this['_refCounte'+'r']--;}['addMeshIns'+'tances'](_0x447cc3,_0x1e2fdd){const _0x47aea2=this['meshInstan'+'ces'],_0x5382de=this['meshInstan'+'cesSet'];for(let _0x445a59=0x26e1+0x1*0x805+-0x2ee6;_0x445a59<_0x447cc3['length'];_0x445a59++){const _0x59894b=_0x447cc3[_0x445a59];_0x5382de['has'](_0x59894b)||(_0x47aea2['push'](_0x59894b),_0x5382de['add'](_0x59894b),hc['add'](_0x59894b['material']));}if(_0x1e2fdd||this['addShadowC'+'asters'](_0x447cc3),hc['size']>0x58a+-0x217a+0x1bf0){const _0x3a3e3f=this['_shaderVer'+'sion'];hc['forEach'](_0x1fb076=>{_0x3a3e3f>=0x151d+0x2287+-0x4a3*0xc&&_0x1fb076['_shaderVer'+'sion']!==_0x3a3e3f&&(_0x1fb076['getShaderV'+'ariant']!==tr['prototype']['getShaderV'+'ariant']&&_0x1fb076['clearVaria'+'nts'](),_0x1fb076['_shaderVer'+'sion']=_0x3a3e3f);}),hc['clear']();}}['removeMesh'+'Instances'](_0x50503c,_0xe199a){const _0x1405a1=this['meshInstan'+'ces'],_0x5da4f0=this['meshInstan'+'cesSet'];for(let _0x165209=-0xdc7+-0x4a2*-0x8+-0x1749;_0x165209<_0x50503c['length'];_0x165209++){const _0x412662=_0x50503c[_0x165209];if(_0x5da4f0['has'](_0x412662)){_0x5da4f0['delete'](_0x412662);const _0x36890c=_0x1405a1['indexOf'](_0x412662);_0x36890c>=-0xdec+0x1827+-0x9*0x123&&_0x1405a1['splice'](_0x36890c,0x4fe+0x26cf+-0x2bcc);}}_0xe199a||this['removeShad'+'owCasters'](_0x50503c);}['addShadowC'+'asters'](_0x56a9ea){const _0x3dc5c4=this['shadowCast'+'ers'],_0x22e42c=this['shadowCast'+'ersSet'];for(let _0x4442dd=-0x2*-0xc61+-0x1839+-0x1*0x89;_0x4442dd<_0x56a9ea['length'];_0x4442dd++){const _0x1840e8=_0x56a9ea[_0x4442dd];_0x1840e8['castShadow']&&!_0x22e42c['has'](_0x1840e8)&&(_0x22e42c['add'](_0x1840e8),_0x3dc5c4['push'](_0x1840e8));}}['removeShad'+'owCasters'](_0x34f104){const _0x67044a=this['shadowCast'+'ers'],_0xea6222=this['shadowCast'+'ersSet'];for(let _0x5dbbd7=0xf7e+0x1*-0x188d+0x1*0x90f;_0x5dbbd7<_0x34f104['length'];_0x5dbbd7++){const _0x55152b=_0x34f104[_0x5dbbd7];if(_0xea6222['has'](_0x55152b)){_0xea6222['delete'](_0x55152b);const _0x4c490c=_0x67044a['indexOf'](_0x55152b);_0x4c490c>=-0x625*-0x3+0x107c+-0x22eb&&_0x67044a['splice'](_0x4c490c,0x1607+0x17*0x71+0x202d*-0x1);}}}['clearMeshI'+'nstances'](_0x136eb0=!(0x39*0xa6+0x8f*0x5+-0x27c0)){this['meshInstan'+'ces']['length']=0x21ef*0x1+-0xcf4+0x14fb*-0x1,this['meshInstan'+'cesSet']['clear'](),_0x136eb0||(this['shadowCast'+'ers']['length']=0x5e*0x45+-0x1*0x3a1+-0x15b5,this['shadowCast'+'ersSet']['clear']());}['markLights'+'Dirty'](){this['_lightHash'+'Dirty']=!(0x14f6+0xd*0x49+-0x3*0x839),this['_lightIdHa'+'shDirty']=!(0x3*-0x25b+-0x11*-0x20f+-0x1bee),this['_splitLigh'+'tsDirty']=!(0x1bc5+0x2a*0x57+-0x2a0b);}['hasLight'](_0x2e7437){return this['_lightsSet']['has'](_0x2e7437);}['addLight'](_0x1f8687){const _0x23d12e=_0x1f8687['light'];this['_lightsSet']['has'](_0x23d12e)||(this['_lightsSet']['add'](_0x23d12e),this['_lights']['push'](_0x23d12e),this['markLights'+'Dirty']()),_0x23d12e['type']!==ve&&this['_clustered'+'LightsSet']['add'](_0x23d12e);}['removeLigh'+'t'](_0x528dae){const _0xdd83bf=_0x528dae['light'];this['_lightsSet']['has'](_0xdd83bf)&&(this['_lightsSet']['delete'](_0xdd83bf),this['_lights']['splice'](this['_lights']['indexOf'](_0xdd83bf),-0x7*-0x139+0x365*0x7+-0x1*0x2051),this['markLights'+'Dirty']()),_0xdd83bf['type']!==ve&&this['_clustered'+'LightsSet']['delete'](_0xdd83bf);}['clearLight'+'s'](){this['_lightsSet']['forEach'](_0x4e3d9c=>_0x4e3d9c['removeLaye'+'r'](this)),this['_lightsSet']['clear'](),this['_clustered'+'LightsSet']['clear'](),this['_lights']['length']=0x2073+-0x21ee+0x17b,this['markLights'+'Dirty']();}get['splitLight'+'s'](){if(this['_splitLigh'+'tsDirty']){this['_splitLigh'+'tsDirty']=!(0x64f*-0x1+0xd*0x20b+-0x143f);const _0x185a59=this['_splitLigh'+'ts'];for(let _0x54818a=0x1126*-0x1+-0x90*-0x1a+0x286;_0x54818a<_0x185a59['length'];_0x54818a++)_0x185a59[_0x54818a]['length']=-0x24be+0xb*0x176+0x14ac;const _0xc6d553=this['_lights'];for(let _0x4528ae=-0x101*0x7+0x21*-0xc5+0x206c;_0x4528ae<_0xc6d553['length'];_0x4528ae++){const _0xe93ad7=_0xc6d553[_0x4528ae];_0xe93ad7['enabled']&&_0x185a59[_0xe93ad7['_type']]['push'](_0xe93ad7);}for(let _0x3c2002=-0x233*-0xe+-0xf9d*0x2+0x70;_0x3c2002<_0x185a59['length'];_0x3c2002++)_0x185a59[_0x3c2002]['sort']((_0x13b6a6,_0x50f727)=>_0x13b6a6['key']-_0x50f727['key']);}return this['_splitLigh'+'ts'];}['evaluateLi'+'ghtHash'](_0x5ce368,_0x24da65,_0x8a4cd9){let _0xb27438=-0x5*0x146+0x22*-0xca+-0x7*-0x4be;const _0x3e2845=this['_lights'];for(let _0x22766f=-0x2523+-0xbd9+0x30fc;_0x22766f<_0x3e2845['length'];_0x22766f++){const _0x5a96b1=_0x3e2845[_0x22766f]['type']!==ve;(_0x5ce368&&_0x5a96b1||_0x24da65&&!_0x5a96b1)&&co['push'](_0x8a4cd9?_0x3e2845[_0x22766f]['id']:_0x3e2845[_0x22766f]['key']);}return co['length']>0x24cb+0x1ce+-0xf1*0x29&&(co['sort'](),_0xb27438=By(co),co['length']=0x18f1*-0x1+0x1*0x6d3+0x3*0x60a),_0xb27438;}['getLightHa'+'sh'](_0x97326d){return this['_lightHash'+'Dirty']&&(this['_lightHash'+'Dirty']=!(0xf34+-0x7ed*-0x2+-0x1f0d),this['_lightHash']=this['evaluateLi'+'ghtHash'](!_0x97326d,!(-0x1*0x3b1+0x10d5+-0x1d*0x74),!(-0x243b+-0xdfc+0xc8e*0x4))),this['_lightHash'];}['getLightId'+'Hash'](){return this['_lightIdHa'+'shDirty']&&(this['_lightIdHa'+'shDirty']=!(-0x1f*-0x9+0x1a80+-0x1b96),this['_lightIdHa'+'sh']=this['evaluateLi'+'ghtHash'](!(-0x24dd+0x1115*0x2+0x2b3),!(0x3d1*-0x4+0x2154+0x1*-0x120f),!(0x43+0x1*-0xf3e+0xefb))),this['_lightIdHa'+'sh'];}['addCamera'](_0x420d61){this['camerasSet']['has'](_0x420d61['camera'])||(this['camerasSet']['add'](_0x420d61['camera']),this['cameras']['push'](_0x420d61),this['_dirtyComp'+'osition']=!(-0x2d2*0x6+0x88*-0x4+0x6a*0x2e));}['removeCame'+'ra'](_0x47ec04){if(this['camerasSet']['has'](_0x47ec04['camera'])){this['camerasSet']['delete'](_0x47ec04['camera']);const _0x38276f=this['cameras']['indexOf'](_0x47ec04);this['cameras']['splice'](_0x38276f,-0x1106+0xf*-0x1c9+-0x7e*-0x59),this['_dirtyComp'+'osition']=!(0x653*0x1+0x457*-0x1+-0x1fc);}}['clearCamer'+'as'](){this['cameras']['length']=-0x1*0xf94+0x1*0xa1d+0x577,this['camerasSet']['clear'](),this['_dirtyComp'+'osition']=!(-0x6e6*0x3+0x179*0x13+-0x749);}['_calculate'+'SortDistan'+'ces'](_0x2d47c0,_0xe328de,_0x220272){const _0x4c2599=_0x2d47c0['length'],{x:_0x13516b,y:_0x221bcd,z:_0x57f199}=_0xe328de,{x:_0x3b3942,y:_0x28f69b,z:_0x3b647d}=_0x220272;for(let _0x2c8811=-0x17c2+0x18be+0x4*-0x3f;_0x2c8811<_0x4c2599;_0x2c8811++){const _0x356703=_0x2d47c0[_0x2c8811];let _0x129a64;if(_0x356703['calculateS'+'ortDistanc'+'e'])_0x129a64=_0x356703['calculateS'+'ortDistanc'+'e'](_0x356703,_0xe328de,_0x220272);else{const _0x1ed68d=_0x356703['aabb']['center'];_0x129a64=(_0x1ed68d['x']-_0x13516b)*_0x3b3942+(_0x1ed68d['y']-_0x221bcd)*_0x28f69b+(_0x1ed68d['z']-_0x57f199)*_0x3b647d;}const _0x459993=_0x356703['_drawBucke'+'t']*(0x5cf24879+-0x662d1*0x1081+0x480d5cd8);_0x356703['_sortKeyDy'+'namic']=_0x459993+_0x129a64;}}['getCulledI'+'nstances'](_0x326e93){let _0x1e8938=this['_visibleIn'+'stances']['get'](_0x326e93);return _0x1e8938||(_0x1e8938=new nA(),this['_visibleIn'+'stances']['set'](_0x326e93,_0x1e8938)),_0x1e8938;}['sortVisibl'+'e'](_0x518aad,_0x3d151b){const _0x4c0e80=_0x3d151b?this['transparen'+'tSortMode']:this['opaqueSort'+'Mode'];if(_0x4c0e80===Yc)return;const _0x4b45f3=this['getCulledI'+'nstances'](_0x518aad),_0x1ff1fb=_0x3d151b?_0x4b45f3['transparen'+'t']:_0x4b45f3['opaque'],_0x49854e=_0x518aad['node'];if(_0x4c0e80===Zw){const _0x21955c=_0x49854e['getPositio'+'n'](),_0x77be8e=_0x49854e['forward'];this['customCalc'+'ulateSortV'+'alues']&&this['customCalc'+'ulateSortV'+'alues'](_0x1ff1fb,_0x1ff1fb['length'],_0x21955c,_0x77be8e),this['customSort'+'Callback']&&_0x1ff1fb['sort'](this['customSort'+'Callback']);}else{if(_0x4c0e80===m_||_0x4c0e80===Kw){const _0xf3bb0e=_0x49854e['getPositio'+'n'](),_0x2357bb=_0x49854e['forward'];this['_calculate'+'SortDistan'+'ces'](_0x1ff1fb,_0xf3bb0e,_0x2357bb);}_0x1ff1fb['sort'](aA[_0x4c0e80]);}}}const oA=(_0x9e1a55,_0x260830)=>_0x9e1a55['priority']-_0x260830['priority'],ul=_0x3dea44=>_0x3dea44['sort'](oA);class du extends me{constructor(_0x50a93e='Untitled'){super(),h(this,'layerList',[]),h(this,'layerIdMap',new Map()),h(this,'layerNameM'+'ap',new Map()),h(this,'layerOpaqu'+'eIndexMap',new Map()),h(this,'layerTrans'+'parentInde'+'xMap',new Map()),h(this,'subLayerLi'+'st',[]),h(this,'subLayerEn'+'abled',[]),h(this,'cameras',[]),h(this,'_renderAct'+'ions',[]),h(this,'_dirty',!(0x1d04+0x1ec*-0x5+-0x1367)),(this['name']=_0x50a93e,this['_opaqueOrd'+'er']={},this['_transpare'+'ntOrder']={});}['destroy'](){this['destroyRen'+'derActions']();}['destroyRen'+'derActions'](){this['_renderAct'+'ions']['forEach'](_0xb402b3=>_0xb402b3['destroy']()),this['_renderAct'+'ions']['length']=0x506*0x3+0xcf7+0x1c09*-0x1;}['markDirty'](){this['_dirty']=!(0x1bcb+-0x87a+-0x1351);}['_update'](){const _0x2a3b0a=this['layerList']['length'];if(!this['_dirty']){for(let _0x23e1ed=0x1d1c+0x71*0x1a+0x2*-0x144b;_0x23e1ed<_0x2a3b0a;_0x23e1ed++)if(this['layerList'][_0x23e1ed]['_dirtyComp'+'osition']){this['_dirty']=!(-0x114b+-0x384+0x1*0x14cf);break;}}if(this['_dirty']){this['_dirty']=!(0xbe0+-0xf*-0x9f+-0x1530),this['cameras']['length']=0x9c0+-0x1215+-0x1*-0x855;for(let _0x1e44bd=0x1736+0x3c0+-0x1af6;_0x1e44bd<_0x2a3b0a;_0x1e44bd++){const _0x2e51f9=this['layerList'][_0x1e44bd];_0x2e51f9['_dirtyComp'+'osition']=!(0x1d42+-0x1613+-0x72e);for(let _0x627c02=0x1063+0x10b5*-0x2+0x1107;_0x627c02<_0x2e51f9['cameras']['length'];_0x627c02++){const _0x2a8572=_0x2e51f9['cameras'][_0x627c02];this['cameras']['indexOf'](_0x2a8572)<0x1a0*-0x1+-0x2*-0x146+0x76*-0x2&&this['cameras']['push'](_0x2a8572);}}this['cameras']['length']>0xf11+0x264c*0x1+-0x2*0x1aae&&ul(this['cameras']);let _0x6345c9=-0xe39+-0x1846+0x267f;this['destroyRen'+'derActions']();for(let _0x15d728=-0x131b+0x389+0xf92;_0x15d728<this['cameras']['length'];_0x15d728++){const _0x2162d1=this['cameras'][_0x15d728];if(_0x2162d1['camera']['renderPass'+'es']['length']>0x1196+-0x623*-0x5+0x9*-0x55d){this['addDummyRe'+'nderAction'](_0x6345c9,_0x2162d1),_0x6345c9++;continue;}let _0x4fbc6a=!(0x2*-0x7e3+0x7a5*-0x3+0x26b5*0x1);const _0x5f3e04=_0x6345c9;let _0x44cb86=null,_0x4687ef=!(-0x826+-0x204d+0x3*0xd7c);for(let _0x431a58=-0x100b+-0x2b5+0x12c0;_0x431a58<_0x2a3b0a;_0x431a58++){const _0x299d16=this['layerList'][_0x431a58];if(_0x299d16['enabled']&&this['subLayerEn'+'abled'][_0x431a58]&&_0x299d16['cameras']['length']>-0x25e7+0x1*0x13bb+-0x916*-0x2&&_0x2162d1['layers']['indexOf'](_0x299d16['id'])>=0x1382+0x2*-0x593+0x1ac*-0x5){!_0x4687ef&&_0x299d16['id']===_0x2162d1['disablePos'+'tEffectsLa'+'yer']&&(_0x4687ef=!(-0x1*-0x16f+0x1cb4+-0x5*0x607),_0x44cb86&&(_0x44cb86['triggerPos'+'tprocess']=!(-0xd4a+-0x1d9a+0x2ae4)));const _0x2d0d4c=this['subLayerLi'+'st'][_0x431a58];_0x44cb86=this['addRenderA'+'ction'](_0x6345c9,_0x299d16,_0x2d0d4c,_0x2162d1,_0x4fbc6a,_0x4687ef),_0x6345c9++,_0x4fbc6a=!(0x2375+0x3*-0xc37+0x131*0x1);}}_0x5f3e04<_0x6345c9&&(_0x44cb86['lastCamera'+'Use']=!(0x1636+-0x47*0x43+-0x1*0x3a1)),!_0x4687ef&&_0x44cb86&&(_0x44cb86['triggerPos'+'tprocess']=!(0x1857+0x26b0+-0x3f07)),_0x2162d1['renderTarg'+'et']&&_0x2162d1['postEffect'+'sEnabled']&&this['propagateR'+'enderTarge'+'t'](_0x5f3e04-(-0x1508+0x1be0+-0x6d7),_0x2162d1);}this['_logRender'+'Actions']();}}['getNextRen'+'derAction'](_0x27da39){w['assert'](this['_renderAct'+'ions']['length']===_0x27da39);const _0x496277=new Pv();return this['_renderAct'+'ions']['push'](_0x496277),_0x496277;}['addDummyRe'+'nderAction'](_0x4811b7,_0x5e6cdd){const _0x418e07=this['getNextRen'+'derAction'](_0x4811b7);_0x418e07['camera']=_0x5e6cdd,_0x418e07['useCameraP'+'asses']=!(0x5cf+-0x25cf+-0x200*-0x10);}['addRenderA'+'ction'](_0x3c724e,_0x38c9ac,_0x43f595,_0x270e6a,_0x56cbe1,_0x30a9bc){let _0x27bdf4=_0x38c9ac['id']!==ps?_0x270e6a['renderTarg'+'et']:null,_0x5f4002=!(-0x1*0x599+-0x1*-0x1e71+-0x18d7);const _0x46921f=this['_renderAct'+'ions'];for(let _0xd8ff20=_0x3c724e-(-0x119*-0x5+-0x12bb*-0x1+-0x1837);_0xd8ff20>=-0xc37+0x48f*-0x5+-0x1181*-0x2;_0xd8ff20--)if(_0x46921f[_0xd8ff20]['camera']===_0x270e6a&&_0x46921f[_0xd8ff20]['renderTarg'+'et']===_0x27bdf4){_0x5f4002=!(-0x1971+0x7a9+-0x2*-0x8e4);break;}_0x30a9bc&&_0x270e6a['postEffect'+'sEnabled']&&(_0x27bdf4=null);const _0x21e3a4=this['getNextRen'+'derAction'](_0x3c724e);_0x21e3a4['triggerPos'+'tprocess']=!(0x6e8+-0xfb4+0x8cd),_0x21e3a4['layer']=_0x38c9ac,_0x21e3a4['transparen'+'t']=_0x43f595,_0x21e3a4['camera']=_0x270e6a,_0x21e3a4['renderTarg'+'et']=_0x27bdf4,_0x21e3a4['firstCamer'+'aUse']=_0x56cbe1,_0x21e3a4['lastCamera'+'Use']=!(-0x7*-0x4e4+-0x249f+0x2*0x132);const _0x20c419=_0x56cbe1||!_0x5f4002,_0x58d25b=_0x38c9ac['clearColor'+'Buffer']||_0x38c9ac['clearDepth'+'Buffer']||_0x38c9ac['clearStenc'+'ilBuffer'];return(_0x20c419||_0x58d25b)&&_0x21e3a4['setupClear'+'s'](_0x20c419?_0x270e6a:void(-0x13db+-0x9*-0x2a+-0x1261*-0x1),_0x38c9ac),_0x21e3a4;}['propagateR'+'enderTarge'+'t'](_0x30084a,_0x1df2ea){for(let _0x56c3e1=_0x30084a;_0x56c3e1>=0xe81+0xfda*0x1+0x1*-0x1e5b;_0x56c3e1--){const _0x1affa3=this['_renderAct'+'ions'][_0x56c3e1],_0x46715c=_0x1affa3['layer'];if(_0x1affa3['renderTarg'+'et']&&_0x46715c['id']!==ps)break;if(_0x46715c['id']===ps)continue;if(_0x1affa3['useCameraP'+'asses'])break;const _0x4af55b=_0x1affa3==null?void(0x18d0+-0x265a+-0x1*-0xd8a):_0x1affa3['camera']['camera'];if(_0x4af55b&&(!_0x1df2ea['camera']['rect']['equals'](_0x4af55b['rect'])||!_0x1df2ea['camera']['scissorRec'+'t']['equals'](_0x4af55b['scissorRec'+'t'])))break;_0x1affa3['renderTarg'+'et']=_0x1df2ea['renderTarg'+'et'];}}['_logRender'+'Actions'](){if(mi['get'](Vl)){w['trace'](Vl,'Render\x20Act'+'ions\x20for\x20c'+'omposition'+':\x20'+this['name']);for(let _0x5cdcfb=-0x16fc+-0xe10+0x250c;_0x5cdcfb<this['_renderAct'+'ions']['length'];_0x5cdcfb++){const _0x4fa319=this['_renderAct'+'ions'][_0x5cdcfb],_0x8ae247=_0x4fa319['camera'];if(_0x4fa319['useCameraP'+'asses'])w['trace'](Vl,_0x5cdcfb+('CustomPass'+'es\x20Cam:\x20')+(_0x8ae247?_0x8ae247['entity']['name']:'-'));else{const _0x12e3ce=_0x4fa319['layer'],_0xa4789d=_0x12e3ce['enabled']&&this['isEnabled'](_0x12e3ce,_0x4fa319['transparen'+'t']),_0x3be52d=(_0x4fa319['clearColor']?'Color\x20':'.....\x20')+(_0x4fa319['clearDepth']?'Depth\x20':'.....\x20')+(_0x4fa319['clearStenc'+'il']?'Stencil':'.......');w['trace'](Vl,_0x5cdcfb+('\x20Cam:\x20'+(_0x8ae247?_0x8ae247['entity']['name']:'-'))['padEnd'](-0x12*-0x169+-0x9*0xd+-0x18d7,'\x20')+('\x20Lay:\x20'+_0x12e3ce['name'])['padEnd'](0x1062+0x16cd+-0x2719,'\x20')+(_0x4fa319['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0xa4789d?'\x20ENABLED\x20':'\x20DISABLED')+('\x20RT:\x20'+(_0x4fa319['renderTarg'+'et']?_0x4fa319['renderTarg'+'et']['name']:'-'))['padEnd'](0x2232+0x91*-0x29+-0xadb,'\x20')+'\x20Clear:\x20'+_0x3be52d+(_0x4fa319['firstCamer'+'aUse']?'\x20CAM-FIRST':'')+(_0x4fa319['lastCamera'+'Use']?'\x20CAM-LAST':'')+(_0x4fa319['triggerPos'+'tprocess']?'\x20POSTPROCE'+'SS':''));}}}}['_isLayerAd'+'ded'](_0x416d84){const _0x1388df=this['layerIdMap']['get'](_0x416d84['id'])===_0x416d84;return w['assert'](!_0x1388df,'Layer\x20is\x20a'+'lready\x20add'+'ed:\x20'+_0x416d84['name']),_0x1388df;}['_isSublaye'+'rAdded'](_0x3af2df,_0x5ade6d){return(_0x5ade6d?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['get'](_0x3af2df)!==void(0x93f*0x4+-0x15d6+-0x115*0xe)?(w['error']('Sublayer\x20'+_0x3af2df['name']+(',\x20transpar'+'ent:\x20')+_0x5ade6d+('\x20is\x20alread'+'y\x20added.')),!(-0x1df3+0xc*-0x259+0x3a1f)):!(0x2*0x401+-0xfd8*0x1+0x7d7);}['push'](_0x33ea9c){this['_isLayerAd'+'ded'](_0x33ea9c)||(this['layerList']['push'](_0x33ea9c),this['layerList']['push'](_0x33ea9c),this['_opaqueOrd'+'er'][_0x33ea9c['id']]=this['subLayerLi'+'st']['push'](!(-0x1*-0x5b1+0xe8*-0x22+0x860*0x3))-(-0x1*0x1625+-0x2bd*0x2+0x374*0x8),this['_transpare'+'ntOrder'][_0x33ea9c['id']]=this['subLayerLi'+'st']['push'](!(0x3df*-0x7+-0x3*0x28b+0x22ba))-(-0x389+-0x547*-0x1+0x59*-0x5),this['subLayerEn'+'abled']['push'](!(-0xd02+0x7*0x11+0xc8b)),this['subLayerEn'+'abled']['push'](!(-0x5a*-0x57+-0x129+0x1f*-0xf3)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x1b0c+-0x5f*-0x60+-0x894),this['fire']('add',_0x33ea9c));}['insert'](_0x1fe5a5,_0x148736){if(this['_isLayerAd'+'ded'](_0x1fe5a5))return;this['layerList']['splice'](_0x148736,-0x191f+0x24ea+-0xbcb,_0x1fe5a5,_0x1fe5a5),this['subLayerLi'+'st']['splice'](_0x148736,-0xeeb*-0x1+0x16f*0x8+0x547*-0x5,!(-0x1*-0x123f+-0xa4d+0x7f1*-0x1),!(-0x570+-0x9aa+0x1*0xf1a));const _0x938c41=this['layerList']['length'];this['_updateOpa'+'queOrder'](_0x148736,_0x938c41-(0x1*0x11c3+0xb9e+-0x1d60)),this['_updateTra'+'nsparentOr'+'der'](_0x148736,_0x938c41-(-0x134f+-0x1aeb+0x2e3b)),this['subLayerEn'+'abled']['splice'](_0x148736,0x5a5+0x9*0x26b+-0x1b68,!(0x57d*0x7+-0x83b+-0x1e30),!(-0x1925*0x1+-0xb68*0x2+-0x2ff5*-0x1)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x1*0x17ee+0x214b+-0x39*0x101),this['fire']('add',_0x1fe5a5);}['remove'](_0x94757){let _0x22fbc9=this['layerList']['indexOf'](_0x94757);for(delete this['_opaqueOrd'+'er'][_0x22fbc9],delete this['_transpare'+'ntOrder'][_0x22fbc9];_0x22fbc9>=-0x102d+-0xdb1+-0x1*-0x1dde;)this['layerList']['splice'](_0x22fbc9,0x14c*-0x1a+0xb9f+0x6*0x3af),this['subLayerLi'+'st']['splice'](_0x22fbc9,-0x512*0x1+-0x22*0x8+-0x1*-0x623),this['subLayerEn'+'abled']['splice'](_0x22fbc9,-0xcf5+0x19ce+0x66c*-0x2),_0x22fbc9=this['layerList']['indexOf'](_0x94757),this['_dirty']=!(-0x9d2*0x1+-0xd1+-0x1*-0xaa3),this['fire']('remove',_0x94757);const _0x228a73=this['layerList']['length'];this['_updateOpa'+'queOrder'](0xd9*-0x2+0x2383*-0x1+0x17d*0x19,_0x228a73-(-0x252c+-0x20dc+0x4609)),this['_updateTra'+'nsparentOr'+'der'](-0xeb*-0x20+-0x1*-0x1d39+-0x3a99,_0x228a73-(-0xaca*0x1+0x1360+-0x895)),this['_updateLay'+'erMaps']();}['pushOpaque'](_0x383936){this['_isSublaye'+'rAdded'](_0x383936,!(-0x1ba6*0x1+0x40b+0x179c))||(this['layerList']['push'](_0x383936),this['_opaqueOrd'+'er'][_0x383936['id']]=this['subLayerLi'+'st']['push'](!(-0x1ae8+-0x16ad+0x3196))-(-0x1*0xa7b+0x9b*0x1c+-0x678),this['subLayerEn'+'abled']['push'](!(0x2*0xa68+-0x17f6+-0x1a*-0x1f)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x2466+0x7b*-0x3d+-0x16b*0x5),this['fire']('add',_0x383936));}['insertOpaq'+'ue'](_0x2168c1,_0x112cac){if(this['_isSublaye'+'rAdded'](_0x2168c1,!(0xc07+-0x20f8+-0x14f2*-0x1)))return;this['layerList']['splice'](_0x112cac,0x6*0xa3+-0x1*0x305+-0x1*0xcd,_0x2168c1),this['subLayerLi'+'st']['splice'](_0x112cac,0x831+-0xdc0*0x1+0x58f,!(-0x1247*-0x1+-0x186d+0xaf*0x9));const _0x5ed0f3=this['subLayerLi'+'st']['length'];this['_updateOpa'+'queOrder'](_0x112cac,_0x5ed0f3-(-0x2062+-0x1*0x502+0x2565)),this['subLayerEn'+'abled']['splice'](_0x112cac,-0x128d*0x1+0x1a*0x14+0x1*0x1085,!(0x17d6+-0x579*0x1+0x61f*-0x3)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0xf50+-0xa*-0x3df+-0x3606),this['fire']('add',_0x2168c1);}['removeOpaq'+'ue'](_0x3174f1){for(let _0x59d2e7=-0x23bf*-0x1+0x1c8+-0x2587*0x1,_0x29ac3a=this['layerList']['length'];_0x59d2e7<_0x29ac3a;_0x59d2e7++)if(this['layerList'][_0x59d2e7]===_0x3174f1&&!this['subLayerLi'+'st'][_0x59d2e7]){this['layerList']['splice'](_0x59d2e7,0x1766+-0x602+0x1163*-0x1),this['subLayerLi'+'st']['splice'](_0x59d2e7,0x1cf5+-0x1c05+-0xef),_0x29ac3a--,this['_updateOpa'+'queOrder'](_0x59d2e7,_0x29ac3a-(0x54a*0x1+-0x4c1+-0x1*0x88)),this['subLayerEn'+'abled']['splice'](_0x59d2e7,0x1145+-0x2505+-0x1*-0x13c1),this['_dirty']=!(0x2180*0x1+-0x1616*-0x1+-0x3796),this['layerList']['indexOf'](_0x3174f1)<-0x116c*0x1+-0x2*-0x4e4+-0x28c*-0x3&&this['fire']('remove',_0x3174f1);break;}this['_updateLay'+'erMaps']();}['pushTransp'+'arent'](_0x2fd6df){this['_isSublaye'+'rAdded'](_0x2fd6df,!(-0x7d*0x28+0x35f*-0x7+0x2b21))||(this['layerList']['push'](_0x2fd6df),this['_transpare'+'ntOrder'][_0x2fd6df['id']]=this['subLayerLi'+'st']['push'](!(-0x2090+-0x656*-0x6+-0x574))-(-0x523*-0x3+-0xfbf+0x57),this['subLayerEn'+'abled']['push'](!(0x2538+-0xb20+0x343*-0x8)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x126b*-0x1+-0x1eaf*0x1+0x311a),this['fire']('add',_0x2fd6df));}['insertTran'+'sparent'](_0x1b299d,_0x16a88b){if(this['_isSublaye'+'rAdded'](_0x1b299d,!(-0x13a*0xc+0xfdd+-0x125)))return;this['layerList']['splice'](_0x16a88b,-0x211*0x8+0x1*0x1438+0x4*-0xec,_0x1b299d),this['subLayerLi'+'st']['splice'](_0x16a88b,-0x9bd+-0x1*-0x1352+-0x995,!(0x18f6+-0x141*-0x17+0x11ef*-0x3));const _0x3ea7a0=this['subLayerLi'+'st']['length'];this['_updateTra'+'nsparentOr'+'der'](_0x16a88b,_0x3ea7a0-(-0xa6d*0x1+-0x2*0x1140+-0x36*-0xd5)),this['subLayerEn'+'abled']['splice'](_0x16a88b,-0xf36+0x1bb9+-0xc83*0x1,!(0x18b*-0x2+-0x1f1e+0x31c*0xb)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x1d5b+-0x14e9+-0x872),this['fire']('add',_0x1b299d);}['removeTran'+'sparent'](_0x171521){for(let _0x48eff5=-0x1*-0x12a+0x10ac+-0x2f9*0x6,_0x4b095b=this['layerList']['length'];_0x48eff5<_0x4b095b;_0x48eff5++)if(this['layerList'][_0x48eff5]===_0x171521&&this['subLayerLi'+'st'][_0x48eff5]){this['layerList']['splice'](_0x48eff5,0x1b*-0x47+-0x20ef*0x1+0x286d),this['subLayerLi'+'st']['splice'](_0x48eff5,0x1d2f+-0x21ac+0x47e),_0x4b095b--,this['_updateTra'+'nsparentOr'+'der'](_0x48eff5,_0x4b095b-(0x1*-0xa2a+0x20fc+-0x16d1)),this['subLayerEn'+'abled']['splice'](_0x48eff5,-0x1*-0xcc7+0x11d7*-0x1+-0x511*-0x1),this['_dirty']=!(0xe1*-0x29+0x2*-0xc25+-0x3c53*-0x1),this['layerList']['indexOf'](_0x171521)<-0x99*0x6+0x5fb+-0x265&&this['fire']('remove',_0x171521);break;}this['_updateLay'+'erMaps']();}['getOpaqueI'+'ndex'](_0x307205){return this['layerOpaqu'+'eIndexMap']['get'](_0x307205)??-(0x147c+0x225+-0x16a0);}['getTranspa'+'rentIndex'](_0x55a4dc){return this['layerTrans'+'parentInde'+'xMap']['get'](_0x55a4dc)??-(-0x156a*-0x1+0x2e+-0x1597);}['isEnabled'](_0x3f25ed,_0x131a98){if(_0x3f25ed['enabled']){const _0x1f69ea=_0x131a98?this['getTranspa'+'rentIndex'](_0x3f25ed):this['getOpaqueI'+'ndex'](_0x3f25ed);if(_0x1f69ea>=0x1cf3+0x5*-0x111+0x2*-0xbcf)return this['subLayerEn'+'abled'][_0x1f69ea];}return!(0x49b+0x26db*-0x1+-0x6f*-0x4f);}['_updateLay'+'erMaps'](){this['layerIdMap']['clear'](),this['layerNameM'+'ap']['clear'](),this['layerOpaqu'+'eIndexMap']['clear'](),this['layerTrans'+'parentInde'+'xMap']['clear']();for(let _0x17c48a=0x3*-0x1e7+0x3*0x987+-0x30*0x7a;_0x17c48a<this['layerList']['length'];_0x17c48a++){const _0x444ba7=this['layerList'][_0x17c48a];this['layerIdMap']['set'](_0x444ba7['id'],_0x444ba7),this['layerNameM'+'ap']['set'](_0x444ba7['name'],_0x444ba7),(this['subLayerLi'+'st'][_0x17c48a]?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['set'](_0x444ba7,_0x17c48a);}}['getLayerBy'+'Id'](_0x317663){return this['layerIdMap']['get'](_0x317663)??null;}['getLayerBy'+'Name'](_0x5b1564){return this['layerNameM'+'ap']['get'](_0x5b1564)??null;}['_updateOpa'+'queOrder'](_0xd16825,_0x4038b5){for(let _0x2794dc=_0xd16825;_0x2794dc<=_0x4038b5;_0x2794dc++)this['subLayerLi'+'st'][_0x2794dc]===!(0x1bf6+-0x15*0x4d+-0x115*0x14)&&(this['_opaqueOrd'+'er'][this['layerList'][_0x2794dc]['id']]=_0x2794dc);}['_updateTra'+'nsparentOr'+'der'](_0x46448e,_0x3f5e03){for(let _0x56720b=_0x46448e;_0x56720b<=_0x3f5e03;_0x56720b++)this['subLayerLi'+'st'][_0x56720b]===!(-0x12e4+-0xde8+0x20cc)&&(this['_transpare'+'ntOrder'][this['layerList'][_0x56720b]['id']]=_0x56720b);}['_sortLayer'+'sDescendin'+'g'](_0x592c66,_0x4a51fc,_0x3f56b4){let _0x32339c=-(0x3*-0x598+-0x95b+-0x1de*-0xe),_0x22cd1a=-(0x149a+-0x2232+0xd99);for(let _0x4807c1=0x25a9+0x6af+-0x2c58,_0x32342d=_0x592c66['length'];_0x4807c1<_0x32342d;_0x4807c1++){const _0x483658=_0x592c66[_0x4807c1];_0x3f56b4['hasOwnProp'+'erty'](_0x483658)&&(_0x32339c=Math['max'](_0x32339c,_0x3f56b4[_0x483658]));}for(let _0x481774=0xc6*0x8+0x43*0x1f+-0xe4d,_0x496556=_0x4a51fc['length'];_0x481774<_0x496556;_0x481774++){const _0x528cd4=_0x4a51fc[_0x481774];_0x3f56b4['hasOwnProp'+'erty'](_0x528cd4)&&(_0x22cd1a=Math['max'](_0x22cd1a,_0x3f56b4[_0x528cd4]));}return _0x32339c===-(-0x1796*0x1+-0x23c5*0x1+-0xed7*-0x4)&&_0x22cd1a!==-(0x14fa+-0x1bad*-0x1+-0x2*0x1853)?0xc7+-0x2*0x3af+0x1a6*0x4:_0x22cd1a===-(-0x2559*0x1+-0x466+0x8*0x538)&&_0x32339c!==-(0x1946+0x20f7+-0x1*0x3a3c)?-(0x629*0x1+-0x1e89*-0x1+0x1*-0x24b1):_0x22cd1a-_0x32339c;}['sortTransp'+'arentLayer'+'s'](_0x23d9d1,_0x1610f2){return this['_sortLayer'+'sDescendin'+'g'](_0x23d9d1,_0x1610f2,this['_transpare'+'ntOrder']);}['sortOpaque'+'Layers'](_0x13aca3,_0x29c171){return this['_sortLayer'+'sDescendin'+'g'](_0x13aca3,_0x29c171,this['_opaqueOrd'+'er']);}}const dc=new D(),wi={'bias':0x0,'normalBias':0x0},ho=new ie(),pf={'r':0x0,'g':0x1,'b':0x2,'a':0x3},fu={'directional':ve,'omni':Ke,'point':Ke,'spot':Ze},lA=[[new re(-0x1*0x255e+0x1126+-0xa1c*-0x2,-0x366+-0x2b*0x38+0x95*0x16,0x1*0xc9c+0x1887+0x2522*-0x1,-0x21d9+0x6c0+0x1b1a)],[new re(0x92*0x1+-0x21db+0x2149,-0x31a+-0x2*0x10ad+0x2474,0x1d9f+-0x2a*0x38+-0x146f+0.5,0xef*-0x1+-0x398+0x487+0.5),new re(0x179+0xf41+-0x10ba,0x1*0x4f9+0x2009+0xc56*-0x3+0.5,-0x3a3+-0x1d8e+0x1*0x2131+0.5,-0x980+0xc8b*0x2+-0xf96+0.5)],[new re(0x600+0xd32+-0x1332,-0x357+-0x494+-0x7eb*-0x1,0xf1d+0x3d*0x42+-0x1ed7+0.5,0x1b*-0x119+-0x13c7+0x316a+0.5),new re(0x10*-0x1ce+-0x114a+-0x13*-0x26e,0x25c0+-0x87e+-0x1d42+0.5,-0x2235+0x12da+0xf5b+0.5,0x2175+0x28c*-0x1+0x29*-0xc1+0.5),new re(0x207f+-0x1606+0x1*-0xa79+0.5,-0x2325+-0x6*0x9e+0x26d9,-0x39*-0x9f+-0x3*-0x7a5+-0x3a56+0.5,0xb*-0x2d7+-0x1c*0x10d+0x3ca9+0.5)],[new re(0xb*0x292+-0x11e+0x6ca*-0x4,0x61*0x4f+-0x4a8+-0x1947,0x188d+0x380+0xa7*-0x2b+0.5,0x4d1+-0x4ea*-0x2+0xa3*-0x17+0.5),new re(0x1*0xfd6+-0x3*0x382+0x50*-0x11,-0x43b+-0x20d8*-0x1+0x1*-0x1c9d+0.5,0x912+0xe58+-0x36*0x6f+0.5,0x22c6+0x80a*0x3+-0x2*0x1d72+0.5),new re(-0xede+-0x1*-0x1697+0x7b9*-0x1+0.5,-0xc9d+-0x2*0xc53+0x2543,0x1*-0x1bfd+0x26ac+-0xaaf*0x1+0.5,-0xd04+0x21b8+0x14*-0x109+0.5),new re(0x7*-0x4de+0x211*0x3+-0x1bdf*-0x1+0.5,0x11b*0x13+0xb*-0x7f+-0xf8c+0.5,0x1b85+0x1*0xb77+-0x7cc*0x5+0.5,0x1b9a+-0xdd*-0xf+-0x288d+0.5)]],cA={'rrr':0x1,'ggg':0x2,'bbb':0x4,'aaa':0x8,'rgb':0x7};let hA=-0xb*0x229+-0x446*-0x3+0xaf1;class dA{constructor(_0x3324db,_0x16e21e,_0x136726){this['light']=_0x136726,this['camera']=_0x3324db,this['shadowCame'+'ra']=Cv['createShad'+'owCamera'](_0x136726['_shadowTyp'+'e'],_0x136726['_type'],_0x16e21e),this['shadowMatr'+'ix']=new te(),this['shadowView'+'port']=new re(-0x35*0x81+0x1*0x1807+0x2ae,-0x12d2+-0x1*0x2141+0x3413,-0x262+0x8d1+-0x66e,0x2314+0xa6b+0xf2a*-0x3),this['shadowScis'+'sor']=new re(-0x78*0x47+0x1b*0x17+0x1edb,-0x1*0x72e+-0xc68+0x1396,-0x952+-0x143+0x1*0xa96,0x1*-0x5c6+0x14eb+-0xf24),this['projection'+'Compensati'+'on']=-0x1ed7*0x1+0x233f+-0x468,this['face']=_0x16e21e,this['visibleCas'+'ters']=[],this['viewBindGr'+'oups']=[];}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x81df34=>{_0x81df34['defaultUni'+'formBuffer']['destroy'](),_0x81df34['destroy']();}),this['viewBindGr'+'oups']['length']=0x1*-0xe0c+-0x24f4+0x3300;}get['shadowBuff'+'er'](){const _0x20d84f=this['shadowCame'+'ra']['renderTarg'+'et'];return _0x20d84f?this['light']['_isPcf']?_0x20d84f['depthBuffe'+'r']:_0x20d84f['colorBuffe'+'r']:null;}}class pl{constructor(_0x5e4fdc,_0x143c65){h(this,'layers',new Set()),h(this,'clusteredL'+'ighting'),h(this,'shadowDept'+'hState',Yt['DEFAULT']['clone']()),h(this,'clusteredF'+'lags',0x137a+-0x1464+0xea),h(this,'clusteredD'+'ata',new Uint32Array(0x56f+0x72a+-0xc96)),h(this,'clusteredD'+'ata16',new Uint16Array(this['clusteredD'+'ata']['buffer'])),h(this,'_evtDevice'+'Restored',null),(this['device']=_0x5e4fdc,this['clusteredL'+'ighting']=_0x143c65,this['id']=hA++,this['_evtDevice'+'Restored']=_0x5e4fdc['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this),this['_type']=ve,this['_color']=new ie(0x1*-0x26d+0x163a+-0x13cd+0.8,0x2d1+0x2*0x971+-0x15b3+0.8,0x1df6+-0x2*-0xc8c+0x30f*-0x12+0.8),this['_intensity']=-0x2d*-0x52+0x1*-0x1c45+-0x2*-0x6ee,this['_affectSpe'+'cularity']=!(0x872+-0x15*0x1bf+0x1c39),this['_luminance']=0x6*0x2e3+-0x1ed5+-0x3*-0x481,this['_castShado'+'ws']=!(-0xcb*0x31+-0x1*-0x7b9+0x1f23*0x1),this['_enabled']=!(-0x2fc*0x8+0x8b*-0x33+0x3392),this['_mask']=Ss,this['isStatic']=!(-0x7*0x2e0+0x13*0x133+-0x2a8),this['key']=-0x8f8+0x1fc9+-0x289*0x9,this['bakeDir']=!(-0x3*0x5d+0x1*-0x2363+0x247a),this['bakeNumSam'+'ples']=-0x14c7+-0x530+-0x1*-0x19f8,this['bakeArea']=-0x23d8*-0x1+-0x25f9+0x1*0x221,this['attenuatio'+'nStart']=0x657*0x5+0x12f9+-0x32a2,this['attenuatio'+'nEnd']=0x1*0x2593+0x101*0x17+-0x3ca0,this['_falloffMo'+'de']=Qp,this['_shadowTyp'+'e']=$s,this['_vsmBlurSi'+'ze']=-0x1291+-0x656*-0x4+0x6bc*-0x1,this['vsmBlurMod'+'e']=em,this['vsmBias']=(0x1*0x398+0x2142+-0x1*0x24da+0.01)*(-0x1*-0x18fe+-0x1a0e+0x110+0.25),this['_cookie']=null,this['cookieInte'+'nsity']=0xb4a+-0x596+-0x1*0x5b3,this['_cookieFal'+'loff']=!(0x115b+0x164*0x7+-0x1b17),this['_cookieCha'+'nnel']='rgb',this['_cookieTra'+'nsform']=null,this['_cookieTra'+'nsformUnif'+'orm']=new Float32Array(-0x232f+-0x1a16+0x3d49*0x1),this['_cookieOff'+'set']=null,this['_cookieOff'+'setUniform']=new Float32Array(0x1*-0x1ca3+0x25c0+-0x91b),this['_cookieTra'+'nsformSet']=!(0xcf0+0xa93*0x1+-0x1782),this['_cookieOff'+'setSet']=!(-0x34*0x2+0x26a3+-0x2a*0xe9),this['_innerCone'+'Angle']=-0x10af+0x4*0x259+0x1*0x773,this['_outerCone'+'Angle']=0x1*-0x1703+-0x3*0x15d+0x1b47,this['cascades']=null,this['_shadowMat'+'rixPalette']=null,this['_shadowCas'+'cadeDistan'+'ces']=null,this['numCascade'+'s']=0x49*0x5e+0x4f5+-0x1fc2*0x1,this['_cascadeBl'+'end']=0x5c8+0x1*0x149d+-0x1a65,this['cascadeDis'+'tribution']=0x15cb+-0x1789*0x1+-0xdf*-0x2+0.5,this['_shape']=Ys,this['_colorLine'+'ar']=new Float32Array(-0x1faf+0x1*-0x1409+0x33bb),this['_updateLin'+'earColor'](),this['_position']=new D(0x4f0+0x5*0x431+-0x19e5,-0x155*0x1+0x1245+0x878*-0x2,-0x1144+0x1*-0x2142+-0x3286*-0x1),this['_direction']=new D(-0x54a+-0x223d*-0x1+0x1*-0x1cf3,0x197c+0x1510+-0x2e8c,0x1*0xa33+-0x364+-0xf9*0x7),this['_innerCone'+'AngleCos']=Math['cos'](this['_innerCone'+'Angle']*Math['PI']/(0x1813*0x1+0xc80+-0x23df)),this['_updateOut'+'erAngle'](this['_outerCone'+'Angle']),this['_usePhysic'+'alUnits']=void(0x16b8+0x1a1e+-0x30d6),this['_shadowMap']=null,this['_shadowRen'+'derParams']=[],this['_shadowCam'+'eraParams']=[],this['shadowDist'+'ance']=-0x2*-0xb5f+-0x1e1+-0x14b5,this['_shadowRes'+'olution']=0x897+-0x2*-0x8fb+-0x168d,this['_shadowBia'+'s']=-(-0x78a+-0x1d2c+0x24b6+0.0005),this['_shadowInt'+'ensity']=-0x2208+-0x248a+0x7*0xa15,this['_normalOff'+'setBias']=-0x10dc+-0x182*-0x10+-0x7c*0xf,this['shadowUpda'+'teMode']=lm,this['shadowUpda'+'teOverride'+'s']=null,this['_isVsm']=!(0x52*0x5c+-0x1a5d+-0x31a),this['_isPcf']=!(-0x3ff*-0x9+0x236b+0x23b1*-0x2),this['_softShado'+'wParams']=new Float32Array(-0x1*0x20f+-0x24b5*-0x1+-0x22a2),this['shadowSamp'+'les']=-0x240c+0x1cf4+-0x4*-0x1ca,this['shadowBloc'+'kerSamples']=0x2250+0x9b8+-0x2bf8,this['penumbraSi'+'ze']=-0xf*-0x151+-0xaab+-0x913,this['penumbraFa'+'lloff']=-0x157f*-0x1+-0x1581+0x3,this['_cookieMat'+'rix']=null,this['_atlasView'+'port']=null,this['atlasViewp'+'ortAllocat'+'ed']=!(-0x2c7*-0xb+-0xe28+0x2*-0x832),this['atlasVersi'+'on']=0xf5a+0x16*-0x101+0x1af*0x4,this['atlasSlotI'+'ndex']=-0x21f4+-0x1e2c+0x260*0x1b,this['atlasSlotU'+'pdated']=!(-0x4e7*0x6+0x4*0x469+0xbc7),this['_node']=null,this['_renderDat'+'a']=[],this['visibleThi'+'sFrame']=!(0xcd*-0xa+-0x32*0x3b+0x1389),this['maxScreenS'+'ize']=0xb*-0x1e1+0x1*0x17fb+-0x1*0x350,this['_updateSha'+'dowBias']());}['destroy'](){var _0x468d33;(_0x468d33=this['_evtDevice'+'Restored'])==null||_0x468d33['off'](),this['_evtDevice'+'Restored']=null,this['_destroySh'+'adowMap'](),this['releaseRen'+'derData'](),this['_renderDat'+'a']=null;}['onDeviceRe'+'stored'](){this['shadowUpda'+'teMode']===Ps&&(this['shadowUpda'+'teMode']=xr);}['releaseRen'+'derData'](){if(this['_renderDat'+'a']){for(let _0x525e9e=0x1*0x197e+-0xf0+-0x188e;_0x525e9e<this['_renderDat'+'a']['length'];_0x525e9e++)this['_renderDat'+'a'][_0x525e9e]['destroy']();this['_renderDat'+'a']['length']=0x38*-0x77+-0x1ebd+0x38c5;}}['addLayer'](_0x11a364){this['layers']['add'](_0x11a364);}['removeLaye'+'r'](_0x2048b4){this['layers']['delete'](_0x2048b4);}set['shadowSamp'+'les'](_0x209cac){this['_softShado'+'wParams'][-0x782+0x698*0x2+-0x5ae]=_0x209cac;}get['shadowSamp'+'les'](){return this['_softShado'+'wParams'][-0xb*-0x197+-0x44*-0x93+-0x3889];}set['shadowBloc'+'kerSamples'](_0x275436){this['_softShado'+'wParams'][0x2b3*0x9+-0x19*0xb7+-0x66b]=_0x275436;}get['shadowBloc'+'kerSamples'](){return this['_softShado'+'wParams'][0x94*0x14+0x1283+0x1e12*-0x1];}set['shadowBias'](_0x545daa){this['_shadowBia'+'s']!==_0x545daa&&(this['_shadowBia'+'s']=_0x545daa,this['_updateSha'+'dowBias']());}get['shadowBias'](){return this['_shadowBia'+'s'];}set['numCascade'+'s'](_0x316623){(!this['cascades']||this['numCascade'+'s']!==_0x316623)&&(this['cascades']=lA[_0x316623-(0xf*0x7a+0x26c3+-0x8*0x5bd)],this['_shadowMat'+'rixPalette']=new Float32Array(0x3*-0x1a3+-0x14d5+0x19fe),this['_shadowCas'+'cadeDistan'+'ces']=new Float32Array(0x205+-0xb*-0x347+-0x260e),this['_destroySh'+'adowMap'](),this['updateKey']());}get['numCascade'+'s'](){return this['cascades']['length'];}set['cascadeBle'+'nd'](_0xee576){this['_cascadeBl'+'end']!==_0xee576&&(this['_cascadeBl'+'end']=_0xee576,this['updateKey']());}get['cascadeBle'+'nd'](){return this['_cascadeBl'+'end'];}set['shadowMap'](_0x567cc6){this['_shadowMap']!==_0x567cc6&&(this['_destroySh'+'adowMap'](),this['_shadowMap']=_0x567cc6);}get['shadowMap'](){return this['_shadowMap'];}set['mask'](_0x321822){this['_mask']!==_0x321822&&(this['_mask']=_0x321822,this['updateKey'](),this['updateClus'+'teredFlags']());}get['mask'](){return this['_mask'];}get['numShadowF'+'aces'](){const _0x9bc220=this['_type'];return _0x9bc220===ve?this['numCascade'+'s']:_0x9bc220===Ke?0xb*0x237+-0x85c+-0xffb:-0x1bc3+0x1*0x1565+-0x1*-0x65f;}set['type'](_0x1fcd45){if(this['_type']===_0x1fcd45)return;this['_type']=_0x1fcd45,this['_destroySh'+'adowMap'](),this['_updateSha'+'dowBias'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x53cb8d=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowUpda'+'teOverride'+'s']=null,this['shadowType']=_0x53cb8d;}get['type'](){return this['_type'];}set['shape'](_0x4af623){if(this['_shape']===_0x4af623)return;this['_shape']=_0x4af623,this['_destroySh'+'adowMap'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0xee5557=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowType']=_0xee5557;}get['shape'](){return this['_shape'];}set['usePhysica'+'lUnits'](_0x17c16b){this['_usePhysic'+'alUnits']!==_0x17c16b&&(this['_usePhysic'+'alUnits']=_0x17c16b,this['_updateLin'+'earColor']());}get['usePhysica'+'lUnits'](){return this['_usePhysic'+'alUnits'];}set['shadowType'](_0x2b4b8a){if(this['_shadowTyp'+'e']===_0x2b4b8a)return;let _0x2812a4=qi['get'](_0x2b4b8a);_0x2812a4||(_0x2b4b8a=$s);const _0x243d24=this['device'];_0x2b4b8a===al&&!_0x243d24['textureFlo'+'atRenderab'+'le']&&!_0x243d24['textureHal'+'fFloatRend'+'erable']&&(_0x2b4b8a=$s),this['_type']===Ke&&_0x2b4b8a!==tv&&_0x2b4b8a!==$s&&_0x2b4b8a!==sv&&_0x2b4b8a!==iv&&_0x2b4b8a!==al&&(_0x2b4b8a=$s),_0x2b4b8a===Jp&&(!_0x243d24['textureFlo'+'atRenderab'+'le']||!_0x243d24['textureFlo'+'atFilterab'+'le'])&&(_0x2b4b8a=au),_0x2b4b8a===au&&!_0x243d24['textureHal'+'fFloatRend'+'erable']&&(_0x2b4b8a=$s),_0x2812a4=qi['get'](_0x2b4b8a),this['_isVsm']=(_0x2812a4==null?void(0x32*0x74+-0x1*0xdff+-0x2e3*0x3):_0x2812a4['vsm'])??!(0x323+-0x2e7*-0x1+-0x609),this['_isPcf']=(_0x2812a4==null?void(-0x4*0x3eb+-0x509*-0x1+0x7*0x185):_0x2812a4['pcf'])??!(0x175*-0x11+-0x3a2+0x1c68),this['_shadowTyp'+'e']=_0x2b4b8a,this['_destroySh'+'adowMap'](),this['updateKey']();}get['shadowType'](){return this['_shadowTyp'+'e'];}set['enabled'](_0x5df453){this['_enabled']!==_0x5df453&&(this['_enabled']=_0x5df453,this['layersDirt'+'y']());}get['enabled'](){return this['_enabled'];}set['castShadow'+'s'](_0x5ddab6){this['_castShado'+'ws']!==_0x5ddab6&&(this['_castShado'+'ws']=_0x5ddab6,this['_destroySh'+'adowMap'](),this['layersDirt'+'y'](),this['updateKey']());}get['castShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']!==fi&&this['_mask']!==-0xccf+0x2b*-0xc7+0x2e3c*0x1;}set['shadowInte'+'nsity'](_0x494c73){this['_shadowInt'+'ensity']!==_0x494c73&&(this['_shadowInt'+'ensity']=_0x494c73,this['updateKey']());}get['shadowInte'+'nsity'](){return this['_shadowInt'+'ensity'];}get['bakeShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']===fi;}set['shadowReso'+'lution'](_0x33f0e0){this['_shadowRes'+'olution']!==_0x33f0e0&&(this['_type']===Ke?_0x33f0e0=Math['min'](_0x33f0e0,this['device']['maxCubeMap'+'Size']):_0x33f0e0=Math['min'](_0x33f0e0,this['device']['maxTexture'+'Size']),this['_shadowRes'+'olution']=_0x33f0e0,this['_destroySh'+'adowMap']());}get['shadowReso'+'lution'](){return this['_shadowRes'+'olution'];}set['vsmBlurSiz'+'e'](_0xa69734){this['_vsmBlurSi'+'ze']!==_0xa69734&&(_0xa69734%(-0x843+0x5*-0x322+0x17ef)===-0x1d83+0x24d1+-0x74e&&_0xa69734++,this['_vsmBlurSi'+'ze']=_0xa69734);}get['vsmBlurSiz'+'e'](){return this['_vsmBlurSi'+'ze'];}set['normalOffs'+'etBias'](_0x16b37c){if(this['_normalOff'+'setBias']!==_0x16b37c){const _0x4639ce=!this['_normalOff'+'setBias']&&_0x16b37c||this['_normalOff'+'setBias']&&!_0x16b37c;this['_normalOff'+'setBias']=_0x16b37c,_0x4639ce&&this['updateKey']();}}get['normalOffs'+'etBias'](){return this['_normalOff'+'setBias'];}set['falloffMod'+'e'](_0x53a977){this['_falloffMo'+'de']!==_0x53a977&&(this['_falloffMo'+'de']=_0x53a977,this['updateKey'](),this['updateClus'+'teredFlags']());}get['falloffMod'+'e'](){return this['_falloffMo'+'de'];}set['innerConeA'+'ngle'](_0x21c1bf){this['_innerCone'+'Angle']!==_0x21c1bf&&(this['_innerCone'+'Angle']=_0x21c1bf,this['_innerCone'+'AngleCos']=Math['cos'](_0x21c1bf*Math['PI']/(-0x229+-0xb23+0xe00)),this['updateClus'+'terData'](!(0x1*-0x19fd+0x184b+0x1b3),!(-0x337*0x6+0x1*0xfa1+0x1*0x3a9)),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['innerConeA'+'ngle'](){return this['_innerCone'+'Angle'];}set['outerConeA'+'ngle'](_0x49ce15){this['_outerCone'+'Angle']!==_0x49ce15&&(this['_outerCone'+'Angle']=_0x49ce15,this['_updateOut'+'erAngle'](_0x49ce15),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['outerConeA'+'ngle'](){return this['_outerCone'+'Angle'];}set['penumbraSi'+'ze'](_0x10365f){this['_penumbraS'+'ize']=_0x10365f,this['_softShado'+'wParams'][-0x120f+0x1*0x13df+-0x21*0xe]=_0x10365f;}get['penumbraSi'+'ze'](){return this['_penumbraS'+'ize'];}set['penumbraFa'+'lloff'](_0x44d606){this['_softShado'+'wParams'][-0x1*0x211b+-0x1*0x1139+0x3257]=_0x44d606;}get['penumbraFa'+'lloff'](){return this['_softShado'+'wParams'][-0x20f1+0xd3*-0xf+0x2d51];}['_updateOut'+'erAngle'](_0x219f94){const _0x110b18=_0x219f94*Math['PI']/(-0x6c6*-0x2+0x6*-0x4fd+-0x1*-0x1116);this['_outerCone'+'AngleCos']=Math['cos'](_0x110b18),this['_outerCone'+'AngleSin']=Math['sin'](_0x110b18),this['updateClus'+'terData'](!(-0xc1+-0x139*0x1f+0x26a9),!(-0x2*0x33d+-0x2*-0x1b1+0x318));}set['intensity'](_0x1fb7f0){this['_intensity']!==_0x1fb7f0&&(this['_intensity']=_0x1fb7f0,this['_updateLin'+'earColor']());}get['intensity'](){return this['_intensity'];}set['affectSpec'+'ularity'](_0xfa6e00){this['_type']===ve&&(this['_affectSpe'+'cularity']=_0xfa6e00,this['updateKey']());}get['affectSpec'+'ularity'](){return this['_affectSpe'+'cularity'];}set['luminance'](_0x5be78e){this['_luminance']!==_0x5be78e&&(this['_luminance']=_0x5be78e,this['_updateLin'+'earColor']());}get['luminance'](){return this['_luminance'];}get['cookieMatr'+'ix'](){return this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new te()),this['_cookieMat'+'rix'];}get['atlasViewp'+'ort'](){return this['_atlasView'+'port']||(this['_atlasView'+'port']=new re(-0x1fb4*0x1+0x5*-0x136+-0x166*-0x1b,-0xc*-0x18+-0x181a+0x16fa,-0x7f4+-0x51+-0x2*-0x423,-0xc1+0x1e85+0x1*-0x1dc3)),this['_atlasView'+'port'];}set['cookie'](_0x429c90){this['_cookie']!==_0x429c90&&(this['_cookie']=_0x429c90,this['updateKey']());}get['cookie'](){return this['_cookie'];}set['cookieFall'+'off'](_0x2f849e){this['_cookieFal'+'loff']!==_0x2f849e&&(this['_cookieFal'+'loff']=_0x2f849e,this['updateKey']());}get['cookieFall'+'off'](){return this['_cookieFal'+'loff'];}set['cookieChan'+'nel'](_0x535930){if(this['_cookieCha'+'nnel']!==_0x535930){if(_0x535930['length']<0x1*-0xa72+0x21fc+-0x1787){const _0x140d26=_0x535930['charAt'](_0x535930['length']-(-0x1278+-0x1e*0x45+0x1a8f)),_0x490433=0x1*0x2ed+0x3f0+-0x6da-_0x535930['length'];for(let _0x176f3f=-0x1bc0+-0x2039+-0x49d*-0xd;_0x176f3f<_0x490433;_0x176f3f++)_0x535930+=_0x140d26;}this['_cookieCha'+'nnel']=_0x535930,this['updateKey'](),this['updateClus'+'teredFlags']();}}get['cookieChan'+'nel'](){return this['_cookieCha'+'nnel'];}set['cookieTran'+'sform'](_0x307346){this['_cookieTra'+'nsform']!==_0x307346&&(this['_cookieTra'+'nsform']=_0x307346,this['_cookieTra'+'nsformSet']=!!_0x307346,_0x307346&&!this['_cookieOff'+'set']&&(this['cookieOffs'+'et']=new J(),this['_cookieOff'+'setSet']=!(0x10b7+0x2*-0xd05+0x954)),this['updateKey']());}get['cookieTran'+'sform'](){return this['_cookieTra'+'nsform'];}set['cookieOffs'+'et'](_0x4b93fa){if(this['_cookieOff'+'set']===_0x4b93fa)return;!!(this['_cookieTra'+'nsformSet']||_0x4b93fa)&&!_0x4b93fa&&this['_cookieOff'+'set']?this['_cookieOff'+'set']['set'](-0x82d+0xa31+0xc*-0x2b,-0xa6c+-0xaa1+0x150d*0x1):this['_cookieOff'+'set']=_0x4b93fa,this['_cookieOff'+'setSet']=!!_0x4b93fa,_0x4b93fa&&!this['_cookieTra'+'nsform']&&(this['cookieTran'+'sform']=new re(0xa*-0x2dc+-0x1*-0x121f+0xa7a,0x87*0x12+-0x2*0x515+0xad*0x1,0x5f8+-0x22e*0x8+0xb78,-0x65*-0x56+0xd*0x2c0+-0x45ae),this['_cookieTra'+'nsformSet']=!(0x1*-0x159b+-0xc3+0x3*0x775)),this['updateKey']();}get['cookieOffs'+'et'](){return this['_cookieOff'+'set'];}['beginFrame'](){this['visibleThi'+'sFrame']=this['_type']===ve&&this['_enabled'],this['maxScreenS'+'ize']=0x16*0x1a5+-0x26ca+0xa7*0x4,this['atlasViewp'+'ortAllocat'+'ed']=!(0x861+0x3*0x4f0+-0x1730),this['atlasSlotU'+'pdated']=!(-0x1058+-0x1885+0x28de);}['_destroySh'+'adowMap'](){if(this['releaseRen'+'derData'](),this['_shadowMap']&&(this['_shadowMap']['cached']||this['_shadowMap']['destroy'](),this['_shadowMap']=null),this['shadowUpda'+'teMode']===Ps&&(this['shadowUpda'+'teMode']=xr),this['shadowUpda'+'teOverride'+'s']){for(let _0xf54467=-0x20*0xa4+-0x1bbb+0x1*0x303b;_0xf54467<this['shadowUpda'+'teOverride'+'s']['length'];_0xf54467++)this['shadowUpda'+'teOverride'+'s'][_0xf54467]===Ps&&(this['shadowUpda'+'teOverride'+'s'][_0xf54467]=xr);}}['getRenderD'+'ata'](_0x2d6a67,_0x5330f6){for(let _0x17d37d=0x2d*0x6+0x231e*0x1+-0xa*0x39e;_0x17d37d<this['_renderDat'+'a']['length'];_0x17d37d++){const _0x55d6e9=this['_renderDat'+'a'][_0x17d37d];if(_0x55d6e9['camera']===_0x2d6a67&&_0x55d6e9['face']===_0x5330f6)return _0x55d6e9;}const _0x4e7459=new dA(_0x2d6a67,_0x5330f6,this);return this['_renderDat'+'a']['push'](_0x4e7459),_0x4e7459;}['clone'](){const _0x557fb3=new pl(this['device'],this['clusteredL'+'ighting']);return _0x557fb3['type']=this['_type'],_0x557fb3['setColor'](this['_color']),_0x557fb3['intensity']=this['_intensity'],_0x557fb3['affectSpec'+'ularity']=this['_affectSpe'+'cularity'],_0x557fb3['luminance']=this['_luminance'],_0x557fb3['castShadow'+'s']=this['castShadow'+'s'],_0x557fb3['_enabled']=this['_enabled'],_0x557fb3['attenuatio'+'nStart']=this['attenuatio'+'nStart'],_0x557fb3['attenuatio'+'nEnd']=this['attenuatio'+'nEnd'],_0x557fb3['falloffMod'+'e']=this['_falloffMo'+'de'],_0x557fb3['shadowType']=this['_shadowTyp'+'e'],_0x557fb3['vsmBlurSiz'+'e']=this['_vsmBlurSi'+'ze'],_0x557fb3['vsmBlurMod'+'e']=this['vsmBlurMod'+'e'],_0x557fb3['vsmBias']=this['vsmBias'],_0x557fb3['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x557fb3['mask']=this['mask'],this['shadowUpda'+'teOverride'+'s']&&(_0x557fb3['shadowUpda'+'teOverride'+'s']=this['shadowUpda'+'teOverride'+'s']['slice']()),_0x557fb3['innerConeA'+'ngle']=this['_innerCone'+'Angle'],_0x557fb3['outerConeA'+'ngle']=this['_outerCone'+'Angle'],_0x557fb3['numCascade'+'s']=this['numCascade'+'s'],_0x557fb3['cascadeDis'+'tribution']=this['cascadeDis'+'tribution'],_0x557fb3['cascadeBle'+'nd']=this['_cascadeBl'+'end'],_0x557fb3['shape']=this['_shape'],_0x557fb3['shadowDept'+'hState']['copy'](this['shadowDept'+'hState']),_0x557fb3['shadowBias']=this['shadowBias'],_0x557fb3['normalOffs'+'etBias']=this['_normalOff'+'setBias'],_0x557fb3['shadowReso'+'lution']=this['_shadowRes'+'olution'],_0x557fb3['shadowDist'+'ance']=this['shadowDist'+'ance'],_0x557fb3['shadowInte'+'nsity']=this['shadowInte'+'nsity'],_0x557fb3['shadowSamp'+'les']=this['shadowSamp'+'les'],_0x557fb3['shadowBloc'+'kerSamples']=this['shadowBloc'+'kerSamples'],_0x557fb3['penumbraSi'+'ze']=this['penumbraSi'+'ze'],_0x557fb3['penumbraFa'+'lloff']=this['penumbraFa'+'lloff'],_0x557fb3;}static['getLightUn'+'itConversi'+'on'](_0x1ebee5,_0x1468eb=Math['PI']/(-0x21ae+0xa*0xda+-0x125*-0x16),_0x492932=-0xf4b+0x1786+0x31*-0x2b){switch(_0x1ebee5){case Ze:{const _0x448050=Math['cos'](_0x1468eb),_0x13246c=Math['cos'](_0x492932);return(0x1e46+0x1*-0x691+-0x1*0x17b3)*Math['PI']*(0x188c+0x9*0x1b7+-0x27fa-_0x13246c+(_0x13246c-_0x448050)/(0x58d*-0x2+-0x4+0xb20));}case Ke:return(0x181d*-0x1+-0xed8+0x26f9)*Math['PI'];case ve:return-0x1b37+0x119*0x17+0x1f9;}}['_getUnifor'+'mBiasValue'+'s'](_0x359723){const _0x218192=_0x359723['shadowCame'+'ra']['_farClip'];switch(this['_type']){case Ke:wi['bias']=this['shadowBias'],wi['normalBias']=this['_normalOff'+'setBias'];break;case Ze:this['_isVsm']?wi['bias']=-(-0xd*0x1b2+-0xc99+0x22a3*0x1+0.00001)*(0x3b*0x17+-0x212a+0x1bf1):wi['bias']=this['shadowBias']*(-0x12ef+0x9f1+0x912),wi['normalBias']=this['_isVsm']?this['vsmBias']/(this['attenuatio'+'nEnd']/(0x3*0x8c2+0x445*0x7+0x95b*-0x6)):this['_normalOff'+'setBias'];break;case ve:this['_isVsm']?wi['bias']=-(0x1498+0x1cd1+-0x3169+0.00001)*(-0xa85*0x1+0xe6d*-0x1+0x1906):wi['bias']=this['shadowBias']/_0x218192*(-0x2156+0x1f0*0x2+0x1dda),wi['normalBias']=this['_isVsm']?this['vsmBias']/(_0x218192/(-0x20fb+-0x1*0x48b+0x258d)):this['_normalOff'+'setBias'];break;}return wi;}['getColor'](){return this['_color'];}['getBoundin'+'gSphere'](_0xc19bd0){if(this['_type']===Ze){const _0x384081=this['attenuatio'+'nEnd'],_0xdec068=this['_outerCone'+'Angle'],_0xbc56cb=this['_outerCone'+'AngleCos'],_0x3edb87=this['_node'];dc['copy'](_0x3edb87['up']),_0xdec068>-0x121d+0x3*-0xa6f+0x3197?(_0xc19bd0['radius']=_0x384081*this['_outerCone'+'AngleSin'],dc['mulScalar'](-_0x384081*_0xbc56cb)):(_0xc19bd0['radius']=_0x384081/((0x1a79+-0x367+0x2e2*-0x8)*_0xbc56cb),dc['mulScalar'](-_0xc19bd0['radius'])),_0xc19bd0['center']['add2'](_0x3edb87['getPositio'+'n'](),dc);}else this['_type']===Ke&&(_0xc19bd0['center']=this['_node']['getPositio'+'n'](),_0xc19bd0['radius']=this['attenuatio'+'nEnd']);}['getBoundin'+'gBox'](_0xfce2e4){if(this['_type']===Ze){const _0x3ba14b=this['attenuatio'+'nEnd'],_0x5d0c97=this['_outerCone'+'Angle'],_0x402d41=this['_node'],_0x4253b9=Math['abs'](Math['sin'](_0x5d0c97*Y['DEG_TO_RAD'])*_0x3ba14b);_0xfce2e4['center']['set'](0x1*0xf17+-0x9a7*-0x1+0xc5f*-0x2,-_0x3ba14b*(-0x1*-0x1391+0x1408+-0x2799+0.5),0x680*0x6+-0xa93+-0x1c6d),_0xfce2e4['halfExtent'+'s']['set'](_0x4253b9,_0x3ba14b*(-0x6d9+0x43*0x6f+0x1*-0x1634+0.5),_0x4253b9),_0xfce2e4['setFromTra'+'nsformedAa'+'bb'](_0xfce2e4,_0x402d41['getWorldTr'+'ansform'](),!(-0x2129+0x135b+0x2*0x6e7));}else this['_type']===Ke&&(_0xfce2e4['center']['copy'](this['_node']['getPositio'+'n']()),_0xfce2e4['halfExtent'+'s']['set'](this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd']));}['_updateSha'+'dowBias'](){if(this['_type']===Ke&&!this['clusteredL'+'ighting'])this['shadowDept'+'hState']['depthBias']=0x1*-0x59+0xda3+-0xd4a,this['shadowDept'+'hState']['depthBiasS'+'lope']=-0x12ca+-0x1b65*0x1+-0x2e2f*-0x1;else{const _0x4f7785=this['shadowBias']*-(0x126f+0x1*0x37d+-0x1204);this['shadowDept'+'hState']['depthBias']=_0x4f7785,this['shadowDept'+'hState']['depthBiasS'+'lope']=_0x4f7785;}}['_updateLin'+'earColor'](){let _0x5025ad=this['_intensity'];this['_usePhysic'+'alUnits']&&(_0x5025ad=this['_luminance']/pl['getLightUn'+'itConversi'+'on'](this['_type'],this['_outerCone'+'Angle']*Y['DEG_TO_RAD'],this['_innerCone'+'Angle']*Y['DEG_TO_RAD']));const _0x1dc450=this['_color'],_0x180e4f=this['_colorLine'+'ar'];_0x5025ad>=0x1*-0x1fb9+-0x326*0x1+0x2*0x1170?ho['linear'](_0x1dc450)['mulScalar'](_0x5025ad):ho['copy'](_0x1dc450)['mulScalar'](_0x5025ad)['linear'](),_0x180e4f[-0x21b+-0x295+-0x50*-0xf]=ho['r'],_0x180e4f[0x2471+-0x16d8+-0xd98]=ho['g'],_0x180e4f[-0x2113*0x1+-0xf95+0x30aa]=ho['b'],this['updateClus'+'terData'](!(0x14ef+0x29c+-0x29*0x93));}['setColor'](){arguments['length']===0x335+0x21d3+-0x2507?this['_color']['set'](arguments[-0x2*0xa22+-0x245d+0x38a1]['r'],arguments[-0x1*-0x149d+0x16*-0x109+0x229]['g'],arguments[0x223d+0x24c5+-0x4702]['b']):arguments['length']===0x11d7*-0x2+0x175d*0x1+0x20e*0x6&&this['_color']['set'](arguments[-0x4ee+-0x526*-0x6+-0x19f6],arguments[-0x25c2+0x18*0x11b+0xb3b],arguments[-0x1*0xa53+-0x18d8+0x1*0x232d]),this['_updateLin'+'earColor']();}['layersDirt'+'y'](){this['layers']['forEach'](_0x11bf10=>{_0x11bf10['hasLight'](this)&&_0x11bf10['markLights'+'Dirty']();});}['updateKey'](){let _0x182f7e=this['_type']<<-0x1e68+-0x1968+0x8b*0x67|this['_shadowTyp'+'e']<<-0x1878+0x5*-0x716+-0x1*-0x3bff|this['_falloffMo'+'de']<<-0x109e+0x6*0x626+-0x142f|(this['_normalOff'+'setBias']!==0x87*-0x13+0x243c+-0x1a37?0x1675+0x1ee0+-0x1aaa*0x2:0x2df*-0x1+-0x3e*0x6a+0x1c8b)<<0xe8b*0x1+0x762*0x1+-0x15d7|(this['_cookie']?-0xb52*-0x1+0x112c+0x27*-0xbb:-0x110+0x1*0x115f+0x5*-0x343)<<0x1c9+-0x208+-0x4*-0x15|(this['_cookieFal'+'loff']?-0x16f*-0x8+-0x4f*0x66+-0x2f*-0x6d:0x28*-0xf2+-0xb0e+0x30de)<<-0x36a*-0x4+-0x831+-0x563|pf[this['_cookieCha'+'nnel']['charAt'](0x4*0x145+-0x64*0xb+-0x32*0x4)]<<-0x210b+-0x101+-0x2*-0x110f|(this['_cookieTra'+'nsform']?0xe5*0x28+0x100e+0x33d5*-0x1:-0x9c3+-0x1907+0x22ca*0x1)<<0x5a3+0xf*-0x1c5+0x53d*0x4|this['_shape']<<0x64e+-0x108*-0x2+0x42a*-0x2|(this['numCascade'+'s']>0x1f*0x101+0xbfb+-0x2b1a?-0x1*-0x712+-0x25a3+0x45e*0x7:0x2132+0x20*-0x12a+0x40e)<<-0x9ef*-0x1+-0xdd*0x1f+0x10dd|(this['_cascadeBl'+'end']>0xb*0x35d+0x531+-0x1b0*0x19?0x1*0x11f+-0x202a+0x1*0x1f0c:-0x57+0x2*0xff1+-0x1f8b)<<-0x1c61+0x15d7*0x1+0x692|(this['affectSpec'+'ularity']?-0x1d05+0x2314+-0x60e:0x22c*0xe+-0x1*0xdd9+-0x108f)<<-0x593*0x3+0x1609+0x1*-0x549|this['mask']<<0x1522*0x1+0x1*-0x180f+0x2f3*0x1|(this['_castShado'+'ws']?0x30c+0x4b7*0x3+-0x1130:0x23d6+-0x15d*0x3+-0x1fbf)<<-0x3c5+0x64*0x27+-0xb74*0x1;this['_cookieCha'+'nnel']['length']===-0xc*-0x1fd+0x162*0x1+0x869*-0x3&&(_0x182f7e|=pf[this['_cookieCha'+'nnel']['charAt'](0x1*-0x11bd+0x74*0x35+-0x2*0x323)]<<0x1657+-0x45d*-0x1+-0xa*0x2aa,_0x182f7e|=pf[this['_cookieCha'+'nnel']['charAt'](0x3*0x7ea+-0x1*0x1d3+-0x15e9)]<<0xa3*-0x2e+-0x243e*-0x1+-0x6e6),_0x182f7e!==this['key']&&this['layersDirt'+'y'](),this['key']=_0x182f7e;}['updateClus'+'teredFlags'](){const _0xa38771=!!(this['mask']&Ss),_0x436340=!!(this['mask']&di);this['clusteredF'+'lags']=(this['type']===Ze?-0x610+-0xac*-0x35+0x9d9*-0x3:-0x17a9+0x16e9+0x8*0x18)<<0x1*0x22ea+-0x2357*-0x1+-0x4623|(this['_shape']&-0x1*0x188c+-0x142f*-0x1+0x118*0x4)<<0xb59+-0x1*-0x1915+-0x2452*0x1|(this['_falloffMo'+'de']&0x5fa+-0x1c4*-0x6+-0x1091*0x1)<<-0x26b3+0x2*-0x10f1+-0x916*-0x8|(cA[this['_cookieCha'+'nnel']]??0x14d*-0x1+-0x204e*-0x1+-0x1f01*0x1)<<-0x26b4+0x1a72+0xc59|(_0xa38771?-0x1bb9+0x1*0xcd7+0xee3:-0x259f+0x1*0x16d3+0x4*0x3b3)<<-0x85b*-0x4+0x26ef+-0x4845|(_0x436340?-0xcb9+0x23c7+-0x170d:-0x19ed+-0x2aa*0xe+0x3f39)<<-0xa54+0xa4f+0x1a;}['getCluster'+'edFlags'](_0x57eadb,_0x326756){return this['clusteredF'+'lags']|((_0x57eadb?Math['floor'](this['shadowInte'+'nsity']*(0x1*-0x111e+0xf90+0x1*0x28d)):-0xc5*-0xa+-0x15*0x111+0x1*0xeb3)&-0x5*-0x36f+-0x35*0x3a+0x1*-0x42a)<<-0x1db7*-0x1+0x143d+0x8b*-0x5c|((_0x326756?Math['floor'](this['cookieInte'+'nsity']*(0x1*-0x1bc4+-0x1e49+-0xec3*-0x4)):-0x7f*-0x39+0xf94*-0x1+-0xcb3)&-0x17b5+-0x1ab5+0x7b*0x6b)<<-0x118+0x20*0xad+0x40*-0x52;}['updateClus'+'terData'](_0x2782b9,_0x2b53f4){const {clusteredData16:_0x5e7080}=this,_0x1c11f8=Mn['float2Half'];_0x2782b9&&(_0x5e7080[0x455*0x6+0xa51*-0x2+0x62*-0xe]=_0x1c11f8(Y['clamp'](this['_colorLine'+'ar'][-0x1a6d+-0x109f+0x2b0c]/$c,-0x25b9+0x5*-0x60+0x2799,0x11953*0x1+-0x14afe+0x1318b)),_0x5e7080[-0x7b*0x19+-0xc4a+-0x22*-0xb7]=_0x1c11f8(Y['clamp'](this['_colorLine'+'ar'][-0x223a+0x10b4*-0x2+-0x1*-0x43a3]/$c,-0x12d+-0x2*0x1042+0x21b1,0x1434a+0x15b*-0x127+-0x3*-0x6ed1)),_0x5e7080[-0x5e8+0x9*-0x3b+0x5*0x199]=_0x1c11f8(Y['clamp'](this['_colorLine'+'ar'][-0x1124+0x4*0xe7+-0x1*-0xd8a]/$c,-0x65*-0x7+0x1367+-0x162a,0x29*-0x561+0x2ba3+-0x9*-0x3016))),_0x2b53f4&&(_0x5e7080[0xa67+0x509+0x54*-0x2f]=_0x1c11f8(this['_innerCone'+'AngleCos']),_0x5e7080[0x29*-0x92+-0x33*0x44+0x24f3]=_0x1c11f8(this['_outerCone'+'AngleCos']));}}class Mv{constructor(_0x58bd53,_0xa7dc4f,_0x4e62de){h(this,'_areaLight'+'sEnabled',!(-0x22f8+-0x2*0x3f1+0x35*0xcf)),h(this,'_cells',new D(-0x12f5+0xa39*0x3+-0xbac,0x7b*-0x49+-0x1*0x1d4e+0x34*0x13d,0x15ac+-0x1*-0xf8e+-0x2530)),h(this,'_maxLights'+'PerCell',0x3*-0x208+-0x2185+0x289c),h(this,'_shadowsEn'+'abled',!(0x1019*-0x2+0x147f+0xbb3)),h(this,'_shadowTyp'+'e',$s),h(this,'_shadowAtl'+'asResoluti'+'on',0x165a+0x1*-0x1f7d+0x1123),h(this,'_cookiesEn'+'abled',!(0x12e+0xbbd+-0x1d*0x72)),h(this,'_cookieAtl'+'asResoluti'+'on',-0x2*0xa70+0x241f*0x1+-0x7*0x109),h(this,'debugLayer'),h(this,'atlasSplit',null),(this['_supportsA'+'reaLights']=_0x58bd53,this['_maxTextur'+'eSize']=_0xa7dc4f,this['_dirtyLigh'+'tsFnc']=_0x4e62de);}['applySetti'+'ngs'](_0x50da5d){this['shadowsEna'+'bled']=_0x50da5d['lightingSh'+'adowsEnabl'+'ed']??this['shadowsEna'+'bled'],this['cookiesEna'+'bled']=_0x50da5d['lightingCo'+'okiesEnabl'+'ed']??this['cookiesEna'+'bled'],this['areaLights'+'Enabled']=_0x50da5d['lightingAr'+'eaLightsEn'+'abled']??this['areaLights'+'Enabled'],this['shadowAtla'+'sResolutio'+'n']=_0x50da5d['lightingSh'+'adowAtlasR'+'esolution']??this['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x50da5d['lightingCo'+'okieAtlasR'+'esolution']??this['cookieAtla'+'sResolutio'+'n'],this['maxLightsP'+'erCell']=_0x50da5d['lightingMa'+'xLightsPer'+'Cell']??this['maxLightsP'+'erCell'],this['shadowType']=_0x50da5d['lightingSh'+'adowType']??this['shadowType'],_0x50da5d['lightingCe'+'lls']&&(this['cells']=new D(_0x50da5d['lightingCe'+'lls']));}set['cells'](_0x2b4986){this['_cells']['copy'](_0x2b4986);}get['cells'](){return this['_cells'];}set['maxLightsP'+'erCell'](_0x1b4be0){this['_maxLights'+'PerCell']=Y['clamp'](_0x1b4be0,0x862+-0x11f3*0x2+0x1b85,-0x1fa3+-0x17e8+0x2*0x1c45);}get['maxLightsP'+'erCell'](){return this['_maxLights'+'PerCell'];}set['cookieAtla'+'sResolutio'+'n'](_0x1c5903){this['_cookieAtl'+'asResoluti'+'on']=Y['clamp'](_0x1c5903,-0x1*-0x2231+0x2679+-0x488a,this['_maxTextur'+'eSize']);}get['cookieAtla'+'sResolutio'+'n'](){return this['_cookieAtl'+'asResoluti'+'on'];}set['shadowAtla'+'sResolutio'+'n'](_0x16ff4c){this['_shadowAtl'+'asResoluti'+'on']=Y['clamp'](_0x16ff4c,-0xc07+0x2639*0x1+0x2f*-0x8e,this['_maxTextur'+'eSize']);}get['shadowAtla'+'sResolutio'+'n'](){return this['_shadowAtl'+'asResoluti'+'on'];}set['shadowType'](_0x18156a){this['_shadowTyp'+'e']!==_0x18156a&&(this['_shadowTyp'+'e']=_0x18156a,this['_dirtyLigh'+'tsFnc']());}get['shadowType'](){return this['_shadowTyp'+'e'];}set['cookiesEna'+'bled'](_0x1f4717){this['_cookiesEn'+'abled']!==_0x1f4717&&(this['_cookiesEn'+'abled']=_0x1f4717,this['_dirtyLigh'+'tsFnc']());}get['cookiesEna'+'bled'](){return this['_cookiesEn'+'abled'];}set['areaLights'+'Enabled'](_0x46de1f){this['_supportsA'+'reaLights']&&this['_areaLight'+'sEnabled']!==_0x46de1f&&(this['_areaLight'+'sEnabled']=_0x46de1f,this['_dirtyLigh'+'tsFnc']());}get['areaLights'+'Enabled'](){return this['_areaLight'+'sEnabled'];}set['shadowsEna'+'bled'](_0x31e61d){this['_shadowsEn'+'abled']!==_0x31e61d&&(this['_shadowsEn'+'abled']=_0x31e61d,this['_dirtyLigh'+'tsFnc']());}get['shadowsEna'+'bled'](){return this['_shadowsEn'+'abled'];}}class xa{constructor(_0x510650){this['morph']=_0x510650,_0x510650['incRefCoun'+'t'](),this['device']=_0x510650['device'];const _0x1721e7=_0x510650['_targets']['length'];this['shader']=this['_createSha'+'der'](_0x1721e7),this['_weights']=[],this['_weightMap']=new Map();for(let _0x4a6173=-0x11*0x23+-0x1*0x1d4d+0x1fa0;_0x4a6173<_0x510650['_targets']['length'];_0x4a6173++){const _0x2a2edd=_0x510650['_targets'][_0x4a6173];_0x2a2edd['name']&&this['_weightMap']['set'](_0x2a2edd['name'],_0x4a6173),this['setWeight'](_0x4a6173,_0x2a2edd['defaultWei'+'ght']);}this['_shaderMor'+'phWeights']=new Float32Array(_0x1721e7),this['_shaderMor'+'phIndex']=new Uint32Array(_0x1721e7);const _0x3fc1b9=(_0x5481ea,_0x2d1498)=>(this[_0x2d1498]=_0x510650['_createTex'+'ture'](_0x5481ea,_0x510650['_renderTex'+'tureFormat']),new gt({'colorBuffer':this[_0x2d1498],'depth':!(0x1*0xd97+-0x248*0xc+0xdca)}));_0x510650['morphPosit'+'ions']&&(this['rtPosition'+'s']=_0x3fc1b9('MorphRTPos','texturePos'+'itions')),_0x510650['morphNorma'+'ls']&&(this['rtNormals']=_0x3fc1b9('MorphRTNrm','textureNor'+'mals')),this['_texturePa'+'rams']=new Float32Array([_0x510650['morphTextu'+'reWidth'],_0x510650['morphTextu'+'reHeight']]);const _0x148d07=_0x510650['aabb']['halfExtent'+'s'];this['_aabbSize']=new Float32Array([_0x148d07['x']*(-0x22ec+0x3*-0x1e4+0x289c),_0x148d07['y']*(0x4c*0xf+-0x914+-0xb*-0x6c),_0x148d07['z']*(-0x1464+-0x11b4+0x261c)]);const _0x379001=_0x510650['aabb']['getMin']();this['_aabbMin']=new Float32Array([_0x379001['x']*(-0x613+-0x3*0xf9+0x900),_0x379001['y']*(0x119*-0x22+0x1899+0xcbb),_0x379001['z']*(-0x1897+-0x1d4d+-0x35e6*-0x1)]),this['_aabbNrmSi'+'ze']=new Float32Array([0xe*0x16b+0x3*-0x68f+-0x2b,-0x22bc+-0x19d0+0x3c8e,-0xb29+-0x5a8+0x10d3]),this['_aabbNrmMi'+'n']=new Float32Array([-(0x2568+0x21c4+-0x472b),-(0x328+-0x208a+0x1*0x1d63),-(0x1*-0x2575+-0x122e*0x2+-0x6b6*-0xb)]),this['aabbSizeId']=this['device']['scope']['resolve']('aabbSize'),this['aabbMinId']=this['device']['scope']['resolve']('aabbMin'),this['morphTextu'+'reId']=this['device']['scope']['resolve']('morphTextu'+'re'),this['morphFacto'+'r']=this['device']['scope']['resolve']('morphFacto'+'r[0]'),this['morphIndex']=this['device']['scope']['resolve']('morphIndex'+'[0]'),this['countId']=this['device']['scope']['resolve']('count'),this['zeroTextur'+'es']=!(0x201d+-0x6*-0x4f+-0x21f6);}['destroy'](){var _0x1c468f,_0x240b3d,_0xd612fd,_0x51824d;this['shader']=null;const _0x553e18=this['morph'];_0x553e18&&(this['morph']=null,_0x553e18['decRefCoun'+'t'](),_0x553e18['refCount']<0x16a1*0x1+0x1405+-0x2aa5&&_0x553e18['destroy']()),(_0x1c468f=this['rtPosition'+'s'])==null||_0x1c468f['destroy'](),this['rtPosition'+'s']=null,(_0x240b3d=this['texturePos'+'itions'])==null||_0x240b3d['destroy'](),this['texturePos'+'itions']=null,(_0xd612fd=this['rtNormals'])==null||_0xd612fd['destroy'](),this['rtNormals']=null,(_0x51824d=this['textureNor'+'mals'])==null||_0x51824d['destroy'](),this['textureNor'+'mals']=null;}['clone'](){return new xa(this['morph']);}['_getWeight'+'Index'](_0x1a5b29){if(typeof _0x1a5b29=='string'){const _0x48543e=this['_weightMap']['get'](_0x1a5b29);return _0x48543e===void(0x1*0x1341+0xe3e*0x1+-0x217f)&&w['errorOnce']('Cannot\x20fin'+'d\x20morph\x20ta'+'rget\x20with\x20'+'name:\x20'+_0x1a5b29+'.'),_0x48543e;}return _0x1a5b29;}['getWeight'](_0x1298e5){const _0x36b758=this['_getWeight'+'Index'](_0x1298e5);return this['_weights'][_0x36b758];}['setWeight'](_0x29914b,_0x5e6c9c){const _0x1e73d8=this['_getWeight'+'Index'](_0x29914b);w['assert'](_0x1e73d8>=0x138c+0x3eb+-0x1777&&_0x1e73d8<this['morph']['_targets']['length']),this['_weights'][_0x1e73d8]=_0x5e6c9c,this['_dirty']=!(0x16*-0x8f+0x5e*-0x1a+0x15d6);}['_createSha'+'der'](_0x498f1c){const _0x393c52=new Map();_0x393c52['set']('{MORPH_TEX'+'TURE_MAX_C'+'OUNT}',_0x498f1c),this['morph']['intRenderF'+'ormat']&&_0x393c52['set']('MORPH_INT','');const _0xe15b83=this['morph']['intRenderF'+'ormat']?'uvec4':'vec4';return $t['createShad'+'er'](this['device'],{'uniqueName':'TextureMor'+'phShader_'+_0x498f1c+'-'+(this['morph']['intRenderF'+'ormat']?'int':'float'),'attributes':{'vertex_position':Me},'vertexChunk':'morphVS','fragmentChunk':'morphPS','fragmentDefines':_0x393c52,'fragmentOutputTypes':[_0xe15b83]});}['_updateTex'+'tureRender'+'Target'](_0x2a35c9,_0x4c2481,_0x40ecd5){const {morph:_0x415039,device:_0x5983f1}=this;this['setAabbUni'+'forms'](_0x40ecd5),this['morphTextu'+'reId']['setValue'](_0x40ecd5?_0x415039['targetsTex'+'turePositi'+'ons']:_0x415039['targetsTex'+'tureNormal'+'s']),_0x5983f1['setBlendSt'+'ate'](pt['NOBLEND']),this['countId']['setValue'](_0x4c2481),this['morphFacto'+'r']['setValue'](this['_shaderMor'+'phWeights']),this['morphIndex']['setValue'](this['_shaderMor'+'phIndex']),Ar(_0x5983f1,_0x2a35c9,this['shader']);}['_updateTex'+'tureMorph'](_0x5a401b){const _0x302240=this['device'];Q['pushGpuMar'+'ker'](_0x302240,'MorphUpdat'+'e'),(_0x5a401b>0x1*-0x1d80+0x2*0x6f0+0xfa*0x10||!this['zeroTextur'+'es'])&&(this['rtPosition'+'s']&&this['_updateTex'+'tureRender'+'Target'](this['rtPosition'+'s'],_0x5a401b,!(-0x31+0x16e3+-0x16b2)),this['rtNormals']&&this['_updateTex'+'tureRender'+'Target'](this['rtNormals'],_0x5a401b,!(0x5*-0x48f+-0x8c1*0x4+0x50*0xb9)),this['zeroTextur'+'es']=_0x5a401b===0x1e9d+-0x821*0x1+0x2*-0xb3e),Q['popGpuMark'+'er'](_0x302240);}['setAabbUni'+'forms'](_0x58a4d4=!(-0x737*0x5+-0x13a0+0x37b3)){this['aabbSizeId']['setValue'](_0x58a4d4?this['_aabbSize']:this['_aabbNrmSi'+'ze']),this['aabbMinId']['setValue'](_0x58a4d4?this['_aabbMin']:this['_aabbNrmMi'+'n']);}['prepareRen'+'dering'](_0x399c2f){this['setAabbUni'+'forms']();}['update'](){this['_dirty']=!(0x164d+-0xa43*0x3+0x29*0x35);const _0xb17531=this['morph']['_targets'],_0x400836=-0x1065+-0x2*0x95f+0x23*0x101+0.00001,_0x5d8238=this['_shaderMor'+'phWeights'],_0x104cd9=this['_shaderMor'+'phIndex'];let _0x398151=-0xfe*0x2+-0xd89+0xf85;for(let _0x50c28f=-0x63+0x25c3+-0x2560;_0x50c28f<_0xb17531['length'];_0x50c28f++)Math['abs'](this['getWeight'](_0x50c28f))>_0x400836&&(_0x5d8238[_0x398151]=this['getWeight'](_0x50c28f),_0x104cd9[_0x398151]=_0x50c28f,_0x398151++);this['_updateTex'+'tureMorph'](_0x398151);}}class sr{constructor(){h(this,'graph',null),h(this,'meshInstan'+'ces',[]),h(this,'skinInstan'+'ces',[]),h(this,'morphInsta'+'nces',[]),(this['cameras']=[],this['lights']=[],this['_shadersVe'+'rsion']=-0x601+0x1655+-0x1054,this['_immutable']=!(0x1a3*-0x3+0x1*0x1808+-0x131e));}['getGraph'](){return this['graph'];}['setGraph'](_0x2e8a71){this['graph']=_0x2e8a71;}['getCameras'](){return this['cameras'];}['setCameras'](_0xec5b7e){this['cameras']=_0xec5b7e;}['getLights'](){return this['lights'];}['setLights'](_0x8f178b){this['lights']=_0x8f178b;}['getMateria'+'ls'](){const _0x28d9f6=[];for(let _0x3196d8=-0x1*-0x10f+-0x1b3b+0x1a2c;_0x3196d8<this['meshInstan'+'ces']['length'];_0x3196d8++){const _0x1d1416=this['meshInstan'+'ces'][_0x3196d8];_0x28d9f6['indexOf'](_0x1d1416['material'])===-(-0x2007+0x19eb+0x61d)&&_0x28d9f6['push'](_0x1d1416['material']);}return _0x28d9f6;}['clone'](){const _0x423ff1=[],_0x25c90f=[],_0x9f2d2c=function(_0x95d275){const _0x1ae0b2=_0x95d275['clone']();_0x423ff1['push'](_0x95d275),_0x25c90f['push'](_0x1ae0b2);for(let _0x48cf9c=-0x16ef+0x9b0+-0x1*-0xd3f;_0x48cf9c<_0x95d275['_children']['length'];_0x48cf9c++)_0x1ae0b2['addChild'](_0x9f2d2c(_0x95d275['_children'][_0x48cf9c]));return _0x1ae0b2;},_0x49a601=_0x9f2d2c(this['graph']),_0x240aa2=[],_0x597525=[],_0x288444=[];for(let _0x22d75a=-0x1e0a+-0x1*-0xeaa+0xf60;_0x22d75a<this['skinInstan'+'ces']['length'];_0x22d75a++){const _0x18a181=this['skinInstan'+'ces'][_0x22d75a]['skin'],_0x3aeab1=new Ol(_0x18a181),_0x28131d=[];for(let _0x46d69c=0x12cd+0x1*0xeb6+-0x2183;_0x46d69c<_0x18a181['boneNames']['length'];_0x46d69c++){const _0x29e56d=_0x18a181['boneNames'][_0x46d69c],_0x1f771d=_0x49a601['findByName'](_0x29e56d);_0x28131d['push'](_0x1f771d);}_0x3aeab1['bones']=_0x28131d,_0x597525['push'](_0x3aeab1);}for(let _0x256f83=0x7*0x33+-0x1288*-0x2+-0x37*0xb3;_0x256f83<this['morphInsta'+'nces']['length'];_0x256f83++){const _0x584cb2=this['morphInsta'+'nces'][_0x256f83]['morph'],_0x3fd357=new xa(_0x584cb2);_0x288444['push'](_0x3fd357);}for(let _0xe6a2d8=-0x18ec+0x94*0xd+0x1168;_0xe6a2d8<this['meshInstan'+'ces']['length'];_0xe6a2d8++){const _0x120ef0=this['meshInstan'+'ces'][_0xe6a2d8],_0x1bae36=_0x423ff1['indexOf'](_0x120ef0['node']),_0x447432=new He(_0x120ef0['mesh'],_0x120ef0['material'],_0x25c90f[_0x1bae36]);if(_0x120ef0['skinInstan'+'ce']){const _0xc3fd4b=this['skinInstan'+'ces']['indexOf'](_0x120ef0['skinInstan'+'ce']);_0x447432['skinInstan'+'ce']=_0x597525[_0xc3fd4b];}if(_0x120ef0['morphInsta'+'nce']){const _0x47fedb=this['morphInsta'+'nces']['indexOf'](_0x120ef0['morphInsta'+'nce']);_0x447432['morphInsta'+'nce']=_0x288444[_0x47fedb];}_0x240aa2['push'](_0x447432);}const _0x14a0ed=new sr();return _0x14a0ed['graph']=_0x49a601,_0x14a0ed['meshInstan'+'ces']=_0x240aa2,_0x14a0ed['skinInstan'+'ces']=_0x597525,_0x14a0ed['morphInsta'+'nces']=_0x288444,_0x14a0ed['getGraph']()['syncHierar'+'chy'](),_0x14a0ed;}['destroy'](){const _0x104764=this['meshInstan'+'ces'];for(let _0x5d8a5e=0x2584+0x448*0x5+-0x3aec;_0x5d8a5e<_0x104764['length'];_0x5d8a5e++)_0x104764[_0x5d8a5e]['destroy']();this['meshInstan'+'ces']['length']=0x4*-0x1f3+-0x35*0x46+0x164a;}['generateWi'+'reframe'](){He['_prepareRe'+'nderStyleF'+'orArray'](this['meshInstan'+'ces'],$r);}}class mm extends wd{constructor(_0x34dedd,_0x931b0a,{preferHighPrecision:_0x286485=!(-0x1*-0xd87+-0x1*0xa31+-0x355)}={}){super(),h(this,'_aabb'),h(this,'preferHigh'+'Precision'),(w['assert'](_0x931b0a,'Morph\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x931b0a);const _0x5bb15c=_0x931b0a;this['preferHigh'+'Precision']=_0x286485,w['assert'](_0x34dedd['every'](_0xdee1f5=>!_0xdee1f5['used']),'A\x20specifie'+'d\x20target\x20h'+'as\x20already'+'\x20been\x20used'+'\x20to\x20create'+'\x20a\x20Morph,\x20'+'use\x20its\x20cl'+'one\x20instea'+'d.'),this['_targets']=_0x34dedd['slice']();const _0x1ba2ed=_0x5bb15c['textureHal'+'fFloatRend'+'erable']?nt:void(0x1ce5+-0x5*0x437+-0x7d2),_0x1b32c4=_0x5bb15c['textureFlo'+'atRenderab'+'le']?Xt:void(-0xb6*0x1f+0x300*-0x2+0x1*0x1c0a);this['_renderTex'+'tureFormat']=this['preferHigh'+'Precision']?_0x1b32c4??_0x1ba2ed:_0x1ba2ed??_0x1b32c4,this['_renderTex'+'tureFormat']=this['_renderTex'+'tureFormat']??nd,this['intRenderF'+'ormat']=dn(this['_renderTex'+'tureFormat']),this['_textureFo'+'rmat']=this['preferHigh'+'Precision']?Xt:nt,this['_init'](),this['_updateMor'+'phFlags']();}['destroy'](){var _0x38122a,_0x1793b4,_0x279929;(_0x38122a=this['vertexBuff'+'erIds'])==null||_0x38122a['destroy'](),this['vertexBuff'+'erIds']=null,(_0x1793b4=this['targetsTex'+'turePositi'+'ons'])==null||_0x1793b4['destroy'](),this['targetsTex'+'turePositi'+'ons']=null,(_0x279929=this['targetsTex'+'tureNormal'+'s'])==null||_0x279929['destroy'](),this['targetsTex'+'tureNormal'+'s']=null;}get['aabb'](){if(!this['_aabb']){const _0x140182=new D(),_0x9de277=new D();for(let _0x1fce47=0xcb7+-0x3*0xa50+0x1239;_0x1fce47<this['_targets']['length'];_0x1fce47++){const _0x261d39=this['_targets'][_0x1fce47]['aabb'];_0x140182['min'](_0x261d39['getMin']()),_0x9de277['max'](_0x261d39['getMax']());}this['_aabb']=new De(),this['_aabb']['setMinMax'](_0x140182,_0x9de277);}return this['_aabb'];}get['morphPosit'+'ions'](){return this['_morphPosi'+'tions'];}get['morphNorma'+'ls'](){return this['_morphNorm'+'als'];}['_init'](){this['_initTextu'+'reBased']();for(let _0x2c867a=0x7f7+0x1*-0x19ff+0x2*0x904;_0x2c867a<this['_targets']['length'];_0x2c867a++)this['_targets'][_0x2c867a]['_postInit']();}['_findSpars'+'eSet'](_0x1a96a5,_0x472de8,_0xdf486a){let _0x3648f6=0x189e+0x2*0x419+-0x20cf;const _0x221ec0=_0x1a96a5[0x2d+0x827+0x2*-0x42a]['length'];for(let _0x61bf00=-0x26f4+0x3*0x93b+-0x1*-0xb43;_0x61bf00<_0x221ec0;_0x61bf00+=0x11b0+0x1*0x1b15+0x2cc2*-0x1){let _0x23286b=!(0x7c*-0x4c+-0xce3+0x31b4);for(let _0x362934=-0x21af+0x727*0x5+-0x4c*0x7;_0x362934<_0x1a96a5['length'];_0x362934++){const _0x21cf1f=_0x1a96a5[_0x362934];if(_0x21cf1f[_0x61bf00]!==-0x221e+0x43*0x2f+-0x1*-0x15d1||_0x21cf1f[_0x61bf00+(-0x2299+0x10*-0x185+0x3aea)]!==0x955+-0x1753+0xdfe||_0x21cf1f[_0x61bf00+(-0x1818+-0xff9+0x2813)]!==0x40+0x29*0xe3+-0x249b*0x1){_0x23286b=!(-0x295+-0x15*0x27+0x5c8);break;}}_0x23286b?(_0x472de8['push'](_0x3648f6),_0xdf486a['push'](_0x61bf00/(-0x13ce+-0xb8*-0x2e+-0xd3f)),_0x3648f6++):_0x472de8['push'](-0xa45+0x5ed+0x458);}return _0x3648f6;}['_initTextu'+'reBased'](){const _0x30c6c6=[],_0x467679=[],_0x238a94=this['_targets'];for(let _0x3d84a0=0x10f*-0x22+0x2*0x54f+0x1960;_0x3d84a0<_0x238a94['length'];_0x3d84a0++){const _0x4eb242=_0x238a94[_0x3d84a0];_0x4eb242['options']['deltaPosit'+'ions']&&(_0x30c6c6['push'](_0x4eb242['options']['deltaPosit'+'ions']),_0x467679['push'](!(-0x1cf*0x1+0x99b+0x7cc*-0x1))),_0x4eb242['options']['deltaNorma'+'ls']&&(_0x30c6c6['push'](_0x4eb242['options']['deltaNorma'+'ls']),_0x467679['push'](!(0x24c6+-0x1*-0x346+-0x280b)));}const _0x4cf892=[],_0x41d3d4=[],_0x928631=this['_findSpars'+'eSet'](_0x30c6c6,_0x4cf892,_0x41d3d4),_0x2fbe6f=this['device']['maxTexture'+'Size'];let _0x18df3e=Math['ceil'](Math['sqrt'](_0x928631));_0x18df3e=Math['min'](_0x18df3e,_0x2fbe6f);const _0x371ff0=Math['ceil'](_0x928631/_0x18df3e);if(_0x371ff0>_0x2fbe6f){w['warnOnce']('Morph\x20targ'+'et\x20data\x20is'+'\x20too\x20large'+'\x20to\x20fit\x20in'+'to\x20a\x20textu'+'re\x20array.\x20'+'Required\x20t'+'exture\x20siz'+'e:\x20'+_0x18df3e+'x'+_0x371ff0+(',\x20max\x20text'+'ure\x20size:\x20')+_0x2fbe6f+'x'+_0x2fbe6f+'.');return;}this['morphTextu'+'reWidth']=_0x18df3e,this['morphTextu'+'reHeight']=_0x371ff0;let _0x291c1d=!(0xc1d*0x1+0x149d+-0x20b9);const _0x1c4557=Mn['float2Half'];this['_textureFo'+'rmat']===nt&&(_0x291c1d=!(0x1*-0x13de+0x1f*0xcd+-0x4f5));const _0x121e1c=[],_0x104fc=[],_0x2e4a2b=_0x18df3e*_0x371ff0*(0xf28+-0x3*-0xcbb+-0x3*0x11c7);for(let _0x46e4ed=0xc1*-0x1d+0x203d+0x1*-0xa60;_0x46e4ed<_0x30c6c6['length'];_0x46e4ed++){const _0x1aa4e9=_0x30c6c6[_0x46e4ed],_0x196791=this['_textureFo'+'rmat']===nt?new Uint16Array(_0x2e4a2b):new Float32Array(_0x2e4a2b);if((_0x467679[_0x46e4ed]?_0x121e1c:_0x104fc)['push'](_0x196791),_0x291c1d)for(let _0x83ff9a=0x22*-0x1d+0x6b9*-0x3+-0xd*-0x1d9;_0x83ff9a<_0x41d3d4['length'];_0x83ff9a++){const _0x36eb35=_0x41d3d4[_0x83ff9a]*(0x7b6+-0x1260+0xaad),_0xd46516=_0x83ff9a*(-0x1863+0x2f*-0x24+0x1f03)+(0x4*-0x90a+0x16+-0x2416*-0x1);_0x196791[_0xd46516]=_0x1c4557(_0x1aa4e9[_0x36eb35]),_0x196791[_0xd46516+(0x1*0x8a3+-0x22db*-0x1+0x3*-0xe7f)]=_0x1c4557(_0x1aa4e9[_0x36eb35+(-0x1793+-0x10*0x7a+0x1f34)]),_0x196791[_0xd46516+(-0x122c+-0x5d*-0x1+0x11d1)]=_0x1c4557(_0x1aa4e9[_0x36eb35+(-0x2689+-0x181*-0xb+0x1600)]);}else for(let _0x47049e=0xd5+0x6f*0x11+-0x46*0x1e;_0x47049e<_0x41d3d4['length'];_0x47049e++){const _0x7b5553=_0x41d3d4[_0x47049e]*(0x1418+-0x3*0x849+0x4c6),_0x17422c=_0x47049e*(0x1088+-0x31d+-0x1*0xd67)+(-0x23f3+0x1f2c+0x4cb);_0x196791[_0x17422c]=_0x1aa4e9[_0x7b5553],_0x196791[_0x17422c+(-0x43b*0x8+0x230a+0x5*-0x3d)]=_0x1aa4e9[_0x7b5553+(0x656*-0x2+0xbb*-0x6+0x110f)],_0x196791[_0x17422c+(0x1*0xb6b+0xbe2+-0x174b)]=_0x1aa4e9[_0x7b5553+(-0x62b*-0x2+-0x2f*0x39+-0x1dd)];}}_0x121e1c['length']>-0x17a9*0x1+-0x1*-0xa1d+-0xc*-0x121&&(this['targetsTex'+'turePositi'+'ons']=this['_createTex'+'ture']('MorphPosit'+'ionsTextur'+'e',this['_textureFo'+'rmat'],_0x238a94['length'],[_0x121e1c]),this['targetsTex'+'turePositi'+'ons']['upload']()),_0x104fc['length']>0x13a*-0x1f+-0x1716+0x4*0xf47&&(this['targetsTex'+'tureNormal'+'s']=this['_createTex'+'ture']('MorphNorma'+'lsTexture',this['_textureFo'+'rmat'],_0x238a94['length'],[_0x104fc]),this['targetsTex'+'tureNormal'+'s']['upload']());const _0x1ada8f=[{'semantic':Ln,'components':0x1,'type':el,'asInt':!(0x184d*0x1+0x1*0x2659+-0x3ea6)}];return this['vertexBuff'+'erIds']=new Is(this['device'],new kt(this['device'],_0x1ada8f,_0x4cf892['length']),_0x4cf892['length'],{'data':new Uint32Array(_0x4cf892)}),!(-0x1*-0x2272+0x3*0x86d+-0x3bb9);}get['targets'](){return this['_targets'];}['_updateMor'+'phFlags'](){this['_morphPosi'+'tions']=!(-0x253f+-0x1*0x1fc1+0x4501),this['_morphNorm'+'als']=!(-0x1*-0x1ab1+0x18*-0x119+-0x58);for(let _0x2b7cde=-0x35*0x89+-0xbcf+0x282c;_0x2b7cde<this['_targets']['length'];_0x2b7cde++){const _0xbb3ee7=this['_targets'][_0x2b7cde];_0xbb3ee7['morphPosit'+'ions']&&(this['_morphPosi'+'tions']=!(0x1628*0x1+-0x1*0x228f+-0xc67*-0x1)),_0xbb3ee7['morphNorma'+'ls']&&(this['_morphNorm'+'als']=!(0xc*0xea+-0x19*-0xb2+-0x17e*0x13));}}['_createTex'+'ture'](_0x3a4ed4,_0x3b0ce5,_0x3e74ba,_0x5bf999){return new _e(this['device'],{'levels':_0x5bf999,'arrayLength':_0x3e74ba,'width':this['morphTextu'+'reWidth'],'height':this['morphTextu'+'reHeight'],'format':_0x3b0ce5,'cubemap':!(-0x1753+-0xe89+-0x3*-0xc9f),'mipmaps':!(-0xa*-0x322+0x8*0x2e3+-0x366b*0x1),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x3a4ed4});}}class Md{constructor(_0x5ba3a4){h(this,'used',!(-0x1bd2+-0x1a81+0x3d*0xe4)),(w['assert'](arguments['length']===0x1e29*-0x1+0x2*0x6da+0x1076),this['options']=_0x5ba3a4,this['_name']=_0x5ba3a4['name'],this['_defaultWe'+'ight']=_0x5ba3a4['defaultWei'+'ght']||0x16a+-0x566*0x4+0x142e,this['_aabb']=_0x5ba3a4['aabb'],this['deltaPosit'+'ions']=_0x5ba3a4['deltaPosit'+'ions'],this['morphPosit'+'ions']=!!_0x5ba3a4['deltaPosit'+'ions'],this['morphNorma'+'ls']=!!_0x5ba3a4['deltaNorma'+'ls']);}get['name'](){return this['_name'];}get['defaultWei'+'ght'](){return this['_defaultWe'+'ight'];}get['aabb'](){return this['_aabb']||(this['_aabb']=new De(),this['deltaPosit'+'ions']&&this['_aabb']['compute'](this['deltaPosit'+'ions'])),this['_aabb'];}['clone'](){return w['assert'](this['options'],'MorphTarge'+'t\x20cannot\x20b'+'e\x20cloned,\x20'+'was\x20it\x20cre'+'ated\x20with\x20'+'a\x20preserve'+'Data\x20optio'+'n?'),new Md(this['options']);}['_postInit'](){this['options']['preserveDa'+'ta']||(this['options']=null),this['used']=!(-0x47*-0xd+-0x7b*-0x1e+0x7*-0x293);}}let Ei,Z_=-0x2*0xe48+0x7f5+-0xa4e*-0x2;const ce=0x1b4+0x1962+-0x1b12,mf=new te(),_f=new te(),ti=new D(),tt=new D(),Ns=new D(),Na=new D(),ns=new D(),_t=new D(),ka=new D(),Ua=new D(),fo=new D(),Q_=new D(),zt=new D(),fc=new D(),kr=new D();function pn(_0x5c5dee){return _0x5c5dee-Math['floor'](_0x5c5dee);}function fA(_0x5e4387){return Math['max'](Math['min'](_0x5e4387,-0x15*0x149+0x1490+-0x1*-0x66e),-0x56e+-0x9fc+-0xf6a*-0x1);}function gf(_0x244999,_0x45f422){return _0x244999-_0x45f422*Math['floor'](_0x244999/_0x45f422);}function uA(_0x251f03){let _0x1e39fe=pn(_0x251f03),_0x5225f3=pn((0x1215*0x2+-0x107d+-0x12ae)*_0x251f03),_0x10ae6e=pn((0x12794+0x7*0x1c95+-0x78d3*0x2)*_0x251f03),_0x180a4f=pn((-0x1f4a3*-0x6dc+-0x3e936bb+0x116fa6)*_0x251f03);return _0x1e39fe-=_0x5225f3/(0x3*0x32b+-0x1427+-0xb*-0x10f),_0x5225f3-=_0x10ae6e/(-0x168c+-0x3*0x6c3+-0xa5*-0x44),_0x10ae6e-=_0x180a4f/(0x5*-0x92+0x1818+0x143f*-0x1),_0x180a4f-=_0x180a4f/(-0x63c+-0x199f+-0x1d*-0x122),[_0x1e39fe,_0x5225f3,_0x10ae6e,_0x180a4f];}function uc(_0x3f1d1b){let _0x6a08c6=pn(_0x3f1d1b),_0x59b921=pn((0x1*-0x81b+0x1f9*0xb+0x81*-0x19)*_0x3f1d1b);return _0x6a08c6-=_0x59b921/(-0x1669+-0xd57+0x24bf),_0x59b921-=_0x59b921/(-0xa5*-0xe+-0x1115*-0x2+-0x2a31*0x1),[_0x6a08c6,_0x59b921];}class pA{constructor(_0xab483e){this['_emitter']=_0xab483e;}['calcSpawnP'+'osition'](_0x263033,_0x3836ce,_0x490d65,_0x482467,_0x58e1d1){const _0x32fb13=this['_emitter'],_0x294a32=Math['random'](),_0x373936=Math['random'](),_0x509177=Math['random'](),_0x2b4fce=Math['random']();if(_0x32fb13['useCpu']&&(_0x263033[_0x58e1d1*ce+(-0xd8d+-0xd53+-0x10*-0x1ae)+_0x32fb13['numParticl'+'esPot']*(0x2*0x6e1+-0x1*-0x11a1+-0x1f61)*ce]=_0x294a32,_0x263033[_0x58e1d1*ce+(0xb8*0x7+-0x1bfe+-0x1*-0x16f7)+_0x32fb13['numParticl'+'esPot']*(-0x2b*0xb5+-0x9cd+0x2836)*ce]=_0x373936,_0x263033[_0x58e1d1*ce+(0x24dc+0x238b+-0x2b*0x1af)+_0x32fb13['numParticl'+'esPot']*(-0x1cc+-0x50a+0x2*0x36c)*ce]=_0x509177),tt['x']=_0x294a32-(-0x9*0x169+0x25d9*0x1+-0x1928+0.5),tt['y']=_0x373936-(-0x137*0xc+0x64d*0x1+-0xa3*-0xd+0.5),tt['z']=_0x509177-(0x1c0c+-0x168e+0x2bf*-0x2+0.5),_0x32fb13['emitterSha'+'pe']===ai){const _0x38cc3e=Math['max'](Math['abs'](tt['x']),Math['max'](Math['abs'](tt['y']),Math['abs'](tt['z']))),_0xc55db8=_0x38cc3e+(0x37*0x5+0x17*0x173+-0x2268+0.5-_0x38cc3e)*_0x490d65[-0x354+0x1063+-0xd0f],_0x30b80e=_0x38cc3e+(-0x2ff+0xeb7+-0xbb8+0.5-_0x38cc3e)*_0x490d65[-0x1f*0xc3+-0xe*0x256+0x216*0x1b],_0x1d25a1=_0x38cc3e+(-0xbf*-0xb+-0x27a*-0x4+-0x121d+0.5-_0x38cc3e)*_0x490d65[-0x1bfb+0x1ec*-0x10+0x3abd];tt['x']=_0xc55db8*(_0x38cc3e===Math['abs'](tt['x'])?Math['sign'](tt['x']):(-0x3*-0x96b+0x8b*0xf+-0x919*0x4)*tt['x']),tt['y']=_0x30b80e*(_0x38cc3e===Math['abs'](tt['y'])?Math['sign'](tt['y']):(0x1*-0x1b41+-0x116c*0x1+0x29*0x117)*tt['y']),tt['z']=_0x1d25a1*(_0x38cc3e===Math['abs'](tt['z'])?Math['sign'](tt['z']):(0x6*-0x1c9+0x1*0xa6d+0x4b)*tt['z']),_0x32fb13['localSpace']?ti['copy'](_0x3836ce['transformP'+'oint'](tt)):ti['copy'](_0x482467)['add'](_0x3836ce['transformP'+'oint'](tt));}else{tt['normalize']();const _0x3470c6=_0x32fb13['emitterRad'+'ius']===0x337*-0x6+0x2*0x3b8+0x52*0x25?0x68*0x17+-0xc2*-0x28+-0x27a8:_0x32fb13['emitterRad'+'iusInner']/_0x32fb13['emitterRad'+'ius'],_0x236838=_0x2b4fce*(-0x77c*-0x5+0x2544+-0x4aaf-_0x3470c6)+_0x3470c6;_0x32fb13['localSpace']?ti['copy'](tt['mulScalar'](_0x236838*_0x32fb13['emitterRad'+'ius'])):ti['copy'](_0x482467)['add'](tt['mulScalar'](_0x236838*_0x32fb13['emitterRad'+'ius']));}let _0x31aad1=-Y['lerp'](_0x32fb13['rate'],_0x32fb13['rate2'],_0x294a32)*_0x58e1d1;if(_0x32fb13['pack8']){const _0x54a99f=(ti['x']-_0x32fb13['worldBound'+'s']['center']['x'])/_0x32fb13['worldBound'+'sSize']['x']+(0x349+0x1*0x16b3+-0x19fc*0x1+0.5),_0x3f4352=(ti['y']-_0x32fb13['worldBound'+'s']['center']['y'])/_0x32fb13['worldBound'+'sSize']['y']+(0x19c1*0x1+-0x3*-0xc87+-0x1*0x3f56+0.5),_0x7c2f8b=(ti['z']-_0x32fb13['worldBound'+'s']['center']['z'])/_0x32fb13['worldBound'+'sSize']['z']+(-0x3*-0x7fa+-0x49*-0x4d+-0x2de3+0.5);let _0x1c374d=Y['lerp'](_0x32fb13['startAngle']*Y['DEG_TO_RAD'],_0x32fb13['startAngle'+'2']*Y['DEG_TO_RAD'],_0x294a32);_0x1c374d=_0x1c374d%(Math['PI']*(0x90*0x28+0x26b1+-0x3d2f))/(Math['PI']*(-0x8*0x146+-0xc22+0x1654));const _0x3941f9=uc(_0x54a99f);_0x263033[_0x58e1d1*ce]=_0x3941f9[-0x24c2+0x22ee+0x4e*0x6],_0x263033[_0x58e1d1*ce+(-0x1fdb*-0x1+0x4f7+-0x24d1)]=_0x3941f9[-0x1cd5+0x1398+0x2*0x49f];const _0x316d87=uc(_0x3f4352);_0x263033[_0x58e1d1*ce+(-0x187*0x4+0x3e*-0x91+0x5b*0x74)]=_0x316d87[-0x246a+-0x2*-0x1169+-0x8*-0x33],_0x263033[_0x58e1d1*ce+(0x71*0x24+0x1919+0x5*-0x832)]=_0x316d87[-0x1*-0x1d89+-0x2*-0xf0d+-0x3ba2];const _0x34aa13=uc(_0x7c2f8b);_0x263033[_0x58e1d1*ce+(-0x1b92+0xde0+-0x2*-0x6d9)+_0x32fb13['numParticl'+'esPot']*ce]=_0x34aa13[-0x1a78+0xc5b+0xe1d],_0x263033[_0x58e1d1*ce+(0x2045+-0x983*-0x2+-0x334a)+_0x32fb13['numParticl'+'esPot']*ce]=_0x34aa13[-0x1f38+-0x86*0x7+0x22e3];const _0x1d478c=uc(_0x1c374d);_0x263033[_0x58e1d1*ce+(-0x5*0x4bd+-0x1416+0x2bc9)+_0x32fb13['numParticl'+'esPot']*ce]=_0x1d478c[-0xcca+0x1*0x1825+-0xb5b],_0x263033[_0x58e1d1*ce+(0x8cb+0xf*0x29+0x1*-0xb2f)+_0x32fb13['numParticl'+'esPot']*ce]=_0x1d478c[-0x104+0x8b*-0x21+0x12f0];const _0x550a43=-0x1b01+-0xcb+0x1bcd;_0x263033[_0x58e1d1*ce+(-0x16b6+-0xa2*0x3+-0x1*-0x189f)+_0x32fb13['numParticl'+'esPot']*ce*(-0x14*-0x71+0xd95+-0x1667*0x1)]=_0x550a43;const _0xa81feb=Math['max'](_0x32fb13['lifetime'],(_0x32fb13['numParticl'+'es']-(-0x150f+0x3d*0x83+0xa27*-0x1))*Math['max'](_0x32fb13['rate'],_0x32fb13['rate2'])),_0x3d605d=_0x32fb13['lifetime']+(-0x13bc*-0x1+-0x1c89+-0x17*-0x62);_0x31aad1=(_0x31aad1+_0xa81feb)/(_0xa81feb+_0x3d605d);const _0x6c0775=uA(_0x31aad1);_0x263033[_0x58e1d1*ce+(-0x13d+-0x9*0x2d+0x2d2)+_0x32fb13['numParticl'+'esPot']*ce*(0x4*-0x4b1+-0x1800+-0x2f*-0xe9)]=_0x6c0775[-0xfc9+-0xfd6*0x2+0x1*0x2f75],_0x263033[_0x58e1d1*ce+(0x1*-0x24f2+-0x172c*0x1+0x3c1f)+_0x32fb13['numParticl'+'esPot']*ce*(-0x48b+-0x1*0x1255+-0x7*-0x345)]=_0x6c0775[-0x98*-0x39+0x6f*-0x2f+-0xd76],_0x263033[_0x58e1d1*ce+(-0x2*-0x33b+-0x186b+-0x5fd*-0x3)+_0x32fb13['numParticl'+'esPot']*ce*(0x12d9+0x3*0xc15+-0x3715)]=_0x6c0775[-0x1*0x1b41+-0x7d*-0x1f+0x184*0x8],_0x263033[_0x58e1d1*ce+(0x2422+-0x9b+-0x2384)+_0x32fb13['numParticl'+'esPot']*ce*(0x1295*0x2+0xcc*0x19+-0x3913*0x1)]=_0x6c0775[-0x21c7+0x1a0e+0x7bc];}else _0x263033[_0x58e1d1*ce]=ti['x'],_0x263033[_0x58e1d1*ce+(0xb49*0x1+0xc2*-0x12+-0x1*-0x25c)]=ti['y'],_0x263033[_0x58e1d1*ce+(0x3*-0x5f+0x1f51*-0x1+0x2070)]=ti['z'],_0x263033[_0x58e1d1*ce+(0x54b+-0x7*0x47d+0x1a23)]=Y['lerp'](_0x32fb13['startAngle']*Y['DEG_TO_RAD'],_0x32fb13['startAngle'+'2']*Y['DEG_TO_RAD'],_0x294a32),_0x263033[_0x58e1d1*ce+(-0x387+0x18bd+0x51*-0x43)+_0x32fb13['numParticl'+'esPot']*ce]=_0x31aad1;}['update'](_0x5e09b4,_0x3a7224,_0x32ee0c,_0x147036,_0x12f57f,_0x508541,_0x11b310,_0x2fe402){let _0x538bc2,_0x330390,_0x4a3ce5;const _0xcc79f=this['_emitter'];if(_0xcc79f['meshInstan'+'ce']['node']){const _0xfd9ed=_0xcc79f['meshInstan'+'ce']['node']['worldTrans'+'form'];for(let _0x6c57e7=0x9b8+-0x7f*-0x47+-0x8fd*0x5;_0x6c57e7<-0xee1+0x2*0xa34+0x3d*-0x17;_0x6c57e7++)mf['data'][_0x6c57e7]=_0xfd9ed['data'][_0x6c57e7];_f['copy'](mf),_f['invert'](),Ei=_0xcc79f['meshInstan'+'ce']['node']['localScale'],Z_=Math['max'](Math['max'](Ei['x'],Ei['y']),Ei['z']);}_0x508541=_0xcc79f['meshInstan'+'ce']['node']===null||_0xcc79f['localSpace']?D['ZERO']:_0xcc79f['meshInstan'+'ce']['node']['getPositio'+'n']();const _0x5d1fcb=_0xcc79f['camera']?_0xcc79f['camera']['_node']['getPositio'+'n']():D['ZERO'],_0x1e4a70=_0xcc79f['useMesh']?-0x1957+0x2459*0x1+-0xaf1:0x137*-0x5+0x1874+-0x1252;let _0xe4ee2a,_0x5d0002,_0x491e39,_0x4b37c9,_0xadbaea,_0x222d48,_0x3666bc,_0x13246d,_0x4353b1;const _0x28dabc=_0xcc79f['precision']-(0x279*0x3+0xc0b+-0x11*0x125);for(let _0x365ac5=0xb*0x245+-0x14fe+-0x3f9;_0x365ac5<_0xcc79f['numParticl'+'es'];_0x365ac5++){const _0x4a79fc=Math['floor'](_0xcc79f['vbCPU'][_0x365ac5*_0xcc79f['numParticl'+'eVerts']*(_0xcc79f['useMesh']?0x116*0x7+0x4b*-0x6e+-0xc53*-0x2:0x816+-0x239e+-0x1b8c*-0x1)+(0x20d0+0x2*-0x9f3+0x3*-0x44d)]),_0x5ba18a=_0x32ee0c[_0x4a79fc*ce+(0x1d99*0x1+0x1a*-0x7c+-0x1101)+_0xcc79f['numParticl'+'esPot']*(0x7d*-0xb+0x21d4+-0x1c73*0x1)*ce];Ns['x']=_0x5ba18a,Ns['y']=_0x32ee0c[_0x4a79fc*ce+(-0x1*-0xe2c+-0x1b1+-0xc7a)+_0xcc79f['numParticl'+'esPot']*(0x23f1+0x1205+-0x35f4)*ce],Ns['z']=_0x32ee0c[_0x4a79fc*ce+(-0x149c+0x6e8+0xdb6)+_0xcc79f['numParticl'+'esPot']*(-0x522+0x1*-0x257+0x77b)*ce];const _0x502117=_0xcc79f['rate']+(_0xcc79f['rate2']-_0xcc79f['rate'])*_0x5ba18a,_0x1c6b13=_0xcc79f['lifetime'];let _0x53d580=_0x32ee0c[_0x4a79fc*ce+(0x584*-0x7+0x1*-0xc82+0x3321)+_0xcc79f['numParticl'+'esPot']*ce]+_0x11b310;const _0x44b494=fA(_0x53d580/_0x1c6b13);let _0x540a9c=-0x1*-0x2681+0x21ac+-0x482d,_0x9a4e96=0x20bc+-0xee*0x26+0x298;const _0x10c32b=-0x160c+-0x1c4f+-0x1*-0x325b;(_0x53d580-_0x11b310<=0x21d6+-0x2011+-0x1c5||_0x53d580>=_0x1c6b13)&&this['calcSpawnP'+'osition'](_0x32ee0c,_0x147036,_0x12f57f,_0x508541,_0x4a79fc);let _0x2926b8=_0x53d580>0x1c36+-0x1*-0x2073+-0x3ca9*0x1&&_0x53d580<_0x1c6b13;_0x2926b8&&(_0x4a3ce5=_0x44b494*_0x28dabc,_0xe4ee2a=Math['floor'](_0x4a3ce5),_0x5d0002=Math['ceil'](_0x4a3ce5),_0x4a3ce5%=-0x1*-0xd18+-0x23f0+0x16d9*0x1,_0x538bc2=_0xcc79f['qRotSpeed'][_0xe4ee2a],_0x330390=_0xcc79f['qRotSpeed'][_0x5d0002],_0x491e39=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qRotSpeed2'][_0xe4ee2a],_0x330390=_0xcc79f['qRotSpeed2'][_0x5d0002],_0x4b37c9=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qScale'][_0xe4ee2a],_0x330390=_0xcc79f['qScale'][_0x5d0002],_0x540a9c=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qScale2'][_0xe4ee2a],_0x330390=_0xcc79f['qScale2'][_0x5d0002],_0xadbaea=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qAlpha'][_0xe4ee2a],_0x330390=_0xcc79f['qAlpha'][_0x5d0002],_0x222d48=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qAlpha2'][_0xe4ee2a],_0x330390=_0xcc79f['qAlpha2'][_0x5d0002],_0x3666bc=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qRadialSpe'+'ed'][_0xe4ee2a],_0x330390=_0xcc79f['qRadialSpe'+'ed'][_0x5d0002],_0x13246d=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qRadialSpe'+'ed2'][_0xe4ee2a],_0x330390=_0xcc79f['qRadialSpe'+'ed2'][_0x5d0002],_0x4353b1=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x13246d+=(_0x4353b1-_0x13246d)*(_0x5ba18a*(0x24f5+-0x1c9e+-0x7f3)%(-0x151*0x2+0x237f*-0x1+0x2622)),Na['x']=_0x32ee0c[_0x4a79fc*ce],Na['y']=_0x32ee0c[_0x4a79fc*ce+(0x2519+-0x243a+-0x4a*0x3)],Na['z']=_0x32ee0c[_0x4a79fc*ce+(-0x1578+-0xa8a+-0xc*-0x2ab)],_0xcc79f['localSpace']?fo['copy'](Na):fo['copy'](Na)['sub'](_0x508541),fo['normalize']()['mulScalar'](_0x13246d),_0xe4ee2a*=0x21b+0xfcd+-0x1*0x11e5,_0x5d0002*=-0x3+0x1*0xa93+0xa8d*-0x1,_0x538bc2=_0xcc79f['qLocalVelo'+'city'][_0xe4ee2a],_0x330390=_0xcc79f['qLocalVelo'+'city'][_0x5d0002],_t['x']=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qLocalVelo'+'city'][_0xe4ee2a+(-0x1*-0x47f+0x1*0x108f+0x11*-0x13d)],_0x330390=_0xcc79f['qLocalVelo'+'city'][_0x5d0002+(-0xc*-0x198+-0x43*0x70+0xa31)],_t['y']=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qLocalVelo'+'city'][_0xe4ee2a+(-0x26e3+0x5*0x778+0x1*0x18d)],_0x330390=_0xcc79f['qLocalVelo'+'city'][_0x5d0002+(-0x133a+0x1516+-0x6*0x4f)],_t['z']=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qLocalVelo'+'city2'][_0xe4ee2a],_0x330390=_0xcc79f['qLocalVelo'+'city2'][_0x5d0002],Ua['x']=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qLocalVelo'+'city2'][_0xe4ee2a+(-0x3e*0x4d+-0xee4+0x115*0x1f)],_0x330390=_0xcc79f['qLocalVelo'+'city2'][_0x5d0002+(-0x72e+-0x1e81+0x25b0)],Ua['y']=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qLocalVelo'+'city2'][_0xe4ee2a+(0x1d42+0x2420+-0x4160)],_0x330390=_0xcc79f['qLocalVelo'+'city2'][_0x5d0002+(0x22b0+0x40f*-0x1+-0x1e9f)],Ua['z']=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qVelocity'][_0xe4ee2a],_0x330390=_0xcc79f['qVelocity'][_0x5d0002],ns['x']=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qVelocity'][_0xe4ee2a+(-0xab3+0x181+0x311*0x3)],_0x330390=_0xcc79f['qVelocity'][_0x5d0002+(0x467+-0x2cb*-0x5+-0x125d)],ns['y']=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qVelocity'][_0xe4ee2a+(-0x2*0x7dc+0xef*-0xd+0x1bdd)],_0x330390=_0xcc79f['qVelocity'][_0x5d0002+(0x19f*0x6+0x13*0x15a+-0x2366)],ns['z']=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qVelocity2'][_0xe4ee2a],_0x330390=_0xcc79f['qVelocity2'][_0x5d0002],ka['x']=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qVelocity2'][_0xe4ee2a+(0x944*-0x3+0x12b5*0x1+-0x8*-0x123)],_0x330390=_0xcc79f['qVelocity2'][_0x5d0002+(0xd78+-0x411*0x1+-0x966)],ka['y']=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_0x538bc2=_0xcc79f['qVelocity2'][_0xe4ee2a+(-0xda9*-0x2+0x1*0x1475+-0x2fc5)],_0x330390=_0xcc79f['qVelocity2'][_0x5d0002+(0x4*0x9c2+-0x22bc+-0x44a)],ka['z']=_0x538bc2+(_0x330390-_0x538bc2)*_0x4a3ce5,_t['x']+=(Ua['x']-_t['x'])*Ns['x'],_t['y']+=(Ua['y']-_t['y'])*Ns['y'],_t['z']+=(Ua['z']-_t['z'])*Ns['z'],_0xcc79f['initialVel'+'ocity']>-0x1206+0x1162+0xa4&&(_0xcc79f['emitterSha'+'pe']===zw?(tt['copy'](Ns)['mulScalar'](0x4*0x728+-0x5d1*0x3+-0xb2b)['sub'](D['ONE'])['normalize'](),_t['add'](tt['mulScalar'](_0xcc79f['initialVel'+'ocity']))):_t['add'](D['FORWARD']['mulScalar'](_0xcc79f['initialVel'+'ocity']))),ns['x']+=(ka['x']-ns['x'])*Ns['x'],ns['y']+=(ka['y']-ns['y'])*Ns['y'],ns['z']+=(ka['z']-ns['z'])*Ns['z'],_0x491e39+=(_0x4b37c9-_0x491e39)*Ns['y'],_0x540a9c=(_0x540a9c+(_0xadbaea-_0x540a9c)*(_0x5ba18a*(0x12d4+0x28f+-0x5*-0x389)%(0x1505+0x299+-0x179d)))*Z_,_0x9a4e96=(_0x3666bc-_0x222d48)*(_0x5ba18a*(0x1*0x150d+-0x1b7*-0x7+-0x1d26)%(0x103d+-0xc27+-0xd1*0x5)),_0xcc79f['meshInstan'+'ce']['node']&&(_0xcc79f['localSpace']?(_t['x']/=Ei['x'],_t['y']/=Ei['y'],_t['z']/=Ei['z']):mf['transformP'+'oint'](_t,_t)),_0xcc79f['localSpace']?(_f['transformP'+'oint'](ns,ns),_t['add'](ns)['add'](fo)):(_t['add'](ns['mul'](Ei)),_t['add'](fo['mul'](Ei))),fc['copy'](_t),Q_['copy'](Na)['add'](_t['mulScalar'](_0x11b310)),zt['copy'](Q_),_0x32ee0c[_0x4a79fc*ce]=zt['x'],_0x32ee0c[_0x4a79fc*ce+(-0x1*0xdd7+0xf*-0x161+0x2287*0x1)]=zt['y'],_0x32ee0c[_0x4a79fc*ce+(-0x27b*-0x2+0x2b7+-0x7ab)]=zt['z'],_0x32ee0c[_0x4a79fc*ce+(0x1d44+0x1256*0x1+-0xfdd*0x3)]+=_0x491e39*_0x11b310,_0xcc79f['wrap']&&_0xcc79f['wrapBounds']&&(_0xcc79f['localSpace']||zt['sub'](_0x508541),zt['x']=gf(zt['x'],_0xcc79f['wrapBounds']['x'])-_0xcc79f['wrapBounds']['x']*(0x1*0xe29+0x1285+-0x20ae+0.5),zt['y']=gf(zt['y'],_0xcc79f['wrapBounds']['y'])-_0xcc79f['wrapBounds']['y']*(0x12*0x1eb+-0x262b+-0x3*-0x137+0.5),zt['z']=gf(zt['z'],_0xcc79f['wrapBounds']['z'])-_0xcc79f['wrapBounds']['z']*(-0x184c+0xb3f*-0x1+-0x3f3*-0x9+0.5),_0xcc79f['localSpace']||zt['add'](_0x508541)),_0xcc79f['sort']>0x2165+0x11bd+-0x3322&&(_0xcc79f['sort']===-0x1*0x10e9+0xcad+0x43d?(kr['copy'](zt)['sub'](_0x5d1fcb),_0xcc79f['particleDi'+'stance'][_0x4a79fc]=-(kr['x']*kr['x']+kr['y']*kr['y']+kr['z']*kr['z'])):_0xcc79f['sort']===0x38*-0x8c+0x3b*-0x19+0x2465?_0xcc79f['particleDi'+'stance'][_0x4a79fc]=_0x53d580:_0xcc79f['sort']===-0x166f*-0x1+0x1*-0x1b97+0x52b&&(_0xcc79f['particleDi'+'stance'][_0x4a79fc]=-_0x53d580))),_0x2fe402?_0x53d580<0x1*-0x1973+0x65*-0xd+0x1e94&&(_0x32ee0c[_0x4a79fc*ce+(-0x5*0x357+0x1b09+-0xa53)+_0xcc79f['numParticl'+'esPot']*(0x40b*0x1+-0x1a6d+0x1664)*ce]=-(-0xe*0x183+0x1837*-0x1+-0x4a*-0x9d)):(_0x53d580>=_0x1c6b13&&(_0x53d580-=Math['max'](_0x1c6b13,(_0xcc79f['numParticl'+'es']-(-0xe5*0x13+0xc5b*-0x1+0x1d5b))*_0x502117),_0x32ee0c[_0x4a79fc*ce+(0x1543+-0x1*-0x1984+-0x2ec4)+_0xcc79f['numParticl'+'esPot']*(-0x21f3*0x1+-0xa33*-0x2+0xd8f)*ce]=_0xcc79f['loop']?0x5*0x163+-0x23b1+0x1cc3:-(-0x1b56+0xe9*0x17+0x668)),_0x53d580<0x1*-0x75+0x10f3+-0x107e&&_0xcc79f['loop']&&(_0x32ee0c[_0x4a79fc*ce+(-0x19aa+0x15a*0xd+0x81b)+_0xcc79f['numParticl'+'esPot']*(0x3b*0x8b+-0xc3a+0x89*-0x25)*ce]=-0x1ecb+0x61f*0x1+0x18ad*0x1)),_0x32ee0c[_0x4a79fc*ce+(-0x8*-0xad+-0xe99+-0x1f*-0x4c)+_0xcc79f['numParticl'+'esPot']*(-0x137*-0x13+0x12a7+-0x1*0x29ba)*ce]<-0x2124+-0x37e+0x24a2&&(_0x2926b8=!(-0x2507+0x1b02+0xa06)),_0x32ee0c[_0x4a79fc*ce+(-0x15fd+-0x49*0x1+0x7*0x32f)+_0xcc79f['numParticl'+'esPot']*ce]=_0x53d580;for(let _0x4de1d5=-0x238b+-0x5*0x2cf+-0x16*-0x241;_0x4de1d5<_0xcc79f['numParticl'+'eVerts'];_0x4de1d5++){const _0x5c6d45=(_0x365ac5*_0xcc79f['numParticl'+'eVerts']+_0x4de1d5)*(_0xcc79f['useMesh']?0x4d6+0x1ea*-0x11+-0x1*-0x1bba:-0x395*-0x7+0x1355+0xecc*-0x3);let _0x343856=_0xcc79f['vbCPU'][_0x5c6d45],_0x1cde0a=_0xcc79f['vbCPU'][_0x5c6d45+(-0x1981+-0x1a1*-0x13+0x571*-0x1)],_0x3d8ebc=_0xcc79f['vbCPU'][_0x5c6d45+(-0x16ae+-0x6ce+0x1d7e)];_0x2926b8||(_0x343856=_0x1cde0a=_0x3d8ebc=0x1e42+0xf87+0x1*-0x2dc9);const _0x11efe0=_0x365ac5*_0xcc79f['numParticl'+'eVerts']*_0x1e4a70+_0x4de1d5*_0x1e4a70;_0x5e09b4[_0x11efe0]=zt['x'],_0x5e09b4[_0x11efe0+(0x8f*0xe+0xb57+0x2*-0x994)]=zt['y'],_0x5e09b4[_0x11efe0+(0x923+-0x1*0x1814+0xef3)]=zt['z'],_0x5e09b4[_0x11efe0+(0x3*-0xca1+0xc53*-0x1+0x22f*0x17)]=_0x44b494,_0x5e09b4[_0x11efe0+(-0x1*0xca1+0x4*-0x8a7+0x2f41)]=_0xcc79f['alignToMot'+'ion']?_0x10c32b:_0x32ee0c[_0x4a79fc*ce+(-0x9df*-0x1+-0x938+0x2*-0x52)],_0x5e09b4[_0x11efe0+(-0x29*-0x89+0xb63+-0x214f)]=_0x540a9c,_0x5e09b4[_0x11efe0+(0x2042+-0x23f3+-0x3*-0x13d)]=_0x9a4e96,_0x5e09b4[_0x11efe0+(-0x1bce*0x1+-0x267b*-0x1+-0xaa6)]=fc['x'],_0x5e09b4[_0x11efe0+(-0x13cb+0xac+0x1327)]=_0x343856,_0x5e09b4[_0x11efe0+(-0x2f8*-0x9+-0x4e6+-0x15c9)]=_0x1cde0a,_0x5e09b4[_0x11efe0+(-0x167*-0xf+0x279*0x9+-0x2b40)]=_0x3d8ebc,_0x5e09b4[_0x11efe0+(-0x91f*0x3+0x1ae+0x19ba)]=fc['y'],_0x5e09b4[_0x11efe0+(-0x5*0x17f+-0xe2b+0x15b2)]=_0x4a79fc,_0x5e09b4[_0x11efe0+(-0x741+0x2568+-0x1e1a)]=fc['z'],_0x5e09b4[_0x11efe0+(-0x19f3+-0x175*0x13+0x35b0)]=_0xcc79f['vbCPU'][_0x5c6d45+(-0xb*-0x95+-0x236*0xd+0x165a)],_0xcc79f['useMesh']&&(_0x5e09b4[_0x11efe0+(-0x247e+0x261*0xb+-0x1*-0xa62)]=_0xcc79f['vbCPU'][_0x5c6d45+(-0x2*-0xc89+-0x8*0x1d2+-0x53f*0x2)],_0x5e09b4[_0x11efe0+(-0x58f+0x1196*0x2+-0x1d8d)]=_0xcc79f['vbCPU'][_0x5c6d45+(0x1e2d+0x1704+0xd4b*-0x4)]);}}if(_0xcc79f['sort']>nu&&_0xcc79f['camera']){const _0x52463c=_0xcc79f['useMesh']?-0x1*0x47+0x1f*0x101+-0x1*0x1ed2:-0x249c+0x10d9+0x3d*0x53,_0x102b14=_0xcc79f['particleDi'+'stance'];for(let _0x1b493e=-0x5e*0x52+0x9b6+0x1466;_0x1b493e<_0xcc79f['numParticl'+'es'];_0x1b493e++)_0x3a7224[_0x1b493e][-0x46+0x25f6+-0x90*0x43]=_0x1b493e,_0x3a7224[_0x1b493e][-0x1*0x1cd+0x705+-0x537]=_0x102b14[Math['floor'](_0xcc79f['vbCPU'][_0x1b493e*_0xcc79f['numParticl'+'eVerts']*_0x52463c+(-0x1*-0xe9b+-0x13f5*0x1+-0x55d*-0x1)])];_0xcc79f['vbOld']['set'](_0xcc79f['vbCPU']),_0x3a7224['sort']((_0xde24f7,_0x371baa)=>_0xde24f7[0x2*0x74a+0x1bc0+0x5*-0x877]-_0x371baa[-0x228d+-0x1d62+0x3ff0]);for(let _0x2b7dae=-0xdf6*-0x2+-0x2*0xfa1+-0x1*-0x356;_0x2b7dae<_0xcc79f['numParticl'+'es'];_0x2b7dae++){const _0x42af42=_0x3a7224[_0x2b7dae][-0x1*0x251+0x182f*0x1+-0x15de]*_0xcc79f['numParticl'+'eVerts']*_0x52463c,_0x45b351=_0x2b7dae*_0xcc79f['numParticl'+'eVerts']*_0x52463c;for(let _0x2a4064=-0x97*0x2b+0x34*0x75+0x199;_0x2a4064<_0xcc79f['numParticl'+'eVerts']*_0x52463c;_0x2a4064++)_0xcc79f['vbCPU'][_0x45b351+_0x2a4064]=_0xcc79f['vbOld'][_0x42af42+_0x2a4064];}}}}const J_=new _i(),eg=new _i(),tg=new _i();class mA{constructor(_0x318196,_0x311be0){this['_emitter']=_0x318196,this['frameRando'+'mUniform']=new Float32Array(0x1860+0x6*-0x47+-0x16b3),this['emitterPos'+'Uniform']=new Float32Array(0x1a04+-0xa03*0x1+0xb2*-0x17),this['emitterSca'+'leUniform']=new Float32Array([-0x712+0x17f8+-0x5*0x361,-0x21c9*0x1+0x507*0x5+-0x1bb*-0x5,-0x20a2+-0xda*-0x17+0xd0d]),this['worldBound'+'sMulUnifor'+'m']=new Float32Array(-0x7c9*0x5+-0x1ef4+0x45e4),this['worldBound'+'sAddUnifor'+'m']=new Float32Array(0xe6c+-0x391+-0xad8*0x1),this['inBoundsSi'+'zeUniform']=new Float32Array(-0x26eb+0x1*-0xad5+0x31c3*0x1),this['inBoundsCe'+'nterUnifor'+'m']=new Float32Array(0x973+0x1*-0x1445+0xad5),this['constantPa'+'rticleTexI'+'N']=_0x311be0['scope']['resolve']('particleTe'+'xIN'),this['constantPa'+'rticleTexO'+'UT']=_0x311be0['scope']['resolve']('particleTe'+'xOUT'),this['constantEm'+'itterPos']=_0x311be0['scope']['resolve']('emitterPos'),this['constantEm'+'itterScale']=_0x311be0['scope']['resolve']('emitterSca'+'le'),this['constantSp'+'awnBounds']=_0x311be0['scope']['resolve']('spawnBound'+'s'),this['constantSp'+'awnPosInne'+'rRatio']=_0x311be0['scope']['resolve']('spawnPosIn'+'nerRatio'),this['constantSp'+'awnBoundsS'+'phere']=_0x311be0['scope']['resolve']('spawnBound'+'sSphere'),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']=_0x311be0['scope']['resolve']('spawnBound'+'sSphereInn'+'erRatio'),this['constantIn'+'itialVeloc'+'ity']=_0x311be0['scope']['resolve']('initialVel'+'ocity'),this['constantFr'+'ameRandom']=_0x311be0['scope']['resolve']('frameRando'+'m'),this['constantDe'+'lta']=_0x311be0['scope']['resolve']('delta'),this['constantRa'+'te']=_0x311be0['scope']['resolve']('rate'),this['constantRa'+'teDiv']=_0x311be0['scope']['resolve']('rateDiv'),this['constantLi'+'fetime']=_0x311be0['scope']['resolve']('lifetime'),this['constantGr'+'aphSampleS'+'ize']=_0x311be0['scope']['resolve']('graphSampl'+'eSize'),this['constantGr'+'aphNumSamp'+'les']=_0x311be0['scope']['resolve']('graphNumSa'+'mples'),this['constantIn'+'ternalTex0']=_0x311be0['scope']['resolve']('internalTe'+'x0'),this['constantIn'+'ternalTex1']=_0x311be0['scope']['resolve']('internalTe'+'x1'),this['constantIn'+'ternalTex2']=_0x311be0['scope']['resolve']('internalTe'+'x2'),this['constantIn'+'ternalTex3']=_0x311be0['scope']['resolve']('internalTe'+'x3'),this['constantEm'+'itterMatri'+'x']=_0x311be0['scope']['resolve']('emitterMat'+'rix'),this['constantEm'+'itterMatri'+'xInv']=_0x311be0['scope']['resolve']('emitterMat'+'rixInv'),this['constantNu'+'mParticles']=_0x311be0['scope']['resolve']('numParticl'+'es'),this['constantNu'+'mParticles'+'Pot']=_0x311be0['scope']['resolve']('numParticl'+'esPot'),this['constantLo'+'calVelocit'+'yDivMult']=_0x311be0['scope']['resolve']('localVeloc'+'ityDivMult'),this['constantVe'+'locityDivM'+'ult']=_0x311be0['scope']['resolve']('velocityDi'+'vMult'),this['constantRo'+'tSpeedDivM'+'ult']=_0x311be0['scope']['resolve']('rotSpeedDi'+'vMult'),this['constantSe'+'ed']=_0x311be0['scope']['resolve']('seed'),this['constantSt'+'artAngle']=_0x311be0['scope']['resolve']('startAngle'),this['constantSt'+'artAngle2']=_0x311be0['scope']['resolve']('startAngle'+'2'),this['constantOu'+'tBoundsMul']=_0x311be0['scope']['resolve']('outBoundsM'+'ul'),this['constantOu'+'tBoundsAdd']=_0x311be0['scope']['resolve']('outBoundsA'+'dd'),this['constantIn'+'BoundsSize']=_0x311be0['scope']['resolve']('inBoundsSi'+'ze'),this['constantIn'+'BoundsCent'+'er']=_0x311be0['scope']['resolve']('inBoundsCe'+'nter'),this['constantMa'+'xVel']=_0x311be0['scope']['resolve']('maxVel'),this['constantFa'+'ceTangent']=_0x311be0['scope']['resolve']('faceTangen'+'t'),this['constantFa'+'ceBinorm']=_0x311be0['scope']['resolve']('faceBinorm');}['_setInputB'+'ounds'](){this['inBoundsSi'+'zeUniform'][0x1368+-0x375+-0xff3]=this['_emitter']['prevWorldB'+'oundsSize']['x'],this['inBoundsSi'+'zeUniform'][-0x6*-0x411+-0x871+0x2*-0x7fa]=this['_emitter']['prevWorldB'+'oundsSize']['y'],this['inBoundsSi'+'zeUniform'][-0x33d*-0x6+0x1ebc+-0x3228]=this['_emitter']['prevWorldB'+'oundsSize']['z'],this['constantIn'+'BoundsSize']['setValue'](this['inBoundsSi'+'zeUniform']),this['inBoundsCe'+'nterUnifor'+'m'][-0x1*-0x1b41+-0x2b7+-0x188a]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['x'],this['inBoundsCe'+'nterUnifor'+'m'][0x1415*-0x1+-0x9f7+-0x1*-0x1e0d]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['y'],this['inBoundsCe'+'nterUnifor'+'m'][-0xf8f+0x1b7d+-0x4*0x2fb]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['z'],this['constantIn'+'BoundsCent'+'er']['setValue'](this['inBoundsCe'+'nterUnifor'+'m']);}['randomize'](){this['frameRando'+'mUniform'][0x1d65+-0x16c4+0x1*-0x6a1]=Math['random'](),this['frameRando'+'mUniform'][-0xbbe+-0xe7f*0x1+0x1*0x1a3e]=Math['random'](),this['frameRando'+'mUniform'][0x2093+-0x15*-0x1bd+-0x4512]=Math['random']();}['update'](_0x1dba9c,_0x1cbd40,_0x1d0fa1,_0xff4a0,_0x1221c0){Q['pushGpuMar'+'ker'](_0x1dba9c,'ParticleGP'+'U');const _0xdc13b0=this['_emitter'];_0x1dba9c['setBlendSt'+'ate'](pt['NOBLEND']),_0x1dba9c['setDepthSt'+'ate'](Yt['NODEPTH']),_0x1dba9c['setCullMod'+'e'](bt),this['randomize'](),this['constantGr'+'aphSampleS'+'ize']['setValue']((0x79d*-0x4+-0x2b*-0x19+0xd21*0x2)/_0xdc13b0['precision']),this['constantGr'+'aphNumSamp'+'les']['setValue'](_0xdc13b0['precision']),this['constantNu'+'mParticles']['setValue'](_0xdc13b0['numParticl'+'es']),this['constantNu'+'mParticles'+'Pot']['setValue'](_0xdc13b0['numParticl'+'esPot']),this['constantIn'+'ternalTex0']['setValue'](_0xdc13b0['internalTe'+'x0']),this['constantIn'+'ternalTex1']['setValue'](_0xdc13b0['internalTe'+'x1']),this['constantIn'+'ternalTex2']['setValue'](_0xdc13b0['internalTe'+'x2']),this['constantIn'+'ternalTex3']['setValue'](_0xdc13b0['internalTe'+'x3']);const _0x42e8e4=_0xdc13b0['meshInstan'+'ce']['node'],_0xeb1879=_0x42e8e4===null?D['ONE']:_0x42e8e4['localScale'];if(_0xdc13b0['pack8']){this['worldBound'+'sMulUnifor'+'m'][0xe04+0x20f7+-0x1*0x2efb]=_0xdc13b0['worldBound'+'sMul']['x'],this['worldBound'+'sMulUnifor'+'m'][0x11e5*0x1+0x2*-0x1186+0x1128]=_0xdc13b0['worldBound'+'sMul']['y'],this['worldBound'+'sMulUnifor'+'m'][0x93f*0x3+-0x19b1+-0x20a]=_0xdc13b0['worldBound'+'sMul']['z'],this['constantOu'+'tBoundsMul']['setValue'](this['worldBound'+'sMulUnifor'+'m']),this['worldBound'+'sAddUnifor'+'m'][-0x94f+-0x819+0x1168*0x1]=_0xdc13b0['worldBound'+'sAdd']['x'],this['worldBound'+'sAddUnifor'+'m'][0x1*0x13cd+0x917*0x4+-0x12b8*0x3]=_0xdc13b0['worldBound'+'sAdd']['y'],this['worldBound'+'sAddUnifor'+'m'][0x7f8+-0x71*-0x16+-0x11ac]=_0xdc13b0['worldBound'+'sAdd']['z'],this['constantOu'+'tBoundsAdd']['setValue'](this['worldBound'+'sAddUnifor'+'m']),this['_setInputB'+'ounds']();let _0x5d4a37=_0xdc13b0['maxVel']*Math['max'](Math['max'](_0xeb1879['x'],_0xeb1879['y']),_0xeb1879['z']);_0x5d4a37=Math['max'](_0x5d4a37,-0x12eb+-0x4ff*0x5+0x2be7),this['constantMa'+'xVel']['setValue'](_0x5d4a37);}const _0x58891c=_0x42e8e4===null||_0xdc13b0['localSpace']?D['ZERO']:_0x42e8e4['getPositio'+'n'](),_0x4db508=_0x42e8e4===null?te['IDENTITY']:_0x42e8e4['getWorldTr'+'ansform']();_0xdc13b0['emitterSha'+'pe']===ai?(J_['setFromMat'+'4'](_0x1cbd40),this['constantSp'+'awnBounds']['setValue'](J_['data']),this['constantSp'+'awnPosInne'+'rRatio']['setValue'](_0x1d0fa1)):(this['constantSp'+'awnBoundsS'+'phere']['setValue'](_0xdc13b0['emitterRad'+'ius']),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']['setValue'](_0xdc13b0['emitterRad'+'ius']===-0x8d*0x35+-0x1*0x1f19+0x2*0x1e25?0x1205*0x2+0x18f8*0x1+0x26*-0x19b:_0xdc13b0['emitterRad'+'iusInner']/_0xdc13b0['emitterRad'+'ius'])),this['constantIn'+'itialVeloc'+'ity']['setValue'](_0xdc13b0['initialVel'+'ocity']),eg['setFromMat'+'4'](_0x4db508),tg['invertMat4'](_0x4db508),this['emitterPos'+'Uniform'][0x1*0x1993+0xf1+0xd42*-0x2]=_0x58891c['x'],this['emitterPos'+'Uniform'][0x1*-0xae7+0x1*0x2555+-0xf*0x1c3]=_0x58891c['y'],this['emitterPos'+'Uniform'][0x3ba+0x1*-0x367+-0x51*0x1]=_0x58891c['z'],this['constantEm'+'itterPos']['setValue'](this['emitterPos'+'Uniform']),this['constantFr'+'ameRandom']['setValue'](this['frameRando'+'mUniform']),this['constantDe'+'lta']['setValue'](_0xff4a0),this['constantRa'+'te']['setValue'](_0xdc13b0['rate']),this['constantRa'+'teDiv']['setValue'](_0xdc13b0['rate2']-_0xdc13b0['rate']),this['constantSt'+'artAngle']['setValue'](_0xdc13b0['startAngle']*Y['DEG_TO_RAD']),this['constantSt'+'artAngle2']['setValue'](_0xdc13b0['startAngle'+'2']*Y['DEG_TO_RAD']),this['constantSe'+'ed']['setValue'](_0xdc13b0['seed']),this['constantLi'+'fetime']['setValue'](_0xdc13b0['lifetime']),this['emitterSca'+'leUniform'][-0x2f*-0x7+0x289*0x8+-0x1591]=_0xeb1879['x'],this['emitterSca'+'leUniform'][-0x1b0d+-0xca*0x1+0x1bd8]=_0xeb1879['y'],this['emitterSca'+'leUniform'][-0x95b+-0x5cb+0x8*0x1e5]=_0xeb1879['z'],this['constantEm'+'itterScale']['setValue'](this['emitterSca'+'leUniform']),this['constantEm'+'itterMatri'+'x']['setValue'](eg['data']),this['constantEm'+'itterMatri'+'xInv']['setValue'](tg['data']),this['constantLo'+'calVelocit'+'yDivMult']['setValue'](_0xdc13b0['localVeloc'+'ityUMax']),this['constantVe'+'locityDivM'+'ult']['setValue'](_0xdc13b0['velocityUM'+'ax']),this['constantRo'+'tSpeedDivM'+'ult']['setValue'](_0xdc13b0['rotSpeedUM'+'ax'][0x3*0x6b6+0x1c79+-0x309b]);let _0x13d041=_0xdc13b0['swapTex']?_0xdc13b0['particleTe'+'xOUT']:_0xdc13b0['particleTe'+'xIN'];_0x13d041=_0xdc13b0['beenReset']?_0xdc13b0['particleTe'+'xStart']:_0x13d041;const _0x260dfd=_0xdc13b0['swapTex']?_0xdc13b0['particleTe'+'xIN']:_0xdc13b0['particleTe'+'xOUT'];this['constantPa'+'rticleTexI'+'N']['setValue'](_0x13d041),Ar(_0x1dba9c,_0xdc13b0['swapTex']?_0xdc13b0['rtParticle'+'TexIN']:_0xdc13b0['rtParticle'+'TexOUT'],_0x1221c0?_0xdc13b0['shaderPart'+'icleUpdate'+'OnStop']:_0xdc13b0['loop']?_0xdc13b0['shaderPart'+'icleUpdate'+'Respawn']:_0xdc13b0['shaderPart'+'icleUpdate'+'NoRespawn']),_0xdc13b0['material']['setParamet'+'er']('particleTe'+'xOUT',_0x13d041),_0xdc13b0['material']['setParamet'+'er']('particleTe'+'xIN',_0x260dfd),_0xdc13b0['beenReset']=!(0x1efd+-0x2*-0xeca+-0x2*0x1e48),_0xdc13b0['swapTex']=!_0xdc13b0['swapTex'],_0xdc13b0['prevWorldB'+'oundsSize']['copy'](_0xdc13b0['worldBound'+'sSize']),_0xdc13b0['prevWorldB'+'oundsCente'+'r']['copy'](_0xdc13b0['worldBound'+'s']['center']),_0xdc13b0['pack8']&&this['_setInputB'+'ounds'](),Q['popGpuMark'+'er'](_0x1dba9c);}}const sg=['NONE','VERTEX','MAP'];class _A extends ya{['generateKe'+'y'](_0xc4e7bb){let _0x251f78='particle_'+ya['definesHas'+'h'](_0xc4e7bb['defines'])+'_';for(const _0x29c6ab in _0xc4e7bb)_0xc4e7bb['hasOwnProp'+'erty'](_0x29c6ab)&&(_0x251f78+=_0xc4e7bb[_0x29c6ab]);return _0x251f78;}['createVert'+'exDefines'](_0x240360,_0xb12466){const _0x1f72a0=new Map(_0x240360['defines']);return _0x240360['mesh']&&_0x1f72a0['set']('USE_MESH',''),_0x240360['meshUv']&&_0x1f72a0['set']('USE_MESH_U'+'V',''),_0x240360['localSpace']&&_0x1f72a0['set']('LOCAL_SPAC'+'E',''),_0x240360['screenSpac'+'e']&&_0x1f72a0['set']('SCREEN_SPA'+'CE',''),_0x240360['animTex']&&_0x1f72a0['set']('ANIMTEX',''),_0x240360['soft']>-0x1a1*0xa+0x17*-0x165+0x305d&&_0x1f72a0['set']('SOFT',''),_0x240360['stretch']>-0x1f7e+0xe*-0x135+0x3064&&_0x1f72a0['set']('STRETCH',''),_0x240360['customFace']&&_0x1f72a0['set']('CUSTOM_FAC'+'E',''),_0x240360['pack8']&&_0x1f72a0['set']('PACK8',''),_0x240360['localSpace']&&_0x1f72a0['set']('LOCAL_SPAC'+'E',''),_0x240360['animTexLoo'+'p']&&_0x1f72a0['set']('ANIMTEX_LO'+'OP',''),_0x240360['wrap']&&_0x1f72a0['set']('WRAP',''),_0x240360['alignToMot'+'ion']&&_0x1f72a0['set']('ALIGN_TO_M'+'OTION',''),_0x1f72a0['set']('NORMAL',sg[_0x240360['normal']]),_0xb12466['particle_v'+'ertexData']=Me,_0x240360['mesh']&&_0x240360['meshUv']&&(_0xb12466['particle_u'+'v']=is),_0x240360['useCpu']&&(_0xb12466['particle_v'+'ertexData2']=uh,_0xb12466['particle_v'+'ertexData3']=Ap,_0xb12466['particle_v'+'ertexData4']=Cp,_0xb12466['particle_v'+'ertexData5']=Pp),_0x1f72a0;}['createFrag'+'mentDefine'+'s'](_0x2ec6e0){const _0x1a5d7a=new Map(_0x2ec6e0['defines']);return _0x2ec6e0['soft']>-0x1*-0x256+-0xca*0xb+0x1*0x658&&_0x1a5d7a['set']('SOFT',''),_0x2ec6e0['halflamber'+'t']&&_0x1a5d7a['set']('HALF_LAMBE'+'RT',''),_0x1a5d7a['set']('NORMAL',sg[_0x2ec6e0['normal']]),_0x1a5d7a['set']('BLEND',Yy[_0x2ec6e0['blend']]),_0x1a5d7a;}['createShad'+'erDefiniti'+'on'](_0xe44708,_0x13ab17){const _0xd797e7=_0xe44708['isWebGPU']?it:Fe,_0x1557db=Pe['get'](_0xe44708,_0xd797e7),_0x4f0594={},_0x5833ba=this['createVert'+'exDefines'](_0x13ab17,_0x4f0594),_0x12e036=this['createFrag'+'mentDefine'+'s'](_0x13ab17),_0x38ee40='PARTICLE_'+(_0x13ab17['useCpu']?'CPU':'GPU')+'\x0a';_0x5833ba['set'](_0x38ee40,''),_0x12e036['set'](_0x38ee40,'');const _0x1e92ff=new Map(_0x1557db);return Jt['createDefi'+'nition'](_0xe44708,{'name':'ParticleSh'+'ader','shaderLanguage':_0xd797e7,'attributes':_0x4f0594,'vertexCode':_0x1557db['get']('particle_s'+'haderVS'),'fragmentCode':_0x1557db['get']('particle_s'+'haderPS'),'fragmentDefines':_0x12e036,'fragmentIncludes':_0x1e92ff,'vertexIncludes':_0x1e92ff,'vertexDefines':_0x5833ba});}}const gA=new _A();class SA extends tr{constructor(_0x1463c2){super(),h(this,'emitter',null),(this['emitter']=_0x1463c2,w['assert'](_0x1463c2));}['getShaderV'+'ariant'](_0x4edf5f){const {device:_0x4ab177,scene:_0x44161f,cameraShaderParams:_0x4a47e4,objDefs:_0x504b9b}=_0x4edf5f,{emitter:_0x45af5f}=this,_0x22bd6e={'defines':$t['getCoreDef'+'ines'](this,_0x4edf5f),'pass':Aa,'useCpu':this['emitter']['useCpu'],'normal':_0x45af5f['lighting']?_0x45af5f['normalMap']!==null?-0x4+-0x2386+0x238c:-0x8bd*-0x2+-0x8dd+-0x89c:-0x26d5+0x4*-0x59+0x2839*0x1,'halflambert':this['emitter']['halfLamber'+'t'],'stretch':this['emitter']['stretch'],'alignToMotion':this['emitter']['alignToMot'+'ion'],'soft':this['emitter']['depthSofte'+'ning'],'mesh':this['emitter']['useMesh'],'meshUv':_0x504b9b&nm,'gamma':(_0x4a47e4==null?void(0x1f3b+0x2648+-0x4583):_0x4a47e4['shaderOutp'+'utGamma'])??Ll,'toneMap':(_0x4a47e4==null?void(-0x21ff+-0x22b8*0x1+-0x7*-0x9d1):_0x4a47e4['toneMappin'+'g'])??sm,'fog':_0x44161f&&!this['emitter']['noFog']?_0x44161f['fog']['type']:'none','wrap':this['emitter']['wrap']&&this['emitter']['wrapBounds'],'localSpace':this['emitter']['localSpace'],'screenSpace':_0x45af5f['inTools']?!(0xbe*-0x5+-0x1*-0x119b+-0x2*0x6f2):this['emitter']['screenSpac'+'e'],'blend':this['emitter']['blendType'],'animTex':this['emitter']['_isAnimate'+'d'](),'animTexLoop':this['emitter']['animLoop'],'pack8':this['emitter']['pack8'],'customFace':this['emitter']['orientatio'+'n']!==yh},_0x1eb23a=new Ad(_0x4edf5f['viewUnifor'+'mFormat'],_0x4edf5f['viewBindGr'+'oupFormat'],_0x4edf5f['vertexForm'+'at']),_0x2aa78a=Hn(_0x4ab177);return _0x2aa78a['register']('particle',gA),_0x2aa78a['getProgram']('particle',_0x22bd6e,_0x1eb23a,this['userId']);}}const ig=[[-(0x1*-0x259b+0x4d+0x254f*0x1),-(-0x13cb+-0x1528+0x28f4)],[0x1ab3+0xcd0+-0x2782,-(-0xf50+-0x143e+0x238f)],[-0x1db0+0x358+0x1a59,0x34f+-0xf5+-0x1*0x259],[-(-0x1*-0xa75+0x1*0x1f99+-0x2a0d*0x1),0xce+0x2*-0x86b+0x1009*0x1]];function xs(_0x2086d2,_0x1bfd60,_0x788e58,_0xb148ae,_0x5c2bd8=Xt,_0x587a1b,_0x208837){let _0x2800d1=Te;_0x208837&&(_0x5c2bd8===Ne||_0x5c2bd8===_s)&&(_0x2800d1=vt);const _0x45d473=new _e(_0x2086d2,{'width':_0x1bfd60,'height':_0x788e58,'format':_0x5c2bd8,'cubemap':!(0x1d90*-0x1+-0x3*0x4ed+0x56*0x84),'mipmaps':!(0x3*0x63e+-0x35*0x2f+0x1*-0x8fe),'minFilter':_0x2800d1,'magFilter':_0x2800d1,'addressU':ue,'addressV':ue,'name':'ParticleSy'+'stemTextur'+'e'}),_0x4fa079=_0x45d473['lock']();if(_0x5c2bd8===Ne||_0x5c2bd8===_s){const _0x17149d=new Uint8Array(_0xb148ae['length']);for(let _0x470380=0x75*0x25+-0x2*0x5ad+-0x58f;_0x470380<_0xb148ae['length'];_0x470380++)_0x17149d[_0x470380]=_0xb148ae[_0x470380]*_0x587a1b*(-0x1360+0x11a5*-0x1+0x2604);_0xb148ae=_0x17149d;}return _0x4fa079['set'](_0xb148ae),_0x45d473['unlock'](),_0x45d473;}function rg(_0x599a32){return Math['max'](Math['min'](_0x599a32,0x48*0x7c+0x2551*-0x1+0x272),-0xc1*-0x3+-0x1ad2+-0x1*-0x188f);}const ag=new qs([-0x2b*-0x7b+0x1b61+-0xd*0x3b2,0x12cd*-0x1+-0xa*0x24e+-0x29d9*-0x1,-0x9ad+-0xf78*0x1+0x1926,-0x6f*0x56+0x2*0xeb1+0x3f4*0x2]),ng=new qs([0x3ee*0x8+0x9*-0x24b+-0x229*0x5,0xb*0x10f+0x1aa8+0x1326*-0x2,0x268b+-0x219d+0x61*-0xd,0x1404+-0x1437+0x34]),og=new na([-0x1*-0x236d+0xcc4+-0x49*0xa9,-0x9b*0xb+0xad*0x1+0x2fe*0x2,0x928+-0x731*0x2+0x53b,0x1f07+0x2435+-0x433c],[0x204c+-0x9*0x321+-0x423,-0xf99+0x788*-0x1+0x1721,0x2*-0x89+-0x1074+0x1*0x1187,0x1998+0x706+-0x209e],[-0x1717+0x1*0xcb5+0x531*0x2,-0xc*0x2e3+-0xf*-0x293+-0x1*0x3f9,-0x1*0x1cfb+-0x1*-0xf2c+0x34*0x44,0x1*-0x2047+-0x8*0xc7+0x267f]),yA=new na([-0x632+-0x1bb0*0x1+0x2*0x10f1,-0x99e*0x4+-0x12fb+-0x2*-0x1cba,0x1*-0xdf6+0xfb1+0x1*-0x1ba,0x114c+0x56*-0x4+-0xff3],[0x17*0xfd+-0x1e25+0x3b5*0x2,0x6*0x1a7+-0x18bd+0xed4,-0x1a19+0x1e78+-0x45e,-0x3fd*0x9+-0x1b9b+0x3f81],[-0x1a37+0x9a1+-0xc1*-0x16,0x129d*0x1+-0x1d98+-0x4a*-0x26,-0x1e73+0x3d*-0x47+0x2f5f,-0xcd*-0x23+-0x2*-0x2bf+0x6*-0x596]);let bi=0x102*0x3+0xb4+-0x8*0x77;const pc=-0x32*0x58+-0x1dd4+0x56*0x8c,Ai=new Float32Array(0xdc1+0x5b5*0x2+0xa1*-0x28),Ur=new te(),lg=new D(),mc=new D(),_c=new D();let uu,Zc;function he(_0x3a6367,_0x1ec132){Zc[_0x3a6367]!==void(-0x6be*-0x4+-0x237e*-0x1+-0x3e76)&&Zc[_0x3a6367]!==null?uu[_0x3a6367]=Zc[_0x3a6367]:uu[_0x3a6367]=_0x1ec132;}function Dv(_0x101a78,_0x4c1e01,_0x49e6fa){return(_0x101a78*(-0x1*-0x21d5+0xaa*0x34+0x1*-0x435e)<<-0x1eef+0x17c2+-0x11*-0x6d|_0x4c1e01*(0x1880+0x245*-0x7+-0x79e)<<-0x209b+-0x2b4+0x2357*0x1|_0x49e6fa*(0x3*-0xbf6+0x1*-0x1816+0x3cf7))/(-0x3*0x83f+-0xaea+0x23a8<<0xf3*0x1+0x1*0xf80+-0x105b);}function cg(_0x3ef090,_0x3468ba){const _0x3c4aa6=_0x3ef090['length']/(-0x1c5*0x15+0x6*-0x2c2+-0x17e*-0x24),_0x2a9603=new Array(_0x3c4aa6*(0x7c+-0x1000+0xf88));for(let _0x582ffb=0x1fb9+-0x2508+0x54f;_0x582ffb<_0x3c4aa6;_0x582ffb++)_0x2a9603[_0x582ffb*(-0xf84+0x7*0x35e+-0x80a)]=_0x3ef090[_0x582ffb*(-0x1*0xc3+0xda5+0x1*-0xcdf)],_0x2a9603[_0x582ffb*(0x77a+0x105b+-0x17d1)+(-0x1577+0x22ff+0x1*-0xd87)]=_0x3ef090[_0x582ffb*(-0x1b1b+0x1fd0+-0x4b2)+(-0xab5*0x3+-0x1*-0x5bd+-0x7*-0x3c5)],_0x2a9603[_0x582ffb*(0xe31+0x8*0x3ca+0x7*-0x65b)+(-0x754*-0x1+0x31*0x31+-0x10b3)]=_0x3ef090[_0x582ffb*(0x763+-0xedb*-0x1+-0x163b)+(-0x77*-0x2+-0x137*0x10+0x1284)],_0x2a9603[_0x582ffb*(-0x26c+-0x2531+0x27a1)+(0x1be*-0x1+0x10d4+-0xe3*0x11)]=Dv(_0x3468ba[_0x582ffb*(0x1*-0x1a05+0xb*0x261+-0x23)],_0x3468ba[_0x582ffb*(0xd5*0x10+-0x2*-0xb85+-0x7*0x531)+(0xc20+0x1caa+0x1*-0x28c9)],_0x3468ba[_0x582ffb*(0xe82+0x21ee+0xb*-0x467)+(0x4*-0x3e8+0x34b*-0x3+-0x3a5*-0x7)]);return _0x2a9603;}function vA(_0xbbe19a,_0x140af8){const _0x27c16c=new Array(_0x140af8['length']*(-0x10bb+-0x2635+0x36f4));for(let _0x2a16fc=-0x238b+0x1497+-0x57*-0x2c;_0x2a16fc<_0x140af8['length'];_0x2a16fc++)_0x27c16c[_0x2a16fc*(-0x8*-0x21f+0x108f+-0x1*0x2183)]=_0xbbe19a[_0x2a16fc*(-0x21e8+-0xbaa*0x2+0x393f)],_0x27c16c[_0x2a16fc*(0xf*0x10+-0x2650+0x2564)+(0x1bbb*-0x1+-0xc64+0x2820)]=_0xbbe19a[_0x2a16fc*(-0xac5+0x4*-0x425+-0xce*-0x22)+(0x64b+-0x1912+-0x259*-0x8)],_0x27c16c[_0x2a16fc*(-0xc53*0x1+-0x584*-0x4+0x1*-0x9b9)+(0x197*-0x9+-0x14d5+-0xb*-0x332)]=_0xbbe19a[_0x2a16fc*(0x1*0x2603+0x1*0x2b6+-0x28b6)+(-0x1d44+-0x127*-0x1f+0x7f*-0xd)],_0x27c16c[_0x2a16fc*(0xa96+0xb32+0x571*-0x4)+(-0x239*0x7+0x77*-0x45+0x2fa5)]=_0x140af8[_0x2a16fc];return _0x27c16c;}function xA(_0x1e3ab0,_0x894019,_0x3388a6,_0x328d3c,_0x11f331){const _0x2524d4=new Array(_0x1e3ab0['length']*(0x481+-0x125c+0xddf));for(let _0x5d58b6=-0x7*-0x3b7+-0x3*0x4ab+-0xc00*0x1;_0x5d58b6<_0x1e3ab0['length'];_0x5d58b6++)_0x2524d4[_0x5d58b6*(0x529*-0x1+-0x1561*-0x1+-0x40d*0x4)]=_0x1e3ab0[_0x5d58b6],_0x2524d4[_0x5d58b6*(-0x463+0x1*0x207d+-0x2cf*0xa)+(0x71*-0x2+-0x588+-0x1*-0x66b)]=_0x894019[_0x5d58b6],_0x2524d4[_0x5d58b6*(0x1391+-0x23de+0x1051)+(-0x1ae5+0x226+0x18c1)]=0x6*0x527+0x1*0xbf+0x1fa9*-0x1,_0x2524d4[_0x5d58b6*(-0x2*0xbff+-0x27a*0x1+0x1a7c)+(-0x1111+0x1*-0x1ccd+0x2de1)]=Dv(_0x3388a6[_0x5d58b6],_0x328d3c[_0x5d58b6],_0x11f331[_0x5d58b6]);return _0x2524d4;}function TA(_0x4dec7a,_0x211c84){const _0x52a698=new Array(_0x4dec7a['length']*(-0x23e4+0x1*-0x2521+0x7*0xa6f));for(let _0x338270=-0x1a*-0x16a+-0x1*0x1ca+-0x22fa;_0x338270<_0x4dec7a['length'];_0x338270++)_0x52a698[_0x338270*(0x160e+-0x1e7f+0x875)]=_0x4dec7a[_0x338270],_0x52a698[_0x338270*(0x256b+-0x108+-0x1*0x245f)+(-0x35b*-0x9+0x75c+-0x258e)]=_0x211c84[_0x338270],_0x52a698[_0x338270*(-0x101d+0x1ac5+-0xaa4)+(0x1638+0xab3*0x1+-0x20e9)]=-0x1*0x962+-0x91f+0x62b*0x3,_0x52a698[_0x338270*(-0x277*0xd+0xf36+0x10d9)+(-0x256*0x1+-0x22ac+0x2505)]=-0x15*0x14d+0x18bb*0x1+0x296*0x1;return _0x52a698;}function wA(_0x3f0802){const _0x2e4d63=Math['max'](_0x3f0802['rate'],_0x3f0802['rate2'])*_0x3f0802['numParticl'+'es']+_0x3f0802['lifetime'];return Date['now']()+_0x2e4d63*(-0x1259+-0x105*-0xf+0x6f6);}function EA(_0x111f76,_0x1b4737){const _0x9fa4a8=new Float32Array(_0x111f76['length']);for(let _0x53f752=-0x21d7+-0x1c03+0x3dda;_0x53f752<_0x111f76['length'];_0x53f752++)_0x9fa4a8[_0x53f752]=_0x111f76[_0x53f752]-_0x1b4737[_0x53f752];return _0x9fa4a8;}function Xr(_0x1680e4,_0x321fa1){const _0x2d166a=_0x321fa1['length'],_0xc62db4=_0x1680e4['length']/_0x2d166a;for(let _0x577e50=0x14d*0x1+0x18b*0x7+-0xc1a;_0x577e50<_0xc62db4;_0x577e50++)for(let _0x20f6dc=-0x131c+0x4*0x8db+-0x1050;_0x20f6dc<_0x2d166a;_0x20f6dc++){const _0x5be112=Math['abs'](_0x1680e4[_0x577e50*_0x2d166a+_0x20f6dc]);_0x321fa1[_0x20f6dc]=Math['max'](_0x321fa1[_0x20f6dc],_0x5be112);}}function bA(_0x141c56,_0xda6d1e){const _0x1bd54b=_0xda6d1e['length'],_0x283220=_0x141c56['length']/_0x1bd54b;for(let _0x295696=-0xb9*0x11+0x154a+-0x1cd*0x5;_0x295696<_0x283220;_0x295696++)for(let _0x4ede90=-0x4*0x8d+-0x11ad*0x1+0x13e1;_0x4ede90<_0x1bd54b;_0x4ede90++)_0x141c56[_0x295696*_0x1bd54b+_0x4ede90]/=_0xda6d1e[_0x4ede90]===-0xdf0+-0x154b+0x137*0x1d?-0x132d+-0xac*-0x20+-0x252:_0xda6d1e[_0x4ede90],_0x141c56[_0x295696*_0x1bd54b+_0x4ede90]*=0x4*0x59c+0x1220+-0x2890+0.5,_0x141c56[_0x295696*_0x1bd54b+_0x4ede90]+=0x1e79+0x11*-0x91+-0x14d8+0.5;}function Br(_0x23a630,_0x498ba8,_0x16090e){const _0xb08d5f=EA(_0x498ba8,_0x23a630);return Xr(_0xb08d5f,_0x16090e),bA(_0xb08d5f,_0x16090e),_0xb08d5f;}const AA=new Kt();class CA{constructor(_0x44c8dd,_0x286383){h(this,'material',null),h(this,'internalTe'+'x0',null),h(this,'internalTe'+'x1',null),h(this,'internalTe'+'x2',null),h(this,'colorParam',null),this['graphicsDe'+'vice']=_0x44c8dd;const _0x44913a=_0x44c8dd,_0x1f2036=-0x14b7+-0x1b1+0x1688;this['precision']=_0x1f2036,this['_addTimeTi'+'me']=-0x1f5d+0xcb5+0x12a8,uu=this,Zc=_0x286383,he('numParticl'+'es',-0xb1d+-0x1a71*-0x1+-0xf53),this['numParticl'+'es']>_0x44c8dd['maxTexture'+'Size']&&(w['warn']('WARNING:\x20c'+'an\x27t\x20creat'+'e\x20more\x20tha'+'n\x20'+_0x44c8dd['maxTexture'+'Size']+('\x20particles'+'\x20on\x20this\x20d'+'evice.')),this['numParticl'+'es']=_0x44c8dd['maxTexture'+'Size']),he('rate',-0x119a+-0x1*-0x21e3+-0x1048),he('rate2',this['rate']),he('lifetime',-0x1e97+-0x1cbe+-0x3b87*-0x1),he('emitterExt'+'ents',new D(0x1db5+0x211*0x6+-0xe09*0x3,0x1e61+0x115*-0x2+-0x1c37,0x42*0x17+0x1*-0x19ab+0x13bd*0x1)),he('emitterExt'+'entsInner',new D(0xe*0x16+-0x2*-0x3e6+-0x900,-0x133a+-0x415+0x99*0x27,-0xb*0xbd+0x8*-0x40a+0x286f)),he('emitterRad'+'ius',-0x1*-0x243e+0x19fb+0x1*-0x3e39),he('emitterRad'+'iusInner',-0x1*-0x1a4b+0xf37+-0x2982*0x1),he('emitterSha'+'pe',ai),he('initialVel'+'ocity',-0x15b4+0x2*-0x8ed+0x278f),he('wrap',!(-0x45f+-0x1143+0x15a3)),he('localSpace',!(-0x1042+-0x1bfb+0x7*0x652)),he('screenSpac'+'e',!(0x2*-0xa84+0x903+0x51*0x26)),he('wrapBounds',null),he('colorMap',this['defaultPar'+'amTexture']),he('normalMap',null),he('loop',!(0xbec+-0xd24+0xc*0x1a)),he('preWarm',!(0x25bb*0x1+0x169*-0x1+0x3*-0xc1b)),he('sort',nu),he('mode',rv),he('scene',null),he('lighting',!(-0x269b+-0x8a9+-0x1*-0x2f45)),he('halfLamber'+'t',!(0x253+-0x13e7+-0x283*-0x7)),he('intensity',0x877+-0x164e+0xdd8),he('stretch',-0x2d*-0xbd+0x2466+-0x459f),he('alignToMot'+'ion',!(0x12d7+-0x2*0x11a+-0x10a2)),he('depthSofte'+'ning',-0x23e1+-0x1e4e*-0x1+0x593),he('mesh',null),he('particleNo'+'rmal',new D(-0x5af+-0x7f*-0x3e+-0x1913,-0x5d1*0x4+-0xd2f+0x2474,-0x1969*0x1+0x103d+0x92c)),he('orientatio'+'n',yh),he('depthWrite',!(-0x7b*0x1d+0x6e5*-0x5+-0x51*-0x99)),he('noFog',!(0x11d0+0x7b3+-0x1982)),he('blendType',Zs),he('node',null),he('startAngle',-0x1e86+-0xf*0x1e7+0x3b0f),he('startAngle'+'2',this['startAngle']),he('animTilesX',0x223b+-0x2680+0x446*0x1),he('animTilesY',0x296+0x7*-0x552+-0x13*-0x1d3),he('animStartF'+'rame',0x774+-0x1c62+-0x8d*-0x26),he('animNumFra'+'mes',-0xc7*0x15+-0x1*0x218f+-0x489*-0xb),he('animNumAni'+'mations',0x7ad+-0x654+-0x56*0x4),he('animIndex',0x332+0x1b*0x68+-0xe2a),he('randomizeA'+'nimIndex',!(0xc49+0xee0+-0x1b28)),he('animSpeed',-0x1911+-0x23d7+0x3ce9),he('animLoop',!(-0x670+-0x5*-0x5a7+-0x97*0x25)),this['_gpuUpdate'+'r']=new mA(this,_0x44913a),this['_cpuUpdate'+'r']=new pA(this),this['emitterPos'+'Uniform']=new Float32Array(0xaed+0x2*0xcbf+-0x2468),this['wrapBounds'+'Uniform']=new Float32Array(-0x25d7+-0x6ee+0x2cc8),this['emitterSca'+'leUniform']=new Float32Array([0x2db*-0xb+0xe3a+-0x14*-0xdc,-0xdf5+-0xea*0x1+0xe0*0x11,-0x11b5+0x1e7f+-0x443*0x3]),he('colorGraph',yA),he('colorGraph'+'2',this['colorGraph']),he('scaleGraph',ng),he('scaleGraph'+'2',this['scaleGraph']),he('alphaGraph',ng),he('alphaGraph'+'2',this['alphaGraph']),he('localVeloc'+'ityGraph',og),he('localVeloc'+'ityGraph2',this['localVeloc'+'ityGraph']),he('velocityGr'+'aph',og),he('velocityGr'+'aph2',this['velocityGr'+'aph']),he('rotationSp'+'eedGraph',ag),he('rotationSp'+'eedGraph2',this['rotationSp'+'eedGraph']),he('radialSpee'+'dGraph',ag),he('radialSpee'+'dGraph2',this['radialSpee'+'dGraph']),this['animTilesP'+'arams']=new Float32Array(-0x17cf*0x1+0x1e8c+-0x6bb),this['animParams']=new Float32Array(0x1743+0x5e8+0x1d27*-0x1),this['animIndexP'+'arams']=new Float32Array(0x175*-0x7+-0x19*-0x95+-0x458),this['vbToSort']=null,this['vbOld']=null,this['particleDi'+'stance']=null,this['camera']=null,this['swapTex']=!(0x322*0x8+-0xeed+-0x2*0x511),this['useMesh']=!(-0xd53+0x8*0x388+-0xeed),this['useCpu']=!_0x44c8dd['supportsGp'+'uParticles'],this['pack8']=!(0x12b9*-0x1+0x1d5*-0x15+0x3932),this['localBound'+'s']=new De(),this['worldBound'+'sNoTrail']=new De(),this['worldBound'+'sTrail']=[new De(),new De()],this['worldBound'+'s']=new De(),this['worldBound'+'sSize']=new D(),this['prevWorldB'+'oundsSize']=new D(),this['prevWorldB'+'oundsCente'+'r']=new D(),this['prevEmitte'+'rExtents']=this['emitterExt'+'ents'],this['prevEmitte'+'rRadius']=this['emitterRad'+'ius'],this['worldBound'+'sMul']=new D(),this['worldBound'+'sAdd']=new D(),this['timeToSwit'+'chBounds']=-0x41b*0x4+0x16a1+-0x1*0x635,this['shaderPart'+'icleUpdate'+'Respawn']=null,this['shaderPart'+'icleUpdate'+'NoRespawn']=null,this['shaderPart'+'icleUpdate'+'OnStop']=null,this['numParticl'+'eVerts']=-0xa6b+-0xe87*-0x1+-0x41c,this['numParticl'+'eIndices']=-0x174e+-0x1b*0xca+0x2c9c,this['material']=null,this['meshInstan'+'ce']=null,this['drawOrder']=0x194+0xbc3+-0xd57,this['seed']=Math['random'](),this['fixedTimeS'+'tep']=(-0x29c*-0xa+-0x1*-0x2242+-0x3c59)/(0x153a+0x183+-0x1681),this['maxSubStep'+'s']=-0x9b7*-0x2+-0x9fe+-0x966,this['simTime']=-0x1e65*-0x1+-0x95*0xb+-0x17fe,this['simTimeTot'+'al']=-0xd12*-0x1+0x11a1*-0x2+-0x47*-0x50,this['beenReset']=!(0xe09+0xf3f*-0x1+0x1*0x137),this['_layer']=null,this['rebuild']();}get['defaultPar'+'amTexture'](){return w['assert'](this['graphicsDe'+'vice']),AA['get'](this['graphicsDe'+'vice'],()=>{const _0x2f1d15=new Float32Array(-0xdb4+-0x2*-0xc64+-0x3*0x25c);for(let _0x5dd13c=0x23*0x61+-0x20e9+-0x9d3*-0x2;_0x5dd13c<-0x1733+-0xcc8+0x240b;_0x5dd13c++)for(let _0x394544=-0x1*0xe06+-0xc0c*-0x1+0x1fa;_0x394544<-0x1*-0x26f+-0x155a+0x2b*0x71;_0x394544++){const _0x472ab9=_0x394544+(-0x17b*0x1a+0xf7a+-0x1*-0x1705)-(-0x7bf*-0x5+0x269*0xb+-0x11*0x3d6+0.5),_0x27d090=_0x5dd13c+(-0xe*-0x181+0x1*-0xf0f+-0x5fe*0x1)-(-0x125d*-0x2+0x3ae+-0x2*0x1430+0.5),_0x19d848=rg(-0x5d5*0x5+0x1be1+0x2f*0x7-rg(Math['sqrt'](_0x472ab9*_0x472ab9+_0x27d090*_0x27d090)/(0xfdb+-0x1690+0x1*0x6c5))-(0x3*0x6af+0x1*-0xa43+-0x9ca+0.5)),_0x363f95=_0x5dd13c*(-0x2*-0x3aa+-0x8aa+0x166*0x1)+_0x394544;_0x2f1d15[_0x363f95*(-0x256*-0x1+0x1*0x1475+0x341*-0x7)]=-0x1*-0x3d6+-0x12a0*-0x1+-0x1*0x1675,_0x2f1d15[_0x363f95*(-0x1*-0xf19+-0xbe7*-0x3+-0x32ca)+(-0x10b1*-0x1+0x37*0x3+-0x57*0x33)]=0x9ed+0x1ac8+-0x24b4,_0x2f1d15[_0x363f95*(-0x1*0x4ae+0x1481*-0x1+0x1933)+(-0x225+0xe5*-0xb+0xa*0x133)]=0x242*-0xd+-0x13*0x1a6+0x3cad,_0x2f1d15[_0x363f95*(0x1*0x2399+0x1e58+-0x41ed)+(-0x20ad+-0x1*-0x20a3+-0xd*-0x1)]=_0x19d848;}const _0x26ea4f=xs(this['graphicsDe'+'vice'],-0xc81+-0x1195*0x1+0xe3*0x22,-0x1a1c+0x1*0x1f7b+0x9*-0x97,_0x2f1d15,_s,0x1*-0x13ff+-0x661*-0x3+0x1*0xdd,!(0x1d53*-0x1+0x14d9+0x87a));return _0x26ea4f['minFilter']=vt,_0x26ea4f['magFilter']=vt,_0x26ea4f;});}['onChangeCa'+'mera'](){this['resetMater'+'ial']();}['calculateB'+'oundsMad'](){this['worldBound'+'sMul']['x']=(-0x1ef5+-0xb56*-0x3+0x1*-0x30c)/this['worldBound'+'sSize']['x'],this['worldBound'+'sMul']['y']=(0x5*0x34b+0x1c1d+0x2c93*-0x1)/this['worldBound'+'sSize']['y'],this['worldBound'+'sMul']['z']=(-0x1727+0x10c6+0x2b*0x26)/this['worldBound'+'sSize']['z'],this['worldBound'+'sAdd']['copy'](this['worldBound'+'s']['center'])['mul'](this['worldBound'+'sMul'])['mulScalar'](-(-0x7c9*0x3+0xf1f*0x1+0x83d)),this['worldBound'+'sAdd']['x']+=0x19c6+-0x1d75+-0x29*-0x17+0.5,this['worldBound'+'sAdd']['y']+=-0x1*0x755+-0xf1c+0xf*0x17f+0.5,this['worldBound'+'sAdd']['z']+=-0x1*-0x143+-0x26f6+0x3*0xc91+0.5;}['calculateW'+'orldBounds'](){if(!this['node'])return;if(this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),!this['useCpu']){let _0x3dcfa1=!(0x75*-0x45+0x1*0x9d+0x1eed);this['emitterSha'+'pe']===ai?_0x3dcfa1=!this['emitterExt'+'ents']['equals'](this['prevEmitte'+'rExtents']):_0x3dcfa1=this['emitterRad'+'ius']!==this['prevEmitte'+'rRadius'],_0x3dcfa1&&this['calculateL'+'ocalBounds']();}const _0x27a2f9=this['node']['getWorldTr'+'ansform']();this['localSpace']?this['worldBound'+'sNoTrail']['copy'](this['localBound'+'s']):this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],_0x27a2f9),this['worldBound'+'sTrail'][0x1b91+0xdf3*-0x2+0x5*0x11]['add'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][-0x281+-0x8b*0x11+-0xbbd*-0x1]['add'](this['worldBound'+'sNoTrail']);const _0x1466b1=this['simTimeTot'+'al'];_0x1466b1>=this['timeToSwit'+'chBounds']&&(this['worldBound'+'sTrail'][-0x205c+-0xa*-0x3b7+-0x2*0x265]['copy'](this['worldBound'+'sTrail'][-0x1633+0xe93+0x7a1]),this['worldBound'+'sTrail'][0xee1+0x1cc8+-0x2ba8]['copy'](this['worldBound'+'sNoTrail']),this['timeToSwit'+'chBounds']=_0x1466b1+this['lifetime']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][0x23cd+0x3d*0x5+-0x766*0x5]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0x4*-0x35b+0xda9*0x1+-0x3b),this['localSpace']?(this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x27a2f9),this['meshInstan'+'ce']['mesh']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x27a2f9)):(this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['mesh']['aabb']['copy'](this['worldBound'+'s'])),this['meshInstan'+'ce']['_aabbVer']=-0x1fe3+0x92b*0x1+-0x3*-0x793-this['meshInstan'+'ce']['_aabbVer'],this['pack8']&&this['calculateB'+'oundsMad']();}['resetWorld'+'Bounds'](){this['node']&&(this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][0xcec*0x1+-0x1*-0x2659+-0x3345]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][-0x269+-0x8d3+-0x19b*-0x7]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][0x63*-0x10+0xdcb+-0x79b]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0xda2+0x1ab5+-0x19*0x19d),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['simTimeTot'+'al']=-0x4*0x323+0x23a1+0x137*-0x13,this['timeToSwit'+'chBounds']=0x4*-0x16b+0x182f+-0x1283*0x1);}['calculateL'+'ocalBounds'](){let _0x372f36=Number['MAX_VALUE'],_0xa776a7=Number['MAX_VALUE'],_0x313009=Number['MAX_VALUE'],_0x32d543=-Number['MAX_VALUE'],_0xc7fa57=-Number['MAX_VALUE'],_0x1330fb=-Number['MAX_VALUE'],_0x1781ed=-0x3*0xaf6+0x287+-0x13*-0x199,_0xa16ad2=0x9*0x3f5+-0x14c3+-0xeda;const _0x216376=this['lifetime']/this['precision'],_0x2c865c=[this['qVelocity'],this['qVelocity2']],_0x1afa5d=[this['qLocalVelo'+'city'],this['qLocalVelo'+'city2']],_0x5e490e=[-0x1*-0x2655+0x4*-0x4ae+-0x1*0x139d,-0x3*-0xb83+-0x15*-0x109+-0x3846],_0x8e0ebe=[-0x1d69+0x22dd+-0x4*0x15d,0x2ab*-0xd+-0x1065+-0x3a6*-0xe],_0x5a888f=[-0x13*-0x16f+0xdb4*-0x1+-0xd89,-0x7fb+0x1*0x1dcf+0x2*-0xaea],_0x34a5d4=[0x643*-0x2+-0x9*-0x25f+-0x8d1,-0x1f23+-0xbf*-0x13+0x10f6],_0x4618f2=[-0x18d*-0x13+0x1290+-0x99b*0x5,-0xd*-0x2f6+-0x1c1d*-0x1+-0x11*0x3eb];let _0x1a6477,_0x945d9f,_0x89e03b;for(let _0x25d09c=0x215+0x1*0xae4+-0x171*0x9;_0x25d09c<this['precision']+(0xcff+-0x1e96+-0x233*-0x8);_0x25d09c++){const _0x51f0cf=Math['min'](_0x25d09c,this['precision']-(-0x1f1b+0x237b+-0x45f));for(let _0x1a0b93=0x11a3+0x2445+-0x35e8;_0x1a0b93<0x1c38+0x1ae8+-0x371e;_0x1a0b93++)_0x1a6477=_0x1afa5d[_0x1a0b93][_0x51f0cf*(0x1*-0x2593+0x1*-0x54a+-0x31*-0xe0)+(0x236d+0x1*0x1837+-0x3ba4)]*_0x216376+_0x5e490e[_0x1a0b93],_0x945d9f=_0x1afa5d[_0x1a0b93][_0x51f0cf*(-0x2*0x868+-0x1a3b+0x2b0e)+(0x8a3+-0x17d9+-0x5f*-0x29)]*_0x216376+_0x8e0ebe[_0x1a0b93],_0x89e03b=_0x1afa5d[_0x1a0b93][_0x51f0cf*(0x3d*0x8d+-0x4*-0x5bc+-0x3886)+(-0x208*0xf+0x112*-0x7+0x6*0x654)]*_0x216376+_0x5a888f[_0x1a0b93],_0x372f36=Math['min'](_0x1a6477,_0x372f36),_0xa776a7=Math['min'](_0x945d9f,_0xa776a7),_0x313009=Math['min'](_0x89e03b,_0x313009),_0x32d543=Math['max'](_0x1a6477,_0x32d543),_0xc7fa57=Math['max'](_0x945d9f,_0xc7fa57),_0x1330fb=Math['max'](_0x89e03b,_0x1330fb),_0x5e490e[_0x1a0b93]=_0x1a6477,_0x8e0ebe[_0x1a0b93]=_0x945d9f,_0x5a888f[_0x1a0b93]=_0x89e03b;for(let _0x46785a=0x1168+0x62f*-0x3+0x1*0x125;_0x46785a<0x476+0x1a47+0x1ebb*-0x1;_0x46785a++)_0x4618f2[_0x46785a]+=_0x216376*Math['sqrt'](_0x2c865c[_0x46785a][_0x51f0cf*(0x23f7+0x10ab+-0x349f)+(0x10bd+0x85f*-0x3+0x860)]*_0x2c865c[_0x46785a][_0x51f0cf*(0x1dc4+-0x1*0x291+-0x1b30)+(-0x33*0x47+0x799*0x1+0x68c)]+_0x2c865c[_0x46785a][_0x51f0cf*(0xad1+-0x1*0x1db1+0x12e3)+(-0x3a9*0x1+0x1331+-0xf87)]*_0x2c865c[_0x46785a][_0x51f0cf*(0x2679+0x4*-0x255+-0x1d22)+(0x910+-0x546+0x13*-0x33)]+_0x2c865c[_0x46785a][_0x51f0cf*(0xb*0x11b+-0xe8d*-0x2+-0x140*0x21)+(0x23be+0x1dff*-0x1+-0x5bd)]*_0x2c865c[_0x46785a][_0x51f0cf*(-0x1*-0xf55+-0x1*0x268a+0x1738)+(0x1483+-0x20dd+0x2*0x62e)]);_0x34a5d4[-0x13da+0x5ed+0xded]+=this['qRadialSpe'+'ed'][_0x51f0cf]*_0x216376,_0x34a5d4[0x281*-0xb+0x1319+0x135*0x7]+=this['qRadialSpe'+'ed2'][_0x51f0cf]*_0x216376,_0x1781ed=Math['max'](_0x1781ed,Math['max'](Math['abs'](_0x34a5d4[-0xd3*-0x2b+0x1902+0x5*-0xc17]),Math['abs'](_0x34a5d4[-0x20e1+0x1c03*-0x1+0x3ce5]))),_0xa16ad2=Math['max'](_0xa16ad2,this['qScale'][_0x51f0cf]);}this['emitterSha'+'pe']===ai?(_0x1a6477=this['emitterExt'+'ents']['x']*(-0x23a0+0x246e*-0x1+-0x480e*-0x1+0.5),_0x945d9f=this['emitterExt'+'ents']['y']*(0x867+-0x9*-0x10f+0x5*-0x396+0.5),_0x89e03b=this['emitterExt'+'ents']['z']*(-0x419+0x435*0x4+-0xcbb+0.5)):(_0x1a6477=this['emitterRad'+'ius'],_0x945d9f=this['emitterRad'+'ius'],_0x89e03b=this['emitterRad'+'ius']);const _0x4dad30=Math['max'](_0x4618f2[-0x4f8+0x16f5+-0x11fd],_0x4618f2[0x26f1+0x2a1*-0x1+-0x244f]);mc['x']=_0x372f36-_0xa16ad2-_0x1a6477-_0x1781ed-_0x4dad30,mc['y']=_0xa776a7-_0xa16ad2-_0x945d9f-_0x1781ed-_0x4dad30,mc['z']=_0x313009-_0xa16ad2-_0x89e03b-_0x1781ed-_0x4dad30,_c['x']=_0x32d543+_0xa16ad2+_0x1a6477+_0x1781ed+_0x4dad30,_c['y']=_0xc7fa57+_0xa16ad2+_0x945d9f+_0x1781ed+_0x4dad30,_c['z']=_0x1330fb+_0xa16ad2+_0x89e03b+_0x1781ed+_0x4dad30,this['localBound'+'s']['setMinMax'](mc,_c);}['rebuild'](){const _0xeebc07=this['graphicsDe'+'vice'];this['colorMap']===null&&(this['colorMap']=this['defaultPar'+'amTexture']),this['spawnBound'+'s']=this['emitterSha'+'pe']===ai?this['emitterExt'+'ents']:this['emitterRad'+'ius'],this['useCpu']=this['useCpu']||this['sort']>nu||_0xeebc07['maxVertexT'+'extures']<=0x31*-0xa0+0x1*-0x1981+0x3822*0x1||_0xeebc07['fragmentUn'+'iformsCoun'+'t']<-0x5*-0x3ce+-0x39*-0x51+0x1b*-0x15d||_0xeebc07['forceCpuPa'+'rticles'],this['_destroyRe'+'sources'](),this['pack8']=(this['pack8']||!_0xeebc07['textureFlo'+'atRenderab'+'le'])&&!this['useCpu'],bi=this['useCpu']||this['pack8']?-0x210a+0xf0b+0x1*0x1203:-0x1*-0x90a+0xd69+-0x47d*0x5,this['useMesh']=!!this['mesh'],this['numParticl'+'esPot']=Y['nextPowerO'+'fTwo'](this['numParticl'+'es']),this['rebuildGra'+'phs'](),this['calculateL'+'ocalBounds'](),this['resetWorld'+'Bounds'](),this['node']&&(this['worldBound'+'s']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][-0x6+0xaaa*0x1+0x1*-0xaa4]['copy'](this['worldBound'+'s']),this['worldBound'+'sTrail'][0x9e1+-0xd68+0x388]['copy'](this['worldBound'+'s']),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](-0xf8a+-0x2478*0x1+0x1a02*0x2),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['pack8']&&this['calculateB'+'oundsMad']()),this['vbToSort']=new Array(this['numParticl'+'es']);for(let _0x1acba0=-0x1335+0x2010+-0x3*0x449;_0x1acba0<this['numParticl'+'es'];_0x1acba0++)this['vbToSort'][_0x1acba0]=[-0x2*-0x1368+0x1*-0xd1f+-0x19b1,-0xecf*0x1+-0x1d38+0x1*0x2c07];this['particleDi'+'stance']=new Float32Array(this['numParticl'+'es']),this['_gpuUpdate'+'r']['randomize'](),this['particleTe'+'x']=new Float32Array(this['numParticl'+'esPot']*bi*pc);const _0x585fcb=this['node']===null||this['localSpace']?D['ZERO']:this['node']['getPositio'+'n']();this['emitterSha'+'pe']===ai&&(this['node']===null||this['localSpace']?Ur['setTRS'](D['ZERO'],le['IDENTITY'],this['spawnBound'+'s']):Ur['setTRS'](D['ZERO'],this['node']['getRotatio'+'n'](),lg['copy'](this['spawnBound'+'s'])['mul'](this['node']['localScale'])),Ai[-0x15f5+-0x1*0x31a+0x503*0x5]=this['emitterExt'+'ents']['x']!==-0xa7f+-0x6a1+0x1120?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:0x3*0x47b+0x30*0xac+-0x2db1,Ai[-0xc9a+-0x1*0xc11+0x18ac]=this['emitterExt'+'ents']['y']!==-0x1309+0x1*0x1071+0x298?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:-0x1d05+-0x9*-0x95+0x8*0x2f9,Ai[-0x851*-0x2+0x171*0x9+-0x1d99]=this['emitterExt'+'ents']['z']!==0xe63+0x4*-0x40c+-0x1*-0x1cd?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:0x9d*-0x1d+-0x1ae5+0x1*0x2cae);for(let _0x24ac53=-0x1303+-0x782+-0x8d7*-0x3;_0x24ac53<this['numParticl'+'es'];_0x24ac53++)this['_cpuUpdate'+'r']['calcSpawnP'+'osition'](this['particleTe'+'x'],Ur,Ai,_0x585fcb,_0x24ac53),this['useCpu']&&(this['particleTe'+'x'][_0x24ac53*pc+(0xc8*0x25+-0x29d+-0x1a48)+this['numParticl'+'esPot']*(0xf1*-0xd+0x9*0x10f+0x2b8)*pc]=-0x19e4+0x1be2+-0x1*0x1fd);this['particleTe'+'xStart']=new Float32Array(this['numParticl'+'esPot']*bi*pc);for(let _0x91a7fb=0x44f*0x1+0x14c1+-0x10*0x191;_0x91a7fb<this['particleTe'+'xStart']['length'];_0x91a7fb++)this['particleTe'+'xStart'][_0x91a7fb]=this['particleTe'+'x'][_0x91a7fb];this['useCpu']||(this['pack8']?(this['particleTe'+'xIN']=xs(_0xeebc07,this['numParticl'+'esPot'],bi,this['particleTe'+'x'],Ne,0x1f88+-0x17*-0x11+-0x210e*0x1,!(-0x17*-0x4f+-0xdf3*0x2+0x14ce)),this['particleTe'+'xOUT']=xs(_0xeebc07,this['numParticl'+'esPot'],bi,this['particleTe'+'x'],Ne,0x1d22+-0x6d9*-0x3+0x11*-0x2ec,!(0x5*0x1f5+0x3*0x921+0x5*-0x76f)),this['particleTe'+'xStart']=xs(_0xeebc07,this['numParticl'+'esPot'],bi,this['particleTe'+'xStart'],Ne,0x225f+-0x1*0x5f5+0x1c69*-0x1,!(0x1f*-0x116+0x2d0+-0xa49*-0x3))):(this['particleTe'+'xIN']=xs(_0xeebc07,this['numParticl'+'esPot'],bi,this['particleTe'+'x']),this['particleTe'+'xOUT']=xs(_0xeebc07,this['numParticl'+'esPot'],bi,this['particleTe'+'x']),this['particleTe'+'xStart']=xs(_0xeebc07,this['numParticl'+'esPot'],bi,this['particleTe'+'xStart'])),this['rtParticle'+'TexIN']=new gt({'colorBuffer':this['particleTe'+'xIN'],'depth':!(-0xb25*-0x1+-0x1*0x1fde+0x14ba)}),this['rtParticle'+'TexOUT']=new gt({'colorBuffer':this['particleTe'+'xOUT'],'depth':!(-0x24d7*-0x1+0xe19+0xd*-0x3eb)}),this['swapTex']=!(0x1afc+-0xe*0x65+0x3*-0x727));const _0x2c9c21=new Map();this['localSpace']&&_0x2c9c21['set']('LOCAL_SPAC'+'E',''),this['pack8']&&_0x2c9c21['set']('PACK8',''),this['emitterSha'+'pe']===ai&&_0x2c9c21['set']('EMITTERSHA'+'PE_BOX','');const _0x12a64e='Shape:'+this['emitterSha'+'pe']+'-Pack:'+this['pack8']+'-Local:'+this['localSpace'],_0x301ace=Pe['get'](_0xeebc07,_0xeebc07['isWebGPU']?it:Fe),_0x2fb760=new Map(_0x301ace),_0x1b573c={'attributes':{'vertex_position':Me},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'particle_s'+'imulationP'+'S','fragmentDefines':_0x2c9c21,'fragmentIncludes':_0x2fb760};_0x1b573c['uniqueName']='ParticleUp'+'dateRespaw'+'n-'+_0x12a64e,_0x2c9c21['set']('RESPAWN',''),this['shaderPart'+'icleUpdate'+'Respawn']=$t['createShad'+'er'](_0xeebc07,_0x1b573c),_0x2c9c21['delete']('RESPAWN'),_0x1b573c['uniqueName']='ParticleUp'+'dateNoResp'+'awn-'+_0x12a64e,_0x2c9c21['set']('NO_RESPAWN',''),this['shaderPart'+'icleUpdate'+'NoRespawn']=$t['createShad'+'er'](_0xeebc07,_0x1b573c),_0x2c9c21['delete']('NO_RESPAWN'),_0x1b573c['uniqueName']='ParticleUp'+'dateStop-'+_0x12a64e,_0x2c9c21['set']('ON_STOP',''),this['shaderPart'+'icleUpdate'+'OnStop']=$t['createShad'+'er'](_0xeebc07,_0x1b573c),this['numParticl'+'eVerts']=this['useMesh']?this['mesh']['vertexBuff'+'er']['numVertice'+'s']:0xed*-0x13+-0x136e+0x2509*0x1,this['numParticl'+'eIndices']=this['useMesh']?this['mesh']['indexBuffe'+'r'][-0x140+-0x1c21*0x1+-0x45*-0x6d]['numIndices']:-0x8dc+-0x1*-0x163d+-0xd5b,this['_allocate'](this['numParticl'+'es']);const _0x17a0c5=new Ge(_0xeebc07);_0x17a0c5['vertexBuff'+'er']=this['vertexBuff'+'er'],_0x17a0c5['indexBuffe'+'r'][0x142f+0x97d*0x3+-0x1*0x30a6]=this['indexBuffe'+'r'],_0x17a0c5['primitive'][-0xa*-0xf8+0x1*0x2045+0x29f5*-0x1]['type']=js,_0x17a0c5['primitive'][-0xc4b*0x1+-0x662*-0x2+-0xb*0xb]['base']=-0x48a+-0xd*0x13+0x581*0x1,_0x17a0c5['primitive'][0x3f*0x6e+0x35*-0x23+-0x13d3]['count']=this['numParticl'+'es']*this['numParticl'+'eIndices'],_0x17a0c5['primitive'][0x26ed+-0x2*-0xe06+-0x42f9]['indexed']=!(0x55*0x2c+-0x2024+0x1188),this['material']=this['_createMat'+'erial'](),this['resetMater'+'ial']();const _0x3ba4e0=this['meshInstan'+'ce']?this['meshInstan'+'ce']['visible']:!(-0x1418+0x201+-0x1*-0x1217);this['meshInstan'+'ce']=new He(_0x17a0c5,this['material'],this['node']),this['meshInstan'+'ce']['pick']=!(0x979*0x1+-0x2*-0x801+-0x1*0x197a),this['meshInstan'+'ce']['updateKey'](),this['meshInstan'+'ce']['cull']=!(0xa9f+0x2*-0x110d+-0x177b*-0x1),this['localSpace']?this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],this['node']['getWorldTr'+'ansform']()):this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['_updateAab'+'b']=!(0x2e7*-0x3+-0x2fa*0x2+-0xeaa*-0x1),this['meshInstan'+'ce']['visible']=_0x3ba4e0,this['_setMateri'+'alTextures'](),this['resetTime'](),this['addTime'](0xa04+0x1d7+-0xbdb,!(-0x267+0x80+0x1e8)),this['preWarm']&&this['prewarm'](this['lifetime']);}['_isAnimate'+'d'](){return this['animNumFra'+'mes']>=-0x2531+-0x404*-0x2+0x1d2a&&(this['animTilesX']>0xbea*0x3+-0x87a+-0x1b43||this['animTilesY']>0x1130+-0x48d+-0xb*0x126)&&(this['colorMap']&&this['colorMap']!==this['defaultPar'+'amTexture']||this['normalMap']);}['rebuildGra'+'phs'](){const _0x14bb22=this['precision'],_0x553a9d=this['graphicsDe'+'vice'];this['qLocalVelo'+'city']=this['localVeloc'+'ityGraph']['quantize'](_0x14bb22),this['qVelocity']=this['velocityGr'+'aph']['quantize'](_0x14bb22),this['qColor']=this['colorGraph']['quantizeCl'+'amped'](_0x14bb22,-0x3*-0xbff+0x5fe+-0x29fb,0x188e+0x1432+0x18b*-0x1d),this['qRotSpeed']=this['rotationSp'+'eedGraph']['quantize'](_0x14bb22),this['qScale']=this['scaleGraph']['quantize'](_0x14bb22),this['qAlpha']=this['alphaGraph']['quantize'](_0x14bb22),this['qRadialSpe'+'ed']=this['radialSpee'+'dGraph']['quantize'](_0x14bb22),this['qLocalVelo'+'city2']=this['localVeloc'+'ityGraph2']['quantize'](_0x14bb22),this['qVelocity2']=this['velocityGr'+'aph2']['quantize'](_0x14bb22),this['qColor2']=this['colorGraph'+'2']['quantizeCl'+'amped'](_0x14bb22,-0x34*-0x92+0x1*-0x1992+-0x416,0x1e75+-0xe3f*0x1+-0x1035),this['qRotSpeed2']=this['rotationSp'+'eedGraph2']['quantize'](_0x14bb22),this['qScale2']=this['scaleGraph'+'2']['quantize'](_0x14bb22),this['qAlpha2']=this['alphaGraph'+'2']['quantize'](_0x14bb22),this['qRadialSpe'+'ed2']=this['radialSpee'+'dGraph2']['quantize'](_0x14bb22);for(let _0x841be9=0x2*-0xaff+0x4c*-0x1+0x164a;_0x841be9<_0x14bb22;_0x841be9++)this['qRotSpeed'][_0x841be9]*=Y['DEG_TO_RAD'],this['qRotSpeed2'][_0x841be9]*=Y['DEG_TO_RAD'];if(this['localVeloc'+'ityUMax']=new Float32Array(0x1bba+-0xac*-0xf+-0x25cb),this['velocityUM'+'ax']=new Float32Array(-0x3b*-0x9+0x7be+-0x9ce),this['colorUMax']=new Float32Array(0x1fd*0x7+0x147b+0x1*-0x2263),this['rotSpeedUM'+'ax']=[0x84d+-0x1517*-0x1+-0x84*0x39],this['scaleUMax']=[-0x1*0x90f+-0x19e1*-0x1+-0x10d2],this['alphaUMax']=[0x4c1*0x6+-0x20c+0x1*-0x1a7a],this['radialSpee'+'dUMax']=[0x1789+-0xd*0x16c+-0x50d],this['qLocalVelo'+'cityDiv']=Br(this['qLocalVelo'+'city'],this['qLocalVelo'+'city2'],this['localVeloc'+'ityUMax']),this['qVelocityD'+'iv']=Br(this['qVelocity'],this['qVelocity2'],this['velocityUM'+'ax']),this['qColorDiv']=Br(this['qColor'],this['qColor2'],this['colorUMax']),this['qRotSpeedD'+'iv']=Br(this['qRotSpeed'],this['qRotSpeed2'],this['rotSpeedUM'+'ax']),this['qScaleDiv']=Br(this['qScale'],this['qScale2'],this['scaleUMax']),this['qAlphaDiv']=Br(this['qAlpha'],this['qAlpha2'],this['alphaUMax']),this['qRadialSpe'+'edDiv']=Br(this['qRadialSpe'+'ed'],this['qRadialSpe'+'ed2'],this['radialSpee'+'dUMax']),this['pack8']){const _0x35876d=[-0x3b3*-0x1+0x265e+0xb*-0x3d3,0x1f48+0x1bad+-0x3af5,-0x7b6*-0x1+0x165d+-0x1e13*0x1];Xr(this['qVelocity'],_0x35876d);const _0x3386a0=[0x205*0x11+0x1ae7+-0x3d3c,-0x1394+-0x99a+0xa6*0x2d,-0x115d+-0x28c*0x9+0x2849*0x1];Xr(this['qVelocity2'],_0x3386a0);const _0x46947a=[-0xf17+0xae0+0x1*0x437,0x13*-0x1+0x1*0x1f1a+-0x1f07,-0x2*0x100a+0x13cc+0xc48];Xr(this['qLocalVelo'+'city'],_0x46947a);const _0x5e1f52=[-0x12e6*-0x2+0x26e3+0x43*-0x125,0x251e*-0x1+-0x1*0xbd2+0x30f0,0x3e*-0x5+0x22fb+-0x21c5];Xr(this['qLocalVelo'+'city2'],_0x5e1f52);const _0x27f410=[0xe16+0x1*0x239+-0x104f];Xr(this['qRadialSpe'+'ed'],_0x27f410);const _0x294e61=[0x3*0x6f+-0x9*-0x2f5+-0x31a*0x9];Xr(this['qRadialSpe'+'ed2'],_0x294e61);let _0x463d59=Math['max'](_0x35876d[0x1512+0x258b+-0x1*0x3a9d],_0x3386a0[0x19c7+0x1d3d+-0x1f7*0x1c]);_0x463d59=Math['max'](_0x463d59,_0x35876d[0x18ce+0x2*0x5eb+-0x24a3*0x1]),_0x463d59=Math['max'](_0x463d59,_0x3386a0[0x4*-0x37f+0x1800+0xe9*-0xb]),_0x463d59=Math['max'](_0x463d59,_0x35876d[0x4be*-0x3+0xb*0x141+0x1*0x71]),_0x463d59=Math['max'](_0x463d59,_0x3386a0[-0x11d5*-0x1+0x2222*-0x1+0x104f]);let _0x3f9c09=Math['max'](_0x46947a[-0x1c75+-0x17*0xab+0x2bd2],_0x5e1f52[0x922+-0xa8c*-0x3+-0x28c6]);_0x3f9c09=Math['max'](_0x3f9c09,_0x46947a[0x1*-0xbbe+0x168c+-0xacd]),_0x3f9c09=Math['max'](_0x3f9c09,_0x5e1f52[0x6f5+0x209*-0x11+0x1ba5]),_0x3f9c09=Math['max'](_0x3f9c09,_0x46947a[0x59*-0x37+0x2438+-0x1117]),_0x3f9c09=Math['max'](_0x3f9c09,_0x5e1f52[0x9f*-0x1d+-0xf95*-0x2+-0xd25]);const _0x1fd9ab=Math['max'](_0x27f410[-0x133*0x4+-0x47d+0x949],_0x294e61[-0x13af+-0x1*-0x1b6e+0x7bf*-0x1]);this['maxVel']=_0x463d59+_0x3f9c09+_0x1fd9ab;}this['useCpu']||(this['internalTe'+'x0']=xs(_0x553a9d,_0x14bb22,0x88*-0x29+0x1357+0x272,cg(this['qLocalVelo'+'city'],this['qLocalVelo'+'cityDiv'])),this['internalTe'+'x1']=xs(_0x553a9d,_0x14bb22,0x18c4+-0x71a+-0x11a9,cg(this['qVelocity'],this['qVelocityD'+'iv'])),this['internalTe'+'x2']=xs(_0x553a9d,_0x14bb22,-0x6f1+0x2ef*0x7+-0xd97,xA(this['qRotSpeed'],this['qScale'],this['qScaleDiv'],this['qRotSpeedD'+'iv'],this['qAlphaDiv'])),this['internalTe'+'x3']=xs(_0x553a9d,_0x14bb22,-0x12e*-0xd+0x218d*0x1+-0x30e2,TA(this['qRadialSpe'+'ed'],this['qRadialSpe'+'edDiv']))),this['colorParam']=xs(_0x553a9d,_0x14bb22,0xf0d*0x1+-0x23a3+0x1497,vA(this['qColor'],this['qAlpha']),_s,0xfc+0x1597+-0x1692,!(0xbf1+0x76a*0x5+-0x3103));}['_setMateri'+'alTextures'](){this['colorMap']&&(w['call'](()=>{py(this['colorMap']['format'])&&w['warnOnce']('ParticleEm'+'itter:\x20col'+'orMap\x20text'+'ure\x20['+this['colorMap']['name']+(']\x20is\x20not\x20u'+'sing\x20sRGB\x20'+'format.\x20Pl'+'ease\x20corre'+'ct\x20it\x20for\x20'+'the\x20correc'+'t\x20renderin'+'g.'),this['colorMap']);}),this['material']['setParamet'+'er']('colorMap',this['colorMap']),this['lighting']&&this['normalMap']&&this['material']['setParamet'+'er']('normalMap',this['normalMap']));}['_createMat'+'erial'](){const _0x562ef7=new SA(this);return _0x562ef7['name']='EmitterMat'+'erial:'+this['node']['name'],_0x562ef7['cull']=bt,_0x562ef7['alphaWrite']=!(0x215f+0xe*0x23b+-0x4098),_0x562ef7['blendType']=this['blendType'],_0x562ef7['depthWrite']=this['depthWrite'],_0x562ef7;}['resetMater'+'ial'](){const _0x5445dc=this['material'];_0x5445dc['setParamet'+'er']('stretch',this['stretch']),this['_isAnimate'+'d']()&&(_0x5445dc['setParamet'+'er']('animTexTil'+'esParams',this['animTilesP'+'arams']),_0x5445dc['setParamet'+'er']('animTexPar'+'ams',this['animParams']),_0x5445dc['setParamet'+'er']('animTexInd'+'exParams',this['animIndexP'+'arams'])),_0x5445dc['setParamet'+'er']('colorMult',this['intensity']),this['useCpu']||(_0x5445dc['setParamet'+'er']('internalTe'+'x0',this['internalTe'+'x0']),_0x5445dc['setParamet'+'er']('internalTe'+'x1',this['internalTe'+'x1']),_0x5445dc['setParamet'+'er']('internalTe'+'x2',this['internalTe'+'x2']),_0x5445dc['setParamet'+'er']('internalTe'+'x3',this['internalTe'+'x3'])),_0x5445dc['setParamet'+'er']('colorParam',this['colorParam']),_0x5445dc['setParamet'+'er']('numParticl'+'es',this['numParticl'+'es']),_0x5445dc['setParamet'+'er']('numParticl'+'esPot',this['numParticl'+'esPot']),_0x5445dc['setParamet'+'er']('lifetime',this['lifetime']),_0x5445dc['setParamet'+'er']('rate',this['rate']),_0x5445dc['setParamet'+'er']('rateDiv',this['rate2']-this['rate']),_0x5445dc['setParamet'+'er']('seed',this['seed']),_0x5445dc['setParamet'+'er']('scaleDivMu'+'lt',this['scaleUMax'][0x1d46+-0xe69+-0xedd]),_0x5445dc['setParamet'+'er']('alphaDivMu'+'lt',this['alphaUMax'][0x926+-0x59d+-0x5*0xb5]),_0x5445dc['setParamet'+'er']('radialSpee'+'dDivMult',this['radialSpee'+'dUMax'][0x2*-0x4c3+0x5*-0xb5+0xd0f]),_0x5445dc['setParamet'+'er']('graphNumSa'+'mples',this['precision']),_0x5445dc['setParamet'+'er']('graphSampl'+'eSize',(0x63d*-0x5+-0x755+0x2687)/this['precision']),_0x5445dc['setParamet'+'er']('emitterSca'+'le',new Float32Array([0x1*-0xb99+-0x10*-0xce+0x2*-0xa3,-0x1*0x53+-0x930*0x1+-0x261*-0x4,0x338*-0xb+0x25ca+-0xcb*0x3])),this['pack8']&&(this['_gpuUpdate'+'r']['_setInputB'+'ounds'](),_0x5445dc['setParamet'+'er']('inBoundsSi'+'ze',this['_gpuUpdate'+'r']['inBoundsSi'+'zeUniform']),_0x5445dc['setParamet'+'er']('inBoundsCe'+'nter',this['_gpuUpdate'+'r']['inBoundsCe'+'nterUnifor'+'m']),_0x5445dc['setParamet'+'er']('maxVel',this['maxVel'])),this['wrap']&&this['wrapBounds']&&(this['wrapBounds'+'Uniform'][0x506+0x1a8+-0x72*0xf]=this['wrapBounds']['x'],this['wrapBounds'+'Uniform'][0x1*-0x1f9f+0xea7*-0x1+0x2e47]=this['wrapBounds']['y'],this['wrapBounds'+'Uniform'][-0x439*-0x6+0x1e76+-0x4a*0xc1]=this['wrapBounds']['z'],_0x5445dc['setParamet'+'er']('wrapBounds',this['wrapBounds'+'Uniform'])),this['_setMateri'+'alTextures'](),this['depthSofte'+'ning']>-0x1227+-0x36*-0x11+0xe91&&_0x5445dc['setParamet'+'er']('softening',(0x908*-0x2+-0x177a*0x1+0x298b)/(this['depthSofte'+'ning']*this['depthSofte'+'ning']*(-0x209+0xacf*0x1+-0x862))),this['stretch']>0x1386+0x26*-0xd6+0xc3e*0x1&&(_0x5445dc['cull']=bt),this['_compParti'+'cleFacePar'+'ams']();}['_compParti'+'cleFacePar'+'ams'](){let _0xc5c713,_0x33465c;if(this['orientatio'+'n']===yh)_0xc5c713=new Float32Array([-0x2a6+-0x568+0x80f,0x20*0xcd+0x160c+-0x2fac,0x2*-0x3d7+-0x2*0x580+-0x63a*-0x3]),_0x33465c=new Float32Array([0xfc0+0x1*-0x126d+0x1*0x2ad,-0x1ab3+0x1007+0xaac,-0x326+-0x270c+0x2a33]);else{let _0x5ca941;this['orientatio'+'n']===Vw?_0x5ca941=this['particleNo'+'rmal']['normalize']():_0x5ca941=(this['node']===null?te['IDENTITY']:this['node']['getWorldTr'+'ansform']())['transformV'+'ector'](this['particleNo'+'rmal'])['normalize']();const _0x54bc67=new D(0x1a7f+0x1b18+0x26*-0x169,0x1330+0x239+-0xbd*0x1d,-0x686+-0xf*0x7d+0x2c5*0x5);Math['abs'](_0x54bc67['dot'](_0x5ca941))===-0x237a+-0xde7+0x3162&&_0x54bc67['set'](0x1269+0x19bb+-0x2c24,-0x8fb+-0xe3d+-0x2e7*-0x8,-0x115+-0x98f*0x1+0x1*0xaa5);const _0x1aed59=new D()['cross'](_0x5ca941,_0x54bc67)['normalize']();_0x54bc67['cross'](_0x1aed59,_0x5ca941)['normalize'](),_0xc5c713=new Float32Array([_0x54bc67['x'],_0x54bc67['y'],_0x54bc67['z']]),_0x33465c=new Float32Array([_0x1aed59['x'],_0x1aed59['y'],_0x1aed59['z']]);}this['material']['setParamet'+'er']('faceTangen'+'t',_0xc5c713),this['material']['setParamet'+'er']('faceBinorm',_0x33465c);}['getVertexI'+'nfo'](){const _0x31f021=[];return this['useCpu']?_0x31f021['push']({'semantic':Jf,'components':0x4,'type':Ve},{'semantic':uh,'components':0x4,'type':Ve},{'semantic':Ap,'components':0x4,'type':Ve},{'semantic':Cp,'components':0x1,'type':Ve},{'semantic':Pp,'components':this['useMesh']?-0x1446+-0x1*-0x1c8f+-0x49*0x1d:-0x7*-0x2b+-0x61c+-0x4f1*-0x1,'type':Ve}):(_0x31f021['push']({'semantic':Jf,'components':0x4,'type':Ve}),this['useMesh']&&_0x31f021['push']({'semantic':uh,'components':0x2,'type':Ve})),_0x31f021;}['_allocate'](_0x23f0f6){const _0x31eaca=_0x23f0f6*this['numParticl'+'eVerts'],_0x1b3e0d=_0x23f0f6*this['numParticl'+'eIndices'];if(this['vertexBuff'+'er']===void(-0x1*-0x1425+-0x67d+-0x98*0x17)||this['vertexBuff'+'er']['getNumVert'+'ices']()!==_0x31eaca){const _0x3f0d3f=this['getVertexI'+'nfo'](),_0x382ebf=new kt(this['graphicsDe'+'vice'],_0x3f0d3f);this['vertexBuff'+'er']=new Is(this['graphicsDe'+'vice'],_0x382ebf,_0x31eaca,{'usage':lh}),this['indexBuffe'+'r']=new br(this['graphicsDe'+'vice'],wr,_0x1b3e0d);const _0x1d1f37=new Float32Array(this['vertexBuff'+'er']['lock']());let _0x347432,_0x2ed93d,_0x4b6509;if(this['useMesh']){_0x347432=new Float32Array(this['mesh']['vertexBuff'+'er']['lock']()),_0x2ed93d=_0x347432['length']/this['mesh']['vertexBuff'+'er']['numVertice'+'s'];for(let _0x3e2521=0x282*-0xd+0x20a9+0x1*-0xf;_0x3e2521<this['mesh']['vertexBuff'+'er']['format']['elements']['length'];_0x3e2521++)if(this['mesh']['vertexBuff'+'er']['format']['elements'][_0x3e2521]['name']===is){_0x4b6509=this['mesh']['vertexBuff'+'er']['format']['elements'][_0x3e2521]['offset']/(-0x1a4f+0x4*0x3ab+0x1*0xba7);break;}}for(let _0x1eca53=0x20e+-0x1ec0+0x1cb2;_0x1eca53<_0x31eaca;_0x1eca53++){const _0x45dd61=Math['floor'](_0x1eca53/this['numParticl'+'eVerts']);if(this['useMesh']){const _0x4d21c4=_0x1eca53%this['numParticl'+'eVerts'];_0x1d1f37[_0x1eca53*(0x188+-0x124e+0x32*0x56)]=_0x347432[_0x4d21c4*_0x2ed93d],_0x1d1f37[_0x1eca53*(-0x1738+0xce5*0x1+0xa59)+(-0xffb+-0x3*0xa79+-0x2f67*-0x1)]=_0x347432[_0x4d21c4*_0x2ed93d+(-0x8*0x3c9+0x2550+-0x707)],_0x1d1f37[_0x1eca53*(-0x610*0x1+0x383*0x2+-0xf0)+(0x1dc9+-0x116e+-0x1d*0x6d)]=_0x347432[_0x4d21c4*_0x2ed93d+(0x1430+0x11eb+0x2619*-0x1)],_0x1d1f37[_0x1eca53*(-0x13*0x15c+-0x113e+0xe*0x314)+(0x1063*-0x2+-0x49*-0x6e+-0x79*-0x3)]=_0x45dd61,_0x1d1f37[_0x1eca53*(0x1df0+-0x7*0x1df+-0x10d1)+(0x10ee*0x1+0x1431+-0x251b)]=_0x347432[_0x4d21c4*_0x2ed93d+_0x4b6509+(0x7*0x486+0x10c1+0x9af*-0x5)],_0x1d1f37[_0x1eca53*(0x173c*-0x1+-0x148d*0x1+0x1*0x2bcf)+(0x5b9+0x8*-0x10+-0x534)]=-0x1*-0x1ec1+0x8*-0x14b+-0x1468-_0x347432[_0x4d21c4*_0x2ed93d+_0x4b6509+(-0x23*0xcf+-0xd21+0x296f)];}else{const _0x5bad8a=_0x1eca53%(0x42*0x88+0x1747+-0x3a53);_0x1d1f37[_0x1eca53*(-0x3*-0xb42+0x1524+-0x2*0x1b73)]=ig[_0x5bad8a][0x2541+0x3d8+0x491*-0x9],_0x1d1f37[_0x1eca53*(-0xa3*0x9+0x2081+0x32*-0x89)+(0x1fdd+0xd5b*-0x1+-0x1281)]=ig[_0x5bad8a][-0x22b7*0x1+0x15f4+-0xcc4*-0x1],_0x1d1f37[_0x1eca53*(0x1d*-0x14b+-0x269*0xf+-0x382*-0x15)+(0x1842+0x1001+-0x2841*0x1)]=-0x8ed+0x6b9*0x3+0x2*-0x59f,_0x1d1f37[_0x1eca53*(-0x2*0x3a6+0x1*0x815+-0xc5)+(-0x1*-0x521+-0x35e*-0x8+-0x200e)]=_0x45dd61;}}this['useCpu']&&(this['vbCPU']=new Float32Array(_0x1d1f37),this['vbOld']=new Float32Array(this['vbCPU']['length'])),this['vertexBuff'+'er']['unlock'](),this['useMesh']&&this['mesh']['vertexBuff'+'er']['unlock']();let _0x63752b=-0x3*0x38f+-0x21b1+0x2c5e;const _0x3a556b=new Uint32Array(this['indexBuffe'+'r']['lock']());if(this['useMesh']){const _0x3da5b4=this['mesh']['indexBuffe'+'r'][-0x3*-0x871+0xa10+0x1*-0x2363];_0x347432=new Sh[_0x3da5b4['format']](_0x3da5b4['lock']());}for(let _0x5079b2=-0x2*0xb6b+0x2697*-0x1+-0x3d6d*-0x1;_0x5079b2<_0x23f0f6;_0x5079b2++)if(this['useMesh']){for(let _0x3ed7af=0x1b11+-0x9b6*-0x2+-0x2e7d;_0x3ed7af<this['numParticl'+'eIndices'];_0x3ed7af++)_0x3a556b[_0x5079b2*this['numParticl'+'eIndices']+_0x3ed7af]=_0x347432[_0x3ed7af]+_0x5079b2*this['numParticl'+'eVerts'];}else{const _0x161f60=_0x5079b2*(0x1fac+0x3e4+-0x238c);_0x3a556b[_0x63752b++]=_0x161f60,_0x3a556b[_0x63752b++]=_0x161f60+(-0x12d+-0x1076+-0x11a4*-0x1),_0x3a556b[_0x63752b++]=_0x161f60+(-0x29*0xc7+-0x1*0x1dd1+0x3db2),_0x3a556b[_0x63752b++]=_0x161f60,_0x3a556b[_0x63752b++]=_0x161f60+(-0x187d+-0x3*-0xced+0x1c9*-0x8),_0x3a556b[_0x63752b++]=_0x161f60+(0x23c6+0x47e+0x3*-0xd6b);}this['indexBuffe'+'r']['unlock'](),this['useMesh']&&this['mesh']['indexBuffe'+'r'][-0x7*0x38+-0xf4d*0x2+-0x9*-0x392]['unlock']();}}['reset'](){if(this['beenReset']=!(0x12d3+-0xf2d+-0x3a6),this['seed']=Math['random'](),this['material']['setParamet'+'er']('seed',this['seed']),this['useCpu']){for(let _0x47218b=0x1ecb+-0x1a93*0x1+-0x8*0x87;_0x47218b<this['particleTe'+'xStart']['length'];_0x47218b++)this['particleTe'+'x'][_0x47218b]=this['particleTe'+'xStart'][_0x47218b];}else this['_setMateri'+'alTextures']();this['resetWorld'+'Bounds'](),this['resetTime']();const _0x4d2886=this['loop'];this['loop']=!(-0x22b5+-0x2*0x9a9+0x3607),this['addTime'](-0x533*0x2+-0xf44+0x2da*0x9,!(0x591+-0x4ab*0x8+0x1fc8)),this['loop']=_0x4d2886,this['preWarm']&&this['prewarm'](this['lifetime']);}['prewarm'](_0x27e82c){const _0x53a349=_0x27e82c/this['lifetime'],_0x43f138=Math['min'](Math['floor'](_0x53a349*this['precision']),this['precision']),_0x5a679d=_0x27e82c/_0x43f138;for(let _0x3777ef=0x1*0x1a79+0x4*-0x71e+0x1ff;_0x3777ef<_0x43f138;_0x3777ef++)this['addTime'](_0x5a679d,!(0x1387*0x1+0x23ee+0x27*-0x16c));}['resetTime'](){this['endTime']=wA(this);}['finishFram'+'e'](){this['useCpu']&&this['vertexBuff'+'er']['unlock']();}['addTime'](_0x486bf4,_0x3fbfb3){const _0x370e65=this['graphicsDe'+'vice'],_0x420ff6=de();if(this['simTimeTot'+'al']+=_0x486bf4,this['calculateW'+'orldBounds'](),this['_isAnimate'+'d']()){const _0x307073=this['animTilesP'+'arams'];_0x307073[-0x14ab+0x14ef+-0x44]=(-0xad*-0x2d+-0x3b*-0xa3+0x1*-0x43f9)/this['animTilesX'],_0x307073[0x118f+-0x2*-0xd7+-0x133c]=(0xcbd+-0x164a+-0x4c7*-0x2)/this['animTilesY'];const _0xe47686=this['animParams'];_0xe47686[-0xf88+0x1623+-0x13*0x59]=this['animStartF'+'rame'],_0xe47686[0x4e7+-0xa89+0x5a3]=this['animNumFra'+'mes']*this['animSpeed'],_0xe47686[0x67*0x61+0x3*-0x1c6+0x21b3*-0x1]=this['animNumFra'+'mes']-(-0x1d24+0xe*0x146+-0x1*-0xb51),_0xe47686[0x125*0xf+0xaea+-0xe09*0x2]=this['animNumAni'+'mations']-(-0x2*0x2cf+-0x1799+-0x14*-0x176);const _0x23f85c=this['animIndexP'+'arams'];_0x23f85c[0x1302+-0x2490+0x5da*0x3]=this['animIndex'],_0x23f85c[-0x1acd+-0x21ab+0x3c79]=this['randomizeA'+'nimIndex'];}this['scene']&&this['camera']!==this['scene']['_activeCam'+'era']&&(this['camera']=this['scene']['_activeCam'+'era'],this['onChangeCa'+'mera']()),this['emitterSha'+'pe']===ai&&(Ai[0xa12+0xb*-0x37b+0xe9*0x1f]=this['emitterExt'+'ents']['x']!==0x115*-0x10+0x22ec+0x467*-0x4?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:0xdde+-0x4*0x449+0x346*0x1,Ai[-0x2*0xe57+-0x34*0x2e+-0x21*-0x127]=this['emitterExt'+'ents']['y']!==0x460+-0x76*0x12+0x3ec?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:0x2303+0x10f1*-0x1+-0x1212,Ai[-0x31b+-0xe*0x16e+0x1721]=this['emitterExt'+'ents']['z']!==0x2707+0xa88+-0x3*0x1085?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:0x518+-0x84f+-0x1*-0x337,this['meshInstan'+'ce']['node']===null?Ur['setTRS'](D['ZERO'],le['IDENTITY'],this['emitterExt'+'ents']):Ur['setTRS'](D['ZERO'],this['meshInstan'+'ce']['node']['getRotatio'+'n'](),lg['copy'](this['emitterExt'+'ents'])['mul'](this['meshInstan'+'ce']['node']['localScale'])));let _0x56f8ec;const _0x14448c=this['meshInstan'+'ce']['node']===null?D['ONE']:this['meshInstan'+'ce']['node']['localScale'];if(this['emitterSca'+'leUniform'][-0x1*-0x2011+-0x1898*0x1+-0x779]=_0x14448c['x'],this['emitterSca'+'leUniform'][0xea1+0x13cb+-0x226b]=_0x14448c['y'],this['emitterSca'+'leUniform'][-0x7d7+-0x60c+-0x1*-0xde5]=_0x14448c['z'],this['material']['setParamet'+'er']('emitterSca'+'le',this['emitterSca'+'leUniform']),this['localSpace']&&this['meshInstan'+'ce']['node']&&(_0x56f8ec=this['meshInstan'+'ce']['node']['getPositio'+'n'](),this['emitterPos'+'Uniform'][0x1c04+0x226c+-0x534*0xc]=_0x56f8ec['x'],this['emitterPos'+'Uniform'][-0x7*0x2c9+0x347+0x1039]=_0x56f8ec['y'],this['emitterPos'+'Uniform'][0xc9a+-0x26ae*0x1+0x1a16]=_0x56f8ec['z'],this['material']['setParamet'+'er']('emitterPos',this['emitterPos'+'Uniform'])),this['_compParti'+'cleFacePar'+'ams'](),!this['useCpu'])this['_gpuUpdate'+'r']['update'](_0x370e65,Ur,Ai,_0x486bf4,_0x3fbfb3);else{const _0x3772f3=new Float32Array(this['vertexBuff'+'er']['lock']());this['_cpuUpdate'+'r']['update'](_0x3772f3,this['vbToSort'],this['particleTe'+'x'],Ur,Ai,_0x56f8ec,_0x486bf4,_0x3fbfb3);}this['loop']||Date['now']()>this['endTime']&&(this['onFinished']&&this['onFinished'](),this['meshInstan'+'ce']['visible']=!(0x1*0xa5+0x2*-0xcf3+-0x1942*-0x1)),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['drawOrder']=this['drawOrder']),this['_addTimeTi'+'me']+=de()-_0x420ff6;}['_destroyRe'+'sources'](){var _0x54d8f7,_0x20819c,_0x294770,_0xef7916,_0x363668,_0x57ad4f,_0x5b5df8,_0x543793,_0x36bfba,_0x1ab142,_0x3ffc35,_0x46b415;(_0x54d8f7=this['particleTe'+'xIN'])==null||_0x54d8f7['destroy'](),this['particleTe'+'xIN']=null,(_0x20819c=this['particleTe'+'xOUT'])==null||_0x20819c['destroy'](),this['particleTe'+'xOUT']=null,this['particleTe'+'xStart']&&this['particleTe'+'xStart']['destroy']&&(this['particleTe'+'xStart']['destroy'](),this['particleTe'+'xStart']=null),(_0x294770=this['rtParticle'+'TexIN'])==null||_0x294770['destroy'](),this['rtParticle'+'TexIN']=null,(_0xef7916=this['rtParticle'+'TexOUT'])==null||_0xef7916['destroy'](),this['rtParticle'+'TexOUT']=null,(_0x363668=this['internalTe'+'x0'])==null||_0x363668['destroy'](),this['internalTe'+'x0']=null,(_0x57ad4f=this['internalTe'+'x1'])==null||_0x57ad4f['destroy'](),this['internalTe'+'x1']=null,(_0x5b5df8=this['internalTe'+'x2'])==null||_0x5b5df8['destroy'](),this['internalTe'+'x2']=null,(_0x543793=this['internalTe'+'x3'])==null||_0x543793['destroy'](),this['internalTe'+'x3']=null,(_0x36bfba=this['colorParam'])==null||_0x36bfba['destroy'](),this['colorParam']=null,(_0x1ab142=this['vertexBuff'+'er'])==null||_0x1ab142['destroy'](),this['vertexBuff'+'er']=void(-0x1e58+0x1*0xae5+0x1373),(_0x3ffc35=this['indexBuffe'+'r'])==null||_0x3ffc35['destroy'](),this['indexBuffe'+'r']=void(-0x242a+0xddd+0x164d),(_0x46b415=this['material'])==null||_0x46b415['destroy'](),this['material']=null;}['destroy'](){this['camera']=null,this['_destroyRe'+'sources']();}}class PA extends ya{['generateKe'+'y'](_0x1f80bd){var _0x10f8ca;const _0x5e0b76=_0x1f80bd['shaderDesc'],_0x7803e5=_0x5e0b76['vertexGLSL']?hi(_0x5e0b76['vertexGLSL']):-0x1fc9+-0x1495+0x2*0x1a2f,_0x403ab4=_0x5e0b76['fragmentGL'+'SL']?hi(_0x5e0b76['fragmentGL'+'SL']):0x6*0x595+0x25f3+-0x4771,_0x3b9111=_0x5e0b76['vertexWGSL']?hi(_0x5e0b76['vertexWGSL']):0x10*0xdc+-0x196d+-0xbad*-0x1,_0x21350d=_0x5e0b76['fragmentWG'+'SL']?hi(_0x5e0b76['fragmentWG'+'SL']):-0x166d+-0x985+0x1ff2,_0x1874d8=ya['definesHas'+'h'](_0x1f80bd['defines']),_0x1ee791=((_0x10f8ca=_0x1f80bd['shaderChun'+'ks'])==null?void(-0x2cf*0x4+-0x7e+0xbba):_0x10f8ca['key'])??'';let _0x2c21e8=_0x5e0b76['uniqueName']+'_'+_0x1874d8+'_'+_0x7803e5+'_'+_0x403ab4+'_'+_0x3b9111+'_'+_0x21350d+'_'+_0x1ee791;return _0x1f80bd['skin']&&(_0x2c21e8+='_skin'),_0x1f80bd['useInstanc'+'ing']&&(_0x2c21e8+='_inst'),_0x1f80bd['useMorphPo'+'sition']&&(_0x2c21e8+='_morphp'),_0x1f80bd['useMorphNo'+'rmal']&&(_0x2c21e8+='_morphn'),_0x1f80bd['useMorphTe'+'xtureBased'+'Int']&&(_0x2c21e8+='_morphi'),_0x2c21e8;}['createAttr'+'ibutesDefi'+'nition'](_0x623c71,_0x1446f3){const _0x3912a2=_0x1446f3['shaderDesc']['attributes'],_0x4ea2af=_0x3912a2?{..._0x3912a2}:void(-0x1197*-0x1+0x630+-0x17c7);_0x1446f3['skin']&&(_0x4ea2af['vertex_bon'+'eWeights']=gi,_0x4ea2af['vertex_bon'+'eIndices']=us),(_0x1446f3['useMorphPo'+'sition']||_0x1446f3['useMorphNo'+'rmal'])&&(_0x4ea2af['morph_vert'+'ex_id']=Ln),_0x623c71['attributes']=_0x4ea2af;}['createVert'+'exDefiniti'+'on'](_0x2ce8a0,_0x465f26,_0x183ed8,_0x4b091b){const _0x46aa54=_0x465f26['shaderDesc'],_0x394661=new Map(_0x183ed8);_0x394661['set']('transformI'+'nstancingV'+'S','');const _0x564c47=new Map(_0x465f26['defines']);_0x465f26['skin']&&_0x564c47['set']('SKIN',!(-0x980+-0x1d47+0x26c7)),_0x465f26['useInstanc'+'ing']&&_0x564c47['set']('INSTANCING',!(-0x2148+0x22ac+-0x164)),(_0x465f26['useMorphPo'+'sition']||_0x465f26['useMorphNo'+'rmal'])&&(_0x564c47['set']('MORPHING',!(0x2593+-0x18*-0x1+0x1*-0x25ab)),_0x465f26['useMorphTe'+'xtureBased'+'Int']&&_0x564c47['set']('MORPHING_I'+'NT',!(0x5*-0x1b+0x20*0x51+-0x9*0x111)),_0x465f26['useMorphPo'+'sition']&&_0x564c47['set']('MORPHING_P'+'OSITION',!(-0x1*-0x28f+-0x26c9+0x243a*0x1)),_0x465f26['useMorphNo'+'rmal']&&_0x564c47['set']('MORPHING_N'+'ORMAL',!(-0x12bd+0x8a*-0x11+-0x1be7*-0x1))),_0x2ce8a0['vertexCode']=_0x4b091b?_0x46aa54['vertexWGSL']:_0x46aa54['vertexGLSL'],_0x2ce8a0['vertexIncl'+'udes']=_0x394661,_0x2ce8a0['vertexDefi'+'nes']=_0x564c47;}['createFrag'+'mentDefini'+'tion'](_0x1d7af8,_0x664108,_0x4f1f7f,_0x1e6f61){const _0x5f2fb0=_0x664108['shaderDesc'],_0x2186cc=new Map(_0x4f1f7f),_0x196ecb=new Map(_0x664108['defines']);_0x1d7af8['fragmentCo'+'de']=_0x1e6f61?_0x5f2fb0['fragmentWG'+'SL']:_0x5f2fb0['fragmentGL'+'SL'],_0x1d7af8['fragmentIn'+'cludes']=_0x2186cc,_0x1d7af8['fragmentDe'+'fines']=_0x196ecb;}['createShad'+'erDefiniti'+'on'](_0x2b322f,_0x399aad){var _0x18ec36;const _0x23fa02=_0x399aad['shaderDesc'],_0x4c6829=_0x2b322f['isWebGPU']&&!!_0x23fa02['vertexWGSL']&&!!_0x23fa02['fragmentWG'+'SL']&&(((_0x18ec36=_0x399aad['shaderChun'+'ks'])==null?void(0x12b4+0x1a03*-0x1+0x74f):_0x18ec36['useWGSL'])??!(0x1f4f+0x2148+-0x5*0xceb)),_0x1fbed5={'name':'ShaderMate'+'rial-'+_0x23fa02['uniqueName'],'shaderLanguage':_0x4c6829?it:Fe,'fragmentOutputTypes':_0x23fa02['fragmentOu'+'tputTypes'],'meshUniformBufferFormat':_0x23fa02['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x23fa02['meshBindGr'+'oupFormat']},_0x336a46=_0x4c6829?it:Fe,_0x46752c=bh['merge'](Pe['get'](_0x2b322f,_0x336a46),_0x399aad['shaderChun'+'ks'][_0x336a46]);return this['createAttr'+'ibutesDefi'+'nition'](_0x1fbed5,_0x399aad),this['createVert'+'exDefiniti'+'on'](_0x1fbed5,_0x399aad,_0x46752c,_0x4c6829),this['createFrag'+'mentDefini'+'tion'](_0x1fbed5,_0x399aad,_0x46752c,_0x4c6829),Jt['createDefi'+'nition'](_0x2b322f,_0x1fbed5);}}const MA=new PA();class Xn extends tr{constructor(_0x34cf71){super(),h(this,'_shaderDes'+'c'),this['shaderDesc']=_0x34cf71;}set['shaderDesc'](_0x16f2d5){if(this['_shaderDes'+'c']=void(-0x30+-0x240+0x270),_0x16f2d5&&(this['_shaderDes'+'c']={'uniqueName':_0x16f2d5['uniqueName'],'attributes':_0x16f2d5['attributes'],'fragmentOutputTypes':_0x16f2d5['fragmentOu'+'tputTypes'],'vertexGLSL':_0x16f2d5['vertexGLSL'],'fragmentGLSL':_0x16f2d5['fragmentGL'+'SL'],'vertexWGSL':_0x16f2d5['vertexWGSL'],'fragmentWGSL':_0x16f2d5['fragmentWG'+'SL']},_0x16f2d5['vertexCode']||_0x16f2d5['fragmentCo'+'de']||_0x16f2d5['shaderLang'+'uage'])){w['deprecated']('ShaderMate'+'rial\x20['+_0x16f2d5['uniqueName']+(']:\x20vertexC'+'ode,\x20fragm'+'entCode\x20an'+'d\x20shaderLa'+'nguage\x20pro'+'perties\x20of'+'\x20ShaderDes'+'c\x20is\x20depre'+'cated.\x20Use'+'\x20vertexGLS'+'L,\x20fragmen'+'tGLSL,\x20ver'+'texWGSL\x20or'+'\x20fragmentW'+'GSL\x20instea'+'d.'));const _0x45a096=_0x16f2d5['shaderLang'+'uage']??Fe;_0x45a096===Fe?(this['_shaderDes'+'c']['vertexGLSL']=_0x16f2d5['vertexCode'],this['_shaderDes'+'c']['fragmentGL'+'SL']=_0x16f2d5['fragmentCo'+'de']):_0x45a096===it&&(this['_shaderDes'+'c']['vertexWGSL']=_0x16f2d5['vertexCode'],this['_shaderDes'+'c']['fragmentWG'+'SL']=_0x16f2d5['fragmentCo'+'de']);}this['clearVaria'+'nts']();}get['shaderDesc'](){return this['_shaderDes'+'c'];}['copy'](_0x1bafd7){return super['copy'](_0x1bafd7),this['shaderDesc']=_0x1bafd7['shaderDesc'],this;}['getShaderV'+'ariant'](_0x479267){const {objDefs:_0x28ba04}=_0x479267,_0x39503e={'defines':$t['getCoreDef'+'ines'](this,_0x479267),'skin':(_0x28ba04&nl)!==0x1*0xbb4+-0x1653+0xa9f,'useInstancing':(_0x28ba04&ol)!==0xcf7+0x1ff+-0x2*0x77b,'useMorphPosition':(_0x28ba04&ll)!==-0x1919+0x5bb+-0x1*-0x135e,'useMorphNormal':(_0x28ba04&cl)!==-0x2c*0x6f+0xd*0x57+0xea9,'useMorphTextureBasedInt':(_0x28ba04&hl)!==-0x5f2+-0x1*0x127d+0x186f,'pass':_0x479267['pass'],'gamma':_0x479267['cameraShad'+'erParams']['shaderOutp'+'utGamma'],'toneMapping':_0x479267['cameraShad'+'erParams']['toneMappin'+'g'],'fog':_0x479267['cameraShad'+'erParams']['fog'],'shaderDesc':this['shaderDesc'],'shaderChunks':this['shaderChun'+'ks']},_0x37ba3d=new Ad(_0x479267['viewUnifor'+'mFormat'],_0x479267['viewBindGr'+'oupFormat'],_0x479267['vertexForm'+'at']),_0x216913=Hn(_0x479267['device']);return _0x216913['register']('shader-mat'+'erial',MA),_0x216913['getProgram']('shader-mat'+'erial',_0x39503e,_0x37ba3d,this['userId']);}}const Iv=(_0x4b5d98,_0x103833)=>{const _0x4843bf=_0x103833['length']/(-0xc9d*0x3+0x13a3+0x1237),_0x473098=_0x4b5d98['length']/(-0x26a7+-0x9b5+-0xcb*-0x3d),_0x4aefd9=new D(),_0x198170=new D(),_0x377eb2=new D(),_0xc71a3b=new D(),_0x2bb26a=new D(),_0x30244a=new D(),_0x20e982=[];for(let _0x394a21=0x1dca+0x101c+-0xfa*0x2f;_0x394a21<_0x4b5d98['length'];_0x394a21++)_0x20e982[_0x394a21]=0x55b*-0x5+0x807+-0x5*-0x3c0;for(let _0x3cd6d0=-0x3*-0xce9+0x2428+-0x4ae3;_0x3cd6d0<_0x4843bf;_0x3cd6d0++){const _0x55293b=_0x103833[_0x3cd6d0*(0x3ad*0x9+-0x10c*-0x15+-0x370e)],_0x295945=_0x103833[_0x3cd6d0*(0xa70+0xdf3*0x2+-0x1*0x2653)+(0x65*0x38+-0x18d9+-0x2c2*-0x1)],_0x81079e=_0x103833[_0x3cd6d0*(0x9bf*0x2+-0xe91+-0x4ea)+(0x2019+0x547+-0x255e)];_0x4aefd9['set'](_0x4b5d98[_0x55293b*(-0x8ce+-0x148c+-0x1*-0x1d5d)],_0x4b5d98[_0x55293b*(0x10fa+-0x195d*0x1+0x866)+(0x26a2+-0x2*-0x6ad+-0x33fb)],_0x4b5d98[_0x55293b*(0x105d+0x425*-0x1+-0xc35)+(-0x1*-0x1d63+0x1e7+0x3e9*-0x8)]),_0x198170['set'](_0x4b5d98[_0x295945*(-0x3*0x704+-0x1*0x14b7+0x29c6)],_0x4b5d98[_0x295945*(0x5*-0x7f+0x171a+-0x2*0xa4e)+(-0x12c7+0x1183*-0x2+0x35ce)],_0x4b5d98[_0x295945*(-0x611*0x5+-0x24d3+0x432b)+(0xb02+0x343*0xb+-0x2ee1)]),_0x377eb2['set'](_0x4b5d98[_0x81079e*(0xaa3+0x133*-0x1a+-0x2*-0xa47)],_0x4b5d98[_0x81079e*(-0x222d+-0x9*0x3b7+0x9a9*0x7)+(0x20ba+0x6*0x3ae+0x36cd*-0x1)],_0x4b5d98[_0x81079e*(-0xe49+-0xcd9+0x1b25)+(-0xed5*0x1+0x187*-0x9+0x1c96)]),_0xc71a3b['sub2'](_0x198170,_0x4aefd9),_0x2bb26a['sub2'](_0x377eb2,_0x4aefd9),_0x30244a['cross'](_0xc71a3b,_0x2bb26a)['normalize'](),_0x20e982[_0x55293b*(-0x1*0x160f+-0x76*0x2+0x16fe)]+=_0x30244a['x'],_0x20e982[_0x55293b*(0x8b*0x2f+-0x1c6*-0x15+-0x8*0x7d8)+(-0x1aa*0x16+0x235f+0x13e)]+=_0x30244a['y'],_0x20e982[_0x55293b*(-0x215*0xd+-0x1*-0x1f1+-0x1ad*-0xf)+(0x13af+-0x2c3+-0x1b1*0xa)]+=_0x30244a['z'],_0x20e982[_0x295945*(0x8*-0x1f3+0xa89+0x512)]+=_0x30244a['x'],_0x20e982[_0x295945*(-0x1485+0x24cf+0x3*-0x56d)+(0x16*-0x67+0x1*-0x778+0x1053)]+=_0x30244a['y'],_0x20e982[_0x295945*(-0x1*-0xbb7+0x1a97*-0x1+0xee3)+(0x1f6c+-0x3bb*-0x1+-0x2325)]+=_0x30244a['z'],_0x20e982[_0x81079e*(-0x1*-0x193+-0x2b*0x95+-0x1*-0x1777)]+=_0x30244a['x'],_0x20e982[_0x81079e*(0x59*-0x4c+0x3cb*-0x6+0x7*0x707)+(0xfbf+-0x2bb+-0xd03)]+=_0x30244a['y'],_0x20e982[_0x81079e*(0x14b1+-0x8f+-0x1*0x141f)+(-0x22f0+-0x3e6+0x26d8)]+=_0x30244a['z'];}for(let _0x45025b=-0x26bc+0x2*-0x25f+0xa*0x459;_0x45025b<_0x473098;_0x45025b++){const _0x17ff76=_0x20e982[_0x45025b*(-0x1495+0x1112+-0x1c3*-0x2)],_0x1d36ef=_0x20e982[_0x45025b*(0x1d87+0xd93*-0x2+-0x25e)+(0x1ac4*-0x1+0x21f3+-0x72e)],_0x4b4f75=_0x20e982[_0x45025b*(0x13cb+0x1089*-0x1+0x1*-0x33f)+(0x698*0x2+0x2019+-0x2d47)],_0x202aaa=(0x1e*0x105+-0xc25*0x3+0x5da)/Math['sqrt'](_0x17ff76*_0x17ff76+_0x1d36ef*_0x1d36ef+_0x4b4f75*_0x4b4f75);_0x20e982[_0x45025b*(-0x3e6*-0x4+0x3*0x7cf+-0x1*0x2702)]*=_0x202aaa,_0x20e982[_0x45025b*(-0x479+0x1*-0x1552+0x19ce*0x1)+(-0x84b+0x157+-0x89*-0xd)]*=_0x202aaa,_0x20e982[_0x45025b*(0x115*0x1d+-0x541*-0x1+-0x249f)+(-0x8*0x1dc+-0xdf*-0x1+0xe03)]*=_0x202aaa;}return _0x20e982;},Mr=(_0xd7f6bd,_0x561b64,_0x1fd4d0,_0x4500ef)=>{const _0x589973=_0x4500ef['length']/(0xd6+-0x207b*0x1+0x1fa8),_0x144bc1=_0xd7f6bd['length']/(-0x364+0x5*-0x6d5+0x2*0x12c8),_0x5b17ee=new D(),_0x8872a1=new D(),_0x448652=new D(),_0x516519=new J(),_0x5b7c16=new J(),_0x4e5482=new J(),_0x1bb36a=new D(),_0x5d8b1f=new D(),_0x359fa2=new Float32Array(_0x144bc1*(0x2*0x50+-0x23d1+-0x3*-0xbbc)),_0x58a65=new Float32Array(_0x144bc1*(0x1588+-0x171a+-0x87*-0x3)),_0x3a1d2d=[];for(let _0x11caea=0x1c71+0xe82+-0x2af3;_0x11caea<_0x589973;_0x11caea++){const _0x549fd2=_0x4500ef[_0x11caea*(0x14a7*0x1+-0x152d+0x89)],_0xb5bad3=_0x4500ef[_0x11caea*(-0x1f52+-0x2*0x11a5+-0x17b*-0x2d)+(0x5c*-0xd+-0xadf*0x1+0xf8c)],_0x572e89=_0x4500ef[_0x11caea*(-0x245*0x2+-0x24f4+0x2981)+(-0x222a+-0xc21+0x2e4d)];_0x5b17ee['set'](_0xd7f6bd[_0x549fd2*(-0x2049+0x1ec5+0x11*0x17)],_0xd7f6bd[_0x549fd2*(-0x19*0x133+-0x1908+-0x2*-0x1b83)+(-0x1629*-0x1+0x2232*0x1+-0x385a)],_0xd7f6bd[_0x549fd2*(-0xe*0x20c+0xf8d*0x1+0xd1e)+(-0x390*-0x6+0x1f60+-0x34be)]),_0x8872a1['set'](_0xd7f6bd[_0xb5bad3*(0x1*-0x219b+0x1*-0xd9+0x2277)],_0xd7f6bd[_0xb5bad3*(-0x61*-0x1+-0x2489+0x242b)+(0x2*0xb29+-0x6*-0x52a+-0x1*0x354d)],_0xd7f6bd[_0xb5bad3*(-0x13*-0x77+-0x267d+0x1dab)+(0x1503+-0x25b5+0x10b4)]),_0x448652['set'](_0xd7f6bd[_0x572e89*(-0xbb*-0x1f+0x1eca+-0x1a*0x20e)],_0xd7f6bd[_0x572e89*(-0x2a7*-0xc+-0x94b+-0x1686)+(-0x863+-0x1bb7+0xd*0x2c7)],_0xd7f6bd[_0x572e89*(0x7*-0x4cc+-0x3*0x2e7+0x2a4c)+(-0x17fd+-0x1*-0xf5c+0x8a3)]),_0x516519['set'](_0x1fd4d0[_0x549fd2*(0x1*-0x1d79+0x145*-0x4+0x3d7*0x9)],_0x1fd4d0[_0x549fd2*(0x2421+-0x5*0x553+-0x980)+(-0x2*0xc83+-0x2*0x1302+0x3f0b)]),_0x5b7c16['set'](_0x1fd4d0[_0xb5bad3*(-0x455*0x9+0x1284+-0x6b*-0x31)],_0x1fd4d0[_0xb5bad3*(0x4cf*0x7+0x18aa+-0x3a51)+(-0x1cba*-0x1+-0x1*-0x21bd+0xd*-0x4ce)]),_0x4e5482['set'](_0x1fd4d0[_0x572e89*(0xb60+-0x18a2+0xd44)],_0x1fd4d0[_0x572e89*(-0x14*0x16f+0x1*-0x35f+-0xaaf*-0x3)+(-0x1*-0x2f9+-0x24bb*-0x1+-0x27b3)]);const _0x17bb5a=_0x8872a1['x']-_0x5b17ee['x'],_0x5168c8=_0x448652['x']-_0x5b17ee['x'],_0x3b2a4e=_0x8872a1['y']-_0x5b17ee['y'],_0x30ac66=_0x448652['y']-_0x5b17ee['y'],_0xf2fa5c=_0x8872a1['z']-_0x5b17ee['z'],_0x5164bd=_0x448652['z']-_0x5b17ee['z'],_0x2dc493=_0x5b7c16['x']-_0x516519['x'],_0x4829ec=_0x4e5482['x']-_0x516519['x'],_0x2f7bc1=_0x5b7c16['y']-_0x516519['y'],_0x1d0aba=_0x4e5482['y']-_0x516519['y'],_0x1132ca=_0x2dc493*_0x1d0aba-_0x4829ec*_0x2f7bc1;if(_0x1132ca===0x1cb0+-0x13*-0x149+-0x351b)_0x1bb36a['set'](0x15d7*0x1+-0x8*0x4bb+0xf1*0x11,0x1*-0x653+-0x89e+0xef2,0x138e+0x11cb+0x3*-0xc73),_0x5d8b1f['set'](-0x15c2+0x976*-0x1+0x1f39*0x1,0x3bf+0x14e1*0x1+-0x18a0,0x11*0x3d+0x23ad+-0x46a*0x9);else{const _0x18fadb=(0x8ec*-0x2+-0x493+0x19a*0xe)/_0x1132ca;_0x1bb36a['set']((_0x1d0aba*_0x17bb5a-_0x2f7bc1*_0x5168c8)*_0x18fadb,(_0x1d0aba*_0x3b2a4e-_0x2f7bc1*_0x30ac66)*_0x18fadb,(_0x1d0aba*_0xf2fa5c-_0x2f7bc1*_0x5164bd)*_0x18fadb),_0x5d8b1f['set']((_0x2dc493*_0x5168c8-_0x4829ec*_0x17bb5a)*_0x18fadb,(_0x2dc493*_0x30ac66-_0x4829ec*_0x3b2a4e)*_0x18fadb,(_0x2dc493*_0x5164bd-_0x4829ec*_0xf2fa5c)*_0x18fadb);}_0x359fa2[_0x549fd2*(-0x1e07+-0x18d+0x1f97)+(-0x17a1+-0x12b6+0x1*0x2a57)]+=_0x1bb36a['x'],_0x359fa2[_0x549fd2*(0x5d0+-0xba*-0xb+-0xdcb)+(0x1c75+-0x6*0x55b+0x3ae)]+=_0x1bb36a['y'],_0x359fa2[_0x549fd2*(-0x8ce+-0xb*0x22+0xa47)+(-0x1c8a+-0x1*-0x2413+-0x787)]+=_0x1bb36a['z'],_0x359fa2[_0xb5bad3*(-0x621*-0x1+0xea9+-0x14c7)+(0x1*-0x1f45+-0xb61+0xce*0x35)]+=_0x1bb36a['x'],_0x359fa2[_0xb5bad3*(0x3*0xc42+-0x1*0x17a5+-0xd1e)+(-0xf2f+-0x1*-0x1e13+-0xee3)]+=_0x1bb36a['y'],_0x359fa2[_0xb5bad3*(0x115*-0x2+-0x9f7+-0x40c*-0x3)+(-0x9*-0xe6+-0xd06*-0x1+-0x151a)]+=_0x1bb36a['z'],_0x359fa2[_0x572e89*(0x1*-0x1c99+0x1c14+0x88)+(0x247*0xb+0x2*0xed1+-0x36af)]+=_0x1bb36a['x'],_0x359fa2[_0x572e89*(-0x566+0x1016+0x3*-0x38f)+(-0x1*0xf67+0xd0f*0x1+-0x259*-0x1)]+=_0x1bb36a['y'],_0x359fa2[_0x572e89*(-0x1798+0x4f0*0x2+-0x25*-0x5f)+(0x1dc5+0xc04+-0x29c7)]+=_0x1bb36a['z'],_0x58a65[_0x549fd2*(0x1f54+0x1*0x1beb+-0xecf*0x4)+(0xca+0x1d64+-0x1e2e*0x1)]+=_0x5d8b1f['x'],_0x58a65[_0x549fd2*(0x2f*-0x5c+-0x26f7+0x37de*0x1)+(0x444*-0x1+0x217+0x22e)]+=_0x5d8b1f['y'],_0x58a65[_0x549fd2*(0x2654+0x1ac1*0x1+0x4112*-0x1)+(-0x54e+-0x2251+0x27a1)]+=_0x5d8b1f['z'],_0x58a65[_0xb5bad3*(0x1*0x188d+0x6*-0x47b+0x258)+(-0x2678+0x19bf+0xcb9*0x1)]+=_0x5d8b1f['x'],_0x58a65[_0xb5bad3*(0x4*0x26e+-0x8a4+-0x111)+(-0x51a*0x3+-0x9*0x2ef+-0x2*-0x14db)]+=_0x5d8b1f['y'],_0x58a65[_0xb5bad3*(0x26e8+0x7*0xd7+-0x2cc6)+(-0x1237+-0x10bb+0x22f4)]+=_0x5d8b1f['z'],_0x58a65[_0x572e89*(0x132c*0x1+0x1826+0x1*-0x2b4f)+(-0x1c3+0x5*-0x259+-0x48*-0x30)]+=_0x5d8b1f['x'],_0x58a65[_0x572e89*(0x1*0x832+-0x1*-0x1a09+-0x2238)+(-0xaaf+0x1*-0xaab+0x155b)]+=_0x5d8b1f['y'],_0x58a65[_0x572e89*(0x11a3+0x2*0x727+-0x1fee)+(0x234a+0xa11+-0x2d59)]+=_0x5d8b1f['z'];}const _0x53c184=new D(),_0x3e06bb=new D(),_0x32120e=new D(),_0x5860be=new D();for(let _0x26a9d8=-0x15+0xd2c+-0x45d*0x3;_0x26a9d8<_0x144bc1;_0x26a9d8++){_0x32120e['set'](_0x561b64[_0x26a9d8*(0x1c12+0x1f6e+0x1*-0x3b7d)],_0x561b64[_0x26a9d8*(-0x6eb+0xcc5+0x41*-0x17)+(0x163*-0x1a+0x17*0x147+-0xa*-0xab)],_0x561b64[_0x26a9d8*(-0x665*0x3+-0x705*-0x5+-0x45*0x3b)+(-0x1591+0x456*0x7+-0x8c7)]),_0x53c184['set'](_0x359fa2[_0x26a9d8*(0x1*-0x2192+0xd30+0x17*0xe3)],_0x359fa2[_0x26a9d8*(-0xbff+0x2462+-0x3*0x820)+(0x1118*0x2+-0x2*-0x12be+-0xa3d*0x7)],_0x359fa2[_0x26a9d8*(-0x14f2+0x1f76+-0xa81*0x1)+(-0x1d3*0x5+0xf5*0xc+-0x1*0x25b)]),_0x3e06bb['set'](_0x58a65[_0x26a9d8*(0x227+-0x2710+0x22*0x116)],_0x58a65[_0x26a9d8*(0xca*0x15+-0x1c34+-0xb*-0x10f)+(-0x223*0x1+0x1403+0x3*-0x5f5)],_0x58a65[_0x26a9d8*(-0x877+0x101c+-0x7a2)+(0x16a*0x1+-0x1657+-0xe9*-0x17)]);const _0x29b8a3=_0x32120e['dot'](_0x53c184);_0x5860be['copy'](_0x32120e)['mulScalar'](_0x29b8a3),_0x5860be['sub2'](_0x53c184,_0x5860be)['normalize'](),_0x3a1d2d[_0x26a9d8*(-0x1e9+0x3*0x2e3+-0x1af*0x4)]=_0x5860be['x'],_0x3a1d2d[_0x26a9d8*(0xeaf+0x797+-0x25*0x9a)+(0x14ff+0x568+-0x3e*0x6d)]=_0x5860be['y'],_0x3a1d2d[_0x26a9d8*(-0x4*-0x15+0x2178+0x2f*-0xb8)+(-0x2*0xa84+-0x6cf*-0x4+0x1a*-0x3d)]=_0x5860be['z'],_0x5860be['cross'](_0x32120e,_0x53c184),_0x3a1d2d[_0x26a9d8*(-0x8db+0xdab*0x1+-0x4cc)+(0xec0*0x2+-0xb6c+-0x25*0x7d)]=_0x5860be['dot'](_0x3e06bb)<0x1b5f+-0x1245+-0xe9*0xa?-(-0x357+0x1b*-0x49+-0x101*-0xb):-0x2*-0xec3+-0x14fb+-0x88a;}return _0x3a1d2d;};class Ta{constructor(){h(this,'positions'),h(this,'normals'),h(this,'colors'),h(this,'uvs'),h(this,'uvs1'),h(this,'blendIndic'+'es'),h(this,'blendWeigh'+'ts'),h(this,'tangents'),h(this,'indices');}['calculateN'+'ormals'](){w['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),w['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['normals']=Iv(this['positions'],this['indices']);}['calculateT'+'angents'](){w['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),w['assert'](this['normals'],'Geometry\x20m'+'ust\x20have\x20n'+'ormals\x20set'),w['assert'](this['uvs'],'Geometry\x20m'+'ust\x20have\x20u'+'vs\x20set'),w['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['tangents']=Mr(this['positions'],this['normals'],this['uvs'],this['indices']);}}const pu=(-0x25*0x1f+0x1*0x15e2+-0x1163)/(-0x2539+-0x116b+0x36e4),hg=0x1fde+-0x1ccf+-0x2e*0x11-pu*(0x3*0x741+0x1eb8+-0x3479);class mu extends Ta{constructor(_0x3a1680={}){super();const _0x1f40ee=_0x3a1680['halfExtent'+'s']??new D(0x188f+-0x6bf*0x5+0x1*0x92c+0.5,0x1180+0x704*-0x4+0x548*0x2+0.5,0x16f4+0x116b+-0x3*0xd75+0.5),_0x2eb0a7=_0x3a1680['widthSegme'+'nts']??0x107f+0x658+-0x16d6*0x1,_0x4ce2eb=_0x3a1680['lengthSegm'+'ents']??0x1286+-0x20da+0xe55,_0x5378da=_0x3a1680['heightSegm'+'ents']??-0x10d*-0xd+-0x63a*0x1+0x1*-0x76e,_0x23f7c9=_0x3a1680['yOffset']??0x5*0x5da+0xbd6+0x14*-0x20e,_0x539169=-_0x1f40ee['y']+_0x23f7c9,_0x6753bd=_0x1f40ee['y']+_0x23f7c9,_0x1d6c52=[new D(-_0x1f40ee['x'],_0x539169,_0x1f40ee['z']),new D(_0x1f40ee['x'],_0x539169,_0x1f40ee['z']),new D(_0x1f40ee['x'],_0x6753bd,_0x1f40ee['z']),new D(-_0x1f40ee['x'],_0x6753bd,_0x1f40ee['z']),new D(_0x1f40ee['x'],_0x539169,-_0x1f40ee['z']),new D(-_0x1f40ee['x'],_0x539169,-_0x1f40ee['z']),new D(-_0x1f40ee['x'],_0x6753bd,-_0x1f40ee['z']),new D(_0x1f40ee['x'],_0x6753bd,-_0x1f40ee['z'])],_0x429f99=[[0x1*-0x53b+-0x594+0xacf*0x1,0x1*0x25c1+-0x1*-0xfa1+-0x3561,0x173*-0x11+0x983*0x1+0x19*0x9b],[0xac5+-0x246e+-0x7*-0x3ab,0x1232+-0xf*-0x229+-0x3294*0x1,-0x1163+-0x2698+-0x43*-0xd6],[-0x1*-0x1b41+-0xc9d+0x5*-0x2ed,0x7b3+-0x3*-0x2e3+-0x1a*0xa1,-0x852+0x2*-0x5a5+0x13a2],[-0x691+-0x1ebd+0x254f,0x27a*0x2+0x89*0x17+-0x5c1*0x3,0x1e87+-0x1903+-0x580],[0x1*-0x1c5+0xdd4+-0xc0e,-0xd*-0x24a+0x1ff5+-0x3db3,0x74b*0x2+-0x1e98+0x1004],[0x1*-0xb+0x32e+-0x31e,-0x1*0x1855+0x13*0x175+-0x35a,-0x22d7+0x1d0+-0x210d*-0x1]],_0x35b5a7=[[0x17*0x17+0x3ed+-0x5fe,-0x2591+0x1b8f+-0x16e*-0x7,0x2db*-0x2+-0x20dc+0x7b7*0x5],[0x108c+-0x153b+0x4af*0x1,-0x6*-0x62c+0x6d5+-0x2bdd,-(0xa7+-0xffd+0xf57)],[0x24af*0x1+0x1*0x2099+-0x4548,-0xa1d+0x37d+0x6a1,0x1ebc*0x1+-0x18b*0xd+0x1*-0xaad],[0x252e*0x1+0x3*0x427+-0x31a3,-(-0x9ff+-0x20f9+0x2af9*0x1),0x1*0x18ac+-0x1c65*-0x1+0x3511*-0x1],[-0x1dc+-0x1bd2+0x95*0x33,0x109+0x40a*0x3+0x103*-0xd,-0x141b+0x2*-0xffa+0x340f*0x1],[-(-0x1*-0x552+-0x7*-0x36+-0x1*0x6cb),-0x1091+0x17cb+-0x73a,-0x5a*-0x2b+0x2b*0x57+-0x1dbb]],_0x46779c={'FRONT':0x0,'BACK':0x1,'TOP':0x2,'BOTTOM':0x3,'RIGHT':0x4,'LEFT':0x5},_0x48c3dc=[],_0x1b03cb=[],_0x40aa6f=[],_0x2cb40b=[];let _0x51e12d=-0x1d98+0x42*0x2b+0x941*0x2;const _0x3f2854=(_0x5727fe,_0x1e1c7c,_0x5c0b4a)=>{const _0x67bc6=new D(),_0x284d93=new D(),_0x448532=new D(),_0x115dbf=new D();for(let _0x180d2b=0xcfa*-0x1+-0xb62+-0x185c*-0x1;_0x180d2b<=_0x1e1c7c;_0x180d2b++)for(let _0x4dcf6a=0x24f5+-0x8d4+-0x1c21;_0x4dcf6a<=_0x5c0b4a;_0x4dcf6a++){_0x67bc6['lerp'](_0x1d6c52[_0x429f99[_0x5727fe][0xeaa+-0x4*0x782+0xf5e]],_0x1d6c52[_0x429f99[_0x5727fe][0xd7*-0x4+-0x234c*-0x1+-0x1fef]],_0x180d2b/_0x1e1c7c),_0x284d93['lerp'](_0x1d6c52[_0x429f99[_0x5727fe][0x15ff+-0x2*0x77e+0x167*-0x5]],_0x1d6c52[_0x429f99[_0x5727fe][-0x1207+-0x1c21+0x2e2a]],_0x4dcf6a/_0x5c0b4a),_0x448532['sub2'](_0x284d93,_0x1d6c52[_0x429f99[_0x5727fe][0x2430+-0x15*0x131+-0xb2b]]),_0x115dbf['add2'](_0x67bc6,_0x448532);let _0x374176=_0x180d2b/_0x1e1c7c,_0x52dcd7=_0x4dcf6a/_0x5c0b4a;_0x48c3dc['push'](_0x115dbf['x'],_0x115dbf['y'],_0x115dbf['z']),_0x1b03cb['push'](_0x35b5a7[_0x5727fe][0xbe0+0x1e60+-0xd*0x340],_0x35b5a7[_0x5727fe][-0x1cdb*-0x1+-0x3*0x545+-0x173*0x9],_0x35b5a7[_0x5727fe][0x3d*-0x1+-0x7*0x16b+0x174*0x7]),_0x40aa6f['push'](_0x374176,0x18cf+0x1b*-0xa1+-0x1*0x7d3-_0x52dcd7),_0x374176=_0x374176*hg+pu,_0x52dcd7=_0x52dcd7*hg+pu,_0x374176/=0x19*-0x66+0x21a8+-0x17af,_0x52dcd7/=0x86*-0x3c+-0x2f5+0x2260,_0x374176+=_0x5727fe%(-0x2552*0x1+-0x18bd*0x1+0x3e12)/(0xd5b+0x355+-0x10ad),_0x52dcd7+=Math['floor'](_0x5727fe/(0x1c87+-0x9*0x1a9+0x19*-0x8b))/(-0x1f13+-0xf89*0x1+-0x4d*-0x9b),_0x180d2b<_0x1e1c7c&&_0x4dcf6a<_0x5c0b4a&&(_0x2cb40b['push'](_0x51e12d+_0x5c0b4a+(0x1723*-0x1+0x2a8+0x1*0x147c),_0x51e12d+(-0x54e+-0x1667+-0x1bb6*-0x1),_0x51e12d),_0x2cb40b['push'](_0x51e12d+_0x5c0b4a+(-0x3f5+-0x2*-0x8b8+-0xd7a),_0x51e12d+_0x5c0b4a+(0x2*0x427+0xa50+-0x129c),_0x51e12d+(-0x10f3+-0x1241*-0x2+-0x138e))),_0x51e12d++;}};_0x3f2854(_0x46779c['FRONT'],_0x2eb0a7,_0x5378da),_0x3f2854(_0x46779c['BACK'],_0x2eb0a7,_0x5378da),_0x3f2854(_0x46779c['TOP'],_0x2eb0a7,_0x4ce2eb),_0x3f2854(_0x46779c['BOTTOM'],_0x2eb0a7,_0x4ce2eb),_0x3f2854(_0x46779c['RIGHT'],_0x4ce2eb,_0x5378da),_0x3f2854(_0x46779c['LEFT'],_0x4ce2eb,_0x5378da),this['positions']=_0x48c3dc,this['normals']=_0x1b03cb,this['uvs']=_0x40aa6f,this['uvs1']=_0x40aa6f,this['indices']=_0x2cb40b,_0x3a1680['calculateT'+'angents']&&(this['tangents']=Mr(_0x48c3dc,_0x1b03cb,_0x40aa6f,_0x2cb40b));}}class _m extends Ta{constructor(_0x5908a4={}){super();const _0x20fe86=_0x5908a4['radius']??-0x1*-0x20b1+-0x9e5+0x5b3*-0x4+0.5,_0x493252=_0x5908a4['latitudeBa'+'nds']??0x19d9+-0x9cb*0x3+0x398,_0x55b819=_0x5908a4['longitudeB'+'ands']??0x1*-0x1265+-0x8*-0x3aa+-0xadb,_0x590fd7=[],_0x3662d5=[],_0x4f4bce=[],_0x16fabe=[];for(let _0x3c45d7=-0x64*-0x5c+-0x19a4+0x4*-0x293;_0x3c45d7<=_0x493252;_0x3c45d7++){const _0x5eb8ee=_0x3c45d7*Math['PI']/_0x493252,_0x34552e=Math['sin'](_0x5eb8ee),_0x4e21c9=Math['cos'](_0x5eb8ee);for(let _0x30094b=0xe9e+0x2*0xf4b+-0x2d34;_0x30094b<=_0x55b819;_0x30094b++){const _0x25bf7c=_0x30094b*(0x5*-0x6e6+0x1*0x2329+-0xa9)*Math['PI']/_0x55b819-Math['PI']/(0xaa2+-0x1d97+0x1*0x12f7),_0x3c1ac0=Math['sin'](_0x25bf7c),_0x58bbfc=Math['cos'](_0x25bf7c)*_0x34552e,_0x37471b=_0x4e21c9,_0x51ddad=_0x3c1ac0*_0x34552e,_0x1bf640=0xdf*0x16+0x1*-0x41f+-0xf0a-_0x30094b/_0x55b819,_0xfb0917=-0xa85*-0x2+0x7f*0x17+-0x2072-_0x3c45d7/_0x493252;_0x590fd7['push'](_0x58bbfc*_0x20fe86,_0x37471b*_0x20fe86,_0x51ddad*_0x20fe86),_0x3662d5['push'](_0x58bbfc,_0x37471b,_0x51ddad),_0x4f4bce['push'](_0x1bf640,0xdc5+0x125a+-0x201e-_0xfb0917);}}for(let _0x31434f=-0x143b+0x1ca5+-0x86a;_0x31434f<_0x493252;++_0x31434f)for(let _0x55028d=-0xb8c+-0x373*-0xb+-0x1d*0xe9;_0x55028d<_0x55b819;++_0x55028d){const _0xcbdf1e=_0x31434f*(_0x55b819+(0x1d1c+-0x9b9*-0x3+-0x2*0x1d23))+_0x55028d,_0x571931=_0xcbdf1e+_0x55b819+(0x115c+-0x1b5b+0xa00);_0x16fabe['push'](_0xcbdf1e+(0x1da1+0x3*-0x423+0x3*-0x5bd),_0x571931,_0xcbdf1e),_0x16fabe['push'](_0xcbdf1e+(-0x7e5+0x2502+-0x5c*0x51),_0x571931+(-0x2605+-0x1*-0x2245+-0x1*-0x3c1),_0x571931);}this['positions']=_0x590fd7,this['normals']=_0x3662d5,this['uvs']=_0x4f4bce,this['uvs1']=_0x4f4bce,this['indices']=_0x16fabe,_0x5908a4['calculateT'+'angents']&&(this['tangents']=Mr(_0x590fd7,_0x3662d5,_0x4f4bce,_0x16fabe));}}class DA extends _m{constructor(_0x166b82={}){const _0x545bb4=_0x166b82['latitudeBa'+'nds']??0x6ec*-0x4+0x3b*-0x5+0x1ce7*0x1,_0x53f925=_0x166b82['longitudeB'+'ands']??0x650+-0x4*0x44f+0x25*0x4c;super({'radius':0.5,'latitudeBands':_0x545bb4,'longitudeBands':_0x53f925});const _0xa57bc9=0x187b+0x1c66+-0x1*0x34e1+0.1,_0x1520fc=-0x1e14+0x8d8+0x153c+0.95,_0x12da7b=_0x1520fc*_0x1520fc,_0x2f74ba=this['positions'];for(let _0x316aa3=-0x2162+-0x8*-0x15b+-0x1*-0x168a;_0x316aa3<_0x2f74ba['length'];_0x316aa3+=-0x6e*-0x17+-0x2456+0x1a77){const _0x52b804=_0x2f74ba[_0x316aa3]/(-0x1a69+0x1831*0x1+-0x1*-0x238+0.5);let _0x57465d=_0x2f74ba[_0x316aa3+(-0x7*0x3e9+-0x17b9+0x3319)]/(-0x5b3+0x1181+-0xbce*0x1+0.5);const _0x79426c=_0x2f74ba[_0x316aa3+(-0x2*-0x109d+0x25c2+-0x46fa)]/(0x24fb*-0x1+0x1f92+0x569*0x1+0.5);_0x57465d<-0x1b22+-0x209*-0x7+-0x1*-0xce3&&(_0x57465d*=0xa1c+0x207e+-0x2a9a+0.3,_0x52b804*_0x52b804+_0x79426c*_0x79426c<_0x12da7b&&(_0x57465d=-_0xa57bc9)),_0x57465d+=_0xa57bc9,_0x57465d*=-0x1*0x22cd+0x39e*0x1+0x1f2f*0x1+0.5,_0x2f74ba[_0x316aa3+(0x12c0+-0x1ec6+0xc07)]=_0x57465d;}}}class zo{static['create'](_0x142c0a,_0x1e63d0){switch(_0x1e63d0){case Qw:return zo['box'](_0x142c0a);case Jw:return zo['dome'](_0x142c0a);}return w['assert'](_0x1e63d0===Bo,'Unsupporte'+'d\x20sky\x20geom'+'etry\x20type\x20'+_0x1e63d0),zo['infinite'](_0x142c0a);}static['infinite'](_0x231ad8){return Ge['fromGeomet'+'ry'](_0x231ad8,new mu(_0x231ad8));}static['box'](_0x2eb455){return Ge['fromGeomet'+'ry'](_0x2eb455,new mu({'yOffset':0.5}));}static['dome'](_0x110612){const _0x136a71=new DA({'latitudeBands':0x32,'longitudeBands':0x32});return _0x136a71['normals']=void(0x32d+0x253e+-0x3*0xd79),_0x136a71['uvs']=void(-0x13bf+0x11a7*-0x2+0x370d),Ge['fromGeomet'+'ry'](_0x110612,_0x136a71);}}class IA{constructor(_0x2dc12c,_0x536ebf,_0x2c7550,_0x16f02d,_0x28c9d5){h(this,'meshInstan'+'ce',null),h(this,'_depthWrit'+'e',!(0x8cf+0x18c1*-0x1+0xff3*0x1));const _0x4d3be6=new Xn({'uniqueName':'SkyMateria'+'l','vertexGLSL':Pe['get'](_0x2dc12c,Fe)['get']('skyboxVS'),'fragmentGLSL':Pe['get'](_0x2dc12c,Fe)['get']('skyboxPS'),'vertexWGSL':Pe['get'](_0x2dc12c,it)['get']('skyboxVS'),'fragmentWGSL':Pe['get'](_0x2dc12c,it)['get']('skyboxPS'),'attributes':{'aPosition':Me}});_0x4d3be6['setDefine']('{SKYBOX_DE'+'CODE_FNC}',Tr['decodeFunc'](_0x16f02d['encoding'])),_0x28c9d5!==Bo&&_0x4d3be6['setDefine']('SKYMESH',''),_0x16f02d['cubemap']&&_0x4d3be6['setDefine']('SKY_CUBEMA'+'P',''),_0x4d3be6['setParamet'+'er']('skyboxHigh'+'lightMulti'+'plier',_0x536ebf['skyboxHigh'+'lightMulti'+'plier']),_0x16f02d['cubemap']?_0x4d3be6['setParamet'+'er']('texture_cu'+'beMap',_0x16f02d):(_0x4d3be6['setParamet'+'er']('texture_en'+'vAtlas',_0x16f02d),_0x4d3be6['setParamet'+'er']('mipLevel',_0x536ebf['skyboxMip'])),_0x4d3be6['cull']=Fo,_0x4d3be6['depthWrite']=this['_depthWrit'+'e'];const _0x58868b=_0x536ebf['layers']['getLayerBy'+'Id'](Kp);if(_0x58868b){const _0x5c979b=zo['create'](_0x2dc12c,_0x28c9d5),_0x20a47a=new He(_0x5c979b,_0x4d3be6,_0x2c7550);this['meshInstan'+'ce']=_0x20a47a,_0x20a47a['cull']=!(0x1525+-0xbe5+-0x1*0x93f),_0x20a47a['pick']=!(0x170a+0x1*-0x7f9+-0x2*0x788),_0x58868b['addMeshIns'+'tances']([_0x20a47a]),this['skyLayer']=_0x58868b;}}['destroy'](){this['meshInstan'+'ce']&&(this['skyLayer']&&this['skyLayer']['removeMesh'+'Instances']([this['meshInstan'+'ce']]),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}set['depthWrite'](_0x2cec33){this['_depthWrit'+'e']=_0x2cec33,this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']['depthWrite']=_0x2cec33);}get['depthWrite'](){return this['_depthWrit'+'e'];}}class LA{constructor(_0x15db48){h(this,'_type',Bo),h(this,'_center',new D(0x7e6+0x2ef+-0xad5,0x66*-0x11+0x1*-0x18a7+0x1f6e,0x5*-0x7c4+0x17ac+-0x61*-0x28)),h(this,'skyMesh',null),h(this,'_depthWrit'+'e',!(0x5d*0x15+0x1c*0xe9+-0x211c)),h(this,'node',new Ie('SkyMeshNod'+'e')),(this['device']=_0x15db48['device'],this['scene']=_0x15db48,this['center']=new D(-0x2*0x1193+-0x78b*0x3+-0x7*-0x841,0x3*-0x5d1+0x1*0x1835+-0x6c1,-0x1a66*-0x1+0x74d+-0x1*0x21b3),this['centerArra'+'y']=new Float32Array(0x2194+0x10f5+-0x1*0x3286),this['projectedS'+'kydomeCent'+'erId']=this['device']['scope']['resolve']('projectedS'+'kydomeCent'+'er'));}['applySetti'+'ngs'](_0x194a81){this['type']=_0x194a81['skyType']??Bo,this['node']['setLocalPo'+'sition'](new D(_0x194a81['skyMeshPos'+'ition']??[-0x9*0xb7+-0x1191+-0x18*-0x100,0xed*0x7+0xbf*-0x2e+0x1bd7,-0x1c40+-0xf29*0x1+0x2b69])),this['node']['setLocalEu'+'lerAngles'](new D(_0x194a81['skyMeshRot'+'ation']??[-0x7*0x3cb+0x7d*-0x3d+0x3856,-0x4*-0x3f1+-0xab6*0x3+0x1*0x105e,0xdad+0x94c*-0x1+-0x461])),this['node']['setLocalSc'+'ale'](new D(_0x194a81['skyMeshSca'+'le']??[-0xb64+-0x3d*0x2e+0x3b*0x61,-0x56c+0x5e*0x46+0x1*-0x1447,-0x30b*0x2+0x210e*-0x1+0x2725])),_0x194a81['skyCenter']&&(this['_center']=new D(_0x194a81['skyCenter']));}set['type'](_0x113506){this['_type']!==_0x113506&&(this['_type']=_0x113506,this['scene']['updateShad'+'ers']=!(-0x2006+-0x821*0x1+0x13*0x21d),this['updateSkyM'+'esh']());}get['type'](){return this['_type'];}set['center'](_0x4f7331){this['_center']['copy'](_0x4f7331);}get['center'](){return this['_center'];}set['depthWrite'](_0x529e77){this['_depthWrit'+'e']!==_0x529e77&&(this['_depthWrit'+'e']=_0x529e77,this['skyMesh']&&(this['skyMesh']['depthWrite']=_0x529e77));}get['depthWrite'](){return this['_depthWrit'+'e'];}['updateSkyM'+'esh'](){const _0x2eecdd=this['scene']['_getSkybox'+'Tex']();_0x2eecdd&&(this['resetSkyMe'+'sh'](),this['skyMesh']=new IA(this['device'],this['scene'],this['node'],_0x2eecdd,this['type']),this['skyMesh']['depthWrite']=this['_depthWrit'+'e'],this['scene']['fire']('set:skybox',_0x2eecdd));}['resetSkyMe'+'sh'](){var _0x11e2a3;(_0x11e2a3=this['skyMesh'])==null||_0x11e2a3['destroy'](),this['skyMesh']=null;}['update'](){if(this['type']!==Bo){const {center:_0x2ce8f4,centerArray:_0x1e7820}=this,_0x4ad9f8=new D();this['node']['getWorldTr'+'ansform']()['transformP'+'oint'](_0x2ce8f4,_0x4ad9f8),_0x1e7820[-0x2378+0x5dd+0x1d9b]=_0x4ad9f8['x'],_0x1e7820[0x1*-0x21c6+0x64*-0x18+0x2b27]=_0x4ad9f8['y'],_0x1e7820[-0xc95*0x1+-0x5*0x16d+0x13b8]=_0x4ad9f8['z'],this['projectedS'+'kydomeCent'+'erId']['setValue'](_0x1e7820);}}}const Ch=new Ie();Ch['worldTrans'+'form']=te['IDENTITY'],Ch['_dirtyWorl'+'d']=Ch['_dirtyNorm'+'al']=!(0x99a+-0x13*0x85+0x46);class RA{constructor(_0x401dc6,_0x1e58bf,_0x5ec0fe){this['material']=_0x1e58bf,this['layer']=_0x5ec0fe,this['positions']=[],this['colors']=[],this['mesh']=new Ge(_0x401dc6),this['meshInstan'+'ce']=null;}['addLines'](_0x4d515a,_0x2a9d9f){const _0x1adea7=this['positions'],_0x232917=_0x4d515a['length'];for(let _0x571d25=0x2055+0x20d1*0x1+-0x1f*0x21a;_0x571d25<_0x232917;_0x571d25++){const _0x516e9c=_0x4d515a[_0x571d25];_0x1adea7['push'](_0x516e9c['x'],_0x516e9c['y'],_0x516e9c['z']);}const _0x4b08eb=this['colors'];if(_0x2a9d9f['length'])for(let _0x2862de=0x2*-0xdf1+-0x875+0x2457;_0x2862de<_0x232917;_0x2862de++){const _0x46685a=_0x2a9d9f[_0x2862de];_0x4b08eb['push'](_0x46685a['r'],_0x46685a['g'],_0x46685a['b'],_0x46685a['a']);}else{for(let _0x38f647=0x231d*0x1+-0x8*0x72+-0x29*0xc5;_0x38f647<_0x232917;_0x38f647++)_0x4b08eb['push'](_0x2a9d9f['r'],_0x2a9d9f['g'],_0x2a9d9f['b'],_0x2a9d9f['a']);}}['addLinesAr'+'rays'](_0x1b487a,_0x295e77){const _0xb9ce6=this['positions'];for(let _0xa3f6e4=0x35*0x99+-0x1*0xefb+-0x10b2;_0xa3f6e4<_0x1b487a['length'];_0xa3f6e4+=0x6a0*-0x1+-0xb8f*0x2+0x1dc1)_0xb9ce6['push'](_0x1b487a[_0xa3f6e4],_0x1b487a[_0xa3f6e4+(0x1ed6+0x2e4+0x61*-0x59)],_0x1b487a[_0xa3f6e4+(-0x5*0x41b+0x96e+0x1*0xb1b)]);const _0x4b1152=this['colors'];if(_0x295e77['length']){for(let _0x34af47=-0x19d+0xb*0x2a5+-0x1b7a*0x1;_0x34af47<_0x295e77['length'];_0x34af47+=-0x1*0xb55+-0x18*-0x14c+-0x13c7*0x1)_0x4b1152['push'](_0x295e77[_0x34af47],_0x295e77[_0x34af47+(-0xe03*0x1+-0x1ca4+0x2aa8)],_0x295e77[_0x34af47+(-0x9*-0x431+0x1451+-0x4*0xe82)],_0x295e77[_0x34af47+(-0xab6*0x3+-0xb88+0x2bad*0x1)]);}else{const _0x4da23c=_0x1b487a['length']/(0x40+0x1a4f+-0x2*0xd46);for(let _0x430ff9=-0xc12+0x157d+-0x96b;_0x430ff9<_0x4da23c;_0x430ff9++)_0x4b1152['push'](_0x295e77['r'],_0x295e77['g'],_0x295e77['b'],_0x295e77['a']);}}['onPreRende'+'r'](_0x36f7ac,_0x453845){this['positions']['length']>0x2a*-0x75+0x1d91+-0xa5f&&this['material']['transparen'+'t']===_0x453845&&(this['mesh']['setPositio'+'ns'](this['positions']),this['mesh']['setColors'](this['colors']),this['mesh']['update'](hd,!(-0x101d+-0x1d*-0x2b+0xb3f*0x1)),this['meshInstan'+'ce']||(this['meshInstan'+'ce']=new He(this['mesh'],this['material'],Ch)),_0x36f7ac['push'](this['meshInstan'+'ce']));}['clear'](){this['positions']['length']=-0x994+-0x2685+0x3019,this['colors']['length']=-0xee9*0x1+0x1c97+-0xdae;}}class OA{constructor(_0x1c9518){this['device']=_0x1c9518,this['map']=new Map();}['getBatch'](_0x72f24f,_0x23a7b0){let _0x16979a=this['map']['get'](_0x72f24f);return _0x16979a||(_0x16979a=new RA(this['device'],_0x72f24f,_0x23a7b0),this['map']['set'](_0x72f24f,_0x16979a)),_0x16979a;}['onPreRende'+'r'](_0x1609bb,_0x307bdd){this['map']['forEach'](_0x5ae89c=>{_0x5ae89c['onPreRende'+'r'](_0x1609bb,_0x307bdd);});}['clear'](){this['map']['forEach'](_0x47ed4c=>_0x47ed4c['clear']());}}const Ts=[],Ba=new D();class FA{constructor(_0x1b288d){h(this,'shaderDesc'+'s',new Map()),(this['device']=_0x1b288d,this['quadMesh']=null,this['textureSha'+'der']=null,this['depthTextu'+'reShader']=null,this['cubeLocalP'+'os']=null,this['cubeWorldP'+'os']=null,this['batchesMap']=new Map(),this['allBatches']=new Set(),this['updatedLay'+'ers']=new Set(),this['_materialD'+'epth']=null,this['_materialN'+'oDepth']=null,this['layerMeshI'+'nstances']=new Map());}['createMate'+'rial'](_0x2a44f4){const _0x4888fb=new Xn({'uniqueName':'ImmediateL'+'ine','vertexGLSL':Pe['get'](this['device'],Fe)['get']('immediateL'+'ineVS'),'fragmentGLSL':Pe['get'](this['device'],Fe)['get']('immediateL'+'inePS'),'vertexWGSL':Pe['get'](this['device'],it)['get']('immediateL'+'ineVS'),'fragmentWGSL':Pe['get'](this['device'],it)['get']('immediateL'+'inePS'),'attributes':{'vertex_position':Me,'vertex_color':Wt}});return _0x4888fb['blendType']=Zs,_0x4888fb['depthTest']=_0x2a44f4,_0x4888fb['update'](),_0x4888fb;}get['materialDe'+'pth'](){return this['_materialD'+'epth']||(this['_materialD'+'epth']=this['createMate'+'rial'](!(-0x2635+-0x535+-0x2b6a*-0x1))),this['_materialD'+'epth'];}get['materialNo'+'Depth'](){return this['_materialN'+'oDepth']||(this['_materialN'+'oDepth']=this['createMate'+'rial'](!(-0x1*0x5c9+-0x5*0x687+-0x445*-0x9))),this['_materialN'+'oDepth'];}['getBatch'](_0x5c1870,_0x370d84){let _0x967e34=this['batchesMap']['get'](_0x5c1870);_0x967e34||(_0x967e34=new OA(this['device']),this['batchesMap']['set'](_0x5c1870,_0x967e34)),this['allBatches']['add'](_0x967e34);const _0x394979=_0x370d84?this['materialDe'+'pth']:this['materialNo'+'Depth'];return _0x967e34['getBatch'](_0x394979,_0x5c1870);}['getShaderD'+'esc'](_0x115509,_0x4aa2cc,_0x3c1ae7){return this['shaderDesc'+'s']['has'](_0x115509)||this['shaderDesc'+'s']['set'](_0x115509,{'uniqueName':'DebugShade'+'r:'+_0x115509,'vertexGLSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20matr'+'ix_model;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ve'+'c2\x20uv0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_model\x20*\x20v'+'ec4(vertex'+'_position,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uv0\x20=\x20ve'+'rtex_posit'+'ion.xy\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20','vertexWGSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20@ver'+'tex\x20fn\x20ver'+'texMain(in'+'put:\x20Verte'+'xInput)\x20->'+'\x20VertexOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20un'+'iform.matr'+'ix_model\x20*'+'\x20vec4f(inp'+'ut.vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.uv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20+\x20vec2f'+'(0.5);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20','fragmentGLSL':_0x4aa2cc,'fragmentWGSL':_0x3c1ae7,'attributes':{'vertex_position':Me}}),this['shaderDesc'+'s']['get'](_0x115509);}['getTexture'+'ShaderDesc'](_0x1318e7){const _0x3c3a12=Tr['decodeFunc'](_0x1318e7);return this['getShaderD'+'esc']('textureSha'+'der-'+_0x1318e7,'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20vec2\x20uv0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20colorMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20linear'+'Color\x20=\x20'+_0x3c3a12+('(texture2D'+'(colorMap,'+'\x20uv0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(linearC'+'olor),\x201);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20colorMa'+'pSampler:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20@fragment'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output:\x20Fr'+'agmentOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20sample'+'dTex\x20=\x20tex'+'tureSample'+'(colorMap,'+'\x20colorMapS'+'ampler,\x20in'+'put.uv0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'linearColo'+'r:\x20vec3f\x20='+'\x20'+_0x3c3a12+('(sampledTe'+'x);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(gammaCorr'+'ectOutput('+'linearColo'+'r),\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'));}['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](){return this['getShaderD'+'esc']('textureSha'+'derUnfilte'+'rable','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vec2\x20uv0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20highp\x20sam'+'pler2D\x20col'+'orMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'oid\x20main\x20('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'uv\x20=\x20ivec2'+'(uv0\x20*\x20tex'+'tureSize(c'+'olorMap,\x200'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'texelFetch'+'(colorMap,'+'\x20uv,\x200).xy'+'z,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<uff>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20@'+'fragment\x20f'+'n\x20fragment'+'Main(input'+'\x20:\x20Fragmen'+'tInput)\x20->'+'\x20FragmentO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'nput.uv0\x20*'+'\x20vec2f(tex'+'tureDimens'+'ions(color'+'Map,\x200)));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20fetchedCo'+'lor\x20:\x20vec4'+'f\x20=\x20textur'+'eLoad(colo'+'rMap,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(fetchedCo'+'lor.xyz,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20');}['getDepthTe'+'xtureShade'+'rDesc'](){return this['getShaderD'+'esc']('depthTextu'+'reShader','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20void\x20main'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x20getLi'+'nearScreen'+'Depth(getI'+'mageEffect'+'UV(uv0))\x20*'+'\x20camera_pa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(vec3(de'+'pth)),\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20u'+'v0:\x20vec2f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20@fragme'+'nt\x20fn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20depth'+':\x20f32\x20=\x20ge'+'tLinearScr'+'eenDepth(g'+'etImageEff'+'ectUV(inpu'+'t.uv0))\x20*\x20'+'uniform.ca'+'mera_param'+'s.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(vec3f(dep'+'th)),\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}['getQuadMes'+'h'](){return this['quadMesh']||(this['quadMesh']=new Ge(this['device']),this['quadMesh']['setPositio'+'ns']([-(0x1*-0x18d3+-0xfec*0x1+-0x13*-0x225+0.5),-(0x3*0x27f+-0x1*-0x1aeb+-0x2268+0.5),-0x7f*-0x1c+0x1194+0x4c*-0x6a,-0x170*-0x13+0xc10+-0x2760+0.5,-(-0xe1c+-0x1484+0x22a0+0.5),0x4*0x801+0x1*-0xc4c+-0x13b8,-(-0x5*0x3e9+-0x584*-0x4+0x1*-0x283+0.5),0xcad*0x2+-0x4*0x76c+0x1e*0x25+0.5,0x1dd3+-0x237b+0x5a8,-0x21b+-0xe2a+0x5*0x341+0.5,0x9e7+-0xa*0x281+-0x1f*-0x7d+0.5,-0x1fa+0xc4c*-0x1+0xe46]),this['quadMesh']['update'](Er)),this['quadMesh'];}['drawMesh'](_0x578726,_0x2259a6,_0x2b3762,_0x30c200,_0x513e8c){if(!_0x30c200){const _0x3610f=this['getGraphNo'+'de'](_0x2259a6);_0x30c200=new He(_0x2b3762,_0x578726,_0x3610f);}let _0x19829f=this['layerMeshI'+'nstances']['get'](_0x513e8c);_0x19829f||(_0x19829f=[],this['layerMeshI'+'nstances']['set'](_0x513e8c,_0x19829f)),_0x19829f['push'](_0x30c200);}['drawWireAl'+'ignedBox'](_0x224001,_0x2cf17e,_0x153835,_0x30b7be,_0x555853,_0x47e40c){if(_0x47e40c){const _0x4be49b=(_0x3c8b41,_0xccbace,_0x10bd6d)=>{Ba['set'](_0x3c8b41,_0xccbace,_0x10bd6d),_0x47e40c['transformP'+'oint'](Ba,Ba),Ts['push'](Ba['x'],Ba['y'],Ba['z']);};_0x4be49b(_0x224001['x'],_0x224001['y'],_0x224001['z']),_0x4be49b(_0x224001['x'],_0x2cf17e['y'],_0x224001['z']),_0x4be49b(_0x224001['x'],_0x2cf17e['y'],_0x224001['z']),_0x4be49b(_0x2cf17e['x'],_0x2cf17e['y'],_0x224001['z']),_0x4be49b(_0x2cf17e['x'],_0x2cf17e['y'],_0x224001['z']),_0x4be49b(_0x2cf17e['x'],_0x224001['y'],_0x224001['z']),_0x4be49b(_0x2cf17e['x'],_0x224001['y'],_0x224001['z']),_0x4be49b(_0x224001['x'],_0x224001['y'],_0x224001['z']),_0x4be49b(_0x224001['x'],_0x224001['y'],_0x2cf17e['z']),_0x4be49b(_0x224001['x'],_0x2cf17e['y'],_0x2cf17e['z']),_0x4be49b(_0x224001['x'],_0x2cf17e['y'],_0x2cf17e['z']),_0x4be49b(_0x2cf17e['x'],_0x2cf17e['y'],_0x2cf17e['z']),_0x4be49b(_0x2cf17e['x'],_0x2cf17e['y'],_0x2cf17e['z']),_0x4be49b(_0x2cf17e['x'],_0x224001['y'],_0x2cf17e['z']),_0x4be49b(_0x2cf17e['x'],_0x224001['y'],_0x2cf17e['z']),_0x4be49b(_0x224001['x'],_0x224001['y'],_0x2cf17e['z']),_0x4be49b(_0x224001['x'],_0x224001['y'],_0x224001['z']),_0x4be49b(_0x224001['x'],_0x224001['y'],_0x2cf17e['z']),_0x4be49b(_0x224001['x'],_0x2cf17e['y'],_0x224001['z']),_0x4be49b(_0x224001['x'],_0x2cf17e['y'],_0x2cf17e['z']),_0x4be49b(_0x2cf17e['x'],_0x2cf17e['y'],_0x224001['z']),_0x4be49b(_0x2cf17e['x'],_0x2cf17e['y'],_0x2cf17e['z']),_0x4be49b(_0x2cf17e['x'],_0x224001['y'],_0x224001['z']),_0x4be49b(_0x2cf17e['x'],_0x224001['y'],_0x2cf17e['z']);}else Ts['push'](_0x224001['x'],_0x224001['y'],_0x224001['z'],_0x224001['x'],_0x2cf17e['y'],_0x224001['z'],_0x224001['x'],_0x2cf17e['y'],_0x224001['z'],_0x2cf17e['x'],_0x2cf17e['y'],_0x224001['z'],_0x2cf17e['x'],_0x2cf17e['y'],_0x224001['z'],_0x2cf17e['x'],_0x224001['y'],_0x224001['z'],_0x2cf17e['x'],_0x224001['y'],_0x224001['z'],_0x224001['x'],_0x224001['y'],_0x224001['z'],_0x224001['x'],_0x224001['y'],_0x2cf17e['z'],_0x224001['x'],_0x2cf17e['y'],_0x2cf17e['z'],_0x224001['x'],_0x2cf17e['y'],_0x2cf17e['z'],_0x2cf17e['x'],_0x2cf17e['y'],_0x2cf17e['z'],_0x2cf17e['x'],_0x2cf17e['y'],_0x2cf17e['z'],_0x2cf17e['x'],_0x224001['y'],_0x2cf17e['z'],_0x2cf17e['x'],_0x224001['y'],_0x2cf17e['z'],_0x224001['x'],_0x224001['y'],_0x2cf17e['z'],_0x224001['x'],_0x224001['y'],_0x224001['z'],_0x224001['x'],_0x224001['y'],_0x2cf17e['z'],_0x224001['x'],_0x2cf17e['y'],_0x224001['z'],_0x224001['x'],_0x2cf17e['y'],_0x2cf17e['z'],_0x2cf17e['x'],_0x2cf17e['y'],_0x224001['z'],_0x2cf17e['x'],_0x2cf17e['y'],_0x2cf17e['z'],_0x2cf17e['x'],_0x224001['y'],_0x224001['z'],_0x2cf17e['x'],_0x224001['y'],_0x2cf17e['z']);this['getBatch'](_0x555853,_0x30b7be)['addLinesAr'+'rays'](Ts,_0x153835),Ts['length']=0xf98+0x8a3*0x1+-0x183b;}['drawWireSp'+'here'](_0x27d94b,_0x1310a1,_0x4462c8,_0x3bcc6a,_0xb908fd,_0x2251c5){const _0x1682e6=(-0x9eb+0x1*0x1eb+0x802)*Math['PI']/_0x3bcc6a;let _0x2b0b8f=0x25a2+0x1c1*-0x3+0x1*-0x205f;for(let _0xfa2ab2=-0x2587+0x1b45+0x1*0xa42;_0xfa2ab2<_0x3bcc6a;_0xfa2ab2++){const _0x550406=Math['sin'](_0x2b0b8f),_0x4c325f=Math['cos'](_0x2b0b8f);_0x2b0b8f+=_0x1682e6;const _0x111118=Math['sin'](_0x2b0b8f),_0x346e20=Math['cos'](_0x2b0b8f);Ts['push'](_0x27d94b['x']+_0x1310a1*_0x550406,_0x27d94b['y'],_0x27d94b['z']+_0x1310a1*_0x4c325f),Ts['push'](_0x27d94b['x']+_0x1310a1*_0x111118,_0x27d94b['y'],_0x27d94b['z']+_0x1310a1*_0x346e20),Ts['push'](_0x27d94b['x']+_0x1310a1*_0x550406,_0x27d94b['y']+_0x1310a1*_0x4c325f,_0x27d94b['z']),Ts['push'](_0x27d94b['x']+_0x1310a1*_0x111118,_0x27d94b['y']+_0x1310a1*_0x346e20,_0x27d94b['z']),Ts['push'](_0x27d94b['x'],_0x27d94b['y']+_0x1310a1*_0x550406,_0x27d94b['z']+_0x1310a1*_0x4c325f),Ts['push'](_0x27d94b['x'],_0x27d94b['y']+_0x1310a1*_0x111118,_0x27d94b['z']+_0x1310a1*_0x346e20);}this['getBatch'](_0x2251c5,_0xb908fd)['addLinesAr'+'rays'](Ts,_0x4462c8),Ts['length']=0x3*0x157+0x1981*0x1+-0x1d86;}['getGraphNo'+'de'](_0xaaac8d){const _0x504246=new Ie('ImmediateD'+'ebug');return _0x504246['worldTrans'+'form']=_0xaaac8d,_0x504246['_dirtyWorl'+'d']=_0x504246['_dirtyNorm'+'al']=!(-0x875+-0x5d*0x3b+0x1de5),_0x504246;}['onPreRende'+'rLayer'](_0x2d4a97,_0x4b6688,_0x59283c){if(this['batchesMap']['forEach']((_0x16ad0c,_0x2e71bd)=>{_0x2e71bd===_0x2d4a97&&_0x16ad0c['onPreRende'+'r'](_0x4b6688,_0x59283c);}),!this['updatedLay'+'ers']['has'](_0x2d4a97)){this['updatedLay'+'ers']['add'](_0x2d4a97);const _0x5ef066=this['layerMeshI'+'nstances']['get'](_0x2d4a97);if(_0x5ef066){for(let _0x4a0cd7=-0x50e+-0x13b3+0x18c1;_0x4a0cd7<_0x5ef066['length'];_0x4a0cd7++)_0x4b6688['push'](_0x5ef066[_0x4a0cd7]);_0x5ef066['length']=-0x1f7*-0x13+0x2389*-0x1+-0x1cc;}}}['onPostRend'+'er'](){this['allBatches']['forEach'](_0xfe83cf=>_0xfe83cf['clear']()),this['allBatches']['clear'](),this['updatedLay'+'ers']['clear']();}}class NA{constructor(){h(this,'type',Kn),h(this,'color',new ie(-0x19f5+-0x1b9d+-0x1ac9*-0x2,-0x1169*-0x1+-0x21bd+-0x2c*-0x5f,0x1561+-0x757*0x1+-0xe0a)),h(this,'density',-0x1*-0x14fb+-0x35e*0x8+0x5f5),h(this,'start',0x3*-0x3d6+0x2645+-0x1ac2),h(this,'end',0x1f*-0x98+-0x1b0d+-0x315d*-0x1);}}class Et extends me{constructor(_0x387249){super(),h(this,'ambientBak'+'e',!(0x13*0x1d6+0x2302+-0x1*0x45e3)),h(this,'ambientBak'+'eOcclusion'+'Brightness',0x2584+0xf5d+-0x34e1),h(this,'ambientBak'+'eOcclusion'+'Contrast',-0x40a+-0x20c2+-0xc*-0x311),h(this,'ambientLig'+'ht',new ie(0x3bb*-0x7+-0x1a36+0x3453,-0x3c7*-0x5+0x559+-0x205*0xc,-0x11*0x1c9+-0x74a+-0x29*-0xeb)),h(this,'ambientLum'+'inance',0x107b+-0x188+-0x2b*0x59),h(this,'exposure',-0x1780+0x1*-0x685+0x1e06),h(this,'lightmapSi'+'zeMultipli'+'er',0x1*-0x1d55+0x40b+0x19*0x103),h(this,'lightmapMa'+'xResolutio'+'n',-0x4*0x2e9+-0x162a+0x14e7*0x2),h(this,'lightmapMo'+'de',jc),h(this,'lightmapFi'+'lterEnable'+'d',!(0x1b2e+-0x537+-0x15f6)),h(this,'lightmapHD'+'R',!(0x4d3+0x14fd+0x19cf*-0x1)),h(this,'root',null),h(this,'physicalUn'+'its',!(-0x8fb+-0x53b+-0x1*-0xe37)),h(this,'_envAtlas',null),h(this,'_skyboxCub'+'eMap',null),h(this,'_fogParams',new NA()),h(this,'forcePassT'+'hroughSpec'+'ular',!(0xbec+-0x238b+-0x2a0*-0x9)),(w['assert'](_0x387249,'Scene\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x387249,this['_gravity']=new D(-0x20f4+-0x14*-0x5e+0x199c,-(0x1ea*-0x6+0xf8*-0x3+0xe6d+0.8000000000000007),0x2531+-0x35*0x95+-0x658),this['_layers']=null,this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']=null,this['_skyboxInt'+'ensity']=0xd0*0x8+0x1347+-0x19c6*0x1,this['_skyboxLum'+'inance']=-0x26d2+-0x17eb*-0x1+0x5*0x2fb,this['_skyboxMip']=-0x385+0x1*-0x23d5+0x275a,this['_skyboxHig'+'hlightMult'+'iplier']=0x962*-0x1+-0x79*0x51+0x2fac,this['_skyboxRot'+'ationShade'+'rInclude']=!(-0xb*-0x1e9+0x1f*0x13a+-0x3b08),this['_skyboxRot'+'ation']=new le(),this['_skyboxRot'+'ationMat3']=new _i(),this['_skyboxRot'+'ationMat4']=new te(),this['_ambientBa'+'keNumSampl'+'es']=0x679*-0x1+-0x21c1+0x283b*0x1,this['_ambientBa'+'keSpherePa'+'rt']=-0x97e+0x374+0x60a+0.4,this['_lightmapF'+'ilterRange']=0xa34+-0x1dad+-0x1b*-0xb9,this['_lightmapF'+'ilterSmoot'+'hness']=0x1952+-0x1807+-0x14b+0.2,this['_clustered'+'LightingEn'+'abled']=!(0x1*-0x234b+-0x9*-0x405+-0x71*0x2),this['_lightingP'+'arams']=new Mv(this['device']['supportsAr'+'eaLights'],this['device']['maxTexture'+'Size'],()=>{this['updateShad'+'ers']=!(0xe0c+0x336+-0x1142);}),this['_sky']=new LA(this),this['_stats']={'meshInstances':0x0,'lights':0x0,'dynamicLights':0x0,'bakedLights':0x0,'updateShadersTime':0x0},this['updateShad'+'ers']=!(-0x247+-0x42b+-0x37*-0x1e),this['_shaderVer'+'sion']=0x2a5*0x4+0x20d7+-0x2b6b,this['immediate']=new FA(this['device']));}get['defaultDra'+'wLayer'](){return this['layers']['getLayerBy'+'Id'](Zp);}set['ambientBak'+'eNumSample'+'s'](_0x1a7061){this['_ambientBa'+'keNumSampl'+'es']=Y['clamp'](Math['floor'](_0x1a7061),-0x11c*-0x1f+-0x1*-0x593+0x42*-0x9b,-0x718+0x28*-0xeb+0x2ccf);}get['ambientBak'+'eNumSample'+'s'](){return this['_ambientBa'+'keNumSampl'+'es'];}set['ambientBak'+'eSpherePar'+'t'](_0x2978ce){this['_ambientBa'+'keSpherePa'+'rt']=Y['clamp'](_0x2978ce,-0x1*-0x993+0x1b13+-0x24a6*0x1+0.001,-0x1eb*0x13+-0xd68+0x31da);}get['ambientBak'+'eSpherePar'+'t'](){return this['_ambientBa'+'keSpherePa'+'rt'];}set['clusteredL'+'ightingEna'+'bled'](_0x2d2688){if(this['device']['isWebGPU']&&!_0x2d2688){w['warnOnce']('WebGPU\x20cur'+'rently\x20onl'+'y\x20supports'+'\x20clustered'+'\x20lighting,'+'\x20and\x20this\x20'+'cannot\x20be\x20'+'disabled.');return;}if(!this['_clustered'+'LightingEn'+'abled']&&_0x2d2688){console['error']('Turning\x20on'+'\x20disabled\x20'+'clustered\x20'+'lighting\x20i'+'s\x20not\x20curr'+'ently\x20supp'+'orted');return;}this['_clustered'+'LightingEn'+'abled']=_0x2d2688;}get['clusteredL'+'ightingEna'+'bled'](){return this['_clustered'+'LightingEn'+'abled'];}set['envAtlas'](_0x5493bb){_0x5493bb!==this['_envAtlas']&&(this['_envAtlas']=_0x5493bb,_0x5493bb&&(_0x5493bb['addressU']=ue,_0x5493bb['addressV']=ue,_0x5493bb['minFilter']=vt,_0x5493bb['magFilter']=vt,_0x5493bb['mipmaps']=!(0x1*-0x1685+-0x314+0x3a*0x71)),this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_resetSkyM'+'esh']());}get['envAtlas'](){return this['_envAtlas'];}set['layers'](_0x1f76e8){const _0xc3d778=this['_layers'];this['_layers']=_0x1f76e8,this['fire']('set:layers',_0xc3d778,_0x1f76e8);}get['layers'](){return this['_layers'];}get['sky'](){return this['_sky'];}get['lighting'](){return this['_lightingP'+'arams'];}get['fog'](){return this['_fogParams'];}set['lightmapFi'+'lterRange'](_0x1f744e){this['_lightmapF'+'ilterRange']=Math['max'](_0x1f744e,0x40*0x29+0x3*-0xadd+0x1657+0.001);}get['lightmapFi'+'lterRange'](){return this['_lightmapF'+'ilterRange'];}set['lightmapFi'+'lterSmooth'+'ness'](_0x3f41b3){this['_lightmapF'+'ilterSmoot'+'hness']=Math['max'](_0x3f41b3,0x4c*-0x3e+-0x3b*-0x58+-0x1e0+0.001);}get['lightmapFi'+'lterSmooth'+'ness'](){return this['_lightmapF'+'ilterSmoot'+'hness'];}set['prefiltere'+'dCubemaps'](_0x2d0185){_0x2d0185=_0x2d0185||[];const _0x20c694=this['_prefilter'+'edCubemaps'];(_0x20c694['length']!==_0x2d0185['length']||_0x20c694['some']((_0x4906eb,_0x32f4e6)=>_0x4906eb!==_0x2d0185[_0x32f4e6]))&&(_0x2d0185['length']===0xb91+0xfcd+-0x1b58&&_0x2d0185['every'](_0x3125f5=>!!_0x3125f5)?(this['_internalE'+'nvAtlas']=Tv['generatePr'+'efilteredA'+'tlas'](_0x2d0185,{'target':this['_internalE'+'nvAtlas']}),this['_envAtlas']=this['_internalE'+'nvAtlas']):(this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_envAtlas']=null),this['_prefilter'+'edCubemaps']=_0x2d0185['slice'](),this['_resetSkyM'+'esh']());}get['prefiltere'+'dCubemaps'](){return this['_prefilter'+'edCubemaps'];}set['skybox'](_0x1036f9){_0x1036f9!==this['_skyboxCub'+'eMap']&&(this['_skyboxCub'+'eMap']=_0x1036f9,this['_resetSkyM'+'esh']());}get['skybox'](){return this['_skyboxCub'+'eMap'];}set['skyboxInte'+'nsity'](_0x481319){_0x481319!==this['_skyboxInt'+'ensity']&&(this['_skyboxInt'+'ensity']=_0x481319,this['_resetSkyM'+'esh']());}get['skyboxInte'+'nsity'](){return this['_skyboxInt'+'ensity'];}set['skyboxLumi'+'nance'](_0xf7ee9){_0xf7ee9!==this['_skyboxLum'+'inance']&&(this['_skyboxLum'+'inance']=_0xf7ee9,this['_resetSkyM'+'esh']());}get['skyboxLumi'+'nance'](){return this['_skyboxLum'+'inance'];}set['skyboxMip'](_0x4de771){_0x4de771!==this['_skyboxMip']&&(this['_skyboxMip']=_0x4de771,this['_resetSkyM'+'esh']());}get['skyboxMip'](){return this['_skyboxMip'];}set['skyboxHigh'+'lightMulti'+'plier'](_0x495d47){_0x495d47!==this['_skyboxHig'+'hlightMult'+'iplier']&&(this['_skyboxHig'+'hlightMult'+'iplier']=_0x495d47,this['_resetSkyM'+'esh']());}get['skyboxHigh'+'lightMulti'+'plier'](){return this['_skyboxHig'+'hlightMult'+'iplier'];}set['skyboxRota'+'tion'](_0x451690){if(!this['_skyboxRot'+'ation']['equals'](_0x451690)){const _0x568d60=_0x451690['equals'](le['IDENTITY']);this['_skyboxRot'+'ation']['copy'](_0x451690),_0x568d60?this['_skyboxRot'+'ationMat3']['setIdentit'+'y']():(this['_skyboxRot'+'ationMat4']['setTRS'](D['ZERO'],_0x451690,D['ONE']),this['_skyboxRot'+'ationMat3']['invertMat4'](this['_skyboxRot'+'ationMat4'])),!this['_skyboxRot'+'ationShade'+'rInclude']&&!_0x568d60&&(this['_skyboxRot'+'ationShade'+'rInclude']=!(0x143f+-0x387+-0x10b8),this['_resetSkyM'+'esh']());}}get['skyboxRota'+'tion'](){return this['_skyboxRot'+'ation'];}['destroy'](){this['_resetSkyM'+'esh'](),this['root']=null,this['off']();}['drawLine'](_0x38a6b3,_0x1f4e96,_0x2cf18d=ie['WHITE'],_0x35f5a1=!(0x1169+0x23d6+-0x353f),_0x2d8f9=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x2d8f9,_0x35f5a1)['addLines']([_0x38a6b3,_0x1f4e96],[_0x2cf18d,_0x2cf18d]);}['drawLines'](_0x4a9627,_0x84c34b,_0x3944b6=!(0x433*-0x4+0x18a1+-0x7d5),_0x22a589=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x22a589,_0x3944b6)['addLines'](_0x4a9627,_0x84c34b);}['drawLineAr'+'rays'](_0x58e7f7,_0x127ab8,_0x5b2255=!(-0x1d35*-0x1+0x2*0x6b5+-0x1*0x2a9f),_0x29ef9a=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x29ef9a,_0x5b2255)['addLinesAr'+'rays'](_0x58e7f7,_0x127ab8);}['applySetti'+'ngs'](_0x126b10){const _0x548924=_0x126b10['physics'],_0x1d98fe=_0x126b10['render'];this['_gravity']['set'](_0x548924['gravity'][0x194d+0x1*-0x25af+0x631*0x2],_0x548924['gravity'][0x2*0x985+0x85d*0x2+-0x23c3],_0x548924['gravity'][0x1847+0x2ba*-0xd+0xb2d]),this['ambientLig'+'ht']['set'](_0x1d98fe['global_amb'+'ient'][-0xe95*0x2+0x14c6+0x864],_0x1d98fe['global_amb'+'ient'][0x241*-0x8+0x14af+-0xe2*0x3],_0x1d98fe['global_amb'+'ient'][0x38b*0xa+-0xca3*-0x1+-0x300f]),this['ambientLum'+'inance']=_0x1d98fe['ambientLum'+'inance'],this['fog']['type']=_0x1d98fe['fog'],this['fog']['color']['set'](_0x1d98fe['fog_color'][-0x658+-0xa3*-0xc+0x1*-0x14c],_0x1d98fe['fog_color'][-0x283*0x7+-0xbe5+0x1*0x1d7b],_0x1d98fe['fog_color'][0xc0b*-0x3+-0x8*0x3cd+0x428b]),this['fog']['start']=_0x1d98fe['fog_start'],this['fog']['end']=_0x1d98fe['fog_end'],this['fog']['density']=_0x1d98fe['fog_densit'+'y'],this['lightmapSi'+'zeMultipli'+'er']=_0x1d98fe['lightmapSi'+'zeMultipli'+'er'],this['lightmapMa'+'xResolutio'+'n']=_0x1d98fe['lightmapMa'+'xResolutio'+'n'],this['lightmapMo'+'de']=_0x1d98fe['lightmapMo'+'de'],this['exposure']=_0x1d98fe['exposure'],this['_skyboxInt'+'ensity']=_0x1d98fe['skyboxInte'+'nsity']??0x1ee5+-0xdc2+-0x1122,this['_skyboxLum'+'inance']=_0x1d98fe['skyboxLumi'+'nance']??0xb*0x397+-0x2*0x1c7f+0x5fa1,this['_skyboxMip']=_0x1d98fe['skyboxMip']??-0x1*-0x269+0xb9e+-0xe07,_0x1d98fe['skyboxRota'+'tion']&&(this['skyboxRota'+'tion']=new le()['setFromEul'+'erAngles'](_0x1d98fe['skyboxRota'+'tion'][0x1dff+-0x1e8*-0xf+0x1*-0x3a97],_0x1d98fe['skyboxRota'+'tion'][0x128e+0x7*0x301+-0x22*0x12a],_0x1d98fe['skyboxRota'+'tion'][-0x26ad+0x253+-0x4*-0x917])),this['sky']['applySetti'+'ngs'](_0x1d98fe),this['clusteredL'+'ightingEna'+'bled']=_0x1d98fe['clusteredL'+'ightingEna'+'bled']??!(0x4c7*0x8+-0x1d1f+0x8*-0x123),this['lighting']['applySetti'+'ngs'](_0x1d98fe),['lightmapFi'+'lterEnable'+'d','lightmapFi'+'lterRange','lightmapFi'+'lterSmooth'+'ness','ambientBak'+'e','ambientBak'+'eNumSample'+'s','ambientBak'+'eSpherePar'+'t','ambientBak'+'eOcclusion'+'Brightness','ambientBak'+'eOcclusion'+'Contrast']['forEach'](_0x1d9e36=>{_0x1d98fe['hasOwnProp'+'erty'](_0x1d9e36)&&(this[_0x1d9e36]=_0x1d98fe[_0x1d9e36]);}),this['_resetSkyM'+'esh']();}['_getSkybox'+'Tex'](){const _0x2ad417=this['_prefilter'+'edCubemaps'];return this['_skyboxMip']?_0x2ad417[[-0x70*-0x49+0x2ad*0x1+0x229d*-0x1,-0x1*-0x2bd+-0x123c*-0x2+-0x2*0x139a,-0xc7*-0x7+-0x1df4+0x1886,-0xf6d+0x1887+0x916*-0x1,-0x10bd+-0x1791*0x1+0x2853,-0x1e75+0x24b8+-0x63d][this['_skyboxMip']]]||this['_envAtlas']||_0x2ad417[0x1*0x25c3+-0x20ed*0x1+-0x4d6]||this['_skyboxCub'+'eMap']:this['_skyboxCub'+'eMap']||_0x2ad417[0x14b*0x1+-0x1f18+0x1dcd]||this['_envAtlas'];}['_updateSky'+'Mesh'](){this['sky']['skyMesh']||this['sky']['updateSkyM'+'esh'](),this['sky']['update']();}['_resetSkyM'+'esh'](){this['sky']['resetSkyMe'+'sh'](),this['updateShad'+'ers']=!(-0x2*-0x716+0x146f+-0x229b);}['setSkybox'](_0xad5f13){_0xad5f13?(this['skybox']=_0xad5f13[0x644+-0x24b5+0x1e71]||null,_0xad5f13[-0x239c+0x9*-0x1f7+0x354c]&&!_0xad5f13[-0x174e+0xc17*-0x1+0x2366]['cubemap']?this['envAtlas']=_0xad5f13[0x3*0x6e1+0x2701+-0x13e1*0x3]:this['prefiltere'+'dCubemaps']=_0xad5f13['slice'](0x1e1b+-0x3*-0x34c+-0x27fe)):(this['skybox']=null,this['envAtlas']=null);}get['lightmapPi'+'xelFormat'](){return this['lightmapHD'+'R']&&this['device']['getRendera'+'bleHdrForm'+'at']()||Ne;}}h(Et,'EVENT_SETL'+'AYERS','set:layers'),h(Et,'EVENT_SETS'+'KYBOX','set:skybox'),h(Et,'EVENT_PRER'+'ENDER','prerender'),h(Et,'EVENT_POST'+'RENDER','postrender'),h(Et,'EVENT_PRER'+'ENDER_LAYE'+'R','prerender:'+'layer'),h(Et,'EVENT_POST'+'RENDER_LAY'+'ER','postrender'+':layer'),h(Et,'EVENT_PREC'+'ULL','precull'),h(Et,'EVENT_POST'+'CULL','postcull');class Lv{constructor(_0x427bdd,_0x164c2d,_0x491db7){this['device']=_0x427bdd,this['inverseBin'+'dPose']=_0x164c2d,this['boneNames']=_0x491db7;}}const kA=[-0xe*-0xf8+0xf8d*0x1+-0x1d1d*0x1,-0x1362+0x1*-0x1a14+0x2d76,-0x1a20+0x2*0xafa+-0x42d*-0x1,0x1*-0x394+0xf6f+-0x5*0x25f,-0x1e19+-0xae5+-0x1*-0x28fe,0x1616+-0xb7b+0x54d*-0x2,0x1*-0x1acf+-0x8cc*-0x1+0x1203,-0x17d6+0x1308+0x267*0x2,0xb2*-0x10+-0x1b5*0xf+-0x24bc*-0x1,0x2ea*-0xb+0xa68+-0x146*-0x11,0x17ac+0x1e56+-0x1f*0x1be,0x1*-0x122b+0x1904+0x1*-0x6d8],UA=[-0x5*0x15d+0x1bd*-0x14+0x5*0x851,-0x5*0x6b3+-0x1b31*0x1+-0x3cb1*-0x1,0x6b6+-0x245*0x6+0x6eb,0xb*0x343+-0x1*0x2671+0x292,-0x7*0x511+0x9d3+0x19a7,0x86*0x1d+-0x1*0x269+-0xcc4];class BA extends me{constructor(_0x2bcbdd,_0x4713c8){super(),this['_device']=_0x2bcbdd,this['_pixelsPer'+'Unit']=_0x4713c8&&_0x4713c8['pixelsPerU'+'nit']!==void(-0x17*-0x191+-0xa4e+-0x19b9)?_0x4713c8['pixelsPerU'+'nit']:0xef3+0x21ea+-0x30dc,this['_renderMod'+'e']=_0x4713c8&&_0x4713c8['renderMode']!==void(0x24*-0x76+-0x12*-0x6d+0x8ee)?_0x4713c8['renderMode']:ci,this['_atlas']=_0x4713c8&&_0x4713c8['atlas']!==void(0x255c+-0x2562+0x6)?_0x4713c8['atlas']:null,this['_frameKeys']=_0x4713c8&&_0x4713c8['frameKeys']!==void(-0xc*0x29+-0x213d+0x2329*0x1)?_0x4713c8['frameKeys']:null,this['_meshes']=[],this['_updatingP'+'roperties']=!(0x1*0xae+-0x1d*0x71+0xc20),this['_meshesDir'+'ty']=!(0x1*0xfa9+0x3*-0x2bd+-0x17d*0x5),this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes']();}set['frameKeys'](_0x2a539b){this['_frameKeys']=_0x2a539b,this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0xa*0xfd+-0x9eb*0x1+0x9):this['_createMes'+'hes']()),this['fire']('set:frameK'+'eys',_0x2a539b);}get['frameKeys'](){return this['_frameKeys'];}set['atlas'](_0x1b4375){_0x1b4375!==this['_atlas']&&(this['_atlas']&&(this['_atlas']['off']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['off']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['off']('remove:fra'+'me',this['_onFrameRe'+'moved'],this)),this['_atlas']=_0x1b4375,this['_atlas']&&this['_frameKeys']&&(this['_atlas']['on']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['on']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['on']('remove:fra'+'me',this['_onFrameRe'+'moved'],this),this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x1f7b*0x1+-0xc7*0x26+0x47*-0x7):this['_createMes'+'hes']()),this['fire']('set:atlas',_0x1b4375));}get['atlas'](){return this['_atlas'];}set['pixelsPerU'+'nit'](_0x884d23){this['_pixelsPer'+'Unit']!==_0x884d23&&(this['_pixelsPer'+'Unit']=_0x884d23,this['fire']('set:pixels'+'PerUnit',_0x884d23),this['_atlas']&&this['_frameKeys']&&this['renderMode']===ci&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0xf*-0x15a+-0x1d10+0x1e*0x1a5):this['_createMes'+'hes']()));}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}set['renderMode'](_0x4e08d2){if(this['_renderMod'+'e']===_0x4e08d2)return;const _0x128f96=this['_renderMod'+'e'];this['_renderMod'+'e']=_0x4e08d2,this['fire']('set:render'+'Mode',_0x4e08d2),(_0x128f96===ci||_0x4e08d2===ci)&&this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x4c4*-0x7+-0x1532+0x1*0x368e):this['_createMes'+'hes']());}get['renderMode'](){return this['_renderMod'+'e'];}get['meshes'](){return this['_meshes'];}['_createMes'+'hes'](){const _0x1a6c68=this['_meshes']['length'];for(let _0x25cf52=-0x1318+-0x240b+0x3723;_0x25cf52<_0x1a6c68;_0x25cf52++){const _0x2c6faf=this['_meshes'][_0x25cf52];_0x2c6faf&&_0x2c6faf['destroy']();}const _0x3670ea=this['_frameKeys']['length'];this['_meshes']=new Array(_0x3670ea);const _0x423454=this['renderMode']===Pt||this['_renderMod'+'e']===Mt?this['_create9Sl'+'iceMesh']:this['_createSim'+'pleMesh'];for(let _0x586199=-0x9*0x31a+0x543*-0x3+0x2bb3;_0x586199<_0x3670ea;_0x586199++){const _0x247b10=this['_atlas']['frames'][this['_frameKeys'][_0x586199]];this['_meshes'][_0x586199]=_0x247b10?_0x423454['call'](this,_0x247b10):null;}this['fire']('set:meshes');}['_createSim'+'pleMesh'](_0x470721){const _0xa7e28e=_0x470721['rect'],_0x5a6eaa=this['_atlas']['texture']['width'],_0x9595ec=this['_atlas']['texture']['height'],_0x2f1cb8=_0xa7e28e['z']/this['_pixelsPer'+'Unit'],_0x57c331=_0xa7e28e['w']/this['_pixelsPer'+'Unit'],_0x4d8029=_0x470721['pivot']['x'],_0x7657c5=_0x470721['pivot']['y'],_0x5ab611=[-_0x4d8029*_0x2f1cb8,-_0x7657c5*_0x57c331,-0x2*-0x2a0+-0x107f+0xb3f*0x1,(0x1156+0x3da+0x152f*-0x1-_0x4d8029)*_0x2f1cb8,-_0x7657c5*_0x57c331,-0x1a*0x73+0xb6*-0x5+-0x12c*-0xd,(0x1ac*-0x1+0x143*-0x1d+0x1322*0x2-_0x4d8029)*_0x2f1cb8,(-0x3e6*-0x3+0x1*0x22db+0xf84*-0x3-_0x7657c5)*_0x57c331,0x5*-0x2d7+-0x81*0x39+0x2aec,-_0x4d8029*_0x2f1cb8,(0x2433+-0x172d+0x1*-0xd05-_0x7657c5)*_0x57c331,-0xd*0x233+0x140b+0x88c*0x1],_0x43964e=_0xa7e28e['x']/_0x5a6eaa,_0x1171ae=0x1*-0x1+0xae9*0x2+-0x15d0-_0xa7e28e['y']/_0x9595ec,_0x87e5c7=(_0xa7e28e['x']+_0xa7e28e['z'])/_0x5a6eaa,_0xbfb0cd=0x108f+0x1*0x1a0b+-0x2a99-(_0xa7e28e['y']+_0xa7e28e['w'])/_0x9595ec,_0x5d0913=[_0x43964e,_0x1171ae,_0x87e5c7,_0x1171ae,_0x87e5c7,_0xbfb0cd,_0x43964e,_0xbfb0cd],_0x116b37=new Ta();return _0x116b37['positions']=_0x5ab611,_0x116b37['normals']=kA,_0x116b37['uvs']=_0x5d0913,_0x116b37['indices']=UA,Ge['fromGeomet'+'ry'](this['_device'],_0x116b37);}['_create9Sl'+'iceMesh'](){const _0x5d2f81=J['ONE'],_0x1162e3=-0x13c3+-0x5*0x5f+0x15a1,_0x549cf8=-0x5a9+0x2380+-0x1dd4*0x1,_0x132db3=[],_0x2b2a31=[],_0x2142f3=[],_0x33113b=[];let _0x3af78f=-0x1320+0x3*-0xba7+0x429*0xd;for(let _0x50b186=-0x511+0x1fe*-0x12+0x28ed;_0x50b186<=_0x1162e3;_0x50b186++){const _0x35ce38=_0x50b186===-0x35e+0x1a95+-0x7bd*0x3||_0x50b186===_0x1162e3?0x10*0x21a+-0x29*0xa3+-0x785:0xb2d*0x1+0x82*-0xb+0x5*-0x11e;for(let _0x3e7d1d=0xfe3+-0x8cb*-0x1+-0x18ae;_0x3e7d1d<=_0x549cf8;_0x3e7d1d++){const _0x19ca6c=-_0x5d2f81['x']+(0x4e8*-0x4+0x1338+0x6a)*_0x5d2f81['x']*(_0x50b186<=-0x7*0x204+0xdf*-0x10+0x1c0d?0x1688+-0x44*0x5a+0x160:-0x73d+0x109e+-0x95e)/_0x1162e3,_0x3bfa31=-0x1*0x5d5+-0xd*0xc3+0xfbc,_0xf42a50=-(-_0x5d2f81['y']+(0x1bcb+0x2*-0x1289+-0x1*-0x949)*_0x5d2f81['y']*(_0x3e7d1d<=0x2533+0x7*-0x42d+0x1*-0x7f7?0xb04*0x2+0xbe0+-0x21e8:-0xcc9+-0x45*-0xf+0x8c1)/_0x549cf8),_0x20d4dc=_0x3e7d1d===0x625+-0x1cc4*-0x1+0x1*-0x22e9||_0x3e7d1d===_0x549cf8?-0x22*-0xe9+-0x140d+-0x1*0xae5:-0x5c*-0x5+0xd7e+-0xf49;_0x132db3['push'](-_0x19ca6c,_0x3bfa31,_0xf42a50),_0x2b2a31['push'](0x1d96+0x36b+0x47*-0x77,0x58b+-0x2*0x11c9+0x1*0x1e08,-0x320+0x1cd*0x11+-0x1b7d),_0x2142f3['push'](_0x35ce38,_0x20d4dc),_0x50b186<_0x1162e3&&_0x3e7d1d<_0x549cf8&&(_0x33113b['push'](_0x3af78f+_0x549cf8+(-0x1e5c+0x7fd+-0x166*-0x10),_0x3af78f+(-0x3*-0x58d+-0x1231*0x2+0x13bc),_0x3af78f),_0x33113b['push'](_0x3af78f+_0x549cf8+(0x163*0x5+0x19b2+-0x48*0x74),_0x3af78f+_0x549cf8+(0xd8*-0x1b+0x47a*-0x2+-0xef*-0x22),_0x3af78f+(-0x2b*-0x11+0x1a1*0x13+0x1*-0x21cd))),_0x3af78f++;}}const _0x2b8c7e=new Ta();return _0x2b8c7e['positions']=_0x132db3,_0x2b8c7e['normals']=_0x2b2a31,_0x2b8c7e['uvs']=_0x2142f3,_0x2b8c7e['indices']=_0x33113b,Ge['fromGeomet'+'ry'](this['_device'],_0x2b8c7e);}['_onSetFram'+'es'](_0x4f995a){this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x197a+0x21f2+0x21e*-0x4):this['_createMes'+'hes']();}['_onFrameCh'+'anged'](_0x522aa3,_0x5f0a6d){const _0x866447=this['_frameKeys']['indexOf'](_0x522aa3);_0x866447<-0xe2*-0x11+-0x15f4*-0x1+-0xf9*0x26||(_0x5f0a6d?this['renderMode']===ci&&(this['_meshes'][_0x866447]=this['_createSim'+'pleMesh'](_0x5f0a6d)):this['_meshes'][_0x866447]=null,this['fire']('set:meshes'));}['_onFrameRe'+'moved'](_0x28bb7b){const _0x738037=this['_frameKeys']['indexOf'](_0x28bb7b);_0x738037<-0x27*0xec+-0x290+0x2684||(this['_meshes'][_0x738037]=null,this['fire']('set:meshes'));}['startUpdat'+'e'](){this['_updatingP'+'roperties']=!(-0x713*-0x1+0x24b6+0xb*-0x3fb),this['_meshesDir'+'ty']=!(0xe88+-0x3fd*0x3+-0x52*0x8);}['endUpdate'](){this['_updatingP'+'roperties']=!(-0x17af+-0x1098+-0x2*-0x1424),this['_meshesDir'+'ty']&&this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes'](),this['_meshesDir'+'ty']=!(0x2395*-0x1+-0x237b+-0xa27*-0x7);}['destroy'](){for(const _0x19fdb3 of this['_meshes'])_0x19fdb3&&_0x19fdb3['destroy']();this['_meshes']['length']=-0x222+-0x136d+0x158f;}}class zA extends me{constructor(){super(),this['_texture']=null,this['_frames']=null;}set['texture'](_0x13ec7a){this['_texture']=_0x13ec7a,this['fire']('set:textur'+'e',_0x13ec7a);}get['texture'](){return this['_texture'];}set['frames'](_0x71cf88){this['_frames']=_0x71cf88,this['fire']('set:frames',_0x71cf88);}get['frames'](){return this['_frames'];}['setFrame'](_0x2b3261,_0x50eba9){let _0x586183=this['_frames'][_0x2b3261];_0x586183?(_0x586183['rect']['copy'](_0x50eba9['rect']),_0x586183['pivot']['copy'](_0x50eba9['pivot']),_0x586183['border']['copy'](_0x50eba9['border'])):(_0x586183={'rect':_0x50eba9['rect']['clone'](),'pivot':_0x50eba9['pivot']['clone'](),'border':_0x50eba9['border']['clone']()},this['_frames'][_0x2b3261]=_0x586183),this['fire']('set:frame',_0x2b3261['toString'](),_0x586183);}['removeFram'+'e'](_0x2673ef){const _0x273518=this['_frames'][_0x2673ef];_0x273518&&(delete this['_frames'][_0x2673ef],this['fire']('remove:fra'+'me',_0x2673ef['toString'](),_0x273518));}['destroy'](){this['_texture']&&this['_texture']['destroy']();}}class dg{constructor(_0x55987e,_0x4121d5,_0x240cff,_0x48720f){this['time']=_0x55987e,this['position']=_0x4121d5,this['rotation']=_0x240cff,this['scale']=_0x48720f;}}class fg{constructor(){this['_name']='',this['_keys']=[];}}class ug{constructor(){h(this,'name',''),h(this,'duration',0x1*0xa3b+0x1d88+-0x27c3),(this['_nodes']=[],this['_nodeDict']={});}['getNode'](_0x32ea5a){return this['_nodeDict'][_0x32ea5a];}['addNode'](_0x31a2f9){this['_nodes']['push'](_0x31a2f9),this['_nodeDict'][_0x31a2f9['_name']]=_0x31a2f9;}get['nodes'](){return this['_nodes'];}}class VA{constructor(){this['_written']=!(0x30f+-0x35*0x8f+0x3cb*0x7),this['_name']='',this['_keyFrames']=[],this['_quat']=new le(),this['_pos']=new D(),this['_scale']=new D(),this['_targetNod'+'e']=null;}['getTarget'](){return this['_targetNod'+'e'];}['setTarget'](_0x2c950c){this['_targetNod'+'e']=_0x2c950c;}}class Sf{constructor(_0x571006){h(this,'looping',!(-0x97*0x3a+-0xfa7*0x1+-0x31dd*-0x1)),(this['_animation']=null,this['_time']=0x1d0*0x8+-0x24f4+0x1df*0xc,this['_interpola'+'tedKeys']=[],this['_interpola'+'tedKeyDict']={},this['_currKeyIn'+'dices']={},this['graph']=null);const _0x5deaab=_0x21e0cd=>{const _0x38fd33=new VA();_0x38fd33['_name']=_0x21e0cd['name'],this['_interpola'+'tedKeys']['push'](_0x38fd33),this['_interpola'+'tedKeyDict'][_0x21e0cd['name']]=_0x38fd33,this['_currKeyIn'+'dices'][_0x21e0cd['name']]=-0x24a2+0xa*0x250+0xd82;for(let _0xf3a2d=-0x17b7+-0xb97*0x1+0x234e;_0xf3a2d<_0x21e0cd['_children']['length'];_0xf3a2d++)_0x5deaab(_0x21e0cd['_children'][_0xf3a2d]);};_0x5deaab(_0x571006);}set['animation'](_0x5a3121){this['_animation']=_0x5a3121,this['currentTim'+'e']=0x509+-0x31a+-0x1ef;}get['animation'](){return this['_animation'];}set['currentTim'+'e'](_0x1bd250){this['_time']=_0x1bd250;const _0x390b94=this['_interpola'+'tedKeys']['length'];for(let _0x193aa7=0x647*0x1+-0x893*0x4+0x957*0x3;_0x193aa7<_0x390b94;_0x193aa7++){const _0x5d7f0c=this['_interpola'+'tedKeys'][_0x193aa7]['_name'];this['_currKeyIn'+'dices'][_0x5d7f0c]=0x15ad*0x1+0x31*-0xad+0xb70;}this['addTime'](0x1844+0xa*-0x297+0xd1*0x2),this['updateGrap'+'h']();}get['currentTim'+'e'](){return this['_time'];}get['numNodes'](){return this['_interpola'+'tedKeys']['length'];}['addTime'](_0x4a1da8){if(this['_animation']!==null){const _0x4a5bdd=this['_animation']['_nodes'],_0x184345=this['_animation']['duration'];if(this['_time']===_0x184345&&!this['looping'])return;if(this['_time']+=_0x4a1da8,this['_time']>_0x184345){this['_time']=this['looping']?-0x1a49+-0x4b*0x2f+0x280e:_0x184345;for(let _0x15e260=-0xed5*0x1+-0x3*-0x82+0x1*0xd4f;_0x15e260<_0x4a5bdd['length'];_0x15e260++){const _0x512565=_0x4a5bdd[_0x15e260]['_name'];this['_currKeyIn'+'dices'][_0x512565]=-0x17b6+-0x1af4+0x1955*0x2;}}else{if(this['_time']<0x2*-0x8ec+-0x2569+0xb0d*0x5){this['_time']=this['looping']?_0x184345:-0x2101+-0x4f*0x7+0x232a;for(let _0x8d25db=-0x1763+0x6e+0x16f5;_0x8d25db<_0x4a5bdd['length'];_0x8d25db++){const _0x95c169=_0x4a5bdd[_0x8d25db],_0x53aa0c=_0x95c169['_name'];this['_currKeyIn'+'dices'][_0x53aa0c]=_0x95c169['_keys']['length']-(0x25a3+-0x1b*-0x35+0xc*-0x39a);}}}const _0x5c9354=_0x4a1da8>=0x366+-0x3*-0x9c5+-0x3*0xae7?-0x13*-0xb8+-0x2*-0xc95+-0x26d1:-(-0x222+0x1535*-0x1+0x1758);for(let _0x487e1d=-0x1*-0x77c+-0x636+-0xa3*0x2;_0x487e1d<_0x4a5bdd['length'];_0x487e1d++){const _0x3c1065=_0x4a5bdd[_0x487e1d],_0x1329de=_0x3c1065['_name'],_0x28b44a=_0x3c1065['_keys'],_0x19b75e=this['_interpola'+'tedKeyDict'][_0x1329de];if(_0x19b75e===void(0x1*0x1a61+-0x4*0xd4+-0x1711)){w['warn']('Unknown\x20sk'+'eleton\x20nod'+'e\x20name:\x20'+_0x1329de);continue;}let _0x2e4774=!(-0x2447*0x1+0x192*0x1+0x22b6);if(_0x28b44a['length']!==-0x1a4*0x4+0x2375+-0x1ce4)for(let _0x26d4cc=this['_currKeyIn'+'dices'][_0x1329de];_0x26d4cc<_0x28b44a['length']-(-0x1*-0x23f9+-0x1d2a*0x1+-0x6ce)&&_0x26d4cc>=0x25c8+-0xb*0xef+-0x1b83*0x1;_0x26d4cc+=_0x5c9354){const _0x1fa36f=_0x28b44a[_0x26d4cc],_0x31de65=_0x28b44a[_0x26d4cc+(-0x1b28+-0x2*0x375+-0x1*-0x2213)];if(_0x1fa36f['time']<=this['_time']&&_0x31de65['time']>=this['_time']){const _0x20a172=(this['_time']-_0x1fa36f['time'])/(_0x31de65['time']-_0x1fa36f['time']);_0x19b75e['_pos']['lerp'](_0x1fa36f['position'],_0x31de65['position'],_0x20a172),_0x19b75e['_quat']['slerp'](_0x1fa36f['rotation'],_0x31de65['rotation'],_0x20a172),_0x19b75e['_scale']['lerp'](_0x1fa36f['scale'],_0x31de65['scale'],_0x20a172),_0x19b75e['_written']=!(0x24f9+-0x1b94+-0x965),this['_currKeyIn'+'dices'][_0x1329de]=_0x26d4cc,_0x2e4774=!(0x213*-0xa+-0x2121+0x35df);break;}}(_0x28b44a['length']===0x1c9d*0x1+0xb83+-0x281f||!_0x2e4774&&this['_time']===0x3*0x962+0x896+-0x24bc&&this['looping'])&&(_0x19b75e['_pos']['copy'](_0x28b44a[-0xc3a+-0xf27+0x1b61]['position']),_0x19b75e['_quat']['copy'](_0x28b44a[-0x1f41+0x56b+-0x2*-0xceb]['rotation']),_0x19b75e['_scale']['copy'](_0x28b44a[-0x159d+0x6e*-0x43+-0x21*-0x187]['scale']),_0x19b75e['_written']=!(-0xb08+-0xb91+0x1699));}}}['blend'](_0x4aaadc,_0x29e856,_0x17d144){const _0x2d484a=this['_interpola'+'tedKeys']['length'];for(let _0x56a7f8=0x45*-0x63+0x1*0xe5b+0xc54;_0x56a7f8<_0x2d484a;_0x56a7f8++){const _0x77f7b8=_0x4aaadc['_interpola'+'tedKeys'][_0x56a7f8],_0x44c76a=_0x29e856['_interpola'+'tedKeys'][_0x56a7f8],_0x420a53=this['_interpola'+'tedKeys'][_0x56a7f8];_0x77f7b8['_written']&&_0x44c76a['_written']?(_0x420a53['_quat']['slerp'](_0x77f7b8['_quat'],_0x29e856['_interpola'+'tedKeys'][_0x56a7f8]['_quat'],_0x17d144),_0x420a53['_pos']['lerp'](_0x77f7b8['_pos'],_0x29e856['_interpola'+'tedKeys'][_0x56a7f8]['_pos'],_0x17d144),_0x420a53['_scale']['lerp'](_0x77f7b8['_scale'],_0x44c76a['_scale'],_0x17d144),_0x420a53['_written']=!(-0x11ea+0x1c00+-0xa16)):_0x77f7b8['_written']?(_0x420a53['_quat']['copy'](_0x77f7b8['_quat']),_0x420a53['_pos']['copy'](_0x77f7b8['_pos']),_0x420a53['_scale']['copy'](_0x77f7b8['_scale']),_0x420a53['_written']=!(0x89*-0x3+0x2452+0x22b7*-0x1)):_0x44c76a['_written']&&(_0x420a53['_quat']['copy'](_0x44c76a['_quat']),_0x420a53['_pos']['copy'](_0x44c76a['_pos']),_0x420a53['_scale']['copy'](_0x44c76a['_scale']),_0x420a53['_written']=!(-0x23b7+-0x3*0x75a+0x283*0x17));}}['setGraph'](_0x661f7d){if(this['graph']=_0x661f7d,_0x661f7d)for(let _0x55a413=-0xe6e+0x112+0x3*0x474;_0x55a413<this['_interpola'+'tedKeys']['length'];_0x55a413++){const _0x20cdfb=this['_interpola'+'tedKeys'][_0x55a413],_0x278968=_0x661f7d['findByName'](_0x20cdfb['_name']);this['_interpola'+'tedKeys'][_0x55a413]['setTarget'](_0x278968);}else{for(let _0x447381=0xa4d+0x33*0x79+0x2de*-0xc;_0x447381<this['_interpola'+'tedKeys']['length'];_0x447381++)this['_interpola'+'tedKeys'][_0x447381]['setTarget'](null);}}['updateGrap'+'h'](){if(this['graph'])for(let _0xee5b06=0xe0+-0x13e3+0x1303;_0xee5b06<this['_interpola'+'tedKeys']['length'];_0xee5b06++){const _0x254b87=this['_interpola'+'tedKeys'][_0xee5b06];if(_0x254b87['_written']){const _0xc55498=_0x254b87['getTarget']();_0xc55498['localPosit'+'ion']['copy'](_0x254b87['_pos']),_0xc55498['localRotat'+'ion']['copy'](_0x254b87['_quat']),_0xc55498['localScale']['copy'](_0x254b87['_scale']),_0xc55498['_dirtyLoca'+'l']||_0xc55498['_dirtifyLo'+'cal'](),_0x254b87['_written']=!(-0x2*-0x46e+0x1*0x2ef+0x3*-0x3ee);}}}}const zs=(-0x37e+-0x1967+0x1ce9)/(-0x1ab8+-0x1082+0x2b7a),si=0xd93*0x2+-0x1cf*0x5+-0x14b*0xe-zs*(-0xe73+-0x581+0x13f6);class gm extends Ta{constructor(_0x17c617,_0x1b5832,_0x3fa26f,_0xc902f,_0x58887e,_0x388f96){super();const _0x119ad1=new D(),_0xc63ba1=new D(),_0xc55965=new D(),_0xab129a=new D(),_0x2817d7=new D(),_0x140252=new D(),_0x33c079=[],_0x3a3625=[],_0xbbe0ae=[],_0x4139e6=[],_0xeb68a5=[];let _0x50d241;if(_0x3fa26f>0x197d+0x884+-0x6cd*0x5){for(let _0x570491=0x113c+-0x1582+0x223*0x2;_0x570491<=_0xc902f;_0x570491++)for(let _0x524cda=0x22e2+0x1253+0x3535*-0x1;_0x524cda<=_0x58887e;_0x524cda++){const _0x2c22a2=_0x524cda/_0x58887e*(-0x8b*0x1f+-0x1abb*-0x1+-0x1*0x9e4)*Math['PI']-Math['PI'],_0x5092b8=Math['sin'](_0x2c22a2),_0x332f19=Math['cos'](_0x2c22a2);_0x2817d7['set'](_0x5092b8*_0x17c617,-_0x3fa26f/(0x11a3+-0x2e2*-0x3+-0x3c1*0x7),_0x332f19*_0x17c617),_0xab129a['set'](_0x5092b8*_0x1b5832,_0x3fa26f/(-0x210+-0x236f*0x1+0x2581),_0x332f19*_0x1b5832),_0x119ad1['lerp'](_0x2817d7,_0xab129a,_0x570491/_0xc902f),_0xc63ba1['sub2'](_0xab129a,_0x2817d7)['normalize'](),_0x140252['set'](_0x332f19,0x1*0x43e+-0x2*0x48a+0x1*0x4d6,-_0x5092b8),_0xc55965['cross'](_0x140252,_0xc63ba1)['normalize'](),_0x33c079['push'](_0x119ad1['x'],_0x119ad1['y'],_0x119ad1['z']),_0x3a3625['push'](_0xc55965['x'],_0xc55965['y'],_0xc55965['z']);let _0x3bea51=_0x524cda/_0x58887e,_0x458cc6=_0x570491/_0xc902f;_0xbbe0ae['push'](_0x3bea51,0xe4a*-0x2+0x7*-0x567+0x4266-_0x458cc6);const _0x701a9=_0x458cc6;if(_0x458cc6=_0x3bea51,_0x3bea51=_0x701a9,_0x3bea51=_0x3bea51*si+zs,_0x458cc6=_0x458cc6*si+zs,_0x3bea51/=-0x18a8+-0x24*-0x7f+0x6cf,_0x4139e6['push'](_0x3bea51,-0x1*0x44f+-0x1d02+0x5*0x6aa-_0x458cc6),_0x570491<_0xc902f&&_0x524cda<_0x58887e){const _0x428f03=_0x570491*(_0x58887e+(-0x20fb*-0x1+-0x2315+0x21b))+_0x524cda,_0x2dec90=_0x570491*(_0x58887e+(-0x68d*0x1+0xe8a+-0xe*0x92))+(_0x524cda+(0x128b+-0x21a*0xb+0x494)),_0x582084=(_0x570491+(0x360+-0x1440+0x10e1))*(_0x58887e+(0x6b5+-0x4*0x7f7+0x38*0x73))+_0x524cda,_0x22870f=(_0x570491+(0x5a*-0x59+-0x1*0x10a6+0x2ff1))*(_0x58887e+(0x639+-0x15d7+0xf9f))+(_0x524cda+(0x2168+0xbce+0x2d35*-0x1));_0xeb68a5['push'](_0x428f03,_0x2dec90,_0x582084),_0xeb68a5['push'](_0x2dec90,_0x22870f,_0x582084);}}}if(_0x388f96){const _0x26e409=Math['floor'](_0x58887e/(-0x1*0x11b+-0xde5+0xf02)),_0x55f1cb=_0x58887e,_0x50f4f5=_0x3fa26f/(0x109*-0x13+0x20cc+-0xd1f);for(let _0x3aa1ba=0xce*0x15+-0x198+-0x51a*0x3;_0x3aa1ba<=_0x26e409;_0x3aa1ba++){const _0x2d596d=_0x3aa1ba*Math['PI']*(-0x4*-0x4f8+0x2030+-0x3410+0.5)/_0x26e409,_0x3b156f=Math['sin'](_0x2d596d),_0x371396=Math['cos'](_0x2d596d);for(let _0x3178ab=-0x7*-0x7+0xacb*-0x1+0x3b*0x2e;_0x3178ab<=_0x55f1cb;_0x3178ab++){const _0x59e028=_0x3178ab*(0x4e4+-0x11f8+0x43*0x32)*Math['PI']/_0x55f1cb-Math['PI']/(0x1469+-0xa5b+-0xa0c),_0x1ac608=Math['sin'](_0x59e028),_0x5d5257=Math['cos'](_0x59e028)*_0x3b156f,_0x231043=_0x371396,_0x10add9=_0x1ac608*_0x3b156f;let _0x1b2077=-0xc5*-0x29+0x1f08+-0x3e94-_0x3178ab/_0x55f1cb,_0x35344c=-0xaf4*0x2+0x1*0x22a3+-0xcba-_0x3aa1ba/_0x26e409;_0x33c079['push'](_0x5d5257*_0x1b5832,_0x231043*_0x1b5832+_0x50f4f5,_0x10add9*_0x1b5832),_0x3a3625['push'](_0x5d5257,_0x231043,_0x10add9),_0xbbe0ae['push'](_0x1b2077,0x15fd+0x470+-0x1a6c-_0x35344c),_0x1b2077=_0x1b2077*si+zs,_0x35344c=_0x35344c*si+zs,_0x1b2077/=-0xbbe+0xe05*0x1+-0x244,_0x35344c/=0x1a19+0x67*0x5e+-0x28*0x199,_0x1b2077+=(-0x1f*0xb2+0x1787*0x1+-0x1f8)/(0x1c6e*0x1+-0xb2d*-0x2+-0x32c5),_0x4139e6['push'](_0x1b2077,0x1029*-0x1+0x1e8f+-0xe65-_0x35344c);}}_0x50d241=(_0xc902f+(-0x39f+-0x213f+-0x1*-0x24df))*(_0x58887e+(-0x51a*-0x7+0x1cf6*-0x1+-0x9d*0xb));for(let _0x80805e=0x37+-0x1b*-0x31+-0x562;_0x80805e<_0x26e409;++_0x80805e)for(let _0x340b07=-0xfc0+0x825+0x3b*0x21;_0x340b07<_0x55f1cb;++_0x340b07){const _0x333fdf=_0x80805e*(_0x55f1cb+(-0x9*0x229+-0x26dd+0x3a4f))+_0x340b07,_0x303ed0=_0x333fdf+_0x55f1cb+(0x50b*-0x1+-0x76d*0x1+0xc79);_0xeb68a5['push'](_0x50d241+_0x333fdf+(-0xb+-0x11ce+0x11da),_0x50d241+_0x303ed0,_0x50d241+_0x333fdf),_0xeb68a5['push'](_0x50d241+_0x333fdf+(0x1*0xa52+-0x1ed6*-0x1+-0x23*0x12d),_0x50d241+_0x303ed0+(0x17*-0x99+-0x1*-0xab0+0x310),_0x50d241+_0x303ed0);}for(let _0x15991a=0x1424+0x140*-0x15+0x61c;_0x15991a<=_0x26e409;_0x15991a++){const _0x4b2016=Math['PI']*(-0x841+0xe8*-0x1e+0x2371+0.5)+_0x15991a*Math['PI']*(-0x75*-0x26+-0xacb+-0x11*0x63+0.5)/_0x26e409,_0x42ad73=Math['sin'](_0x4b2016),_0x4feab3=Math['cos'](_0x4b2016);for(let _0x22b62c=0x1e2f*-0x1+0x1*0x9e9+0x1446;_0x22b62c<=_0x55f1cb;_0x22b62c++){const _0x4ad9be=_0x22b62c*(-0x43d*0x1+0x205+-0x11d*-0x2)*Math['PI']/_0x55f1cb-Math['PI']/(-0x2*-0xd6e+0xc77+-0x2751*0x1),_0x4555f2=Math['sin'](_0x4ad9be),_0x288a28=Math['cos'](_0x4ad9be)*_0x42ad73,_0x12b9c6=_0x4feab3,_0xb9b860=_0x4555f2*_0x42ad73;let _0xbc6ddb=0x2000+0x3b1+0x8*-0x476-_0x22b62c/_0x55f1cb,_0x1e7c92=-0x117b*-0x1+-0xa3e+-0x4*0x1cf-_0x15991a/_0x26e409;_0x33c079['push'](_0x288a28*_0x1b5832,_0x12b9c6*_0x1b5832-_0x50f4f5,_0xb9b860*_0x1b5832),_0x3a3625['push'](_0x288a28,_0x12b9c6,_0xb9b860),_0xbbe0ae['push'](_0xbc6ddb,0x1d86+0xa*-0x136+-0x1169-_0x1e7c92),_0xbc6ddb=_0xbc6ddb*si+zs,_0x1e7c92=_0x1e7c92*si+zs,_0xbc6ddb/=-0x1*0x1ed4+-0x1*-0x1d2c+0x1ab*0x1,_0x1e7c92/=-0x1*-0x1855+0xc7a+-0x24cc,_0xbc6ddb+=(-0x1843*-0x1+-0x269e+0x1*0xe5d)/(0xcee+-0x43*0x4+-0xbdf),_0x4139e6['push'](_0xbc6ddb,0x25b4+0x4e6*0x4+0x394b*-0x1-_0x1e7c92);}}_0x50d241=(_0xc902f+(-0xa*0x346+-0x12*-0xd9+0x117b))*(_0x58887e+(-0x1a5*-0x11+0x7f4*-0x2+0x1*-0xc0c))+(_0x55f1cb+(-0x2*-0x5e5+0x26e3+-0x32ac))*(_0x26e409+(0x1440+0x2141+-0x3580));for(let _0x4d6d7f=0x1dd8+0x13a6+0x712*-0x7;_0x4d6d7f<_0x26e409;++_0x4d6d7f)for(let _0x3e6d79=0x198+-0x232c+0x2194;_0x3e6d79<_0x55f1cb;++_0x3e6d79){const _0x21bfb1=_0x4d6d7f*(_0x55f1cb+(-0x10d0*-0x1+-0xbc*0xa+-0x977))+_0x3e6d79,_0x2d8faf=_0x21bfb1+_0x55f1cb+(0xac7+-0x3*0xba2+0xc10*0x2);_0xeb68a5['push'](_0x50d241+_0x21bfb1+(0x99*-0x9+-0x93+0x5f5),_0x50d241+_0x2d8faf,_0x50d241+_0x21bfb1),_0xeb68a5['push'](_0x50d241+_0x21bfb1+(0x1bb4+0x9*0x329+-0x3824),_0x50d241+_0x2d8faf+(0x1d29+0x22d1*-0x1+0x5a9),_0x50d241+_0x2d8faf);}}else{if(_0x50d241=(_0xc902f+(-0x13*0x13+-0x2aa+0x414))*(_0x58887e+(-0x1a9e+0xa87*-0x1+-0x2526*-0x1)),_0x17c617>0x21b*-0x4+-0x1*-0x1db7+-0x154b)for(let _0xb734b7=0xd54*0x1+-0x241c+-0x9*-0x288;_0xb734b7<_0x58887e;_0xb734b7++){const _0x33407e=_0xb734b7/_0x58887e*(-0x3a*-0x25+-0x2fa*-0xd+-0x96a*0x5)*Math['PI'],_0x3f9fbe=Math['sin'](_0x33407e),_0x59a36e=-_0x3fa26f/(0x9b2+0xaae+0x16*-0xed),_0x2b7c55=Math['cos'](_0x33407e);let _0x14b08e=0x1c6+0xf6a+-0x53*0x35-(_0x3f9fbe+(-0xf04+-0x1c91+0x7*0x63a))/(-0x11*0x7+0x1fa1+0x3e5*-0x8),_0x599402=(_0x2b7c55+(-0x2*0x375+0x198+-0x1d*-0x2f))/(0xddb+-0x20a7+0x12ce);_0x33c079['push'](_0x3f9fbe*_0x17c617,_0x59a36e,_0x2b7c55*_0x17c617),_0x3a3625['push'](0x124+-0x5*-0x5e9+-0x1eb1,-(-0x1*0x114a+0xb3*-0x22+-0x1*-0x2911),0xc00+0xe4b*0x1+-0x7f*0x35),_0xbbe0ae['push'](_0x14b08e,0x14d7+-0x1dc*-0x1+-0x16b2-_0x599402),_0x14b08e=_0x14b08e*si+zs,_0x599402=_0x599402*si+zs,_0x14b08e/=-0x853*0x1+-0x2*-0x1048+-0x183a,_0x599402/=-0x11c5+0xe5*-0x19+0x2825,_0x14b08e+=(0xe9e*-0x1+0x515+-0x3*-0x32e)/(-0x1919+-0x3+-0x3b*-0x6d),_0x4139e6['push'](_0x14b08e,0xbc*0x20+-0x601+0x2*-0x8bf-_0x599402),_0xb734b7>-0x18*-0x8b+0x20a4+-0x513*0x9&&_0xeb68a5['push'](_0x50d241,_0x50d241+_0xb734b7,_0x50d241+_0xb734b7-(-0xf*-0x12e+0x109b+-0x1b7*0x14));}if(_0x50d241+=_0x58887e,_0x1b5832>0xcc+-0xfc2+0xef6)for(let _0x20c2bc=-0x3*-0x695+-0x9c7+-0x1*0x9f8;_0x20c2bc<_0x58887e;_0x20c2bc++){const _0x1aeb64=_0x20c2bc/_0x58887e*(0x1d12+-0x5d2*-0x5+-0x3a2a)*Math['PI'],_0x202b31=Math['sin'](_0x1aeb64),_0x165709=_0x3fa26f/(0x1e19+0x10ee+0x2f05*-0x1),_0x2905f0=Math['cos'](_0x1aeb64);let _0x40750a=-0x116c+-0x6dd+0x184a-(_0x202b31+(-0x1*-0x2e3+-0x1bab+0x18c9))/(0x5*0x8d+-0x69c*-0x4+-0x1d2f),_0x1d059b=(_0x2905f0+(0x1*0x2449+-0x18ed+-0xb5b))/(-0x1b9f+0x26d6+-0xb35);_0x33c079['push'](_0x202b31*_0x1b5832,_0x165709,_0x2905f0*_0x1b5832),_0x3a3625['push'](0x11c9+0xaaf+-0x1c78,0x1853+-0x1825*0x1+-0x1*0x2d,-0x2*-0x7c+-0xe18+0x3*0x460),_0xbbe0ae['push'](_0x40750a,0x1a6f+0x6*0x283+-0x2980-_0x1d059b),_0x40750a=_0x40750a*si+zs,_0x1d059b=_0x1d059b*si+zs,_0x40750a/=-0x1e77*-0x1+-0xaf3*0x1+-0x1381,_0x1d059b/=-0x18a9+0xe1a+0xa92,_0x40750a+=(0x1bdf+0x16e9+-0x32c6)/(0x523*0x1+-0x245c+0x4*0x7cf),_0x4139e6['push'](_0x40750a,0xe1d*0x2+0x1146+-0x2d7f-_0x1d059b),_0x20c2bc>0x1e4c+-0x1aef+0x2b*-0x14&&_0xeb68a5['push'](_0x50d241,_0x50d241+_0x20c2bc-(0x1414+0x767+-0x1b7a),_0x50d241+_0x20c2bc);}}this['positions']=_0x33c079,this['normals']=_0x3a3625,this['uvs']=_0xbbe0ae,this['uvs1']=_0x4139e6,this['indices']=_0xeb68a5;}}class GA extends gm{constructor(_0x314816={}){const _0x449de9=_0x314816['radius']??-0x5*-0x6b2+-0x102+-0x2078+0.3,_0x527d2e=_0x314816['height']??-0x14dd+0x223*-0xa+0x9f*0x44,_0x1b530b=_0x314816['heightSegm'+'ents']??0x16f*-0x5+0x1*-0x199d+-0x7*-0x4af,_0x19c681=_0x314816['sides']??0x1*-0xbbc+0x60*-0x67+0x3270;super(_0x449de9,_0x449de9,_0x527d2e-(-0x2a*-0x16+-0xb56*0x2+0x1312)*_0x449de9,_0x1b530b,_0x19c681,!(0xab*-0x30+-0xa8a+0x29*0x10a)),_0x314816['calculateT'+'angents']&&(this['tangents']=Mr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class HA extends gm{constructor(_0x31c333={}){const _0x259b92=_0x31c333['baseRadius']??-0x1e31*0x1+-0xc28+0x2a59+0.5,_0x3fa4e2=_0x31c333['peakRadius']??-0x76*-0x4+-0x1e*-0xda+-0x1b64,_0x122406=_0x31c333['height']??-0x391+-0x1fde+-0x17a*-0x18,_0x515372=_0x31c333['heightSegm'+'ents']??0x247a+0x47b+-0x28f0,_0x4fd59d=_0x31c333['capSegment'+'s']??-0x60e*0x4+0xb6+0x1794;super(_0x259b92,_0x3fa4e2,_0x122406,_0x515372,_0x4fd59d,!(0x355*-0x4+0x4cd*0x1+-0x8*-0x111)),_0x31c333['calculateT'+'angents']&&(this['tangents']=Mr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class WA extends gm{constructor(_0x38f58a={}){const _0x5e1c75=_0x38f58a['radius']??0x5ef*0x1+0x1*0x2222+-0x2811+0.5,_0x53ad35=_0x38f58a['height']??0x1240+0x2*-0xa7+-0x10f1,_0xe0f1dc=_0x38f58a['heightSegm'+'ents']??-0x1*-0x162+0x19bf+-0x1b1c,_0x2edf89=_0x38f58a['capSegment'+'s']??-0xd02+0x7*0x254+-0x112*0x3;super(_0x5e1c75,_0x5e1c75,_0x53ad35,_0xe0f1dc,_0x2edf89,!(0x1568+-0x4b2*0x8+0x7*0x24f)),_0x38f58a['calculateT'+'angents']&&(this['tangents']=Mr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class $A extends Ta{constructor(_0x3d3f91={}){super();const _0x5171c2=_0x3d3f91['halfExtent'+'s']??new J(0xf53+-0x15ed+0x69a+0.5,-0x1*0x47f+-0x1*-0xce+-0x1b*-0x23+0.5),_0x28307f=_0x3d3f91['widthSegme'+'nts']??-0x889*-0x1+-0xe57+0x5d3,_0x3963a2=_0x3d3f91['lengthSegm'+'ents']??-0x1*-0x7ba+0x1ee5+-0x269a,_0x3c7179=[],_0x1d8e56=[],_0x186d75=[],_0x3d45ba=[];let _0x9c6b8a=0x237b+0x421+0x3c*-0xa9;for(let _0x4f16ea=0x25*0xcf+0x5*0x599+0x22*-0x1b4;_0x4f16ea<=_0x28307f;_0x4f16ea++)for(let _0xb55418=-0xcb*0x2d+0x101e*0x1+-0x1*-0x1391;_0xb55418<=_0x3963a2;_0xb55418++){const _0x201d9d=-_0x5171c2['x']+(0x862*-0x4+-0x83d+0x29c7)*_0x5171c2['x']*_0x4f16ea/_0x28307f,_0x2785d1=-0x878+0x1557+-0xcdf,_0x552f05=-(-_0x5171c2['y']+(0x29*0x74+0x9b*0x1f+-0x2557)*_0x5171c2['y']*_0xb55418/_0x3963a2),_0xb9cf95=_0x4f16ea/_0x28307f,_0x29f1e7=_0xb55418/_0x3963a2;_0x3c7179['push'](_0x201d9d,_0x2785d1,_0x552f05),_0x1d8e56['push'](-0x1*-0x60d+0x1*-0x1497+0xe8a,-0x10f*-0x1f+0x1*-0x2476+-0x3a6*-0x1,-0x152*0xf+0x2195*0x1+-0x1*0xdc7),_0x186d75['push'](_0xb9cf95,0x1222+0xb04+0x3*-0x9b7-_0x29f1e7),_0x4f16ea<_0x28307f&&_0xb55418<_0x3963a2&&(_0x3d45ba['push'](_0x9c6b8a+_0x3963a2+(-0xdd7+-0x2*-0x5+0xdce),_0x9c6b8a+(-0x6a2+-0x1*0xf31+0x15d4),_0x9c6b8a),_0x3d45ba['push'](_0x9c6b8a+_0x3963a2+(0xb*0x95+0x732+0x244*-0x6),_0x9c6b8a+_0x3963a2+(0x12*-0x14e+-0x3e2+-0x920*-0x3),_0x9c6b8a+(0x155e+-0x7db*0x3+0x234))),_0x9c6b8a++;}this['positions']=_0x3c7179,this['normals']=_0x1d8e56,this['uvs']=_0x186d75,this['uvs1']=_0x186d75,this['indices']=_0x3d45ba,_0x3d3f91['calculateT'+'angents']&&(this['tangents']=Mr(_0x3c7179,_0x1d8e56,_0x186d75,_0x3d45ba));}}class XA extends Ta{constructor(_0x51b631={}){super();const _0xdc2f46=_0x51b631['tubeRadius']??-0x12f*0x1d+0x1b01*0x1+0x3a9*0x2+0.2,_0x1e1974=_0x51b631['ringRadius']??-0x248e+0x2691+-0x67*0x5+0.3,_0x2eb079=(_0x51b631['sectorAngl'+'e']??-0x43c+0x220a+-0x2d7*0xa)*Y['DEG_TO_RAD'],_0x49e057=_0x51b631['segments']??-0x22f+-0x5*0x5cb+0x1f44,_0x4b9a22=_0x51b631['sides']??0xa*0x2ce+0x104e+0x6*-0x761,_0x3eb082=[],_0x24342b=[],_0x2a8080=[],_0x4ac2c6=[];for(let _0x37493a=0xf7c*0x1+-0x26*-0xa7+-0x80e*0x5;_0x37493a<=_0x4b9a22;_0x37493a++)for(let _0x4fb28d=-0x790*-0x2+-0x1946+0xa26;_0x4fb28d<=_0x49e057;_0x4fb28d++){const _0x2c6462=Math['cos'](_0x2eb079*_0x4fb28d/_0x49e057)*(_0x1e1974+_0xdc2f46*Math['cos']((0x12db+0x8d*-0x1a+0x13*-0x3d)*Math['PI']*_0x37493a/_0x4b9a22)),_0x144016=Math['sin']((0x1062*-0x2+-0x239a+0x1118*0x4)*Math['PI']*_0x37493a/_0x4b9a22)*_0xdc2f46,_0x48868d=Math['sin'](_0x2eb079*_0x4fb28d/_0x49e057)*(_0x1e1974+_0xdc2f46*Math['cos']((-0x20f7*0x1+0xcad+-0x4*-0x513)*Math['PI']*_0x37493a/_0x4b9a22)),_0x29aee4=Math['cos'](_0x2eb079*_0x4fb28d/_0x49e057)*Math['cos']((-0x242f*-0x1+0xa81*-0x3+0x2*-0x255)*Math['PI']*_0x37493a/_0x4b9a22),_0x5eb94d=Math['sin']((0xed5+-0x12*0xd4+0x15)*Math['PI']*_0x37493a/_0x4b9a22),_0x4fe36c=Math['sin'](_0x2eb079*_0x4fb28d/_0x49e057)*Math['cos']((-0x1daf+0x26f2+0x1*-0x941)*Math['PI']*_0x37493a/_0x4b9a22),_0xfe31fd=_0x37493a/_0x4b9a22,_0x2e0392=0x1ee3*-0x1+-0x1379+-0x1*-0x325d-_0x4fb28d/_0x49e057;if(_0x3eb082['push'](_0x2c6462,_0x144016,_0x48868d),_0x24342b['push'](_0x29aee4,_0x5eb94d,_0x4fe36c),_0x2a8080['push'](_0xfe31fd,0xdd2+0x3f5*0x7+-0x2984-_0x2e0392),_0x37493a<_0x4b9a22&&_0x4fb28d<_0x49e057){const _0x5017da=_0x37493a*(_0x49e057+(0x34*-0x15+-0x2e8+0x72d))+_0x4fb28d,_0x412773=(_0x37493a+(0x6*-0x28d+-0x2c*0xbb+0xfd1*0x3))*(_0x49e057+(0x26ce*0x1+-0x196b+-0x3*0x476))+_0x4fb28d,_0x4f798f=_0x37493a*(_0x49e057+(-0x7*-0x283+0x22a8+-0x1a1e*0x2))+(_0x4fb28d+(-0x250d+0x239e+0xb8*0x2)),_0x2c289b=(_0x37493a+(-0xd*-0x6b+-0x6*-0x3ae+-0x2*0xdc1))*(_0x49e057+(-0x7e1+0x24f3+-0x1d11))+(_0x4fb28d+(0x1*0x13f7+0x26f9+0x3*-0x13a5));_0x4ac2c6['push'](_0x5017da,_0x412773,_0x4f798f),_0x4ac2c6['push'](_0x412773,_0x2c289b,_0x4f798f);}}this['positions']=_0x3eb082,this['normals']=_0x24342b,this['uvs']=_0x2a8080,this['uvs1']=_0x2a8080,this['indices']=_0x4ac2c6,_0x51b631['calculateT'+'angents']&&(this['tangents']=Mr(_0x3eb082,_0x24342b,_0x2a8080,_0x4ac2c6));}}class qA{constructor(_0x13e734,_0x1452c0){h(this,'processedC'+'ache',new Map()),h(this,'definition'+'sCache',new Map()),h(this,'_generator'+'s',new Map()),(this['_device']=_0x13e734,this['_isClearin'+'gCache']=!(-0x16b+-0x1301+-0x53*-0x3f),this['_precached']=!(0x2*-0x1063+-0x1d*0x143+0x455e),this['_programsC'+'ollection']=[],this['_defaultSt'+'dMatOption']=new dl(),this['_defaultSt'+'dMatOption'+'Min']=new dl());const _0x22690c=new vv();_0x1452c0['shaderOptB'+'uilder']['updateRef'](this['_defaultSt'+'dMatOption'],{},_0x22690c,_0x1452c0,null,[],Aa,null),_0x1452c0['shaderOptB'+'uilder']['updateMinR'+'ef'](this['_defaultSt'+'dMatOption'+'Min'],{},_0x1452c0,null,cm,null),_0x13e734['on']('destroy:sh'+'ader',_0x1fa732=>{this['removeFrom'+'Cache'](_0x1fa732);});}['destroy'](){this['clearCache']();}['register'](_0x17e229,_0x2cda44){this['_generator'+'s']['has'](_0x17e229)||this['_generator'+'s']['set'](_0x17e229,_0x2cda44);}['unregister'](_0x35e97f){this['_generator'+'s']['has'](_0x35e97f)&&this['_generator'+'s']['delete'](_0x35e97f);}['isRegister'+'ed'](_0x36b36d){return this['_generator'+'s']['has'](_0x36b36d);}['generateSh'+'aderDefini'+'tion'](_0xdafe5f,_0x35d724,_0x13a29c,_0x153f9c){var _0x2bbd4a,_0x15d8fd;let _0x1860fb=this['definition'+'sCache']['get'](_0x13a29c);if(!_0x1860fb){let _0x548869;(_0x2bbd4a=_0x153f9c['litOptions'])!=null&&_0x2bbd4a['lights']&&(_0x548869=_0x153f9c['litOptions']['lights'],_0x153f9c['litOptions']['lights']=_0x548869['map'](_0x5dbcbd=>{const _0x5adff6=_0x5dbcbd['clone']?_0x5dbcbd['clone']():_0x5dbcbd;return _0x5adff6['key']=_0x5dbcbd['key'],_0x5adff6;})),this['storeNewPr'+'ogram'](_0x35d724,_0x153f9c),(_0x15d8fd=_0x153f9c['litOptions'])!=null&&_0x15d8fd['lights']&&(_0x153f9c['litOptions']['lights']=_0x548869),this['_precached']&&w['log']('ProgramLib'+'rary#getPr'+'ogram:\x20Cac'+'he\x20miss\x20fo'+'r\x20shader\x20'+_0x35d724+'\x20key\x20'+_0x13a29c+('\x20after\x20sha'+'ders\x20preca'+'ching'));const _0x134e55=this['_device'];_0x1860fb=_0xdafe5f['createShad'+'erDefiniti'+'on'](_0x134e55,_0x153f9c),_0x1860fb['name']=_0x1860fb['name']??(_0x153f9c['pass']?_0x35d724+'-pass:'+_0x153f9c['pass']:_0x35d724),this['definition'+'sCache']['set'](_0x13a29c,_0x1860fb);}return _0x1860fb;}['getCachedS'+'hader'](_0xb87868){return this['processedC'+'ache']['get'](_0xb87868);}['setCachedS'+'hader'](_0x4e3b59,_0x178fbc){this['processedC'+'ache']['set'](_0x4e3b59,_0x178fbc);}['getProgram'](_0x25e657,_0x2e5a9e,_0x2eff52,_0x50a30d){const _0x5d9da3=this['_generator'+'s']['get'](_0x25e657);if(!_0x5d9da3)return w['warn']('ProgramLib'+'rary#getPr'+'ogram:\x20No\x20'+'program\x20li'+'brary\x20func'+'tions\x20regi'+'stered\x20for'+':\x20'+_0x25e657),null;const _0x43612b=_0x5d9da3['generateKe'+'y'](_0x2e5a9e),_0x2d75cf=hi(_0x43612b),_0x15937b=_0x2eff52['generateKe'+'y'](this['_device']),_0x397a29=hi(_0x15937b),_0x59e1c6=_0x2d75cf+'#'+_0x397a29;let _0x1d3a7a=this['getCachedS'+'hader'](_0x59e1c6);if(!_0x1d3a7a){const _0x5cdd7a=this['generateSh'+'aderDefini'+'tion'](_0x5d9da3,_0x25e657,_0x2d75cf,_0x2e5a9e);w['assert'](_0x5cdd7a);let _0x196f1a='',_0x27994a;_0x2e5a9e['pass']!==void(-0x1*-0x150a+-0x4f+-0x14bb)&&(_0x27994a=Si['get'](this['_device'])['getByIndex'](_0x2e5a9e['pass']),_0x196f1a='-'+_0x27994a['name']),this['_device']['fire']('shader:gen'+'erate',{'userMaterialId':_0x50a30d,'shaderPassInfo':_0x27994a,'definition':_0x5cdd7a});const _0x26482a={'name':''+_0x5cdd7a['name']+_0x196f1a+'-proc','attributes':_0x5cdd7a['attributes'],'vshader':_0x5cdd7a['vshader'],'vincludes':_0x5cdd7a['vincludes'],'fincludes':_0x5cdd7a['fincludes'],'fshader':_0x5cdd7a['fshader'],'processingOptions':_0x2eff52,'shaderLanguage':_0x5cdd7a['shaderLang'+'uage'],'meshUniformBufferFormat':_0x5cdd7a['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x5cdd7a['meshBindGr'+'oupFormat']};_0x1d3a7a=new qy(this['_device'],_0x26482a),w['call'](()=>{_0x1d3a7a['_generatio'+'nKey']=_0x43612b,_0x1d3a7a['_processin'+'gKey']=_0x15937b;}),this['setCachedS'+'hader'](_0x59e1c6,_0x1d3a7a);}return _0x1d3a7a;}['storeNewPr'+'ogram'](_0x440d7a,_0x23b7f9){let _0xcf15a1={};if(_0x440d7a==='standard'){const _0x4cd485=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x23b7f9['pass']);for(const _0x243d8c in _0x23b7f9)(_0x23b7f9['hasOwnProp'+'erty'](_0x243d8c)&&_0x4cd485[_0x243d8c]!==_0x23b7f9[_0x243d8c]||_0x243d8c==='pass')&&(_0xcf15a1[_0x243d8c]=_0x23b7f9[_0x243d8c]);for(const _0x5ccd53 in _0x23b7f9['litOptions'])_0xcf15a1[_0x5ccd53]=_0x23b7f9['litOptions'][_0x5ccd53];}else _0xcf15a1=_0x23b7f9;this['_programsC'+'ollection']['push'](JSON['stringify']({'name':_0x440d7a,'options':_0xcf15a1}));}['dumpProgra'+'ms'](){let _0x3f90eb='let\x20device'+'\x20=\x20pc.app\x20'+'?\x20pc.app.g'+'raphicsDev'+'ice\x20:\x20pc.A'+'pplication'+'.getApplic'+'ation().gr'+'aphicsDevi'+'ce;\x0a';_0x3f90eb+='let\x20shader'+'s\x20=\x20[',this['_programsC'+'ollection'][0x71f*-0x1+-0x3c2+0xae1]&&(_0x3f90eb+='\x0a\x09'+this['_programsC'+'ollection'][0x1c74+-0x1*-0x48b+-0x1*0x20ff]);for(let _0x7c9fc0=0x11*-0x125+0x1*-0x5e7+-0x2b*-0x97;_0x7c9fc0<this['_programsC'+'ollection']['length'];++_0x7c9fc0)_0x3f90eb+=',\x0a\x09'+this['_programsC'+'ollection'][_0x7c9fc0];_0x3f90eb+='\x0a];\x0a',_0x3f90eb+='pc.getProg'+'ramLibrary'+'(device).p'+'recompile('+'shaders);\x0a',_0x3f90eb+='if\x20(pc.ver'+'sion\x20!=\x20\x22'+hn+('\x22\x20||\x20pc.re'+'vision\x20!=\x20'+'\x22')+$S+'\x22)\x0a',_0x3f90eb+='\x09console.w'+'arn(\x22preco'+'mpile-shad'+'ers.js:\x20en'+'gine\x20versi'+'on\x20mismatc'+'h,\x20rebuild'+'\x20shaders\x20l'+'ib\x20with\x20cu'+'rrent\x20engi'+'ne\x22);';const _0x12bfc4=document['createElem'+'ent']('a');_0x12bfc4['setAttribu'+'te']('href','data:text/'+'plain;char'+'set=utf-8,'+encodeURIComponent(_0x3f90eb)),_0x12bfc4['setAttribu'+'te']('download','precompile'+'-shaders.j'+'s'),_0x12bfc4['style']['display']='none',document['body']['appendChil'+'d'](_0x12bfc4),_0x12bfc4['click'](),document['body']['removeChil'+'d'](_0x12bfc4);}['clearCache'](){this['_isClearin'+'gCache']=!(0x1*-0x11f5+-0x1cf7+0x1ce*0x1a),this['processedC'+'ache']['forEach'](_0x585df2=>{_0x585df2['destroy']();}),this['processedC'+'ache']['clear'](),this['_isClearin'+'gCache']=!(0xf*-0x1d9+-0x195c+0x3514);}['removeFrom'+'Cache'](_0x287963){this['_isClearin'+'gCache']||this['processedC'+'ache']['forEach']((_0x202b16,_0x1ecd5a)=>{_0x287963===_0x202b16&&this['processedC'+'ache']['delete'](_0x1ecd5a);});}['_getDefaul'+'tStdMatOpt'+'ions'](_0x342e89){const _0x114814=Si['get'](this['_device'])['getByIndex'](_0x342e89);return _0x342e89===Zn||_0x342e89===Rl||_0x114814['isShadow']?this['_defaultSt'+'dMatOption'+'Min']:this['_defaultSt'+'dMatOption'];}['precompile'](_0x16c5cd){if(_0x16c5cd){const _0x2c7d50=new Array(_0x16c5cd['length']);for(let _0x38b4d7=0x17*-0x139+-0x13*-0x4f+0x32e*0x7;_0x38b4d7<_0x16c5cd['length'];_0x38b4d7++){if(_0x16c5cd[_0x38b4d7]['name']==='standard'){const _0x3d95db=_0x16c5cd[_0x38b4d7]['options'],_0xc67404=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x3d95db['pass']);for(const _0x5b058d in _0xc67404)_0xc67404['hasOwnProp'+'erty'](_0x5b058d)&&_0x3d95db[_0x5b058d]===void(0x1e6c+0x3d5+-0x2241)&&(_0x3d95db[_0x5b058d]=_0xc67404[_0x5b058d]);}_0x2c7d50[_0x38b4d7]=this['getProgram'](_0x16c5cd[_0x38b4d7]['name'],_0x16c5cd[_0x38b4d7]['options']);}}this['_precached']=!(-0x5f*-0x4+-0x265c+0x24e0);}}async function jA(){const _0x32337a=new Float32Array(-0x122e+-0x18c9+0x2af8),_0x2ea2b8=new Int32Array(_0x32337a['buffer']);let _0x262ff8=-0x27f*-0x3+0xad3+0x4*-0x494,_0x2d402b={};self['onmessage']=async _0x42bcc0=>{const {data:_0x3715ea}=_0x42bcc0;switch(_0x3715ea['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x353766(_0x3715ea['properties'],_0x3715ea['timeIndex'],_0x3715ea['timeOption']);break;case'releaseSeq'+'Data':_0x1bffa6(_0x3715ea['index']);break;case'releaseAll'+'SeqData':_0x919c29();break;case'destroyWor'+'ker':_0x324647();break;}};class _0x4aebba{constructor(_0x2c7e6e=-0x3d0+0x3d*0x17+-0x1ab,_0x33d5c5=-0x7a*-0x1a+0x1*0x1a43+-0x26a7,_0x1aeb46=0x1*0x7bb+0x1498*-0x1+0xcdd,_0x340c61=0x57*0x4+-0x9*-0xa+0x1*-0x1b5){this['x']=_0x2c7e6e,this['y']=_0x33d5c5,this['z']=_0x1aeb46,this['w']=_0x340c61;}['set'](_0x430017,_0x470cb1,_0x4ccc12,_0x45447a){return this['x']=_0x430017,this['y']=_0x470cb1,this['z']=_0x4ccc12,this['w']=_0x45447a,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x4ace34=this){let _0x3b1528=_0x4ace34['length']();return _0x3b1528===-0x17*0x83+0x1329+-0x2c*0x2b?(this['x']=this['y']=this['z']=-0x2db*-0x7+-0x1*-0x1010+-0x240d,this['w']=0x196f+0x192e+-0x329c):(_0x3b1528=(0xf7b+0x1*0x281+-0x1*0x11fb)/_0x3b1528,this['x']=_0x4ace34['x']*_0x3b1528,this['y']=_0x4ace34['y']*_0x3b1528,this['z']=_0x4ace34['z']*_0x3b1528,this['w']=_0x4ace34['w']*_0x3b1528),this;}['mulScalar'](_0x3ead1b,_0x2f1b07=this){return this['x']=_0x2f1b07['x']*_0x3ead1b,this['y']=_0x2f1b07['y']*_0x3ead1b,this['z']=_0x2f1b07['z']*_0x3ead1b,this['w']=_0x2f1b07['w']*_0x3ead1b,this;}}const _0xc987cb=_0x3d1b92=>{_0x32337a[-0x6f*-0x1d+-0xf6*0x1d+0x9*0x1b3]=_0x3d1b92;const _0x3fe9a3=_0x2ea2b8[0x92*0x13+0x1*0x23bf+-0x2e95];let _0x543dee=_0x3fe9a3>>0xa7b+-0xfe4+-0x1d3*-0x3&0x1314+-0xc5*0x59+0xb169,_0x118229=_0x3fe9a3>>0x1f49*0x1+-0x191b+-0x622&-0x10c7*-0x1+0xa19+-0x12e1;const _0x420da3=_0x3fe9a3>>0x6*-0xef+0x31b*-0x9+0x2*0x10d2&-0xc2e*0x2+0x48*-0x7b+0x3bf3;return _0x420da3<0x1894+0x2357*0x1+-0x3b84?_0x543dee:_0x420da3>-0x1*0x37f+0x270e+0x67*-0x57?(_0x543dee|=-0xfb*-0x63+0x12d*-0x49+0x1c31*0x4,_0x543dee|=(_0x420da3===-0x26c3+-0xbf3+0x7*0x763?-0x7f2*0x4+-0x1f42+0x2*0x1f85:0x114a+-0x1936+0x7ed)&&_0x3fe9a3&-0xbf67a9+-0x3e884e+-0x17deff6*-0x1,_0x543dee):_0x420da3<-0x59*0x1f+-0x1536+0x1037*0x2?(_0x118229|=0x971*-0x2+0xa*-0x21b+-0x3b*-0xd0,_0x543dee|=(_0x118229>>-0x2e7*0x9+-0xd*-0x13+-0x1*-0x199a-_0x420da3)+(_0x118229>>0x5*0x3ad+-0x251a+-0x16*-0xdf-_0x420da3&0x21e*-0xb+0x3*-0x6b3+0x2*0x15b2),_0x543dee):(_0x543dee|=_0x420da3-(-0x36f*0x3+0xc1*0x16+-0x5d9*0x1)<<0x1c7a+-0xb63+0x5*-0x369|_0x118229>>-0x25*-0xdf+-0x186f+-0x7cb,_0x543dee+=_0x118229&-0x15b4*0x1+-0x3a1*0x4+-0x2439*-0x1,_0x543dee);},_0x57e10d=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x3f44c2=-0x190c+0x1cbb+-0x3af;_0x3f44c2<0x7*0x79+-0xb*-0x2ad+0xadb*-0x3;++_0x3f44c2)if(!_0x2d402b['f_rest_'+_0x3f44c2])return _0x3f44c2;return 0x2647+-0x1e*0xb+-0x24d0;})())]??0x2cf*-0x1+0x458*-0x4+-0x142f*-0x1),_0x353766=(_0x19a828,_0x3152cd,_0x5796cc)=>{const _0x9a2ca=!!_0x19a828['time_index'];_0x9a2ca||(_0x19a828['time_index']=new Float32Array(-0x196e+-0x44+0x19b2)),_0x262ff8+=_0x19a828['x']['length']??0x2279+-0x1f*0x28+0x5ed*-0x5;const _0x3c16ca=Object['keys'](_0x19a828);for(let _0x5344f3=-0x1835+-0x13d2*0x1+0x2c07;_0x5344f3<_0x3c16ca['length'];_0x5344f3++){const _0x496dbe=_0x3c16ca[_0x5344f3],_0x25cbe9=_0x19a828[_0x496dbe],_0x49a737=_0x2d402b[_0x496dbe]??new Float32Array(-0x15f4+0x3c4*-0x4+-0x941*-0x4);if(!_0x9a2ca&&_0x496dbe==='time_index'){const _0x5cb72a=new Float32Array(_0x262ff8);_0x5cb72a['fill'](_0x3152cd),_0x5cb72a['set'](_0x49a737,0x124+0x1181*-0x1+-0x1*-0x105d),_0x2d402b[_0x496dbe]=_0x5cb72a;}else{if(!_0x9a2ca&&_0x25cbe9&&_0x496dbe==='t'){const _0x118255=new Float32Array(_0x262ff8);if(_0x118255['set'](_0x49a737,-0x14e+-0x79*-0x41+-0x1d6b),_0x5796cc){for(let _0x107dce=_0x49a737['length'];_0x107dce<_0x262ff8;_0x107dce++)_0x25cbe9[_0x107dce-_0x49a737['length']]>-(0x74a+0x3e*0x60+-0x1e85)?_0x118255[_0x107dce]=_0x25cbe9[_0x107dce-_0x49a737['length']]+_0x5796cc[(-0xd*-0x296+-0xaec*0x1+0x2d6*-0x8)*_0x3152cd]:_0x118255[_0x107dce]=_0x25cbe9[_0x107dce-_0x49a737['length']];}_0x2d402b[_0x496dbe]=_0x118255;}else{if(_0x25cbe9){const _0x17e599=new Float32Array(_0x262ff8);_0x17e599['set'](_0x49a737,0x89*0x1f+0xb32*-0x2+-0x1*-0x5cd),_0x17e599['set'](_0x25cbe9,_0x49a737['length']),_0x2d402b[_0x496dbe]=_0x17e599;}}}}const _0x399821={};Object['keys'](_0x2d402b)['forEach'](_0x2832ca=>{_0x399821[_0x2832ca]=new Float32Array(_0x2d402b[_0x2832ca]['buffer']['slice']());});const _0x5ee5fa=Object['keys'](_0x399821)['map'](_0x32637e=>_0x399821[_0x32637e]['buffer']),_0x3f0d3d=_0x7f986(),_0x5bbd53=Object['keys'](_0x3f0d3d)['map'](_0x4178ea=>_0x3f0d3d[_0x4178ea]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x399821,'transformData':_0x3f0d3d},_0x5ee5fa['concat'](_0x5bbd53));},_0x7f986=()=>{const _0x180870=_0x2d402b['x']['length'],_0x70f148=_0x2d402b['x'],_0x120618=_0x2d402b['y'],_0x5b8938=_0x2d402b['z'],_0x2fe238=_0x2d402b['scale_0'],_0x2e9aaa=_0x2d402b['scale_1'],_0x5cc3d2=_0x2d402b['scale_2'],_0x247261=_0x2d402b['rot_1'],_0x4e206e=_0x2d402b['rot_2'],_0x849661=_0x2d402b['rot_3'],_0x3bc370=_0x2d402b['rot_0'],_0x1d5abd=_0x2d402b['motion_0'],_0x1e8d4a=_0x2d402b['motion_1'],_0x55e08c=_0x2d402b['motion_2'],_0x2d0bbd=_0x2d402b['t'],_0x416d1c=_0x2d402b['t_scale'],_0x32aeb9=_0x2d402b['time_index'],_0x182c11=_0x2d402b['f_dc_0'],_0x30f634=_0x2d402b['f_dc_1'],_0x1ba930=_0x2d402b['f_dc_2'],_0x373b90=_0x2d402b['opacity'],_0x440929=(_0x2d0bbd==null?void(-0xa*-0x146+-0x257b*0x1+0x18bf):_0x2d0bbd['length'])>0x1*0xfe5+0x3df*0x4+-0x115*0x1d,_0x288806=new Float32Array(_0x180870*(-0x565*0x7+-0x222f+-0x6d*-0xa9)),_0x184a5b=new Float32Array(_0x180870*(0xb0c+0x1e*0x101+-0x2927)),_0x155973=new Uint16Array(_0x180870*(-0x1d6b+0x220e+-0x4a0)),_0x4c11f0=new Float32Array(_0x180870*(-0x1*0x4e5+-0x953+0xe3b));let _0x3b4b09=null,_0x393612=null,_0x18c234=null,_0x5e1820=null;_0x440929&&(_0x3b4b09=new Float32Array(_0x180870*(-0x153b+0x509+-0x567*-0x3)),_0x393612=new Float32Array(_0x180870*(-0x1bb8+0x1239+0x4c1*0x2)),_0x18c234=new Float32Array(_0x180870*(-0x4b1*-0x1+-0x23e3*0x1+0x3*0xa67)),_0x5e1820=new Float32Array(_0x180870));const _0x5600db=new _0x4aebba(-0xbf1*0x1+0x1*-0x19fb+0x25ec,-0x222c+-0x1769+0x1*0x3995,0xe5d+0x1*-0x5d6+-0x1*0x887,-0xa1a*0x1+0x3*0x13f+0x3*0x21f);let _0xe31a93=-0x635+0x1*-0x86a+-0x13*-0xc5,_0xb223fe=-0x1*0x20fc+0x16f1*-0x1+0x37ed,_0x1a4f3c=0x9*-0x386+0x17f6+0x7c0,_0x1bd308=-0x2fc+-0x197b*0x1+0x1*0x1c77,_0x52ff22=-0x13a*-0x2+-0x1295+0x1021,_0xd459a3=0x22cb+-0x2*-0x1382+-0x49cf,_0x59bc6a=!(0x1d62*-0x1+0x3*-0x7+0x1d77*0x1);const _0x402944=new Float32Array(-0xd7c+-0x6*0x51a+0x2c1b),_0x12c7cc=new Float32Array(0xead+0x1a*-0x135+-0x1*-0x10b8),_0x43ce77=new Uint16Array(_0x180870*(0xae9+-0x12f9*0x1+0x814)),_0x45d0b4=-0x167a+-0x961*0x4+0x892*0x7+0.28209479177387814;for(let _0x17ea78=-0x1ee+0x67e*-0x3+0x1568;_0x17ea78<_0x180870;++_0x17ea78){const _0x1bcfd6=_0x182c11[_0x17ea78]*_0x45d0b4+(-0x198a+0x555+0x1435+0.5),_0x58b265=_0x30f634[_0x17ea78]*_0x45d0b4+(-0x1*0x3a5+0x4*0x810+-0x989*0x3+0.5),_0xaf4b3f=_0x1ba930[_0x17ea78]*_0x45d0b4+(0x2*-0x12aa+-0x666+0x2bba+0.5),_0x2703e2=_0x373b90[_0x17ea78];_0x43ce77[_0x17ea78*(0x2*0x112b+0x759+-0x29ab*0x1)+(-0x316*0x3+-0x175*-0x7+0xf1*-0x1)]=_0xc987cb(_0x1bcfd6),_0x43ce77[_0x17ea78*(0x29*0x5+-0x3b4+0x1*0x2eb)+(-0x16e1+-0x233*0x1+0x1915)]=_0xc987cb(_0x58b265),_0x43ce77[_0x17ea78*(-0x139+0x1*-0x16e5+0x1822)+(0x72*0x17+-0x26*-0x1c+-0x1*0xe64)]=_0xc987cb(_0xaf4b3f),_0x43ce77[_0x17ea78*(-0x7*-0x295+0x224*-0xa+0x359*0x1)+(0x1d2*-0x15+0x1523+0x111a)]=_0xc987cb(_0x2703e2);const _0x526a13=_0x70f148[_0x17ea78],_0xb06303=_0x120618[_0x17ea78],_0x27faab=_0x5b8938[_0x17ea78],_0x113cda=Math['max'](_0x2fe238[_0x17ea78],_0x2e9aaa[_0x17ea78],_0x5cc3d2[_0x17ea78]);if(isFinite(_0x526a13)&&isFinite(_0xb06303)&&isFinite(_0x27faab)&&isFinite(_0x113cda)){const _0x1fe6eb=(-0x1629+-0xd*0x1ff+-0x2*-0x180f)*Math['exp'](_0x113cda);_0x59bc6a?(_0x59bc6a=!(0x485+0xa3b+0x1*-0xebf),_0xe31a93=_0x526a13-_0x1fe6eb,_0xb223fe=_0xb06303-_0x1fe6eb,_0x1a4f3c=_0x27faab-_0x1fe6eb,_0x1bd308=_0x526a13+_0x1fe6eb,_0x52ff22=_0xb06303+_0x1fe6eb,_0xd459a3=_0x27faab+_0x1fe6eb):(_0xe31a93=Math['min'](_0xe31a93,_0x526a13-_0x1fe6eb),_0xb223fe=Math['min'](_0xb223fe,_0xb06303-_0x1fe6eb),_0x1a4f3c=Math['min'](_0x1a4f3c,_0x27faab-_0x1fe6eb),_0x1bd308=Math['max'](_0x1bd308,_0x526a13+_0x1fe6eb),_0x52ff22=Math['max'](_0x52ff22,_0xb06303+_0x1fe6eb),_0xd459a3=Math['max'](_0xd459a3,_0x27faab+_0x1fe6eb));}_0x5600db['set'](_0x247261[_0x17ea78],_0x4e206e[_0x17ea78],_0x849661[_0x17ea78],_0x3bc370[_0x17ea78]),_0x5600db['normalize'](),_0x5600db['w']<0x1*-0x47+-0xd09+0xd50&&_0x5600db['mulScalar'](-(-0x149+0xb9e+-0xa54)),_0x184a5b[_0x17ea78*(-0x280*-0x1+-0x1c64+0x19e7)+(-0x935+0x52f+-0x203*-0x2)]=_0x70f148[_0x17ea78],_0x184a5b[_0x17ea78*(0x1577+0x1277+0x27eb*-0x1)+(-0x1695+-0x134+0x17ca)]=_0x120618[_0x17ea78],_0x184a5b[_0x17ea78*(0xa00+-0x522*-0x6+-0x28c9)+(-0x12e2*-0x1+-0x1e8*0x6+-0x770)]=_0x5b8938[_0x17ea78],_0x288806[_0x17ea78*(0xca+0x291+-0x358)+(0x90d*-0x3+0x1224+0x903)]=_0x70f148[_0x17ea78],_0x288806[_0x17ea78*(-0x1e6d*0x1+-0x240b+0x427b)+(0x8*-0x1fc+-0x2*0x973+0x133*0x1d)]=_0x120618[_0x17ea78],_0x288806[_0x17ea78*(-0x12d1+-0x1aa2+0x2d76)+(0xce3+-0x2620+0x193f)]=_0x5b8938[_0x17ea78],_0x155973[_0x17ea78*(0x5a8+0x1*-0x1b59+0x1cf*0xc)+(0x55f+-0xbbe+0x1*0x65f)]=_0xc987cb(Math['exp'](_0x2fe238[_0x17ea78])),_0x155973[_0x17ea78*(0x1947+0x2495+-0x1*0x3dd9)+(0x1270+-0x2*0x11fb+0x1*0x1187)]=_0xc987cb(Math['exp'](_0x2e9aaa[_0x17ea78])),_0x155973[_0x17ea78*(-0xc2+0xe6c*0x1+-0xda7)+(-0x724*-0x1+0x60d*-0x5+0x171f)]=_0xc987cb(Math['exp'](_0x5cc3d2[_0x17ea78])),_0x4c11f0[_0x17ea78*(0x217e+0x15*0x2e+-0x2541)+(0x1519+-0x132*-0x1b+-0x355f)]=_0x5600db['x'],_0x4c11f0[_0x17ea78*(-0x315+-0x22df+-0x25f7*-0x1)+(-0x1369+0x10a*-0x1d+0x318c)]=_0x5600db['y'],_0x4c11f0[_0x17ea78*(0x41*-0x7d+-0x1645+0x3605)+(-0x850+0x1469*0x1+-0xc17)]=_0x5600db['z'],_0x440929&&_0x3b4b09&&_0x393612&&_0x18c234&&_0x5e1820&&(_0x3b4b09[_0x17ea78*(0xc5b+0x4a7*0x7+0x2ce9*-0x1)+(0x221b+-0x123a+-0xfe1)]=_0x1d5abd[_0x17ea78],_0x3b4b09[_0x17ea78*(0x26de+-0x1*0xf3e+-0x179d)+(0x1854+0x1*0xd55+-0x25a8)]=_0x1e8d4a[_0x17ea78],_0x3b4b09[_0x17ea78*(-0x1*0x42b+0x9fd*-0x3+0x2225)+(0x18fd+-0x30c+-0x15ef)]=_0x55e08c[_0x17ea78],_0x18c234[_0x17ea78*(-0x3*0x259+-0x11c6+0x18d4)+(-0x5*-0x12f+0x47*-0x53+0x111a)]=_0x1d5abd[_0x17ea78],_0x18c234[_0x17ea78*(0x430+-0xa7c+0x64f)+(-0x493*0x1+-0x1337+0x17cb*0x1)]=_0x1e8d4a[_0x17ea78],_0x18c234[_0x17ea78*(0x6a3*0x1+-0x6a+-0x636)+(0x2*-0xa5d+-0x715+0x1*0x1bd1)]=_0x55e08c[_0x17ea78],_0x5e1820[_0x17ea78]=_0x416d1c?Math['exp'](_0x416d1c[_0x17ea78]):-0xb92+-0x8a1*-0x3+-0x5*0x2dd,_0x393612[_0x17ea78*(0xa1e+-0x1d9e+0x1383)+(0x2137*0x1+-0x1*-0x799+-0x28d0)]=_0x2d0bbd?_0x2d0bbd[_0x17ea78]:-0x558+-0xa3f+0xf97,_0x393612[_0x17ea78*(0xe*-0x245+0x19*-0xef+0x372*0x10)+(0x182*0x2+0x258+-0x3*0x1c9)]=_0x5e1820[_0x17ea78]);}_0x59bc6a||(_0x402944[0x2081+0xe33*-0x2+-0x41b]=(_0xe31a93+_0x1bd308)*(0x1*-0x13a9+0x217a+0x49b*-0x3+0.5),_0x402944[-0x14e3+-0x1*-0x1723+-0x5*0x73]=(_0xb223fe+_0x52ff22)*(0xf25*0x2+0x2207+-0x4051+0.5),_0x402944[-0x11b6+0x1899*-0x1+0x2a51]=(_0x1a4f3c+_0xd459a3)*(0x1101+-0x8cd*-0x3+0x8*-0x56d+0.5),_0x12c7cc[-0x205*0x11+0x13af+0xea6]=(_0x1bd308-_0xe31a93)*(-0x2e*0x73+0x1*-0x36b+0x1815+0.5),_0x12c7cc[0x1*0xdb7+0x151f+-0x22d5]=(_0x52ff22-_0xb223fe)*(0x792*0x2+-0x1*-0x1271+-0x2195+0.5),_0x12c7cc[-0x31d*-0x7+-0x1d84+0x1*0x7bb]=(_0xd459a3-_0x1a4f3c)*(0x2042*-0x1+-0x1*-0x170d+0x935+0.5));const _0x3f9254=_0x3544f8();let _0x58f2a5={'dataColor':_0x43ce77,'center':_0x402944,'halfExtents':_0x12c7cc,'dataCenters':_0x288806,'dataPosition':_0x184a5b,'dataScale':_0x155973,'dataRotation':_0x4c11f0,..._0x3f9254};return _0x440929&&(_0x58f2a5={..._0x58f2a5,'dataMotion':_0x3b4b09,'dataTime':_0x393612,'motion':_0x18c234,'tScaleArray':_0x5e1820,'muT':new Float32Array(_0x2d0bbd),'timeIndex':new Float32Array(_0x32aeb9)}),_0x58f2a5;},_0x15dcdf=_0x3a3046=>{const _0x69b164=[];for(let _0x521295=0x1+-0x23ed+0xf2*0x26;_0x521295<_0x3a3046;++_0x521295)_0x69b164['push'](_0x2d402b['f_rest_'+_0x521295]);return _0x69b164;},_0x3544f8=()=>{const _0x500445=_0x57e10d();if(_0x500445<=0x3fb*-0x1+-0x5*-0x6ac+0x45*-0x6d)return{};const _0x39a2d9=_0x2d402b['x']['length'],_0x3f7ea6=new Uint32Array(_0x39a2d9*(-0x7*0x476+0x530+0x1a0e)),_0x51be8d=new Uint32Array(_0x39a2d9*(0x1*0x8f+0x3*-0xaf5+0x815*0x4)),_0x16b961=new Uint32Array(_0x39a2d9*(0x160*-0x6+0x2*0xd22+0x2*-0x900)),_0x286446=new Uint32Array(_0x39a2d9*(-0x2482*-0x1+0x1*-0x161d+-0xe61)),_0x41bcc9={0x1:0x3,0x2:0x8,0x3:0xf}[_0x500445],_0xae0c9a=_0x15dcdf(_0x41bcc9*(0x23ff+0x20*-0x35+-0x1d5c)),_0x1268f0=0xaae*-0x2+0x4bf+0x189c,_0x21b6cb=0x228b+0x1e4f*-0x1+-0x3d,_0xd28116=new Float32Array(0x1f9b+-0x1*-0x1445+0x769*-0x7),_0x5ec36b=new Uint32Array(_0xd28116['buffer']),_0x485b9a=new Array(_0x41bcc9*(0x175a+0x20*0xb7+-0x1*0x2e37))['fill'](-0x1*0x1367+0x2375+-0x2ad*0x6);for(let _0x2ae1e0=0xc76+-0x1*0xe7+-0xb8f;_0x2ae1e0<_0x39a2d9;++_0x2ae1e0){for(let _0x300bec=-0xcb*-0x2a+0x24a8+-0x45f6;_0x300bec<_0x41bcc9;++_0x300bec)_0x485b9a[_0x300bec*(0x1f9e+-0x540*0x6+0x9*-0x3)]=_0xae0c9a[_0x300bec][_0x2ae1e0],_0x485b9a[_0x300bec*(0xe6e+-0x105e*-0x1+0x1ec9*-0x1)+(-0x1eeb+-0x1*0xf5a+0x1*0x2e46)]=_0xae0c9a[_0x300bec+_0x41bcc9][_0x2ae1e0],_0x485b9a[_0x300bec*(-0x1236+0x1a6*-0xf+0x2af3)+(0x7a1+-0x9b2+0x213)]=_0xae0c9a[_0x300bec+_0x41bcc9*(-0x23f6+-0x1cff+0x40f7*0x1)][_0x2ae1e0];let _0x23a236=_0x485b9a[0x3a1+0x105+-0x4a6];for(let _0x557cf5=0x2*0x13+0xf*0x158+0x144d*-0x1;_0x557cf5<_0x41bcc9*(0xf*-0xe2+0xbe3+0x7*0x32);++_0x557cf5)_0x23a236=Math['max'](_0x23a236,Math['abs'](_0x485b9a[_0x557cf5]));if(_0x23a236!==0x255*-0x7+0x9*-0x125+-0x60*-0x47){for(let _0x1fb5e5=0x911*-0x1+-0x333*-0x5+-0x6ee*0x1;_0x1fb5e5<_0x41bcc9;++_0x1fb5e5)_0x485b9a[_0x1fb5e5*(0x1af6+0x8b2+-0x23a5)+(-0xc3*-0x3+0x2*-0xce+-0xad*0x1)]=Math['max'](-0x1d85+0x20c1*-0x1+0x3e46,Math['min'](_0x1268f0,Math['floor']((_0x485b9a[_0x1fb5e5*(-0xa5a+0x1297+-0x83a)+(-0x3*-0x2fa+0x26*-0xa7+0xfdc)]/_0x23a236*(0x55d*0x7+0x7*-0x196+-0x1a71+0.5)+(0x1e70+0x46*-0x89+0x706+0.5))*_0x1268f0+(0x1899*0x1+-0xd94+0x193*-0x7+0.5)))),_0x485b9a[_0x1fb5e5*(0x152c+-0x92a*-0x1+-0x1e53)+(-0xfb*-0xa+-0x1*-0x242+-0xc0f)]=Math['max'](-0xb*-0x17a+-0x8c*0xd+-0x922,Math['min'](_0x21b6cb,Math['floor']((_0x485b9a[_0x1fb5e5*(0x3*-0x5cf+-0x18*0x7a+0x108*0x1c)+(0x1*0xa97+0x157d+-0x2013)]/_0x23a236*(-0x1196+-0x185d+0x29f3*0x1+0.5)+(0x65*-0x55+0xd79+-0x1410*-0x1+0.5))*_0x21b6cb+(-0x25bb+0x15fd+0xfbe+0.5)))),_0x485b9a[_0x1fb5e5*(0x129a+0x133*-0x8+0x31*-0x2f)+(-0x349+0xeb9+-0x5b7*0x2)]=Math['max'](0x11*-0x199+0x6d5*-0x2+-0x1*-0x28d3,Math['min'](_0x1268f0,Math['floor']((_0x485b9a[_0x1fb5e5*(-0x11e1+0x3b*-0x67+-0x29a1*-0x1)+(-0x1*-0x174b+-0x1da6+0x65d)]/_0x23a236*(0x1168+0x1c4*0x4+-0x20a*0xc+0.5)+(0x5*0x5ad+0x1f*-0x54+0x1*-0x1235+0.5))*_0x1268f0+(0x1977+0x112d+-0x2aa4+0.5))));_0xd28116[-0x2ed+-0x4e3*0x3+0x2*0x8cb]=_0x23a236,_0x3f7ea6[_0x2ae1e0*(0x1*-0x63f+-0xd65+0x22*0x94)+(0x1674+0x16b7+-0x2d2b)]=_0x5ec36b[0x109a+0x185*0x13+-0x2d79],_0x3f7ea6[_0x2ae1e0*(-0x2460+-0x1e8b*-0x1+0x3*0x1f3)+(-0x1260+-0xf87+0x21e8)]=_0x485b9a[0x3af*-0x9+0x11*-0x209+0x21e*0x20]<<0x423+0x20df+-0x1*0x24ed|_0x485b9a[-0x15c*-0x11+-0x6f+0xb56*-0x2]<<-0x1235+0x40c*-0x5+0x267c|_0x485b9a[-0x71*-0x10+-0x168f+0xf81],_0x3f7ea6[_0x2ae1e0*(0x7f*0x3b+-0x13*0x2+-0x1d1b)+(-0x52c*-0x5+0x1362*0x1+0x1*-0x2d3c)]=_0x485b9a[0x1f7e+0x8a5*0x1+0x1ac*-0x18]<<0x1*-0xc17+0xdc4*-0x1+0x19f0|_0x485b9a[-0x968+0xa99*-0x3+0x2937]<<-0xca*-0x12+-0x2f7+-0xb32*0x1|_0x485b9a[-0xf3a+0x1*-0x1462+-0x7*-0x517],_0x3f7ea6[_0x2ae1e0*(-0x190+-0xf34+0x10c8)+(-0x11d3+0x1284+-0xae)]=_0x485b9a[0x3d*0x11+-0x1f11+-0x1*-0x1b0a]<<0x7a*-0x47+0xd9*-0x1f+0x2*0x1e19|_0x485b9a[-0x722+0x136c+-0xc43]<<-0x2449+-0xd*0x6d+-0x29dd*-0x1|_0x485b9a[0x14d0+0x1*0x4a6+-0x196e],_0x500445>0xbf7*-0x1+0x22d0+-0x44*0x56&&(_0x51be8d[_0x2ae1e0*(0x170*-0x19+0xd01*-0x3+0x4af7)+(-0x22ad+0x24f5+-0x248)]=_0x485b9a[0x1ded+0x2*0x871+-0x1*0x2ec6]<<0x1*-0x297+-0x2362+0x2*0x1307|_0x485b9a[0x1*-0x2212+-0x67d*0x1+0x2899]<<0xefa+-0x2601+0x1712|_0x485b9a[0x111a+-0xba*-0xd+-0x1a81],_0x51be8d[_0x2ae1e0*(-0xefd*-0x1+-0x169*-0x11+0xa*-0x3e5)+(-0x1314+0x19d4+-0x6bf)]=_0x485b9a[0x18*-0x8+0x621*-0x1+0x6ed]<<0x10b1+0xa78+0x2*-0xd8a|_0x485b9a[-0xd34+-0xb36+0x1877]<<-0x2b2+-0x833*-0x2+-0xda9|_0x485b9a[-0x1f*0xd1+-0x148+0x13*0x167],_0x51be8d[_0x2ae1e0*(-0xfb5*-0x2+-0x1043*-0x1+-0x2fa9)+(0x25eb+0x4f6+-0x2adf)]=_0x485b9a[0x1fee+0x1c85+0x60a*-0xa]<<-0x1*-0x25c1+0x5d*-0x1f+-0x1a69|_0x485b9a[0x1f9e+0xb89+-0x2b17]<<-0x17*0xd5+0x1e70*-0x1+0x319e|_0x485b9a[-0xd83+0x13fd+-0x669],_0x51be8d[_0x2ae1e0*(-0x2556+-0x4*-0x977+-0x82)+(-0x1*0x221b+-0x2ab*0x2+0x9dd*0x4)]=_0x485b9a[-0x1301+-0x1*-0xfa3+0x370]<<-0x1bdc+0x1e2e+-0x23d|_0x485b9a[0x1462*-0x1+-0x420+-0x1d*-0xd9]<<0x1*0x1065+0x4f3*-0x7+0x124b|_0x485b9a[-0x4e6+-0x2*-0x12fb+0x4*-0x83f],_0x500445>0xc98*0x2+-0x7*0x2c5+-0x5cb?(_0x16b961[_0x2ae1e0*(0xc88+0x157e+-0x2202)+(-0x1aae*-0x1+0x1*-0x28+-0x1a86)]=_0x485b9a[-0x1b05+-0x1*-0x2651+-0xb37]<<-0xc90+-0x10f8+-0x169*-0x15|_0x485b9a[0x11ea+0x1c*0x16+-0xb9*0x1c]<<-0x259*-0x1+0x23*0x89+0x1*-0x1509|_0x485b9a[0x1*0x306+-0x1adb+0x17ec*0x1],_0x16b961[_0x2ae1e0*(0x2*-0x56+-0xb8c+0x6*0x20a)+(0x1df2+-0x1b4e+-0xf*0x2d)]=_0x485b9a[-0x1*-0x35b+-0x1*0x20c3+-0x40*-0x76]<<0x4dd+-0xfb5+0xaed|_0x485b9a[0x5*-0x134+0x15*0x30+-0x22d*-0x1]<<-0x2113*0x1+0x1c42+0x4dc|_0x485b9a[-0xb03+0x905*0x3+-0xff2],_0x16b961[_0x2ae1e0*(0x2f*-0x5+-0x6a*0x3d+0x1a31)+(-0xefb+-0x3*-0xc2f+-0x1590)]=_0x485b9a[-0x4a7+-0x1090+0x1552]<<0x1dea*0x1+0x12a4+0x1*-0x3079|_0x485b9a[0x755+-0x1516+-0x15*-0xa9]<<0x25b8+0x1188+0x7e3*-0x7|_0x485b9a[0x256f+0x2f*0xbf+-0x9*0x80b],_0x16b961[_0x2ae1e0*(0x3d1*0x1+-0x243e+0x2071)+(0x4*-0x31+-0x377*0x1+0x1*0x43e)]=_0x485b9a[-0x14b*0x5+0x1a9*0xe+-0x10a9]<<0xe28+0xc1a*0x2+-0x2647*0x1|_0x485b9a[0x223*-0x8+0x3d0*0x2+0x997]<<0x17e0+0x119*-0x10+-0x5*0x141|_0x485b9a[0x2042+0xa*-0x277+-0x77c],_0x286446[_0x2ae1e0*(-0x277+-0x2479+0x26f4)+(-0x2462+0xb*0x214+0x241*0x6)]=_0x485b9a[0x9*-0x28d+0x45+-0x3b*-0x63]<<0x14a*0x1+0x189a+0x1*-0x19cf|_0x485b9a[0x92a+-0x1630+0x4*0x34a]<<0x119d+-0xff*0x9+-0x89b*0x1|_0x485b9a[-0x20da+-0x5e*0x9+0x13*0x1e9],_0x286446[_0x2ae1e0*(-0x1edd*-0x1+0x1*-0x785+-0x2*0xbaa)+(-0xa5a+-0x6eb+0xc9*0x16)]=_0x485b9a[-0x1999*0x1+0xc1b+0xda2]<<0x2508+-0x8b*-0x1d+-0x34b2|_0x485b9a[0x249b+-0x29*0xad+-0xf9*0x9]<<0x109b+-0x217c+-0x876*-0x2|_0x485b9a[-0xd*-0x2dd+0x2e1*0x7+-0x393a],_0x286446[_0x2ae1e0*(-0x26bd+-0x1a3d+0xb1*0x5e)+(0x455*-0x4+-0x1c39*-0x1+-0xae3)]=_0x485b9a[0x308*-0x4+-0x159*-0xb+-0x28c]<<-0x10e0+0x30*-0x51+0x2025|_0x485b9a[0x687+0x53*0x2a+-0x13fd]<<0x1f*-0x3b+0x698*-0x5+0x2828*0x1|_0x485b9a[0x1f7+-0x1b47+0x1*0x1979],_0x286446[_0x2ae1e0*(-0x2000+-0x1bd7+0x3bdb)+(0x1129+0x124b+-0x2371)]=_0x485b9a[-0x256c*-0x1+-0x2f8+-0x224a]<<-0x13b2+0x6*-0x119+0x1a5d|_0x485b9a[0x13ef+0x1e7*0x7+-0x2115]<<0x77*-0x3b+-0xeaa+-0x1511*-0x2|_0x485b9a[-0x1*0x22d9+0x2676+-0x371*0x1]):_0x16b961[_0x2ae1e0]=_0x485b9a[-0xa2b+0x1*0x1cf3+-0x12b3]<<-0x1*-0x2111+0x23be+-0x1*0x44ba|_0x485b9a[-0xb5*0x22+-0x1*0x1c9+0x19e9]<<0x1d6c*-0x1+-0x1*0x115+0x1e8c*0x1|_0x485b9a[0x14a7+0x1*-0x2f3+0x1b*-0xa7]);}}return{'sh1to3Data':_0x3f7ea6,'sh4to7Data':_0x51be8d,'sh8to11Data':_0x16b961,'sh12to15Data':_0x286446};},_0x1bffa6=_0x37f2f7=>{if(!_0x2d402b['time_index'])return;const _0x4526d2=_0x2d402b['time_index']['findIndex'](_0x237b65=>_0x237b65===_0x37f2f7);let _0x1ce94b=_0x2d402b['time_index']['findIndex']((_0x5a6a9c,_0x3f8e24)=>_0x5a6a9c!==_0x37f2f7&&_0x3f8e24>_0x4526d2);if(_0x1ce94b===-(-0xda2+0x8fd+-0x22*-0x23)&&_0x4526d2===-(-0x14ea+0x1410+0xdb))return;_0x1ce94b===-(0x147f+-0x19ad+0x52f)&&_0x4526d2!==-(0x629+0x2c7*0xe+0x2*-0x1685)&&(_0x1ce94b=_0x2d402b['time_index']['length']),_0x262ff8-=_0x1ce94b-_0x4526d2;const _0x48f5ed=Object['keys'](_0x2d402b);for(let _0x4ebb1d=0xd09+-0x4f*-0x4d+0x14*-0x1d7;_0x4ebb1d<_0x48f5ed['length'];_0x4ebb1d++){const _0x423741=_0x48f5ed[_0x4ebb1d],_0x27aaf2=_0x2d402b[_0x423741];if(_0x27aaf2){const _0x80db11=new Float32Array(_0x262ff8);_0x4526d2>0x940*-0x2+-0x1*-0x14e4+-0x33*0xc?(_0x80db11['set'](_0x27aaf2['subarray'](0x1*0x6e4+0x1c17+-0x22fb,_0x4526d2),0x247*0x1+-0x17*0x19b+-0x1153*-0x2),_0x80db11['set'](_0x27aaf2['subarray'](_0x1ce94b),_0x4526d2)):_0x80db11['set'](_0x27aaf2['subarray'](_0x1ce94b),-0x1*0x193b+0x382*0x1+0x15b9),_0x2d402b[_0x423741]=_0x80db11;}}},_0x919c29=()=>{const _0x162f79=Object['keys'](_0x2d402b);for(let _0x22e579=0x1*-0x264e+-0x25f*-0xd+-0x17f*-0x5;_0x22e579<_0x162f79['length'];_0x22e579++){const _0x21863a=_0x162f79[_0x22e579];_0x2d402b[_0x21863a]&&(_0x2d402b[_0x21863a]=[]);}},_0x324647=()=>{_0x2d402b={},_0x262ff8=0xdf1*-0x2+-0x1063*0x1+0x2c45*0x1;};}class YA extends me{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+jA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x56e249,_0xd32489,_0x14dca3,_0xce9908=!(0x68f*0x1+-0x2*0x531+-0x62*-0xa)){var _0xa4a61,_0x689dd8;const _0xddb435={};return _0x56e249['elements'][0x1720+-0x11+-0x170f]['properties']['forEach'](_0x1caf81=>{_0xddb435[_0x1caf81['name']]=_0x1caf81['storage'];}),_0xce9908?(_0xa4a61=this['worker'])==null||_0xa4a61['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0xddb435,'timeIndex':_0xd32489,'timeOption':_0x14dca3},_0x56e249['elements'][-0x2427+0x26a0+0xd3*-0x3]['properties']['map'](_0x1f09ef=>_0x1f09ef['storage']['buffer'])):(_0x689dd8=this['worker'])==null||_0x689dd8['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0xddb435,'timeIndex':_0xd32489,'timeOption':_0x14dca3}),new Promise(_0x596bdb=>{this['worker']['onmessage']=_0x4b1eef=>{if(!this['worker'])return;const {data:_0x56081d}=_0x4b1eef;_0x56081d['type']==='newAppendD'+'ata'&&_0x596bdb(_0x56081d);};});}async['releaseSeq'+'Data'](_0x407fb5){var _0x41361c;(_0x41361c=this['worker'])==null||_0x41361c['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x407fb5});}async['releaseAll'+'SeqData'](){var _0x32c62c;(_0x32c62c=this['worker'])==null||_0x32c62c['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x2e8ee8;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x2e8ee8=this['worker'])==null||_0x2e8ee8['terminate'](),this['worker']=null);}}const za=new te(),pg=new le(),yf=new De(),mg=new De(),KA=new ie(0x19f3+-0x1*-0x827+0x7*-0x4df,0x968+-0x18db+0xf74,0x761+-0x1d*0x14f+-0x25a*-0xd,0x10f6+0x16e1*-0x1+-0x1*-0x5eb+0.4),vf=-0x7df+0x10e5+-0x906+0.28209479177387814,xf=0x6*-0xdcd6+0x5e2a2+-0x12bd1*-0x2;let ZA=class{constructor(_0x5047db,_0x1c9c50,_0x3a408b,_0x17abac,_0x53de90,_0x46c062){const _0x5e2841=_0x5047db['getProp']('x'),_0x564727=_0x5047db['getProp']('y'),_0xf43197=_0x5047db['getProp']('z'),_0x2f656d=_0x5047db['getProp']('rot_1'),_0x254693=_0x5047db['getProp']('rot_2'),_0x3e95c4=_0x5047db['getProp']('rot_3'),_0x471296=_0x5047db['getProp']('rot_0'),_0x10b26c=_0x5047db['getProp']('motion_0'),_0x371193=_0x5047db['getProp']('motion_1'),_0x1de973=_0x5047db['getProp']('motion_2'),_0x36d948=_0x5047db['getProp']('scale_0'),_0x362284=_0x5047db['getProp']('scale_1'),_0x401f6a=_0x5047db['getProp']('scale_2'),_0x31384a=_0x5047db['getProp']('f_dc_0'),_0x7ee3be=_0x5047db['getProp']('f_dc_1'),_0xc6dc3=_0x5047db['getProp']('f_dc_2'),_0x477a8e=_0x5047db['getProp']('opacity');this['read']=_0x49eb76=>{_0x1c9c50&&(_0x1c9c50['x']=_0x5e2841[_0x49eb76],_0x1c9c50['y']=_0x564727[_0x49eb76],_0x1c9c50['z']=_0xf43197[_0x49eb76]),_0x3a408b&&_0x3a408b['set'](_0x2f656d[_0x49eb76],_0x254693[_0x49eb76],_0x3e95c4[_0x49eb76],_0x471296[_0x49eb76]),_0x17abac&&_0x17abac['set'](Math['exp'](_0x36d948[_0x49eb76]),Math['exp'](_0x362284[_0x49eb76]),Math['exp'](_0x401f6a[_0x49eb76])),_0x46c062&&_0x10b26c&&_0x46c062['set'](_0x10b26c[_0x49eb76],_0x371193[_0x49eb76],_0x1de973[_0x49eb76]),_0x53de90&&_0x53de90['set'](-0x246b+0xf7*-0x3+0x2750+0.5+_0x31384a[_0x49eb76]*vf,0x1a9d+-0x225a+-0x7*-0x11b+0.5+_0x7ee3be[_0x49eb76]*vf,0x11cc+0x2703+-0x38cf+0.5+_0xc6dc3[_0x49eb76]*vf,_0x477a8e[_0x49eb76]);};}};const _g=(_0x18da1f,_0x3a37ab,_0x2407d8)=>{pg['set'](_0x2407d8['x'],_0x2407d8['y'],_0x2407d8['z'],_0x2407d8['w'])['normalize'](),_0x18da1f['setTRS'](_0x3a37ab,pg,D['ONE']);};class qn{constructor(_0x3ec8c4,_0x1c657f=[]){h(this,'elements'),h(this,'numSplats',0x1049+-0x2*-0x957+-0x22f7),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x43a135;(_0x43a135=this['dataWorker'])==null||_0x43a135['destroy'](),this['dataWorker']=null;});var _0x42e9c9,_0x239f63,_0x33ddbf;this['elements']=_0x3ec8c4,this['numSplats']=((_0x42e9c9=this['getElement']('vertex'))==null?void(-0x953*-0x1+0x2426+-0x2d79):_0x42e9c9['count'])??-0x4e1*-0x6+0x2113+-0x3e59,this['comments']=_0x1c657f,this['is4D']=!!((_0x33ddbf=(_0x239f63=this['getElement']('vertex'))==null?void(-0x3*-0x55d+-0x624+0x9*-0x11b):_0x239f63['properties']['find'](_0x5240ad=>_0x5240ad['name']==='t'))!=null&&_0x33ddbf['storage']);}async['appendGSpl'+'atData'](_0x108885,_0xdffb36,_0x4a0378){var _0x227500;let _0x44d398=0xa*-0x2e+-0x18c2+0x26a*0xb;for(let _0x2eb9fd=-0x499+-0x24af*0x1+0x2948;_0x2eb9fd<_0x4a0378['length']&&_0xdffb36>_0x4a0378[_0x2eb9fd];_0x2eb9fd+=0x4*0x3ca+-0x21e4+0x12be)_0x44d398=_0x2eb9fd/(0x19f7+0x197f+-0x19ba*0x2);console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData',_0x44d398),this['dataWorker']||(this['dataWorker']=new YA(),await this['dataWorker']['appendGSpl'+'atData'](this,-0x1*-0x16e2+0x3*-0x55+-0x15e3,_0x4a0378));const _0x2ad73d=this['getElement']('vertex');_0x2ad73d&&(_0x2ad73d['count']=this['numSplats']);const _0x82f602=await this['dataWorker']['appendGSpl'+'atData'](_0x108885,_0x44d398,_0x4a0378,!(-0x20a7*-0x1+-0x19eb+-0x6bc)),_0x44e84f=_0x82f602['properties'],_0x41e429=((_0x227500=this['getElement']('vertex'))==null?void(-0x1*-0x2573+0x9c2+-0x2f35):_0x227500['properties'])??[];for(const _0x2be2d6 in _0x44e84f){const _0x5d99ca=_0x41e429['find'](_0x36c64c=>_0x36c64c['name']===_0x2be2d6);_0x5d99ca?_0x5d99ca['storage']=_0x44e84f[_0x2be2d6]:_0x41e429['push']({'type':'float','name':_0x2be2d6,'storage':_0x44e84f[_0x2be2d6],'byteSize':0x4});}this['transformD'+'ata']=_0x82f602['transformD'+'ata'],this['numSplats']=_0x44e84f['x']['length'],console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData\x20nu'+'mSplats',this['numSplats']);}async['releaseSeq'+'Data'](_0x794cbe){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20releaseSe'+'qData',_0x794cbe),this['dataWorker']['releaseSeq'+'Data'](_0x794cbe),this;}async['releaseAll'+'SeqData'](){var _0x35cf9a;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20release\x20a'+'ll\x20SeqData'),(_0x35cf9a=this['dataWorker'])==null||_0x35cf9a['releaseAll'+'SeqData'](),this;}static['calcSplatA'+'abb'](_0x285e49,_0x27ac2e,_0x50286d,_0x55f2f8){_g(za,_0x27ac2e,_0x50286d),yf['center']['set'](-0x1c88+-0x1*0x157b+-0x19d*-0x1f,-0xb0e+0x6*-0x376+0x1fd2,-0x2382+-0xdf*-0x13+0x12f5),yf['halfExtent'+'s']['set'](_0x55f2f8['x']*(0x1dbf+-0x4d2+-0x18eb),_0x55f2f8['y']*(0x1abd+-0xf6c+-0xb4f),_0x55f2f8['z']*(0x1b4a+0x13*0x101+-0x2e5b)),_0x285e49['setFromTra'+'nsformedAa'+'bb'](yf,za);}['getProp'](_0x5e526b,_0x5f0d66='vertex'){var _0x43dd4e,_0x7edb49;return(_0x7edb49=(_0x43dd4e=this['getElement'](_0x5f0d66))==null?void(-0x13*0x1be+0x18b1+-0x1*-0x869):_0x43dd4e['properties']['find'](_0x1dc0c0=>_0x1dc0c0['name']===_0x5e526b))==null?void(0x1*0x5b9+0x1*0xf45+-0x14fe):_0x7edb49['storage'];}['getElement'](_0x457e96){return this['elements']['find'](_0x14f1f8=>_0x14f1f8['name']===_0x457e96);}['addProp'](_0x37738a,_0x1df4fc){this['getElement']('vertex')['properties']['push']({'type':'float','name':_0x37738a,'storage':_0x1df4fc,'byteSize':0x4});}['createIter'](_0x376b22,_0x201752,_0x8e298a,_0x5e1c30,_0x35eec4){return new ZA(this,_0x376b22,_0x201752,_0x8e298a,_0x5e1c30,_0x35eec4);}async['calcAabbAs'+'ync'](_0x36249e,_0x310748){var _0xbe8bb,_0x583475;if((_0xbe8bb=this['transformD'+'ata'])!=null&&_0xbe8bb['center']&&((_0x583475=this['transformD'+'ata'])!=null&&_0x583475['halfExtent'+'s'])){_0x36249e['center']['set'](this['transformD'+'ata']['center'][0x78d*0x3+0x1f64*0x1+-0x360b],this['transformD'+'ata']['center'][-0x10f5+0x5d*-0x3e+0x277c],this['transformD'+'ata']['center'][-0x3c5+0x279*0x2+-0x1*0x12b]),_0x36249e['halfExtent'+'s']['set'](this['transformD'+'ata']['halfExtent'+'s'][0x14c8+0x1c1b+-0x5*0x9c7],this['transformD'+'ata']['halfExtent'+'s'][-0xcb6*-0x2+-0xa3f+-0xf2c],this['transformD'+'ata']['halfExtent'+'s'][0x1dbd*-0x1+-0x2415+-0x17f*-0x2c]);return;}const _0x326f5=this['getProp']('x'),_0x5ec78a=this['getProp']('y'),_0x3063ad=this['getProp']('z'),_0x127599=this['getProp']('scale_0'),_0x1b03f6=this['getProp']('scale_1'),_0x2f7447=this['getProp']('scale_2'),_0x2ec9b4=await(_0x310748==null?void(-0x13*-0x5e+-0x45f*-0x4+-0x1876):_0x310748['calcAabb'](this['numSplats'],_0x326f5,_0x5ec78a,_0x3063ad,_0x127599,_0x1b03f6,_0x2f7447));_0x36249e['center']['set'](_0x2ec9b4['center'][-0x21a*-0xf+-0x223e+0xe8*0x3],_0x2ec9b4['center'][-0x7d+0x7*0x483+-0xa5d*0x3],_0x2ec9b4['center'][-0x3f5*0x1+-0x2370+-0x1*-0x2767]),_0x36249e['halfExtent'+'s']['set'](_0x2ec9b4['halfExtent'+'s'][-0x14fd+0x3e1+0x111c],_0x2ec9b4['halfExtent'+'s'][0x23f+-0xc32*0x3+0x2258],_0x2ec9b4['halfExtent'+'s'][0x20ef+0x153b+0xd8a*-0x4]);}['calcAabb'](_0x20a31e,_0x4e17ba){let _0x3abda9,_0x345560,_0x1be93c,_0x38e35f,_0x5c2ad4,_0x1a8e05,_0x173ae3=!(0x254d+0x4d*0x44+-0x39c1);const _0x7dbd7d=this['getProp']('x'),_0x2cd15b=this['getProp']('y'),_0x420bfe=this['getProp']('z'),_0x4aee35=this['getProp']('scale_0'),_0x331028=this['getProp']('scale_1'),_0x15454a=this['getProp']('scale_2');for(let _0x5d6369=-0x2*0x462+-0x326*0xb+0x2b66;_0x5d6369<this['numSplats'];++_0x5d6369){if(_0x4e17ba&&!_0x4e17ba(_0x5d6369))continue;const _0x4bd487=_0x7dbd7d[_0x5d6369],_0x44e3d8=_0x2cd15b[_0x5d6369],_0x45b2d9=_0x420bfe[_0x5d6369],_0x5ba262=Math['max'](_0x4aee35[_0x5d6369],_0x331028[_0x5d6369],_0x15454a[_0x5d6369]);if(!isFinite(_0x4bd487)||!isFinite(_0x44e3d8)||!isFinite(_0x45b2d9)||!isFinite(_0x5ba262))continue;const _0x2974cd=(0x3*0x17b+-0x1ba3+0xdc*0x1b)*Math['exp'](_0x5ba262);_0x173ae3?(_0x173ae3=!(0x4e2+0x225*-0xf+-0x1*-0x1b4a),_0x3abda9=_0x4bd487-_0x2974cd,_0x345560=_0x44e3d8-_0x2974cd,_0x1be93c=_0x45b2d9-_0x2974cd,_0x38e35f=_0x4bd487+_0x2974cd,_0x5c2ad4=_0x44e3d8+_0x2974cd,_0x1a8e05=_0x45b2d9+_0x2974cd):(_0x3abda9=Math['min'](_0x3abda9,_0x4bd487-_0x2974cd),_0x345560=Math['min'](_0x345560,_0x44e3d8-_0x2974cd),_0x1be93c=Math['min'](_0x1be93c,_0x45b2d9-_0x2974cd),_0x38e35f=Math['max'](_0x38e35f,_0x4bd487+_0x2974cd),_0x5c2ad4=Math['max'](_0x5c2ad4,_0x44e3d8+_0x2974cd),_0x1a8e05=Math['max'](_0x1a8e05,_0x45b2d9+_0x2974cd));}return _0x173ae3||(_0x20a31e['center']['set']((_0x3abda9+_0x38e35f)*(-0x24d8+0x1777+0x89*0x19+0.5),(_0x345560+_0x5c2ad4)*(0x1*-0x1391+0x83*0x1+-0x9*-0x21e+0.5),(_0x1be93c+_0x1a8e05)*(0x19*0xa+0x24f5*0x1+-0x25ef+0.5)),_0x20a31e['halfExtent'+'s']['set']((_0x38e35f-_0x3abda9)*(0x5*0x5a7+0x1daf+-0x39f2*0x1+0.5),(_0x5c2ad4-_0x345560)*(0x7d8+0x2445+-0x17*0x1eb+0.5),(_0x1a8e05-_0x1be93c)*(-0xfa3+-0xefe+-0x1ea1*-0x1+0.5))),!_0x173ae3;}['yieldToMai'+'n'](){var _0x2097f2;return(_0x2097f2=globalThis['scheduler'])!=null&&_0x2097f2['yield']?globalThis['scheduler']['yield']():new Promise(_0x24b590=>{setTimeout(_0x24b590,-0x5a0+-0x9e5+0xf85);});}['calcAabbEx'+'act'](_0x3973a4,_0x44fbce){const _0x5b607d=new D(),_0x4367de=new le(),_0x5f4bc0=new D(),_0x519658=this['createIter'](_0x5b607d,_0x4367de,_0x5f4bc0);let _0x1d2922=!(-0x71c+-0x61c+0xd38);for(let _0x106280=-0x82a+-0x1587+-0xb*-0x2b3;_0x106280<this['numSplats'];++_0x106280)_0x44fbce&&!_0x44fbce(_0x106280)||(_0x519658['read'](_0x106280),_0x1d2922?(_0x1d2922=!(0x2665+0x2280+-0x48e4),qn['calcSplatA'+'abb'](_0x3973a4,_0x5b607d,_0x4367de,_0x5f4bc0)):(qn['calcSplatA'+'abb'](mg,_0x5b607d,_0x4367de,_0x5f4bc0),_0x3973a4['add'](mg)));return!_0x1d2922;}async['getCenters'](_0x423eee){const _0x45daa5=this['getProp']('x'),_0x38f4e3=this['getProp']('y'),_0x42709d=this['getProp']('z');for(let _0x17d334=-0x19*0x7c+-0x371*0x9+0x2b15;_0x17d334<this['numSplats'];++_0x17d334)_0x423eee[_0x17d334*(-0x6*0x511+-0x2256+-0x1595*-0x3)+(-0x820+0x1ba+0x666)]=_0x45daa5[_0x17d334],_0x423eee[_0x17d334*(-0x1f*-0x19+-0x2*0x709+0xb0e)+(-0x25ab*-0x1+-0x1e*0x74+-0x1812)]=_0x38f4e3[_0x17d334],_0x423eee[_0x17d334*(0x130e+-0x1059+-0x45*0xa)+(-0x52*0x9+0x18d3+0x5*-0x463)]=_0x42709d[_0x17d334],_0x17d334%xf===-0x2*0xc26+-0x607*-0x3+0x1*0x637&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x45888b;if((_0x45888b=this['transformD'+'ata'])!=null&&_0x45888b['muT'])return this['transformD'+'ata']['muT'];const _0x1333db=this['getProp']('t');return _0x1333db?new Float32Array(_0x1333db):void(0x231b+-0x842+-0x1ad9);}async['getTScale'](){const _0x57ea55=this['getProp']('t_scale');if(!_0x57ea55)return;const _0x532765=new Float32Array(this['numSplats']);for(let _0x39c084=0x1948+-0x1*0xf8+0x2*-0xc28;_0x39c084<this['numSplats'];++_0x39c084)_0x532765[_0x39c084]=Math['exp'](_0x57ea55[_0x39c084]),_0x39c084%xf===-0x5*0x3df+-0x2*0x11ab+0x1*0x36b1&&await this['yieldToMai'+'n']();return _0x532765;}async['getMotion'](_0x22594f){const _0x396072=this['getProp']('motion_0'),_0x4c557c=this['getProp']('motion_1'),_0x12481f=this['getProp']('motion_2');if(!(!_0x396072||!_0x4c557c||!_0x12481f)){for(let _0x1163e0=-0x1*0xb97+0x5d5+0x5c2;_0x1163e0<this['numSplats'];++_0x1163e0)_0x22594f[_0x1163e0*(-0x9fd*-0x1+0x71c+-0x1116)+(0x1a6d+0x97*0x1a+-0x1*0x29c3)]=_0x396072[_0x1163e0],_0x22594f[_0x1163e0*(0x1cdc+0xcfd+-0x29d6)+(0x2*-0xfb3+-0x2fb+0x2262)]=_0x4c557c[_0x1163e0],_0x22594f[_0x1163e0*(-0x10c4+-0x20f0+0x31b7)+(-0x17bb+-0xf35+0x26f2)]=_0x12481f[_0x1163e0],_0x1163e0%xf===0x74*-0x2b+-0x1661+0x7*0x5fb&&await this['yieldToMai'+'n']();}}['getTimeInd'+'ex'](){var _0xb97f91;if((_0xb97f91=this['transformD'+'ata'])!=null&&_0xb97f91['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x278db7=this['getProp']('time_index');if(_0x278db7)return new Float32Array(_0x278db7);}['calcFocalP'+'oint'](_0x1d45a2,_0x5bbd84){const _0x49627d=this['getProp']('x'),_0x417123=this['getProp']('y'),_0x1f4796=this['getProp']('z'),_0x23d794=this['getProp']('scale_0'),_0x247e04=this['getProp']('scale_1'),_0x2691bf=this['getProp']('scale_2');_0x1d45a2['x']=-0x94*0x1f+-0x1*0x5f2+-0x1a*-0xeb,_0x1d45a2['y']=0x1426+0x1155+0x1f9*-0x13,_0x1d45a2['z']=0x39*0x29+0x3*0x93b+-0x24d2;let _0x53209a=0x3cd*0x5+0x1cbc+-0x2fbd;for(let _0xdaf1ef=-0x20ae+-0x1b5a+0x3c08;_0xdaf1ef<this['numSplats'];++_0xdaf1ef){if(_0x5bbd84&&!_0x5bbd84(_0xdaf1ef))continue;const _0x102aec=_0x49627d[_0xdaf1ef],_0x5d3c96=_0x417123[_0xdaf1ef],_0x21acc6=_0x1f4796[_0xdaf1ef];if(!isFinite(_0x102aec)||!isFinite(_0x5d3c96)||!isFinite(_0x21acc6))continue;const _0x30eec2=(0x1e4f+0x563+-0x23b1*0x1)/(-0x129b+0x2373+-0x9*0x1df+Math['exp'](Math['max'](_0x23d794[_0xdaf1ef],_0x247e04[_0xdaf1ef],_0x2691bf[_0xdaf1ef])));_0x1d45a2['x']+=_0x102aec*_0x30eec2,_0x1d45a2['y']+=_0x5d3c96*_0x30eec2,_0x1d45a2['z']+=_0x21acc6*_0x30eec2,_0x53209a+=_0x30eec2;}_0x1d45a2['mulScalar']((-0x12aa+-0x18cb*-0x1+-0x4*0x188)/_0x53209a);}['renderWire'+'frameBound'+'s'](_0x3dc0e2,_0x3a0463){const _0x2e5dfa=new D(),_0x3bae8a=new le(),_0x4bd706=new D(),_0x1d5fb7=new D(),_0x2b8e91=new D(),_0x2e1cd9=this['createIter'](_0x2e5dfa,_0x3bae8a,_0x4bd706);for(let _0x21f0f6=-0x127c+0x56d*0x1+0xd0f;_0x21f0f6<this['numSplats'];++_0x21f0f6)_0x2e1cd9['read'](_0x21f0f6),_g(za,_0x2e5dfa,_0x3bae8a),za['mul2'](_0x3a0463,za),_0x1d5fb7['set'](_0x4bd706['x']*-(0xf02+-0x1006+0x106*0x1),_0x4bd706['y']*-(-0x21dd+-0x151b+0x2*0x1b7d),_0x4bd706['z']*-(0x1e8b+0x1*-0x2d3+0x1bb6*-0x1)),_0x2b8e91['set'](_0x4bd706['x']*(0x3*-0x3f9+0x1*0xb0f+0x4a*0x3),_0x4bd706['y']*(0x13ef+-0x1*0x1025+0x79*-0x8),_0x4bd706['z']*(-0xa*0x281+-0xef0+0x6*0x6aa)),_0x3dc0e2['immediate']['drawWireAl'+'ignedBox'](_0x1d5fb7,_0x2b8e91,KA,!(-0xb32+0x68b+0x4a7),_0x3dc0e2['defaultDra'+'wLayer'],za);}get['isCompress'+'ed'](){return!(-0x43*-0x49+0x1a96+-0x2db0*0x1);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0xa12d3f=0xaf*-0x27+-0x12*-0x1eb+-0x7dd;_0xa12d3f<-0x1ca*-0x2+-0x1163+0xdfc;++_0xa12d3f)if(!this['getProp']('f_rest_'+_0xa12d3f))return _0xa12d3f;return 0xec6+-0x18a0+0xa07;})())]??-0x45d*0x1+0x1*-0xec+0x1*0x549;}['calcMorton'+'Order'](){const _0x1c525b=_0x489a21=>{let _0x224555=_0x489a21[-0x2507+-0x2040+0x4547],_0x547d3=_0x489a21[0x19e4+-0xc20+0x4*-0x371];for(let _0x393217=-0x415*-0x3+-0x3*-0x78b+-0x22df;_0x393217<_0x489a21['length'];_0x393217++)_0x489a21[_0x393217]<_0x224555&&(_0x224555=_0x489a21[_0x393217]),_0x489a21[_0x393217]>_0x547d3&&(_0x547d3=_0x489a21[_0x393217]);return{'min':_0x224555,'max':_0x547d3};},_0x3c3e21=(_0x5cd941,_0x47fc1e,_0x239a87)=>{const _0x3c7ae2=_0x9fcde0=>(_0x9fcde0&=0x989+-0x22*0x10+0x1b5*-0x2,_0x9fcde0=(_0x9fcde0^_0x9fcde0<<0xcc9+0x2593+-0x324c)&0x82c1fa18+0xcf3bb256*-0x1+0x4f2887f*0x43,_0x9fcde0=(_0x9fcde0^_0x9fcde0<<-0x12d5+-0x1f71+0x324e)&0x26*-0x90169+0x5bb832a+0x3*-0x76c9d7,_0x9fcde0=(_0x9fcde0^_0x9fcde0<<0x2349+0x882+-0x2bc7)&0x19b3fa2+-0x25*0x1b63fd+0x56664b2,_0x9fcde0=(_0x9fcde0^_0x9fcde0<<-0xbdc+0x27*0x51+0x1*-0x79)&-0x7*-0xe59d26+-0xb7b1817*-0x1+0x5*-0x1b929f8,_0x9fcde0);return(_0x3c7ae2(_0x239a87)<<0x2*0xf55+0xe74+0x168e*-0x2)+(_0x3c7ae2(_0x47fc1e)<<0x76a+0x756+-0x97*0x19)+_0x3c7ae2(_0x5cd941);},_0x425a81=this['getProp']('x'),_0x30add2=this['getProp']('y'),_0x204a80=this['getProp']('z'),{min:_0x4547d5,max:_0x5206bf}=_0x1c525b(_0x425a81),{min:_0x41c7e1,max:_0x5e9415}=_0x1c525b(_0x30add2),{min:_0x5d4664,max:_0x9912bc}=_0x1c525b(_0x204a80),_0x133fc6=_0x4547d5===_0x5206bf?-0x24db+0x1f*-0x111+0x45ea:(0x12c3+-0x7*0x3aa+0xae3)/(_0x5206bf-_0x4547d5),_0x27756b=_0x41c7e1===_0x5e9415?0x4fa*0x7+-0x209+-0x20cd:(-0x200+-0x1d9+-0x11f*-0x7)/(_0x5e9415-_0x41c7e1),_0x5719bc=_0x5d4664===_0x9912bc?-0x153f+0xaa6*0x1+0xa99:(0x3*0x6fd+-0x2707+-0x2c2*-0x8)/(_0x9912bc-_0x5d4664),_0x5676ee=new Map();for(let _0xde63b1=0x2cc+0xac6+0x1*-0xd92;_0xde63b1<this['numSplats'];_0xde63b1++){const _0x5203b0=Math['min'](-0x1f99+0x2538+-0x1a0,Math['floor']((_0x425a81[_0xde63b1]-_0x4547d5)*_0x133fc6)),_0x29fef6=Math['min'](-0x1015+-0x12d5+0x26e9,Math['floor']((_0x30add2[_0xde63b1]-_0x41c7e1)*_0x27756b)),_0x564955=Math['min'](-0x4c+-0x119d+0x15e8,Math['floor']((_0x204a80[_0xde63b1]-_0x5d4664)*_0x5719bc)),_0xe97799=_0x3c3e21(_0x5203b0,_0x29fef6,_0x564955),_0x282a85=_0x5676ee['get'](_0xe97799);_0x282a85?_0x282a85['push'](_0xde63b1):_0x5676ee['set'](_0xe97799,[_0xde63b1]);}const _0x332929=Array['from'](_0x5676ee['keys']())['sort']((_0x1807e3,_0x31461f)=>_0x1807e3-_0x31461f),_0x47588b=new Uint32Array(this['numSplats']);let _0x5d4462=-0x245*-0x8+-0x15bf+-0x397*-0x1;for(let _0x38e70e=-0x1d05+-0x1*0x12d6+-0x1*-0x2fdb;_0x38e70e<_0x332929['length'];++_0x38e70e){const _0xf9b482=_0x5676ee['get'](_0x332929[_0x38e70e]);for(let _0x46b6a4=-0x7*0x26d+0x7*-0x48b+0x30c8;_0x46b6a4<_0xf9b482['length'];++_0x46b6a4)_0x47588b[_0x5d4462++]=_0xf9b482[_0x46b6a4];}return _0x47588b;}['reorder'](_0x426ddf){const _0x119e01=new Map(),_0xe1d5c4=_0x383530=>{if(_0x119e01['has'](_0x383530)){const _0x4b3332=_0x119e01['get'](_0x383530);return _0x119e01['delete'](_0x383530),_0x4b3332;}return new ArrayBuffer(_0x383530);},_0x40ab50=_0x55de2b=>{_0x119e01['set'](_0x55de2b['byteLength'],_0x55de2b);},_0x24873a=_0x4ffaba=>{const _0xc68b9f=new _0x4ffaba['constructo'+'r'](_0xe1d5c4(_0x4ffaba['byteLength']));for(let _0x5d39d7=0x16d8+0x1467*-0x1+-0x271;_0x5d39d7<_0x426ddf['length'];_0x5d39d7++)_0xc68b9f[_0x5d39d7]=_0x4ffaba[_0x426ddf[_0x5d39d7]];return _0x40ab50(_0x4ffaba['buffer']),_0xc68b9f;};this['elements']['forEach'](_0x12397a=>{_0x12397a['properties']['forEach'](_0x18a9e7=>{_0x18a9e7['storage']&&(_0x18a9e7['storage']=_0x24873a(_0x18a9e7['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}async function QA(){const _0x415f8d=new Float32Array(0xf21+0x31f*0x7+-0x765*0x5);new Int32Array(_0x415f8d['buffer']);let _0x15bc7f=0x1393*0x1+-0x236d+0x2*0x7ed,_0x33212a={};self['onmessage']=async _0x253146=>{const {data:_0x2f4d93}=_0x253146;switch(_0x2f4d93['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x5959d5(_0x2f4d93['properties'],_0x2f4d93['timeIndex'],_0x2f4d93['timeOption']);break;case'releaseSeq'+'Data':_0x32f2d5(_0x2f4d93['index']);break;case'releaseAll'+'SeqData':_0x522b95();break;case'destroyWor'+'ker':_0x93f35e();break;}};const _0x45df5e=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x47ca13=0x106f*-0x1+0xe32*-0x1+0x1ea1;_0x47ca13<-0x2af+0x1*-0xbd2+-0x757*-0x2;++_0x47ca13)if(!_0x33212a['f_rest_'+_0x47ca13])return _0x47ca13;return 0x2647+0x3e8*-0x4+0x336*-0x7;})())]??-0x209b+-0x8*0x36f+0xa9*0x5b),_0x5959d5=(_0x1f1e93,_0x20b3b4,_0x520260)=>{var _0x385344,_0x34fae0;_0x15bc7f+=(((_0x385344=_0x1f1e93['position'])==null?void(-0x38f+0xaae+-0x71f*0x1):_0x385344['length'])??0x21d+-0x1fc4+0x1da7)/(-0x26da+0x1963+-0x19*-0x8a),console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20append'+'GSplatData'+'\x20numSplats',_0x15bc7f,(((_0x34fae0=_0x1f1e93['position'])==null?void(-0x20af+-0x27b+0x232a):_0x34fae0['length'])??-0x45*0x8d+-0x311*0x6+0x1*0x3867)/(0x22*-0x10b+0xda+0x229f));const _0x51dd34=Object['keys'](_0x1f1e93);for(let _0x4d5f99=-0x23e*0xc+-0x20cd+0x3fb*0xf;_0x4d5f99<_0x51dd34['length'];_0x4d5f99++){const _0x279bf8=_0x51dd34[_0x4d5f99],_0x4e5e59=_0x1f1e93[_0x279bf8],_0x3cd350=_0x33212a[_0x279bf8]??new Float32Array(-0x1f1b+-0x419+0x2334);if(_0x4e5e59){let _0x1811d5=null;switch(_0x279bf8){case'position':_0x1811d5=new Float32Array(_0x15bc7f*(0x1a67+0x1*0x12b5+-0x2d19));break;case'color_opac'+'ity':_0x1811d5=new Uint16Array(_0x15bc7f*(-0x1f*0x46+-0x3d*0x1f+-0xf*-0x10f));break;case'scale':_0x1811d5=new Uint16Array(_0x15bc7f*(-0x1b57+-0x179d+-0x3*-0x10fd));break;case'motion':_0x1811d5=new Float32Array(_0x15bc7f*(-0x1050+0xc61+0x3f2));break;case'rotation':_0x1811d5=new Float32Array(_0x15bc7f*(0x83f+0x1f40+0x1*-0x277c));break;default:_0x1811d5=new Float32Array(_0x15bc7f);break;}_0x1811d5['set'](_0x3cd350,0x1*0x59f+-0x1f8b*-0x1+-0x47*0x86),_0x1811d5['set'](_0x4e5e59,_0x3cd350['length']),_0x33212a[_0x279bf8]=_0x1811d5;}}const _0x1059be={};Object['keys'](_0x33212a)['forEach'](_0xc50232=>{_0xc50232==='scale'||_0xc50232==='color_opac'+'ity'?_0x1059be[_0xc50232]=new Uint16Array(_0x33212a[_0xc50232]['buffer']['slice']()):_0x1059be[_0xc50232]=new Float32Array(_0x33212a[_0xc50232]['buffer']['slice']());});const _0x5127f8=Object['keys'](_0x1059be)['map'](_0x5dd4bf=>_0x1059be[_0x5dd4bf]['buffer']),_0x3782fa=_0x58816a(),_0x5c92e3=Object['keys'](_0x3782fa)['map'](_0x3bf48c=>_0x3782fa[_0x3bf48c]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x1059be,'transformData':_0x3782fa},_0x5127f8['concat'](_0x5c92e3));},_0x58816a=()=>{const _0x320254=_0x33212a['position']['length']/(0xfb*0xb+0x9f8*0x1+-0x14be),_0x2077fe=_0x33212a['position'],_0x328b18=_0x33212a['scale'],_0x5d55ee=_0x33212a['rotation'],_0x3aae88=_0x33212a['motion'],_0x478fd1=_0x33212a['t'],_0x337cde=_0x33212a['t_scale'],_0x179290=_0x33212a['time_index'],_0x4889d3=_0x33212a['color_opac'+'ity'],_0x553f48=(_0x478fd1==null?void(-0x25aa+-0x8d5+0x2e7f*0x1):_0x478fd1['length'])>-0x1cc4+-0x7ad+-0x2471*-0x1;let _0x28d811=null,_0x2c88e5=null,_0x5ec027=null,_0x3a13cf=null;_0x553f48&&(_0x2c88e5=new Float32Array(_0x320254*(0x832*0x1+-0x218e*0x1+0x513*0x5)),_0x3a13cf=new Float32Array(_0x320254),_0x28d811=new Float32Array(_0x3aae88['buffer']['slice']()),_0x5ec027=new Float32Array(_0x3aae88['buffer']['slice']()));const _0xb061c3=new Float32Array(_0x2077fe['buffer']['slice']()),_0x291c30=new Float32Array(_0x2077fe['buffer']['slice']()),_0x5eaf51=new Uint16Array(_0x4889d3['buffer']['slice']()),_0x1f251b=new Uint16Array(_0x328b18['buffer']['slice']()),_0x41f876=new Float32Array(_0x5d55ee['buffer']['slice']());for(let _0xb5f05d=0x1*0x18c5+0xa0e+-0x22d3;_0xb5f05d<_0x320254;++_0xb5f05d)_0x553f48&&_0x2c88e5&&_0x3a13cf&&(_0x3a13cf[_0xb5f05d]=_0x337cde?Math['exp'](_0x337cde[_0xb5f05d]):-0x1c6b+-0x1954+0x35bf,_0x2c88e5[_0xb5f05d*(-0xe20*0x1+-0x180+0xfa3)+(-0x25f0+-0x887+0x2e77*0x1)]=_0x478fd1?_0x478fd1[_0xb5f05d]:-0x36*-0x7e+0x3aa+-0x452*0x7,_0x2c88e5[_0xb5f05d*(-0x16*0xdf+-0x19de+-0x2d0b*-0x1)+(-0x1b71+-0x1*-0x55d+0x1*0x1615)]=_0x3a13cf[_0xb5f05d]);const _0x213cf2=_0x337f64();let _0x51bcb6={'dataColor':_0x5eaf51,'dataCenters':_0x291c30,'dataPosition':_0xb061c3,'dataScale':_0x1f251b,'dataRotation':_0x41f876,..._0x213cf2};return _0x553f48&&(_0x51bcb6={..._0x51bcb6,'dataMotion':_0x28d811,'dataTime':_0x2c88e5,'motion':_0x5ec027,'tScaleArray':_0x3a13cf,'muT':new Float32Array(_0x478fd1),'timeIndex':new Float32Array(_0x179290)}),_0x51bcb6;},_0x3389df=_0x44bbd2=>{const _0x2427a4=[];for(let _0x14561b=-0xe08+0x12*0x1d3+-0x1d*0xa6;_0x14561b<_0x44bbd2;++_0x14561b)_0x2427a4['push'](_0x33212a['f_rest_'+_0x14561b]);return _0x2427a4;},_0x337f64=()=>{const _0x203e73=_0x45df5e();if(_0x203e73<=-0x12b+-0x6*0x11b+-0x7cd*-0x1)return{};const _0x2b16d5=_0x33212a['x']['length'],_0x1ad09d=new Uint32Array(_0x2b16d5*(0x177d+0x1624+-0x2d9d)),_0x43e850=new Uint32Array(_0x2b16d5*(-0x236c+-0xe4d+0x31bd)),_0x429efb=new Uint32Array(_0x2b16d5*(0x19b4+-0x1807+-0x1a9)),_0xf53c38=new Uint32Array(_0x2b16d5*(0x3*0x507+-0xcd2*-0x2+-0x28b5)),_0x2e47bc={0x1:0x3,0x2:0x8,0x3:0xf}[_0x203e73],_0x42c189=_0x3389df(_0x2e47bc*(-0x1d00+0x76+0x1*0x1c8d)),_0x21e775=-0x178d*0x1+0x392+-0x1bfa*-0x1,_0x1331a9=0xa02*0x2+-0x2495+0x1490,_0x465848=new Float32Array(-0x700+0x16d+-0xe*-0x66),_0x20ed44=new Uint32Array(_0x465848['buffer']),_0x4f09b4=new Array(_0x2e47bc*(0x572*-0x3+0x37f*-0x7+-0x6e*-0x5f))['fill'](-0x77c+0x1*0xec0+0x7c*-0xf);for(let _0xc97862=-0xb*0x80+-0x2c2+0x842;_0xc97862<_0x2b16d5;++_0xc97862){for(let _0xd90afc=0xf8d+0x952*0x4+0x1*-0x34d5;_0xd90afc<_0x2e47bc;++_0xd90afc)_0x4f09b4[_0xd90afc*(-0x7*0x64+0x217a*-0x1+0x119*0x21)]=_0x42c189[_0xd90afc][_0xc97862],_0x4f09b4[_0xd90afc*(0x116d+0x1330+-0x1*0x249a)+(-0x5f3+0x1c68+-0x1674)]=_0x42c189[_0xd90afc+_0x2e47bc][_0xc97862],_0x4f09b4[_0xd90afc*(-0xe08+-0x8*0x43+0x1023)+(0x5f3*0x1+-0xdf6+0x1*0x805)]=_0x42c189[_0xd90afc+_0x2e47bc*(-0x1eb*0x4+-0x1c9*-0x15+-0x1dcf*0x1)][_0xc97862];let _0x286f23=_0x4f09b4[0x5c9+0x3fa+-0x93*0x11];for(let _0x2ef960=0xa5*-0x1+0x14ac+0x1d2*-0xb;_0x2ef960<_0x2e47bc*(0x18b*-0x11+0x21eb*-0x1+0x3c29);++_0x2ef960)_0x286f23=Math['max'](_0x286f23,Math['abs'](_0x4f09b4[_0x2ef960]));if(_0x286f23!==0x1*-0xbc1+0x1*0x4ba+-0x707*-0x1){for(let _0x385d8c=-0x303+0x3*-0x58f+0x3*0x690;_0x385d8c<_0x2e47bc;++_0x385d8c)_0x4f09b4[_0x385d8c*(0xdf8+0x54*-0x49+0x9ff)+(0x24ea+-0x1*0x790+-0x1d5a)]=Math['max'](0x9*-0x33c+0x24a2+-0x786,Math['min'](_0x21e775,Math['floor']((_0x4f09b4[_0x385d8c*(0x13b3+0x4e*-0x18+-0xc60)+(0x49d+0x196e+0x1e0b*-0x1)]/_0x286f23*(0x1*0x1fd5+0x5*0x31d+0x17b3*-0x2+0.5)+(0x5f2+-0x29f*0x5+0x729+0.5))*_0x21e775+(0x1daf+-0x1*-0x97a+-0x5*0x7d5+0.5)))),_0x4f09b4[_0x385d8c*(0xe9b+0x93*0x31+-0x2abb)+(0x2663*-0x1+-0x92a+0x2f8e)]=Math['max'](-0x5*-0x1ba+-0x11a4+0x2*0x481,Math['min'](_0x1331a9,Math['floor']((_0x4f09b4[_0x385d8c*(0x903*-0x2+-0x4cd+-0x16d6*-0x1)+(-0x5cb*0x1+0x11c8*-0x2+0x295c)]/_0x286f23*(0x12b3*-0x1+-0x22d1+0x3584+0.5)+(-0x19ed*0x1+0x8*-0x66+0x1d1d*0x1+0.5))*_0x1331a9+(-0x5f*-0x44+0xf7*-0x15+-0x4f9+0.5)))),_0x4f09b4[_0x385d8c*(0x25c4+-0x48b+-0x2136)+(0x7a3*0x1+-0x1639+-0x74c*-0x2)]=Math['max'](-0x1006+-0x480+0x1486,Math['min'](_0x21e775,Math['floor']((_0x4f09b4[_0x385d8c*(0x2309*0x1+0xae5*0x2+-0x10*0x38d)+(0x10a0+-0x2*-0x1113+-0x43b*0xc)]/_0x286f23*(-0x70*0x5+0x5e2*0x1+0x56*-0xb+0.5)+(0x23fd*0x1+-0x12a3+-0x115a+0.5))*_0x21e775+(-0xb6a+-0x12ff+0x1e69+0.5))));_0x465848[0x2*0x64d+-0x19c*-0x3+-0x116e]=_0x286f23,_0x1ad09d[_0xc97862*(-0x1669+0x25cf+0x7b1*-0x2)+(-0x15d9+0x19b5*0x1+0x1ee*-0x2)]=_0x20ed44[-0x3f*-0xf+-0xd72+0x9c1],_0x1ad09d[_0xc97862*(0x7db+-0xa98+0x2c1)+(-0x12d*0x6+0x861+-0x152)]=_0x4f09b4[-0xa7*-0xc+0xdd3+-0x15a7]<<0x10d*-0xf+0x2277+-0x129f|_0x4f09b4[0x1*0xa7b+0x10d4+0x1e*-0xe9]<<0x1de6+-0x903+-0x14d8|_0x4f09b4[-0xc68+-0x7*0x31d+0x2235],_0x1ad09d[_0xc97862*(0x91*0x3b+0x23*0x75+-0x3166)+(0x32d+-0x61*-0x62+-0x13*0x21f)]=_0x4f09b4[0x1ce9*0x1+0x15ae+-0x3294]<<-0x12*0x13c+0x16+-0x1637*-0x1|_0x4f09b4[-0xef*0x4+-0x8fd+0xcbd]<<-0x1bd7+0x3*0x947+0xd*0x1|_0x4f09b4[-0x1*0x888+-0x1d87+-0x130a*-0x2],_0x1ad09d[_0xc97862*(-0x1*-0x647+0x1*-0xd1c+0x6d9)+(-0x19*-0x169+0x5*-0xc1+0x7*-0x47f)]=_0x4f09b4[-0x1*0x1d89+-0x9f*-0x35+-0x35c]<<-0x526*0x2+-0x1f75*-0x1+0x2*-0xa8a|_0x4f09b4[-0x1*0x634+-0x402*0x6+0x1e47]<<-0x9c9+0x3*-0xc53+0x2ecd|_0x4f09b4[0x1e4f*0x1+-0x51e+0x1929*-0x1],_0x203e73>0x1*-0x170f+-0x1*0x21a+-0x192a*-0x1&&(_0x43e850[_0xc97862*(0x1eb*0x12+-0xbf8*-0x3+-0x466a)+(-0x252c+0xfb7+0x1575)]=_0x4f09b4[-0x48a+-0x2*0xc93+-0x43f*-0x7]<<-0x17c5+0x7*-0x2ea+0x76*0x60|_0x4f09b4[-0x1785+0x26*-0x8e+0x36f*0xd]<<0x502+-0x5*-0x521+-0x1e9c|_0x4f09b4[0x2464+0x17*0x199+-0x4918],_0x43e850[_0xc97862*(0x9ac+-0x452+0x556*-0x1)+(0xc01+-0x15af+0x9af)]=_0x4f09b4[-0x3*0x7f7+0x67*0x29+0x772]<<-0xd*0x3+0x156*-0x6+0x840*0x1|_0x4f09b4[0x1c4f+0x191a+-0x1*0x355c]<<-0x20*-0x137+0x1b99*-0x1+-0xb3c|_0x4f09b4[-0x2d*-0x3d+-0xaec+-0x41*-0x1],_0x43e850[_0xc97862*(0x26cc+-0x6*0x3b+-0x2566)+(0x634+0x6c6+-0xcf8)]=_0x4f09b4[0x2b*-0xa1+0x12a*-0x13+0x3138]<<0x1458+0x16a7+0x1575*-0x2|_0x4f09b4[0xf0d+-0x2522+-0x1*-0x1625]<<-0x1cff+0x2*-0xf9a+-0x3c3e*-0x1|_0x4f09b4[-0x1721+-0x66d+0x1d9f],_0x43e850[_0xc97862*(0x19fa+0x18a*-0xe+-0x46a)+(0x1f0a+-0x1bd2+-0x335)]=_0x4f09b4[-0x124d+0x3c1*0x8+-0xba9]<<0x8b6+0x7b1*0x5+-0x2f16|_0x4f09b4[0x866+0x1142+-0x1995]<<-0x1*0x1ac8+-0x2*0x42+-0x91d*-0x3|_0x4f09b4[-0x15ec+-0xa65+0x1*0x2065],_0x203e73>0x1e0c+0xa5d*0x3+-0x3d21?(_0x429efb[_0xc97862*(-0x2a*0xb5+0xc*0x5+0x1d7a)+(-0x68f*-0x2+0x122*-0x10+0x502)]=_0x4f09b4[-0x60b+-0x4f*0x1a+0xe26]<<-0x1*-0xff5+0x1*-0x1edd+-0x3*-0x4ff|_0x4f09b4[0x4*0x5b+-0x1667+-0x1511*-0x1]<<0xb*-0x269+-0x9*-0x5e+0x18*0xf8|_0x4f09b4[0x5*0x6ef+0x1c17+-0x3eab*0x1],_0x429efb[_0xc97862*(0x2*0x580+-0x14c3+0x9c7)+(-0x23f8+0x1607+0xdf2)]=_0x4f09b4[0x104a+0x2e1*-0x2+-0xa70]<<-0x2503*-0x1+0x1cca+-0xaf4*0x6|_0x4f09b4[-0x1023+-0x3*-0x781+0x647*-0x1]<<-0x6d9*-0x2+-0x152*0x13+0xb6f|_0x4f09b4[-0xd*0x20b+-0x125*0x7+0x22ac],_0x429efb[_0xc97862*(-0x1819+-0x22c+-0x8c3*-0x3)+(-0x22*0xe5+-0x1*-0xdb8+-0x2*-0x85a)]=_0x4f09b4[-0xe17+0x21e7+-0x3f1*0x5]<<0x3d*0x2f+0x1b*0x16a+-0x314c|_0x4f09b4[-0x27e*-0xc+-0x1*-0x207d+-0x3e49]<<0x1589+-0x265e+0x10e0|_0x4f09b4[-0x9e9+-0x2*-0xf0d+-0x1*0x1414],_0x429efb[_0xc97862*(-0xa*0xe3+0x106a+-0x788)+(0x27f+0x748+0x14*-0x7d)]=_0x4f09b4[-0x3*-0x467+-0x13df+0x6c8]<<-0x455+0x48*-0x63+-0x1021*-0x2|_0x4f09b4[-0x1*-0x1e3b+0x12ef+-0x345*0xf]<<-0x712+-0xc43+-0x10*-0x136|_0x4f09b4[-0x795*0x3+0x23cc+-0xced],_0xf53c38[_0xc97862*(0xa4d+0x1*0x92b+-0x1374)+(-0x3*-0x51b+-0x1508+0x5b7)]=_0x4f09b4[0x14f7+0x1dca+0x18*-0x21c]<<0x25a6+0x12a3+-0x3834|_0x4f09b4[-0x1daf+-0xeb*0x26+0x40b3]<<0x11d2+0x13eb*-0x1+0x224|_0x4f09b4[0x1723*-0x1+-0x1e71*-0x1+-0x1*0x72b],_0xf53c38[_0xc97862*(0x229+-0x475+0x250)+(-0xa4d*-0x3+0x74d+0xb*-0x379)]=_0x4f09b4[-0x10b*-0xd+-0x1*0x1351+0xa*0x97]<<0x2a7*0x1+0xb*0x2d7+-0x1*0x21cf|_0x4f09b4[-0x16b3+0x7bf*-0x1+0x1e97]<<0x736+-0x267e+0x1f53|_0x4f09b4[0x20dd+-0x415*-0x1+-0x24cc],_0xf53c38[_0xc97862*(-0x11*0x109+-0x196a+0x2b07)+(-0x19c6+-0x186f+0x3237)]=_0x4f09b4[0x241c+-0x22a1+0x44*-0x5]<<-0x1*0x13b2+-0x159+0x10*0x152|_0x4f09b4[0xd14+-0xa36*-0x1+0x3*-0x7b6]<<-0x1*-0x1069+0x16a7+0x1*-0x2705|_0x4f09b4[-0x2092+-0x207+-0x2*-0x1161],_0xf53c38[_0xc97862*(0x139*0x1+0x180e+0xdf*-0x1d)+(-0x1c4c+-0x1*-0x1e7e+-0x22f*0x1)]=_0x4f09b4[0x34d*0xb+0xb4c+-0x2f71]<<0x6b*-0x2b+0xdb3*-0x1+0x1fc1|_0x4f09b4[-0x107c+0x39b*-0x7+-0xa79*-0x4]<<-0x1979+-0x5*-0x673+-0x6bb|_0x4f09b4[0xd52+0x1779+-0x249f]):_0x429efb[_0xc97862]=_0x4f09b4[-0x1ee2+-0x3b*0x77+0x3a64]<<-0x1e22+0x15e8+0x84f|_0x4f09b4[0x2*-0x175+0x11*-0x1b1+0x1fc1*0x1]<<0x1b3b+0xc*0x4d+0x1b6*-0x12|_0x4f09b4[-0x9b3+-0x29e+0x8*0x18d]);}}return{'sh1to3Data':_0x1ad09d,'sh4to7Data':_0x43e850,'sh8to11Data':_0x429efb,'sh12to15Data':_0xf53c38};},_0x32f2d5=_0x1575d1=>{if(!_0x33212a['time_index'])return;const _0x427818=_0x33212a['time_index']['findIndex'](_0x5315d6=>_0x5315d6===_0x1575d1);let _0x26d23b=_0x33212a['time_index']['findIndex']((_0x415d34,_0x1adb26)=>_0x415d34!==_0x1575d1&&_0x1adb26>_0x427818);if(_0x26d23b===-(-0x10f2+-0x1199*0x1+0x2*0x1146)&&_0x427818===-(0xac6+-0x158f+-0x1*-0xaca))return;_0x26d23b===-(-0x322+-0x1*-0x2195+-0x1e72)&&_0x427818!==-(-0x1*-0x22d2+0x812*-0x2+-0x12ad)&&(_0x26d23b=_0x33212a['time_index']['length']),_0x15bc7f-=_0x26d23b-_0x427818,console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20releas'+'eSeqData\x20n'+'umSplats',_0x15bc7f,_0x26d23b-_0x427818);const _0x41c9c2=Object['keys'](_0x33212a);for(let _0x26c62d=0xd95*0x1+0xf*0xe3+0x1ae2*-0x1;_0x26c62d<_0x41c9c2['length'];_0x26c62d++){const _0x5fe378=_0x41c9c2[_0x26c62d],_0x28740f=_0x33212a[_0x5fe378];if(_0x28740f){let _0x8a533b=0x11cf*0x1+-0x2*-0xc91+0xc*-0x394;switch(_0x5fe378){case'position':_0x8a533b=0x1*0xb0d+-0x212a+0x760*0x3;break;case'color_opac'+'ity':_0x8a533b=0x183a+-0x5*-0x24e+-0x1*0x23bc;break;case'scale':_0x8a533b=-0x7*-0x181+0x52*-0x49+0xcde;break;case'motion':_0x8a533b=-0xfe9+0x6d*0x2+-0x506*-0x3;break;case'rotation':_0x8a533b=-0x1*0x17cc+0x1f9f+-0x8*0xfa;break;default:_0x8a533b=0x10d*0x13+0x3*0x4f+0x1*-0x14e3;break;}const _0x55ac3e=new Float32Array(_0x15bc7f*_0x8a533b);_0x427818>-0x1*-0x196+0x26a1+-0x1d*0x163?(_0x55ac3e['set'](_0x28740f['subarray'](-0x2084+0x64*-0xb+-0x98*-0x3e,_0x427818*_0x8a533b),-0xe09*0x2+0x1edc+-0x2ca*0x1),_0x55ac3e['set'](_0x28740f['subarray'](_0x26d23b*_0x8a533b),_0x427818*_0x8a533b)):_0x55ac3e['set'](_0x28740f['subarray'](_0x26d23b*_0x8a533b),-0x1ea1+0x8ba+0x15e7),_0x33212a[_0x5fe378]=_0x55ac3e;}}},_0x522b95=()=>{const _0x9b3bc6=Object['keys'](_0x33212a);for(let _0x59be5c=0xc65*0x1+0x71*0x7+-0xf7c;_0x59be5c<_0x9b3bc6['length'];_0x59be5c++){const _0x4cb819=_0x9b3bc6[_0x59be5c];_0x33212a[_0x4cb819]&&(_0x33212a[_0x4cb819]=[]);}},_0x93f35e=()=>{_0x33212a={},_0x15bc7f=0x73a+-0x5e0+-0x15a;};}class JA extends me{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+QA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x3a3b16,_0x22aaf1,_0x38c3cc,_0x4c6832=!(-0x4f7*0x5+-0xe2d+-0x7cd*-0x5)){var _0x20f1f1,_0x42cd58;const _0x823a71={};return _0x3a3b16['elements'][0xc*0x3b+-0x6b9*-0x1+0x15b*-0x7]['properties']['forEach'](_0x5c5ff9=>{_0x823a71[_0x5c5ff9['name']]=_0x5c5ff9['storage'];}),_0x4c6832?(_0x20f1f1=this['worker'])==null||_0x20f1f1['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x823a71,'timeIndex':_0x22aaf1,'timeOption':_0x38c3cc},_0x3a3b16['elements'][-0x1*0x1709+-0x2563+-0x1e36*-0x2]['properties']['map'](_0x5186f1=>_0x5186f1['storage']['buffer'])):(_0x42cd58=this['worker'])==null||_0x42cd58['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x823a71,'timeIndex':_0x22aaf1,'timeOption':_0x38c3cc}),new Promise(_0x47b3bf=>{this['worker']['onmessage']=_0xd48c38=>{if(!this['worker'])return;const {data:_0x1afd05}=_0xd48c38;_0x1afd05['type']==='newAppendD'+'ata'&&_0x47b3bf(_0x1afd05);};});}async['releaseSeq'+'Data'](_0x62a617){var _0x450ab0;(_0x450ab0=this['worker'])==null||_0x450ab0['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x62a617});}async['releaseAll'+'SeqData'](){var _0x45c2f3;(_0x45c2f3=this['worker'])==null||_0x45c2f3['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x5b0c24;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x5b0c24=this['worker'])==null||_0x5b0c24['terminate'](),this['worker']=null);}}const gc=new te(),gg=new le(),eC=new ie(-0x131d+0x9f4+0x17*0x66,-0x1a53+0x1*0xaa6+0xfae,-0x103e+-0x26f6*0x1+-0x4*-0xdcd,-0x22a*-0x10+0x39*0x8f+-0x1*0x4277+0.4),Sg=0x5cc6e+0x2c3f6*0x2+0x141*-0x69a;class tC{constructor(_0x2fe9da,_0x15914e,_0x179c02,_0x500693,_0x5a81b8,_0x276464){const _0x292445=_0x2fe9da['getProp']('position'),_0x4a8ab6=_0x2fe9da['getProp']('color_opac'+'ity'),_0x4b1eed=_0x2fe9da['getProp']('scale'),_0x8b84df=_0x2fe9da['getProp']('motion'),_0x39acaa=_0x2fe9da['getProp']('rotation');this['read']=_0x5755be=>{_0x15914e&&_0x15914e['set'](_0x292445[_0x5755be*(-0x200d+-0x2279+0x1*0x4289)+(0x269*-0x1+-0x10f0+0x1359)],_0x292445[_0x5755be*(0x13d*0x16+-0x1*-0x2453+-0x3f8e)+(-0xf22*-0x2+0x3a5+-0x21e8)],_0x292445[_0x5755be*(-0x1*0xde8+-0xe34+-0x1*-0x1c1f)+(-0xd1*0x28+-0x1eb7+0x3f61)]),_0x179c02&&_0x179c02['set'](_0x39acaa[_0x5755be*(0x131d+0x620+-0xc9d*0x2)+(-0x5a1+-0x108e+-0x162f*-0x1)],_0x39acaa[_0x5755be*(-0x10a4+0xd41+0x366)+(-0x2f6*-0x5+-0x3*-0xa2a+-0x305*0xf)],_0x39acaa[_0x5755be*(0x1c2d*0x1+-0x3*-0xc3d+0x11*-0x3d1)+(-0x46c*-0x3+-0x1*0x1c73+-0x1*-0xf31)]),_0x500693&&_0x500693['set'](_0x4b1eed[_0x5755be*(0x2100+-0x1*0x370+0x5e9*-0x5)+(-0x24cb*0x1+0x172d+0xd9e)],_0x4b1eed[_0x5755be*(0x219a+0x1*0xef9+-0x3090)+(-0x955*-0x1+0x1b99+0x89*-0x45)],_0x4b1eed[_0x5755be*(0x3c5*0x1+-0x1826+0x1464)+(-0x2f1+0x7b*-0x49+0x13a*0x1f)]),_0x276464&&_0x8b84df&&_0x276464['set'](_0x8b84df[_0x5755be*(-0x9d6*0x2+-0x1810+0x2bbf)+(-0x1b48+0x1f9+0x194f)],_0x8b84df[_0x5755be*(0x13dc*0x1+0xe9e*-0x2+0x963)+(0x2*0x135b+0x6d4+-0x2d89)],_0x8b84df[_0x5755be*(0x2487+0x16f1*0x1+-0x3b75)+(-0x961+0x1a8f+-0x7*0x274)]),_0x5a81b8&&_0x5a81b8['set'](_0x4a8ab6[_0x5755be*(0x2692*-0x1+0xb*0x2fb+-0x37*-0x1b)+(-0x128f*0x1+0x3ca+0xc7*0x13)],_0x4a8ab6[_0x5755be*(0x14db*-0x1+0xef3+0x2f6*0x2)+(0x8*0x1cb+-0x1ae6+-0x5*-0x283)],_0x4a8ab6[_0x5755be*(-0xbed+-0x1*-0x1cff+-0x887*0x2)+(-0x100c+0xda5+0x1*0x269)],_0x4a8ab6[_0x5755be*(0x424+0xb92+-0xfb2)+(-0xabc*-0x1+0x1250*0x1+-0x1d09)]);};}}const sC=(_0x2c2049,_0x5a91b4,_0x177900)=>{gg['set'](_0x177900['x'],_0x177900['y'],_0x177900['z'],_0x177900['w'])['normalize'](),_0x2c2049['setTRS'](_0x5a91b4,gg,D['ONE']);};class iC{constructor(_0x886eb9,_0xd5292d=[],_0x2ad32d=[]){h(this,'elements'),h(this,'properties'),h(this,'numSplats',-0x1bb9+-0x5*-0x95+0x18d0),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x47ee09;(_0x47ee09=this['dataWorker'])==null||_0x47ee09['destroy'](),this['dataWorker']=null;});var _0x426201,_0x4533d0,_0x3c3461;this['elements']=_0x886eb9,this['properties']=_0x2ad32d,this['numSplats']=((_0x426201=this['getElement']('vertex'))==null?void(-0xc9f*-0x2+-0x9*0x62+-0x15cc):_0x426201['count'])??-0x1b40+0x4a9*0x6+-0xb6,this['comments']=_0xd5292d,this['is4D']=!!((_0x3c3461=(_0x4533d0=this['getElement']('vertex'))==null?void(0x1*-0xdc0+-0xb98+0x656*0x4):_0x4533d0['properties']['find'](_0x401b76=>_0x401b76['name']==='t'))!=null&&_0x3c3461['storage']);}async['appendGSpl'+'atData'](_0x5debbf,_0x5c97a0,_0x3ae415){var _0x5cb42f;let _0x1812c5=0x92+-0x3c4+0x199*0x2;for(let _0x3747e6=-0x17da+-0x1*0x2322+0x3afc;_0x3747e6<_0x3ae415['length']&&_0x5c97a0>_0x3ae415[_0x3747e6];_0x3747e6+=0x222f+-0x292+-0x1f*0x105)_0x1812c5=_0x3747e6/(-0x17ec*-0x1+-0x1*-0x1471+-0xec9*0x3);this['dataWorker']||(this['dataWorker']=new JA(),await this['dataWorker']['appendGSpl'+'atData'](this,0xd3*-0x29+-0x23fb+0x45c6,_0x3ae415));const _0x475b29=this['getElement']('vertex');_0x475b29&&(_0x475b29['count']=this['numSplats']);const _0x2513ae=await this['dataWorker']['appendGSpl'+'atData'](_0x5debbf,_0x1812c5,_0x3ae415,!(-0x1e62+-0x77e+0x25e0)),_0x43d20f=_0x2513ae['properties'],_0x545fe8=((_0x5cb42f=this['getElement']('vertex'))==null?void(0xcfd+0x1b7d+-0xb*0x3ae):_0x5cb42f['properties'])??[];for(const _0x4bb1e8 in _0x43d20f){const _0x2aef7b=_0x545fe8['find'](_0x3717f4=>_0x3717f4['name']===_0x4bb1e8);_0x2aef7b?_0x2aef7b['storage']=_0x43d20f[_0x4bb1e8]:_0x545fe8['push']({'type':'float','name':_0x4bb1e8,'storage':_0x43d20f[_0x4bb1e8],'byteSize':0x4});}this['transformD'+'ata']=_0x2513ae['transformD'+'ata'],this['numSplats']=_0x43d20f['position']['length']/(0x272*-0x2+-0x5b*-0x26+0x89b*-0x1);}async['releaseSeq'+'Data'](_0x26c4fa){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'leaseSeqDa'+'ta',_0x26c4fa),this['dataWorker']['releaseSeq'+'Data'](_0x26c4fa),this;}async['releaseAll'+'SeqData'](){var _0x2cbe9a;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'lease\x20all\x20'+'SeqData'),(_0x2cbe9a=this['dataWorker'])==null||_0x2cbe9a['releaseAll'+'SeqData'](),this;}['getProp'](_0x3b7b7a,_0xe5dad3='vertex'){var _0x1701a3,_0x40ab05;return(_0x40ab05=(_0x1701a3=this['getElement'](_0xe5dad3))==null?void(0x3aa+0x139*0x1f+-0x2991):_0x1701a3['properties']['find'](_0x29f8ee=>_0x29f8ee['name']===_0x3b7b7a))==null?void(0x225e+0x397+-0xed*0x29):_0x40ab05['storage'];}['getElement'](_0x1771c0){return this['elements']['find'](_0x446686=>_0x446686['name']===_0x1771c0);}['createIter'](_0x3173f0,_0x4ef85b,_0x5d75c8,_0x6e8d97,_0x5abc99){return new tC(this,_0x3173f0,_0x4ef85b,_0x5d75c8,_0x6e8d97,_0x5abc99);}['calcAabb'](_0x519c01,_0x2d5c77){let _0x186a45=-0x2313+0xca6+0x166d,_0x203b3c=-0x211*0x10+0x7*-0x566+0x179e*0x3,_0x528012=0x775*0x5+-0x1*0x21ed+0xa*-0x56,_0x3ff16c=0x2*-0x1eb+0x16c5+-0x1*0x12ef,_0x1e9415=-0x158f*0x1+-0x1cc2+0x3251,_0xe53826=-0x5*0x283+-0x8f1+0xac0*0x2,_0x536d5d=!(0x25d5+0x65*0x1d+0x7*-0x70a);const _0x41e0c4=this['getProp']('position'),_0x9012e6=this['getProp']('scale');for(let _0x41c15f=-0x104f+0x1752+-0x167*0x5;_0x41c15f<this['numSplats'];++_0x41c15f){if(_0x2d5c77&&!_0x2d5c77(_0x41c15f))continue;const _0x3d660e=_0x41e0c4[_0x41c15f*(-0x1*0x629+-0x41b*-0x5+-0xe5b)+(0x2431+-0x6df+0xea9*-0x2)],_0x1104c7=_0x41e0c4[_0x41c15f*(0xd1d+-0xc8f+-0x8b)+(0x1*0x24f+0x2ad+0xff*-0x5)],_0x3890b8=_0x41e0c4[_0x41c15f*(0x13*0x92+-0x113c+0x669)+(0x1*0x1fe7+0xcf7*0x2+-0x39d3)],_0x3b1e92=Math['max'](_0x9012e6[_0x41c15f*(-0xfcd+-0x1d36+0x3*0xf02)+(-0x78a*0x2+0x9bd+0x557)],_0x9012e6[_0x41c15f*(0xf91+0x9*0x2ab+-0x2791)+(-0x10*-0x1df+0x17e0+-0x35cf)],_0x9012e6[_0x41c15f*(-0x26fd+-0x314+0x2a14)+(0x6*0x53+-0x1d16+0x19*0x116)]);if(!isFinite(_0x3d660e)||!isFinite(_0x1104c7)||!isFinite(_0x3890b8)||!isFinite(_0x3b1e92))continue;const _0xcb78b8=(-0x2566+-0x1970+0x4*0xfb6)*Math['exp'](_0x3b1e92);_0x536d5d?(_0x536d5d=!(0xc9d+0x1f61*-0x1+0x12c5),_0x186a45=_0x3d660e-_0xcb78b8,_0x203b3c=_0x1104c7-_0xcb78b8,_0x528012=_0x3890b8-_0xcb78b8,_0x3ff16c=_0x3d660e+_0xcb78b8,_0x1e9415=_0x1104c7+_0xcb78b8,_0xe53826=_0x3890b8+_0xcb78b8):(_0x186a45=Math['min'](_0x186a45,_0x3d660e-_0xcb78b8),_0x203b3c=Math['min'](_0x203b3c,_0x1104c7-_0xcb78b8),_0x528012=Math['min'](_0x528012,_0x3890b8-_0xcb78b8),_0x3ff16c=Math['max'](_0x3ff16c,_0x3d660e+_0xcb78b8),_0x1e9415=Math['max'](_0x1e9415,_0x1104c7+_0xcb78b8),_0xe53826=Math['max'](_0xe53826,_0x3890b8+_0xcb78b8));}return _0x536d5d||(_0x519c01['center']['set']((_0x186a45+_0x3ff16c)*(0x428*0x4+-0x1*0x1656+-0x2b*-0x22+0.5),(_0x203b3c+_0x1e9415)*(-0x157a+-0x6*-0x1a3+-0x5d4*-0x2+0.5),(_0x528012+_0xe53826)*(0xb5*0x37+-0x1*0x1825+0x11*-0xde+0.5)),_0x519c01['halfExtent'+'s']['set']((_0x3ff16c-_0x186a45)*(0x1368+-0x10ed+-0x27b+0.5),(_0x1e9415-_0x203b3c)*(-0x1*0xfd4+0x4a6+0x36*0x35+0.5),(_0xe53826-_0x528012)*(0x26b1+-0x68f*0x5+0x5e6*-0x1+0.5))),!_0x536d5d;}['yieldToMai'+'n'](){var _0x28ae98;return(_0x28ae98=globalThis['scheduler'])!=null&&_0x28ae98['yield']?globalThis['scheduler']['yield']():new Promise(_0x56f3b3=>{setTimeout(_0x56f3b3,-0x13*0x19d+-0x1ad*-0x3+0x19a0);});}async['getCenters'](_0x4e8b2b){const _0x59518b=this['getProp']('x'),_0x1e56f7=this['getProp']('y'),_0x5171a3=this['getProp']('z');for(let _0x14b4a2=-0xe41+-0x9*-0x1f5+-0x35c;_0x14b4a2<this['numSplats'];++_0x14b4a2)_0x4e8b2b[_0x14b4a2*(-0x9*0x1b5+-0x424+0x1384)+(0x1*-0x1d87+-0x1*-0x1656+-0x1*-0x731)]=_0x59518b[_0x14b4a2],_0x4e8b2b[_0x14b4a2*(0xf5b+-0x2*0x13d+-0xcde)+(0x1be1+0x71*0xb+-0x20bb)]=_0x1e56f7[_0x14b4a2],_0x4e8b2b[_0x14b4a2*(0xa3*0x3b+-0x117+0x5*-0x74b)+(0x6d*-0xd+0x141*0x13+-0x2*0x924)]=_0x5171a3[_0x14b4a2],_0x14b4a2%Sg===-0x166a+0x22*-0xbc+0x2f62&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x30f6b6;if((_0x30f6b6=this['transformD'+'ata'])!=null&&_0x30f6b6['muT'])return this['transformD'+'ata']['muT'];const _0x53e193=this['getProp']('t');return _0x53e193?new Float32Array(_0x53e193):void(0x1e*0x10f+0xaf5+-0x3*0xe3d);}async['getTScale'](){const _0xd56ce1=this['getProp']('t_scale');if(!_0xd56ce1)return;const _0x59df07=new Float32Array(this['numSplats']);for(let _0x1998aa=0xb7d*0x1+-0xb3f*-0x3+-0x2d3a;_0x1998aa<this['numSplats'];++_0x1998aa)_0x59df07[_0x1998aa]=Math['exp'](_0xd56ce1[_0x1998aa]),_0x1998aa%Sg===-0x1*0x2398+-0x6*-0x3c4+-0x340*-0x4&&await this['yieldToMai'+'n']();return _0x59df07;}['getMotion'](_0x2737b8){const _0x3d56b3=this['getProp']('motion');_0x3d56b3&&new Float32Array(_0x3d56b3['buffer']['slice']());}['getTimeInd'+'ex'](){var _0x122aea;if((_0x122aea=this['transformD'+'ata'])!=null&&_0x122aea['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x5bbe4b=this['getProp']('time_index');if(_0x5bbe4b)return new Float32Array(_0x5bbe4b);}['calcFocalP'+'oint'](_0x401e48,_0x3df9aa){const _0x467256=this['getProp']('position'),_0x39791c=this['getProp']('scale');_0x401e48['x']=-0x3*0x427+0x97*0x3b+-0x34*0x6e,_0x401e48['y']=0x1a*0x113+0x1aff+-0x36ed,_0x401e48['z']=-0xf*-0x9b+-0x1f5b+0x1*0x1646;let _0x411ec2=-0x1*-0x1177+-0x15dd+0x466;for(let _0xfa217b=-0x466*0x2+0x1850+-0x3e1*0x4;_0xfa217b<this['numSplats'];++_0xfa217b){if(_0x3df9aa&&!_0x3df9aa(_0xfa217b))continue;const _0x59008d=_0x467256[_0xfa217b*(-0x1dc5+-0x1841+0x3609)+(-0x4e1*-0x1+-0x8*0x7+-0x4a9)],_0x557ebb=_0x467256[_0xfa217b*(0x1*-0x8b0+0x153d+-0xc8a)+(-0x44f*-0x5+0x12a9*0x1+-0x2833)],_0x32a608=_0x467256[_0xfa217b*(0x3d*-0x95+-0x20e6+0x446a)+(-0x58*-0x3a+-0x1277+-0x5*0x4b)];if(!isFinite(_0x59008d)||!isFinite(_0x557ebb)||!isFinite(_0x32a608))continue;const _0x4241fc=(0xc5*0xd+0x614+-0x1014)/(-0x1*-0x18fb+-0x1*0x937+0x327*-0x5+Math['max'](_0x39791c[_0xfa217b*(0x17c4+0xe45*0x1+0x2606*-0x1)+(0x31a*-0x2+-0x1*0xf52+0x1586)],_0x39791c[_0xfa217b*(-0x2d*-0x3c+0x99a+-0x1*0x1423)+(-0x960*-0x1+-0x236+0x1*-0x729)],_0x39791c[_0xfa217b*(0x7*-0x3bc+0x1cb6+0x28f*-0x1)+(-0x1a6e*0x1+0x1b84+0xc*-0x17)]));_0x401e48['x']+=_0x59008d*_0x4241fc,_0x401e48['y']+=_0x557ebb*_0x4241fc,_0x401e48['z']+=_0x32a608*_0x4241fc,_0x411ec2+=_0x4241fc;}_0x401e48['mulScalar']((0x13cf*-0x1+0x4b1+0xf1f)/_0x411ec2);}['renderWire'+'frameBound'+'s'](_0x2ee129,_0xf23e36){const _0x3b9ee9=new D(),_0x33a1f3=new le(),_0xabc884=new D(),_0x2deb08=new D(),_0x10ee63=new D(),_0xdc2bec=this['createIter'](_0x3b9ee9,_0x33a1f3,_0xabc884);for(let _0x22a35b=-0xd46*0x1+-0xdc1+0x1b07;_0x22a35b<this['numSplats'];++_0x22a35b)_0xdc2bec['read'](_0x22a35b),sC(gc,_0x3b9ee9,_0x33a1f3),gc['mul2'](_0xf23e36,gc),_0x2deb08['set'](_0xabc884['x']*-(0x2ad+-0x4f*0xb+-0x3*-0x3e),_0xabc884['y']*-(0x2431+0x5c*-0x2f+0xb*-0x1c1),_0xabc884['z']*-(0x14f7*-0x1+-0x13b4+0x28ad)),_0x10ee63['set'](_0xabc884['x']*(-0x8b*-0x47+-0x12da+-0x13b1),_0xabc884['y']*(-0x1*0x8f3+0x67+0x88e*0x1),_0xabc884['z']*(0x3*-0x982+0x1a53+0x235)),_0x2ee129['immediate']['drawWireAl'+'ignedBox'](_0x2deb08,_0x10ee63,eC,!(0x1*-0x10b1+0x1256+-0x1a5),_0x2ee129['defaultDra'+'wLayer'],gc);}get['isCompress'+'ed'](){return!(0x1b9c+0x4*-0x96b+0x3*0x35b);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x1b5393=-0xac4+0x187a+-0xdb6;_0x1b5393<-0x2d2*0xb+0xf3a*-0x2+0x3*0x148d;++_0x1b5393)if(!this['getProp']('f_rest_'+_0x1b5393))return _0x1b5393;return 0x13cf*-0x1+0xe72+-0x2c5*-0x2;})())]??-0x589*-0x4+-0x80a+-0xe1a;}['calcMorton'+'Order'](){const _0x732242=_0xdb15c4=>{let _0x2093cd=_0xdb15c4[-0x20e3*0x1+-0x1b66+0x3c49],_0x143527=_0xdb15c4[-0x20ca+0x1*0x747+0x1983];for(let _0x5e3a6c=-0x12ca+0x19*-0x13e+-0x1*-0x31d9;_0x5e3a6c<_0xdb15c4['length'];_0x5e3a6c++)_0xdb15c4[_0x5e3a6c]<_0x2093cd&&(_0x2093cd=_0xdb15c4[_0x5e3a6c]),_0xdb15c4[_0x5e3a6c]>_0x143527&&(_0x143527=_0xdb15c4[_0x5e3a6c]);return{'min':_0x2093cd,'max':_0x143527};},_0x39fd24=(_0x5987be,_0x4b44a8,_0x201968)=>{const _0x448148=_0x1138c4=>(_0x1138c4&=-0x1cb0+-0x551+0x2600,_0x1138c4=(_0x1138c4^_0x1138c4<<0xff8+0x1ff6+-0x2fde)&-0x7eb33d8*-0x36+-0x619dfcb1+-0x3e0*0x135a91,_0x1138c4=(_0x1138c4^_0x1138c4<<-0x1*-0x256a+0x3*0x983+0x4b*-0xe1)&-0x2cde8*-0x17+-0x24e6860+0x50ed897,_0x1138c4=(_0x1138c4^_0x1138c4<<0x18f1*-0x1+0x1797*0x1+0xe*0x19)&0x5edfc47+0x5469f96+-0x8286b1a*0x1,_0x1138c4=(_0x1138c4^_0x1138c4<<-0x19ce+-0x1008+0x29d8)&0x1*0xa3e6031+-0x1034fd*0x59+-0x4889e0d*-0x1,_0x1138c4);return(_0x448148(_0x201968)<<0x2009+-0xc*0x6d+-0x1aeb)+(_0x448148(_0x4b44a8)<<-0x23*-0xc5+0xc83+-0x2771)+_0x448148(_0x5987be);},_0x17a710=this['getProp']('x'),_0x22048f=this['getProp']('y'),_0x454aae=this['getProp']('z'),{min:_0x10836f,max:_0x2410fc}=_0x732242(_0x17a710),{min:_0x4ef5a6,max:_0xdf8c52}=_0x732242(_0x22048f),{min:_0x308c63,max:_0x29d908}=_0x732242(_0x454aae),_0x23385f=_0x10836f===_0x2410fc?0xd*0x2ba+-0x672+-0x1d00:(0x1*-0x207e+0x1611+0xe6d)/(_0x2410fc-_0x10836f),_0x5a6620=_0x4ef5a6===_0xdf8c52?-0x1f43+0x13d5+-0xb6e*-0x1:(0x13d1+-0x2613+-0x206*-0xb)/(_0xdf8c52-_0x4ef5a6),_0x4a2fcf=_0x308c63===_0x29d908?-0x1da4+-0x22c5+0x4069:(-0x11a4*0x1+-0x3*0x27f+0x1d21*0x1)/(_0x29d908-_0x308c63),_0x3f6968=new Map();for(let _0x43cce0=0x19c9*-0x1+-0x1807*-0x1+0x1c2;_0x43cce0<this['numSplats'];_0x43cce0++){const _0x306f27=Math['min'](-0x1bf1+-0x8f6+-0xda2*-0x3,Math['floor']((_0x17a710[_0x43cce0]-_0x10836f)*_0x23385f)),_0x533f11=Math['min'](0x693+-0x36f+0xdb,Math['floor']((_0x22048f[_0x43cce0]-_0x4ef5a6)*_0x5a6620)),_0x2055f9=Math['min'](0xcb7+-0x1895+0x1f*0x83,Math['floor']((_0x454aae[_0x43cce0]-_0x308c63)*_0x4a2fcf)),_0x37f1f3=_0x39fd24(_0x306f27,_0x533f11,_0x2055f9),_0x2b013b=_0x3f6968['get'](_0x37f1f3);_0x2b013b?_0x2b013b['push'](_0x43cce0):_0x3f6968['set'](_0x37f1f3,[_0x43cce0]);}const _0xb8c7b6=Array['from'](_0x3f6968['keys']())['sort']((_0x4ffb57,_0x2c48df)=>_0x4ffb57-_0x2c48df),_0x17b15f=new Uint32Array(this['numSplats']);let _0x5e83d8=-0x1*0x62+-0x9eb+0xa4d;for(let _0x5737a0=-0x1db2+-0x4d0*-0x1+0x18e2;_0x5737a0<_0xb8c7b6['length'];++_0x5737a0){const _0x51ee3d=_0x3f6968['get'](_0xb8c7b6[_0x5737a0]);for(let _0x28cfe0=-0xa67*-0x3+-0x2*-0x25f+0x1*-0x23f3;_0x28cfe0<_0x51ee3d['length'];++_0x28cfe0)_0x17b15f[_0x5e83d8++]=_0x51ee3d[_0x28cfe0];}return _0x17b15f;}['reorder'](_0xb2fe10){const _0x177ce2=new Map(),_0x58f2bb=_0x3aa6c1=>{if(_0x177ce2['has'](_0x3aa6c1)){const _0x74227e=_0x177ce2['get'](_0x3aa6c1);return _0x177ce2['delete'](_0x3aa6c1),_0x74227e;}return new ArrayBuffer(_0x3aa6c1);},_0xe6be9f=_0x2ccb08=>{_0x177ce2['set'](_0x2ccb08['byteLength'],_0x2ccb08);},_0x21fc43=_0x46d1e6=>{const _0x1b7ecc=new _0x46d1e6['constructo'+'r'](_0x58f2bb(_0x46d1e6['byteLength']));for(let _0x1e3ae2=0x3be+0x5*0x751+-0x2853;_0x1e3ae2<_0xb2fe10['length'];_0x1e3ae2++)_0x1b7ecc[_0x1e3ae2]=_0x46d1e6[_0xb2fe10[_0x1e3ae2]];return _0xe6be9f(_0x46d1e6['buffer']),_0x1b7ecc;};this['elements']['forEach'](_0x2cad89=>{_0x2cad89['properties']['forEach'](_0x479f66=>{_0x479f66['storage']&&(_0x479f66['storage']=_0x21fc43(_0x479f66['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}const rC='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20void\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(vert'+'ex_positio'+'n,\x200.0,\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a',aC='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'vec4\x20packR'+'gb(vec3\x20v)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uvec3\x20vb\x20'+'=\x20uvec3(cl'+'amp(v,\x20vec'+'3(0.0),\x20ve'+'c3(1.0))\x20*'+'\x20vec3(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uint\x20bits\x20'+'=\x20(vb.x\x20<<'+'\x2021)\x20|\x20(vb'+'.y\x20<<\x2010)\x20'+'|\x20vb.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4((u'+'vec4(bits)'+'\x20>>\x20uvec4('+'24,\x2016,\x208,'+'\x200))\x20&\x20uve'+'c4(0xff))\x20'+'/\x20vec4(255'+'.0);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20vec3\x20dir'+';\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20sampler2'+'D\x20centroid'+'s;\x0a\x20\x20\x20\x20uni'+'form\x20mediu'+'mp\x20float\x20s'+'hN_mins;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20f'+'loat\x20shN_m'+'axs;\x0a\x0a\x20\x20\x20\x20'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20ivec'+'2\x20uv\x20=\x20ive'+'c2(gl_Frag'+'Coord.xy)\x20'+'*\x20ivec2(SH'+'_COEFFS,\x201'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20mediump\x20v'+'ec3\x20coeffi'+'cients[SH_'+'COEFFS];\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(int\x20i\x20=\x20'+'0;\x20i\x20<\x20SH_'+'COEFFS;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20s\x20=\x20texe'+'lFetch(cen'+'troids,\x20iv'+'ec2(uv.x\x20+'+'\x20i,\x20uv.y),'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20coefficie'+'nts[i]\x20=\x20m'+'ix(vec3(sh'+'N_mins),\x20v'+'ec3(shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20packRgb'+'(evalSH(co'+'efficients'+',\x20dir)\x20*\x200'+('.25\x20+\x200.5)'+';\x0a\x20\x20\x20\x20}\x0a'),nC='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput:\x20Vert'+'exInput)\x20-'+'>\x20VertexOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Ver'+'texOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a',oC='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'fn\x20packRgb'+'(v:\x20vec3f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vb\x20=\x20v'+'ec3u(clamp'+'(v,\x20vec3f('+'0.0),\x20vec3'+'f(1.0))\x20*\x20'+'vec3f(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20bits\x20='+'\x20dot(vb,\x20v'+'ec3u(1\x20<<\x20'+'21,\x201\x20<<\x201'+'0,\x201));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(('+'vec4u(bits'+')\x20>>\x20vec4u'+'(24,\x2016,\x208'+',\x200))\x20&\x20ve'+'c4u(0xff))'+'\x20/\x20vec4f(2'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20un'+'iform\x20dir:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'shN_mins:\x20'+'f32;\x0a\x20\x20\x20\x20u'+'niform\x20shN'+'_maxs:\x20f32'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20centroids'+':\x20texture_'+'2d<f32>;\x0a\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input:'+'\x20FragmentI'+'nput)\x20->\x20F'+'ragmentOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20uv\x20=\x20'+'vec2i(inpu'+'t.position'+'.xy)\x20*\x20vec'+'2i(SH_COEF'+'FS,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'coefficien'+'ts:\x20array<'+'vec3f,\x20SH_'+'COEFFS>;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x200;\x20i\x20'+'<\x20SH_COEFF'+'S;\x20i++)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s:\x20v'+'ec3f\x20=\x20tex'+'tureLoad(c'+'entroids,\x20'+'vec2i(uv.x'+'\x20+\x20i,\x20uv.y'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20coeffic'+'ients[i]\x20='+'\x20mix(vec3f'+'(uniform.s'+'hN_mins),\x20'+'vec3f(unif'+('orm.shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20packRgb'+'(evalSH(&c'+'oefficient'+'s,\x20uniform'+'.dir)\x20*\x200.'+'25\x20+\x200.5);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20}'+'\x0a'),lC='\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20sampler2D'+'\x20sh0;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x20\x20\x20\x20u'+'niform\x20med'+'iump\x20sampl'+'er2D\x20sh_re'+'sult;\x0a\x0a\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20sh0_mi'+'ns;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20sh0_maxs;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20SH_C0\x20=\x20'+'0.28209479'+'177387814;'+'\x0a\x0a\x20\x20\x20\x20//\x20u'+'npack\x2011,\x20'+'11,\x2010\x20nor'+'malized\x20va'+'lue\x20from\x20r'+'gba8\x20textu'+'re\x20sample\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackRgb(v'+'ec4\x20v)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uve'+'c4\x20uv\x20=\x20uv'+'ec4(v\x20*\x2025'+'5.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uint\x20b'+'its\x20=\x20(uv.'+'x\x20<<\x2024)\x20|'+'\x20(uv.y\x20<<\x20'+'16)\x20|\x20(uv.'+'z\x20<<\x208)\x20|\x20'+'uv.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uvec3\x20'+'vb\x20=\x20(uvec'+'3(bits)\x20>>'+'\x20uvec3(21,'+'\x2010,\x200))\x20&'+'\x20uvec3(0x7'+'ffu,\x200x7ff'+'u,\x200x3ffu)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3(vb)\x20/\x20ve'+'c3(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20baseSampl'+'e\x20=\x20mix(sh'+'0_mins,\x20sh'+'0_maxs,\x20te'+'xelFetch(s'+'h0,\x20source'+'.uv,\x200));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20resolve\x20'+'base\x20color'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4\x20base\x20='+'\x20vec4(vec3'+'(0.5)\x20+\x20ba'+'seSample.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'baseSample'+'.w)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'xtract\x20sph'+'erical\x20har'+'monics\x20pal'+'ette\x20index'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20label'+'Sample\x20=\x20i'+'vec2(texel'+'Fetch(sh_l'+'abels,\x20sou'+'rce.uv,\x200)'+'.xy\x20*\x20255.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20int\x20n\x20=\x20'+('labelSampl'+'e.x\x20+\x20labe'+'lSample.y\x20'+'*\x20256;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20shSample\x20'+'=\x20texelFet'+'ch(sh_resu'+'lt,\x20ivec2('+'n\x20%\x2064,\x20n\x20'+'/\x2064),\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20sh\x20=\x20('+'unpackRgb('+'shSample)\x20'+'-\x20vec3(0.5'+'))\x20*\x204.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'(base.xyz\x20'+'+\x20sh,\x20base'+'.w);\x0a\x20\x20\x20\x20}'+'\x0a'),cC='\x0a\x20\x20\x20\x20var\x20s'+'h0:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'h_labels:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20sh_re'+'sult:\x20text'+'ure_2d<f32'+'>;\x0a\x0a\x20\x20\x20\x20un'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20sh0_m'+'axs:\x20vec4f'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20SH_C0:\x20'+'f32\x20=\x200.28'+'2094791773'+'87814;\x0a\x0a\x20\x20'+'\x20\x20//\x20unpac'+'k\x2011,\x2011,\x20'+'10\x20normali'+'zed\x20value\x20'+'from\x20rgba8'+'\x20texture\x20s'+'ample\x0a\x20\x20\x20\x20'+'fn\x20unpackR'+'gb(v:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20bits'+'\x20=\x20dot(vec'+'4u(v\x20*\x20255'+'.0),\x20vec4u'+'(1u\x20<<\x2024,'+'\x201u\x20<<\x2016,'+'\x201u\x20<<\x208,\x20'+'1u));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20vb'+'\x20=\x20(vec3u('+'bits)\x20>>\x20v'+'ec3u(21,\x201'+'0,\x200))\x20&\x20v'+'ec3u(0x7ff'+'u,\x200x7ffu,'+'\x200x3ffu);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec3f'+'(vb)\x20/\x20vec'+'3f(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20f'+'n\x20readColo'+'r(source:\x20'+'ptr<functi'+'on,\x20SplatS'+'ource>)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'baseSample'+':\x20vec4f\x20=\x20'+'mix(unifor'+'m.sh0_mins'+',\x20uniform.'+'sh0_maxs,\x20'+'textureLoa'+'d(sh0,\x20sou'+'rce.uv,\x200)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20base\x20'+'=\x20vec4f(ve'+'c3f(0.5)\x20+'+'\x20baseSampl'+'e.xyz\x20*\x20SH'+'_C0,\x201.0\x20/'+'\x20(1.0\x20+\x20ex'+'p(-baseSam'+'ple.w)));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20extract\x20'+'spherical\x20'+'harmonics\x20'+'palette\x20in'+'dex\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20labe'+'lSample:\x20v'+'ec2i\x20=\x20vec'+'2i(texture'+'Load(sh_la'+'bels,\x20sour'+'ce.uv,\x200).'+'xy\x20*\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20n\x20=\x20l'+('abelSample'+'.x\x20+\x20label'+'Sample.y\x20*'+'\x20256;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hSample:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(s'+'h_result,\x20'+'vec2i(n\x20%\x20'+'64,\x20n\x20/\x2064'+'),\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'h:\x20vec3f\x20='+'\x20(unpackRg'+'b(shSample'+')\x20-\x20vec3f('+'0.5))\x20*\x204.'+'0;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(base.'+'xyz\x20+\x20sh,\x20'+'base.w);\x0a\x20'+'\x20\x20\x20}\x0a'),hC=(_0x19f91c,_0x21505e)=>{for(const _0x28bd8a in _0x21505e)_0x19f91c['resolve'](_0x28bd8a)['setValue'](_0x21505e[_0x28bd8a]);};class dC extends ys{constructor(){super(...arguments),h(this,'executeCal'+'lback',null);}['execute'](){var _0x36e06f;(_0x36e06f=this['executeCal'+'lback'])==null||_0x36e06f['call'](this);}}const yg=new te(),uo=new D();class fC{constructor(_0x16b65e,_0x432df8){h(this,'prevDir',new D()),h(this,'updateMode','enable'),(this['device']=_0x16b65e,this['gsplatInst'+'ance']=_0x432df8);const {resource:_0x3d37d8}=_0x432df8,_0x3d14ee=new Map(Pe['get'](_0x16b65e,_0x16b65e['isWebGPU']?'wgsl':'glsl'));this['shader']=$t['createShad'+'er'](_0x16b65e,{'uniqueName':'gsplatReso'+'lveSH','vertexGLSL':rC,'fragmentGLSL':aC,'vertexWGSL':nC,'fragmentWGSL':oC,'vertexIncludes':_0x3d14ee,'fragmentIncludes':_0x3d14ee,'fragmentDefines':new Map([['SH_BANDS',_0x3d37d8['gsplatData']['shBands']['toString']()]]),'attributes':{'vertex_position':Me}}),this['texture']=_0x3d37d8['createText'+'ure']('centroids',Ne,new J(-0x1e3*0x13+-0x1*-0x263f+-0x226,0x1ad0+0x12e7+-0x29b7)),this['renderTarg'+'et']=new gt({'colorBuffer':this['texture'],'depth':!(0x1104+0x1*0x56e+-0x1671)}),this['renderPass']=new dC(_0x16b65e),this['renderPass']['init'](this['renderTarg'+'et'],{}),this['renderPass']['colorOps']['clear']=!(-0x1c8d+-0x1759+-0xb6*-0x49),this['quadRender']=new Ah(this['shader']);const {material:_0x17258d}=_0x432df8;_0x17258d['setDefine']('SH_BANDS','0');const {shaderChunks:_0x1fff6d}=_0x17258d;_0x1fff6d['glsl']['set']('gsplatSogs'+'ColorVS',lC),_0x1fff6d['wgsl']['set']('gsplatSogs'+'ColorVS',cC),_0x17258d['update'](),_0x16b65e['scope']['resolve']('sh_result')['setValue'](this['texture']);}['destroy'](){const {gsplatInstance:_0x525eb7}=this,{material:_0x3dffc4}=_0x525eb7;_0x3dffc4['setDefine']('SH_BANDS',_0x525eb7['resource']['gsplatData']['shBands']['toString']());const {shaderChunks:_0x51751b}=_0x3dffc4;_0x51751b['glsl']['delete']('gsplatSogs'+'ColorVS'),_0x51751b['wgsl']['delete']('gsplatSogs'+'ColorVS'),_0x3dffc4['update'](),this['quadRender']['destroy'](),this['renderPass']['destroy'](),this['renderTarg'+'et']['destroy'](),this['texture']['destroy'](),this['shader']['destroy']();}['render'](_0x45e156,_0x488c1f){const {prevDir:_0x389484,updateMode:_0x355dbd}=this;if(_0x355dbd==='disable'||(yg['invert'](_0x488c1f),yg['transformV'+'ector'](_0x45e156['forward'],uo),uo['normalize'](),_0x355dbd==='enable'&&uo['equalsAppr'+'ox'](_0x389484,0x35c+0x501+-0x85d*0x1+0.001)))return;_0x389484['copy'](uo);const _0x236f80=()=>{const {device:_0xfb25fb}=this,{sh_centroids:_0x46a821,meta:_0x1fc568}=this['gsplatInst'+'ance']['resource']['gsplatData'];hC(_0xfb25fb['scope'],{'dir':uo['toArray'](),'centroids':_0x46a821,'shN_mins':_0x1fc568['shN']['mins'],'shN_maxs':_0x1fc568['shN']['maxs']}),_0xfb25fb['setCullMod'+'e'](bt),_0xfb25fb['setDepthSt'+'ate'](Yt['NODEPTH']),_0xfb25fb['setStencil'+'State'](null,null),_0xfb25fb['setBlendSt'+'ate'](pt['NOBLEND']),this['quadRender']['render']();};this['renderPass']['executeCal'+'lback']=_0x236f80,this['renderPass']['render']();}}const uC='\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20means_l'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20means_'+'u;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20quats'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20scales'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20uint\x20n'+'umSplats;\x0a'+'\x0a\x20\x20\x20\x20uint\x20'+'packU32(ve'+'c4\x20v)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20uint(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u\x20|\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20uint('+'v.y\x20*\x20255.'+'0)\x20<<\x2016u\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uin'+'t(v.z\x20*\x2025'+'5.0)\x20<<\x208u'+'\x20|\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(v.w\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20uv'+'ec4\x20packU3'+'2(vec4\x20a,\x20'+'vec4\x20b,\x20ve'+'c4\x20c,\x20vec4'+'\x20d)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uvec4(pac'+'kU32(a),\x20p'+'ackU32(b),'+'\x20packU32(c'+'),\x20packU32'+'(d));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20w\x20='+'\x20int(textu'+'reSize(mea'+'ns_l,\x200).x'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ivec2\x20uv\x20'+'=\x20ivec2(gl'+'_FragCoord'+'.xy);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(ui'+'nt(uv.x\x20+\x20'+'uv.y\x20*\x20w)\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansLSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_l,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansUSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_u,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20quatsSamp'+'le\x20=\x20texel'+'Fetch(quat'+'s,\x20uv,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20scales'+'Sample\x20=\x20t'+'exelFetch('+'scales,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shLabel'+'sSample\x20=\x20'+'texelFetch'+'(sh_labels'+',\x20uv,\x200).x'+('y;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20pcFragCo'+'lor0\x20=\x20pac'+'kU32(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansLS'+'ample,\x20shL'+'abelsSampl'+'e.x),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansUS'+'ample,\x20shL'+'abelsSampl'+'e.y),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(quatsSa'+'mple),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4(scales'+'Sample,\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20}\x0a'),pC='\x0a\x20\x20\x20\x20var\x20m'+'eans_l:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20means_u'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20qua'+'ts:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'cales:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sh_label'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20numSpla'+'ts:\x20u32;\x0a\x0a'+'\x20\x20\x20\x20fn\x20pac'+'kU32(v:\x20ve'+'c4<f32>)\x20-'+'>\x20u32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(u32(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20(u3'+'2(v.y\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20\x20|\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(u32(v.z\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20u32(v.w'+'\x20*\x20255.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20packU'+'Vec32(a:\x20v'+'ec4<f32>,\x20'+'b:\x20vec4<f3'+'2>,\x20c:\x20vec'+'4<f32>,\x20d:'+'\x20vec4<f32>'+')\x20->\x20vec4<'+'u32>\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4<u32'+'>(packU32('+'a),\x20packU3'+'2(b),\x20pack'+'U32(c),\x20pa'+'ckU32(d));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20@fragmen'+'t\x0a\x20\x20\x20\x20fn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20w:\x20u32\x20'+'=\x20textureD'+'imensions('+'means_l,\x200'+').x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2<u32>'+'\x20=\x20vec2<u3'+'2>(pcPosit'+'ion.xy);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv.x\x20+\x20uv'+'.y\x20*\x20w\x20>=\x20'+'uniform.nu'+'mSplats)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20fetch\x20the'+'\x20source\x20in'+'dex\x20and\x20ca'+'lculate\x20so'+'urce\x20uv\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'meansLSamp'+'le:\x20vec3<f'+('32>\x20=\x20text'+'ureLoad(me'+'ans_l,\x20uv,'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20meansUSam'+'ple:\x20vec3<'+'f32>\x20=\x20tex'+'tureLoad(m'+'eans_u,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20quatsSam'+'ple:\x20vec4<'+'f32>\x20=\x20tex'+'tureLoad(q'+'uats,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20scal'+'esSample:\x20'+'vec3<f32>\x20'+'=\x20textureL'+'oad(scales'+',\x20uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shLa'+'belsSample'+':\x20vec2<f32'+'>\x20=\x20textur'+'eLoad(sh_l'+'abels,\x20uv,'+'\x200).xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20packUVec'+'32(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansLSam'+'ple,\x20shLab'+'elsSample.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansUSam'+'ple,\x20shLab'+'elsSample.'+'y),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(quatsSamp'+'le),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4(scalesSa'+'mple,\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a'),An=0x1806+-0x5d7+-0x122f+0.28209479177387814,Ci=_0x2ac5d5=>_0x2ac5d5['read'](-0x1*0x80b+-0x1781+-0x2*-0xfc6,-0xf*-0x4b+0x1cd5+-0x213a,_0x2ac5d5['width'],_0x2ac5d5['height'],{'mipLevel':0x0,'face':0x0,'immediate':!(0x1f1a+-0x1a46+-0x4d4)}),mC=(_0x39a83b,_0x5ea71c)=>{for(const _0x4c7372 in _0x5ea71c)_0x39a83b['resolve'](_0x4c7372)['setValue'](_0x5ea71c[_0x4c7372]);};class _C{constructor(_0x3b27b7,_0x46a805,_0x52a2c7,_0x135cc1,_0x504470,_0x5da46a){const _0x19f7c6=(_0x491882,_0x96c563,_0x12d920)=>_0x491882*(0x1815+0x15d+-0x1971-_0x12d920)+_0x96c563*_0x12d920,{meta:_0x5a81eb}=_0x3b27b7,{means:_0x4821d3,scales:_0x481aae,sh0:_0x642723,shN:_0x3409b6}=_0x5a81eb,_0x4872ec=_0x46a805&&_0x3b27b7['means_l']['_levels'][-0x2*-0xb9+-0xb*-0xf3+-0xbe3],_0x6fc9c4=_0x46a805&&_0x3b27b7['means_u']['_levels'][-0x1181+0x594+0x47*0x2b],_0x5e2f77=_0x52a2c7&&_0x3b27b7['quats']['_levels'][0x2b*0xd7+0x53*0x2b+-0x320e],_0x5ab4df=_0x135cc1&&_0x3b27b7['scales']['_levels'][-0x208*-0xd+0x21d1+-0x3c39],_0x250f96=_0x504470&&_0x3b27b7['sh0']['_levels'][-0x8ee*-0x1+-0x43*-0x13+-0xde7],_0x1db816=_0x5da46a&&_0x3b27b7['sh_labels']['_levels'][-0x1de0*0x1+0x236*-0x4+0x26b8],_0x4719ab=_0x5da46a&&_0x3b27b7['sh_centroi'+'ds']['_levels'][0x1*0x937+0x816+-0x114d],_0x2328b3=(-0x176f*0x1+0x138*-0x10+-0x1*-0x2af1)/Math['sqrt'](-0x16*0x141+-0xf2d+0x2ac5);this['read']=_0x36ca34=>{if(_0x46a805){const _0x293f5b=_0x19f7c6(_0x4821d3['mins'][-0x1*0x40f+-0x1*-0xeb4+-0x5*0x221],_0x4821d3['maxs'][-0x21cd+0x40+0x1*0x218d],((_0x6fc9c4[_0x36ca34*(0x225a+0xd6f+0x6d3*-0x7)+(0x28c+-0xf2c+0x4*0x328)]<<-0x224c+0x9*0x312+0x2*0x359)+_0x4872ec[_0x36ca34*(-0xbc0+0x17ed*-0x1+0x23b1)+(0xd0e+0x16bc*-0x1+-0x15*-0x76)])/(-0x19559*0x1+0x1*0xa20a+0x1f34e)),_0x5a28c1=_0x19f7c6(_0x4821d3['mins'][0xe9d+0x283*0xd+-0x2f43],_0x4821d3['maxs'][-0x155a+-0x2109+-0x3b*-0xec],((_0x6fc9c4[_0x36ca34*(-0xe9*-0x1f+-0x1398+-0x89b*0x1)+(0x1*-0x11ff+-0x4*0x74f+0x2f3c)]<<0x9*0x2d+0xf70+-0x10fd)+_0x4872ec[_0x36ca34*(-0x9b3*-0x1+-0x22cc+0x191d)+(-0x3d*-0x97+0x7*-0x16+-0x8d8*0x4)])/(0x62*0x16a+-0x113d*-0x11+-0xafa2)),_0x442844=_0x19f7c6(_0x4821d3['mins'][0x396+-0x9*-0x5d+0x1*-0x6d9],_0x4821d3['maxs'][-0x1a7b+0x1971+-0x2*-0x86],((_0x6fc9c4[_0x36ca34*(-0x130a*0x1+0x45*0x12+0xca*0x12)+(0x3b*0x40+-0x1d59+0xe9b)]<<-0xeea+-0x7e4+0x16d6)+_0x4872ec[_0x36ca34*(-0x47*-0x3+0x268e+-0x275f)+(0x1*0x12d3+-0x2508+0x1*0x1237)])/(0xd1e6+0x170dd+-0x1c*0xb87));_0x46a805['x']=Math['sign'](_0x293f5b)*(Math['exp'](Math['abs'](_0x293f5b))-(-0x4a9+0x1*-0x229d+0x2747)),_0x46a805['y']=Math['sign'](_0x5a28c1)*(Math['exp'](Math['abs'](_0x5a28c1))-(-0x2013+0xca*0x2b+0x9e*-0x3)),_0x46a805['z']=Math['sign'](_0x442844)*(Math['exp'](Math['abs'](_0x442844))-(-0xcb6*-0x3+-0x101b+-0x1606*0x1));}if(_0x52a2c7){const _0x116d25=(_0x5e2f77[_0x36ca34*(-0x2*0x229+-0x7f4*0x3+0x1c32)+(-0x1*0x23f6+0x20*-0x133+0x4a56)]/(-0x1bb*0x7+-0x6*0x38b+0x225e)-(0x14c3+-0x1f2a+0xa67+0.5))*_0x2328b3,_0x5d728d=(_0x5e2f77[_0x36ca34*(0x45f*-0x7+0x13*-0x15b+0x1*0x385e)+(0x9*0x120+0x1595+-0x4*0x7ed)]/(0x5c1+0x9a0*0x4+-0x71*0x62)-(-0x1a97+0x1345*-0x1+0x2ddc+0.5))*_0x2328b3,_0x19f22e=(_0x5e2f77[_0x36ca34*(-0x8c4+0x149d+0xe9*-0xd)+(-0x1f44+0x1fe6*-0x1+0x3f2c)]/(0x5b*-0x51+-0x13a7+0x3171*0x1)-(-0x26*0x8c+-0x17*-0xfc+0xe*-0x22+0.5))*_0x2328b3,_0x67d0f2=Math['sqrt'](Math['max'](-0x4*0x377+-0x7*-0x58f+0x247*-0xb,-0xb75+0x1*-0x1551+-0x20c7*-0x1-(_0x116d25*_0x116d25+_0x5d728d*_0x5d728d+_0x19f22e*_0x19f22e)));switch(_0x5e2f77[_0x36ca34*(-0x3*0xba3+0xabd*-0x2+0x3867)+(-0x1477+-0xa81*-0x1+0x9f9)]-(-0x1ef7+0x5fd+0x19f6*0x1)){case 0xecd+0x899+-0x2*0xbb3:_0x52a2c7['set'](_0x116d25,_0x5d728d,_0x19f22e,_0x67d0f2);break;case-0x218d+0x1d66+0x2*0x214:_0x52a2c7['set'](_0x67d0f2,_0x5d728d,_0x19f22e,_0x116d25);break;case-0x16*-0x107+-0xe*0x22e+0x152*0x6:_0x52a2c7['set'](_0x5d728d,_0x67d0f2,_0x19f22e,_0x116d25);break;case-0x1*0x172c+0x21e7*0x1+-0xab8:_0x52a2c7['set'](_0x5d728d,_0x19f22e,_0x67d0f2,_0x116d25);break;}}if(_0x135cc1){const _0x2bd8d3=_0x19f7c6(_0x481aae['mins'][0xd19*0x1+-0x5c8+0x751*-0x1],_0x481aae['maxs'][-0x2b8+-0x4eb+0x7a3],_0x5ab4df[_0x36ca34*(0x1fe8*-0x1+-0x2b*0x48+0x2c04)+(-0x203d+-0x2*-0xdbd+0x4c3)]/(-0x1*0x769+0x1*0x12bd+0x211*-0x5)),_0x5c5773=_0x19f7c6(_0x481aae['mins'][0x1*-0x15cf+-0x1*-0x222f+-0xc5f],_0x481aae['maxs'][0x1*-0x2e+-0xf*0xc8+0xb*0x115],_0x5ab4df[_0x36ca34*(0x19a5+0x581+-0x1f22)+(0x1251+0xbcd+-0x1e1d)]/(-0x657*-0x6+0xe71*0x2+-0x96b*0x7)),_0x4a9452=_0x19f7c6(_0x481aae['mins'][0x1ced+0x1008+0x137*-0x25],_0x481aae['maxs'][-0x71*0x35+-0x12*0x225+-0x6f*-0x8f],_0x5ab4df[_0x36ca34*(-0x7*0x49e+-0x13bb+-0x1*-0x3411)+(0xc5f+-0x1e82+0x1225)]/(-0xf10+-0x32c+0x133b));_0x135cc1['set'](_0x2bd8d3,_0x5c5773,_0x4a9452);}if(_0x504470){const _0xb264ea=_0x19f7c6(_0x642723['mins'][0x26b3*-0x1+-0x7e2*0x3+0x5ab*0xb],_0x642723['maxs'][0x1784+-0x7*-0x300+-0x2c84],_0x250f96[_0x36ca34*(0x4*0x5b6+-0x1a9a+0x2a*0x17)+(0x1*-0xdc+0x20b2+-0xfeb*0x2)]/(-0x197b*-0x1+0x2*0x817+-0x28aa)),_0x1c6f68=_0x19f7c6(_0x642723['mins'][0x1*0x1f01+0x1b5c+-0x3a5c],_0x642723['maxs'][0x8c*-0x25+-0x113e+0x65*0x5f],_0x250f96[_0x36ca34*(-0x3*-0x112+0x1033*0x1+0x3*-0x677)+(-0x1667+-0x1*-0x1557+0x111)]/(-0xbe+-0xfd3+-0x10*-0x119)),_0x4839f5=_0x19f7c6(_0x642723['mins'][-0x67d*-0x4+-0x652+-0x13a0],_0x642723['maxs'][0x2a1*-0x9+-0x211c+-0x3*-0x12ed],_0x250f96[_0x36ca34*(0x24db+-0xc5f*-0x3+-0x2*0x24fa)+(-0x1*-0x11b9+0x2*-0xda9+-0x99b*-0x1)]/(0x8f*-0x2b+-0x453+0x1d57)),_0x58a142=_0x19f7c6(_0x642723['mins'][-0x2554+0xea6+-0x16b1*-0x1],_0x642723['maxs'][0xbfe+0x1*-0x1c8b+0x2*0x848],_0x250f96[_0x36ca34*(0xd93+-0x1*-0x1f7d+-0x2d0c)+(-0x89*-0x1c+-0x2*-0x18+-0xf29)]/(0x238d+-0x70f+0x1b7f*-0x1));_0x504470['set'](0x118b+-0xe76+-0x107*0x3+0.5+_0xb264ea*An,-0xfc+-0x1696+0x1792+0.5+_0x1c6f68*An,0x4e0+-0xba1+0x5b*0x13+0.5+_0x4839f5*An,(0x706+0x45*-0x1a+0x3*-0x1)/(-0x1ad2+-0x24eb+0x3fbe+Math['exp'](-_0x58a142)));}if(_0x5da46a){const _0x319545=_0x1db816[_0x36ca34*(0x114c+0xdd*0x16+-0x2446)+(-0x1e95+-0x16*0x15d+0x3c93)]+(_0x1db816[_0x36ca34*(-0xd3*0x1d+0xb3b+0xcb0)+(-0xacd+0x152*0x11+-0xba4)]<<-0xec4+-0xa87+-0x871*-0x3),_0x17250d=_0x319545%(0xc29+-0x5ee+-0x5fb)*(-0x1ccd+-0x29*-0x86+0x766),_0xd6992f=Math['floor'](_0x319545/(-0xb24*0x3+0x1c0c+-0xf*-0x60));for(let _0x18b7b0=-0x18cb+-0x1b91+-0x45d*-0xc;_0x18b7b0<-0xc37*-0x2+0x1*-0x21e0+0x975;++_0x18b7b0)for(let _0x51ae7e=-0x6ad+-0x425*0x7+0x8ec*0x4;_0x51ae7e<0x6d3+0xb1c+-0x11e0;++_0x51ae7e)_0x5da46a[_0x18b7b0*(0x107*0xe+0x90f+-0x1762*0x1)+_0x51ae7e]=_0x19f7c6(_0x3409b6['mins'],_0x3409b6['maxs'],_0x4719ab[(_0x17250d+_0x51ae7e)*(-0x1692+0x205*-0x6+0x2*0x115a)+_0x18b7b0+_0xd6992f*_0x3b27b7['sh_centroi'+'ds']['width']*(-0x142*0xe+-0x10d7*0x1+0x1*0x2277)]/(0x1*-0x38c+0x206b+-0x6f8*0x4));}};}}class gC{constructor(){h(this,'meta'),h(this,'numSplats'),h(this,'means_l'),h(this,'means_u'),h(this,'quats'),h(this,'scales'),h(this,'sh0'),h(this,'sh_centroi'+'ds'),h(this,'sh_labels'),h(this,'packedText'+'ure');}['destroy'](){var _0xeb7e7e,_0x184e16,_0xc5f7aa,_0x2086b4,_0x5956db,_0x4b4232,_0x55f10d,_0x1cf9af;(_0xeb7e7e=this['means_l'])==null||_0xeb7e7e['destroy'](),(_0x184e16=this['means_u'])==null||_0x184e16['destroy'](),(_0xc5f7aa=this['quats'])==null||_0xc5f7aa['destroy'](),(_0x2086b4=this['scales'])==null||_0x2086b4['destroy'](),(_0x5956db=this['sh0'])==null||_0x5956db['destroy'](),(_0x4b4232=this['sh_centroi'+'ds'])==null||_0x4b4232['destroy'](),(_0x55f10d=this['sh_labels'])==null||_0x55f10d['destroy'](),(_0x1cf9af=this['packedText'+'ure'])==null||_0x1cf9af['destroy']();}['createIter'](_0x4c2963,_0x390853,_0x4d48c3,_0x3c922c,_0x5623b1){return new _C(this,_0x4c2963,_0x390853,_0x4d48c3,_0x3c922c,_0x5623b1);}['calcAabb'](_0x4a523b){const {mins:_0x32e2ba,maxs:_0x353732}=this['meta']['means'],_0x23612b=_0x3d107a=>Math['sign'](_0x3d107a)*(Math['exp'](Math['abs'](_0x3d107a))-(0x516+-0x21a7*0x1+-0xe49*-0x2));_0x4a523b['center']['set']((_0x23612b(_0x32e2ba[0x18e+0x963*-0x4+0x10f*0x22])+_0x23612b(_0x353732[-0x9c+-0xcc9*0x1+0x477*0x3]))*(-0x7*-0x41b+-0x2*-0xcac+-0x3615+0.5),(_0x23612b(_0x32e2ba[-0x2077*-0x1+-0xc31*-0x3+-0x4509])+_0x23612b(_0x353732[0x2383+0x2*-0xdcc+-0x7ea]))*(0x1bcd+-0x1550+0x1*-0x67d+0.5),(_0x23612b(_0x32e2ba[-0x221f*0x1+-0x3*-0x9d+0x1*0x204a])+_0x23612b(_0x353732[-0xc4+-0xb*-0x4b+-0x13*0x21]))*(-0x1*-0x1705+-0x1*0xcd0+-0xa35+0.5)),_0x4a523b['halfExtent'+'s']['set']((_0x23612b(_0x353732[-0x7be*-0x2+-0xd*0x1a1+0x5b1])-_0x23612b(_0x32e2ba[-0x43b+-0x1a*-0x13a+-0x1ba9]))*(0x1*0x1b1c+0x1506+0x7a*-0x65+0.5),(_0x23612b(_0x353732[0xabd+0x3*-0x32b+-0x13b])-_0x23612b(_0x32e2ba[0xbc*0x14+0x235e+-0x320d]))*(-0x1*-0x2554+0xb57+-0x30ab+0.5),(_0x23612b(_0x353732[-0x224*-0xd+0x147a+-0x304c])-_0x23612b(_0x32e2ba[-0x7ae+0x3*0x4cf+0x5*-0x159]))*(0x1f*0x13f+-0x1017+-0x168a+0.5));}['getCenters'](_0x4daf00){const {meta:_0x22a615,means_l:_0x15d66a,means_u:_0x1f5b90,numSplats:_0x8db467}=this,{means:_0x7c214f}=_0x22a615,_0x5b1435=new Uint32Array(_0x1f5b90['_levels'][-0x1*-0xfec+0x1*0x18da+-0x1463*0x2]['buffer']),_0x213202=new Uint32Array(_0x15d66a['_levels'][0x18a4+0x6*0x26+0x2*-0xcc4]['buffer']),_0x598e8d=_0x7c214f['mins'][-0x96e+-0x3*0xca+0xbcc*0x1]/(0x15613+-0x1dfec*-0x1+0x2*-0x11b00),_0x17ff50=_0x7c214f['mins'][0x1832+-0x9c6+-0x1*0xe6b]/(-0x1*-0x8ba3+0x922b*0x1+-0x1dcf),_0x30a462=_0x7c214f['mins'][0x249e+-0x13*-0x79+-0x2d97]/(0x1e99f+0x17f27+-0x7b5b*0x5),_0x50ba3e=_0x7c214f['maxs'][0xb1b+-0x69*0x17+-0x6b*0x4]/(0x2*-0x2c5d+-0x7eb0*-0x2+0x5b59),_0x39dca9=_0x7c214f['maxs'][0x1686+0xb3*-0x1c+0x1*-0x2f1]/(-0xe6*0xf0+-0x4673+0x21e12),_0x143179=_0x7c214f['maxs'][-0x1*-0x2265+-0x1*0x1247+-0x101c]/(0xafd5+-0x407*-0x6d+-0x166d1);for(let _0x38c5a1=-0x1*0x1e8d+-0x7b*0x26+0x30cf;_0x38c5a1<_0x8db467;_0x38c5a1++){const _0x193a7a=_0x38c5a1,_0x25f0ff=_0x5b1435[_0x193a7a],_0x4fd4a7=_0x213202[_0x193a7a],_0x57c54b=_0x25f0ff<<-0x5*-0x64a+0x716+-0x2680&0x84*-0x2fc+-0x1eef6+0x477e6|_0x4fd4a7&-0x23b9+0x1f*0x91+-0x147*-0xf,_0x3f0edb=_0x25f0ff&-0x1*-0x4cd9+0x1*-0x212c+0xd353|_0x4fd4a7>>>0x13e8+-0x4*-0x54a+-0x2908&0x9f1+-0x1d8*0x1+-0x71a,_0x5c64ba=_0x25f0ff>>>0x1816+0x133b*0x2+0x4*-0xfa1&-0x1449f+-0x40*0x61c+0x3ca9f|_0x4fd4a7>>>0xda2+-0x551*0x3+0x261*0x1&0x0+0x4*0x71+-0xc5,_0x5faebe=_0x598e8d*(-0x6716+0x1*-0xe2b7+0x124e6*0x2-_0x57c54b)+_0x50ba3e*_0x57c54b,_0xfe922d=_0x17ff50*(-0x434b+-0x2*-0x5c4b+-0xc9c*-0xb-_0x3f0edb)+_0x39dca9*_0x3f0edb,_0x1d65e9=_0x30a462*(0xa*-0x2b33+-0x9fd0*0x3+0x48f6d-_0x5c64ba)+_0x143179*_0x5c64ba,_0x20dafb=_0x5faebe<0x1*0xf5b+-0x3b2+-0xba9?-_0x5faebe:_0x5faebe,_0x43387b=_0xfe922d<0x12e5+-0x1be6*-0x1+-0x2ecb?-_0xfe922d:_0xfe922d,_0x4f3a00=_0x1d65e9<-0xdf3*-0x1+-0x13a+0xcb9*-0x1?-_0x1d65e9:_0x1d65e9;_0x4daf00[_0x38c5a1*(-0x1*0xe41+-0x1a5*0xd+0x7d*0x49)]=(_0x5faebe<0xa4*-0x22+0x1*-0x218e+0x3756?-(-0xbf8+-0x65*-0x1+0x2*0x5ca):-0x1fa9*-0x1+0x5b5+-0x255d*0x1)*(Math['exp'](_0x20dafb)-(-0x70a*-0x5+-0x1ca6+-0x19*0x43)),_0x4daf00[_0x38c5a1*(-0x120b+0x1c9e+-0x1a*0x68)+(-0x1f1c+0x9*0x317+-0x11a*-0x3)]=(_0xfe922d<0x150c+-0xb1+-0x145b?-(0x94f*-0x3+0x1*0x1b5b+-0x3*-0x31):-0x1ba2+0x49*0x43+0x888)*(Math['exp'](_0x43387b)-(0x2201+-0xc82+-0x72a*0x3)),_0x4daf00[_0x38c5a1*(0x1*-0x2349+0xc0d+0x173f)+(-0x188a+-0x1*0x19c5+0x3251)]=(_0x1d65e9<0x93*-0x1e+-0x15c7+0x2701?-(-0x6*-0x2b+-0xb*-0x68+-0x579):0x11*0xe2+0x100a+0x1*-0x1f0b)*(Math['exp'](_0x4f3a00)-(-0x1e29+-0x1*0x227f+0x40a9));}}['calcFocalP'+'oint'](_0x5bd240,_0x1ef08a){_0x5bd240['set'](-0x81*-0x45+-0xef3+-0x13d2,0x1037+-0x1f43*0x1+0xf0c,0xb1d+0x7*0x50f+-0x2e86);}get['isSogs'](){return!(-0x1821+0x1*-0x1958+0x3179);}get['shBands'](){var _0x2e25b1;return{0xc0:0x1,0x200:0x2,0x3c0:0x3}[(_0x2e25b1=this['sh_centroi'+'ds'])==null?void(-0x23f8+-0x1*0x1640+-0x4*-0xe8e):_0x2e25b1['width']]??-0x81*-0xd+0x1*0x3d7+-0xa64;}async['decompress'](){const _0x561de7=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3'],{shBands:_0x4fd822}=this,{means_l:_0x229196,means_u:_0x583091,quats:_0x336ea9,scales:_0xfe3218,sh0:_0x1a0a1b,sh_labels:_0x29ec3c,sh_centroids:_0x19e54c}=this;if(_0x229196['_levels'][-0x1ee5+0x135f+0x76*0x19]=await Ci(_0x229196),_0x583091['_levels'][0x3*0x3f1+0x4ef*0x2+-0x73b*0x3]=await Ci(_0x583091),_0x336ea9['_levels'][-0x113*0xb+0xb9a+0x37]=await Ci(_0x336ea9),_0xfe3218['_levels'][-0x22bc+0x1abb+0x801]=await Ci(_0xfe3218),_0x1a0a1b['_levels'][-0x1566+-0x16f*-0x1b+0x3*-0x5c5]=await Ci(_0x1a0a1b),_0x4fd822>0x158a+-0x1*0x41e+-0x5*0x37c){_0x29ec3c['_levels'][-0x1*0xfaf+-0x16c7*-0x1+-0x718]=await Ci(_0x29ec3c),_0x19e54c['_levels'][-0x11b*-0x1+0xe83*0x2+0x1e21*-0x1]=await Ci(_0x19e54c);const _0x56c52a=[];for(let _0x1c0999=-0x183b*-0x1+-0xeb5+0x2e*-0x35;_0x1c0999<0x24e2+-0x11e2+-0x12d3;++_0x1c0999)_0x56c52a['push']('f_rest_'+_0x1c0999);_0x561de7['splice'](_0x561de7['indexOf']('f_dc_0')+(-0x1755+0xfd*-0xd+-0x242f*-0x1),0x6d*0x15+0x26c7+-0x2fb8,..._0x56c52a);}const _0x5348f9={};_0x561de7['forEach'](_0x976c31=>{_0x5348f9[_0x976c31]=new Float32Array(this['numSplats']);});const _0x8bc212=new D(),_0x48fd6e=new le(),_0x5149d7=new D(),_0x1c8f15=new re(),_0x29fdcf=_0x4fd822>-0x23e6+-0x14b*0x7+-0x137*-0x25?new Float32Array(0x13d8+-0x1a26+0x7*0xed):null,_0x41a53f=this['createIter'](_0x8bc212,_0x48fd6e,_0x5149d7,_0x1c8f15,_0x29fdcf);for(let _0xa34cb9=0x34c*-0x2+-0x1d21*0x1+-0x127*-0x1f;_0xa34cb9<this['numSplats'];++_0xa34cb9)if(_0x41a53f['read'](_0xa34cb9),_0x5348f9['x'][_0xa34cb9]=_0x8bc212['x'],_0x5348f9['y'][_0xa34cb9]=_0x8bc212['y'],_0x5348f9['z'][_0xa34cb9]=_0x8bc212['z'],_0x5348f9['rot_1'][_0xa34cb9]=_0x48fd6e['x'],_0x5348f9['rot_2'][_0xa34cb9]=_0x48fd6e['y'],_0x5348f9['rot_3'][_0xa34cb9]=_0x48fd6e['z'],_0x5348f9['rot_0'][_0xa34cb9]=_0x48fd6e['w'],_0x5348f9['scale_0'][_0xa34cb9]=_0x5149d7['x'],_0x5348f9['scale_1'][_0xa34cb9]=_0x5149d7['y'],_0x5348f9['scale_2'][_0xa34cb9]=_0x5149d7['z'],_0x5348f9['f_dc_0'][_0xa34cb9]=(_0x1c8f15['x']-(0x49+0x1d62*0x1+-0x5ef*0x5+0.5))/An,_0x5348f9['f_dc_1'][_0xa34cb9]=(_0x1c8f15['y']-(-0x1*0x1402+0x1*-0x674+0x1a76+0.5))/An,_0x5348f9['f_dc_2'][_0xa34cb9]=(_0x1c8f15['z']-(-0x12d*-0x16+0x53*0x71+-0x3e81*0x1+0.5))/An,_0x5348f9['opacity'][_0xa34cb9]=_0x1c8f15['w']<=0xcee+-0x9fb*0x3+0x1103?-(0x74b*-0x3+0x11e+-0x165*-0xf):_0x1c8f15['w']>=0x874*-0x1+-0x10*-0x151+-0xc9b?-0x11*-0x8d+-0xfd4+-0x71*-0xf:-Math['log']((-0x1*-0xcb4+0x242+-0xef5)/_0x1c8f15['w']-(-0x184+0x5*-0x335+0x118e)),_0x29fdcf){for(let _0x373576=0xf43*0x1+0x1f*0x83+-0x1f20;_0x373576<-0x1f*0x106+0x1*-0x1ee3+-0x156*-0x2f;++_0x373576)_0x5348f9['f_rest_'+_0x373576][_0xa34cb9]=_0x29fdcf[_0x373576];}return new qn([{'name':'vertex','count':this['numSplats'],'properties':_0x561de7['map'](_0x283190=>({'name':_0x283190,'type':'float','byteSize':0x4,'storage':_0x5348f9[_0x283190]}))}]);}['packGpuMem'+'ory'](){const {means_l:_0x56b5cb,means_u:_0x3b5cec,quats:_0x52f0b6,scales:_0x26677b,sh_labels:_0x277a07,numSplats:_0x28bad3}=this,{device:_0x2f1628}=_0x56b5cb,{scope:_0x1f18c5}=_0x2f1628,_0x3ee44e=$t['createShad'+'er'](_0x2f1628,{'uniqueName':'GsplatSogs'+'ReorderSha'+'der','attributes':{'vertex_position':Me},'vertexChunk':'fullscreen'+'QuadVS','fragmentGLSL':uC,'fragmentWGSL':pC,'fragmentOutputTypes':['uvec4']}),_0x36547f=new gt({'colorBuffer':this['packedText'+'ure'],'depth':!(0x79*0x24+-0x179d+-0x41*-0x1a),'mipLevel':0x0});_0x2f1628['setCullMod'+'e'](bt),_0x2f1628['setBlendSt'+'ate'](pt['NOBLEND']),_0x2f1628['setDepthSt'+'ate'](Yt['NODEPTH']),mC(_0x1f18c5,{'means_l':_0x56b5cb,'means_u':_0x3b5cec,'quats':_0x52f0b6,'scales':_0x26677b,'sh_labels':_0x277a07??_0x56b5cb,'numSplats':_0x28bad3}),Ar(_0x2f1628,_0x36547f,_0x3ee44e),_0x36547f['destroy'](),_0x3ee44e['destroy']();}async['prepareGpu'+'Data'](){const {device:_0x4d12f9,height:_0x4dea90,width:_0x2fde31}=this['means_l'];this['means_l']['_levels'][-0x748+0x766*-0x1+0xeae]=await Ci(this['means_l']),this['means_u']['_levels'][-0xb9*-0x28+-0x7*-0x2f1+-0x317f]=await Ci(this['means_u']),this['packedText'+'ure']=new _e(_0x4d12f9,{'name':'sogsPacked'+'Texture','width':_0x2fde31,'height':_0x4dea90,'format':Ue,'mipmaps':!(0x1600+0x24ad+-0x5*0xbbc)}),_0x4d12f9['on']('devicerest'+'ored',()=>{this['packGpuMem'+'ory']();}),this['packGpuMem'+'ory']();}['reorderDat'+'a'](){return this['prepareGpu'+'Data']();}}async function SC(){let _0x2489af=null,_0x3ad251=null,_0x814df2=null,_0x21ede9=null,_0x2c324d=null,_0x4752f2=null,_0x5069af=null,_0x1bdc5c=null,_0x1baf33=null,_0x53b79f=null,_0x16e768=null,_0x50d1c=null,_0x3ddfd9=null,_0x43fdb0=null,_0x40aee6=null,_0x22cffc=null,_0x672766=null,_0x1b2cdf=null,_0x4a7019=null,_0x2eb03f=null,_0x9465f2=null,_0x6c8b73=null,_0x233e8c=null,_0x32d206=null,_0x163ffb=Float32Array['BYTES_PER_'+'ELEMENT'],_0x38340e=Uint32Array['BYTES_PER_'+'ELEMENT'],_0x18a347=0x14a1+0xc06+-0x20a7,_0x333e54=!(-0xe31+-0x70*-0xc+0x8f1),_0x5b76cf,_0x36f6e9,_0x3e2502={'x':0x0,'y':0x0,'z':0x0},_0x470ade={'x':0x0,'y':0x0,'z':0x0},_0x311dc2=!(0x28d*-0x9+-0xa13*-0x2+0x2cf),_0x5e63fb=!(-0x173*0x7+-0x1953+0x2378),_0x3c8b9f=!(0x21ca+-0xd50+-0x1*0x1479),_0x31a481=!(0x2287+0x228b*-0x1+0x5),_0x399008=0x1593+0x1e83+-0x3416,_0x56ddf8=0x7c7+0xa03*0x1+-0x2e*0x63,_0x5f3b2b=!(-0x1*0x1fb+0x203*-0x7+0x1011),_0x5d0c1b=null,_0x61d8d8=!(0x33d*-0x9+-0x10cc*-0x1+0x22*0x5d),_0x5c02be=0xb*-0x13+-0xef6+-0x1*-0xfc7,_0x43aa6e=0x3d*0x15+0x1321*0x2+-0x2b43*0x1,_0x41a837={'x':0x0,'y':0x0,'z':0x0},_0x338ffb={'x':0x0,'y':0x0,'z':0x0},_0x364121,_0x4d54c4;self['onmessage']=async _0x5f1c9e=>{const {data:_0x427da5}=_0x5f1c9e;switch(_0x427da5['type']){case'initWorker':await _0x3880aa(_0x427da5['sortWasmUr'+'l']),self['postMessag'+'e']({'type':'initialize'+'d'});break;case'initData':if(_0x18a347=_0x427da5['centers']['length']/(-0x1715+0x14cf+-0x41*-0x9),_0x18a347<=0x1a*-0x6d+-0x5*-0xa7+0x7cf||!_0x3ad251)return;_0x5552c8(),_0x333e54=_0x427da5['is4d'],_0x364121=_0x427da5['id'];const _0x544697=_0x4d1da6(_0x18a347);if(_0x3f954e(_0x544697),_0x814df2[0x1999+0xd9f*0x1+0xa*-0x3ec]=_0x41a837['x'],_0x814df2[-0x5bb*-0x4+0xd*-0xe8+-0xb23]=_0x41a837['y'],_0x814df2[-0x1476+0xb*0x313+-0xd59]=_0x41a837['z'],_0x21ede9[0xb49+0x1315+-0x1e5e]=_0x338ffb['x'],_0x21ede9[0x1803+-0x1cdf+-0x3*-0x19f]=_0x338ffb['y'],_0x21ede9[-0x5e3+-0xfa4+0x1589*0x1]=_0x338ffb['z'],_0x4752f2&&_0x427da5['centers']&&_0x4752f2['length']===_0x427da5['centers']['length']){const _0xd1468b=new Float32Array(_0x427da5['centers']);_0x4752f2['set'](_0xd1468b);}if(_0x1bdc5c&&_0x427da5['timeIndex']&&_0x1bdc5c['length']===_0x427da5['timeIndex']['length']){const _0x3a0acc=new Uint32Array(_0x427da5['timeIndex']);_0x1bdc5c['set'](_0x3a0acc);}if(_0x16e768&&_0x427da5['motion']&&_0x16e768['length']===_0x427da5['motion']['length']){const _0xcb1ba6=new Float32Array(_0x427da5['motion']);_0x16e768['set'](_0xcb1ba6);}if(_0x333e54&&_0x1baf33&&_0x53b79f&&_0x427da5['muT']&&_0x427da5['tScale']&&_0x1baf33['length']===_0x427da5['muT']['length']&&_0x53b79f['length']===_0x427da5['tScale']['length']&&(_0x1baf33['set'](_0x427da5['muT']),_0x53b79f['set'](_0x427da5['tScale'])),_0x5069af){for(let _0x41aa76=-0x1451*-0x1+-0x2*0x1025+0x265*0x5;_0x41aa76<_0x5069af['length'];++_0x41aa76)_0x5069af[_0x41aa76]=_0x41aa76;}_0x2c324d&&_0x427da5['timeOption']&&_0x2c324d['set'](_0x427da5['timeOption']),_0x9f251e(),_0x61d8d8=!(0xd44+-0xc37+-0x1*0x10d),_0x3c8b9f=!(0x5a7*-0x3+0xfd3*-0x2+0x309b),_0x3e91b9();break;case'setTime':_0x5b76cf=_0x427da5['time'],_0x3e91b9();break;case'setUseTemp'+'oralSort':_0x311dc2=_0x427da5['useTempora'+'lSort'];break;case'setUseDyna'+'micSort':_0x5e63fb=_0x427da5['useDynamic'+'Sort'];break;case'sort':if(!_0x814df2)return;_0x814df2[-0x27*0x99+0x4*0x80d+-0x1*0x8e5]=_0x427da5['cameraPosi'+'tion']['x'],_0x814df2[0x2*-0x2d8+-0x34f*-0x1+0x262]=_0x427da5['cameraPosi'+'tion']['y'],_0x814df2[0x10b7*-0x1+-0x941*0x2+0x233b]=_0x427da5['cameraPosi'+'tion']['z'],_0x21ede9[-0x5c*0x3d+0x1ea7+-0x3*0x2e9]=_0x427da5['cameraDire'+'ction']['x'],_0x21ede9[0xfc*-0x15+-0x2552+0x39ff]=_0x427da5['cameraDire'+'ction']['y'],_0x21ede9[-0x739*0x1+-0x1c69+0x4*0x8e9]=_0x427da5['cameraDire'+'ction']['z'],_0x41a837['x']=_0x427da5['cameraPosi'+'tion']['x'],_0x41a837['y']=_0x427da5['cameraPosi'+'tion']['y'],_0x41a837['z']=_0x427da5['cameraPosi'+'tion']['z'],_0x338ffb['x']=_0x427da5['cameraDire'+'ction']['x'],_0x338ffb['y']=_0x427da5['cameraDire'+'ction']['y'],_0x338ffb['z']=_0x427da5['cameraDire'+'ction']['z'],_0x3e91b9();break;}};const _0x5552c8=()=>{_0x56ddf8=Math['max'](0x125*-0x16+-0x2*0xd43+-0x2*-0x19df,Math['min'](-0x58f*0x5+0x2c5*-0xc+0x3d1b,Math['round'](Math['log2'](_0x18a347/(0x5*0x6da+0x2*-0x861+0x175*-0xc))))),_0x399008=(0x17d7+-0x1b2*-0xb+-0x2a7b)**_0x56ddf8+(0x1540+-0x912*-0x4+-0x3*0x132d);},_0x3f954e=_0x6f79a5=>{_0x50d1c=0xfa7*0x2+0x1*0x1703+-0x3651,_0x3ddfd9=_0x50d1c+_0x18a347*_0x163ffb*(-0x1408*-0x1+-0x1f3e+0xb39),_0x1b2cdf=_0x3ddfd9+(-0x4c6+-0x9*0x1fd+0x170f)*_0x163ffb*(0x83*-0x1a+0x23b5+-0x1665),_0x4a7019=_0x1b2cdf+_0x18a347*_0x38340e,_0x2eb03f=_0x4a7019+(-0x251f+0x1213+0x130f)*_0x163ffb,_0x9465f2=_0x2eb03f+(-0xac*0x2b+-0xd6+0x1dbd*0x1)*_0x163ffb,_0x6c8b73=_0x9465f2+(-0x4eb*-0x5+0x12e6+-0x2b7a)*_0x163ffb,_0x233e8c=_0x6c8b73+(-0x24f0+0x29e*-0xd+0x46f9*0x1)*_0x163ffb,_0x32d206=_0x233e8c+_0x18a347*_0x38340e,_0x4752f2=new Float32Array(_0x6f79a5,_0x50d1c,_0x18a347*(0x1715+-0x64c+-0x2*0x863)),_0x2c324d=new Float32Array(_0x6f79a5,_0x3ddfd9,-0x14ef+-0x12c6+0x287d),_0x5069af=new Uint32Array(_0x6f79a5,_0x1b2cdf,_0x18a347),_0x814df2=new Float32Array(_0x6f79a5,_0x4a7019,0x24a1+0x9*-0x10d+-0x1*0x1b29),_0x21ede9=new Float32Array(_0x6f79a5,_0x2eb03f,-0x295*0x7+0x1*0x260f+-0x13f9),_0x333e54&&(_0x22cffc=_0x32d206+_0x399008*_0x38340e,_0x672766=_0x22cffc+_0x18a347*_0x163ffb,_0x40aee6=_0x672766+_0x18a347*_0x163ffb,_0x43fdb0=_0x40aee6+_0x18a347*(-0x1e73+-0x136*0xd+0x171a*0x2)*_0x163ffb,_0x1baf33=new Float32Array(_0x6f79a5,_0x22cffc,_0x18a347),_0x53b79f=new Float32Array(_0x6f79a5,_0x672766,_0x18a347),_0x16e768=new Float32Array(_0x6f79a5,_0x40aee6,_0x18a347*(-0x164d+-0x3f4+0x1a44)),_0x1bdc5c=new Uint32Array(_0x6f79a5,_0x43fdb0,_0x18a347));},_0x3880aa=async _0x8d24c3=>{_0x5c02be=-0x34*0x40+-0xd*0x17b+0x2040;const _0x4a83d9={'env':{'memory':new WebAssembly['Memory']({'initial':_0x5c02be}),'pthread_self':function(){return 0x3*-0xcf7+0x181+0x2564;},'emscripten_builtin_memalign':function(){return 0x19d0+0x3ad*0x2+-0x212a;},'loggerVec3':(_0x4b6d3e,_0x421540,_0x39468f,_0x4fc4bb)=>{console['log']('C++\x20logger'+'Vec3\x20['+_0x4b6d3e+']\x200:'+_0x421540+'\x201:'+_0x39468f+'\x202:'+_0x4fc4bb);},'loggerFloat':(_0x4d9cb4,_0x1588fc)=>{console['log']('C++\x20LogFlo'+'at\x20['+_0x4d9cb4+']\x20a:'+_0x1588fc);},'loggerValue':(_0x51aa53,_0x37d839,_0x559bbb,_0x407214,_0x390e44)=>{console['log']('C++\x20logger'+'Value\x20['+_0x51aa53+']\x20minDist:'+_0x37d839+'\x20maxDist:'+_0x559bbb+'\x20range:'+_0x407214+'\x20divider:'+_0x390e44);},'loggerCamera':(_0x4a7c61,_0x40dd58,_0x1d8718,_0x58c38c,_0x3916db,_0x366581,_0x336663)=>{console['log']('C++\x20logger'+'Camera\x20['+_0x4a7c61+']\x20x:'+_0x40dd58+'\x20y:'+_0x1d8718+'\x20z:'+_0x58c38c+'\x20dx:'+_0x3916db+'\x20dy:'+_0x366581+'\x20dz:'+_0x336663);},'loggerBound':(_0x160d5c,_0x38a7ba,_0x127546,_0x31c76c,_0x346729,_0x12c4df)=>{console['log']('C++\x20logger'+'Bound\x20minX'+':'+_0x160d5c+'\x20minY:'+_0x38a7ba+'\x20minZ:'+_0x127546+'\x20maxX:'+_0x31c76c+'\x20maxY:'+_0x346729+'\x20maxZ:'+_0x12c4df);},'loggerDebug':_0x824d61=>{console['log']('C++\x20logger'+'Debug\x20['+_0x824d61+']');}}};try{const _0x58155e=await(await fetch(_0x8d24c3))['arrayBuffe'+'r']();return _0x2489af=(await WebAssembly['instantiat'+'e'](_0x58155e,_0x4a83d9))['instance'],_0x3ad251=_0x4a83d9['env']['memory'],_0x2489af;}catch(_0x524669){throw console['error']('WASM'+':',_0x524669),_0x524669;}},_0x4aacce=_0x320bbf=>{if(_0x320bbf<=0x388+-0x8e*0x44+0x223*0x10)return 0x7*0x206+0xb89*-0x2+0x8e9;let _0x42b957=_0x320bbf*_0x163ffb*(0x2d5+0x4*0x841+0x8b*-0x42);_0x42b957+=_0x320bbf*_0x38340e,_0x42b957+=(0x2a*-0x88+0x1d9e+-0x74b*0x1)*_0x163ffb,_0x42b957+=(-0x55e+0x1f71+0xc*-0x22c)*_0x163ffb,_0x42b957+=(-0xa8a+0x1e7*0xa+-0x879)*_0x163ffb,_0x42b957+=(-0x1660+0x52*0x1+-0x1611*-0x1)*_0x163ffb,_0x42b957+=_0x320bbf*_0x163ffb,_0x42b957+=_0x399008*_0x38340e,_0x42b957+=(-0xe5+0x1*-0x20b1+0x21fa)*_0x163ffb*(0x3b*-0x54+-0x1f34+0x3292),_0x42b957+=_0x320bbf*_0x38340e,_0x333e54&&(_0x42b957+=_0x320bbf*_0x163ffb,_0x42b957+=_0x320bbf*_0x163ffb,_0x42b957+=_0x320bbf*_0x163ffb*(0x167d+-0x1e84+0x80a));const _0x2e30e6=(-0x1ef9+-0x25dc+0x4515)*(0x1ca2+0x1*-0x189+-0x1719);return Math['ceil'](_0x42b957/_0x2e30e6);},_0x4d1da6=_0x1ec5f=>{const _0x270717=_0x4aacce(_0x1ec5f);return _0x270717>_0x5c02be?(_0x3ad251['grow'](_0x270717-_0x5c02be),_0x5c02be=_0x270717):_0x3ad251['grow'](0x2*-0xd6+0xa21*-0x3+0x200f),_0x3ad251['buffer'];},_0x9f251e=()=>{if(!_0x2489af)return;const {calcAABB:_0x46d26b}=_0x2489af['exports'];_0x46d26b(_0x50d1c,_0x9465f2,_0x6c8b73,_0x18a347);},_0x3e91b9=()=>{_0x5d0c1b&&clearTimeout(_0x5d0c1b),_0x5d0c1b=setTimeout(()=>{_0x5d0c1b=null,_0x3f13c1();},-0x1145+-0x126*0xe+-0x1*-0x2159);},_0x3f13c1=()=>{if(!_0x2489af||!_0x61d8d8||_0x5069af['length']!==_0x18a347||_0x1b2cdf===null||_0x50d1c===null||_0x4a7019===null||_0x2eb03f===null||_0x9465f2===null||_0x6c8b73===null)return;const _0x11cd6b=_0x814df2[-0xd67+-0x24fb+0x3262],_0x129d8f=_0x814df2[-0x950*0x3+-0xec0+-0xe3b*-0x3],_0x29bae7=_0x814df2[0x1084+0x14f+-0x1*0x11d1],_0x518d3a=_0x21ede9[-0x1*0x11ea+0x81e+-0x2*-0x4e6],_0x284831=_0x21ede9[-0xb*0x17b+0xb2f+0x51b*0x1],_0x50dbb1=_0x21ede9[0x7ad+0x4bc*-0x7+0x1979],_0x5a6809=-0x226a+0x146d+0xdfd+0.001;if(!_0x3c8b9f&&Math['abs'](_0x11cd6b-_0x3e2502['x'])<_0x5a6809&&Math['abs'](_0x129d8f-_0x3e2502['y'])<_0x5a6809&&Math['abs'](_0x29bae7-_0x3e2502['z'])<_0x5a6809&&Math['abs'](_0x518d3a-_0x470ade['x'])<_0x5a6809&&Math['abs'](_0x284831-_0x470ade['y'])<_0x5a6809&&Math['abs'](_0x50dbb1-_0x470ade['z'])<_0x5a6809&&Math['abs'](_0x5b76cf-_0x36f6e9)<0x1*0x17ff+-0x1ae8+0x2e9+0.01)return;if(_0x31a481){_0x5f3b2b=!(-0x255c+-0x1f67+-0x1d*-0x25f);return;}_0x31a481=!(-0xd*0xbb+0x4*0xe+0x947),_0x3c8b9f=!(0x23d4+0x4e1*0x2+-0x1*0x2d95),_0x36f6e9=_0x5b76cf,_0x3e2502['x']=_0x11cd6b,_0x3e2502['y']=_0x129d8f,_0x3e2502['z']=_0x29bae7,_0x470ade['x']=_0x518d3a,_0x470ade['y']=_0x284831,_0x470ade['z']=_0x50dbb1,_0x5f3b2b=!(-0xb62+-0x1*-0x229d+-0x173a);const {sortIndexes:_0xac5e10}=_0x2489af['exports'];try{const _0x53d63=_0xac5e10(_0x1b2cdf,_0x50d1c,_0x40aee6,_0x22cffc,_0x672766,_0x4a7019,_0x2eb03f,_0x9465f2,_0x6c8b73,_0x233e8c,_0x32d206,_0x5b76cf||0xbdd*-0x1+-0x1e*-0x47+0x38b*0x1,_0x311dc2,_0x5e63fb,_0x333e54,_0x18a347,_0x399008,_0x56ddf8,_0x3ddfd9,_0x43fdb0),_0x470a03=new Uint32Array(_0x5069af);if(_0x53d63===0x11a+0x2fb*-0x5+-0xdcd*-0x1){debugger;console['log']('____\x20ENGIN'+'E','Indexes\x20co'+'unt\x20===\x20',_0x53d63);}const _0x1b218b=_0x18a347!==_0x43aa6e||_0x4d54c4!==_0x364121;self['postMessag'+'e']({'type':'sortComple'+'ted','count':_0x53d63,'order':_0x470a03,'isNewOrder':_0x1b218b},[_0x470a03['buffer']]),_0x43aa6e=_0x18a347,_0x4d54c4=_0x364121;}catch(_0x37ff31){console['error'](':',_0x37ff31),self['postMessag'+'e']({'type':'error','error':_0x37ff31['message']});}_0x31a481=!(-0x1212+0x1eb3+-0xca0),_0x5f3b2b&&_0x3e91b9();};}class yC extends me{constructor(){super(),h(this,'worker',null),h(this,'numSplats',-0x2664+-0x7*0x4aa+0x470a),h(this,'is4d',!(0x9ca+0xb96+-0x1560)),h(this,'sortStartT'+'ime',-0x269*-0x6+0x1d54+0x13*-0x24e),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'data',{}),(this['orderTextu'+'re']=null,this['backOrderT'+'exture']=null,this['worker']=null,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+SC['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x3f9317=>{var _0xed852f;if(!this['worker'])return;const {data:_0x556fcf}=_0x3f9317;switch(_0x556fcf['type']){case'initialize'+'d':this['fire']('initialize'+'d');break;case'sortComple'+'ted':_0x556fcf['order']&&(_0x556fcf['isNewOrder']&&(this['orderTextu'+'re']=this['backOrderT'+'exture']),(_0xed852f=this['orderTextu'+'re'])==null||_0xed852f['write'](0x4a7+0x252*-0x2+-0x1*0x3,0x11be+-0x4*-0x2+0x1*-0x11c6,this['orderTextu'+'re']['width'],this['orderTextu'+'re']['height']-(-0xdc0+0x1d9c*-0x1+0x2b5d),_0x556fcf['order']));let _0x129db4=-0x76*0xc+0x3f*-0x3b+0x140d;this['sortStartT'+'ime']!==0x10d+-0x218b+0x207e&&(_0x129db4=performance['now']()-this['sortStartT'+'ime']),this['fire']('updated',_0x3f9317['data']['count'],_0x129db4,_0x556fcf['isNewOrder']),this['sortStartT'+'ime']=-0x50e+-0xa9*-0x17+-0xa21;break;case'error':console['error']('Worker:',_0x556fcf['error']),this['fire']('error',_0x556fcf['error']);break;}},this['worker']['postMessag'+'e']({'type':'initWorker','sortWasmUrl':'https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/sorter-t'+'railing.wa'+'sm'});}['initData'](_0x4ad64e,_0x17e22a,_0x202365,_0x357da4,_0x23ac23,_0x49f172,_0x3336b4,_0x4baa32){var _0x44018c;this['is4d']=_0x4baa32,this['numSplats']=_0x17e22a['length']/(-0x1fce+-0x491+0x2462),(!_0x3336b4||_0x3336b4['length']===0x2c6+-0x1*0xe0f+0xb49)&&(_0x3336b4=[-0x13*0x187+-0x1b*-0x57+0x13d8,0x1*0x1b4c+0x1f2c+-0x3a3c]),this['orderTextu'+'re']||(this['orderTextu'+'re']=_0x4ad64e),this['backOrderT'+'exture']=_0x4ad64e;const _0x5e1593=new Date()['getTime']();(_0x44018c=this['worker'])==null||_0x44018c['postMessag'+'e']({'type':'initData','centers':_0x17e22a,'muT':_0x202365,'tScale':_0x357da4,'motion':_0x23ac23,'timeIndex':_0x49f172,'timeOption':_0x3336b4,'is4d':_0x4baa32,'id':_0x5e1593});}['setCamera'](_0x5113ce,_0x1d038e){this['worker']&&(!_0x5113ce||!_0x1d038e||(this['data']['cameraPosi'+'tion']={'x':_0x5113ce['x'],'y':_0x5113ce['y'],'z':_0x5113ce['z']},this['data']['cameraDire'+'ction']={'x':_0x1d038e['x'],'y':_0x1d038e['y'],'z':_0x1d038e['z']},this['sortStartT'+'ime']===0x2f*0xd3+-0x303+-0x2*0x11dd&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'sort','cameraPosition':{'x':_0x5113ce['x'],'y':_0x5113ce['y'],'z':_0x5113ce['z']},'cameraDirection':{'x':_0x1d038e['x'],'y':_0x1d038e['y'],'z':_0x1d038e['z']}})));}['setCurrent'+'Time'](_0xdb6508){this['worker']&&(this['data']['time']=_0xdb6508,this['sortStartT'+'ime']===0x1*-0x263b+0x4*-0x2d5+0x318f&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'setTime','time':_0xdb6508}));}['setUseTemp'+'oralSort'](_0x5dff14){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseTemp'+'oralSort','useTemporalSort':_0x5dff14});}['setUseDyna'+'micSort'](_0x455eec){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseDyna'+'micSort','useDynamicSort':_0x455eec});}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}const vC=new te(),Va=new D(),Ga=new D(),Sc=[0x1a*-0xe5+-0x2313*0x1+-0x1*-0x3a55,-0x24dc+-0x11c8+0x36a4];class xC{constructor(_0x203249,_0x49281f={}){h(this,'resource'),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'_material'),h(this,'meshInstan'+'ce'),h(this,'options',{}),h(this,'sorter',null),h(this,'time',0x166d+0x147a+-0x2ae7),h(this,'lastCamera'+'Position',new D()),h(this,'lastCamera'+'Direction',new D()),h(this,'resolveSH',null),h(this,'cameras',[]),h(this,'forceUpDat'+'eSorterTim'+'e',(_0x2d01ef,_0x261008=void(0x135*0x15+0x17b*0xb+-0x29a2))=>{(_0x261008||_0x261008===-0x229+-0xb*-0xe6+0x7b9*-0x1)&&(this['material']['setParamet'+'er']('uTime',_0x261008),this['updateTime'](_0x261008)),this['sort'](_0x2d01ef);}),(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Instance',_0x203249['numSplats']),this['resource']=_0x203249,this['orderTextu'+'re']=this['resource']['createText'+'ure']('splatOrder',Ki,this['resource']['evalTextur'+'eSize'](this['resource']['numSplats'])),this['backOrderT'+'exture']=null,_0x49281f['material']?(this['_material']=_0x49281f['material'],this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])):(this['_material']=new Xn({'uniqueName':'SplatMater'+'ial','vertexGLSL':'#include\x20\x22'+'gsplatVS\x22','fragmentGLSL':'#include\x20\x22'+'gsplatPS\x22','vertexWGSL':'#include\x20\x22'+'gsplatVS\x22','fragmentWGSL':'#include\x20\x22'+'gsplatPS\x22','attributes':{'vertex_position':Me,'vertex_id_attrib':ph}}),this['configureM'+'aterial'](this['_material']),this['_material']['update']()),this['meshInstan'+'ce']=new He(this['resource']['mesh'],this['_material']),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(0x1b53*-0x1+0x2a*-0x47+-0x38b*-0xb)),this['meshInstan'+'ce']['gsplatInst'+'ance']=this,this['meshInstan'+'ce']['instancing'+'Count']=-0x4bd+-0x2*-0x6a1+-0x885,this['sorter']=new yC(),this['sorter']['on']('initialize'+'d',()=>{var _0x52fe0a,_0x442952,_0x449796,_0x133f2f,_0x2ea3dd,_0x537bf9,_0x1bd30b,_0x20bc96,_0x372d1f,_0x4e3294,_0x49c1b1;const _0x45cbc9=new Float32Array(this['resource']['centers']['buffer']['slice']()),_0x14f848=new Float32Array(((_0x442952=(_0x52fe0a=this['resource']['muT'])==null?void(-0x1*0x2237+-0xa3d+0x2c74):_0x52fe0a['buffer'])==null?void(-0x2203+0x1*-0xddb+0x2fde):_0x442952['slice']())??new Float32Array()),_0x315dad=new Float32Array(((_0x133f2f=(_0x449796=this['resource']['tScale'])==null?void(-0x2*-0x32f+-0x479*0x7+0x18f1*0x1):_0x449796['buffer'])==null?void(-0x7*0x29c+0x59*-0x49+-0x2ba5*-0x1):_0x133f2f['slice']())??new Float32Array()),_0x41f432=new Float32Array(((_0x537bf9=(_0x2ea3dd=this['resource']['motion'])==null?void(-0x162b+0x1*0x2133+-0xb08):_0x2ea3dd['buffer'])==null?void(0x33f*-0x3+0x2070+-0x16b3):_0x537bf9['slice']())??new Float32Array()),_0x2bcabc=new Float32Array(((_0x20bc96=(_0x1bd30b=this['resource']['timeIndex'])==null?void(0x2000+0x1db*0xd+0x12b5*-0x3):_0x1bd30b['buffer'])==null?void(0x1e77*0x1+-0xd9c+0x5*-0x35f):_0x20bc96['slice']())??new Float32Array(-0x2202+-0x1*0x145+0x2347)),_0x293ba8=new Float32Array(((_0x4e3294=(_0x372d1f=this['resource']['timeOption'])==null?void(0x1358+-0x2315+0xfbd):_0x372d1f['buffer'])==null?void(0xc11*-0x1+0x5e*0x17+0x39f):_0x4e3294['slice']())??new Float32Array());(_0x49c1b1=this['sorter'])==null||_0x49c1b1['initData'](this['orderTextu'+'re'],_0x45cbc9,_0x14f848,_0x315dad,_0x41f432,_0x2bcabc,_0x293ba8,this['resource']['is4D']);}),this['sorter']['on']('updated',async(_0x2811aa,_0x567223,_0x399d1c)=>{var _0x173e16;this['meshInstan'+'ce']['instancing'+'Count']=Math['ceil'](_0x2811aa/this['resource']['instanceSi'+'ze']),_0x399d1c&&this['backOrderT'+'exture']&&(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatInst'+'ance\x20updat'+'ed'),[this['orderTextu'+'re'],this['backOrderT'+'exture']]=[this['backOrderT'+'exture'],this['orderTextu'+'re']],await this['resource']['updateText'+'ure'](),this['resource']['configureM'+'aterial'](this['_material']),this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])),_0x399d1c&&((_0x173e16=this['resource'])==null||_0x173e16['fireAssets'+'ManagerTim'+'eIndex']()),this['material']['setParamet'+'er']('numSplats',_0x2811aa);}),this['setHighQua'+'litySH'](_0x49281f['highQualit'+'ySH']??!(0x1a27+0x1b5*0xa+-0x2b38)));}async['updateInst'+'anceData'](_0x29d01e){var _0x5e0358,_0x4529f7;console['log']('____\x20ENGIN'+'E\x20IVAN','updateInst'+'anceData\x20A'+'SSETS\x20GSpl'+'atInstance',_0x29d01e['numSplats']),this['resource']=_0x29d01e;const _0x4e3675=this['resource']['evalTextur'+'eSize'](_0x29d01e['centers']['length']/(-0x7*0x351+-0x2*0x31d+0x1d74));return(_0x5e0358=this['backOrderT'+'exture'])==null||_0x5e0358['destroy'](),this['backOrderT'+'exture']=this['resource']['createText'+'ure']('splatOrder'+'2',Ki,_0x4e3675),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(-0x43*-0x51+-0x1*0x2397+0xe64)),(_0x4529f7=this['sorter'])==null||_0x4529f7['initData'](this['backOrderT'+'exture'],_0x29d01e['centers'],_0x29d01e['muT'],_0x29d01e['tScale'],_0x29d01e['motion'],_0x29d01e['timeIndex'],_0x29d01e['timeOption'],_0x29d01e['is4D']),new Promise(_0x4778b2=>{var _0x351568;const _0x3b5c26=(_0x3fb2ec,_0x3d5004,_0xe01c6f)=>{var _0x38ee15;_0xe01c6f&&((_0x38ee15=this['sorter'])==null||_0x38ee15['off']('updated',_0x3b5c26),_0x4778b2(!(-0x23c6+-0x3fd*-0x5+-0xc1*-0x15)));};(_0x351568=this['sorter'])==null||_0x351568['on']('updated',_0x3b5c26);});}['destroy'](){var _0x43e416,_0x387fbc,_0xb09219,_0x5acb8f,_0x5d267e,_0x44912a;(_0x43e416=this['resolveSH'])==null||_0x43e416['destroy'](),(_0x387fbc=this['material'])==null||_0x387fbc['destroy'](),(_0xb09219=this['meshInstan'+'ce'])==null||_0xb09219['destroy'](),(_0x5acb8f=this['sorter'])==null||_0x5acb8f['destroy'](),(_0x5d267e=this['orderTextu'+'re'])==null||_0x5d267e['destroy'](),(_0x44912a=this['backOrderT'+'exture'])==null||_0x44912a['destroy']();}set['material'](_0x55b123){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.set\x20'+'material'),this['_material']!==_0x55b123&&(this['_material']=_0x55b123,this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x55b123));}get['material'](){return this['_material'];}['configureM'+'aterial'](_0x527fd0,_0x3807cc={}){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.conf'+'igureMater'+'ial'),this['resource']['configureM'+'aterial'](_0x527fd0),_0x527fd0['setParamet'+'er']('numSplats',-0x11d7+0xc9+-0x25*-0x76),_0x527fd0['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),_0x527fd0['setParamet'+'er']('alphaClip',-0xb2e+-0xcbd+-0xd*-0x1d7+0.3),_0x527fd0['setDefine']('DITHER_'+(_0x3807cc['dither']?'BLUENOISE':'NONE'),''),_0x527fd0['cull']=bt,_0x527fd0['blendType']=_0x3807cc['dither']?Cs:Zs,_0x527fd0['depthWrite']=!!_0x3807cc['dither'];}['updateView'+'port'](_0x3a16f6){var _0x25a24f;const _0x553b5c=_0x3a16f6==null?void(-0x2c2*0x6+0x160*0x9+-0xb2*-0x6):_0x3a16f6['camera'],_0x2305b9=_0x553b5c==null?void(0x119*-0x2+-0x7dc*0x2+0x11ea):_0x553b5c['renderTarg'+'et'],{width:_0xd04980,height:_0x530cf2}=_0x2305b9??this['resource']['device'];Sc[0x25ef+-0x45d+0x10c9*-0x2]=_0xd04980,Sc[-0x7*0x3b3+-0x1f84*0x1+-0x2*-0x1cb5]=_0x530cf2;const _0x1bb3c0=(_0x25a24f=_0x553b5c==null?void(-0x1d*-0x11a+0xcc3+-0x69*0x6d):_0x553b5c['camera'])==null?void(-0xc72+0x24a1+-0x182f):_0x25a24f['xr'];_0x1bb3c0!=null&&_0x1bb3c0['active']&&_0x1bb3c0['views']['list']['length']===0x19d4+-0xd*-0x2cf+-0x6ed*0x9&&(Sc[0x27a*0x3+-0x1bee+0x1480]*=0x1948+0x14c2+-0x47*0xa6+0.5),this['material']['setParamet'+'er']('viewport',Sc);}['sort'](_0x58f5b0){if(this['sorter']){const _0x143d84=_0x58f5b0['getWorldTr'+'ansform']();_0x143d84['getTransla'+'tion'](Va),_0x143d84['getZ'](Ga);const _0x4e9b63=this['meshInstan'+'ce']['node']['getWorldTr'+'ansform'](),_0x48fd51=vC['invert'](_0x4e9b63);_0x48fd51['transformP'+'oint'](Va,Va),_0x48fd51['transformV'+'ector'](Ga,Ga),(!Va['equalsAppr'+'ox'](this['lastCamera'+'Position'])||!Ga['equalsAppr'+'ox'](this['lastCamera'+'Direction']))&&(this['lastCamera'+'Position']['copy'](Va),this['lastCamera'+'Direction']['copy'](Ga),this['sorter']['setCamera'](Va,Ga)),this['sorter']['setCurrent'+'Time'](this['time']);}this['updateView'+'port'](_0x58f5b0);}['update'](){var _0x19d9f0;if(this['cameras']['length']>-0x1*-0x23b7+-0x13c*-0xc+-0xa1b*0x5){const _0x10ef72=this['cameras'][0x1fb8+0x1490+-0x3448];this['sort'](_0x10ef72['_node']),(_0x19d9f0=this['resolveSH'])==null||_0x19d9f0['render'](_0x10ef72['_node'],this['meshInstan'+'ce']['node']['getWorldTr'+'ansform']()),this['cameras']['length']=0x676+-0xda3+0x72d;}}['setHighQua'+'litySH'](_0x47e00a){const {resource:_0x1db6b4}=this,{gsplatData:_0x37c3c9}=_0x1db6b4;_0x37c3c9 instanceof gC&&_0x37c3c9['shBands']>0x1b*0x10b+-0xdc*0xc+-0x11d9&&_0x47e00a===!!this['resolveSH']&&(this['resolveSH']?(this['resolveSH']['destroy'](),this['resolveSH']=null):this['resolveSH']=new fC(_0x1db6b4['device'],this));}['updateTime'](_0x513c39){this['time']=_0x513c39;}}class Rv{constructor(_0x4029ae,_0x419002){h(this,'sceneInfo',{}),h(this,'isDestroye'+'d',!(-0x15c2+0x1f4a+-0x5*0x1e8)),h(this,'device'),h(this,'gsplatData'),h(this,'centers'),h(this,'aabb'),h(this,'mesh'),h(this,'instanceIn'+'dices'),h(this,'gsplatInst'+'ance'),(this['device']=_0x4029ae,this['gsplatData']=_0x419002,this['isDestroye'+'d']=!(0x59e*-0x4+-0x232c+0x39a5*0x1));const _0x406f42=0x2*-0x56f+-0x1*0x42a+0xe*0x11c,_0x3168a8=Math['ceil'](_0x419002['numSplats']/_0x406f42)*_0x406f42/_0x406f42,_0x3c6424=new Uint32Array(_0x3168a8);for(let _0x1b8ade=-0x1ddf*0x1+-0x17dc+0x28f*0x15;_0x1b8ade<_0x3168a8;++_0x1b8ade)_0x3c6424[_0x1b8ade]=_0x1b8ade*_0x406f42;const _0x8ca666=new kt(_0x4029ae,[{'semantic':ph,'components':0x1,'type':el,'asInt':!(0x2263+-0x2ea*0x6+0x1*-0x10e7)}]),_0xaa4b94=new Float32Array((-0x21e6+0x1e3e+0x3b4)*_0x406f42),_0x2c1e02=new Uint32Array((0x1408+0x26de+-0x3ae0)*_0x406f42);for(let _0x2f6e45=-0x572+0x1584+-0x1012;_0x2f6e45<_0x406f42;++_0x2f6e45){_0xaa4b94['set']([-(0xd*-0x43+-0x16d8+0xc0*0x23),-(-0x2340+-0xfe*-0x7+0x1c4f),_0x2f6e45,0x2f6*0x8+0x5c9*-0x4+-0x8b,-(-0xeb7*0x2+-0xb*-0xde+0x13e5),_0x2f6e45,-0x2600+0x242c+-0x1*-0x1d5,-0x1136+-0x545+0x167c,_0x2f6e45,-(-0xb7*0x1c+0x2*0x965+0x13b),0x1c95+0x651+-0x22e5,_0x2f6e45],_0x2f6e45*(0x127b+0x135*-0x15+0x6ea));const _0x8f1abc=_0x2f6e45*(-0x1594+-0x19ab+0xfc1*0x3);_0x2c1e02['set']([-0x772+0x1c40*0x1+-0xa67*0x2+_0x8f1abc,0x1*-0x113d+0x20ee+0x2*-0x7d8+_0x8f1abc,0x1*-0x2173+-0x1f71+0x15a2*0x3+_0x8f1abc,0xf4b+-0x3ad+-0x5cf*0x2+_0x8f1abc,0x5*-0xe+0x52*0x1+0x5*-0x2+_0x8f1abc,0x972+-0x1285+0x916+_0x8f1abc],_0x2f6e45*(-0xcbc+-0x1*0x470+-0x899*-0x2));}this['mesh']=new Ge(_0x4029ae),this['mesh']['setPositio'+'ns'](_0xaa4b94,-0x12ce+0x277*0x1+0x105a),this['mesh']['setIndices'](_0x2c1e02),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),this['instanceIn'+'dices']=new Is(_0x4029ae,_0x8ca666,_0x3168a8,{'usage':ms,'data':_0x3c6424['buffer']});}['updateData'](){var _0x15050f;const _0x4233ec=this['gsplatData'];if(!_0x4233ec)return;const _0x3d0f0e=0x6f*-0x2b+0x22d*0xc+-0x1*0x6f7,_0x323718=Math['ceil'](_0x4233ec['numSplats']/_0x3d0f0e)*_0x3d0f0e/_0x3d0f0e,_0x150b76=new Uint32Array(_0x323718);for(let _0x4e223d=-0x1*0x79f+0x17*0x148+-0x15d9;_0x4e223d<_0x323718;++_0x4e223d)_0x150b76[_0x4e223d]=_0x4e223d*_0x3d0f0e;const _0x57eed4=new kt(this['device'],[{'semantic':ph,'components':0x1,'type':el,'asInt':!(0x12a*-0x17+-0x4*0x10+0x1b06)}]),_0x274c33=new Float32Array((0xa6+-0xf8d*-0x1+-0x1*0x1027)*_0x3d0f0e),_0x302e7c=new Uint32Array((-0x3dd*0x2+-0x1*-0x2392+0x946*-0x3)*_0x3d0f0e);for(let _0x2bf7ab=0x260b+-0xb57*0x2+0xcf*-0x13;_0x2bf7ab<_0x3d0f0e;++_0x2bf7ab){_0x274c33['set']([-(-0x1fef+-0x498+0x922*0x4),-(0x3*0x836+-0x1*-0x149d+-0x2d3e),_0x2bf7ab,-0x211d*0x1+-0x83*-0x2+0x2018,-(0x1*0x1f75+0x1a*-0x86+-0x11d8*0x1),_0x2bf7ab,-0xf1*0x27+0x63b+0x1e7d,0x1bc9+-0x5*-0x71f+-0x3f63,_0x2bf7ab,-(-0xd1e+-0x22fa+0x3019),0x128c+0x9d*-0x19+-0x6*0x89,_0x2bf7ab],_0x2bf7ab*(-0x1675*0x1+-0x133a+0x29bb));const _0x37b8fa=_0x2bf7ab*(0x2672+0x8*0x152+-0x30fe*0x1);_0x302e7c['set']([0x2153+-0x1402+-0xd51+_0x37b8fa,0x1*0x254e+0x12e1+-0x2*0x1c17+_0x37b8fa,-0x4c1*-0x3+-0x7*-0x322+-0x242f+_0x37b8fa,-0x346*-0x5+-0x1e*-0x26+0x5*-0x42a+_0x37b8fa,0x1*0x2326+-0xef*0x11+-0x1345+_0x37b8fa,-0xfd+-0x212+0x312+_0x37b8fa],_0x2bf7ab*(0x1f46*-0x1+-0x2f*-0x3a+-0x2*-0xa53));}this['mesh']['setPositio'+'ns'](_0x274c33,0x61*0x1d+-0x7*-0x2ba+-0x1e10),this['mesh']['setIndices'](_0x302e7c),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),(_0x15050f=this['instanceIn'+'dices'])==null||_0x15050f['destroy'](),this['instanceIn'+'dices']=new Is(this['device'],_0x57eed4,_0x323718,{'usage':ms,'data':_0x150b76['buffer']});}['updateText'+'ure'](){}['destroy'](){var _0x3abc2d,_0x2acdec,_0x42085c,_0x36067b;(_0x3abc2d=this['mesh'])==null||_0x3abc2d['destroy'](),(_0x2acdec=this['instanceIn'+'dices'])==null||_0x2acdec['destroy'](),(_0x42085c=this['gsplatData'])==null||_0x42085c['destroy'](),this['gsplatData']=null,(_0x36067b=this['gsplatInst'+'ance'])==null||_0x36067b['destroy'](),this['gsplatInst'+'ance']=void(-0x246b+-0x88*-0x47+-0x14d),this['isDestroye'+'d']=!(0x1cee+-0x2e*-0x68+-0x2f9e),this['mesh']=null;}get['instanceSi'+'ze'](){return-0xd71+-0x485+0x2*0x93b;}get['numSplats'](){var _0x1a1e85;return(_0x1a1e85=this['gsplatData'])==null?void(-0x1a1e+-0x1*-0x23de+-0x9c0):_0x1a1e85['numSplats'];}['setSceneIn'+'fo'](_0x113550){}['configureM'+'aterial'](_0x206fb4){}['evalTextur'+'eSize'](_0x31ce70){return J['ZERO'];}['appendGSpl'+'atResource'](_0x4382c6,_0x521fd2,_0x48ad2f,_0x254de3,_0x485387){}['fireAssets'+'ManagerTim'+'eIndex'](){}['createText'+'ure'](_0x474abc,_0x2c2730,_0x57cdfc,_0x3c7b3b){return new _e(this['device'],{'name':_0x474abc,'width':_0x57cdfc['x'],'height':_0x57cdfc['y'],'format':_0x2c2730,'cubemap':!(0x138+0x1131*-0x1+0xffa),'mipmaps':!(-0x2d*0x22+-0x4*0x1bf+0xcf7),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,..._0x3c7b3b?{'levels':[_0x3c7b3b]}:{}});}['instantiat'+'e'](){w['removed']('GSplatReso'+'urce.insta'+'ntiate\x20is\x20'+'removed.\x20U'+'se\x20gsplat\x20'+'component\x20'+'instead');}['createInst'+'ance'](_0x35f3fa,_0x420f3c){return this['gsplatInst'+'ance']=new xC(_0x35f3fa,_0x420f3c),this['gsplatInst'+'ance'];}}async function TC(){const _0x4dd63c=new Float32Array(0x266+0xb*-0xf2+0x3*0x2ab),_0x419abc=new Int32Array(_0x4dd63c['buffer']);let _0x398e14=null,_0x157f41=null,_0x54abfb=null,_0x4000b4=null,_0x295423=null,_0x26b139=null,_0x1ad440=null,_0x112dcf=null;self['onmessage']=async _0x41b407=>{const {data:_0x139267}=_0x41b407;switch(_0x139267['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x50bc4f(_0x139267['numSplats'],_0x139267['shBands'],_0x139267['SHData']);break;case'updateColo'+'rData':_0xf5412e(_0x139267['numSplats'],_0x139267['cr'],_0x139267['cg'],_0x139267['cb'],_0x139267['ca']);break;case'updateTran'+'sformData':_0x4a56a5(_0x139267['numSplats'],_0x139267['is4D'],_0x139267['x'],_0x139267['y'],_0x139267['z'],_0x139267['rx'],_0x139267['ry'],_0x139267['rz'],_0x139267['rw'],_0x139267['mx'],_0x139267['my'],_0x139267['mz'],_0x139267['sx'],_0x139267['sy'],_0x139267['sz'],_0x139267['muT'],_0x139267['tScale']);break;case'calcAabb':_0xdef9cc(_0x139267['numSplats'],_0x139267['x'],_0x139267['y'],_0x139267['z'],_0x139267['sx'],_0x139267['sy'],_0x139267['sz']);break;case'destroyWor'+'ker':_0x4189d1();break;}};class _0x446b5e{constructor(_0x17a0e6=0x4e9*-0x6+0x2*0xbaf+-0x68*-0xf,_0x15a6ec=-0x1*-0xc1a+0xa21*0x1+-0x1*0x163b,_0x49e724=0x1ee9+0x7a*0x10+-0x2689,_0x1a3b38=0xf*-0x96+0x1b*0x26+0x4c9){this['x']=_0x17a0e6,this['y']=_0x15a6ec,this['z']=_0x49e724,this['w']=_0x1a3b38;}['set'](_0x2a137f,_0xa4f77f,_0x360f80,_0x1b9830){return this['x']=_0x2a137f,this['y']=_0xa4f77f,this['z']=_0x360f80,this['w']=_0x1b9830,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x18cf99=this){let _0x2ee2f0=_0x18cf99['length']();return _0x2ee2f0===-0x1089*0x1+-0x1e42+0x79*0x63?(this['x']=this['y']=this['z']=0x132b+0x10c9*0x1+-0x3b*0x9c,this['w']=0x4*-0x805+0x1c*0x85+0x43*0x43):(_0x2ee2f0=(0x1*-0x89+0x28a+0x100*-0x2)/_0x2ee2f0,this['x']=_0x18cf99['x']*_0x2ee2f0,this['y']=_0x18cf99['y']*_0x2ee2f0,this['z']=_0x18cf99['z']*_0x2ee2f0,this['w']=_0x18cf99['w']*_0x2ee2f0),this;}['mulScalar'](_0x38e0ce,_0x3953af=this){return this['x']=_0x3953af['x']*_0x38e0ce,this['y']=_0x3953af['y']*_0x38e0ce,this['z']=_0x3953af['z']*_0x38e0ce,this['w']=_0x3953af['w']*_0x38e0ce,this;}}const _0x23785e=_0xbba64c=>{_0x4dd63c[-0x1e97+-0xc7f+0x2b16]=_0xbba64c;const _0x531ce6=_0x419abc[-0xa32+0x933+-0xf*-0x11];let _0x6bf7a3=_0x531ce6>>-0x3*-0xa1b+0x776+-0x25b7&-0x788a+0xd3c5+0x24c5,_0x6a8fc0=_0x531ce6>>-0x12f5+0x16a5+-0x3a4&-0x572*0x1+-0x1dda+0x1*0x2b4b;const _0xd4f38b=_0x531ce6>>0x259f+0x14*0x1ed+0x9d*-0x7c&-0x25b4+0x12*-0xf6+0x37ff;return _0xd4f38b<0x742+-0x129*-0xb+-0x139e?_0x6bf7a3:_0xd4f38b>-0x18ea+-0x1449+-0x35*-0xdd?(_0x6bf7a3|=0x398f+-0x146*-0xaa+-0x960b,_0x6bf7a3|=(_0xd4f38b===-0x1e*-0xff+0x118b+-0x2a*0x11b?-0x21c2*-0x1+0x1*-0xcc4+-0x1*0x14fe:0x1a20+-0x2*0x9aa+-0x2f*0x25)&&_0x531ce6&0xfcc4ce+0x769f70+-0xf3643f,_0x6bf7a3):_0xd4f38b<0xd31+0x1*-0xeb1+0x1f1?(_0x6a8fc0|=0x21ae+0x2e6*0x1+-0x1c94,_0x6bf7a3|=(_0x6a8fc0>>-0x16f7*0x1+-0xbde+0x2347-_0xd4f38b)+(_0x6a8fc0>>-0x1*-0x12a4+0x6*-0x418+0x65d-_0xd4f38b&0x2071*0x1+-0x1f15+-0x15b),_0x6bf7a3):(_0x6bf7a3|=_0xd4f38b-(0x1941*0x1+-0xda8*0x2+0x27f)<<-0x280+0x1b20+0x3*-0x832|_0x6a8fc0>>0x1d4c+0xf4*-0x10+0x1*-0xe0b,_0x6bf7a3+=_0x6a8fc0&-0x1f70+0xd06+0x126b,_0x6bf7a3);},_0xdef9cc=(_0x58a68b,_0x521b96,_0x50f574,_0x2fa5b6,_0x51bcd7,_0x16cda2,_0x2c409a)=>{let _0x380124=0x32b*-0x1+0x139*0x17+0x18f4*-0x1,_0x38ebc8=0x227+-0x271+0x4a,_0xa6f8aa=-0x697+-0xcf*0x1+0x766,_0x575c14=-0xc7f+0x2*0x12c3+0x1907*-0x1,_0x247583=-0x264f+0x1f1a+-0x29*-0x2d,_0x9ab1e2=-0x1598+-0x1*-0x1264+0x334,_0x41abd8=!(0xc46*0x2+0x3*0x137+-0x1c31);const _0x518032=new Float32Array(-0x2610+-0xfe1+0x35f4),_0xc64268=new Float32Array(-0x168b*0x1+0x75a*0x1+0x3cd*0x4);for(let _0x23d16b=-0xc89*0x3+0x9*-0x3b9+-0xde*-0x52;_0x23d16b<_0x58a68b;++_0x23d16b){const _0x4eaba8=_0x521b96[_0x23d16b],_0x3c235c=_0x50f574[_0x23d16b],_0x30c6f5=_0x2fa5b6[_0x23d16b],_0x3ca503=Math['max'](_0x51bcd7[_0x23d16b],_0x16cda2[_0x23d16b],_0x2c409a[_0x23d16b]);if(!isFinite(_0x4eaba8)||!isFinite(_0x3c235c)||!isFinite(_0x30c6f5)||!isFinite(_0x3ca503))continue;const _0x4c589a=(-0x114+0x79e*-0x2+0x1052)*Math['exp'](_0x3ca503);_0x41abd8?(_0x41abd8=!(0x26b7+-0x6c5+-0x1ff1),_0x380124=_0x4eaba8-_0x4c589a,_0x38ebc8=_0x3c235c-_0x4c589a,_0xa6f8aa=_0x30c6f5-_0x4c589a,_0x575c14=_0x4eaba8+_0x4c589a,_0x247583=_0x3c235c+_0x4c589a,_0x9ab1e2=_0x30c6f5+_0x4c589a):(_0x380124=Math['min'](_0x380124,_0x4eaba8-_0x4c589a),_0x38ebc8=Math['min'](_0x38ebc8,_0x3c235c-_0x4c589a),_0xa6f8aa=Math['min'](_0xa6f8aa,_0x30c6f5-_0x4c589a),_0x575c14=Math['max'](_0x575c14,_0x4eaba8+_0x4c589a),_0x247583=Math['max'](_0x247583,_0x3c235c+_0x4c589a),_0x9ab1e2=Math['max'](_0x9ab1e2,_0x30c6f5+_0x4c589a));}_0x41abd8||(_0x518032[-0xf8e+-0x1*-0x234c+0x13be*-0x1]=(_0x380124+_0x575c14)*(0x2*-0x9a5+-0x8ed*-0x4+-0x106a+0.5),_0x518032[-0x6dd*0x3+0x14b*-0x3+0x1879]=(_0x38ebc8+_0x247583)*(0x217c*0x1+-0x2551+0x3d5+0.5),_0x518032[-0x175*0x1a+-0x1374+0x3958]=(_0xa6f8aa+_0x9ab1e2)*(-0x1*0x13fb+0x105b+0x3a0+0.5),_0xc64268[-0x47*-0x3b+0x1c4+0x297*-0x7]=(_0x575c14-_0x380124)*(-0x10*0x163+-0x240f+0x3a3f+0.5),_0xc64268[-0xb73+0x1adb+-0xf67]=(_0x247583-_0x38ebc8)*(0x1*0x1997+0x1e2f*-0x1+-0x8*-0x93+0.5),_0xc64268[-0x54a*0x7+-0x1d58+0x4260]=(_0x9ab1e2-_0xa6f8aa)*(-0x196e+0x2*0x3ab+-0x18*-0xc1+0.5)),self['postMessag'+'e']({'type':'updatedAab'+'bData','center':_0x518032,'halfExtents':_0xc64268});},_0x4a56a5=(_0x3731d6,_0x1f1634,_0x17fe0d,_0x31604b,_0x433506,_0x281c59,_0x311f81,_0x1a961c,_0x206dd1,_0xb39f8c,_0x39a528,_0xb0ce93,_0x4f0ff3,_0x389126,_0x28f03d,_0x1216df,_0x23df8b)=>{_0x4189d1(),_0x398e14=new Float32Array(_0x3731d6*(-0x1d52+0x1604*-0x1+0x1*0x3359)),_0x4000b4=new Float32Array(_0x3731d6*(0x24c2+0xce7*-0x2+0xaf1*-0x1)),_0x26b139=new Uint16Array(_0x3731d6*(-0x2*-0x1037+-0x13cb+-0x4*0x328)),_0x54abfb=new Float32Array(_0x3731d6*(0x58+-0xc21+0xbcc)),_0x1f1634&&(_0x295423=new Float32Array(_0x3731d6*(-0xb*-0x1b3+0x6*0x3e6+0x703*-0x6)),_0x157f41=new Float32Array(_0x3731d6*(-0xc*0xe6+0x141d+-0x2*0x4a9)),_0x1ad440=new Float32Array(_0x3731d6*(-0x1920+0x1*-0xa9+0xd*0x1fc)),_0x112dcf=new Float32Array(_0x3731d6));const _0x3f509f=new _0x446b5e(0x29*0xaf+0x2222+-0x3e29,0xa6d+0x1adc+-0x5*0x775,-0x1*-0x683+-0x22ce+0x1*0x1c4b,-0x1d32+-0x14da*0x1+-0x2*-0x1906);for(let _0x4bd663=0x35*0x77+-0xb00+-0x1*0xda3;_0x4bd663<_0x3731d6;_0x4bd663++)_0x3f509f['set'](_0x281c59[_0x4bd663],_0x311f81[_0x4bd663],_0x1a961c[_0x4bd663],_0x206dd1[_0x4bd663]),_0x3f509f['normalize'](),_0x3f509f['w']<-0x1*-0xa91+-0xfd*-0x16+0x204f*-0x1&&_0x3f509f['mulScalar'](-(-0x403*-0x3+0x17db+0x1*-0x23e3)),_0x4000b4[_0x4bd663*(-0x1*-0x26b7+-0xd9b*-0x1+0x1*-0x344f)+(0x2*0x859+0x1*-0x935+-0x77d)]=_0x17fe0d[_0x4bd663],_0x4000b4[_0x4bd663*(0x313*0x1+0x1*0x16cf+-0x19df)+(0x5*-0x233+0xbed+-0xed)]=_0x31604b[_0x4bd663],_0x4000b4[_0x4bd663*(-0x7f7*0x1+0xca5+0xef*-0x5)+(-0x13ac+-0xb1e+0x1ecc)]=_0x433506[_0x4bd663],_0x398e14[_0x4bd663*(0x2261+0x23e8+-0x4646)+(-0x3b*0x7d+0x1*-0xf9+0x1dc8)]=_0x17fe0d[_0x4bd663],_0x398e14[_0x4bd663*(0x1cc4+0x3*0x3+-0x16*0x14f)+(-0x1e45+0x1*-0x243f+0x4285)]=_0x31604b[_0x4bd663],_0x398e14[_0x4bd663*(0x13ca+0x83b*-0x4+0xd25)+(-0x2*-0xdd9+-0x17e1+-0x3cf)]=_0x433506[_0x4bd663],_0x26b139[_0x4bd663*(-0x14dc+0x894+0xc4b)+(-0x235+0x4*0x65+0xa1)]=_0x23785e(Math['exp'](_0x4f0ff3[_0x4bd663])),_0x26b139[_0x4bd663*(-0x253d+0x18b+0x23b5)+(-0x246e+-0x1*-0x173e+0x133*0xb)]=_0x23785e(Math['exp'](_0x389126[_0x4bd663])),_0x26b139[_0x4bd663*(0x7*0x281+0x1*-0x14ab+-0x3*-0x10d)+(-0x1227*0x2+-0x93*-0x3f+0x23)]=_0x23785e(Math['exp'](_0x28f03d[_0x4bd663])),_0x54abfb[_0x4bd663*(0x182d+0x1aee*-0x1+0x2c4)+(-0x1*-0x204d+-0x1*-0x1951+-0x3b*0xfa)]=_0x3f509f['x'],_0x54abfb[_0x4bd663*(-0x1*0xa6f+0x247*-0x11+0x1*0x3129)+(-0x4*-0x6ee+-0xfba+-0xbfd)]=_0x3f509f['y'],_0x54abfb[_0x4bd663*(-0x139a+0x1268+0x3*0x67)+(0x1e7*-0xf+-0x10dd+0x2d68)]=_0x3f509f['z'],_0x1f1634&&_0x295423&&_0x157f41&&(_0x295423[_0x4bd663*(-0xc6a+-0x1fcb+0x2c38)+(0x3*-0xadd+-0x1*0x10d9+0x2*0x18b8)]=_0xb39f8c[_0x4bd663],_0x295423[_0x4bd663*(-0x1ca5+0x8*-0xd3+0x2340)+(-0x932+0x1b0f+-0x11dc)]=_0x39a528[_0x4bd663],_0x295423[_0x4bd663*(0x1*-0x8fd+-0x1291+0x1b91)+(-0xa84*0x1+-0x8fb+0x1381*0x1)]=_0xb0ce93[_0x4bd663],_0x1ad440[_0x4bd663*(-0x92*-0xa+0x16af*-0x1+0x10fe)+(-0x1*-0xb67+-0x236*0xd+0x1157*0x1)]=_0xb39f8c[_0x4bd663],_0x1ad440[_0x4bd663*(-0x26bc+-0x2450+0x4b0f)+(0x7d9+0xf*-0x35+-0x4bd)]=_0x39a528[_0x4bd663],_0x1ad440[_0x4bd663*(0x9f1+0x39e+-0xd8c)+(-0xd1c+-0x63*-0x58+-0xa75*0x2)]=_0xb0ce93[_0x4bd663],_0x112dcf[_0x4bd663]=_0x23df8b?Math['exp'](_0x23df8b[_0x4bd663]):-0x3*-0x985+-0x3d*0x56+-0x811,_0x157f41[_0x4bd663*(0x130f+-0x13*-0x1cd+-0x65*0x87)+(-0x590*-0x3+0x1203+-0x3f*0x8d)]=_0x1216df?_0x1216df[_0x4bd663]:0x1f6+-0x311+0x1*0x11b,_0x157f41[_0x4bd663*(-0xeda+0x2606*-0x1+0x3*0x11a1)+(0xeb*-0x1d+-0x16*0x91+0x2716)]=_0x112dcf[_0x4bd663]);const _0x3287f5=[_0x398e14['buffer'],_0x4000b4['buffer'],_0x26b139['buffer'],_0x54abfb['buffer']];_0x1f1634&&_0x3287f5['push'](_0x295423['buffer'],_0x157f41['buffer'],_0x1ad440['buffer'],_0x112dcf['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x398e14,'dataPosition':_0x4000b4,'dataScale':_0x26b139,'dataRotation':_0x54abfb,'dataMotion':_0x295423,'dataTime':_0x157f41,'motion':_0x1ad440,'tScaleArray':_0x112dcf},_0x3287f5);},_0xf5412e=(_0x103ba1,_0x4ec962,_0xb6daf1,_0x15f2c2,_0x7444cf)=>{const _0x34bb1d=new Uint16Array(_0x103ba1*(-0xb3f*0x1+0x7*0x2c3+-0x2*0x409)),_0x19d9ae=-0x1*-0x1d1b+0xb3*-0xb+-0x1*0x156a+0.28209479177387814;for(let _0x12247a=-0x2561+0x13*0x3a+0x2113*0x1;_0x12247a<_0x103ba1;++_0x12247a){const _0x344fd9=_0x4ec962[_0x12247a]*_0x19d9ae+(-0x65*-0x1f+0xc7c*-0x1+0x41+0.5),_0x101ce0=_0xb6daf1[_0x12247a]*_0x19d9ae+(0xf*0xfe+0x9*0x42f+0x1*-0x3489+0.5),_0x567c76=_0x15f2c2[_0x12247a]*_0x19d9ae+(0x13*-0xa7+0x14b3+-0x84e+0.5),_0x20a8b8=_0x7444cf[_0x12247a];_0x34bb1d[_0x12247a*(0xd63+-0x1b14+0xdb5)+(-0x644+-0x17*0x148+0x23bc)]=_0x23785e(_0x344fd9),_0x34bb1d[_0x12247a*(0x137a+0x1db*-0x13+-0x1*-0xfcb)+(0x9d*0x2b+0xd*-0x287+0xb*0x97)]=_0x23785e(_0x101ce0),_0x34bb1d[_0x12247a*(-0x105d*-0x2+0xba6+-0x11*0x29c)+(-0x9f0+-0x2ab+0xc9d)]=_0x23785e(_0x567c76),_0x34bb1d[_0x12247a*(-0x2*0xec5+-0x19a3+0xc7*0x47)+(0x3*0xc27+-0x91*0x23+-0x5*0x353)]=_0x23785e(_0x20a8b8);}self['postMessag'+'e']({'type':'updatedCol'+'orData','data':_0x34bb1d});},_0x50bc4f=(_0xa6789a,_0x5aee36,_0x56d55a)=>{const _0x590f5d=new Uint32Array(_0xa6789a*(0x1a26*-0x1+0x21cf+-0x7a5)),_0x1895be=new Uint32Array(_0xa6789a*(-0x11c9+0x502*0x2+0x7c9)),_0x1c9da2=new Uint32Array(_0xa6789a*(-0x9bc+0x188+0x838)),_0x363a93=new Uint32Array(_0xa6789a*(0x70a+-0x12*-0xce+0x1*-0x1582)),_0x268923={0x1:0x3,0x2:0x8,0x3:0xf}[_0x5aee36],_0x202c8b=_0x56d55a,_0x5c276b=-0x1efc+0x4d2*0x1+0x2229,_0x568957=0x2*-0x31c+-0x125*0x11+0x2*0xed6,_0x5167b6=new Float32Array(-0x1d2e+0x16e0+0x13*0x55),_0x890afd=new Uint32Array(_0x5167b6['buffer']),_0x316433=new Array(_0x268923*(0x1283+-0xa01+-0x87f))['fill'](-0x945+-0x2697+-0x3*-0xff4);for(let _0xd45e55=0x13f7+0x26b4*0x1+0x1*-0x3aab;_0xd45e55<_0xa6789a;++_0xd45e55){for(let _0x5995ca=0xea3*0x1+-0x176b+0x119*0x8;_0x5995ca<_0x268923;++_0x5995ca)_0x316433[_0x5995ca*(-0x557+0x3eb+0x16f)]=_0x202c8b[_0x5995ca][_0xd45e55],_0x316433[_0x5995ca*(0x24f3+0x13b0+-0x38a0)+(-0x1dc3+-0x1bcc+0x3990)]=_0x202c8b[_0x5995ca+_0x268923][_0xd45e55],_0x316433[_0x5995ca*(0x48d+0x23cd+0x2857*-0x1)+(0x377*-0x2+-0x1379+0x1*0x1a69)]=_0x202c8b[_0x5995ca+_0x268923*(-0x1*0x1f2d+-0x952+0x1*0x2881)][_0xd45e55];let _0x5194bb=_0x316433[-0xaf5+-0x897+0x138c];for(let _0x5e3802=0xfa6+0x5f1*-0x5+-0x4*-0x384;_0x5e3802<_0x268923*(-0x1*0x734+0x24c9+-0x1d92);++_0x5e3802)_0x5194bb=Math['max'](_0x5194bb,Math['abs'](_0x316433[_0x5e3802]));if(_0x5194bb!==0x291*0xe+-0x26e*-0x3+-0x2b38){for(let _0x2792d6=0x846+-0x2*0x7c1+0x73c;_0x2792d6<_0x268923;++_0x2792d6)_0x316433[_0x2792d6*(0x954+-0x33b+-0x616)+(0x31*-0x3b+-0x40d*-0x2+-0x1*-0x331)]=Math['max'](0x21ae+0x1f77+-0x4125,Math['min'](_0x5c276b,Math['floor']((_0x316433[_0x2792d6*(-0x239*-0x9+0x1*-0x207+-0x11f7)+(0x1348+0x2503+-0x384b)]/_0x5194bb*(-0x1*-0xda9+-0x4c*0x3d+0x11*0x43+0.5)+(-0x1*0x17be+-0x1455+-0x3*-0xeb1+0.5))*_0x5c276b+(0xfca*-0x2+-0x197c+-0xe44*-0x4+0.5)))),_0x316433[_0x2792d6*(0x7*0x2fe+0x2362*0x1+-0x455*0xd)+(0x474+-0x1*-0x1f0a+-0x237d)]=Math['max'](-0x2355+-0xae6+0xf*0x315,Math['min'](_0x568957,Math['floor']((_0x316433[_0x2792d6*(0x2123+0x3f8+-0x4a3*0x8)+(0x2*0x805+-0x217+0xa*-0x165)]/_0x5194bb*(-0x26*-0x6b+-0x5dd*0x1+-0xa05+0.5)+(0x389+-0xc7f+0x8f6+0.5))*_0x568957+(-0x89d+-0x177f+0x201c+0.5)))),_0x316433[_0x2792d6*(-0x22d0+0x812+0x1ac1)+(0x7*0x14a+0x1f90+-0x2894)]=Math['max'](0x25d8+-0x10a5*-0x1+0x25*-0x179,Math['min'](_0x5c276b,Math['floor']((_0x316433[_0x2792d6*(0x79*-0x14+-0x68*0x1e+0x15a7)+(0x13*-0x194+0xbb9+0x1245)]/_0x5194bb*(0x22d*0x10+0x1*-0x4bd+0x1e13*-0x1+0.5)+(-0x216a+0x1289+0xd*0x125+0.5))*_0x5c276b+(0xb8b*-0x2+-0x1*0x1c4c+0x19b1*0x2+0.5))));_0x5167b6[-0x205+0x4e*0x59+0x101*-0x19]=_0x5194bb,_0x590f5d[_0xd45e55*(0x1a60+0x1*-0x1129+-0x933)+(0x40d+-0xcc2*-0x3+0x877*-0x5)]=_0x890afd[0x12bb*0x2+0x39b*-0x2+-0x1e40],_0x590f5d[_0xd45e55*(0x11*0x44+-0x11ce+0xd4e)+(-0x1e*0x11a+-0x3*-0xb73+0xa6*-0x2)]=_0x316433[0x10d0+0x1b64+-0x2c34]<<-0x24be+0x1*0x82c+0x1ca7|_0x316433[0x4*0x892+0x1*0x1f66+-0x17*0x2db]<<-0x152f+0xd1f+0x19*0x53|_0x316433[-0x1*-0x207+-0x1*-0x2153+-0x2358],_0x590f5d[_0xd45e55*(0x1*-0x801+0x1*0x25c1+-0xede*0x2)+(0x1125+0x94+-0x11b7)]=_0x316433[0xa4f+0x977*0x1+-0x13c3*0x1]<<0x1219*0x1+0xd4e+-0x1f52|_0x316433[0xee3+0x241+-0x1120]<<0x51a+-0xc*0x2d2+0x1cc9|_0x316433[0xe*0x272+-0x1bcb+-0x89*0xc],_0x590f5d[_0xd45e55*(0xe04+0x1*0x20+-0xe20)+(-0xa9*-0xd+-0x20fc+0x32*0x7d)]=_0x316433[0x49*-0x1+0x2a1*0x2+-0xb5*0x7]<<-0x16be+0x22d5+0x2*-0x601|_0x316433[-0x2f*0xad+0x1750+-0x3e*-0x23]<<-0x1*-0x12b2+-0x1*0x1dd8+0xbf*0xf|_0x316433[-0x5*-0x292+-0x7b2+-0x52*0x10],_0x5aee36>0xd5a+-0x8dd*-0x4+-0x30cd&&(_0x1895be[_0xd45e55*(-0x98b+0xa1+-0x9*-0xfe)+(0x1d*0x3+0x1197+-0x11ee)]=_0x316433[-0x2075*0x1+0x23e6+-0x368]<<0x2a9+-0xd19+0xa85|_0x316433[-0x100d+-0xa97*-0x3+-0xfae]<<-0x12af*0x1+-0xf4b+-0xb57*-0x3|_0x316433[0x1*0x1249+-0x4*-0x88c+0x117a*-0x3],_0x1895be[_0xd45e55*(0x4*-0x452+-0x98a+0x1ad6)+(-0x7a*0x15+-0x1fdd+0x29e0)]=_0x316433[0x4b*0x64+-0xcf6+-0x342*0x5]<<-0x27f*-0x1+0x170e+-0x1978|_0x316433[0x1dd5+-0x7da*-0x3+-0x3556]<<-0xd*-0x23b+-0x7*0x4ed+0x587|_0x316433[-0x208+-0x22e9+0x21*0x11f],_0x1895be[_0xd45e55*(-0x2073+0xc43*0x1+0x1434)+(-0x65*0xa+0x2*-0xbe4+0x1bbc)]=_0x316433[0x1*0x1e3d+0xcee*-0x1+-0x17*0xc0]<<0x363+0xdb7*-0x1+0xa69|_0x316433[-0x1*0x7c3+-0x39*-0x62+-0xdff]<<-0x1*-0x19df+0x1*-0xf55+-0x1*0xa7f|_0x316433[-0xe29+-0x108b+0x1ec5],_0x1895be[_0xd45e55*(-0x49*0x85+-0x1fbb+0x27d*0x1c)+(0x47*0x66+-0x2*-0xb47+0x1*-0x32d5)]=_0x316433[-0xf*0x2e+-0x4f1+-0x7b5*-0x1]<<-0x1*0x1391+-0x16f*0x17+0x349f|_0x316433[-0x1f17*0x1+0x463+0x1ac7]<<0x1*-0x26ad+-0x11b0+0x3868|_0x316433[-0x35*0x7+-0x1*-0x2611+-0x248a],_0x5aee36>0x2*0x4b7+0x10b4+-0x1a20?(_0x1c9da2[_0xd45e55*(-0x1*-0x7d3+0x26e1+-0x2eb0)+(-0x1a60+0x3*-0xf2+0x1d36)]=_0x316433[-0x557*0x5+0x893+0x1235]<<0xeb7*0x2+-0x1*0x123d+-0x6*0x1da|_0x316433[0x4*0x6a9+-0x2*-0x7a5+0x338*-0xd]<<-0x138+0xf5c*0x2+-0x1d75*0x1|_0x316433[-0x2144+-0x631+-0x9e3*-0x4],_0x1c9da2[_0xd45e55*(-0x1b1a+-0x3*0x527+0x2a93)+(0x232e+0xd67+-0x3094)]=_0x316433[-0x7bb*0x1+-0x1606+0x9*0x351]<<0xda*-0x4+-0x26b8+0x871*0x5|_0x316433[-0x1346+-0x2336+0x3695]<<0x891+0x24f9+-0x2d7f|_0x316433[-0x92*-0x9+-0x1d2*-0xa+-0x173c],_0x1c9da2[_0xd45e55*(-0xeb*-0xe+0x4*-0x8a+0x2*-0x557)+(-0x4d9*-0x2+0xa4c+-0x1*0x13fc)]=_0x316433[-0x2ee+0x1*-0x121+0x42a]<<0x696+-0x1*-0x1aab+-0x212c|_0x316433[-0x1642+-0x6ec*0x3+0x2b22]<<0x366*-0x2+-0x1b2e+0x2205|_0x316433[-0xfe9+-0x1*-0x13d+0xec9],_0x1c9da2[_0xd45e55*(-0x1*0x1479+-0x1648+0x1*0x2ac5)+(-0xcfb+-0x140f*0x1+-0x1*-0x210d)]=_0x316433[0x38*0x82+-0x1fac*-0x1+-0x3bfe]<<0x145d*-0x1+-0x809+0x17*0x13d|_0x316433[-0x1f5b+0x1bab+-0x5*-0xc3]<<0x1c64+-0x2383*-0x1+-0x3fdc|_0x316433[-0x1*0x1b83+0x1a1b+0x1*0x188],_0x363a93[_0xd45e55*(-0x21f7+-0x1*-0x2197+0x64)+(-0x1*0x1b38+0x170a+-0x217*-0x2)]=_0x316433[-0x2269+-0x5d4+0x285e]<<0x1*-0x23e3+0xcab+0x174d|_0x316433[-0x227f*0x1+0xf12+0x138f*0x1]<<0x1*0x1181+0x1*0x61+0x1*-0x11d7|_0x316433[-0xbf*-0x26+0xe97*0x1+-0x1*0x2ace],_0x363a93[_0xd45e55*(-0x257*0x4+0x5*0xc5+-0x587*-0x1)+(0x130+-0x16b*0x1+0x3c)]=_0x316433[-0x1682+-0xead+0x2553]<<-0x1*-0x3eb+0x826+-0xbfc|_0x316433[-0x17dd+-0x11bd+-0x1*-0x29bf]<<0x3d*0x91+0x249b+-0x471d|_0x316433[0x74d+0x1a9f+-0x21c6],_0x363a93[_0xd45e55*(0x355*-0x7+-0xe3+-0x1*-0x183a)+(0x214d+0x16d0+-0x381b)]=_0x316433[-0x1f*-0x65+0x1*0x1d0d+-0x2921]<<0x1*-0xd55+0x140b*-0x1+0x2175|_0x316433[-0x1dc5+-0x139e+0x318b]<<0x9*0x99+-0x2423+0x1ecd|_0x316433[-0x4*-0x2ba+-0x3*-0xbb3+-0x518*0x9],_0x363a93[_0xd45e55*(0x89*-0x1a+-0x1f09+0x2cf7)+(-0x1b1d+0x3e0+-0x10*-0x174)]=_0x316433[0x147f+0x59e+-0x19f3]<<0x8e1+-0xd41+0x1*0x475|_0x316433[-0x1*-0x622+0x1296+-0x188d]<<-0x1*-0xb73+0x1cc6+-0x8b*0x4a|_0x316433[-0x1c6c+0xeac+-0x252*-0x6]):_0x1c9da2[_0xd45e55]=_0x316433[-0xb52+-0x712+0x1279]<<-0x70a+-0x224f*0x1+0x14b7*0x2|_0x316433[-0x122+0x7b*-0x5+0x39f]<<-0xec*0x11+-0x22f1*-0x1+-0x6b*0x2e|_0x316433[0x49*-0x52+-0x129*-0x1e+-0xb55]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x590f5d,'sh4to7Data':_0x1895be,'sh8to11Data':_0x1c9da2,'sh12to15Data':_0x363a93}},[_0x590f5d['buffer'],_0x1895be['buffer'],_0x1c9da2['buffer'],_0x363a93['buffer']]);},_0x4189d1=()=>{_0x398e14=null,_0x157f41=null,_0x54abfb=null,_0x4000b4=null,_0x295423=null,_0x26b139=null,_0x1ad440=null,_0x112dcf=null;};}let wC=class extends me{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+TC['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0xc6cc69,_0x1fcd5c,_0x3aa25b){_0xc6cc69['onmessage']=_0x8794cb=>{if(!this['worker'])return;const {data:_0x5cf1ea}=_0x8794cb;if(_0x5cf1ea['type']===_0x1fcd5c)switch(_0x1fcd5c){case'updatedSHD'+'ata1':_0x3aa25b(_0x5cf1ea['data']);break;case'updatedCol'+'orData':_0x3aa25b(_0x5cf1ea['data']);break;case'updatedTra'+'nsformData':_0x3aa25b(_0x5cf1ea);break;case'updatedAab'+'bData':_0x3aa25b(_0x5cf1ea);break;}};}['updateSHDa'+'ta1'](_0x42b6d6,_0x4f4fb5,_0x3a31a5){var _0x294c34;return(_0x294c34=this['worker'])==null||_0x294c34['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x42b6d6,'shBands':_0x4f4fb5,'SHData':_0x3a31a5}),new Promise(_0x2be982=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0xe27358=>{_0x2be982(_0xe27358);});});}async['updateColo'+'rData'](_0x143769,_0xcffe8a,_0x31ecd0,_0x3f1af4,_0x47143a){var _0x2b436b;return(_0x2b436b=this['worker'])==null||_0x2b436b['postMessag'+'e']({'type':'updateColo'+'rData','numSplats':_0x143769,'cr':_0xcffe8a,'cg':_0x31ecd0,'cb':_0x3f1af4,'ca':_0x47143a}),new Promise(_0x4641ab=>{this['workerMess'+'ageFn'](this['worker'],'updatedCol'+'orData',_0x1f08a8=>{_0x4641ab(_0x1f08a8);});});}async['calcAabb'](_0x228ead,_0x4841b6,_0x5eef7d,_0x349965,_0x138391,_0x249891,_0xb57dc){var _0x483b24;const _0x3c08c0=new Float32Array(_0x4841b6),_0x33c2b2=new Float32Array(_0x5eef7d),_0x2cdb17=new Float32Array(_0x349965),_0x3e8ca8=new Float32Array(_0x138391),_0x46ea62=new Float32Array(_0x249891),_0xa1fc0e=new Float32Array(_0xb57dc);return(_0x483b24=this['worker'])==null||_0x483b24['postMessag'+'e']({'type':'calcAabb','numSplats':_0x228ead,'x':_0x3c08c0,'y':_0x33c2b2,'z':_0x2cdb17,'sx':_0x3e8ca8,'sy':_0x46ea62,'sz':_0xa1fc0e},[_0x3c08c0['buffer'],_0x33c2b2['buffer'],_0x2cdb17['buffer'],_0x3e8ca8['buffer'],_0x46ea62['buffer'],_0xa1fc0e['buffer']]),new Promise(_0xe4f754=>{this['workerMess'+'ageFn'](this['worker'],'updatedAab'+'bData',_0x205e94=>{_0xe4f754(_0x205e94);});});}async['updateTran'+'sData'](_0xc85c4b,_0x8c9c44,_0x364fb9,_0x593d6c,_0x1a11bb,_0x333d12,_0x2d207a,_0x3dcdfd,_0x432bba,_0x3a94e6,_0xb3628d,_0x58ba29,_0xa5683,_0x1a2636,_0x2d3e1a,_0x2ff030,_0x1d8151){var _0x1ffd08;return(_0x1ffd08=this['worker'])==null||_0x1ffd08['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0xc85c4b,'is4D':_0x8c9c44,'x':_0x364fb9,'y':_0x593d6c,'z':_0x1a11bb,'rx':_0x333d12,'ry':_0x2d207a,'rz':_0x3dcdfd,'rw':_0x432bba,'mx':_0x3a94e6,'my':_0xb3628d,'mz':_0x58ba29,'sx':_0xa5683,'sy':_0x1a2636,'sz':_0x2d3e1a,'muT':_0x2ff030,'tScale':_0x1d8151}),new Promise(_0x3765aa=>{const _0x15e264=_0x24cf71=>{_0x3765aa(_0x24cf71);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x15e264);});}['destroy'](){var _0x4dcf7f;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x4dcf7f=this['worker'])==null||_0x4dcf7f['terminate'](),this['worker']=null);}};const vg=(_0x2596df,_0x21257b)=>{const _0x326620=[];for(let _0x1d9914=0x1*0x2129+0xeba+0x2fe3*-0x1;_0x1d9914<_0x21257b;++_0x1d9914)_0x326620['push'](_0x2596df['getProp']('f_rest_'+_0x1d9914));return _0x326620;};class EC extends Rv{constructor(_0x108d92,_0xda9899){console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),super(_0x108d92,_0xda9899),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(-0x20ba*0x1+-0x8e4+-0x1*-0x299f)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new wC(),this['assetsMana'+'gerLoadedT'+'ime']=0x3b*-0x51+0x35*-0x4+-0x1*-0x1384);}async['updateData'](){var _0x240664,_0x205883,_0x407330,_0x5c81e5,_0x2a94bf,_0x4a4f2a,_0x2218f0,_0x392962,_0x5505e8,_0x218f0e,_0x39fa3c;console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Data'),await super['updateData']();const _0x5d99f3=this['gsplatData'];if(!_0x5d99f3)return;this['is4D']=_0x5d99f3['is4D'];const _0x5bd2e3=await this['getTransfo'+'rmDataByWo'+'rker'](_0x5d99f3);this['aabb']=new De(),await _0x5d99f3['calcAabbAs'+'ync'](this['aabb'],this['updateData'+'Worker']),this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x5bd2e3['centers'],this['motion']=_0x5bd2e3['motion'],this['tScale']=_0x5bd2e3['tScaleArra'+'y'],this['muT']=await _0x5d99f3['getMuT'](),this['timeIndex']=await _0x5d99f3['getTimeInd'+'ex']();const _0x277b69=this['evalTextur'+'eSize'](_0x5d99f3['numSplats']);this['colorTextu'+'re']?((_0x240664=this['colorTextu'+'re2'])==null||_0x240664['destroy'](),(_0x205883=this['transformA'+'Texture2'])==null||_0x205883['destroy'](),(_0x407330=this['transformB'+'Texture2'])==null||_0x407330['destroy'](),(_0x5c81e5=this['transformR'+'Texture2'])==null||_0x5c81e5['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x277b69),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x277b69),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x277b69),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x277b69),this['is4D']&&((_0x2a94bf=this['transformM'+'otionTextu'+'re2'])==null||_0x2a94bf['destroy'](),(_0x4a4f2a=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x4a4f2a['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x277b69),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x277b69))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',nt,_0x277b69),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x277b69),this['transformA'+'Texture']=this['createText'+'ure']('transformA',Ye,_0x277b69),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x277b69),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ui,_0x277b69),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x277b69),this['transformR'+'Texture']=this['createText'+'ure']('transformR',Ye,_0x277b69),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x277b69),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',Ye,_0x277b69),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x277b69),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',Ye,_0x277b69),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x277b69))),await this['updateColo'+'rData'](_0x5d99f3),await this['updateTran'+'sformFromD'+'ata'](_0x5bd2e3),this['shBands']=_0x5d99f3['shBands'],this['shBands']>0x7fd+0x1994*0x1+0x1*-0x2191&&(this['sh1to3Text'+'ure']?((_0x2218f0=this['sh1to3Text'+'ure2'])==null||_0x2218f0['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x277b69),this['shBands']>-0x1181*-0x2+-0x1dba+-0x1*0x547&&((_0x392962=this['sh4to7Text'+'ure2'])==null||_0x392962['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x277b69),this['shBands']>-0x1286*-0x2+0x227a+0x11e1*-0x4?((_0x5505e8=this['sh8to11Tex'+'ture2'])==null||_0x5505e8['destroy'](),(_0x218f0e=this['sh12to15Te'+'xture2'])==null||_0x218f0e['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x277b69),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x277b69)):((_0x39fa3c=this['sh8to11Tex'+'ture2'])==null||_0x39fa3c['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x277b69)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x277b69),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ue,_0x277b69),this['shBands']>0xda3+0x1447+-0x21e9&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ue,_0x277b69),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x277b69),this['shBands']>-0xb58+-0xa66+0x15c0?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ue,_0x277b69),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x277b69),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ue,_0x277b69),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x277b69)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ki,_0x277b69),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ki,_0x277b69)))),await this['updateSHDa'+'taByWorker'](_0x5d99f3));}['updateText'+'ure'](){console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Texture'),!this['isDestroye'+'d']&&(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x2fb066){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x2fb066}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20releas'+'eSeqGSplat'+'\x20all'),this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x185bf6,_0xe703bb,_0x5d1849,_0x403028,_0x37ec82){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x185bf6,'timeOption':_0xe703bb,'loadedTime':_0x5d1849,'asset':_0x403028,'events':_0x37ec82}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(0x88*0x47+0x1063+-0x361b);try{for(;this['appendQueu'+'e']['length']>0xed1+-0x265c+0x178b;){const _0x1ea600=this['appendQueu'+'e']['shift']();_0x1ea600['type']==='append'?await this['processApp'+'endTask'](_0x1ea600['data']):_0x1ea600['type']==='release'&&await this['processRel'+'easeTask'](_0x1ea600['data']);}}finally{this['isProcessi'+'ngQueue']=!(0x3df*-0x9+-0xef2*0x2+0x205e*0x2);}}}async['processRel'+'easeTask'](_0x5dc5df){const {index:_0x2dcade}=_0x5dc5df;console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.relea'+'seGSplatRe'+'source',_0x2dcade),!this['isDestroye'+'d']&&await this['gsplatData']['releaseSeq'+'Data'](_0x2dcade);}async['processApp'+'endTask'](_0x102e60){var _0x576a61;const {gsplatData:_0x116bf1,timeOption:_0x5678fc,loadedTime:_0x439e72,asset:_0x534e92,events:_0x283a4e}=_0x102e60;!this['gsplatData']||this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.appen'+'dGSplatRes'+'ource'),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x5678fc,await this['gsplatData']['appendGSpl'+'atData'](_0x116bf1,_0x439e72,_0x5678fc),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20gspla'+'tData.appe'+'ndGSplatDa'+'ta',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x26f*0x1+0x18c0+0x305*-0x9),_0x116bf1['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x116bf1['numSplats'])['toFixed'](0x1*0xa54+-0x23*0x89+-0x167*-0x6)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20this.'+'updateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x1502+-0x1*-0x1be8+-0xa*0x4e4),_0x116bf1['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),(_0x576a61=this['gsplatInst'+'ance'])==null||_0x576a61['updateInst'+'anceData'](this),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20updat'+'eInstanceD'+'ata',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0xb3*0x32+0x5fb*-0x5+0x40df),_0x116bf1['numSplats']),this['asset']=_0x534e92,this['assetsMana'+'gerLoadedT'+'ime']=_0x439e72,this['events']=_0x283a4e);}['fireAssets'+'ManagerTim'+'eIndex'](){var _0x809691;const _0x9233c4=this['assetsMana'+'gerLoadedT'+'ime'];console['log']('____\x20ENGIN'+'E\x20IVAN','fireAssets'+'ManagerTim'+'eIndex',_0x9233c4),(_0x809691=this['asset'])==null||_0x809691['fire']('setAssetsL'+'oaded',_0x9233c4);}['destroy'](){var _0x34adc2,_0x40cdb5,_0x3fb2b0,_0x346c08,_0x201bd5,_0x1d4865,_0x17dc18,_0x135412,_0x3b6498,_0xc5fb90,_0x546d04,_0x4365f7,_0x59bada,_0x5a306f,_0xfbf81f,_0xd055f,_0xdfee2f,_0x403bd7,_0x653620,_0x59f44c,_0x5c4b50;(_0x34adc2=this['updateData'+'Worker'])==null||_0x34adc2['destroy'](),this['updateData'+'Worker']=void(0x1ee2+0x4c2+-0x23a4),(_0x40cdb5=this['colorTextu'+'re'])==null||_0x40cdb5['destroy'](),(_0x3fb2b0=this['transformA'+'Texture'])==null||_0x3fb2b0['destroy'](),(_0x346c08=this['transformB'+'Texture'])==null||_0x346c08['destroy'](),(_0x201bd5=this['transformR'+'Texture'])==null||_0x201bd5['destroy'](),(_0x1d4865=this['transformM'+'otionTextu'+'re'])==null||_0x1d4865['destroy'](),(_0x17dc18=this['transformL'+'ifecycleTe'+'xture'])==null||_0x17dc18['destroy'](),(_0x135412=this['sh1to3Text'+'ure'])==null||_0x135412['destroy'](),(_0x3b6498=this['sh4to7Text'+'ure'])==null||_0x3b6498['destroy'](),(_0xc5fb90=this['sh8to11Tex'+'ture'])==null||_0xc5fb90['destroy'](),(_0x546d04=this['sh12to15Te'+'xture'])==null||_0x546d04['destroy'](),(_0x4365f7=this['colorTextu'+'re2'])==null||_0x4365f7['destroy'](),(_0x59bada=this['transformA'+'Texture2'])==null||_0x59bada['destroy'](),(_0x5a306f=this['transformB'+'Texture2'])==null||_0x5a306f['destroy'](),(_0xfbf81f=this['transformR'+'Texture2'])==null||_0xfbf81f['destroy'](),(_0xd055f=this['transformM'+'otionTextu'+'re2'])==null||_0xd055f['destroy'](),(_0xdfee2f=this['transformL'+'ifecycleTe'+'xture2'])==null||_0xdfee2f['destroy'](),(_0x403bd7=this['sh1to3Text'+'ure2'])==null||_0x403bd7['destroy'](),(_0x653620=this['sh4to7Text'+'ure2'])==null||_0x653620['destroy'](),(_0x59f44c=this['sh8to11Tex'+'ture2'])==null||_0x59f44c['destroy'](),(_0x5c4b50=this['sh12to15Te'+'xture2'])==null||_0x5c4b50['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x17a30f){var _0x568b6c,_0x12bff1,_0x5f237c,_0x352172,_0x47e789,_0x3860ed,_0x15bb1b,_0x2c0715,_0x2b4a1a,_0x302cce,_0x32dcbc,_0x5c667a,_0x229357;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x5a988a=((_0x568b6c=_0x17a30f['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(0x8b*0x3b+-0x7d3*0x1+-0x1836):_0x568b6c['data'])??-0x10db*0x2+0x4f3+-0x1cc3*-0x1,_0x251e3d=((_0x12bff1=_0x17a30f['getParamet'+'er']('uSplatScal'+'e'))==null?void(0x270c+0xc*0x31b+-0x4c50):_0x12bff1['data'])??0x1*-0x660+0x1*-0xf9+0x75a*0x1,_0x158f1a=((_0x5f237c=_0x17a30f['getParamet'+'er']('uSaturatio'+'n'))==null?void(-0xe63+0x23ce*0x1+0x156b*-0x1):_0x5f237c['data'])??0x77f*0x1+-0x1b0c+-0x1*-0x138e,_0x136c9d=((_0x352172=_0x17a30f['getParamet'+'er']('uHueOffset'))==null?void(-0x1020+0x29*-0xca+0x2da*0x11):_0x352172['data'])??-0x2527+-0x1*-0x1cd5+-0x8e*-0xf,_0x7ced75=((_0x47e789=_0x17a30f['getParamet'+'er']('uInvertOpa'+'city'))==null?void(-0x131c+-0x9df*-0x3+0x1*-0xa81):_0x47e789['data'])??-0x517+-0x42b+0x942,_0x162db7=((_0x3860ed=_0x17a30f['getParamet'+'er']('uOpacity'))==null?void(-0x1*-0x2291+0x2489+-0x26*0x1df):_0x3860ed['data'])??0x21b+0x244b+-0x1*0x2665,_0x3021fd=((_0x15bb1b=_0x17a30f['getParamet'+'er']('clrOffset'))==null?void(0x197*-0x5+-0x1d31+0x2524):_0x15bb1b['data'])??[-0x2e5*0x1+0x67+0x27e,0x413+-0x1bae+0x179b*0x1,0x262c+-0xb58+0xca*-0x22,0x67*0x53+0x21ea+-0x434e],_0xe8cbe7=((_0x2c0715=_0x17a30f['getParamet'+'er']('clrScale'))==null?void(-0x2*-0x11ad+0x2258+-0x1*0x45b2):_0x2c0715['data'])??[-0xaca+-0x148b+0xe*0x23d,-0x1d4*0x9+-0x1fda+-0x95*-0x53,0x21ef+0x11*0x8e+-0x25*0x12c,0x18f8+0x1273*-0x2+0xbef],_0x1e4681=((_0x2b4a1a=_0x17a30f['getParamet'+'er']('uShapeN'))==null?void(-0x1624+0x22b3+-0xc8f):_0x2b4a1a['data'])??0x617+-0x43*-0x6c+0x225b*-0x1,_0x118266=((_0x302cce=_0x17a30f['getParamet'+'er']('mode'))==null?void(-0x1*0xe0a+0x13b7+0x5ad*-0x1):_0x302cce['data'])??0x4c*-0x25+-0x232b+0x2e27,_0x26e32e=((_0x32dcbc=_0x17a30f['getParamet'+'er']('ringSize'))==null?void(0x1f22+-0x5*0x481+-0x89d):_0x32dcbc['data'])??0x10f5+-0x1ba8+0xf9*0xb,_0x328038=((_0x5c667a=_0x17a30f['defines'])==null?void(-0x11f9+0xb52+-0xd*-0x83):_0x5c667a['get']('uOpenAnim'))??'0',_0x3338ad=((_0x229357=_0x17a30f['defines'])==null?void(0x1f89+0xade+-0x2a67):_0x229357['get']('uControlCo'+'lorMode'))??'0';_0x17a30f['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x17a30f['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x17a30f['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x17a30f['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x17a30f['setParamet'+'er']('uSplatScal'+'e',_0x251e3d),_0x17a30f['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x5a988a),_0x17a30f['setParamet'+'er']('uSaturatio'+'n',_0x158f1a),_0x17a30f['setParamet'+'er']('uHueOffset',_0x136c9d),_0x17a30f['setParamet'+'er']('uInvertOpa'+'city',_0x7ced75),_0x17a30f['setParamet'+'er']('uOpacity',_0x162db7),_0x17a30f['setParamet'+'er']('clrOffset',_0x3021fd),_0x17a30f['setParamet'+'er']('clrScale',_0xe8cbe7),_0x17a30f['setParamet'+'er']('uShapeN',_0x1e4681),_0x17a30f['setParamet'+'er']('mode',_0x118266),_0x17a30f['setParamet'+'er']('ringSize',_0x26e32e),_0x17a30f['setParamet'+'er']('prerenderC'+'Time',-0xe5f*0x1+-0xd*0x1bb+0x24de),_0x17a30f['setParamet'+'er']('renderSpac'+'e',-0x2bf*0x1+-0x15*0x1a3+-0x1294*-0x2),_0x17a30f['setParamet'+'er']('endSpace',-0x23e2+0x227d+-0x1*-0x16f),_0x17a30f['setDefine']('uOpenAnim',_0x328038),_0x17a30f['setDefine']('uControlCo'+'lorMode',_0x3338ad),this['transformM'+'otionTextu'+'re']&&_0x17a30f['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x17a30f['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x17a30f['setDefine']('SH_BANDS',this['shBands']),_0x17a30f['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x17a30f['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x17a30f['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x17a30f['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x17a30f['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x11c0d5){const _0x42ff10=Math['ceil'](Math['sqrt'](_0x11c0d5)),_0x38420b=Math['ceil'](_0x11c0d5/_0x42ff10);return new J(_0x42ff10,_0x38420b);}async['updateColo'+'rData'](_0x231c09){var _0x4aed80;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x1db154=this['colorTextu'+'re2'];if(!_0x1db154||this['isDestroye'+'d'])return;const _0x176809=_0x231c09['getProp']('f_dc_0'),_0x5dfdb5=_0x231c09['getProp']('f_dc_1'),_0xfe9b79=_0x231c09['getProp']('f_dc_2'),_0x4e578e=_0x231c09['getProp']('opacity');let _0x3e6440=(_0x4aed80=_0x231c09['transformD'+'ata'])==null?void(0x26af+0x1fb4+-0x4663):_0x4aed80['dataColor'];_0x3e6440||(_0x3e6440=await this['updateData'+'Worker']['updateColo'+'rData'](_0x231c09['numSplats'],_0x176809,_0x5dfdb5,_0xfe9b79,_0x4e578e)),await this['idleUpdate'+'TexturePro'+'mise'](_0x1db154,_0x3e6440);}async['getTransfo'+'rmDataByWo'+'rker'](_0x1d1b0c){var _0xcee3cc;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0xcee3cc=_0x1d1b0c['transformD'+'ata'])!=null&&_0xcee3cc['dataCenter'+'s'])return{'centers':_0x1d1b0c['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x1d1b0c['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x1d1b0c['transformD'+'ata']['dataScale'],'dataRotation':_0x1d1b0c['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x1d1b0c['transformD'+'ata']['dataMotion'],'dataTime':_0x1d1b0c['transformD'+'ata']['dataTime'],'motion':_0x1d1b0c['transformD'+'ata']['motion'],'tScaleArray':_0x1d1b0c['transformD'+'ata']['tScaleArra'+'y']};const _0xa34257=_0x1d1b0c['getProp']('x'),_0x224731=_0x1d1b0c['getProp']('y'),_0x36c2a4=_0x1d1b0c['getProp']('z'),_0x4a3081=_0x1d1b0c['getProp']('rot_1'),_0x18cd51=_0x1d1b0c['getProp']('rot_2'),_0x3e02bb=_0x1d1b0c['getProp']('rot_3'),_0x272737=_0x1d1b0c['getProp']('rot_0'),_0x3cf7b2=_0x1d1b0c['getProp']('motion_0'),_0x35392a=_0x1d1b0c['getProp']('motion_1'),_0x150f03=_0x1d1b0c['getProp']('motion_2'),_0x2ddd13=_0x1d1b0c['getProp']('scale_0'),_0x14ba7a=_0x1d1b0c['getProp']('scale_1'),_0x52f320=_0x1d1b0c['getProp']('scale_2'),_0x48ae62=_0x1d1b0c['getProp']('t'),_0x7cc563=_0x1d1b0c['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x1d1b0c['numSplats'],this['is4D'],_0xa34257,_0x224731,_0x36c2a4,_0x4a3081,_0x18cd51,_0x3e02bb,_0x272737,_0x3cf7b2,_0x35392a,_0x150f03,_0x2ddd13,_0x14ba7a,_0x52f320,_0x48ae62,_0x7cc563);}async['updateTran'+'sformFromD'+'ata'](_0x5b0819){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x5b0819['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x5b0819['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x5b0819['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x5b0819['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x5b0819['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x488ddb,_0x9e70a2){if(!this['isDestroye'+'d'])return new Promise(_0x5534cc=>{requestIdleCallback(()=>{const _0x35824c=_0x488ddb['lock']();_0x35824c==null||_0x35824c['set'](_0x9e70a2),_0x488ddb['unlock'](),_0x5534cc(!(0x66*0x3+-0x4cb+0x399));},{'timeout':0x12c});});}async['updateTran'+'sformData'](_0x1d1a3f){var _0x32e90d,_0x2244c0,_0x5cc8f7,_0x44266f;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformData'),this['isDestroye'+'d'])return;const _0x56c078=Mn['float2Half'];if(!this['transformA'+'Texture'])return;const _0x41845d=this['transformA'+'Texture']['lock'](),_0x50b699=this['transformR'+'Texture']['lock'](),_0x2f8967=this['transformB'+'Texture']['lock'](),_0x3aec00=(_0x32e90d=this['transformM'+'otionTextu'+'re'])==null?void(0x16e5+0x11ba+-0x1*0x289f):_0x32e90d['lock'](),_0x1ad387=(_0x2244c0=this['transformL'+'ifecycleTe'+'xture'])==null?void(-0x2629+0x418+0x2211):_0x2244c0['lock'](),_0x24d5a8=new D(),_0x173856=new le(),_0x34396f=new D(),_0x524cd9=new D(),_0x292c74=_0x1d1a3f['createIter'](_0x24d5a8,_0x173856,_0x34396f,null,_0x524cd9),_0x50528d=_0x1d1a3f['getProp']('t'),_0x168e93=_0x1d1a3f['getProp']('t_scale');for(let _0x5a3d5c=0x1*0x1079+0x7e7+0x8*-0x30c;_0x5a3d5c<_0x1d1a3f['numSplats'];_0x5a3d5c++)_0x292c74['read'](_0x5a3d5c),_0x173856['normalize'](),_0x173856['w']<-0x15d3+-0x50b+0x1ade&&_0x173856['mulScalar'](-(-0x1*-0xe14+-0x1*0x2650+-0x49*-0x55)),_0x41845d[_0x5a3d5c*(0x136b*-0x2+0x3a*0x77+0xbe3*0x1)+(0x11*-0x183+-0x8b3+0x2266)]=_0x24d5a8['x'],_0x41845d[_0x5a3d5c*(0x2058+0x973+0x1*-0x29c8)+(0x199e+0x2255+0x2*-0x1df9)]=_0x24d5a8['y'],_0x41845d[_0x5a3d5c*(-0x1b94+-0x1bf7*0x1+0x378e)+(-0x1c80+-0x1*0x1015+0x2c97)]=_0x24d5a8['z'],_0x2f8967[_0x5a3d5c*(0xd*0x6d+-0xe41+0x8bb)+(-0x1538+-0xbd*-0x1a+0x206)]=_0x56c078(_0x34396f['x']),_0x2f8967[_0x5a3d5c*(0xf16+0x144d*0x1+-0x2360)+(0x83*-0x1e+0x17b+0x6f0*0x2)]=_0x56c078(_0x34396f['y']),_0x2f8967[_0x5a3d5c*(-0x6b0+-0x2*0x4b1+0x1015)+(0x524*-0x3+-0x7db+0x3*0x7c3)]=_0x56c078(_0x34396f['z']),_0x50b699[_0x5a3d5c*(0x1*0x122b+-0x17b2+-0x2c5*-0x2)+(0x16f3+-0xd3d*-0x1+-0x2430)]=_0x173856['x'],_0x50b699[_0x5a3d5c*(-0x1*0x1efd+0x1*0x1467+0xa99)+(0x212b+0x4*0x1e+0x23*-0xf6)]=_0x173856['y'],_0x50b699[_0x5a3d5c*(-0x1750+0x2335+-0xbe2*0x1)+(0x173*-0x3+0xffa+-0xb9f*0x1)]=_0x173856['z'],this['is4D']&&_0x3aec00&&_0x1ad387&&(_0x3aec00[_0x5a3d5c*(-0xcef*0x2+0xbd1+0xe10)+(0x217e+-0x3*-0x7af+0x1*-0x388b)]=_0x524cd9['x'],_0x3aec00[_0x5a3d5c*(-0x269a+0x201b+0x682)+(-0xe14+0x682+-0x115*-0x7)]=_0x524cd9['y'],_0x3aec00[_0x5a3d5c*(-0x12f*0x2+0x1f87+-0xe93*0x2)+(-0x20c8+-0x1432*0x1+0xd3f*0x4)]=_0x524cd9['z'],_0x1ad387[_0x5a3d5c*(0x14*0x54+0x8e2+-0xf6f)+(0x3*-0x8b9+0x1*-0x786+-0xf*-0x23f)]=_0x50528d?_0x50528d[_0x5a3d5c]:-0x2533+-0x2029*0x1+0x455c,_0x1ad387[_0x5a3d5c*(0x5*-0x335+0xca*0x24+-0xc5c)+(0x8b*-0x29+-0x1212+0x3*0xd72)]=_0x168e93?Math['exp'](_0x168e93[_0x5a3d5c]):-0xe*-0x255+-0x35d+-0x33*0x93);this['transformA'+'Texture']['unlock'](),this['transformB'+'Texture']['unlock'](),this['transformR'+'Texture']['unlock'](),(_0x5cc8f7=this['transformM'+'otionTextu'+'re'])==null||_0x5cc8f7['unlock'](),(_0x44266f=this['transformL'+'ifecycleTe'+'xture'])==null||_0x44266f['unlock']();}async['updateSHDa'+'ta'](_0x3fa596){var _0x5cbc89,_0x4b5d8e,_0x15dd8d,_0x243062,_0x73236a,_0x590d81,_0x10d9aa,_0x2f55de;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x1eaeaa=(_0x5cbc89=this['sh1to3Text'+'ure2'])==null?void(-0xe4f*-0x1+-0x1*-0x1e0e+-0x2c5d):_0x5cbc89['lock'](),_0x412fb0=(_0x4b5d8e=this['sh4to7Text'+'ure2'])==null?void(0x367+-0x1e87+-0x1b2*-0x10):_0x4b5d8e['lock'](),_0x590767=(_0x15dd8d=this['sh8to11Tex'+'ture2'])==null?void(0x133*0x1+0xb94+-0xcc7):_0x15dd8d['lock'](),_0x796570=(_0x243062=this['sh12to15Te'+'xture2'])==null?void(-0x6d8+0x57*0x18+-0x150):_0x243062['lock'](),_0x327006={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x1348ee=vg(_0x3fa596,_0x327006*(0x23ba+-0x1fa4+0x413*-0x1)),_0x34faad=-0x3*0x726+-0x146b+0x31dc,_0x33b9ab=-0x1eb5+0x1dbc+-0xd4*-0x6,_0xeabfaf=new Float32Array(-0x1*0x1a5+0x704+-0x1ca*0x3),_0x278869=new Uint32Array(_0xeabfaf['buffer']),_0x35012d=new Array(_0x327006*(0x1d08+0xd0c*0x2+-0x3*0x125f))['fill'](0x13b9+-0x23*-0x1+-0x1f*0xa4);for(let _0x71d184=0x1*0x1834+0x27*-0x52+-0x5db*0x2;_0x71d184<_0x3fa596['numSplats'];++_0x71d184){for(let _0x3b3b82=0x1ec1+-0x4d2+-0x19ef;_0x3b3b82<_0x327006;++_0x3b3b82)_0x35012d[_0x3b3b82*(-0x1*0x1e6d+0x3*-0xcbf+0x1*0x44ad)]=_0x1348ee[_0x3b3b82][_0x71d184],_0x35012d[_0x3b3b82*(0x10dc+-0xe31+0x11*-0x28)+(0x244a*0x1+-0x35a+-0x20ef)]=_0x1348ee[_0x3b3b82+_0x327006][_0x71d184],_0x35012d[_0x3b3b82*(-0x8*-0x3fc+0x1ab3*0x1+0x1d48*-0x2)+(0xd*-0x1cd+0x1d91+-0x313*0x2)]=_0x1348ee[_0x3b3b82+_0x327006*(0x20e4+0x10a5+0x1*-0x3187)][_0x71d184];let _0x3667f1=_0x35012d[0x232*0xd+-0x5*0x727+0x739*0x1];for(let _0x2ddb87=0x13*-0x89+0x1799*-0x1+-0x299*-0xd;_0x2ddb87<_0x327006*(-0x1380+0x128*-0x1f+0x1*0x375b);++_0x2ddb87)_0x3667f1=Math['max'](_0x3667f1,Math['abs'](_0x35012d[_0x2ddb87]));if(_0x3667f1!==-0x8*0x5c+0x3e7*0x3+-0x8d5){for(let _0x479564=-0x2075+-0x14f3+0x3568;_0x479564<_0x327006;++_0x479564)_0x35012d[_0x479564*(0x261+-0x8bf*-0x2+-0x13dc)+(-0xa17+0x234e+0x5*-0x50b)]=Math['max'](0x2*-0xc23+-0x2*-0x7b8+0x27*0x3a,Math['min'](_0x34faad,Math['floor']((_0x35012d[_0x479564*(0x4*0xea+-0x1ea1*-0x1+-0x2246)+(-0x1a02+0x181*-0xc+0x1*0x2c0e)]/_0x3667f1*(0x1a49+-0x3*0x80b+-0x1*0x228+0.5)+(0x1c99+0x91d+-0x25b6+0.5))*_0x34faad+(0x6f3+-0x128b+0xb98+0.5)))),_0x35012d[_0x479564*(0x19f+0x1304+-0xb0*0x1e)+(-0x1917+-0x21d3*0x1+-0x1*-0x3aeb)]=Math['max'](-0x17*0x71+0x1696+-0xc6f,Math['min'](_0x33b9ab,Math['floor']((_0x35012d[_0x479564*(-0x1*-0x11b7+-0xe*0x67+-0xc12)+(0x54*-0x7+0x9cb+-0x77e)]/_0x3667f1*(0xbce+-0xa17+-0x1b7+0.5)+(-0x27*-0x1f+-0x2447+0x1f8e*0x1+0.5))*_0x33b9ab+(-0x238f+0x992+0x1*0x19fd+0.5)))),_0x35012d[_0x479564*(0x2439+-0x1777+-0xcbf)+(0x21f0+0x7f7+0x29e5*-0x1)]=Math['max'](-0x573+0xe2f*0x1+-0x8bc,Math['min'](_0x34faad,Math['floor']((_0x35012d[_0x479564*(-0x1123+-0x176d+0x2893)+(0x1*0x1bf7+-0x3*-0xb6f+0x1*-0x3e42)]/_0x3667f1*(0x160+0x5*-0x763+-0x1*-0x238f+0.5)+(0x27*0xb6+-0x171c+-0x6*0xc5+0.5))*_0x34faad+(0x2297+0x28*0x95+-0x39df+0.5))));_0xeabfaf[-0x15c2+-0x12*-0x171+-0x86*0x8]=_0x3667f1,_0x1eaeaa[_0x71d184*(-0x15a1+0x2f*-0x2e+0x1e17*0x1)+(0x1cf9+0x259c+-0x4295)]=_0x278869[0x2*-0xe11+-0xcc1*-0x1+0xf61],_0x1eaeaa[_0x71d184*(-0x5*-0x4d6+0x24bb*0x1+-0x3ce5*0x1)+(-0x47*-0x54+-0x9f9+-0xd52)]=_0x35012d[0x210e+-0x6b1*0x5+0x67]<<-0x269*0x7+0x22ff+-0x1*0x120b|_0x35012d[0x1a7e*-0x1+-0x15a*-0x14+-0x89]<<0x12b*0x8+0x1*-0x21d4+-0x111*-0x17|_0x35012d[0x1fcb+-0x708+-0x18c1*0x1],_0x1eaeaa[_0x71d184*(-0x1*-0x15c5+-0xafd*0x3+0xb36)+(0x20d7+0x89*0x4+-0x22f9)]=_0x35012d[0x1929+-0x2*0x322+-0x12e2]<<-0x7d*-0xf+0x110*-0x9+-0x2*-0x129|_0x35012d[-0x1c50+0xe6e+0x251*0x6]<<-0x95*-0xd+-0x19a2+0x121c|_0x35012d[0x49*-0x6f+-0xa01*-0x1+0x15ab],_0x1eaeaa[_0x71d184*(0x1*-0x1722+0xc0+0xb33*0x2)+(-0x1b97+0x1a11*-0x1+0x35ab)]=_0x35012d[0xf51+-0x2*0x12b3+0x1*0x161b]<<-0x1152+-0x264b+0x1*0x37b2|_0x35012d[-0xb*0x1b5+-0x854+0x1b22]<<-0x289+-0x97+-0x32b*-0x1|_0x35012d[-0x309+0xa*0x321+0x1c39*-0x1],this['shBands']>-0x1bcd+-0x1c93+-0x1*-0x3861&&(_0x412fb0[_0x71d184*(0x20e1+-0x1189+0x2*-0x7aa)+(0xc70*0x3+0x7*-0x2fe+-0x1*0x105e)]=_0x35012d[-0x1*0x16c3+0x9*-0x2bf+0x1*0x2f83]<<-0xff5+-0x36*0x15+0x1478|_0x35012d[0xf49+0x2a1+-0x11e0]<<-0x9b8+0x1400+0xa3d*-0x1|_0x35012d[-0x1e52+0x8cb+0xb*0x1f6],_0x412fb0[_0x71d184*(-0x1*-0x23ad+0x191a+-0x3cc3)+(-0x8*-0x3b3+-0x26c9+0x932)]=_0x35012d[-0x1*-0x64f+-0xb*0x278+0x14e5]<<-0x91*-0x42+0x1e05*0x1+0x99e*-0x7|_0x35012d[0x4a*0x3+-0x1dc2*0x1+0x1cf1*0x1]<<-0xd86*-0x1+-0xc*0x282+-0x1*-0x109d|_0x35012d[0x192c*-0x1+-0x1d99+0x1*0x36d3],_0x412fb0[_0x71d184*(0x14a2*-0x1+0x2*-0x833+0x1*0x250c)+(-0x1856+-0x1066*-0x1+0x7f2)]=_0x35012d[0xdaa*0x1+-0x9*0x76+0x327*-0x3]<<0xcee+0x11c8+-0x1ea1|_0x35012d[-0x799*0x1+0x1*0x2492+-0x1ce9]<<-0x173*0x15+-0x1*-0x25bd+-0xd*0x8f|_0x35012d[-0xbb8*0x1+0x161*0x15+-0x112c],_0x412fb0[_0x71d184*(-0x6f5*0x2+0x20a6+-0x12b8)+(-0x2155+0x58a*-0x1+0xe*0x2c7)]=_0x35012d[0x76*0x1a+0x22ae+0x7c4*-0x6]<<0x1541*0x1+-0x1*0x1e2e+-0x1*-0x902|_0x35012d[0xec*0x1a+-0xb7d+-0xc68]<<-0x1*-0xe0+-0x3d8*-0x2+0x2d7*-0x3|_0x35012d[-0x26e7+0x25ca*-0x1+0x4cc5],this['shBands']>-0x89*0x45+-0x4*0x5ce+-0x213*-0x1d?(_0x590767[_0x71d184*(0xb2d*0x1+-0x1*-0xf1a+-0x51*0x53)+(-0xbaf+-0x228d+0x2*0x171e)]=_0x35012d[0x17e+0x3f2*-0x1+-0x3b*-0xb]<<-0x3*-0x4d8+-0x90b+0x2b4*-0x2|_0x35012d[0x2103+-0x1214+-0x21f*0x7]<<0x2b*-0x81+0xb*0x22d+-0x239|_0x35012d[0x1a2e+0x41a*-0x7+0x29f],_0x590767[_0x71d184*(0x7f*-0x1f+0x45*0x8e+-0x16e1)+(0x1*-0x141d+0x19d4+-0x5b6)]=_0x35012d[0x2*-0xe75+0x1381+0x1*0x981]<<0x59*-0x2+0x3d9+-0x312|_0x35012d[-0xd01*-0x3+0x193*-0x6+0x3af*-0x8]<<-0x7*-0x17f+0x1*-0x1431+0x9c3|_0x35012d[-0x545+0x19ed*0x1+-0x148e],_0x590767[_0x71d184*(0xb5d*-0x2+-0x4*0x6ed+0x3272)+(-0xf29+-0x240b+0x3336)]=_0x35012d[0x35b+-0x1*0xdb0+0x538*0x2]<<-0x2*-0x80e+0xd4f*0x1+-0x1d56|_0x35012d[0x12f6+0x1a3a+0x2d14*-0x1]<<0x1ecf+0x1a68+0x1*-0x392c|_0x35012d[-0xef4+0x2*0xdf5+0xfd*-0xd],_0x590767[_0x71d184*(0xc52+0xc1*-0x1f+0xb11)+(0x2f0*0x9+-0x209d+-0xc6*-0x8)]=_0x35012d[-0x424+-0x2167+0x25a9]<<0xa*0x167+-0xf*-0x37+-0x112a|_0x35012d[-0x1e60+0x17c1+0x6be]<<-0x255f+0x18bf+0x3*0x439|_0x35012d[0x16e0+0x2293*-0x1+0xbd3],_0x796570[_0x71d184*(0x4bd*0x1+-0x26d5+-0x76*-0x4a)+(-0x8e*0x8+0x2408+0x7e6*-0x4)]=_0x35012d[-0xf88+0x9fc+-0x5ad*-0x1]<<-0x7*0x252+-0xe23+0xe*0x22d|_0x35012d[-0x15b9*0x1+-0xebb+-0x53a*-0x7]<<0x1516+0xcd*-0x16+-0x36d|_0x35012d[-0x67f*-0x1+0x1cfd+-0x1*0x2359],_0x796570[_0x71d184*(0xc81+0x1*-0x25d+-0xa20)+(0x239e+0x187*0xa+-0x32e3)]=_0x35012d[0x1635+0x169+-0x177a]<<-0x833*-0x1+0x246e+-0x2c8c*0x1|_0x35012d[0x7*0x466+-0x7b8+-0x1*0x16ed]<<-0x5ec+-0x10d0+-0x11*-0x157|_0x35012d[0x1*-0x1876+0x1519*-0x1+0x2db5],_0x796570[_0x71d184*(-0xabc+0x21cb+0x170b*-0x1)+(-0x1f*-0x6d+-0x4a5+0x446*-0x2)]=_0x35012d[-0x1*-0xbaa+-0x2ca*0x9+0xd97]<<0x154+-0x1353+-0x34*-0x59|_0x35012d[0x2331+-0x372+-0x1f97]<<-0x2*-0x5f4+-0xfba+0x3dd|_0x35012d[0xba4+-0x776+-0x405],_0x796570[_0x71d184*(0x131b+0x1a82+0x3*-0xf33)+(0x3*-0x9a7+-0xbf*-0xd+0x1345)]=_0x35012d[-0xda8+-0x2278+0x7*0x6e6]<<0x1074+-0x103c+0x5*-0x7|_0x35012d[-0x169a+-0x327*-0x7+0xb4]<<0x1f80+0x15e9+-0x355e|_0x35012d[0xf33+-0xad8+-0x42f]):_0x590767[_0x71d184]=_0x35012d[0x169*-0x6+0x55*0x35+0x2*-0x487]<<0x25fa*0x1+-0x1382+-0x1263|_0x35012d[0x1*0x1121+-0x7c*-0x43+-0x1*0x317f]<<-0x56a+0x15fe+0x53*-0x33|_0x35012d[0x2*-0xd21+-0x7*-0x22d+0x58f*0x2]);}}(_0x73236a=this['sh1to3Text'+'ure2'])==null||_0x73236a['unlock'](),(_0x590d81=this['sh4to7Text'+'ure2'])==null||_0x590d81['unlock'](),(_0x10d9aa=this['sh8to11Tex'+'ture2'])==null||_0x10d9aa['unlock'](),(_0x2f55de=this['sh12to15Te'+'xture2'])==null||_0x2f55de['unlock']();}async['updateSHDa'+'taByWorker'](_0x533aa9){var _0x566026,_0x19bbee,_0x2ce917,_0x1613d9,_0x521624;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x277d0b={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x529ebb,_0x174d1a,_0x3202ed,_0x44c0b2;if((_0x566026=_0x533aa9['transformD'+'ata'])!=null&&_0x566026['sh1to3Data'])_0x529ebb=(_0x19bbee=_0x533aa9['transformD'+'ata'])==null?void(-0x8e2*-0x1+-0x285+-0x65d):_0x19bbee['sh1to3Data'],_0x174d1a=(_0x2ce917=_0x533aa9['transformD'+'ata'])==null?void(-0x706+0x17b2+-0x10ac):_0x2ce917['sh4to7Data'],_0x3202ed=(_0x1613d9=_0x533aa9['transformD'+'ata'])==null?void(-0xffe+0x1f61+-0xf63):_0x1613d9['sh8to11Dat'+'a'],_0x44c0b2=(_0x521624=_0x533aa9['transformD'+'ata'])==null?void(0x1*0x1c1+0x8f*0xd+-0x904):_0x521624['sh12to15Da'+'ta'];else{const _0x429af2=vg(_0x533aa9,_0x277d0b*(-0x16*-0xa1+-0x4e5+-0x1*0x8ee)),_0x5533d1=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x533aa9['numSplats'],this['shBands'],_0x429af2);_0x529ebb=_0x5533d1['sh1to3Data'],_0x174d1a=_0x5533d1['sh4to7Data'],_0x3202ed=_0x5533d1['sh8to11Dat'+'a'],_0x44c0b2=_0x5533d1['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x529ebb),this['shBands']>0x1389*0x1+0x16*-0x13+0x9e*-0x1d&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x174d1a),this['shBands']>-0x1248*-0x1+0x5*0x74b+0x51*-0xad?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x3202ed),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x44c0b2)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x3202ed));}}async function bC(){const _0x368dc4=new Float32Array(-0x26e+0x1c6b+-0x4*0x67f);new Int32Array(_0x368dc4['buffer']);let _0x1ca329=null,_0x48c5c6=null,_0x12b200=null,_0x4b35f2=null,_0x22287f=null,_0x282fb7=null,_0x2575d8=null,_0xef4acc=null;self['onmessage']=async _0x4d326b=>{const {data:_0x456693}=_0x4d326b;switch(_0x456693['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x33e51e(_0x456693['numSplats'],_0x456693['shBands'],_0x456693['SHData']);break;case'updateTran'+'sformData':_0x247fc2(_0x456693['numSplats'],_0x456693['is4D'],_0x456693['position'],_0x456693['rotation'],_0x456693['motion'],_0x456693['scale'],_0x456693['muT'],_0x456693['tScale']);break;case'destroyWor'+'ker':_0x49def9();break;}};const _0x247fc2=(_0x53ce34,_0x2ca641,_0x5e1faf,_0xf62183,_0x569c08,_0x5d9132,_0x324ed4,_0x1aab5c)=>{_0x49def9(),_0x2ca641&&(_0x48c5c6=new Float32Array(_0x53ce34*(0x1c6*-0x3+0xfc+-0x459*-0x1)),_0xef4acc=new Float32Array(_0x53ce34),_0x22287f=new Float32Array(_0x569c08['buffer']['slice']()),_0x2575d8=new Float32Array(_0x569c08['buffer']['slice']())),_0x4b35f2=new Float32Array(_0x5e1faf['buffer']['slice']()),_0x1ca329=new Float32Array(_0x5e1faf['buffer']['slice']()),_0x282fb7=new Uint16Array(_0x5d9132['buffer']['slice']()),_0x12b200=new Float32Array(_0xf62183['buffer']['slice']());for(let _0xefa20f=-0xc2a+-0x323*-0x1+0x907;_0xefa20f<_0x53ce34;_0xefa20f++)_0x2ca641&&_0x48c5c6&&(_0xef4acc[_0xefa20f]=_0x1aab5c?Math['exp'](_0x1aab5c[_0xefa20f]):0xa43+-0x1ab5+0x1072,_0x48c5c6[_0xefa20f*(-0x1507+0x3d7*0x4+0x5ae)+(-0x1bb0*-0x1+0x1*0x110b+-0x2cbb)]=_0x324ed4?_0x324ed4[_0xefa20f]:-0x3e7+0x418*0x2+-0x449,_0x48c5c6[_0xefa20f*(0x2500+0x32b+0x2*-0x1414)+(-0x8d3*0x2+0x1*-0xdf0+-0x1*-0x1f97)]=_0xef4acc[_0xefa20f]);const _0x8240ce=[_0x1ca329['buffer'],_0x4b35f2['buffer'],_0x282fb7['buffer'],_0x12b200['buffer']];_0x2ca641&&_0x8240ce['push'](_0x22287f['buffer'],_0x48c5c6['buffer'],_0x2575d8['buffer'],_0xef4acc['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x1ca329,'dataPosition':_0x4b35f2,'dataScale':_0x282fb7,'dataRotation':_0x12b200,'dataMotion':_0x22287f,'dataTime':_0x48c5c6,'motion':_0x2575d8,'tScaleArray':_0xef4acc},_0x8240ce);},_0x33e51e=(_0x2a4437,_0x23a990,_0x2996fc)=>{const _0x13937e=new Uint32Array(_0x2a4437*(-0x705*-0x2+-0x1661+0x85b)),_0x562f32=new Uint32Array(_0x2a4437*(-0x3d*0x91+-0x1*-0x264e+-0x3bd)),_0x1f5ca3=new Uint32Array(_0x2a4437*(-0x1*0x731+0x377*0xa+-0x1b71)),_0x43a914=new Uint32Array(_0x2a4437*(0x21f5*0x1+-0x127+-0x6*0x577)),_0x221ac4={0x1:0x3,0x2:0x8,0x3:0xf}[_0x23a990],_0x560405=_0x2996fc,_0x1b8fd6=0xe24*-0x1+-0x993+0x1fb6,_0xa2e0fb=0x2310+-0x10*-0x5+-0x1f61,_0x1fd758=new Float32Array(0xd8*-0x7+0x19fc+-0x1413),_0x176d27=new Uint32Array(_0x1fd758['buffer']),_0x509ea9=new Array(_0x221ac4*(-0xd*-0x2e5+-0x383+0x1*-0x221b))['fill'](0xe*-0x1ff+0x7ea+0x1408);for(let _0x5757bb=-0x1dfa+0x246d+0x1*-0x673;_0x5757bb<_0x2a4437;++_0x5757bb){for(let _0x560fd8=0x47*-0x53+0x7*0x387+0x4*-0x6b;_0x560fd8<_0x221ac4;++_0x560fd8)_0x509ea9[_0x560fd8*(-0xb6a+0x7d3*-0x2+0x1b13)]=_0x560405[_0x560fd8][_0x5757bb],_0x509ea9[_0x560fd8*(-0x2160+-0xda8+0x2f0b)+(-0x1*-0x1550+0x1dc0+-0x330f)]=_0x560405[_0x560fd8+_0x221ac4][_0x5757bb],_0x509ea9[_0x560fd8*(-0x8cb+0xb49+0x27b*-0x1)+(0x64b+-0xe9*-0xa+-0xf63)]=_0x560405[_0x560fd8+_0x221ac4*(0xea4+-0x20d3+0x1231)][_0x5757bb];let _0x59b125=_0x509ea9[-0x1481+0x2*0x534+0xa19];for(let _0x157bec=-0x745*0x3+0x38d+-0xb*-0x1a9;_0x157bec<_0x221ac4*(-0x2006+-0x9b3*-0x1+0x1656);++_0x157bec)_0x59b125=Math['max'](_0x59b125,Math['abs'](_0x509ea9[_0x157bec]));if(_0x59b125!==-0x128e*-0x2+-0x22de+-0x23e){for(let _0x481b1a=0xc47*-0x2+-0x2438+-0x1e63*-0x2;_0x481b1a<_0x221ac4;++_0x481b1a)_0x509ea9[_0x481b1a*(0x1de*0x5+0x110*0x11+0x1*-0x1b63)+(-0x2*-0xeca+0xb83+-0x2917)]=Math['max'](-0x1089+0x1*-0x95f+-0x8*-0x33d,Math['min'](_0x1b8fd6,Math['floor']((_0x509ea9[_0x481b1a*(0x1466*0x1+-0x16df+-0x6a*-0x6)+(0x21fd+0xe*0xd3+-0x2d87)]/_0x59b125*(-0x2017+0x219e+-0x11*0x17+0.5)+(0xda4+-0x1334+-0x4*-0x164+0.5))*_0x1b8fd6+(0x188f*0x1+0xe2*-0x16+-0x523*0x1+0.5)))),_0x509ea9[_0x481b1a*(0xef8+0x156e+-0x2463)+(0x25cf+0xe32+0x1a0*-0x20)]=Math['max'](-0x2551+0x8a9+-0x8*-0x395,Math['min'](_0xa2e0fb,Math['floor']((_0x509ea9[_0x481b1a*(-0x7*0x26b+0x16a6+-0x2*0x2db)+(-0x2182+-0x688+0x280b)]/_0x59b125*(-0x1*-0x54a+0x925+-0xe6f+0.5)+(-0x151f+0x13bf+0x4*0x58+0.5))*_0xa2e0fb+(-0x47b*-0x2+0x19f2+-0x1174*0x2+0.5)))),_0x509ea9[_0x481b1a*(0xd98+-0x91a*0x2+0x49f)+(-0x1e4e+-0x15f6+-0x3446*-0x1)]=Math['max'](-0xd37+0x4e0+-0x5*-0x1ab,Math['min'](_0x1b8fd6,Math['floor']((_0x509ea9[_0x481b1a*(0x2*0xb7b+0x1e36+-0x3529)+(0x1*-0xe55+-0x21ad+0x3004)]/_0x59b125*(-0x1327+0x2*0x5f6+0x73b+0.5)+(-0x2*-0xa06+0x69b+-0x1aa7+0.5))*_0x1b8fd6+(-0x705*0x2+0x1*0xb82+0x3*0xd8+0.5))));_0x1fd758[-0x1926+0x77+0x47*0x59]=_0x59b125,_0x13937e[_0x5757bb*(0x158b+0x1d7a+-0x3301)+(0x240d*0x1+0x14e3+-0x38f0)]=_0x176d27[-0x4*-0x8ed+0x1*0xc53+-0x3007],_0x13937e[_0x5757bb*(-0xbf*-0x7+0x2071+-0x25a6)+(-0x4*-0x71f+-0xec*-0x21+-0x1*0x3ae7)]=_0x509ea9[-0x8ac+0x2eb*0xb+-0x3*0x7cf]<<0xd52+-0x4ac*-0x4+0x1fed*-0x1|_0x509ea9[0x2e*-0x29+0x1*0x148f+-0xd30]<<-0x19d3+0x1fd9+0x5fb*-0x1|_0x509ea9[-0x3d*0x56+-0x22b1+0x3731],_0x13937e[_0x5757bb*(-0x7a*0x3d+0x11c+0x1bfa)+(0x1a02+0x4ca+-0x1eca)]=_0x509ea9[-0x3*0x876+-0x2202+0x89*0x6f]<<0x1b0b+-0x69*-0x59+-0x3f77|_0x509ea9[0x3*-0x4a3+0x1ce3*0x1+0xa*-0x17f]<<-0x132d+-0x10+-0x2*-0x9a4|_0x509ea9[-0x1af*-0x13+0x5*0x566+-0x3af6],_0x13937e[_0x5757bb*(-0x6fe*0x5+0x1*-0x319+0x2613)+(-0x259a+0x960+0x1c3d)]=_0x509ea9[-0x61*0xd+-0x261*0x9+-0x1*-0x1a5c]<<-0x560+0x144e+-0x3*0x4f3|_0x509ea9[0x43*0x2c+-0x18b9+0xd3c]<<0x1a45+-0x1be*-0x16+-0x408e|_0x509ea9[-0x430+-0x3d*-0x7e+0x16f*-0x12],_0x23a990>-0x1822+0x1433+0x3f0&&(_0x562f32[_0x5757bb*(-0x2c*-0x5d+0x1997*0x1+-0x1*0x298f)+(-0x8*0x30f+-0x1251+0x2ac9)]=_0x509ea9[-0x7*-0x189+0x7*0x4a2+-0x2b24]<<-0xdcf+-0x398+-0x8be*-0x2|_0x509ea9[0x1*0x14e5+-0x2*-0xf3+0x16c1*-0x1]<<0x20b1+0x178a+-0x3830|_0x509ea9[-0x130c+-0x25a+0x1571],_0x562f32[_0x5757bb*(0x5ad*0x3+0x125b+-0x235e)+(0x2015+0xe6c+-0xba0*0x4)]=_0x509ea9[0x12e8+-0x7e*-0x29+-0x270a]<<-0x86b+0x2249*0x1+-0x17*0x11f|_0x509ea9[0x517+0x1a*-0xdf+0x119c]<<-0x107*-0x1f+0x1b2e+-0x2*0x1d7e|_0x509ea9[-0x2243+-0x2541+0x4792],_0x562f32[_0x5757bb*(0xe43*-0x1+0x25a+-0xbed*-0x1)+(-0xaaf+0xb*-0xf1+-0x382*-0x6)]=_0x509ea9[-0x1*0x247f+-0x1*-0x1907+0xb87]<<0xa8*0x39+0xd92+-0x65*0x81|_0x509ea9[-0x1*-0x1327+0x427*-0x7+-0x1*-0x9fa]<<0x521+0x10*0x61+-0x1*0xb26|_0x509ea9[-0xe9*0xb+0xd3*0x27+-0x1611],_0x562f32[_0x5757bb*(0x104+-0x1*-0x1f02+0x11*-0x1e2)+(0x1*0x1f03+-0xcc5+-0x1*0x123b)]=_0x509ea9[-0x2*0xf50+-0x1131*0x1+0x12b*0x29]<<-0xcb6*0x2+-0xf*0x5+0x19cc|_0x509ea9[-0x35c+-0x15d0+-0x17*-0x119]<<-0x2533+-0x13af*-0x1+-0x1f*-0x91|_0x509ea9[0x1*0xcd7+0x19e3+0x66*-0x61],_0x23a990>-0x897*0x3+0x1c6f+-0x2a8?(_0x1f5ca3[_0x5757bb*(-0x9f+0x54a*0x2+-0x9f1)+(0x395*0x7+-0x217c+-0x1*-0x869)]=_0x509ea9[-0x59*-0x1+-0x20e9+0x20a5]<<0xed*0x1d+0x5*-0x583+0xcb|_0x509ea9[0x1*-0x18b+0x235+-0x94]<<-0x9*-0x2f3+0x1db0+-0x3830|_0x509ea9[0x1310+0x2387+-0xda*0x40],_0x1f5ca3[_0x5757bb*(-0x2da+0x9e8+-0x70a)+(-0x15*0x51+-0xdc9+-0x1*-0x146f)]=_0x509ea9[0x817+-0x1f7*0x13+0x5*0x5de]<<-0x3d7+0xeb9+-0x229*0x5|_0x509ea9[-0x3*-0x7b5+-0xe*-0xd6+-0x7f*0x46]<<-0xc4e+0xde9+0x2*-0xc8|_0x509ea9[-0x2*-0x11a1+-0x6ab+0xd*-0x231],_0x1f5ca3[_0x5757bb*(-0xb5*0x31+-0xa5f+0x2d08)+(-0x2*-0xf63+-0x1de1*-0x1+-0x23f*0x1b)]=_0x509ea9[-0x67f+0x2218*0x1+0x17*-0x132]<<-0x21d9*-0x1+-0x5*-0x473+0xd*-0x44f|_0x509ea9[0x1*-0x1f42+0x1c80+0x2de*0x1]<<0x2667*-0x1+0x16ba+-0x3ee*-0x4|_0x509ea9[-0x14d5+0x1ec1+-0x1b*0x5d],_0x1f5ca3[_0x5757bb*(-0x139*-0xa+-0xa*-0x17d+-0x1b18)+(0x31*0x29+0x553*0x1+0x1*-0xd29)]=_0x509ea9[0x3e*0x77+-0xd*-0x296+-0x1*0x3e52]<<-0x1ec5+0x15*-0x1b1+0x425f|_0x509ea9[-0x23fd+-0x1f30+0x3b*0x124]<<-0x3eb*0x9+-0x4ec+0x13*0x21e|_0x509ea9[0xf82+0x1*0xe72+0x53*-0x5c],_0x43a914[_0x5757bb*(-0xc5d+-0x7b3+-0x4*-0x505)+(-0x16bd+0x1759+-0x1a*0x6)]=_0x509ea9[0x31d+0x2079+0x1*-0x2375]<<0x1*0x1fc9+-0x1e79+-0x13b|_0x509ea9[-0x167e+-0x2074+0x11a*0x32]<<-0x1*-0x1fe7+-0x2425+-0x1*-0x449|_0x509ea9[-0x1af9+-0x69b+0x21b7],_0x43a914[_0x5757bb*(0x1*-0x1ea2+0x1d*-0x89+0x2e2b)+(0x6a6+0x1*0x1349+-0x19ee*0x1)]=_0x509ea9[0x1c00+-0x1*0x10f3+-0xae9]<<-0x6c5*0x1+0x15aa+0x3*-0x4f0|_0x509ea9[-0xb3*0x31+0x28*-0x37+0x2b00]<<-0x425+-0x1321+-0x1751*-0x1|_0x509ea9[-0x10d9+-0x1*0x14bd+0x25bc],_0x43a914[_0x5757bb*(0x2*-0x68+0x2*0x8c6+-0x10b8)+(0x1dfc+0x2*-0xd5f+0x6*-0x8a)]=_0x509ea9[-0x23e3+-0x12a1+0x36ab]<<-0x1*-0x2ba+0x8*0x35e+-0x1*0x1d95|_0x509ea9[-0x11e5+-0x1d71+0x2f7e]<<-0x5*0x19f+-0x1*0x20b9+0x28df|_0x509ea9[0x226b+-0x18d1*0x1+-0x971],_0x43a914[_0x5757bb*(0x72e*-0x4+0xc73*-0x3+0x4215)+(0x113c+-0x1ba2+0x1*0xa69)]=_0x509ea9[0x12a6+-0xd82+-0x1a*0x31]<<0x4b*-0x11+0x1eb*0x2+0x13a*0x1|_0x509ea9[-0x24ed+0xf54+0x15c4]<<-0xc56+0xa*-0x13+0xd1f|_0x509ea9[-0xfe7+-0x4a*0x5+0x17*0xc3]):_0x1f5ca3[_0x5757bb]=_0x509ea9[0x76f+-0x6b1*-0x3+-0x1b6d]<<-0x2158+0x2*0x10f3+-0x79|_0x509ea9[0x2437+-0x1*0x20ef+-0x332]<<0x158e+0x1f76+-0x34f9|_0x509ea9[0xb3a+0x257b*-0x1+0xc*0x232]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x13937e,'sh4to7Data':_0x562f32,'sh8to11Data':_0x1f5ca3,'sh12to15Data':_0x43a914}},[_0x13937e['buffer'],_0x562f32['buffer'],_0x1f5ca3['buffer'],_0x43a914['buffer']]);},_0x49def9=()=>{_0x1ca329=null,_0x48c5c6=null,_0x12b200=null,_0x4b35f2=null,_0x22287f=null,_0x282fb7=null,_0x2575d8=null,_0xef4acc=null;};}class AC extends me{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+bC['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x33753e,_0x285e57,_0x58a9be){_0x33753e['onmessage']=_0x3d579e=>{if(!this['worker'])return;const {data:_0x5577a5}=_0x3d579e;if(_0x5577a5['type']===_0x285e57)switch(_0x285e57){case'updatedSHD'+'ata1':_0x58a9be(_0x5577a5['data']);break;case'updatedCol'+'orData':_0x58a9be(_0x5577a5['data']);break;case'updatedTra'+'nsformData':_0x58a9be(_0x5577a5);break;}};}['updateSHDa'+'ta1'](_0x534e7d,_0x4840d0,_0x5da834){var _0x28863b;return(_0x28863b=this['worker'])==null||_0x28863b['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x534e7d,'shBands':_0x4840d0,'SHData':_0x5da834}),new Promise(_0x56d501=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x168003=>{_0x56d501(_0x168003);});});}async['updateTran'+'sData'](_0x3b96a9,_0x6ed615,_0x56791e,_0x22188f,_0x40cda9,_0x1c3c07,_0x4c4409,_0x9eb0fb){var _0x5edf43;return(_0x5edf43=this['worker'])==null||_0x5edf43['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x3b96a9,'is4D':_0x6ed615,'position':_0x56791e,'rotation':_0x22188f,'motion':_0x40cda9,'scale':_0x1c3c07,'muT':_0x4c4409,'tScale':_0x9eb0fb}),new Promise(_0x4a9f9a=>{const _0x2826ef=_0x13e134=>{_0x4a9f9a(_0x13e134);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x2826ef);});}['destroy'](){var _0x2ec1de;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x2ec1de=this['worker'])==null||_0x2ec1de['terminate'](),this['worker']=null);}}const xg=(_0x1071b8,_0x3d8368)=>{const _0x47924c=[];for(let _0x315d82=0x1b31*-0x1+0xe16+0x1*0xd1b;_0x315d82<_0x3d8368;++_0x315d82)_0x47924c['push'](_0x1071b8['getProp']('f_rest_'+_0x315d82));return _0x47924c;};class CC extends Rv{constructor(_0x4c3e56,_0x50f9b7){super(_0x4c3e56,_0x50f9b7),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(0x2003+-0x1b56+0x17*-0x34)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new AC(),this['assetsMana'+'gerLoadedT'+'ime']=0xd27+0x1337+-0xa9*0x31);}['setSceneIn'+'fo'](_0x26f5f8){this['sceneInfo']['duration']=_0x26f5f8['duration'],this['sceneInfo']['fps']=_0x26f5f8['fps'],this['sceneInfo']['totalGauss'+'ians']=_0x26f5f8['totalGauss'+'ians'],this['sceneInfo']['globalBoun'+'dingBoxMin']=new D(_0x26f5f8['globalBoun'+'dingBox']['min'][0x431+-0x18b8+0x1487],_0x26f5f8['globalBoun'+'dingBox']['min'][0xe59+-0x2f*-0x75+-0x23d3],_0x26f5f8['globalBoun'+'dingBox']['min'][0xfa9+0x1*-0x240+0x2f*-0x49]),this['sceneInfo']['globalBoun'+'dingBoxMax']=new D(_0x26f5f8['globalBoun'+'dingBox']['max'][0x1ea1*0x1+-0xd9*0x3+-0x1c16],_0x26f5f8['globalBoun'+'dingBox']['max'][-0x4*-0x9b2+0x1069*-0x2+0x19*-0x3d],_0x26f5f8['globalBoun'+'dingBox']['max'][-0x214+-0x1af3+-0x1d09*-0x1]);const _0x22fb31=_0x26f5f8['globalBoun'+'dingBox']['min'][-0x3*0x497+-0x193c+0x2701],_0x46a885=_0x26f5f8['globalBoun'+'dingBox']['min'][-0x6e7+0x487+0x57*0x7],_0x1fa323=_0x26f5f8['globalBoun'+'dingBox']['min'][0x691+0x12f*-0x17+0x5*0x422],_0xa7dcc3=_0x26f5f8['globalBoun'+'dingBox']['max'][-0x187*-0xb+-0xd*0xdf+0x57a*-0x1],_0x487aad=_0x26f5f8['globalBoun'+'dingBox']['max'][-0x8be+0x1b21*-0x1+0x23e0],_0x5e3e44=_0x26f5f8['globalBoun'+'dingBox']['max'][-0x637+-0x2*0x10a3+0x277f],_0x451662=new D((_0x22fb31+_0xa7dcc3)*(-0xc81+0x177d+-0xafc+0.5),(_0x46a885+_0x487aad)*(0x2118+0x1be4+-0x3cfc*0x1+0.5),(_0x1fa323+_0x5e3e44)*(-0x21f3+0x321+0x6*0x523+0.5)),_0x39d7e2=new D((_0xa7dcc3-_0x22fb31)*(0x5*0x7cf+0x17*0x13d+0x1682*-0x3+0.5),(_0x487aad-_0x46a885)*(0x8ed*0x1+-0x43c*-0x3+0x1*-0x15a1+0.5),(_0x5e3e44-_0x1fa323)*(-0x8*0xb8+-0xdd9+-0x1399*-0x1+0.5)),_0x1acca8=new De(_0x451662,_0x39d7e2);this['sceneInfo']['globalBoun'+'dingBox']=_0x1acca8,this['aabb']=_0x1acca8;}async['updateData'](){var _0x507442,_0x223e9b,_0x4b439d,_0x18462e,_0x442196,_0x1f0987,_0x174315,_0x37c21e,_0x407edb,_0x194ef1,_0x55edf9;await super['updateData']();const _0x2c3802=this['gsplatData'];if(!_0x2c3802)return;this['is4D']=_0x2c3802['is4D'];const _0x1290cf=await this['getTransfo'+'rmDataByWo'+'rker'](_0x2c3802);this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x1290cf['centers'],this['motion']=_0x1290cf['motion'],this['tScale']=_0x1290cf['tScaleArra'+'y'],this['muT']=await _0x2c3802['getMuT'](),this['timeIndex']=await _0x2c3802['getTimeInd'+'ex']();const _0x4301f6=this['evalTextur'+'eSize'](_0x2c3802['numSplats']);this['colorTextu'+'re']?((_0x507442=this['colorTextu'+'re2'])==null||_0x507442['destroy'](),(_0x223e9b=this['transformA'+'Texture2'])==null||_0x223e9b['destroy'](),(_0x4b439d=this['transformB'+'Texture2'])==null||_0x4b439d['destroy'](),(_0x18462e=this['transformR'+'Texture2'])==null||_0x18462e['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x4301f6),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x4301f6),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x4301f6),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x4301f6),this['is4D']&&((_0x442196=this['transformM'+'otionTextu'+'re2'])==null||_0x442196['destroy'](),(_0x1f0987=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x1f0987['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x4301f6),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x4301f6))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',nt,_0x4301f6),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x4301f6),this['transformA'+'Texture']=this['createText'+'ure']('transformA',Ye,_0x4301f6),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x4301f6),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ui,_0x4301f6),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x4301f6),this['transformR'+'Texture']=this['createText'+'ure']('transformR',Ye,_0x4301f6),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x4301f6),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',Ye,_0x4301f6),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x4301f6),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',Ye,_0x4301f6),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x4301f6))),await this['updateColo'+'rData'](_0x2c3802),await this['updateTran'+'sformFromD'+'ata'](_0x1290cf),this['shBands']=_0x2c3802['shBands'],this['shBands']>0x1a6d+-0xeb0+0x1*-0xbbd&&(this['sh1to3Text'+'ure']?((_0x174315=this['sh1to3Text'+'ure2'])==null||_0x174315['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x4301f6),this['shBands']>-0x96d+0x2d2+0x69c&&((_0x37c21e=this['sh4to7Text'+'ure2'])==null||_0x37c21e['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x4301f6),this['shBands']>-0x1e74+-0x12c8+0x23d*0x16?((_0x407edb=this['sh8to11Tex'+'ture2'])==null||_0x407edb['destroy'](),(_0x194ef1=this['sh12to15Te'+'xture2'])==null||_0x194ef1['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x4301f6),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x4301f6)):((_0x55edf9=this['sh8to11Tex'+'ture2'])==null||_0x55edf9['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x4301f6)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x4301f6),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ue,_0x4301f6),this['shBands']>0x1cb+0x1574+-0x173e&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ue,_0x4301f6),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x4301f6),this['shBands']>-0x2051+-0x102+0x2155?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ue,_0x4301f6),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x4301f6),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ue,_0x4301f6),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x4301f6)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ki,_0x4301f6),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ki,_0x4301f6)))),await this['updateSHDa'+'taByWorker'](_0x2c3802));}['updateText'+'ure'](){this['isDestroye'+'d']||(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x2aa209){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x2aa209}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x472163,_0x43cc5d,_0x30c928,_0x2c6944,_0x18a25c,_0x4bfd90){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x472163,'timeOption':_0x43cc5d,'loadedTime':_0x30c928,'asset':_0x2c6944,'events':_0x18a25c,'seekCB':_0x4bfd90}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(0xaf1+-0x15ad+-0x6*-0x1ca);try{for(;this['appendQueu'+'e']['length']>0xd*-0x156+-0x8*0x2c9+-0x5*-0x7ee;){const _0x517f5c=this['appendQueu'+'e']['shift']();_0x517f5c['type']==='append'?await this['processApp'+'endTask'](_0x517f5c['data']):_0x517f5c['type']==='release'&&await this['processRel'+'easeTask'](_0x517f5c['data']);}}finally{this['isProcessi'+'ngQueue']=!(0x1e83+-0xa6*0xa+0x1e*-0xcd);}}}async['processRel'+'easeTask'](_0x5ae91d){const {index:_0x24e4bd}=_0x5ae91d;this['isDestroye'+'d']||await this['gsplatData']['releaseSeq'+'Data'](_0x24e4bd);}async['processApp'+'endTask'](_0x3fa404){var _0x3cfce7;const {gsplatData:_0x23b61c,timeOption:_0x190925,loadedTime:_0x227475,asset:_0x34d4fa,events:_0x1a31a5,seekCB:_0x340fec}=_0x3fa404;!this['gsplatData']||this['isDestroye'+'d']||(globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x190925,this['asset']=_0x34d4fa,this['assetsMana'+'gerLoadedT'+'ime']=_0x227475,this['events']=_0x1a31a5,await this['gsplatData']['appendGSpl'+'atData'](_0x23b61c,_0x227475,_0x190925),console['log']('loadTime__'+'__','gsplatDeco'+'dedResourc'+'e\x20gsplatDa'+'ta.appendG'+'SplatData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x2214+0x139c+0xe7a),_0x23b61c['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x23b61c['numSplats'])['toFixed'](-0x308*0xb+-0x4*0x59e+0x1cd*0x1f)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20this.upd'+'ateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x1f8d+-0x8*-0x2d1+0x907),_0x23b61c['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await((_0x3cfce7=this['gsplatInst'+'ance'])==null?void(-0x4*-0x17e+0xfe1+-0x15d9):_0x3cfce7['updateInst'+'anceData'](this,_0x227475,_0x340fec)),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20updateIn'+'stanceData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x1*0xa2e+0x1f58+0x1*-0x2984),_0x23b61c['numSplats']));}['fireAssets'+'ManagerTim'+'eIndex'](_0x572de7,_0x9da9a9){var _0x555513;const _0x58c1bd=_0x572de7||this['assetsMana'+'gerLoadedT'+'ime'];(_0x555513=this['asset'])==null||_0x555513['fire']('setAssetsL'+'oaded',_0x58c1bd,_0x9da9a9);}['destroy'](){var _0x886c24,_0x3eb13b,_0x4b5406,_0x2c6290,_0x105101,_0x5e3198,_0x4efb94,_0x20d9c2,_0x2e6092,_0x15b3e7,_0x4242f2,_0x5c7c98,_0xf02376,_0x2de6f1,_0x3c38e4,_0xcb6173,_0x4ccb43,_0x25e5ac,_0x9ba22,_0x532fcb,_0x4cf1a1;(_0x886c24=this['updateData'+'Worker'])==null||_0x886c24['destroy'](),this['updateData'+'Worker']=void(-0x73*-0x7+0xb9*0x12+0x33b*-0x5),(_0x3eb13b=this['colorTextu'+'re'])==null||_0x3eb13b['destroy'](),(_0x4b5406=this['transformA'+'Texture'])==null||_0x4b5406['destroy'](),(_0x2c6290=this['transformB'+'Texture'])==null||_0x2c6290['destroy'](),(_0x105101=this['transformR'+'Texture'])==null||_0x105101['destroy'](),(_0x5e3198=this['transformM'+'otionTextu'+'re'])==null||_0x5e3198['destroy'](),(_0x4efb94=this['transformL'+'ifecycleTe'+'xture'])==null||_0x4efb94['destroy'](),(_0x20d9c2=this['sh1to3Text'+'ure'])==null||_0x20d9c2['destroy'](),(_0x2e6092=this['sh4to7Text'+'ure'])==null||_0x2e6092['destroy'](),(_0x15b3e7=this['sh8to11Tex'+'ture'])==null||_0x15b3e7['destroy'](),(_0x4242f2=this['sh12to15Te'+'xture'])==null||_0x4242f2['destroy'](),(_0x5c7c98=this['colorTextu'+'re2'])==null||_0x5c7c98['destroy'](),(_0xf02376=this['transformA'+'Texture2'])==null||_0xf02376['destroy'](),(_0x2de6f1=this['transformB'+'Texture2'])==null||_0x2de6f1['destroy'](),(_0x3c38e4=this['transformR'+'Texture2'])==null||_0x3c38e4['destroy'](),(_0xcb6173=this['transformM'+'otionTextu'+'re2'])==null||_0xcb6173['destroy'](),(_0x4ccb43=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x4ccb43['destroy'](),(_0x25e5ac=this['sh1to3Text'+'ure2'])==null||_0x25e5ac['destroy'](),(_0x9ba22=this['sh4to7Text'+'ure2'])==null||_0x9ba22['destroy'](),(_0x532fcb=this['sh8to11Tex'+'ture2'])==null||_0x532fcb['destroy'](),(_0x4cf1a1=this['sh12to15Te'+'xture2'])==null||_0x4cf1a1['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x133170){var _0x3e7b2c,_0x100467,_0x58c9d5,_0x12617a,_0x1758f4,_0x5c36fe,_0x174438,_0x3af459,_0x2e4c32,_0x4649cd,_0x4dc957,_0x5992f8,_0x5071e3;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x201d35=((_0x3e7b2c=_0x133170['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(-0xec5*-0x1+-0x7bf+-0x383*0x2):_0x3e7b2c['data'])??0x2*-0x1247+0x1114+0x115*0x12,_0x2bc0fe=((_0x100467=_0x133170['getParamet'+'er']('uSplatScal'+'e'))==null?void(0x41c+-0x238*-0xf+-0x959*0x4):_0x100467['data'])??-0x1e88+-0x683+0x1286*0x2,_0x57b8d9=((_0x58c9d5=_0x133170['getParamet'+'er']('uSaturatio'+'n'))==null?void(-0xc29+-0x2696+0x32bf):_0x58c9d5['data'])??0x8c*0x6+-0x16*-0x19f+0x26f1*-0x1,_0x48e20d=((_0x12617a=_0x133170['getParamet'+'er']('uHueOffset'))==null?void(0x501*-0x1+0x26cb+-0x21ca):_0x12617a['data'])??-0x2349*-0x1+0x6a7+-0x29f0,_0x8a3ee3=((_0x1758f4=_0x133170['getParamet'+'er']('uInvertOpa'+'city'))==null?void(-0x1f1b*-0x1+0x33*0x62+-0x32a1*0x1):_0x1758f4['data'])??0x1115*0x2+0x1*-0xc3b+-0x15ef,_0x595658=((_0x5c36fe=_0x133170['getParamet'+'er']('uOpacity'))==null?void(0x1*-0x746+0x23d6+-0xe48*0x2):_0x5c36fe['data'])??-0x1*-0x26ea+0x2*0xc7+0x47f*-0x9,_0x147674=((_0x174438=_0x133170['getParamet'+'er']('clrOffset'))==null?void(-0x259*0x6+-0x1d3a+-0x738*-0x6):_0x174438['data'])??[0x1511+-0x19bd+0x4ac,-0x1590+0x1034+0x55c,0x6*-0xc7+-0x4*0x5ea+0x1c52,-0x1*-0xa09+0xae6+-0x14ee],_0x32c736=((_0x3af459=_0x133170['getParamet'+'er']('clrScale'))==null?void(0x1*-0x154c+-0x9e0+0x1f2c):_0x3af459['data'])??[-0xcfb+-0x1*-0x173b+-0xa3f,0x1cb5+-0x1c19+-0x1*0x9b,0x47*0x7b+0x2522+-0x473e,0xe0f+0x1*-0x3d7+-0xa37],_0x46a52f=((_0x2e4c32=_0x133170['getParamet'+'er']('uShapeN'))==null?void(-0xc*-0xb9+-0x6aa*0x1+0x2*-0x101):_0x2e4c32['data'])??-0x3*0xcc7+0xcec+-0x1969*-0x1,_0x39b133=((_0x4649cd=_0x133170['getParamet'+'er']('mode'))==null?void(-0x2298+-0x25e3+0x487b):_0x4649cd['data'])??0x20*0x101+-0x183f*-0x1+-0x385f,_0x53757f=((_0x4dc957=_0x133170['getParamet'+'er']('ringSize'))==null?void(0x25c5+0x3e*0x73+-0x419f):_0x4dc957['data'])??0x958+0x1ea1+-0x27f9,_0x6a44c4=((_0x5992f8=_0x133170['defines'])==null?void(-0x20f4+0x12fb+0x31*0x49):_0x5992f8['get']('uOpenAnim'))??'0',_0x2836ca=((_0x5071e3=_0x133170['defines'])==null?void(-0xa2b+-0xc4f*-0x2+0x4d1*-0x3):_0x5071e3['get']('uControlCo'+'lorMode'))??'0';_0x133170['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x133170['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x133170['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x133170['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x133170['setParamet'+'er']('uSplatScal'+'e',_0x2bc0fe),_0x133170['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x201d35),_0x133170['setParamet'+'er']('uSaturatio'+'n',_0x57b8d9),_0x133170['setParamet'+'er']('uHueOffset',_0x48e20d),_0x133170['setParamet'+'er']('uInvertOpa'+'city',_0x8a3ee3),_0x133170['setParamet'+'er']('uOpacity',_0x595658),_0x133170['setParamet'+'er']('clrOffset',_0x147674),_0x133170['setParamet'+'er']('clrScale',_0x32c736),_0x133170['setParamet'+'er']('uShapeN',_0x46a52f),_0x133170['setParamet'+'er']('mode',_0x39b133),_0x133170['setParamet'+'er']('ringSize',_0x53757f),_0x133170['setParamet'+'er']('prerenderC'+'Time',-0x1edf+0x1061+-0xe7e*-0x1),_0x133170['setParamet'+'er']('renderSpac'+'e',0x2*-0xdcc+0x1c4f*0x1+-0xad*0x1),_0x133170['setParamet'+'er']('endSpace',0x9*0xba+0x46*-0x38+0x2f0*0x3),_0x133170['setDefine']('uOpenAnim',_0x6a44c4),_0x133170['setDefine']('uControlCo'+'lorMode',_0x2836ca),this['transformM'+'otionTextu'+'re']&&_0x133170['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x133170['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x133170['setDefine']('SH_BANDS',this['shBands']),_0x133170['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x133170['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x133170['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x133170['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x133170['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x308185){const _0x2ec312=Math['ceil'](Math['sqrt'](_0x308185)),_0x329cc5=Math['ceil'](_0x308185/_0x2ec312);return new J(_0x2ec312,_0x329cc5);}async['updateColo'+'rData'](_0x356196){var _0x334b75;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x5df9aa=this['colorTextu'+'re2'];if(!_0x5df9aa||this['isDestroye'+'d'])return;let _0x10153c=(_0x334b75=_0x356196['transformD'+'ata'])==null?void(0x6b9*-0x3+-0xe1*0x7+0x1a52):_0x334b75['dataColor'];if(!_0x10153c){const _0x4cf638=_0x356196['getProp']('color_opac'+'ity');_0x10153c=new Uint16Array(_0x4cf638['buffer']['slice']());}await this['idleUpdate'+'TexturePro'+'mise'](_0x5df9aa,_0x10153c);}async['getTransfo'+'rmDataByWo'+'rker'](_0x2020ae){var _0x1b1eb6;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x1b1eb6=_0x2020ae['transformD'+'ata'])!=null&&_0x1b1eb6['dataCenter'+'s'])return{'centers':_0x2020ae['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x2020ae['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x2020ae['transformD'+'ata']['dataScale'],'dataRotation':_0x2020ae['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x2020ae['transformD'+'ata']['dataMotion'],'dataTime':_0x2020ae['transformD'+'ata']['dataTime'],'motion':_0x2020ae['transformD'+'ata']['motion'],'tScaleArray':_0x2020ae['transformD'+'ata']['tScaleArra'+'y']};const _0x1461fb=_0x2020ae['getProp']('position'),_0x586a0c=_0x2020ae['getProp']('motion'),_0x14b3c2=_0x2020ae['getProp']('rotation'),_0x43bd5a=_0x2020ae['getProp']('scale'),_0x3af1ee=_0x2020ae['getProp']('t'),_0x439aa4=_0x2020ae['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x2020ae['numSplats'],this['is4D'],_0x1461fb,_0x14b3c2,_0x586a0c,_0x43bd5a,_0x3af1ee,_0x439aa4);}async['updateTran'+'sformFromD'+'ata'](_0x1e9c9c){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x1e9c9c['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x1e9c9c['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x1e9c9c['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x1e9c9c['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x1e9c9c['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x3b18b4,_0x5c6447){if(!this['isDestroye'+'d'])return new Promise(_0x3e462f=>{requestIdleCallback(()=>{const _0x123552=_0x3b18b4['lock']();_0x123552==null||_0x123552['set'](_0x5c6447),_0x3b18b4['unlock'](),_0x3e462f(!(-0x1*-0x1d9b+-0x15*0x3b+0x18c4*-0x1));},{'timeout':0x12c});});}async['updateSHDa'+'ta'](_0x3522db){var _0x1f6270,_0x55bdf6,_0x5ce5c8,_0x54b1e1,_0x5efcf5,_0xc74635,_0x150b55,_0x242b5a;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x483f13=(_0x1f6270=this['sh1to3Text'+'ure2'])==null?void(0x13b6+0xf5f*0x1+0x7*-0x503):_0x1f6270['lock'](),_0xc5ce10=(_0x55bdf6=this['sh4to7Text'+'ure2'])==null?void(0x2401+-0x9cc+0x1a35*-0x1):_0x55bdf6['lock'](),_0x1a0bbf=(_0x5ce5c8=this['sh8to11Tex'+'ture2'])==null?void(0x174*-0x5+-0x1887+-0x1fcb*-0x1):_0x5ce5c8['lock'](),_0x42fba3=(_0x54b1e1=this['sh12to15Te'+'xture2'])==null?void(0x2*0xd9f+-0x729+-0x1415):_0x54b1e1['lock'](),_0x27882c={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x1c5546=xg(_0x3522db,_0x27882c*(-0x2e8+-0x2262+0x254d)),_0x5bb9e5=-0x292*-0x8+0x174f+-0xe*0x290,_0x13466a=-0x234a*0x1+-0x779*0x1+0x2ec2,_0x429778=new Float32Array(-0x2*-0x1171+0x3*0x27e+-0x60d*0x7),_0xbb3a29=new Uint32Array(_0x429778['buffer']),_0x34d047=new Array(_0x27882c*(0x129+-0x3*-0xbc9+0x1*-0x2481))['fill'](-0x3*0x263+0xc3b+-0x512);for(let _0x306696=-0x1834+-0xaf8*0x2+0x2e24;_0x306696<_0x3522db['numSplats'];++_0x306696){for(let _0x864c4e=-0x8*0x4e1+-0x1*-0xb56+0x1bb2;_0x864c4e<_0x27882c;++_0x864c4e)_0x34d047[_0x864c4e*(-0x19f1+0x1432+-0xb*-0x86)]=_0x1c5546[_0x864c4e][_0x306696],_0x34d047[_0x864c4e*(-0x5*-0x291+-0x1f2c+-0x1b*-0xae)+(0x1*0x1265+-0x961+-0x1*0x903)]=_0x1c5546[_0x864c4e+_0x27882c][_0x306696],_0x34d047[_0x864c4e*(0x1947*-0x1+-0x17d9+0x3123)+(0x293*0x3+-0x1383+0xbcc)]=_0x1c5546[_0x864c4e+_0x27882c*(-0x815*0x2+-0x10*-0x194+-0x914)][_0x306696];let _0x35d08e=_0x34d047[-0x1*-0xc4c+-0x3fd*0x1+-0x84f];for(let _0x496362=0x247c+-0x185*-0x6+-0x2d99;_0x496362<_0x27882c*(0x106*-0x1+0x287*0x8+-0x132f);++_0x496362)_0x35d08e=Math['max'](_0x35d08e,Math['abs'](_0x34d047[_0x496362]));if(_0x35d08e!==-0x72a+0x1*-0x1899+0x1fc3*0x1){for(let _0x393d71=0x23aa+0x2f*-0x61+0x11db*-0x1;_0x393d71<_0x27882c;++_0x393d71)_0x34d047[_0x393d71*(-0x4*-0x79f+0x1181+0x1*-0x2ffa)+(0x25f4+0xc87*-0x1+-0x11b*0x17)]=Math['max'](-0x1f9*0x7+-0xd63*0x2+0x2895,Math['min'](_0x5bb9e5,Math['floor']((_0x34d047[_0x393d71*(0x85f*-0x2+-0x59*-0x34+-0x153)+(-0x86*-0x37+0x25da+0x6aa*-0xa)]/_0x35d08e*(-0x6b5+-0x1f4f+0x2604+0.5)+(-0x94a+-0x18aa+0x21f4+0.5))*_0x5bb9e5+(-0x5e*0x67+0x7*-0x3e5+-0x1*-0x4115+0.5)))),_0x34d047[_0x393d71*(-0x240a+-0x191a+0x3d27)+(-0x1bf*-0x13+-0x1*-0xe0e+-0x2f3a)]=Math['max'](0x16*0x1c4+-0x22a8+-0x430,Math['min'](_0x13466a,Math['floor']((_0x34d047[_0x393d71*(0x18db+0xe15+0x1*-0x26ed)+(-0x106*-0x1b+-0xd*-0xd3+-0x2658)]/_0x35d08e*(0x52d*0x2+0xbb5+0x160f*-0x1+0.5)+(0x17*0x11b+-0x127*-0x6+-0x2057+0.5))*_0x13466a+(-0x122+-0x1d93+0x7*0x463+0.5)))),_0x34d047[_0x393d71*(0x15+-0x20b6+0x20a4)+(-0x2489*0x1+-0x8ba+0x2d45)]=Math['max'](0xa1a+0x955*-0x4+-0x5*-0x572,Math['min'](_0x5bb9e5,Math['floor']((_0x34d047[_0x393d71*(0x201e+-0x56*-0x64+-0xb*0x5f9)+(-0x21d5+-0x1*0xb23+-0x3*-0xefe)]/_0x35d08e*(-0x68b+-0xc6d*-0x2+-0x124f+0.5)+(-0x92+-0x1d2*0x13+-0x18*-0x177+0.5))*_0x5bb9e5+(0x7*0x3d7+-0xd*-0x2ff+-0x41d4+0.5))));_0x429778[-0x2a8+-0x1221+-0x139*-0x11]=_0x35d08e,_0x483f13[_0x306696*(-0x41+0x1*-0x1126+-0x31*-0x5b)+(-0x1067+0x4ee*-0x3+0x1f31)]=_0xbb3a29[0x5e6*0x5+0x1852+-0x35d0],_0x483f13[_0x306696*(-0xb7*-0xd+-0x1ac*0xf+0xfcd)+(-0x2652+-0x2*0x4ae+0x3ab*0xd)]=_0x34d047[-0x112f+-0x7d*-0x25+-0xe2]<<-0x69*0x5+-0x1*0x7a2+0x9c4|_0x34d047[0xe53*0x1+-0x25f2+-0x36*-0x70]<<0x2106*0x1+0x9a5+0xb0*-0x3e|_0x34d047[0x6d*-0x52+-0xc59+0x2f45],_0x483f13[_0x306696*(-0x1e49*0x1+0x3b4+0x1a99)+(-0x1f8a+-0x502+-0x1*-0x248e)]=_0x34d047[-0xfb*0x26+-0x2*-0xb2b+0xeef]<<0xf0+0x2*-0x385+0x62f|_0x34d047[0x9*-0x25+-0x10c*0x1+0x5*0x79]<<-0x66*0x24+-0x1fc5+0x2e28|_0x34d047[0x2*-0x60d+0x174a+0xb2b*-0x1],_0x483f13[_0x306696*(0x1*0x18d1+0x17*0x102+-0x1*0x2ffb)+(0x2288+0x758+-0x7*0x5fb)]=_0x34d047[-0xaad+-0xb*-0x2a4+-0x1*0x1259]<<-0xa*-0x1e7+0x1601+-0x28f2|_0x34d047[0x137*-0x11+-0x108e+0x253c]<<-0x290*-0x6+-0x191d+0x9c8|_0x34d047[-0x2f5*0x1+-0x24e3+0x27e0],this['shBands']>-0xd55+-0x1835+0x258b&&(_0xc5ce10[_0x306696*(0x63*0x24+-0x1*-0xac1+-0x1*0x18a9)+(-0x243f*0x1+0x7f7+0xe24*0x2)]=_0x34d047[0x1f77+0x686+-0x25f4]<<0x1*-0x1222+0x240e+0x11d7*-0x1|_0x34d047[0xc95+-0x383*0x1+0x11*-0x88]<<-0x25cd*-0x1+-0x1601+-0xfc1*0x1|_0x34d047[-0x2008+-0x2055+0x6*0xabc],_0xc5ce10[_0x306696*(0x1391*-0x1+-0x1ffc+-0x3391*-0x1)+(-0x20f+-0x55a+0x1a*0x49)]=_0x34d047[0x453+-0x108b+0x1*0xc44]<<-0x13*-0x40+-0x44d+-0x5e|_0x34d047[-0x2364+-0x655*-0x3+0x1072]<<-0x155b+-0xbf*-0x2f+-0xdab|_0x34d047[-0x4f*-0xb+0xdde+-0x5*0x371],_0xc5ce10[_0x306696*(-0x667+-0x142b+0x1a96)+(-0x167+0x3*-0xef+0x436)]=_0x34d047[-0x1f*-0xa3+-0x67c+-0xd32]<<-0x1*-0x1dcd+-0xfd4+0x1*-0xde4|_0x34d047[-0x2cd*-0xd+0xd7e+-0x31d7]<<0x1*-0x1df+0x127c+-0x2a*0x65|_0x34d047[0x49f*-0x7+0xaaa+-0x10*-0x15c],_0xc5ce10[_0x306696*(-0x6af*0x1+-0x5b*0x29+-0x185*-0xe)+(0x1549+0x15ed+0x1*-0x2b33)]=_0x34d047[0x8ca+-0x10eb*0x1+0x833]<<-0x1156*-0x1+0x2261+-0x1136*0x3|_0x34d047[0x55*-0x4f+0x8d0+0x117e]<<-0x95b*-0x1+-0x32*0x4a+0x524|_0x34d047[0x2701+-0x2573+-0x17a],this['shBands']>-0x9e9*0x1+0x1333+0x108*-0x9?(_0x1a0bbf[_0x306696*(-0x9*-0x4f+-0x1324+0x1061*0x1)+(-0x13dc+-0x13a*0x1+0xa8b*0x2)]=_0x34d047[0x72d+0x362+-0x2*0x53d]<<0x1*-0x25dc+-0x4ee*-0x7+0x36f|_0x34d047[0x2*0x1+0x7*-0x54f+0x253d*0x1]<<0xf1f+-0x17ab*0x1+-0x897*-0x1|_0x34d047[0x385+-0x1e1d+0x1aaf],_0x1a0bbf[_0x306696*(-0x1c5d+-0x21b9*0x1+-0x3e1a*-0x1)+(-0x220f+-0x490+0x26a0)]=_0x34d047[-0x1*0x2556+-0x1459+-0x1*-0x39c7]<<-0x1b35*-0x1+0x19cf+-0x34ef|_0x34d047[-0x1da0+-0x14b6+0x326f]<<-0x16f5+0x2*0x81b+-0x4f*-0x16|_0x34d047[-0xa85*0x1+0x24dc+-0x1a3d],_0x1a0bbf[_0x306696*(-0x1435+0x5*-0x31f+-0x4*-0x8f5)+(0x64d+0xdd*-0x5+-0x1fa)]=_0x34d047[-0x1410+-0x2*-0x325+0xd1*0x11]<<-0xd7a+-0x11ce+0x1f5d|_0x34d047[0x305+-0x163e+0x1355]<<-0x1a44*-0x1+0x70f*-0x5+0x912|_0x34d047[-0x16ba+-0x64a+0x1*0x1d21],_0x1a0bbf[_0x306696*(-0x233+-0x3*0xbe5+-0x6*-0x651)+(0x1*-0xa6b+0x24bb*0x1+-0x1a4d)]=_0x34d047[-0x9a*-0x7+0x34*0x86+-0xfa8*0x2]<<-0x99b*0x2+0x1*0xbab+0xf4*0x8|_0x34d047[0x1af3+-0x6*0x2ca+-0xa18]<<-0x1646+0x1*0x1f0+-0x1*-0x1461|_0x34d047[0xc57+-0x1a3b+0xe04],_0x42fba3[_0x306696*(0x1*-0x53+-0x161*0x1+0x6e*0x4)+(0xd*-0x7f+0x1e3e*0x1+-0x17cb*0x1)]=_0x34d047[0x1*0x21c1+0xa39+-0x19*0x1c1]<<-0xcb*-0x23+0x3b5*0x2+0x1f3*-0x12|_0x34d047[0x1*-0x9cb+0x1*0x797+0x256]<<-0x5*0x397+0x179*-0xc+0x23aa|_0x34d047[0x1f*-0xd5+0x4c4+0x152a],_0x42fba3[_0x306696*(0x1d13+0x1fde+0x144f*-0x3)+(0x227a+0x168a+-0x3903)]=_0x34d047[-0x1e15+-0x187e+0x3*0x123d]<<0x395+0x1*0x1baf+-0x1f2f|_0x34d047[0x1a56+-0x2665+-0xb*-0x11c]<<0x14*0x52+0xf01*-0x1+0x8a4|_0x34d047[0x6c7+-0x1e83+0x2*0xbf1],_0x42fba3[_0x306696*(0x1e5a+0x1d76*-0x1+-0xe0)+(0x1*0x905+0x6a1+-0xfa4)]=_0x34d047[-0x3*0x373+-0x22bd*0x1+0x2d3d]<<0x118b*0x1+0x1df5*-0x1+0xc7f|_0x34d047[0x19f7+-0x305*0xb+-0xed*-0x8]<<-0xc*0x10d+-0x91*-0x16+0x31|_0x34d047[0x1e8*-0x3+0x26b5+-0x20d4],_0x42fba3[_0x306696*(-0xb9e+-0x2338+0x2eda)+(-0xa98+-0x2f*-0x2f+0xfd*0x2)]=_0x34d047[0xe*-0xa3+-0xab3*-0x1+-0x19f*0x1]<<-0x11b*-0x13+0x38b*-0x1+-0x1161|_0x34d047[0x756+0x2c7*0x1+-0x26*0x43]<<-0xa*-0x1f7+-0x2507*0x1+0x116c|_0x34d047[-0xc5*-0x29+0x1*0x1a46+-0x39a7]):_0x1a0bbf[_0x306696]=_0x34d047[-0x31*0x4f+-0xc86+0x1bba]<<-0x2354+-0x1*-0x1153+0x1216|_0x34d047[0xe89+0x2*0xc66+-0x24f*0x11]<<-0x2013+0x4*0x8fe+-0x3da*0x1|_0x34d047[-0x137*-0x9+-0xa96+-0x42]);}}(_0x5efcf5=this['sh1to3Text'+'ure2'])==null||_0x5efcf5['unlock'](),(_0xc74635=this['sh4to7Text'+'ure2'])==null||_0xc74635['unlock'](),(_0x150b55=this['sh8to11Tex'+'ture2'])==null||_0x150b55['unlock'](),(_0x242b5a=this['sh12to15Te'+'xture2'])==null||_0x242b5a['unlock']();}async['updateSHDa'+'taByWorker'](_0x4faff9){var _0x58412c,_0x2179d7,_0x1d9c31,_0x216a55,_0x532c95;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x3f5a58={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x5a6e78,_0x58e2d6,_0x4fdf0b,_0x4021a3;if((_0x58412c=_0x4faff9['transformD'+'ata'])!=null&&_0x58412c['sh1to3Data'])_0x5a6e78=(_0x2179d7=_0x4faff9['transformD'+'ata'])==null?void(-0x9e3+0x1fdb+-0x15f8):_0x2179d7['sh1to3Data'],_0x58e2d6=(_0x1d9c31=_0x4faff9['transformD'+'ata'])==null?void(-0xa3*0x35+0x4+0x21bb):_0x1d9c31['sh4to7Data'],_0x4fdf0b=(_0x216a55=_0x4faff9['transformD'+'ata'])==null?void(-0x35*0xbb+-0x14*-0x14e+-0x9*-0x167):_0x216a55['sh8to11Dat'+'a'],_0x4021a3=(_0x532c95=_0x4faff9['transformD'+'ata'])==null?void(-0x1*0x26c3+-0x1a01+-0x5*-0xcf4):_0x532c95['sh12to15Da'+'ta'];else{const _0x1fc25f=xg(_0x4faff9,_0x3f5a58*(0x1*-0x1803+-0x1*0x1b28+0x332e)),_0x584b94=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x4faff9['numSplats'],this['shBands'],_0x1fc25f);_0x5a6e78=_0x584b94['sh1to3Data'],_0x58e2d6=_0x584b94['sh4to7Data'],_0x4fdf0b=_0x584b94['sh8to11Dat'+'a'],_0x4021a3=_0x584b94['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x5a6e78),this['shBands']>-0x11da+-0x12c2+0x249d&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x58e2d6),this['shBands']>-0x2*0x292+0x823*-0x3+-0xa1*-0x2f?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x4fdf0b),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x4021a3)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x4fdf0b));}}const PC='FILL_WINDO'+'W',Tg='KEEP_ASPEC'+'T',wg='AUTO',MC='FIXED';let Ov;function Ms(){return Ov;}function _u(_0x111add){Ov=_0x111add;}class DC{constructor(){h(this,'renderPass'+'es',[]),h(this,'renderTarg'+'etMap',new Map());}['addRenderP'+'ass'](_0x4cebb8){w['assert'](_0x4cebb8),_0x4cebb8['frameUpdat'+'e']();const _0x44b800=_0x4cebb8['beforePass'+'es'];for(let _0x2b53a8=-0x3a*0x14+-0xf5b+-0x13e3*-0x1;_0x2b53a8<_0x44b800['length'];_0x2b53a8++){const _0x3b2d0c=_0x44b800[_0x2b53a8];_0x3b2d0c['enabled']&&this['addRenderP'+'ass'](_0x3b2d0c);}_0x4cebb8['enabled']&&this['renderPass'+'es']['push'](_0x4cebb8);const _0x31cd4b=_0x4cebb8['afterPasse'+'s'];for(let _0x3c577d=0x2378+-0x1*0x35b+-0x201d*0x1;_0x3c577d<_0x31cd4b['length'];_0x3c577d++){const _0x48d0c0=_0x31cd4b[_0x3c577d];_0x48d0c0['enabled']&&this['addRenderP'+'ass'](_0x48d0c0);}}['reset'](){this['renderPass'+'es']['length']=-0x66b+0x229*-0x1+0xf4*0x9;}['compile'](){const _0x2271a5=this['renderTarg'+'etMap'],_0x5ac370=this['renderPass'+'es'];for(let _0x50cb64=0x22d4+0x858+-0x2b2c;_0x50cb64<_0x5ac370['length'];_0x50cb64++){const _0x30e119=_0x5ac370[_0x50cb64],_0x5ea22c=_0x30e119['renderTarg'+'et'];if(_0x5ea22c!==void(0x137*0x4+-0x2*-0x227+-0x2*0x495)){const _0x5086ec=_0x2271a5['get'](_0x5ea22c);if(_0x5086ec){const _0x307f45=_0x30e119['colorArray'+'Ops']['length'];for(let _0x2bfd7f=0x1f80+-0x1d7d+0x203*-0x1;_0x2bfd7f<_0x307f45;_0x2bfd7f++)_0x30e119['colorArray'+'Ops'][_0x2bfd7f]['clear']||(_0x5086ec['colorArray'+'Ops'][_0x2bfd7f]['store']=!(0x16b*0xb+0x3ce*0x3+-0x1b03));_0x30e119['depthStenc'+'ilOps']['clearDepth']||(_0x5086ec['depthStenc'+'ilOps']['storeDepth']=!(-0x199+-0xbbf+0xd58)),_0x30e119['depthStenc'+'ilOps']['clearStenc'+'il']||(_0x5086ec['depthStenc'+'ilOps']['storeStenc'+'il']=!(-0x18a7+0x10fd+0x7aa));}_0x2271a5['set'](_0x5ea22c,_0x30e119);}}for(let _0x59f7f4=-0x7fa+-0x882+-0x2*-0x83e;_0x59f7f4<_0x5ac370['length']-(0x9ff*-0x1+-0x19+-0x5*-0x205);_0x59f7f4++){const _0x46700e=_0x5ac370[_0x59f7f4],_0x278e96=_0x46700e['renderTarg'+'et'],_0x5c73d9=_0x5ac370[_0x59f7f4+(-0x679+-0x2438+0x2ab2*0x1)],_0x40f1a1=_0x5c73d9['renderTarg'+'et'];_0x278e96!==_0x40f1a1||_0x278e96===void(0xea9+0x3*0x95f+-0x447*0xa)||_0x5c73d9['depthStenc'+'ilOps']['clearDepth']||_0x5c73d9['depthStenc'+'ilOps']['clearStenc'+'il']||_0x5c73d9['colorArray'+'Ops']['some'](_0x4d312f=>_0x4d312f['clear'])||_0x46700e['afterPasse'+'s']['length']>0xece*0x1+0x243+-0x1111||_0x5c73d9['beforePass'+'es']['length']>0x638+-0x10c1+-0x1f*-0x57||(_0x46700e['_skipEnd']=!(0x1db4+0x1b79+-0x392d),_0x5c73d9['_skipStart']=!(-0x68+-0x1367*-0x1+-0x1*0x12ff));}let _0x475a3b=null,_0x3b969d=null;for(let _0x43044f=0x3*0x98f+-0x2*-0xa45+-0x3137;_0x43044f<_0x5ac370['length'];_0x43044f++){const _0x1b941=_0x5ac370[_0x43044f],_0x3e6c32=_0x1b941['renderTarg'+'et'],_0x31cc70=_0x3e6c32==null?void(0x10ff*-0x1+0x2a9*0x7+-0x1a0):_0x3e6c32['colorBuffe'+'r'];if(_0x31cc70!=null&&_0x31cc70['cubemap']){if(_0x475a3b===_0x31cc70){const _0x4493f5=_0x3b969d['colorArray'+'Ops']['length'];for(let _0x1236bf=-0x227d+0x6*-0x521+0x4143;_0x1236bf<_0x4493f5;_0x1236bf++)_0x3b969d['colorArray'+'Ops'][_0x1236bf]['mipmaps']=!(0x1aac+-0x20ca+0x61f);}_0x475a3b=_0x3e6c32['colorBuffe'+'r'],_0x3b969d=_0x1b941;}else _0x1b941['requiresCu'+'bemaps']&&(_0x475a3b=null,_0x3b969d=null);}_0x2271a5['clear']();}['render'](_0x836895){this['compile']();const _0x1e3449=this['renderPass'+'es'];for(let _0x4a23a0=-0x1*0xe6b+-0x16b2+0x251d;_0x4a23a0<_0x1e3449['length'];_0x4a23a0++)_0x1e3449[_0x4a23a0]['render']();}}class IC{constructor(_0x3675c2,_0x33df64){this['texture0']=_0x3675c2,this['texture1']=_0x33df64;}['destroy'](){var _0x435319,_0x173ed4;(_0x435319=this['texture0'])==null||_0x435319['destroy'](),(_0x173ed4=this['texture1'])==null||_0x173ed4['destroy']();}}const Eg=new Kt();class ia{static['createText'+'ure'](_0x1e960f,_0x1c8e02,_0x2d9382,_0x332e3b=''){return new _e(_0x1e960f,{'name':'AreaLightL'+'UT'+_0x332e3b,'width':_0x2d9382,'height':_0x2d9382,'format':_0x1c8e02,'addressU':ue,'addressV':ue,'type':Ds,'magFilter':vt,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(-0x17c5+0x1f*0x2c+0x1272)});}static['applyTextu'+'res'](_0x4820bb,_0x4fccf2,_0x416738){Eg['remove'](_0x4820bb),Eg['get'](_0x4820bb,()=>new IC(_0x4fccf2,_0x4fccf2===_0x416738?null:_0x416738)),_0x4820bb['scope']['resolve']('areaLights'+'LutTex1')['setValue'](_0x4fccf2),_0x4820bb['scope']['resolve']('areaLights'+'LutTex2')['setValue'](_0x416738);}static['createPlac'+'eholder'](_0x4df724){const _0x563101=ia['createText'+'ure'](_0x4df724,nt,0x148d*0x1+-0x221e+0xd93,'placeholde'+'r');_0x563101['lock']()['fill'](-0x99c+-0x691*-0x5+0x29*-0x91),_0x563101['unlock'](),ia['applyTextu'+'res'](_0x4df724,_0x563101,_0x563101);}static['set'](_0x170485,_0x2c5c17,_0x15ba51){function _0x1753ff(_0x4945bf,_0x35a227,_0x57a34a){const _0x522d85=ia['createText'+'ure'](_0x4945bf,_0x57a34a,0x1da1+0xe91+-0x5*0x8ca);return _0x522d85['lock']()['set'](_0x35a227),_0x522d85['unlock'](),_0x522d85;}function _0x211926(_0x6ab50d){const _0x5e4c00=_0x6ab50d['length'],_0x22379a=new Uint16Array(_0x5e4c00),_0x251205=Mn['float2Half'];for(let _0x4edf77=-0x4a3*0x8+-0x7a8*-0x5+-0x130*0x1;_0x4edf77<_0x5e4c00;_0x4edf77++)_0x22379a[_0x4edf77]=_0x251205(_0x6ab50d[_0x4edf77]);return _0x22379a;}const _0x52c18b=_0x2c5c17,_0x37b3a6=_0x15ba51,_0x140784=_0x211926(_0x52c18b),_0x52175a=_0x211926(_0x37b3a6),_0x1d5158=_0x1753ff(_0x170485,_0x140784,nt),_0xcdd946=_0x1753ff(_0x170485,_0x52175a,nt);ia['applyTextu'+'res'](_0x170485,_0x1d5158,_0xcdd946);}}const Ph='en-US',Mh={'en':'en-US','es':'en-ES','zh':'zh-CN','zh-HK':'zh-TW','zh-TW':'zh-HK','zh-MO':'zh-HK','fr':'fr-FR','de':'de-DE','it':'it-IT','ru':'ru-RU','ja':'ja-JP'},Sm={};function Dr(_0xe8d07a,_0x1b3f80){for(let _0x527ca6=0x20e7+0x3e*0x48+-0x3257,_0x11799f=_0xe8d07a['length'];_0x527ca6<_0x11799f;_0x527ca6++)Sm[_0xe8d07a[_0x527ca6]]=_0x1b3f80;}function Oi(_0x16fde2){const _0x31a18d=_0x16fde2['indexOf']('-');return _0x31a18d!==-(-0x2*0x655+-0x22f1+0x2f9c)?_0x16fde2['substring'](0x764*-0x5+0x2*0x1057+-0x2*-0x223,_0x31a18d):_0x16fde2;}function LC(_0x284a65,_0x31ecbf){const _0x3680fe=_0x284a65['indexOf']('-');return _0x3680fe!==-(-0xd2b+0xc9b*0x3+0x3*-0x837)?_0x31ecbf+_0x284a65['substring'](_0x3680fe):_0x31ecbf;}function Fv(_0x1e8613,_0x4a7ab3){if(_0x4a7ab3[_0x1e8613])return _0x1e8613;let _0x90633e=Mh[_0x1e8613];if(_0x90633e&&_0x4a7ab3[_0x90633e])return _0x90633e;const _0x528ec0=Oi(_0x1e8613);return _0x90633e=Mh[_0x528ec0],_0x4a7ab3[_0x90633e]?_0x90633e:_0x4a7ab3[_0x528ec0]?_0x528ec0:Ph;}Dr(['ja','ko','th','vi','zh','id'],_0x1f94c9=>0x22a8+-0x1920+-0x988),Dr(['fa','hi'],_0x2b7e4b=>_0x2b7e4b>=-0x74+0x8f7+-0x883&&_0x2b7e4b<=-0x1a57+-0x125b*-0x1+0x7fd?-0xe7b+0x11f*0x2+0xc3d:-0x18c9+0x6*-0x162+-0xb*-0x302),Dr(['fr','pt'],_0x582042=>_0x582042>=0x5e*0x33+-0x1198+-0x122&&_0x582042<0x1ffc+-0x11a0+0x2*-0x72d?0x24f+-0xda3*-0x2+-0x1d95:0x1*-0x163a+-0xf0d+0x2548),Dr(['da'],_0x2232e7=>_0x2232e7===0x1*-0x20b9+0x1d6a+-0x10*-0x35||!Number['isInteger'](_0x2232e7)&&_0x2232e7>=-0x57d+-0x206b+0x12f4*0x2&&_0x2232e7<=0xf3*0x11+-0x770+-0x8b2?0xd*-0x6d+0x11e1+0x9e*-0x14:-0x231d+-0x21dd+0x44fb),Dr(['de','en','it','el','es','tr','fi','sv','nb','no','ur'],_0x343aeb=>_0x343aeb===0x1*-0xb1+0x1*0x2593+-0x24e1?0x2b*-0x56+0xb4d+0x325:-0x791*-0x2+0x4be*-0x2+0x1*-0x5a5),Dr(['ru','uk'],_0x4a3c28=>{if(Number['isInteger'](_0x4a3c28)){const _0x10e6f8=_0x4a3c28%(-0x15da+-0x11*-0x10f+0x3e5*0x1),_0x5f03c0=_0x4a3c28%(-0x1b8e+0x1ef6+0x1*-0x304);if(_0x10e6f8===0x1*-0xd19+-0x245f*0x1+0x3179&&_0x5f03c0!==-0x125f*0x1+0x4*-0x568+0x280a)return 0x11b9+0x3af*-0x1+-0xe0a;if(_0x10e6f8>=0x896+0x905*-0x4+0x1b80&&_0x10e6f8<=0x3d*-0x5e+-0x45a*0x3+-0x5*-0x718&&(_0x5f03c0<0x4e2+-0x232e+-0x1e58*-0x1||_0x5f03c0>0xd08+0x1507+-0x2201))return-0x1148+-0xd*0x2d9+-0x7*-0x7c2;if(_0x10e6f8===0x16dc+0x184e+-0x2*0x1795||_0x10e6f8>=-0xb18+-0x17*-0x77+0x6c&&_0x10e6f8<=-0x1efd+0x1*-0x1225+0x312b||_0x5f03c0>=-0x1d8c*-0x1+0xaef*0x1+-0x50e*0x8&&_0x5f03c0<=-0x1ac9+-0x22a*-0xf+-0x59f)return-0x1ae4+-0x1eee+-0xe75*-0x4;}return-0x10b0+0x1e54+-0xda1;}),Dr(['pl'],_0x9e6314=>{if(Number['isInteger'](_0x9e6314)){if(_0x9e6314===-0x5bb*-0x1+-0x1e77+0x1*0x18bd)return-0x577*-0x7+0x257*0x1+-0xa26*0x4;const _0x324509=_0x9e6314%(-0x18a8+-0x2*-0xe9d+-0x488*0x1),_0x8f1004=_0x9e6314%(-0x5*0x1f5+0x19ca*-0x1+0x3ff*0x9);if(_0x324509>=-0xdac+-0x2*0x461+0x167*0x10&&_0x324509<=-0x26*0x8b+-0x1*0x197c+0x2e22&&(_0x8f1004<-0x1*0x2c5+-0x10ef+0x13c0||_0x8f1004>0x233+-0xcd3+0xaae))return 0x161*0x5+0x9*-0x199+0xd5*0x9;if(_0x324509>=0x8a*0x29+-0x1492*-0x1+0x2*-0x1556&&_0x324509<=0x1*-0x2d4+-0x3b8*0x2+0x1*0xa45||_0x324509>=-0x9b1*0x4+0x269c+-0x2d*-0x1&&_0x324509<=0x1*-0x2039+-0x5*-0x5d2+-0x2*-0x194||_0x8f1004>=-0x1aad+0x167b+-0xb5*-0x6&&_0x8f1004<=0x1df*0x4+0x1d72+0xa0*-0x3b)return-0x1d71+0x32+0x1d41;}return 0x502*-0x1+0x1e3a+0x3*-0x867;}),Dr(['ar'],_0x151417=>{if(_0x151417===0x23a2+0x21f0+-0x4592)return 0xbfc+0x14b3+-0xae5*0x3;if(_0x151417===0x5*0x7+0x3d8+-0x3fa)return-0xee7+-0x18d7+0xb*0x39d;if(_0x151417===0x1445+0x1a5+0x4*-0x57a)return 0x38*-0x11+-0x10d3+-0x1*-0x148d;if(Number['isInteger'](_0x151417)){const _0x3e5ca7=_0x151417%(-0x258e+0xb2f+-0xd*-0x20f);if(_0x3e5ca7>=-0x1b8+0x2*0x1085+-0x1f4f&&_0x3e5ca7<=-0x5*0x23+-0x1a54+0x1b0d)return 0x1f8e+-0x32b*0xa+-0x7*-0x5;if(_0x3e5ca7>=-0x9*0x18+0x103*-0x19+0x1a2e&&_0x3e5ca7<=0xf2d+-0x91+-0xe39)return 0x1*-0xd57+-0x1*-0xd0f+0x4c;}return-0x3cc+-0x3e6*-0x9+-0x1f45;});const RC=Sm[Oi(Ph)];function Tf(_0x5b93a4){return Sm[_0x5b93a4]||RC;}const jn=new RegExp('^\x5cs*(?:(?:'+'[a-z]+[a-z'+'0-9\x5c-+.]*:'+')?//|data:'+'|blob:)','i');class OC{constructor(_0x1b444b='',_0x1ead4e='',_0x59561c=null,_0x3394ca=null,_0x34f8a9=null,_0x50f872=null){this['url']=_0x1b444b,this['filename']=_0x1ead4e,this['hash']=_0x59561c,this['size']=_0x3394ca,this['opt']=_0x34f8a9,this['contents']=_0x50f872;}['equals'](_0x721796){return this['url']===_0x721796['url']&&this['filename']===_0x721796['filename']&&this['hash']===_0x721796['hash']&&this['size']===_0x721796['size']&&this['opt']===_0x721796['opt']&&this['contents']===_0x721796['contents'];}}let FC=-(0x459+-0x3e8+0x70*-0x1);const NC={'pvr':'extCompres'+'sedTexture'+'PVRTC','dxt':'extCompres'+'sedTexture'+'S3TC','etc2':'extCompres'+'sedTexture'+'ETC','etc1':'extCompres'+'sedTexture'+'ETC1','basis':'canvas'},bg=['pvr','dxt','etc2','etc1','basis'];class pe extends me{constructor(_0x439e74,_0x3150eb,_0x22d106,_0x580c6c={},_0x5f0f03={}){super(),h(this,'_file',null),h(this,'_i18n',{}),h(this,'_preload',!(-0x798+0xc04+-0x46b)),h(this,'_resources',[]),h(this,'id',FC--),h(this,'loaded',!(0x1506+0x11f*0x22+-0x3b23)),h(this,'loading',!(0x2f*-0x2f+0x446*-0x3+0x1574)),h(this,'options',{}),h(this,'registry',null),h(this,'tags',new Oo(this)),h(this,'type'),h(this,'urlObject',null),(this['_name']=_0x439e74||'',this['type']=_0x3150eb,this['_data']=_0x580c6c||{},this['options']=_0x5f0f03||{},_0x22d106&&(this['file']=_0x22d106));}set['name'](_0x517ebd){if(this['_name']===_0x517ebd)return;const _0x1962b5=this['_name'];this['_name']=_0x517ebd,this['fire']('name',this,this['_name'],_0x1962b5);}get['name'](){return this['_name'];}set['file'](_0x4d1b80){var _0x5dbc04,_0x48fe63;if(_0x4d1b80&&_0x4d1b80['variants']&&['texture','textureatl'+'as','bundle']['indexOf'](this['type'])!==-(-0x211+-0x155d+0x176f)){const _0x5e96ec=((_0x48fe63=(_0x5dbc04=this['registry'])==null?void(0x1ed+0x23bf*0x1+0x96b*-0x4):_0x5dbc04['_loader'])==null?void(0x10f*0x23+-0x697*-0x1+0xe8c*-0x3):_0x48fe63['_app'])||Ms(),_0xceea19=_0x5e96ec==null?void(0x8*0x54+-0x114*0x23+0x231c):_0x5e96ec['graphicsDe'+'vice'];if(_0xceea19)for(let _0x330bec=0x4*-0x559+0x1*0x1812+-0x2ae,_0x4b1ad5=bg['length'];_0x330bec<_0x4b1ad5;_0x330bec++){const _0x15f5b0=bg[_0x330bec];if(_0x4d1b80['variants'][_0x15f5b0]&&_0xceea19[NC[_0x15f5b0]]){_0x4d1b80=_0x4d1b80['variants'][_0x15f5b0];break;}if(_0x5e96ec['enableBund'+'les']){const _0x4c5b22=_0x5e96ec['bundles']['listBundle'+'sForAsset'](this);if(_0x4c5b22&&_0x4c5b22['find'](_0x483668=>{var _0x1bf34b;return(_0x1bf34b=_0x483668==null?void(0x8bf*-0x1+0x248d+-0xde7*0x2):_0x483668['file'])==null?void(0x7*-0x517+-0x150b*0x1+0x9c*0x5d):_0x1bf34b['variants'][_0x15f5b0];}))break;}}}const _0x3ade4a=this['_file'],_0x37a9f9=_0x4d1b80?new OC(_0x4d1b80['url'],_0x4d1b80['filename'],_0x4d1b80['hash'],_0x4d1b80['size'],_0x4d1b80['opt'],_0x4d1b80['contents']):null;(!!_0x37a9f9!=!!_0x3ade4a||_0x37a9f9&&!_0x37a9f9['equals'](_0x3ade4a))&&(this['_file']=_0x37a9f9,this['fire']('change',this,'file',_0x37a9f9,_0x3ade4a),this['reload']());}get['file'](){return this['_file'];}set['data'](_0x412a75){const _0x4f1c6a=this['_data'];this['_data']=_0x412a75,_0x412a75!==_0x4f1c6a&&(this['fire']('change',this,'data',_0x412a75,_0x4f1c6a),this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['data'](){return this['_data'];}set['resource'](_0x129dd7){const _0x242a34=this['_resources'][0x1a86+0x1*0x13fa+-0x8*0x5d0];this['_resources'][-0x767*-0x1+0xf*0x9c+0x5*-0x34f]=_0x129dd7,this['fire']('change',this,'resource',_0x129dd7,_0x242a34);}get['resource'](){return this['_resources'][-0x15c5+0x5d3*0x3+0x44c];}set['resources'](_0x407fad){const _0x4c62ec=this['_resources'];this['_resources']=_0x407fad,this['fire']('change',this,'resources',_0x407fad,_0x4c62ec);}get['resources'](){return this['_resources'];}set['preload'](_0x2537d2){_0x2537d2=!!_0x2537d2,this['_preload']!==_0x2537d2&&(this['_preload']=_0x2537d2,this['_preload']&&!this['loaded']&&!this['loading']&&this['registry']&&this['registry']['load'](this));}get['preload'](){return this['_preload'];}set['loadFaces'](_0x564f8e){_0x564f8e=!!_0x564f8e,(!this['hasOwnProp'+'erty']('_loadFaces')||_0x564f8e!==this['_loadFaces'])&&(this['_loadFaces']=_0x564f8e,this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['loadFaces'](){return this['_loadFaces'];}['getFileUrl'](){const _0x344b14=this['file'];if(!_0x344b14||!_0x344b14['url'])return null;let _0x4e0f08=_0x344b14['url'];if(this['registry']&&this['registry']['prefix']&&!jn['test'](_0x4e0f08)&&(_0x4e0f08=this['registry']['prefix']+_0x4e0f08),this['type']!=='script'&&_0x344b14['hash']){const _0x5939ae=_0x4e0f08['indexOf']('?')!==-(0x43*0x2a+-0x262b*0x1+-0x7*-0x3e2)?'&':'?';_0x4e0f08+=_0x5939ae+'t='+_0x344b14['hash'];}return _0x4e0f08;}['getAbsolut'+'eUrl'](_0x975ce1){if(_0x975ce1['startsWith']('blob:')||_0x975ce1['startsWith']('data:'))return _0x975ce1;const _0x130aaf=xe['getDirecto'+'ry'](this['file']['url']);return xe['join'](_0x130aaf,_0x975ce1);}['getLocaliz'+'edAssetId'](_0x1f1248){return _0x1f1248=Fv(_0x1f1248,this['_i18n']),this['_i18n'][_0x1f1248]||null;}['addLocaliz'+'edAssetId'](_0x2a55be,_0x37079a){this['_i18n'][_0x2a55be]=_0x37079a,this['fire']('add:locali'+'zed',_0x2a55be,_0x37079a);}['removeLoca'+'lizedAsset'+'Id'](_0x42f4ca){const _0x1725a4=this['_i18n'][_0x42f4ca];_0x1725a4&&(delete this['_i18n'][_0x42f4ca],this['fire']('remove:loc'+'alized',_0x42f4ca,_0x1725a4));}['ready'](_0x3e7b9d,_0x4a503d){_0x4a503d=_0x4a503d||this,this['loaded']?_0x3e7b9d['call'](_0x4a503d,this):this['once']('load',_0x58b7e1=>{_0x3e7b9d['call'](_0x4a503d,_0x58b7e1);});}['reload'](){this['loaded']&&(this['loaded']=!(-0xfbe+0x79d*-0x5+0x35d0),this['registry']['load'](this));}['unload'](){if(!this['loaded']&&this['_resources']['length']===0x17*-0x4e+0x407*-0x1+-0xb09*-0x1)return;this['fire']('unload',this),this['registry']['fire']('unload:'+this['id'],this);const _0x59c3e3=this['_resources'];this['urlObject']&&(URL['revokeObje'+'ctURL'](this['urlObject']),this['urlObject']=null),this['resources']=[],this['loaded']=!(0x3*-0x1bf+0x589+-0x4b),this['file']&&this['registry']['_loader']['clearCache'](this['getFileUrl'](),this['type']);for(let _0x169798=0x13b5+0x1bae+-0x2f63;_0x169798<_0x59c3e3['length'];++_0x169798){const _0x277cce=_0x59c3e3[_0x169798];_0x277cce&&_0x277cce['destroy']&&_0x277cce['destroy']();}}static['fetchArray'+'Buffer'](_0x18b1c7,_0x3732c2,_0x2ca9a2,_0xceffb5=0x11*-0x82+-0x17*0x5+0x915){var _0x1f09b7;(_0x1f09b7=_0x2ca9a2==null?void(0x7ad+0x2*-0x826+-0x89f*-0x1):_0x2ca9a2['file'])!=null&&_0x1f09b7['contents']?setTimeout(()=>{_0x3732c2(null,_0x2ca9a2['file']['contents']);}):ot['get'](_0x18b1c7,{'cache':!(0x267*-0x5+0xff4+0x3f1*-0x1),'responseType':'arraybuffe'+'r','retry':_0xceffb5>0x2*0x9e9+-0xfb7+-0x41b,'maxRetries':_0xceffb5},_0x3732c2);}}h(pe,'EVENT_LOAD','load'),h(pe,'EVENT_UNLO'+'AD','unload'),h(pe,'EVENT_REMO'+'VE','remove'),h(pe,'EVENT_ERRO'+'R','error'),h(pe,'EVENT_CHAN'+'GE','change'),h(pe,'EVENT_PROG'+'RESS','progress'),h(pe,'EVENT_ADDL'+'OCALIZED','add:locali'+'zed'),h(pe,'EVENT_REMO'+'VELOCALIZE'+'D','remove:loc'+'alized');class kC{constructor(_0x2f7107=null){h(this,'_index',{}),h(this,'_key'),this['_key']=_0x2f7107;}['addItem'](_0x4635be){const _0x3bee7a=_0x4635be['tags']['_list'];for(const _0x40a2e6 of _0x3bee7a)this['add'](_0x40a2e6,_0x4635be);}['removeItem'](_0x583b91){const _0x409045=_0x583b91['tags']['_list'];for(const _0x3f968e of _0x409045)this['remove'](_0x3f968e,_0x583b91);}['add'](_0x4da96f,_0x168018){this['_index'][_0x4da96f]&&this['_index'][_0x4da96f]['list']['indexOf'](_0x168018)!==-(0x2*-0x8f9+-0x7c6+0x19b9)||(this['_index'][_0x4da96f]||(this['_index'][_0x4da96f]={'list':[]},this['_key']&&(this['_index'][_0x4da96f]['keys']={})),this['_index'][_0x4da96f]['list']['push'](_0x168018),this['_key']&&(this['_index'][_0x4da96f]['keys'][_0x168018[this['_key']]]=_0x168018));}['remove'](_0x3e3d9a,_0x38be29){if(!this['_index'][_0x3e3d9a]||this['_key']&&!this['_index'][_0x3e3d9a]['keys'][_0x38be29[this['_key']]])return;const _0x50944a=this['_index'][_0x3e3d9a]['list']['indexOf'](_0x38be29);_0x50944a!==-(-0xbea+-0x1b51+0x6*0x68a)&&(this['_index'][_0x3e3d9a]['list']['splice'](_0x50944a,0x128f*-0x1+0x957+0x939*0x1),this['_key']&&delete this['_index'][_0x3e3d9a]['keys'][_0x38be29[this['_key']]],this['_index'][_0x3e3d9a]['list']['length']===-0xb*-0x349+-0x2664+0x241&&delete this['_index'][_0x3e3d9a]);}['find'](_0x349ad7){const _0x5da3c7={},_0x48dfff=[];let _0x16e002,_0xb2b351,_0x33c457,_0x5a5c4a,_0x397473;const _0x2694c3=(_0x51cd9b,_0x542b75)=>this['_index'][_0x51cd9b]['list']['length']-this['_index'][_0x542b75]['list']['length'];for(let _0x41e069=-0xf7e+0x13e*-0x1+-0xe*-0x132;_0x41e069<_0x349ad7['length'];_0x41e069++){if(_0xb2b351=_0x349ad7[_0x41e069],_0xb2b351 instanceof Array){if(_0xb2b351['length']===-0x2*0x977+-0x18b2+0x2ba0)continue;if(_0xb2b351['length']===-0x1*0x8f+-0x22e*-0x2+-0x36*0x12)_0xb2b351=_0xb2b351[-0x1cf*-0x15+-0x57d+-0x207e];else{_0x397473=!(0x38*0xd+-0xd21*-0x1+-0xff8);for(let _0x59f91b=0xea3+-0xa00+-0x4a3*0x1;_0x59f91b<_0xb2b351['length'];_0x59f91b++)if(!this['_index'][_0xb2b351[_0x59f91b]]){_0x397473=!(0xcbf+0x25c2+0x3281*-0x1);break;}if(_0x397473)continue;_0x33c457=_0xb2b351['slice'](-0xd70+-0x2702+-0x3472*-0x1)['sort'](_0x2694c3),_0x5a5c4a=_0x33c457['slice'](0x49*-0x10+-0x18d*0xb+0x15a0),_0x5a5c4a['length']===0xd88+-0x7ee*-0x1+-0x1575&&(_0x5a5c4a=_0x5a5c4a[-0x2*-0x9a9+-0x1192+-0x38*0x8]);for(let _0x23e4ba=-0x2433+-0xd6*-0x26+-0x5*-0xe3;_0x23e4ba<this['_index'][_0x33c457[0x10c7*0x1+-0x5f3*-0x2+-0x3*0x98f]]['list']['length'];_0x23e4ba++)_0x16e002=this['_index'][_0x33c457[0x2631+-0x1e*0x8c+-0x1*0x15c9]]['list'][_0x23e4ba],(this['_key']?!_0x5da3c7[_0x16e002[this['_key']]]:_0x48dfff['indexOf'](_0x16e002)===-(-0x1*0x15f+-0x1b*0x2e+-0x2*-0x31d))&&_0x16e002['tags']['has'](_0x5a5c4a)&&(this['_key']&&(_0x5da3c7[_0x16e002[this['_key']]]=!(-0xd*-0x24a+-0x131f+-0xaa3)),_0x48dfff['push'](_0x16e002));continue;}}if(_0xb2b351&&typeof _0xb2b351=='string'&&this['_index'][_0xb2b351]){for(let _0x198c89=0x14cc+0x154c+0x1c1*-0x18;_0x198c89<this['_index'][_0xb2b351]['list']['length'];_0x198c89++)_0x16e002=this['_index'][_0xb2b351]['list'][_0x198c89],this['_key']?_0x5da3c7[_0x16e002[this['_key']]]||(_0x5da3c7[_0x16e002[this['_key']]]=!(-0x1616+0x2493+-0xe7d),_0x48dfff['push'](_0x16e002)):_0x48dfff['indexOf'](_0x16e002)===-(-0x1*0xe4b+-0x2*-0xf4f+-0x1052)&&_0x48dfff['push'](_0x16e002);}}return _0x48dfff;}}class mn extends me{constructor(_0x4cd1fa){super(),h(this,'_assets',new Set()),h(this,'_loader'),h(this,'_idToAsset',new Map()),h(this,'_urlToAsse'+'t',new Map()),h(this,'_nameToAss'+'et',new Map()),h(this,'_tags',new kC('id')),h(this,'prefix',null),h(this,'bundles',null),this['_loader']=_0x4cd1fa;}['list'](_0x3c80b5={}){const _0x404de1=Array['from'](this['_assets']);return _0x3c80b5['preload']!==void(-0x1d1a+-0x5*-0x2e+0x1c34)?_0x404de1['filter'](_0x564f35=>_0x564f35['preload']===_0x3c80b5['preload']):_0x404de1;}['add'](_0x4357d4){var _0x49f571,_0x3eb69d;this['_assets']['has'](_0x4357d4)||(this['_assets']['add'](_0x4357d4),this['_idToAsset']['set'](_0x4357d4['id'],_0x4357d4),(_0x49f571=_0x4357d4['file'])!=null&&_0x49f571['url']&&this['_urlToAsse'+'t']['set'](_0x4357d4['file']['url'],_0x4357d4),this['_nameToAss'+'et']['has'](_0x4357d4['name'])||this['_nameToAss'+'et']['set'](_0x4357d4['name'],new Set()),this['_nameToAss'+'et']['get'](_0x4357d4['name'])['add'](_0x4357d4),_0x4357d4['on']('name',this['_onNameCha'+'nge'],this),_0x4357d4['registry']=this,this['_tags']['addItem'](_0x4357d4),_0x4357d4['tags']['on']('add',this['_onTagAdd'],this),_0x4357d4['tags']['on']('remove',this['_onTagRemo'+'ve'],this),this['fire']('add',_0x4357d4),this['fire']('add:'+_0x4357d4['id'],_0x4357d4),(_0x3eb69d=_0x4357d4['file'])!=null&&_0x3eb69d['url']&&this['fire']('add:url:'+_0x4357d4['file']['url'],_0x4357d4),_0x4357d4['preload']&&this['load'](_0x4357d4));}['remove'](_0x2b7b34){var _0x3b7c1b,_0x2ffd82;if(!this['_assets']['has'](_0x2b7b34))return!(-0x847*-0x1+0x1*0x9b7+-0x11fd);if(this['_assets']['delete'](_0x2b7b34),this['_idToAsset']['delete'](_0x2b7b34['id']),(_0x3b7c1b=_0x2b7b34['file'])!=null&&_0x3b7c1b['url']&&this['_urlToAsse'+'t']['delete'](_0x2b7b34['file']['url']),_0x2b7b34['off']('name',this['_onNameCha'+'nge'],this),this['_nameToAss'+'et']['has'](_0x2b7b34['name'])){const _0x890e3f=this['_nameToAss'+'et']['get'](_0x2b7b34['name']);_0x890e3f['delete'](_0x2b7b34),_0x890e3f['size']===0x1014+-0x6*-0x2e9+0x1*-0x218a&&this['_nameToAss'+'et']['delete'](_0x2b7b34['name']);}return this['_tags']['removeItem'](_0x2b7b34),_0x2b7b34['tags']['off']('add',this['_onTagAdd'],this),_0x2b7b34['tags']['off']('remove',this['_onTagRemo'+'ve'],this),_0x2b7b34['fire']('remove',_0x2b7b34),this['fire']('remove',_0x2b7b34),this['fire']('remove:'+_0x2b7b34['id'],_0x2b7b34),(_0x2ffd82=_0x2b7b34['file'])!=null&&_0x2ffd82['url']&&this['fire']('remove:url'+':'+_0x2b7b34['file']['url'],_0x2b7b34),!(-0x902+0xc74+-0x372);}['get'](_0x3f14cc){return this['_idToAsset']['get'](Number(_0x3f14cc));}['getByUrl'](_0x40beba){return this['_urlToAsse'+'t']['get'](_0x40beba);}['load'](_0xc11072,_0x232245){if((_0xc11072['loading']||_0xc11072['loaded'])&&!(_0x232245!=null&&_0x232245['force']))return;const _0x3c9544=_0xc11072['file'],_0x1732d0=()=>{this['fire']('load',_0xc11072),this['fire']('load:'+_0xc11072['id'],_0xc11072),_0x3c9544&&_0x3c9544['url']&&this['fire']('load:url:'+_0x3c9544['url'],_0xc11072),_0xc11072['fire']('load',_0xc11072);},_0x3016ed=_0x1c2168=>{if(_0x1c2168 instanceof Array?_0xc11072['resources']=_0x1c2168:_0xc11072['resource']=_0x1c2168,this['_loader']['patch'](_0xc11072,this),_0xc11072['type']==='bundle'){const _0x5809ee=_0xc11072['data']['assets'];for(let _0x210540=-0x1*-0xc95+0xdc5+-0x1*0x1a5a;_0x210540<_0x5809ee['length'];_0x210540++){const _0x34af7e=this['_idToAsset']['get'](_0x5809ee[_0x210540]);_0x34af7e&&!_0x34af7e['loaded']&&this['load'](_0x34af7e,{'force':!(0xb*-0x1cc+-0x112d+-0x31*-0xc1)});}_0xc11072['resource']['loaded']?_0x1732d0():(this['fire']('load:start',_0xc11072),this['fire']('load:start'+':'+_0xc11072['id'],_0xc11072),_0x3c9544&&_0x3c9544['url']&&this['fire']('load:start'+':url:'+_0x3c9544['url'],_0xc11072),_0xc11072['fire']('load:start',_0xc11072),_0xc11072['resource']['on']('load',_0x1732d0));}else _0x1732d0();},_0x40ab12=(_0x37c92a,_0x5686da,_0x426813)=>{if(_0xc11072['loaded']=!(-0x18*0x13+0x485*0x5+-0x14d1),_0xc11072['loading']=!(-0x633+-0xaa0+-0x86a*-0x2),_0x37c92a)this['fire']('error',_0x37c92a,_0xc11072),this['fire']('error:'+_0xc11072['id'],_0x37c92a,_0xc11072),_0xc11072['fire']('error',_0x37c92a,_0xc11072);else{if(_0xc11072['type']==='script'){const _0x39430e=this['_loader']['getHandler']('script');_0x39430e['_cache'][_0xc11072['id']]&&_0x39430e['_cache'][_0xc11072['id']]['parentNode']===document['head']&&document['head']['removeChil'+'d'](_0x39430e['_cache'][_0xc11072['id']]),_0x39430e['_cache'][_0xc11072['id']]=_0x426813;}_0x3016ed(_0x5686da);}};if(_0x3c9544||_0xc11072['type']==='cubemap'){this['fire']('load:start',_0xc11072),this['fire']('load:'+_0xc11072['id']+':start',_0xc11072),_0xc11072['loading']=!(-0x23*0x9+0x1507+0x1c*-0xb5);const _0x22563a=_0xc11072['getFileUrl']();if(_0xc11072['type']==='bundle'){const _0x212de8=_0xc11072['data']['assets'];for(let _0x408118=-0x1ca9+-0x2cc*0xb+-0x1cd*-0x21;_0x408118<_0x212de8['length'];_0x408118++){const _0x5c0fec=this['_idToAsset']['get'](_0x212de8[_0x408118]);_0x5c0fec&&(_0x5c0fec['loaded']||_0x5c0fec['resource']||_0x5c0fec['loading']||(_0x5c0fec['loading']=!(-0x18bc+0x71*-0x2+0x199e)));}}this['_loader']['load'](_0x22563a,_0xc11072['type'],_0x40ab12,_0xc11072,_0x232245);}else{const _0x30662b=this['_loader']['open'](_0xc11072['type'],_0xc11072['data']);_0xc11072['loaded']=!(-0x6dc+0x1516+-0x3*0x4be),_0x3016ed(_0x30662b);}}['reloadInde'+'x'](_0x558a87,_0x4f6bff,_0x288273){const _0x7655ee=(_0x50a237,_0x2fe92c,_0xf1a666)=>{_0x4f6bff['loaded']=!(0x34*0x1+-0x848+0x814),_0x4f6bff['loading']=!(-0x49*0x4c+-0x8c7+-0x1*-0x1e74);};return this['_loader']['load'](_0x558a87,_0x4f6bff['type'],_0x7655ee,_0x4f6bff,_0x288273),_0x4f6bff;}['loadFromUr'+'l'](_0x59a412,_0x2a79f3,_0x1b2db4){this['loadFromUr'+'lAndFilena'+'me'](_0x59a412,null,_0x2a79f3,_0x1b2db4);}['loadFromUr'+'lAndFilena'+'me'](_0x1caec5,_0x42dc4b,_0x4a38ab,_0x134175){const _0x3507d1=xe['getBasenam'+'e'](_0x42dc4b||_0x1caec5),_0x284f80={'filename':_0x42dc4b||_0x3507d1,'url':_0x1caec5};let _0x5b1f9b=this['getByUrl'](_0x1caec5);if(!_0x5b1f9b)_0x5b1f9b=new pe(_0x3507d1,_0x4a38ab,_0x284f80),this['add'](_0x5b1f9b);else{if(_0x5b1f9b['loaded']){_0x134175(_0x5b1f9b['loadFromUr'+'lError']||null,_0x5b1f9b);return;}}const _0xb9dca6=_0x5d8b46=>{_0x5d8b46['once']('load',_0x4b5080=>{_0x4a38ab==='material'?this['_loadTextu'+'res'](_0x4b5080,(_0x5a69a1,_0x454e8f)=>{_0x134175(_0x5a69a1,_0x4b5080);}):_0x134175(null,_0x4b5080);}),_0x5d8b46['once']('error',_0x3f95d4=>{_0x3f95d4&&(this['loadFromUr'+'lError']=_0x3f95d4),_0x134175(_0x3f95d4,_0x5d8b46);}),this['load'](_0x5d8b46);};_0x5b1f9b['resource']?_0x134175(null,_0x5b1f9b):_0x4a38ab==='model'?this['_loadModel'](_0x5b1f9b,_0xb9dca6):_0xb9dca6(_0x5b1f9b);}['_loadModel'](_0xf1d78,_0x455173){const _0x648f6a=_0xf1d78['getFileUrl'](),_0xf215db=xe['getExtensi'+'on'](_0x648f6a);if(_0xf215db==='.json'||_0xf215db==='.glb'){const _0x287078=xe['getDirecto'+'ry'](_0x648f6a),_0x2dd0d4=xe['getBasenam'+'e'](_0x648f6a),_0xd6d2ee=xe['join'](_0x287078,_0x2dd0d4['replace'](_0xf215db,'.mapping.j'+'son'));this['_loader']['load'](_0xd6d2ee,'json',(_0x4e5c0e,_0x1799f4)=>{_0x4e5c0e?(_0xf1d78['data']={'mapping':[]},_0x455173(_0xf1d78)):this['_loadMater'+'ials'](_0xf1d78,_0x1799f4,(_0x29d021,_0x378d0c)=>{_0xf1d78['data']=_0x1799f4,_0x455173(_0xf1d78);});});}else _0x455173(_0xf1d78);}['_loadMater'+'ials'](_0x3046e4,_0x3e2d62,_0x50ce66){const _0x25ff90=[];let _0x58157f=-0xd*0x2f5+0x4*-0x232+0x9d*0x4d;const _0x3e7d50=(_0x5d9a9a,_0x4017cc)=>{this['_loadTextu'+'res'](_0x4017cc,(_0x361135,_0x241085)=>{_0x25ff90['push'](_0x4017cc),_0x25ff90['length']===_0x58157f&&_0x50ce66(null,_0x25ff90);});};for(let _0x18095a=0x179d+0x7d4+-0x1f71;_0x18095a<_0x3e2d62['mapping']['length'];_0x18095a++){const _0x12879d=_0x3e2d62['mapping'][_0x18095a]['path'];if(_0x12879d){_0x58157f++;const _0x139175=_0x3046e4['getAbsolut'+'eUrl'](_0x12879d);this['loadFromUr'+'l'](_0x139175,'material',_0x3e7d50);}}_0x58157f===0xbf5*-0x1+0x173f*0x1+-0xb4a*0x1&&_0x50ce66(null,_0x25ff90);}['_loadTextu'+'res'](_0x7ed541,_0x45de51){const _0x4e88f2=[];let _0x2a49f9=-0x22*0x35+-0x25c7+0x2cd1;const _0x1ea358=_0x7ed541['data'];if(_0x1ea358['mappingFor'+'mat']!=='path'){w['warn']('Skipping:\x20'+_0x7ed541['name']+(',\x20material'+'\x20files\x20mus'+'t\x20be\x20mappi'+'ngFormat:\x20'+'\x22path\x22\x20to\x20'+'be\x20loaded\x20'+'from\x20URL')),_0x45de51(null,_0x4e88f2);return;}const _0x2dbab5=(_0x24b78c,_0x38cda3)=>{_0x24b78c&&console['error'](_0x24b78c),_0x4e88f2['push'](_0x38cda3),_0x4e88f2['length']===_0x2a49f9&&_0x45de51(null,_0x4e88f2);},_0x94f5ea=Cd;for(let _0x30b34e=0x2*0x15+-0x22f+0x205;_0x30b34e<_0x94f5ea['length'];_0x30b34e++){const _0x15f8c3=_0x1ea358[_0x94f5ea[_0x30b34e]];if(_0x15f8c3&&typeof _0x15f8c3=='string'){_0x2a49f9++;const _0x458c0f=_0x7ed541['getAbsolut'+'eUrl'](_0x15f8c3);this['loadFromUr'+'l'](_0x458c0f,'texture',_0x2dbab5);}}_0x2a49f9===-0x2386*0x1+0x169b+0x1*0xceb&&_0x45de51(null,_0x4e88f2);}['_onTagAdd'](_0x4e0bcb,_0x37634a){this['_tags']['add'](_0x4e0bcb,_0x37634a);}['_onTagRemo'+'ve'](_0x1ba5c1,_0x246e6f){this['_tags']['remove'](_0x1ba5c1,_0x246e6f);}['_onNameCha'+'nge'](_0x485767,_0x400df5,_0x25249f){if(this['_nameToAss'+'et']['has'](_0x25249f)){const _0x2268e3=this['_nameToAss'+'et']['get'](_0x25249f);_0x2268e3['delete'](_0x485767),_0x2268e3['size']===0x1*-0x30b+0x1*0x60d+-0x9a*0x5&&this['_nameToAss'+'et']['delete'](_0x25249f);}this['_nameToAss'+'et']['has'](_0x485767['name'])||this['_nameToAss'+'et']['set'](_0x485767['name'],new Set()),this['_nameToAss'+'et']['get'](_0x485767['name'])['add'](_0x485767);}['findByTag'](..._0x7c8e28){return this['_tags']['find'](_0x7c8e28);}['filter'](_0x2f4599){return Array['from'](this['_assets'])['filter'](_0x1ccd03=>_0x2f4599(_0x1ccd03));}['find'](_0x11d2cb,_0x2f7355){const _0x1e49d7=this['_nameToAss'+'et']['get'](_0x11d2cb);if(!_0x1e49d7)return null;for(const _0x3472f0 of _0x1e49d7)if(!_0x2f7355||_0x3472f0['type']===_0x2f7355)return _0x3472f0;return null;}['findAll'](_0x3cc7d7,_0x598d36){const _0x58dd51=this['_nameToAss'+'et']['get'](_0x3cc7d7);if(!_0x58dd51)return[];const _0x2c4e1b=Array['from'](_0x58dd51);return _0x598d36?_0x2c4e1b['filter'](_0x3cdf38=>_0x3cdf38['type']===_0x598d36):_0x2c4e1b;}}h(mn,'EVENT_LOAD','load'),h(mn,'EVENT_ADD','add'),h(mn,'EVENT_REMO'+'VE','remove'),h(mn,'EVENT_ERRO'+'R','error');class UC{constructor(_0x35f8db){h(this,'_idToBundl'+'e',new Map()),h(this,'_assetToBu'+'ndles',new Map()),h(this,'_urlsToBun'+'dles',new Map()),h(this,'_fileReque'+'sts',new Map()),(this['_assets']=_0x35f8db,this['_assets']['bundles']=this,this['_assets']['on']('add',this['_onAssetAd'+'d'],this),this['_assets']['on']('remove',this['_onAssetRe'+'move'],this));}['_onAssetAd'+'d'](_0x1ab28e){if(_0x1ab28e['type']==='bundle'){this['_idToBundl'+'e']['set'](_0x1ab28e['id'],_0x1ab28e),this['_assets']['on']('load:start'+':'+_0x1ab28e['id'],this['_onBundleL'+'oadStart'],this),this['_assets']['on']('load:'+_0x1ab28e['id'],this['_onBundleL'+'oad'],this),this['_assets']['on']('error:'+_0x1ab28e['id'],this['_onBundleE'+'rror'],this);const _0x421c1e=_0x1ab28e['data']['assets'];for(let _0x4059c7=-0x2a5+0xfe4+-0xd3f;_0x4059c7<_0x421c1e['length'];_0x4059c7++)this['_indexAsse'+'tInBundle'](_0x421c1e[_0x4059c7],_0x1ab28e);}else this['_assetToBu'+'ndles']['has'](_0x1ab28e['id'])&&this['_indexAsse'+'tFileUrls'](_0x1ab28e);}['_unbindAss'+'etEvents'](_0x28950b){this['_assets']['off']('load:start'+':'+_0x28950b,this['_onBundleL'+'oadStart'],this),this['_assets']['off']('load:'+_0x28950b,this['_onBundleL'+'oad'],this),this['_assets']['off']('error:'+_0x28950b,this['_onBundleE'+'rror'],this);}['_indexAsse'+'tInBundle'](_0x265a99,_0x2c5232){let _0x2d2ea6=this['_assetToBu'+'ndles']['get'](_0x265a99);_0x2d2ea6||(_0x2d2ea6=new Set(),this['_assetToBu'+'ndles']['set'](_0x265a99,_0x2d2ea6)),_0x2d2ea6['add'](_0x2c5232);const _0x12c19e=this['_assets']['get'](_0x265a99);_0x12c19e&&this['_indexAsse'+'tFileUrls'](_0x12c19e);}['_indexAsse'+'tFileUrls'](_0x249d2b){const _0x83bedc=this['_getAssetF'+'ileUrls'](_0x249d2b);if(_0x83bedc)for(let _0x489b46=0x3e6+0x13f6+-0x6*0x3fa;_0x489b46<_0x83bedc['length'];_0x489b46++){const _0x3ca96c=this['_assetToBu'+'ndles']['get'](_0x249d2b['id']);_0x3ca96c&&this['_urlsToBun'+'dles']['set'](_0x83bedc[_0x489b46],_0x3ca96c);}}['_getAssetF'+'ileUrls'](_0x3c9ca5){let _0x142915=_0x3c9ca5['getFileUrl']();if(!_0x142915)return null;_0x142915=_0x142915['split']('?')[-0x1331+0x2*-0x5ba+-0x20b*-0xf];const _0x1aacdf=[_0x142915];if(_0x3c9ca5['type']==='font'){const _0x426c62=_0x3c9ca5['data']['info']['maps']['length'];for(let _0x42b925=0x1941+-0x26be+0xd7e;_0x42b925<_0x426c62;_0x42b925++)_0x1aacdf['push'](_0x142915['replace']('.png',_0x42b925+'.png'));}return _0x1aacdf;}['_onAssetRe'+'move'](_0x2829a3){if(_0x2829a3['type']==='bundle'){this['_idToBundl'+'e']['delete'](_0x2829a3['id']),this['_unbindAss'+'etEvents'](_0x2829a3['id']);const _0x43e12b=_0x2829a3['data']['assets'];for(let _0x58a916=0x1a*0x40+0x15a5+-0x1c25;_0x58a916<_0x43e12b['length'];_0x58a916++){const _0x27afb5=this['_assetToBu'+'ndles']['get'](_0x43e12b[_0x58a916]);if(_0x27afb5&&(_0x27afb5['delete'](_0x2829a3),_0x27afb5['size']===-0x589+0x4*0x944+0x1f87*-0x1)){this['_assetToBu'+'ndles']['delete'](_0x43e12b[_0x58a916]);for(const [_0x1e2ee1,_0x1bccc5]of this['_urlsToBun'+'dles'])_0x1bccc5===_0x27afb5&&this['_urlsToBun'+'dles']['delete'](_0x1e2ee1);}}this['_onBundleE'+'rror']('Bundle\x20'+_0x2829a3['id']+('\x20was\x20remov'+'ed'));}else{if(!this['_assetToBu'+'ndles']['get'](_0x2829a3['id']))return;this['_assetToBu'+'ndles']['delete'](_0x2829a3['id']);const _0x4bb764=this['_getAssetF'+'ileUrls'](_0x2829a3);if(!_0x4bb764)return;for(let _0x5b96cc=-0x260d+0x9a+0x2573;_0x5b96cc<_0x4bb764['length'];_0x5b96cc++)this['_urlsToBun'+'dles']['delete'](_0x4bb764[_0x5b96cc]);}}['_onBundleL'+'oadStart'](_0x283192){_0x283192['resource']['on']('add',(_0xaeddfd,_0x4c0f24)=>{const _0x1ba4ba=this['_fileReque'+'sts']['get'](_0xaeddfd);if(_0x1ba4ba){for(let _0x5afee0=0xb7f*-0x3+-0x1ce0+0x3f5d;_0x5afee0<_0x1ba4ba['length'];_0x5afee0++)_0x1ba4ba[_0x5afee0](null,_0x4c0f24);this['_fileReque'+'sts']['delete'](_0xaeddfd);}});}['_onBundleL'+'oad'](_0x17e305){if(!_0x17e305['resource']){this['_onBundleE'+'rror']('Bundle\x20'+_0x17e305['id']+('\x20failed\x20to'+'\x20load'));return;}if(this['_fileReque'+'sts'])for(const [_0x36ed07,_0x2b10a9]of this['_fileReque'+'sts']){const _0x5ef2b9=this['_urlsToBun'+'dles']['get'](_0x36ed07);if(!_0x5ef2b9||!_0x5ef2b9['has'](_0x17e305))continue;const _0x3d712b=decodeURIComponent(_0x36ed07);let _0x53b96b,_0x585682;if(_0x17e305['resource']['has'](_0x3d712b))_0x585682=_0x17e305['resource']['get'](_0x3d712b);else{if(_0x17e305['resource']['loaded'])_0x53b96b='Bundle\x20'+_0x17e305['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x36ed07;else continue;}for(let _0x35329b=-0x3*-0x3b9+-0xa4f+0x2c*-0x5;_0x35329b<_0x2b10a9['length'];_0x35329b++)_0x2b10a9[_0x35329b](_0x53b96b,_0x53b96b||_0x585682);this['_fileReque'+'sts']['delete'](_0x36ed07);}}['_onBundleE'+'rror'](_0x517ef8){for(const [_0x43d956,_0x58cf59]of this['_fileReque'+'sts'])if(!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x43d956)){for(let _0xfc4cf6=0x8b6+0x14*0x196+-0x286e;_0xfc4cf6<_0x58cf59['length'];_0xfc4cf6++)_0x58cf59[_0xfc4cf6](_0x517ef8);this['_fileReque'+'sts']['delete'](_0x43d956);}}['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x520b94){const _0x1a692d=this['_urlsToBun'+'dles']['get'](_0x520b94);if(!_0x1a692d)return null;let _0x1d1425=null;for(const _0x3c9151 of _0x1a692d){if(_0x3c9151['loaded']&&_0x3c9151['resource'])return _0x3c9151;_0x3c9151['loading']&&(_0x1d1425=_0x3c9151);}return _0x1d1425;}['listBundle'+'sForAsset'](_0x5ce096){const _0x3dcd97=this['_assetToBu'+'ndles']['get'](_0x5ce096['id']);return _0x3dcd97?Array['from'](_0x3dcd97):null;}['list'](){return Array['from'](this['_idToBundl'+'e']['values']());}['hasUrl'](_0x593e50){return this['_urlsToBun'+'dles']['has'](_0x593e50);}['urlIsLoade'+'dOrLoading'](_0x1ae8e4){return!!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x1ae8e4);}['loadUrl'](_0x1b842f,_0x294b14){const _0x44c27f=this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x1b842f);if(!_0x44c27f){_0x294b14('URL\x20'+_0x1b842f+('\x20not\x20found'+'\x20in\x20any\x20bu'+'ndles'));return;}if(_0x44c27f['loaded']){const _0x481b94=decodeURIComponent(_0x1b842f);if(_0x44c27f['resource']['has'](_0x481b94)){_0x294b14(null,_0x44c27f['resource']['get'](_0x481b94));return;}else{if(_0x44c27f['resource']['loaded']){_0x294b14('Bundle\x20'+_0x44c27f['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x1b842f);return;}}}let _0x5de34b=this['_fileReque'+'sts']['get'](_0x1b842f);_0x5de34b||(_0x5de34b=[],this['_fileReque'+'sts']['set'](_0x1b842f,_0x5de34b)),_0x5de34b['push'](_0x294b14);}['destroy'](){this['_assets']['off']('add',this['_onAssetAd'+'d'],this),this['_assets']['off']('remove',this['_onAssetRe'+'move'],this);for(const _0x3e2259 of this['_idToBundl'+'e']['keys']())this['_unbindAss'+'etEvents'](_0x3e2259);this['_assets']=null,this['_idToBundl'+'e']['clear'](),this['_idToBundl'+'e']=null,this['_assetToBu'+'ndles']['clear'](),this['_assetToBu'+'ndles']=null,this['_urlsToBun'+'dles']['clear'](),this['_urlsToBun'+'dles']=null,this['_fileReque'+'sts']['clear'](),this['_fileReque'+'sts']=null;}}class BC extends me{constructor(){super(),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'joint'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'zone'),this['list']=[];}['add'](_0x1bf7ef){const _0x5237ae=_0x1bf7ef['id'];if(this[_0x5237ae])throw new Error('ComponentS'+'ystem\x20name'+'\x20\x27'+_0x5237ae+('\x27\x20already\x20'+'registered'+'\x20or\x20not\x20al'+'lowed'));this[_0x5237ae]=_0x1bf7ef,this['list']['push'](_0x1bf7ef);}['remove'](_0x1c17bb){const _0x26009a=_0x1c17bb['id'];if(!this[_0x26009a])throw new Error('No\x20Compone'+'ntSystem\x20n'+'amed\x20\x27'+_0x26009a+('\x27\x20register'+'ed'));delete this[_0x26009a];const _0x3ac8f4=this['list']['indexOf'](this[_0x26009a]);_0x3ac8f4!==-(-0x1902+0x1ada+-0x1d7*0x1)&&this['list']['splice'](_0x3ac8f4,0x2370+-0x1d*0x53+-0x1a08);}['destroy'](){this['off']();for(let _0x5dd8a5=-0x242f*0x1+-0x1d41+0x4170;_0x5dd8a5<this['list']['length'];_0x5dd8a5++)this['list'][_0x5dd8a5]['destroy']();}}class gu extends me{constructor(){super(...arguments),h(this,'_index',new Map()),h(this,'_loaded',!(0x1bcb+0x3*-0x1c1+-0x49*0x4f));}['addFile'](_0x20947a,_0x50f60c){this['_index']['has'](_0x20947a)||(this['_index']['set'](_0x20947a,_0x50f60c),this['fire']('add',_0x20947a,_0x50f60c));}['has'](_0x3e0b5c){return this['_index']['has'](_0x3e0b5c);}['get'](_0x47bc07){return this['_index']['get'](_0x47bc07)||null;}['destroy'](){this['_index']['clear']();}set['loaded'](_0x61ac77){!_0x61ac77||this['_loaded']||(this['_loaded']=!(-0x1e4a+-0x1651*0x1+0x349b),this['fire']('load'));}get['loaded'](){return this['_loaded'];}}h(gu,'EVENT_ADD','add'),h(gu,'EVENT_LOAD','load');class zC extends me{constructor(_0x154558,_0x46abd2=''){super(),h(this,'headerSize',0x1dad+0x92f*0x2+0x1*-0x2e0b),h(this,'paddingSiz'+'e',-0x6f7*0x3+0x2b+0x16ba),h(this,'bytesRead',0x1cd8+0x1*0x1421+-0x6ff*0x7),h(this,'bytesRecei'+'ved',-0x1*0x1781+-0x1b93+0x1*0x3314),h(this,'headerRead',!(0x6bb*0x2+0x68b+-0x1400)),h(this,'reader',null),h(this,'data',new Uint8Array(-0x23ce+-0xf1*-0x27+-0xe9)),h(this,'decoder',null),h(this,'prefix',''),h(this,'fileName',''),h(this,'fileSize',-0x10*-0xe+0x9a5+0xa85*-0x1),h(this,'fileType',''),h(this,'ustarForma'+'t',''),(this['prefix']=_0x46abd2||'',this['reader']=_0x154558['body']['getReader'](),this['reader']['read']()['then'](_0x216d4f=>{this['pump'](_0x216d4f['done'],_0x216d4f['value']);})['catch'](_0x54b2fb=>{this['fire']('error',_0x54b2fb);}));}['pump'](_0x40043a,_0x81a35a){if(_0x40043a)return this['fire']('done'),null;this['bytesRecei'+'ved']+=_0x81a35a['byteLength'];const _0xc92253=new Uint8Array(this['data']['length']+_0x81a35a['length']);for(_0xc92253['set'](this['data']),_0xc92253['set'](_0x81a35a,this['data']['length']),this['data']=_0xc92253;this['readFile'](););return this['reader']['read']()['then'](_0x30dcfc=>{this['pump'](_0x30dcfc['done'],_0x30dcfc['value']);})['catch'](_0x2a7562=>{this['fire']('error',_0x2a7562);});}['readFile'](){if(!this['headerRead']&&this['bytesRecei'+'ved']>this['bytesRead']+this['headerSize']){this['headerRead']=!(0x1216*-0x2+0x2dd+-0x214f*-0x1);const _0x3e1b93=new DataView(this['data']['buffer'],this['bytesRead'],this['headerSize']);this['decoder']??(this['decoder']=new TextDecoder('windows-12'+'52'));const _0x388473=this['decoder']['decode'](_0x3e1b93);if(this['fileName']=_0x388473['substring'](-0x137a+0x66*0x5e+0x4e*-0x3b,0x2264+-0xae4+0x1d*-0xcc)['replace'](/\0/g,''),this['fileSize']=parseInt(_0x388473['substring'](-0x1e09+-0x2603*0x1+0x4488,-0x2256+0x15*-0x124+-0x3ad2*-0x1),0x11c6+0x1dcd+-0x2f8b),this['fileType']=_0x388473['substring'](-0x2f6*-0x9+0xa36*0x2+-0x272*0x13,0x15b6+-0xf06+-0x613),this['ustarForma'+'t']=_0x388473['substring'](-0x1b91+0x1bd1*0x1+0xc1,0x57*-0x69+0x1*0xcb3+0x1803),this['ustarForma'+'t']['indexOf']('ustar')!==-(-0x1d81+0x566*-0x3+-0x4e*-0x96)){const _0x3268db=_0x388473['substring'](-0xf1c+0x7*0xf1+0x9de,-0x99f*0x3+0x2*-0x656+0x4d5*0x9)['replace'](/\0/g,'');_0x3268db['length']>0xa61+0x17*0x71+0x248*-0x9&&(this['fileName']=_0x3268db['trim']()+this['fileName']['trim']());}this['bytesRead']+=0xcae+-0x8*0x349+0xf9a;}if(this['headerRead']){if(this['bytesRecei'+'ved']<this['bytesRead']+this['fileSize'])return!(0x47f+-0x23*0x11+-0x22b);if(this['fileType']===''||this['fileType']==='0'){const _0x2b43be=new DataView(this['data']['buffer'],this['bytesRead'],this['fileSize']),_0x43e6c7={'name':this['prefix']+this['fileName'],'size':this['fileSize'],'data':_0x2b43be};this['fire']('file',_0x43e6c7);}this['bytesRead']+=this['fileSize'],this['headerRead']=!(0x1c*-0x17+-0x2681+-0xb2*-0x3b);const _0x12af73=this['bytesRead']%this['paddingSiz'+'e'];return _0x12af73!==-0x27*-0xc9+0x4df+-0x4d*0x76&&(this['bytesRead']+=this['paddingSiz'+'e']-_0x12af73),!(-0x3*-0xabd+0x17f+0xa*-0x35f);}return!(0x2517+0xc7+-0x25dd);}}class Qe{constructor(_0x2d1f94,_0x2a2d1d){h(this,'handlerTyp'+'e',''),h(this,'_app'),h(this,'_maxRetrie'+'s',-0xc0b*0x3+0x1794*0x1+-0x77*-0x1b),(this['_app']=_0x2d1f94,this['handlerTyp'+'e']=_0x2a2d1d);}set['maxRetries'](_0x52f577){this['_maxRetrie'+'s']=_0x52f577;}get['maxRetries'](){return this['_maxRetrie'+'s'];}['load'](_0x5b991b,_0x32b26d,_0x3513ba){}['open'](_0x4ddad5,_0x16f65b,_0x666b6b){return _0x16f65b;}['patch'](_0x577507,_0x17f51c){}}class VC extends Qe{constructor(_0x110dda){super(_0x110dda,'bundle'),this['_assets']=_0x110dda['assets'];}['_fetchRetr'+'ies'](_0x582491,_0x181acb,_0x5536f6=-0x20a8+-0x73e+0x27e6){return new Promise((_0x37feb7,_0x10a040)=>{const _0x1d9f56=()=>{fetch(_0x582491,_0x181acb)['then'](_0x37feb7)['catch'](_0x2f79ce=>{_0x5536f6++,_0x5536f6<this['maxRetries']?(w['error']('Bundle\x20fai'+'led\x20to\x20loa'+'d\x20retrying'+'\x20(attempt\x20'+_0x5536f6),_0x1d9f56()):_0x10a040(_0x2f79ce);});};_0x1d9f56();});}['load'](_0x55af44,_0x41800d){typeof _0x55af44=='string'&&(_0x55af44={'load':_0x55af44,'original':_0x55af44}),this['_fetchRetr'+'ies'](_0x55af44['load'],{'mode':'cors'},this['maxRetries'])['then'](_0x534304=>{const _0x550ab3=new gu();_0x41800d(null,_0x550ab3);const _0x2b8915=new zC(_0x534304,this['_assets']['prefix']);_0x2b8915['on']('file',_0x11e6aa=>{_0x550ab3['addFile'](_0x11e6aa['name'],_0x11e6aa['data']);}),_0x2b8915['on']('done',()=>{_0x550ab3['loaded']=!(-0x13f4+-0xb9+0x14ad);}),_0x2b8915['on']('error',_0x212000=>{w['error'](_0x212000),_0x41800d(_0x212000);});})['catch'](_0x3513d5=>{w['error'](_0x3513d5),_0x41800d(_0x3513d5);});}['open'](_0x47b758,_0x4a30e5){return _0x4a30e5;}}class Cn{constructor(_0x4d76e8){this['_handlers']={},this['_requests']={},this['_cache']={},this['_app']=_0x4d76e8;}['addHandler'](_0x3aac04,_0xb98790){this['_handlers'][_0x3aac04]=_0xb98790,_0xb98790['_loader']=this;}['removeHand'+'ler'](_0x430d49){delete this['_handlers'][_0x430d49];}['getHandler'](_0x4e6de9){return this['_handlers'][_0x4e6de9];}static['makeKey'](_0x30e615,_0x309a3e){return _0x30e615+'-'+_0x309a3e;}['load'](_0xfa2144,_0x45bf6f,_0x14ccfc,_0xd06733,_0x3b6a1e){var _0x4fb9e7;const _0x49f120=this['_handlers'][_0x45bf6f];if(!_0x49f120){const _0x4b4ec9='No\x20resourc'+'e\x20handler\x20'+'for\x20asset\x20'+'type:\x20\x27'+_0x45bf6f+('\x27\x20when\x20loa'+'ding\x20[')+_0xfa2144+']';w['errorOnce'](_0x4b4ec9),_0x14ccfc(_0x4b4ec9);return;}if(!_0xfa2144){this['_loadNull'](_0x49f120,_0x14ccfc,_0xd06733);return;}const _0x46b558=Cn['makeKey'](_0xfa2144,_0x45bf6f);if(this['_requests'][_0x46b558])this['_requests'][_0x46b558]['push'](_0x14ccfc);else{this['_requests'][_0x46b558]=[_0x14ccfc];const _0x1e956f=this,_0x408b86=function(_0x5e48e6,_0x5d6d0f){if(_0x5e48e6){_0x1e956f['_onFailure'](_0x46b558,_0x5e48e6);return;}if(_0x5d6d0f['load']instanceof DataView){if(_0x49f120['openBinary']){if(!_0x1e956f['_requests'][_0x46b558])return;try{const _0x2bb339=_0x49f120['openBinary'](_0x5d6d0f['load']);_0x1e956f['_onSuccess'](_0x46b558,_0x2bb339);}catch(_0x22afd7){_0x1e956f['_onFailure'](_0x46b558,_0x22afd7);}return;}_0x5d6d0f['load']=URL['createObje'+'ctURL'](new Blob([_0x5d6d0f['load']])),_0xd06733&&(_0xd06733['urlObject']&&URL['revokeObje'+'ctURL'](_0xd06733['urlObject']),_0xd06733['urlObject']=_0x5d6d0f['load']);}_0x49f120['load'](_0x5d6d0f,(_0x1843e9,_0x5ada30,_0x5c1b08)=>{if(_0x1e956f['_requests'][_0x46b558]){if(_0x1843e9){_0x1e956f['_onFailure'](_0x46b558,_0x1843e9);return;}try{_0x1e956f['_onSuccess'](_0x46b558,_0x49f120['open'](_0x5d6d0f['original'],_0x5ada30,_0xd06733),_0x5c1b08);}catch(_0x44ab6f){_0x1e956f['_onFailure'](_0x46b558,_0x44ab6f);}}},_0xd06733);},_0x1b2e23=_0xfa2144['split']('?')[0x1f94+-0x21ab+-0x217*-0x1];if(this['_app']['enableBund'+'les']&&this['_app']['bundles']['hasUrl'](_0x1b2e23)&&!(_0x3b6a1e&&_0x3b6a1e['bundlesIgn'+'ore'])){if(!this['_app']['bundles']['urlIsLoade'+'dOrLoading'](_0x1b2e23)){const _0x1d5806=this['_app']['bundles']['listBundle'+'sForAsset'](_0xd06733);let _0x58544e;_0x3b6a1e&&_0x3b6a1e['bundlesFil'+'ter']&&(_0x58544e=_0x3b6a1e['bundlesFil'+'ter'](_0x1d5806)),_0x58544e||(_0x1d5806==null||_0x1d5806['sort']((_0x3ef76b,_0x38cb7d)=>_0x3ef76b['file']['size']-_0x38cb7d['file']['size']),_0x58544e=_0x1d5806==null?void(0x1b65+-0xecf+-0x12*0xb3):_0x1d5806[0x1cc7*-0x1+0x9e1+0x12e6]),_0x58544e&&((_0x4fb9e7=this['_app']['assets'])==null||_0x4fb9e7['load'](_0x58544e));}this['_app']['bundles']['loadUrl'](_0x1b2e23,(_0x2c02e2,_0x12283f)=>{_0x408b86(_0x2c02e2,{'load':_0x12283f,'original':_0x1b2e23});});}else _0x408b86(null,{'load':_0xfa2144,'original':_0xd06733&&_0xd06733['file']['filename']||_0xfa2144});}}['_loadNull'](_0x4dd6a6,_0x102788,_0x5a0354){const _0x5d3ad8=function(_0x3296a1,_0x373054,_0xe5aff4){if(_0x3296a1)_0x102788(_0x3296a1);else try{_0x102788(null,_0x4dd6a6['open'](null,_0x373054,_0x5a0354),_0xe5aff4);}catch(_0x541865){_0x102788(_0x541865);}};_0x4dd6a6['load'](null,_0x5d3ad8,_0x5a0354);}['_onSuccess'](_0x309471,_0x1d972f,_0x3329b4){for(let _0x50b8ea=-0xffc+0x12*-0xc1+0x1d8e;_0x50b8ea<this['_requests'][_0x309471]['length'];_0x50b8ea++)this['_requests'][_0x309471][_0x50b8ea](null,_0x1d972f,_0x3329b4);delete this['_requests'][_0x309471];}['_onFailure'](_0x273c36,_0x2eb94b){if(console['error'](_0x2eb94b),this['_requests'][_0x273c36]){for(let _0x5e2181=0x1c78+0x154f*0x1+-0x31c7;_0x5e2181<this['_requests'][_0x273c36]['length'];_0x5e2181++)this['_requests'][_0x273c36][_0x5e2181](_0x2eb94b);delete this['_requests'][_0x273c36];}}['open'](_0x3a7c1f,_0xf91880){const _0x2517c0=this['_handlers'][_0x3a7c1f];return _0x2517c0?_0x2517c0['open'](null,_0xf91880):(console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x3a7c1f),_0xf91880);}['patch'](_0x27f5c0,_0x2c4596){const _0x3763dc=this['_handlers'][_0x27f5c0['type']];if(!_0x3763dc){console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x27f5c0['type']);return;}_0x3763dc['patch']&&_0x3763dc['patch'](_0x27f5c0,_0x2c4596);}['clearCache'](_0x31ef58,_0x591efd){const _0x2a4171=Cn['makeKey'](_0x31ef58,_0x591efd);delete this['_cache'][_0x2a4171];}['getFromCac'+'he'](_0xfd7ac6,_0x576a38){const _0x34651a=Cn['makeKey'](_0xfd7ac6,_0x576a38);if(this['_cache'][_0x34651a])return this['_cache'][_0x34651a];}['enableRetr'+'y'](_0xbcbec3=-0xaf8+0x3*0xc6e+-0x1a4d*0x1){_0xbcbec3=Math['max'](-0x1c75*0x1+-0x1f70*0x1+-0x39*-0x10d,_0xbcbec3)||-0x94e*0x2+-0x1551+0x27ed;for(const _0x5ccbb1 in this['_handlers'])this['_handlers'][_0x5ccbb1]['maxRetries']=_0xbcbec3;}['disableRet'+'ry'](){for(const _0xf2678 in this['_handlers'])this['_handlers'][_0xf2678]['maxRetries']=0x5*0x35+-0x1*0x2650+-0x2547*-0x1;}['destroyReq'+'uests'](){this['_requests']={};}['destroy'](){this['_handlers']={},this['_requests']={},this['_cache']={};}}class GC{['_validate'](_0x4d3d15){if(!_0x4d3d15['header'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er\x22\x20field');if(!_0x4d3d15['header']['version'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er.version'+'\x22\x20field');if(_0x4d3d15['header']['version']!==-0x2505+0x16a*0x3+0x1*0x20c8)throw new Error('pc.I18n#ad'+'dData:\x20Inv'+'alid\x20\x22head'+'er.version'+'\x22\x20field');if(_0x4d3d15['data']){if(!Array['isArray'](_0x4d3d15['data']))throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta\x22\x20field\x20'+'must\x20be\x20an'+'\x20array');}else throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22data'+'\x22\x20field');for(let _0x309d72=0x776+-0xbdb+0x465,_0x1100de=_0x4d3d15['data']['length'];_0x309d72<_0x1100de;_0x309d72++){const _0x3e4f0b=_0x4d3d15['data'][_0x309d72];if(!_0x3e4f0b['info'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x309d72+('].info\x22\x20fi'+'eld'));if(!_0x3e4f0b['info']['locale'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x309d72+('].info.loc'+'ale\x22\x20field'));if(typeof _0x3e4f0b['info']['locale']!='string')throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta['+_0x309d72+('].info.loc'+'ale\x22\x20must\x20'+'be\x20a\x20strin'+'g'));if(!_0x3e4f0b['messages'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x309d72+('].messages'+'\x22\x20field'));}}['parse'](_0x522607){return this['_validate'](_0x522607),_0x522607['data'];}}const Gh=class Gh extends me{constructor(_0x4b6293){super(),this['locale']=Ph,this['_translati'+'ons']={},this['_available'+'Langs']={},this['_app']=_0x4b6293,this['_assets']=[],this['_parser']=new GC();}set['assets'](_0x38b1a2){const _0x367220={};for(let _0x21c661=-0x2327+-0x7*0x4e1+-0xb8d*-0x6,_0x52389c=_0x38b1a2['length'];_0x21c661<_0x52389c;_0x21c661++){const _0x1b11ff=_0x38b1a2[_0x21c661]instanceof pe?_0x38b1a2[_0x21c661]['id']:_0x38b1a2[_0x21c661];_0x367220[_0x1b11ff]=!(-0x7e0+0x1b9d*0x1+-0x13bd);}let _0x625b9b=this['_assets']['length'];for(;_0x625b9b--;){const _0x24e758=this['_assets'][_0x625b9b];if(!_0x367220[_0x24e758]){this['_app']['assets']['off']('add:'+_0x24e758,this['_onAssetAd'+'d'],this);const _0x4b6f47=this['_app']['assets']['get'](_0x24e758);_0x4b6f47&&this['_onAssetRe'+'move'](_0x4b6f47),this['_assets']['splice'](_0x625b9b,-0x13*-0x19a+-0xe9a+-0xfd3);}}for(const _0x4e89e2 in _0x367220){const _0x22881d=parseInt(_0x4e89e2,0x633+-0x1315+0xcec);if(this['_assets']['indexOf'](_0x22881d)!==-(0x38c*-0x3+0xe79+-0x4*0xf5))continue;this['_assets']['push'](_0x22881d);const _0x5f3e7d=this['_app']['assets']['get'](_0x22881d);_0x5f3e7d?this['_onAssetAd'+'d'](_0x5f3e7d):this['_app']['assets']['once']('add:'+_0x22881d,this['_onAssetAd'+'d'],this);}}get['assets'](){return this['_assets'];}set['locale'](_0x5c37e5){if(this['_locale']===_0x5c37e5)return;let _0x2abc7a=Oi(_0x5c37e5);if(_0x2abc7a==='in'&&(_0x2abc7a='id',_0x5c37e5=LC(_0x5c37e5,_0x2abc7a),this['_locale']===_0x5c37e5))return;const _0x371758=this['_locale'];this['_locale']=_0x5c37e5,this['_lang']=_0x2abc7a,this['_pluralFn']=Tf(this['_lang']),this['fire'](Gh['EVENT_CHAN'+'GE'],_0x5c37e5,_0x371758);}get['locale'](){return this['_locale'];}static['findAvaila'+'bleLocale'](_0xdcd42f,_0x283c6f){return Fv(_0xdcd42f,_0x283c6f);}['findAvaila'+'bleLocale'](_0x551bd6){if(this['_translati'+'ons'][_0x551bd6])return _0x551bd6;const _0x8ff87c=Oi(_0x551bd6);return this['_findFallb'+'ackLocale'](_0x551bd6,_0x8ff87c);}['getText'](_0x5977d7,_0x5eb38f){let _0x7219a2=_0x5977d7,_0x46e5b5;_0x5eb38f||(_0x5eb38f=this['_locale'],_0x46e5b5=this['_lang']);let _0x270226=this['_translati'+'ons'][_0x5eb38f];return _0x270226||(_0x46e5b5||(_0x46e5b5=Oi(_0x5eb38f)),_0x5eb38f=this['_findFallb'+'ackLocale'](_0x5eb38f,_0x46e5b5),_0x270226=this['_translati'+'ons'][_0x5eb38f]),_0x270226&&_0x270226['hasOwnProp'+'erty'](_0x5977d7)&&(_0x7219a2=_0x270226[_0x5977d7],Array['isArray'](_0x7219a2)&&(_0x7219a2=_0x7219a2[-0x93f+0x1a0+-0x1*-0x79f]),_0x7219a2==null&&(_0x7219a2=_0x5977d7)),_0x7219a2;}['getPluralT'+'ext'](_0xd83b21,_0x4642ff,_0x3b39c2){let _0x21d4f0=_0xd83b21,_0x2194e2,_0x16475e;_0x3b39c2?(_0x2194e2=Oi(_0x3b39c2),_0x16475e=Tf(_0x2194e2)):(_0x3b39c2=this['_locale'],_0x2194e2=this['_lang'],_0x16475e=this['_pluralFn']);let _0x3f0633=this['_translati'+'ons'][_0x3b39c2];if(_0x3f0633||(_0x3b39c2=this['_findFallb'+'ackLocale'](_0x3b39c2,_0x2194e2),_0x2194e2=Oi(_0x3b39c2),_0x16475e=Tf(_0x2194e2),_0x3f0633=this['_translati'+'ons'][_0x3b39c2]),_0x3f0633&&_0x3f0633[_0xd83b21]&&_0x16475e){const _0x5fb28a=_0x16475e(_0x4642ff);_0x21d4f0=_0x3f0633[_0xd83b21][_0x5fb28a],_0x21d4f0==null&&(_0x21d4f0=_0xd83b21);}return _0x21d4f0;}['addData'](_0x35cc63){let _0x46fe13;try{_0x46fe13=this['_parser']['parse'](_0x35cc63);}catch(_0x324d93){console['error'](_0x324d93);return;}for(let _0x484898=-0x21cb+-0x1*-0x2187+0x44,_0x4b7243=_0x46fe13['length'];_0x484898<_0x4b7243;_0x484898++){const _0x36ae84=_0x46fe13[_0x484898],_0x2a899e=_0x36ae84['info']['locale'],_0x473523=_0x36ae84['messages'];if(!this['_translati'+'ons'][_0x2a899e]){this['_translati'+'ons'][_0x2a899e]={};const _0x218fdb=Oi(_0x2a899e);this['_available'+'Langs'][_0x218fdb]||(this['_available'+'Langs'][_0x218fdb]=_0x2a899e);}Object['assign'](this['_translati'+'ons'][_0x2a899e],_0x473523),this['fire']('data:add',_0x2a899e,_0x473523);}}['removeData'](_0x47d748){let _0xc269e2;try{_0xc269e2=this['_parser']['parse'](_0x47d748);}catch(_0x2b9caf){console['error'](_0x2b9caf);return;}for(let _0x3680b0=-0x2015+0x12f6*-0x1+0x1*0x330b,_0x17a45f=_0xc269e2['length'];_0x3680b0<_0x17a45f;_0x3680b0++){const _0x7bf03=_0xc269e2[_0x3680b0],_0xcb96c1=_0x7bf03['info']['locale'],_0x593e56=this['_translati'+'ons'][_0xcb96c1];if(!_0x593e56)continue;const _0xda437c=_0x7bf03['messages'];for(const _0x229bf1 in _0xda437c)delete _0x593e56[_0x229bf1];Object['keys'](_0x593e56)['length']===-0xd*-0x5c+0x1428+-0x18d4&&(delete this['_translati'+'ons'][_0xcb96c1],delete this['_available'+'Langs'][Oi(_0xcb96c1)]),this['fire']('data:remov'+'e',_0xcb96c1,_0xda437c);}}['destroy'](){this['_translati'+'ons']=null,this['_available'+'Langs']=null,this['_assets']=null,this['_parser']=null,this['off']();}['_findFallb'+'ackLocale'](_0xa2d672,_0x1ac2e2){let _0x1e4d8a=Mh[_0xa2d672];return _0x1e4d8a&&this['_translati'+'ons'][_0x1e4d8a]||(_0x1e4d8a=Mh[_0x1ac2e2],_0x1e4d8a&&this['_translati'+'ons'][_0x1e4d8a])||(_0x1e4d8a=this['_available'+'Langs'][_0x1ac2e2],_0x1e4d8a&&this['_translati'+'ons'][_0x1e4d8a])?_0x1e4d8a:Ph;}['_onAssetAd'+'d'](_0x3d4ee7){_0x3d4ee7['on']('load',this['_onAssetLo'+'ad'],this),_0x3d4ee7['on']('change',this['_onAssetCh'+'ange'],this),_0x3d4ee7['on']('remove',this['_onAssetRe'+'move'],this),_0x3d4ee7['on']('unload',this['_onAssetUn'+'load'],this),_0x3d4ee7['resource']&&this['_onAssetLo'+'ad'](_0x3d4ee7);}['_onAssetLo'+'ad'](_0x287efb){this['addData'](_0x287efb['resource']);}['_onAssetCh'+'ange'](_0x3fa9d2){_0x3fa9d2['resource']&&this['addData'](_0x3fa9d2['resource']);}['_onAssetRe'+'move'](_0x1f389f){_0x1f389f['off']('load',this['_onAssetLo'+'ad'],this),_0x1f389f['off']('change',this['_onAssetCh'+'ange'],this),_0x1f389f['off']('remove',this['_onAssetRe'+'move'],this),_0x1f389f['off']('unload',this['_onAssetUn'+'load'],this),_0x1f389f['resource']&&this['removeData'](_0x1f389f['resource']),this['_app']['assets']['once']('add:'+_0x1f389f['id'],this['_onAssetAd'+'d'],this);}['_onAssetUn'+'load'](_0x142b0d){_0x142b0d['resource']&&this['removeData'](_0x142b0d['resource']);}};h(Gh,'EVENT_CHAN'+'GE','change');let wa=Gh;class HC extends me{constructor(_0x3f00e9){super(),h(this,'_scripts',{}),h(this,'_list',[]),h(this,'_scriptSch'+'emas',new Map()),this['app']=_0x3f00e9;}['destroy'](){this['app']=null,this['off']();}['addSchema'](_0x1eff99,_0x1bce3a){_0x1bce3a&&this['_scriptSch'+'emas']['set'](_0x1eff99,_0x1bce3a);}['getSchema'](_0x373fb8){return this['_scriptSch'+'emas']['get'](_0x373fb8);}['add'](_0x347c8a){const _0x10cd2e=_0x347c8a['__name'];return this['_scripts']['hasOwnProp'+'erty'](_0x10cd2e)?(setTimeout(()=>{if(_0x347c8a['prototype']['swap']){const _0x46aa18=this['_scripts'][_0x10cd2e],_0x2799c5=this['_list']['indexOf'](_0x46aa18);this['_list'][_0x2799c5]=_0x347c8a,this['_scripts'][_0x10cd2e]=_0x347c8a,this['fire']('swap',_0x10cd2e,_0x347c8a),this['fire']('swap:'+_0x10cd2e,_0x347c8a);}else console['warn']('script\x20reg'+'istry\x20alre'+'ady\x20has\x20\x27'+_0x10cd2e+('\x27\x20script,\x20'+'define\x20\x27sw'+'ap\x27\x20method'+'\x20for\x20new\x20s'+'cript\x20type'+'\x20to\x20enable'+'\x20code\x20hot\x20'+'swapping'));}),!(0x161f*-0x1+-0x58f*0x7+0x3d09)):(this['_scripts'][_0x10cd2e]=_0x347c8a,this['_list']['push'](_0x347c8a),this['fire']('add',_0x10cd2e,_0x347c8a),this['fire']('add:'+_0x10cd2e,_0x347c8a),setTimeout(()=>{if(!this['_scripts']['hasOwnProp'+'erty'](_0x10cd2e)||!this['app']||!this['app']['systems']||!this['app']['systems']['script'])return;const _0x244614=this['app']['systems']['script']['_component'+'s'];let _0x49d096;const _0x2885bb=[],_0x2ab884=[];for(_0x244614['loopIndex']=0x2353*0x1+-0x5*-0x153+-0x29f2;_0x244614['loopIndex']<_0x244614['length'];_0x244614['loopIndex']++){const _0x429437=_0x244614['items'][_0x244614['loopIndex']];if(_0x429437['_scriptsIn'+'dex'][_0x10cd2e]&&_0x429437['_scriptsIn'+'dex'][_0x10cd2e]['awaiting']){_0x429437['_scriptsDa'+'ta']&&_0x429437['_scriptsDa'+'ta'][_0x10cd2e]&&(_0x49d096=_0x429437['_scriptsDa'+'ta'][_0x10cd2e]['attributes']);const _0x58f02d=_0x429437['create'](_0x10cd2e,{'preloading':!(-0x18c7+-0x142d+0x2cf4),'ind':_0x429437['_scriptsIn'+'dex'][_0x10cd2e]['ind'],'attributes':_0x49d096});_0x58f02d&&_0x2885bb['push'](_0x58f02d);for(const _0x1df54c of _0x429437['scripts'])_0x429437['initialize'+'Attributes'](_0x1df54c);}}for(let _0x50ac9e=0x7*0x403+0xa8e+-0x26a3;_0x50ac9e<_0x2885bb['length'];_0x50ac9e++)_0x2885bb[_0x50ac9e]['enabled']&&(_0x2885bb[_0x50ac9e]['_initializ'+'ed']=!(-0x141b*0x1+-0x3a9*0x7+-0x6*-0x79f),_0x2ab884['push'](_0x2885bb[_0x50ac9e]),_0x2885bb[_0x50ac9e]['initialize']&&_0x2885bb[_0x50ac9e]['initialize']());for(let _0x2f9fc8=0x397+0xeda*-0x2+-0x7*-0x3bb;_0x2f9fc8<_0x2ab884['length'];_0x2f9fc8++)!_0x2ab884[_0x2f9fc8]['enabled']||_0x2ab884[_0x2f9fc8]['_postIniti'+'alized']||(_0x2ab884[_0x2f9fc8]['_postIniti'+'alized']=!(0x5d*0x1a+0xcc2+0x2*-0xb1a),_0x2ab884[_0x2f9fc8]['postInitia'+'lize']&&_0x2ab884[_0x2f9fc8]['postInitia'+'lize']());}),!(-0x44f*-0x4+-0x4*0x62f+0x780));}['remove'](_0xe052eb){let _0x2a14c7=_0xe052eb,_0x3f0cbf=_0xe052eb;if(typeof _0x3f0cbf!='string'?_0x3f0cbf=_0x2a14c7['__name']:_0x2a14c7=this['get'](_0x3f0cbf),this['get'](_0x3f0cbf)!==_0x2a14c7)return!(0x1*-0x189+-0x4a9*-0x3+0x1*-0xc71);delete this['_scripts'][_0x3f0cbf];const _0x1c64e4=this['_list']['indexOf'](_0x2a14c7);return this['_list']['splice'](_0x1c64e4,0x26e1*0x1+0xfe*-0x1e+-0x91c),this['fire']('remove',_0x3f0cbf,_0x2a14c7),this['fire']('remove:'+_0x3f0cbf,_0x2a14c7),!(0x1ff4+-0x5*-0x649+0x3f61*-0x1);}['get'](_0x2c9ce0){return this['_scripts'][_0x2c9ce0]||null;}['has'](_0x5414e6){if(typeof _0x5414e6=='string')return this['_scripts']['hasOwnProp'+'erty'](_0x5414e6);if(!_0x5414e6)return!(-0x1069+0x57*-0x53+0x2c9f);const _0x4086f4=_0x5414e6['__name'];return this['_scripts'][_0x4086f4]===_0x5414e6;}['list'](){return this['_list'];}}const WC=(_0x106833,_0x4934c4)=>_0x106833['constructo'+'r']['order']-_0x4934c4['constructo'+'r']['order'],$C=_0x41b505=>_0x41b505['sort'](WC),po=[],Nv=[],XC=()=>Nv['pop']()??[],Ag=_0x3f6f7d=>{_0x3f6f7d['length']=-0x1*0x2070+-0x2*-0x105+0xf33*0x2,Nv['push'](_0x3f6f7d);},Hh=class Hh extends Ie{constructor(_0x29d438,_0x22ce8b=Ms()){super(_0x29d438),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'gsplat'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'c',{}),h(this,'_app'),h(this,'_destroyin'+'g',!(-0x11*-0x101+-0x1b57+-0x36d*-0x3)),h(this,'_guid',null),h(this,'_template',!(-0x3*-0x1c5+0x14b6+-0x1a04)),(w['assert'](_0x22ce8b,'Could\x20not\x20'+'find\x20curre'+'nt\x20applica'+'tion'),this['_app']=_0x22ce8b);}['addCompone'+'nt'](_0x59eef8,_0x2d24fe){const _0x331bac=this['_app']['systems'][_0x59eef8];return _0x331bac?this['c'][_0x59eef8]?(w['warn']('addCompone'+'nt:\x20Entity'+'\x20already\x20h'+'as\x20\x27'+_0x59eef8+('\x27\x20componen'+'t')),null):_0x331bac['addCompone'+'nt'](this,_0x2d24fe):(w['error']('addCompone'+'nt:\x20System'+'\x20\x27'+_0x59eef8+('\x27\x20doesn\x27t\x20'+'exist')),null);}['removeComp'+'onent'](_0x3bd1d3){const _0x4d1161=this['_app']['systems'][_0x3bd1d3];if(!_0x4d1161){w['error']('removeComp'+'onent:\x20Sys'+'tem\x20\x27'+_0x3bd1d3+('\x27\x20doesn\x27t\x20'+'exist'));return;}if(!this['c'][_0x3bd1d3]){w['warn']('removeComp'+'onent:\x20Ent'+'ity\x20doesn\x27'+'t\x20have\x20\x27'+_0x3bd1d3+('\x27\x20componen'+'t'));return;}_0x4d1161['removeComp'+'onent'](this);}['findCompon'+'ent'](_0x3fc8c6){const _0x3a61ee=this['findOne'](_0x5ebd97=>{var _0x4c6f28;return(_0x4c6f28=_0x5ebd97['c'])==null?void(-0x47c+0x2460+-0x1fe4):_0x4c6f28[_0x3fc8c6];});return _0x3a61ee&&_0x3a61ee['c'][_0x3fc8c6];}['findCompon'+'ents'](_0x1b5ef6){return this['find'](_0x88f24f=>{var _0x22a78f;return(_0x22a78f=_0x88f24f['c'])==null?void(0x1bdf*-0x1+-0x1744+0x13*0x2b1):_0x22a78f[_0x1b5ef6];})['map'](_0x265364=>_0x265364['c'][_0x1b5ef6]);}['findScript'](_0x1158a2){const _0x54c48f=this['findOne'](_0x3ca7c4=>{var _0x30f067,_0x34521a;return(_0x34521a=(_0x30f067=_0x3ca7c4['c'])==null?void(0x46c+0x1995+0x1*-0x1e01):_0x30f067['script'])==null?void(0xa5b*0x3+-0x151*-0xd+-0x302e):_0x34521a['has'](_0x1158a2);});return _0x54c48f==null?void(0x1cda+0x1066+0x5a8*-0x8):_0x54c48f['c']['script']['get'](_0x1158a2);}['findScript'+'s'](_0x20d326){return this['find'](_0x22d17e=>{var _0x13f64e,_0x352169;return(_0x352169=(_0x13f64e=_0x22d17e['c'])==null?void(0xf0f+-0x44*0x45+0x1*0x345):_0x13f64e['script'])==null?void(0x206d+-0x9*-0x1ab+-0x2f70):_0x352169['has'](_0x20d326);})['map'](_0x1d17b4=>_0x1d17b4['c']['script']['get'](_0x20d326));}['getGuid'](){return this['_guid']||this['setGuid'](Q0['create']()),this['_guid'];}['setGuid'](_0x28028b){const _0x563b3e=this['_app']['_entityInd'+'ex'];this['_guid']&&delete _0x563b3e[this['_guid']],this['_guid']=_0x28028b,_0x563b3e[this['_guid']]=this;}['_notifyHie'+'rarchyStat'+'eChanged'](_0x13bb38,_0x544e3a){let _0x496022=!(-0xc2a+-0x10c3+-0xa1*-0x2e);_0x13bb38===this&&po['length']===-0x26ff*-0x1+0x184b+-0x3f4a&&(_0x496022=!(0x2392+-0x12bf+-0x49*0x3b)),_0x13bb38['_beingEnab'+'led']=!(-0x270d+-0x1*0x106b+0x3778),_0x13bb38['_onHierarc'+'hyStateCha'+'nged'](_0x544e3a),_0x13bb38['_onHierarc'+'hyStatePos'+'tChanged']&&po['push'](_0x13bb38);const _0xab699f=_0x13bb38['_children'];for(let _0x27bccb=-0x1*0x3ee+-0xb7*-0x2a+0x1*-0x1a18,_0x1cdd12=_0xab699f['length'];_0x27bccb<_0x1cdd12;_0x27bccb++)_0xab699f[_0x27bccb]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0xab699f[_0x27bccb],_0x544e3a);if(_0x13bb38['_beingEnab'+'led']=!(-0xf59*-0x2+-0xdd3+-0x10de*0x1),_0x496022){for(let _0x4da330=-0x229a+0x2*0xa61+-0x376*-0x4;_0x4da330<po['length'];_0x4da330++)po[_0x4da330]['_onHierarc'+'hyStatePos'+'tChanged']();po['length']=-0x4d2*-0x1+0x1*-0x1115+-0x1*-0xc43;}}['_onHierarc'+'hyStateCha'+'nged'](_0x553720){super['_onHierarc'+'hyStateCha'+'nged'](_0x553720);const _0xaacb7d=this['_getSorted'+'Components']();for(let _0x3d0bb6=-0xd20+0x1547+-0x827;_0x3d0bb6<_0xaacb7d['length'];_0x3d0bb6++){const _0x48f14c=_0xaacb7d[_0x3d0bb6];_0x48f14c['enabled']&&(_0x553720?_0x48f14c['onEnable']():_0x48f14c['onDisable']());}Ag(_0xaacb7d);}['_onHierarc'+'hyStatePos'+'tChanged'](){const _0x47817d=this['_getSorted'+'Components']();for(let _0x334dba=0x169c+-0xe75+0x827*-0x1;_0x334dba<_0x47817d['length'];_0x334dba++)_0x47817d[_0x334dba]['onPostStat'+'eChange']();Ag(_0x47817d);}['findByGuid'](_0x203184){if(this['_guid']===_0x203184)return this;const _0x424394=this['_app']['_entityInd'+'ex'][_0x203184];return _0x424394&&(_0x424394===this||_0x424394['isDescenda'+'ntOf'](this))?_0x424394:null;}['destroy'](){this['_destroyin'+'g']=!(0x1*0x637+0x1a59+-0x2090);for(const _0x3d691e in this['c'])this['c'][_0x3d691e]['enabled']=!(-0x26b0+-0x17ce*-0x1+0xee3);for(const _0x2bf5ca in this['c'])this['c'][_0x2bf5ca]['system']['removeComp'+'onent'](this);super['destroy'](),this['_guid']&&delete this['_app']['_entityInd'+'ex'][this['_guid']],this['_destroyin'+'g']=!(0x803*0x1+-0x2185+-0x3*-0x881);}['clone'](){const _0x5c4a1b={},_0x32ab22=this['_cloneRecu'+'rsively'](_0x5c4a1b);return _0x5c4a1b[this['getGuid']()]=_0x32ab22,kv(this,this,_0x32ab22,_0x5c4a1b),_0x32ab22;}['_getSorted'+'Components'](){const _0x5bad6c=this['c'],_0x5c8c1c=XC();let _0x134a1a=0xb*0x11b+-0x5*0x698+0x14cf;for(const _0x31971d in _0x5bad6c)if(_0x5bad6c['hasOwnProp'+'erty'](_0x31971d)){const _0x497f49=_0x5bad6c[_0x31971d];_0x134a1a|=_0x497f49['constructo'+'r']['order']!==-0x33e+-0x175*-0x5+0x2d*-0x17,_0x5c8c1c['push'](_0x497f49);}return _0x134a1a&&_0x5c8c1c['length']>-0x8*0x45a+-0x5*0x23b+0x2df8&&$C(_0x5c8c1c),_0x5c8c1c;}['_cloneRecu'+'rsively'](_0x3ebcb8){const _0x3fcf82=new this['constructo'+'r'](void(0x2476+0x1235+-0x3a5*0xf),this['_app']);super['_cloneInte'+'rnal'](_0x3fcf82);for(const _0x1a2d10 in this['c'])this['c'][_0x1a2d10]['system']['cloneCompo'+'nent'](this,_0x3fcf82);for(let _0x5b09dd=-0x10*0x1da+0x1d3e+0x62;_0x5b09dd<this['_children']['length'];_0x5b09dd++){const _0x41f6d0=this['_children'][_0x5b09dd];if(_0x41f6d0 instanceof Hh){const _0x57a85e=_0x41f6d0['_cloneRecu'+'rsively'](_0x3ebcb8);_0x3fcf82['addChild'](_0x57a85e),_0x3ebcb8[_0x41f6d0['getGuid']()]=_0x57a85e;}}return _0x3fcf82;}};h(Hh,'EVENT_DEST'+'ROY','destroy');let lt=Hh;function kv(_0x1ada3b,_0x385be9,_0x36f260,_0xcc1f91){if(_0x385be9 instanceof lt){const _0x171997=_0x385be9['c'];for(const _0x469e03 in _0x171997){const _0x33b59c=_0x171997[_0x469e03],_0x4d966e=_0x33b59c['system']['getPropert'+'iesOfType']('entity');for(let _0x3d8b35=-0x2*0x2de+-0x115e+-0x2*-0xb8d,_0x613eae=_0x4d966e['length'];_0x3d8b35<_0x613eae;_0x3d8b35++){const _0x24b991=_0x4d966e[_0x3d8b35]['name'],_0x4a0fb4=_0x33b59c[_0x24b991];if(!!_0x1ada3b['findByGuid'](_0x4a0fb4)){const _0x4f3cd2=_0xcc1f91[_0x4a0fb4]['getGuid']();_0x4f3cd2?_0x36f260['c'][_0x469e03][_0x24b991]=_0x4f3cd2:w['warn']('Could\x20not\x20'+'find\x20corre'+'sponding\x20e'+'ntity\x20id\x20w'+'hen\x20resolv'+'ing\x20duplic'+'ated\x20entit'+'y\x20referenc'+'es');}}}_0x171997['script']&&_0x36f260['script']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x171997['script'],_0xcc1f91),_0x171997['render']&&_0x36f260['render']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x171997['render'],_0xcc1f91),_0x171997['button']&&_0x36f260['button']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x171997['button'],_0xcc1f91),_0x171997['scrollview']&&_0x36f260['scrollview']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x171997['scrollview'],_0xcc1f91),_0x171997['scrollbar']&&_0x36f260['scrollbar']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x171997['scrollbar'],_0xcc1f91),_0x171997['anim']&&_0x36f260['anim']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x171997['anim'],_0xcc1f91);const _0x4f00d4=_0x385be9['children']['filter'](_0xbe6ad5=>_0xbe6ad5 instanceof lt),_0x294012=_0x36f260['children']['filter'](_0x38241a=>_0x38241a instanceof lt);for(let _0x8d5156=-0x1f75+0x869+-0x170c*-0x1,_0x508845=_0x4f00d4['length'];_0x8d5156<_0x508845;_0x8d5156++)kv(_0x1ada3b,_0x4f00d4[_0x8d5156],_0x294012[_0x8d5156],_0xcc1f91);}}class Cg{constructor(_0x48381a,_0x1359cf){h(this,'name'),h(this,'url'),h(this,'data',null),h(this,'_loading',!(-0x2090+0x269b+0x1*-0x60a)),h(this,'_onLoadedC'+'allbacks',[]),(this['name']=_0x48381a,this['url']=_0x1359cf);}get['loaded'](){return!!this['data'];}get['loading'](){return this['_loading'];}}class qC{constructor(_0x47959c){h(this,'_app'),h(this,'_list',[]),h(this,'_index',{}),h(this,'_urlIndex',{}),this['_app']=_0x47959c;}['destroy'](){this['_app']=null;}['list'](){return this['_list'];}['add'](_0x1c2ce9,_0x1c22e2){if(this['_index']['hasOwnProp'+'erty'](_0x1c2ce9))return w['warn']('pc.SceneRe'+'gistry:\x20tr'+'ying\x20to\x20ad'+'d\x20more\x20tha'+'n\x20one\x20scen'+'e\x20called:\x20'+_0x1c2ce9),!(-0x175*-0xf+-0x2*0x124d+0x4*0x3b0);const _0x2d58ee=new Cg(_0x1c2ce9,_0x1c22e2),_0x148b92=this['_list']['push'](_0x2d58ee);return this['_index'][_0x2d58ee['name']]=_0x148b92-(0x1*-0x1866+0x15ed+0x27a),this['_urlIndex'][_0x2d58ee['url']]=_0x148b92-(-0xa0a+0x1834*0x1+-0x91*0x19),!(-0xa*0x79+-0xacc*-0x3+0xdd5*-0x2);}['find'](_0x455fc4){return this['_index']['hasOwnProp'+'erty'](_0x455fc4)?this['_list'][this['_index'][_0x455fc4]]:null;}['findByUrl'](_0x38fdee){return this['_urlIndex']['hasOwnProp'+'erty'](_0x38fdee)?this['_list'][this['_urlIndex'][_0x38fdee]]:null;}['remove'](_0x2bd41d){if(this['_index']['hasOwnProp'+'erty'](_0x2bd41d)){const _0x31d25c=this['_index'][_0x2bd41d];let _0x1f130a=this['_list'][_0x31d25c];delete this['_urlIndex'][_0x1f130a['url']],delete this['_index'][_0x2bd41d],this['_list']['splice'](_0x31d25c,-0x114d+-0xfa1+0x1*0x20ef);for(let _0x42c2fc=-0x1*-0x270f+0x627+0x12*-0x283;_0x42c2fc<this['_list']['length'];_0x42c2fc++)_0x1f130a=this['_list'][_0x42c2fc],this['_index'][_0x1f130a['name']]=_0x42c2fc,this['_urlIndex'][_0x1f130a['url']]=_0x42c2fc;}}['_loadScene'+'Data'](_0x56c904,_0x52f1a7,_0x4a7095){const _0x302ea4=this['_app'];let _0x11c332=_0x56c904;if(typeof _0x56c904=='string'&&(_0x56c904=this['findByUrl'](_0x11c332)||this['find'](_0x11c332)||new Cg('Untitled',_0x11c332)),_0x11c332=_0x56c904['url'],!_0x11c332){_0x4a7095('Cannot\x20fin'+'d\x20scene\x20to'+'\x20load');return;}if(_0x56c904['loaded']){_0x4a7095(null,_0x56c904);return;}_0x302ea4['assets']&&_0x302ea4['assets']['prefix']&&!jn['test'](_0x11c332)&&(_0x11c332=xe['join'](_0x302ea4['assets']['prefix'],_0x11c332)),_0x56c904['_onLoadedC'+'allbacks']['push'](_0x4a7095),_0x56c904['_loading']||_0x302ea4['loader']['getHandler']('hierarchy')['load'](_0x11c332,(_0x337f9a,_0x52404b)=>{_0x56c904['data']=_0x52404b,_0x56c904['_loading']=!(0x2635+0xec0+-0x2*0x1a7a);for(let _0x4a0d97=-0x5ad+0x1a56+0x81*-0x29;_0x4a0d97<_0x56c904['_onLoadedC'+'allbacks']['length'];_0x4a0d97++)_0x56c904['_onLoadedC'+'allbacks'][_0x4a0d97](_0x337f9a,_0x56c904);_0x52f1a7||(_0x56c904['data']=null),_0x56c904['_onLoadedC'+'allbacks']['length']=-0x709*-0x1+-0x23ea+0x1*0x1ce1;}),_0x56c904['_loading']=!(-0xac1+0x5*0xa7+0x112*0x7);}['loadSceneD'+'ata'](_0x33608c,_0x18ce1e){this['_loadScene'+'Data'](_0x33608c,!(0x1fd1+-0x101d+-0xfb4*0x1),_0x18ce1e);}['unloadScen'+'eData'](_0x1e6067){typeof _0x1e6067=='string'&&(_0x1e6067=this['findByUrl'](_0x1e6067)),_0x1e6067&&(_0x1e6067['data']=null);}['_loadScene'+'Hierarchy'](_0x36cd8e,_0x5921e3,_0xecb88b){this['_loadScene'+'Data'](_0x36cd8e,!(0x1*-0x26c3+-0x18f2+0x3fb6),(_0xbbdac5,_0x1f64e0)=>{if(_0xbbdac5){_0xecb88b&&_0xecb88b(_0xbbdac5);return;}_0x5921e3&&_0x5921e3(_0x1f64e0);const _0x4c9606=this['_app'],_0xf97500=()=>{const _0x19e6df=_0x4c9606['loader']['getHandler']('hierarchy');_0x4c9606['systems']['script']['preloading']=!(-0x59*0x14+0xdc*0x7+0xf0);const _0x1988fe=_0x19e6df['open'](_0x1f64e0['url'],_0x1f64e0['data']);_0x4c9606['systems']['script']['preloading']=!(0x19a*-0x4+0x1176+-0xb0d),_0x4c9606['loader']['clearCache'](_0x1f64e0['url'],'hierarchy'),_0x4c9606['root']['addChild'](_0x1988fe),_0x4c9606['systems']['fire']('initialize',_0x1988fe),_0x4c9606['systems']['fire']('postInitia'+'lize',_0x1988fe),_0x4c9606['systems']['fire']('postPostIn'+'itialize',_0x1988fe),_0xecb88b&&_0xecb88b(null,_0x1988fe);};_0x4c9606['_preloadSc'+'ripts'](_0x1f64e0['data'],_0xf97500);});}['loadSceneH'+'ierarchy'](_0x2c47ba,_0x2016d2){this['_loadScene'+'Hierarchy'](_0x2c47ba,null,_0x2016d2);}['loadSceneS'+'ettings'](_0x1374c7,_0x57a922){this['_loadScene'+'Data'](_0x1374c7,!(0x156b+0x1*0x1b+0x1585*-0x1),(_0x22c8a5,_0x5ea583)=>{_0x22c8a5?_0x57a922&&_0x57a922(_0x22c8a5):(this['_app']['applyScene'+'Settings'](_0x5ea583['data']['settings']),_0x57a922&&_0x57a922(null));});}['changeScen'+'e'](_0x26bb60,_0x5bd0b0){const _0x2dacc1=this['_app'],_0x4a6ec3=_0x5283b3=>{const {children:_0x574781}=_0x2dacc1['root'];for(;_0x574781['length'];)_0x574781[0x44b*-0x3+-0x5*0x5a4+0x329*0xd]['destroy']();_0x2dacc1['applyScene'+'Settings'](_0x5283b3['data']['settings']);};this['_loadScene'+'Hierarchy'](_0x26bb60,_0x4a6ec3,_0x5bd0b0);}['loadScene'](_0x573326,_0x333447){const _0x13b16d=this['_app'],_0x5a013d=_0x13b16d['loader']['getHandler']('scene');_0x13b16d['assets']&&_0x13b16d['assets']['prefix']&&!jn['test'](_0x573326)&&(_0x573326=xe['join'](_0x13b16d['assets']['prefix'],_0x573326)),_0x5a013d['load'](_0x573326,(_0x31fbfd,_0x5c82b9)=>{if(_0x31fbfd)_0x333447&&_0x333447(_0x31fbfd);else{const _0xb44366=()=>{_0x13b16d['systems']['script']['preloading']=!(0x1*0x1b37+-0x1797+-0x20*0x1d);const _0x580071=_0x5a013d['open'](_0x573326,_0x5c82b9),_0x2f350b=this['findByUrl'](_0x573326);_0x2f350b&&!_0x2f350b['loaded']&&(_0x2f350b['data']=_0x5c82b9),_0x13b16d['systems']['script']['preloading']=!(-0x13ab+0x15*-0x148+0x2e94),_0x13b16d['loader']['clearCache'](_0x573326,'scene'),_0x13b16d['loader']['patch']({'resource':_0x580071,'type':'scene'},_0x13b16d['assets']),_0x13b16d['root']['addChild'](_0x580071['root']),_0x13b16d['systems']['rigidbody']&&typeof Ammo<'u'&&_0x13b16d['systems']['rigidbody']['gravity']['set'](_0x580071['_gravity']['x'],_0x580071['_gravity']['y'],_0x580071['_gravity']['z']),_0x333447&&_0x333447(null,_0x580071);};_0x13b16d['_preloadSc'+'ripts'](_0x5c82b9,_0xb44366);}});}}class jC{constructor(_0x119213){this['frame']={'fps':0x0,'ms':0x0,'dt':0x0,'updateStart':0x0,'updateTime':0x0,'renderStart':0x0,'renderTime':0x0,'physicsStart':0x0,'physicsTime':0x0,'cullTime':0x0,'sortTime':0x0,'skinTime':0x0,'morphTime':0x0,'instancingTime':0x0,'triangles':0x0,'otherPrimitives':0x0,'shaders':0x0,'materials':0x0,'cameras':0x0,'shadowMapUpdates':0x0,'shadowMapTime':0x0,'depthMapTime':0x0,'forwardTime':0x0,'lightClustersTime':0x0,'lightClusters':0x0,'_timeToCountFrames':0x0,'_fpsAccum':0x0},this['drawCalls']={'forward':0x0,'depth':0x0,'shadow':0x0,'immediate':0x0,'misc':0x0,'total':0x0,'skinned':0x0,'instanced':0x0,'removedByInstancing':0x0},this['misc']={'renderTargetCreationTime':0x0},this['particles']={'updatesPerFrame':0x0,'_updatesPerFrame':0x0,'frameTime':0x0,'_frameTime':0x0},this['shaders']=_0x119213['_shaderSta'+'ts'],this['vram']=_0x119213['_vram'],Object['defineProp'+'erty'](this['vram'],'totalUsed',{'get':function(){return this['tex']+this['vb']+this['ib'];}}),Object['defineProp'+'erty'](this['vram'],'geom',{'get':function(){return this['vb']+this['ib'];}});}get['scene'](){return Ms()['scene']['_stats'];}get['lightmappe'+'r'](){var _0x448ce3;return(_0x448ce3=Ms()['lightmappe'+'r'])==null?void(0x3d*0x43+0x1c5d+-0x2c54*0x1):_0x448ce3['stats'];}get['batcher'](){const _0x2e3e78=Ms()['_batcher'];return _0x2e3e78?_0x2e3e78['_stats']:null;}}const YC='\x0auniform\x20f'+'loat\x20alpha'+'_ref;\x0a\x0avoi'+'d\x20alphaTes'+'t(float\x20a)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(a\x20<\x20alpha'+'_ref)\x20disc'+'ard;\x0a}\x0a',KC='\x0a\x0a#ifdef\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+'\x20AMBIENTSH'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20am'+'bientSH[9]'+';\x0a#endif\x0a\x0a'+'#if\x20LIT_AM'+'BIENT_SOUR'+'CE\x20==\x20ENVA'+'LATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fndef\x20ENV_'+'ATLAS\x0a\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_envAtlas'+';\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0avoid\x20addA'+'mbient(vec'+'3\x20worldNor'+'mal)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'AMBIENTSH\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20n\x20=\x20cu'+'beMapRotat'+'e(worldNor'+'mal);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20c'+'olor\x20=\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[0'+']\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ambi'+'entSH[1]\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[2'+']\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[3]\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[4]\x20*\x20'+'n.x\x20*\x20n.z\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ambien'+'tSH[5]\x20*\x20n'+'.z\x20*\x20n.y\x20+'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ambient'+'SH[6]\x20*\x20n.'+'y\x20*\x20n.x\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[7]\x20*\x20(3.'+'0\x20*\x20n.z\x20*\x20'+'n.z\x20-\x201.0)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[8]\x20*\x20'+'(n.x\x20*\x20n.x'+'\x20-\x20n.y\x20*\x20n'+'.y);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20processEn'+'vironment('+'max(color,'+'\x20vec3(0.0)'+'));\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_A'+'MBIENT_SOU'+'RCE\x20==\x20ENV'+'ALATLAS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dir\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20ma'+'pUv(toSphe'+'ricalUv(di'+'r),\x20vec4(1'+('28.0,\x20256.'+'0\x20+\x20128.0,'+'\x2064.0,\x2032.'+'0)\x20/\x20atlas'+'Size);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20raw\x20=\x20tex'+'ture2D(tex'+'ture_envAt'+'las,\x20uv);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20linear\x20'+'=\x20{ambient'+'Decode}(ra'+'w);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20p'+'rocessEnvi'+'ronment(li'+'near);\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'CONSTANT\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20light'+'_globalAmb'+'ient;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),ZC='\x0a\x0a#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_anisotr'+'opyIntensi'+'ty;\x0a\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20material_'+'anisotropy'+'Rotation;\x0a'+'#endif\x0a\x0avo'+'id\x20getAnis'+'otropy()\x20{'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x200'+'.0;\x0a\x20\x20\x20\x20dA'+'nisotropyR'+'otation\x20=\x20'+'vec2(1.0,\x20'+'0.0);\x0a\x0a#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20m'+'aterial_an'+'isotropyIn'+'tensity;\x0a\x20'+'\x20\x20\x20dAnisot'+'ropyRotati'+'on\x20=\x20mater'+'ial_anisot'+'ropyRotati'+'on;\x0a#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_ANI'+'SOTROPY_TE'+'XTURE\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropyTex\x20='+'\x20texture2D'+'Bias({STD_'+'ANISOTROPY'+'_TEXTURE_N'+'AME},\x20{STD'+'_ANISOTROP'+'Y_TEXTURE_'+'UV},\x20textu'+'reBias).rg'+'b;\x0a\x20\x20\x20\x20dAn'+'isotropy\x20*'+'=\x20anisotro'+'pyTex.b;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20a'+'nisotropyR'+'otationFro'+'mTex\x20=\x20ani'+'sotropyTex'+'.rg\x20*\x202.0\x20'+'-\x20vec2(1.0'+');\x0a\x20\x20\x20\x20mat'+'2\x20rotation'+'Matrix\x20=\x20m'+'at2(dAniso'+'tropyRotat'+'ion.x,\x20dAn'+'isotropyRo'+'tation.y,\x20'+'-dAnisotro'+'pyRotation'+'.y,\x20dAniso'+'tropyRotat'+'ion.x);\x0a\x20\x20'+'\x20\x20dAnisotr'+'opyRotatio'+'n\x20=\x20rotati'+'onMatrix\x20*'+'\x20anisotrop'+'yRotationF'+'romTex;\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20dA'+'nisotropy\x20'+'=\x20clamp(dA'+'nisotropy,'+'\x200.0,\x201.0)'+';\x0a}\x0a',QC='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_aoInten'+'sity;\x0a#end'+'if\x0a\x0a#ifdef'+'\x20STD_AODET'+'AIL_TEXTUR'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22deta'+'ilModesPS\x22'+'\x0a#endif\x0a\x0av'+'oid\x20getAO('+')\x20{\x0a\x20\x20\x20\x20dA'+'o\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'aoBase\x20=\x20t'+'exture2DBi'+'as({STD_AO'+'_TEXTURE_N'+'AME},\x20{STD'+'_AO_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_AO_TE'+'XTURE_CHAN'+'NEL};\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20aoDetail\x20'+'=\x20texture2'+'DBias({STD'+'_AODETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'AODETAIL_T'+'EXTURE_UV}'+',\x20textureB'+'ias).{STD_'+'AODETAIL_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'oBase\x20=\x20de'+'tailMode_{'+'STD_AODETA'+'IL_DETAILM'+'ODE}(vec3('+'aoBase),\x20v'+'ec3(aoDeta'+'il)).r;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_AO_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(STD_A'+'O_TEXTURE)'+'\x20||\x20define'+'d(STD_AO_V'+'ERTEX)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAo\x20='+'\x20mix(1.0,\x20'+'dAo,\x20mater'+'ial_aoInte'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',JC='\x0avoid\x20occl'+'udeDiffuse'+'(float\x20ao)'+'\x20{\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20ao;\x0a}\x0a',e1='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_occlud'+'eSpecularI'+'ntensity;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0av'+'oid\x20occlud'+'eSpecular('+'float\x20glos'+'s,\x20float\x20a'+'o,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir)\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'AO\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_OCCLUDE_'+'SPECULAR_F'+'LOAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20specOcc'+'\x20=\x20mix(1.0'+',\x20ao,\x20mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20specOc'+'c\x20=\x20ao;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_OCC'+'LUDE_SPECU'+'LAR\x20==\x20GLO'+'SSDEPENDEN'+'T\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20approx'+'imated\x20spe'+'cular\x20occl'+'usion\x20from'+'\x20AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20http:'+'//research'+'.tri-ace.c'+'om/Data/ce'+'dec2011_Re'+'altimePBR_'+'Implementa'+'tion_e.ppt'+'x\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20spec'+'Pow\x20=\x20exp2'+'(gloss\x20*\x201'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'specOcc\x20=\x20'+'saturate(p'+'ow(dot(wor'+'ldNormal,\x20'+'viewDir)\x20+'+'\x20ao,\x200.01\x20'+'*\x20specPow)'+'\x20-\x201.0\x20+\x20a'+'o);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecOcc\x20=\x20m'+'ix(1.0,\x20sp'+'ecOcc,\x20mat'+'erial_occl'+'udeSpecula'+'rIntensity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'*=\x20specOcc'+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20*=\x20specO'+'cc;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sSpecula'+'rLight\x20*=\x20'+'specOcc;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sReflecti'+'on\x20*=\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a'),t1='\x0a\x20\x20\x20\x20vec4\x20'+'dirLm\x20=\x20te'+'xture2D(te'+'xture_dirL'+'ightMap,\x20v'+'Uv1);\x0a\x0a\x20\x20\x20'+'\x20if\x20(bakeD'+'ir\x20>\x200.5)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dAtten'+'\x20>\x200.00001'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dirL'+'m.xyz\x20=\x20di'+'rLm.xyz\x20*\x20'+'2.0\x20-\x20vec3'+'(1.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20sa'+'turate(dAt'+'ten);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20nor'+'malize(dLi'+'ghtDirNorm'+'W.xyz*dAtt'+'en\x20+\x20dirLm'+'.xyz*dirLm'+'.w)\x20*\x200.5\x20'+'+\x20vec3(0.5'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20dirLm.w\x20'+'+\x20dAtten;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.a\x20=\x20m'+'ax(gl_Frag'+'Color.a,\x201'+'.0\x20/\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20dir'+'Lm;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20dirLm.'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color.a\x20=\x20'+'max(dirLm.'+'w,\x20dAtten\x20'+'>\x200.00001\x20'+'?\x20(1.0/255'+'.0)\x20:\x200.0)'+';\x0a\x20\x20\x20\x20}\x0a',s1='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'ambientBak'+'eOcclusion'+'Contrast\x20+'+'\x201.0,\x200.0)'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'vec3(ambie'+'ntBakeOccl'+'usionBrigh'+'tness);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20sa'+'turate(dDi'+'ffuseLight'+');\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20dAmbie'+'ntLight;\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHTM'+'AP_RGBM\x0a\x20\x20'+'\x20\x20//\x20encod'+'e\x20to\x20RGBM\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.rgb'+'\x20=\x20dDiffus'+'eLight;\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor.rgb\x20='+'\x20pow(gl_Fr'+'agColor.rg'+'b,\x20vec3(0.'+'5));\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20/=\x208'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.a\x20=\x20clamp'+'(\x20max(\x20max'+'(\x20gl_FragC'+'olor.r,\x20gl'+'_FragColor'+'.g\x20),\x20max('+'\x20gl_FragCo'+'lor.b,\x201.0'+'\x20/\x20255.0\x20)'+'\x20),\x200.0,1.'+'0\x20);\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.a\x20=\x20ceil'+'(gl_FragCo'+'lor.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20/=\x20gl'+'_FragColor'+'.a;\x0a#else\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(dDiffu'+'seLight,\x201'+'.0);\x0a#endi'+'f\x0a',i1='\x0auniform\x20v'+'ec3\x20view_p'+'osition;\x0a\x0a'+'uniform\x20ve'+'c3\x20light_g'+'lobalAmbie'+'nt;\x0a\x0afloat'+'\x20square(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'x*x;\x0a}\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0ave'+'c3\x20saturat'+'e(vec3\x20x)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3(0.0'+'),\x20vec3(1.'+'0));\x0a}\x0a',r1='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'ec2\x20vMask;'+'\x0avarying\x20v'+'ec2\x20vTiled'+'Uv;\x0a\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0au'+'niform\x20med'+'iump\x20vec2\x20'+'outerScale'+';\x0auniform\x20'+'mediump\x20ve'+'c4\x20atlasRe'+'ct;\x0a\x0avec2\x20'+'nineSliced'+'Uv;\x0a',a1='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vec2\x20vMa'+'sk;\x0avaryin'+'g\x20vec2\x20vTi'+'ledUv;\x0a\x0aun'+'iform\x20medi'+'ump\x20vec4\x20i'+'nnerOffset'+';\x0auniform\x20'+'mediump\x20ve'+'c2\x20outerSc'+'ale;\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20atla'+'sRect;\x0a\x0ave'+'c2\x20nineSli'+'cedUv;\x0a',n1='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afloat\x20'+'bayer2(vec'+'2\x20p)\x20{\x0a\x20\x20\x20'+'\x20return\x20mo'+'d(2.0\x20*\x20p.'+'y\x20+\x20p.x\x20+\x20'+'1.0,\x204.0);'+'\x0a}\x0a\x0a//\x204x4'+'\x20matrix,\x20p'+'\x20-\x20pixel\x20c'+'oordinate\x0a'+'float\x20baye'+'r4(vec2\x20p)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20p1\x20=\x20mod'+'(p,\x202.0);\x0a'+'\x20\x20\x20\x20vec2\x20p'+'2\x20=\x20floor('+'0.5\x20*\x20mod('+'p,\x204.0));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afloat\x20bay'+'er8(vec2\x20p'+')\x20{\x0a\x20\x20\x20\x20ve'+'c2\x20p1\x20=\x20mo'+'d(p,\x202.0);'+'\x0a\x20\x20\x20\x20vec2\x20'+'p2\x20=\x20floor'+'(0.5\x20*\x20mod'+'(p,\x204.0));'+'\x0a\x20\x20\x20\x20vec2\x20'+'p4\x20=\x20floor'+'(0.25\x20*\x20mo'+'d(p,\x208.0))'+';\x0a\x20\x20\x20\x20retu'+'rn\x204.0\x20*\x20('+'4.0\x20*\x20baye'+'r2(p1)\x20+\x20b'+'ayer2(p2))'+'\x20+\x20bayer2('+'p4);\x0a}\x0a',o1='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0auni'+'form\x20vec2\x20'+'pixelOffse'+'t;\x0a\x0a#ifdef'+'\x20GAUSS\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20weigh'+'t[{SAMPLES'+'}];\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20m'+'oments\x20=\x20v'+'ec3(0.0);\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vUv0\x20-'+'\x20pixelOffs'+'et\x20*\x20(floa'+'t({SAMPLES'+'})\x20*\x200.5);'+'\x0a\x20\x20\x20\x20for\x20('+'int\x20i\x20=\x200;'+'\x20i\x20<\x20{SAMP'+'LES};\x20i++)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20c\x20=\x20'+'texture2D('+'source,\x20uv'+'\x20+\x20pixelOf'+'fset\x20*\x20flo'+'at(i));\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20GAUSS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20moments\x20'+'+=\x20c.xyz\x20*'+'\x20weight[i]'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'ments\x20+=\x20c'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'GAUSS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20*=\x201.0\x20/'+'\x20float({SA'+'MPLES});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(momen'+'ts.x,\x20mome'+'nts.y,\x20mom'+'ents.z,\x201.'+'0);\x0a}\x0a',l1='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oat;\x0a\x0avoid'+'\x20getClearC'+'oat()\x20{\x0a\x20\x20'+'\x20\x20ccSpecul'+'arity\x20=\x20ma'+'terial_cle'+'arCoat;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_CLEARC'+'OAT_TEXTUR'+'E\x0a\x20\x20\x20\x20ccSp'+'ecularity\x20'+'*=\x20texture'+'2DBias({ST'+'D_CLEARCOA'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_CL'+'EARCOAT_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20*=\x20satu'+'rate(vVert'+'exColor.{S'+'TD_CLEARCO'+'AT_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',c1='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oatGloss;\x0a'+'\x0avoid\x20getC'+'learCoatGl'+'ossiness()'+'\x20{\x0a\x20\x20\x20\x20ccG'+'lossiness\x20'+'=\x20material'+'_clearCoat'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE\x0a\x20\x20\x20\x20'+'ccGlossine'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_CLEAR'+'COATGLOSS_'+'TEXTURE_NA'+'ME},\x20{STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_CLEAR'+'COATGLOSS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_CLEAR'+'COATGLOSS_'+'INVERT\x0a\x20\x20\x20'+'\x20ccGlossin'+'ess\x20=\x201.0\x20'+'-\x20ccGlossi'+'ness;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20+=\x200.'+'0000001;\x0a}'+'\x0a',h1='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0aunif'+'orm\x20float\x20'+'material_c'+'learCoatBu'+'mpiness;\x0a#'+'endif\x0a\x0avoi'+'d\x20getClear'+'CoatNormal'+'()\x20{\x0a#ifde'+'f\x20STD_CLEA'+'RCOATNORMA'+'L_TEXTURE\x0a'+'\x20\x20\x20\x20vec3\x20n'+'ormalMap\x20='+'\x20{STD_CLEA'+'RCOATNORMA'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_UV}'+',\x20textureB'+'ias));\x0a\x20\x20\x20'+'\x20normalMap'+'\x20=\x20mix(vec'+'3(0.0,\x200.0'+',\x201.0),\x20no'+'rmalMap,\x20m'+'aterial_cl'+'earCoatBum'+'piness);\x0a\x20'+'\x20\x20\x20ccNorma'+'lW\x20=\x20norma'+'lize(dTBN\x20'+'*\x20normalMa'+'p);\x0a#else\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20dVer'+'texNormalW'+';\x0a#endif\x0a}'+'\x0a',d1='\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0avec2\x20ge'+'tCubemapFa'+'ceCoordina'+'tes(const\x20'+'vec3\x20dir,\x20'+'out\x20float\x20'+'faceIndex,'+'\x20out\x20vec2\x20'+'tileOffset'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20vAbs\x20=\x20'+'abs(dir);\x0a'+'\x20\x20\x20\x20float\x20'+'ma;\x0a\x20\x20\x20\x20ve'+'c2\x20uv;\x0a\x20\x20\x20'+'\x20if\x20(vAbs.'+'z\x20>=\x20vAbs.'+'x\x20&&\x20vAbs.'+'z\x20>=\x20vAbs.'+'y)\x20{\x20\x20\x20//\x20'+'front\x20/\x20ba'+'ck\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20faceInde'+'x\x20=\x20dir.z\x20'+'<\x200.0\x20?\x205.'+'0\x20:\x204.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2(dir.z\x20'+'<\x200.0\x20?\x20-d'+'ir.x\x20:\x20dir'+'.x,\x20-dir.y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.x\x20=\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20t'+'ileOffset.'+'y\x20=\x20dir.z\x20'+'<\x200.0\x20?\x201.'+'0\x20:\x200.0;\x0a\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if(vAbs.y'+'\x20>=\x20vAbs.x'+')\x20{\x20\x20//\x20to'+'p\x20index\x202,'+'\x20bottom\x20in'+'dex\x203\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20faceI'+'ndex\x20=\x20dir'+'.y\x20<\x200.0\x20?'+'\x203.0\x20:\x202.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ma\x20=\x200.5\x20/'+'\x20vAbs.y;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uv\x20'+'=\x20vec2(dir'+'.x,\x20dir.y\x20'+'<\x200.0\x20?\x20-d'+'ir.z\x20:\x20dir'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20tileOff'+'set.x\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.y\x20=\x20dir.'+'y\x20<\x200.0\x20?\x20'+'1.0\x20:\x200.0;'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'\x20=\x200.5\x20/\x20v'+'Abs.x;\x0a\x20\x20\x20'+('\x20\x20\x20\x20\x20uv\x20=\x20'+'vec2(dir.x'+'\x20<\x200.0\x20?\x20d'+'ir.z\x20:\x20-di'+'r.z,\x20-dir.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20tileOffs'+'et.x\x20=\x200.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'tileOffset'+'.y\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20uv'+'\x20*\x20ma\x20+\x200.'+'5;\x0a}\x0a\x0a//\x20c'+'onverts\x20un'+'normalized'+'\x20direction'+'\x20vector\x20to'+'\x20a\x20texture'+'\x20coordinat'+'e\x20for\x20a\x20cu'+'bemap\x20face'+'\x20stored\x20wi'+'thin\x20textu'+'re\x20atlas\x20d'+'escribed\x20b'+'y\x20the\x20view'+'port\x0avec2\x20'+'getCubemap'+'AtlasCoord'+'inates(con'+'st\x20vec3\x20om'+'niAtlasVie'+'wport,\x20flo'+'at\x20shadowE'+'dgePixels,'+'\x20float\x20sha'+'dowTexture'+'Resolution'+',\x20const\x20ve'+'c3\x20dir)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20faceIndex'+';\x0a\x20\x20\x20\x20vec2'+'\x20tileOffse'+'t;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapFac'+'eCoordinat'+'es(dir,\x20fa'+'ceIndex,\x20t'+'ileOffset)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'move\x20uv\x20co'+'ordinates\x20'+'inwards\x20in'+'side\x20to\x20co'+'mpensate\x20f'+'or\x20larger\x20'+'fov\x20when\x20r'+'endering\x20s'+'hadow\x20into'+'\x20atlas\x0a\x20\x20\x20'+'\x20float\x20atl'+'asFaceSize'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20tileSi'+'ze\x20=\x20shado'+'wTextureRe'+'solution\x20*'+'\x20atlasFace'+'Size;\x0a\x20\x20\x20\x20'+'float\x20offs'+'et\x20=\x20shado'+'wEdgePixel'+'s\x20/\x20tileSi'+'ze;\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv\x20*\x20ve'+'c2(1.0\x20-\x20o'+'ffset\x20*\x202.'+'0)\x20+\x20vec2('+'offset\x20*\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20*'+'=\x20atlasFac'+'eSize;\x0a\x0a\x20\x20'+'\x20\x20//\x20offse'+'t\x20into\x20fac'+'e\x20of\x20the\x20a')+('tlas\x20(3x3\x20'+'grid)\x0a\x20\x20\x20\x20'+'uv\x20+=\x20tile'+'Offset\x20*\x20a'+'tlasFaceSi'+'ze;\x0a\x0a\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nto\x20the\x20at'+'las\x20viewpo'+'rt\x0a\x20\x20\x20\x20uv\x20'+'+=\x20omniAtl'+'asViewport'+'.xy;\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a'),f1='\x0avec3\x20_get'+'CookieClus'+'tered(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20uv,\x20floa'+'t\x20intensit'+'y,\x20vec4\x20co'+'okieChanne'+'l)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20pixel\x20'+'=\x20mix(vec4'+'(1.0),\x20tex'+'ture2DLod('+'tex,\x20uv,\x200'+'.0),\x20inten'+'sity);\x0a\x20\x20\x20'+'\x20bool\x20isRg'+'b\x20=\x20dot(co'+'okieChanne'+'l.rgb,\x20vec'+'3(1.0))\x20=='+'\x203.0;\x0a\x20\x20\x20\x20'+'return\x20isR'+'gb\x20?\x20pixel'+'.rgb\x20:\x20vec'+'3(dot(pixe'+'l,\x20cookieC'+'hannel));\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0ave'+'c3\x20getCook'+'ie2DCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20mat4\x20'+'transform,'+'\x20vec3\x20worl'+'dPosition,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieC'+'hannel)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20p'+'rojPos\x20=\x20t'+'ransform\x20*'+'\x20vec4(worl'+'dPosition,'+'\x201.0);\x0a\x20\x20\x20'+'\x20return\x20_g'+'etCookieCl'+'ustered(TE'+'XTURE_PASS'+'(tex),\x20pro'+'jPos.xy\x20/\x20'+'projPos.w,'+'\x20intensity'+',\x20cookieCh'+'annel);\x0a}\x0a'+'\x0a//\x20getCoo'+'kie\x20for\x20cl'+'ustered\x20om'+'ni\x20light\x20w'+'ith\x20the\x20co'+'okie\x20textu'+'re\x20being\x20s'+'tored\x20in\x20t'+'he\x20cookie\x20'+'atlas\x0avec3'+'\x20getCookie'+'CubeCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec3\x20'+'dir,\x20float'+'\x20intensity'+',\x20vec4\x20coo'+'kieChannel'+',\x20float\x20sh'+'adowTextur'+'eResolutio'+'n,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20omniAtla'+'sViewport)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+('tureResolu'+'tion,\x20dir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getCoo'+'kieCluster'+'ed(TEXTURE'+'_PASS(tex)'+',\x20uv,\x20inte'+'nsity,\x20coo'+'kieChannel'+');\x0a}\x0a'),u1='\x0a\x0avec3\x20_ge'+'tShadowCoo'+'rdPerspZbu'+'ffer(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20wP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20shado'+'wMatrix\x20*\x20'+'vec4(wPos,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'yz\x20/=\x20proj'+'Pos.w;\x0a\x20\x20\x20'+'\x20return\x20pr'+'ojPos.xyz;'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20bias\x20i'+'s\x20already\x20'+'applied\x20on'+'\x20render\x0a}\x0a'+'\x0avec3\x20getS'+'hadowCoord'+'PerspZbuff'+'erNormalOf'+'fset(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20no'+'rmal)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20wPo'+'s\x20=\x20vPosit'+'ionW\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowCoordPe'+'rspZbuffer'+'(shadowMat'+'rix,\x20shado'+'wParams,\x20w'+'Pos);\x0a}\x0a\x0av'+'ec3\x20normal'+'OffsetPoin'+'tShadow(ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20lightPos'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm,\x20vec3'+'\x20normal)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20distScale'+'\x20=\x20length('+'lightDir);'+'\x0a\x20\x20\x20\x20vec3\x20'+'wPos\x20=\x20vPo'+'sitionW\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x20/'+'/0.02\x0a\x20\x20\x20\x20'+'vec3\x20dir\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0afloa'+'t\x20getShado'+'wOmniClust'+'eredPCF1(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20omniAtla'+'sViewport,'+'\x20float\x20sha'+'dowEdgePix'+'els,\x20vec3\x20'+'lightDir)\x20'+'{\x0a\x0a\x20\x20\x20\x20flo'+'at\x20shadowT'+('extureReso'+'lution\x20=\x20s'+'hadowParam'+'s.x;\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etCubemapA'+'tlasCoordi'+'nates(omni'+'AtlasViewp'+'ort,\x20shado'+'wEdgePixel'+'s,\x20shadowT'+'extureReso'+'lution,\x20li'+'ghtDir);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'shadowZ\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(uv,\x20sha'+'dowZ));\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF3'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF3'+'x3(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF5)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF5'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s')+('hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF5'+'x5(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a/'+'/\x20Clustere'+'d\x20Spot\x20Sam'+'pling\x20usin'+'g\x20atlas\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF1)\x0a\x0afl'+'oat\x20getSha'+'dowSpotClu'+'steredPCF1'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSha'+'dow(shadow'+'Map,\x20shado'+'wCoord);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x0af'+'loat\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF3x3'+'(SHADOWMAP'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a}\x0a\x0a#'+'endif\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x0afloa'+'t\x20getShado'+'wSpotClust'+'eredPCF5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC')+('oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a}'+'\x0a#endif\x0a'),p1='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20clu'+'sterWorldT'+'exture;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20lightsTe'+'xture;\x0a\x0a#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x20\x20\x20\x20//\x20TO'+'DO:\x20when\x20V'+'SM\x20shadow\x20'+'is\x20support'+'ed,\x20it\x20nee'+'ds\x20to\x20use\x20'+'sampler2D\x20'+'in\x20webgl2\x0a'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'DShadow\x20sh'+'adowAtlasT'+'exture;\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20CLUSTER'+'_COOKIES\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20cookieAtl'+'asTexture;'+'\x0a#endif\x0a\x0au'+'niform\x20int'+'\x20clusterMa'+'xCells;\x0a\x0a/'+'/\x201.0\x20if\x20c'+'lustered\x20l'+'ighting\x20ca'+'n\x20be\x20skipp'+'ed\x20(0\x20ligh'+'ts\x20in\x20the\x20'+'clusters)\x0a'+'uniform\x20fl'+'oat\x20cluste'+'rSkip;\x0a\x0aun'+'iform\x20vec3'+'\x20clusterCe'+'llsCountBy'+'BoundsSize'+';\x0auniform\x20'+'vec3\x20clust'+'erTextureS'+'ize;\x0aunifo'+'rm\x20vec3\x20cl'+'usterBound'+'sMin;\x0aunif'+'orm\x20vec3\x20c'+'lusterBoun'+'dsDelta;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsDot;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsMax;\x0au'+'niform\x20vec'+'2\x20shadowAt'+'lasParams;'+'\x0a\x0a//\x20struc'+'ture\x20stori'+'ng\x20light\x20p'+'roperties\x20'+'of\x20a\x20clust'+'ered\x20light'+'\x0a//\x20it\x27s\x20s'+('orted\x20to\x20h'+'ave\x20all\x20ve'+'ctors\x20alig'+'ned\x20to\x204\x20f'+'loats\x20to\x20l'+'imit\x20paddi'+'ng\x0astruct\x20'+'ClusterLig'+'htData\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x2032b'+'it\x20of\x20flag'+'s\x0a\x20\x20\x20\x20uint'+'\x20flags;\x0a\x0a\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20siz'+'es\x20/\x20orien'+'tation\x0a\x20\x20\x20'+'\x20vec3\x20half'+'Width;\x0a\x0a\x20\x20'+'\x20\x20bool\x20isS'+'pot;\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20sizes\x20'+'/\x20orientat'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20halfHei'+'ght;\x0a\x0a\x20\x20\x20\x20'+'//\x20light\x20i'+'ndex\x0a\x20\x20\x20\x20i'+'nt\x20lightIn'+'dex;\x0a\x0a\x20\x20\x20\x20'+'//\x20world\x20s'+'pace\x20posit'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20positio'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20shape\x0a\x20\x20'+'\x20\x20uint\x20sha'+'pe;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20direct'+'ion\x20(spot\x20'+'light\x20only'+')\x0a\x20\x20\x20\x20vec3'+'\x20direction'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20foll'+'ow\x20mode\x0a\x20\x20'+'\x20\x20bool\x20fal'+'loffModeLi'+'near;\x0a\x0a\x20\x20\x20'+'\x20//\x20color\x0a'+'\x20\x20\x20\x20vec3\x20c'+'olor;\x0a\x0a\x20\x20\x20'+'\x20//\x200.0\x20if'+'\x20the\x20light'+'\x20doesn\x27t\x20c'+'ast\x20shadow'+'s\x0a\x20\x20\x20\x20floa'+'t\x20shadowIn'+'tensity;\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20vec3\x20om'+'niAtlasVie'+'wport;\x0a\x0a\x20\x20'+'\x20\x20//\x20range'+'\x20of\x20the\x20li'+'ght\x0a\x20\x20\x20\x20fl'+'oat\x20range;'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'hannel\x20mas'+'k\x20-\x20one\x20of'+'\x20the\x20chann'+'els\x20has\x201,'+'\x20the\x20other'+'s\x20are\x200\x0a\x20\x20'+'\x20\x20vec4\x20coo'+'kieChannel'+'Mask;\x0a\x0a\x20\x20\x20'+'\x20//\x20compre'+'ssed\x20biase'+'s,\x20two\x20haf'+'-floats\x20st'+'ored\x20in\x20a\x20'+'float\x0a\x20\x20\x20\x20'+'float\x20bias'+'esData;\x0a\x0a\x20')+('\x20\x20\x20//\x20shad'+'ow\x20bias\x20va'+'lues\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wBias;\x0a\x20\x20\x20'+'\x20float\x20sha'+'dowNormalB'+'ias;\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20f'+'loat\x20angle'+'sData;\x0a\x0a\x20\x20'+'\x20\x20//\x20spot\x20'+'light\x20inne'+'r\x20and\x20oute'+'r\x20angle\x20co'+'sine\x0a\x20\x20\x20\x20f'+'loat\x20inner'+'ConeAngleC'+'os;\x0a\x20\x20\x20\x20fl'+'oat\x20outerC'+'oneAngleCo'+'s;\x0a\x0a\x20\x20\x20\x20//'+'\x20intensity'+'\x20of\x20the\x20co'+'okie\x0a\x20\x20\x20\x20f'+'loat\x20cooki'+'eIntensity'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20mask'+'\x0a\x20\x20\x20\x20//flo'+'at\x20mask;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Dynamic;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Lightmappe'+'d;\x0a};\x0a\x0a//\x20'+'Note:\x20on\x20s'+'ome\x20device'+'s\x20(tested\x20'+'on\x20Pixel\x203'+'A\x20XL),\x20thi'+'s\x20matrix\x20w'+'hen\x20stored'+'\x20inside\x20th'+'e\x20light\x20st'+'ruct\x20has\x20l'+'ower\x20preci'+'sion\x20compa'+'red\x20to\x0a//\x20'+'when\x20store'+'d\x20outside,'+'\x20so\x20we\x20sto'+'re\x20it\x20outs'+'ide\x20to\x20avo'+'id\x20spot\x20sh'+'adow\x20flick'+'ering.\x20Thi'+'s\x20might\x20ne'+'ed\x20to\x20be\x20d'+'one\x20to\x20oth'+'er\x20/\x20all\x20m'+'embers\x0a//\x20'+'of\x20the\x20str'+'ucture\x20if\x20'+'further\x20si'+'milar\x20issu'+'es\x20are\x20obs'+'erved.\x0a\x0a//'+'\x20shadow\x20(s'+'pot\x20light\x20'+'only)\x20/\x20co'+'okie\x20proje'+'ction\x20matr'+'ix\x0amat4\x20li'+'ghtProject'+'ionMatrix;'+'\x0a\x0avec4\x20sam'+'pleLightTe'+'xtureF(con'+'st\x20Cluster'+'LightData\x20'+'clusterLig'+'htData,\x20in'+'t\x20index)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20texelFet'+'ch(lightsT'+'exture,\x20iv'+'ec2(index,'+'\x20clusterLi'+'ghtData.li'+'ghtIndex),'+'\x200);\x0a}\x0a\x0avo'+'id\x20decodeC'+'lusterLigh')+('tCore(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData,\x20flo'+'at\x20lightIn'+'dex)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20index\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.li'+'ghtIndex\x20='+'\x20int(light'+'Index);\x0a\x0a\x20'+'\x20\x20\x20//\x20samp'+'le\x20data\x20en'+'coding\x20hal'+'f-float\x20va'+'lues\x20into\x20'+'32bit\x20uint'+'s\x0a\x20\x20\x20\x20vec4'+'\x20halfData\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_COL'+'OR_ANGLES_'+'BIAS});\x0a\x0a\x20'+'\x20\x20\x20//\x20stor'+'e\x20floats\x20w'+'e\x20decode\x20l'+'ater\x20as\x20ne'+'eded\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.angl'+'esData\x20=\x20h'+'alfData.z;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.biasesDa'+'ta\x20=\x20halfD'+'ata.w;\x0a\x0a\x20\x20'+'\x20\x20//\x20decom'+'press\x20colo'+'r\x20half-flo'+'ats\x0a\x20\x20\x20\x20ve'+'c2\x20colorRG'+'\x20=\x20unpackH'+'alf2x16(fl'+'oatBitsToU'+'int(halfDa'+'ta.x));\x0a\x20\x20'+'\x20\x20vec2\x20col'+'orB_\x20=\x20unp'+'ackHalf2x1'+'6(floatBit'+'sToUint(ha'+'lfData.y))'+';\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.color\x20='+'\x20vec3(colo'+'rRG,\x20color'+'B_.x)\x20*\x20{L'+'IGHT_COLOR'+'_DIVIDER};'+'\x0a\x0a\x20\x20\x20\x20//\x20p'+'osition\x20an'+'d\x20range,\x20f'+'ull\x20floats'+'\x0a\x20\x20\x20\x20vec4\x20'+'lightPosRa'+'nge\x20=\x20samp'+'leLightTex'+'tureF(clus'+'terLightDa'+'ta,\x20{CLUST'+'ER_TEXTURE'+'_POSITION_'+'RANGE});\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'position\x20='+'\x20lightPosR'+'ange.xyz;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.range\x20=\x20l'+'ightPosRan'+'ge.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20d'+'irection\x20&'+'\x20flags\x20dat'+'a\x0a\x20\x20\x20\x20vec4'+'\x20lightDir_'+'Flags\x20=\x20sa'+'mpleLightT'+'extureF(cl')+('usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_DIRECTI'+'ON_FLAGS})'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'spot\x20light'+'\x20direction'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.directio'+'n\x20=\x20lightD'+'ir_Flags.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x2032bit\x20fl'+'ags\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20floatBi'+'tsToUint(l'+'ightDir_Fl'+'ags.w);\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sSpot\x20=\x20(c'+'lusterLigh'+'tData.flag'+'s\x20&\x20(1u\x20<<'+'\x2030u))\x20!=\x20'+'0u;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.shape'+'\x20=\x20(cluste'+'rLightData'+'.flags\x20>>\x20'+'28u)\x20&\x200x3'+'u;\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.fallof'+'fModeLinea'+'r\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2027u'+'))\x20==\x200u;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.shadowInt'+'ensity\x20=\x20f'+'loat((clus'+'terLightDa'+'ta.flags\x20>'+'>\x200u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eIntensity'+'\x20=\x20float(('+'clusterLig'+'htData.fla'+'gs\x20>>\x208u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sDynamic\x20='+'\x20(clusterL'+'ightData.f'+'lags\x20&\x20(1u'+'\x20<<\x2022u))\x20'+'!=\x200u;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.is'+'Lightmappe'+'d\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2021u'+'))\x20!=\x200u;\x0a'+'}\x0a\x0avoid\x20de'+'codeCluste'+'rLightSpot'+'(inout\x20Clu'+'sterLightD'+'ata\x20cluste'+'rLightData'+')\x20{\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20cos\x20ang'+'les\x0a\x20\x20\x20\x20ve'+'c2\x20angles\x20'+'=\x20unpackHa'+'lf2x16(flo'+'atBitsToUi'+'nt(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight')+('Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0av'+'oid\x20decode'+'ClusterLig'+'htOmniAtla'+'sViewport('+'inout\x20Clus'+'terLightDa'+'ta\x20cluster'+'LightData)'+'\x20{\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.omniAt'+'lasViewpor'+'t\x20=\x20sample'+'LightTextu'+'reF(cluste'+'rLightData'+',\x20{CLUSTER'+'_TEXTURE_P'+'ROJ_MAT_0}'+').xyz;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtAreaDat'+'a(inout\x20Cl'+'usterLight'+'Data\x20clust'+'erLightDat'+'a)\x20{\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.half'+'Width\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_AREA_DA'+'TA_WIDTH})'+'.xyz;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.hal'+'fHeight\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData,\x20{C'+'LUSTER_TEX'+'TURE_AREA_'+'DATA_HEIGH'+'T}).xyz;\x0a}'+'\x0a\x0avoid\x20dec'+'odeCluster'+'LightProje'+'ctionMatri'+'xData(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20m0\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData,\x20{CL'+'USTER_TEXT'+'URE_PROJ_M'+'AT_0});\x0a\x20\x20'+'\x20\x20vec4\x20m1\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_PRO'+'J_MAT_1});'+'\x0a\x20\x20\x20\x20vec4\x20'+'m2\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a,\x20{CLUSTE'+'R_TEXTURE_'+'PROJ_MAT_2'+'});\x0a\x20\x20\x20\x20ve'+'c4\x20m3\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight')+('Data,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4('+'m0,\x20m1,\x20m2'+',\x20m3);\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtShadowD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20//\x20s'+'hadow\x20bias'+'es\x0a\x20\x20\x20\x20vec'+'2\x20biases\x20='+'\x20unpackHal'+'f2x16(floa'+'tBitsToUin'+'t(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20extra'+'ct\x20channel'+'\x20mask\x20from'+'\x20flags\x0a\x20\x20\x20'+'\x20uint\x20cook'+'ieFlags\x20=\x20'+'(clusterLi'+'ghtData.fl'+'ags\x20>>\x2023u'+')\x20&\x200x0Fu;'+'\x20\x20//\x204bits'+',\x20each\x20bit'+'\x20enables\x20a'+'\x20channel\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'cookieChan'+'nelMask\x20=\x20'+'vec4(uvec4'+'(cookieFla'+'gs)\x20&\x20uvec'+'4(1u,\x202u,\x20'+'4u,\x208u));\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.cookieCha'+'nnelMask\x20='+'\x20step(1.0,'+'\x20clusterLi'+'ghtData.co'+'okieChanne'+'lMask);\x20\x20/'+'/\x20Normaliz'+'e\x20to\x200.0\x20o'+'r\x201.0\x0a}\x0a\x0av'+'oid\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20Cluster'+'LightData\x20'+'light,\x20\x0a\x20\x20'+'\x20\x20vec3\x20wor'+'ldNormal,\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'viewDir,\x20\x0a'+'\x20\x20\x20\x20vec3\x20r'+'eflectionD'+'ir,\x0a#if\x20de'+'fined(LIT_'+'CLEARCOAT)'+'\x0a\x20\x20\x20\x20vec3\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20')+('\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20mat3\x20tb'+'n,\x20\x0a#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20vec'+'3\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20vec3\x20cl'+'earcoat_wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20float'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20float\x20sh'+'een_gloss,'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce_intensi'+'ty\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20vec'+'3(1.0);\x0a\x20\x20'+'\x20\x20float\x20di'+'ffuseAtten'+'uation\x20=\x201'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20fallof'+'fAttenuati'+'on\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20omn'+'i\x20part\x20of\x20'+'the\x20light\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ightDirW\x20='+'\x20evalOmniL'+'ight(light'+'.position)'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'ormW\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20')+('else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fall'+'offAttenua'+'tion\x20=\x20get'+'FalloffLin'+'ear(light.'+'range,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20getFa'+'lloffInvSq'+'uared(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_AREALIGH'+'TS\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shape\x20!='+'\x20{LIGHTSHA'+'PE_PUNCTUA'+'L})\x20{\x20//\x20a'+'rea\x20light\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20hand'+'le\x20light\x20s'+'hape\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20diffuse'+'Attenuatio'+'n\x20=\x20getRec'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirW,\x20lig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'DISK})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getD'+'iskLightDi'+'ffuse(worl'+'dNormal,\x20v'+'iewDir,\x20li'+'ghtDirW,\x20l'+'ightDirNor'+'mW)\x20*\x2016.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20{\x20//\x20sphe'+'re\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getSphereL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20g'+'etLightDif'+'fuse(world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+');\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spot'+'\x20light\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtSpot(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20*=\x20'+'getSpotEff'+'ect(light.'+'direction,'+'\x20light.inn'+'erConeAngl'+'eCos,\x20ligh'+'t.outerCon'+'eAngleCos,'+'\x20lightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_COOK'+'IES)\x20||\x20de'+'fined(CLUS'+'TER_SHADOW'+'S)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20shadow'+'\x20/\x20cookie\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shadowIn'+'tensity\x20>\x20'+'0.0\x20||\x20lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'ared\x20shado'+'w\x20/\x20cookie'+'\x20data\x20depe'+'nds\x20on\x20lig'+'ht\x20type\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightOmniAt'+'lasViewpor'+'t(light);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20shadowTex'+'tureResolu'+'tion\x20=\x20sha'+'dowAtlasPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadowEdge'+'Pixels\x20=\x20s'+'hadowAtlas'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_COOKIES\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'cookie\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20de'+'codeCluste'+'rLightCook'+'ieData(lig'+'ht);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.isSp'+'ot)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'cookieAtte'+'nuation\x20=\x20'+'getCookie2'+'DClustered'+'(TEXTURE_P'+'ASS(cookie'+'AtlasTextu'+'re),\x20light'+'Projection'+'Matrix,\x20vP'+'ositionW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20cookieAt'+'tenuation\x20'+'=\x20getCooki'+'eCubeClust'+'ered(TEXTU'+'RE_PASS(co'+'okieAtlasT'+'exture),\x20l'+'ightDirW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask,\x20sh'+'adowTextur'+'eResolutio'+'n,\x20shadowE'+'dgePixels,'+'\x20light.omn'+'iAtlasView'+'port);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20shadow\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shadow'+'Intensity\x20'+'>\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d')+('ecodeClust'+'erLightSha'+'dowData(li'+'ght);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20shadowPa'+'rams\x20=\x20vec'+'4(shadowTe'+'xtureResol'+'ution,\x20lig'+'ht.shadowN'+'ormalBias,'+'\x20light.sha'+'dowBias,\x201'+'.0\x20/\x20light'+'.range);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'isSpot)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ot\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'hadowCoord'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat'+'rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F1)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CF1(SHADOW'+'MAP_PASS(s'+'hadowAtlas'+'Texture),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20de'+'fined(CLUS'+'TER_SHADOW'+'_TYPE_PCF3'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_PASS(sha'+'dowAtlasTe'+'xture),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#elif\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF5('+'SHADOWMAP_'+'PASS(shado'+'wAtlasText'+'ure),\x20shad'+'owCoord,\x20s'+'hadowParam')+('s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCSS)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20shadow\x20='+'\x20getShadow'+'SpotCluste'+'redPCSS(SH'+'ADOWMAP_PA'+'SS(shadowA'+'tlasTextur'+'e),\x20shadow'+'Coord,\x20sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20m'+'ix(1.0,\x20sh'+'adow,\x20ligh'+'t.shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20om'+'ni\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20d'+'ir\x20=\x20norma'+'lOffsetPoi'+'ntShadow(s'+'hadowParam'+'s,\x20light.p'+'osition,\x20l'+'ightDirW,\x20'+'lightDirNo'+'rmW,\x20geome'+'tricNormal'+');\x20\x20//\x20nor'+'malBias\x20ad'+'justed\x20for'+'\x20distance\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_SHADO'+'W_TYPE_PCF'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20sha'+'dow\x20=\x20getS'+'hadowOmniC'+'lusteredPC'+'F1(SHADOWM'+'AP_PASS(sh'+'adowAtlasT'+'exture),\x20s'+'hadowParam'+'s,\x20light.o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20dir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#eli'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF3)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadowOm'+'niClustere'+'dPCF3(SHAD'+'OWMAP_PASS'+'(shadowAtl'+'asTexture)'+',\x20shadowPa'+'rams,\x20ligh'+'t.omniAtla'+'sViewport,')+('\x20shadowEdg'+'ePixels,\x20d'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20shadow\x20'+'=\x20getShado'+'wOmniClust'+'eredPCF5(S'+'HADOWMAP_P'+'ASS(shadow'+'AtlasTextu'+'re),\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20*=\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20areaDi'+'ffuse\x20=\x20(d'+'iffuseAtte'+'nuation\x20*\x20'+'falloffAtt'+'enuation)\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaDiffuse\x20'+'=\x20mix(area'+'Diffuse,\x20v'+'ec3(0),\x20dL'+'TCSpecFres'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20dif'+'fuse\x20-\x20it\x20'+'does\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20')+('into\x20specu'+'lar\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20a'+'reaDiffuse'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20and\x20clear'+'\x20coat\x20are\x20'+'material\x20s'+'ettings\x20an'+'d\x20get\x20incl'+'uded\x20by\x20a\x20'+'define\x20bas'+'ed\x20on\x20the\x20'+'material\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20specular'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20areaLig'+'htSpecular'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'RECT})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecular\x20=\x20g'+'etRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20area'+'LightSpecu'+'lar\x20=\x20getD'+'iskLightSp'+'ecular(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x20//\x20sp'+'here\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getSp'+'hereLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp'+'ecFres\x20*\x20a'+'reaLightSp'+'ecular\x20*\x20f'+'alloffAtte'+'nuation\x20*\x20'+'light.colo'+'r\x20*\x20cookie'+'Attenuatio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x20clear'+'\x20coat\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20areaLigh'+'tSpecularC')+('C;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shape\x20'+'==\x20{LIGHTS'+'HAPE_RECT}'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getRectLig'+'htSpecular'+'(clearcoat'+'_worldNorm'+'al,\x20viewDi'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(light'+'.shape\x20==\x20'+'{LIGHTSHAP'+'E_DISK})\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'arCC\x20=\x20get'+'DiskLightS'+'pecular(cl'+'earcoat_wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x20'+'//\x20sphere\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaLi'+'ghtSpecula'+'rCC\x20=\x20getS'+'phereLight'+'Specular(c'+'learcoat_w'+'orldNormal'+',\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20+=\x20ccLTCS'+'pecFres\x20*\x20'+'areaLightS'+'pecularCC\x20'+'*\x20falloffA'+'ttenuation'+'\x20*\x20light.c'+'olor\x20\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20{\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'unctualDif'+'fuse\x20=\x20fal'+'loffAttenu'+'ation\x20*\x20li'+'ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'CLUSTER_AR'+'EALIGHTS)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20punctual')+('Diffuse\x20=\x20'+'mix(punctu'+'alDiffuse,'+'\x20vec3(0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20punctu'+'alDiffuse;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20and\x20cle'+'ar\x20coat\x20ar'+'e\x20material'+'\x20settings\x20'+'and\x20get\x20in'+'cluded\x20by\x20'+'a\x20define\x20b'+'ased\x20on\x20th'+'e\x20material'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20halfD'+'ir\x20=\x20norma'+'lize(-ligh'+'tDirNormW\x20'+'+\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR_FRESNEL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htSpecular'+'(halfDir,\x20'+'reflection'+'Dir,\x20world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation\x20*'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'viewDir,\x20h'+'alfDir),\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descence_i'+'ntensity\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecular('+'halfDir,\x20c'+'learcoatRe'+'flectionDi'+'r,\x20clearco'+'at_worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'clearcoat_'+'gloss,\x20tbn'+')\x20*\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation\x20*\x20g'+'etFresnelC'+'C(dot(view'+'Dir,\x20halfD'+'ir));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20getLi'+'ghtSpecula'+'r(halfDir,'+'\x20clearcoat'+'Reflection'+'Dir,\x20clear'+'coat_world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20clearcoa'+'t_gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HEEN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec')+('ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'ir,\x20worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNormW,'+'\x20sheen_glo'+'ss)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20Wri'+'te\x20to\x20glob'+'al\x20attenua'+'tion\x20value'+'s\x20(for\x20lig'+'htmapper)\x0a'+'\x20\x20\x20\x20dAtten'+'\x20=\x20falloff'+'Attenuatio'+'n;\x0a\x20\x20\x20\x20dLi'+'ghtDirNorm'+'W\x20=\x20lightD'+'irNormW;\x0a}'+'\x0a\x0avoid\x20eva'+'luateClust'+'erLight(\x0a\x20'+'\x20\x20\x20float\x20l'+'ightIndex,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20worldNorm'+'al,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20viewDi'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20reflect'+'ionDir,\x20\x0a#'+'if\x20defined'+'(LIT_CLEAR'+'COAT)\x0a\x20\x20\x20\x20'+'vec3\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'float\x20glos'+'s,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20specula'+'rity,\x20\x0a\x20\x20\x20'+'\x20vec3\x20geom'+'etricNorma'+'l,\x20\x0a\x20\x20\x20\x20ma'+'t3\x20tbn,\x20\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20ve'+'c3\x20clearco'+'at_worldNo'+'rmal,\x0a\x20\x20\x20\x20'+'float\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20flo'+'at\x20sheen_g'+'loss,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escence_in'+'tensity\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'decode\x20cor'+'e\x20light\x20da'+'ta\x20from\x20te'+'xtures\x0a\x20\x20\x20'+'\x20ClusterLi'+'ghtData\x20cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(cluster'+'LightData,'+'\x20lightInde'+'x);\x0a\x0a\x20\x20\x20\x20/'+'/\x20evaluate'+'\x20light\x20if\x20'+'it\x20uses\x20ac'+'cepted\x20lig'+'ht\x20mask\x0a\x20\x20'+'\x20\x20#ifdef\x20C')+('LUSTER_MES'+'H_DYNAMIC_'+'LIGHTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20bool\x20'+'acceptLigh'+'tMask\x20=\x20cl'+'usterLight'+'Data.isDyn'+'amic;\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20bool\x20a'+'cceptLight'+'Mask\x20=\x20clu'+'sterLightD'+'ata.isLigh'+'tmapped;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20if\x20(a'+'cceptLight'+'Mask)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clusterLi'+'ghtData,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20worldNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vi'+'ewDir,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'reflection'+'Dir,\x20\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x20\x0a'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_worldNorm'+'al,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sheen'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a}\x0a\x0avoid'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20reflecti'+'onDir,\x20\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20v'+'ec3\x20clearc'+'oatReflect'+'ionDir,\x0a#e'+'ndif\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20mat'+'3\x20tbn,\x20\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a#end')+('if\x0a\x20\x20\x20\x20vec'+'3\x20clearcoa'+'t_worldNor'+'mal,\x0a\x20\x20\x20\x20f'+'loat\x20clear'+'coat_gloss'+',\x0a\x20\x20\x20\x20floa'+'t\x20sheen_gl'+'oss,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scence_int'+'ensity\x0a)\x20{'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'kip\x20lights'+'\x20if\x20no\x20lig'+'hts\x20at\x20all'+'\x0a\x20\x20\x20\x20if\x20(c'+'lusterSkip'+'\x20>\x200.5)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20positi'+'on\x20to\x203d\x20i'+'nteger\x20cel'+'l\x20cordinat'+'es\x20in\x20the\x20'+'cluster\x20st'+'ructure\x0a\x20\x20'+'\x20\x20vec3\x20cel'+'lCoords\x20=\x20'+'floor((vPo'+'sitionW\x20-\x20'+'clusterBou'+'ndsMin)\x20*\x20'+'clusterCel'+'lsCountByB'+'oundsSize)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'no\x20lightin'+'g\x20when\x20cel'+'l\x20coordina'+'te\x20is\x20out\x20'+'of\x20range\x0a\x20'+'\x20\x20\x20if\x20(!(a'+'ny(lessTha'+'n(cellCoor'+'ds,\x20vec3(0'+'.0)))\x20||\x20a'+'ny(greater'+'ThanEqual('+'cellCoords'+',\x20clusterC'+'ellsMax)))'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cell'+'\x20index\x20(ma'+'pping\x20from'+'\x203d\x20cell\x20c'+'oordinates'+'\x20to\x20linear'+'\x20memory)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20cellInd'+'ex\x20=\x20dot(c'+'lusterCell'+'sDot,\x20cell'+'Coords);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20convert\x20c'+'ell\x20index\x20'+'to\x20uv\x20coor'+'dinates\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20clusterV'+'\x20=\x20floor(c'+'ellIndex\x20*'+'\x20clusterTe'+'xtureSize.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20cl'+'usterU\x20=\x20c'+'ellIndex\x20-'+'\x20(clusterV'+'\x20*\x20cluster'+'TextureSiz'+'e.x);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20lo'+'op\x20over\x20ma'+'ximum\x20numb'+'er\x20of\x20ligh'+'t\x20cells\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20light'+'CellIndex\x20'+'=\x200;\x20light'+'CellIndex\x20'+'<\x20clusterM'+'axCells;\x20l'+'ightCellIn')+('dex++)\x20{\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20using'+'\x20a\x20single\x20'+'channel\x20te'+'xture\x20with'+'\x20data\x20in\x20r'+'ed\x20channel'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20l'+'ightIndex\x20'+'=\x20texelFet'+'ch(cluster'+'WorldTextu'+'re,\x20ivec2('+'int(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20clusterV'+'),\x200).x;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'tIndex\x20<=\x20'+'0.0)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20break;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20evaluateC'+'lusterLigh'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightIndex\x20'+'*\x20255.0,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel,\x0a#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20cl'+'earcoat_gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sheen_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),m1='\x0avec3\x20comb'+'ineColor(v'+'ec3\x20albedo'+',\x20vec3\x20she'+'enSpecular'+'ity,\x20float'+'\x20clearcoat'+'Specularit'+'y)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20ret\x20=\x20'+'vec3(0);\x0a#'+'ifdef\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20ret\x20'+'+=\x20(dDiffu'+'seLight\x20-\x20'+'light_glob'+'alAmbient)'+'\x20*\x20albedo\x20'+'+\x20material'+'_ambient\x20*'+'\x20light_glo'+'balAmbient'+';\x0a#else\x0a\x20\x20'+'\x20\x20ret\x20+=\x20a'+'lbedo\x20*\x20dD'+'iffuseLigh'+'t;\x0a#endif\x0a'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20ret\x20+='+'\x20dSpecular'+'Light;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_REFLE'+'CTIONS\x0a\x20\x20\x20'+'\x20ret\x20+=\x20dR'+'eflection.'+'rgb\x20*\x20dRef'+'lection.a;'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'float\x20shee'+'nScaling\x20='+'\x201.0\x20-\x20max'+'(max(sheen'+'Specularit'+'y.r,\x20sheen'+'Specularit'+'y.g),\x20shee'+'nSpeculari'+'ty.b)\x20*\x200.'+'157;\x0a\x20\x20\x20\x20r'+'et\x20=\x20ret\x20*'+'\x20sheenScal'+'ing\x20+\x20(sSp'+'ecularLigh'+'t\x20+\x20sRefle'+'ction.rgb)'+'\x20*\x20sheenSp'+'ecularity;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20float\x20c'+'learCoatSc'+'aling\x20=\x201.'+'0\x20-\x20ccFres'+'nel\x20*\x20clea'+'rcoatSpecu'+'larity;\x0a\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20clearC'+'oatScaling'+'\x20+\x20(ccSpec'+'ularLight\x20'+'+\x20ccReflec'+'tion)\x20*\x20cl'+'earcoatSpe'+'cularity;\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20return\x20r'+'et;\x0a}\x0a',_1='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blitT'+'exture;\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20texture'+'2D(blitTex'+'ture,\x20uv0)'+';\x0a\x20\x20\x20\x20}\x0a',g1='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'erCube\x20bli'+'tTexture;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20inv'+'ViewProj;\x0a'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20vec4('+'uv0\x20*\x202.0\x20'+'-\x201.0,\x200.5'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20worldPos\x20'+'=\x20invViewP'+'roj\x20*\x20proj'+'Pos;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20te'+'xtureCube('+'blitTextur'+'e,\x20worldPo'+'s.xyz);\x0a\x20\x20'+'\x20\x20}\x0a',S1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uv0'+'.y\x20=\x201.0\x20-'+'\x20uv0.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20}\x0a',y1='\x0a//\x20light\x20'+'cookie\x20fun'+'ctionality'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0avec4'+'\x20getCookie'+'2D(sampler'+'2D\x20tex,\x20ma'+'t4\x20transfo'+'rm,\x20float\x20'+'intensity)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20projPos\x20'+'=\x20transfor'+'m\x20*\x20vec4(v'+'PositionW,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'y\x20/=\x20projP'+'os.w;\x0a\x20\x20\x20\x20'+'return\x20mix'+'(vec4(1.0)'+',\x20texture2'+'D(tex,\x20pro'+'jPos.xy),\x20'+'intensity)'+';\x0a}\x0a\x0avec4\x20'+'getCookie2'+'DClip(samp'+'ler2D\x20tex,'+'\x20mat4\x20tran'+'sform,\x20flo'+'at\x20intensi'+'ty)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20trans'+'form\x20*\x20vec'+'4(vPositio'+'nW,\x201.0);\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20/=\x20pr'+'ojPos.w;\x0a\x20'+'\x20\x20\x20if\x20(pro'+'jPos.x\x20<\x200'+'.0\x20||\x20proj'+'Pos.x\x20>\x201.'+'0\x20||\x20projP'+'os.y\x20<\x200.0'+'\x20||\x20projPo'+'s.y\x20>\x201.0\x20'+'||\x20projPos'+'.z\x20<\x200.0)\x20'+'return\x20vec'+'4(0.0);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(vec4(1.'+'0),\x20textur'+'e2D(tex,\x20p'+'rojPos.xy)'+',\x20intensit'+'y);\x0a}\x0a\x0avec'+'4\x20getCooki'+'e2DXform(s'+'ampler2D\x20t'+'ex,\x20mat4\x20t'+'ransform,\x20'+'float\x20inte'+'nsity,\x20vec'+'4\x20cookieMa'+'trix,\x20vec2'+'\x20cookieOff'+'set)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20proj'+'Pos\x20=\x20tran'+'sform\x20*\x20ve'+'c4(vPositi'+'onW,\x201.0);'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20/=\x20p'+'rojPos.w;\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20+=\x20co'+'okieOffset'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookie2D'+'ClipXform('+('sampler2D\x20'+'tex,\x20mat4\x20'+'transform,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieM'+'atrix,\x20vec'+'2\x20cookieOf'+'fset)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'jPos\x20=\x20tra'+'nsform\x20*\x20v'+'ec4(vPosit'+'ionW,\x201.0)'+';\x0a\x20\x20\x20\x20proj'+'Pos.xy\x20/=\x20'+'projPos.w;'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20+=\x20c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20if\x20'+'(projPos.x'+'\x20<\x200.0\x20||\x20'+'projPos.x\x20'+'>\x201.0\x20||\x20p'+'rojPos.y\x20<'+'\x200.0\x20||\x20pr'+'ojPos.y\x20>\x20'+'1.0\x20||\x20pro'+'jPos.z\x20<\x200'+'.0)\x20return'+'\x20vec4(0.0)'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookieCu'+'be(sampler'+'Cube\x20tex,\x20'+'mat4\x20trans'+'form,\x20floa'+'t\x20intensit'+'y)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20mix('+'vec4(1.0),'+'\x20textureCu'+'be(tex,\x20dL'+'ightDirNor'+'mW\x20*\x20mat3('+'transform)'+'),\x20intensi'+'ty);\x0a}\x0a'),v1='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20envBoxM'+'in;\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20envBoxMax'+';\x0a#endif\x0a\x0a'+'vec3\x20cubeM'+'apProject('+'vec3\x20nrdir'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_CUB'+'EMAP_PROJE'+'CTION\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20c'+'ubeMapRota'+'te(nrdir);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20LIT_CUBEM'+'AP_PROJECT'+'ION\x20==\x20BOX'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'nrdir\x20=\x20cu'+'beMapRotat'+'e(nrdir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20rbmax\x20'+'=\x20(envBoxM'+'ax\x20-\x20vPosi'+'tionW)\x20/\x20n'+'rdir;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20r'+'bmin\x20=\x20(en'+'vBoxMin\x20-\x20'+'vPositionW'+')\x20/\x20nrdir;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20rbmin'+'max\x20=\x20mix('+'rbmin,\x20rbm'+'ax,\x20vec3(g'+'reaterThan'+'(nrdir,\x20ve'+'c3(0.0))))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20fa\x20='+'\x20min(min(r'+'bminmax.x,'+'\x20rbminmax.'+'y),\x20rbminm'+'ax.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20posonbox\x20'+'=\x20vPositio'+'nW\x20+\x20nrdir'+'\x20*\x20fa;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envBoxPos\x20'+'=\x20(envBoxM'+'in\x20+\x20envBo'+'xMax)\x20*\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20no'+'rmalize(po'+'sonbox\x20-\x20e'+'nvBoxPos);'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',x1='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20mat3\x20cu'+'beMapRotat'+'ionMatrix;'+'\x0a#endif\x0a\x0av'+'ec3\x20cubeMa'+'pRotate(ve'+'c3\x20refDir)'+'\x20{\x0a#ifdef\x20'+'CUBEMAP_RO'+'TATION\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'#else\x0a\x20\x20\x20\x20'+'return\x20ref'+'Dir;\x0a#endi'+'f\x0a}\x0a',T1='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0agl_FragCo'+'lor\x20=\x20vec4'+'(litArgs_a'+'lbedo\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_WORLD'+'_NORMAL_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(litArgs'+'_worldNorm'+'al\x20*\x200.5\x20+'+'\x200.5,\x201.0)'+';\x0a#endif\x0a\x0a'+'#ifdef\x20DEB'+'UG_OPACITY'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(vec3'+'(litArgs_o'+'pacity)\x20,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_SPE'+'CULARITY_P'+'ASS\x0agl_Fra'+'gColor\x20=\x20v'+'ec4(litArg'+'s_specular'+'ity,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_GLOSS_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(vec3(li'+'tArgs_glos'+'s)\x20,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_METALNES'+'S_PASS\x0agl_'+'FragColor\x20'+'=\x20vec4(vec'+'3(litArgs_'+'metalness)'+'\x20,\x201.0);\x0a#'+'endif\x0a\x0a#if'+'def\x20DEBUG_'+'AO_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ve'+'c3(litArgs'+'_ao)\x20,\x201.0'+');\x0a#endif\x0a'+'\x0a#ifdef\x20DE'+'BUG_EMISSI'+'ON_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ga'+'mmaCorrect'+'Output(lit'+'Args_emiss'+'ion),\x201.0)'+';\x0a#endif\x0a',w1='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0ali'+'tArgs_albe'+'do\x20=\x20vec3('+'0.5);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_UV0'+'_PASS\x0a#ifd'+'ef\x20VARYING'+'_VUV0\x0alitA'+'rgs_albedo'+'\x20=\x20vec3(vU'+'v0,\x200);\x0a#e'+'lse\x0alitArg'+'s_albedo\x20='+'\x20vec3(0);\x0a'+'#endif\x0a#en'+'dif\x0a',E1='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0avec3\x20'+'decodeLine'+'ar(vec4\x20ra'+'w)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw.'+'rgb;\x0a}\x0a\x0afl'+'oat\x20decode'+'Gamma(floa'+'t\x20raw)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'pow(raw,\x202'+'.2);\x0a}\x0a\x0ave'+'c3\x20decodeG'+'amma(vec3\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w(raw,\x20vec'+'3(2.2));\x0a}'+'\x0a\x0avec3\x20dec'+'odeGamma(v'+'ec4\x20raw)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(raw.'+'xyz,\x20vec3('+'2.2));\x0a}\x0a\x0a'+'vec3\x20decod'+'eRGBM(vec4'+'\x20raw)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20col'+'or\x20=\x20(8.0\x20'+'*\x20raw.a)\x20*'+'\x20raw.rgb;\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0av'+'ec3\x20decode'+'RGBP(vec4\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20colo'+'r\x20=\x20raw.rg'+'b\x20*\x20(-raw.'+'a\x20*\x207.0\x20+\x20'+'8.0);\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBE'+'(vec4\x20raw)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(raw.a\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec3(0.0'+',\x200.0,\x200.0'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20raw.xyz\x20*'+'\x20pow(2.0,\x20'+'raw.w\x20*\x2025'+'5.0\x20-\x20128.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0avec4\x20pa'+'ssThrough('+'vec4\x20raw)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20raw;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'Z(vec4\x20nma'+'p)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20nmap'+'.xyz\x20*\x202.0'+'\x20-\x201.0;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'(vec4\x20nmap'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20normal;'+'\x0a\x20\x20\x20\x20norma'+'l.xy\x20=\x20nma'+'p.wy\x20*\x202.0'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20normal.z'+'\x20=\x20sqrt(1.'+'0\x20-\x20clamp('+'dot(normal'+'.xy,\x20norma'+'l.xy),\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20return\x20'+'normal;\x0a}\x0a'+'\x0a#endif\x0a',b1='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0avec3\x20'+'detailMode'+'_mul(vec3\x20'+'c1,\x20vec3\x20c'+'2)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20c1\x20*'+'\x20c2;\x0a}\x0a\x0ave'+'c3\x20detailM'+'ode_add(ve'+'c3\x20c1,\x20vec'+'3\x20c2)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'1\x20+\x20c2;\x0a}\x0a'+'\x0a//\x20https:'+'//en.wikip'+'edia.org/w'+'iki/Blend_'+'modes#Scre'+'en\x0avec3\x20de'+'tailMode_s'+'creen(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x201.0'+'\x20-\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2);\x0a}\x0a\x0a/'+'/\x20https://'+'en.wikiped'+'ia.org/wik'+'i/Blend_mo'+'des#Overla'+'y\x0avec3\x20det'+'ailMode_ov'+'erlay(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(1.0\x20-\x202.0'+'\x20*\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2),\x202.0\x20'+'*\x20c1\x20*\x20c2,'+'\x20step(c1,\x20'+'vec3(0.5))'+');\x0a}\x0a\x0avec3'+'\x20detailMod'+'e_min(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20min'+'(c1,\x20c2);\x0a'+'}\x0a\x0avec3\x20de'+'tailMode_m'+'ax(vec3\x20c1'+',\x20vec3\x20c2)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20max(c1'+',\x20c2);\x0a}\x0a\x0a'+'#endif\x0a',A1='\x0auniform\x20v'+'ec3\x20materi'+'al_diffuse'+';\x0a\x0a#ifdef\x20'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'detailMode'+'sPS\x22\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20mate'+'rial_diffu'+'se.rgb;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_DIFFUS'+'E_TEXTURE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20albedoT'+'exture\x20=\x20{'+'STD_DIFFUS'+'E_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_DIF'+'FUSE_TEXTU'+'RE_NAME},\x20'+'{STD_DIFFU'+'SE_TEXTURE'+'_UV},\x20text'+'ureBias)).'+'{STD_DIFFU'+'SE_TEXTURE'+'_CHANNEL};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSEDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'albedoDeta'+'il\x20=\x20{STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_DECODE}('+'texture2DB'+'ias({STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'DETAIL_TEX'+'TURE_UV},\x20'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20*=\x20albe'+'doTexture;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSE_VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dAlbedo\x20*'+'=\x20gammaCor'+'rectInput('+'saturate(v'+'VertexColo'+'r.{STD_DIF'+'FUSE_VERTE'+'X_CHANNEL}'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',C1='\x0auniform\x20v'+'ec3\x20materi'+'al_emissiv'+'e;\x0auniform'+'\x20float\x20mat'+'erial_emis'+'siveIntens'+'ity;\x0a\x0avoid'+'\x20getEmissi'+'on()\x20{\x0a\x20\x20\x20'+'\x20dEmission'+'\x20=\x20materia'+'l_emissive'+'\x20*\x20materia'+'l_emissive'+'Intensity;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_TEXT'+'URE\x0a\x20\x20\x20\x20dE'+'mission\x20*='+'\x20{STD_EMIS'+'SIVE_TEXTU'+'RE_DECODE}'+'(texture2D'+'Bias({STD_'+'EMISSIVE_T'+'EXTURE_NAM'+'E},\x20{STD_E'+'MISSIVE_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'EMISSIVE_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_EMISSI'+'VE_VERTEX\x0a'+'\x20\x20\x20\x20dEmiss'+'ion\x20*=\x20gam'+'maCorrectI'+'nput(satur'+'ate(vVerte'+'xColor.{ST'+'D_EMISSIVE'+'_VERTEX_CH'+'ANNEL}));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a',P1='\x0avec4\x20enco'+'deLinear(v'+'ec3\x20source'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'source,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeGa'+'mma(vec3\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec4(pow(s'+'ource\x20+\x200.'+'0000001,\x20v'+'ec3(1.0\x20/\x20'+'2.2)),\x201.0'+');\x0a}\x0a\x0avec4'+'\x20encodeRGB'+'M(vec3\x20sou'+'rce)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20result;'+'\x0a\x20\x20\x20\x20resul'+'t.rgb\x20=\x20po'+'w(source.r'+'gb,\x20vec3(0'+'.5));\x0a\x20\x20\x20\x20'+'result.rgb'+'\x20*=\x201.0\x20/\x20'+'8.0;\x0a\x0a\x20\x20\x20\x20'+'result.a\x20='+'\x20saturate('+'\x20max(\x20max('+'\x20result.r,'+'\x20result.g\x20'+'),\x20max(\x20re'+'sult.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20)\x20);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20ceil(res'+'ult.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x0a\x20\x20\x20\x20r'+'esult.rgb\x20'+'/=\x20result.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0avec4\x20'+'encodeRGBP'+'(vec3\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'//\x20convert'+'\x20incoming\x20'+'linear\x20to\x20'+'gamma(ish)'+'\x0a\x20\x20\x20\x20vec3\x20'+'gamma\x20=\x20po'+'w(source,\x20'+'vec3(0.5))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'the\x20maximu'+'m\x20componen'+'t\x20clamped\x20'+'to\x201..8\x0a\x20\x20'+'\x20\x20float\x20ma'+'xVal\x20=\x20min'+'(8.0,\x20max('+'1.0,\x20max(g'+'amma.x,\x20ma'+'x(gamma.y,'+'\x20gamma.z))'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20storage\x20'+'factor\x0a\x20\x20\x20'+'\x20float\x20v\x20='+'\x201.0\x20-\x20((m'+'axVal\x20-\x201.'+'0)\x20/\x207.0);'+'\x0a\x0a\x20\x20\x20\x20//\x20r'+'ound\x20the\x20v'+'alue\x20for\x20s'+'torage\x20in\x20'+'8bit\x20chann'+'el\x0a\x20\x20\x20\x20v\x20='+'\x20ceil(v\x20*\x20'+'255.0)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(gamma\x20/'+'\x20(-v\x20*\x207.0'+'\x20+\x208.0),\x20v'+');\x20\x20\x20\x20\x0a}\x0a\x0a'+'vec4\x20encod'+'eRGBE(vec3'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20float'+('\x20maxVal\x20=\x20'+'max(source'+'.x,\x20max(so'+'urce.y,\x20so'+'urce.z));\x0a'+'\x20\x20\x20\x20if\x20(ma'+'xVal\x20<\x201e-'+'32)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec4(0,\x200'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20e\x20=\x20'+'ceil(log2('+'maxVal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec4('+'source\x20/\x20p'+'ow(2.0,\x20e)'+',\x20(e\x20+\x20128'+'.0)\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),M1='\x0a\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20combin'+'eColor(lit'+'Args_albed'+'o,\x20litArgs'+'_sheen_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_sp'+'ecularity)'+';\x0a\x0a\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20+=\x20lit'+'Args_emiss'+'ion;\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20=\x20ad'+'dFog(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20ton'+'eMap(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20gam'+'maCorrectO'+'utput(gl_F'+'ragColor.r'+'gb);\x0a',D1='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20floa'+'t\x20atlasSiz'+'e\x20=\x20512.0;'+'\x0aconst\x20flo'+'at\x20seamSiz'+'e\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0avec2\x20ma'+'pUv(vec2\x20u'+'v,\x20vec4\x20re'+'ct)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(mix(rect'+'.x\x20+\x20seamS'+'ize,\x20rect.'+'x\x20+\x20rect.z'+'\x20-\x20seamSiz'+'e,\x20uv.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mix('+'rect.y\x20+\x20s'+'eamSize,\x20r'+'ect.y\x20+\x20re'+'ct.w\x20-\x20sea'+'mSize,\x20uv.'+'y));\x0a}\x0a\x0a//'+'\x20map\x20a\x20nor'+'malized\x20eq'+'uirect\x20UV\x20'+'and\x20roughn'+'ess\x20level\x20'+'to\x20the\x20cor'+'rect\x20atlas'+'\x20rect.\x0avec'+'2\x20mapRough'+'nessUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'0,\x201.0\x20-\x20t'+',\x20t,\x20t\x20*\x200'+'.5));\x0a}\x0a\x0a/'+'/\x20map\x20shin'+'y\x20level\x20UV'+'\x0avec2\x20mapS'+'hinyUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'1.0\x20-\x20t,\x201'+'.0\x20-\x20t,\x20t,'+'\x20t\x20*\x200.5))'+';\x0a}\x0a\x0a#endi'+'f\x0a',I1='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20float\x20sky'+'boxIntensi'+'ty;\x0a#endif'+'\x0a\x0avec3\x20pro'+'cessEnviro'+'nment(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20skybo'+'xIntensity'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',L1='\x0afloat\x20get'+'FalloffWin'+'dow(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'sqrDist\x20=\x20'+'dot(lightD'+'ir,\x20lightD'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20invRa'+'dius\x20=\x201.0'+'\x20/\x20lightRa'+'dius;\x0a\x20\x20\x20\x20'+'return\x20squ'+'are(satura'+'te(1.0\x20-\x20s'+'quare(sqrD'+'ist\x20*\x20squa'+'re(invRadi'+'us))));\x0a}\x0a'+'\x0afloat\x20get'+'FalloffInv'+'Squared(fl'+'oat\x20lightR'+'adius,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20sqrDis'+'t\x20=\x20dot(li'+'ghtDir,\x20li'+'ghtDir);\x0a\x20'+'\x20\x20\x20float\x20f'+'alloff\x20=\x201'+'.0\x20/\x20(sqrD'+'ist\x20+\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20invRadiu'+'s\x20=\x201.0\x20/\x20'+'lightRadiu'+'s;\x0a\x0a\x20\x20\x20\x20fa'+'lloff\x20*=\x201'+'6.0;\x0a\x20\x20\x20\x20f'+'alloff\x20*=\x20'+'square(sat'+'urate(1.0\x20'+'-\x20square(s'+'qrDist\x20*\x20s'+'quare(invR'+'adius))));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20falloff'+';\x0a}\x0a',R1='\x0afloat\x20get'+'FalloffLin'+'ear(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20length'+'(lightDir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20max(((l'+'ightRadius'+'\x20-\x20d)\x20/\x20li'+'ghtRadius)'+',\x200.0);\x0a}\x0a',O1='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x0ave'+'c4\x20float2u'+'int(float\x20'+'value)\x20{\x0a\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20fl'+'oatBitsToU'+'int(value)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20vec4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((intBit'+'s\x20>>\x2024u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((intBits'+'\x20>>\x2016u)\x20&'+'\x200xFFu)\x20/\x20'+'255.0,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'((intBits\x20'+'>>\x208u)\x20&\x200'+'xFFu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(i'+'ntBits\x20&\x200'+'xFFu)\x20/\x2025'+'5.0\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0a//\x20dec'+'ode\x20RGBA8\x20'+'value\x20to\x20f'+'loat\x0afloat'+'\x20uint2floa'+'t(vec4\x20val'+'ue)\x20{\x0a\x20\x20\x20\x20'+'uint\x20intBi'+'ts\x20=\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20(uint('+'value.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(value.g\x20*'+'\x20255.0)\x20<<'+'\x2016u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20(uin'+'t(value.b\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uint'+'(value.a\x20*'+'\x20255.0);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20uintBitsT'+'oFloat(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0av'+'ec4\x20float2'+'vec4(float'+'\x20value)\x20{\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(CAPS'+'_TEXTURE_F'+'LOAT_RENDE'+'RABLE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4(val'+'ue,\x201.0,\x201'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20float'+'2uint(valu'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0a#e'+'ndif\x20//\x20FL'+'OAT_AS_UIN'+'T\x0a',F1='\x0a\x0afloat\x20dB'+'lendModeFo'+'gFactor\x20=\x20'+'1.0;\x0a\x0a#if\x20'+'(FOG\x20!=\x20NO'+'NE)\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20fog_color'+';\x0a\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20f'+'og_start;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20fog_end;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20fog_den'+'sity;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afloat'+'\x20getFogFac'+'tor()\x20{\x0a\x0a\x20'+'\x20\x20\x20float\x20d'+'epth\x20=\x20gl_'+'FragCoord.'+'z\x20/\x20gl_Fra'+'gCoord.w;\x0a'+'\x20\x20\x20\x20float\x20'+'fogFactor\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20#if\x20(FOG'+'\x20==\x20LINEAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fogFactor\x20'+'=\x20(fog_end'+'\x20-\x20depth)\x20'+'/\x20(fog_end'+'\x20-\x20fog_sta'+'rt);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fogF'+'actor\x20=\x20ex'+'p(-depth\x20*'+'\x20fog_densi'+'ty);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP2)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fog'+'Factor\x20=\x20e'+'xp(-depth\x20'+'*\x20depth\x20*\x20'+'fog_densit'+'y\x20*\x20fog_de'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(fog'+'Factor,\x200.'+'0,\x201.0);\x0a}'+'\x0a\x0avec3\x20add'+'Fog(vec3\x20c'+'olor)\x20{\x0a\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'fog_color\x20'+'*\x20dBlendMo'+'deFogFacto'+'r,\x20color,\x20'+'getFogFact'+'or());\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'color;\x0a}\x0a',N1='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0ave'+'c3\x20getFres'+'nel(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20c'+'osTheta,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20specu'+'larity\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20vec3'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a\x20\x20\x20\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20fresnel\x20'+'=\x20pow(1.0\x20'+'-\x20saturate'+'(cosTheta)'+',\x205.0);\x0a\x20\x20'+'\x20\x20float\x20gl'+'ossSq\x20=\x20gl'+'oss\x20*\x20glos'+'s;\x0a\x20\x20\x20\x20vec'+'3\x20ret\x20=\x20sp'+'ecularity\x20'+'+\x20(max(vec'+'3(glossSq)'+',\x20specular'+'ity)\x20-\x20spe'+'cularity)\x20'+'*\x20fresnel;'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20return'+'\x20mix(ret,\x20'+'iridescenc'+'eFresnel,\x20'+'iridescenc'+'eIntensity'+');\x0a#else\x0a\x20'+'\x20\x20\x20return\x20'+'ret;\x0a#endi'+'f\x20\x20\x20\x20\x0a}\x0a\x0af'+'loat\x20getFr'+'esnelCC(fl'+'oat\x20cosThe'+'ta)\x20{\x0a\x20\x20\x20\x20'+'float\x20fres'+'nel\x20=\x20pow('+'1.0\x20-\x20satu'+'rate(cosTh'+'eta),\x205.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x200.04\x20+\x20'+'(1.0\x20-\x200.0'+'4)\x20*\x20fresn'+'el;\x0a}\x0a',k1='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x0avaryin'+'g\x20vec2\x20vUv'+'0;\x0a\x0avoid\x20m'+'ain(void)\x0a'+'{\x0a\x20\x20\x20\x20gl_P'+'osition\x20=\x20'+'vec4(verte'+'x_position'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20vUv'+'0\x20=\x20vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x200.5;\x0a}\x0a',U1='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(color)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ga'+'mmaCorrect'+'Input(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGamma(col'+'or);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20gammaCorr'+'ectInput(v'+'ec4\x20color)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4(decodeG'+'amma(color'+'.xyz),\x20col'+'or.w);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20gammaCo'+'rrectOutpu'+'t(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20pow(color'+'\x20+\x200.00000'+'01,\x20vec3(1'+'.0\x20/\x202.2))'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'else\x20//\x20NO'+'NE\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectInp'+'ut(vec3\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20gamma'+'CorrectInp'+'ut(vec4\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectOut'+'put(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20color;\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a',B1='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0auni'+'form\x20float'+'\x20material_'+'gloss;\x0a#en'+'dif\x0a\x0avoid\x20'+'getGlossin'+'ess()\x20{\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_GLO'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20*='+'\x20material_'+'gloss;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_GLOSS_'+'TEXTURE\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20*=\x20tex'+'ture2DBias'+'({STD_GLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_GLOSS_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_G'+'LOSS_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_INVE'+'RT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x201.0\x20-\x20dGl'+'ossiness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20+='+'\x200.0000001'+';\x0a}\x0a',z1='\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tion;\x0a\x0a//\x20'+'project\x20th'+'e\x20model\x20sp'+'ace\x20gaussi'+'an\x20center\x20'+'to\x20view\x20an'+'d\x20clip\x20spa'+'ce\x0abool\x20in'+'itCenter(v'+'ec3\x20modelC'+'enter,\x20out'+'\x20SplatCent'+'er\x20center)'+'\x20{\x0a\x20\x20\x20\x20mat'+'4\x20modelVie'+'w\x20=\x20matrix'+'_view\x20*\x20ma'+'trix_model'+';\x0a\x20\x20\x20\x20vec4'+'\x20centerVie'+'w\x20=\x20modelV'+'iew\x20*\x20vec4'+'(modelCent'+'er,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly\x20out\x20if'+'\x20splat\x20is\x20'+'behind\x20the'+'\x20camera\x0a\x20\x20'+'\x20\x20if\x20(cent'+'erView.z\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20false;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20vec4\x20cent'+'erProj\x20=\x20m'+'atrix_proj'+'ection\x20*\x20c'+'enterView;'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nsure\x20gaus'+'sians\x20are\x20'+'not\x20clippe'+'d\x20by\x20camer'+'a\x20near\x20and'+'\x20far\x0a\x20\x20\x20\x20#'+'if\x20WEBGPU\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ce'+'nterProj.z'+'\x20=\x20clamp(c'+'enterProj.'+'z,\x200,\x20abs('+'centerProj'+'.w));\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20center'+'Proj.z\x20=\x20c'+'lamp(cente'+'rProj.z,\x20-'+'abs(center'+'Proj.w),\x20a'+'bs(centerP'+'roj.w));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20cente'+'r.view\x20=\x20c'+'enterView.'+'xyz\x20/\x20cent'+'erView.w;\x0a'+'\x20\x20\x20\x20center'+'.proj\x20=\x20ce'+'nterProj;\x0a'+'\x20\x20\x20\x20center'+'.projMat00'+'\x20=\x20matrix_'+'projection'+'[0][0];\x0a\x20\x20'+'\x20\x20center.m'+'odelView\x20='+'\x20modelView'+';\x0a\x20\x20\x20\x20retu'+'rn\x20true;\x0a}'+'\x0a',V1='\x0a\x0auniform\x20'+'mediump\x20sa'+'mpler2D\x20sp'+'latColor;\x0a'+'\x0a//\x20:\x200'+'.0\x20~\x201.0\x20'+'\x0afl'+'oat\x20comput'+'eAlpha(flo'+'at\x20muT,\x20fl'+'oat\x20uTime,'+'\x20float\x20uFa'+'deSpeed,\x20f'+'loat\x20life)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20age\x20=\x20('+'uTime\x20-\x20mu'+'T)\x20*\x202.0;\x20'+'//\x20'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'muT\x20>\x20uTim'+'e)\x20return\x20'+'0.0;\x0a\x0a\x20\x20\x20\x20'+'//\x20---\x20'+'\x20life\x20'+'---\x0a\x20\x20\x20\x20fl'+'oat\x20linear'+'Fade\x20=\x201.0'+'\x20-\x20age\x20/\x20l'+'ife;\x0a\x20\x20\x20\x20/'+'/\x20---\x20'+'\x20uFadeS'+'peed\x20---\x0a\x20'+'\x20\x20\x20float\x20e'+'xpFade\x20=\x20e'+'xp(-age\x20*\x20'+'uFadeSpeed'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20cl'+'amp(linear'+'Fade,\x200.0,'+'\x201.0);\x20\x0a\x20\x20'+'\x20\x20return\x20c'+'lamp(expFa'+'de,\x200.0,\x201'+'.0);\x0a}\x0a\x0a\x0av'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20uTime,\x20'+'bool\x20plusA'+',\x20int\x20poin'+'tCloudMode'+'Enabled)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'color\x20=\x20te'+'xelFetch(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a\x20\x20\x20\x20'+'#ifdef\x20IS_'+'4D\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20tDat'+'a\x20=\x20texelF'+'etch(trans'+'formLifecy'+'cle,\x20sourc'+'e.uv,\x200).x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20muT'+'\x20=\x20tData.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20saveA'+'\x20=\x20pointCl'+'oudModeEna'+'bled\x20==\x201\x20'+'?\x201.0\x20:\x20co'+'lor.a;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20alpha\x20=\x20s'+'aveA;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(uOp'+'enAnim\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20alp'+'ha\x20=\x20alpha'+'\x20*\x20(muT\x20-\x20'+'uTime\x20+\x200.'+'05);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20age\x20=\x20u'+'Time\x20-\x20muT'+';\x20\x20\x20\x20//\x20'+'\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20uFad'+'eSpeed\x20=\x202'+('.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20life\x20=\x200'+'.1;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20alph'+'a\x20=\x20comput'+'eAlpha(muT'+',\x20uTime,\x20u'+'FadeSpeed,'+'\x20life);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'alpha\x20*=\x20a'+'lpha;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor.a\x20=\x20p'+'lusA\x20?\x20alp'+'ha\x20:\x20saveA'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20ret'+'urn\x20color;'+'\x0a}\x0a\x0a'),G1='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20uint\x20o'+'rder;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20uint\x20i'+'d;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'ivec2\x20uv;\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20vec2'+'\x20cornerUV;'+'\x20\x20\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a};\x0a'+'\x0a//\x20stores'+'\x20the\x20camer'+'a\x20and\x20clip'+'\x20space\x20pos'+'ition\x20of\x20t'+'he\x20gaussia'+'n\x20center\x0as'+'truct\x20Spla'+'tCenter\x20{\x0a'+'\x20\x20\x20\x20vec3\x20v'+'iew;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cen'+'ter\x20in\x20vie'+'w\x20space\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'j;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'mat4\x20model'+'View;\x20\x20\x20\x20\x20'+'//\x20model-v'+'iew\x20matrix'+'\x0a\x20\x20\x20\x20float'+'\x20projMat00'+';\x20\x20\x20\x20//\x20el'+'ement\x20[0]['+'0]\x20of\x20the\x20'+'projection'+'\x20matrix\x0a};'+'\x0a\x0a//\x20store'+'s\x20the\x20offs'+'et\x20from\x20ce'+'nter\x20for\x20t'+'he\x20current'+'\x20gaussian\x0a'+'struct\x20Spl'+'atCorner\x20{'+'\x0a\x20\x20\x20\x20vec2\x20'+'offset;\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'rner\x20offse'+'t\x20from\x20cen'+'ter\x20in\x20cli'+'p\x20space\x0a\x20\x20'+'\x20\x20vec2\x20uv;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20aaF'+'actor;\x20//\x20'+'for\x20scenes'+'\x20generated'+'\x20with\x20anti'+'aliasing\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20vec2\x20'+'v;\x0a\x20\x20\x20\x20flo'+'at\x20dlen;\x0a\x20'+'\x20\x20\x20vec2\x20cS'+'ize;\x0a\x20\x20\x20\x20v'+'ec2\x20cUV;\x0a}'+';\x0a\x0a#includ'+'e\x20\x22gsplatE'+'valSHVS\x22\x0a#'+'include\x20\x22g'+'splatQuatT'+'oMat3VS\x22\x0a\x0a'+'#if\x20GSPLAT'+'_COMPRESSE'+('D_DATA\x20==\x20'+'true\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatCompr'+'essedDataV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_COEFFS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x20='+'=\x20true\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22gsplatSog'+'sDataVS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSo'+'gsSHVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'else\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatDataV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22gsp'+'latColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0avoi'+'d\x20clipCorn'+'er(inout\x20S'+'platCorner'+'\x20corner,\x20f'+'loat\x20alpha'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20clip\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20255.'+'0\x20/\x20alpha)'+')\x20/\x202.0);\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20*='+'\x20clip;\x0a\x20\x20\x20'+'\x20corner.uv'+'\x20*=\x20clip;\x0a'+'}\x0a'),H1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTimeText'+'ure;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20c'+'hunkTextur'+'e;\x0a\x0a//\x20wor'+'k\x20values\x0av'+'ec4\x20chunkD'+'ataA;\x20\x20\x20\x20/'+'/\x20x:\x20min_x'+',\x20y:\x20min_y'+',\x20z:\x20min_z'+',\x20w:\x20max_x'+'\x0avec4\x20chun'+'kDataB;\x20\x20\x20'+'\x20//\x20x:\x20max'+'_y,\x20y:\x20max'+'_z,\x20z:\x20sca'+'le_min_x,\x20'+'w:\x20scale_m'+'in_y\x0avec4\x20'+'chunkDataC'+';\x20\x20\x20\x20//\x20x:'+'\x20scale_min'+'_z,\x20y:\x20sca'+'le_max_x,\x20'+'z:\x20scale_m'+'ax_y,\x20w:\x20s'+'cale_max_z'+'\x0avec4\x20chun'+'kDataD;\x20\x20\x20'+'\x20//\x20x:\x20min'+'_r,\x20y:\x20min'+'_g,\x20z:\x20min'+'_b,\x20w:\x20max'+'_r\x0avec4\x20ch'+'unkDataE;\x20'+'\x20\x20\x20//\x20x:\x20m'+'ax_g,\x20y:\x20m'+'ax_b,\x20z:\x20m'+'in_motion_'+'x,\x20w:\x20min_'+'motion_y\x0av'+'ec4\x20chunkD'+'ataF;\x20\x20\x20\x20/'+'/\x20x:\x20min_m'+'otion_z,\x20y'+':\x20max_moti'+'on_x,\x20z:\x20m'+'ax_motion_'+'y,\x20w:\x20max_'+'motion_z\x0av'+'ec4\x20chunkD'+'ataT;\x20\x20\x20\x20/'+'/\x20x:\x20min_t'+'ime,\x20y:\x20ma'+'x_time,\x20z:'+'\x20min_time_'+'scale,\x20w:\x20'+'max_time_s'+'cale\x0auvec4'+'\x20packedDat'+'a;\x20\x20\x20//\x20x:'+'\x20position\x20'+'bits,\x20y:\x20r'+'otation\x20bi'+'ts,\x20z:\x20sca'+'le\x20bits,\x20w'+':\x20color\x20bi'+'ts\x0auvec2\x20p'+'ackedT;\x20\x20\x20'+'//\x20x:\x20moti'+'on\x20bits(x,'+'\x20y,\x20z),\x20y:'+'\x20time\x20bits'+'(t_scale,\x20'+'t,\x20unused)'+'\x0a\x0a//\x20tool\x20'+'for\x20comput'+'e\x20Marginal'+'\x20time\x0afloa'+'t\x20computeM'+'arginalT(f'+'loat\x20time,'+'\x20float\x20muT'+',\x20float\x20si'+'gmaT)\x20{\x0a\x20\x20'+'\x20\x20if\x20(muT\x20'+'<=\x20-10.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20float\x20re'+('sult\x20=\x20exp'+'(-0.5\x20*\x20(p'+'ow((time\x20-'+'\x20muT),\x202.0'+')\x20/\x20pow(si'+'gmaT,\x202.0)'+'));\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0avec3'+'\x20unpack111'+'011(uint\x20b'+'its)\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'c3(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float(bi'+'ts\x20>>\x2021u)'+'\x20/\x202047.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((bits'+'\x20>>\x2011u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at(bits\x20&\x20'+'0x7ffu)\x20/\x20'+'2047.0\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0avec'+'4\x20unpack88'+'88(uint\x20bi'+'ts)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float(bit'+'s\x20>>\x2024u)\x20'+'/\x20255.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((bits\x20>'+'>\x2016u)\x20&\x200'+'xffu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(('+'bits\x20>>\x208u'+')\x20&\x200xffu)'+'\x20/\x20255.0,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat(bits\x20&'+'\x200xffu)\x20/\x20'+'255.0\x0a\x20\x20\x20\x20'+');\x0a}\x0a\x0acons'+'t\x20float\x20no'+'rm\x20=\x201.0\x20/'+'\x20(sqrt(2.0'+')\x20*\x200.5);\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20a\x20=\x20(f'+'loat((bits'+'\x20>>\x2020u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0\x20-\x20'+'0.5)\x20*\x20nor'+'m;\x0a\x20\x20\x20\x20flo'+'at\x20b\x20=\x20(fl'+'oat((bits\x20'+'>>\x2010u)\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20(flo'+'at(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20m\x20=\x20sqrt'+'(1.0\x20-\x20(a\x20'+'*\x20a\x20+\x20b\x20*\x20'+'b\x20+\x20c\x20*\x20c)'+');\x0a\x0a\x20\x20\x20\x20ui'+'nt\x20mode\x20=\x20'+'bits\x20>>\x2030'+'u;\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x200'+'u)\x20return\x20'+'vec4(m,\x20a,'+'\x20b,\x20c);\x0a\x20\x20'+'\x20\x20if\x20(mode'+'\x20==\x201u)\x20re'+'turn\x20vec4('+'a,\x20m,\x20b,\x20c'+');\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x202'+'u)\x20return\x20'+'vec4(a,\x20b,'+'\x20m,\x20c);\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4(a,\x20b,\x20')+('c,\x20m);\x0a}\x0a\x0a'+'\x0a//\x20read\x20c'+'enter\x0avec3'+'\x20readCente'+'r(SplatSou'+'rce\x20source'+')\x20{\x0a\x20\x20\x20\x20ui'+'nt\x20w\x20=\x20uin'+'t(textureS'+'ize(chunkT'+'exture,\x200)'+'.x)\x20/\x205u;\x0a'+'\x20\x20\x20\x20uint\x20c'+'hunkId\x20=\x20s'+'ource.id\x20/'+'\x20256u;\x0a\x20\x20\x20'+'\x20ivec2\x20chu'+'nkUV\x20=\x20ive'+'c2((chunkI'+'d\x20%\x20w)\x20*\x205'+'u,\x20chunkId'+'\x20/\x20w);\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'chunk\x20and\x20'+'packed\x20com'+'pressed\x20da'+'ta\x0a\x20\x20\x20\x20chu'+'nkDataA\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV,\x200);\x0a\x20\x20'+'\x20\x20chunkDat'+'aB\x20=\x20texel'+'Fetch(chun'+'kTexture,\x20'+'chunkUV\x20+\x20'+'ivec2(1,\x200'+'),\x200);\x0a\x20\x20\x20'+'\x20chunkData'+'C\x20=\x20texelF'+'etch(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20i'+'vec2(2,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataD'+'\x20=\x20texelFe'+'tch(chunkT'+'exture,\x20ch'+'unkUV\x20+\x20iv'+'ec2(3,\x200),'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataE\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(4,\x200),\x20'+'0);\x0a\x20\x20\x20\x20pa'+'ckedData\x20='+'\x20texelFetc'+'h(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ch'+'unkDataA.x'+'yz,\x20vec3(c'+'hunkDataA.'+'w,\x20chunkDa'+'taB.xy),\x20u'+'npack11101'+'1(packedDa'+'ta.x));\x0a}\x0a'+'\x0avec4\x20read'+'Color(in\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'r\x20=\x20unpack'+'8888(packe'+'dData.w);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4(mix('+'chunkDataD'+'.xyz,\x20vec3'+'(chunkData'+'D.w,\x20chunk'+'DataE.xy),'+'\x20r.rgb),\x20r'+'.w);\x0a}\x0a\x0ave'+'c4\x20getRota'+'tion()\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'unpackRota'+'tion(packe'+'dData.y);\x0a'+'}\x0a\x0avec3\x20ge'+'tScale()\x20{')+('\x0a\x20\x20\x20\x20retur'+'n\x20exp(mix('+'vec3(chunk'+'DataB.zw,\x20'+'chunkDataC'+'.x),\x20chunk'+'DataC.yzw,'+'\x20unpack111'+'011(packed'+'Data.z)));'+'\x0a}\x0a\x0a//\x20giv'+'en\x20a\x20rotat'+'ion\x20matrix'+'\x20and\x20scale'+'\x20vector,\x20c'+'ompute\x203d\x20'+'covariance'+'\x20A\x20and\x20B\x0av'+'oid\x20readCo'+'variance(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20covA,\x20out'+'\x20vec3\x20covB'+')\x20{\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3('+'getRotatio'+'n());\x0a\x20\x20\x20\x20'+'vec3\x20scale'+'\x20=\x20getScal'+'e();\x0a\x0a\x20\x20\x20\x20'+'//\x20M\x20=\x20S\x20*'+'\x20R\x0a\x20\x20\x20\x20mat'+'3\x20M\x20=\x20tran'+'spose(mat3'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'scale.x\x20*\x20'+'rot[0],\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20scal'+'e.y\x20*\x20rot['+'1],\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale.z\x20'+'*\x20rot[2]\x0a\x20'+'\x20\x20\x20));\x0a\x0a\x20\x20'+'\x20\x20covA\x20=\x20v'+'ec3(dot(M['+'0],\x20M[0]),'+'\x20dot(M[0],'+'\x20M[1]),\x20do'+'t(M[0],\x20M['+'2]));\x0a\x20\x20\x20\x20'+'covB\x20=\x20vec'+'3(dot(M[1]'+',\x20M[1]),\x20d'+'ot(M[1],\x20M'+'[2]),\x20dot('+'M[2],\x20M[2]'+'));\x0a}\x0a\x0aflo'+'at\x20getMarg'+'inalT(in\x20S'+'platSource'+'\x20source,\x20i'+'n\x20float\x20ti'+'me)\x20{\x0a\x20\x20\x20\x20'+'float\x20marg'+'inal\x20=\x201.0'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20IS_4D\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20chu'+'nkDataT\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(6,\x200),\x200)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'packedT\x20=\x20'+'texelFetch'+'(packedTim'+'eTexture,\x20'+'source.uv,'+'\x200).xy;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20timeData\x20'+'=\x20mix(vec3'+'(chunkData'+'T.z,\x20chunk'+'DataT.x,\x200'+'),\x20vec3(ch'+'unkDataT.w'+',\x20chunkDat'+'aT.y,\x201),\x20'+'unpack1110'+'11(packedT'+'.y));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'tScale\x20=\x20e'+'xp(timeDat')+('a.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'muT\x20=\x20time'+'Data.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20marg'+'inal\x20=\x20com'+'puteMargin'+'alT(time,\x20'+'muT,\x20tScal'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20r'+'eturn\x20marg'+'inal;\x0a}\x0a\x0av'+'ec3\x20readCe'+'nter4D(Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20time)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(chunkText'+'ure,\x200).x)'+'\x20/\x207u;\x0a\x20\x20\x20'+'\x20uint\x20chun'+'kId\x20=\x20sour'+'ce.id\x20/\x2025'+'6u;\x0a\x20\x20\x20\x20iv'+'ec2\x20chunkU'+'V\x20=\x20ivec2('+'(chunkId\x20%'+'\x20w)\x20*\x207u,\x20'+'chunkId\x20/\x20'+'w);\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20chu'+'nk\x20and\x20pac'+'ked\x20compre'+'ssed\x20data\x0a'+'\x20\x20\x20\x20chunkD'+'ataA\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV,'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataB\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(1,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataC\x20='+'\x20texelFetc'+'h(chunkTex'+'ture,\x20chun'+'kUV\x20+\x20ivec'+'2(2,\x200),\x200'+');\x0a\x20\x20\x20\x20chu'+'nkDataD\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(3,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataE\x20=\x20t'+'exelFetch('+'chunkTextu'+'re,\x20chunkU'+'V\x20+\x20ivec2('+'4,\x200),\x200);'+'\x0a\x20\x20\x20\x20chunk'+'DataF\x20=\x20te'+'xelFetch(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20ivec2(5'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataT\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV\x20'+'+\x20ivec2(6,'+'\x200),\x200);\x0a\x20'+'\x20\x20\x20packedD'+'ata\x20=\x20texe'+'lFetch(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20packedT\x20='+'\x20texelFetc'+'h(packedTi'+'meTexture,'+'\x20source.uv'+',\x200).xy;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20mix(chu')+('nkDataA.xy'+'z,\x20vec3(ch'+'unkDataA.w'+',\x20chunkDat'+'aB.xy),\x20un'+'pack111011'+'(packedDat'+'a.x));\x0a\x20\x20\x20'+'\x20#ifdef\x20IS'+'_4D\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20tim'+'e\x20=\x20mix(ve'+'c3(chunkDa'+'taT.z,\x20chu'+'nkDataT.x,'+'\x200),\x20vec3('+'chunkDataT'+'.w,\x20chunkD'+'ataT.y,\x201)'+',\x20unpack11'+'1011(packe'+'dT.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20muT\x20=\x20ti'+'me.y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'ovingSpeed'+'\x20=\x20mix(vec'+'3(chunkDat'+'aE.zw,\x20chu'+'nkDataF.x)'+',\x20chunkDat'+'aF.yzw,\x20un'+'pack111011'+'(packedT.x'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20spl'+'atOffset\x20='+'\x20movingSpe'+'ed\x20*\x20(time'+'\x20-\x20muT);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20spl'+'atCenter\x20+'+'=\x20splatOff'+'set;\x0a\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'return\x20spl'+'atCenter;\x0a'+'}\x0a'),W1='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20shText'+'ure0;\x0aunif'+'orm\x20highp\x20'+'usampler2D'+'\x20shTexture'+'1;\x0auniform'+'\x20highp\x20usa'+'mpler2D\x20sh'+'Texture2;\x0a'+'\x0avec4\x20unpa'+'ck8888s(in'+'\x20uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'(uvec4(bit'+'s)\x20>>\x20uvec'+'4(0u,\x208u,\x20'+'16u,\x2024u))'+'\x20&\x200xffu)\x20'+'*\x20(8.0\x20/\x202'+'55.0)\x20-\x204.'+'0;\x0a}\x0a\x0avoid'+'\x20readSHDat'+'a(in\x20Splat'+'Source\x20sou'+'rce,\x20out\x20v'+'ec3\x20sh[15]'+',\x20out\x20floa'+'t\x20scale)\x20{'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20the\x20sh\x20'+'coefficien'+'ts\x0a\x20\x20\x20\x20uve'+'c4\x20shData0'+'\x20=\x20texelFe'+'tch(shText'+'ure0,\x20sour'+'ce.uv,\x200);'+'\x0a\x20\x20\x20\x20uvec4'+'\x20shData1\x20='+'\x20texelFetc'+'h(shTextur'+'e1,\x20source'+'.uv,\x200);\x0a\x20'+'\x20\x20\x20uvec4\x20s'+'hData2\x20=\x20t'+'exelFetch('+'shTexture2'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec4\x20r0\x20'+'=\x20unpack88'+'88s(shData'+'0.x);\x0a\x20\x20\x20\x20'+'vec4\x20r1\x20=\x20'+'unpack8888'+'s(shData0.'+'y);\x0a\x20\x20\x20\x20ve'+'c4\x20r2\x20=\x20un'+'pack8888s('+'shData0.z)'+';\x0a\x20\x20\x20\x20vec4'+'\x20r3\x20=\x20unpa'+'ck8888s(sh'+'Data0.w);\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'g0\x20=\x20unpac'+'k8888s(shD'+'ata1.x);\x0a\x20'+'\x20\x20\x20vec4\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20vec4\x20g2\x20='+'\x20unpack888'+'8s(shData1'+'.z);\x0a\x20\x20\x20\x20v'+'ec4\x20g3\x20=\x20u'+'npack8888s'+'(shData1.w'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20b0\x20=\x20un'+'pack8888s('+'shData2.x)'+';\x0a\x20\x20\x20\x20vec4'+'\x20b1\x20=\x20unpa'+'ck8888s(sh'+'Data2.y);\x0a'+'\x20\x20\x20\x20vec4\x20b'+'2\x20=\x20unpack'+'8888s(shDa'+'ta2.z);\x0a\x20\x20'+'\x20\x20vec4\x20b3\x20'+'=\x20unpack88'+'88s(shData'+'2.w);\x0a\x0a\x20\x20\x20'+('\x20sh[0]\x20=\x20\x20'+'vec3(r0.x,'+'\x20g0.x,\x20b0.'+'x);\x0a\x20\x20\x20\x20sh'+'[1]\x20=\x20\x20vec'+'3(r0.y,\x20g0'+'.y,\x20b0.y);'+'\x0a\x20\x20\x20\x20sh[2]'+'\x20=\x20\x20vec3(r'+'0.z,\x20g0.z,'+'\x20b0.z);\x0a\x20\x20'+'\x20\x20sh[3]\x20=\x20'+'\x20vec3(r0.w'+',\x20g0.w,\x20b0'+'.w);\x0a\x20\x20\x20\x20s'+'h[4]\x20=\x20\x20ve'+'c3(r1.x,\x20g'+'1.x,\x20b1.x)'+';\x0a\x20\x20\x20\x20sh[5'+']\x20=\x20\x20vec3('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3(r1.'+'z,\x20g1.z,\x20b'+'1.z);\x0a\x20\x20\x20\x20'+'sh[7]\x20=\x20\x20v'+'ec3(r1.w,\x20'+'g1.w,\x20b1.w'+');\x0a\x20\x20\x20\x20sh['+'8]\x20=\x20\x20vec3'+'(r2.x,\x20g2.'+'x,\x20b2.x);\x0a'+'\x20\x20\x20\x20sh[9]\x20'+'=\x20\x20vec3(r2'+'.y,\x20g2.y,\x20'+'b2.y);\x0a\x20\x20\x20'+'\x20sh[10]\x20=\x20'+'vec3(r2.z,'+'\x20g2.z,\x20b2.'+'z);\x0a\x20\x20\x20\x20sh'+'[11]\x20=\x20vec'+'3(r2.w,\x20g2'+'.w,\x20b2.w);'+'\x0a\x20\x20\x20\x20sh[12'+']\x20=\x20vec3(r'+'3.x,\x20g3.x,'+'\x20b3.x);\x0a\x20\x20'+'\x20\x20sh[13]\x20='+'\x20vec3(r3.y'+',\x20g3.y,\x20b3'+'.y);\x0a\x20\x20\x20\x20s'+'h[14]\x20=\x20ve'+'c3(r3.z,\x20g'+'3.z,\x20b3.z)'+';\x0a\x0a\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),$1='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20S'+'H_COEFFS\x203'+'\x0a\x20\x20\x20\x20#elif'+'\x20SH_BANDS\x20'+'==\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20SH_COEFFS'+'\x208\x0a\x20\x20\x20\x20#el'+'if\x20SH_BAND'+'S\x20==\x203\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20SH_COEF'+'FS\x2015\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20SH_COEFF'+'S\x200\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x200\x0a\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20SH_C1\x20'+'=\x200.488602'+'5119029199'+'f;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x201\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20f'+'loat\x20SH_C2'+'_0\x20=\x201.092'+'5484305920'+'792f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'2_1\x20=\x20-1.0'+'9254843059'+'20792f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C2_2\x20=\x200.'+'3153915652'+'5252005f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C2_3\x20=\x20'+'-1.0925484'+'305920792f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'const\x20floa'+'t\x20SH_C2_4\x20'+'=\x200.546274'+'2152960396'+'f;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x202\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'3_0\x20=\x20-0.5'+'9004358992'+'66435f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_1\x20=\x202.'+'8906114426'+'40554f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_2\x20=\x20-0'+'.457045799'+'4644658f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C3_3\x20=\x20'+'0.37317633'+'25901154f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20float'+'\x20SH_C3_4\x20='+'\x20-0.457045'+'7994644658'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_5'+'\x20=\x201.44530'+'5721320277'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_6'+'\x20=\x20-0.5900'+'4358992664'+'35f;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20see\x20ht'+'tps://gith'+'ub.com/gra'+'phdeco-inr'+('ia/gaussia'+'n-splattin'+'g/blob/mai'+'n/utils/sh'+'_utils.py\x0a'+'\x20\x20\x20\x20vec3\x20e'+'valSH(in\x20v'+'ec3\x20sh[SH_'+'COEFFS],\x20i'+'n\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20x\x20'+'=\x20dir.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20y\x20=\x20dir'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20z\x20'+'=\x20dir.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201st\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20resul'+'t\x20=\x20SH_C1\x20'+'*\x20(-sh[0]\x20'+'*\x20y\x20+\x20sh[1'+']\x20*\x20z\x20-\x20sh'+'[2]\x20*\x20x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x201\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x202nd\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xx\x20=\x20x\x20*\x20x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yy\x20=\x20y\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'zz\x20=\x20z\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yz\x20=\x20y\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xz\x20=\x20x\x20*\x20z'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[3]\x20*\x20('+'SH_C2_0\x20*\x20'+'xy)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[4]\x20*\x20'+'(SH_C2_1\x20*'+'\x20yz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[5]\x20*'+'\x20(SH_C2_2\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x20xx\x20-\x20y'+'y))\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[6]\x20*\x20'+'(SH_C2_3\x20*'+'\x20xz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20*'+'\x20(SH_C2_4\x20'+'*\x20(xx\x20-\x20yy'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'+=\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20')+('xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20#endif\x0a'),X1='\x0amat3\x20quat'+'ToMat3(vec'+'4\x20R)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20R2\x20='+'\x20R\x20+\x20R;\x0a\x20\x20'+'\x20\x20float\x20X\x20'+'=\x20R2.x\x20*\x20R'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20Y\x20\x20=\x20R2'+'.y\x20*\x20R;\x0a\x20\x20'+'\x20\x20vec4\x20Z\x20\x20'+'=\x20R2.z\x20*\x20R'+';\x0a\x20\x20\x20\x20floa'+'t\x20W\x20=\x20R2.w'+'\x20*\x20R.w;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x201.0\x20-\x20'+'Z.z\x20-\x20W,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20Y.z\x20+\x20X'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20Y.z\x20-\x20X,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x201.'+'0\x20-\x20Y.y\x20-\x20'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20+\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20Y.w\x20+\x20Z.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20-\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',q1='\x0auniform\x20m'+'ediump\x20sam'+'pler2D\x20sh0'+';\x0a\x0auniform'+'\x20vec4\x20sh0_'+'mins;\x0aunif'+'orm\x20vec4\x20s'+'h0_maxs;\x0a\x0a'+'float\x20SH_C'+'0\x20=\x200.2820'+'9479177387'+'814;\x0a\x0avec4'+'\x20readColor'+'(in\x20SplatS'+'ource\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20clr\x20='+'\x20mix(sh0_m'+'ins,\x20sh0_m'+'axs,\x20texel'+'Fetch(sh0,'+'\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(vec3(0.'+'5)\x20+\x20clr.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'clr.w)));\x0a'+'}\x0a',j1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0a\x0auniform\x20'+'vec3\x20means'+'_mins;\x0auni'+'form\x20vec3\x20'+'means_maxs'+';\x0a\x0auniform'+'\x20vec3\x20scal'+'es_mins;\x0au'+'niform\x20vec'+'3\x20scales_m'+'axs;\x0a\x0avec4'+'\x20unpackU32'+'(uint\x20v)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((v\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((v\x20>>'+'\x2016u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float((v'+'\x20>>\x208u)\x20&\x20'+'0xFFu)\x20/\x202'+'55.0,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float('+'v\x20&\x200xFFu)'+'\x20/\x20255.0\x0a\x20'+'\x20\x20\x20);\x0a}\x0a\x0au'+'vec4\x20packe'+'dSample;\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20th'+'e\x20packed\x20t'+'exture\x20sam'+'ple\x0a\x20\x20\x20\x20pa'+'ckedSample'+'\x20=\x20texelFe'+'tch(packed'+'Texture,\x20s'+'ource.uv,\x20'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20l\x20=\x20un'+'packU32(pa'+'ckedSample'+'.x).xyz;\x0a\x20'+'\x20\x20\x20vec3\x20u\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20vec'+'3\x20n\x20=\x20(l\x20*'+'\x20255.0\x20+\x20u'+'\x20*\x20255.0\x20*'+'\x20256.0)\x20/\x20'+'65535.0;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20mix(mean'+'s_mins,\x20me'+'ans_maxs,\x20'+'n);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20sign'+'(v)\x20*\x20(exp'+'(abs(v))\x20-'+'\x201.0);\x0a}\x0a\x0a'+'const\x20floa'+'t\x20norm\x20=\x202'+'.0\x20/\x20sqrt('+'2.0);\x0a\x0a//\x20'+'sample\x20cov'+'ariance\x20ve'+'ctors\x0avoid'+'\x20readCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'qdata\x20=\x20un'+'packU32(pa'+'ckedSample'+'.z);\x0a\x20\x20\x20\x20v'+'ec3\x20sdata\x20'+('=\x20unpackU3'+'2(packedSa'+'mple.w).xy'+'z;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20abc\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20f'+'loat\x20d\x20=\x20s'+'qrt(max(0.'+'0,\x201.0\x20-\x20d'+'ot(abc,\x20ab'+'c)));\x0a\x0a\x20\x20\x20'+'\x20uint\x20mode'+'\x20=\x20uint(qd'+'ata.w\x20*\x2025'+'5.0\x20+\x200.5)'+'\x20-\x20252u;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20q'+'uat\x20=\x20(mod'+'e\x20==\x200u)\x20?'+'\x20vec4(d,\x20a'+'bc)\x20:\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20((mode\x20='+'=\x201u)\x20?\x20ve'+'c4(abc.x,\x20'+'d,\x20abc.yz)'+'\x20:\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20('+'(mode\x20==\x202'+'u)\x20?\x20vec4('+'abc.xy,\x20d,'+'\x20abc.z)\x20:\x20'+'vec4(abc,\x20'+'d)));\x0a\x0a\x20\x20\x20'+'\x20mat3\x20rot\x20'+'=\x20quatToMa'+'t3(quat);\x0a'+'\x20\x20\x20\x20vec3\x20s'+'cale\x20=\x20exp'+'(mix(scale'+'s_mins,\x20sc'+'ales_maxs,'+'\x20sdata));\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20mat3\x20M\x20='+'\x20transpose'+'(mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20cov'+'A\x20=\x20vec3(d'+'ot(M[0],\x20M'+'[0]),\x20dot('+'M[0],\x20M[1]'+'),\x20dot(M[0'+'],\x20M[2]));'+'\x0a\x20\x20\x20\x20covB\x20'+'=\x20vec3(dot'+'(M[1],\x20M[1'+']),\x20dot(M['+'1],\x20M[2]),'+'\x20dot(M[2],'+'\x20M[2]));\x0a}'+'\x0a'),Y1='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20sh_ce'+'ntroids;\x0a\x0a'+'uniform\x20fl'+'oat\x20shN_mi'+'ns;\x0aunifor'+'m\x20float\x20sh'+'N_maxs;\x0a\x0a/'+'/\x20To\x20suppo'+'rt\x20each\x20SH'+'\x20degree,\x20r'+'eadSHData\x20'+'is\x20overloa'+'ded\x20based\x20'+'on\x20the\x20SH\x20'+'vector\x20dep'+'th\x20\x0a\x0avoid\x20'+'readSHData'+'(in\x20SplatS'+'ource\x20sour'+'ce,\x20out\x20ve'+'c3\x20sh[SH_C'+'OEFFS],\x20ou'+'t\x20float\x20sc'+'ale)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'ivec2\x20t\x20=\x20'+'ivec2(pack'+'edSample.x'+'\x20&\x20255u,\x20p'+'ackedSampl'+'e.y\x20&\x20255u'+');\x0a\x20\x20\x20\x20int'+'\x20n\x20=\x20t.x\x20+'+'\x20t.y\x20*\x20256'+';\x0a\x20\x20\x20\x20int\x20'+'u\x20=\x20(n\x20%\x206'+'4)\x20*\x20SH_CO'+'EFFS;\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20n\x20'+'/\x2064;\x0a\x0a\x20\x20\x20'+'\x20//\x20calcul'+'ate\x20offset'+'\x20into\x20the\x20'+'centroids\x20'+'texture\x20an'+'d\x20read\x20con'+'secutive\x20t'+'exels\x0a\x20\x20\x20\x20'+'for\x20(int\x20i'+'\x20=\x200;\x20i\x20<\x20'+'SH_COEFFS;'+'\x20i++)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[i'+']\x20=\x20mix(ve'+'c3(shN_min'+'s),\x20vec3(s'+'hN_maxs),\x20'+'texelFetch'+'(sh_centro'+'ids,\x20ivec2'+'(u\x20+\x20i,\x20v)'+',\x200).xyz);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20scale\x20=\x20'+'1.0;\x0a}\x0a',K1='\x0auniform\x20v'+'ec2\x20viewpo'+'rt;\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20viewpo'+'rt\x20dimensi'+'ons\x0aunifor'+'m\x20vec4\x20cam'+'era_params'+';\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x201\x20/'+'\x20far,\x20far,'+'\x20near,\x20isO'+'rtho\x0aunifo'+'rm\x20float\x20u'+'SplatScale'+';\x0auniform\x20'+'float\x20rend'+'erSpace;\x0au'+'niform\x20flo'+'at\x20endSpac'+'e;\x0auniform'+'\x20int\x20uShap'+'eN;\x0a\x0a//\x20ca'+'lculate\x20th'+'e\x20clip-spa'+'ce\x20offset\x20'+'from\x20the\x20c'+'enter\x20for\x20'+'this\x20gauss'+'ian\x0abool\x20i'+'nitCorner('+'SplatSourc'+'e\x20source,\x20'+'SplatCente'+'r\x20center,\x20'+'out\x20SplatC'+'orner\x20corn'+'er,\x20int\x20po'+'intCloudMo'+'deEnabled)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'get\x20covari'+'ance\x0a\x20\x20\x20\x20v'+'ec3\x20covA,\x20'+'covB;\x0a\x20\x20\x20\x20'+'readCovari'+'ance(sourc'+'e,\x20covA,\x20c'+'ovB);\x0a\x0a\x20\x20\x20'+'\x20mat3\x20Vrk\x20'+'=\x20mat3(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20covA'+'.x,\x20covA.y'+',\x20covA.z,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'vA.y,\x20covB'+'.x,\x20covB.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'covA.z,\x20co'+'vB.y,\x20covB'+'.z\x0a\x20\x20\x20\x20);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20focal\x20=\x20v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'v\x20=\x20camera'+'_params.w\x20'+'==\x201.0\x20?\x20v'+'ec3(0.0,\x200'+'.0,\x201.0)\x20:'+'\x20center.vi'+'ew.xyz;\x0a\x20\x20'+'\x20\x20float\x20J1'+'\x20=\x20focal\x20/'+'\x20v.z;\x0a\x20\x20\x20\x20'+'vec2\x20J2\x20=\x20'+'-J1\x20/\x20v.z\x20'+'*\x20v.xy;\x0a\x20\x20'+'\x20\x20mat3\x20J\x20='+'\x20mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20J1,\x200'+'.0,\x20J2.x,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x200.'+'0,\x20J1,\x20J2.'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.0,\x200.0,'+'\x200.0\x0a\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20mat'+'3\x20W\x20=\x20tran'+'spose(mat3'+'(center.mo'+'delView));'+'\x0a\x20\x20\x20\x20mat3\x20'+'T\x20=\x20W\x20*\x20J;'+'\x0a\x20\x20\x20\x20mat3\x20'+'cov\x20=\x20tran'+'spose(T)\x20*'+('\x20Vrk\x20*\x20T;\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'calculate\x20'+'AA\x20factor\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20detOri'+'g\x20=\x20cov[0]'+'[0]\x20*\x20cov['+'1][1]\x20-\x20co'+'v[0][1]\x20*\x20'+'cov[0][1];'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20detBl'+'ur\x20=\x20(cov['+'0][0]\x20+\x200.'+'3)\x20*\x20(cov['+'1][1]\x20+\x200.'+'3)\x20-\x20cov[0'+'][1]\x20*\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20corn'+'er.aaFacto'+'r\x20=\x20sqrt(m'+'ax(detOrig'+'\x20/\x20detBlur'+',\x200.0));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20diagonal1'+'\x20=\x20cov[0]['+'0]\x20+\x200.3;\x0a'+'\x20\x20\x20\x20float\x20'+'offDiagona'+'l\x20=\x20cov[0]'+'[1];\x0a\x20\x20\x20\x20f'+'loat\x20diago'+'nal2\x20=\x20cov'+'[1][1]\x20+\x200'+'.3;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20mid\x20='+'\x200.5\x20*\x20(di'+'agonal1\x20+\x20'+'diagonal2)'+';\x0a\x20\x20\x20\x20floa'+'t\x20radius\x20='+'\x20length(ve'+'c2((diagon'+'al1\x20-\x20diag'+'onal2)\x20/\x202'+'.0,\x20offDia'+'gonal));\x0a\x20'+'\x20\x20\x20float\x20l'+'ambda1\x20=\x20m'+'id\x20+\x20radiu'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20lambda2'+'\x20=\x20max(mid'+'\x20-\x20radius,'+'\x200.1);\x0a\x20\x20\x20'+'\x20if\x20(point'+'CloudModeE'+'nabled\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20l'+'ambda1\x20=\x20l'+'ambda2\x20=\x202'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Us'+'e\x20the\x20smal'+'ler\x20viewpo'+'rt\x20dimensi'+'on\x20to\x20limi'+'t\x20the\x20kern'+'el\x20size\x20re'+'lative\x20to\x20'+'the\x20screen'+'\x20resolutio'+'n.\x0a\x20\x20\x20\x20flo'+'at\x20vmin\x20=\x20'+'min(1024.0'+',\x20min(view'+'port.x,\x20vi'+'ewport.y))'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20l1\x20=\x202.'+'0\x20*\x20min(sq'+'rt(2.0\x20*\x20l'+'ambda1),\x20v'+'min);\x0a\x20\x20\x20\x20'+'float\x20l2\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda2)'+',\x20vmin);\x0a\x0a'+'\x20\x20\x20\x20//\x20ear'+'ly-out\x20gau'+'ssians\x20sma'+'ller\x20than\x20'+'2\x20pixels\x0a\x20')+('\x20\x20\x20if\x20(l1\x20'+'<\x202.0\x20&&\x20l'+'2\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec2\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'viewport;\x0a'+'\x0a\x20\x20\x20\x20//\x20cu'+'ll\x20against'+'\x20frustum\x20x'+'/y\x20axes\x0a\x20\x20'+'\x20\x20if\x20(any('+'greaterTha'+'n(abs(cent'+'er.proj.xy'+')\x20-\x20vec2(m'+'ax(l1,\x20l2)'+')\x20*\x20c,\x20cen'+'ter.proj.w'+'w)))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20false;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec2\x20diago'+'nalVector\x20'+'=\x20normaliz'+'e(vec2(off'+'Diagonal,\x20'+'lambda1\x20-\x20'+'diagonal1)'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20scale\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20bool\x20inRe'+'nderSpace\x20'+'=\x20(center.'+'view.x\x20>=\x20'+'-renderSpa'+'ce\x20&&\x20cent'+'er.view.x\x20'+'<=\x20renderS'+'pace)\x20&&\x20('+'center.vie'+'w.y\x20>=\x20-re'+'nderSpace\x20'+'&&\x20center.'+'view.y\x20<=\x20'+'renderSpac'+'e);\x0a\x20\x20\x20\x20bo'+'ol\x20openRen'+'derAnim\x20=\x20'+'renderSpac'+'e\x20<\x20endSpa'+'ce;\x0a\x20\x20\x20\x20bo'+'ol\x20inRende'+'r\x20=\x20render'+'Space\x20>=\x20e'+'ndSpace\x20||'+'\x20inRenderS'+'pace\x20||\x20po'+'intCloudMo'+'deEnabled\x20'+'==\x201;\x0a\x20\x20\x20\x20'+'if(!openRe'+'nderAnim\x20&'+'&\x20uSplatSc'+'ale\x20>\x200.0\x20'+'&&\x20uSplatS'+'cale\x20<=\x205.'+'0){\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale\x20=\x20'+'uSplatScal'+'e;\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(in'+'Render){\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(openR'+'enderAnim)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'scale\x20=\x20in'+'RenderSpac'+'e\x20?\x20uSplat'+'Scale\x20:\x200.'+'1;\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20vec2\x20v1'+'\x20=\x20scale\x20*'+'\x20l1\x20*\x20diag'+'onalVector'+';\x0a\x20\x20\x20\x20vec2'+'\x20v2\x20=\x20scal'+'e\x20*\x20l2\x20*\x20v'+'ec2(diagon'+'alVector.y'+',\x20-diagona'+'lVector.x)')+(';\x0a\x0a\x20\x20\x20\x20cor'+'ner.offset'+'\x20=\x20(source'+'.cornerUV.'+'x\x20*\x20v1\x20+\x20s'+'ource.corn'+'erUV.y\x20*\x20v'+'2)\x20*\x20c;\x0a\x20\x20'+'\x20\x20//\x20corne'+'r.uv\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20if\x20(uSh'+'apeN\x20<\x203)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'corner.uv\x20'+'=\x20source.c'+'ornerUV;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'corner.cSi'+'ze\x20=\x20(v1\x20+'+'\x20v2)\x20*\x20c;\x0a'+'\x20\x20\x20\x20corner'+'.cUV\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),Z1='\x0a\x0auniform\x20'+'highp\x20samp'+'ler2D\x20tran'+'sformA;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20transfor'+'mB;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformR;\x0a'+'\x0a#ifdef\x20IS'+'_4D\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformMot'+'ion;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20t'+'ransformLi'+'fecycle;\x0a#'+'endif\x0a\x0a//\x20'+'work\x20value'+'s\x0a//\x20uint\x20'+'tAw;\x0avec2\x20'+'sampledCov'+'4D;\x0afloat\x20'+'muT;\x0a\x0a//\x20t'+'ool\x20for\x20co'+'mpute\x20Marg'+'inal\x20time\x0a'+'float\x20comp'+'uteMargina'+'lT(float\x20t'+'ime,\x20float'+'\x20muT,\x20floa'+'t\x20sigmaT)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'muT\x20<=\x20-10'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20floa'+'t\x20result\x20='+'\x20exp(-0.5\x20'+'*\x20(pow((ti'+'me\x20-\x20muT),'+'\x202.0)\x20/\x20po'+'w(sigmaT,\x20'+'2.0)));\x0a\x20\x20'+'\x20\x20return\x20r'+'esult;\x0a}\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20retu'+'rn\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a}\x0a\x0ama'+'t3\x20quatToM'+'at3v2(vec4'+'\x20R)\x20{\x0a\x20\x20\x20\x20'+'float\x20x\x20=\x20'+'R.w;\x0a\x20\x20\x20\x20f'+'loat\x20y\x20=\x20R'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20R.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20w\x20=\x20R.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20mat3(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x201.0'+'\x20-\x202.0\x20*\x20('+'z\x20*\x20z\x20+\x20w\x20'+'*\x20w),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'2.0\x20*\x20(y\x20*'+'\x20z\x20+\x20x\x20*\x20w'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x202.0'+'\x20*\x20(y\x20*\x20w\x20'+'-\x20x\x20*\x20z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x202.0\x20*\x20'+'(y\x20*\x20z\x20-\x20x'+'\x20*\x20w),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x201.0\x20-'+'\x202.0\x20*\x20(y\x20'+'*\x20y\x20+\x20w\x20*\x20'+'w),\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x202.'+'0\x20*\x20(z\x20*\x20w'+'\x20+\x20x\x20*\x20y),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x202.0\x20*'+'\x20(y\x20*\x20w\x20+\x20'+'x\x20*\x20z),\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x202.0\x20*\x20(z'+'\x20*\x20w\x20-\x20x\x20*'+'\x20y),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.0\x20-\x202'+'.0\x20*\x20(y\x20*\x20'+'y\x20+\x20z\x20*\x20z)'+'\x0a\x20\x20\x20\x20);\x0a}\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(vec3\x20pack'+'ed)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(packed.x'+'yz,\x20sqrt(m'+'ax(0.0,\x201.'+'0\x20-\x20dot(pa'+'cked,\x20pack'+'ed))));\x0a}\x0a'+'\x0a//\x20sample'+'\x20covarianc'+'e\x20vectors\x0a'+'void\x20readC'+'ovariance('+'in\x20SplatSo'+'urce\x20sourc'+'e,\x20out\x20vec'+'3\x20covA,\x20ou'+'t\x20vec3\x20cov'+'B)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20tB\x20=\x20t'+'exelFetch('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20tR\x20'+'=\x20texelFet'+'ch(transfo'+'rmR,\x20sourc'+'e.uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3v'+'2(unpackRo'+'tation(tR)'+');\x0a\x20\x20\x20\x20vec'+'3\x20scale\x20=\x20'+'tB.xyz;\x0a\x0a\x20'+'\x20\x20\x20//\x20M\x20=\x20'+'S\x20*\x20R\x0a\x20\x20\x20\x20'+'mat3\x20M\x20=\x20t'+'ranspose(m'+'at3(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.x'+'\x20*\x20rot[0],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.y\x20*\x20r'+'ot[1],\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.z\x20*\x20rot[2'+']\x0a\x20\x20\x20\x20));\x0a'+'\x0a\x20\x20\x20\x20covA\x20'+'=\x20vec3(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20covB\x20=\x20'+'vec3(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a\x0a'+'//\x20sample\x20'+'4D\x20covaria'+'nce\x20vector'+'s\x0avoid\x20rea'+'dFTGSCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB,ou'+'t\x20vec4\x20cov'+'ariance4D)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20tB\x20=\x20tex'+'elFetch(tr'+'ansformB,\x20'+'source.uv,')+('\x200);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20tR\x20=\x20'+'texelFetch'+'(transform'+'R,\x20source.'+'uv,\x200).xyz'+';\x0a\x20\x20\x20\x20mat3'+'\x20rot\x20=\x20qua'+'tToMat3v2('+'unpackRota'+'tion(tR));'+'\x0a\x20\x20\x20\x20vec3\x20'+'scale\x20=\x20tB'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x20M\x20=\x20S\x20'+'*\x20R\x0a\x20\x20\x20\x20ma'+'t3\x20M\x20=\x20tra'+'nspose(mat'+'3(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20covA\x20=\x20'+'vec3(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20covB\x20=\x20ve'+'c3(dot(M[1'+'],\x20M[1]),\x20'+'dot(M[1],\x20'+'M[2]),\x20dot'+'(M[2],\x20M[2'+']));\x0a\x0a}\x0a\x0a\x0a'+'float\x20getM'+'arginalT(i'+'n\x20SplatSou'+'rce\x20source'+',\x20in\x20float'+'\x20time)\x20{\x0a\x20'+'\x20\x20\x20float\x20m'+'arginal\x20=\x20'+'1.0;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20filter\x20'+'out\x20splats'+'\x20that\x20have'+'\x20too\x20littl'+'e\x20influenc'+'e\x20to\x20now\x20i'+'n\x20the\x20time'+'\x20dimension'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20tData'+'\x20=\x20texelFe'+'tch(transf'+'ormLifecyc'+'le,\x20source'+'.uv,\x200).xy'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'muT\x20=\x20tDat'+'a.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20t'+'Scale\x20=\x20tD'+'ata.y;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20margi'+'nal\x20=\x20comp'+'uteMargina'+'lT(time,\x20m'+'uT,\x20tScale'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20re'+'turn\x20margi'+'nal;\x0a}\x0a\x0ave'+'c3\x20readCen'+'ter4D(Spla'+'tSource\x20so'+'urce,\x20floa'+'t\x20time)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20if(m'+'uT\x20>\x20-5.0)'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20movin'+'gSpeed\x20=\x20t')+('exelFetch('+'transformM'+'otion,\x20sou'+'rce.uv,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'platOffset'+'\x20=\x20movingS'+'peed\x20*\x20(ti'+'me\x20-\x20muT);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'platCenter'+'\x20+=\x20splatO'+'ffset;\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20spla'+'tCenter;\x0a}'+'\x0a'),Q1='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0avec'+'3\x20prepareO'+'utputFromG'+'amma(vec3\x20'+'gammaColor'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20TONEMAP\x20'+'==\x20NONE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'GAMMA\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'onvert\x20to\x20'+'linear\x20spa'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20outp'+'ut\x20gamma\x20s'+'pace\x20color'+'\x20directly\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'ly\x20tonemap'+'ping\x20in\x20li'+'near\x20space'+'\x20and\x20outpu'+'t\x20to\x20linea'+'r\x20or\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20gamm'+'a\x20(which\x20i'+'s\x20handled\x20'+'by\x20gammaCo'+'rrectOutpu'+'t)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ga'+'mmaCorrect'+'Output(ton'+'eMap(decod'+'eGamma(gam'+'maColor)))'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',J1='\x0auniform\x20i'+'nt\x20mode;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x200:\x20c'+'enters,\x201:'+'\x20rings\x0auni'+'form\x20float'+'\x20ringSize;'+'\x0auniform\x20i'+'nt\x20uShapeN'+';\x0a\x0a#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bay'+'erPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'opacityDit'+'herPS\x22\x0a\x20\x20\x20'+'\x20varying\x20f'+'loat\x20id;\x0a#'+'endif\x0a\x0a#if'+'def\x20PICK_P'+'ASS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pi'+'ckPS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20alphaC'+'lip;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20vLinearDe'+'pth;\x0a\x20\x20\x20\x20#'+'include\x20\x22f'+'loatAsUint'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20Fast\x20'+'approximat'+'e\x20e^x\x20base'+'d\x20on\x20https'+'://nic.sch'+'raudolph.o'+'rg/pubs/Sc'+'hraudolph9'+'9.pdf\x0acons'+'t\x20float\x20\x20E'+'XP_A\x20\x20\x20\x20\x20\x20'+'=\x2012102203'+'.0;\x20\x20\x20//\x20'+'\x202^23\x20/\x20ln'+'(2)\x0aconst\x20'+'int\x20\x20\x20\x20EXP'+'_BC_RMS\x20=\x20'+'1064866808'+';\x20\x20\x20//\x20(12'+'7\x20<<\x2023)\x20-'+'\x2060801\x20*\x208'+'\x0afloat\x20fas'+'tExp(float'+'\x20x)\x20{\x0a\x20\x20\x20\x20'+'int\x20i\x20=\x20in'+'t(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20in'+'tBitsToFlo'+'at(i);\x0a}\x0a\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianU'+'V;\x0avarying'+'\x20mediump\x20v'+'ec4\x20gaussi'+'anColor;\x0av'+'arying\x20med'+'iump\x20vec2\x20'+'gaussianSi'+'ze;\x0avaryin'+'g\x20mediump\x20'+'vec2\x20gauss'+'ianCUV;\x0ava'+'rying\x20medi'+'ump\x20float\x20'+'saveMargin'+'al;\x0a\x0a//\x20'+'\x20p\x20\x20N'+'\x20\x0a//\x20p:'+'\x20\x20(UV\x20'+')\x0a//'+'\x20N:\x20\x0a//\x20'+'r:\x20'+('1\x0a/'+'/\x20center:\x20'+'\x0abool\x20'+'insideRegu'+'larPolygon'+'(vec2\x20p,\x20i'+'nt\x20N,\x20floa'+'t\x20r,\x20vec2\x20'+'center)\x20{\x0a'+'\x20\x20\x20\x20//\x20'+'\x0a\x20'+'\x20\x20\x20vec2\x20d\x20'+'=\x20p\x20-\x20cent'+'er;\x0a\x20\x20\x20\x20fl'+'oat\x20theta\x20'+'=\x20atan(d.y'+',\x20d.x);\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20'+'\x0a\x20\x20\x20\x20flo'+'at\x20len\x20=\x20l'+'ength(d);\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20'+'\x0a\x20\x20\x20\x20float'+'\x20anglePerS'+'ide\x20=\x202.0\x20'+'*\x203.141592'+'65\x20/\x20float'+'(N);\x0a\x0a\x20\x20\x20\x20'+'//\x20\x200\x20~'+'\x20anglePerS'+'ide\x20\x0a\x20\x20\x20'+'\x20float\x20loc'+'alAngle\x20=\x20'+'mod(theta,'+'\x20anglePerS'+'ide);\x0a\x0a\x20\x20\x20'+'\x20//\x20'+'\x20'+'N\x20\x0a\x20\x20'+'\x20\x20float\x20ma'+'xR\x20=\x20r\x20*\x20c'+'os(anglePe'+'rSide\x20/\x202.'+'0)\x20/\x20cos(l'+'ocalAngle\x20'+'-\x20anglePer'+'Side\x20/\x202.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20len\x20<'+'=\x20maxR;\x0a}\x0a'+'\x0a//\x20'+'N\x20soft\x20'+'mask\x0afloat'+'\x20polygonSo'+'ftMask(vec'+'2\x20p,\x20int\x20N'+',\x20float\x20ra'+'dius,\x20floa'+'t\x20edgeSoft'+'ness)\x20{\x0a\x20\x20'+'\x20\x20float\x20an'+'gle\x20=\x20atan'+'(p.y,\x20p.x)'+';\x0a\x20\x20\x20\x20floa'+'t\x20sector\x20='+'\x206.2831853'+'\x20/\x20float(N'+');\x20\x20//\x20'+'\x0a\x20\x20\x20\x20//'+'\x20\x20['+'-sector/2,'+'\x20sector/2]'+'\x0a\x20\x20\x20\x20float'+'\x20halfSecto'+'r\x20=\x20sector'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20float\x20lo'+'calAngle\x20='+'\x20mod(angle'+'\x20+\x20halfSec'+'tor,\x20secto'+'r)\x20-\x20halfS'+'ector;\x0a\x0a\x20\x20'+'\x20\x20//\x20'+'\x0a'+'\x20\x20\x20\x20float\x20'+'boundary\x20='+'\x20radius\x20*\x20'+'cos(halfSe'+'ctor)\x20/\x20co'+'s(localAng'+'le);\x0a\x0a\x20\x20\x20\x20'+'//\x20\x20=\x20'+'\x0a\x20\x20\x20\x20'+'float\x20dist'+'\x20=\x20boundar'+'y\x20-\x20length'+'(p);\x0a\x0a\x20\x20\x20\x20'+'//\x20\x20smoot')+('hstep\x20'+'\x20(edgeSof'+'tness\x20'+')\x0a\x20\x20\x20\x20'+'float\x20alph'+'a\x20=\x20smooth'+'step(0.0,\x20'+'edgeSoftne'+'ss,\x20dist);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20alpha;\x20'+'//\x200~1\x0a}\x0a\x0a'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20mediump\x20'+'float\x20A\x20=\x20'+'dot(gaussi'+'anUV,\x20gaus'+'sianUV);\x0a\x20'+'\x20\x20\x20if\x20(A\x20>'+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'valuate\x20al'+'pha\x0a\x20\x20\x20\x20me'+'diump\x20floa'+'t\x20alpha\x20=\x20'+'fastExp(-A'+'\x20*\x204.0)\x20*\x20'+'gaussianCo'+'lor.a;\x0a\x20\x20\x20'+'\x20//\x20TODO\x20u'+'ShapeN\x20alp'+'ha\x0a\x20\x20\x20\x20//\x20'+'float\x20dx\x20='+'\x20abs(gauss'+'ianCUV.x)\x20'+'/\x20gaussian'+'Size.x;\x0a\x20\x20'+'\x20\x20//\x20float'+'\x20dy\x20=\x20abs('+'gaussianCU'+'V.y)\x20/\x20gau'+'ssianSize.'+'y;\x0a\x20\x20\x20\x20//\x20'+'float\x20B\x20=\x20'+'max(dx,\x20dy'+');\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20'+'\x0a\x20\x20\x20\x20//\x20'+'mediump\x20fl'+'oat\x20alpha\x20'+'=\x20exp(-pow'+'(B,\x202.0)\x20*'+'\x204.0)\x20*\x20ga'+'ussianColo'+'r.a;\x0a\x0a\x20\x20\x20\x20'+'bool\x20openR'+'ingMode\x20=\x20'+'ringSize\x20>'+'\x200.0\x20&&\x20mo'+'de\x20==\x201;\x20/'+'/\x20&&\x20uCont'+'rolMode\x20=='+'\x201;\x20\x0a\x20\x20\x20\x20i'+'f\x20(openRin'+'gMode\x20&&\x20s'+'aveMargina'+'l\x20>=\x200.05)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(A\x20<\x201'+'.0\x20-\x20ringS'+'ize)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'lpha\x20=\x20max'+'(0.05,\x20alp'+'ha);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alpha\x20'+'=\x200.6;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20bool\x20ope'+'nShapeMode'+'\x20=\x20uShapeN'+'\x20>\x202;\x20//\x20&'+'&\x20uControl'+'Mode\x20==\x201;'+'\x0a\x20\x20\x20\x20if\x20(o'+'penShapeMo'+'de)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20gaussi'+'anCUV\x20*\x202.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20rad'+'ius\x20=\x201.0;')+('\x20//\x201.0\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20edgeSoft'+'ness\x20=\x200.0'+'5;\x20//\x200.05'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v\x20*=\x201.0;/'+'/0.9;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20c'+'enter\x20=\x20ve'+'c2(0.0,\x200.'+'0);\x20\x20\x20//\x20'+''+'\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20alpha\x20'+'=\x20polygonS'+'oftMask(uv'+',\x20uShapeN,'+'\x20radius,\x20e'+'dgeSoftnes'+'s);\x20//\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(!insideR'+'egularPoly'+'gon(uv,\x20uS'+'hapeN,\x20rad'+'ius,\x20cente'+'r))\x20{\x20//'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20defined(S'+'HADOW_PASS'+')\x20||\x20defin'+'ed(PICK_PA'+'SS)\x20||\x20def'+'ined(PREPA'+'SS_PASS)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20a'+'lphaClip)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'getPickOut'+'put();\x0a\x0a\x20\x20'+'\x20\x20#elif\x20SH'+'ADOW_PASS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(0'+'.0,\x200.0,\x200'+'.0,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20#elif'+'\x20PREPASS_P'+'ASS\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20fl'+'oat2vec4(v'+'LinearDept'+'h);\x0a\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x201.0\x20/'+'\x20255.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20discard;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20DI'+'THER_NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(alph'+'a,\x20id\x20*\x200.'+'013);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'gaussianCo'+'lor.xyz,\x20a'+'lpha);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),eP='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0avec3\x20unpa'+'ck111011s('+'uint\x20bits)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec3(('+'uvec3(bits'+')\x20>>\x20uvec3'+'(21u,\x2011u,'+'\x200u))\x20&\x20uv'+'ec3(0x7ffu'+',\x200x3ffu,\x20'+'0x7ffu))\x20/'+'\x20vec3(2047'+'.0,\x201023.0'+',\x202047.0)\x20'+'*\x202.0\x20-\x201.'+'0;\x0a}\x0a\x0a//\x20f'+'etch\x20quant'+'ized\x20spher'+'ical\x20harmo'+'nic\x20coeffi'+'cients\x0avoi'+'d\x20fetchSca'+'le(in\x20uvec'+'4\x20t,\x20out\x20f'+'loat\x20scale'+',\x20out\x20vec3'+'\x20a,\x20out\x20ve'+'c3\x20b,\x20out\x20'+'vec3\x20c)\x20{\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20uintBits'+'ToFloat(t.'+'x);\x0a\x20\x20\x20\x20a\x20'+'=\x20unpack11'+'1011s(t.y)'+';\x0a\x20\x20\x20\x20b\x20=\x20'+'unpack1110'+'11s(t.z);\x0a'+'\x20\x20\x20\x20c\x20=\x20un'+'pack111011'+'s(t.w);\x0a}\x0a'+'\x0a//\x20fetch\x20'+'quantized\x20'+'spherical\x20'+'harmonic\x20c'+'oefficient'+'s\x0avoid\x20fet'+'ch(in\x20uvec'+'4\x20t,\x20out\x20v'+'ec3\x20a,\x20out'+'\x20vec3\x20b,\x20o'+'ut\x20vec3\x20c,'+'\x20out\x20vec3\x20'+'d)\x20{\x0a\x20\x20\x20\x20a'+'\x20=\x20unpack1'+'11011s(t.x'+');\x0a\x20\x20\x20\x20b\x20='+'\x20unpack111'+'011s(t.y);'+'\x0a\x20\x20\x20\x20c\x20=\x20u'+'npack11101'+'1s(t.z);\x0a\x20'+'\x20\x20\x20d\x20=\x20unp'+'ack111011s'+'(t.w);\x0a}\x0a\x0a'+'void\x20fetch'+'(in\x20uint\x20t'+',\x20out\x20vec3'+'\x20a)\x20{\x0a\x20\x20\x20\x20'+'a\x20=\x20unpack'+'111011s(t)'+';\x0a}\x0a\x0a#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20splatSH_'+'1to3;\x0a\x20\x20\x20\x20'+'void\x20readS'+'HData(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20sh'+'[3],\x20out\x20f'+'loat\x20scale'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetchSca'+'le(texelFe'+'tch(splatS'+'H_1to3,\x20so'+'urce.uv,\x200'+'),\x20scale,\x20'+'sh[0],\x20sh['+'1],\x20sh[2])'+(';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20SH_BAN'+'DS\x20==\x202\x0a\x20\x20'+'\x20\x20uniform\x20'+'highp\x20usam'+'pler2D\x20spl'+'atSH_1to3;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20highp\x20u'+'sampler2D\x20'+'splatSH_4t'+'o7;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_8to11;\x0a\x20\x20'+'\x20\x20void\x20rea'+'dSHData(in'+'\x20SplatSour'+'ce\x20source,'+'\x20out\x20vec3\x20'+'sh[8],\x20out'+'\x20float\x20sca'+'le)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetchS'+'cale(texel'+'Fetch(spla'+'tSH_1to3,\x20'+'source.uv,'+'\x200),\x20scale'+',\x20sh[0],\x20s'+'h[1],\x20sh[2'+']);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetch(te'+'xelFetch(s'+'platSH_4to'+'7,\x20source.'+'uv,\x200),\x20sh'+'[3],\x20sh[4]'+',\x20sh[5],\x20s'+'h[6]);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20fetch'+'(texelFetc'+'h(splatSH_'+'8to11,\x20sou'+'rce.uv,\x200)'+'.x,\x20sh[7])'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_1to3;\x0a\x20\x20\x20'+'\x20uniform\x20h'+'ighp\x20usamp'+'ler2D\x20spla'+'tSH_4to7;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20us'+'ampler2D\x20s'+'platSH_8to'+'11;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_12to15;\x0a\x20'+'\x20\x20\x20void\x20re'+'adSHData(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20sh[15],\x20o'+'ut\x20float\x20s'+'cale)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fetc'+'hScale(tex'+'elFetch(sp'+'latSH_1to3'+',\x20source.u'+'v,\x200),\x20sca'+'le,\x20sh[0],'+'\x20sh[1],\x20sh'+'[2]);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetch('+'texelFetch'+'(splatSH_4'+'to7,\x20sourc'+'e.uv,\x200),\x20'+'sh[3],\x20sh['+'4],\x20sh[5],'+'\x20sh[6]);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fet'+'ch(texelFe'+'tch(splatS'+'H_8to11,\x20s'+'ource.uv,\x20'+'0),\x20sh[7],'+'\x20sh[8],\x20sh'+'[9],\x20sh[10'+']);\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20fetch(te'+'xelFetch(s'+'platSH_12t'+'o15,\x20sourc'+'e.uv,\x200),\x20'+'sh[11],\x20sh'+'[12],\x20sh[1'+'3],\x20sh[14]'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0a#en'+'dif\x0a'),tP='\x0aattribute'+'\x20vec3\x20vert'+'ex_positio'+'n;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20xy:\x20co'+'rnerUV,\x20z:'+'\x20render\x20or'+'der\x20offset'+'\x0aattribute'+'\x20uint\x20vert'+'ex_id_attr'+'ib;\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20render'+'\x20order\x20bas'+'e\x0a\x0auniform'+'\x20uint\x20numS'+'plats;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20tota'+'l\x20number\x20o'+'f\x20splats\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20splatO'+'rder;\x20\x20\x20\x20/'+'/\x20per-spla'+'t\x20index\x20to'+'\x20source\x20ga'+'ussian\x0a\x0a//'+'\x20initializ'+'e\x20the\x20spla'+'t\x20source\x20s'+'tructure\x0ab'+'ool\x20initSo'+'urce(out\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(splatOrde'+'r,\x200).x);\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20ui'+'nt(vertex_'+'position.z'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20if'+'\x20out\x20of\x20ra'+'nge\x20(since'+'\x20the\x20last\x20'+'block\x20of\x20s'+'plats\x20may\x20'+'be\x20partial'+'ly\x20full)\x0a\x20'+'\x20\x20\x20if\x20(sou'+'rce.order\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'vec2\x20order'+'UV\x20=\x20ivec2'+'(source.or'+'der\x20%\x20w,\x20s'+'ource.orde'+'r\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20splat\x20id\x0a'+'\x20\x20\x20\x20source'+'.id\x20=\x20texe'+'lFetch(spl'+'atOrder,\x20o'+'rderUV,\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20/'+'/\x20map\x20id\x20t'+'o\x20uv\x0a\x20\x20\x20\x20s'+'ource.uv\x20='+'\x20ivec2(sou'+'rce.id\x20%\x20w'+',\x20source.i'+'d\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20true;'+'\x0a}\x0a',sP='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0aun'+'iform\x20int\x20'+'pointCloud'+'ModeEnable'+'d;\x0auniform'+'\x20float\x20uTi'+'me;\x0aunifor'+'m\x20float\x20pr'+'erenderCTi'+'me;\x0aunifor'+'m\x20float\x20uS'+'aturation;'+'\x20//\x200.0-2.'+'01.0\x20'+'\x0auniform'+'\x20float\x20uHu'+'eOffset;\x20\x20'+'//\x20'+'360'+'\x0auniform\x20v'+'ec3\x20clrOff'+'set;\x0aunifo'+'rm\x20vec4\x20cl'+'rScale;\x0aun'+'iform\x20floa'+'t\x20uOpacity'+';\x0auniform\x20'+'int\x20uInver'+'tOpacity;\x0a'+'\x0avarying\x20m'+'ediump\x20vec'+'2\x20gaussian'+'UV;\x0avaryin'+'g\x20mediump\x20'+'vec4\x20gauss'+'ianColor;\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianS'+'ize;\x0avaryi'+'ng\x20mediump'+'\x20vec2\x20gaus'+'sianCUV;\x0av'+'arying\x20med'+'iump\x20float'+'\x20saveMargi'+'nal;\x0a\x0a//\x20='+'====\x20\x20H'+'SV/RGB\x20\x20'+'=====\x0ahigh'+'p\x20vec3\x20rgb'+'2hsv(highp'+'\x20vec3\x20c)\x20{'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20cMa'+'x\x20=\x20max(ma'+'x(c.r,\x20c.g'+'),\x20c.b);\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20cMin\x20'+'=\x20min(min('+'c.r,\x20c.g),'+'\x20c.b);\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20delta\x20='+'\x20cMax\x20-\x20cM'+'in\x20+\x201e-10'+';\x20//\x200\x0a'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20h\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'if\x20(delta\x20'+'>\x201e-6)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(cMax\x20==\x20'+'c.r)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20=\x20mod((c.'+'g\x20-\x20c.b)\x20/'+'\x20delta,\x206.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(cMax\x20=='+'\x20c.g)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.b\x20-'+'\x20c.r)\x20/\x20de'+'lta\x20+\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.r\x20-'+'\x20c.g)\x20/\x20de'+'lta\x20+\x204.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20/=\x206.0;\x20/'+'/\x20\x20[0,1]'+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(h\x20<\x200.0'+')\x20h\x20+=\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20s\x20=\x20('+'cMax\x20<\x201e-'+'6)\x20?\x200.0\x20:'+'\x20delta\x20/\x20c'+'Max;\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20v\x20=\x20cMax;'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec3(h,\x20'+'s,\x20v);\x0a}\x0a\x0a'+'highp\x20vec3'+'\x20hsv2rgb(h'+'ighp\x20vec3\x20'+'c)\x20{\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20h\x20=\x20c.x\x20*'+'\x206.0;\x20//\x200'+'-6\x0a\x20\x20\x20\x20hig'+'hp\x20float\x20s'+'\x20=\x20c.y;\x0a\x20\x20'+'\x20\x20highp\x20fl'+'oat\x20v\x20=\x20c.'+'z;\x0a\x0a\x20\x20\x20\x20hi'+'ghp\x20int\x20i\x20'+'=\x20int(floo'+'r(h));\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20f\x20=\x20h\x20-'+'\x20float(i);'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20p\x20='+'\x20v\x20*\x20(1.0\x20'+'-\x20s);\x0a\x20\x20\x20\x20'+'highp\x20floa'+'t\x20q\x20=\x20v\x20*\x20'+'(1.0\x20-\x20s\x20*'+'\x20f);\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20t\x20=\x20v\x20*\x20('+'1.0\x20-\x20s\x20*\x20'+'(1.0\x20-\x20f))'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(i\x20==\x200)\x20r'+'eturn\x20vec3'+'(v,\x20t,\x20p);'+'\x0a\x20\x20\x20\x20else\x20'+'if\x20(i\x20==\x201'+')\x20return\x20v'+'ec3(q,\x20v,\x20'+'p);\x0a\x20\x20\x20\x20el'+'se\x20if\x20(i\x20='+'=\x202)\x20retur'+'n\x20vec3(p,\x20'+'v,\x20t);\x0a\x20\x20\x20'+'\x20else\x20if\x20('+'i\x20==\x203)\x20re'+'turn\x20vec3('+'p,\x20q,\x20v);\x0a'+'\x20\x20\x20\x20else\x20i'+'f\x20(i\x20==\x204)'+'\x20return\x20ve'+'c3(t,\x20p,\x20v'+');\x0a\x20\x20\x20\x20els'+'e\x20return\x20v'+'ec3(v,\x20p,\x20'+'q);\x20//\x20i=='+'5\x0a}\x0a\x0a#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20id;\x0a#en'+'dif\x0a\x0amediu'+'mp\x20vec4\x20di'+'scardVec\x20='+'\x20vec4(0.0,'+'\x200.0,\x202.0,'+'\x201.0);\x0a\x0a#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20varying\x20'+'float\x20vLin'+'earDepth;\x0a'+'#endif\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'//\x20read\x20ga'+'ussian\x20det'+'ails\x0a\x20\x20\x20\x20S'+'platSource'+'\x20source;\x0a\x20'+'\x20\x20\x20if\x20(!in'+'itSource(s'+'ource))\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20')+('=\x20discardV'+'ec;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20saveMargi'+'nal\x20=\x20getM'+'arginalT(s'+'ource,\x20uTi'+'me);\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20float\x20'+'marginal\x20='+'\x20uOpenAnim'+'\x20==\x201\x20?\x201.'+'0\x20:\x20saveMa'+'rginal;\x0a\x20\x20'+'\x20\x20if\x20(marg'+'inal\x20<\x200.0'+'5)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Posi'+'tion\x20=\x20dis'+'cardVec;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec3'+'\x20modelCent'+'er;\x0a\x20\x20\x20\x20bo'+'ol\x20isCente'+'r4D\x20=\x20save'+'Marginal\x20>'+'=\x200.05;\x0a\x20\x20'+'\x20\x20if\x20(isCe'+'nter4D)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'delCenter\x20'+'=\x20readCent'+'er4D(sourc'+'e,\x20uTime);'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20modelCen'+'ter\x20=\x20read'+'Center(sou'+'rce);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20Spl'+'atCenter\x20c'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'center))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return;'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20int\x20'+'showCloud\x20'+'=\x20pointClo'+'udModeEnab'+'led;\x0a\x20\x20\x20\x20i'+'f\x20(prerend'+'erCTime\x20=='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(prer'+'enderCTime'+'\x20>=\x201.0\x20&&'+'\x20prerender'+'CTime\x20<\x202.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20showClo'+'ud\x20=\x201;\x0a\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(prerend'+'erCTime\x20>='+'\x202.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20proje'+'ct\x20center\x20'+'to\x20screen\x20'+'space\x0a\x20\x20\x20\x20'+'SplatCorne'+'r\x20corner;\x0a'+'\x20\x20\x20\x20if\x20(!i'+'nitCorner('+'source,\x20ce'+'nter,\x20corn'+'er,\x20showCl'+'oud))\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_P'+'osition\x20=\x20')+('discardVec'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20vec'+'4\x20clr\x20=\x20re'+'adColor(so'+'urce,\x20uTim'+'e,\x20!isCent'+'er4D,\x20poin'+'tCloudMode'+'Enabled);\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'apply\x20AA\x20c'+'ompensatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'clr.a\x20*=\x20c'+'orner.aaFa'+'ctor;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20if(margi'+'nal\x20>\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20clr.w\x20*=\x20'+'marginal;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20\x0a\x20'+'\x20\x20\x20if\x20(uCo'+'ntrolColor'+'Mode\x20==\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'tint/brigh'+'tness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr\x20=\x20'+'clr\x20*\x20clrS'+'cale\x20+\x20vec'+'4(clrOffse'+'t,\x200.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(uInvertO'+'pacity\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20clr'+'.a\x20=\x201.0\x20-'+'\x20clr.a;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20don\x27t\x20'+'allow\x20out-'+'of-range\x20a'+'lpha\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20clr\x20=\x20c'+'lamp(clr,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20evalu'+'ate\x20spheri'+'cal\x20harmon'+'ics\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20the\x20'+'model-spac'+'e\x20view\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20norm'+'alize(cent'+'er.view\x20*\x20'+'mat3(cente'+'r.modelVie'+'w));\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20rea'+'d\x20sh\x20coeff'+'icients\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sh[SH_COE'+'FFS];\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20readS'+'HData(sour'+'ce,\x20sh,\x20sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr.x'+'yz\x20+=\x20eval'+'SH(sh,\x20dir'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(co'+'rner,\x20clr.'+'w);\x0a\x0a\x20\x20\x20\x20/')+('/\x20pointClo'+'udMode\x0a\x20\x20\x20'+'\x20//\x20if\x20(po'+'intCloudMo'+'deEnabled\x20'+'==\x201)\x20{\x0a\x20\x20'+'\x20\x20//\x20\x20\x20\x20\x20c'+'lr.a\x20=\x201.0'+';\x0a\x20\x20\x20\x20//\x20}'+'\x0a\x20\x20\x20\x20highp'+'\x20vec3\x20colo'+'r\x20=\x20max(cl'+'r.xyz,\x200.0'+');\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20\x0a'+'\x20\x20\x20\x20if\x20(uC'+'ontrolColo'+'rMode\x20==\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20\x20HSV'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'ighp\x20vec3\x20'+'hsv\x20=\x20rgb2'+'hsv(color)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20hsv.'+'y\x20*=\x20uSatu'+'ration;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20hsv.x\x20=\x20f'+'ract(hsv.x'+'\x20+\x20uHueOff'+'set\x20/\x20360.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20\x20RGB'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor\x20=\x20hsv'+'2rgb(hsv);'+'\x20\x20\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wri'+'te\x20output\x0a'+'\x20\x20\x20\x20gl_Pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4(cor'+'ner.offset'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20gaussia'+'nUV\x20=\x20corn'+'er.uv;\x0a\x20\x20\x20'+'\x20gaussianC'+'UV\x20=\x20corne'+'r.cUV;\x0a\x20\x20\x20'+'\x20gaussianS'+'ize\x20=\x20corn'+'er.cSize;\x0a'+'\x20\x20\x20\x20gaussi'+'anColor\x20=\x20'+'vec4(prepa'+'reOutputFr'+'omGamma(co'+'lor),\x20clr.'+'w);\x0a\x20\x20\x20\x20ga'+'ussianColo'+'r\x20=\x20clamp('+'gaussianCo'+'lor,\x200.0,\x20'+'1.0);\x0a\x0a\x20\x20\x20'+'\x20#ifndef\x20D'+'ITHER_NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'d\x20=\x20float('+'source.id)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vLin'+'earDepth\x20='+'\x20-center.v'+'iew.z;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),iP='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'aPosition;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x0a\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(aPos'+'ition,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv0\x20'+'=\x20getImage'+'EffectUV(('+'aPosition.'+'xy\x20+\x201.0)\x20'+'*\x200.5);\x0a\x20\x20'+'\x20\x20}\x0a',rP='\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec4\x20c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(decodeG'+'amma(color'+'.rgb)),\x20co'+'lor.a);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a',aP='\x0a\x20\x20\x20\x20attri'+'bute\x20vec4\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec4\x20vert'+'ex_color;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20co'+'lor;\x0a\x20\x20\x20\x20v'+'oid\x20main(v'+'oid)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20=\x20vertex_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20matrix_'+'model\x20*\x20ve'+'rtex_posit'+'ion;\x0a\x20\x20\x20\x20}'+'\x0a',nP='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceRefra'+'ctionIndex'+';\x0a\x0afloat\x20i'+'ridescence'+'_iorToFres'+'nel(float\x20'+'transmitte'+'dIor,\x20floa'+'t\x20incident'+'Ior)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'incidentIo'+'r)\x20/\x20(tran'+'smittedIor'+'\x20+\x20inciden'+'tIor),\x202.0'+');\x0a}\x0a\x0avec3'+'\x20iridescen'+'ce_iorToFr'+'esnel(vec3'+'\x20transmitt'+'edIor,\x20flo'+'at\x20inciden'+'tIor)\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow((transm'+'ittedIor\x20-'+'\x20vec3(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3(incid'+'entIor)),\x20'+'vec3(2.0))'+';\x0a}\x0a\x0avec3\x20'+'iridescenc'+'e_fresnelT'+'oIor(vec3\x20'+'f0)\x20{\x0a\x20\x20\x20\x20'+'vec3\x20sqrtF'+'0\x20=\x20sqrt(f'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20(vec3'+'(1.0)\x20+\x20sq'+'rtF0)\x20/\x20(v'+'ec3(1.0)\x20-'+'\x20sqrtF0);\x0a'+'}\x0a\x0avec3\x20ir'+'idescence_'+'sensitivit'+'y(float\x20op'+'d,\x20vec3\x20sh'+'ift)\x20{\x0a\x20\x20\x20'+'\x20float\x20PI\x20'+'=\x203.141592'+'653589793;'+'\x0a\x20\x20\x20\x20float'+'\x20phase\x20=\x202'+'.0\x20*\x20PI\x20*\x20'+'opd\x20*\x201.0e'+'-9;\x0a\x20\x20\x20\x20co'+'nst\x20vec3\x20v'+'al\x20=\x20vec3('+'5.4856e-13'+',\x204.4201e-'+'13,\x205.2481'+'e-13);\x0a\x20\x20\x20'+'\x20const\x20vec'+'3\x20pos\x20=\x20ve'+'c3(1.6810e'+'+06,\x201.795'+'3e+06,\x202.2'+'084e+06);\x0a'+'\x20\x20\x20\x20const\x20'+'vec3\x20var\x20='+'\x20vec3(4.32'+'78e+09,\x209.'+'3046e+09,\x20'+'6.6121e+09'+');\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20xyz\x20=\x20v'+'al\x20*\x20sqrt('+'2.0\x20*\x20PI\x20*'+'\x20var)\x20*\x20co'+'s(pos\x20*\x20ph'+'ase\x20+\x20shif'+'t)\x20*\x20exp(-'+'pow(phase,'+'\x202.0)\x20*\x20va'+'r);\x0a\x20\x20\x20\x20xy'+'z.x\x20+=\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+('cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20/=\x20vec3(1'+'.0685e-07)'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20mat3\x20XY'+'Z_TO_REC70'+'9\x20=\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x203.'+'2404542,\x20-'+'0.9692660,'+'\x20\x200.055643'+'4,\x0a\x20\x20\x20\x20\x20\x20\x20'+'-1.5371385'+',\x20\x201.87601'+'08,\x20-0.204'+'0259,\x0a\x20\x20\x20\x20'+'\x20\x20\x20-0.4985'+'314,\x20\x200.04'+'15560,\x20\x201.'+'0572252\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'return\x20XYZ'+'_TO_REC709'+'\x20*\x20xyz;\x0a}\x0a'+'\x0afloat\x20iri'+'descence_f'+'resnel(flo'+'at\x20cosThet'+'a,\x20float\x20f'+'0)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20x\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20x2\x20=\x20x\x20*'+'\x20x;\x0a\x20\x20\x20\x20fl'+'oat\x20x5\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x20\x0a\x0av'+'ec3\x20irides'+'cence_fres'+'nel(float\x20'+'cosTheta,\x20'+'vec3\x20f0)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20clamp'+'(1.0\x20-\x20cos'+'Theta,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20float\x20x2'+'\x20=\x20x\x20*\x20x;\x0a'+'\x20\x20\x20\x20float\x20'+'x5\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x20\x0a\x20'+'\x20\x20\x20return\x20'+'f0\x20+\x20(vec3'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0avec3\x20calc'+'Iridescenc'+'e(float\x20ou'+'tsideIor,\x20'+'float\x20cosT'+'heta,\x20vec3'+'\x20base_f0,\x20'+'float\x20irid'+'escenceThi'+'ckness)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceIor\x20'+'=\x20mix(outs'+'ideIor,\x20ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20float'+'\x20sinTheta2'+'Sq\x20=\x20pow(o'+'utsideIor\x20'+'/\x20iridesce')+('nceIor,\x202.'+'0)\x20*\x20(1.0\x20'+'-\x20pow(cosT'+'heta,\x202.0)'+');\x0a\x20\x20\x20\x20flo'+'at\x20cosThet'+'a2Sq\x20=\x201.0'+'\x20-\x20sinThet'+'a2Sq;\x0a\x0a\x20\x20\x20'+'\x20if\x20(cosTh'+'eta2Sq\x20<\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec3(1.0)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20c'+'osTheta2\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20r0\x20=\x20irid'+'escence_io'+'rToFresnel'+'(iridescen'+'ceIor,\x20out'+'sideIor);\x0a'+'\x20\x20\x20\x20float\x20'+'r12\x20=\x20irid'+'escence_fr'+'esnel(cosT'+'heta,\x20r0);'+'\x0a\x20\x20\x20\x20float'+'\x20r21\x20=\x20r12'+';\x0a\x20\x20\x20\x20floa'+'t\x20t121\x20=\x201'+'.0\x20-\x20r12;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20phi12\x20=\x20i'+'ridescence'+'Ior\x20<\x20outs'+'ideIor\x20?\x20P'+'I\x20:\x200.0;\x0a\x20'+'\x20\x20\x20float\x20p'+'hi21\x20=\x20PI\x20'+'-\x20phi12;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20b'+'aseIor\x20=\x20i'+'ridescence'+'_fresnelTo'+'Ior(base_f'+'0\x20+\x20vec3(0'+'.0001));\x0a\x20'+'\x20\x20\x20vec3\x20r1'+'\x20=\x20iridesc'+'ence_iorTo'+'Fresnel(ba'+'seIor,\x20iri'+'descenceIo'+'r);\x0a\x20\x20\x20\x20ve'+'c3\x20r23\x20=\x20i'+'ridescence'+'_fresnel(c'+'osTheta2,\x20'+'r1);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20phi23'+'\x20=\x20vec3(0.'+'0);\x0a\x20\x20\x20\x20if'+'\x20(baseIor['+'0]\x20<\x20iride'+'scenceIor)'+'\x20phi23[0]\x20'+'=\x20PI;\x0a\x20\x20\x20\x20'+'if\x20(baseIo'+'r[1]\x20<\x20iri'+'descenceIo'+'r)\x20phi23[1'+']\x20=\x20PI;\x0a\x20\x20'+'\x20\x20if\x20(base'+'Ior[2]\x20<\x20i'+'ridescence'+'Ior)\x20phi23'+'[2]\x20=\x20PI;\x0a'+'\x20\x20\x20\x20float\x20'+'opd\x20=\x202.0\x20'+'*\x20iridesce'+'nceIor\x20*\x20i'+'ridescence'+'Thickness\x20'+'*\x20cosTheta'+'2;\x0a\x20\x20\x20\x20vec'+'3\x20phi\x20=\x20ve'+'c3(phi21)\x20'+'+\x20phi23;\x20\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123Sq\x20=\x20c'+'lamp(r12\x20*'+'\x20r23,\x201e-5'+',\x200.9999);'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123\x20=\x20sqr')+('t(r123Sq);'+'\x0a\x20\x20\x20\x20vec3\x20'+'rs\x20=\x20pow(t'+'121,\x202.0)\x20'+'*\x20r23\x20/\x20(1'+'.0\x20-\x20r123S'+'q);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20c0\x20=\x20r'+'12\x20+\x20rs;\x0a\x20'+'\x20\x20\x20vec3\x20i\x20'+'=\x20c0;\x0a\x0a\x20\x20\x20'+'\x20vec3\x20cm\x20='+'\x20rs\x20-\x20t121'+';\x0a\x20\x20\x20\x20for\x20'+'(int\x20m\x20=\x201'+';\x20m\x20<=\x202;\x20'+'m++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20cm\x20*='+'\x20r123;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'sm\x20=\x202.0\x20*'+'\x20iridescen'+'ce_sensiti'+'vity(float'+'(m)\x20*\x20opd,'+'\x20float(m)\x20'+'*\x20phi);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20i\x20+='+'\x20cm\x20*\x20sm;\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20max'+'(i,\x20vec3(0'+'.0));\x0a}\x0a\x0av'+'ec3\x20getIri'+'descence(f'+'loat\x20cosTh'+'eta,\x20vec3\x20'+'specularit'+'y,\x20float\x20i'+'ridescence'+'Thickness)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),oP='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_irid'+'escence;\x0a#'+'endif\x0a\x0avoi'+'d\x20getIride'+'scence()\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_IRID'+'ESCENCE_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20iridescen'+'ce\x20*=\x20mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20*=\x20textur'+'e2DBias({S'+'TD_IRIDESC'+'ENCE_TEXTU'+'RE_NAME},\x20'+'{STD_IRIDE'+'SCENCE_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCE_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scence\x20=\x20i'+'ridescence'+';\x20\x0a}\x0a',lP='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceThick'+'nessMax;\x0a\x0a'+'#ifdef\x20STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_iridesc'+'enceThickn'+'essMin;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'end\x20=\x20text'+'ure2DBias('+'{STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE_NAME},'+'\x20{STD_IRID'+'ESCENCETHI'+'CKNESS_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCET'+'HICKNESS_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20iridescen'+'ceThicknes'+'s\x20=\x20mix(ma'+'terial_iri'+'descenceTh'+'icknessMin'+',\x20material'+'_iridescen'+'ceThicknes'+'sMax,\x20blen'+'d);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20ir'+'idescenceT'+'hickness\x20='+'\x20material_'+'iridescenc'+'eThickness'+'Max;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dIridesce'+'nceThickne'+'ss\x20=\x20iride'+'scenceThic'+'kness;\x20\x0a}\x0a',cP='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'fractionIn'+'dex;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tIor()\x20{\x0a#'+'ifdef\x20STD_'+'IOR_CONSTA'+'NT\x0a\x20\x20\x20\x20dIo'+'r\x20=\x20materi'+'al_refract'+'ionIndex;\x0a'+'#else\x0a\x20\x20\x20\x20'+'dIor\x20=\x201.0'+'\x20/\x201.5;\x0a#e'+'ndif\x0a}\x0a',hP='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20light{i}_'+'color;\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec3\x20light'+'{i}_direct'+'ion;\x0a\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20LIT_CODE'+'_LIGHTS_PO'+'INT\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20point\x20l'+'ights\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_pos'+'ition;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_ra'+'dius;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20SPOT\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20spot\x20ligh'+'ts\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20l'+'ight{i}_di'+'rection;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20light'+'{i}_innerC'+'oneAngle;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_outer'+'ConeAngle;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'3\x20light{i}'+'_position;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20vec3\x20lig'+'ht{i}_half'+'Width;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_hal'+'fHeight;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'FALLOFF\x20=='+'\x20LINEAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+('T_CODE_FAL'+'LOFF_LINEA'+'R\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20linear\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}FALLOFF\x20'+'==\x20INVERSE'+'SQUARED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ca'+'sting\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'CASTSHADOW'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'at4\x20light{'+'i}_shadowM'+'atrix;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_sh'+'adowIntens'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec4\x20ligh'+'t{i}_shado'+'wParams;\x20/'+'/\x20width,\x20h'+'eight,\x20bia'+'s,\x20radius\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_s'+'hadowSearc'+'hArea;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20light{i}'+'_cameraPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_sof'+'tShadowPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20direction'+'al\x20(cascad'+'ed)\x20shadow'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrixPa'+'lette[4];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec4\x20light'+'{i}_shadow'+'CascadeDis'+'tances;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20in'+'t\x20light{i}'+'_shadowCas')+('cadeCount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_shad'+'owCascadeB'+'lend;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'SHADOW_PCF'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2DShado'+'w\x20light{i}'+'_shadowMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_shadowM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'okie\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIGHT{i}C'+'OOKIE)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_COOKIE\x20'+'//\x20include'+'\x20functiona'+'lity\x20for\x20c'+'ookies\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20light{i'+'}_cookie;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_cooki'+'eIntensity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d'+'efined(LIG'+'HT{i}CASTS'+'HADOW)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20ligh'+'t{i}_shado'+'wMatrix;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20SPOT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20lig')+('ht{i}_cook'+'ie;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_c'+'ookieInten'+'sity;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIGHT{i}C'+'ASTSHADOW)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'light{i}_s'+'hadowMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIGH'+'T{i}COOKIE'+'_TRANSFORM'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20light{i}_'+'cookieMatr'+'ix;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c2\x20light{i'+'}_cookieOf'+'fset;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),dP='\x0afloat\x20get'+'LightDiffu'+'se(vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir,\x20vec3\x20'+'lightDirNo'+'rm)\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',fP='\x0avec3\x20eval'+'OmniLight('+'vec3\x20light'+'PosW)\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'PositionW\x20'+'-\x20lightPos'+'W;\x0a}\x0a',uP='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',pP='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0avoid\x20e'+'valuateLig'+'ht{i}(\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20iridesc'+'enceFresne'+'l\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20color\x0a\x20\x20\x20'+'\x20vec3\x20ligh'+'tColor\x20=\x20l'+'ight{i}_co'+'lor;\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x20&&\x20!defi'+'ned(LIT_SH'+'ADOW_CATCH'+'ER)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20return\x20if'+'\x20the\x20light'+'\x20color\x20is\x20'+'black\x20(use'+'d\x20by\x20shado'+'w\x20catcher\x20'+'-\x20this\x20way'+'\x20this\x20ligh'+'t\x20is\x20very\x20'+'cheap)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(a'+'ll(equal(l'+'ightColor,'+'\x20vec3(0.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20dir'+'ectional\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dLight'+'DirNormW\x20='+'\x20light{i}_'+'direction;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20omn'+'i\x20or\x20spot\x20'+'light\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtDirW\x20=\x20'+'evalOmniLi'+'ght(light{'+'i}_positio'+'n);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightDi'+'rNormW\x20=\x20n'+'ormalize(l'+'ightDirW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20cookie\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'COOKIE)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_FALLOF'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_TRANSF'+'ORM\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2DXform('+('light{i}_c'+'ookie,\x20lig'+'ht{i}_shad'+'owMatrix,\x20'+'light{i}_c'+'ookieInten'+'sity,\x20ligh'+'t{i}_cooki'+'eMatrix,\x20l'+'ight{i}_co'+'okieOffset'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2D(light'+'{i}_cookie'+',\x20light{i}'+'_shadowMat'+'rix,\x20light'+'{i}_cookie'+'Intensity)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}COOKIE_TR'+'ANSFORM\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'Cookie2DCl'+'ipXform(li'+'ght{i}_coo'+'kie,\x20light'+'{i}_shadow'+'Matrix,\x20li'+'ght{i}_coo'+'kieIntensi'+'ty,\x20light{'+'i}_cookieM'+'atrix,\x20lig'+'ht{i}_cook'+'ieOffset).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20cookieAtt'+'enuation\x20='+'\x20getCookie'+'2DClip(lig'+'ht{i}_cook'+'ie,\x20light{'+'i}_shadowM'+'atrix,\x20lig'+'ht{i}_cook'+'ieIntensit'+'y).{LIGHT{'+'i}COOKIE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20OMNI\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'CookieCube'+'(light{i}_'+'cookie,\x20li'+'ght{i}_sha')+('dowMatrix,'+'\x20light{i}_'+'cookieInte'+'nsity).{LI'+'GHT{i}COOK'+'IE_CHANNEL'+'};\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20mu'+'ltiply\x20lig'+'ht\x20color\x20b'+'y\x20the\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lig'+'htColor\x20*='+'\x20cookieAtt'+'enuation;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20di'+'stance\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20==\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}FAL'+'LOFF\x20==\x20LI'+'NEAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Linear(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20=\x20g'+'etFalloffI'+'nvSquared('+'light{i}_r'+'adius,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20non'+'\x20punctual\x20'+'lights\x20onl'+'y\x20gets\x20the'+'\x20range\x20win'+'dow\x20here\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Window(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20spot\x20li'+'ght\x20angle\x20'+'falloff\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20SPOT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20!de'+'fined(LIGH'+'T{i}COOKIE'+')\x20||\x20defin'+'ed(LIGHT{i'+'}COOKIE_FA'+'LLOFF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dAtten\x20'+'*=\x20getSpot'+'Effect(lig'+'ht{i}_dire'+'ction,\x20lig'+'ht{i}_inne'+'rConeAngle'+',\x20light{i}'+'_outerCone'+'Angle,\x20dLi'+'ghtDirNorm'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20if\x20(dA'+'tten\x20<\x200.0')+('0001)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20are'+'a\x20light\x20va'+'lues\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcR'+'ectLightVa'+'lues(light'+'{i}_positi'+'on,\x20light{'+'i}_halfWid'+'th,\x20light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20calcDi'+'skLightVal'+'ues(light{'+'i}_positio'+'n,\x20light{i'+'}_halfWidt'+'h,\x20light{i'+'}_halfHeig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcS'+'phereLight'+'Values(lig'+'ht{i}_posi'+'tion,\x20ligh'+'t{i}_halfW'+'idth,\x20ligh'+'t{i}_halfH'+'eight);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'lighting\x20-'+'\x20LTC\x20light'+'s\x20do\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20'+'into\x20atten'+'uation\x20tha'+'t\x20affects\x20'+'specular\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20atten'+'Diffuse\x20-\x20'+'separate\x20d'+'iffuse\x20att'+'enuation\x20f'+'or\x20non-pun'+'ctual\x20ligh'+'t\x20sources\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20NB:\x20'+'A\x20better\x20a'+'pproximati'+'on\x20perhaps'+'\x20using\x20wra'+'p\x20lighting'+'\x20could\x20be\x20'+'implemente'+'d\x20here\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20atten'+'Diffuse\x20=\x20'+'getLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dL'+'ightDirNor'+'mW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x2016.0\x20i'+'s\x20a\x20consta'+'nt\x20that\x20is'+'\x20in\x20getFal'+'loffInvSqu'+'ared()\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20==\x20'+'RECT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getRectL'+'ightDiffus'+'e(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20lightD'+'irW,\x20dLigh'+'tDirNormW)'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20attenDiff'+'use\x20=\x20getD'+'iskLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20li'+'ghtDirW,\x20d'+'LightDirNo'+'rmW)\x20*\x2016.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getSpher'+'eLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20ligh'+'tDirW,\x20dLi'+'ghtDirNorm'+'W)\x20*\x2016.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20one\x20'+'parameter\x20'+'is\x20unused\x20'+'for\x20punctu'+'al\x20lights\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20*=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20vec3('+'0.0),\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20apply\x20th'+'e\x20shadow\x20a'+'ttenuation'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'CASTSHADOW'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadow{i'+'}(vec3(0.0'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adow{i}(li'+'ghtDirW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20App')+('ly\x20shadow\x20'+'intensity\x20'+'to\x20the\x20sha'+'dow\x20value\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20=\x20mix'+'(1.0,\x20shad'+'ow,\x20light{'+'i}_shadowI'+'ntensity);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20*=\x20'+'shadow;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_SHADOW_'+'CATCHER)\x20&'+'&\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20accum'+'ulate\x20shad'+'ows\x20for\x20di'+'rectional\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ShadowCatc'+'her\x20*=\x20sha'+'dow;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20-\x20they\x20do'+'\x20not\x20mix\x20d'+'iffuse\x20lig'+'hting\x20into'+'\x20specular\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20('+'(attenDiff'+'use\x20*\x20dAtt'+'en)\x20*\x20ligh'+'tColor)\x20*\x20'+'(1.0\x20-\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(atte'+'nDiffuse\x20*'+'\x20dAtten)\x20*'+'\x20lightColo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20punctua'+'l\x20light\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(AR'+'EA_LIGHTS)'+'\x20&&\x20define'+'d(LIT_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(dAtt'+'en\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20litA'+'rgs_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20spec'+'ular\x20light'+'ing\x0a\x20\x20\x20\x20#i'+'fdef\x20LIGHT')+('{i}AFFECT_'+'SPECULARIT'+'Y\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x20//\x20area\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccSpecula'+'rLight\x20+=\x20'+'ccLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_clear'+'coat_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20ccLTC'+'SpecFres\x20*'+'\x20getDiskLi'+'ghtSpecula'+'r(litArgs_'+'clearcoat_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20+'+'=\x20ccLTCSpe'+'cFres\x20*\x20ge'+'tSphereLig'+'htSpecular'+'(litArgs_c'+'learcoat_w'+'orldNormal'+',\x20dViewDir'+'W)\x20*\x20dAtte'+'n\x20*\x20lightC'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20dLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp')+('ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20SPHERE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20d'+'LTCSpecFre'+'s\x20*\x20getSph'+'ereLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20punctual'+'\x20light\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20is\x20fres'+'nel\x20needed'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20LI'+'T_FRESNEL_'+'MODEL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'GHT{i}FRES'+'NEL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20hal'+'fDirW\x20=\x20no'+'rmalize(-d'+'LightDirNo'+'rmW\x20+\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20if\x20LTC\x20'+'lights\x20are'+'\x20present,\x20'+'specular\x20m'+'ust\x20be\x20acc'+'umulated\x20w'+'ith\x20specul'+'arity\x20(spe'+'cularity\x20i'+'s\x20pre\x20mult'+'iplied\x20by\x20'+'punctual\x20l'+'ight\x20fresn'+'el)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtspecula'+'rCC\x20=\x20getL'+'ightSpecul'+'ar(halfDir'+'W,\x20ccReflD'+'irW,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_clearcoat'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tspecularC'+'C\x20*=\x20getFr'+'esnelCC(do'+'t(dViewDir'+'W,\x20halfDir'+'W));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20lightsp'+'ecularCC;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_sheen_glo'+'ss)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20lightSpec'+'ular\x20=\x20get'+'LightSpecu'+'lar(halfDi'+'rW,\x20dReflD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightSpecu'+'lar\x20*=\x20get'+'Fresnel(do'+'t(dViewDir'+'W,\x20halfDir'+'W),\x20litArg'+'s_gloss,\x20l'+'itArgs_spe'+'cularity,\x20'+'iridescenc'+'eFresnel,\x20'+'litArgs_ir'+'idescence_'+'intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20*=\x20g'+'etFresnel('+'dot(dViewD'+'irW,\x20halfD'+'irW),\x20litA'+'rgs_gloss,'+'\x20litArgs_s')+('pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20lightSp'+'ecular\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20+=\x20light'+'Specular;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a#en'+'dif\x0a'),mP='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20vec3\x20'+'getShadowS'+'ampleCoord'+'{i}(mat4\x20s'+'hadowTrans'+'form,\x20vec4'+'\x20shadowPar'+'ams,\x20vec3\x20'+'worldPosit'+'ion,\x20vec3\x20'+'lightPos,\x20'+'inout\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'vec3\x20norma'+'l)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'urfacePosi'+'tion\x20=\x20wor'+'ldPosition'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT{i}_SHA'+'DOW_SAMPLE'+'_POINT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20len'+'gth(lightD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightDir'+'\x20=\x20surface'+'Position\x20-'+'\x20lightPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20lightD'+'ir;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_S'+'OURCE_ZBUF'+'FER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+('NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_NORMAL_O'+'FFSET\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20distScal'+'e\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20abs'+'(dot(vPosi'+'tionW\x20-\x20li'+'ghtPos,\x20li'+'ghtDirNorm'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20posi'+'tionInShad'+'owSpace\x20=\x20'+'shadowTran'+'sform\x20*\x20ve'+'c4(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM'+'PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20/=\x20po'+'sitionInSh'+'adowSpace.')+('w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20posit'+'ionInShado'+'wSpace.xy\x20'+'/=\x20positio'+'nInShadowS'+'pace.w;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20po'+'sitionInSh'+'adowSpace.'+'z\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20thi'+'s\x20is\x20curre'+'ntly\x20unuse'+'d\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20SHADOW_SA'+'MPLE_Z_BIA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20positionI'+'nShadowSpa'+'ce.z\x20+=\x20ge'+'tShadowBia'+'s(shadowPa'+'rams.x,\x20sh'+'adowParams'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20positi'+'onInShadow'+'Space.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20surfaceP'+'osition;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'evaluation'+'\x20function\x0a'+'\x20\x20\x20\x20float\x20'+'getShadow{'+'i}(vec3\x20li'+'ghtDirW)\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20shado'+'w\x20cascades'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_CASCADES'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20sel'+'ect\x20shadow'+'\x20cascade\x20m'+'atrix\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'t\x20cascadeI'+'ndex\x20=\x20get'+'ShadowCasc'+'adeIndex(l'+'ight{i}_sh'+'adowCascad'+'eDistances'+',\x20light{i}'+'_shadowCas'+'cadeCount)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'_SHADOW_CA'+'SCADE_BLEN'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'scadeIndex'+'\x20=\x20ditherS'+'hadowCasca'+'deIndex(ca'+'scadeIndex'+',\x20light{i}'+'_shadowCas'+'cadeDistan'+'ces,\x20light')+('{i}_shadow'+'CascadeCou'+'nt,\x20light{'+'i}_shadowC'+'ascadeBlen'+'d);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mat4'+'\x20shadowMat'+'rix\x20=\x20ligh'+'t{i}_shado'+'wMatrixPal'+'ette[casca'+'deIndex];\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t4\x20shadowM'+'atrix\x20=\x20li'+'ght{i}_sha'+'dowMatrix;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20DIRE'+'CTIONAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20light'+'\x20does\x20not\x20'+'have\x20a\x20pos'+'ition\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20light'+'{i}_shadow'+'Params,\x20vP'+'ositionW,\x20'+'vec3(0.0),'+'\x20lightDirW'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20shad'+'owCoord\x20=\x20'+'getShadowS'+'ampleCoord'+'{i}(shadow'+'Matrix,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20vPosition'+'W,\x20light{i'+'}_position'+',\x20lightDir'+'W,\x20dLightD'+'irNormW,\x20d'+'VertexNorm'+'alW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Fade\x20di'+'rectional\x20'+'shadow\x20at\x20'+'the\x20far\x20di'+'stance\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadowCoord'+'\x20=\x20fadeSha'+'dow(shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owCascadeD'+'istances);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20--'+'---\x20sample'+'\x20the\x20shado'+'w\x20-----\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x20/'+'/\x20-----\x20di'+'rectional\x20'+'light\x20----')+('-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wVSM16(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x205'+'.54);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20VSM_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowVSM32('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x2015.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCS'+'S_32F\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20sh'+'adowSearch'+'Area\x20=\x20vec'+'2(length(l'+'ight{i}_ha'+'lfWidth),\x20'+'length(lig'+'ht{i}_half'+'Height))\x20*'+'\x20light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCSS(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20light{i}_'+'cameraPara'+'ms,\x20shadow'+'SearchArea'+',\x20lightDir'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20light{i}'+'_softShado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF1_16'+'F\x20||\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'1_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF3'+'_16F\x20||\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCF3x3(SH'+'ADOWMAP_PA'+'SS(light{i'+'}_shadowMa'+'p),\x20shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owParams);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF5_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF5_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(SHADOWMAP'+'_PASS(ligh'+'t{i}_shado'+'wMap),\x20sha'+'dowCoord,\x20'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20S'+'POT\x20//\x20---'+'--\x20spot\x20li'+'ght\x20-----\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20V'+'SM_16F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potVSM16(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x205.54,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowSpo')+('tVSM32(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x201'+'5.0,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20shad'+'owSearchAr'+'ea\x20=\x20vec2('+'length(lig'+'ht{i}_half'+'Width),\x20le'+'ngth(light'+'{i}_halfHe'+'ight))\x20*\x20l'+'ight{i}_sh'+'adowSearch'+'Area;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(lig'+'ht{i}_shad'+'owSearchAr'+'ea);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotPCSS('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x20light{i}'+'_cameraPar'+'ams,\x20shado'+'wSearchAre'+'a,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF1_1'+'6F\x20||\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potPCF1x1('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(SHA')+('DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F5_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'5x5(SHADOW'+'MAP_PASS(l'+'ight{i}_sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20light{i'+'}_shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x20//\x20'+'-----\x20omni'+'\x20light\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCSS_32F'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P'+'UNCTUAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(len'+'gth(light{'+'i}_halfWid'+'th),\x20lengt'+'h(light{i}'+'_halfHeigh'+'t))\x20*\x20ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2(light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20shadowSe'+'archArea,\x20'+'lightDirW)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_')+('32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF3_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF3_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowOmniPC'+'F3x3(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),_P='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20areaLi'+'ghtsLutTex'+'1;\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20sampler2D'+'\x20areaLight'+'sLutTex2;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCSSPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22shadow'+'SoftPS\x22\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(SH'+'ADOW_KIND_'+'VSM)\x0a\x20\x20\x20\x20#'+'include\x20\x22s'+('hadowEVSMP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_LINEA'+'R\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fall'+'offLinearP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22fal'+'loffInvSqu'+'aredPS\x22\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20LIT_COD'+'E_LIGHTS_P'+'OINT\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'ightDirPoi'+'ntPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22spot'+'PS\x22\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_CODE_CO'+'OKIE\x0a\x20\x20\x20\x20#'+'include\x20\x22c'+'ookiePS\x22\x0a#'+'endif\x0a\x0a//\x20'+'clustered\x20'+'lighting\x0a#'+'ifdef\x20LIT_'+'CLUSTERED_'+'LIGHTS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22clustered'+'LightPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHT_'+'COUNT\x20>\x200\x0a'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20genera'+'te\x20shadow\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionSha'+'dowPS,\x20LIG'+'HT_COUNT\x22\x0a'+'\x0a\x20\x20\x20\x20//\x20LO'+'OP\x20-\x20gener'+'ate\x20light\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionLig'+'htPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a'),gP='\x0avoid\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20vec3\x20li'+'ghtmap,\x20\x0a\x20'+'\x20\x20\x20vec3\x20di'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20worldNo'+'rmal,\x20\x0a\x20\x20\x20'+'\x20vec3\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'vec3\x20refle'+'ctionDir,\x20'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20'+'\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20vertexNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'mat3\x20tbn\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x20\x0a\x20\x20'+'\x20\x20float\x20ir'+'idescenceI'+'ntensity\x0a#'+'endif\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'rectional\x20'+'lightmap\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x20&'+'&\x20defined('+'LIT_DIR_LI'+'GHTMAP)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dot(dir,\x20'+'dir)\x20<\x200.0'+'001)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'lightmap;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20vligh'+'t\x20=\x20satura'+'te(dot(dir'+',\x20-vertexN'+'ormal));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20fli'+'ght\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20nl'+'ight\x20=\x20(fl'+'ight\x20/\x20max'+'(vlight,\x200'+'.01))\x20*\x200.'+'5;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p\x20*\x20nlight'+'\x20*\x202.0;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20half'+'Dir\x20=\x20norm'+'alize(-dir'+'\x20+\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'specularLi'+'ght\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'*=\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20getFre'+'snel(dot(v'+'iewDir,\x20ha'+'lfDir),\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceInt'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'+=\x20specula'+'rLight;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20non-dire'+'ctional\x20li'+'ghtmap\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),SP='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'vec3\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_d'+'irLightMap'+';\x0a#endif\x0a\x0a'+'void\x20getLi'+'ghtMap()\x20{'+'\x0a\x0a\x20\x20\x20\x20dLig'+'htmap\x20=\x20ve'+'c3(1.0);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_LIGHT'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dLi'+'ghtmap\x20*=\x20'+'{STD_LIGHT'+'_TEXTURE_D'+'ECODE}(tex'+'ture2DBias'+'({STD_LIGH'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'LIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_LIGHTM'+'AP_DIR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dir\x20=\x20'+'texture2DB'+'ias(textur'+'e_dirLight'+'Map,\x20{STD_'+'LIGHT_TEXT'+'URE_UV},\x20t'+'extureBias'+').xyz\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dir'+'Dot\x20=\x20dot('+'dir,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightm'+'apDir\x20=\x20(d'+'irDot\x20>\x200.'+'001)\x20?\x20dir'+'\x20/\x20sqrt(di'+'rDot)\x20:\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_LIGHT_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightma'+'p\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_LIGHT_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a}\x0a',yP='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'float\x20calc'+'LightSpecu'+'lar(float\x20'+'gloss,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20h,\x20vec'+'3\x20lightDir'+'Norm,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20float\x20PI'+'\x20=\x203.14159'+'2653589793'+';\x0a\x20\x20\x20\x20floa'+'t\x20roughnes'+'s\x20=\x20max((1'+'.0\x20-\x20gloss'+')\x20*\x20(1.0\x20-'+'\x20gloss),\x200'+'.001);\x0a\x20\x20\x20'+'\x20float\x20alp'+'haRoughnes'+'s\x20=\x20roughn'+'ess\x20*\x20roug'+'hness;\x0a\x20\x20\x20'+'\x20float\x20ani'+'sotropy\x20=\x20'+'dAnisotrop'+'y;\x0a\x20\x20\x20\x20vec'+'2\x20directio'+'n\x20=\x20dAniso'+'tropyRotat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'float\x20at\x20='+'\x20mix(alpha'+'Roughness,'+'\x201.0,\x20anis'+'otropy\x20*\x20a'+'nisotropy)'+';\x0a\x20\x20\x20\x20floa'+'t\x20ab\x20=\x20cla'+'mp(alphaRo'+'ughness,\x200'+'.001,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20anisotro'+'picT\x20=\x20nor'+'malize(tbn'+'\x20*\x20vec3(di'+'rection,\x200'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicB\x20=\x20'+'normalize('+'cross(tbn['+'2],\x20anisot'+'ropicT));\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20NoH\x20=\x20dot'+'(worldNorm'+'al,\x20h);\x0a\x20\x20'+'\x20\x20float\x20To'+'H\x20=\x20dot(an'+'isotropicT'+',\x20h);\x0a\x20\x20\x20\x20'+'float\x20BoH\x20'+'=\x20dot(anis'+'otropicB,\x20'+'h);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20a2\x20=\x20'+'at\x20*\x20ab;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20vec3(ab\x20'+'*\x20ToH,\x20at\x20'+'*\x20BoH,\x20a2\x20'+'*\x20NoH);\x0a\x20\x20'+'\x20\x20float\x20v2'+'\x20=\x20dot(v,\x20'+'v);\x0a\x20\x20\x20\x20fl'+'oat\x20w2\x20=\x20a'+'2\x20/\x20v2;\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'ToV\x20=\x20dot('+'anisotropi'+'cT,\x20viewDi'+'r);\x0a\x20\x20\x20\x20fl'+'oat\x20BoV\x20=\x20'+'dot(anisot'+'ropicB,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20float\x20To'+'L\x20=\x20dot(an'+'isotropicT'+(',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20Bo'+'L\x20=\x20dot(an'+'isotropicB'+',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20No'+'V\x20=\x20dot(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20float'+'\x20NoL\x20=\x20dot'+'(worldNorm'+'al,\x20-light'+'DirNorm);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20lambdaV\x20='+'\x20NoL\x20*\x20len'+'gth(vec3(a'+'t\x20*\x20ToV,\x20a'+'b\x20*\x20BoV,\x20N'+'oV));\x0a\x20\x20\x20\x20'+'float\x20lamb'+'daL\x20=\x20NoV\x20'+'*\x20length(v'+'ec3(at\x20*\x20T'+'oL,\x20ab\x20*\x20B'+'oL,\x20NoL));'+'\x0a\x20\x20\x20\x20float'+'\x20G\x20=\x200.5\x20/'+'\x20(lambdaV\x20'+'+\x20lambdaL)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20D\x20*\x20G;'+'\x0a}\x0a\x0afloat\x20'+'getLightSp'+'ecular(vec'+'3\x20h,\x20vec3\x20'+'reflDir,\x20v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'float\x20glos'+'s,\x20mat3\x20tb'+'n)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'LightSpecu'+'lar(gloss,'+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20h,\x20ligh'+'tDirNorm,\x20'+'tbn);\x0a}\x0a'),vP='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afloa'+'t\x20calcLigh'+'tSpecular('+'float\x20glos'+'s,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20h)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20nh\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20specPow\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x20//\x20gloss'+'iness\x20is\x20l'+'inear,\x20pow'+'er\x20is\x20not;'+'\x200\x20-\x202048\x0a'+'\x0a\x20\x20\x20\x20//\x20Ha'+'ck:\x20On\x20Mac'+'\x20OS\x20X,\x20cal'+'ling\x20pow\x20w'+'ith\x20zero\x20f'+'or\x20the\x20exp'+'onent\x20gene'+'rates\x20hide'+'ous\x20artifa'+'cts\x20so\x20bia'+'s\x20up\x20a\x20lit'+'tle\x0a\x20\x20\x20\x20sp'+'ecPow\x20=\x20ma'+'x(specPow,'+'\x200.0001);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(nh,\x20'+'specPow)\x20*'+'\x20(specPow\x20'+'+\x202.0)\x20/\x208'+'.0;\x0a}\x0a\x0aflo'+'at\x20getLigh'+'tSpecular('+'vec3\x20h,\x20ve'+'c3\x20reflDir'+',\x20vec3\x20wor'+'ldNormal,\x20'+'vec3\x20viewD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m,\x20float\x20g'+'loss,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',xP='\x0a\x0afloat\x20sh'+'eenD(vec3\x20'+'normal,\x20ve'+'c3\x20h,\x20floa'+'t\x20roughnes'+'s)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20PI\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20f'+'loat\x20invR\x20'+'=\x201.0\x20/\x20(r'+'oughness\x20*'+'\x20roughness'+');\x0a\x20\x20\x20\x20flo'+'at\x20cos2h\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20*=\x20'+'cos2h;\x0a\x20\x20\x20'+'\x20float\x20sin'+'2h\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'float\x20shee'+'nV(vec3\x20no'+'rmal,\x20vec3'+'\x20viewDir,\x20'+'vec3\x20light'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20NoV\x20=\x20'+'max(dot(no'+'rmal,\x20view'+'Dir),\x200.00'+'0001);\x0a\x20\x20\x20'+'\x20float\x20NoL'+'\x20=\x20max(dot'+'(normal,\x20l'+'ight),\x200.0'+'00001);\x0a\x20\x20'+'\x20\x20return\x201'+'.0\x20/\x20(4.0\x20'+'*\x20(NoL\x20+\x20N'+'oV\x20-\x20NoL\x20*'+'\x20NoV));\x0a}\x0a'+'\x0afloat\x20get'+'LightSpecu'+'larSheen(v'+'ec3\x20h,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'irNorm,\x20fl'+'oat\x20sheenG'+'loss)\x20{\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20float\x20V\x20'+'=\x20sheenV(w'+'orldNormal'+',\x20viewDir,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20return\x20D\x20'+'*\x20V;\x0a}\x0a',TP='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afloat\x20lin'+'earizeDept'+'hWithParam'+'s(float\x20z,'+'\x20vec4\x20came'+'raParams)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'cameraPara'+'ms.w\x20==\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20(c'+'ameraParam'+'s.z\x20*\x20came'+'raParams.y'+')\x20/\x20(camer'+'aParams.y\x20'+'+\x20z\x20*\x20(cam'+'eraParams.'+'z\x20-\x20camera'+'Params.y))'+';\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20came'+'raParams.z'+'\x20+\x20z\x20*\x20(ca'+'meraParams'+'.y\x20-\x20camer'+'aParams.z)'+';\x0a}\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec4\x20ca'+'mera_param'+'s;\x20//\x20x:\x201'+'\x20/\x20camera_'+'far,\x20\x20\x20\x20\x20\x20'+'y:\x20camera_'+'far,\x20\x20\x20\x20\x20z'+':\x20camera_n'+'ear,\x20\x20\x20\x20\x20\x20'+'\x20\x20w:\x20is_or'+'tho\x0a#endif'+'\x0a\x0afloat\x20li'+'nearizeDep'+'th(float\x20z'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20linea'+'rizeDepthW'+'ithParams('+'z,\x20camera_'+'params);\x0a}'+'\x0a#endif\x0a',wP='\x0avoid\x20eval'+'uateBacken'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'SSAO\x20durin'+'g\x20lighting'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_SSAO'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ao\x20'+'*=\x20texture'+'2DLod(ssao'+'Texture,\x20g'+'l_FragCoor'+'d.xy\x20*\x20ssa'+'oTextureSi'+'zeInv,\x200.0'+').r;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20transf'+'orm\x20tangen'+'t\x20space\x20no'+'rmals\x20to\x20w'+'orld\x20space'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_NEED'+'S_NORMAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etReflDir('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20litArgs_'+'gloss,\x20dTB'+'N);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W\x20=\x20normal'+'ize(-refle'+'ct(dViewDi'+'rW,\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR_OR'+'_REFLECTIO'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20f'+'0\x20=\x201.0\x20/\x20'+'litArgs_io'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20f0\x20=\x20'+'(f0\x20-\x201.0)'+'\x20/\x20(f0\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20f0\x20'+'*=\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20i'+'ridescence'+'Fresnel\x20=\x20'+'getIridesc'+('ence(satur'+'ate(dot(dV'+'iewDirW,\x20l'+'itArgs_wor'+'ldNormal))'+',\x20litArgs_'+'specularit'+'y,\x20litArgs'+'_iridescen'+'ce_thickne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'mbient\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20addAmbie'+'nt(litArgs'+'_worldNorm'+'al);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20dDiffuse'+'Light\x20*\x20(1'+'.0\x20-\x20litAr'+'gs_specula'+'rity);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20move\x20a'+'mbient\x20col'+'or\x20out\x20of\x20'+'diffuse\x20(u'+'sed\x20by\x20Lig'+'htmapper,\x20'+'to\x20multipl'+'y\x20ambient\x20'+'color\x20by\x20a'+'ccumulated'+'\x20AO)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SEPARA'+'TE_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dA'+'mbientLigh'+'t\x20=\x20dDiffu'+'seLight;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_O'+'LD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20*=\x20mate'+'rial_ambie'+'nt;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OCCLUD'+'E_DIRECT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20occludeDi'+'ffuse(litA'+'rgs_ao);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTMAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'dLightMap('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmap,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_lightmap'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dViewDir'+'W,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dRef'+'lDirW,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('litArgs_gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dTBN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTING\x20'+'||\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tionCC(ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_glo'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_FRESNE'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccFresne'+'l\x20=\x20getFre'+'snelCC(dot'+'(dViewDirW'+',\x20litArgs_'+'clearcoat_'+'worldNorma'+'l));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccRef'+'lection\x20*='+'\x20ccFresnel'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccFres'+'nel\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20*=\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SH'+'EEN\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'addReflect'+'ionSheen(l'+'itArgs_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20litArgs_s'+'heen_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Fr')+('esnel\x20has\x20'+'to\x20be\x20appl'+'ied\x20to\x20ref'+'lections\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tion(dRefl'+'DirW,\x20litA'+'rgs_gloss)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_FRES'+'NEL_MODEL\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dRe'+'flection.r'+'gb\x20*=\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_iri'+'descence_i'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.rgb\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n.rgb\x20*=\x20l'+'itArgs_spe'+'cularityFa'+'ctor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20ARE'+'A_LIGHTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20has\x20to\x20'+'be\x20accumul'+'ated\x20diffe'+'rently\x20if\x20'+'we\x20want\x20ar'+'ea\x20lights\x20'+'to\x20look\x20co'+'rrect\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dS'+'pecularLig'+'ht\x20*=\x20litA'+'rgs_specul'+'arity;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'valuate\x20ma'+'terial\x20bas'+'ed\x20area\x20li'+'ghts\x20data,')+('\x20shared\x20by'+'\x20all\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20calcLTC'+'LightValue'+'s(litArgs_'+'gloss,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_gl'+'oss,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20LOOP\x20-\x20e'+'valuate\x20al'+'l\x20non-clus'+'tered\x20ligh'+'ts\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT_COUNT\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tEvaluatio'+'nPS,\x20LIGHT'+'_COUNT\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clust'+'ered\x20light'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addClust'+'eredLights'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20dReflDi'+'rW,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_CLEA'+'RCOAT)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_gl'+'oss,\x20litAr'+'gs_specula'+'rity,\x20dVer'+'texNormalW'+',\x20dTBN,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_gloss,'+'\x20litArgs_s'+'heen_gloss'+',\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20AR'+'EA_LIGHTS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity\x20=\x20ve'+'c3(1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dViewD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'thickness,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_albe'+'do,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_t'+'ransmissio'+'n,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_disp'+'ersion\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_iridesc'+'ence_inten'+'sity\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20ambient'+'\x20occlusion'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_OC')+('CLUDE_DIRE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20occlu'+'deDiffuse('+'litArgs_ao'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIT_OCCLU'+'DE_SPECULA'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeS'+'pecular(li'+'tArgs_glos'+'s,\x20litArgs'+'_ao,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULARIT'+'Y_FACTOR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20*=\x20litAr'+'gs_specula'+'rityFactor'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIT_OPACI'+'TY_FADES_S'+'PECULAR)\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIT_BLEN'+'D_TYPE\x20==\x20'+'NORMAL\x20||\x20'+'LIT_BLEND_'+'TYPE\x20==\x20PR'+'EMULTIPLIE'+'D\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20specLum\x20='+'\x20dot((dSpe'+'cularLight'+'\x20+\x20dReflec'+'tion.rgb\x20*'+'\x20dReflecti'+'on.a),\x20vec'+'3(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecLum\x20+=\x20'+'dot(ccSpec'+'ularLight\x20'+'*\x20litArgs_'+'clearcoat_'+'specularit'+'y\x20+\x20ccRefl'+'ection\x20*\x20l'+'itArgs_cle'+'arcoat_spe'+'cularity,\x20'+'vec3(\x200.21'+'26,\x200.7152'+',\x200.0722\x20)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_opacity\x20'+'=\x20clamp(li'+'tArgs_opac'+'ity\x20+\x20gamm'+'aCorrectIn'+'put(specLu'+'m),\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_op'+'acity\x20*=\x20m'+'aterial_al'+'phaFade;\x0a\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nd\x20chunks\x20'+'-\x20when\x20bak'+'ing\x20lightm'+'ap\x0a\x20\x20\x20\x20#if'+'def\x20LIT_LI')+('GHTMAP_BAK'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22bak'+'eLmEndPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_LIGHTM'+'AP_BAKING_'+'DIR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22bake'+'DirLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20en'+'d\x20chunks\x20-'+'\x20in\x20all\x20ot'+'her\x20cases\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22en'+'dPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22outputA'+'lphaPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_MSDF\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20applyMs'+'df(gl_Frag'+'Color);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22output'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22de'+'bugOutputP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HADOW_CATC'+'HER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20when\x20the'+'\x20shadow\x20ca'+'tcher\x20is\x20e'+'nabled\x20-\x20a'+'ccumulated'+'\x20shadows\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20=\x20vec3'+'(dShadowCa'+'tcher);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a'),EP='\x0a\x0a//\x20globa'+'ls\x0avec3\x20sR'+'eflection;'+'\x0avec3\x20dVer'+'texNormalW'+';\x0avec3\x20dTa'+'ngentW;\x0ave'+'c3\x20dBinorm'+'alW;\x0avec3\x20'+'dViewDirW;'+'\x0avec3\x20dRef'+'lDirW;\x0avec'+'3\x20ccReflDi'+'rW;\x0a\x0a//\x20Pe'+'r-light\x20te'+'mporaries\x0a'+'vec3\x20dLigh'+'tDirNormW;'+'\x0afloat\x20dAt'+'ten;\x0a\x0a//\x20O'+'utputs\x0amat'+'3\x20dTBN;\x0ave'+'c4\x20dReflec'+'tion;\x0avec3'+'\x20dDiffuseL'+'ight;\x0avec3'+'\x20dSpecular'+'Light;\x0aflo'+'at\x20ccFresn'+'el;\x0avec3\x20c'+'cReflectio'+'n;\x0avec3\x20cc'+'SpecularLi'+'ght;\x0afloat'+'\x20ccSpecula'+'rityNoFres'+';\x0avec3\x20sSp'+'ecularLigh'+'t;\x0a\x0a//\x20FRA'+'GMENT\x20SHAD'+'ER\x20INPUTS:'+'\x20UNIFORMS\x0a'+'\x0a#ifdef\x20LI'+'T_DISPERSI'+'ON\x0a\x20\x20\x20\x20uni'+'form\x20float'+'\x20material_'+'dispersion'+';\x0a#endif\x0a\x0a'+'#ifndef\x20LI'+'T_OPACITY_'+'FADES_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_alphaFad'+'e;\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_SSAO\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20s'+'saoTexture'+';\x0a\x20\x20\x20\x20unif'+'orm\x20vec2\x20s'+'saoTexture'+'SizeInv;\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20a'+'nd\x20shadowi'+'ng\x20declara'+'tions\x0a\x0a#if'+'def\x20LIT_SH'+'ADOW_CATCH'+'ER\x0a\x20\x20\x20\x20//\x20'+'a\x20variable'+'\x20to\x20accumu'+'late\x20shado'+'ws\x20for\x20sha'+'dow\x20catche'+'r\x20material'+'s\x0a\x20\x20\x20\x20floa'+'t\x20dShadowC'+'atcher\x20=\x201'+'.0;\x0a#endif'+'\x0a\x0a//\x20LOOP\x20'+'-\x20uniform\x20'+'declaratio'+'ns\x20for\x20all'+'\x20non-clust'+'ered\x20light'+'s\x0a#if\x20LIGH'+'T_COUNT\x20>\x20'+'0\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDeclarati'+'onPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+('\x20#if\x20LIT_F'+'RESNEL_MOD'+'EL\x20==\x20NONE'+'\x20&&\x20!defin'+'ed(LIT_REF'+'LECTIONS)\x20'+'&&\x20!define'+'d(LIT_DIFF'+'USE_MAP)\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a//\x20lightm'+'ap\x20baking\x0a'+'#ifdef\x20STD'+'_LIGHTMAP_'+'DIR\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20bakeDir;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_L'+'IGHTMAP_BA'+'KING_ADD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20ambie'+'ntBakeOccl'+'usionContr'+'ast;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20ambient'+'BakeOcclus'+'ionBrightn'+'ess;\x0a#endi'+'f\x0a'),bP='\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4(0'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ccS'+'pecularLig'+'ht\x20=\x20vec3('+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'NONE_SLICE'+'_MODE\x20==\x20S'+'LICED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22startN'+'ineSlicedP'+'S\x22\x0a\x20\x20\x20\x20#el'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20TILE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'startNineS'+'licedTiled'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_NEEDS_NOR'+'MAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW\x20=\x20n'+'ormalize(v'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'TANGENTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_HEI'+'GHTS)\x20||\x20d'+'efined(LIT'+'_USE_NORMA'+'LS)\x20||\x20def'+'ined(LIT_U'+'SE_CLEARCO'+'AT_NORMALS'+')\x20||\x20defin'+'ed(LIT_GGX'+'_SPECULAR)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dTa'+'ngentW\x20=\x20v'+'TangentW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dBin'+'ormalW\x20=\x20v'+'BinormalW;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20getVie'+'wDir();\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_TB'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getTBN'+'(dTangentW'+',\x20dBinorma'+'lW,\x20dVerte'+'xNormalW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_TWO_S'+'IDED_LIGHT'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'handleTwoS'+'idedLighti'+'ng();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20i'+'nvoke\x20fron'+'tend\x20funct'+'ions\x0a\x20\x20\x20\x20e'+'valuateFro'+'ntend();\x0a\x0a'+('\x20\x20\x20\x20#inclu'+'de\x20\x22debugP'+'rocessFron'+'tendPS\x22\x0a\x0a\x20'+'\x20\x20\x20evaluat'+'eBackend()'+';\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a'),AP='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20vec3\x20mate'+'rial_ambie'+'nt;\x0a\x0a#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTING\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightSp'+'ecularAnis'+'oGGXPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightS'+'pecularBli'+'nnPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'combinePS\x22'+'\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tmapAddPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'ADD_AMBIEN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ambi'+'entPS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIT_MSDF'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22msdfP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'include\x20\x22v'+'iewDirPS\x22\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flDirAniso'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a//\x20li'+'ghting\x20fun'+'ctionality')+('\x0a#include\x20'+'\x22lightingP'+'S\x22\x0a\x0a'),CP='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',PP='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',MP='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec4\x20ve'+'rtex_color'+';\x0a#endif\x0a\x0a'+'#ifdef\x20NIN'+'ESLICED\x0a\x0a\x20'+'\x20\x20\x20varying'+'\x20vec2\x20vMas'+'k;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'vTiledUv;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20v'+'ec2\x20outerS'+'cale;\x0a\x20\x20\x20\x20'+'uniform\x20me'+'diump\x20vec4'+'\x20atlasRect'+';\x0a\x0a#endif\x0a'+'\x0avec3\x20dPos'+'itionW;\x0ama'+'t4\x20dModelM'+'atrix;\x0a\x0a#i'+'nclude\x20\x22tr'+'ansformCor'+'eVS\x22\x0a\x0a#ifd'+'ef\x20UV0\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'c2\x20vertex_'+'texCoord1;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22uv1VS'+'\x22\x0a#endif\x0a\x0a'+'\x0a#ifdef\x20LI'+'NEAR_DEPTH'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20#d'+'efine\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'transformV'+'S\x22\x0a\x0a#ifdef'+'\x20NORMALS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22normalC'+'oreVS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22normalVS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20TANG'+'ENTS\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_tangent;\x0a'+'#endif\x0a\x0a//'+'\x20expand\x20un'+'iforms\x20for'+'\x20uv\x20transf'+'orms\x0a#incl'+'ude\x20\x22uvTra'+'nsformUnif'+'ormsPS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'#ifdef\x20MSD'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22msdf'+'VS\x22\x0a#endif'+'\x0a\x0a#include'+'\x20\x20\x22litUser'+'CodeVS\x22\x0a\x0av'+'oid\x20main(v'+'oid)\x20{\x0a\x0a\x20\x20'+'\x20\x20#include'+('\x20\x22litUserM'+'ainStartVS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'default\x20po'+'int\x20size\x20t'+'o\x201\x20in\x20cas'+'e\x20the\x20shad'+'er\x20is\x20used'+'\x20with\x20poin'+'ts\x0a\x20\x20\x20\x20gl_'+'PointSize\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20getP'+'osition();'+'\x0a\x20\x20\x20\x20vPosi'+'tionW\x20=\x20ge'+'tWorldPosi'+'tion();\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'NORMALS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vNor'+'malW\x20=\x20get'+'Normal();\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20TANGENT'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vTangentW\x20'+'=\x20normaliz'+'e(dNormalM'+'atrix\x20*\x20ve'+'rtex_tange'+'nt.xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vBi'+'normalW\x20=\x20'+'cross(vNor'+'malW,\x20vTan'+'gentW)\x20*\x20v'+'ertex_tang'+'ent.w;\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(GGX_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3(0,\x201'+',\x200));\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV0\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv0'+'\x20=\x20getUv0('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20UV'+'0_UNMODIFI'+'ED\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv1\x20=\x20ge'+'tUv1();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20UV1_UNM'+'ODIFIED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vUv1\x20=\x20uv1'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20expa'+'nd\x20code\x20fo'+'r\x20uv\x20trans'+'forms\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'uvTransfor'+'mVS,\x20UV_TR'+'ANSFORMS_C'+'OUNT\x22\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20VE'+'RTEX_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition')+(',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vPosi'+'tionW,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20M'+'SDF\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20unpackMs'+'dfParams()'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tUserMainE'+'ndVS\x22\x0a}\x0a'),DP='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20g'+'etPickOutp'+'ut();\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20P'+'REPASS_PAS'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20float'+'2vec4(vLin'+'earDepth);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a',IP='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avec3\x20litA'+'rgs_albedo'+';\x0a\x0a//\x20Tran'+'sparency\x0af'+'loat\x20litAr'+'gs_opacity'+';\x0a\x0a//\x20Emis'+'sion\x20color'+'\x0avec3\x20litA'+'rgs_emissi'+'on;\x0a\x0a//\x20No'+'rmal\x20direc'+'tion\x20in\x20wo'+'rld\x20space\x0a'+'vec3\x20litAr'+'gs_worldNo'+'rmal;\x0a\x0a//\x20'+'Ambient\x20oc'+'clusion\x20am'+'ount,\x20rang'+'e\x20[0..1]\x0af'+'loat\x20litAr'+'gs_ao;\x0a\x0a//'+'\x20Light\x20map'+'\x20color\x0avec'+'3\x20litArgs_'+'lightmap;\x0a'+'\x0a//\x20Light\x20'+'map\x20direct'+'ion\x0avec3\x20l'+'itArgs_lig'+'htmapDir;\x0a'+'\x0a//\x20Surfac'+'e\x20metalnes'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_met'+'alness;\x0a\x0a/'+'/\x20The\x20f0\x20s'+'pecularity'+'\x20factor\x0ave'+'c3\x20litArgs'+'_speculari'+'ty;\x0a\x0a//\x20Sp'+'ecularity\x20'+'intensity\x20'+'factor,\x20ra'+'nge\x20[0..1]'+'\x0afloat\x20lit'+'Args_specu'+'larityFact'+'or;\x0a\x0a//\x20Th'+'e\x20microfac'+'et\x20glossin'+'ess\x20factor'+',\x20range\x20[0'+'..1]\x0afloat'+'\x20litArgs_g'+'loss;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_sh'+'een_gloss;'+'\x0a\x0a//\x20The\x20c'+'olor\x20of\x20th'+'e\x20f0\x20specu'+'larity\x20fac'+'tor\x20for\x20th'+'e\x20sheen\x20la'+'yer\x0avec3\x20l'+'itArgs_she'+'en_specula'+'rity;\x0a\x0a//\x20'+'Transmissi'+'on\x20factor\x20'+'(refractio'+'n),\x20range\x20'+'[0..1]\x0aflo'+'at\x20litArgs'+'_transmiss'+'ion;\x0a\x0a//\x20U'+'niform\x20thi'+'ckness\x20of\x20'+'medium,\x20us'+'ed\x20by\x20tran'+'smission,\x20'+'range\x20[0..'+'inf]\x0afloat'+'\x20litArgs_t'+'hickness;\x0a'+'\x0a//\x20Index\x20'+'of\x20refract'+'ion\x0afloat\x20'+('litArgs_io'+'r;\x0a\x0a//\x20Dis'+'persion,\x20r'+'ange\x20[0..1'+']\x20typicall'+'y,\x20but\x20can'+'\x20be\x20higher'+'\x0afloat\x20lit'+'Args_dispe'+'rsion;\x0a\x0a//'+'\x20Iridescen'+'ce\x20effect\x20'+'intensity,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_ir'+'idescence_'+'intensity;'+'\x0a\x0a//\x20Thick'+'ness\x20of\x20th'+'e\x20iridesce'+'nt\x20microfi'+'lm\x20layer,\x20'+'value\x20is\x20i'+'n\x20nanomete'+'rs,\x20range\x20'+'[0..1000]\x0a'+'float\x20litA'+'rgs_irides'+'cence_thic'+'kness;\x0a\x0a//'+'\x20The\x20norma'+'l\x20used\x20for'+'\x20the\x20clear'+'coat\x20layer'+'\x0avec3\x20litA'+'rgs_clearc'+'oat_worldN'+'ormal;\x0a\x0a//'+'\x20Intensity'+'\x20of\x20the\x20cl'+'earcoat\x20la'+'yer,\x20range'+'\x20[0..1]\x0afl'+'oat\x20litArg'+'s_clearcoa'+'t_specular'+'ity;\x0a\x0a//\x20G'+'lossiness\x20'+'of\x20clearco'+'at\x20layer,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_cle'+'arcoat_glo'+'ss;\x0a\x0a'),LP='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20te'+'xtureBias\x20'+'=\x20-1000.0;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20texture'+'Bias;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litShade'+'rArgsPS\x22\x0a',RP='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20vec3\x20v'+'iew_positi'+'on;\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20light_ra'+'dius;\x0a#end'+'if\x0a\x0a#if\x20SH'+'ADOW_TYPE\x20'+'==\x20PCSS_32'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22line'+'arizeDepth'+'PS\x22\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'evaluateFr'+'ontend();\x0a'+'\x0a\x20\x20\x20\x20//\x20us'+'ing\x20non-st'+'andard\x20dep'+'th,\x20i.e\x20gl'+'_FragCoord'+'.z\x0a\x20\x20\x20\x20#if'+'def\x20PERSPE'+'CTIVE_DEPT'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20gl_Fra'+'gCoord.z;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SHADOW_'+'TYPE\x20==\x20PC'+'SS_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot/omn'+'i\x20shadows\x20'+'currently\x20'+'use\x20linear'+'\x20depth.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20TODO:\x20u'+'se\x20perspec'+'tive\x20depth'+'\x20for\x20spot/'+'omni\x20the\x20s'+'ame\x20way\x20as'+'\x20direction'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT_TYPE\x20'+'!=\x20DIRECTI'+'ONAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20depth\x20=\x20l'+'inearizeDe'+'pthWithPar'+'ams(depth,'+'\x20camera_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20min(di'+'stance(vie'+'w_position'+',\x20vPositio'+'nW)\x20/\x20ligh'+'t_radius,\x20'+'0.99999);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20MODI'+'FIED_DEPTH'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20VSM_'+'16F\x20||\x20SHA'+'DOW_TYPE\x20='+'=\x20VSM_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20exponen'+'t\x20=\x2015.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+('t\x20exponent'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20depth\x20=\x20'+'2.0\x20*\x20dept'+'h\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dep'+'th\x20=\x20\x20exp('+'exponent\x20*'+'\x20depth);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(dep'+'th,\x20depth*'+'depth,\x201.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'SHADOW_TYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'tore\x20depth'+'\x20into\x20R32\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.r\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ODIFIED_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20If\x20we\x20e'+'nd\x20up\x20usin'+'g\x20modified'+'\x20depth,\x20it'+'\x20needs\x20to\x20'+'be\x20explici'+'tly\x20writte'+'n\x20to\x20gl_Fr'+'agDepth\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gDepth\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20just\x20the\x20'+'simplest\x20c'+'ode,\x20color'+'\x20is\x20not\x20wr'+'itten\x20anyw'+'ay\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'}\x0a'),OP='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0amat'+'3\x20transpos'+'eMat3(\x20con'+'st\x20in\x20mat3'+'\x20m\x20)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20tmp;'+'\x0a\x20\x20\x20\x20tmp[\x20'+'0\x20]\x20=\x20vec3'+'(\x20m[\x200\x20].x'+',\x20m[\x201\x20].x'+',\x20m[\x202\x20].x'+'\x20);\x0a\x20\x20\x20\x20tm'+'p[\x201\x20]\x20=\x20v'+'ec3(\x20m[\x200\x20'+'].y,\x20m[\x201\x20'+'].y,\x20m[\x202\x20'+'].y\x20);\x0a\x20\x20\x20'+'\x20tmp[\x202\x20]\x20'+'=\x20vec3(\x20m['+'\x200\x20].z,\x20m['+'\x201\x20].z,\x20m['+'\x202\x20].z\x20);\x0a'+'\x20\x20\x20\x20return'+'\x20tmp;\x0a}\x0a\x0av'+'ec2\x20LTC_Uv'+'(\x20const\x20in'+'\x20vec3\x20N,\x20c'+'onst\x20in\x20ve'+'c3\x20V,\x20cons'+'t\x20in\x20float'+'\x20roughness'+'\x20)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20LUT_SIZE\x20'+'=\x2064.0;\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20LUT_SC'+'ALE\x20=\x20(\x20LU'+'T_SIZE\x20-\x201'+'.0\x20)\x20/\x20LUT'+'_SIZE;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20LUT_BIA'+'S\x20=\x200.5\x20/\x20'+'LUT_SIZE;\x0a'+'\x20\x20\x20\x20float\x20'+'dotNV\x20=\x20sa'+'turate(\x20do'+'t(\x20N,\x20V\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'texture\x20pa'+'rameterize'+'d\x20by\x20sqrt('+'\x20GGX\x20alpha'+'\x20)\x20and\x20sqr'+'t(\x201\x20-\x20cos'+'(\x20theta\x20)\x20'+')\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20vec2'+'(\x20roughnes'+'s,\x20sqrt(\x201'+'.0\x20-\x20dotNV'+'\x20)\x20);\x0a\x20\x20\x20\x20'+'uv\x20=\x20uv\x20*\x20'+'LUT_SCALE\x20'+'+\x20LUT_BIAS'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'float\x20LTC_'+'ClippedSph'+'ereFormFac'+'tor(\x20const'+'\x20in\x20vec3\x20f'+'\x20)\x20{\x0a\x20\x20\x20\x20/'+'/\x20Real-Tim'+'e\x20Area\x20Lig'+'hting:\x20a\x20J'+'ourney\x20fro'+'m\x20Research'+'\x20to\x20Produc'+'tion\x20(p.10'+'2)\x0a\x20\x20\x20\x20//\x20'+('An\x20approxi'+'mation\x20of\x20'+'the\x20form\x20f'+'actor\x20of\x20a'+'\x20horizon-c'+'lipped\x20rec'+'tangle.\x0a\x20\x20'+'\x20\x20float\x20l\x20'+'=\x20length(\x20'+'f\x20);\x0a\x20\x20\x20\x20r'+'eturn\x20max('+'\x20(\x20l\x20*\x20l\x20+'+'\x20f.z\x20)\x20/\x20('+'\x20l\x20+\x201.0\x20)'+',\x200.0\x20);\x0a}'+'\x0a\x0avec3\x20LTC'+'_EdgeVecto'+'rFormFacto'+'r(\x20const\x20i'+'n\x20vec3\x20v1,'+'\x20const\x20in\x20'+'vec3\x20v2\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20x\x20=\x20dot('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20float'+'\x20y\x20=\x20abs(\x20'+'x\x20);\x0a\x20\x20\x20\x20/'+'/\x20rational'+'\x20polynomia'+'l\x20approxim'+'ation\x20to\x20t'+'heta\x20/\x20sin'+'(\x20theta\x20)\x20'+'/\x202PI\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'0.8543985\x20'+'+\x20(\x200.4965'+'155\x20+\x200.01'+'45206\x20*\x20y\x20'+')\x20*\x20y;\x0a\x20\x20\x20'+'\x20float\x20b\x20='+'\x203.4175940'+'\x20+\x20(\x204.161'+'6724\x20+\x20y\x20)'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'float\x20v\x20=\x20'+'a\x20/\x20b;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta_sinthet'+'a\x20=\x20(\x20x\x20>\x20'+'0.0\x20)\x20?\x20v\x20'+':\x200.5\x20*\x20in'+'versesqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7\x20)\x20)\x20-\x20'+'v;\x0a\x20\x20\x20\x20ret'+'urn\x20cross('+'\x20v1,\x20v2\x20)\x20'+'*\x20theta_si'+'ntheta;\x0a}\x0a'+'\x0astruct\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'d0;\x0a\x20\x20\x20\x20ve'+'c3\x20coord1;'+'\x0a\x20\x20\x20\x20vec3\x20'+'coord2;\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'rd3;\x0a};\x0a\x0af'+'loat\x20LTC_E'+'valuateRec'+'t(\x20const\x20i'+'n\x20vec3\x20N,\x20'+'const\x20in\x20v'+'ec3\x20V,\x20con'+'st\x20in\x20vec3'+'\x20P,\x20const\x20'+'in\x20mat3\x20mI'+'nv,\x20const\x20'+'in\x20Coords\x20'+'rectCoords'+')\x20{\x0a\x20\x20\x20\x20//'+'\x20bail\x20if\x20p'+'oint\x20is\x20on'+'\x20back\x20side'+'\x20of\x20plane\x20'+'of\x20light\x0a\x20'+'\x20\x20\x20//\x20assu'+'mes\x20ccw\x20wi'+'nding\x20orde'+'r\x20of\x20light'+'\x20vertices\x0a'+'\x20\x20\x20\x20vec3\x20v'+'1\x20=\x20rectCo'+'ords.coord'+'1\x20-\x20rectCo'+'ords.coord'+'0;\x0a\x20\x20\x20\x20vec')+('3\x20v2\x20=\x20rec'+'tCoords.co'+'ord3\x20-\x20rec'+'tCoords.co'+'ord0;\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'lightNorma'+'l\x20=\x20cross('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20//\x20if'+'(\x20dot(\x20lig'+'htNormal,\x20'+'P\x20-\x20rectCo'+'ords.coord'+'0\x20)\x20<\x200.0\x20'+')\x20return\x200'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20factor'+'\x20=\x20sign(-d'+'ot(\x20lightN'+'ormal,\x20P\x20-'+'\x20rectCoord'+'s.coord0\x20)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20vec3\x20T1,'+'\x20T2;\x0a\x20\x20\x20\x20T'+'1\x20=\x20normal'+'ize(\x20V\x20-\x20N'+'\x20*\x20dot(\x20V,'+'\x20N\x20)\x20);\x0a\x20\x20'+'\x20\x20T2\x20=\x20\x20fa'+'ctor\x20*\x20cro'+'ss(\x20N,\x20T1\x20'+');\x20//\x20nega'+'ted\x20from\x20p'+'aper;\x20poss'+'ibly\x20due\x20t'+'o\x20a\x20differ'+'ent\x20handed'+'ness\x20of\x20wo'+'rld\x20coordi'+'nate\x20syste'+'m\x0a\x20\x20\x20\x20//\x20c'+'ompute\x20tra'+'nsform\x0a\x20\x20\x20'+'\x20mat3\x20mat\x20'+'=\x20mInv\x20*\x20t'+'ransposeMa'+'t3(\x20mat3(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20transfor'+'m\x20rect\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'ds[\x204\x20];\x0a\x20'+'\x20\x20\x20coords['+'\x200\x20]\x20=\x20mat'+'\x20*\x20(\x20rectC'+'oords.coor'+'d0\x20-\x20P\x20);\x0a'+'\x20\x20\x20\x20coords'+'[\x201\x20]\x20=\x20ma'+'t\x20*\x20(\x20rect'+'Coords.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20coord'+'s[\x202\x20]\x20=\x20m'+'at\x20*\x20(\x20rec'+'tCoords.co'+'ord2\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20coor'+'ds[\x203\x20]\x20=\x20'+'mat\x20*\x20(\x20re'+'ctCoords.c'+'oord3\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20//\x20'+'project\x20re'+'ct\x20onto\x20sp'+'here\x0a\x20\x20\x20\x20c'+'oords[\x200\x20]'+'\x20=\x20normali'+'ze(\x20coords'+'[\x200\x20]\x20);\x0a\x20'+'\x20\x20\x20coords['+'\x201\x20]\x20=\x20nor'+'malize(\x20co'+'ords[\x201\x20]\x20'+');\x0a\x20\x20\x20\x20coo'+'rds[\x202\x20]\x20='+'\x20normalize'+'(\x20coords[\x20'+'2\x20]\x20);\x0a\x20\x20\x20'+'\x20coords[\x203'+'\x20]\x20=\x20norma'+'lize(\x20coor'+'ds[\x203\x20]\x20);')+('\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20ve'+'ctor\x20form\x20'+'factor\x0a\x20\x20\x20'+'\x20vec3\x20vect'+'orFormFact'+'or\x20=\x20vec3('+'\x200.0\x20);\x0a\x20\x20'+'\x20\x20vectorFo'+'rmFactor\x20+'+'=\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[\x200\x20],'+'\x20coords[\x201'+'\x20]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20+=\x20'+'LTC_EdgeVe'+'ctorFormFa'+'ctor(\x20coor'+'ds[\x201\x20],\x20c'+'oords[\x202\x20]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa'+'ctor\x20+=\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[\x202\x20],\x20coo'+'rds[\x203\x20]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20+=\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[\x20'+'3\x20],\x20coord'+'s[\x200\x20]\x20);\x0a'+'\x20\x20\x20\x20//\x20adj'+'ust\x20for\x20ho'+'rizon\x20clip'+'ping\x0a\x20\x20\x20\x20f'+'loat\x20resul'+'t\x20=\x20LTC_Cl'+'ippedSpher'+'eFormFacto'+'r(\x20vectorF'+'ormFactor\x20'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0aCoor'+'ds\x20dLTCCoo'+'rds;\x0aCoord'+'s\x20getLTCLi'+'ghtCoords('+'vec3\x20light'+'Pos,\x20vec3\x20'+'halfWidth,'+'\x20vec3\x20half'+'Height){\x0a\x20'+'\x20\x20\x20Coords\x20'+'coords;\x0a\x20\x20'+'\x20\x20coords.c'+'oord0\x20=\x20li'+'ghtPos\x20+\x20h'+'alfWidth\x20-'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord1'+'\x20=\x20lightPo'+'s\x20-\x20halfWi'+'dth\x20-\x20half'+'Height;\x0a\x20\x20'+'\x20\x20coords.c'+'oord2\x20=\x20li'+'ghtPos\x20-\x20h'+'alfWidth\x20+'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord3'+'\x20=\x20lightPo'+'s\x20+\x20halfWi'+'dth\x20+\x20half'+'Height;\x0a\x20\x20'+'\x20\x20return\x20c'+'oords;\x0a}\x0a\x0a'+'float\x20dSph'+'ereRadius;'+'\x0aCoords\x20ge'+'tSphereLig'+'htCoords(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight){\x0a\x20\x20'+'\x20\x20//\x20used\x20'+'for\x20simple'+'\x20sphere\x20li')+('ght\x20fallof'+'f\x0a\x20\x20\x20\x20//\x20a'+'lso,\x20the\x20c'+'ode\x20only\x20h'+'andles\x20a\x20s'+'pherical\x20l'+'ight,\x20it\x20c'+'annot\x20be\x20n'+'on-uniform'+'ly\x20scaled\x20'+'in\x20world\x20s'+'pace,\x20and\x20'+'so\x20we\x20enfo'+'rce\x20it\x20her'+'e\x0a\x20\x20\x20\x20dSph'+'ereRadius\x20'+'=\x20max(leng'+'th(halfWid'+'th),\x20lengt'+'h(halfHeig'+'ht));\x0a\x0a\x20\x20\x20'+'\x20//\x20Billbo'+'ard\x20the\x202d'+'\x20light\x20qua'+'d\x20to\x20refle'+'ction\x20vect'+'or,\x20as\x20it\x27'+'s\x20used\x20for'+'\x20specular.'+'\x20This\x20allo'+'ws\x20us\x20to\x20u'+'se\x20disk\x20ma'+'th\x20for\x20the'+'\x20sphere.\x0a\x20'+'\x20\x20\x20vec3\x20f\x20'+'=\x20reflect('+'normalize('+'lightPos\x20-'+'\x20view_posi'+'tion),\x20vNo'+'rmalW);\x0a\x20\x20'+'\x20\x20vec3\x20w\x20='+'\x20normalize'+'(cross(f,\x20'+'halfHeight'+'));\x0a\x20\x20\x20\x20ve'+'c3\x20h\x20=\x20nor'+'malize(cro'+'ss(f,\x20w));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20getLTCL'+'ightCoords'+'(lightPos,'+'\x20w\x20*\x20dSphe'+'reRadius,\x20'+'h\x20*\x20dSpher'+'eRadius);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20LTC\x20L'+'UT\x20texture'+'\x20lookup\x0ave'+'c2\x20dLTCUV;'+'\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20vec2'+'\x20ccLTCUV;\x0a'+'#endif\x0a\x0ave'+'c2\x20getLTCL'+'ightUV(flo'+'at\x20gloss,\x20'+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+')\x0a{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20max('+'(1.0\x20-\x20glo'+'ss)\x20*\x20(1.0'+'\x20-\x20gloss),'+'\x200.001);\x0a\x20'+'\x20\x20\x20return\x20'+'LTC_Uv(\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'roughness\x20'+');\x0a}\x0a\x0a//\x20u'+'sed\x20for\x20en'+'ergy\x20conse'+'rvation\x20an'+'d\x20to\x20modul'+'ate\x20specul'+'ar\x0avec3\x20dL'+'TCSpecFres'+';\x0a#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20vec'+'3\x20ccLTCSpe'+'cFres;\x0a#en'+'dif\x0a\x0avec3\x20'+'getLTCLigh')+('tSpecFres('+'vec2\x20uv,\x20v'+'ec3\x20specul'+'arity)\x0a{\x0a\x20'+'\x20\x20\x20vec4\x20t2'+'\x20=\x20texture'+'2DLod(area'+'LightsLutT'+'ex2,\x20uv,\x200'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20spec'+'ularity\x20*\x20'+'t2.x\x20+\x20(\x20v'+'ec3(\x201.0\x20)'+'\x20-\x20specula'+'rity)\x20*\x20t2'+'.y;\x0a}\x0a\x0avoi'+'d\x20calcLTCL'+'ightValues'+'(float\x20glo'+'ss,\x20vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20speculari'+'ty,\x20float\x20'+'clearcoatG'+'loss,\x20vec3'+'\x20clearcoat'+'WorldNorma'+'l,\x20float\x20c'+'learcoatSp'+'ecularity)'+'\x0a{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x20\x0a\x0a#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20cc'+'LTCUV\x20=\x20ge'+'tLTCLightU'+'V(clearcoa'+'tGloss,\x20cl'+'earcoatWor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20ccLTCS'+'pecFres\x20=\x20'+'getLTCLigh'+'tSpecFres('+'ccLTCUV,\x20v'+'ec3(clearc'+'oatSpecula'+'rity));\x0a#e'+'ndif\x0a}\x0a\x0avo'+'id\x20calcRec'+'tLightValu'+'es(vec3\x20li'+'ghtPos,\x20ve'+'c3\x20halfWid'+'th,\x20vec3\x20h'+'alfHeight)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0avoid\x20c'+'alcDiskLig'+'htValues(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight)\x20{\x0a\x20'+'\x20\x20\x20calcRec'+'tLightValu'+'es(lightPo'+'s,\x20halfWid'+'th,\x20halfHe'+'ight);\x0a}\x0av'+'oid\x20calcSp'+'hereLightV'+'alues(vec3'+'\x20lightPos,'+'\x20vec3\x20half'+'Width,\x20vec'+'3\x20halfHeig'+'ht)\x20{\x0a\x20\x20\x20\x20')+('dLTCCoords'+'\x20=\x20getSphe'+'reLightCoo'+'rds(lightP'+'os,\x20halfWi'+'dth,\x20halfH'+'eight);\x0a}\x0a'+'\x0a//\x20An\x20ext'+'ended\x20vers'+'ion\x20of\x20the'+'\x20implement'+'ation\x20from'+'\x20\x22How\x20to\x20s'+'olve\x20a\x20cub'+'ic\x20equatio'+'n,\x20revisit'+'ed\x22\x0a//\x20htt'+'p://moment'+'singraphic'+'s.de/?p=10'+'5\x0avec3\x20Sol'+'veCubic(ve'+'c4\x20Coeffic'+'ient)\x0a{\x0a\x20\x20'+'\x20\x20float\x20pi'+'\x20=\x203.14159'+';\x0a\x20\x20\x20\x20//\x20N'+'ormalize\x20t'+'he\x20polynom'+'ial\x0a\x20\x20\x20\x20Co'+'efficient.'+'xyz\x20/=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20//\x20D'+'ivide\x20midd'+'le\x20coeffic'+'ients\x20by\x20t'+'hree\x0a\x20\x20\x20\x20C'+'oefficient'+'.yz\x20/=\x203.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20A\x20=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20floa'+'t\x20B\x20=\x20Coef'+'ficient.z;'+'\x0a\x20\x20\x20\x20float'+'\x20C\x20=\x20Coeff'+'icient.y;\x0a'+'\x20\x20\x20\x20float\x20'+'D\x20=\x20Coeffi'+'cient.x;\x0a\x0a'+'\x20\x20\x20\x20//\x20Com'+'pute\x20the\x20H'+'essian\x20and'+'\x20the\x20discr'+'iminant\x0a\x20\x20'+'\x20\x20vec3\x20Del'+'ta\x20=\x20vec3('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-'+'Coefficien'+'t.z\x20*\x20Coef'+'ficient.z\x20'+'+\x20Coeffici'+'ent.y,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20-Coef'+'ficient.y\x20'+'*\x20Coeffici'+'ent.z\x20+\x20Co'+'efficient.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dot(vec2('+'Coefficien'+'t.z,\x20-Coef'+'ficient.y)'+',\x20Coeffici'+'ent.xy)\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'float\x20Disc'+'riminant\x20='+'\x20dot(vec2('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20vec2\x20xlc'+',\x20xsc;\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20A\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_a'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20C_a\x20=\x20De'+'lta.x;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20D_a\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20')+('\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20Theta\x20'+'=\x20atan(sqr'+'t(Discrimi'+'nant),\x20-D_'+'a)\x20/\x203.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20x_1a\x20'+'=\x202.0\x20*\x20sq'+'rt(-C_a)\x20*'+'\x20cos(Theta'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20x_3'+'a\x20=\x202.0\x20*\x20'+'sqrt(-C_a)'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20x'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20((x_1a'+'\x20+\x20x_3a)\x20>'+'\x202.0\x20*\x20B)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xl\x20=\x20x_1'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'\x20=\x20x_3a;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'c\x20=\x20vec2(x'+'l\x20-\x20B,\x20A);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20D\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_d'+'\x20=\x20D;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'C_d\x20=\x20Delt'+'a.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20D'+'_d\x20=\x20-D\x20*\x20'+'Delta.y\x20+\x20'+'2.0\x20*\x20C\x20*\x20'+'Delta.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20Take\x20the\x20'+'cubic\x20root'+'\x20of\x20a\x20norm'+'alized\x20com'+'plex\x20numbe'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20Thet'+'a\x20=\x20atan(D'+'\x20*\x20sqrt(Di'+'scriminant'+'),\x20-D_d)\x20/'+'\x203.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20x_1d\x20=\x202.'+'0\x20*\x20sqrt(-'+'C_d)\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20x_3d\x20=\x20'+'2.0\x20*\x20sqrt'+'(-C_d)\x20*\x20c'+'os(Theta\x20+'+'\x20(2.0\x20/\x203.'+'0)\x20*\x20pi);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20xs;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(x_1d\x20+\x20x_'+'3d\x20<\x202.0\x20*'+'\x20C)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20xs\x20='+'\x20x_1d;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xs\x20=\x20x_3'+'d;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20xsc\x20=\x20ve'+'c2(-D,\x20xs\x20'+'+\x20C);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20flo'+'at\x20E\x20=\x20\x20xl'+'c.y\x20*\x20xsc.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20F\x20=\x20-xl'+'c.x\x20*\x20xsc.'+'y\x20-\x20xlc.y\x20')+('*\x20xsc.x;\x0a\x20'+'\x20\x20\x20float\x20G'+'\x20=\x20\x20xlc.x\x20'+'*\x20xsc.x;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20x'+'mc\x20=\x20vec2('+'C\x20*\x20F\x20-\x20B\x20'+'*\x20G,\x20-B\x20*\x20'+'F\x20+\x20C\x20*\x20E)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20Root\x20=\x20v'+'ec3(xsc.x\x20'+'/\x20xsc.y,\x20x'+'mc.x\x20/\x20xmc'+'.y,\x20xlc.x\x20'+'/\x20xlc.y);\x0a'+'\x0a\x20\x20\x20\x20if\x20(R'+'oot.x\x20<\x20Ro'+'ot.y\x20&&\x20Ro'+'ot.x\x20<\x20Roo'+'t.z)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root.xy'+'z\x20=\x20Root.y'+'xz;\x0a\x20\x20\x20\x20el'+'se\x20if\x20(Roo'+'t.z\x20<\x20Root'+'.x\x20&&\x20Root'+'.z\x20<\x20Root.'+'y)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root.xyz\x20'+'=\x20Root.xzy'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20Root;\x0a'+'}\x0a\x0afloat\x20L'+'TC_Evaluat'+'eDisk(vec3'+'\x20N,\x20vec3\x20V'+',\x20vec3\x20P,\x20'+'mat3\x20Minv,'+'\x20Coords\x20po'+'ints)\x0a{\x0a\x20\x20'+'\x20\x20//\x20const'+'ruct\x20ortho'+'normal\x20bas'+'is\x20around\x20'+'N\x0a\x20\x20\x20\x20vec3'+'\x20T1\x20=\x20norm'+'alize(V\x20-\x20'+'N\x20*\x20dot(V,'+'\x20N));\x0a\x20\x20\x20\x20'+'vec3\x20T2\x20=\x20'+'cross(N,\x20T'+'1);\x0a\x0a\x20\x20\x20\x20/'+'/\x20rotate\x20a'+'rea\x20light\x20'+'in\x20(T1,\x20T2'+',\x20N)\x20basis'+'\x0a\x20\x20\x20\x20//mat'+'3\x20R\x20=\x20tran'+'spose(mat3'+'(T1,\x20T2,\x20N'+'));\x0a\x20\x20\x20\x20ma'+'t3\x20R\x20=\x20tra'+'nsposeMat3'+'(\x20mat3(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'polygon\x20(a'+'llocate\x205\x20'+'vertices\x20f'+'or\x20clippin'+'g)\x0a\x20\x20\x20\x20vec'+'3\x20L_[\x203\x20];'+'\x0a\x20\x20\x20\x20L_[\x200'+'\x20]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[\x20'+'1\x20]\x20=\x20R\x20*\x20'+'(\x20points.c'+'oord1\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20L_['+'\x202\x20]\x20=\x20R\x20*'+'\x20(\x20points.'+'coord2\x20-\x20P'+'\x20);\x0a\x0a\x20\x20\x20\x20/'+'/\x20init\x20ell'+'ipse\x0a\x20\x20\x20\x20v'+'ec3\x20C\x20\x20=\x200'+'.5\x20*\x20(L_[0'+']\x20+\x20L_[2])'+';\x0a\x20\x20\x20\x20vec3'+'\x20V1\x20=\x200.5\x20'+'*\x20(L_[1]\x20-'+'\x20L_[2]);\x0a\x20'+'\x20\x20\x20vec3\x20V2'+'\x20=\x200.5\x20*\x20('+'L_[1]\x20-\x20L_'+'[0]);\x0a\x0a\x20\x20\x20'+'\x20C\x20\x20=\x20Minv')+('\x20*\x20C;\x0a\x20\x20\x20\x20'+'V1\x20=\x20Minv\x20'+'*\x20V1;\x0a\x20\x20\x20\x20'+'V2\x20=\x20Minv\x20'+'*\x20V2;\x0a\x0a\x20\x20\x20'+'\x20//if(dot('+'cross(V1,\x20'+'V2),\x20C)\x20>\x20'+'0.0)\x0a\x20\x20\x20\x20/'+'/\x20\x20\x20\x20retur'+'n\x200.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20compu'+'te\x20eigenve'+'ctors\x20of\x20e'+'llipse\x0a\x20\x20\x20'+'\x20float\x20a,\x20'+'b;\x0a\x20\x20\x20\x20flo'+'at\x20d11\x20=\x20d'+'ot(V1,\x20V1)'+';\x0a\x20\x20\x20\x20floa'+'t\x20d22\x20=\x20do'+'t(V2,\x20V2);'+'\x0a\x20\x20\x20\x20float'+'\x20d12\x20=\x20dot'+'(V1,\x20V2);\x0a'+'\x20\x20\x20\x20if\x20(ab'+'s(d12)\x20/\x20s'+'qrt(d11\x20*\x20'+'d22)\x20>\x200.0'+'001)\x0a\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20tr\x20=\x20'+'d11\x20+\x20d22;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20det\x20='+'\x20-d12\x20*\x20d1'+'2\x20+\x20d11\x20*\x20'+'d22;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20use'+'\x20sqrt\x20matr'+'ix\x20to\x20solv'+'e\x20for\x20eige'+'nvalues\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20det\x20'+'=\x20sqrt(det'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20u\x20='+'\x200.5\x20*\x20sqr'+'t(tr\x20-\x202.0'+'\x20*\x20det);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20v\x20=\x200.5'+'\x20*\x20sqrt(tr'+'\x20+\x202.0\x20*\x20d'+'et);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20e'+'_max\x20=\x20(u\x20'+'+\x20v)\x20*\x20(u\x20'+'+\x20v);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'e_min\x20=\x20(u'+'\x20-\x20v)\x20*\x20(u'+'\x20-\x20v);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20V1_,\x20V2_;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(d11\x20>\x20'+'d22)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12\x20*\x20V'+'1\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20V2_\x20'+'=\x20d12\x20*\x20V1'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20V1'+'_\x20=\x20d12*V2'+'\x20+\x20(e_max\x20'+'-\x20d22)*V1;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20V2_\x20=\x20d'+'12*V2\x20+\x20(e'+'_min\x20-\x20d22'+')*V1;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20e_max'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'b\x20=\x201.0\x20/\x20'+'e_min;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V1\x20=\x20'+'normalize('+'V1_);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20V2\x20=\x20n'+'ormalize(V'+'2_);\x0a\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20dot(V1'+',\x20V1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20b\x20=\x201'+'.0\x20/\x20dot(V'+'2,\x20V2);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20V1\x20*'+'=\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20*=\x20sqrt('+'b);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'V3\x20=\x20norma'+'lize(cross'+'(V1,\x20V2));'+'\x0a\x20\x20\x20\x20if\x20(d'+'ot(C,\x20V3)\x20'+'<\x200.0)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V3\x20*='+'\x20-1.0;\x0a\x0a\x20\x20'+'\x20\x20float\x20L\x20'+'\x20=\x20dot(V3,'+'\x20C);\x0a\x20\x20\x20\x20f'+'loat\x20x0\x20=\x20'+'dot(V1,\x20C)'+'\x20/\x20L;\x0a\x20\x20\x20\x20'+'float\x20y0\x20='+'\x20dot(V2,\x20C'+')\x20/\x20L;\x0a\x0a\x20\x20'+'\x20\x20float\x20E1'+'\x20=\x20inverse'+'sqrt(a);\x0a\x20'+'\x20\x20\x20float\x20E'+'2\x20=\x20invers'+'esqrt(b);\x0a'+'\x0a\x20\x20\x20\x20a\x20*=\x20'+'L\x20*\x20L;\x0a\x20\x20\x20'+'\x20b\x20*=\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20c0\x20=\x20a'+'\x20*\x20b;\x0a\x20\x20\x20\x20'+'float\x20c1\x20='+'\x20a\x20*\x20b\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0\x20+\x20y0\x20*'+'\x20y0)\x20-\x20a\x20-'+'\x20b;\x0a\x20\x20\x20\x20fl'+'oat\x20c2\x20=\x201'+'.0\x20-\x20a\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0)\x20-\x20b\x20*'+'\x20(1.0\x20+\x20y0'+'\x20*\x20y0);\x0a\x20\x20'+'\x20\x20float\x20c3'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ro'+'ots\x20=\x20Solv'+'eCubic(vec'+'4(c0,\x20c1,\x20'+'c2,\x20c3));\x0a'+'\x20\x20\x20\x20float\x20'+'e1\x20=\x20roots'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20e2\x20=\x20r'+'oots.y;\x0a\x20\x20'+'\x20\x20float\x20e3'+'\x20=\x20roots.z'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20avgDir\x20='+'\x20vec3(a\x20*\x20'+'x0\x20/\x20(a\x20-\x20'+'e2),\x20b\x20*\x20y'+'0\x20/\x20(b\x20-\x20e'+'2),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20mat3\x20'+'rotate\x20=\x20m'+'at3(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20L1\x20=\x20sqrt'+'(-e2\x20/\x20e3)'+';\x0a\x20\x20\x20\x20floa'+'t\x20L2\x20=\x20sqr'+'t(-e2\x20/\x20e1'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20formFa'+'ctor\x20=\x20max'+'(0.0,\x20L1\x20*'+'\x20L2\x20*\x20inve')+('rsesqrt((1'+'.0\x20+\x20L1\x20*\x20'+'L1)\x20*\x20(1.0'+'\x20+\x20L2\x20*\x20L2'+')));\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20const\x20'+'float\x20LUT_'+'SIZE\x20=\x2064.'+'0;\x0a\x20\x20\x20\x20con'+'st\x20float\x20L'+'UT_SCALE\x20='+'\x20(\x20LUT_SIZ'+'E\x20-\x201.0\x20)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20float\x20LU'+'T_BIAS\x20=\x200'+'.5\x20/\x20LUT_S'+'IZE;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20tab'+'ulated\x20hor'+'izon-clipp'+'ed\x20sphere\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vec2(a'+'vgDir.z\x20*\x20'+'0.5\x20+\x200.5,'+'\x20formFacto'+'r);\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv*LUT_'+'SCALE\x20+\x20LU'+'T_BIAS;\x0a\x0a\x20'+'\x20\x20\x20float\x20s'+'cale\x20=\x20tex'+'ture2DLod('+'areaLights'+'LutTex2,\x20u'+'v,\x200.0).w;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20formFac'+'tor*scale;'+'\x0a}\x0a\x0a//\x20LTC'+'_EvaluateD'+'isk\x20in\x20som'+'e\x20rare\x20cas'+'es\x20generea'+'tes\x20NaN\x20va'+'lues\x20in\x20a\x20'+'or\x20b,\x20just'+'\x20before\x20\x27f'+'loat\x20c0\x20=\x20'+'a\x20*\x20b;\x27\x0a//'+'\x20Get\x20rid\x20o'+'f\x20those\x20Na'+'n\x20values\x20b'+'efore\x20they'+'\x20propagate'+'\x20further,\x20'+'as\x20in\x20case'+'\x20of\x20bloom\x20'+'/\x20DOF\x20blur'+'s\x20they\x0a//\x20'+'propagate\x20'+'to\x20large\x20a'+'reas.\x20I\x20di'+'dn\x27t\x20find\x20'+'the\x20actual'+'\x20reason\x20wh'+'ere\x20those\x20'+'come\x20from,'+'\x20so\x20that\x20i'+'s\x20still\x20TO'+'DO.\x0a//\x20Not'+'e\x20that\x20onl'+'y\x20disk/sph'+'ere\x20lights'+'\x20are\x20causi'+'ng\x20it,\x20so\x20'+'only\x20handl'+'e\x20those.\x0af'+'loat\x20FixNa'+'n(float\x20va'+'lue)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'value\x20!=\x20v'+'alue\x20?\x200.0'+'\x20:\x20value;\x20'+'\x20//\x20isnan\x20'+'does\x20not\x20t'+'ranspile\x20c'+'orrectly,\x20'+'use\x20a\x20work'+'around\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20isnan(va'+'lue)\x20?\x200.0'+'\x20:\x20value;\x0a')+('\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afloat\x20'+'getRectLig'+'htDiffuse('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm)\x20{\x0a\x20\x20'+'\x20\x20return\x20L'+'TC_Evaluat'+'eRect(\x20wor'+'ldNormal,\x20'+'viewDir,\x20v'+'PositionW,'+'\x20mat3(\x201.0'+'\x20),\x20dLTCCo'+'ords\x20);\x0a}\x0a'+'\x0afloat\x20get'+'DiskLightD'+'iffuse(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20FixN'+'an(LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mat3('+'\x201.0\x20),\x20dL'+'TCCoords\x20)'+');\x0a}\x0a\x0afloa'+'t\x20getSpher'+'eLightDiff'+'use(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm)\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20float\x20fa'+'lloff\x20=\x20dS'+'phereRadiu'+'s\x20/\x20(dot(l'+'ightDir,\x20l'+'ightDir)\x20+'+'\x20dSphereRa'+'dius);\x0a\x20\x20\x20'+'\x20return\x20Fi'+'xNan(getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNorm)\x20*\x20f'+'alloff);\x0a}'+'\x0a\x0amat3\x20get'+'LTCLightIn'+'vMat(vec2\x20'+'uv)\x0a{\x0a\x20\x20\x20\x20'+'vec4\x20t1\x20=\x20'+'texture2DL'+'od(areaLig'+'htsLutTex1'+',\x20uv,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3(\x20t1.x,\x20'+'0,\x20t1.y\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3(\x20\x20\x20\x200,'+'\x201,\x20\x20\x20\x200\x20)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3(\x20t1.z'+',\x200,\x20t1.w\x20'+')\x0a\x20\x20\x20\x20);\x0a}'+'\x0a\x0afloat\x20ca'+'lcRectLigh'+'tSpecular('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir')+(',\x20vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20mat'+'3\x20mInv\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afl'+'oat\x20getRec'+'tLightSpec'+'ular(vec3\x20'+'worldNorma'+'l,\x20vec3\x20vi'+'ewDir)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'calcRectLi'+'ghtSpecula'+'r(worldNor'+'mal,\x20viewD'+'ir,\x20dLTCUV'+');\x0a}\x0a\x0afloa'+'t\x20calcDisk'+'LightSpecu'+'lar(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20mInv'+'\x20=\x20getLTCL'+'ightInvMat'+'(uv);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_EvaluateD'+'isk(\x20world'+'Normal,\x20vi'+'ewDir,\x20vPo'+'sitionW,\x20m'+'Inv,\x20dLTCC'+'oords\x20);\x0a}'+'\x0a\x0afloat\x20ge'+'tDiskLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a\x0a'+'float\x20getS'+'phereLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a'),FP='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_metaln'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tMetalness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20metal'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20metalness'+'\x20*=\x20materi'+'al_metalne'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20metalne'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_METAL'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_METAL'+'NESS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_META'+'LNESS_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_VERTEX\x0a\x20\x20'+'\x20\x20metalnes'+'s\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_METALNES'+'S_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dMet'+'alness\x20=\x20m'+'etalness;\x0a'+'}\x0a',NP='\x0auniform\x20s'+'ampler2D\x20t'+'exture_msd'+'fMap;\x0a\x0aflo'+'at\x20median('+'float\x20r,\x20f'+'loat\x20g,\x20fl'+'oat\x20b)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'max(min(r,'+'\x20g),\x20min(m'+'ax(r,\x20g),\x20'+'b));\x0a}\x0a\x0afl'+'oat\x20map\x20(f'+'loat\x20min,\x20'+'float\x20max,'+'\x20float\x20v)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20(v\x20-\x20mi'+'n)\x20/\x20(max\x20'+'-\x20min);\x0a}\x0a'+'\x0auniform\x20f'+'loat\x20font_'+'sdfIntensi'+'ty;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20float\x20f'+'ont_pxrang'+'e;\x20\x20\x20\x20\x20\x20//'+'\x20the\x20numbe'+'r\x20of\x20pixel'+'s\x20between\x20'+'inside\x20and'+'\x20outside\x20t'+'he\x20font\x20in'+'\x20SDF\x0aunifo'+'rm\x20float\x20f'+'ont_textur'+'eWidth;\x20//'+'\x20the\x20width'+'\x20of\x20the\x20te'+'xture\x20atla'+'s\x0a\x0a#ifndef'+'\x20LIT_MSDF_'+'TEXT_ATTRI'+'BUTE\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20shadow_co'+'lor;\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20shadow_o'+'ffset;\x0a#el'+'se\x0a\x20\x20\x20\x20var'+'ying\x20vec4\x20'+'outline_co'+'lor;\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20outline'+'_thickness'+';\x0a\x20\x20\x20\x20vary'+'ing\x20vec4\x20s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'shadow_off'+'set;\x0a#endi'+'f\x0a\x0avec4\x20ap'+'plyMsdf(ve'+'c4\x20color)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Convert\x20to'+'\x20linear\x20sp'+'ace\x20before'+'\x20processin'+'g\x0a\x20\x20\x20\x20//\x20T'+'ODO:\x20ideal'+'ly\x20this\x20wo'+'uld\x20receiv'+'e\x20the\x20colo'+'r\x20in\x20linea'+'r\x20space,\x20b'+'ut\x20that\x20wo'+'uld\x20requir'+'e\x20larger\x20c'+'hanges\x0a\x20\x20\x20'+('\x20//\x20on\x20the'+'\x20engine\x20si'+'de,\x20with\x20t'+'he\x20way\x20pre'+'multiplied'+'\x20alpha\x20is\x20'+'handled\x20as'+'\x20well.\x0a\x20\x20\x20'+'\x20color.rgb'+'\x20=\x20gammaCo'+'rrectInput'+'(color.rgb'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20sample\x20th'+'e\x20field\x0a\x20\x20'+'\x20\x20vec3\x20tsa'+'mple\x20=\x20tex'+'ture2D(tex'+'ture_msdfM'+'ap,\x20vUv0).'+'rgb;\x0a\x20\x20\x20\x20v'+'ec2\x20uvShdw'+'\x20=\x20vUv0\x20-\x20'+'shadow_off'+'set;\x0a\x20\x20\x20\x20v'+'ec3\x20ssampl'+'e\x20=\x20textur'+'e2D(textur'+'e_msdfMap,'+'\x20uvShdw).r'+'gb;\x0a\x0a\x20\x20\x20\x20/'+'/\x20get\x20the\x20'+'signed\x20dis'+'tance\x20valu'+'e\x0a\x20\x20\x20\x20floa'+'t\x20sigDist\x20'+'=\x20median(t'+'sample.r,\x20'+'tsample.g,'+'\x20tsample.b'+');\x0a\x20\x20\x20\x20flo'+'at\x20sigDist'+'Shdw\x20=\x20med'+'ian(ssampl'+'e.r,\x20ssamp'+'le.g,\x20ssam'+'ple.b);\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20limi'+'t\x20-\x20smalle'+'r\x20value\x20ma'+'kes\x20for\x20sh'+'arper\x20but\x20'+'more\x20alias'+'ed\x20text,\x20e'+'specially\x20'+'on\x20angles\x0a'+'\x20\x20\x20\x20//\x20too'+'\x20large\x20val'+'ue\x20(0.5)\x20c'+'reates\x20a\x20d'+'ark\x20glow\x20a'+'round\x20the\x20'+'letters\x0a\x20\x20'+'\x20\x20float\x20sm'+'oothingMax'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20vec'+'2\x20w\x20=\x20fwid'+'th(vUv0);\x0a'+'\x20\x20\x20\x20float\x20'+'smoothing\x20'+'=\x20clamp(w.'+'x\x20*\x20font_t'+'extureWidt'+'h\x20/\x20font_p'+'xrange,\x200.'+'0,\x20smoothi'+'ngMax);\x0a\x0a\x20'+'\x20\x20\x20float\x20m'+'apMin\x20=\x200.'+'05;\x0a\x20\x20\x20\x20fl'+'oat\x20mapMax'+'\x20=\x20clamp(1'+'.0\x20-\x20font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20float\x20')+('sigDistInn'+'er\x20=\x20map(m'+'apMin,\x20map'+'Max,\x20sigDi'+'st);\x0a\x20\x20\x20\x20f'+'loat\x20sigDi'+'stOutline\x20'+'=\x20map(mapM'+'in,\x20mapMax'+',\x20sigDist\x20'+'+\x20outline_'+'thickness)'+';\x0a\x20\x20\x20\x20sigD'+'istShdw\x20=\x20'+'map(mapMin'+',\x20mapMax,\x20'+'sigDistShd'+'w\x20+\x20outlin'+'e_thicknes'+'s);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20cente'+'r\x20=\x200.5;\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20smoo'+'thing\x20and\x20'+'use\x20to\x20gen'+'erate\x20opac'+'ity\x0a\x20\x20\x20\x20fl'+'oat\x20inside'+'\x20=\x20smooths'+'tep(center'+'-smoothing'+',\x20center+s'+'moothing,\x20'+'sigDistInn'+'er);\x0a\x20\x20\x20\x20f'+'loat\x20outli'+'ne\x20=\x20smoot'+'hstep(cent'+'er-smoothi'+'ng,\x20center'+'+smoothing'+',\x20sigDistO'+'utline);\x0a\x20'+'\x20\x20\x20float\x20s'+'hadow\x20=\x20sm'+'oothstep(c'+'enter-smoo'+'thing,\x20cen'+'ter+smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20vec4\x20t'+'color\x20=\x20(o'+'utline\x20>\x20i'+'nside)\x20?\x20o'+'utline\x20*\x20v'+'ec4(outlin'+'e_color.a\x20'+'*\x20outline_'+'color.rgb,'+'\x20outline_c'+'olor.a)\x20:\x20'+'vec4(0.0);'+'\x0a\x20\x20\x20\x20tcolo'+'r\x20=\x20mix(tc'+'olor,\x20colo'+'r,\x20inside)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20scolor\x20='+'\x20(shadow\x20>'+'\x20outline)\x20'+'?\x20shadow\x20*'+'\x20vec4(shad'+'ow_color.a'+'\x20*\x20shadow_'+'color.rgb,'+'\x20shadow_co'+'lor.a)\x20:\x20t'+'color;\x0a\x20\x20\x20'+'\x20tcolor\x20=\x20'+'mix(scolor'+',\x20tcolor,\x20'+'outline);\x0a'+'\x0a\x20\x20\x20\x20//\x20Co'+'nvert\x20back'+'\x20to\x20gamma\x20'+'space\x20befo'+'re\x20returni'+'ng\x0a\x20\x20\x20\x20tco'+'lor.rgb\x20=\x20'+'gammaCorre'+'ctOutput(t'+'color.rgb)'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20return\x20tc'+'olor;\x0a}\x0a'),kP='\x0a\x0avec3\x20get'+'SpecularMo'+'dulate(in\x20'+'vec3\x20specu'+'larity,\x20in'+'\x20vec3\x20albe'+'do,\x20in\x20flo'+'at\x20metalne'+'ss,\x20in\x20flo'+'at\x20f0)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20di'+'electricF0'+'\x20=\x20f0\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(diel'+'ectricF0,\x20'+'albedo,\x20me'+'talness);\x0a'+'}\x0a\x0avec3\x20ge'+'tAlbedoMod'+'ulate(in\x20v'+'ec3\x20albedo'+',\x20in\x20float'+'\x20metalness'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20albed'+'o\x20*\x20(1.0\x20-'+'\x20metalness'+');\x0a}\x0a',UP='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20vec2\x20u'+'v0;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2DArra'+'y\x20morphTex'+'ture;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20float\x20'+'morphFacto'+'r[{MORPH_T'+'EXTURE_MAX'+'_COUNT}];\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20ui'+'nt\x20morphIn'+'dex[{MORPH'+'_TEXTURE_M'+'AX_COUNT}]'+';\x0a\x20\x20\x20\x20unif'+'orm\x20int\x20co'+'unt;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PH_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20aa'+'bbSize;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20a'+'abbMin;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20highp\x20vec'+'3\x20color\x20=\x20'+'vec3(0,\x200,'+'\x200);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'pixelCoord'+'s\x20=\x20ivec2('+'uv0\x20*\x20vec2'+'(textureSi'+'ze(morphTe'+'xture,\x200).'+'xy));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20count;\x20'+'i++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'int\x20textur'+'eIndex\x20=\x20m'+'orphIndex['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20delta\x20=\x20t'+'exelFetch('+'morphTextu'+'re,\x20ivec3('+'pixelCoord'+'s,\x20int(tex'+'tureIndex)'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20color\x20+'+'=\x20morphFac'+'tor[i]\x20*\x20d'+'elta;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20MORPH_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20color\x20'+'=\x20(color\x20-'+'\x20aabbMin)\x20'+'/\x20aabbSize'+'\x20*\x2065535.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20u'+'vec4(color'+',\x201u);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20ve'+'c4(color,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a',BP='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20}\x0a',zP='\x0aattribute'+'\x20vec3\x20vert'+'ex_outline'+'Parameters'+';\x0aattribut'+'e\x20vec3\x20ver'+'tex_shadow'+'Parameters'+';\x0a\x0avarying'+'\x20vec4\x20outl'+'ine_color;'+'\x0avarying\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0avaryin'+'g\x20vec4\x20sha'+'dow_color;'+'\x0avarying\x20v'+'ec2\x20shadow'+'_offset;\x0a\x0a'+'void\x20unpac'+'kMsdfParam'+'s()\x20{\x0a\x20\x20\x20\x20'+'vec3\x20littl'+'e\x20=\x20mod(ve'+'rtex_outli'+'neParamete'+'rs,\x20256.);'+'\x0a\x20\x20\x20\x20vec3\x20'+'big\x20=\x20(ver'+'tex_outlin'+'eParameter'+'s\x20-\x20little'+')\x20/\x20256.;\x0a'+'\x0a\x20\x20\x20\x20outli'+'ne_color.r'+'b\x20=\x20little'+'.xy\x20/\x20255.'+';\x0a\x20\x20\x20\x20outl'+'ine_color.'+'ga\x20=\x20big.x'+'y\x20/\x20255.;\x0a'+'\x0a\x20\x20\x20\x20//\x20_o'+'utlineThic'+'knessScale'+'\x20===\x200.2\x0a\x20'+'\x20\x20\x20outline'+'_thickness'+'\x20=\x20little.'+'z\x20/\x20255.\x20*'+'\x200.2;\x0a\x0a\x20\x20\x20'+'\x20little\x20=\x20'+'mod(vertex'+'_shadowPar'+'ameters,\x202'+'56.);\x0a\x20\x20\x20\x20'+'big\x20=\x20(ver'+'tex_shadow'+'Parameters'+'\x20-\x20little)'+'\x20/\x20256.;\x0a\x0a'+'\x20\x20\x20\x20shadow'+'_color.rb\x20'+'=\x20little.x'+'y\x20/\x20255.;\x0a'+'\x20\x20\x20\x20shadow'+'_color.ga\x20'+'=\x20big.xy\x20/'+'\x20255.;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+'ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20shado'+'w_offset\x20='+'\x20(vec2(lit'+'tle.z,\x20big'+'.z)\x20/\x20127.'+'\x20-\x201.)\x20*\x200'+'.005;\x0a}\x0a',VP='\x0amat3\x20dNor'+'malMatrix;'+'\x0a\x0avec3\x20get'+'Normal()\x20{'+'\x0a\x20\x20\x20\x20dNorm'+'alMatrix\x20='+'\x20getNormal'+'Matrix(dMo'+'delMatrix)'+';\x0a\x20\x20\x20\x20vec3'+'\x20localNorm'+'al\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}\x0a',GP='\x0a\x0aattribut'+'e\x20vec3\x20ver'+'tex_normal'+';\x0a\x0auniform'+'\x20mat3\x20matr'+'ix_normal;'+'\x0a\x0a#ifdef\x20M'+'ORPHING_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20morphNor'+'malTex;\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'morphNorma'+'lTex;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0avec3\x20'+'getLocalNo'+'rmal(vec3\x20'+'vertexNorm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20vec3\x20loca'+'lNormal\x20=\x20'+'vertex_nor'+'mal;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_NORM'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ivec2\x20mo'+'rphUV\x20=\x20ge'+'tTextureMo'+'rphCoords('+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'orphNormal'+'\x20=\x20vec3(te'+'xelFetch(m'+'orphNormal'+'Tex,\x20ivec2'+'(morphUV),'+'\x200).xyz)\x20/'+'\x2065535.0\x20*'+'\x202.0\x20-\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphNo'+'rmal\x20=\x20tex'+'elFetch(mo'+'rphNormalT'+'ex,\x20ivec2('+'morphUV),\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20localNor'+'mal\x20+=\x20mor'+'phNormal;\x0a'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20localN'+'ormal;\x0a}\x0a\x0a'+'#if\x20define'+'d(SKIN)\x20||'+'\x20defined(B'+'ATCH)\x0a\x20\x20\x20\x20'+'mat3\x20getNo'+'rmalMatrix'+'(mat4\x20mode'+'lMatrix)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mat3'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20ma'+'t3\x20getNorm'+'alMatrix(m'+'at4\x20modelM'+'atrix)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20mat3(m'+'odelMatrix'+'[0].xyz,\x20m'+('odelMatrix'+'[1].xyz,\x20m'+'odelMatrix'+'[2].xyz);\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20mat3'+'\x20getNormal'+'Matrix(mat'+'4\x20modelMat'+'rix)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_n'+'ormal;\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'),HP='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_bumpin'+'ess;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_NORMAL'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_normalDe'+'tailMapBum'+'piness;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20bl'+'endNormals'+'(vec3\x20n1,\x20'+'vec3\x20n2)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20https://'+'blog.selfs'+'hadow.com/'+'publicatio'+'ns/blendin'+'g-in-detai'+'l/#detail-'+'oriented\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20n1\x20'+'+=\x20vec3(0,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20n2\x20*'+'=\x20vec3(-1,'+'\x20-1,\x201);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20n1\x20*\x20d'+'ot(n1,\x20n2)'+'\x20/\x20n1.z\x20-\x20'+'n2;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0avo'+'id\x20getNorm'+'al()\x20{\x0a#if'+'def\x20STD_NO'+'RMAL_TEXTU'+'RE\x0a\x20\x20\x20\x20vec'+'3\x20normalMa'+'p\x20=\x20{STD_N'+'ORMAL_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_NORMAL_TE'+'XTURE_NAME'+'},\x20{STD_NO'+'RMAL_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+');\x0a\x20\x20\x20\x20nor'+'malMap\x20=\x20m'+'ix(vec3(0.'+'0,\x200.0,\x201.'+'0),\x20normal'+'Map,\x20mater'+'ial_bumpin'+'ess);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMALDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20norm'+'alDetailMa'+'p\x20=\x20{STD_N'+'ORMALDETAI'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_NOR'+'MALDETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'NORMALDETA'+'IL_TEXTURE'+'_UV},\x20text'+'ureBias));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20n'+'ormalDetai'+'lMap\x20=\x20mix'+'(vec3(0.0,'+'\x200.0,\x201.0)'+',\x20normalDe'+'tailMap,\x20m'+'aterial_no'+'rmalDetail'+'MapBumpine'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20blend'+'Normals(no'+'rmalMap,\x20n'+('ormalDetai'+'lMap);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20normal'+'ize(dTBN\x20*'+'\x20normalMap'+');\x0a#else\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20dVerte'+'xNormalW;\x0a'+'#endif\x0a}\x0a'),WP='\x0auniform\x20f'+'loat\x20mater'+'ial_opacit'+'y;\x0a\x0avoid\x20g'+'etOpacity('+')\x20{\x0a\x20\x20\x20\x20dA'+'lpha\x20=\x20mat'+'erial_opac'+'ity;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_OPACITY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20dAlpha\x20*='+'\x20texture2D'+'Bias({STD_'+'OPACITY_TE'+'XTURE_NAME'+'},\x20{STD_OP'+'ACITY_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20*=\x20c'+'lamp(vVert'+'exColor.{S'+'TD_OPACITY'+'_VERTEX_CH'+'ANNEL},\x200.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',$P='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20vec4\x20b'+'lueNoiseJi'+'tter;\x0a\x0a#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BLUENOI'+'SE\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blueN'+'oiseTex32;'+'\x0a#endif\x0a\x0av'+'oid\x20opacit'+'yDither(fl'+'oat\x20alpha,'+'\x20float\x20id)'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BAYER8\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20noise'+'\x20=\x20bayer8('+'floor(mod('+'gl_FragCoo'+'rd.xy\x20+\x20bl'+'ueNoiseJit'+'ter.xy\x20+\x20i'+'d,\x208.0)))\x20'+'/\x2064.0;\x0a\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20BLUENO'+'ISE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20frac'+'t(gl_FragC'+'oord.xy\x20/\x20'+'32.0\x20+\x20blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20noise\x20=\x20t'+'exture2DLo'+'d(blueNois'+'eTex32,\x20uv'+',\x200.0).y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20==\x20'+'IGNNOISE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20based\x20'+'on\x20https:/'+'/www.iryok'+'u.com/next'+'-generatio'+'n-post-pro'+'cessing-in'+'-call-of-d'+'uty-advanc'+'ed-warfare'+'/\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'agic\x20=\x20vec'+'3(0.067110'+'56,\x200.0058'+'3715,\x2052.9'+'829189);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20noi'+'se\x20=\x20fract'+'(magic.z\x20*'+'\x20fract(dot'+'(gl_FragCo'+'ord.xy\x20+\x20b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id,\x20magic.'+'xy)));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20convert\x20'+'the\x20noise\x20'+'to\x20linear\x20'+'space,\x20as\x20'+'that\x20is\x20sp'+'ecified\x20in'+('\x20sRGB\x20spac'+'e\x20(stores\x20'+'perceptual'+'\x20values)\x0a\x20'+'\x20\x20\x20noise\x20='+'\x20pow(noise'+',\x202.2);\x0a\x0a\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x20noise'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a}'+'\x0a'),XP='\x0a',qP='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20litArgs_'+'opacity;\x0a\x0a'+'#elif\x20LIT_'+'BLEND_TYPE'+'\x20==\x20PREMUL'+'TIPLIED\x0a\x0a\x20'+'\x20\x20\x20gl_Frag'+'Color.rgb\x20'+'*=\x20litArgs'+'_opacity;\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.a\x20='+'\x20litArgs_o'+'pacity;\x0a\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or.a\x20=\x201.0'+';\x0a\x0a#endif\x0a',jP='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20textu'+'re2D(sourc'+'e,\x20vUv0);\x0a'+'}\x0a',YP='\x0a\x0auniform\x20'+'vec3\x20mater'+'ial_sheen;'+'\x0a\x0avoid\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'heenColor\x20'+'=\x20material'+'_sheen;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEEN_'+'TEXTURE\x0a\x20\x20'+'\x20\x20sheenCol'+'or\x20*=\x20{STD'+'_SHEEN_TEX'+'TURE_DECOD'+'E}(texture'+'2DBias({ST'+'D_SHEEN_TE'+'XTURE_NAME'+'},\x20{STD_SH'+'EEN_TEXTUR'+'E_UV},\x20tex'+'tureBias))'+'.{STD_SHEE'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_VERTEX\x0a'+'\x20\x20\x20\x20sheenC'+'olor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20sSpec'+'ularity\x20=\x20'+'sheenColor'+';\x0a}\x0a',KP='\x0auniform\x20f'+'loat\x20mater'+'ial_sheenG'+'loss;\x0a\x0avoi'+'d\x20getSheen'+'Glossiness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20sheen'+'Glossiness'+'\x20=\x20materia'+'l_sheenGlo'+'ss;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20*'+'=\x20texture2'+'DBias({STD'+'_SHEENGLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_SHEENGLO'+'SS_TEXTURE'+'_UV},\x20text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20*='+'\x20saturate('+'vVertexCol'+'or.{STD_SH'+'EENGLOSS_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_INVER'+'T\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x201.0\x20-\x20'+'sheenGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20sGlossi'+'ness\x20=\x20she'+'enGlossine'+'ss\x20+\x200.000'+'0001;\x0a}\x0a',ZP='\x0auniform\x20f'+'loat\x20mater'+'ial_height'+'MapFactor;'+'\x0a\x0avoid\x20get'+'Parallax()'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20paralla'+'xScale\x20=\x20m'+'aterial_he'+'ightMapFac'+'tor;\x0a\x0a\x20\x20\x20\x20'+'float\x20heig'+'ht\x20=\x20textu'+'re2DBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_H'+'EIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20he'+'ight\x20=\x20hei'+'ght\x20*\x20para'+'llaxScale\x20'+'-\x20parallax'+'Scale\x20*\x200.'+'5;\x0a\x20\x20\x20\x20vec'+'3\x20viewDirT'+'\x20=\x20dViewDi'+'rW\x20*\x20dTBN;'+'\x0a\x0a\x20\x20\x20\x20view'+'DirT.z\x20+=\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',QP='\x0auniform\x20u'+'int\x20meshIn'+'stanceId;\x0a'+'\x0avec4\x20getP'+'ickOutput('+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20vec4\x20i'+'nv\x20=\x20vec4('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20co'+'nst\x20uvec4\x20'+'shifts\x20=\x20u'+'vec4(16,\x208'+',\x200,\x2024);\x0a'+'\x20\x20\x20\x20uvec4\x20'+'col\x20=\x20(uve'+'c4(meshIns'+'tanceId)\x20>'+'>\x20shifts)\x20'+'&\x20uvec4(0x'+'ff);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'(col)\x20*\x20in'+'v;\x0a}\x0a',JP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20dR'+'eflDirW\x20=\x20'+'normalize('+'-reflect(v'+'iewDir,\x20wo'+'rldNormal)'+');\x0a}\x0a',e2='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20sqrt'+'(1.0\x20-\x20min'+'(gloss,\x201.'+'0));\x0a\x0a\x20\x20\x20\x20'+'vec2\x20direc'+'tion\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicT\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3(directi'+'on,\x200.0));'+'\x0a\x20\x20\x20\x20vec3\x20'+'anisotropi'+'cB\x20=\x20norma'+'lize(cross'+'(tbn[2],\x20a'+'nisotropic'+'T));\x0a\x0a\x20\x20\x20\x20'+'float\x20anis'+'otropy\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20vec3'+'\x20anisotrop'+'icDirectio'+'n\x20=\x20anisot'+'ropicB;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicTa'+'ngent\x20=\x20cr'+'oss(anisot'+'ropicDirec'+'tion,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicNorm'+'al\x20=\x20cross'+'(anisotrop'+'icTangent,'+'\x20anisotrop'+'icDirectio'+'n);\x0a\x20\x20\x20\x20fl'+'oat\x20bendFa'+'ctor\x20=\x201.0'+'\x20-\x20anisotr'+'opy\x20*\x20(1.0'+'\x20-\x20roughne'+'ss);\x0a\x20\x20\x20\x20f'+'loat\x20bendF'+'actor4\x20=\x20b'+'endFactor\x20'+'*\x20bendFact'+'or\x20*\x20bendF'+'actor\x20*\x20be'+'ndFactor;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'entNormal\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}\x0a',t2='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0avoid\x20add'+'Reflection'+'CC(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20ccRe'+'flection\x20+'+'=\x20calcRefl'+'ection(ref'+'lDir,\x20glos'+'s);\x0a}\x0a#end'+'if\x0a',s2='\x0auniform\x20s'+'amplerCube'+'\x20texture_c'+'ubeMap;\x0aun'+'iform\x20floa'+'t\x20material'+'_reflectiv'+'ity;\x0a\x0avec3'+'\x20calcRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20lookup'+'Vec\x20=\x20cube'+'MapProject'+'(reflDir);'+'\x0a\x20\x20\x20\x20looku'+'pVec.x\x20*=\x20'+'-1.0;\x0a\x20\x20\x20\x20'+'return\x20{re'+'flectionDe'+'code}(text'+'ureCube(te'+'xture_cube'+'Map,\x20looku'+'pVec));\x0a}\x0a'+'\x0avoid\x20addR'+'eflection('+'vec3\x20reflD'+'ir,\x20float\x20'+'gloss)\x20{\x20\x20'+'\x20\x0a\x20\x20\x20\x20dRef'+'lection\x20+='+'\x20vec4(calc'+'Reflection'+'(reflDir,\x20'+'gloss),\x20ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',i2='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_envAtlas;'+'\x0a#endif\x0aun'+'iform\x20samp'+'lerCube\x20te'+'xture_cube'+'Map;\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'flectivity'+';\x0a\x0avec3\x20ca'+'lcReflecti'+'on(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20cub'+'eMapProjec'+'t(reflDir)'+'\x20*\x20vec3(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20t'+'oSpherical'+'Uv(dir);\x0a\x0a'+'\x20\x20\x20\x20//\x20cal'+'culate\x20rou'+'ghness\x20lev'+'el\x0a\x20\x20\x20\x20flo'+'at\x20level\x20='+'\x20saturate('+'1.0\x20-\x20glos'+'s)\x20*\x205.0;\x0a'+'\x20\x20\x20\x20float\x20'+'ilevel\x20=\x20f'+'loor(level'+');\x0a\x20\x20\x20\x20flo'+'at\x20flevel\x20'+'=\x20level\x20-\x20'+'ilevel;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20sh'+'arp\x20=\x20{ref'+'lectionCub'+'emapDecode'+'}(textureC'+'ube(textur'+'e_cubeMap,'+'\x20dir));\x0a\x20\x20'+'\x20\x20vec3\x20rou'+'ghA\x20=\x20{ref'+'lectionDec'+'ode}(textu'+'re2D(textu'+'re_envAtla'+'s,\x20mapRoug'+'hnessUv(uv'+',\x20ilevel))'+');\x0a\x20\x20\x20\x20vec'+'3\x20roughB\x20='+'\x20{reflecti'+'onDecode}('+'texture2D('+'texture_en'+'vAtlas,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20proc'+'essEnviron'+'ment(mix(s'+'harp,\x20mix('+'roughA,\x20ro'+'ughB,\x20flev'+'el),\x20min(l'+'evel,\x201.0)'+'));\x0a}\x0a\x0avoi'+'d\x20addRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x20\x20\x20\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20+=\x20vec'+'4(calcRefl'+'ection(ref'+'lDir,\x20glos'+'s),\x20materi'+'al_reflect'+'ivity);\x0a}\x0a',r2='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_env'+'Atlas;\x0a#en'+'dif\x0aunifor'+'m\x20float\x20ma'+'terial_ref'+'lectivity;'+'\x0a\x0a//\x20calcu'+'late\x20mip\x20l'+'evel\x20for\x20s'+'hiny\x20refle'+'ction\x20give'+'n\x20equirect'+'\x20coords\x20uv'+'.\x0afloat\x20sh'+'inyMipLeve'+'l(vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20dx\x20=\x20dFd'+'x(uv);\x0a\x20\x20\x20'+'\x20vec2\x20dy\x20='+'\x20dFdy(uv);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20s'+'econd\x20dF\x20a'+'t\x20180\x20degr'+'ees\x0a\x20\x20\x20\x20ve'+'c2\x20uv2\x20=\x20v'+'ec2(fract('+'uv.x\x20+\x200.5'+'),\x20uv.y);\x0a'+'\x20\x20\x20\x20vec2\x20d'+'x2\x20=\x20dFdx('+'uv2);\x0a\x20\x20\x20\x20'+'vec2\x20dy2\x20='+'\x20dFdy(uv2)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'min\x20of\x20bot'+'h\x20sets\x20of\x20'+'dF\x20to\x20hand'+'le\x20discont'+'inuity\x20at\x20'+'the\x20azim\x20e'+'dge\x0a\x20\x20\x20\x20fl'+'oat\x20maxd\x20='+'\x20min(max(d'+'ot(dx,\x20dx)'+',\x20dot(dy,\x20'+'dy)),\x20max('+'dot(dx2,\x20d'+'x2),\x20dot(d'+'y2,\x20dy2)))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'0.5\x20*\x20log2'+'(maxd)\x20-\x201'+'.0\x20+\x20textu'+'reBias,\x200.'+'0,\x205.0);\x0a}'+'\x0a\x0avec3\x20cal'+'cReflectio'+'n(vec3\x20ref'+'lDir,\x20floa'+'t\x20gloss)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3(-1.'+'0,\x201.0,\x201.'+'0);\x0a\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20to'+'SphericalU'+'v(dir);\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20roug'+'hness\x20leve'+'l\x0a\x20\x20\x20\x20floa'+'t\x20level\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20float\x20i'+'level\x20=\x20fl'+'oor(level)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'accessing\x20'+'the\x20shiny\x20'+'(top\x20level'+')\x20reflecti'+'on\x20-\x20perfo'+'rm\x20manual\x20'+'mipmap\x20loo'+'kup\x0a\x20\x20\x20\x20fl'+('oat\x20level2'+'\x20=\x20shinyMi'+'pLevel(uv\x20'+'*\x20atlasSiz'+'e);\x0a\x20\x20\x20\x20fl'+'oat\x20ilevel'+'2\x20=\x20floor('+'level2);\x0a\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v0,\x20uv1;\x0a\x20'+'\x20\x20\x20float\x20w'+'eight;\x0a\x20\x20\x20'+'\x20if\x20(ileve'+'l\x20==\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uv0\x20=\x20mapS'+'hinyUv(uv,'+'\x20ilevel2);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v1\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x20level2\x20'+'-\x20ilevel2;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20acces'+'sing\x20rough'+'\x20reflectio'+'n\x20-\x20just\x20s'+'ample\x20the\x20'+'same\x20part\x20'+'twice\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'uv1\x20=\x20mapR'+'oughnessUv'+'(uv,\x20ileve'+'l);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20weight\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'3\x20linearA\x20'+'=\x20{reflect'+'ionDecode}'+'(texture2D'+'(texture_e'+'nvAtlas,\x20u'+'v0));\x0a\x20\x20\x20\x20'+'vec3\x20linea'+'rB\x20=\x20{refl'+'ectionDeco'+'de}(textur'+'e2D(textur'+'e_envAtlas'+',\x20uv1));\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near0\x20=\x20mi'+'x(linearA,'+'\x20linearB,\x20'+'weight);\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near1\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(line'+'ar0,\x20linea'+'r1,\x20level\x20'+'-\x20ilevel))'+';\x0a}\x0a\x0avoid\x20'+'addReflect'+'ion(vec3\x20r'+'eflDir,\x20fl'+'oat\x20gloss)'+'\x20{\x20\x20\x20\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20+=\x20vec4('+'calcReflec'+'tion(reflD'+'ir,\x20gloss)'+',\x20material'+'_reflectiv'+'ity);\x0a}\x0a'),a2='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'uniform\x20sa'+'mpler2D\x20te'+'xture_sphe'+'reMap;\x0auni'+'form\x20float'+'\x20material_'+'reflectivi'+'ty;\x0a\x0avec3\x20'+'calcReflec'+'tion(vec3\x20'+'reflDir,\x20f'+'loat\x20gloss'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20reflDir'+'V\x20=\x20(mat3('+'matrix_vie'+'w)\x20*\x20reflD'+'ir);\x0a\x0a\x20\x20\x20\x20'+'float\x20m\x20=\x20'+'2.0\x20*\x20sqrt'+'(dot(reflD'+'irV.xy,\x20re'+'flDirV.xy)'+'\x20+\x20(reflDi'+'rV.z\x20+\x201.0'+')\x20*\x20(reflD'+'irV.z\x20+\x201.'+'0));\x0a\x20\x20\x20\x20v'+'ec2\x20sphere'+'MapUv\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(texture2'+'D(texture_'+'sphereMap,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0av'+'oid\x20addRef'+'lection(ve'+'c3\x20reflDir'+',\x20float\x20gl'+'oss)\x20{\x20\x20\x20\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20+=\x20v'+'ec4(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20mate'+'rial_refle'+'ctivity);\x0a'+'}\x0a',n2='\x0a\x0avoid\x20add'+'Reflection'+'Sheen(vec3'+'\x20worldNorm'+'al,\x20vec3\x20v'+'iewDir,\x20fl'+'oat\x20gloss)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20NoV\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'float\x20alph'+'aG\x20=\x20gloss'+'\x20*\x20gloss;\x0a'+'\x0a\x20\x20\x20\x20//\x20Av'+'oid\x20using\x20'+'a\x20LUT\x20and\x20'+'approximat'+'e\x20the\x20valu'+'es\x20analyti'+'cally\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'gloss\x20<\x200.'+'25\x20?\x20-339.'+'2\x20*\x20alphaG'+'\x20+\x20161.4\x20*'+'\x20gloss\x20-\x202'+'5.9\x20:\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95;\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20gl'+'oss\x20<\x200.25'+'\x20?\x2044.0\x20*\x20'+'alphaG\x20-\x202'+'3.7\x20*\x20glos'+'s\x20+\x203.26\x20:'+'\x201.97\x20*\x20al'+'phaG\x20-\x203.2'+'7\x20*\x20gloss\x20'+'+\x200.72;\x0a\x20\x20'+'\x20\x20float\x20DG'+'\x20=\x20exp(\x20a\x20'+'*\x20NoV\x20+\x20b\x20'+')\x20+\x20(\x20glos'+'s\x20<\x200.25\x20?'+'\x200.0\x20:\x200.1'+'\x20*\x20(\x20gloss'+'\x20-\x200.25\x20)\x20'+');\x0a\x20\x20\x20\x20sRe'+'flection\x20+'+'=\x20calcRefl'+'ection(wor'+'ldNormal,\x20'+'0.0)\x20*\x20sat'+'urate(DG);'+'\x0a}\x0a',o2='\x0avec3\x20refr'+'act2(vec3\x20'+'viewVec,\x20v'+'ec3\x20normal'+',\x20float\x20IO'+'R)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20vn\x20=\x20'+'dot(viewVe'+'c,\x20normal)'+';\x0a\x20\x20\x20\x20floa'+'t\x20k\x20=\x201.0\x20'+'-\x20IOR\x20*\x20IO'+'R\x20*\x20(1.0\x20-'+'\x20vn\x20*\x20vn);'+'\x0a\x20\x20\x20\x20vec3\x20'+'refrVec\x20=\x20'+'IOR\x20*\x20view'+'Vec\x20-\x20(IOR'+'\x20*\x20vn\x20+\x20sq'+'rt(k))\x20*\x20n'+'ormal;\x0a\x20\x20\x20'+'\x20return\x20re'+'frVec;\x0a}\x0a\x0a'+'void\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20vec3\x20w'+'orldNormal'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20viewDir,'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20thicknes'+'s,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20albedo'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20transmi'+'ssion,\x0a\x20\x20\x20'+'\x20float\x20ref'+'ractionInd'+'ex,\x0a\x20\x20\x20\x20fl'+'oat\x20disper'+'sion\x0a#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20,\x20'+'vec3\x20iride'+'scenceFres'+'nel,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceInte'+'nsity\x0a#end'+'if\x20\x0a)\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20s'+'ame\x20reflec'+'tion\x20code\x20'+'with\x20refra'+'ction\x20vect'+'or\x0a\x20\x20\x20\x20vec'+'4\x20tmpRefl\x20'+'=\x20dReflect'+'ion;\x0a\x20\x20\x20\x20v'+'ec3\x20reflec'+'tionDir\x20=\x20'+'refract2(-'+'viewDir,\x20w'+'orldNormal'+',\x20refracti'+'onIndex);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve'+'c4(0);\x0a\x20\x20\x20'+'\x20addReflec'+'tion(refle'+'ctionDir,\x20'+'gloss);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20dRe'+'flection.r'+'gb\x20*\x20albed'+'o,\x20transmi'+'ssion);\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20=\x20tmpR'+'efl;\x0a}\x0a',l2='\x0auniform\x20f'+'loat\x20mater'+'ial_invAtt'+'enuationDi'+'stance;\x0aun'+'iform\x20vec3'+'\x20material_'+'attenuatio'+'n;\x0a\x0avec3\x20e'+'valRefract'+'ionColor(v'+'ec3\x20refrac'+'tionVector'+',\x20float\x20gl'+'oss,\x20float'+'\x20refractio'+'nIndex)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20Th'+'e\x20refracti'+'on\x20point\x20i'+'s\x20the\x20entr'+'y\x20point\x20+\x20'+'vector\x20to\x20'+'exit\x20point'+'\x0a\x20\x20\x20\x20vec4\x20'+'pointOfRef'+'raction\x20=\x20'+'vec4(vPosi'+'tionW\x20+\x20re'+'fractionVe'+'ctor,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'Project\x20to'+'\x20texture\x20s'+'pace\x20so\x20we'+'\x20can\x20sampl'+'e\x20it\x0a\x20\x20\x20\x20v'+'ec4\x20projec'+'tionPoint\x20'+'=\x20matrix_v'+'iewProject'+'ion\x20*\x20poin'+'tOfRefract'+'ion;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20bui'+'lt-in\x20getG'+'rabScreenP'+'os\x20functio'+'n\x20to\x20conve'+'rt\x20screen\x20'+'position\x20t'+'o\x20grab\x20tex'+'ture\x20uv\x20co'+'ords\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etGrabScre'+'enPos(proj'+'ectionPoin'+'t);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Use\x20IOR\x20'+'and\x20roughn'+'ess\x20to\x20sel'+'ect\x20mip\x0a\x20\x20'+'\x20\x20float\x20io'+'rToRoughne'+'ss\x20=\x20(1.0\x20'+'-\x20gloss)\x20*'+'\x20clamp((1.'+'0\x20/\x20refrac'+'tionIndex)'+'\x20*\x202.0\x20-\x202'+'.0,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20f'+'loat\x20refra'+'ctionLod\x20='+'\x20log2(uScr'+'eenSize.x)'+'\x20*\x20iorToRo'+'ughness;\x0a\x20'+'\x20\x20\x20vec3\x20re'+'fraction\x20='+'\x20texture2D'+'Lod(uScene'+'ColorMap,\x20'+'uv,\x20refrac'+'tionLod).r'+'gb;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20refr'+'action;\x0a}\x0a'+'\x0avoid\x20addR'+'efraction('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20thickne'+'ss,\x20\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+('3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20albed'+'o,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20transm'+'ission,\x0a\x20\x20'+'\x20\x20float\x20re'+'fractionIn'+'dex,\x0a\x20\x20\x20\x20f'+'loat\x20dispe'+'rsion\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a)\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20Extr'+'act\x20scale\x20'+'from\x20the\x20m'+'odel\x20trans'+'form\x0a\x20\x20\x20\x20v'+'ec3\x20modelS'+'cale;\x0a\x20\x20\x20\x20'+'modelScale'+'.x\x20=\x20lengt'+'h(vec3(mat'+'rix_model['+'0].xyz));\x0a'+'\x20\x20\x20\x20modelS'+'cale.y\x20=\x20l'+'ength(vec3'+'(matrix_mo'+'del[1].xyz'+'));\x0a\x20\x20\x20\x20mo'+'delScale.z'+'\x20=\x20length('+'vec3(matri'+'x_model[2]'+'.xyz));\x0a\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20the\x20'+'refraction'+'\x20vector,\x20s'+'caled\x20by\x20t'+'he\x20thickne'+'ss\x20and\x20sca'+'le\x20of\x20the\x20'+'object\x0a\x20\x20\x20'+'\x20vec3\x20scal'+'e\x20=\x20thickn'+'ess\x20*\x20mode'+'lScale;\x0a\x20\x20'+'\x20\x20vec3\x20ref'+'ractionVec'+'tor\x20=\x20norm'+'alize(refr'+'act(-viewD'+'ir,\x20worldN'+'ormal,\x20ref'+'ractionInd'+'ex))\x20*\x20sca'+'le;\x0a\x20\x20\x20\x20ve'+'c3\x20refract'+'ion\x20=\x20eval'+'Refraction'+'Color(refr'+'actionVect'+'or,\x20gloss,'+'\x20refractio'+'nIndex);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20bas'+'ed\x20on\x20the\x20'+'dispersion'+'\x20material\x20'+'property,\x20'+'calculate\x20'+'modified\x20r'+'efraction\x20'+'index\x20valu'+'es\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20for\x20R\x20'+'and\x20B\x20chan'+'nels\x20and\x20e'+'valuate\x20th'+'e\x20refracti'+'on\x20color\x20f'+'or\x20them.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20halfSpr'+'ead\x20=\x20(1.0'+'\x20/\x20refract'+'ionIndex\x20-')+('\x201.0)\x20*\x200.'+'025\x20*\x20disp'+'ersion;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20refract'+'ionIndexR\x20'+'=\x20refracti'+'onIndex\x20-\x20'+'halfSpread'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'refraction'+'Vector\x20=\x20n'+'ormalize(r'+'efract(-vi'+'ewDir,\x20wor'+'ldNormal,\x20'+'refraction'+'IndexR))\x20*'+'\x20scale;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20refr'+'action.r\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'xR).r;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20refracti'+'onIndexB\x20='+'\x20refractio'+'nIndex\x20+\x20h'+'alfSpread;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efractionV'+'ector\x20=\x20no'+'rmalize(re'+'fract(-vie'+'wDir,\x20worl'+'dNormal,\x20r'+'efractionI'+'ndexB))\x20*\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20refra'+'ction.b\x20=\x20'+'evalRefrac'+'tionColor('+'refraction'+'Vector,\x20gl'+'oss,\x20refra'+'ctionIndex'+'B).b;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20Trans'+'mittance\x20i'+'s\x20our\x20fina'+'l\x20refracti'+'on\x20color\x0a\x20'+'\x20\x20\x20vec3\x20tr'+'ansmittanc'+'e;\x0a\x20\x20\x20\x20if\x20'+'(material_'+'invAttenua'+'tionDistan'+'ce\x20!=\x200.0)'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'attenuatio'+'n\x20=\x20-log(m'+'aterial_at'+'tenuation)'+'\x20*\x20materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans'+'mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20vec3'+'\x20fresnel\x20='+'\x20vec3(1.0)'+'\x20-\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot(')+('viewDir,\x20w'+'orldNormal'+'),\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20ref'+'raction\x20*\x20'+'transmitta'+'nce\x20*\x20fres'+'nel,\x20trans'+'mission);\x0a'+'}\x0a'),c2='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0a//\x20sourc'+'e\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'lerCube\x20so'+'urceCube;\x0a'+'#else\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20so'+'urceTex;\x0a#'+'endif\x0a\x0a#if'+'def\x20USE_SA'+'MPLES_TEX\x0a'+'\x20\x20\x20\x20//\x20sam'+'ples\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20sam'+'plesTex;\x0a\x20'+'\x20\x20\x20uniform'+'\x20vec2\x20samp'+'lesTexInve'+'rseSize;\x0a#'+'endif\x0a\x0a//\x20'+'params:\x0a//'+'\x20x\x20-\x20targe'+'t\x20cubemap\x20'+'face\x200..6\x0a'+'//\x20y\x20-\x20tar'+'get\x20image\x20'+'total\x20pixe'+'ls\x0a//\x20z\x20-\x20'+'source\x20cub'+'emap\x20size\x0a'+'uniform\x20ve'+'c3\x20params;'+'\x0a\x0afloat\x20ta'+'rgetFace()'+'\x20{\x20return\x20'+'params.x;\x20'+'}\x0afloat\x20ta'+'rgetTotalP'+'ixels()\x20{\x20'+'return\x20par'+'ams.y;\x20}\x0af'+'loat\x20sourc'+'eTotalPixe'+'ls()\x20{\x20ret'+'urn\x20params'+'.z;\x20}\x0a\x0aflo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0a#i'+'nclude\x20\x22de'+'codePS\x22\x0a#i'+'nclude\x20\x22en'+'codePS\x22\x0a\x0a/'+'/--\x20suppor'+'ted\x20projec'+'tions\x0a\x0avec'+'3\x20modifySe'+'ams(vec3\x20d'+'ir,\x20float\x20'+'scale)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20ad'+'ir\x20=\x20abs(d'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20M\x20=\x20m'+'ax(max(adi'+'r.x,\x20adir.'+'y),\x20adir.z'+');\x0a\x20\x20\x20\x20ret'+'urn\x20dir\x20/\x20'+'M\x20*\x20vec3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.x\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20adir.y\x20'+'==\x20M\x20?\x201.0'+'\x20:\x20scale,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.z\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0avec2\x20t'+'oSpherical'+'(vec3\x20dir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec2(d'+'ir.xz\x20==\x20v'+'ec2(0.0)\x20?'+('\x200.0\x20:\x20ata'+'n(dir.x,\x20d'+'ir.z),\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0avec3\x20f'+'romSpheric'+'al(vec2\x20uv'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec3('+'cos(uv.y)\x20'+'*\x20sin(uv.x'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'in(uv.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cos('+'uv.y)\x20*\x20co'+'s(uv.x));\x0a'+'}\x0a\x0avec3\x20ge'+'tDirection'+'Equirect()'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20fromSp'+'herical((v'+'ec2(vUv0.x'+',\x201.0\x20-\x20vU'+'v0.y)\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20vec2(PI,\x20'+'PI\x20*\x200.5))'+';\x0a}\x0a\x0a//\x20oc'+'tahedral\x20c'+'ode,\x20based'+'\x20on\x20https:'+'//jcgt.org'+'/published'+'/0003/02/0'+'1/\x0a//\x20\x22Sur'+'vey\x20of\x20Eff'+'icient\x20Rep'+'resentatio'+'ns\x20for\x20Ind'+'ependent\x20U'+'nit\x20Vector'+'s\x22\x20by\x20Cigo'+'lle,\x20Donow'+',\x20Evangela'+'kos,\x20Mara,'+'\x20McGuire,\x20'+'Meyer\x0a\x0aflo'+'at\x20signNot'+'Zero(float'+'\x20k){\x0a\x20\x20\x20\x20r'+'eturn(k\x20>='+'\x200.0)\x20?\x201.'+'0\x20:\x20-1.0;\x0a'+'}\x0a\x0avec2\x20si'+'gnNotZero('+'vec2\x20v)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20vec2(sign'+'NotZero(v.'+'x),\x20signNo'+'tZero(v.y)'+');\x0a}\x0a\x0a//\x20R'+'eturns\x20a\x20u'+'nit\x20vector'+'.\x20Argument'+'\x20o\x20is\x20an\x20o'+'ctahedral\x20'+'vector\x20pac'+'ked\x20via\x20oc'+'tEncode,\x20o'+'n\x20the\x20[-1,'+'\x20+1]\x20squar'+'e\x0avec3\x20oct'+'Decode(vec'+'2\x20o)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20v\x20=\x20'+'vec3(o.x,\x20'+'1.0\x20-\x20abs('+'o.x)\x20-\x20abs'+'(o.y),\x20o.y'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20v.xz\x20=\x20('+'1.0\x20-\x20abs('+'v.zx))\x20*\x20s'+'ignNotZero'+'(v.xz);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20norma'+'lize(v);\x0a}'+'\x0a\x0avec3\x20get'+'DirectionO'+'ctahedral('+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20octDe'+'code(vec2(')+('vUv0.x,\x201.'+'0\x20-\x20vUv0.y'+')\x20*\x202.0\x20-\x20'+'1.0);\x0a}\x0a\x0a/'+'/\x20Assumes\x20'+'that\x20v\x20is\x20'+'a\x20unit\x20vec'+'tor.\x20The\x20r'+'esult\x20is\x20a'+'n\x20octahedr'+'al\x20vector\x20'+'on\x20the\x20[-1'+',\x20+1]\x20squa'+'re\x0avec2\x20oc'+'tEncode(in'+'\x20vec3\x20v)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20vec2'+'\x20result\x20=\x20'+'v.xz\x20*\x20(1.'+'0\x20/\x20l1norm'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20result\x20='+'\x20(1.0\x20-\x20ab'+'s(result.y'+'x))\x20*\x20sign'+'NotZero(re'+'sult.xy);\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20res'+'ult;\x0a}\x0a\x0a//'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'///////\x0a\x0a#'+'ifdef\x20CUBE'+'MAP_SOURCE'+'\x0a\x20\x20\x20\x20vec4\x20'+'sampleCube'+'map(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureCu'+'be(sourceC'+'ube,\x20modif'+'ySeams(dir'+',\x201.0));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eCubemap(v'+'ec2\x20sph)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leCubemap('+'fromSpheri'+'cal(sph));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20vec4\x20sam'+'pleCubemap'+'(vec3\x20dir,'+'\x20float\x20mip'+'Level)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20textur'+'eCubeLod(s'+'ourceCube,'+'\x20modifySea'+'ms(dir,\x201.'+'0),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleCub'+'emap(vec2\x20'+'sph,\x20float'+'\x20mipLevel)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleCubema'+'p(fromSphe'+'rical(sph)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eEquirect('+'vec2\x20sph)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'sph\x20/\x20vec2'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'ture2D(sou'+'rceTex,\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec4\x20s'+'ampleEquir'+'ect(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleEqu'+'irect(toSp'+'herical(di'+'r));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleEqu'+'irect(vec2'+'\x20sph,\x20floa'+'t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20sph\x20/\x20ve'+'c2(PI\x20*\x202.'+'0,\x20PI)\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2DLo'+'d(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y),\x20mip'+'Level);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Equirect(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20sampleEq'+'uirect(toS'+'pherical(d'+'ir),\x20mipLe'+'vel);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20o'+'ctEncode(d'+'ir)\x20*\x200.5\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20texture2'+'D(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Octahedral'+'(vec2\x20sph)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleOctahe'+'dral(fromS'+'pherical(s'+'ph));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20octEn'+'code(dir)\x20'+'*\x200.5\x20+\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20te'+'xture2DLod'+'(sourceTex'+',\x20vec2(uv.'+'x,\x201.0\x20-\x20u'+'v.y),\x20mipL'+'evel);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20sampleO'+'ctahedral('+'vec2\x20sph,\x20'+'float\x20mipL'+'evel)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleO'+'ctahedral('+'fromSpheri'+'cal(sph),\x20')+('mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0avec3'+'\x20getDirect'+'ionCubemap'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec2\x20st\x20=\x20v'+'Uv0\x20*\x202.0\x20'+'-\x201.0;\x0a\x20\x20\x20'+'\x20float\x20fac'+'e\x20=\x20target'+'Face();\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ve'+'c;\x0a\x20\x20\x20\x20if\x20'+'(face\x20==\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec\x20=\x20'+'vec3(1,\x20-s'+'t.y,\x20-st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3(-1,\x20-st.'+'y,\x20st.x);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(face\x20'+'==\x202.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c\x20=\x20vec3(s'+'t.x,\x201,\x20st'+'.y);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x203.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3(st.x,\x20'+'-1,\x20-st.y)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(fac'+'e\x20==\x204.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec\x20=\x20vec3'+'(st.x,\x20-st'+'.y,\x201);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec\x20=\x20vec3('+'-st.x,\x20-st'+'.y,\x20-1);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(mod'+'ifySeams(v'+'ec,\x201.0));'+'\x0a}\x0a\x0amat3\x20m'+'atrixFromV'+'ector(vec3'+'\x20n)\x20{\x20//\x20f'+'risvad\x0a\x20\x20\x20'+'\x20float\x20a\x20='+'\x201.0\x20/\x20(1.'+'0\x20+\x20n.z);\x0a'+'\x20\x20\x20\x20float\x20'+'b\x20=\x20-n.x\x20*'+'\x20n.y\x20*\x20a;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'1\x20=\x20vec3(1'+'.0\x20-\x20n.x\x20*'+'\x20n.x\x20*\x20a,\x20'+'b,\x20-n.x);\x0a'+'\x20\x20\x20\x20vec3\x20b'+'2\x20=\x20vec3(b'+',\x201.0\x20-\x20n.'+'y\x20*\x20n.y\x20*\x20'+'a,\x20-n.y);\x0a'+'\x20\x20\x20\x20return'+'\x20mat3(b1,\x20'+'b2,\x20n);\x0a}\x0a'+'\x0amat3\x20matr'+'ixFromVect'+'orSlow(vec'+'3\x20n)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20up\x20='+'\x20(1.0\x20-\x20ab'+'s(n.y)\x20<=\x20'+'0.0000001)'+'\x20?\x20vec3(0.'+'0,\x200.0,\x20n.'+'y\x20>\x200.0\x20?\x20'+'1.0\x20:\x20-1.0'+')\x20:\x20vec3(0'+'.0,\x201.0,\x200'+'.0);\x0a\x20\x20\x20\x20v'+'ec3\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20vec'+'3\x20y\x20=\x20cros')+('s(n,\x20x);\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(x,\x20y,'+'\x20n);\x0a}\x0a\x0ave'+'c4\x20reproje'+'ct()\x20{\x0a\x20\x20\x20'+'\x20if\x20({NUM_'+'SAMPLES}\x20<'+'=\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20si'+'ngle\x20sampl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20{EN'+'CODE_FUNC}'+'({DECODE_F'+'UNC}({SOUR'+'CE_FUNC}({'+'TARGET_FUN'+'C}())));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multi\x20s'+'ample\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20t'+'\x20=\x20{TARGET'+'_FUNC}();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20tu\x20=\x20dF'+'dx(t);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'tv\x20=\x20dFdy('+'t);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(float\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'++u)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(float\x20'+'v\x20=\x200.0;\x20v'+'\x20<\x20{NUM_SA'+'MPLES_SQRT'+'};\x20++v)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20resu'+'lt\x20+=\x20{DEC'+'ODE_FUNC}('+'{SOURCE_FU'+'NC}(normal'+'ize(t\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20tu'+'\x20*\x20(u\x20/\x20{N'+'UM_SAMPLES'+'_SQRT}\x20-\x200'+'.5)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20tv\x20*'+'\x20(v\x20/\x20{NUM'+'_SAMPLES_S'+'QRT}\x20-\x200.5'+'))));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20({'+'NUM_SAMPLE'+'S_SQRT}\x20*\x20'+'{NUM_SAMPL'+'ES_SQRT}))'+';\x0a\x20\x20\x20\x20}\x0a}\x0a'+'\x0avec4\x20unpa'+'ckFloat\x20=\x20'+'vec4(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20void\x20'+'unpackSamp'+'le(int\x20i,\x20'+'out\x20vec3\x20L'+',\x20out\x20floa')+('t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20u\x20'+'=\x20(float(i'+'\x20*\x204)\x20+\x200.'+'5)\x20*\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20v\x20=\x20(f'+'loor(u)\x20+\x20'+'0.5)\x20*\x20sam'+'plesTexInv'+'erseSize.y'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20raw;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.x\x20=\x20dot'+'(texture2D'+'(samplesTe'+'x,\x20vec2(u,'+'\x20v)),\x20unpa'+'ckFloat);\x20'+'u\x20+=\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'texture2D('+'samplesTex'+',\x20vec2(u,\x20'+'v)),\x20unpac'+'kFloat);\x20u'+'\x20+=\x20sample'+'sTexInvers'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.z\x20=\x20dot(t'+'exture2D(s'+'amplesTex,'+'\x20vec2(u,\x20v'+')),\x20unpack'+'Float);\x20u\x20'+'+=\x20samples'+'TexInverse'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20raw.'+'w\x20=\x20dot(te'+'xture2D(sa'+'mplesTex,\x20'+'vec2(u,\x20v)'+'),\x20unpackF'+'loat);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20L.xy'+'z\x20=\x20raw.xy'+'z\x20*\x202.0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20mipLeve'+'l\x20=\x20raw.w\x20'+'*\x208.0;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20convolve\x20'+'an\x20environ'+'ment\x20given'+'\x20pre-gener'+'ated\x20sampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamples()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L')+(',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level))\x20*\x20'+'L.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tot'+'alWeight\x20+'+'=\x20L.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20{ENCODE'+'_FUNC}(res'+'ult\x20/\x20tota'+'lWeight);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20unweig'+'hted\x20versi'+'on\x20of\x20pref'+'ilterSampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamplesUn'+'weighted()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20fl'+'oat({NUM_S'+'AMPLES}));'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20{PROCESS'+'_FUNC}();\x0a'+'}\x0a'),h2='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0auniform'+'\x20vec4\x20uvMo'+'d;\x0avarying'+'\x20vec2\x20vUv0'+';\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20v'+'ec4(vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(vertex_po'+'sition.xy\x20'+'*\x200.5\x20+\x200.'+'5)\x20*\x20uvMod'+'.xy\x20+\x20uvMo'+'d.zw);\x0a}\x0a',d2='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20uScen'+'eDepthMap;'+'\x0a\x0a#ifndef\x20'+'SCREENSIZE'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20SCREENS'+'IZE\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20un'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#ifndef'+'\x20CAMERAPLA'+'NES\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20camera'+'_params;\x20/'+'/\x20x:\x201\x20/\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20\x20y:\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20z:\x20ca'+'mera_near,'+'\x20\x20\x20\x20\x20\x20\x20\x20w:'+'\x20is_ortho\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20lineariz'+'eDepth(flo'+'at\x20z)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'camera_par'+'ams.w\x20==\x200'+'.0)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(camera'+'_params.z\x20'+'*\x20camera_p'+'arams.y)\x20/'+'\x20(camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(camer'+'a_params.z'+'\x20-\x20camera_'+'params.y))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20camera'+'_params.z\x20'+'+\x20z\x20*\x20(cam'+'era_params'+'.y\x20-\x20camer'+'a_params.z'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0aflo'+'at\x20delinea'+'rizeDepth('+'float\x20line'+'arDepth)\x20{'+'\x0a\x20\x20\x20\x20if\x20(c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'(camera_pa'+'rams.y\x20*\x20('+'camera_par'+'ams.z\x20-\x20li'+'nearDepth)'+')\x20/\x20(linea'+'rDepth\x20*\x20('+'camera_par'+'ams.z\x20-\x20ca'+'mera_param'+'s.y));\x0a\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(line'+'arDepth\x20-\x20'+'camera_par'+'ams.z)\x20/\x20('+('camera_par'+'ams.y\x20-\x20ca'+'mera_param'+'s.z);\x0a\x20\x20\x20\x20'+'}\x0a}\x0a\x0a//\x20Re'+'trieves\x20re'+'ndered\x20lin'+'ear\x20camera'+'\x20depth\x20by\x20'+'UV\x0afloat\x20g'+'etLinearSc'+'reenDepth('+'vec2\x20uv)\x20{'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SCENE_DE'+'PTHMAP_LIN'+'EAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_FLOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2D(u'+'SceneDepth'+'Map,\x20uv).r'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20textu'+'reSize\x20=\x20t'+'extureSize'+'(uSceneDep'+'thMap,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ivec2\x20t'+'exel\x20=\x20ive'+'c2(uv\x20*\x20ve'+'c2(texture'+'Size));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20data\x20'+'=\x20texelFet'+'ch(uSceneD'+'epthMap,\x20t'+'exel,\x200);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(data.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(uint(d'+'ata.g\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20|\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(uint(dat'+'a.b\x20*\x20255.'+'0)\x20<<\x208u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(data.a\x20'+'*\x20255.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uintBitsTo'+'Float(intB'+'its);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20line'+'arizeDepth'+'(texture2D'+'(uSceneDep'+'thMap,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20float\x20'+'getLinearS'+'creenDepth'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20uv'+'\x20=\x20gl_Frag'+'Coord.xy\x20*'+'\x20uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur')+('n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afloat\x20'+'getLinearD'+'epth(vec3\x20'+'pos)\x20{\x0a\x20\x20\x20'+'\x20return\x20-('+'matrix_vie'+'w\x20*\x20vec4(p'+'os,\x201.0)).'+'z;\x0a}\x0a'),f2='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x20\x0ai'+'nt\x20getShad'+'owCascadeI'+'ndex(vec4\x20'+'shadowCasc'+'adeDistanc'+'es,\x20int\x20sh'+'adowCascad'+'eCount)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20in\x200\x20.'+'.\x20far\x20plan'+'e\x20range\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x0a\x20'+'\x20\x20\x20//\x201.0\x20'+'if\x20depth\x20>'+'=\x20distance'+',\x200.0\x20othe'+'rwise\x0a\x20\x20\x20\x20'+'vec4\x20compa'+'risons\x20=\x20s'+'tep(shadow'+'CascadeDis'+'tances,\x20ve'+'c4(depth))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'sum\x20is\x20the'+'\x20index\x0a\x20\x20\x20'+'\x20int\x20casca'+'deIndex\x20=\x20'+'int(dot(co'+'mparisons,'+'\x20vec4(1.0)'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20limit\x20to'+'\x20actual\x20nu'+'mber\x20of\x20us'+'ed\x20cascade'+'s\x0a\x20\x20\x20\x20retu'+'rn\x20min(cas'+'cadeIndex,'+'\x20shadowCas'+'cadeCount\x20'+'-\x201);\x0a}\x0a\x0a/'+'/\x20function'+'\x20which\x20mod'+'ifies\x20casc'+'ade\x20index\x20'+'to\x20dither\x20'+'between\x20ca'+'scades\x0aint'+'\x20ditherSha'+'dowCascade'+'Index(int\x20'+'cascadeInd'+'ex,\x20vec4\x20s'+'hadowCasca'+'deDistance'+'s,\x20int\x20sha'+'dowCascade'+'Count,\x20flo'+'at\x20blendFa'+'ctor)\x20{\x0a\x20\x0a'+'\x20\x20\x20\x20if\x20(ca'+'scadeIndex'+'\x20<\x20shadowC'+'ascadeCoun'+'t\x20-\x201)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20current'+'RangeEnd\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20transit'+'ionStart\x20='+'\x20blendFact'+'or\x20*\x20curre'+'ntRangeEnd'+';\x20//\x20Start'+'\x20overlap\x20f'+'actor\x20away'+'\x20from\x20the\x20'+'end\x20distan'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x201.0\x20/'+('\x20gl_FragCo'+'ord.w;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'depth\x20>\x20tr'+'ansitionSt'+'art)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Calculat'+'e\x20a\x20transi'+'tion\x20facto'+'r\x20(0.0\x20to\x20'+'1.0)\x20withi'+'n\x20the\x20over'+'lap\x20range\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20tr'+'ansitionFa'+'ctor\x20=\x20smo'+'othstep(tr'+'ansitionSt'+'art,\x20curre'+'ntRangeEnd'+',\x20depth);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Add\x20'+'pseudo-ran'+'dom\x20dither'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ODO:\x20repla'+'ce\x20by\x20user'+'\x20selectabl'+'e\x20ditherin'+'g\x20method\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dit'+'her\x20=\x20frac'+'t(sin(dot('+'gl_FragCoo'+'rd.xy,\x20vec'+'2(12.9898,'+'\x2078.233)))'+'\x20*\x2043758.5'+'453);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(dither\x20<'+'\x20transitio'+'nFactor)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20cas'+'cadeIndex\x20'+'+=\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20return\x20ca'+'scadeIndex'+';\x0a}\x0a\x0avec3\x20'+'fadeShadow'+'(vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'CascadeDis'+'tances)\x20{\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20if\x20th'+'e\x20pixel\x20is'+'\x20past\x20the\x20'+'shadow\x20dis'+'tance,\x20rem'+'ove\x20shadow'+'\x0a\x20\x20\x20\x20//\x20th'+'is\x20enforce'+'s\x20straight'+'\x20line\x20inst'+'ead\x20of\x20cor'+'ner\x20of\x20sha'+'dow\x20which\x20'+'moves\x20when'+'\x20camera\x20ro'+'tates\x20\x20\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x20\x20'+'\x20\x20if\x20(dept'+'h\x20>\x20shadow'+'CascadeDis'+'tances.w)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'shadowCoor'+'d.z\x20=\x20-999'+'9999.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20shad'+'owCoord;\x0a}'+'\x0a'),u2='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afloat\x20lin'+'step(float'+'\x20a,\x20float\x20'+'b,\x20float\x20v'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20satur'+'ate((v\x20-\x20a'+')\x20/\x20(b\x20-\x20a'+'));\x0a}\x0a\x0aflo'+'at\x20reduceL'+'ightBleedi'+'ng(float\x20p'+'Max,\x20float'+'\x20amount)\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'float\x20cheb'+'yshevUpper'+'Bound(vec2'+'\x20moments,\x20'+'float\x20mean'+',\x20float\x20mi'+'nVariance,'+'\x20float\x20lig'+'htBleeding'+'Reduction)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'Compute\x20va'+'riance\x0a\x20\x20\x20'+'\x20float\x20var'+'iance\x20=\x20mo'+'ments.y\x20-\x20'+'(moments.x'+'\x20*\x20moments'+'.x);\x0a\x20\x20\x20\x20v'+'ariance\x20=\x20'+'max(varian'+'ce,\x20minVar'+'iance);\x0a\x0a\x20'+'\x20\x20\x20//\x20Comp'+'ute\x20probab'+'ilistic\x20up'+'per\x20bound\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20mean\x20-'+'\x20moments.x'+';\x0a\x20\x20\x20\x20floa'+'t\x20pMax\x20=\x20v'+'ariance\x20/\x20'+'(variance\x20'+'+\x20(d\x20*\x20d))'+';\x0a\x0a\x20\x20\x20\x20pMa'+'x\x20=\x20reduce'+'LightBleed'+'ing(pMax,\x20'+'lightBleed'+'ingReducti'+'on);\x0a\x0a\x20\x20\x20\x20'+'//\x20One-tai'+'led\x20Chebys'+'hev\x0a\x20\x20\x20\x20re'+'turn\x20(mean'+'\x20<=\x20moment'+'s.x\x20?\x201.0\x20'+':\x20pMax);\x0a}'+'\x0a\x0afloat\x20ca'+'lculateEVS'+'M(vec3\x20mom'+'ents,\x20floa'+'t\x20Z,\x20float'+'\x20vsmBias,\x20'+'float\x20expo'+'nent)\x20{\x0a\x20\x20'+'\x20\x20Z\x20=\x202.0\x20'+'*\x20Z\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20warpedDep'+'th\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20m'+'oments.xy\x20'+'+=\x20vec2(wa'+'rpedDepth,'+'\x20warpedDep'+'th*warpedD'+'epth)\x20*\x20(1'+'.0\x20-\x20momen'+'ts.z);\x0a\x0a\x20\x20'+('\x20\x20float\x20VS'+'MBias\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20float'+'\x20depthScal'+'e\x20=\x20VSMBia'+'s\x20*\x20expone'+'nt\x20*\x20warpe'+'dDepth;\x0a\x20\x20'+'\x20\x20float\x20mi'+'nVariance1'+'\x20=\x20depthSc'+'ale\x20*\x20dept'+'hScale;\x0a\x20\x20'+'\x20\x20return\x20c'+'hebyshevUp'+'perBound(m'+'oments.xy,'+'\x20warpedDep'+'th,\x20minVar'+'iance1,\x200.'+'1);\x0a}\x0a\x0a//\x20'+'------\x20VSM'+'\x2016\x20------'+'\x0a\x0afloat\x20VS'+'M16(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec2\x20'+'texCoords,'+'\x20float\x20res'+'olution,\x20f'+'loat\x20Z,\x20fl'+'oat\x20vsmBia'+'s,\x20float\x20e'+'xponent)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'moments\x20=\x20'+'texture2DL'+'od(tex,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM16('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM16(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM16(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20VSM16('+'TEXTURE_PA'+'SS(shadowM'+'ap),\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----')+('--\x0a\x0afloat\x20'+'VSM32(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20texCoord'+'s,\x20float\x20r'+'esolution,'+'\x20float\x20Z,\x20'+'float\x20vsmB'+'ias,\x20float'+'\x20exponent)'+'\x20{\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20CAPS_'+'TEXTURE_FL'+'OAT_FILTER'+'ABLE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20te'+'xture2DLod'+'(tex,\x20texC'+'oords,\x200.0'+').xyz;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ma'+'nual\x20bilin'+'ear\x20filter'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pi'+'xelSize\x20=\x20'+'1.0\x20/\x20reso'+'lution;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20texC'+'oords\x20-=\x20v'+'ec2(pixelS'+'ize);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'00\x20=\x20textu'+'re2DLod(te'+'x,\x20texCoor'+'ds,\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20s10'+'\x20=\x20texture'+'2DLod(tex,'+'\x20texCoords'+'\x20+\x20vec2(pi'+'xelSize,\x200'+'),\x200.0).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20s01\x20'+'=\x20texture2'+'DLod(tex,\x20'+'texCoords\x20'+'+\x20vec2(0,\x20'+'pixelSize)'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20s11\x20='+'\x20texture2D'+'Lod(tex,\x20t'+'exCoords\x20+'+'\x20vec2(pixe'+'lSize),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20fr\x20=\x20frac'+'t(texCoord'+'s\x20*\x20resolu'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'h0\x20=\x20mix(s'+'00,\x20s10,\x20f'+'r.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20h'+'1\x20=\x20mix(s0'+'1,\x20s11,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20mi'+'x(h0,\x20h1,\x20'+'fr.y);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM32('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM32(T')+('EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM32(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20Z\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd.xy,\x20sha'+'dowParams.'+'x,\x20Z,\x20shad'+'owParams.y'+',\x20exponent'+');\x0a}\x0a'),p2='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_ACCEP'+'T(shadowMa'+'p),\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20textur'+'eShadow(sh'+'adowMap,\x20s'+'hadowCoord'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wSpotPCF1x'+'1(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSh'+'adow(shado'+'wMap,\x20shad'+'owCoord);\x0a'+'}\x0a\x0a//\x20----'+'-\x20Omni\x20Sam'+'pling\x20----'+'-\x0a\x0a#ifndef'+'\x20WEBGPU\x0a\x0af'+'loat\x20getSh'+'adowOmniPC'+'F1x1(sampl'+'erCubeShad'+'ow\x20shadowM'+'ap,\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20float\x20sh'+'adowZ\x20=\x20le'+'ngth(light'+'Dir)\x20*\x20sha'+'dowParams.'+'w\x20+\x20shadow'+'Params.z;\x0a'+'\x20\x20\x20\x20return'+'\x20texture(s'+'hadowMap,\x20'+'vec4(light'+'Dir,\x20shado'+'wZ));\x0a}\x0a\x0a#'+'endif\x0a',m2='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_ACCE'+'PT(shadowM'+'ap),\x20vec3\x20'+'shadowCoor'+'d,\x20vec3\x20sh'+'adowParams'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20sh'+'adowCoord.'+'z;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20sha'+'dowCoord.x'+'y\x20*\x20shadow'+'Params.x;\x20'+'//\x201\x20unit\x20'+'-\x201\x20texel\x0a'+'\x20\x20\x20\x20float\x20'+'shadowMapS'+'izeInv\x20=\x201'+'.0\x20/\x20shado'+'wParams.x;'+'\x0a\x20\x20\x20\x20vec2\x20'+'base_uv\x20=\x20'+'floor(uv\x20+'+'\x200.5);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20(uv.x\x20+\x200'+'.5\x20-\x20base_'+'uv.x);\x0a\x20\x20\x20'+'\x20float\x20t\x20='+'\x20(uv.y\x20+\x200'+'.5\x20-\x20base_'+'uv.y);\x20\x0a\x20\x20'+'\x20\x20base_uv\x20'+'-=\x20vec2(0.'+'5);\x0a\x20\x20\x20\x20ba'+'se_uv\x20*=\x20s'+'hadowMapSi'+'zeInv;\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'uw0\x20=\x20(3.0'+'\x20-\x202.0\x20*\x20s'+');\x0a\x20\x20\x20\x20flo'+'at\x20uw1\x20=\x20('+'1.0\x20+\x202.0\x20'+'*\x20s);\x0a\x0a\x20\x20\x20'+'\x20float\x20u0\x20'+'=\x20(2.0\x20-\x20s'+')\x20/\x20uw0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20f'+'loat\x20u1\x20=\x20'+'s\x20/\x20uw1\x20+\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(3.0\x20-\x202'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20t)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20v0\x20=\x20(2'+'.0\x20-\x20t)\x20/\x20'+'vw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20v1\x20=\x20t\x20/\x20'+'vw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20u0\x20='+'\x20u0\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v0\x20=\x20v0\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u1\x20=\x20'+'u1\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'1\x20=\x20v1\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+('sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw0\x20*\x20v'+'w1\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u0,\x20v'+'1,\x20z));\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w1\x20*\x20vw1\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u1,\x20v1,\x20z'+'));\x0a\x0a\x20\x20\x20\x20s'+'um\x20*=\x201.0f'+'\x20/\x2016.0;\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowPCF3x3('+'SHADOWMAP_'+'ACCEPT(sha'+'dowMap),\x20v'+'ec3\x20shadow'+'Coord,\x20vec'+'4\x20shadowPa'+'rams)\x20{\x0a\x20\x20'+'\x20\x20return\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_PASS'+'(shadowMap'+'),\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowSpotPCF'+'3x3(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3('+'SHADOWMAP_'+'PASS(shado'+'wMap),\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0a//\x20-----'+'\x20Omni\x20Samp'+'ling\x20-----'+'\x0a\x0a#ifndef\x20'+'WEBGPU\x0a\x0afl'+'oat\x20getSha'+'dowOmniPCF'+'3x3(sample'+'rCubeShado'+'w\x20shadowMa'+'p,\x20vec4\x20sh'+'adowParams'+',\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a\x20\x20\x20\x20fl'+'oat\x20shadow'+'Z\x20=\x20length'+'(dir)\x20*\x20sh'+'adowParams'+'.w\x20+\x20shado'+'wParams.z;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x0a\x20\x20\x20\x20'+'float\x20z\x20=\x20'+'1.0\x20/\x20floa'+'t(textureS'+'ize(shadow'+'Map,\x200));\x0a'+'\x20\x20\x20\x20vec3\x20t'+'c\x20=\x20normal'+'ize(dir);\x0a'+'\x0a\x20\x20\x20\x20//\x20av'+'erage\x204\x20sa'+'mples\x20-\x20no'+'t\x20a\x20strict')+('\x203x3\x20PCF\x20b'+'ut\x20that\x27s\x20'+'tricky\x20wit'+'h\x20cubemaps'+'\x0a\x20\x20\x20\x20mediu'+'mp\x20vec4\x20sh'+'adows;\x0a\x20\x20\x20'+'\x20shadows.x'+'\x20=\x20texture'+'(shadowMap'+',\x20vec4(tc\x20'+'+\x20vec3(\x20z,'+'\x20z,\x20z),\x20sh'+'adowZ));\x0a\x20'+'\x20\x20\x20shadows'+'.y\x20=\x20textu'+'re(shadowM'+'ap,\x20vec4(t'+'c\x20+\x20vec3(-'+'z,-z,\x20z),\x20'+'shadowZ));'+'\x0a\x20\x20\x20\x20shado'+'ws.z\x20=\x20tex'+'ture(shado'+'wMap,\x20vec4'+'(tc\x20+\x20vec3'+'(-z,\x20z,-z)'+',\x20shadowZ)'+');\x0a\x20\x20\x20\x20sha'+'dows.w\x20=\x20t'+'exture(sha'+'dowMap,\x20ve'+'c4(tc\x20+\x20ve'+'c3(\x20z,-z,-'+'z),\x20shadow'+'Z));\x0a\x0a\x20\x20\x20\x20'+'return\x20dot'+'(shadows,\x20'+'vec4(0.25)'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wOmniPCF3x'+'3(samplerC'+'ubeShadow\x20'+'shadowMap,'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20lightDi'+'r)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowOmniP'+'CF3x3(shad'+'owMap,\x20sha'+'dowParams,'+'\x20lightDir)'+';\x0a}\x0a\x0a#endi'+'f\x0a'),_2='\x0afloat\x20_ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec3\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20//\x20h'+'ttp://the-'+'witness.ne'+'t/news/201'+'3/09/shado'+'w-mapping-'+'summary-pa'+'rt-1/\x0a\x0a\x20\x20\x20'+'\x20float\x20z\x20='+'\x20shadowCoo'+'rd.z;\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'shadowCoor'+'d.xy\x20*\x20sha'+'dowParams.'+'x;\x20//\x201\x20un'+'it\x20-\x201\x20tex'+'el\x0a\x20\x20\x20\x20flo'+'at\x20shadowM'+'apSizeInv\x20'+'=\x201.0\x20/\x20sh'+'adowParams'+'.x;\x0a\x20\x20\x20\x20ve'+'c2\x20base_uv'+'\x20=\x20floor(u'+'v\x20+\x200.5);\x0a'+'\x20\x20\x20\x20float\x20'+'s\x20=\x20(uv.x\x20'+'+\x200.5\x20-\x20ba'+'se_uv.x);\x0a'+'\x20\x20\x20\x20float\x20'+'t\x20=\x20(uv.y\x20'+'+\x200.5\x20-\x20ba'+'se_uv.y);\x0a'+'\x20\x20\x20\x20base_u'+'v\x20-=\x20vec2('+'0.5);\x0a\x20\x20\x20\x20'+'base_uv\x20*='+'\x20shadowMap'+'SizeInv;\x0a\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20uw0\x20=\x20(4.'+'0\x20-\x203.0\x20*\x20'+'s);\x0a\x20\x20\x20\x20fl'+'oat\x20uw1\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20f'+'loat\x20uw2\x20='+'\x20(1.0\x20+\x203.'+'0\x20*\x20s);\x0a\x0a\x20'+'\x20\x20\x20float\x20u'+'0\x20=\x20(3.0\x20-'+'\x202.0\x20*\x20s)\x20'+'/\x20uw0\x20-\x202.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20u1\x20=\x20(3'+'.0\x20+\x20s)\x20/\x20'+'uw1;\x0a\x20\x20\x20\x20f'+'loat\x20u2\x20=\x20'+'s\x20/\x20uw2\x20+\x20'+'2.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(4.0\x20-\x203'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x207.0;\x0a'+'\x20\x20\x20\x20float\x20'+'vw2\x20=\x20(1.0'+'\x20+\x203.0\x20*\x20t'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20v0\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20t)\x20/\x20vw0'+'\x20-\x202.0;\x0a\x20\x20'+'\x20\x20float\x20v1'+'\x20=\x20(3.0\x20+\x20'+'t)\x20/\x20vw1;\x0a'+'\x20\x20\x20\x20float\x20'+'v2\x20=\x20t\x20/\x20v'+'w2\x20+\x202.0;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20sum\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20u0\x20'+'=\x20u0\x20*\x20sha'+'dowMapSize'+'Inv\x20+\x20base'+'_uv.x;\x0a\x20\x20\x20'+'\x20v0\x20=\x20v0\x20*'+'\x20shadowMap'+'SizeInv\x20+\x20'+'base_uv.y;'+'\x0a\x0a\x20\x20\x20\x20u1\x20='+('\x20u1\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v1\x20=\x20v1\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u2\x20=\x20'+'u2\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'2\x20=\x20v2\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+'sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw2\x20*\x20v'+'w0\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u2,\x20v'+'0,\x20z));\x0a\x0a\x20'+'\x20\x20\x20sum\x20+=\x20'+'uw0\x20*\x20vw1\x20'+'*\x20textureS'+'hadow(shad'+'owMap,\x20vec'+'3(u0,\x20v1,\x20'+'z));\x0a\x20\x20\x20\x20s'+'um\x20+=\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureShado'+'w(shadowMa'+'p,\x20vec3(u1'+',\x20v1,\x20z));'+'\x0a\x20\x20\x20\x20sum\x20+'+'=\x20uw2\x20*\x20vw'+'1\x20*\x20textur'+'eShadow(sh'+'adowMap,\x20v'+'ec3(u2,\x20v1'+',\x20z));\x0a\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w0\x20*\x20vw2\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u0,\x20v2,\x20z'+'));\x0a\x20\x20\x20\x20su'+'m\x20+=\x20uw1\x20*'+'\x20vw2\x20*\x20tex'+'tureShadow'+'(shadowMap'+',\x20vec3(u1,'+'\x20v2,\x20z));\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw2\x20*\x20vw2'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u2,\x20v2,'+'\x20z));\x0a\x0a\x20\x20\x20'+'\x20sum\x20*=\x201.'+'0f\x20/\x20144.0'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20saturate'+'(sum);\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'um;\x0a}\x0a\x0aflo'+'at\x20getShad'+'owPCF5x5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20_g'+'etShadowPC'+'F5x5(SHADO'+'WMAP_PASS('+'shadowMap)'+',\x20shadowCo'+'ord,\x20shado')+('wParams.xy'+'z);\x0a}\x0a\x0aflo'+'at\x20getShad'+'owSpotPCF5'+'x5(SHADOWM'+'AP_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getShad'+'owPCF5x5(S'+'HADOWMAP_P'+'ASS(shadow'+'Map),\x20shad'+'owCoord,\x20s'+'hadowParam'+'s.xyz);\x0a}\x0a'),g2='\x0a\x0a/**\x0a\x20*\x20P'+'CSS\x20is\x20a\x20s'+'hadow\x20samp'+'ling\x20metho'+'d\x20that\x20pro'+'vides\x20cont'+'act\x20harden'+'ing\x20soft\x20s'+'hadows,\x20us'+'ed\x20for\x20omn'+'i\x20and\x20spot'+'\x20lights.\x0a\x20'+'*\x20Based\x20on'+':\x20\x0a\x20*\x20-\x20ht'+'tps://www.'+'gamedev.ne'+'t/tutorial'+'s/programm'+'ing/graphi'+'cs/effect-'+'area-light'+'-shadows-p'+'art-1-pcss'+'-r4971/\x0a\x20*'+'\x20-\x20https:/'+'/github.co'+'m/pboechat'+'/PCSS\x20\x0a\x20*/'+'\x0a\x0a#define\x20'+'PCSS_SAMPL'+'E_COUNT\x2016'+'\x0a\x0auniform\x20'+'float\x20pcss'+'DiskSample'+'s[PCSS_SAM'+'PLE_COUNT]'+';\x0auniform\x20'+'float\x20pcss'+'SphereSamp'+'les[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x0avec2\x20'+'vogelDisk('+'int\x20sample'+'Index,\x20flo'+'at\x20count,\x20'+'float\x20phi,'+'\x20float\x20r)\x20'+'{\x0a\x20\x20\x20\x20cons'+'t\x20float\x20Go'+'ldenAngle\x20'+'=\x202.4;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta\x20=\x20float'+'(sampleInd'+'ex)\x20*\x20Gold'+'enAngle\x20+\x20'+'phi;\x0a\x0a\x20\x20\x20\x20'+'float\x20sine'+'\x20=\x20sin(the'+'ta);\x0a\x20\x20\x20\x20f'+'loat\x20cosin'+'e\x20=\x20cos(th'+'eta);\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(r\x20*\x20cosi'+'ne,\x20r\x20*\x20si'+'ne);\x0a}\x0a\x0ave'+'c3\x20vogelSp'+'here(int\x20s'+'ampleIndex'+',\x20float\x20co'+'unt,\x20float'+'\x20phi,\x20floa'+'t\x20r)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20GoldenA'+'ngle\x20=\x202.4'+';\x0a\x20\x20\x20\x20floa'+'t\x20theta\x20=\x20'+'float(samp'+'leIndex)\x20*'+'\x20GoldenAng'+'le\x20+\x20phi;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20weight\x20=\x20'+'float(samp'+'leIndex)\x20/'+'\x20count;\x0a\x20\x20'+'\x20\x20return\x20v'+'ec3(cos(th'+'eta)\x20*\x20r,\x20'+'weight,\x20si'+'n(theta)\x20*'+'\x20r);\x0a}\x0a\x0afl'+'oat\x20noise('+'vec2\x20scree'+'nPos)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PHI\x20=\x20'+('1.61803398'+'8749894848'+'20459;\x20\x20//'+'\x20\x20=\x20Golde'+'n\x20Ratio\x20\x20\x20'+'\x0a\x20\x20\x20\x20retur'+'n\x20fract(si'+'n(dot(scre'+'enPos\x20*\x20PH'+'I,\x20screenP'+'os))\x20*\x20scr'+'eenPos.x);'+'\x0a}\x0a\x0afloat\x20'+'viewSpaceD'+'epth(float'+'\x20depth,\x20ma'+'t4\x20invProj'+'ection)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'z\x20=\x20depth\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20vec'+'4\x20clipSpac'+'e\x20=\x20vec4(0'+'.0,\x200.0,\x20z'+',\x201.0);\x0a\x20\x20'+'\x20\x20vec4\x20vie'+'wSpace\x20=\x20i'+'nvProjecti'+'on\x20*\x20clipS'+'pace;\x0a\x20\x20\x20\x20'+'return\x20vie'+'wSpace.z;\x0a'+'}\x0a\x0afloat\x20P'+'CSSBlocker'+'Distance(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20sampleCoo'+'rds[PCSS_S'+'AMPLE_COUN'+'T],\x20vec2\x20s'+'hadowCoord'+'s,\x20vec2\x20se'+'archSize,\x20'+'float\x20z,\x20v'+'ec4\x20camera'+'Params)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20blockers\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20float\x20ave'+'rageBlocke'+'r\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20offset\x20='+'\x20sampleCoo'+'rds[i]\x20*\x20s'+'earchSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20sample'+'UV\x20=\x20shado'+'wCoords\x20+\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20blocker'+'\x20=\x20texture'+'2DLod(shad'+'owMap,\x20sam'+'pleUV,\x200.0'+').r;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20i'+'sBlocking\x20'+'=\x20step(blo'+'cker,\x20z);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20bl'+'ockers\x20+=\x20'+'isBlocking'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'averageBlo'+'cker\x20+=\x20bl'+'ocker\x20*\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20if\x20(block'+'ers\x20>\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20aver'+'ageBlocker'+'\x20/\x20blocker'+'s;\x0a\x20\x20\x20\x20ret'+'urn\x20-1.0;\x0a'+'}\x0a\x0afloat\x20P'+'CSS(TEXTUR')+('E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoords,\x20'+'vec4\x20camer'+'aParams,\x20v'+'ec2\x20shadow'+'SearchArea'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'linearizeD'+'epthWithPa'+'rams(shado'+'wCoords.z,'+'\x20cameraPar'+'ams);\x0a\x0a\x20\x20\x20'+'\x20vec2\x20samp'+'lePoints[P'+'CSS_SAMPLE'+'_COUNT];\x0a\x20'+'\x20\x20\x20const\x20f'+'loat\x20PI\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20float\x20n'+'oise\x20=\x20noi'+'se(\x20gl_Fra'+'gCoord.xy\x20'+')\x20*\x202.0\x20*\x20'+'PI;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x200;\x20i\x20<\x20PC'+'SS_SAMPLE_'+'COUNT;\x20i++'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pc'+'ssPresampl'+'e\x20=\x20pcssDi'+'skSamples['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20samplePo'+'ints[i]\x20=\x20'+'vogelDisk('+'i,\x20float(P'+'CSS_SAMPLE'+'_COUNT),\x20n'+'oise,\x20pcss'+'Presample)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20a'+'verageBloc'+'ker\x20=\x20PCSS'+'BlockerDis'+'tance(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20samplePoi'+'nts,\x20shado'+'wCoords.xy'+',\x20shadowSe'+'archArea,\x20'+'receiverDe'+'pth,\x20camer'+'aParams);\x0a'+'\x20\x20\x20\x20if\x20(av'+'erageBlock'+'er\x20==\x20-1.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x201'+'.0;\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depthDiff'+'erence\x20=\x20('+'receiverDe'+'pth\x20-\x20aver'+'ageBlocker'+')\x20/\x203.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20filterRa'+'dius\x20=\x20dep'+'thDifferen'+'ce\x20*\x20shado'+'wSearchAre'+'a;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20for\x20(int\x20'+'i\x20=\x200;\x20i\x20<'+'\x20PCSS_SAMP'+'LE_COUNT;\x20'+'i\x20++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20sampleU'+'V\x20=\x20sample'+'Points[i]\x20'+'*\x20filterRa')+('dius;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleUV\x20=\x20s'+'hadowCoord'+'s.xy\x20+\x20sam'+'pleUV;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20textur'+'e2DLod(sha'+'dowMap,\x20sa'+'mpleUV,\x200.'+'0).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20shadow\x20/\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT);\x0a\x20\x20\x20\x20'+'}\x20\x0a}\x0a\x0a#ifn'+'def\x20WEBGPU'+'\x0a\x0afloat\x20PC'+'SSCubeBloc'+'kerDistanc'+'e(samplerC'+'ube\x20shadow'+'Map,\x20vec3\x20'+'lightDirNo'+'rm,\x20vec3\x20s'+'amplePoint'+'s[PCSS_SAM'+'PLE_COUNT]'+',\x20float\x20z,'+'\x20float\x20sha'+'dowSearchA'+'rea)\x20{\x0a\x20\x20\x20'+'\x20float\x20blo'+'ckers\x20=\x200.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20average'+'Blocker\x20=\x20'+'0.0;\x0a\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20P'+'CSS_SAMPLE'+'_COUNT;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sa'+'mpleDir\x20=\x20'+'lightDirNo'+'rm\x20+\x20sampl'+'ePoints[i]'+'\x20*\x20shadowS'+'earchArea;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'ampleDir\x20='+'\x20normalize'+'(sampleDir'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'ocker\x20=\x20te'+'xtureCubeL'+'od(shadowM'+'ap,\x20sample'+'Dir,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20isB'+'locking\x20=\x20'+'step(block'+'er,\x20z);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20bloc'+'kers\x20+=\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20av'+'erageBlock'+'er\x20+=\x20bloc'+'ker\x20*\x20isBl'+'ocking;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'f\x20(blocker'+'s\x20>\x200.0)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20averag'+'eBlocker\x20/'+'\x20blockers;'+'\x0a\x20\x20\x20\x20retur'+'n\x20-1.0;\x0a}\x0a'+'\x0afloat\x20PCS'+'SCube(samp'+'lerCube\x20sh'+'adowMap,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20shadowC'+'oords,\x20vec')+('4\x20cameraPa'+'rams,\x20floa'+'t\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20samplePoi'+'nts[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x20\x20\x20\x20fl'+'oat\x20noise\x20'+'=\x20noise(\x20g'+'l_FragCoor'+'d.xy\x20)\x20*\x202'+'.0\x20*\x20PI;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20r\x20=\x20pcs'+'sSphereSam'+'ples[i];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sam'+'plePoints['+'i]\x20=\x20vogel'+'Sphere(i,\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT),\x20nois'+'e,\x20r);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'orm\x20=\x20norm'+'alize(ligh'+'tDir);\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20averageB'+'locker\x20=\x20P'+'CSSCubeBlo'+'ckerDistan'+'ce(shadowM'+'ap,\x20lightD'+'irNorm,\x20sa'+'mplePoints'+',\x20receiver'+'Depth,\x20sha'+'dowSearchA'+'rea);\x0a\x20\x20\x20\x20'+'if\x20(averag'+'eBlocker\x20='+'=\x20-1.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20fi'+'lterRadius'+'\x20=\x20((recei'+'verDepth\x20-'+'\x20averageBl'+'ocker)\x20/\x20a'+'verageBloc'+'ker)\x20*\x20sha'+'dowSearchA'+'rea;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20for\x20(int'+'\x20i\x20=\x200;\x20i\x20'+'<\x20PCSS_SAM'+'PLE_COUNT;'+'\x20i++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20offset\x20'+'=\x20samplePo'+'ints[i]\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sampleDir'+'\x20=\x20lightDi'+'rNorm\x20+\x20of'+'fset;\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleDir\x20=\x20'+'normalize('+'sampleDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depth\x20=\x20t'+'extureCube'+'Lod(shadow'+'Map,\x20sampl'+'eDir,\x200.0)'+'.r;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'ow\x20+=\x20step'+'(receiverD'+'epth,\x20dept'+'h);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20s'+'hadow\x20/\x20fl'+'oat(PCSS_S'+'AMPLE_COUN'+'T);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0afloat\x20g'+'etShadowOm'+'niPCSS(sam'+'plerCube\x20s'+'hadowMap,\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'4\x20cameraPa'+'rams,\x20vec2'+'\x20shadowSea'+'rchArea,\x20v'+'ec3\x20lightD'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SCube(shad'+'owMap,\x20sha'+'dowParams,'+'\x20shadowCoo'+'rd,\x20camera'+'Params,\x20sh'+'adowSearch'+'Area.x,\x20li'+'ghtDir);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'float\x20getS'+'hadowSpotP'+'CSS(TEXTUR'+'E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c4\x20cameraP'+'arams,\x20vec'+'2\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20return\x20PC'+'SS(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20cameraPar'+'ams,\x20shado'+'wSearchAre'+'a);\x0a}\x0a\x0a'),S2='\x0a\x0ahighp\x20fl'+'oat\x20fractS'+'inRand(con'+'st\x20in\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x20\x20\x20'+'\x20const\x20hig'+'hp\x20float\x20a'+'\x20=\x2012.9898'+',\x20b\x20=\x2078.2'+'33,\x20c\x20=\x2043'+'758.5453;\x0a'+'\x20\x20\x20\x20highp\x20'+'float\x20dt\x20='+'\x20dot(uv.xy'+',\x20vec2(a,\x20'+'b)),\x20sn\x20=\x20'+'mod(dt,\x20PI'+');\x0a\x20\x20\x20\x20ret'+'urn\x20fract('+'sin(sn)\x20*\x20'+'c);\x0a}\x0a\x0a//\x20'+'struct\x20to\x20'+'hold\x20preco'+'mputed\x20con'+'stants\x20and'+'\x20current\x20s'+'tate\x0astruc'+'t\x20VogelDis'+'kData\x20{\x0a\x20\x20'+'\x20\x20float\x20in'+'vNumSample'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20initial'+'Angle;\x0a\x20\x20\x20'+'\x20float\x20cur'+'rentPointI'+'d;\x0a};\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'void\x20prepa'+'reDiskCons'+'tants(out\x20'+'VogelDiskD'+'ata\x20data,\x20'+'int\x20sample'+'Count,\x20flo'+'at\x20randomS'+'eed)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20pi2\x20=\x206'+'.283185307'+'18;\x0a\x20\x20\x20\x20da'+'ta.invNumS'+'amples\x20=\x201'+'.0\x20/\x20float'+'(sampleCou'+'nt);\x0a\x20\x20\x20\x20d'+'ata.initia'+'lAngle\x20=\x20r'+'andomSeed\x20'+'*\x20pi2;\x0a\x20\x20\x20'+'\x20data.curr'+'entPointId'+'\x20=\x200.0;\x0a}\x0a'+'\x0a\x0avec2\x20gen'+'erateDiskS'+'ample(inou'+'t\x20VogelDis'+'kData\x20data'+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'GOLDEN_ANG'+'LE\x20=\x202.399'+'963;\x0a\x20\x20\x20\x20f'+'loat\x20r\x20=\x20s'+'qrt((data.'+'currentPoi'+'ntId\x20+\x200.5'+')\x20*\x20data.i'+'nvNumSampl'+'es);\x0a\x20\x20\x20\x20f'+'loat\x20theta'+'\x20=\x20data.cu'+'rrentPoint'+'Id\x20*\x20GOLDE'+'N_ANGLE\x20+\x20'+'data.initi'+'alAngle;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20o'+'ffset\x20=\x20ve'+('c2(cos(the'+'ta),\x20sin(t'+'heta))\x20*\x20p'+'ow(r,\x201.33'+');\x0a\x0a\x20\x20\x20\x20da'+'ta.current'+'PointId\x20+='+'\x201.0;\x0a\x20\x20\x20\x20'+'return\x20off'+'set;\x0a}\x0a\x0avo'+'id\x20PCSSFin'+'dBlocker(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20out\x20'+'float\x20avgB'+'lockerDept'+'h,\x20out\x20int'+'\x20numBlocke'+'rs,\x0a\x20\x20\x20\x20ve'+'c2\x20shadowC'+'oords,\x20flo'+'at\x20z,\x20int\x20'+'shadowBloc'+'kerSamples'+',\x20float\x20pe'+'numbraSize'+',\x20float\x20in'+'vShadowMap'+'Size,\x20floa'+'t\x20randomSe'+'ed)\x20{\x0a\x0a\x20\x20\x20'+'\x20VogelDisk'+'Data\x20diskD'+'ata;\x0a\x20\x20\x20\x20p'+'repareDisk'+'Constants('+'diskData,\x20'+'shadowBloc'+'kerSamples'+',\x20randomSe'+'ed);\x0a\x0a\x20\x20\x20\x20'+'float\x20sear'+'chWidth\x20=\x20'+'penumbraSi'+'ze\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x20\x20\x20\x20flo'+'at\x20blocker'+'Sum\x20=\x200.0;'+'\x0a\x20\x20\x20\x20numBl'+'ockers\x20=\x200'+';\x0a\x0a\x20\x20\x20\x20for'+'(\x20int\x20i\x20=\x20'+'0;\x20i\x20<\x20sha'+'dowBlocker'+'Samples;\x20+'+'+i\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'diskUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20sampleUV'+'\x20=\x20shadowC'+'oords\x20+\x20di'+'skUV\x20*\x20sea'+'rchWidth;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'MapDepth\x20='+'\x20texture2D'+'Lod(shadow'+'Map,\x20sampl'+'eUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(\x20shad'+'owMapDepth'+'\x20<\x20z\x20)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20blockerSu'+'m\x20+=\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers++;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20av'+'gBlockerDe'+'pth\x20=\x20bloc'+'kerSum\x20/\x20f'+'loat(numBl'+'ockers);\x0a}'+'\x0a\x0afloat\x20PC'+'SSFilter(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20uv,\x20float')+('\x20receiverD'+'epth,\x20int\x20'+'shadowSamp'+'les,\x20float'+'\x20filterRad'+'ius,\x20float'+'\x20randomSee'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'VogelDiskD'+'ata\x20diskDa'+'ta;\x0a\x20\x20\x20\x20pr'+'epareDiskC'+'onstants(d'+'iskData,\x20s'+'hadowSampl'+'es,\x20random'+'Seed);\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20shadowS'+'amples;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20of'+'fsetUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x20text'+'ure2DLod(s'+'hadowMap,\x20'+'uv\x20+\x20offse'+'tUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sum\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20retu'+'rn\x20sum\x20/\x20f'+'loat(shado'+'wSamples);'+'\x0a}\x0a\x0afloat\x20'+'getPenumbr'+'a(float\x20db'+'locker,\x20fl'+'oat\x20drecei'+'ver,\x20float'+'\x20penumbraS'+'ize,\x20float'+'\x20penumbraF'+'alloff)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'dist\x20=\x20dre'+'ceiver\x20-\x20d'+'blocker;\x0a\x20'+'\x20\x20\x20float\x20p'+'enumbra\x20=\x20'+'1.0\x20-\x20pow('+'1.0\x20-\x20dist'+',\x20penumbra'+'Falloff);\x0a'+'\x20\x20\x20\x20return'+'\x20penumbra\x20'+'*\x20penumbra'+'Size;\x0a}\x0a\x0af'+'loat\x20PCSSD'+'irectional'+'(TEXTURE_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oords,\x20vec'+'4\x20cameraPa'+'rams,\x20vec4'+'\x20softShado'+'wParams)\x20{'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20receiver'+'Depth\x20=\x20sh'+'adowCoords'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20random'+'Seed\x20=\x20fra'+'ctSinRand('+'gl_FragCoo'+'rd.xy);\x0a\x20\x20'+'\x20\x20int\x20shad'+'owSamples\x20'+'=\x20int(soft'+'ShadowPara'+'ms.x);\x0a\x20\x20\x20'+'\x20int\x20shado'+'wBlockerSa'+'mples\x20=\x20in'+'t(softShad')+('owParams.y'+');\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'aSize\x20=\x20so'+'ftShadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20float\x20pe'+'numbraFall'+'off\x20=\x20soft'+'ShadowPara'+'ms.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20normal'+'ized\x20inver'+'se\x20shadow\x20'+'map\x20size\x20t'+'o\x20preserve'+'\x20the\x20shado'+'w\x20softness'+'\x20regardles'+'s\x20of\x20the\x20s'+'hadow\x20reso'+'lution\x0a\x20\x20\x20'+'\x20int\x20shado'+'wMapSize\x20='+'\x20textureSi'+'ze(shadowM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20float\x20'+'invShadowM'+'apSize\x20=\x201'+'.0\x20/\x20float'+'(shadowMap'+'Size);\x0a\x20\x20\x20'+'\x20invShadow'+'MapSize\x20*='+'\x20float(sha'+'dowMapSize'+')\x20/\x202048.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'a;\x0a\x0a\x20\x20\x20\x20//'+'\x20contact\x20h'+'ardening\x20p'+'ath\x0a\x20\x20\x20\x20if'+'\x20(shadowBl'+'ockerSampl'+'es\x20>\x200)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20find\x20ave'+'rage\x20block'+'er\x20depth\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20avgBloc'+'kerDepth\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20int\x20nu'+'mBlockers\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20avgBlo'+'ckerDepth,'+'\x20numBlocke'+'rs,\x20shadow'+'Coords.xy,'+'\x20receiverD'+'epth,\x20shad'+'owBlockerS'+'amples,\x20pe'+'numbraSize'+',\x20invShado'+'wMapSize,\x20'+'randomSeed'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20out\x20when\x20'+'no\x20blocker'+'s\x20are\x20pres'+'ent\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(numB'+'lockers\x20<\x20'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x201.0f;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'penumbra\x20s'+'ize\x20is\x20bas'+'ed\x20on\x20the\x20'+'blocker\x20de'+'pth\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20penumbra'+'\x20=\x20getPenu'+'mbra(avgBl'+'ockerDepth'+',\x20shadowCo'+'ords.z,\x20pe'+'numbraSize'+',\x20penumbra')+('Falloff);\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'tant\x20filte'+'r\x20size,\x20no'+'\x20contact\x20h'+'ardening\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pen'+'umbra\x20=\x20pe'+'numbraSize'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20f'+'ilterRadiu'+'s\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoords'+'.xy,\x20recei'+'verDepth,\x20'+'shadowSamp'+'les,\x20filte'+'rRadius,\x20r'+'andomSeed)'+';\x0a}\x0a\x0afloat'+'\x20getShadow'+'PCSS(TEXTU'+'RE_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec4\x20camera'+'Params,\x20ve'+'c4\x20softSha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20return\x20P'+'CSSDirecti'+'onal(TEXTU'+'RE_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20cameraP'+'arams,\x20sof'+'tShadowPar'+'ams);\x0a}\x0a\x0a'),y2='\x0aattribute'+'\x20float\x20ver'+'tex_boneIn'+'dices;\x0a\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20texture_'+'poseMap;\x0a\x0a'+'mat4\x20getBo'+'neMatrix(c'+'onst\x20in\x20fl'+'oat\x20indexF'+'loat)\x20{\x0a\x0a\x20'+'\x20\x20\x20int\x20wid'+'th\x20=\x20textu'+'reSize(tex'+'ture_poseM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20int\x20in'+'dex\x20=\x20int('+'indexFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x20\x20\x20\x20int'+'\x20iy\x20=\x20inde'+'x\x20/\x20width;'+'\x0a\x20\x20\x20\x20int\x20i'+'x\x20=\x20index\x20'+'%\x20width;\x0a\x0a'+'\x20\x20\x20\x20//\x20rea'+'d\x20elements'+'\x20of\x204x3\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20v1\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x200,'+'\x20iy),\x200);\x0a'+'\x20\x20\x20\x20vec4\x20v'+'2\x20=\x20texelF'+'etch(textu'+'re_poseMap'+',\x20ivec2(ix'+'\x20+\x201,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20v'+'ec4\x20v3\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x202,'+'\x20iy),\x200);\x0a'+'\x0a\x20\x20\x20\x20//\x20tr'+'anspose\x20to'+'\x204x4\x20matri'+'x\x0a\x20\x20\x20\x20retu'+'rn\x20mat4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'x,\x20v2.x,\x20v'+'3.x,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.y'+',\x20v2.y,\x20v3'+'.y,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.z,'+'\x20v2.z,\x20v3.'+'z,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.w,\x20'+'v2.w,\x20v3.w'+',\x201\x0a\x20\x20\x20\x20);'+'\x0a}\x0a',v2='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_boneWe'+'ights;\x0aatt'+'ribute\x20vec'+'4\x20vertex_b'+'oneIndices'+';\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20tex'+'ture_poseM'+'ap;\x0a\x0avoid\x20'+'getBoneMat'+'rix(const\x20'+'in\x20int\x20wid'+'th,\x20const\x20'+'in\x20int\x20ind'+'ex,\x20out\x20ve'+'c4\x20v1,\x20out'+'\x20vec4\x20v2,\x20'+'out\x20vec4\x20v'+'3)\x20{\x0a\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20in'+'dex\x20/\x20widt'+'h;\x0a\x20\x20\x20\x20int'+'\x20u\x20=\x20index'+'\x20%\x20width;\x0a'+'\x0a\x20\x20\x20\x20v1\x20=\x20'+'texelFetch'+'(texture_p'+'oseMap,\x20iv'+'ec2(u\x20+\x200,'+'\x20v),\x200);\x0a\x20'+'\x20\x20\x20v2\x20=\x20te'+'xelFetch(t'+'exture_pos'+'eMap,\x20ivec'+'2(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20v3\x20=\x20texe'+'lFetch(tex'+'ture_poseM'+'ap,\x20ivec2('+'u\x20+\x202,\x20v),'+'\x200);\x0a}\x0a\x0ama'+'t4\x20getSkin'+'Matrix(con'+'st\x20in\x20vec4'+'\x20indicesFl'+'oat,\x20const'+'\x20in\x20vec4\x20w'+'eights)\x20{\x0a'+'\x0a\x20\x20\x20\x20int\x20w'+'idth\x20=\x20tex'+'tureSize(t'+'exture_pos'+'eMap,\x200).x'+';\x0a\x20\x20\x20\x20ivec'+'4\x20indices\x20'+'=\x20ivec4(in'+'dicesFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20get\x204\x20bon'+'e\x20matrices'+'\x0a\x20\x20\x20\x20vec4\x20'+'a1,\x20a2,\x20a3'+';\x0a\x20\x20\x20\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.x,\x20a1'+',\x20a2,\x20a3);'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20b1,\x20b2,\x20b'+'3;\x0a\x20\x20\x20\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y,\x20b'+'1,\x20b2,\x20b3)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20c1,\x20c2,\x20'+'c3;\x0a\x20\x20\x20\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.z,\x20'+'c1,\x20c2,\x20c3'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20d1,\x20d2,'+'\x20d3;\x0a\x20\x20\x20\x20g'+'etBoneMatr'+'ix(width,\x20'+'indices.w,'+'\x20d1,\x20d2,\x20d'+'3);\x0a\x0a\x20\x20\x20\x20/'+'/\x20multiply'+'\x20them\x20by\x20w'+'eights\x20and'+'\x20add\x20up\x20to'+'\x20get\x20final'+'\x204x3\x20matri'+('x\x0a\x20\x20\x20\x20vec4'+'\x20v1\x20=\x20a1\x20*'+'\x20weights.x'+'\x20+\x20b1\x20*\x20we'+'ights.y\x20+\x20'+'c1\x20*\x20weigh'+'ts.z\x20+\x20d1\x20'+'*\x20weights.'+'w;\x0a\x20\x20\x20\x20vec'+'4\x20v2\x20=\x20a2\x20'+'*\x20weights.'+'x\x20+\x20b2\x20*\x20w'+'eights.y\x20+'+'\x20c2\x20*\x20weig'+'hts.z\x20+\x20d2'+'\x20*\x20weights'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20v3\x20=\x20a3'+'\x20*\x20weights'+'.x\x20+\x20b3\x20*\x20'+'weights.y\x20'+'+\x20c3\x20*\x20wei'+'ghts.z\x20+\x20d'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'//\x20add\x20up\x20'+'weights\x0a\x20\x20'+'\x20\x20float\x20on'+'e\x20=\x20dot(we'+'ights,\x20vec'+'4(1.0));\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.x'+',\x20v2.x,\x20v3'+'.x,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.y,'+'\x20v2.y,\x20v3.'+'y,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.z,\x20'+'v2.z,\x20v3.z'+',\x200,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20v1.w,\x20v'+'2.w,\x20v3.w,'+'\x20one\x0a\x20\x20\x20\x20)'+';\x0a}\x0a'),x2='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20float\x20v'+'LinearDept'+'h;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22floatAsUi'+'ntPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec3\x20vView'+'Dir;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20skyboxH'+'ighlightMu'+'ltiplier;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SKY_CUBE'+'MAP\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20texture'+'_cubeMap;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SKYM'+'ESH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec3\x20v'+'WorldPos;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20project'+'edSkydomeC'+'enter;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#el'+'se\x20//\x20env-'+'atlas\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22spher'+'icalPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22envA'+'tlasPS\x22\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_envAtla'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mipLe'+'vel;\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20linear\x20d'+'epth\x20durin'+'g\x20prepass\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20flo'+'at2vec4(vL'+'inearDepth'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20SK'+'Y_CUBEMAP\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SKYMES'+'H\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+('\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envDir\x20=\x20n'+'ormalize(v'+'WorldPos\x20-'+'\x20projected'+'SkydomeCen'+'ter);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20env'+'Dir\x20*\x20cube'+'MapRotatio'+'nMatrix;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20di'+'r\x20=\x20vViewD'+'ir;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir.x'+'\x20*=\x20-1.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20linear\x20=\x20'+'{SKYBOX_DE'+'CODE_FNC}('+'textureCub'+'e(texture_'+'cubeMap,\x20d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x20//\x20en'+'v-atlas\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20vVie'+'wDir\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20toSph'+'ericalUv(n'+'ormalize(d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20mipLev'+'el)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20our\x20HDR'+'\x20encodes\x20v'+'alues\x20up\x20t'+'o\x2064,\x20so\x20a'+'llow\x20extra'+'\x20brightnes'+'s\x20for\x20the\x20'+'clipped\x20va'+'lues\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(any(great'+'erThanEqua'+'l(linear,\x20'+'vec3(64.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20skyboxHi'+'ghlightMul'+'tiplier;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(toneM'+'ap(process'+'Environmen'+'t(linear))'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20}'+'\x0a'),T2='\x0aattribute'+'\x20vec4\x20aPos'+'ition;\x0a\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tionSkybox'+';\x0auniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x0av'+'arying\x20vec'+'3\x20vViewDir'+';\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20//\x20'+'when\x20skydo'+'me\x20renders'+'\x20depth\x20dur'+'ing\x20prepas'+'s,\x20generat'+'e\x20linear\x20d'+'epth\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20vLinear'+'Depth;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20SKYMESH\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec3\x20vW'+'orldPos;\x0a#'+'endif\x0a\x0avoi'+'d\x20main(voi'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'mat4\x20view\x20'+'=\x20matrix_v'+'iew;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20SKY'+'MESH\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec4\x20w'+'orldPos\x20=\x20'+'matrix_mod'+'el\x20*\x20aPosi'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vWorld'+'Pos\x20=\x20worl'+'dPos.xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20'+'=\x20matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20PREPASS'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20linear\x20de'+'pth\x20from\x20t'+'he\x20worldPo'+'sition,\x20se'+'e\x20getLinea'+'rDepth\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vWorl'+'dPos,\x201.0)'+').z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'view[3][0]'+'\x20=\x20view[3]'+'[1]\x20=\x20view'+'[3][2]\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20matr'+'ix_project'+'ionSkybox\x20'+'*\x20(view\x20*\x20'+'aPosition)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vViewDir\x20='+'\x20aPosition'+'.xyz\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20//\x20for\x20in'+'finite\x20sky'+'box,\x20use\x20n'+'egative\x20gl'+'_Position.'+'w\x20to\x20get\x20p'+'ositive\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vLinear'+'Depth\x20=\x20-g'+'l_Position'+'.w;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20Fo'+'rce\x20skybox'+'\x20to\x20far\x20Z,'+'\x20regardles'+'s\x20of\x20the\x20c'+'lip\x20planes'+'\x20on\x20the\x20ca'+'mera\x0a\x20\x20\x20\x20/'+'/\x20Subtract'+'\x20a\x20tiny\x20fu'+'dge\x20factor'+'\x20to\x20ensure'+'\x20floating\x20'+'point\x20erro'+'rs\x20don\x27t\x0a\x20'+'\x20\x20\x20//\x20stil'+'l\x20push\x20pix'+'els\x20beyond'+'\x20far\x20Z.\x20Se'+'e:\x0a\x20\x20\x20\x20//\x20'+'https://co'+'mmunity.kh'+'ronos.org/'+'t/skybox-p'+'roblem/618'+'57\x0a\x0a\x20\x20\x20\x20gl'+'_Position.'+'z\x20=\x20gl_Pos'+'ition.w\x20-\x20'+'1.0e-7;\x0a}\x0a'),w2='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0auniform\x20v'+'ec3\x20materi'+'al_specula'+'r;\x0a#endif\x0a'+'\x0avoid\x20getS'+'pecularity'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20specul'+'arColor\x20=\x20'+'vec3(1,1,1'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20specularC'+'olor\x20*=\x20ma'+'terial_spe'+'cular;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'AR_TEXTURE'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_SPECULAR_'+'TEXTURE_NA'+'ME},\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20textureB'+'ias)).{STD'+'_SPECULAR_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SPECU'+'LAR_VERTEX'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_S'+'PECULAR_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20spe'+'cularColor'+';\x0a}\x0a',E2='\x0a//\x20equire'+'ctangular\x20'+'helper\x20fun'+'ctions\x0avec'+'2\x20toSpheri'+'cal(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(dir.xz\x20='+'=\x20vec2(0.0'+')\x20?\x200.0\x20:\x20'+'atan(dir.x'+',\x20dir.z),\x20'+'asin(dir.y'+'));\x0a}\x0a\x0avec'+'2\x20toSpheri'+'calUv(vec3'+'\x20dir)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PI\x20=\x203'+'.141592653'+'589793;\x0a\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20toSpheri'+'cal(dir)\x20/'+'\x20vec2(PI\x20*'+'\x202.0,\x20PI)\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+';\x0a}\x0a',b2='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_specula'+'rityFactor'+';\x0a#endif\x0a\x0a'+'void\x20getSp'+'ecularityF'+'actor()\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'specularit'+'yFactor\x20=\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULARI'+'TYFACTOR_C'+'ONSTANT\x0a\x20\x20'+'\x20\x20specular'+'ityFactor\x20'+'*=\x20materia'+'l_specular'+'ityFactor;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE\x0a\x20\x20\x20\x20sp'+'ecularityF'+'actor\x20*=\x20t'+'exture2DBi'+'as({STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE_NAME},'+'\x20{STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_VERT'+'EX\x0a\x20\x20\x20\x20spe'+'cularityFa'+'ctor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SPECU'+'LARITYFACT'+'OR_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dSp'+'ecularityF'+'actor\x20=\x20sp'+'ecularityF'+'actor;\x0a}\x0a',A2='\x0afloat\x20get'+'SpotEffect'+'(vec3\x20ligh'+'tSpotDir,\x20'+'float\x20ligh'+'tInnerCone'+'Angle,\x20flo'+'at\x20lightOu'+'terConeAng'+'le,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20cosAn'+'gle\x20=\x20dot('+'lightDirNo'+'rm,\x20lightS'+'potDir);\x0a\x20'+'\x20\x20\x20return\x20'+'smoothstep'+'(lightOute'+'rConeAngle'+',\x20lightInn'+'erConeAngl'+'e,\x20cosAngl'+'e);\x0a}\x0a',C2='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2(vUv0.'+'x,\x201.0\x20-\x20v'+'Uv0.y);\x0a',P2='\x0a\x20\x20\x20\x20vec2\x20'+'tileMask\x20='+'\x20step(vMas'+'k,\x20vec2(0.'+'99999));\x0a\x20'+'\x20\x20\x20vec2\x20ti'+'leSize\x20=\x200'+'.5\x20*\x20(inne'+'rOffset.xy'+'\x20+\x20innerOf'+'fset.zw);\x0a'+'\x20\x20\x20\x20vec2\x20t'+'ileScale\x20='+'\x20vec2(1.0)'+'\x20/\x20(vec2(1'+'.0)\x20-\x20tile'+'Size);\x0a\x20\x20\x20'+'\x20vec2\x20clam'+'pedUv\x20=\x20mi'+'x(innerOff'+'set.xy\x20*\x200'+'.5,\x20vec2(1'+'.0)\x20-\x20inne'+'rOffset.zw'+'\x20*\x200.5,\x20fr'+'act((vTile'+'dUv\x20-\x20tile'+'Size)\x20*\x20ti'+'leScale));'+'\x0a\x20\x20\x20\x20clamp'+'edUv\x20=\x20cla'+'mpedUv\x20*\x20a'+'tlasRect.z'+'w\x20+\x20atlasR'+'ect.xy;\x0a\x20\x20'+'\x20\x20nineSlic'+'edUv\x20=\x20vUv'+'0\x20*\x20tileMa'+'sk\x20+\x20clamp'+'edUv\x20*\x20(ve'+'c2(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x20\x20\x20\x20\x0a',M2='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20float\x20dAl'+'pha\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_o'+'pacityMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20global'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dAlbe'+'do;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20dNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dSpeculari'+'ty\x20=\x20vec3('+'0.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dGlossines'+'s\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20dT'+'ransmissio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dThicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SC'+'ENE_COLOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'uSceneColo'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SCREEN_SI'+'ZE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20uS'+'creenSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_TRAN'+'SFORMS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20matrix_v'+'iewProject'+'ion;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_mod'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20parallax\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20dUv'+'Offset;\x0a\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_he'+'ightMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20diffu'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20tex'+'ture_diffu'+'seMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_diffuseDe'+'tailMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_normal'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'NORMALDETA'+'IL_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_no'+'rmalDetail'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20refracti'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_THICKNES'+'S_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_thi'+'cknessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_REFRA'+'CTION_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_refractio'+'nMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20iridesc'+'ence\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_IRIDES'+'CENCE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20dIride'+'scence;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dIri'+'descenceTh')+('ickness;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_irides'+'cenceThick'+'nessMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_iridesce'+'nceMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20ccNorm'+'alW;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dAnisotro'+'py;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20&\x20glossin'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_OR_REFLE'+'CTION\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20sheen\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20sGloss'+'iness;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SHEEN'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_sheenM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_sh'+'eenGlossMa')+('p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20metalness'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dMet'+'alness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dIor;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_met'+'alnessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20dSpecula'+'rityFactor'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_speculari'+'tyFactorMa'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20specular\x20'+'color\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_specula'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20gloss\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_gl'+'ossMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dAo'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_aoM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_aoDeta'+'ilMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dEmis'+'sion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_EMISS'+'IVE_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_e'+'missiveMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'learcoat\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'EARCOAT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatG'+'lossMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'NORMAL_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_clea'+'rCoatNorma'+'lMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'anisotropy'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde')+('f\x20STD_ANIS'+'OTROPY_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_anis'+'otropyMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dLightma'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_LIGH'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_lightMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20front\x20'+'end\x20output'+'s\x20to\x20lit\x20s'+'hader\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'litShaderC'+'orePS\x22\x0a'),D2='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20voi'+'d\x20getSpecu'+'larity()\x20{'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20vec'+'3(1);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20g'+'loss\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22glo'+'ssPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20ao\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'aoPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'emissivePS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO')+('AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22clear'+'CoatPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatG'+'lossPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatN'+'ormalPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20anis'+'otropy\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ani'+'sotropyPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(STD'+'_LIGHTMAP)'+'\x20||\x20define'+'d(STD_LIGH'+'T_VERTEX_C'+'OLOR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20void\x20eval'+'uateFronte'+'nd()\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIT'+'_BLEND_TYP'+'E\x20!=\x20NONE\x20'+'||\x20defined'+'(LIT_ALPHA'+'_TEST)\x20||\x20'+'defined(LI'+'T_ALPHA_TO'+'_COVERAGE)'+'\x20||\x20STD_OP'+'ACITY_DITH'+'ER\x20!=\x20NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getOpac'+'ity();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_ALPH'+'A_TEST)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alphaT'+'est(dAlpha'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(dAlp'+'ha,\x200.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'opacity\x20=\x20'+'dAlpha;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20pa'+'rallax\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'HEIGHT_MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Parallax()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Albedo();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20d'+'Albedo;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20normal'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getNorm'+'al();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'worldNorma'+'l\x20=\x20dNorma'+'lW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_REFRACT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getRefract'+'ion();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_transmiss'+'ion\x20=\x20dTra'+'nsmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tThickness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_th'+'ickness\x20=\x20'+'dThickness'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_d'+'ispersion\x20'+'=\x20material'+'_dispersio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20iridescen'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_IRID'+'ESCENCE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getIri'+'descence()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tIridescen'+'ceThicknes'+'s();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_i'+'ridescence'+'_intensity'+'\x20=\x20dIrides'+'cence;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_iridescen'+'ce_thickne'+'ss\x20=\x20dIrid'+'escenceThi'+'ckness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('//\x20specula'+'rity\x20&\x20glo'+'ssiness\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR_'+'OR_REFLECT'+'ION\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getShee'+'n();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_sheen_s'+'pecularity'+'\x20=\x20sSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'SheenGloss'+'iness();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_she'+'en_gloss\x20='+'\x20sGlossine'+'ss;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20met'+'alness\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getMet'+'alness();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_me'+'talness\x20=\x20'+'dMetalness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getIor()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'ior\x20=\x20dIor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20specu'+'larity\x20fac'+'tor\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rityFactor'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ityFactor\x20'+'=\x20dSpecula'+'rityFactor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20gloss'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rity();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ity\x20=\x20dSpe'+'cularity;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss\x20'+'=\x20dGlossin')+('ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getAO'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ao'+'\x20=\x20dAo;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getEmi'+'ssion();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_e'+'mission\x20=\x20'+'dEmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cle'+'arcoat\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getC'+'learCoat()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tClearCoat'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getClearCo'+'atNormal()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20=\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_g'+'loss\x20=\x20ccG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_clear'+'coat_world'+'Normal\x20=\x20c'+'cNormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20aniso'+'tropy\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x20&&\x20def'+'ined(LIT_L'+'IGHTING)\x20&'+'&\x20defined('+'LIT_GGX_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getAni'+'sotropy();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20ligh'+'tmap\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(S'+'TD_LIGHTMA'+'P)\x20||\x20defi'+'ned(STD_LI'+'GHT_VERTEX'+'_COLOR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htMap();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_lightma'+'p\x20=\x20dLight'+'map;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_lightm'+'apDir\x20=\x20dL'+'ightmapDir'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20}\x0a'),I2='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20tbnBasis'+';\x0a#endif\x0a\x0a'+'void\x20getTB'+'N(vec3\x20tan'+'gent,\x20vec3'+'\x20binormal,'+'\x20vec3\x20norm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TB'+'N_TANGENTS'+'\x20//\x20tangen'+'ts\x20/\x20binor'+'mals\x20based'+'\x20TBN\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(tang'+'ent),\x20norm'+'alize(bino'+'rmal),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(TBN_'+'DERIVATIVE'+'S)\x20//\x20deri'+'vatives\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20{li'+'ghtingUv};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20get\x20edg'+'e\x20vectors\x20'+'of\x20the\x20pix'+'el\x20triangl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dp1\x20='+'\x20dFdx(\x20vPo'+'sitionW\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dp2\x20=\x20'+'dFdy(\x20vPos'+'itionW\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20duv1\x20=\x20'+'dFdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20duv2\x20'+'=\x20dFdy(\x20uv'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20solv'+'e\x20the\x20line'+'ar\x20system\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20dp2perp'+'\x20=\x20cross(\x20'+'dp2,\x20norma'+'l\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dp'+'1perp\x20=\x20cr'+'oss(\x20norma'+'l,\x20dp1\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20T\x20=\x20dp2'+'perp\x20*\x20duv'+'1.x\x20+\x20dp1p'+'erp\x20*\x20duv2'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20B\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+'dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+('ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'nom\x20=\x20max('+'\x20dot(T,T),'+'\x20dot(B,B)\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20inv'+'max\x20=\x20(den'+'om\x20==\x200.0)'+'\x20?\x200.0\x20:\x20t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3(T\x20*\x20i'+'nvmax,\x20-B\x20'+'*\x20invmax,\x20'+'normal\x20);\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20object'+'\x20space\x20TBN'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20B\x20=\x20c'+'ross(norma'+'l,\x20vObject'+'SpaceUpW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20T\x20=\x20cr'+'oss(normal'+',\x20B);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(d'+'ot(B,B)==0'+'.0)\x20//\x20dea'+'l\x20with\x20cas'+'e\x20when\x20vOb'+'jectSpaceU'+'pW\x20normal\x20'+'are\x20parall'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20major=max'+'(max(norma'+'l.x,\x20norma'+'l.y),\x20norm'+'al.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(normal'+'.x\x20==\x20majo'+'r)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20B\x20=\x20cro'+'ss(normal,'+'\x20vec3(0,1,'+'0));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20T\x20=\x20cross'+'(normal,\x20B'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20e'+'lse\x20if\x20(no'+'rmal.y\x20==\x20'+'major)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20B\x20='+'\x20cross(nor'+'mal,\x20vec3('+'0,0,1));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20if'+'\x20(normal.z'+'\x20==\x20major)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20B\x20=\x20cross'+'(normal,\x20v'+'ec3(1,0,0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(T),\x20'+'normalize('+'B),\x20normal'+'ize(normal'+'));\x0a\x0a\x20\x20\x20\x20#')+'endif\x0a}\x0a',L2='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_thickn'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tThickness'+'()\x20{\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_THICKNE'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dThi'+'ckness\x20*=\x20'+'material_t'+'hickness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_THI'+'CKNESS_TEX'+'TURE\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20texture'+'2DBias({ST'+'D_THICKNES'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_THICKNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_TH'+'ICKNESS_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',R2='\x0a\x0a#if\x20(TON'+'EMAP\x20==\x20NO'+'NE)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22to'+'nemappingN'+'onePS\x22\x0a#el'+'if\x20TONEMAP'+'\x20==\x20FILMIC'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingFilm'+'icPS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20LINEAR\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingLinea'+'rPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20HEJL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngHejlPS\x22\x0a'+'#elif\x20TONE'+'MAP\x20==\x20ACE'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22tone'+'mappingAce'+'sPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20ACES2\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingAces2PS'+'\x22\x0a#elif\x20TO'+'NEMAP\x20==\x20N'+'EUTRAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngNeutralP'+'S\x22\x0a#endif\x0a'+'\x0a',O2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20tA\x20=\x202.'+'51;\x0a\x20\x20\x20\x20fl'+'oat\x20tB\x20=\x200'+'.03;\x0a\x20\x20\x20\x20f'+'loat\x20tC\x20=\x20'+'2.43;\x0a\x20\x20\x20\x20'+'float\x20tD\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20float\x20tE\x20'+'=\x200.14;\x0a\x20\x20'+'\x20\x20vec3\x20x\x20='+'\x20color\x20*\x20e'+'xposure;\x0a\x20'+'\x20\x20\x20return\x20'+'(x*(tA*x+t'+'B))/(x*(tC'+'*x+tD)+tE)'+';\x0a}\x0a',F2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0a//\x20A'+'CES\x20approx'+'imation\x20by'+'\x20Stephen\x20H'+'ill\x0a\x0a//\x20sR'+'GB\x20=>\x20XYZ\x20'+'=>\x20D65_2_D'+'60\x20=>\x20AP1\x20'+'=>\x20RRT_SAT'+'\x0aconst\x20mat'+'3\x20ACESInpu'+'tMat\x20=\x20mat'+'3(\x0a\x20\x20\x20\x200.5'+'9719,\x200.35'+'458,\x200.048'+'23,\x0a\x20\x20\x20\x200.'+'07600,\x200.9'+'0834,\x200.01'+'566,\x0a\x20\x20\x20\x200'+'.02840,\x200.'+'13383,\x200.8'+'3777\x0a);\x0a\x0a/'+'/\x20ODT_SAT\x20'+'=>\x20XYZ\x20=>\x20'+'D60_2_D65\x20'+'=>\x20sRGB\x0aco'+'nst\x20mat3\x20A'+'CESOutputM'+'at\x20=\x20mat3('+'\x0a\x20\x20\x20\x20\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367,\x0a\x20\x20\x20\x20-'+'0.10208,\x20\x20'+'1.10813,\x20-'+'0.00605,\x0a\x20'+'\x20\x20\x20-0.0032'+'7,\x20-0.0727'+'6,\x20\x201.0760'+'2\x0a);\x0a\x0avec3'+'\x20RRTAndODT'+'Fit(vec3\x20v'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20a\x20=\x20v\x20*'+'\x20(v\x20+\x200.02'+'45786)\x20-\x200'+'.000090537'+';\x0a\x20\x20\x20\x20vec3'+'\x20b\x20=\x20v\x20*\x20('+'0.983729\x20*'+'\x20v\x20+\x200.432'+'9510)\x20+\x200.'+'238081;\x0a\x20\x20'+'\x20\x20return\x20a'+'\x20/\x20b;\x0a}\x0a\x0av'+'ec3\x20toneMa'+'p(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'color\x20*=\x20e'+'xposure\x20/\x20'+'0.6;\x0a\x20\x20\x20\x20c'+'olor\x20=\x20col'+'or\x20*\x20ACESI'+'nputMat;\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20RRT\x20and'+'\x20ODT\x0a\x20\x20\x20\x20c'+'olor\x20=\x20RRT'+'AndODTFit('+'color);\x0a\x20\x20'+'\x20\x20color\x20=\x20'+'color\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20color\x20=\x20c'+'lamp(color'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',N2='\x0aconst\x20flo'+'at\x20A\x20=\x20\x200.'+'15;\x0aconst\x20'+'float\x20B\x20=\x20'+'\x200.50;\x0acon'+'st\x20float\x20C'+'\x20=\x20\x200.10;\x0a'+'const\x20floa'+'t\x20D\x20=\x20\x200.2'+'0;\x0aconst\x20f'+'loat\x20E\x20=\x20\x20'+'0.02;\x0acons'+'t\x20float\x20F\x20'+'=\x20\x200.30;\x0ac'+'onst\x20float'+'\x20W\x20=\x20\x2011.2'+';\x0a\x0auniform'+'\x20float\x20exp'+'osure;\x0a\x0ave'+'c3\x20unchart'+'ed2Tonemap'+'(vec3\x20x)\x20{'+'\x0a\x20\x20\x20return'+'\x20((x*(A*x+'+'C*B)+D*E)/'+'(x*(A*x+B)'+'+D*F))-E/F'+';\x0a}\x0a\x0avec3\x20'+'toneMap(ve'+'c3\x20color)\x20'+'{\x0a\x20\x20\x20\x20colo'+'r\x20=\x20unchar'+'ted2Tonema'+'p(color\x20*\x20'+'exposure);'+'\x0a\x20\x20\x20\x20vec3\x20'+'whiteScale'+'\x20=\x201.0\x20/\x20u'+'ncharted2T'+'onemap(vec'+'3(W,W,W));'+'\x0a\x20\x20\x20\x20color'+'\x20=\x20color\x20*'+'\x20whiteScal'+'e;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',k2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20col'+'or\x20*=\x20expo'+'sure;\x0a\x20\x20\x20\x20'+'const\x20floa'+'t\x20\x20A\x20=\x200.2'+'2,\x20B\x20=\x200.3'+',\x20C\x20=\x20.1,\x20'+'D\x20=\x200.2,\x20E'+'\x20=\x20.01,\x20F\x20'+'=\x200.3;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20Scl\x20=\x201'+'.25;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20h\x20=\x20m'+'ax(\x20vec3(0'+'.0),\x20color'+'\x20-\x20vec3(0.'+'004)\x20);\x0a\x20\x20'+'\x20\x20return\x20('+'h*((Scl*A)'+'*h+Scl*vec'+'3(C*B,C*B,'+'C*B))+Scl*'+'vec3(D*E,D'+'*E,D*E))\x20/'+'\x20(h*(A*h+v'+'ec3(B,B,B)'+')+vec3(D*F'+',D*F,D*F))'+'\x20-\x20Scl*vec'+'3(E/F,E/F,'+'E/F);\x0a}\x0a',U2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20color\x20'+'*\x20exposure'+';\x0a}\x0a',B2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x0a\x20\x20\x20\x20co'+'lor\x20*=\x20exp'+'osure;\x0a\x0a\x20\x20'+'\x20\x20float\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20float\x20d'+'esaturatio'+'n\x20=\x200.15;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20min(c'+'olor.r,\x20mi'+'n(color.g,'+'\x20color.b))'+';\x0a\x20\x20\x20\x20floa'+'t\x20offset\x20='+'\x20x\x20<\x200.08\x20'+'?\x20x\x20-\x206.25'+'\x20*\x20x\x20*\x20x\x20:'+'\x200.04;\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20float\x20p'+'eak\x20=\x20max('+'color.r,\x20m'+'ax(color.g'+',\x20color.b)'+');\x0a\x20\x20\x20\x20if\x20'+'(peak\x20<\x20st'+'artCompres'+'sion)\x20retu'+'rn\x20color;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20d\x20=\x201.\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20float\x20ne'+'wPeak\x20=\x201.'+'\x20-\x20d\x20*\x20d\x20/'+'\x20(peak\x20+\x20d'+'\x20-\x20startCo'+'mpression)'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x20newPe'+'ak\x20/\x20peak;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20g\x20=\x201.\x20-'+'\x201.\x20/\x20(des'+'aturation\x20'+'*\x20(peak\x20-\x20'+'newPeak)\x20+'+'\x201.);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ne'+'wPeak\x20*\x20ve'+'c3(1,\x201,\x201'+'),\x20g);\x0a}\x0a',z2='\x0avec3\x20tone'+'Map(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'olor;\x0a}\x0a',V2='\x0a#ifdef\x20PI'+'XELSNAP\x0aun'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'CREENSPACE'+'\x0auniform\x20f'+'loat\x20proje'+'ctionFlipY'+';\x0a#endif\x0a\x0a'+'vec4\x20evalW'+'orldPositi'+'on(vec3\x20ve'+'rtexPositi'+'on,\x20mat4\x20m'+'odelMatrix'+')\x20{\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localP'+'os\x20=\x20getLo'+'calPositio'+'n(vertexPo'+'sition);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20NINESLICE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20outer\x20a'+'nd\x20inner\x20v'+'ertices\x20ar'+'e\x20at\x20the\x20s'+'ame\x20positi'+'on,\x20scale\x20'+'both\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s.xz\x20*=\x20ou'+'terScale;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nner\x20verti'+'ces\x20inside'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20(origina'+'l\x20vertices'+'\x20must\x20be\x20i'+'n\x20[-1;1]\x20r'+'ange)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20p'+'ositiveUni'+'tOffset\x20=\x20'+'clamp(vert'+'exPosition'+'.xz,\x20vec2('+'0.0),\x20vec2'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20negativeU'+'nitOffset\x20'+'=\x20clamp(-v'+'ertexPosit'+'ion.xz,\x20ve'+'c2(0.0),\x20v'+'ec2(1.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'ocalPos.xz'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vTiledU'+'v\x20=\x20(local'+'Pos.xz\x20-\x20o'+'uterScale\x20'+'+\x20innerOff'+'set.xy)\x20*\x20'+'-0.5\x20+\x201.0'+';\x20//\x20uv\x20=\x20'+'local\x20pos\x20'+'-\x20inner\x20co'+'rner\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20localP'+'os.xz\x20*=\x20-'+'0.5;\x20//\x20mo'+'ve\x20from\x20-1'+';1\x20to\x20-0.5'+';0.5\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s\x20=\x20localP'+'os.xzy;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20vec4\x20p'+'osW\x20=\x20mode'+'lMatrix\x20*\x20'+'vec4(local'+('Pos,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREENS'+'PACE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20posW.zw'+'\x20=\x20vec2(0.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20posW;\x0a}\x0a'+'\x0avec4\x20getP'+'osition()\x20'+'{\x0a\x0a\x20\x20\x20\x20dMo'+'delMatrix\x20'+'=\x20getModel'+'Matrix();\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'posW\x20=\x20eva'+'lWorldPosi'+'tion(verte'+'x_position'+'.xyz,\x20dMod'+'elMatrix);'+'\x0a\x20\x20\x20\x20dPosi'+'tionW\x20=\x20po'+'sW.xyz;\x0a\x0a\x20'+'\x20\x20\x20vec4\x20sc'+'reenPos;\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV1LAYOUT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sc'+'reenPos\x20=\x20'+'vec4(verte'+'x_texCoord'+'1.xy\x20*\x202.0'+'\x20-\x201.0,\x200.'+'5,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20WEBGPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20SCREENSP'+'ACE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos\x20=\x20po'+'sW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.y\x20*='+'\x20projectio'+'nFlipY;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20screen'+'Pos\x20=\x20matr'+'ix_viewPro'+'jection\x20*\x20'+'posW;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PIX'+'ELSNAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20snap\x20ver'+'tex\x20to\x20a\x20p'+'ixel\x20bound'+'ary\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x200.5'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.xy\x20*=\x20uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'ScreenSize'+'.zw;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x202.'+'0)\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20sc'+'reenPos;\x0a}')+('\x0a\x0avec3\x20get'+'WorldPosit'+'ion()\x20{\x0a\x20\x20'+'\x20\x20return\x20d'+'PositionW;'+'\x0a}\x0a'),G2='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_positi'+'on;\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifdef\x20MORP'+'HING\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20morph_te'+'x_params;\x0a'+'\x20\x20\x20\x20attrib'+'ute\x20uint\x20m'+'orph_verte'+'x_id;\x0a\x0a\x20\x20\x20'+'\x20ivec2\x20get'+'TextureMor'+'phCoords()'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20turn\x20'+'morph_vert'+'ex_id\x20into'+'\x20int\x20grid\x20'+'coordinate'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ivec2\x20text'+'ureSize\x20=\x20'+'ivec2(morp'+'h_tex_para'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20mor'+'phGridV\x20=\x20'+'int(morph_'+'vertex_id)'+'\x20/\x20texture'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20int\x20'+'morphGridU'+'\x20=\x20int(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20flipY\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20morphGrid'+'V\x20=\x20textur'+'eSize.y\x20-\x20'+'morphGridV'+'\x20-\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20ivec'+'2(morphGri'+'dU,\x20morphG'+'ridV);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_POSITI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_INT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec3\x20aabb'+'Size;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20aabbMin;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'usampler2D'+'\x20morphPosi'+'tionTex;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20highp\x20s'+'ampler2D\x20m'+'orphPositi'+'onTex;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a#ifdef\x20de'+'fined(BATC'+'H)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ski'+'nBatchVS\x22\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getBon'+'eMatrix(ve'+'rtex_boneI'+'ndices);\x0a\x20'+'\x20\x20\x20}\x0a\x0a#eli'+'f\x20defined('+'SKIN)\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x0a\x20'+'\x20\x20\x20mat4\x20ge'+'tModelMatr'+'ix()\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20get'+'SkinMatrix'+'(vertex_bo'+'neIndices,'+'\x20vertex_bo'+'neWeights)'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'elif\x20defin'+'ed(INSTANC'+'ING)\x0a\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'transformI'+'nstancingV'+'S\x22\x0a\x0a#else\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20matrix'+'_model;\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a\x0avec3\x20ge'+'tLocalPosi'+'tion(vec3\x20'+'vertexPosi'+'tion)\x20{\x0a\x0a\x20'+'\x20\x20\x20vec3\x20lo'+'calPos\x20=\x20v'+'ertexPosit'+'ion;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'morphUV\x20=\x20'+'getTexture'+'MorphCoord'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20MORPHING_'+'INT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20morphPos\x20'+'=\x20vec3(tex'+'elFetch(mo'+'rphPositio'+'nTex,\x20ivec'+'2(morphUV)'+',\x200).xyz)\x20'+'/\x2065535.0\x20'+'*\x20aabbSize'+'\x20+\x20aabbMin'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphPo'+'s\x20=\x20texelF'+'etch(morph'+'PositionTe'+'x,\x20ivec2(m'+'orphUV),\x200'+').xyz;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20localPos\x20'+'+=\x20morphPo'+'s;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20loc'+'alPos;\x0a}\x0a\x0a'),H2='\x0a\x0aattribut'+'e\x20vec4\x20ins'+'tance_line'+'1;\x0aattribu'+'te\x20vec4\x20in'+'stance_lin'+'e2;\x0aattrib'+'ute\x20vec4\x20i'+'nstance_li'+'ne3;\x0aattri'+'bute\x20vec4\x20'+'instance_l'+'ine4;\x0a\x0amat'+'4\x20getModel'+'Matrix()\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20mat'+'4(instance'+'_line1,\x20in'+'stance_lin'+'e2,\x20instan'+'ce_line3,\x20'+'instance_l'+'ine4);\x0a}\x0a',W2='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_refr'+'action;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getRefrac'+'tion()\x20{\x0a\x20'+'\x20\x20\x20float\x20r'+'efraction\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20ref'+'raction\x20=\x20'+'material_r'+'efraction;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_RE'+'FRACTION_T'+'EXTURE\x0a\x20\x20\x20'+'\x20refractio'+'n\x20*=\x20textu'+'re2DBias({'+'STD_REFRAC'+'TION_TEXTU'+'RE_NAME},\x20'+'{STD_REFRA'+'CTION_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_REF'+'RACTION_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_VERTEX'+'\x0a\x20\x20\x20\x20refra'+'ction\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_REFR'+'ACTION_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dTransmis'+'sion\x20=\x20ref'+'raction;\x0a}'+'\x0a',$2='\x0auniform\x20f'+'loat\x20twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0avoi'+'d\x20handleTw'+'oSidedLigh'+'ting()\x20{\x0a\x20'+'\x20\x20\x20dTBN[2]'+'\x20*=\x20gl_Fro'+'ntFacing\x20?'+'\x20twoSidedL'+'ightingNeg'+'ScaleFacto'+'r\x20:\x20-twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0a}\x0a',X2='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20vec2\x20ge'+'tUv0()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20ver'+'tex_positi'+'on.xz;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20o'+'ffset\x20inne'+'r\x20vertices'+'\x20inside\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20('+'original\x20v'+'ertices\x20mu'+'st\x20be\x20in\x20['+'-1;1]\x20rang'+'e)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2(0.'+'0),\x20vec2(1'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20n'+'egativeUni'+'tOffset\x20=\x20'+'clamp(-ver'+'tex_positi'+'on.xz,\x20vec'+'2(0.0),\x20ve'+'c2(1.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20-0.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20atlasRe'+'ct.zw\x20+\x20at'+'lasRect.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vMask\x20=\x20v'+'ertex_texC'+'oord0.xy;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20uv;\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20vec2'+'\x20getUv0()\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20ver'+'tex_texCoo'+'rd0;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a',q2='\x0avec2\x20getU'+'v1()\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'rtex_texCo'+'ord1;\x0a}\x0a',j2='\x0avUV{TRANS'+'FORM_UV_{i'+'}}_{TRANSF'+'ORM_ID_{i}'+'}\x20=\x20vec2(\x0a'+'\x20\x20\x20\x20dot(ve'+'c3(uv{TRAN'+'SFORM_UV_{'+'i}},\x201),\x20{'+'TRANSFORM_'+'NAME_{i}}0'+'),\x0a\x20\x20\x20\x20dot'+'(vec3(uv{T'+'RANSFORM_U'+'V_{i}},\x201)'+',\x20{TRANSFO'+'RM_NAME_{i'+'}}1)\x0a);\x0a',Y2='\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}0;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}1;'+'\x0a',K2='\x0avoid\x20getV'+'iewDir()\x20{'+'\x0a\x20\x20\x20\x20dView'+'DirW\x20=\x20nor'+'malize(vie'+'w_position'+'\x20-\x20vPositi'+'onW);\x0a}\x0a',Z2={'alphaTestPS':YC,'ambientPS':KC,'anisotropyPS':ZC,'aoPS':QC,'aoDiffuseOccPS':JC,'aoSpecOccPS':e1,'bakeDirLmEndPS':t1,'bakeLmEndPS':s1,'basePS':i1,'baseNineSlicedPS':r1,'baseNineSlicedTiledPS':a1,'bayerPS':n1,'blurVSMPS':o1,'clearCoatPS':l1,'clearCoatGlossPS':c1,'clearCoatNormalPS':h1,'clusteredLightCookiesPS':f1,'clusteredLightShadowsPS':u1,'clusteredLightUtilsPS':d1,'clusteredLightPS':p1,'combinePS':m1,'cookieBlit2DPS':_1,'cookieBlitCubePS':g1,'cookieBlitVS':S1,'cookiePS':y1,'cubeMapProjectPS':v1,'cubeMapRotatePS':x1,'debugOutputPS':T1,'debugProcessFrontendPS':w1,'detailModesPS':b1,'diffusePS':A1,'decodePS':E1,'emissivePS':C1,'encodePS':P1,'endPS':M1,'envAtlasPS':D1,'envProcPS':I1,'falloffInvSquaredPS':L1,'falloffLinearPS':R1,'floatAsUintPS':O1,'fogPS':F1,'fresnelSchlickPS':N1,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':k1,'gammaPS':U1,'gles3PS':Vy,'gles3VS':Gy,'glossPS':B1,'gsplatCenterVS':z1,'gsplatCornerVS':K1,'gsplatColorVS':V1,'gsplatCommonVS':G1,'gsplatCompressedDataVS':H1,'gsplatCompressedSHVS':W1,'gsplatEvalSHVS':$1,'gsplatQuatToMat3VS':X1,'gsplatSogsColorVS':q1,'gsplatSogsDataVS':j1,'gsplatSogsSHVS':Y1,'gsplatDataVS':Z1,'gsplatOutputVS':Q1,'gsplatPS':J1,'gsplatSHVS':eP,'gsplatSourceVS':tP,'gsplatVS':sP,'quadVS':iP,'immediateLinePS':rP,'immediateLineVS':aP,'iridescenceDiffractionPS':nP,'iridescencePS':oP,'iridescenceThicknessPS':lP,'iorPS':cP,'lightDeclarationPS':hP,'lightDiffuseLambertPS':dP,'lightDirPointPS':fP,'lightEvaluationPS':uP,'lightFunctionLightPS':pP,'lightFunctionShadowPS':mP,'lightingPS':_P,'lightmapAddPS':gP,'lightmapPS':SP,'lightSpecularAnisoGGXPS':yP,'lightSpecularBlinnPS':vP,'lightSheenPS':xP,'linearizeDepthPS':TP,'litForwardBackendPS':wP,'litForwardDeclarationPS':EP,'litForwardMainPS':bP,'litForwardPostCodePS':AP,'litForwardPreCodePS':CP,'litMainPS':PP,'litMainVS':MP,'litOtherMainPS':DP,'litShaderArgsPS':IP,'litShaderCorePS':LP,'litShadowMainPS':RP,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':OP,'metalnessPS':FP,'metalnessModulatePS':kP,'morphPS':UP,'morphVS':BP,'msdfPS':NP,'msdfVS':zP,'normalVS':VP,'normalCoreVS':GP,'normalMapPS':HP,'opacityPS':WP,'opacityDitherPS':$P,'outputPS':XP,'outputAlphaPS':qP,'outputTex2DPS':jP,'sheenPS':YP,'sheenGlossPS':KP,'parallaxPS':ZP,'pickPS':QP,'reflDirPS':JP,'reflDirAnisoPS':e2,'reflectionCCPS':t2,'reflectionCubePS':s2,'reflectionEnvHQPS':i2,'reflectionEnvPS':r2,'reflectionSpherePS':a2,'reflectionSheenPS':n2,'refractionCubePS':o2,'refractionDynamicPS':l2,'reprojectPS':c2,'reprojectVS':h2,'screenDepthPS':d2,'shadowCascadesPS':f2,'shadowEVSMPS':u2,'shadowPCF1PS':p2,'shadowPCF3PS':m2,'shadowPCF5PS':_2,'shadowPCSSPS':g2,'shadowSoftPS':S2,'skinBatchVS':y2,'skinVS':v2,'skyboxPS':x2,'skyboxVS':T2,'specularPS':w2,'sphericalPS':E2,'specularityFactorPS':b2,'spotPS':A2,'startNineSlicedPS':C2,'startNineSlicedTiledPS':P2,'stdDeclarationPS':M2,'stdFrontEndPS':D2,'TBNPS':I2,'thicknessPS':L2,'tonemappingPS':R2,'tonemappingAcesPS':O2,'tonemappingAces2PS':F2,'tonemappingFilmicPS':N2,'tonemappingHejlPS':k2,'tonemappingLinearPS':U2,'tonemappingNeutralPS':B2,'tonemappingNonePS':z2,'transformVS':V2,'transformCoreVS':G2,'transformInstancingVS':H2,'transmissionPS':W2,'twoSidedLightingPS':$2,'uv0VS':X2,'uv1VS':q2,'uvTransformVS':j2,'uvTransformUniformsPS':Y2,'viewDirPS':K2,'webgpuPS':Hy,'webgpuVS':Wy},Q2='\x0auniform\x20a'+'lpha_ref:\x20'+'f32;\x0a\x0afn\x20a'+'lphaTest(a'+':\x20f32)\x20{\x0a\x20'+'\x20\x20\x20if\x20(a\x20<'+'\x20uniform.a'+'lpha_ref)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',J2='\x0a\x0a#if\x20LIT_'+'AMBIENT_SO'+'URCE\x20==\x20AM'+'BIENTSH\x0a\x20\x20'+'\x20\x20uniform\x20'+'ambientSH:'+'\x20array<vec'+'3f,\x209>;\x0a#e'+'ndif\x0a\x0a#if\x20'+'LIT_AMBIEN'+'T_SOURCE\x20='+'=\x20ENVALATL'+'AS\x0a\x20\x20\x20\x20#in'+'clude\x20\x22env'+'AtlasPS\x22\x0a\x0a'+'\x20\x20\x20\x20#ifnde'+'f\x20ENV_ATLA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_en'+'vAtlas:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_envAt'+'lasSampler'+':\x20sampler;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'fn\x20addAmbi'+'ent(worldN'+'ormal:\x20vec'+'3f)\x20{\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20A'+'MBIENTSH\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20n:\x20vec3f'+'\x20=\x20cubeMap'+'Rotate(wor'+'ldNormal);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20color:\x20'+'vec3f\x20=\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[0]'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[1]\x20*\x20n.'+'x\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm.ambien'+'tSH[2]\x20*\x20n'+'.y\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form.ambie'+'ntSH[3]\x20*\x20'+'n.z\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform.ambi'+'entSH[4]\x20*'+'\x20n.x\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[5]\x20*\x20n.'+'z\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform.'+'ambientSH['+'6]\x20*\x20n.y\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform.amb'+'ientSH[7]\x20'+'*\x20(3.0\x20*\x20n'+'.z\x20*\x20n.z\x20-'+'\x201.0)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[8]'+'\x20*\x20(n.x\x20*\x20'+'n.x\x20-\x20n.y\x20'+'*\x20n.y);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20proces'+'sEnvironme'+'nt(max(col'+'or,\x20vec3f('+'0.0)));\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+('\x20ENVALATLA'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3f(-1.0,\x201'+'.0,\x201.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20mapUv'+'(toSpheric'+'alUv(dir),'+'\x20vec4f(128'+'.0,\x20256.0\x20'+'+\x20128.0,\x206'+'4.0,\x2032.0)'+'\x20/\x20atlasSi'+'ze);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20ra'+'w:\x20vec4f\x20='+'\x20textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20uv'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20linea'+'r:\x20vec3f\x20='+'\x20{ambientD'+'ecode}(raw'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20+=\x20pr'+'ocessEnvir'+'onment(lin'+'ear);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20C'+'ONSTANT\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20unifor'+'m.light_gl'+'obalAmbien'+'t;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),eM='\x0a#ifdef\x20LI'+'T_GGX_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_anis'+'otropyInte'+'nsity:\x20f32'+';\x0a\x20\x20\x20\x20unif'+'orm\x20materi'+'al_anisotr'+'opyRotatio'+'n:\x20vec2f;\x0a'+'#endif\x0a\x0afn'+'\x20getAnisot'+'ropy()\x20{\x0a\x20'+'\x20\x20\x20dAnisot'+'ropy\x20=\x200.0'+';\x0a\x20\x20\x20\x20dAni'+'sotropyRot'+'ation\x20=\x20ve'+'c2f(1.0,\x200'+'.0);\x0a\x0a#ifd'+'ef\x20LIT_GGX'+'_SPECULAR\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20=\x20un'+'iform.mate'+'rial_aniso'+'tropyInten'+'sity;\x0a\x20\x20\x20\x20'+'dAnisotrop'+'yRotation\x20'+'=\x20uniform.'+'material_a'+'nisotropyR'+'otation;\x0a#'+'endif\x0a\x0a#if'+'def\x20STD_AN'+'ISOTROPY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyTex:\x20'+'vec3f\x20=\x20te'+'xtureSampl'+'eBias({STD'+'_ANISOTROP'+'Y_TEXTURE_'+'NAME},\x20{ST'+'D_ANISOTRO'+'PY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'ANISOTROPY'+'_TEXTURE_U'+'V},\x20unifor'+'m.textureB'+'ias).rgb;\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20*=\x20a'+'nisotropyT'+'ex.b;\x0a\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyRotat'+'ionFromTex'+':\x20vec2f\x20=\x20'+'anisotropy'+'Tex.rg\x20*\x202'+'.0\x20-\x20vec2f'+'(1.0);\x0a\x20\x20\x20'+'\x20let\x20rotat'+'ionMatrix:'+'\x20mat2x2f\x20='+'\x20mat2x2f(d'+'Anisotropy'+'Rotation.x'+',\x20dAnisotr'+'opyRotatio'+'n.y,\x20-dAni'+'sotropyRot'+'ation.y,\x20d'+'Anisotropy'+'Rotation.x'+');\x0a\x20\x20\x20\x20dAn'+'isotropyRo'+'tation\x20=\x20r'+'otationMat'+'rix\x20*\x20anis'+'otropyRota'+'tionFromTe'+'x;\x0a#endif\x0a'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20c'+'lamp(dAnis'+'otropy,\x200.'+'0,\x201.0);\x0a}'+'\x0a',tM='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_aoI'+'ntensity:\x20'+'f32;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_AODETA'+'IL_TEXTURE'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22detai'+'lModesPS\x22\x0a'+'#endif\x0a\x0afn'+'\x20getAO()\x20{'+'\x0a\x20\x20\x20\x20dAo\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20aoBas'+'e:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_AO_TEXTU'+'RE_NAME},\x20'+'{STD_AO_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AO_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_AO_'+'TEXTURE_CH'+'ANNEL};\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_AO'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20aoDetail:'+'\x20f32\x20=\x20tex'+'tureSample'+'Bias({STD_'+'AODETAIL_T'+'EXTURE_NAM'+'E},\x20{STD_A'+'ODETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AODET'+'AIL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_AODETAI'+'L_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20aoBase\x20='+'\x20detailMod'+'e_{STD_AOD'+'ETAIL_DETA'+'ILMODE}(ve'+'c3f(aoBase'+'),\x20vec3f(a'+'oDetail)).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dAo'+'\x20=\x20dAo\x20*\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20=\x20dA'+'o\x20*\x20satura'+'te(vVertex'+'Color.{STD'+'_AO_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'STD_AO_TEX'+'TURE)\x20||\x20d'+'efined(STD'+'_AO_VERTEX'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAo\x20=\x20mix('+'1.0,\x20dAo,\x20'+'uniform.ma'+'terial_aoI'+'ntensity);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',sM='\x0afn\x20occlud'+'eDiffuse(a'+'o:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20ao;\x0a'+'}\x0a',iM='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'aterial_oc'+'cludeSpecu'+'larIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0afn'+'\x20occludeSp'+'ecular(glo'+'ss:\x20f32,\x20a'+'o:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f)\x20{\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20==\x20A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_OCCLUDE_S'+'PECULAR_FL'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'specOcc:\x20f'+'32\x20=\x20mix(1'+'.0,\x20ao,\x20un'+'iform.mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specOcc:'+'\x20f32\x20=\x20ao;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'GLOSSDEPEN'+'DENT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'roximated\x20'+'specular\x20o'+'cclusion\x20f'+'rom\x20AO\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ht'+'tp://resea'+'rch.tri-ac'+'e.com/Data'+'/cedec2011'+'_RealtimeP'+'BR_Impleme'+'ntation_e.'+'pptx\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20spe'+'cPow:\x20f32\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20specOc'+'c:\x20f32\x20=\x20s'+'aturate(po'+'w(dot(worl'+'dNormal,\x20v'+'iewDir)\x20+\x20'+'ao,\x200.01\x20*'+'\x20specPow)\x20'+'-\x201.0\x20+\x20ao'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_OCCLUDE'+'_SPECULAR_'+'FLOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecOcc\x20=\x20mi'+'x(1.0,\x20spe'+'cOcc,\x20unif'+'orm.materi'+'al_occlude'+'SpecularIn'+'tensity);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20*\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20dRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'*\x20specOcc;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sReflec'+'tion\x20=\x20sRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a'),rM='\x0a\x20\x20\x20\x20let\x20d'+'irLm\x20=\x20tex'+'tureSample'+'(texture_d'+'irLightMap'+',\x20texture_'+'dirLightMa'+'pSampler,\x20'+'vUv1);\x0a\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.bakeDi'+'r\x20>\x200.5)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(dAtten\x20'+'>\x200.00001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'npacked_di'+'r\x20=\x20dirLm.'+'xyz\x20*\x202.0\x20'+'-\x20vec3f(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x20clamp'+'(dAtten,\x200'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20comb'+'ined_dir\x20='+'\x20dLightDir'+'NormW.xyz\x20'+'*\x20dAtten\x20+'+'\x20unpacked_'+'dir\x20*\x20dirL'+'m.w;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20finalRgb\x20'+'=\x20normaliz'+'e(combined'+'_dir)\x20*\x200.'+'5\x20+\x20vec3f('+'0.5);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20finalA\x20='+'\x20max(dirLm'+'.w\x20+\x20dAtte'+'n,\x201.0\x20/\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalRgb,\x20'+'finalA);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20dirLm;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20alpha'+'_min\x20=\x20sel'+'ect(0.0,\x201'+'.0\x20/\x20255.0'+',\x20dAtten\x20>'+'\x200.00001);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20finalA\x20'+'=\x20max(dirL'+'m.w,\x20alpha'+'_min);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(dirL'+'m.rgb,\x20fin'+'alA);\x0a\x20\x20\x20\x20'+'}\x0a',aM='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'uniform.am'+'bientBakeO'+'cclusionCo'+'ntrast\x20+\x201'+'.0,\x200.0))\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20vec3f(u'+'niform.amb'+'ientBakeOc'+'clusionBri'+'ghtness);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'saturate3('+'dDiffuseLi'+'ght);\x0a\x20\x20\x20\x20'+'dDiffuseLi'+'ght\x20=\x20dDif'+'fuseLight\x20'+'*\x20dAmbient'+'Light;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIGHTMAP'+'_RGBM\x0a\x20\x20\x20\x20'+'//\x20encode\x20'+'to\x20RGBM\x0a\x20\x20'+'\x20\x20var\x20temp'+'_color_rgb'+'m\x20=\x20vec4f('+'dDiffuseLi'+'ght,\x201.0);'+'\x0a\x20\x20\x20\x20temp_'+'color_rgbm'+'\x20=\x20vec4f(p'+'ow(temp_co'+'lor_rgbm.r'+'gb,\x20vec3f('+'0.5)),\x20tem'+'p_color_rg'+'bm.a);\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+'color_rgbm'+'.rgb\x20/\x208.0'+',\x20temp_col'+'or_rgbm.a)'+';\x0a\x20\x20\x20\x20let\x20'+'max_g_b\x20=\x20'+'max(temp_c'+'olor_rgbm.'+'g,\x20max(tem'+'p_color_rg'+'bm.b,\x201.0\x20'+'/\x20255.0));'+'\x0a\x20\x20\x20\x20let\x20m'+'ax_rgb\x20=\x20m'+'ax(temp_co'+'lor_rgbm.r'+',\x20max_g_b)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20ceil'+'(temp_colo'+'r_rgbm.a\x20*'+'\x20255.0)\x20/\x20'+'255.0;\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+('color_rgbm'+'.rgb\x20/\x20tem'+'p_color_rg'+'bm.a,\x20temp'+'_color_rgb'+'m.a);\x0a\x20\x20\x20\x20'+'output.col'+'or\x20=\x20temp_'+'color_rgbm'+';\x0a#else\x0a\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20vec'+'4f(dDiffus'+'eLight,\x201.'+'0);\x0a#endif'+'\x0a'),nM='\x0auniform\x20v'+'iew_positi'+'on:\x20vec3f;'+'\x0a\x0auniform\x20'+'light_glob'+'alAmbient:'+'\x20vec3f;\x0a\x0af'+'n\x20square(x'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20x*x'+';\x0a}\x0a\x0afn\x20sa'+'turate(x:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0afn'+'\x20saturate3'+'(x:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3f(0.'+'0),\x20vec3f('+'1.0));\x0a}\x0a',oM='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'Mask:\x20vec2'+'f;\x0avarying'+'\x20vTiledUv:'+'\x20vec2f;\x0a\x0au'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0auni'+'form\x20outer'+'Scale:\x20vec'+'2f;\x0aunifor'+'m\x20atlasRec'+'t:\x20vec4f;\x0a'+'\x0avar<priva'+'te>\x20nineSl'+'icedUv:\x20ve'+'c2f;\x0a',lM='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vMask:\x20v'+'ec2f;\x0avary'+'ing\x20vTiled'+'Uv:\x20vec2f;'+'\x0a\x0auniform\x20'+'innerOffse'+'t:\x20vec4f;\x0a'+'uniform\x20ou'+'terScale:\x20'+'vec2f;\x0auni'+'form\x20atlas'+'Rect:\x20vec4'+'f;\x0a\x0avar<pr'+'ivate>\x20nin'+'eSlicedUv:'+'\x20vec2f;\x0a',cM='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afn\x20bay'+'er2(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(2.0\x20*'+'\x20p.y\x20+\x20p.x'+'\x20+\x201.0)\x20%\x20'+'4.0;\x0a}\x0a\x0a//'+'\x204x4\x20matri'+'x,\x20p\x20-\x20pix'+'el\x20coordin'+'ate\x0afn\x20bay'+'er4(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20p1:\x20vec2f'+'\x20=\x20p\x20%\x20vec'+'2f(2.0);\x0a\x20'+'\x20\x20\x20let\x20p2:'+'\x20vec2f\x20=\x20f'+'loor(0.5\x20*'+'\x20(p\x20%\x20vec2'+'f(4.0)));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afn\x20bayer8'+'(p:\x20vec2f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20p1'+':\x20vec2f\x20=\x20'+'p\x20%\x20vec2f('+'2.0);\x0a\x20\x20\x20\x20'+'let\x20p2:\x20ve'+'c2f\x20=\x20floo'+'r(0.5\x20*\x20(p'+'\x20%\x20vec2f(4'+'.0)));\x0a\x20\x20\x20'+'\x20let\x20p4:\x20v'+'ec2f\x20=\x20flo'+'or(0.25\x20*\x20'+'(p\x20%\x20vec2f'+'(8.0)));\x0a\x20'+'\x20\x20\x20return\x20'+'4.0\x20*\x20(4.0'+'\x20*\x20bayer2('+'p1)\x20+\x20baye'+'r2(p2))\x20+\x20'+'bayer2(p4)'+';\x0a}\x0a',hM='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20sou'+'rce:\x20textu'+'re_2d<f32>'+';\x0avar\x20sour'+'ceSampler:'+'\x20sampler;\x0a'+'\x0a#ifdef\x20GA'+'USS\x0a\x20\x20\x20\x20un'+'iform\x20weig'+'ht:\x20array<'+'f32,\x20{SAMP'+'LES}>;\x0a#en'+'dif\x0aunifor'+'m\x20pixelOff'+'set:\x20vec2f'+';\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20var'+'\x20moments:\x20'+'vec3f\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20let\x20uv'+':\x20vec2f\x20=\x20'+'input.vUv0'+'\x20-\x20uniform'+'.pixelOffs'+'et\x20*\x20(f32('+'{SAMPLES})'+'\x20*\x200.5);\x0a\x0a'+'\x20\x20\x20\x20for\x20(v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20{'+'SAMPLES};\x20'+'i\x20=\x20i\x20+\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20c:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'source,\x20so'+'urceSample'+'r,\x20uv\x20+\x20un'+'iform.pixe'+'lOffset\x20*\x20'+'f32(i));\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20moments'+'\x20=\x20moments'+'\x20+\x20c.xyz\x20*'+'\x20uniform.w'+'eight[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20=\x20moment'+'s\x20+\x20c.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'oments\x20=\x20m'+'oments\x20*\x20('+'1.0\x20/\x20f32('+'{SAMPLES})'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'moments,\x201'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a',dM='\x0auniform\x20m'+'aterial_cl'+'earCoat:\x20f'+'32;\x0a\x0afn\x20ge'+'tClearCoat'+'()\x20{\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20=\x20unifo'+'rm.materia'+'l_clearCoa'+'t;\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_C'+'LEARCOAT_T'+'EXTURE\x0a\x20\x20\x20'+'\x20ccSpecula'+'rity\x20=\x20ccS'+'pecularity'+'\x20*\x20texture'+'SampleBias'+'({STD_CLEA'+'RCOAT_TEXT'+'URE_NAME},'+'\x20{STD_CLEA'+'RCOAT_TEXT'+'URE_NAME}S'+'ampler,\x20{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_CLE'+'ARCOAT_VER'+'TEX\x0a\x20\x20\x20\x20cc'+'Specularit'+'y\x20=\x20ccSpec'+'ularity\x20*\x20'+'saturate(v'+'VertexColo'+'r.{STD_CLE'+'ARCOAT_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a',fM='\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_clearCoa'+'tGloss:\x20f3'+'2;\x0a\x0afn\x20get'+'ClearCoatG'+'lossiness('+')\x20{\x0a\x20\x20\x20\x20cc'+'Glossiness'+'\x20=\x20uniform'+'.material_'+'clearCoatG'+'loss;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE_NAME}'+',\x20{STD_CLE'+'ARCOATGLOS'+'S_TEXTURE_'+'NAME}Sampl'+'er,\x20{STD_C'+'LEARCOATGL'+'OSS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_CLEA'+'RCOATGLOSS'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_INVERT\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20=\x201.0'+'\x20-\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20ccGloss'+'iness\x20+=\x200'+'.0000001;\x0a'+'}\x0a',uM='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_cle'+'arCoatBump'+'iness:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getClea'+'rCoatNorma'+'l()\x20{\x0a#ifd'+'ef\x20STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'\x0a\x20\x20\x20\x20var\x20n'+'ormalMap:\x20'+'vec3f\x20=\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_DEC'+'ODE}(textu'+'reSampleBi'+'as({STD_CL'+'EARCOATNOR'+'MAL_TEXTUR'+'E_NAME},\x20{'+'STD_CLEARC'+'OATNORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias));\x0a\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20mix(v'+'ec3f(0.0,\x20'+'0.0,\x201.0),'+'\x20normalMap'+',\x20uniform.'+'material_c'+'learCoatBu'+'mpiness);\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20norm'+'alize(dTBN'+'\x20*\x20normalM'+'ap);\x0a#else'+'\x0a\x20\x20\x20\x20ccNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a',pM='\x0astruct\x20Fa'+'ceCoords\x20{'+'\x0a\x20\x20\x20\x20uv:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Or'+'iginal\x20ret'+'urn\x20value\x0a'+'\x20\x20\x20\x20faceIn'+'dex:\x20f32,\x20'+'\x20\x20\x20//\x20Was\x20'+'out\x20parame'+'ter\x0a\x20\x20\x20\x20ti'+'leOffset:\x20'+'vec2f,\x20//\x20'+'Was\x20out\x20pa'+'rameter\x0a}\x0a'+'\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0afn\x20getC'+'ubemapFace'+'Coordinate'+'s(dir:\x20vec'+'3f)\x20->\x20Fac'+'eCoords\x20{\x0a'+'\x20\x20\x20\x20var\x20fa'+'ceIndex:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20tileOffs'+'et:\x20vec2f;'+'\x0a\x20\x20\x20\x20var\x20u'+'v:\x20vec2f;\x20'+'//\x20This\x20is'+'\x20the\x20face\x20'+'UV\x20[0..1]\x0a'+'\x20\x20\x20\x20let\x20vA'+'bs:\x20vec3f\x20'+'=\x20abs(dir)'+';\x0a\x20\x20\x20\x20var\x20'+'ma:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20if\x20(vA'+'bs.z\x20>=\x20vA'+'bs.x\x20&&\x20vA'+'bs.z\x20>=\x20vA'+'bs.y)\x20{\x20\x20\x20'+'//\x20front\x20/'+'\x20back\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20i'+'s_neg_z\x20=\x20'+'dir.z\x20<\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20faceIndex'+'\x20=\x20select('+'4.0,\x205.0,\x20'+'is_neg_z);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'a\x20=\x200.5\x20/\x20'+'vAbs.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv\x20='+'\x20vec2f(sel'+'ect(dir.x,'+'\x20-dir.x,\x20i'+'s_neg_z),\x20'+'-dir.y);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20til'+'eOffset\x20=\x20'+'vec2f(2.0,'+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_z));\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(vAbs'+'.y\x20>=\x20vAbs'+'.x)\x20{\x20\x20//\x20'+'top\x20index\x20'+'2,\x20bottom\x20'+'index\x203\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20is_neg_y\x20'+'=\x20dir.y\x20<\x20'+'0.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20selec'+('t(2.0,\x203.0'+',\x20is_neg_y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ma\x20=\x200.5\x20'+'/\x20vAbs.y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20=\x20vec2f(d'+'ir.x,\x20sele'+'ct(dir.z,\x20'+'-dir.z,\x20is'+'_neg_y));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ti'+'leOffset\x20='+'\x20vec2f(1.0'+',\x20select(0'+'.0,\x201.0,\x20i'+'s_neg_y));'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20is_'+'neg_x\x20=\x20di'+'r.x\x20<\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'aceIndex\x20='+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_x);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2f(selec'+'t(-dir.z,\x20'+'dir.z,\x20is_'+'neg_x),\x20-d'+'ir.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20tileO'+'ffset\x20=\x20ve'+'c2f(0.0,\x20s'+'elect(0.0,'+'\x201.0,\x20is_n'+'eg_x));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20u'+'v\x20=\x20uv\x20*\x20m'+'a\x20+\x200.5;\x0a\x20'+'\x20\x20\x20return\x20'+'FaceCoords'+'(uv,\x20faceI'+'ndex,\x20tile'+'Offset);\x0a}'+'\x0a\x0a//\x20conve'+'rts\x20unnorm'+'alized\x20dir'+'ection\x20vec'+'tor\x20to\x20a\x20t'+'exture\x20coo'+'rdinate\x20fo'+'r\x20a\x20cubema'+'p\x20face\x20sto'+'red\x20within'+'\x20texture\x20a'+'tlas\x20descr'+'ibed\x20by\x20th'+'e\x20viewport'+'\x0afn\x20getCub'+'emapAtlasC'+'oordinates'+'(omniAtlas'+'Viewport:\x20'+'vec3f,\x20sha'+'dowEdgePix'+'els:\x20f32,\x20'+'shadowText'+'ureResolut'+'ion:\x20f32,\x20'+'dir:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20faceData'+':\x20FaceCoor'+'ds\x20=\x20getCu'+'bemapFaceC'+'oordinates'+'(dir);\x0a\x20\x20\x20'+'\x20var\x20uv:\x20v'+'ec2f\x20=\x20fac'+'eData.uv;\x0a'+'\x20\x20\x20\x20let\x20ti'+'leOffset:\x20'+'vec2f\x20=\x20fa'+'ceData.til'+'eOffset;\x0a\x0a'+'\x20\x20\x20\x20//\x20mov'+'e\x20uv\x20coord'+'inates\x20inw'+'ards\x20insid'+'e\x20to\x20compe'+'nsate\x20for\x20')+('larger\x20fov'+'\x20when\x20rend'+'ering\x20shad'+'ow\x20into\x20at'+'las\x0a\x20\x20\x20\x20le'+'t\x20atlasFac'+'eSize:\x20f32'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20le'+'t\x20tileSize'+':\x20f32\x20=\x20sh'+'adowTextur'+'eResolutio'+'n\x20*\x20atlasF'+'aceSize;\x0a\x20'+'\x20\x20\x20var\x20off'+'set:\x20f32\x20='+'\x20shadowEdg'+'ePixels\x20/\x20'+'tileSize;\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20*\x20(1.0\x20-'+'\x20offset\x20*\x20'+'2.0)\x20+\x20off'+'set;\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20='+'\x20uv\x20*\x20atla'+'sFaceSize;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x20into'+'\x20face\x20of\x20t'+'he\x20atlas\x20('+'3x3\x20grid)\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20+\x20tileOf'+'fset\x20*\x20atl'+'asFaceSize'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'offset\x20int'+'o\x20the\x20atla'+'s\x20viewport'+'\x0a\x20\x20\x20\x20uv\x20=\x20'+'uv\x20+\x20omniA'+'tlasViewpo'+'rt.xy;\x0a\x0a\x20\x20'+'\x20\x20return\x20u'+'v;\x0a}\x0a'),mM='\x0afn\x20_getCo'+'okieCluste'+'red(tex:\x20t'+'exture_2d<'+'f32>,\x20texS'+'ampler:\x20sa'+'mpler,\x20uv:'+'\x20vec2f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20pixel'+':\x20vec4f\x20=\x20'+'mix(vec4f('+'1.0),\x20text'+'ureSampleL'+'evel(tex,\x20'+'texSampler'+',\x20uv,\x200.0)'+',\x20intensit'+'y);\x0a\x20\x20\x20\x20le'+'t\x20isRgb:\x20b'+'ool\x20=\x20dot('+'cookieChan'+'nel.rgb,\x20v'+'ec3f(1.0))'+'\x20==\x203.0;\x0a\x20'+'\x20\x20\x20return\x20'+'select(vec'+'3f(dot(pix'+'el,\x20cookie'+'Channel)),'+'\x20pixel.rgb'+',\x20isRgb);\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0afn'+'\x20getCookie'+'2DClustere'+'d(tex:\x20tex'+'ture_2d<f3'+'2>,\x20texSam'+'pler:\x20samp'+'ler,\x20trans'+'form:\x20mat4'+'x4f,\x20world'+'Position:\x20'+'vec3f,\x20int'+'ensity:\x20f3'+'2,\x20cookieC'+'hannel:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20projPo'+'s:\x20vec4f\x20='+'\x20transform'+'\x20*\x20vec4f(w'+'orldPositi'+'on,\x201.0);\x0a'+'\x20\x20\x20\x20return'+'\x20_getCooki'+'eClustered'+'(tex,\x20texS'+'ampler,\x20pr'+'ojPos.xy\x20/'+'\x20projPos.w'+',\x20intensit'+'y,\x20cookieC'+'hannel);\x0a}'+'\x0a\x0a//\x20getCo'+'okie\x20for\x20c'+'lustered\x20o'+'mni\x20light\x20'+'with\x20the\x20c'+'ookie\x20text'+'ure\x20being\x20'+'stored\x20in\x20'+'the\x20cookie'+'\x20atlas\x0afn\x20'+'getCookieC'+'ubeCluster'+'ed(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20dir:'+'\x20vec3f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f,\x20shad'+'owTextureR'+'esolution:'+'\x20f32,\x20shad'+('owEdgePixe'+'ls:\x20f32,\x20o'+'mniAtlasVi'+'ewport:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20dir);'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getCook'+'ieClustere'+'d(tex,\x20tex'+'Sampler,\x20u'+'v,\x20intensi'+'ty,\x20cookie'+'Channel);\x0a'+'}\x0a'),_M='\x0a\x0afn\x20_getS'+'hadowCoord'+'PerspZbuff'+'er(shadowM'+'atrix:\x20mat'+'4x4f,\x20shad'+'owParams:\x20'+'vec4f,\x20wPo'+'s:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20p'+'rojPos\x20=\x20s'+'hadowMatri'+'x\x20*\x20vec4f('+'wPos,\x201.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20projPos'+'.xyz\x20/\x20pro'+'jPos.w;\x0a\x20\x20'+'\x20\x20//\x20depth'+'\x20bias\x20is\x20a'+'lready\x20app'+'lied\x20on\x20re'+'nder\x0a}\x0a\x0afn'+'\x20getShadow'+'CoordPersp'+'ZbufferNor'+'malOffset('+'shadowMatr'+'ix:\x20mat4x4'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20normal'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20wP'+'os:\x20vec3f\x20'+'=\x20vPositio'+'nW\x20+\x20norma'+'l\x20*\x20shadow'+'Params.y;\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wCoordPers'+'pZbuffer(s'+'hadowMatri'+'x,\x20shadowP'+'arams,\x20wPo'+'s);\x0a}\x0a\x0afn\x20'+'normalOffs'+'etPointSha'+'dow(shadow'+'Params:\x20ve'+'c4f,\x20light'+'Pos:\x20vec3f'+',\x20lightDir'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'normal:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(li'+'ghtDir);\x0a\x20'+'\x20\x20\x20let\x20wPo'+'s:\x20vec3f\x20='+'\x20vPosition'+'W\x20+\x20normal'+'\x20*\x20shadowP'+'arams.y\x20*\x20'+'clamp(1.0\x20'+'-\x20dot(norm'+'al,\x20-light'+'DirNorm),\x20'+'0.0,\x201.0)\x20'+'*\x20distScal'+'e;\x20//0.02\x0a'+'\x20\x20\x20\x20let\x20di'+'r:\x20vec3f\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0a\x20\x20\x20\x20'+'fn\x20getShad'+'owOmniClus'+'teredPCF1('+'shadowMap:'+'\x20texture_d'+'epth_2d,\x20s'+'hadowMapSa'+'mpler:\x20sam'+'pler_compa'+'rison,\x20sha'+'dowParams:'+('\x20vec4f,\x20om'+'niAtlasVie'+'wport:\x20vec'+'3f,\x20shadow'+'EdgePixels'+':\x20f32,\x20lig'+'htDir:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shad'+'owTextureR'+'esolution:'+'\x20f32\x20=\x20sha'+'dowParams.'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+'tureResolu'+'tion,\x20ligh'+'tDir);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowZ:\x20f'+'32\x20=\x20lengt'+'h(lightDir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv,'+'\x20shadowZ);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F3)\x0a\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'wOmniClust'+'eredPCF3(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owParams:\x20'+'vec4f,\x20omn'+'iAtlasView'+'port:\x20vec3'+'f,\x20shadowE'+'dgePixels:'+'\x20f32,\x20ligh'+'tDir:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wTextureRe'+'solution:\x20'+'f32\x20=\x20shad'+'owParams.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20light'+'Dir);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadowZ:\x20f3'+'2\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w\x20+\x20'+'shadowPara'+'ms.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowCoord:'+'\x20vec3f\x20=\x20v'+'ec3f(uv,\x20s'+'hadowZ);\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF3x3('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20}\x0a\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowOmn'+'iClustered'+'PCF5(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20omniAtl'+'asViewport'+':\x20vec3f,\x20s'+'hadowEdgeP'+'ixels:\x20f32'+',\x20lightDir'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadowTex'+'tureResolu'+'tion:\x20f32\x20'+'=\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'uv:\x20vec2f\x20'+'=\x20getCubem'+'apAtlasCoo'+'rdinates(o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20shad'+'owTextureR'+'esolution,'+'\x20lightDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20vec3f'+'(uv,\x20shado'+'wZ);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CF5x5(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'#endif\x0a\x0a//'+'\x20Clustered'+'\x20Spot\x20Samp'+'ling\x20using'+'\x20atlas\x0a\x0a#i'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF1)\x0a\x0a\x20\x20\x20'+'\x20fn\x20getSha'+'dowSpotClu'+'steredPCF1'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu')+('rn\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowCoord.'+'xy,\x20shadow'+'Coord.z);\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0a\x20\x20'+'\x20\x20fn\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'3x3(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF5)\x0a\x0a\x20'+'\x20\x20\x20fn\x20getS'+'hadowSpotC'+'lusteredPC'+'F5(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),gM='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0avar\x20clu'+'sterWorldT'+'exture:\x20te'+'xture_2d<f'+'32>;\x0avar\x20l'+'ightsTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x0a#ifdef\x20C'+'LUSTER_SHA'+'DOWS\x0a\x20\x20\x20\x20/'+'/\x20TODO:\x20wh'+'en\x20VSM\x20sha'+'dow\x20is\x20sup'+'ported,\x20it'+'\x20needs\x20to\x20'+'use\x20sample'+'r2D\x20in\x20web'+'gl2\x0a\x20\x20\x20\x20va'+'r\x20shadowAt'+'lasTexture'+':\x20texture_'+'depth_2d;\x0a'+'\x20\x20\x20\x20var\x20sh'+'adowAtlasT'+'extureSamp'+'ler:\x20sampl'+'er_compari'+'son;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'var\x20cookie'+'AtlasTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20c'+'ookieAtlas'+'TextureSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0auniform'+'\x20clusterMa'+'xCells:\x20i3'+'2;\x0a\x0a//\x201.0'+'\x20if\x20cluste'+'red\x20lighti'+'ng\x20can\x20be\x20'+'skipped\x20(0'+'\x20lights\x20in'+'\x20the\x20clust'+'ers)\x0aunifo'+'rm\x20cluster'+'Skip:\x20f32;'+'\x0a\x0auniform\x20'+'clusterCel'+'lsCountByB'+'oundsSize:'+'\x20vec3f;\x0aun'+'iform\x20clus'+'terTexture'+'Size:\x20vec3'+'f;\x0auniform'+'\x20clusterBo'+'undsMin:\x20v'+'ec3f;\x0aunif'+'orm\x20cluste'+'rBoundsDel'+'ta:\x20vec3f;'+'\x0auniform\x20c'+'lusterCell'+'sDot:\x20vec3'+'f;\x0auniform'+'\x20clusterCe'+'llsMax:\x20ve'+('c3f;\x0aunifo'+'rm\x20shadowA'+'tlasParams'+':\x20vec2f;\x0a\x0a'+'//\x20structu'+'re\x20storing'+'\x20light\x20pro'+'perties\x20of'+'\x20a\x20cluster'+'ed\x20light\x0a/'+'/\x20it\x27s\x20sor'+'ted\x20to\x20hav'+'e\x20all\x20vect'+'ors\x20aligne'+'d\x20to\x204\x20flo'+'ats\x20to\x20lim'+'it\x20padding'+'\x0astruct\x20Cl'+'usterLight'+'Data\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x2032bit'+'\x20of\x20flags\x0a'+'\x20\x20\x20\x20flags:'+'\x20u32,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfWidth:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20isSpot:\x20'+'bool,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfHeight:'+'\x20vec3f,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20index\x0a\x20\x20'+'\x20\x20lightInd'+'ex:\x20i32,\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x0a\x20\x20'+'\x20\x20position'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sh'+'ape\x0a\x20\x20\x20\x20sh'+'ape:\x20u32,\x0a'+'\x0a\x20\x20\x20\x20//\x20wo'+'rld\x20space\x20'+'direction\x20'+'(spot\x20ligh'+'t\x20only)\x0a\x20\x20'+'\x20\x20directio'+'n:\x20vec3f,\x0a'+'\x0a\x20\x20\x20\x20//\x20li'+'ght\x20follow'+'\x20mode\x0a\x20\x20\x20\x20'+'falloffMod'+'eLinear:\x20b'+'ool,\x0a\x0a\x20\x20\x20\x20'+'//\x20color\x0a\x20'+'\x20\x20\x20color:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20//\x200.0\x20i'+'f\x20the\x20ligh'+'t\x20doesn\x27t\x20'+'cast\x20shado'+'ws\x0a\x20\x20\x20\x20sha'+'dowIntensi'+'ty:\x20f32,\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20omniAtl'+'asViewport'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20of\x20the\x20'+'light\x0a\x20\x20\x20\x20'+'range:\x20f32'+',\x0a\x0a\x20\x20\x20\x20//\x20'+'channel\x20ma'+'sk\x20-\x20one\x20o'+'f\x20the\x20chan'+'nels\x20has\x201'+',\x20the\x20othe')+('rs\x20are\x200\x0a\x20'+'\x20\x20\x20cookieC'+'hannelMask'+':\x20vec4f,\x0a\x0a'+'\x20\x20\x20\x20//\x20com'+'pressed\x20bi'+'ases,\x20two\x20'+'haf-floats'+'\x20stored\x20in'+'\x20a\x20float\x0a\x20'+'\x20\x20\x20biasesD'+'ata:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20bias\x20'+'values\x0a\x20\x20\x20'+'\x20shadowBia'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20shadowNo'+'rmalBias:\x20'+'f32,\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20a'+'nglesData:'+'\x20f32,\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20inner'+'\x20and\x20outer'+'\x20angle\x20cos'+'ine\x0a\x20\x20\x20\x20in'+'nerConeAng'+'leCos:\x20f32'+',\x0a\x20\x20\x20\x20oute'+'rConeAngle'+'Cos:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'tensity\x20of'+'\x20the\x20cooki'+'e\x0a\x20\x20\x20\x20cook'+'ieIntensit'+'y:\x20f32,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20mask\x0a\x20\x20\x20'+'\x20//float\x20m'+'ask;\x0a\x20\x20\x20\x20i'+'sDynamic:\x20'+'bool,\x0a\x20\x20\x20\x20'+'isLightmap'+'ped:\x20bool\x0a'+'}\x0a\x0a//\x20Note'+':\x20on\x20some\x20'+'devices\x20(t'+'ested\x20on\x20P'+'ixel\x203A\x20XL'+'),\x20this\x20ma'+'trix\x20when\x20'+'stored\x20ins'+'ide\x20the\x20li'+'ght\x20struct'+'\x20has\x20lower'+'\x20precision'+'\x20compared\x20'+'to\x0a//\x20when'+'\x20stored\x20ou'+'tside,\x20so\x20'+'we\x20store\x20i'+'t\x20outside\x20'+'to\x20avoid\x20s'+'pot\x20shadow'+'\x20flickerin'+'g.\x20This\x20mi'+'ght\x20need\x20t'+'o\x20be\x20done\x20'+'to\x20other\x20/'+'\x20all\x20membe'+'rs\x0a//\x20of\x20t'+'he\x20structu'+'re\x20if\x20furt'+'her\x20simila'+'r\x20issues\x20a'+'re\x20observe'+'d.\x0a\x0a//\x20sha'+'dow\x20(spot\x20'+'light\x20only'+')\x20/\x20cookie'+'\x20projectio'+'n\x20matrix\x0av'+'ar<private'+'>\x20lightPro'+'jectionMat'+'rix:\x20mat4x'+'4f;\x0a\x0afn\x20sa'+'mpleLightT'+'extureF(li'+'ghtIndex:\x20'+'i32,\x20index'+':\x20i32)\x20->\x20')+('vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20t'+'extureLoad'+'(lightsTex'+'ture,\x20vec2'+'<i32>(inde'+'x,\x20lightIn'+'dex),\x200);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightCore(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>,\x20'+'lightIndex'+':\x20f32)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20lig'+'ht\x20index\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'lightIndex'+'\x20=\x20i32(lig'+'htIndex);\x0a'+'\x0a\x20\x20\x20\x20//\x20sa'+'mple\x20data\x20'+'encoding\x20h'+'alf-float\x20'+'values\x20int'+'o\x2032bit\x20ui'+'nts\x0a\x20\x20\x20\x20le'+'t\x20halfData'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_COLO'+'R_ANGLES_B'+'IAS});\x0a\x0a\x20\x20'+'\x20\x20//\x20store'+'\x20floats\x20we'+'\x20decode\x20la'+'ter\x20as\x20nee'+'ded\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.angle'+'sData\x20=\x20ha'+'lfData.z;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.biasesDat'+'a\x20=\x20halfDa'+'ta.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20decomp'+'ress\x20color'+'\x20half-floa'+'ts\x0a\x20\x20\x20\x20let'+'\x20colorRG:\x20'+'vec2f\x20=\x20un'+'pack2x16fl'+'oat(bitcas'+'t<u32>(hal'+'fData.x));'+'\x0a\x20\x20\x20\x20let\x20c'+'olorB_:\x20ve'+'c2f\x20=\x20unpa'+'ck2x16floa'+'t(bitcast<'+'u32>(halfD'+'ata.y));\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'color\x20=\x20ve'+'c3f(colorR'+'G,\x20colorB_'+'.x)\x20*\x20{LIG'+'HT_COLOR_D'+'IVIDER};\x0a\x0a'+'\x20\x20\x20\x20//\x20pos'+'ition\x20and\x20'+'range,\x20ful'+'l\x20floats\x0a\x20'+'\x20\x20\x20let\x20lig'+'htPosRange'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_POSI'+'TION_RANGE'+'});\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.posit')+('ion\x20=\x20ligh'+'tPosRange.'+'xyz;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.rang'+'e\x20=\x20lightP'+'osRange.w;'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'pot\x20direct'+'ion\x20&\x20flag'+'s\x20data\x0a\x20\x20\x20'+'\x20let\x20light'+'Dir_Flags:'+'\x20vec4f\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData.ligh'+'tIndex,\x20{C'+'LUSTER_TEX'+'TURE_DIREC'+'TION_FLAGS'+'});\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20directi'+'on\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.direct'+'ion\x20=\x20ligh'+'tDir_Flags'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x2032bit\x20'+'flags\x0a\x20\x20\x20\x20'+'let\x20flags_'+'uint:\x20u32\x20'+'=\x20bitcast<'+'u32>(light'+'Dir_Flags.'+'w);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20flags_u'+'int;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.isSp'+'ot\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2030u)'+')\x20!=\x200u;\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'shape\x20=\x20(f'+'lags_uint\x20'+'>>\x2028u)\x20&\x20'+'0x3u;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.fal'+'loffModeLi'+'near\x20=\x20(fl'+'ags_uint\x20&'+'\x20(1u\x20<<\x2027'+'u))\x20==\x200u;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.shadowIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x200'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.cookieIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x208'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.isDynami'+'c\x20=\x20(flags'+'_uint\x20&\x20(1'+'u\x20<<\x2022u))'+'\x20!=\x200u;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sLightmapp'+'ed\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2021u)'+')\x20!=\x200u;\x0a}'+'\x0a\x0afn\x20decod'+'eClusterLi'+'ghtSpot(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{')+('\x0a\x20\x20\x20\x20//\x20sp'+'ot\x20light\x20c'+'os\x20angles\x0a'+'\x20\x20\x20\x20let\x20an'+'gles:\x20vec2'+'f\x20=\x20unpack'+'2x16float('+'bitcast<u3'+'2>(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'OmniAtlasV'+'iewport(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.omniAtla'+'sViewport\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData.l'+'ightIndex,'+'\x20{CLUSTER_'+'TEXTURE_PR'+'OJ_MAT_0})'+'.xyz;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'AreaData(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>)\x20'+'{\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.halfWid'+'th\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a.lightInd'+'ex,\x20{CLUST'+'ER_TEXTURE'+'_AREA_DATA'+'_WIDTH}).x'+'yz;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.halfH'+'eight\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data.light'+'Index,\x20{CL'+'USTER_TEXT'+'URE_AREA_D'+'ATA_HEIGHT'+'}).xyz;\x0a}\x0a'+'\x0afn\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(cluster'+'LightData:'+'\x20ptr<funct'+'ion,\x20Clust'+'erLightDat'+'a>)\x20{\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'matrix\x0a\x20\x20\x20'+'\x20let\x20m0:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_0});\x0a\x20\x20\x20'+'\x20let\x20m1:\x20v')+('ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_1});\x0a\x20\x20\x20'+'\x20let\x20m2:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_2});\x0a\x20\x20\x20'+'\x20let\x20m3:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4x'+'4f(m0,\x20m1,'+'\x20m2,\x20m3);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightShadow'+'Data(clust'+'erLightDat'+'a:\x20ptr<fun'+'ction,\x20Clu'+'sterLightD'+'ata>)\x20{\x0a\x20\x20'+'\x20\x20//\x20shado'+'w\x20biases\x0a\x20'+'\x20\x20\x20let\x20bia'+'ses:\x20vec2f'+'\x20=\x20unpack2'+'x16float(b'+'itcast<u32'+'>(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'fn\x20decodeC'+'lusterLigh'+'tCookieDat'+'a(clusterL'+'ightData:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20extract'+'\x20channel\x20m'+'ask\x20from\x20f'+'lags\x0a\x20\x20\x20\x20l'+'et\x20cookieF'+'lags:\x20u32\x20'+'=\x20(cluster'+'LightData.'+'flags\x20>>\x202'+'3u)\x20&\x200x0F'+'u;\x20\x20//\x204bi'+'ts,\x20each\x20b'+'it\x20enables'+'\x20a\x20channel'+'\x0a\x20\x20\x20\x20let\x20m'+'ask_uvec:\x20'+'vec4<u32>\x20'+'=\x20vec4<u32'+'>(cookieFl'+'ags)\x20&\x20vec'+'4<u32>(1u,'+'\x202u,\x204u,\x208'+'u);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eChannelMa'+'sk\x20=\x20step('+'vec4f(1.0)')+(',\x20vec4f(ma'+'sk_uvec));'+'\x20//\x20Normal'+'ize\x20to\x200.0'+'\x20or\x201.0\x0a}\x0a'+'\x0afn\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20light:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>,\x0a\x20\x20\x20\x20wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20reflectio'+'nDir:\x20vec3'+'f,\x0a#if\x20def'+'ined(LIT_C'+'LEARCOAT)\x0a'+'\x20\x20\x20\x20clearc'+'oatReflect'+'ionDir:\x20ve'+'c3f,\x0a#endi'+'f\x0a\x20\x20\x20\x20glos'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20specular'+'ity:\x20vec3f'+',\x0a\x20\x20\x20\x20geom'+'etricNorma'+'l:\x20vec3f,\x0a'+'\x20\x20\x20\x20tbn:\x20m'+'at3x3f,\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a#e'+'ndif\x0a\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20clearco'+'at_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20s'+'heen_gloss'+':\x20f32,\x0a\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty:\x20f32\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ve'+'c3f(1.0);\x0a'+'\x20\x20\x20\x20var\x20di'+'ffuseAtten'+'uation:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20var\x20fal'+'loffAttenu'+'ation:\x20f32'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20omni\x20'+'part\x20of\x20th'+'e\x20light\x0a\x20\x20'+'\x20\x20let\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(l'+'ight.posit'+'ion);\x0a\x20\x20\x20\x20'+'let\x20lightD'+'irNormW:\x20v'+'ec3f\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20')+('handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20=\x20g'+'etFalloffL'+'inear(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'falloffAtt'+'enuation\x20='+'\x20getFallof'+'fInvSquare'+'d(light.ra'+'nge,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20if'+'\x20(falloffA'+'ttenuation'+'\x20>\x200.00001'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_AR'+'EALIGHTS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20!=\x20{LI'+'GHTSHAPE_P'+'UNCTUAL})\x20'+'{\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20handle\x20l'+'ight\x20shape'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20='+'=\x20{LIGHTSH'+'APE_RECT})'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getRectLig'+'htDiffuse('+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'W,\x20lightDi'+'rNormW)\x20*\x20'+'16.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20diffuseAt'+'tenuation\x20'+'=\x20getDiskL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x20{\x20/'+'/\x20sphere\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getS'+'phereLight'+'Diffuse(wo'+'rldNormal,'+'\x20viewDir,\x20'+'lightDirW,'+'\x20lightDirN'+'ormW)\x20*\x2016'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNormW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.is'+'Spot)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'decodeClus'+'terLightSp'+'ot(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getSp'+'otEffect(l'+'ight.direc'+'tion,\x20ligh'+'t.innerCon'+'eAngleCos,'+'\x20light.out'+'erConeAngl'+'eCos,\x20ligh'+'tDirNormW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(CLUSTER'+'_COOKIES)\x20'+'||\x20defined'+'(CLUSTER_S'+'HADOWS)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(falloffAt'+'tenuation\x20'+'>\x200.00001)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'hadow\x20/\x20co')+('okie\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'dowIntensi'+'ty\x20>\x200.0\x20|'+'|\x20light.co'+'okieIntens'+'ity\x20>\x200.0)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20shared\x20'+'shadow\x20/\x20c'+'ookie\x20data'+'\x20depends\x20o'+'n\x20light\x20ty'+'pe\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.i'+'sSpot)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ecodeClust'+'erLightPro'+'jectionMat'+'rixData(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20decodeClu'+'sterLightO'+'mniAtlasVi'+'ewport(lig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'TextureRes'+'olution:\x20f'+'32\x20=\x20unifo'+'rm.shadowA'+'tlasParams'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'EdgePixels'+':\x20f32\x20=\x20un'+'iform.shad'+'owAtlasPar'+'ams.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_C'+'OOKIES\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'cookieInte'+'nsity\x20>\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(light)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'!!!!!!!!!!'+'!\x20TEXTURE_'+'PASS\x20likel'+'y\x20needs\x20sa'+'mpler.\x20Ass'+'uming\x20cook'+'ieAtlasTex'+'tureSample'+'r\x20exists.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20cookie'+'Attenuatio'+'n\x20=\x20getCoo'+'kie2DClust'+'ered(cooki'+'eAtlasText'+'ure,\x20cooki'+'eAtlasText'+'ureSampler'+',\x20lightPro'+'jectionMat'+'rix,\x20vPosi'+'tionW,\x20lig')+('ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20!!!!!!!!'+'!!!\x20TEXTUR'+'E_PASS\x20lik'+'ely\x20needs\x20'+'sampler.\x20A'+'ssuming\x20co'+'okieAtlasT'+'extureSamp'+'ler\x20exists'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cook'+'ieAttenuat'+'ion\x20=\x20getC'+'ookieCubeC'+'lustered(c'+'ookieAtlas'+'Texture,\x20c'+'ookieAtlas'+'TextureSam'+'pler,\x20ligh'+'tDirW,\x20lig'+'ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask,\x20shado'+'wTextureRe'+'solution,\x20'+'shadowEdge'+'Pixels,\x20li'+'ght.omniAt'+'lasViewpor'+'t);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20CLUSTER_'+'SHADOWS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'adow\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(light'+'.shadowInt'+'ensity\x20>\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightShadow'+'Data(light'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowParams'+':\x20vec4f\x20=\x20'+'vec4f(shad'+'owTextureR'+'esolution,'+'\x20light.sha'+'dowNormalB'+'ias,\x20light'+'.shadowBia'+'s,\x201.0\x20/\x20l'+'ight.range'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot\x20sha'+'dow\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20shadowCo'+'ord:\x20vec3f'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat')+('rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20!!!!!'+'!!!!!!\x20SHA'+'DOWMAP_PAS'+'S\x20needs\x20te'+'xture\x20and\x20'+'sampler_co'+'mparison.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20!!!'+'!!!!!!!!\x20S'+'hadow\x20func'+'tions\x20need'+'\x20update\x20fo'+'r\x20WGSL\x20tex'+'tureSample'+'Compare\x20et'+'c.\x20Assumin'+'g\x20these\x20ar'+'e\x20handled\x20'+'in\x20include'+'s.\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'SpotCluste'+'redPCF1(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadow:\x20f32'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF3('+'shadowAtla'+'sTexture,\x20'+'shadowAtla'+'sTextureSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadow:\x20f'+'32\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'5(shadowAt'+'lasTexture'+',\x20shadowAt'+'lasTexture'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCSS)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l')+('et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CSS(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20fallo'+'ffAttenuat'+'ion\x20*\x20mix('+'1.0,\x20shado'+'w,\x20light.s'+'hadowInten'+'sity);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20omni\x20'+'shadow\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalOffset'+'PointShado'+'w(shadowPa'+'rams,\x20ligh'+'t.position'+',\x20lightDir'+'W,\x20lightDi'+'rNormW,\x20ge'+'ometricNor'+'mal);\x20\x20//\x20'+'normalBias'+'\x20adjusted\x20'+'for\x20distan'+'ce\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20!!!!!!!!!'+'!!\x20SHADOWM'+'AP_PASS\x20ne'+'eds\x20textur'+'e\x20and\x20samp'+'ler_compar'+'ison.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20!!!!!!!'+'!!!!\x20Shado'+'w\x20function'+'s\x20need\x20upd'+'ate\x20for\x20WG'+'SL\x20texture'+'SampleComp'+'are\x20etc.\x20A'+'ssuming\x20th'+'ese\x20are\x20ha'+'ndled\x20in\x20i'+'ncludes.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCF1)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowOmni'+'ClusteredP'+'CF1(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowPar'+'ams,\x20light'+'.omniAtlas'+'Viewport,\x20'+'shadowEdge'+'Pixels,\x20di'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20getSha'+'dowOmniClu'+'steredPCF3'+'(shadowAtl'+'asTexture,'+'\x20shadowAtl'+'asTextureS'+'ampler,\x20sh'+'adowParams'+',\x20light.om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'OmniCluste'+'redPCF5(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20areaDif'+'fuse:\x20vec3'+'f\x20=\x20(diffu'+'seAttenuat'+'ion\x20*\x20fall'+'offAttenua'+'tion)\x20*\x20li')+('ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaDi'+'ffuse\x20=\x20mi'+'x(areaDiff'+'use,\x20vec3f'+'(0.0),\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20diff'+'use\x20-\x20it\x20d'+'oes\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20areaDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20areaL'+'ightSpecul'+'ar:\x20f32;\x20/'+'/\x20Use\x20var\x20'+'because\x20as'+'signed\x20in\x20'+'if/else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_RECT'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getRe'+'ctLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20if\x20(ligh'+'t.shape\x20=='+'\x20{LIGHTSHA'+'PE_DISK})\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecular\x20'+'=\x20getDiskL'+'ightSpecul'+'ar(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x20//\x20sphere'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20areaLight'+'Specular\x20='+'\x20getSphere'+'LightSpecu')+('lar(worldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20dLTC'+'SpecFres\x20*'+'\x20areaLight'+'Specular\x20*'+'\x20falloffAt'+'tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sp'+'ecular\x20cle'+'ar\x20coat\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20areaLigh'+'tSpecularC'+'C:\x20f32;\x20//'+'\x20Use\x20var\x20b'+'ecause\x20ass'+'igned\x20in\x20i'+'f/else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20==\x20{LI'+'GHTSHAPE_R'+'ECT})\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecularC'+'C\x20=\x20getRec'+'tLightSpec'+'ular(clear'+'coat_world'+'Normal,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecularCC\x20='+'\x20getDiskLi'+'ghtSpecula'+'r(clearcoa'+'t_worldNor'+'mal,\x20viewD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20{\x20//\x20sph'+'ere\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getSphereL'+'ightSpecul'+'ar(clearco'+'at_worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'cSpecularL'+'ight\x20=\x20ccS'+'pecularLig'+'ht\x20+\x20ccLTC'+'SpecFres\x20*'+'\x20areaLight'+'SpecularCC'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20\x20*\x20c'+'ookieAtten')+('uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20punctual'+'\x20light\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20p'+'unctualDif'+'fuse:\x20vec3'+'f\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_AREAL'+'IGHTS)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'unctualDif'+'fuse\x20=\x20mix'+'(punctualD'+'iffuse,\x20ve'+'c3f(0.0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20=\x20dDiffus'+'eLight\x20+\x20p'+'unctualDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Dir:\x20vec3f'+'\x20=\x20normali'+'ze(-lightD'+'irNormW\x20+\x20'+'viewDir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specular\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR_FRESN'+'EL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20=\x20'+'dSpecularL'+'ight\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD')+('ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20halfD'+'ir),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecularity\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'=\x20ccSpecul'+'arLight\x20+\x20'+'getLightSp'+'ecular(hal'+'fDir,\x20clea'+'rcoatRefle'+'ctionDir,\x20'+'clearcoat_'+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'NormW,\x20cle'+'arcoat_glo'+'ss,\x20tbn)\x20*'+'\x20falloffAt')+('tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion\x20*\x20getF'+'resnelCC(d'+'ot(viewDir'+',\x20halfDir)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20='+'\x20ccSpecula'+'rLight\x20+\x20g'+'etLightSpe'+'cular(half'+'Dir,\x20clear'+'coatReflec'+'tionDir,\x20c'+'learcoat_w'+'orldNormal'+',\x20viewDir,'+'\x20lightDirN'+'ormW,\x20clea'+'rcoat_glos'+'s,\x20tbn)\x20*\x20'+'falloffAtt'+'enuation\x20*'+'\x20light.col'+'or\x20*\x20cooki'+'eAttenuati'+'on;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'+\x20getLight'+'SpecularSh'+'een(halfDi'+'r,\x20worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'sheen_glos'+'s)\x20*\x20fallo'+'ffAttenuat'+'ion\x20*\x20ligh'+'t.color\x20*\x20'+'cookieAtte'+'nuation;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20Writ'+'e\x20to\x20globa'+'l\x20attenuat'+'ion\x20values'+'\x20(for\x20ligh'+'tmapper)\x0a\x20'+'\x20\x20\x20dAtten\x20'+'=\x20falloffA'+'ttenuation'+';\x0a\x20\x20\x20\x20dLig'+'htDirNormW'+'\x20=\x20lightDi'+'rNormW;\x0a}\x0a'+'\x0a\x0afn\x20evalu'+'ateCluster'+'Light(\x0a\x20\x20\x20'+'\x20lightInde'+'x:\x20f32,\x0a\x20\x20'+'\x20\x20worldNor'+'mal:\x20vec3f'+',\x0a\x20\x20\x20\x20view'+'Dir:\x20vec3f'+',\x0a\x20\x20\x20\x20refl'+'ectionDir:'+'\x20vec3f,\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20c'+'learcoatRe'+'flectionDi'+'r:\x20vec3f,\x0a'+'#endif\x0a\x20\x20\x20')+('\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20geometric'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20t'+'bn:\x20mat3x3'+'f,\x0a#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20clearc'+'oat_worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20cl'+'earcoat_gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20sheen_'+'gloss:\x20f32'+',\x0a\x20\x20\x20\x20irid'+'escence_in'+'tensity:\x20f'+'32\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20decod'+'e\x20core\x20lig'+'ht\x20data\x20fr'+'om\x20texture'+'s\x0a\x20\x20\x20\x20var\x20'+'clusterLig'+'htData:\x20Cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(&cluste'+'rLightData'+',\x20lightInd'+'ex);\x0a\x0a\x20\x20\x20\x20'+'//\x20evaluat'+'e\x20light\x20if'+'\x20it\x20uses\x20a'+'ccepted\x20li'+'ght\x20mask\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'acceptLigh'+'tMask:\x20boo'+'l\x20=\x20cluste'+'rLightData'+'.isDynamic'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20accept'+'LightMask:'+'\x20bool\x20=\x20cl'+'usterLight'+'Data.isLig'+'htmapped;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'acceptLigh'+'tMask)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20eva'+'luateLight'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20&clust'+'erLightDat'+'a,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'viewDir,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20reflectio'+'nDir,\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20geometri'+'cNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20tbn,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE')+('NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_worl'+'dNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'sheen_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a\x0a\x0afn'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20world'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20v'+'iewDir:\x20ve'+'c3f,\x0a\x20\x20\x20\x20r'+'eflectionD'+'ir:\x20vec3f,'+'\x0a#if\x20defin'+'ed(LIT_CLE'+'ARCOAT)\x0a\x20\x20'+'\x20\x20clearcoa'+'tReflectio'+'nDir:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'specularit'+'y:\x20vec3f,\x0a'+'\x20\x20\x20\x20geomet'+'ricNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20tbn:\x20mat'+'3x3f,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a#end'+'if\x0a\x20\x20\x20\x20cle'+'arcoat_wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20clearcoat'+'_gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20she'+'en_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20i'+'ridescence'+'_intensity'+':\x20f32\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20sk'+'ip\x20lights\x20'+'if\x20no\x20ligh'+'ts\x20at\x20all\x0a'+'\x20\x20\x20\x20if\x20(un'+'iform.clus'+'terSkip\x20>\x20'+'0.5)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x20to'+'\x203d\x20intege'+'r\x20cell\x20cor'+'dinates\x20in'+'\x20the\x20clust'+'er\x20structu'+'re\x0a\x20\x20\x20\x20let'+'\x20cellCoord'+'s:\x20vec3f\x20='+'\x20floor((vP'+'ositionW\x20-'+'\x20uniform.c'+'lusterBoun'+'dsMin)\x20*\x20u'+'niform.clu'+'sterCellsC'+'ountByBoun'+'dsSize);\x0a\x0a'+'\x20\x20\x20\x20//\x20no\x20'+'lighting\x20w'+'hen\x20cell\x20c'+'oordinate\x20'+'is\x20out\x20of\x20'+'range\x0a\x20\x20\x20\x20'+'if\x20(!(any('+'cellCoords')+('\x20<\x20vec3f(0'+'.0))\x20||\x20an'+'y(cellCoor'+'ds\x20>=\x20unif'+'orm.cluste'+'rCellsMax)'+'))\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cel'+'l\x20index\x20(m'+'apping\x20fro'+'m\x203d\x20cell\x20'+'coordinate'+'s\x20to\x20linea'+'r\x20memory)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20cellInde'+'x:\x20f32\x20=\x20d'+'ot(uniform'+'.clusterCe'+'llsDot,\x20ce'+'llCoords);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20convert'+'\x20cell\x20inde'+'x\x20to\x20uv\x20co'+'ordinates\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20clusterV'+':\x20f32\x20=\x20fl'+'oor(cellIn'+'dex\x20*\x20unif'+'orm.cluste'+'rTextureSi'+'ze.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20c'+'lusterU:\x20f'+'32\x20=\x20cellI'+'ndex\x20-\x20(cl'+'usterV\x20*\x20u'+'niform.clu'+'sterTextur'+'eSize.x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20loop\x20ove'+'r\x20maximum\x20'+'number\x20of\x20'+'light\x20cell'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'for\x20(var\x20l'+'ightCellIn'+'dex:\x20i32\x20='+'\x200;\x20lightC'+'ellIndex\x20<'+'\x20uniform.c'+'lusterMaxC'+'ells;\x20ligh'+'tCellIndex'+'\x20=\x20lightCe'+'llIndex\x20+\x20'+'1)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20using\x20a\x20s'+'ingle\x20chan'+'nel\x20textur'+'e\x20with\x20dat'+'a\x20in\x20red\x20c'+'hannel\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20lightIn'+'dexPacked:'+'\x20f32\x20=\x20tex'+'tureLoad(c'+'lusterWorl'+'dTexture,\x20'+'vec2<i32>('+'i32(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20i32(clus'+'terV)),\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(lightInde'+'xPacked\x20<='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20break;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ev'+'aluateClus'+'terLight(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tIndexPack'+'ed\x20*\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20vie'+'wDir,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'eometricNo'+'rmal,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20tbn,\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coat_world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20clearc'+'oat_gloss,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20she'+'en_gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a}'),SM='\x0afn\x20combin'+'eColor(alb'+'edo:\x20vec3f'+',\x20sheenSpe'+'cularity:\x20'+'vec3f,\x20cle'+'arcoatSpec'+'ularity:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20ret:\x20ve'+'c3f\x20=\x20vec3'+'f(0.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ret\x20=\x20'+'ret\x20+\x20((dD'+'iffuseLigh'+'t\x20-\x20unifor'+'m.light_gl'+'obalAmbien'+'t)\x20*\x20albed'+'o\x20+\x20unifor'+'m.material'+'_ambient\x20*'+'\x20uniform.l'+'ight_globa'+'lAmbient);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(albedo\x20*'+'\x20dDiffuseL'+'ight);\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_OLD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20dSpecular'+'Light;\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(dReflect'+'ion.rgb\x20*\x20'+'dReflectio'+'n.a);\x0a\x20\x20\x20\x20'+'#endif\x20//\x20'+'LIT_REFLEC'+'TIONS\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'sheenScali'+'ng:\x20f32\x20=\x20'+'1.0\x20-\x20max('+'max(sheenS'+'pecularity'+'.r,\x20sheenS'+'pecularity'+'.g),\x20sheen'+'Specularit'+'y.b)\x20*\x200.1'+'57;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20sheenS'+'caling\x20+\x20('+'sSpecularL'+'ight\x20+\x20sRe'+'flection.r'+'gb)\x20*\x20shee'+'nSpeculari'+'ty;\x0a\x20\x20\x20\x20#e'+'ndif\x20//\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20clear'+'CoatScalin'+'g:\x20f32\x20=\x201'+'.0\x20-\x20ccFre'+'snel\x20*\x20cle'+'arcoatSpec'+'ularity;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'\x20=\x20ret\x20*\x20c'+'learCoatSc'+'aling\x20+\x20(c'+'cSpecularL'+'ight\x20+\x20ccR'+'eflection)'+('\x20*\x20clearco'+'atSpecular'+'ity;\x0a\x20\x20\x20\x20#'+'endif\x20//\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20re'+'turn\x20ret;\x0a'+'}\x0a'),yM='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x0a\x20\x20\x20\x20'+'var\x20blitTe'+'xture:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20blitText'+'ureSampler'+'\x20:\x20sampler'+';\x0a\x0a\x20\x20\x20\x20@fr'+'agment\x0a\x20\x20\x20'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20t'+'extureSamp'+'le(blitTex'+'ture,\x20blit'+'TextureSam'+'pler,\x20inpu'+'t.uv0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20}\x0a',vM='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20u'+'niform\x20inv'+'ViewProj:\x20'+'mat4x4<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'re:\x20textur'+'e_cube<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'reSampler\x20'+':\x20sampler;'+'\x0a\x0a\x20\x20\x20\x20@fra'+'gment\x0a\x20\x20\x20\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20pro'+'jPos\x20=\x20vec'+'4f(input.u'+'v0\x20*\x202.0\x20-'+'\x201.0,\x200.5,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20w'+'orldPos\x20=\x20'+'uniform.in'+'vViewProj\x20'+'*\x20projPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20textur'+'eSample(bl'+'itTexture,'+'\x20blitTextu'+'reSampler,'+'\x20worldPos.'+'xyz);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20}\x0a',xM='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.uv0.y'+'\x20=\x201.0\x20-\x20o'+'utput.uv0.'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',TM='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMin:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMax:\x20v'+'ec3f;\x0a#end'+'if\x0a\x0afn\x20cub'+'eMapProjec'+'t(nrdir:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20cubeMapR'+'otate(nrdi'+'r);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIT_CU'+'BEMAP_PROJ'+'ECTION\x20==\x20'+'BOX\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20nrd'+'ir_rotated'+':\x20vec3f\x20=\x20'+'cubeMapRot'+'ate(nrdir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20rbmax'+':\x20vec3f\x20=\x20'+'(uniform.e'+'nvBoxMax\x20-'+'\x20vPosition'+'W)\x20/\x20nrdir'+'_rotated;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20rbmin:\x20v'+'ec3f\x20=\x20(un'+'iform.envB'+'oxMin\x20-\x20vP'+'ositionW)\x20'+'/\x20nrdir_ro'+'tated;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'rbminmax:\x20'+'vec3f\x20=\x20se'+'lect(rbmin'+',\x20rbmax,\x20n'+'rdir_rotat'+'ed\x20>\x20vec3f'+'(0.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'fa:\x20f32\x20=\x20'+'min(min(rb'+'minmax.x,\x20'+'rbminmax.y'+'),\x20rbminma'+'x.z);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20p'+'osonbox:\x20v'+'ec3f\x20=\x20vPo'+'sitionW\x20+\x20'+'nrdir_rota'+'ted\x20*\x20fa;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20envBoxPo'+'s:\x20vec3f\x20='+'\x20(uniform.'+'envBoxMin\x20'+'+\x20uniform.'+'envBoxMax)'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20normali'+'ze(posonbo'+'x\x20-\x20envBox'+'Pos);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',wM='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20cubeMap'+'RotationMa'+'trix:\x20mat3'+'x3f;\x0a#endi'+'f\x0a\x0afn\x20cube'+'MapRotate('+'refDir:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a#ifd'+'ef\x20CUBEMAP'+'_ROTATION\x0a'+'\x20\x20\x20\x20return'+'\x20refDir\x20*\x20'+'uniform.cu'+'beMapRotat'+'ionMatrix;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir;\x0a#end'+'if\x0a}\x0a',EM='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0aoutp'+'ut.color\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0aoutput.co'+'lor\x20=\x20vec4'+'f(litArgs_'+'albedo\x20,\x201'+'.0);\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'DEBUG_WORL'+'D_NORMAL_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(litAr'+'gs_worldNo'+'rmal\x20*\x200.5'+'\x20+\x200.5,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_OPACI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_opacity'+')\x20,\x201.0);\x0a'+'#endif\x0a\x0a#i'+'fdef\x20DEBUG'+'_SPECULARI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(l'+'itArgs_spe'+'cularity,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_GLO'+'SS_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_gloss)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_M'+'ETALNESS_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(vec3f'+'(litArgs_m'+'etalness)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_A'+'O_PASS\x0aout'+'put.color\x20'+'=\x20vec4f(ve'+'c3f(litArg'+'s_ao)\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_EMISS'+'ION_PASS\x0ao'+'utput.colo'+'r\x20=\x20vec4f('+'gammaCorre'+'ctOutput(l'+'itArgs_emi'+'ssion),\x201.'+'0);\x0a#endif'+'\x0a',bM='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0a\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20v'+'ec3f(0.5);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0a#ifdef\x20VA'+'RYING_VUV0'+'\x0a\x20\x20\x20\x20litAr'+'gs_albedo\x20'+'=\x20vec3f(vU'+'v0,\x200.0);\x0a'+'#else\x0a\x20\x20\x20\x20'+'litArgs_al'+'bedo\x20=\x20vec'+'3f(0.0);\x0a#'+'endif\x0a#end'+'if\x0a',AM='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0afn\x20de'+'codeLinear'+'(raw:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20raw.r'+'gb;\x0a}\x0a\x0afn\x20'+'decodeGamm'+'aFloat(raw'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20pow'+'(raw,\x202.2)'+';\x0a}\x0a\x0afn\x20de'+'codeGamma3'+'(raw:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(r'+'aw,\x20vec3f('+'2.2));\x0a}\x0a\x0a'+'fn\x20decodeG'+'amma(raw:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow(raw.xyz'+',\x20vec3f(2.'+'2));\x0a}\x0a\x0afn'+'\x20decodeRGB'+'M(raw:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20color\x20='+'\x20(8.0\x20*\x20ra'+'w.a)\x20*\x20raw'+'.rgb;\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0afn\x20de'+'codeRGBP(r'+'aw:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20ra'+'w.rgb\x20*\x20(-'+'raw.a\x20*\x207.'+'0\x20+\x208.0);\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0af'+'n\x20decodeRG'+'BE(raw:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(vec3f('+'0.0),\x20raw.'+'xyz\x20*\x20pow('+'2.0,\x20raw.w'+'\x20*\x20255.0\x20-'+'\x20128.0),\x20r'+'aw.a\x20!=\x200.'+'0);\x0a}\x0a\x0afn\x20'+'passThroug'+'h(raw:\x20vec'+'4f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw;'+'\x0a}\x0a\x0afn\x20unp'+'ackNormalX'+'YZ(nmap:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20nm'+'ap.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'}\x0a\x0afn\x20unpa'+'ckNormalXY'+'(nmap:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20xy\x20=\x20nm'+'ap.wy\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'vec3f(xy,\x20'+'sqrt(1.0\x20-'+'\x20clamp(dot'+'(xy,\x20xy),\x20'+'0.0,\x201.0))'+');\x0a}\x0a\x0a#end'+'if\x0a',CM='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0afn\x20de'+'tailMode_m'+'ul(c1:\x20vec'+'3f,\x20c2:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20c1\x20'+'*\x20c2;\x0a}\x0a\x0af'+'n\x20detailMo'+'de_add(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20c1\x20+\x20c2;\x0a'+'}\x0a\x0a//\x20http'+'s://en.wik'+'ipedia.org'+'/wiki/Blen'+'d_modes#Sc'+'reen\x0afn\x20de'+'tailMode_s'+'creen(c1:\x20'+'vec3f,\x20c2:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'1.0\x20-\x20(1.0'+'\x20-\x20c1)*(1.'+'0\x20-\x20c2);\x0a}'+'\x0a\x0a//\x20https'+'://en.wiki'+'pedia.org/'+'wiki/Blend'+'_modes#Ove'+'rlay\x0afn\x20de'+'tailMode_o'+'verlay(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20mix(1.0\x20-'+'\x202.0\x20*\x20(1.'+'0\x20-\x20c1)*(1'+'.0\x20-\x20c2),\x20'+'2.0\x20*\x20c1\x20*'+'\x20c2,\x20step('+'c1,\x20vec3f('+'0.5)));\x0a}\x0a'+'\x0afn\x20detail'+'Mode_min(c'+'1:\x20vec3f,\x20'+'c2:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20min(c1,'+'\x20c2);\x0a}\x0a\x0af'+'n\x20detailMo'+'de_max(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(c1,\x20c'+'2);\x0a}\x0a\x0a#en'+'dif\x0a',PM='\x0auniform\x20m'+'aterial_di'+'ffuse:\x20vec'+'3f;\x0a\x0a#ifde'+'f\x20STD_DIFF'+'USEDETAIL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22detailMo'+'desPS\x22\x0a#en'+'dif\x0a\x0afn\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20unif'+'orm.materi'+'al_diffuse'+'.rgb;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoText'+'ure:\x20vec3f'+'\x20=\x20{STD_DI'+'FFUSE_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_DIFFU'+'SE_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'_TEXTURE_N'+'AME}Sample'+'r,\x20{STD_DI'+'FFUSE_TEXT'+'URE_UV},\x20u'+'niform.tex'+'tureBias))'+'.{STD_DIFF'+'USE_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoDeta'+'il:\x20vec3f\x20'+'=\x20{STD_DIF'+'FUSEDETAIL'+'_TEXTURE_D'+'ECODE}(tex'+'tureSample'+'Bias({STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_NAME},\x20{'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_DIFFU'+'SEDETAIL_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20=\x20dAlbe'+'do\x20*\x20albed'+'oTexture;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_DIF'+'FUSE_VERTE'+'X\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAlbedo\x20=\x20'+'dAlbedo\x20*\x20'+'gammaCorre'+'ctInputVec'+'3(saturate'+'3(vVertexC'+'olor.{STD_'+('DIFFUSE_VE'+'RTEX_CHANN'+'EL}));\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),MM='\x0auniform\x20m'+'aterial_em'+'issive:\x20ve'+'c3f;\x0aunifo'+'rm\x20materia'+'l_emissive'+'Intensity:'+'\x20f32;\x0a\x0afn\x20'+'getEmissio'+'n()\x20{\x0a\x20\x20\x20\x20'+'dEmission\x20'+'=\x20uniform.'+'material_e'+'missive\x20*\x20'+'uniform.ma'+'terial_emi'+'ssiveInten'+'sity;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_EMISSIVE'+'_TEXTURE\x0a\x20'+'\x20\x20\x20dEmissi'+'on\x20*=\x20{STD'+'_EMISSIVE_'+'TEXTURE_DE'+'CODE}(text'+'ureSampleB'+'ias({STD_E'+'MISSIVE_TE'+'XTURE_NAME'+'},\x20{STD_EM'+'ISSIVE_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_EMISSI'+'VE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias)).{S'+'TD_EMISSIV'+'E_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_VERT'+'EX\x0a\x20\x20\x20\x20dEm'+'ission\x20=\x20d'+'Emission\x20*'+'\x20gammaCorr'+'ectInputVe'+'c3(saturat'+'e3(vVertex'+'Color.{STD'+'_EMISSIVE_'+'VERTEX_CHA'+'NNEL}));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',DM='\x0afn\x20encode'+'Linear(sou'+'rce:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'source,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeGamm'+'a(source:\x20'+'vec3f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4f(pow(s'+'ource\x20+\x20ve'+'c3f(0.0000'+'001),\x20vec3'+'f(1.0\x20/\x202.'+'2)),\x201.0);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBM(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+'r\x20color:\x20v'+'ec3f\x20=\x20pow'+'(source,\x20v'+'ec3f(0.5))'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x201.0\x20/'+'\x208.0;\x0a\x0a\x20\x20\x20'+'\x20var\x20a:\x20f3'+'2\x20=\x20satura'+'te(max(max'+'(color.r,\x20'+'color.g),\x20'+'max(color.'+'b,\x201.0\x20/\x202'+'55.0)));\x0a\x20'+'\x20\x20\x20a\x20=\x20cei'+'l(a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20col'+'or\x20/=\x20a;\x0a\x20'+'\x20\x20\x20return\x20'+'vec4f(colo'+'r,\x20a);\x0a}\x0a\x0a'+'fn\x20encodeR'+'GBP(source'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20//\x20con'+'vert\x20incom'+'ing\x20linear'+'\x20to\x20gamma('+'ish)\x0a\x20\x20\x20\x20v'+'ar\x20gamma:\x20'+'vec3f\x20=\x20po'+'w(source,\x20'+'vec3f(0.5)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20the\x20maxim'+'um\x20compone'+'nt\x20clamped'+'\x20to\x201..8\x0a\x20'+'\x20\x20\x20var\x20max'+'Val:\x20f32\x20='+'\x20min(8.0,\x20'+'max(1.0,\x20m'+'ax(gamma.x'+',\x20max(gamm'+'a.y,\x20gamma'+'.z))));\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20stor'+'age\x20factor'+'\x0a\x20\x20\x20\x20var\x20v'+':\x20f32\x20=\x201.'+'0\x20-\x20((maxV'+'al\x20-\x201.0)\x20'+'/\x207.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20roun'+'d\x20the\x20valu'+'e\x20for\x20stor'+'age\x20in\x208bi'+'t\x20channel\x0a'+'\x20\x20\x20\x20v\x20=\x20ce'+'il(v\x20*\x20255'+'.0)\x20/\x20255.'+'0;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(gamma\x20/\x20('+'-v\x20*\x207.0\x20+'+'\x208.0),\x20v);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBE(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+('r\x20maxVal:\x20'+'f32\x20=\x20max('+'source.x,\x20'+'max(source'+'.y,\x20source'+'.z));\x0a\x20\x20\x20\x20'+'if\x20(maxVal'+'\x20<\x201e-32)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+':\x20f32\x20=\x20ce'+'il(log2(ma'+'xVal));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(s'+'ource\x20/\x20po'+'w(2.0,\x20e),'+'\x20(e\x20+\x20128.'+'0)\x20/\x20255.0'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a'),IM='\x0a\x20\x20\x20\x20var\x20f'+'inalRgb:\x20v'+'ec3f\x20=\x20com'+'bineColor('+'litArgs_al'+'bedo,\x20litA'+'rgs_sheen_'+'specularit'+'y,\x20litArgs'+'_clearcoat'+'_speculari'+'ty);\x0a\x0a\x20\x20\x20\x20'+'finalRgb\x20='+'\x20finalRgb\x20'+'+\x20litArgs_'+'emission;\x0a'+'\x20\x20\x20\x20finalR'+'gb\x20=\x20addFo'+'g(finalRgb'+');\x0a\x20\x20\x20\x20fin'+'alRgb\x20=\x20to'+'neMap(fina'+'lRgb);\x0a\x20\x20\x20'+'\x20finalRgb\x20'+'=\x20gammaCor'+'rectOutput'+'(finalRgb)'+';\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(fin'+'alRgb,\x20out'+'put.color.'+'a);\x0a',LM='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20atla'+'sSize\x20:\x20f3'+'2\x20=\x20512.0;'+'\x0aconst\x20sea'+'mSize\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0afn\x20mapU'+'v(uv\x20:\x20vec'+'2f,\x20rect\x20:'+'\x20vec4f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec2f(mix('+'rect.x\x20+\x20s'+'eamSize,\x20r'+'ect.x\x20+\x20re'+'ct.z\x20-\x20sea'+'mSize,\x20uv.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20mix(rect.'+'y\x20+\x20seamSi'+'ze,\x20rect.y'+'\x20+\x20rect.w\x20'+'-\x20seamSize'+',\x20uv.y));\x0a'+'}\x0a\x0a//\x20map\x20'+'a\x20normaliz'+'ed\x20equirec'+'t\x20UV\x20and\x20r'+'oughness\x20l'+'evel\x20to\x20th'+'e\x20correct\x20'+'atlas\x20rect'+'.\x0afn\x20mapRo'+'ughnessUv('+'uv\x20:\x20vec2f'+',\x20level\x20:\x20'+'f32)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20t\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'exp2(level'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mapUv('+'uv,\x20vec4f('+'0.0,\x201.0\x20-'+'\x20t,\x20t,\x20t\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20map\x20sh'+'iny\x20level\x20'+'UV\x0afn\x20mapS'+'hinyUv(uv\x20'+':\x20vec2f,\x20l'+'evel\x20:\x20f32'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20t\x20:\x20f32\x20='+'\x201.0\x20/\x20exp'+'2(level);\x0a'+'\x20\x20\x20\x20return'+'\x20mapUv(uv,'+'\x20vec4f(1.0'+'\x20-\x20t,\x201.0\x20'+'-\x20t,\x20t,\x20t\x20'+'*\x200.5));\x0a}'+'\x0a\x0a#endif\x0a',RM='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20skyboxInt'+'ensity\x20:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20proce'+'ssEnvironm'+'ent(color\x20'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20unifo'+'rm.skyboxI'+'ntensity;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',OM='\x0afn\x20getFal'+'loffWindow'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20sqrDist'+':\x20f32\x20=\x20do'+'t(lightDir'+',\x20lightDir'+');\x0a\x20\x20\x20\x20let'+'\x20invRadius'+':\x20f32\x20=\x201.'+'0\x20/\x20lightR'+'adius;\x0a\x20\x20\x20'+'\x20return\x20sq'+'uare(satur'+'ate(1.0\x20-\x20'+'square(sqr'+'Dist\x20*\x20squ'+'are(invRad'+'ius))));\x0a}'+'\x0a\x0afn\x20getFa'+'lloffInvSq'+'uared(ligh'+'tRadius:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20sq'+'rDist:\x20f32'+'\x20=\x20dot(lig'+'htDir,\x20lig'+'htDir);\x0a\x20\x20'+'\x20\x20var\x20fall'+'off:\x20f32\x20='+'\x201.0\x20/\x20(sq'+'rDist\x20+\x201.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20invRadiu'+'s:\x20f32\x20=\x201'+'.0\x20/\x20light'+'Radius;\x0a\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x20square('+'saturate(1'+'.0\x20-\x20squar'+'e(sqrDist\x20'+'*\x20square(i'+'nvRadius))'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20fall'+'off;\x0a}\x0a',FM='\x0afn\x20getFal'+'loffLinear'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20length(l'+'ightDir);\x0a'+'\x20\x20\x20\x20return'+'\x20max(((lig'+'htRadius\x20-'+'\x20d)\x20/\x20ligh'+'tRadius),\x20'+'0.0);\x0a}\x0a',NM='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x20re'+'presentati'+'on\x20(0.0-1.'+'0\x20range)\x0af'+'n\x20float2ui'+'nt(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20intBit'+'s\x20=\x20bitcas'+'t<u32>(val'+'ue);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20f32((intB'+'its\x20>>\x2024u'+')\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((intBi'+'ts\x20>>\x2016u)'+'\x20&\x200xffu),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((intBit'+'s\x20>>\x208u)\x20&'+'\x200xffu),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20f32'+'(intBits\x20&'+'\x200xffu)\x0a\x20\x20'+'\x20\x20)\x20/\x20255.'+'0;\x0a}\x0a\x0a//\x20d'+'ecode\x20RGBA'+'8\x20value\x20to'+'\x20float\x0afn\x20'+'uint2float'+'(value:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20rgba_u32'+'\x20=\x20vec4<u3'+'2>(value\x20*'+'\x20255.0);\x0a\x20'+'\x20\x20\x20let\x20int'+'Bits:\x20u32\x20'+'=\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'r\x20<<\x2024u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'g\x20<<\x2016u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'b\x20<<\x208u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20rgba_u32.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20bitcas'+'t<f32>(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0af'+'n\x20float2ve'+'c4(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CAPS_TEX'+'TURE_FLOAT'+'_RENDERABL'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(value,'+'\x201.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20float2ui'+'nt(value);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0a#endi'+'f\x20//\x20FLOAT'+'_AS_UINT\x0a',kM='\x0a\x0avar<priv'+'ate>\x20dBlen'+'dModeFogFa'+'ctor\x20:\x20f32'+'\x20=\x201.0;\x0a\x0a#'+'if\x20(FOG\x20!='+'\x20NONE)\x0a\x20\x20\x20'+'\x20uniform\x20f'+'og_color\x20:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20fog_sta'+'rt\x20:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20fog_'+'end\x20:\x20f32;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20fog'+'_density\x20:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afn\x20ge'+'tFogFactor'+'()\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20depth\x20=\x20p'+'cPosition.'+'z\x20/\x20pcPosi'+'tion.w;\x0a\x0a\x20'+'\x20\x20\x20var\x20fog'+'Factor\x20:\x20f'+'32\x20=\x200.0;\x0a'+'\x0a\x20\x20\x20\x20#if\x20('+'FOG\x20==\x20LIN'+'EAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20(unif'+'orm.fog_en'+'d\x20-\x20depth)'+'\x20/\x20(unifor'+'m.fog_end\x20'+'-\x20uniform.'+'fog_start)'+';\x0a\x20\x20\x20\x20#eli'+'f\x20(FOG\x20==\x20'+'EXP)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20exp(-'+'depth\x20*\x20un'+'iform.fog_'+'density);\x0a'+'\x20\x20\x20\x20#elif\x20'+'(FOG\x20==\x20EX'+'P2)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fogFacto'+'r\x20=\x20exp(-d'+'epth\x20*\x20dep'+'th\x20*\x20unifo'+'rm.fog_den'+'sity\x20*\x20uni'+'form.fog_d'+'ensity);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(fo'+'gFactor,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0afn\x20addF'+'og(color\x20:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'uniform.fo'+'g_color\x20*\x20'+'dBlendMode'+'FogFactor,'+'\x20color,\x20ge'+'tFogFactor'+'());\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'color;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',UM='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0afn'+'\x20getFresne'+'l(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20cosTheta:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y:\x20f32\x0a\x20\x20\x20'+'\x20#endif\x0a)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20f'+'resnel:\x20f3'+'2\x20=\x20pow(1.'+'0\x20-\x20satura'+'te(cosThet'+'a),\x205.0);\x0a'+'\x20\x20\x20\x20let\x20gl'+'ossSq:\x20f32'+'\x20=\x20gloss\x20*'+'\x20gloss;\x0a\x20\x20'+'\x20\x20let\x20ret:'+'\x20vec3f\x20=\x20s'+'pecularity'+'\x20+\x20(max(ve'+'c3f(glossS'+'q),\x20specul'+'arity)\x20-\x20s'+'pecularity'+')\x20*\x20fresne'+'l;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20mix(ret,'+'\x20iridescen'+'ceFresnel,'+'\x20iridescen'+'ceIntensit'+'y);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20r'+'et;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0afn'+'\x20getFresne'+'lCC(cosThe'+'ta:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20fres'+'nel:\x20f32\x20='+'\x20pow(1.0\x20-'+'\x20saturate('+'cosTheta),'+'\x205.0);\x0a\x20\x20\x20'+'\x20return\x200.'+'04\x20+\x20(1.0\x20'+'-\x200.04)\x20*\x20'+'fresnel;\x0a}',BM='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x0avary'+'ing\x20vUv0:\x20'+'vec2f;\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4f(inpu'+'t.vertex_p'+'osition,\x200'+'.5,\x201.0);\x0a'+'\x20\x20\x20\x20output'+'.vUv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x20vec2f(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',zM='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInput(c'+'olor:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGammaFloa'+'t(color);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20fn\x20gammaC'+'orrectInpu'+'tVec3(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20deco'+'deGamma3(c'+'olor);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInputVe'+'c4(color:\x20'+'vec4f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(d'+'ecodeGamma'+'3(color.xy'+'z),\x20color.'+'w);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Output(col'+'or:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20pow'+'(color\x20+\x200'+'.0000001,\x20'+'vec3f(1.0\x20'+'/\x202.2));\x0a\x20'+'\x20\x20\x20}\x0a\x0a#els'+'e\x20//\x20NONE\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Input(colo'+'r:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20gammaCo'+'rrectInput'+'Vec3(color'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20gamm'+'aCorrectIn'+'putVec4(co'+'lor:\x20vec4f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20g'+'ammaCorrec'+'tOutput(co'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a',VM='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_gl'+'oss:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getGlossi'+'ness()\x20{\x0a\x20'+'\x20\x20\x20dGlossi'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_GL'+'OSS_CONSTA'+'NT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20unifo'+'rm.materia'+'l_gloss;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_GLOS'+'S_TEXTURE\x0a'+'\x20\x20\x20\x20dGloss'+'iness\x20=\x20dG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_GLOSS'+'_TEXTURE_N'+'AME},\x20{STD'+'_GLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_GLOSS_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_GLOSS_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_I'+'NVERT\x0a\x20\x20\x20\x20'+'dGlossines'+'s\x20=\x201.0\x20-\x20'+'dGlossines'+'s;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20d'+'Glossiness'+'\x20=\x20dGlossi'+'ness\x20+\x200.0'+'000001;\x0a}\x0a',GM='\x0auniform\x20m'+'atrix_mode'+'l:\x20mat4x4f'+';\x0auniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0auniform\x20'+'matrix_pro'+'jection:\x20m'+'at4x4f;\x0a\x0a/'+'/\x20project\x20'+'the\x20model\x20'+'space\x20gaus'+'sian\x20cente'+'r\x20to\x20view\x20'+'and\x20clip\x20s'+'pace\x0afn\x20in'+'itCenter(m'+'odelCenter'+':\x20vec3f,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>)\x20->\x20bo'+'ol\x20{\x0a\x20\x20\x20\x20l'+'et\x20modelVi'+'ew:\x20mat4x4'+'f\x20=\x20unifor'+'m.matrix_v'+'iew\x20*\x20unif'+'orm.matrix'+'_model;\x0a\x20\x20'+'\x20\x20let\x20cent'+'erView:\x20ve'+'c4f\x20=\x20mode'+'lView\x20*\x20ve'+'c4f(modelC'+'enter,\x201.0'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20if\x20splat\x20'+'is\x20behind\x20'+'the\x20camera'+'\x0a\x20\x20\x20\x20if\x20(c'+'enterView.'+'z\x20>\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20ce'+'nterProj:\x20'+'vec4f\x20=\x20un'+'iform.matr'+'ix_project'+'ion\x20*\x20cent'+'erView;\x0a\x0a\x20'+'\x20\x20\x20//\x20ensu'+'re\x20gaussia'+'ns\x20are\x20not'+'\x20clipped\x20b'+'y\x20camera\x20n'+'ear\x20and\x20fa'+'r\x0a\x20\x20\x20\x20cent'+'erProj.z\x20='+'\x20clamp(cen'+'terProj.z,'+'\x200.0,\x20abs('+'centerProj'+'.w));\x0a\x0a\x20\x20\x20'+'\x20center.vi'+'ew\x20=\x20cente'+'rView.xyz\x20'+'/\x20centerVi'+'ew.w;\x0a\x20\x20\x20\x20'+'center.pro'+'j\x20=\x20center'+'Proj;\x0a\x20\x20\x20\x20'+'center.pro'+'jMat00\x20=\x20u'+'niform.mat'+'rix_projec'+'tion[0][0]'+';\x0a\x20\x20\x20\x20cent'+'er.modelVi'+'ew\x20=\x20model'+'View;\x0a\x20\x20\x20\x20'+'return\x20tru'+'e;\x0a}\x0a',HM='\x0a\x0avar\x20spla'+'tColor:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20r'+'eadColor(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20tex'+'tureLoad(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a}\x0a',WM='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20order:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20id:\x20u3'+'2,\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'uv:\x20vec2<i'+'32>,\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20corn'+'erUV:\x20vec2'+'f,\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a}\x0a\x0a'+'//\x20stores\x20'+'the\x20camera'+'\x20and\x20clip\x20'+'space\x20posi'+'tion\x20of\x20th'+'e\x20gaussian'+'\x20center\x0ast'+'ruct\x20Splat'+'Center\x20{\x0a\x20'+'\x20\x20\x20view:\x20v'+'ec3f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20vi'+'ew\x20space\x0a\x20'+'\x20\x20\x20proj:\x20v'+'ec4f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20cl'+'ip\x20space\x0a\x20'+'\x20\x20\x20modelVi'+'ew:\x20mat4x4'+'f,\x20\x20\x20//\x20mo'+'del-view\x20m'+'atrix\x0a\x20\x20\x20\x20'+'projMat00:'+'\x20f32,\x20\x20\x20\x20\x20'+'\x20\x20//\x20eleme'+'mt\x20[0][0]\x20'+'of\x20the\x20pro'+'jection\x20ma'+'trix\x0a}\x0a\x0a//'+'\x20stores\x20th'+'e\x20offset\x20f'+'rom\x20center'+'\x20for\x20the\x20c'+'urrent\x20gau'+'ssian\x0astru'+'ct\x20SplatCo'+'rner\x20{\x0a\x20\x20\x20'+'\x20offset:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20corn'+'er\x20offset\x20'+'from\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'uv:\x20vec2f,'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20aaFactor:'+'\x20f32,\x20//\x20f'+'or\x20scenes\x20'+'generated\x20'+'with\x20antia'+'liasing\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0a#include'+'\x20\x22gsplatEv'+'alSHVS\x22\x0a#i'+'nclude\x20\x22gs'+'platQuatTo'+'Mat3VS\x22\x0a\x0a#'+'if\x20GSPLAT_'+'COMPRESSED'+'_DATA\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatComp'+'ressedData'+'VS\x22\x0a\x20\x20\x20\x20#i'+('f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsDataVS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tSogsColor'+'VS\x22\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsSHVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#else\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatData'+'VS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22gs'+'platColorV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0afn\x20'+'clipCorner'+'(corner:\x20p'+'tr<functio'+'n,\x20SplatCo'+'rner>,\x20alp'+'ha:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'lip:\x20f32\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20(255'+'.0\x20*\x20alpha'+')))\x20/\x202.0)'+';\x0a\x20\x20\x20\x20corn'+'er.offset\x20'+'=\x20corner.o'+'ffset\x20*\x20cl'+'ip;\x0a\x20\x20\x20\x20co'+'rner.uv\x20=\x20'+'corner.uv\x20'+'*\x20clip;\x0a}\x0a'+'\x0a'),$M='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0avar'+'\x20chunkText'+'ure:\x20textu'+'re_2d<f32>'+';\x0a\x0a//\x20work'+'\x20values\x0ava'+'r<private>'+'\x20chunkData'+'A:\x20vec4f;\x20'+'\x20\x20\x20//\x20x:\x20m'+'in_x,\x20y:\x20m'+'in_y,\x20z:\x20m'+'in_z,\x20w:\x20m'+'ax_x\x0avar<p'+'rivate>\x20ch'+'unkDataB:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20max_'+'y,\x20y:\x20max_'+'z,\x20z:\x20scal'+'e_min_x,\x20w'+':\x20scale_mi'+'n_y\x0avar<pr'+'ivate>\x20chu'+'nkDataC:\x20v'+'ec4f;\x20\x20\x20\x20/'+'/\x20x:\x20scale'+'_min_z,\x20y:'+'\x20scale_max'+'_x,\x20z:\x20sca'+'le_max_y,\x20'+'w:\x20scale_m'+'ax_z\x0avar<p'+'rivate>\x20ch'+'unkDataD:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20min_'+'r,\x20y:\x20min_'+'g,\x20z:\x20min_'+'b,\x20w:\x20max_'+'r\x0avar<priv'+'ate>\x20chunk'+'DataE:\x20vec'+'4f;\x20\x20\x20\x20//\x20'+'x:\x20max_g,\x20'+'y:\x20max_b,\x20'+'z:\x20unused,'+'\x20w:\x20unused'+'\x0avar<priva'+'te>\x20packed'+'Data:\x20vec4'+'u;\x20\x20\x20\x20//\x20x'+':\x20position'+'\x20bits,\x20y:\x20'+'rotation\x20b'+'its,\x20z:\x20sc'+'ale\x20bits,\x20'+'w:\x20color\x20b'+'its\x0a\x0afn\x20un'+'pack111011'+'(bits:\x20u32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(vec3f'+'((vec3<u32'+'>(bits)\x20>>'+'\x20vec3<u32>'+'(21u,\x2011u,'+'\x200u))\x20&\x20ve'+'c3<u32>(0x'+'7ffu,\x200x3f'+'fu,\x200x7ffu'+')))\x20/\x20vec3'+'f(2047.0,\x20'+'1023.0,\x2020'+'47.0);\x0a}\x0a\x0a'+'fn\x20unpack8'+'888(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20f32((bit'+'s\x20>>\x2024u)\x20'+'&\x200xffu),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((bits\x20>>'+'\x2016u)\x20&\x200x'+'ffu),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20f32((b'+'its\x20>>\x208u)'+'\x20\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(bits\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20&\x200'+'xffu)\x0a\x20\x20\x20\x20'+')\x20/\x20255.0;'+('\x0a}\x0a\x0aconst\x20'+'norm_const'+':\x20f32\x20=\x201.'+'0\x20/\x20(sqrt('+'2.0)\x20*\x200.5'+');\x0a\x0afn\x20unp'+'ackRotatio'+'n(bits:\x20u3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x20(f32'+'((bits\x20>>\x20'+'20u)\x20&\x200x3'+'ffu)\x20/\x20102'+'3.0\x20-\x200.5)'+'\x20*\x20norm_co'+'nst;\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20(f3'+'2((bits\x20>>'+'\x2010u)\x20&\x200x'+'3ffu)\x20/\x2010'+'23.0\x20-\x200.5'+')\x20*\x20norm_c'+'onst;\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20(f'+'32(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+'_const;\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'sqrt(1.0\x20-'+'\x20(a\x20*\x20a\x20+\x20'+'b\x20*\x20b\x20+\x20c\x20'+'*\x20c));\x0a\x0a\x20\x20'+'\x20\x20let\x20mode'+'\x20=\x20bits\x20>>'+'\x2030u;\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x200u)\x20{\x20re'+'turn\x20vec4f'+'(m,\x20a,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20m,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x202u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20b,\x20m,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(a,\x20b,\x20c'+',\x20m);\x0a}\x0a\x0a/'+'/\x20read\x20cen'+'ter\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex_siz'+'e_u\x20=\x20text'+'ureDimensi'+'ons(chunkT'+'exture,\x200)'+';\x0a\x20\x20\x20\x20let\x20'+'w:\x20u32\x20=\x20t'+'ex_size_u.'+'x\x20/\x205u;\x0a\x20\x20'+'\x20\x20let\x20chun'+'kId:\x20u32\x20='+'\x20source.id'+'\x20/\x20256u;\x0a\x20'+'\x20\x20\x20let\x20chu'+'nkUV:\x20vec2'+'<i32>\x20=\x20ve'+'c2<i32>(i3'+'2((chunkId'+'\x20%\x20w)\x20*\x205u'+'),\x20i32(chu'+'nkId\x20/\x20w))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'read\x20chunk'+'\x20and\x20packe'+'d\x20compress'+'ed\x20data\x0a\x20\x20'+'\x20\x20chunkDat'+'aA\x20=\x20textu'+'reLoad(chu'+'nkTexture,'+'\x20chunkUV\x20+'+'\x20vec2<i32>'+'(0,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataB\x20=\x20t'+'extureLoad')+('(chunkText'+'ure,\x20chunk'+'UV\x20+\x20vec2<'+'i32>(1,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataC'+'\x20=\x20texture'+'Load(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20v'+'ec2<i32>(2'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataD\x20=\x20tex'+'tureLoad(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20vec2<i3'+'2>(3,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataE\x20='+'\x20textureLo'+'ad(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20vec'+'2<i32>(4,\x20'+'0),\x200);\x0a\x20\x20'+'\x20\x20packedDa'+'ta\x20=\x20textu'+'reLoad(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(chunkDa'+'taA.xyz,\x20v'+'ec3f(chunk'+'DataA.w,\x20c'+'hunkDataB.'+'xy),\x20unpac'+'k111011(pa'+'ckedData.x'+'));\x0a}\x0a\x0afn\x20'+'readColor('+'source:\x20pt'+'r<function'+',\x20SplatSou'+'rce>)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20let\x20r\x20=\x20u'+'npack8888('+'packedData'+'.w);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(mix(chun'+'kDataD.xyz'+',\x20vec3f(ch'+'unkDataD.w'+',\x20chunkDat'+'aE.xy),\x20r.'+'rgb),\x20r.w)'+';\x0a}\x0a\x0afn\x20ge'+'tRotation('+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20unpack'+'Rotation(p'+'ackedData.'+'y);\x0a}\x0a\x0afn\x20'+'getScale()'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20exp(mix'+'(vec3f(chu'+'nkDataB.zw'+',\x20chunkDat'+'aC.x),\x20chu'+'nkDataC.yz'+'w,\x20unpack1'+'11011(pack'+'edData.z))'+');\x0a}\x0a\x0a//\x20g'+'iven\x20a\x20rot'+'ation\x20matr'+'ix\x20and\x20sca'+'le\x20vector,'+'\x20compute\x203'+'d\x20covarian'+'ce\x20A\x20and\x20B'+'\x0afn\x20readCo'+'variance(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>,\x20covA_'+'ptr:\x20ptr<f'+'unction,\x20v'+'ec3f>,\x20cov'+'B_ptr:\x20ptr'+'<function,')+('\x20vec3f>)\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'ot\x20=\x20quatT'+'oMat3(getR'+'otation())'+';\x0a\x20\x20\x20\x20let\x20'+'scale\x20=\x20ge'+'tScale();\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20let\x20M\x20=\x20'+'transpose('+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.x\x20*\x20rot'+'[0],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.y'+'\x20*\x20rot[1],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.z\x20*\x20r'+'ot[2]\x0a\x20\x20\x20\x20'+'));\x0a\x0a\x20\x20\x20\x20*'+'covA_ptr\x20='+'\x20vec3f(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20*covB_p'+'tr\x20=\x20vec3f'+'(dot(M[1],'+'\x20M[1]),\x20do'+'t(M[1],\x20M['+'2]),\x20dot(M'+'[2],\x20M[2])'+');\x0a}\x0a'),XM='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0av'+'ar\x20shTextu'+'re0:\x20textu'+'re_2d<u32>'+';\x0avar\x20shTe'+'xture1:\x20te'+'xture_2d<u'+'32>;\x0avar\x20s'+'hTexture2:'+'\x20texture_2'+'d<u32>;\x0a\x0af'+'n\x20unpack88'+'88s(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20unpack'+'ed_u\x20=\x20(ve'+'c4<u32>(bi'+'ts)\x20>>\x20vec'+'4<u32>(0u,'+'\x208u,\x2016u,\x20'+'24u))\x20&\x20ve'+'c4<u32>(0x'+'ffu);\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(unpacke'+'d_u)\x20*\x20(8.'+'0\x20/\x20255.0)'+'\x20-\x204.0;\x0a}\x0a'+'\x0afn\x20readSH'+'Data(sourc'+'e:\x20ptr<fun'+'ction,\x20Spl'+'atSource>,'+'\x20sh:\x20ptr<f'+'unction,\x20a'+'rray<vec3f'+',\x2015>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20read\x20t'+'he\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20let\x20shD'+'ata0:\x20vec4'+'<u32>\x20=\x20te'+'xtureLoad('+'shTexture0'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20let\x20shDat'+'a1:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(sh'+'Texture1,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20shData2'+':\x20vec4<u32'+'>\x20=\x20textur'+'eLoad(shTe'+'xture2,\x20so'+'urce.uv,\x200'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20r0\x20=\x20unp'+'ack8888s(s'+'hData0.x);'+'\x0a\x20\x20\x20\x20let\x20r'+'1\x20=\x20unpack'+'8888s(shDa'+'ta0.y);\x0a\x20\x20'+'\x20\x20let\x20r2\x20='+'\x20unpack888'+'8s(shData0'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20r3\x20=\x20un'+'pack8888s('+'shData0.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20g0\x20=\x20unpa'+'ck8888s(sh'+'Data1.x);\x0a'+'\x20\x20\x20\x20let\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20let\x20g2\x20=\x20'+'unpack8888'+'s(shData1.'+'z);\x0a\x20\x20\x20\x20le'+'t\x20g3\x20=\x20unp'+'ack8888s(s'+'hData1.w);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'b0\x20=\x20unpac'+'k8888s(shD'+'ata2.x);\x0a\x20'+'\x20\x20\x20let\x20b1\x20'+('=\x20unpack88'+'88s(shData'+'2.y);\x0a\x20\x20\x20\x20'+'let\x20b2\x20=\x20u'+'npack8888s'+'(shData2.z'+');\x0a\x20\x20\x20\x20let'+'\x20b3\x20=\x20unpa'+'ck8888s(sh'+'Data2.w);\x0a'+'\x0a\x20\x20\x20\x20sh[0]'+'\x20=\x20\x20vec3f('+'r0.x,\x20g0.x'+',\x20b0.x);\x0a\x20'+'\x20\x20\x20sh[1]\x20='+'\x20\x20vec3f(r0'+'.y,\x20g0.y,\x20'+'b0.y);\x0a\x20\x20\x20'+'\x20sh[2]\x20=\x20\x20'+'vec3f(r0.z'+',\x20g0.z,\x20b0'+'.z);\x0a\x20\x20\x20\x20s'+'h[3]\x20=\x20\x20ve'+'c3f(r0.w,\x20'+'g0.w,\x20b0.w'+');\x0a\x20\x20\x20\x20sh['+'4]\x20=\x20\x20vec3'+'f(r1.x,\x20g1'+'.x,\x20b1.x);'+'\x0a\x20\x20\x20\x20sh[5]'+'\x20=\x20\x20vec3f('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3f(r1'+'.z,\x20g1.z,\x20'+'b1.z);\x0a\x20\x20\x20'+'\x20sh[7]\x20=\x20\x20'+'vec3f(r1.w'+',\x20g1.w,\x20b1'+'.w);\x0a\x20\x20\x20\x20s'+'h[8]\x20=\x20\x20ve'+'c3f(r2.x,\x20'+'g2.x,\x20b2.x'+');\x0a\x20\x20\x20\x20sh['+'9]\x20=\x20\x20vec3'+'f(r2.y,\x20g2'+'.y,\x20b2.y);'+'\x0a\x20\x20\x20\x20sh[10'+']\x20=\x20vec3f('+'r2.z,\x20g2.z'+',\x20b2.z);\x0a\x20'+'\x20\x20\x20sh[11]\x20'+'=\x20vec3f(r2'+'.w,\x20g2.w,\x20'+'b2.w);\x0a\x20\x20\x20'+'\x20sh[12]\x20=\x20'+'vec3f(r3.x'+',\x20g3.x,\x20b3'+'.x);\x0a\x20\x20\x20\x20s'+'h[13]\x20=\x20ve'+'c3f(r3.y,\x20'+'g3.y,\x20b3.y'+');\x0a\x20\x20\x20\x20sh['+'14]\x20=\x20vec3'+'f(r3.z,\x20g3'+'.z,\x20b3.z);'+'\x0a\x0a\x20\x20\x20\x20*sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),qM='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'COEFFS:\x20i3'+'2\x20=\x203;\x0a\x20\x20\x20'+'\x20#elif\x20SH_'+'BANDS\x20==\x202'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20SH_CO'+'EFFS:\x20i32\x20'+'=\x208;\x0a\x20\x20\x20\x20#'+'elif\x20SH_BA'+'NDS\x20==\x203\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20con'+'st\x20SH_COEF'+'FS:\x20i32\x20=\x20'+'15;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20const\x20SH'+'_COEFFS:\x20i'+'32\x20=\x200;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20SH'+'_BANDS\x20>\x200'+'\x0a\x0a\x20\x20\x20\x20cons'+'t\x20SH_C1:\x20f'+'32\x20=\x200.488'+'6025119029'+'199;\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x201\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20const'+'\x20SH_C2_0:\x20'+'f32\x20=\x201.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_1:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_2:\x20f'+'32\x20=\x200.315'+'3915652525'+'2005;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_3:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_4:\x20f'+'32\x20=\x200.546'+'2742152960'+'396;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SH_BA'+'NDS\x20>\x202\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_0:'+'\x20f32\x20=\x20-0.'+'5900435899'+'266435;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_1:'+'\x20f32\x20=\x202.8'+'9061144264'+'0554;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_2:\x20f'+'32\x20=\x20-0.45'+'7045799464'+'4658;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_3:\x20f'+'32\x20=\x200.373'+'1763325901'+'154;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_4:\x20f3'+'2\x20=\x20-0.457'+'0457994644'+'658;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_5:\x20f3'+'2\x20=\x201.4453'+'0572132027'+'7;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'C3_6:\x20f32\x20'+'=\x20-0.59004'+'3589926643'+'5;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20see\x20http'+'s://github'+'.com/graph'+'deco-inria'+('/gaussian-'+'splatting/'+'blob/main/'+'utils/sh_u'+'tils.py\x0a\x20\x20'+'\x20\x20fn\x20evalS'+'H(sh:\x20ptr<'+'function,\x20'+'array<vec3'+'f,\x20SH_COEF'+'FS>>,\x20dir:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x\x20=\x20dir.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20y\x20=\x20di'+'r.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20z\x20='+'\x20dir.z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'1st\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20result\x20'+'=\x20SH_C1\x20*\x20'+'(-sh[0]\x20*\x20'+'y\x20+\x20sh[1]\x20'+'*\x20z\x20-\x20sh[2'+']\x20*\x20x);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x201\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x202'+'nd\x20degree\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xx\x20='+'\x20x\x20*\x20x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20yy\x20=\x20y'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20zz\x20=\x20z\x20*'+'\x20z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20yz'+'\x20=\x20y\x20*\x20z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xz\x20='+'\x20x\x20*\x20z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'result\x20+\x20('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'3]\x20*\x20(SH_C'+'2_0\x20*\x20xy)\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[4]\x20*\x20(SH_'+'C2_1\x20*\x20yz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[5]\x20*\x20(SH'+'_C2_2\x20*\x20(2'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[6]\x20*\x20(SH_'+'C2_3\x20*\x20xz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[7]\x20*\x20(SH'+'_C2_4\x20*\x20(x'+'x\x20-\x20yy))\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'=\x20result\x20+'+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20re'+'sult;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20#end'+'if\x0a'),jM='\x0afn\x20quatTo'+'Mat3(R:\x20ve'+'c4<f32>)\x20-'+'>\x20mat3x3<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'let\x20R2:\x20ve'+'c4<f32>\x20=\x20'+'R\x20+\x20R;\x0a\x20\x20\x20'+'\x20let\x20X:\x20f3'+'2\x20\x20\x20\x20\x20\x20\x20=\x20'+'R2.x\x20*\x20R.w'+';\x0a\x20\x20\x20\x20let\x20'+'Y:\x20vec4<f3'+'2>\x20=\x20R2.y\x20'+'*\x20R;\x0a\x20\x20\x20\x20l'+'et\x20Z:\x20vec4'+'<f32>\x20=\x20R2'+'.z\x20*\x20R;\x0a\x20\x20'+'\x20\x20let\x20W:\x20f'+'32\x20\x20\x20\x20\x20\x20\x20='+'\x20R2.w\x20*\x20R.'+'w;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20mat3x'+'3<f32>(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Z.z\x20-\x20W,'+'\x20\x20Y.z\x20+\x20X,'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.z\x20-'+'\x20X,\x20\x20\x20\x20\x20\x20\x20'+'\x201.0\x20-\x20Y.y'+'\x20-\x20W,\x20Z.w\x20'+'+\x20Y.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.w\x20+'+'\x20Z.x,\x20\x20\x20\x20\x20'+'\x20Z.w\x20-\x20Y.x'+',\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',YM='\x0avar\x20sh0:\x20'+'texture_2d'+'<f32>;\x0a\x0aun'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0auniform'+'\x20sh0_maxs:'+'\x20vec4f;\x0a\x0ac'+'onst\x20SH_C0'+':\x20f32\x20=\x200.'+'2820947917'+'7387814;\x0a\x0a'+'fn\x20readCol'+'or(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20let\x20cl'+'r:\x20vec4f\x20='+'\x20mix(unifo'+'rm.sh0_min'+'s,\x20uniform'+'.sh0_maxs,'+'\x20textureLo'+'ad(sh0,\x20so'+'urce.uv,\x200'+'));\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(vec3f(0.5'+')\x20+\x20clr.xy'+'z\x20*\x20SH_C0,'+'\x201.0\x20/\x20(1.'+'0\x20+\x20exp(-c'+'lr.w)));\x0a}'+'\x0a',KM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0a\x0aun'+'iform\x20mean'+'s_mins:\x20ve'+'c3f;\x0aunifo'+'rm\x20means_m'+'axs:\x20vec3f'+';\x0a\x0auniform'+'\x20scales_mi'+'ns:\x20vec3f;'+'\x0auniform\x20s'+'cales_maxs'+':\x20vec3f;\x0a\x0a'+'fn\x20unpackU'+'32(u:\x20u32)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20vec4f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((u\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((u\x20>>\x201'+'6u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((u\x20>>\x20'+'8u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(u\x20&\x200x'+'FFu)\x20/\x20255'+'.0\x0a\x20\x20\x20\x20);\x0a'+'}\x0a\x0avar<pri'+'vate>\x20pack'+'edSample:\x20'+'vec4<u32>;'+'\x0a\x0a//\x20read\x20'+'the\x20model-'+'space\x20cent'+'er\x20of\x20the\x20'+'gaussian\x0af'+'n\x20readCent'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec3f\x20{\x0a'+'\x0a\x20\x20\x20\x20packe'+'dSample\x20=\x20'+'textureLoa'+'d(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20l:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.x).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20u:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20n:\x20vec3f\x20'+'=\x20(l\x20*\x20255'+'.0\x20+\x20u\x20*\x202'+'55.0\x20*\x20256'+'.0)\x20/\x206553'+'5.0;\x0a\x20\x20\x20\x20l'+'et\x20v:\x20vec3'+'f\x20=\x20mix(un'+'iform.mean'+'s_mins,\x20un'+'iform.mean'+'s_maxs,\x20n)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20sign(v'+')\x20*\x20(exp(a'+'bs(v))\x20-\x201'+'.0);\x0a}\x0a\x0aco'+'nst\x20norm:\x20'+'f32\x20=\x202.0\x20'+'/\x20sqrt(2.0'+');\x0a\x0a//\x20sam'+'ple\x20covari'+'ance\x20vecto'+'rs\x0afn\x20read'+'Covariance'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>,\x20cov'+'A_ptr:\x20ptr'+'<function,'+'\x20vec3f>,\x20c'+('ovB_ptr:\x20p'+'tr<functio'+'n,\x20vec3f>)'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20qdata:\x20ve'+'c4f\x20=\x20unpa'+'ckU32(pack'+'edSample.z'+');\x0a\x20\x20\x20\x20let'+'\x20sdata:\x20ve'+'c3f\x20=\x20unpa'+'ckU32(pack'+'edSample.w'+').xyz;\x0a\x0a\x20\x20'+'\x20\x20let\x20abc:'+'\x20vec3f\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(abc,'+'\x20abc)));\x0a\x0a'+'\x20\x20\x20\x20let\x20mo'+'de:\x20u32\x20=\x20'+'u32(qdata.'+'w\x20*\x20255.0\x20'+'+\x200.5)\x20-\x202'+'52u;\x0a\x0a\x20\x20\x20\x20'+'var\x20quat:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20if\x20(mode\x20'+'==\x200u)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20qua'+'t\x20=\x20vec4f('+'d,\x20abc);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20quat'+'\x20=\x20vec4f(a'+'bc.x,\x20d,\x20a'+'bc.y,\x20abc.'+'z);\x0a\x20\x20\x20\x20}\x20'+'else\x20if\x20(m'+'ode\x20==\x202u)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20quat\x20=\x20ve'+'c4f(abc.x,'+'\x20abc.y,\x20d,'+'\x20abc.z);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'quat\x20=\x20vec'+'4f(abc.x,\x20'+'abc.y,\x20abc'+'.z,\x20d);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x0a\x20\x20\x20\x20'+'let\x20rot:\x20m'+'at3x3f\x20=\x20q'+'uatToMat3('+'quat);\x0a\x20\x20\x20'+'\x20let\x20scale'+':\x20vec3f\x20=\x20'+'exp(mix(un'+'iform.scal'+'es_mins,\x20u'+'niform.sca'+'les_maxs,\x20'+'sdata));\x0a\x0a'+'\x20\x20\x20\x20//\x20M\x20='+'\x20S\x20*\x20R\x0a\x20\x20\x20'+'\x20let\x20M:\x20ma'+'t3x3f\x20=\x20tr'+'anspose(ma'+'t3x3f(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20*co'+'vA_ptr\x20=\x20v'+'ec3f(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20*covB_ptr'+'\x20=\x20vec3f(d'+'ot(M[1],\x20M'+'[1]),\x20dot('+'M[1],\x20M[2]'+'),\x20dot(M[2'+'],\x20M[2]));')+'\x0a}\x0a',ZM='\x0avar\x20sh_ce'+'ntroids:\x20t'+'exture_2d<'+'f32>;\x0a\x0auni'+'form\x20shN_m'+'ins:\x20f32;\x0a'+'uniform\x20sh'+'N_maxs:\x20f3'+'2;\x0a\x0afn\x20rea'+'dSHData(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>,\x20sh:\x20pt'+'r<function'+',\x20array<ve'+'c3f,\x20SH_CO'+'EFFS>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'let\x20t:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'32(packedS'+'ample.x\x20&\x20'+'255u),\x20i32'+'(packedSam'+'ple.y\x20&\x2025'+'5u));\x0a\x20\x20\x20\x20'+'let\x20n:\x20i32'+'\x20=\x20t.x\x20+\x20t'+'.y\x20*\x20256;\x0a'+'\x20\x20\x20\x20let\x20u:'+'\x20i32\x20=\x20(n\x20'+'%\x2064)\x20*\x20SH'+'_COEFFS;\x0a\x20'+'\x20\x20\x20let\x20v:\x20'+'i32\x20=\x20n\x20/\x20'+'64;\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20offset\x20i'+'nto\x20the\x20ce'+'ntroids\x20te'+'xture\x20and\x20'+'read\x20conse'+'cutive\x20tex'+'els\x0a\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'i32\x20=\x200;\x20i'+'\x20<\x20SH_COEF'+'FS;\x20i\x20=\x20i\x20'+'+\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[i]'+'\x20=\x20mix(vec'+'3f(uniform'+'.shN_mins)'+',\x20vec3f(un'+'iform.shN_'+'maxs),\x20tex'+'tureLoad(s'+'h_centroid'+'s,\x20vec2<i3'+'2>(u\x20+\x20i,\x20'+'v),\x200).xyz'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20*scale'+'\x20=\x201.0;\x0a}\x0a',QM='\x0auniform\x20v'+'iewport:\x20v'+'ec2f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20view'+'port\x20dimen'+'sions\x0aunif'+'orm\x20camera'+'_params:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201\x20/\x20far,\x20'+'far,\x20near,'+'\x20isOrtho\x0a\x0a'+'//\x20calcula'+'te\x20the\x20cli'+'p-space\x20of'+'fset\x20from\x20'+'the\x20center'+'\x20for\x20this\x20'+'gaussian\x0af'+'n\x20initCorn'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>,\x20corne'+'r:\x20ptr<fun'+'ction,\x20Spl'+'atCorner>)'+'\x20->\x20bool\x20{'+'\x0a\x20\x20\x20\x20//\x20ge'+'t\x20covarian'+'ce\x0a\x20\x20\x20\x20var'+'\x20covA:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20covB:\x20ve'+'c3f;\x0a\x20\x20\x20\x20r'+'eadCovaria'+'nce(source'+',\x20&covA,\x20&'+'covB);\x0a\x0a\x20\x20'+'\x20\x20let\x20Vrk\x20'+'=\x20mat3x3f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(covA.'+'x,\x20covA.y,'+'\x20covA.z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(covA.y'+',\x20covB.x,\x20'+'covB.y),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(covA.z,'+'\x20covB.y,\x20c'+'ovB.z)\x0a\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20l'+'et\x20focal\x20='+'\x20uniform.v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20let\x20v'+'\x20=\x20select('+'center.vie'+'w.xyz,\x20vec'+'3f(0.0,\x200.'+'0,\x201.0),\x20u'+'niform.cam'+'era_params'+'.w\x20==\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'J1\x20=\x20focal'+'\x20/\x20v.z;\x0a\x20\x20'+'\x20\x20let\x20J2\x20='+'\x20-J1\x20/\x20v.z'+'\x20*\x20v.xy;\x0a\x20'+'\x20\x20\x20let\x20J\x20='+'\x20mat3x3f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(J1,\x200.'+'0,\x20J2.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x20J'+'1,\x20J2.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x200'+'.0,\x200.0)\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20W\x20=\x20t'+'ranspose(m'+'at3x3f(cen'+'ter.modelV'+'iew[0].xyz'+',\x20center.m'+'odelView[1'+'].xyz,\x20cen'+('ter.modelV'+'iew[2].xyz'+'));\x0a\x20\x20\x20\x20le'+'t\x20T\x20=\x20W\x20*\x20'+'J;\x0a\x20\x20\x20\x20let'+'\x20cov\x20=\x20tra'+'nspose(T)\x20'+'*\x20Vrk\x20*\x20T;'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'GSPLAT_AA\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20calculate'+'\x20AA\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20detOrig'+'\x20=\x20cov[0]['+'0]\x20*\x20cov[1'+'][1]\x20-\x20cov'+'[0][1]\x20*\x20c'+'ov[1][0];\x20'+'//\x20Using\x20['+'0][1]\x20*\x20[1'+'][0]\x20as\x20ma'+'trix\x20might'+'\x20not\x20be\x20pe'+'rfectly\x20sy'+'mmetric\x20nu'+'merically\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20detBlur\x20'+'=\x20(cov[0]['+'0]\x20+\x200.3)\x20'+'*\x20(cov[1]['+'1]\x20+\x200.3)\x20'+'-\x20cov[0][1'+']\x20*\x20cov[1]'+'[0];\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20corner.'+'aaFactor\x20='+'\x20sqrt(detO'+'rig\x20/\x20detB'+'lur);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal1\x20=\x20co'+'v[0][0]\x20+\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20offDiag'+'onal\x20=\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal2\x20=\x20co'+'v[1][1]\x20+\x20'+'0.3;\x0a\x0a\x20\x20\x20\x20'+'let\x20mid\x20=\x20'+'0.5\x20*\x20(dia'+'gonal1\x20+\x20d'+'iagonal2);'+'\x0a\x20\x20\x20\x20let\x20r'+'adius\x20=\x20le'+'ngth(vec2f'+'((diagonal'+'1\x20-\x20diagon'+'al2)\x20/\x202.0'+',\x20offDiago'+'nal));\x0a\x20\x20\x20'+'\x20let\x20lambd'+'a1\x20=\x20mid\x20+'+'\x20radius;\x0a\x20'+'\x20\x20\x20let\x20lam'+'bda2\x20=\x20max'+'(mid\x20-\x20rad'+'ius,\x200.1);'+'\x0a\x0a\x20\x20\x20\x20//\x20U'+'se\x20the\x20sma'+'ller\x20viewp'+'ort\x20dimens'+'ion\x20to\x20lim'+'it\x20the\x20ker'+'nel\x20size\x20r'+'elative\x20to'+'\x20the\x20scree'+'n\x20resoluti'+'on.\x0a\x20\x20\x20\x20le'+'t\x20vmin\x20=\x20m'+'in(1024.0,'+'\x20min(unifo'+'rm.viewpor'+'t.x,\x20unifo'+'rm.viewpor'+'t.y));\x0a\x0a\x20\x20'+'\x20\x20let\x20l1\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda1)'+',\x20vmin);\x0a\x20'+'\x20\x20\x20let\x20l2\x20'+'=\x202.0\x20*\x20mi'+'n(sqrt(2.0'+'\x20*\x20lambda2')+('),\x20vmin);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly-out\x20ga'+'ussians\x20sm'+'aller\x20than'+'\x202\x20pixels\x0a'+'\x20\x20\x20\x20if\x20(l1'+'\x20<\x202.0\x20&&\x20'+'l2\x20<\x202.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20fal'+'se;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'uniform.vi'+'ewport;\x0a\x0a\x20'+'\x20\x20\x20//\x20cull'+'\x20against\x20f'+'rustum\x20x/y'+'\x20axes\x0a\x20\x20\x20\x20'+'if\x20(any((a'+'bs(center.'+'proj.xy)\x20-'+'\x20vec2f(max'+'(l1,\x20l2))\x20'+'*\x20c)\x20>\x20cen'+'ter.proj.w'+'w))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20diagona'+'lVector\x20=\x20'+'normalize('+'vec2f(offD'+'iagonal,\x20l'+'ambda1\x20-\x20d'+'iagonal1))'+';\x0a\x20\x20\x20\x20let\x20'+'v1\x20=\x20l1\x20*\x20'+'diagonalVe'+'ctor;\x0a\x20\x20\x20\x20'+'let\x20v2\x20=\x20l'+'2\x20*\x20vec2f('+'diagonalVe'+'ctor.y,\x20-d'+'iagonalVec'+'tor.x);\x20//'+'\x20Swizzle\x0a\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20=\x20'+'(source.co'+'rnerUV.x\x20*'+'\x20v1\x20+\x20sour'+'ce.cornerU'+'V.y\x20*\x20v2)\x20'+'*\x20c;\x0a\x20\x20\x20\x20c'+'orner.uv\x20='+'\x20source.co'+'rnerUV;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),JM='\x0avar\x20trans'+'formA:\x20tex'+'ture_2d<u3'+'2>;\x0avar\x20tr'+'ansformB:\x20'+'texture_2d'+'<f32>;\x0a\x0a//'+'\x20work\x20valu'+'es\x0avar<pri'+'vate>\x20tAw:'+'\x20u32;\x0a\x0a//\x20'+'read\x20the\x20m'+'odel-space'+'\x20center\x20of'+'\x20the\x20gauss'+'ian\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20let\x20'+'tA:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(tr'+'ansformA,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20t'+'Aw\x20=\x20tA.w;'+'\x0a\x20\x20\x20\x20retur'+'n\x20bitcast<'+'vec3f>(tA.'+'xyz);\x0a}\x0a\x0af'+'n\x20unpackRo'+'tation(pac'+'ked:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'packed.xyz'+',\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(pack'+'ed,\x20packed'+'))));\x0a}\x0a\x0a/'+'/\x20sample\x20c'+'ovariance\x20'+'vectors\x0afn'+'\x20readCovar'+'iance(sour'+'ce:\x20ptr<fu'+'nction,\x20Sp'+'latSource>'+',\x20covA_ptr'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20covB_p'+'tr:\x20ptr<fu'+'nction,\x20ve'+'c3f>)\x20{\x0a\x20\x20'+'\x20\x20let\x20tB:\x20'+'vec4f\x20=\x20te'+'xtureLoad('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20let\x20rot:'+'\x20mat3x3f\x20='+'\x20quatToMat'+'3(unpackRo'+'tation(vec'+'3f(unpack2'+'x16float(b'+'itcast<u32'+'>(tAw)),\x20t'+'B.w)).wxyz'+');\x0a\x20\x20\x20\x20let'+'\x20scale:\x20ve'+'c3f\x20=\x20tB.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x20M\x20=\x20S\x20*\x20'+'R\x0a\x20\x20\x20\x20let\x20'+'M\x20=\x20transp'+'ose(mat3x3'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20*covA_p'+'tr\x20=\x20vec3f'+'(dot(M[0],'+'\x20M[0]),\x20do'+('t(M[0],\x20M['+'1]),\x20dot(M'+'[0],\x20M[2])'+');\x0a\x20\x20\x20\x20*co'+'vB_ptr\x20=\x20v'+'ec3f(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a'),eD='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0afn\x20'+'prepareOut'+'putFromGam'+'ma(gammaCo'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20TONEMAP\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20G'+'AMMA\x20==\x20NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'nvert\x20to\x20l'+'inear\x20spac'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20decodeGam'+'ma3(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20gamma\x20'+'space\x20colo'+'r\x20directly'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'gammaColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ap'+'ply\x20tonema'+'pping\x20in\x20l'+'inear\x20spac'+'e\x20and\x20outp'+'ut\x20to\x20line'+'ar\x20or\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20gam'+'ma\x20(which\x20'+'is\x20handled'+'\x20by\x20gammaC'+'orrectOutp'+'ut)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaCorrec'+'tOutput(to'+'neMap(deco'+'deGamma3(g'+'ammaColor)'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',tD='\x0a\x0a#ifndef\x20'+'DITHER_NON'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22baye'+'rPS\x22\x0a\x20\x20\x20\x20#'+'include\x20\x22o'+'pacityDith'+'erPS\x22\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20PICK_PAS'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22pick'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_PASS)\x20||\x20'+'defined(PI'+'CK_PASS)\x20|'+'|\x20defined('+'PREPASS_PA'+'SS)\x0a\x20\x20\x20\x20un'+'iform\x20alph'+'aClip:\x20f32'+';\x0a#endif\x0a\x0a'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vLinearD'+'epth:\x20f32;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22float'+'AsUintPS\x22\x0a'+'#endif\x0a\x0a//'+'\x20Fast\x20appr'+'oximate\x20e^'+'x\x20based\x20on'+'\x20https://n'+'ic.schraud'+'olph.org/p'+'ubs/Schrau'+'dolph99.pd'+'f\x0aconst\x20EX'+'P_A:\x20f32\x20\x20'+'\x20\x20\x20\x20=\x201210'+'2203.0;\x20\x20\x20'+'//\x20\x202^23\x20'+'/\x20ln(2)\x0aco'+'nst\x20EXP_BC'+'_RMS:\x20i32\x20'+'=\x2010648668'+'08;\x20\x20\x20//\x20('+'127\x20<<\x2023)'+'\x20-\x2060801\x20*'+'\x208\x0afn\x20fast'+'Exp(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20var\x20i'+':\x20i32\x20=\x20i3'+'2(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20bi'+'tcast<f32>'+'(i);\x0a}\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x0a\x20\x20\x20'+'\x20let\x20A:\x20f3'+'2\x20=\x20dot(ga'+'ussianUV,\x20'+'gaussianUV'+');\x0a\x20\x20\x20\x20if\x20'+'(A\x20>\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20alpha'+'\x0a\x20\x20\x20\x20var\x20a'+'lpha:\x20f32\x20'+'=\x20fastExp('+'-A\x20*\x204.0)\x20'+'*\x20gaussian'+('Color.a;\x0a\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(al'+'pha\x20<\x20unif'+'orm.alphaC'+'lip)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20PI'+'CK_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20getPickO'+'utput();\x0a\x0a'+'\x20\x20\x20\x20#elif\x20'+'SHADOW_PAS'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(0.0,\x200.0'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20PREPAS'+'S_PASS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20float2vec'+'4(vLinearD'+'epth);\x0a\x0a\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20('+'1.0\x20/\x20255.'+'0))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20opaci'+'tyDither(&'+'alpha,\x20id\x20'+'*\x200.013);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(input'+'.gaussianC'+'olor.xyz,\x20'+'alpha);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'),sD='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0afn\x20unpack'+'111011s(bi'+'ts:\x20u32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20(vec3f((v'+'ec3<u32>(b'+'its)\x20>>\x20ve'+'c3<u32>(21'+'u,\x2011u,\x200u'+'))\x20&\x20vec3<'+'u32>(0x7ff'+'u,\x200x3ffu,'+'\x200x7ffu))\x20'+'/\x20vec3f(20'+'47.0,\x201023'+'.0,\x202047.0'+'))\x20*\x202.0\x20-'+'\x201.0;\x0a}\x0a\x0as'+'truct\x20Scal'+'eAndSH\x20{\x0a\x20'+'\x20\x20\x20scale:\x20'+'f32,\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f\x0a};\x0a\x0a'+'//\x20fetch\x20q'+'uantized\x20s'+'pherical\x20h'+'armonic\x20co'+'efficients'+'\x0afn\x20fetchS'+'cale(t_in:'+'\x20vec4<u32>'+')\x20->\x20Scale'+'AndSH\x20{\x0a\x20\x20'+'\x20\x20var\x20resu'+'lt:\x20ScaleA'+'ndSH;\x0a\x20\x20\x20\x20'+'result.sca'+'le\x20=\x20bitca'+'st<f32>(t_'+'in.x);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20unpack11'+'1011s(t_in'+'.y);\x0a\x20\x20\x20\x20r'+'esult.b\x20=\x20'+'unpack1110'+'11s(t_in.z'+');\x0a\x20\x20\x20\x20res'+'ult.c\x20=\x20un'+'pack111011'+'s(t_in.w);'+'\x0a\x20\x20\x20\x20retur'+'n\x20result;\x0a'+'}\x0a\x0astruct\x20'+'SH\x20{\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20d:\x20vec3f\x0a'+'};\x0a\x0a//\x20fet'+'ch\x20quantiz'+'ed\x20spheric'+'al\x20harmoni'+'c\x20coeffici'+'ents\x0afn\x20fe'+'tch4(t_in:'+'\x20vec4<u32>'+')\x20->\x20SH\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'sult:\x20SH;\x0a'+'\x20\x20\x20\x20result'+'.a\x20=\x20unpac'+'k111011s(t'+'_in.x);\x0a\x20\x20'+'\x20\x20result.b'+'\x20=\x20unpack1'+'11011s(t_i'+'n.y);\x0a\x20\x20\x20\x20'+'result.c\x20='+'\x20unpack111'+'011s(t_in.'+'z);\x0a\x20\x20\x20\x20re'+'sult.d\x20=\x20u'+'npack11101'+'1s(t_in.w)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20result;'+'\x0a}\x0a\x0afn\x20fet'+'ch1(t_in:\x20'+'u32)\x20->\x20ve'+('c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20unp'+'ack111011s'+'(t_in);\x0a}\x0a'+'\x0a#if\x20SH_BA'+'NDS\x20==\x201\x0a\x20'+'\x20\x20\x20var\x20spl'+'atSH_1to3:'+'\x20texture_2'+'d<u32>;\x0a\x0a\x20'+'\x20\x20\x20fn\x20read'+'SHData(sou'+'rce:\x20ptr<f'+'unction,\x20S'+'platSource'+'>,\x20sh:\x20ptr'+'<function,'+'\x20array<vec'+'3f,\x203>>,\x20s'+'cale:\x20ptr<'+'function,\x20'+'f32>)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'result\x20=\x20f'+'etchScale('+'textureLoa'+'d(splatSH_'+'1to3,\x20sour'+'ce.uv,\x200))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'*scale\x20=\x20r'+'esult.scal'+'e;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[0]\x20=\x20r'+'esult.a;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'1]\x20=\x20resul'+'t.b;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[2]\x20='+'\x20result.c;'+'\x0a\x20\x20\x20\x20}\x0a#el'+'if\x20SH_BAND'+'S\x20==\x202\x0a\x20\x20\x20'+'\x20var\x20splat'+'SH_1to3:\x20t'+'exture_2d<'+'u32>;\x0a\x20\x20\x20\x20'+'var\x20splatS'+'H_4to7:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_8to11:\x20te'+'xture_2d<u'+'32>;\x0a\x0a\x20\x20\x20\x20'+'fn\x20readSHD'+'ata(source'+':\x20ptr<func'+'tion,\x20Spla'+'tSource>,\x20'+'sh:\x20ptr<fu'+'nction,\x20ar'+'ray<vec3f,'+'\x208>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se')+('cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20='+'\x20fetch1(te'+'xtureLoad('+'splatSH_8t'+'o11,\x20sourc'+'e.uv,\x200).x'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_1to3:\x20tex'+'ture_2d<u3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20splatSH_'+'4to7:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_8'+'to11:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_1'+'2to15:\x20tex'+'ture_2d<u3'+'2>;\x0a\x0a\x20\x20\x20\x20f'+'n\x20readSHDa'+'ta(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20s'+'h:\x20ptr<fun'+'ction,\x20arr'+'ay<vec3f,\x20'+'15>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se'+'cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20thi'+'rd:\x20SH\x20=\x20f'+'etch4(text'+'ureLoad(sp'+'latSH_8to1'+'1,\x20source.'+'uv,\x200));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'7]\x20=\x20third'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[8]\x20=\x20'+'third.b;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'9]\x20=\x20third'+'.c;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[10]\x20='+'\x20third.d;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20fourth:'+'\x20SH\x20=\x20fetc'+'h4(texture'+'Load(splat'+'SH_12to15,')+('\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[11'+']\x20=\x20fourth'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[12]\x20='+'\x20fourth.b;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[13]\x20=\x20fo'+'urth.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[1'+'4]\x20=\x20fourt'+'h.d;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a\x0a#'+'endif\x0a'),iD='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c3f;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20xy:\x20'+'cornerUV,\x20'+'z:\x20render\x20'+'order\x20offs'+'et\x0aattribu'+'te\x20vertex_'+'id_attrib:'+'\x20u32;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'nder\x20order'+'\x20base\x0a\x0auni'+'form\x20numSp'+'lats:\x20u32;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20total\x20nu'+'mber\x20of\x20sp'+'lats\x0avar\x20s'+'platOrder:'+'\x20texture_2'+'d<u32>;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'per-splat\x20'+'index\x20to\x20s'+'ource\x20gaus'+'sian\x0a\x0a//\x20i'+'nitialize\x20'+'the\x20splat\x20'+'source\x20str'+'ucture\x0afn\x20'+'initSource'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20let\x20w:\x20u3'+'2\x20=\x20textur'+'eDimension'+'s(splatOrd'+'er,\x200).x;\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20u3'+'2(vertex_p'+'osition.z)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'return\x20if\x20'+'out\x20of\x20ran'+'ge\x20(since\x20'+'the\x20last\x20b'+'lock\x20of\x20sp'+'lats\x20may\x20b'+'e\x20partiall'+'y\x20full)\x0a\x20\x20'+'\x20\x20if\x20(sour'+'ce.order\x20>'+'=\x20uniform.'+'numSplats)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20fa'+'lse;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'orderUV\x20=\x20'+'vec2i(vec2'+'u(source.o'+'rder\x20%\x20w,\x20'+'source.ord'+'er\x20/\x20w));\x0a'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20splat\x20i'+'d\x0a\x20\x20\x20\x20sour'+'ce.id\x20=\x20te'+'xtureLoad('+'splatOrder'+',\x20orderUV,'+'\x200).r;\x0a\x0a\x20\x20'+'\x20\x20//\x20map\x20i'+'d\x20to\x20uv\x0a\x20\x20'+'\x20\x20source.u'+'v\x20=\x20vec2i('+'vec2u(sour'+'ce.id\x20%\x20w,'+'\x20source.id'+'\x20/\x20w));\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+('turn\x20true;'+'\x0a}\x0a'),rD='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a#ifn'+'def\x20DITHER'+'_NONE\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0aconst'+'\x20discardVe'+'c:\x20vec4f\x20='+'\x20vec4f(0.0'+',\x200.0,\x202.0'+',\x201.0);\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20varying'+'\x20vLinearDe'+'pth:\x20f32;\x0a'+'#endif\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20gaussian\x20'+'details\x0a\x20\x20'+'\x20\x20var\x20sour'+'ce:\x20SplatS'+'ource;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Source(&so'+'urce))\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.positi'+'on\x20=\x20disca'+'rdVec;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20let\x20model'+'Center:\x20ve'+'c3f\x20=\x20read'+'Center(&so'+'urce);\x0a\x0a\x20\x20'+'\x20\x20var\x20cent'+'er:\x20SplatC'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'&center))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20di'+'scardVec;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20pro'+'ject\x20cente'+'r\x20to\x20scree'+'n\x20space\x0a\x20\x20'+'\x20\x20var\x20corn'+'er:\x20SplatC'+'orner;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Corner(&so'+'urce,\x20&cen'+'ter,\x20&corn'+'er))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20clr:\x20vec4'+'f\x20=\x20readCo'+'lor(&sourc'+'e);\x0a\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'AA\x20compens'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr.a\x20'+('=\x20clr.a\x20*\x20'+'corner.aaF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20spher'+'ical\x20harmo'+'nics\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x200\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cal'+'culate\x20the'+'\x20model-spa'+'ce\x20view\x20di'+'rection\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'modelView3'+'x3\x20=\x20mat3x'+'3f(center.'+'modelView['+'0].xyz,\x20ce'+'nter.model'+'View[1].xy'+'z,\x20center.'+'modelView['+'2].xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dir\x20=\x20nor'+'malize(mod'+'elView3x3\x20'+'*\x20center.v'+'iew);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'ad\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20sh:\x20array'+'<vec3f,\x20SH'+'_COEFFS>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20scale:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20readSHDa'+'ta(&source'+',\x20&sh,\x20&sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr\x20='+'\x20vec4f(clr'+'.xyz\x20+\x20eva'+'lSH(&sh,\x20d'+'ir)\x20*\x20scal'+'e,\x20clr.a);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(&c'+'orner,\x20clr'+'.w);\x0a\x0a\x20\x20\x20\x20'+'//\x20write\x20o'+'utput\x0a\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4f(co'+'rner.offse'+'t,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20ou'+'tput.gauss'+'ianUV\x20=\x20co'+'rner.uv;\x0a\x20'+'\x20\x20\x20output.'+'gaussianCo'+'lor\x20=\x20vec4'+'f(prepareO'+'utputFromG'+'amma(max(c'+'lr.xyz,\x20ve'+'c3f(0.0)))'+',\x20clr.w);\x0a'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'id\x20=\x20f32(s'+'ource.id);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vLinearD'+'epth\x20=\x20-ce'+'nter.view.'+'z;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),aD='\x0a\x20\x20\x20\x20attri'+'bute\x20aPosi'+'tion:\x20vec2'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20uv0:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20@vertex\x20f'+'n\x20vertexMa'+'in(input:\x20'+'VertexInpu'+'t)\x20->\x20Vert'+'exOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20vec4f(inp'+'ut.aPositi'+'on,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'uv0\x20=\x20getI'+'mageEffect'+'UV((input.'+'aPosition\x20'+'+\x201.0)\x20*\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a',nD='\x0a//\x20Indire'+'ct\x20indexed'+'\x20draw\x20call'+'\x20parameter'+'s\x0astruct\x20D'+'rawIndexed'+'IndirectAr'+'gs\x20{\x0a\x20\x20\x20\x20i'+'ndexCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Numb'+'er\x20of\x20indi'+'ces\x20to\x20dra'+'w\x0a\x20\x20\x20\x20inst'+'anceCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20instanc'+'es\x20to\x20draw'+'\x0a\x20\x20\x20\x20first'+'Index:\x20u32'+',\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Index\x20of'+'\x20the\x20first'+'\x20index\x20in\x20'+'the\x20index\x20'+'buffer\x0a\x20\x20\x20'+'\x20baseVerte'+'x:\x20i32,\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Of'+'fset\x20added'+'\x20to\x20each\x20i'+'ndex\x20befor'+'e\x20fetching'+'\x20vertex\x0a\x20\x20'+'\x20\x20firstIns'+'tance:\x20u32'+'\x20\x20\x20\x20\x20\x20//\x20F'+'irst\x20insta'+'nce\x20ID\x0a};\x0a'+'\x0a//\x20Indire'+'ct\x20non-ind'+'exed\x20draw\x20'+'call\x20param'+'eters\x0astru'+'ct\x20DrawInd'+'irectArgs\x20'+'{\x0a\x20\x20\x20\x20vert'+'exCount:\x20u'+'32,\x20\x20\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20vertice'+'s\x20to\x20draw\x0a'+'\x20\x20\x20\x20instan'+'ceCount:\x20u'+'32,\x20\x20\x20\x20\x20//'+'\x20Number\x20of'+'\x20instances'+'\x20to\x20draw\x0a\x20'+'\x20\x20\x20firstVe'+'rtex:\x20u32,'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Index\x20of\x20t'+'he\x20first\x20v'+'ertex\x0a\x20\x20\x20\x20'+'firstInsta'+'nce:\x20u32,\x20'+'\x20\x20\x20\x20//\x20Fir'+'st\x20instanc'+'e\x20ID\x0a\x20\x20\x20\x20_'+'pad:\x20u32\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Padd'+'ing\x20to\x20mat'+'ch\x20indexed'+'\x20size\x20(unu'+'sed)\x0a};\x0a',oD='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gamma'+'PS\x22\x0a\x20\x20\x20\x20va'+'rying\x20colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(decodeGam'+'ma3(input.'+'color.rgb)'+'),\x20input.c'+'olor.a);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a',lD='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20matr'+'ix_model:\x20'+'mat4x4f;\x0a\x20'+'\x20\x20\x20uniform'+'\x20matrix_vi'+'ewProjecti'+'on:\x20mat4x4'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output\x20:\x20V'+'ertexOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20inpu'+'t.vertex_c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20unifor'+'m.matrix_m'+'odel\x20*\x20inp'+'ut.vertex_'+'position;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',cD='\x0auniform\x20m'+'aterial_ir'+'idescenceR'+'efractionI'+'ndex:\x20f32;'+'\x0a\x0afn\x20iride'+'scence_ior'+'ToFresnelS'+'calar(tran'+'smittedIor'+':\x20f32,\x20inc'+'identIor:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(('+'transmitte'+'dIor\x20-\x20inc'+'identIor)\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'incidentIo'+'r),\x202.0);\x0a'+'}\x0a\x0afn\x20irid'+'escence_io'+'rToFresnel'+'Vec3(trans'+'mittedIor:'+'\x20vec3f,\x20in'+'cidentIor:'+'\x20f32)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'vec3f(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3f(inci'+'dentIor)),'+'\x20vec3f(2.0'+'));\x0a}\x0a\x0afn\x20'+'iridescenc'+'e_fresnelT'+'oIor(f0:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20sqrtF'+'0:\x20vec3f\x20='+'\x20sqrt(f0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20(vec3f(1'+'.0)\x20+\x20sqrt'+'F0)\x20/\x20(vec'+'3f(1.0)\x20-\x20'+'sqrtF0);\x0a}'+'\x0a\x0aconst\x20XY'+'Z_TO_REC70'+'9:\x20mat3x3f'+'\x20=\x20mat3x3f'+'(\x0a\x20\x20\x20\x20vec3'+'f(3.240454'+'2,\x20-1.5371'+'385,\x20-0.49'+'85314),\x0a\x20\x20'+'\x20\x20vec3f(-0'+'.9692660,\x20'+'\x201.8760108'+',\x20\x200.04155'+'60),\x0a\x20\x20\x20\x20v'+'ec3f(0.055'+'6434,\x20-0.2'+'040259,\x20\x201'+'.0572252)\x0a'+');\x0a\x0afn\x20iri'+'descence_s'+'ensitivity'+'(opd:\x20f32,'+'\x20shift:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x20\x20\x20\x20let'+'\x20phase:\x20f3'+'2\x20=\x202.0\x20*\x20'+'PI\x20*\x20opd\x20*'+'\x201.0e-9;\x0a\x20'+'\x20\x20\x20const\x20v'+'al:\x20vec3f\x20'+'=\x20vec3f(5.'+'4856e-13,\x20'+'4.4201e-13'+',\x205.2481e-'+'13);\x0a\x20\x20\x20\x20c'+'onst\x20pos:\x20'+'vec3f\x20=\x20ve'+'c3f(1.6810'+'e+06,\x201.79'+('53e+06,\x202.'+'2084e+06);'+'\x0a\x20\x20\x20\x20const'+'\x20var_:\x20vec'+'3f\x20=\x20vec3f'+'(4.3278e+0'+'9,\x209.3046e'+'+09,\x206.612'+'1e+09);\x0a\x0a\x20'+'\x20\x20\x20var\x20xyz'+':\x20vec3f\x20=\x20'+'val\x20*\x20sqrt'+'(2.0\x20*\x20PI\x20'+'*\x20var_)\x20*\x20'+'cos(pos\x20*\x20'+'phase\x20+\x20sh'+'ift)\x20*\x20exp'+'(-pow(phas'+'e,\x202.0)\x20*\x20'+'var_);\x0a\x20\x20\x20'+'\x20xyz.x\x20=\x20x'+'yz.x\x20+\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+'cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20=\x20xyz\x20/\x20v'+'ec3f(1.068'+'5e-07);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'XYZ_TO_REC'+'709\x20*\x20xyz;'+'\x0a}\x0a\x0afn\x20iri'+'descence_f'+'resnelScal'+'ar(cosThet'+'a:\x20f32,\x20f0'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20x:\x20f32'+'\x20=\x20clamp(1'+'.0\x20-\x20cosTh'+'eta,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'let\x20x2:\x20f3'+'2\x20=\x20x\x20*\x20x;'+'\x0a\x20\x20\x20\x20let\x20x'+'5:\x20f32\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x0a\x0afn'+'\x20iridescen'+'ce_fresnel'+'Vec3(cosTh'+'eta:\x20f32,\x20'+'f0:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'x:\x20f32\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'x2:\x20f32\x20=\x20'+'x\x20*\x20x;\x0a\x20\x20\x20'+'\x20let\x20x5:\x20f'+'32\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x0a\x20\x20'+'\x20\x20return\x20f'+'0\x20+\x20(vec3f'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0afn\x20calcIr'+'idescence('+'outsideIor'+':\x20f32,\x20cos'+'Theta:\x20f32'+',\x20base_f0:'+'\x20vec3f,\x20ir'+'idescenceT'+'hickness:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0a\x20\x20\x20\x20le'+'t\x20iridesce'+'nceIor:\x20f3'+'2\x20=\x20mix(ou')+('tsideIor,\x20'+'uniform.ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20let\x20s'+'inTheta2Sq'+':\x20f32\x20=\x20po'+'w(outsideI'+'or\x20/\x20iride'+'scenceIor,'+'\x202.0)\x20*\x20(1'+'.0\x20-\x20pow(c'+'osTheta,\x202'+'.0));\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2Sq:\x20f32'+'\x20=\x201.0\x20-\x20s'+'inTheta2Sq'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(cosTheta2'+'Sq\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3f(1.0);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2:\x20f32\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20let\x20r'+'0:\x20f32\x20=\x20i'+'ridescence'+'_iorToFres'+'nelScalar('+'iridescenc'+'eIor,\x20outs'+'ideIor);\x0a\x20'+'\x20\x20\x20let\x20r12'+':\x20f32\x20=\x20ir'+'idescence_'+'fresnelSca'+'lar(cosThe'+'ta,\x20r0);\x0a\x20'+'\x20\x20\x20let\x20r21'+':\x20f32\x20=\x20r1'+'2;\x0a\x20\x20\x20\x20let'+'\x20t121:\x20f32'+'\x20=\x201.0\x20-\x20r'+'12;\x0a\x0a\x20\x20\x20\x20l'+'et\x20phi12:\x20'+'f32\x20=\x20sele'+'ct(0.0,\x20PI'+',\x20iridesce'+'nceIor\x20<\x20o'+'utsideIor)'+';\x0a\x20\x20\x20\x20let\x20'+'phi21:\x20f32'+'\x20=\x20PI\x20-\x20ph'+'i12;\x0a\x0a\x20\x20\x20\x20'+'let\x20baseIo'+'r:\x20vec3f\x20='+'\x20iridescen'+'ce_fresnel'+'ToIor(base'+'_f0\x20+\x20vec3'+'f(0.0001))'+';\x0a\x20\x20\x20\x20let\x20'+'r1:\x20vec3f\x20'+'=\x20iridesce'+'nce_iorToF'+'resnelVec3'+'(baseIor,\x20'+'iridescenc'+'eIor);\x0a\x20\x20\x20'+'\x20let\x20r23:\x20'+'vec3f\x20=\x20ir'+'idescence_'+'fresnelVec'+'3(cosTheta'+'2,\x20r1);\x0a\x0a\x20'+'\x20\x20\x20let\x20phi'+'23:\x20vec3f\x20'+'=\x20select(v'+'ec3f(0.0),'+'\x20vec3f(PI)'+',\x20baseIor\x20'+'<\x20vec3f(ir'+'idescenceI'+'or));\x0a\x20\x20\x20\x20'+'let\x20opd:\x20f'+'32\x20=\x202.0\x20*'+'\x20iridescen'+'ceIor\x20*\x20ir'+'idescenceT')+('hickness\x20*'+'\x20cosTheta2'+';\x0a\x20\x20\x20\x20let\x20'+'phi:\x20vec3f'+'\x20=\x20vec3f(p'+'hi21)\x20+\x20ph'+'i23;\x20//\x20Pr'+'omote\x20scal'+'ar\x20phi21\x20t'+'o\x20vec3f\x0a\x0a\x20'+'\x20\x20\x20let\x20r12'+'3Sq:\x20vec3f'+'\x20=\x20clamp(v'+'ec3f(r12)\x20'+'*\x20r23,\x20vec'+'3f(1e-5),\x20'+'vec3f(0.99'+'99));\x0a\x20\x20\x20\x20'+'let\x20r123:\x20'+'vec3f\x20=\x20sq'+'rt(r123Sq)'+';\x0a\x20\x20\x20\x20let\x20'+'rs:\x20vec3f\x20'+'=\x20pow(vec3'+'f(t121),\x20v'+'ec3f(2.0))'+'\x20*\x20r23\x20/\x20('+'vec3f(1.0)'+'\x20-\x20r123Sq)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20c0:\x20vec3f'+'\x20=\x20vec3f(r'+'12)\x20+\x20rs;\x0a'+'\x20\x20\x20\x20var\x20i_'+'irid:\x20vec3'+'f\x20=\x20c0;\x0a\x0a\x20'+'\x20\x20\x20var\x20cm:'+'\x20vec3f\x20=\x20r'+'s\x20-\x20vec3f('+'t121);\x0a\x0a\x20\x20'+'\x20\x20cm\x20=\x20cm\x20'+'*\x20r123;\x0a\x20\x20'+'\x20\x20let\x20sm1:'+'\x20vec3f\x20=\x202'+'.0\x20*\x20iride'+'scence_sen'+'sitivity(1'+'.0\x20*\x20opd,\x20'+'1.0\x20*\x20phi)'+';\x0a\x20\x20\x20\x20i_ir'+'id\x20=\x20i_iri'+'d\x20+\x20cm\x20*\x20s'+'m1;\x0a\x0a\x20\x20\x20\x20c'+'m\x20=\x20cm\x20*\x20r'+'123;\x0a\x20\x20\x20\x20l'+'et\x20sm2:\x20ve'+'c3f\x20=\x202.0\x20'+'*\x20iridesce'+'nce_sensit'+'ivity(2.0\x20'+'*\x20opd,\x202.0'+'\x20*\x20phi);\x0a\x20'+'\x20\x20\x20i_irid\x20'+'=\x20i_irid\x20+'+'\x20cm\x20*\x20sm2;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20max(i_i'+'rid,\x20vec3f'+'(0.0));\x0a}\x0a'+'\x0afn\x20getIri'+'descenceDi'+'ffraction('+'cosTheta:\x20'+'f32,\x20specu'+'larity:\x20ve'+'c3f,\x20iride'+'scenceThic'+'kness:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),hD='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_irides'+'cence:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getIrid'+'escence()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'iridescenc'+'e\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_CON'+'STANT\x0a\x20\x20\x20\x20'+'iridescenc'+'e\x20=\x20irides'+'cence\x20*\x20un'+'iform.mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20=\x20iridesc'+'ence\x20*\x20tex'+'tureSample'+'Bias({STD_'+'IRIDESCENC'+'E_TEXTURE_'+'NAME},\x20{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_CHANNEL}'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dI'+'ridescence'+'\x20=\x20iridesc'+'ence;\x20\x0a}\x0a',dD='\x0auniform\x20m'+'aterial_ir'+'idescenceT'+'hicknessMa'+'x:\x20f32;\x0a\x0a#'+'ifdef\x20STD_'+'IRIDESCENC'+'ETHICKNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20uniform'+'\x20material_'+'iridescenc'+'eThickness'+'Min:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20blen'+'d:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_IRIDESCE'+'NCETHICKNE'+'SS_TEXTURE'+'_NAME},\x20{S'+'TD_IRIDESC'+'ENCETHICKN'+'ESS_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20iridesce'+'nceThickne'+'ss:\x20f32\x20=\x20'+'mix(unifor'+'m.material'+'_iridescen'+'ceThicknes'+'sMin,\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax,\x20bl'+'end);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceT'+'hickness:\x20'+'f32\x20=\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scenceThic'+'kness\x20=\x20ir'+'idescenceT'+'hickness;\x20'+'\x0a}\x0a',fD='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_refr'+'actionInde'+'x:\x20f32;\x0a#e'+'ndif\x0a\x0afn\x20g'+'etIor()\x20{\x0a'+'#ifdef\x20STD'+'_IOR_CONST'+'ANT\x0a\x20\x20\x20\x20dI'+'or\x20=\x20unifo'+'rm.materia'+'l_refracti'+'onIndex;\x0a#'+'else\x0a\x20\x20\x20\x20d'+'Ior\x20=\x201.0\x20'+'/\x201.5;\x0a#en'+'dif\x0a}\x0a',uD='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_color'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_direction'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_POINT\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20poi'+'nt\x20lights\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20lig'+'ht{i}_posi'+'tion:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ra'+'dius:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'SPOT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_SPOT\x20//\x20'+'include\x20fu'+'nctionalit'+'y\x20for\x20spot'+'\x20lights\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_di'+'rection:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_inner'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_outer'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20//\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_FALLOFF_'+'SQUARED\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20inv'+'erse\x20squar'+'ed\x20falloff'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_position:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ha'+'lfWidth:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_halfHeigh'+'t:\x20vec3f;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}FALLOFF\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_LINE'+'AR\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20linear\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}FALLOFF'+'\x20==\x20INVERS'+'ESQUARED\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_SQUA'+'RED\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20inverse'+'\x20squared\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20shadow\x20c'+'asting\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowMatri'+'x:\x20mat4x4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20li'+'ght{i}_sha'+'dowIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'{i}_shadow'+'Params:\x20ve'+'c4f;\x20//\x20wi'+'dth,\x20heigh'+'t,\x20bias,\x20r'+'adius\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowSearc'+'hArea:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_cameraPar'+'ams:\x20vec4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'oftShadowP'+'arams:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'directiona'+'l\x20(cascade'+'d)\x20shadows'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20light{i}_'+'shadowMatr'+'ixPalette:'+'\x20array<mat'+'4x4f,\x204>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deDistance'+'s:\x20vec4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deCount:\x20i'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20light{'+'i}_shadowC'+'ascadeBlen'+'d:\x20f32;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20N'+'OT\x20SUPPORT'+'ED\x0a/*\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIG'+'HT{i}SHADO'+'W_PCF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMap:\x20tex'+'ture_depth'+'_2d;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'{i}_shadow'+'MapSampler'+':\x20sampler_'+'comparison'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'light{i}_s'+'hadowMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMapSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIGHT{i}CO'+'OKIE)\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_COOKIE\x20/'+'/\x20include\x20'+'functional'+'ity\x20for\x20co'+'okies\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20OMNI\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20NOT\x20SUPP'+'ORTED\x0a/*\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'plerCube\x20l'+'ight{i}_co'+'okie;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un')+('iform\x20floa'+'t\x20light{i}'+'_cookieInt'+'ensity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20!defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20light{i}'+'_shadowMat'+'rix;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20NO'+'T\x20SUPPORTE'+'D\x0a/*\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_cookie;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_cook'+'ieIntensit'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20!'+'defined(LI'+'GHT{i}CAST'+'SHADOW)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrix;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}COOKIE_TR'+'ANSFORM)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_coo'+'kieMatrix;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20vec2\x20'+'light{i}_c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a*/\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),pD='\x0afn\x20getLig'+'htDiffuse('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',mD='\x0afn\x20evalOm'+'niLight(li'+'ghtPosW:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20vP'+'ositionW\x20-'+'\x20lightPosW'+';\x0a}\x0a',_D='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',gD='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0afn\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x20\x20\x20'+'\x20//\x20light\x20'+'color\x0a\x20\x20\x20\x20'+'var\x20lightC'+'olor:\x20vec3'+'f\x20=\x20unifor'+'m.light{i}'+'_color;\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20!d'+'efined(LIT'+'_SHADOW_CA'+'TCHER)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ea'+'rly\x20return'+'\x20if\x20the\x20li'+'ght\x20color\x20'+'is\x20black\x20('+'used\x20by\x20sh'+'adow\x20catch'+'er\x20-\x20this\x20'+'way\x20this\x20l'+'ight\x20is\x20ve'+'ry\x20cheap)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(all(ligh'+'tColor\x20==\x20'+'vec3f(0.0,'+'\x200.0,\x200.0)'+'))\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20DIRECTION'+'AL\x20//\x20dire'+'ctional\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightD'+'irNormW\x20=\x20'+'uniform.li'+'ght{i}_dir'+'ection;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20omni\x20o'+'r\x20spot\x20lig'+'ht\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(u'+'niform.lig'+'ht{i}_posi'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tDirNormW\x20'+'=\x20normaliz'+'e(lightDir'+'W);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIGHT'+'{i}COOKIE)'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20SPOT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_FAL'+'LOFF\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+('eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DXform(u'+'niform.lig'+'ht{i}_cook'+'ie,\x20unifor'+'m.light{i}'+'_shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_cookieIn'+'tensity,\x20u'+'niform.lig'+'ht{i}_cook'+'ieMatrix,\x20'+'uniform.li'+'ght{i}_coo'+'kieOffset)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookie2D('+'uniform.li'+'ght{i}_coo'+'kie,\x20unifo'+'rm.light{i'+'}_shadowMa'+'trix,\x20unif'+'orm.light{'+'i}_cookieI'+'ntensity).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClipXfo'+'rm(uniform'+'.light{i}_'+'cookie,\x20un'+'iform.ligh'+'t{i}_shado'+'wMatrix,\x20u'+'niform.lig'+'ht{i}_cook'+'ieIntensit'+'y,\x20uniform'+'.light{i}_'+'cookieMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieOff'+'set).{LIGH'+'T{i}COOKIE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClip(un'+'iform.ligh'+'t{i}_cooki'+'e,\x20uniform'+'.light{i}_'+'shadowMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieInt'+'ensity).{L'+'IGHT{i}COO'+'KIE_CHANNE'+'L};\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookieCub'+'e(uniform.'+'light{i}_c'+'ookie,\x20uni'+'form.light'+'{i}_shadow'+'Matrix,\x20un'+'iform.ligh'+'t{i}_cooki'+'eIntensity'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multipl'+'y\x20light\x20co'+'lor\x20by\x20the'+'\x20cookie\x20at'+'tenuation\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightCol'+'or\x20=\x20light'+'Color\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dista'+'nce\x20fallof'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20PUNCTUAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}FALLOF'+'F\x20==\x20LINEA'+'R\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20=\x20get'+'FalloffLin'+'ear(unifor'+'m.light{i}'+'_radius,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20getFal'+'loffInvSqu'+'ared(unifo'+'rm.light{i'+'}_radius,\x20'+'lightDirW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'non\x20punctu'+'al\x20lights\x20'+'only\x20gets\x20'+'the\x20range\x20'+'window\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20getFall'+'offWindow('+'uniform.li'+'ght{i}_rad'+'ius,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20angle'+'\x20falloff\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20SPO'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d')+('efined(LIG'+'HT{i}COOKI'+'E)\x20||\x20defi'+'ned(LIGHT{'+'i}COOKIE_F'+'ALLOFF)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20dAtten\x20'+'*\x20getSpotE'+'ffect(unif'+'orm.light{'+'i}_directi'+'on,\x20unifor'+'m.light{i}'+'_innerCone'+'Angle,\x20uni'+'form.light'+'{i}_outerC'+'oneAngle,\x20'+'dLightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20if\x20'+'(dAtten\x20<\x20'+'0.00001)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20evaluate\x20'+'area\x20light'+'\x20values\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20RECT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcRectLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20calcDiskL'+'ightValues'+'(uniform.l'+'ight{i}_po'+'sition,\x20un'+'iform.ligh'+'t{i}_halfW'+'idth,\x20unif'+'orm.light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20SPH'+'ERE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20calc'+'SphereLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20dif'+'fuse\x20light'+'ing\x20-\x20LTC\x20'+'lights\x20do\x20'+'not\x20mix\x20di'+'ffuse\x20ligh'+'ting\x20into\x20'+'attenuatio'+'n\x20that\x20aff'+'ects\x20specu'+'lar\x0a\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P')+('UNCTUAL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'attenDiffu'+'se\x20-\x20separ'+'ate\x20diffus'+'e\x20attenuat'+'ion\x20for\x20no'+'n-punctual'+'\x20light\x20sou'+'rces\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20NB:\x20A\x20bet'+'ter\x20approx'+'imation\x20pe'+'rhaps\x20usin'+'g\x20wrap\x20lig'+'hting\x20coul'+'d\x20be\x20imple'+'mented\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20at'+'tenDiffuse'+':\x20f32\x20=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x2016.0\x20is\x20'+'a\x20constant'+'\x20that\x20is\x20i'+'n\x20getFallo'+'ffInvSquar'+'ed()\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20attenDi'+'ffuse:\x20f32'+'\x20=\x20getRect'+'LightDiffu'+'se(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20light'+'DirW,\x20dLig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20DISK\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'attenDiffu'+'se:\x20f32\x20=\x20'+'getDiskLig'+'htDiffuse('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20lightDir'+'W,\x20dLightD'+'irNormW)\x20*'+'\x2016.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20LIGHT'+'{i}SHAPE\x20='+'=\x20SPHERE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20a'+'ttenDiffus'+'e:\x20f32\x20=\x20g'+'etSphereLi'+'ghtDiffuse'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20lightDi'+'rW,\x20dLight'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20one\x20par'+'ameter\x20is\x20'+'unused\x20for')+('\x20punctual\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20dAtten'+'\x20*\x20getLigh'+'tDiffuse(l'+'itArgs_wor'+'ldNormal,\x20'+'vec3(0.0),'+'\x20dLightDir'+'NormW);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20the\x20sha'+'dow\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}CASTS'+'HADOW\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20shadow:'+'\x20f32\x20=\x20get'+'Shadow{i}('+'vec3(0.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20shadow:\x20'+'f32\x20=\x20getS'+'hadow{i}(l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Ap'+'ply\x20shadow'+'\x20intensity'+'\x20to\x20the\x20sh'+'adow\x20value'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadow\x20=\x20mi'+'x(1.0,\x20sha'+'dow,\x20unifo'+'rm.light{i'+'}_shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20dA'+'tten\x20*\x20sha'+'dow;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'SHADOW_CAT'+'CHER)\x20&&\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20accumula'+'te\x20shadows'+'\x20for\x20direc'+'tional\x20lig'+'hts\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSha'+'dowCatcher'+'\x20=\x20dShadow'+'Catcher\x20*\x20'+'shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20-\x20they'+'\x20do\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((('+'attenDiffu'+'se\x20*\x20dAtte'+'n)\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20dLTC'+'SpecFres))')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'((attenDif'+'fuse\x20*\x20dAt'+'ten)\x20*\x20lig'+'htColor);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(AREA_'+'LIGHTS)\x20&&'+'\x20defined(L'+'IT_SPECULA'+'R)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((d'+'Atten\x20*\x20li'+'ghtColor)\x20'+'*\x20(1.0\x20-\x20l'+'itArgs_spe'+'cularity))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'(dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20spe'+'cular\x20ligh'+'ting\x0a\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}AFFECT'+'_SPECULARI'+'TY\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20==\x20REC'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getRe'+'ctLightSpe'+'cular(litA'+'rgs_clearc'+'oat_worldN'+'ormal,\x20dVi'+'ewDirW)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20=\x20ccSpec'+'ularLight\x20'+'+\x20(ccLTCSp'+'ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20SPHER'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_clea'+'rcoat_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20=\x20dS'+'pecularLig'+'ht\x20+\x20(dLTC'+'SpecFres\x20*'+'\x20getRectLi'+'ghtSpecula'+'r(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20(dLT'+'CSpecFres\x20'+'*\x20getDiskL'+'ightSpecul'+'ar(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW)\x20*\x20dAt'+'ten\x20*\x20ligh'+'tColor);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'=\x20dSpecula'+'rLight\x20+\x20('+'dLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20//\x20punctu'+'al\x20light\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20is\x20fr'+'esnel\x20need'+'ed\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC')+('TIONAL\x20&&\x20'+'LIT_FRESNE'+'L_MODEL\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ha'+'lfDirW:\x20ve'+'c3f\x20=\x20norm'+'alize(-dLi'+'ghtDirNorm'+'W\x20+\x20dViewD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20if\x20LTC\x20li'+'ghts\x20are\x20p'+'resent,\x20sp'+'ecular\x20mus'+'t\x20be\x20accum'+'ulated\x20wit'+'h\x20specular'+'ity\x20(specu'+'larity\x20is\x20'+'pre\x20multip'+'lied\x20by\x20pu'+'nctual\x20lig'+'ht\x20fresnel'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'specularCC'+':\x20vec3f\x20=\x20'+'getLightSp'+'ecular(hal'+'fDirW,\x20ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20dLightDir'+'NormW,\x20lit'+'Args_clear'+'coat_gloss'+',\x20dTBN)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightspecu'+'larCC\x20=\x20li'+'ghtspecula'+'rCC\x20*\x20getF'+'resnelCC(d'+'ot(dViewDi'+'rW,\x20halfDi'+'rW));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20=\x20ccSpecu'+'larLight\x20+'+'\x20lightspec'+'ularCC;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sSpecul'+'arLight\x20=\x20'+'sSpecularL'+'ight\x20+\x20(ge'+'tLightSpec'+'ularSheen('+'halfDirW,\x20'+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20dLightDi')+('rNormW,\x20li'+'tArgs_shee'+'n_gloss)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tSpecular:'+'\x20vec3f\x20=\x20g'+'etLightSpe'+'cular(half'+'DirW,\x20dRef'+'lDirW,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20d'+'LightDirNo'+'rmW,\x20litAr'+'gs_gloss,\x20'+'dTBN)\x20*\x20dA'+'tten\x20*\x20lig'+'htColor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'FRESNEL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20=\x20li'+'ghtSpecula'+'r\x20*\x20getFre'+'snel(dot(d'+'ViewDirW,\x20'+'halfDirW),'+'\x20litArgs_g'+'loss,\x20litA'+'rgs_specul'+'arity,\x20iri'+'descenceFr'+'esnel,\x20lit'+'Args_iride'+'scence_int'+'ensity);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightSpecul'+'ar\x20=\x20light'+'Specular\x20*'+'\x20getFresne'+'l(dot(dVie'+'wDirW,\x20hal'+'fDirW),\x20li'+'tArgs_glos'+'s,\x20litArgs'+'_speculari'+'ty);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20light'+'Specular\x20='+'\x20lightSpec'+'ular\x20*\x20lit'+'Args_specu'+'larity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20+\x20li'+'ghtSpecula'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'#endif\x0a'),SD='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowSam'+'pleCoord{i'+'}(shadowTr'+'ansform:\x20m'+'at4x4f,\x20sh'+'adowParams'+':\x20vec4f,\x20w'+'orldPositi'+'on:\x20vec3f,'+'\x20lightPos:'+'\x20vec3f,\x20li'+'ghtDir:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'lightDirNo'+'rm:\x20vec3f,'+'\x20normal:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'surfacePos'+'ition\x20=\x20wo'+'rldPositio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_POINT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+'NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(*l'+'ightDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20surfac'+'ePosition\x20'+'+\x20normal\x20*'+'\x20shadowPar'+'ams.y\x20*\x20cl'+'amp(1.0\x20-\x20'+'dot(normal'+',\x20-lightDi'+'rNorm),\x200.'+'0,\x201.0)\x20*\x20'+'distScale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20*li'+'ghtDir\x20=\x20s'+'urfacePosi'+'tion\x20-\x20lig'+'htPos;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'*lightDir;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}_SHADOW_'+'SAMPLE_NOR'+'MAL_OFFSET'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_SAMP'+'LE_ORTHO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dis'+'tScale:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20distSca'+'le:\x20f32\x20=\x20'+'abs(dot(vP'+'ositionW\x20-'+'\x20lightPos,'+'\x20lightDirN'+'orm));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Use'+'\x20var\x20for\x20m'+'odificatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20po'+'sitionInSh'+'adowSpace:'+'\x20vec4f\x20=\x20s'+'hadowTrans'+'form\x20*\x20vec'+'4f(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM')+('PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20=\x20pos'+'itionInSha'+'dowSpace.x'+'yz\x20/\x20posit'+'ionInShado'+'wSpace.w;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20position'+'InShadowSp'+'ace.xy\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xy\x20/\x20posi'+'tionInShad'+'owSpace.w;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20positionI'+'nShadowSpa'+'ce.z\x20=\x20len'+'gth(*light'+'Dir)\x20*\x20sha'+'dowParams.'+'w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20this\x20is\x20c'+'urrently\x20u'+'nused\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SHADO'+'W_SAMPLE_Z'+'_BIAS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20posit'+'ionInShado'+'wSpace.z\x20+'+'=\x20getShado'+'wBias(shad'+'owParams.x'+',\x20shadowPa'+'rams.z);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20sur'+'facePositi'+'on;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20evalu'+'ation\x20func'+'tion\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'w{i}(light'+'DirW_in:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20s'+'hadow\x20casc'+'ades\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_CASC'+'ADES\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20select\x20sh'+'adow\x20casca'+'de\x20matrix\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20casc'+'adeIndex:\x20'+'i32\x20=\x20getS'+'hadowCasca'+'deIndex(un'+'iform.ligh'+'t{i}_shado'+'wCascadeDi'+'stances,\x20u'+'niform.lig'+'ht{i}_shad')+('owCascadeC'+'ount);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_CASCADE'+'_BLEND\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20cascade'+'Index\x20=\x20di'+'therShadow'+'CascadeInd'+'ex(cascade'+'Index,\x20uni'+'form.light'+'{i}_shadow'+'CascadeDis'+'tances,\x20un'+'iform.ligh'+'t{i}_shado'+'wCascadeCo'+'unt,\x20unifo'+'rm.light{i'+'}_shadowCa'+'scadeBlend'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowMatri'+'x:\x20mat4x4f'+'\x20=\x20uniform'+'.light{i}_'+'shadowMatr'+'ixPalette['+'cascadeInd'+'ex];\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20sha'+'dowMatrix:'+'\x20mat4x4f\x20='+'\x20uniform.l'+'ight{i}_sh'+'adowMatrix'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20lightDirA'+'rg\x20=\x20light'+'DirW_in;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20direc'+'tional\x20lig'+'ht\x20does\x20no'+'t\x20have\x20a\x20p'+'osition\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20getSh'+'adowSample'+'Coord{i}(s'+'hadowMatri'+'x,\x20uniform'+'.light{i}_'+'shadowPara'+'ms,\x20vPosit'+'ionW,\x20vec3'+'f(0.0),\x20&l'+'ightDirArg'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owCoord:\x20v'+'ec3f\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_shadowPa'+'rams,\x20vPos'+'itionW,\x20un'+'iform.ligh'+'t{i}_posit'+'ion,\x20&ligh'+'tDirArg,\x20d'+'LightDirNo'+'rmW,\x20dVert'+'exNormalW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('#endif\x0a\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Fade\x20direc'+'tional\x20sha'+'dow\x20at\x20the'+'\x20far\x20dista'+'nce\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'owCoord\x20=\x20'+'fadeShadow'+'(shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowCas'+'cadeDistan'+'ces);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20-----\x20s'+'ample\x20the\x20'+'shadow\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20---'+'--\x20directi'+'onal\x20light'+'\x20-----\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20VSM_'+'16F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowVSM1'+'6(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s,\x205.54);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20VS'+'M_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowVS'+'M32(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x2015.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2f(lengt'+'h(uniform.'+'light{i}_h'+'alfWidth),'+'\x20length(un'+'iform.ligh'+'t{i}_halfH'+'eight))\x20*\x20'+'uniform.li'+'ght{i}_sha'+'dowSearchA'+'rea;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCSS(ligh'+'t{i}_shado'+'wMap,\x20ligh'+'t{i}_shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20unif'+'orm.light{'+'i}_shadowP'+'arams,\x20uni'+'form.light'+'{i}_camera'+'Params,\x20sh'+'adowSearch'+'Area,\x20ligh'+'tDirW_in);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CSS(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x20unifo'+'rm.light{i'+'}_cameraPa'+'rams,\x20unif'+'orm.light{'+'i}_softSha'+'dowParams,'+'\x20lightDirW'+'_in);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF1_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF1x1('+'light{i}_s'+'hadowMap,\x20'+'light{i}_s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'uniform.li'+'ght{i}_sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_16F\x20|'+'|\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF3_3'+'2F\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowPCF3x'+'3(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_16F'+'\x20||\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF5')+('_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x20//\x20-'+'----\x20spot\x20'+'light\x20----'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM16'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x205.54,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM32'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x2015.0,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20!=\x20PU'+'NCTUAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f\x20=\x20vec'+'2f(length('+'uniform.li'+'ght{i}_hal'+'fWidth),\x20l'+'ength(unif'+'orm.light{'+'i}_halfHei'+'ght))\x20*\x20un'+'iform.ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowSearc'+'hArea:\x20vec')+('2f\x20=\x20vec2f'+'(uniform.l'+'ight{i}_sh'+'adowSearch'+'Area);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCSS'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x20uniform.'+'light{i}_c'+'ameraParam'+'s,\x20shadowS'+'earchArea,'+'\x20lightDirW'+'_in);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'16F\x20||\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF1_32F\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF1x1'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'5_16F\x20||\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF5_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCF5'+'x5(light{i'+'}_shadowMa'+'p,\x20light{i'+'}_shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20uniform'+'.light{i}_'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20')+('\x20\x20\x20#endif\x0a'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x20//\x20--'+'---\x20omni\x20l'+'ight\x20-----'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f;\x20//\x20U'+'se\x20var\x20bec'+'ause\x20assig'+'ned\x20in\x20if/'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owSearchAr'+'ea:\x20vec2f\x20'+'=\x20vec2f(le'+'ngth(unifo'+'rm.light{i'+'}_halfWidt'+'h),\x20length'+'(uniform.l'+'ight{i}_ha'+'lfHeight))'+'\x20*\x20uniform'+'.light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'SearchArea'+':\x20vec2f\x20=\x20'+'vec2f(unif'+'orm.light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20un'+'iform.ligh'+'t{i}_camer'+'aParams,\x20s'+'hadowSearc'+'hArea,\x20lig'+'htDirW_in)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in')+(');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),yD='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'var\x20areaLi'+'ghtsLutTex'+'1:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20areaLight'+'sLutTex2:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20areaL'+'ightsLutTe'+'x2Sampler:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'omni\x20/\x20spo'+'t\x20PCSS\x20is\x20'+('not\x20suppor'+'ted\x20on\x20Web'+'GPU\x20curren'+'tly,\x20as\x20th'+'is\x20is\x20only'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0a\x20\x20\x20\x20'+'//\x20#includ'+'e\x20\x22shadowP'+'CSSPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22shadowSof'+'tPS\x22\x0a#endi'+'f\x0a\x0a#if\x20def'+'ined(SHADO'+'W_KIND_VSM'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owEVSMPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22falloff'+'LinearPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_SQUARED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fallof'+'fInvSquare'+'dPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_CODE_L'+'IGHTS_POIN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDirPointP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22spotPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'CODE_COOKI'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22cook'+'iePS\x22\x0a#end'+'if\x0a\x0a//\x20clu'+'stered\x20lig'+'hting\x0a#ifd'+'ef\x20LIT_CLU'+'STERED_LIG'+'HTS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22cl'+'usteredLig'+'htPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIGHT_COU'+'NT\x20>\x200\x0a\x20\x20\x20'+'\x20//\x20LOOP\x20-'+'\x20generate\x20'+'shadow\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionShadow'+'PS,\x20LIGHT_'+'COUNT\x22\x0a\x0a\x20\x20'+'\x20\x20//\x20LOOP\x20'+'-\x20generate'+'\x20light\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionLightP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a'),vD='\x0afn\x20addLig'+'htMap(\x0a\x20\x20\x20'+'\x20lightmap:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20dir:\x20vec'+'3f,\x0a\x20\x20\x20\x20wo'+'rldNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20viewDir:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20reflecti'+'onDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20ve'+'rtexNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20tbn:\x20ma'+'t3x3f\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20iridesce'+'nceIntensi'+'ty:\x20f32\x0a#e'+'ndif\x0a)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x20&&'+'\x20defined(L'+'IT_DIR_LIG'+'HTMAP)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'dot(dir,\x20d'+'ir)\x20<\x200.00'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20dD'+'iffuseLigh'+'t\x20+\x20lightm'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20vli'+'ght:\x20f32\x20='+'\x20saturate('+'dot(dir,\x20-'+'vertexNorm'+'al));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20flight:\x20'+'f32\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20nlig'+'ht:\x20f32\x20=\x20'+'(flight\x20/\x20'+'max(vlight'+',\x200.01))\x20*'+'\x200.5;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20=\x20dDiff'+'useLight\x20+'+'\x20lightmap\x20'+'*\x20nlight\x20*'+'\x202.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20halfDir'+':\x20vec3f\x20=\x20'+'normalize('+'-dir\x20+\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20specula'+'rLight:\x20ve'+'c3f\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+('_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'=\x20specular'+'Light\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(d'+'ot(viewDir'+',\x20halfDir)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gloss,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20,\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceI'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20specularL'+'ight;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'non-direct'+'ional\x20ligh'+'tmap\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20+\x20ligh'+'tmap;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),xD='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'var<privat'+'e>\x20dLightm'+'apDir:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'dirLightMa'+'p:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_dirL'+'ightMapSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0afn\x20getL'+'ightMap()\x20'+'{\x0a\x0a\x20\x20\x20\x20dLi'+'ghtmap\x20=\x20v'+'ec3f(1.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_TEXTURE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Lightmap\x20='+'\x20dLightmap'+'\x20*\x20{STD_LI'+'GHT_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_LIGHT_T'+'EXTURE_NAM'+'E},\x20{STD_L'+'IGHT_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+')).{STD_LI'+'GHT_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_LIGHTMAP'+'_DIR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20dir:\x20vec3'+'f\x20=\x20textur'+'eSampleBia'+'s(texture_'+'dirLightMa'+'p,\x20texture'+'_dirLightM'+'apSampler,'+'\x20{STD_LIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).xyz\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20d'+'irDot\x20=\x20do'+'t(dir,\x20dir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tmapDir\x20=\x20'+'select(vec'+'3(0.0),\x20di'+'r\x20/\x20sqrt(d'+'irDot),\x20di'+'rDot\x20>\x200.0'+'01);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dL'+'ightmap\x20=\x20'+'dLightmap\x20'+'*\x20saturate'+'(vVertexCo'+'lor.{STD_L'+'IGHT_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a',TD='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'fn\x20calcLig'+'htSpecular'+'(gloss:\x20f3'+'2,\x20worldNo'+'rmal:\x20vec3'+'f,\x20viewDir'+':\x20vec3f,\x20h'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'tbn:\x20mat3x'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20PI:\x20f32\x20='+'\x203.1415926'+'53589793;\x0a'+'\x20\x20\x20\x20let\x20ro'+'ughness:\x20f'+'32\x20=\x20max(('+'1.0\x20-\x20glos'+'s)\x20*\x20(1.0\x20'+'-\x20gloss),\x20'+'0.001);\x0a\x20\x20'+'\x20\x20let\x20alph'+'aRoughness'+':\x20f32\x20=\x20ro'+'ughness\x20*\x20'+'roughness;'+'\x0a\x20\x20\x20\x20let\x20a'+'nisotropy:'+'\x20f32\x20=\x20dAn'+'isotropy;\x0a'+'\x20\x20\x20\x20let\x20di'+'rection:\x20v'+'ec2f\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x0a\x20'+'\x20\x20\x20let\x20at:'+'\x20f32\x20=\x20mix'+'(alphaRoug'+'hness,\x201.0'+',\x20anisotro'+'py\x20*\x20aniso'+'tropy);\x0a\x20\x20'+'\x20\x20let\x20ab:\x20'+'f32\x20=\x20clam'+'p(alphaRou'+'ghness,\x200.'+'001,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20NoH:\x20f32\x20'+'=\x20dot(worl'+'dNormal,\x20h'+');\x0a\x20\x20\x20\x20let'+'\x20ToH:\x20f32\x20'+'=\x20dot(anis'+'otropicT,\x20'+'h);\x0a\x20\x20\x20\x20le'+'t\x20BoH:\x20f32'+'\x20=\x20dot(ani'+'sotropicB,'+'\x20h);\x0a\x0a\x20\x20\x20\x20'+'let\x20a2:\x20f3'+'2\x20=\x20at\x20*\x20a'+'b;\x0a\x20\x20\x20\x20let'+'\x20v:\x20vec3f\x20'+'=\x20vec3f(ab'+'\x20*\x20ToH,\x20at'+'\x20*\x20BoH,\x20a2'+'\x20*\x20NoH);\x0a\x20'+'\x20\x20\x20let\x20v2:'+'\x20f32\x20=\x20dot'+'(v,\x20v);\x0a\x20\x20'+'\x20\x20let\x20w2:\x20'+'f32\x20=\x20a2\x20/'+'\x20v2;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20let\x20To'+'V:\x20f32\x20=\x20d'+'ot(anisotr'+'opicT,\x20vie'+('wDir);\x0a\x20\x20\x20'+'\x20let\x20BoV:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20viewDi'+'r);\x0a\x20\x20\x20\x20le'+'t\x20ToL:\x20f32'+'\x20=\x20dot(ani'+'sotropicT,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20let\x20BoL:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20let\x20No'+'V:\x20f32\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'let\x20NoL:\x20f'+'32\x20=\x20dot(w'+'orldNormal'+',\x20-lightDi'+'rNorm);\x0a\x0a\x20'+'\x20\x20\x20let\x20lam'+'bdaV:\x20f32\x20'+'=\x20NoL\x20*\x20le'+'ngth(vec3f'+'(at\x20*\x20ToV,'+'\x20ab\x20*\x20BoV,'+'\x20NoV));\x0a\x20\x20'+'\x20\x20let\x20lamb'+'daL:\x20f32\x20='+'\x20NoV\x20*\x20len'+'gth(vec3f('+'at\x20*\x20ToL,\x20'+'ab\x20*\x20BoL,\x20'+'NoL));\x0a\x20\x20\x20'+'\x20let\x20G:\x20f3'+'2\x20=\x200.5\x20/\x20'+'(lambdaV\x20+'+'\x20lambdaL);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20D\x20*\x20G;\x0a'+'}\x0a\x0afn\x20getL'+'ightSpecul'+'ar(h:\x20vec3'+'f,\x20reflDir'+':\x20vec3f,\x20w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'DirNorm:\x20v'+'ec3f,\x20glos'+'s:\x20f32,\x20tb'+'n:\x20mat3x3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20calcLigh'+'tSpecular('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir,\x20h'+',\x20lightDir'+'Norm,\x20tbn)'+';\x0a}\x0a'),wD='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afn\x20c'+'alcLightSp'+'ecular(glo'+'ss:\x20f32,\x20w'+'orldNormal'+':\x20vec3f,\x20h'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20nh:\x20'+'f32\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'specPow:\x20f'+'32\x20=\x20exp2('+'gloss\x20*\x2011'+'.0);\x20//\x20gl'+'ossiness\x20i'+'s\x20linear,\x20'+'power\x20is\x20n'+'ot;\x200\x20-\x2020'+'48\x0a\x0a\x20\x20\x20\x20//'+'\x20Hack:\x20On\x20'+'Mac\x20OS\x20X,\x20'+'calling\x20po'+'w\x20with\x20zer'+'o\x20for\x20the\x20'+'exponent\x20g'+'enerates\x20h'+'ideous\x20art'+'ifacts\x20so\x20'+'bias\x20up\x20a\x20'+'little\x0a\x20\x20\x20'+'\x20specPow\x20='+'\x20max(specP'+'ow,\x200.0001'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20pow(n'+'h,\x20specPow'+')\x20*\x20(specP'+'ow\x20+\x202.0)\x20'+'/\x208.0;\x0a}\x0a\x0a'+'fn\x20getLigh'+'tSpecular('+'h:\x20vec3f,\x20'+'reflDir:\x20v'+'ec3f,\x20worl'+'dNormal:\x20v'+'ec3f,\x20view'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20tbn:\x20'+'mat3x3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',ED='\x0a\x0afn\x20sheen'+'D(normal:\x20'+'vec3f,\x20h:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'PI:\x20f32\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20let\x20inv'+'R:\x20f32\x20=\x201'+'.0\x20/\x20(roug'+'hness\x20*\x20ro'+'ughness);\x0a'+'\x20\x20\x20\x20var\x20co'+'s2h:\x20f32\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20=\x20c'+'os2h\x20*\x20cos'+'2h;\x0a\x20\x20\x20\x20le'+'t\x20sin2h:\x20f'+'32\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'fn\x20sheenV('+'normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20light:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20max(dot'+'(normal,\x20v'+'iewDir),\x200'+'.000001);\x0a'+'\x20\x20\x20\x20let\x20No'+'L:\x20f32\x20=\x20m'+'ax(dot(nor'+'mal,\x20light'+'),\x200.00000'+'1);\x0a\x20\x20\x20\x20re'+'turn\x201.0\x20/'+'\x20(4.0\x20*\x20(N'+'oL\x20+\x20NoV\x20-'+'\x20NoL\x20*\x20NoV'+'));\x0a}\x0a\x0afn\x20'+'getLightSp'+'ecularShee'+'n(h:\x20vec3f'+',\x20worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f,\x20li'+'ghtDirNorm'+':\x20vec3f,\x20s'+'heenGloss:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20let\x20V:\x20f'+'32\x20=\x20sheen'+'V(worldNor'+'mal,\x20viewD'+'ir,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20return'+'\x20D\x20*\x20V;\x0a}',bD='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afn\x20linear'+'izeDepthWi'+'thParams(z'+':\x20f32,\x20cam'+'eraParams:'+'\x20vec4f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20if\x20(camer'+'aParams.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(came'+'raParams.z'+'\x20*\x20cameraP'+'arams.y)\x20/'+'\x20(cameraPa'+'rams.y\x20+\x20z'+'\x20*\x20(camera'+'Params.z\x20-'+'\x20cameraPar'+'ams.y));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20cam'+'eraParams.'+'z\x20+\x20z\x20*\x20(c'+'ameraParam'+'s.y\x20-\x20came'+'raParams.z'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0a#ifndef\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20#de'+'fine\x20CAMER'+'APLANES\x0a\x20\x20'+'\x20\x20uniform\x20'+'camera_par'+'ams:\x20vec4f'+';\x20\x20\x20//\x20x:\x20'+'1\x20/\x20camera'+'_far,\x20\x20\x20\x20\x20'+'\x20y:\x20camera'+'_far,\x20\x20\x20\x20\x20'+'z:\x20camera_'+'near,\x20\x20\x20\x20\x20'+'\x20\x20\x20w:\x20is_o'+'rtho\x0a#endi'+'f\x0a\x0afn\x20line'+'arizeDepth'+'(z:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pthWithPar'+'ams(z,\x20uni'+'form.camer'+'a_params);'+'\x0a}\x0a#endif\x20'+'//\x20LINEARI'+'ZE_DEPTH\x0a',AD='\x0afn\x20evalua'+'teBackend('+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'//\x20apply\x20S'+'SAO\x20during'+'\x20lighting\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SSAO\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_ao\x20='+'\x20litArgs_a'+'o\x20*\x20textur'+'eSampleLev'+'el(ssaoTex'+'ture,\x20ssao'+'TextureSam'+'pler,\x20pcPo'+'sition.xy\x20'+'*\x20uniform.'+'ssaoTextur'+'eSizeInv,\x20'+'0.0).r;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nsform\x20tan'+'gent\x20space'+'\x20normals\x20t'+'o\x20world\x20sp'+'ace\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_N'+'EEDS_NORMA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getReflD'+'ir(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20litAr'+'gs_gloss,\x20'+'dTBN);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'DirW\x20=\x20nor'+'malize(-re'+'flect(dVie'+'wDirW,\x20lit'+'Args_clear'+'coat_world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'f0:\x20f32\x20=\x20'+'1.0\x20/\x20litA'+'rgs_ior;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20f0\x20=\x20(f0\x20'+'-\x201.0)\x20/\x20('+'f0\x20+\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20f0\x20=\x20f0'+'\x20*\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+('ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceF'+'resnel:\x20ve'+'c3f\x20=\x20getI'+'ridescence'+'Diffractio'+'n(saturate'+'(dot(dView'+'DirW,\x20litA'+'rgs_worldN'+'ormal)),\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_ir'+'idescence_'+'thickness)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20ambi'+'ent\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddAmbient('+'litArgs_wo'+'rldNormal)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20=\x20d'+'DiffuseLig'+'ht\x20*\x20(1.0\x20'+'-\x20litArgs_'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20move\x20ambi'+'ent\x20color\x20'+'out\x20of\x20dif'+'fuse\x20(used'+'\x20by\x20Lightm'+'apper,\x20to\x20'+'multiply\x20a'+'mbient\x20col'+'or\x20by\x20accu'+'mulated\x20AO'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SEPARATE_'+'AMBIENT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20dAmbie'+'ntLight:\x20v'+'ec3f\x20=\x20dDi'+'ffuseLight'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'vec3(0.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20unif'+'orm.materi'+'al_ambient'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20LI'+'T_OCCLUDE_'+'DIRECT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeDiff'+'use(litArg'+'s_ao);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTMAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20litArgs_l'+'ightmap,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmapDi'+'r,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dViewDirW,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dReflD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dVertexNor'+'malW,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'BN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_irides'+'cence_inte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTING\x20||'+'\x20LIT_REFLE'+'CTIONS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddReflecti'+'onCC(ccRef'+'lDirW,\x20lit'+'Args_clear'+'coat_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'ccFresnel\x20'+'=\x20getFresn'+'elCC(dot(d'+'ViewDirW,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccRefle'+'ction\x20=\x20cc'+'Reflection'+'\x20*\x20ccFresn'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccFr'+'esnel\x20=\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'ection\x20=\x20c'+'cReflectio'+'n\x20*\x20litArg'+'s_specular'+'ityFactor;')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20addR'+'eflectionS'+'heen(litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20lit'+'Args_sheen'+'_gloss);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20Fresne'+'l\x20has\x20to\x20b'+'e\x20applied\x20'+'to\x20reflect'+'ions\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'Reflection'+'(dReflDirW'+',\x20litArgs_'+'gloss);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_FRESNEL_'+'MODEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction.rgb\x20'+'*\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'dReflectio'+'n.rgb\x20*\x20li'+'tArgs_spec'+'ularity,\x20d'+'Reflection'+'.a);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve')+('c4f(dRefle'+'ction.rgb\x20'+'*\x20litArgs_'+'specularit'+'yFactor,\x20d'+'Reflection'+'.a);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20AREA'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20*'+'\x20litArgs_s'+'pecularity'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20evalua'+'te\x20materia'+'l\x20based\x20ar'+'ea\x20lights\x20'+'data,\x20shar'+'ed\x20by\x20all\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcLTCLight'+'Values(lit'+'Args_gloss'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20litArg'+'s_specular'+'ity,\x20litAr'+'gs_clearco'+'at_gloss,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20evalua'+'te\x20all\x20non'+'-clustered'+'\x20lights\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22lightEval'+'uationPS,\x20'+'LIGHT_COUN'+'T\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'USTERED_LI'+'GHTS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'ClusteredL'+'ights(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dR'+'eflDirW,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_CLEARCOAT'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20ccRe'+'flDirW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'litArgs_sp'+'ecularity,'+'\x20dVertexNo'+'rmalW,\x20dTB'+'N,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_g'+'loss,\x20litA'+'rgs_sheen_'+'gloss,\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20AREA_LI'+'GHTS\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x20has'+'\x20to\x20be\x20acc'+'umulated\x20d'+'ifferently'+'\x20if\x20we\x20wan'+'t\x20area\x20lig'+'hts\x20to\x20loo'+'k\x20correct\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_clearc'+'oat_specul'+'arity\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20vec3(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addRefra'+'ction(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_worldNorm'+'al,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dViewDirW'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_specu'+'larity,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr')+('gs_albedo,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_tran'+'smission,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_ior,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_dispers'+'ion\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'ambient\x20oc'+'clusion\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_OCCLU'+'DE_DIRECT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeD'+'iffuse(lit'+'Args_ao);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeSpec'+'ular(litAr'+'gs_gloss,\x20'+'litArgs_ao'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20*\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20!defi'+'ned(LIT_OP'+'ACITY_FADE'+'S_SPECULAR'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'==\x20NORMAL\x20'+'||\x20LIT_BLE'+'ND_TYPE\x20=='+'\x20PREMULTIP'+'LIED\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specLum:'+'\x20f32\x20=\x20dot'+'((dSpecula'+'rLight\x20+\x20d'+'Reflection'+'.rgb\x20*\x20dRe'+'flection.a'+'),\x20vec3f(\x20'+'0.2126,\x200.'+'7152,\x200.07'+'22\x20));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'Lum\x20=\x20spec'+'Lum\x20+\x20dot('+'ccSpecular'+'Light\x20*\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20+\x20'+'ccReflecti'+'on\x20*\x20litAr'+'gs_clearco'+'at_specula'+'rity,\x20vec3'+'f(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20c'+'lamp(litAr'+'gs_opacity'+'\x20+\x20gammaCo'+'rrectInput'+'(specLum),'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_opaci'+'ty\x20=\x20litAr'+'gs_opacity'+'\x20*\x20uniform'+'.material_'+'alphaFade;'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20end\x20chunk'+'s\x20-\x20when\x20b'+'aking\x20ligh'+'tmap\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTMAP_B'+'AKING\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_COLOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22b'+'akeLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_LIGH'+'TMAP_BAKIN'+'G_DIR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22ba'+'keDirLmEnd'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'end\x20chunks'+'\x20-\x20in\x20all\x20'+'other\x20case'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'endPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22outpu'+'tAlphaPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_MSD'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20apply'+'Msdf(outpu'+'t.color);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22outp'+'utPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'debugOutpu'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHADOW_CA'+'TCHER\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20when\x20t'+'he\x20shadow\x20'+'catcher\x20is'+'\x20enabled\x20-'+'\x20accumulat'+'ed\x20shadows')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'vec3f(dSha'+'dowCatcher'+'),\x20output.'+'color.a);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),CD='\x0a\x0a//\x20globa'+'ls\x0avar<pri'+'vate>\x20sRef'+'lection:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'VertexNorm'+'alW:\x20vec3f'+';\x0avar<priv'+'ate>\x20dTang'+'entW:\x20vec3'+'f;\x0avar<pri'+'vate>\x20dBin'+'ormalW:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dV'+'iewDirW:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'ReflDirW:\x20'+'vec3f;\x0avar'+'<private>\x20'+'ccReflDirW'+':\x20vec3f;\x0a\x0a'+'//\x20Per-lig'+'ht\x20tempora'+'ries\x0avar<p'+'rivate>\x20dL'+'ightDirNor'+'mW:\x20vec3f;'+'\x0avar<priva'+'te>\x20dAtten'+':\x20f32;\x0a\x0a//'+'\x20Outputs\x0av'+'ar<private'+'>\x20dTBN:\x20ma'+'t3x3f;\x0avar'+'<private>\x20'+'dReflectio'+'n:\x20vec4f;\x0a'+'var<privat'+'e>\x20dDiffus'+'eLight:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccFres'+'nel:\x20f32;\x0a'+'var<privat'+'e>\x20ccRefle'+'ction:\x20vec'+'3f;\x0avar<pr'+'ivate>\x20ccS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccSpec'+'ularityNoF'+'res:\x20f32;\x0a'+'var<privat'+'e>\x20sSpecul'+'arLight:\x20v'+'ec3f;\x0a\x0a//\x20'+'FRAGMENT\x20S'+'HADER\x20INPU'+'TS:\x20UNIFOR'+'MS\x0a\x0a#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_dis'+'persion:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_al'+'phaFade:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_SSAO\x0a\x20\x20'+'\x20\x20var\x20ssao'+'Texture\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20ssaoT'+'extureSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20u'+'niform\x20ssa'+'oTextureSi'+'zeInv:\x20vec'+'2f;\x0a#endif'+'\x0a\x0a//\x20light'+'ing\x20and\x20sh'+'adowing\x20de'+('clarations'+'\x0a\x0a#ifdef\x20L'+'IT_SHADOW_'+'CATCHER\x0a\x20\x20'+'\x20\x20//\x20a\x20var'+'iable\x20to\x20a'+'ccumulate\x20'+'shadows\x20fo'+'r\x20shadow\x20c'+'atcher\x20mat'+'erials\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dShado'+'wCatcher:\x20'+'f32\x20=\x201.0;'+'\x0a#endif\x0a\x0a/'+'/\x20LOOP\x20-\x20u'+'niform\x20dec'+'larations\x20'+'for\x20all\x20no'+'n-clustere'+'d\x20lights\x0a#'+'if\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightDe'+'clarationP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'f\x20LIT_FRES'+'NEL_MODEL\x20'+'==\x20NONE\x20&&'+'\x20!defined('+'LIT_REFLEC'+'TIONS)\x20&&\x20'+'!defined(L'+'IT_DIFFUSE'+'_MAP)\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_OLD'+'_AMBIENT\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0a//'+'\x20lightmap\x20'+'baking\x0a#if'+'def\x20STD_LI'+'GHTMAP_DIR'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20bakeDir'+':\x20f32;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_ADD_AMBIE'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20ambie'+'ntBakeOccl'+'usionContr'+'ast:\x20f32;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20ambientB'+'akeOcclusi'+'onBrightne'+'ss:\x20f32;\x0a#'+'endif\x0a'),PD='\x0a\x0a@fragmen'+'t\x0afn\x20fragm'+'entMain(in'+'put:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ccSpecular'+'Light\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20cc'+'Reflection'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_N'+'ONE_SLICE_'+'MODE\x20==\x20SL'+'ICED\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22startNi'+'neSlicedPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20LIT_NONE'+'_SLICE_MOD'+'E\x20==\x20TILED'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'tartNineSl'+'icedTiledP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'NEEDS_NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dVertexNo'+'rmalW\x20=\x20no'+'rmalize(vN'+'ormalW);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_T'+'ANGENTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_HEIG'+'HTS)\x20||\x20de'+'fined(LIT_'+'USE_NORMAL'+'S)\x20||\x20defi'+'ned(LIT_US'+'E_CLEARCOA'+'T_NORMALS)'+'\x20||\x20define'+'d(LIT_GGX_'+'SPECULAR)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dTan'+'gentW\x20=\x20vT'+'angentW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dBino'+'rmalW\x20=\x20vB'+'inormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20getView'+'Dir();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_TBN'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getTBN('+'dTangentW,'+'\x20dBinormal'+'W,\x20dVertex'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'andleTwoSi'+'dedLightin'+'g();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+('\x0a\x20\x20\x20\x20//\x20in'+'voke\x20front'+'end\x20functi'+'ons\x0a\x20\x20\x20\x20ev'+'aluateFron'+'tend();\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22debugPr'+'ocessFront'+'endPS\x22\x0a\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput\x20='+'\x20evaluateB'+'ackend();\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainEndP'+'S\x22\x0a\x0a\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a}\x0a'),MD='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20material_'+'ambient:\x20v'+'ec3f;\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_LIGHTING'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22light'+'SpecularAn'+'isoGGXPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tSpecularB'+'linnPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0a#include'+'\x20\x22combineP'+'S\x22\x0a\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapAddP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22am'+'bientPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_MS'+'DF\x0a\x20\x20\x20\x20#in'+'clude\x20\x22msd'+'fPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22viewDirPS'+'\x22\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_GGX_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirAni'+'soPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22reflDirP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20f'+'unctionali')+('ty\x0a#includ'+'e\x20\x22lightin'+'gPS\x22\x0a\x0a'),DD='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',ID='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',LD='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a#endif'+'\x0a\x0a#ifdef\x20N'+'INESLICED\x0a'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vMask:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20varying\x20v'+'TiledUv:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dMaskG'+'lobal:\x20vec'+'2f;\x0a\x20\x20\x20\x20va'+'r<private>'+'\x20dTiledUvG'+'lobal:\x20vec'+'2f;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'uterScale:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'atlasRect:'+'\x20vec4f;\x0a\x0a#'+'endif\x0a\x0avar'+'<private>\x20'+'dPositionW'+':\x20vec3f;\x0av'+'ar<private'+'>\x20dModelMa'+'trix:\x20mat4'+'x4f;\x0a\x0a#inc'+'lude\x20\x22tran'+'sformCoreV'+'S\x22\x0a\x0a#ifdef'+'\x20UV0\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ertex_texC'+'oord0:\x20vec'+'2f;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'rtex_texCo'+'ord1:\x20vec2'+'f;\x0a\x20\x20\x20\x20#in'+'clude\x20\x22uv1'+'VS\x22\x0a#endif'+'\x0a\x0a\x0a#ifdef\x20'+'LINEAR_DEP'+'TH\x0a\x20\x20\x20\x20#if'+'ndef\x20VIEWM'+'ATRIX\x0a\x20\x20\x20\x20'+'#define\x20VI'+'EWMATRIX\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#inc'+'lude\x20\x22tran'+'sformVS\x22\x0a\x0a'+'#ifdef\x20NOR'+'MALS\x0a\x20\x20\x20\x20#'+'include\x20\x22n'+'ormalCoreV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malVS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20TANGENTS'+'\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_tangent:'+'\x20vec4f;\x0a#e'+'ndif\x0a\x0a//\x20e'+'xpand\x20unif'+'orms\x20for\x20u'+'v\x20transfor'+'ms\x0a#includ'+'e\x20\x22uvTrans'+'formUnifor'+'msPS,\x20UV_T'+'RANSFORMS_'+('COUNT\x22\x0a\x0a#i'+'fdef\x20MSDF\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22msdfVS'+'\x22\x0a#endif\x0a\x0a'+'#include\x20\x20'+'\x22litUserCo'+'deVS\x22\x0a\x0a@ve'+'rtex\x0afn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'MainStartV'+'S\x22\x0a\x0a\x20\x20\x20\x20va'+'r\x20output\x20:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20get'+'Position()'+';\x0a\x20\x20\x20\x20outp'+'ut.vPositi'+'onW\x20=\x20getW'+'orldPositi'+'on();\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20NO'+'RMALS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vNormalW\x20'+'=\x20getNorma'+'l();\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TA'+'NGENTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vTangent'+'W\x20=\x20normal'+'ize(dNorma'+'lMatrix\x20*\x20'+'vertex_tan'+'gent.xyz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vBin'+'ormalW\x20=\x20c'+'ross(outpu'+'t.vNormalW'+',\x20output.v'+'TangentW)\x20'+'*\x20vertex_t'+'angent.w;\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(GG'+'X_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20UV0'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f\x20=\x20getU'+'v0();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20UV0_UNMOD'+'IFIED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20uv1:\x20vec2'+'f\x20=\x20getUv1'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20U'+'V1_UNMODIF'+'IED\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.vUv1\x20=\x20'+'uv1;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'xpand\x20code'+'\x20for\x20uv\x20tr'+'ansforms\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22uvTrans')+('formVS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20VERTEX_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition'+',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-(uniform'+'.matrix_vi'+'ew\x20*\x20vec4f'+'(output.vP'+'ositionW,\x20'+'1.0)).z;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MSDF\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unpac'+'kMsdfParam'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.outline_c'+'olor\x20=\x20dOu'+'tlineColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.out'+'line_thick'+'ness\x20=\x20dOu'+'tlineThick'+'ness;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.shadow_co'+'lor\x20=\x20dSha'+'dowColor;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.shado'+'w_offset\x20='+'\x20dShadowOf'+'fset;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vMask'+'\x20=\x20dMaskGl'+'obal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vTiledUv\x20'+'=\x20dTiledUv'+'Global;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndVS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),RD='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20evaluateF'+'rontend();'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PICK_PA'+'SS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20getP'+'ickOutput('+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20float2ve'+'c4(vLinear'+'Depth);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndPS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',OD='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avar<priva'+'te>\x20litArg'+'s_albedo:\x20'+'vec3f;\x0a\x0a//'+'\x20Transpare'+'ncy\x0avar<pr'+'ivate>\x20lit'+'Args_opaci'+'ty:\x20f32;\x0a\x0a'+'//\x20Emissio'+'n\x20color\x0ava'+'r<private>'+'\x20litArgs_e'+'mission:\x20v'+'ec3f;\x0a\x0a//\x20'+'Normal\x20dir'+'ection\x20in\x20'+'world\x20spac'+'e\x0avar<priv'+'ate>\x20litAr'+'gs_worldNo'+'rmal:\x20vec3'+'f;\x0a\x0a//\x20Amb'+'ient\x20occlu'+'sion\x20amoun'+'t,\x20range\x20['+'0..1]\x0avar<'+'private>\x20l'+'itArgs_ao:'+'\x20f32;\x0a\x0a//\x20'+'Light\x20map\x20'+'color\x0avar<'+'private>\x20l'+'itArgs_lig'+'htmap:\x20vec'+'3f;\x0a\x0a//\x20Li'+'ght\x20map\x20di'+'rection\x0ava'+'r<private>'+'\x20litArgs_l'+'ightmapDir'+':\x20vec3f;\x0a\x0a'+'//\x20Surface'+'\x20metalness'+'\x20factor,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_metalne'+'ss:\x20f32;\x0a\x0a'+'//\x20The\x20f0\x20'+'specularit'+'y\x20factor\x0av'+'ar<private'+'>\x20litArgs_'+'specularit'+'y:\x20vec3f;\x0a'+'\x0a//\x20Specul'+'arity\x20inte'+'nsity\x20fact'+'or,\x20range\x20'+'[0..1]\x0avar'+'<private>\x20'+'litArgs_sp'+'ecularityF'+'actor:\x20f32'+';\x0a\x0a//\x20The\x20'+'microfacet'+'\x20glossines'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0avar<pri'+'vate>\x20litA'+'rgs_gloss:'+'\x20f32;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_sheen'+'_gloss:\x20f3'+'2;\x0a\x0a//\x20The'+'\x20color\x20of\x20'+'the\x20f0\x20spe'+'cularity\x20f'+'actor\x20for\x20'+'the\x20sheen\x20'+'layer\x0avar<'+'private>\x20l'+'itArgs_she'+'en_specula'+'rity:\x20vec3'+'f;\x0a\x0a//\x20Tra'+'nsmission\x20'+'factor\x20(re'+('fraction),'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_trans'+'mission:\x20f'+'32;\x0a\x0a//\x20Un'+'iform\x20thic'+'kness\x20of\x20m'+'edium,\x20use'+'d\x20by\x20trans'+'mission,\x20r'+'ange\x20[0..i'+'nf]\x0avar<pr'+'ivate>\x20lit'+'Args_thick'+'ness:\x20f32;'+'\x0a\x0a//\x20Index'+'\x20of\x20refrac'+'tion\x0avar<p'+'rivate>\x20li'+'tArgs_ior:'+'\x20f32;\x0a\x0a//\x20'+'Dispersion'+',\x20range\x20[0'+'..1]\x20typic'+'ally,\x20but\x20'+'can\x20be\x20hig'+'her\x0avar<pr'+'ivate>\x20lit'+'Args_dispe'+'rsion:\x20f32'+';\x0a\x0a//\x20Irid'+'escence\x20ef'+'fect\x20inten'+'sity,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'iridescenc'+'e_intensit'+'y:\x20f32;\x0a\x0a/'+'/\x20Thicknes'+'s\x20of\x20the\x20i'+'ridescent\x20'+'microfilm\x20'+'layer,\x20val'+'ue\x20is\x20in\x20n'+'anometers,'+'\x20range\x20[0.'+'.1000]\x0avar'+'<private>\x20'+'litArgs_ir'+'idescence_'+'thickness:'+'\x20f32;\x0a\x0a//\x20'+'The\x20normal'+'\x20used\x20for\x20'+'the\x20clearc'+'oat\x20layer\x0a'+'var<privat'+'e>\x20litArgs'+'_clearcoat'+'_worldNorm'+'al:\x20vec3f;'+'\x0a\x0a//\x20Inten'+'sity\x20of\x20th'+'e\x20clearcoa'+'t\x20layer,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_clearco'+'at_specula'+'rity:\x20f32;'+'\x0a\x0a//\x20Gloss'+'iness\x20of\x20c'+'learcoat\x20l'+'ayer,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'clearcoat_'+'gloss:\x20f32'+';\x0a\x0a'),FD='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20t'+'extureBias'+':\x20f32\x20=\x20-1'+'000.0;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20texture'+'Bias:\x20f32;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ShaderArgs'+'PS\x22\x0a',ND='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20view_p'+'osition:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20li'+'ght_radius'+':\x20f32;\x0a#en'+'dif\x0a\x0a#if\x20S'+'HADOW_TYPE'+'\x20==\x20PCSS_3'+'2F\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lin'+'earizeDept'+'hPS\x22\x0a#endi'+'f\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serMainSta'+'rtPS\x22\x0a\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20/'+'/\x20using\x20no'+'n-standard'+'\x20depth,\x20i.'+'e\x20gl_FragC'+'oord.z\x0a\x20\x20\x20'+'\x20#ifdef\x20PE'+'RSPECTIVE_'+'DEPTH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20de'+'pth:\x20f32\x20='+'\x20input.pos'+'ition.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20PCS'+'S_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot/omni'+'\x20shadows\x20c'+'urrently\x20u'+'se\x20linear\x20'+'depth.\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20TODO:\x20us'+'e\x20perspect'+'ive\x20depth\x20'+'for\x20spot/o'+'mni\x20the\x20sa'+'me\x20way\x20as\x20'+'directiona'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT_TYPE\x20!'+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'depth\x20=\x20li'+'nearizeDep'+'thWithPara'+'ms(depth,\x20'+'camera_par'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20depth:\x20'+'f32\x20=\x20min('+'distance(u'+'niform.vie'+'w_position'+',\x20input.vP'+'ositionW)\x20'+'/\x20uniform.'+'light_radi'+'us,\x200.9999'+'9);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'MODIFIED_D'+'EPTH\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SHADO'+'W_TYPE\x20==\x20'+'VSM_16F\x20||'+'\x20SHADOW_TY'+('PE\x20==\x20VSM_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20SHAD'+'OW_TYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20expon'+'ent:\x20f32\x20='+'\x2015.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20exp'+'onent:\x20f32'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dep'+'th_vsm\x20=\x202'+'.0\x20*\x20depth'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dept'+'h_vsm\x20=\x20ex'+'p(exponent'+'\x20*\x20depth_v'+'sm);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(depth_'+'vsm,\x20depth'+'_vsm\x20*\x20dep'+'th_vsm,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20PCSS'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(de'+'pth,\x200.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MODIFI'+'ED_DEPTH\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20If'+'\x20we\x20end\x20up'+'\x20using\x20mod'+'ified\x20dept'+'h,\x20it\x20need'+'s\x20to\x20be\x20ex'+'plicitly\x20w'+'ritten\x20to\x20'+'gl_FragDep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.frag'+'Depth\x20=\x20de'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'just\x20the\x20s'+'implest\x20co'+'de,\x20color\x20'+'is\x20not\x20wri'+'tten\x20anywa'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),kD='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0afn\x20'+'LTC_Uv(N:\x20'+'vec3f,\x20V:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20co'+'nst\x20LUT_SI'+'ZE:\x20f32\x20=\x20'+'64.0;\x0a\x20\x20\x20\x20'+'const\x20LUT_'+'SCALE:\x20f32'+'\x20=\x20(LUT_SI'+'ZE\x20-\x201.0)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_BIAS'+':\x20f32\x20=\x200.'+'5\x20/\x20LUT_SI'+'ZE;\x0a\x20\x20\x20\x20le'+'t\x20dotNV:\x20f'+'32\x20=\x20satur'+'ate(dot(\x20N'+',\x20V\x20));\x0a\x20\x20'+'\x20\x20//\x20textu'+'re\x20paramet'+'erized\x20by\x20'+'sqrt(\x20GGX\x20'+'alpha\x20)\x20an'+'d\x20sqrt(\x201\x20'+'-\x20cos(\x20the'+'ta\x20)\x20)\x0a\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20vec'+'2f(\x20roughn'+'ess,\x20sqrt('+'\x201.0\x20-\x20dot'+'NV\x20)\x20);\x0a\x20\x20'+'\x20\x20return\x20u'+'v\x20*\x20LUT_SC'+'ALE\x20+\x20LUT_'+'BIAS;\x0a}\x0a\x0af'+'n\x20LTC_Clip'+'pedSphereF'+'ormFactor('+'\x20f:\x20vec3f\x20'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20//\x20Re'+'al-Time\x20Ar'+'ea\x20Lightin'+'g:\x20a\x20Journ'+'ey\x20from\x20Re'+'search\x20to\x20'+'Production'+'\x20(p.102)\x0a\x20'+'\x20\x20\x20//\x20An\x20a'+'pproximati'+'on\x20of\x20the\x20'+'form\x20facto'+'r\x20of\x20a\x20hor'+'izon-clipp'+'ed\x20rectang'+'le.\x0a\x20\x20\x20\x20le'+'t\x20l:\x20f32\x20='+'\x20length(\x20f'+'\x20);\x0a\x20\x20\x20\x20re'+'turn\x20max(\x20'+'(\x20l\x20*\x20l\x20+\x20'+'f.z\x20)\x20/\x20(\x20'+'l\x20+\x201.0\x20),'+'\x200.0\x20);\x0a}\x0a'+'\x0afn\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'v1:\x20vec3f,'+'\x20v2:\x20vec3f'+'\x20)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20x:\x20f32\x20='+'\x20dot(\x20v1,\x20'+'v2\x20);\x0a\x20\x20\x20\x20'+'let\x20y:\x20f32'+('\x20=\x20abs(\x20x\x20'+');\x0a\x20\x20\x20\x20//\x20'+'rational\x20p'+'olynomial\x20'+'approximat'+'ion\x20to\x20the'+'ta\x20/\x20sin(\x20'+'theta\x20)\x20/\x20'+'2PI\x0a\x20\x20\x20\x20le'+'t\x20a:\x20f32\x20='+'\x200.8543985'+'\x20+\x20(\x200.496'+'5155\x20+\x200.0'+'145206\x20*\x20y'+'\x20)\x20*\x20y;\x0a\x20\x20'+'\x20\x20let\x20b:\x20f'+'32\x20=\x203.417'+'5940\x20+\x20(\x204'+'.1616724\x20+'+'\x20y\x20)\x20*\x20y;\x0a'+'\x20\x20\x20\x20let\x20v:'+'\x20f32\x20=\x20a\x20/'+'\x20b;\x0a\x20\x20\x20\x20le'+'t\x20inv_sqrt'+'_term\x20=\x20in'+'verseSqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7f\x20)\x20);\x0a'+'\x20\x20\x20\x20let\x20th'+'eta_sinthe'+'ta:\x20f32\x20=\x20'+'select(\x20(0'+'.5\x20*\x20inv_s'+'qrt_term\x20-'+'\x20v),\x20v,\x20x\x20'+'>\x200.0\x20);\x0a\x20'+'\x20\x20\x20return\x20'+'cross(\x20v1,'+'\x20v2\x20)\x20*\x20th'+'eta_sinthe'+'ta;\x0a}\x0a\x0astr'+'uct\x20Coords'+'\x20{\x0a\x20\x20\x20\x20coo'+'rd0:\x20vec3f'+',\x0a\x20\x20\x20\x20coor'+'d1:\x20vec3f,'+'\x0a\x20\x20\x20\x20coord'+'2:\x20vec3f,\x0a'+'\x20\x20\x20\x20coord3'+':\x20vec3f,\x0a}'+'\x0a\x0afn\x20LTC_E'+'valuateRec'+'t(\x20N:\x20vec3'+'f,\x20V:\x20vec3'+'f,\x20P:\x20vec3'+'f,\x20mInv:\x20m'+'at3x3f,\x20re'+'ctCoords:\x20'+'Coords)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20//\x20bail\x20i'+'f\x20point\x20is'+'\x20on\x20back\x20s'+'ide\x20of\x20pla'+'ne\x20of\x20ligh'+'t\x0a\x20\x20\x20\x20//\x20a'+'ssumes\x20ccw'+'\x20winding\x20o'+'rder\x20of\x20li'+'ght\x20vertic'+'es\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec3f'+'\x20=\x20rectCoo'+'rds.coord1'+'\x20-\x20rectCoo'+'rds.coord0'+';\x0a\x20\x20\x20\x20let\x20'+'v2:\x20vec3f\x20'+'=\x20rectCoor'+'ds.coord3\x20'+'-\x20rectCoor'+'ds.coord0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'lightNorma'+'l:\x20vec3f\x20='+'\x20cross(\x20v1'+',\x20v2\x20);\x0a\x20\x20'+'\x20\x20let\x20fact'+'or:\x20f32\x20=\x20'+'sign(-dot('+'\x20lightNorm'+'al,\x20P\x20-\x20re'+'ctCoords.c'+'oord0\x20));\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'nstruct\x20or'+'thonormal\x20'+'basis\x20arou'+'nd\x20N\x0a\x20\x20\x20\x20l')+('et\x20T1:\x20vec'+'3f\x20=\x20norma'+'lize(\x20V\x20-\x20'+'N\x20*\x20dot(\x20V'+',\x20N\x20)\x20);\x0a\x20'+'\x20\x20\x20let\x20T2:'+'\x20vec3f\x20=\x20f'+'actor\x20*\x20cr'+'oss(\x20N,\x20T1'+'\x20);\x20//\x20neg'+'ated\x20from\x20'+'paper;\x20pos'+'sibly\x20due\x20'+'to\x20a\x20diffe'+'rent\x20hande'+'dness\x20of\x20w'+'orld\x20coord'+'inate\x20syst'+'em\x0a\x20\x20\x20\x20//\x20'+'compute\x20tr'+'ansform\x0a\x20\x20'+'\x20\x20let\x20mat:'+'\x20mat3x3f\x20='+'\x20mInv\x20*\x20tr'+'anspose(\x20m'+'at3x3f(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'transform\x20'+'rect\x0a\x20\x20\x20\x20v'+'ar\x20coords:'+'\x20array<vec'+'3f,\x204>;\x0a\x20\x20'+'\x20\x20coords[0'+']\x20=\x20mat\x20*\x20'+'(\x20rectCoor'+'ds.coord0\x20'+'-\x20P\x20);\x0a\x20\x20\x20'+'\x20coords[1]'+'\x20=\x20mat\x20*\x20('+'\x20rectCoord'+'s.coord1\x20-'+'\x20P\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20mat\x20*\x20(\x20'+'rectCoords'+'.coord2\x20-\x20'+'P\x20);\x0a\x20\x20\x20\x20c'+'oords[3]\x20='+'\x20mat\x20*\x20(\x20r'+'ectCoords.'+'coord3\x20-\x20P'+'\x20);\x0a\x20\x20\x20\x20//'+'\x20project\x20r'+'ect\x20onto\x20s'+'phere\x0a\x20\x20\x20\x20'+'coords[0]\x20'+'=\x20normaliz'+'e(\x20coords['+'0]\x20);\x0a\x20\x20\x20\x20'+'coords[1]\x20'+'=\x20normaliz'+'e(\x20coords['+'1]\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20normaliz'+'e(\x20coords['+'2]\x20);\x0a\x20\x20\x20\x20'+'coords[3]\x20'+'=\x20normaliz'+'e(\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20vector\x20'+'form\x20facto'+'r\x0a\x20\x20\x20\x20var\x20'+'vectorForm'+'Factor:\x20ve'+'c3f\x20=\x20vec3'+'f(\x200.0\x20);\x0a'+'\x20\x20\x20\x20vector'+'FormFactor'+'\x20=\x20vectorF'+'ormFactor\x20'+'+\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[0],\x20c'+'oords[1]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20=\x20vecto'+'rFormFacto'+'r\x20+\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'coords[1],'+'\x20coords[2]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa')+('ctor\x20=\x20vec'+'torFormFac'+'tor\x20+\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[2'+'],\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20=\x20v'+'ectorFormF'+'actor\x20+\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[3],\x20coord'+'s[0]\x20);\x0a\x20\x20'+'\x20\x20//\x20adjus'+'t\x20for\x20hori'+'zon\x20clippi'+'ng\x0a\x20\x20\x20\x20let'+'\x20result:\x20f'+'32\x20=\x20LTC_C'+'lippedSphe'+'reFormFact'+'or(\x20vector'+'FormFactor'+'\x20);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20resu'+'lt;\x0a}\x0a\x0avar'+'<private>\x20'+'dLTCCoords'+':\x20Coords;\x0a'+'fn\x20getLTCL'+'ightCoords'+'(lightPos:'+'\x20vec3f,\x20ha'+'lfWidth:\x20v'+'ec3f,\x20half'+'Height:\x20ve'+'c3f)\x20->\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20var\x20coord'+'s:\x20Coords;'+'\x0a\x20\x20\x20\x20coord'+'s.coord0\x20='+'\x20lightPos\x20'+'+\x20halfWidt'+'h\x20-\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd1\x20=\x20ligh'+'tPos\x20-\x20hal'+'fWidth\x20-\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20coord'+'s.coord2\x20='+'\x20lightPos\x20'+'-\x20halfWidt'+'h\x20+\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd3\x20=\x20ligh'+'tPos\x20+\x20hal'+'fWidth\x20+\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20retur'+'n\x20coords;\x0a'+'}\x0a\x0avar<pri'+'vate>\x20dSph'+'ereRadius:'+'\x20f32;\x0afn\x20g'+'etSphereLi'+'ghtCoords('+'lightPos:\x20'+'vec3f,\x20hal'+'fWidth:\x20ve'+'c3f,\x20halfH'+'eight:\x20vec'+'3f)\x20->\x20Coo'+'rds\x20{\x0a\x20\x20\x20\x20'+'//\x20used\x20fo'+'r\x20simple\x20s'+'phere\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20//\x20als'+'o,\x20the\x20cod'+'e\x20only\x20han'+'dles\x20a\x20sph'+'erical\x20lig'+'ht,\x20it\x20can'+'not\x20be\x20non'+'-uniformly'+'\x20scaled\x20in'+'\x20world\x20spa'+'ce,\x20and\x20so'+'\x20we\x20enforc'+'e\x20it\x20here\x0a'+'\x20\x20\x20\x20dSpher'+'eRadius\x20=\x20')+('max(length'+'(halfWidth'+'),\x20length('+'halfHeight'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20Billboar'+'d\x20the\x202d\x20l'+'ight\x20quad\x20'+'to\x20reflect'+'ion\x20vector'+',\x20as\x20it\x27s\x20'+'used\x20for\x20s'+'pecular.\x20T'+'his\x20allows'+'\x20us\x20to\x20use'+'\x20disk\x20math'+'\x20for\x20the\x20s'+'phere.\x0a\x20\x20\x20'+'\x20let\x20f:\x20ve'+'c3f\x20=\x20refl'+'ect(normal'+'ize(lightP'+'os\x20-\x20unifo'+'rm.view_po'+'sition),\x20v'+'NormalW);\x0a'+'\x20\x20\x20\x20let\x20w:'+'\x20vec3f\x20=\x20n'+'ormalize(c'+'ross(f,\x20ha'+'lfHeight))'+';\x0a\x20\x20\x20\x20let\x20'+'h:\x20vec3f\x20='+'\x20normalize'+'(cross(f,\x20'+'w));\x0a\x0a\x20\x20\x20\x20'+'return\x20get'+'LTCLightCo'+'ords(light'+'Pos,\x20w\x20*\x20d'+'SphereRadi'+'us,\x20h\x20*\x20dS'+'phereRadiu'+'s);\x0a}\x0a\x0a//\x20'+'used\x20for\x20L'+'TC\x20LUT\x20tex'+'ture\x20looku'+'p\x0avar<priv'+'ate>\x20dLTCU'+'V:\x20vec2f;\x0a'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20var<p'+'rivate>\x20cc'+'LTCUV:\x20vec'+'2f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightUV(g'+'loss:\x20f32,'+'\x20worldNorm'+'al:\x20vec3f,'+'\x20viewDir:\x20'+'vec3f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20roug'+'hness:\x20f32'+'\x20=\x20max((1.'+'0\x20-\x20gloss)'+'\x20*\x20(1.0\x20-\x20'+'gloss),\x200.'+'001);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_Uv(\x20world'+'Normal,\x20vi'+'ewDir,\x20rou'+'ghness\x20);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20energ'+'y\x20conserva'+'tion\x20and\x20t'+'o\x20modulate'+'\x20specular\x0a'+'var<privat'+'e>\x20dLTCSpe'+'cFres:\x20vec'+'3f;\x0a#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20v'+'ar<private'+'>\x20ccLTCSpe'+'cFres:\x20vec'+'3f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightSpec'+'Fres(uv:\x20v'+'ec2f,\x20spec'+'ularity:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20t2:\x20v')+('ec4f\x20=\x20tex'+'tureSample'+'Level(area'+'LightsLutT'+'ex2,\x20areaL'+'ightsLutTe'+'x2Sampler,'+'\x20uv,\x200.0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20specular'+'ity\x20*\x20t2.x'+'\x20+\x20(\x20vec3f'+'(\x201.0\x20)\x20-\x20'+'specularit'+'y)\x20*\x20t2.y;'+'\x0a}\x0a\x0afn\x20cal'+'cLTCLightV'+'alues(glos'+'s:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f,\x20specul'+'arity:\x20vec'+'3f,\x20clearc'+'oatGloss:\x20'+'f32,\x20clear'+'coatWorldN'+'ormal:\x20vec'+'3f,\x20clearc'+'oatSpecula'+'rity:\x20f32)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'UV\x20=\x20getLT'+'CLightUV(c'+'learcoatGl'+'oss,\x20clear'+'coatWorldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'SpecFres\x20='+'\x20getLTCLig'+'htSpecFres'+'(ccLTCUV,\x20'+'vec3f(clea'+'rcoatSpecu'+'larity));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0afn\x20cal'+'cDiskLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20cal'+'cRectLight'+'Values(lig'+'htPos,\x20hal'+'fWidth,\x20ha'+'lfHeight);'+'\x0a}\x0afn\x20calc'+'SphereLigh'+'tValues(li'+'ghtPos:\x20ve'+'c3f,\x20halfW'+'idth:\x20vec3'+'f,\x20halfHei')+('ght:\x20vec3f'+')\x20{\x0a\x20\x20\x20\x20dL'+'TCCoords\x20='+'\x20getSphere'+'LightCoord'+'s(lightPos'+',\x20halfWidt'+'h,\x20halfHei'+'ght);\x0a}\x0a\x0a/'+'/\x20An\x20exten'+'ded\x20versio'+'n\x20of\x20the\x20i'+'mplementat'+'ion\x20from\x20\x22'+'How\x20to\x20sol'+'ve\x20a\x20cubic'+'\x20equation,'+'\x20revisited'+'\x22\x0a//\x20http:'+'//momentsi'+'ngraphics.'+'de/?p=105\x0a'+'fn\x20SolveCu'+'bic(Coeffi'+'cient_in:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20pi:\x20'+'f32\x20=\x203.14'+'159;\x0a\x20\x20\x20\x20v'+'ar\x20Coeffic'+'ient\x20=\x20Coe'+'fficient_i'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20Normalize'+'\x20the\x20polyn'+'omial\x0a\x20\x20\x20\x20'+'Coefficien'+'t\x20=\x20vec4f('+'Coefficien'+'t.xyz\x20/\x20Co'+'efficient.'+'w,\x20Coeffic'+'ient.w);\x0a\x0a'+'\x20\x20\x20\x20//\x20Div'+'ide\x20middle'+'\x20coefficie'+'nts\x20by\x20thr'+'ee\x0a\x20\x20\x20\x20let'+'\x20new_yz:\x20v'+'ec2f\x20=\x20Coe'+'fficient.y'+'z\x20/\x203.0;\x0a\x20'+'\x20\x20\x20Coeffic'+'ient\x20=\x20vec'+'4f(Coeffic'+'ient.x,\x20ne'+'w_yz.x,\x20ne'+'w_yz.y,\x20Co'+'efficient.'+'w);\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20let\x20A:\x20'+'f32\x20=\x20Coef'+'ficient.w;'+'\x0a\x20\x20\x20\x20let\x20B'+':\x20f32\x20=\x20Co'+'efficient.'+'z;\x0a\x20\x20\x20\x20let'+'\x20C:\x20f32\x20=\x20'+'Coefficien'+'t.y;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20Coeffici'+'ent.x;\x0a\x0a\x20\x20'+'\x20\x20//\x20Compu'+'te\x20the\x20Hes'+'sian\x20and\x20t'+'he\x20discrim'+'inant\x0a\x20\x20\x20\x20'+'let\x20Delta:'+'\x20vec3f\x20=\x20v'+'ec3f(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20-Coeff'+'icient.z\x20*'+'\x20Coefficie'+'nt.z\x20+\x20Coe'+'fficient.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'-Coefficie'+'nt.y\x20*\x20Coe'+'fficient.z'+'\x20+\x20Coeffic'+'ient.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'vec2f(Coef'+'ficient.z,'+'\x20-Coeffici'+'ent.y),\x20Co'+'efficient.'+'xy)\x0a\x20\x20\x20\x20);')+('\x0a\x0a\x20\x20\x20\x20let\x20'+'Discrimina'+'nt:\x20f32\x20=\x20'+'dot(vec2f('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20var\x20xlc:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20var\x20xsc:'+'\x20vec2f;\x0a\x0a\x20'+'\x20\x20\x20//\x20Algo'+'rithm\x20A\x0a\x20\x20'+'\x20\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20A_a:'+'\x20f32\x20=\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_a:\x20f'+'32\x20=\x20Delta'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_a:'+'\x20f32\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20Theta:\x20f'+'32\x20=\x20atan2'+'(sqrt(Disc'+'riminant),'+'\x20-D_a)\x20/\x203'+'.0;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sqr'+'t_neg_Ca\x20='+'\x20sqrt(-C_a'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20x_1a:'+'\x20f32\x20=\x202.0'+'\x20*\x20sqrt_ne'+'g_Ca\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x_3a:\x20f32'+'\x20=\x202.0\x20*\x20s'+'qrt_neg_Ca'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20xl:'+'\x20f32\x20=\x20sel'+'ect(x_3a,\x20'+'x_1a,\x20(x_1'+'a\x20+\x20x_3a)\x20'+'>\x202.0\x20*\x20B)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'xlc\x20=\x20vec2'+'f(xl\x20-\x20B,\x20'+'A);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Al'+'gorithm\x20D\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20A_'+'d:\x20f32\x20=\x20D'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_d:\x20f'+'32\x20=\x20Delta'+'.z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_d:'+'\x20f32\x20=\x20-D\x20'+'*\x20Delta.y\x20'+'+\x202.0\x20*\x20C\x20'+'*\x20Delta.z;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Take\x20th'+'e\x20cubic\x20ro'+'ot\x20of\x20a\x20no'+'rmalized\x20c'+'omplex\x20num'+'ber\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20Thet'+'a:\x20f32\x20=\x20a'+'tan2(D\x20*\x20s'+'qrt(Discri'+'minant),\x20-'+'D_d)\x20/\x203.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20sqrt_'+'neg_Cd\x20=\x20s'+'qrt(-C_d);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20x_1d:\x20f'+'32\x20=\x202.0\x20*')+('\x20sqrt_neg_'+'Cd\x20*\x20cos(T'+'heta);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20x'+'_3d:\x20f32\x20='+'\x202.0\x20*\x20sqr'+'t_neg_Cd\x20*'+'\x20cos(Theta'+'\x20+\x20(2.0\x20/\x20'+'3.0)\x20*\x20pi)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20xs:\x20f'+'32\x20=\x20selec'+'t(x_3d,\x20x_'+'1d,\x20x_1d\x20+'+'\x20x_3d\x20<\x202.'+'0\x20*\x20C);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20xsc\x20'+'=\x20vec2f(-D'+',\x20xs\x20+\x20C);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20let\x20E:\x20f'+'32\x20=\x20\x20xlc.'+'y\x20*\x20xsc.y;'+'\x0a\x20\x20\x20\x20let\x20F'+':\x20f32\x20=\x20-x'+'lc.x\x20*\x20xsc'+'.y\x20-\x20xlc.y'+'\x20*\x20xsc.x;\x0a'+'\x20\x20\x20\x20let\x20G:'+'\x20f32\x20=\x20\x20xl'+'c.x\x20*\x20xsc.'+'x;\x0a\x0a\x20\x20\x20\x20le'+'t\x20xmc:\x20vec'+'2f\x20=\x20vec2f'+'(C\x20*\x20F\x20-\x20B'+'\x20*\x20G,\x20-B\x20*'+'\x20F\x20+\x20C\x20*\x20E'+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20Root:\x20ve'+'c3f\x20=\x20vec3'+'f(xsc.x\x20/\x20'+'xsc.y,\x20xmc'+'.x\x20/\x20xmc.y'+',\x20xlc.x\x20/\x20'+'xlc.y);\x0a\x0a\x20'+'\x20\x20\x20if\x20(Roo'+'t.x\x20<\x20Root'+'.y\x20&&\x20Root'+'.x\x20<\x20Root.'+'z)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root\x20=\x20'+'Root.yxz;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(Root.'+'z\x20<\x20Root.x'+'\x20&&\x20Root.z'+'\x20<\x20Root.y)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root\x20=\x20Ro'+'ot.xzy;\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20Root;'+'\x0a}\x0a\x0afn\x20LTC'+'_EvaluateD'+'isk(N:\x20vec'+'3f,\x20V:\x20vec'+'3f,\x20P:\x20vec'+'3f,\x20Minv:\x20'+'mat3x3f,\x20p'+'oints:\x20Coo'+'rds)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20let\x20T1:\x20'+'vec3f\x20=\x20no'+'rmalize(V\x20'+'-\x20N\x20*\x20dot('+'V,\x20N));\x0a\x20\x20'+'\x20\x20let\x20T2:\x20'+'vec3f\x20=\x20cr'+'oss(N,\x20T1)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'rotate\x20are'+'a\x20light\x20in'+'\x20(T1,\x20T2,\x20'+'N)\x20basis\x0a\x20'+'\x20\x20\x20let\x20R:\x20'+'mat3x3f\x20=\x20'+'transpose('+'\x20mat3x3f(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20polygon\x20'+'(allocate\x20'+'5\x20vertices'+'\x20for\x20clipp')+('ing\x0a\x20\x20\x20\x20va'+'r\x20L_:\x20arra'+'y<vec3f,\x203'+'>;\x0a\x20\x20\x20\x20L_['+'0]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[1'+']\x20=\x20R\x20*\x20(\x20'+'points.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20L_[2]'+'\x20=\x20R\x20*\x20(\x20p'+'oints.coor'+'d2\x20-\x20P\x20);\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'it\x20ellipse'+'\x0a\x20\x20\x20\x20let\x20C'+':\x20vec3f\x20\x20='+'\x200.5\x20*\x20(L_'+'[0]\x20+\x20L_[2'+']);\x0a\x20\x20\x20\x20va'+'r\x20V1:\x20vec3'+'f\x20=\x200.5\x20*\x20'+'(L_[1]\x20-\x20L'+'_[2]);\x0a\x20\x20\x20'+'\x20var\x20V2:\x20v'+'ec3f\x20=\x200.5'+'\x20*\x20(L_[1]\x20'+'-\x20L_[0]);\x0a'+'\x0a\x20\x20\x20\x20let\x20C'+'_Minv:\x20vec'+'3f\x20\x20=\x20Minv'+'\x20*\x20C;\x0a\x20\x20\x20\x20'+'let\x20V1_Min'+'v:\x20vec3f\x20='+'\x20Minv\x20*\x20V1'+';\x0a\x20\x20\x20\x20let\x20'+'V2_Minv:\x20v'+'ec3f\x20=\x20Min'+'v\x20*\x20V2;\x0a\x0a\x20'+'\x20\x20\x20//\x20comp'+'ute\x20eigenv'+'ectors\x20of\x20'+'ellipse\x0a\x20\x20'+'\x20\x20var\x20a:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20b:\x20f32;\x0a'+'\x20\x20\x20\x20let\x20d1'+'1:\x20f32\x20=\x20d'+'ot(V1_Minv'+',\x20V1_Minv)'+';\x0a\x20\x20\x20\x20let\x20'+'d22:\x20f32\x20='+'\x20dot(V2_Mi'+'nv,\x20V2_Min'+'v);\x0a\x20\x20\x20\x20le'+'t\x20d12:\x20f32'+'\x20=\x20dot(V1_'+'Minv,\x20V2_M'+'inv);\x0a\x20\x20\x20\x20'+'if\x20(abs(d1'+'2)\x20/\x20sqrt('+'d11\x20*\x20d22)'+'\x20>\x200.0001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20tr:\x20f'+'32\x20=\x20d11\x20+'+'\x20d22;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'t_inner:\x20f'+'32\x20=\x20-d12\x20'+'*\x20d12\x20+\x20d1'+'1\x20*\x20d22;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20det:\x20f32\x20'+'=\x20sqrt(det'+'_inner);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20u:\x20f32\x20=\x20'+'0.5\x20*\x20sqrt'+'(tr\x20-\x202.0\x20'+'*\x20det);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'v:\x20f32\x20=\x200'+'.5\x20*\x20sqrt('+'tr\x20+\x202.0\x20*'+'\x20det);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20e'+'_max:\x20f32\x20'+'=\x20(u\x20+\x20v)\x20'+'*\x20(u\x20+\x20v);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20e_min:\x20'+'f32\x20=\x20(u\x20-'+'\x20v)\x20*\x20(u\x20-'+'\x20v);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20V1'+'_:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va')+('r\x20V2_:\x20vec'+'3f;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(d11'+'\x20>\x20d22)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V1_\x20=\x20d1'+'2\x20*\x20V1_Min'+'v\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2_Minv;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20V2_\x20=\x20d12'+'\x20*\x20V1_Minv'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2_Minv;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12*V2_'+'Minv\x20+\x20(e_'+'max\x20-\x20d22)'+'*V1_Minv;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V2_\x20=\x20d1'+'2*V2_Minv\x20'+'+\x20(e_min\x20-'+'\x20d22)*V1_M'+'inv;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20e_max;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20b'+'\x20=\x201.0\x20/\x20e'+'_min;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20V1\x20=\x20n'+'ormalize(V'+'1_);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20V2\x20=\x20no'+'rmalize(V2'+'_);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20dot(V'+'1_Minv,\x20V1'+'_Minv);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20b\x20=\x20'+'1.0\x20/\x20dot('+'V2_Minv,\x20V'+'2_Minv);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V1\x20'+'=\x20V1_Minv\x20'+'*\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20=\x20V2_Min'+'v\x20*\x20sqrt(b'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20V3'+':\x20vec3f\x20=\x20'+'normalize('+'cross(V1,\x20'+'V2));\x0a\x20\x20\x20\x20'+'if\x20(dot(C_'+'Minv,\x20V3)\x20'+'<\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V3\x20'+'=\x20V3\x20*\x20-1.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20let\x20L:'+'\x20f32\x20\x20=\x20do'+'t(V3,\x20C_Mi'+'nv);\x0a\x20\x20\x20\x20l'+'et\x20x0:\x20f32'+'\x20=\x20dot(V1,'+'\x20C_Minv)\x20/'+'\x20L;\x0a\x20\x20\x20\x20le'+'t\x20y0:\x20f32\x20'+'=\x20dot(V2,\x20'+'C_Minv)\x20/\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20E1:\x20f32\x20'+'=\x20inverseS'+'qrt(a);\x0a\x20\x20'+'\x20\x20let\x20E2:\x20'+'f32\x20=\x20inve'+'rseSqrt(b)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20a_scaled\x20'+'=\x20a\x20*\x20L\x20*\x20'+'L;\x0a\x20\x20\x20\x20let'+'\x20b_scaled\x20'+'=\x20b\x20*\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20c0:\x20f32\x20'+'=\x20a_scaled'+'\x20*\x20b_scale'+'d;\x0a\x20\x20\x20\x20let'+'\x20c1:\x20f32\x20='+'\x20a_scaled\x20'+'*\x20b_scaled')+('\x20*\x20(1.0\x20+\x20'+'x0\x20*\x20x0\x20+\x20'+'y0\x20*\x20y0)\x20-'+'\x20a_scaled\x20'+'-\x20b_scaled'+';\x0a\x20\x20\x20\x20let\x20'+'c2:\x20f32\x20=\x20'+'1.0\x20-\x20a_sc'+'aled\x20*\x20(1.'+'0\x20+\x20x0\x20*\x20x'+'0)\x20-\x20b_sca'+'led\x20*\x20(1.0'+'\x20+\x20y0\x20*\x20y0'+');\x0a\x20\x20\x20\x20let'+'\x20c3:\x20f32\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20let\x20roots'+':\x20vec3f\x20=\x20'+'SolveCubic'+'(vec4f(c0,'+'\x20c1,\x20c2,\x20c'+'3));\x0a\x20\x20\x20\x20l'+'et\x20e1:\x20f32'+'\x20=\x20roots.x'+';\x0a\x20\x20\x20\x20let\x20'+'e2:\x20f32\x20=\x20'+'roots.y;\x0a\x20'+'\x20\x20\x20let\x20e3:'+'\x20f32\x20=\x20roo'+'ts.z;\x0a\x0a\x20\x20\x20'+'\x20var\x20avgDi'+'r:\x20vec3f\x20='+'\x20vec3f(a_s'+'caled\x20*\x20x0'+'\x20/\x20(a_scal'+'ed\x20-\x20e2),\x20'+'b_scaled\x20*'+'\x20y0\x20/\x20(b_s'+'caled\x20-\x20e2'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20let\x20ro'+'tate:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20let\x20L'+'1:\x20f32\x20=\x20s'+'qrt(-e2\x20/\x20'+'e3);\x0a\x20\x20\x20\x20l'+'et\x20L2:\x20f32'+'\x20=\x20sqrt(-e'+'2\x20/\x20e1);\x0a\x0a'+'\x20\x20\x20\x20let\x20fo'+'rmFactor:\x20'+'f32\x20=\x20max('+'0.0,\x20L1\x20*\x20'+'L2\x20*\x20inver'+'seSqrt((1.'+'0\x20+\x20L1\x20*\x20L'+'1)\x20*\x20(1.0\x20'+'+\x20L2\x20*\x20L2)'+'));\x0a\x0a\x20\x20\x20\x20c'+'onst\x20LUT_S'+'IZE_disk:\x20'+'f32\x20=\x2064.0'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_SCAL'+'E_disk:\x20f3'+'2\x20=\x20(\x20LUT_'+'SIZE_disk\x20'+'-\x201.0\x20)\x20/\x20'+'LUT_SIZE_d'+'isk;\x0a\x20\x20\x20\x20c'+'onst\x20LUT_B'+'IAS_disk:\x20'+'f32\x20=\x200.5\x20'+'/\x20LUT_SIZE'+'_disk;\x0a\x0a\x20\x20'+'\x20\x20//\x20use\x20t'+'abulated\x20h'+'orizon-cli'+'pped\x20spher'+'e\x0a\x20\x20\x20\x20var\x20'+'uv:\x20vec2f\x20'+'=\x20vec2f(av'+'gDir.z\x20*\x200'+'.5\x20+\x200.5,\x20'+'formFactor'+');\x0a\x20\x20\x20\x20uv\x20'+'=\x20uv\x20*\x20LUT'+'_SCALE_dis'+'k\x20+\x20LUT_BI'+'AS_disk;\x0a\x0a'+'\x20\x20\x20\x20let\x20sc')+('ale:\x20f32\x20='+'\x20textureSa'+'mpleLevel('+'areaLights'+'LutTex2,\x20a'+'reaLightsL'+'utTex2Samp'+'ler,\x20uv,\x200'+'.0).w;\x0a\x0a\x20\x20'+'\x20\x20return\x20f'+'ormFactor\x20'+'*\x20scale;\x0a}'+'\x0a\x0a//\x20LTC_E'+'valuateDis'+'k\x20in\x20some\x20'+'rare\x20cases'+'\x20genereate'+'s\x20NaN\x20valu'+'es\x20in\x20a\x20or'+'\x20b,\x20just\x20b'+'efore\x20\x27flo'+'at\x20c0\x20=\x20a\x20'+'*\x20b;\x27\x0a//\x20G'+'et\x20rid\x20of\x20'+'those\x20Nan\x20'+'values\x20bef'+'ore\x20they\x20p'+'ropagate\x20f'+'urther,\x20as'+'\x20in\x20case\x20o'+'f\x20bloom\x20/\x20'+'DOF\x20blurs\x20'+'they\x0a//\x20pr'+'opagate\x20to'+'\x20large\x20are'+'as.\x20I\x20didn'+'\x27t\x20find\x20th'+'e\x20actual\x20r'+'eason\x20wher'+'e\x20those\x20co'+'me\x20from,\x20s'+'o\x20that\x20is\x20'+'still\x20TODO'+'.\x0a//\x20Note\x20'+'that\x20only\x20'+'disk/spher'+'e\x20lights\x20a'+'re\x20causing'+'\x20it,\x20so\x20on'+'ly\x20handle\x20'+'those.\x0afn\x20'+'FixNan(val'+'ue:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20v'+'alue\x20!=\x20va'+'lue\x20check\x20'+'for\x20NaN\x20as'+'\x20isnan()\x20i'+'s\x20not\x20avai'+'lable\x20in\x20W'+'GSL\x0a\x20\x20\x20\x20re'+'turn\x20selec'+'t(value,\x200'+'.0,\x20value\x20'+'!=\x20value);'+'\x0a}\x0a\x0afn\x20get'+'RectLightD'+'iffuse(wor'+'ldNormal:\x20'+'vec3f,\x20vie'+'wDir:\x20vec3'+'f,\x20lightDi'+'r:\x20vec3f,\x20'+'lightDirNo'+'rm:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20id'+'entityMat\x20'+'=\x20mat3x3f('+'vec3f(1.0,'+'\x200.0,\x200.0)'+',\x20vec3f(0.'+'0,\x201.0,\x200.'+'0),\x20vec3f('+'0.0,\x200.0,\x20'+'1.0));\x0a\x20\x20\x20'+'\x20return\x20LT'+'C_Evaluate'+'Rect(\x20worl'+'dNormal,\x20v'+'iewDir,\x20vP'+'ositionW,\x20'+'identityMa'+'t,\x20dLTCCoo'+'rds\x20);\x0a}\x0a\x0a'+'fn\x20getDisk'+'LightDiffu'+'se(worldNo'+'rmal:\x20vec3')+('f,\x20viewDir'+':\x20vec3f,\x20l'+'ightDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20identi'+'tyMat\x20=\x20ma'+'t3x3f(vec3'+'f(1.0,\x200.0'+',\x200.0),\x20ve'+'c3f(0.0,\x201'+'.0,\x200.0),\x20'+'vec3f(0.0,'+'\x200.0,\x201.0)'+');\x0a\x20\x20\x20\x20ret'+'urn\x20FixNan'+'(LTC_Evalu'+'ateDisk(\x20w'+'orldNormal'+',\x20viewDir,'+'\x20vPosition'+'W,\x20identit'+'yMat,\x20dLTC'+'Coords\x20));'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tDiffuse(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20let\x20fall'+'off:\x20f32\x20='+'\x20dSphereRa'+'dius\x20/\x20(do'+'t(lightDir'+',\x20lightDir'+')\x20+\x20dSpher'+'eRadius);\x0a'+'\x20\x20\x20\x20return'+'\x20FixNan(ge'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNorm)\x20'+'*\x20falloff)'+';\x0a}\x0a\x0afn\x20ge'+'tLTCLightI'+'nvMat(uv:\x20'+'vec2f)\x20->\x20'+'mat3x3f\x20{\x0a'+'\x20\x20\x20\x20let\x20t1'+':\x20vec4f\x20=\x20'+'textureSam'+'pleLevel(a'+'reaLightsL'+'utTex1,\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er,\x20uv,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(\x20'+'t1.x,\x200.0,'+'\x20t1.y\x20),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(\x200.0,\x201'+'.0,\x200.0\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(\x20t1.z'+',\x200.0,\x20t1.'+'w\x20)\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight')+('InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getRectLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20cal'+'cDiskLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getDiskLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcDiskLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tSpecular('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'DiskLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir,\x20'+'dLTCUV);\x0a}'+'\x0a'),UD='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_me'+'talness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getMe'+'talness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'metalness:'+'\x20f32\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20metal'+'ness\x20=\x20met'+'alness\x20*\x20u'+'niform.mat'+'erial_meta'+'lness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'metalness\x20'+'=\x20metalnes'+'s\x20*\x20textur'+'eSampleBia'+'s({STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+',\x20{STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_METALN'+'ESS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_METALNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_VE'+'RTEX\x0a\x20\x20\x20\x20m'+'etalness\x20='+'\x20metalness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'METALNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dMetal'+'ness\x20=\x20met'+'alness;\x0a}\x0a',BD='\x0avar\x20textu'+'re_msdfMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20texture'+'_msdfMapSa'+'mpler:\x20sam'+'pler;\x0a\x0afn\x20'+'median(r:\x20'+'f32,\x20g:\x20f3'+'2,\x20b:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(min(r'+',\x20g),\x20min('+'max(r,\x20g),'+'\x20b));\x0a}\x0a\x0af'+'n\x20map(min:'+'\x20f32,\x20max:'+'\x20f32,\x20v:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(v\x20-\x20m'+'in)\x20/\x20(max'+'\x20-\x20min);\x0a}'+'\x0a\x0auniform\x20'+'font_sdfIn'+'tensity:\x20f'+'32;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20font_px'+'range:\x20f32'+';\x20\x20\x20\x20\x20\x20//\x20'+'the\x20number'+'\x20of\x20pixels'+'\x20between\x20i'+'nside\x20and\x20'+'outside\x20th'+'e\x20font\x20in\x20'+'SDF\x0aunifor'+'m\x20font_tex'+'tureWidth:'+'\x20f32;\x20//\x20t'+'he\x20width\x20o'+'f\x20the\x20text'+'ure\x20atlas\x0a'+'\x0a#ifndef\x20L'+'IT_MSDF_TE'+'XT_ATTRIBU'+'TE\x0a\x20\x20\x20\x20uni'+'form\x20outli'+'ne_color:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'utline_thi'+'ckness:\x20f3'+'2;\x0a\x20\x20\x20\x20uni'+'form\x20shado'+'w_color:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'uniform\x20sh'+'adow_offse'+'t:\x20vec2f;\x0a'+'#else\x0a\x20\x20\x20\x20'+'varying\x20ou'+'tline_colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20outline_'+'thickness:'+'\x20f32;\x0a\x20\x20\x20\x20'+'varying\x20sh'+'adow_color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20varying'+'\x20shadow_of'+'fset:\x20vec2'+'f;\x0a#endif\x0a'+'\x0afn\x20applyM'+'sdf(color_'+'in:\x20vec4f)'+'\x20->\x20vec4f\x20'+'{\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_M'+'SDF_TEXT_A'+'TTRIBUTE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20uniform.'+'outline_co'+'lor;\x0a\x20\x20\x20\x20\x20'+('\x20\x20\x20var\x20out'+'line_thick'+'nessValue\x20'+'=\x20uniform.'+'outline_th'+'ickness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_co'+'lorValue\x20='+'\x20uniform.s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_offsetVa'+'lue\x20=\x20unif'+'orm.shadow'+'_offset;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utline_thi'+'cknessValu'+'e\x20=\x20outlin'+'e_thicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_colorVal'+'ue\x20=\x20shado'+'w_color;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_of'+'fsetValue\x20'+'=\x20shadow_o'+'ffset;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20Conv'+'ert\x20to\x20lin'+'ear\x20space\x20'+'before\x20pro'+'cessing\x0a\x20\x20'+'\x20\x20//\x20TODO:'+'\x20ideally\x20t'+'his\x20would\x20'+'receive\x20th'+'e\x20color\x20in'+'\x20linear\x20sp'+'ace,\x20but\x20t'+'hat\x20would\x20'+'require\x20la'+'rger\x20chang'+'es\x0a\x20\x20\x20\x20//\x20'+'on\x20the\x20eng'+'ine\x20side,\x20'+'with\x20the\x20w'+'ay\x20premult'+'iplied\x20alp'+'ha\x20is\x20hand'+'led\x20as\x20wel'+'l.\x0a\x20\x20\x20\x20var'+'\x20color\x20=\x20v'+'ec4f(gamma'+'CorrectInp'+'utVec3(col'+'or_in.rgb)'+',\x20color_in'+'.a);\x0a\x0a\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20field\x0a'+'\x20\x20\x20\x20let\x20ts'+'ample:\x20vec'+'3f\x20=\x20textu'+'reSample(t'+'exture_msd'+'fMap,\x20text'+'ure_msdfMa'+'pSampler,\x20'+'vUv0).rgb;'+'\x0a\x20\x20\x20\x20let\x20u'+'vShdw:\x20vec'+'2f\x20=\x20vUv0\x20'+'-\x20shadow_o'+'ffsetValue'+';\x0a\x20\x20\x20\x20let\x20'+'ssample:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'(texture_m'+'sdfMap,\x20te'+'xture_msdf'+'MapSampler'+',\x20uvShdw).'+'rgb;\x0a\x0a\x20\x20\x20\x20'+'//\x20get\x20the'+'\x20signed\x20di'+'stance\x20val'+'ue\x0a\x20\x20\x20\x20let')+('\x20sigDist:\x20'+'f32\x20=\x20medi'+'an(tsample'+'.r,\x20tsampl'+'e.g,\x20tsamp'+'le.b);\x0a\x20\x20\x20'+'\x20var\x20sigDi'+'stShdw:\x20f3'+'2\x20=\x20median'+'(ssample.r'+',\x20ssample.'+'g,\x20ssample'+'.b);\x0a\x0a\x20\x20\x20\x20'+'//\x20smoothi'+'ng\x20limit\x20-'+'\x20smaller\x20v'+'alue\x20makes'+'\x20for\x20sharp'+'er\x20but\x20mor'+'e\x20aliased\x20'+'text,\x20espe'+'cially\x20on\x20'+'angles\x0a\x20\x20\x20'+'\x20//\x20too\x20la'+'rge\x20value\x20'+'(0.5)\x20crea'+'tes\x20a\x20dark'+'\x20glow\x20arou'+'nd\x20the\x20let'+'ters\x0a\x20\x20\x20\x20l'+'et\x20smoothi'+'ngMax:\x20f32'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20let'+'\x20w:\x20vec2f\x20'+'=\x20abs(dpdx'+'(vUv0))\x20+\x20'+'abs(dpdy(v'+'Uv0));\x0a\x20\x20\x20'+'\x20let\x20smoot'+'hing:\x20f32\x20'+'=\x20clamp(w.'+'x\x20*\x20unifor'+'m.font_tex'+'tureWidth\x20'+'/\x20uniform.'+'font_pxran'+'ge,\x200.0,\x20s'+'moothingMa'+'x);\x0a\x0a\x20\x20\x20\x20l'+'et\x20mapMin:'+'\x20f32\x20=\x200.0'+'5;\x0a\x20\x20\x20\x20let'+'\x20mapMax:\x20f'+'32\x20=\x20clamp'+'(1.0\x20-\x20uni'+'form.font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20let\x20si'+'gDistInner'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist);\x0a\x20\x20'+'\x20\x20let\x20sigD'+'istOutline'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist\x20+\x20ou'+'tline_thic'+'knessValue'+');\x0a\x20\x20\x20\x20sig'+'DistShdw\x20='+'\x20map(mapMi'+'n,\x20mapMax,'+'\x20sigDistSh'+'dw\x20+\x20outli'+'ne_thickne'+'ssValue);\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'enter:\x20f32'+'\x20=\x200.5;\x0a\x20\x20'+'\x20\x20//\x20calcu'+'late\x20smoot'+'hing\x20and\x20u'+'se\x20to\x20gene')+('rate\x20opaci'+'ty\x0a\x20\x20\x20\x20let'+'\x20inside:\x20f'+'32\x20=\x20smoot'+'hstep(cent'+'er\x20-\x20smoot'+'hing,\x20cent'+'er\x20+\x20smoot'+'hing,\x20sigD'+'istInner);'+'\x0a\x20\x20\x20\x20let\x20o'+'utline:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stOutline)'+';\x0a\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20let\x20tc'+'olor_outli'+'ne:\x20vec4f\x20'+'=\x20outline\x20'+'*\x20vec4f(ou'+'tline_colo'+'rValue.a\x20*'+'\x20outline_c'+'olorValue.'+'rgb,\x20outli'+'ne_colorVa'+'lue.a);\x0a\x20\x20'+'\x20\x20var\x20tcol'+'or:\x20vec4f\x20'+'=\x20select(v'+'ec4f(0.0),'+'\x20tcolor_ou'+'tline,\x20out'+'line\x20>\x20ins'+'ide);\x0a\x20\x20\x20\x20'+'tcolor\x20=\x20m'+'ix(tcolor,'+'\x20color,\x20in'+'side);\x0a\x0a\x20\x20'+'\x20\x20let\x20scol'+'or_shadow:'+'\x20vec4f\x20=\x20s'+'hadow\x20*\x20ve'+'c4f(shadow'+'_colorValu'+'e.a\x20*\x20shad'+'ow_colorVa'+'lue.rgb,\x20s'+'hadow_colo'+'rValue.a);'+'\x0a\x20\x20\x20\x20let\x20s'+'color:\x20vec'+'4f\x20=\x20selec'+'t(tcolor,\x20'+'scolor_sha'+'dow,\x20shado'+'w\x20>\x20outlin'+'e);\x0a\x20\x20\x20\x20tc'+'olor\x20=\x20mix'+'(scolor,\x20t'+'color,\x20out'+'line);\x0a\x0a\x20\x20'+'\x20\x20//\x20Conve'+'rt\x20back\x20to'+'\x20gamma\x20spa'+'ce\x20before\x20'+'returning\x0a'+'\x20\x20\x20\x20tcolor'+'\x20=\x20vec4f(g'+'ammaCorrec'+'tOutput(tc'+'olor.rgb),'+'\x20tcolor.a)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20tcolor'+';\x0a}\x0a'),zD='\x0a\x0afn\x20getSp'+'ecularModu'+'late(specu'+'larity:\x20ve'+'c3f,\x20albed'+'o:\x20vec3f,\x20'+'metalness:'+'\x20f32,\x20f0:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20dielec'+'tricF0:\x20ve'+'c3f\x20=\x20f0\x20*'+'\x20speculari'+'ty;\x0a\x20\x20\x20\x20re'+'turn\x20mix(d'+'ielectricF'+'0,\x20albedo,'+'\x20metalness'+');\x0a}\x0a\x0afn\x20g'+'etAlbedoMo'+'dulate(alb'+'edo:\x20vec3f'+',\x20metalnes'+'s:\x20f32)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'albedo\x20*\x20('+'1.0\x20-\x20meta'+'lness);\x0a}\x0a',VD='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var\x20morph'+'Texture:\x20t'+'exture_2d_'+'array<f32>'+';\x0a\x20\x20\x20\x20unif'+'orm\x20morphF'+'actor:\x20arr'+'ay<f32,\x20{M'+'ORPH_TEXTU'+'RE_MAX_COU'+'NT}>;\x0a\x20\x20\x20\x20'+'uniform\x20mo'+'rphIndex:\x20'+'array<u32,'+'\x20{MORPH_TE'+'XTURE_MAX_'+'COUNT}>;\x0a\x20'+'\x20\x20\x20uniform'+'\x20count:\x20u3'+'2;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x0a\x20\x20'+'\x20\x20fn\x20fragm'+'entMain(in'+'put\x20:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20color\x20='+'\x20vec3f(0,\x20'+'0,\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20t'+'extureDims'+'\x20=\x20texture'+'Dimensions'+'(morphText'+'ure);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20pi'+'xelCoords\x20'+'=\x20vec2i(in'+'put.uv0\x20*\x20'+'vec2f(text'+'ureDims));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'u32\x20=\x200;\x20i'+'\x20<\x20uniform'+'.count;\x20i\x20'+'=\x20i\x20+\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'tureIndex:'+'\x20u32\x20=\x20uni'+'form.morph'+'Index[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20delta\x20'+'=\x20textureL'+'oad(morphT'+'exture,\x20pi'+'xelCoords,'+'\x20textureIn'+'dex,\x200).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20+=\x20unifor'+'m.morphFac'+'tor[i].ele'+'ment\x20*\x20del'+'ta;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'color,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',GD='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',HD='\x0aattribute'+'\x20vertex_ou'+'tlineParam'+'eters:\x20vec'+'3f;\x0aattrib'+'ute\x20vertex'+'_shadowPar'+'ameters:\x20v'+'ec3f;\x0a\x0avar'+'ying\x20outli'+'ne_color:\x20'+'vec4f;\x0avar'+'ying\x20outli'+'ne_thickne'+'ss:\x20f32;\x0av'+'arying\x20sha'+'dow_color:'+'\x20vec4f;\x0ava'+'rying\x20shad'+'ow_offset:'+'\x20vec2f;\x0a\x0av'+'ar<private'+'>\x20dOutline'+'Color:\x20vec'+'4f;\x0avar<pr'+'ivate>\x20dOu'+'tlineThick'+'ness:\x20f32;'+'\x0avar<priva'+'te>\x20dShado'+'wColor:\x20ve'+'c4f;\x0avar<p'+'rivate>\x20dS'+'hadowOffse'+'t:\x20vec2f;\x0a'+'\x0afn\x20unpack'+'MsdfParams'+'()\x20{\x0a\x20\x20\x20\x20l'+'et\x20little:'+'\x20vec3f\x20=\x20v'+'ertex_outl'+'ineParamet'+'ers\x20%\x20vec3'+'f(256.0);\x0a'+'\x20\x20\x20\x20let\x20bi'+'g:\x20vec3f\x20='+'\x20(vertex_o'+'utlinePara'+'meters\x20-\x20l'+'ittle)\x20/\x202'+'56.0;\x0a\x0a\x20\x20\x20'+'\x20dOutlineC'+'olor\x20=\x20vec'+'4f(little.'+'x,\x20big.x,\x20'+'little.y,\x20'+'big.y)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20//\x20_outli'+'neThicknes'+'sScale\x20==='+'\x200.2\x0a\x20\x20\x20\x20d'+'OutlineThi'+'ckness\x20=\x20l'+'ittle.z\x20/\x20'+'255.0\x20*\x200.'+'2;\x0a\x0a\x20\x20\x20\x20le'+'t\x20little_s'+'hadow\x20=\x20ve'+'rtex_shado'+'wParameter'+'s\x20%\x20vec3f('+'256.0);\x0a\x20\x20'+'\x20\x20let\x20big_'+'shadow\x20=\x20('+'vertex_sha'+'dowParamet'+'ers\x20-\x20litt'+'le_shadow)'+'\x20/\x20256.0;\x0a'+'\x0a\x20\x20\x20\x20dShad'+'owColor\x20=\x20'+'vec4f(litt'+'le_shadow.'+'x,\x20big_sha'+'dow.x,\x20lit'+'tle_shadow'+'.y,\x20big_sh'+'adow.y)\x20/\x20'+'255.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+('ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20dShad'+'owOffset\x20='+'\x20(vec2f(li'+'ttle_shado'+'w.z,\x20big_s'+'hadow.z)\x20/'+'\x20127.0\x20-\x201'+'.0)\x20*\x200.00'+'5;\x0a}\x0a'),WD='\x0avar<priva'+'te>\x20dNorma'+'lMatrix:\x20m'+'at3x3f;\x0a\x0af'+'n\x20getNorma'+'l()\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20d'+'NormalMatr'+'ix\x20=\x20getNo'+'rmalMatrix'+'(dModelMat'+'rix);\x0a\x20\x20\x20\x20'+'let\x20localN'+'ormal:\x20vec'+'3f\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}',$D='\x0a\x0aattribut'+'e\x20vertex_n'+'ormal:\x20vec'+'3f;\x0a\x0aunifo'+'rm\x20matrix_'+'normal:\x20ma'+'t3x3f;\x0a\x0a#i'+'fdef\x20MORPH'+'ING_NORMAL'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MORPHING'+'_INT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20mor'+'phNormalTe'+'x:\x20texture'+'_2d<u32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphNor'+'malTexSamp'+'ler:\x20sampl'+'er;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hNormalTex'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20morphNorm'+'alTexSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0afn\x20getLo'+'calNormal('+'vertexNorm'+'al:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20localNorm'+'al:\x20vec3f\x20'+'=\x20vertexNo'+'rmal;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_NOR'+'MAL\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20mor'+'phUV:\x20vec2'+'i\x20=\x20getTex'+'tureMorphC'+'oords();\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_INT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20morphN'+'ormalInt:\x20'+'vec4u\x20=\x20te'+'xtureLoad('+'morphNorma'+'lTex,\x20morp'+'hUV,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20morph'+'NormalF:\x20v'+'ec3f\x20=\x20vec'+'3f(morphNo'+'rmalInt.xy'+'z)\x20/\x2065535'+'.0\x20*\x202.0\x20-'+'\x201.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormalF;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'morphNorma'+'l:\x20vec3f\x20='+'\x20textureLo'+'ad(morphNo'+'rmalTex,\x20m'+'orphUV,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormal;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20lo'+'calNormal;'+'\x0a}\x0a\x0a#if\x20de'+'fined(SKIN'+')\x20||\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20fn\x20get'+('NormalMatr'+'ix(modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ma'+'t3x3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20mat3x3f'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20fn'+'\x20getNormal'+'Matrix(mod'+'elMatrix:\x20'+'mat4x4f)\x20-'+'>\x20mat3x3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20mat'+'3x3f(model'+'Matrix[0].'+'xyz,\x20model'+'Matrix[1].'+'xyz,\x20model'+'Matrix[2].'+'xyz);\x0a\x20\x20\x20\x20'+'}\x0a#else\x0a\x20\x20'+'\x20\x20fn\x20getNo'+'rmalMatrix'+'(modelMatr'+'ix:\x20mat4x4'+'f)\x20->\x20mat3'+'x3f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_norm'+'al;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),XD='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_bu'+'mpiness:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20un'+'iform\x20mate'+'rial_norma'+'lDetailMap'+'Bumpiness:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20//\x20https:'+'//blog.sel'+'fshadow.co'+'m/publicat'+'ions/blend'+'ing-in-det'+'ail/#detai'+'l-oriented'+'\x0a\x20\x20\x20\x20fn\x20bl'+'endNormals'+'(inN1:\x20vec'+'3f,\x20inN2:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'n1:\x20vec3f\x20'+'=\x20inN1\x20+\x20v'+'ec3f(0.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20n2:\x20vec'+'3f\x20=\x20inN2\x20'+'*\x20vec3f(-1'+'.0,\x20-1.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20n1\x20*\x20dot('+'n1,\x20n2)\x20/\x20'+'n1.z\x20-\x20n2;'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0afn\x20ge'+'tNormal()\x20'+'{\x0a#ifdef\x20S'+'TD_NORMAL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20var\x20norm'+'alMap:\x20vec'+'3f\x20=\x20{STD_'+'NORMAL_TEX'+'TURE_DECOD'+'E}(texture'+'SampleBias'+'({STD_NORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_NORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_NOR'+'MAL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias));\x0a'+'\x20\x20\x20\x20normal'+'Map\x20=\x20mix('+'vec3f(0.0,'+'\x200.0,\x201.0)'+',\x20normalMa'+'p,\x20uniform'+'.material_'+'bumpiness)'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_NO'+'RMALDETAIL'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20normalDet'+'ailMap:\x20ve'+'c3f\x20=\x20{STD'+'_NORMALDET'+'AIL_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE_NAME},'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_NAM'+'E}Sampler,'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_UV}'+(',\x20uniform.'+'textureBia'+'s));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalD'+'etailMap\x20='+'\x20mix(vec3f'+'(0.0,\x200.0,'+'\x201.0),\x20nor'+'malDetailM'+'ap,\x20unifor'+'m.material'+'_normalDet'+'ailMapBump'+'iness);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20norm'+'alMap\x20=\x20bl'+'endNormals'+'(normalMap'+',\x20normalDe'+'tailMap);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20nor'+'malize(dTB'+'N\x20*\x20normal'+'Map);\x0a#els'+'e\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a'),qD='\x0auniform\x20m'+'aterial_op'+'acity:\x20f32'+';\x0a\x0afn\x20getO'+'pacity()\x20{'+'\x0a\x20\x20\x20\x20dAlph'+'a\x20=\x20unifor'+'m.material'+'_opacity;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E\x0a\x20\x20\x20\x20dAlp'+'ha\x20=\x20dAlph'+'a\x20*\x20textur'+'eSampleBia'+'s({STD_OPA'+'CITY_TEXTU'+'RE_NAME},\x20'+'{STD_OPACI'+'TY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'OPACITY_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20=\x20dA'+'lpha\x20*\x20cla'+'mp(vVertex'+'Color.{STD'+'_OPACITY_V'+'ERTEX_CHAN'+'NEL},\x200.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',jD='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20blueNo'+'iseJitter:'+'\x20vec4f;\x0a\x0a#'+'if\x20STD_OPA'+'CITY_DITHE'+'R\x20==\x20BLUEN'+'OISE\x0a\x20\x20\x20\x20v'+'ar\x20blueNoi'+'seTex32\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20blueN'+'oiseTex32S'+'ampler\x20:\x20s'+'ampler;\x0a#e'+'ndif\x0a\x0afn\x20o'+'pacityDith'+'er(alpha:\x20'+'f32,\x20id:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'#if\x20STD_OP'+'ACITY_DITH'+'ER\x20==\x20BAYE'+'R8\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20nois'+'e:\x20f32\x20=\x20b'+'ayer8(floo'+'r((pcPosit'+'ion.xy\x20+\x20u'+'niform.blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+')\x20%\x20vec2f('+'8.0)))\x20/\x206'+'4.0;\x0a\x0a\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20=='+'\x20BLUENOISE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uv\x20'+'=\x20fract(pc'+'Position.x'+'y\x20/\x2032.0\x20+'+'\x20uniform.b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20noise:\x20f3'+'2\x20=\x20textur'+'eSampleLev'+'el(blueNoi'+'seTex32,\x20b'+'lueNoiseTe'+'x32Sampler'+',\x20uv,\x200.0)'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20IGNNOI'+'SE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ba'+'sed\x20on\x20htt'+'ps://www.i'+'ryoku.com/'+'next-gener'+'ation-post'+'-processin'+'g-in-call-'+'of-duty-ad'+'vanced-war'+'fare/\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20magic\x20=\x20'+'vec3f(0.06'+'711056,\x200.'+'00583715,\x20'+'52.9829189'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'oise:\x20f32\x20'+'=\x20fract(ma'+'gic.z\x20*\x20fr'+'act(dot(pc'+'Position.x'+'y\x20+\x20unifor'+'m.blueNois'+'eJitter.xy'+'\x20+\x20id,\x20mag'+('ic.xy)));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20conve'+'rt\x20the\x20noi'+'se\x20to\x20line'+'ar\x20space,\x20'+'as\x20that\x20is'+'\x20specified'+'\x20in\x20sRGB\x20s'+'pace\x20(stor'+'es\x20percept'+'ual\x20values'+')\x0a\x20\x20\x20\x20nois'+'e\x20=\x20pow(no'+'ise,\x202.2);'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'alpha\x20<\x20no'+'ise)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),YD='\x0a',KD='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(outp'+'ut.color.r'+'gb,\x20litArg'+'s_opacity)'+';\x0a\x0a#elif\x20L'+'IT_BLEND_T'+'YPE\x20==\x20PRE'+'MULTIPLIED'+'\x0a\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(out'+'put.color.'+'rgb\x20*\x20litA'+'rgs_opacit'+'y,\x20litArgs'+'_opacity);'+'\x0a\x0a#else\x0a\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(output'+'.color.rgb'+',\x201.0);\x0a\x0a#'+'endif\x0a',ZD='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0avar\x20sour'+'ce:\x20textur'+'e_2d<f32>;'+'\x0avar\x20sourc'+'eSampler:\x20'+'sampler;\x0a\x0a'+'@fragment\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'textureSam'+'ple(source'+',\x20sourceSa'+'mpler,\x20inp'+'ut.vUv0);\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'+'\x0a',QD='\x0a\x0auniform\x20'+'material_s'+'heen:\x20vec3'+'f;\x0a\x0afn\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20var\x20sh'+'eenColor\x20='+'\x20uniform.m'+'aterial_sh'+'een;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_TEX'+'TURE\x0a\x20\x20\x20\x20s'+'heenColor\x20'+'=\x20sheenCol'+'or\x20*\x20{STD_'+'SHEEN_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SHEEN'+'_TEXTURE_N'+'AME},\x20{STD'+'_SHEEN_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEEN_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as)).{STD_'+'SHEEN_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_VER'+'TEX\x0a\x20\x20\x20\x20sh'+'eenColor\x20='+'\x20sheenColo'+'r\x20*\x20satura'+'te3(vVerte'+'xColor.{ST'+'D_SHEEN_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20sSpecula'+'rity\x20=\x20she'+'enColor;\x0a}'+'\x0a',JD='\x0auniform\x20m'+'aterial_sh'+'eenGloss:\x20'+'f32;\x0a\x0afn\x20g'+'etSheenGlo'+'ssiness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'sheenGloss'+'iness\x20=\x20un'+'iform.mate'+'rial_sheen'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SHEENGL'+'OSS_TEXTUR'+'E\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_SHEEN'+'GLOSS_TEXT'+'URE_NAME},'+'\x20{STD_SHEE'+'NGLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_UV},\x20un'+'iform.text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20=\x20'+'sheenGloss'+'iness\x20*\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'GLOSS_VERT'+'EX_CHANNEL'+'});\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEENGLOS'+'S_INVERT\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20='+'\x201.0\x20-\x20she'+'enGlossine'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'sGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'+\x200.000000'+'1;\x0a}\x0a',eI='\x0auniform\x20m'+'aterial_he'+'ightMapFac'+'tor:\x20f32;\x0a'+'\x0afn\x20getPar'+'allax()\x20{\x0a'+'\x20\x20\x20\x20var\x20pa'+'rallaxScal'+'e\x20=\x20unifor'+'m.material'+'_heightMap'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20var\x20hei'+'ght:\x20f32\x20='+'\x20textureSa'+'mpleBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_HEIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_HEIGHT_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'height\x20=\x20h'+'eight\x20*\x20pa'+'rallaxScal'+'e\x20-\x20parall'+'axScale\x20*\x20'+'0.5;\x0a\x20\x20\x20\x20v'+'ar\x20viewDir'+'T:\x20vec3f\x20='+'\x20dViewDirW'+'\x20*\x20dTBN;\x0a\x0a'+'\x20\x20\x20\x20viewDi'+'rT.z\x20=\x20vie'+'wDirT.z\x20+\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',tI='\x0auniform\x20m'+'eshInstanc'+'eId:\x20u32;\x0a'+'\x0afn\x20getPic'+'kOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20let\x20i'+'nv:\x20vec4f\x20'+'=\x20vec4f(1.'+'0\x20/\x20255.0)'+';\x0a\x20\x20\x20\x20let\x20'+'shifts:\x20ve'+'c4u\x20=\x20vec4'+'u(16u,\x208u,'+'\x200u,\x2024u);'+'\x0a\x20\x20\x20\x20let\x20c'+'ol:\x20vec4u\x20'+'=\x20(vec4u(u'+'niform.mes'+'hInstanceI'+'d)\x20>>\x20shif'+'ts)\x20&\x20vec4'+'u(0xffu);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4f(col'+')\x20*\x20inv;\x0a}',sI='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20dReflDi'+'rW\x20=\x20norma'+'lize(-refl'+'ect(viewDi'+'r,\x20worldNo'+'rmal));\x0a}\x0a',iI='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20rou'+'ghness:\x20f3'+'2\x20=\x20sqrt(1'+'.0\x20-\x20min(g'+'loss,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20directio'+'n:\x20vec2f\x20='+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20anisotrop'+'y:\x20f32\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cDirection'+':\x20vec3f\x20=\x20'+'anisotropi'+'cB;\x0a\x20\x20\x20\x20le'+'t\x20anisotro'+'picTangent'+':\x20vec3f\x20=\x20'+'cross(anis'+'otropicDir'+'ection,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20let\x20anis'+'otropicNor'+'mal:\x20vec3f'+'\x20=\x20cross(a'+'nisotropic'+'Tangent,\x20a'+'nisotropic'+'Direction)'+';\x0a\x20\x20\x20\x20let\x20'+'bendFactor'+':\x20f32\x20=\x201.'+'0\x20-\x20anisot'+'ropy\x20*\x20(1.'+'0\x20-\x20roughn'+'ess);\x0a\x20\x20\x20\x20'+'let\x20bendFa'+'ctor4:\x20f32'+'\x20=\x20bendFac'+'tor\x20*\x20bend'+'Factor\x20*\x20b'+'endFactor\x20'+'*\x20bendFact'+'or;\x0a\x20\x20\x20\x20le'+'t\x20bentNorm'+'al:\x20vec3f\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}',rI='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0afn\x20addRe'+'flectionCC'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20ccRef'+'lection\x20=\x20'+'ccReflecti'+'on\x20+\x20calcR'+'eflection('+'reflDir,\x20g'+'loss);\x0a}\x0a#'+'endif\x0a',aI='\x0avar\x20textu'+'re_cubeMap'+':\x20texture_'+'cube<f32>;'+'\x0avar\x20textu'+'re_cubeMap'+'Sampler:\x20s'+'ampler;\x0aun'+'iform\x20mate'+'rial_refle'+'ctivity:\x20f'+'32;\x0a\x0afn\x20ca'+'lcReflecti'+'on(reflDir'+':\x20vec3f,\x20g'+'loss:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'lookupVec:'+'\x20vec3f\x20=\x20c'+'ubeMapProj'+'ect(reflDi'+'r);\x0a\x20\x20\x20\x20lo'+'okupVec.x\x20'+'=\x20lookupVe'+'c.x\x20*\x20-1.0'+';\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_cubeMa'+'p,\x20texture'+'_cubeMapSa'+'mpler,\x20loo'+'kupVec));\x0a'+'}\x0a\x0afn\x20addR'+'eflection('+'reflDir:\x20v'+'ec3f,\x20glos'+'s:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20dR'+'eflection\x20'+'+\x20vec4f(ca'+'lcReflecti'+'on(reflDir'+',\x20gloss),\x20'+'uniform.ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',nI='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20var\x20t'+'exture_env'+'Atlas:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'envAtlasSa'+'mpler:\x20sam'+'pler;\x0a#end'+'if\x0a\x0avar\x20te'+'xture_cube'+'Map:\x20textu'+'re_cube<f3'+'2>;\x0avar\x20te'+'xture_cube'+'MapSampler'+':\x20sampler;'+'\x0auniform\x20m'+'aterial_re'+'flectivity'+':\x20f32;\x0a\x0afn'+'\x20calcRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20dir:\x20ve'+'c3f\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20toSph'+'ericalUv(d'+'ir);\x0a\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20roughne'+'ss\x20level\x0a\x20'+'\x20\x20\x20let\x20lev'+'el:\x20f32\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20let\x20ile'+'vel:\x20f32\x20='+'\x20floor(lev'+'el);\x0a\x20\x20\x20\x20l'+'et\x20flevel:'+'\x20f32\x20=\x20lev'+'el\x20-\x20ileve'+'l;\x0a\x0a\x20\x20\x20\x20le'+'t\x20sharp:\x20v'+'ec3f\x20=\x20{re'+'flectionCu'+'bemapDecod'+'e}(texture'+'Sample(tex'+'ture_cubeM'+'ap,\x20textur'+'e_cubeMapS'+'ampler,\x20di'+'r));\x0a\x20\x20\x20\x20l'+'et\x20roughA:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+')));\x0a\x20\x20\x20\x20l'+'et\x20roughB:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(shar'+'p,\x20mix(rou'+('ghA,\x20rough'+'B,\x20flevel)'+',\x20min(leve'+'l,\x201.0)));'+'\x0a}\x0a\x0afn\x20add'+'Reflection'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20dRefl'+'ection\x20=\x20d'+'Reflection'+'\x20+\x20vec4f(c'+'alcReflect'+'ion(reflDi'+'r,\x20gloss),'+'\x20uniform.m'+'aterial_re'+'flectivity'+');\x0a}\x0a'),oI='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_envA'+'tlasSample'+'r:\x20sampler'+';\x0a#endif\x0au'+'niform\x20mat'+'erial_refl'+'ectivity:\x20'+'f32;\x0a\x0a//\x20c'+'alculate\x20m'+'ip\x20level\x20f'+'or\x20shiny\x20r'+'eflection\x20'+'given\x20equi'+'rect\x20coord'+'s\x20uv.\x0afn\x20s'+'hinyMipLev'+'el(uv:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20dx:\x20vec2f'+'\x20=\x20dpdx(uv'+');\x0a\x20\x20\x20\x20let'+'\x20dy:\x20vec2f'+'\x20=\x20dpdy(uv'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20second\x20dF'+'\x20at\x20180\x20de'+'grees\x0a\x20\x20\x20\x20'+'let\x20uv2:\x20v'+'ec2f\x20=\x20vec'+'2f(fract(u'+'v.x\x20+\x200.5)'+',\x20uv.y);\x0a\x20'+'\x20\x20\x20let\x20dx2'+':\x20vec2f\x20=\x20'+'dpdx(uv2);'+'\x0a\x20\x20\x20\x20let\x20d'+'y2:\x20vec2f\x20'+'=\x20dpdy(uv2'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20min\x20of\x20bo'+'th\x20sets\x20of'+'\x20dF\x20to\x20han'+'dle\x20discon'+'tinuity\x20at'+'\x20the\x20azim\x20'+'edge\x0a\x20\x20\x20\x20l'+'et\x20maxd:\x20f'+'32\x20=\x20min(m'+'ax(dot(dx,'+'\x20dx),\x20dot('+'dy,\x20dy)),\x20'+'max(dot(dx'+'2,\x20dx2),\x20d'+'ot(dy2,\x20dy'+'2)));\x0a\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(0.5\x20*\x20'+'log2(maxd)'+'\x20-\x201.0\x20+\x20u'+'niform.tex'+'tureBias,\x20'+'0.0,\x205.0);'+'\x0a}\x0a\x0afn\x20cal'+'cReflectio'+'n(reflDir:'+'\x20vec3f,\x20gl'+'oss:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20d'+'ir:\x20vec3f\x20'+'=\x20cubeMapP'+'roject(ref'+'lDir)\x20*\x20ve'+'c3f(-1.0,\x20'+'1.0,\x201.0);'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20toSpheric'+'alUv(dir);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20r'+'oughness\x20l'+'evel\x0a\x20\x20\x20\x20l'+'et\x20level:\x20'+'f32\x20=\x20satu'+'rate(1.0\x20-'+'\x20gloss)\x20*\x20'+'5.0;\x0a\x20\x20\x20\x20l'+('et\x20ilevel:'+'\x20f32\x20=\x20flo'+'or(level);'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ccessing\x20t'+'he\x20shiny\x20('+'top\x20level)'+'\x20reflectio'+'n\x20-\x20perfor'+'m\x20manual\x20m'+'ipmap\x20look'+'up\x0a\x20\x20\x20\x20let'+'\x20level2:\x20f'+'32\x20=\x20shiny'+'MipLevel(u'+'v\x20*\x20atlasS'+'ize);\x0a\x20\x20\x20\x20'+'let\x20ilevel'+'2:\x20f32\x20=\x20f'+'loor(level'+'2);\x0a\x0a\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20uv1:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20weight:'+'\x20f32;\x0a\x20\x20\x20\x20'+'if\x20(ilevel'+'\x20==\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'1\x20=\x20mapShi'+'nyUv(uv,\x20i'+'level2\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20weight\x20'+'=\x20level2\x20-'+'\x20ilevel2;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20access'+'ing\x20rough\x20'+'reflection'+'\x20-\x20just\x20sa'+'mple\x20the\x20s'+'ame\x20part\x20t'+'wice\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv0\x20=\x20m'+'apRoughnes'+'sUv(uv,\x20il'+'evel);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv1\x20='+'\x20uv0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x200.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20linearA'+':\x20vec3f\x20=\x20'+'{reflectio'+'nDecode}(t'+'extureSamp'+'le(texture'+'_envAtlas,'+'\x20texture_e'+'nvAtlasSam'+'pler,\x20uv0)'+');\x0a\x20\x20\x20\x20let'+'\x20linearB:\x20'+'vec3f\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'tureSample'+'(texture_e'+'nvAtlas,\x20t'+'exture_env'+'AtlasSampl'+'er,\x20uv1));'+'\x0a\x20\x20\x20\x20let\x20l'+'inear0:\x20ve'+'c3f\x20=\x20mix('+'linearA,\x20l'+'inearB,\x20we'+'ight);\x0a\x20\x20\x20'+'\x20let\x20linea'+'r1:\x20vec3f\x20'+'=\x20{reflect'+'ionDecode}'+'(textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r')+('eturn\x20proc'+'essEnviron'+'ment(mix(l'+'inear0,\x20li'+'near1,\x20lev'+'el\x20-\x20ileve'+'l));\x0a}\x0a\x0afn'+'\x20addReflec'+'tion(reflD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20d'+'Reflection'+'\x20=\x20dReflec'+'tion\x20+\x20vec'+'4f(calcRef'+'lection(re'+'flDir,\x20glo'+'ss),\x20unifo'+'rm.materia'+'l_reflecti'+'vity);\x0a}\x0a'),lI='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a#en'+'dif\x0a\x0avar\x20t'+'exture_sph'+'ereMap:\x20te'+'xture_2d<f'+'32>;\x0avar\x20t'+'exture_sph'+'ereMapSamp'+'ler:\x20sampl'+'er;\x0aunifor'+'m\x20material'+'_reflectiv'+'ity:\x20f32;\x0a'+'\x0afn\x20calcRe'+'flection(r'+'eflDir:\x20ve'+'c3f,\x20gloss'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20view'+'RotationMa'+'trix\x20=\x20mat'+'3x3f(unifo'+'rm.matrix_'+'view[0].xy'+'z,\x20uniform'+'.matrix_vi'+'ew[1].xyz,'+'\x20uniform.m'+'atrix_view'+'[2].xyz);\x0a'+'\x20\x20\x20\x20let\x20re'+'flDirV:\x20ve'+'c3f\x20=\x20view'+'RotationMa'+'trix\x20*\x20ref'+'lDir;\x0a\x0a\x20\x20\x20'+'\x20let\x20m:\x20f3'+'2\x20=\x202.0\x20*\x20'+'sqrt(dot(r'+'eflDirV.xy'+',\x20reflDirV'+'.xy)\x20+\x20(re'+'flDirV.z\x20+'+'\x201.0)\x20*\x20(r'+'eflDirV.z\x20'+'+\x201.0));\x0a\x20'+'\x20\x20\x20let\x20sph'+'ereMapUv:\x20'+'vec2f\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_sphere'+'Map,\x20textu'+'re_sphereM'+'apSampler,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0af'+'n\x20addRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20dRefle'+'ction\x20+\x20ve'+'c4f(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20unif'+'orm.materi'+'al_reflect'+'ivity);\x0a}\x0a',cI='\x0a\x0afn\x20addRe'+'flectionSh'+'een(worldN'+'ormal:\x20vec'+'3f,\x20viewDi'+'r:\x20vec3f,\x20'+'gloss:\x20f32'+')\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20dot(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20let\x20al'+'phaG:\x20f32\x20'+'=\x20gloss\x20*\x20'+'gloss;\x0a\x0a\x20\x20'+'\x20\x20//\x20Avoid'+'\x20using\x20a\x20L'+'UT\x20and\x20app'+'roximate\x20t'+'he\x20values\x20'+'analytical'+'ly\x0a\x20\x20\x20\x20let'+'\x20a:\x20f32\x20=\x20'+'select(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20-339.2\x20*'+'\x20alphaG\x20+\x20'+'161.4\x20*\x20gl'+'oss\x20-\x2025.9'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gloss\x20<\x200.'+'25\x0a\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20let\x20b:'+'\x20f32\x20=\x20sel'+'ect(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.97\x20*\x20'+'alphaG\x20-\x203'+'.27\x20*\x20glos'+'s\x20+\x200.72,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x2044'+'.0\x20*\x20alpha'+'G\x20-\x2023.7\x20*'+'\x20gloss\x20+\x203'+'.26,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss\x20<'+'\x200.25\x0a\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20let'+'\x20dg_add:\x20f'+'32\x20=\x20selec'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.1\x20*\x20(\x20g'+'loss\x20-\x200.2'+'5\x20),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x200.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s\x20<\x200.25\x0a\x20'+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'let\x20dg:\x20f3'+'2\x20=\x20exp(\x20a'+'\x20*\x20NoV\x20+\x20b'+'\x20)\x20+\x20dg_ad'+'d;\x0a\x20\x20\x20\x20sRe'+'flection\x20='+'\x20sReflecti'+'on\x20+\x20(calc'+'Reflection'+'(worldNorm'+'al,\x200.0)\x20*'+'\x20saturate('+'dg));\x0a}',hI='\x0afn\x20refrac'+'t2(viewVec'+':\x20vec3f,\x20n'+'ormal:\x20vec'+'3f,\x20IOR:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20vn:\x20f32'+'\x20=\x20dot(vie'+'wVec,\x20norm'+'al);\x0a\x20\x20\x20\x20l'+'et\x20k:\x20f32\x20'+'=\x201.0\x20-\x20IO'+'R\x20*\x20IOR\x20*\x20'+'(1.0\x20-\x20vn\x20'+'*\x20vn);\x0a\x20\x20\x20'+'\x20let\x20refrV'+'ec:\x20vec3f\x20'+'=\x20IOR\x20*\x20vi'+'ewVec\x20-\x20(I'+'OR\x20*\x20vn\x20+\x20'+'sqrt(k))\x20*'+'\x20normal;\x0a\x20'+'\x20\x20\x20return\x20'+'refrVec;\x0a}'+'\x0a\x0afn\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20vi'+'ewDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20th'+'ickness:\x20f'+'32,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20al'+'bedo:\x20vec3'+'f,\x0a\x20\x20\x20\x20tra'+'nsmission:'+'\x20f32,\x0a\x20\x20\x20\x20'+'refraction'+'Index:\x20f32'+',\x0a\x20\x20\x20\x20disp'+'ersion:\x20f3'+'2\x0a#if\x20defi'+'ned(LIT_IR'+'IDESCENCE)'+'\x0a\x20\x20\x20\x20,\x20iri'+'descenceFr'+'esnel:\x20vec'+'3f,\x0a\x20\x20\x20\x20ir'+'idescenceI'+'ntensity:\x20'+'f32\x0a#endif'+'\x0a)\x20{\x0a\x20\x20\x20\x20/'+'/\x20use\x20same'+'\x20reflectio'+'n\x20code\x20wit'+'h\x20refracti'+'on\x20vector\x0a'+'\x20\x20\x20\x20let\x20tm'+'pRefl:\x20vec'+'4f\x20=\x20dRefl'+'ection;\x0a\x20\x20'+'\x20\x20let\x20refl'+'ectionDir:'+'\x20vec3f\x20=\x20r'+'efract2(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndex);\x0a\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(0.0);\x0a\x20'+'\x20\x20\x20addRefl'+'ection(ref'+'lectionDir'+',\x20gloss);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'mix(dDiffu'+'seLight,\x20d'+'Reflection'+'.rgb\x20*\x20alb'+'edo,\x20trans'+'mission);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20tm'+'pRefl;\x0a}\x0a',dI='\x0auniform\x20m'+'aterial_in'+'vAttenuati'+'onDistance'+':\x20f32;\x0auni'+'form\x20mater'+'ial_attenu'+'ation:\x20vec'+'3f;\x0a\x0afn\x20ev'+'alRefracti'+'onColor(re'+'fractionVe'+'ctor:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20refra'+'ctionIndex'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20The\x20'+'refraction'+'\x20point\x20is\x20'+'the\x20entry\x20'+'point\x20+\x20ve'+'ctor\x20to\x20ex'+'it\x20point\x0a\x20'+'\x20\x20\x20let\x20poi'+'ntOfRefrac'+'tion:\x20vec4'+'f\x20=\x20vec4f('+'vPositionW'+'\x20+\x20refract'+'ionVector,'+'\x201.0);\x0a\x0a\x20\x20'+'\x20\x20//\x20Proje'+'ct\x20to\x20text'+'ure\x20space\x20'+'so\x20we\x20can\x20'+'sample\x20it\x0a'+'\x20\x20\x20\x20let\x20pr'+'ojectionPo'+'int:\x20vec4f'+'\x20=\x20uniform'+'.matrix_vi'+'ewProjecti'+'on\x20*\x20point'+'OfRefracti'+'on;\x0a\x0a\x20\x20\x20\x20/'+'/\x20use\x20buil'+'t-in\x20getGr'+'abScreenPo'+'s\x20function'+'\x20to\x20conver'+'t\x20screen\x20p'+'osition\x20to'+'\x20grab\x20text'+'ure\x20uv\x20coo'+'rds\x0a\x20\x20\x20\x20le'+'t\x20uv:\x20vec2'+'f\x20=\x20getGra'+'bScreenPos'+'(projectio'+'nPoint);\x0a\x0a'+'\x20\x20\x20\x20//\x20Use'+'\x20IOR\x20and\x20r'+'oughness\x20t'+'o\x20select\x20m'+'ip\x0a\x20\x20\x20\x20let'+'\x20iorToRoug'+'hness:\x20f32'+'\x20=\x20(1.0\x20-\x20'+'gloss)\x20*\x20c'+'lamp((1.0\x20'+'/\x20refracti'+'onIndex)\x20*'+'\x202.0\x20-\x202.0'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20let'+'\x20refractio'+'nLod:\x20f32\x20'+'=\x20log2(uni'+'form.uScre'+'enSize.x)\x20'+'*\x20iorToRou'+'ghness;\x0a\x20\x20'+'\x20\x20let\x20refr'+'action:\x20ve'+'c3f\x20=\x20text'+'ureSampleL'+'evel(uScen'+'eColorMap,'+'\x20uSceneCol'+'orMapSampl'+'er,\x20uv,\x20re'+'fractionLo'+'d).rgb;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'refraction'+';\x0a}\x0a\x0afn\x20ad'+'dRefractio'+'n(\x0a\x20\x20\x20\x20wor'+('ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20thickness'+':\x20f32,\x0a\x20\x20\x20'+'\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20albedo:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'transmissi'+'on:\x20f32,\x0a\x20'+'\x20\x20\x20refract'+'ionIndex:\x20'+'f32,\x0a\x20\x20\x20\x20d'+'ispersion:'+'\x20f32,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'iridescenc'+'eIntensity'+':\x20f32\x0a#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20Extra'+'ct\x20scale\x20f'+'rom\x20the\x20mo'+'del\x20transf'+'orm\x0a\x20\x20\x20\x20va'+'r\x20modelSca'+'le:\x20vec3f;'+'\x0a\x20\x20\x20\x20model'+'Scale.x\x20=\x20'+'length(uni'+'form.matri'+'x_model[0]'+'.xyz);\x0a\x20\x20\x20'+'\x20modelScal'+'e.y\x20=\x20leng'+'th(uniform'+'.matrix_mo'+'del[1].xyz'+');\x0a\x20\x20\x20\x20mod'+'elScale.z\x20'+'=\x20length(u'+'niform.mat'+'rix_model['+'2].xyz);\x0a\x0a'+'\x20\x20\x20\x20//\x20Cal'+'culate\x20the'+'\x20refractio'+'n\x20vector,\x20'+'scaled\x20by\x20'+'the\x20thickn'+'ess\x20and\x20sc'+'ale\x20of\x20the'+'\x20object\x0a\x20\x20'+'\x20\x20let\x20scal'+'e:\x20vec3f\x20='+'\x20thickness'+'\x20*\x20modelSc'+'ale;\x0a\x20\x20\x20\x20v'+'ar\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndex))'+'\x20*\x20scale;\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'x);\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20based\x20on'+'\x20the\x20dispe'+'rsion\x20mate'+'rial\x20prope'+'rty,\x20calcu'+'late\x20modif'+'ied\x20refrac'+'tion\x20index'+'\x20values\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20f'+'or\x20R\x20and\x20B'+'\x20channels\x20')+('and\x20evalua'+'te\x20the\x20ref'+'raction\x20co'+'lor\x20for\x20th'+'em.\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Spread:\x20f3'+'2\x20=\x20(1.0\x20/'+'\x20refractio'+'nIndex\x20-\x201'+'.0)\x20*\x200.02'+'5\x20*\x20disper'+'sion;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20r'+'efractionI'+'ndexR:\x20f32'+'\x20=\x20refract'+'ionIndex\x20-'+'\x20halfSprea'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20refractio'+'nVector\x20=\x20'+'normalize('+'refract(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndexR))\x20'+'*\x20scale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ref'+'raction.r\x20'+'=\x20evalRefr'+'actionColo'+'r(refracti'+'onVector,\x20'+'gloss,\x20ref'+'ractionInd'+'exR).r;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20refractio'+'nIndexB:\x20f'+'32\x20=\x20refra'+'ctionIndex'+'\x20+\x20halfSpr'+'ead;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndexB)'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efraction.'+'b\x20=\x20evalRe'+'fractionCo'+'lor(refrac'+'tionVector'+',\x20gloss,\x20r'+'efractionI'+'ndexB).b;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20T'+'ransmittan'+'ce\x20is\x20our\x20'+'final\x20refr'+'action\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20transmitt'+'ance:\x20vec3'+'f;\x0a\x20\x20\x20\x20if\x20'+'(uniform.m'+'aterial_in'+'vAttenuati'+'onDistance'+'\x20!=\x200.0)\x0a\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20att'+'enuation:\x20'+'vec3f\x20=\x20-l'+'og(uniform'+'.material_'+'attenuatio'+'n)\x20*\x20unifo'+'rm.materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans')+('mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20let\x20'+'fresnel:\x20v'+'ec3f\x20=\x20vec'+'3f(1.0)\x20-\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20world'+'Normal),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scenceInte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20mix(dDif'+'fuseLight,'+'\x20refractio'+'n\x20*\x20transm'+'ittance\x20*\x20'+'fresnel,\x20t'+'ransmissio'+'n);\x0a}\x0a'),fI='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0a#ifdef'+'\x20CUBEMAP_S'+'OURCE\x0a\x20\x20\x20\x20'+'var\x20source'+'Cube:\x20text'+'ure_cube<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20sourceC'+'ubeSampler'+'\x20:\x20sampler'+';\x0a#else\x0a\x20\x20'+'\x20\x20var\x20sour'+'ceTex:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sourceTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20//\x20sa'+'mples\x0a\x20\x20\x20\x20'+'var\x20sample'+'sTex:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20samplesTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20samplesT'+'exInverseS'+'ize:\x20vec2f'+';\x0a#endif\x0a\x0a'+'//\x20params:'+'\x0a//\x20x\x20-\x20ta'+'rget\x20cubem'+'ap\x20face\x200.'+'.6\x0a//\x20y\x20-\x20'+'target\x20ima'+'ge\x20total\x20p'+'ixels\x0a//\x20z'+'\x20-\x20source\x20'+'cubemap\x20si'+'ze\x0auniform'+'\x20params:\x20v'+'ec3f;\x0a\x0afn\x20'+'targetFace'+'()\x20->\x20f32\x20'+'{\x20return\x20u'+'niform.par'+'ams.x;\x20}\x0af'+'n\x20targetTo'+'talPixels('+')\x20->\x20f32\x20{'+'\x20return\x20un'+'iform.para'+'ms.y;\x20}\x0afn'+'\x20sourceTot'+'alPixels()'+'\x20->\x20f32\x20{\x20'+'return\x20uni'+'form.param'+'s.z;\x20}\x0a\x0aco'+'nst\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22enc'+'odePS\x22\x0a\x0a//'+'--\x20support'+'ed\x20project'+'ions\x0a\x0afn\x20m'+'odifySeams'+'(dir:\x20vec3'+'f,\x20scale:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20adir\x20='+'\x20abs(dir);'+'\x0a\x20\x20\x20\x20let\x20M'+'\x20=\x20max(max'+'(adir.x,\x20a'+'dir.y),\x20ad'+'ir.z);\x0a\x20\x20\x20'+'\x20return\x20di'+'r\x20/\x20M\x20*\x20ve'+'c3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20select('+('scale,\x201.0'+',\x20adir.x\x20='+'=\x20M),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20select'+'(scale,\x201.'+'0,\x20adir.y\x20'+'==\x20M),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20selec'+'t(scale,\x201'+'.0,\x20adir.z'+'\x20==\x20M)\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0afn\x20'+'toSpherica'+'l(dir:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20l'+'et\x20nonZero'+'XZ\x20=\x20any(d'+'ir.xz\x20!=\x20v'+'ec2f(0.0,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2f(select'+'(0.0,\x20atan'+'2(dir.x,\x20d'+'ir.z),\x20non'+'ZeroXZ),\x20a'+'sin(dir.y)'+');\x0a}\x0a\x0afn\x20f'+'romSpheric'+'al(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20vec3'+'f(cos(uv.y'+')\x20*\x20sin(uv'+'.x),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sin(uv.y)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'s(uv.y)\x20*\x20'+'cos(uv.x))'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Equirect(u'+'v:\x20vec2f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20fromSphe'+'rical((vec'+'2f(uv.x,\x201'+'.0\x20-\x20uv.y)'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20vec2'+'f(PI,\x20PI\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20octahe'+'dral\x20code,'+'\x20based\x20on\x20'+'https://jc'+'gt.org/pub'+'lished/000'+'3/02/01/\x0a/'+'/\x20\x22Survey\x20'+'of\x20Efficie'+'nt\x20Represe'+'ntations\x20f'+'or\x20Indepen'+'dent\x20Unit\x20'+'Vectors\x22\x20b'+'y\x20Cigolle,'+'\x20Donow,\x20Ev'+'angelakos,'+'\x20Mara,\x20McG'+'uire,\x20Meye'+'r\x0a\x0afn\x20sign'+'NotZero(k:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20sele'+'ct(-1.0,\x201'+'.0,\x20k\x20>=\x200'+'.0);\x0a}\x0a\x0afn'+'\x20signNotZe'+'roVec2(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec2f(signN'+'otZero(v.x'+'),\x20signNot'+'Zero(v.y))'+';\x0a}\x0a\x0a//\x20Re'+'turns\x20a\x20un'+'it\x20vector.'+'\x20Argument\x20'+'o\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20pack')+('ed\x20via\x20oct'+'Encode,\x20on'+'\x20the\x20[-1,\x20'+'+1]\x20square'+'\x0afn\x20octDec'+'ode(o:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20v\x20=\x20vec'+'3f(o.x,\x201.'+'0\x20-\x20abs(o.'+'x)\x20-\x20abs(o'+'.y),\x20o.y);'+'\x0a\x20\x20\x20\x20if\x20(v'+'.y\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20temp:\x20'+'vec2f\x20=\x20(1'+'.0\x20-\x20abs(v'+'.zx))\x20*\x20si'+'gnNotZeroV'+'ec2(v.xz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'\x20=\x20vec3f(t'+'emp.x,\x20v.y'+',\x20temp.y);'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20no'+'rmalize(v)'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Octahedral'+'(uv:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20octDec'+'ode(vec2f('+'uv.x,\x201.0\x20'+'-\x20uv.y)\x20*\x20'+'2.0\x20-\x201.0)'+';\x0a}\x0a\x0a//\x20As'+'sumes\x20that'+'\x20v\x20is\x20a\x20un'+'it\x20vector.'+'\x20The\x20resul'+'t\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20on\x20t'+'he\x20[-1,\x20+1'+']\x20square\x0af'+'n\x20octEncod'+'e(v:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20var\x20'+'result\x20=\x20v'+'.xz\x20*\x20(1.0'+'\x20/\x20l1norm)'+';\x0a\x20\x20\x20\x20if\x20('+'v.y\x20<\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'(1.0\x20-\x20abs'+'(result.yx'+'))\x20*\x20signN'+'otZeroVec2'+'(result.xy'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20return\x20'+'result;\x0a}\x0a'+'\x0a/////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'\x0a\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20fn'+'\x20sampleCub'+'emapDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'sourceCube'+',\x20sourceCu'+'beSampler,'+'\x20modifySea'+'ms(dir,\x201.'+'0));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleCubem'+'apSph(sph:')+('\x20vec2f)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20sample'+'CubemapDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leCubemapD'+'irLod(dir:'+'\x20vec3f,\x20mi'+'pLevel:\x20f3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leLevel(so'+'urceCube,\x20'+'sourceCube'+'Sampler,\x20m'+'odifySeams'+'(dir,\x201.0)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleCubemap'+'SphLod(sph'+':\x20vec2f,\x20m'+'ipLevel:\x20f'+'32)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'sampleCube'+'mapDirLod('+'fromSpheri'+'cal(sph),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a#el'+'se\x0a\x0a\x20\x20\x20\x20fn'+'\x20sampleEqu'+'irectSph(s'+'ph:\x20vec2f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv\x20=\x20s'+'ph\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'(sourceTex'+',\x20sourceTe'+'xSampler,\x20'+'vec2f(uv.x'+',\x201.0\x20-\x20uv'+'.y));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20fn\x20'+'sampleEqui'+'rectDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leEquirect'+'Sph(toSphe'+'rical(dir)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleEquirec'+'tSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20uv'+'\x20=\x20sph\x20/\x20v'+'ec2f(PI\x20*\x20'+'2.0,\x20PI)\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleLevel('+'sourceTex,'+'\x20sourceTex'+'Sampler,\x20v'+'ec2f(uv.x,'+'\x201.0\x20-\x20uv.'+'y),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleEquir'+'ectDirLod('+'dir:\x20vec3f'+',\x20mipLevel'+':\x20f32)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleE')+('quirectSph'+'Lod(toSphe'+'rical(dir)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleOctahed'+'ralDir(dir'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20=\x20oct'+'Encode(dir'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'textureSam'+'ple(source'+'Tex,\x20sourc'+'eTexSample'+'r,\x20vec2f(u'+'v.x,\x201.0\x20-'+'\x20uv.y));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20sampleO'+'ctahedralS'+'ph(sph:\x20ve'+'c2f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leOctahedr'+'alDirLod(d'+'ir:\x20vec3f,'+'\x20mipLevel:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'v\x20=\x20octEnc'+'ode(dir)\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'Level(sour'+'ceTex,\x20sou'+'rceTexSamp'+'ler,\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20sampl'+'eOctahedra'+'lSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'Lod(fromSp'+'herical(sp'+'h),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a\x0a'+'fn\x20getDire'+'ctionCubem'+'ap(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20st\x20=\x20uv'+'\x20*\x202.0\x20-\x201'+'.0;\x0a\x20\x20\x20\x20le'+'t\x20face\x20=\x20t'+'argetFace('+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20vec:\x20vec'+'3f;\x0a\x20\x20\x20\x20if'+'\x20(face\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(1,\x20'+'-st.y,\x20-st'+'.x);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3f(-1,\x20-'+'st.y,\x20st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x202.0)')+('\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3f(st.x,\x201'+',\x20st.y);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(face\x20='+'=\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'\x20=\x20vec3f(s'+'t.x,\x20-1,\x20-'+'st.y);\x0a\x20\x20\x20'+'\x20}\x20else\x20if'+'\x20(face\x20==\x20'+'4.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(st.'+'x,\x20-st.y,\x20'+'1);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(-st'+'.x,\x20-st.y,'+'\x20-1);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20normal'+'ize(modify'+'Seams(vec,'+'\x201.0));\x0a}\x0a'+'\x0afn\x20matrix'+'FromVector'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x201.0\x20'+'/\x20(1.0\x20+\x20n'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20-n.'+'x\x20*\x20n.y\x20*\x20'+'a;\x0a\x20\x20\x20\x20let'+'\x20b1\x20=\x20vec3'+'f(1.0\x20-\x20n.'+'x\x20*\x20n.x\x20*\x20'+'a,\x20b,\x20-n.x'+');\x0a\x20\x20\x20\x20let'+'\x20b2\x20=\x20vec3'+'f(b,\x201.0\x20-'+'\x20n.y\x20*\x20n.y'+'\x20*\x20a,\x20-n.y'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mat3x3'+'f(b1,\x20b2,\x20'+'n);\x0a}\x0a\x0afn\x20'+'matrixFrom'+'VectorSlow'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20up\x20=\x20sel'+'ect(vec3f('+'0.0,\x200.0,\x20'+'select(-1.'+'0,\x201.0,\x20n.'+'y\x20>\x200.0)),'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'),\x20abs(n.y'+')\x20>\x200.0000'+'001);\x0a\x20\x20\x20\x20'+'let\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20let'+'\x20y\x20=\x20cross'+'(n,\x20x);\x0a\x20\x20'+'\x20\x20return\x20m'+'at3x3f(x,\x20'+'y,\x20n);\x0a}\x0a\x0a'+'fn\x20reproje'+'ct(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20i'+'f\x20({NUM_SA'+'MPLES}\x20<=\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20sing'+'le\x20sample\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}({'+'DECODE_FUN'+'C}({SOURCE'+'_FUNC}Dir('+'{TARGET_FU'+'NC}(uv))))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mult'+'i\x20sample\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20t\x20=\x20{TARG')+('ET_FUNC}(u'+'v);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20tu\x20='+'\x20dpdx(t);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20tv\x20=\x20dpd'+'y(t);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'u\x20+=\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20for\x20(v'+'ar\x20v\x20=\x200.0'+';\x20v\x20<\x20{NUM'+'_SAMPLES_S'+'QRT};\x20v\x20+='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}Dir(norma'+'lize(t\x20+\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20t'+'u\x20*\x20(u\x20/\x20{'+'NUM_SAMPLE'+'S_SQRT}\x20-\x20'+'0.5)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tv\x20'+'*\x20(v\x20/\x20{NU'+'M_SAMPLES_'+'SQRT}\x20-\x200.'+'5))));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20{ENC'+'ODE_FUNC}('+'result\x20/\x20('+'{NUM_SAMPL'+'ES_SQRT}\x20*'+'\x20{NUM_SAMP'+'LES_SQRT})'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0aconst\x20un'+'packFloat:'+'\x20vec4f\x20=\x20v'+'ec4f(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20fn\x20un'+'packSample'+'(i:\x20i32,\x20L'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20mipLev'+'el:\x20ptr<fu'+'nction,\x20f3'+'2>)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20u\x20'+'=\x20(f32(i\x20*'+'\x204)\x20+\x200.5)'+'\x20*\x20uniform'+'.samplesTe'+'xInverseSi'+'ze.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20v\x20'+'=\x20(floor(u'+')\x20+\x200.5)\x20*'+'\x20uniform.s'+'amplesTexI'+'nverseSize'+'.y;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20raw'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.x\x20=\x20dot(t'+'extureSamp')+('le(samples'+'Tex,\x20sampl'+'esTexSampl'+'er,\x20vec2f('+'u,\x20v)),\x20un'+'packFloat)'+';\x20u\x20+=\x20uni'+'form.sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'textureSam'+'ple(sample'+'sTex,\x20samp'+'lesTexSamp'+'ler,\x20vec2f'+'(u,\x20v)),\x20u'+'npackFloat'+');\x20u\x20+=\x20un'+'iform.samp'+'lesTexInve'+'rseSize.x;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.z\x20=\x20dot'+'(textureSa'+'mple(sampl'+'esTex,\x20sam'+'plesTexSam'+'pler,\x20vec2'+'f(u,\x20v)),\x20'+'unpackFloa'+'t);\x20u\x20+=\x20u'+'niform.sam'+'plesTexInv'+'erseSize.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'raw.w\x20=\x20do'+'t(textureS'+'ample(samp'+'lesTex,\x20sa'+'mplesTexSa'+'mpler,\x20vec'+'2f(u,\x20v)),'+'\x20unpackFlo'+'at);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20*L\x20=\x20r'+'aw.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*m'+'ipLevel\x20=\x20'+'raw.w\x20*\x208.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20con'+'volve\x20an\x20e'+'nvironment'+'\x20given\x20pre'+'-generated'+'\x20samples\x0a\x20'+'\x20\x20\x20fn\x20pref'+'ilterSampl'+'es(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'truct\x20vect'+'or\x20space\x20g'+'iven\x20targe'+'t\x20directio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vecSpa'+'ce\x20=\x20matri'+'xFromVecto'+'rSlow({TAR'+'GET_FUNC}('+'uv));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20L'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20mipLevel:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(var\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20i\x20+=\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unpa'+'ckSample(i'+',\x20&L,\x20&mip'+'Level);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'result\x20+=\x20'+'{DECODE_FU')+('NC}({SOURC'+'E_FUNC}Dir'+'Lod(vecSpa'+'ce\x20*\x20L,\x20mi'+'pLevel))\x20*'+'\x20L.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20to'+'talWeight\x20'+'+=\x20L.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20{ENCOD'+'E_FUNC}(re'+'sult\x20/\x20tot'+'alWeight);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20unwei'+'ghted\x20vers'+'ion\x20of\x20pre'+'filterSamp'+'les\x0a\x20\x20\x20\x20fn'+'\x20prefilter'+'SamplesUnw'+'eighted(uv'+':\x20vec2f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20construct'+'\x20vector\x20sp'+'ace\x20given\x20'+'target\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20v'+'ecSpace\x20=\x20'+'matrixFrom'+'VectorSlow'+'({TARGET_F'+'UNC}(uv));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20L:\x20vec'+'3f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20mipL'+'evel:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20result'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(va'+'r\x20i\x20=\x200;\x20i'+'\x20<\x20{NUM_SA'+'MPLES};\x20i\x20'+'+=\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'unpackSamp'+'le(i,\x20&L,\x20'+'&mipLevel)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}DirLod(ve'+'cSpace\x20*\x20L'+',\x20mipLevel'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'{ENCODE_FU'+'NC}(result'+'\x20/\x20f32({NU'+'M_SAMPLES}'+'));\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20{P'+'ROCESS_FUN'+'C}(input.v'+'Uv0);\x0a\x20\x20\x20\x20'+'return\x20out'+'put;\x0a}\x0a'),uI='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0aunifo'+'rm\x20uvMod:\x20'+'vec4f;\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0a\x0a@'+'vertex\x0afn\x20'+'vertexMain'+'(input:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20var\x20outpu'+'t:\x20VertexO'+'utput;\x0a\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(input.v'+'ertex_posi'+'tion,\x200.5,'+'\x201.0);\x0a\x20\x20o'+'utput.vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(input.ver'+'tex_positi'+'on\x20*\x200.5\x20+'+'\x20vec2f(0.5'+',\x200.5))\x20*\x20'+'uniform.uv'+'Mod.xy\x20+\x20u'+'niform.uvM'+'od.zw);\x0a\x20\x20'+'return\x20out'+'put;\x0a}\x0a',pI='\x0a\x0avar\x20uSce'+'neDepthMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20uSceneD'+'epthMapSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifn'+'def\x20SCREEN'+'SIZE\x0a\x20\x20\x20\x20#'+'define\x20SCR'+'EENSIZE\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fndef\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20#define\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20unifor'+'m\x20matrix_v'+'iew:\x20mat4x'+'4f;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20CAM'+'ERAPLANES\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20CAME'+'RAPLANES\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20camer'+'a_params:\x20'+'vec4f;\x20//\x20'+'x:\x201\x20/\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20\x20y:\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20z:\x20came'+'ra_near,\x20\x20'+'\x20\x20\x20\x20\x20\x20w:\x20i'+'s_ortho\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20fn\x20lin'+'earizeDept'+'h(z:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uniform.c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x20//\x20Pe'+'rspective\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20('+'uniform.ca'+'mera_param'+'s.z\x20*\x20unif'+'orm.camera'+'_params.y)'+'\x20/\x20(unifor'+'m.camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.z\x20-'+'\x20uniform.c'+'amera_para'+'ms.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20unifor'+'m.camera_p'+'arams.z\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'+'\x0afn\x20deline'+'arizeDepth'+'(linearDep'+'th:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.camera'+'_params.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(unif'+'orm.camera'+('_params.y\x20'+'*\x20(uniform'+'.camera_pa'+'rams.z\x20-\x20l'+'inearDepth'+'))\x20/\x20(line'+'arDepth\x20*\x20'+'(uniform.c'+'amera_para'+'ms.z\x20-\x20uni'+'form.camer'+'a_params.y'+'));\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20(linearD'+'epth\x20-\x20uni'+'form.camer'+'a_params.z'+')\x20/\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20}\x0a}\x0a\x0a//\x20R'+'etrieves\x20r'+'endered\x20li'+'near\x20camer'+'a\x20depth\x20by'+'\x20UV\x0afn\x20get'+'LinearScre'+'enDepth(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_LINEAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SCEN'+'E_DEPTHMAP'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'uSceneDept'+'hMap,\x20uSce'+'neDepthMap'+'Sampler,\x20u'+'v).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20tex'+'tureSize\x20='+'\x20textureDi'+'mensions(u'+'SceneDepth'+'Map,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20texel'+':\x20vec2i\x20=\x20'+'vec2i(uv\x20*'+'\x20vec2f(tex'+'tureSize))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta:\x20vec4f\x20'+'=\x20textureL'+'oad(uScene'+'DepthMap,\x20'+'texel,\x200);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta_u32:\x20ve'+'c4u\x20=\x20vec4'+'u(data\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20intBits'+':\x20u32\x20=\x20(d'+'ata_u32.r\x20'+'<<\x2024u)\x20|\x20'+'(data_u32.'+'g\x20<<\x2016u)\x20'+'|\x20(data_u3'+'2.b\x20<<\x208u)'+'\x20|\x20data_u3'+'2.a;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20bitca'+'st<f32>(in'+'tBits);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pth(textur'+'eSample(uS'+'ceneDepthM')+('ap,\x20uScene'+'DepthMapSa'+'mpler,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20fn\x20get'+'LinearScre'+'enDepthFra'+'g()\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20pcP'+'osition.xy'+'\x20*\x20uniform'+'.uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afn\x20get'+'LinearDept'+'h(pos:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20-(unif'+'orm.matrix'+'_view\x20*\x20ve'+'c4f(pos,\x201'+'.0)).z;\x0a}\x0a'),mI='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x0afn'+'\x20getShadow'+'CascadeInd'+'ex(shadowC'+'ascadeDist'+'ances:\x20vec'+'4f,\x20shadow'+'CascadeCou'+'nt:\x20i32)\x20-'+'>\x20i32\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20dept'+'h\x20in\x200\x20..\x20'+'far\x20plane\x20'+'range\x0a\x20\x20\x20\x20'+'let\x20depth:'+'\x20f32\x20=\x201.0'+'\x20/\x20pcPosit'+'ion.w;\x0a\x0a\x20\x20'+'\x20\x20//\x201.0\x20i'+'f\x20depth\x20>='+'\x20distance,'+'\x200.0\x20other'+'wise\x0a\x20\x20\x20\x20l'+'et\x20compari'+'sons:\x20vec4'+'f\x20=\x20step(s'+'hadowCasca'+'deDistance'+'s,\x20vec4f(d'+'epth));\x0a\x0a\x20'+'\x20\x20\x20//\x20sum\x20'+'is\x20the\x20ind'+'ex\x0a\x20\x20\x20\x20let'+'\x20cascadeIn'+'dex:\x20i32\x20='+'\x20i32(dot(c'+'omparisons'+',\x20vec4f(1.'+'0)));\x0a\x0a\x20\x20\x20'+'\x20//\x20limit\x20'+'to\x20actual\x20'+'number\x20of\x20'+'used\x20casca'+'des\x0a\x20\x20\x20\x20re'+'turn\x20min(c'+'ascadeInde'+'x,\x20shadowC'+'ascadeCoun'+'t\x20-\x201);\x0a}\x0a'+'\x0a//\x20functi'+'on\x20which\x20m'+'odifies\x20ca'+'scade\x20inde'+'x\x20to\x20dithe'+'r\x20between\x20'+'cascades\x0af'+'n\x20ditherSh'+'adowCascad'+'eIndex(cas'+'cadeIndex_'+'in:\x20i32,\x20s'+'hadowCasca'+'deDistance'+'s:\x20vec4f,\x20'+'shadowCasc'+'adeCount:\x20'+'i32,\x20blend'+'Factor:\x20f3'+'2)\x20->\x20i32\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Use\x20var\x20as'+'\x20cascadeIn'+'dex\x20might\x20'+'be\x20modifie'+'d\x0a\x20\x20\x20\x20var\x20'+'cascadeInd'+'ex:\x20i32\x20=\x20'+'cascadeInd'+'ex_in;\x0a\x20\x20\x20'+'\x20if\x20(casca'+'deIndex\x20<\x20'+'shadowCasc'+'adeCount\x20-'+'\x201)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20cu'+'rrentRange'+'End:\x20f32\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+('\x20transitio'+'nStart:\x20f3'+'2\x20=\x20blendF'+'actor\x20*\x20cu'+'rrentRange'+'End;\x20//\x20St'+'art\x20overla'+'p\x20factor\x20a'+'way\x20from\x20t'+'he\x20end\x20dis'+'tance\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(depth\x20'+'>\x20transiti'+'onStart)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20a\x20tr'+'ansition\x20f'+'actor\x20(0.0'+'\x20to\x201.0)\x20w'+'ithin\x20the\x20'+'overlap\x20ra'+'nge\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'transition'+'Factor:\x20f3'+'2\x20=\x20smooth'+'step(trans'+'itionStart'+',\x20currentR'+'angeEnd,\x20d'+'epth);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Add\x20pse'+'udo-random'+'\x20dithering'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20TODO'+':\x20replace\x20'+'by\x20user\x20se'+'lectable\x20d'+'ithering\x20m'+'ethod\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20dither:\x20'+'f32\x20=\x20frac'+'t(sin(dot('+'pcPosition'+'.xy,\x20vec2f'+'(12.9898,\x20'+'78.233)))\x20'+'*\x2043758.54'+'53);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dither\x20<\x20'+'transition'+'Factor)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20casc'+'adeIndex\x20='+'\x20cascadeIn'+'dex\x20+\x201;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20cascadeIn'+'dex;\x0a}\x0a\x0afn'+'\x20fadeShado'+'w(shadowCo'+'ord_in:\x20ve'+'c3f,\x20shado'+'wCascadeDi'+'stances:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20//\x20if\x20the'+'\x20pixel\x20is\x20'+'past\x20the\x20s'+'hadow\x20dist'+'ance,\x20remo'+'ve\x20shadow\x0a'+'\x20\x20\x20\x20//\x20thi'+'s\x20enforces'+'\x20straight\x20'+'line\x20inste'+'ad\x20of\x20corn'+'er\x20of\x20shad'+'ow\x20which\x20m'+'oves\x20when\x20'+'camera\x20rot'+'ates\x0a\x20\x20\x20\x20v'+'ar\x20shadowC'+'oord:\x20vec3'+'f\x20=\x20shadow')+('Coord_in;\x0a'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x20\x20\x20\x20if\x20(d'+'epth\x20>\x20sha'+'dowCascade'+'Distances.'+'w)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20shadowC'+'oord.z\x20=\x20-'+'9999999.0;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'hadowCoord'+';\x0a}\x0a'),_I='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afn\x20linste'+'p(a:\x20f32,\x20'+'b:\x20f32,\x20v:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20/'+'/\x20WGSL\x20sat'+'urate\x20->\x20c'+'lamp\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p((v\x20-\x20a)\x20'+'/\x20(b\x20-\x20a),'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0afn\x20re'+'duceLightB'+'leeding(pM'+'ax:\x20f32,\x20a'+'mount:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'fn\x20chebysh'+'evUpperBou'+'nd(moments'+':\x20vec2f,\x20m'+'ean:\x20f32,\x20'+'minVarianc'+'e:\x20f32,\x20li'+'ghtBleedin'+'gReduction'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'//\x20Compute'+'\x20variance\x0a'+'\x20\x20\x20\x20var\x20va'+'riance:\x20f3'+'2\x20=\x20moment'+'s.y\x20-\x20(mom'+'ents.x\x20*\x20m'+'oments.x);'+'\x0a\x20\x20\x20\x20varia'+'nce\x20=\x20max('+'variance,\x20'+'minVarianc'+'e);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Compute\x20'+'probabilis'+'tic\x20upper\x20'+'bound\x0a\x20\x20\x20\x20'+'let\x20d:\x20f32'+'\x20=\x20mean\x20-\x20'+'moments.x;'+'\x0a\x20\x20\x20\x20var\x20p'+'Max:\x20f32\x20='+'\x20variance\x20'+'/\x20(varianc'+'e\x20+\x20(d\x20*\x20d'+'));\x0a\x0a\x20\x20\x20\x20p'+'Max\x20=\x20redu'+'ceLightBle'+'eding(pMax'+',\x20lightBle'+'edingReduc'+'tion);\x0a\x0a\x20\x20'+'\x20\x20//\x20One-t'+'ailed\x20Cheb'+'yshev\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(pMax,\x20'+'1.0,\x20mean\x20'+'<=\x20moments'+'.x);\x0a}\x0a\x0afn'+'\x20calculate'+'EVSM(momen'+'ts_in:\x20vec'+'3f,\x20Z_in:\x20'+'f32,\x20vsmBi'+'as:\x20f32,\x20e'+'xponent:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20Z:\x20f32\x20=\x20'+'2.0\x20*\x20Z_in'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20let\x20warp'+'edDepth:\x20f'+'32\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20l'+('et\x20moments'+':\x20vec2f\x20=\x20'+'moments_in'+'.xy\x20+\x20vec2'+'f(warpedDe'+'pth,\x20warpe'+'dDepth*war'+'pedDepth)\x20'+'*\x20(1.0\x20-\x20m'+'oments_in.'+'z);\x0a\x0a\x20\x20\x20\x20l'+'et\x20VSMBias'+':\x20f32\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20let\x20d'+'epthScale:'+'\x20f32\x20=\x20VSM'+'Bias\x20*\x20exp'+'onent\x20*\x20wa'+'rpedDepth;'+'\x0a\x20\x20\x20\x20let\x20m'+'inVariance'+'1:\x20f32\x20=\x20d'+'epthScale\x20'+'*\x20depthSca'+'le;\x0a\x20\x20\x20\x20re'+'turn\x20cheby'+'shevUpperB'+'ound(momen'+'ts,\x20warped'+'Depth,\x20min'+'Variance1,'+'\x200.1);\x0a}\x0a/'+'/\x20------\x20V'+'SM\x2016\x20----'+'--\x0a\x0afn\x20VSM'+'16(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords:\x20vec'+'2f,\x20resolu'+'tion:\x20f32,'+'\x20Z:\x20f32,\x20v'+'smBias:\x20f3'+'2,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20let\x20momen'+'ts:\x20vec3f\x20'+'=\x20textureS'+'ampleLevel'+'(tex,\x20texS'+'ampler,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'n\x20getShado'+'wVSM16(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20VS'+'M16(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord.xy,\x20s'+'hadowParam'+'s.x,\x20shado'+'wCoord.z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotVSM1'+'6(shadowMa'+'p:\x20texture'+'_2d<f32>,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler,\x20sha'+'dowCoord:\x20'+'vec3f,\x20sha')+('dowParams:'+'\x20vec4f,\x20ex'+'ponent:\x20f3'+'2,\x20lightDi'+'r:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20Z:\x20'+'f32\x20=\x20leng'+'th(lightDi'+'r)\x20*\x20shado'+'wParams.w\x20'+'+\x20shadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20return\x20V'+'SM16(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20Z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----'+'--\x0a\x0afn\x20VSM'+'32(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords_in:\x20'+'vec2f,\x20res'+'olution:\x20f'+'32,\x20Z:\x20f32'+',\x20vsmBias:'+'\x20f32,\x20expo'+'nent:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20CAPS_TEX'+'TURE_FLOAT'+'_FILTERABL'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20moment'+'s:\x20vec3f\x20='+'\x20textureSa'+'mpleLevel('+'tex,\x20texSa'+'mpler,\x20tex'+'Coords_in,'+'\x200.0).xyz;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20manual\x20b'+'ilinear\x20fi'+'ltering\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'pixelSize\x20'+':\x20f32\x20=\x201.'+'0\x20/\x20resolu'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20te'+'xCoords:\x20v'+'ec2f\x20=\x20tex'+'Coords_in\x20'+'-\x20vec2f(pi'+'xelSize);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20s00:\x20vec'+'3f\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20texCoords'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20s10:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20texCoor'+'ds\x20+\x20vec2f'+'(pixelSize'+',\x200.0),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'s01:\x20vec3f'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'exCoords\x20+'+'\x20vec2f(0.0'+',\x20pixelSiz'+'e),\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s11:')+('\x20vec3f\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20texCo'+'ords\x20+\x20vec'+'2f(pixelSi'+'ze),\x200.0).'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fr:'+'\x20vec2f\x20=\x20f'+'ract(texCo'+'ords\x20*\x20res'+'olution);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20h0:\x20vec3'+'f\x20=\x20mix(s0'+'0,\x20s10,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20h1:'+'\x20vec3f\x20=\x20m'+'ix(s01,\x20s1'+'1,\x20fr.x);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20moments:'+'\x20vec3f\x20=\x20m'+'ix(h0,\x20h1,'+'\x20fr.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20calculate'+'EVSM(momen'+'ts,\x20Z,\x20vsm'+'Bias,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owVSM32(sh'+'adowMap:\x20t'+'exture_2d<'+'f32>,\x20shad'+'owMapSampl'+'er:\x20sample'+'r,\x20shadowC'+'oord:\x20vec3'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20expone'+'nt:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20V'+'SM32(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afn\x20getSha'+'dowSpotVSM'+'32(shadowM'+'ap:\x20textur'+'e_2d<f32>,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20e'+'xponent:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20Z:'+'\x20f32\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20Z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a'),gI='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afn\x20getS'+'hadowPCF1x'+'1(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowCoo'+'rd.z);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotPCF1'+'x1(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20shad'+'owCoord.xy'+',\x20shadowCo'+'ord.z);\x0a}\x0a'+'\x0a//\x20-----\x20'+'Omni\x20Sampl'+'ing\x20-----\x0a'+'\x0a//\x20Not\x20su'+'pported\x20on'+'\x20WebGPU\x20de'+'vice\x0a//\x20fn'+'\x20getShadow'+'OmniPCF1x1'+'(shadowMap'+':\x20texture_'+'depth_cube'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f,'+'\x20lightDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a//\x20'+'\x20\x20\x20\x20let\x20sh'+'adowZ:\x20f32'+'\x20=\x20length('+'lightDir)\x20'+'*\x20shadowPa'+'rams.w\x20+\x20s'+'hadowParam'+'s.z;\x0a//\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20lightD'+'ir,\x20shadow'+'Z);\x0a//\x20}\x0a',SI='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0afn\x20_getS'+'hadowPCF3x'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20sum:\x20f3'+'2\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20let\x20uw'+'0:\x20f32\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20s);\x0a\x20\x20\x20\x20'+'let\x20uw1:\x20f'+'32\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20s)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20u0_offset'+':\x20f32\x20=\x20(2'+'.0\x20-\x20s)\x20/\x20'+'uw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20let\x20u'+'1_offset:\x20'+'f32\x20=\x20s\x20/\x20'+'uw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'vw0:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t);\x0a\x20\x20'+'\x20\x20let\x20vw1:'+'\x20f32\x20=\x20(1.'+'0\x20+\x202.0\x20*\x20'+'t);\x0a\x0a\x20\x20\x20\x20l'+'et\x20v0_offs'+'et:\x20f32\x20=\x20'+'(2.0\x20-\x20t)\x20'+'/\x20vw0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20let'+'\x20v1_offset'+':\x20f32\x20=\x20t\x20'+'/\x20vw1\x20+\x201.'+'0;\x0a\x0a\x20\x20\x20\x20le'+'t\x20u0:\x20f32\x20'+'=\x20u0_offse'+'t\x20*\x20shadow'+'MapSizeInv'+'\x20+\x20base_uv'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20v0:\x20f32\x20'+'=\x20v0_offse'+'t\x20*\x20shadow'+('MapSizeInv'+'\x20+\x20base_uv'+'.y;\x0a\x0a\x20\x20\x20\x20l'+'et\x20u1:\x20f32'+'\x20=\x20u1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20l'+'et\x20v1:\x20f32'+'\x20=\x20v1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'sum\x20=\x20sum\x20'+'+\x20uw0\x20*\x20vw'+'0\x20*\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20v'+'ec2f(u0,\x20v'+'0),\x20z);\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw1\x20*\x20'+'vw0\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u1,'+'\x20v0),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw0\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'0,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'1\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u1,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20*'+'\x20(1.0\x20/\x2016'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20sum;'+'\x0a}\x0a\x0afn\x20get'+'ShadowPCF3'+'x3(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wPCF3x3(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0afn\x20getSh'+'adowSpotPC'+'F3x3(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3(')+('shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams.xyz);'+'\x0a}\x0a\x0a//\x20---'+'--\x20Omni\x20Sa'+'mpling\x20---'+'--\x0a\x0a//\x20Not'+'\x20currently'+'\x20supported'+'\x20on\x20WebGPU'+'\x20device\x0a//'+'\x20fn\x20getSha'+'dowOmniPCF'+'3x3(shadow'+'Map:\x20textu'+'re_depth_c'+'ube,\x20shado'+'wMapSample'+'r:\x20sampler'+'_compariso'+'n,\x20shadowP'+'arams:\x20vec'+'4f,\x20dir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a//\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a//\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(dir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x0a//'+'\x20\x20\x20\x20\x20//\x20of'+'fset\x0a//\x20\x20\x20'+'\x20\x20let\x20texS'+'ize_i\x20=\x20te'+'xtureDimen'+'sions(shad'+'owMap,\x200);'+'\x0a//\x20\x20\x20\x20\x20le'+'t\x20z:\x20f32\x20='+'\x201.0\x20/\x20f32'+'(texSize_i'+'.x);\x0a//\x20\x20\x20'+'\x20\x20let\x20tc:\x20'+'vec3f\x20=\x20no'+'rmalize(di'+'r);\x0a\x0a//\x20\x20\x20'+'\x20\x20//\x20avera'+'ge\x204\x20sampl'+'es\x20-\x20not\x20a'+'\x20strict\x203x'+'3\x20PCF\x20but\x20'+'that\x27s\x20tri'+'cky\x20with\x20c'+'ubemaps\x0a//'+'\x20\x20\x20\x20\x20var\x20s'+'hadows:\x20ve'+'c4f;\x0a//\x20\x20\x20'+'\x20\x20shadows.'+'x\x20=\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20t'+'c\x20+\x20vec3f('+'\x20z,\x20\x20z,\x20\x20z'+'),\x20shadowZ'+');\x0a//\x20\x20\x20\x20\x20'+'shadows.y\x20'+'=\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20tc\x20'+'+\x20vec3f(-z'+',\x20-z,\x20\x20z),'+'\x20shadowZ);'+'\x0a//\x20\x20\x20\x20\x20sh'+'adows.z\x20=\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20tc\x20+\x20'+'vec3f(-z,\x20'+'\x20z,\x20-z),\x20s'+'hadowZ);\x0a/')+('/\x20\x20\x20\x20\x20shad'+'ows.w\x20=\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20tc\x20+\x20ve'+'c3f(\x20z,\x20-z'+',\x20-z),\x20sha'+'dowZ);\x0a\x0a//'+'\x20\x20\x20\x20\x20retur'+'n\x20dot(shad'+'ows,\x20vec4f'+'(0.25));\x0a/'+'/\x20}\x0a\x0a//\x20fn'+'\x20getShadow'+'OmniPCF3x3'+'_Wrapper(s'+'hadowMap:\x20'+'texture_de'+'pth_cube,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a//\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCF3x3(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowParams'+',\x20lightDir'+');\x0a//\x20}\x0a'),yI='\x0a//\x20http:/'+'/the-witne'+'ss.net/new'+'s/2013/09/'+'shadow-map'+'ping-summa'+'ry-part-1/'+'\x0afn\x20_getSh'+'adowPCF5x5'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20l'+'et\x20uw0:\x20f3'+'2\x20=\x20(4.0\x20-'+'\x203.0\x20*\x20s);'+'\x0a\x20\x20\x20\x20let\x20u'+'w1:\x20f32\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20l'+'et\x20uw2:\x20f3'+'2\x20=\x20(1.0\x20+'+'\x203.0\x20*\x20s);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'u0_offset:'+'\x20f32\x20=\x20(3.'+'0\x20-\x202.0\x20*\x20'+'s)\x20/\x20uw0\x20-'+'\x202.0;\x0a\x20\x20\x20\x20'+'let\x20u1_off'+'set:\x20f32\x20='+'\x20(3.0\x20+\x20s)'+'\x20/\x20uw1;\x0a\x20\x20'+'\x20\x20let\x20u2_o'+'ffset:\x20f32'+'\x20=\x20s\x20/\x20uw2'+'\x20+\x202.0;\x0a\x0a\x20'+'\x20\x20\x20let\x20vw0'+':\x20f32\x20=\x20(4'+'.0\x20-\x203.0\x20*'+'\x20t);\x0a\x20\x20\x20\x20l'+'et\x20vw1:\x20f3'+'2\x20=\x207.0;\x0a\x20'+'\x20\x20\x20let\x20vw2'+':\x20f32\x20=\x20(1'+'.0\x20+\x203.0\x20*'+'\x20t);\x0a\x0a\x20\x20\x20\x20'+'let\x20v0_off'+'set:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t)\x20/\x20v'+'w0\x20-\x202.0;\x0a'+'\x20\x20\x20\x20let\x20v1'+'_offset:\x20f'+'32\x20=\x20(3.0\x20'+('+\x20t)\x20/\x20vw1'+';\x0a\x20\x20\x20\x20let\x20'+'v2_offset:'+'\x20f32\x20=\x20t\x20/'+'\x20vw2\x20+\x202.0'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20sum:\x20f32\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20let\x20u0:\x20'+'f32\x20=\x20u0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.x;\x0a\x20\x20'+'\x20\x20let\x20v0:\x20'+'f32\x20=\x20v0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20u1:'+'\x20f32\x20=\x20u1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.x;\x0a\x20'+'\x20\x20\x20let\x20v1:'+'\x20f32\x20=\x20v1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20let\x20u2'+':\x20f32\x20=\x20u2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.x;\x0a'+'\x20\x20\x20\x20let\x20v2'+':\x20f32\x20=\x20v2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20sum\x20='+'\x20sum\x20+\x20uw0'+'\x20*\x20vw0\x20*\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20vec2f('+'u0,\x20v0),\x20z'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20sum\x20+\x20u'+'w1\x20*\x20vw0\x20*'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20vec2'+'f(u1,\x20v0),'+'\x20z);\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw2\x20*\x20vw0'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u2,\x20v0'+'),\x20z);\x0a\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw0\x20*\x20'+'vw1\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u0,'+'\x20v1),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'1,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'2\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare')+('Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u2,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw0\x20*\x20vw2'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u0,\x20v2'+'),\x20z);\x0a\x20\x20\x20'+'\x20sum\x20=\x20sum'+'\x20+\x20uw1\x20*\x20v'+'w2\x20*\x20textu'+'reSampleCo'+'mpareLevel'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'vec2f(u1,\x20'+'v2),\x20z);\x0a\x20'+'\x20\x20\x20sum\x20=\x20s'+'um\x20+\x20uw2\x20*'+'\x20vw2\x20*\x20tex'+'tureSample'+'CompareLev'+'el(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20vec2f(u2'+',\x20v2),\x20z);'+'\x0a\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20*\x20(1'+'.0\x20/\x20144.0'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20saturat'+'e(sum);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afn'+'\x20getShadow'+'PCF5x5(sha'+'dowMap:\x20te'+'xture_dept'+'h_2d,\x20shad'+'owMapSampl'+'er:\x20sample'+'r_comparis'+'on,\x20shadow'+'Coord:\x20vec'+'3f,\x20shadow'+'Params:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20_getS'+'hadowPCF5x'+'5(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params.xyz'+');\x0a}\x0a\x0afn\x20g'+'etShadowSp'+'otPCF5x5(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owCoord:\x20v'+'ec3f,\x20shad'+'owParams:\x20'+'vec4f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20_ge'+'tShadowPCF'+'5x5(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a'),vI='\x0a\x0afn\x20fract'+'SinRand(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20PI:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20a:\x20f32\x20'+'=\x2012.9898;'+'\x20let\x20b:\x20f3'+'2\x20=\x2078.233'+';\x20let\x20c:\x20f'+'32\x20=\x2043758'+'.5453;\x0a\x20\x20\x20'+'\x20let\x20dt:\x20f'+'32\x20=\x20dot(u'+'v.xy,\x20vec2'+'f(a,\x20b));\x0a'+'\x20\x20\x20\x20let\x20sn'+':\x20f32\x20=\x20dt'+'\x20%\x20PI;\x0a\x20\x20\x20'+'\x20return\x20fr'+'act(sin(sn'+')\x20*\x20c);\x0a}\x0a'+'\x0a//\x20struct'+'\x20to\x20hold\x20p'+'recomputed'+'\x20constants'+'\x20and\x20curre'+'nt\x20state\x0as'+'truct\x20Voge'+'lDiskData\x20'+'{\x0a\x20\x20\x20\x20invN'+'umSamples:'+'\x20f32,\x0a\x20\x20\x20\x20'+'initialAng'+'le:\x20f32,\x0a\x20'+'\x20\x20\x20current'+'PointId:\x20f'+'32,\x0a}\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'fn\x20prepare'+'DiskConsta'+'nts(data:\x20'+'ptr<functi'+'on,\x20VogelD'+'iskData>,\x20'+'sampleCoun'+'t:\x20i32,\x20ra'+'ndomSeed:\x20'+'f32)\x20{\x0a\x20\x20\x20'+'\x20let\x20pi2:\x20'+'f32\x20=\x206.28'+'318530718;'+'\x0a\x20\x20\x20\x20data.'+'invNumSamp'+'les\x20=\x201.0\x20'+'/\x20f32(samp'+'leCount);\x0a'+'\x20\x20\x20\x20data.i'+'nitialAngl'+'e\x20=\x20random'+'Seed\x20*\x20pi2'+';\x0a\x20\x20\x20\x20data'+'.currentPo'+'intId\x20=\x200.'+'0;\x0a}\x0a\x0a\x0afn\x20'+'generateDi'+'skSample(d'+'ata:\x20ptr<f'+'unction,\x20V'+'ogelDiskDa'+'ta>)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20GOLDEN'+'_ANGLE:\x20f3'+'2\x20=\x202.3999'+'63;\x0a\x20\x20\x20\x20le'+'t\x20r:\x20f32\x20='+'\x20sqrt((dat'+'a.currentP'+'ointId\x20+\x200'+'.5)\x20*\x20data'+'.invNumSam'+'ples);\x0a\x20\x20\x20'+'\x20let\x20theta'+':\x20f32\x20=\x20da'+'ta.current'+'PointId\x20*\x20'+'GOLDEN_ANG'+'LE\x20+\x20data.'+'initialAng'+('le;\x0a\x0a\x20\x20\x20\x20l'+'et\x20offset:'+'\x20vec2f\x20=\x20v'+'ec2f(cos(t'+'heta),\x20sin'+'(theta))\x20*'+'\x20pow(r,\x201.'+'33);\x0a\x0a\x20\x20\x20\x20'+'data.curre'+'ntPointId\x20'+'=\x20data.cur'+'rentPointI'+'d\x20+\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'offset;\x0a}\x0a'+'\x0afn\x20PCSSFi'+'ndBlocker('+'shadowMap:'+'\x20texture_2'+'d<f32>,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler,\x20avgBl'+'ockerDepth'+':\x20ptr<func'+'tion,\x20f32>'+',\x20numBlock'+'ers:\x20ptr<f'+'unction,\x20i'+'32>,\x0a\x20\x20\x20\x20s'+'hadowCoord'+'s:\x20vec2f,\x20'+'z:\x20f32,\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32,\x20penum'+'braSize:\x20f'+'32,\x20invSha'+'dowMapSize'+':\x20f32,\x20ran'+'domSeed:\x20f'+'32)\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20diskD'+'ata:\x20Vogel'+'DiskData;\x0a'+'\x20\x20\x20\x20prepar'+'eDiskConst'+'ants(&disk'+'Data,\x20shad'+'owBlockerS'+'amples,\x20ra'+'ndomSeed);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'searchWidt'+'h:\x20f32\x20=\x20p'+'enumbraSiz'+'e\x20*\x20invSha'+'dowMapSize'+';\x0a\x20\x20\x20\x20var\x20'+'blockerSum'+':\x20f32\x20=\x200.'+'0;\x0a\x20\x20\x20\x20var'+'\x20numBlocke'+'rs_local:\x20'+'i32\x20=\x200;\x0a\x0a'+'\x20\x20\x20\x20for(\x20v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20s'+'hadowBlock'+'erSamples;'+'\x20i\x20=\x20i\x20+\x201'+'\x20)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20dis'+'kUV:\x20vec2f'+'\x20=\x20generat'+'eDiskSampl'+'e(&diskDat'+'a);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20samp'+'leUV:\x20vec2'+'f\x20=\x20shadow'+'Coords\x20+\x20d'+'iskUV\x20*\x20se'+'archWidth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadowM'+'apDepth:\x20f'+'32\x20=\x20textu'+'reSampleLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20sampleU'+'V,\x200.0).r;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(\x20shadow'+'MapDepth\x20<'+'\x20z\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20b'+'lockerSum\x20')+('=\x20blockerS'+'um\x20+\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers_local'+'\x20=\x20numBloc'+'kers_local'+'\x20+\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20*avg'+'BlockerDep'+'th\x20=\x20block'+'erSum\x20/\x20f3'+'2(numBlock'+'ers_local)'+';\x0a\x20\x20\x20\x20*num'+'Blockers\x20='+'\x20numBlocke'+'rs_local;\x0a'+'}\x0a\x0afn\x20PCSS'+'Filter(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20uv:\x20vec2'+'f,\x20receive'+'rDepth:\x20f3'+'2,\x20shadowS'+'amples:\x20i3'+'2,\x20filterR'+'adius:\x20f32'+',\x20randomSe'+'ed:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20var\x20dis'+'kData:\x20Vog'+'elDiskData'+';\x0a\x20\x20\x20\x20prep'+'areDiskCon'+'stants(&di'+'skData,\x20sh'+'adowSample'+'s,\x20randomS'+'eed);\x0a\x0a\x20\x20\x20'+'\x20var\x20sum:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20for\x20('+'var\x20i:\x20i32'+'\x20=\x200;\x20i\x20<\x20'+'shadowSamp'+'les;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'offsetUV:\x20'+'vec2f\x20=\x20ge'+'nerateDisk'+'Sample(&di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dept'+'h:\x20f32\x20=\x20t'+'extureSamp'+'leLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv\x20'+'+\x20offsetUV'+',\x200.0).r;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20su'+'m\x20=\x20sum\x20+\x20'+'step(recei'+'verDepth,\x20'+'depth);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20sum\x20/'+'\x20f32(shado'+'wSamples);'+'\x0a}\x0a\x0afn\x20get'+'Penumbra(d'+'blocker:\x20f'+'32,\x20drecei'+'ver:\x20f32,\x20'+'penumbraSi'+'ze:\x20f32,\x20p'+'enumbraFal'+'loff:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20di'+'st:\x20f32\x20=\x20'+'dreceiver\x20'+'-\x20dblocker'+';\x0a\x20\x20\x20\x20let\x20'+'penumbra:\x20'+'f32\x20=\x201.0\x20'+'-\x20pow(1.0\x20'+'-\x20dist,\x20pe')+('numbraFall'+'off);\x0a\x20\x20\x20\x20'+'return\x20pen'+'umbra\x20*\x20pe'+'numbraSize'+';\x0a}\x0a\x0afn\x20PC'+'SSDirectio'+'nal(shadow'+'Map:\x20textu'+'re_2d<f32>'+',\x20shadowMa'+'pSampler:\x20'+'sampler,\x20s'+'hadowCoord'+'s:\x20vec3f,\x20'+'cameraPara'+'ms:\x20vec4f,'+'\x20softShado'+'wParams:\x20v'+'ec4f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'let\x20receiv'+'erDepth:\x20f'+'32\x20=\x20shado'+'wCoords.z;'+'\x0a\x20\x20\x20\x20let\x20r'+'andomSeed:'+'\x20f32\x20=\x20fra'+'ctSinRand('+'pcPosition'+'.xy);\x0a\x20\x20\x20\x20'+'let\x20shadow'+'Samples:\x20i'+'32\x20=\x20i32(s'+'oftShadowP'+'arams.x);\x0a'+'\x20\x20\x20\x20let\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32\x20=\x20i32('+'softShadow'+'Params.y);'+'\x0a\x20\x20\x20\x20let\x20p'+'enumbraSiz'+'e:\x20f32\x20=\x20s'+'oftShadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20let\x20pen'+'umbraFallo'+'ff:\x20f32\x20=\x20'+'softShadow'+'Params.w;\x0a'+'\x0a\x20\x20\x20\x20let\x20s'+'hadowMapSi'+'ze:\x20i32\x20=\x20'+'i32(textur'+'eDimension'+'s(shadowMa'+'p,\x200).x);\x0a'+'\x20\x20\x20\x20var\x20in'+'vShadowMap'+'Size:\x20f32\x20'+'=\x201.0\x20/\x20f3'+'2(shadowMa'+'pSize);\x0a\x20\x20'+'\x20\x20invShado'+'wMapSize\x20='+'\x20invShadow'+'MapSize\x20*\x20'+'(f32(shado'+'wMapSize)\x20'+'/\x202048.0);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'penumbra:\x20'+'f32;\x0a\x0a\x20\x20\x20\x20'+'//\x20contact'+'\x20hardening'+'\x20path\x0a\x20\x20\x20\x20'+'if\x20(shadow'+'BlockerSam'+'ples\x20>\x200)\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20find\x20a'+'verage\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20avgBloc'+'kerDepth:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20numBloc'+'kers:\x20i32\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20&a'+'vgBlockerD'+'epth,\x20&num')+('Blockers,\x20'+'shadowCoor'+'ds.xy,\x20rec'+'eiverDepth'+',\x20shadowBl'+'ockerSampl'+'es,\x20penumb'+'raSize,\x20in'+'vShadowMap'+'Size,\x20rand'+'omSeed);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20when\x20no\x20b'+'lockers\x20ar'+'e\x20present\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(numBlock'+'ers\x20<\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20pen'+'umbra\x20size'+'\x20is\x20based\x20'+'on\x20the\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20p'+'enumbra\x20=\x20'+'getPenumbr'+'a(avgBlock'+'erDepth,\x20s'+'hadowCoord'+'s.z,\x20penum'+'braSize,\x20p'+'enumbraFal'+'loff);\x0a\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20constan'+'t\x20filter\x20s'+'ize,\x20no\x20co'+'ntact\x20hard'+'ening\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20penumb'+'ra\x20=\x20penum'+'braSize;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20filter'+'Radius:\x20f3'+'2\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ords.xy,\x20r'+'eceiverDep'+'th,\x20shadow'+'Samples,\x20f'+'ilterRadiu'+'s,\x20randomS'+'eed);\x0a}\x0a\x0af'+'n\x20getShado'+'wPCSS(shad'+'owMap:\x20tex'+'ture_2d<f3'+'2>,\x20shadow'+'MapSampler'+':\x20sampler,'+'\x20shadowCoo'+'rd:\x20vec3f,'+'\x20shadowPar'+'ams:\x20vec4f'+',\x20cameraPa'+'rams:\x20vec4'+'f,\x20softSha'+'dowParams:'+'\x20vec4f,\x20li'+'ghtDir:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x20//\x20lig'+'htDir\x20unus'+'ed?\x20Kept\x20p'+'aram.\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SDirection'+'al(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ord,\x20camer'+'aParams,\x20s'+'oftShadowP')+'arams);\x0a}\x0a',xI='\x0aattribute'+'\x20vertex_bo'+'neIndices:'+'\x20f32;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20g'+'etBoneMatr'+'ix(indexFl'+'oat:\x20f32)\x20'+'->\x20mat4x4f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20width\x20=\x20'+'i32(textur'+'eDimension'+'s(texture_'+'poseMap).x'+');\x0a\x20\x20\x20\x20let'+'\x20index:\x20i3'+'2\x20=\x20i32(in'+'dexFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x20\x20\x20\x20let\x20i'+'y:\x20i32\x20=\x20i'+'ndex\x20/\x20wid'+'th;\x0a\x20\x20\x20\x20le'+'t\x20ix:\x20i32\x20'+'=\x20index\x20%\x20'+'width;\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'elements\x20o'+'f\x204x3\x20matr'+'ix\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec4f'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(ix'+'\x20+\x200,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20v2:\x20vec'+'4f\x20=\x20textu'+'reLoad(tex'+'ture_poseM'+'ap,\x20vec2i('+'ix\x20+\x201,\x20iy'+'),\x200);\x0a\x20\x20\x20'+'\x20let\x20v3:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(ix\x20+\x202,\x20'+'iy),\x200);\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4x4f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.x,\x20v2.x,'+'\x20v3.x,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.y,\x20v2.y,\x20'+'v3.y,\x200,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'z,\x20v2.z,\x20v'+'3.z,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.w'+',\x20v2.w,\x20v3'+'.w,\x201.0\x0a\x20\x20'+'\x20\x20);\x0a}\x0a',TI='\x0a\x0aattribut'+'e\x20vertex_b'+'oneWeights'+':\x20vec4f;\x0aa'+'ttribute\x20v'+'ertex_bone'+'Indices:\x20v'+'ec4f;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0astru'+'ct\x20BoneMat'+'rix\x20{\x0a\x20\x20\x20\x20'+'v1:\x20vec4f,'+'\x0a\x20\x20\x20\x20v2:\x20v'+'ec4f,\x0a\x20\x20\x20\x20'+'v3:\x20vec4f,'+'\x0a}\x0a\x0afn\x20get'+'BoneMatrix'+'(width:\x20i3'+'2,\x20index:\x20'+'i32)\x20->\x20Bo'+'neMatrix\x20{'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'v\x20=\x20index\x20'+'/\x20width;\x0a\x20'+'\x20\x20\x20let\x20u\x20='+'\x20index\x20%\x20w'+'idth;\x0a\x0a\x20\x20\x20'+'\x20var\x20resul'+'t:\x20BoneMat'+'rix;\x0a\x20\x20\x20\x20r'+'esult.v1\x20='+'\x20textureLo'+'ad(texture'+'_poseMap,\x20'+'vec2i(u\x20+\x20'+'0,\x20v),\x200);'+'\x0a\x20\x20\x20\x20resul'+'t.v2\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20result.v3'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(u\x20'+'+\x202,\x20v),\x200'+');\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0afn\x20ge'+'tSkinMatri'+'x(indicesF'+'loat:\x20vec4'+'f,\x20weights'+':\x20vec4f)\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20width\x20=\x20i'+'32(texture'+'Dimensions'+'(texture_p'+'oseMap).x)'+';\x0a\x20\x20\x20\x20var\x20'+'indices\x20=\x20'+'vec4i(indi'+'cesFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'boneA\x20=\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.x);'+'\x0a\x20\x20\x20\x20let\x20b'+'oneB\x20=\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y);\x0a'+'\x20\x20\x20\x20let\x20bo'+'neC\x20=\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.z);\x0a\x20'+'\x20\x20\x20let\x20bon'+'eD\x20=\x20getBo'+'neMatrix(w'+'idth,\x20indi'+'ces.w);\x0a\x0a\x20'+'\x20\x20\x20//\x20...\x20'+'rest\x20of\x20ge'+'tSkinMatri'+'x\x20remains\x20'+'the\x20same\x20.'+'..\x0a\x20\x20\x20\x20let'+'\x20v1\x20=\x20bone'+'A.v1\x20*\x20wei'+('ghts.x\x20+\x20b'+'oneB.v1\x20*\x20'+'weights.y\x20'+'+\x20boneC.v1'+'\x20*\x20weights'+'.z\x20+\x20boneD'+'.v1\x20*\x20weig'+'hts.w;\x0a\x20\x20\x20'+'\x20let\x20v2\x20=\x20'+'boneA.v2\x20*'+'\x20weights.x'+'\x20+\x20boneB.v'+'2\x20*\x20weight'+'s.y\x20+\x20bone'+'C.v2\x20*\x20wei'+'ghts.z\x20+\x20b'+'oneD.v2\x20*\x20'+'weights.w;'+'\x0a\x20\x20\x20\x20let\x20v'+'3\x20=\x20boneA.'+'v3\x20*\x20weigh'+'ts.x\x20+\x20bon'+'eB.v3\x20*\x20we'+'ights.y\x20+\x20'+'boneC.v3\x20*'+'\x20weights.z'+'\x20+\x20boneD.v'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'let\x20one\x20=\x20'+'dot(weight'+'s,\x20vec4f(1'+'.0,\x201.0,\x201'+'.0,\x201.0));'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'ranspose\x20t'+'o\x204x4\x20matr'+'ix\x0a\x20\x20\x20\x20ret'+'urn\x20mat4x4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20v1.x,\x20v2.'+'x,\x20v3.x,\x200'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'v1.y,\x20v2.y'+',\x20v3.y,\x200,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.z,\x20v2.z,'+'\x20v3.z,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.w,\x20v2.w,\x20'+'v3.w,\x20one\x0a'+'\x20\x20\x20\x20);\x0a}\x0a'),wI='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vLinear'+'Depth:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'floatAsUin'+'tPS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20Varyin'+'g\x20and\x20unif'+'orm\x20declar'+'ations\x0a\x20\x20\x20'+'\x20varying\x20v'+'ViewDir\x20:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20uniform\x20s'+'kyboxHighl'+'ightMultip'+'lier\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20SKY_CU'+'BEMAP\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cub'+'eMap\x20:\x20tex'+'ture_cube<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_cube'+'Map_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vWo'+'rldPos\x20:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20p'+'rojectedSk'+'ydomeCente'+'r\x20:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'env-atlas\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'phericalPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'envAtlasPS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_envAtlas_'+'sampler\x20:\x20'+'sampler;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20mipL'+'evel\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20@'+'fragment\x0a\x20'+'\x20\x20\x20fn\x20frag'+'mentMain(i'+'nput\x20:\x20Fra'+'gmentInput'+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20PREPA'+('SS_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20output'+'\x20linear\x20de'+'pth\x20during'+'\x20prepass\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20floa'+'t2vec4(vLi'+'nearDepth)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20linear'+'\x20:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20dir\x20'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KY_CUBEMAP'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+'\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+'nvDir\x20:\x20ve'+'c3f\x20=\x20norm'+'alize(inpu'+'t.vWorldPo'+'s\x20-\x20unifor'+'m.projecte'+'dSkydomeCe'+'nter);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'\x20=\x20envDir\x20'+'*\x20uniform.'+'cubeMapRot'+'ationMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir\x20='+'\x20input.vVi'+'ewDir;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'.x\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'tureSample'+'(texture_c'+'ubeMap,\x20te'+'xture_cube'+'Map_sample'+'r,\x20dir));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20env-atla'+'s\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ir\x20=\x20input'+'.vViewDir\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv\x20:\x20'+'vec2f\x20=\x20to'+'SphericalU'+'v(normaliz'+'e(dir));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20linea'+'r\x20=\x20{SKYBO'+'X_DECODE_F'+'NC}(textur'+'eSample(te'+'xture_envA'+'tlas,\x20text'+'ure_envAtl'+'as_sampler'+',\x20mapRough'+'nessUv(uv,')+('\x20uniform.m'+'ipLevel)))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ou'+'r\x20HDR\x20enco'+'des\x20values'+'\x20up\x20to\x2064,'+'\x20so\x20allow\x20'+'extra\x20brig'+'htness\x20for'+'\x20the\x20clipp'+'ed\x20values\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(any('+'linear\x20>=\x20'+'vec3f(64.0'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20uniform.'+'skyboxHigh'+'lightMulti'+'plier;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(gam'+'maCorrectO'+'utput(tone'+'Map(proces'+'sEnvironme'+'nt(linear)'+')),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),EI='\x0a\x20\x20\x20\x20//\x20At'+'tribute\x0a\x20\x20'+'\x20\x20attribut'+'e\x20aPositio'+'n\x20:\x20vec4f;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20matrix'+'_view\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20uniform\x20m'+'atrix_proj'+'ectionSkyb'+'ox\x20:\x20mat4x'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vViewDir'+'\x20:\x20vec3f;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PREPASS_'+'PASS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20when'+'\x20skydome\x20r'+'enders\x20dep'+'th\x20during\x20'+'prepass,\x20g'+'enerate\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vLi'+'nearDepth:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vWorldP'+'os\x20:\x20vec3f'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input\x20'+':\x20VertexIn'+'put)\x20->\x20Ve'+'rtexOutput'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut\x20:\x20Verte'+'xOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20view\x20:\x20ma'+'t4x4f\x20=\x20un'+'iform.matr'+'ix_view;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'worldPos\x20:'+'\x20vec4f\x20=\x20u'+'niform.mat'+'rix_model\x20'+'*\x20input.aP'+'osition;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vW'+'orldPos\x20=\x20'+'worldPos.x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'inear\x20dept'+'h\x20from\x20the'+'\x20worldPosi'+'tion,\x20see\x20'+'getLinearD'+'epth\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vL'+'inearDepth'+'\x20=\x20-(unifo'+('rm.matrix_'+'view\x20*\x20vec'+'4f(worldPo'+'s.xyz,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[0]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[1]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[2]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20uniform.m'+'atrix_proj'+'ectionSkyb'+'ox\x20*\x20(view'+'\x20*\x20input.a'+'Position);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'vViewDir\x20='+'\x20input.aPo'+'sition.xyz'+'\x20*\x20uniform'+'.cubeMapRo'+'tationMatr'+'ix;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20for\x20'+'infinite\x20s'+'kybox,\x20use'+'\x20negative\x20'+'gl_Positio'+'n.w\x20to\x20get'+'\x20positive\x20'+'linear\x20dep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-pcPositi'+'on.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Force\x20sk'+'ybox\x20to\x20fa'+'r\x20Z,\x20regar'+'dless\x20of\x20t'+'he\x20clip\x20pl'+'anes\x20on\x20th'+'e\x20camera\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Subtract\x20a'+'\x20tiny\x20fudg'+'e\x20factor\x20t'+'o\x20ensure\x20f'+'loating\x20po'+'int\x20errors'+'\x20don\x27t\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20st'+'ill\x20push\x20p'+'ixels\x20beyo'+'nd\x20far\x20Z.\x20'+'See:\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20http'+'s://commun'+'ity.khrono'+'s.org/t/sk'+'ybox-probl'+'em/61857\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.posit'+'ion.z\x20=\x20ou'+'tput.posit'+'ion.w\x20-\x201.'+'0e-7;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),bI='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_specular'+':\x20vec3f;\x0a#'+'endif\x0a\x0afn\x20'+'getSpecula'+'rity()\x20{\x0a\x20'+'\x20\x20\x20var\x20spe'+'cularColor'+'\x20=\x20vec3f(1'+'.0,\x201.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'CONSTANT\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20unifo'+'rm.materia'+'l_specular'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_TE'+'XTURE\x0a\x20\x20\x20\x20'+'specularCo'+'lor\x20=\x20spec'+'ularColor\x20'+'*\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SPECU'+'LAR_TEXTUR'+'E_NAME},\x20{'+'STD_SPECUL'+'AR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_S'+'PECULAR_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SPECULA'+'R_VERTEX\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20satur'+'ate3(vVert'+'exColor.{S'+'TD_SPECULA'+'R_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dSpe'+'cularity\x20='+'\x20specularC'+'olor;\x0a}\x0a',AI='\x0a\x0afn\x20toSph'+'erical(dir'+':\x20vec3f)\x20-'+'>\x20vec2f\x20{\x0a'+'\x20\x20\x20\x20let\x20an'+'gle_xz\x20=\x20s'+'elect(0.0,'+'\x20atan2(dir'+'.x,\x20dir.z)'+',\x20any(dir.'+'xz\x20!=\x20vec2'+'f(0.0)));\x0a'+'\x20\x20\x20\x20return'+'\x20vec2f(ang'+'le_xz,\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0afn\x20toS'+'phericalUv'+'(dir\x20:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20c'+'onst\x20PI\x20:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20uv\x20:\x20ve'+'c2f\x20=\x20toSp'+'herical(di'+'r)\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x20vec'+'2f(0.5,\x200.'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y);\x0a'+'}\x0a',CI='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'\x20\x20\x20\x20unifor'+'m\x20material'+'_speculari'+'tyFactor:\x20'+'f32;\x0a#endi'+'f\x0a\x0afn\x20getS'+'pecularity'+'Factor()\x20{'+'\x0a\x20\x20\x20\x20var\x20s'+'pecularity'+'Factor\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20speculari'+'tyFactor\x20='+'\x20speculari'+'tyFactor\x20*'+'\x20uniform.m'+'aterial_sp'+'ecularityF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'ARITYFACTO'+'R_TEXTURE\x0a'+'\x20\x20\x20\x20specul'+'arityFacto'+'r\x20=\x20specul'+'arityFacto'+'r\x20*\x20textur'+'eSampleBia'+'s({STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_NAME},\x20'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_VE'+'RTEX\x0a\x20\x20\x20\x20s'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_SPEC'+'ULARITYFAC'+'TOR_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dS'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor;\x0a}\x0a',PI='\x0afn\x20getSpo'+'tEffect(li'+'ghtSpotDir'+':\x20vec3f,\x20l'+'ightInnerC'+'oneAngle:\x20'+'f32,\x20light'+'OuterConeA'+'ngle:\x20f32,'+'\x20lightDirN'+'orm:\x20vec3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'osAngle:\x20f'+'32\x20=\x20dot(l'+'ightDirNor'+'m,\x20lightSp'+'otDir);\x0a\x20\x20'+'\x20\x20return\x20s'+'moothstep('+'lightOuter'+'ConeAngle,'+'\x20lightInne'+'rConeAngle'+',\x20cosAngle'+');\x0a}',MI='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2f(vUv0'+'.x,\x201.0\x20-\x20'+'vUv0.y);\x0a',DI='\x0a\x20\x20\x20\x20let\x20t'+'ileMask:\x20v'+'ec2f\x20=\x20ste'+'p(vMask,\x20v'+'ec2f(0.999'+'99));\x0a\x20\x20\x20\x20'+'let\x20tileSi'+'ze:\x20vec2f\x20'+'=\x200.5\x20*\x20(i'+'nnerOffset'+'.xy\x20+\x20inne'+'rOffset.zw'+');\x0a\x20\x20\x20\x20let'+'\x20tileScale'+':\x20vec2f\x20=\x20'+'vec2f(1.0)'+'\x20/\x20(vec2f('+'1.0)\x20-\x20til'+'eSize);\x0a\x20\x20'+'\x20\x20var\x20clam'+'pedUv:\x20vec'+'2f\x20=\x20mix(i'+'nnerOffset'+'.xy\x20*\x200.5,'+'\x20vec2f(1.0'+')\x20-\x20innerO'+'ffset.zw\x20*'+'\x200.5,\x20frac'+'t((vTiledU'+'v\x20-\x20tileSi'+'ze)\x20*\x20tile'+'Scale));\x0a\x20'+'\x20\x20\x20clamped'+'Uv\x20=\x20clamp'+'edUv\x20*\x20atl'+'asRect.zw\x20'+'+\x20atlasRec'+'t.xy;\x0a\x20\x20\x20\x20'+'var\x20nineSl'+'icedUv:\x20ve'+'c2f\x20=\x20vUv0'+'\x20*\x20tileMas'+'k\x20+\x20clampe'+'dUv\x20*\x20(vec'+'2f(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x0a',II='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dAlpha'+':\x20f32\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20//'+'\x20all\x20passe'+'s\x20handle\x20o'+'pacity\x0a\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'!=\x20NONE\x20||'+'\x20defined(L'+'IT_ALPHA_T'+'EST)\x20||\x20de'+'fined(LIT_'+'ALPHA_TO_C'+'OVERAGE)\x20|'+'|\x20STD_OPAC'+'ITY_DITHER'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_OP'+'ACITY_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_opa'+'cityMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_opacityMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20globals'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dAlbedo:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'NormalW:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dSp'+'ecularity:'+'\x20vec3f\x20=\x20v'+'ec3f(0.0,\x20'+'0.0,\x200.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dGlossin'+'ess:\x20f32\x20='+'\x200.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_REFR'+'ACTION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dTransmi'+'ssion:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dTh'+'ickness:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'CENE_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SCREE'+'N_SIZE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20uSc'+'reenSize:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+('f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_TRANSFOR'+'MS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20ma'+'trix_viewP'+'rojection:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20matri'+'x_model:\x20m'+'at4x4f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20paral'+'lax\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_HEIGHT_'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'UvOffset:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'DIFFUSE_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_heightM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'heightMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20diffus'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'diffuseMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_diffus'+'eMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSEDETAI'+'L_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20norma'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_NORMAL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_normalMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20#ifdef'+'\x20STD_NORMA'+'LDETAIL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalDetai'+'lMap\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_no'+'rmalDetail'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_T'+'HICKNESS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'thicknessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_thic'+'knessMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_REFRACTIO'+'N_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_refract'+'ionMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'refraction'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20i'+'ridescence'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dIr'+'idescence:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20dIridesce'+'nceThickne'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'iridescenc'+'eThickness'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_iridescen'+'ceThicknes'+'sMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur')+('e_iridesce'+'nceMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_irides'+'cenceMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20ccSp'+'ecularity:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20ccGlossin'+'ess:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20ccNor'+'malW:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dAni'+'sotropy:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'Anisotropy'+'Rotation:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'arity\x20&\x20gl'+'ossiness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20she'+'en\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SHEE'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sSpecular'+'ity:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sGlossine'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'HEENGLOSS_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_s'+'heenGlossM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_sheenG'+'lossMapSam'+'pler\x20:\x20sam'+'pler;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_MET'+'ALNESS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dMet'+'alness:\x20f3'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dIor:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'metalnessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_metaln'+'essMapSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'rity\x20facto'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var<privat'+'e>\x20dSpecul'+'arityFacto'+'r:\x20f32;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rityFactor'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_specu'+'larityFact'+'orMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_SPECULAR'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_')+('specularMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20gloss\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_glossMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_glo'+'ssMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dAo:\x20f32;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_aoMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_AODETAIL_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoDet'+'ailMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_aoDeta'+'ilMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dEmission'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_EM'+'ISSIVE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_em'+'issiveMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_emissiv'+'eMapSample'+'r\x20:\x20sample')+('r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clearcoat\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatG'+'lossMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_clear'+'CoatGlossM'+'apSampler\x20'+':\x20sampler;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_clearC'+'oatNormalM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatN'+'ormalMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20anisotr'+'opy\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_A'+'NISOTROPY_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aniso'+'tropyMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_anis'+'otropyMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20lightm'+'ap\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(STD_LIG'+'HTMAP)\x20||\x20')+('defined(ST'+'D_LIGHT_VE'+'RTEX_COLOR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dLi'+'ghtmap:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_LI'+'GHT_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_l'+'ightMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_light'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20front'+'\x20end\x20outpu'+'ts\x20to\x20lit\x20'+'shader\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22litShader'+'CorePS\x22\x0a'),LI='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fn\x20'+'getSpecula'+'rity()\x20{\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dSpeculari'+'ty\x20=\x20vec3f'+'(1.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'gloss\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22gl'+'ossPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22aoPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20emissi'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22emissiveP'+'S\x22\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clear'+'coat\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20')+('LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22clea'+'rCoatPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'GlossPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'NormalPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ani'+'sotropy\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x20&&\x20defin'+'ed(LIT_LIG'+'HTING)\x20&&\x20'+'defined(LI'+'T_GGX_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22an'+'isotropyPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(ST'+'D_LIGHTMAP'+')\x20||\x20defin'+'ed(STD_LIG'+'HT_VERTEX_'+'COLOR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22l'+'ightmapPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20fn\x20evalu'+'ateFronten'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20al'+'l\x20passes\x20h'+'andle\x20opac'+'ity\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIT_'+'BLEND_TYPE'+'\x20!=\x20NONE\x20|'+'|\x20defined('+'LIT_ALPHA_'+'TEST)\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x20'+'||\x20STD_OPA'+'CITY_DITHE'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getOpaci'+'ty();\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_ALPHA'+'_TEST)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20alphaTe'+'st(dAlpha)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20opacityDi'+'ther(dAlph'+'a,\x200.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20d'+'Alpha;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20par')+('allax\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getP'+'arallax();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getA'+'lbedo();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_a'+'lbedo\x20=\x20dA'+'lbedo;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20normal\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getNorma'+'l();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_w'+'orldNormal'+'\x20=\x20dNormal'+'W;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'fraction\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etRefracti'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'transmissi'+'on\x20=\x20dTran'+'smission;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Thickness('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness\x20=\x20d'+'Thickness;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_D'+'ISPERSION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_di'+'spersion\x20='+'\x20uniform.m'+'aterial_di'+'spersion;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_IRIDESC'+'ENCE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getIrides'+'cence();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getIr'+'idescenceT'+'hickness()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x20=\x20'+'dIridescen'+'ce;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ir'+'idescence_'+'thickness\x20'+'=\x20dIridesc'+'enceThickn'+'ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specularit'+'y\x20&\x20glossi'+'ness\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20sheen\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSheen()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'sheen_spec'+'ularity\x20=\x20'+'sSpeculari'+'ty;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getShe'+'enGlossine'+'ss();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_sheen_'+'gloss\x20=\x20sG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getMetaln'+'ess();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_metal'+'ness\x20=\x20dMe'+'talness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etIor();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+'\x20=\x20dIor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'ity\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULARITY_'+'FACTOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'yFactor();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'Factor\x20=\x20d'+'Specularit'+'yFactor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20gloss\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'y();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20dSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs')+('_gloss\x20=\x20d'+'Glossiness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ao\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getAO();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_ao\x20=\x20'+'dAo;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getEmissi'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_emis'+'sion\x20=\x20dEm'+'ission;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getClea'+'rCoat();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getCl'+'earCoatGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'ClearCoatN'+'ormal();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_specula'+'rity\x20=\x20ccS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_glos'+'s\x20=\x20ccGlos'+'siness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal\x20=\x20ccNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20anisotro'+'py\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getAnisot'+'ropy();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20lightma'+'p\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightM'+'ap();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmap\x20='+'\x20dLightmap'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_')+('LIGHTMAP_D'+'IR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmapD'+'ir\x20=\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a'),RI='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20tbnB'+'asis:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getTBN(t'+'angent:\x20ve'+'c3f,\x20binor'+'mal:\x20vec3f'+',\x20normal:\x20'+'vec3f)\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20TBN_TANGE'+'NTS\x20//\x20tan'+'gents\x20/\x20bi'+'normals\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dTB'+'N\x20=\x20mat3x3'+'f(normaliz'+'e(tangent)'+',\x20normaliz'+'e(binormal'+'),\x20normali'+'ze(normal)'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20define'+'d(TBN_DERI'+'VATIVES)\x20/'+'/\x20derivati'+'ves\x20based\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2f\x20=\x20{'+'lightingUv'+'};\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20get\x20e'+'dge\x20vector'+'s\x20of\x20the\x20p'+'ixel\x20trian'+'gle\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dp1:'+'\x20vec3f\x20=\x20d'+'pdx(\x20vPosi'+'tionW\x20);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dp2:\x20vec3'+'f\x20=\x20dpdy(\x20'+'vPositionW'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20duv1'+':\x20vec2f\x20=\x20'+'dpdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20duv2:\x20'+'vec2f\x20=\x20dp'+'dy(\x20uv\x20);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20solve\x20th'+'e\x20linear\x20s'+'ystem\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20dp'+'2perp:\x20vec'+'3f\x20=\x20cross'+'(\x20dp2,\x20nor'+'mal\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20d'+'p1perp:\x20ve'+'c3f\x20=\x20cros'+'s(\x20normal,'+'\x20dp1\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'T:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.x\x20+\x20'+'dp1perp\x20*\x20'+'duv2.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'B:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+('dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+'ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20deno'+'m:\x20f32\x20=\x20m'+'ax(\x20dot(T,'+'\x20T),\x20dot(B'+',\x20B)\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'invmax:\x20f3'+'2\x20=\x20select'+'(uniform.t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20),\x200.0,\x20'+'denom\x20==\x200'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3x3f(T\x20'+'*\x20invmax,\x20'+'-B\x20*\x20invma'+'x,\x20normal\x20'+');\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20obj'+'ect\x20space\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20B:\x20'+'vec3f\x20=\x20cr'+'oss(normal'+',\x20vObjectS'+'paceUpW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20T:\x20vec3f'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dot(B,'+'B)\x20==\x200.0)'+'\x20//\x20deal\x20w'+'ith\x20case\x20w'+'hen\x20vObjec'+'tSpaceUpW\x20'+'normal\x20are'+'\x20parallel\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20majo'+'r:\x20f32\x20=\x20m'+'ax(max(nor'+'mal.x,\x20nor'+'mal.y),\x20no'+'rmal.z);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(norm'+'al.x\x20==\x20ma'+'jor)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20B\x20=\x20c'+'ross(norma'+'l,\x20vec3f(0'+'.0,\x201.0,\x200'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20T\x20=\x20cros'+'s(normal,\x20'+'B);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x20if\x20(n'+'ormal.y\x20=='+'\x20major)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20B\x20'+'=\x20cross(no'+'rmal,\x20vec3'+'f(0.0,\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20//'+'\x20removed\x20\x22'+'if\x20(normal'+'.z\x20==\x20majo'+'r)\x22\x20assumi'+'ng\x20it\x27s\x20th'+'e\x20only\x20rem'+'aining\x20cas'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20B\x20=\x20cros'+'s(normal,\x20'+'vec3f(1.0,'+'\x200.0,\x200.0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3x3f(n'+'ormalize(T'+'),\x20normali'+'ze(B),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a}'),OI='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_th'+'ickness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getTh'+'ickness()\x20'+'{\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'THICKNESS_'+'CONSTANT\x0a\x20'+'\x20\x20\x20dThickn'+'ess\x20=\x20dThi'+'ckness\x20*\x20u'+'niform.mat'+'erial_thic'+'kness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_THICKN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x20d'+'Thickness\x20'+'*\x20textureS'+'ampleBias('+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_THICKNESS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_THIC'+'KNESS_VERT'+'EX\x0a\x20\x20\x20\x20dTh'+'ickness\x20=\x20'+'dThickness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',FI='\x0a#if\x20(TONE'+'MAP\x20==\x20NON'+'E)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingNo'+'nePS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20FILMIC\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingFilmi'+'cPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22tonemap'+'pingLinear'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20HEJL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gHejlPS\x22\x0a#'+'elif\x20TONEM'+'AP\x20==\x20ACES'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingAces'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20ACES2\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngAces2PS\x22'+'\x0a#elif\x20TON'+'EMAP\x20==\x20NE'+'UTRAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gNeutralPS'+'\x22\x0a#endif\x0a',NI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20t'+'A:\x20f32\x20=\x202'+'.51;\x0a\x20\x20\x20\x20l'+'et\x20tB:\x20f32'+'\x20=\x200.03;\x0a\x20'+'\x20\x20\x20let\x20tC:'+'\x20f32\x20=\x202.4'+'3;\x0a\x20\x20\x20\x20let'+'\x20tD:\x20f32\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20let\x20tE:\x20f'+'32\x20=\x200.14;'+'\x0a\x20\x20\x20\x20let\x20x'+':\x20vec3f\x20=\x20'+'color\x20*\x20un'+'iform.expo'+'sure;\x0a\x20\x20\x20\x20'+'return\x20(x\x20'+'*\x20(tA\x20*\x20x\x20'+'+\x20tB))\x20/\x20('+'x\x20*\x20(tC\x20*\x20'+'x\x20+\x20tD)\x20+\x20'+'tE);\x0a}\x0a',kI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0a//\x20AC'+'ES\x20approxi'+'mation\x20by\x20'+'Stephen\x20Hi'+'ll\x0a\x0a//\x20sRG'+'B\x20=>\x20XYZ\x20='+'>\x20D65_2_D6'+'0\x20=>\x20AP1\x20='+'>\x20RRT_SAT\x0a'+'const\x20ACES'+'InputMat:\x20'+'mat3x3f\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20vec3f(0'+'.59719,\x200.'+'35458,\x200.0'+'4823),\x0a\x20\x20\x20'+'\x20vec3f(0.0'+'7600,\x200.90'+'834,\x200.015'+'66),\x0a\x20\x20\x20\x20v'+'ec3f(0.028'+'40,\x200.1338'+'3,\x200.83777'+')\x0a);\x0a\x0a//\x20O'+'DT_SAT\x20=>\x20'+'XYZ\x20=>\x20D60'+'_2_D65\x20=>\x20'+'sRGB\x0aconst'+'\x20ACESOutpu'+'tMat:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20v'+'ec3f(\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367),\x0a\x20\x20\x20\x20'+'vec3f(-0.1'+'0208,\x20\x201.1'+'0813,\x20-0.0'+'0605),\x0a\x20\x20\x20'+'\x20vec3f(-0.'+'00327,\x20-0.'+'07276,\x20\x201.'+'07602)\x0a);\x0a'+'\x0afn\x20RRTAnd'+'ODTFit(v:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20a:\x20v'+'ec3f\x20=\x20v\x20*'+'\x20(v\x20+\x20vec3'+'f(0.024578'+'6))\x20-\x20vec3'+'f(0.000090'+'537);\x0a\x20\x20\x20\x20'+'let\x20b:\x20vec'+'3f\x20=\x20v\x20*\x20('+'vec3f(0.98'+'3729)\x20*\x20v\x20'+'+\x20vec3f(0.'+'4329510))\x20'+'+\x20vec3f(0.'+'238081);\x0a\x20'+'\x20\x20\x20return\x20'+'a\x20/\x20b;\x0a}\x0a\x0a'+'fn\x20toneMap'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'var\x20c:\x20vec'+'3f\x20=\x20color'+'\x20*\x20(unifor'+'m.exposure'+'\x20/\x200.6);\x0a\x20'+'\x20\x20\x20c\x20=\x20c\x20*'+'\x20ACESInput'+'Mat;\x0a\x0a\x20\x20\x20\x20'+'//\x20Apply\x20R'+'RT\x20and\x20ODT'+'\x0a\x20\x20\x20\x20c\x20=\x20R'+'RTAndODTFi'+'t(c);\x0a\x20\x20\x20\x20'+'c\x20=\x20c\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(c,\x20vec'+'3f(0.0),\x20v'+'ec3f(1.0))'+';\x0a}\x0a',UI='\x0aconst\x20A:\x20'+'f32\x20=\x200.15'+';\x0aconst\x20B:'+'\x20f32\x20=\x200.5'+'0;\x0aconst\x20C'+':\x20f32\x20=\x200.'+'10;\x0aconst\x20'+'D:\x20f32\x20=\x200'+'.20;\x0aconst'+'\x20E:\x20f32\x20=\x20'+'0.02;\x0acons'+'t\x20F:\x20f32\x20='+'\x200.30;\x0acon'+'st\x20W:\x20f32\x20'+'=\x2011.2;\x0a\x0au'+'niform\x20exp'+'osure:\x20f32'+';\x0a\x0afn\x20unch'+'arted2Tone'+'map(x:\x20vec'+'3f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20((x\x20'+'*\x20(A\x20*\x20x\x20+'+'\x20C\x20*\x20B)\x20+\x20'+'D\x20*\x20E)\x20/\x20('+'x\x20*\x20(A\x20*\x20x'+'\x20+\x20B)\x20+\x20D\x20'+'*\x20F))\x20-\x20ve'+'c3f(E\x20/\x20F)'+';\x0a}\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20c'+':\x20vec3f\x20=\x20'+'uncharted2'+'Tonemap(co'+'lor\x20*\x20unif'+'orm.exposu'+'re);\x0a\x20\x20\x20\x20l'+'et\x20whiteSc'+'ale:\x20vec3f'+'\x20=\x20vec3f(1'+'.0)\x20/\x20unch'+'arted2Tone'+'map(vec3f('+'W,\x20W,\x20W));'+'\x0a\x20\x20\x20\x20c\x20*=\x20'+'whiteScale'+';\x0a\x20\x20\x20\x20retu'+'rn\x20c;\x0a}\x0a',BI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20A'+':\x20f32\x20=\x200.'+'22;\x0a\x20\x20\x20\x20le'+'t\x20B:\x20f32\x20='+'\x200.3;\x0a\x20\x20\x20\x20'+'let\x20C:\x20f32'+'\x20=\x200.1;\x0a\x20\x20'+'\x20\x20let\x20D:\x20f'+'32\x20=\x200.2;\x0a'+'\x20\x20\x20\x20let\x20E:'+'\x20f32\x20=\x200.0'+'1;\x0a\x20\x20\x20\x20let'+'\x20F:\x20f32\x20=\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20Scl:\x20f3'+'2\x20=\x201.25;\x0a'+'\x0a\x20\x20\x20\x20let\x20a'+'djusted_co'+'lor\x20=\x20colo'+'r\x20*\x20unifor'+'m.exposure'+';\x0a\x20\x20\x20\x20let\x20'+'h\x20=\x20max(ve'+'c3f(0.0),\x20'+'adjusted_c'+'olor\x20-\x20vec'+'3f(0.004))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20(h\x20*\x20('+'(Scl\x20*\x20A)\x20'+'*\x20h\x20+\x20Scl\x20'+'*\x20vec3f(C\x20'+'*\x20B))\x20+\x20Sc'+'l\x20*\x20vec3f('+'D\x20*\x20E))\x20/\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(h\x20*\x20(A\x20*'+'\x20h\x20+\x20vec3f'+'(B))\x20+\x20vec'+'3f(D\x20*\x20F))'+'\x20-\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20Scl\x20*\x20'+'vec3f(E\x20/\x20'+'F);\x0a}\x0a',zI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20color\x20*\x20'+'uniform.ex'+'posure;\x0a}\x0a',VI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(col:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20var\x20col'+'or\x20=\x20col\x20*'+'\x20uniform.e'+'xposure;\x0a\x0a'+'\x20\x20\x20\x20let\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20let\x20des'+'aturation\x20'+'=\x200.15;\x0a\x0a\x20'+'\x20\x20\x20let\x20x\x20='+'\x20min(color'+'.r,\x20min(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20let\x20offs'+'et\x20=\x20selec'+'t(0.04,\x20x\x20'+'-\x206.25\x20*\x20x'+'\x20*\x20x,\x20x\x20<\x20'+'0.08);\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'vec3f(offs'+'et);\x0a\x0a\x20\x20\x20\x20'+'let\x20peak\x20='+'\x20max(color'+'.r,\x20max(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20if\x20(peak'+'\x20<\x20startCo'+'mpression)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'d\x20=\x201.0\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20let\x20newP'+'eak\x20=\x201.0\x20'+'-\x20d\x20*\x20d\x20/\x20'+'(peak\x20+\x20d\x20'+'-\x20startCom'+'pression);'+'\x0a\x20\x20\x20\x20color'+'\x20*=\x20newPea'+'k\x20/\x20peak;\x0a'+'\x0a\x20\x20\x20\x20let\x20g'+'\x20=\x201.0\x20-\x201'+'.0\x20/\x20(desa'+'turation\x20*'+'\x20(peak\x20-\x20n'+'ewPeak)\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ve'+'c3f(newPea'+'k),\x20vec3f('+'g));\x0a}\x0a',GI='\x0afn\x20toneMa'+'p(color:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a}\x0a',HI='\x0a#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20SCREE'+'NSPACE\x0a\x20\x20\x20'+'\x20uniform\x20p'+'rojectionF'+'lipY:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20evalWorl'+'dPosition('+'vertexPosi'+'tion:\x20vec3'+'f,\x20modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ve'+'c4f\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20local'+'Pos:\x20vec3f'+'\x20=\x20getLoca'+'lPosition('+'vertexPosi'+'tion);\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20outer\x20and'+'\x20inner\x20ver'+'tices\x20are\x20'+'at\x20the\x20sam'+'e\x20position'+',\x20scale\x20bo'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20local'+'PosXZ:\x20vec'+'2f\x20=\x20local'+'Pos.xz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20loca'+'lPosXZ\x20=\x20l'+'ocalPosXZ\x20'+'*\x20uniform.'+'outerScale'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20offset'+'\x20inner\x20ver'+'tices\x20insi'+'de\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20(origi'+'nal\x20vertic'+'es\x20must\x20be'+'\x20in\x20[-1;1]'+'\x20range)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'positiveUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(vertex'+'Position.x'+'z,\x20vec2f(0'+'.0),\x20vec2f'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(-verte'+'xPosition.'+'xz,\x20vec2f('+'0.0),\x20vec2'+'f(1.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20loc'+'alPosXZ\x20=\x20'+'localPosXZ'+'\x20+\x20(-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy\x20+'+'\x20negativeU'+'nitOffset\x20'+'*\x20uniform.'+'innerOffse'+'t.zw)\x20*\x20ve'+'rtex_texCo'+'ord0.xy;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'iledUvGlob'+'al\x20=\x20(loca'+'lPosXZ\x20-\x20u'+'niform.out'+'erScale\x20+\x20'+'uniform.in'+'nerOffset.'+'xy)\x20*\x20-0.5'+'\x20+\x201.0;\x20//'+'\x20uv\x20=\x20loca'+'l\x20pos\x20-\x20in'+('ner\x20corner'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPosXZ'+'\x20=\x20localPo'+'sXZ\x20*\x20-0.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20='+'\x20vec3f(loc'+'alPosXZ.x,'+'\x20localPosX'+'Z.y,\x20local'+'Pos.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20var\x20po'+'sW:\x20vec4f\x20'+'=\x20modelMat'+'rix\x20*\x20vec4'+'f(localPos'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREENSPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'posW\x20=\x20vec'+'4f(posW.xy'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20posW'+';\x0a}\x0a\x0afn\x20ge'+'tPosition('+')\x20->\x20vec4f'+'\x20{\x0a\x0a\x20\x20\x20\x20dM'+'odelMatrix'+'\x20=\x20getMode'+'lMatrix();'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'posW:\x20vec4'+'f\x20=\x20evalWo'+'rldPositio'+'n(vertex_p'+'osition.xy'+'z,\x20dModelM'+'atrix);\x0a\x20\x20'+'\x20\x20dPositio'+'nW\x20=\x20posW.'+'xyz;\x0a\x0a\x20\x20\x20\x20'+'var\x20screen'+'Pos:\x20vec4f'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20UV1LAYO'+'UT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20vec4f(v'+'ertex_texC'+'oord1.xy\x20*'+'\x202.0\x20-\x201.0'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20SCR'+'EENSPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20posW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20unif'+'orm.projec'+'tionFlipY;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos\x20=\x20u'+'niform.mat'+'rix_viewPr'+'ojection\x20*'+'\x20posW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20snap\x20ve'+'rtex\x20to\x20a\x20'+'pixel\x20boun'+'dary\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x200.'+'5)\x20+\x200.5;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20screenPo'+'s.xy\x20*=\x20un'+'iforms.uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'niforms.uS'+'creenSize.'+'zw;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x202.0'+')\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20scr'+'eenPos;\x0a}\x0a'+'\x0afn\x20getWor'+'ldPosition'+'()\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20dPosi'+'tionW;\x0a}\x0a'),WI='\x0a\x0a\x20\x20\x20\x20attr'+'ibute\x20vert'+'ex_positio'+'n:\x20vec4f;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'rix_model:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20morph_te'+'x_params:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20attri'+'bute\x20morph'+'_vertex_id'+':\x20u32;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etTextureM'+'orphCoords'+'()\x20->\x20vec2'+'i\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'turn\x20morph'+'_vertex_id'+'\x20into\x20int\x20'+'grid\x20coord'+'inates\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'Size:\x20vec2'+'i\x20=\x20vec2i('+'uniform.mo'+'rph_tex_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphGr'+'idV:\x20i32\x20='+'\x20i32(morph'+'_vertex_id'+')\x20/\x20textur'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20morph'+'GridU:\x20i32'+'\x20=\x20i32(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'rphGridV\x20='+'\x20textureSi'+'ze.y\x20-\x20mor'+'phGridV\x20-\x20'+'1;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec2i(mo'+'rphGridU,\x20'+'morphGridV'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_PO'+'SITION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20aabbSiz'+'e:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20aabbMi'+'n:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'morphPosit'+'ionTex:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'sitionTex:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+('if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sk'+'inBatchVS\x22'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fn\x20getMode'+'lMatrix()\x20'+'->\x20mat4x4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getBoneM'+'atrix(vert'+'ex_boneInd'+'ices);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(SKIN'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etModelMat'+'rix()\x20->\x20m'+'at4x4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20un'+'iform.matr'+'ix_model\x20*'+'\x20getSkinMa'+'trix(verte'+'x_boneIndi'+'ces,\x20verte'+'x_boneWeig'+'hts);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(INSTA'+'NCING)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22tran'+'sformInsta'+'ncingVS\x22\x0a\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'n\x20getModel'+'Matrix()\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_mode'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'fn\x20getLoca'+'lPosition('+'vertexPosi'+'tion:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20loc'+'alPos:\x20vec'+'3f\x20=\x20verte'+'xPosition;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphUV:'+'\x20vec2i\x20=\x20g'+'etTextureM'+'orphCoords'+'();\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MORPHI'+'NG_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Use\x20'+'textureLoa'+'d\x20instead\x20'+'of\x20texelFe'+'tch.\x20Coord'+'inates\x20mus'+'t\x20be\x20integ'+'er\x20type\x20(v'+'ec2i).\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20WGSL'+'\x20requires\x20'+'explicit\x20t'+'ype\x20conver'+'sion\x20for\x20v'+'ectors.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Div'+'ision\x20by\x20f'+'loat\x20liter')+('al\x20ensures'+'\x20floating\x20'+'point\x20divi'+'sion.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hPos:\x20vec3'+'f\x20=\x20vec3f('+'textureLoa'+'d(morphPos'+'itionTex,\x20'+'morphUV,\x200'+').xyz)\x20/\x206'+'5535.0\x20*\x20u'+'niform.aab'+'bSize\x20+\x20un'+'iform.aabb'+'Min;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Use\x20text'+'ureLoad\x20in'+'stead\x20of\x20t'+'exelFetch.'+'\x20Coordinat'+'es\x20must\x20be'+'\x20integer\x20t'+'ype\x20(vec2i'+').\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'s:\x20vec3f\x20='+'\x20textureLo'+'ad(morphPo'+'sitionTex,'+'\x20morphUV,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20+'+'=\x20morphPos'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20localP'+'os;\x0a\x20\x20\x20\x20}\x0a'),$I='\x0a\x0aattribut'+'e\x20instance'+'_line1:\x20ve'+'c4f;\x0aattri'+'bute\x20insta'+'nce_line2:'+'\x20vec4f;\x0aat'+'tribute\x20in'+'stance_lin'+'e3:\x20vec4f;'+'\x0aattribute'+'\x20instance_'+'line4:\x20vec'+'4f;\x0a\x0afn\x20ge'+'tModelMatr'+'ix()\x20->\x20ma'+'t4x4f\x20{\x0a\x20\x20'+'\x20\x20return\x20u'+'niform.mat'+'rix_model\x20'+'*\x20mat4x4f('+'instance_l'+'ine1,\x20inst'+'ance_line2'+',\x20instance'+'_line3,\x20in'+'stance_lin'+'e4);\x0a}\x0a',XI='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_refrac'+'tion:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getRefra'+'ction()\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction:\x20'+'f32\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20refractio'+'n\x20=\x20unifor'+'m.material'+'_refractio'+'n;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'REFRACTION'+'_TEXTURE\x0a\x20'+'\x20\x20\x20refract'+'ion\x20=\x20refr'+'action\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_REFRACTI'+'ON_TEXTURE'+'_NAME},\x20{S'+'TD_REFRACT'+'ION_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_REFRACTIO'+'N_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_REFRACTIO'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_VE'+'RTEX\x0a\x20\x20\x20\x20r'+'efraction\x20'+'=\x20refracti'+'on\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_REFRACTI'+'ON_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dTr'+'ansmission'+'\x20=\x20refract'+'ion;\x0a}\x0a',qI='\x0auniform\x20t'+'woSidedLig'+'htingNegSc'+'aleFactor:'+'\x20f32;\x0a\x0afn\x20'+'handleTwoS'+'idedLighti'+'ng()\x20{\x0a\x20\x20\x20'+'\x20dTBN[2]\x20='+'\x20dTBN[2]\x20*'+'\x20select(-u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20p'+'cFrontFaci'+'ng);\x0a}\x0a',jI='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20fn\x20getU'+'v0()\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20uv'+'\x20=\x20vertex_'+'position.x'+'z;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20offse'+'t\x20inner\x20ve'+'rtices\x20ins'+'ide\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2f(0'+'.0,\x200.0),\x20'+'vec2f(1.0,'+'\x201.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset\x20='+'\x20clamp(-ve'+'rtex_posit'+'ion.xz,\x20ve'+'c2f(0.0,\x200'+'.0),\x20vec2f'+'(1.0,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uv\x20=\x20uv\x20'+'+\x20((-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy)\x20'+'+\x20(negativ'+'eUnitOffse'+'t\x20*\x20unifor'+'m.innerOff'+'set.zw))\x20*'+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uv\x20=\x20uv\x20*'+'\x20-0.5\x20+\x20ve'+'c2f(0.5,\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20uniform'+'.atlasRect'+'.zw\x20+\x20unif'+'orm.atlasR'+'ect.xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dMa'+'skGlobal\x20='+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20uv'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20fn'+'\x20getUv0()\x20'+'->\x20vec2f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a',YI='\x0afn\x20getUv1'+'()\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20verte'+'x_texCoord'+'1;\x0a}\x0a',KI='\x0aoutput.vU'+'V{TRANSFOR'+'M_UV_{i}}_'+'{TRANSFORM'+'_ID_{i}}\x20='+'\x20vec2f(\x0a\x20\x20'+'\x20\x20dot(vec3'+'f(uv{TRANS'+'FORM_UV_{i'+'}},\x201),\x20un'+'iform.{TRA'+'NSFORM_NAM'+'E_{i}}0),\x0a'+'\x20\x20\x20\x20dot(ve'+'c3f(uv{TRA'+'NSFORM_UV_'+'{i}},\x201),\x20'+'uniform.{T'+'RANSFORM_N'+'AME_{i}}1)'+'\x0a);\x0a',ZI='\x0a\x20\x20\x20\x20unifo'+'rm\x20{TRANSF'+'ORM_NAME_{'+'i}}0:\x20vec3'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20{TRAN'+'SFORM_NAME'+'_{i}}1:\x20ve'+'c3f;\x0a',QI='\x0afn\x20getVie'+'wDir()\x20{\x0a\x20'+'\x20\x20\x20dViewDi'+'rW\x20=\x20norma'+'lize(unifo'+'rm.view_po'+'sition\x20-\x20v'+'PositionW)'+';\x0a}\x0a',JI={'alphaTestPS':Q2,'ambientPS':J2,'anisotropyPS':eM,'aoPS':tM,'aoDiffuseOccPS':sM,'aoSpecOccPS':iM,'bakeDirLmEndPS':rM,'bakeLmEndPS':aM,'basePS':nM,'baseNineSlicedPS':oM,'baseNineSlicedTiledPS':lM,'bayerPS':cM,'blurVSMPS':hM,'clearCoatPS':dM,'clearCoatGlossPS':fM,'clearCoatNormalPS':uM,'clusteredLightCookiesPS':mM,'clusteredLightShadowsPS':_M,'clusteredLightUtilsPS':pM,'clusteredLightPS':gM,'combinePS':SM,'cookieBlit2DPS':yM,'cookieBlitCubePS':vM,'cookieBlitVS':xM,'cubeMapProjectPS':TM,'cubeMapRotatePS':wM,'debugOutputPS':EM,'debugProcessFrontendPS':bM,'detailModesPS':CM,'diffusePS':PM,'decodePS':AM,'emissivePS':MM,'encodePS':DM,'endPS':IM,'envAtlasPS':LM,'envProcPS':RM,'falloffInvSquaredPS':OM,'falloffLinearPS':FM,'floatAsUintPS':NM,'fogPS':kM,'fresnelSchlickPS':UM,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':BM,'gammaPS':zM,'glossPS':VM,'gsplatCenterVS':GM,'gsplatCornerVS':QM,'gsplatColorVS':HM,'gsplatCommonVS':WM,'gsplatCompressedDataVS':$M,'gsplatCompressedSHVS':XM,'gsplatEvalSHVS':qM,'gsplatQuatToMat3VS':jM,'gsplatSogsColorVS':YM,'gsplatSogsDataVS':KM,'gsplatSogsSHVS':ZM,'gsplatDataVS':JM,'gsplatOutputVS':eD,'gsplatPS':tD,'gsplatSHVS':sD,'gsplatSourceVS':iD,'gsplatVS':rD,'quadVS':aD,'indirectCoreCS':nD,'immediateLinePS':oD,'immediateLineVS':lD,'iridescenceDiffractionPS':cD,'iridescencePS':hD,'iridescenceThicknessPS':dD,'iorPS':fD,'lightDeclarationPS':uD,'lightDiffuseLambertPS':pD,'lightDirPointPS':mD,'lightEvaluationPS':_D,'lightFunctionLightPS':gD,'lightFunctionShadowPS':SD,'lightingPS':yD,'lightmapAddPS':vD,'lightmapPS':xD,'lightSpecularAnisoGGXPS':TD,'lightSpecularBlinnPS':wD,'lightSheenPS':ED,'linearizeDepthPS':bD,'litForwardBackendPS':AD,'litForwardDeclarationPS':CD,'litForwardMainPS':PD,'litForwardPostCodePS':MD,'litForwardPreCodePS':DD,'litMainPS':ID,'litMainVS':LD,'litOtherMainPS':RD,'litShaderArgsPS':OD,'litShaderCorePS':FD,'litShadowMainPS':ND,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':kD,'metalnessPS':UD,'metalnessModulatePS':zD,'morphPS':VD,'morphVS':GD,'msdfPS':BD,'msdfVS':HD,'normalVS':WD,'normalCoreVS':$D,'normalMapPS':XD,'opacityPS':qD,'opacityDitherPS':jD,'outputPS':YD,'outputAlphaPS':KD,'outputTex2DPS':ZD,'sheenPS':QD,'sheenGlossPS':JD,'parallaxPS':eI,'pickPS':tI,'reflDirPS':sI,'reflDirAnisoPS':iI,'reflectionCCPS':rI,'reflectionCubePS':aI,'reflectionEnvHQPS':nI,'reflectionEnvPS':oI,'reflectionSpherePS':lI,'reflectionSheenPS':cI,'refractionCubePS':hI,'refractionDynamicPS':dI,'reprojectPS':fI,'reprojectVS':uI,'screenDepthPS':pI,'shadowCascadesPS':mI,'shadowEVSMPS':_I,'shadowPCF1PS':gI,'shadowPCF3PS':SI,'shadowPCF5PS':yI,'shadowSoftPS':vI,'skinBatchVS':xI,'skinVS':TI,'skyboxPS':wI,'skyboxVS':EI,'specularPS':bI,'sphericalPS':AI,'specularityFactorPS':CI,'spotPS':PI,'startNineSlicedPS':MI,'startNineSlicedTiledPS':DI,'stdDeclarationPS':II,'stdFrontEndPS':LI,'TBNPS':RI,'thicknessPS':OI,'tonemappingPS':FI,'tonemappingAcesPS':NI,'tonemappingAces2PS':kI,'tonemappingFilmicPS':UI,'tonemappingHejlPS':BI,'tonemappingLinearPS':zI,'tonemappingNeutralPS':VI,'tonemappingNonePS':GI,'transformVS':HI,'transformCoreVS':WI,'transformInstancingVS':$I,'transmissionPS':XI,'twoSidedLightingPS':qI,'uv0VS':jI,'uv1VS':YI,'uvTransformVS':KI,'uvTransformUniformsPS':ZI,'viewDirPS':QI,'webgpuPS':$y,'webgpuVS':Xy},ea=class ea extends me{constructor(_0x41f932){super(),h(this,'_batcher',null),h(this,'_destroyRe'+'quested',!(-0x26c5+-0x20f2+0x8f7*0x8)),h(this,'_inFrameUp'+'date',!(-0x5a5+-0x4b3+0x3*0x373)),h(this,'_libraries'+'Loaded',!(0xd9*-0x23+0x574+0x1838)),h(this,'_fillMode',Tg),h(this,'_resolutio'+'nMode',MC),h(this,'_allowResi'+'ze',!(-0x14d*-0xf+0x13*0x1e3+0x6*-0x93a)),h(this,'_skyboxAss'+'et',null),h(this,'_soundMana'+'ger'),h(this,'_visibilit'+'yChangeHan'+'dler'),h(this,'_entityInd'+'ex',{}),h(this,'_inTools',!(0x2e8*0x3+-0x1*0xc29+-0x7e*-0x7)),h(this,'_scriptPre'+'fix',''),h(this,'_time',0x1*-0x6da+0x1246+0x2db*-0x4),h(this,'enableBund'+'les',typeof TextDecoder<'u'),h(this,'frameReque'+'stId'),h(this,'timeScale',-0x7e1*-0x1+-0x50b+-0x2d5),h(this,'maxDeltaTi'+'me',0xa*0x185+0x4b2+-0x13e4+0.1),h(this,'frame',-0x73b+-0x2ea*-0xb+-0x18d3),h(this,'frameGraph',new DC()),h(this,'renderer'),h(this,'scriptsOrd'+'er',[]),h(this,'stats'),h(this,'autoRender',!(0x1d71*0x1+0x2504+0x141*-0x35)),h(this,'renderNext'+'Frame',!(-0x80e*0x2+-0x3*-0x545+0x4e)),h(this,'graphicsDe'+'vice'),h(this,'root'),h(this,'scene'),h(this,'lightmappe'+'r',null),h(this,'loader',new Cn(this)),h(this,'assets'),h(this,'bundles'),h(this,'scenes',new qC(this)),h(this,'scripts',new HC(this)),h(this,'systems',new BC()),h(this,'i18n',new wa(this)),h(this,'keyboard',null),h(this,'mouse',null),h(this,'touch',null),h(this,'gamepads',null),h(this,'elementInp'+'ut',null),h(this,'xr',null),((hn==null?void(-0x1*-0x443+0x7f9*-0x3+-0x128*-0x11):hn['indexOf']('$'))<-0xfab+-0xeba+0x1e65&&w['log']('Powered\x20by'+'\x20PlayCanva'+'s\x20'+hn+'\x20'+$S),ea['_applicati'+'ons'][_0x41f932['id']]=this,_u(this),this['root']=new lt(),this['root']['_enabledIn'+'Hierarchy']=!(0x2bf*0x1+0x1*0xaff+-0xdbe));}['init'](_0x340bc4){const {assetPrefix:_0x5cea22,batchManager:_0x29e726,componentSystems:_0x25b653,elementInput:_0xb44e12,gamepads:_0x361d2e,graphicsDevice:_0x5b8fe6,keyboard:_0x16f8b3,lightmapper:_0xf865d1,mouse:_0x557ab3,resourceHandlers:_0xee77bf,scriptsOrder:_0x299bb7,scriptPrefix:_0x1a71ba,soundManager:_0x4e3f29,touch:_0x5de663,xr:_0x14de8d}=_0x340bc4;w['assert'](_0x5b8fe6,'The\x20applic'+'ation\x20cann'+'ot\x20be\x20crea'+'ted\x20withou'+'t\x20a\x20valid\x20'+'GraphicsDe'+'vice'),this['graphicsDe'+'vice']=_0x5b8fe6,Pe['get'](_0x5b8fe6,Fe)['add'](Z2),Pe['get'](_0x5b8fe6,it)['add'](JI),this['_initDefau'+'ltMaterial'](),this['_initProgr'+'amLibrary'](),this['stats']=new jC(_0x5b8fe6),this['_soundMana'+'ger']=_0x4e3f29,this['scene']=new Et(_0x5b8fe6),this['_registerS'+'ceneImmedi'+'ate'](this['scene']),this['assets']=new mn(this['loader']),_0x5cea22&&(this['assets']['prefix']=_0x5cea22),this['bundles']=new UC(this['assets']),this['scriptsOrd'+'er']=_0x299bb7||[],this['defaultLay'+'erWorld']=new Ot({'name':'World','id':er}),this['defaultLay'+'erDepth']=new Ot({'name':'Depth','id':ps,'enabled':!(-0x1*-0xd65+-0x17*-0x15+0x1*-0xf47),'opaqueSortMode':Yc}),this['defaultLay'+'erSkybox']=new Ot({'name':'Skybox','id':Kp,'opaqueSortMode':Yc}),this['defaultLay'+'erUi']=new Ot({'name':'UI','id':Il,'transparentSortMode':jw}),this['defaultLay'+'erImmediat'+'e']=new Ot({'name':'Immediate','id':Zp,'opaqueSortMode':Yc});const _0x137919=new du('default');_0x137919['pushOpaque'](this['defaultLay'+'erWorld']),_0x137919['pushOpaque'](this['defaultLay'+'erDepth']),_0x137919['pushOpaque'](this['defaultLay'+'erSkybox']),_0x137919['pushTransp'+'arent'](this['defaultLay'+'erWorld']),_0x137919['pushOpaque'](this['defaultLay'+'erImmediat'+'e']),_0x137919['pushTransp'+'arent'](this['defaultLay'+'erImmediat'+'e']),_0x137919['pushTransp'+'arent'](this['defaultLay'+'erUi']),this['scene']['layers']=_0x137919,ia['createPlac'+'eholder'](_0x5b8fe6),this['renderer']=new fl(_0x5b8fe6),this['renderer']['scene']=this['scene'],_0xf865d1&&(this['lightmappe'+'r']=new _0xf865d1(_0x5b8fe6,this['root'],this['scene'],this['renderer'],this['assets']),this['once']('prerender',this['_firstBake'],this)),_0x29e726&&(this['_batcher']=new _0x29e726(_0x5b8fe6,this['root'],this['scene']),this['once']('prerender',this['_firstBatc'+'h'],this)),this['keyboard']=_0x16f8b3||null,this['mouse']=_0x557ab3||null,this['touch']=_0x5de663||null,this['gamepads']=_0x361d2e||null,_0xb44e12&&(this['elementInp'+'ut']=_0xb44e12,this['elementInp'+'ut']['app']=this),this['xr']=_0x14de8d?new _0x14de8d(this):null,this['elementInp'+'ut']&&this['elementInp'+'ut']['attachSele'+'ctEvents'](),this['_scriptPre'+'fix']=_0x1a71ba||'',this['enableBund'+'les']&&this['loader']['addHandler']('bundle',new VC(this)),_0xee77bf['forEach'](_0x29db37=>{const _0x4e57b1=new _0x29db37(this);this['loader']['addHandler'](_0x4e57b1['handlerTyp'+'e'],_0x4e57b1);}),_0x25b653['forEach'](_0x12a6a1=>{this['systems']['add'](new _0x12a6a1(this));}),this['_visibilit'+'yChangeHan'+'dler']=this['onVisibili'+'tyChange']['bind'](this),typeof document<'u'&&(document['hidden']!==void(-0x1503+-0x10f5*0x2+0x124f*0x3)?(this['_hiddenAtt'+'r']='hidden',document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x2154+0x212d+0x28))):document['mozHidden']!==void(0x13af*-0x1+-0x1b42+-0x2ef1*-0x1)?(this['_hiddenAtt'+'r']='mozHidden',document['addEventLi'+'stener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0x1c*0x50+-0x5*-0x5e7+0x2*-0xa61))):document['msHidden']!==void(0xcd5+-0x1b57+0xe82)?(this['_hiddenAtt'+'r']='msHidden',document['addEventLi'+'stener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0x1bcb+0x17a0+0x1*0x42c))):document['webkitHidd'+'en']!==void(-0x1e28*0x1+-0x6f9+0x2521)&&(this['_hiddenAtt'+'r']='webkitHidd'+'en',document['addEventLi'+'stener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(-0xc8e*-0x1+0x1*0x1780+0x240d*-0x1)))),this['tick']=eL(this);}static['getApplica'+'tion'](_0x9dc10b){return _0x9dc10b?ea['_applicati'+'ons'][_0x9dc10b]:Ms();}['_initDefau'+'ltMaterial'](){const _0x498a57=new Ut();_0x498a57['name']='Default\x20Ma'+'terial',xE(this['graphicsDe'+'vice'],_0x498a57);}['_initProgr'+'amLibrary'](){const _0x3e2736=new qA(this['graphicsDe'+'vice'],new Ut());cE(this['graphicsDe'+'vice'],_0x3e2736);}get['soundManag'+'er'](){return this['_soundMana'+'ger'];}get['batcher'](){return w['assert'](this['_batcher'],'BatchManag'+'er\x20has\x20not'+'\x20been\x20crea'+'ted\x20and\x20is'+'\x20required\x20'+'for\x20correc'+'t\x20function'+'ality.'),this['_batcher'];}get['fillMode'](){return this['_fillMode'];}get['resolution'+'Mode'](){return this['_resolutio'+'nMode'];}['configure'](_0x4984ff,_0x53de2a){ot['get'](_0x4984ff,(_0x112f0a,_0x555386)=>{if(_0x112f0a){_0x53de2a(_0x112f0a);return;}const _0x4f4c73=_0x555386['applicatio'+'n_properti'+'es'],_0x5e9fec=_0x555386['scenes'],_0x52ffc5=_0x555386['assets'];this['_parseAppl'+'icationPro'+'perties'](_0x4f4c73,_0x32de7d=>{this['_parseScen'+'es'](_0x5e9fec),this['_parseAsse'+'ts'](_0x52ffc5),_0x53de2a(_0x32de7d||null);});});}['preload'](_0x37bafd){this['fire']('preload:st'+'art');const _0x45fc08=this['assets']['list']({'preload':!(0xcaf+0x193e+-0x25ed*0x1)});if(_0x45fc08['length']===-0x241+-0xf6d+-0x8d7*-0x2){this['fire']('preload:en'+'d'),_0x37bafd();return;}let _0x794f57=0x134b+-0x7a+-0x12d1;const _0x5d171f=()=>{_0x794f57++,this['fire']('preload:pr'+'ogress',_0x794f57/_0x45fc08['length']),_0x794f57===_0x45fc08['length']&&(this['fire']('preload:en'+'d'),_0x37bafd());};_0x45fc08['forEach'](_0x21472d=>{_0x21472d['loaded']?_0x5d171f():(_0x21472d['once']('load',_0x5d171f),_0x21472d['once']('error',_0x5d171f),this['assets']['load'](_0x21472d));});}['_preloadSc'+'ripts'](_0x5640ee,_0xa4d96c){_0xa4d96c();}['_parseAppl'+'icationPro'+'perties'](_0x5cc5ac,_0x9ad85b){if(typeof _0x5cc5ac['maxAssetRe'+'tries']=='number'&&_0x5cc5ac['maxAssetRe'+'tries']>0x137*-0x5+0x59*0x29+-0x82e&&this['loader']['enableRetr'+'y'](_0x5cc5ac['maxAssetRe'+'tries']),_0x5cc5ac['useDeviceP'+'ixelRatio']||(_0x5cc5ac['useDeviceP'+'ixelRatio']=_0x5cc5ac['use_device'+'_pixel_rat'+'io']),_0x5cc5ac['resolution'+'Mode']||(_0x5cc5ac['resolution'+'Mode']=_0x5cc5ac['resolution'+'_mode']),_0x5cc5ac['fillMode']||(_0x5cc5ac['fillMode']=_0x5cc5ac['fill_mode']),this['_width']=_0x5cc5ac['width'],this['_height']=_0x5cc5ac['height'],_0x5cc5ac['useDeviceP'+'ixelRatio']&&(this['graphicsDe'+'vice']['maxPixelRa'+'tio']=window['devicePixe'+'lRatio']),this['setCanvasR'+'esolution'](_0x5cc5ac['resolution'+'Mode'],this['_width'],this['_height']),this['setCanvasF'+'illMode'](_0x5cc5ac['fillMode'],this['_width'],this['_height']),_0x5cc5ac['layers']&&_0x5cc5ac['layerOrder']){const _0x5010b5=new du('applicatio'+'n'),_0x2cd8bb={};for(const _0x315259 in _0x5cc5ac['layers']){const _0x49a8e0=_0x5cc5ac['layers'][_0x315259];_0x49a8e0['id']=parseInt(_0x315259,0x17c7+0x1e7f+-0x363c),_0x49a8e0['enabled']=_0x49a8e0['id']!==ps,_0x2cd8bb[_0x315259]=new Ot(_0x49a8e0);}for(let _0x4308c8=0xf6c+0x1*-0x3ab+-0xbc1,_0x2644cb=_0x5cc5ac['layerOrder']['length'];_0x4308c8<_0x2644cb;_0x4308c8++){const _0x61e397=_0x5cc5ac['layerOrder'][_0x4308c8],_0x51b637=_0x2cd8bb[_0x61e397['layer']];_0x51b637&&(_0x61e397['transparen'+'t']?_0x5010b5['pushTransp'+'arent'](_0x51b637):_0x5010b5['pushOpaque'](_0x51b637),_0x5010b5['subLayerEn'+'abled'][_0x4308c8]=_0x61e397['enabled']);}this['scene']['layers']=_0x5010b5;}if(_0x5cc5ac['batchGroup'+'s']){const _0x20512f=this['batcher'];if(_0x20512f)for(let _0x37abdb=-0x6*-0x3db+-0x22*-0xcc+-0x1*0x323a,_0x3afabc=_0x5cc5ac['batchGroup'+'s']['length'];_0x37abdb<_0x3afabc;_0x37abdb++){const _0x1f629b=_0x5cc5ac['batchGroup'+'s'][_0x37abdb];_0x20512f['addGroup'](_0x1f629b['name'],_0x1f629b['dynamic'],_0x1f629b['maxAabbSiz'+'e'],_0x1f629b['id'],_0x1f629b['layers']);}}_0x5cc5ac['i18nAssets']&&(this['i18n']['assets']=_0x5cc5ac['i18nAssets']),this['_loadLibra'+'ries'](_0x5cc5ac['libraries'],_0x9ad85b);}['_loadLibra'+'ries'](_0x3d5772,_0x2fb827){const _0x249493=_0x3d5772['length'];let _0x25c223=_0x249493;const _0x61a819=/^https?:\/\//;if(_0x249493){const _0x3cab64=(_0x8f3908,_0x17e63d)=>{_0x25c223--,_0x8f3908?_0x2fb827(_0x8f3908):_0x25c223===0xac9+-0xeda+0x15b*0x3&&(this['onLibrarie'+'sLoaded'](),_0x2fb827(null));};for(let _0x4a841e=0x7*-0x30a+-0x1461+-0x1*-0x29a7;_0x4a841e<_0x249493;++_0x4a841e){let _0x2795d9=_0x3d5772[_0x4a841e];!_0x61a819['test'](_0x2795d9['toLowerCas'+'e']())&&this['_scriptPre'+'fix']&&(_0x2795d9=xe['join'](this['_scriptPre'+'fix'],_0x2795d9)),this['loader']['load'](_0x2795d9,'script',_0x3cab64);}}else this['onLibrarie'+'sLoaded'](),_0x2fb827(null);}['_parseScen'+'es'](_0x59ce99){if(_0x59ce99){for(let _0x56d9ff=0xebc+-0x22a3*0x1+-0x1*-0x13e7;_0x56d9ff<_0x59ce99['length'];_0x56d9ff++)this['scenes']['add'](_0x59ce99[_0x56d9ff]['name'],_0x59ce99[_0x56d9ff]['url']);}}['_parseAsse'+'ts'](_0x1d4bfc){const _0x4298b1=[],_0x4eeaed={},_0x5b7791={};for(let _0x5ed79e=0x190c*0x1+-0x1089*0x1+-0x883;_0x5ed79e<this['scriptsOrd'+'er']['length'];_0x5ed79e++){const _0x81b3ee=this['scriptsOrd'+'er'][_0x5ed79e];_0x1d4bfc[_0x81b3ee]&&(_0x4eeaed[_0x81b3ee]=!(-0x3*-0x6bf+-0x1*-0x263f+-0x3a7c),_0x4298b1['push'](_0x1d4bfc[_0x81b3ee]));}if(this['enableBund'+'les']){for(const _0x13e06b in _0x1d4bfc)_0x1d4bfc[_0x13e06b]['type']==='bundle'&&(_0x5b7791[_0x13e06b]=!(0x6*0x2eb+0x1*-0x2020+0xe9e),_0x4298b1['push'](_0x1d4bfc[_0x13e06b]));}for(const _0x13bc6a in _0x1d4bfc)_0x4eeaed[_0x13bc6a]||_0x5b7791[_0x13bc6a]||_0x4298b1['push'](_0x1d4bfc[_0x13bc6a]);for(let _0x19aa13=0x400+0x1*-0x752+0x352;_0x19aa13<_0x4298b1['length'];_0x19aa13++){const _0x201b56=_0x4298b1[_0x19aa13],_0x48ea79=new pe(_0x201b56['name'],_0x201b56['type'],_0x201b56['file'],_0x201b56['data']);if(_0x48ea79['id']=parseInt(_0x201b56['id'],0x240a+0x1b3d*-0x1+-0x8c3),_0x48ea79['preload']=_0x201b56['preload']?_0x201b56['preload']:!(0x6fb+0x1829+0xa61*-0x3),_0x48ea79['loaded']=_0x201b56['type']==='script'&&_0x201b56['data']&&_0x201b56['data']['loadingTyp'+'e']>-0x1ccc+-0x83b+-0x2507*-0x1,_0x48ea79['tags']['add'](_0x201b56['tags']),_0x201b56['i18n']){for(const _0x2f3a85 in _0x201b56['i18n'])_0x48ea79['addLocaliz'+'edAssetId'](_0x2f3a85,_0x201b56['i18n'][_0x2f3a85]);}this['assets']['add'](_0x48ea79);}}['start'](){w['call'](()=>{w['assert'](!this['_alreadySt'+'arted'],'The\x20applic'+'ation\x20can\x20'+'be\x20started'+'\x20only\x20one\x20'+'time.'),this['_alreadySt'+'arted']=!(0xda2+-0xf20+-0x2*-0xbf);}),this['frame']=0x2*-0x80a+-0xa45*0x3+-0x2ee3*-0x1,this['fire']('start',{'timestamp':de(),'target':this}),this['_libraries'+'Loaded']||this['onLibrarie'+'sLoaded'](),this['systems']['fire']('initialize',this['root']),this['fire']('initialize'),this['systems']['fire']('postInitia'+'lize',this['root']),this['systems']['fire']('postPostIn'+'itialize',this['root']),this['fire']('postinitia'+'lize'),this['tick']();}['inputUpdat'+'e'](_0x80a7e){this['controller']&&this['controller']['update'](_0x80a7e),this['mouse']&&this['mouse']['update'](),this['keyboard']&&this['keyboard']['update'](),this['gamepads']&&this['gamepads']['update']();}['update'](_0x26a3f4){this['frame']++,this['graphicsDe'+'vice']['update'](),this['stats']['frame']['updateStar'+'t']=de(),this['systems']['fire'](this['_inTools']?'toolsUpdat'+'e':'update',_0x26a3f4),this['systems']['fire']('animationU'+'pdate',_0x26a3f4),this['systems']['fire']('postUpdate',_0x26a3f4),this['fire']('update',_0x26a3f4),this['inputUpdat'+'e'](_0x26a3f4),this['stats']['frame']['updateTime']=de()-this['stats']['frame']['updateStar'+'t'];}['render'](){this['updateCanv'+'asSize'](),this['graphicsDe'+'vice']['frameStart'](),this['stats']['frame']['renderStar'+'t']=de(),this['fire']('prerender'),this['root']['syncHierar'+'chy'](),this['_batcher']&&this['_batcher']['updateAll'](),fl['_skipRende'+'rCounter']=-0x3*0x563+0x6*-0x404+0x2841,this['renderComp'+'osition'](this['scene']['layers']),this['fire']('postrender'),this['stats']['frame']['renderTime']=de()-this['stats']['frame']['renderStar'+'t'],this['graphicsDe'+'vice']['frameEnd']();}['renderComp'+'osition'](_0x3c1d20){Q['clearGpuMa'+'rkers'](),this['renderer']['update'](_0x3c1d20),this['renderer']['buildFrame'+'Graph'](this['frameGraph'],_0x3c1d20),this['frameGraph']['render'](this['graphicsDe'+'vice']);}['_fillFrame'+'StatsBasic'](_0x13651d,_0xa93f99,_0xd1a916){const _0x26f081=this['stats']['frame'];_0x26f081['dt']=_0xa93f99,_0x26f081['ms']=_0xd1a916,_0x13651d>_0x26f081['_timeToCou'+'ntFrames']?(_0x26f081['fps']=_0x26f081['_fpsAccum'],_0x26f081['_fpsAccum']=-0x1*0x1acf+-0x2119*0x1+0x3be8,_0x26f081['_timeToCou'+'ntFrames']=_0x13651d+(-0x247b+-0x1*-0xda3+-0x1*-0x1ac0)):_0x26f081['_fpsAccum']++,this['stats']['drawCalls']['total']=this['graphicsDe'+'vice']['_drawCalls'+'PerFrame'],this['graphicsDe'+'vice']['_drawCalls'+'PerFrame']=-0x4*-0x3d1+0x95a*-0x2+0x370;}['_fillFrame'+'Stats'](){let _0x1acbd7=this['stats']['frame'];_0x1acbd7['cameras']=this['renderer']['_camerasRe'+'ndered'],_0x1acbd7['materials']=this['renderer']['_materialS'+'witches'],_0x1acbd7['shaders']=this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame'],_0x1acbd7['shadowMapU'+'pdates']=this['renderer']['_shadowMap'+'Updates'],_0x1acbd7['shadowMapT'+'ime']=this['renderer']['_shadowMap'+'Time'],_0x1acbd7['depthMapTi'+'me']=this['renderer']['_depthMapT'+'ime'],_0x1acbd7['forwardTim'+'e']=this['renderer']['_forwardTi'+'me'];const _0x511cf5=this['graphicsDe'+'vice']['_primsPerF'+'rame'];_0x1acbd7['triangles']=_0x511cf5[js]/(0x223e+0x1*-0x25c9+0x38e)+Math['max'](_0x511cf5[Er]-(-0x1*-0x774+0x225d+0x3cd*-0xb),0x266e+0x2*-0xf96+-0x742)+Math['max'](_0x511cf5[oa]-(-0x4d9*-0x4+-0x4*-0x56d+-0x2916),-0x2660+-0xa+0x266a),_0x1acbd7['cullTime']=this['renderer']['_cullTime'],_0x1acbd7['sortTime']=this['renderer']['_sortTime'],_0x1acbd7['skinTime']=this['renderer']['_skinTime'],_0x1acbd7['morphTime']=this['renderer']['_morphTime'],_0x1acbd7['lightClust'+'ers']=this['renderer']['_lightClus'+'ters'],_0x1acbd7['lightClust'+'ersTime']=this['renderer']['_lightClus'+'tersTime'],_0x1acbd7['otherPrimi'+'tives']=0x20f0+0x1a82+-0x3b72;for(let _0xebba85=-0x1c*0x24+-0x69d*-0x5+-0x1d21;_0xebba85<_0x511cf5['length'];_0xebba85++)_0xebba85<js&&(_0x1acbd7['otherPrimi'+'tives']+=_0x511cf5[_0xebba85]),_0x511cf5[_0xebba85]=0x922+-0x7*-0x544+-0x1d*0x196;this['renderer']['_camerasRe'+'ndered']=-0x17f*-0x1+0x13*-0xad+-0x42*-0x2c,this['renderer']['_materialS'+'witches']=-0x9f+0x2108+0x1*-0x2069,this['renderer']['_shadowMap'+'Updates']=0x5*-0x4a3+0x76*-0x2b+-0x65*-0x6d,this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame']=-0xa03+0x1b7*0x9+-0x56c,this['renderer']['_cullTime']=-0x2217*0x1+0x559*-0x5+-0x3cd4*-0x1,this['renderer']['_layerComp'+'ositionUpd'+'ateTime']=-0xcd5+-0x7+-0x66e*-0x2,this['renderer']['_lightClus'+'tersTime']=-0x1*0x242+0x78d+0x10f*-0x5,this['renderer']['_sortTime']=0x2687+-0x3*-0xb0+0x1*-0x2897,this['renderer']['_skinTime']=-0x1193+0x11*0x98+0x77b,this['renderer']['_morphTime']=0xa2*0x14+0x8ec+-0x2*0xaca,this['renderer']['_shadowMap'+'Time']=-0xf95+0x2f4+-0x35*-0x3d,this['renderer']['_depthMapT'+'ime']=-0x45d*-0x1+0xe5*-0x26+0x5ed*0x5,this['renderer']['_forwardTi'+'me']=-0x2091+-0x244b+-0x27*-0x1c4,_0x1acbd7=this['stats']['drawCalls'],_0x1acbd7['forward']=this['renderer']['_forwardDr'+'awCalls'],_0x1acbd7['culled']=this['renderer']['_numDrawCa'+'llsCulled'],_0x1acbd7['depth']=-0x1752+-0x22a*-0x4+-0x1*-0xeaa,_0x1acbd7['shadow']=this['renderer']['_shadowDra'+'wCalls'],_0x1acbd7['skinned']=this['renderer']['_skinDrawC'+'alls'],_0x1acbd7['immediate']=0x1*-0x24e4+-0x181b+-0x3*-0x1455,_0x1acbd7['instanced']=0x9d9+-0x37*-0x23+0x13*-0xea,_0x1acbd7['removedByI'+'nstancing']=-0x337+-0x1ec5+0x21fc,_0x1acbd7['misc']=_0x1acbd7['total']-(_0x1acbd7['forward']+_0x1acbd7['shadow']),this['renderer']['_depthDraw'+'Calls']=0x2633+0xba4+-0x1*0x31d7,this['renderer']['_shadowDra'+'wCalls']=-0x1039+0x1df3+-0xdba,this['renderer']['_forwardDr'+'awCalls']=0x611*0x1+0x64d*-0x2+-0x7*-0xef,this['renderer']['_numDrawCa'+'llsCulled']=0x2635+-0x2533+-0x102,this['renderer']['_skinDrawC'+'alls']=0xdfd+0x14c4+-0x22c1,this['renderer']['_immediate'+'Rendered']=0x10*-0x4a+0x1*-0xf0b+-0x5*-0x3ef,this['renderer']['_instanced'+'DrawCalls']=0x211+-0x136d*-0x1+-0x157e,this['stats']['misc']['renderTarg'+'etCreation'+'Time']=this['graphicsDe'+'vice']['renderTarg'+'etCreation'+'Time'],_0x1acbd7=this['stats']['particles'],_0x1acbd7['updatesPer'+'Frame']=_0x1acbd7['_updatesPe'+'rFrame'],_0x1acbd7['frameTime']=_0x1acbd7['_frameTime'],_0x1acbd7['_updatesPe'+'rFrame']=0x173*0x9+-0x106*-0x10+-0x1d6b,_0x1acbd7['_frameTime']=0x87b*-0x1+0x56e+0x30d;}['setCanvasF'+'illMode'](_0x112969,_0x18327a,_0x2a2ed9){this['_fillMode']=_0x112969,this['resizeCanv'+'as'](_0x18327a,_0x2a2ed9);}['setCanvasR'+'esolution'](_0x1a6432,_0x99fc93,_0x4ec3a6){this['_resolutio'+'nMode']=_0x1a6432,_0x1a6432===wg&&_0x99fc93===void(-0x89*0x7+0xd8+-0x2e7*-0x1)&&(_0x99fc93=this['graphicsDe'+'vice']['canvas']['clientWidt'+'h'],_0x4ec3a6=this['graphicsDe'+'vice']['canvas']['clientHeig'+'ht']),this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x99fc93,_0x4ec3a6);}['isHidden'](){return document[this['_hiddenAtt'+'r']];}['onVisibili'+'tyChange'](){this['isHidden']()?this['_soundMana'+'ger']&&this['_soundMana'+'ger']['suspend']():this['_soundMana'+'ger']&&this['_soundMana'+'ger']['resume']();}['resizeCanv'+'as'](_0x53e8b5,_0x5e01ae){if(!this['_allowResi'+'ze']||this['xr']&&this['xr']['session'])return;const _0x2cd994=window['innerWidth'],_0x452845=window['innerHeigh'+'t'];if(this['_fillMode']===Tg){const _0x274227=this['graphicsDe'+'vice']['canvas']['width']/this['graphicsDe'+'vice']['canvas']['height'],_0x519adf=_0x2cd994/_0x452845;_0x274227>_0x519adf?(_0x53e8b5=_0x2cd994,_0x5e01ae=_0x53e8b5/_0x274227):(_0x5e01ae=_0x452845,_0x53e8b5=_0x5e01ae*_0x274227);}else this['_fillMode']===PC&&(_0x53e8b5=_0x2cd994,_0x5e01ae=_0x452845);return this['graphicsDe'+'vice']['canvas']['style']['width']=_0x53e8b5+'px',this['graphicsDe'+'vice']['canvas']['style']['height']=_0x5e01ae+'px',this['updateCanv'+'asSize'](),{'width':_0x53e8b5,'height':_0x5e01ae};}['updateCanv'+'asSize'](){var _0x5b0133;if(!(!this['_allowResi'+'ze']||(_0x5b0133=this['xr'])!=null&&_0x5b0133['active'])&&this['_resolutio'+'nMode']===wg){const _0x151795=this['graphicsDe'+'vice']['canvas'];this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x151795['clientWidt'+'h'],_0x151795['clientHeig'+'ht']);}}['onLibrarie'+'sLoaded'](){this['_libraries'+'Loaded']=!(-0x3e*-0x3b+0x1ade+-0x2928),this['systems']['rigidbody']&&this['systems']['rigidbody']['onLibraryL'+'oaded']();}['applyScene'+'Settings'](_0x2bd4e9){let _0x561a1b;if(this['systems']['rigidbody']&&typeof Ammo<'u'){const [_0x384670,_0x478bdd,_0xce55b6]=_0x2bd4e9['physics']['gravity'];this['systems']['rigidbody']['gravity']['set'](_0x384670,_0x478bdd,_0xce55b6);}this['scene']['applySetti'+'ngs'](_0x2bd4e9),_0x2bd4e9['render']['hasOwnProp'+'erty']('skybox')&&(_0x2bd4e9['render']['skybox']?(_0x561a1b=this['assets']['get'](_0x2bd4e9['render']['skybox']),_0x561a1b?this['setSkybox'](_0x561a1b):this['assets']['once']('add:'+_0x2bd4e9['render']['skybox'],this['setSkybox'],this)):this['setSkybox'](null));}['setAreaLig'+'htLuts'](_0xdd00d2,_0x2c8214){_0xdd00d2&&_0x2c8214?ia['set'](this['graphicsDe'+'vice'],_0xdd00d2,_0x2c8214):w['warn']('setAreaLig'+'htLuts:\x20LU'+'Ts\x20for\x20are'+'a\x20light\x20ar'+'e\x20not\x20vali'+'d');}['setSkybox'](_0x224977){if(_0x224977!==this['_skyboxAss'+'et']){const _0x5d7393=()=>{this['setSkybox'](null);},_0xc37ca9=()=>{this['scene']['setSkybox'](this['_skyboxAss'+'et']?this['_skyboxAss'+'et']['resources']:null);};this['_skyboxAss'+'et']&&(this['assets']['off']('load:'+this['_skyboxAss'+'et']['id'],_0xc37ca9,this),this['assets']['off']('remove:'+this['_skyboxAss'+'et']['id'],_0x5d7393,this),this['_skyboxAss'+'et']['off']('change',_0xc37ca9,this)),this['_skyboxAss'+'et']=_0x224977,this['_skyboxAss'+'et']&&(this['assets']['on']('load:'+this['_skyboxAss'+'et']['id'],_0xc37ca9,this),this['assets']['once']('remove:'+this['_skyboxAss'+'et']['id'],_0x5d7393,this),this['_skyboxAss'+'et']['on']('change',_0xc37ca9,this),this['scene']['skyboxMip']===0xae2*0x3+-0x3*-0x274+0x239*-0x12&&!this['_skyboxAss'+'et']['loadFaces']&&(this['_skyboxAss'+'et']['loadFaces']=!(0x83*-0x29+-0xd57*0x2+0x2fa9)),this['assets']['load'](this['_skyboxAss'+'et'])),_0xc37ca9();}}['_firstBake'](){var _0x2b7ff6;(_0x2b7ff6=this['lightmappe'+'r'])==null||_0x2b7ff6['bake'](null,this['scene']['lightmapMo'+'de']);}['_firstBatc'+'h'](){var _0x117503;(_0x117503=this['batcher'])==null||_0x117503['generate']();}['_processTi'+'mestamp'](_0x1efcaa){return _0x1efcaa;}['drawLine'](_0x4ecc29,_0x57652f,_0x2bd524,_0x4885a4,_0x185e68){this['scene']['drawLine'](_0x4ecc29,_0x57652f,_0x2bd524,_0x4885a4,_0x185e68);}['drawLines'](_0x35701b,_0x66e725,_0x4953f8=!(0xe48+-0x4a*0x42+0x4cc),_0x4d8a67=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLines'](_0x35701b,_0x66e725,_0x4953f8,_0x4d8a67);}['drawLineAr'+'rays'](_0x53c971,_0x4f07e8,_0x2dbce0=!(-0xe2b+0x461+0x9ca),_0x37d725=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLineAr'+'rays'](_0x53c971,_0x4f07e8,_0x2dbce0,_0x37d725);}['drawWireSp'+'here'](_0x3cabff,_0x11433b,_0x54d703=ie['WHITE'],_0x15b2b4=0x187d+-0x22b6+0xa4d,_0x842369=!(-0x1c86+0x1ec1+-0x23b),_0x257ac6=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawWireSp'+'here'](_0x3cabff,_0x11433b,_0x54d703,_0x15b2b4,_0x842369,_0x257ac6);}['drawWireAl'+'ignedBox'](_0x443658,_0x1525b4,_0x11c3dc=ie['WHITE'],_0x2fd4c4=!(-0x53+-0x7d0+0x823),_0xbde2e5=this['scene']['defaultDra'+'wLayer'],_0x5b7b97){this['scene']['immediate']['drawWireAl'+'ignedBox'](_0x443658,_0x1525b4,_0x11c3dc,_0x2fd4c4,_0xbde2e5,_0x5b7b97);}['drawMeshIn'+'stance'](_0x4a6ea1,_0x4a91c7=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](null,null,null,_0x4a6ea1,_0x4a91c7);}['drawMesh'](_0x30b29f,_0x22ec2c,_0x10b299,_0x5907df=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x22ec2c,_0x10b299,_0x30b29f,null,_0x5907df);}['drawQuad'](_0x1cbc01,_0x50c91f,_0x59c001=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x50c91f,_0x1cbc01,this['scene']['immediate']['getQuadMes'+'h'](),null,_0x59c001);}['drawTextur'+'e'](_0x55db8d,_0x23ecf0,_0x3ec79f,_0x2f9c81,_0x3e3e7c,_0x575f9f,_0x5b6d54=this['scene']['defaultDra'+'wLayer'],_0x2b3e01=!(0x89*0x3e+-0xb2b+-0x1603*0x1)){if(_0x2b3e01===!(0x1f9+0x521+-0x719)&&!this['graphicsDe'+'vice']['isWebGPU'])return;const _0x217cb4=new te();_0x217cb4['setTRS'](new D(_0x55db8d,_0x23ecf0,-0x2259+-0xd*-0xb6+-0x1*-0x191b),le['IDENTITY'],new D(_0x3ec79f,-_0x2f9c81,0x5eb*-0x3+0x1471*-0x1+-0x2*-0x1319)),_0x575f9f||(_0x575f9f=new Xn(),_0x575f9f['cull']=bt,_0x575f9f['setParamet'+'er']('colorMap',_0x3e3e7c),_0x575f9f['shaderDesc']=_0x2b3e01?this['scene']['immediate']['getTexture'+'ShaderDesc'](_0x3e3e7c['encoding']):this['scene']['immediate']['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](),_0x575f9f['update']()),this['drawQuad'](_0x217cb4,_0x575f9f,_0x5b6d54);}['drawDepthT'+'exture'](_0x5b456c,_0x220f93,_0x532565,_0x32fc52,_0x1858ad=this['scene']['defaultDra'+'wLayer']){const _0x12fc6e=new Xn();_0x12fc6e['cull']=bt,_0x12fc6e['shaderDesc']=this['scene']['immediate']['getDepthTe'+'xtureShade'+'rDesc'](),_0x12fc6e['update'](),this['drawTextur'+'e'](_0x5b456c,_0x220f93,_0x532565,_0x32fc52,null,_0x12fc6e,_0x1858ad);}['destroy'](){var _0x131587,_0x5879cd,_0x5b02bb,_0x27a730;if(this['_inFrameUp'+'date']){this['_destroyRe'+'quested']=!(0xe1a*0x1+0x6*0x496+-0x299e);return;}const _0x48dbf1=this['graphicsDe'+'vice']['canvas']['id'];this['fire']('destroy',this),this['off']('librariesl'+'oaded'),typeof document<'u'&&(document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(0xb*-0xa1+0x89*0x2e+-0x11b2)),document['removeEven'+'tListener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0x406+-0x20d3+0x24da)),document['removeEven'+'tListener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x1*0x1145+-0x7f*0x18+0x55c*-0x1)),document['removeEven'+'tListener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(-0x2f*0x53+0x1*0x1aa5+0x7*-0x1a1))),this['_visibilit'+'yChangeHan'+'dler']=null,this['root']['destroy'](),this['root']=null,this['mouse']&&(this['mouse']['off'](),this['mouse']['detach'](),this['mouse']=null),this['keyboard']&&(this['keyboard']['off'](),this['keyboard']['detach'](),this['keyboard']=null),this['touch']&&(this['touch']['off'](),this['touch']['detach'](),this['touch']=null),this['elementInp'+'ut']&&(this['elementInp'+'ut']['detach'](),this['elementInp'+'ut']=null),this['gamepads']&&(this['gamepads']['destroy'](),this['gamepads']=null),this['controller']&&(this['controller']=null),this['systems']['destroy'](),this['scene']['layers']&&this['scene']['layers']['destroy']();const _0xdebb91=this['assets']['list']();for(let _0x29ce67=-0x1*-0x22c2+0xfa4+-0x1*0x3266;_0x29ce67<_0xdebb91['length'];_0x29ce67++)_0xdebb91[_0x29ce67]['unload'](),_0xdebb91[_0x29ce67]['off']();this['assets']['off'](),this['bundles']['destroy'](),this['bundles']=null,this['i18n']['destroy'](),this['i18n']=null;const _0x515bf2=this['loader']['getHandler']('script');_0x515bf2==null||_0x515bf2['clearCache'](),this['loader']['destroy'](),this['loader']=null,this['scene']['destroy'](),this['scene']=null,this['systems']=null,this['context']=null,this['scripts']['destroy'](),this['scripts']=null,this['scenes']['destroy'](),this['scenes']=null,(_0x131587=this['lightmappe'+'r'])==null||_0x131587['destroy'](),this['lightmappe'+'r']=null,this['_batcher']&&(this['_batcher']['destroy'](),this['_batcher']=null),this['_entityInd'+'ex']={},this['defaultLay'+'erDepth']['onDisable']=null,this['defaultLay'+'erDepth']['onEnable']=null,this['defaultLay'+'erDepth']=null,this['defaultLay'+'erWorld']=null,(_0x5879cd=this['xr'])==null||_0x5879cd['end'](),(_0x5b02bb=this['xr'])==null||_0x5b02bb['destroy'](),this['renderer']['destroy'](),this['renderer']=null,this['graphicsDe'+'vice']['destroy'](),this['graphicsDe'+'vice']=null,this['tick']=null,this['off'](),(_0x27a730=this['_soundMana'+'ger'])==null||_0x27a730['destroy'](),this['_soundMana'+'ger']=null,ea['_applicati'+'ons'][_0x48dbf1]=null,Ms()===this&&_u(null),ea['cancelTick'](this);}static['cancelTick'](_0x37756a){_0x37756a['frameReque'+'stId']&&(window['cancelAnim'+'ationFrame'](_0x37756a['frameReque'+'stId']),_0x37756a['frameReque'+'stId']=void(0xac1+-0x2109+0x1648));}['getEntityF'+'romIndex'](_0x3cdde7){return this['_entityInd'+'ex'][_0x3cdde7];}['_registerS'+'ceneImmedi'+'ate'](_0x58c5f6){this['on']('postrender',_0x58c5f6['immediate']['onPostRend'+'er'],_0x58c5f6['immediate']);}};h(ea,'_applicati'+'ons',{});let Ks=ea;const eL=function(_0x2ac116){const _0x4d73f2=_0x2ac116;return function(_0x39ed83,_0x21611f){var _0x1900cd,_0x4acb66,_0x463e3a,_0x1ff125;if(!_0x4d73f2['graphicsDe'+'vice'])return;_0x4d73f2['frameReque'+'stId']&&((_0x4acb66=(_0x1900cd=_0x4d73f2['xr'])==null?void(0x1971+-0x21ff+-0x88e*-0x1):_0x1900cd['session'])==null||_0x4acb66['cancelAnim'+'ationFrame'](_0x4d73f2['frameReque'+'stId']),cancelAnimationFrame(_0x4d73f2['frameReque'+'stId']),_0x4d73f2['frameReque'+'stId']=null),_0x4d73f2['_inFrameUp'+'date']=!(-0x8f2+0x4a*-0x35+0x2*0xc22),_u(_0x4d73f2);const _0x3ac892=_0x4d73f2['_processTi'+'mestamp'](_0x39ed83)||de(),_0x2e009d=_0x3ac892-(_0x4d73f2['_time']||_0x3ac892);let _0x53f1df=_0x2e009d/(0x1ece+-0x9ff+0x1*-0x10e7);if(_0x53f1df=Y['clamp'](_0x53f1df,0x7f0+0x10ea+-0x18da,_0x4d73f2['maxDeltaTi'+'me']),_0x53f1df*=_0x4d73f2['timeScale'],_0x4d73f2['_time']=_0x3ac892,(_0x463e3a=_0x4d73f2['xr'])!=null&&_0x463e3a['session']?_0x4d73f2['frameReque'+'stId']=_0x4d73f2['xr']['session']['requestAni'+'mationFram'+'e'](_0x4d73f2['tick']):_0x4d73f2['frameReque'+'stId']=Ae['browser']||Ae['worker']?requestAnimationFrame(_0x4d73f2['tick']):null,_0x4d73f2['graphicsDe'+'vice']['contextLos'+'t'])return;_0x4d73f2['_fillFrame'+'StatsBasic'](_0x3ac892,_0x53f1df,_0x2e009d),_0x4d73f2['_fillFrame'+'Stats'](),_0x4d73f2['fire']('frameupdat'+'e',_0x2e009d);let _0x1cb4d8=!(0x166a+0x2698+0x8b7*-0x7);_0x21611f?(_0x1cb4d8=!((_0x1ff125=_0x4d73f2['xr'])!=null&&_0x1ff125['update'](_0x21611f)),_0x4d73f2['graphicsDe'+'vice']['defaultFra'+'mebuffer']=_0x21611f['session']['renderStat'+'e']['baseLayer']['framebuffe'+'r']):_0x4d73f2['graphicsDe'+'vice']['defaultFra'+'mebuffer']=null,!_0x1cb4d8&&!_0x4d73f2['stopSort']&&(w['trace'](W0,'----\x20Frame'+'\x20'+_0x4d73f2['frame']),w['trace'](Ld,'--\x20UpdateS'+'tart\x20'+de()['toFixed'](-0x11d3+0x3*-0x71+0x1328)+'ms'),_0x4d73f2['update'](_0x53f1df),_0x4d73f2['fire']('framerende'+'r'),(_0x4d73f2['autoRender']||_0x4d73f2['renderNext'+'Frame'])&&(w['trace'](Ld,'--\x20RenderS'+'tart\x20'+de()['toFixed'](-0xabd*0x2+0xcb9+0x8c3*0x1)+'ms'),_0x4d73f2['render'](),_0x4d73f2['renderNext'+'Frame']=!(0x5*-0x42+0x18d*0x1+-0x42),w['trace'](Ld,'--\x20RenderE'+'nd\x20'+de()['toFixed'](-0x745*-0x4+-0x2a2+-0x1a70)+'ms')),_0x4d73f2['fire']('frameend')),_0x4d73f2['_inFrameUp'+'date']=!(0xe39*-0x1+-0x151d+0x2357),_0x4d73f2['_destroyRe'+'quested']&&_0x4d73f2['destroy']();};};class tL{constructor(){h(this,'elementInp'+'ut'),h(this,'keyboard'),h(this,'mouse'),h(this,'touch'),h(this,'gamepads'),h(this,'scriptPref'+'ix'),h(this,'assetPrefi'+'x'),h(this,'scriptsOrd'+'er'),h(this,'soundManag'+'er'),h(this,'graphicsDe'+'vice'),h(this,'lightmappe'+'r'),h(this,'batchManag'+'er'),h(this,'xr'),h(this,'componentS'+'ystems',[]),h(this,'resourceHa'+'ndlers',[]);}}const mo=new sp();class Uv{constructor(_0x38fc2a,_0xf0a35d,_0x5e92a8){this['scene']=_0x38fc2a,this['light']=_0xf0a35d,this['store'](),_0xf0a35d['numCascade'+'s']=-0xa*-0x257+-0x1315+-0x450,this['scene']['clusteredL'+'ightingEna'+'bled']&&!_0x5e92a8['shadowsEna'+'bled']&&(_0xf0a35d['castShadow'+'s']=!(-0x1083+-0x202b+0x30af)),_0xf0a35d['type']!==ve&&(_0xf0a35d['_node']['getWorldTr'+'ansform'](),_0xf0a35d['getBoundin'+'gSphere'](mo),this['lightBound'+'s']=new De(),this['lightBound'+'s']['center']['copy'](mo['center']),this['lightBound'+'s']['halfExtent'+'s']['set'](mo['radius'],mo['radius'],mo['radius']));}['store'](){this['mask']=this['light']['mask'],this['shadowUpda'+'teMode']=this['light']['shadowUpda'+'teMode'],this['enabled']=this['light']['enabled'],this['intensity']=this['light']['intensity'],this['rotation']=this['light']['_node']['getLocalRo'+'tation']()['clone'](),this['numCascade'+'s']=this['light']['numCascade'+'s'],this['castShadow'+'s']=this['light']['_castShado'+'ws'];}['restore'](){const _0x58cab7=this['light'];_0x58cab7['mask']=this['mask'],_0x58cab7['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x58cab7['enabled']=this['enabled'],_0x58cab7['intensity']=this['intensity'],_0x58cab7['_node']['setLocalRo'+'tation'](this['rotation']),_0x58cab7['numCascade'+'s']=this['numCascade'+'s'],_0x58cab7['_castShado'+'ws']=this['castShadow'+'s'];}['startBake'](){this['light']['enabled']=!(0x4f*-0x36+-0x5e8+-0x12*-0x141),this['light']['_destroySh'+'adowMap'](),this['light']['beginFrame']();}['endBake'](_0xe4f2aa){const _0x3a2961=this['light'];_0x3a2961['enabled']=!(-0x5*0x352+-0x3ab+-0xf*-0x15a),_0x3a2961['shadowMap']&&(_0x3a2961['shadowMap']['cached']&&_0xe4f2aa['add'](_0x3a2961,_0x3a2961['shadowMap']),_0x3a2961['shadowMap']=null);}}const yc=new J();class sL extends Uv{constructor(_0x45c1a3,_0x4a3c20){super(_0x45c1a3['scene'],_0x4a3c20,_0x45c1a3['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['type']===ve?this['light']['bakeNumSam'+'ples']:-0x6a*-0x47+0x1*0x2509+-0x1*0x426e;}['prepareVir'+'tualLight'](_0x395bfb,_0x575df8){const _0x53b8cb=this['light'];if(_0x53b8cb['_node']['setLocalRo'+'tation'](this['rotation']),_0x395bfb>-0x25a6+-0x20e1*-0x1+0x4c5){const _0x5f997=_0x53b8cb['bakeArea'];Nl['circlePoin'+'tDetermini'+'stic'](yc,_0x395bfb,_0x575df8),yc['mulScalar'](_0x5f997*(0x866*0x4+0x1*-0x1669+0x7*-0x199+0.5)),_0x53b8cb['_node']['rotateLoca'+'l'](yc['x'],0x1ac9+0x1df*-0x11+0x283*0x2,yc['y']);}_0x53b8cb['_node']['getWorldTr'+'ansform']();const _0x35098=0x1de4+-0x1*-0x2659+0x1*-0x443b+0.20000000000000018,_0x1a5ac5=Math['pow'](this['intensity'],_0x35098);_0x53b8cb['intensity']=Math['pow'](_0x1a5ac5/_0x575df8,(0x1833+-0x16b0+-0xc1*0x2)/_0x35098);}}const Pg=new D();class Mg extends Uv{constructor(_0x3d1401){const _0x24f8fc=_0x3d1401['scene'],_0x5a5cc7=new lt('AmbientLig'+'ht');_0x5a5cc7['addCompone'+'nt']('light',{'type':'directiona'+'l','affectDynamic':!(-0x23e7+0x25*-0xfa+0x1b*0x2ab),'affectLightmapped':!(-0x2108*0x1+-0x101e+0x3127),'bake':!(-0x98*0x1b+0x5db*-0x4+0x2774),'bakeNumSamples':_0x24f8fc['ambientBak'+'eNumSample'+'s'],'castShadows':!(0x703*-0x5+-0xa1*0x35+0x4464),'normalOffsetBias':0.05,'shadowBias':0.2,'shadowDistance':0x1,'shadowResolution':0x800,'shadowType':$s,'color':ie['WHITE'],'intensity':0x1,'bakeDir':!(0x3*-0x96e+-0x2*0xc5f+0x3509)}),super(_0x24f8fc,_0x5a5cc7['light']['light'],_0x3d1401['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['bakeNumSam'+'ples'];}['prepareVir'+'tualLight'](_0x9ae825,_0x11cfed){Nl['spherePoin'+'tDetermini'+'stic'](Pg,_0x9ae825,_0x11cfed,-0x581+-0xa9*-0x1f+-0xef6,this['scene']['ambientBak'+'eSpherePar'+'t']),this['light']['_node']['lookAt'](Pg['mulScalar'](-(-0x1248+0xf25+0x324))),this['light']['_node']['rotateLoca'+'l'](0x264+-0x3*-0x2c6+-0xa5c,-0xfca+0x105f+-0x95,0x2333+0x2451+-0x4784);const _0x1c0949=-0x5b3*-0x2+0x67*-0x1+0x61*-0x1d+0.20000000000000018,_0x4037b7=(0x1032+0xcf2+-0x1d22)*Math['PI']*this['scene']['ambientBak'+'eSpherePar'+'t'],_0x1845d5=Math['pow'](_0x4037b7,_0x1c0949);this['light']['intensity']=Math['pow'](_0x1845d5/_0x11cfed,(-0x97*0x4+-0xe5*0x29+0x13*0x20e)/_0x1c0949);}}class vc{constructor(_0x41341,_0x5f0acd=null){this['node']=_0x41341,this['component']=_0x41341['render']||_0x41341['model'],_0x5f0acd=_0x5f0acd||this['component']['meshInstan'+'ces'],this['store'](),this['meshInstan'+'ces']=_0x5f0acd,this['bounds']=null,this['renderTarg'+'ets']=[];}['store'](){this['castShadow'+'s']=this['component']['castShadow'+'s'];}['restore'](){this['component']['castShadow'+'s']=this['castShadow'+'s'];}}const iL='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afl'+'oat\x20normpd'+'f3(in\x20vec3'+'\x20v,\x20in\x20flo'+'at\x20sigma)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x200.39894'+'\x20*\x20exp(-0.'+'5\x20*\x20dot(v,'+'\x20v)\x20/\x20(sig'+'ma\x20*\x20sigma'+'))\x20/\x20sigma'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBM'+'(vec4\x20rgbm'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20color\x20='+'\x20(8.0\x20*\x20rg'+'bm.a)\x20*\x20rg'+'bm.rgb;\x0a\x20\x20'+'\x20\x20return\x20c'+'olor\x20*\x20col'+'or;\x0a}\x0a\x0aflo'+'at\x20saturat'+'e(float\x20x)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeRG'+'BM(vec3\x20co'+'lor)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20encoded'+';\x0a\x20\x20\x20\x20enco'+'ded.rgb\x20=\x20'+'pow(color.'+('rgb,\x20vec3('+'0.5));\x0a\x20\x20\x20'+'\x20encoded.r'+'gb\x20*=\x201.0\x20'+'/\x208.0;\x0a\x0a\x20\x20'+'\x20\x20encoded.'+'a\x20=\x20satura'+'te(\x20max(\x20m'+'ax(\x20encode'+'d.r,\x20encod'+'ed.g\x20),\x20ma'+'x(\x20encoded'+'.b,\x201.0\x20/\x20'+'255.0\x20)\x20)\x20'+');\x0a\x20\x20\x20\x20enc'+'oded.a\x20=\x20c'+'eil(encode'+'d.a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20enc'+'oded.rgb\x20/'+'=\x20encoded.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20encode'+'d;\x0a}\x0a\x0avec3'+'\x20decode(ve'+'c4\x20pixel)\x20'+'{\x0a\x20\x20\x20\x20#if\x20'+'HDR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20p'+'ixel.rgb;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eRGBM(pixe'+'l);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0abo'+'ol\x20isUsed('+'vec4\x20pixel'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20HDR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20any(great'+'erThan(pix'+'el.rgb,\x20ve'+'c3(0.0)));'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20pixe'+'l.a\x20>\x200.0;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0avaryi'+'ng\x20vec2\x20vU'+'v0;\x0aunifor'+'m\x20sampler2'+'D\x20source;\x0a'+'uniform\x20ve'+'c2\x20pixelOf'+'fset;\x0aunif'+'orm\x20vec2\x20s'+'igmas;\x0auni'+'form\x20float'+'\x20bZnorm;\x0au'+'niform\x20flo'+'at\x20kernel['+'{MSIZE}];\x0a'+'\x0avoid\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20ve'+'c4\x20pixel\x20='+'\x20texture2D'+'Lod(source'+',\x20vUv0,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20/'+'/\x20lightmap'+'\x20specific\x20'+'optimizati'+'on\x20-\x20skip\x20'+'pixels\x20tha'+'t\x20were\x20not'+'\x20baked\x0a\x20\x20\x20'+'\x20//\x20this\x20a'+'lso\x20allows'+'\x20dilate\x20fi'+'lter\x20that\x20'+'work\x20on\x20th'+'e\x20output\x20o'+'f\x20this\x20to\x20'+'work\x20corre'+'ctly,\x20as\x20i'+'t\x20depends\x20'+'on\x20.a\x20bein'+'g\x20zero\x0a\x20\x20\x20'+'\x20//\x20to\x20dil'+'ate,\x20which'+'\x20the\x20follo'+'wing\x20blur\x20'+'filter\x20wou'+'ld\x20otherwi'+'se\x20modify\x0a')+('\x20\x20\x20\x20if\x20(!i'+'sUsed(pixe'+'l))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20p'+'ixel;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20sigma\x20-'+'\x20controls\x20'+'blurriness'+'\x20based\x20on\x20'+'a\x20pixel\x20di'+'stance\x0a\x20\x20\x20'+'\x20float\x20sig'+'ma\x20=\x20sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'float\x20bSig'+'ma\x20=\x20sigma'+'s.y;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20pixel'+'Hdr\x20=\x20deco'+'de(pixel);'+'\x0a\x20\x20\x20\x20vec3\x20'+'accumulate'+'dHdr\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20float\x20ac'+'cumulatedF'+'actor\x20=\x200.'+'000001;\x20\x20/'+'/\x20avoid\x20di'+'vision\x20by\x20'+'zero\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20ou'+'t\x20the\x20texe'+'ls\x0a\x20\x20\x20\x20con'+'st\x20int\x20kSi'+'ze\x20=\x20({MSI'+'ZE}\x20-\x201)\x20/'+'\x202;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x20-kSize;\x20i'+'\x20<=\x20kSize;'+'\x20++i)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20j\x20=\x20-'+'kSize;\x20j\x20<'+'=\x20kSize;\x20+'+'+j)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sample'+'\x20the\x20pixel'+'\x20with\x20offs'+'et\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'coord\x20=\x20vU'+'v0\x20+\x20vec2('+'float(i),\x20'+'float(j))\x20'+'*\x20pixelOff'+'set;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20pix\x20=\x20te'+'xture2DLod'+'(source,\x20c'+'oord,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x20-\x20o'+'nly\x20use\x20ba'+'ked\x20pixels'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(isU'+'sed(pix))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20hdr\x20=\x20d'+'ecode(pix)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20bilatera'+'l\x20factors\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20factor\x20='+'\x20kernel[kS'+'ize\x20+\x20j]\x20*'+'\x20kernel[kS')+('ize\x20+\x20i];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fact'+'or\x20*=\x20norm'+'pdf3(hdr\x20-'+'\x20pixelHdr,'+'\x20bSigma)\x20*'+'\x20bZnorm;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ccumulate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20accu'+'mulatedHdr'+'\x20+=\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20+=\x20facto'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20finalHD'+'R\x20=\x20accumu'+'latedHdr\x20/'+'\x20accumulat'+'edFactor;\x0a'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(finalHDR,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'encodeRGBM'+'(finalHDR)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a'),rL='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0auniform\x20'+'sampler2D\x20'+'source;\x0aun'+'iform\x20vec2'+'\x20pixelOffs'+'et;\x0a\x0abool\x20'+'isUsed(vec'+'4\x20pixel)\x20{'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20an'+'y(greaterT'+'han(pixel.'+'rgb,\x20vec3('+'0.0)));\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20pixel.a'+'\x20>\x200.0;\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20c'+'\x20=\x20texture'+'2DLod(sour'+'ce,\x20vUv0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'c\x20=\x20isUsed'+'(c)\x20?\x20c\x20:\x20'+'texture2DL'+'od(source,'+'\x20vUv0\x20-\x20pi'+'xelOffset,'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20v'+'ec2(0,\x20-pi'+'xelOffset.'+'y),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(pix'+'elOffset.x'+',\x20-pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(-pixelOf'+'fset.x,\x200)'+',\x200.0);\x0a\x20\x20'+'\x20\x20c\x20=\x20isUs'+'ed(c)\x20?\x20c\x20'+':\x20texture2'+'DLod(sourc'+'e,\x20vUv0\x20+\x20'+'vec2(pixel'+'Offset.x,\x20'+'0),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(-pi'+'xelOffset.'+'x,\x20pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(0,\x20pixel'+'Offset.y),'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20p'+'ixelOffset'+',\x200.0);\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20c;\x0a'+'}\x0a',aL='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afn'+'\x20normpdf3('+'v:\x20vec3f,\x20'+'sigma:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x200.39894\x20'+'*\x20exp(-0.5'+'\x20*\x20dot(v,\x20'+'v)\x20/\x20(sigm'+'a\x20*\x20sigma)'+')\x20/\x20sigma;'+'\x0a}\x0a\x0afn\x20dec'+'odeRGBM(rg'+'bm:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20(8'+'.0\x20*\x20rgbm.'+'a)\x20*\x20rgbm.'+'rgb;\x0a\x20\x20\x20\x20r'+'eturn\x20colo'+'r\x20*\x20color;'+'\x0a}\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeRGBM'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'var\x20encode'+'d:\x20vec4f;\x0a'+'\x20\x20\x20\x20let\x20rg'+'b_processe'+('d\x20=\x20pow(co'+'lor.rgb,\x20v'+'ec3f(0.5))'+'\x20*\x20(1.0\x20/\x20'+'8.0);\x0a\x20\x20\x20\x20'+'encoded\x20=\x20'+'vec4f(rgb_'+'processed,'+'\x200.0);\x0a\x0a\x20\x20'+'\x20\x20let\x20max_'+'g_b\x20=\x20max('+'\x20encoded.g'+',\x20max(\x20enc'+'oded.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20);\x0a\x20\x20\x20\x20l'+'et\x20max_rgb'+'\x20=\x20max(\x20en'+'coded.r,\x20m'+'ax_g_b\x20);\x0a'+'\x20\x20\x20\x20encode'+'d.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20enco'+'ded.a\x20=\x20ce'+'il(encoded'+'.a\x20*\x20255.0'+')\x20/\x20255.0;'+'\x0a\x0a\x20\x20\x20\x20enco'+'ded\x20=\x20vec4'+'f(encoded.'+'rgb\x20/\x20enco'+'ded.a,\x20enc'+'oded.a);\x0a\x20'+'\x20\x20\x20return\x20'+'encoded;\x0a}'+'\x0a\x0afn\x20decod'+'e(pixel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20pixel.'+'rgb;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'decodeRGBM'+'(pixel);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a\x0afn\x20isUs'+'ed(pixel:\x20'+'vec4f)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0ava'+'r\x20source:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20sourceSam'+'pler:\x20samp'+'ler;\x0aunifo'+'rm\x20kernel:'+'\x20array<f32'+',\x20{MSIZE}>'+';\x0auniform\x20'+'pixelOffse'+'t:\x20vec2f;\x0a'+'uniform\x20si'+'gmas:\x20vec2'+'f;\x0auniform'+'\x20bZnorm:\x20f'+'32;\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20pixel\x20'+'=\x20textureS'+'ampleLevel'+'(source,\x20s'+'ourceSampl'+'er,\x20input.')+('vUv0,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'lightmap\x20s'+'pecific\x20op'+'timization'+'\x20-\x20skip\x20pi'+'xels\x20that\x20'+'were\x20not\x20b'+'aked\x0a\x20\x20\x20\x20/'+'/\x20this\x20als'+'o\x20allows\x20d'+'ilate\x20filt'+'er\x20that\x20wo'+'rk\x20on\x20the\x20'+'output\x20of\x20'+'this\x20to\x20wo'+'rk\x20correct'+'ly,\x20as\x20it\x20'+'depends\x20on'+'\x20.a\x20being\x20'+'zero\x0a\x20\x20\x20\x20/'+'/\x20to\x20dilat'+'e,\x20which\x20t'+'he\x20followi'+'ng\x20blur\x20fi'+'lter\x20would'+'\x20otherwise'+'\x20modify\x0a\x20\x20'+'\x20\x20if\x20(!isU'+'sed(pixel)'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20pix'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20range\x20sig'+'ma\x20-\x20contr'+'ols\x20blurri'+'ness\x20based'+'\x20on\x20a\x20pixe'+'l\x20distance'+'\x0a\x20\x20\x20\x20let\x20s'+'igma\x20=\x20uni'+'form.sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'let\x20bSigma'+'\x20=\x20uniform'+'.sigmas.y;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'pixelHdr\x20='+'\x20decode(pi'+'xel);\x0a\x20\x20\x20\x20'+'var\x20accumu'+'latedHdr\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20var'+'\x20accumulat'+'edFactor\x20='+'\x200.000001;'+'\x20\x20//\x20avoid'+'\x20division\x20'+'by\x20zero\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20out\x20the\x20t'+'exels\x0a\x20\x20\x20\x20'+'const\x20kSiz'+'e\x20=\x20({MSIZ'+'E}\x20-\x201)\x20/\x20'+'2;\x0a\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x20-kSiz'+'e;\x20i\x20<=\x20kS'+'ize;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(var\x20j:\x20i3'+'2\x20=\x20-kSize'+';\x20j\x20<=\x20kSi'+'ze;\x20j\x20=\x20j\x20'+'+\x201)\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20pixel\x20'+'with\x20offse'+'t\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20co'+'ord\x20=\x20inpu'+'t.vUv0\x20+\x20v'+'ec2f(f32(i')+('),\x20f32(j))'+'\x20*\x20uniform'+'.pixelOffs'+'et;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'pix\x20=\x20text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20co'+'ord,\x200.0);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x20-\x20on'+'ly\x20use\x20bak'+'ed\x20pixels\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(isUs'+'ed(pix))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20hdr\x20=\x20dec'+'ode(pix);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'bilateral\x20'+'factors\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20fa'+'ctor\x20=\x20uni'+'form.kerne'+'l[u32(kSiz'+'e\x20+\x20j)].el'+'ement\x20*\x20un'+'iform.kern'+'el[u32(kSi'+'ze\x20+\x20i)].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20factor'+'\x20=\x20factor\x20'+'*\x20normpdf3'+'(hdr\x20-\x20pix'+'elHdr,\x20bSi'+'gma)\x20*\x20uni'+'form.bZnor'+'m;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20accumul'+'ate\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'accumulate'+'dHdr\x20=\x20acc'+'umulatedHd'+'r\x20+\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20=\x20accumu'+'latedFacto'+'r\x20+\x20factor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20let'+'\x20finalHDR\x20'+'=\x20accumula'+'tedHdr\x20/\x20a'+'ccumulated'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20#if\x20HDR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalHDR,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20e'+'ncodeRGBM('+'finalHDR);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),nL='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0avar\x20so'+'urce:\x20text'+'ure_2d<f32'+'>;\x0avar\x20sou'+'rceSampler'+':\x20sampler;'+'\x0auniform\x20p'+'ixelOffset'+':\x20vec2f;\x0a\x0a'+'fn\x20isUsed('+'pixel:\x20vec'+'4f)\x20->\x20boo'+'l\x20{\x0a\x20\x20\x20\x20#i'+'fdef\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0a@fr'+'agment\x0afn\x20'+'fragmentMa'+'in(input:\x20'+'FragmentIn'+'put)\x20->\x20Fr'+'agmentOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20c:\x20vec4'+'f\x20=\x20textur'+'eSampleLev'+'el(source,'+'\x20sourceSam'+'pler,\x20inpu'+'t.vUv0,\x200.'+'0);\x0a\x20\x20\x20\x20c\x20'+'=\x20select(t'+'extureSamp'+'leLevel(so'+'urce,\x20sour'+'ceSampler,'+'\x20input.vUv'+'0\x20-\x20unifor'+'m.pixelOff'+'set,\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20-un'+'iform.pixe'+'lOffset.y)'+',\x200.0),\x20c,'+'\x20isUsed(c)'+');\x0a\x20\x20\x20\x20c\x20='+'\x20select(te'+'xtureSampl'+'eLevel(sou'+'rce,\x20sourc'+'eSampler,\x20'+'input.vUv0'+'\x20+\x20vec2f(u'+'niform.pix'+'elOffset.x'+',\x20-uniform'+'.pixelOffs'+'et.y),\x200.0'+'),\x20c,\x20isUs'+'ed(c));\x0a\x20\x20'+'\x20\x20c\x20=\x20sele'+'ct(texture'+'SampleLeve'+'l(source,\x20'+'sourceSamp'+'ler,\x20input'+'.vUv0\x20+\x20ve'+'c2f(-unifo'+'rm.pixelOf'+'fset.x,\x200.'+'0),\x200.0),\x20'+'c,\x20isUsed('+'c));\x0a\x20\x20\x20\x20c'+'\x20=\x20select('+'textureSam'+'pleLevel(s'+'ource,\x20sou'+'rceSampler'+',\x20input.vU'+'v0\x20+\x20vec2f'+'(uniform.p'+('ixelOffset'+'.x,\x200.0),\x20'+'0.0),\x20c,\x20i'+'sUsed(c));'+'\x0a\x20\x20\x20\x20c\x20=\x20s'+'elect(text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20in'+'put.vUv0\x20+'+'\x20vec2f(-un'+'iform.pixe'+'lOffset.x,'+'\x20uniform.p'+'ixelOffset'+'.y),\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20uni'+'form.pixel'+'Offset.y),'+'\x200.0),\x20c,\x20'+'isUsed(c))'+';\x0a\x20\x20\x20\x20c\x20=\x20'+'select(tex'+'tureSample'+'Level(sour'+'ce,\x20source'+'Sampler,\x20i'+'nput.vUv0\x20'+'+\x20uniform.'+'pixelOffse'+'t,\x200.0),\x20c'+',\x20isUsed(c'+'));\x0a\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20FragmentO'+'utput;\x0a\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20c;\x0a\x20'+'\x20\x20\x20return\x20'+'output;\x0a}\x0a'),Dg=-0xb8a+-0x1*-0x962+0x1*0x237,oL={'glslBilateralDeNoisePS':iL,'glslDilatePS':rL},lL={'wgslBilateralDeNoisePS':aL,'wgslDilatePS':nL};class cL{constructor(_0x15cc05){h(this,'shaderDila'+'te',[]),h(this,'shaderDeno'+'ise',[]),(this['device']=_0x15cc05,Pe['get'](this['device'],Fe)['add'](oL),Pe['get'](this['device'],it)['add'](lL),this['constantTe'+'xSource']=_0x15cc05['scope']['resolve']('source'),this['constantPi'+'xelOffset']=_0x15cc05['scope']['resolve']('pixelOffse'+'t'),this['pixelOffse'+'t']=new Float32Array(0x1*0x2d3+-0x159a+0x12c9),this['sigmas']=null,this['constantSi'+'gmas']=null,this['kernel']=null);}['setSourceT'+'exture'](_0x138b81){this['constantTe'+'xSource']['setValue'](_0x138b81);}['prepare'](_0x186c6f,_0x4df0c4){this['pixelOffse'+'t'][-0x11*-0x49+0x1104+-0x15dd]=(0xee5+0x11b*0x11+-0x21af)/_0x186c6f,this['pixelOffse'+'t'][0x3f5*-0x5+0xc65*-0x1+-0x1*-0x202f]=(0x49*-0x51+0x10c7*-0x1+0x27e1)/_0x4df0c4,this['constantPi'+'xelOffset']['setValue'](this['pixelOffse'+'t']);}['prepareDen'+'oise'](_0x21b4c6,_0x543fe0,_0x3c5152){const _0x125ca0=_0x3c5152?0x1*0x23c7+-0x1b5d+-0x6*0x167:-0xce0+0x683+0x1*0x65e;if(!this['shaderDeno'+'ise'][_0x125ca0]){const _0x2c673e=new Map();_0x2c673e['set']('{MSIZE}',0x1*0xeff+0x1b7a+-0x2*0x1535),_0x3c5152&&_0x2c673e['set']('HDR',''),this['shaderDeno'+'ise'][_0x125ca0]=$t['createShad'+'er'](this['device'],{'uniqueName':'lmBilatera'+'lDeNoise-'+(_0x3c5152?'hdr':'rgbm'),'attributes':{'vertex_position':Me},'vertexGLSL':Pe['get'](this['device'],Fe)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Pe['get'](this['device'],it)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':Pe['get'](this['device'],Fe)['get']('glslBilate'+'ralDeNoise'+'PS'),'fragmentWGSL':Pe['get'](this['device'],it)['get']('wgslBilate'+'ralDeNoise'+'PS'),'fragmentDefines':_0x2c673e}),this['sigmas']=new Float32Array(0x39c*0x4+0x1*0x469+-0x12d7),this['constantSi'+'gmas']=this['device']['scope']['resolve']('sigmas'),this['constantKe'+'rnel']=this['device']['scope']['resolve']('kernel[0]'),this['bZnorm']=this['device']['scope']['resolve']('bZnorm');}this['sigmas'][0x15eb*0x1+-0x1*-0x1aff+-0x30ea]=_0x21b4c6,this['sigmas'][0xc88+-0x1*0x260f+0x1988]=_0x543fe0,this['constantSi'+'gmas']['setValue'](this['sigmas']),this['evaluateDe'+'noiseUnifo'+'rms'](_0x21b4c6,_0x543fe0);}['getDenoise'](_0x5731e2){const _0x437bef=_0x5731e2?-0x1a12+0x1a38+0x2*-0x13:0x9f*-0x9+0x1053+-0xabb;return this['shaderDeno'+'ise'][_0x437bef];}['getDilate'](_0x1a3deb,_0x55f4a1){const _0x4db878=_0x55f4a1?-0x4*-0x5ad+-0x25d2+0xf*0x102:-0xe05*-0x2+-0x1*-0x1ba9+-0x1bd9*0x2;if(!this['shaderDila'+'te'][_0x4db878]){const _0x5d31e3=_0x55f4a1?'#define\x20HD'+'R\x0a':'';this['shaderDila'+'te'][_0x4db878]=$t['createShad'+'er'](_0x1a3deb,{'uniqueName':'lmDilate-'+(_0x55f4a1?'hdr':'rgbm'),'attributes':{'vertex_position':Me},'vertexGLSL':Pe['get'](this['device'],Fe)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Pe['get'](this['device'],it)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':_0x5d31e3+Pe['get'](this['device'],Fe)['get']('glslDilate'+'PS'),'fragmentWGSL':_0x5d31e3+Pe['get'](this['device'],it)['get']('wgslDilate'+'PS')});}return this['shaderDila'+'te'][_0x4db878];}['evaluateDe'+'noiseUnifo'+'rms'](_0x5aa1c8,_0x573ab7){function _0x492d33(_0x5c66e6,_0x584ed3){return(-0x30*0xd+0x16*0xad+-0xc6e+0.39894)*Math['exp'](-(-0x18ea+0x1d*0xd9+0x55+0.5)*_0x5c66e6*_0x5c66e6/(_0x584ed3*_0x584ed3))/_0x584ed3;}this['kernel']=this['kernel']||new Float32Array(Dg);const _0x344500=this['kernel'],_0x53bf21=Math['floor']((Dg-(0x18e3+-0x3b*-0x1+-0x191d))/(0x1a7a+0x223d+0x3cb5*-0x1));for(let _0x52b6bd=0xc2a+-0x1*0x24ca+-0x628*-0x4;_0x52b6bd<=_0x53bf21;++_0x52b6bd){const _0x2c0be4=_0x492d33(_0x52b6bd,_0x5aa1c8);_0x344500[_0x53bf21+_0x52b6bd]=_0x2c0be4,_0x344500[_0x53bf21-_0x52b6bd]=_0x2c0be4;}this['constantKe'+'rnel']['setValue'](this['kernel']);const _0x570c2d=(-0x8ca+-0xba1+0x146c)/_0x492d33(0x114+0x1f4b+-0x205f*0x1,_0x573ab7);this['bZnorm']['setValue'](_0x570c2d);}}class hL extends ys{constructor(_0x2fac4f,_0x43f117,_0x427b24,_0x530e3d,_0x1727b8,_0x2d7d5f){super(_0x2fac4f),h(this,'viewBindGr'+'oups',[]),(this['renderer']=_0x43f117,this['camera']=_0x427b24,this['worldClust'+'ers']=_0x530e3d,this['receivers']=_0x1727b8,this['lightArray']=_0x2d7d5f);}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x4de2ab=>{_0x4de2ab['defaultUni'+'formBuffer']['destroy'](),_0x4de2ab['destroy']();}),this['viewBindGr'+'oups']['length']=-0x1514+0x14*0xdf+-0x1*-0x3a8;}['execute'](){const _0x4ee309=this['device'];Q['pushGpuMar'+'ker'](_0x4ee309,'Lightmappe'+'r');const {renderer:_0x53f7e6,camera:_0x306df1,receivers:_0x5e8efd,renderTarget:_0x6764e7,worldClusters:_0x47e4a0,lightArray:_0x181ecc}=this;_0x53f7e6['renderForw'+'ardLayer'](_0x306df1,_0x6764e7,null,void(-0x1*0x1d4d+0x1*-0x1171+-0x1*-0x2ebe),Aa,this['viewBindGr'+'oups'],{'meshInstances':_0x5e8efd,'splitLights':_0x181ecc,'lightClusters':_0x47e4a0}),Q['popGpuMark'+'er'](_0x4ee309);}}const dL=0x1*-0xb7f+-0x2d*0x1b+0x3a*0x6b,fL=-0x52c+0x7d8*-0x2+0x14dc,uL=0x6a8+-0x1c39+0x1592*0x1,xc=new D();class pL{constructor(_0x379373,_0x526066,_0x52a841,_0x2481e7,_0x301b54){this['device']=_0x379373,this['root']=_0x526066,this['scene']=_0x52a841,this['renderer']=_0x2481e7,this['assets']=_0x301b54,this['shadowMapC'+'ache']=_0x2481e7['shadowMapC'+'ache'],this['_tempSet']=new Set(),this['_initCalle'+'d']=!(-0x16e9+-0x188a+0x4*0xbdd),this['passMateri'+'als']=[],this['ambientAOM'+'aterial']=null,this['fog']='',this['ambientLig'+'ht']=new ie(),this['renderTarg'+'ets']=new Map(),this['stats']={'renderPasses':0x0,'lightmapCount':0x0,'totalRenderTime':0x0,'forwardTime':0x0,'fboTime':0x0,'shadowMapTime':0x0,'compileTime':0x0,'shadersLinked':0x0};}['destroy'](){var _0x19f43f;zi['decRef'](this['blackTex']),this['blackTex']=null,zi['destroy'](),this['device']=null,this['root']=null,this['scene']=null,this['renderer']=null,this['assets']=null,(_0x19f43f=this['camera'])==null||_0x19f43f['destroy'](),this['camera']=null;}['initBake'](_0x1abdac){if(this['bakeHDR']=this['scene']['lightmapPi'+'xelFormat']!==Ne,!this['_initCalle'+'d']){this['_initCalle'+'d']=!(0xac8+-0x1733*0x1+0xc6b),this['lightmapFi'+'lters']=new cL(_0x1abdac),this['constantBa'+'keDir']=_0x1abdac['scope']['resolve']('bakeDir'),this['materials']=[],this['blackTex']=new _e(this['device'],{'width':0x4,'height':0x4,'format':Ne,'type':Zi,'name':'lightmapBl'+'ack'}),zi['incRef'](this['blackTex']);const _0x5d4c49=new Fl();_0x5d4c49['clearColor']['set'](-0x18c+-0x2480+0x260c,-0x1c67+0x18*0xcc+-0x1*-0x947,-0x1*-0x20f1+0x1a*-0x162+0x303*0x1,0x59*-0x37+-0x1*-0x2091+-0x1*0xd72),_0x5d4c49['clearColor'+'Buffer']=!(0xf2*-0x17+-0x20b+0x17c9*0x1),_0x5d4c49['clearDepth'+'Buffer']=!(0x523*-0x4+0x1e83+-0x9f6),_0x5d4c49['clearStenc'+'ilBuffer']=!(-0x60d*-0x1+-0x1c4d+-0xd3*-0x1b),_0x5d4c49['frustumCul'+'ling']=!(-0x10f4+-0x859+0x194e),_0x5d4c49['projection']=En,_0x5d4c49['aspectRati'+'o']=-0x1*0x1f3+0x1*0xd03+-0xb0f,_0x5d4c49['node']=new Ie(),this['camera']=_0x5d4c49,this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=Ll,this['camera']['shaderPara'+'ms']['toneMappin'+'g']=sm;}if(this['scene']['clusteredL'+'ightingEna'+'bled']){const _0x123e95=new Mv(_0x1abdac['supportsAr'+'eaLights'],_0x1abdac['maxTexture'+'Size'],()=>{});this['lightingPa'+'rams']=_0x123e95;const _0x1dc93c=this['scene']['lighting'];_0x123e95['shadowsEna'+'bled']=_0x1dc93c['shadowsEna'+'bled'],_0x123e95['shadowAtla'+'sResolutio'+'n']=_0x1dc93c['shadowAtla'+'sResolutio'+'n'],_0x123e95['cookiesEna'+'bled']=_0x1dc93c['cookiesEna'+'bled'],_0x123e95['cookieAtla'+'sResolutio'+'n']=_0x1dc93c['cookieAtla'+'sResolutio'+'n'],_0x123e95['areaLights'+'Enabled']=_0x1dc93c['areaLights'+'Enabled'],_0x123e95['cells']=new D(-0xe*-0x10f+0x1d67+-0x161b*0x2,-0x13da+0x721+0x146*0xa,0x50b*-0x4+0x3*0xc36+-0x1073),_0x123e95['maxLightsP'+'erCell']=0x1820+0x2e4*0x2+-0x2*0xef2,this['worldClust'+'ers']=new cu(_0x1abdac),this['worldClust'+'ers']['name']='ClusterLig'+'htmapper';}}['finishBake'](_0x8dd5f2){this['materials']=[];function _0x402cfd(_0x226ac5){zi['decRef'](_0x226ac5['colorBuffe'+'r']),_0x226ac5['destroy']();}this['renderTarg'+'ets']['forEach'](_0xef6090=>{_0x402cfd(_0xef6090);}),this['renderTarg'+'ets']['clear'](),_0x8dd5f2['forEach'](_0x42d079=>{_0x42d079['renderTarg'+'ets']['forEach'](_0x246a9d=>{_0x402cfd(_0x246a9d);}),_0x42d079['renderTarg'+'ets']['length']=0x1*-0x1349+0x8*-0x203+0xbcb*0x3;}),this['ambientAOM'+'aterial']=null,this['worldClust'+'ers']&&(this['worldClust'+'ers']['destroy'](),this['worldClust'+'ers']=null);}['createMate'+'rialForPas'+'s'](_0x5e0dec,_0x92c358,_0x23e36c){const _0x2f64c8=new Ut();return _0x2f64c8['name']='lmMaterial'+'-pass:'+_0x92c358+'-ambient:'+_0x23e36c,_0x2f64c8['setDefine']('UV1LAYOUT',''),_0x2f64c8['setDefine']('LIT_LIGHTM'+'AP_BAKING',''),_0x92c358===fL?(_0x2f64c8['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'COLOR',''),_0x23e36c?_0x2f64c8['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'ADD_AMBIEN'+'T',''):_0x2f64c8['ambient']=new ie(0x1187*-0x1+-0x42*-0x8+0x6b*0x25,-0x4f*-0x3b+-0x243d*0x1+0x1208,0x65c+-0x1cff+0x16a3),this['bakeHDR']||_0x2f64c8['setDefine']('LIGHTMAP_R'+'GBM',''),_0x2f64c8['lightMap']=this['blackTex']):(_0x2f64c8['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'DIR',''),_0x2f64c8['setDefine']('STD_LIGHTM'+'AP_DIR','')),_0x2f64c8['cull']=bt,_0x2f64c8['forceUv1']=!(-0x4*-0x848+0x1ab6*-0x1+-0x66a),_0x2f64c8['update'](),_0x2f64c8;}['createMate'+'rials'](_0x4c6a8e,_0xdc0c26,_0x1640dc){for(let _0xc601a0=0x7*0x457+-0x901*0x4+0x5a3*0x1;_0xc601a0<_0x1640dc;_0xc601a0++)this['passMateri'+'als'][_0xc601a0]||(this['passMateri'+'als'][_0xc601a0]=this['createMate'+'rialForPas'+'s'](_0xdc0c26,_0xc601a0,!(-0x2530+-0x238c*0x1+0x48bd)));this['ambientAOM'+'aterial']||(this['ambientAOM'+'aterial']=this['createMate'+'rialForPas'+'s'](_0xdc0c26,0xb75+0xd59+-0x4f6*0x5,!(0x804*0x3+-0x550+-0x16*0xda)),this['ambientAOM'+'aterial']['onUpdateSh'+'ader']=function(_0x4323fd){return _0x4323fd['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0x128b+-0x207c+0xdf1),_0x4323fd['litOptions']['separateAm'+'bient']=!(-0x1*0x8ed+-0x4a7*-0x2+0x1*-0x61),_0x4323fd;});}['createText'+'ure'](_0x5636b4,_0x27e010){return new _e(this['device'],{'profilerHint':vy,'width':_0x5636b4,'height':_0x5636b4,'format':this['scene']['lightmapPi'+'xelFormat'],'mipmaps':!(-0x3*0x59d+-0xebe+0x1f96),'type':this['bakeHDR']?Ds:Zi,'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x27e010});}['collectMod'+'els'](_0x409781,_0x4fc2cb,_0x25c1d2){var _0x5ac0de,_0x3d41a0,_0x2a004d;if(!_0x409781['enabled'])return;let _0x506aec;if((_0x5ac0de=_0x409781['model'])!=null&&_0x5ac0de['model']&&((_0x3d41a0=_0x409781['model'])!=null&&_0x3d41a0['enabled'])&&(_0x25c1d2&&_0x25c1d2['push'](new vc(_0x409781)),_0x409781['model']['lightmappe'+'d']&&_0x4fc2cb&&(_0x506aec=_0x409781['model']['model']['meshInstan'+'ces'])),(_0x2a004d=_0x409781['render'])!=null&&_0x2a004d['enabled']&&(_0x25c1d2&&_0x25c1d2['push'](new vc(_0x409781)),_0x409781['render']['lightmappe'+'d']&&_0x4fc2cb&&(_0x506aec=_0x409781['render']['meshInstan'+'ces'])),_0x506aec){let _0x2e8cff=!(0x1b47+0x1*-0x9df+-0x1168);for(let _0x361e07=0x1cd*0x7+-0xba0+0xfb*-0x1;_0x361e07<_0x506aec['length'];_0x361e07++)if(!_0x506aec[_0x361e07]['mesh']['vertexBuff'+'er']['format']['hasUv1']){w['log']('Lightmappe'+'r\x20-\x20node\x20['+_0x409781['name']+(']\x20contains'+'\x20meshes\x20wi'+'thout\x20requ'+'ired\x20uv1,\x20'+'excluding\x20'+'it\x20from\x20ba'+'king.')),_0x2e8cff=!(0x43*-0x77+-0x1*-0x1dd1+0x155);break;}if(_0x2e8cff){const _0x2112bd=[];for(let _0x571ae1=-0x78*0x3a+-0x597+0x20c7;_0x571ae1<_0x506aec['length'];_0x571ae1++){const _0x118c52=_0x506aec[_0x571ae1]['mesh'];this['_tempSet']['has'](_0x118c52)?_0x4fc2cb['push'](new vc(_0x409781,[_0x506aec[_0x571ae1]])):_0x2112bd['push'](_0x506aec[_0x571ae1]),this['_tempSet']['add'](_0x118c52);}this['_tempSet']['clear'](),_0x2112bd['length']>-0x1a05+-0x21a5*0x1+0x1*0x3baa&&_0x4fc2cb['push'](new vc(_0x409781,_0x2112bd));}}for(let _0x19c72f=-0x2009+-0x6*0x40e+0x385d*0x1;_0x19c72f<_0x409781['_children']['length'];_0x19c72f++)this['collectMod'+'els'](_0x409781['_children'][_0x19c72f],_0x4fc2cb,_0x25c1d2);}['prepareSha'+'dowCasters'](_0x7bee51){const _0x1b9444=[];for(let _0x3f4c2c=-0x2557+-0x111c+0x3673;_0x3f4c2c<_0x7bee51['length'];_0x3f4c2c++){const _0x1056cf=_0x7bee51[_0x3f4c2c]['component'];if(_0x1056cf['castShadow'+'s']=_0x1056cf['castShadow'+'sLightmap'],_0x1056cf['castShadow'+'sLightmap']){const _0x15445c=_0x7bee51[_0x3f4c2c]['meshInstan'+'ces'];for(let _0x2c831e=0x2*0x20b+-0x1ae5+0x16cf*0x1;_0x2c831e<_0x15445c['length'];_0x2c831e++)_0x15445c[_0x2c831e]['visibleThi'+'sFrame']=!(0x1*-0x1256+-0x3*0x71d+0x5ab*0x7),_0x1b9444['push'](_0x15445c[_0x2c831e]);}}return _0x1b9444;}['updateTran'+'sforms'](_0x487b10){for(let _0x148b33=-0x36a*-0x3+-0x834+-0x3a*0x9;_0x148b33<_0x487b10['length'];_0x148b33++){const _0x184d37=_0x487b10[_0x148b33]['meshInstan'+'ces'];for(let _0x56b398=0x1f0f+-0x593*0x5+-0x330;_0x56b398<_0x184d37['length'];_0x56b398++)_0x184d37[_0x56b398]['node']['getWorldTr'+'ansform']();}}['calculateL'+'ightmapSiz'+'e'](_0x3ed1ca){let _0x255dd3;const _0x59850b=this['scene']['lightmapSi'+'zeMultipli'+'er']||0x1*0xd18+0x47*0x2a+-0x6*0x41d,_0x2d9075=xc;let _0x5ed03c,_0x5d9fe0;_0x3ed1ca['model']?(_0x5d9fe0=_0x3ed1ca['model']['lightmapSi'+'zeMultipli'+'er'],_0x3ed1ca['model']['asset']?(_0x255dd3=this['assets']['get'](_0x3ed1ca['model']['asset'])['data'],_0x255dd3['area']&&(_0x5ed03c=_0x255dd3['area'])):_0x3ed1ca['model']['_area']&&(_0x255dd3=_0x3ed1ca['model'],_0x255dd3['_area']&&(_0x5ed03c=_0x255dd3['_area']))):_0x3ed1ca['render']&&(_0x5d9fe0=_0x3ed1ca['render']['lightmapSi'+'zeMultipli'+'er'],_0x3ed1ca['render']['type']!=='asset'&&_0x3ed1ca['render']['_area']&&(_0x255dd3=_0x3ed1ca['render'],_0x255dd3['_area']&&(_0x5ed03c=_0x255dd3['_area'])));const _0x306bf4={'x':0x1,'y':0x1,'z':0x1,'uv':0x1};_0x5ed03c&&(_0x306bf4['x']=_0x5ed03c['x'],_0x306bf4['y']=_0x5ed03c['y'],_0x306bf4['z']=_0x5ed03c['z'],_0x306bf4['uv']=_0x5ed03c['uv']);const _0x2d5f46=_0x5d9fe0||0x1*0xbed+-0x164e+0xa62;_0x306bf4['x']*=_0x2d5f46,_0x306bf4['y']*=_0x2d5f46,_0x306bf4['z']*=_0x2d5f46;const _0x1c889b=_0x3ed1ca['render']||_0x3ed1ca['model'],_0x1247e4=this['computeNod'+'eBounds'](_0x1c889b['meshInstan'+'ces']);_0x2d9075['copy'](_0x1247e4['halfExtent'+'s']);let _0x1a9e72=_0x306bf4['x']*_0x2d9075['y']*_0x2d9075['z']+_0x306bf4['y']*_0x2d9075['x']*_0x2d9075['z']+_0x306bf4['z']*_0x2d9075['x']*_0x2d9075['y'];return _0x1a9e72/=_0x306bf4['uv'],_0x1a9e72=Math['sqrt'](_0x1a9e72),Math['min'](Y['nextPowerO'+'fTwo'](_0x1a9e72*_0x59850b),this['scene']['lightmapMa'+'xResolutio'+'n']||dL);}['setLightma'+'pping'](_0x9ff27e,_0x453982,_0x35f5bd,_0x3ef687){for(let _0xbaca2a=0x1*-0x14f+0x2463+-0x2314;_0xbaca2a<_0x9ff27e['length'];_0xbaca2a++){const _0x472374=_0x9ff27e[_0xbaca2a],_0x37d8f3=_0x472374['meshInstan'+'ces'];for(let _0x282e5f=0x1*0x2061+-0x9fb+-0x1666;_0x282e5f<_0x37d8f3['length'];_0x282e5f++){const _0x16dfcb=_0x37d8f3[_0x282e5f];if(_0x16dfcb['setLightma'+'pped'](_0x453982),_0x453982){_0x3ef687&&(_0x16dfcb['_shaderDef'+'s']|=_0x3ef687),_0x16dfcb['mask']=di;for(let _0x251fd3=-0x4b9*0x4+-0x1f5*-0x1+0x55*0x33;_0x251fd3<_0x35f5bd;_0x251fd3++){const _0x530ec3=_0x472374['renderTarg'+'ets'][_0x251fd3]['colorBuffe'+'r'];_0x530ec3['minFilter']=vt,_0x530ec3['magFilter']=vt,_0x16dfcb['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][_0x251fd3],_0x530ec3);}}}}}['bake'](_0x316d01,_0x4bb236=jc){const _0x141b3a=this['device'],_0x3feb69=de();this['scene']['_updateSky'+'Mesh'](),_0x141b3a['fire']('lightmappe'+'r:start',{'timestamp':_0x3feb69,'target':this}),this['stats']['renderPass'+'es']=-0x25*0xba+-0x48*-0x59+0x4f*0x6,this['stats']['shadowMapT'+'ime']=0x458*0x5+-0x6e8+-0xed0,this['stats']['forwardTim'+'e']=-0x12*-0x1cd+-0x3*-0x6e+0x4*-0x86d;const _0x5a7b8=_0x141b3a['_shaderSta'+'ts']['linked'],_0x41efa2=_0x141b3a['_renderTar'+'getCreatio'+'nTime'],_0x47d95c=_0x141b3a['_shaderSta'+'ts']['compileTim'+'e'],_0x14346f=[],_0x1df27f=[];if(_0x316d01){for(let _0x4505f7=0xc01+-0x1e57+-0x92b*-0x2;_0x4505f7<_0x316d01['length'];_0x4505f7++)this['collectMod'+'els'](_0x316d01[_0x4505f7],_0x14346f,null);this['collectMod'+'els'](this['root'],null,_0x1df27f);}else this['collectMod'+'els'](this['root'],_0x14346f,_0x1df27f);if(Q['pushGpuMar'+'ker'](this['device'],'LMBake'),_0x14346f['length']>-0x1669+-0x11b6+0x281f){this['renderer']['shadowRend'+'erer']['frameUpdat'+'e']();const _0x521f76=_0x4bb236===jc?0x227a*-0x1+-0x4*0x146+0x2794*0x1:-0x1a90+-0x1c*-0x7b+0xd1d;this['setLightma'+'pping'](_0x14346f,!(-0x2499+0x1dd9+-0xf7*-0x7),_0x521f76),this['initBake'](_0x141b3a),this['bakeIntern'+'al'](_0x521f76,_0x14346f,_0x1df27f);let _0x543ba5=ou;_0x4bb236===jc&&(_0x543ba5|=uv),this['scene']['ambientBak'+'e']&&(_0x543ba5|=pv),this['setLightma'+'pping'](_0x14346f,!(-0x565*0x7+-0x77*0x4+0x279f),_0x521f76,_0x543ba5),this['finishBake'](_0x14346f);}Q['popGpuMark'+'er'](this['device']);const _0x1e22db=de();this['stats']['totalRende'+'rTime']=_0x1e22db-_0x3feb69,this['stats']['shadersLin'+'ked']=_0x141b3a['_shaderSta'+'ts']['linked']-_0x5a7b8,this['stats']['compileTim'+'e']=_0x141b3a['_shaderSta'+'ts']['compileTim'+'e']-_0x47d95c,this['stats']['fboTime']=_0x141b3a['_renderTar'+'getCreatio'+'nTime']-_0x41efa2,this['stats']['lightmapCo'+'unt']=_0x14346f['length'],_0x141b3a['fire']('lightmappe'+'r:end',{'timestamp':_0x1e22db,'target':this});}['allocateTe'+'xtures'](_0x18a20b,_0x4ffacc){for(let _0x4cd6b4=0x1*-0x733+0x23b*0x1+0x4f8;_0x4cd6b4<_0x18a20b['length'];_0x4cd6b4++){const _0x203f56=_0x18a20b[_0x4cd6b4],_0xed6836=this['calculateL'+'ightmapSiz'+'e'](_0x203f56['node']);for(let _0x2e3d75=-0x1810+0x1506+0x2*0x185;_0x2e3d75<_0x4ffacc;_0x2e3d75++){const _0x360643=this['createText'+'ure'](_0xed6836,'lightmappe'+'r_lightmap'+'_'+_0x4cd6b4);zi['incRef'](_0x360643),_0x203f56['renderTarg'+'ets'][_0x2e3d75]=new gt({'colorBuffer':_0x360643,'depth':!(-0xebe*0x1+-0x176b+0x262a)});}if(!this['renderTarg'+'ets']['has'](_0xed6836)){const _0x53e496=this['createText'+'ure'](_0xed6836,'lightmappe'+'r_temp_lig'+'htmap_'+_0xed6836);zi['incRef'](_0x53e496),this['renderTarg'+'ets']['set'](_0xed6836,new gt({'colorBuffer':_0x53e496,'depth':!(0x7d1+-0xeb4+-0x2*-0x372)}));}}}['prepareLig'+'htsToBake'](_0xf03935,_0x75137a){if(this['scene']['ambientBak'+'e']){const _0xc08d50=new Mg(this);_0x75137a['push'](_0xc08d50);}const _0x56be63=this['renderer']['lights'];for(let _0x364559=0x1b91+-0x1b22+-0x6f;_0x364559<_0x56be63['length'];_0x364559++){const _0x631587=_0x56be63[_0x364559],_0x107cf0=new sL(this,_0x631587);_0xf03935['push'](_0x107cf0),_0x631587['enabled']&&(_0x631587['mask']&fi)!==-0x2191*-0x1+-0x9*0x9+-0x2140&&(_0x631587['mask']=fi|di|Ss,_0x631587['shadowUpda'+'teMode']=_0x631587['type']===ve?lm:xr,_0x75137a['push'](_0x107cf0));}_0x75137a['sort']();}['restoreLig'+'hts'](_0x4cb968){for(let _0x223feb=-0x12cc*0x1+0x1c47+-0x97b*0x1;_0x223feb<_0x4cb968['length'];_0x223feb++)_0x4cb968[_0x223feb]['restore']();}['setupScene'](){this['ambientLig'+'ht']['copy'](this['scene']['ambientLig'+'ht']),this['scene']['ambientBak'+'e']||this['scene']['ambientLig'+'ht']['set'](0x1a23+0x2*-0xd69+0xaf,-0x390+0x17c9*-0x1+0x1b59,-0x1bf1*-0x1+-0x13d9+-0x818),this['renderer']['setSceneCo'+'nstants'](),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Contrast')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Contrast']),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Brightness')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Brightness']);}['restoreSce'+'ne'](){this['scene']['ambientLig'+'ht']['copy'](this['ambientLig'+'ht']);}['computeNod'+'eBounds'](_0x17264f){const _0x2d96be=new De();if(_0x17264f['length']>-0x19f0*-0x1+0x1273*0x1+-0x2c63){_0x2d96be['copy'](_0x17264f[0x1d59+0x1*0x8f5+0x1327*-0x2]['aabb']);for(let _0x1ada7e=0xcf*0x1b+-0x1147+-0x5*0xe9;_0x1ada7e<_0x17264f['length'];_0x1ada7e++)_0x2d96be['add'](_0x17264f[_0x1ada7e]['aabb']);}return _0x2d96be;}['computeNod'+'esBounds'](_0x41c835){for(let _0x522f38=0xd+0x1*0x1d3f+-0x12c*0x19;_0x522f38<_0x41c835['length'];_0x522f38++){const _0x97bd4e=_0x41c835[_0x522f38]['meshInstan'+'ces'];_0x41c835[_0x522f38]['bounds']=this['computeNod'+'eBounds'](_0x97bd4e);}}['computeBou'+'nds'](_0x59f30c){const _0x2e913d=new De();for(let _0x4ace86=0x4*0x7e3+-0x1*0x204d+0x1*0xc1;_0x4ace86<_0x59f30c['length'];_0x4ace86++){_0x2e913d['copy'](_0x59f30c[0x2012+0x175f*-0x1+-0x11*0x83]['aabb']);for(let _0x4ae622=0x1*0x1a43+0x1*-0x23d4+0x992;_0x4ae622<_0x59f30c['length'];_0x4ae622++)_0x2e913d['add'](_0x59f30c[_0x4ae622]['aabb']);}return _0x2e913d;}['backupMate'+'rials'](_0x471655){for(let _0x223bd9=0x10c1+0x2a5*-0x2+-0xb77;_0x223bd9<_0x471655['length'];_0x223bd9++)this['materials'][_0x223bd9]=_0x471655[_0x223bd9]['material'];}['restoreMat'+'erials'](_0x8d774d){for(let _0x29447d=0x1*0xeb5+0x2194+-0x3049;_0x29447d<_0x8d774d['length'];_0x29447d++)_0x8d774d[_0x29447d]['material']=this['materials'][_0x29447d];}['lightCamer'+'aPrepare'](_0x1f2a94,_0x49339f){const _0x3f0f7d=_0x49339f['light'];let _0x50f8f0;return _0x3f0f7d['type']===Ze&&(_0x50f8f0=_0x3f0f7d['getRenderD'+'ata'](null,-0x2*-0xfcd+0x43*0x1+-0x1fdd)['shadowCame'+'ra'],_0x50f8f0['_node']['setPositio'+'n'](_0x3f0f7d['_node']['getPositio'+'n']()),_0x50f8f0['_node']['setRotatio'+'n'](_0x3f0f7d['_node']['getRotatio'+'n']()),_0x50f8f0['_node']['rotateLoca'+'l'](-(-0x166*0x1+-0x1386+0x1546),0x72d+0x13*-0x1ae+-0x83f*-0x3,-0x515*-0x3+-0x4b3*-0x2+-0x18a5),_0x50f8f0['projection']=ni,_0x50f8f0['nearClip']=_0x3f0f7d['attenuatio'+'nEnd']/(0x1198+-0x1248+0x15*0x38),_0x50f8f0['farClip']=_0x3f0f7d['attenuatio'+'nEnd'],_0x50f8f0['aspectRati'+'o']=-0x225e+-0x4*-0x336+0x1587,_0x50f8f0['fov']=_0x3f0f7d['_outerCone'+'Angle']*(0xb*0x2ab+0x785+-0x2*0x126e),this['renderer']['updateCame'+'raFrustum'](_0x50f8f0)),_0x50f8f0;}['lightCamer'+'aPrepareAn'+'dCull'](_0x14ea96,_0x4f3a98,_0x17920d,_0x435c5c){const _0x3a1327=_0x14ea96['light'];let _0x580d15=!(0x256+-0x1d4*0xb+-0x145*-0xe);if(_0x3a1327['type']===ve){xc['copy'](_0x435c5c['center']),xc['y']+=_0x435c5c['halfExtent'+'s']['y'],this['camera']['node']['setPositio'+'n'](xc),this['camera']['node']['setEulerAn'+'gles'](-(-0x108*-0xf+0x209c+-0x2fba),0x196a*0x1+0x5a5+-0x1f0f,-0xa*-0x1ae+0x1636+-0x2702),this['camera']['nearClip']=-0x790+-0x2149+-0x28d9*-0x1,this['camera']['farClip']=_0x435c5c['halfExtent'+'s']['y']*(0x2ea+-0x23*0x2+-0x2a2);const _0x4e90a0=Math['max'](_0x435c5c['halfExtent'+'s']['x'],_0x435c5c['halfExtent'+'s']['z']);this['camera']['orthoHeigh'+'t']=_0x4e90a0;}else _0x14ea96['lightBound'+'s']['intersects'](_0x4f3a98['bounds'])||(_0x580d15=!(0x210c+-0x146b*0x1+-0xca0));if(_0x3a1327['type']===Ze){let _0x47a14e=!(-0x15b*-0x8+0x61d*0x1+-0x10f4);const _0x1e4779=_0x4f3a98['meshInstan'+'ces'];for(let _0x2725ac=-0x23a4+0x6*-0x18f+0x1a*0x1bb;_0x2725ac<_0x1e4779['length'];_0x2725ac++)if(_0x1e4779[_0x2725ac]['_isVisible'](_0x17920d)){_0x47a14e=!(-0x1*0xc61+-0x1ac9+0x45a*0x9);break;}_0x47a14e||(_0x580d15=!(-0x20ac+0x1f4a+0x163));}return _0x580d15;}['setupLight'+'Array'](_0x3bfbfe,_0x3f3b00){_0x3bfbfe[ve]['length']=-0x1cc8+-0xd82+0x2a4a,_0x3bfbfe[Ke]['length']=-0xaed+-0x875*0x1+-0x1362*-0x1,_0x3bfbfe[Ze]['length']=0x4c2+-0x1d7e+0x18bc,_0x3bfbfe[_0x3f3b00['type']][-0x22f*0x1+-0x13*0x1c9+-0x2*-0x120d]=_0x3f3b00,_0x3f3b00['visibleThi'+'sFrame']=!(0x1c78+0x2309*0x1+0x152b*-0x3);}['renderShad'+'owMap'](_0x1d18c5,_0x2ed576,_0x393d43,_0x39ff05){const _0x5e1789=_0x39ff05['light'],_0x4b0c86=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x2883b8=_0x5e1789['castShadow'+'s']&&(!_0x4b0c86||this['scene']['lighting']['shadowsEna'+'bled']);if(!_0x2ed576&&_0x2883b8){if(!_0x5e1789['shadowMap']&&!_0x4b0c86&&(_0x5e1789['shadowMap']=this['shadowMapC'+'ache']['get'](this['device'],_0x5e1789)),_0x5e1789['type']===ve){this['renderer']['_shadowRen'+'dererDirec'+'tional']['cull'](_0x5e1789,_0x1d18c5,this['camera'],_0x393d43);const _0x4798e7=this['renderer']['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x5e1789,this['camera']);_0x4798e7==null||_0x4798e7['render']();}else{if(this['device']['isWebGPU'])return w['warnOnce']('Lightmappe'+'r\x20on\x20WebGP'+'U\x20does\x20not'+'\x20yet\x20suppo'+'rt\x20spot\x20an'+'d\x20omni\x20sha'+'dows.'),!(0x1a0+-0x1*0x1c1f+0x1a7f);this['renderer']['_shadowRen'+'dererLocal']['cull'](_0x5e1789,_0x1d18c5,_0x393d43),this['renderer']['shadowRend'+'erer']['render'](_0x5e1789,this['camera'],!(-0x2b3*0x1+-0x261*-0x3+-0x46f));}}return!(-0x401+-0xefc+0x12fd);}['postproces'+'sTextures'](_0x55e847,_0x1d775e,_0x35aae7){const _0x5f2f5a=this['lightmapFi'+'lters']['getDilate'](_0x55e847,this['bakeHDR']);let _0x5184f7;const _0xec29cc=this['scene']['lightmapFi'+'lterEnable'+'d'];_0xec29cc&&(this['lightmapFi'+'lters']['prepareDen'+'oise'](this['scene']['lightmapFi'+'lterRange'],this['scene']['lightmapFi'+'lterSmooth'+'ness'],this['bakeHDR']),_0x5184f7=this['lightmapFi'+'lters']['getDenoise'](this['bakeHDR'])),_0x55e847['setBlendSt'+'ate'](pt['NOBLEND']),_0x55e847['setDepthSt'+'ate'](Yt['NODEPTH']),_0x55e847['setStencil'+'State'](null,null);for(let _0x380cc4=-0x200*0x7+0x359*0x6+-0x616;_0x380cc4<_0x1d775e['length'];_0x380cc4++){const _0x398d5e=_0x1d775e[_0x380cc4];Q['pushGpuMar'+'ker'](this['device'],'LMPost:'+_0x380cc4);for(let _0x3cdae4=0x1df9+0x2309+-0x1*0x4102;_0x3cdae4<_0x35aae7;_0x3cdae4++){const _0x3a83c4=_0x398d5e['renderTarg'+'ets'][_0x3cdae4],_0x31928c=_0x3a83c4['colorBuffe'+'r'],_0xe79c9d=this['renderTarg'+'ets']['get'](_0x31928c['width']),_0x39534d=_0xe79c9d['colorBuffe'+'r'];this['lightmapFi'+'lters']['prepare'](_0x31928c['width'],_0x31928c['height']);for(let _0x5bd926=-0xffe+-0x5db*-0x2+0x448;_0x5bd926<-0x12*-0x1b9+-0x2c5+0x1a*-0x116;_0x5bd926++)this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x31928c),Ar(_0x55e847,_0xe79c9d,_0xec29cc&&_0x3cdae4===0xa2c+-0x3e5+-0x647&&_0x5bd926===0x2*-0x128+0xe4+0xb6*0x2?_0x5184f7:_0x5f2f5a),this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x39534d),Ar(_0x55e847,_0x3a83c4,_0x5f2f5a);}Q['popGpuMark'+'er'](this['device']);}}['bakeIntern'+'al'](_0x3f6060,_0xeda463,_0x37dba7){const _0x57af90=this['scene'],_0x152e39=_0x57af90['layers'],_0x4b737b=this['device'],_0x290880=_0x57af90['clusteredL'+'ightingEna'+'bled'];this['createMate'+'rials'](_0x4b737b,_0x57af90,_0x3f6060),this['setupScene'](),_0x152e39['_update'](),this['computeNod'+'esBounds'](_0xeda463),this['allocateTe'+'xtures'](_0xeda463,_0x3f6060),this['renderer']['collectLig'+'hts'](_0x152e39);const _0x387914=[],_0xf02fc7=[];this['prepareLig'+'htsToBake'](_0x387914,_0xf02fc7),this['updateTran'+'sforms'](_0x37dba7);const _0x2f1998=this['prepareSha'+'dowCasters'](_0x37dba7);this['renderer']['updateCpuS'+'kinMatrice'+'s'](_0x2f1998),this['renderer']['gpuUpdate'](_0x2f1998);const _0x2b322a=this['computeBou'+'nds'](_0x2f1998);let _0x452226,_0x22c1ae,_0x42a994,_0x1dc1f2;for(_0x452226=-0x1bd6+0xc8a+0xf4c;_0x452226<_0xeda463['length'];_0x452226++)for(_0x42a994=_0xeda463[_0x452226]['meshInstan'+'ces'],_0x22c1ae=0xf43*-0x2+0x1*0x1ce5+0x1a1;_0x22c1ae<_0x42a994['length'];_0x22c1ae++)_0x1dc1f2=_0x42a994[_0x22c1ae],_0x1dc1f2['setLightma'+'pped'](!(0x1*-0x1d93+-0x12b8+-0x232*-0x16)),_0x1dc1f2['mask']=fi,_0x1dc1f2['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][-0x6*-0x305+-0x2f*-0xb5+-0x3359],this['blackTex']),_0x1dc1f2['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][0xca*-0x2b+0x2567*0x1+0xc*-0x4a],this['blackTex']);for(_0x22c1ae=0x13*0x10d+-0x7fb+-0xbfc;_0x22c1ae<_0xf02fc7['length'];_0x22c1ae++)_0xf02fc7[_0x22c1ae]['light']['enabled']=!(-0xc*0x194+0x1507+-0x216);const _0x225d02=[[],[],[]];let _0x57ab87,_0x349313,_0x22d29=!(-0xbb5+-0x21*-0x12a+0x1ab4*-0x1);for(_0x452226=-0x61*0x3+-0x5b9*-0x2+-0xa4f;_0x452226<_0xf02fc7['length'];_0x452226++){const _0x36ad5f=_0xf02fc7[_0x452226],_0x2bdcc9=_0x36ad5f instanceof Mg,_0x3fe9f9=_0x36ad5f['light']['type']===ve;let _0x3623c7=_0x36ad5f['numVirtual'+'Lights'];_0x3f6060>0x21ec+-0x1c*-0x73+-0x1*0x2e7f&&_0x3623c7>0x1b05+0x492+-0x2*0xfcb&&_0x36ad5f['light']['bakeDir']&&(_0x3623c7=0x2*0x54b+0x39*0x3e+-0x3*0x821,w['warn']('Lightmappe'+'r\x27s\x20BAKE_C'+'OLORDIR\x20mo'+'de\x20is\x20not\x20'+'compatible'+'\x20with\x20Ligh'+'t\x27s\x20bakeNu'+'mSamples\x20l'+'arger\x20than'+'\x20one.\x20Forc'+'ing\x20it\x20to\x20'+'one.'));for(let _0x421567=-0xb44+-0x9*0x2ce+0x2482;_0x421567<_0x3623c7;_0x421567++){Q['pushGpuMar'+'ker'](_0x4b737b,'Light:'+_0x36ad5f['light']['_node']['name']+':'+_0x421567),_0x3623c7>-0x982*-0x4+0x584*0x2+0x310f*-0x1&&_0x36ad5f['prepareVir'+'tualLight'](_0x421567,_0x3623c7),_0x36ad5f['startBake']();let _0x2831fa=!(-0x1992+0x7*0x232+-0xc9*-0xd);const _0xd8559=this['lightCamer'+'aPrepare'](_0x4b737b,_0x36ad5f);for(_0x349313=-0x176f+-0x1ff9+-0xc*-0x49e;_0x349313<_0xeda463['length'];_0x349313++){const _0x50bfea=_0xeda463[_0x349313];if(_0x42a994=_0x50bfea['meshInstan'+'ces'],!this['lightCamer'+'aPrepareAn'+'dCull'](_0x36ad5f,_0x50bfea,_0xd8559,_0x2b322a))continue;this['setupLight'+'Array'](_0x225d02,_0x36ad5f['light']);const _0x4be1bc=_0x3fe9f9?[]:[_0x36ad5f['light']];for(_0x290880&&this['renderer']['lightTextu'+'reAtlas']['update'](_0x4be1bc,this['lightingPa'+'rams']),_0x2831fa=this['renderShad'+'owMap'](_0x152e39,_0x2831fa,_0x2f1998,_0x36ad5f),_0x290880&&this['worldClust'+'ers']['update'](_0x4be1bc,this['lightingPa'+'rams']),this['backupMate'+'rials'](_0x42a994),_0x57ab87=-0x2161+-0x1c6b+0x46a*0xe;_0x57ab87<_0x3f6060&&!(_0x57ab87>-0x489*0x3+0x1c6a+0x11*-0xdf&&_0x421567>0xcea+-0x1*-0x1b59+-0x2843*0x1||_0x2bdcc9&&_0x57ab87>-0x35*0xd+-0x893+-0xe*-0xce);_0x57ab87++){Q['pushGpuMar'+'ker'](_0x4b737b,'LMPass:'+_0x57ab87);const _0x108c06=_0x50bfea['renderTarg'+'ets'][_0x57ab87],_0x2cc727=_0x50bfea['renderTarg'+'ets'][_0x57ab87]['colorBuffe'+'r']['width'],_0x56ec55=this['renderTarg'+'ets']['get'](_0x2cc727),_0x686ab8=_0x56ec55['colorBuffe'+'r'];_0x57ab87===0x6b*0x13+0x726+0x1*-0xf17?_0x22d29=_0x57af90['updateShad'+'ers']:_0x22d29&&(_0x57af90['updateShad'+'ers']=!(-0x1593+0x1326+0x26d));let _0x665313=this['passMateri'+'als'][_0x57ab87];for(_0x2bdcc9&&_0x421567+(-0x18e5+-0x7a7*-0x1+0x113f*0x1)===_0x3623c7&&_0x57ab87===-0xea2*-0x1+-0x1426*0x1+0x584&&(_0x665313=this['ambientAOM'+'aterial']),_0x22c1ae=0x102d*-0x1+0x2211+-0x11e4;_0x22c1ae<_0x42a994['length'];_0x22c1ae++)_0x42a994[_0x22c1ae]['material']=_0x665313;if(this['renderer']['updateShad'+'ers'](_0x42a994),_0x57ab87===uL&&this['constantBa'+'keDir']['setValue'](_0x36ad5f['light']['bakeDir']?0x2546+-0x1e2d+-0x38c*0x2:-0xad9*0x3+-0x1fb0+-0x105*-0x3f),_0x4b737b['isWebGPU']){const _0x4c42c2=new hL(_0x4b737b,this['renderer'],this['camera'],_0x290880?this['worldClust'+'ers']:null,_0x42a994,_0x225d02);_0x4c42c2['init'](_0x56ec55),_0x4c42c2['render'](),_0x4c42c2['destroy']();}else this['renderer']['setCamera'](this['camera'],_0x56ec55,!(0x14a6+-0x9df*0x3+-0x1cb*-0x5)),_0x290880&&this['worldClust'+'ers']['activate'](),this['renderer']['_forwardTi'+'me']=-0x4*0x5e1+-0x15e+0x18e2,this['renderer']['_shadowMap'+'Time']=0x26d8+-0x171f+-0xfb9,this['renderer']['renderForw'+'ard'](this['camera'],_0x56ec55,_0x42a994,_0x225d02,Aa),_0x4b737b['updateEnd']();for(this['stats']['shadowMapT'+'ime']+=this['renderer']['_shadowMap'+'Time'],this['stats']['forwardTim'+'e']+=this['renderer']['_forwardTi'+'me'],this['stats']['renderPass'+'es']++,_0x50bfea['renderTarg'+'ets'][_0x57ab87]=_0x56ec55,this['renderTarg'+'ets']['set'](_0x2cc727,_0x108c06),_0x22c1ae=0x10f9+0xcd2+-0x1dcb;_0x22c1ae<_0x42a994['length'];_0x22c1ae++)_0x1dc1f2=_0x42a994[_0x22c1ae],_0x1dc1f2['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][_0x57ab87],_0x686ab8),_0x1dc1f2['_shaderDef'+'s']|=ou;Q['popGpuMark'+'er'](_0x4b737b);}this['restoreMat'+'erials'](_0x42a994);}_0x36ad5f['endBake'](this['shadowMapC'+'ache']),Q['popGpuMark'+'er'](_0x4b737b);}}for(this['postproces'+'sTextures'](_0x4b737b,_0xeda463,_0x3f6060),_0x349313=0x9*0xae+0x1bbc+0x2*-0x10ed;_0x349313<_0x37dba7['length'];_0x349313++)_0x37dba7[_0x349313]['restore']();this['restoreLig'+'hts'](_0x387914),this['restoreSce'+'ne'](),_0x290880||this['shadowMapC'+'ache']['clear']();}}const Wh=class Wh extends me{constructor(_0x55655c,_0x3eb6e9){super(),h(this,'system'),h(this,'entity'),(this['system']=_0x55655c,this['entity']=_0x3eb6e9,this['system']['schema']&&!this['_accessors'+'Built']&&this['buildAcces'+'sors'](this['system']['schema']),this['on']('set',function(_0x38687e,_0x58c17b,_0x2f348f){this['fire']('set_'+_0x38687e,_0x38687e,_0x58c17b,_0x2f348f);}),this['on']('set_enable'+'d',this['onSetEnabl'+'ed'],this));}static['_buildAcce'+'ssors'](_0x210bd7,_0x55132f){_0x55132f['forEach'](_0xaef883=>{const _0x37ef1f=typeof _0xaef883=='object'?_0xaef883['name']:_0xaef883;Object['defineProp'+'erty'](_0x210bd7,_0x37ef1f,{'get':function(){return this['data'][_0x37ef1f];},'set':function(_0x3468e4){const _0x3bb238=this['data'],_0x3e09fc=_0x3bb238[_0x37ef1f];_0x3bb238[_0x37ef1f]=_0x3468e4,this['fire']('set',_0x37ef1f,_0x3e09fc,_0x3468e4);},'configurable':!(0x193d+-0x13*-0x14f+-0x321a)});}),_0x210bd7['_accessors'+'Built']=!(-0xe52+-0x196d+-0x27bf*-0x1);}['buildAcces'+'sors'](_0x53d817){Wh['_buildAcce'+'ssors'](this,_0x53d817);}['onSetEnabl'+'ed'](_0x28d037,_0x4b84e2,_0x255722){_0x4b84e2!==_0x255722&&this['entity']['enabled']&&(_0x255722?this['onEnable']():this['onDisable']());}['onEnable'](){}['onDisable'](){}['onPostStat'+'eChange'](){}get['data'](){const _0x5ed6e1=this['system']['store'][this['entity']['getGuid']()];return _0x5ed6e1?_0x5ed6e1['data']:null;}set['enabled'](_0x33f7d0){}get['enabled'](){return!(0x8*0x1b7+-0x99*-0x6+-0x114e);}};h(Wh,'order',0x1*0xa19+0x1*-0x72b+0x6*-0x7d);let we=Wh;class ct extends me{constructor(_0x4f6bee){super(),this['app']=_0x4f6bee,this['store']={},this['schema']=[];}['addCompone'+'nt'](_0x731f91,_0x19c611={}){const _0x3c3f25=new this['ComponentT'+'ype'](this,_0x731f91),_0x157996=new this['DataType']();return this['store'][_0x731f91['getGuid']()]={'entity':_0x731f91,'data':_0x157996},_0x731f91[this['id']]=_0x3c3f25,_0x731f91['c'][this['id']]=_0x3c3f25,this['initialize'+'ComponentD'+'ata'](_0x3c3f25,_0x19c611,[]),this['fire']('add',_0x731f91,_0x3c3f25),_0x3c3f25;}['removeComp'+'onent'](_0x308dc4){const _0x528059=this['id'],_0xae4ad3=this['store'][_0x308dc4['getGuid']()],_0x302010=_0x308dc4['c'][_0x528059];_0x302010['fire']('beforeremo'+'ve'),this['fire']('beforeremo'+'ve',_0x308dc4,_0x302010),delete this['store'][_0x308dc4['getGuid']()],_0x308dc4[_0x528059]=void(0x16b5+0x215f+-0x3814),delete _0x308dc4['c'][_0x528059],this['fire']('remove',_0x308dc4,_0xae4ad3['data']);}['cloneCompo'+'nent'](_0x24d23b,_0x48e379){const _0x5f0e81=this['store'][_0x24d23b['getGuid']()];return this['addCompone'+'nt'](_0x48e379,_0x5f0e81['data']);}['initialize'+'ComponentD'+'ata'](_0x184505,_0x2a6bee={},_0x4a16f1){for(let _0x519686=0x17a4+-0x4b1+-0x12f3,_0x402b41=_0x4a16f1['length'];_0x519686<_0x402b41;_0x519686++){const _0x449a22=_0x4a16f1[_0x519686];let _0x2bf218,_0x5c8970;typeof _0x449a22=='object'?(_0x2bf218=_0x449a22['name'],_0x5c8970=_0x449a22['type']):(_0x2bf218=_0x449a22,_0x5c8970=void(-0x2*0xc8e+0x17f0*-0x1+0x310c));let _0x5558c9=_0x2a6bee[_0x2bf218];_0x5558c9!==void(0x3*-0x579+0x86d+-0xba*-0xb)?(_0x5c8970!==void(0x14b*0x10+0x8*-0x152+-0xa20)&&(_0x5558c9=mL(_0x5558c9,_0x5c8970)),_0x184505[_0x2bf218]=_0x5558c9):_0x184505[_0x2bf218]=_0x184505['data'][_0x2bf218];}_0x184505['enabled']&&_0x184505['entity']['enabled']&&_0x184505['onEnable']();}['getPropert'+'iesOfType'](_0x4b16a0){const _0xe7974b=[];return(this['schema']||[])['forEach'](_0x3cb699=>{_0x3cb699&&typeof _0x3cb699=='object'&&_0x3cb699['type']===_0x4b16a0&&_0xe7974b['push'](_0x3cb699);}),_0xe7974b;}['destroy'](){this['off']();}}function mL(_0xf11b23,_0x2d645a){if(!_0xf11b23)return _0xf11b23;switch(_0x2d645a){case'rgb':return _0xf11b23 instanceof ie?_0xf11b23['clone']():new ie(_0xf11b23[0x1031+0x9b9*-0x3+0x97*0x16],_0xf11b23[-0x17e3+0x1a*-0x1c+0x1abc],_0xf11b23[-0x94b+0x19*0x137+0x1*-0x1512]);case'rgba':return _0xf11b23 instanceof ie?_0xf11b23['clone']():new ie(_0xf11b23[-0x880+0x1343+-0xac3],_0xf11b23[-0x156a+-0x1476+0x97*0x47],_0xf11b23[-0x864+-0x1*0x8a9+0x110f],_0xf11b23[-0xed0+0x10c7+-0x1f4]);case'vec2':return _0xf11b23 instanceof J?_0xf11b23['clone']():new J(_0xf11b23[0x103f+-0x25de+0x2d*0x7b],_0xf11b23[-0x5*0x17b+0x86*0x3+0x5d6]);case'vec3':return _0xf11b23 instanceof D?_0xf11b23['clone']():new D(_0xf11b23[-0x1762+0x2f0+0x1472],_0xf11b23[-0x2*0x8b3+-0xc54*0x1+0x1dbb],_0xf11b23[-0xf51+0x2ca+0xc89]);case'vec4':return _0xf11b23 instanceof re?_0xf11b23['clone']():new re(_0xf11b23[0x1a86+0x1ef1+-0x3977*0x1],_0xf11b23[0x24a3+-0x4d1+0x389*-0x9],_0xf11b23[-0xa0f+-0x255c+0x2f6d],_0xf11b23[0x2*0x18a+-0x1bc1+0x2*0xc58]);case'boolean':case'number':case'string':return _0xf11b23;case'entity':return _0xf11b23;default:throw new Error('Could\x20not\x20'+'convert\x20un'+'handled\x20ty'+'pe:\x20'+_0x2d645a);}}const Bv=-0x1*-0xa60+0xe09+-0x1869,Su=-0x2071+0x19*-0x83+0x2d3d,yu=0x533+0x15fa+-0x41*0x6b;class _L{constructor(){this['_left']=(-0x1879+-0x556*-0x3+0x878)/(-0x242d+0x6e5*0x1+0x1d48),this['_right']=-(-0x21d2+0x1c96+0x53d)/(-0x1b33+0x6a2+0xd*0x195),this['_len']=-0x6d*0xa+-0x359+0x79b,this['_recip']=0x23f6+-0x19d7+-0xa1f,this['_p0']=-0x1*0xd9b+0x493*-0x2+0x16c1,this['_p1']=-0x4*-0x4c4+-0x1f3a+0x1*0xc2a,this['_t']=-0xb61*0x2+-0x1*-0x1997+-0x1d*0x19,this['_hermite']={'valid':!(-0x1ac8+0x1ac9*0x1+0x0),'p0':0x0,'m0':0x0,'p1':0x0,'m1':0x0};}['update'](_0x261163,_0x507897){if(_0x261163<this['_left']||_0x261163>=this['_right']){const _0x39f245=_0x507897['length'];if(!_0x39f245)this['_left']=-(0xaf6+0x2*-0x211+-0x6d3)/(0x1e29+0xa07+-0x2830),this['_right']=(-0x3*-0xa06+0x228a+-0x6f*0x95)/(-0xebc+0x1f*0xad+-0x637),this['_len']=0x8b5*-0x1+-0x1*0x231d+0x2bd2,this['_recip']=0x167d+-0x2*0x6b9+-0x90b,this['_p0']=this['_p1']=0x239+-0x1d*0x74+0xaeb;else{if(_0x261163<_0x507897[0x2621+-0x861+-0x1dc0])this['_left']=-(-0x1b5d+-0x16bd+0x321b)/(0x731*0x1+-0xd7c+-0x9*-0xb3),this['_right']=_0x507897[0x27c+-0xe*-0x23d+-0xd*0x29a],this['_len']=0x5*-0xd6+0xb6*-0xa+-0x5a5*-0x2,this['_recip']=-0x55*-0x39+-0xd*0x2a9+0xfa8,this['_p0']=this['_p1']=-0x10*-0xd5+-0xa93+-0x2bd;else{if(_0x261163>=_0x507897[_0x39f245-(-0x154a+0x561+-0x3*-0x54e)])this['_left']=_0x507897[_0x39f245-(0x19c+0x144f+-0x15ea)],this['_right']=(-0x23e0+-0xa*0xa1+0x27b*0x11)/(0x1*-0x2565+-0x901+0x2e66),this['_len']=-0x575*0x5+0x1b13*-0x1+-0x3e2*-0xe,this['_recip']=-0x4*0x788+0xb*0x17b+0xdd7,this['_p0']=this['_p1']=_0x39f245-(0xb5b+0x24d4+-0x7*0x6e2);else{const _0x5cf285=this['_findKey'](_0x261163,_0x507897);this['_left']=_0x507897[_0x5cf285],this['_right']=_0x507897[_0x5cf285+(-0x115*-0x13+0x1239*-0x2+-0x4*-0x3f9)],this['_len']=this['_right']-this['_left'];const _0xebe48a=(-0x2*0xe3a+0xa58+-0x1*-0x121d)/this['_len'];this['_recip']=isFinite(_0xebe48a)?_0xebe48a:0x1*0x47f+-0x257f+0x2100,this['_p0']=_0x5cf285,this['_p1']=_0x5cf285+(0xb8b+-0xe14+0x28a);}}}}this['_t']=this['_recip']===0x23a7*-0x1+0x2242+0x165*0x1?-0x3*0xb9c+-0x542*-0x6+0x348:(_0x261163-this['_left'])*this['_recip'],this['_hermite']['valid']=!(0xce*-0x1d+0x167e+0xd9);}['_findKey'](_0x40d110,_0x323fde){let _0x28bc3d=0x88*-0x13+0x81a*0x1+0x1fe;for(;_0x40d110>=_0x323fde[_0x28bc3d+(0x925*0x1+-0xc26*0x3+0xf*0x1d2)];)_0x28bc3d++;return _0x28bc3d;}['eval'](_0x53c327,_0x51e77b,_0x4c62ae){const _0x68e77b=_0x4c62ae['_data'],_0x5cec43=_0x4c62ae['_component'+'s'],_0x91f067=this['_p0']*_0x5cec43;if(_0x51e77b===Bv){for(let _0x1b4520=0x22af+0x1*-0x235f+-0x2*-0x58;_0x1b4520<_0x5cec43;++_0x1b4520)_0x53c327[_0x1b4520]=_0x68e77b[_0x91f067+_0x1b4520];}else{const _0x49e72a=this['_t'],_0x191eb5=this['_p1']*_0x5cec43;switch(_0x51e77b){case Su:for(let _0x1b61c3=0x270e+0x499+-0x95*0x4b;_0x1b61c3<_0x5cec43;++_0x1b61c3)_0x53c327[_0x1b61c3]=Y['lerp'](_0x68e77b[_0x91f067+_0x1b61c3],_0x68e77b[_0x191eb5+_0x1b61c3],_0x49e72a);break;case yu:{const _0x30bd23=this['_hermite'];if(!_0x30bd23['valid']){const _0x25d061=_0x49e72a*_0x49e72a,_0x1cf9ce=_0x49e72a+_0x49e72a,_0x27a569=-0xd*-0x2d2+0x1c80+-0x4129-_0x49e72a,_0x2508c6=_0x27a569*_0x27a569;_0x30bd23['valid']=!(-0x3da+-0xfc5*-0x1+0x71*-0x1b),_0x30bd23['p0']=(0x3dc+0x3*-0x6a3+0x100e+_0x1cf9ce)*_0x2508c6,_0x30bd23['m0']=_0x49e72a*_0x2508c6,_0x30bd23['p1']=_0x25d061*(0x120a+0x4*0x8cb+-0x1*0x3533-_0x1cf9ce),_0x30bd23['m1']=_0x25d061*(_0x49e72a-(-0x1*-0xd72+-0x4*0x1d8+-0x1*0x611));}const _0x497431=(this['_p0']*(0x1f7c+0xbc1+-0x2*0x159d)+(0x899+-0x1fa8*0x1+0x148*0x12))*_0x5cec43,_0x37c5fb=(this['_p0']*(-0x119*0x2+0xca1+-0x2*0x536)+(0x2c2*0x9+0xc*-0x32d+0xd4c*0x1))*_0x5cec43,_0x3c613b=(this['_p1']*(-0x5da+-0x1725+-0x1d02*-0x1)+(0x7*-0x4e3+-0x107d+-0x1*-0x32b3))*_0x5cec43,_0x4b7044=(this['_p1']*(-0xdc3+-0x152f+0x22f5)+(-0x131f+0xbeb+0x734))*_0x5cec43;for(let _0x52dc02=0x4*-0x26b+-0x166*-0xa+-0x450;_0x52dc02<_0x5cec43;++_0x52dc02)_0x53c327[_0x52dc02]=_0x30bd23['p0']*_0x68e77b[_0x497431+_0x52dc02]+_0x30bd23['m0']*_0x68e77b[_0x37c5fb+_0x52dc02]*this['_len']+_0x30bd23['p1']*_0x68e77b[_0x3c613b+_0x52dc02]+_0x30bd23['m1']*_0x68e77b[_0x4b7044+_0x52dc02]*this['_len'];break;}}}}}class Ig{constructor(_0x375351){this['_name']=_0x375351['name']+'Snapshot',this['_time']=-(-0x321*-0x2+-0x5*0x602+0x17c9),this['_cache']=[],this['_results']=[];for(let _0x622346=-0x1*-0x1595+-0x1fc6+-0xa31*-0x1;_0x622346<_0x375351['_inputs']['length'];++_0x622346)this['_cache'][_0x622346]=new _L();const _0x3a420e=_0x375351['_curves'],_0x16b8ef=_0x375351['_outputs'];for(let _0x4be732=-0x1218+0x17c7+0xf*-0x61;_0x4be732<_0x3a420e['length'];++_0x4be732){const _0x8dc64b=_0x3a420e[_0x4be732],_0x1e8d5e=_0x16b8ef[_0x8dc64b['_output']],_0x452390=[];for(let _0x5bf7d5=0x1*-0x807+-0x20fa+0x2901;_0x5bf7d5<_0x1e8d5e['_component'+'s'];++_0x5bf7d5)_0x452390[_0x5bf7d5]=0x2246+0x22*0xcf+-0x43*0xec;this['_results'][_0x4be732]=_0x452390;}}}const qo=class qo{constructor(_0x204de2,_0x1dfd04,_0x28f636,_0x3249b3,_0x3805d2,_0x194c22){this['_name']=_0x204de2['name'],this['_track']=_0x204de2,this['_snapshot']=new Ig(_0x204de2),this['_playing']=_0x3249b3,this['_time']=_0x1dfd04,this['_speed']=_0x28f636,this['_loop']=_0x3805d2,this['_blendWeig'+'ht']=-0x4af+0x1d02+-0x1852,this['_blendOrde'+'r']=-0x1*-0xa7+0x118d+-0x1234,this['_eventHand'+'ler']=_0x194c22,this['alignCurso'+'rToCurrent'+'Time']();}set['name'](_0x1e5469){this['_name']=_0x1e5469;}get['name'](){return this['_name'];}set['track'](_0x18b766){this['_track']=_0x18b766,this['_snapshot']=new Ig(_0x18b766);}get['track'](){return this['_track'];}get['snapshot'](){return this['_snapshot'];}set['time'](_0x576061){this['_time']=_0x576061,this['alignCurso'+'rToCurrent'+'Time']();}get['time'](){return this['_time'];}set['speed'](_0x2879f3){const _0x2e401d=Math['sign'](_0x2879f3)!==Math['sign'](this['_speed']);this['_speed']=_0x2879f3,_0x2e401d&&this['alignCurso'+'rToCurrent'+'Time']();}get['speed'](){return this['_speed'];}set['loop'](_0x5037d4){this['_loop']=_0x5037d4;}get['loop'](){return this['_loop'];}set['blendWeigh'+'t'](_0x720c91){this['_blendWeig'+'ht']=_0x720c91;}get['blendWeigh'+'t'](){return this['_blendWeig'+'ht'];}set['blendOrder'](_0x2e6fe2){this['_blendOrde'+'r']=_0x2e6fe2;}get['blendOrder'](){return this['_blendOrde'+'r'];}set['eventCurso'+'r'](_0x3b3868){this['_eventCurs'+'or']=_0x3b3868;}get['eventCurso'+'r'](){return this['_eventCurs'+'or'];}get['eventCurso'+'rEnd'](){return this['isReverse']?-0x701+-0x2*-0x1274+-0x1*0x1de7:this['_track']['events']['length']-(0x1*-0x20a+0x1*0x23b7+-0x21ac);}get['nextEvent'](){return this['_track']['events'][this['_eventCurs'+'or']];}get['isReverse'](){return this['_speed']<-0x14ea+-0x4a9*0x3+0x1*0x22e5;}['nextEventA'+'headOfTime'](_0x505060){return this['nextEvent']?this['isReverse']?this['nextEvent']['time']<=_0x505060:this['nextEvent']['time']>=_0x505060:!(-0x259e+-0x1ab2+-0x4051*-0x1);}['nextEventB'+'ehindTime'](_0x229d45){return this['nextEvent']?_0x229d45===this['track']['duration']?this['isReverse']?this['nextEvent']['time']>=_0x229d45:this['nextEvent']['time']<=_0x229d45:this['isReverse']?this['nextEvent']['time']>_0x229d45:this['nextEvent']['time']<_0x229d45:!(-0x4f3+-0x257e+0x2a72);}['resetEvent'+'Cursor'](){this['_eventCurs'+'or']=this['isReverse']?this['_track']['events']['length']-(-0x5ad*-0x4+-0x41+-0xa9*0x22):0x1ddd+-0xc7a+0x1163*-0x1;}['moveEventC'+'ursor'](){this['_eventCurs'+'or']+=this['isReverse']?-(0xff9+-0x22c1+0x12c9):-0x243c+-0x21e0+0x461d,this['_eventCurs'+'or']>=this['track']['events']['length']?this['_eventCurs'+'or']=0xce5*0x2+-0x1c2a+-0x26*-0x10:this['_eventCurs'+'or']<-0x1551+0x9*-0x1fd+0x2736&&(this['_eventCurs'+'or']=this['track']['events']['length']-(-0x19*0xb1+-0x1*0x1cae+0x2df8*0x1));}['clipFrameT'+'ime'](_0x144417){const _0x1a63ca=qo['eventFrame'];_0x1a63ca['start']=0x1037*-0x1+0xf8a+0x1*0xad,_0x1a63ca['end']=_0x144417,_0x1a63ca['residual']=-0x188e+-0xe09*-0x1+0xa85,this['isReverse']?_0x144417<-0x2be+-0x1d*0x97+-0x13d9*-0x1&&(_0x1a63ca['start']=this['track']['duration'],_0x1a63ca['end']=0x41d*-0x3+0x9b7*-0x1+-0x2*-0xb07,_0x1a63ca['residual']=_0x144417+this['track']['duration']):_0x144417>this['track']['duration']&&(_0x1a63ca['start']=-0x72a*-0x3+0x136*-0x11+-0xe8,_0x1a63ca['end']=this['track']['duration'],_0x1a63ca['residual']=_0x144417-this['track']['duration']);}['alignCurso'+'rToCurrent'+'Time'](){for(this['resetEvent'+'Cursor']();this['nextEventB'+'ehindTime'](this['_time'])&&this['_eventCurs'+'or']!==this['eventCurso'+'rEnd'];)this['moveEventC'+'ursor']();}['fireNextEv'+'ent'](){this['_eventHand'+'ler']['fire'](this['nextEvent']['name'],{'track':this['track'],...this['nextEvent']}),this['moveEventC'+'ursor']();}['fireNextEv'+'entInFrame'](_0x164bf8,_0x2ebe1e){return this['nextEventA'+'headOfTime'](_0x164bf8)&&this['nextEventB'+'ehindTime'](_0x2ebe1e)?(this['fireNextEv'+'ent'](),!(-0xff0+0x2*0x9d9+-0x3c2)):!(0x9*0x2b+0x22a3+-0x1e7*0x13);}['activeEven'+'tsForFrame'](_0x1a4987,_0x3a2bdd){const _0x280ac2=qo['eventFrame'];this['clipFrameT'+'ime'](_0x3a2bdd);const _0x39779e=this['eventCurso'+'r'];for(;this['fireNextEv'+'entInFrame'](_0x1a4987,_0x280ac2['end'])&&_0x39779e!==this['eventCurso'+'r'];);this['loop']&&Math['abs'](_0x280ac2['residual'])>0x5ec+-0xca0*0x2+0x4d5*0x4&&this['activeEven'+'tsForFrame'](_0x280ac2['start'],_0x280ac2['residual']);}['progressFo'+'rTime'](_0xcba908){return _0xcba908*this['_speed']/this['_track']['duration'];}['_update'](_0x19ee3a){if(this['_playing']){let _0x5c812e=this['_time'];const _0x5696eb=this['_track']['duration'],_0x16b8fc=this['_speed'],_0x18758f=this['_loop'];this['_track']['events']['length']>-0x2065*0x1+0x1*-0x12dd+-0xf3*-0x36&&_0x5696eb>-0x6*-0x5c5+-0x45b+0x1e43*-0x1&&this['activeEven'+'tsForFrame'](_0x5c812e,_0x5c812e+_0x16b8fc*_0x19ee3a),_0x5c812e+=_0x16b8fc*_0x19ee3a,_0x16b8fc>=0x200f*0x1+-0xa18+-0x1*0x15f7?_0x5c812e>_0x5696eb&&(_0x18758f?_0x5c812e=_0x5c812e%_0x5696eb||0x1eb9+-0x14c7+-0x9f2:(_0x5c812e=this['_track']['duration'],this['pause']())):_0x5c812e<0xb*-0x11b+0x14*0x1e8+0x187*-0x11&&(_0x18758f?_0x5c812e=_0x5696eb+(_0x5c812e%_0x5696eb||-0x11*-0x97+0x13*-0x6f+-0x1ca):(_0x5c812e=0x1926+-0x2f7+0x9*-0x277,this['pause']())),this['_time']=_0x5c812e;}this['_time']!==this['_snapshot']['_time']&&this['_track']['eval'](this['_time'],this['_snapshot']);}['play'](){this['_playing']=!(-0x1*0xb45+0x25e7*-0x1+0x312c),this['_time']=-0x202+0x1355+-0x1153;}['stop'](){this['_playing']=!(-0x1c97+-0x61d*-0x2+0x2*0x82f),this['_time']=-0x2207+-0x1d7a+0x3f81;}['pause'](){this['_playing']=!(-0x1922+0x1c1a+-0x2f7);}['resume'](){this['_playing']=!(-0x10f*0x3+0x19db+-0x16ae);}['reset'](){this['_time']=-0x1fd2+-0x1*-0x260b+-0x639*0x1;}};h(qo,'eventFrame',{'start':0x0,'end':0x0,'residual':0x0});let Dh=qo;const zv='NONE',gL='PREV_STATE',SL='NEXT_STATE',yL='PREV_STATE'+'_NEXT_STAT'+'E',vL='NEXT_STATE'+'_PREV_STAT'+'E',xL='GREATER_TH'+'AN',TL='LESS_THAN',wL='GREATER_TH'+'AN_EQUAL_T'+'O',EL='LESS_THAN_'+'EQUAL_TO',bL='EQUAL_TO',AL='NOT_EQUAL_'+'TO',Lg='INTEGER',Rg='FLOAT',Og='BOOLEAN',Qc='TRIGGER',CL='1D',PL='2D_DIRECTI'+'ONAL',ML='2D_CARTESI'+'AN',DL='DIRECT',Co='START',vu='END',qr='ANY',Ih=[Co,vu,qr],Vv='OVERWRITE',IL='ADDITIVE';class Ht{static['dot'](_0x508113,_0x4a712c){const _0x36b2be=_0x508113['length'];let _0x22de9e=-0x3*-0xcb9+0x179c+-0x3dc7;for(let _0x358e00=-0x1ab9*-0x1+-0x25c2+0xb09;_0x358e00<_0x36b2be;++_0x358e00)_0x22de9e+=_0x508113[_0x358e00]*_0x4a712c[_0x358e00];return _0x22de9e;}static['normalize'](_0x38d61e){let _0x113153=Ht['dot'](_0x38d61e,_0x38d61e);if(_0x113153>0x1700+-0xf2b+-0x1*0x7d5){_0x113153=(-0x13f7+0x13*0x3b+0xf97)/Math['sqrt'](_0x113153);const _0x1ed711=_0x38d61e['length'];for(let _0xcda40c=0x9*0x126+-0x5*-0x125+-0x100f;_0xcda40c<_0x1ed711;++_0xcda40c)_0x38d61e[_0xcda40c]*=_0x113153;}}static['set'](_0x28a118,_0x361a4f,_0x60c665){const _0x3faf61=_0x28a118['length'];if(_0x60c665==='quaternion'){let _0x125dbc=Ht['dot'](_0x361a4f,_0x361a4f);_0x125dbc>0x2124+-0xb*-0x19b+0x5a5*-0x9&&(_0x125dbc=(0xa*0x30d+-0x7f*-0x1+-0x1f00)/Math['sqrt'](_0x125dbc));for(let _0x43898e=-0xd9*-0x19+-0xe42+-0x6ef;_0x43898e<_0x3faf61;++_0x43898e)_0x28a118[_0x43898e]=_0x361a4f[_0x43898e]*_0x125dbc;}else{for(let _0x13c05e=-0x4*0x74f+-0x315*0x3+0x267b*0x1;_0x13c05e<_0x3faf61;++_0x13c05e)_0x28a118[_0x13c05e]=_0x361a4f[_0x13c05e];}}static['blendVec'](_0x380059,_0x1577f0,_0x56b4b4,_0x48c81a){const _0x581d7c=_0x48c81a?-0x73*-0x1f+-0x5ef+-0x7fd:0x273+0x1d59+-0x1fcb*0x1-_0x56b4b4,_0x3dffcf=_0x380059['length'];for(let _0x352a1b=-0x1*-0x25ee+-0xa76+-0x1b78;_0x352a1b<_0x3dffcf;++_0x352a1b)_0x380059[_0x352a1b]=_0x380059[_0x352a1b]*_0x581d7c+_0x1577f0[_0x352a1b]*_0x56b4b4;}static['blendQuat'](_0xa6d0df,_0x485440,_0x376405,_0x29fcab){const _0x23ddb1=_0xa6d0df['length'],_0x1babf7=_0x29fcab?-0x5*-0xe3+-0x2*0x1341+0x2214:-0x1*-0x2686+-0x1760+0x1*-0xf25-_0x376405;Ht['dot'](_0xa6d0df,_0x485440)<0x1*-0x13bc+0x1cb3+0xff*-0x9&&(_0x376405=-_0x376405);for(let _0x361ca3=-0x2518+0x1ebb*0x1+0x65d;_0x361ca3<_0x23ddb1;++_0x361ca3)_0xa6d0df[_0x361ca3]=_0xa6d0df[_0x361ca3]*_0x1babf7+_0x485440[_0x361ca3]*_0x376405;_0x29fcab||Ht['normalize'](_0xa6d0df);}static['blend'](_0x1471a8,_0x4fc405,_0x2c5293,_0x515c4f,_0x58aa45){_0x515c4f==='quaternion'?Ht['blendQuat'](_0x1471a8,_0x4fc405,_0x2c5293,_0x58aa45):Ht['blendVec'](_0x1471a8,_0x4fc405,_0x2c5293,_0x58aa45);}static['stableSort'](_0x1206ef,_0xa4f748){const _0x528699=_0x1206ef['length'];for(let _0x19f5af=0x7f*0x31+0x3e7*-0x8+-0x3d*-0x1d;_0x19f5af<_0x528699-(-0x25*-0x1a+0x5cd*-0x2+0x7d9);++_0x19f5af)for(let _0x152678=_0x19f5af+(-0x5*0x127+0x24f*-0x3+0x169*0x9);_0x152678<_0x528699;++_0x152678)if(_0xa4f748(_0x1206ef[_0x152678],_0x1206ef[_0x19f5af])){const _0x1fc879=_0x1206ef[_0x19f5af];_0x1206ef[_0x19f5af]=_0x1206ef[_0x152678],_0x1206ef[_0x152678]=_0x1fc879;}}}const st=class st{constructor(_0x44d9a4,_0x2da060){this['_component']=_0x44d9a4,this['mask']=new Int8Array(_0x44d9a4['layers']['length']),this['weights']=new Float32Array(_0x44d9a4['layers']['length']),this['totalWeigh'+'t']=0x19c0+-0x107*0x16+0x1f*-0x1a,this['counter']=0xd49*0x1+0x1172+0x1*-0x1ebb,this['layerCount'+'er']=-0x1*-0x56+0x1293+0x2f*-0x67,this['valueType']=_0x2da060,this['dirty']=!(-0x23ea+-0x1e47+-0xd3d*-0x5),this['value']=_0x2da060===st['TYPE_QUAT']?[0x45e*-0x2+-0x1976*-0x1+-0x2*0x85d,-0xa74+-0x56*-0x71+-0x7*0x3ee,0x1*-0x67+-0x4*0x581+0x779*0x3,-0x20f*-0xd+-0x1885+0x3*-0xbf]:[0x137a+0x13c5+-0x273f,-0x1a72+-0x2*0x403+0x2278,-0x1165+0x648+0xb1d*0x1],this['baseValue']=null,this['setter']=null;}get['_normalize'+'Weights'](){return this['_component']['normalizeW'+'eights'];}['getWeight'](_0x15cac3){return this['dirty']&&this['updateWeig'+'hts'](),this['_normalize'+'Weights']&&this['totalWeigh'+'t']===-0x2565+0x2*-0x505+-0x1*-0x2f6f||!this['mask'][_0x15cac3]?-0xbb+-0xd5*0xb+0x73*0x16:this['_normalize'+'Weights']?this['weights'][_0x15cac3]/this['totalWeigh'+'t']:Y['clamp'](this['weights'][_0x15cac3],-0x427*-0x5+-0x1*-0x4bd+-0x33*0x80,-0x26cf+-0x2*-0x6b5+0x1966);}['_layerBlen'+'dType'](_0x1b63c2){return this['_component']['layers'][_0x1b63c2]['blendType'];}['setMask'](_0x349f6d,_0xdc20fa){this['mask'][_0x349f6d]=_0xdc20fa,this['_normalize'+'Weights']&&(this['_component']['layers'][_0x349f6d]['blendType']===Vv&&(this['mask']=this['mask']['fill'](-0xb53+0x1d41+-0x11ee,-0x49*0x12+0xf13+-0x1*0x9f1,_0x349f6d)),this['dirty']=!(-0x513+0x8*0x4e1+-0x21f5));}['updateWeig'+'hts'](){this['totalWeigh'+'t']=-0x1ca2+-0xd2+0x1d74;for(let _0x50c459=-0xa7e+0x1686+-0xc08;_0x50c459<this['weights']['length'];_0x50c459++)this['weights'][_0x50c459]=this['_component']['layers'][_0x50c459]['weight'],this['totalWeigh'+'t']+=this['mask'][_0x50c459]*this['weights'][_0x50c459];this['dirty']=!(-0x3*0x707+0x2288+-0x1*0xd72);}['updateValu'+'e'](_0x318630,_0x289000){if(this['counter']===0x71*0x3e+0x1ba4+0x1b81*-0x2&&(Ht['set'](this['value'],st['IDENTITY_Q'+'UAT_ARR'],this['valueType']),this['_normalize'+'Weights']||Ht['blend'](this['value'],this['baseValue'],0x106*-0x1f+0x211d+-0x2*0xb1,this['valueType'])),!(!this['mask'][_0x318630]||this['getWeight'](_0x318630)===-0x1271+-0x565+-0x17d6*-0x1)){if(this['_layerBlen'+'dType'](_0x318630)===IL&&!this['_normalize'+'Weights']){if(this['valueType']===st['TYPE_QUAT']){const _0x577bb1=st['q1']['set'](this['value'][0x1*0x83+-0x5*0x395+0x1166],this['value'][-0x189*-0x3+-0x22a3*0x1+0x21*0xe9],this['value'][0x18a6+-0x1702*-0x1+0x72*-0x6b],this['value'][-0x209*0x13+0x1cec+0x9c2]),_0x78b286=st['q2']['set'](this['baseValue'][0x13a1+-0x266d+0x644*0x3],this['baseValue'][-0xa*0x34f+-0xe0b+0x2f22],this['baseValue'][0x11*0x15c+0x21c8+-0x38e2],this['baseValue'][-0x1a93+0xca3+-0x1*-0xdf3]),_0x47cbad=st['q3']['set'](_0x289000[0x1*-0x1885+0x1dde+-0x559],_0x289000[-0x1*-0x259b+0x3a9*-0x1+0x21f1*-0x1],_0x289000[0xc59*0x2+-0x240b*-0x1+0x8ad*-0x7],_0x289000[0x1*0x2042+-0xd9*-0x23+-0x631*0xa]),_0xad8164=_0x78b286['invert']()['mul'](_0x47cbad);_0xad8164['slerp'](le['IDENTITY'],_0xad8164,this['getWeight'](_0x318630)),_0x577bb1['mul'](_0xad8164),st['quatArr'][0x25b2+0x3*0x265+0x2ce1*-0x1]=_0x577bb1['x'],st['quatArr'][-0x79*-0x16+0x8a0+-0x1305]=_0x577bb1['y'],st['quatArr'][0xf58+-0x54*0x76+0x1762]=_0x577bb1['z'],st['quatArr'][-0x233c+0x334+0x200b]=_0x577bb1['w'],Ht['set'](this['value'],st['quatArr'],this['valueType']);}else st['vecArr'][0x4fa*-0x1+0x2cf*0x8+-0x8bf*0x2]=_0x289000[-0x1b3c*-0x1+-0x1936*0x1+0xe*-0x25]-this['baseValue'][0xe*-0x19a+0x1f1*-0x4+-0x1e30*-0x1],st['vecArr'][-0x1f29+0x5f*-0x2d+-0x2fdd*-0x1]=_0x289000[-0x199*-0xf+0x1e84+-0x367a]-this['baseValue'][0x186b*0x1+0x16e6+-0x2f50*0x1],st['vecArr'][-0x36a+0x1*0x98f+0x623*-0x1]=_0x289000[0x1f2+-0x1c02+0x2*0xd09]-this['baseValue'][-0x2446+0x1*0xf53+0x91*0x25],Ht['blend'](this['value'],st['vecArr'],this['getWeight'](_0x318630),this['valueType'],!(-0xffd*0x1+0x16f8+-0x6fb));}else Ht['blend'](this['value'],_0x289000,this['getWeight'](_0x318630),this['valueType']);this['setter']&&this['setter'](this['value']);}}['unbind'](){this['setter']&&this['setter'](this['baseValue']);}};h(st,'TYPE_QUAT','quaternion'),h(st,'TYPE_VEC3','vector3'),h(st,'q1',new le()),h(st,'q2',new le()),h(st,'q3',new le()),h(st,'quatArr',[0x193b+0x1*0x84e+0x65*-0x55,0xeb2+0x11*0x1fd+-0x307f,0x1bf2+0x1*0xff7+-0x1*0x2be9,-0x8*-0x209+0x61b*-0x1+-0xa2c]),h(st,'vecArr',[0x86f+0x1367+0x3fa*-0x7,0x26f3+0x1a8b+-0x417e,0x1*0x1ad8+-0x585+-0x1553]),h(st,'IDENTITY_Q'+'UAT_ARR',[-0x84a*0x4+0x1db*0xb+-0x1*-0xcbf,-0xd60+0x1*0x268d+-0x192d,0x909*0x2+-0x3fb*0x3+-0x621*0x1,-0xe7a+0x14ab+-0xc*0x84]);let Vo=st;class Gv{constructor(_0x56869c){this['_binder']=_0x56869c,this['_clips']=[],this['_inputs']=[],this['_outputs']=[],this['_targets']={};}get['clips'](){return this['_clips'];}['addClip'](_0x3a32c2){const _0x2fdedd=this['_targets'],_0x1fee78=this['_binder'],_0x26c430=_0x3a32c2['track']['curves'],_0xbe20d3=_0x3a32c2['snapshot'],_0x3f2b5d=[],_0xc67d8f=[];for(let _0x5b72b0=-0x1a8*0x1+0x90*-0x31+0x1d38;_0x5b72b0<_0x26c430['length'];++_0x5b72b0){const _0x5dcabe=_0x26c430[_0x5b72b0]['paths'];for(let _0x1928ab=0x169*-0x5+-0x3*-0x9d1+0xb33*-0x2;_0x1928ab<_0x5dcabe['length'];++_0x1928ab){const _0x399022=_0x5dcabe[_0x1928ab],_0x5d825b=_0x1fee78['resolve'](_0x399022);let _0x463302=_0x2fdedd[_0x5d825b&&_0x5d825b['targetPath']||null];if(!_0x463302&&_0x5d825b){_0x463302={'target':_0x5d825b,'value':[],'curves':0x0,'blendCounter':0x0};for(let _0x4b119d=0x2b5+0x9*-0x1f0+0x1*0xebb;_0x4b119d<_0x463302['target']['components'];++_0x4b119d)_0x463302['value']['push'](-0xf40+-0x6*-0xf7+0x976);if(_0x2fdedd[_0x5d825b['targetPath']]=_0x463302,_0x1fee78['animCompon'+'ent']){if(!_0x1fee78['animCompon'+'ent']['targets'][_0x5d825b['targetPath']]){let _0x561577;_0x5d825b['targetPath']['substring'](_0x5d825b['targetPath']['length']-(-0x2386*-0x1+0x1*0x17ef+-0x3b68))==='localRotat'+'ion'?_0x561577=Vo['TYPE_QUAT']:_0x561577=Vo['TYPE_VEC3'],_0x1fee78['animCompon'+'ent']['targets'][_0x5d825b['targetPath']]=new Vo(_0x1fee78['animCompon'+'ent'],_0x561577);}_0x1fee78['animCompon'+'ent']['targets'][_0x5d825b['targetPath']]['layerCount'+'er']++,_0x1fee78['animCompon'+'ent']['targets'][_0x5d825b['targetPath']]['setMask'](_0x1fee78['layerIndex'],-0x1*-0x1fe4+-0x242*0x5+0x1499*-0x1);}}_0x463302&&(_0x463302['curves']++,_0x3f2b5d['push'](_0xbe20d3['_results'][_0x5b72b0]),_0xc67d8f['push'](_0x463302));}}this['_clips']['push'](_0x3a32c2),this['_inputs']['push'](_0x3f2b5d),this['_outputs']['push'](_0xc67d8f);}['removeClip'](_0x2c660e){const _0x4a3cf1=this['_targets'],_0x1f2728=this['_binder'],_0x2bc8c9=this['_clips'],_0x54c8be=_0x2bc8c9[_0x2c660e]['track']['curves'];for(let _0x8a9a4b=-0x43*0x8f+0x20e7+-0x2*-0x243;_0x8a9a4b<_0x54c8be['length'];++_0x8a9a4b){const _0x305b39=_0x54c8be[_0x8a9a4b]['paths'];for(let _0x13d2b5=0x1*0x19bf+0x337*0x7+0x4*-0xc10;_0x13d2b5<_0x305b39['length'];++_0x13d2b5){const _0x1f4fb7=_0x305b39[_0x13d2b5],_0xa75b12=this['_binder']['resolve'](_0x1f4fb7);_0xa75b12&&(_0xa75b12['curves']--,_0xa75b12['curves']===0x3*0x1be+0x56e*-0x1+0x1a*0x2&&(_0x1f2728['unresolve'](_0x1f4fb7),delete _0x4a3cf1[_0xa75b12['targetPath']],_0x1f2728['animCompon'+'ent']&&_0x1f2728['animCompon'+'ent']['targets'][_0xa75b12['targetPath']]['layerCount'+'er']--));}}_0x2bc8c9['splice'](_0x2c660e,-0x204d+0x1a69*-0x1+-0x1*-0x3ab7),this['_inputs']['splice'](_0x2c660e,-0xe2d+-0x1*0x132d+-0x215b*-0x1),this['_outputs']['splice'](_0x2c660e,-0x22c8+-0xeef+0x31b8);}['removeClip'+'s'](){for(;this['_clips']['length']>-0x577+-0x1f94+0x147*0x1d;)this['removeClip'](0x14fb+0x169b+0x1*-0x2b96);}['updateClip'+'Track'](_0x25f19c,_0x34e3e7){this['_clips']['forEach'](_0x3c75a7=>{_0x3c75a7['name']['includes'](_0x25f19c)&&(_0x3c75a7['track']=_0x34e3e7);}),this['rebind']();}['findClip'](_0xecdeab){const _0x2c316f=this['_clips'];for(let _0x3bd3bb=-0x1511+-0x1847+0x8*0x5ab;_0x3bd3bb<_0x2c316f['length'];++_0x3bd3bb){const _0x2fdeb3=_0x2c316f[_0x3bd3bb];if(_0x2fdeb3['name']===_0xecdeab)return _0x2fdeb3;}return null;}['rebind'](){this['_binder']['rebind'](),this['_targets']={};const _0x439fc5=[...this['clips']];this['removeClip'+'s'](),_0x439fc5['forEach'](_0x19215f=>{this['addClip'](_0x19215f);});}['assignMask'](_0x41f6e6){return this['_binder']['assignMask'](_0x41f6e6);}['update'](_0x265c50,_0x379f5a=!(-0x1607+-0x5*-0x359+-0x54a*-0x1)){const _0x3abea7=this['_clips'],_0x4c5b47=_0x3abea7['map']((_0x19ffe7,_0x13b121)=>_0x13b121);Ht['stableSort'](_0x4c5b47,(_0x36a517,_0x178867)=>_0x3abea7[_0x36a517]['blendOrder']<_0x3abea7[_0x178867]['blendOrder']);for(let _0xd81608=0x934+0x1766+0xd*-0x282;_0xd81608<_0x4c5b47['length'];++_0xd81608){const _0x39e399=_0x4c5b47[_0xd81608],_0xb852b4=_0x3abea7[_0x39e399],_0x16992c=this['_inputs'][_0x39e399],_0x44b3a2=this['_outputs'][_0x39e399],_0x11f9f7=_0xb852b4['blendWeigh'+'t'];if(_0x11f9f7>-0xa76+-0x1b7a+0x25f0&&_0xb852b4['_update'](_0x265c50),!_0x379f5a)break;let _0x4c01ee,_0x9e0551,_0x35a795;if(_0x11f9f7>=0xcae+-0x8bb+0xca*-0x5){for(let _0x15122f=-0xa*0x1c9+0x7*-0x1fa+0x2a4*0xc;_0x15122f<_0x16992c['length'];++_0x15122f)_0x4c01ee=_0x16992c[_0x15122f],_0x9e0551=_0x44b3a2[_0x15122f],_0x35a795=_0x9e0551['value'],Ht['set'](_0x35a795,_0x4c01ee,_0x9e0551['target']['type']),_0x9e0551['blendCount'+'er']++;}else{if(_0x11f9f7>-0xca*-0x23+-0x2023+-0x59*-0xd){for(let _0x5bc43f=0x1318+-0x19de+-0x6c6*-0x1;_0x5bc43f<_0x16992c['length'];++_0x5bc43f)_0x4c01ee=_0x16992c[_0x5bc43f],_0x9e0551=_0x44b3a2[_0x5bc43f],_0x35a795=_0x9e0551['value'],_0x9e0551['blendCount'+'er']===-0x13e3+-0x1813+-0x296*-0x11?Ht['set'](_0x35a795,_0x4c01ee,_0x9e0551['target']['type']):Ht['blend'](_0x35a795,_0x4c01ee,_0x11f9f7,_0x9e0551['target']['type']),_0x9e0551['blendCount'+'er']++;}}}const _0x2fb3aa=this['_targets'],_0x5154df=this['_binder'];for(const _0x1b9c1c in _0x2fb3aa)if(_0x2fb3aa['hasOwnProp'+'erty'](_0x1b9c1c)){const _0x4e3c23=_0x2fb3aa[_0x1b9c1c];if(_0x5154df['animCompon'+'ent']&&_0x4e3c23['target']['isTransfor'+'m']){const _0x568f0d=_0x5154df['animCompon'+'ent']['targets'][_0x1b9c1c];_0x568f0d['counter']===_0x568f0d['layerCount'+'er']&&(_0x568f0d['counter']=0x11c4+0x8b4*0x1+-0xd3c*0x2),_0x568f0d['path']||(_0x568f0d['path']=_0x1b9c1c,_0x568f0d['baseValue']=_0x4e3c23['target']['get'](),_0x568f0d['setter']=_0x4e3c23['target']['set']),_0x568f0d['updateValu'+'e'](_0x5154df['layerIndex'],_0x4e3c23['value']),_0x568f0d['counter']++;}else _0x4e3c23['target']['set'](_0x4e3c23['value']);_0x4e3c23['blendCount'+'er']=0x304*-0x5+-0x1*0x155e+0x2472;}this['_binder']['update'](_0x265c50);}}class Hv{constructor(_0x33c2cb){this['_events']=[..._0x33c2cb],this['_events']['sort']((_0x403cc1,_0x1e5bf5)=>_0x403cc1['time']-_0x1e5bf5['time']);}get['events'](){return this['_events'];}}const $h=class $h{constructor(_0x4d99e6,_0x4ce405,_0x5a84eb,_0x590aae,_0x361511,_0x338d3e=new Hv([])){this['_name']=_0x4d99e6,this['_duration']=_0x4ce405,this['_inputs']=_0x5a84eb,this['_outputs']=_0x590aae,this['_curves']=_0x361511,this['_animEvent'+'s']=_0x338d3e;}get['name'](){return this['_name'];}get['duration'](){return this['_duration'];}get['inputs'](){return this['_inputs'];}get['outputs'](){return this['_outputs'];}get['curves'](){return this['_curves'];}set['events'](_0xc5d5d3){this['_animEvent'+'s']=_0xc5d5d3;}get['events'](){return this['_animEvent'+'s']['events'];}['eval'](_0x362640,_0x28d5ad){_0x28d5ad['_time']=_0x362640;const _0x4db212=this['_inputs'],_0x4d3cad=this['_outputs'],_0x5d919c=this['_curves'],_0x14c7f1=_0x28d5ad['_cache'],_0x48731a=_0x28d5ad['_results'];for(let _0x342639=0x164f+0x35*0x52+-0x2749;_0x342639<_0x4db212['length'];++_0x342639)_0x14c7f1[_0x342639]['update'](_0x362640,_0x4db212[_0x342639]['_data']);for(let _0x5e3190=-0x475*-0x7+0x2e8+-0x221b*0x1;_0x5e3190<_0x5d919c['length'];++_0x5e3190){const _0x2d4e9c=_0x5d919c[_0x5e3190],_0x3322fb=_0x4d3cad[_0x2d4e9c['_output']],_0x5dfa52=_0x48731a[_0x5e3190];_0x14c7f1[_0x2d4e9c['_input']]['eval'](_0x5dfa52,_0x2d4e9c['_interpola'+'tion'],_0x3322fb);}}};h($h,'EMPTY',Object['freeze'](new $h('empty',Number['MAX_VALUE'],[],[],[])));let Qi=$h;class ra{static['joinPath'](_0x18b5df,_0x55bb02){_0x55bb02=_0x55bb02||'.';const _0x3e9a8f=function(_0x1838de){return _0x1838de['replace'](/\\/g,'\x5c\x5c')['replace'](new RegExp('\x5c'+_0x55bb02,'g'),'\x5c'+_0x55bb02);};return _0x18b5df['map'](_0x3e9a8f)['join'](_0x55bb02);}static['splitPath'](_0xeb0ba1,_0x1539c2){_0x1539c2=_0x1539c2||'.';const _0xf7ca79=[];let _0x2c6856='',_0x146c5a=0x1cb4+0x65*-0x2f+-0xa29;for(;_0x146c5a<_0xeb0ba1['length'];){let _0x40cc5e=_0xeb0ba1[_0x146c5a++];_0x40cc5e==='\x5c'&&_0x146c5a<_0xeb0ba1['length']?(_0x40cc5e=_0xeb0ba1[_0x146c5a++],_0x40cc5e==='\x5c'||_0x40cc5e===_0x1539c2?_0x2c6856+=_0x40cc5e:_0x2c6856+='\x5c'+_0x40cc5e):_0x40cc5e===_0x1539c2?(_0xf7ca79['push'](_0x2c6856),_0x2c6856=''):_0x2c6856+=_0x40cc5e;}return _0x2c6856['length']>-0x79e+-0x6*-0x31+0x678&&_0xf7ca79['push'](_0x2c6856),_0xf7ca79;}static['encode'](_0x5bf5cb,_0x330177,_0x474c94){return(Array['isArray'](_0x5bf5cb)?_0x5bf5cb['join']('/'):_0x5bf5cb)+'/'+_0x330177+'/'+(Array['isArray'](_0x474c94)?_0x474c94['join']('/'):_0x474c94);}['resolve'](_0x6cfded){return null;}['unresolve'](_0x510c36){}['update'](_0x4383bf){}}class xu{constructor(_0x54d4be,_0x32b1ab,_0x567975,_0xf43d98){_0x54d4be['set']?(this['_set']=_0x54d4be['set'],this['_get']=_0x54d4be['get']):this['_set']=_0x54d4be,this['_type']=_0x32b1ab,this['_component'+'s']=_0x567975,this['_targetPat'+'h']=_0xf43d98,this['_isTransfo'+'rm']=this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(-0x2b*0x43+-0xacb*-0x3+0x437*-0x5))==='localRotat'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(-0x3b*0x4b+-0x2205+0x335b*0x1))==='localPosit'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0xf3c+-0xd*-0x1cd+-0x269b))==='localScale';}get['set'](){return this['_set'];}get['get'](){return this['_get'];}get['type'](){return this['_type'];}get['components'](){return this['_component'+'s'];}get['targetPath'](){return this['_targetPat'+'h'];}get['isTransfor'+'m'](){return this['_isTransfo'+'rm'];}}class Sr{constructor(_0x1a2f27){h(this,'_isPathInM'+'ask',(_0x399236,_0x4347ca)=>{const _0x27039d=this['_mask'][_0x399236];if(_0x27039d){if(_0x27039d['children']||_0x4347ca&&_0x27039d['value']!==!(-0x1*-0xac9+-0xa5*-0x39+-0x2f85))return!(-0x571+0x15*0x1c9+-0x125*0x1c);}else return!(-0x1*-0x128c+-0x3*-0x8e6+-0x2d3d);return!(-0x11*0x20+0x171c+0x1*-0x14fb);});if(this['graph']=_0x1a2f27,!_0x1a2f27)return;this['_mask']=null;const _0x58b995={},_0x2349f9=function(_0x2faa92){_0x58b995[_0x2faa92['name']]=_0x2faa92;for(let _0x5c7c6a=0x1*-0x8c3+0x1*-0x713+-0x7eb*-0x2;_0x5c7c6a<_0x2faa92['children']['length'];++_0x5c7c6a)_0x2349f9(_0x2faa92['children'][_0x5c7c6a]);};_0x2349f9(_0x1a2f27),this['nodes']=_0x58b995,this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={};const _0x30f04e=function(_0x1027f0){let _0x61f8e=_0x1027f0;for(;_0x61f8e&&!(_0x61f8e instanceof lt);)_0x61f8e=_0x61f8e['parent'];let _0x1c03bc;return _0x61f8e&&(_0x61f8e['render']?_0x1c03bc=_0x61f8e['render']['meshInstan'+'ces']:_0x61f8e['model']&&(_0x1c03bc=_0x61f8e['model']['meshInstan'+'ces'])),_0x1c03bc;};this['nodeCounts']={},this['activeNode'+'s']=[],this['handlers']={'localPosition':function(_0x4d8302){const _0x1b9d06=_0x4d8302['localPosit'+'ion'],_0x31cc73=function(_0x20d155){_0x1b9d06['set'](..._0x20d155);};return Sr['createAnim'+'Target'](_0x31cc73,'vector',0x6db+-0x1*-0xc17+0x12ef*-0x1,_0x4d8302,'localPosit'+'ion');},'localRotation':function(_0xc305c8){const _0x46ec27=_0xc305c8['localRotat'+'ion'],_0x4ac196=function(_0x2c93fc){_0x46ec27['set'](..._0x2c93fc);};return Sr['createAnim'+'Target'](_0x4ac196,'quaternion',0x64*0x5e+0x2*-0x12c1+0xce,_0xc305c8,'localRotat'+'ion');},'localScale':function(_0xec145){const _0x4fab88=_0xec145['localScale'],_0x51ff1e=function(_0x3ebc0e){_0x4fab88['set'](..._0x3ebc0e);};return Sr['createAnim'+'Target'](_0x51ff1e,'vector',0x37d*-0xb+-0x1146+0x37a8,_0xec145,'localScale');},'weight':function(_0x2d4a8e,_0x516e94){_0x516e94['indexOf']('name.')===-0x145*0x2+-0x1*-0x1ae9+-0x185f?_0x516e94=_0x516e94['replace']('name.',''):_0x516e94=Number(_0x516e94);const _0x531442=_0x30f04e(_0x2d4a8e);let _0x2da716;if(_0x531442){for(let _0x2c941c=-0x1006+0x1841+-0x83b;_0x2c941c<_0x531442['length'];++_0x2c941c)if(_0x531442[_0x2c941c]['node']['name']===_0x2d4a8e['name']&&_0x531442[_0x2c941c]['morphInsta'+'nce']){const _0x43e9d3=_0x531442[_0x2c941c]['morphInsta'+'nce'],_0x18d3bd=_0x220971=>{_0x43e9d3['setWeight'](_0x516e94,_0x220971[0xf91+0xaea+-0x1a7b]);};_0x2da716||(_0x2da716=[]),_0x2da716['push'](_0x18d3bd);}}if(_0x2da716){const _0x39372f=_0x1287c6=>{for(let _0x31176c=-0x4*-0x5d2+-0x1726+-0x22;_0x31176c<_0x2da716['length'];++_0x31176c)_0x2da716[_0x31176c](_0x1287c6);};return Sr['createAnim'+'Target'](_0x39372f,'number',0x1e65*-0x1+0x1b8e+-0xb6*-0x4,_0x2d4a8e,'weight.'+_0x516e94);}return null;},'materialTexture':(_0x1bbe2f,_0x17bbe4)=>{const _0x4ceba8=_0x30f04e(_0x1bbe2f);if(_0x4ceba8){let _0x53ba10;for(let _0x47963c=-0x6b3+-0x125*0x5+0xc6c;_0x47963c<_0x4ceba8['length'];++_0x47963c)if(_0x4ceba8[_0x47963c]['node']['name']===_0x1bbe2f['name']){_0x53ba10=_0x4ceba8[_0x47963c];break;}if(_0x53ba10){const _0x5965ee=_0x24314c=>{const _0x448a4d=this['animCompon'+'ent']['system']['app']['assets']['get'](_0x24314c[-0x1a43+0x7*-0x445+0x3826]);_0x448a4d&&_0x448a4d['resource']&&_0x448a4d['type']==='texture'&&(_0x53ba10['material'][_0x17bbe4]=_0x448a4d['resource'],_0x53ba10['material']['update']());};return Sr['createAnim'+'Target'](_0x5965ee,'vector',0x15*-0x79+0x1*-0x15d4+0x1fc2,_0x1bbe2f,'materialTe'+'xture','material');}}return null;}};}['_isPathAct'+'ive'](_0x94f1b4){if(!this['_mask'])return!(-0x133*-0xa+0x2*-0x3d3+0x1*-0x458);const _0x101a06=[_0x94f1b4['entityPath'][0x3c2+-0x12a5*-0x1+-0x1667],this['graph']['name']];for(let _0xfc0ced=-0x3d*0x7b+-0x15f6+0x7*0x753;_0xfc0ced<_0x101a06['length'];++_0xfc0ced){let _0x1d7335=_0x101a06[_0xfc0ced];if(this['_isPathInM'+'ask'](_0x1d7335,_0x94f1b4['entityPath']['length']===0x1*0x17ae+-0x1a5*-0x10+-0x31fd))return!(-0x5ed+-0x2f8+0x8e5);for(let _0x5d6eb5=-0x74d+0xf3f+-0x7f1;_0x5d6eb5<_0x94f1b4['entityPath']['length'];_0x5d6eb5++)if(_0x1d7335+='/'+_0x94f1b4['entityPath'][_0x5d6eb5],this['_isPathInM'+'ask'](_0x1d7335,_0x5d6eb5===_0x94f1b4['entityPath']['length']-(-0x10ce*-0x2+0x19*-0x5b+-0x18b8)))return!(-0x1aa1+-0x39f*-0x2+0x1363);}return!(0x2395+0x484*0x1+-0x2818);}['findNode'](_0x3447a5){if(!this['_isPathAct'+'ive'](_0x3447a5))return null;let _0x4576f4;if(this['graph']&&(_0x4576f4=this['graph']['findByPath'](_0x3447a5['entityPath']),_0x4576f4||(_0x4576f4=this['graph']['findByPath'](_0x3447a5['entityPath']['slice'](-0x2*0xf8f+0x1336+0xbe9)))),!_0x4576f4){_0x4576f4=this['nodes'][_0x3447a5['entityPath'][_0x3447a5['entityPath']['length']-(0x20e9+-0x1521+-0xc9*0xf)]||''];const _0x1499c6=ra['encode'](_0x3447a5['entityPath'][_0x3447a5['entityPath']['length']-(-0x55c+0x3f*0x23+-0x340)]||'','graph',_0x3447a5['propertyPa'+'th']);this['visitedFal'+'lbackGraph'+'Paths'][_0x1499c6]===-0x25e4*0x1+-0x1*0x1a6f+0x4054&&w['warnOnce']('Anim\x20Binde'+'r:\x20Multipl'+'e\x20animatio'+'n\x20curves\x20w'+'ith\x20the\x20pa'+'th\x20'+_0x1499c6+('\x20are\x20prese'+'nt\x20in\x20the\x20')+this['graph']['path']+('\x20graph\x20whi'+'ch\x20may\x20res'+'ult\x20in\x20the'+'\x20incorrect'+'\x20binding\x20o'+'f\x20animatio'+'ns')),Number['isFinite'](this['visitedFal'+'lbackGraph'+'Paths'][_0x1499c6])?this['visitedFal'+'lbackGraph'+'Paths'][_0x1499c6]++:this['visitedFal'+'lbackGraph'+'Paths'][_0x1499c6]=-0x1c13*-0x1+-0xf2e+-0xce5;}return _0x4576f4;}static['createAnim'+'Target'](_0x2289a5,_0x211658,_0x5d13ea,_0x2ab206,_0x115694,_0x58d229){const _0x12805c=ra['encode'](_0x2ab206['path'],_0x58d229||'entity',_0x115694);return new xu(_0x2289a5,_0x211658,_0x5d13ea,_0x12805c);}['resolve'](_0x3dd09b){const _0x26f06d=ra['encode'](_0x3dd09b['entityPath'],_0x3dd09b['component'],_0x3dd09b['propertyPa'+'th']);let _0x47e9cb=this['targetCach'+'e'][_0x26f06d];if(_0x47e9cb)return _0x47e9cb;const _0x490955=this['findNode'](_0x3dd09b);if(!_0x490955)return null;const _0x107335=this['handlers'][_0x3dd09b['propertyPa'+'th']];return!_0x107335||(_0x47e9cb=_0x107335(_0x490955),!_0x47e9cb)?null:(this['targetCach'+'e'][_0x26f06d]=_0x47e9cb,this['nodeCounts'][_0x490955['path']]?this['nodeCounts'][_0x490955['path']]++:(this['activeNode'+'s']['push'](_0x490955),this['nodeCounts'][_0x490955['path']]=-0x16c5+-0x17e5+0xd*0x397),_0x47e9cb);}['unresolve'](_0x327384){if(_0x327384['component']!=='graph')return;const _0x4429db=this['nodes'][_0x327384['entityPath'][_0x327384['entityPath']['length']-(0x209c+-0x1222*-0x1+0x1*-0x32bd)]||''];if(this['nodeCounts'][_0x4429db['path']]--,this['nodeCounts'][_0x4429db['path']]===0x581+0x16ae+-0x1c2f){const _0x42ea2d=this['activeNode'+'s'],_0x3dc7a7=_0x42ea2d['indexOf'](_0x4429db['node']),_0x2dcefa=_0x42ea2d['length'];_0x3dc7a7<_0x2dcefa-(0x6cb*-0x1+0x3*-0x338+0x144*0xd)&&(_0x42ea2d[_0x3dc7a7]=_0x42ea2d[_0x2dcefa-(0x61*-0x39+-0x95*0xc+0x1c96)]),_0x42ea2d['pop']();}}['update'](_0x5bf5a5){const _0x45f890=this['activeNode'+'s'];for(let _0x168ca7=0x2*0x305+0x10df+-0xff*0x17;_0x168ca7<_0x45f890['length'];++_0x168ca7)_0x45f890[_0x168ca7]['_dirtifyLo'+'cal']();}['assignMask'](_0x2a57c3){return _0x2a57c3!==this['_mask']?(this['_mask']=_0x2a57c3,!(-0x52a+-0x4*-0x7bf+-0x19d2)):!(0x10*-0x238+0x2653*0x1+-0x2d2);}}class Wv extends we{constructor(){super(...arguments),h(this,'_animation'+'s',{}),h(this,'_assets',[]),h(this,'_loop',!(-0x3*0x45b+-0xcd4*-0x2+0x1*-0xc97)),h(this,'animEvalua'+'tor',null),h(this,'model',null),h(this,'skeleton',null),h(this,'fromSkel',null),h(this,'toSkel',null),h(this,'animations'+'Index',{}),h(this,'prevAnim',null),h(this,'currAnim',null),h(this,'blend',-0xb93*0x2+0x128b*0x1+0x83*0x9),h(this,'blending',!(-0x131f+-0x3*0x4e1+-0x43*-0x81)),h(this,'blendSpeed',0x4*0x552+-0x1b82+0x63a),h(this,'activate',!(0x1184+0x185f+-0x29e3)),h(this,'speed',-0x1*0x26af+-0x1c4a+0x1*0x42fa);}set['animations'](_0x17db88){this['_animation'+'s']=_0x17db88,this['onSetAnima'+'tions']();}get['animations'](){return this['_animation'+'s'];}set['assets'](_0x3539e0){const _0x35921e=this['_assets'];if(_0x35921e&&_0x35921e['length']){for(let _0xbf7c69=-0x1a2d*0x1+-0x1*-0x1dcd+-0xe8*0x4;_0xbf7c69<_0x35921e['length'];_0xbf7c69++)if(_0x35921e[_0xbf7c69]){const _0x3536aa=this['system']['app']['assets']['get'](_0x35921e[_0xbf7c69]);if(_0x3536aa){_0x3536aa['off']('change',this['onAssetCha'+'nged'],this),_0x3536aa['off']('remove',this['onAssetRem'+'oved'],this);const _0x126291=this['animations'+'Index'][_0x3536aa['id']];this['currAnim']===_0x126291&&this['_stopCurre'+'ntAnimatio'+'n'](),delete this['animations'][_0x126291],delete this['animations'+'Index'][_0x3536aa['id']];}}}this['_assets']=_0x3539e0;const _0x5b902a=_0x3539e0['map'](_0x2e2f4a=>_0x2e2f4a instanceof pe?_0x2e2f4a['id']:_0x2e2f4a);this['loadAnimat'+'ionAssets'](_0x5b902a);}get['assets'](){return this['_assets'];}set['currentTim'+'e'](_0x3f6760){if(this['skeleton']&&(this['skeleton']['currentTim'+'e']=_0x3f6760,this['skeleton']['addTime'](0x6e7+-0xbf*0xe+0x38b),this['skeleton']['updateGrap'+'h']()),this['animEvalua'+'tor']){const _0xdfa0dd=this['animEvalua'+'tor']['clips'];for(let _0x3d9685=-0x15*0x154+0x1*0x1cf9+-0x115;_0x3d9685<_0xdfa0dd['length'];++_0x3d9685)_0xdfa0dd[_0x3d9685]['time']=_0x3f6760;}}get['currentTim'+'e'](){if(this['skeleton'])return this['skeleton']['_time'];if(this['animEvalua'+'tor']){const _0x313e9b=this['animEvalua'+'tor']['clips'];if(_0x313e9b['length']>0x1457+-0x35*0x7f+0x2*0x2fa)return _0x313e9b[_0x313e9b['length']-(-0x1b93+0x1*-0x17e7+0x337b)]['time'];}return-0x3c0+0x1c4b+-0x188b;}get['duration'](){return this['currAnim']?this['animations'][this['currAnim']]['duration']:(w['warn']('No\x20animati'+'on\x20is\x20play'+'ing\x20to\x20get'+'\x20a\x20duratio'+'n.\x20Returni'+'ng\x200.'),0x14dc+0x12a3+-0x277f);}set['loop'](_0x1a2c98){if(this['_loop']=_0x1a2c98,this['skeleton']&&(this['skeleton']['looping']=_0x1a2c98),this['animEvalua'+'tor']){for(let _0xf82290=-0x1c53+0x5e*-0x6+0x1e87;_0xf82290<this['animEvalua'+'tor']['clips']['length'];++_0xf82290)this['animEvalua'+'tor']['clips'][_0xf82290]['loop']=_0x1a2c98;}}get['loop'](){return this['_loop'];}['play'](_0x34ef07,_0x55598e=0xe6b+-0x63e+-0x5b*0x17){if(!(!this['enabled']||!this['entity']['enabled'])){if(!this['animations'][_0x34ef07]){w['error']('Trying\x20to\x20'+'play\x20anima'+'tion\x20\x27'+_0x34ef07+('\x27\x20which\x20do'+'esn\x27t\x20exis'+'t'));return;}if(this['prevAnim']=this['currAnim'],this['currAnim']=_0x34ef07,this['model']){!this['skeleton']&&!this['animEvalua'+'tor']&&this['_createAni'+'mationCont'+'roller']();const _0x13fcdb=this['animations'][this['prevAnim']],_0x2221da=this['animations'][this['currAnim']];if(this['blending']=_0x55598e>0x230b+-0x1*-0x92c+0x2c37*-0x1&&!!this['prevAnim'],this['blending']&&(this['blend']=0x14f1+-0x1148+-0x1*0x3a9,this['blendSpeed']=(0x1*-0x20c+0x374+-0x167)/_0x55598e),this['skeleton']&&(this['blending']?(this['fromSkel']['animation']=_0x13fcdb,this['fromSkel']['addTime'](this['skeleton']['_time']),this['toSkel']['animation']=_0x2221da):this['skeleton']['animation']=_0x2221da),this['animEvalua'+'tor']){const _0x5436fd=this['animEvalua'+'tor'];if(this['blending']){for(;_0x5436fd['clips']['length']>0x1363*-0x1+-0x1fbd+0x3321;)_0x5436fd['removeClip'](0x1ca+0x9d1+-0xb9b);}else this['animEvalua'+'tor']['removeClip'+'s']();const _0xbb7073=new Dh(this['animations'][this['currAnim']],0x13*0x18c+-0x4bd*0x1+-0x18a7,-0x558+0x3*-0x694+0x1915,!(0x29*0x88+-0xb7d*-0x1+-0x2145),this['loop']);_0xbb7073['name']=this['currAnim'],_0xbb7073['blendWeigh'+'t']=this['blending']?-0x6a7*-0x5+0x18fa*0x1+-0x3a3d:0xe96+0x1109+-0x1f9e,_0xbb7073['reset'](),this['animEvalua'+'tor']['addClip'](_0xbb7073);}}this['playing']=!(0x18d8+0x11c9+0x1*-0x2aa1);}}['getAnimati'+'on'](_0x3d5d9d){return this['animations'][_0x3d5d9d];}['setModel'](_0xffa1cd){_0xffa1cd!==this['model']&&(this['_resetAnim'+'ationContr'+'oller'](),this['model']=_0xffa1cd,this['animations']&&this['currAnim']&&this['animations'][this['currAnim']]&&this['play'](this['currAnim']));}['onSetAnima'+'tions'](){const _0x57df95=this['entity']['model'];if(_0x57df95){const _0x570eee=_0x57df95['model'];_0x570eee&&_0x570eee!==this['model']&&this['setModel'](_0x570eee);}if(!this['currAnim']&&this['activate']&&this['enabled']&&this['entity']['enabled']){const _0x12c6ca=Object['keys'](this['_animation'+'s']);_0x12c6ca['length']>0x1d7b+0x97a+0x26f5*-0x1&&this['play'](_0x12c6ca[0x11d6+0x1cdb+-0x2eb1]);}}['_resetAnim'+'ationContr'+'oller'](){this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['_createAni'+'mationCont'+'roller'](){const _0x38a224=this['model'],_0x1c177a=this['animations'];let _0x1c5b7d=!(-0x2*0x44f+0x802+0x9d*0x1),_0x263475=!(-0x261+0x94*-0x2+-0x3*-0x12e);for(const _0x3d24a9 in _0x1c177a)_0x1c177a['hasOwnProp'+'erty'](_0x3d24a9)&&(_0x1c177a[_0x3d24a9]['constructo'+'r']===Qi?_0x263475=!(-0x223e+0x1155+0x10e9):_0x1c5b7d=!(-0x2*0x641+-0xd5e+0x19e*0x10));const _0x4717aa=_0x38a224['getGraph']();_0x1c5b7d?(this['fromSkel']=new Sf(_0x4717aa),this['toSkel']=new Sf(_0x4717aa),this['skeleton']=new Sf(_0x4717aa),this['skeleton']['looping']=this['loop'],this['skeleton']['setGraph'](_0x4717aa)):_0x263475&&(this['animEvalua'+'tor']=new Gv(new Sr(this['entity'])));}['loadAnimat'+'ionAssets'](_0x5e2997){if(!_0x5e2997||!_0x5e2997['length'])return;const _0x3c6258=this['system']['app']['assets'],_0xd9c797=_0x59ef0a=>{if(_0x59ef0a['resources']['length']>-0x3*-0x7a3+0x1ba1+0x1*-0x3289){for(let _0x2d15d5=0x1dca+0x16*0x1+-0x1de0;_0x2d15d5<_0x59ef0a['resources']['length'];_0x2d15d5++)this['animations'][_0x59ef0a['resources'][_0x2d15d5]['name']]=_0x59ef0a['resources'][_0x2d15d5],this['animations'+'Index'][_0x59ef0a['id']]=_0x59ef0a['resources'][_0x2d15d5]['name'];}else this['animations'][_0x59ef0a['name']]=_0x59ef0a['resource'],this['animations'+'Index'][_0x59ef0a['id']]=_0x59ef0a['name'];this['animations']=this['animations'];},_0x5a54f4=_0x1005c6=>{_0x1005c6['off']('change',this['onAssetCha'+'nged'],this),_0x1005c6['on']('change',this['onAssetCha'+'nged'],this),_0x1005c6['off']('remove',this['onAssetRem'+'oved'],this),_0x1005c6['on']('remove',this['onAssetRem'+'oved'],this),_0x1005c6['resource']?_0xd9c797(_0x1005c6):(_0x1005c6['once']('load',_0xd9c797,this),this['enabled']&&this['entity']['enabled']&&_0x3c6258['load'](_0x1005c6));};for(let _0x5040e3=0x5*0x691+-0x1803*-0x1+-0x38d8,_0x5ab8ec=_0x5e2997['length'];_0x5040e3<_0x5ab8ec;_0x5040e3++){const _0x1293a9=_0x3c6258['get'](_0x5e2997[_0x5040e3]);_0x1293a9?_0x5a54f4(_0x1293a9):_0x3c6258['on']('add:'+_0x5e2997[_0x5040e3],_0x5a54f4);}}['onAssetCha'+'nged'](_0x2a9f63,_0x1c1337,_0x17c4d1,_0x257746){if(_0x1c1337==='resource'||_0x1c1337==='resources'){if(_0x1c1337==='resources'&&_0x17c4d1&&_0x17c4d1['length']===-0x10c2+-0x1913+0x29d5&&(_0x17c4d1=null),_0x17c4d1){let _0x5c2317=!(0x3*-0x106+-0x16e8+0x19fb);if(_0x17c4d1['length']>0x783*-0x1+0xce*-0x2f+0x2d56){if(_0x257746&&_0x257746['length']>-0x3*-0x8f4+0x1bd9+-0x36b4){for(let _0x5d9a03=0x1c19*-0x1+0x11*-0x1fd+-0x6*-0xa51;_0x5d9a03<_0x257746['length'];_0x5d9a03++)delete this['animations'][_0x257746[_0x5d9a03]['name']];}else delete this['animations'][_0x2a9f63['name']];_0x5c2317=!(-0x1c72+0x83d+0x1436);for(let _0x31a6e7=-0x1*0x18be+0x117+0x17a7;_0x31a6e7<_0x17c4d1['length'];_0x31a6e7++)this['animations'][_0x17c4d1[_0x31a6e7]['name']]=_0x17c4d1[_0x31a6e7],!_0x5c2317&&this['currAnim']===_0x17c4d1[_0x31a6e7]['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x5c2317=!(-0x1a5*0x9+-0x1747*0x1+0x2614*0x1),this['play'](_0x17c4d1[_0x31a6e7]['name']));_0x5c2317||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}else{if(_0x257746&&_0x257746['length']>0xe22+0x2b*-0x95+-0x12*-0x9b){for(let _0x502d4b=0x3e9*-0x1+0x3e7+0x1*0x2;_0x502d4b<_0x257746['length'];_0x502d4b++)delete this['animations'][_0x257746[_0x502d4b]['name']];}this['animations'][_0x2a9f63['name']]=_0x17c4d1[-0x2400+0x7d*-0x40+0x4340]||_0x17c4d1,_0x5c2317=!(-0x16*0x153+-0x12bb+0x16*0x22d),this['currAnim']===_0x2a9f63['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x5c2317=!(0x22cb*0x1+0x1*0x71f+-0x29ea),this['play'](_0x2a9f63['name'])),_0x5c2317||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}this['animations'+'Index'][_0x2a9f63['id']]=_0x2a9f63['name'];}else{if(_0x257746['length']>-0x1b2+0x252f+0x2*-0x11be){for(let _0x33aef3=-0xc9b+0x5*0x70f+0xb0*-0x21;_0x33aef3<_0x257746['length'];_0x33aef3++)delete this['animations'][_0x257746[_0x33aef3]['name']],this['currAnim']===_0x257746[_0x33aef3]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x2a9f63['name']],this['currAnim']===_0x2a9f63['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x2a9f63['id']];}}}['onAssetRem'+'oved'](_0x75996d){if(_0x75996d['off']('remove',this['onAssetRem'+'oved'],this),this['animations']){if(_0x75996d['resources']['length']>0x2401+0x1300+-0x3700){for(let _0x5ac8fe=0x16d8+0x160f*0x1+-0x2ce7;_0x5ac8fe<_0x75996d['resources']['length'];_0x5ac8fe++)delete this['animations'][_0x75996d['resources'][_0x5ac8fe]['name']],this['currAnim']===_0x75996d['resources'][_0x5ac8fe]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x75996d['name']],this['currAnim']===_0x75996d['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x75996d['id']];}}['_stopCurre'+'ntAnimatio'+'n'](){if(this['currAnim']=null,this['playing']=!(-0x228d+-0xf96+0x1*0x3224),this['skeleton']&&(this['skeleton']['currentTim'+'e']=0x2099+0xce8+-0x2d81,this['skeleton']['animation']=null),this['animEvalua'+'tor']){for(let _0x4165bc=0x1ab0+-0x16e3+0x1*-0x3cd;_0x4165bc<this['animEvalua'+'tor']['clips']['length'];++_0x4165bc)this['animEvalua'+'tor']['clips'][_0x4165bc]['stop']();this['animEvalua'+'tor']['update'](-0x2*0x8f6+-0x2*0xaab+0x2742),this['animEvalua'+'tor']['removeClip'+'s']();}}['onEnable'](){super['onEnable']();const _0x491664=this['assets'],_0x267d6=this['system']['app']['assets'];if(_0x491664)for(let _0x2f9e72=-0xeb1+0xcfa+0x1b7,_0x6ff73=_0x491664['length'];_0x2f9e72<_0x6ff73;_0x2f9e72++){let _0x53e89e=_0x491664[_0x2f9e72];_0x53e89e instanceof pe||(_0x53e89e=_0x267d6['get'](_0x53e89e)),_0x53e89e&&!_0x53e89e['resource']&&_0x267d6['load'](_0x53e89e);}if(this['activate']&&!this['currAnim']){const _0x102fbe=Object['keys'](this['animations']);_0x102fbe['length']>0x430*-0x7+0x184b*-0x1+0x1*0x359b&&this['play'](_0x102fbe[-0x707*-0x1+-0x3*-0x6a1+-0x1aea]);}}['onBeforeRe'+'move'](){for(let _0x8ad7f5=0x6cb+-0x2*0x2f4+-0xe3;_0x8ad7f5<this['assets']['length'];_0x8ad7f5++){let _0x32b521=this['assets'][_0x8ad7f5];typeof _0x32b521=='number'&&(_0x32b521=this['system']['app']['assets']['get'](_0x32b521)),_0x32b521&&(_0x32b521['off']('change',this['onAssetCha'+'nged'],this),_0x32b521['off']('remove',this['onAssetRem'+'oved'],this));}this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['update'](_0x3f9cb1){if(this['blending']&&(this['blend']+=_0x3f9cb1*this['blendSpeed'],this['blend']>=-0x1*0x1a7d+-0x73+-0x3*-0x8fb&&(this['blend']=-0x242f+-0x1473+-0x1b*-0x219)),this['playing']){const _0x19a925=this['skeleton'];if(_0x19a925!==null&&this['model']!==null){if(this['blending'])_0x19a925['blend'](this['fromSkel'],this['toSkel'],this['blend']);else{const _0x40bd27=_0x3f9cb1*this['speed'];_0x19a925['addTime'](_0x40bd27),this['speed']>-0x1*-0xc75+-0x159+-0xb1c&&_0x19a925['_time']===_0x19a925['animation']['duration']&&!this['loop']?this['playing']=!(-0x1466+-0xac1*-0x2+0x1*-0x11b):this['speed']<0xe97+-0xf1f+-0x22*-0x4&&_0x19a925['_time']===0x134+0x2114+-0x2248&&!this['loop']&&(this['playing']=!(0xb8e+0x1b8a+0x1*-0x2717));}this['blending']&&this['blend']===-0x25*0x63+0x3b*-0x35+0x1a87&&(_0x19a925['animation']=this['toSkel']['animation']),_0x19a925['updateGrap'+'h']();}}const _0x5bda74=this['animEvalua'+'tor'];if(_0x5bda74){for(let _0x47cdaf=-0x1cd5+-0x11*-0x1e7+-0x1c1*0x2;_0x47cdaf<_0x5bda74['clips']['length'];++_0x47cdaf){const _0x5bdb71=_0x5bda74['clips'][_0x47cdaf];_0x5bdb71['speed']=this['speed'],this['playing']?_0x5bdb71['resume']():_0x5bdb71['pause']();}this['blending']&&_0x5bda74['clips']['length']>0x1dfe+0x1b07+0x52*-0xb2&&(_0x5bda74['clips'][-0xeda+-0x24d1+-0x19d6*-0x2]['blendWeigh'+'t']=this['blend']),_0x5bda74['update'](_0x3f9cb1);}this['blending']&&this['blend']===0xd*-0x122+-0x9*-0x1a1+0x12&&(this['blending']=!(-0x39+-0x9c9+0x1*0xa03));}}class LL{constructor(){this['enabled']=!(0x1*-0x1ca5+0x1d8e+0xe9*-0x1);}}const Tu=['enabled'];class RL extends ct{constructor(_0x1a766c){super(_0x1a766c),this['id']='animation',this['ComponentT'+'ype']=Wv,this['DataType']=LL,this['schema']=Tu,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x36290f,_0x2431a4,_0x204479){_0x204479=['activate','enabled','loop','speed','assets'];for(const _0x236c52 of _0x204479)_0x2431a4['hasOwnProp'+'erty'](_0x236c52)&&(_0x36290f[_0x236c52]=_0x2431a4[_0x236c52]);super['initialize'+'ComponentD'+'ata'](_0x36290f,_0x2431a4,Tu);}['cloneCompo'+'nent'](_0xd10de9,_0x1cd843){this['addCompone'+'nt'](_0x1cd843,{}),_0x1cd843['animation']['assets']=_0xd10de9['animation']['assets']['slice'](),_0x1cd843['animation']['speed']=_0xd10de9['animation']['speed'],_0x1cd843['animation']['loop']=_0xd10de9['animation']['loop'],_0x1cd843['animation']['activate']=_0xd10de9['animation']['activate'],_0x1cd843['animation']['enabled']=_0xd10de9['animation']['enabled'];const _0x38c24a={},_0x3fc66f=_0xd10de9['animation']['animations'];for(const _0x568a62 in _0x3fc66f)_0x3fc66f['hasOwnProp'+'erty'](_0x568a62)&&(_0x38c24a[_0x568a62]=_0x3fc66f[_0x568a62]);_0x1cd843['animation']['animations']=_0x38c24a;const _0x131b2a={},_0x4db369=_0xd10de9['animation']['animations'+'Index'];for(const _0x129d7b in _0x4db369)_0x4db369['hasOwnProp'+'erty'](_0x129d7b)&&(_0x131b2a[_0x129d7b]=_0x4db369[_0x129d7b]);return _0x1cd843['animation']['animations'+'Index']=_0x131b2a,_0x1cd843['animation'];}['onBeforeRe'+'move'](_0x3553c0,_0x2b3f88){_0x2b3f88['onBeforeRe'+'move']();}['onUpdate'](_0x175b11){const _0x329912=this['store'];for(const _0x4b8939 in _0x329912)if(_0x329912['hasOwnProp'+'erty'](_0x4b8939)){const _0x2cf952=_0x329912[_0x4b8939];_0x2cf952['data']['enabled']&&_0x2cf952['entity']['enabled']&&_0x2cf952['entity']['animation']['update'](_0x175b11);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Wv['prototype'],Tu);class ml{constructor(_0x3bcc8b,_0x55bd21,_0x2d098f,_0x145942,_0x3c9c85=0x3*-0x27b+-0x1*-0x1652+0x88*-0x1c){this['_state']=_0x3bcc8b,this['_parent']=_0x55bd21,this['_name']=_0x2d098f,Array['isArray'](_0x145942)?(this['_point']=new J(_0x145942[-0x1105+0x16*-0xc+-0x120d*-0x1],_0x145942[0x69f+0x120b+-0x18a9]),this['_pointLeng'+'th']=this['_point']['length']()):(this['_point']=_0x145942,this['_pointLeng'+'th']=_0x145942),this['_speed']=_0x3c9c85,this['_weightedS'+'peed']=-0x11*0x166+-0x2662*-0x1+-0xe9b*0x1,this['_weight']=-0x960+-0x26e3+0x3044,this['_animTrack']=null;}get['parent'](){return this['_parent'];}get['name'](){return this['_name'];}get['path'](){return this['_parent']?this['_parent']['path']+'.'+this['_name']:this['_name'];}get['point'](){return this['_point'];}get['pointLengt'+'h'](){return this['_pointLeng'+'th'];}set['weight'](_0x15f65d){this['_weight']=_0x15f65d;}get['weight'](){return this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['normalized'+'Weight'](){const _0x48f12c=this['_state']['totalWeigh'+'t'];return _0x48f12c===-0x5*-0x207+-0x576+-0x3f*0x13?0xb8*-0x11+-0x11*-0x5c+-0x44*-0x17:this['weight']/_0x48f12c;}get['speed'](){return this['_weightedS'+'peed']*this['_speed'];}get['absoluteSp'+'eed'](){return Math['abs'](this['_speed']);}set['weightedSp'+'eed'](_0x415aa8){this['_weightedS'+'peed']=_0x415aa8;}get['weightedSp'+'eed'](){return this['_weightedS'+'peed'];}set['animTrack'](_0x402893){this['_animTrack']=_0x402893;}get['animTrack'](){return this['_animTrack'];}}class Jn extends ml{constructor(_0x3b8ba3,_0x44636b,_0x3ed93f,_0x5284e2,_0x3b4d74,_0x1306f6,_0x4e3feb,_0x2aced5,_0x43cce9){super(_0x3b8ba3,_0x44636b,_0x3ed93f,_0x5284e2),this['_parameter'+'s']=_0x3b4d74,this['_parameter'+'Values']=new Array(_0x3b4d74['length']),this['_children']=[],this['_findParam'+'eter']=_0x43cce9,this['_syncAnima'+'tions']=_0x4e3feb!==!(-0x17af+-0xe7b+0xcb9*0x3),this['_pointCach'+'e']={};for(let _0x52fc77=-0xb*-0x301+0x3c9+-0x24d4;_0x52fc77<_0x1306f6['length'];_0x52fc77++){const _0x89bcf0=_0x1306f6[_0x52fc77];_0x89bcf0['children']?this['_children']['push'](_0x2aced5(_0x89bcf0['type'],_0x3b8ba3,this,_0x89bcf0['name'],0x12c3+-0x4e1*-0x1+-0x17a3,_0x89bcf0['parameter']?[_0x89bcf0['parameter']]:_0x89bcf0['parameters'],_0x89bcf0['children'],_0x89bcf0['syncAnimat'+'ions'],_0x2aced5,_0x43cce9)):this['_children']['push'](new ml(_0x3b8ba3,this,_0x89bcf0['name'],_0x89bcf0['point'],_0x89bcf0['speed']));}}get['weight'](){return this['calculateW'+'eights'](),this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['syncAnimat'+'ions'](){return this['_syncAnima'+'tions'];}['getChild'](_0x4223bc){for(let _0x3ef731=-0xf82+-0xb14+0x29*0xa6;_0x3ef731<this['_children']['length'];_0x3ef731++)if(this['_children'][_0x3ef731]['name']===_0x4223bc)return this['_children'][_0x3ef731];return null;}['updatePara'+'meterValue'+'s'](){let _0x36c8a4=!(0x1*0x1f9+0x65f*0x1+-0x858);for(let _0x4ff2e2=0x7*-0x285+-0x1*0xce5+0x1e88*0x1;_0x4ff2e2<this['_parameter'+'Values']['length'];_0x4ff2e2++){const _0x5ad22b=this['_findParam'+'eter'](this['_parameter'+'s'][_0x4ff2e2])['value'];this['_parameter'+'Values'][_0x4ff2e2]!==_0x5ad22b&&(this['_parameter'+'Values'][_0x4ff2e2]=_0x5ad22b,_0x36c8a4=!(0x139a+0x15a9+-0x2942));}return _0x36c8a4;}['getNodeWei'+'ghtedDurat'+'ion'](_0x124ce2){return this['_children'][_0x124ce2]['animTrack']['duration']/this['_children'][_0x124ce2]['speedMulti'+'plier']*this['_children'][_0x124ce2]['weight'];}['getNodeCou'+'nt'](){let _0x384066=0xe63*-0x2+0x1*0x1fa8+-0x2e2;for(let _0x3aec7c=0x2*0xaad+-0xe75+-0x6e5;_0x3aec7c<this['_children']['length'];_0x3aec7c++)this['_children'][_0x3aec7c]['constructo'+'r']===Jn?_0x384066+=this['_children'][_0x3aec7c]['getNodeCou'+'nt']():_0x384066++;return _0x384066;}}class OL extends Jn{constructor(_0x2dabce,_0x17d093,_0x11741e,_0x1187c2,_0x3379b6,_0x5ac1d0,_0x16ea8b,_0x5f2c28,_0x52b56f){_0x5ac1d0['sort']((_0x78b647,_0x1732eb)=>_0x78b647['point']-_0x1732eb['point']),super(_0x2dabce,_0x17d093,_0x11741e,_0x1187c2,_0x3379b6,_0x5ac1d0,_0x16ea8b,_0x5f2c28,_0x52b56f);}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0xc29e08=-0x13*-0x9d+0x1e3*0xe+0x5*-0x79d;this['_children'][0x1867*-0x1+0x882+0xfe5]['weight']=-0x1087*-0x1+0x205a+-0x3*0x104b;for(let _0x560f1d=-0x27*-0x51+-0x1*-0xdba+-0x1a11;_0x560f1d<this['_children']['length'];_0x560f1d++){const _0x436cbe=this['_children'][_0x560f1d];if(_0x560f1d!==this['_children']['length']-(0x1*-0x11ef+-0x186b+-0x1*-0x2a5b)){const _0x1f3d50=this['_children'][_0x560f1d+(0x26ee+-0x14b5+-0x1238)];if(_0x436cbe['point']===_0x1f3d50['point'])_0x436cbe['weight']=0x5*0x3ad+0x1a59+-0x2cba+0.5,_0x1f3d50['weight']=-0x15e1*-0x1+-0x23bd+-0x6ee*-0x2+0.5;else{if(Y['between'](this['_parameter'+'Values'][-0x2*-0x1255+-0x491*-0x3+-0x325d],_0x436cbe['point'],_0x1f3d50['point'],!(0x3*-0x637+-0x3c7+0x166c))){const _0x45a433=Math['abs'](_0x436cbe['point']-_0x1f3d50['point']),_0x479337=Math['abs'](_0x436cbe['point']-this['_parameter'+'Values'][-0x12fc+0x74f*0x1+-0x31*-0x3d]),_0x2b26d7=(_0x45a433-_0x479337)/_0x45a433;_0x436cbe['weight']=_0x2b26d7,_0x1f3d50['weight']=0x3*-0x9c+-0x1c93+-0x458*-0x7-_0x2b26d7;}else _0x1f3d50['weight']=0x4c7+-0x1c63*0x1+0x179c;}}this['_syncAnima'+'tions']&&(_0xc29e08+=_0x436cbe['animTrack']['duration']/_0x436cbe['absoluteSp'+'eed']*_0x436cbe['weight']);}if(this['_syncAnima'+'tions'])for(let _0x288697=0x1*-0x68d+-0x266e+0x7*0x66d;_0x288697<this['_children']['length'];_0x288697++){const _0x95148b=this['_children'][_0x288697];_0x95148b['weightedSp'+'eed']=_0x95148b['animTrack']['duration']/_0x95148b['absoluteSp'+'eed']/_0xc29e08;}}}const ki=class ki extends Jn{['pointDista'+'nceCache'](_0x28b915,_0x2d63f6){const _0x3bae51=''+_0x28b915+_0x2d63f6;return this['_pointCach'+'e'][_0x3bae51]||(this['_pointCach'+'e'][_0x3bae51]=this['_children'][_0x2d63f6]['point']['clone']()['sub'](this['_children'][_0x28b915]['point'])),this['_pointCach'+'e'][_0x3bae51];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x5bf192,_0x2022b6;ki['_p']['set'](...this['_parameter'+'Values']),_0x5bf192=0x1*0x14a9+0x4a7*-0x1+-0x1002,_0x2022b6=-0x1*0x2dd+-0xa*0x1cd+0xd*0x19b;for(let _0x4665df=-0x264b*-0x1+0x20d2+0xe39*-0x5;_0x4665df<this['_children']['length'];_0x4665df++){const _0x13e1e7=this['_children'][_0x4665df],_0x568a3e=_0x13e1e7['point'];ki['_pip']['set'](ki['_p']['x'],ki['_p']['y'])['sub'](_0x568a3e);let _0x1e2d6e=Number['MAX_VALUE'];for(let _0x187ce4=-0x1e72+-0x68b+-0x1*-0x24fd;_0x187ce4<this['_children']['length'];_0x187ce4++){if(_0x4665df===_0x187ce4)continue;const _0x525eb0=this['pointDista'+'nceCache'](_0x4665df,_0x187ce4),_0xbb2662=Y['clamp'](-0x103e+0x2*0x10fc+-0xd*0x15d-ki['_pip']['dot'](_0x525eb0)/_0x525eb0['lengthSq'](),0x1f0c+0x13e8+-0x32f4,0x6c*0x33+0xeec+0x3*-0xc25);_0xbb2662<_0x1e2d6e&&(_0x1e2d6e=_0xbb2662);}_0x13e1e7['weight']=_0x1e2d6e,_0x5bf192+=_0x1e2d6e,this['_syncAnima'+'tions']&&(_0x2022b6+=_0x13e1e7['animTrack']['duration']/_0x13e1e7['absoluteSp'+'eed']*_0x13e1e7['weight']);}for(let _0x2cc67c=0x67b*0x4+0x5*0x6d+-0x1c0d;_0x2cc67c<this['_children']['length'];_0x2cc67c++){const _0x139ffd=this['_children'][_0x2cc67c];_0x139ffd['weight']=_0x139ffd['_weight']/_0x5bf192,this['_syncAnima'+'tions']&&(_0x139ffd['weightedSp'+'eed']=_0x139ffd['animTrack']['duration']/_0x139ffd['absoluteSp'+'eed']/_0x2022b6);}}};h(ki,'_p',new J()),h(ki,'_pip',new J());let wu=ki;const Ui=class Ui extends Jn{['pointCache'](_0x211526,_0x558019){const _0x24d270=''+_0x211526+_0x558019;return this['_pointCach'+'e'][_0x24d270]||(this['_pointCach'+'e'][_0x24d270]=new J((this['_children'][_0x558019]['pointLengt'+'h']-this['_children'][_0x211526]['pointLengt'+'h'])/((this['_children'][_0x558019]['pointLengt'+'h']+this['_children'][_0x211526]['pointLengt'+'h'])/(-0x2*0x58b+0x9da*0x1+0x1*0x13e)),J['angleRad'](this['_children'][_0x211526]['point'],this['_children'][_0x558019]['point'])*(0x8*-0x205+0x1de3+-0xdb9))),this['_pointCach'+'e'][_0x24d270];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x53953e,_0x3f3bc4;Ui['_p']['set'](...this['_parameter'+'Values']);const _0x1e1632=Ui['_p']['length']();_0x53953e=0x3a4+-0x2413+0x1*0x206f,_0x3f3bc4=-0x530+-0xe60+0x1390;for(let _0xa39e2b=-0x1*-0x1766+-0x16f1+-0x1*0x75;_0xa39e2b<this['_children']['length'];_0xa39e2b++){const _0x3e27d3=this['_children'][_0xa39e2b],_0x47e79f=_0x3e27d3['point'],_0x28522d=_0x3e27d3['pointLengt'+'h'];let _0x69687c=Number['MAX_VALUE'];for(let _0xfd0f0e=0x12ae*-0x2+0x1d*-0xd+0x26d5;_0xfd0f0e<this['_children']['length'];_0xfd0f0e++){if(_0xa39e2b===_0xfd0f0e)continue;const _0x190468=this['pointCache'](_0xa39e2b,_0xfd0f0e),_0x53ffc5=this['_children'][_0xfd0f0e]['pointLengt'+'h'];Ui['_pip']['set']((_0x1e1632-_0x28522d)/((_0x53ffc5+_0x28522d)/(-0x454*-0x3+0x160a+-0x1182*0x2)),J['angleRad'](_0x47e79f,Ui['_p'])*(0x452+-0x25ca+-0x6b2*-0x5));const _0x1cf2a9=Y['clamp'](0x1b99+0xac5*-0x1+-0x1*0x10d3-Math['abs'](Ui['_pip']['dot'](_0x190468)/_0x190468['lengthSq']()),-0x1854+0xc*0x8c+0x11c4,0x20b9+-0x794+-0x649*0x4);_0x1cf2a9<_0x69687c&&(_0x69687c=_0x1cf2a9);}_0x3e27d3['weight']=_0x69687c,_0x53953e+=_0x69687c,this['_syncAnima'+'tions']&&(_0x3f3bc4+=_0x3e27d3['animTrack']['duration']/_0x3e27d3['absoluteSp'+'eed']*_0x3e27d3['weight']);}for(let _0x1c33b3=-0x3b4*0x4+-0xcae*0x1+-0x3*-0x92a;_0x1c33b3<this['_children']['length'];_0x1c33b3++){const _0xe05b2c=this['_children'][_0x1c33b3];if(_0xe05b2c['weight']=_0xe05b2c['_weight']/_0x53953e,this['_syncAnima'+'tions']){const _0x207eda=_0xe05b2c['animTrack']['duration']/_0x3f3bc4*_0x53953e;_0xe05b2c['weightedSp'+'eed']=_0xe05b2c['absoluteSp'+'eed']*_0x207eda;}}}};h(Ui,'_p',new J()),h(Ui,'_pip',new J());let Eu=Ui;class FL extends Jn{['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x2b6669=0x5f4+0x63d*-0x3+0xcc3,_0x9910de=0x11*0x142+0x2321+-0x3883;for(let _0x1818ae=-0x123+0x423*-0x1+0x546;_0x1818ae<this['_children']['length'];_0x1818ae++)if(_0x2b6669+=Math['max'](this['_parameter'+'Values'][_0x1818ae],-0x98c*-0x3+-0xe2c+-0xe78),this['_syncAnima'+'tions']){const _0xc80294=this['_children'][_0x1818ae];_0x9910de+=_0xc80294['animTrack']['duration']/_0xc80294['absoluteSp'+'eed']*_0xc80294['weight'];}for(let _0x320e76=-0x1a5a*0x1+0x5*0x1a8+0x1212;_0x320e76<this['_children']['length'];_0x320e76++){const _0x11ee69=this['_children'][_0x320e76],_0xe45703=Math['max'](this['_parameter'+'Values'][_0x320e76],0x19f+0x5*-0x4e7+0x16e4);_0x2b6669?(_0x11ee69['weight']=_0xe45703/_0x2b6669,this['_syncAnima'+'tions']&&(_0x11ee69['weightedSp'+'eed']=_0x11ee69['animTrack']['duration']/_0x11ee69['absoluteSp'+'eed']/_0x9910de)):(_0x11ee69['weight']=0x14c6+-0x177d+0x2b7,this['_syncAnima'+'tions']&&(_0x11ee69['weightedSp'+'eed']=-0xcfd+0x2b3*0x7+-0xd8*0x7));}}}class Fg{constructor(_0x394aa2,_0x23c87f,_0x21da33=0xf16+0x782+-0x1697,_0x37b22e=!(0x161f+-0xfd5+0x23*-0x2e),_0x126a6b){h(this,'_animation'+'s',{}),h(this,'_animation'+'List',[]),(this['_controlle'+'r']=_0x394aa2,this['_name']=_0x23c87f,this['_speed']=_0x21da33,this['_loop']=_0x37b22e,this['_hasAnimat'+'ions']=!(-0x10a*0x1d+-0x1*0x82a+0x264d),_0x126a6b?this['_blendTree']=this['_createTre'+'e'](_0x126a6b['type'],this,null,_0x23c87f,-0x195d+0x6*-0x60a+0x3d9a,_0x126a6b['parameter']?[_0x126a6b['parameter']]:_0x126a6b['parameters'],_0x126a6b['children'],_0x126a6b['syncAnimat'+'ions'],this['_createTre'+'e'],this['_controlle'+'r']['findParame'+'ter']):this['_blendTree']=new ml(this,null,_0x23c87f,0x3b5*0x4+0x1bd1+0x1*-0x2aa4,_0x21da33));}['_createTre'+'e'](_0x14ef56,_0x378429,_0x3334d4,_0x471609,_0x55578c,_0xa1eb0d,_0x483d8e,_0x56ed2c,_0x17fa0b,_0x27daa2){switch(_0x14ef56){case CL:return new OL(_0x378429,_0x3334d4,_0x471609,_0x55578c,_0xa1eb0d,_0x483d8e,_0x56ed2c,_0x17fa0b,_0x27daa2);case ML:return new wu(_0x378429,_0x3334d4,_0x471609,_0x55578c,_0xa1eb0d,_0x483d8e,_0x56ed2c,_0x17fa0b,_0x27daa2);case PL:return new Eu(_0x378429,_0x3334d4,_0x471609,_0x55578c,_0xa1eb0d,_0x483d8e,_0x56ed2c,_0x17fa0b,_0x27daa2);case DL:return new FL(_0x378429,_0x3334d4,_0x471609,_0x55578c,_0xa1eb0d,_0x483d8e,_0x56ed2c,_0x17fa0b,_0x27daa2);}w['error']('Invalid\x20an'+'im\x20blend\x20t'+'ype:\x20'+_0x14ef56);}['_getNodeFr'+'omPath'](_0x198327){let _0xbc02f=this['_blendTree'];for(let _0x1efc5e=0x3d9+0x1f5d+-0x2335*0x1;_0x1efc5e<_0x198327['length'];_0x1efc5e++)_0xbc02f=_0xbc02f['getChild'](_0x198327[_0x1efc5e]);return _0xbc02f;}['addAnimati'+'on'](_0x3de8bd,_0x6b7397){const _0x51fe7a=_0x3de8bd['join']('.'),_0x44c144=this['_animation'+'List']['findIndex'](_0x1ef94c=>_0x1ef94c['path']===_0x51fe7a);if(_0x44c144>=-0x65*0x2+-0x14*-0x8d+-0x9a*0x11)this['_animation'+'List'][_0x44c144]['animTrack']=_0x6b7397;else{const _0x3382c5=this['_getNodeFr'+'omPath'](_0x3de8bd);_0x3382c5['animTrack']=_0x6b7397,this['_animation'+'List']['push'](_0x3382c5);}this['_updateHas'+'Animations']();}['_updateHas'+'Animations'](){this['_hasAnimat'+'ions']=this['_animation'+'List']['length']>-0xea1+-0xfab+0x2*0xf26&&this['_animation'+'List']['every'](_0x51a171=>_0x51a171['animTrack']&&_0x51a171['animTrack']!==Qi['EMPTY']);}get['name'](){return this['_name'];}set['animations'](_0x4c5abc){this['_animation'+'List']=_0x4c5abc,this['_updateHas'+'Animations']();}get['animations'](){return this['_animation'+'List'];}get['hasAnimati'+'ons'](){return this['_hasAnimat'+'ions'];}set['speed'](_0x5dff13){this['_speed']=_0x5dff13;}get['speed'](){return this['_speed'];}set['loop'](_0x3e3b53){this['_loop']=_0x3e3b53;}get['loop'](){return this['_loop'];}get['nodeCount'](){return!this['_blendTree']||this['_blendTree']['constructo'+'r']===ml?-0x1a81+-0x1134+0x2bb6:this['_blendTree']['getNodeCou'+'nt']();}get['playable'](){return Ih['indexOf'](this['name'])!==-(0x4d2*0x7+0x1c6e+0x14b9*-0x3)||this['animations']['length']===this['nodeCount'];}get['looping'](){if(this['animations']['length']>0x3*-0x267+-0x18e*-0x18+-0x1e1b){const _0x1032d8=this['name']+'.'+this['animations'][0xa07*-0x3+-0x2072+0x3e87]['animTrack']['name'],_0x158410=this['_controlle'+'r']['animEvalua'+'tor']['findClip'](_0x1032d8);if(_0x158410)return _0x158410['loop'];}return!(0x1*0x262d+0x2*-0x6df+-0x186e);}get['totalWeigh'+'t'](){let _0x3f909c=-0x1*-0x1df+0x5e*-0x3e+0x14e5;for(let _0x3a0b94=-0xec9*0x1+-0x222d*-0x1+-0x1364;_0x3a0b94<this['animations']['length'];_0x3a0b94++)_0x3f909c+=this['animations'][_0x3a0b94]['weight'];return _0x3f909c;}get['timelineDu'+'ration'](){let _0x40d5dc=-0x15*-0x1+-0x24aa+0x2495;for(let _0x43ba9a=0x25*-0x2f+-0x2fa+0x3d*0x29;_0x43ba9a<this['animations']['length'];_0x43ba9a++){const _0x2f8943=this['animations'][_0x43ba9a];_0x2f8943['animTrack']['duration']>_0x40d5dc&&(_0x40d5dc=_0x2f8943['animTrack']['duration']);}return _0x40d5dc;}}class Lh{constructor({from:_0xcd935b,to:_0x5e5b65,time:_0x4a9a86=-0x5ef*0x2+-0x1*-0x1c2d+0x104f*-0x1,priority:_0x49a915=0xd*-0x28e+0x6ec+-0x1*-0x1a4a,conditions:_0x6176c6=[],exitTime:_0xe52f90=null,transitionOffset:_0x462393=null,interruptionSource:_0x642707=zv}){this['_from']=_0xcd935b,this['_to']=_0x5e5b65,this['_time']=_0x4a9a86,this['_priority']=_0x49a915,this['_condition'+'s']=_0x6176c6,this['_exitTime']=_0xe52f90,this['_transitio'+'nOffset']=_0x462393,this['_interrupt'+'ionSource']=_0x642707;}get['from'](){return this['_from'];}set['to'](_0x587574){this['_to']=_0x587574;}get['to'](){return this['_to'];}get['time'](){return this['_time'];}get['priority'](){return this['_priority'];}get['conditions'](){return this['_condition'+'s'];}get['exitTime'](){return this['_exitTime'];}get['transition'+'Offset'](){return this['_transitio'+'nOffset'];}get['interrupti'+'onSource'](){return this['_interrupt'+'ionSource'];}get['hasExitTim'+'e'](){return!!this['exitTime'];}}class NL{constructor(_0x10c383,_0x239057,_0x1df057,_0x13888c,_0x50c09a,_0x3d5701,_0x17cd19){h(this,'_states',{}),h(this,'_stateName'+'s',[]),h(this,'_findTrans'+'itionsFrom'+'StateCache',{}),h(this,'_findTrans'+'itionsBetw'+'eenStatesC'+'ache',{}),h(this,'_previousS'+'tateName',null),h(this,'_activeSta'+'teName',Co),h(this,'_activeSta'+'teDuration',-0x951+0x674*0x2+-0x397),h(this,'_activeSta'+'teDuration'+'Dirty',!(0x1*0x1549+-0x1*0x163f+0xf6*0x1)),h(this,'_playing',!(-0x1*0x6c2+-0x8c3*-0x2+-0xac3)),h(this,'_activate'),h(this,'_transitio'+'ns'),h(this,'_currTrans'+'itionTime',0x25d8+0x1ef+-0x27c6),h(this,'_totalTran'+'sitionTime',-0xf33+-0x21c3+-0x6d*-0x73),h(this,'_isTransit'+'ioning',!(0x1e0+-0x12*-0x1fd+-0x25a9)),h(this,'_transitio'+'nInterrupt'+'ionSource',zv),h(this,'_transitio'+'nPreviousS'+'tates',[]),h(this,'_timeInSta'+'te',-0xe2a+0x1a85*-0x1+0x28af),h(this,'_timeInSta'+'teBefore',0x17ff*-0x1+-0x1aea+0x32e9),h(this,'findParame'+'ter',_0x1e7746=>this['_findParam'+'eter'](_0x1e7746)),(this['_animEvalu'+'ator']=_0x10c383,this['_eventHand'+'ler']=_0x50c09a,this['_findParam'+'eter']=_0x3d5701,this['_consumeTr'+'igger']=_0x17cd19);for(let _0x2a4715=0x7a1+0xd0a+-0x14ab;_0x2a4715<_0x239057['length'];_0x2a4715++)this['_states'][_0x239057[_0x2a4715]['name']]=new Fg(this,_0x239057[_0x2a4715]['name'],_0x239057[_0x2a4715]['speed'],_0x239057[_0x2a4715]['loop'],_0x239057[_0x2a4715]['blendTree']),this['_stateName'+'s']['push'](_0x239057[_0x2a4715]['name']);this['_transitio'+'ns']=_0x1df057['map'](_0x56905c=>new Lh({..._0x56905c})),this['_activate']=_0x13888c;}get['animEvalua'+'tor'](){return this['_animEvalu'+'ator'];}set['activeStat'+'e'](_0x4da3c2){this['_activeSta'+'teName']=_0x4da3c2;}get['activeStat'+'e'](){return this['_findState'](this['_activeSta'+'teName']);}get['activeStat'+'eName'](){return this['_activeSta'+'teName'];}get['activeStat'+'eAnimation'+'s'](){return this['activeStat'+'e']['animations'];}set['previousSt'+'ate'](_0x219fa7){this['_previousS'+'tateName']=_0x219fa7;}get['previousSt'+'ate'](){return this['_findState'](this['_previousS'+'tateName']);}get['previousSt'+'ateName'](){return this['_previousS'+'tateName'];}get['playable'](){let _0x2e001f=!(-0x580+0x25fc+0xe*-0x252);for(let _0x33d57e=0xad7+-0xde7+0x310;_0x33d57e<this['_stateName'+'s']['length'];_0x33d57e++)this['_states'][this['_stateName'+'s'][_0x33d57e]]['playable']||(_0x2e001f=!(0x15ea+-0x19a*-0x11+-0x3123));return _0x2e001f;}set['playing'](_0x539dbd){this['_playing']=_0x539dbd;}get['playing'](){return this['_playing'];}get['activeStat'+'eProgress'](){return this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);}get['activeStat'+'eDuration'](){if(this['_activeSta'+'teDuration'+'Dirty']){let _0x52719f=-0x945+-0x1a*0x8+0xa15;for(let _0x3ad14a=0x26bf+0x721+-0x2*0x16f0;_0x3ad14a<this['activeStat'+'eAnimation'+'s']['length'];_0x3ad14a++){const _0x3cbc9e=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x3ad14a]['name']);_0x3cbc9e&&(_0x52719f=Math['max'](_0x52719f,_0x3cbc9e['track']['duration']));}this['_activeSta'+'teDuration']=_0x52719f,this['_activeSta'+'teDuration'+'Dirty']=!(0x1f7+0x114f+0x1*-0x1345);}return this['_activeSta'+'teDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x498107){this['_timeInSta'+'teBefore']=_0x498107,this['_timeInSta'+'te']=_0x498107;for(let _0x129908=-0x11de*0x1+0x1122+-0x5e*-0x2;_0x129908<this['activeStat'+'eAnimation'+'s']['length'];_0x129908++){const _0x34c4ef=this['animEvalua'+'tor']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x129908]['name']);_0x34c4ef&&(_0x34c4ef['time']=_0x498107);}}get['activeStat'+'eCurrentTi'+'me'](){return this['_timeInSta'+'te'];}get['transition'+'ing'](){return this['_isTransit'+'ioning'];}get['transition'+'Progress'](){return this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime'];}get['states'](){return this['_stateName'+'s'];}['assignMask'](_0x31f8db){return this['_animEvalu'+'ator']['assignMask'](_0x31f8db);}['_findState'](_0xea9073){return this['_states'][_0xea9073];}['_getActive'+'StateProgr'+'essForTime'](_0x355256){if(this['activeStat'+'eName']===Co||this['activeStat'+'eName']===vu||this['activeStat'+'eName']===qr)return 0x1760+-0x163d*0x1+0x2*-0x91;const _0x3dbe0c=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][0x2605*0x1+0x1e67+-0x446c]['name']);return _0x3dbe0c?_0x3dbe0c['progressFo'+'rTime'](_0x355256):null;}['_findTrans'+'itionsFrom'+'State'](_0x4270bf){let _0x567155=this['_findTrans'+'itionsFrom'+'StateCache'][_0x4270bf];return _0x567155||(_0x567155=this['_transitio'+'ns']['filter'](_0x43bd08=>_0x43bd08['from']===_0x4270bf),ul(_0x567155),this['_findTrans'+'itionsFrom'+'StateCache'][_0x4270bf]=_0x567155),_0x567155;}['_findTrans'+'itionsBetw'+'eenStates'](_0x1585bb,_0x3b35aa){let _0xfebd2a=this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x1585bb+'->'+_0x3b35aa];return _0xfebd2a||(_0xfebd2a=this['_transitio'+'ns']['filter'](_0xf98953=>_0xf98953['from']===_0x1585bb&&_0xf98953['to']===_0x3b35aa),ul(_0xfebd2a),this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x1585bb+'->'+_0x3b35aa]=_0xfebd2a),_0xfebd2a;}['_transitio'+'nHasCondit'+'ionsMet'](_0x792ddd){const _0x2520d1=_0x792ddd['conditions'];for(let _0x559788=-0xd2d+-0x2ed*-0xb+-0x1302;_0x559788<_0x2520d1['length'];_0x559788++){const _0x20826a=_0x2520d1[_0x559788],_0x16fad3=this['_findParam'+'eter'](_0x20826a['parameterN'+'ame']);switch(_0x20826a['predicate']){case xL:if(!(_0x16fad3['value']>_0x20826a['value']))return!(0xae5+-0x4e6+-0x5fe);break;case TL:if(!(_0x16fad3['value']<_0x20826a['value']))return!(-0x2130+-0xd*0x127+-0xc0b*-0x4);break;case wL:if(!(_0x16fad3['value']>=_0x20826a['value']))return!(0x1b94+-0x3*-0x552+-0xe83*0x3);break;case EL:if(!(_0x16fad3['value']<=_0x20826a['value']))return!(0x1679*-0x1+-0x4*0x9b8+0x1*0x3d5a);break;case bL:if(_0x16fad3['value']!==_0x20826a['value'])return!(0xb9*0x25+-0x1afd+0x41);break;case AL:if(_0x16fad3['value']===_0x20826a['value'])return!(0x5*0x76d+0x1*-0x75a+-0x1dc6);break;}}return!(-0x1*0xaab+-0x5ad+0x1058);}['_findTrans'+'ition'](_0xbb433e,_0x532e33){let _0x297432=[];if(_0xbb433e&&_0x532e33)_0x297432=_0x297432['concat'](this['_findTrans'+'itionsBetw'+'eenStates'](_0xbb433e,_0x532e33));else{if(!this['_isTransit'+'ioning'])_0x297432=_0x297432['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x297432=_0x297432['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));else switch(this['_transitio'+'nInterrupt'+'ionSource']){case gL:_0x297432=_0x297432['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x297432=_0x297432['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));break;case SL:_0x297432=_0x297432['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x297432=_0x297432['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));break;case yL:_0x297432=_0x297432['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x297432=_0x297432['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x297432=_0x297432['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));break;case vL:_0x297432=_0x297432['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x297432=_0x297432['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x297432=_0x297432['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));break;}}if(_0x297432=_0x297432['filter'](_0x14071e=>{if(_0x14071e['to']===this['activeStat'+'eName'])return!(-0x24cb*0x1+-0x1cc2+-0x1*-0x418e);if(_0x14071e['hasExitTim'+'e']){let _0x41e896=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'teBefore']),_0x10ff4a=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);if(_0x14071e['exitTime']<-0xbe4+0x161d+-0xa38&&this['activeStat'+'e']['loop']&&(_0x41e896-=Math['floor'](_0x41e896),_0x10ff4a-=Math['floor'](_0x10ff4a)),_0x10ff4a===_0x41e896){if(_0x10ff4a!==_0x14071e['exitTime'])return null;}else{if(!(_0x14071e['exitTime']>_0x41e896&&_0x14071e['exitTime']<=_0x10ff4a))return null;}}return this['_transitio'+'nHasCondit'+'ionsMet'](_0x14071e);}),_0x297432['length']>0x1e3c+0x1373*0x1+-0x31af){const _0x222455=_0x297432[0x1b14+0x204f+-0x3b63];if(_0x222455['to']===vu){const _0x5ef9b0=this['_findTrans'+'itionsFrom'+'State'](Co)[0x26a9*-0x1+-0x11cd+0x92*0x63];_0x222455['to']=_0x5ef9b0['to'];}return _0x222455;}return null;}['updateStat'+'eFromTrans'+'ition'](_0x1a573c){let _0x4a764f,_0x3ee7b5,_0x25a54a;this['previousSt'+'ate']=_0x1a573c['from']?this['activeStat'+'eName']:null,this['activeStat'+'e']=_0x1a573c['to'],this['_activeSta'+'teDuration'+'Dirty']=!(-0x26f9*0x1+0x24fd+0x1fc);for(let _0x3cedad=0x1fa6+-0xe07+-0x15b*0xd;_0x3cedad<_0x1a573c['conditions']['length'];_0x3cedad++){const _0x579c23=_0x1a573c['conditions'][_0x3cedad];this['_findParam'+'eter'](_0x579c23['parameterN'+'ame'])['type']===Qc&&this['_consumeTr'+'igger'](_0x579c23['parameterN'+'ame']);}if(this['previousSt'+'ate']){this['_isTransit'+'ioning']||(this['_transitio'+'nPreviousS'+'tates']=[]),this['_transitio'+'nPreviousS'+'tates']['push']({'name':this['_previousS'+'tateName'],'weight':0x1});const _0x5984a4=Math['min'](this['_totalTran'+'sitionTime']!==-0x1599+-0x1e6+-0x191*-0xf?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:-0x19*0x33+0x1b2e+-0x1632,0x237c+0x28d+-0x2608);for(let _0x5864b9=0x1*-0x21ea+-0xe5*0x15+0x34b3;_0x5864b9<this['_transitio'+'nPreviousS'+'tates']['length'];_0x5864b9++){this['_isTransit'+'ioning']?_0x5864b9!==this['_transitio'+'nPreviousS'+'tates']['length']-(0x1cd8+-0xedf+-0x2*0x6fc)?this['_transitio'+'nPreviousS'+'tates'][_0x5864b9]['weight']*=0x1e0c+0x2262+-0x406d*0x1-_0x5984a4:this['_transitio'+'nPreviousS'+'tates'][_0x5864b9]['weight']=_0x5984a4:this['_transitio'+'nPreviousS'+'tates'][_0x5864b9]['weight']=-0x1055*0x1+-0x1490+-0x1273*-0x2,_0x4a764f=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x5864b9]['name']);for(let _0x153f30=-0x21b0+-0x1307*-0x1+0xea9;_0x153f30<_0x4a764f['animations']['length'];_0x153f30++)_0x3ee7b5=_0x4a764f['animations'][_0x153f30],_0x25a54a=this['_animEvalu'+'ator']['findClip'](_0x3ee7b5['name']+'.previous.'+_0x5864b9),_0x25a54a||(_0x25a54a=this['_animEvalu'+'ator']['findClip'](_0x3ee7b5['name']),_0x25a54a['name']=_0x3ee7b5['name']+'.previous.'+_0x5864b9),_0x5864b9!==this['_transitio'+'nPreviousS'+'tates']['length']-(0x1*-0x1d69+0x1*-0xb02+0x286c)&&_0x25a54a['pause']();}}this['_isTransit'+'ioning']=!(0xe85+-0x1*0x125c+0x3d7*0x1),this['_totalTran'+'sitionTime']=_0x1a573c['time'],this['_currTrans'+'itionTime']=0xb4a+-0x4a7*-0x7+-0x2bdb,this['_transitio'+'nInterrupt'+'ionSource']=_0x1a573c['interrupti'+'onSource'];const _0x5d5dda=this['activeStat'+'e'],_0x352f97=_0x1a573c['transition'+'Offset']&&_0x1a573c['transition'+'Offset']>-0x8ec*-0x3+0x5*-0x3ad+-0x863&&_0x1a573c['transition'+'Offset']<0x1*-0x6b+-0x2029+0x2095;let _0x34d29f=-0x2159*0x1+0x2e9+-0x4*-0x79c,_0x4eca0c=-0x18c7+-0x64*-0x59+-0x1*0x9fd;if(_0x352f97){const _0x2bb98d=_0x5d5dda['timelineDu'+'ration']*_0x1a573c['transition'+'Offset'];_0x34d29f=_0x2bb98d,_0x4eca0c=_0x2bb98d;}this['_timeInSta'+'te']=_0x34d29f,this['_timeInSta'+'teBefore']=_0x4eca0c;for(let _0x9f8547=0x153*0x7+0x1*-0x21a2+-0x1*-0x185d;_0x9f8547<_0x5d5dda['animations']['length'];_0x9f8547++){if(_0x25a54a=this['_animEvalu'+'ator']['findClip'](_0x5d5dda['animations'][_0x9f8547]['name']),_0x25a54a)_0x25a54a['reset']();else{const _0x3ea863=Number['isFinite'](_0x5d5dda['animations'][_0x9f8547]['speed'])?_0x5d5dda['animations'][_0x9f8547]['speed']:_0x5d5dda['speed'];_0x25a54a=new Dh(_0x5d5dda['animations'][_0x9f8547]['animTrack'],this['_timeInSta'+'te'],_0x3ea863,!(-0x1896*0x1+0x12a7*0x1+0x5ef),_0x5d5dda['loop'],this['_eventHand'+'ler']),_0x25a54a['name']=_0x5d5dda['animations'][_0x9f8547]['name'],this['_animEvalu'+'ator']['addClip'](_0x25a54a);}if(_0x1a573c['time']>-0x9*0x144+0x1cea+-0x1186?_0x25a54a['blendWeigh'+'t']=0x8*-0x14b+0x1*-0x64a+-0x10a2*-0x1:_0x25a54a['blendWeigh'+'t']=_0x5d5dda['animations'][_0x9f8547]['normalized'+'Weight'],_0x25a54a['play'](),_0x352f97)_0x25a54a['time']=_0x5d5dda['timelineDu'+'ration']*_0x1a573c['transition'+'Offset'];else{const _0x3d5cd5=_0x5d5dda['speed']>=0x3a*-0x53+-0xd1e+-0x1c6*-0x12?0x8a0+-0x14f6+0x1*0xc56:this['activeStat'+'eDuration'];_0x25a54a['time']=_0x3d5cd5;}}}['_transitio'+'nToState'](_0x42bde9){if(!this['_findState'](_0x42bde9))return;let _0x5ee7b6=this['_findTrans'+'ition'](this['_activeSta'+'teName'],_0x42bde9);_0x5ee7b6||(this['_animEvalu'+'ator']['removeClip'+'s'](),_0x5ee7b6=new Lh({'from':null,'to':_0x42bde9})),this['updateStat'+'eFromTrans'+'ition'](_0x5ee7b6);}['assignAnim'+'ation'](_0x529a14,_0x10539d,_0x2bc604,_0xc35a0c){const _0x115d5b=_0x529a14['split']('.');let _0x52d8da=this['_findState'](_0x115d5b[-0x1727*0x1+0x5cb+0x115c]);_0x52d8da||(_0x52d8da=new Fg(this,_0x115d5b[0x3a*0x59+0x186f+-0x2c99],_0x2bc604),this['_states'][_0x115d5b[0x8b*0x3a+0x1*-0x91b+0x1663*-0x1]]=_0x52d8da,this['_stateName'+'s']['push'](_0x115d5b[0x1*0xb40+0x184f+-0x238f])),_0x52d8da['addAnimati'+'on'](_0x115d5b,_0x10539d),this['_animEvalu'+'ator']['updateClip'+'Track'](_0x52d8da['name'],_0x10539d),_0x2bc604!==void(-0x1c4a+0x280*0x2+0x21e*0xb)&&(_0x52d8da['speed']=_0x2bc604),_0xc35a0c!==void(0xd*0x3a+-0x69c+-0x7*-0x86)&&(_0x52d8da['loop']=_0xc35a0c),!this['_playing']&&this['_activate']&&this['playable']&&this['play'](),this['_activeSta'+'teDuration'+'Dirty']=!(-0x1b17+-0xc*-0x81+0x150b*0x1);}['removeNode'+'Animations'](_0xcb0f69){if(Ih['indexOf'](_0xcb0f69)!==-(-0x2c*-0x7e+0x1*0xb1b+-0x1061*0x2))return!(0x15*0xd6+-0x83b*-0x4+-0x1*0x3279);const _0x2a2b15=this['_findState'](_0xcb0f69);return _0x2a2b15?(_0x2a2b15['animations']=[],!(-0x1*0xfe5+-0x650+0x767*0x3)):(w['error']('Attempting'+'\x20to\x20unassi'+'gn\x20animati'+'on\x20tracks\x20'+'from\x20a\x20sta'+'te\x20that\x20do'+'es\x20not\x20exi'+'st.',_0xcb0f69),!(-0x5f3+0xa60+0x1*-0x46c));}['play'](_0x298937){_0x298937&&this['_transitio'+'nToState'](_0x298937),this['_playing']=!(-0x238c+-0x2*-0x1d2+0x1fe8);}['pause'](){this['_playing']=!(0x576*-0x2+-0x1689+-0x10bb*-0x2);}['reset'](){this['_previousS'+'tateName']=null,this['_activeSta'+'teName']=Co,this['_playing']=!(0x131*-0x8+0x1a27+-0x109e),this['_currTrans'+'itionTime']=0x86*0x2f+-0xb8f+-0xd0a,this['_totalTran'+'sitionTime']=0x23d6+-0x1*-0x575+-0x294a,this['_isTransit'+'ioning']=!(0x11ae+0x1b9*0x4+-0x13*0x14b),this['_timeInSta'+'te']=-0x2*0xa3e+0x1*0xdca+-0x6b2*-0x1,this['_timeInSta'+'teBefore']=-0xab0+-0xa62+0x1512,this['_animEvalu'+'ator']['removeClip'+'s']();}['rebind'](){this['_animEvalu'+'ator']['rebind']();}['update'](_0x2aa28b){if(!this['_playing'])return;let _0x4da186,_0x1f3392,_0x495c6a;(this['activeStat'+'e']['loop']||this['_timeInSta'+'te']<this['activeStat'+'eDuration'])&&(this['_timeInSta'+'teBefore']=this['_timeInSta'+'te'],this['_timeInSta'+'te']+=_0x2aa28b*this['activeStat'+'e']['speed'],!this['activeStat'+'e']['loop']&&this['_timeInSta'+'te']>this['activeStat'+'eDuration']&&(this['_timeInSta'+'te']=this['activeStat'+'eDuration'],_0x2aa28b=this['activeStat'+'eDuration']-this['_timeInSta'+'teBefore']));const _0x45cdfa=this['_findTrans'+'ition'](this['_activeSta'+'teName']);if(_0x45cdfa&&this['updateStat'+'eFromTrans'+'ition'](_0x45cdfa),this['_isTransit'+'ioning']){if(this['_currTrans'+'itionTime']+=_0x2aa28b,this['_currTrans'+'itionTime']<=this['_totalTran'+'sitionTime']){const _0x52825b=this['_totalTran'+'sitionTime']!==-0x193*-0x8+0x28e*0x5+-0xcaf*0x2?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:0x1e1e+-0x21f5+-0xf6*-0x4;for(let _0x1a0eba=0x1*0xaef+-0x79f+0xd4*-0x4;_0x1a0eba<this['_transitio'+'nPreviousS'+'tates']['length'];_0x1a0eba++){_0x4da186=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x1a0eba]['name']);const _0x95c4dc=this['_transitio'+'nPreviousS'+'tates'][_0x1a0eba]['weight'];for(let _0x5c6ffc=-0x226d+-0x1a57*0x1+-0x1e62*-0x2;_0x5c6ffc<_0x4da186['animations']['length'];_0x5c6ffc++)_0x1f3392=_0x4da186['animations'][_0x5c6ffc],_0x495c6a=this['_animEvalu'+'ator']['findClip'](_0x1f3392['name']+'.previous.'+_0x1a0eba),_0x495c6a&&(_0x495c6a['blendWeigh'+'t']=(0x1*-0x105d+0x1b1e+-0xac0-_0x52825b)*_0x1f3392['normalized'+'Weight']*_0x95c4dc);}_0x4da186=this['activeStat'+'e'];for(let _0x2771e5=0x333+-0x23ed+0x20ba;_0x2771e5<_0x4da186['animations']['length'];_0x2771e5++)_0x1f3392=_0x4da186['animations'][_0x2771e5],this['_animEvalu'+'ator']['findClip'](_0x1f3392['name'])['blendWeigh'+'t']=_0x52825b*_0x1f3392['normalized'+'Weight'];}else{this['_isTransit'+'ioning']=!(-0x5*-0x53b+-0x220f+0x7e9);const _0x38b6ff=this['activeStat'+'eAnimation'+'s']['length'],_0x408fa7=this['_animEvalu'+'ator']['clips']['length'];for(let _0x40156d=0x43*-0x83+-0x24*-0xc+0x5*0x685;_0x40156d<_0x408fa7-_0x38b6ff;_0x40156d++)this['_animEvalu'+'ator']['removeClip'](-0x1df*-0xc+0x9b0+-0x79*0x44);this['_transitio'+'nPreviousS'+'tates']=[],_0x4da186=this['activeStat'+'e'];for(let _0x14f6d3=-0x56c+-0x2488+-0xf*-0x2cc;_0x14f6d3<_0x4da186['animations']['length'];_0x14f6d3++)_0x1f3392=_0x4da186['animations'][_0x14f6d3],_0x495c6a=this['_animEvalu'+'ator']['findClip'](_0x1f3392['name']),_0x495c6a&&(_0x495c6a['blendWeigh'+'t']=_0x1f3392['normalized'+'Weight']);}}else{if(this['activeStat'+'e']['_blendTree']['constructo'+'r']!==ml){_0x4da186=this['activeStat'+'e'];for(let _0xe4fa8b=0x330+-0x9*-0x16d+0x1*-0x1005;_0xe4fa8b<_0x4da186['animations']['length'];_0xe4fa8b++)_0x1f3392=_0x4da186['animations'][_0xe4fa8b],_0x495c6a=this['_animEvalu'+'ator']['findClip'](_0x1f3392['name']),_0x495c6a&&(_0x495c6a['blendWeigh'+'t']=_0x1f3392['normalized'+'Weight'],_0x1f3392['parent']['syncAnimat'+'ions']&&(_0x495c6a['speed']=_0x1f3392['speed']));}}this['_animEvalu'+'ator']['update'](_0x2aa28b,this['activeStat'+'e']['hasAnimati'+'ons']);}}const wf=new J(),Tc=new D(),_o=new re(),go=new ie(),So=new le();class Fi extends Sr{constructor(_0x2815d8,_0x513643,_0x1b22c3,_0x194155,_0x5f4891){super(_0x513643),this['animCompon'+'ent']=_0x2815d8,this['_mask']=_0x194155,this['layerName']=_0x1b22c3,this['layerIndex']=_0x5f4891;}static['_packFloat'](_0x3cc02c){return _0x3cc02c[0x527*-0x6+0x4d6*-0x2+-0x1*-0x2896];}static['_packBoole'+'an'](_0x55e416){return!!_0x55e416[-0x235f+0x9*-0xb6+0x29c5];}static['_packVec2'](_0x5098d7){return wf['x']=_0x5098d7[-0x2*0x67+-0xfcb+0x1099],wf['y']=_0x5098d7[0x26c6+0x1bcb+-0x4290],wf;}static['_packVec3'](_0xc48e61){return Tc['x']=_0xc48e61[0xb*-0x7b+-0x68b*0x1+-0x2f5*-0x4],Tc['y']=_0xc48e61[0x2124+0x7*0x437+0x26*-0x1a6],Tc['z']=_0xc48e61[0xd6f+-0x129d*0x2+-0x7ef*-0x3],Tc;}static['_packVec4'](_0x37ae4b){return _o['x']=_0x37ae4b[-0xebd+-0x1048*-0x1+-0x4f*0x5],_o['y']=_0x37ae4b[0x1f17+-0xbef+-0x1*0x1327],_o['z']=_0x37ae4b[-0x1*0xef6+-0x1*-0x220a+-0x1312],_o['w']=_0x37ae4b[-0x78a+-0x3*-0x1e3+0x1e4],_o;}static['_packColor'](_0x435dc6){return go['r']=_0x435dc6[0xaf*-0x1+0xd24+0xc75*-0x1],go['g']=_0x435dc6[0x6*-0x189+-0x2b*-0x97+-0x1*0x1026],go['b']=_0x435dc6[0xe*-0x15b+0x610+-0x4*-0x33b],go['a']=_0x435dc6[0x23b9*0x1+-0x61*0x47+0x37*-0x29],go;}static['_packQuat'](_0x650169){return So['x']=_0x650169[-0x1345*-0x1+0x1*0x159b+-0x28e0],So['y']=_0x650169[-0x1938+0x104+0x1835*0x1],So['z']=_0x650169[-0xaf*-0x19+-0x236c+0x1257],So['w']=_0x650169[-0x5fc+-0x19de+0x1*0x1fdd],So;}['resolve'](_0x27b226){const _0x391644=ra['encode'](_0x27b226['entityPath'],_0x27b226['component'],_0x27b226['propertyPa'+'th']);let _0x544785=this['targetCach'+'e'][_0x391644];if(_0x544785)return _0x544785;let _0x14b45e,_0x4ed740,_0x166c64;switch(_0x27b226['component']){case'entity':_0x14b45e=this['_getEntity'+'FromHierar'+'chy'](_0x27b226['entityPath']),_0x166c64=ra['encode'](_0x14b45e['path'],'entity',_0x27b226['propertyPa'+'th']),_0x4ed740=_0x14b45e;break;case'graph':if(_0x4ed740=this['findNode'](_0x27b226),!_0x4ed740)return null;_0x166c64=ra['encode'](_0x4ed740['path'],'graph',_0x27b226['propertyPa'+'th']);break;default:if(_0x14b45e=this['_getEntity'+'FromHierar'+'chy'](_0x27b226['entityPath']),_0x4ed740=_0x14b45e['findCompon'+'ent'](_0x27b226['component']),!_0x4ed740)return null;_0x166c64=ra['encode'](_0x14b45e['path'],_0x27b226['component'],_0x27b226['propertyPa'+'th']);break;}return _0x544785=this['_createAni'+'mTargetFor'+'Property'](_0x4ed740,_0x27b226['propertyPa'+'th'],_0x166c64),this['targetCach'+'e'][_0x391644]=_0x544785,_0x544785;}['update'](_0x517c4f){const _0x4ca740=this['activeNode'+'s'];if(_0x4ca740){for(let _0x45ea9b=0x17*-0x12d+-0x1*-0xe20+0xceb;_0x45ea9b<_0x4ca740['length'];_0x45ea9b++)_0x4ca740[_0x45ea9b]['_dirtifyLo'+'cal']();}}['_getEntity'+'FromHierar'+'chy'](_0x587eda){if(!this['animCompon'+'ent']['entity']['name']===_0x587eda[-0x15*0x1a1+0x15ba+0xc7b])return null;const _0x3c00cb=this['animCompon'+'ent']['entity'];return _0x587eda['length']===0x247*0x9+0xdb1*0x1+-0x222f?_0x3c00cb:_0x3c00cb['_parent']['findByPath'](_0x587eda);}['_resolvePa'+'th'](_0x5beed1,_0x2669b2,_0x2b4552){const _0xd0a17a=_0x2669b2['length']-(_0x2b4552?-0x4*-0x73f+0x1*-0xcb5+-0x1047:0x3c7*-0x1+-0x1f9a+0x2362);for(let _0x60489a=-0x52a*0x4+0x1f93*0x1+-0xaeb;_0x60489a<_0xd0a17a;_0x60489a++)_0x5beed1=_0x5beed1[_0x2669b2[_0x60489a]];return _0x5beed1;}['_setter'](_0x5cdc53,_0x1f55eb,_0x317032){const _0x59648a=this['_resolvePa'+'th'](_0x5cdc53,_0x1f55eb),_0xda74c1=_0x1f55eb[_0x1f55eb['length']-(-0x3*0x84+-0x2540+0xb*0x387)],_0x3aa964='set'+_0xda74c1['substring'](-0x10ab+-0x227f+0x887*0x6,-0x13*-0xdb+-0x799+0x1bb*-0x5)['toUpperCas'+'e']()+_0xda74c1['substring'](0x258b+-0x56*0xb+-0x21d8);if(_0x59648a[_0x3aa964]){let _0x5c5d87=_0x59648a['get'+_0xda74c1['substring'](-0x1aa5+-0x678+-0x31*-0xad,-0x7f4+-0x1296+0x97*0x2d)['toUpperCas'+'e']()+_0xda74c1['substring'](-0x8b1+0x20cf+-0x181d)]['bind'](_0x59648a)();_0x5c5d87=[_0x5c5d87['x'],_0x5c5d87['y'],_0x5c5d87['z'],_0x5c5d87['w']];const _0x5b1ad5=_0x59648a[_0x3aa964]['bind'](_0x59648a);return{'set':_0x438174=>{_0x5b1ad5(_0x317032(_0x438174));},'get':()=>_0x5c5d87};}const _0x55a985=_0x59648a[_0xda74c1];if(typeof _0x55a985=='object'&&_0x55a985['hasOwnProp'+'erty']('copy'))return function(_0xef03c){_0x55a985['copy'](_0x317032(_0xef03c));};if([J,D,re,ie,le]['indexOf'](_0x59648a['constructo'+'r'])!==-(0x5*-0x557+-0x13d3+-0x2b*-0x115)&&_0x1f55eb['length']>-0x1339+0x32*-0x96+0x3086){const _0x2886e1=_0x1f55eb['length']>-0xbe*-0x31+-0x890+-0x1bcc?this['_resolvePa'+'th'](_0x5cdc53,_0x1f55eb['slice'](-0x25ce+0x640+0x1f8e,-(-0x1f7b*-0x1+-0x208a+0x88*0x2))):_0x5cdc53,_0x5c03b5=_0x1f55eb[_0x1f55eb['length']-(0x2406+0x377*-0x9+-0x4d5*0x1)];return function(_0xc1d508){_0x59648a[_0xda74c1]=_0x317032(_0xc1d508),_0x2886e1[_0x5c03b5]=_0x59648a;};}return function(_0x3ef052){_0x59648a[_0xda74c1]=_0x317032(_0x3ef052);};}['_createAni'+'mTargetFor'+'Property'](_0x1a040f,_0xcc3dca,_0x29a92c){if(this['handlers']&&_0xcc3dca[0xd21*-0x1+-0xc5+0x1*0xde6]['startsWith']('weight.'))return this['handlers']['weight'](_0x1a040f,_0xcc3dca[-0x1cff+0x1341+-0x9be*-0x1]['replace']('weight.',''));if(this['handlers']&&_0xcc3dca[0xab*-0x28+-0x2*0xbf1+-0x17d*-0x22]==='material'&&_0xcc3dca['length']===0x1c43+-0x8ef+-0x1352*0x1){const _0x1e83d4=_0xcc3dca[0x22c5*-0x1+0x14f*0x5+0x49*0x63];if(_0x1e83d4['endsWith']('Map'))return this['handlers']['materialTe'+'xture'](_0x1a040f,_0x1e83d4);}const _0x30b5e6=this['_resolvePa'+'th'](_0x1a040f,_0xcc3dca,!(-0xb88+-0x19fb+0x2583));if(typeof _0x30b5e6>'u')return null;let _0x4b7053,_0x49a0c9,_0x3deb7e;if(typeof _0x30b5e6=='number')_0x4b7053=this['_setter'](_0x1a040f,_0xcc3dca,Fi['_packFloat']),_0x49a0c9='vector',_0x3deb7e=-0x24e4+-0x1d98+0x427d;else{if(typeof _0x30b5e6=='boolean')_0x4b7053=this['_setter'](_0x1a040f,_0xcc3dca,Fi['_packBoole'+'an']),_0x49a0c9='vector',_0x3deb7e=-0x488+-0x1d*0x23+0x88*0x10;else{if(typeof _0x30b5e6=='object')switch(_0x30b5e6['constructo'+'r']){case J:_0x4b7053=this['_setter'](_0x1a040f,_0xcc3dca,Fi['_packVec2']),_0x49a0c9='vector',_0x3deb7e=0xf*0x1c9+0x50*-0x57+0x6b;break;case D:_0x4b7053=this['_setter'](_0x1a040f,_0xcc3dca,Fi['_packVec3']),_0x49a0c9='vector',_0x3deb7e=0x1*-0x2627+-0x48f*0x1+0x2ab9;break;case re:_0x4b7053=this['_setter'](_0x1a040f,_0xcc3dca,Fi['_packVec4']),_0x49a0c9='vector',_0x3deb7e=-0x2*-0x437+0xced+-0x3*0x71d;break;case ie:_0x4b7053=this['_setter'](_0x1a040f,_0xcc3dca,Fi['_packColor']),_0x49a0c9='vector',_0x3deb7e=0x743+0xc01+-0x1340;break;case le:_0x4b7053=this['_setter'](_0x1a040f,_0xcc3dca,Fi['_packQuat']),_0x49a0c9='quaternion',_0x3deb7e=-0xe50+0x210d+0x12b9*-0x1;break;default:return null;}}}return _0xcc3dca['indexOf']('material')!==-(0x17*0x123+0x11fa+0x2c1e*-0x1)?new xu(_0x2a59bc=>{_0x4b7053(_0x2a59bc),_0x1a040f['material']['update']();},_0x49a0c9,_0x3deb7e,_0x29a92c):new xu(_0x4b7053,_0x49a0c9,_0x3deb7e,_0x29a92c);}['rebind'](){this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={},this['animCompon'+'ent']['rootBone']?this['graph']=this['animCompon'+'ent']['rootBone']:this['graph']=this['animCompon'+'ent']['entity'];const _0x20ab70={},_0x4c673c=function(_0x581bd4){_0x20ab70[_0x581bd4['name']]=_0x581bd4;for(let _0x1c66f1=0x18d3+-0x180d+-0x63*0x2;_0x1c66f1<_0x581bd4['children']['length'];++_0x1c66f1)_0x4c673c(_0x581bd4['children'][_0x1c66f1]);};_0x4c673c(this['graph']),this['nodes']=_0x20ab70;}}class kL{constructor(_0xd4ce23,_0x159a17,_0x874726,_0x5c24f4=0x3*0xa4a+-0x5*0x47c+-0x1*0x871,_0x39ac9f=Vv){h(this,'_name'),h(this,'_controlle'+'r'),h(this,'_component'),h(this,'_weight'),h(this,'_blendType'),h(this,'_mask',null),h(this,'_blendTime',0xe90+0x394+-0x1224),h(this,'_blendTime'+'Elapsed',0x17b4+0x5*0x265+0x1*-0x23ad),h(this,'_startingW'+'eight',0x136+-0x3*0x463+0xbf3),h(this,'_targetWei'+'ght',0xd*-0x2bd+-0x53*0x46+-0x3a4b*-0x1),(this['_name']=_0xd4ce23,this['_controlle'+'r']=_0x159a17,this['_component']=_0x874726,this['_weight']=_0x5c24f4,this['_blendType']=_0x39ac9f);}get['name'](){return this['_name'];}set['playing'](_0x17e606){this['_controlle'+'r']['playing']=_0x17e606;}get['playing'](){return this['_controlle'+'r']['playing'];}get['playable'](){return this['_controlle'+'r']['playable'];}get['activeStat'+'e'](){return this['_controlle'+'r']['activeStat'+'eName'];}get['previousSt'+'ate'](){return this['_controlle'+'r']['previousSt'+'ateName'];}get['activeStat'+'eProgress'](){return this['_controlle'+'r']['activeStat'+'eProgress'];}get['activeStat'+'eDuration'](){return this['_controlle'+'r']['activeStat'+'eDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x1c40b3){const _0x361eaf=this['_controlle'+'r'],_0x1a36ac=_0x361eaf['playing'];_0x361eaf['playing']=!(-0xead+-0x227*0xf+-0x177b*-0x2),_0x361eaf['activeStat'+'eCurrentTi'+'me']=_0x1c40b3,_0x1a36ac||_0x361eaf['update'](0x13fa*-0x1+0x3d*-0x67+0x3*0xed7),_0x361eaf['playing']=_0x1a36ac;}get['activeStat'+'eCurrentTi'+'me'](){return this['_controlle'+'r']['activeStat'+'eCurrentTi'+'me'];}get['transition'+'ing'](){return this['_controlle'+'r']['transition'+'ing'];}get['transition'+'Progress'](){return this['transition'+'ing']?this['_controlle'+'r']['transition'+'Progress']:null;}get['states'](){return this['_controlle'+'r']['states'];}set['weight'](_0x5cb2c2){this['_weight']=_0x5cb2c2,this['_component']['dirtifyTar'+'gets']();}get['weight'](){return this['_weight'];}set['blendType'](_0x347286){_0x347286!==this['_blendType']&&(this['_blendType']=_0x347286,this['_controlle'+'r']['normalizeW'+'eights']&&this['_component']['rebind']());}get['blendType'](){return this['_blendType'];}set['mask'](_0x266d15){this['_controlle'+'r']['assignMask'](_0x266d15)&&this['_component']['rebind'](),this['_mask']=_0x266d15;}get['mask'](){return this['_mask'];}['play'](_0x4fd8ae){this['_controlle'+'r']['play'](_0x4fd8ae);}['pause'](){this['_controlle'+'r']['pause']();}['reset'](){this['_controlle'+'r']['reset']();}['rebind'](){this['_controlle'+'r']['rebind']();}['update'](_0x45f52c){this['_blendTime']&&(this['_blendTime'+'Elapsed']<this['_blendTime']?(this['weight']=Y['lerp'](this['_startingW'+'eight'],this['_targetWei'+'ght'],this['_blendTime'+'Elapsed']/this['_blendTime']),this['_blendTime'+'Elapsed']+=_0x45f52c):(this['weight']=this['_targetWei'+'ght'],this['_blendTime']=-0x20ef+0x257*0x8+0xe37,this['_blendTime'+'Elapsed']=-0x3*0x12d+0xc6*0x4+0x3*0x25,this['_startingW'+'eight']=0x205+-0x2*-0x100b+-0x1*0x221b,this['_targetWei'+'ght']=-0x2ea*-0x3+0x2c2*0x4+-0x13c6)),this['_controlle'+'r']['update'](_0x45f52c);}['blendToWei'+'ght'](_0xd15972,_0x2bb315){this['_startingW'+'eight']=this['weight'],this['_targetWei'+'ght']=_0xd15972,this['_blendTime']=Math['max'](0x153*0x11+0xb44+-0x21c7,_0x2bb315),this['_blendTime'+'Elapsed']=-0xb*0xa7+-0x4*0x7ae+-0x59*-0x6d;}['assignAnim'+'ation'](_0x30fd54,_0x10352d,_0x2e1af3,_0x263762){if(!(_0x10352d instanceof Qi)){w['error']('assignAnim'+'ation:\x20ani'+'mTrack\x20sup'+'plied\x20to\x20f'+'unction\x20wa'+'s\x20not\x20of\x20t'+'ype\x20AnimTr'+'ack');return;}this['_controlle'+'r']['assignAnim'+'ation'](_0x30fd54,_0x10352d,_0x2e1af3,_0x263762),this['_controlle'+'r']['_transitio'+'ns']['length']===0x21e*-0x5+0x2*0xc2+-0x102*-0x9&&this['_controlle'+'r']['_transitio'+'ns']['push'](new Lh({'from':'START','to':_0x30fd54})),this['_component']['activate']&&this['_component']['playable']&&(this['_component']['playing']=!(-0x49*-0x59+0x1b13+-0x3474));}['removeNode'+'Animations'](_0x4fe410){this['_controlle'+'r']['removeNode'+'Animations'](_0x4fe410)&&(this['_component']['playing']=!(0x1*-0x349+-0x1ed8+0x2222));}['getAnimati'+'onAsset'](_0x2d399f){return this['_component']['animationA'+'ssets'][this['name']+':'+_0x2d399f];}['transition'](_0x168047,_0x3f2285=-0x1*-0x1b0+0xcf*0x16+-0x137a,_0x321d3f=null){this['_controlle'+'r']['updateStat'+'eFromTrans'+'ition'](new Lh({'from':this['_controlle'+'r']['activeStat'+'eName'],'to':_0x168047,'time':_0x3f2285,'transitionOffset':_0x321d3f}));}}class Jc{constructor(_0x3a33ef){if(this['_layers']=[],this['_parameter'+'s']={},Array['isArray'](_0x3a33ef['layers']))this['_layers']=_0x3a33ef['layers'];else for(const _0x3d2e62 in _0x3a33ef['layers']){const _0x53f000=_0x3a33ef['layers'][_0x3d2e62],_0x1d814c={'name':_0x53f000['name'],'blendType':_0x53f000['blendType'],'weight':_0x53f000['weight'],'states':[],'transitions':[]};for(let _0x2c936a=-0x493+0x11*0xa7+-0x342*0x2;_0x2c936a<_0x53f000['states']['length'];_0x2c936a++)_0x1d814c['states']['push'](_0x3a33ef['states'][_0x53f000['states'][_0x2c936a]]);for(let _0xf7b51=-0x2612+0x1d17*0x1+-0xd1*-0xb;_0xf7b51<_0x53f000['transition'+'s']['length'];_0xf7b51++){const _0x508d02=_0x3a33ef['transition'+'s'][_0x53f000['transition'+'s'][_0xf7b51]];if(_0x508d02['conditions']&&!Array['isArray'](_0x508d02['conditions'])){const _0x5df898=Object['keys'](_0x508d02['conditions']),_0x250410=[];for(let _0x42dcff=-0x7*-0x358+-0x2309*0x1+0xba1;_0x42dcff<_0x5df898['length'];_0x42dcff++){const _0x24b7ec=_0x508d02['conditions'][_0x5df898[_0x42dcff]];_0x24b7ec['parameterN'+'ame']&&_0x250410['push'](_0x24b7ec);}_0x508d02['conditions']=_0x250410;}Number['isInteger'](_0x508d02['from'])&&(_0x508d02['from']=_0x3a33ef['states'][_0x508d02['from']]['name']),Number['isInteger'](_0x508d02['to'])&&(_0x508d02['to']=_0x3a33ef['states'][_0x508d02['to']]['name']),_0x1d814c['transition'+'s']['push'](_0x508d02);}this['_layers']['push'](_0x1d814c);}for(const _0x431f3b in _0x3a33ef['parameters']){const _0x173dce=_0x3a33ef['parameters'][_0x431f3b];this['_parameter'+'s'][_0x173dce['name']]={'type':_0x173dce['type'],'value':_0x173dce['value']};}}get['parameters'](){return Object['assign']({},this['_parameter'+'s']);}get['layers'](){return this['_layers'];}}class $v extends we{constructor(){super(...arguments),h(this,'_stateGrap'+'hAsset',null),h(this,'_animation'+'Assets',{}),h(this,'_speed',-0x364*-0x3+0x443*-0x1+-0x5e8),h(this,'_activate',!(0x242*-0x2+0x159b*-0x1+0x1a1f)),h(this,'_playing',!(0x2653*0x1+-0xa30+0x115*-0x1a)),h(this,'_rootBone',null),h(this,'_stateGrap'+'h',null),h(this,'_layers',[]),h(this,'_layerIndi'+'ces',{}),h(this,'_parameter'+'s',{}),h(this,'_targets',{}),h(this,'_consumedT'+'riggers',new Set()),h(this,'_normalize'+'Weights',!(-0x9f2+0x404*0x1+0x5ef)),h(this,'findParame'+'ter',_0x120246=>this['_parameter'+'s'][_0x120246]),h(this,'consumeTri'+'gger',_0x5dc13e=>{this['_consumedT'+'riggers']['add'](_0x5dc13e);});}set['stateGraph'+'Asset'](_0x58b074){if(_0x58b074===null){this['removeStat'+'eGraph']();return;}this['_stateGrap'+'hAsset']&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);let _0x2d7223,_0xc19cdf;_0x58b074 instanceof pe?(_0x2d7223=_0x58b074['id'],_0xc19cdf=this['system']['app']['assets']['get'](_0x2d7223),_0xc19cdf||(this['system']['app']['assets']['add'](_0x58b074),_0xc19cdf=this['system']['app']['assets']['get'](_0x2d7223))):(_0x2d7223=_0x58b074,_0xc19cdf=this['system']['app']['assets']['get'](_0x2d7223)),!(!_0xc19cdf||this['_stateGrap'+'hAsset']===_0x2d7223)&&(_0xc19cdf['resource']?(this['_stateGrap'+'h']=_0xc19cdf['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']),_0xc19cdf['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this)):(_0xc19cdf['once']('load',_0x38a51a=>{this['_stateGrap'+'h']=_0x38a51a['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']);}),_0xc19cdf['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this),this['system']['app']['assets']['load'](_0xc19cdf)),this['_stateGrap'+'hAsset']=_0x2d7223);}get['stateGraph'+'Asset'](){return this['_stateGrap'+'hAsset'];}set['normalizeW'+'eights'](_0x260a77){this['_normalize'+'Weights']=_0x260a77,this['unbind']();}get['normalizeW'+'eights'](){return this['_normalize'+'Weights'];}set['animationA'+'ssets'](_0x55770d){this['_animation'+'Assets']=_0x55770d,this['loadAnimat'+'ionAssets']();}get['animationA'+'ssets'](){return this['_animation'+'Assets'];}set['speed'](_0x6e7a66){this['_speed']=_0x6e7a66;}get['speed'](){return this['_speed'];}set['activate'](_0x5f5562){this['_activate']=_0x5f5562;}get['activate'](){return this['_activate'];}set['playing'](_0x2e8c01){this['_playing']=_0x2e8c01;}get['playing'](){return this['_playing'];}set['rootBone'](_0x36d41d){if(typeof _0x36d41d=='string'){const _0x233ec5=this['entity']['root']['findByGuid'](_0x36d41d);w['assert'](_0x233ec5,'rootBone\x20e'+'ntity\x20for\x20'+'supplied\x20g'+'uid:'+_0x36d41d+('\x20cannot\x20be'+'\x20found\x20in\x20'+'the\x20scene')),this['_rootBone']=_0x233ec5;}else _0x36d41d instanceof lt?this['_rootBone']=_0x36d41d:this['_rootBone']=null;this['rebind']();}get['rootBone'](){return this['_rootBone'];}set['stateGraph'](_0x3a1f8f){this['_stateGrap'+'h']=_0x3a1f8f;}get['stateGraph'](){return this['_stateGrap'+'h'];}get['layers'](){return this['_layers'];}set['layerIndic'+'es'](_0x23c640){this['_layerIndi'+'ces']=_0x23c640;}get['layerIndic'+'es'](){return this['_layerIndi'+'ces'];}set['parameters'](_0x5df4c0){this['_parameter'+'s']=_0x5df4c0;}get['parameters'](){return this['_parameter'+'s'];}set['targets'](_0x30a565){this['_targets']=_0x30a565;}get['targets'](){return this['_targets'];}get['playable'](){for(let _0x12c1ec=-0xa4*-0x24+-0x552+-0x11be;_0x12c1ec<this['_layers']['length'];_0x12c1ec++)if(!this['_layers'][_0x12c1ec]['playable'])return!(-0x558+0x64c+0x3*-0x51);return!(0x1*0xfc0+-0x17cb+0x80b);}get['baseLayer'](){return this['_layers']['length']>0xae5*0x3+0x3a*0x8a+-0x3*0x1551?this['_layers'][0x1*-0x26b3+-0x38*-0x8b+0x84b]:null;}['_onStateGr'+'aphAssetCh'+'angeEvent'](_0x416db6){const _0x32b910=this['animationA'+'ssets'],_0x428d7b=this['layers']['map'](_0x574dbc=>_0x574dbc['mask']);this['removeStat'+'eGraph'](),this['_stateGrap'+'h']=new Jc(_0x416db6['_data']),this['loadStateG'+'raph'](this['_stateGrap'+'h']),this['animationA'+'ssets']=_0x32b910,this['loadAnimat'+'ionAssets'](),this['layers']['forEach']((_0x4a3bc6,_0x27fefd)=>{_0x4a3bc6['mask']=_0x428d7b[_0x27fefd];}),this['rebind']();}['dirtifyTar'+'gets'](){const _0x2e7300=Object['values'](this['_targets']);for(let _0x43ac5a=-0x3*-0x956+-0x5*0x5dd+0x14f;_0x43ac5a<_0x2e7300['length'];_0x43ac5a++)_0x2e7300[_0x43ac5a]['dirty']=!(0x14e4+0x1*0x1fdd+-0xb9*0x49);}['_addLayer']({name:_0x4cdf9d,states:_0x56d575,transitions:_0x5f5713,weight:_0x53c79d,mask:_0x5a825e,blendType:_0x1d3eb2}){let _0x5b99c1;this['rootBone']?_0x5b99c1=this['rootBone']:_0x5b99c1=this['entity'];const _0x228e13=this['_layers']['length'],_0x4e9ba5=new Fi(this,_0x5b99c1,_0x4cdf9d,_0x5a825e,_0x228e13),_0x2a663e=new Gv(_0x4e9ba5),_0x3427c1=new NL(_0x2a663e,_0x56d575,_0x5f5713,this['_activate'],this,this['findParame'+'ter'],this['consumeTri'+'gger']);return this['_layers']['push'](new kL(_0x4cdf9d,_0x3427c1,this,_0x53c79d,_0x1d3eb2)),this['_layerIndi'+'ces'][_0x4cdf9d]=_0x228e13,this['_layers'][_0x228e13];}['addLayer'](_0x326970,_0x257760,_0x5a8dd3,_0x32ddfe){const _0x44acd1=this['findAnimat'+'ionLayer'](_0x326970);if(_0x44acd1)return _0x44acd1;const _0x1bb3d3=[{'name':'START','speed':0x1}],_0x535826=[];return this['_addLayer']({'name':_0x326970,'states':_0x1bb3d3,'transitions':_0x535826,'weight':_0x257760,'mask':_0x5a8dd3,'blendType':_0x32ddfe});}['_assignPar'+'ameters'](_0x3b9ca9){this['_parameter'+'s']={};const _0x1603d7=Object['keys'](_0x3b9ca9['parameters']);for(let _0x11f04a=-0xbc8+-0x22ba+0x2e82;_0x11f04a<_0x1603d7['length'];_0x11f04a++){const _0x296d68=_0x1603d7[_0x11f04a];this['_parameter'+'s'][_0x296d68]={'type':_0x3b9ca9['parameters'][_0x296d68]['type'],'value':_0x3b9ca9['parameters'][_0x296d68]['value']};}}['loadStateG'+'raph'](_0x5b9928){this['_stateGrap'+'h']=_0x5b9928,this['_assignPar'+'ameters'](_0x5b9928),this['_layers']=[];let _0x5288df=!(-0x1158+0x2*-0xef9+0x1*0x2f4b);for(let _0x23462e=0x6c5+-0x590+-0x67*0x3;_0x23462e<_0x5b9928['layers']['length'];_0x23462e++){const _0x35bea7=_0x5b9928['layers'][_0x23462e];this['_addLayer']({..._0x35bea7}),_0x35bea7['states']['some'](_0xbd7fbd=>_0xbd7fbd['blendTree'])&&(_0x5288df=!(0xa9*-0x12+0x1*-0x18b3+0x1*0x2495));}_0x5288df||this['setupAnima'+'tionAssets']();}['setupAnima'+'tionAssets'](){for(let _0x1cf682=0x167e*0x1+0x83*-0x45+0xcd1;_0x1cf682<this['_layers']['length'];_0x1cf682++){const _0x14610d=this['_layers'][_0x1cf682],_0x53fb82=_0x14610d['name'];for(let _0x4ed382=0x1e3b+0x1*0x1f83+-0x3dbe;_0x4ed382<_0x14610d['states']['length'];_0x4ed382++){const _0x68be84=_0x14610d['states'][_0x4ed382];if(Ih['indexOf'](_0x68be84)===-(-0x2402+0x61d*-0x4+0x3c77)){const _0x196570=_0x53fb82+':'+_0x68be84;this['_animation'+'Assets'][_0x196570]||(this['_animation'+'Assets'][_0x196570]={'asset':null});}}}this['loadAnimat'+'ionAssets']();}['loadAnimat'+'ionAssets'](){for(let _0x43d2ff=-0x14b6+-0x1fa8+0x345e;_0x43d2ff<this['_layers']['length'];_0x43d2ff++){const _0x3445ee=this['_layers'][_0x43d2ff];for(let _0x26374e=0x557*0x3+-0x2d7*-0x8+0x2f*-0xd3;_0x26374e<_0x3445ee['states']['length'];_0x26374e++){const _0x27ac18=_0x3445ee['states'][_0x26374e];if(Ih['indexOf'](_0x27ac18)!==-(0x125e+-0x2582+-0x179*-0xd))continue;const _0x42be9e=this['_animation'+'Assets'][_0x3445ee['name']+':'+_0x27ac18];if(!_0x42be9e||!_0x42be9e['asset']){this['findAnimat'+'ionLayer'](_0x3445ee['name'])['assignAnim'+'ation'](_0x27ac18,Qi['EMPTY']);continue;}const _0x313daa=_0x42be9e['asset'],_0x14c94e=this['system']['app']['assets']['get'](_0x313daa);_0x14c94e&&(_0x14c94e['resource']?this['onAnimatio'+'nAssetLoad'+'ed'](_0x3445ee['name'],_0x27ac18,_0x14c94e):(_0x14c94e['once']('load',function(_0x156f81,_0x45b400){return function(_0xbccd5e){this['onAnimatio'+'nAssetLoad'+'ed'](_0x156f81,_0x45b400,_0xbccd5e);}['bind'](this);}['bind'](this)(_0x3445ee['name'],_0x27ac18)),this['system']['app']['assets']['load'](_0x14c94e)));}}}['onAnimatio'+'nAssetLoad'+'ed'](_0x2a4789,_0x5ebae1,_0x3f5b49){this['findAnimat'+'ionLayer'](_0x2a4789)['assignAnim'+'ation'](_0x5ebae1,_0x3f5b49['resource']);}['removeStat'+'eGraph'](){this['_stateGrap'+'h']=null,this['_stateGrap'+'hAsset']=null,this['_animation'+'Assets']={},this['_layers']=[],this['_layerIndi'+'ces']={},this['_parameter'+'s']={},this['_playing']=!(0xb26+-0x137*0xa+0x101),this['unbind'](),this['_targets']={};}['reset'](){this['_assignPar'+'ameters'](this['_stateGrap'+'h']);for(let _0x289dbc=-0x4a*0x76+0x23b2+0xcb*-0x2;_0x289dbc<this['_layers']['length'];_0x289dbc++){const _0x4b86e9=this['_layers'][_0x289dbc]['playing'];this['_layers'][_0x289dbc]['reset'](),this['_layers'][_0x289dbc]['playing']=_0x4b86e9;}}['unbind'](){this['_normalize'+'Weights']||Object['keys'](this['_targets'])['forEach'](_0x22605f=>{this['_targets'][_0x22605f]['unbind']();});}['rebind'](){this['_targets']={};for(let _0x458747=-0x1*-0x1e0e+-0x3*-0x552+-0x17c*0x1f;_0x458747<this['_layers']['length'];_0x458747++)this['_layers'][_0x458747]['rebind']();}['findAnimat'+'ionLayer'](_0x235123){const _0x4f4f66=this['_layerIndi'+'ces'][_0x235123];return this['_layers'][_0x4f4f66]||null;}['addAnimati'+'onState'](_0x54bf66,_0xdc5398,_0x349f1b=0x7eb*-0x1+-0x220f*0x1+0x29fb,_0xbc9826=!(0x1a9*-0x1+-0x185b+0x1a04),_0x5b249c='Base'){var _0x509ada;this['_stateGrap'+'h']||this['loadStateG'+'raph'](new Jc({'layers':[{'name':_0x5b249c,'states':[{'name':'START','speed':0x1},{'name':_0x54bf66,'speed':_0x349f1b,'loop':_0xbc9826,'defaultState':!(-0x7*-0x116+-0x20d8+0x193e)}],'transitions':[{'from':'START','to':_0x54bf66}]}],'parameters':{}}));const _0x16f02b=this['findAnimat'+'ionLayer'](_0x5b249c);_0x16f02b?_0x16f02b['assignAnim'+'ation'](_0x54bf66,_0xdc5398,_0x349f1b,_0xbc9826):(_0x509ada=this['addLayer'](_0x5b249c))==null||_0x509ada['assignAnim'+'ation'](_0x54bf66,_0xdc5398,_0x349f1b,_0xbc9826);}['assignAnim'+'ation'](_0x5a493d,_0x509757,_0x1b4b0c,_0x55b11f=-0x3d*-0x4b+0x4a4+-0x1682,_0xf830aa=!(-0x113b+0x649*0x5+-0xe32)){if(!this['_stateGrap'+'h']&&_0x5a493d['indexOf']('.')===-(-0xcb*0x1b+0x67*0x52+-0x39*0x34)){this['loadStateG'+'raph'](new Jc({'layers':[{'name':'Base','states':[{'name':'START','speed':0x1},{'name':_0x5a493d,'speed':_0x55b11f,'loop':_0xf830aa,'defaultState':!(-0x1423+0x14c+-0x173*-0xd)}],'transitions':[{'from':'START','to':_0x5a493d}]}],'parameters':{}})),this['baseLayer']['assignAnim'+'ation'](_0x5a493d,_0x509757);return;}const _0x2229e5=_0x1b4b0c?this['findAnimat'+'ionLayer'](_0x1b4b0c):this['baseLayer'];if(!_0x2229e5){w['error']('assignAnim'+'ation:\x20Try'+'ing\x20to\x20ass'+'ign\x20an\x20ani'+'m\x20track\x20to'+'\x20a\x20layer\x20t'+'hat\x20doesn\x27'+'t\x20exist');return;}_0x2229e5['assignAnim'+'ation'](_0x5a493d,_0x509757,_0x55b11f,_0xf830aa);}['removeNode'+'Animations'](_0x148693,_0x383dab){const _0x8dc4eb=_0x383dab?this['findAnimat'+'ionLayer'](_0x383dab):this['baseLayer'];if(!_0x8dc4eb){w['error']('removeStat'+'eAnimation'+'s:\x20Trying\x20'+'to\x20remove\x20'+'animation\x20'+'tracks\x20fro'+'m\x20a\x20state\x20'+'before\x20the'+'\x20state\x20gra'+'ph\x20has\x20bee'+'n\x20loaded.\x20'+'Have\x20you\x20c'+'alled\x20load'+'StateGraph'+'?');return;}_0x8dc4eb['removeNode'+'Animations'](_0x148693);}['getParamet'+'erValue'](_0x3fc39a,_0x7f1ebd){const _0x581f59=this['_parameter'+'s'][_0x3fc39a];if(_0x581f59&&_0x581f59['type']===_0x7f1ebd)return _0x581f59['value'];w['log']('Cannot\x20get'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x3fc39a+('\x22\x20of\x20type\x20'+'\x22')+_0x7f1ebd+'\x22');}['setParamet'+'erValue'](_0x6066b7,_0x4cb08f,_0x165e34){const _0x5d47a7=this['_parameter'+'s'][_0x6066b7];if(_0x5d47a7&&_0x5d47a7['type']===_0x4cb08f){_0x5d47a7['value']=_0x165e34;return;}w['log']('Cannot\x20set'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x6066b7+('\x22\x20of\x20type\x20'+'\x22')+_0x4cb08f+'\x22');}['getFloat'](_0x339eb8){return this['getParamet'+'erValue'](_0x339eb8,Rg);}['setFloat'](_0x37098a,_0x430002){this['setParamet'+'erValue'](_0x37098a,Rg,_0x430002);}['getInteger'](_0x53ac99){return this['getParamet'+'erValue'](_0x53ac99,Lg);}['setInteger'](_0x4ebfba,_0x1a203f){typeof _0x1a203f=='number'&&_0x1a203f%(0xd87+0x1bc2+-0x2*0x14a4)===0x1b7f+-0x2596+0x15*0x7b?this['setParamet'+'erValue'](_0x4ebfba,Lg,_0x1a203f):w['error']('Attempting'+'\x20to\x20assign'+'\x20non\x20integ'+'er\x20value\x20t'+'o\x20integer\x20'+'parameter',_0x4ebfba,_0x1a203f);}['getBoolean'](_0x1e9448){return this['getParamet'+'erValue'](_0x1e9448,Og);}['setBoolean'](_0x45ee8d,_0xbb84f4){this['setParamet'+'erValue'](_0x45ee8d,Og,!!_0xbb84f4);}['getTrigger'](_0x2232f2){return this['getParamet'+'erValue'](_0x2232f2,Qc);}['setTrigger'](_0x2ae392,_0xc4037c=!(0x10de+-0x1*-0x1fd6+-0x30b3)){this['setParamet'+'erValue'](_0x2ae392,Qc,!(-0x5*-0x25+-0x1f*0x11f+0x2208)),_0xc4037c&&this['_consumedT'+'riggers']['add'](_0x2ae392);}['resetTrigg'+'er'](_0x2efebe){this['setParamet'+'erValue'](_0x2efebe,Qc,!(0x18a4+0x3b4*-0x8+0x4fd));}['onBeforeRe'+'move'](){Number['isFinite'](this['_stateGrap'+'hAsset'])&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);}['update'](_0x30bf80){for(let _0x3967e0=-0x1*0x5f+0xe5*-0x6+0x5bd;_0x3967e0<this['layers']['length'];_0x3967e0++)this['layers'][_0x3967e0]['update'](_0x30bf80*this['speed']);this['_consumedT'+'riggers']['forEach'](_0x5aa5ea=>{this['parameters'][_0x5aa5ea]['value']=!(0x1c1*-0x4+-0xd*0x1a7+0x1c80);}),this['_consumedT'+'riggers']['clear']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x1ac74c,_0x41bb58){_0x1ac74c['rootBone']&&_0x41bb58[_0x1ac74c['rootBone']['getGuid']()]?this['rootBone']=_0x41bb58[_0x1ac74c['rootBone']['getGuid']()]:this['rebind']();}}class UL{constructor(){this['enabled']=!(-0x2*0xa26+0x15e0+-0x194);}}const bu=['enabled'];class BL extends ct{constructor(_0x34bc4e){super(_0x34bc4e),this['id']='anim',this['ComponentT'+'ype']=$v,this['DataType']=UL,this['schema']=bu,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x4a7603,_0x3d6020,_0x5cc3a2){super['initialize'+'ComponentD'+'ata'](_0x4a7603,_0x3d6020,bu);const _0xf11edf=['animationA'+'ssets','stateGraph','layers','masks'];Object['keys'](_0x3d6020)['forEach'](_0x15df77=>{_0xf11edf['includes'](_0x15df77)||(_0x4a7603[_0x15df77]=_0x3d6020[_0x15df77]);}),_0x3d6020['stateGraph']&&(_0x4a7603['stateGraph']=_0x3d6020['stateGraph'],_0x4a7603['loadStateG'+'raph'](_0x4a7603['stateGraph'])),_0x3d6020['layers']&&_0x3d6020['layers']['forEach']((_0x2acddc,_0x51a747)=>{_0x2acddc['_controlle'+'r']['states']['forEach'](_0x91b81d=>{_0x2acddc['_controlle'+'r']['_states'][_0x91b81d]['_animation'+'List']['forEach'](_0x229a03=>{if(!_0x229a03['animTrack']||_0x229a03['animTrack']===Qi['EMPTY']){const _0x2a76aa=this['app']['assets']['get'](_0x2acddc['_component']['_animation'+'Assets'][_0x2acddc['name']+':'+_0x229a03['name']]['asset']);_0x2a76aa&&!_0x2a76aa['loaded']&&_0x2a76aa['once']('load',()=>{_0x4a7603['layers'][_0x51a747]['assignAnim'+'ation'](_0x229a03['name'],_0x2a76aa['resource']);});}else _0x4a7603['layers'][_0x51a747]['assignAnim'+'ation'](_0x229a03['name'],_0x229a03['animTrack']);});});}),_0x3d6020['animationA'+'ssets']&&(_0x4a7603['animationA'+'ssets']=Object['assign'](_0x4a7603['animationA'+'ssets'],_0x3d6020['animationA'+'ssets'])),_0x3d6020['masks']&&Object['keys'](_0x3d6020['masks'])['forEach'](_0x743637=>{if(_0x4a7603['layers'][_0x743637]){const _0x1e4ab2=_0x3d6020['masks'][_0x743637]['mask'],_0x11789a={};Object['keys'](_0x1e4ab2)['forEach'](_0x3eae81=>{_0x11789a[decodeURI(_0x3eae81)]=_0x1e4ab2[_0x3eae81];}),_0x4a7603['layers'][_0x743637]['mask']=_0x11789a;}});}['onAnimatio'+'nUpdate'](_0x5bbf4d){const _0x2a4866=this['store'];for(const _0x24f2aa in _0x2a4866)if(_0x2a4866['hasOwnProp'+'erty'](_0x24f2aa)){const _0x7ff357=_0x2a4866[_0x24f2aa]['entity']['anim'];_0x7ff357['data']['enabled']&&_0x7ff357['entity']['enabled']&&_0x7ff357['playing']&&_0x7ff357['update'](_0x5bbf4d);}}['cloneCompo'+'nent'](_0x1c2314,_0x5de189){let _0xfdf05e;(!_0x1c2314['anim']['rootBone']||_0x1c2314['anim']['rootBone']===_0x1c2314)&&(_0xfdf05e={},_0x1c2314['anim']['layers']['forEach']((_0x4aedcb,_0x298e48)=>{if(_0x4aedcb['mask']){const _0x4d7c3d={};Object['keys'](_0x4aedcb['mask'])['forEach'](_0x4e5972=>{const _0x48dfd6=_0x4e5972['split']('/');_0x48dfd6['shift']();const _0x139645=[_0x5de189['name'],..._0x48dfd6]['join']('/');_0x4d7c3d[_0x139645]=_0x4aedcb['mask'][_0x4e5972];}),_0xfdf05e[_0x298e48]={'mask':_0x4d7c3d};}}));const _0x5e46f1={'enabled':_0x1c2314['anim']['enabled'],'stateGraphAsset':_0x1c2314['anim']['stateGraph'+'Asset'],'animationAssets':_0x1c2314['anim']['animationA'+'ssets'],'speed':_0x1c2314['anim']['speed'],'activate':_0x1c2314['anim']['activate'],'playing':_0x1c2314['anim']['playing'],'rootBone':_0x1c2314['anim']['rootBone'],'stateGraph':_0x1c2314['anim']['stateGraph'],'layers':_0x1c2314['anim']['layers'],'layerIndices':_0x1c2314['anim']['layerIndic'+'es'],'parameters':_0x1c2314['anim']['parameters'],'normalizeWeights':_0x1c2314['anim']['normalizeW'+'eights'],'masks':_0xfdf05e};return this['addCompone'+'nt'](_0x5de189,_0x5e46f1);}['onBeforeRe'+'move'](_0x43e499,_0x38c1a9){_0x38c1a9['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}}we['_buildAcce'+'ssors']($v['prototype'],bu);class Xv extends we{['setCurrent'+'Listener'](){if(this['enabled']&&this['entity']['audioliste'+'ner']&&this['entity']['enabled']){this['system']['current']=this['entity'];const _0x408a7d=this['system']['current']['getPositio'+'n']();this['system']['manager']['listener']['setPositio'+'n'](_0x408a7d);}}['onEnable'](){this['setCurrent'+'Listener']();}['onDisable'](){this['system']['current']===this['entity']&&(this['system']['current']=null);}}class zL{constructor(){this['enabled']=!(-0x112*0x11+-0xdaf+0x1fe1);}}const qv=['enabled'];class VL extends ct{constructor(_0x292273){super(_0x292273),this['id']='audioliste'+'ner',this['ComponentT'+'ype']=Xv,this['DataType']=zL,this['schema']=qv,this['manager']=_0x292273['soundManag'+'er'],w['assert'](this['manager'],'AudioListe'+'nerCompone'+'ntSystem\x20c'+'annot\x20be\x20c'+'reated\x20wit'+'hout\x20sound'+'\x20manager'),this['current']=null,this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x517783,_0x3f6688,_0x4d223a){_0x4d223a=['enabled'],super['initialize'+'ComponentD'+'ata'](_0x517783,_0x3f6688,_0x4d223a);}['onUpdate'](_0xf356d3){if(this['current']){const _0x452d89=this['current']['getPositio'+'n']();this['manager']['listener']['setPositio'+'n'](_0x452d89);const _0x14d5c4=this['current']['getWorldTr'+'ansform']();this['manager']['listener']['setOrienta'+'tion'](_0x14d5c4);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Xv['prototype'],qv);const Au=0x10f0+0x18fd+-0x29ed,Ng=0xa86+0x577*-0x5+0x6*0x2cd,eh='group',Cu='image',jv='text',th='stretch',GL='contain',HL='cover',ft={'DEFAULT':'DEFAULT','HOVER':'HOVER','PRESSED':'PRESSED','INACTIVE':'INACTIVE'},kl={};kl[ft['DEFAULT']]='_defaultTi'+'nt',kl[ft['HOVER']]='hoverTint',kl[ft['PRESSED']]='pressedTin'+'t',kl[ft['INACTIVE']]='inactiveTi'+'nt';const Ul={};Ul[ft['DEFAULT']]='_defaultSp'+'riteAsset',Ul[ft['HOVER']]='hoverSprit'+'eAsset',Ul[ft['PRESSED']]='pressedSpr'+'iteAsset',Ul[ft['INACTIVE']]='inactiveSp'+'riteAsset';const Bl={};Bl[ft['DEFAULT']]='_defaultSp'+'riteFrame',Bl[ft['HOVER']]='hoverSprit'+'eFrame',Bl[ft['PRESSED']]='pressedSpr'+'iteFrame',Bl[ft['INACTIVE']]='inactiveSp'+'riteFrame';class It extends we{constructor(_0x59acff,_0x2e8bce){super(_0x59acff,_0x2e8bce),h(this,'_visualSta'+'te',ft['DEFAULT']),h(this,'_isHoverin'+'g',!(-0x2584+0x24b0+0xd5)),h(this,'_hoveringC'+'ounter',-0x9*0x61+-0x2434+-0x1*-0x279d),h(this,'_isPressed',!(0x201f+-0x2679+0x65b)),h(this,'_defaultTi'+'nt',new ie(0x1fd9+0xf0d+0x157*-0x23,-0x1*0xb0e+0x104e*-0x1+0x1b5d,0x4d+0x133e+0x29*-0x7a,-0x4d2+0x23c9*0x1+-0x1ef6)),h(this,'_defaultSp'+'riteAsset',null),h(this,'_defaultSp'+'riteFrame',0x118e+0x11*-0x1e7+0x5*0x2f5),h(this,'_imageEnti'+'ty',null),h(this,'_evtElemen'+'tAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntRemove',null),h(this,'_evtImageE'+'ntityEleme'+'ntColor',null),h(this,'_evtImageE'+'ntityEleme'+'ntOpacity',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame',null),(this['_visualSta'+'te']=ft['DEFAULT'],this['_isHoverin'+'g']=!(0x840+0x25be+-0x2dfd),this['_hoveringC'+'ounter']=0x31c+0x31*-0x2f+-0x89*-0xb,this['_isPressed']=!(0x13ce+-0xad*-0x1f+-0x28c0),this['_defaultTi'+'nt']=new ie(0xe9*0x1+-0x155*0xd+0x1069,0x179*-0x17+-0x167*-0x11+0xa09,-0x104b+-0x14*-0x11+0xef8,-0x15f7+-0x12c0+-0x517*-0x8),this['_defaultSp'+'riteAsset']=null,this['_defaultSp'+'riteFrame']=0x1e*-0x95+0x1506+-0xc*0x4c,this['_toggleLif'+'ecycleList'+'eners']('on',_0x59acff));}get['data'](){const _0x9999d9=this['system']['store'][this['entity']['getGuid']()];return _0x9999d9?_0x9999d9['data']:null;}set['enabled'](_0xd18d7f){this['_setValue']('enabled',_0xd18d7f);}get['enabled'](){return this['data']['enabled'];}set['active'](_0x1b92f6){this['_setValue']('active',_0x1b92f6);}get['active'](){return this['data']['active'];}set['imageEntit'+'y'](_0x43e927){if(this['_imageEnti'+'ty']!==_0x43e927){const _0x4ea1e1=typeof _0x43e927=='string';if(this['_imageEnti'+'ty']&&_0x4ea1e1&&this['_imageEnti'+'ty']['getGuid']()===_0x43e927)return;this['_imageEnti'+'ty']&&this['_imageEnti'+'tyUnsubscr'+'ibe'](),_0x43e927 instanceof Ie?this['_imageEnti'+'ty']=_0x43e927:_0x4ea1e1?this['_imageEnti'+'ty']=this['system']['app']['getEntityF'+'romIndex'](_0x43e927)||null:this['_imageEnti'+'ty']=null,this['_imageEnti'+'ty']&&this['_imageEnti'+'tySubscrib'+'e'](),this['_imageEnti'+'ty']?this['data']['imageEntit'+'y']=this['_imageEnti'+'ty']['getGuid']():_0x4ea1e1&&_0x43e927&&(this['data']['imageEntit'+'y']=_0x43e927);}}get['imageEntit'+'y'](){return this['_imageEnti'+'ty'];}set['hitPadding'](_0x352c86){this['_setValue']('hitPadding',_0x352c86);}get['hitPadding'](){return this['data']['hitPadding'];}set['transition'+'Mode'](_0x75f09){this['_setValue']('transition'+'Mode',_0x75f09);}get['transition'+'Mode'](){return this['data']['transition'+'Mode'];}set['hoverTint'](_0x1fdee6){this['_setValue']('hoverTint',_0x1fdee6);}get['hoverTint'](){return this['data']['hoverTint'];}set['pressedTin'+'t'](_0x25e800){this['_setValue']('pressedTin'+'t',_0x25e800);}get['pressedTin'+'t'](){return this['data']['pressedTin'+'t'];}set['inactiveTi'+'nt'](_0x3c5beb){this['_setValue']('inactiveTi'+'nt',_0x3c5beb);}get['inactiveTi'+'nt'](){return this['data']['inactiveTi'+'nt'];}set['fadeDurati'+'on'](_0xf3505d){this['_setValue']('fadeDurati'+'on',_0xf3505d);}get['fadeDurati'+'on'](){return this['data']['fadeDurati'+'on'];}set['hoverSprit'+'eAsset'](_0x49c31){this['_setValue']('hoverSprit'+'eAsset',_0x49c31);}get['hoverSprit'+'eAsset'](){return this['data']['hoverSprit'+'eAsset'];}set['hoverSprit'+'eFrame'](_0x2072c0){this['_setValue']('hoverSprit'+'eFrame',_0x2072c0);}get['hoverSprit'+'eFrame'](){return this['data']['hoverSprit'+'eFrame'];}set['pressedSpr'+'iteAsset'](_0x2a834){this['_setValue']('pressedSpr'+'iteAsset',_0x2a834);}get['pressedSpr'+'iteAsset'](){return this['data']['pressedSpr'+'iteAsset'];}set['pressedSpr'+'iteFrame'](_0x2960ce){this['_setValue']('pressedSpr'+'iteFrame',_0x2960ce);}get['pressedSpr'+'iteFrame'](){return this['data']['pressedSpr'+'iteFrame'];}set['inactiveSp'+'riteAsset'](_0x13771d){this['_setValue']('inactiveSp'+'riteAsset',_0x13771d);}get['inactiveSp'+'riteAsset'](){return this['data']['inactiveSp'+'riteAsset'];}set['inactiveSp'+'riteFrame'](_0x3e894a){this['_setValue']('inactiveSp'+'riteFrame',_0x3e894a);}get['inactiveSp'+'riteFrame'](){return this['data']['inactiveSp'+'riteFrame'];}['_setValue'](_0x2d9f41,_0x1ac1bd){const _0x4ab5fa=this['data'],_0x12a0b7=_0x4ab5fa[_0x2d9f41];_0x4ab5fa[_0x2d9f41]=_0x1ac1bd,this['fire']('set',_0x2d9f41,_0x12a0b7,_0x1ac1bd);}['_toggleLif'+'ecycleList'+'eners'](_0x385778,_0x5e8841){var _0x25e3bf;this[_0x385778]('set_active',this['_onSetActi'+'ve'],this),this[_0x385778]('set_transi'+'tionMode',this['_onSetTran'+'sitionMode'],this),this[_0x385778]('set_hoverT'+'int',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x385778]('set_presse'+'dTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x385778]('set_inacti'+'veTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x385778]('set_hoverS'+'priteAsset',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x385778]('set_hoverS'+'priteFrame',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x385778]('set_presse'+'dSpriteAss'+'et',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x385778]('set_presse'+'dSpriteFra'+'me',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x385778]('set_inacti'+'veSpriteAs'+'set',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x385778]('set_inacti'+'veSpriteFr'+'ame',this['_onSetTran'+'sitionValu'+'e'],this),_0x385778==='on'?this['_evtElemen'+'tAdd']=this['entity']['on']('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this):((_0x25e3bf=this['_evtElemen'+'tAdd'])==null||_0x25e3bf['off'](),this['_evtElemen'+'tAdd']=null);}['_onSetActi'+'ve'](_0x295e85,_0x1e8aa5,_0x4ab4d8){_0x1e8aa5!==_0x4ab4d8&&this['_updateVis'+'ualState']();}['_onSetTran'+'sitionMode'](_0x3a79b1,_0x5acacc,_0xe38a60){_0x5acacc!==_0xe38a60&&(this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](_0x5acacc),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetTran'+'sitionValu'+'e'](_0x8c107e,_0x9c4ef7,_0x193a79){_0x9c4ef7!==_0x193a79&&this['_forceReap'+'plyVisualS'+'tate']();}['_imageEnti'+'tySubscrib'+'e'](){this['_evtImageE'+'ntityEleme'+'ntAdd']=this['_imageEnti'+'ty']['on']('element:ad'+'d',this['_onImageEl'+'ementGain'],this),this['_imageEnti'+'ty']['element']&&this['_onImageEl'+'ementGain']();}['_imageEnti'+'tyUnsubscr'+'ibe'](){var _0x12c202,_0x566d0e;(_0x12c202=this['_evtImageE'+'ntityEleme'+'ntAdd'])==null||_0x12c202['off'](),this['_evtImageE'+'ntityEleme'+'ntAdd']=null,(_0x566d0e=this['_imageEnti'+'ty'])!=null&&_0x566d0e['element']&&this['_onImageEl'+'ementLose']();}['_imageEnti'+'tyElementS'+'ubscribe'](){const _0xc15f30=this['_imageEnti'+'ty']['element'];this['_evtImageE'+'ntityEleme'+'ntRemove']=_0xc15f30['once']('beforeremo'+'ve',this['_onImageEl'+'ementLose'],this),this['_evtImageE'+'ntityEleme'+'ntColor']=_0xc15f30['on']('set:color',this['_onSetColo'+'r'],this),this['_evtImageE'+'ntityEleme'+'ntOpacity']=_0xc15f30['on']('set:opacit'+'y',this['_onSetOpac'+'ity'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=_0xc15f30['on']('set:sprite'+'Asset',this['_onSetSpri'+'teAsset'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=_0xc15f30['on']('set:sprite'+'Frame',this['_onSetSpri'+'teFrame'],this);}['_imageEnti'+'tyElementU'+'nsubscribe'](){var _0x40e525,_0x4605a8,_0x4fc3ca,_0x184d35,_0x4787f7;(_0x40e525=this['_evtImageE'+'ntityEleme'+'ntRemove'])==null||_0x40e525['off'](),this['_evtImageE'+'ntityEleme'+'ntRemove']=null,(_0x4605a8=this['_evtImageE'+'ntityEleme'+'ntColor'])==null||_0x4605a8['off'](),this['_evtImageE'+'ntityEleme'+'ntColor']=null,(_0x4fc3ca=this['_evtImageE'+'ntityEleme'+'ntOpacity'])==null||_0x4fc3ca['off'](),this['_evtImageE'+'ntityEleme'+'ntOpacity']=null,(_0x184d35=this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set'])==null||_0x184d35['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=null,(_0x4787f7=this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame'])==null||_0x4787f7['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=null;}['_onElement'+'ComponentR'+'emove'](){this['_toggleHit'+'ElementLis'+'teners']('off');}['_onElement'+'ComponentA'+'dd'](){this['_toggleHit'+'ElementLis'+'teners']('on');}['_onImageEl'+'ementLose'](){this['_imageEnti'+'tyElementU'+'nsubscribe'](),this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['_onImageEl'+'ementGain'](){this['_imageEnti'+'tyElementS'+'ubscribe'](),this['_storeDefa'+'ultVisualS'+'tate'](),this['_forceReap'+'plyVisualS'+'tate']();}['_toggleHit'+'ElementLis'+'teners'](_0x3e5a10){if(this['entity']['element']){const _0x6ea27c=_0x3e5a10==='on';if(_0x6ea27c&&this['_hasHitEle'+'mentListen'+'ers'])return;this['entity']['element'][_0x3e5a10]('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['entity']['element'][_0x3e5a10]('mouseenter',this['_onMouseEn'+'ter'],this),this['entity']['element'][_0x3e5a10]('mouseleave',this['_onMouseLe'+'ave'],this),this['entity']['element'][_0x3e5a10]('mousedown',this['_onMouseDo'+'wn'],this),this['entity']['element'][_0x3e5a10]('mouseup',this['_onMouseUp'],this),this['entity']['element'][_0x3e5a10]('touchstart',this['_onTouchSt'+'art'],this),this['entity']['element'][_0x3e5a10]('touchend',this['_onTouchEn'+'d'],this),this['entity']['element'][_0x3e5a10]('touchleave',this['_onTouchLe'+'ave'],this),this['entity']['element'][_0x3e5a10]('touchcance'+'l',this['_onTouchCa'+'ncel'],this),this['entity']['element'][_0x3e5a10]('selectstar'+'t',this['_onSelectS'+'tart'],this),this['entity']['element'][_0x3e5a10]('selectend',this['_onSelectE'+'nd'],this),this['entity']['element'][_0x3e5a10]('selectente'+'r',this['_onSelectE'+'nter'],this),this['entity']['element'][_0x3e5a10]('selectleav'+'e',this['_onSelectL'+'eave'],this),this['entity']['element'][_0x3e5a10]('click',this['_onClick'],this),this['_hasHitEle'+'mentListen'+'ers']=_0x6ea27c;}}['_storeDefa'+'ultVisualS'+'tate'](){var _0x5ab427;const _0x1b5e15=(_0x5ab427=this['_imageEnti'+'ty'])==null?void(-0x2e6*-0xb+0x213b+-0x411d):_0x5ab427['element'];!_0x1b5e15||_0x1b5e15['type']===eh||(this['_storeDefa'+'ultColor'](_0x1b5e15['color']),this['_storeDefa'+'ultOpacity'](_0x1b5e15['opacity']),this['_storeDefa'+'ultSpriteA'+'sset'](_0x1b5e15['spriteAsse'+'t']),this['_storeDefa'+'ultSpriteF'+'rame'](_0x1b5e15['spriteFram'+'e']));}['_storeDefa'+'ultColor'](_0x18057b){this['_defaultTi'+'nt']['r']=_0x18057b['r'],this['_defaultTi'+'nt']['g']=_0x18057b['g'],this['_defaultTi'+'nt']['b']=_0x18057b['b'];}['_storeDefa'+'ultOpacity'](_0x2248bb){this['_defaultTi'+'nt']['a']=_0x2248bb;}['_storeDefa'+'ultSpriteA'+'sset'](_0x20f1bc){this['_defaultSp'+'riteAsset']=_0x20f1bc;}['_storeDefa'+'ultSpriteF'+'rame'](_0x423780){this['_defaultSp'+'riteFrame']=_0x423780;}['_onSetColo'+'r'](_0x11aaad){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultColor'](_0x11aaad),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetOpac'+'ity'](_0x43395a){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultOpacity'](_0x43395a),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teAsset'](_0x1b9ba6){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteA'+'sset'](_0x1b9ba6),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teFrame'](_0x19b15f){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteF'+'rame'](_0x19b15f),this['_forceReap'+'plyVisualS'+'tate']());}['_onMouseEn'+'ter'](_0x48fbcc){this['_isHoverin'+'g']=!(-0xb65*0x1+-0x104f+0x49e*0x6),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseenter',_0x48fbcc);}['_onMouseLe'+'ave'](_0xde4ea8){this['_isHoverin'+'g']=!(-0x265a+0x1*-0xa2e+0x19*0x1f1),this['_isPressed']=!(-0x26b1+0xcfe+0x19b4),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseleave',_0xde4ea8);}['_onMouseDo'+'wn'](_0x443399){this['_isPressed']=!(0x1cc9*-0x1+0x1e1c+-0x153),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mousedown',_0x443399);}['_onMouseUp'](_0x3c9423){this['_isPressed']=!(-0x26d2+-0xf50+0x3623),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseup',_0x3c9423);}['_onTouchSt'+'art'](_0x5b52c9){this['_isPressed']=!(-0x104*-0xf+0x273+-0x11af),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchstart',_0x5b52c9);}['_onTouchEn'+'d'](_0x5214cd){_0x5214cd['event']['preventDef'+'ault'](),this['_isPressed']=!(-0x2*-0x9ad+0x8bb+0x1*-0x1c14),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchend',_0x5214cd);}['_onTouchLe'+'ave'](_0x13db26){this['_isPressed']=!(0x1*0xbf6+-0x1739*0x1+0x19c*0x7),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchleave',_0x13db26);}['_onTouchCa'+'ncel'](_0x491349){this['_isPressed']=!(-0x1bc7+0xa94+0x1134),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchcance'+'l',_0x491349);}['_onSelectS'+'tart'](_0x2c0819){this['_isPressed']=!(0x21*0x117+0x305*0xc+-0x4833),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectstar'+'t',_0x2c0819);}['_onSelectE'+'nd'](_0x2cd232){this['_isPressed']=!(0x3*0xc25+-0xb*0x27a+-0x930),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectend',_0x2cd232);}['_onSelectE'+'nter'](_0x15a005){this['_hoveringC'+'ounter']++,this['_hoveringC'+'ounter']===-0x91d+0x2103+-0x17e5&&(this['_isHoverin'+'g']=!(0x1354+-0x1*-0x18b9+-0x2c0d),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectente'+'r',_0x15a005);}['_onSelectL'+'eave'](_0x3836a6){this['_hoveringC'+'ounter']--,this['_hoveringC'+'ounter']===-0x535+0xe*0x1d3+-0x1455&&(this['_isHoverin'+'g']=!(0xc80+0x25ec+0x1*-0x326b),this['_isPressed']=!(0xcb5+0x14ea+-0x219e),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectleav'+'e',_0x3836a6);}['_onClick'](_0x50e6ef){this['_fireIfAct'+'ive']('click',_0x50e6ef);}['_fireIfAct'+'ive'](_0x3b0fee,_0x4805ff){this['data']['active']&&this['fire'](_0x3b0fee,_0x4805ff);}['_updateVis'+'ualState'](_0x5ef1d9){const _0x533616=this['_visualSta'+'te'],_0x3c4c09=this['_determine'+'VisualStat'+'e']();if((_0x533616!==_0x3c4c09||_0x5ef1d9)&&this['enabled'])switch(this['_visualSta'+'te']=_0x3c4c09,_0x533616===ft['HOVER']&&this['_fireIfAct'+'ive']('hoverend'),_0x533616===ft['PRESSED']&&this['_fireIfAct'+'ive']('pressedend'),_0x3c4c09===ft['HOVER']&&this['_fireIfAct'+'ive']('hoverstart'),_0x3c4c09===ft['PRESSED']&&this['_fireIfAct'+'ive']('pressedsta'+'rt'),this['transition'+'Mode']){case Au:{const _0x176f7f=kl[this['_visualSta'+'te']],_0xd5719=this[_0x176f7f];this['_applyTint'](_0xd5719);break;}case Ng:{const _0x30cb12=Ul[this['_visualSta'+'te']],_0x4b7a33=Bl[this['_visualSta'+'te']],_0x66a5fe=this[_0x30cb12],_0x5f46cc=this[_0x4b7a33];this['_applySpri'+'te'](_0x66a5fe,_0x5f46cc);break;}}}['_forceReap'+'plyVisualS'+'tate'](){this['_updateVis'+'ualState'](!(0x1d27+0x1173+-0x952*0x5));}['_resetToDe'+'faultVisua'+'lState'](_0x3639d7){var _0x1dcc10;if((_0x1dcc10=this['_imageEnti'+'ty'])!=null&&_0x1dcc10['element'])switch(_0x3639d7){case Au:this['_cancelTwe'+'en'](),this['_applyTint'+'Immediatel'+'y'](this['_defaultTi'+'nt']);break;case Ng:this['_applySpri'+'te'](this['_defaultSp'+'riteAsset'],this['_defaultSp'+'riteFrame']);break;}}['_determine'+'VisualStat'+'e'](){if(this['active']){if(this['_isPressed'])return ft['PRESSED'];if(this['_isHoverin'+'g'])return ft['HOVER'];}else return ft['INACTIVE'];return ft['DEFAULT'];}['_applySpri'+'te'](_0x563cfe,_0x3414ca){var _0x5d55a7;const _0x4b34bb=(_0x5d55a7=this['_imageEnti'+'ty'])==null?void(0x24ad+-0x1343+-0x5ce*0x3):_0x5d55a7['element'];_0x4b34bb&&(_0x3414ca=_0x3414ca||0xc*-0x167+-0xc11*-0x1+-0x4c3*-0x1,this['_isApplyin'+'gSprite']=!(-0x1*-0x91a+0x1b00+0x2*-0x120d),_0x4b34bb['spriteAsse'+'t']!==_0x563cfe&&(_0x4b34bb['spriteAsse'+'t']=_0x563cfe),_0x4b34bb['spriteFram'+'e']!==_0x3414ca&&(_0x4b34bb['spriteFram'+'e']=_0x3414ca),this['_isApplyin'+'gSprite']=!(0x4a9+0x20d8+-0x190*0x18));}['_applyTint'](_0x4f50eb){this['_cancelTwe'+'en'](),this['fadeDurati'+'on']===-0x1363+0x4bc*0x1+0xea7?this['_applyTint'+'Immediatel'+'y'](_0x4f50eb):this['_applyTint'+'WithTween'](_0x4f50eb);}['_applyTint'+'Immediatel'+'y'](_0x5bc155){var _0xced492;const _0x413dcc=(_0xced492=this['_imageEnti'+'ty'])==null?void(0x1*0x232f+-0x200*-0x2+-0x1*0x272f):_0xced492['element'];if(!_0x5bc155||!_0x413dcc||_0x413dcc['type']===eh)return;const _0x13b796=kg(_0x5bc155);this['_isApplyin'+'gTint']=!(-0x255a+-0x308+0x2862),_0x13b796['equals'](_0x413dcc['color'])||(_0x413dcc['color']=_0x13b796),_0x413dcc['opacity']!==_0x5bc155['a']&&(_0x413dcc['opacity']=_0x5bc155['a']),this['_isApplyin'+'gTint']=!(0x2d9+0x213+-0x4eb);}['_applyTint'+'WithTween'](_0x397130){var _0x386f22;const _0x5210e2=(_0x386f22=this['_imageEnti'+'ty'])==null?void(0xdc6*-0x2+-0x4d7*0x3+0x2a11):_0x386f22['element'];if(!_0x397130||!_0x5210e2||_0x5210e2['type']===eh)return;const _0xe2f96=kg(_0x397130),_0x375230=_0x5210e2['color'],_0x433db5=_0x5210e2['opacity'];_0xe2f96['equals'](_0x375230)&&_0x397130['a']===_0x433db5||(this['_tweenInfo']={'startTime':de(),'from':new ie(_0x375230['r'],_0x375230['g'],_0x375230['b'],_0x433db5),'to':_0x397130['clone'](),'lerpColor':new ie()});}['_updateTin'+'tTween'](){const _0xefd857=de()-this['_tweenInfo']['startTime'];let _0x3e5446=this['fadeDurati'+'on']===-0x1737+-0x1138+-0x1*-0x286f?0xad7+0x58*0x27+-0x1d*0xd6:_0xefd857/this['fadeDurati'+'on'];if(_0x3e5446=Y['clamp'](_0x3e5446,-0x3b*0x88+0x86d*-0x3+0x389f,-0x3f0*0x2+-0x102+-0x19*-0x5b),Math['abs'](_0x3e5446-(-0x599+-0x1d22+0x5ca*0x6))>0x1a8f+0x3ed*0x1+0x1*-0x1e7c+0.00001){const _0x263b37=this['_tweenInfo']['lerpColor'];_0x263b37['lerp'](this['_tweenInfo']['from'],this['_tweenInfo']['to'],_0x3e5446),this['_applyTint'+'Immediatel'+'y'](new ie(_0x263b37['r'],_0x263b37['g'],_0x263b37['b'],_0x263b37['a']));}else this['_applyTint'+'Immediatel'+'y'](this['_tweenInfo']['to']),this['_cancelTwe'+'en']();}['_cancelTwe'+'en'](){delete this['_tweenInfo'];}['onUpdate'](){this['_tweenInfo']&&this['_updateTin'+'tTween']();}['onEnable'](){this['_isHoverin'+'g']=!(0x13b5*0x1+0x1aeb+-0x43d*0xb),this['_hoveringC'+'ounter']=-0x7*0x19d+-0x25*0xec+-0x2d67*-0x1,this['_isPressed']=!(-0x20f7+0x264d+-0x555),this['_toggleHit'+'ElementLis'+'teners']('on'),this['_forceReap'+'plyVisualS'+'tate']();}['onDisable'](){this['_toggleHit'+'ElementLis'+'teners']('off'),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['onRemove'](){this['_imageEnti'+'tyUnsubscr'+'ibe'](),this['_toggleLif'+'ecycleList'+'eners']('off',this['system']),this['onDisable']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x3cf25e,_0x1bb2e7){_0x3cf25e['imageEntit'+'y']&&(this['imageEntit'+'y']=_0x1bb2e7[_0x3cf25e['imageEntit'+'y']['getGuid']()]);}}h(It,'EVENT_MOUS'+'EDOWN','mousedown'),h(It,'EVENT_MOUS'+'EUP','mouseup'),h(It,'EVENT_MOUS'+'EENTER','mouseenter'),h(It,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(It,'EVENT_CLIC'+'K','click'),h(It,'EVENT_TOUC'+'HSTART','touchstart'),h(It,'EVENT_TOUC'+'HEND','touchend'),h(It,'EVENT_TOUC'+'HCANCEL','touchcance'+'l'),h(It,'EVENT_TOUC'+'HLEAVE','touchleave'),h(It,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(It,'EVENT_SELE'+'CTEND','selectend'),h(It,'EVENT_SELE'+'CTENTER','selectente'+'r'),h(It,'EVENT_SELE'+'CTLEAVE','selectleav'+'e'),h(It,'EVENT_HOVE'+'RSTART','hoverstart'),h(It,'EVENT_HOVE'+'REND','hoverend'),h(It,'EVENT_PRES'+'SEDSTART','pressedsta'+'rt'),h(It,'EVENT_PRES'+'SEDEND','pressedend');function kg(_0x62ca5a){return new ie(_0x62ca5a['r'],_0x62ca5a['g'],_0x62ca5a['b']);}class WL{constructor(){this['enabled']=!(0x1*0x1db7+-0x2*-0x72d+-0x1d*0x185),this['active']=!(-0x212*-0x1+-0x34d*0x5+0xe6f*0x1),this['imageEntit'+'y']=null,this['hitPadding']=new re(),this['transition'+'Mode']=Au,this['hoverTint']=new ie(0x490+-0x239*-0x3+-0x17*0x7d+0.75,0x40a*0x1+-0x1f20+0x1b16+0.75,-0x2708+-0x1*-0x1316+-0x9f9*-0x2+0.75),this['pressedTin'+'t']=new ie(0x628*-0x2+-0x1f39+0x2b89+0.5,0x1a*-0xd4+-0x1229*0x1+-0x9*-0x469+0.5,-0x4*0x344+0x21b0+-0x14a0+0.5),this['inactiveTi'+'nt']=new ie(0x2277+0x319+-0x10*0x259+0.25,-0x1*-0x19f7+-0xaac+-0xf4b+0.25,0xfd2+-0x1cf+0xd3*-0x11+0.25),this['fadeDurati'+'on']=-0x1e79+-0x2561+-0x182*-0x2d,this['hoverSprit'+'eAsset']=null,this['hoverSprit'+'eFrame']=0x264f+-0x1159*0x1+-0x1*0x14f6,this['pressedSpr'+'iteAsset']=null,this['pressedSpr'+'iteFrame']=-0xa3d+0xec5+-0x488,this['inactiveSp'+'riteAsset']=null,this['inactiveSp'+'riteFrame']=-0x237d+0x180f+0xb6e;}}const Ug=['enabled','active',{'name':'hitPadding','type':'vec4'},'transition'+'Mode',{'name':'hoverTint','type':'rgba'},{'name':'pressedTin'+'t','type':'rgba'},{'name':'inactiveTi'+'nt','type':'rgba'},'fadeDurati'+'on','hoverSprit'+'eAsset','hoverSprit'+'eFrame','pressedSpr'+'iteAsset','pressedSpr'+'iteFrame','inactiveSp'+'riteAsset','inactiveSp'+'riteFrame'];class $L extends ct{constructor(_0xcb0b62){super(_0xcb0b62),this['id']='button',this['ComponentT'+'ype']=It,this['DataType']=WL,this['schema']=Ug,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x559536,_0x62f1af,_0x1948f5){_0x559536['imageEntit'+'y']=_0x62f1af['imageEntit'+'y'],super['initialize'+'ComponentD'+'ata'](_0x559536,_0x62f1af,Ug);}['onUpdate'](_0x37738b){const _0x49f4c4=this['store'];for(const _0xe3ce55 in _0x49f4c4){const _0x219faa=_0x49f4c4[_0xe3ce55]['entity'],_0x2ecfa5=_0x219faa['button'];_0x2ecfa5['enabled']&&_0x219faa['enabled']&&_0x2ecfa5['onUpdate']();}}['_onRemoveC'+'omponent'](_0x7f6ebd,_0x54eb41){_0x54eb41['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}const Bg=new D(),zg=new le();class rn extends we{constructor(_0x19d931,_0x4258ac){super(_0x19d931,_0x4258ac),h(this,'_compoundP'+'arent',null),h(this,'_hasOffset',!(-0x1139+-0x14*-0x97+0x56e)),(this['entity']['on']('insert',this['_onInsert'],this),this['on']('set_type',this['onSetType'],this),this['on']('set_convex'+'Hull',this['onSetModel'],this),this['on']('set_halfEx'+'tents',this['onSetHalfE'+'xtents'],this),this['on']('set_linear'+'Offset',this['onSetOffse'+'t'],this),this['on']('set_angula'+'rOffset',this['onSetOffse'+'t'],this),this['on']('set_radius',this['onSetRadiu'+'s'],this),this['on']('set_height',this['onSetHeigh'+'t'],this),this['on']('set_axis',this['onSetAxis'],this),this['on']('set_asset',this['onSetAsset'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_model',this['onSetModel'],this),this['on']('set_render',this['onSetRende'+'r'],this));}get['data'](){const _0x24419f=this['system']['store'][this['entity']['getGuid']()];return _0x24419f?_0x24419f['data']:null;}set['enabled'](_0xf3b50c){this['_setValue']('enabled',_0xf3b50c);}get['enabled'](){return this['data']['enabled'];}set['type'](_0x3acf90){this['_setValue']('type',_0x3acf90);}get['type'](){return this['data']['type'];}set['halfExtent'+'s'](_0xb2117e){this['_setValue']('halfExtent'+'s',_0xb2117e);}get['halfExtent'+'s'](){return this['data']['halfExtent'+'s'];}set['linearOffs'+'et'](_0x33f5ad){this['_setValue']('linearOffs'+'et',_0x33f5ad);}get['linearOffs'+'et'](){return this['data']['linearOffs'+'et'];}set['angularOff'+'set'](_0x51236f){this['_setValue']('angularOff'+'set',_0x51236f);}get['angularOff'+'set'](){return this['data']['angularOff'+'set'];}set['radius'](_0x30b35d){this['_setValue']('radius',_0x30b35d);}get['radius'](){return this['data']['radius'];}set['axis'](_0x34ac12){this['_setValue']('axis',_0x34ac12);}get['axis'](){return this['data']['axis'];}set['height'](_0x1a623d){this['_setValue']('height',_0x1a623d);}get['height'](){return this['data']['height'];}set['asset'](_0x3a714c){this['_setValue']('asset',_0x3a714c);}get['asset'](){return this['data']['asset'];}set['renderAsse'+'t'](_0x2f3562){this['_setValue']('renderAsse'+'t',_0x2f3562);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['convexHull'](_0xd017fe){this['_setValue']('convexHull',_0xd017fe);}get['convexHull'](){return this['data']['convexHull'];}set['shape'](_0xe21e17){this['_setValue']('shape',_0xe21e17);}get['shape'](){return this['data']['shape'];}set['model'](_0x93f453){this['_setValue']('model',_0x93f453);}get['model'](){return this['data']['model'];}set['render'](_0x1e9e43){this['_setValue']('render',_0x1e9e43);}get['render'](){return this['data']['render'];}set['checkVerte'+'xDuplicate'+'s'](_0x2bc301){this['_setValue']('checkVerte'+'xDuplicate'+'s',_0x2bc301);}get['checkVerte'+'xDuplicate'+'s'](){return this['data']['checkVerte'+'xDuplicate'+'s'];}['_setValue'](_0xae8b8d,_0x5c9eb8){const _0x58eca9=this['data'],_0x544c8d=_0x58eca9[_0xae8b8d];_0x58eca9[_0xae8b8d]=_0x5c9eb8,this['fire']('set',_0xae8b8d,_0x544c8d,_0x5c9eb8);}['onSetType'](_0x282238,_0xaa5047,_0x283901){_0xaa5047!==_0x283901&&this['system']['changeType'](this,_0xaa5047,_0x283901);}['onSetHalfE'+'xtents'](_0x23a4eb,_0x44d56a,_0x1603e3){const _0x40047a=this['data']['type'];this['data']['initialize'+'d']&&_0x40047a==='box'&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetOffse'+'t'](_0x5cc0c8,_0x2fc6cf,_0x7ed681){this['_hasOffset']=!this['data']['linearOffs'+'et']['equals'](D['ZERO'])||!this['data']['angularOff'+'set']['equals'](le['IDENTITY']),this['data']['initialize'+'d']&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetRadiu'+'s'](_0x588aed,_0x360d4d,_0x3d8df7){const _0x468079=this['data']['type'];this['data']['initialize'+'d']&&(_0x468079==='sphere'||_0x468079==='capsule'||_0x468079==='cylinder'||_0x468079==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetHeigh'+'t'](_0x5a0147,_0x3b0750,_0x1d9c82){const _0x57f7f8=this['data']['type'];this['data']['initialize'+'d']&&(_0x57f7f8==='capsule'||_0x57f7f8==='cylinder'||_0x57f7f8==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAxis'](_0x65dedd,_0x312a9d,_0x3cc901){const _0x159f38=this['data']['type'];this['data']['initialize'+'d']&&(_0x159f38==='capsule'||_0x159f38==='cylinder'||_0x159f38==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAsset'](_0x505cf4,_0x38abec,_0x19407b){const _0x4907d2=this['system']['app']['assets'];if(_0x38abec){const _0x2619f2=_0x4907d2['get'](_0x38abec);_0x2619f2&&_0x2619f2['off']('remove',this['onAssetRem'+'oved'],this);}if(_0x19407b){_0x19407b instanceof pe&&(this['data']['asset']=_0x19407b['id']);const _0x4cf1e2=_0x4907d2['get'](this['data']['asset']);_0x4cf1e2&&(_0x4cf1e2['off']('remove',this['onAssetRem'+'oved'],this),_0x4cf1e2['on']('remove',this['onAssetRem'+'oved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x19407b||(this['data']['model']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetRende'+'rAsset'](_0x3147b4,_0xdd0bb7,_0x157061){const _0x1e86fc=this['system']['app']['assets'];if(_0xdd0bb7){const _0x2376d4=_0x1e86fc['get'](_0xdd0bb7);_0x2376d4&&_0x2376d4['off']('remove',this['onRenderAs'+'setRemoved'],this);}if(_0x157061){_0x157061 instanceof pe&&(this['data']['renderAsse'+'t']=_0x157061['id']);const _0x19f97d=_0x1e86fc['get'](this['data']['renderAsse'+'t']);_0x19f97d&&(_0x19f97d['off']('remove',this['onRenderAs'+'setRemoved'],this),_0x19f97d['on']('remove',this['onRenderAs'+'setRemoved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x157061||(this['data']['render']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetModel'](_0x17701c,_0x490cce,_0x1545e6){this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&this['system']['implementa'+'tions']['mesh']['doRecreate'+'PhysicalSh'+'ape'](this);}['onSetRende'+'r'](_0x536522,_0x814c12,_0x2d040f){this['onSetModel'](_0x536522,_0x814c12,_0x2d040f);}['onAssetRem'+'oved'](_0x39c2ea){_0x39c2ea['off']('remove',this['onAssetRem'+'oved'],this),this['data']['asset']===_0x39c2ea['id']&&(this['asset']=null);}['onRenderAs'+'setRemoved'](_0x470ff5){_0x470ff5['off']('remove',this['onRenderAs'+'setRemoved'],this),this['data']['renderAsse'+'t']===_0x470ff5['id']&&(this['renderAsse'+'t']=null);}['getCompoun'+'dChildShap'+'eIndex'](_0x1ac1f2){const _0x5ee2c8=this['data']['shape'],_0x5af351=_0x5ee2c8['getNumChil'+'dShapes']();for(let _0xa8475a=-0x1bf8+0x1*0xe71+-0xd87*-0x1;_0xa8475a<_0x5af351;_0xa8475a++){const _0x586eba=_0x5ee2c8['getChildSh'+'ape'](_0xa8475a);if(Ammo['getPointer'](_0x586eba)===Ammo['getPointer'](_0x1ac1f2))return _0xa8475a;}return null;}['_onInsert'](_0x11fcb3){if(!(typeof Ammo>'u')){if(this['_compoundP'+'arent'])this['system']['recreatePh'+'ysicalShap'+'es'](this);else{if(!this['entity']['rigidbody']){let _0x3fdd4c=this['entity']['parent'];for(;_0x3fdd4c;){if(_0x3fdd4c['collision']&&_0x3fdd4c['collision']['type']==='compound'){_0x3fdd4c['collision']['shape']['getNumChil'+'dShapes']()===0xbb*-0x1d+-0x4b6*0x1+0x19e5?this['system']['recreatePh'+'ysicalShap'+'es'](_0x3fdd4c['collision']):this['system']['recreatePh'+'ysicalShap'+'es'](this);break;}_0x3fdd4c=_0x3fdd4c['parent'];}}}}}['_updateCom'+'pound'](){const _0x409c7f=this['entity'];if(_0x409c7f['_dirtyWorl'+'d']){let _0x494b60=_0x409c7f['_dirtyLoca'+'l'],_0x39e35d=_0x409c7f;for(;_0x39e35d&&!_0x494b60&&!(_0x39e35d['collision']&&_0x39e35d['collision']===this['_compoundP'+'arent']);)_0x39e35d['_dirtyLoca'+'l']&&(_0x494b60=!(0x177e+-0x2076+-0x52*-0x1c)),_0x39e35d=_0x39e35d['parent'];if(_0x494b60){_0x409c7f['forEach'](this['system']['implementa'+'tions']['compound']['_updateEac'+'hDescendan'+'tTransform'],_0x409c7f);const _0x380fcc=this['_compoundP'+'arent']['entity']['rigidbody'];_0x380fcc&&_0x380fcc['activate']();}}}['getShapePo'+'sition'](){const _0x502094=this['entity']['getPositio'+'n']();if(this['_hasOffset']){const _0x127e0c=this['entity']['getRotatio'+'n'](),_0x4d41a6=this['data']['linearOffs'+'et'];return zg['copy'](_0x127e0c)['transformV'+'ector'](_0x4d41a6,Bg),Bg['add'](_0x502094);}return _0x502094;}['getShapeRo'+'tation'](){const _0x2d8cec=this['entity']['getRotatio'+'n']();return this['_hasOffset']?zg['copy'](_0x2d8cec)['mul'](this['data']['angularOff'+'set']):_0x2d8cec;}['onEnable'](){if(this['data']['type']==='mesh'&&(this['data']['asset']||this['data']['renderAsse'+'t'])&&this['data']['initialize'+'d']){const _0x39f0fe=this['system']['app']['assets']['get'](this['data']['asset']||this['data']['renderAsse'+'t']);if(_0x39f0fe&&(!_0x39f0fe['resource']||!this['data']['shape'])){this['system']['recreatePh'+'ysicalShap'+'es'](this);return;}}if(this['entity']['rigidbody'])this['entity']['rigidbody']['enabled']&&this['entity']['rigidbody']['enableSimu'+'lation']();else{if(this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']){if(this['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===0x1157+-0x2328+0x11d1)this['system']['recreatePh'+'ysicalShap'+'es'](this['_compoundP'+'arent']);else{const _0x6d20c8=this['system']['_getNodeTr'+'ansform'](this['entity'],this['_compoundP'+'arent']['entity']);this['_compoundP'+'arent']['shape']['addChildSh'+'ape'](_0x6d20c8,this['data']['shape']),Ammo['destroy'](_0x6d20c8),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']();}}else this['entity']['trigger']&&this['entity']['trigger']['enable']();}}['onDisable'](){this['entity']['rigidbody']?this['entity']['rigidbody']['disableSim'+'ulation']():this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']?this['_compoundP'+'arent']['entity']['_destroyin'+'g']||(this['system']['_removeCom'+'poundChild'](this['_compoundP'+'arent'],this['data']['shape']),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']()):this['entity']['trigger']&&this['entity']['trigger']['disable']();}['onBeforeRe'+'move'](){this['asset']&&(this['asset']=null),this['renderAsse'+'t']&&(this['renderAsse'+'t']=null),this['entity']['off']('insert',this['_onInsert'],this),this['off']();}}h(rn,'EVENT_CONT'+'ACT','contact'),h(rn,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(rn,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(rn,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(rn,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve');class XL{constructor(){this['enabled']=!(-0x374+0x15*-0x21+0x629),this['type']='box',this['halfExtent'+'s']=new D(-0x12e6+0xc*-0x2ae+0x330e+0.5,-0xe5*-0x8+-0x266e+0x1f46+0.5,-0x8*-0x275+-0x1*-0xf32+-0x22da+0.5),this['linearOffs'+'et']=new D(),this['angularOff'+'set']=new le(),this['radius']=0x2*0x20e+0xbe6*0x3+-0x27ce+0.5,this['axis']=-0x1c8a+-0x1f75+0x5*0xc00,this['height']=0x2705+0x73c*0x3+-0x3cb7,this['convexHull']=!(-0x1418+-0x20c9+0x34e2),this['asset']=null,this['renderAsse'+'t']=null,this['checkVerte'+'xDuplicate'+'s']=!(-0x236d+0x1e*-0x37+0x1b*0x18d),this['shape']=null,this['model']=null,this['render']=null,this['initialize'+'d']=!(0x54b+0xba4+-0x10ee);}}const yo='static',ks='dynamic',Ha='kinematic',qL=0xc6b+-0x1*0x6b5+0x1*-0x5b4,Po=-0x1*0x1da5+0x45c+-0x3*-0x86f,Pu=-0x7*-0x3ad+-0x1*0x2567+0xbad,Vg=0xf67*0x1+0x75b*0x3+0xcc*-0x2f,Yv=-0x20b2+-0xd5f+0x2*0x170b,jL=0x87f+0x4d+-0x8cb,Gg=0x1beb+-0x2300+-0xa5*-0xb,YL=-0x1*0xd87+-0x1eec+0x2c77,Hg=-0x1c07+-0x1c67+-0xe*-0x409,Wg=0x181eb+-0xdf1b*-0x2+-0x24022,Mu=-0x2be5*0x1+-0x59*0x20a+-0x7a4*-0x3f;let Us,zr,Wa;class Kv{constructor(_0x41c11e,_0x974e4a,_0x173904){this['entity']=_0x974e4a['entity'],this['component']=_0x974e4a,this['app']=_0x41c11e,typeof Ammo<'u'&&!Us&&(Us=new Ammo['btVector3'](),zr=new Ammo['btQuaterni'+'on'](),Wa=new Ammo['btTransfor'+'m']()),this['initialize'](_0x173904);}['initialize'](_0x3c9626){const _0x5b3e4c=this['entity'],_0x41ccc8=_0x3c9626['shape'];if(_0x41ccc8&&typeof Ammo<'u'){_0x5b3e4c['trigger']&&_0x5b3e4c['trigger']['destroy']();const _0x295861=-0x1734+0x2*0x1207+-0xcd9,_0x1a00a9=this['component'];if(_0x1a00a9){const _0x248089=_0x1a00a9['getShapePo'+'sition'](),_0x23a8e1=_0x1a00a9['getShapeRo'+'tation']();Us['setValue'](_0x248089['x'],_0x248089['y'],_0x248089['z']),zr['setValue'](_0x23a8e1['x'],_0x23a8e1['y'],_0x23a8e1['z'],_0x23a8e1['w']);}else{const _0x24b495=_0x5b3e4c['getPositio'+'n'](),_0x3518d7=_0x5b3e4c['getRotatio'+'n']();Us['setValue'](_0x24b495['x'],_0x24b495['y'],_0x24b495['z']),zr['setValue'](_0x3518d7['x'],_0x3518d7['y'],_0x3518d7['z'],_0x3518d7['w']);}Wa['setOrigin'](Us),Wa['setRotatio'+'n'](zr);const _0x5afc10=this['app']['systems']['rigidbody']['createBody'](_0x295861,_0x41ccc8,Wa);_0x5afc10['setRestitu'+'tion'](-0xa25*-0x1+0xbbb+0xe*-0x190),_0x5afc10['setFrictio'+'n'](0x13f3*0x1+0x10d*-0x25+0x12ee),_0x5afc10['setDamping'](0xd8+0xeae+0x2*-0x7c3,0x1b*0xb9+-0x174+-0xc9*0x17),Us['setValue'](0x662+0xb93+-0x11f5,-0xf3+0x266a+-0x2577,0x4dd+-0x447+0x1e*-0x5),_0x5afc10['setLinearF'+'actor'](Us),_0x5afc10['setAngular'+'Factor'](Us),_0x5afc10['setCollisi'+'onFlags'](_0x5afc10['getCollisi'+'onFlags']()|Po),_0x5afc10['entity']=_0x5b3e4c,this['body']=_0x5afc10,this['component']['enabled']&&_0x5b3e4c['enabled']&&this['enable']();}}['destroy'](){this['body']&&(this['disable'](),this['app']['systems']['rigidbody']['destroyBod'+'y'](this['body']),this['body']=null);}['_getEntity'+'Transform'](_0xc47822){const _0x48533c=this['component'];if(_0x48533c){const _0x599bbc=_0x48533c['getShapePo'+'sition'](),_0x3fa2a0=_0x48533c['getShapeRo'+'tation']();Us['setValue'](_0x599bbc['x'],_0x599bbc['y'],_0x599bbc['z']),zr['setValue'](_0x3fa2a0['x'],_0x3fa2a0['y'],_0x3fa2a0['z'],_0x3fa2a0['w']);}else{const _0x403267=this['entity']['getPositio'+'n'](),_0x2097e0=this['entity']['getRotatio'+'n']();Us['setValue'](_0x403267['x'],_0x403267['y'],_0x403267['z']),zr['setValue'](_0x2097e0['x'],_0x2097e0['y'],_0x2097e0['z'],_0x2097e0['w']);}_0xc47822['setOrigin'](Us),_0xc47822['setRotatio'+'n'](zr);}['updateTran'+'sform'](){this['_getEntity'+'Transform'](Wa);const _0x437bf3=this['body'];_0x437bf3['setWorldTr'+'ansform'](Wa),_0x437bf3['activate']();}['enable'](){const _0x4a34fa=this['body'];if(!_0x4a34fa)return;const _0x2beb35=this['app']['systems']['rigidbody'];_0x2beb35['_triggers']['indexOf'](this)<0x246a+-0x21d*-0x12+0x772*-0xa&&(_0x2beb35['addBody'](_0x4a34fa,Hg,Mu^Hg),_0x2beb35['_triggers']['push'](this)),_0x4a34fa['forceActiv'+'ationState'](Pu),this['updateTran'+'sform']();}['disable'](){const _0x1884e3=this['body'];if(!_0x1884e3)return;const _0x64a768=this['app']['systems']['rigidbody'],_0x1c6abe=_0x64a768['_triggers']['indexOf'](this);_0x1c6abe>-(-0x1b2c+-0xe*-0x1ea+0x1*0x61)&&(_0x64a768['removeBody'](_0x1884e3),_0x64a768['_triggers']['splice'](_0x1c6abe,-0x1bad+0xe5e+0xd50)),_0x1884e3['forceActiv'+'ationState'](Yv);}}const wc=new te(),KL=new D(),ZL=new D(),Vr=new le(),$g=new Ie(),QL=['enabled','type','halfExtent'+'s','linearOffs'+'et','angularOff'+'set','radius','axis','height','convexHull','asset','renderAsse'+'t','shape','model','render','checkVerte'+'xDuplicate'+'s'];class Ca{constructor(_0x3cd026){this['system']=_0x3cd026;}['beforeInit'+'ialize'](_0x5da3e4,_0x2cb6a9){_0x2cb6a9['shape']=null,_0x2cb6a9['model']=new sr(),_0x2cb6a9['model']['graph']=new Ie();}['afterIniti'+'alize'](_0x5efa98,_0xbd3772){this['recreatePh'+'ysicalShap'+'es'](_0x5efa98),_0x5efa98['data']['initialize'+'d']=!(-0x34b+-0x2435+0x2780);}['reset'](_0x5c95d0,_0x466139){this['beforeInit'+'ialize'](_0x5c95d0,_0x466139),this['afterIniti'+'alize'](_0x5c95d0,_0x466139);}['recreatePh'+'ysicalShap'+'es'](_0x18efef){const _0xd44169=_0x18efef['entity'],_0x27968d=_0x18efef['data'];if(typeof Ammo<'u'){_0xd44169['trigger']&&(_0xd44169['trigger']['destroy'](),delete _0xd44169['trigger']),_0x27968d['shape']&&(_0x18efef['_compoundP'+'arent']&&(_0x18efef!==_0x18efef['_compoundP'+'arent']&&this['system']['_removeCom'+'poundChild'](_0x18efef['_compoundP'+'arent'],_0x27968d['shape']),_0x18efef['_compoundP'+'arent']['entity']['rigidbody']&&_0x18efef['_compoundP'+'arent']['entity']['rigidbody']['activate']()),this['destroySha'+'pe'](_0x27968d)),_0x27968d['shape']=this['createPhys'+'icalShape'](_0x18efef['entity'],_0x27968d);const _0x269315=!_0x18efef['_compoundP'+'arent'];if(_0x27968d['type']==='compound'&&(!_0x18efef['_compoundP'+'arent']||_0x18efef===_0x18efef['_compoundP'+'arent']))_0x18efef['_compoundP'+'arent']=_0x18efef,_0xd44169['forEach'](this['_addEachDe'+'scendant'],_0x18efef);else{if(_0x27968d['type']!=='compound'&&!_0x18efef['rigidbody']){_0x18efef['_compoundP'+'arent']=null;let _0x196289=_0xd44169['parent'];for(;_0x196289;){if(_0x196289['collision']&&_0x196289['collision']['type']==='compound'){_0x18efef['_compoundP'+'arent']=_0x196289['collision'];break;}_0x196289=_0x196289['parent'];}}}_0x18efef['_compoundP'+'arent']&&_0x18efef!==_0x18efef['_compoundP'+'arent']&&(_0x269315&&_0x18efef['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===-0x2475+-0x1859+-0x1e67*-0x2?this['system']['recreatePh'+'ysicalShap'+'es'](_0x18efef['_compoundP'+'arent']):(this['system']['updateComp'+'oundChildT'+'ransform'](_0xd44169,!(-0x15cb+0x162d+-0xe*0x7)),_0x18efef['_compoundP'+'arent']['entity']['rigidbody']&&_0x18efef['_compoundP'+'arent']['entity']['rigidbody']['activate']())),_0xd44169['rigidbody']?(_0xd44169['rigidbody']['disableSim'+'ulation'](),_0xd44169['rigidbody']['createBody'](),_0xd44169['enabled']&&_0xd44169['rigidbody']['enabled']&&_0xd44169['rigidbody']['enableSimu'+'lation']()):_0x18efef['_compoundP'+'arent']||(_0xd44169['trigger']?_0xd44169['trigger']['initialize'](_0x27968d):_0xd44169['trigger']=new Kv(this['system']['app'],_0x18efef,_0x27968d));}}['createPhys'+'icalShape'](_0x2080f6,_0x1a0b29){}['updateTran'+'sform'](_0x628ede,_0xce7fb0,_0x5d053b,_0xc9e841){_0x628ede['entity']['trigger']&&_0x628ede['entity']['trigger']['updateTran'+'sform']();}['destroySha'+'pe'](_0x1b14ec){_0x1b14ec['shape']&&(Ammo['destroy'](_0x1b14ec['shape']),_0x1b14ec['shape']=null);}['beforeRemo'+'ve'](_0x408c39,_0x5d5a97){_0x5d5a97['data']['shape']&&(_0x5d5a97['_compoundP'+'arent']&&!_0x5d5a97['_compoundP'+'arent']['entity']['_destroyin'+'g']&&(this['system']['_removeCom'+'poundChild'](_0x5d5a97['_compoundP'+'arent'],_0x5d5a97['data']['shape']),_0x5d5a97['_compoundP'+'arent']['entity']['rigidbody']&&_0x5d5a97['_compoundP'+'arent']['entity']['rigidbody']['activate']()),_0x5d5a97['_compoundP'+'arent']=null,this['destroySha'+'pe'](_0x5d5a97['data']));}['remove'](_0x5e41e8,_0x1ad0d4){_0x5e41e8['rigidbody']&&_0x5e41e8['rigidbody']['body']&&_0x5e41e8['rigidbody']['disableSim'+'ulation'](),_0x5e41e8['trigger']&&(_0x5e41e8['trigger']['destroy'](),delete _0x5e41e8['trigger']);}['clone'](_0x4158b7,_0x5ae5fa){const _0x3de41d=this['system']['store'][_0x4158b7['getGuid']()],_0x29db83={'enabled':_0x3de41d['data']['enabled'],'type':_0x3de41d['data']['type'],'halfExtents':[_0x3de41d['data']['halfExtent'+'s']['x'],_0x3de41d['data']['halfExtent'+'s']['y'],_0x3de41d['data']['halfExtent'+'s']['z']],'linearOffset':[_0x3de41d['data']['linearOffs'+'et']['x'],_0x3de41d['data']['linearOffs'+'et']['y'],_0x3de41d['data']['linearOffs'+'et']['z']],'angularOffset':[_0x3de41d['data']['angularOff'+'set']['x'],_0x3de41d['data']['angularOff'+'set']['y'],_0x3de41d['data']['angularOff'+'set']['z'],_0x3de41d['data']['angularOff'+'set']['w']],'radius':_0x3de41d['data']['radius'],'axis':_0x3de41d['data']['axis'],'height':_0x3de41d['data']['height'],'convexHull':_0x3de41d['data']['convexHull'],'asset':_0x3de41d['data']['asset'],'renderAsset':_0x3de41d['data']['renderAsse'+'t'],'model':_0x3de41d['data']['model'],'render':_0x3de41d['data']['render'],'checkVertexDuplicates':_0x3de41d['data']['checkVerte'+'xDuplicate'+'s']};return this['system']['addCompone'+'nt'](_0x5ae5fa,_0x29db83);}}class JL extends Ca{['createPhys'+'icalShape'](_0x495d50,_0x3ebd20){if(typeof Ammo<'u'){const _0x56985c=_0x3ebd20['halfExtent'+'s'],_0x1020dc=new Ammo['btVector3'](_0x56985c?_0x56985c['x']:-0x13e+0x1195+-0x1057+0.5,_0x56985c?_0x56985c['y']:-0x215a*-0x1+-0x63*0x22+0x6bc*-0x3+0.5,_0x56985c?_0x56985c['z']:-0x13ea+-0xdb6+0x21a0+0.5),_0x532857=new Ammo['btBoxShape'](_0x1020dc);return Ammo['destroy'](_0x1020dc),_0x532857;}}}class eR extends Ca{['createPhys'+'icalShape'](_0x63915c,_0x3ed0ef){if(typeof Ammo<'u')return new Ammo['btSphereSh'+'ape'](_0x3ed0ef['radius']);}}class tR extends Ca{['createPhys'+'icalShape'](_0x4ce676,_0x5ada95){const _0x3f98ee=_0x5ada95['axis']??-0x1429+0x8bf*-0x2+-0x2*-0x12d4,_0x1bba94=_0x5ada95['radius']??0xf4c*-0x1+0x24d5+-0x1589+0.5,_0x44e956=Math['max']((_0x5ada95['height']??0x1d3a+0x1235+-0x545*0x9)-(-0x20c6+0x285*-0x9+0x3775*0x1)*_0x1bba94,0x950*-0x1+-0xb9*-0x13+0x46b*-0x1);let _0x531a1b=null;if(typeof Ammo<'u')switch(_0x3f98ee){case 0x18c0+-0x1*0x722+-0x119e:_0x531a1b=new Ammo['btCapsuleS'+'hapeX'](_0x1bba94,_0x44e956);break;case-0x661*-0x1+-0x1c+-0x644:_0x531a1b=new Ammo['btCapsuleS'+'hape'](_0x1bba94,_0x44e956);break;case 0xa*-0x358+-0x2574+0x46e6:_0x531a1b=new Ammo['btCapsuleS'+'hapeZ'](_0x1bba94,_0x44e956);break;}return _0x531a1b;}}class sR extends Ca{['createPhys'+'icalShape'](_0x34c842,_0x4867d7){const _0xc7bd7f=_0x4867d7['axis']??0x8*-0x24c+0x72*-0x1e+0x19*0x145,_0x1afd60=_0x4867d7['radius']??-0x379+-0x6cd+0xa*0x107+0.5,_0x53d07a=_0x4867d7['height']??0x1286+-0xa61+0x4*-0x209;let _0x536e81=null,_0x407d09=null;if(typeof Ammo<'u')switch(_0xc7bd7f){case-0x105b+-0x7e8+0x1843:_0x536e81=new Ammo['btVector3'](_0x53d07a*(-0x14b+-0x1*0x14bf+-0x2*-0xb05+0.5),_0x1afd60,_0x1afd60),_0x407d09=new Ammo['btCylinder'+'ShapeX'](_0x536e81);break;case 0x1f0c*-0x1+0x1d14+0x65*0x5:_0x536e81=new Ammo['btVector3'](_0x1afd60,_0x53d07a*(-0x21af*0x1+-0x4e*-0x53+0x865+0.5),_0x1afd60),_0x407d09=new Ammo['btCylinder'+'Shape'](_0x536e81);break;case 0x1b*-0x9f+0x14a9*0x1+-0x3e2:_0x536e81=new Ammo['btVector3'](_0x1afd60,_0x1afd60,_0x53d07a*(0x3be*0x9+-0x57+0x2157*-0x1+0.5)),_0x407d09=new Ammo['btCylinder'+'ShapeZ'](_0x536e81);break;}return _0x536e81&&Ammo['destroy'](_0x536e81),_0x407d09;}}class iR extends Ca{['createPhys'+'icalShape'](_0x1f9fb2,_0x1ab70e){const _0x29dcb4=_0x1ab70e['axis']??-0x35d+0x553+0x3*-0xa7,_0x38c22c=_0x1ab70e['radius']??0x1cef*0x1+0x1*0xf09+-0x2a*0x10c+0.5,_0x4eade0=_0x1ab70e['height']??-0x8fa*-0x1+-0xc32+-0x5*-0xa5;let _0x141316=null;if(typeof Ammo<'u')switch(_0x29dcb4){case-0x1*0x59d+0xb51*-0x2+0x1c3f:_0x141316=new Ammo['btConeShap'+'eX'](_0x38c22c,_0x4eade0);break;case 0x117b+0x105b+-0x3*0xb47:_0x141316=new Ammo['btConeShap'+'e'](_0x38c22c,_0x4eade0);break;case-0x16ee+-0x550+0x1c40:_0x141316=new Ammo['btConeShap'+'eZ'](_0x38c22c,_0x4eade0);break;}return _0x141316;}}class rR extends Ca{['beforeInit'+'ialize'](_0x3e19a7,_0xccd229){}['createAmmo'+'Hull'](_0x46f4d1,_0x320339,_0xc696af,_0x3e9765){const _0x1fd08e=new Ammo['btConvexHu'+'llShape'](),_0xfc0a3e=new Ammo['btVector3'](),_0x1432cd=[];_0x46f4d1['getPositio'+'ns'](_0x1432cd);for(let _0x444092=0x2574+-0x1*0x1bb3+-0x9c1;_0x444092<_0x1432cd['length'];_0x444092+=-0x13fd*0x1+-0x1*0x703+0x1*0x1b03)_0xfc0a3e['setValue'](_0x1432cd[_0x444092]*_0x3e9765['x'],_0x1432cd[_0x444092+(-0x43*-0x59+0xbf6+0x2*-0x11a0)]*_0x3e9765['y'],_0x1432cd[_0x444092+(-0x17*0xc8+-0x25ea+0x37e4)]*_0x3e9765['z']),_0x1fd08e['addPoint'](_0xfc0a3e,!(-0x1*0x59e+0x233+-0x124*-0x3));Ammo['destroy'](_0xfc0a3e),_0x1fd08e['recalcLoca'+'lAabb'](),_0x1fd08e['setMargin'](0x1771+-0x134+0x163d*-0x1+0.01);const _0x4c89a9=this['system']['_getNodeTr'+'ansform'](_0x320339);_0xc696af['addChildSh'+'ape'](_0x4c89a9,_0x1fd08e),Ammo['destroy'](_0x4c89a9);}['createAmmo'+'Mesh'](_0x595b37,_0x195d36,_0x24f5dd,_0x1af668,_0x4ef50c=!(0x3e1*0x7+0x2392*-0x1+-0x86b*-0x1)){const _0x16e6a1=this['system'];let _0x6c31bc;if(_0x16e6a1['_triMeshCa'+'che'][_0x595b37['id']])_0x6c31bc=_0x16e6a1['_triMeshCa'+'che'][_0x595b37['id']];else{const _0x30c634=_0x595b37['vertexBuff'+'er'],_0x949f7d=_0x30c634['getFormat']();let _0x20867e,_0x499da5;for(let _0x3c22dc=0xc85*0x1+-0x2482+-0x3*-0x7ff;_0x3c22dc<_0x949f7d['elements']['length'];_0x3c22dc++){const _0x4f6b25=_0x949f7d['elements'][_0x3c22dc];if(_0x4f6b25['name']===Me){_0x499da5=new Float32Array(_0x30c634['lock'](),_0x4f6b25['offset']),_0x20867e=_0x4f6b25['stride']/(-0x5*0x776+0xaaa+-0x1*-0x1aa8);break;}}const _0x17f57b=[];_0x595b37['getIndices'](_0x17f57b);const _0x26012c=_0x595b37['primitive'][-0x1941+-0x25*0x22+-0x1e2b*-0x1]['count']/(-0x64+0x10e6+-0x107f),_0x378086=new Ammo['btVector3']();let _0x456529,_0x33e076,_0xa37745;const _0x344ab1=_0x595b37['primitive'][0x4*0x576+0x82*0x27+-0x29a6]['base'];_0x6c31bc=new Ammo['btTriangle'+'Mesh'](),_0x16e6a1['_triMeshCa'+'che'][_0x595b37['id']]=_0x6c31bc;const _0x5b379c=new Map();w['assert'](typeof _0x6c31bc['getIndexed'+'MeshArray']=='function','Ammo.js\x20ve'+'rsion\x20is\x20t'+'oo\x20old,\x20pl'+'ease\x20updat'+'e\x20to\x20a\x20new'+'er\x20Ammo.');const _0x3c1e1a=_0x6c31bc['getIndexed'+'MeshArray']();_0x3c1e1a['at'](0x740*-0x1+0x1983+0x37*-0x55)['m_numTrian'+'gles']=_0x26012c;const _0x103ebe=_0x1af668?_0x1af668['x']:-0x53*0x2d+-0x1201+0x2099,_0x4e2b9c=_0x1af668?_0x1af668['y']:-0x683*0x5+-0x23cd+0x445d,_0x109d9c=_0x1af668?_0x1af668['z']:-0x1065+0xff*0xf+0x175,_0x2ba8e5=_0xcbd54d=>{const _0x2ec23d=_0x499da5[_0xcbd54d*_0x20867e]*_0x103ebe,_0x4e53a7=_0x499da5[_0xcbd54d*_0x20867e+(-0x1*-0x23e6+-0x1*-0xc3+-0xc38*0x3)]*_0x4e2b9c,_0x3fb0a7=_0x499da5[_0xcbd54d*_0x20867e+(0x270+-0xf6+-0x178)]*_0x109d9c;let _0x48eb41;if(_0x4ef50c){const _0x47e77e=_0x2ec23d+':'+_0x4e53a7+':'+_0x3fb0a7;if(_0x48eb41=_0x5b379c['get'](_0x47e77e),_0x48eb41!==void(0xd8a+0x7fa+-0x1584))return _0x48eb41;_0x378086['setValue'](_0x2ec23d,_0x4e53a7,_0x3fb0a7),_0x48eb41=_0x6c31bc['findOrAddV'+'ertex'](_0x378086,!(0x1ac2+-0x169a*0x1+0x1*-0x427)),_0x5b379c['set'](_0x47e77e,_0x48eb41);}else _0x378086['setValue'](_0x2ec23d,_0x4e53a7,_0x3fb0a7),_0x48eb41=_0x6c31bc['findOrAddV'+'ertex'](_0x378086,!(0x875+0x1*-0xf75+0x701));return _0x48eb41;};for(let _0x6cd371=-0x21e1+-0xc1c+0x2dfd;_0x6cd371<_0x26012c;_0x6cd371++)_0x456529=_0x2ba8e5(_0x17f57b[_0x344ab1+_0x6cd371*(-0x26b6*-0x1+-0xd*-0x250+-0x44c3)]),_0x33e076=_0x2ba8e5(_0x17f57b[_0x344ab1+_0x6cd371*(0x3a*-0xab+-0xffc*0x2+0x46b9)+(0x34e+0x84*0x4a+-0x2975*0x1)]),_0xa37745=_0x2ba8e5(_0x17f57b[_0x344ab1+_0x6cd371*(-0x970+0x9de*0x1+-0x6b)+(-0x27e+-0x2234+0x24b4)]),_0x6c31bc['addIndex'](_0x456529),_0x6c31bc['addIndex'](_0x33e076),_0x6c31bc['addIndex'](_0xa37745);Ammo['destroy'](_0x378086);}const _0x335a5c=new Ammo['btBvhTrian'+'gleMeshSha'+'pe'](_0x6c31bc,!(-0x266b+-0x18b*0x8+0x73*0x71));if(!_0x1af668){const _0x4698cf=_0x16e6a1['_getNodeSc'+'aling'](_0x195d36);_0x335a5c['setLocalSc'+'aling'](_0x4698cf),Ammo['destroy'](_0x4698cf);}const _0x50d5b3=_0x16e6a1['_getNodeTr'+'ansform'](_0x195d36);_0x24f5dd['addChildSh'+'ape'](_0x50d5b3,_0x335a5c),Ammo['destroy'](_0x50d5b3);}['createPhys'+'icalShape'](_0xe8763f,_0x57843e){if(!(typeof Ammo>'u')&&(_0x57843e['model']||_0x57843e['render'])){const _0xa9281a=new Ammo['btCompound'+'Shape'](),_0x119e87=_0xe8763f['getWorldTr'+'ansform']()['getScale']();if(_0x57843e['render']){const _0x2a3ee6=_0x57843e['render']['meshes'];for(let _0x47fa9c=-0xb3f+-0x559+0x1098;_0x47fa9c<_0x2a3ee6['length'];_0x47fa9c++)_0x57843e['convexHull']?this['createAmmo'+'Hull'](_0x2a3ee6[_0x47fa9c],$g,_0xa9281a,_0x119e87):this['createAmmo'+'Mesh'](_0x2a3ee6[_0x47fa9c],$g,_0xa9281a,_0x119e87,_0x57843e['checkVerte'+'xDuplicate'+'s']);}else{if(_0x57843e['model']){const _0x55f30e=_0x57843e['model']['meshInstan'+'ces'];for(let _0x172c70=-0xe4*0x9+0x1*0xe91+0x1*-0x68d;_0x172c70<_0x55f30e['length'];_0x172c70++)this['createAmmo'+'Mesh'](_0x55f30e[_0x172c70]['mesh'],_0x55f30e[_0x172c70]['node'],_0xa9281a,null,_0x57843e['checkVerte'+'xDuplicate'+'s']);const _0x44ba65=new Ammo['btVector3'](_0x119e87['x'],_0x119e87['y'],_0x119e87['z']);_0xa9281a['setLocalSc'+'aling'](_0x44ba65),Ammo['destroy'](_0x44ba65);}}return _0xa9281a;}}['recreatePh'+'ysicalShap'+'es'](_0x12ef80){const _0x1d26f3=_0x12ef80['data'];if((_0x1d26f3['renderAsse'+'t']||_0x1d26f3['asset'])&&_0x12ef80['enabled']&&_0x12ef80['entity']['enabled']){this['loadAsset'](_0x12ef80,_0x1d26f3['renderAsse'+'t']||_0x1d26f3['asset'],_0x1d26f3['renderAsse'+'t']?'render':'model');return;}this['doRecreate'+'PhysicalSh'+'ape'](_0x12ef80);}['loadAsset'](_0x380c79,_0x117389,_0x52806f){const _0x2077ca=_0x380c79['data'],_0x3c7618=this['system']['app']['assets'],_0x515466=_0x2077ca[_0x52806f],_0x59a550=_0x5c7a05=>{_0x2077ca[_0x52806f]===_0x515466&&(_0x2077ca[_0x52806f]=_0x5c7a05['resource'],this['doRecreate'+'PhysicalSh'+'ape'](_0x380c79));},_0x3a201a=_0x3af07d=>{_0x3af07d['ready'](_0x680877=>{if(_0x680877['data']['containerA'+'sset']){const _0x3e342f=_0x3c7618['get'](_0x680877['data']['containerA'+'sset']);_0x3e342f['loaded']?_0x59a550(_0x680877):(_0x3e342f['ready'](()=>{_0x59a550(_0x680877);}),_0x3c7618['load'](_0x3e342f));}else _0x59a550(_0x680877);}),_0x3c7618['load'](_0x3af07d);},_0x52c028=_0x3c7618['get'](_0x117389);_0x52c028?_0x3a201a(_0x52c028):_0x3c7618['once']('add:'+_0x117389,_0x3a201a);}['doRecreate'+'PhysicalSh'+'ape'](_0x4e7b10){const _0x3d6e6c=_0x4e7b10['entity'],_0x32ff49=_0x4e7b10['data'];_0x32ff49['model']||_0x32ff49['render']?(this['destroySha'+'pe'](_0x32ff49),_0x32ff49['shape']=this['createPhys'+'icalShape'](_0x3d6e6c,_0x32ff49),_0x3d6e6c['rigidbody']?(_0x3d6e6c['rigidbody']['disableSim'+'ulation'](),_0x3d6e6c['rigidbody']['createBody'](),_0x3d6e6c['enabled']&&_0x3d6e6c['rigidbody']['enabled']&&_0x3d6e6c['rigidbody']['enableSimu'+'lation']()):_0x3d6e6c['trigger']?_0x3d6e6c['trigger']['initialize'](_0x32ff49):_0x3d6e6c['trigger']=new Kv(this['system']['app'],_0x4e7b10,_0x32ff49)):(this['beforeRemo'+'ve'](_0x3d6e6c,_0x4e7b10),this['remove'](_0x3d6e6c,_0x32ff49));}['updateTran'+'sform'](_0x369626,_0x1b7fdb,_0x119042,_0x33d8f5){if(_0x369626['shape']){const _0x4f664f=_0x369626['entity']['getWorldTr'+'ansform']()['getScale'](),_0x10199f=_0x369626['shape']['getLocalSc'+'aling']();(_0x4f664f['x']!==_0x10199f['x']()||_0x4f664f['y']!==_0x10199f['y']()||_0x4f664f['z']!==_0x10199f['z']())&&this['doRecreate'+'PhysicalSh'+'ape'](_0x369626);}super['updateTran'+'sform'](_0x369626,_0x1b7fdb,_0x119042,_0x33d8f5);}['destroySha'+'pe'](_0x2a09a0){if(!_0x2a09a0['shape'])return;const _0x21258f=_0x2a09a0['shape']['getNumChil'+'dShapes']();for(let _0x27d2d2=0x616+0x100a+0x4*-0x588;_0x27d2d2<_0x21258f;_0x27d2d2++){const _0x33e4a8=_0x2a09a0['shape']['getChildSh'+'ape'](_0x27d2d2);Ammo['destroy'](_0x33e4a8);}Ammo['destroy'](_0x2a09a0['shape']),_0x2a09a0['shape']=null;}}class aR extends Ca{['createPhys'+'icalShape'](_0x2f170c,_0x1823c7){if(typeof Ammo<'u')return new Ammo['btCompound'+'Shape']();}['_addEachDe'+'scendant'](_0x5ecf66){!_0x5ecf66['collision']||_0x5ecf66['rigidbody']||(_0x5ecf66['collision']['_compoundP'+'arent']=this,_0x5ecf66!==this['entity']&&_0x5ecf66['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x5ecf66['collision']));}['_updateEac'+'hDescendan'+'t'](_0x474fdb){_0x474fdb['collision']&&_0x474fdb['collision']['_compoundP'+'arent']===this&&(_0x474fdb['collision']['_compoundP'+'arent']=null,_0x474fdb!==this['entity']&&!_0x474fdb['rigidbody']&&_0x474fdb['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x474fdb['collision']));}['_updateEac'+'hDescendan'+'tTransform'](_0x47cc8f){!_0x47cc8f['collision']||_0x47cc8f['collision']['_compoundP'+'arent']!==this['collision']['_compoundP'+'arent']||this['collision']['system']['updateComp'+'oundChildT'+'ransform'](_0x47cc8f,!(-0x373+-0xc1*-0x2a+-0xe1b*0x2));}}class nR extends ct{constructor(_0x45f15b){super(_0x45f15b),this['id']='collision',this['ComponentT'+'ype']=rn,this['DataType']=XL,this['schema']=QL,this['implementa'+'tions']={},this['_triMeshCa'+'che']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['on']('remove',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x8b1340,_0x408a84,_0x92c6e0){_0x92c6e0=['type','halfExtent'+'s','radius','axis','height','convexHull','shape','model','asset','render','renderAsse'+'t','enabled','linearOffs'+'et','angularOff'+'set','checkVerte'+'xDuplicate'+'s'];const _0x5b8c53={};for(let _0x1fb64b=-0x3fe+-0x17e6+0x1be4,_0x2b0b5d=_0x92c6e0['length'];_0x1fb64b<_0x2b0b5d;_0x1fb64b++){const _0x1b060f=_0x92c6e0[_0x1fb64b];_0x5b8c53[_0x1b060f]=_0x408a84[_0x1b060f];}let _0x76be50;if(_0x408a84['hasOwnProp'+'erty']('asset')?(_0x76be50=_0x92c6e0['indexOf']('model'),_0x76be50!==-(-0x19c5*-0x1+0x224+-0x1be8)&&_0x92c6e0['splice'](_0x76be50,0x35*0xa9+-0x3e*0x29+-0x190e),_0x76be50=_0x92c6e0['indexOf']('render'),_0x76be50!==-(0x1*0x1a8e+0x259d*0x1+-0x402a)&&_0x92c6e0['splice'](_0x76be50,0x2529+-0x19aa+-0xb7e)):_0x408a84['hasOwnProp'+'erty']('model')&&(_0x76be50=_0x92c6e0['indexOf']('asset'),_0x76be50!==-(-0x92f*-0x1+-0xf5*0x1+-0x839)&&_0x92c6e0['splice'](_0x76be50,0xc5b+-0x7a9*-0x5+-0x32a7)),_0x5b8c53['type']||(_0x5b8c53['type']=_0x8b1340['data']['type']),_0x8b1340['data']['type']=_0x5b8c53['type'],Array['isArray'](_0x5b8c53['halfExtent'+'s'])&&(_0x5b8c53['halfExtent'+'s']=new D(_0x5b8c53['halfExtent'+'s'])),Array['isArray'](_0x5b8c53['linearOffs'+'et'])&&(_0x5b8c53['linearOffs'+'et']=new D(_0x5b8c53['linearOffs'+'et'])),Array['isArray'](_0x5b8c53['angularOff'+'set'])){const _0x22472a=_0x5b8c53['angularOff'+'set'];_0x22472a['length']===0x2*-0x985+0x6b5+-0x1*-0xc58?_0x5b8c53['angularOff'+'set']=new le()['setFromEul'+'erAngles'](_0x22472a[0x5*0x72b+0x53*-0x75+-0x4*-0x86],_0x22472a[-0x47f+-0x85*-0x3d+-0x1*0x1b31],_0x22472a[0x294+0x43c*-0x3+-0x2*-0x511]):_0x5b8c53['angularOff'+'set']=new le(_0x5b8c53['angularOff'+'set']);}const _0x3c4c08=this['_createImp'+'lementatio'+'n'](_0x5b8c53['type']);_0x3c4c08['beforeInit'+'ialize'](_0x8b1340,_0x5b8c53),super['initialize'+'ComponentD'+'ata'](_0x8b1340,_0x5b8c53,_0x92c6e0),_0x3c4c08['afterIniti'+'alize'](_0x8b1340,_0x5b8c53);}['_createImp'+'lementatio'+'n'](_0x185ea7){if(this['implementa'+'tions'][_0x185ea7]===void(-0x5d6+-0x1fa1+-0x45*-0x8b)){let _0x5d2e51;switch(_0x185ea7){case'box':_0x5d2e51=new JL(this);break;case'sphere':_0x5d2e51=new eR(this);break;case'capsule':_0x5d2e51=new tR(this);break;case'cylinder':_0x5d2e51=new sR(this);break;case'cone':_0x5d2e51=new iR(this);break;case'mesh':_0x5d2e51=new rR(this);break;case'compound':_0x5d2e51=new aR(this);break;default:w['error']('_createImp'+'lementatio'+'n:\x20Invalid'+'\x20collision'+'\x20system\x20ty'+'pe:\x20'+_0x185ea7);}this['implementa'+'tions'][_0x185ea7]=_0x5d2e51;}return this['implementa'+'tions'][_0x185ea7];}['_getImplem'+'entation'](_0x3e4a30){return this['implementa'+'tions'][_0x3e4a30['collision']['data']['type']];}['cloneCompo'+'nent'](_0x24c7d2,_0x5d5a7d){return this['_getImplem'+'entation'](_0x24c7d2)['clone'](_0x24c7d2,_0x5d5a7d);}['onBeforeRe'+'move'](_0x52f6c0,_0xa338f1){this['implementa'+'tions'][_0xa338f1['data']['type']]['beforeRemo'+'ve'](_0x52f6c0,_0xa338f1),_0xa338f1['onBeforeRe'+'move']();}['onRemove'](_0x4deae9,_0x1d4ace){this['implementa'+'tions'][_0x1d4ace['type']]['remove'](_0x4deae9,_0x1d4ace);}['updateComp'+'oundChildT'+'ransform'](_0x1250c9,_0xd3b625){const _0x34b91c=_0x1250c9['collision']['_compoundP'+'arent'];if(_0x34b91c!==_0x1250c9['collision']&&_0x1250c9['enabled']&&_0x1250c9['collision']['enabled']&&(_0x1250c9['_dirtyLoca'+'l']||_0xd3b625)){const _0x55cf9b=this['_getNodeTr'+'ansform'](_0x1250c9,_0x34b91c['entity']),_0x698e6=_0x34b91c['getCompoun'+'dChildShap'+'eIndex'](_0x1250c9['collision']['shape']);_0x698e6===null?_0x34b91c['shape']['addChildSh'+'ape'](_0x55cf9b,_0x1250c9['collision']['data']['shape']):_0x34b91c['shape']['updateChil'+'dTransform'](_0x698e6,_0x55cf9b,!(0xd4b+-0xe9*0x26+0x3*0x719)),Ammo['destroy'](_0x55cf9b);}}['_removeCom'+'poundChild'](_0xbf6c98,_0x378b94){if(_0xbf6c98['shape']['getNumChil'+'dShapes']()!==0x243c+-0x1aa2+0x99a*-0x1){if(_0xbf6c98['shape']['removeChil'+'dShape'])_0xbf6c98['shape']['removeChil'+'dShape'](_0x378b94);else{const _0x43253f=_0xbf6c98['getCompoun'+'dChildShap'+'eIndex'](_0x378b94);_0x43253f!==null&&_0xbf6c98['shape']['removeChil'+'dShapeByIn'+'dex'](_0x43253f);}}}['onTransfor'+'mChanged'](_0x2178db,_0x540c4a,_0xfca375,_0x56d191){this['implementa'+'tions'][_0x2178db['data']['type']]['updateTran'+'sform'](_0x2178db,_0x540c4a,_0xfca375,_0x56d191);}['changeType'](_0x16e5d5,_0x5795b2,_0x53c29f){this['implementa'+'tions'][_0x5795b2]['beforeRemo'+'ve'](_0x16e5d5['entity'],_0x16e5d5),this['implementa'+'tions'][_0x5795b2]['remove'](_0x16e5d5['entity'],_0x16e5d5['data']),this['_createImp'+'lementatio'+'n'](_0x53c29f)['reset'](_0x16e5d5,_0x16e5d5['data']);}['recreatePh'+'ysicalShap'+'es'](_0x200c7a){this['implementa'+'tions'][_0x200c7a['data']['type']]['recreatePh'+'ysicalShap'+'es'](_0x200c7a);}['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x28fd41,_0x4acbd7){if(_0x28fd41===_0x4acbd7){const _0x55011d=_0x28fd41['getWorldTr'+'ansform']()['getScale']();wc['setScale'](_0x55011d['x'],_0x55011d['y'],_0x55011d['z']);}else this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x28fd41['parent'],_0x4acbd7),wc['mul'](_0x28fd41['getLocalTr'+'ansform']());}['_getNodeSc'+'aling'](_0x5c6a0d){const _0x161259=_0x5c6a0d['getWorldTr'+'ansform']()['getScale']();return new Ammo['btVector3'](_0x161259['x'],_0x161259['y'],_0x161259['z']);}['_getNodeTr'+'ansform'](_0x221bf9,_0x30e3f5){let _0x16d623,_0x281701;_0x30e3f5?(this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x221bf9,_0x30e3f5),_0x16d623=KL,_0x281701=Vr,wc['getTransla'+'tion'](_0x16d623),_0x281701['setFromMat'+'4'](wc)):(_0x16d623=_0x221bf9['getPositio'+'n'](),_0x281701=_0x221bf9['getRotatio'+'n']());const _0xa8b438=new Ammo['btQuaterni'+'on'](),_0x3247f6=new Ammo['btTransfor'+'m']();_0x3247f6['setIdentit'+'y']();const _0x560c6f=_0x3247f6['getOrigin'](),_0xb327fa=_0x221bf9['collision'];if(_0xb327fa&&_0xb327fa['_hasOffset']){const _0x72dd97=_0xb327fa['data']['linearOffs'+'et'],_0x4b0346=_0xb327fa['data']['angularOff'+'set'],_0x3c0fc4=ZL;Vr['copy'](_0x281701)['transformV'+'ector'](_0x72dd97,_0x3c0fc4),_0x3c0fc4['add'](_0x16d623),Vr['copy'](_0x281701)['mul'](_0x4b0346),_0x560c6f['setValue'](_0x3c0fc4['x'],_0x3c0fc4['y'],_0x3c0fc4['z']),_0xa8b438['setValue'](Vr['x'],Vr['y'],Vr['z'],Vr['w']);}else _0x560c6f['setValue'](_0x16d623['x'],_0x16d623['y'],_0x16d623['z']),_0xa8b438['setValue'](_0x281701['x'],_0x281701['y'],_0x281701['z'],_0x281701['w']);return _0x3247f6['setRotatio'+'n'](_0xa8b438),Ammo['destroy'](_0xa8b438),_0x3247f6;}['destroy'](){for(const _0x186e62 in this['_triMeshCa'+'che'])Ammo['destroy'](this['_triMeshCa'+'che'][_0x186e62]);this['_triMeshCa'+'che']=null,super['destroy']();}}const Ec=new ie(),oR=new Kt();class lR{constructor(_0x31df42,_0x526bd5,_0x10ca78){this['_entity']=_0x31df42,this['_element']=_0x31df42['element'],this['model']=new sr(),this['node']=new Ie(),this['model']['graph']=this['node'],this['mesh']=_0x526bd5,this['meshInstan'+'ce']=new He(this['mesh'],_0x10ca78,this['node']),this['meshInstan'+'ce']['name']='ImageEleme'+'nt:\x20'+_0x31df42['name'],this['meshInstan'+'ce']['castShadow']=!(-0x7a0+-0x3*-0x921+0x2*-0x9e1),this['meshInstan'+'ce']['receiveSha'+'dow']=!(-0x81d+-0xed6+0x16f4),this['_meshDirty']=!(-0x1*0x1055+0xed4+0x182*0x1),this['model']['meshInstan'+'ces']['push'](this['meshInstan'+'ce']),this['_entity']['addChild'](this['model']['graph']),this['model']['_entity']=this['_entity'],this['unmaskMesh'+'Instance']=null;}['destroy'](){var _0x56b03d,_0x3ff8a7;this['setMateria'+'l'](null),this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),this['model']['destroy'](),this['model']=null,this['node']=null,this['mesh']=null,(_0x56b03d=this['meshInstan'+'ce'])==null||_0x56b03d['destroy'](),this['meshInstan'+'ce']=null,(_0x3ff8a7=this['unmaskMesh'+'Instance'])==null||_0x3ff8a7['destroy'](),this['unmaskMesh'+'Instance']=null,this['_entity']=null,this['_element']=null;}['setMesh'](_0x380d28){this['meshInstan'+'ce']&&(this['mesh']=_0x380d28,this['meshInstan'+'ce']['mesh']=_0x380d28,this['meshInstan'+'ce']['visible']=!!_0x380d28,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['mesh']=_0x380d28),this['forceUpdat'+'eAabb']());}['setMask'](_0x1604ac){var _0x598fea;if(this['meshInstan'+'ce']){if(this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),_0x1604ac){this['unmaskMesh'+'Instance']=new He(this['mesh'],this['meshInstan'+'ce']['material'],this['node']),this['unmaskMesh'+'Instance']['name']='Unmask:\x20'+this['_entity']['name'],this['unmaskMesh'+'Instance']['castShadow']=!(-0x1*0x136f+-0x165c*-0x1+-0x2ec),this['unmaskMesh'+'Instance']['receiveSha'+'dow']=!(-0x5*0x4b1+-0x2*0xc41+0x2ff8),this['unmaskMesh'+'Instance']['pick']=!(-0x162f+0x205a+0x1*-0xa2a),this['model']['meshInstan'+'ces']['push'](this['unmaskMesh'+'Instance']);for(const _0x376107 in this['meshInstan'+'ce']['parameters'])this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x376107,this['meshInstan'+'ce']['parameters'][_0x376107]['data']);}else{const _0x2504fe=this['model']['meshInstan'+'ces']['indexOf'](this['unmaskMesh'+'Instance']);_0x2504fe>=0x109*-0x11+-0x59b+-0x21c*-0xb&&this['model']['meshInstan'+'ces']['splice'](_0x2504fe,0x5*-0x433+0xa1*-0x20+0x2920);}this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['addModelTo'+'Layers'](this['model']),_0x1604ac||((_0x598fea=this['unmaskMesh'+'Instance'])==null||_0x598fea['destroy'](),this['unmaskMesh'+'Instance']=null);}}['setMateria'+'l'](_0x29359f){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x29359f,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['material']=_0x29359f));}['setParamet'+'er'](_0x41414d,_0x3aec82){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['setParamet'+'er'](_0x41414d,_0x3aec82),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x41414d,_0x3aec82));}['deletePara'+'meter'](_0x25fdbc){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['deletePara'+'meter'](_0x25fdbc),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['deletePara'+'meter'](_0x25fdbc));}['setUnmaskD'+'rawOrder'](){if(!this['meshInstan'+'ce'])return;const _0xd18f2d=function(_0x2e7f80){let _0x154986;const _0x2e2184=_0x2e7f80['children'],_0x533e91=_0x2e2184['length'];if(_0x533e91){for(let _0x226c16=-0x17*0x67+-0x15cd+0x1f0e;_0x226c16<_0x533e91;_0x226c16++)_0x2e2184[_0x226c16]['element']&&(_0x154986=_0x2e2184[_0x226c16]);if(!_0x154986)return null;const _0x299950=_0xd18f2d(_0x154986);return _0x299950||_0x154986;}return null;};if(this['unmaskMesh'+'Instance']){const _0x44a60a=_0xd18f2d(this['_entity']);_0x44a60a&&_0x44a60a['element']?this['unmaskMesh'+'Instance']['drawOrder']=_0x44a60a['element']['drawOrder']+_0x44a60a['element']['getMaskOff'+'set']():this['unmaskMesh'+'Instance']['drawOrder']=this['meshInstan'+'ce']['drawOrder']+this['_element']['getMaskOff'+'set'](),w['trace'](Vs,'setDrawOrd'+'er:\x20',this['unmaskMesh'+'Instance']['name'],this['unmaskMesh'+'Instance']['drawOrder']);}}['setDrawOrd'+'er'](_0x56672a){this['meshInstan'+'ce']&&(w['trace'](Vs,'setDrawOrd'+'er:\x20',this['meshInstan'+'ce']['name'],_0x56672a),this['meshInstan'+'ce']['drawOrder']=_0x56672a);}['setCull'](_0x1ae4a3){if(!this['meshInstan'+'ce'])return;const _0x47e049=this['_element'];let _0xbf1495=null;_0x1ae4a3&&_0x47e049['_isScreenS'+'pace']()&&(_0xbf1495=function(_0x304c17){return _0x47e049['isVisibleF'+'orCamera'](_0x304c17);}),this['meshInstan'+'ce']['cull']=_0x1ae4a3,this['meshInstan'+'ce']['isVisibleF'+'unc']=_0xbf1495,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['cull']=_0x1ae4a3,this['unmaskMesh'+'Instance']['isVisibleF'+'unc']=_0xbf1495);}['setScreenS'+'pace'](_0x33f9de){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['screenSpac'+'e']=_0x33f9de,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['screenSpac'+'e']=_0x33f9de));}['setLayer'](_0x450bf3){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['layer']=_0x450bf3,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['layer']=_0x450bf3));}['forceUpdat'+'eAabb'](_0xf509aa){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_aabbVer']=-(0x2*0x10f7+-0x6*0x4a9+-0x5f7),this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_aabbVer']=-(0xf79*-0x1+0x208e+-0x1*0x1114)));}['setAabbFun'+'c'](_0x315c32){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_updateAab'+'bFunc']=_0x315c32,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_updateAab'+'bFunc']=_0x315c32));}}class cR{constructor(_0x56bdd2){h(this,'_evtSetMes'+'hes',null),(this['_element']=_0x56bdd2,this['_entity']=_0x56bdd2['entity'],this['_system']=_0x56bdd2['system'],this['_textureAs'+'set']=null,this['_texture']=null,this['_materialA'+'sset']=null,this['_material']=null,this['_spriteAss'+'et']=null,this['_sprite']=null,this['_spriteFra'+'me']=-0x1cfc+0x1e53+0x7*-0x31,this['_pixelsPer'+'Unit']=null,this['_targetAsp'+'ectRatio']=-(0x3*0xa3b+0x18f*0xa+0x1*-0x2e46),this['_rect']=new re(0xed*0x5+0x1106*-0x1+0x13*0xa7,0x17c2+0xa75*-0x1+-0x3*0x46f,-0x1a76+0x1788+0x2ef,-0x33a*-0x1+0x1c41+-0x1f7a),this['_mask']=!(-0x4c3*0x2+0x436+0x1*0x551),this['_maskRef']=0x1a7+-0x1*0x1d4d+0x1ba6,this['_outerScal'+'e']=new J(),this['_outerScal'+'eUniform']=new Float32Array(-0xd1b+-0x5c5+0x1*0x12e2),this['_innerOffs'+'et']=new re(),this['_innerOffs'+'etUniform']=new Float32Array(0x12e9+0x46+-0x132b*0x1),this['_atlasRect']=new re(),this['_atlasRect'+'Uniform']=new Float32Array(0x1bc2+0x5*-0x4e5+0x1b*-0x1f),this['_defaultMe'+'sh']=this['_createMes'+'h'](),this['_renderabl'+'e']=new lR(this['_entity'],this['_defaultMe'+'sh'],this['_material']),this['_color']=new ie(-0x16af+-0x22ba+0x396a,-0x12de+0x7e1+0xafe,-0x17d9+0x11fa+0x5e0,-0x71*-0x4+0xe5*0x1d+-0x1bb4),this['_colorUnif'+'orm']=new Float32Array([-0x1b*-0x8f+-0xa1f*0x2+0x52a,-0x4f8+0xc2*-0x11+-0x28d*-0x7,-0x413*-0x1+0x1*-0x796+0x3c*0xf]),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',0x23ca+0x10c1*-0x1+-0xc*0x196),this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_onScreenC'+'hange'](this['_element']['screen']),this['_element']['on']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['on']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['on']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this));}['destroy'](){this['textureAss'+'et']=null,this['spriteAsse'+'t']=null,this['materialAs'+'set']=null,this['_renderabl'+'e']['setMesh'](this['_defaultMe'+'sh']),this['_renderabl'+'e']['destroy'](),this['_defaultMe'+'sh']=null,this['_element']['off']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this);}['_onResolut'+'ionChange'](_0x39005e){}['_onParentR'+'esizeOrPiv'+'otChange'](){this['_renderabl'+'e']['mesh']&&this['_updateMes'+'h'](this['_renderabl'+'e']['mesh']);}['_onScreenS'+'paceChange'](_0x1e29db){this['_updateMat'+'erial'](_0x1e29db);}['_onScreenC'+'hange'](_0x3f8f13,_0x40e7d4){_0x3f8f13?this['_updateMat'+'erial'](_0x3f8f13['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(-0x2*-0x7a4+-0x18f*-0x6+-0x18a1));}['_onDrawOrd'+'erChange'](_0x482a50){this['_renderabl'+'e']['setDrawOrd'+'er'](_0x482a50),this['mask']&&this['_element']['screen']&&this['_element']['screen']['screen']['once']('syncdrawor'+'der',function(){this['_renderabl'+'e']['setUnmaskD'+'rawOrder']();},this);}['_hasUserMa'+'terial'](){return!!this['_materialA'+'sset']||!!this['_material']&&this['_system']['defaultIma'+'geMaterial'+'s']['indexOf'](this['_material'])===-(-0x2*-0xaa6+-0x18c8+0x37d*0x1);}['_use9Slici'+'ng'](){return this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt);}['_updateMat'+'erial'](_0x25581f){const _0x43e43f=!!this['_mask'],_0x185d2d=!!(this['sprite']&&this['sprite']['renderMode']===Pt),_0x5e478c=!!(this['sprite']&&this['sprite']['renderMode']===Mt);this['_hasUserMa'+'terial']()||(this['_material']=this['_system']['getImageEl'+'ementMater'+'ial'](_0x25581f,_0x43e43f,_0x185d2d,_0x5e478c)),this['_renderabl'+'e']&&(this['_renderabl'+'e']['setCull'](!this['_element']['_isScreenS'+'pace']()||this['_element']['_isScreenC'+'ulled']()),this['_renderabl'+'e']['setMateria'+'l'](this['_material']),this['_renderabl'+'e']['setScreenS'+'pace'](_0x25581f),this['_renderabl'+'e']['setLayer'](_0x25581f?Ow:Ky));}['_createMes'+'h'](){const _0x5122fd=this['_element'],_0x3d2e1b=_0x5122fd['calculated'+'Width'],_0x14c8c3=_0x5122fd['calculated'+'Height'],_0x1a78bc=this['_rect'],_0x291bd3=this['_system']['app']['graphicsDe'+'vice'],_0x146493=new Float32Array([_0x3d2e1b,0x56c*-0x2+0x97*-0x17+0x1869,-0xc2e*0x2+-0x1f*-0x130+-0xc74,0x13c1*0x1+0x1395+-0x2756,-0x1*0x12f5+0xfb+0x11fa,0x1*0x2527+-0x10*0x256+0x3a,_0x1a78bc['x']+_0x1a78bc['z'],-0x2*0x892+-0x2045+0x2*0x18b5-_0x1a78bc['y'],_0x3d2e1b,_0x14c8c3,0x1e67+0x1d*-0x2+-0x1e2d,0x174*-0x11+0x11*-0x53+0x1e37,-0x15*-0xf9+0x15b*-0x2+-0x11b7,-0x1232+0x7c*0x45+-0xf39,_0x1a78bc['x']+_0x1a78bc['z'],-0x1a60+0x16da+0x387-(_0x1a78bc['y']+_0x1a78bc['w']),-0x1*-0x1f99+-0x211d+0x184,0x155e*-0x1+0x1*0x18e5+-0x387,0x1b8f+-0x5a6*0x6+0x655,-0x1c0+-0x25f*0x3+-0x1*-0x8dd,-0xa*-0x19+0x837*0x1+-0x931,0x737+-0x1*-0xc4b+-0x1381,_0x1a78bc['x'],-0x8*-0x167+-0x2346+0x3*0x805-_0x1a78bc['y'],-0x25a5+0x126a+0x133b,_0x14c8c3,0x73b*-0x3+-0x28f*-0xf+-0x10b0,-0x121c+0x189b+-0x67f,0x4*-0x6d3+-0xab7*0x1+0x2603,0x132*0x6+-0x19*0x107+0xc*0x18b,_0x1a78bc['x'],-0x103f*0x2+-0x11e7*0x1+0x3266-(_0x1a78bc['y']+_0x1a78bc['w'])]),_0x55147c=oR['get'](_0x291bd3,()=>new kt(_0x291bd3,[{'semantic':Me,'components':0x3,'type':Ve},{'semantic':gs,'components':0x3,'type':Ve},{'semantic':is,'components':0x2,'type':Ve}])),_0x24ae36=new Is(_0x291bd3,_0x55147c,-0x19c0*-0x1+0x17dd+0x3199*-0x1,{'data':_0x146493['buffer']}),_0x465b2a=new Ge(_0x291bd3);return _0x465b2a['vertexBuff'+'er']=_0x24ae36,_0x465b2a['primitive'][0x190+0x1*-0x8df+0x74f]['type']=Er,_0x465b2a['primitive'][-0x1dd8+0x5c4+-0x4*-0x605]['base']=0x115*-0x21+0x4cb*0x1+0x1eea,_0x465b2a['primitive'][0x5*0x6b7+-0x599+0x1bfa*-0x1]['count']=0x12da*0x1+0x1535+-0x280b,_0x465b2a['primitive'][0xd86+-0x1*-0x5d2+-0x1358]['indexed']=!(-0x13e4+-0x7*0x2c7+0x13*0x212),_0x465b2a['aabb']['setMinMax'](D['ZERO'],new D(_0x3d2e1b,_0x14c8c3,0x24a*0x7+0x261a+-0x20*0x1b1)),this['_updateMes'+'h'](_0x465b2a),_0x465b2a;}['_updateMes'+'h'](_0x349409){const _0x449f69=this['_element'];let _0x325c85=_0x449f69['calculated'+'Width'],_0x4cf36b=_0x449f69['calculated'+'Height'];if(_0x449f69['fitMode']!==th&&this['_targetAsp'+'ectRatio']>0x3df*0x9+0xa06*-0x2+-0x1*0xecb){const _0x18ac16=_0x449f69['calculated'+'Width']/_0x449f69['calculated'+'Height'];_0x449f69['fitMode']===GL&&_0x18ac16>this['_targetAsp'+'ectRatio']||_0x449f69['fitMode']===HL&&_0x18ac16<this['_targetAsp'+'ectRatio']?_0x325c85=_0x449f69['calculated'+'Height']*this['_targetAsp'+'ectRatio']:_0x4cf36b=_0x449f69['calculated'+'Width']/this['_targetAsp'+'ectRatio'];}const _0x39a6c5=_0x449f69['_isScreenS'+'pace']();if(this['_updateMat'+'erial'](_0x39a6c5),this['_renderabl'+'e']&&this['_renderabl'+'e']['forceUpdat'+'eAabb'](),this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){const _0x421314=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]],_0x3af8df=(0x11dc+-0x21ca+0xff0)/_0x421314['rect']['z'],_0x3b77d6=(0x1*-0x2548+0x7a2*-0x3+0x3c30)/_0x421314['rect']['w'];this['_innerOffs'+'et']['set'](_0x421314['border']['x']*_0x3af8df,_0x421314['border']['y']*_0x3b77d6,_0x421314['border']['z']*_0x3af8df,_0x421314['border']['w']*_0x3b77d6);const _0xfacc4=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x421314['rect']['x']/_0xfacc4['width'],_0x421314['rect']['y']/_0xfacc4['height'],_0x421314['rect']['z']/_0xfacc4['width'],_0x421314['rect']['w']/_0xfacc4['height']);const _0x54d734=this['_pixelsPer'+'Unit']!==null?this['_pixelsPer'+'Unit']:this['sprite']['pixelsPerU'+'nit'],_0x39de80=_0x421314['rect']['z']/_0x54d734,_0x2c22da=_0x421314['rect']['w']/_0x54d734;this['_outerScal'+'e']['set'](Math['max'](_0x325c85,this['_innerOffs'+'et']['x']*_0x39de80),Math['max'](_0x4cf36b,this['_innerOffs'+'et']['y']*_0x2c22da));let _0xea5acf=_0x39de80,_0x1a0369=_0x2c22da;this['_outerScal'+'e']['x']/=_0x39de80,this['_outerScal'+'e']['y']/=_0x2c22da,_0xea5acf*=Y['clamp'](_0x325c85/(this['_innerOffs'+'et']['x']*_0x39de80),0x2669+0x34a+0x5*-0x857+0.0001,0xe9*-0x6+-0x8ea+-0xe61*-0x1),_0x1a0369*=Y['clamp'](_0x4cf36b/(this['_innerOffs'+'et']['y']*_0x2c22da),-0x7*-0x105+0x90d+-0x1030+0.0001,-0x1*-0x1eb+-0x1*-0x182f+-0x1a19),this['_renderabl'+'e']&&(this['_innerOffs'+'etUniform'][-0x153f+0x1c73+-0x734*0x1]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][0x1*-0xc94+0x94d*-0x1+0x15e2]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][-0x1405+-0x32*-0xa1+-0xb6b]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][0x207a+0x1*-0xcf+-0x1fa8]=this['_innerOffs'+'et']['w'],this['_renderabl'+'e']['setParamet'+'er']('innerOffse'+'t',this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][-0x1*0x347+0x237e*0x1+-0xabd*0x3]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][0x311+0x2*-0x155+-0x33*0x2]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][0x239a+0x36+-0x23ce]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][-0x247f+-0x1bc3+0x4045]=this['_atlasRect']['w'],this['_renderabl'+'e']['setParamet'+'er']('atlasRect',this['_atlasRect'+'Uniform']),this['_outerScal'+'eUniform'][0x1*0x2169+0x1ab2+0x17*-0x29d]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][-0x25bf+-0x2113*-0x1+0x4ad]=this['_outerScal'+'e']['y'],this['_renderabl'+'e']['setParamet'+'er']('outerScale',this['_outerScal'+'eUniform']),this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']),this['_renderabl'+'e']['node']['setLocalSc'+'ale'](_0xea5acf,_0x1a0369,0x1529+0x2084+-0x35ac),this['_renderabl'+'e']['node']['setLocalPo'+'sition']((-0x135+0x1*0x789+0x10e*-0x6+0.5-_0x449f69['pivot']['x'])*_0x325c85,(0xe9*-0x7+-0x229b+0x28fa+0.5-_0x449f69['pivot']['y'])*_0x4cf36b,0x1*0x25cc+0x1ad2+0x409e*-0x1));}else{const _0x2fc5b5=_0x349409['vertexBuff'+'er'],_0x37afb6=new Float32Array(_0x2fc5b5['lock']()),_0x2599f6=_0x449f69['pivot']['x'],_0x1b71df=_0x449f69['pivot']['y'];_0x37afb6[0x161f+0x1*0x8cd+0x1*-0x1eec]=_0x325c85-_0x2599f6*_0x325c85,_0x37afb6[0x24b6*-0x1+0xc88*-0x2+0x5*0xc5b]=0x31*-0x2a+0x34+-0x2*-0x3eb-_0x1b71df*_0x4cf36b,_0x37afb6[0x1a46+-0xa*-0x24d+-0x3140]=_0x325c85-_0x2599f6*_0x325c85,_0x37afb6[-0x1*-0xcfa+0xf1*0xb+-0x174c]=_0x4cf36b-_0x1b71df*_0x4cf36b,_0x37afb6[-0x5*0x4a4+0x2a*-0xbc+0x361c]=0x1*-0xea2+0x5df+-0x8c3*-0x1-_0x2599f6*_0x325c85,_0x37afb6[-0x1bc1+-0x782+0x2354]=0xb12+0xb7a+-0x168c-_0x1b71df*_0x4cf36b,_0x37afb6[-0x3*-0x5c5+0x2*-0x95c+0x181]=-0x1*0x18f5+-0x7*0x4fd+0x3be0-_0x2599f6*_0x325c85,_0x37afb6[0x25b1+0xb6d+-0x3105]=_0x4cf36b-_0x1b71df*_0x4cf36b;let _0x41f36=-0x310+-0x10a7+0x13b8,_0x3ea767=0x51*0x5d+-0x2002+0x296,_0xf4fe9=this['_rect'];if(this['_sprite']&&this['_sprite']['frameKeys'][this['_spriteFra'+'me']]&&this['_sprite']['atlas']){const _0x49fdae=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];_0x49fdae&&(_0xf4fe9=_0x49fdae['rect'],_0x41f36=this['_sprite']['atlas']['texture']['width'],_0x3ea767=this['_sprite']['atlas']['texture']['height']);}_0x37afb6[-0x1*-0x1915+0x1621+-0x2f30]=(_0xf4fe9['x']+_0xf4fe9['z'])/_0x41f36,_0x37afb6[-0x1f1d+0x1a58*0x1+-0x1*-0x4cc]=-0x34*0x83+-0x1be6+0x3683-_0xf4fe9['y']/_0x3ea767,_0x37afb6[0x8f0*0x3+0x7d6+-0x2298]=(_0xf4fe9['x']+_0xf4fe9['z'])/_0x41f36,_0x37afb6[-0x8bd+-0x116d+-0x3bf*-0x7]=-0x29b*0x9+-0x202*0x4+0x1f7c-(_0xf4fe9['y']+_0xf4fe9['w'])/_0x3ea767,_0x37afb6[-0x2b*-0x6+-0x251d+0x2431]=_0xf4fe9['x']/_0x41f36,_0x37afb6[0x1*0xd2e+-0x16a2+0x98b]=-0x14ad+-0x1490+0x293e-_0xf4fe9['y']/_0x3ea767,_0x37afb6[0x7db*-0x1+-0x2147*0x1+0x2940]=_0xf4fe9['x']/_0x41f36,_0x37afb6[-0x2074+-0x1ee+0x2281]=-0x17de+0x1107+-0x8*-0xdb-(_0xf4fe9['y']+_0xf4fe9['w'])/_0x3ea767,_0x2fc5b5['unlock']();const _0x11371e=new D(-0x18dc+-0x1*0x4eb+0x1dc7-_0x2599f6*_0x325c85,-0xcbb*0x1+0xb*0x127+0xe-_0x1b71df*_0x4cf36b,0x184e+-0x3d+-0x1811*0x1),_0x5cba2e=new D(_0x325c85-_0x2599f6*_0x325c85,_0x4cf36b-_0x1b71df*_0x4cf36b,-0x1393*0x1+0x4*-0x151+-0x1*-0x18d7);_0x349409['aabb']['setMinMax'](_0x11371e,_0x5cba2e),this['_renderabl'+'e']&&(this['_renderabl'+'e']['node']['setLocalSc'+'ale'](0x1*0x13f1+0xc*-0x2a1+0xb9c,0xcd0*0x1+0x5de*-0x1+-0x6f1,0xc*0xa4+-0x25f*-0x6+-0x4f*0x47),this['_renderabl'+'e']['node']['setLocalPo'+'sition'](-0x833+0xe17+-0x5e4,0x3*-0xa13+0x2325+-0x4ec,-0xee*0x1a+0x1*0x1ba8+-0x2*0x1be),this['_renderabl'+'e']['setAabbFun'+'c'](null));}this['_meshDirty']=!(-0x1623+-0xe33+0xc1d*0x3);}['_updateSpr'+'ite'](){let _0x5c8c02=!(0xb11+0x78d*0x3+-0x21b7),_0x144813=null;if(this['_targetAsp'+'ectRatio']=-(-0x36f+-0x47b+0x1*0x7eb),this['_sprite']&&this['_sprite']['atlas']){_0x144813=this['_sprite']['meshes'][this['spriteFram'+'e']],_0x5c8c02=this['_sprite']['renderMode']===Pt||this['_sprite']['renderMode']===Mt;const _0xa3fea0=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];(_0xa3fea0==null?void(0x1ad3+0xd5f*0x2+-0x28d*0x15):_0xa3fea0['rect']['w'])>-0x19+-0x6d6+0x6ef&&(this['_targetAsp'+'ectRatio']=_0xa3fea0['rect']['z']/_0xa3fea0['rect']['w']);}this['mesh']=_0x5c8c02?_0x144813:this['_defaultMe'+'sh'],this['refreshMes'+'h']();}['refreshMes'+'h'](){this['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(-0x61+-0x19d9+0x1a3a):this['_updateMes'+'h'](this['mesh']));}['_updateAab'+'b'](_0x317319){return _0x317319['center']['set'](0x17be+0x1925+-0x30e3,-0xbff+-0x2bf+0xebe,0x11*0x139+-0x1fb0+0xae7),_0x317319['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(-0x266a+0xe07+0x1863+0.5),this['_outerScal'+'e']['y']*(-0x1eb5+0x15c1+0x2fc*0x3+0.5),0x1*-0x28d+-0xd*-0xfe+0xa59*-0x1+0.001),_0x317319['setFromTra'+'nsformedAa'+'bb'](_0x317319,this['_renderabl'+'e']['node']['getWorldTr'+'ansform']()),_0x317319;}['_toggleMas'+'k'](){this['_element']['_dirtifyMa'+'sk']();const _0x129a3e=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x129a3e),this['_renderabl'+'e']['setMask'](!!this['_mask']);}['_onMateria'+'lLoad'](_0x18805f){this['material']=_0x18805f['resource'];}['_onMateria'+'lAdded'](_0x3537a5){this['_system']['app']['assets']['off']('add:'+_0x3537a5['id'],this['_onMateria'+'lAdded'],this),this['_materialA'+'sset']===_0x3537a5['id']&&this['_bindMater'+'ialAsset'](_0x3537a5);}['_bindMater'+'ialAsset'](_0x439610){this['_entity']['enabled']&&(_0x439610['on']('load',this['_onMateria'+'lLoad'],this),_0x439610['on']('change',this['_onMateria'+'lChange'],this),_0x439610['on']('remove',this['_onMateria'+'lRemove'],this),_0x439610['resource']?this['_onMateria'+'lLoad'](_0x439610):this['_system']['app']['assets']['load'](_0x439610));}['_unbindMat'+'erialAsset'](_0x3e94e8){_0x3e94e8['off']('load',this['_onMateria'+'lLoad'],this),_0x3e94e8['off']('change',this['_onMateria'+'lChange'],this),_0x3e94e8['off']('remove',this['_onMateria'+'lRemove'],this);}['_onMateria'+'lChange'](){}['_onMateria'+'lRemove'](){}['_onTexture'+'Added'](_0x5f5b6a){this['_system']['app']['assets']['off']('add:'+_0x5f5b6a['id'],this['_onTexture'+'Added'],this),this['_textureAs'+'set']===_0x5f5b6a['id']&&this['_bindTextu'+'reAsset'](_0x5f5b6a);}['_bindTextu'+'reAsset'](_0x4b230e){this['_entity']['enabled']&&(_0x4b230e['on']('load',this['_onTexture'+'Load'],this),_0x4b230e['on']('change',this['_onTexture'+'Change'],this),_0x4b230e['on']('remove',this['_onTexture'+'Remove'],this),_0x4b230e['resource']?this['_onTexture'+'Load'](_0x4b230e):this['_system']['app']['assets']['load'](_0x4b230e));}['_unbindTex'+'tureAsset'](_0x5bc3d4){_0x5bc3d4['off']('load',this['_onTexture'+'Load'],this),_0x5bc3d4['off']('change',this['_onTexture'+'Change'],this),_0x5bc3d4['off']('remove',this['_onTexture'+'Remove'],this);}['_onTexture'+'Load'](_0x14fd53){this['texture']=_0x14fd53['resource'];}['_onTexture'+'Change'](_0xfc7592){}['_onTexture'+'Remove'](_0x28ebfa){}['_onSpriteA'+'ssetAdded'](_0x1d37dc){this['_system']['app']['assets']['off']('add:'+_0x1d37dc['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x1d37dc['id']&&this['_bindSprit'+'eAsset'](_0x1d37dc);}['_bindSprit'+'eAsset'](_0x192e42){this['_entity']['enabled']&&(_0x192e42['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x192e42['on']('change',this['_onSpriteA'+'ssetChange'],this),_0x192e42['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x192e42['resource']?this['_onSpriteA'+'ssetLoad'](_0x192e42):this['_system']['app']['assets']['load'](_0x192e42));}['_unbindSpr'+'iteAsset'](_0x19c77e){_0x19c77e['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x19c77e['off']('change',this['_onSpriteA'+'ssetChange'],this),_0x19c77e['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x19c77e['data']['textureAtl'+'asAsset']&&this['_system']['app']['assets']['off']('load:'+_0x19c77e['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this);}['_onSpriteA'+'ssetLoad'](_0x4a644d){if(!_0x4a644d||!_0x4a644d['resource'])this['sprite']=null;else{if(_0x4a644d['resource']['atlas'])this['sprite']=_0x4a644d['resource'];else{const _0x4c9af1=_0x4a644d['data']['textureAtl'+'asAsset'];if(_0x4c9af1){const _0x3fc5a2=this['_system']['app']['assets'];_0x3fc5a2['off']('load:'+_0x4c9af1,this['_onTexture'+'AtlasLoad'],this),_0x3fc5a2['once']('load:'+_0x4c9af1,this['_onTexture'+'AtlasLoad'],this);}}}}['_onSpriteA'+'ssetChange'](_0x310400){this['_onSpriteA'+'ssetLoad'](_0x310400);}['_onSpriteA'+'ssetRemove'](_0x6a6ab1){}['_bindSprit'+'e'](_0x380c12){this['_evtSetMes'+'hes']=_0x380c12['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),_0x380c12['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x380c12['on']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x380c12['atlas']&&_0x380c12['atlas']['on']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_unbindSpr'+'ite'](_0x281f81){var _0x32114d;(_0x32114d=this['_evtSetMes'+'hes'])==null||_0x32114d['off'](),this['_evtSetMes'+'hes']=null,_0x281f81['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x281f81['off']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x281f81['atlas']&&_0x281f81['atlas']['off']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_onSpriteM'+'eshesChang'+'e'](){this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],0x35b*0x6+0x1e41+-0x3263,this['_sprite']['frameKeys']['length']-(0x43*0x1+-0x791*-0x1+0x7d3*-0x1))),this['_updateSpr'+'ite']();}['_onSpriteP'+'puChange'](){this['sprite']['renderMode']!==ci&&this['_pixelsPer'+'Unit']===null&&this['_updateSpr'+'ite']();}['_onAtlasTe'+'xtureChang'+'e'](){this['sprite']&&this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'));}['_onTexture'+'AtlasLoad'](_0x16fdc2){const _0x1a4a23=this['_spriteAss'+'et'];_0x1a4a23 instanceof pe?this['_onSpriteA'+'ssetLoad'](_0x1a4a23):this['_onSpriteA'+'ssetLoad'](this['_system']['app']['assets']['get'](_0x1a4a23));}['onEnable'](){if(this['_materialA'+'sset']){const _0x393657=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);_0x393657&&_0x393657['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0x393657);}if(this['_textureAs'+'set']){const _0x5b699d=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x5b699d&&_0x5b699d['resource']!==this['_texture']&&this['_bindTextu'+'reAsset'](_0x5b699d);}if(this['_spriteAss'+'et']){const _0x4e7418=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x4e7418&&_0x4e7418['resource']!==this['_sprite']&&this['_bindSprit'+'eAsset'](_0x4e7418);}this['_element']['addModelTo'+'Layers'](this['_renderabl'+'e']['model']);}['onDisable'](){this['_element']['removeMode'+'lFromLayer'+'s'](this['_renderabl'+'e']['model']);}['_setStenci'+'l'](_0x4e21e1){this['_renderabl'+'e']['meshInstan'+'ce']['stencilFro'+'nt']=_0x4e21e1,this['_renderabl'+'e']['meshInstan'+'ce']['stencilBac'+'k']=_0x4e21e1;let _0x3e4589=-0x1a36+-0x4*-0x6cd+0xfe*-0x1;if(this['_element']['maskedBy']&&(_0x3e4589=this['_element']['maskedBy']['element']['_image']['_maskRef']),this['_renderabl'+'e']['unmaskMesh'+'Instance']){const _0x2a727f=new pi({'ref':_0x3e4589+(0x7a*0x4+0x14*-0xee+0x10b1),'func':dh,'zpass':Bx});this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']=_0x2a727f,this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k']=_0x2a727f;}}['_updateRen'+'derableEmi'+'ssive'](){Ec['linear'](this['_color']),this['_colorUnif'+'orm'][-0x11d2+-0x672+0x1844]=Ec['r'],this['_colorUnif'+'orm'][-0x18ab+-0x72+0xa*0x283]=Ec['g'],this['_colorUnif'+'orm'][-0x1*0x132f+0x229e+-0xf6d]=Ec['b'],this['_renderabl'+'e']['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}set['color'](_0x3dfc5e){this['_color']===_0x3dfc5e&&w['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t');const {r:_0x47b837,g:_0x11a727,b:_0x300785}=_0x3dfc5e;(this['_color']['r']!==_0x47b837||this['_color']['g']!==_0x11a727||this['_color']['b']!==_0x300785)&&(this['_color']['r']=_0x47b837,this['_color']['g']=_0x11a727,this['_color']['b']=_0x300785,this['_updateRen'+'derableEmi'+'ssive']()),this['_element']&&this['_element']['fire']('set:color',this['_color']);}get['color'](){return this['_color'];}set['opacity'](_0x2e25f4){_0x2e25f4!==this['_color']['a']&&(this['_color']['a']=_0x2e25f4,this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',_0x2e25f4)),this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x2e25f4);}get['opacity'](){return this['_color']['a'];}set['rect'](_0x992511){this['_rect']===_0x992511&&console['warn']('Setting\x20el'+'ement.rect'+'\x20to\x20itself'+'\x20will\x20have'+'\x20no\x20effect');let _0x333b22,_0x424be3,_0x3ef968,_0x12b500;_0x992511 instanceof re?(_0x333b22=_0x992511['x'],_0x424be3=_0x992511['y'],_0x3ef968=_0x992511['z'],_0x12b500=_0x992511['w']):(_0x333b22=_0x992511[-0x1e17+0xd*0x18a+0x1d*0x59],_0x424be3=_0x992511[-0x16c6+0x1adc*0x1+-0xb*0x5f],_0x3ef968=_0x992511[0x8*-0x31d+0x1459+-0x7*-0xa7],_0x12b500=_0x992511[-0x821+-0x1df3+0x2617]),!(_0x333b22===this['_rect']['x']&&_0x424be3===this['_rect']['y']&&_0x3ef968===this['_rect']['z']&&_0x12b500===this['_rect']['w'])&&(this['_rect']['set'](_0x333b22,_0x424be3,_0x3ef968,_0x12b500),this['_renderabl'+'e']['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(-0x1*-0x952+0x3*0x5ae+-0xf1*0x1c):this['_updateMes'+'h'](this['_renderabl'+'e']['mesh'])));}get['rect'](){return this['_rect'];}['_removeMat'+'erialAsset'+'Events'](){if(this['_materialA'+'sset']){const _0x3500ff=this['_system']['app']['assets'];_0x3500ff['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this);const _0x2b4c6c=_0x3500ff['get'](this['_materialA'+'sset']);_0x2b4c6c&&(_0x2b4c6c['off']('load',this['_onMateria'+'lLoad'],this),_0x2b4c6c['off']('change',this['_onMateria'+'lChange'],this),_0x2b4c6c['off']('remove',this['_onMateria'+'lRemove'],this));}}set['material'](_0x5291f7){if(this['_material']!==_0x5291f7){if(!_0x5291f7){const _0x4c0e7d=this['_element']['_isScreenS'+'pace']();this['mask']?_0x5291f7=_0x4c0e7d?this['_system']['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']:this['_system']['defaultIma'+'geMaskMate'+'rial']:_0x5291f7=_0x4c0e7d?this['_system']['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']:this['_system']['defaultIma'+'geMaterial'];}if(this['_material']=_0x5291f7,this['_materialA'+'sset']){const _0x51fe35=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);(!_0x51fe35||_0x51fe35['resource']!==_0x5291f7)&&(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=null);}_0x5291f7&&(this['_renderabl'+'e']['setMateria'+'l'](_0x5291f7),this['_hasUserMa'+'terial']()?(this['_renderabl'+'e']['deletePara'+'meter']('material_o'+'pacity'),this['_renderabl'+'e']['deletePara'+'meter']('material_e'+'missive')):(this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a'])));}}get['material'](){return this['_material'];}set['materialAs'+'set'](_0x34a9b5){const _0x3e5c43=this['_system']['app']['assets'];let _0x1893ef=_0x34a9b5;if(_0x34a9b5 instanceof pe&&(_0x1893ef=_0x34a9b5['id']),this['_materialA'+'sset']!==_0x1893ef){if(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=_0x1893ef,this['_materialA'+'sset']){const _0x5899a9=_0x3e5c43['get'](this['_materialA'+'sset']);_0x5899a9?this['_bindMater'+'ialAsset'](_0x5899a9):(this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x1893ef,_0x3e5c43['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this));}else this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x1893ef;}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['texture'](_0x569162){if(this['_texture']!==_0x569162){if(this['_textureAs'+'set']){const _0xa8778=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0xa8778&&_0xa8778['resource']!==_0x569162&&(this['textureAss'+'et']=null);}if(this['_texture']=_0x569162,_0x569162){this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null),this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_texture']),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a']);const _0x10da36=this['_texture']['width']/this['_texture']['height'];_0x10da36!==this['_targetAsp'+'ectRatio']&&(this['_targetAsp'+'ectRatio']=_0x10da36,this['_element']['fitMode']!==th&&this['refreshMes'+'h']());}else this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'),this['_targetAsp'+'ectRatio']=-(-0x66a+0xda5+-0x1*0x73a),this['_element']['fitMode']!==th&&this['refreshMes'+'h']();}}get['texture'](){return this['_texture'];}set['textureAss'+'et'](_0x51952c){const _0x24c850=this['_system']['app']['assets'];let _0x62853a=_0x51952c;if(_0x51952c instanceof pe&&(_0x62853a=_0x51952c['id']),this['_textureAs'+'set']!==_0x62853a){if(this['_textureAs'+'set']){_0x24c850['off']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this);const _0x5b6009=_0x24c850['get'](this['_textureAs'+'set']);_0x5b6009&&(_0x5b6009['off']('load',this['_onTexture'+'Load'],this),_0x5b6009['off']('change',this['_onTexture'+'Change'],this),_0x5b6009['off']('remove',this['_onTexture'+'Remove'],this));}if(this['_textureAs'+'set']=_0x62853a,this['_textureAs'+'set']){const _0x30a2f8=_0x24c850['get'](this['_textureAs'+'set']);_0x30a2f8?this['_bindTextu'+'reAsset'](_0x30a2f8):(this['texture']=null,_0x24c850['on']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this));}else this['texture']=null;}}get['textureAss'+'et'](){return this['_textureAs'+'set'];}set['spriteAsse'+'t'](_0x5d4a9d){const _0x38e545=this['_system']['app']['assets'];let _0x21e87c=_0x5d4a9d;if(_0x5d4a9d instanceof pe&&(_0x21e87c=_0x5d4a9d['id']),this['_spriteAss'+'et']!==_0x21e87c){if(this['_spriteAss'+'et']){_0x38e545['off']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this);const _0x10f6df=_0x38e545['get'](this['_spriteAss'+'et']);_0x10f6df&&this['_unbindSpr'+'iteAsset'](_0x10f6df);}if(this['_spriteAss'+'et']=_0x21e87c,this['_spriteAss'+'et']){const _0x47adfa=_0x38e545['get'](this['_spriteAss'+'et']);_0x47adfa?this['_bindSprit'+'eAsset'](_0x47adfa):(this['sprite']=null,_0x38e545['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}this['_element']&&this['_element']['fire']('set:sprite'+'Asset',_0x21e87c);}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['sprite'](_0x5efbb4){if(this['_sprite']!==_0x5efbb4){if(this['_sprite']&&this['_unbindSpr'+'ite'](this['_sprite']),this['_spriteAss'+'et']){const _0x123747=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x123747&&_0x123747['resource']!==_0x5efbb4&&(this['spriteAsse'+'t']=null);}this['_sprite']=_0x5efbb4,this['_sprite']&&(this['_bindSprit'+'e'](this['_sprite']),this['_textureAs'+'set']&&(this['textureAss'+'et']=null)),this['_sprite']&&this['_sprite']['atlas']&&this['_sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap')),this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],-0x81f+-0x45e+0xc7d,this['_sprite']['frameKeys']['length']-(0x2491+-0x1bda+-0x8b6))),this['_updateSpr'+'ite']();}}get['sprite'](){return this['_sprite'];}set['spriteFram'+'e'](_0x1447dd){const _0x4eb590=this['_spriteFra'+'me'];this['_sprite']?this['_spriteFra'+'me']=Y['clamp'](_0x1447dd,0x812+0x3*0x62b+-0x1a93,this['_sprite']['frameKeys']['length']-(0x1*0x18f1+-0xffe+-0x8f2*0x1)):this['_spriteFra'+'me']=_0x1447dd,this['_spriteFra'+'me']!==_0x4eb590&&this['_updateSpr'+'ite'](),this['_element']&&this['_element']['fire']('set:sprite'+'Frame',_0x1447dd);}get['spriteFram'+'e'](){return this['_spriteFra'+'me'];}set['mesh'](_0x45cb82){this['_renderabl'+'e']['setMesh'](_0x45cb82),this['_defaultMe'+'sh']===_0x45cb82?this['_renderabl'+'e']['setAabbFun'+'c'](null):this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']);}get['mesh'](){return this['_renderabl'+'e']['mesh'];}set['mask'](_0x2f6f16){this['_mask']!==_0x2f6f16&&(this['_mask']=_0x2f6f16,this['_toggleMas'+'k']());}get['mask'](){return this['_mask'];}set['pixelsPerU'+'nit'](_0x5d4ce3){this['_pixelsPer'+'Unit']!==_0x5d4ce3&&(this['_pixelsPer'+'Unit']=_0x5d4ce3,this['_sprite']&&(this['_sprite']['renderMode']===Pt||this['_sprite']['renderMode']===Mt)&&this['_updateSpr'+'ite']());}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}get['aabb'](){return this['_renderabl'+'e']['meshInstan'+'ce']?this['_renderabl'+'e']['meshInstan'+'ce']['aabb']:null;}}class hR extends me{constructor(_0x436a83){super(),this['_app']=_0x436a83,_0x436a83['i18n']['on'](wa['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['_autoLoad']=!(-0x183e+0x7*-0x31a+0x2df5),this['_disableLo'+'calization']=!(-0x1c58*0x1+0x1*-0x1bd7+0x3830),this['_defaultAs'+'set']=null,this['_localized'+'Asset']=null;}set['defaultAss'+'et'](_0x4fe424){const _0x1c4078=_0x4fe424 instanceof pe?_0x4fe424['id']:_0x4fe424;this['_defaultAs'+'set']!==_0x1c4078&&(this['_defaultAs'+'set']&&this['_unbindDef'+'aultAsset'](),this['_defaultAs'+'set']=_0x1c4078,this['_defaultAs'+'set']&&this['_bindDefau'+'ltAsset'](),this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['defaultAss'+'et'](){return this['_defaultAs'+'set'];}set['localizedA'+'sset'](_0x47dd13){const _0x5ab3b1=_0x47dd13 instanceof pe?_0x47dd13['id']:_0x47dd13;this['_localized'+'Asset']!==_0x5ab3b1&&(this['_localized'+'Asset']&&(this['_app']['assets']['off']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this),this['_unbindLoc'+'alizedAsse'+'t']()),this['_localized'+'Asset']=_0x5ab3b1,this['_localized'+'Asset']&&(this['_app']['assets']['get'](this['_localized'+'Asset'])?this['_bindLocal'+'izedAsset']():this['_app']['assets']['once']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this)));}get['localizedA'+'sset'](){return this['_localized'+'Asset'];}set['autoLoad'](_0x4feff4){this['_autoLoad']!==_0x4feff4&&(this['_autoLoad']=_0x4feff4,this['_autoLoad']&&this['_localized'+'Asset']&&(this['_unbindLoc'+'alizedAsse'+'t'](),this['_bindLocal'+'izedAsset']()));}get['autoLoad'](){return this['_autoLoad'];}set['disableLoc'+'alization'](_0x4e0ab0){this['_disableLo'+'calization']!==_0x4e0ab0&&(this['_disableLo'+'calization']=_0x4e0ab0,this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['disableLoc'+'alization'](){return this['_disableLo'+'calization'];}['_bindDefau'+'ltAsset'](){const _0x424ef3=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x424ef3?this['_onDefault'+'AssetAdd'](_0x424ef3):this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);}['_unbindDef'+'aultAsset'](){if(!this['_defaultAs'+'set'])return;this['_app']['assets']['off']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);const _0x18de2e=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x18de2e&&(_0x18de2e['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x18de2e['off']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x18de2e['off']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetAdd'](_0x1ac8d9){this['_defaultAs'+'set']===_0x1ac8d9['id']&&(_0x1ac8d9['on']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x1ac8d9['on']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x1ac8d9['once']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetRemov'+'e'](_0x48e2b3){this['_defaultAs'+'set']===_0x48e2b3['id']&&(_0x48e2b3['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x48e2b3['off']('remove:loc'+'alized',this['_onLocaleA'+'dd'],this),this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this));}['_bindLocal'+'izedAsset'](){if(!this['_autoLoad'])return;const _0x2b49a9=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x2b49a9&&(_0x2b49a9['on']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x2b49a9['on']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x2b49a9['on']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this),_0x2b49a9['resource']?this['_onLocaliz'+'edAssetLoa'+'d'](_0x2b49a9):this['_app']['assets']['load'](_0x2b49a9));}['_unbindLoc'+'alizedAsse'+'t'](){const _0x436e65=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x436e65&&(_0x436e65['off']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x436e65['off']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x436e65['off']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this));}['_onLocaliz'+'edAssetAdd'](_0x3c3ab5){this['_localized'+'Asset']===_0x3c3ab5['id']&&this['_bindLocal'+'izedAsset']();}['_onLocaliz'+'edAssetLoa'+'d'](_0x45f4c8){this['fire']('load',_0x45f4c8);}['_onLocaliz'+'edAssetCha'+'nge'](_0x541c4c,_0x19cf34,_0x5dcdbc,_0x3301ae){this['fire']('change',_0x541c4c,_0x19cf34,_0x5dcdbc,_0x3301ae);}['_onLocaliz'+'edAssetRem'+'ove'](_0x8e7973){this['_localized'+'Asset']===_0x8e7973['id']&&(this['localizedA'+'sset']=this['_defaultAs'+'set']),this['fire']('remove',_0x8e7973);}['_onLocaleA'+'dd'](_0x2ec5a2,_0x59f5d2){this['_app']['i18n']['locale']===_0x2ec5a2&&this['_onSetLoca'+'le'](_0x2ec5a2);}['_onLocaleR'+'emove'](_0x4dd6b9,_0x2581d0){this['_app']['i18n']['locale']===_0x4dd6b9&&this['_onSetLoca'+'le'](_0x4dd6b9);}['_onSetLoca'+'le'](_0xd54ea7){if(!this['_defaultAs'+'set']){this['localizedA'+'sset']=null;return;}const _0x5d014b=this['_app']['assets']['get'](this['_defaultAs'+'set']);if(!_0x5d014b||this['_disableLo'+'calization']){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}const _0x421ad6=_0x5d014b['getLocaliz'+'edAssetId'](_0xd54ea7);if(!_0x421ad6){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}this['localizedA'+'sset']=_0x421ad6;}['destroy'](){this['defaultAss'+'et']=null,this['_app']['i18n']['off'](wa['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['off']();}}const Rh='msdf',dR='bitmap',Mo=0x13*-0x1e7+-0x1*-0xda+0x234b,an=0x47*0x28+-0x54b+-0x5cc,Du=-0xba*0x17+0x3*0x6b1+-0x35b,Zv=0xba8*-0x1+0x1d4f*-0x1+0x28fa,Iu=-0xfc4*0x1+0x7*-0x377+0x115*0x25,Lu=-0x36+0x1452+0x25*-0x8b,Ru=-0x99b+-0x16*-0xc1+-0x6f5,Ou=0x755*-0x4+-0x6*0x329+0x3051,Xg=0x56*-0x62+-0x28b*-0x7+0xf27,fR='\x20\x09\x0a\x0d\x0b\x0c',uR=/[\w|/]/;class pR{constructor(_0x2fb9d2){this['_symbols']=_0x2fb9d2,this['_index']=-0x5*-0x692+-0x256a*0x1+0x2*0x248,this['_last']=0x3d2+0xc73*-0x2+0x1514,this['_cur']=this['_symbols']['length']>0x5*0x4ee+0x7*-0x1af+-0x59*0x25?this['_symbols'][0xac*-0x20+-0xb*-0x77+-0x1063*-0x1]:null,this['_buf']=[],this['_mode']='text',this['_error']=null;}['read'](){let _0x2bb837=this['_read']();for(;_0x2bb837===Xg;)_0x2bb837=this['_read']();return _0x2bb837!==Mo&&_0x2bb837!==an&&(this['_last']=this['_index']),_0x2bb837;}['buf'](){return this['_buf'];}['last'](){return this['_last'];}['error'](){return this['_error'];}['debugPrint'](){const _0x1958e0=['EOF','ERROR','TEXT','OPEN_BRACK'+'ET','CLOSE_BRAC'+'KET','EQUALS','STRING','IDENTIFIER','WHITESPACE'];let _0x3df474=this['read'](),_0x2d7ce7='';for(;_0x2d7ce7+=(_0x2d7ce7['length']>-0x8cd*-0x1+0x10d7+-0x19a4?'\x0a':'')+_0x1958e0[_0x3df474]+'\x20\x27'+this['buf']()['join']('')+'\x27',!(_0x3df474===Mo||_0x3df474===an);)_0x3df474=this['read']();return _0x2d7ce7;}['_read'](){return this['_buf']=[],this['_eof']()?Mo:this['_mode']==='text'?this['_text']():this['_tag']();}['_text'](){for(;;)switch(this['_cur']){case null:return this['_buf']['length']>-0x1484+-0x1*-0x739+-0xd4b*-0x1?Du:Mo;case'[':return this['_mode']='tag',this['_buf']['length']>-0x2051+-0x35b*0xb+0x2*0x229d?Du:this['_tag']();case'\x5c':switch(this['_next'](),this['_cur']){case'[':this['_store']();break;default:this['_output']('\x5c');break;}break;default:this['_store']();break;}}['_tag'](){switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20tag',an;case'[':return this['_store'](),Zv;case']':return this['_store'](),this['_mode']='text',Iu;case'=':return this['_store'](),Lu;case'\x20':case'\x09':case'\x0a':case'\x0d':case'\x0b':case'\x0c':return this['_whitespac'+'e']();case'\x22':return this['_string']();default:return this['_isIdentif'+'ierSymbol'](this['_cur'])?this['_identifie'+'r']():(this['_error']='unrecogniz'+'ed\x20charact'+'er',an);}}['_whitespac'+'e'](){for(this['_store']();fR['indexOf'](this['_cur'])!==-(0xaea+0xb09+-0x15f2);)this['_store']();return Xg;}['_string'](){for(this['_next']();;)switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20string',an;case'\x22':return this['_next'](),Ru;default:this['_store']();break;}}['_identifie'+'r'](){for(this['_store']();this['_cur']!==null&&this['_isIdentif'+'ierSymbol'](this['_cur']);)this['_store']();return Ou;}['_isIdentif'+'ierSymbol'](_0x38986d){return _0x38986d['length']===0x3*-0x2f5+-0x1*-0x23f+0x1*0x6a1&&_0x38986d['match'](uR)!==null;}['_eof'](){return this['_cur']===null;}['_next'](){return this['_eof']()||(this['_index']++,this['_cur']=this['_index']<this['_symbols']['length']?this['_symbols'][this['_index']]:null),this['_cur'];}['_store'](){return this['_buf']['push'](this['_cur']),this['_next']();}['_output'](_0xd8a586){this['_buf']['push'](_0xd8a586);}}class mR{constructor(_0xd4b35d){this['_scanner']=new pR(_0xd4b35d),this['_error']=null;}['parse'](_0x44933f,_0x2f5e59){for(;;)switch(this['_scanner']['read']()){case Mo:return!(0x7*-0x1a+0x2a*0xdd+-0x238c);case an:return!(0x27c+-0xd5*-0xb+-0x5d1*0x2);case Du:Array['prototype']['push']['apply'](_0x44933f,this['_scanner']['buf']());break;case Zv:if(!this['_parseTag'](_0x44933f,_0x2f5e59))return!(0x26*0xa9+0x9b8+-0x97*0x3b);break;default:return!(0x1da0+-0x2*0x1264+0xd*0x8d);}}['error'](){return'Error\x20eval'+'uating\x20mar'+'kup\x20at\x20#'+this['_scanner']['last']()['toString']()+'\x20('+(this['_scanner']['error']()||this['_error'])+')';}['_parseTag'](_0x44cd82,_0x267c96){let _0x3ba7e7=this['_scanner']['read']();if(_0x3ba7e7!==Ou)return this['_error']='expected\x20i'+'dentifier',!(0x1*0xa36+0x6a5+-0x2*0x86d);const _0x435eab=this['_scanner']['buf']()['join']('');if(_0x435eab[-0x143a+-0x703+0x16f*0x13]==='/'){for(let _0x6197b9=_0x267c96['length']-(0x2526+0x14*-0x1df+0x47);_0x6197b9>=0x1*0xb17+0x8ca+0x13e1*-0x1;--_0x6197b9)if(_0x435eab==='/'+_0x267c96[_0x6197b9]['name']&&_0x267c96[_0x6197b9]['end']===null)return _0x267c96[_0x6197b9]['end']=_0x44cd82['length'],_0x3ba7e7=this['_scanner']['read'](),_0x3ba7e7!==Iu?(this['_error']='expected\x20c'+'lose\x20brack'+'et',!(-0x2*0xc8+0x517+-0x386*0x1)):!(0x1+-0x5*-0x78b+-0x25b8);return this['_error']='failed\x20to\x20'+'find\x20match'+'ing\x20tag',!(0x255*-0xa+-0x1536+-0xd*-0x36d);}const _0x17a756={'name':_0x435eab,'value':null,'attributes':{},'start':_0x44cd82['length'],'end':null};if(_0x3ba7e7=this['_scanner']['read'](),_0x3ba7e7===Lu){if(_0x3ba7e7=this['_scanner']['read'](),_0x3ba7e7!==Ru)return this['_error']='expected\x20s'+'tring',!(0x51*0x1+-0x18b2+0x1*0x1862);_0x17a756['value']=this['_scanner']['buf']()['join'](''),_0x3ba7e7=this['_scanner']['read']();}for(;;){switch(_0x3ba7e7){case Iu:return _0x267c96['push'](_0x17a756),!(0x17f4+-0x4*-0x79+-0x19d8);case Ou:{const _0x2230cb=this['_scanner']['buf']()['join']('');if(_0x3ba7e7=this['_scanner']['read'](),_0x3ba7e7!==Lu)return this['_error']='expected\x20e'+'quals',!(-0x13*0x1d8+0x15de*-0x1+0x38e7*0x1);if(_0x3ba7e7=this['_scanner']['read'](),_0x3ba7e7!==Ru)return this['_error']='expected\x20s'+'tring',!(0x1*-0x24fa+0x4*-0x853+0x4647);const _0x1467e5=this['_scanner']['buf']()['join']('');_0x17a756['attributes'][_0x2230cb]=_0x1467e5;break;}default:return this['_error']='expected\x20c'+'lose\x20brack'+'et\x20or\x20iden'+'tifier',!(0x4d3*-0x5+-0x28*-0xa4+-0x180);}_0x3ba7e7=this['_scanner']['read']();}}}function Qv(_0x54a437,_0x760f44){for(const _0x4219a4 in _0x760f44){if(!_0x760f44['hasOwnProp'+'erty'](_0x4219a4))continue;const _0x251bdf=_0x760f44[_0x4219a4];_0x251bdf instanceof Object?(_0x54a437['hasOwnProp'+'erty'](_0x4219a4)||(_0x54a437[_0x4219a4]={}),Qv(_0x54a437[_0x4219a4],_0x760f44[_0x4219a4])):_0x54a437[_0x4219a4]=_0x251bdf;}}function _R(_0x72408f){if(_0x72408f['length']===0x1db*-0x13+-0x27*-0x1c+-0x1*-0x1efd)return null;const _0x39a86b={};for(let _0x232402=-0x2031+-0x103a*0x1+0x306b;_0x232402<_0x72408f['length'];++_0x232402){const _0x130af1=_0x72408f[_0x232402],_0x5cc7ce={};_0x5cc7ce[_0x130af1['name']]={'value':_0x130af1['value'],'attributes':_0x130af1['attributes']},Qv(_0x39a86b,_0x5cc7ce);}return _0x39a86b;}function gR(_0x2fff7c,_0x346cc9){if(_0x2fff7c['length']===0x8a4+-0x1aea+0x1246)return null;const _0x18e6b6={};for(let _0x135a0a=0x1604+0x8dd*-0x1+0x1e1*-0x7;_0x135a0a<_0x2fff7c['length'];++_0x135a0a){const _0x4e586a=_0x2fff7c[_0x135a0a];_0x18e6b6['hasOwnProp'+'erty'](_0x4e586a['start'])?_0x18e6b6[_0x4e586a['start']]['open']===null?_0x18e6b6[_0x4e586a['start']]['open']=[_0x4e586a]:_0x18e6b6[_0x4e586a['start']]['open']['push'](_0x4e586a):_0x18e6b6[_0x4e586a['start']]={'open':[_0x4e586a],'close':null},_0x18e6b6['hasOwnProp'+'erty'](_0x4e586a['end'])?_0x18e6b6[_0x4e586a['end']]['close']===null?_0x18e6b6[_0x4e586a['end']]['close']=[_0x4e586a]:_0x18e6b6[_0x4e586a['end']]['close']['push'](_0x4e586a):_0x18e6b6[_0x4e586a['end']]={'open':null,'close':[_0x4e586a]};}let _0x277ff5=[];function _0x365d6b(_0x48e53a){_0x277ff5=_0x277ff5['filter'](_0x5cb81b=>_0x48e53a['find'](_0x4746f3=>_0x4746f3===_0x5cb81b)===void(0x146e+0x401+-0x186f));}function _0xa42cc0(_0x1d2317){for(let _0x4fe79e=0x9d9+0x17d6+-0x21af;_0x4fe79e<_0x1d2317['length'];++_0x4fe79e)_0x277ff5['push'](_0x1d2317[_0x4fe79e]);}const _0x3cdf5b=Object['keys'](_0x18e6b6)['sort']((_0x3cac79,_0x2b8d1c)=>_0x3cac79-_0x2b8d1c),_0x355d66=[];for(let _0x30e73d=-0xb79+0x4*-0x318+-0xf*-0x197;_0x30e73d<_0x3cdf5b['length'];++_0x30e73d){const _0x455251=_0x18e6b6[_0x3cdf5b[_0x30e73d]];_0x455251['close']!==null&&_0x365d6b(_0x455251['close']),_0x455251['open']!==null&&_0xa42cc0(_0x455251['open']),_0x355d66['push']({'start':_0x3cdf5b[_0x30e73d],'tags':_R(_0x277ff5)});}const _0x56671a=[];let _0x43689f=null;for(let _0x28a98f=-0x1b52*0x1+0x7*-0x64+-0xf07*-0x2;_0x28a98f<_0x355d66['length'];++_0x28a98f){const _0x4f2486=_0x355d66[_0x28a98f];for(;_0x56671a['length']<_0x4f2486['start'];)_0x56671a['push'](_0x43689f?_0x43689f['tags']:null);_0x43689f=_0x4f2486;}for(;_0x56671a['length']<_0x346cc9;)_0x56671a['push'](null);return _0x56671a;}function SR(_0x4397be){const _0xc81352=new mR(_0x4397be),_0x427f6e=[],_0x29e556=[];if(!_0xc81352['parse'](_0x427f6e,_0x29e556))return console['warn'](_0xc81352['error']()),{'symbols':_0x4397be,'tags':null};const _0x4abbf3=_0x29e556['find'](_0x21fc90=>_0x21fc90['end']===null);if(_0x4abbf3)return console['warn']('Markup\x20err'+'or:\x20found\x20'+'unclosed\x20t'+'ag=\x27'+_0x4abbf3['name']+'\x27'),{'symbols':_0x4397be,'tags':null};const _0x3a3de3=gR(_0x29e556,_0x427f6e['length']);return{'symbols':_0x427f6e,'tags':_0x3a3de3};}class yR{static['evaluate'](_0x238df7){return SR(_0x238df7);}}class vR{constructor(){this['count']=-0x1e0a+-0xd4*-0xd+-0x2*-0x9a3,this['quad']=0x2093+0xf99+0x2*-0x1816,this['lines']={},this['positions']=[],this['normals']=[],this['uvs']=[],this['colors']=[],this['indices']=[],this['outlines']=[],this['shadows']=[],this['meshInstan'+'ce']=null;}}function xR(_0x44bbe0,_0x2e53bb){const _0x54dfd1=new Ge(_0x44bbe0);return _0x54dfd1['setPositio'+'ns'](_0x2e53bb['positions']),_0x54dfd1['setNormals'](_0x2e53bb['normals']),_0x54dfd1['setColors3'+'2'](_0x2e53bb['colors']),_0x54dfd1['setUvs'](0xba5*0x1+0x22fd+-0x2ea2,_0x2e53bb['uvs']),_0x54dfd1['setIndices'](_0x2e53bb['indices']),_0x54dfd1['setVertexS'+'tream'](Ko,_0x2e53bb['outlines'],-0x281*-0xd+-0x12c3+-0xdc7*0x1,void(0x19e5*-0x1+0x1*-0x611+0x1*0x1ff6),Ve,!(-0x1a52+-0x81*-0x11+-0x1*-0x11c2)),_0x54dfd1['setVertexS'+'tream'](Zo,_0x2e53bb['shadows'],0x136b*-0x1+0x21f2+0x2*-0x742,void(0x200a+0x1e26+0xa*-0x638),Ve,!(0x3fd+0x1*-0x4f7+0xfb)),_0x54dfd1['update'](),_0x54dfd1;}const qg=/^[\r\n]$/,TR=/^[ \t]$/,jg=/^[ \t\-]|\u200b$/,wR=/^[a-z0-9]$/i,Yg=/^[\u1100-\u11ff]|[\u3000-\u9fff\ua960-\ua97f]|[\uac00-\ud7ff]$/,ER=/^[]$/,bR=['','','','','','','','','','','','',''],AR={'width':0x0,'height':0x0,'xadvance':0x0,'xoffset':0x0,'yoffset':0x0},Kg=new ie(),CR=new J(),We=new ie();class PR{constructor(_0x38fbb4){this['_element']=_0x38fbb4,this['_system']=_0x38fbb4['system'],this['_entity']=_0x38fbb4['entity'],this['_text']='',this['_symbols']=[],this['_colorPale'+'tte']=[],this['_outlinePa'+'lette']=[],this['_shadowPal'+'ette']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null,this['_i18nKey']=null,this['_fontAsset']=new hR(this['_system']['app']),this['_fontAsset']['disableLoc'+'alization']=!(0x1e6d*0x1+-0x3*0xa7f+0x110),this['_fontAsset']['on']('load',this['_onFontLoa'+'d'],this),this['_fontAsset']['on']('change',this['_onFontCha'+'nge'],this),this['_fontAsset']['on']('remove',this['_onFontRem'+'ove'],this),this['_font']=null,this['_color']=new ie(-0x23*-0xfb+-0x9ba+-0x1896,0x1465+-0xa9c+-0x139*0x8,-0x13c3+0xed3+0x4f1,0x92b+-0x21ce+0x53*0x4c),this['_colorUnif'+'orm']=new Float32Array(0x9c0+0x3b*-0x17+-0x470),this['_spacing']=-0x26e4+-0xa52+0x3137,this['_fontSize']=-0x2d*0xb3+-0x285+-0x94*-0x3b,this['_fontMinY']=-0xcb9*-0x1+0x19*-0x141+0x12a0,this['_fontMaxY']=-0xa7a+0x3*0xce+0x10*0x81,this['_originalF'+'ontSize']=0x89*-0x19+-0x56*0x73+0x9*0x5cb,this['_maxFontSi'+'ze']=0x599+-0xf5e+0x95*0x11,this['_minFontSi'+'ze']=-0x178f+-0x827*-0x3+-0x6*0x25,this['_autoFitWi'+'dth']=!(-0x1dcc+0x24db+0x12d*-0x6),this['_autoFitHe'+'ight']=!(0x16e9+0x1073+0x9b*-0x41),this['_maxLines']=-(0x1a7e+0x23a+-0x1cb7),this['_lineHeigh'+'t']=0x17cf+0x155a+-0x2d09,this['_scaledLin'+'eHeight']=0x223d+-0x129a*-0x2+-0x4751,this['_wrapLines']=!(-0x1bf8+0x1a79+0x2*0xc0),this['_drawOrder']=0x1*0x65a+0xa0c+-0x1066*0x1,this['_alignment']=new J(-0x127e+0x71*-0x36+0x2a54+0.5,0x7*0x2e7+0xd72+-0x21c3+0.5),this['_autoWidth']=!(0xe2a+-0x5f*-0x25+0xc1*-0x25),this['_autoHeigh'+'t']=!(-0x3c7*-0x6+0x2010+0x579*-0xa),this['width']=-0x250f+0x1f5e+0x5b1,this['height']=-0x2*-0xe86+-0x4*0x8c8+0x614,this['_node']=new Ie(),this['_model']=new sr(),this['_model']['graph']=this['_node'],this['_entity']['addChild'](this['_node']),this['_meshInfo']=[],this['_material']=null,this['_aabbDirty']=!(0x25b*0xb+0xa13*0x2+-0x2e0f*0x1),this['_aabb']=new De(),this['_noResize']=!(-0xb36+0x3*0x539+-0x4c*0xf),this['_currentMa'+'terialType']=null,this['_maskedMat'+'erialSrc']=null,this['_rtlReorde'+'r']=!(-0x36a*0x5+-0x2028+0x313b),this['_unicodeCo'+'nverter']=!(0x1023+0xb24+-0x1b46),this['_rtl']=!(0x40b*0x2+-0xd*-0x2fb+0x1b*-0x1bc),this['_outlineCo'+'lor']=new ie(0xcb0+-0x26fd+-0x1*-0x1a4d,0xd9f+-0x12e2*-0x2+0xa47*-0x5,-0xd*-0xd3+0x1cc9+-0x2780,0xf47+-0x6d*0x23+-0x5*0x13),this['_outlineCo'+'lorUniform']=new Float32Array(0x1d97+-0x1dbc+0x29),this['_outlineTh'+'icknessSca'+'le']=-0x169*0xb+-0x936+0x18b9+0.2,this['_outlineTh'+'ickness']=-0x2410+-0x257c+-0x12*-0x416,this['_shadowCol'+'or']=new ie(-0x3*-0x778+0x3*-0x9d3+0x25b*0x3,0x6f*0x12+-0x270f*0x1+0x1f41,0x7be+0xac*0x17+-0x1732,-0x1*-0x1678+-0x1ac6+0x44f*0x1),this['_shadowCol'+'orUniform']=new Float32Array(-0x1428+0x1*-0x199+0x15c5),this['_shadowOff'+'setScale']=0x1*0xce+0x17*-0x192+0x2350+0.005,this['_shadowOff'+'set']=new J(-0x58b+-0x823*-0x1+-0x8*0x53,-0xd3f+-0x194d+0x1346*0x2),this['_shadowOff'+'setUniform']=new Float32Array(-0x11db+0x1*-0xdb+-0x12b8*-0x1),this['_enableMar'+'kup']=!(0x802*-0x4+0x1*0x243a+-0x431),this['_onScreenC'+'hange'](this['_element']['screen']),_0x38fbb4['on']('resize',this['_onParentR'+'esize'],this),_0x38fbb4['on']('set:screen',this['_onScreenC'+'hange'],this),_0x38fbb4['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),_0x38fbb4['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),_0x38fbb4['on']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['on'](wa['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['on']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['on']('data:remov'+'e',this['_onLocaliz'+'ationData'],this),this['_rangeStar'+'t']=0xed1+0x1*0xcbc+-0x1b8d,this['_rangeEnd']=0x57*0x5e+0x5e4*-0x6+-0xae*-0x5;}['destroy'](){this['_setMateri'+'al'](null),this['_model']&&(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),this['_model']['destroy'](),this['_model']=null),this['_fontAsset']['destroy'](),this['font']=null,this['_element']['off']('resize',this['_onParentR'+'esize'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['off'](wa['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['off']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['off']('data:remov'+'e',this['_onLocaliz'+'ationData'],this);}['_onParentR'+'esize'](_0x203293,_0x3bdf7e){this['_noResize']||this['_font']&&this['_updateTex'+'t']();}['_onScreenC'+'hange'](_0x496013){_0x496013?this['_updateMat'+'erial'](_0x496013['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(0x1a82+-0x146*-0x18+-0x3911));}['_onScreenS'+'paceChange'](_0x4eeb6c){this['_updateMat'+'erial'](_0x4eeb6c);}['_onDrawOrd'+'erChange'](_0x1c3512){if(this['_drawOrder']=_0x1c3512,this['_model']){for(let _0x520bad=-0x1d41+0x198b*-0x1+0xdb3*0x4,_0x21e4c0=this['_model']['meshInstan'+'ces']['length'];_0x520bad<_0x21e4c0;_0x520bad++)this['_model']['meshInstan'+'ces'][_0x520bad]['drawOrder']=_0x1c3512;}}['_onPivotCh'+'ange'](_0x2f32cb){this['_font']&&this['_updateTex'+'t']();}['_onLocaleS'+'et'](_0x2e1a7c){if(this['_i18nKey']){if(this['fontAsset']){const _0x31003a=this['_system']['app']['assets']['get'](this['fontAsset']);(!_0x31003a||!_0x31003a['resource']||_0x31003a['resource']!==this['_font'])&&(this['font']=null);}this['_resetLoca'+'lizedText']();}}['_onLocaliz'+'ationData'](_0x7007d9,_0x1c9fdb){this['_i18nKey']&&_0x1c9fdb[this['_i18nKey']]&&this['_resetLoca'+'lizedText']();}['_resetLoca'+'lizedText'](){this['_setText'](this['_system']['app']['i18n']['getText'](this['_i18nKey']));}['_setText'](_0x5b7b34){if(this['unicodeCon'+'verter']){const _0x4b75cd=this['_system']['getUnicode'+'Converter']();_0x4b75cd?_0x5b7b34=_0x4b75cd(_0x5b7b34):console['warn']('Element\x20cr'+'eated\x20with'+'\x20unicodeCo'+'nverter\x20op'+'tion\x20but\x20n'+'o\x20unicodeC'+'onverter\x20f'+'unction\x20re'+'gistered');}this['_text']!==_0x5b7b34&&(this['_font']&&this['_updateTex'+'t'](_0x5b7b34),this['_text']=_0x5b7b34);}['_updateTex'+'t'](_0x30f87f){let _0x36e005;if(_0x30f87f===void(-0x3f*0x2b+-0x1d*-0xa4+-0x7ff)&&(_0x30f87f=this['_text']),this['_symbols']=Hc['getSymbols'](_0x30f87f['normalize']?_0x30f87f['normalize']('NFC'):_0x30f87f),this['_symbols']['length']===0x5a5+-0x1*0x99+-0x2*0x286&&(this['_symbols']=['\x20']),this['_enableMar'+'kup']){const _0x790e2f=yR['evaluate'](this['_symbols']);this['_symbols']=_0x790e2f['symbols'],_0x36e005=_0x790e2f['tags']||[];}if(this['_rtlReorde'+'r']){const _0x5b028a=this['_system']['app']['systems']['element']['getRtlReor'+'der']();if(_0x5b028a){const _0x57c195=_0x5b028a(this['_symbols']);this['_rtl']=_0x57c195['rtl'],this['_symbols']=_0x57c195['mapping']['map'](function(_0x360a4b){return this['_symbols'][_0x360a4b];},this),_0x36e005&&(_0x36e005=_0x57c195['mapping']['map'](_0x36f09c=>_0x36e005[_0x36f09c]));}else console['warn']('Element\x20cr'+'eated\x20with'+'\x20rtlReorde'+'r\x20option\x20b'+'ut\x20no\x20rtlR'+'eorder\x20fun'+'ction\x20regi'+'stered');}else this['_rtl']=!(0xc44+0x18b*0x7+-0x1710);const _0x31f8bd=(_0x1bfe68,_0x28cad7)=>_0x1bfe68['toString'](!(-0x43*0x7d+0x4eb+0x1bcc))['toLowerCas'+'e']()+':'+_0x28cad7['toFixed'](0xb*0x13+-0x1*0x18d1+0xc01*0x2),_0x3df924=(_0xf5d4bf,_0x1a288a)=>_0xf5d4bf['toString'](!(-0x64d*0x6+0x7*-0x4fe+0x123*0x40))['toLowerCas'+'e']()+':'+_0x1a288a['x']['toFixed'](-0x1bba+-0x101f+0x6d*0x67)+':'+_0x1a288a['y']['toFixed'](-0x2*-0x1103+0xa03+-0x2c07);if(_0x36e005){const _0x212af6={},_0x195c6a={},_0x6ca92={};this['_colorPale'+'tte']=[Math['round'](this['_color']['r']*(0x6b6*-0x2+-0x2667+0x1*0x34d2)),Math['round'](this['_color']['g']*(0xfc+-0x744+0x747)),Math['round'](this['_color']['b']*(0x66d*0x1+0x1055*-0x1+0xae7))],this['_outlinePa'+'lette']=[Math['round'](this['_outlineCo'+'lor']['r']*(0x101*-0x26+-0x18ea+0x400f)),Math['round'](this['_outlineCo'+'lor']['g']*(-0x893+0x2327+-0x1995)),Math['round'](this['_outlineCo'+'lor']['b']*(0x174+0x799+-0x80e)),Math['round'](this['_outlineCo'+'lor']['a']*(-0x2b9*-0xe+-0x1796*-0x1+-0x3cb5)),Math['round'](this['_outlineTh'+'ickness']*(-0x205+0xdcd+-0xac9))],this['_shadowPal'+'ette']=[Math['round'](this['_shadowCol'+'or']['r']*(0x4bb*0x7+0xa63*0x1+0x27*-0x117)),Math['round'](this['_shadowCol'+'or']['g']*(-0x1a1*-0x7+0x1*0x1772+-0x1*0x21da)),Math['round'](this['_shadowCol'+'or']['b']*(-0x12bd+0x8b*-0x23+0x26bd)),Math['round'](this['_shadowCol'+'or']['a']*(-0x1ab+0x959+-0x6af*0x1)),Math['round'](this['_shadowOff'+'set']['x']*(0x1951+-0x6c3*-0x2+-0x664*0x6)),Math['round'](this['_shadowOff'+'set']['y']*(-0x1*0x94f+-0x70d+0x10db))],this['_symbolCol'+'ors']=[],this['_symbolOut'+'lineParams']=[],this['_symbolSha'+'dowParams']=[],_0x212af6[this['_color']['toString'](!(0xc72+0x1*0x26dd+-0x334e))['toLowerCas'+'e']()]=0x25*-0xc1+-0x1237*-0x1+0x9ae,_0x195c6a[_0x31f8bd(this['_outlineCo'+'lor'],this['_outlineTh'+'ickness'])]=0x1c19+-0x1f15+0x2fc,_0x6ca92[_0x3df924(this['_shadowCol'+'or'],this['_shadowOff'+'set'])]=-0x9*0x261+-0x1389*0x1+-0x28f2*-0x1;for(let _0x2f5376=-0xe4e+-0x1*0x1a1f+0x286d,_0x436144=this['_symbols']['length'];_0x2f5376<_0x436144;++_0x2f5376){const _0x231bbc=_0x36e005[_0x2f5376];let _0xf1a9db=0xc81+0x2*-0x67f+0x7d;if(_0x231bbc&&_0x231bbc['color']&&_0x231bbc['color']['value']){const _0x258d1b=_0x231bbc['color']['value'];if(_0x258d1b['length']===0x1103+-0x17a6+-0x2*-0x355&&_0x258d1b[0xbca+0xb1+0x47*-0x2d]==='#'){const _0x31258a=_0x258d1b['substring'](-0x1*-0x6bc+-0x26f*0x7+0xa4e)['toLowerCas'+'e']();_0x212af6['hasOwnProp'+'erty'](_0x31258a)?_0xf1a9db=_0x212af6[_0x31258a]:/^[0-9a-f]{6}$/['test'](_0x31258a)&&(_0xf1a9db=this['_colorPale'+'tte']['length']/(0x24c6+-0x3*0x84a+-0xf*0xcb),_0x212af6[_0x31258a]=_0xf1a9db,this['_colorPale'+'tte']['push'](parseInt(_0x31258a['substring'](-0x6*0x2b2+-0x1*0xe0b+-0x7*-0x451,-0x1768+-0x221f+-0xd*-0x46d),-0x2*0x10fe+0x76e+0xd4f*0x2)),this['_colorPale'+'tte']['push'](parseInt(_0x31258a['substring'](0x2*-0xc0b+0x1acf+0x5*-0x8b,0x1b4e+0x1987+-0x34d1),0x2491+0x1f18+-0x4399)),this['_colorPale'+'tte']['push'](parseInt(_0x31258a['substring'](0x1*0x11cd+0x289*0x1+-0x1452,0x21fb+0x45*0x34+0x1*-0x2ff9),0x15a9+-0xf77+-0x622)));}}this['_symbolCol'+'ors']['push'](_0xf1a9db);let _0xa10850=0x166*-0x17+0x585+0x1aa5*0x1;if(_0x231bbc&&_0x231bbc['outline']&&(_0x231bbc['outline']['attributes']['color']||_0x231bbc['outline']['attributes']['thickness'])){let _0x2e4212=_0x231bbc['outline']['attributes']['color']?Kg['fromString'](_0x231bbc['outline']['attributes']['color']):this['_outlineCo'+'lor'],_0x1d03be=Number(_0x231bbc['outline']['attributes']['thickness']);(Number['isNaN'](_0x2e4212['r'])||Number['isNaN'](_0x2e4212['g'])||Number['isNaN'](_0x2e4212['b'])||Number['isNaN'](_0x2e4212['a']))&&(_0x2e4212=this['_outlineCo'+'lor']),Number['isNaN'](_0x1d03be)&&(_0x1d03be=this['_outlineTh'+'ickness']);const _0x485b06=_0x31f8bd(_0x2e4212,_0x1d03be);_0x195c6a['hasOwnProp'+'erty'](_0x485b06)?_0xa10850=_0x195c6a[_0x485b06]:(_0xa10850=this['_outlinePa'+'lette']['length']/(-0x85d+-0x1a*0x115+0x7b*0x4c),_0x195c6a[_0x485b06]=_0xa10850,this['_outlinePa'+'lette']['push'](Math['round'](_0x2e4212['r']*(-0x771+-0x1fb2+0x1*0x2822)),Math['round'](_0x2e4212['g']*(-0x1c30+-0x72*-0x30+0x7cf)),Math['round'](_0x2e4212['b']*(-0x1*0x1e46+0x1505+0xa40)),Math['round'](_0x2e4212['a']*(-0xa4e+-0xf4f*-0x1+-0x402)),Math['round'](_0x1d03be*(0x17f3+0x1f4*-0xc+0x4*0x1f))));}this['_symbolOut'+'lineParams']['push'](_0xa10850);let _0x4a5fd5=-0xc*-0x1f6+-0x1a9c+0x314;if(_0x231bbc&&_0x231bbc['shadow']&&(_0x231bbc['shadow']['attributes']['color']||_0x231bbc['shadow']['attributes']['offset']||_0x231bbc['shadow']['attributes']['offsetX']||_0x231bbc['shadow']['attributes']['offsetY'])){let _0x181107=_0x231bbc['shadow']['attributes']['color']?Kg['fromString'](_0x231bbc['shadow']['attributes']['color']):this['_shadowCol'+'or'];const _0x353cbb=Number(_0x231bbc['shadow']['attributes']['offset']),_0x3304dd=Number(_0x231bbc['shadow']['attributes']['offsetX']),_0xbfb9bc=Number(_0x231bbc['shadow']['attributes']['offsetY']);(Number['isNaN'](_0x181107['r'])||Number['isNaN'](_0x181107['g'])||Number['isNaN'](_0x181107['b'])||Number['isNaN'](_0x181107['a']))&&(_0x181107=this['_shadowCol'+'or']);const _0x5a3495=CR['set'](Number['isNaN'](_0x3304dd)?Number['isNaN'](_0x353cbb)?this['_shadowOff'+'set']['x']:_0x353cbb:_0x3304dd,Number['isNaN'](_0xbfb9bc)?Number['isNaN'](_0x353cbb)?this['_shadowOff'+'set']['y']:_0x353cbb:_0xbfb9bc),_0xf0bdc5=_0x3df924(_0x181107,_0x5a3495);_0x6ca92['hasOwnProp'+'erty'](_0xf0bdc5)?_0x4a5fd5=_0x6ca92[_0xf0bdc5]:(_0x4a5fd5=this['_shadowPal'+'ette']['length']/(0x4*0x34f+0x1b01+-0x2837),_0x6ca92[_0xf0bdc5]=_0x4a5fd5,this['_shadowPal'+'ette']['push'](Math['round'](_0x181107['r']*(0x201e*-0x1+0x23bd+-0x2a0)),Math['round'](_0x181107['g']*(-0x1b72+-0x1*-0x1e16+-0x1*0x1a5)),Math['round'](_0x181107['b']*(-0x1*0x89b+0xadf+0x5*-0x41)),Math['round'](_0x181107['a']*(-0x1d8*0x1+0x1224+-0xf4d)),Math['round'](_0x5a3495['x']*(0x59*0x2f+-0x1d0f+0xd37)),Math['round'](_0x5a3495['y']*(0x1*0xfed+-0x1*-0x1fe7+-0x2f55))));}this['_symbolSha'+'dowParams']['push'](_0x4a5fd5);}}else this['_colorPale'+'tte']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null;this['_updateMat'+'erialEmiss'+'ive'](),this['_updateMat'+'erialOutli'+'ne'](),this['_updateMat'+'erialShado'+'w']();const _0x4e1ef6=this['_calculate'+'CharsPerTe'+'xture']();let _0x1df947=!(0x2*0xe5c+0x2*-0x1+-0x1cb5*0x1);const _0x3c81bc=this['_element'],_0x32b5de=_0x3c81bc['_isScreenS'+'pace'](),_0x433086=_0x3c81bc['_isScreenC'+'ulled'](),_0x312fcc=function(_0x2ce321){return _0x3c81bc['isVisibleF'+'orCamera'](_0x2ce321);};for(let _0x19c5a3=-0x418+0xe62*-0x1+0x2b*0x6e,_0x4257bc=this['_meshInfo']['length'];_0x19c5a3<_0x4257bc;_0x19c5a3++){const _0x3dd28c=_0x4e1ef6[_0x19c5a3]||-0x1b29*-0x1+0x72+-0x1b9b,_0x3a64fc=this['_meshInfo'][_0x19c5a3];if(_0x3a64fc['count']!==_0x3dd28c){if(_0x1df947||(_0x3c81bc['removeMode'+'lFromLayer'+'s'](this['_model']),_0x1df947=!(0x1*-0x11b+0x1*0x26b3+-0x18*0x191)),_0x3a64fc['count']=_0x3dd28c,_0x3a64fc['positions']['length']=_0x3a64fc['normals']['length']=_0x3dd28c*(-0x26ee+0x189d*-0x1+0x3f8e*0x1)*(-0x112f+-0xcae+-0x1de1*-0x1),_0x3a64fc['indices']['length']=_0x3dd28c*(-0x9b9+0x489+0x533)*(-0x77+-0xbff+0xc78),_0x3a64fc['uvs']['length']=_0x3dd28c*(-0x5*0x78e+0x17*0x6f+0x317*0x9)*(-0x22ae+0x347*-0x6+0x365c),_0x3a64fc['colors']['length']=_0x3dd28c*(-0x16c1+0x71*0x46+-0x821)*(-0x1*-0x437+-0x559+0x126),_0x3a64fc['outlines']['length']=_0x3dd28c*(-0x145a+-0x67*-0x2a+0x25*0x18)*(-0x9a4*0x2+0x2*-0xe6d+-0x1a9*-0x1d),_0x3a64fc['shadows']['length']=_0x3dd28c*(-0x1dbb*-0x1+-0x1dc5+0x1*0xe)*(0x246d+-0x39f*0x1+0x68f*-0x5),_0x3a64fc['meshInstan'+'ce']&&this['_removeMes'+'hInstance'](_0x3a64fc['meshInstan'+'ce']),_0x3dd28c===0x1bd*0xe+0x15*-0x179+0x697){_0x3a64fc['meshInstan'+'ce']=null;continue;}for(let _0x853906=-0x1*-0xfe9+0x2688+-0x3671;_0x853906<_0x3dd28c;_0x853906++)_0x3a64fc['indices'][_0x853906*(0x1426+0x567*0x3+0x4*-0x916)*(-0x21c4+0x19ec+0x7da)+(0x1021+0x1532+-0x2553)]=_0x853906*(-0x267+-0xb*0xe6+0xc4d),_0x3a64fc['indices'][_0x853906*(-0x1df8+0x21d1+0x2*-0x1eb)*(0x1*-0x1d+0x4a*0x1+0x1*-0x2b)+(-0x3bb*0x7+0x1*-0x20d9+0x3af7)]=_0x853906*(0x3dd+0x7*-0x7e+-0x1*0x67)+(0x1*0x2588+-0x9de+0x1*-0x1ba9),_0x3a64fc['indices'][_0x853906*(0x821+-0xf68+-0x2*-0x3a5)*(-0x2c4+0xfa1+-0xcdb)+(-0xe1*-0x11+0xe4+-0xfd3)]=_0x853906*(-0x250+0x22a1+0x204d*-0x1)+(-0x7*-0x101+-0xb27+0x423),_0x3a64fc['indices'][_0x853906*(0x237f+0x9a9*-0x2+-0x102a)*(0x2395*-0x1+0x1*-0x1c5f+-0x2*-0x1ffb)+(-0x26dd+-0x2306+-0x12*-0x41b)]=_0x853906*(-0x1ae7+-0x1537+0x3022)+(-0x1712+-0x75*-0x1f+0x8e9),_0x3a64fc['indices'][_0x853906*(0xa8f+-0x3cb*0x1+-0xf7*0x7)*(-0x167*-0x12+0xf*-0x95+0x19*-0xa9)+(0x773+-0x999+0x22a)]=_0x853906*(-0x21f6+0x19*-0x4d+-0x1*-0x297f)+(-0x1fc*0x8+-0x1953*-0x1+0x97*-0x10),_0x3a64fc['indices'][_0x853906*(-0x22c4+-0x13*-0xa7+0x1662)*(-0x1*0x1885+-0x23b2+0x9*0x6b1)+(0x25*0xbf+-0xd5f+-0xe37*0x1)]=_0x853906*(0x229c+-0x1*-0x2579+-0x3cb*0x13)+(-0x23dd+0x1*0x12eb+0x10f3),_0x3a64fc['normals'][_0x853906*(0xf67*-0x1+-0x1*0x14ff+0x246a)*(-0x1201+-0x1*0x8bf+-0x1f*-0xdd)+(0x4b5+-0x1b63+0x2*0xb57)]=-0x162d+0x227c+-0xc4f*0x1,_0x3a64fc['normals'][_0x853906*(0x109*-0x5+-0x1fb5+0x1273*0x2)*(0x149f+0x12e5+-0x2781)+(-0x1aa6*-0x1+0xaef*-0x1+-0xfb6)]=-0x2445+-0x1ea7+0x42ec,_0x3a64fc['normals'][_0x853906*(-0x212*-0xb+-0xc7b+0x36d*-0x3)*(-0xecf+0x1292+-0x3c0)+(0x6*-0xc6+-0x3*0x639+0x1751)]=-(-0x81*-0x1b+-0xc88+-0x112),_0x3a64fc['normals'][_0x853906*(-0xc59+0x1a16+0x3*-0x493)*(0x14d4+-0x1*-0x3d+0x23*-0x9a)+(-0x4*0x819+0x1*0xbb1+-0x14b6*-0x1)]=0x1fd9+-0x35*0x3e+0x9d*-0x1f,_0x3a64fc['normals'][_0x853906*(0x21*0x3d+0x1*0x2401+-0x15ed*0x2)*(0x16*0x65+0x6b3*0x5+-0x1*0x2a2a)+(-0x965*0x2+0x78b*0x2+0x3b8)]=0xd76+0x1*0x12b9+0xb*-0x2ed,_0x3a64fc['normals'][_0x853906*(0xbe2+-0x7*-0x47b+-0x2b3b)*(0x1*0x279+-0x14b1+0x123b)+(-0x183e+-0x79+0x2*0xc5e)]=-(0x134d+-0x19ca+0x67e),_0x3a64fc['normals'][_0x853906*(0x11*-0x46+0x2157+-0x1cad)*(-0x31*0x8a+-0x426+0x1e93)+(-0xa02+0x1c4f+0x1*-0x1247)]=0x1*-0x16f7+-0x10d*0x1d+0x3570,_0x3a64fc['normals'][_0x853906*(0xc*0x149+0x25fb+-0x3563)*(-0x1ccf+0xf8*0x2+-0x5d*-0x4a)+(-0x2560+0x1420+0x1*0x1147)]=0x74a+0x14c*-0x2+-0x4b2,_0x3a64fc['normals'][_0x853906*(-0x1afe*-0x1+0x1cd9+-0x1cd*0x1f)*(0x17c6+0x4*0x7b1+-0x3687)+(0x24bf+0x3*0xcfb+-0x4ba8)]=-(0xa6a+0x8f7+0x4*-0x4d8),_0x3a64fc['normals'][_0x853906*(-0x6bb+0x8*0xce+0x4f)*(0x1a*-0x139+-0x10f3*-0x1+-0x2*-0x76d)+(0x2602+0x1005+-0x35fe*0x1)]=0x88b+-0x755*-0x3+-0x1e8a,_0x3a64fc['normals'][_0x853906*(-0x1f07+0x1221+-0x3a*-0x39)*(0x207c+0x43*0x16+-0x263b)+(-0xe*0x1b9+-0x19f3+-0x1*-0x321b)]=0x6*0x40c+0x53*0x61+-0x37bb,_0x3a64fc['normals'][_0x853906*(0x20*0x10+0x2531+-0x272d)*(-0x7a9+0x1ed2+-0xb93*0x2)+(0x2037+-0xc3c+-0x13f*0x10)]=-(-0x374*0x2+0xd97+-0x6ae);const _0x2aa310=xR(this['_system']['app']['graphicsDe'+'vice'],_0x3a64fc),_0x55efe6=new He(_0x2aa310,this['_material'],this['_node']);if(_0x55efe6['name']='Text\x20Eleme'+'nt:\x20'+this['_entity']['name'],_0x55efe6['castShadow']=!(0xc7c+0x7ca+-0x1445),_0x55efe6['receiveSha'+'dow']=!(-0x1dfb+-0x1736+-0x3532*-0x1),_0x55efe6['cull']=!_0x32b5de,_0x55efe6['screenSpac'+'e']=_0x32b5de,_0x55efe6['drawOrder']=this['_drawOrder'],_0x433086&&(_0x55efe6['cull']=!(0x2290+0x22c5+0x4555*-0x1),_0x55efe6['isVisibleF'+'unc']=_0x312fcc),this['_setTextur'+'eParams'](_0x55efe6,this['_font']['textures'][_0x19c5a3]),_0x55efe6['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']),_0x55efe6['setParamet'+'er']('material_o'+'pacity',this['_color']['a']),_0x55efe6['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x55efe6['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x55efe6['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x19c5a3]['width']),_0x55efe6['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']),_0x55efe6['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']),_0x55efe6['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']),this['_symbolSha'+'dowParams'])this['_shadowOff'+'setUniform'][0x673+-0x24f2*-0x1+-0x2b65]=-0x1a57+0x1a69+-0x12,this['_shadowOff'+'setUniform'][-0xc6d+-0x21*-0x91+-0xe5*0x7]=0x1*-0xf35+0xf*-0x105+0x1e80;else{const _0x408529=-this['_font']['data']['info']['maps'][_0x19c5a3]['width']/this['_font']['data']['info']['maps'][_0x19c5a3]['height'];this['_shadowOff'+'setUniform'][-0xc95*-0x1+-0x433+-0x862]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][-0x7ba+0x5bf*0x4+0xf41*-0x1]=_0x408529*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'];}_0x55efe6['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']),_0x3a64fc['meshInstan'+'ce']=_0x55efe6,this['_model']['meshInstan'+'ces']['push'](_0x55efe6);}}this['_element']['maskedBy']&&this['_element']['_setMasked'+'By'](this['_element']['maskedBy']),_0x1df947&&this['_element']['enabled']&&this['_entity']['enabled']&&this['_element']['addModelTo'+'Layers'](this['_model']),this['_updateMes'+'hes'](),this['_rangeStar'+'t']=-0x3*-0x1af+-0x252d+0x4*0x808,this['_rangeEnd']=this['_symbols']['length'],this['_updateRen'+'derRange']();}['_removeMes'+'hInstance'](_0x5baac0){_0x5baac0['destroy']();const _0x4961e6=this['_model']['meshInstan'+'ces']['indexOf'](_0x5baac0);_0x4961e6!==-(0xc1a*-0x1+-0x8fe+0x1519)&&this['_model']['meshInstan'+'ces']['splice'](_0x4961e6,-0x1b*0x155+0x7b1+-0x3*-0x96d);}['_setMateri'+'al'](_0x24b1e9){if(this['_material']=_0x24b1e9,this['_model'])for(let _0x4b32d6=-0xc92*-0x1+0x118b+-0x1e1d,_0x6d2a75=this['_model']['meshInstan'+'ces']['length'];_0x4b32d6<_0x6d2a75;_0x4b32d6++){const _0x4fb420=this['_model']['meshInstan'+'ces'][_0x4b32d6];_0x4fb420['material']=_0x24b1e9;}}['_updateMat'+'erial'](_0x1d1c89){const _0x168a0c=this['_element'],_0x2f5044=_0x168a0c['_isScreenC'+'ulled'](),_0x2f78bf=function(_0x209ad1){return _0x168a0c['isVisibleF'+'orCamera'](_0x209ad1);},_0x789cbe=this['_font']&&this['_font']['type']===Rh;if(this['_material']=this['_system']['getTextEle'+'mentMateri'+'al'](_0x1d1c89,_0x789cbe,this['_enableMar'+'kup']),this['_model'])for(let _0x262720=0x117d*0x2+-0xee0+0x1f*-0xa6,_0x24ecb7=this['_model']['meshInstan'+'ces']['length'];_0x262720<_0x24ecb7;_0x262720++){const _0x1d8516=this['_model']['meshInstan'+'ces'][_0x262720];_0x1d8516['cull']=!_0x1d1c89,_0x1d8516['material']=this['_material'],_0x1d8516['screenSpac'+'e']=_0x1d1c89,_0x2f5044?(_0x1d8516['cull']=!(-0x49*-0x11+-0x1*0x26ae+0x21d5),_0x1d8516['isVisibleF'+'unc']=_0x2f78bf):_0x1d8516['isVisibleF'+'unc']=null;}}['_updateMat'+'erialEmiss'+'ive'](){this['_symbolCol'+'ors']?(this['_colorUnif'+'orm'][0x28c+-0x671*0x4+0x1738]=-0x7*0x236+0x34+-0x1*-0xf47,this['_colorUnif'+'orm'][0x1*-0x2669+0x1dca+0x8a0]=-0xb*-0x27e+-0x150f+-0x21e*0x3,this['_colorUnif'+'orm'][0x806+0x175d*0x1+-0x1f61]=-0xe81*-0x1+0x14b8+-0x4*0x8ce):(We['linear'](this['_color']),this['_colorUnif'+'orm'][0x616+-0x229a+0x1c84]=We['r'],this['_colorUnif'+'orm'][0x1*-0x521+0x188c+-0x136a]=We['g'],this['_colorUnif'+'orm'][0x35*0xb5+0xb5d*0x3+-0x478e*0x1]=We['b']);}['_updateMat'+'erialOutli'+'ne'](){this['_symbolOut'+'lineParams']?(this['_outlineCo'+'lorUniform'][0x96b+-0x4c8+0x4a3*-0x1]=-0xb5d*-0x1+-0x178d*0x1+0xc30,this['_outlineCo'+'lorUniform'][-0x1127+0x202c+-0x782*0x2]=-0xb20+0x1be7+-0x10c7,this['_outlineCo'+'lorUniform'][0x201c+0x229*0x9+-0x23*0x179]=0x1c1+-0x129*0x7+0x65e,this['_outlineCo'+'lorUniform'][-0xf10+-0x22b6+0x31c9]=-0x1*0x1ae2+-0x3*0xc13+0x3f1c):(We['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][-0x2e1+-0x270a+0x29eb]=We['r'],this['_outlineCo'+'lorUniform'][-0x20bf+-0xbb*0x13+0x2ea1]=We['g'],this['_outlineCo'+'lorUniform'][0xdf6+-0x60f+-0x7e5]=We['b'],this['_outlineCo'+'lorUniform'][0x19da+-0xd*0x2bd+0x9c2]=We['a']);}['_updateMat'+'erialShado'+'w'](){this['_symbolOut'+'lineParams']?(this['_shadowCol'+'orUniform'][0x8c8+-0x1*-0xaf1+-0x11*0x129]=-0x1f79+0x1c9c+0x2dd,this['_shadowCol'+'orUniform'][-0x20a0+0x1ccc+0x9*0x6d]=0x1691+-0x79c+0xef5*-0x1,this['_shadowCol'+'orUniform'][0x2633+-0x2122+-0x1*0x50f]=0x27d+-0xbc5*-0x1+-0xe42,this['_shadowCol'+'orUniform'][0x7aa+0x4b*0x27+-0x4a*0x42]=0xe*0x207+-0x96+-0x1bcc):(We['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][-0x15c6*0x1+0xc61*-0x2+-0x2*-0x1744]=We['r'],this['_shadowCol'+'orUniform'][-0x245*0x6+0x928+0x477]=We['g'],this['_shadowCol'+'orUniform'][-0x1*0x103c+-0x2*-0x397+0x910]=We['b'],this['_shadowCol'+'orUniform'][0x1bac+0x4e2+-0x3*0xad9]=We['a']);}['_isWordBou'+'ndary'](_0x28c27f){return jg['test'](_0x28c27f);}['_isValidNe'+'xtChar'](_0x64c84c){return _0x64c84c!==null&&!ER['test'](_0x64c84c);}['_isNextCJK'+'Boundary'](_0x29aa54,_0x285b22){return Yg['test'](_0x29aa54)&&(jg['test'](_0x285b22)||wR['test'](_0x285b22));}['_isNextCJK'+'WholeWord'](_0x3b55b9){return Yg['test'](_0x3b55b9);}['_updateMes'+'hes'](){const _0x650fd4=this['_font']['data'],_0x2d7f4e=this,_0x46eb33=Math['min'](this['_minFontSi'+'ze'],this['_maxFontSi'+'ze']),_0x26e5a0=this['_maxFontSi'+'ze'],_0x359890=this['_shouldAut'+'oFit']();_0x359890&&(this['_fontSize']=this['_maxFontSi'+'ze']);const _0x1cbffb=-0x85a+0x1384+-0xb0a,_0x330597=this['_symbols']['length'];let _0x4f87b6=0x13f2*-0x1+-0xcb6+-0x4c*-0x6e,_0x32650d=-0x2139+0x295+0x1ea4,_0x3edb16=-0x1bc+-0x132+-0xa*-0x4b,_0x3dbb71=0x1d67+-0x24c+-0x1b1b,_0x403285=-0x521+-0x2d*-0xaa+0x3*-0x840,_0x148f6=0x1*-0x91+0xe*-0xe5+0xd17,_0x27430e=-0x14bc+0x8bd+0xbff,_0x4302b2=0x1*-0x13b2+0xe42+0x2b8*0x2,_0xe5375=-0x5*-0x14+-0x38*-0x8b+-0x1ecc,_0x1283ae=0x1*-0x1952+-0x250f+0x3e61*0x1,_0x3bbe5c=-0x16ca*-0x1+0x24+-0xa*0x24b;const _0x2ff1cd=Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])>=-0x3*0x599+0x83c+0x1*0x88f+0.0001;let _0x20f5b8=this['_element']['calculated'+'Width'];(this['autoWidth']&&!_0x2ff1cd||!this['_wrapLines'])&&(_0x20f5b8=Number['POSITIVE_I'+'NFINITY']);let _0x204f04=0x1*0xf3a+0x111f+-0x2059,_0x52c377=-0x1b3b+-0x2554+0x939*0x7,_0x30fced,_0xb50f03,_0x50eabf,_0x2866ba;function _0x44bb1f(_0x26c771,_0x4775a3,_0x2194f3){_0x2d7f4e['_lineWidth'+'s']['push'](Math['abs'](_0x2194f3));const _0x26b3d1=_0x4302b2>_0x4775a3?_0x4775a3+(0x11a8+-0x6e5+0x12*-0x99):_0x4302b2,_0xfbc6e5=_0x4302b2>_0x4775a3?_0x4302b2+(0x1*0xe03+-0xe83+-0x1*-0x81):_0x4775a3,_0x4ee1a3=_0x26c771['slice'](_0x26b3d1,_0xfbc6e5);if(_0x3bbe5c){let _0x4b5a51=_0x4ee1a3['length'];for(;_0x4b5a51--&&_0x3bbe5c>0x1fed+0x11a3+0x319*-0x10;)qg['test'](_0x4ee1a3[_0x4b5a51])&&(_0x4ee1a3['splice'](_0x4b5a51,0x4*0x718+-0x1904+-0x35b),_0x3bbe5c--);}_0x2d7f4e['_lineConte'+'nts']['push'](_0x4ee1a3['join']('')),_0x4f87b6=0x2290+-0x174f+-0xb41,_0x32650d-=_0x2d7f4e['_scaledLin'+'eHeight'],_0x403285++,_0xe5375=0x167b+0x1a16+-0x3091,_0x1283ae=0x411*0x8+0x5aa+-0x2632,_0x3bbe5c=-0xf82*-0x1+0x103e+-0xfe0*0x2,_0x148f6=0x1418+-0x5c8+-0xe50,_0x4302b2=_0x4775a3;}let _0x2465fe=!(0x1e3d*-0x1+0xd9*-0xb+0x2790);for(;_0x2465fe;){_0x2465fe=!(-0x1ccd+0x719*-0x1+0x23e7),_0x359890?this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t']*this['_fontSize']/(this['_maxFontSi'+'ze']||0x25b*-0xf+0x1ced*0x1+0x668+0.0001):this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t'],this['width']=0xbdf+-0x7*0x541+-0x63a*-0x4,this['height']=-0x1b8f+-0x13c3+0x3*0xfc6,this['_lineWidth'+'s']=[],this['_lineConte'+'nts']=[],_0x4f87b6=0xc9a*0x1+0x97*0x3b+0x2f67*-0x1,_0x32650d=-0x93*0x2d+0x4b*-0x19+-0x5*-0x6a2,_0x3edb16=-0x1ab4+0x19df+0xd5,_0x3dbb71=0xf87+-0x7*0x4df+-0x1*-0x1292,_0x403285=-0x47*0x13+0x51*-0x6c+0x129*0x22,_0x148f6=-0xde7+-0x43*0x42+-0x17*-0x15b,_0x27430e=-0x2d5+-0x8b4+0xb89,_0x4302b2=0x20fc+-0x1db*0xb+-0xc93,_0xe5375=-0xdcd+0x276+0xb57,_0x1283ae=-0x15f0+0x134d+0x1b*0x19,_0x3bbe5c=-0x1*-0x971+0x1*0x55d+0x2*-0x767;const _0x6f95da=this['_fontSize']/_0x1cbffb;_0x204f04=this['_fontMinY']*_0x6f95da,_0x52c377=this['_fontMaxY']*_0x6f95da;for(let _0x4b416a=-0x1613*0x1+0x1618+-0x5;_0x4b416a<this['_meshInfo']['length'];_0x4b416a++)this['_meshInfo'][_0x4b416a]['quad']=-0x23e6+0x9e6+0xd00*0x2,this['_meshInfo'][_0x4b416a]['lines']={};let _0xfe1afa=0x7e*-0x49+-0xcd1+0x31be,_0x104df9=0x1*0x1a7b+-0x7*0x1f7+0xbbb*-0x1,_0x5d31b3=-0xed4+-0x428+0x13fb,_0x1eb734=-0x13f0+-0xf*0x1bb+-0xbb9*-0x4+(-0x27f+0x1065+0x3*-0x44d)*(-0x251c+0x1*-0x144e+0x3a6a),_0x3e3ff6=-0xa31+0xf8f*0x1+0x175*-0x3+(-0x1*0x2049+0x18c1+-0x25*-0x3b)*(0x1332+-0x9*0x1ca+-0x8*0x43),_0x2b54de=0x8d*-0x36+0xd3*-0x27+0x1*0x3de3,_0x40a2de=0x12*0x1cc+0x9*-0x40c+0x1*0x513+(0x1*0x234a+-0x695+-0x1bb6*0x1)*(-0x1d0b+-0x18b3+-0x27d*-0x16),_0x48cab7=0x1bee+0x2578*-0x1+0xa89+(0xec*-0x2+0x7d*-0x28+0x165f*0x1)*(-0x1b*0x115+0xb07+0x1330),_0x5f1548=0x25f*-0x3+-0x13*0xab+0x1*0x144d+(0x1578+-0x3*-0x6ec+-0x29bd)*(-0x48d*0x3+-0x1bc9+0x2a7*0x10);for(let _0x112e38=-0x1868+-0x949+0x17*0x177;_0x112e38<_0x330597;_0x112e38++){if(_0x30fced=this['_symbols'][_0x112e38],_0x2866ba=_0x112e38+(-0x8*0x95+0xd37+0x1e*-0x49)>=_0x330597?null:this['_symbols'][_0x112e38+(0x2a2*-0x6+0x1a70+0x1*-0xaa3)],qg['test'](_0x30fced)){_0x3bbe5c++,(!this['_wrapLines']||this['_maxLines']<0x26e9*-0x1+0x1*-0x205f+0x4748||_0x403285<this['_maxLines'])&&(_0x44bb1f(this['_symbols'],_0x112e38,_0x3dbb71),_0x27430e=_0x112e38+(0x1706+0x1*-0x94f+-0x1*0xdb6),_0x4302b2=_0x112e38+(0x1493+0x1033+0x1*-0x24c5));continue;}let _0x58a60e=0x2*0x6d8+0x1*0x1c1b+0xd*-0x337,_0x35d1e5=-0x114c+-0x1*-0xefd+0x24f,_0x1a469b=0x2559+-0x157a+-0xfdf,_0x40636a=-0xd72+-0x14f8+0x226b,_0x48c831,_0x4996c3;if(_0xb50f03=_0x650fd4['chars'][_0x30fced],!_0xb50f03){if(bR['indexOf'](_0x30fced)!==-(-0x1311*0x1+0x24e3+0x11d1*-0x1))_0xb50f03=AR;else{if(_0x650fd4['chars']['\x20'])_0xb50f03=_0x650fd4['chars']['\x20'];else for(const _0x20f838 in _0x650fd4['chars']){_0xb50f03=_0x650fd4['chars'][_0x20f838];break;}_0x650fd4['missingCha'+'rs']||(_0x650fd4['missingCha'+'rs']=new Set()),_0x650fd4['missingCha'+'rs']['has'](_0x30fced)||(console['warn']('Character\x20'+'\x27'+_0x30fced+('\x27\x20is\x20missi'+'ng\x20from\x20th'+'e\x20font\x20')+_0x650fd4['info']['face']),_0x650fd4['missingCha'+'rs']['add'](_0x30fced));}}if(_0xb50f03){let _0x14913b=-0x884+0xde9+-0x565;if(_0x1283ae>0x153*0x3+0x3*0x127+-0x76e){const _0x40a870=this['_font']['data']['kerning'];if(_0x40a870){const _0x2f09ca=_0x40a870[Hc['getCodePoi'+'nt'](this['_symbols'][_0x112e38-(0x737*-0x1+-0x2343*-0x1+0x1*-0x1c0b)])||-0x148e+0x1*0x3e5+0x10a9];_0x2f09ca&&(_0x14913b=_0x2f09ca[Hc['getCodePoi'+'nt'](this['_symbols'][_0x112e38])||0x16c3*-0x1+0xcef+-0x11*-0x94]||-0x39*-0x6b+-0x45*0x83+0xb7c);}}_0x48c831=_0xb50f03['scale']||-0x15b*-0x15+0x2285*-0x1+-0x8d*-0xb,_0x4996c3=(_0xb50f03['width']+_0xb50f03['height'])/(-0x1661+0x120*0xc+0x19*0x5b),_0x40636a=_0x6f95da*_0x4996c3/_0x48c831,_0x1a469b=(_0xb50f03['xadvance']+_0x14913b)*_0x6f95da,_0x58a60e=(_0xb50f03['xoffset']-_0x14913b)*_0x6f95da,_0x35d1e5=_0xb50f03['yoffset']*_0x6f95da;}else console['error']('Couldn\x27t\x20s'+'ubstitute\x20'+'missing\x20ch'+'aracter:\x20\x27'+_0x30fced+'\x27');const _0x5cdb27=TR['test'](_0x30fced),_0x338d33=_0xb50f03&&_0xb50f03['map']||-0x2419*0x1+-0x1297+0x36b0,_0x125aca=-this['_font']['data']['info']['maps'][_0x338d33]['width']/this['_font']['data']['info']['maps'][_0x338d33]['height'],_0x328029=this['_meshInfo'][_0x338d33],_0x8020e3=_0x4f87b6+this['_spacing']*_0x1a469b;if(_0x8020e3>_0x20f5b8&&_0x1283ae>-0xa3a*0x1+0x1d4e+-0x1314&&!_0x5cdb27&&(this['_maxLines']<0x9*0x379+-0x1*-0x622+-0x2563||_0x403285<this['_maxLines'])){if(_0xe5375===-0xe09+-0x1256*0x1+0x205f)_0x27430e=_0x112e38,_0x44bb1f(this['_symbols'],_0x112e38,_0x3dbb71);else{const _0x2c08ea=Math['max'](_0x112e38-_0x27430e,-0x1a9e+-0x180d+0x32ab);if(this['_meshInfo']['length']<=0x784+-0x14*0x96+0x1*0x435)_0x328029['lines'][_0x403285-(0x1894+0x1c29+-0x34bc)]-=_0x2c08ea,_0x328029['quad']-=_0x2c08ea;else{const _0x58d699=_0x27430e,_0x38144a=_0x112e38;for(let _0x55be5f=_0x58d699;_0x55be5f<_0x38144a;_0x55be5f++){const _0x277495=this['_symbols'][_0x55be5f],_0x175487=_0x650fd4['chars'][_0x277495],_0x9c562c=this['_meshInfo'][_0x175487&&_0x175487['map']||0x2*0x11cb+-0x1*-0x23f2+-0x4788];_0x9c562c['lines'][_0x403285-(0x174d+0x14*0x45+-0x264*0xc)]-=-0xc50+0x1973*0x1+0xd22*-0x1,_0x9c562c['quad']-=-0x1c53+-0x748+-0x4*-0x8e7;}}_0x112e38-=_0x2c08ea+(-0x1f8d+0x1bf1+0x1*0x39d),_0x44bb1f(this['_symbols'],_0x27430e,_0x148f6);continue;}}_0x50eabf=_0x328029['quad'],_0x328029['lines'][_0x403285-(-0xe9*-0xb+0x2296+-0x2c98)]=_0x50eabf;let _0x2a517d=_0x4f87b6-_0x58a60e,_0x17e837=_0x2a517d+_0x40636a;const _0xab61da=_0x32650d-_0x35d1e5,_0x3806f5=_0xab61da+_0x40636a;if(this['_rtl']){const _0x4862c3=_0x40636a-_0x58a60e-this['_spacing']*_0x1a469b-_0x58a60e;_0x2a517d-=_0x4862c3,_0x17e837-=_0x4862c3;}_0x328029['positions'][_0x50eabf*(0x472*0x5+0xc*0x2be+-0x371e)*(0xc*0xcb+-0xed2+0x1*0x551)+(-0xc73+-0x5e2+0x13*0xf7)]=_0x2a517d,_0x328029['positions'][_0x50eabf*(-0x3a4*-0xa+-0x19e8+-0x1*0xa7c)*(0x1*0xc7e+0x1c48+-0x28c3)+(0x92*0x44+-0x1aaf+-0xc18)]=_0xab61da,_0x328029['positions'][_0x50eabf*(-0x191e+0x21b1+-0x88f)*(0x262d*-0x1+-0x2a7*0x1+0x82b*0x5)+(-0x17*-0x2f+-0x1276+0xe3f)]=_0x3edb16,_0x328029['positions'][_0x50eabf*(0xb1+-0xe9*0x9+-0x784*-0x1)*(-0x1*0x117f+-0x1*-0x107+0x107b)+(0x23e7+-0x8ef*0x2+0x1*-0x1206)]=_0x17e837,_0x328029['positions'][_0x50eabf*(0x2*-0x1365+-0x1f7+0x31*0xd5)*(-0x26c5*0x1+0x7f*0x6+0x23ce)+(0x115*-0x21+0xf4+0x22c5)]=_0xab61da,_0x328029['positions'][_0x50eabf*(-0x2*0xb71+0x2*0x2d+0x168c)*(-0xb23*0x2+-0xaf5+0x109f*0x2)+(0x6ad+-0x323*-0x3+-0x1011)]=_0x3edb16,_0x328029['positions'][_0x50eabf*(0x813*0x1+-0x915+0x106)*(-0x64*-0x5d+0x187d+-0x3cce)+(-0xb98+0xcdc+-0x13e)]=_0x17e837,_0x328029['positions'][_0x50eabf*(-0x1*-0xb02+0x67*-0x4c+0x1396)*(-0x68e+-0xa59+-0x2*-0x875)+(0x5e6+-0x8*-0x35b+-0x20b7)]=_0x3806f5,_0x328029['positions'][_0x50eabf*(0x2065+-0x1b79*0x1+-0x4e8)*(0x698+-0x1*0x13ee+0x3*0x473)+(0x7a*0x1+-0x13*0x1+-0x5f)]=_0x3edb16,_0x328029['positions'][_0x50eabf*(0x1*0x203b+0x1a8f+0x2*-0x1d63)*(0xbf*0x26+-0x10*0x152+-0x737)+(-0x6*0x4ea+0x91a+0x146b*0x1)]=_0x2a517d,_0x328029['positions'][_0x50eabf*(0x16bb+-0x1ea+-0x14cd)*(0x3*-0x4a+-0xb49+-0xc2a*-0x1)+(-0xe01+0x1f4d+-0x1142)]=_0x3806f5,_0x328029['positions'][_0x50eabf*(0x266*0x8+0x474+-0x36*0x70)*(0x1048+-0xf9d*0x1+-0xa8)+(-0x5d5*0x5+0x1bcb*0x1+-0x1*-0x169)]=_0x3edb16,this['width']=Math['max'](this['width'],_0x8020e3);let _0x5456c3;if(this['_shouldAut'+'oFitWidth']()&&this['width']>this['_element']['calculated'+'Width']&&(_0x5456c3=Math['floor'](this['_element']['fontSize']*this['_element']['calculated'+'Width']/(this['width']||0x1c1c*0x1+0x2*-0x5b3+-0x10b6+0.0001)),_0x5456c3=Y['clamp'](_0x5456c3,_0x46eb33,_0x26e5a0),_0x5456c3!==this['_element']['fontSize'])){this['_fontSize']=_0x5456c3,_0x2465fe=!(0x10ee*-0x2+-0x21c5+-0x57*-0xc7);break;}if(this['height']=Math['max'](this['height'],_0x52c377-(_0x32650d+_0x204f04)),this['_shouldAut'+'oFitHeight']()&&this['height']>this['_element']['calculated'+'Height']&&(_0x5456c3=Y['clamp'](this['_fontSize']-(-0x11fb*0x1+-0x110c+0x2308),_0x46eb33,_0x26e5a0),_0x5456c3!==this['_element']['fontSize'])){this['_fontSize']=_0x5456c3,_0x2465fe=!(-0x5*-0x2f1+-0x1*-0x23c5+-0x327a);break;}_0x4f87b6+=this['_spacing']*_0x1a469b,_0x5cdb27||(_0x3dbb71=_0x4f87b6),(this['_isWordBou'+'ndary'](_0x30fced)||this['_isValidNe'+'xtChar'](_0x2866ba)&&(this['_isNextCJK'+'Boundary'](_0x30fced,_0x2866ba)||this['_isNextCJK'+'WholeWord'](_0x2866ba)))&&(_0xe5375++,_0x148f6=_0x3dbb71,_0x27430e=_0x112e38+(0xfad+0x2297+0x1*-0x3243)),_0x1283ae++;const _0x6be074=this['_getUv'](_0x30fced);if(_0x328029['uvs'][_0x50eabf*(-0x598+-0xbe8+0x1184)*(0x1341+0x866+-0x1ba5)+(0x4cd+0x13d0*0x1+-0x189d)]=_0x6be074[-0x308*-0xc+0xa17+-0x2e77],_0x328029['uvs'][_0x50eabf*(-0xaff+-0x1a45+-0x2*-0x12a4)*(-0x87*-0x1+-0x21b8+0xb11*0x3)+(0x1*-0xce9+0x1b4*-0x11+0x29de)]=-0x99+-0x137*-0x5+-0x579-_0x6be074[-0x37+0x355*0x4+-0x4*0x347],_0x328029['uvs'][_0x50eabf*(-0x528+-0x14e5+0x1*0x1a11)*(0x1e0b*0x1+0x3*0xa03+-0x16*0x2bb)+(0x1784+-0x1212+0xe8*-0x6)]=_0x6be074[0xe*-0x1df+-0x1*-0xd2d+-0x17*-0x91],_0x328029['uvs'][_0x50eabf*(0x1*0x371+0x67a+-0x9e7)*(0x39*-0x41+0x1*-0x41b+0x1*0x1296)+(0x5*0x11b+-0x26ca+0x2146)]=0x10b4+-0x589+-0x2*0x595-_0x6be074[-0x13c9*0x1+-0x546+0x1910],_0x328029['uvs'][_0x50eabf*(0x2*-0x1267+0x130*-0x1a+0x43b2)*(0x2*-0xf8b+-0x218a+0x40a2)+(0x6*0x291+-0xb57+-0x40b)]=_0x6be074[-0x6*0x346+-0x1109+0x24af],_0x328029['uvs'][_0x50eabf*(0x259+-0x48*0x20+-0x3*-0x239)*(0x3a+0x1d33+-0x1d6b)+(-0x1a30+-0xfb4+0x29e9*0x1)]=-0x17*-0x7b+-0x7a1+-0x23*0x19-_0x6be074[0x2*0x37d+-0x13c4+-0x71*-0x1d],_0x328029['uvs'][_0x50eabf*(0x98d*-0x2+-0xf*0xcd+0x1f21*0x1)*(0x9c3+0x250e+0x1*-0x2ecf)+(0x1*0x210f+-0x238a+0x281*0x1)]=_0x6be074[-0x2e4+-0x307*0x5+-0x41*-0x47],_0x328029['uvs'][_0x50eabf*(0x537*-0x6+-0x124c+0x716*0x7)*(-0x2281+-0x18*-0x81+0x166b)+(0x73f+-0x8c6+0x18e)]=0x3a9*0x1+0x1859+0x6b*-0x43-_0x6be074[0x6f7*-0x1+-0x2a*0x30+0xeda],this['_symbolCol'+'ors']){const _0x575809=this['_symbolCol'+'ors'][_0x112e38]*(0x4f*0x33+0x106b+0x27*-0xd3);_0xfe1afa=this['_colorPale'+'tte'][_0x575809],_0x104df9=this['_colorPale'+'tte'][_0x575809+(0x233f+0x789+-0x2ac7)],_0x5d31b3=this['_colorPale'+'tte'][_0x575809+(-0xb9e*0x1+0x1576*0x1+-0x9d6)];}if(_0x328029['colors'][_0x50eabf*(0x1*0x1970+-0x4f6*0x5+-0x9e)*(-0x86b+-0x11d8+0x1a47)+(-0x1f0e+0x1*-0x16b1+0x35bf)]=_0xfe1afa,_0x328029['colors'][_0x50eabf*(-0x31f*0xb+0x3b*0x67+0xa9c)*(0x34f+0xdaa+0x3*-0x5a7)+(0xcad+-0x196+0xb16*-0x1)]=_0x104df9,_0x328029['colors'][_0x50eabf*(-0x1bab+0x2*0x53b+-0x1139*-0x1)*(0x25e7+-0x10d0+-0x1513)+(0x1ea5+0x24b8+0x435b*-0x1)]=_0x5d31b3,_0x328029['colors'][_0x50eabf*(0x1*-0x1a09+0x1*-0x7f1+-0x1*-0x21fe)*(0x550+-0x1e69+-0x85f*-0x3)+(0x12f5+0x2f5*-0x3+-0xa13*0x1)]=0x19*-0x17f+0x1*-0x7fa+0x6a*0x70,_0x328029['colors'][_0x50eabf*(0x4a+-0x233c+0x22f6)*(0x11*0xde+0x98*-0x1e+0xa*0x4f)+(0x1*0x76d+-0x1cf+-0x59a)]=_0xfe1afa,_0x328029['colors'][_0x50eabf*(-0x8b3+0x24c9+-0x1c12)*(-0xe8b+-0x18b6+0x1*0x2745)+(-0xe1f+0x5*0x1c9+0x537)]=_0x104df9,_0x328029['colors'][_0x50eabf*(0x199*-0xd+0xb3*-0x7+0x19ae)*(0x62b*-0x2+-0x1e*-0xad+0x27*-0x34)+(-0x142c+0xda9+0x689)]=_0x5d31b3,_0x328029['colors'][_0x50eabf*(-0xc04+0x2de*0x3+0x1b7*0x2)*(0x14c8+-0x1b*0x13+-0x12c3)+(-0x1b5*-0xb+0x1a34+-0x1c*0x19b)]=0x1b0a+0x2316+-0x1*0x3d21,_0x328029['colors'][_0x50eabf*(0x5*0x6d5+-0x1*-0xfc+0x187*-0x17)*(0x92f+-0x3c9+-0x562)+(0x12*-0x1d9+-0x2e*-0xb3+-0x24*-0x8)]=_0xfe1afa,_0x328029['colors'][_0x50eabf*(-0x1a84*0x1+0x1ed7+0x44f*-0x1)*(-0x5c*0x2+0x391+-0x2d5)+(-0x510+-0x1979+0x1e92)]=_0x104df9,_0x328029['colors'][_0x50eabf*(-0x1*-0x1893+-0xb7f*0x1+-0x98*0x16)*(-0x15*0x161+0xd15+0xe2*0x12)+(-0x1e7*-0x12+0x1ed9*0x1+-0x27*0x1ab)]=_0x5d31b3,_0x328029['colors'][_0x50eabf*(-0x1ede+0x3*0x9e3+0x1*0x139)*(-0x3*-0x54f+-0x2fb*-0xb+-0x21e*0x17)+(0x1ea5+-0x26cb*0x1+0x831)]=0x578+-0x12eb+0xe72,_0x328029['colors'][_0x50eabf*(-0xf1*-0x13+-0x1*-0x19bd+-0x15ce*0x2)*(0xb33+-0x2516+-0x1*-0x19e7)+(0x9df+-0x788+-0x24b)]=_0xfe1afa,_0x328029['colors'][_0x50eabf*(0x9*-0x33f+-0xa03+0x273e)*(0x1d82+0x805+0x1*-0x2583)+(0x65f+-0x205+-0x44d*0x1)]=_0x104df9,_0x328029['colors'][_0x50eabf*(-0xcfa+0x9*-0x175+0x1a1b)*(-0x769*0x3+0x2fa*0x9+-0x48b)+(0x1cb2+0x7a5+-0x2449)]=_0x5d31b3,_0x328029['colors'][_0x50eabf*(0x244f+-0x1*-0x2414+0x1*-0x485f)*(0x1ec5+-0x3ce*-0x3+-0x2a2b)+(0x1355+0x311*0x1+-0x7*0x331)]=0xf*-0x125+-0x6fc+-0x3a*-0x6f,this['_symbolOut'+'lineParams']){const _0x585a37=this['_symbolOut'+'lineParams'][_0x112e38]*(-0xe67+-0xf3*-0x29+-0x187f);_0x1eb734=this['_outlinePa'+'lette'][_0x585a37]+this['_outlinePa'+'lette'][_0x585a37+(-0x225*-0xd+0x1*-0x1437+-0x7a9)]*(-0x527+-0x1*-0x2636+-0x200f),_0x3e3ff6=this['_outlinePa'+'lette'][_0x585a37+(-0x8d2+0x1*-0x517+0x1fd*0x7)]+this['_outlinePa'+'lette'][_0x585a37+(-0x14ea+-0x25d+0x174a)]*(0x124*-0x1a+-0x277*0x2+0x2396),_0x2b54de=this['_outlinePa'+'lette'][_0x585a37+(0xf7c+-0xc0d+-0x36b)];}if(_0x328029['outlines'][_0x50eabf*(0x551*-0x1+0x1*0x192b+-0x13d6)*(0x112b+-0xb42+-0x5e6)+(-0xacf+0xfd*-0x14+0x3*0xa31)]=_0x1eb734,_0x328029['outlines'][_0x50eabf*(0xedb*0x1+0x9*-0x2bd+-0xa*-0xfb)*(0xc45+-0x8*-0x2f4+0x11f1*-0x2)+(0x1d22+0x1ae*-0x5+-0x14bb)]=_0x3e3ff6,_0x328029['outlines'][_0x50eabf*(0x52f*0x3+-0x1e3b+0xeb2)*(-0x3b8+0x11*0x149+-0x3*0x60a)+(0x20f6+-0xb*0x1a+0x146*-0x19)]=_0x2b54de,_0x328029['outlines'][_0x50eabf*(-0x749+-0x97*0x8+-0x1*-0xc05)*(0xaf1+0x393*-0x7+0xe17)+(0x179*0x5+0x12fe+0x8*-0x34b)]=_0x1eb734,_0x328029['outlines'][_0x50eabf*(0x77+-0x1116+0x10a3)*(-0xb6f*0x1+-0x95e*0x2+0x1e2e)+(0x8f7+-0x13c3*0x1+0xad0)]=_0x3e3ff6,_0x328029['outlines'][_0x50eabf*(-0x38c+-0x1061*0x1+-0x3fd*-0x5)*(0x231d+-0x1*-0x1524+0x383e*-0x1)+(-0x2*-0xdf8+-0x1d20+0x135)]=_0x2b54de,_0x328029['outlines'][_0x50eabf*(-0x15aa+-0x1b5b*0x1+0x1*0x3109)*(-0x5f4+-0x57*0x4f+0xe*0x258)+(-0x1ea1*-0x1+-0x12fd+-0xb9e)]=_0x1eb734,_0x328029['outlines'][_0x50eabf*(-0xe43*-0x2+0x7*-0x1ca+-0xffc)*(-0x1d5c+0x1790+0x5cf)+(-0x14b+-0x1e33+0x1f85)]=_0x3e3ff6,_0x328029['outlines'][_0x50eabf*(0x885+0x1d6*-0x3+-0x2ff)*(0x18e9+-0x19f9+0x113)+(0x864+-0x1643+0x1*0xde7)]=_0x2b54de,_0x328029['outlines'][_0x50eabf*(0x7*-0x1bd+-0xda1+0x19d0)*(0x1914+0x2340+-0x3c51)+(-0x20*0x9+0xf6b*0x1+-0xe42)]=_0x1eb734,_0x328029['outlines'][_0x50eabf*(-0x15c1+-0xb5+-0x2a*-0x89)*(0x2*0x1e4+-0x17*0xad+0xbc6)+(-0xd*0x1e9+-0x9aa+-0x2289*-0x1)]=_0x3e3ff6,_0x328029['outlines'][_0x50eabf*(-0x4*-0x49d+0xd41+-0x1ab*0x13)*(0x5e*-0x5e+0x32b+0x1f5c)+(-0xda*-0x25+-0x15f2+-0x985)]=_0x2b54de,this['_symbolSha'+'dowParams']){const _0x506190=this['_symbolSha'+'dowParams'][_0x112e38]*(0x7*0x231+-0x1d39+0xde8);_0x40a2de=this['_shadowPal'+'ette'][_0x506190]+this['_shadowPal'+'ette'][_0x506190+(0xda7+-0x3b9*-0x1+0x1*-0x115f)]*(0x2b*-0x87+-0xa74+-0x2221*-0x1),_0x48cab7=this['_shadowPal'+'ette'][_0x506190+(0x677+0x1*-0x1ab1+0x4a*0x46)]+this['_shadowPal'+'ette'][_0x506190+(0x1f0a+-0x1b00+0x1*-0x407)]*(0x6*0x359+-0x1*-0x269f+-0xbb*0x4f),_0x5f1548=this['_shadowPal'+'ette'][_0x506190+(0x1bcf+-0x1a77+0x5*-0x44)]+(-0x1*0x1691+-0x16e9+0x2df9*0x1)+Math['round'](_0x125aca*this['_shadowPal'+'ette'][_0x506190+(0x5fb*-0x3+-0x54*0x55+0x1*0x2dda)]+(0x25f1+-0x3b*-0x52+-0x3858))*(0x934+0x1c03+-0x2437*0x1);}_0x328029['shadows'][_0x50eabf*(-0x1937+0x1*-0x6e5+0x808*0x4)*(0x1070+0x2*-0x236+0x1b7*-0x7)+(-0x7*-0x30d+-0x2*-0x94d+0x1*-0x27f5)]=_0x40a2de,_0x328029['shadows'][_0x50eabf*(-0x1214+0x121*0x11+0x1*-0x119)*(0x7bc+0x1cf7*0x1+0x1*-0x24b0)+(0x3af+0x4*0x11c+-0x81e)]=_0x48cab7,_0x328029['shadows'][_0x50eabf*(-0x1cd3+0x242d+-0x2*0x3ab)*(0x1*0xc25+0x601+-0x1223)+(-0x1*-0xe21+0x464*0x7+-0x2cdb)]=_0x5f1548,_0x328029['shadows'][_0x50eabf*(-0x1863+0x72+0x17f5)*(-0x139*-0x11+0x2fe*-0x6+-0x169*0x2)+(-0x1*-0x238c+-0x498+0x59*-0x59)]=_0x40a2de,_0x328029['shadows'][_0x50eabf*(-0x2082+-0x1*-0x1795+0x8f1)*(0x257*-0x5+0x2*-0xe15+0x10*0x27e)+(0x1783+-0x4ae*-0x7+-0x1*0x3841)]=_0x48cab7,_0x328029['shadows'][_0x50eabf*(0x3*-0x2fd+0x156a+0x425*-0x3)*(0x954+0x1*-0x12ea+0x7*0x15f)+(-0x1*-0x1c99+0x1794+0x1a14*-0x2)]=_0x5f1548,_0x328029['shadows'][_0x50eabf*(-0x8*-0x64+0x11d4*0x1+-0x1*0x14f0)*(0x620*-0x1+0x1*0xb55+-0x5*0x10a)+(-0x2*-0x11b5+-0x490+0x4*-0x7b5)]=_0x40a2de,_0x328029['shadows'][_0x50eabf*(-0x1*0x10ab+0x9c*-0x23+0x25*0x107)*(-0x23+-0x6a*-0x49+-0x1e14)+(-0x1*0x1e51+-0x23b3+-0x420b*-0x1)]=_0x48cab7,_0x328029['shadows'][_0x50eabf*(0x17c3+0x12eb*0x1+-0x2aaa)*(-0x1761+-0x599*-0x1+0x11cb*0x1)+(-0x156b+-0x6*-0x384+0x5b*0x1)]=_0x5f1548,_0x328029['shadows'][_0x50eabf*(0x3*0x6f5+0x2606+-0x1*0x3ae1)*(0x1*-0x1acd+0x15*0x9d+0xdef)+(0xd3e+-0x163c+0x907)]=_0x40a2de,_0x328029['shadows'][_0x50eabf*(0x1*0x2153+0x14f6*0x1+-0x1a5*0x21)*(-0x1a6*-0x1+-0xc3+0x4*-0x38)+(0x1b7f+0x1bc0+-0x3735)]=_0x48cab7,_0x328029['shadows'][_0x50eabf*(0x10c1+-0x23c0+0x1303)*(0x376*0x5+0x95d+0x4*-0x6aa)+(-0x1a97+-0x1*-0xc54+-0xe4e*-0x1)]=_0x5f1548,_0x328029['quad']++;}_0x2465fe||_0x4302b2<_0x330597&&_0x44bb1f(this['_symbols'],_0x330597,_0x4f87b6);}this['_noResize']=!(0x279+-0x32*0x5a+0x1*0xf1b),this['autoWidth']=this['_autoWidth'],this['autoHeight']=this['_autoHeigh'+'t'],this['_noResize']=!(0x12ce+0x1106+-0x23d3);const _0x5a6849=this['_element']['pivot']['x'],_0xd3ff4d=this['_element']['pivot']['y'],_0x4ae2f0=this['_alignment']['x'],_0x57c0cb=this['_alignment']['y'];for(let _0x117d18=0x11d*-0x11+0x7d3*-0x3+0x9*0x4b6;_0x117d18<this['_meshInfo']['length'];_0x117d18++){if(this['_meshInfo'][_0x117d18]['count']===-0x13e1+0x16e5+-0x1*0x304)continue;let _0x4118a4=0x3*0x3ee+0xc8d+-0x1857;for(const _0x2f12dc in this['_meshInfo'][_0x117d18]['lines']){const _0x5b5b98=this['_meshInfo'][_0x117d18]['lines'][_0x2f12dc],_0x1129d9=this['_lineWidth'+'s'][parseInt(_0x2f12dc,-0x911+-0x7f5+0x1110)],_0x32a3f7=-_0x5a6849*this['_element']['calculated'+'Width']+_0x4ae2f0*(this['_element']['calculated'+'Width']-_0x1129d9)*(this['_rtl']?-(0x1*0x587+0x1bd9*0x1+-0x215f):-0x26*0x3a+-0x18c3+-0x2*-0x10b0),_0x574009=(-0x217a+0x18f4+0x887-_0xd3ff4d)*this['_element']['calculated'+'Height']-_0x52c377-(0x1aad*-0x1+0x1*-0x52c+0x1fda-_0x57c0cb)*(this['_element']['calculated'+'Height']-this['height']);for(let _0x4449d2=_0x4118a4;_0x4449d2<=_0x5b5b98;_0x4449d2++)this['_meshInfo'][_0x117d18]['positions'][_0x4449d2*(-0x5c4+0x222f+-0x1c67)*(0x135*-0x1f+0xb60+0xe6*0x1d)]+=_0x32a3f7,this['_meshInfo'][_0x117d18]['positions'][_0x4449d2*(0x14be+0x4f*0x14+-0xb*0x272)*(-0x115f+0x23fb+0x9*-0x211)+(-0x22db+0x93c+-0xc1*-0x22)]+=_0x32a3f7,this['_meshInfo'][_0x117d18]['positions'][_0x4449d2*(0x4*0x925+-0x577*0x5+0xb*-0xd7)*(0xa42+-0x1728+0xce9)+(-0x1*-0x1549+-0x1*-0x1a25+-0xa4*0x4a)]+=_0x32a3f7,this['_meshInfo'][_0x117d18]['positions'][_0x4449d2*(0x728+0xb*-0x180+0x2*0x4ae)*(-0x243*0x1+-0x171a+0x1960)+(0x12*-0x1cd+-0xeee+0x137*0x27)]+=_0x32a3f7,this['_meshInfo'][_0x117d18]['positions'][_0x4449d2*(0x6*0x3f2+0x11*-0x3d+0x1*-0x139b)*(0x1807+0x1b6a+-0x336e)+(-0x12b*-0x3+-0x3*0x5a7+0xd75)]+=_0x574009,this['_meshInfo'][_0x117d18]['positions'][_0x4449d2*(0x1d67+0x25f+-0x1fc2)*(-0xdc+0x119*-0x8+0x9a7)+(-0x667*0x2+0x1fc0+0x12ee*-0x1)]+=_0x574009,this['_meshInfo'][_0x117d18]['positions'][_0x4449d2*(-0xf8b+-0x1e0a+0x2d99)*(-0x1*0x5bc+0x14ad+-0xeee)+(-0x13eb+0x1*-0x3d9+-0x17cb*-0x1)]+=_0x574009,this['_meshInfo'][_0x117d18]['positions'][_0x4449d2*(0x22a5+-0x19a*0xf+-0xa9b)*(-0x1b87+-0x1*-0x1e4d+-0x2c3)+(-0x183e+0x443*0x5+0x2f9)]+=_0x574009;if(this['_rtl'])for(let _0x1231ac=_0x4118a4;_0x1231ac<=_0x5b5b98;_0x1231ac++){const _0x4d8ab2=_0x1231ac*(0x9f9+0x12d*-0x3+-0x337*0x2)*(-0x48e+-0x1*-0x1ae6+-0x1655);for(let _0x396897=-0xe8*-0x20+0xa01*0x3+0x1*-0x3b03;_0x396897<-0x2c*0x49+0x1adf*0x1+-0xe4f;++_0x396897)this['_meshInfo'][_0x117d18]['positions'][_0x4d8ab2+_0x396897*(-0x2*-0x6a3+0x1d8*0xf+0x82f*-0x5)]=this['_element']['calculated'+'Width']-this['_meshInfo'][_0x117d18]['positions'][_0x4d8ab2+_0x396897*(-0x17ba+-0x191*-0x5+0xfe8)]+_0x32a3f7*(0x1b84+0x28+-0x1baa*0x1);const _0x1e75fd=this['_meshInfo'][_0x117d18]['positions'][_0x4d8ab2+(0x4ae*-0x1+-0x7*-0x12e+-0x391*0x1)],_0x392715=this['_meshInfo'][_0x117d18]['positions'][_0x4d8ab2+(-0xae8+-0xfaa*-0x2+-0x1466)];this['_meshInfo'][_0x117d18]['positions'][_0x4d8ab2+(-0x783+0x1ccf+0x1549*-0x1)]=this['_meshInfo'][_0x117d18]['positions'][_0x4d8ab2+(-0x54+0x4a7+-0x453)],this['_meshInfo'][_0x117d18]['positions'][_0x4d8ab2+(-0xc*-0x3+0x1283+-0x12a1)]=this['_meshInfo'][_0x117d18]['positions'][_0x4d8ab2+(-0x4a8+-0xb3c+0xfed)],this['_meshInfo'][_0x117d18]['positions'][_0x4d8ab2+(0x1b1*0x3+-0x4*-0x1ca+0xc3b*-0x1)]=_0x1e75fd,this['_meshInfo'][_0x117d18]['positions'][_0x4d8ab2+(0xb*-0x2cf+-0x2130+0x236*0x1d)]=_0x392715;}_0x4118a4=_0x5b5b98+(-0x2141+-0x1*-0x21f1+0x19*-0x7);}const _0x12d6b2=this['_meshInfo'][_0x117d18]['count']*(-0x415*-0x2+-0x2*0x5bf+-0x2*-0x1ac),_0x5a0b27=this['_meshInfo'][_0x117d18]['quad']*(0x787+0x1cec+0x246f*-0x1),_0x2826a4=new Uo(this['_meshInfo'][_0x117d18]['meshInstan'+'ce']['mesh']['vertexBuff'+'er']);for(let _0x3882e7=0x22b7*0x1+-0x2e5+-0x2*0xfe9;_0x3882e7<_0x12d6b2;_0x3882e7++)_0x3882e7>=_0x5a0b27?(_0x2826a4['element'][Me]['set'](-0x3*-0x416+-0x1*0x1195+-0x553*-0x1,0x8*-0x79+-0x186a+0x966*0x3,0xf65*0x1+-0xd69*-0x1+-0x1cce),_0x2826a4['element'][is]['set'](0xa2e+-0x6e9+-0x345,0x1567+-0x1f8e+0xa27),_0x2826a4['element'][Wt]['set'](0x252a*-0x1+-0x1c4a+-0x4*-0x105d,0x1*-0x955+0x1*0x79c+-0x31*-0x9,-0x1*0xd51+0x3*0x585+0x33e*-0x1,-0x1a21+0x24bf+-0x97*0x12),_0x2826a4['element'][Ko]['set'](0x5*-0x733+-0x220c+-0x81*-0x8b,0x1e75+-0x1cf7*0x1+-0x17e,0x1178+-0xa79+-0x6ff,0x1e5+0x1555+-0x173a),_0x2826a4['element'][Zo]['set'](-0x101b+-0x18c6+0x5b*0x73,-0x1*0xba7+-0x9*-0x17d+0x1be*-0x1,-0x9e*-0x1a+0x190e+0x148d*-0x2,0x281+-0xfc5+-0x1*-0xd44)):(_0x2826a4['element'][Me]['set'](this['_meshInfo'][_0x117d18]['positions'][_0x3882e7*(0x17*-0x49+0x360+-0x199*-0x2)+(-0x15b1+-0x148*0x8+0xdd*0x25)],this['_meshInfo'][_0x117d18]['positions'][_0x3882e7*(-0xf6f+0x20*0x35+0x8d2)+(0x83*0x1c+0x1*-0x1f01+-0x10ae*-0x1)],this['_meshInfo'][_0x117d18]['positions'][_0x3882e7*(-0x15c+-0x149c+0x15fb)+(-0x1*-0xe0b+0x1b2b+0x24a*-0x12)]),_0x2826a4['element'][is]['set'](this['_meshInfo'][_0x117d18]['uvs'][_0x3882e7*(-0x2454+-0xd9*-0x1+0x719*0x5)+(-0xc*-0x11d+0x23c1+-0x311d)],this['_meshInfo'][_0x117d18]['uvs'][_0x3882e7*(0x72d+-0x19d1+-0xb*-0x1b2)+(0x19*0xe3+-0xe9a+-0x790)]),_0x2826a4['element'][Wt]['set'](this['_meshInfo'][_0x117d18]['colors'][_0x3882e7*(0x134f*0x1+-0x1887+0x53c)+(0x20*-0xec+0x3d2+-0xcd7*-0x2)],this['_meshInfo'][_0x117d18]['colors'][_0x3882e7*(0xe58+0x426+0x6e*-0x2b)+(-0x2b5*0x4+-0x4a3+-0x168*-0xb)],this['_meshInfo'][_0x117d18]['colors'][_0x3882e7*(0x8*-0x34a+-0x6*-0x4c6+-0x1*0x250)+(0x805+0xb10+-0x1313*0x1)],this['_meshInfo'][_0x117d18]['colors'][_0x3882e7*(0x1365+-0x6f7+-0xc6a)+(0x3*0xc2a+-0x11c0+-0x3bf*0x5)]),_0x2826a4['element'][Ko]['set'](this['_meshInfo'][_0x117d18]['outlines'][_0x3882e7*(0x1795*-0x1+-0x2ec*-0x4+0xbe8)+(-0x1cef+0xe+0x1ce1*0x1)],this['_meshInfo'][_0x117d18]['outlines'][_0x3882e7*(0x1f28+0x1*0x597+-0x24bc)+(-0x24a*-0xb+0x20c+-0x913*0x3)],this['_meshInfo'][_0x117d18]['outlines'][_0x3882e7*(0x18d6+-0x128*-0x2+-0x1b23)+(-0x16ad+-0x4ee*-0x1+0x11c1)]),_0x2826a4['element'][Zo]['set'](this['_meshInfo'][_0x117d18]['shadows'][_0x3882e7*(0x4*0x704+-0x1*-0x1e2f+0x4*-0xe8f)+(-0x527*0x1+0x1b2f*0x1+-0x1608)],this['_meshInfo'][_0x117d18]['shadows'][_0x3882e7*(0xd79+-0x46f*-0x4+-0x79*0x42)+(-0x26e5*0x1+0x24b9+0x22d)],this['_meshInfo'][_0x117d18]['shadows'][_0x3882e7*(-0x3*-0x4c3+-0x2*-0x8e7+-0x1*0x2014)+(0x110c+-0x195a+0x10*0x85)])),_0x2826a4['next']();_0x2826a4['end'](),this['_meshInfo'][_0x117d18]['meshInstan'+'ce']['mesh']['aabb']['compute'](this['_meshInfo'][_0x117d18]['positions']),this['_meshInfo'][_0x117d18]['meshInstan'+'ce']['_aabbVer']=-(0x1*0x1add+-0x13d5+-0x707*0x1);}this['_aabbDirty']=!(-0xf52+0x1575*0x1+0x1*-0x623);}['_onFontRen'+'der'](){this['font']=this['_font'];}['_onFontLoa'+'d'](_0xa4f0fd){this['font']!==_0xa4f0fd['resource']&&(this['font']=_0xa4f0fd['resource']);}['_onFontCha'+'nge'](_0x26a593,_0x40b05f,_0x52ee16,_0x388e2a){if(_0x40b05f==='data'){this['_font']['data']=_0x52ee16;const _0x44c5ca=this['_font']['data']['info']['maps']['length'];for(let _0x42f104=0xf4b+0x353+-0x129e;_0x42f104<_0x44c5ca;_0x42f104++){if(!this['_meshInfo'][_0x42f104])continue;const _0x4dba2b=this['_meshInfo'][_0x42f104]['meshInstan'+'ce'];_0x4dba2b&&(_0x4dba2b['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x4dba2b['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x4dba2b['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x42f104]['width']));}}}['_onFontRem'+'ove'](_0x50ef9f){}['_setTextur'+'eParams'](_0x2a0c86,_0x41cb54){this['_font']&&(this['_font']['type']===Rh?(_0x2a0c86['deletePara'+'meter']('texture_em'+'issiveMap'),_0x2a0c86['deletePara'+'meter']('texture_op'+'acityMap'),_0x2a0c86['setParamet'+'er']('texture_ms'+'dfMap',_0x41cb54)):this['_font']['type']===dR&&(_0x2a0c86['deletePara'+'meter']('texture_ms'+'dfMap'),_0x2a0c86['setParamet'+'er']('texture_em'+'issiveMap',_0x41cb54),_0x2a0c86['setParamet'+'er']('texture_op'+'acityMap',_0x41cb54)));}['_getPxRang'+'e'](_0x35d33e){const _0x450f76=Object['keys'](this['_font']['data']['chars']);for(let _0x5094c2=-0xb*-0x1e2+-0x13fe+-0xb8;_0x5094c2<_0x450f76['length'];_0x5094c2++){const _0x8bd0a3=this['_font']['data']['chars'][_0x450f76[_0x5094c2]];if(_0x8bd0a3['range'])return(_0x8bd0a3['scale']||-0x1967+0x93d+0x102b)*_0x8bd0a3['range'];}return-0x40f*0x6+-0x895+-0x3*-0xafb;}['_getUv'](_0x4c6a2e){const _0x2f14f6=this['_font']['data'];if(!_0x2f14f6['chars'][_0x4c6a2e])return _0x2f14f6['chars']['\x20']?this['_getUv']('\x20'):[-0x1c5f+0x1985+0x49*0xa,-0x3*0xc4d+0x227a+-0x3*-0xcf,-0x90c+0x19f7+-0x3d*0x47,-0x153+0xce7*0x1+-0xb94];const _0x55d961=_0x2f14f6['chars'][_0x4c6a2e]['map'],_0x1c141e=_0x2f14f6['info']['maps'][_0x55d961]['width'],_0x5380fe=_0x2f14f6['info']['maps'][_0x55d961]['height'],_0x16cb41=_0x2f14f6['chars'][_0x4c6a2e]['x'],_0x29b6ea=_0x2f14f6['chars'][_0x4c6a2e]['y'],_0x572c70=_0x16cb41,_0x5f7e3e=_0x29b6ea,_0x13aec2=_0x16cb41+_0x2f14f6['chars'][_0x4c6a2e]['width'],_0x3ebf55=_0x29b6ea-_0x2f14f6['chars'][_0x4c6a2e]['height'],_0x3a6c61=0x14a7+0x1383+-0x2829-_0x2f14f6['chars'][_0x4c6a2e]['height']/_0x5380fe;return[_0x572c70/_0x1c141e,_0x3a6c61-_0x5f7e3e/_0x5380fe,_0x13aec2/_0x1c141e,_0x3a6c61-_0x3ebf55/_0x5380fe];}['onEnable'](){this['_fontAsset']['autoLoad']=!(0x1f1d*-0x1+0x13e6+0x1*0xb37),this['_model']&&this['_element']['addModelTo'+'Layers'](this['_model']);}['onDisable'](){this['_fontAsset']['autoLoad']=!(-0x1896+-0x12d6*0x2+0x3e43),this['_model']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']);}['_setStenci'+'l'](_0x5a9a54){if(this['_model']){const _0x1ee622=this['_model']['meshInstan'+'ces'];for(let _0x5a7eb8=-0x247a+-0x1ff3*0x1+-0x446d*-0x1;_0x5a7eb8<_0x1ee622['length'];_0x5a7eb8++)_0x1ee622[_0x5a7eb8]['stencilFro'+'nt']=_0x5a9a54,_0x1ee622[_0x5a7eb8]['stencilBac'+'k']=_0x5a9a54;}}['_shouldAut'+'oFitWidth'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth'];}['_shouldAut'+'oFitHeight'](){return this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_shouldAut'+'oFit'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth']||this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_calculate'+'CharsPerTe'+'xture'](_0x56fcbd){const _0x190152={};_0x56fcbd===void(-0x1*-0x4e1+0x1568+-0x1a49)&&(_0x56fcbd=this['_symbols']['length']);for(let _0x5056e2=0x5ed+0x19a9*0x1+-0x1f96,_0xa7cb9d=_0x56fcbd;_0x5056e2<_0xa7cb9d;_0x5056e2++){const _0x16694e=this['_symbols'][_0x5056e2];let _0x20cdc5=this['_font']['data']['chars'][_0x16694e];_0x20cdc5||(_0x20cdc5=this['_font']['data']['chars']['\x20'],_0x20cdc5||(_0x20cdc5=this['_font']['data']['chars'][Object['keys'](this['_font']['data']['chars'])[-0xa*-0x3+0x1*0x125f+-0x127d]]));const _0x3c97c3=_0x20cdc5['map'];_0x190152[_0x3c97c3]?_0x190152[_0x3c97c3]++:_0x190152[_0x3c97c3]=0x1b2+-0x1385*-0x1+-0x1536;}return _0x190152;}['_updateRen'+'derRange'](){const _0x4e8700=this['_rangeStar'+'t']===0xe5*0x1c+-0x3*-0x99f+-0x35e9?-0x187a+0x16f*0x1+0x170b:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeStar'+'t']),_0x312630=this['_rangeEnd']===0x1095*0x1+0x1067*-0x2+0x1039?-0x1312+0xc*0x277+0x5*-0x21a:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeEnd']);for(let _0xea49df=-0x16aa+-0x10fb+0x1*0x27a5,_0x32ed57=this['_meshInfo']['length'];_0xea49df<_0x32ed57;_0xea49df++){const _0x57025b=_0x4e8700[_0xea49df]||-0x113*0x16+-0x3*0x3b3+0x22bb,_0x47d058=_0x312630[_0xea49df]||-0x449*0x4+0x7*-0x36+0x2*0x94f,_0x230b67=this['_meshInfo'][_0xea49df]['meshInstan'+'ce'];if(_0x230b67){const _0x15d4e7=_0x230b67['mesh'];_0x15d4e7&&(_0x15d4e7['primitive'][-0x25a5+-0x1*-0x1c37+0x47*0x22]['base']=_0x57025b*(0x9*0x315+-0x3*-0xa1c+-0x3a0e)*(-0x2*0xe77+0x132b+0x9c5),_0x15d4e7['primitive'][0x1*0x1333+-0x13e0+0xad]['count']=(_0x47d058-_0x57025b)*(-0x588+-0x256*-0x4+-0x3cd)*(0x2501*-0x1+0xd41+0x2*0xbe1));}}}set['text'](_0x26e1be){this['_i18nKey']=null;const _0x46a4b4=_0x26e1be!=null&&_0x26e1be['toString']()||'';this['_setText'](_0x46a4b4);}get['text'](){return this['_text'];}set['key'](_0x3baf4e){const _0x311d28=_0x3baf4e!==null?_0x3baf4e['toString']():null;this['_i18nKey']!==_0x311d28&&(this['_i18nKey']=_0x311d28,_0x311d28?(this['_fontAsset']['disableLoc'+'alization']=!(0x10*-0x15b+0x128c*0x2+0x1*-0xf67),this['_resetLoca'+'lizedText']()):this['_fontAsset']['disableLoc'+'alization']=!(0x1*0x1744+0xde3+-0x2527*0x1));}get['key'](){return this['_i18nKey'];}set['color'](_0x5c9f76){const _0x5728da=_0x5c9f76['r'],_0x2cad71=_0x5c9f76['g'],_0x7c114e=_0x5c9f76['b'];if(this['_color']===_0x5c9f76&&console['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t'),!(this['_color']['r']===_0x5728da&&this['_color']['g']===_0x2cad71&&this['_color']['b']===_0x7c114e)&&(this['_color']['r']=_0x5728da,this['_color']['g']=_0x2cad71,this['_color']['b']=_0x7c114e,!!this['_model'])){if(this['_symbolCol'+'ors'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_color']),this['_colorUnif'+'orm'][0xa3a+-0x1*0x12c+-0x487*0x2]=We['r'],this['_colorUnif'+'orm'][0x469*0x7+-0x1dfe+-0xe0]=We['g'],this['_colorUnif'+'orm'][0x46*0x47+-0x767*-0x1+-0x1acf]=We['b'];for(let _0x5567d6=0x22cb+-0x17c8+-0xb03,_0x1696f6=this['_model']['meshInstan'+'ces']['length'];_0x5567d6<_0x1696f6;_0x5567d6++)this['_model']['meshInstan'+'ces'][_0x5567d6]['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}this['_element']&&this['_element']['fire']('set:color',this['_color']);}}get['color'](){return this['_color'];}set['opacity'](_0x49249a){if(this['_color']['a']!==_0x49249a&&(this['_color']['a']=_0x49249a,this['_model'])){for(let _0x2be52b=-0x12f3+0x8b*-0xa+-0x1*-0x1861,_0x5b8619=this['_model']['meshInstan'+'ces']['length'];_0x2be52b<_0x5b8619;_0x2be52b++)this['_model']['meshInstan'+'ces'][_0x2be52b]['setParamet'+'er']('material_o'+'pacity',_0x49249a);}this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x49249a);}get['opacity'](){return this['_color']['a'];}set['lineHeight'](_0x25f9a1){const _0x14d98f=this['_lineHeigh'+'t'];this['_lineHeigh'+'t']=_0x25f9a1,this['_scaledLin'+'eHeight']=_0x25f9a1,_0x14d98f!==_0x25f9a1&&this['_font']&&this['_updateTex'+'t']();}get['lineHeight'](){return this['_lineHeigh'+'t'];}set['wrapLines'](_0x4a1173){const _0x168ada=this['_wrapLines'];this['_wrapLines']=_0x4a1173,_0x168ada!==_0x4a1173&&this['_font']&&this['_updateTex'+'t']();}get['wrapLines'](){return this['_wrapLines'];}get['lines'](){return this['_lineConte'+'nts'];}set['spacing'](_0x9e1de8){const _0x21f6b0=this['_spacing'];this['_spacing']=_0x9e1de8,_0x21f6b0!==_0x9e1de8&&this['_font']&&this['_updateTex'+'t']();}get['spacing'](){return this['_spacing'];}set['fontSize'](_0x33e6c9){const _0x1e1c15=this['_fontSize'];this['_fontSize']=_0x33e6c9,this['_originalF'+'ontSize']=_0x33e6c9,_0x1e1c15!==_0x33e6c9&&this['_font']&&this['_updateTex'+'t']();}get['fontSize'](){return this['_fontSize'];}set['fontAsset'](_0x59c70c){this['_fontAsset']['defaultAss'+'et']=_0x59c70c;}get['fontAsset'](){return this['_fontAsset']['localizedA'+'sset'];}set['font'](_0x43af36){let _0x4cb695;if(this['_font']&&(_0x4cb695=this['_font']['type'],this['_font']['off']&&this['_font']['off']('render',this['_onFontRen'+'der'],this)),this['_font']=_0x43af36,this['_fontMinY']=-0x27c+-0x921+-0xb9d*-0x1,this['_fontMaxY']=0x5*0x62+-0x8ff+0x715,!_0x43af36)return;const _0x44321e=this['_font']['data'];for(const _0x243f08 in _0x44321e['chars']){const _0x31e6a7=_0x44321e['chars'][_0x243f08];_0x31e6a7['bounds']&&(this['_fontMinY']=Math['min'](this['_fontMinY'],_0x31e6a7['bounds'][-0x1*0x51+0xf95+-0x1*0xf43]),this['_fontMaxY']=Math['max'](this['_fontMaxY'],_0x31e6a7['bounds'][0x2*0x18a+-0x1*-0x1c55+-0x2*0xfb3]));}if(this['_font']['on']&&this['_font']['on']('render',this['_onFontRen'+'der'],this),this['_fontAsset']['localizedA'+'sset']&&this['_system']['app']['assets']['get'](this['_fontAsset']['localizedA'+'sset'])['resource']!==this['_font']&&(this['_fontAsset']['defaultAss'+'et']=null),_0x43af36['type']!==_0x4cb695){const _0x31ba8f=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x31ba8f);}for(let _0x2a7383=-0x17+0xbbc+-0x1*0xba5,_0x9e59c2=this['_font']['textures']['length'];_0x2a7383<_0x9e59c2;_0x2a7383++)if(!this['_meshInfo'][_0x2a7383])this['_meshInfo'][_0x2a7383]=new vR();else{const _0x27a188=this['_meshInfo'][_0x2a7383]['meshInstan'+'ce'];_0x27a188&&(_0x27a188['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x27a188['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x27a188['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x2a7383]['width']),this['_setTextur'+'eParams'](_0x27a188,this['_font']['textures'][_0x2a7383]));}let _0x1a3ad7=!(-0x1*0x1763+0x4d*-0x18+-0x4*-0x7a7);for(let _0x46b141=this['_font']['textures']['length'];_0x46b141<this['_meshInfo']['length'];_0x46b141++)this['_meshInfo'][_0x46b141]['meshInstan'+'ce']&&(_0x1a3ad7||(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),_0x1a3ad7=!(0x1*0x2271+0x15fb+-0x5c*0x9d)),this['_removeMes'+'hInstance'](this['_meshInfo'][_0x46b141]['meshInstan'+'ce']));this['_meshInfo']['length']>this['_font']['textures']['length']&&(this['_meshInfo']['length']=this['_font']['textures']['length']),this['_updateTex'+'t']();}get['font'](){return this['_font'];}set['alignment'](_0x2b47ff){_0x2b47ff instanceof J?this['_alignment']['set'](_0x2b47ff['x'],_0x2b47ff['y']):this['_alignment']['set'](_0x2b47ff[0x6a1*-0x1+0x1*-0x17cb+0x1e6c],_0x2b47ff[-0x161*-0xe+0xc*0x2aa+-0x3345]),this['_font']&&this['_updateTex'+'t']();}get['alignment'](){return this['_alignment'];}set['autoWidth'](_0x51181f){const _0x29ad84=this['_autoWidth'];if(this['_autoWidth']=_0x51181f,_0x51181f&&Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])<0xa2d+-0x1*-0x16d3+-0x2100+0.0001&&(this['_element']['width']=this['width']),_0x29ad84!==_0x51181f){const _0x4a9409=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x4a9409!==this['_fontSize']&&(this['_fontSize']=_0x4a9409,this['_font']&&this['_updateTex'+'t']());}}get['autoWidth'](){return this['_autoWidth'];}set['autoHeight'](_0x5dbee5){const _0x5138b8=this['_autoHeigh'+'t'];if(this['_autoHeigh'+'t']=_0x5dbee5,_0x5dbee5&&Math['abs'](this['_element']['anchor']['y']-this['_element']['anchor']['w'])<0x4*-0x25+-0xb89*0x2+0x17a6+0.0001&&(this['_element']['height']=this['height']),_0x5138b8!==_0x5dbee5){const _0x1a06be=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x1a06be!==this['_fontSize']&&(this['_fontSize']=_0x1a06be,this['_font']&&this['_updateTex'+'t']());}}get['autoHeight'](){return this['_autoHeigh'+'t'];}set['rtlReorder'](_0xa37b31){this['_rtlReorde'+'r']!==_0xa37b31&&(this['_rtlReorde'+'r']=_0xa37b31,this['_font']&&this['_updateTex'+'t']());}get['rtlReorder'](){return this['_rtlReorde'+'r'];}set['unicodeCon'+'verter'](_0x11e4a4){this['_unicodeCo'+'nverter']!==_0x11e4a4&&(this['_unicodeCo'+'nverter']=_0x11e4a4,this['_setText'](this['_text']));}get['unicodeCon'+'verter'](){return this['_unicodeCo'+'nverter'];}get['aabb'](){if(this['_aabbDirty']){let _0x50156c=!(-0x1111+-0x1832+-0x116*-0x26);for(let _0x51c8ac=-0x2239+0x2*-0x11a5+0x4583;_0x51c8ac<this['_meshInfo']['length'];_0x51c8ac++)this['_meshInfo'][_0x51c8ac]['meshInstan'+'ce']&&(_0x50156c?this['_aabb']['add'](this['_meshInfo'][_0x51c8ac]['meshInstan'+'ce']['aabb']):(this['_aabb']['copy'](this['_meshInfo'][_0x51c8ac]['meshInstan'+'ce']['aabb']),_0x50156c=!(0x1*-0x22ef+-0x1f32*-0x1+0x1d*0x21)));this['_aabbDirty']=!(-0x1*0x354+-0x21*0xb+0x4c*0x10);}return this['_aabb'];}set['outlineCol'+'or'](_0x3a8e47){const _0x897a73=_0x3a8e47 instanceof ie?_0x3a8e47['r']:_0x3a8e47[-0x1c1*0xb+0x5cb+-0x4*-0x360],_0x4d4f1d=_0x3a8e47 instanceof ie?_0x3a8e47['g']:_0x3a8e47[0x4*-0x6ef+0x1da8+0x1eb*-0x1],_0x58f7ef=_0x3a8e47 instanceof ie?_0x3a8e47['b']:_0x3a8e47[0x1ed7+-0x1900+0x5d5*-0x1],_0x3a7c81=_0x3a8e47 instanceof ie?_0x3a8e47['a']:_0x3a8e47[0x247a+-0x34b+-0x212c];if(this['_outlineCo'+'lor']===_0x3a8e47&&console['warn']('Setting\x20el'+'ement.outl'+'ineColor\x20t'+'o\x20itself\x20w'+'ill\x20have\x20n'+'o\x20effect'),!(this['_outlineCo'+'lor']['r']===_0x897a73&&this['_outlineCo'+'lor']['g']===_0x4d4f1d&&this['_outlineCo'+'lor']['b']===_0x58f7ef&&this['_outlineCo'+'lor']['a']===_0x3a7c81)&&(this['_outlineCo'+'lor']['r']=_0x897a73,this['_outlineCo'+'lor']['g']=_0x4d4f1d,this['_outlineCo'+'lor']['b']=_0x58f7ef,this['_outlineCo'+'lor']['a']=_0x3a7c81,!!this['_model'])){if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][0x1768+0x83c+-0x1fa4]=We['r'],this['_outlineCo'+'lorUniform'][0x1ab4*0x1+-0x124b*0x1+-0x868]=We['g'],this['_outlineCo'+'lorUniform'][0x11ad+0x2f*-0x5d+-0x98]=We['b'],this['_outlineCo'+'lorUniform'][0x13ce+-0x129d+-0x2*0x97]=We['a'];for(let _0x38d266=-0xd6*0xe+-0x1421*-0x1+-0x86d,_0x8c20d9=this['_model']['meshInstan'+'ces']['length'];_0x38d266<_0x8c20d9;_0x38d266++)this['_model']['meshInstan'+'ces'][_0x38d266]['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']);}this['_element']&&this['_element']['fire']('set:outlin'+'e',this['_color']);}}get['outlineCol'+'or'](){return this['_outlineCo'+'lor'];}set['outlineThi'+'ckness'](_0x8755e0){const _0xcd7899=this['_outlineTh'+'ickness'];if(this['_outlineTh'+'ickness']=_0x8755e0,_0xcd7899!==_0x8755e0&&this['_font']){if(!this['_model'])return;if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{for(let _0x1f608d=0x1*-0xc7a+0x1*-0x186+0xe*0x100,_0x3c1f5f=this['_model']['meshInstan'+'ces']['length'];_0x1f608d<_0x3c1f5f;_0x1f608d++)this['_model']['meshInstan'+'ces'][_0x1f608d]['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']);}}}get['outlineThi'+'ckness'](){return this['_outlineTh'+'ickness'];}set['shadowColo'+'r'](_0x16b11d){const _0x419837=_0x16b11d instanceof ie?_0x16b11d['r']:_0x16b11d[0x1*0x74b+0x2*-0xab9+0xe27*0x1],_0x2bd86e=_0x16b11d instanceof ie?_0x16b11d['g']:_0x16b11d[0x1975+-0xdb9*-0x2+0x16e*-0x25],_0x1b17a8=_0x16b11d instanceof ie?_0x16b11d['b']:_0x16b11d[-0x414+0x2235+-0x1e1f],_0x3119e6=_0x16b11d instanceof ie?_0x16b11d['a']:_0x16b11d[-0x6cd*-0x3+0x1dac+-0x3210];if(this['_shadowCol'+'or']===_0x16b11d&&w['warn']('Setting\x20el'+'ement.shad'+'owColor\x20to'+'\x20itself\x20wi'+'ll\x20have\x20no'+'\x20effect'),!(this['_shadowCol'+'or']['r']===_0x419837&&this['_shadowCol'+'or']['g']===_0x2bd86e&&this['_shadowCol'+'or']['b']===_0x1b17a8&&this['_shadowCol'+'or']['a']===_0x3119e6)&&(this['_shadowCol'+'or']['r']=_0x419837,this['_shadowCol'+'or']['g']=_0x2bd86e,this['_shadowCol'+'or']['b']=_0x1b17a8,this['_shadowCol'+'or']['a']=_0x3119e6,!!this['_model'])){if(this['_symbolSha'+'dowParams'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][0x2df+0x263d+0x148e*-0x2]=We['r'],this['_shadowCol'+'orUniform'][-0x2*-0x45a+0x1c1*-0x5+0x12*0x1]=We['g'],this['_shadowCol'+'orUniform'][-0xf*0x101+-0x997+0x62a*0x4]=We['b'],this['_shadowCol'+'orUniform'][0x145*-0xc+0x535*0x5+-0xaca]=We['a'];for(let _0x2f9a05=0x11b*-0x17+0xf*0x1c1+0x1*-0xe2,_0x4bfe20=this['_model']['meshInstan'+'ces']['length'];_0x2f9a05<_0x4bfe20;_0x2f9a05++)this['_model']['meshInstan'+'ces'][_0x2f9a05]['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']);}}}get['shadowColo'+'r'](){return this['_shadowCol'+'or'];}set['shadowOffs'+'et'](_0x20175a){const _0x48c84f=_0x20175a instanceof J?_0x20175a['x']:_0x20175a[-0x5*0x6d9+-0xd3b+0xbde*0x4],_0x4018db=_0x20175a instanceof J?_0x20175a['y']:_0x20175a[-0x16e3+-0x1e7f+0x3563];if(!(this['_shadowOff'+'set']['x']===_0x48c84f&&this['_shadowOff'+'set']['y']===_0x4018db)&&(this['_shadowOff'+'set']['set'](_0x48c84f,_0x4018db),this['_font']&&this['_model'])){if(this['_symbolSha'+'dowParams'])this['_updateTex'+'t']();else for(let _0x290b14=-0xef6*0x1+-0x1fc9*0x1+0x2ebf,_0x557b28=this['_model']['meshInstan'+'ces']['length'];_0x290b14<_0x557b28;_0x290b14++){const _0x255247=-this['_font']['data']['info']['maps'][_0x290b14]['width']/this['_font']['data']['info']['maps'][_0x290b14]['height'];this['_shadowOff'+'setUniform'][0x28*0x98+-0x1*-0xdeb+-0x25ab]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][-0x29*0xd+0xbcd+-0x9b7]=_0x255247*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'],this['_model']['meshInstan'+'ces'][_0x290b14]['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']);}}}get['shadowOffs'+'et'](){return this['_shadowOff'+'set'];}set['minFontSiz'+'e'](_0x59eb10){this['_minFontSi'+'ze']!==_0x59eb10&&(this['_minFontSi'+'ze']=_0x59eb10,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['minFontSiz'+'e'](){return this['_minFontSi'+'ze'];}set['maxFontSiz'+'e'](_0x4cbc78){this['_maxFontSi'+'ze']!==_0x4cbc78&&(this['_maxFontSi'+'ze']=_0x4cbc78,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['maxFontSiz'+'e'](){return this['_maxFontSi'+'ze'];}set['autoFitWid'+'th'](_0xab9972){this['_autoFitWi'+'dth']!==_0xab9972&&(this['_autoFitWi'+'dth']=_0xab9972,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitWid'+'th'](){return this['_autoFitWi'+'dth'];}set['autoFitHei'+'ght'](_0x1d30eb){this['_autoFitHe'+'ight']!==_0x1d30eb&&(this['_autoFitHe'+'ight']=_0x1d30eb,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitHei'+'ght'](){return this['_autoFitHe'+'ight'];}set['maxLines'](_0x435e2c){this['_maxLines']!==_0x435e2c&&(_0x435e2c===null&&this['_maxLines']===-(0x2d*-0x89+-0x19b*0x4+0x1e82)||(this['_maxLines']=_0x435e2c===null?-(0x623*-0x1+0x11f1*0x1+-0x9f*0x13):_0x435e2c,this['font']&&this['_wrapLines']&&this['_updateTex'+'t']()));}get['maxLines'](){return this['_maxLines'];}set['enableMark'+'up'](_0x1a7ae3){if(_0x1a7ae3=!!_0x1a7ae3,this['_enableMar'+'kup']===_0x1a7ae3)return;this['_enableMar'+'kup']=_0x1a7ae3,this['font']&&this['_updateTex'+'t']();const _0x735149=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x735149);}get['enableMark'+'up'](){return this['_enableMar'+'kup'];}get['symbols'](){return this['_symbols'];}get['symbolColo'+'rs'](){return this['_symbolCol'+'ors']===null?null:this['_symbolCol'+'ors']['map'](function(_0x47b0a4){return this['_colorPale'+'tte']['slice'](_0x47b0a4*(-0x105*0x21+-0x173a+0x38e2),_0x47b0a4*(0x101b*0x1+-0x1704+0x6ec)+(-0x1249*-0x1+-0x1a2f+0x7e9));},this);}get['symbolOutl'+'ineParams'](){return this['_symbolOut'+'lineParams']===null?null:this['_symbolOut'+'lineParams']['map'](function(_0x461d75){return this['_outlinePa'+'lette']['slice'](_0x461d75*(-0x1*0x1ab9+0x2510+-0x1*0xa52),_0x461d75*(-0x101b+-0x5*-0x1a3+0x7f1*0x1)+(0x17f4+0x5c1+0x5*-0x5f0));},this);}get['symbolShad'+'owParams'](){return this['_symbolSha'+'dowParams']===null?null:this['_symbolSha'+'dowParams']['map'](function(_0x51d68d){return this['_shadowPal'+'ette']['slice'](_0x51d68d*(-0x10e+0x265d+-0x2549),_0x51d68d*(-0x232b+-0x1*-0x190d+-0xec*-0xb)+(0x1*-0x2044+-0x509*-0x5+0x71d));},this);}get['rtl'](){return this['_rtl'];}set['rangeStart'](_0x4ba9be){_0x4ba9be=Math['max'](0x2b2*-0x6+-0x1913+0x293f,Math['min'](_0x4ba9be,this['_symbols']['length'])),_0x4ba9be!==this['_rangeStar'+'t']&&(this['_rangeStar'+'t']=_0x4ba9be,this['_updateRen'+'derRange']());}get['rangeStart'](){return this['_rangeStar'+'t'];}set['rangeEnd'](_0x17dbcf){_0x17dbcf=Math['max'](this['_rangeStar'+'t'],Math['min'](_0x17dbcf,this['_symbols']['length'])),_0x17dbcf!==this['_rangeEnd']&&(this['_rangeEnd']=_0x17dbcf,this['_updateRen'+'derRange']());}get['rangeEnd'](){return this['_rangeEnd'];}}const Ef=new D(),Zg=new te(),Pi=new D(),MR=new D(),ws=new te(),bc=new te(),Ac=new te(),$a=new te();class hs extends we{constructor(_0x79a57,_0x34a7ed){super(_0x79a57,_0x34a7ed),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_beingInit'+'ialized']=!(-0x1*0x129e+-0x1a61*0x1+0x2d00),this['_anchor']=new re(),this['_localAnch'+'or']=new re(),this['_pivot']=new J(),this['_width']=this['_calculate'+'dWidth']=0x30b*-0x8+-0x1418+0x4*0xb24,this['_height']=this['_calculate'+'dHeight']=0x59*0xf+0x13*0xb7+-0x12ac,this['_margin']=new re(0x11a3+0xb20+0x1*-0x1cc3,0x21ca+0x51+-0x221b,-(-0x5*-0x759+0x21e7+-0x4684),-(-0x20e*-0x7+-0x2381+0x153f)),this['_modelTran'+'sform']=new te(),this['_screenToW'+'orld']=new te(),this['_anchorTra'+'nsform']=new te(),this['_anchorDir'+'ty']=!(-0xc9f+0x1492+-0xb9*0xb),this['_parentWor'+'ldTransfor'+'m']=new te(),this['_screenTra'+'nsform']=new te(),this['_screenCor'+'ners']=[new D(),new D(),new D(),new D()],this['_canvasCor'+'ners']=[new J(),new J(),new J(),new J()],this['_worldCorn'+'ers']=[new D(),new D(),new D(),new D()],this['_cornersDi'+'rty']=!(-0x2*-0x719+0x18*-0x109+0x2f*0x3a),this['_canvasCor'+'nersDirty']=!(0xd87*0x1+0x2093+-0x2e1a),this['_worldCorn'+'ersDirty']=!(0x510+-0x74d+0x23d),this['entity']['on']('insert',this['_onInsert'],this),this['_patch'](),this['screen']=null,this['_type']=eh,this['_image']=null,this['_text']=null,this['_group']=null,this['_drawOrder']=0x1*-0x258e+0xf*-0x23a+0x237a*0x2,this['_fitMode']=th,this['_useInput']=!(-0x1400+-0x1182+0x63*0x61),this['_layers']=[Il],this['_addedMode'+'ls']=[],this['_batchGrou'+'pId']=-(-0x802+0x1*0x1583+0x9*-0x180),this['_batchGrou'+'p']=null,this['_offsetRea'+'dAt']=-0x1a31+0xc66+0x3*0x499,this['_maskOffse'+'t']=0x71d*-0x4+0x147b+0x9d*0xd+0.5,this['_maskedBy']=null);}get['data'](){const _0x280360=this['system']['store'][this['entity']['getGuid']()];return _0x280360?_0x280360['data']:null;}set['enabled'](_0x78f486){const _0x40b753=this['data'],_0x35e838=_0x40b753['enabled'];_0x40b753['enabled']=_0x78f486,this['fire']('set','enabled',_0x35e838,_0x78f486);}get['enabled'](){return this['data']['enabled'];}get['_absLeft'](){return this['_localAnch'+'or']['x']+this['_margin']['x'];}get['_absRight'](){return this['_localAnch'+'or']['z']-this['_margin']['z'];}get['_absTop'](){return this['_localAnch'+'or']['w']-this['_margin']['w'];}get['_absBottom'](){return this['_localAnch'+'or']['y']+this['_margin']['y'];}get['_hasSplitA'+'nchorsX'](){return Math['abs'](this['_anchor']['x']-this['_anchor']['z'])>-0x1*-0x24fb+0x392+-0x288d+0.001;}get['_hasSplitA'+'nchorsY'](){return Math['abs'](this['_anchor']['y']-this['_anchor']['w'])>0x1*0x1c37+-0x950+-0x12e7+0.001;}get['aabb'](){return this['_image']?this['_image']['aabb']:this['_text']?this['_text']['aabb']:null;}set['anchor'](_0x59c07c){_0x59c07c instanceof re?this['_anchor']['copy'](_0x59c07c):this['_anchor']['set'](..._0x59c07c),!this['entity']['_parent']&&!this['screen']?this['_calculate'+'LocalAncho'+'rs']():this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['_anchorDir'+'ty']=!(-0x24f7+0x1a6*-0x17+0x4ae1*0x1),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:anchor',this['_anchor']);}get['anchor'](){return this['_anchor'];}set['batchGroup'+'Id'](_0x124163){var _0x5466fd,_0x4882f4;this['_batchGrou'+'pId']!==_0x124163&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0x14ce+-0x3*-0xb4d+0x5*-0xaf1&&((_0x5466fd=this['system']['app']['batcher'])==null||_0x5466fd['remove'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x124163>=0x6a0+0x4*0x67b+-0x208c&&((_0x4882f4=this['system']['app']['batcher'])==null||_0x4882f4['insert'](St['ELEMENT'],_0x124163,this['entity'])),_0x124163<-0xbeb+0x515*0x7+-0x17a8&&this['_batchGrou'+'pId']>=0xc7*0xd+-0x317*-0x7+-0x54a*0x6&&this['enabled']&&this['entity']['enabled']&&(this['_image']&&this['_image']['_renderabl'+'e']['model']?this['addModelTo'+'Layers'](this['_image']['_renderabl'+'e']['model']):this['_text']&&this['_text']['_model']&&this['addModelTo'+'Layers'](this['_text']['_model'])),this['_batchGrou'+'pId']=_0x124163);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['bottom'](_0x1efa4a){this['_margin']['y']=_0x1efa4a;const _0x46be10=this['entity']['getLocalPo'+'sition'](),_0x1a5b0d=this['_absTop'],_0x37bb07=this['_localAnch'+'or']['y']+_0x1efa4a;this['_setHeight'](_0x1a5b0d-_0x37bb07),_0x46be10['y']=_0x1efa4a+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x46be10);}get['bottom'](){return this['_margin']['y'];}set['calculated'+'Width'](_0x459b1f){this['_setCalcul'+'atedWidth'](_0x459b1f,!(-0x1c63*-0x1+0x10b0+-0x2d13*0x1));}get['calculated'+'Width'](){return this['_calculate'+'dWidth'];}set['calculated'+'Height'](_0x590a16){this['_setCalcul'+'atedHeight'](_0x590a16,!(-0x1f69*0x1+0x1e4c+0x11d));}get['calculated'+'Height'](){return this['_calculate'+'dHeight'];}get['canvasCorn'+'ers'](){if(!this['_canvasCor'+'nersDirty']||!this['screen']||!this['screen']['screen']['screenSpac'+'e'])return this['_canvasCor'+'ners'];const _0x3f8511=this['system']['app']['graphicsDe'+'vice'],_0x34983c=this['screenCorn'+'ers'],_0x1ae3c6=_0x3f8511['canvas']['clientWidt'+'h']/_0x3f8511['width'],_0x295355=_0x3f8511['canvas']['clientHeig'+'ht']/_0x3f8511['height'];for(let _0x4e265f=-0x451+0x903*-0x2+0x1657;_0x4e265f<0xb78*-0x2+-0xc73+0x3*0xbcd;_0x4e265f++)this['_canvasCor'+'ners'][_0x4e265f]['set'](_0x34983c[_0x4e265f]['x']*_0x1ae3c6,(_0x3f8511['height']-_0x34983c[_0x4e265f]['y'])*_0x295355);return this['_canvasCor'+'nersDirty']=!(-0x1c9b+0x1217*-0x2+0x40ca*0x1),this['_canvasCor'+'ners'];}set['drawOrder'](_0x1c37a6){let _0x5ccb4e=0x16d8+0x1d*0xcd+-0x2e11;this['screen']&&(_0x5ccb4e=this['screen']['screen']['priority']),_0x1c37a6>-0x19*-0x5e428+0x199*0x4156+0x455b1&&(w['warn']('Element.dr'+'awOrder\x20la'+'rger\x20than\x20'+'max\x20size\x20o'+'f:\x201677721'+'5'),_0x1c37a6=-0x2ddc13*-0x9+0x17ccfb9+-0x2198c65),this['_drawOrder']=(_0x5ccb4e<<0x64*0x54+-0xcff+-0x13b9)+_0x1c37a6,this['fire']('set:drawor'+'der',this['_drawOrder']);}get['drawOrder'](){return this['_drawOrder'];}set['height'](_0x4d6f36){this['_height']=_0x4d6f36,this['_hasSplitA'+'nchorsY']||this['_setCalcul'+'atedHeight'](_0x4d6f36,!(-0x63b+-0x1*-0x25de+-0x1fa3)),this['fire']('set:height',this['_height']);}get['height'](){return this['_height'];}set['layers'](_0xab3113){if(this['_addedMode'+'ls']['length'])for(let _0x1e2245=-0xdc2+-0x4*0x783+0x642*0x7;_0x1e2245<this['_layers']['length'];_0x1e2245++){const _0x1682bf=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x1e2245]);if(_0x1682bf){for(let _0x1a50b9=0x1*-0x71f+-0x5f3*0x3+0x18f8;_0x1a50b9<this['_addedMode'+'ls']['length'];_0x1a50b9++)_0x1682bf['removeMesh'+'Instances'](this['_addedMode'+'ls'][_0x1a50b9]['meshInstan'+'ces']);}}if(this['_layers']=_0xab3113,!(!this['enabled']||!this['entity']['enabled']||!this['_addedMode'+'ls']['length']))for(let _0x7cb14f=-0x157*0x13+0x241a+-0xaa5;_0x7cb14f<this['_layers']['length'];_0x7cb14f++){const _0x2954cf=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x7cb14f]);if(_0x2954cf){for(let _0x34cee7=0xc3a+0xc1*0x17+-0x1d91;_0x34cee7<this['_addedMode'+'ls']['length'];_0x34cee7++)_0x2954cf['addMeshIns'+'tances'](this['_addedMode'+'ls'][_0x34cee7]['meshInstan'+'ces']);}}}get['layers'](){return this['_layers'];}set['left'](_0xdd0922){this['_margin']['x']=_0xdd0922;const _0x47e055=this['entity']['getLocalPo'+'sition'](),_0x4b7421=this['_absRight'],_0x399ddc=this['_localAnch'+'or']['x']+_0xdd0922;this['_setWidth'](_0x4b7421-_0x399ddc),_0x47e055['x']=_0xdd0922+this['_calculate'+'dWidth']*this['_pivot']['x'],this['entity']['setLocalPo'+'sition'](_0x47e055);}get['left'](){return this['_margin']['x'];}set['margin'](_0xf19145){this['_margin']['copy'](_0xf19145),this['_calculate'+'Size'](!(0x4cf*0x6+-0x8*0x12+-0x1c4a),!(0x1*-0x93a+-0x1*0x1e0c+0x2746)),this['fire']('set:margin',this['_margin']);}get['margin'](){return this['_margin'];}get['maskedBy'](){return this['_maskedBy'];}set['pivot'](_0x1c2011){const {pivot:_0x19ee25,margin:_0x316d9c}=this,_0x147c29=_0x19ee25['x'],_0x42b9c1=_0x19ee25['y'];_0x1c2011 instanceof J?_0x19ee25['copy'](_0x1c2011):_0x19ee25['set'](..._0x1c2011);const _0x599ffa=_0x316d9c['x']+_0x316d9c['z'],_0x390e9a=_0x19ee25['x']-_0x147c29;_0x316d9c['x']+=_0x599ffa*_0x390e9a,_0x316d9c['z']-=_0x599ffa*_0x390e9a;const _0xfdae2c=_0x316d9c['y']+_0x316d9c['w'],_0x517e98=_0x19ee25['y']-_0x42b9c1;_0x316d9c['y']+=_0xfdae2c*_0x517e98,_0x316d9c['w']-=_0xfdae2c*_0x517e98,this['_anchorDir'+'ty']=!(-0x18d*-0x16+-0x1*0xbfe+0x6*-0x3b0),this['_cornersDi'+'rty']=!(-0x2*-0x105f+-0x3a*-0x97+-0x42f4*0x1),this['_worldCorn'+'ersDirty']=!(-0x303*0x5+0x88+0xe87),this['_calculate'+'Size'](!(-0x16e5*-0x1+0x2*-0xc8a+0x230),!(-0x1*0x639+-0x16f*0x10+0x1d2a)),this['_flagChild'+'renAsDirty'](),this['fire']('set:pivot',_0x19ee25);}get['pivot'](){return this['_pivot'];}set['right'](_0x68375e){this['_margin']['z']=_0x68375e;const _0x2b9618=this['entity']['getLocalPo'+'sition'](),_0x51679f=this['_absLeft'],_0x3866b6=this['_localAnch'+'or']['z']-_0x68375e;this['_setWidth'](_0x3866b6-_0x51679f),_0x2b9618['x']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-_0x68375e-this['_calculate'+'dWidth']*(-0x8*0x12b+-0xf6b+0x14*0x13d-this['_pivot']['x']),this['entity']['setLocalPo'+'sition'](_0x2b9618);}get['right'](){return this['_margin']['z'];}get['screenCorn'+'ers'](){if(!this['_cornersDi'+'rty']||!this['screen'])return this['_screenCor'+'ners'];const _0x15b58d=this['entity']['parent']&&this['entity']['parent']['element']&&this['entity']['parent']['element']['screenCorn'+'ers'][0x128b+0x32*0xc5+0x3905*-0x1];this['_screenCor'+'ners'][-0xba7+-0x1ccd+-0x1*-0x2874]['set'](this['_absLeft'],this['_absBottom'],0x1*-0x15d+0xcb8+-0xb5b),this['_screenCor'+'ners'][0x1*-0x35b+0x43*-0x35+-0x191*-0xb]['set'](this['_absRight'],this['_absBottom'],0xf60*0x1+-0x11f4*-0x1+-0x2154),this['_screenCor'+'ners'][-0x1e28+-0x1a73+0x389d]['set'](this['_absRight'],this['_absTop'],0x4bd*-0x3+0x2*0x29+-0xde5*-0x1),this['_screenCor'+'ners'][-0x24b3+0x5e*-0x43+0x3d50]['set'](this['_absLeft'],this['_absTop'],-0x190f+-0xf81+0x2890);const _0x324338=this['screen']['screen']['screenSpac'+'e'];for(let _0x5dc11f=-0x225d+-0x24a*-0xf+-0x7*-0x1;_0x5dc11f<-0x40+-0x6dd*0x3+0x14db*0x1;_0x5dc11f++)this['_screenTra'+'nsform']['transformP'+'oint'](this['_screenCor'+'ners'][_0x5dc11f],this['_screenCor'+'ners'][_0x5dc11f]),_0x324338&&this['_screenCor'+'ners'][_0x5dc11f]['mulScalar'](this['screen']['screen']['scale']),_0x15b58d&&this['_screenCor'+'ners'][_0x5dc11f]['add'](_0x15b58d);return this['_cornersDi'+'rty']=!(0x471*-0x3+0x1215*-0x1+0x2db*0xb),this['_canvasCor'+'nersDirty']=!(0x1b9e+0x1813*0x1+-0x33b1),this['_worldCorn'+'ersDirty']=!(0x4*-0x6d2+0x928+0x1220),this['_screenCor'+'ners'];}get['textWidth'](){return this['_text']?this['_text']['width']:0x77b*0x5+-0x1*-0x20d5+0x3e*-0x122;}get['textHeight'](){return this['_text']?this['_text']['height']:0x86*-0x7+0x195+0x29*0xd;}set['top'](_0x49f36b){this['_margin']['w']=_0x49f36b;const _0x559106=this['entity']['getLocalPo'+'sition'](),_0x4f47f7=this['_absBottom'],_0x27a2e3=this['_localAnch'+'or']['w']-_0x49f36b;this['_setHeight'](_0x27a2e3-_0x4f47f7),_0x559106['y']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-_0x49f36b-this['_calculate'+'dHeight']*(0x226a+-0x841+0x8b8*-0x3-this['_pivot']['y']),this['entity']['setLocalPo'+'sition'](_0x559106);}get['top'](){return this['_margin']['w'];}set['type'](_0x26b341){_0x26b341!==this['_type']&&(this['_type']=_0x26b341,this['_image']&&(this['_image']['destroy'](),this['_image']=null),this['_text']&&(this['_text']['destroy'](),this['_text']=null),_0x26b341===Cu?this['_image']=new cR(this):_0x26b341===jv&&(this['_text']=new PR(this)));}get['type'](){return this['_type'];}set['useInput'](_0x3bacb5){this['_useInput']!==_0x3bacb5&&(this['_useInput']=_0x3bacb5,this['system']['app']['elementInp'+'ut']?_0x3bacb5?this['enabled']&&this['entity']['enabled']&&this['system']['app']['elementInp'+'ut']['addElement'](this):this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this):this['_useInput']===!(0x1891+0xce+0x1*-0x195f)&&w['warn']('Elements\x20w'+'ill\x20not\x20ge'+'t\x20any\x20inpu'+'t\x20events\x20b'+'ecause\x20thi'+'s.system.a'+'pp.element'+'Input\x20is\x20n'+'ot\x20created'),this['fire']('set:useInp'+'ut',_0x3bacb5));}get['useInput'](){return this['_useInput'];}set['fitMode'](_0xc971e5){this['_fitMode']=_0xc971e5,this['_calculate'+'Size'](!(-0x2238+0xcfc*-0x2+-0x3c3*-0x10),!(0x192c+-0x1*0x222a+0x8fe)),this['_image']&&this['_image']['refreshMes'+'h']();}get['fitMode'](){return this['_fitMode'];}set['width'](_0x284162){this['_width']=_0x284162,this['_hasSplitA'+'nchorsX']||this['_setCalcul'+'atedWidth'](_0x284162,!(0x21d1+-0xc93+-0x153e)),this['fire']('set:width',this['_width']);}get['width'](){return this['_width'];}get['worldCorne'+'rs'](){if(!this['_worldCorn'+'ersDirty'])return this['_worldCorn'+'ers'];if(this['screen']){const _0x5efcc=this['screenCorn'+'ers'];if(!this['screen']['screen']['screenSpac'+'e']){ws['copy'](this['screen']['screen']['_screenMat'+'rix']),ws['data'][-0xd*0xfe+-0x1a0c+0x43*0x95]=-ws['data'][-0xa0b+-0x4*0x459+-0xdbe*-0x2],ws['mul2'](this['screen']['getWorldTr'+'ansform'](),ws);for(let _0x2e6ec2=0xaf6+-0x1*-0x22b6+-0x94*0x4f;_0x2e6ec2<-0xc1a+0x3*0xcbd+-0x1a19;_0x2e6ec2++)ws['transformP'+'oint'](_0x5efcc[_0x2e6ec2],this['_worldCorn'+'ers'][_0x2e6ec2]);}}else{const _0x5bb0d6=this['entity']['getLocalPo'+'sition']();ws['setTransla'+'te'](-_0x5bb0d6['x'],-_0x5bb0d6['y'],-_0x5bb0d6['z']),bc['setTRS'](D['ZERO'],this['entity']['getLocalRo'+'tation'](),this['entity']['getLocalSc'+'ale']()),Ac['setTransla'+'te'](_0x5bb0d6['x'],_0x5bb0d6['y'],_0x5bb0d6['z']);const _0x2f0e28=this['entity']['parent']?this['entity']['parent']:this['entity'];$a['copy'](_0x2f0e28['getWorldTr'+'ansform']()),$a['mul'](Ac)['mul'](bc)['mul'](ws),Pi['set'](_0x5bb0d6['x']-this['pivot']['x']*this['calculated'+'Width'],_0x5bb0d6['y']-this['pivot']['y']*this['calculated'+'Height'],_0x5bb0d6['z']),$a['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][0x138c+0x388+-0x1714*0x1]),Pi['set'](_0x5bb0d6['x']+(0xa47*-0x3+0x227d+-0x3a7-this['pivot']['x'])*this['calculated'+'Width'],_0x5bb0d6['y']-this['pivot']['y']*this['calculated'+'Height'],_0x5bb0d6['z']),$a['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][0x2560+0x1885+0x3de4*-0x1]),Pi['set'](_0x5bb0d6['x']+(0xeb*0x19+-0x86+-0x8c*0x29-this['pivot']['x'])*this['calculated'+'Width'],_0x5bb0d6['y']+(0xe*-0x1d7+-0xdb*-0x12+-0x1*-0xa5d-this['pivot']['y'])*this['calculated'+'Height'],_0x5bb0d6['z']),$a['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][-0x13*0x83+-0x1d20+0x31*0xcb]),Pi['set'](_0x5bb0d6['x']-this['pivot']['x']*this['calculated'+'Width'],_0x5bb0d6['y']+(0x2*-0xe96+0x1083*-0x1+-0x2*-0x16d8-this['pivot']['y'])*this['calculated'+'Height'],_0x5bb0d6['z']),$a['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][0x1*-0x1d91+0xc1*0x2d+-0x3*0x173]);}return this['_worldCorn'+'ersDirty']=!(0x3d*0x2b+-0x1083+-0x141*-0x5),this['_worldCorn'+'ers'];}set['fontSize'](_0xd73e0){this['_setValue']('fontSize',_0xd73e0);}get['fontSize'](){return this['_text']?this['_text']['fontSize']:null;}set['minFontSiz'+'e'](_0x118a8b){this['_setValue']('minFontSiz'+'e',_0x118a8b);}get['minFontSiz'+'e'](){return this['_text']?this['_text']['minFontSiz'+'e']:null;}set['maxFontSiz'+'e'](_0x597dcd){this['_setValue']('maxFontSiz'+'e',_0x597dcd);}get['maxFontSiz'+'e'](){return this['_text']?this['_text']['maxFontSiz'+'e']:null;}set['maxLines'](_0x34cb73){this['_setValue']('maxLines',_0x34cb73);}get['maxLines'](){return this['_text']?this['_text']['maxLines']:null;}set['autoFitWid'+'th'](_0x1c1ec1){this['_setValue']('autoFitWid'+'th',_0x1c1ec1);}get['autoFitWid'+'th'](){return this['_text']?this['_text']['autoFitWid'+'th']:null;}set['autoFitHei'+'ght'](_0x1d778a){this['_setValue']('autoFitHei'+'ght',_0x1d778a);}get['autoFitHei'+'ght'](){return this['_text']?this['_text']['autoFitHei'+'ght']:null;}set['color'](_0x1262ce){this['_setValue']('color',_0x1262ce);}get['color'](){return this['_text']?this['_text']['color']:this['_image']?this['_image']['color']:null;}set['font'](_0x31f8bf){this['_setValue']('font',_0x31f8bf);}get['font'](){return this['_text']?this['_text']['font']:null;}set['fontAsset'](_0x5c8f49){this['_setValue']('fontAsset',_0x5c8f49);}get['fontAsset'](){return this['_text']&&typeof this['_text']['fontAsset']=='number'?this['_text']['fontAsset']:null;}set['spacing'](_0x23d729){this['_setValue']('spacing',_0x23d729);}get['spacing'](){return this['_text']?this['_text']['spacing']:null;}set['lineHeight'](_0x3923a3){this['_setValue']('lineHeight',_0x3923a3);}get['lineHeight'](){return this['_text']?this['_text']['lineHeight']:null;}set['wrapLines'](_0x5800fb){this['_setValue']('wrapLines',_0x5800fb);}get['wrapLines'](){return this['_text']?this['_text']['wrapLines']:null;}set['lines'](_0x1ceefa){this['_setValue']('lines',_0x1ceefa);}get['lines'](){return this['_text']?this['_text']['lines']:null;}set['alignment'](_0x4a05e5){this['_setValue']('alignment',_0x4a05e5);}get['alignment'](){return this['_text']?this['_text']['alignment']:null;}set['autoWidth'](_0x208ef4){this['_setValue']('autoWidth',_0x208ef4);}get['autoWidth'](){return this['_text']?this['_text']['autoWidth']:null;}set['autoHeight'](_0x57db6b){this['_setValue']('autoHeight',_0x57db6b);}get['autoHeight'](){return this['_text']?this['_text']['autoHeight']:null;}set['rtlReorder'](_0x4c451d){this['_setValue']('rtlReorder',_0x4c451d);}get['rtlReorder'](){return this['_text']?this['_text']['rtlReorder']:null;}set['unicodeCon'+'verter'](_0xfe977b){this['_setValue']('unicodeCon'+'verter',_0xfe977b);}get['unicodeCon'+'verter'](){return this['_text']?this['_text']['unicodeCon'+'verter']:null;}set['text'](_0x52168d){this['_setValue']('text',_0x52168d);}get['text'](){return this['_text']?this['_text']['text']:null;}set['key'](_0x1ee776){this['_setValue']('key',_0x1ee776);}get['key'](){return this['_text']?this['_text']['key']:null;}set['texture'](_0x6920b6){this['_setValue']('texture',_0x6920b6);}get['texture'](){return this['_image']?this['_image']['texture']:null;}set['textureAss'+'et'](_0x122293){this['_setValue']('textureAss'+'et',_0x122293);}get['textureAss'+'et'](){return this['_image']?this['_image']['textureAss'+'et']:null;}set['material'](_0x43cfab){this['_setValue']('material',_0x43cfab);}get['material'](){return this['_image']?this['_image']['material']:null;}set['materialAs'+'set'](_0x21fb4f){this['_setValue']('materialAs'+'set',_0x21fb4f);}get['materialAs'+'set'](){return this['_image']?this['_image']['materialAs'+'set']:null;}set['sprite'](_0x46be21){this['_setValue']('sprite',_0x46be21);}get['sprite'](){return this['_image']?this['_image']['sprite']:null;}set['spriteAsse'+'t'](_0x2cfc48){this['_setValue']('spriteAsse'+'t',_0x2cfc48);}get['spriteAsse'+'t'](){return this['_image']?this['_image']['spriteAsse'+'t']:null;}set['spriteFram'+'e'](_0x34efcf){this['_setValue']('spriteFram'+'e',_0x34efcf);}get['spriteFram'+'e'](){return this['_image']?this['_image']['spriteFram'+'e']:null;}set['pixelsPerU'+'nit'](_0x323348){this['_setValue']('pixelsPerU'+'nit',_0x323348);}get['pixelsPerU'+'nit'](){return this['_image']?this['_image']['pixelsPerU'+'nit']:null;}set['opacity'](_0xc23042){this['_setValue']('opacity',_0xc23042);}get['opacity'](){return this['_text']?this['_text']['opacity']:this['_image']?this['_image']['opacity']:null;}set['rect'](_0x1cba96){this['_setValue']('rect',_0x1cba96);}get['rect'](){return this['_image']?this['_image']['rect']:null;}set['mask'](_0x2f0d69){this['_setValue']('mask',_0x2f0d69);}get['mask'](){return this['_image']?this['_image']['mask']:null;}set['outlineCol'+'or'](_0x4cdd07){this['_setValue']('outlineCol'+'or',_0x4cdd07);}get['outlineCol'+'or'](){return this['_text']?this['_text']['outlineCol'+'or']:null;}set['outlineThi'+'ckness'](_0x319068){this['_setValue']('outlineThi'+'ckness',_0x319068);}get['outlineThi'+'ckness'](){return this['_text']?this['_text']['outlineThi'+'ckness']:null;}set['shadowColo'+'r'](_0x55dbf3){this['_setValue']('shadowColo'+'r',_0x55dbf3);}get['shadowColo'+'r'](){return this['_text']?this['_text']['shadowColo'+'r']:null;}set['shadowOffs'+'et'](_0xea1694){this['_setValue']('shadowOffs'+'et',_0xea1694);}get['shadowOffs'+'et'](){return this['_text']?this['_text']['shadowOffs'+'et']:null;}set['enableMark'+'up'](_0x194b56){this['_setValue']('enableMark'+'up',_0x194b56);}get['enableMark'+'up'](){return this['_text']?this['_text']['enableMark'+'up']:null;}set['rangeStart'](_0x589f00){this['_setValue']('rangeStart',_0x589f00);}get['rangeStart'](){return this['_text']?this['_text']['rangeStart']:null;}set['rangeEnd'](_0x1cf998){this['_setValue']('rangeEnd',_0x1cf998);}get['rangeEnd'](){return this['_text']?this['_text']['rangeEnd']:null;}['_setValue'](_0x364aa0,_0x30a61b){this['_text']?(this['_text'][_0x364aa0]!==_0x30a61b&&this['_dirtyBatc'+'h'](),this['_text'][_0x364aa0]=_0x30a61b):this['_image']&&(this['_image'][_0x364aa0]!==_0x30a61b&&this['_dirtyBatc'+'h'](),this['_image'][_0x364aa0]=_0x30a61b);}['_patch'](){this['entity']['_sync']=this['_sync'],this['entity']['setPositio'+'n']=this['_setPositi'+'on'],this['entity']['setLocalPo'+'sition']=this['_setLocalP'+'osition'];}['_unpatch'](){this['entity']['_sync']=lt['prototype']['_sync'],this['entity']['setPositio'+'n']=lt['prototype']['setPositio'+'n'],this['entity']['setLocalPo'+'sition']=lt['prototype']['setLocalPo'+'sition'];}['_setPositi'+'on'](_0x5c472f,_0x119a1c,_0x2ae6df){if(!this['element']['screen']){lt['prototype']['setPositio'+'n']['call'](this,_0x5c472f,_0x119a1c,_0x2ae6df);return;}_0x5c472f instanceof D?Ef['copy'](_0x5c472f):Ef['set'](_0x5c472f,_0x119a1c,_0x2ae6df),this['getWorldTr'+'ansform'](),Zg['copy'](this['element']['_screenToW'+'orld'])['invert'](),Zg['transformP'+'oint'](Ef,this['localPosit'+'ion']),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_setLocalP'+'osition'](_0x48b3b0,_0x157dd0,_0x2e89f7){_0x48b3b0 instanceof D?this['localPosit'+'ion']['copy'](_0x48b3b0):this['localPosit'+'ion']['set'](_0x48b3b0,_0x157dd0,_0x2e89f7);const _0x5a0e5b=this['element'],_0x2077fa=this['localPosit'+'ion'],_0x34259b=_0x5a0e5b['_pivot'];_0x5a0e5b['_margin']['x']=_0x2077fa['x']-_0x5a0e5b['_calculate'+'dWidth']*_0x34259b['x'],_0x5a0e5b['_margin']['z']=_0x5a0e5b['_localAnch'+'or']['z']-_0x5a0e5b['_localAnch'+'or']['x']-_0x5a0e5b['_calculate'+'dWidth']-_0x5a0e5b['_margin']['x'],_0x5a0e5b['_margin']['y']=_0x2077fa['y']-_0x5a0e5b['_calculate'+'dHeight']*_0x34259b['y'],_0x5a0e5b['_margin']['w']=_0x5a0e5b['_localAnch'+'or']['w']-_0x5a0e5b['_localAnch'+'or']['y']-_0x5a0e5b['_calculate'+'dHeight']-_0x5a0e5b['_margin']['y'],this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_sync'](){const _0xec73c6=this['element'],_0x41b36d=_0xec73c6['screen'];if(_0x41b36d){if(_0xec73c6['_anchorDir'+'ty']){let _0x38e67b=0x4dd+-0x20a9+0x251*0xc,_0xd7a4e9=-0xc70+0x7*0x52c+-0x6*0x3f6,_0x2ba1b8=-0xdbf+-0x1be0+-0x1*-0x299f,_0x3872aa=0x274+0x7c9+0x5*-0x20c;if(this['_parent']&&this['_parent']['element'])_0x38e67b=this['_parent']['element']['calculated'+'Width'],_0xd7a4e9=this['_parent']['element']['calculated'+'Height'],_0x2ba1b8=this['_parent']['element']['pivot']['x'],_0x3872aa=this['_parent']['element']['pivot']['y'];else{const _0x2c498a=_0x41b36d['screen']['resolution'];_0x38e67b=_0x2c498a['x']/_0x41b36d['screen']['scale'],_0xd7a4e9=_0x2c498a['y']/_0x41b36d['screen']['scale'];}_0xec73c6['_anchorTra'+'nsform']['setTransla'+'te'](_0x38e67b*(_0xec73c6['anchor']['x']-_0x2ba1b8),-(_0xd7a4e9*(_0x3872aa-_0xec73c6['anchor']['y'])),0x2030+-0x1c5d+0x59*-0xb),_0xec73c6['_anchorDir'+'ty']=!(-0x192d*-0x1+0x8a7+-0x21d3),_0xec73c6['_calculate'+'LocalAncho'+'rs']();}_0xec73c6['_sizeDirty']&&_0xec73c6['_calculate'+'Size'](!(0x3a5*-0x7+-0x1835+0x31b9*0x1),!(0xa*0x1cd+-0x4*0x635+-0x6d3*-0x1));}if(this['_dirtyLoca'+'l']){this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']);const _0x5b3527=this['localPosit'+'ion'],_0x12eca5=_0xec73c6['_pivot'];_0xec73c6['_margin']['x']=_0x5b3527['x']-_0xec73c6['_calculate'+'dWidth']*_0x12eca5['x'],_0xec73c6['_margin']['z']=_0xec73c6['_localAnch'+'or']['z']-_0xec73c6['_localAnch'+'or']['x']-_0xec73c6['_calculate'+'dWidth']-_0xec73c6['_margin']['x'],_0xec73c6['_margin']['y']=_0x5b3527['y']-_0xec73c6['_calculate'+'dHeight']*_0x12eca5['y'],_0xec73c6['_margin']['w']=_0xec73c6['_localAnch'+'or']['w']-_0xec73c6['_localAnch'+'or']['y']-_0xec73c6['_calculate'+'dHeight']-_0xec73c6['_margin']['y'],this['_dirtyLoca'+'l']=!(-0x1efb+0x11ee+0xd0e);}if(!_0x41b36d){this['_dirtyWorl'+'d']&&(_0xec73c6['_cornersDi'+'rty']=!(-0x727+-0x11a+0x841),_0xec73c6['_canvasCor'+'nersDirty']=!(0x2b*-0x2e+-0x5b0+0xd6a),_0xec73c6['_worldCorn'+'ersDirty']=!(0x7*0xd4+0xb*-0x1b+-0x4a3)),lt['prototype']['_sync']['call'](this);return;}if(this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['_parent']['element']?_0xec73c6['_screenToW'+'orld']['mul2'](this['_parent']['element']['_modelTran'+'sform'],_0xec73c6['_anchorTra'+'nsform']):_0xec73c6['_screenToW'+'orld']['copy'](_0xec73c6['_anchorTra'+'nsform']),_0xec73c6['_modelTran'+'sform']['mul2'](_0xec73c6['_screenToW'+'orld'],this['localTrans'+'form']),_0x41b36d){_0xec73c6['_screenToW'+'orld']['mul2'](_0x41b36d['screen']['_screenMat'+'rix'],_0xec73c6['_screenToW'+'orld']),_0x41b36d['screen']['screenSpac'+'e']||_0xec73c6['_screenToW'+'orld']['mul2'](_0x41b36d['worldTrans'+'form'],_0xec73c6['_screenToW'+'orld']),this['worldTrans'+'form']['mul2'](_0xec73c6['_screenToW'+'orld'],this['localTrans'+'form']);const _0x27a26a=_0xec73c6['_parentWor'+'ldTransfor'+'m'];_0x27a26a['setIdentit'+'y']();const _0x292f8e=this['_parent'];_0x292f8e&&_0x292f8e['element']&&_0x292f8e!==_0x41b36d&&(ws['setTRS'](D['ZERO'],_0x292f8e['getLocalRo'+'tation'](),_0x292f8e['getLocalSc'+'ale']()),_0x27a26a['mul2'](_0x292f8e['element']['_parentWor'+'ldTransfor'+'m'],ws));const _0x4d26bd=Pi;_0x4d26bd['set'](0x28*0x4b+0x32e+0x2*-0x773,-0x8fe+0x1a88+-0x118a,this['localPosit'+'ion']['z']);const _0x3d0956=MR;_0x3d0956['set'](_0xec73c6['_absLeft']+_0xec73c6['_pivot']['x']*_0xec73c6['calculated'+'Width'],_0xec73c6['_absBottom']+_0xec73c6['_pivot']['y']*_0xec73c6['calculated'+'Height'],0x1893+-0x1038+-0x85b),ws['setTransla'+'te'](-_0x3d0956['x'],-_0x3d0956['y'],-_0x3d0956['z']),bc['setTRS'](_0x4d26bd,this['getLocalRo'+'tation'](),this['getLocalSc'+'ale']()),Ac['setTransla'+'te'](_0x3d0956['x'],_0x3d0956['y'],_0x3d0956['z']),_0xec73c6['_screenTra'+'nsform']['mul2'](_0xec73c6['_parentWor'+'ldTransfor'+'m'],Ac)['mul'](bc)['mul'](ws),_0xec73c6['_cornersDi'+'rty']=!(0x10*-0xb2+0x8c5*0x1+-0x43*-0x9),_0xec73c6['_canvasCor'+'nersDirty']=!(-0x1526+0x1807+-0x2e1),_0xec73c6['_worldCorn'+'ersDirty']=!(0x2526+-0x1e85+-0x6a1);}else this['worldTrans'+'form']['copy'](_0xec73c6['_modelTran'+'sform']);}this['_dirtyWorl'+'d']=!(0x1b2d+0x1e35+-0x3961);}}['_onInsert'](_0x37179e){const _0x621204=this['_parseUpTo'+'Screen']();this['entity']['_dirtifyWo'+'rld'](),this['_updateScr'+'een'](_0x621204['screen']),this['_dirtifyMa'+'sk']();}['_dirtifyMa'+'sk'](){let _0x2c868a=this['entity'];for(;_0x2c868a;){const _0x39db3b=_0x2c868a['parent'];if((_0x39db3b===null||_0x39db3b['screen'])&&_0x2c868a['element']){(!this['system']['_prerender']||!this['system']['_prerender']['length'])&&(this['system']['_prerender']=[],this['system']['app']['once']('prerender',this['_onPrerend'+'er'],this),w['trace'](Vs,'register\x20p'+'rerender'));const _0x20a03c=this['system']['_prerender']['indexOf'](this['entity']);_0x20a03c>=0x1b20+-0xd*0x256+0x33e&&this['system']['_prerender']['splice'](_0x20a03c,0x2*-0x76d+0x9ef+0x4ec),this['system']['_prerender']['indexOf'](_0x2c868a)<0x4*0x322+-0xa51+0x237*-0x1&&this['system']['_prerender']['push'](_0x2c868a),w['trace'](Vs,'set\x20preren'+'der\x20root\x20t'+'o:\x20'+_0x2c868a['name']);}_0x2c868a=_0x39db3b;}}['_onPrerend'+'er'](){for(let _0xe11c8b=-0x11*0x3b+-0xd28+0x1113;_0xe11c8b<this['system']['_prerender']['length'];_0xe11c8b++){const _0x3c1356=this['system']['_prerender'][_0xe11c8b];w['trace'](Vs,'prerender\x20'+'from:\x20'+_0x3c1356['name']),_0x3c1356['element']&&_0x3c1356['element']['syncMask'](0x238*0x11+-0x113a+-0x5*0x419);}this['system']['_prerender']['length']=-0x112b+-0xc2*0x16+0x21d7;}['_bindScree'+'n'](_0x1f18d1){_0x1f18d1['_bindEleme'+'nt'](this);}['_unbindScr'+'een'](_0x39621a){_0x39621a['_unbindEle'+'ment'](this);}['_updateScr'+'een'](_0x12614f){this['screen']&&this['screen']!==_0x12614f&&this['_unbindScr'+'een'](this['screen']['screen']);const _0x27ee37=this['screen'];this['screen']=_0x12614f,this['screen']&&this['_bindScree'+'n'](this['screen']['screen']),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('set:screen',this['screen'],_0x27ee37),this['_anchorDir'+'ty']=!(0x1f69+-0xf85+0x3*-0x54c);const _0x36445f=this['entity']['children'];for(let _0x146562=-0x1d60+0x2364+-0x604,_0x414652=_0x36445f['length'];_0x146562<_0x414652;_0x146562++)_0x36445f[_0x146562]['element']&&_0x36445f[_0x146562]['element']['_updateScr'+'een'](_0x12614f);this['screen']&&this['screen']['screen']['syncDrawOr'+'der']();}['syncMask'](_0x1467e6){const _0x290b08=this['_parseUpTo'+'Screen']();this['_updateMas'+'k'](_0x290b08['mask'],_0x1467e6);}['_setMasked'+'By'](_0x122679){const _0x26c52f=this['_image']||this['_text'];if(_0x122679){const _0x551b06=_0x122679['element']['_image']['_maskRef'];w['trace'](Vs,'masking:\x20'+this['entity']['name']+'\x20with\x20'+_0x551b06),_0x26c52f==null||_0x26c52f['_setStenci'+'l'](new pi({'ref':_0x551b06,'func':dh})),this['_maskedBy']=_0x122679;}else w['trace'](Vs,'no\x20masking'+'\x20on:\x20'+this['entity']['name']),_0x26c52f==null||_0x26c52f['_setStenci'+'l'](null),this['_maskedBy']=null;}['_updateMas'+'k'](_0x433dcc,_0x388432){var _0x2e4109,_0x140887;if(_0x433dcc){if(this['_setMasked'+'By'](_0x433dcc),this['mask']){const _0x43b65b=_0x433dcc['element']['_image']['_maskRef'],_0x2c7420=new pi({'ref':_0x43b65b,'func':dh,'zpass':Ux});this['_image']['_setStenci'+'l'](_0x2c7420),this['_image']['_maskRef']=_0x388432,_0x388432++,w['trace'](Vs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+(_0x2c7420['ref']+(-0x1c22+-0xe2+0x1d05))),w['trace'](Vs,'depth++\x20to'+':\x20',_0x388432),_0x433dcc=this['entity'];}const _0x316bff=this['entity']['children'];for(let _0x40bbb6=-0x140*0x15+0x1*0x269+-0x17d7*-0x1,_0x27f32c=_0x316bff['length'];_0x40bbb6<_0x27f32c;_0x40bbb6++)(_0x2e4109=_0x316bff[_0x40bbb6]['element'])==null||_0x2e4109['_updateMas'+'k'](_0x433dcc,_0x388432);this['mask']&&_0x388432--;}else{if(this['_setMasked'+'By'](null),this['mask']){const _0x47f0ce=new pi({'ref':_0x388432,'func':Wi,'zpass':kx});this['_image']['_setStenci'+'l'](_0x47f0ce),this['_image']['_maskRef']=_0x388432,_0x388432++,w['trace'](Vs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+_0x47f0ce['ref']),w['trace'](Vs,'depth++\x20to'+':\x20',_0x388432),_0x433dcc=this['entity'];}const _0xf5ef39=this['entity']['children'];for(let _0x29155a=-0x3*-0xabc+-0x1*0x3ad+-0x1c87,_0x1f330c=_0xf5ef39['length'];_0x29155a<_0x1f330c;_0x29155a++)(_0x140887=_0xf5ef39[_0x29155a]['element'])==null||_0x140887['_updateMas'+'k'](_0x433dcc,_0x388432);this['mask']&&_0x388432--;}}['_parseUpTo'+'Screen'](){const _0x52832d={'screen':null,'mask':null};let _0x2642e0=this['entity']['_parent'];for(;_0x2642e0&&!_0x2642e0['screen'];)_0x2642e0['element']&&_0x2642e0['element']['mask']&&(_0x52832d['mask']||(_0x52832d['mask']=_0x2642e0)),_0x2642e0=_0x2642e0['parent'];return _0x2642e0&&_0x2642e0['screen']&&(_0x52832d['screen']=_0x2642e0),_0x52832d;}['_onScreenR'+'esize'](_0x94fe26){this['_anchorDir'+'ty']=!(-0x18af+0x245*-0xb+0x31a6),this['_cornersDi'+'rty']=!(0x1961*-0x1+0x13*-0x165+0x33e0),this['_worldCorn'+'ersDirty']=!(-0x576+-0x138a*0x1+0x50*0x50),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('screen:set'+':resolutio'+'n',_0x94fe26);}['_onScreenS'+'paceChange'](){this['fire']('screen:set'+':screenspa'+'ce',this['screen']['screen']['screenSpac'+'e']);}['_onScreenR'+'emove'](){this['screen']&&(this['screen']['_destroyin'+'g']?this['screen']=null:this['_updateScr'+'een'](null));}['_calculate'+'LocalAncho'+'rs'](){let _0x53198f=0x5d8*-0x1+-0xac*0x9+0x3f3*0x4,_0x529aa8=0x1402+0x1*0x26b+-0x1*0x1285;const _0xae1e52=this['entity']['_parent'];if(_0xae1e52&&_0xae1e52['element'])_0x53198f=_0xae1e52['element']['calculated'+'Width'],_0x529aa8=_0xae1e52['element']['calculated'+'Height'];else{if(this['screen']){const _0x4a90ea=this['screen']['screen']['resolution'],_0xa5cc87=this['screen']['screen']['scale'];_0x53198f=_0x4a90ea['x']/_0xa5cc87,_0x529aa8=_0x4a90ea['y']/_0xa5cc87;}}this['_localAnch'+'or']['set'](this['_anchor']['x']*_0x53198f,this['_anchor']['y']*_0x529aa8,this['_anchor']['z']*_0x53198f,this['_anchor']['w']*_0x529aa8);}['getOffsetP'+'osition'](_0x350493,_0x28258c){const _0x1586ac=this['entity']['getLocalPo'+'sition']()['clone']();return _0x1586ac['x']+=_0x350493,_0x1586ac['y']+=_0x28258c,this['_screenToW'+'orld']['transformP'+'oint'](_0x1586ac,_0x1586ac),_0x1586ac;}['onLayersCh'+'anged'](_0x49310f,_0x12a56d){this['addModelTo'+'Layers'](this['_image']?this['_image']['_renderabl'+'e']['model']:this['_text']['_model']),_0x49310f['off']('add',this['onLayerAdd'+'ed'],this),_0x49310f['off']('remove',this['onLayerRem'+'oved'],this),_0x12a56d['on']('add',this['onLayerAdd'+'ed'],this),_0x12a56d['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x5461d6){this['layers']['indexOf'](_0x5461d6['id'])<-0x24d+0x2509*-0x1+0x2756||(this['_image']?_0x5461d6['addMeshIns'+'tances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x5461d6['addMeshIns'+'tances'](this['_text']['_model']['meshInstan'+'ces']));}['onLayerRem'+'oved'](_0x558902){this['layers']['indexOf'](_0x558902['id'])<0x2441*-0x1+-0x1*-0x2247+0x1fa||(this['_image']?_0x558902['removeMesh'+'Instances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x558902['removeMesh'+'Instances'](this['_text']['_model']['meshInstan'+'ces']));}['onEnable'](){var _0x13e2ce;const _0x53bd98=this['system']['app']['scene'],_0x5db7b1=_0x53bd98['layers'];this['_image']&&this['_image']['onEnable'](),this['_text']&&this['_text']['onEnable'](),this['_group']&&this['_group']['onEnable'](),this['useInput']&&this['system']['app']['elementInp'+'ut']&&this['system']['app']['elementInp'+'ut']['addElement'](this),this['_evtLayers'+'Changed']=_0x53bd98['on']('set:layers',this['onLayersCh'+'anged'],this),_0x5db7b1&&(this['_evtLayerA'+'dded']=_0x5db7b1['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x5db7b1['on']('remove',this['onLayerRem'+'oved'],this)),this['_batchGrou'+'pId']>=0x5de+-0x4f3*0x2+0x408&&((_0x13e2ce=this['system']['app']['batcher'])==null||_0x13e2ce['insert'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('enableelem'+'ent');}['onDisable'](){var _0x1c5e90,_0x186ae4,_0x2f1a47,_0x19579a;const _0x46d1b1=this['system']['app']['scene']['layers'];(_0x1c5e90=this['_evtLayers'+'Changed'])==null||_0x1c5e90['off'](),this['_evtLayers'+'Changed']=null,_0x46d1b1&&((_0x186ae4=this['_evtLayerA'+'dded'])==null||_0x186ae4['off'](),this['_evtLayerA'+'dded']=null,(_0x2f1a47=this['_evtLayerR'+'emoved'])==null||_0x2f1a47['off'](),this['_evtLayerR'+'emoved']=null),this['_image']&&this['_image']['onDisable'](),this['_text']&&this['_text']['onDisable'](),this['_group']&&this['_group']['onDisable'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['_batchGrou'+'pId']>=0x2250+0x25cd+0x481d*-0x1&&((_0x19579a=this['system']['app']['batcher'])==null||_0x19579a['remove'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('disableele'+'ment');}['onRemove'](){this['entity']['off']('insert',this['_onInsert'],this),this['_unpatch'](),this['_image']&&this['_image']['destroy'](),this['_text']&&this['_text']['destroy'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['screen']&&this['screen']['screen']&&(this['_unbindScr'+'een'](this['screen']['screen']),this['screen']['screen']['syncDrawOr'+'der']()),this['off']();}['_calculate'+'Size'](_0x56a01b,_0x1c814b){if(!this['entity']['_parent']&&!this['screen'])return;this['_calculate'+'LocalAncho'+'rs']();const _0x43e7a7=this['_absRight']-this['_absLeft'],_0x13650f=this['_absTop']-this['_absBottom'];_0x56a01b?this['_setWidth'](_0x43e7a7):this['_setCalcul'+'atedWidth'](_0x43e7a7,!(-0x16b2+0x272*0xb+0x1*-0x433)),_0x1c814b?this['_setHeight'](_0x13650f):this['_setCalcul'+'atedHeight'](_0x13650f,!(-0xaf6+0x1a5f*-0x1+0x2556));const _0x2c15bd=this['entity']['getLocalPo'+'sition']();_0x2c15bd['x']=this['_margin']['x']+this['_calculate'+'dWidth']*this['_pivot']['x'],_0x2c15bd['y']=this['_margin']['y']+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x2c15bd),this['_sizeDirty']=!(0x264d+0x261a+-0x4c66);}['_setWidth'](_0x1b0db8){this['_width']=_0x1b0db8,this['_setCalcul'+'atedWidth'](_0x1b0db8,!(0x8bf+-0x3*-0xceb+0x3*-0xfd5)),this['fire']('set:width',this['_width']);}['_setHeight'](_0xdee377){this['_height']=_0xdee377,this['_setCalcul'+'atedHeight'](_0xdee377,!(-0x1fd8+0x2070+-0x1*0x97)),this['fire']('set:height',this['_height']);}['_setCalcul'+'atedWidth'](_0x37615f,_0x5c731b){if(!(Math['abs'](_0x37615f-this['_calculate'+'dWidth'])<=0x149c*0x1+0x31*0x30+-0x1dcc*0x1+0.0001)){if(this['_calculate'+'dWidth']=_0x37615f,this['entity']['_dirtifyLo'+'cal'](),_0x5c731b){const _0x1372da=this['entity']['getLocalPo'+'sition'](),_0x3d443c=this['_pivot'];this['_margin']['x']=_0x1372da['x']-this['_calculate'+'dWidth']*_0x3d443c['x'],this['_margin']['z']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-this['_calculate'+'dWidth']-this['_margin']['x'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedWidth',this['_calculate'+'dWidth']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_setCalcul'+'atedHeight'](_0x162053,_0x35d697){if(!(Math['abs'](_0x162053-this['_calculate'+'dHeight'])<=-0x1*0x5a1+0xabe+-0x51d+0.0001)){if(this['_calculate'+'dHeight']=_0x162053,this['entity']['_dirtifyLo'+'cal'](),_0x35d697){const _0x14a537=this['entity']['getLocalPo'+'sition'](),_0x34437d=this['_pivot'];this['_margin']['y']=_0x14a537['y']-this['_calculate'+'dHeight']*_0x34437d['y'],this['_margin']['w']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-this['_calculate'+'dHeight']-this['_margin']['y'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedHeight',this['_calculate'+'dHeight']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_flagChild'+'renAsDirty'](){const _0x27daad=this['entity']['_children'];for(let _0x2f9a2f=0x2*-0x12b+-0xa5e*-0x1+-0x808,_0x323e6d=_0x27daad['length'];_0x2f9a2f<_0x323e6d;_0x2f9a2f++)_0x27daad[_0x2f9a2f]['element']&&(_0x27daad[_0x2f9a2f]['element']['_anchorDir'+'ty']=!(-0xfad+-0x19b6+0x847*0x5),_0x27daad[_0x2f9a2f]['element']['_sizeDirty']=!(-0x850+-0x7*0x29b+0x1a8d));}['addModelTo'+'Layers'](_0x34e97c){this['_addedMode'+'ls']['push'](_0x34e97c);for(let _0x173505=0x7*0x52b+-0x10be*0x1+0x19*-0xc7;_0x173505<this['layers']['length'];_0x173505++){const _0x372f0e=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x173505]);_0x372f0e&&_0x372f0e['addMeshIns'+'tances'](_0x34e97c['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](_0x417a46){const _0x5031b1=this['_addedMode'+'ls']['indexOf'](_0x417a46);_0x5031b1>=0x1654+0xd9a*-0x1+-0x8ba&&this['_addedMode'+'ls']['splice'](_0x5031b1,0xe4b+-0x22cb+0x1481);for(let _0x3aca15=-0x29a*0xa+-0xc4+0x1ac8;_0x3aca15<this['layers']['length'];_0x3aca15++){const _0x541215=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x3aca15]);_0x541215&&_0x541215['removeMesh'+'Instances'](_0x417a46['meshInstan'+'ces']);}}['getMaskOff'+'set'](){const _0x1cdf9d=this['system']['app']['frame'];this['_offsetRea'+'dAt']!==_0x1cdf9d&&(this['_maskOffse'+'t']=0x1432+-0x2*0x239+-0x1c0*0x9+0.5,this['_offsetRea'+'dAt']=_0x1cdf9d);const _0x5963e4=this['_maskOffse'+'t'];return this['_maskOffse'+'t']-=0x16c2+0x14ea+-0x2bac+0.001,_0x5963e4;}['isVisibleF'+'orCamera'](_0x2a3939){let _0x5a98af,_0x44b7fd,_0x122413,_0x2c8008;if(this['maskedBy']){const _0x4a2b52=this['maskedBy']['element']['screenCorn'+'ers'];_0x5a98af=Math['min'](Math['min'](_0x4a2b52[-0x11d*-0x3+-0x1369+0x1012]['x'],_0x4a2b52[-0x1ed2+-0x681*0x1+0x2554]['x']),Math['min'](_0x4a2b52[-0xcc7+0x1d8b*0x1+-0x10c2]['x'],_0x4a2b52[-0x2*0xf34+-0x244e+0x24d*0x1d]['x'])),_0x44b7fd=Math['max'](Math['max'](_0x4a2b52[-0x770+-0x841+0xfb1]['x'],_0x4a2b52[0x24c4+0x534+-0x29f7]['x']),Math['max'](_0x4a2b52[0x5a4+0x2671+-0x1*0x2c13]['x'],_0x4a2b52[-0x165*0xb+-0x1*-0x245e+0x4*-0x541]['x'])),_0x2c8008=Math['min'](Math['min'](_0x4a2b52[-0x1e97*0x1+0x11b0+0xce7]['y'],_0x4a2b52[0xcec+-0x1*0x12ae+0x1*0x5c3]['y']),Math['min'](_0x4a2b52[0xc5+0x16*0x108+-0x1773]['y'],_0x4a2b52[0x1*0xb5b+-0xf8f+0x53*0xd]['y'])),_0x122413=Math['max'](Math['max'](_0x4a2b52[0x2*-0x67c+0x4*-0x5cb+-0x606*-0x6]['y'],_0x4a2b52[-0x19e5+0x2*0xdc6+-0x1*0x1a6]['y']),Math['max'](_0x4a2b52[-0x1*-0x913+-0xec3+-0xa2*-0x9]['y'],_0x4a2b52[-0x1683*0x1+-0x380+0xd03*0x2]['y']));}else{const _0x203859=this['system']['app']['graphicsDe'+'vice']['width'],_0x36afeb=this['system']['app']['graphicsDe'+'vice']['height'],_0x17641c=_0x2a3939['_rect']['z']*_0x203859,_0x469b99=_0x2a3939['_rect']['w']*_0x36afeb;_0x5a98af=_0x2a3939['_rect']['x']*_0x203859,_0x44b7fd=_0x5a98af+_0x17641c,_0x122413=(-0x1174*0x1+0x1d16+0xd*-0xe5-_0x2a3939['_rect']['y'])*_0x36afeb,_0x2c8008=_0x122413-_0x469b99;}const _0x49f013=this['screenCorn'+'ers'],_0x28cf3b=Math['min'](Math['min'](_0x49f013[-0xe81+0x24d*-0xd+0xa*0x471]['x'],_0x49f013[-0x2260*-0x1+-0x17e3+-0xa7c]['x']),Math['min'](_0x49f013[-0x24c1*0x1+0x2241+-0x3*-0xd6]['x'],_0x49f013[0x2473+0x61f+-0x883*0x5]['x'])),_0x5ac20e=Math['max'](Math['max'](_0x49f013[0x256a+0x21bc+-0x4726]['x'],_0x49f013[0x6a1*0x3+-0x23b*0x5+-0x3*0x2e9]['x']),Math['max'](_0x49f013[0xa2*0x1b+0x1607+0x271b*-0x1]['x'],_0x49f013[-0x5e6*0x5+-0xe14+0x2b95*0x1]['x'])),_0x353c44=Math['min'](Math['min'](_0x49f013[0x14f6+0x3*-0x7f1+0x2dd]['y'],_0x49f013[-0x2*-0x1361+0xa6d+-0x312e]['y']),Math['min'](_0x49f013[0xbd3*-0x1+0x1d73+-0x119e]['y'],_0x49f013[-0x1732*0x1+0x91*0x1+0x16a4]['y'])),_0x39e20b=Math['max'](Math['max'](_0x49f013[0x1*-0x94b+0xbfd+0xa*-0x45]['y'],_0x49f013[-0x1914+0x1*-0x19de+0x32f3]['y']),Math['max'](_0x49f013[0x2558+-0x24a9*-0x1+-0x49ff]['y'],_0x49f013[-0x4f3+-0x81a+0xb*0x130]['y']));return!(_0x5ac20e<_0x5a98af||_0x28cf3b>_0x44b7fd||_0x353c44>_0x122413||_0x39e20b<_0x2c8008);}['_isScreenS'+'pace'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['screenSpac'+'e']:!(0x182b+0x1ed*0xe+-0x3320);}['_isScreenC'+'ulled'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['cull']:!(0x1283+-0x18f4*-0x1+-0x15bb*0x2);}['_dirtyBatc'+'h'](){var _0x1f3b47;this['batchGroup'+'Id']!==-(0x2*0xc79+0x2181*0x1+0x1d39*-0x2)&&((_0x1f3b47=this['system']['app']['batcher'])==null||_0x1f3b47['markGroupD'+'irty'](this['batchGroup'+'Id']));}}h(hs,'EVENT_MOUS'+'EDOWN','mousedown'),h(hs,'EVENT_MOUS'+'EUP','mouseup'),h(hs,'EVENT_MOUS'+'EENTER','mouseenter'),h(hs,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(hs,'EVENT_MOUS'+'EMOVE','mousemove'),h(hs,'EVENT_MOUS'+'EWHEEL','mousewheel'),h(hs,'EVENT_CLIC'+'K','click'),h(hs,'EVENT_TOUC'+'HSTART','touchstart'),h(hs,'EVENT_TOUC'+'HEND','touchend'),h(hs,'EVENT_TOUC'+'HMOVE','touchmove'),h(hs,'EVENT_TOUC'+'HCANCEL','touchcance'+'l');class DR{constructor(){this['enabled']=!(-0x1375+-0x1*-0x544+0xe31);}}const IR=['enabled'];class LR extends ct{constructor(_0x4b5bbc){super(_0x4b5bbc),this['id']='element',this['ComponentT'+'ype']=hs,this['DataType']=DR,this['schema']=IR,this['_unicodeCo'+'nverter']=null,this['_rtlReorde'+'r']=null,this['_defaultTe'+'xture']=new _e(_0x4b5bbc['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':_s,'name':'element-sy'+'stem'});const _0x527053=this['_defaultTe'+'xture']['lock'](),_0x241d0d=new Uint8Array(-0x2398+0x21d4+-0xe4*-0x2);_0x241d0d[-0x440+-0x1970+-0x13*-0x190]=-0x2f7+0x12fa+-0x2*0x782,_0x241d0d[0xfca+-0xb1b+-0x4ae]=-0x2*0xa23+0x1*0x128f+-0x15b*-0x2,_0x241d0d[0x11c1+0x1*0x6df+-0x189e*0x1]=-0x1b8b*0x1+-0x11ba+0x12*0x292,_0x241d0d[-0x1*0x1230+-0xad2+-0x143*-0x17]=-0x1*0x14c3+-0x1*0xb03+0x1*0x20c5,_0x527053['set'](_0x241d0d),this['_defaultTe'+'xture']['unlock'](),this['defaultIma'+'geMaterial']=null,this['defaultIma'+'ge9SlicedM'+'aterial']=null,this['defaultIma'+'ge9TiledMa'+'terial']=null,this['defaultIma'+'geMaskMate'+'rial']=null,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=null,this['defaultIma'+'ge9TiledMa'+'skMaterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=null,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=null,this['_defaultTe'+'xtMaterial'+'s']={},this['defaultIma'+'geMaterial'+'s']=[],this['on']('add',this['onAddCompo'+'nent'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['destroy'](){super['destroy'](),this['_defaultTe'+'xture']['destroy']();}['initialize'+'ComponentD'+'ata'](_0x13fa16,_0xb3c7c5,_0x54092c){_0x13fa16['_beingInit'+'ialized']=!(-0x1a*0x133+0x45e*0x6+0x4fa),_0xb3c7c5['anchor']!==void(0x1978+0x1163+-0x2adb)&&(_0xb3c7c5['anchor']instanceof re?_0x13fa16['anchor']['copy'](_0xb3c7c5['anchor']):_0x13fa16['anchor']['set'](_0xb3c7c5['anchor'][-0x1*-0x26ae+0x7b8+-0x2e66],_0xb3c7c5['anchor'][0x184e+-0x2001+-0x3a*-0x22],_0xb3c7c5['anchor'][0xd*0x8e+-0xc5b*-0x1+-0x138f],_0xb3c7c5['anchor'][-0x11d6+-0x1c36+-0x2e0f*-0x1])),_0xb3c7c5['pivot']!==void(0x5d*0x2c+-0x7*0x13f+0x8f*-0xd)&&(_0xb3c7c5['pivot']instanceof J?_0x13fa16['pivot']['copy'](_0xb3c7c5['pivot']):_0x13fa16['pivot']['set'](_0xb3c7c5['pivot'][-0x1*-0x1336+-0x2*-0x113+-0x155c],_0xb3c7c5['pivot'][-0xef0+-0x4f*-0x29+0x24a*0x1]));const _0x11446a=Math['abs'](_0x13fa16['anchor']['x']-_0x13fa16['anchor']['z'])>0x1*-0x569+-0x2b6*0x3+0x1*0xd8b+0.001,_0x3a5295=Math['abs'](_0x13fa16['anchor']['y']-_0x13fa16['anchor']['w'])>0x259e+-0x1670+-0xf2e+0.001;let _0x197a1d=!(0x6*0x101+0xb3f+-0x1144),_0x21a8e0;_0xb3c7c5['margin']!==void(0x21fa+0x158d+-0x3787)&&(_0xb3c7c5['margin']instanceof re?_0x13fa16['margin']['copy'](_0xb3c7c5['margin']):_0x13fa16['_margin']['set'](_0xb3c7c5['margin'][0x1623+0x39*0x6c+-0x15*0x233],_0xb3c7c5['margin'][0x98a+0x15e1+0x1f6a*-0x1],_0xb3c7c5['margin'][0x9*0x393+0x1011+-0x303a*0x1],_0xb3c7c5['margin'][0x5a6+0x7d3*0x2+-0x1549*0x1]),_0x197a1d=!(-0xdc9*-0x1+-0xbc*0x8+-0x7e9)),_0xb3c7c5['left']!==void(0x25e3+0x1a0*-0x18+0x11d)&&(_0x13fa16['_margin']['x']=_0xb3c7c5['left'],_0x197a1d=!(-0x1df*-0xd+0x1528*-0x1+-0x32b)),_0xb3c7c5['bottom']!==void(-0x16*0xd7+-0x7*-0x441+-0xb4d)&&(_0x13fa16['_margin']['y']=_0xb3c7c5['bottom'],_0x197a1d=!(-0x2*-0x6f1+-0x1*-0x2629+-0x340b)),_0xb3c7c5['right']!==void(0xd*-0x2f5+0x1*-0x16a2+0x5*0xc37)&&(_0x13fa16['_margin']['z']=_0xb3c7c5['right'],_0x197a1d=!(0x2088+-0x1*0x1147+-0xf41)),_0xb3c7c5['top']!==void(0x1e5+0xf5c+-0x1141)&&(_0x13fa16['_margin']['w']=_0xb3c7c5['top'],_0x197a1d=!(0x3*-0xb64+0x43*-0x1a+-0x419*-0xa)),_0x197a1d&&(_0x13fa16['margin']=_0x13fa16['_margin']);let _0x17da10=!(-0x505*0x7+-0x204a+0x436e);_0xb3c7c5['width']!==void(0x118c+-0x2696+0x150a)&&!_0x11446a?_0x13fa16['width']=_0xb3c7c5['width']:_0x11446a&&(_0x17da10=!(0x2496+-0x71a+-0x1d7c)),_0xb3c7c5['height']!==void(0xaca*-0x1+0x189b*-0x1+0x2365)&&!_0x3a5295?_0x13fa16['height']=_0xb3c7c5['height']:_0x3a5295&&(_0x17da10=!(-0xb5f+0x1448+-0x8e9)),_0x17da10&&(_0x13fa16['anchor']=_0x13fa16['anchor']),_0xb3c7c5['enabled']!==void(0x16b5+0x4ae+0x7b*-0x39)&&(_0x13fa16['enabled']=_0xb3c7c5['enabled']),_0xb3c7c5['useInput']!==void(0x5b0+0xbb2+-0x1162)&&(_0x13fa16['useInput']=_0xb3c7c5['useInput']),_0xb3c7c5['fitMode']!==void(0xd91*-0x1+-0x1*0x1826+0x25b7)&&(_0x13fa16['fitMode']=_0xb3c7c5['fitMode']),_0x13fa16['batchGroup'+'Id']=_0xb3c7c5['batchGroup'+'Id']===void(0xfd8+0xa31+-0x1a09)||_0xb3c7c5['batchGroup'+'Id']===null?-(-0xa87+0xd*-0x2ad+-0x9*-0x509):_0xb3c7c5['batchGroup'+'Id'],_0xb3c7c5['layers']&&Array['isArray'](_0xb3c7c5['layers'])&&(_0x13fa16['layers']=_0xb3c7c5['layers']['slice'](-0x1*-0x1505+0x255c+-0x3a61)),_0xb3c7c5['type']!==void(-0x1350+0x10bf+0x9*0x49)&&(_0x13fa16['type']=_0xb3c7c5['type']),_0x13fa16['type']===Cu?(_0xb3c7c5['rect']!==void(-0x2*-0xa9d+-0x1a5b+0x521)&&(_0x13fa16['rect']=_0xb3c7c5['rect']),_0xb3c7c5['color']!==void(-0x27c+-0x2114+0x2390)&&(_0x21a8e0=_0xb3c7c5['color'],_0x21a8e0 instanceof ie||(_0x21a8e0=new ie(_0xb3c7c5['color'][0x1418+-0x651+-0xdc7],_0xb3c7c5['color'][-0x1557*0x1+0x439+0x111f],_0xb3c7c5['color'][0x2e*-0x1d+-0x6b2+0xbea])),_0x13fa16['color']=_0x21a8e0),_0xb3c7c5['opacity']!==void(-0x2*-0x2e3+0x3*0x213+0x53*-0x25)&&(_0x13fa16['opacity']=_0xb3c7c5['opacity']),_0xb3c7c5['textureAss'+'et']!==void(0x19a0+0x116c+-0x5*0x89c)&&(_0x13fa16['textureAss'+'et']=_0xb3c7c5['textureAss'+'et']),_0xb3c7c5['texture']&&(_0x13fa16['texture']=_0xb3c7c5['texture']),_0xb3c7c5['spriteAsse'+'t']!==void(-0x1b0e+-0x6fb+0x2209)&&(_0x13fa16['spriteAsse'+'t']=_0xb3c7c5['spriteAsse'+'t']),_0xb3c7c5['sprite']&&(_0x13fa16['sprite']=_0xb3c7c5['sprite']),_0xb3c7c5['spriteFram'+'e']!==void(-0x2538+0x1b52+0x9e6)&&(_0x13fa16['spriteFram'+'e']=_0xb3c7c5['spriteFram'+'e']),_0xb3c7c5['pixelsPerU'+'nit']!==void(-0xe31+-0x1cc0+0x1*0x2af1)&&_0xb3c7c5['pixelsPerU'+'nit']!==null&&(_0x13fa16['pixelsPerU'+'nit']=_0xb3c7c5['pixelsPerU'+'nit']),_0xb3c7c5['materialAs'+'set']!==void(-0x5e*0x2+-0x1*-0x322+-0x266)&&(_0x13fa16['materialAs'+'set']=_0xb3c7c5['materialAs'+'set']),_0xb3c7c5['material']&&(_0x13fa16['material']=_0xb3c7c5['material']),_0xb3c7c5['mask']!==void(-0x194*-0x15+0x19b3+-0x3ad7)&&(_0x13fa16['mask']=_0xb3c7c5['mask'])):_0x13fa16['type']===jv&&(_0xb3c7c5['autoWidth']!==void(0x263b*0x1+-0x3ec*-0x8+-0x459b)&&(_0x13fa16['autoWidth']=_0xb3c7c5['autoWidth']),_0xb3c7c5['autoHeight']!==void(0x173*-0x11+0x71*-0x1a+0x241d)&&(_0x13fa16['autoHeight']=_0xb3c7c5['autoHeight']),_0xb3c7c5['rtlReorder']!==void(0x38*0x1f+-0x83*-0x49+-0x2c23)&&(_0x13fa16['rtlReorder']=_0xb3c7c5['rtlReorder']),_0xb3c7c5['unicodeCon'+'verter']!==void(-0x50*0x2+0xee0+0x30*-0x4c)&&(_0x13fa16['unicodeCon'+'verter']=_0xb3c7c5['unicodeCon'+'verter']),_0xb3c7c5['text']!==null&&_0xb3c7c5['text']!==void(0x6c2+-0x1253*-0x1+-0x1*0x1915)?_0x13fa16['text']=_0xb3c7c5['text']:_0xb3c7c5['key']!==null&&_0xb3c7c5['key']!==void(-0x99+-0x1711*-0x1+-0x1678)&&(_0x13fa16['key']=_0xb3c7c5['key']),_0xb3c7c5['color']!==void(-0x624+-0x14b7*0x1+0x1adb)&&(_0x21a8e0=_0xb3c7c5['color'],_0x21a8e0 instanceof ie||(_0x21a8e0=new ie(_0x21a8e0[0x1*-0x199c+0xf5+-0x1*-0x18a7],_0x21a8e0[-0x148e+0x1060+0x7*0x99],_0x21a8e0[-0x857*-0x3+-0x1*0x3bb+0xc*-0x1c6])),_0x13fa16['color']=_0x21a8e0),_0xb3c7c5['opacity']!==void(0x72b*0x3+-0x34f*-0x1+-0x8*0x31a)&&(_0x13fa16['opacity']=_0xb3c7c5['opacity']),_0xb3c7c5['spacing']!==void(0x1d*0x102+-0x253e+0xc*0xab)&&(_0x13fa16['spacing']=_0xb3c7c5['spacing']),_0xb3c7c5['fontSize']!==void(0x977+0x1*-0x502+-0x475*0x1)&&(_0x13fa16['fontSize']=_0xb3c7c5['fontSize'],_0xb3c7c5['lineHeight']||(_0x13fa16['lineHeight']=_0xb3c7c5['fontSize'])),_0xb3c7c5['lineHeight']!==void(0x8ea+0x1dda+-0x26c4)&&(_0x13fa16['lineHeight']=_0xb3c7c5['lineHeight']),_0xb3c7c5['maxLines']!==void(-0x4e7+0x103*0x17+-0x125e)&&(_0x13fa16['maxLines']=_0xb3c7c5['maxLines']),_0xb3c7c5['wrapLines']!==void(0x1*-0x2141+-0x21d0+-0x123*-0x3b)&&(_0x13fa16['wrapLines']=_0xb3c7c5['wrapLines']),_0xb3c7c5['minFontSiz'+'e']!==void(-0x3*-0x929+0x102a+0x1*-0x2ba5)&&(_0x13fa16['minFontSiz'+'e']=_0xb3c7c5['minFontSiz'+'e']),_0xb3c7c5['maxFontSiz'+'e']!==void(-0xd84+-0x2101*-0x1+-0x3*0x67f)&&(_0x13fa16['maxFontSiz'+'e']=_0xb3c7c5['maxFontSiz'+'e']),_0xb3c7c5['autoFitWid'+'th']&&(_0x13fa16['autoFitWid'+'th']=_0xb3c7c5['autoFitWid'+'th']),_0xb3c7c5['autoFitHei'+'ght']&&(_0x13fa16['autoFitHei'+'ght']=_0xb3c7c5['autoFitHei'+'ght']),_0xb3c7c5['fontAsset']!==void(-0x797+0xd*-0x1dd+-0x7f4*-0x4)&&(_0x13fa16['fontAsset']=_0xb3c7c5['fontAsset']),_0xb3c7c5['font']!==void(-0xc*-0x8b+-0x726+0xa2)&&(_0x13fa16['font']=_0xb3c7c5['font']),_0xb3c7c5['alignment']!==void(-0x3d*-0x3d+0xe77+-0x1d00)&&(_0x13fa16['alignment']=_0xb3c7c5['alignment']),_0xb3c7c5['outlineCol'+'or']!==void(0xc93+0xd2f+-0x19c2)&&(_0x13fa16['outlineCol'+'or']=_0xb3c7c5['outlineCol'+'or']),_0xb3c7c5['outlineThi'+'ckness']!==void(0xb*-0x1cd+0x1478+-0xd*0xd)&&(_0x13fa16['outlineThi'+'ckness']=_0xb3c7c5['outlineThi'+'ckness']),_0xb3c7c5['shadowColo'+'r']!==void(-0x1de0+0x2b*-0x6b+0x2fd9)&&(_0x13fa16['shadowColo'+'r']=_0xb3c7c5['shadowColo'+'r']),_0xb3c7c5['shadowOffs'+'et']!==void(0x21e9+-0xa81*-0x1+-0x2c6a)&&(_0x13fa16['shadowOffs'+'et']=_0xb3c7c5['shadowOffs'+'et']),_0xb3c7c5['enableMark'+'up']!==void(-0x5e*0x29+-0x17f+0x1*0x108d)&&(_0x13fa16['enableMark'+'up']=_0xb3c7c5['enableMark'+'up']));const _0x1920b3=_0x13fa16['_parseUpTo'+'Screen']();_0x1920b3['screen']&&_0x13fa16['_updateScr'+'een'](_0x1920b3['screen']),super['initialize'+'ComponentD'+'ata'](_0x13fa16,_0xb3c7c5,_0x54092c),_0x13fa16['_beingInit'+'ialized']=!(-0xf13*0x1+0x206d+-0x1159),_0x13fa16['type']===Cu&&_0x13fa16['_image']['_meshDirty']&&_0x13fa16['_image']['_updateMes'+'h'](_0x13fa16['_image']['mesh']);}['onAddCompo'+'nent'](_0xef5a7,_0xf10866){_0xef5a7['fire']('element:ad'+'d');}['onRemoveCo'+'mponent'](_0x5f0b59,_0x3b807d){_0x3b807d['onRemove']();}['cloneCompo'+'nent'](_0x1e8e51,_0x3d9114){const _0x1ba7f8=_0x1e8e51['element'],_0x4ba9c0={'enabled':_0x1ba7f8['enabled'],'width':_0x1ba7f8['width'],'height':_0x1ba7f8['height'],'anchor':_0x1ba7f8['anchor']['clone'](),'pivot':_0x1ba7f8['pivot']['clone'](),'margin':_0x1ba7f8['margin']['clone'](),'alignment':_0x1ba7f8['alignment']&&_0x1ba7f8['alignment']['clone']()||_0x1ba7f8['alignment'],'autoWidth':_0x1ba7f8['autoWidth'],'autoHeight':_0x1ba7f8['autoHeight'],'type':_0x1ba7f8['type'],'rect':_0x1ba7f8['rect']&&_0x1ba7f8['rect']['clone']()||_0x1ba7f8['rect'],'rtlReorder':_0x1ba7f8['rtlReorder'],'unicodeConverter':_0x1ba7f8['unicodeCon'+'verter'],'materialAsset':_0x1ba7f8['materialAs'+'set'],'material':_0x1ba7f8['material'],'color':_0x1ba7f8['color']&&_0x1ba7f8['color']['clone']()||_0x1ba7f8['color'],'opacity':_0x1ba7f8['opacity'],'textureAsset':_0x1ba7f8['textureAss'+'et'],'texture':_0x1ba7f8['texture'],'spriteAsset':_0x1ba7f8['spriteAsse'+'t'],'sprite':_0x1ba7f8['sprite'],'spriteFrame':_0x1ba7f8['spriteFram'+'e'],'pixelsPerUnit':_0x1ba7f8['pixelsPerU'+'nit'],'spacing':_0x1ba7f8['spacing'],'lineHeight':_0x1ba7f8['lineHeight'],'wrapLines':_0x1ba7f8['wrapLines'],'layers':_0x1ba7f8['layers'],'fontSize':_0x1ba7f8['fontSize'],'minFontSize':_0x1ba7f8['minFontSiz'+'e'],'maxFontSize':_0x1ba7f8['maxFontSiz'+'e'],'autoFitWidth':_0x1ba7f8['autoFitWid'+'th'],'autoFitHeight':_0x1ba7f8['autoFitHei'+'ght'],'maxLines':_0x1ba7f8['maxLines'],'fontAsset':_0x1ba7f8['fontAsset'],'font':_0x1ba7f8['font'],'useInput':_0x1ba7f8['useInput'],'fitMode':_0x1ba7f8['fitMode'],'batchGroupId':_0x1ba7f8['batchGroup'+'Id'],'mask':_0x1ba7f8['mask'],'outlineColor':_0x1ba7f8['outlineCol'+'or']&&_0x1ba7f8['outlineCol'+'or']['clone']()||_0x1ba7f8['outlineCol'+'or'],'outlineThickness':_0x1ba7f8['outlineThi'+'ckness'],'shadowColor':_0x1ba7f8['shadowColo'+'r']&&_0x1ba7f8['shadowColo'+'r']['clone']()||_0x1ba7f8['shadowColo'+'r'],'shadowOffset':_0x1ba7f8['shadowOffs'+'et']&&_0x1ba7f8['shadowOffs'+'et']['clone']()||_0x1ba7f8['shadowOffs'+'et'],'enableMarkup':_0x1ba7f8['enableMark'+'up']};return _0x1ba7f8['key']!==void(0x1*-0x116d+0x14c*0x1d+-0x142f)&&_0x1ba7f8['key']!==null?_0x4ba9c0['key']=_0x1ba7f8['key']:_0x4ba9c0['text']=_0x1ba7f8['text'],this['addCompone'+'nt'](_0x3d9114,_0x4ba9c0);}['getTextEle'+'mentMateri'+'al'](_0x3b5246,_0x5a439d,_0x1034bc){const _0x42b1a0=(_0x3b5246&&-0x2*-0xa8+0x100a*0x2+0x103*-0x21)|(_0x5a439d&&-0x1928+0xfa1+-0x1*-0x989)|(_0x1034bc&&0x1bf9+-0x21fd+0x2*0x304);let _0x19d5fa=this['_defaultTe'+'xtMaterial'+'s'][_0x42b1a0];if(_0x19d5fa)return _0x19d5fa;let _0x3c635a='TextMateri'+'al';return _0x19d5fa=new Ut(),_0x5a439d?(_0x19d5fa['msdfMap']=this['_defaultTe'+'xture'],_0x19d5fa['msdfTextAt'+'tribute']=_0x1034bc,_0x19d5fa['emissive']['set'](-0x26b+0x1a64+-0x17f8,0xe41+0x1808+-0x2648,0x2*0x1306+-0x1*0x1549+0xb*-0x186)):(_0x3c635a='Bitmap'+_0x3c635a,_0x19d5fa['emissive']['set'](-0x27f*-0x1+0x2355+-0x25d3,-0x1*0x593+-0x903+0xe97,0x101*0x4+-0x63c+0x239*0x1),_0x19d5fa['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x19d5fa['opacityMap']=this['_defaultTe'+'xture'],_0x19d5fa['opacityMap'+'Channel']='a'),_0x3b5246&&(_0x3c635a='ScreenSpac'+'e'+_0x3c635a,_0x19d5fa['depthTest']=!(0x6*-0x38a+0x16b1+-0x4*0x5d)),_0x19d5fa['name']='default'+_0x3c635a,_0x19d5fa['useLightin'+'g']=!(0x1cce+0x3*0x8b9+-0x4*0xdbe),_0x19d5fa['useTonemap']=!(-0xe4d*-0x2+-0x263f+-0x13*-0x82),_0x19d5fa['useFog']=!(-0xb89*0x1+0xe60+0x21*-0x16),_0x19d5fa['useSkybox']=!(0x5*0x2d9+0x26bb+-0x34f7),_0x19d5fa['diffuse']['set'](-0x53*0x2+-0x12fa+0x13a0,0x25f*0x1+0x251c+-0x463*0x9,-0x896*0x2+0x1*0x8f1+-0x12d*-0x7),_0x19d5fa['opacity']=-0x1e95*0x1+-0x25e6+0x447b+0.5,_0x19d5fa['blendType']=Gn,_0x19d5fa['depthWrite']=!(0x1c7b+-0xd*0xfb+-0xfbb),_0x19d5fa['emissiveVe'+'rtexColor']=!(-0x25f3+-0xb*0x371+-0x4bce*-0x1),_0x19d5fa['update'](),this['_defaultTe'+'xtMaterial'+'s'][_0x42b1a0]=_0x19d5fa,_0x19d5fa;}['_createBas'+'eImageMate'+'rial'](){const _0x1f365f=new Ut();return _0x1f365f['diffuse']['set'](0x83b*0x3+-0x1*-0x17b9+-0x2*0x1835,-0x608+-0xb71*-0x1+-0x569,0x8f*-0x1d+-0x26*0x7f+0x230d),_0x1f365f['emissive']['set'](0x61*-0x39+-0x3b+0x26d*0x9,0x1cd4*-0x1+-0x4a*0x17+-0x125*-0x1f,0x1*-0x5b0+0x78a+-0x1d9),_0x1f365f['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x1f365f['opacityMap']=this['_defaultTe'+'xture'],_0x1f365f['opacityMap'+'Channel']='a',_0x1f365f['useLightin'+'g']=!(0xe*-0x185+-0x1*-0x147a+0x1*0xcd),_0x1f365f['useTonemap']=!(-0x3a1*-0x5+0xc6f+-0x3*0xa31),_0x1f365f['useFog']=!(0x6*0x373+-0xa24+-0xa8d),_0x1f365f['useSkybox']=!(0x150a*0x1+0xb*-0x2ac+0x85b),_0x1f365f['blendType']=Gn,_0x1f365f['depthWrite']=!(0x1505+0x1730+0x3af*-0xc),_0x1f365f;}['getImageEl'+'ementMater'+'ial'](_0x5f3f9a,_0x438510,_0x76a98e,_0x4a4144){return _0x5f3f9a?_0x438510?_0x76a98e?(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al',this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['nineSliced'+'Mode']=Pt,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['depthTest']=!(0x1613+0x3*0x4e7+-0x24c7),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaTest']=0x1ff4+0x1ab+-0x219e,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['redWrite']=!(0xbec+0x1e9a+-0x2a85),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['greenWrite']=!(-0x1*0x25f+-0x2*-0x1046+0xf16*-0x2),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['blueWrite']=!(-0x8*0x31c+0x6bb*0x2+-0x4f*-0x25),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaWrite']=!(-0x969*-0x1+-0x807+-0x1*0x161),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']):_0x4a4144?(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['clone'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['nineSliced'+'Mode']=Mt,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['depthTest']=!(-0x196f+0x39+0x1937),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaTest']=0x1480+0x558+-0x19d7,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['redWrite']=!(-0x1198+0x1174+-0x25*-0x1),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['greenWrite']=!(0x15*-0x4b+0x1*-0xdfb+0x1423*0x1),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['blueWrite']=!(-0x10d5*-0x2+-0x47*0x82+0x265),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaWrite']=!(-0x1*0xfb3+0xad6+0x4de),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']):(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']||(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['name']='defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial',this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['depthTest']=!(-0x492+0x1*0x18ac+0x93*-0x23),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaTest']=0x1f+0x261f*0x1+-0x263d,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['redWrite']=!(-0x11fb*0x1+-0x1e8f+0x308b),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['greenWrite']=!(-0xb78+0x1b0f*0x1+-0x3*0x532),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['blueWrite']=!(0x23e9+-0x82a+-0x1bbe),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaWrite']=!(-0x25ef+-0x1fd*-0x11+0x423),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial'])),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']):_0x76a98e?(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']||(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['name']='defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material',this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['nineSliced'+'Mode']=Pt,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['depthTest']=!(-0x6*-0x3+-0x1d1*0xe+0x195d),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material'])),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']):_0x4a4144?(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']||(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['name']='defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial',this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['nineSliced'+'Mode']=Mt,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['depthTest']=!(-0x19bd+0x6c0+-0x12fe*-0x1),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial'])),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']):(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['depthTest']=!(-0x20aa+0xbb*-0x22+0x3981),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']):_0x438510?_0x76a98e?(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']||(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['name']='defaultIma'+'ge9SlicedM'+'askMateria'+'l',this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['nineSliced'+'Mode']=Pt,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaTest']=0x1177*-0x2+0x9*-0x2f+0x2496,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['redWrite']=!(0x39*0x39+0x5af+-0x1*0x125f),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['greenWrite']=!(0xfff+0x18f1+-0x28ef),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['blueWrite']=!(-0xc88+0x11b2+-0x529),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaWrite']=!(0xfd9+0x2392+-0x1*0x336a),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'askMateria'+'l'])),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']):_0x4a4144?(this['defaultIma'+'ge9TiledMa'+'skMaterial']||(this['defaultIma'+'ge9TiledMa'+'skMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'skMaterial']['name']='defaultIma'+'ge9TiledMa'+'skMaterial',this['defaultIma'+'ge9TiledMa'+'skMaterial']['nineSliced'+'Mode']=Mt,this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaTest']=0x3*-0x2eb+-0x1310+-0x946*-0x3,this['defaultIma'+'ge9TiledMa'+'skMaterial']['redWrite']=!(0x19*0xe9+-0x1*0x1989+0x2c9),this['defaultIma'+'ge9TiledMa'+'skMaterial']['greenWrite']=!(-0x10e6+-0x2622+0x3709),this['defaultIma'+'ge9TiledMa'+'skMaterial']['blueWrite']=!(0x836+0xd8a+-0x15bf),this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaWrite']=!(0x4c*-0x25+-0x1244+-0x1*-0x1d41),this['defaultIma'+'ge9TiledMa'+'skMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'skMaterial'])),this['defaultIma'+'ge9TiledMa'+'skMaterial']):(this['defaultIma'+'geMaskMate'+'rial']||(this['defaultIma'+'geMaskMate'+'rial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaskMate'+'rial']['name']='defaultIma'+'geMaskMate'+'rial',this['defaultIma'+'geMaskMate'+'rial']['alphaTest']=-0xec0+0x96*0x12+0x435,this['defaultIma'+'geMaskMate'+'rial']['redWrite']=!(-0x20b8+0x15e9+0xad0),this['defaultIma'+'geMaskMate'+'rial']['greenWrite']=!(0x19*0x115+-0x49*0x85+0xae1),this['defaultIma'+'geMaskMate'+'rial']['blueWrite']=!(-0x78a*-0x2+-0x1*-0x3c3+-0x96b*0x2),this['defaultIma'+'geMaskMate'+'rial']['alphaWrite']=!(0x9e3*-0x1+-0x5a*-0x6e+-0x18*0x133),this['defaultIma'+'geMaskMate'+'rial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaskMate'+'rial'])),this['defaultIma'+'geMaskMate'+'rial']):_0x76a98e?(this['defaultIma'+'ge9SlicedM'+'aterial']||(this['defaultIma'+'ge9SlicedM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'aterial']['name']='defaultIma'+'ge9SlicedM'+'aterial',this['defaultIma'+'ge9SlicedM'+'aterial']['nineSliced'+'Mode']=Pt,this['defaultIma'+'ge9SlicedM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'aterial'])),this['defaultIma'+'ge9SlicedM'+'aterial']):_0x4a4144?(this['defaultIma'+'ge9TiledMa'+'terial']||(this['defaultIma'+'ge9TiledMa'+'terial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'terial']['name']='defaultIma'+'ge9TiledMa'+'terial',this['defaultIma'+'ge9TiledMa'+'terial']['nineSliced'+'Mode']=Mt,this['defaultIma'+'ge9TiledMa'+'terial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'terial'])),this['defaultIma'+'ge9TiledMa'+'terial']):(this['defaultIma'+'geMaterial']||(this['defaultIma'+'geMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaterial']['name']='defaultIma'+'geMaterial',this['defaultIma'+'geMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaterial'])),this['defaultIma'+'geMaterial']);}['registerUn'+'icodeConve'+'rter'](_0x4d1db2){this['_unicodeCo'+'nverter']=_0x4d1db2;}['registerRt'+'lReorder'](_0x200305){this['_rtlReorde'+'r']=_0x200305;}['getUnicode'+'Converter'](){return this['_unicodeCo'+'nverter'];}['getRtlReor'+'der'](){return this['_rtlReorde'+'r'];}}const Xa='free',qa='limited',ja='locked',RR=['angularDam'+'pingX','angularDam'+'pingY','angularDam'+'pingZ','angularEqu'+'ilibriumX','angularEqu'+'ilibriumY','angularEqu'+'ilibriumZ','angularLim'+'itsX','angularLim'+'itsY','angularLim'+'itsZ','angularMot'+'ionX','angularMot'+'ionY','angularMot'+'ionZ','angularSpr'+'ingX','angularSpr'+'ingY','angularSpr'+'ingZ','angularSti'+'ffnessX','angularSti'+'ffnessY','angularSti'+'ffnessZ','breakForce','enableColl'+'ision','enabled','entityA','entityB','linearDamp'+'ingX','linearDamp'+'ingY','linearDamp'+'ingZ','linearEqui'+'libriumX','linearEqui'+'libriumY','linearEqui'+'libriumZ','linearLimi'+'tsX','linearLimi'+'tsY','linearLimi'+'tsZ','linearMoti'+'onX','linearMoti'+'onY','linearMoti'+'onZ','linearSpri'+'ngX','linearSpri'+'ngY','linearSpri'+'ngZ','linearStif'+'fnessX','linearStif'+'fnessY','linearStif'+'fnessZ'];class ym extends we{constructor(_0x192931,_0x3c16fd){super(_0x192931,_0x3c16fd),w['assert'](typeof Ammo<'u','ERROR:\x20Att'+'empting\x20to'+'\x20create\x20a\x20'+'pc.JointCo'+'mponent\x20bu'+'t\x20Ammo.js\x20'+'is\x20not\x20loa'+'ded'),this['_constrain'+'t']=null,this['_entityA']=null,this['_entityB']=null,this['_breakForc'+'e']=0xffc99e3c66fd68000000000000000000,this['_enableCol'+'lision']=!(0x1d*0x55+0x223*-0x5+0x10e),this['_linearMot'+'ionX']=ja,this['_linearLim'+'itsX']=new J(-0x1723+-0xed7*0x1+0x25fa,-0x2e*0x1e+0x237e+-0x1*0x1e1a),this['_linearSpr'+'ingX']=!(-0x12c5+0x1598+-0x2d2),this['_linearSti'+'ffnessX']=-0xd8f+0x1e4a+0x1*-0x10bb,this['_linearDam'+'pingX']=-0x64*-0x4a+0x6a2+-0x2389,this['_linearEqu'+'ilibriumX']=0x99e+0xef*-0x1+-0x8af,this['_linearMot'+'ionY']=ja,this['_linearLim'+'itsY']=new J(0x1256+-0x4*-0x265+0x18d*-0x12,-0x10b7*0x1+-0x1*-0xbad+0x50a),this['_linearSpr'+'ingY']=!(0x121a+-0x1029+-0x1f0),this['_linearSti'+'ffnessY']=0x556*-0x3+0x7b1*0x2+0xa0,this['_linearDam'+'pingY']=-0x1db4+-0xb8c+0x2941*0x1,this['_linearEqu'+'ilibriumY']=0x9fe*0x2+0x203f+-0x3*0x1169,this['_linearMot'+'ionZ']=ja,this['_linearLim'+'itsZ']=new J(0x9ca*-0x1+-0x1*-0x5f7+0x3d3*0x1,0x3d5*0x7+0x1f63+-0x2*0x1d1b),this['_linearSpr'+'ingZ']=!(-0x1*0x1e7c+-0x1*-0x1c2+0x1cbb),this['_linearSti'+'ffnessZ']=-0x247+0x11*-0x191+0x1ce8,this['_linearDam'+'pingZ']=-0x975+-0x1b1b+0x2491,this['_linearEqu'+'ilibriumZ']=0x1*-0x1a51+0x1cf8+-0x2a7,this['_angularMo'+'tionX']=ja,this['_angularLi'+'mitsX']=new J(-0x1e7f+-0x19cb+0x384a,-0x10e5+0x2525+-0x1b0*0xc),this['_angularSp'+'ringX']=!(0xe9*-0x21+-0x1*-0x26e5+0x8db*-0x1),this['_angularSt'+'iffnessX']=-0xa19+-0x1eaa+0x28c3,this['_angularDa'+'mpingX']=0x1*0x53b+0x393*-0x2+0x1*0x1ec,this['_angularEq'+'uilibriumX']=0x1*0x247d+-0x1*0x100f+0xa37*-0x2,this['_angularMo'+'tionY']=ja,this['_angularLi'+'mitsY']=new J(-0x2387*-0x1+0x28*-0xb3+0x5*-0x183,0x1d8d+-0x166f+-0x38f*0x2),this['_angularSp'+'ringY']=!(0x6a*0x22+-0x1883+0xa70),this['_angularSt'+'iffnessY']=-0x1b59+-0x365+0x1ebe*0x1,this['_angularDa'+'mpingY']=-0x10*0x95+0x5*0x7c9+0xa*-0x2f6,this['_angularEq'+'uilibriumY']=0x1e7*0xe+0x8f9+0x5*-0x71f,this['_angularMo'+'tionZ']=ja,this['_angularLi'+'mitsZ']=new J(-0x981*0x1+-0x1de9+0x276a,0x1*0xb08+0x3*-0x356+-0x106*0x1),this['_angularSp'+'ringZ']=!(-0x5b3*-0x4+-0x1fe6+0x103*0x9),this['_angularEq'+'uilibriumZ']=0xdb+0x8d*0x43+-0x25c2,this['_angularDa'+'mpingZ']=-0x2627+-0x26*0x96+0x1*0x3c6c,this['_angularSt'+'iffnessZ']=0x726+-0x198b+0x11*0x115,this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['entityA'](_0x36ced3){this['_destroyCo'+'nstraint'](),this['_entityA']=_0x36ced3,this['_createCon'+'straint']();}get['entityA'](){return this['_entityA'];}set['entityB'](_0xd418dd){this['_destroyCo'+'nstraint'](),this['_entityB']=_0xd418dd,this['_createCon'+'straint']();}get['entityB'](){return this['_entityB'];}set['breakForce'](_0x406c43){this['_constrain'+'t']&&this['_breakForc'+'e']!==_0x406c43&&(this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](_0x406c43),this['_breakForc'+'e']=_0x406c43);}get['breakForce'](){return this['_breakForc'+'e'];}set['enableColl'+'ision'](_0x359780){this['_destroyCo'+'nstraint'](),this['_enableCol'+'lision']=_0x359780,this['_createCon'+'straint']();}get['enableColl'+'ision'](){return this['_enableCol'+'lision'];}set['angularLim'+'itsX'](_0x28fec5){this['_angularLi'+'mitsX']['equals'](_0x28fec5)||(this['_angularLi'+'mitsX']['copy'](_0x28fec5),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsX'](){return this['_angularLi'+'mitsX'];}set['angularMot'+'ionX'](_0xc6b1b2){this['_angularMo'+'tionX']!==_0xc6b1b2&&(this['_angularMo'+'tionX']=_0xc6b1b2,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionX'](){return this['_angularMo'+'tionX'];}set['angularLim'+'itsY'](_0x15f082){this['_angularLi'+'mitsY']['equals'](_0x15f082)||(this['_angularLi'+'mitsY']['copy'](_0x15f082),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsY'](){return this['_angularLi'+'mitsY'];}set['angularMot'+'ionY'](_0x4d750d){this['_angularMo'+'tionY']!==_0x4d750d&&(this['_angularMo'+'tionY']=_0x4d750d,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionY'](){return this['_angularMo'+'tionY'];}set['angularLim'+'itsZ'](_0x30ef52){this['_angularLi'+'mitsZ']['equals'](_0x30ef52)||(this['_angularLi'+'mitsZ']['copy'](_0x30ef52),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsZ'](){return this['_angularLi'+'mitsZ'];}set['angularMot'+'ionZ'](_0x440f77){this['_angularMo'+'tionZ']!==_0x440f77&&(this['_angularMo'+'tionZ']=_0x440f77,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionZ'](){return this['_angularMo'+'tionZ'];}set['linearLimi'+'tsX'](_0x44e350){this['_linearLim'+'itsX']['equals'](_0x44e350)||(this['_linearLim'+'itsX']['copy'](_0x44e350),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsX'](){return this['_linearLim'+'itsX'];}set['linearMoti'+'onX'](_0x3c7f07){this['_linearMot'+'ionX']!==_0x3c7f07&&(this['_linearMot'+'ionX']=_0x3c7f07,this['_updateLin'+'earLimits']());}get['linearMoti'+'onX'](){return this['_linearMot'+'ionX'];}set['linearLimi'+'tsY'](_0x32e49d){this['_linearLim'+'itsY']['equals'](_0x32e49d)||(this['_linearLim'+'itsY']['copy'](_0x32e49d),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsY'](){return this['_linearLim'+'itsY'];}set['linearMoti'+'onY'](_0x47896a){this['_linearMot'+'ionY']!==_0x47896a&&(this['_linearMot'+'ionY']=_0x47896a,this['_updateLin'+'earLimits']());}get['linearMoti'+'onY'](){return this['_linearMot'+'ionY'];}set['linearLimi'+'tsZ'](_0x5cb15a){this['_linearLim'+'itsZ']['equals'](_0x5cb15a)||(this['_linearLim'+'itsZ']['copy'](_0x5cb15a),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsZ'](){return this['_linearLim'+'itsZ'];}set['linearMoti'+'onZ'](_0x219f14){this['_linearMot'+'ionZ']!==_0x219f14&&(this['_linearMot'+'ionZ']=_0x219f14,this['_updateLin'+'earLimits']());}get['linearMoti'+'onZ'](){return this['_linearMot'+'ionZ'];}['_convertTr'+'ansform'](_0x171693,_0x52cdbc){const _0x2086d4=_0x171693['getTransla'+'tion'](),_0x2fd8a6=new le();_0x2fd8a6['setFromMat'+'4'](_0x171693);const _0x1494ea=new Ammo['btVector3'](_0x2086d4['x'],_0x2086d4['y'],_0x2086d4['z']),_0x20a9f6=new Ammo['btQuaterni'+'on'](_0x2fd8a6['x'],_0x2fd8a6['y'],_0x2fd8a6['z'],_0x2fd8a6['w']);_0x52cdbc['setOrigin'](_0x1494ea),_0x52cdbc['setRotatio'+'n'](_0x20a9f6),Ammo['destroy'](_0x1494ea),Ammo['destroy'](_0x20a9f6);}['_updateAng'+'ularLimits'](){const _0x3719a3=this['_constrain'+'t'];if(_0x3719a3){let _0x2c2203,_0x385782,_0x3ccd8e,_0x3ecd18,_0x93b91e,_0x2671ac;this['_angularMo'+'tionX']===qa?(_0x2c2203=this['_angularLi'+'mitsX']['x']*Y['DEG_TO_RAD'],_0x3ecd18=this['_angularLi'+'mitsX']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionX']===Xa?(_0x2c2203=-0x188*0x8+0x110*-0x4+0x1081,_0x3ecd18=0x181c+0xb20+-0x233c):_0x2c2203=_0x3ecd18=-0xb*-0x335+0xc37+-0x17bf*0x2,this['_angularMo'+'tionY']===qa?(_0x385782=this['_angularLi'+'mitsY']['x']*Y['DEG_TO_RAD'],_0x93b91e=this['_angularLi'+'mitsY']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionY']===Xa?(_0x385782=-0x1*-0x2692+0x11b6*-0x2+-0x325,_0x93b91e=0xb9d+0x2f4+-0xe91):_0x385782=_0x93b91e=-0x157e+-0x1055+0x25d3,this['_angularMo'+'tionZ']===qa?(_0x3ccd8e=this['_angularLi'+'mitsZ']['x']*Y['DEG_TO_RAD'],_0x2671ac=this['_angularLi'+'mitsZ']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionZ']===Xa?(_0x3ccd8e=0x210b*0x1+0x10e+-0x4*0x886,_0x2671ac=-0x23fe+-0x26c5+0x4ac3):_0x3ccd8e=_0x2671ac=-0x15*0x17f+-0xe1d+0x2d88;const _0x580575=new Ammo['btVector3'](_0x2c2203,_0x385782,_0x3ccd8e);_0x3719a3['setAngular'+'LowerLimit'](_0x580575),_0x580575['setValue'](_0x3ecd18,_0x93b91e,_0x2671ac),_0x3719a3['setAngular'+'UpperLimit'](_0x580575),Ammo['destroy'](_0x580575);}}['_updateLin'+'earLimits'](){const _0x3e4abb=this['_constrain'+'t'];if(_0x3e4abb){let _0x37bf21,_0x44d8cb,_0x2e0d7f,_0x3b0a0b,_0x92ca11,_0x272cce;this['_linearMot'+'ionX']===qa?(_0x37bf21=this['_linearLim'+'itsX']['x'],_0x3b0a0b=this['_linearLim'+'itsX']['y']):this['_linearMot'+'ionX']===Xa?(_0x37bf21=-0x368+-0x14e9+0x1852,_0x3b0a0b=-0x10a0+0x1*-0x15fa+0x269a):_0x37bf21=_0x3b0a0b=0x6*0x1ee+0x1565+-0x1*0x20f9,this['_linearMot'+'ionY']===qa?(_0x44d8cb=this['_linearLim'+'itsY']['x'],_0x92ca11=this['_linearLim'+'itsY']['y']):this['_linearMot'+'ionY']===Xa?(_0x44d8cb=0x1*-0x168d+-0x1*0x1012+0x338*0xc,_0x92ca11=0x37*0x65+0x11ea+-0x279d*0x1):_0x44d8cb=_0x92ca11=-0xfe5+0x1ac+-0x14b*-0xb,this['_linearMot'+'ionZ']===qa?(_0x2e0d7f=this['_linearLim'+'itsZ']['x'],_0x272cce=this['_linearLim'+'itsZ']['y']):this['_linearMot'+'ionZ']===Xa?(_0x2e0d7f=-0xb*0x37f+0x1f56+0x720,_0x272cce=-0x1837*0x1+0x197f*-0x1+0x31b6):_0x2e0d7f=_0x272cce=0x1*0x1da+-0x16e9+0x150f;const _0x1857f6=new Ammo['btVector3'](_0x37bf21,_0x44d8cb,_0x2e0d7f);_0x3e4abb['setLinearL'+'owerLimit'](_0x1857f6),_0x1857f6['setValue'](_0x3b0a0b,_0x92ca11,_0x272cce),_0x3e4abb['setLinearU'+'pperLimit'](_0x1857f6),Ammo['destroy'](_0x1857f6);}}['_createCon'+'straint'](){if(this['_entityA']&&this['_entityA']['rigidbody']){this['_destroyCo'+'nstraint']();const _0x12fd8c=new te(),_0x531763=this['_entityA']['rigidbody']['body'];_0x531763['activate']();const _0x3a6f73=this['entity']['getWorldTr'+'ansform'](),_0x27be50=this['_entityA']['getWorldTr'+'ansform']()['clone']()['invert']();_0x12fd8c['mul2'](_0x27be50,_0x3a6f73);const _0x500c3e=new Ammo['btTransfor'+'m']();if(this['_convertTr'+'ansform'](_0x12fd8c,_0x500c3e),this['_entityB']&&this['_entityB']['rigidbody']){const _0x3c7d84=this['_entityB']['rigidbody']['body'];_0x3c7d84['activate']();const _0x4069bd=this['_entityB']['getWorldTr'+'ansform']()['clone']()['invert']();_0x12fd8c['mul2'](_0x4069bd,_0x3a6f73);const _0x4f6aed=new Ammo['btTransfor'+'m']();this['_convertTr'+'ansform'](_0x12fd8c,_0x4f6aed),this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x531763,_0x3c7d84,_0x500c3e,_0x4f6aed,!this['_enableCol'+'lision']),Ammo['destroy'](_0x4f6aed);}else this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x531763,_0x500c3e,!this['_enableCol'+'lision']);Ammo['destroy'](_0x500c3e);const _0x4be823=['X','Y','Z','X','Y','Z'];for(let _0x33d5ea=-0x202b+-0xf*-0x1e6+-0x15*-0x2d;_0x33d5ea<-0x5e4+0x262e+0x19d*-0x14;_0x33d5ea++){const _0x27fff6=_0x33d5ea<0xaf3*0x3+0x1f6*-0x13+0x46c?'_linear':'_angular';this['_constrain'+'t']['enableSpri'+'ng'](_0x33d5ea,this[_0x27fff6+'Spring'+_0x4be823[_0x33d5ea]]),this['_constrain'+'t']['setDamping'](_0x33d5ea,this[_0x27fff6+'Damping'+_0x4be823[_0x33d5ea]]),this['_constrain'+'t']['setEquilib'+'riumPoint'](_0x33d5ea,this[_0x27fff6+('Equilibriu'+'m')+_0x4be823[_0x33d5ea]]),this['_constrain'+'t']['setStiffne'+'ss'](_0x33d5ea,this[_0x27fff6+'Stiffness'+_0x4be823[_0x33d5ea]]);}this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](this['_breakForc'+'e']),this['_updateLin'+'earLimits'](),this['_updateAng'+'ularLimits'](),this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['addConstra'+'int'](this['_constrain'+'t'],!this['_enableCol'+'lision']);}}['_destroyCo'+'nstraint'](){this['_constrain'+'t']&&(this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['removeCons'+'traint'](this['_constrain'+'t']),Ammo['destroy'](this['_constrain'+'t']),this['_constrain'+'t']=null);}['initFromDa'+'ta'](_0x4b5f66){for(const _0xa70741 of RR)_0x4b5f66['hasOwnProp'+'erty'](_0xa70741)&&(_0x4b5f66[_0xa70741]instanceof J?this['_'+_0xa70741]['copy'](_0x4b5f66[_0xa70741]):this['_'+_0xa70741]=_0x4b5f66[_0xa70741]);this['_createCon'+'straint']();}['onEnable'](){this['_createCon'+'straint']();}['onDisable'](){this['_destroyCo'+'nstraint']();}['_onSetEnab'+'led'](_0x510901,_0xc28605,_0x436fa9){}['_onBeforeR'+'emove'](){this['fire']('remove');}}const OR={'Damping':'setDamping','Equilibrium':'setEquilib'+'riumPoint','Spring':'enableSpri'+'ng','Stiffness':'setStiffne'+'ss'};['linear','angular']['forEach'](_0x2c2cf8=>{['Damping','Equilibriu'+'m','Spring','Stiffness']['forEach'](_0x58a5ac=>{['X','Y','Z']['forEach'](_0x29f498=>{const _0x16f854=_0x2c2cf8+_0x58a5ac+_0x29f498,_0x28ab00='_'+_0x16f854;let _0x200289=_0x2c2cf8==='linear'?-0x400+0x3*0x86b+0x1541*-0x1:-0x3*-0x58b+0x2650+-0x1b77*0x2;_0x29f498==='Y'&&(_0x200289+=-0x1c18+0x1ad8+0x141),_0x29f498==='Z'&&(_0x200289+=-0x1df9+0x14f6+0x905),Object['defineProp'+'erty'](ym['prototype'],_0x16f854,{'get':function(){return this[_0x28ab00];},'set':function(_0xd755e5){this[_0x28ab00]!==_0xd755e5&&(this[_0x28ab00]=_0xd755e5,this['_constrain'+'t'][OR[_0x58a5ac]](_0x200289,_0xd755e5));}});});});});class FR{constructor(){this['enabled']=!(-0x147a+0x1*-0x1bba+0x3034);}}const Fu=['enabled'];class NR extends ct{constructor(_0x1934ed){super(_0x1934ed),this['id']='joint',this['app']=_0x1934ed,this['ComponentT'+'ype']=ym,this['DataType']=FR,this['schema']=Fu;}['initialize'+'ComponentD'+'ata'](_0xbb0ad3,_0x121285,_0xca9f12){_0xbb0ad3['initFromDa'+'ta'](_0x121285),super['initialize'+'ComponentD'+'ata'](_0xbb0ad3,_0x121285,Fu);}}we['_buildAcce'+'ssors'](ym['prototype'],Fu);class Jv extends we{constructor(){super(...arguments),h(this,'_minWidth',-0x23e8+0x5d4+0x44c*0x7),h(this,'_minHeight',-0x2356*-0x1+-0x339*0x4+-0x1672),h(this,'_maxWidth',null),h(this,'_maxHeight',null),h(this,'_fitWidthP'+'roportion',-0xaba+0x611*-0x3+0x1ced),h(this,'_fitHeight'+'Proportion',0x59*-0x2b+-0x1*-0x17cb+0x4*-0x236),h(this,'_excludeFr'+'omLayout',!(-0x227d+0x1c26+0x658));}set['minWidth'](_0x7412fb){_0x7412fb!==this['_minWidth']&&(this['_minWidth']=_0x7412fb,this['fire']('resize'));}get['minWidth'](){return this['_minWidth'];}set['minHeight'](_0x45e8a9){_0x45e8a9!==this['_minHeight']&&(this['_minHeight']=_0x45e8a9,this['fire']('resize'));}get['minHeight'](){return this['_minHeight'];}set['maxWidth'](_0x1f4ffd){_0x1f4ffd!==this['_maxWidth']&&(this['_maxWidth']=_0x1f4ffd,this['fire']('resize'));}get['maxWidth'](){return this['_maxWidth'];}set['maxHeight'](_0x1efd18){_0x1efd18!==this['_maxHeight']&&(this['_maxHeight']=_0x1efd18,this['fire']('resize'));}get['maxHeight'](){return this['_maxHeight'];}set['fitWidthPr'+'oportion'](_0x10f10f){_0x10f10f!==this['_fitWidthP'+'roportion']&&(this['_fitWidthP'+'roportion']=_0x10f10f,this['fire']('resize'));}get['fitWidthPr'+'oportion'](){return this['_fitWidthP'+'roportion'];}set['fitHeightP'+'roportion'](_0x2fba2c){_0x2fba2c!==this['_fitHeight'+'Proportion']&&(this['_fitHeight'+'Proportion']=_0x2fba2c,this['fire']('resize'));}get['fitHeightP'+'roportion'](){return this['_fitHeight'+'Proportion'];}set['excludeFro'+'mLayout'](_0x2a7214){_0x2a7214!==this['_excludeFr'+'omLayout']&&(this['_excludeFr'+'omLayout']=_0x2a7214,this['fire']('resize'));}get['excludeFro'+'mLayout'](){return this['_excludeFr'+'omLayout'];}}class kR{constructor(){this['enabled']=!(0x1*-0x233f+0x1*0x1de1+0x55e);}}const e0=['enabled'];class UR extends ct{constructor(_0x58d1d6){super(_0x58d1d6),this['id']='layoutchil'+'d',this['ComponentT'+'ype']=Jv,this['DataType']=kR,this['schema']=e0;}['initialize'+'ComponentD'+'ata'](_0x1488e1,_0x80582d,_0x3710fe){_0x80582d['enabled']!==void(0x8b4+-0x936+-0xa*-0xd)&&(_0x1488e1['enabled']=_0x80582d['enabled']),_0x80582d['minWidth']!==void(0x1505+0x1*0x1015+-0x251a)&&(_0x1488e1['minWidth']=_0x80582d['minWidth']),_0x80582d['minHeight']!==void(0x12f*-0x11+0x9*-0x40f+0x38a6)&&(_0x1488e1['minHeight']=_0x80582d['minHeight']),_0x80582d['maxWidth']!==void(-0xaf9+-0x2c*0x93+-0x1*-0x243d)&&(_0x1488e1['maxWidth']=_0x80582d['maxWidth']),_0x80582d['maxHeight']!==void(-0x1*-0x1217+0x219*0x7+-0x20c6*0x1)&&(_0x1488e1['maxHeight']=_0x80582d['maxHeight']),_0x80582d['fitWidthPr'+'oportion']!==void(-0x2b*-0x35+-0x521*-0x1+0x704*-0x2)&&(_0x1488e1['fitWidthPr'+'oportion']=_0x80582d['fitWidthPr'+'oportion']),_0x80582d['fitHeightP'+'roportion']!==void(-0x1294*-0x1+-0x8b0*-0x4+-0x3554)&&(_0x1488e1['fitHeightP'+'roportion']=_0x80582d['fitHeightP'+'roportion']),_0x80582d['excludeFro'+'mLayout']!==void(0x2d5*-0x1+0x10c1+-0xdec)&&(_0x1488e1['excludeFro'+'mLayout']=_0x80582d['excludeFro'+'mLayout']),super['initialize'+'ComponentD'+'ata'](_0x1488e1,_0x80582d,_0x3710fe);}['cloneCompo'+'nent'](_0x1f05a0,_0x5c7dbb){const _0x5d376d=_0x1f05a0['layoutchil'+'d'];return this['addCompone'+'nt'](_0x5c7dbb,{'enabled':_0x5d376d['enabled'],'minWidth':_0x5d376d['minWidth'],'minHeight':_0x5d376d['minHeight'],'maxWidth':_0x5d376d['maxWidth'],'maxHeight':_0x5d376d['maxHeight'],'fitWidthProportion':_0x5d376d['fitWidthPr'+'oportion'],'fitHeightProportion':_0x5d376d['fitHeightP'+'roportion'],'excludeFromLayout':_0x5d376d['excludeFro'+'mLayout']});}}we['_buildAcce'+'ssors'](Jv['prototype'],e0);const Nu=0x2a4*0x3+0x1*0x1072+-0x185e,BR=-0x20*0x6+0xa4f+-0x98e,Qg=-0x142b+-0x169d+-0x2aca*-0x1,zR=0x385*0x4+0x1337*-0x1+0x526,Oh={};Oh[Ce]={'axis':'x','size':'width','calculatedSize':'calculated'+'Width','minSize':'minWidth','maxSize':'maxWidth','fitting':'widthFitti'+'ng','fittingProportion':'fitWidthPr'+'oportion'},Oh[je]={'axis':'y','size':'height','calculatedSize':'calculated'+'Height','minSize':'minHeight','maxSize':'maxHeight','fitting':'heightFitt'+'ing','fittingProportion':'fitHeightP'+'roportion'};const vm={};vm[Ce]=je,vm[je]=Ce;const VR={'minWidth':0x0,'minHeight':0x0,'maxWidth':Number['POSITIVE_I'+'NFINITY'],'maxHeight':Number['POSITIVE_I'+'NFINITY'],'width':null,'height':null,'fitWidthProportion':0x0,'fitHeightProportion':0x0},os={'NONE':'NONE','APPLY_STRETCHING':'APPLY_STRE'+'TCHING','APPLY_SHRINKING':'APPLY_SHRI'+'NKING'},ls=new J();function t0(_0x5e25d4){let _0x59209d;const _0x4bed34=Oh[_0x5e25d4],_0x1dbc5e=Oh[vm[_0x5e25d4]];function _0x45a2c8(_0x4b3405,_0x8a8eb2){return-_0x8a8eb2[_0x4bed34['size']]*_0x4b3405['pivot'][_0x4bed34['axis']];}function _0x2a093f(_0x5071f8,_0x266005){return-_0x266005[_0x1dbc5e['size']]*_0x5071f8['pivot'][_0x1dbc5e['axis']];}function _0x1f91a5(_0x2acdcb,_0x43aea1){return _0x43aea1[_0x4bed34['size']]*(-0x1*0x11b+0x6d5+-0x5b9-_0x2acdcb['pivot'][_0x4bed34['axis']]);}function _0x5366e4(_0x2e8917,_0x20136c){_0x2e8917=_0x2e8917['filter'](_0x596293),_0x59209d=_0x20136c,ls['x']=_0x59209d['containerS'+'ize']['x']-_0x59209d['padding']['x']-_0x59209d['padding']['z'],ls['y']=_0x59209d['containerS'+'ize']['y']-_0x59209d['padding']['y']-_0x59209d['padding']['w'],_0x3e0b62(_0x2e8917);const _0x2cab6a=_0x28f24c(_0x2d80b7(_0x2e8917)),_0x43a32c=_0x8fc32f(_0x2cab6a,_0x189261(_0x2cab6a)),_0x4b3021=_0x1aa1b1(_0x2cab6a,_0x43a32c);return _0x21dcb5(_0x2cab6a,_0x43a32c,_0x4b3021),_0x2ed5df(_0x2cab6a,_0x43a32c,_0x4b3021),_0x5a70a8(_0x2cab6a);}function _0x596293(_0x50897d){const _0x6fe330=_0x50897d['entity']['layoutchil'+'d'];return!_0x6fe330||!_0x6fe330['enabled']||!_0x6fe330['excludeFro'+'mLayout'];}function _0x3e0b62(_0x40e440){for(let _0x26ed4f=0x10df+-0x15a7+0x22*0x24;_0x26ed4f<_0x40e440['length'];++_0x26ed4f){const _0x3ae2e6=_0x40e440[_0x26ed4f],_0xf0820d=_0x3ae2e6['anchor'];(_0xf0820d['x']!==0x4bd*-0x2+-0x1643+0x659*0x5||_0xf0820d['y']!==-0x1620+-0x1ef2+-0x1a89*-0x2||_0xf0820d['z']!==-0x86*-0x35+-0x4c7+-0x16f7*0x1||_0xf0820d['w']!==0x12c6+-0x4*0x3b3+-0x1fd*0x2)&&(_0x3ae2e6['anchor']=re['ZERO']);}}function _0x2d80b7(_0x3e0406){if(!_0x59209d['wrap'])return[_0x3e0406];const _0x41b785=[[]],_0x35259c=_0x2cbe93(_0x3e0406);let _0x5dd890=-0x2228+0x9d*-0xa+0x23d*0x12;const _0x58c58c=_0x59209d[_0x4bed34['fitting']]===Qg;for(let _0x3c3e1b=-0x25*0xd3+-0xa6+0x1f25;_0x3c3e1b<_0x3e0406['length'];++_0x3c3e1b){_0x41b785[_0x41b785['length']-(0x20f5*-0x1+-0xb7+0x21ad)]['length']>0xd9a+-0x550+-0x84a&&(_0x5dd890+=_0x59209d['spacing'][_0x4bed34['axis']]);const _0x24e7a8=_0x35259c[_0x3c3e1b][_0x4bed34['size']];_0x5dd890+=_0x24e7a8,!_0x58c58c&&_0x5dd890>ls[_0x4bed34['axis']]&&_0x41b785[_0x41b785['length']-(0x14b0*-0x1+0xbf4+0x8bd*0x1)]['length']!==-0x1*0xa7b+-0x1*0xec6+0x1941&&(_0x5dd890=_0x24e7a8,_0x41b785['push']([])),_0x41b785[_0x41b785['length']-(0x2377*-0x1+-0x991+0x2d09)]['push'](_0x3e0406[_0x3c3e1b]),_0x58c58c&&_0x5dd890>ls[_0x4bed34['axis']]&&_0x3c3e1b!==_0x3e0406['length']-(0xa7c+0x10bd+-0x1b38)&&(_0x5dd890=-0xfe8+0x4*-0x223+0x5*0x4e4,_0x41b785['push']([]));}return _0x41b785;}function _0x28f24c(_0x43b662){const _0x54e781=_0x59209d['orientatio'+'n']===Ce&&_0x59209d['reverseX']||_0x59209d['orientatio'+'n']===je&&_0x59209d['reverseY'],_0x1b0f75=_0x59209d['orientatio'+'n']===Ce&&_0x59209d['reverseY']||_0x59209d['orientatio'+'n']===je&&_0x59209d['reverseX'];if(_0x54e781){for(let _0x52b218=0x144f+-0x1b4e+0x6ff;_0x52b218<_0x43b662['length'];++_0x52b218)_0x54e781&&_0x43b662[_0x52b218]['reverse']();}return _0x1b0f75&&_0x43b662['reverse'](),_0x43b662;}function _0x189261(_0x4af219){const _0xec7084=[];for(let _0x46abfe=0x6*-0x3b3+-0x19db*-0x1+0x3a9*-0x1;_0x46abfe<_0x4af219['length'];++_0x46abfe){const _0xfca3f=_0x4af219[_0x46abfe],_0x3e9c97=_0x2cbe93(_0xfca3f),_0x426324=_0x26831e(_0x3e9c97,_0x4bed34),_0x3b7df0=_0xfc171c(_0x59209d[_0x4bed34['fitting']],_0x426324,ls[_0x4bed34['axis']]);_0x3b7df0===os['APPLY_STRE'+'TCHING']?_0x4f1be6(_0x3e9c97,_0x426324,_0x4bed34):_0x3b7df0===os['APPLY_SHRI'+'NKING']&&_0x3e8ae0(_0x3e9c97,_0x426324,_0x4bed34),_0xec7084['push'](_0x3e9c97);}return _0xec7084;}function _0x8fc32f(_0x11e9f8,_0x1ea927){const _0x12a81a=[],_0x2c3e51=[];for(let _0x50bbd8=0xbe5+0x22d1+-0x7c9*0x6;_0x50bbd8<_0x11e9f8['length'];++_0x50bbd8){const _0x280170=_0x11e9f8[_0x50bbd8];_0x280170['largestEle'+'ment']=null,_0x280170['largestSiz'+'e']={'width':Number['NEGATIVE_I'+'NFINITY'],'height':Number['NEGATIVE_I'+'NFINITY']};for(let _0x4d967c=0x1eba+-0x4c3*0x2+0x17*-0xec;_0x4d967c<_0x280170['length'];++_0x4d967c){const _0x1c951b=_0x1ea927[_0x50bbd8][_0x4d967c];_0x1c951b[_0x1dbc5e['size']]>_0x280170['largestSiz'+'e'][_0x1dbc5e['size']]&&(_0x280170['largestEle'+'ment']=_0x280170[_0x4d967c],_0x280170['largestSiz'+'e']=_0x1c951b);}_0x12a81a['push'](_0x280170['largestEle'+'ment']),_0x2c3e51['push'](_0x280170['largestSiz'+'e']);}const _0x25bcaa=_0x26831e(_0x2c3e51,_0x1dbc5e),_0x23f148=_0xfc171c(_0x59209d[_0x1dbc5e['fitting']],_0x25bcaa,ls[_0x1dbc5e['axis']]);_0x23f148===os['APPLY_STRE'+'TCHING']?_0x4f1be6(_0x2c3e51,_0x25bcaa,_0x1dbc5e):_0x23f148===os['APPLY_SHRI'+'NKING']&&_0x3e8ae0(_0x2c3e51,_0x25bcaa,_0x1dbc5e);for(let _0x424c40=0x1*0x1cca+-0x5c1+-0x1709;_0x424c40<_0x11e9f8['length'];++_0x424c40){const _0x39dd92=_0x11e9f8[_0x424c40];for(let _0x4d6614=-0x1c51+-0x186d+0x34be;_0x4d6614<_0x39dd92['length'];++_0x4d6614){const _0x4ede55=_0x1ea927[_0x424c40][_0x4d6614],_0x4d02d3=_0x4ede55[_0x1dbc5e['size']],_0xaf5a34=_0x11e9f8['length']===0x409*-0x1+0x2f6+0x4*0x45?ls[_0x1dbc5e['axis']]:_0x39dd92['largestSiz'+'e'][_0x1dbc5e['size']],_0x354c56=_0xfc171c(_0x59209d[_0x1dbc5e['fitting']],_0x4d02d3,_0xaf5a34);_0x354c56===os['APPLY_STRE'+'TCHING']?_0x4ede55[_0x1dbc5e['size']]=Math['min'](_0xaf5a34,_0x4ede55[_0x1dbc5e['maxSize']]):_0x354c56===os['APPLY_SHRI'+'NKING']&&(_0x4ede55[_0x1dbc5e['size']]=Math['max'](_0xaf5a34,_0x4ede55[_0x1dbc5e['minSize']]));}}return _0x1ea927;}function _0xfc171c(_0x2973a4,_0xf14a90,_0xfb9ffd){switch(_0x2973a4){case Nu:return os['NONE'];case BR:return _0xf14a90<_0xfb9ffd?os['APPLY_STRE'+'TCHING']:os['NONE'];case Qg:return _0xf14a90>=_0xfb9ffd?os['APPLY_SHRI'+'NKING']:os['NONE'];case zR:return _0xf14a90<_0xfb9ffd?os['APPLY_STRE'+'TCHING']:os['APPLY_SHRI'+'NKING'];default:throw new Error('Unrecogniz'+'ed\x20fitting'+'\x20mode:\x20'+_0x2973a4);}}function _0x26831e(_0x5d96fa,_0x2296f1){const _0xe6f277=_0x20b0b8(_0x5d96fa,_0x2296f1['size']),_0x259784=(_0x5d96fa['length']-(0x1663*-0x1+-0x2f*0x72+0x5*0x8aa))*_0x59209d['spacing'][_0x2296f1['axis']];return _0xe6f277+_0x259784;}function _0x4f1be6(_0x3e125c,_0x56d3f3,_0x14b81d){const _0x4e187d=_0x3a292f(_0x3e125c,_0x14b81d['maxSize']),_0x995f93=_0x3b6d76(_0x3e125c,_0x14b81d['fittingPro'+'portion']),_0x126fc2=_0x48fa90(_0x995f93,_0x4e187d);let _0x5902a6=ls[_0x14b81d['axis']]-_0x56d3f3;for(let _0x5043fd=-0x1*-0x10ba+0x1044+-0x20fe;_0x5043fd<_0x3e125c['length'];++_0x5043fd){const _0x162f03=_0x4e187d[_0x5043fd],_0x5a2bf0=_0x2cc54b(_0x162f03,_0x5902a6,_0x995f93,_0x126fc2),_0x3c0e18=_0x3e125c[_0x162f03][_0x14b81d['size']]+_0x5a2bf0,_0x3a77f5=_0x3e125c[_0x162f03][_0x14b81d['maxSize']],_0x210cf5=Math['min'](_0x3c0e18,_0x3a77f5);_0x3e125c[_0x162f03][_0x14b81d['size']]=_0x210cf5;const _0x232e6d=Math['max'](_0x3c0e18-_0x210cf5,-0x1*-0x1ab7+0x280+-0x1b*0x115),_0x217f2b=_0x5a2bf0-_0x232e6d;_0x5902a6-=_0x217f2b;}}function _0x3e8ae0(_0x488d75,_0x44f9c5,_0x2c85ad){const _0xbc8020=_0x3a292f(_0x488d75,_0x2c85ad['minSize'],!(0x179c*-0x1+-0xe26+-0x25c2*-0x1)),_0x240496=_0x3b6d76(_0x488d75,_0x2c85ad['fittingPro'+'portion']),_0x5ddfbd=_0x206fef(_0x240496),_0x9a9b47=_0x48fa90(_0x5ddfbd,_0xbc8020);let _0x4da9c9=_0x44f9c5-ls[_0x2c85ad['axis']];for(let _0x538fdb=0x22d9*0x1+-0x132d*-0x2+0x4933*-0x1;_0x538fdb<_0x488d75['length'];++_0x538fdb){const _0x51b656=_0xbc8020[_0x538fdb],_0x509553=_0x2cc54b(_0x51b656,_0x4da9c9,_0x5ddfbd,_0x9a9b47),_0x1d1b2f=_0x488d75[_0x51b656][_0x2c85ad['size']]-_0x509553,_0x599d29=_0x488d75[_0x51b656][_0x2c85ad['minSize']],_0xd3956=Math['max'](_0x1d1b2f,_0x599d29);_0x488d75[_0x51b656][_0x2c85ad['size']]=_0xd3956;const _0x48b061=Math['max'](_0xd3956-_0x1d1b2f,-0xeee+-0x13c2+0x22b0),_0x4d67ac=_0x509553-_0x48b061;_0x4da9c9-=_0x4d67ac;}}function _0x2cc54b(_0x3ff3d8,_0x2d49f2,_0x215125,_0x1dbda5){const _0x21ab7c=_0x215125[_0x3ff3d8],_0x373078=_0x1dbda5[_0x3ff3d8];return Math['abs'](_0x21ab7c)<-0x16b5+-0x3*-0x443+0x9ec+0.00001&&Math['abs'](_0x373078)<-0x11df+0x2cd*-0x2+0x1779+0.00001?_0x2d49f2:_0x2d49f2*_0x21ab7c/_0x373078;}function _0x1aa1b1(_0x3bbb59,_0x25036a){const _0xe68f1b={};_0xe68f1b[_0x4bed34['axis']]=-0x5e7*0x2+0x1883+-0x1*0xcb5,_0xe68f1b[_0x1dbc5e['axis']]=0x1fe7+0xf*0x1a0+-0x1*0x3847,_0x3bbb59[_0x4bed34['size']]=Number['NEGATIVE_I'+'NFINITY'];const _0x1ae96f=[];for(let _0x1a820d=-0x1fc2+0xc8d+0x1335;_0x1a820d<_0x3bbb59['length'];++_0x1a820d){const _0x327826=_0x3bbb59[_0x1a820d];if(_0x327826['length']===0x44b*0x7+-0xdc5+0x824*-0x2){_0x1ae96f['push']([]);continue;}const _0x3dfb7e=[],_0x574e9b=_0x25036a[_0x1a820d];for(let _0x3ca591=0x8c5+0x15e1+-0x1ea6;_0x3ca591<_0x327826['length'];++_0x3ca591){const _0x20ed4b=_0x327826[_0x3ca591],_0x3c2fb9=_0x574e9b[_0x3ca591];_0xe68f1b[_0x1dbc5e['axis']]-=_0x2a093f(_0x20ed4b,_0x3c2fb9),_0xe68f1b[_0x4bed34['axis']]-=_0x45a2c8(_0x20ed4b,_0x3c2fb9),_0x3dfb7e[_0x3ca591]={},_0x3dfb7e[_0x3ca591][_0x4bed34['axis']]=_0xe68f1b[_0x4bed34['axis']],_0x3dfb7e[_0x3ca591][_0x1dbc5e['axis']]=_0xe68f1b[_0x1dbc5e['axis']],_0xe68f1b[_0x1dbc5e['axis']]+=_0x2a093f(_0x20ed4b,_0x3c2fb9),_0xe68f1b[_0x4bed34['axis']]+=_0x1f91a5(_0x20ed4b,_0x3c2fb9)+_0x59209d['spacing'][_0x4bed34['axis']];}_0x327826[_0x4bed34['size']]=_0xe68f1b[_0x4bed34['axis']]-_0x59209d['spacing'][_0x4bed34['axis']],_0x327826[_0x1dbc5e['size']]=_0x327826['largestSiz'+'e'][_0x1dbc5e['size']],_0x3bbb59[_0x4bed34['size']]=Math['max'](_0x3bbb59[_0x4bed34['size']],_0x327826[_0x4bed34['size']]),_0xe68f1b[_0x4bed34['axis']]=-0xc*-0x220+-0x1aa7*0x1+-0x3b*-0x5,_0xe68f1b[_0x1dbc5e['axis']]+=_0x327826[_0x1dbc5e['size']]+_0x59209d['spacing'][_0x1dbc5e['axis']],_0x1ae96f['push'](_0x3dfb7e);}return _0x3bbb59[_0x1dbc5e['size']]=_0xe68f1b[_0x1dbc5e['axis']]-_0x59209d['spacing'][_0x1dbc5e['axis']],_0x1ae96f;}function _0x21dcb5(_0x38e379,_0x2e6f18,_0x3cb01a){const _0x4837af=_0x59209d['alignment'][_0x4bed34['axis']],_0x115f50=_0x59209d['alignment'][_0x1dbc5e['axis']],_0x4bf250=_0x59209d['padding'][_0x4bed34['axis']],_0x130b6d=_0x59209d['padding'][_0x1dbc5e['axis']];for(let _0x12bc41=-0x1*-0x1627+-0x8d*-0x8+0xd*-0x20b;_0x12bc41<_0x38e379['length'];++_0x12bc41){const _0x50e01f=_0x38e379[_0x12bc41],_0x5f4f8d=_0x2e6f18[_0x12bc41],_0x3b4db5=_0x3cb01a[_0x12bc41],_0x4d0134=(ls[_0x4bed34['axis']]-_0x50e01f[_0x4bed34['size']])*_0x4837af+_0x4bf250,_0x59abaa=(ls[_0x1dbc5e['axis']]-_0x38e379[_0x1dbc5e['size']])*_0x115f50+_0x130b6d;for(let _0x478129=0x15f8+0x1e71+-0x3469;_0x478129<_0x50e01f['length'];++_0x478129){const _0x1cecd4=(_0x50e01f[_0x1dbc5e['size']]-_0x5f4f8d[_0x478129][_0x1dbc5e['size']])*_0x59209d['alignment'][_0x1dbc5e['axis']];_0x3b4db5[_0x478129][_0x4bed34['axis']]+=_0x4d0134,_0x3b4db5[_0x478129][_0x1dbc5e['axis']]+=_0x59abaa+_0x1cecd4;}}}function _0x2ed5df(_0x1f24ab,_0x16dd94,_0x116dae){for(let _0x31ef9e=-0x407*-0x1+0x6b+0x239*-0x2;_0x31ef9e<_0x1f24ab['length'];++_0x31ef9e){const _0x455e95=_0x1f24ab[_0x31ef9e],_0x10289b=_0x16dd94[_0x31ef9e],_0x13f742=_0x116dae[_0x31ef9e];for(let _0x234b20=-0x4bf+-0x1aa5+0x1f64;_0x234b20<_0x455e95['length'];++_0x234b20){const _0x14eeea=_0x455e95[_0x234b20];_0x14eeea[_0x4bed34['calculated'+'Size']]=_0x10289b[_0x234b20][_0x4bed34['size']],_0x14eeea[_0x1dbc5e['calculated'+'Size']]=_0x10289b[_0x234b20][_0x1dbc5e['size']],_0x59209d['orientatio'+'n']===Ce?_0x14eeea['entity']['setLocalPo'+'sition'](_0x13f742[_0x234b20][_0x4bed34['axis']],_0x13f742[_0x234b20][_0x1dbc5e['axis']],_0x14eeea['entity']['getLocalPo'+'sition']()['z']):_0x14eeea['entity']['setLocalPo'+'sition'](_0x13f742[_0x234b20][_0x1dbc5e['axis']],_0x13f742[_0x234b20][_0x4bed34['axis']],_0x14eeea['entity']['getLocalPo'+'sition']()['z']);}}}function _0x5a70a8(_0xaa2661){const _0x5ab29d=_0xaa2661['width'],_0x52c815=_0xaa2661['height'],_0x346983=(ls['x']-_0x5ab29d)*_0x59209d['alignment']['x']+_0x59209d['padding']['x'],_0x36a72d=(ls['y']-_0x52c815)*_0x59209d['alignment']['y']+_0x59209d['padding']['y'];return{'bounds':new re(_0x346983,_0x36a72d,_0x5ab29d,_0x52c815)};}function _0x2cbe93(_0x17c2b2){const _0x5f2a5f=[];for(let _0x587494=-0x2670+-0x1*0x2275+0x48e5;_0x587494<_0x17c2b2['length'];++_0x587494){const _0x1ad2e5=_0x17c2b2[_0x587494],_0x61be46=Math['max'](_0x1e5880(_0x1ad2e5,'minWidth'),-0x8e5+-0x4e*-0x15+0x27f),_0x5c11e7=Math['max'](_0x1e5880(_0x1ad2e5,'minHeight'),-0x2d+0x1d63*-0x1+0x1d90),_0x1b655b=Math['max'](_0x1e5880(_0x1ad2e5,'maxWidth'),_0x61be46),_0x21ca3a=Math['max'](_0x1e5880(_0x1ad2e5,'maxHeight'),_0x5c11e7),_0x5d8958=_0x66a856(_0x1e5880(_0x1ad2e5,'width'),_0x61be46,_0x1b655b),_0x12c516=_0x66a856(_0x1e5880(_0x1ad2e5,'height'),_0x5c11e7,_0x21ca3a),_0x313703=_0x1e5880(_0x1ad2e5,'fitWidthPr'+'oportion'),_0x4c6d4b=_0x1e5880(_0x1ad2e5,'fitHeightP'+'roportion');_0x5f2a5f['push']({'minWidth':_0x61be46,'minHeight':_0x5c11e7,'maxWidth':_0x1b655b,'maxHeight':_0x21ca3a,'width':_0x5d8958,'height':_0x12c516,'fitWidthProportion':_0x313703,'fitHeightProportion':_0x4c6d4b});}return _0x5f2a5f;}function _0x1e5880(_0x49a167,_0x5b35e3){const _0x33fa60=_0x49a167['entity']['layoutchil'+'d'];return _0x33fa60&&_0x33fa60['enabled']&&_0x33fa60[_0x5b35e3]!==void(-0x1*0x12e9+-0x3bf+0x16a8)&&_0x33fa60[_0x5b35e3]!==null?_0x33fa60[_0x5b35e3]:_0x49a167[_0x5b35e3]!==void(0x1b20+-0x10b*0x11+-0x965)?_0x49a167[_0x5b35e3]:VR[_0x5b35e3];}function _0x66a856(_0x1aad96,_0x1a1e6f,_0x295f79){return Math['min'](Math['max'](_0x1aad96,_0x1a1e6f),_0x295f79);}function _0x20b0b8(_0x17883b,_0x20da35){return _0x17883b['reduce']((_0x16f404,_0x40eab3)=>_0x16f404+_0x40eab3[_0x20da35],0x410+0x5*0x6df+-0x266b);}function _0x3b6d76(_0x295f22,_0x484431){const _0xbdf680=_0x20b0b8(_0x295f22,_0x484431),_0x496e0f=[],_0x3dd061=_0x295f22['length'];if(_0xbdf680===-0x96b*0x3+-0x5c9+0x1*0x220a){for(let _0xf9fb01=-0x2415+0x7ea*0x1+0x1*0x1c2b;_0xf9fb01<_0x3dd061;++_0xf9fb01)_0x496e0f['push']((0x8*-0x26+0x61*-0x25+-0x16*-0xb1)/_0x3dd061);}else{for(let _0x3b62f0=0x1180+0x1cfc+-0x2e7c;_0x3b62f0<_0x3dd061;++_0x3b62f0)_0x496e0f['push'](_0x295f22[_0x3b62f0][_0x484431]/_0xbdf680);}return _0x496e0f;}function _0x206fef(_0x119080){if(_0x119080['length']===0x1*-0x303+-0x195*0xe+0x192a)return[-0x2627+0x3*-0x42d+-0x10e5*-0x3];const _0x4f071e=[],_0x4165d4=_0x119080['length'];for(let _0x53c3bb=-0xc88*-0x2+-0x9*0x425+0xc3d;_0x53c3bb<_0x4165d4;++_0x53c3bb)_0x4f071e['push']((0xfa0+-0x16a9*0x1+0x70a-_0x119080[_0x53c3bb])/(_0x4165d4-(-0x3*-0x5bf+-0x16c4+-0x6*-0xec)));return _0x4f071e;}function _0x3a292f(_0x1809ba,_0x43d80b,_0x4ce1e7){return _0x1809ba['forEach'](_0x8b4247),_0x1809ba['slice']()['sort']((_0x2583b2,_0x493018)=>_0x4ce1e7?_0x493018[_0x43d80b]-_0x2583b2[_0x43d80b]:_0x2583b2[_0x43d80b]-_0x493018[_0x43d80b])['map'](_0x5ec0dd);}function _0x8b4247(_0x3f7d28,_0x1ee4e8){_0x3f7d28['index']=_0x1ee4e8;}function _0x5ec0dd(_0x285103){return _0x285103['index'];}function _0x48fa90(_0x3f5b4e,_0xb431d3){const _0x390fc7=[];_0x390fc7[_0xb431d3[_0x3f5b4e['length']-(-0x4fc+0x19*0x17d+-0x4*0x80e)]]=_0x3f5b4e[_0xb431d3[_0x3f5b4e['length']-(-0x1d3c+-0xb*-0x4d+0x19ee)]];for(let _0x51381c=_0x3f5b4e['length']-(0x33*-0x98+-0x115c+0x2fa6);_0x51381c>=0xadf+-0x138d+0x65*0x16;--_0x51381c)_0x390fc7[_0xb431d3[_0x51381c]]=_0x390fc7[_0xb431d3[_0x51381c+(-0x2047+-0x610+-0x2*-0x132c)]]+_0x3f5b4e[_0xb431d3[_0x51381c]];return _0x390fc7;}return _0x5366e4;}const xm={};xm[Ce]=t0(Ce),xm[je]=t0(je);class GR{['calculateL'+'ayout'](_0x5c5209,_0x2f8428){const _0x401804=xm[_0x2f8428['orientatio'+'n']];if(_0x401804)return _0x401804(_0x5c5209,_0x2f8428);throw new Error('Unrecogniz'+'ed\x20orienta'+'tion\x20value'+':\x20'+_0x2f8428['orientatio'+'n']);}}function Jg(_0x2bf0b9){return _0x2bf0b9['element'];}function HR(_0x4d43a0){return _0x4d43a0['enabled']&&_0x4d43a0['element']&&_0x4d43a0['element']['enabled'];}class s0 extends we{constructor(_0x7ad03a,_0x395f10){super(_0x7ad03a,_0x395f10),h(this,'_orientati'+'on',Ce),h(this,'_reverseX',!(0x1*-0xf53+0x1ea+-0x2*-0x6b5)),h(this,'_reverseY',!(0x63*-0x9+-0x201*-0x1+0x17a*0x1)),h(this,'_alignment',new J(0x1*-0x23e3+-0xd22+0x3105*0x1,0x1232+0x821+-0x1a52)),h(this,'_padding',new re()),h(this,'_spacing',new J()),h(this,'_widthFitt'+'ing',Nu),h(this,'_heightFit'+'ting',Nu),h(this,'_wrap',!(0x2*-0x4e8+0x1bff*0x1+0xb3*-0x1a)),h(this,'_layoutCal'+'culator',new GR()),(this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'on'),this['entity']['children']['forEach'](_0x39d71a=>{this['_listenFor'+'ReflowEven'+'ts'](_0x39d71a,'on');}),this['entity']['on']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['on']('childremov'+'e',this['_onChildRe'+'move'],this),w['assert'](_0x7ad03a['app']['systems']['element'],'System\x20\x27el'+'ement\x27\x20doe'+'sn\x27t\x20exist'),_0x7ad03a['app']['systems']['element']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0x7ad03a['app']['systems']['element']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),w['assert'](_0x7ad03a['app']['systems']['layoutchil'+'d'],'System\x20\x27la'+'youtchild\x27'+'\x20doesn\x27t\x20e'+'xist'),_0x7ad03a['app']['systems']['layoutchil'+'d']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0x7ad03a['app']['systems']['layoutchil'+'d']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this));}set['orientatio'+'n'](_0xbbf437){_0xbbf437!==this['_orientati'+'on']&&(this['_orientati'+'on']=_0xbbf437,this['_scheduleR'+'eflow']());}get['orientatio'+'n'](){return this['_orientati'+'on'];}set['reverseX'](_0x45abb4){_0x45abb4!==this['_reverseX']&&(this['_reverseX']=_0x45abb4,this['_scheduleR'+'eflow']());}get['reverseX'](){return this['_reverseX'];}set['reverseY'](_0x461afa){_0x461afa!==this['_reverseY']&&(this['_reverseY']=_0x461afa,this['_scheduleR'+'eflow']());}get['reverseY'](){return this['_reverseY'];}set['alignment'](_0x31023e){_0x31023e['equals'](this['_alignment'])||(this['_alignment']['copy'](_0x31023e),this['_scheduleR'+'eflow']());}get['alignment'](){return this['_alignment'];}set['padding'](_0x4a94b4){_0x4a94b4['equals'](this['_padding'])||(this['_padding']['copy'](_0x4a94b4),this['_scheduleR'+'eflow']());}get['padding'](){return this['_padding'];}set['spacing'](_0x523ab8){_0x523ab8['equals'](this['_spacing'])||(this['_spacing']['copy'](_0x523ab8),this['_scheduleR'+'eflow']());}get['spacing'](){return this['_spacing'];}set['widthFitti'+'ng'](_0x2be662){_0x2be662!==this['_widthFitt'+'ing']&&(this['_widthFitt'+'ing']=_0x2be662,this['_scheduleR'+'eflow']());}get['widthFitti'+'ng'](){return this['_widthFitt'+'ing'];}set['heightFitt'+'ing'](_0x23f332){_0x23f332!==this['_heightFit'+'ting']&&(this['_heightFit'+'ting']=_0x23f332,this['_scheduleR'+'eflow']());}get['heightFitt'+'ing'](){return this['_heightFit'+'ting'];}set['wrap'](_0x268d13){_0x268d13!==this['_wrap']&&(this['_wrap']=_0x268d13,this['_scheduleR'+'eflow']());}get['wrap'](){return this['_wrap'];}['_isSelfOrC'+'hild'](_0x2551cd){return _0x2551cd===this['entity']||this['entity']['children']['indexOf'](_0x2551cd)!==-(0x2667+-0x23af+-0x2b7);}['_listenFor'+'ReflowEven'+'ts'](_0xe0cceb,_0xb7c008){_0xe0cceb['element']&&(_0xe0cceb['element'][_0xb7c008]('enableelem'+'ent',this['_scheduleR'+'eflow'],this),_0xe0cceb['element'][_0xb7c008]('disableele'+'ment',this['_scheduleR'+'eflow'],this),_0xe0cceb['element'][_0xb7c008]('resize',this['_scheduleR'+'eflow'],this),_0xe0cceb['element'][_0xb7c008]('set:pivot',this['_scheduleR'+'eflow'],this)),_0xe0cceb['layoutchil'+'d']&&(_0xe0cceb['layoutchil'+'d'][_0xb7c008]('set_enable'+'d',this['_scheduleR'+'eflow'],this),_0xe0cceb['layoutchil'+'d'][_0xb7c008]('resize',this['_scheduleR'+'eflow'],this));}['_onElement'+'OrLayoutCo'+'mponentAdd'](_0x55cfce){this['_isSelfOrC'+'hild'](_0x55cfce)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x55cfce,'on'),this['_scheduleR'+'eflow']());}['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'](_0x4af132){this['_isSelfOrC'+'hild'](_0x4af132)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x4af132,'off'),this['_scheduleR'+'eflow']());}['_onChildIn'+'sert'](_0x38941e){this['_listenFor'+'ReflowEven'+'ts'](_0x38941e,'on'),this['_scheduleR'+'eflow']();}['_onChildRe'+'move'](_0x484127){this['_listenFor'+'ReflowEven'+'ts'](_0x484127,'off'),this['_scheduleR'+'eflow']();}['_scheduleR'+'eflow'](){this['enabled']&&this['entity']&&this['entity']['enabled']&&!this['_isPerform'+'ingReflow']&&this['system']['scheduleRe'+'flow'](this);}['reflow'](){const _0x101f44=Jg(this['entity']),_0xe41ac3=this['entity']['children']['filter'](HR)['map'](Jg);if(!_0x101f44||_0xe41ac3['length']===-0x2632+0x1e7d+-0x1*-0x7b5)return;const _0x294e26=Math['max'](_0x101f44['calculated'+'Width'],-0x240e+-0xd*-0x1eb+0xb1f),_0x59d091=Math['max'](_0x101f44['calculated'+'Height'],-0x8bb+-0x18e1+-0x3*-0xb34),_0x481978={'orientation':this['_orientati'+'on'],'reverseX':this['_reverseX'],'reverseY':this['_reverseY'],'alignment':this['_alignment'],'padding':this['_padding'],'spacing':this['_spacing'],'widthFitting':this['_widthFitt'+'ing'],'heightFitting':this['_heightFit'+'ting'],'wrap':this['_wrap'],'containerSize':new J(_0x294e26,_0x59d091)};this['_isPerform'+'ingReflow']=!(0x17*-0xf8+0x1b1a*-0x1+0x3162);const _0x10c17c=this['_layoutCal'+'culator']['calculateL'+'ayout'](_0xe41ac3,_0x481978);this['_isPerform'+'ingReflow']=!(-0x2*0x53+0xe5*0x1+-0x3e),this['fire']('reflow',_0x10c17c);}['onEnable'](){this['_scheduleR'+'eflow']();}['onRemove'](){this['entity']['off']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['off']('childremov'+'e',this['_onChildRe'+'move'],this),this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'off'),this['entity']['children']['forEach'](_0x41dd3a=>{this['_listenFor'+'ReflowEven'+'ts'](_0x41dd3a,'off');}),this['system']['app']['systems']['element']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['element']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this);}}class WR{constructor(){this['enabled']=!(-0x851+0xb5*0x25+-0x11d8);}}const i0=['enabled'],$R=0x9b*0x2d+0x204d+0x277*-0x18;class XR extends ct{constructor(_0x546a50){super(_0x546a50),this['id']='layoutgrou'+'p',this['ComponentT'+'ype']=s0,this['DataType']=WR,this['schema']=i0,this['_reflowQue'+'ue']=[],this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x4add4a,_0x30261f,_0x5ae3ff){_0x30261f['enabled']!==void(0x10dd*-0x1+-0x1a75+0x15a9*0x2)&&(_0x4add4a['enabled']=_0x30261f['enabled']),_0x30261f['orientatio'+'n']!==void(-0xe71*0x1+-0x240f+0x65*0x80)&&(_0x4add4a['orientatio'+'n']=_0x30261f['orientatio'+'n']),_0x30261f['reverseX']!==void(0x1259*-0x1+0x24e1*0x1+0x8*-0x251)&&(_0x4add4a['reverseX']=_0x30261f['reverseX']),_0x30261f['reverseY']!==void(-0x58*-0x4e+-0x5d4+-0x11*0x13c)&&(_0x4add4a['reverseY']=_0x30261f['reverseY']),_0x30261f['alignment']!==void(-0x1371+0xa*0x239+-0x2c9)&&(_0x4add4a['alignment']=Array['isArray'](_0x30261f['alignment'])?new J(_0x30261f['alignment']):_0x30261f['alignment']),_0x30261f['padding']!==void(0x220d+-0x1*0x73a+-0x1ad3)&&(_0x4add4a['padding']=Array['isArray'](_0x30261f['padding'])?new re(_0x30261f['padding']):_0x30261f['padding']),_0x30261f['spacing']!==void(-0x1782+-0xe99*-0x2+0x70*-0xd)&&(_0x4add4a['spacing']=Array['isArray'](_0x30261f['spacing'])?new J(_0x30261f['spacing']):_0x30261f['spacing']),_0x30261f['widthFitti'+'ng']!==void(-0x3b5+-0x15b*-0xd+0x6f5*-0x2)&&(_0x4add4a['widthFitti'+'ng']=_0x30261f['widthFitti'+'ng']),_0x30261f['heightFitt'+'ing']!==void(-0xd*-0x146+-0x2057+0xfc9)&&(_0x4add4a['heightFitt'+'ing']=_0x30261f['heightFitt'+'ing']),_0x30261f['wrap']!==void(0x6f*-0x51+0xdb0+-0x3*-0x725)&&(_0x4add4a['wrap']=_0x30261f['wrap']),super['initialize'+'ComponentD'+'ata'](_0x4add4a,_0x30261f,_0x5ae3ff);}['cloneCompo'+'nent'](_0x432647,_0x5803d9){const _0x4fdb93=_0x432647['layoutgrou'+'p'];return this['addCompone'+'nt'](_0x5803d9,{'enabled':_0x4fdb93['enabled'],'orientation':_0x4fdb93['orientatio'+'n'],'reverseX':_0x4fdb93['reverseX'],'reverseY':_0x4fdb93['reverseY'],'alignment':_0x4fdb93['alignment'],'padding':_0x4fdb93['padding'],'spacing':_0x4fdb93['spacing'],'widthFitting':_0x4fdb93['widthFitti'+'ng'],'heightFitting':_0x4fdb93['heightFitt'+'ing'],'wrap':_0x4fdb93['wrap']});}['scheduleRe'+'flow'](_0x47dd74){this['_reflowQue'+'ue']['indexOf'](_0x47dd74)===-(0x1*0x99d+-0x2e*-0x79+0x2*-0xfad)&&this['_reflowQue'+'ue']['push'](_0x47dd74);}['_onPostUpd'+'ate'](){this['_processRe'+'flowQueue']();}['_processRe'+'flowQueue'](){if(this['_reflowQue'+'ue']['length']===0x60a*0x4+-0x829+-0xfff)return;let _0x3da34e=0x2629+-0xa7c+0x221*-0xd;for(;this['_reflowQue'+'ue']['length']>-0x186c+0x745*-0x5+-0x1*-0x3cc5;){const _0x44a1bb=this['_reflowQue'+'ue']['slice']();this['_reflowQue'+'ue']['length']=0x73+0xa3*0x32+-0xf*0x227,_0x44a1bb['sort']((_0xc15b71,_0xfcd08b)=>_0xc15b71['entity']['graphDepth']-_0xfcd08b['entity']['graphDepth']);for(let _0xab6599=0x1911+-0x3bf*-0x9+0x9cc*-0x6;_0xab6599<_0x44a1bb['length'];++_0xab6599)_0x44a1bb[_0xab6599]['reflow']();if(++_0x3da34e>=$R){console['warn']('Max\x20reflow'+'\x20iteration'+'s\x20limit\x20re'+'ached,\x20bai'+'ling.');break;}}}['_onRemoveC'+'omponent'](_0x2dd122,_0x24f51a){_0x24f51a['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}we['_buildAcce'+'ssors'](s0['prototype'],i0);class qR{constructor(){h(this,'map',new Map());}['destroy'](_0x58be96){this['map']['forEach'](_0x3d71e9=>_0x3d71e9['mesh']['destroy']());}}const jR=new Kt(),r0=(_0x174bcd,_0x2b81b0)=>{const _0x123b63=jR['get'](_0x174bcd,()=>new qR());let _0x2f2cce=_0x123b63['map']['get'](_0x2b81b0);if(!_0x2f2cce){let _0x528631,_0x43dac5;switch(_0x2b81b0){case'box':_0x528631=Ge['fromGeomet'+'ry'](_0x174bcd,new mu()),_0x43dac5={'x':0x2,'y':0x2,'z':0x2,'uv':(0x1*-0x2474+0x1*0xca7+0x17cf)/(-0xd17+0x110*-0x1a+0x322*0xd)};break;case'capsule':_0x528631=Ge['fromGeomet'+'ry'](_0x174bcd,new GA({'radius':0.5,'height':0x2})),_0x43dac5={'x':Math['PI']*(-0x81a+0x1*0x2597+0x1*-0x1d7b),'y':Math['PI'],'z':Math['PI']*(0x49d*-0x8+0x25b9+0x3*-0x45),'uv':(0x22f6+0x1adf*-0x1+-0x816)/(0x1*-0x1753+-0x1*0x2f5+0x1a4b)+(0xf7f*-0x2+0x7*0x2e9+-0x50*-0x22)/(-0x23d+0x1af3*-0x1+0x1d33)/(0xe2d*0x1+-0xa30+-0x2*0x1fd)*(0x19c+-0xecf+0xd35)};break;case'cone':_0x528631=Ge['fromGeomet'+'ry'](_0x174bcd,new HA({'baseRadius':0.5,'peakRadius':0x0,'height':0x1})),_0x43dac5={'x':2.54,'y':2.54,'z':2.54,'uv':(0x16b2+-0x29f+-0x1412)/(0x241+0x25*-0xd3+-0x1c41*-0x1)+(0xbc3+0x10bf*-0x2+0x15bc)/(-0x19fc+0x140d+-0x2*-0x2f9)/(-0x15ea+0xfa+0x14f3)};break;case'cylinder':_0x528631=Ge['fromGeomet'+'ry'](_0x174bcd,new WA({'radius':0.5,'height':0x1})),_0x43dac5={'x':Math['PI'],'y':(0x3b*0x49+-0x1f2+-0xee1+0.79)*(-0x12d0+-0x4*-0x955+-0x1282),'z':Math['PI'],'uv':(0x3*0x77+0xb41+-0xca5)/(0x12ff+-0x24bd+-0x5*-0x38d)+(0x5fe+0x11*0x1b+-0x1*0x7c8)/(0x15fa+0x241*-0x2+-0x1175)/(-0x1*0x10b5+-0x43f+-0x3*-0x6fd)*(0x1e1*0x11+-0x11*-0x1f1+-0x4*0x103c)};break;case'plane':_0x528631=Ge['fromGeomet'+'ry'](_0x174bcd,new $A({'halfExtents':new J(0x1ca*0x2+-0x6d+-0x327+0.5,0x1990+0x146d+-0xc1*0x3d+0.5),'widthSegments':0x1,'lengthSegments':0x1})),_0x43dac5={'x':0x0,'y':0x1,'z':0x0,'uv':0x1};break;case'sphere':_0x528631=Ge['fromGeomet'+'ry'](_0x174bcd,new _m({'radius':0.5})),_0x43dac5={'x':Math['PI'],'y':Math['PI'],'z':Math['PI'],'uv':0x1};break;case'torus':_0x528631=Ge['fromGeomet'+'ry'](_0x174bcd,new XA({'tubeRadius':0.2,'ringRadius':0.3})),_0x43dac5={'x':Math['PI']*(0xef6+0x23f8+-0x2*0x1977+0.5)*(-0x1321+0x357*0x8+-0x797+0.5)-Math['PI']*(-0x2*-0x21d+0x10c+0x96*-0x9+0.1)*(-0xba7+-0x206c+-0xeb1*-0x3+0.1),'y':0.4,'z':0.4,'uv':0x1};break;default:throw new Error('Invalid\x20pr'+'imitive\x20ty'+'pe:\x20'+_0x2b81b0);}_0x528631['incRefCoun'+'t'](),_0x2f2cce={'mesh':_0x528631,'area':_0x43dac5},_0x123b63['map']['set'](_0x2b81b0,_0x2f2cce);}return _0x2f2cce;};class Tm extends we{constructor(_0x3e822d,_0x47aec3){super(_0x3e822d,_0x47aec3),h(this,'_type','asset'),h(this,'_asset',null),h(this,'_model',null),h(this,'_mapping',{}),h(this,'_castShado'+'ws',!(0x138f+-0x95*0x3b+0xec8)),h(this,'_receiveSh'+'adows',!(0x1*-0x4d6+-0x2*-0x1c9+0x51*0x4)),h(this,'_materialA'+'sset',null),h(this,'_material'),h(this,'_castShado'+'wsLightmap',!(-0x345*-0x8+-0xcaa*-0x1+-0x26d2)),h(this,'_lightmapp'+'ed',!(0x185d+-0x72d+0x35*-0x53)),h(this,'_lightmapS'+'izeMultipl'+'ier',0x147d+0x10fd+0x2579*-0x1),h(this,'isStatic',!(-0x1bcc+0x2025+0x116*-0x4)),h(this,'_layers',[er]),h(this,'_batchGrou'+'pId',-(0x5*-0x33e+-0x1a97*-0x1+-0xa60)),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_materialE'+'vents',null),h(this,'_clonedMod'+'el',!(-0x11*-0x1e1+-0x1*0x5bb+-0x1a35)),h(this,'_batchGrou'+'p',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_material']=_0x3e822d['defaultMat'+'erial'],_0x47aec3['on']('remove',this['onRemoveCh'+'ild'],this),_0x47aec3['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x47aec3['on']('insert',this['onInsertCh'+'ild'],this),_0x47aec3['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['meshInstan'+'ces'](_0x45be62){this['_model']&&(this['_model']['meshInstan'+'ces']=_0x45be62);}get['meshInstan'+'ces'](){return this['_model']?this['_model']['meshInstan'+'ces']:null;}set['customAabb'](_0xf5c7ed){if(this['_customAab'+'b']=_0xf5c7ed,this['_model']){const _0x34545c=this['_model']['meshInstan'+'ces'];if(_0x34545c){for(let _0x41a600=0x75*-0xb+0x20*0xd+0x367*0x1;_0x41a600<_0x34545c['length'];_0x41a600++)_0x34545c[_0x41a600]['setCustomA'+'abb'](this['_customAab'+'b']);}}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x44fd55){if(this['_type']!==_0x44fd55){if(this['_area']=null,this['_type']=_0x44fd55,_0x44fd55==='asset')this['_asset']!==null?this['_bindModel'+'Asset'](this['_asset']):this['model']=null;else{const _0x2b447f=r0(this['system']['app']['graphicsDe'+'vice'],_0x44fd55);this['_area']=_0x2b447f['area'];const _0x32ad64=_0x2b447f['mesh'],_0x4902cf=new Ie(),_0x24947f=new sr();_0x24947f['graph']=_0x4902cf,_0x24947f['meshInstan'+'ces']=[new He(_0x32ad64,this['_material'],_0x4902cf)],this['model']=_0x24947f,this['_asset']=null;}}}get['type'](){return this['_type'];}set['asset'](_0x1c963b){const _0x17e7c8=this['system']['app']['assets'];let _0x535495=_0x1c963b;if(_0x1c963b instanceof pe&&(_0x535495=_0x1c963b['id']),this['_asset']!==_0x535495){if(this['_asset']){_0x17e7c8['off']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this);const _0x40d470=_0x17e7c8['get'](this['_asset']);_0x40d470&&this['_unbindMod'+'elAsset'](_0x40d470);}if(this['_asset']=_0x535495,this['_asset']){const _0x1b47e2=_0x17e7c8['get'](this['_asset']);_0x1b47e2?this['_bindModel'+'Asset'](_0x1b47e2):(this['model']=null,_0x17e7c8['on']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this));}else this['model']=null;}}get['asset'](){return this['_asset'];}set['model'](_0xd71ed0){if(this['_model']!==_0xd71ed0){if(_0xd71ed0&&_0xd71ed0['_immutable']){w['error']('Invalid\x20at'+'tempt\x20to\x20a'+'ssign\x20a\x20mo'+'del\x20to\x20mul'+'tiple\x20Mode'+'lComponent'+'s');return;}if(this['_model']&&(this['_model']['_immutable']=!(-0x1af7+0x2621+-0xb29),this['removeMode'+'lFromLayer'+'s'](),this['_model']['getGraph']()['destroy'](),delete this['_model']['_entity'],this['_clonedMod'+'el']&&(this['_model']['destroy'](),this['_clonedMod'+'el']=!(-0x645+-0x1a3*0x13+0xc75*0x3))),this['_model']=_0xd71ed0,this['_model']){this['_model']['_immutable']=!(-0x2222+-0x2a*0xe7+0x14*0x39a);const _0x11d61a=this['_model']['meshInstan'+'ces'];for(let _0x2f9eeb=-0x1*0x24d5+-0x443*-0x4+0x13c9;_0x2f9eeb<_0x11d61a['length'];_0x2f9eeb++)_0x11d61a[_0x2f9eeb]['castShadow']=this['_castShado'+'ws'],_0x11d61a[_0x2f9eeb]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x11d61a[_0x2f9eeb]['setCustomA'+'abb'](this['_customAab'+'b']);this['lightmappe'+'d']=this['_lightmapp'+'ed'],this['entity']['addChild'](this['_model']['graph']),this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_model']['_entity']=this['entity'],this['entity']['animation']&&this['entity']['animation']['setModel'](this['_model']),this['entity']['anim']&&this['entity']['anim']['rebind'](),this['type']==='asset'?this['mapping']=this['_mapping']:this['_unsetMate'+'rialEvents']();}}}get['model'](){return this['_model'];}set['lightmappe'+'d'](_0x4bce08){if(_0x4bce08!==this['_lightmapp'+'ed']&&(this['_lightmapp'+'ed']=_0x4bce08,this['_model'])){const _0x486afe=this['_model']['meshInstan'+'ces'];for(let _0x4713d5=-0xf41*0x1+-0x5*-0x1f5+0x578;_0x4713d5<_0x486afe['length'];_0x4713d5++)_0x486afe[_0x4713d5]['setLightma'+'pped'](_0x4bce08);}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x1ce8ec){if(this['_castShado'+'ws']===_0x1ce8ec)return;const _0x4af055=this['_model'];if(_0x4af055){const _0x5416da=this['layers'],_0x34a222=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x1ce8ec)for(let _0x13043f=-0x1321+-0xfc6+0x5*0x6fb;_0x13043f<_0x5416da['length'];_0x13043f++){const _0x2ef9f6=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x13043f]);_0x2ef9f6&&_0x2ef9f6['removeShad'+'owCasters'](_0x4af055['meshInstan'+'ces']);}const _0x104291=_0x4af055['meshInstan'+'ces'];for(let _0x21fc3e=0x1dd8+-0x1*0xa+-0x221*0xe;_0x21fc3e<_0x104291['length'];_0x21fc3e++)_0x104291[_0x21fc3e]['castShadow']=_0x1ce8ec;if(!this['_castShado'+'ws']&&_0x1ce8ec)for(let _0x289739=-0x86f+-0xdd4+0x1643;_0x289739<_0x5416da['length'];_0x289739++){const _0x3df28e=_0x34a222['layers']['getLayerBy'+'Id'](_0x5416da[_0x289739]);_0x3df28e&&_0x3df28e['addShadowC'+'asters'](_0x4af055['meshInstan'+'ces']);}}this['_castShado'+'ws']=_0x1ce8ec;}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x1b35d6){if(this['_receiveSh'+'adows']!==_0x1b35d6&&(this['_receiveSh'+'adows']=_0x1b35d6,this['_model'])){const _0x2dd29c=this['_model']['meshInstan'+'ces'];for(let _0x2e0c4e=-0x183a+-0x86e*-0x1+-0x544*-0x3,_0x2929ba=_0x2dd29c['length'];_0x2e0c4e<_0x2929ba;_0x2e0c4e++)_0x2dd29c[_0x2e0c4e]['receiveSha'+'dow']=_0x1b35d6;}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x33ae9a){this['_castShado'+'wsLightmap']=_0x33ae9a;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x38468d){this['_lightmapS'+'izeMultipl'+'ier']=_0x38468d;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x570562){const _0x466642=this['system']['app']['scene']['layers'];if(this['meshInstan'+'ces'])for(let _0x121732=-0x135f+-0x13e0+0x273f;_0x121732<this['_layers']['length'];_0x121732++){const _0x7d7a24=_0x466642['getLayerBy'+'Id'](this['_layers'][_0x121732]);_0x7d7a24&&_0x7d7a24['removeMesh'+'Instances'](this['meshInstan'+'ces']);}this['_layers']['length']=-0xd08+-0x13*-0x12+-0x3*-0x3e6;for(let _0x648c81=-0xbc1+-0x2368+0x2f29;_0x648c81<_0x570562['length'];_0x648c81++)this['_layers'][_0x648c81]=_0x570562[_0x648c81];if(!(!this['enabled']||!this['entity']['enabled']||!this['meshInstan'+'ces']))for(let _0x52efc5=-0x1bb4+-0x4*0x6b1+0x3678;_0x52efc5<this['_layers']['length'];_0x52efc5++){const _0x40a868=_0x466642['getLayerBy'+'Id'](this['_layers'][_0x52efc5]);_0x40a868&&_0x40a868['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x1fe2cf){var _0x24aaa6,_0x128941;this['_batchGrou'+'pId']!==_0x1fe2cf&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0x1*-0x6df+0x1aa4+-0x7*0x2d3&&((_0x24aaa6=this['system']['app']['batcher'])==null||_0x24aaa6['remove'](St['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x1fe2cf>=0x477+-0x25f*0x2+-0x1*-0x47&&((_0x128941=this['system']['app']['batcher'])==null||_0x128941['insert'](St['MODEL'],_0x1fe2cf,this['entity'])),_0x1fe2cf<-0x1bbe+-0x104d+0x29*0x113&&this['_batchGrou'+'pId']>=-0x661*-0x5+0x5*0x5c9+0x3*-0x1446&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_batchGrou'+'pId']=_0x1fe2cf);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['materialAs'+'set'](_0x4367f0){let _0x2edd63=_0x4367f0;_0x4367f0 instanceof pe&&(_0x2edd63=_0x4367f0['id']);const _0x54e4fc=this['system']['app']['assets'];if(_0x2edd63!==this['_materialA'+'sset']){if(this['_materialA'+'sset']){_0x54e4fc['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this);const _0x6f2de3=_0x54e4fc['get'](this['_materialA'+'sset']);_0x6f2de3&&this['_unbindMat'+'erialAsset'](_0x6f2de3);}if(this['_materialA'+'sset']=_0x2edd63,this['_materialA'+'sset']){const _0x13d7dc=_0x54e4fc['get'](this['_materialA'+'sset']);_0x13d7dc?this['_bindMater'+'ialAsset'](_0x13d7dc):(this['_setMateri'+'al'](this['system']['defaultMat'+'erial']),_0x54e4fc['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this));}else this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['material'](_0x4c7e21){this['_material']!==_0x4c7e21&&(this['materialAs'+'set']=null,this['_setMateri'+'al'](_0x4c7e21));}get['material'](){return this['_material'];}set['mapping'](_0x58c3b5){if(this['_type']!=='asset'||(this['_unsetMate'+'rialEvents'](),_0x58c3b5||(_0x58c3b5={}),this['_mapping']=_0x58c3b5,!this['_model']))return;const _0x4a35ee=this['_model']['meshInstan'+'ces'],_0x3505aa=this['asset']?this['system']['app']['assets']['get'](this['asset']):null,_0x11de55=_0x3505aa?_0x3505aa['data']['mapping']:null;let _0x5dafa6=null;for(let _0x25e9da=-0x1b73+-0xe*-0x24b+-0x4a7,_0x1405b5=_0x4a35ee['length'];_0x25e9da<_0x1405b5;_0x25e9da++)if(_0x58c3b5[_0x25e9da]!==void(-0x1d7b+-0x1498+0x3213))_0x58c3b5[_0x25e9da]?(_0x5dafa6=this['system']['app']['assets']['get'](_0x58c3b5[_0x25e9da]),this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x5dafa6,_0x4a35ee[_0x25e9da],_0x25e9da)):_0x4a35ee[_0x25e9da]['material']=this['system']['defaultMat'+'erial'];else{if(_0x11de55){if(_0x11de55[_0x25e9da]&&(_0x11de55[_0x25e9da]['material']||_0x11de55[_0x25e9da]['path'])){if(_0x11de55[_0x25e9da]['material']!==void(-0xe75+-0x2*-0xafc+-0x3*0x281))_0x5dafa6=this['system']['app']['assets']['get'](_0x11de55[_0x25e9da]['material']);else{if(_0x11de55[_0x25e9da]['path']!==void(0x13e*0xc+0x1ca+-0x1*0x10b2)){const _0x14ef5c=this['_getMateri'+'alAssetUrl'](_0x11de55[_0x25e9da]['path']);_0x14ef5c&&(_0x5dafa6=this['system']['app']['assets']['getByUrl'](_0x14ef5c));}}this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x5dafa6,_0x4a35ee[_0x25e9da],_0x25e9da);}else _0x4a35ee[_0x25e9da]['material']=this['system']['defaultMat'+'erial'];}}}get['mapping'](){return this['_mapping'];}['addModelTo'+'Layers'](){const _0x2b24e7=this['system']['app']['scene']['layers'];for(let _0x198cb4=-0x1*-0x1756+-0xf67*-0x1+0x26bd*-0x1;_0x198cb4<this['_layers']['length'];_0x198cb4++){const _0x15de33=_0x2b24e7['getLayerBy'+'Id'](this['_layers'][_0x198cb4]);_0x15de33&&_0x15de33['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](){const _0x1134b4=this['system']['app']['scene']['layers'];for(let _0xda26c0=0x1e3c+-0x3d*0x59+-0x1*0x907;_0xda26c0<this['_layers']['length'];_0xda26c0++){const _0x2ac1ce=_0x1134b4['getLayerBy'+'Id'](this['_layers'][_0xda26c0]);_0x2ac1ce&&_0x2ac1ce['removeMesh'+'Instances'](this['meshInstan'+'ces']);}}['onRemoveCh'+'ild'](){this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['onInsertCh'+'ild'](){this['_model']&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers']();}['onRemove'](){this['asset']=null,this['model']=null,this['materialAs'+'set']=null,this['_unsetMate'+'rialEvents'](),this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x57a081,_0x5c110a){this['addModelTo'+'Layers'](),_0x57a081['off']('add',this['onLayerAdd'+'ed'],this),_0x57a081['off']('remove',this['onLayerRem'+'oved'],this),_0x5c110a['on']('add',this['onLayerAdd'+'ed'],this),_0x5c110a['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x23cb84){this['layers']['indexOf'](_0x23cb84['id'])<0x86d+-0x3*0xbff+0x1b90||_0x23cb84['addMeshIns'+'tances'](this['meshInstan'+'ces']);}['onLayerRem'+'oved'](_0x5d7011){this['layers']['indexOf'](_0x5d7011['id'])<-0x1e56+0x1389+0x18b*0x7||_0x5d7011['removeMesh'+'Instances'](this['meshInstan'+'ces']);}['_setMateri'+'alEvent'](_0x5ee204,_0x21d6e9,_0x5d6a1e,_0x4cad61){const _0x4a1ffc=_0x21d6e9+':'+_0x5d6a1e;this['system']['app']['assets']['on'](_0x4a1ffc,_0x4cad61,this),this['_materialE'+'vents']||(this['_materialE'+'vents']=[]),this['_materialE'+'vents'][_0x5ee204]||(this['_materialE'+'vents'][_0x5ee204]={}),this['_materialE'+'vents'][_0x5ee204][_0x4a1ffc]={'id':_0x5d6a1e,'handler':_0x4cad61};}['_unsetMate'+'rialEvents'](){const _0x11ab78=this['system']['app']['assets'],_0x58cfbd=this['_materialE'+'vents'];if(_0x58cfbd){for(let _0x529e5b=0xf09*0x2+-0x905+-0x150d,_0x149913=_0x58cfbd['length'];_0x529e5b<_0x149913;_0x529e5b++){if(!_0x58cfbd[_0x529e5b])continue;const _0x1d89b9=_0x58cfbd[_0x529e5b];for(const _0xd0b5ab in _0x1d89b9)_0x11ab78['off'](_0xd0b5ab,_0x1d89b9[_0xd0b5ab]['handler'],this);}this['_materialE'+'vents']=null;}}['_getAssetB'+'yIdOrPath'](_0x3586b8){let _0x4d163f=null;if(!isNaN(parseInt(_0x3586b8,0x2105+-0x1f9*-0x7+-0x1*0x2eca)))_0x4d163f=this['system']['app']['assets']['get'](_0x3586b8);else{if(this['asset']){const _0x3086fa=this['_getMateri'+'alAssetUrl'](_0x3586b8);_0x3086fa&&(_0x4d163f=this['system']['app']['assets']['getByUrl'](_0x3086fa));}}return _0x4d163f;}['_getMateri'+'alAssetUrl'](_0x5bb734){if(!this['asset'])return null;const _0x3ec365=this['system']['app']['assets']['get'](this['asset']);return _0x3ec365?_0x3ec365['getAbsolut'+'eUrl'](_0x5bb734):null;}['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x3defde,_0x4b0b0c,_0xe8ed43){const _0x2b9cf0=this['system']['app']['assets'];_0x3defde&&(_0x3defde['resource']?(_0x4b0b0c['material']=_0x3defde['resource'],this['_setMateri'+'alEvent'](_0xe8ed43,'remove',_0x3defde['id'],function(){_0x4b0b0c['material']=this['system']['defaultMat'+'erial'];})):(this['_setMateri'+'alEvent'](_0xe8ed43,'load',_0x3defde['id'],function(_0x25f88e){_0x4b0b0c['material']=_0x25f88e['resource'],this['_setMateri'+'alEvent'](_0xe8ed43,'remove',_0x3defde['id'],function(){_0x4b0b0c['material']=this['system']['defaultMat'+'erial'];});}),this['enabled']&&this['entity']['enabled']&&_0x2b9cf0['load'](_0x3defde)));}['onEnable'](){var _0x426208;const _0x121133=this['system']['app'],_0xac94ef=_0x121133['scene'],_0x42bd40=_0xac94ef==null?void(-0x8d0+-0x101a+0x18ea):_0xac94ef['layers'];this['_evtLayers'+'Changed']=_0xac94ef['on']('set:layers',this['onLayersCh'+'anged'],this),_0x42bd40&&(this['_evtLayerA'+'dded']=_0x42bd40['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x42bd40['on']('remove',this['onLayerRem'+'oved'],this));const _0x4e8dcf=this['_type']==='asset';let _0xa9b4ab;if(this['_model']?this['addModelTo'+'Layers']():_0x4e8dcf&&this['_asset']&&(_0xa9b4ab=_0x121133['assets']['get'](this['_asset']),_0xa9b4ab&&_0xa9b4ab['resource']!==this['_model']&&this['_bindModel'+'Asset'](_0xa9b4ab)),this['_materialA'+'sset']&&(_0xa9b4ab=_0x121133['assets']['get'](this['_materialA'+'sset']),_0xa9b4ab&&_0xa9b4ab['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0xa9b4ab)),_0x4e8dcf&&this['_mapping']){for(const _0x410f7b in this['_mapping'])this['_mapping'][_0x410f7b]&&(_0xa9b4ab=this['_getAssetB'+'yIdOrPath'](this['_mapping'][_0x410f7b]),_0xa9b4ab&&!_0xa9b4ab['resource']&&_0x121133['assets']['load'](_0xa9b4ab));}this['_batchGrou'+'pId']>=-0x1*0x6b9+-0xc1+0x77a&&((_0x426208=_0x121133['batcher'])==null||_0x426208['insert'](St['MODEL'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x430052,_0x2de765,_0x2d64e6,_0x13e11e;const _0x37b142=this['system']['app'],_0x5853ec=_0x37b142['scene']['layers'];(_0x430052=this['_evtLayers'+'Changed'])==null||_0x430052['off'](),this['_evtLayers'+'Changed']=null,_0x5853ec&&((_0x2de765=this['_evtLayerA'+'dded'])==null||_0x2de765['off'](),this['_evtLayerA'+'dded']=null,(_0x2d64e6=this['_evtLayerR'+'emoved'])==null||_0x2d64e6['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=-0x400*0x8+-0x2*0x9a3+0x3346&&((_0x13e11e=_0x37b142['batcher'])==null||_0x13e11e['remove'](St['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['hide'](){if(this['_model']){const _0x38ec91=this['_model']['meshInstan'+'ces'];for(let _0x16a4c7=0x211+-0x2228+0x2017,_0x501021=_0x38ec91['length'];_0x16a4c7<_0x501021;_0x16a4c7++)_0x38ec91[_0x16a4c7]['visible']=!(-0xb02+-0x1*0x2225+0x2d28);}}['show'](){if(this['_model']){const _0x317109=this['_model']['meshInstan'+'ces'];for(let _0x18c144=-0xf*0x18d+-0x1d6c+0x34af,_0x459962=_0x317109['length'];_0x18c144<_0x459962;_0x18c144++)_0x317109[_0x18c144]['visible']=!(0x238d+0x2226+-0x45b3);}}['_bindMater'+'ialAsset'](_0x351519){if(_0x351519['on']('load',this['_onMateria'+'lAssetLoad'],this),_0x351519['on']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x351519['on']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x351519['on']('change',this['_onMateria'+'lAssetChan'+'ge'],this),_0x351519['resource'])this['_onMateria'+'lAssetLoad'](_0x351519);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x351519);}}['_unbindMat'+'erialAsset'](_0x45259b){_0x45259b['off']('load',this['_onMateria'+'lAssetLoad'],this),_0x45259b['off']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x45259b['off']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x45259b['off']('change',this['_onMateria'+'lAssetChan'+'ge'],this);}['_onMateria'+'lAssetAdd'](_0x107e42){this['system']['app']['assets']['off']('add:'+_0x107e42['id'],this['_onMateria'+'lAssetAdd'],this),this['_materialA'+'sset']===_0x107e42['id']&&this['_bindMater'+'ialAsset'](_0x107e42);}['_onMateria'+'lAssetLoad'](_0x52a40c){this['_setMateri'+'al'](_0x52a40c['resource']);}['_onMateria'+'lAssetUnlo'+'ad'](_0x12c793){this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}['_onMateria'+'lAssetRemo'+'ve'](_0x343047){this['_onMateria'+'lAssetUnlo'+'ad'](_0x343047);}['_onMateria'+'lAssetChan'+'ge'](_0x2a87a7){}['_bindModel'+'Asset'](_0x2b89e5){if(this['_unbindMod'+'elAsset'](_0x2b89e5),_0x2b89e5['on']('load',this['_onModelAs'+'setLoad'],this),_0x2b89e5['on']('unload',this['_onModelAs'+'setUnload'],this),_0x2b89e5['on']('change',this['_onModelAs'+'setChange'],this),_0x2b89e5['on']('remove',this['_onModelAs'+'setRemove'],this),_0x2b89e5['resource'])this['_onModelAs'+'setLoad'](_0x2b89e5);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x2b89e5);}}['_unbindMod'+'elAsset'](_0x10f4ef){_0x10f4ef['off']('load',this['_onModelAs'+'setLoad'],this),_0x10f4ef['off']('unload',this['_onModelAs'+'setUnload'],this),_0x10f4ef['off']('change',this['_onModelAs'+'setChange'],this),_0x10f4ef['off']('remove',this['_onModelAs'+'setRemove'],this);}['_onModelAs'+'setAdded'](_0x2d4368){this['system']['app']['assets']['off']('add:'+_0x2d4368['id'],this['_onModelAs'+'setAdded'],this),_0x2d4368['id']===this['_asset']&&this['_bindModel'+'Asset'](_0x2d4368);}['_onModelAs'+'setLoad'](_0x201d90){this['model']=_0x201d90['resource']['clone'](),this['_clonedMod'+'el']=!(0xd*0xb9+0x583+0x1a8*-0x9);}['_onModelAs'+'setUnload'](_0x2ea8cb){this['model']=null;}['_onModelAs'+'setChange'](_0x4e87b5,_0x216a11,_0x2c4788,_0x5d4c78){_0x216a11==='data'&&(this['mapping']=this['_mapping']);}['_onModelAs'+'setRemove'](_0x3a206d){this['model']=null;}['_setMateri'+'al'](_0x469f79){if(this['_material']===_0x469f79)return;this['_material']=_0x469f79;const _0x9cd981=this['_model'];if(_0x9cd981&&this['_type']!=='asset'){const _0x16aace=_0x9cd981['meshInstan'+'ces'];for(let _0x439ce4=0x10f*0xb+0x161+-0xd06,_0x162512=_0x16aace['length'];_0x439ce4<_0x162512;_0x439ce4++)_0x16aace[_0x439ce4]['material']=_0x469f79;}}}class YR{constructor(){this['enabled']=!(-0x1*-0x185+0x267f+-0x2804);}}const a0=['enabled'];class KR extends ct{constructor(_0x5142c8){super(_0x5142c8),this['id']='model',this['ComponentT'+'ype']=Tm,this['DataType']=YR,this['schema']=a0,this['defaultMat'+'erial']=Qn(_0x5142c8['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x5d303d,_0x1085ae,_0x55c3c5){_0x55c3c5=['material','materialAs'+'set','asset','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','type','mapping','layers','isStatic','batchGroup'+'Id'],(_0x1085ae['batchGroup'+'Id']===null||_0x1085ae['batchGroup'+'Id']===void(0x1be2+-0x13*0xe5+-0xae3))&&(_0x1085ae['batchGroup'+'Id']=-(0x23ae+0x2*-0x89b+-0x1*0x1277)),_0x1085ae['layers']&&_0x1085ae['layers']['length']&&(_0x1085ae['layers']=_0x1085ae['layers']['slice'](-0x15*0x1bb+0x22ec*-0x1+0x3*0x17c1));for(let _0x169c66=0x1a95+0x5*0x232+0x5*-0x783;_0x169c66<_0x55c3c5['length'];_0x169c66++)_0x1085ae['hasOwnProp'+'erty'](_0x55c3c5[_0x169c66])&&(_0x5d303d[_0x55c3c5[_0x169c66]]=_0x1085ae[_0x55c3c5[_0x169c66]]);_0x1085ae['aabbCenter']&&_0x1085ae['aabbHalfEx'+'tents']&&(_0x5d303d['customAabb']=new De(new D(_0x1085ae['aabbCenter']),new D(_0x1085ae['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x5d303d,_0x1085ae,['enabled']);}['cloneCompo'+'nent'](_0x1a8005,_0x10bc20){const _0x1c309e={'type':_0x1a8005['model']['type'],'asset':_0x1a8005['model']['asset'],'castShadows':_0x1a8005['model']['castShadow'+'s'],'receiveShadows':_0x1a8005['model']['receiveSha'+'dows'],'castShadowsLightmap':_0x1a8005['model']['castShadow'+'sLightmap'],'lightmapped':_0x1a8005['model']['lightmappe'+'d'],'lightmapSizeMultiplier':_0x1a8005['model']['lightmapSi'+'zeMultipli'+'er'],'isStatic':_0x1a8005['model']['isStatic'],'enabled':_0x1a8005['model']['enabled'],'layers':_0x1a8005['model']['layers'],'batchGroupId':_0x1a8005['model']['batchGroup'+'Id'],'mapping':ah({},_0x1a8005['model']['mapping'])};let _0x1a4b73=_0x1a8005['model']['materialAs'+'set'];!(_0x1a4b73 instanceof pe)&&_0x1a4b73!=null&&(_0x1a4b73=this['app']['assets']['get'](_0x1a4b73));const _0x3c17b6=_0x1a8005['model']['material'];(!_0x3c17b6||_0x3c17b6===this['defaultMat'+'erial']||!_0x1a4b73||_0x3c17b6===_0x1a4b73['resource'])&&(_0x1c309e['materialAs'+'set']=_0x1a4b73);const _0x3351ff=this['addCompone'+'nt'](_0x10bc20,_0x1c309e);if(_0x1a8005['model']['model']&&_0x1a8005['model']['type']==='asset'&&!_0x1a8005['model']['asset']&&(_0x3351ff['model']=_0x1a8005['model']['model']['clone'](),_0x3351ff['_clonedMod'+'el']=!(-0x20e+-0xb6+0x2c4)),_0x1c309e['materialAs'+'set']||(_0x3351ff['material']=_0x3c17b6),_0x1a8005['model']['model']){const _0x5da304=_0x1a8005['model']['model']['meshInstan'+'ces'],_0x5dde48=_0x3351ff['model']['meshInstan'+'ces'];for(let _0x4bd04c=-0x12a*0x1a+0x1*0x20f7+0x2b3*-0x1;_0x4bd04c<_0x5da304['length'];_0x4bd04c++)_0x5dde48[_0x4bd04c]['mask']=_0x5da304[_0x4bd04c]['mask'],_0x5dde48[_0x4bd04c]['material']=_0x5da304[_0x4bd04c]['material'],_0x5dde48[_0x4bd04c]['layer']=_0x5da304[_0x4bd04c]['layer'],_0x5dde48[_0x4bd04c]['receiveSha'+'dow']=_0x5da304[_0x4bd04c]['receiveSha'+'dow'];}return _0x1a8005['model']['customAabb']&&(_0x3351ff['customAabb']=_0x1a8005['model']['customAabb']['clone']()),_0x3351ff;}['onRemove'](_0x525513,_0x263ad3){_0x263ad3['onRemove']();}}we['_buildAcce'+'ssors'](Tm['prototype'],a0);const ZR=['emitterExt'+'ents','emitterRad'+'ius','emitterExt'+'entsInner','emitterRad'+'iusInner','loop','initialVel'+'ocity','animSpeed','normalMap','particleNo'+'rmal'],QR=['numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','lighting','halfLamber'+'t','intensity','wrap','wrapBounds','depthWrite','noFog','sort','stretch','alignToMot'+'ion','preWarm','emitterSha'+'pe','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animLoop','colorMap','localSpace','screenSpac'+'e','orientatio'+'n'],JR=['scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','velocityGr'+'aph','velocityGr'+'aph2','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2'],Cc=['colorMapAs'+'set','normalMapA'+'sset','meshAsset','renderAsse'+'t'];let Ya;class e3 extends we{constructor(_0x24700f,_0x3bd238){super(_0x24700f,_0x3bd238),h(this,'_requested'+'Depth',!(-0x957*0x1+-0x5*0x4be+0x1087*0x2)),h(this,'_drawOrder',-0x1*-0x243d+-0x4c0+-0x1f7d),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['on']('set_colorM'+'apAsset',this['onSetColor'+'MapAsset'],this),this['on']('set_normal'+'MapAsset',this['onSetNorma'+'lMapAsset'],this),this['on']('set_meshAs'+'set',this['onSetMeshA'+'sset'],this),this['on']('set_mesh',this['onSetMesh'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_loop',this['onSetLoop'],this),this['on']('set_blendT'+'ype',this['onSetBlend'+'Type'],this),this['on']('set_depthS'+'oftening',this['onSetDepth'+'Softening'],this),this['on']('set_layers',this['onSetLayer'+'s'],this),ZR['forEach'](_0x30ac99=>{this['on']('set_'+_0x30ac99,this['onSetSimpl'+'eProperty'],this);}),QR['forEach'](_0x39776e=>{this['on']('set_'+_0x39776e,this['onSetCompl'+'exProperty'],this);}),JR['forEach'](_0x49a6d3=>{this['on']('set_'+_0x49a6d3,this['onSetGraph'+'Property'],this);}));}get['data'](){const _0x1e3f6a=this['system']['store'][this['entity']['getGuid']()];return _0x1e3f6a?_0x1e3f6a['data']:null;}set['enabled'](_0x4eeb39){this['_setValue']('enabled',_0x4eeb39);}get['enabled'](){return this['data']['enabled'];}set['autoPlay'](_0xdd7cba){this['_setValue']('autoPlay',_0xdd7cba);}get['autoPlay'](){return this['data']['autoPlay'];}set['numParticl'+'es'](_0x2dc068){this['_setValue']('numParticl'+'es',_0x2dc068);}get['numParticl'+'es'](){return this['data']['numParticl'+'es'];}set['lifetime'](_0x519585){this['_setValue']('lifetime',_0x519585);}get['lifetime'](){return this['data']['lifetime'];}set['rate'](_0x104440){this['_setValue']('rate',_0x104440);}get['rate'](){return this['data']['rate'];}set['rate2'](_0x50910c){this['_setValue']('rate2',_0x50910c);}get['rate2'](){return this['data']['rate2'];}set['startAngle'](_0x480944){this['_setValue']('startAngle',_0x480944);}get['startAngle'](){return this['data']['startAngle'];}set['startAngle'+'2'](_0x1e814b){this['_setValue']('startAngle'+'2',_0x1e814b);}get['startAngle'+'2'](){return this['data']['startAngle'+'2'];}set['loop'](_0x435805){this['_setValue']('loop',_0x435805);}get['loop'](){return this['data']['loop'];}set['preWarm'](_0x2936f0){this['_setValue']('preWarm',_0x2936f0);}get['preWarm'](){return this['data']['preWarm'];}set['lighting'](_0x2378d2){this['_setValue']('lighting',_0x2378d2);}get['lighting'](){return this['data']['lighting'];}set['halfLamber'+'t'](_0x265194){this['_setValue']('halfLamber'+'t',_0x265194);}get['halfLamber'+'t'](){return this['data']['halfLamber'+'t'];}set['intensity'](_0x55e14c){this['_setValue']('intensity',_0x55e14c);}get['intensity'](){return this['data']['intensity'];}set['depthWrite'](_0x5ac3a6){this['_setValue']('depthWrite',_0x5ac3a6);}get['depthWrite'](){return this['data']['depthWrite'];}set['noFog'](_0x1b53ed){this['_setValue']('noFog',_0x1b53ed);}get['noFog'](){return this['data']['noFog'];}set['depthSofte'+'ning'](_0x1d4eb8){this['_setValue']('depthSofte'+'ning',_0x1d4eb8);}get['depthSofte'+'ning'](){return this['data']['depthSofte'+'ning'];}set['sort'](_0x4462ec){this['_setValue']('sort',_0x4462ec);}get['sort'](){return this['data']['sort'];}set['blendType'](_0x211e9c){this['_setValue']('blendType',_0x211e9c);}get['blendType'](){return this['data']['blendType'];}set['stretch'](_0x199ece){this['_setValue']('stretch',_0x199ece);}get['stretch'](){return this['data']['stretch'];}set['alignToMot'+'ion'](_0x4174a9){this['_setValue']('alignToMot'+'ion',_0x4174a9);}get['alignToMot'+'ion'](){return this['data']['alignToMot'+'ion'];}set['emitterSha'+'pe'](_0x53292a){this['_setValue']('emitterSha'+'pe',_0x53292a);}get['emitterSha'+'pe'](){return this['data']['emitterSha'+'pe'];}set['emitterExt'+'ents'](_0xc84d43){this['_setValue']('emitterExt'+'ents',_0xc84d43);}get['emitterExt'+'ents'](){return this['data']['emitterExt'+'ents'];}set['emitterExt'+'entsInner'](_0x3337dc){this['_setValue']('emitterExt'+'entsInner',_0x3337dc);}get['emitterExt'+'entsInner'](){return this['data']['emitterExt'+'entsInner'];}set['emitterRad'+'ius'](_0x49f0c5){this['_setValue']('emitterRad'+'ius',_0x49f0c5);}get['emitterRad'+'ius'](){return this['data']['emitterRad'+'ius'];}set['emitterRad'+'iusInner'](_0x4a386e){this['_setValue']('emitterRad'+'iusInner',_0x4a386e);}get['emitterRad'+'iusInner'](){return this['data']['emitterRad'+'iusInner'];}set['initialVel'+'ocity'](_0x27c85b){this['_setValue']('initialVel'+'ocity',_0x27c85b);}get['initialVel'+'ocity'](){return this['data']['initialVel'+'ocity'];}set['wrap'](_0x3cfd40){this['_setValue']('wrap',_0x3cfd40);}get['wrap'](){return this['data']['wrap'];}set['wrapBounds'](_0x3e0936){this['_setValue']('wrapBounds',_0x3e0936);}get['wrapBounds'](){return this['data']['wrapBounds'];}set['localSpace'](_0xa340b4){this['_setValue']('localSpace',_0xa340b4);}get['localSpace'](){return this['data']['localSpace'];}set['screenSpac'+'e'](_0x122098){this['_setValue']('screenSpac'+'e',_0x122098);}get['screenSpac'+'e'](){return this['data']['screenSpac'+'e'];}set['colorMapAs'+'set'](_0x31cb9f){this['_setValue']('colorMapAs'+'set',_0x31cb9f);}get['colorMapAs'+'set'](){return this['data']['colorMapAs'+'set'];}set['normalMapA'+'sset'](_0x4a5d65){this['_setValue']('normalMapA'+'sset',_0x4a5d65);}get['normalMapA'+'sset'](){return this['data']['normalMapA'+'sset'];}set['mesh'](_0xc27742){this['_setValue']('mesh',_0xc27742);}get['mesh'](){return this['data']['mesh'];}set['meshAsset'](_0x24852c){this['_setValue']('meshAsset',_0x24852c);}get['meshAsset'](){return this['data']['meshAsset'];}set['renderAsse'+'t'](_0x436156){this['_setValue']('renderAsse'+'t',_0x436156);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['orientatio'+'n'](_0x3436a7){this['_setValue']('orientatio'+'n',_0x3436a7);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['particleNo'+'rmal'](_0x4c5632){this['_setValue']('particleNo'+'rmal',_0x4c5632);}get['particleNo'+'rmal'](){return this['data']['particleNo'+'rmal'];}set['localVeloc'+'ityGraph'](_0x24215f){this['_setValue']('localVeloc'+'ityGraph',_0x24215f);}get['localVeloc'+'ityGraph'](){return this['data']['localVeloc'+'ityGraph'];}set['localVeloc'+'ityGraph2'](_0xf0aa4b){this['_setValue']('localVeloc'+'ityGraph2',_0xf0aa4b);}get['localVeloc'+'ityGraph2'](){return this['data']['localVeloc'+'ityGraph2'];}set['velocityGr'+'aph'](_0x529ace){this['_setValue']('velocityGr'+'aph',_0x529ace);}get['velocityGr'+'aph'](){return this['data']['velocityGr'+'aph'];}set['velocityGr'+'aph2'](_0x5cb870){this['_setValue']('velocityGr'+'aph2',_0x5cb870);}get['velocityGr'+'aph2'](){return this['data']['velocityGr'+'aph2'];}set['rotationSp'+'eedGraph'](_0x1ac530){this['_setValue']('rotationSp'+'eedGraph',_0x1ac530);}get['rotationSp'+'eedGraph'](){return this['data']['rotationSp'+'eedGraph'];}set['rotationSp'+'eedGraph2'](_0x4e09a2){this['_setValue']('rotationSp'+'eedGraph2',_0x4e09a2);}get['rotationSp'+'eedGraph2'](){return this['data']['rotationSp'+'eedGraph2'];}set['radialSpee'+'dGraph'](_0x2af7fd){this['_setValue']('radialSpee'+'dGraph',_0x2af7fd);}get['radialSpee'+'dGraph'](){return this['data']['radialSpee'+'dGraph'];}set['radialSpee'+'dGraph2'](_0x1052f2){this['_setValue']('radialSpee'+'dGraph2',_0x1052f2);}get['radialSpee'+'dGraph2'](){return this['data']['radialSpee'+'dGraph2'];}set['scaleGraph'](_0x26ee87){this['_setValue']('scaleGraph',_0x26ee87);}get['scaleGraph'](){return this['data']['scaleGraph'];}set['scaleGraph'+'2'](_0x4407f7){this['_setValue']('scaleGraph'+'2',_0x4407f7);}get['scaleGraph'+'2'](){return this['data']['scaleGraph'+'2'];}set['colorGraph'](_0x4a55bc){this['_setValue']('colorGraph',_0x4a55bc);}get['colorGraph'](){return this['data']['colorGraph'];}set['colorGraph'+'2'](_0x2891f8){this['_setValue']('colorGraph'+'2',_0x2891f8);}get['colorGraph'+'2'](){return this['data']['colorGraph'+'2'];}set['alphaGraph'](_0x5eb179){this['_setValue']('alphaGraph',_0x5eb179);}get['alphaGraph'](){return this['data']['alphaGraph'];}set['alphaGraph'+'2'](_0x298899){this['_setValue']('alphaGraph'+'2',_0x298899);}get['alphaGraph'+'2'](){return this['data']['alphaGraph'+'2'];}set['colorMap'](_0x3f9e50){this['_setValue']('colorMap',_0x3f9e50);}get['colorMap'](){return this['data']['colorMap'];}set['normalMap'](_0x477f82){this['_setValue']('normalMap',_0x477f82);}get['normalMap'](){return this['data']['normalMap'];}set['animTilesX'](_0x5ff0d5){this['_setValue']('animTilesX',_0x5ff0d5);}get['animTilesX'](){return this['data']['animTilesX'];}set['animTilesY'](_0xc07554){this['_setValue']('animTilesY',_0xc07554);}get['animTilesY'](){return this['data']['animTilesY'];}set['animStartF'+'rame'](_0x3568c6){this['_setValue']('animStartF'+'rame',_0x3568c6);}get['animStartF'+'rame'](){return this['data']['animStartF'+'rame'];}set['animNumFra'+'mes'](_0x564ef2){this['_setValue']('animNumFra'+'mes',_0x564ef2);}get['animNumFra'+'mes'](){return this['data']['animNumFra'+'mes'];}set['animNumAni'+'mations'](_0x166209){this['_setValue']('animNumAni'+'mations',_0x166209);}get['animNumAni'+'mations'](){return this['data']['animNumAni'+'mations'];}set['animIndex'](_0x4eb160){this['_setValue']('animIndex',_0x4eb160);}get['animIndex'](){return this['data']['animIndex'];}set['randomizeA'+'nimIndex'](_0x101596){this['_setValue']('randomizeA'+'nimIndex',_0x101596);}get['randomizeA'+'nimIndex'](){return this['data']['randomizeA'+'nimIndex'];}set['animSpeed'](_0x396b14){this['_setValue']('animSpeed',_0x396b14);}get['animSpeed'](){return this['data']['animSpeed'];}set['animLoop'](_0x28521){this['_setValue']('animLoop',_0x28521);}get['animLoop'](){return this['data']['animLoop'];}set['layers'](_0x18e578){this['_setValue']('layers',_0x18e578);}get['layers'](){return this['data']['layers'];}set['drawOrder'](_0x58ed5f){this['_drawOrder']=_0x58ed5f,this['emitter']&&(this['emitter']['drawOrder']=_0x58ed5f);}get['drawOrder'](){return this['_drawOrder'];}['_setValue'](_0x1dbb1c,_0x31e2d3){const _0x162d56=this['data'],_0x4a1a48=_0x162d56[_0x1dbb1c];_0x162d56[_0x1dbb1c]=_0x31e2d3,this['fire']('set',_0x1dbb1c,_0x4a1a48,_0x31e2d3);}['addMeshIns'+'tanceToLay'+'ers'](){if(this['emitter'])for(let _0xb2ecd=0x605+0x181f+-0x1e24;_0xb2ecd<this['layers']['length'];_0xb2ecd++){const _0x195239=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0xb2ecd]);_0x195239&&(_0x195239['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]),this['emitter']['_layer']=_0x195239);}}['removeMesh'+'InstanceFr'+'omLayers'](){if(this['emitter'])for(let _0x12a86c=0x1e05+0x1df6+-0x3bfb;_0x12a86c<this['layers']['length'];_0x12a86c++){const _0x4526ed=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x12a86c]);_0x4526ed&&_0x4526ed['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}}['onSetLayer'+'s'](_0x413cee,_0x5b20da,_0x2e021d){if(this['emitter']){for(let _0x66d547=-0x11ea+-0x2*-0x12f4+-0x13fe;_0x66d547<_0x5b20da['length'];_0x66d547++){const _0x189196=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x5b20da[_0x66d547]);_0x189196&&_0x189196['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}if(!(!this['enabled']||!this['entity']['enabled']))for(let _0x557420=-0x15d7+0x927+0xcb0;_0x557420<_0x2e021d['length'];_0x557420++){const _0x3bb11d=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x2e021d[_0x557420]);_0x3bb11d&&_0x3bb11d['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}}}['onLayersCh'+'anged'](_0x1bec58,_0x454e83){this['addMeshIns'+'tanceToLay'+'ers'](),_0x1bec58['off']('add',this['onLayerAdd'+'ed'],this),_0x1bec58['off']('remove',this['onLayerRem'+'oved'],this),_0x454e83['on']('add',this['onLayerAdd'+'ed'],this),_0x454e83['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x5b69b9){!this['emitter']||this['layers']['indexOf'](_0x5b69b9['id'])<0x4c4+0x433*-0x9+-0x1bd*-0x13||_0x5b69b9['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}['onLayerRem'+'oved'](_0x41632e){!this['emitter']||this['layers']['indexOf'](_0x41632e['id'])<0x1ad7+-0x779*0x1+-0x135e||_0x41632e['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}['_bindColor'+'MapAsset'](_0x1a6a92){if(_0x1a6a92['on']('load',this['_onColorMa'+'pAssetLoad'],this),_0x1a6a92['on']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x1a6a92['on']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x1a6a92['on']('change',this['_onColorMa'+'pAssetChan'+'ge'],this),_0x1a6a92['resource'])this['_onColorMa'+'pAssetLoad'](_0x1a6a92);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x1a6a92);}}['_unbindCol'+'orMapAsset'](_0x2e2cfd){_0x2e2cfd['off']('load',this['_onColorMa'+'pAssetLoad'],this),_0x2e2cfd['off']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x2e2cfd['off']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x2e2cfd['off']('change',this['_onColorMa'+'pAssetChan'+'ge'],this);}['_onColorMa'+'pAssetLoad'](_0x19d5fd){this['colorMap']=_0x19d5fd['resource'];}['_onColorMa'+'pAssetUnlo'+'ad'](_0x10af32){this['colorMap']=null;}['_onColorMa'+'pAssetRemo'+'ve'](_0x58099e){this['_onColorMa'+'pAssetUnlo'+'ad'](_0x58099e);}['_onColorMa'+'pAssetChan'+'ge'](_0x4cbccb){}['onSetColor'+'MapAsset'](_0x42b14c,_0x3d628e,_0xd0aaa){const _0x562749=this['system']['app']['assets'];if(_0x3d628e){const _0x155dca=_0x562749['get'](_0x3d628e);_0x155dca&&this['_unbindCol'+'orMapAsset'](_0x155dca);}if(_0xd0aaa){_0xd0aaa instanceof pe&&(this['data']['colorMapAs'+'set']=_0xd0aaa['id'],_0xd0aaa=_0xd0aaa['id']);const _0xbc7ebc=_0x562749['get'](_0xd0aaa);_0xbc7ebc?this['_bindColor'+'MapAsset'](_0xbc7ebc):_0x562749['once']('add:'+_0xd0aaa,_0x30fdd9=>{this['_bindColor'+'MapAsset'](_0x30fdd9);});}else this['colorMap']=null;}['_bindNorma'+'lMapAsset'](_0x13949b){if(_0x13949b['on']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x13949b['on']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x13949b['on']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x13949b['on']('change',this['_onNormalM'+'apAssetCha'+'nge'],this),_0x13949b['resource'])this['_onNormalM'+'apAssetLoa'+'d'](_0x13949b);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x13949b);}}['_unbindNor'+'malMapAsse'+'t'](_0x5c7c3d){_0x5c7c3d['off']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x5c7c3d['off']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x5c7c3d['off']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x5c7c3d['off']('change',this['_onNormalM'+'apAssetCha'+'nge'],this);}['_onNormalM'+'apAssetLoa'+'d'](_0x4422ed){this['normalMap']=_0x4422ed['resource'];}['_onNormalM'+'apAssetUnl'+'oad'](_0x215314){this['normalMap']=null;}['_onNormalM'+'apAssetRem'+'ove'](_0x25d86b){this['_onNormalM'+'apAssetUnl'+'oad'](_0x25d86b);}['_onNormalM'+'apAssetCha'+'nge'](_0x338e4d){}['onSetNorma'+'lMapAsset'](_0x54cc1c,_0x36d84e,_0x55ecf6){const _0x4e94db=this['system']['app']['assets'];if(_0x36d84e){const _0x249b43=_0x4e94db['get'](_0x36d84e);_0x249b43&&this['_unbindNor'+'malMapAsse'+'t'](_0x249b43);}if(_0x55ecf6){_0x55ecf6 instanceof pe&&(this['data']['normalMapA'+'sset']=_0x55ecf6['id'],_0x55ecf6=_0x55ecf6['id']);const _0x17d43e=_0x4e94db['get'](_0x55ecf6);_0x17d43e?this['_bindNorma'+'lMapAsset'](_0x17d43e):_0x4e94db['once']('add:'+_0x55ecf6,_0x12215b=>{this['_bindNorma'+'lMapAsset'](_0x12215b);});}else this['normalMap']=null;}['_bindMeshA'+'sset'](_0x541b67){if(_0x541b67['on']('load',this['_onMeshAss'+'etLoad'],this),_0x541b67['on']('unload',this['_onMeshAss'+'etUnload'],this),_0x541b67['on']('remove',this['_onMeshAss'+'etRemove'],this),_0x541b67['on']('change',this['_onMeshAss'+'etChange'],this),_0x541b67['resource'])this['_onMeshAss'+'etLoad'](_0x541b67);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x541b67);}}['_unbindMes'+'hAsset'](_0x32f21a){_0x32f21a['off']('load',this['_onMeshAss'+'etLoad'],this),_0x32f21a['off']('unload',this['_onMeshAss'+'etUnload'],this),_0x32f21a['off']('remove',this['_onMeshAss'+'etRemove'],this),_0x32f21a['off']('change',this['_onMeshAss'+'etChange'],this);}['_onMeshAss'+'etLoad'](_0x21b5e5){this['_onMeshCha'+'nged'](_0x21b5e5['resource']);}['_onMeshAss'+'etUnload'](_0x2c57c6){this['mesh']=null;}['_onMeshAss'+'etRemove'](_0x43183b){this['_onMeshAss'+'etUnload'](_0x43183b);}['_onMeshAss'+'etChange'](_0x149d79){}['onSetMeshA'+'sset'](_0x5bb453,_0x3fd160,_0x430d9b){const _0xd24228=this['system']['app']['assets'];if(_0x3fd160){const _0x26f26a=_0xd24228['get'](_0x3fd160);_0x26f26a&&this['_unbindMes'+'hAsset'](_0x26f26a);}if(_0x430d9b){_0x430d9b instanceof pe&&(this['data']['meshAsset']=_0x430d9b['id'],_0x430d9b=_0x430d9b['id']);const _0x2fe698=_0xd24228['get'](_0x430d9b);_0x2fe698&&this['_bindMeshA'+'sset'](_0x2fe698);}else this['_onMeshCha'+'nged'](null);}['onSetMesh'](_0x54f5e6,_0x225fda,_0x478c34){!_0x478c34||_0x478c34 instanceof pe||typeof _0x478c34=='number'?this['meshAsset']=_0x478c34:this['_onMeshCha'+'nged'](_0x478c34);}['_onMeshCha'+'nged'](_0x9f972c){_0x9f972c&&!(_0x9f972c instanceof Ge)&&(_0x9f972c['meshInstan'+'ces'][0x1*0x2bd+-0x875+0x5b8]?_0x9f972c=_0x9f972c['meshInstan'+'ces'][0x43*0x9+-0xa37+0x7dc]['mesh']:_0x9f972c=null),this['data']['mesh']=_0x9f972c,this['emitter']&&(this['emitter']['mesh']=_0x9f972c,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['onSetRende'+'rAsset'](_0x2b6ebb,_0x3f8442,_0x3d705f){const _0x212da6=this['system']['app']['assets'];if(_0x3f8442){const _0x26f06c=_0x212da6['get'](_0x3f8442);_0x26f06c&&this['_unbindRen'+'derAsset'](_0x26f06c);}if(_0x3d705f){_0x3d705f instanceof pe&&(this['data']['renderAsse'+'t']=_0x3d705f['id'],_0x3d705f=_0x3d705f['id']);const _0x1186e7=_0x212da6['get'](_0x3d705f);_0x1186e7&&this['_bindRende'+'rAsset'](_0x1186e7);}else this['_onRenderC'+'hanged'](null);}['_bindRende'+'rAsset'](_0x574134){if(_0x574134['on']('load',this['_onRenderA'+'ssetLoad'],this),_0x574134['on']('unload',this['_onRenderA'+'ssetUnload'],this),_0x574134['on']('remove',this['_onRenderA'+'ssetRemove'],this),_0x574134['resource'])this['_onRenderA'+'ssetLoad'](_0x574134);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x574134);}}['_unbindRen'+'derAsset'](_0x1f0908){var _0x53ba04;_0x1f0908['off']('load',this['_onRenderA'+'ssetLoad'],this),_0x1f0908['off']('unload',this['_onRenderA'+'ssetUnload'],this),_0x1f0908['off']('remove',this['_onRenderA'+'ssetRemove'],this),(_0x53ba04=this['_evtSetMes'+'hes'])==null||_0x53ba04['off'](),this['_evtSetMes'+'hes']=null;}['_onRenderA'+'ssetLoad'](_0x270dcc){this['_onRenderC'+'hanged'](_0x270dcc['resource']);}['_onRenderA'+'ssetUnload'](_0x1d598f){this['_onRenderC'+'hanged'](null);}['_onRenderA'+'ssetRemove'](_0x572640){this['_onRenderA'+'ssetUnload'](_0x572640);}['_onRenderC'+'hanged'](_0x17e33e){var _0x1fcb9a;if(!_0x17e33e){this['_onMeshCha'+'nged'](null);return;}(_0x1fcb9a=this['_evtSetMes'+'hes'])==null||_0x1fcb9a['off'](),this['_evtSetMes'+'hes']=_0x17e33e['on']('set:meshes',this['_onRenderS'+'etMeshes'],this),_0x17e33e['meshes']&&this['_onRenderS'+'etMeshes'](_0x17e33e['meshes']);}['_onRenderS'+'etMeshes'](_0x2e67e7){this['_onMeshCha'+'nged'](_0x2e67e7&&_0x2e67e7[-0xa*-0x283+0x4d5*-0x3+0xa9f*-0x1]);}['onSetLoop'](_0x3af0c5,_0x3bace1,_0x46e409){this['emitter']&&(this['emitter'][_0x3af0c5]=_0x46e409,this['emitter']['resetTime']());}['onSetBlend'+'Type'](_0x2ae62c,_0x2f688a,_0x3a57c6){this['emitter']&&(this['emitter'][_0x2ae62c]=_0x3a57c6,this['emitter']['material']['blendType']=_0x3a57c6,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['_requestDe'+'pth'](){this['_requested'+'Depth']||(Ya||(Ya=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](ps)),Ya&&(Ya['incrementC'+'ounter'](),this['_requested'+'Depth']=!(0x59c*-0x1+-0x90e+0xeaa)));}['_releaseDe'+'pth'](){this['_requested'+'Depth']&&Ya&&(Ya['decrementC'+'ounter'](),this['_requested'+'Depth']=!(0x2690+-0x3b0+-0x22df));}['onSetDepth'+'Softening'](_0x5e0e62,_0xabc54,_0x35de08){_0xabc54!==_0x35de08&&(_0x35de08?(this['enabled']&&this['entity']['enabled']&&this['_requestDe'+'pth'](),this['emitter']&&(this['emitter'][_0x5e0e62]=_0x35de08)):(this['enabled']&&this['entity']['enabled']&&this['_releaseDe'+'pth'](),this['emitter']&&(this['emitter'][_0x5e0e62]=_0x35de08)),this['emitter']&&(this['reset'](),this['emitter']['resetMater'+'ial'](),this['rebuild']()));}['onSetSimpl'+'eProperty'](_0x4c620,_0x2507f5,_0x5d70be){this['emitter']&&(this['emitter'][_0x4c620]=_0x5d70be,this['emitter']['resetMater'+'ial']());}['onSetCompl'+'exProperty'](_0x581e9a,_0x5dd223,_0x243d9b){this['emitter']&&(this['emitter'][_0x581e9a]=_0x243d9b,this['emitter']['resetMater'+'ial'](),this['rebuild'](),this['reset']());}['onSetGraph'+'Property'](_0x20def6,_0x32665b,_0x34a0f4){this['emitter']&&(this['emitter'][_0x20def6]=_0x34a0f4,this['emitter']['rebuildGra'+'phs'](),this['emitter']['resetMater'+'ial']());}['onEnable'](){const _0x1b5452=this['system']['app']['scene'],_0x42ac6e=_0x1b5452['layers'],_0x32e9e5=this['data'];for(let _0x3330db=0x8f*0x38+0x17*0xe4+-0x33c4,_0x39fe32=Cc['length'];_0x3330db<_0x39fe32;_0x3330db++){let _0x310fa6=_0x32e9e5[Cc[_0x3330db]];if(_0x310fa6){if(!(_0x310fa6 instanceof pe)){if(parseInt(_0x310fa6,0x18c4+-0x22c8+0xa0e)>=-0x4*0x35a+-0x1*0x1c36+0x299e)_0x310fa6=this['system']['app']['assets']['get'](_0x310fa6);else continue;}_0x310fa6&&!_0x310fa6['resource']&&this['system']['app']['assets']['load'](_0x310fa6);}}if(!this['system']['app']['graphicsDe'+'vice']['disablePar'+'ticleSyste'+'m']){if(!this['emitter']){let _0x1d22e6=_0x32e9e5['mesh'];_0x1d22e6 instanceof Ge||(_0x1d22e6=null),this['emitter']=new CA(this['system']['app']['graphicsDe'+'vice'],{'numParticles':_0x32e9e5['numParticl'+'es'],'emitterExtents':_0x32e9e5['emitterExt'+'ents'],'emitterExtentsInner':_0x32e9e5['emitterExt'+'entsInner'],'emitterRadius':_0x32e9e5['emitterRad'+'ius'],'emitterRadiusInner':_0x32e9e5['emitterRad'+'iusInner'],'emitterShape':_0x32e9e5['emitterSha'+'pe'],'initialVelocity':_0x32e9e5['initialVel'+'ocity'],'wrap':_0x32e9e5['wrap'],'localSpace':_0x32e9e5['localSpace'],'screenSpace':_0x32e9e5['screenSpac'+'e'],'wrapBounds':_0x32e9e5['wrapBounds'],'lifetime':_0x32e9e5['lifetime'],'rate':_0x32e9e5['rate'],'rate2':_0x32e9e5['rate2'],'orientation':_0x32e9e5['orientatio'+'n'],'particleNormal':_0x32e9e5['particleNo'+'rmal'],'animTilesX':_0x32e9e5['animTilesX'],'animTilesY':_0x32e9e5['animTilesY'],'animStartFrame':_0x32e9e5['animStartF'+'rame'],'animNumFrames':_0x32e9e5['animNumFra'+'mes'],'animNumAnimations':_0x32e9e5['animNumAni'+'mations'],'animIndex':_0x32e9e5['animIndex'],'randomizeAnimIndex':_0x32e9e5['randomizeA'+'nimIndex'],'animSpeed':_0x32e9e5['animSpeed'],'animLoop':_0x32e9e5['animLoop'],'startAngle':_0x32e9e5['startAngle'],'startAngle2':_0x32e9e5['startAngle'+'2'],'scaleGraph':_0x32e9e5['scaleGraph'],'scaleGraph2':_0x32e9e5['scaleGraph'+'2'],'colorGraph':_0x32e9e5['colorGraph'],'colorGraph2':_0x32e9e5['colorGraph'+'2'],'alphaGraph':_0x32e9e5['alphaGraph'],'alphaGraph2':_0x32e9e5['alphaGraph'+'2'],'localVelocityGraph':_0x32e9e5['localVeloc'+'ityGraph'],'localVelocityGraph2':_0x32e9e5['localVeloc'+'ityGraph2'],'velocityGraph':_0x32e9e5['velocityGr'+'aph'],'velocityGraph2':_0x32e9e5['velocityGr'+'aph2'],'rotationSpeedGraph':_0x32e9e5['rotationSp'+'eedGraph'],'rotationSpeedGraph2':_0x32e9e5['rotationSp'+'eedGraph2'],'radialSpeedGraph':_0x32e9e5['radialSpee'+'dGraph'],'radialSpeedGraph2':_0x32e9e5['radialSpee'+'dGraph2'],'colorMap':_0x32e9e5['colorMap'],'normalMap':_0x32e9e5['normalMap'],'loop':_0x32e9e5['loop'],'preWarm':_0x32e9e5['preWarm'],'sort':_0x32e9e5['sort'],'stretch':_0x32e9e5['stretch'],'alignToMotion':_0x32e9e5['alignToMot'+'ion'],'lighting':_0x32e9e5['lighting'],'halfLambert':_0x32e9e5['halfLamber'+'t'],'intensity':_0x32e9e5['intensity'],'depthSoftening':_0x32e9e5['depthSofte'+'ning'],'scene':this['system']['app']['scene'],'mesh':_0x1d22e6,'depthWrite':_0x32e9e5['depthWrite'],'noFog':_0x32e9e5['noFog'],'node':this['entity'],'blendType':_0x32e9e5['blendType']}),this['emitter']['meshInstan'+'ce']['node']=this['entity'],this['emitter']['drawOrder']=this['drawOrder'],_0x32e9e5['autoPlay']||(this['pause'](),this['emitter']['meshInstan'+'ce']['visible']=!(-0x6e5+0x12fd+-0xc17));}this['emitter']['colorMap']&&this['addMeshIns'+'tanceToLay'+'ers'](),this['_evtLayers'+'Changed']=_0x1b5452['on']('set:layers',this['onLayersCh'+'anged'],this),_0x42ac6e&&(this['_evtLayerA'+'dded']=_0x42ac6e['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x42ac6e['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&_0x32e9e5['depthSofte'+'ning']&&this['_requestDe'+'pth']();}}['onDisable'](){var _0x1cfc23,_0x4cb15d,_0x2e4662;const _0x162720=this['system']['app']['scene']['layers'];(_0x1cfc23=this['_evtLayers'+'Changed'])==null||_0x1cfc23['off'](),this['_evtLayers'+'Changed']=null,_0x162720&&((_0x4cb15d=this['_evtLayerA'+'dded'])==null||_0x4cb15d['off'](),this['_evtLayerA'+'dded']=null,(_0x2e4662=this['_evtLayerR'+'emoved'])==null||_0x2e4662['off'](),this['_evtLayerR'+'emoved']=null),this['emitter']&&(this['removeMesh'+'InstanceFr'+'omLayers'](),this['data']['depthSofte'+'ning']&&this['_releaseDe'+'pth'](),this['emitter']['camera']=null);}['onBeforeRe'+'move'](){this['enabled']&&(this['enabled']=!(0x99*0xb+-0x2*-0x1273+-0x2b78)),this['emitter']&&(this['emitter']['destroy'](),this['emitter']=null);for(let _0x360d73=0x16f7+0x1ed2+0x1*-0x35c9;_0x360d73<Cc['length'];_0x360d73++){const _0x1845ee=Cc[_0x360d73];this['data'][_0x1845ee]&&(this[_0x1845ee]=null);}this['off']();}['reset'](){this['emitter']&&this['emitter']['reset']();}['stop'](){this['emitter']&&(this['emitter']['loop']=!(0xf43*0x1+-0x13*0xdf+-0x14b*-0x1),this['emitter']['resetTime'](),this['emitter']['addTime'](0x7*0x516+-0x17*-0xb+-0x2497,!(-0x24a8+0xca9+0x17ff)));}['pause'](){this['data']['paused']=!(0x4*-0x536+-0x8f1+0x1dc9);}['unpause'](){this['data']['paused']=!(0x353+-0x2239*-0x1+-0x258b);}['play'](){this['data']['paused']=!(0x59*-0x6b+0x12*-0x1eb+0x47ba),this['emitter']&&(this['emitter']['meshInstan'+'ce']['visible']=!(0x1d08+-0x3c*-0x4f+-0x2f8c),this['emitter']['loop']=this['data']['loop'],this['emitter']['resetTime']());}['isPlaying'](){return this['data']['paused']?!(0x1ded+0x1e00+0x5*-0xbfc):this['emitter']&&this['emitter']['loop']?!(0x24a0+-0x2173+-0x32d*0x1):Date['now']()<=this['emitter']['endTime'];}['setInTools'](){const {emitter:_0x6ac4c2}=this;_0x6ac4c2&&!_0x6ac4c2['inTools']&&(_0x6ac4c2['inTools']=!(0x105c+0x10f8+0x1da*-0x12),this['rebuild']());}['rebuild'](){const _0x4e2a6b=this['enabled'];this['enabled']=!(-0x3*-0x79+0x1a00+-0x1b6a),this['emitter']&&this['emitter']['rebuild'](),this['enabled']=_0x4e2a6b;}}class t3{constructor(){this['numParticl'+'es']=0x7*-0x6d+0x9*-0x2c3+0x1bd7,this['rate']=-0x653*0x4+-0x19a1+0x32ee,this['rate2']=null,this['startAngle']=0xf83+-0xbc4+0x3bf*-0x1,this['startAngle'+'2']=null,this['lifetime']=-0x189c+0x5a1+0x132d*0x1,this['emitterExt'+'ents']=new D(),this['emitterExt'+'entsInner']=new D(),this['emitterRad'+'ius']=-0x477+0x73f+0x8*-0x59,this['emitterRad'+'iusInner']=0x2*0x50b+-0x88f+-0x187,this['emitterSha'+'pe']=ai,this['initialVel'+'ocity']=-0x4b*-0x2a+0x1b1*-0x9+0x2eb*0x1,this['wrap']=!(0x1d0d+-0x14c*-0x2+-0x4*0x7e9),this['wrapBounds']=new D(),this['localSpace']=!(-0x1c87*-0x1+-0x8b1*-0x4+-0x3f4a*0x1),this['screenSpac'+'e']=!(-0x397*-0x1+0x132c+0xb61*-0x2),this['colorMap']=null,this['colorMapAs'+'set']=null,this['normalMap']=null,this['normalMapA'+'sset']=null,this['loop']=!(-0x2*0xd0f+-0x1f3*0xd+-0x1*-0x3375),this['preWarm']=!(0x29c+-0x4b3*0x8+0x22fd),this['sort']=-0x5f*-0x26+-0xac6+-0xc*0x47,this['mode']=rv,this['scene']=null,this['lighting']=!(0x1ef8+-0x1baf+-0x18*0x23),this['halfLamber'+'t']=!(-0x14f*-0xd+-0x124a+0x148),this['intensity']=0xb2*-0x3+0x1*0x1849+-0x1632,this['stretch']=-0x1*-0x2c2+0x1f5*0xe+-0x1e28,this['alignToMot'+'ion']=!(0xc0b*0x3+-0x10b1+-0x1*0x136f),this['depthSofte'+'ning']=-0x170e+-0x2*0xfdf+0x36cc,this['renderAsse'+'t']=null,this['meshAsset']=null,this['mesh']=null,this['depthWrite']=!(0x1e*0xb+-0x330+0x1e7),this['noFog']=!(0x7aa+-0x1*0x2c7+0x5*-0xfa),this['orientatio'+'n']=yh,this['particleNo'+'rmal']=new D(0x7*0x4b7+0x1a5f+-0x3b60,0x2073+-0x2*0x402+-0x2*0xc37,-0xd1*-0x5+0xb*-0x15e+0xa5*0x11),this['animTilesX']=0x10f1*-0x1+-0x3*-0x87c+0xb*-0xc6,this['animTilesY']=0x1ec7+0x1*-0x1bc7+-0x2ff,this['animStartF'+'rame']=-0x8a1*-0x4+-0x1adf+0x7a5*-0x1,this['animNumFra'+'mes']=-0x58a+-0x20c7+0x2652,this['animNumAni'+'mations']=0x1*0x24a3+0x20c8+0x5*-0xde2,this['animIndex']=-0x346*0x7+0x4be*-0x7+0x1b*0x214,this['randomizeA'+'nimIndex']=!(0x1872+0xb*-0x12b+-0xb98),this['animSpeed']=0xc03*-0x1+-0x1*0xd0e+0x1912,this['animLoop']=!(0x22d8+-0x3*0x3d6+0x2*-0xbab),this['scaleGraph']=null,this['scaleGraph'+'2']=null,this['colorGraph']=null,this['colorGraph'+'2']=null,this['alphaGraph']=null,this['alphaGraph'+'2']=null,this['localVeloc'+'ityGraph']=null,this['localVeloc'+'ityGraph2']=null,this['velocityGr'+'aph']=null,this['velocityGr'+'aph2']=null,this['rotationSp'+'eedGraph']=null,this['rotationSp'+'eedGraph2']=null,this['radialSpee'+'dGraph']=null,this['radialSpee'+'dGraph2']=null,this['blendType']=Zs,this['enabled']=!(0x783+0x1ec+0x45*-0x23),this['paused']=!(-0x1847*0x1+0x2dc+0x156c),this['autoPlay']=!(0x8f*0x19+-0x18e6+0xaef),this['layers']=[er];}}const s3='\x0avarying\x20v'+'ec4\x20texCoo'+'rdsAlphaLi'+'fe;\x0a\x0aunifo'+'rm\x20sampler'+'2D\x20colorMa'+'p;\x0auniform'+'\x20sampler2D'+'\x20colorPara'+'m;\x0auniform'+'\x20float\x20gra'+'phSampleSi'+'ze;\x0aunifor'+'m\x20float\x20gr'+'aphNumSamp'+'les;\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0auniform\x20'+'float\x20soft'+'ening;\x0auni'+'form\x20float'+'\x20colorMult'+';\x0a\x0afloat\x20s'+'aturate(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex\x20\x20=\x20tex'+'ture2D(col'+'orMap,\x20vec'+'2(texCoord'+'sAlphaLife'+'.x,\x201.0\x20-\x20'+'texCoordsA'+'lphaLife.y'+'));\x0a\x20\x20\x20\x20ve'+'c4\x20ramp\x20=\x20'+'texture2D('+'colorParam'+',\x20vec2(tex'+'CoordsAlph'+'aLife.w,\x200'+'.0));\x0a\x20\x20\x20\x20'+'ramp.rgb\x20*'+'=\x20colorMul'+'t;\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20+=\x20te'+'xCoordsAlp'+'haLife.z;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'rgb\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'float\x20a\x20\x20='+'\x20tex.a\x20*\x20r'+'amp.a;\x0a',i3='\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0af'+'loat\x20satur'+'ate(float\x20'+'x)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p(x,\x200.0,\x20'+'1.0);\x0a}\x0a\x0av'+'ec4\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(\x20texture2'+'D(tex,tc),'+'\x20texture2D'+'(tex,tc\x20+\x20'+'graphSampl'+'eSize),\x20fr'+'act(tc.x*g'+'raphNumSam'+'ples)\x20);\x0a}'+'\x0a\x0avec4\x20tex'+'1Dlod_lerp'+'(TEXTURE_A'+'CCEPT_HIGH'+'P(tex),\x20ve'+'c2\x20tc,\x20out'+'\x20vec3\x20w)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'a\x20=\x20textur'+'e2D(tex,tc'+');\x0a\x20\x20\x20\x20vec'+'4\x20b\x20=\x20text'+'ure2D(tex,'+'tc\x20+\x20graph'+'SampleSize'+');\x0a\x20\x20\x20\x20flo'+'at\x20c\x20=\x20fra'+'ct(tc.x*gr'+'aphNumSamp'+'les);\x0a\x0a\x20\x20\x20'+'\x20vec3\x20unpa'+'ckedA\x20=\x20un'+'pack3NFloa'+'ts(a.w);\x0a\x20'+'\x20\x20\x20vec3\x20un'+'packedB\x20=\x20'+'unpack3NFl'+'oats(b.w);'+'\x0a\x20\x20\x20\x20w\x20=\x20m'+'ix(unpacke'+'dA,\x20unpack'+'edB,\x20c);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20mix(a,\x20b,'+'\x20c);\x0a}\x0a\x0ave'+'c2\x20rotate('+'vec2\x20quadX'+'Y,\x20float\x20p'+'Rotation,\x20'+'out\x20mat2\x20r'+'otMatrix)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20cos('+'pRotation)'+';\x0a\x20\x20\x20\x20floa'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x0a\x20\x20\x20\x20mat'+'2\x20m\x20=\x20mat2'+'(c,\x20-s,\x20s,'+'\x20c);\x0a\x20\x20\x20\x20r'+'otMatrix\x20='+'\x20m;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20m\x20*\x20'+'quadXY;\x0a}\x0a'+'\x0avec3\x20bill'+'board(vec3'+'\x20InstanceC'+'oords,\x20vec'+'2\x20quadXY)\x20'+'{\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREEN_'+('SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'os\x20=\x20vec3('+'-1,\x200,\x200)\x20'+'*\x20quadXY.x'+'\x20+\x20vec3(0,'+'\x20-1,\x200)\x20*\x20'+'quadXY.y;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20pos;\x0a}\x0a\x0av'+'ec3\x20custom'+'Face(vec3\x20'+'InstanceCo'+'ords,\x20vec2'+'\x20quadXY)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'pos\x20=\x20face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20faceBinor'+'m\x20*\x20quadXY'+'.y;\x0a\x20\x20\x20\x20re'+'turn\x20pos;\x0a'+'}\x0a\x0avec2\x20sa'+'feNormaliz'+'e(vec2\x20v)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20l\x20=\x20leng'+'th(v);\x0a\x20\x20\x20'+'\x20return\x20(l'+'\x20>\x201e-06)\x20'+'?\x20v\x20/\x20l\x20:\x20'+'v;\x0a}\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20meshLoc'+'alPos\x20=\x20pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20flo'+'at\x20id\x20=\x20fl'+'oor(partic'+'le_vertexD'+'ata.w);\x0a\x0a\x20'+'\x20\x20\x20float\x20r'+'ndFactor\x20='+'\x20fract(sin'+'(id\x20+\x201.0\x20'+'+\x20seed));\x0a'+'\x20\x20\x20\x20vec3\x20r'+'ndFactor3\x20'+'=\x20vec3(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20float\x20uv\x20'+'=\x20id\x20/\x20num'+'ParticlesP'+'ot;\x0a\x20\x20\x20\x20re'+'adInput(uv'+');\x0a\x0a#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20inV'+'el\x20=\x20mat3('+'matrix_mod'+'el)\x20*\x20inVe'+'l;\x0a#endif\x0a'+'\x20\x20\x20\x20vec2\x20v'+'elocityV\x20='+'\x20safeNorma'+'lize((mat3'+'(matrix_vi'+'ew)\x20*\x20inVe'+'l).xy);\x20//'+'\x20should\x20be'+'\x20removed\x20b'+'y\x20compiler'+'\x20if\x20align/'+'stretch\x20is'+'\x20not\x20used\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20particleL'+'ifetime\x20=\x20'+'lifetime;\x0a'+'\x0a\x20\x20\x20\x20if\x20(i')+('nLife\x20<=\x200'+'.0\x20||\x20inLi'+'fe\x20>\x20parti'+'cleLifetim'+'e\x20||\x20!inSh'+'ow)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20meshLoca'+'lPos\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20vec2\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20nlife\x20='+'\x20clamp(inL'+'ife\x20/\x20part'+'icleLifeti'+'me,\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20param'+'Div;\x0a\x20\x20\x20\x20v'+'ec4\x20params'+'\x20=\x20tex1Dlo'+'d_lerp(TEX'+'TURE_PASS('+'internalTe'+'x2),\x20vec2('+'nlife,\x200),'+'\x20paramDiv)'+';\x0a\x20\x20\x20\x20floa'+'t\x20scale\x20=\x20'+'params.y;\x0a'+'\x20\x20\x20\x20float\x20'+'scaleDiv\x20='+'\x20paramDiv.'+'x;\x0a\x20\x20\x20\x20flo'+'at\x20alphaDi'+'v\x20=\x20paramD'+'iv.z;\x0a\x0a\x20\x20\x20'+'\x20scale\x20+=\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20scale'+'DivMult\x20*\x20'+'fract(rndF'+'actor*1000'+'0.0);\x0a\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(quadXY'+'\x20*\x20-0.5\x20+\x20'+'0.5,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'alphaDivMu'+'lt\x20*\x20fract'+'(rndFactor'+'*1000.0),\x20'+'nlife);\x0a#e'+'lse\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(partic'+'le_uv,\x20(al'+'phaDiv\x20*\x202'+'.0\x20-\x201.0)\x20'+'*\x20alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePos\x20='+'\x20inPos;\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePosMo'+'ved\x20=\x20vec3'+'(0.0);\x0a\x0a\x20\x20'+'\x20\x20mat2\x20rot'+'Matrix;\x0a'),r3='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20min(flo'+'or(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y)\x20+\x20animT'+'exParams.x'+',\x20animTexP'+'arams.z);\x0a',a3='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20floor(m'+'od(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y\x20+\x20animTe'+'xParams.x,'+'\x20animTexPa'+'rams.z\x20+\x201'+'.0));\x0a',n3='\x0a\x20\x20\x20\x20float'+'\x20animation'+'Index;\x0a\x0a\x20\x20'+'\x20\x20if\x20(anim'+'TexIndexPa'+'rams.y\x20==\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20anima'+'tionIndex\x20'+'=\x20floor((a'+'nimTexPara'+'ms.w\x20+\x201.0'+')\x20*\x20rndFac'+'tor3.z)\x20*\x20'+'(animTexPa'+'rams.z\x20+\x201'+'.0);\x0a\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20animTex'+'IndexParam'+'s.x\x20*\x20(ani'+'mTexParams'+'.z\x20+\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20float\x20at'+'lasX\x20=\x20(an'+'imationInd'+'ex\x20+\x20animF'+'rame)\x20*\x20an'+'imTexTiles'+'Params.x;\x0a'+'\x20\x20\x20\x20float\x20'+'atlasY\x20=\x201'+'.0\x20-\x20floor'+'(atlasX\x20+\x20'+'1.0)\x20*\x20ani'+'mTexTilesP'+'arams.y;\x0a\x20'+'\x20\x20\x20atlasX\x20'+'=\x20fract(at'+'lasX);\x0a\x0a\x20\x20'+'\x20\x20texCoord'+'sAlphaLife'+'.xy\x20*=\x20ani'+'mTexTilesP'+'arams.xy;\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe.xy\x20+=\x20v'+'ec2(atlasX'+',\x20atlasY);'+'\x0a',o3='\x0avoid\x20read'+'Input(floa'+'t\x20uv)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'\x20=\x20texture'+'2D(particl'+'eTexIN,\x20ve'+'c2(uv,\x200.2'+'5));\x0a\x20\x20\x20\x20v'+'ec4\x20tex2\x20='+'\x20texture2D'+'(particleT'+'exIN,\x20vec2'+'(uv,\x200.75)'+');\x0a\x0a\x20\x20\x20\x20in'+'Pos\x20=\x20tex.'+'xyz;\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inAngle\x20='+'\x20(tex.w\x20<\x20'+'0.0?\x20-tex.'+'w\x20:\x20tex.w)'+'\x20-\x201000.0;'+'\x0a\x20\x20\x20\x20inSho'+'w\x20=\x20tex.w\x20'+'>=\x200.0;\x0a\x20\x20'+'\x20\x20inLife\x20='+'\x20tex2.w;\x0a}'+'\x0a',l3='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0a#'+'define\x20PI2'+'\x206.2831853'+'07179586\x0a\x0a'+'uniform\x20ve'+'c3\x20inBound'+'sSize;\x0auni'+'form\x20vec3\x20'+'inBoundsCe'+'nter;\x0a\x0auni'+'form\x20float'+'\x20maxVel;\x0a\x0a'+'float\x20deco'+'deFloatRG('+'vec2\x20rg)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20rg.y\x20*\x20('+'1.0\x20/\x20255.'+'0)\x20+\x20rg.x;'+'\x0a}\x0a\x0afloat\x20'+'decodeFloa'+'tRGBA(\x20vec'+'4\x20rgba\x20)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20dot(rgba'+',\x20vec4(1.0'+',\x201.0\x20/\x2025'+'5.0,\x201.0\x20/'+'\x2065025.0,\x20'+'1.0\x20/\x201605'+'81375.0));'+'\x0a}\x0a\x0avoid\x20r'+'eadInput(f'+'loat\x20uv)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex0\x20=\x20tex'+'ture2D(par'+'ticleTexIN'+',\x20vec2(uv,'+'\x200.125));\x0a'+'\x20\x20\x20\x20vec4\x20t'+'ex1\x20=\x20text'+'ure2D(part'+'icleTexIN,'+'\x20vec2(uv,\x20'+'0.375));\x0a\x20'+'\x20\x20\x20vec4\x20te'+'x2\x20=\x20textu'+'re2D(parti'+'cleTexIN,\x20'+'vec2(uv,\x200'+'.625));\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'3\x20=\x20textur'+'e2D(partic'+'leTexIN,\x20v'+'ec2(uv,\x200.'+'875));\x0a\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'vec3(decod'+'eFloatRG(t'+'ex0.rg),\x20d'+'ecodeFloat'+'RG(tex0.ba'+'),\x20decodeF'+'loatRG(tex'+'1.rg));\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'(inPos\x20-\x20v'+'ec3(0.5))\x20'+'*\x20inBounds'+'Size\x20+\x20inB'+'oundsCente'+'r;\x0a\x0a\x20\x20\x20\x20in'+'Vel\x20=\x20tex2'+'.xyz;\x0a\x20\x20\x20\x20'+'inVel\x20=\x20(i'+'nVel\x20-\x20vec'+'3(0.5))\x20*\x20'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20float\x20max'+'NegLife\x20=\x20'+'max(lifeti'+'me,\x20(numPa'+('rticles\x20-\x20'+'1.0)\x20*\x20(ra'+'te+rateDiv'+'));\x0a\x20\x20\x20\x20fl'+'oat\x20maxPos'+'Life\x20=\x20lif'+'etime+1.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20inLife'+'\x20*\x20(maxNeg'+'Life\x20+\x20max'+'PosLife)\x20-'+'\x20maxNegLif'+'e;\x0a}\x0a'),c3='\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'gl_FragCoo'+'rd.y<1.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'outPos,\x20(o'+'utAngle\x20+\x20'+'1000.0)\x20*\x20'+'visMode);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(outVel,\x20o'+'utLife);\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',h3='\x0auniform\x20v'+'ec3\x20outBou'+'ndsMul;\x0aun'+'iform\x20vec3'+'\x20outBounds'+'Add;\x0a\x0avec2'+'\x20encodeFlo'+'atRG(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec2\x20enc'+'\x20=\x20vec2(1.'+'0,\x20255.0)\x20'+'*\x20v;\x0a\x20\x20\x20\x20e'+'nc\x20=\x20fract'+'(enc);\x0a\x20\x20\x20'+'\x20enc\x20-=\x20en'+'c.yy\x20*\x20vec'+'2(1.0/255.'+'0,\x201.0/255'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20enc;'+'\x0a}\x0a\x0avec4\x20e'+'ncodeFloat'+'RGBA(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20enc'+'\x20=\x20vec4(1.'+'0,\x20255.0,\x20'+'65025.0,\x201'+'60581375.0'+')\x20*\x20v;\x0a\x20\x20\x20'+'\x20enc\x20=\x20fra'+'ct(enc);\x0a\x20'+'\x20\x20\x20enc\x20-=\x20'+'enc.yzww\x20*'+'\x20vec4(1.0/'+'255.0,1.0/'+'255.0,1.0/'+'255.0,0.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20enc;\x0a}\x0a'+'\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20outP'+'os\x20=\x20outPo'+'s\x20*\x20outBou'+'ndsMul\x20+\x20o'+'utBoundsAd'+'d;\x0a\x20\x20\x20\x20out'+'Angle\x20=\x20fr'+'act(outAng'+'le\x20/\x20PI2);'+'\x0a\x0a\x20\x20\x20\x20outV'+'el\x20=\x20(outV'+'el\x20/\x20maxVe'+'l)\x20+\x20vec3('+'0.5);\x20//\x20T'+'ODO:\x20mul\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'maxNegLife'+'\x20=\x20max(lif'+'etime,\x20(nu'+'mParticles'+'\x20-\x201.0)\x20*\x20'+'(rate+rate'+'Div));\x0a\x20\x20\x20'+'\x20float\x20max'+'PosLife\x20=\x20'+'lifetime+1'+'.0;\x0a\x20\x20\x20\x20ou'+'tLife\x20=\x20(o'+'utLife\x20+\x20m'+'axNegLife)'+'\x20/\x20(maxNeg'+'Life\x20+\x20max'+'PosLife);\x0a'+'\x0a\x20\x20\x20\x20if\x20(g'+'l_FragCoor'+'d.y\x20<\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(encodeFlo'+'atRG(outPo'+'s.x),\x20enco'+'deFloatRG('+'outPos.y))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(gl_'+'FragCoord.'+'y\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(e'+'ncodeFloat'+'RG(outPos.'+'z),\x20encode'+'FloatRG(ou'+'tAngle));\x0a'+'\x20\x20\x20\x20}\x20else'+('\x20if\x20(gl_Fr'+'agCoord.y\x20'+'<\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(out'+'Vel,\x20visMo'+'de*0.5+0.5'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20e'+'ncodeFloat'+'RGBA(outLi'+'fe);\x0a\x20\x20\x20\x20}'+'\x0a}\x0a'),d3='\x0auniform\x20m'+'at3\x20spawnB'+'ounds;\x0auni'+'form\x20vec3\x20'+'spawnPosIn'+'nerRatio;\x0a'+'\x0avec3\x20calc'+'SpawnPosit'+'ion(vec3\x20i'+'nBounds,\x20f'+'loat\x20rndFa'+'ctor)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20pos'+'\x20=\x20inBound'+'s\x20-\x20vec3(0'+'.5);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20posAb'+'s\x20=\x20abs(po'+'s);\x0a\x20\x20\x20\x20ve'+'c3\x20maxPos\x20'+'=\x20vec3(max'+'(posAbs.x,'+'\x20max(posAb'+'s.y,\x20posAb'+'s.z)));\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ed'+'ge\x20=\x20maxPo'+'s\x20+\x20(vec3('+'0.5)\x20-\x20max'+'Pos)\x20*\x20spa'+'wnPosInner'+'Ratio;\x0a\x0a\x20\x20'+'\x20\x20pos.x\x20=\x20'+'edge.x\x20*\x20('+'maxPos.x\x20='+'=\x20posAbs.x'+'\x20?\x20sign(po'+'s.x)\x20:\x202.0'+'\x20*\x20pos.x);'+'\x0a\x20\x20\x20\x20pos.y'+'\x20=\x20edge.y\x20'+'*\x20(maxPos.'+'y\x20==\x20posAb'+'s.y\x20?\x20sign'+'(pos.y)\x20:\x20'+'2.0\x20*\x20pos.'+'y);\x0a\x20\x20\x20\x20po'+'s.z\x20=\x20edge'+'.z\x20*\x20(maxP'+'os.z\x20==\x20po'+'sAbs.z\x20?\x20s'+'ign(pos.z)'+'\x20:\x202.0\x20*\x20p'+'os.z);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20return\x20e'+'mitterPos\x20'+'+\x20spawnBou'+'nds\x20*\x20pos;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20sp'+'awnBounds\x20'+'*\x20pos;\x0a#en'+'dif\x0a}\x0a\x0avoi'+'d\x20addIniti'+'alVelocity'+'(inout\x20vec'+'3\x20localVel'+'ocity,\x20vec'+'3\x20inBounds'+')\x20{\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20-=\x20vec3('+'0,\x200,\x20init'+'ialVelocit'+'y);\x0a}\x0a',f3='\x0a\x20\x20\x20\x20write'+'Output();\x0a'+'}\x0a',u3='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20parti'+'cleTexIN;\x0a'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex0;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0aunif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x2;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex3'+';\x0a\x0auniform'+'\x20mat3\x20emit'+'terMatrix;'+'\x0auniform\x20m'+'at3\x20emitte'+'rMatrixInv'+';\x0auniform\x20'+'vec3\x20emitt'+'erScale;\x0a\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Pos;\x0aunifo'+'rm\x20vec3\x20fr'+'ameRandom;'+'\x0auniform\x20v'+'ec3\x20localV'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20vec3\x20v'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20float\x20'+'delta;\x0auni'+'form\x20float'+'\x20rate;\x0auni'+'form\x20float'+'\x20rateDiv;\x0a'+'uniform\x20fl'+'oat\x20lifeti'+'me;\x0aunifor'+'m\x20float\x20nu'+'mParticles'+';\x0auniform\x20'+'float\x20rotS'+'peedDivMul'+'t;\x0auniform'+'\x20float\x20rad'+'ialSpeedDi'+'vMult;\x0auni'+'form\x20float'+'\x20seed;\x0auni'+'form\x20float'+'\x20startAngl'+'e;\x0auniform'+'\x20float\x20sta'+'rtAngle2;\x0a'+'uniform\x20fl'+'oat\x20initia'+'lVelocity;'+'\x0a\x0auniform\x20'+'float\x20grap'+'hSampleSiz'+'e;\x0auniform'+'\x20float\x20gra'+'phNumSampl'+'es;\x0a\x0avec3\x20'+'inPos;\x0avec'+'3\x20inVel;\x0af'+'loat\x20inAng'+'le;\x0abool\x20i'+'nShow;\x0aflo'+'at\x20inLife;'+'\x0afloat\x20vis'+'Mode;\x0a\x0avec'+'3\x20outPos;\x0a'+'vec3\x20outVe'+'l;\x0afloat\x20o'+'utAngle;\x0ab'+'ool\x20outSho'+'w;\x0afloat\x20o'+'utLife;\x0a',p3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x20-1.0;\x0a\x20\x20\x20'+'\x20}\x0a',m3='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20outLi'+'fe\x20<\x200.0?\x20'+'-1.0:\x20visM'+'ode;\x0a',_3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20visM'+'ode\x20=\x20outL'+'ife\x20<\x200.0?'+'\x201.0:\x20visM'+'ode;\x0a',g3='\x0auniform\x20f'+'loat\x20spawn'+'BoundsSphe'+'re;\x0aunifor'+'m\x20float\x20sp'+'awnBoundsS'+'phereInner'+'Ratio;\x0a\x0ave'+'c3\x20calcSpa'+'wnPosition'+'(vec3\x20inBo'+'unds,\x20floa'+'t\x20rndFacto'+'r)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20rnd4\x20'+'=\x20fract(rn'+'dFactor\x20*\x20'+'1000.0);\x0a\x20'+'\x20\x20\x20vec3\x20no'+'rm\x20=\x20norma'+'lize(inBou'+'nds.xyz\x20-\x20'+'vec3(0.5))'+';\x0a\x20\x20\x20\x20floa'+'t\x20r\x20=\x20rnd4'+'\x20*\x20(1.0\x20-\x20'+'spawnBound'+'sSphereInn'+'erRatio)\x20+'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio;\x0a'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20return'+'\x20emitterPo'+'s\x20+\x20norm\x20*'+'\x20r\x20*\x20spawn'+'BoundsSphe'+'re;\x0a#else\x0a'+'\x20\x20\x20\x20return'+'\x20norm\x20*\x20r\x20'+'*\x20spawnBou'+'ndsSphere;'+'\x0a#endif\x0a}\x0a'+'\x0avoid\x20addI'+'nitialVelo'+'city(inout'+'\x20vec3\x20loca'+'lVelocity,'+'\x20vec3\x20inBo'+'unds)\x20{\x0a\x20\x20'+'\x20\x20localVel'+'ocity\x20+=\x20n'+'ormalize(i'+'nBounds\x20-\x20'+'vec3(0.5))'+'\x20*\x20initial'+'Velocity;\x0a'+'}\x0a',S3='\x0afloat\x20sat'+'urate(floa'+'t\x20x)\x20{\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(x,\x200.0'+',\x201.0);\x0a}\x0a'+'\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0av'+'ec3\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc,\x20out\x20ve'+'c3\x20w)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20a\x20='+'\x20texture2D'+'(tex,\x20tc);'+'\x0a\x20\x20\x20\x20vec4\x20'+'b\x20=\x20textur'+'e2D(tex,\x20t'+'c\x20+\x20graphS'+'ampleSize)'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20g'+'raphNumSam'+'ples);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20unp'+'ackedA\x20=\x20u'+'npack3NFlo'+'ats(a.w);\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20w\x20=\x20'+'mix(unpack'+'edA,\x20unpac'+'kedB,\x20c);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(a.xy'+'z,\x20b.xyz,\x20'+'c);\x0a}\x0a\x0a#de'+'fine\x20HASHS'+'CALE4\x20vec4'+'(1031,\x20.10'+'30,\x20.0973,'+'\x20.1099)\x0ave'+'c4\x20hash41('+'float\x20p)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'p4\x20=\x20fract'+'(vec4(p)\x20*'+'\x20HASHSCALE'+'4);\x0a\x20\x20\x20\x20p4'+'\x20+=\x20dot(p4'+',\x20p4.wzxy+'+'19.19);\x0a\x20\x20'+'\x20\x20return\x20f'+'ract(vec4('+'(p4.x\x20+\x20p4'+'.y)*p4.z,\x20'+'(p4.x\x20+\x20p4'+'.z)*p4.y,\x20'+'(p4.y\x20+\x20p4'+'.z)*p4.w,\x20'+'(p4.z\x20+\x20p4'+'.w)*p4.x))'+';\x0a}\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(gl_FragCo'+'ord.x\x20>\x20nu'+'mParticles'+')\x20discard;'+'\x0a\x0a\x20\x20\x20\x20read'+'Input(vUv0'+'.x);\x0a\x20\x20\x20\x20v'+'isMode\x20=\x20i'+'nShow?\x201.0'+'\x20:\x20-1.0;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20r'+'ndFactor\x20='+'\x20hash41(gl'+'_FragCoord'+('.x\x20+\x20seed)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eRate\x20=\x20ra'+'te\x20+\x20rateD'+'iv\x20*\x20rndFa'+'ctor.x;\x0a\x0a\x20'+'\x20\x20\x20outLife'+'\x20=\x20inLife\x20'+'+\x20delta;\x0a\x20'+'\x20\x20\x20float\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20lifetim'+'e,\x200.0,\x201.'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localV'+'elocityDiv'+';\x0a\x20\x20\x20\x20vec3'+'\x20velocityD'+'iv;\x0a\x20\x20\x20\x20ve'+'c3\x20paramDi'+'v;\x0a\x20\x20\x20\x20vec'+'3\x20localVel'+'ocity\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex0),\x20'+'vec2(nlife'+',\x200),\x20loca'+'lVelocityD'+'iv);\x0a\x20\x20\x20\x20v'+'ec3\x20veloci'+'ty\x20=\x20\x20\x20\x20\x20\x20'+'tex1Dlod_l'+'erp(TEXTUR'+'E_PASS(int'+'ernalTex1)'+',\x20vec2(nli'+'fe,\x200),\x20ve'+'locityDiv)'+';\x0a\x20\x20\x20\x20vec3'+'\x20params\x20=\x20'+'\x20\x20\x20\x20\x20\x20\x20tex'+'1Dlod_lerp'+'(TEXTURE_P'+'ASS(intern'+'alTex2),\x20v'+'ec2(nlife,'+'\x200),\x20param'+'Div);\x0a\x20\x20\x20\x20'+'float\x20rotS'+'peed\x20=\x20par'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rot'+'SpeedDiv\x20='+'\x20paramDiv.'+'y;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20radialP'+'arams\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex3),\x20'+'vec2(nlife'+',\x200),\x20para'+'mDiv);\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeed\x20='+'\x20radialPar'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeedDi'+'v\x20=\x20radial'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20bool\x20'+'respawn\x20=\x20'+'inLife\x20<=\x20'+'0.0\x20||\x20out'+'Life\x20>=\x20li'+'fetime;\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'respawn\x20?\x20'+'calcSpawnP'+'osition(rn'+'dFactor.xy'+'z,\x20rndFact'+'or.x)\x20:\x20in'+'Pos;\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20r'+'espawn\x20?\x20m'+'ix(startAn'+'gle,\x20start'+'Angle2,\x20rn'+'dFactor.x)'+'\x20:\x20inAngle'+';\x0a\x0a#ifndef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20vec')+('3\x20radialVe'+'l\x20=\x20inPos\x20'+'-\x20emitterP'+'os;\x0a#else\x0a'+'\x20\x20\x20\x20vec3\x20r'+'adialVel\x20='+'\x20inPos;\x0a#e'+'ndif\x0a\x20\x20\x20\x20r'+'adialVel\x20='+'\x20(dot(radi'+'alVel,\x20rad'+'ialVel)\x20>\x20'+'1.0E-8)\x20?\x20'+'radialSpee'+'d\x20*\x20normal'+'ize(radial'+'Vel)\x20:\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20+=\x20(radi'+'alSpeedDiv'+'\x20*\x20vec3(2.'+'0)\x20-\x20vec3('+'1.0))\x20*\x20ra'+'dialSpeedD'+'ivMult\x20*\x20r'+'ndFactor.x'+'yz;\x0a\x0a\x20\x20\x20\x20l'+'ocalVeloci'+'ty\x20+=\x20\x20\x20\x20('+'localVeloc'+'ityDiv\x20*\x20v'+'ec3(2.0)\x20-'+'\x20vec3(1.0)'+')\x20*\x20localV'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20velo'+'city\x20+=\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20(vel'+'ocityDiv\x20*'+'\x20vec3(2.0)'+'\x20-\x20vec3(1.'+'0))\x20*\x20velo'+'cityDivMul'+'t\x20*\x20rndFac'+'tor.xyz;\x0a\x20'+'\x20\x20\x20rotSpee'+'d\x20+=\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(rotSpe'+'edDiv\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20rotSpeedD'+'ivMult\x20*\x20r'+'ndFactor.y'+';\x0a\x0a\x20\x20\x20\x20add'+'InitialVel'+'ocity(loca'+'lVelocity,'+'\x20rndFactor'+'.xyz);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20em'+'itterScale'+';\x0a#else\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20(localVel'+'ocity\x20+\x20ra'+'dialVel)\x20/'+'\x20emitterSc'+'ale\x20+\x20emit'+'terMatrixI'+'nv\x20*\x20veloc'+'ity;\x0a#endi'+'f\x0a\x0a\x20\x20\x20\x20out'+'Pos\x20=\x20inPo'+'s\x20+\x20outVel'+'\x20*\x20delta;\x0a'+'\x20\x20\x20\x20outAng'+'le\x20=\x20inAng'+'le\x20+\x20rotSp'+'eed\x20*\x20delt'+'a;\x0a'),y3='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',v3='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'*=\x20saturat'+'e(gammaCor'+'rectInput('+'max(a,\x200.0'+')));\x0a\x20\x20\x20\x20i'+'f\x20((rgb.r\x20'+'+\x20rgb.g\x20+\x20'+'rgb.b)\x20<\x200'+'.000001)\x20d'+'iscard;\x0a',x3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3('+'1.0),\x20rgb,'+'\x20vec3(a));'+'\x0a\x20\x20\x20\x20if\x20(r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+'\x20>\x202.99)\x20d'+'iscard;\x0a',T3='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20d'+'iscard;\x0a',w3='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20\x20\x20/'+'/\x20XYZ\x20=\x20wo'+'rld\x20pos,\x20W'+'\x20=\x20life\x0aat'+'tribute\x20ve'+'c4\x20particl'+'e_vertexDa'+'ta2;\x20\x20//\x20X'+'\x20=\x20angle,\x20'+'Y\x20=\x20scale,'+'\x20Z\x20=\x20alpha'+',\x20W\x20=\x20velo'+'city.x\x0aatt'+'ribute\x20vec'+'4\x20particle'+'_vertexDat'+'a3;\x20\x20//\x20XY'+'Z\x20=\x20partic'+'le\x20local\x20p'+'os,\x20W\x20=\x20ve'+'locity.y\x0aa'+'ttribute\x20f'+'loat\x20parti'+'cle_vertex'+'Data4;\x20//\x20'+'particle\x20i'+'d\x0a\x0a//\x20type'+'\x20depends\x20o'+'n\x20useMesh\x20'+'property.\x20'+'Start\x20with'+'\x20X\x20=\x20veloc'+'ity.z,\x20Y\x20='+'\x20particle\x20'+'ID\x20and\x20for'+'\x20mesh\x20part'+'icles\x20proc'+'eeds\x20with\x20'+'Z\x20=\x20mesh\x20U'+'V.x,\x20W\x20=\x20m'+'esh\x20UV.y\x0a/'+'/\x20Note:\x20Th'+'is\x20generat'+'es\x20a\x20dupli'+'cate\x20attri'+'bute\x20warni'+'ng,\x20as\x20the'+'\x20scanning\x20'+'we\x20do\x20is\x20v'+'ery\x20simple'+'.\x0a#ifndef\x20'+'USE_MESH\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec2\x20pa'+'rticle_ver'+'texData5;\x0a'+'#else\x0a\x20\x20\x20\x20'+'attribute\x20'+'vec4\x20parti'+'cle_vertex'+'Data5;\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifndef\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20#define\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a#endif\x0a\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20lifetim'+'e;\x0auniform'+'\x20float\x20str'+'etch;\x0aunif'+'orm\x20float\x20'+'seed;\x0aunif'+'orm\x20vec3\x20w'+'rapBounds;'+'\x0auniform\x20v'+'ec3\x20emitte'+'rScale;\x0aun'+('iform\x20vec3'+'\x20faceTange'+'nt;\x0aunifor'+'m\x20vec3\x20fac'+'eBinorm;\x0a\x0a'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex0'+';\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x1;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex2;\x0a#end'+'if\x0auniform'+'\x20vec3\x20emit'+'terPos;\x0a\x0av'+'arying\x20vec'+'4\x20texCoord'+'sAlphaLife'+';\x0a\x0avec2\x20ro'+'tate(vec2\x20'+'quadXY,\x20fl'+'oat\x20pRotat'+'ion,\x20out\x20m'+'at2\x20rotMat'+'rix)\x0a{\x0a\x20\x20\x20'+'\x20float\x20c\x20='+'\x20cos(pRota'+'tion);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20sin(pRota'+'tion);\x0a\x20\x20\x20'+'\x20//vec4\x20ro'+'tationMatr'+'ix\x20=\x20vec4('+'c,\x20-s,\x20s,\x20'+'c);\x0a\x0a\x20\x20\x20\x20m'+'at2\x20m\x20=\x20ma'+'t2(c,\x20-s,\x20'+'s,\x20c);\x0a\x20\x20\x20'+'\x20rotMatrix'+'\x20=\x20m;\x0a\x0a\x20\x20\x20'+'\x20return\x20m\x20'+'*\x20quadXY;\x0a'+'}\x0a\x0avec3\x20bi'+'llboard(ve'+'c3\x20Instanc'+'eCoords,\x20v'+'ec2\x20quadXY'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20return\x20p'+'os;\x0a}\x0a\x0avec'+'3\x20customFa'+'ce(vec3\x20In'+'stanceCoor'+'ds,\x20vec2\x20q'+'uadXY)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20po'+'s\x20=\x20faceTa'+'ngent\x20*\x20qu'+'adXY.x\x20+\x20f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0avoid\x20main'+'(void)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20pa'+'rticlePos\x20'+'=\x20particle'+'_vertexDat'+'a.xyz;\x0a\x20\x20\x20'+'\x20vec3\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20vec3\x20vert'+'Pos\x20=\x20part'+'icle_verte'+'xData3.xyz'+';\x0a\x20\x20\x20\x20vec3'+'\x20inVel\x20=\x20v'+'ec3(partic'+'le_vertexD'+'ata2.w,\x20pa')+('rticle_ver'+'texData3.w'+',\x20particle'+'_vertexDat'+'a5.x);\x0a\x0a\x20\x20'+'\x20\x20float\x20id'+'\x20=\x20floor(p'+'article_ve'+'rtexData4)'+';\x0a\x20\x20\x20\x20floa'+'t\x20rndFacto'+'r\x20=\x20fract('+'sin(id\x20+\x201'+'.0\x20+\x20seed)'+');\x0a\x20\x20\x20\x20vec'+'3\x20rndFacto'+'r3\x20=\x20vec3('+'rndFactor,'+'\x20fract(rnd'+'Factor*10.'+'0),\x20fract('+'rndFactor*'+'100.0));\x0a\x0a'+'#ifdef\x20LOC'+'AL_SPACE\x0a\x20'+'\x20\x20\x20inVel\x20='+'\x20mat3(matr'+'ix_model)\x20'+'*\x20inVel;\x0a#'+'endif\x0a\x20\x20\x20\x20'+'vec2\x20veloc'+'ityV\x20=\x20nor'+'malize((ma'+'t3(matrix_'+'view)\x20*\x20in'+'Vel).xy);\x20'+'//\x20should\x20'+'be\x20removed'+'\x20by\x20compil'+'er\x20if\x20alig'+'n/stretch\x20'+'is\x20not\x20use'+'d\x0a\x0a\x20\x20\x20\x20vec'+'2\x20quadXY\x20='+'\x20vertPos.x'+'y;\x0a\x0a#ifdef'+'\x20USE_MESH\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe\x20=\x20vec4('+'particle_v'+'ertexData5'+'.zw,\x20parti'+'cle_vertex'+'Data2.z,\x20p'+'article_ve'+'rtexData.w'+');\x0a#else\x0a\x20'+'\x20\x20\x20texCoor'+'dsAlphaLif'+'e\x20=\x20vec4(q'+'uadXY\x20*\x20-0'+'.5\x20+\x200.5,\x20'+'particle_v'+'ertexData2'+'.z,\x20partic'+'le_vertexD'+'ata.w);\x0a#e'+'ndif\x0a\x20\x20\x20\x20m'+'at2\x20rotMat'+'rix;\x0a\x0a\x20\x20\x20\x20'+'float\x20inAn'+'gle\x20=\x20part'+'icle_verte'+'xData2.x;\x0a'+'\x20\x20\x20\x20vec3\x20p'+'articlePos'+'Moved\x20=\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20vec3\x20me'+'shLocalPos'+'\x20=\x20particl'+'e_vertexDa'+'ta3.xyz;\x0a'),E3='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20par'+'ticle_vert'+'exData2.y\x20'+'*\x20emitterS'+'cale;\x0a\x20\x20\x20\x20'+'localPos\x20+'+'=\x20particle'+'Pos;\x0a\x0a\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_viewProje'+'ction\x20*\x20ve'+'c4(localPo'+'s,\x201.0);\x0a',b3='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20quadXY'+');\x0a',A3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(rgb'+',\x20a);\x0a}\x0a',C3='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20sca'+'le\x20*\x20emitt'+'erScale;\x0a\x20'+'\x20\x20\x20localPo'+'s\x20+=\x20parti'+'clePos;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREEN_SPA'+'CE\x0a\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(loca'+'lPos.x,\x20lo'+'calPos.y,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20vec4(lo'+'calPos.xyz'+',\x201.0);\x0a\x20\x20'+'\x20\x20#endif\x0a',P3='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20normal\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20vec3'+'\x20posNormal'+'\x20=\x20-normal'+'\x20*\x200.5\x20+\x200'+'.5;\x0a\x20\x20\x20\x20ne'+'gNormal\x20*='+'\x20negNormal'+';\x0a\x20\x20\x20\x20posN'+'ormal\x20*=\x20p'+'osNormal;\x0a',M3='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20//\x20'+'XYZ\x20=\x20part'+'icle\x20posit'+'ion,\x20W\x20=\x20p'+'article\x20ID'+'\x20+\x20random\x20'+'factor\x0a\x0a#i'+'f\x20defined('+'USE_MESH)\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(USE_'+'MESH_UV)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20att'+'ribute\x20vec'+'2\x20particle'+'_uv;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mesh'+'\x20UV\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20par'+'ticle_uv\x20='+'\x20vec2(0.0,'+'\x200.0);\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20mat4\x20m'+'atrix_view'+'Projection'+';\x0auniform\x20'+'mat4\x20matri'+'x_model;\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20numPart'+'iclesPot;\x0a'+'uniform\x20fl'+'oat\x20graphS'+'ampleSize;'+'\x0auniform\x20f'+'loat\x20graph'+'NumSamples'+';\x0auniform\x20'+'float\x20stre'+'tch;\x0aunifo'+'rm\x20vec3\x20wr'+'apBounds;\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Scale;\x0auni'+'form\x20vec3\x20'+'emitterPos'+';\x0auniform\x20'+'vec3\x20faceT'+'angent;\x0aun'+'iform\x20vec3'+'\x20faceBinor'+'m;\x0auniform'+'\x20float\x20rat'+'e;\x0auniform'+'\x20float\x20rat'+'eDiv;\x0aunif'+'orm\x20float\x20'+'lifetime;\x0a'+'uniform\x20fl'+'oat\x20deltaR'+'andomnessS'+'tatic;\x0auni'+'form\x20float'+'\x20scaleDivM'+'ult;\x0aunifo'+'rm\x20float\x20a'+'lphaDivMul'+'t;\x0auniform'+'\x20float\x20see'+'d;\x0auniform'+'\x20float\x20del'+'ta;\x0aunifor'+'m\x20sampler2'+'D\x20particle'+'TexOUT;\x0aun'+'iform\x20samp'+('ler2D\x20part'+'icleTexIN;'+'\x0a\x0a#ifdef\x20P'+'ARTICLE_GP'+'U\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x0;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex2;\x0a#e'+'ndif\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0avarying\x20'+'vec4\x20texCo'+'ordsAlphaL'+'ife;\x0a\x0avec3'+'\x20inPos;\x0ave'+'c3\x20inVel;\x0a'+'float\x20inAn'+'gle;\x0abool\x20'+'inShow;\x0afl'+'oat\x20inLife'+';\x0a'),D3='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20max(norm'+'al,\x20vec3(0'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20posNo'+'rmal\x20=\x20max'+'(-normal,\x20'+'vec3(0.0))'+';\x0a',I3='\x0a\x20\x20\x20\x20vec3\x20'+'light\x20=\x20ne'+'gNormal.x*'+'lightCube['+'0]\x20+\x20posNo'+'rmal.x*lig'+'htCube[1]\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20negN'+'ormal.y*li'+'ghtCube[2]'+'\x20+\x20posNorm'+'al.y*light'+'Cube[3]\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20negNor'+'mal.z*ligh'+'tCube[4]\x20+'+'\x20posNormal'+'.z*lightCu'+'be[5];\x0a\x0a\x20\x20'+'\x20\x20rgb\x20*=\x20l'+'ight;\x0a',L3='\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20('+'matrix_mod'+'el\x20*\x20vec4('+'particlePo'+'s,\x201.0)).x'+'yz;\x0a',R3='\x0a\x20\x20\x20\x20vec3\x20'+'localPos\x20='+'\x20meshLocal'+'Pos;\x0a\x20\x20\x20\x20l'+'ocalPos.xy'+'\x20=\x20rotate('+'localPos.x'+'y,\x20inAngle'+',\x20rotMatri'+'x);\x0a\x20\x20\x20\x20lo'+'calPos.yz\x20'+'=\x20rotate(l'+'ocalPos.yz'+',\x20inAngle,'+'\x20rotMatrix'+');\x0a\x0a\x20\x20\x20\x20bi'+'llboard(pa'+'rticlePos,'+'\x20quadXY);\x0a',O3='\x0a\x20\x20\x20\x20Norma'+'l\x20=\x20normal'+'ize(localP'+'os\x20+\x20matri'+'x_viewInve'+'rse[2].xyz'+');\x0a',F3='\x0a\x20\x20\x20\x20vec3\x20'+'normalMap\x20'+'=\x20normaliz'+'e(texture2'+'D(normalMa'+'p,\x20vec2(te'+'xCoordsAlp'+'haLife.x,\x20'+'1.0\x20-\x20texC'+'oordsAlpha'+'Life.y)).x'+'yz\x20*\x202.0\x20-'+'\x201.0);\x0a\x20\x20\x20'+'\x20vec3\x20norm'+'al\x20=\x20Parti'+'cleMat\x20*\x20n'+'ormalMap;\x0a',N3='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan(veloci'+'tyV.x,\x20vel'+'ocityV.y);'+'\x0a\x0a',k3='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',U3='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vec3\x20No'+'rmal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20lightCu'+'be[6];\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20float\x20vDe'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fogP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'f\x20NORMAL\x20='+'=\x20MAP\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20normalMa'+'p;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22p'+'articlePS\x22'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_softP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20normal\x20'+'=\x20Normal;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalMap'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20HALF_L'+'AMBERT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_ha'+'lflambertP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_la'+'mbertPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_lighting'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20BLEND\x20'+'==\x20NORMAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndNormalPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+('\x20ADDITIVE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndAddPS\x22\x0a\x20'+'\x20\x20\x20#elif\x20B'+'LEND\x20==\x20MU'+'LTIPLICATI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendMulti'+'plyPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endPS\x22\x0a'),B3='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20animTexTi'+'lesParams;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20animTexP'+'arams;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec2\x20an'+'imTexIndex'+'Params;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20NO'+'RMAL\x20==\x20MA'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec3\x20Normal'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20SOFT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'rying\x20floa'+'t\x20vDepth;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_initVS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PA'+'CK8\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleInputR'+'gba8PS\x22\x20\x20\x20'+'\x20\x20//\x20why\x20a'+'re\x20these\x20P'+'S\x20and\x20not\x20'+'VS?\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x20'+'\x22particleI'+'nputFloatP'+'S\x22\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'OFT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22scre'+'enDepthPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleVS\x22\x0a\x0a\x20\x20'+'\x20\x20#else\x20//'+'\x20PARTICLE_'+'CPU\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22scr'+'eenDepthPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_cpuVS'+'\x22\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_local'+'ShiftVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20ANIMT'+'EX_LOOP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('#include\x20\x22'+'particleAn'+'imFrameLoo'+'pVS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particleA'+'nimFrameCl'+'ampVS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleAn'+'imTexVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20wr'+'ap\x20is\x20not\x20'+'used\x20on\x20CP'+'U,\x20it\x20was\x20'+'commented\x20'+'out.\x20TODO:'+'\x20investiga'+'te\x20why\x0a\x20\x20\x20'+'\x20#ifdef\x20PA'+'RTICLE_GPU'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20WRAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_wrapVS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20AL'+'IGN_TO_MOT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_pointAlon'+'gVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20US'+'E_MESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_meshVS'+'\x22\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20CUS'+'TOM_FACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'customFace'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_b'+'illboardVS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalVS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_TBNVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STRETCH\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_str'+'etchVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endVS\x22\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20PARTICLE'+'_CPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_cpu_endV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#')+('ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_so'+'ftVS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20}\x0a'),z3='\x0a\x20\x20\x20\x20float'+'\x20depth\x20=\x20g'+'etLinearSc'+'reenDepth('+');\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eDepth\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20float\x20dep'+'thDiff\x20=\x20s'+'aturate(ab'+'s(particle'+'Depth\x20-\x20de'+'pth)\x20*\x20sof'+'tening);\x0a\x20'+'\x20\x20\x20a\x20*=\x20de'+'pthDiff;\x0a',V3='\x0a\x20\x20\x20\x20vDept'+'h\x20=\x20getLin'+'earDepth(l'+'ocalPos);\x0a',G3='\x0a\x20\x20\x20\x20vec3\x20'+'moveDir\x20=\x20'+'inVel\x20*\x20st'+'retch;\x0a\x20\x20\x20'+'\x20vec3\x20posP'+'rev\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20+=\x20partic'+'lePosMoved'+';\x0a\x0a\x20\x20\x20\x20vec'+'2\x20centerTo'+'VertexV\x20=\x20'+'normalize('+'(mat3(matr'+'ix_view)\x20*'+'\x20localPos)'+'.xy);\x0a\x0a\x20\x20\x20'+'\x20float\x20int'+'erpolation'+'\x20=\x20dot(-ve'+'locityV,\x20c'+'enterToVer'+'texV)\x20*\x200.'+'5\x20+\x200.5;\x0a\x0a'+'\x20\x20\x20\x20partic'+'lePos\x20=\x20mi'+'x(particle'+'Pos,\x20posPr'+'ev,\x20interp'+'olation);\x0a',H3='\x0a\x20\x20\x20\x20mat3\x20'+'rot3\x20=\x20mat'+'3(rotMatri'+'x[0][0],\x20r'+'otMatrix[0'+'][1],\x200.0,'+'\x20rotMatrix'+'[1][0],\x20ro'+'tMatrix[1]'+'[1],\x200.0,\x20'+'0.0,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'ParticleMa'+'t\x20=\x20mat3(-'+'matrix_vie'+'wInverse[0'+'].xyz,\x20-ma'+'trix_viewI'+'nverse[1].'+'xyz,\x20matri'+'x_viewInve'+'rse[2].xyz'+')\x20*\x20rot3;\x0a',W3='\x0a\x20\x20\x20\x20vec3\x20'+'origPartic'+'lePos\x20=\x20pa'+'rticlePos;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20-=\x20'+'matrix_mod'+'el[3].xyz;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20m'+'od(particl'+'ePos,\x20wrap'+'Bounds)\x20-\x20'+'wrapBounds'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20+=\x20mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'PosMoved\x20='+'\x20particleP'+'os\x20-\x20origP'+'articlePos'+';\x0a',$3={'particlePS':s3,'particleVS':i3,'particleAnimFrameClampVS':r3,'particleAnimFrameLoopVS':a3,'particleAnimTexVS':n3,'particleInputFloatPS':o3,'particleInputRgba8PS':l3,'particleOutputFloatPS':c3,'particleOutputRgba8PS':h3,'particleUpdaterAABBPS':d3,'particleUpdaterEndPS':f3,'particleUpdaterInitPS':u3,'particleUpdaterNoRespawnPS':p3,'particleUpdaterOnStopPS':m3,'particleUpdaterRespawnPS':_3,'particleUpdaterSpherePS':g3,'particleUpdaterStartPS':S3,'particle_billboardVS':y3,'particle_blendAddPS':v3,'particle_blendMultiplyPS':x3,'particle_blendNormalPS':T3,'particle_cpuVS':w3,'particle_cpu_endVS':E3,'particle_customFaceVS':b3,'particle_endPS':A3,'particle_endVS':C3,'particle_halflambertPS':P3,'particle_initVS':M3,'particle_lambertPS':D3,'particle_lightingPS':I3,'particle_localShiftVS':L3,'particle_meshVS':R3,'particle_normalVS':O3,'particle_normalMapPS':F3,'particle_pointAlongVS':N3,'particle_simulationPS':k3,'particle_shaderPS':U3,'particle_shaderVS':B3,'particle_softPS':z3,'particle_softVS':V3,'particle_stretchVS':G3,'particle_TBNVS':H3,'particle_wrapVS':W3},X3='\x0avarying\x20t'+'exCoordsAl'+'phaLife:\x20v'+'ec4f;\x0a\x0avar'+'\x20colorMap:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20colorMap'+'Sampler:\x20s'+'ampler;\x0ava'+'r\x20colorPar'+'am:\x20textur'+'e_2d<f32>;'+'\x0avar\x20color'+'ParamSampl'+'er:\x20sample'+'r;\x0a\x0aunifor'+'m\x20graphSam'+'pleSize:\x20f'+'32;\x0aunifor'+'m\x20graphNum'+'Samples:\x20f'+'32;\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0auniform'+'\x20softening'+':\x20f32;\x0auni'+'form\x20color'+'Mult:\x20f32;'+'\x0a\x0afn\x20satur'+'ate(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(x,'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20tex:\x20v'+'ec4f\x20\x20=\x20te'+'xtureSampl'+'e(colorMap'+',\x20colorMap'+'Sampler,\x20v'+'ec2f(input'+'.texCoords'+'AlphaLife.'+'x,\x201.0\x20-\x20i'+'nput.texCo'+'ordsAlphaL'+'ife.y));\x0a\x20'+'\x20\x20\x20var\x20ram'+'p:\x20vec4f\x20='+'\x20textureSa'+'mple(color'+'Param,\x20col'+'orParamSam'+'pler,\x20vec2'+'f(input.te'+'xCoordsAlp'+'haLife.w,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20ramp\x20=\x20ve'+'c4f(ramp.r'+'gb\x20*\x20unifo'+'rm.colorMu'+'lt,\x20ramp.a'+');\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20=\x20ram'+'p.a\x20+\x20inpu'+'t.texCoord'+'sAlphaLife'+'.z;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20rgb:\x20ve'+'c3f\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'var\x20a:\x20f32'+'\x20=\x20tex.a\x20*'+'\x20ramp.a;\x0a',q3='\x0afn\x20unpack'+'3NFloats(s'+'rc:\x20f32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20r\x20'+'=\x20fract(sr'+'c);\x0a\x20\x20\x20\x20le'+'t\x20g\x20=\x20frac'+'t(src\x20*\x2025'+'6.0);\x0a\x20\x20\x20\x20'+'let\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3f(r,\x20'+'g,\x20b);\x0a}\x0a\x0a'+'fn\x20saturat'+'e(x:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0astruct\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20resu'+'lt:\x20vec4f,'+'\x0a\x20\x20\x20\x20unpac'+'ked:\x20vec3f'+'\x0a}\x0a\x0afn\x20tex'+'1Dlod_lerp'+'_simple(te'+'x:\x20texture'+'_2d<f32>,\x20'+'texSampler'+':\x20sampler,'+'\x20tc:\x20vec2f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20tc_next\x20='+'\x20tc\x20+\x20vec2'+'f(uniform.'+'graphSampl'+'eSize);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(\x20textur'+'eSample(te'+'x,\x20texSamp'+'ler,\x20tc),\x20'+'textureSam'+'ple(tex,\x20t'+'exSampler,'+'\x20tc_next),'+'\x20fract(tc.'+'x\x20*\x20unifor'+'m.graphNum'+'Samples)\x20)'+';\x0a}\x0a\x0afn\x20te'+'x1Dlod_ler'+'p_unpack(t'+'ex:\x20textur'+'e_2d<f32>,'+'\x20texSample'+'r:\x20sampler'+',\x20tc:\x20vec2'+'f)\x20->\x20TexL'+'erpUnpackR'+'esult\x20{\x0a\x20\x20'+'\x20\x20let\x20tc_n'+'ext\x20=\x20tc\x20+'+'\x20vec2f(uni'+'form.graph'+'SampleSize'+');\x0a\x20\x20\x20\x20let'+'\x20a\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20tc,\x200.0);'+'\x0a\x20\x20\x20\x20let\x20b'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'c_next,\x200.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20u'+'niform.gra'+'phNumSampl'+'es);\x0a\x20\x20\x20\x20l'+'et\x20unpacke'+'dA\x20=\x20unpac'+'k3NFloats('+'a.w);\x0a\x20\x20\x20\x20'+'let\x20unpack'+'edB\x20=\x20unpa'+'ck3NFloats'+'(b.w);\x0a\x20\x20\x20'+'\x20let\x20w_out'+('\x20=\x20mix(unp'+'ackedA,\x20un'+'packedB,\x20c'+');\x0a\x20\x20\x20\x20ret'+'urn\x20TexLer'+'pUnpackRes'+'ult(mix(a,'+'\x20b,\x20c),\x20w_'+'out);\x0a}\x0a\x0as'+'truct\x20Rota'+'teResult\x20{'+'\x0a\x20\x20\x20\x20rotat'+'edVec:\x20vec'+'2f,\x0a\x20\x20\x20\x20ma'+'trix:\x20mat2'+'x2f\x0a}\x0a\x0afn\x20'+'rotateWith'+'Matrix(qua'+'dXY:\x20vec2f'+',\x20pRotatio'+'n:\x20f32)\x20->'+'\x20RotateRes'+'ult\x20{\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20co'+'s(pRotatio'+'n);\x0a\x20\x20\x20\x20le'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x20\x20\x20\x20let\x20'+'m\x20=\x20mat2x2'+'f(vec2f(c,'+'\x20s),\x20vec2f'+'(-s,\x20c));\x0a'+'\x20\x20\x20\x20return'+'\x20RotateRes'+'ult(m\x20*\x20qu'+'adXY,\x20m);\x0a'+'}\x0a\x0afn\x20bill'+'board(Inst'+'anceCoords'+':\x20vec3f,\x20q'+'uadXY:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20pos:\x20ve'+'c3f;\x0a\x20\x20\x20\x20#'+'ifdef\x20SCRE'+'EN_SPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pos'+'\x20=\x20vec3f(-'+'1.0,\x200.0,\x20'+'0.0)\x20*\x20qua'+'dXY.x\x20+\x20ve'+'c3f(0.0,\x20-'+'1.0,\x200.0)\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20custom'+'Face(Insta'+'nceCoords:'+'\x20vec3f,\x20qu'+'adXY:\x20vec2'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20pos\x20=\x20un'+'iform.face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20uniform.f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20safeNo'+'rmalize(v:'+'\x20vec2f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20let\x20l\x20='+'\x20length(v)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20select('+'v,\x20v\x20/\x20l,\x20'+'l\x20>\x201e-06)'+';\x0a}\x0a\x0a@vert'+'ex\x0afn\x20vert'+'exMain(inp')+('ut:\x20Vertex'+'Input)\x20->\x20'+'VertexOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20meshLo'+'calPos_in\x20'+'=\x20input.pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20id\x20=\x20floo'+'r(input.pa'+'rticle_ver'+'texData.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20rndFactor'+'\x20=\x20fract(s'+'in(id\x20+\x201.'+'0\x20+\x20unifor'+'m.seed));\x0a'+'\x20\x20\x20\x20let\x20rn'+'dFactor3\x20='+'\x20vec3f(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20let\x20uv\x20=\x20'+'id\x20/\x20unifo'+'rm.numPart'+'iclesPot;\x0a'+'\x20\x20\x20\x20readIn'+'put(uv);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20model'+'Rotation\x20='+'\x20mat3x3f(u'+'niform.mat'+'rix_model['+'0].xyz,\x20un'+'iform.matr'+'ix_model[1'+'].xyz,\x20uni'+'form.matri'+'x_model[2]'+'.xyz);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20inVel'+'\x20=\x20modelRo'+'tation\x20*\x20i'+'nVel;\x0a\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20let\x20viewR'+'otation\x20=\x20'+'mat3x3f(un'+'iform.matr'+'ix_view[0]'+'.xyz,\x20unif'+'orm.matrix'+'_view[1].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[2].xyz'+');\x0a\x20\x20\x20\x20let'+'\x20velocityV'+'\x20=\x20safeNor'+'malize((vi'+'ewRotation'+'\x20*\x20inVel).'+'xy);\x0a\x0a\x20\x20\x20\x20'+'let\x20partic'+'leLifetime'+'\x20=\x20uniform'+'.lifetime;'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'meshLocalP'+'os\x20=\x20meshL'+'ocalPos_in'+';\x0a\x20\x20\x20\x20if\x20('+'inLife\x20<=\x20'+'0.0\x20||\x20inL'+'ife\x20>\x20part'+'icleLifeti'+'me\x20||\x20!inS'+'how)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mesh'+'LocalPos\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20let\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20let'+'\x20nlife\x20=\x20c')+('lamp(inLif'+'e\x20/\x20partic'+'leLifetime'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20lerp_res'+'ult\x20=\x20tex1'+'Dlod_lerp_'+'unpack(int'+'ernalTex2,'+'\x20internalT'+'ex2Sampler'+',\x20vec2f(nl'+'ife,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'params\x20=\x20l'+'erp_result'+'.result;\x0a\x20'+'\x20\x20\x20let\x20par'+'amDiv\x20=\x20le'+'rp_result.'+'unpacked;\x0a'+'\x0a\x20\x20\x20\x20var\x20s'+'cale\x20=\x20par'+'ams.y;\x0a\x20\x20\x20'+'\x20let\x20scale'+'Div\x20=\x20para'+'mDiv.x;\x0a\x20\x20'+'\x20\x20let\x20alph'+'aDiv\x20=\x20par'+'amDiv.z;\x0a\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20scale\x20+\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20unifo'+'rm.scaleDi'+'vMult\x20*\x20fr'+'act(rndFac'+'tor*10000.'+'0);\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20USE'+'_MESH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.texCoords'+'AlphaLife\x20'+'=\x20vec4f(qu'+'adXY\x20*\x20-0.'+'5\x20+\x200.5,\x20('+'alphaDiv\x20*'+'\x202.0\x20-\x201.0'+')\x20*\x20unifor'+'m.alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife\x20=\x20vec4'+'f(particle'+'_uv,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'uniform.al'+'phaDivMult'+'\x20*\x20fract(r'+'ndFactor*1'+'000.0),\x20nl'+'ife);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20var\x20part'+'iclePos\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20var\x20parti'+'clePosMove'+'d\x20=\x20vec3f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20var\x20rotMa'+'trix:\x20mat2'+'x2f;\x0a'),j3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20min('+'floor(inpu'+'t.texCoord'+'sAlphaLife'+'.w\x20*\x20unifo'+'rm.animTex'+'Params.y)\x20'+'+\x20uniform.'+'animTexPar'+'ams.x,\x20uni'+'form.animT'+'exParams.z'+');\x0a',Y3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20floo'+'r((output.'+'texCoordsA'+'lphaLife.w'+'\x20*\x20uniform'+'.animTexPa'+'rams.y\x20+\x20u'+'niform.ani'+'mTexParams'+'.x)\x20%\x20(uni'+'form.animT'+'exParams.z'+'\x20+\x201.0));\x20'+'\x20\x20\x20\x0a',K3='\x0a\x20\x20\x20\x20var\x20a'+'nimationIn'+'dex:\x20f32;\x0a'+'\x0a\x20\x20\x20\x20if\x20(u'+'niform.ani'+'mTexIndexP'+'arams.y\x20=='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20floor(('+'uniform.an'+'imTexParam'+'s.w\x20+\x201.0)'+'\x20*\x20rndFact'+'or3.z)\x20*\x20('+'uniform.an'+'imTexParam'+'s.z\x20+\x201.0)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20animati'+'onIndex\x20=\x20'+'uniform.an'+'imTexIndex'+'Params.x\x20*'+'\x20(uniform.'+'animTexPar'+'ams.z\x20+\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20var\x20a'+'tlasX:\x20f32'+'\x20=\x20(animat'+'ionIndex\x20+'+'\x20animFrame'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20atlasY:\x20'+'f32\x20=\x201.0\x20'+'-\x20floor(at'+'lasX\x20+\x201.0'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.y;\x0a\x20\x20\x20\x20at'+'lasX\x20=\x20fra'+'ct(atlasX)'+';\x20//\x20Reass'+'ign\x20atlasX'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'current_tc'+'al_xy\x20=\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.xy;\x0a\x20\x20'+'\x20\x20let\x20scal'+'ed_tcal_xy'+'\x20=\x20current'+'_tcal_xy\x20*'+'\x20uniform.a'+'nimTexTile'+'sParams.xy'+';\x0a\x20\x20\x20\x20let\x20'+'final_tcal'+'_xy\x20=\x20scal'+'ed_tcal_xy'+'\x20+\x20vec2f(a'+'tlasX,\x20atl'+'asY);\x0a\x20\x20\x20\x20'+'output.tex'+'CoordsAlph'+'aLife\x20=\x20ve'+'c4f(final_'+'tcal_xy,\x20o'+'utput.texC'+'oordsAlpha'+'Life.z,\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.w);\x0a',Z3='\x0afn\x20readIn'+'put(uv:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex:\x20ve'+'c4f\x20=\x20text'+'ureSampleL'+'evel(parti'+'cleTexIN,\x20'+'particleTe'+'xINSampler'+',\x20vec2f(uv'+',\x200.25),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex2:\x20v'+'ec4f\x20=\x20tex'+'tureSample'+'Level(part'+'icleTexIN,'+'\x20particleT'+'exINSample'+'r,\x20vec2f(u'+'v,\x200.75),\x20'+'0.0);\x0a\x0a\x20\x20\x20'+'\x20inPos\x20=\x20t'+'ex.xyz;\x0a\x20\x20'+'\x20\x20inVel\x20=\x20'+'tex2.xyz;\x0a'+'\x20\x20\x20\x20inAngl'+'e\x20=\x20abs(te'+'x.w)\x20-\x20100'+'0.0;\x0a\x20\x20\x20\x20i'+'nShow\x20=\x20te'+'x.w\x20>=\x200.0'+';\x0a\x20\x20\x20\x20inLi'+'fe\x20=\x20tex2.'+'w;\x0a}\x0a',Q3='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0ac'+'onst\x20PI2:\x20'+'f32\x20=\x206.28'+'3185307179'+'586;\x0a\x0aunif'+'orm\x20inBoun'+'dsSize:\x20ve'+'c3f;\x0aunifo'+'rm\x20inBound'+'sCenter:\x20v'+'ec3f;\x0a\x0auni'+'form\x20maxVe'+'l:\x20f32;\x0a\x0af'+'n\x20decodeFl'+'oatRG(rg:\x20'+'vec2f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20rg.'+'y\x20*\x20(1.0\x20/'+'\x20255.0)\x20+\x20'+'rg.x;\x0a}\x0a\x0af'+'n\x20decodeFl'+'oatRGBA(\x20r'+'gba:\x20vec4f'+'\x20)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20dot(rgb'+'a,\x20vec4f(1'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x2065025.0'+',\x201.0\x20/\x2016'+'0581375.0)'+');\x0a}\x0a\x0afn\x20r'+'eadInput(u'+'v:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20let\x20te'+'x0\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.125),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex1\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.37'+'5),\x200.0);\x0a'+'\x20\x20\x20\x20let\x20te'+'x2\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.625),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex3\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.87'+'5),\x200.0);\x0a'+'\x0a\x20\x20\x20\x20inPos'+'\x20=\x20vec3f(d'+'ecodeFloat'+'RG(tex0.rg'+'),\x20decodeF'+'loatRG(tex'+'0.ba),\x20dec'+'odeFloatRG'+'(tex1.rg))'+';\x0a\x20\x20\x20\x20inPo'+'s\x20=\x20(inPos'+'\x20-\x20vec3f(0'+'.5))\x20*\x20uni'+'form.inBou'+'ndsSize\x20+\x20'+'uniform.in'+'BoundsCent'+'er;\x0a\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inVel\x20=\x20('+('inVel\x20-\x20ve'+'c3f(0.5))\x20'+'*\x20uniform.'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20let\x20l'+'ife_decode'+'d\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20let\x20maxNe'+'gLife\x20=\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20(uniform.'+'rate\x20+\x20uni'+'form.rateD'+'iv));\x0a\x20\x20\x20\x20'+'let\x20maxPos'+'Life\x20=\x20uni'+'form.lifet'+'ime\x20+\x201.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20life_d'+'ecoded\x20*\x20('+'maxNegLife'+'\x20+\x20maxPosL'+'ife)\x20-\x20max'+'NegLife;\x0a}'),J3='\x0afn\x20getOut'+'put()\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20if\x20(pcPos'+'ition.y\x20<\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4f(ou'+'tPos,\x20(out'+'Angle\x20+\x2010'+'00.0)\x20*\x20vi'+'sMode);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(outVel,\x20'+'outLife);\x0a'+'\x20\x20\x20\x20}\x0a}\x0a',eO='\x0auniform\x20o'+'utBoundsMu'+'l:\x20vec3f;\x0a'+'uniform\x20ou'+'tBoundsAdd'+':\x20vec3f;\x0a\x0a'+'fn\x20encodeF'+'loatRG(\x20v:'+'\x20f32\x20)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20var\x20enc:'+'\x20vec2f\x20=\x20v'+'ec2f(1.0,\x20'+'255.0)\x20*\x20v'+';\x0a\x20\x20\x20\x20enc\x20'+'=\x20fract(en'+'c);\x0a\x20\x20\x20\x20en'+'c\x20=\x20enc\x20-\x20'+'enc.yy\x20*\x20('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20enc;\x0a'+'}\x0a\x0afn\x20enco'+'deFloatRGB'+'A(\x20v:\x20f32\x20'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20factors\x20='+'\x20vec4f(1.0'+',\x20255.0,\x206'+'5025.0,\x2016'+'0581375.0)'+';\x0a\x20\x20\x20\x20var\x20'+'enc:\x20vec4f'+'\x20=\x20factors'+'\x20*\x20v;\x0a\x20\x20\x20\x20'+'enc\x20=\x20frac'+'t(enc);\x0a\x20\x20'+'\x20\x20enc\x20=\x20en'+'c\x20-\x20enc.yz'+'ww\x20*\x20vec4f'+'(1.0\x20/\x20255'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x20255.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'return\x20enc'+';\x0a}\x0a\x0afn\x20ge'+'tOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20outPo'+'s\x20=\x20outPos'+'\x20*\x20uniform'+'.outBounds'+'Mul\x20+\x20unif'+'orm.outBou'+'ndsAdd;\x0a\x20\x20'+'\x20\x20outAngle'+'\x20=\x20fract(o'+'utAngle\x20/\x20'+'PI2);\x0a\x0a\x20\x20\x20'+'\x20outVel\x20=\x20'+'(outVel\x20/\x20'+'uniform.ma'+'xVel)\x20+\x20ve'+'c3f(0.5);\x20'+'//\x20TODO:\x20m'+'ul\x0a\x0a\x20\x20\x20\x20le'+'t\x20maxNegLi'+'fe\x20=\x20max(u'+'niform.lif'+'etime,\x20(un'+'iform.numP'+'articles\x20-'+'\x201.0)\x20*\x20(u'+'niform.rat'+'e\x20+\x20unifor'+'m.rateDiv)'+');\x0a\x20\x20\x20\x20let'+'\x20maxPosLif'+'e\x20=\x20unifor'+'m.lifetime'+'\x20+\x201.0;\x0a\x20\x20'+'\x20\x20outLife\x20'+'=\x20(outLife'+'\x20+\x20maxNegL'+'ife)\x20/\x20(ma'+'xNegLife\x20+'+'\x20maxPosLif'+'e);\x0a\x0a\x20\x20\x20\x20i'+'f\x20(pcPosit'+'ion.y\x20<\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'vec4f(enco'+'deFloatRG('+'outPos.x),'+'\x20encodeFlo'+'atRG(outPo'+'s.y));\x0a\x20\x20\x20'+('\x20}\x20else\x20if'+'\x20(pcPositi'+'on.y\x20<\x202.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(encod'+'eFloatRG(o'+'utPos.z),\x20'+'encodeFloa'+'tRG(outAng'+'le));\x0a\x20\x20\x20\x20'+'}\x20else\x20if\x20'+'(pcPositio'+'n.y\x20<\x203.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(outVel'+',\x20visMode\x20'+'*\x200.5\x20+\x200.'+'5);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20encodeFl'+'oatRGBA(ou'+'tLife);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),tO='\x0auniform\x20s'+'pawnBounds'+':\x20mat3x3f;'+'\x0auniform\x20s'+'pawnPosInn'+'erRatio:\x20v'+'ec3f;\x0a\x0afn\x20'+'calcSpawnP'+'osition(in'+'Bounds:\x20ve'+'c3f,\x20rndFa'+'ctor:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'pos\x20=\x20inBo'+'unds\x20-\x20vec'+'3f(0.5);\x0a\x0a'+'\x20\x20\x20\x20let\x20po'+'sAbs\x20=\x20abs'+'(pos);\x0a\x20\x20\x20'+'\x20let\x20maxCo'+'mp\x20=\x20max(p'+'osAbs.x,\x20m'+'ax(posAbs.'+'y,\x20posAbs.'+'z));\x0a\x20\x20\x20\x20l'+'et\x20maxPos\x20'+'=\x20vec3f(ma'+'xComp);\x0a\x0a\x20'+'\x20\x20\x20let\x20edg'+'e\x20=\x20maxPos'+'\x20+\x20(vec3f('+'0.5)\x20-\x20max'+'Pos)\x20*\x20uni'+'form.spawn'+'PosInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'pos.x\x20=\x20ed'+'ge.x\x20*\x20sel'+'ect(2.0\x20*\x20'+'pos.x,\x20sig'+'n(pos.x),\x20'+'maxPos.x\x20='+'=\x20posAbs.x'+');\x0a\x20\x20\x20\x20pos'+'.y\x20=\x20edge.'+'y\x20*\x20select'+'(2.0\x20*\x20pos'+'.y,\x20sign(p'+'os.y),\x20max'+'Pos.y\x20==\x20p'+'osAbs.y);\x0a'+'\x20\x20\x20\x20pos.z\x20'+'=\x20edge.z\x20*'+'\x20select(2.'+'0\x20*\x20pos.z,'+'\x20sign(pos.'+'z),\x20maxPos'+'.z\x20==\x20posA'+'bs.z);\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20uni'+'form.emitt'+'erPos\x20+\x20un'+'iform.spaw'+'nBounds\x20*\x20'+'pos;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uniform.sp'+'awnBounds\x20'+'*\x20pos;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20*localV'+'elocity\x20=\x20'+'*localVelo'+'city\x20-\x20vec'+'3f(0.0,\x200.'+'0,\x20uniform'+'.initialVe'+'locity);\x0a}'+'\x0a',sO='\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'getOutput('+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',iO='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20par'+'ticleTexIN'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20particl'+'eTexINSamp'+'ler:\x20sampl'+'er;\x0avar\x20in'+'ternalTex0'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0avar\x20int'+'ernalTex1:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20internal'+'Tex1Sample'+'r:\x20sampler'+';\x0avar\x20inte'+'rnalTex2:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20internalT'+'ex2Sampler'+':\x20sampler;'+'\x0avar\x20inter'+'nalTex3:\x20t'+'exture_2d<'+'f32>;\x0avar\x20'+'internalTe'+'x3Sampler:'+'\x20sampler;\x0a'+'\x0auniform\x20e'+'mitterMatr'+'ix:\x20mat3x3'+'f;\x0auniform'+'\x20emitterMa'+'trixInv:\x20m'+'at3x3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0a\x0aun'+'iform\x20emit'+'terPos:\x20ve'+'c3f;\x0aunifo'+'rm\x20frameRa'+'ndom:\x20vec3'+'f;\x0auniform'+'\x20localVelo'+'cityDivMul'+'t:\x20vec3f;\x0a'+'uniform\x20ve'+'locityDivM'+'ult:\x20vec3f'+';\x0auniform\x20'+'delta:\x20f32'+';\x0auniform\x20'+'rate:\x20f32;'+'\x0auniform\x20r'+'ateDiv:\x20f3'+'2;\x0auniform'+'\x20lifetime:'+'\x20f32;\x0aunif'+'orm\x20numPar'+'ticles:\x20f3'+'2;\x0auniform'+'\x20rotSpeedD'+'ivMult:\x20f3'+'2;\x0auniform'+'\x20radialSpe'+'edDivMult:'+'\x20f32;\x0aunif'+'orm\x20seed:\x20'+'f32;\x0aunifo'+'rm\x20startAn'+'gle:\x20f32;\x0a'+'uniform\x20st'+'artAngle2:'+'\x20f32;\x0aunif'+'orm\x20initia'+'lVelocity:'+'\x20f32;\x0a\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0a\x0ava'+'r<private>'+'\x20inPos:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20in'+'Vel:\x20vec3f'+';\x0avar<priv'+'ate>\x20inAng'+('le:\x20f32;\x0av'+'ar<private'+'>\x20inShow:\x20'+'bool;\x0avar<'+'private>\x20i'+'nLife:\x20f32'+';\x0avar<priv'+'ate>\x20visMo'+'de:\x20f32;\x0a\x0a'+'var<privat'+'e>\x20outPos:'+'\x20vec3f;\x0ava'+'r<private>'+'\x20outVel:\x20v'+'ec3f;\x0avar<'+'private>\x20o'+'utAngle:\x20f'+'32;\x0avar<pr'+'ivate>\x20out'+'Show:\x20bool'+';\x0avar<priv'+'ate>\x20outLi'+'fe:\x20f32;\x0a'),rO='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tLife\x20=\x20ou'+'tLife\x20-\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20particleR'+'ate);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20visMod'+'e\x20=\x20-1.0;\x0a'+'\x20\x20\x20\x20}\x0a',aO='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20selec'+'t(visMode,'+'\x20-1.0,\x20out'+'Life\x20<\x200.0'+');\x0a',nO='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20subtract'+'Amount\x20=\x20m'+'ax(uniform'+'.lifetime,'+'\x20(uniform.'+'numParticl'+'es\x20-\x201.0)\x20'+'*\x20particle'+'Rate);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outLi'+'fe\x20=\x20outLi'+'fe\x20-\x20subtr'+'actAmount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'isMode\x20=\x201'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20visMod'+'e\x20=\x20select'+'(visMode,\x20'+'1.0,\x20outLi'+'fe\x20<\x200.0);'+'\x0a',oO='\x0auniform\x20s'+'pawnBounds'+'Sphere:\x20f3'+'2;\x0auniform'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio:\x20'+'f32;\x0a\x0afn\x20c'+'alcSpawnPo'+'sition(inB'+'ounds:\x20vec'+'3f,\x20rndFac'+'tor:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'nd4:\x20f32\x20='+'\x20fract(rnd'+'Factor\x20*\x201'+'000.0);\x0a\x20\x20'+'\x20\x20let\x20norm'+':\x20vec3f\x20=\x20'+'normalize('+'inBounds.x'+'yz\x20-\x20vec3f'+'(0.5));\x0a\x20\x20'+'\x20\x20let\x20r:\x20f'+'32\x20=\x20rnd4\x20'+'*\x20(1.0\x20-\x20u'+'niform.spa'+'wnBoundsSp'+'hereInnerR'+'atio)\x20+\x20un'+'iform.spaw'+'nBoundsSph'+'ereInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20unifo'+'rm.emitter'+'Pos\x20+\x20norm'+'\x20*\x20r\x20*\x20uni'+'form.spawn'+'BoundsSphe'+'re;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20n'+'orm\x20*\x20r\x20*\x20'+'uniform.sp'+'awnBoundsS'+'phere;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20ini'+'tialVelOff'+'set:\x20vec3f'+'\x20=\x20normali'+'ze(inBound'+'s\x20-\x20vec3f('+'0.5))\x20*\x20un'+'iform.init'+'ialVelocit'+'y;\x0a\x20\x20\x20\x20*lo'+'calVelocit'+'y\x20=\x20*local'+'Velocity\x20+'+'\x20initialVe'+'lOffset;\x0a}'+'\x0a',lO='\x0afn\x20satura'+'te(x:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(x,\x20'+'0.0,\x201.0);'+'\x0a}\x0a\x0afn\x20unp'+'ack3NFloat'+'s(src:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20r\x20=\x20fract'+'(src);\x0a\x20\x20\x20'+'\x20let\x20g\x20=\x20f'+'ract(src\x20*'+'\x20256.0);\x0a\x20'+'\x20\x20\x20let\x20b\x20='+'\x20fract(src'+'\x20*\x2065536.0'+');\x0a\x20\x20\x20\x20ret'+'urn\x20vec3f('+'r,\x20g,\x20b);\x0a'+'}\x0a\x0a//\x20Stru'+'ct\x20to\x20hand'+'le\x20multipl'+'e\x20return\x20v'+'alues\x20from'+'\x20tex1Dlod_'+'lerp\x0astruc'+'t\x20TexLerpU'+'npackResul'+'t\x20{\x0a\x20\x20\x20\x20re'+'sult:\x20vec3'+'f,\x0a\x20\x20\x20\x20unp'+'acked:\x20vec'+'3f\x0a}\x0a\x0afn\x20t'+'ex1Dlod_le'+'rp(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20tc:\x20'+'vec2f)\x20->\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'tc_next\x20=\x20'+'tc\x20+\x20vec2f'+'(uniform.g'+'raphSample'+'Size);\x0a\x20\x20\x20'+'\x20let\x20a\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20tc,\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20tc_next'+',\x200.0);\x0a\x20\x20'+'\x20\x20let\x20c\x20=\x20'+'fract(tc.x'+'\x20*\x20uniform'+'.graphNumS'+'amples);\x0a\x0a'+'\x20\x20\x20\x20let\x20un'+'packedA\x20=\x20'+'unpack3NFl'+'oats(a.w);'+'\x0a\x20\x20\x20\x20let\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20let\x20'+'w_out\x20=\x20mi'+'x(unpacked'+'A,\x20unpacke'+'dB,\x20c);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'TexLerpUnp'+'ackResult('+'mix(a.xyz,'+'\x20b.xyz,\x20c)'+',\x20w_out);\x0a'+'}\x0a\x0aconst\x20H'+'ASHSCALE4:'+'\x20vec4f\x20=\x20v'+'ec4f(1031.'+'0,\x200.1030,'+'\x200.0973,\x200'+'.1099);\x0afn'+'\x20hash41(p:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20var\x20p4\x20=\x20'+'fract(vec4'+'f(p)\x20*\x20HAS'+('HSCALE4);\x0a'+'\x20\x20\x20\x20p4\x20=\x20p'+'4\x20+\x20dot(p4'+',\x20p4.wzxy\x20'+'+\x2019.19);\x0a'+'\x20\x20\x20\x20return'+'\x20fract(vec'+'4f((p4.x\x20+'+'\x20p4.y)*p4.'+'z,\x20(p4.x\x20+'+'\x20p4.z)*p4.'+'y,\x20(p4.y\x20+'+'\x20p4.z)*p4.'+'w,\x20(p4.z\x20+'+'\x20p4.w)*p4.'+'x));\x0a}\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20if\x20(pc'+'Position.x'+'\x20>\x20uniform'+'.numPartic'+'les)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20re'+'adInput(in'+'put.vUv0.x'+');\x0a\x20\x20\x20\x20vis'+'Mode\x20=\x20sel'+'ect(-1.0,\x20'+'1.0,\x20inSho'+'w);\x0a\x0a\x20\x20\x20\x20l'+'et\x20rndFact'+'or\x20=\x20hash4'+'1(pcPositi'+'on.x\x20+\x20uni'+'form.seed)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20particleR'+'ate\x20=\x20unif'+'orm.rate\x20+'+'\x20uniform.r'+'ateDiv\x20*\x20r'+'ndFactor.x'+';\x0a\x0a\x20\x20\x20\x20out'+'Life\x20=\x20inL'+'ife\x20+\x20unif'+'orm.delta;'+'\x0a\x20\x20\x20\x20let\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20uniform'+'.lifetime,'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t0\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'0,\x20interna'+'lTex0Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20va'+'r\x20localVel'+'ocity\x20=\x20le'+'rpResult0.'+'result;\x0a\x20\x20'+'\x20\x20let\x20loca'+'lVelocityD'+'iv\x20=\x20lerpR'+'esult0.unp'+'acked;\x0a\x0a\x20\x20'+'\x20\x20let\x20lerp'+'Result1\x20=\x20'+'tex1Dlod_l'+'erp(intern'+'alTex1,\x20in'+'ternalTex1'+'Sampler,\x20v'+'ec2f(nlife'+',\x200.0));\x0a\x20'+'\x20\x20\x20var\x20vel'+'ocity\x20=\x20le'+'rpResult1.'+'result;\x0a\x20\x20'+'\x20\x20let\x20velo'+'cityDiv\x20=\x20'+'lerpResult')+('1.unpacked'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t2\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'2,\x20interna'+'lTex2Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20le'+'t\x20params\x20='+'\x20lerpResul'+'t2.result;'+'\x0a\x20\x20\x20\x20let\x20p'+'aramDiv\x20=\x20'+'lerpResult'+'2.unpacked'+';\x0a\x20\x20\x20\x20var\x20'+'rotSpeed\x20='+'\x20params.x;'+'\x0a\x20\x20\x20\x20let\x20r'+'otSpeedDiv'+'\x20=\x20paramDi'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'let\x20lerpRe'+'sult3\x20=\x20te'+'x1Dlod_ler'+'p(internal'+'Tex3,\x20inte'+'rnalTex3Sa'+'mpler,\x20vec'+'2f(nlife,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20let\x20radia'+'lParams\x20=\x20'+'lerpResult'+'3.result;\x0a'+'\x20\x20\x20\x20let\x20ra'+'dialParamD'+'iv\x20=\x20lerpR'+'esult3.unp'+'acked;\x0a\x20\x20\x20'+'\x20let\x20radia'+'lSpeed\x20=\x20r'+'adialParam'+'s.x;\x0a\x20\x20\x20\x20l'+'et\x20radialS'+'peedDiv\x20=\x20'+'radialPara'+'mDiv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20res'+'pawn\x20=\x20inL'+'ife\x20<=\x200.0'+'\x20||\x20outLif'+'e\x20>=\x20unifo'+'rm.lifetim'+'e;\x0a\x20\x20\x20\x20inP'+'os\x20=\x20selec'+'t(inPos,\x20c'+'alcSpawnPo'+'sition(rnd'+'Factor.xyz'+',\x20rndFacto'+'r.x),\x20resp'+'awn);\x0a\x20\x20\x20\x20'+'inAngle\x20=\x20'+'select(inA'+'ngle,\x20mix('+'uniform.st'+'artAngle,\x20'+'uniform.st'+'artAngle2,'+'\x20rndFactor'+'.x),\x20respa'+'wn);\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20radialVe'+'l:\x20vec3f\x20='+'\x20inPos\x20-\x20u'+'niform.emi'+'tterPos;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20radialVel'+':\x20vec3f\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20=\x20select'+'(vec3f(0.0'+'),\x20radialS'+'peed\x20*\x20nor'+'malize(rad'+'ialVel),\x20d'+'ot(radialV'+'el,\x20radial'+'Vel)\x20>\x201.0')+('E-8);\x0a\x20\x20\x20\x20'+'radialVel\x20'+'=\x20radialVe'+'l\x20+\x20(radia'+'lSpeedDiv\x20'+'*\x20vec3f(2.'+'0)\x20-\x20vec3f'+'(1.0))\x20*\x20u'+'niform.rad'+'ialSpeedDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20=\x20localV'+'elocity\x20+\x20'+'(localVelo'+'cityDiv\x20*\x20'+'vec3f(2.0)'+'\x20-\x20vec3f(1'+'.0))\x20*\x20uni'+'form.local'+'VelocityDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x20\x20\x20\x20vel'+'ocity\x20=\x20ve'+'locity\x20+\x20('+'velocityDi'+'v\x20*\x20vec3f('+'2.0)\x20-\x20vec'+'3f(1.0))\x20*'+'\x20uniform.v'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20rotS'+'peed\x20=\x20rot'+'Speed\x20+\x20(r'+'otSpeedDiv'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20unif'+'orm.rotSpe'+'edDivMult\x20'+'*\x20rndFacto'+'r.y;\x0a\x0a\x20\x20\x20\x20'+'addInitial'+'Velocity(&'+'localVeloc'+'ity,\x20rndFa'+'ctor.xyz);'+'\x0a\x0a\x20\x20\x20\x20#ifn'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20outVel'+'\x20=\x20uniform'+'.emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tVel\x20=\x20(lo'+'calVelocit'+'y\x20+\x20radial'+'Vel)\x20/\x20uni'+'form.emitt'+'erScale\x20+\x20'+'uniform.em'+'itterMatri'+'xInv\x20*\x20vel'+'ocity;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20outPos\x20'+'=\x20inPos\x20+\x20'+'outVel\x20*\x20u'+'niform.del'+'ta;\x0a\x20\x20\x20\x20ou'+'tAngle\x20=\x20i'+'nAngle\x20+\x20r'+'otSpeed\x20*\x20'+'uniform.de'+'lta;\x0a'),cO='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20rotated'+'QuadXY);\x0a',hO='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20sa'+'turate(gam'+'maCorrectI'+'nput(max(a'+',\x200.0)));\x0a'+'\x20\x20\x20\x20if\x20((r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+')\x20<\x200.0000'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20}\x20\x20'+'\x20\x20\x0a',dO='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3f'+'(1.0),\x20rgb'+',\x20a);\x0a\x20\x20\x20\x20'+'if\x20((rgb.r'+'\x20+\x20rgb.g\x20+'+'\x20rgb.b)\x20>\x20'+'2.99)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a',fO='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20}\x0a',uO='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20\x20'+'\x20//\x20XYZ\x20=\x20'+'world\x20pos,'+'\x20W\x20=\x20life\x0a'+'attribute\x20'+'particle_v'+'ertexData2'+':\x20vec4f;\x20\x20'+'//\x20X\x20=\x20ang'+'le,\x20Y\x20=\x20sc'+'ale,\x20Z\x20=\x20a'+'lpha,\x20W\x20=\x20'+'velocity.x'+'\x0aattribute'+'\x20particle_'+'vertexData'+'3:\x20vec4f;\x20'+'\x20//\x20XYZ\x20=\x20'+'particle\x20l'+'ocal\x20pos,\x20'+'W\x20=\x20veloci'+'ty.y\x0aattri'+'bute\x20parti'+'cle_vertex'+'Data4:\x20f32'+';\x20\x20\x20\x20//\x20pa'+'rticle\x20id\x0a'+'\x0a//\x20type\x20d'+'epends\x20on\x20'+'useMesh\x20pr'+'operty.\x20St'+'art\x20with\x20X'+'\x20=\x20velocit'+'y.z,\x20Y\x20=\x20p'+'article\x20ID'+'\x20and\x20for\x20m'+'esh\x20partic'+'les\x20procee'+'ds\x20with\x20Z\x20'+'=\x20mesh\x20UV.'+'x,\x20W\x20=\x20mes'+'h\x20UV.y\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_ver'+'texData5:\x20'+'vec2f;\x0a#el'+'se\x0a\x20\x20\x20\x20att'+'ribute\x20par'+'ticle_vert'+'exData5:\x20v'+'ec4f;\x0a#end'+'if\x0a\x0aunifor'+'m\x20matrix_v'+'iewProject'+'ion:\x20mat4x'+'4f;\x0aunifor'+'m\x20matrix_m'+'odel:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20ma'+'trix_norma'+'l:\x20mat3x3f'+';\x0auniform\x20'+'matrix_vie'+'wInverse:\x20'+'mat4x4f;\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20lifet'+'ime:\x20f32;\x0a'+'uniform\x20st'+'retch:\x20f32'+';\x0auniform\x20'+'seed:\x20f32;'+'\x0auniform\x20w'+'rapBounds:'+'\x20vec3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0auni'+'form\x20faceT'+'angent:\x20ve'+'c3f;\x0aunifo'+'rm\x20faceBin'+'orm:\x20vec3f'+';\x0a\x0a#ifdef\x20'+('PARTICLE_G'+'PU\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex0:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x0Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex1'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex1S'+'ampler:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20var\x20inter'+'nalTex2:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex2Samp'+'ler:\x20sampl'+'er;\x0a#endif'+'\x0auniform\x20e'+'mitterPos:'+'\x20vec3f;\x0a\x0av'+'arying\x20tex'+'CoordsAlph'+'aLife:\x20vec'+'4f;\x0a\x0astruc'+'t\x20RotateRe'+'sult\x20{\x0a\x20\x20\x20'+'\x20rotatedVe'+'c:\x20vec2f,\x0a'+'\x20\x20\x20\x20matrix'+':\x20mat2x2f\x0a'+'}\x0a\x0afn\x20rota'+'teWithMatr'+'ix(quadXY:'+'\x20vec2f,\x20pR'+'otation:\x20f'+'32)\x20->\x20Rot'+'ateResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'c\x20=\x20cos(pR'+'otation);\x0a'+'\x20\x20\x20\x20let\x20s\x20'+'=\x20sin(pRot'+'ation);\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'mat2x2f(ve'+'c2f(c,\x20s),'+'\x20vec2f(-s,'+'\x20c));\x0a\x20\x20\x20\x20'+'return\x20Rot'+'ateResult('+'m\x20*\x20quadXY'+',\x20m);\x0a}\x0a\x0a\x0a'+'fn\x20billboa'+'rd(Instanc'+'eCoords:\x20v'+'ec3f,\x20quad'+'XY:\x20vec2f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20customF'+'ace(Instan'+'ceCoords:\x20'+'vec3f,\x20qua'+'dXY:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20pos\x20=\x20uni'+'form.faceT'+'angent\x20*\x20q'+'uadXY.x\x20+\x20'+'uniform.fa'+'ceBinorm\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20safeNor'+'malize(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20l\x20=\x20')+('length(v);'+'\x0a\x20\x20\x20\x20retur'+'n\x20select(v'+',\x20v\x20/\x20l,\x20l'+'\x20>\x201e-06);'+'\x0a}\x0a\x0a@verte'+'x\x0afn\x20verte'+'xMain(inpu'+'t:\x20VertexI'+'nput)\x20->\x20V'+'ertexOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'VertexOutp'+'ut;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20particl'+'ePos\x20=\x20inp'+'ut.particl'+'e_vertexDa'+'ta.xyz;\x0a\x20\x20'+'\x20\x20let\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20let\x20vertP'+'os\x20=\x20input'+'.particle_'+'vertexData'+'3.xyz;\x0a\x20\x20\x20'+'\x20var\x20inVel'+'\x20=\x20vec3f(i'+'nput.parti'+'cle_vertex'+'Data2.w,\x20i'+'nput.parti'+'cle_vertex'+'Data3.w,\x20i'+'nput.parti'+'cle_vertex'+'Data5.x);\x0a'+'\x0a\x20\x20\x20\x20let\x20i'+'d\x20=\x20floor('+'input.part'+'icle_verte'+'xData4);\x0a\x20'+'\x20\x20\x20let\x20rnd'+'Factor\x20=\x20f'+'ract(sin(i'+'d\x20+\x201.0\x20+\x20'+'uniform.se'+'ed));\x0a\x20\x20\x20\x20'+'let\x20rndFac'+'tor3\x20=\x20vec'+'3f(rndFact'+'or,\x20fract('+'rndFactor*'+'10.0),\x20fra'+'ct(rndFact'+'or*100.0))'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20mo'+'delRotatio'+'n\x20=\x20mat3x3'+'f(uniform.'+'matrix_mod'+'el[0].xyz,'+'\x20uniform.m'+'atrix_mode'+'l[1].xyz,\x20'+'uniform.ma'+'trix_model'+'[2].xyz);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'Vel\x20=\x20mode'+'lRotation\x20'+'*\x20inVel;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20let\x20ve'+'locityV\x20=\x20'+'safeNormal'+'ize((mat3x'+'3f(uniform'+'.matrix_vi'+'ew[0].xyz,'+'\x20uniform.m'+'atrix_view'+'[1].xyz,\x20u'+'niform.mat'+'rix_view[2'+'].xyz)\x20*\x20i'+'nVel).xy);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'quadXY\x20=\x20v'+'ertPos.xy;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20USE_MES'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.tex'+'CoordsAlph')+('aLife\x20=\x20ve'+'c4f(input.'+'particle_v'+'ertexData5'+'.zw,\x20input'+'.particle_'+'vertexData'+'2.z,\x20input'+'.particle_'+'vertexData'+'.w);\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'texCoordsA'+'lphaLife\x20='+'\x20vec4f(qua'+'dXY\x20*\x20-0.5'+'\x20+\x200.5,\x20in'+'put.partic'+'le_vertexD'+'ata2.z,\x20in'+'put.partic'+'le_vertexD'+'ata.w);\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20var\x20rot'+'Matrix:\x20ma'+'t2x2f;\x0a\x0a\x20\x20'+'\x20\x20var\x20inAn'+'gle\x20=\x20inpu'+'t.particle'+'_vertexDat'+'a2.x;\x0a\x20\x20\x20\x20'+'var\x20partic'+'lePosMoved'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20meshLoc'+'alPos\x20=\x20in'+'put.partic'+'le_vertexD'+'ata3.xyz;\x0a'),pO='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20inp'+'ut.particl'+'e_vertexDa'+'ta2.y\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20localP'+'os\x20=\x20local'+'Pos\x20+\x20part'+'iclePos;\x0a\x0a'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20vec4f('+'localPos,\x20'+'1.0);\x0a',mO='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20rotate'+'dQuadXY);\x0a',_O='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(rg'+'b,\x20a);\x0a\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a}\x0a',gO='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20sca'+'le\x20*\x20unifo'+'rm.emitter'+'Scale;\x0a\x20\x20\x20'+'\x20localPos\x20'+'=\x20localPos'+'\x20+\x20particl'+'ePos;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20SC'+'REEN_SPACE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(localPo'+'s.x,\x20local'+'Pos.y,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_v'+'iewProject'+'ion\x20*\x20vec4'+'f(localPos'+'.xyz,\x201.0)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a',SO='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20no'+'rmal\x20*\x200.5'+'\x20+\x200.5;\x0a\x20\x20'+'\x20\x20var\x20posN'+'ormal:\x20vec'+'3f\x20=\x20-norm'+'al\x20*\x200.5\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'negNormal\x20'+'=\x20negNorma'+'l\x20*\x20negNor'+'mal;\x0a\x20\x20\x20\x20p'+'osNormal\x20='+'\x20posNormal'+'\x20*\x20posNorm'+'al;\x0a',yO='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20/'+'/\x20XYZ\x20=\x20pa'+'rticle\x20pos'+'ition,\x20W\x20='+'\x20particle\x20'+'ID\x20+\x20rando'+'m\x20factor\x0a#'+'if\x20defined'+'(USE_MESH)'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(USE'+'_MESH_UV)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_uv:'+'\x20vec2f;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'esh\x20UV\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20pa'+'rticle_uv:'+'\x20vec2f\x20=\x20v'+'ec2f(0.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0aunifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0aunif'+'orm\x20matrix'+'_normal:\x20m'+'at3x3f;\x0aun'+'iform\x20matr'+'ix_viewInv'+'erse:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20numPa'+'rticlesPot'+':\x20f32;\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0auni'+'form\x20stret'+'ch:\x20f32;\x0au'+'niform\x20wra'+'pBounds:\x20v'+'ec3f;\x0aunif'+'orm\x20emitte'+'rScale:\x20ve'+'c3f;\x0aunifo'+'rm\x20emitter'+'Pos:\x20vec3f'+';\x0auniform\x20'+'faceTangen'+'t:\x20vec3f;\x0a'+'uniform\x20fa'+'ceBinorm:\x20'+'vec3f;\x0auni'+'form\x20rate:'+'\x20f32;\x0aunif'+'orm\x20rateDi'+'v:\x20f32;\x0aun'+'iform\x20life'+'time:\x20f32;'+'\x0auniform\x20d'+'eltaRandom'+'nessStatic'+':\x20f32;\x0auni'+'form\x20scale'+'DivMult:\x20f'+'32;\x0aunifor'+'m\x20alphaDiv'+'Mult:\x20f32;'+'\x0auniform\x20s'+'eed:\x20f32;\x0a'+'uniform\x20de'+'lta:\x20f32;\x0a'+'\x0avar\x20parti'+('cleTexOUT:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20particle'+'TexOUTSamp'+'ler:\x20sampl'+'er;\x0avar\x20pa'+'rticleTexI'+'N:\x20texture'+'_2d<f32>;\x0a'+'var\x20partic'+'leTexINSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex0:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex1:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x1Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex2'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex2S'+'ampler:\x20sa'+'mpler;\x0a#en'+'dif\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0avarying'+'\x20texCoords'+'AlphaLife:'+'\x20vec4f;\x0a\x0av'+'ar<private'+'>\x20inPos:\x20v'+'ec3f;\x0avar<'+'private>\x20i'+'nVel:\x20vec3'+'f;\x0avar<pri'+'vate>\x20inAn'+'gle:\x20f32;\x0a'+'var<privat'+'e>\x20inShow:'+'\x20bool;\x0avar'+'<private>\x20'+'inLife:\x20f3'+'2;\x0a'),vO='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20ma'+'x(normal,\x20'+'vec3(0.0))'+';\x0a\x20\x20\x20\x20var\x20'+'posNormal:'+'\x20vec3f\x20=\x20m'+'ax(-normal'+',\x20vec3(0.0'+'));\x0a',xO='\x0a\x20\x20\x20\x20let\x20l'+'ight:\x20vec3'+'f\x20=\x20negNor'+'mal.x\x20*\x20un'+'iform.ligh'+'tCube[0]\x20+'+'\x20posNormal'+'.x\x20*\x20unifo'+'rm.lightCu'+'be[1]\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20negNormal'+'.y\x20*\x20unifo'+'rm.lightCu'+'be[2]\x20+\x20po'+'sNormal.y\x20'+'*\x20uniform.'+'lightCube['+'3]\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ne'+'gNormal.z\x20'+'*\x20uniform.'+'lightCube['+'4]\x20+\x20posNo'+'rmal.z\x20*\x20u'+'niform.lig'+'htCube[5];'+'\x0a\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20li'+'ght;\x0a',TO='\x0aparticleP'+'os\x20=\x20(unif'+'orm.matrix'+'_model\x20*\x20v'+'ec4f(parti'+'clePos,\x201.'+'0)).xyz;\x0a',wO='\x0avar\x20local'+'Pos\x20=\x20mesh'+'LocalPos;\x0a'+'let\x20rotRes'+'ultXY\x20=\x20ro'+'tateWithMa'+'trix(local'+'Pos.xy,\x20in'+'Angle);\x0alo'+'calPos\x20=\x20v'+'ec3f(rotRe'+'sultXY.rot'+'atedVec,\x20l'+'ocalPos.z)'+';\x0arotMatri'+'x\x20=\x20rotRes'+'ultXY.matr'+'ix;\x0a\x0alet\x20r'+'otResultYZ'+'\x20=\x20rotateW'+'ithMatrix('+'localPos.y'+'z,\x20inAngle'+');\x0alocalPo'+'s\x20=\x20vec3f('+'localPos.x'+',\x20rotResul'+'tYZ.rotate'+'dVec);\x0arot'+'Matrix\x20=\x20r'+'otResultYZ'+'.matrix;\x0a\x0a'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',EO='\x0aoutput.No'+'rmal\x20=\x20nor'+'malize(loc'+'alPos\x20+\x20un'+'iform.matr'+'ix_viewInv'+'erse[2].xy'+'z);\x0a',bO='\x0a\x20\x20\x20\x20let\x20s'+'ampledNorm'+'al:\x20vec4f\x20'+'=\x20textureS'+'ample(norm'+'alMap,\x20nor'+'malMapSamp'+'ler,\x20vec2f'+'(input.tex'+'CoordsAlph'+'aLife.x,\x201'+'.0\x20-\x20input'+'.texCoords'+'AlphaLife.'+'y));\x0a\x20\x20\x20\x20l'+'et\x20normalM'+'ap:\x20vec3f\x20'+'=\x20normaliz'+'e(sampledN'+'ormal.xyz\x20'+'*\x202.0\x20-\x201.'+'0);\x0a\x0a\x20\x20\x20\x20l'+'et\x20Particl'+'eMat\x20=\x20mat'+'3x3<f32>(P'+'articleMat'+'0,\x20Particl'+'eMat1,\x20Par'+'ticleMat2)'+';\x0a\x20\x20\x20\x20let\x20'+'normal:\x20ve'+'c3f\x20=\x20Part'+'icleMat\x20*\x20'+'normalMap;'+'\x0a',AO='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan2(veloc'+'ityV.x,\x20ve'+'locityV.y)'+';\x0a',CO='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',PO='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20Normal:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20varying\x20'+'ParticleMa'+'t0:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Particle'+'Mat2:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'Cube:\x20arra'+'y<vec3f,\x206'+'>;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vDe'+'pth:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sc'+'reenDepthP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22fogPS\x22\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'ap:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'apSampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'iclePS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'VERTEX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'ormal:\x20vec'+'3f\x20=\x20Norma'+'l;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20MAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_normal'+'MapPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20!=\x20NON'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20HAL'+'F_LAMBERT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_halflambe'+'rtPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_lambertPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+('#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_light'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20BLE'+'ND\x20==\x20NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendNorma'+'lPS\x22\x0a\x20\x20\x20\x20#'+'elif\x20BLEND'+'\x20==\x20ADDITI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendAddPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+'\x20MULTIPLIC'+'ATIVE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_blendMu'+'ltiplyPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_endPS'+'\x22\x0a'),MO='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20anim'+'TexTilesPa'+'rams:\x20vec2'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20a'+'nimTexPara'+'ms:\x20vec4f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20ani'+'mTexIndexP'+'arams:\x20vec'+'2f;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20Partic'+'leMat0:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20Pa'+'rticleMat2'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20==\x20V'+'ERTEX\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Normal:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vDepth:\x20f'+'32;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_in'+'itVS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20PACK8\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleIn'+'putRgba8PS'+'\x22\x20\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x20\x22parti'+'cleInputFl'+'oatPS\x22\x20\x20\x20\x20'+'//\x20why\x20are'+'\x20these\x20PS\x20'+'and\x20not\x20VS'+'?\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'screenDept'+'hPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'articleVS\x22'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x20//\x20PARTI'+'CLE_CPU\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SOFT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22screenDep'+'thPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_c'+'puVS\x22\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_l'+('ocalShiftV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20ANIM'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20A'+'NIMTEX_LOO'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimFram'+'eLoopVS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleAnimFra'+'meClampVS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimTexV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20wrap\x20is\x20'+'not\x20used\x20o'+'n\x20CPU,\x20it\x20'+'was\x20commen'+'ted\x20out.\x20T'+'ODO:\x20inves'+'tigate\x20why'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'WRAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_wrap'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ALIGN_TO'+'_MOTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_point'+'AlongVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20USE_MESH'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_me'+'shVS\x22\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CUSTOM_FA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_custom'+'FaceVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_billboa'+'rdVS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20VERTEX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_norma'+'lVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20NORMA'+'L\x20==\x20MAP\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_TBNV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STRE'+'TCH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_stretchVS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PART'+'ICLE_GPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_endV')+('S\x22\x0a\x20\x20\x20\x20#el'+'se\x20//\x20PART'+'ICLE_CPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_cpu_'+'endVS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softVS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),DO='\x0a\x20\x20\x20\x20var\x20d'+'epth:\x20f32\x20'+'=\x20getLinea'+'rScreenDep'+'thFrag();\x0a'+'\x20\x20\x20\x20var\x20pa'+'rticleDept'+'h:\x20f32\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20var\x20depth'+'Diff:\x20f32\x20'+'=\x20saturate'+'(abs(parti'+'cleDepth\x20-'+'\x20depth)\x20*\x20'+'uniform.so'+'ftening);\x0a'+'\x20\x20\x20\x20a\x20=\x20a\x20'+'*\x20depthDif'+'f;\x0a',IO='\x0a\x20\x20\x20\x20outpu'+'t.vDepth\x20='+'\x20getLinear'+'Depth(loca'+'lPos);\x0a',LO='\x0a\x20\x20\x20\x20let\x20m'+'oveDir:\x20ve'+'c3f\x20=\x20inVe'+'l\x20*\x20unifor'+'m.stretch;'+'\x0a\x20\x20\x20\x20var\x20p'+'osPrev:\x20ve'+'c3f\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20=\x20posPrev'+'\x20+\x20particl'+'ePosMoved;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'viewRotati'+'onTemp:\x20ma'+'t3x3f\x20=\x20ma'+'t3x3f(unif'+'orm.matrix'+'_view[0].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[1].xyz'+',\x20uniform.'+'matrix_vie'+'w[2].xyz);'+'\x0a\x20\x20\x20\x20let\x20c'+'enterToVer'+'texV:\x20vec2'+'f\x20=\x20normal'+'ize((viewR'+'otationTem'+'p\x20*\x20localP'+'os).xy);\x0a\x0a'+'\x20\x20\x20\x20let\x20in'+'terpolatio'+'n:\x20f32\x20=\x20d'+'ot(-veloci'+'tyV,\x20cente'+'rToVertexV'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x0a\x20\x20\x20\x20'+'particlePo'+'s\x20=\x20mix(pa'+'rticlePos,'+'\x20posPrev,\x20'+'interpolat'+'ion);\x0a',RO='\x0a\x20\x20\x20\x20let\x20r'+'ot3\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(r'+'otMatrix[0'+'][0],\x20rotM'+'atrix[1][0'+'],\x200.0),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(rotMatr'+'ix[0][1],\x20'+'rotMatrix['+'1][1],\x200.0'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3f(0.0'+',\x200.0,\x201.0'+')\x0a\x20\x20\x20\x20);\x0a\x0a'+'\x20\x20\x20\x20let\x20vi'+'ewBasis\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20-un'+'iform.matr'+'ix_viewInv'+'erse[0].xy'+'z,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20-uniform.'+'matrix_vie'+'wInverse[1'+'].xyz,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.matrix_'+'viewInvers'+'e[2].xyz\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20tempM'+'at\x20=\x20viewB'+'asis\x20*\x20rot'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20WGSL\x20does'+'\x20not\x20suppo'+'rt\x20matrix\x20'+'varyings,\x20'+'decompose\x20'+'it\x20to\x20vec3'+'s\x0a\x20\x20\x20\x20outp'+'ut.Particl'+'eMat0\x20=\x20te'+'mpMat[0];\x0a'+'\x20\x20\x20\x20output'+'.ParticleM'+'at1\x20=\x20temp'+'Mat[1];\x0a\x20\x20'+'\x20\x20output.P'+'articleMat'+'2\x20=\x20tempMa'+'t[2];\x0a',OO='\x0a\x20\x20\x20\x20let\x20o'+'rigParticl'+'ePos:\x20vec3'+'f\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20particleP'+'os\x20=\x20parti'+'clePos\x20-\x20u'+'niform.mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20=\x20(par'+'ticlePos\x20%'+'\x20uniform.w'+'rapBounds)'+'\x20-\x20uniform'+'.wrapBound'+'s\x20*\x200.5;\x0a\x20'+'\x20\x20\x20particl'+'ePos\x20=\x20par'+'ticlePos\x20+'+'\x20uniform.m'+'atrix_mode'+'l[3].xyz;\x0a'+'\x20\x20\x20\x20partic'+'lePosMoved'+'\x20=\x20particl'+'ePos\x20-\x20ori'+'gParticleP'+'os;\x0a',FO={'particlePS':X3,'particleVS':q3,'particleAnimFrameClampVS':j3,'particleAnimFrameLoopVS':Y3,'particleAnimTexVS':K3,'particleInputFloatPS':Z3,'particleInputRgba8PS':Q3,'particleOutputFloatPS':J3,'particleOutputRgba8PS':eO,'particleUpdaterAABBPS':tO,'particleUpdaterEndPS':sO,'particleUpdaterInitPS':iO,'particleUpdaterNoRespawnPS':rO,'particleUpdaterOnStopPS':aO,'particleUpdaterRespawnPS':nO,'particleUpdaterSpherePS':oO,'particleUpdaterStartPS':lO,'particle_billboardVS':cO,'particle_blendAddPS':hO,'particle_blendMultiplyPS':dO,'particle_blendNormalPS':fO,'particle_cpuVS':uO,'particle_cpu_endVS':pO,'particle_customFaceVS':mO,'particle_endPS':_O,'particle_endVS':gO,'particle_halflambertPS':SO,'particle_initVS':yO,'particle_lambertPS':vO,'particle_lightingPS':xO,'particle_localShiftVS':TO,'particle_meshVS':wO,'particle_normalVS':EO,'particle_normalMapPS':bO,'particle_pointAlongVS':AO,'particle_simulationPS':CO,'particle_shaderPS':PO,'particle_shaderVS':MO,'particle_softPS':DO,'particle_softVS':IO,'particle_stretchVS':LO,'particle_TBNVS':RO,'particle_wrapVS':OO},NO=['enabled','autoPlay','numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','loop','preWarm','lighting','halfLamber'+'t','intensity','depthWrite','noFog','depthSofte'+'ning','sort','blendType','stretch','alignToMot'+'ion','emitterSha'+'pe','emitterExt'+'ents','emitterExt'+'entsInner','emitterRad'+'ius','emitterRad'+'iusInner','initialVel'+'ocity','wrap','wrapBounds','localSpace','screenSpac'+'e','colorMapAs'+'set','normalMapA'+'sset','mesh','meshAsset','renderAsse'+'t','orientatio'+'n','particleNo'+'rmal','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','velocityGr'+'aph','velocityGr'+'aph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2','scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','colorMap','normalMap','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animSpeed','animLoop','layers'];class kO extends ct{constructor(_0x125d32){super(_0x125d32),this['id']='particlesy'+'stem',this['ComponentT'+'ype']=e3,this['DataType']=t3,this['schema']=NO,this['propertyTy'+'pes']={'emitterExtents':'vec3','emitterExtentsInner':'vec3','particleNormal':'vec3','wrapBounds':'vec3','localVelocityGraph':'curveset','localVelocityGraph2':'curveset','velocityGraph':'curveset','velocityGraph2':'curveset','colorGraph':'curveset','colorGraph2':'curveset','alphaGraph':'curve','alphaGraph2':'curve','rotationSpeedGraph':'curve','rotationSpeedGraph2':'curve','radialSpeedGraph':'curve','radialSpeedGraph2':'curve','scaleGraph':'curve','scaleGraph2':'curve'},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this),Pe['get'](_0x125d32['graphicsDe'+'vice'],Fe)['add']($3),Pe['get'](_0x125d32['graphicsDe'+'vice'],it)['add'](FO);}['initialize'+'ComponentD'+'ata'](_0x544f64,_0x4573b5,_0x117315){const _0x5e7ae3={};_0x117315=[];const _0x5d3f45=this['propertyTy'+'pes'];(_0x4573b5['mesh']instanceof pe||typeof _0x4573b5['mesh']=='number')&&(_0x4573b5['meshAsset']=_0x4573b5['mesh'],delete _0x4573b5['mesh']);for(const _0x212fab in _0x4573b5){if(_0x4573b5['hasOwnProp'+'erty'](_0x212fab)&&(_0x117315['push'](_0x212fab),_0x5e7ae3[_0x212fab]=_0x4573b5[_0x212fab]),_0x5d3f45[_0x212fab]==='vec3')Array['isArray'](_0x5e7ae3[_0x212fab])&&(_0x5e7ae3[_0x212fab]=new D(_0x5e7ae3[_0x212fab][0x6dd*-0x1+-0x1364*-0x1+-0x1*0xc87],_0x5e7ae3[_0x212fab][0x8e*0x1b+0x77f*0x1+-0x1678],_0x5e7ae3[_0x212fab][0x16a6+0x3f7+0x8b*-0x31]));else{if(_0x5d3f45[_0x212fab]==='curve'){if(!(_0x5e7ae3[_0x212fab]instanceof qs)){const _0x2fba10=_0x5e7ae3[_0x212fab]['type'];_0x5e7ae3[_0x212fab]=new qs(_0x5e7ae3[_0x212fab]['keys']),_0x5e7ae3[_0x212fab]['type']=_0x2fba10;}}else{if(_0x5d3f45[_0x212fab]==='curveset'&&!(_0x5e7ae3[_0x212fab]instanceof na)){const _0x2c357b=_0x5e7ae3[_0x212fab]['type'];_0x5e7ae3[_0x212fab]=new na(_0x5e7ae3[_0x212fab]['keys']),_0x5e7ae3[_0x212fab]['type']=_0x2c357b;}}}_0x5e7ae3['layers']&&Array['isArray'](_0x5e7ae3['layers'])&&(_0x5e7ae3['layers']=_0x5e7ae3['layers']['slice'](0x1*-0x19cd+0x1*0x511+0x14bc));}super['initialize'+'ComponentD'+'ata'](_0x544f64,_0x5e7ae3,_0x117315);}['cloneCompo'+'nent'](_0x1721f1,_0x4814a2){const _0x109d8d=_0x1721f1['particlesy'+'stem']['data'],_0x41eee5=this['schema'],_0x158a60={};for(let _0x4cc664=-0x1f80+-0x512*0x5+0x38da,_0x9fde3=_0x41eee5['length'];_0x4cc664<_0x9fde3;_0x4cc664++){const _0x490b88=_0x41eee5[_0x4cc664];let _0x5980a3=_0x109d8d[_0x490b88];_0x5980a3 instanceof D||_0x5980a3 instanceof qs||_0x5980a3 instanceof na?(_0x5980a3=_0x5980a3['clone'](),_0x158a60[_0x490b88]=_0x5980a3):_0x490b88==='layers'?_0x158a60['layers']=_0x109d8d['layers']['slice'](0x8*0x40+0x226c+0x7e*-0x4a):_0x5980a3!=null&&(_0x158a60[_0x490b88]=_0x5980a3);}return this['addCompone'+'nt'](_0x4814a2,_0x158a60);}['onUpdate'](_0x3d492b){const _0xedbbe7=this['store'],_0x3f1ca5=this['app']['stats']['particles'],_0x2136af=this['app']['scene']['layers'];for(let _0x12e5be=-0x3b0+0x1d9*0x5+-0x1d*0x31;_0x12e5be<_0x2136af['layerList']['length'];_0x12e5be++)_0x2136af['layerList'][_0x12e5be]['requiresLi'+'ghtCube']=!(-0x45*-0x64+0x1*0x1480+0x1*-0x2f73);for(const _0xd4c449 in _0xedbbe7)if(_0xedbbe7['hasOwnProp'+'erty'](_0xd4c449)){const _0x508fec=_0xedbbe7[_0xd4c449],_0x2f389d=_0x508fec['entity'],_0x42f93e=_0x508fec['data'];if(_0x42f93e['enabled']&&_0x2f389d['enabled']){const _0x4b87a1=_0x2f389d['particlesy'+'stem']['emitter'];if(!(_0x4b87a1!=null&&_0x4b87a1['meshInstan'+'ce']['visible']))continue;if(_0x4b87a1['lighting']){const _0x5e4caf=_0x42f93e['layers'];for(let _0x2c77f1=-0x707+0x192*-0xb+0x184d;_0x2c77f1<_0x5e4caf['length'];_0x2c77f1++){const _0x417a51=_0x2136af['getLayerBy'+'Id'](_0x5e4caf[_0x2c77f1]);_0x417a51&&(_0x417a51['requiresLi'+'ghtCube']=!(0x23b7*0x1+0xcf*0x13+0xcc5*-0x4));}}if(!_0x42f93e['paused']){let _0x4eee0d=0x1a14*-0x1+0x2181+-0x76d;if(_0x4b87a1['simTime']+=_0x3d492b,_0x4b87a1['simTime']>=_0x4b87a1['fixedTimeS'+'tep']&&(_0x4eee0d=Math['floor'](_0x4b87a1['simTime']/_0x4b87a1['fixedTimeS'+'tep']),_0x4b87a1['simTime']-=_0x4eee0d*_0x4b87a1['fixedTimeS'+'tep']),_0x4eee0d){_0x4eee0d=Math['min'](_0x4eee0d,_0x4b87a1['maxSubStep'+'s']);for(let _0x2768f0=0x5*0x791+-0x8e6+0x337*-0x9;_0x2768f0<_0x4eee0d;_0x2768f0++)_0x4b87a1['addTime'](_0x4b87a1['fixedTimeS'+'tep'],!(-0xd*-0xbd+-0xb0e+-0x1*-0x176));_0x3f1ca5['_updatesPe'+'rFrame']+=_0x4eee0d,_0x3f1ca5['_frameTime']+=_0x4b87a1['_addTimeTi'+'me'],_0x4b87a1['_addTimeTi'+'me']=-0x17e7+0x409*0x7+-0x458;}_0x4b87a1['finishFram'+'e']();}}}}['onBeforeRe'+'move'](_0x52b946,_0x36efd6){_0x36efd6['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class UO extends wd{constructor(_0x343a54,_0x43330c){super(),this['skin']=_0x343a54,this['skinInstan'+'ce']=_0x43330c;}}const Gs=class Gs{static['logCachedS'+'kinInstanc'+'es'](){console['log']('CachedSkin'+'Instances'),Gs['_skinInsta'+'nceCache']['forEach']((_0x2ed882,_0x5db79a)=>{console['log'](_0x5db79a['name']+':\x20Array('+_0x2ed882['length']+')');for(let _0x518251=0x17fd+0x5*-0xf1+0x269*-0x8;_0x518251<_0x2ed882['length'];_0x518251++)console['log']('\x20\x20'+_0x518251+(':\x20RefCount'+'\x20')+_0x2ed882[_0x518251]['refCount']);});}static['createCach'+'edSkinInst'+'ance'](_0x124786,_0x4499c5,_0x2501dc){let _0x18c8e8=Gs['getCachedS'+'kinInstanc'+'e'](_0x124786,_0x4499c5);return _0x18c8e8||(_0x18c8e8=new Ol(_0x124786),_0x18c8e8['resolve'](_0x4499c5,_0x2501dc),Gs['addCachedS'+'kinInstanc'+'e'](_0x124786,_0x4499c5,_0x18c8e8)),_0x18c8e8;}static['getCachedS'+'kinInstanc'+'e'](_0x34e5bb,_0xca915c){let _0x1b5a00=null;const _0x442303=Gs['_skinInsta'+'nceCache']['get'](_0xca915c);if(_0x442303){const _0x4e0f88=_0x442303['find'](_0x1ab8ab=>_0x1ab8ab['skin']===_0x34e5bb);_0x4e0f88&&(_0x4e0f88['incRefCoun'+'t'](),_0x1b5a00=_0x4e0f88['skinInstan'+'ce']);}return _0x1b5a00;}static['addCachedS'+'kinInstanc'+'e'](_0x582270,_0x475f58,_0x415fb8){let _0x15e133=Gs['_skinInsta'+'nceCache']['get'](_0x475f58);_0x15e133||(_0x15e133=[],Gs['_skinInsta'+'nceCache']['set'](_0x475f58,_0x15e133));let _0x581116=_0x15e133['find'](_0x2df0da=>_0x2df0da['skin']===_0x582270);_0x581116||(_0x581116=new UO(_0x582270,_0x415fb8),_0x15e133['push'](_0x581116)),_0x581116['incRefCoun'+'t']();}static['removeCach'+'edSkinInst'+'ance'](_0x5c7a21){if(_0x5c7a21){const _0x1980e1=_0x5c7a21['rootBone'];if(_0x1980e1){const _0x2d249f=Gs['_skinInsta'+'nceCache']['get'](_0x1980e1);if(_0x2d249f){const _0x55357e=_0x2d249f['findIndex'](_0x1db921=>_0x1db921['skinInstan'+'ce']===_0x5c7a21);if(_0x55357e>=0x262d+-0x4ab+-0x2182){const _0x3e3f33=_0x2d249f[_0x55357e];_0x3e3f33['decRefCoun'+'t'](),_0x3e3f33['refCount']===-0x1f8b+0x59*-0x51+-0x1*-0x3bb4&&(_0x2d249f['splice'](_0x55357e,0x1d9f+0x2276+-0x6*0xaae),_0x2d249f['length']||Gs['_skinInsta'+'nceCache']['delete'](_0x1980e1),_0x5c7a21&&(_0x5c7a21['destroy'](),_0x3e3f33['skinInstan'+'ce']=null));}}}}}};h(Gs,'_skinInsta'+'nceCache',new Map());let _l=Gs;class gl{constructor(_0x32d817,_0x38047c,_0x3ab812,_0x27a24b,_0x419e01){h(this,'_evtLoadBy'+'Id',null),h(this,'_evtUnload'+'ById',null),h(this,'_evtAddByI'+'d',null),h(this,'_evtRemove'+'ById',null),h(this,'_evtLoadBy'+'Url',null),h(this,'_evtAddByU'+'rl',null),h(this,'_evtRemove'+'ByUrl',null),(this['propertyNa'+'me']=_0x32d817,this['parent']=_0x38047c,this['_scope']=_0x419e01,this['_registry']=_0x3ab812,this['id']=null,this['url']=null,this['asset']=null,this['_onAssetLo'+'ad']=_0x27a24b['load'],this['_onAssetAd'+'d']=_0x27a24b['add'],this['_onAssetRe'+'move']=_0x27a24b['remove'],this['_onAssetUn'+'load']=_0x27a24b['unload']);}set['id'](_0xe92140){if(this['url'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_id']=_0xe92140,this['asset']=this['_registry']['get'](this['_id']),this['_bind']();}get['id'](){return this['_id'];}set['url'](_0x25fb98){if(this['id'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_url']=_0x25fb98,this['asset']=this['_registry']['getByUrl'](this['_url']),this['_bind']();}get['url'](){return this['_url'];}['_bind'](){this['id']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Id']=this['_registry']['on']('load:'+this['id'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByI'+'d']=this['_registry']['once']('add:'+this['id'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ById']=this['_registry']['on']('remove:'+this['id'],this['_onRemove'],this)),this['_onAssetUn'+'load']&&(this['_evtUnload'+'ById']=this['_registry']['on']('unload:'+this['id'],this['_onUnload'],this))),this['url']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Url']=this['_registry']['on']('load:url:'+this['url'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByU'+'rl']=this['_registry']['once']('add:url:'+this['url'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ByUrl']=this['_registry']['on']('remove:url'+':'+this['url'],this['_onRemove'],this)));}['_unbind'](){var _0x3ba5de,_0x180c7d,_0x59ebdb,_0xfbba8a,_0x11b51e,_0x4cd788,_0x53d0b9;this['id']&&((_0x3ba5de=this['_evtLoadBy'+'Id'])==null||_0x3ba5de['off'](),this['_evtLoadBy'+'Id']=null,(_0x180c7d=this['_evtAddByI'+'d'])==null||_0x180c7d['off'](),this['_evtAddByI'+'d']=null,(_0x59ebdb=this['_evtRemove'+'ById'])==null||_0x59ebdb['off'](),this['_evtRemove'+'ById']=null,(_0xfbba8a=this['_evtUnload'+'ById'])==null||_0xfbba8a['off'](),this['_evtUnload'+'ById']=null),this['url']&&((_0x11b51e=this['_evtLoadBy'+'Url'])==null||_0x11b51e['off'](),this['_evtLoadBy'+'Url']=null,(_0x4cd788=this['_evtAddByU'+'rl'])==null||_0x4cd788['off'](),this['_evtAddByU'+'rl']=null,(_0x53d0b9=this['_evtRemove'+'ByUrl'])==null||_0x53d0b9['off'](),this['_evtRemove'+'ByUrl']=null);}['_onLoad'](_0x16563f){this['_onAssetLo'+'ad']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x16563f);}['_onAdd'](_0x34f579){this['asset']=_0x34f579,this['_onAssetAd'+'d']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x34f579);}['_onRemove'](_0x583274){this['_onAssetRe'+'move']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x583274),this['asset']=null;}['_onUnload'](_0x6b6014){this['_onAssetUn'+'load']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x6b6014);}}class n0 extends we{constructor(_0xd5c7e2,_0x22d674){super(_0xd5c7e2,_0x22d674),h(this,'_type','asset'),h(this,'_castShado'+'ws',!(0x7*0x25+0x14ad+-0x15b0)),h(this,'_receiveSh'+'adows',!(-0x1*-0x156a+-0x1d09+0x79f*0x1)),h(this,'_castShado'+'wsLightmap',!(-0x10fd+-0x1d58+-0x199*-0x1d)),h(this,'_lightmapp'+'ed',!(0x4bd+-0x1*0x377+-0x145)),h(this,'_lightmapS'+'izeMultipl'+'ier',-0x19f4+-0x1*0x405+-0x1dfa*-0x1),h(this,'isStatic',!(-0xc8*-0x7+-0x1*0xcc8+0x751)),h(this,'_batchGrou'+'pId',-(-0x11*0x1de+-0x24ed+0x44ac)),h(this,'_layers',[er]),h(this,'_renderSty'+'le',un),h(this,'_meshInsta'+'nces',[]),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_assetRefe'+'rence'),h(this,'_materialR'+'eferences',[]),h(this,'_material'),h(this,'_rootBone',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['_assetRefe'+'rence']=new gl('asset',this,_0xd5c7e2['app']['assets'],{'add':this['_onRenderA'+'ssetAdded'],'load':this['_onRenderA'+'ssetLoad'],'remove':this['_onRenderA'+'ssetRemove'],'unload':this['_onRenderA'+'ssetUnload']},this),this['_material']=_0xd5c7e2['defaultMat'+'erial'],_0x22d674['on']('remove',this['onRemoveCh'+'ild'],this),_0x22d674['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x22d674['on']('insert',this['onInsertCh'+'ild'],this),_0x22d674['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['renderStyl'+'e'](_0x577dc2){this['_renderSty'+'le']!==_0x577dc2&&(this['_renderSty'+'le']=_0x577dc2,He['_prepareRe'+'nderStyleF'+'orArray'](this['_meshInsta'+'nces'],_0x577dc2));}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['customAabb'](_0x1c26e6){this['_customAab'+'b']=_0x1c26e6;const _0x4f1ac9=this['_meshInsta'+'nces'];if(_0x4f1ac9){for(let _0x2e5d27=-0xd*-0x269+0x19f*-0x3+-0x1a78;_0x2e5d27<_0x4f1ac9['length'];_0x2e5d27++)_0x4f1ac9[_0x2e5d27]['setCustomA'+'abb'](this['_customAab'+'b']);}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x3602eb){if(this['_type']!==_0x3602eb&&(this['_area']=null,this['_type']=_0x3602eb,this['destroyMes'+'hInstances'](),_0x3602eb!=='asset')){let _0x189807=this['_material'];(!_0x189807||_0x189807===this['system']['defaultMat'+'erial'])&&(_0x189807=this['_materialR'+'eferences'][0xb35+0x2*-0x7db+0x1*0x481]&&this['_materialR'+'eferences'][0x9ff+0xa3*0x3+-0xbe8]['asset']&&this['_materialR'+'eferences'][0x183*-0x7+0x6d*0x3b+-0xe8a]['asset']['resource']);const _0x5cdab5=r0(this['system']['app']['graphicsDe'+'vice'],_0x3602eb);this['_area']=_0x5cdab5['area'],this['meshInstan'+'ces']=[new He(_0x5cdab5['mesh'],_0x189807||this['system']['defaultMat'+'erial'],this['entity'])];}}get['type'](){return this['_type'];}set['meshInstan'+'ces'](_0x5dfdaf){if(w['assert'](Array['isArray'](_0x5dfdaf),'MeshInstan'+'ces\x20set\x20to'+'\x20a\x20Render\x20'+'component\x20'+'must\x20be\x20an'+'\x20array.'),this['destroyMes'+'hInstances'](),this['_meshInsta'+'nces']=_0x5dfdaf,this['_meshInsta'+'nces']){const _0x17fac5=this['_meshInsta'+'nces'];for(let _0x2f926e=-0x97*-0x12+-0xf03+0x465*0x1;_0x2f926e<_0x17fac5['length'];_0x2f926e++)_0x17fac5[_0x2f926e]['node']||(_0x17fac5[_0x2f926e]['node']=this['entity']),_0x17fac5[_0x2f926e]['castShadow']=this['_castShado'+'ws'],_0x17fac5[_0x2f926e]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x17fac5[_0x2f926e]['renderStyl'+'e']=this['_renderSty'+'le'],_0x17fac5[_0x2f926e]['setLightma'+'pped'](this['_lightmapp'+'ed']),_0x17fac5[_0x2f926e]['setCustomA'+'abb'](this['_customAab'+'b']);this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['meshInstan'+'ces'](){return this['_meshInsta'+'nces'];}set['lightmappe'+'d'](_0x4b3fc2){if(_0x4b3fc2!==this['_lightmapp'+'ed']){this['_lightmapp'+'ed']=_0x4b3fc2;const _0x324497=this['_meshInsta'+'nces'];if(_0x324497){for(let _0x5010e4=0x210d+-0x1161*0x1+0x76*-0x22;_0x5010e4<_0x324497['length'];_0x5010e4++)_0x324497[_0x5010e4]['setLightma'+'pped'](_0x4b3fc2);}}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0xd4c95f){if(this['_castShado'+'ws']!==_0xd4c95f){const _0x2898d8=this['_meshInsta'+'nces'];if(_0x2898d8){const _0x505004=this['layers'],_0x5e7b80=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0xd4c95f)for(let _0xd99c7d=-0x14*0x1bb+-0x7ac+0x21*0x148;_0xd99c7d<_0x505004['length'];_0xd99c7d++){const _0x19132f=_0x5e7b80['layers']['getLayerBy'+'Id'](this['layers'][_0xd99c7d]);_0x19132f&&_0x19132f['removeShad'+'owCasters'](_0x2898d8);}for(let _0x666bed=-0x4d3+-0x59*-0x43+-0x1278;_0x666bed<_0x2898d8['length'];_0x666bed++)_0x2898d8[_0x666bed]['castShadow']=_0xd4c95f;if(!this['_castShado'+'ws']&&_0xd4c95f)for(let _0x2c55ce=0x812+0x2029+-0x283b;_0x2c55ce<_0x505004['length'];_0x2c55ce++){const _0x3cac15=_0x5e7b80['layers']['getLayerBy'+'Id'](_0x505004[_0x2c55ce]);_0x3cac15&&_0x3cac15['addShadowC'+'asters'](_0x2898d8);}}this['_castShado'+'ws']=_0xd4c95f;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x18107c){if(this['_receiveSh'+'adows']!==_0x18107c){this['_receiveSh'+'adows']=_0x18107c;const _0x5009b2=this['_meshInsta'+'nces'];if(_0x5009b2){for(let _0x3242c0=-0x1c72+-0x26c7+0x4339;_0x3242c0<_0x5009b2['length'];_0x3242c0++)_0x5009b2[_0x3242c0]['receiveSha'+'dow']=_0x18107c;}}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x2e7692){this['_castShado'+'wsLightmap']=_0x2e7692;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x351c4f){this['_lightmapS'+'izeMultipl'+'ier']=_0x351c4f;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x414671){const _0x1d25b2=this['system']['app']['scene']['layers'];let _0x552b5e;if(this['_meshInsta'+'nces']){for(let _0x26407d=-0x1*0xfcd+0x1096+-0x3*0x43;_0x26407d<this['_layers']['length'];_0x26407d++)_0x552b5e=_0x1d25b2['getLayerBy'+'Id'](this['_layers'][_0x26407d]),_0x552b5e&&_0x552b5e['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}this['_layers']['length']=0x35*0x9d+0x236a+0x43eb*-0x1;for(let _0x1b8219=-0x1*0x25e1+0x321*0x5+-0x1*-0x163c;_0x1b8219<_0x414671['length'];_0x1b8219++)this['_layers'][_0x1b8219]=_0x414671[_0x1b8219];if(!(!this['enabled']||!this['entity']['enabled']||!this['_meshInsta'+'nces'])){for(let _0x374a1a=0x1f6b*-0x1+0x11e0+0xd8b;_0x374a1a<this['_layers']['length'];_0x374a1a++)_0x552b5e=_0x1d25b2['getLayerBy'+'Id'](this['_layers'][_0x374a1a]),_0x552b5e&&_0x552b5e['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0xbf026e){var _0x390f2e,_0x43452d;this['_batchGrou'+'pId']!==_0xbf026e&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0x1*-0xc29+-0x2*-0x606+0x1*0x1d&&((_0x390f2e=this['system']['app']['batcher'])==null||_0x390f2e['remove'](St['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0xbf026e>=0x19c0+0x20d2*-0x1+0x2*0x389&&((_0x43452d=this['system']['app']['batcher'])==null||_0x43452d['insert'](St['RENDER'],_0xbf026e,this['entity'])),_0xbf026e<-0x4b9+0xd7+0x3e2&&this['_batchGrou'+'pId']>=0x16ea*-0x1+0x5e7*-0x1+-0x1cd1*-0x1&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s'](),this['_batchGrou'+'pId']=_0xbf026e);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['material'](_0x5842c3){if(this['_material']!==_0x5842c3&&(this['_material']=_0x5842c3,this['_meshInsta'+'nces']&&this['_type']!=='asset')){for(let _0x2a4ec4=0x9*0x38d+-0x19ae+-0x647;_0x2a4ec4<this['_meshInsta'+'nces']['length'];_0x2a4ec4++)this['_meshInsta'+'nces'][_0x2a4ec4]['material']=_0x5842c3;}}get['material'](){return this['_material'];}set['materialAs'+'sets'](_0x5195a1=[]){if(this['_materialR'+'eferences']['length']>_0x5195a1['length']){for(let _0x3d7e3f=_0x5195a1['length'];_0x3d7e3f<this['_materialR'+'eferences']['length'];_0x3d7e3f++)this['_materialR'+'eferences'][_0x3d7e3f]['id']=null;this['_materialR'+'eferences']['length']=_0x5195a1['length'];}for(let _0x5570e2=0x1581+0x761+-0xe71*0x2;_0x5570e2<_0x5195a1['length'];_0x5570e2++)if(this['_materialR'+'eferences'][_0x5570e2]||this['_materialR'+'eferences']['push'](new gl(_0x5570e2,this,this['system']['app']['assets'],{'add':this['_onMateria'+'lAdded'],'load':this['_onMateria'+'lLoad'],'remove':this['_onMateria'+'lRemove'],'unload':this['_onMateria'+'lUnload']},this)),_0x5195a1[_0x5570e2]){const _0x74d4b1=_0x5195a1[_0x5570e2]instanceof pe?_0x5195a1[_0x5570e2]['id']:_0x5195a1[_0x5570e2];this['_materialR'+'eferences'][_0x5570e2]['id']!==_0x74d4b1&&(this['_materialR'+'eferences'][_0x5570e2]['id']=_0x74d4b1),this['_materialR'+'eferences'][_0x5570e2]['asset']&&this['_onMateria'+'lAdded'](_0x5570e2,this,this['_materialR'+'eferences'][_0x5570e2]['asset']);}else this['_materialR'+'eferences'][_0x5570e2]['id']=null,this['_meshInsta'+'nces'][_0x5570e2]&&(this['_meshInsta'+'nces'][_0x5570e2]['material']=this['system']['defaultMat'+'erial']);}get['materialAs'+'sets'](){return this['_materialR'+'eferences']['map'](_0x13255d=>_0x13255d['id']);}set['asset'](_0x4f65e8){const _0x44faac=_0x4f65e8 instanceof pe?_0x4f65e8['id']:_0x4f65e8;this['_assetRefe'+'rence']['id']!==_0x44faac&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onRenderA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x44faac,this['_assetRefe'+'rence']['asset']&&this['_onRenderA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['assignAsse'+'t'](_0x2b525f){const _0x194062=_0x2b525f instanceof pe?_0x2b525f['id']:_0x2b525f;this['_assetRefe'+'rence']['id']=_0x194062;}set['rootBone'](_0x3f45e9){if(this['_rootBone']!==_0x3f45e9){const _0x50edb0=typeof _0x3f45e9=='string';if(this['_rootBone']&&_0x50edb0&&this['_rootBone']['getGuid']()===_0x3f45e9)return;this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x3f45e9 instanceof Ie?this['_rootBone']=_0x3f45e9:_0x50edb0?(this['_rootBone']=this['system']['app']['getEntityF'+'romIndex'](_0x3f45e9)||null,this['_rootBone']||w['warn']('Failed\x20to\x20'+'find\x20rootB'+'one\x20Entity'+'\x20by\x20GUID')):this['_rootBone']=null,this['_rootBone']&&this['_cloneSkin'+'Instances']();}}get['rootBone'](){return this['_rootBone'];}['destroyMes'+'hInstances'](){const _0x708529=this['_meshInsta'+'nces'];if(_0x708529){this['removeFrom'+'Layers'](),this['_clearSkin'+'Instances']();for(let _0x47e2f1=0xce3*-0x1+-0x4c1*-0x2+0x361;_0x47e2f1<_0x708529['length'];_0x47e2f1++)_0x708529[_0x47e2f1]['destroy']();this['_meshInsta'+'nces']['length']=0x8*0x26b+0x126f+-0x25c7*0x1;}}['addToLayer'+'s'](){const _0x3ae17d=this['system']['app']['scene']['layers'];for(let _0x365c64=0x1899+-0x1a6*-0x9+-0x276f*0x1;_0x365c64<this['_layers']['length'];_0x365c64++){const _0x53524f=_0x3ae17d['getLayerBy'+'Id'](this['_layers'][_0x365c64]);_0x53524f&&_0x53524f['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}['removeFrom'+'Layers'](){if(this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']){const _0x5794d5=this['system']['app']['scene']['layers'];for(let _0x2b8e8c=-0x21b9+0x1a4f+0x76a;_0x2b8e8c<this['_layers']['length'];_0x2b8e8c++){const _0x2d0146=_0x5794d5['getLayerBy'+'Id'](this['_layers'][_0x2b8e8c]);_0x2d0146&&_0x2d0146['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_meshInsta'+'nces']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyMes'+'hInstances'](),this['asset']=null,this['materialAs'+'set']=null,this['_assetRefe'+'rence']['id']=null;for(let _0x4568a5=-0x1c40+-0x46*0x6d+0x3a0e;_0x4568a5<this['_materialR'+'eferences']['length'];_0x4568a5++)this['_materialR'+'eferences'][_0x4568a5]['id']=null;this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x19d2a7,_0x5e37b1){this['addToLayer'+'s'](),_0x19d2a7['off']('add',this['onLayerAdd'+'ed'],this),_0x19d2a7['off']('remove',this['onLayerRem'+'oved'],this),_0x5e37b1['on']('add',this['onLayerAdd'+'ed'],this),_0x5e37b1['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x643606){this['layers']['indexOf'](_0x643606['id'])<0x69b+0x690+-0xd2b*0x1||_0x643606['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}['onLayerRem'+'oved'](_0x42d7e0){this['layers']['indexOf'](_0x42d7e0['id'])<0x5*-0x374+0x2704+0x15c*-0x10||_0x42d7e0['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}['onEnable'](){var _0x1f447d;const _0x39dd83=this['system']['app'],_0x1bb939=_0x39dd83['scene'],_0x562cf6=_0x1bb939['layers'];this['_rootBone']&&this['_cloneSkin'+'Instances'](),this['_evtLayers'+'Changed']=_0x1bb939['on']('set:layers',this['onLayersCh'+'anged'],this),_0x562cf6&&(this['_evtLayerA'+'dded']=_0x562cf6['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x562cf6['on']('remove',this['onLayerRem'+'oved'],this));const _0x213936=this['_type']==='asset';this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']?this['addToLayer'+'s']():_0x213936&&this['asset']&&this['_onRenderA'+'ssetAdded']();for(let _0x2be760=0x2024+-0x4*-0x892+-0x9c*0x6d;_0x2be760<this['_materialR'+'eferences']['length'];_0x2be760++)this['_materialR'+'eferences'][_0x2be760]['asset']&&this['system']['app']['assets']['load'](this['_materialR'+'eferences'][_0x2be760]['asset']);this['_batchGrou'+'pId']>=-0x1*-0xf16+0x252*-0xd+0xf14&&((_0x1f447d=_0x39dd83['batcher'])==null||_0x1f447d['insert'](St['RENDER'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x1d78c8,_0x7ef706,_0x5b2e91,_0x22402d;const _0x5c2e0c=this['system']['app'],_0x23962c=_0x5c2e0c['scene']['layers'];(_0x1d78c8=this['_evtLayers'+'Changed'])==null||_0x1d78c8['off'](),this['_evtLayers'+'Changed']=null,this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x23962c&&((_0x7ef706=this['_evtLayerA'+'dded'])==null||_0x7ef706['off'](),this['_evtLayerA'+'dded']=null,(_0x5b2e91=this['_evtLayerR'+'emoved'])==null||_0x5b2e91['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=-0x75b*0x1+-0x21a1+0x3d*0xac&&((_0x22402d=_0x5c2e0c['batcher'])==null||_0x22402d['remove'](St['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['removeFrom'+'Layers']();}['hide'](){if(this['_meshInsta'+'nces']){for(let _0x1ea76f=-0x7f*0x1b+-0xa57+0x17bc;_0x1ea76f<this['_meshInsta'+'nces']['length'];_0x1ea76f++)this['_meshInsta'+'nces'][_0x1ea76f]['visible']=!(-0x16fc+-0x1ca9+-0x33a6*-0x1);}}['show'](){if(this['_meshInsta'+'nces']){for(let _0x4307a6=0x1b59*-0x1+0x1*-0x8eb+0x2444;_0x4307a6<this['_meshInsta'+'nces']['length'];_0x4307a6++)this['_meshInsta'+'nces'][_0x4307a6]['visible']=!(0x2369+-0xb2f+-0x183a);}}['_onRenderA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onRenderA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onRenderA'+'ssetLoad'](){var _0x39bc0f;if(this['destroyMes'+'hInstances'](),this['_assetRefe'+'rence']['asset']){const _0x38b966=this['_assetRefe'+'rence']['asset']['resource'];(_0x39bc0f=this['_evtSetMes'+'hes'])==null||_0x39bc0f['off'](),this['_evtSetMes'+'hes']=_0x38b966['on']('set:meshes',this['_onSetMesh'+'es'],this),_0x38b966['meshes']&&this['_onSetMesh'+'es'](_0x38b966['meshes']);}}['_onSetMesh'+'es'](_0xd832a1){this['_cloneMesh'+'es'](_0xd832a1);}['_clearSkin'+'Instances'](){for(let _0x3f5b45=0x17*0x11f+0x4a3*-0x1+-0x1*0x1526;_0x3f5b45<this['_meshInsta'+'nces']['length'];_0x3f5b45++){const _0x230527=this['_meshInsta'+'nces'][_0x3f5b45];_l['removeCach'+'edSkinInst'+'ance'](_0x230527['skinInstan'+'ce']),_0x230527['skinInstan'+'ce']=null;}}['_cloneSkin'+'Instances'](){if(this['_meshInsta'+'nces']['length']&&this['_rootBone']instanceof Ie)for(let _0x4353ec=-0x6f7*-0x5+0x113a+-0x29*0x145;_0x4353ec<this['_meshInsta'+'nces']['length'];_0x4353ec++){const _0x1b75cb=this['_meshInsta'+'nces'][_0x4353ec],_0x308628=_0x1b75cb['mesh'];_0x308628['skin']&&!_0x1b75cb['skinInstan'+'ce']&&(_0x1b75cb['skinInstan'+'ce']=_l['createCach'+'edSkinInst'+'ance'](_0x308628['skin'],this['_rootBone'],this['entity']));}}['_cloneMesh'+'es'](_0x239044){if(_0x239044&&_0x239044['length']){const _0x5ee344=[];for(let _0x40d81f=-0x1*0x2a2+-0x18c1+0x1b63;_0x40d81f<_0x239044['length'];_0x40d81f++){const _0xda84c4=_0x239044[_0x40d81f],_0x5e504c=this['_materialR'+'eferences'][_0x40d81f]&&this['_materialR'+'eferences'][_0x40d81f]['asset']&&this['_materialR'+'eferences'][_0x40d81f]['asset']['resource'],_0x2b844c=new He(_0xda84c4,_0x5e504c||this['system']['defaultMat'+'erial'],this['entity']);_0x5ee344['push'](_0x2b844c),_0xda84c4['morph']&&(_0x2b844c['morphInsta'+'nce']=new xa(_0xda84c4['morph']));}this['meshInstan'+'ces']=_0x5ee344,this['_cloneSkin'+'Instances']();}}['_onRenderA'+'ssetUnload'](){this['_type']==='asset'&&this['destroyMes'+'hInstances']();}['_onRenderA'+'ssetRemove'](){var _0x5c66ac;(_0x5c66ac=this['_evtSetMes'+'hes'])==null||_0x5c66ac['off'](),this['_evtSetMes'+'hes']=null,this['_onRenderA'+'ssetUnload']();}['_onMateria'+'lAdded'](_0x2285f9,_0x55725f,_0x545b5b){_0x545b5b['resource']?this['_onMateria'+'lLoad'](_0x2285f9,_0x55725f,_0x545b5b):this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](_0x545b5b);}['_updateMai'+'nMaterial'](_0x1b5d55,_0x30756d){_0x1b5d55===0x1*0x466+-0x118e+-0x34a*-0x4&&(this['material']=_0x30756d);}['_onMateria'+'lLoad'](_0xbc4cd6,_0x9e8733,_0xb5cdd5){this['_meshInsta'+'nces'][_0xbc4cd6]&&(this['_meshInsta'+'nces'][_0xbc4cd6]['material']=_0xb5cdd5['resource']),this['_updateMai'+'nMaterial'](_0xbc4cd6,_0xb5cdd5['resource']);}['_onMateria'+'lRemove'](_0x14604e,_0xd0b96a,_0x57977c){this['_meshInsta'+'nces'][_0x14604e]&&(this['_meshInsta'+'nces'][_0x14604e]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x14604e,this['system']['defaultMat'+'erial']);}['_onMateria'+'lUnload'](_0x17738f,_0x4782f8,_0x17502d){this['_meshInsta'+'nces'][_0x17738f]&&(this['_meshInsta'+'nces'][_0x17738f]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x17738f,this['system']['defaultMat'+'erial']);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x121e9b,_0x1d90d2){_0x121e9b['rootBone']&&(this['rootBone']=_0x1d90d2[_0x121e9b['rootBone']['getGuid']()]);}}class BO{constructor(){this['enabled']=!(0xf73+-0x3fb*-0x3+-0x1b64);}}const ku=['enabled'],Gr=['material','meshInstan'+'ces','asset','materialAs'+'sets','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','renderStyl'+'e','type','layers','isStatic','batchGroup'+'Id','rootBone'];class zO extends ct{constructor(_0x5d3a8b){super(_0x5d3a8b),this['id']='render',this['ComponentT'+'ype']=n0,this['DataType']=BO,this['schema']=ku,this['defaultMat'+'erial']=Qn(_0x5d3a8b['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x5849a1,_0x2ee1f8,_0x5e9b6b){(_0x2ee1f8['batchGroup'+'Id']===null||_0x2ee1f8['batchGroup'+'Id']===void(0xe7a*-0x1+0xcc+0x22*0x67))&&(_0x2ee1f8['batchGroup'+'Id']=-(-0x167b*-0x1+0xc*-0x29f+0x8fa)),_0x2ee1f8['layers']&&_0x2ee1f8['layers']['length']&&(_0x2ee1f8['layers']=_0x2ee1f8['layers']['slice'](0x212e+0x2097+-0x41c5));for(let _0x3fdac4=0x106d+0xb*-0x1f3+0x504;_0x3fdac4<Gr['length'];_0x3fdac4++)_0x2ee1f8['hasOwnProp'+'erty'](Gr[_0x3fdac4])&&(_0x5849a1[Gr[_0x3fdac4]]=_0x2ee1f8[Gr[_0x3fdac4]]);_0x2ee1f8['aabbCenter']&&_0x2ee1f8['aabbHalfEx'+'tents']&&(_0x5849a1['customAabb']=new De(new D(_0x2ee1f8['aabbCenter']),new D(_0x2ee1f8['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x5849a1,_0x2ee1f8,ku);}['cloneCompo'+'nent'](_0x3148fb,_0x2fc91d){const _0x1596b4={};for(let _0x4f75bb=0x1290+0x21bd+0x3*-0x116f;_0x4f75bb<Gr['length'];_0x4f75bb++)_0x1596b4[Gr[_0x4f75bb]]=_0x3148fb['render'][Gr[_0x4f75bb]];_0x1596b4['enabled']=_0x3148fb['render']['enabled'],delete _0x1596b4['meshInstan'+'ces'];const _0x3ae797=this['addCompone'+'nt'](_0x2fc91d,_0x1596b4),_0x2f9b23=_0x3148fb['render']['meshInstan'+'ces'],_0x6d46c7=_0x2f9b23['map'](_0x81c6dd=>_0x81c6dd['mesh']);_0x3ae797['_onSetMesh'+'es'](_0x6d46c7);for(let _0x283a5d=-0x15d*0x6+0x81c+-0x2*-0x9;_0x283a5d<_0x2f9b23['length'];_0x283a5d++)_0x3ae797['meshInstan'+'ces'][_0x283a5d]['material']=_0x2f9b23[_0x283a5d]['material'];return _0x3148fb['render']['customAabb']&&(_0x3ae797['customAabb']=_0x3148fb['render']['customAabb']['clone']()),_0x3ae797;}['onRemove'](_0x211be4,_0x4f2390){_0x4f2390['onRemove']();}}we['_buildAcce'+'ssors'](n0['prototype'],ku);class bf{constructor(_0x5565bc,_0x3d7545){h(this,'_construct'+'or'),h(this,'_pool',[]),h(this,'_count',-0x275*-0x2+0x231d+0x1*-0x2807),(this['_construct'+'or']=_0x5565bc,this['_resize'](_0x3d7545));}['_resize'](_0x31893c){if(_0x31893c>this['_pool']['length']){for(let _0x3c9aee=this['_pool']['length'];_0x3c9aee<_0x31893c;_0x3c9aee++)this['_pool'][_0x3c9aee]=new this['_construct'+'or']();}}['allocate'](){return this['_count']>=this['_pool']['length']&&this['_resize'](this['_pool']['length']*(-0x88a+0xba*-0x9+0xf16)),this['_pool'][this['_count']++];}['freeAll'](){this['_count']=-0xf*-0xd4+0x4*0x8c7+0x68*-0x75;}}let cs,Re,Bs,Ka;const VO=new le(),GO=new le(),Pc=new D();class bs extends we{constructor(){super(...arguments),h(this,'_angularDa'+'mping',-0x1a67+0x47*-0x37+0x29a8),h(this,'_angularFa'+'ctor',new D(-0x1271+-0x11a5*0x2+-0xd6f*-0x4,-0x2*-0x746+-0x1*-0x2231+0x2*-0x185e,-0xa8b*0x2+0x7fe+0xd19)),h(this,'_angularVe'+'locity',new D()),h(this,'_body',null),h(this,'_friction',0x16*-0x1a2+-0x2*0x8cf+0x358a+0.5),h(this,'_group',Gg),h(this,'_linearDam'+'ping',-0x1*0x14db+-0xfa5+0x2480),h(this,'_linearFac'+'tor',new D(-0x1f7+-0x19d0+0x1*0x1bc8,0x2212+-0x13e+-0x20d3,0x1*-0x17bf+0x20*0x8e+0x600)),h(this,'_linearVel'+'ocity',new D()),h(this,'_mask',Mu),h(this,'_mass',-0x1d4e+0xea+0x1c65),h(this,'_restituti'+'on',0x2264+0xaf6*0x2+-0x3850),h(this,'_rollingFr'+'iction',0x736+0x15*-0x33+-0x307),h(this,'_simulatio'+'nEnabled',!(-0x2324*-0x1+-0x1b77+-0x7ac)),h(this,'_type',yo);}static['onLibraryL'+'oaded'](){typeof Ammo<'u'&&(cs=new Ammo['btTransfor'+'m'](),Re=new Ammo['btVector3'](),Bs=new Ammo['btVector3'](),Ka=new Ammo['btQuaterni'+'on']());}static['onAppDestr'+'oy'](){Ammo['destroy'](cs),Ammo['destroy'](Re),Ammo['destroy'](Bs),Ammo['destroy'](Ka),cs=null,Re=null,Bs=null,Ka=null;}set['angularDam'+'ping'](_0x51ec0b){this['_angularDa'+'mping']!==_0x51ec0b&&(this['_angularDa'+'mping']=_0x51ec0b,this['_body']&&this['_body']['setDamping'](this['_linearDam'+'ping'],_0x51ec0b));}get['angularDam'+'ping'](){return this['_angularDa'+'mping'];}set['angularFac'+'tor'](_0x3d6b04){this['_angularFa'+'ctor']['equals'](_0x3d6b04)||(this['_angularFa'+'ctor']['copy'](_0x3d6b04),this['_body']&&this['_type']===ks&&(Re['setValue'](_0x3d6b04['x'],_0x3d6b04['y'],_0x3d6b04['z']),this['_body']['setAngular'+'Factor'](Re)));}get['angularFac'+'tor'](){return this['_angularFa'+'ctor'];}set['angularVel'+'ocity'](_0x3013ce){this['_body']&&this['_type']===ks&&(this['_body']['activate'](),Re['setValue'](_0x3013ce['x'],_0x3013ce['y'],_0x3013ce['z']),this['_body']['setAngular'+'Velocity'](Re),this['_angularVe'+'locity']['copy'](_0x3013ce));}get['angularVel'+'ocity'](){if(this['_body']&&this['_type']===ks){const _0x2d2d3c=this['_body']['getAngular'+'Velocity']();this['_angularVe'+'locity']['set'](_0x2d2d3c['x'](),_0x2d2d3c['y'](),_0x2d2d3c['z']());}return this['_angularVe'+'locity'];}set['body'](_0x1d42b1){this['_body']!==_0x1d42b1&&(this['_body']=_0x1d42b1,_0x1d42b1&&this['_simulatio'+'nEnabled']&&_0x1d42b1['activate']());}get['body'](){return this['_body'];}set['friction'](_0x4a903c){this['_friction']!==_0x4a903c&&(this['_friction']=_0x4a903c,this['_body']&&this['_body']['setFrictio'+'n'](_0x4a903c));}get['friction'](){return this['_friction'];}set['group'](_0x4d647c){this['_group']!==_0x4d647c&&(this['_group']=_0x4d647c,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['group'](){return this['_group'];}set['linearDamp'+'ing'](_0x5d2a07){this['_linearDam'+'ping']!==_0x5d2a07&&(this['_linearDam'+'ping']=_0x5d2a07,this['_body']&&this['_body']['setDamping'](_0x5d2a07,this['_angularDa'+'mping']));}get['linearDamp'+'ing'](){return this['_linearDam'+'ping'];}set['linearFact'+'or'](_0x1767bf){this['_linearFac'+'tor']['equals'](_0x1767bf)||(this['_linearFac'+'tor']['copy'](_0x1767bf),this['_body']&&this['_type']===ks&&(Re['setValue'](_0x1767bf['x'],_0x1767bf['y'],_0x1767bf['z']),this['_body']['setLinearF'+'actor'](Re)));}get['linearFact'+'or'](){return this['_linearFac'+'tor'];}set['linearVelo'+'city'](_0x422866){this['_body']&&this['_type']===ks&&(this['_body']['activate'](),Re['setValue'](_0x422866['x'],_0x422866['y'],_0x422866['z']),this['_body']['setLinearV'+'elocity'](Re),this['_linearVel'+'ocity']['copy'](_0x422866));}get['linearVelo'+'city'](){if(this['_body']&&this['_type']===ks){const _0x513868=this['_body']['getLinearV'+'elocity']();this['_linearVel'+'ocity']['set'](_0x513868['x'](),_0x513868['y'](),_0x513868['z']());}return this['_linearVel'+'ocity'];}set['mask'](_0x58c98d){this['_mask']!==_0x58c98d&&(this['_mask']=_0x58c98d,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['mask'](){return this['_mask'];}set['mass'](_0x456109){if(this['_mass']!==_0x456109&&(this['_mass']=_0x456109,this['_body']&&this['_type']===ks)){const _0x52e4d0=this['enabled']&&this['entity']['enabled'];_0x52e4d0&&this['disableSim'+'ulation'](),this['_body']['getCollisi'+'onShape']()['calculateL'+'ocalInerti'+'a'](_0x456109,Re),this['_body']['setMassPro'+'ps'](_0x456109,Re),this['_body']['updateIner'+'tiaTensor'](),_0x52e4d0&&this['enableSimu'+'lation']();}}get['mass'](){return this['_mass'];}set['restitutio'+'n'](_0x26d83e){this['_restituti'+'on']!==_0x26d83e&&(this['_restituti'+'on']=_0x26d83e,this['_body']&&this['_body']['setRestitu'+'tion'](_0x26d83e));}get['restitutio'+'n'](){return this['_restituti'+'on'];}set['rollingFri'+'ction'](_0x3a8f1c){this['_rollingFr'+'iction']!==_0x3a8f1c&&(this['_rollingFr'+'iction']=_0x3a8f1c,this['_body']&&this['_body']['setRolling'+'Friction'](_0x3a8f1c));}get['rollingFri'+'ction'](){return this['_rollingFr'+'iction'];}set['type'](_0x463c5c){if(this['_type']!==_0x463c5c){switch(this['_type']=_0x463c5c,this['disableSim'+'ulation'](),_0x463c5c){case ks:this['_group']=jL,this['_mask']=Wg;break;case Ha:this['_group']=YL,this['_mask']=Wg;break;case yo:default:this['_group']=Gg,this['_mask']=Mu;break;}this['createBody']();}}get['type'](){return this['_type'];}['createBody'](){const _0x41aeb9=this['entity'];let _0x574cc7;if(_0x41aeb9['collision']&&(_0x574cc7=_0x41aeb9['collision']['shape'],_0x41aeb9['trigger']&&(_0x41aeb9['trigger']['destroy'](),delete _0x41aeb9['trigger'])),_0x574cc7){this['_body']&&(this['system']['removeBody'](this['_body']),this['system']['destroyBod'+'y'](this['_body']),this['_body']=null);const _0x214ae6=this['_type']===ks?this['_mass']:-0x2*0x4a9+0x131e+-0x42*0x26;this['_getEntity'+'Transform'](cs);const _0xfeaf2f=this['system']['createBody'](_0x214ae6,_0x574cc7,cs);if(_0xfeaf2f['setRestitu'+'tion'](this['_restituti'+'on']),_0xfeaf2f['setFrictio'+'n'](this['_friction']),_0xfeaf2f['setRolling'+'Friction'](this['_rollingFr'+'iction']),_0xfeaf2f['setDamping'](this['_linearDam'+'ping'],this['_angularDa'+'mping']),this['_type']===ks){const _0x412085=this['_linearFac'+'tor'];Re['setValue'](_0x412085['x'],_0x412085['y'],_0x412085['z']),_0xfeaf2f['setLinearF'+'actor'](Re);const _0x169ddd=this['_angularFa'+'ctor'];Re['setValue'](_0x169ddd['x'],_0x169ddd['y'],_0x169ddd['z']),_0xfeaf2f['setAngular'+'Factor'](Re);}else this['_type']===Ha&&(_0xfeaf2f['setCollisi'+'onFlags'](_0xfeaf2f['getCollisi'+'onFlags']()|qL),_0xfeaf2f['setActivat'+'ionState'](Vg));_0xfeaf2f['entity']=_0x41aeb9,this['body']=_0xfeaf2f,this['enabled']&&_0x41aeb9['enabled']&&this['enableSimu'+'lation']();}}['isActive'](){return this['_body']?this['_body']['isActive']():!(-0x1087*-0x2+0x1e0d+-0x52*0xc5);}['activate'](){this['_body']&&this['_body']['activate']();}['enableSimu'+'lation'](){const _0x13bda7=this['entity'];if(_0x13bda7['collision']&&_0x13bda7['collision']['enabled']&&!this['_simulatio'+'nEnabled']){const _0x4f10dc=this['_body'];if(_0x4f10dc){switch(this['system']['addBody'](_0x4f10dc,this['_group'],this['_mask']),this['_type']){case ks:this['system']['_dynamic']['push'](this),_0x4f10dc['forceActiv'+'ationState'](Pu),this['syncEntity'+'ToBody']();break;case Ha:this['system']['_kinematic']['push'](this),_0x4f10dc['forceActiv'+'ationState'](Vg);break;case yo:_0x4f10dc['forceActiv'+'ationState'](Pu),this['syncEntity'+'ToBody']();break;}_0x13bda7['collision']['type']==='compound'&&this['system']['_compounds']['push'](_0x13bda7['collision']),_0x4f10dc['activate'](),this['_simulatio'+'nEnabled']=!(0xe*-0xb2+-0x479+0xe35);}}}['disableSim'+'ulation'](){const _0x3edc06=this['_body'];if(_0x3edc06&&this['_simulatio'+'nEnabled']){const _0x1fe4e6=this['system'];let _0x33f781=_0x1fe4e6['_compounds']['indexOf'](this['entity']['collision']);_0x33f781>-(0x8*0x441+-0x163a+-0xbcd)&&_0x1fe4e6['_compounds']['splice'](_0x33f781,0xf2c+0x2fd+-0x1228),_0x33f781=_0x1fe4e6['_dynamic']['indexOf'](this),_0x33f781>-(0x117e+0x1c16+-0x1*0x2d93)&&_0x1fe4e6['_dynamic']['splice'](_0x33f781,0x182b+0x1ae6+0x158*-0x26),_0x33f781=_0x1fe4e6['_kinematic']['indexOf'](this),_0x33f781>-(0x1*0x22fe+0x8c8+-0x2bc5)&&_0x1fe4e6['_kinematic']['splice'](_0x33f781,0x21db+0x224f+-0x4429),_0x1fe4e6['removeBody'](_0x3edc06),_0x3edc06['forceActiv'+'ationState'](Yv),this['_simulatio'+'nEnabled']=!(0x912+-0x6e0+-0x231);}}['applyForce'](_0x1f377a,_0xe0f167,_0x3a080e,_0x1b57d7,_0x4e114e,_0x467e79){const _0x29768f=this['_body'];_0x29768f&&(_0x29768f['activate'](),_0x1f377a instanceof D?Re['setValue'](_0x1f377a['x'],_0x1f377a['y'],_0x1f377a['z']):Re['setValue'](_0x1f377a,_0xe0f167,_0x3a080e),_0xe0f167 instanceof D?Bs['setValue'](_0xe0f167['x'],_0xe0f167['y'],_0xe0f167['z']):_0x1b57d7!==void(-0x42c*0x1+-0x845+-0x1*-0xc71)?Bs['setValue'](_0x1b57d7,_0x4e114e,_0x467e79):Bs['setValue'](-0x1*-0x238f+-0x1cb+-0x871*0x4,-0x2db+0x1*0x1439+-0x9*0x1ee,0x1c9a+0xe4a+-0x2ae4),_0x29768f['applyForce'](Re,Bs));}['applyTorqu'+'e'](_0x34cf74,_0x46ce67,_0x1ca1ae){const _0xbc312c=this['_body'];_0xbc312c&&(_0xbc312c['activate'](),_0x34cf74 instanceof D?Re['setValue'](_0x34cf74['x'],_0x34cf74['y'],_0x34cf74['z']):Re['setValue'](_0x34cf74,_0x46ce67,_0x1ca1ae),_0xbc312c['applyTorqu'+'e'](Re));}['applyImpul'+'se'](_0x5ac286,_0x1ee778,_0x1d5085,_0x1bf72c,_0x10a2d2,_0x45c549){const _0x3c632b=this['_body'];_0x3c632b&&(_0x3c632b['activate'](),_0x5ac286 instanceof D?Re['setValue'](_0x5ac286['x'],_0x5ac286['y'],_0x5ac286['z']):Re['setValue'](_0x5ac286,_0x1ee778,_0x1d5085),_0x1ee778 instanceof D?Bs['setValue'](_0x1ee778['x'],_0x1ee778['y'],_0x1ee778['z']):_0x1bf72c!==void(0x7ea+0x1657+-0x60d*0x5)?Bs['setValue'](_0x1bf72c,_0x10a2d2,_0x45c549):Bs['setValue'](-0x24f5*-0x1+-0x3*0x76d+-0x1*0xeae,0x235*-0x11+0xaf1+0x1a94,-0x15b3*0x1+0x16*-0xa+0xa5*0x23),_0x3c632b['applyImpul'+'se'](Re,Bs));}['applyTorqu'+'eImpulse'](_0x1c53b7,_0x229004,_0xe91d1b){const _0x17e133=this['_body'];_0x17e133&&(_0x17e133['activate'](),_0x1c53b7 instanceof D?Re['setValue'](_0x1c53b7['x'],_0x1c53b7['y'],_0x1c53b7['z']):Re['setValue'](_0x1c53b7,_0x229004,_0xe91d1b),_0x17e133['applyTorqu'+'eImpulse'](Re));}['isStatic'](){return this['_type']===yo;}['isStaticOr'+'Kinematic'](){return this['_type']===yo||this['_type']===Ha;}['isKinemati'+'c'](){return this['_type']===Ha;}['_getEntity'+'Transform'](_0x66fe52){const _0x2153ac=this['entity'],_0x4edce2=_0x2153ac['collision'];if(_0x4edce2){const _0x3c52a1=_0x4edce2['getShapePo'+'sition'](),_0x663436=_0x4edce2['getShapeRo'+'tation']();Re['setValue'](_0x3c52a1['x'],_0x3c52a1['y'],_0x3c52a1['z']),Ka['setValue'](_0x663436['x'],_0x663436['y'],_0x663436['z'],_0x663436['w']);}else{const _0x5c08a9=_0x2153ac['getPositio'+'n'](),_0x183eb0=_0x2153ac['getRotatio'+'n']();Re['setValue'](_0x5c08a9['x'],_0x5c08a9['y'],_0x5c08a9['z']),Ka['setValue'](_0x183eb0['x'],_0x183eb0['y'],_0x183eb0['z'],_0x183eb0['w']);}_0x66fe52['setOrigin'](Re),_0x66fe52['setRotatio'+'n'](Ka);}['syncEntity'+'ToBody'](){const _0x155860=this['_body'];if(_0x155860){if(this['_getEntity'+'Transform'](cs),_0x155860['setWorldTr'+'ansform'](cs),this['_type']===Ha){const _0x1a867a=_0x155860['getMotionS'+'tate']();_0x1a867a&&_0x1a867a['setWorldTr'+'ansform'](cs);}_0x155860['activate']();}}['_updateDyn'+'amic'](){const _0x1d1d2f=this['_body'];if(_0x1d1d2f['isActive']()){const _0x5bf61d=_0x1d1d2f['getMotionS'+'tate']();if(_0x5bf61d){const _0x172292=this['entity'];_0x5bf61d['getWorldTr'+'ansform'](cs);const _0x3f897b=cs['getOrigin'](),_0x5ccbcb=cs['getRotatio'+'n'](),_0x3e272b=_0x172292['collision'];if(_0x3e272b&&_0x3e272b['_hasOffset']){const _0x17444a=_0x3e272b['data']['linearOffs'+'et'],_0x4afd36=_0x3e272b['data']['angularOff'+'set'],_0x45ddb0=GO['copy'](_0x4afd36)['invert'](),_0x5e0427=VO['set'](_0x5ccbcb['x'](),_0x5ccbcb['y'](),_0x5ccbcb['z'](),_0x5ccbcb['w']())['mul'](_0x45ddb0);_0x5e0427['transformV'+'ector'](_0x17444a,Pc),_0x172292['setPositio'+'n'](_0x3f897b['x']()-Pc['x'],_0x3f897b['y']()-Pc['y'],_0x3f897b['z']()-Pc['z']),_0x172292['setRotatio'+'n'](_0x5e0427);}else _0x172292['setPositio'+'n'](_0x3f897b['x'](),_0x3f897b['y'](),_0x3f897b['z']()),_0x172292['setRotatio'+'n'](_0x5ccbcb['x'](),_0x5ccbcb['y'](),_0x5ccbcb['z'](),_0x5ccbcb['w']());}}}['_updateKin'+'ematic'](){const _0x5c3ae2=this['_body']['getMotionS'+'tate']();_0x5c3ae2&&(this['_getEntity'+'Transform'](cs),_0x5c3ae2['setWorldTr'+'ansform'](cs));}['teleport'](_0x38a345,_0x529d64,_0x451273,_0x478588,_0x54a121,_0xcb9360){_0x38a345 instanceof D?this['entity']['setPositio'+'n'](_0x38a345):this['entity']['setPositio'+'n'](_0x38a345,_0x529d64,_0x451273),_0x529d64 instanceof le?this['entity']['setRotatio'+'n'](_0x529d64):_0x529d64 instanceof D?this['entity']['setEulerAn'+'gles'](_0x529d64):_0x478588!==void(-0x2497+-0x58a+0x2a21)&&this['entity']['setEulerAn'+'gles'](_0x478588,_0x54a121,_0xcb9360),this['syncEntity'+'ToBody']();}['onEnable'](){this['_body']||this['createBody'](),this['enableSimu'+'lation']();}['onDisable'](){this['disableSim'+'ulation']();}}h(bs,'EVENT_CONT'+'ACT','contact'),h(bs,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(bs,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(bs,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(bs,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve'),h(bs,'order',-(0x1afa+0x3*0x7d+-0x1c70));class HO{constructor(){this['enabled']=!(-0x1*0x875+0x1581+-0xd0c);}}let Mi,Di;class eS{constructor(_0x4b06a7,_0x30f22e,_0x2c5f35,_0xad807a){h(this,'entity'),h(this,'point'),h(this,'normal'),h(this,'hitFractio'+'n'),(this['entity']=_0x4b06a7,this['point']=_0x30f22e,this['normal']=_0x2c5f35,this['hitFractio'+'n']=_0xad807a);}}class WO{constructor(_0x263ae6,_0x4c59d4,_0x5af9f7){h(this,'a'),h(this,'b'),h(this,'impulse'),h(this,'localPoint'+'A'),h(this,'localPoint'+'B'),h(this,'pointA'),h(this,'pointB'),h(this,'normal'),arguments['length']!==0x6d*0xb+-0xc04*0x3+0x1f5d?(this['a']=_0x263ae6,this['b']=_0x4c59d4,this['impulse']=_0x5af9f7['impulse'],this['localPoint'+'A']=_0x5af9f7['localPoint'],this['localPoint'+'B']=_0x5af9f7['localPoint'+'Other'],this['pointA']=_0x5af9f7['point'],this['pointB']=_0x5af9f7['pointOther'],this['normal']=_0x5af9f7['normal']):(this['a']=null,this['b']=null,this['impulse']=0x1*-0x1ccd+0x26bc+-0x9ef,this['localPoint'+'A']=new D(),this['localPoint'+'B']=new D(),this['pointA']=new D(),this['pointB']=new D(),this['normal']=new D());}}class $O{constructor(_0x5f02d6=new D(),_0x475e4b=new D(),_0x2ddb1a=new D(),_0x593f03=new D(),_0x37aa9d=new D(),_0x301e14=0x10fc+0xac1*0x1+0x1b*-0x107){h(this,'localPoint'),h(this,'localPoint'+'Other'),h(this,'point'),h(this,'pointOther'),h(this,'normal'),h(this,'impulse'),(this['localPoint']=_0x5f02d6,this['localPoint'+'Other']=_0x475e4b,this['point']=_0x2ddb1a,this['pointOther']=_0x593f03,this['normal']=_0x37aa9d,this['impulse']=_0x301e14);}}class XO{constructor(_0x2dacff,_0x2ee42b){h(this,'other'),h(this,'contacts'),(this['other']=_0x2dacff,this['contacts']=_0x2ee42b);}}const o0=['enabled'];class wm extends ct{constructor(_0xa013fb){super(_0xa013fb),h(this,'maxSubStep'+'s',0xb75*0x1+-0x254f*0x1+-0x679*-0x4),h(this,'fixedTimeS'+'tep',(0x1*0x57f+-0xe06+0x888)/(0x1d76+-0xb8b*0x1+-0x9*0x1f7)),h(this,'gravity',new D(0x786+-0x1b58+0x13d2,-(-0x7c*0x1a+-0x15a+0xdfb+0.8100000000000005),0x449+-0xc0d*-0x3+0x2*-0x1438)),h(this,'_gravityFl'+'oat32',new Float32Array(0x44d+-0xd*-0x11b+0x12a9*-0x1)),h(this,'_dynamic',[]),h(this,'_kinematic',[]),h(this,'_triggers',[]),h(this,'_compounds',[]),(this['id']='rigidbody',this['_stats']=_0xa013fb['stats']['frame'],this['ComponentT'+'ype']=bs,this['DataType']=HO,this['contactPoi'+'ntPool']=null,this['contactRes'+'ultPool']=null,this['singleCont'+'actResultP'+'ool']=null,this['schema']=o0,this['collisions']={},this['frameColli'+'sions']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this));}['onLibraryL'+'oaded'](){if(typeof Ammo<'u'){if(this['collisionC'+'onfigurati'+'on']=new Ammo['btDefaultC'+'ollisionCo'+'nfiguratio'+'n'](),this['dispatcher']=new Ammo['btCollisio'+'nDispatche'+'r'](this['collisionC'+'onfigurati'+'on']),this['overlappin'+'gPairCache']=new Ammo['btDbvtBroa'+'dphase'](),this['solver']=new Ammo['btSequenti'+'alImpulseC'+'onstraintS'+'olver'](),this['dynamicsWo'+'rld']=new Ammo['btDiscrete'+'DynamicsWo'+'rld'](this['dispatcher'],this['overlappin'+'gPairCache'],this['solver'],this['collisionC'+'onfigurati'+'on']),this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']){const _0x52aa32=Ammo['addFunctio'+'n'](this['_checkForC'+'ollisions']['bind'](this),'vif');this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack'](_0x52aa32);}else w['warn']('WARNING:\x20T'+'his\x20versio'+'n\x20of\x20ammo.'+'js\x20can\x20pot'+'entially\x20f'+'ail\x20to\x20rep'+'ort\x20contac'+'ts.\x20Please'+'\x20update\x20it'+'\x20to\x20the\x20la'+'test\x20versi'+'on.');Mi=new Ammo['btVector3'](),Di=new Ammo['btVector3'](),bs['onLibraryL'+'oaded'](),this['contactPoi'+'ntPool']=new bf($O,-0x23b2+-0x11c2+0x3575),this['contactRes'+'ultPool']=new bf(XO,0xc0e+-0x5de+-0x62f),this['singleCont'+'actResultP'+'ool']=new bf(WO,-0x1*0x1e43+-0xb6f+0x29b3),this['app']['systems']['on']('update',this['onUpdate'],this);}else this['app']['systems']['off']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x40746f,_0x43dc93,_0x5e4120){const _0x1b8eed=['mass','linearDamp'+'ing','angularDam'+'ping','linearFact'+'or','angularFac'+'tor','friction','rollingFri'+'ction','restitutio'+'n','type','group','mask'];for(const _0x26b57d of _0x1b8eed)if(_0x43dc93['hasOwnProp'+'erty'](_0x26b57d)){const _0x32d5de=_0x43dc93[_0x26b57d];Array['isArray'](_0x32d5de)?_0x40746f[_0x26b57d]=new D(_0x32d5de[-0x256d+0x1ee5+0x688],_0x32d5de[-0x131+-0x191*0xd+-0x158f*-0x1],_0x32d5de[-0x7*-0x3ee+-0x64*0x4e+0x2f8]):_0x40746f[_0x26b57d]=_0x32d5de;}super['initialize'+'ComponentD'+'ata'](_0x40746f,_0x43dc93,['enabled']);}['cloneCompo'+'nent'](_0x5c3460,_0x3c1877){const _0x5cb053=_0x5c3460['rigidbody'],_0x58299b={'enabled':_0x5cb053['enabled'],'mass':_0x5cb053['mass'],'linearDamping':_0x5cb053['linearDamp'+'ing'],'angularDamping':_0x5cb053['angularDam'+'ping'],'linearFactor':[_0x5cb053['linearFact'+'or']['x'],_0x5cb053['linearFact'+'or']['y'],_0x5cb053['linearFact'+'or']['z']],'angularFactor':[_0x5cb053['angularFac'+'tor']['x'],_0x5cb053['angularFac'+'tor']['y'],_0x5cb053['angularFac'+'tor']['z']],'friction':_0x5cb053['friction'],'rollingFriction':_0x5cb053['rollingFri'+'ction'],'restitution':_0x5cb053['restitutio'+'n'],'type':_0x5cb053['type'],'group':_0x5cb053['group'],'mask':_0x5cb053['mask']};return this['addCompone'+'nt'](_0x3c1877,_0x58299b);}['onBeforeRe'+'move'](_0x1ab884,_0x597a91){_0x597a91['enabled']&&(_0x597a91['enabled']=!(0x1eea+-0x1*-0x1e02+0x5*-0xc2f)),_0x597a91['body']&&(this['destroyBod'+'y'](_0x597a91['body']),_0x597a91['body']=null);}['addBody'](_0x952bdf,_0x37dda4,_0x550bef){_0x37dda4!==void(0x7f0+-0xef2*-0x1+-0x16e2)&&_0x550bef!==void(0x31*0x29+0xb37+-0x1310)?this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x952bdf,_0x37dda4,_0x550bef):this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x952bdf);}['removeBody'](_0x137c8d){this['dynamicsWo'+'rld']['removeRigi'+'dBody'](_0x137c8d);}['createBody'](_0x43740a,_0x27988c,_0x58cde1){const _0x9ba9b8=new Ammo['btVector3'](0x191c+-0x1dcf+-0x3*-0x191,-0x1*-0x8ad+0x39*0x13+-0xe*0xec,-0x1594*0x1+-0x1*-0x527+-0x349*-0x5);_0x43740a!==-0x5*0x173+0xaaa+-0xaf*0x5&&_0x27988c['calculateL'+'ocalInerti'+'a'](_0x43740a,_0x9ba9b8);const _0x198b22=new Ammo['btDefaultM'+'otionState'](_0x58cde1),_0x2cc4f9=new Ammo['btRigidBod'+'yConstruct'+'ionInfo'](_0x43740a,_0x198b22,_0x27988c,_0x9ba9b8),_0x328f16=new Ammo['btRigidBod'+'y'](_0x2cc4f9);return Ammo['destroy'](_0x2cc4f9),Ammo['destroy'](_0x9ba9b8),_0x328f16;}['destroyBod'+'y'](_0x53fa10){const _0xa56cf9=_0x53fa10['getMotionS'+'tate']();_0xa56cf9&&Ammo['destroy'](_0xa56cf9),Ammo['destroy'](_0x53fa10);}['raycastFir'+'st'](_0x3098a4,_0x305bcc,_0xd7a78c={}){if(_0xd7a78c['filterTags']||_0xd7a78c['filterCall'+'back'])return _0xd7a78c['sort']=!(0x11f4+0x1cd1+-0x2ec5),this['raycastAll'](_0x3098a4,_0x305bcc,_0xd7a78c)[0x1*0xef7+0x311+-0x1208]||null;let _0x5c7952=null;Mi['setValue'](_0x3098a4['x'],_0x3098a4['y'],_0x3098a4['z']),Di['setValue'](_0x305bcc['x'],_0x305bcc['y'],_0x305bcc['z']);const _0x33c1d2=new Ammo['ClosestRay'+'ResultCall'+'back'](Mi,Di);if(typeof _0xd7a78c['filterColl'+'isionGroup']=='number'&&_0x33c1d2['set_m_coll'+'isionFilte'+'rGroup'](_0xd7a78c['filterColl'+'isionGroup']),typeof _0xd7a78c['filterColl'+'isionMask']=='number'&&_0x33c1d2['set_m_coll'+'isionFilte'+'rMask'](_0xd7a78c['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](Mi,Di,_0x33c1d2),_0x33c1d2['hasHit']()){const _0x2349ca=_0x33c1d2['get_m_coll'+'isionObjec'+'t'](),_0x14f749=Ammo['castObject'](_0x2349ca,Ammo['btRigidBod'+'y']);if(_0x14f749){const _0x2df6b3=_0x33c1d2['get_m_hitP'+'ointWorld'](),_0x19127b=_0x33c1d2['get_m_hitN'+'ormalWorld']();_0x5c7952=new eS(_0x14f749['entity'],new D(_0x2df6b3['x'](),_0x2df6b3['y'](),_0x2df6b3['z']()),new D(_0x19127b['x'](),_0x19127b['y'](),_0x19127b['z']()),_0x33c1d2['get_m_clos'+'estHitFrac'+'tion']());}}return Ammo['destroy'](_0x33c1d2),_0x5c7952;}['raycastAll'](_0xa1efb,_0x107e7e,_0x2c45e2={}){w['assert'](Ammo['AllHitsRay'+'ResultCall'+'back'],'pc.RigidBo'+'dyComponen'+'tSystem#ra'+'ycastAll:\x20'+'Your\x20versi'+'on\x20of\x20ammo'+'.js\x20does\x20n'+'ot\x20expose\x20'+'Ammo.AllHi'+'tsRayResul'+'tCallback.'+'\x20Update\x20it'+'\x20to\x20latest'+'.');const _0x28696e=[];Mi['setValue'](_0xa1efb['x'],_0xa1efb['y'],_0xa1efb['z']),Di['setValue'](_0x107e7e['x'],_0x107e7e['y'],_0x107e7e['z']);const _0x38099d=new Ammo['AllHitsRay'+'ResultCall'+'back'](Mi,Di);if(typeof _0x2c45e2['filterColl'+'isionGroup']=='number'&&_0x38099d['set_m_coll'+'isionFilte'+'rGroup'](_0x2c45e2['filterColl'+'isionGroup']),typeof _0x2c45e2['filterColl'+'isionMask']=='number'&&_0x38099d['set_m_coll'+'isionFilte'+'rMask'](_0x2c45e2['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](Mi,Di,_0x38099d),_0x38099d['hasHit']()){const _0x3c9a34=_0x38099d['get_m_coll'+'isionObjec'+'ts'](),_0x2efae5=_0x38099d['get_m_hitP'+'ointWorld'](),_0x1a852b=_0x38099d['get_m_hitN'+'ormalWorld'](),_0x31d3ef=_0x38099d['get_m_hitF'+'ractions'](),_0x1e8721=_0x3c9a34['size']();for(let _0x1af3e6=-0x2639+0x6a*0x53+0x3db;_0x1af3e6<_0x1e8721;_0x1af3e6++){const _0x27e83d=Ammo['castObject'](_0x3c9a34['at'](_0x1af3e6),Ammo['btRigidBod'+'y']);if(_0x27e83d&&_0x27e83d['entity']){if(_0x2c45e2['filterTags']&&!_0x27e83d['entity']['tags']['has'](..._0x2c45e2['filterTags'])||_0x2c45e2['filterCall'+'back']&&!_0x2c45e2['filterCall'+'back'](_0x27e83d['entity']))continue;const _0x521357=_0x2efae5['at'](_0x1af3e6),_0x44931f=_0x1a852b['at'](_0x1af3e6),_0x527e27=new eS(_0x27e83d['entity'],new D(_0x521357['x'](),_0x521357['y'](),_0x521357['z']()),new D(_0x44931f['x'](),_0x44931f['y'](),_0x44931f['z']()),_0x31d3ef['at'](_0x1af3e6));_0x28696e['push'](_0x527e27);}}_0x2c45e2['sort']&&_0x28696e['sort']((_0x369230,_0x37ee4f)=>_0x369230['hitFractio'+'n']-_0x37ee4f['hitFractio'+'n']);}return Ammo['destroy'](_0x38099d),_0x28696e;}['_storeColl'+'ision'](_0x3b9a36,_0x3c5194){let _0x116978=!(0x428+-0x64d+-0x113*-0x2);const _0x1b712f=_0x3b9a36['getGuid']();return this['collisions'][_0x1b712f]=this['collisions'][_0x1b712f]||{'others':[],'entity':_0x3b9a36},this['collisions'][_0x1b712f]['others']['indexOf'](_0x3c5194)<0x1*0x1c8f+0x1*0x1c45+0x1c6a*-0x2&&(this['collisions'][_0x1b712f]['others']['push'](_0x3c5194),_0x116978=!(-0x19a9*-0x1+-0x1*0x16e6+0x65*-0x7)),this['frameColli'+'sions'][_0x1b712f]=this['frameColli'+'sions'][_0x1b712f]||{'others':[],'entity':_0x3b9a36},this['frameColli'+'sions'][_0x1b712f]['others']['push'](_0x3c5194),_0x116978;}['_createCon'+'tactPointF'+'romAmmo'](_0x1b8d61){const _0x1daaf9=_0x1b8d61['get_m_loca'+'lPointA'](),_0x4e7869=_0x1b8d61['get_m_loca'+'lPointB'](),_0x44c3ec=_0x1b8d61['getPositio'+'nWorldOnA'](),_0x3241a1=_0x1b8d61['getPositio'+'nWorldOnB'](),_0x59f725=_0x1b8d61['get_m_norm'+'alWorldOnB'](),_0x183e0f=this['contactPoi'+'ntPool']['allocate']();return _0x183e0f['localPoint']['set'](_0x1daaf9['x'](),_0x1daaf9['y'](),_0x1daaf9['z']()),_0x183e0f['localPoint'+'Other']['set'](_0x4e7869['x'](),_0x4e7869['y'](),_0x4e7869['z']()),_0x183e0f['point']['set'](_0x44c3ec['x'](),_0x44c3ec['y'](),_0x44c3ec['z']()),_0x183e0f['pointOther']['set'](_0x3241a1['x'](),_0x3241a1['y'](),_0x3241a1['z']()),_0x183e0f['normal']['set'](_0x59f725['x'](),_0x59f725['y'](),_0x59f725['z']()),_0x183e0f['impulse']=_0x1b8d61['getApplied'+'Impulse'](),_0x183e0f;}['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x3ea9ca){const _0x245175=_0x3ea9ca['get_m_loca'+'lPointA'](),_0x5a3ac1=_0x3ea9ca['get_m_loca'+'lPointB'](),_0x48a90e=_0x3ea9ca['getPositio'+'nWorldOnA'](),_0x5f0383=_0x3ea9ca['getPositio'+'nWorldOnB'](),_0x1cab08=_0x3ea9ca['get_m_norm'+'alWorldOnB'](),_0x2003d3=this['contactPoi'+'ntPool']['allocate']();return _0x2003d3['localPoint'+'Other']['set'](_0x245175['x'](),_0x245175['y'](),_0x245175['z']()),_0x2003d3['localPoint']['set'](_0x5a3ac1['x'](),_0x5a3ac1['y'](),_0x5a3ac1['z']()),_0x2003d3['pointOther']['set'](_0x48a90e['x'](),_0x48a90e['y'](),_0x48a90e['z']()),_0x2003d3['point']['set'](_0x5f0383['x'](),_0x5f0383['y'](),_0x5f0383['z']()),_0x2003d3['normal']['set'](_0x1cab08['x'](),_0x1cab08['y'](),_0x1cab08['z']()),_0x2003d3['impulse']=_0x3ea9ca['getApplied'+'Impulse'](),_0x2003d3;}['_createSin'+'gleContact'+'Result'](_0x4c0f85,_0x3c04c9,_0x43e94c){const _0x2325bb=this['singleCont'+'actResultP'+'ool']['allocate']();return _0x2325bb['a']=_0x4c0f85,_0x2325bb['b']=_0x3c04c9,_0x2325bb['localPoint'+'A']=_0x43e94c['localPoint'],_0x2325bb['localPoint'+'B']=_0x43e94c['localPoint'+'Other'],_0x2325bb['pointA']=_0x43e94c['point'],_0x2325bb['pointB']=_0x43e94c['pointOther'],_0x2325bb['normal']=_0x43e94c['normal'],_0x2325bb['impulse']=_0x43e94c['impulse'],_0x2325bb;}['_createCon'+'tactResult'](_0x4e5ccc,_0xd35425){const _0x20c793=this['contactRes'+'ultPool']['allocate']();return _0x20c793['other']=_0x4e5ccc,_0x20c793['contacts']=_0xd35425,_0x20c793;}['_cleanOldC'+'ollisions'](){for(const _0x2f5d84 in this['collisions'])if(this['collisions']['hasOwnProp'+'erty'](_0x2f5d84)){const _0x1fa4cd=this['frameColli'+'sions'][_0x2f5d84],_0x7ab3b6=this['collisions'][_0x2f5d84],_0x42baa0=_0x7ab3b6['entity'],_0x2905d4=_0x42baa0['collision'],_0x55d117=_0x42baa0['rigidbody'],_0x5e7102=_0x7ab3b6['others'];let _0x178fae=_0x5e7102['length'];for(;_0x178fae--;){const _0x4377eb=_0x5e7102[_0x178fae];(!_0x1fa4cd||_0x1fa4cd['others']['indexOf'](_0x4377eb)<-0x2*-0x106d+-0x17f*0x3+-0x1c5d*0x1)&&(_0x5e7102['splice'](_0x178fae,-0x11*0xc5+0x1fdb+-0x12c5),_0x42baa0['trigger']?(_0x2905d4&&_0x2905d4['fire']('triggerlea'+'ve',_0x4377eb),_0x4377eb['rigidbody']&&_0x4377eb['rigidbody']['fire']('triggerlea'+'ve',_0x42baa0)):_0x4377eb['trigger']||(_0x55d117&&_0x55d117['fire']('collisione'+'nd',_0x4377eb),_0x2905d4&&_0x2905d4['fire']('collisione'+'nd',_0x4377eb)));}_0x5e7102['length']===0x6*-0x4e+-0x222a+-0x11ff*-0x2&&delete this['collisions'][_0x2f5d84];}}['_hasContac'+'tEvent'](_0xd27d79){const _0x5eecc2=_0xd27d79['collision'];if(_0x5eecc2&&(_0x5eecc2['hasEvent']('collisions'+'tart')||_0x5eecc2['hasEvent']('collisione'+'nd')||_0x5eecc2['hasEvent']('contact')))return!(-0xf09+-0x19f*0x5+-0x1*-0x1724);const _0x4d7c6d=_0xd27d79['rigidbody'];return _0x4d7c6d&&(_0x4d7c6d['hasEvent']('collisions'+'tart')||_0x4d7c6d['hasEvent']('collisione'+'nd')||_0x4d7c6d['hasEvent']('contact'));}['_checkForC'+'ollisions'](_0x47776a,_0x2fa5f5){const _0x444b4d=Ammo['wrapPointe'+'r'](_0x47776a,Ammo['btDynamics'+'World'])['getDispatc'+'her'](),_0x4ec63b=_0x444b4d['getNumMani'+'folds']();this['frameColli'+'sions']={};for(let _0x332e41=0x3*0x8ea+-0xb29+-0xf95*0x1;_0x332e41<_0x4ec63b;_0x332e41++){const _0x1641f5=_0x444b4d['getManifol'+'dByIndexIn'+'ternal'](_0x332e41),_0x496ae2=_0x1641f5['getBody0'](),_0x2f9eba=_0x1641f5['getBody1'](),_0x3e1e21=Ammo['castObject'](_0x496ae2,Ammo['btRigidBod'+'y']),_0x180561=Ammo['castObject'](_0x2f9eba,Ammo['btRigidBod'+'y']),_0x5616df=_0x3e1e21['entity'],_0x2e3587=_0x180561['entity'];if(!_0x5616df||!_0x2e3587)continue;const _0x4405b=_0x3e1e21['getCollisi'+'onFlags'](),_0x337943=_0x180561['getCollisi'+'onFlags'](),_0x4bb83a=_0x1641f5['getNumCont'+'acts'](),_0x90256e=[],_0x3cc593=[];let _0x5940e2;if(_0x4bb83a>0x1*-0xcaf+-0x1d8d+0x2*0x151e){if(_0x4405b&Po||_0x337943&Po){const _0x38c5d3=_0x5616df['collision']&&(_0x5616df['collision']['hasEvent']('triggerent'+'er')||_0x5616df['collision']['hasEvent']('triggerlea'+'ve')),_0x2a026c=_0x2e3587['collision']&&(_0x2e3587['collision']['hasEvent']('triggerent'+'er')||_0x2e3587['collision']['hasEvent']('triggerlea'+'ve')),_0x1a014c=_0x5616df['rigidbody']&&(_0x5616df['rigidbody']['hasEvent']('triggerent'+'er')||_0x5616df['rigidbody']['hasEvent']('triggerlea'+'ve')),_0x20f5ca=_0x2e3587['rigidbody']&&(_0x2e3587['rigidbody']['hasEvent']('triggerent'+'er')||_0x2e3587['rigidbody']['hasEvent']('triggerlea'+'ve'));_0x38c5d3&&(_0x5940e2=this['_storeColl'+'ision'](_0x5616df,_0x2e3587),_0x5940e2&&!(_0x337943&Po)&&_0x5616df['collision']['fire']('triggerent'+'er',_0x2e3587)),_0x2a026c&&(_0x5940e2=this['_storeColl'+'ision'](_0x2e3587,_0x5616df),_0x5940e2&&!(_0x4405b&Po)&&_0x2e3587['collision']['fire']('triggerent'+'er',_0x5616df)),_0x1a014c&&(_0x5940e2||(_0x5940e2=this['_storeColl'+'ision'](_0x2e3587,_0x5616df)),_0x5940e2&&_0x5616df['rigidbody']['fire']('triggerent'+'er',_0x2e3587)),_0x20f5ca&&(_0x5940e2||(_0x5940e2=this['_storeColl'+'ision'](_0x5616df,_0x2e3587)),_0x5940e2&&_0x2e3587['rigidbody']['fire']('triggerent'+'er',_0x5616df));}else{const _0x462731=this['_hasContac'+'tEvent'](_0x5616df),_0x2ab861=this['_hasContac'+'tEvent'](_0x2e3587),_0x299286=this['hasEvent']('contact');if(_0x299286||_0x462731||_0x2ab861){for(let _0x3d91ef=0x2*0x977+-0x1127+-0x1c7;_0x3d91ef<_0x4bb83a;_0x3d91ef++){const _0x3ccf02=_0x1641f5['getContact'+'Point'](_0x3d91ef),_0x1ce85d=this['_createCon'+'tactPointF'+'romAmmo'](_0x3ccf02);if(_0x462731||_0x2ab861){_0x90256e['push'](_0x1ce85d);const _0x45eced=this['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x3ccf02);_0x3cc593['push'](_0x45eced);}if(_0x299286){const _0x2c5c98=this['_createSin'+'gleContact'+'Result'](_0x5616df,_0x2e3587,_0x1ce85d);this['fire']('contact',_0x2c5c98);}}if(_0x462731){const _0x165aad=this['_createCon'+'tactResult'](_0x2e3587,_0x90256e);_0x5940e2=this['_storeColl'+'ision'](_0x5616df,_0x2e3587),_0x5616df['collision']&&(_0x5616df['collision']['fire']('contact',_0x165aad),_0x5940e2&&_0x5616df['collision']['fire']('collisions'+'tart',_0x165aad)),_0x5616df['rigidbody']&&(_0x5616df['rigidbody']['fire']('contact',_0x165aad),_0x5940e2&&_0x5616df['rigidbody']['fire']('collisions'+'tart',_0x165aad));}if(_0x2ab861){const _0x4bd533=this['_createCon'+'tactResult'](_0x5616df,_0x3cc593);_0x5940e2=this['_storeColl'+'ision'](_0x2e3587,_0x5616df),_0x2e3587['collision']&&(_0x2e3587['collision']['fire']('contact',_0x4bd533),_0x5940e2&&_0x2e3587['collision']['fire']('collisions'+'tart',_0x4bd533)),_0x2e3587['rigidbody']&&(_0x2e3587['rigidbody']['fire']('contact',_0x4bd533),_0x5940e2&&_0x2e3587['rigidbody']['fire']('collisions'+'tart',_0x4bd533));}}}}}this['_cleanOldC'+'ollisions'](),this['contactPoi'+'ntPool']['freeAll'](),this['contactRes'+'ultPool']['freeAll'](),this['singleCont'+'actResultP'+'ool']['freeAll']();}['onUpdate'](_0x24f004){let _0xb5374d,_0x2d0015;this['_stats']['physicsSta'+'rt']=de(),this['_gravityFl'+'oat32'][0x176e*0x1+0x189b*0x1+0x1*-0x3009]=this['gravity']['x'],this['_gravityFl'+'oat32'][0x7*0x56+0x1b2+0x3*-0x159]=this['gravity']['y'],this['_gravityFl'+'oat32'][-0xffa+0x2f*0x4+0x3d0*0x4]=this['gravity']['z'];const _0x4b6ff0=this['dynamicsWo'+'rld']['getGravity']();(_0x4b6ff0['x']()!==this['_gravityFl'+'oat32'][0x1ee0+0x16ea+0x51*-0xaa]||_0x4b6ff0['y']()!==this['_gravityFl'+'oat32'][0x16a9*-0x1+0x1f78+0xa1*-0xe]||_0x4b6ff0['z']()!==this['_gravityFl'+'oat32'][0xf91+-0x1963+-0x2*-0x4ea])&&(_0x4b6ff0['setValue'](this['gravity']['x'],this['gravity']['y'],this['gravity']['z']),this['dynamicsWo'+'rld']['setGravity'](_0x4b6ff0));const _0x57ab33=this['_triggers'];for(_0xb5374d=0x39a+-0x16a5+-0x41*-0x4b,_0x2d0015=_0x57ab33['length'];_0xb5374d<_0x2d0015;_0xb5374d++)_0x57ab33[_0xb5374d]['updateTran'+'sform']();const _0x497981=this['_compounds'];for(_0xb5374d=-0x4c1*-0x7+-0x50f+-0x387*0x8,_0x2d0015=_0x497981['length'];_0xb5374d<_0x2d0015;_0xb5374d++)_0x497981[_0xb5374d]['_updateCom'+'pound']();const _0x42b605=this['_kinematic'];for(_0xb5374d=0x1*-0x663+-0x21*-0xc5+-0x1302,_0x2d0015=_0x42b605['length'];_0xb5374d<_0x2d0015;_0xb5374d++)_0x42b605[_0xb5374d]['_updateKin'+'ematic']();this['dynamicsWo'+'rld']['stepSimula'+'tion'](_0x24f004,this['maxSubStep'+'s'],this['fixedTimeS'+'tep']);const _0x26f1a7=this['_dynamic'];for(_0xb5374d=-0x2201+0x1*-0x13e1+0x1a2*0x21,_0x2d0015=_0x26f1a7['length'];_0xb5374d<_0x2d0015;_0xb5374d++)_0x26f1a7[_0xb5374d]['_updateDyn'+'amic']();this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']||this['_checkForC'+'ollisions'](Ammo['getPointer'](this['dynamicsWo'+'rld']),_0x24f004),this['_stats']['physicsTim'+'e']=de()-this['_stats']['physicsSta'+'rt'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),typeof Ammo<'u'&&(Ammo['destroy'](this['dynamicsWo'+'rld']),Ammo['destroy'](this['solver']),Ammo['destroy'](this['overlappin'+'gPairCache']),Ammo['destroy'](this['dispatcher']),Ammo['destroy'](this['collisionC'+'onfigurati'+'on']),Ammo['destroy'](Mi),Ammo['destroy'](Di),this['dynamicsWo'+'rld']=null,this['solver']=null,this['overlappin'+'gPairCache']=null,this['dispatcher']=null,this['collisionC'+'onfigurati'+'on']=null,Mi=null,Di=null,bs['onAppDestr'+'oy']());}}h(wm,'EVENT_CONT'+'ACT','contact'),we['_buildAcce'+'ssors'](bs['prototype'],o0);const Za='none',qO='blend',tS=new te();class l0 extends we{constructor(_0x44abf1,_0x3a1e43){super(_0x44abf1,_0x3a1e43),this['_resolutio'+'n']=new J(-0x25dd+0x18c*0x14+0x96d,-0x101*-0xb+-0x9*0x9a+0x1*-0x461),this['_reference'+'Resolution']=new J(0xbae+-0x19*0x42+-0x2bc,-0x7*-0x482+0xf30+-0x2d7e),this['_scaleMode']=Za,this['scale']=0x1c93+-0x2*-0x6+0x2*-0xe4f,this['_scaleBlen'+'d']=-0x17e8+-0x10d*-0x10+0x718+0.5,this['_priority']=-0x53*-0x17+-0x9*-0x125+-0x11c2,this['_screenSpa'+'ce']=!(0x1fcf+0x1727*-0x1+-0x8a7),this['cull']=this['_screenSpa'+'ce'],this['_screenMat'+'rix']=new te(),this['_elements']=new Set(),_0x44abf1['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this);}['syncDrawOr'+'der'](){this['system']['queueDrawO'+'rderSync'](this['entity']['getGuid'](),this['_processDr'+'awOrderSyn'+'c'],this);}['_recurseDr'+'awOrderSyn'+'c'](_0x5dcbf6,_0xac1593){var _0x100f65;if(!(_0x5dcbf6 instanceof lt))return _0xac1593;if(_0x5dcbf6['element']){const _0x89999b=_0x5dcbf6['element']['drawOrder'];_0x5dcbf6['element']['drawOrder']=_0xac1593++,_0x5dcbf6['element']['_batchGrou'+'pId']>=0x264e+0x1a7a+0x4*-0x1032&&_0x89999b!==_0x5dcbf6['element']['drawOrder']&&((_0x100f65=this['system']['app']['batcher'])==null||_0x100f65['markGroupD'+'irty'](_0x5dcbf6['element']['_batchGrou'+'pId']));}_0x5dcbf6['particlesy'+'stem']&&(_0x5dcbf6['particlesy'+'stem']['drawOrder']=_0xac1593++);const _0x3f7f05=_0x5dcbf6['children'];for(let _0x59d5e0=-0x273+0x1899+-0x1626;_0x59d5e0<_0x3f7f05['length'];_0x59d5e0++)_0xac1593=this['_recurseDr'+'awOrderSyn'+'c'](_0x3f7f05[_0x59d5e0],_0xac1593);return _0xac1593;}['_processDr'+'awOrderSyn'+'c'](){this['_recurseDr'+'awOrderSyn'+'c'](this['entity'],-0x1a34+-0x1c71+0xaee*0x5),this['fire']('syncdrawor'+'der');}['_calcProje'+'ctionMatri'+'x'](){const _0x80c1=this['_resolutio'+'n']['x']/this['scale'],_0x52bca9=this['_resolutio'+'n']['y']/this['scale'],_0x814b39=-0x1*-0x6f7+-0x1855+0xab*0x1a,_0x1d7a61=_0x80c1,_0x175ae2=-_0x52bca9;this['_screenMat'+'rix']['setOrtho'](_0x814b39,_0x1d7a61,_0x175ae2,0x255a+0x2*-0x79a+0x2a*-0x87,-0x1e7+-0xf32+0x88d*0x2,-(0x2654+-0x6*-0x50e+0x5f*-0xb9)),this['_screenSpa'+'ce']||(tS['setScale']((-0x53c*-0x5+0x1*-0x25fd+-0x25d*-0x5+0.5)*_0x80c1,(0xd74+-0xeb9*0x2+0xb2*0x17+0.5)*_0x52bca9,-0x3*-0x831+0x1e7d+-0x370f),this['_screenMat'+'rix']['mul2'](tS,this['_screenMat'+'rix']));}['_updateSca'+'le'](){this['scale']=this['_calcScale'](this['_resolutio'+'n'],this['referenceR'+'esolution']);}['_calcScale'](_0x1d6a00,_0xc49954){const _0x1260ee=Math['log2']((_0x1d6a00['x']||0xc50+-0x3dc+0x15*-0x67)/_0xc49954['x']),_0x4bc4a6=Math['log2']((_0x1d6a00['y']||0x806+0x1312*0x1+0x16d*-0x13)/_0xc49954['y']);return Math['pow'](-0xf01+0xeba+0x49*0x1,_0x1260ee*(0x8f1+-0xdf5*-0x2+-0x1*0x24da-this['_scaleBlen'+'d'])+_0x4bc4a6*this['_scaleBlen'+'d']);}['_onResize'](_0x2fd87f,_0x4095f4){this['_screenSpa'+'ce']&&(this['_resolutio'+'n']['set'](_0x2fd87f,_0x4095f4),this['resolution']=this['_resolutio'+'n']);}['_bindEleme'+'nt'](_0x573c75){this['_elements']['add'](_0x573c75);}['_unbindEle'+'ment'](_0x592fe7){this['_elements']['delete'](_0x592fe7);}['onRemove'](){this['system']['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['fire']('remove'),this['_elements']['forEach'](_0x334e85=>_0x334e85['_onScreenR'+'emove']()),this['_elements']['clear'](),this['off']();}set['resolution'](_0x23d6d8){this['_screenSpa'+'ce']?this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']):this['_resolutio'+'n']['set'](_0x23d6d8['x'],_0x23d6d8['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:resolu'+'tion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x378a77=>_0x378a77['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['resolution'](){return this['_resolutio'+'n'];}set['referenceR'+'esolution'](_0x5d06eb){this['_reference'+'Resolution']['set'](_0x5d06eb['x'],_0x5d06eb['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:refere'+'nceresolut'+'ion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x20b074=>_0x20b074['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['referenceR'+'esolution'](){return this['_scaleMode']===Za?this['_resolutio'+'n']:this['_reference'+'Resolution'];}set['screenSpac'+'e'](_0x2f6fe2){this['_screenSpa'+'ce']=_0x2f6fe2,this['_screenSpa'+'ce']&&this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']),this['resolution']=this['_resolutio'+'n'],this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:screen'+'space',this['_screenSpa'+'ce']),this['_elements']['forEach'](_0x23e215=>_0x23e215['_onScreenS'+'paceChange']());}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['scaleMode'](_0x21661a){_0x21661a!==Za&&_0x21661a!==qO&&(_0x21661a=Za),!this['_screenSpa'+'ce']&&_0x21661a!==Za&&(_0x21661a=Za),this['_scaleMode']=_0x21661a,this['resolution']=this['_resolutio'+'n'],this['fire']('set:scalem'+'ode',this['_scaleMode']);}get['scaleMode'](){return this['_scaleMode'];}set['scaleBlend'](_0x5772cd){this['_scaleBlen'+'d']=_0x5772cd,this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:scaleb'+'lend',this['_scaleBlen'+'d']),this['_elements']['forEach'](_0x5a90e1=>_0x5a90e1['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['scaleBlend'](){return this['_scaleBlen'+'d'];}set['priority'](_0x18362e){_0x18362e>-0x169*0x1+0x1*-0x184f+0x1ab7&&(w['warn']('Clamping\x20s'+'creen\x20prio'+'rity\x20from\x20'+_0x18362e+'\x20to\x20255'),_0x18362e=0xf5c+0x23f6+-0x3df*0xd),this['_priority']!==_0x18362e&&(this['_priority']=_0x18362e,this['syncDrawOr'+'der']());}get['priority'](){return this['_priority'];}}class jO{constructor(){this['enabled']=!(-0xad*-0x2+-0x2*-0xe7b+0x61*-0x50);}}const Uu=['enabled'];class YO extends ct{constructor(_0x2e5a22){super(_0x2e5a22),this['id']='screen',this['ComponentT'+'ype']=l0,this['DataType']=jO,this['schema']=Uu,this['windowReso'+'lution']=new J(),this['_drawOrder'+'SyncQueue']=new fx(),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['initialize'+'ComponentD'+'ata'](_0x499263,_0x163e81,_0x5870ee){_0x163e81['priority']!==void(-0x3b6+-0x25fc*-0x1+-0x1*0x2246)&&(_0x499263['priority']=_0x163e81['priority']),_0x163e81['screenSpac'+'e']!==void(0x39*0x6a+-0x17*0xc8+-0xce*0x7)&&(_0x499263['screenSpac'+'e']=_0x163e81['screenSpac'+'e']),_0x499263['cull']=_0x499263['screenSpac'+'e'],_0x163e81['scaleMode']!==void(0x607*0x4+0x1160+-0x297c)&&(_0x499263['scaleMode']=_0x163e81['scaleMode']),_0x163e81['scaleBlend']!==void(0xe1*0x2b+-0x1467+-0x459*0x4)&&(_0x499263['scaleBlend']=_0x163e81['scaleBlend']),_0x163e81['resolution']!==void(-0x816+-0x66d*0x5+0x2837)&&(_0x163e81['resolution']instanceof J?_0x499263['_resolutio'+'n']['copy'](_0x163e81['resolution']):_0x499263['_resolutio'+'n']['set'](_0x163e81['resolution'][0xf52+0x1453+0x5*-0x721],_0x163e81['resolution'][-0x16*-0x12d+0x16f9+-0x37d*0xe]),_0x499263['resolution']=_0x499263['_resolutio'+'n']),_0x163e81['referenceR'+'esolution']!==void(0x1067+-0x319*0x7+0x2a4*0x2)&&(_0x163e81['referenceR'+'esolution']instanceof J?_0x499263['_reference'+'Resolution']['copy'](_0x163e81['referenceR'+'esolution']):_0x499263['_reference'+'Resolution']['set'](_0x163e81['referenceR'+'esolution'][0x479+-0x4*0x8b3+0x1e53],_0x163e81['referenceR'+'esolution'][-0x8*0x139+0x48*0x5e+-0x261*0x7]),_0x499263['referenceR'+'esolution']=_0x499263['_reference'+'Resolution']),_0x499263['syncDrawOr'+'der'](),super['initialize'+'ComponentD'+'ata'](_0x499263,_0x163e81,Uu);}['destroy'](){super['destroy'](),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this);}['_onUpdate'](_0x2bdd26){const _0x816207=this['store'];for(const _0x1a7d6a in _0x816207)_0x816207[_0x1a7d6a]['entity']['screen']['update']&&_0x816207[_0x1a7d6a]['entity']['screen']['update'](_0x2bdd26);}['_onResize'](_0xa2f045,_0x2f73b0){this['windowReso'+'lution']['x']=_0xa2f045,this['windowReso'+'lution']['y']=_0x2f73b0;}['cloneCompo'+'nent'](_0x11a194,_0x4bf476){const _0x268e28=_0x11a194['screen'];return this['addCompone'+'nt'](_0x4bf476,{'enabled':_0x268e28['enabled'],'screenSpace':_0x268e28['screenSpac'+'e'],'scaleMode':_0x268e28['scaleMode'],'resolution':_0x268e28['resolution']['clone'](),'referenceResolution':_0x268e28['referenceR'+'esolution']['clone']()});}['onRemoveCo'+'mponent'](_0x354f24,_0x5bb815){_0x5bb815['onRemove']();}['processDra'+'wOrderSync'+'Queue'](){const _0x559449=this['_drawOrder'+'SyncQueue']['list']();for(let _0x29c084=-0xd5b+-0x12d1+0x4*0x80b;_0x29c084<_0x559449['length'];_0x29c084++){const _0x2aebb3=_0x559449[_0x29c084];_0x2aebb3['callback']['call'](_0x2aebb3['scope']);}this['_drawOrder'+'SyncQueue']['clear']();}['queueDrawO'+'rderSync'](_0x4dda29,_0x485e4d,_0x2d3f1e){this['_drawOrder'+'SyncQueue']['list']()['length']||this['app']['once']('prerender',this['processDra'+'wOrderSync'+'Queue'],this),this['_drawOrder'+'SyncQueue']['has'](_0x4dda29)||this['_drawOrder'+'SyncQueue']['push'](_0x4dda29,{'callback':_0x485e4d,'scope':_0x2d3f1e});}}we['_buildAcce'+'ssors'](l0['prototype'],Uu);const lr=new J(),sS=new D(),Hr=new Dn(),iS=new QS(),rS=new D(),vo=new D(),KO=new le(),ZO={'x':'y','y':'x'};class Go extends me{constructor(_0x364eb6,_0x64b402){if(super(),!_0x364eb6||!(_0x364eb6 instanceof hs))throw new Error('Element\x20wa'+'s\x20null\x20or\x20'+'not\x20an\x20Ele'+'mentCompon'+'ent');if(_0x64b402&&_0x64b402!=='x'&&_0x64b402!=='y')throw new Error('Unrecogniz'+'ed\x20axis:\x20'+_0x64b402);this['_element']=_0x364eb6,this['_app']=_0x364eb6['system']['app'],this['_axis']=_0x64b402||null,this['_enabled']=!(0x373*-0xa+0xa0e+-0x1870*-0x1),this['_dragScale']=new D(),this['_dragStart'+'MousePosit'+'ion']=new D(),this['_dragStart'+'HandlePosi'+'tion']=new D(),this['_deltaMous'+'ePosition']=new D(),this['_deltaHand'+'lePosition']=new D(),this['_isDraggin'+'g']=!(-0x13c7+-0xde7+-0x21af*-0x1),this['_toggleLif'+'ecycleList'+'eners']('on');}['_toggleLif'+'ecycleList'+'eners'](_0x16090a){this['_element'][_0x16090a]('mousedown',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x16090a]('touchstart',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x16090a]('selectstar'+'t',this['_onMouseDo'+'wnOrTouchS'+'tart'],this);}['_toggleDra'+'gListeners'](_0x35a32a){const _0x3cf32c=_0x35a32a==='on';this['_hasDragLi'+'steners']&&_0x3cf32c||(this['_app']['mouse']&&(this['_element'][_0x35a32a]('mousemove',this['_onMove'],this),this['_element'][_0x35a32a]('mouseup',this['_onMouseUp'+'OrTouchEnd'],this)),Ae['touch']&&(this['_element'][_0x35a32a]('touchmove',this['_onMove'],this),this['_element'][_0x35a32a]('touchend',this['_onMouseUp'+'OrTouchEnd'],this),this['_element'][_0x35a32a]('touchcance'+'l',this['_onMouseUp'+'OrTouchEnd'],this)),this['_element'][_0x35a32a]('selectmove',this['_onMove'],this),this['_element'][_0x35a32a]('selectend',this['_onMouseUp'+'OrTouchEnd'],this),this['_hasDragLi'+'steners']=_0x3cf32c);}['_onMouseDo'+'wnOrTouchS'+'tart'](_0x264af6){if(this['_element']&&!this['_isDraggin'+'g']&&this['enabled']){this['_dragCamer'+'a']=_0x264af6['camera'],this['_calculate'+'DragScale']();const _0x138f1a=this['_screenToL'+'ocal'](_0x264af6);_0x138f1a&&(this['_toggleDra'+'gListeners']('on'),this['_isDraggin'+'g']=!(-0x31*0x25+-0x459*0x6+0x212b),this['_dragStart'+'MousePosit'+'ion']['copy'](_0x138f1a),this['_dragStart'+'HandlePosi'+'tion']['copy'](this['_element']['entity']['getLocalPo'+'sition']()),this['fire']('drag:start'));}}['_onMouseUp'+'OrTouchEnd'](){this['_isDraggin'+'g']&&(this['_isDraggin'+'g']=!(0x104b+0x1315*0x1+-0x5*0x713),this['_toggleDra'+'gListeners']('off'),this['fire']('drag:end'));}['_screenToL'+'ocal'](_0xe5a87f){return _0xe5a87f['inputSourc'+'e']?Hr['set'](_0xe5a87f['inputSourc'+'e']['getOrigin'](),_0xe5a87f['inputSourc'+'e']['getDirecti'+'on']()):(this['_determine'+'InputPosit'+'ion'](_0xe5a87f),this['_chooseRay'+'OriginAndD'+'irection']()),rS['copy'](this['_element']['entity']['forward'])['mulScalar'](-(-0x51*-0x51+0x4fd*0x3+0x1*-0x2897)),iS['setFromPoi'+'ntNormal'](this['_element']['entity']['getPositio'+'n'](),rS),iS['intersects'+'Ray'](Hr,vo)?(KO['copy'](this['_element']['entity']['getRotatio'+'n']())['invert']()['transformV'+'ector'](vo,vo),vo['mul'](this['_dragScale']),vo):null;}['_determine'+'InputPosit'+'ion'](_0x2e7cd9){const _0x4f7dd7=this['_app']['graphicsDe'+'vice']['maxPixelRa'+'tio'];typeof _0x2e7cd9['x']<'u'&&typeof _0x2e7cd9['y']<'u'?(lr['x']=_0x2e7cd9['x']*_0x4f7dd7,lr['y']=_0x2e7cd9['y']*_0x4f7dd7):_0x2e7cd9['changedTou'+'ches']?(lr['x']=_0x2e7cd9['changedTou'+'ches'][0x1770+0x196b+-0x1049*0x3]['x']*_0x4f7dd7,lr['y']=_0x2e7cd9['changedTou'+'ches'][-0x5f*-0x25+-0x445+-0x976*0x1]['y']*_0x4f7dd7):console['warn']('Could\x20not\x20'+'determine\x20'+'position\x20f'+'rom\x20input\x20'+'event');}['_chooseRay'+'OriginAndD'+'irection'](){this['_element']['screen']&&this['_element']['screen']['screen']['screenSpac'+'e']?(Hr['origin']['set'](lr['x'],-lr['y'],-0x1c27+0xa76+-0x287*-0x7),Hr['direction']['copy'](D['FORWARD'])):(sS['copy'](this['_dragCamer'+'a']['screenToWo'+'rld'](lr['x'],lr['y'],-0x1df0*-0x1+0x1069+0x2e58*-0x1)),Hr['origin']['copy'](this['_dragCamer'+'a']['entity']['getPositio'+'n']()),Hr['direction']['copy'](sS)['sub'](Hr['origin'])['normalize']());}['_calculate'+'DragScale'](){let _0x5ea081=this['_element']['entity']['parent'];const _0x5249fe=this['_element']['screen']&&this['_element']['screen']['screen'],_0x5d14ce=_0x5249fe&&_0x5249fe['screenSpac'+'e'],_0x4b4cdd=_0x5d14ce?_0x5249fe['scale']:0x1df*-0xd+-0xd13*0x2+0x327a,_0x5f277e=this['_dragScale'];for(_0x5f277e['set'](_0x4b4cdd,_0x4b4cdd,_0x4b4cdd);_0x5ea081&&(_0x5f277e['mul'](_0x5ea081['getLocalSc'+'ale']()),_0x5ea081=_0x5ea081['parent'],!(_0x5d14ce&&_0x5ea081['screen'])););_0x5f277e['x']=(0xf1*-0x13+0x7b*0x13+-0x8c3*-0x1)/_0x5f277e['x'],_0x5f277e['y']=(-0xe13*0x1+0x1248*0x2+0x167c*-0x1)/_0x5f277e['y'],_0x5f277e['z']=-0x8bb+-0x1d74+0x262f;}['_onMove'](_0x11d481){const {_element:_0x403505,_deltaMousePosition:_0xad6b29,_deltaHandlePosition:_0x440ca4,_axis:_0x49c393}=this;if(_0x403505&&this['_isDraggin'+'g']&&this['enabled']&&_0x403505['enabled']&&_0x403505['entity']['enabled']){const _0xf16444=this['_screenToL'+'ocal'](_0x11d481);if(_0xf16444){if(_0xad6b29['sub2'](_0xf16444,this['_dragStart'+'MousePosit'+'ion']),_0x440ca4['add2'](this['_dragStart'+'HandlePosi'+'tion'],_0xad6b29),_0x49c393){const _0x30c07=_0x403505['entity']['getLocalPo'+'sition'](),_0x4cce40=ZO[_0x49c393];_0x440ca4[_0x4cce40]=_0x30c07[_0x4cce40];}_0x403505['entity']['setLocalPo'+'sition'](_0x440ca4),this['fire']('drag:move',_0x440ca4);}}}['destroy'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleDra'+'gListeners']('off');}set['enabled'](_0x3a4d59){this['_enabled']=_0x3a4d59;}get['enabled'](){return this['_enabled'];}get['isDragging'](){return this['_isDraggin'+'g'];}}h(Go,'EVENT_DRAG'+'START','drag:start'),h(Go,'EVENT_DRAG'+'END','drag:end'),h(Go,'EVENT_DRAG'+'MOVE','drag:move');const QO=-0x11ba+-0x251b+-0x1247*-0x3,aS=0x1325+0x2*-0x381+-0xc22,JO=0x1b95*-0x1+-0x6*-0x55b+-0x48b,eF=0x14*0x67+0x3e*0x6d+-0x2272,tF=-0xcca*0x1+0xbf*-0x1d+-0x6*-0x5bd,xo=new J();class c0 extends we{constructor(_0x2c5164,_0x1e6a88){super(_0x2c5164,_0x1e6a88),h(this,'_viewportE'+'ntity',null),h(this,'_contentEn'+'tity',null),h(this,'_horizonta'+'lScrollbar'+'Entity',null),h(this,'_verticalS'+'crollbarEn'+'tity',null),h(this,'_evtElemen'+'tRemove',null),h(this,'_evtViewpo'+'rtElementR'+'emove',null),h(this,'_evtViewpo'+'rtResize',null),h(this,'_evtConten'+'tEntityEle'+'mentAdd',null),h(this,'_evtConten'+'tElementRe'+'move',null),h(this,'_evtConten'+'tResize',null),h(this,'_evtHorizo'+'ntalScroll'+'barAdd',null),h(this,'_evtHorizo'+'ntalScroll'+'barRemove',null),h(this,'_evtHorizo'+'ntalScroll'+'barValue',null),h(this,'_evtVertic'+'alScrollba'+'rAdd',null),h(this,'_evtVertic'+'alScrollba'+'rRemove',null),h(this,'_evtVertic'+'alScrollba'+'rValue',null),(this['_scrollbar'+'UpdateFlag'+'s']={},this['_scrollbar'+'Entities']={},this['_prevConte'+'ntSizes']={},this['_prevConte'+'ntSizes'][Ce]=null,this['_prevConte'+'ntSizes'][je]=null,this['_scroll']=new J(),this['_velocity']=new D(),this['_dragStart'+'Position']=new D(),this['_disabledC'+'ontentInpu'+'t']=!(0x2549+-0x17f6+-0xd52),this['_disabledC'+'ontentInpu'+'tEntities']=[],this['_toggleLif'+'ecycleList'+'eners']('on'),this['_toggleEle'+'mentListen'+'ers']('on'));}get['data'](){const _0x498d1f=this['system']['store'][this['entity']['getGuid']()];return _0x498d1f?_0x498d1f['data']:null;}set['enabled'](_0x5ef244){this['_setValue']('enabled',_0x5ef244);}get['enabled'](){return this['data']['enabled'];}set['horizontal'](_0x3d5ed6){this['_setValue']('horizontal',_0x3d5ed6);}get['horizontal'](){return this['data']['horizontal'];}set['vertical'](_0x1f3db3){this['_setValue']('vertical',_0x1f3db3);}get['vertical'](){return this['data']['vertical'];}set['scrollMode'](_0x6a00d3){this['_setValue']('scrollMode',_0x6a00d3);}get['scrollMode'](){return this['data']['scrollMode'];}set['bounceAmou'+'nt'](_0x4759ac){this['_setValue']('bounceAmou'+'nt',_0x4759ac);}get['bounceAmou'+'nt'](){return this['data']['bounceAmou'+'nt'];}set['friction'](_0xe34de8){this['_setValue']('friction',_0xe34de8);}get['friction'](){return this['data']['friction'];}set['dragThresh'+'old'](_0x2c1b2f){this['_setValue']('dragThresh'+'old',_0x2c1b2f);}get['dragThresh'+'old'](){return this['data']['dragThresh'+'old'];}set['useMouseWh'+'eel'](_0x171454){this['_setValue']('useMouseWh'+'eel',_0x171454);}get['useMouseWh'+'eel'](){return this['data']['useMouseWh'+'eel'];}set['mouseWheel'+'Sensitivit'+'y'](_0x4c098a){this['_setValue']('mouseWheel'+'Sensitivit'+'y',_0x4c098a);}get['mouseWheel'+'Sensitivit'+'y'](){return this['data']['mouseWheel'+'Sensitivit'+'y'];}set['horizontal'+'ScrollbarV'+'isibility'](_0x231f06){this['_setValue']('horizontal'+'ScrollbarV'+'isibility',_0x231f06);}get['horizontal'+'ScrollbarV'+'isibility'](){return this['data']['horizontal'+'ScrollbarV'+'isibility'];}set['verticalSc'+'rollbarVis'+'ibility'](_0x4c29ac){this['_setValue']('verticalSc'+'rollbarVis'+'ibility',_0x4c29ac);}get['verticalSc'+'rollbarVis'+'ibility'](){return this['data']['verticalSc'+'rollbarVis'+'ibility'];}set['viewportEn'+'tity'](_0x2cb166){if(this['_viewportE'+'ntity']===_0x2cb166)return;const _0x2f4db7=typeof _0x2cb166=='string';this['_viewportE'+'ntity']&&_0x2f4db7&&this['_viewportE'+'ntity']['getGuid']()===_0x2cb166||(this['_viewportE'+'ntity']&&this['_viewportE'+'ntityUnsub'+'scribe'](),_0x2cb166 instanceof Ie?this['_viewportE'+'ntity']=_0x2cb166:_0x2f4db7?this['_viewportE'+'ntity']=this['system']['app']['getEntityF'+'romIndex'](_0x2cb166)||null:this['_viewportE'+'ntity']=null,this['_viewportE'+'ntity']&&this['_viewportE'+'ntitySubsc'+'ribe'](),this['_viewportE'+'ntity']?this['data']['viewportEn'+'tity']=this['_viewportE'+'ntity']['getGuid']():_0x2f4db7&&_0x2cb166&&(this['data']['viewportEn'+'tity']=_0x2cb166));}get['viewportEn'+'tity'](){return this['_viewportE'+'ntity'];}set['contentEnt'+'ity'](_0x2e3a2a){if(this['_contentEn'+'tity']===_0x2e3a2a)return;const _0x152199=typeof _0x2e3a2a=='string';this['_contentEn'+'tity']&&_0x152199&&this['_contentEn'+'tity']['getGuid']()===_0x2e3a2a||(this['_contentEn'+'tity']&&this['_contentEn'+'tityUnsubs'+'cribe'](),_0x2e3a2a instanceof Ie?this['_contentEn'+'tity']=_0x2e3a2a:_0x152199?this['_contentEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x2e3a2a)||null:this['_contentEn'+'tity']=null,this['_contentEn'+'tity']&&this['_contentEn'+'titySubscr'+'ibe'](),this['_contentEn'+'tity']?this['data']['contentEnt'+'ity']=this['_contentEn'+'tity']['getGuid']():_0x152199&&_0x2e3a2a&&(this['data']['contentEnt'+'ity']=_0x2e3a2a));}get['contentEnt'+'ity'](){return this['_contentEn'+'tity'];}set['horizontal'+'ScrollbarE'+'ntity'](_0x2a5a64){if(this['_horizonta'+'lScrollbar'+'Entity']===_0x2a5a64)return;const _0x3f57e6=typeof _0x2a5a64=='string';this['_horizonta'+'lScrollbar'+'Entity']&&_0x3f57e6&&this['_horizonta'+'lScrollbar'+'Entity']['getGuid']()===_0x2a5a64||(this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](),_0x2a5a64 instanceof Ie?this['_horizonta'+'lScrollbar'+'Entity']=_0x2a5a64:_0x3f57e6?this['_horizonta'+'lScrollbar'+'Entity']=this['system']['app']['getEntityF'+'romIndex'](_0x2a5a64)||null:this['_horizonta'+'lScrollbar'+'Entity']=null,this['_scrollbar'+'Entities'][Ce]=this['_horizonta'+'lScrollbar'+'Entity'],this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](),this['_horizonta'+'lScrollbar'+'Entity']?this['data']['horizontal'+'ScrollbarE'+'ntity']=this['_horizonta'+'lScrollbar'+'Entity']['getGuid']():_0x3f57e6&&_0x2a5a64&&(this['data']['horizontal'+'ScrollbarE'+'ntity']=_0x2a5a64));}get['horizontal'+'ScrollbarE'+'ntity'](){return this['_horizonta'+'lScrollbar'+'Entity'];}set['verticalSc'+'rollbarEnt'+'ity'](_0x1ad479){if(this['_verticalS'+'crollbarEn'+'tity']===_0x1ad479)return;const _0x457289=typeof _0x1ad479=='string';this['_verticalS'+'crollbarEn'+'tity']&&_0x457289&&this['_verticalS'+'crollbarEn'+'tity']['getGuid']()===_0x1ad479||(this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](),_0x1ad479 instanceof Ie?this['_verticalS'+'crollbarEn'+'tity']=_0x1ad479:_0x457289?this['_verticalS'+'crollbarEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x1ad479)||null:this['_verticalS'+'crollbarEn'+'tity']=null,this['_scrollbar'+'Entities'][je]=this['_verticalS'+'crollbarEn'+'tity'],this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](),this['_verticalS'+'crollbarEn'+'tity']?this['data']['verticalSc'+'rollbarEnt'+'ity']=this['_verticalS'+'crollbarEn'+'tity']['getGuid']():_0x457289&&_0x1ad479&&(this['data']['verticalSc'+'rollbarEnt'+'ity']=_0x1ad479));}get['verticalSc'+'rollbarEnt'+'ity'](){return this['_verticalS'+'crollbarEn'+'tity'];}set['scroll'](_0x5d3b64){this['_onSetScro'+'ll'](_0x5d3b64['x'],_0x5d3b64['y']);}get['scroll'](){return this['_scroll'];}['_setValue'](_0x2fe577,_0x206848){const _0x365575=this['data'],_0x4bf40f=_0x365575[_0x2fe577];_0x365575[_0x2fe577]=_0x206848,this['fire']('set',_0x2fe577,_0x4bf40f,_0x206848);}['_toggleLif'+'ecycleList'+'eners'](_0x2087bf){this[_0x2087bf]('set_horizo'+'ntal',this['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'],this),this[_0x2087bf]('set_vertic'+'al',this['_onSetVert'+'icalScroll'+'ingEnabled'],this),this['entity'][_0x2087bf]('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this);}['_toggleEle'+'mentListen'+'ers'](_0x2cda10){if(this['entity']['element']){if(_0x2cda10==='on'&&this['_hasElemen'+'tListeners'])return;this['entity']['element'][_0x2cda10]('resize',this['_syncAll'],this),this['entity']['element'][_0x2cda10]('mousewheel',this['_onMouseWh'+'eel'],this),this['_hasElemen'+'tListeners']=_0x2cda10==='on';}}['_onElement'+'ComponentA'+'dd'](_0x5e8b15){this['_evtElemen'+'tRemove']=this['entity']['element']['once']('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['_toggleEle'+'mentListen'+'ers']('on');}['_onElement'+'ComponentR'+'emove'](_0x3991d2){var _0x30016a;(_0x30016a=this['_evtElemen'+'tRemove'])==null||_0x30016a['off'](),this['_evtElemen'+'tRemove']=null,this['_toggleEle'+'mentListen'+'ers']('off');}['_viewportE'+'ntitySubsc'+'ribe'](){this['_evtViewpo'+'rtEntityEl'+'ementAdd']=this['_viewportE'+'ntity']['on']('element:ad'+'d',this['_onViewpor'+'tElementGa'+'in'],this),this['_viewportE'+'ntity']['element']&&this['_onViewpor'+'tElementGa'+'in']();}['_viewportE'+'ntityUnsub'+'scribe'](){var _0x4f3c8b,_0x41a822;(_0x4f3c8b=this['_evtViewpo'+'rtEntityEl'+'ementAdd'])==null||_0x4f3c8b['off'](),this['_evtViewpo'+'rtEntityEl'+'ementAdd']=null,(_0x41a822=this['_viewportE'+'ntity'])!=null&&_0x41a822['element']&&this['_onViewpor'+'tElementLo'+'se']();}['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](){const _0x47c427=this['_viewportE'+'ntity']['element'];this['_evtViewpo'+'rtElementR'+'emove']=_0x47c427['once']('beforeremo'+'ve',this['_onViewpor'+'tElementLo'+'se'],this),this['_evtViewpo'+'rtResize']=_0x47c427['on']('resize',this['_syncAll'],this);}['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe'](){var _0x24ae8e,_0xd41fff;(_0x24ae8e=this['_evtViewpo'+'rtElementR'+'emove'])==null||_0x24ae8e['off'](),this['_evtViewpo'+'rtElementR'+'emove']=null,(_0xd41fff=this['_evtViewpo'+'rtResize'])==null||_0xd41fff['off'](),this['_evtViewpo'+'rtResize']=null;}['_onViewpor'+'tElementGa'+'in'](){this['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](),this['_syncAll']();}['_onViewpor'+'tElementLo'+'se'](){this['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe']();}['_contentEn'+'titySubscr'+'ibe'](){this['_evtConten'+'tEntityEle'+'mentAdd']=this['_contentEn'+'tity']['on']('element:ad'+'d',this['_onContent'+'ElementGai'+'n'],this),this['_contentEn'+'tity']['element']&&this['_onContent'+'ElementGai'+'n']();}['_contentEn'+'tityUnsubs'+'cribe'](){var _0x4ccdd4,_0x1fed99;(_0x4ccdd4=this['_evtConten'+'tEntityEle'+'mentAdd'])==null||_0x4ccdd4['off'](),this['_evtConten'+'tEntityEle'+'mentAdd']=null,(_0x1fed99=this['_contentEn'+'tity'])!=null&&_0x1fed99['element']&&this['_onContent'+'ElementLos'+'e']();}['_contentEn'+'tityElemen'+'tSubscribe'](){const _0x2540f7=this['_contentEn'+'tity']['element'];this['_evtConten'+'tElementRe'+'move']=_0x2540f7['once']('beforeremo'+'ve',this['_onContent'+'ElementLos'+'e'],this),this['_evtConten'+'tResize']=_0x2540f7['on']('resize',this['_syncAll'],this);}['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](){var _0x218fb6,_0x340e36;(_0x218fb6=this['_evtConten'+'tElementRe'+'move'])==null||_0x218fb6['off'](),this['_evtConten'+'tElementRe'+'move']=null,(_0x340e36=this['_evtConten'+'tResize'])==null||_0x340e36['off'](),this['_evtConten'+'tResize']=null;}['_onContent'+'ElementGai'+'n'](){this['_contentEn'+'tityElemen'+'tSubscribe'](),this['_destroyDr'+'agHelper'](),this['_contentDr'+'agHelper']=new Go(this['_contentEn'+'tity']['element']),this['_contentDr'+'agHelper']['on']('drag:start',this['_onContent'+'DragStart'],this),this['_contentDr'+'agHelper']['on']('drag:end',this['_onContent'+'DragEnd'],this),this['_contentDr'+'agHelper']['on']('drag:move',this['_onContent'+'DragMove'],this),this['_prevConte'+'ntSizes'][Ce]=null,this['_prevConte'+'ntSizes'][je]=null,this['_syncAll']();}['_onContent'+'ElementLos'+'e'](){this['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](),this['_destroyDr'+'agHelper']();}['_onContent'+'DragStart'](){this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&this['_dragStart'+'Position']['copy'](this['_contentEn'+'tity']['getLocalPo'+'sition']());}['_onContent'+'DragEnd'](){this['_prevConte'+'ntDragPosi'+'tion']=null,this['_enableCon'+'tentInput']();}['_onContent'+'DragMove'](_0x32236c){if(this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&(this['_wasDragge'+'d']=!(-0x1284+0x88*0x10+0xa04),this['_setScroll'+'FromConten'+'tPosition'](_0x32236c),this['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x32236c),!this['_disabledC'+'ontentInpu'+'t'])){const _0x4c1a47=_0x32236c['x']-this['_dragStart'+'Position']['x'],_0x54b8d8=_0x32236c['y']-this['_dragStart'+'Position']['y'];(Math['abs'](_0x4c1a47)>this['dragThresh'+'old']||Math['abs'](_0x54b8d8)>this['dragThresh'+'old'])&&this['_disableCo'+'ntentInput']();}}['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](){this['_evtHorizo'+'ntalScroll'+'barAdd']=this['_horizonta'+'lScrollbar'+'Entity']['on']('scrollbar:'+'add',this['_onHorizon'+'talScrollb'+'arGain'],this),this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arGain']();}['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](){this['_evtVertic'+'alScrollba'+'rAdd']=this['_verticalS'+'crollbarEn'+'tity']['on']('scrollbar:'+'add',this['_onVertica'+'lScrollbar'+'Gain'],this),this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Gain']();}['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](){var _0x438296;(_0x438296=this['_evtHorizo'+'ntalScroll'+'barAdd'])==null||_0x438296['off'](),this['_evtHorizo'+'ntalScroll'+'barAdd']=null,this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arLose']();}['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](){var _0x3356f4;(_0x3356f4=this['_evtVertic'+'alScrollba'+'rAdd'])==null||_0x3356f4['off'](),this['_evtVertic'+'alScrollba'+'rAdd']=null,this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Lose']();}['_onSetHori'+'zontalScro'+'llbarValue'](_0x990fb7){!this['_scrollbar'+'UpdateFlag'+'s'][Ce]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](_0x990fb7,null);}['_onSetVert'+'icalScroll'+'barValue'](_0x30c10b){!this['_scrollbar'+'UpdateFlag'+'s'][je]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](null,_0x30c10b);}['_onHorizon'+'talScrollb'+'arGain'](){var _0x426e34;const _0x1f2933=(_0x426e34=this['_horizonta'+'lScrollbar'+'Entity'])==null?void(0x2*0x185+0x1*-0x149c+0x1192):_0x426e34['scrollbar'];this['_evtHorizo'+'ntalScroll'+'barRemove']=_0x1f2933['on']('beforeremo'+'ve',this['_onHorizon'+'talScrollb'+'arLose'],this),this['_evtHorizo'+'ntalScroll'+'barValue']=_0x1f2933['on']('set:value',this['_onSetHori'+'zontalScro'+'llbarValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](Ce),this['_syncScrol'+'lbarPositi'+'on'](Ce);}['_onVertica'+'lScrollbar'+'Gain'](){var _0x238f23;const _0x5d8cd8=(_0x238f23=this['_verticalS'+'crollbarEn'+'tity'])==null?void(-0x9*0x7f+-0x1bf5*-0x1+0x1f*-0xc2):_0x238f23['scrollbar'];this['_evtVertic'+'alScrollba'+'rRemove']=_0x5d8cd8['on']('beforeremo'+'ve',this['_onVertica'+'lScrollbar'+'Lose'],this),this['_evtVertic'+'alScrollba'+'rValue']=_0x5d8cd8['on']('set:value',this['_onSetVert'+'icalScroll'+'barValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](je),this['_syncScrol'+'lbarPositi'+'on'](je);}['_onHorizon'+'talScrollb'+'arLose'](){var _0x48ebbc,_0x554822;(_0x48ebbc=this['_evtHorizo'+'ntalScroll'+'barRemove'])==null||_0x48ebbc['off'](),this['_evtHorizo'+'ntalScroll'+'barRemove']=null,(_0x554822=this['_evtHorizo'+'ntalScroll'+'barValue'])==null||_0x554822['off'](),this['_evtHorizo'+'ntalScroll'+'barValue']=null;}['_onVertica'+'lScrollbar'+'Lose'](){var _0x1793fd,_0x439895;(_0x1793fd=this['_evtVertic'+'alScrollba'+'rRemove'])==null||_0x1793fd['off'](),this['_evtVertic'+'alScrollba'+'rRemove']=null,(_0x439895=this['_evtVertic'+'alScrollba'+'rValue'])==null||_0x439895['off'](),this['_evtVertic'+'alScrollba'+'rValue']=null;}['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'](){this['_syncScrol'+'lbarEnable'+'dState'](Ce);}['_onSetVert'+'icalScroll'+'ingEnabled'](){this['_syncScrol'+'lbarEnable'+'dState'](je);}['_onSetScro'+'ll'](_0xc66e9d,_0x487097,_0x5767ea){_0x5767ea!==!(-0xf38+-0x7a6+0x5*0x493)&&this['_velocity']['set'](-0x21ea+-0x7bd*-0x1+-0x1a2d*-0x1,-0x20ec+-0x22b1+0x439d,0xccd+0x538+0x1205*-0x1);const _0x404327=this['_updateAxi'+'s'](_0xc66e9d,'x',Ce),_0x578a6f=this['_updateAxi'+'s'](_0x487097,'y',je);(_0x404327||_0x578a6f)&&this['fire']('set:scroll',this['_scroll']);}['_updateAxi'+'s'](_0x3fe86b,_0x188bb6,_0x6e5fd3){const _0x384463=_0x3fe86b!==null&&Math['abs'](_0x3fe86b-this['_scroll'][_0x188bb6])>0x1*-0x1ac9+-0xbd2+-0x1*-0x269b+0.00001;return(_0x384463||this['_isDraggin'+'g']()||_0x3fe86b===0x5c*0x49+-0x4*0x58e+-0x404)&&(this['_scroll'][_0x188bb6]=this['_determine'+'NewScrollV'+'alue'](_0x3fe86b,_0x188bb6,_0x6e5fd3),this['_syncConte'+'ntPosition'](_0x6e5fd3),this['_syncScrol'+'lbarPositi'+'on'](_0x6e5fd3)),_0x384463;}['_determine'+'NewScrollV'+'alue'](_0x4a9267,_0x2cedd1,_0x599aa0){if(!this['_getScroll'+'ingEnabled'](_0x599aa0))return this['_scroll'][_0x2cedd1];switch(this['scrollMode']){case QO:return Y['clamp'](_0x4a9267,0x6bd+0x8*0x2bd+0x1*-0x1ca5,this['_getMaxScr'+'ollValue'](_0x599aa0));case aS:return this['_setVeloci'+'tyFromOver'+'shoot'](_0x4a9267,_0x2cedd1,_0x599aa0),_0x4a9267;case JO:return _0x4a9267;default:return console['warn']('Unhandled\x20'+'scroll\x20mod'+'e:'+this['scrollMode']),_0x4a9267;}}['_syncAll'](){this['_syncConte'+'ntPosition'](Ce),this['_syncConte'+'ntPosition'](je),this['_syncScrol'+'lbarPositi'+'on'](Ce),this['_syncScrol'+'lbarPositi'+'on'](je),this['_syncScrol'+'lbarEnable'+'dState'](Ce),this['_syncScrol'+'lbarEnable'+'dState'](je);}['_syncConte'+'ntPosition'](_0x57370b){if(!this['_contentEn'+'tity'])return;const _0x58e2b9=this['_getAxis'](_0x57370b),_0x5ba4a4=this['_getSign'](_0x57370b),_0x473c4f=this['_prevConte'+'ntSizes'][_0x57370b],_0x43e0e0=this['_getConten'+'tSize'](_0x57370b);if(_0x473c4f!==null&&Math['abs'](_0x473c4f-_0x43e0e0)>0x5*0x392+-0x583*-0x1+-0x175d+0.0001){const _0x4eacb0=this['_getMaxOff'+'set'](_0x57370b,_0x473c4f),_0x1b3127=this['_getMaxOff'+'set'](_0x57370b,_0x43e0e0);_0x1b3127===-0x3*-0x22+-0x16be+0x2*0xb2c?this['_scroll'][_0x58e2b9]=0x17f*0x1+-0x1c9b+0x1b1d:this['_scroll'][_0x58e2b9]=Y['clamp'](this['_scroll'][_0x58e2b9]*_0x4eacb0/_0x1b3127,-0x6a*0x1e+-0xa*-0x79+0x7b2,0x62*0x49+0x10*-0x222+0x62f);}const _0x5dbde5=this['_scroll'][_0x58e2b9]*this['_getMaxOff'+'set'](_0x57370b),_0x296eae=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x296eae[_0x58e2b9]=_0x5dbde5*_0x5ba4a4,this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x296eae),this['_prevConte'+'ntSizes'][_0x57370b]=_0x43e0e0;}['_syncScrol'+'lbarPositi'+'on'](_0x1de453){const _0x41f0c8=this['_scrollbar'+'Entities'][_0x1de453];if(!(_0x41f0c8!=null&&_0x41f0c8['scrollbar']))return;const _0x4138db=this['_getAxis'](_0x1de453);this['_scrollbar'+'UpdateFlag'+'s'][_0x1de453]=!(0x1c20+-0xa86+-0x119a),_0x41f0c8['scrollbar']['value']=this['_scroll'][_0x4138db],_0x41f0c8['scrollbar']['handleSize']=this['_getScroll'+'barHandleS'+'ize'](_0x4138db,_0x1de453),this['_scrollbar'+'UpdateFlag'+'s'][_0x1de453]=!(-0x270*0xc+0x2157+-0x416);}['_syncScrol'+'lbarEnable'+'dState'](_0x219fd4){const _0x53b49a=this['_scrollbar'+'Entities'][_0x219fd4];if(!_0x53b49a)return;const _0x104973=this['_getScroll'+'ingEnabled'](_0x219fd4),_0x476d96=this['_getScroll'+'barVisibil'+'ity'](_0x219fd4);switch(_0x476d96){case eF:_0x53b49a['enabled']=_0x104973;return;case tF:_0x53b49a['enabled']=_0x104973&&this['_contentIs'+'LargerThan'+'Viewport'](_0x219fd4);return;default:console['warn']('Unhandled\x20'+'scrollbar\x20'+'visibility'+':'+_0x476d96),_0x53b49a['enabled']=_0x104973;}}['_contentIs'+'LargerThan'+'Viewport'](_0x3a0643){return this['_getConten'+'tSize'](_0x3a0643)>this['_getViewpo'+'rtSize'](_0x3a0643);}['_contentPo'+'sitionToSc'+'rollValue'](_0x4c2dc2){const _0xa6115a=this['_getMaxOff'+'set'](Ce),_0x23bfd7=this['_getMaxOff'+'set'](je);return _0xa6115a===-0x3*0xb75+-0x1fea+0x4249?xo['x']=-0xd2*-0x1c+-0x1*-0x2149+-0x3841:xo['x']=_0x4c2dc2['x']/_0xa6115a,_0x23bfd7===-0x1d4*-0xc+0x193+-0x1783?xo['y']=-0x1*-0x41f+-0x312+0x10d*-0x1:xo['y']=_0x4c2dc2['y']/-_0x23bfd7,xo;}['_getMaxOff'+'set'](_0x12b4bc,_0x4266dd){_0x4266dd=_0x4266dd===void(0x3b*0x87+0x1*0x1cfe+-0x3c1b)?this['_getConten'+'tSize'](_0x12b4bc):_0x4266dd;const _0x5a1cde=this['_getViewpo'+'rtSize'](_0x12b4bc);return _0x4266dd<_0x5a1cde?-this['_getViewpo'+'rtSize'](_0x12b4bc):_0x5a1cde-_0x4266dd;}['_getMaxScr'+'ollValue'](_0xdf6bb8){return this['_contentIs'+'LargerThan'+'Viewport'](_0xdf6bb8)?0x874+-0x13f1*-0x1+0x2*-0xe32:-0x1faf+0x232f*0x1+-0x40*0xe;}['_getScroll'+'barHandleS'+'ize'](_0xcb03d6,_0xcc35cd){const _0x4ac13b=this['_getViewpo'+'rtSize'](_0xcc35cd),_0x386ccc=this['_getConten'+'tSize'](_0xcc35cd);if(Math['abs'](_0x386ccc)<-0x2149*-0x1+-0x2189+0x8*0x8+0.001)return-0x329+-0x7fa*-0x2+0x665*-0x2;const _0x1d7b59=Math['min'](_0x4ac13b/_0x386ccc,-0x1*-0x12ae+-0xb*-0x28f+-0xd*0x39a),_0x43a6f4=this['_toOversho'+'ot'](this['_scroll'][_0xcb03d6],_0xcc35cd);return _0x43a6f4===-0xb09*-0x1+-0x24f*0xc+0x10ab*0x1?_0x1d7b59:_0x1d7b59/(0x29*0xa8+0x292*0xa+-0x349b+Math['abs'](_0x43a6f4));}['_getViewpo'+'rtSize'](_0x215304){return this['_getSize'](_0x215304,this['_viewportE'+'ntity']);}['_getConten'+'tSize'](_0x3a9e6d){return this['_getSize'](_0x3a9e6d,this['_contentEn'+'tity']);}['_getSize'](_0x5d7b93,_0x481dea){return _0x481dea!=null&&_0x481dea['element']?_0x481dea['element'][this['_getCalcul'+'atedDimens'+'ion'](_0x5d7b93)]:-0x5f7*-0x2+-0x1a*-0xa8+0x1cfe*-0x1;}['_getScroll'+'ingEnabled'](_0x25bc8a){if(_0x25bc8a===Ce)return this['horizontal'];if(_0x25bc8a===je)return this['vertical'];w['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x25bc8a);}['_getScroll'+'barVisibil'+'ity'](_0x7f44de){if(_0x7f44de===Ce)return this['horizontal'+'ScrollbarV'+'isibility'];if(_0x7f44de===je)return this['verticalSc'+'rollbarVis'+'ibility'];w['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x7f44de);}['_getSign'](_0x45e007){return _0x45e007===Ce?-0x1d2b+0x121b+-0xb11*-0x1:-(0x19*0xbd+0x10d*-0x1e+0xd12);}['_getAxis'](_0xb4aee4){return _0xb4aee4===Ce?'x':'y';}['_getCalcul'+'atedDimens'+'ion'](_0x42340b){return _0x42340b===Ce?'calculated'+'Width':'calculated'+'Height';}['_destroyDr'+'agHelper'](){this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['destroy']();}['onUpdate'](){this['_contentEn'+'tity']&&(this['_updateVel'+'ocity'](),this['_syncScrol'+'lbarEnable'+'dState'](Ce),this['_syncScrol'+'lbarEnable'+'dState'](je));}['_updateVel'+'ocity'](){if(!this['_isDraggin'+'g']()){if(this['scrollMode']===aS&&(this['_hasOversh'+'oot']('x',Ce)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['x'],'x',Ce),this['_hasOversh'+'oot']('y',je)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['y'],'y',je)),Math['abs'](this['_velocity']['x'])>-0x17b6*0x1+0x4*0xe+0x177e+0.0001||Math['abs'](this['_velocity']['y'])>-0x111f+-0x95*0x13+0x1c2e+0.0001){const _0x207ee4=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x207ee4['x']+=this['_velocity']['x'],_0x207ee4['y']+=this['_velocity']['y'],this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x207ee4),this['_setScroll'+'FromConten'+'tPosition'](_0x207ee4);}this['_velocity']['x']*=-0x65*0x21+0x1d72+-0x836*0x2-this['friction'],this['_velocity']['y']*=0x109d*0x2+-0x1e2b*-0x1+0x3f64*-0x1-this['friction'];}}['_hasOversh'+'oot'](_0xe20a57,_0x10de97){return Math['abs'](this['_toOversho'+'ot'](this['scroll'][_0xe20a57],_0x10de97))>0x1cad+-0x86+0x1c27*-0x1+0.001;}['_toOversho'+'ot'](_0x530e44,_0x11a5ef){const _0x2badc2=this['_getMaxScr'+'ollValue'](_0x11a5ef);return _0x530e44<0x8df+0x21a6+-0x881*0x5?_0x530e44:_0x530e44>_0x2badc2?_0x530e44-_0x2badc2:-0x89*-0x2+-0x18f*-0x13+-0x1eaf;}['_setVeloci'+'tyFromOver'+'shoot'](_0x24bc75,_0x1d1574,_0x113181){const _0x28bff8=this['_toOversho'+'ot'](_0x24bc75,_0x113181)*this['_getMaxOff'+'set'](_0x113181)*this['_getSign'](_0x113181);Math['abs'](_0x28bff8)>0x4b*-0x81+0x5*-0x6c7+-0x16f*-0x32&&(this['_velocity'][_0x1d1574]=-_0x28bff8/(this['bounceAmou'+'nt']*(0x3e9+0x125b*0x1+-0x1612)+(0x227d+0x13*0xa+-0x233a)));}['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x33d9de){this['_prevConte'+'ntDragPosi'+'tion']?(this['_velocity']['sub2'](_0x33d9de,this['_prevConte'+'ntDragPosi'+'tion']),this['_prevConte'+'ntDragPosi'+'tion']['copy'](_0x33d9de)):(this['_velocity']['set'](-0xf9e+-0x163d+0x25db,0xbf5+0xbfc*-0x3+0x1*0x17ff,-0x10d5*0x1+0x470*0x2+0x7f5),this['_prevConte'+'ntDragPosi'+'tion']=_0x33d9de['clone']());}['_setScroll'+'FromConten'+'tPosition'](_0x98c88){let _0x3aa946=this['_contentPo'+'sitionToSc'+'rollValue'](_0x98c88);this['_isDraggin'+'g']()&&(_0x3aa946=this['_applyScro'+'llValueTen'+'sion'](_0x3aa946)),this['_onSetScro'+'ll'](_0x3aa946['x'],_0x3aa946['y'],!(0x3*-0xcdd+0x45e+0x223a));}['_applyScro'+'llValueTen'+'sion'](_0x3a722c){let _0x5a8e98=this['_getMaxScr'+'ollValue'](Ce),_0x496e86=this['_toOversho'+'ot'](_0x3a722c['x'],Ce);return _0x496e86>-0xf8f+-0x1*0x1d99+-0x28*-0x121?_0x3a722c['x']=_0x5a8e98+(-0x2*0xfb9+-0x1*-0x93f+0x1634)*Math['log10'](-0x9*-0xd+-0x583+0x5*0x103+_0x496e86):_0x496e86<0x2046+-0x22dd+0x297&&(_0x3a722c['x']=-(-0x1*0x2669+-0x4*-0x85c+0x4fa)*Math['log10'](0x29*0x7+0x583*0x2+-0xc24-_0x496e86)),_0x5a8e98=this['_getMaxScr'+'ollValue'](je),_0x496e86=this['_toOversho'+'ot'](_0x3a722c['y'],je),_0x496e86>-0x2498+-0x7*-0x14c+0x1b84?_0x3a722c['y']=_0x5a8e98+(0x2c2*0xb+-0xe64+0x4d*-0x35)*Math['log10'](-0x2b*0x5f+0x1*0xd0+0xf26+_0x496e86):_0x496e86<0xf0f+-0x1*-0x1ddb+-0x2cea&&(_0x3a722c['y']=-(-0x19a8+-0x128b+0x2c34)*Math['log10'](0x49d*0x7+0xdf7*0x2+0x1*-0x3c38-_0x496e86)),_0x3a722c;}['_isDraggin'+'g'](){return this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['isDragging'];}['_setScroll'+'barCompone'+'ntsEnabled'](_0xf69037){var _0x5b8d3f,_0x5a1631;(_0x5b8d3f=this['_horizonta'+'lScrollbar'+'Entity'])!=null&&_0x5b8d3f['scrollbar']&&(this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']['enabled']=_0xf69037),(_0x5a1631=this['_verticalS'+'crollbarEn'+'tity'])!=null&&_0x5a1631['scrollbar']&&(this['_verticalS'+'crollbarEn'+'tity']['scrollbar']['enabled']=_0xf69037);}['_setConten'+'tDraggingE'+'nabled'](_0xe8b70f){this['_contentDr'+'agHelper']&&(this['_contentDr'+'agHelper']['enabled']=_0xe8b70f);}['_onMouseWh'+'eel'](_0x580ac4){var _0x561e76;if(!this['useMouseWh'+'eel']||!((_0x561e76=this['_contentEn'+'tity'])!=null&&_0x561e76['element']))return;const _0x1bb217=_0x580ac4['event'],_0x379b56=_0x1bb217['deltaX']/this['_contentEn'+'tity']['element']['calculated'+'Width']*this['mouseWheel'+'Sensitivit'+'y']['x'],_0x57547a=_0x1bb217['deltaY']/this['_contentEn'+'tity']['element']['calculated'+'Height']*this['mouseWheel'+'Sensitivit'+'y']['y'],_0x5c34fc=Y['clamp'](this['_scroll']['x']+_0x379b56,-0x24d7+0x14*0x3f+0x1feb,this['_getMaxScr'+'ollValue'](Ce)),_0x236710=Y['clamp'](this['_scroll']['y']+_0x57547a,-0x3*-0x7d9+0x15*-0xd+-0x7*0x336,this['_getMaxScr'+'ollValue'](je));this['scroll']=new J(_0x5c34fc,_0x236710);}['_enableCon'+'tentInput'](){for(;this['_disabledC'+'ontentInpu'+'tEntities']['length'];){const _0x3a4a7a=this['_disabledC'+'ontentInpu'+'tEntities']['pop']();_0x3a4a7a['element']&&(_0x3a4a7a['element']['useInput']=!(0x204b+-0x249e+0x453));}this['_disabledC'+'ontentInpu'+'t']=!(-0xe18+0x1*-0x76+0xe8f);}['_disableCo'+'ntentInput'](){const _0x434e91=_0x5e146a=>{_0x5e146a['element']&&_0x5e146a['element']['useInput']&&(this['_disabledC'+'ontentInpu'+'tEntities']['push'](_0x5e146a),_0x5e146a['element']['useInput']=!(0x885+0x11d*0x9+-0x1289));const _0x39f0a2=_0x5e146a['children'];for(let _0x19e35b=-0x95*0x13+-0x1fd1+0x55c*0x8,_0x1c43d4=_0x39f0a2['length'];_0x19e35b<_0x1c43d4;_0x19e35b++)_0x434e91(_0x39f0a2[_0x19e35b]);};if(this['_contentEn'+'tity']){const _0x3837fd=this['_contentEn'+'tity']['children'];for(let _0x3cc7d6=-0x17*-0x148+-0xa69*0x2+-0x8a6,_0xb4f2ac=_0x3837fd['length'];_0x3cc7d6<_0xb4f2ac;_0x3cc7d6++)_0x434e91(_0x3837fd[_0x3cc7d6]);}this['_disabledC'+'ontentInpu'+'t']=!(-0x2*-0x1146+0xa3*0x2a+-0x3d4a);}['onEnable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(-0x172f+-0x2324+0x9*0x67b)),this['_setConten'+'tDraggingE'+'nabled'](!(-0x23e*0x2+-0x25ad+0x2a29)),this['_syncAll']();}['onDisable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(-0x2291*-0x1+-0x28c*-0x3+-0x2a34)),this['_setConten'+'tDraggingE'+'nabled'](!(0x10*0x3b+-0x155e+0x11af));}['onRemove'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleEle'+'mentListen'+'ers']('off'),this['_destroyDr'+'agHelper']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x3ccbfd,_0x367931){_0x3ccbfd['viewportEn'+'tity']&&(this['viewportEn'+'tity']=_0x367931[_0x3ccbfd['viewportEn'+'tity']['getGuid']()]),_0x3ccbfd['contentEnt'+'ity']&&(this['contentEnt'+'ity']=_0x367931[_0x3ccbfd['contentEnt'+'ity']['getGuid']()]),_0x3ccbfd['horizontal'+'ScrollbarE'+'ntity']&&(this['horizontal'+'ScrollbarE'+'ntity']=_0x367931[_0x3ccbfd['horizontal'+'ScrollbarE'+'ntity']['getGuid']()]),_0x3ccbfd['verticalSc'+'rollbarEnt'+'ity']&&(this['verticalSc'+'rollbarEnt'+'ity']=_0x367931[_0x3ccbfd['verticalSc'+'rollbarEnt'+'ity']['getGuid']()]);}}h(c0,'EVENT_SETS'+'CROLL','set:scroll');const sF=-0x16ab+-0x72f+0x2*0xef2;class iF{constructor(){h(this,'enabled',!(-0x26b3+0x1eaa+0x11*0x79)),h(this,'horizontal'),h(this,'vertical'),h(this,'scrollMode'),h(this,'bounceAmou'+'nt'),h(this,'friction'),h(this,'dragThresh'+'old',sF),h(this,'useMouseWh'+'eel',!(-0x17b3+0x2ab*-0x3+0x2*0xfda)),h(this,'mouseWheel'+'Sensitivit'+'y',new J(0x9cd+-0x2*0xc5b+0xeea,0xae5*0x1+0x251d*-0x1+0x1a39)),h(this,'horizontal'+'ScrollbarV'+'isibility',-0x1*0x6d8+0x1504+-0xe2c),h(this,'verticalSc'+'rollbarVis'+'ibility',0x29*0x27+0x8a7+0xee6*-0x1),h(this,'viewportEn'+'tity',null),h(this,'contentEnt'+'ity',null),h(this,'horizontal'+'ScrollbarE'+'ntity',null),h(this,'verticalSc'+'rollbarEnt'+'ity',null);}}const nS=[{'name':'enabled','type':'boolean'},{'name':'horizontal','type':'boolean'},{'name':'vertical','type':'boolean'},{'name':'scrollMode','type':'number'},{'name':'bounceAmou'+'nt','type':'number'},{'name':'friction','type':'number'},{'name':'dragThresh'+'old','type':'number'},{'name':'useMouseWh'+'eel','type':'boolean'},{'name':'mouseWheel'+'Sensitivit'+'y','type':'vec2'},{'name':'horizontal'+'ScrollbarV'+'isibility','type':'number'},{'name':'verticalSc'+'rollbarVis'+'ibility','type':'number'}],rF=-0x59*0x5+-0x1*0x12a0+0x1*0x1467;class aF extends ct{constructor(_0x1f5182){super(_0x1f5182),this['id']='scrollview',this['ComponentT'+'ype']=c0,this['DataType']=iF,this['schema']=nS,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x20fc5a,_0x1fa3ef,_0x43eb03){_0x1fa3ef['dragThresh'+'old']===void(-0x333+-0x1fba+0x22ed*0x1)&&(_0x1fa3ef['dragThresh'+'old']=rF),_0x1fa3ef['useMouseWh'+'eel']===void(-0x2*-0xdcd+-0x5*-0x46+-0x1cf8)&&(_0x1fa3ef['useMouseWh'+'eel']=!(-0x76f+-0x24*0xe3+-0x1*-0x275b)),_0x1fa3ef['mouseWheel'+'Sensitivit'+'y']===void(-0x16*-0x35+0xa5+0x533*-0x1)&&(_0x1fa3ef['mouseWheel'+'Sensitivit'+'y']=new J(-0x4f6+-0x49*-0x74+-0x1c1d,0x92b*0x2+0x17b+-0x27a*0x8)),super['initialize'+'ComponentD'+'ata'](_0x20fc5a,_0x1fa3ef,nS),_0x20fc5a['viewportEn'+'tity']=_0x1fa3ef['viewportEn'+'tity'],_0x20fc5a['contentEnt'+'ity']=_0x1fa3ef['contentEnt'+'ity'],_0x20fc5a['horizontal'+'ScrollbarE'+'ntity']=_0x1fa3ef['horizontal'+'ScrollbarE'+'ntity'],_0x20fc5a['verticalSc'+'rollbarEnt'+'ity']=_0x1fa3ef['verticalSc'+'rollbarEnt'+'ity'];}['onUpdate'](_0x3f8512){const _0x25e260=this['store'];for(const _0x5ad9db in _0x25e260){const _0x4b8657=_0x25e260[_0x5ad9db]['entity'],_0x1d41c8=_0x4b8657['scrollview'];_0x1d41c8['enabled']&&_0x4b8657['enabled']&&_0x1d41c8['onUpdate']();}}['_onRemoveC'+'omponent'](_0x32c64f,_0x21b0a6){_0x21b0a6['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class h0 extends we{constructor(_0x49c82e,_0x58ddf6){super(_0x49c82e,_0x58ddf6),h(this,'_handleEnt'+'ity',null),h(this,'_evtHandle'+'EntityElem'+'entAdd',null),h(this,'_evtHandle'+'EntityChan'+'ges',[]),this['_toggleLif'+'ecycleList'+'eners']('on');}get['data'](){const _0x4501e2=this['system']['store'][this['entity']['getGuid']()];return _0x4501e2?_0x4501e2['data']:null;}set['enabled'](_0x2f7359){this['_setValue']('enabled',_0x2f7359);}get['enabled'](){return this['data']['enabled'];}set['orientatio'+'n'](_0x1f47a9){this['_setValue']('orientatio'+'n',_0x1f47a9);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['value'](_0x3fe234){this['_setValue']('value',_0x3fe234);}get['value'](){return this['data']['value'];}set['handleSize'](_0x4e1be1){this['_setValue']('handleSize',_0x4e1be1);}get['handleSize'](){return this['data']['handleSize'];}set['handleEnti'+'ty'](_0x54f01c){if(this['_handleEnt'+'ity']===_0x54f01c)return;const _0x5d1893=typeof _0x54f01c=='string';this['_handleEnt'+'ity']&&_0x5d1893&&this['_handleEnt'+'ity']['getGuid']()===_0x54f01c||(this['_handleEnt'+'ity']&&this['_handleEnt'+'ityUnsubsc'+'ribe'](),_0x54f01c instanceof Ie?this['_handleEnt'+'ity']=_0x54f01c:_0x5d1893?this['_handleEnt'+'ity']=this['system']['app']['getEntityF'+'romIndex'](_0x54f01c)||null:this['_handleEnt'+'ity']=null,this['_handleEnt'+'ity']&&this['_handleEnt'+'itySubscri'+'be'](),this['_handleEnt'+'ity']?this['data']['handleEnti'+'ty']=this['_handleEnt'+'ity']['getGuid']():_0x5d1893&&_0x54f01c&&(this['data']['handleEnti'+'ty']=_0x54f01c));}get['handleEnti'+'ty'](){return this['_handleEnt'+'ity'];}['_setValue'](_0x3ce527,_0x3fe614){const _0x56758f=this['data'],_0x446be2=_0x56758f[_0x3ce527];_0x56758f[_0x3ce527]=_0x3fe614,this['fire']('set',_0x3ce527,_0x446be2,_0x3fe614);}['_toggleLif'+'ecycleList'+'eners'](_0x516dc6){this[_0x516dc6]('set_value',this['_onSetValu'+'e'],this),this[_0x516dc6]('set_handle'+'Size',this['_onSetHand'+'leSize'],this),this[_0x516dc6]('set_orient'+'ation',this['_onSetOrie'+'ntation'],this);}['_handleEnt'+'itySubscri'+'be'](){this['_evtHandle'+'EntityElem'+'entAdd']=this['_handleEnt'+'ity']['on']('element:ad'+'d',this['_onHandleE'+'lementGain'],this),this['_handleEnt'+'ity']['element']&&this['_onHandleE'+'lementGain']();}['_handleEnt'+'ityUnsubsc'+'ribe'](){var _0x32f90f,_0x4737a5;(_0x32f90f=this['_evtHandle'+'EntityElem'+'entAdd'])==null||_0x32f90f['off'](),this['_evtHandle'+'EntityElem'+'entAdd']=null,(_0x4737a5=this['_handleEnt'+'ity'])!=null&&_0x4737a5['element']&&this['_onHandleE'+'lementLose']();}['_handleEnt'+'ityElement'+'Subscribe'](){const _0x40481c=this['_handleEnt'+'ity']['element'],_0x2599fa=this['_evtHandle'+'EntityChan'+'ges'];_0x2599fa['push'](_0x40481c['once']('beforeremo'+'ve',this['_onHandleE'+'lementLose'],this)),_0x2599fa['push'](_0x40481c['on']('set:anchor',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x2599fa['push'](_0x40481c['on']('set:margin',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x2599fa['push'](_0x40481c['on']('set:pivot',this['_onSetHand'+'leAlignmen'+'t'],this));}['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](){for(let _0x5842e1=0x2*0x12b+-0x476+0x220;_0x5842e1<this['_evtHandle'+'EntityChan'+'ges']['length'];_0x5842e1++)this['_evtHandle'+'EntityChan'+'ges'][_0x5842e1]['off']();this['_evtHandle'+'EntityChan'+'ges']['length']=-0x1dc9+-0xc*-0x77+-0x1*-0x1835;}['_onHandleE'+'lementGain'](){this['_handleEnt'+'ityElement'+'Subscribe'](),this['_destroyDr'+'agHelper'](),this['_handleDra'+'gHelper']=new Go(this['_handleEnt'+'ity']['element'],this['_getAxis']()),this['_handleDra'+'gHelper']['on']('drag:move',this['_onHandleD'+'rag'],this),this['_updateHan'+'dlePositio'+'nAndSize']();}['_onHandleE'+'lementLose'](){this['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](),this['_destroyDr'+'agHelper']();}['_onHandleD'+'rag'](_0xd16225){this['_handleEnt'+'ity']&&this['enabled']&&this['entity']['enabled']&&(this['value']=this['_handlePos'+'itionToScr'+'ollValue'](_0xd16225[this['_getAxis']()]));}['_onSetValu'+'e'](_0x1b8c71,_0x1dc82a,_0x5eb441){Math['abs'](_0x5eb441-_0x1dc82a)>-0x10ca+-0x11*0x205+-0x331f*-0x1+0.00001&&(this['data']['value']=Y['clamp'](_0x5eb441,-0x269c+-0xd0a+0x33a6,-0x22cd+-0x1564+0x1c19*0x2),this['_updateHan'+'dlePositio'+'nAndSize'](),this['fire']('set:value',this['data']['value']));}['_onSetHand'+'leSize'](_0xc09f40,_0x4a286f,_0xd01725){Math['abs'](_0xd01725-_0x4a286f)>0x17a*-0x11+0x1d48*-0x1+-0x1*-0x3662+0.00001&&(this['data']['handleSize']=Y['clamp'](_0xd01725,-0x216a+0xe19+0x1351,0x1cfe+0x19d9+0x1b6b*-0x2),this['_updateHan'+'dlePositio'+'nAndSize']());}['_onSetHand'+'leAlignmen'+'t'](){this['_updateHan'+'dlePositio'+'nAndSize']();}['_onSetOrie'+'ntation'](_0x394b7c,_0xe67ae1,_0x19e36f){var _0x26d281;_0x19e36f!==_0xe67ae1&&((_0x26d281=this['_handleEnt'+'ity'])!=null&&_0x26d281['element'])&&(this['_handleEnt'+'ity']['element'][this['_getOpposi'+'teDimensio'+'n']()]=-0x2*-0x8eb+0xb*0x1d+-0x5*0x3d1);}['_updateHan'+'dlePositio'+'nAndSize'](){const _0xc18784=this['_handleEnt'+'ity'],_0x1f1f94=_0xc18784==null?void(0x1dfd+-0x338*-0x5+-0x2f*0xfb):_0xc18784['element'];if(_0xc18784){const _0x4e6944=_0xc18784['getLocalPo'+'sition']();_0x4e6944[this['_getAxis']()]=this['_getHandle'+'Position'](),_0xc18784['setLocalPo'+'sition'](_0x4e6944);}_0x1f1f94&&(_0x1f1f94[this['_getDimens'+'ion']()]=this['_getHandle'+'Length']());}['_handlePos'+'itionToScr'+'ollValue'](_0x19a60a){return _0x19a60a*this['_getSign']()/this['_getUsable'+'TrackLengt'+'h']();}['_scrollVal'+'ueToHandle'+'Position'](_0x1c76d3){return _0x1c76d3*this['_getSign']()*this['_getUsable'+'TrackLengt'+'h']();}['_getUsable'+'TrackLengt'+'h'](){return Math['max'](this['_getTrackL'+'ength']()-this['_getHandle'+'Length'](),0x4*0x482+-0x1a*-0xd6+-0x27c4+0.001);}['_getTrackL'+'ength'](){return this['entity']['element']?this['orientatio'+'n']===Ce?this['entity']['element']['calculated'+'Width']:this['entity']['element']['calculated'+'Height']:0x22d1+-0x165c+-0x1*0xc75;}['_getHandle'+'Length'](){return this['_getTrackL'+'ength']()*this['handleSize'];}['_getHandle'+'Position'](){return this['_scrollVal'+'ueToHandle'+'Position'](this['value']);}['_getSign'](){return this['orientatio'+'n']===Ce?0x1af3+0x12d8+-0x16e5*0x2:-(0x2fa+0x128e+0x3*-0x72d);}['_getAxis'](){return this['orientatio'+'n']===Ce?'x':'y';}['_getDimens'+'ion'](){return this['orientatio'+'n']===Ce?'width':'height';}['_getOpposi'+'teDimensio'+'n'](){return this['orientatio'+'n']===Ce?'height':'width';}['_destroyDr'+'agHelper'](){this['_handleDra'+'gHelper']&&this['_handleDra'+'gHelper']['destroy']();}['_setHandle'+'DraggingEn'+'abled'](_0x442feb){this['_handleDra'+'gHelper']&&(this['_handleDra'+'gHelper']['enabled']=_0x442feb);}['onEnable'](){this['_setHandle'+'DraggingEn'+'abled'](!(-0x1c*-0x80+-0x1794*-0x1+0x82*-0x4a));}['onDisable'](){this['_setHandle'+'DraggingEn'+'abled'](!(0x2225*0x1+0x6*-0x23d+-0xf1*0x16));}['onRemove'](){this['_destroyDr'+'agHelper'](),this['_toggleLif'+'ecycleList'+'eners']('off');}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x16f877,_0x196b44){_0x16f877['handleEnti'+'ty']&&(this['handleEnti'+'ty']=_0x196b44[_0x16f877['handleEnti'+'ty']['getGuid']()]);}}h(h0,'EVENT_SETV'+'ALUE','set:value');class nF{constructor(){h(this,'enabled',!(0x2071+0x1af9+-0x3b6a)),h(this,'orientatio'+'n',Ce),h(this,'value',0x1525*0x1+0x1*-0x3b3+0xcb*-0x16),h(this,'handleSize',0x453+-0x526*-0x4+0x1*-0x18eb),h(this,'handleEnti'+'ty',null);}}const oS=[{'name':'enabled','type':'boolean'},{'name':'orientatio'+'n','type':'number'},{'name':'value','type':'number'},{'name':'handleSize','type':'number'}];class oF extends ct{constructor(_0x247bf0){super(_0x247bf0),this['id']='scrollbar',this['ComponentT'+'ype']=h0,this['DataType']=nF,this['schema']=oS,this['on']('add',this['_onAddComp'+'onent'],this),this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x4ee190,_0x2741f4,_0x4621bb){super['initialize'+'ComponentD'+'ata'](_0x4ee190,_0x2741f4,oS),_0x4ee190['handleEnti'+'ty']=_0x2741f4['handleEnti'+'ty'];}['_onAddComp'+'onent'](_0x359005){_0x359005['fire']('scrollbar:'+'add');}['_onRemoveC'+'omponent'](_0x531716,_0x3606fd){_0x3606fd['onRemove']();}}const lF={'volume':0x0,'pitch':0x0,'loop':!(0x1*0x64d+0x243b+-0x1*0x2a87),'startTime':0x0,'duration':0x0,'position':new D(),'maxDistance':0x0,'refDistance':0x0,'rollOffFactor':0x0,'distanceModel':0x0,'onPlay':null,'onPause':null,'onResume':null,'onStop':null,'onEnd':null};class Gi extends me{constructor(_0x4754a0,_0x1f77b3='Untitled',_0x9816b3={}){super(),h(this,'name'),h(this,'instances',[]),(this['_component']=_0x4754a0,this['_assets']=_0x4754a0['system']['app']['assets'],this['_manager']=_0x4754a0['system']['manager'],this['name']=_0x1f77b3,this['_volume']=_0x9816b3['volume']!==void(0xb87*0x1+-0x11*-0x2f+-0xea6)?Y['clamp'](Number(_0x9816b3['volume'])||-0x1a8f+0x120a+0x885,-0x1c15+-0x13ea+0x2fff,-0x7*-0x509+-0x2112+-0x4*0x8b):-0xb1e*0x3+-0x637+0x2*0x13c9,this['_pitch']=_0x9816b3['pitch']!==void(-0x14*0x1e7+-0x18fb*0x1+-0x3f07*-0x1)?Math['max'](0x1e9*0x13+0x8*-0x340+-0xa4b+0.01,Number(_0x9816b3['pitch'])||0xda1+0xd0f+-0x1ab0):-0x2139+-0x19*0xb9+-0x1*-0x334b,this['_loop']=!!(_0x9816b3['loop']!==void(0x1b60+0x7ab*-0x1+-0x13b5)&&_0x9816b3['loop']),this['_duration']=_0x9816b3['duration']>0x24ba+0x367+-0x1*0x2821?_0x9816b3['duration']:null,this['_startTime']=Math['max'](-0x22b1+-0x131f+0x35d0,Number(_0x9816b3['startTime'])||-0x15f3*0x1+-0x25b8+0x3bab),this['_overlap']=!!_0x9816b3['overlap'],this['_autoPlay']=!!_0x9816b3['autoPlay'],this['_firstNode']=null,this['_lastNode']=null,this['_asset']=_0x9816b3['asset'],this['_asset']instanceof pe&&(this['_asset']=this['_asset']['id']),this['_onInstanc'+'ePlayHandl'+'er']=this['_onInstanc'+'ePlay']['bind'](this),this['_onInstanc'+'ePauseHand'+'ler']=this['_onInstanc'+'ePause']['bind'](this),this['_onInstanc'+'eResumeHan'+'dler']=this['_onInstanc'+'eResume']['bind'](this),this['_onInstanc'+'eStopHandl'+'er']=this['_onInstanc'+'eStop']['bind'](this),this['_onInstanc'+'eEndHandle'+'r']=this['_onInstanc'+'eEnd']['bind'](this));}['play'](_0x2b2dc8){if(this['overlap']||this['stop'](),!this['isLoaded']&&!this['_hasAsset']()){w['warn']('Trying\x20to\x20'+'play\x20Sound'+'Slot\x20'+this['name']+('\x20but\x20it\x20is'+'\x20not\x20loade'+'d\x20and\x20does'+'n\x27t\x20have\x20a'+'n\x20asset.'));return;}let _0x933c5a=_0x2b2dc8;if(_0x933c5a||(_0x933c5a=this['_createIns'+'tance'](),this['instances']['push'](_0x933c5a)),this['isLoaded'])_0x933c5a['play']();else{const _0x35e6e0=function(_0x4bcd9b){const _0x17ce99=_0x933c5a['_playWhenL'+'oaded'];_0x933c5a['sound']=_0x4bcd9b,_0x17ce99&&_0x933c5a['play']();};this['off']('load',_0x35e6e0),this['once']('load',_0x35e6e0),this['load']();}return _0x933c5a;}['pause'](){let _0x170876=!(0x1096+-0x1*-0x935+-0x19ca);const _0x4480df=this['instances'];for(let _0x4a7d26=0x1*0x196c+0x1235*0x1+-0x2ba1,_0x478b90=_0x4480df['length'];_0x4a7d26<_0x478b90;_0x4a7d26++)_0x4480df[_0x4a7d26]['pause']()&&(_0x170876=!(-0x4a*0x29+0x1015+-0x43b*0x1));return _0x170876;}['resume'](){let _0x58e1c0=!(0xd*0x2e3+-0x1888+-0xcfe);const _0x29ab36=this['instances'];for(let _0x51b9c9=-0xc90*-0x1+0xec5+0x1*-0x1b55,_0x1e4a9b=_0x29ab36['length'];_0x51b9c9<_0x1e4a9b;_0x51b9c9++)_0x29ab36[_0x51b9c9]['resume']()&&(_0x58e1c0=!(-0x7de+0x3c+0x7a2));return _0x58e1c0;}['stop'](){let _0x2d9b33=!(0xc75+-0x19f9+0xd85);const _0x457db0=this['instances'];let _0x294aaf=_0x457db0['length'];for(;_0x294aaf--;)_0x457db0[_0x294aaf]['stop'](),_0x2d9b33=!(-0x113*-0x19+0x1447+-0x2f22);return _0x457db0['length']=-0x9cc+-0x1f7f+0xb*0x3c1,_0x2d9b33;}['load'](){if(!this['_hasAsset']())return;const _0x1be791=this['_assets']['get'](this['_asset']);if(!_0x1be791){this['_assets']['off']('add:'+this['_asset'],this['_onAssetAd'+'d'],this),this['_assets']['once']('add:'+this['_asset'],this['_onAssetAd'+'d'],this);return;}if(_0x1be791['off']('remove',this['_onAssetRe'+'moved'],this),_0x1be791['on']('remove',this['_onAssetRe'+'moved'],this),!_0x1be791['resource']){_0x1be791['off']('load',this['_onAssetLo'+'ad'],this),_0x1be791['once']('load',this['_onAssetLo'+'ad'],this),this['_assets']['load'](_0x1be791);return;}this['fire']('load',_0x1be791['resource']);}['setExterna'+'lNodes'](_0x250fd8,_0x38d3af){if(!_0x250fd8){console['error']('The\x20firstN'+'ode\x20must\x20h'+'ave\x20a\x20vali'+'d\x20AudioNod'+'e');return;}if(_0x38d3af||(_0x38d3af=_0x250fd8),this['_firstNode']=_0x250fd8,this['_lastNode']=_0x38d3af,!this['_overlap']){const _0xb890e2=this['instances'];for(let _0x242ee6=0x22ac+-0x1189*0x1+0x29*-0x6b,_0x3de600=_0xb890e2['length'];_0x242ee6<_0x3de600;_0x242ee6++)_0xb890e2[_0x242ee6]['setExterna'+'lNodes'](_0x250fd8,_0x38d3af);}}['clearExter'+'nalNodes'](){if(this['_firstNode']=null,this['_lastNode']=null,!this['_overlap']){const _0x33676b=this['instances'];for(let _0x394c8f=-0x1fa0+-0x1ccb+0x3c6b,_0x24ee1e=_0x33676b['length'];_0x394c8f<_0x24ee1e;_0x394c8f++)_0x33676b[_0x394c8f]['clearExter'+'nalNodes']();}}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_hasAsset'](){return this['_asset']!=null;}['_createIns'+'tance'](){let _0x11c404=null;const _0x3568fc=this['_component'];let _0x5691a7=null;if(this['_hasAsset']()){const _0x1cd0b5=this['_assets']['get'](this['_asset']);_0x1cd0b5&&(_0x5691a7=_0x1cd0b5['resource']);}const _0x262908=lF;return _0x262908['volume']=this['_volume']*_0x3568fc['volume'],_0x262908['pitch']=this['_pitch']*_0x3568fc['pitch'],_0x262908['loop']=this['_loop'],_0x262908['startTime']=this['_startTime'],_0x262908['duration']=this['_duration'],_0x262908['onPlay']=this['_onInstanc'+'ePlayHandl'+'er'],_0x262908['onPause']=this['_onInstanc'+'ePauseHand'+'ler'],_0x262908['onResume']=this['_onInstanc'+'eResumeHan'+'dler'],_0x262908['onStop']=this['_onInstanc'+'eStopHandl'+'er'],_0x262908['onEnd']=this['_onInstanc'+'eEndHandle'+'r'],_0x3568fc['positional']?(_0x262908['position']['copy'](_0x3568fc['entity']['getPositio'+'n']()),_0x262908['maxDistanc'+'e']=_0x3568fc['maxDistanc'+'e'],_0x262908['refDistanc'+'e']=_0x3568fc['refDistanc'+'e'],_0x262908['rollOffFac'+'tor']=_0x3568fc['rollOffFac'+'tor'],_0x262908['distanceMo'+'del']=_0x3568fc['distanceMo'+'del'],_0x11c404=new sn(this['_manager'],_0x5691a7,_0x262908)):_0x11c404=new As(this['_manager'],_0x5691a7,_0x262908),this['_firstNode']&&_0x11c404['setExterna'+'lNodes'](this['_firstNode'],this['_lastNode']),_0x11c404;}['_onInstanc'+'ePlay'](_0x4150a8){this['fire']('play',_0x4150a8),this['_component']['fire']('play',this,_0x4150a8);}['_onInstanc'+'ePause'](_0x57a387){this['fire']('pause',_0x57a387),this['_component']['fire']('pause',this,_0x57a387);}['_onInstanc'+'eResume'](_0x3dada2){this['fire']('resume',_0x3dada2),this['_component']['fire']('resume',this,_0x3dada2);}['_onInstanc'+'eStop'](_0x1e1c5f){const _0x1a019b=this['instances']['indexOf'](_0x1e1c5f);_0x1a019b!==-(0x1df4+-0x1*-0x149b+-0x328e)&&this['instances']['splice'](_0x1a019b,-0x1e53*0x1+-0x7*-0x452+0x16),this['fire']('stop',_0x1e1c5f),this['_component']['fire']('stop',this,_0x1e1c5f);}['_onInstanc'+'eEnd'](_0x5bd806){const _0x37b39b=this['instances']['indexOf'](_0x5bd806);_0x37b39b!==-(-0x3e*0x1+-0x1e*0x95+-0x11b5*-0x1)&&this['instances']['splice'](_0x37b39b,-0x1c92+-0x2139+0x3dcc),this['fire']('end',_0x5bd806),this['_component']['fire']('end',this,_0x5bd806);}['_onAssetAd'+'d'](_0x208e69){this['load']();}['_onAssetLo'+'ad'](_0x58b494){this['load']();}['_onAssetRe'+'moved'](_0x172630){_0x172630['off']('remove',this['_onAssetRe'+'moved'],this),this['_assets']['off']('add:'+_0x172630['id'],this['_onAssetAd'+'d'],this),this['stop']();}['updatePosi'+'tion'](_0x397f0e){const _0x39b1a4=this['instances'];for(let _0x4442eb=-0x8*-0x2ed+0x1a8a+-0x31f2,_0x45b2d6=_0x39b1a4['length'];_0x4442eb<_0x45b2d6;_0x4442eb++)_0x39b1a4[_0x4442eb]['position']=_0x397f0e;}set['asset'](_0x278e24){const _0x3981ca=this['_asset'];if(_0x3981ca){this['_assets']['off']('add:'+_0x3981ca,this['_onAssetAd'+'d'],this);const _0x448eac=this['_assets']['get'](_0x3981ca);_0x448eac&&_0x448eac['off']('remove',this['_onAssetRe'+'moved'],this);}this['_asset']=_0x278e24,this['_asset']instanceof pe&&(this['_asset']=this['_asset']['id']),this['_hasAsset']()&&this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['load']();}get['asset'](){return this['_asset'];}set['autoPlay'](_0x4c537b){this['_autoPlay']=!!_0x4c537b;}get['autoPlay'](){return this['_autoPlay'];}set['duration'](_0xc8b443){if(this['_duration']=Math['max'](-0x1ca3+-0x67f+0x2322,Number(_0xc8b443)||-0x250d+-0x1*-0x1439+0x59c*0x3)||null,!this['_overlap']){const _0x2669a0=this['instances'];for(let _0x2b3182=-0x8fb+-0x1*0xc65+-0x39*-0x60,_0x23f523=_0x2669a0['length'];_0x2b3182<_0x23f523;_0x2b3182++)_0x2669a0[_0x2b3182]['duration']=this['_duration'];}}get['duration'](){let _0x241e0b=0x7c8+-0x3*0xc93+0x1df1;if(this['_hasAsset']()){const _0x5a3f38=this['_assets']['get'](this['_asset']);_0x241e0b=_0x5a3f38!=null&&_0x5a3f38['resource']?_0x5a3f38['resource']['duration']:0x5ef+-0xa*0x1f9+-0x141*-0xb;}return this['_duration']!=null?this['_duration']%(_0x241e0b||0x15*-0x28+0x19c9+-0x1680):_0x241e0b;}get['isLoaded'](){if(this['_hasAsset']()){const _0x49c013=this['_assets']['get'](this['_asset']);if(_0x49c013)return!!_0x49c013['resource'];}return!(0x1*-0xed+-0x11a1+0x128f);}get['isPaused'](){const _0x3164f8=this['instances'],_0x23186a=_0x3164f8['length'];if(_0x23186a===-0x1*0x65+-0x1745+0x17aa)return!(-0x7d2+-0x182b+0x555*0x6);for(let _0x2c9dbf=-0x34*-0x53+0x23c4+0xd28*-0x4;_0x2c9dbf<_0x23186a;_0x2c9dbf++)if(!_0x3164f8[_0x2c9dbf]['isPaused'])return!(0x127*-0x7+0x11*0x38+0x45a);return!(0x5*0x1ca+0x15d*-0x3+-0x4db);}get['isPlaying'](){const _0x3b57f0=this['instances'];for(let _0x504904=-0x188*0xc+-0x1e6a+0xa*0x4e1,_0x2d9f8b=_0x3b57f0['length'];_0x504904<_0x2d9f8b;_0x504904++)if(_0x3b57f0[_0x504904]['isPlaying'])return!(0x1fc*-0xa+0x9*-0x191+0x21f1);return!(0x3*0x509+-0x248f*0x1+-0x3*-0x727);}get['isStopped'](){const _0x247b72=this['instances'];for(let _0x204d77=0x56b+-0x138f+0xe24,_0x1a3d8f=_0x247b72['length'];_0x204d77<_0x1a3d8f;_0x204d77++)if(!_0x247b72[_0x204d77]['isStopped'])return!(0x2705*0x1+-0x239a+-0x36a);return!(-0x1d77+0x17*-0x53+0x24ec);}set['loop'](_0x18709b){this['_loop']=!!_0x18709b;const _0x327843=this['instances'];for(let _0x14e34b=0x2*0xef8+-0x5*0x1b7+0x71f*-0x3,_0x58c26d=_0x327843['length'];_0x14e34b<_0x58c26d;_0x14e34b++)_0x327843[_0x14e34b]['loop']=this['_loop'];}get['loop'](){return this['_loop'];}set['overlap'](_0x335dcd){this['_overlap']=!!_0x335dcd;}get['overlap'](){return this['_overlap'];}set['pitch'](_0x5e1f04){if(this['_pitch']=Math['max'](Number(_0x5e1f04)||0x10e1+0x5*-0x2a7+0x39e*-0x1,0xaf4+-0x335+-0x7bf+0.01),!this['_overlap']){const _0x16fb48=this['instances'];for(let _0x1f6bfb=-0x8bb+-0x959*-0x1+-0x9e,_0x38f102=_0x16fb48['length'];_0x1f6bfb<_0x38f102;_0x1f6bfb++)_0x16fb48[_0x1f6bfb]['pitch']=this['pitch']*this['_component']['pitch'];}}get['pitch'](){return this['_pitch'];}set['startTime'](_0x1dafe8){if(this['_startTime']=Math['max'](0x923+-0x1c31+0x21e*0x9,Number(_0x1dafe8)||0x1fd*0x1+0x257a+-0x2777*0x1),!this['_overlap']){const _0x345178=this['instances'];for(let _0x58d32f=0x37*0x49+0x15d9+0x2588*-0x1,_0x2e3fb7=_0x345178['length'];_0x58d32f<_0x2e3fb7;_0x58d32f++)_0x345178[_0x58d32f]['startTime']=this['_startTime'];}}get['startTime'](){return this['_startTime'];}set['volume'](_0x243487){if(this['_volume']=Y['clamp'](Number(_0x243487)||0x33*-0x6b+0x131e+0x233,-0x23cd+-0x3c9+0x2796,0x1c2d*0x1+-0x13c2+-0x86a),!this['_overlap']){const _0x1e346d=this['instances'];for(let _0x464d6a=0x141d+-0x2677+0x125a,_0x5e311e=_0x1e346d['length'];_0x464d6a<_0x5e311e;_0x464d6a++)_0x1e346d[_0x464d6a]['volume']=this['_volume']*this['_component']['volume'];}}get['volume'](){return this['_volume'];}}h(Gi,'EVENT_PLAY','play'),h(Gi,'EVENT_PAUS'+'E','pause'),h(Gi,'EVENT_RESU'+'ME','resume'),h(Gi,'EVENT_STOP','stop'),h(Gi,'EVENT_END','end'),h(Gi,'EVENT_LOAD','load');class Kr extends we{constructor(){super(...arguments),h(this,'_volume',-0x3*0x9f5+-0xc*-0x2d+-0x6f1*-0x4),h(this,'_pitch',-0x6e4+-0xde9+0x1*0x14ce),h(this,'_positiona'+'l',!(0x1*0x1073+-0x141*-0x1+0x67*-0x2c)),h(this,'_refDistan'+'ce',0x365*0x1+0x1f*-0xf5+-0x7*-0x3c1),h(this,'_maxDistan'+'ce',-0x29a3+0xf6*-0x3e+-0x1*-0x8c47),h(this,'_rollOffFa'+'ctor',-0xe57*0x1+0x1332+-0x4da),h(this,'_distanceM'+'odel',Vp),h(this,'_slots',{}),h(this,'_playingBe'+'foreDisabl'+'e',{});}['_updateSou'+'ndInstance'+'s'](_0x39192e,_0x37f104,_0x1c2733){const _0x357d08=this['_slots'];for(const _0x42850c in _0x357d08){const _0xe7d034=_0x357d08[_0x42850c];if(!_0xe7d034['overlap']){const _0x162902=_0xe7d034['instances'];for(let _0x113021=0x15d4+0x483+-0x1a57,_0x3e512a=_0x162902['length'];_0x113021<_0x3e512a;_0x113021++)_0x162902[_0x113021][_0x39192e]=_0x1c2733?_0xe7d034[_0x39192e]*_0x37f104:_0x37f104;}}}set['distanceMo'+'del'](_0x4d4622){this['_distanceM'+'odel']=_0x4d4622,this['_updateSou'+'ndInstance'+'s']('distanceMo'+'del',_0x4d4622,!(0x130+-0x1fcf+0x1ea0));}get['distanceMo'+'del'](){return this['_distanceM'+'odel'];}set['maxDistanc'+'e'](_0x3c0697){this['_maxDistan'+'ce']=_0x3c0697,this['_updateSou'+'ndInstance'+'s']('maxDistanc'+'e',_0x3c0697,!(-0x15dd*0x1+-0x1*-0x985+0xc59));}get['maxDistanc'+'e'](){return this['_maxDistan'+'ce'];}set['refDistanc'+'e'](_0x3be85f){this['_refDistan'+'ce']=_0x3be85f,this['_updateSou'+'ndInstance'+'s']('refDistanc'+'e',_0x3be85f,!(0xbb7*-0x1+0x6d7*-0x1+0x1*0x128f));}get['refDistanc'+'e'](){return this['_refDistan'+'ce'];}set['rollOffFac'+'tor'](_0x4148fb){this['_rollOffFa'+'ctor']=_0x4148fb,this['_updateSou'+'ndInstance'+'s']('rollOffFac'+'tor',_0x4148fb,!(-0x55a+0xda8*-0x1+-0x1303*-0x1));}get['rollOffFac'+'tor'](){return this['_rollOffFa'+'ctor'];}set['pitch'](_0x2520e0){this['_pitch']=_0x2520e0,this['_updateSou'+'ndInstance'+'s']('pitch',_0x2520e0,!(-0xe57*0x1+0xe8e+0xb*-0x5));}get['pitch'](){return this['_pitch'];}set['volume'](_0x1716b9){this['_volume']=_0x1716b9,this['_updateSou'+'ndInstance'+'s']('volume',_0x1716b9,!(-0x182*-0x1+0x1*0x539+-0x6bb));}get['volume'](){return this['_volume'];}set['positional'](_0xe99c07){this['_positiona'+'l']=_0xe99c07;const _0x43ccad=this['_slots'];for(const _0x450270 in _0x43ccad){const _0x1cdc66=_0x43ccad[_0x450270];if(!_0x1cdc66['overlap']){const _0x2c1b68=_0x1cdc66['instances'],_0x4801aa=_0x2c1b68['length'];for(let _0xfe24a1=_0x4801aa-(0x3*0x871+0x20*0x100+-0x1fa*0x1d);_0xfe24a1>=0x6*-0x31a+-0x92f+0x1bcb;_0xfe24a1--){const _0x1aa1bc=_0x2c1b68[_0xfe24a1]['isPlaying']||_0x2c1b68[_0xfe24a1]['isSuspende'+'d'],_0x531fde=_0x2c1b68[_0xfe24a1]['currentTim'+'e'];_0x1aa1bc&&_0x2c1b68[_0xfe24a1]['stop']();const _0x53bfa5=_0x1cdc66['_createIns'+'tance']();_0x1aa1bc&&(_0x53bfa5['play'](),_0x53bfa5['currentTim'+'e']=_0x531fde),_0x2c1b68['push'](_0x53bfa5);}}}}get['positional'](){return this['_positiona'+'l'];}set['slots'](_0x4578de){const _0x8b077b=this['_slots'];if(_0x8b077b){for(const _0x27de01 in _0x8b077b)_0x8b077b[_0x27de01]['stop']();}const _0x38af8c={};for(const _0x2e793e in _0x4578de)_0x4578de[_0x2e793e]instanceof Gi?_0x38af8c[_0x4578de[_0x2e793e]['name']]=_0x4578de[_0x2e793e]:_0x4578de[_0x2e793e]['name']&&(_0x38af8c[_0x4578de[_0x2e793e]['name']]=new Gi(this,_0x4578de[_0x2e793e]['name'],_0x4578de[_0x2e793e]));this['_slots']=_0x38af8c,this['enabled']&&this['entity']['enabled']&&this['onEnable']();}get['slots'](){return this['_slots'];}['onEnable'](){if(this['system']['_inTools'])return;const _0x474748=this['_slots'],_0x538a90=this['_playingBe'+'foreDisabl'+'e'];for(const _0x152844 in _0x474748){const _0x39f8b1=_0x474748[_0x152844];_0x39f8b1['autoPlay']&&_0x39f8b1['isStopped']?_0x39f8b1['play']():_0x538a90[_0x152844]?_0x39f8b1['resume']():_0x39f8b1['isLoaded']||_0x39f8b1['load']();}}['onDisable'](){const _0x50449d=this['_slots'],_0x4cee00={};for(const _0x6ac87b in _0x50449d)_0x50449d[_0x6ac87b]['overlap']||_0x50449d[_0x6ac87b]['isPlaying']&&(_0x50449d[_0x6ac87b]['pause'](),_0x4cee00[_0x6ac87b]=!(0x18ae+0x1*-0x16a9+0xb*-0x2f));this['_playingBe'+'foreDisabl'+'e']=_0x4cee00;}['onRemove'](){this['off']();}['addSlot'](_0x4411fc,_0xf6a373){const _0x287785=this['_slots'];if(_0x287785[_0x4411fc])return w['warn']('A\x20sound\x20sl'+'ot\x20with\x20na'+'me\x20'+_0x4411fc+('\x20already\x20e'+'xists\x20on\x20E'+'ntity\x20')+this['entity']['path']),null;const _0x32d6fd=new Gi(this,_0x4411fc,_0xf6a373);return _0x287785[_0x4411fc]=_0x32d6fd,_0x32d6fd['autoPlay']&&this['enabled']&&this['entity']['enabled']&&_0x32d6fd['play'](),_0x32d6fd;}['removeSlot'](_0x1c7ef7){const _0x1102af=this['_slots'];_0x1102af[_0x1c7ef7]&&(_0x1102af[_0x1c7ef7]['stop'](),delete _0x1102af[_0x1c7ef7]);}['slot'](_0x3b717b){return this['_slots'][_0x3b717b];}['_getSlotPr'+'operty'](_0x50ff93,_0x58a596){if(!this['enabled']||!this['entity']['enabled'])return;const _0x1c84be=this['_slots'][_0x50ff93];if(!_0x1c84be){w['warn']('Trying\x20to\x20'+'get\x20'+_0x58a596+('\x20from\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20')+_0x50ff93+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}return _0x1c84be[_0x58a596];}['isPlaying'](_0x1088a3){return this['_getSlotPr'+'operty'](_0x1088a3,'isPlaying')||!(-0x162d+0x121d*-0x1+0x284b);}['isLoaded'](_0x1a4ddb){return this['_getSlotPr'+'operty'](_0x1a4ddb,'isLoaded')||!(0x2*-0x131c+-0x3*-0x741+0x2*0x83b);}['isPaused'](_0x32b80c){return this['_getSlotPr'+'operty'](_0x32b80c,'isPaused')||!(0x1e6*-0x13+-0x57d+0x2990);}['isStopped'](_0x48c538){return this['_getSlotPr'+'operty'](_0x48c538,'isStopped')||!(-0xc*0x180+-0xe5*-0x1+0x111c*0x1);}['play'](_0x265ca7){if(!this['enabled']||!this['entity']['enabled'])return null;const _0x3bc04a=this['_slots'][_0x265ca7];return _0x3bc04a?_0x3bc04a['play']():(w['warn']('Trying\x20to\x20'+'play\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x265ca7+('\x20which\x20doe'+'s\x20not\x20exis'+'t')),null);}['pause'](_0x19b6b0){const _0x226a3b=this['_slots'];if(_0x19b6b0){const _0x16612f=_0x226a3b[_0x19b6b0];if(!_0x16612f){w['warn']('Trying\x20to\x20'+'pause\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20'+_0x19b6b0+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x16612f['pause']();}else{for(const _0x446cd4 in _0x226a3b)_0x226a3b[_0x446cd4]['pause']();}}['resume'](_0x2c04e4){const _0x996187=this['_slots'];if(_0x2c04e4){const _0x257208=_0x996187[_0x2c04e4];if(!_0x257208){w['warn']('Trying\x20to\x20'+'resume\x20sou'+'nd\x20slot\x20wi'+'th\x20name\x20'+_0x2c04e4+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x257208['isPaused']&&_0x257208['resume']();}else{for(const _0x4bc121 in _0x996187)_0x996187[_0x4bc121]['resume']();}}['stop'](_0xab8d35){const _0x20de22=this['_slots'];if(_0xab8d35){const _0x1525a7=_0x20de22[_0xab8d35];if(!_0x1525a7){w['warn']('Trying\x20to\x20'+'stop\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0xab8d35+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x1525a7['stop']();}else{for(const _0x2cf2a2 in _0x20de22)_0x20de22[_0x2cf2a2]['stop']();}}}h(Kr,'EVENT_PLAY','play'),h(Kr,'EVENT_PAUS'+'E','pause'),h(Kr,'EVENT_RESU'+'ME','resume'),h(Kr,'EVENT_STOP','stop'),h(Kr,'EVENT_END','end');class cF{constructor(){this['enabled']=!(-0xd4f+-0x14f*0x1c+0x31f3);}}const d0=['enabled'];class hF extends ct{constructor(_0x251bad){super(_0x251bad),this['id']='sound',this['ComponentT'+'ype']=Kr,this['DataType']=cF,this['schema']=d0,this['manager']=_0x251bad['soundManag'+'er'],w['assert'](this['manager'],'SoundCompo'+'nentSystem'+'\x20cannot\x20be'+'\x20created\x20w'+'ithout\x20sou'+'nd\x20manager'),this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['volume'](_0x2bf28b){this['manager']['volume']=_0x2bf28b;}get['volume'](){return this['manager']['volume'];}get['context'](){return Dl()?this['manager']['context']:(w['warn']('WARNING:\x20A'+'udio\x20conte'+'xt\x20is\x20not\x20'+'supported\x20'+'on\x20this\x20br'+'owser'),null);}['initialize'+'ComponentD'+'ata'](_0x16e77b,_0x43d2b6,_0x3d8372){_0x3d8372=['volume','pitch','positional','refDistanc'+'e','maxDistanc'+'e','rollOffFac'+'tor','distanceMo'+'del','slots'];for(let _0x16ffca=-0x24f2+0xc0+0x2432;_0x16ffca<_0x3d8372['length'];_0x16ffca++)_0x43d2b6['hasOwnProp'+'erty'](_0x3d8372[_0x16ffca])&&(_0x16e77b[_0x3d8372[_0x16ffca]]=_0x43d2b6[_0x3d8372[_0x16ffca]]);super['initialize'+'ComponentD'+'ata'](_0x16e77b,_0x43d2b6,['enabled']);}['cloneCompo'+'nent'](_0xe539b0,_0x3b68e3){const _0x1a7792=_0xe539b0['sound'],_0x18e91a=_0x1a7792['slots'],_0x346eaf={};for(const _0x14e31a in _0x18e91a){const _0x372dd3=_0x18e91a[_0x14e31a];_0x346eaf[_0x14e31a]={'name':_0x372dd3['name'],'volume':_0x372dd3['volume'],'pitch':_0x372dd3['pitch'],'loop':_0x372dd3['loop'],'duration':_0x372dd3['duration'],'startTime':_0x372dd3['startTime'],'overlap':_0x372dd3['overlap'],'autoPlay':_0x372dd3['autoPlay'],'asset':_0x372dd3['asset']};}const _0x1ba0f5={'distanceModel':_0x1a7792['distanceMo'+'del'],'enabled':_0x1a7792['enabled'],'maxDistance':_0x1a7792['maxDistanc'+'e'],'pitch':_0x1a7792['pitch'],'positional':_0x1a7792['positional'],'refDistance':_0x1a7792['refDistanc'+'e'],'rollOffFactor':_0x1a7792['rollOffFac'+'tor'],'slots':_0x346eaf,'volume':_0x1a7792['volume']};return this['addCompone'+'nt'](_0x3b68e3,_0x1ba0f5);}['onUpdate'](_0x3a7b0a){const _0xdd8839=this['store'];for(const _0x55ba0f in _0xdd8839)if(_0xdd8839['hasOwnProp'+'erty'](_0x55ba0f)){const _0x36924c=_0xdd8839[_0x55ba0f]['entity'];if(_0x36924c['enabled']){const _0x2f12de=_0x36924c['sound'];if(_0x2f12de['enabled']&&_0x2f12de['positional']){const _0x2f176e=_0x36924c['getPositio'+'n'](),_0x4e4ac5=_0x2f12de['slots'];for(const _0x4836ac in _0x4e4ac5)_0x4e4ac5[_0x4836ac]['updatePosi'+'tion'](_0x2f176e);}}}}['onBeforeRe'+'move'](_0x2d61d5,_0xe6a3be){const _0x2e0f7e=_0xe6a3be['slots'];for(const _0x147add in _0x2e0f7e)_0x2e0f7e[_0x147add]['overlap']||_0x2e0f7e[_0x147add]['stop']();_0xe6a3be['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Kr['prototype'],d0);const lS='simple',cS='animated';class Hi extends me{constructor(_0x28385c,_0xf6cdf){super(),h(this,'_evtSetMes'+'hes',null),(this['_component']=_0x28385c,this['_frame']=-0x1*0x1b6b+-0x1f1*-0x2+0x1789,this['_sprite']=null,this['_spriteAss'+'et']=null,this['spriteAsse'+'t']=_0xf6cdf['spriteAsse'+'t'],this['name']=_0xf6cdf['name'],this['fps']=_0xf6cdf['fps']||0x2*0x1369+0xa9*-0x35+-0x3d5*0x1,this['loop']=_0xf6cdf['loop']||!(0x1*-0x1fbf+-0x5*-0x293+-0x3*-0x64b),this['_playing']=!(0x2c3*-0x8+-0x1feb+0x3604),this['_paused']=!(-0x1121+-0x1346+0x2468),this['_time']=0xb8+-0x1940+-0x311*-0x8);}get['duration'](){if(this['_sprite']){const _0x248c75=this['fps']||Number['MIN_VALUE'];return this['_sprite']['frameKeys']['length']/Math['abs'](_0x248c75);}return 0x5ab*0x4+0x1*0x1c7f+-0x332b;}set['frame'](_0x568546){this['_setFrame'](_0x568546);const _0xdbf13a=this['fps']||Number['MIN_VALUE'];this['_setTime'](this['_frame']/_0xdbf13a);}get['frame'](){return this['_frame'];}get['isPaused'](){return this['_paused'];}get['isPlaying'](){return this['_playing'];}set['sprite'](_0x5e80d7){var _0x364824;if(this['_sprite']&&((_0x364824=this['_evtSetMes'+'hes'])==null||_0x364824['off'](),this['_evtSetMes'+'hes']=null,this['_sprite']['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['off']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['off']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_sprite']=_0x5e80d7,this['_sprite']&&(this['_evtSetMes'+'hes']=this['_sprite']['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['on']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['on']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_component']['currentCli'+'p']===this){let _0x56db3a;!_0x5e80d7||!_0x5e80d7['atlas']?(_0x56db3a=this['_component']['_meshInsta'+'nce'],_0x56db3a&&(_0x56db3a['deletePara'+'meter']('texture_em'+'issiveMap'),_0x56db3a['deletePara'+'meter']('texture_op'+'acityMap')),this['_component']['_hideModel']()):(_0x5e80d7['atlas']['texture']&&(_0x56db3a=this['_component']['_meshInsta'+'nce'],_0x56db3a&&(_0x56db3a['setParamet'+'er']('texture_em'+'issiveMap',_0x5e80d7['atlas']['texture']),_0x56db3a['setParamet'+'er']('texture_op'+'acityMap',_0x5e80d7['atlas']['texture'])),this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['_component']['_showModel']()),this['time']&&this['fps']?this['time']=this['time']:this['frame']=this['frame']);}}get['sprite'](){return this['_sprite'];}set['spriteAsse'+'t'](_0xb25939){const _0x29b989=this['_component']['system']['app']['assets'];let _0x5de0a1=_0xb25939;if(_0xb25939 instanceof pe&&(_0x5de0a1=_0xb25939['id']),this['_spriteAss'+'et']!==_0x5de0a1){if(this['_spriteAss'+'et']){const _0x5f4735=_0x29b989['get'](this['_spriteAss'+'et']);_0x5f4735&&this['_unbindSpr'+'iteAsset'](_0x5f4735);}if(this['_spriteAss'+'et']=_0x5de0a1,this['_spriteAss'+'et']){const _0xfdafa0=_0x29b989['get'](this['_spriteAss'+'et']);_0xfdafa0?this['_bindSprit'+'eAsset'](_0xfdafa0):(this['sprite']=null,_0x29b989['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['time'](_0xd12bb6){this['_setTime'](_0xd12bb6),this['_sprite']?this['frame']=Math['min'](this['_sprite']['frameKeys']['length']-(0x2a*0x71+-0x1*-0x21e3+-0x346c*0x1),Math['floor'](this['_time']*Math['abs'](this['fps']))):this['frame']=0xcd*0x29+0x245a+-0xc7*0x59;}get['time'](){return this['_time'];}['_onSpriteA'+'ssetAdded'](_0x346c96){this['_component']['system']['app']['assets']['off']('add:'+_0x346c96['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x346c96['id']&&this['_bindSprit'+'eAsset'](_0x346c96);}['_bindSprit'+'eAsset'](_0x4e865a){_0x4e865a['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x4e865a['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x4e865a['resource']?this['_onSpriteA'+'ssetLoad'](_0x4e865a):this['_component']['system']['app']['assets']['load'](_0x4e865a);}['_unbindSpr'+'iteAsset'](_0x3a1b4a){_0x3a1b4a&&(_0x3a1b4a['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x3a1b4a['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x3a1b4a['resource']&&!_0x3a1b4a['resource']['atlas']&&this['_component']['system']['app']['assets']['off']('load:'+_0x3a1b4a['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this));}['_onSpriteA'+'ssetLoad'](_0x328a8c){if(!_0x328a8c['resource'])this['sprite']=null;else{if(_0x328a8c['resource']['atlas'])this['sprite']=_0x328a8c['resource'];else{const _0x243a29=_0x328a8c['data']['textureAtl'+'asAsset'],_0x506bf4=this['_component']['system']['app']['assets'];_0x506bf4['off']('load:'+_0x243a29,this['_onTexture'+'AtlasLoad'],this),_0x506bf4['once']('load:'+_0x243a29,this['_onTexture'+'AtlasLoad'],this);}}}['_onTexture'+'AtlasLoad'](_0x575943){const _0x426bf2=this['_spriteAss'+'et'];_0x426bf2 instanceof pe?this['_onSpriteA'+'ssetLoad'](_0x426bf2):this['_onSpriteA'+'ssetLoad'](this['_component']['system']['app']['assets']['get'](_0x426bf2));}['_onSpriteA'+'ssetRemove'](_0x187d18){this['sprite']=null;}['_onSpriteM'+'eshesChang'+'e'](){this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['frame']);}['_onSpriteP'+'puChanged'](){this['_component']['currentCli'+'p']===this&&this['sprite']['renderMode']!==ci&&this['_component']['_showFrame'](this['frame']);}['_update'](_0x2c5882){if(this['fps']===-0x12c9*-0x1+-0xdb2+0x1*-0x517||!this['_playing']||this['_paused']||!this['_sprite'])return;const _0x4724ff=this['fps']<0x1e14+0x16c0+-0x34d4?-(-0x2471+0x15*0x97+0x180f):0x13*0x104+-0x1013+-0x338,_0x4adfdb=this['_time']+_0x2c5882*this['_component']['speed']*_0x4724ff,_0x3d93f7=this['duration'],_0x1e5156=_0x4adfdb>_0x3d93f7||_0x4adfdb<0x416*-0x3+-0x145a+0x2*0x104e;this['_setTime'](_0x4adfdb);let _0x299e38=this['frame'];this['_sprite']?_0x299e38=Math['floor'](this['_sprite']['frameKeys']['length']*this['_time']/_0x3d93f7):_0x299e38=-0x2*0xf82+0x1*0xa63+0x14a1,_0x299e38!==this['_frame']&&this['_setFrame'](_0x299e38),_0x1e5156&&(this['loop']?(this['fire']('loop'),this['_component']['fire']('loop',this)):(this['_playing']=!(0x1ab9+-0x19d*-0xd+0x1d*-0x1a5),this['_paused']=!(-0x35*-0x29+-0x2*-0x1fb+-0xc72),this['fire']('end'),this['_component']['fire']('end',this)));}['_setTime'](_0x37dbb5){this['_time']=_0x37dbb5;const _0x2e7ba2=this['duration'];this['_time']<-0x23af+0x832+0x1b7d?this['loop']?this['_time']=this['_time']%_0x2e7ba2+_0x2e7ba2:this['_time']=0x66*0x2e+-0x272*0xb+0x892:this['_time']>_0x2e7ba2&&(this['loop']?this['_time']%=_0x2e7ba2:this['_time']=_0x2e7ba2);}['_setFrame'](_0x2f80dc){this['_sprite']?this['_frame']=Y['clamp'](_0x2f80dc,0x1*-0xfa1+-0x5*0x6cd+0x31a2,this['_sprite']['frameKeys']['length']-(-0x4ea+0x1707+-0x121c)):this['_frame']=_0x2f80dc,this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['_frame']);}['_destroy'](){if(this['_spriteAss'+'et']){const _0x2f5acf=this['_component']['system']['app']['assets'];this['_unbindSpr'+'iteAsset'](_0x2f5acf['get'](this['_spriteAss'+'et']));}this['_sprite']&&(this['sprite']=null),this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null);}['play'](){this['_playing']||(this['_playing']=!(0x5b1+0x818+-0xdc9),this['_paused']=!(0x1e51+-0x3*0xac1+-0x1*-0x1f3),this['frame']=0x1*-0x1e6f+0x1*-0x1898+-0x3707*-0x1,this['fire']('play'),this['_component']['fire']('play',this));}['pause'](){!this['_playing']||this['_paused']||(this['_paused']=!(0x94a*-0x4+0x189a+0xc8e),this['fire']('pause'),this['_component']['fire']('pause',this));}['resume'](){this['_paused']&&(this['_paused']=!(-0x658+0x5d5+0x1*0x84),this['fire']('resume'),this['_component']['fire']('resume',this));}['stop'](){this['_playing']&&(this['_playing']=!(-0x1*0xd1c+0x4ed*0x4+-0x697),this['_paused']=!(-0x1*-0x20c3+-0x9b8+-0x1*0x170a),this['_time']=0x47*-0x3+0x94d+0x878*-0x1,this['frame']=0xfd0+0x3*0x2a5+-0x1*0x17bf,this['fire']('stop'),this['_component']['fire']('stop',this));}}h(Hi,'EVENT_PLAY','play'),h(Hi,'EVENT_PAUS'+'E','pause'),h(Hi,'EVENT_RESU'+'ME','resume'),h(Hi,'EVENT_STOP','stop'),h(Hi,'EVENT_END','end'),h(Hi,'EVENT_LOOP','loop');const hS='texture_em'+'issiveMap',dS='texture_op'+'acityMap',fS='material_e'+'missive',uS='material_o'+'pacity',dF='innerOffse'+'t',fF='outerScale',uF='atlasRect';class ur extends we{constructor(_0x34320c,_0x328552){super(_0x34320c,_0x328552),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_type']=lS,this['_material']=_0x34320c['defaultMat'+'erial'],this['_color']=new ie(0x7*-0x1e2+0x20c9+-0x139a,0x14a*-0xb+0x23fa+-0x15cb,0x2f*0x11+-0xce6+-0x272*-0x4,0xcee+-0x1729+-0xa*-0x106),this['_colorUnif'+'orm']=new Float32Array(0x14*-0x2f+-0x8b*-0x1a+-0xa6f),this['_speed']=-0x1*0x584+-0x958+0xedd,this['_flipX']=!(-0x35*0x3e+0x3a*-0xa7+0x32ad),this['_flipY']=!(0xb*-0x16f+0x973+0x653),this['_width']=0xc3b+-0x108e+-0x1*-0x454,this['_height']=-0x19c3+0x3b1+-0x1*-0x1613,this['_drawOrder']=-0x1*-0x1a3+0xff8+-0x119b*0x1,this['_layers']=[er],this['_outerScal'+'e']=new J(-0x1*-0x1416+-0x2*-0xe43+-0x309b,0x1061+-0x197b+0x91b),this['_outerScal'+'eUniform']=new Float32Array(-0x3bf+0x1090+0xccf*-0x1),this['_innerOffs'+'et']=new re(),this['_innerOffs'+'etUniform']=new Float32Array(-0x57a+-0xd4d+-0x11*-0x11b),this['_atlasRect']=new re(),this['_atlasRect'+'Uniform']=new Float32Array(-0xc*-0x26c+-0x3*0xb74+0x2*0x2a8),this['_batchGrou'+'pId']=-(0xe96+0x1*0x213f+-0x2fd4),this['_batchGrou'+'p']=null,this['_node']=new Ie(),this['_model']=new sr(),this['_model']['graph']=this['_node'],this['_meshInsta'+'nce']=null,_0x328552['addChild'](this['_model']['graph']),this['_model']['_entity']=_0x328552,this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_addedMode'+'l']=!(0x55c*-0x5+-0x1995+0x3462),this['_autoPlayC'+'lip']=null,this['_clips']={},this['_defaultCl'+'ip']=new Hi(this,{'name':this['entity']['name'],'fps':0x0,'loop':!(-0x372+-0xe*0x27d+-0x9*-0x441),'spriteAsset':null}),this['_currentCl'+'ip']=this['_defaultCl'+'ip']);}set['type'](_0x349dd1){this['_type']!==_0x349dd1&&(this['_type']=_0x349dd1,this['_type']===lS?(this['stop'](),this['_currentCl'+'ip']=this['_defaultCl'+'ip'],this['enabled']&&this['entity']['enabled']&&(this['_currentCl'+'ip']['frame']=this['frame'],this['_currentCl'+'ip']['sprite']?this['_showModel']():this['_hideModel']())):this['_type']===cS&&(this['stop'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_currentCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['enabled']&&this['entity']['enabled']?this['_showModel']():this['_hideModel']()));}get['type'](){return this['_type'];}set['frame'](_0x32d50c){this['_currentCl'+'ip']['frame']=_0x32d50c;}get['frame'](){return this['_currentCl'+'ip']['frame'];}set['spriteAsse'+'t'](_0x1f4ede){this['_defaultCl'+'ip']['spriteAsse'+'t']=_0x1f4ede;}get['spriteAsse'+'t'](){return this['_defaultCl'+'ip']['_spriteAss'+'et'];}set['sprite'](_0x48fe02){this['_currentCl'+'ip']['sprite']=_0x48fe02;}get['sprite'](){return this['_currentCl'+'ip']['sprite'];}set['material'](_0x4cd6de){this['_material']=_0x4cd6de,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=_0x4cd6de);}get['material'](){return this['_material'];}set['color'](_0x4abf38){this['_color']['r']=_0x4abf38['r'],this['_color']['g']=_0x4abf38['g'],this['_color']['b']=_0x4abf38['b'],this['_meshInsta'+'nce']&&(this['_colorUnif'+'orm'][0x47*-0x13+0x162a+-0x5*0x361]=this['_color']['r'],this['_colorUnif'+'orm'][-0x1f44+0x1*0x1607+0x93e]=this['_color']['g'],this['_colorUnif'+'orm'][-0x456+0x2414+-0x1fbc]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](fS,this['_colorUnif'+'orm']));}get['color'](){return this['_color'];}set['opacity'](_0x19934e){this['_color']['a']=_0x19934e,this['_meshInsta'+'nce']&&this['_meshInsta'+'nce']['setParamet'+'er'](uS,_0x19934e);}get['opacity'](){return this['_color']['a'];}set['clips'](_0xb76ea9){if(!_0xb76ea9){for(const _0x30460b in this['_clips'])this['removeClip'](_0x30460b);return;}for(const _0x158d42 in this['_clips']){let _0x3c3864=!(0xf0d+0x1*-0x1a49+-0x3*-0x3bf);for(const _0x27b571 in _0xb76ea9)if(_0xb76ea9[_0x27b571]['name']===_0x158d42){_0x3c3864=!(0xd*0x1b+0x2*0xec+-0x337),this['_clips'][_0x158d42]['fps']=_0xb76ea9[_0x27b571]['fps'],this['_clips'][_0x158d42]['loop']=_0xb76ea9[_0x27b571]['loop'],_0xb76ea9[_0x27b571]['hasOwnProp'+'erty']('sprite')?this['_clips'][_0x158d42]['sprite']=_0xb76ea9[_0x27b571]['sprite']:_0xb76ea9[_0x27b571]['hasOwnProp'+'erty']('spriteAsse'+'t')&&(this['_clips'][_0x158d42]['spriteAsse'+'t']=_0xb76ea9[_0x27b571]['spriteAsse'+'t']);break;}_0x3c3864||this['removeClip'](_0x158d42);}for(const _0x444a5e in _0xb76ea9)this['_clips'][_0xb76ea9[_0x444a5e]['name']]||this['addClip'](_0xb76ea9[_0x444a5e]);this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['sprite'])&&this['_hideModel']();}get['clips'](){return this['_clips'];}get['currentCli'+'p'](){return this['_currentCl'+'ip'];}set['speed'](_0x582603){this['_speed']=_0x582603;}get['speed'](){return this['_speed'];}set['flipX'](_0x434672){this['_flipX']!==_0x434672&&(this['_flipX']=_0x434672,this['_updateTra'+'nsform']());}get['flipX'](){return this['_flipX'];}set['flipY'](_0x2450a0){this['_flipY']!==_0x2450a0&&(this['_flipY']=_0x2450a0,this['_updateTra'+'nsform']());}get['flipY'](){return this['_flipY'];}set['width'](_0x24b97c){_0x24b97c!==this['_width']&&(this['_width']=_0x24b97c,this['_outerScal'+'e']['x']=this['_width'],this['sprite']&&(this['sprite']['renderMode']===Mt||this['sprite']['renderMode']===Pt)&&this['_updateTra'+'nsform']());}get['width'](){return this['_width'];}set['height'](_0x32f048){_0x32f048!==this['_height']&&(this['_height']=_0x32f048,this['_outerScal'+'e']['y']=this['height'],this['sprite']&&(this['sprite']['renderMode']===Mt||this['sprite']['renderMode']===Pt)&&this['_updateTra'+'nsform']());}get['height'](){return this['_height'];}set['batchGroup'+'Id'](_0x3fc08b){var _0x6f3a82,_0x52288f;if(this['_batchGrou'+'pId']===_0x3fc08b)return;const _0x1a666c=this['_batchGrou'+'pId'];this['_batchGrou'+'pId']=_0x3fc08b,this['entity']['enabled']&&_0x1a666c>=0x98e*-0x2+0xc41*0x1+0x6db&&((_0x6f3a82=this['system']['app']['batcher'])==null||_0x6f3a82['remove'](St['SPRITE'],_0x1a666c,this['entity'])),this['entity']['enabled']&&_0x3fc08b>=-0x12b0+0xd*0x232+-0xc2*0xd?(_0x52288f=this['system']['app']['batcher'])==null||_0x52288f['insert'](St['SPRITE'],_0x3fc08b,this['entity']):_0x1a666c>=-0x1*0x1ed+0x5c9*-0x5+0x1eda*0x1&&this['_currentCl'+'ip']&&this['_currentCl'+'ip']['sprite']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['autoPlayCl'+'ip'](_0x46f658){this['_autoPlayC'+'lip']=_0x46f658 instanceof Hi?_0x46f658['name']:_0x46f658,this['_tryAutoPl'+'ay']();}get['autoPlayCl'+'ip'](){return this['_autoPlayC'+'lip'];}set['drawOrder'](_0x66128c){this['_drawOrder']=_0x66128c,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['drawOrder']=_0x66128c);}get['drawOrder'](){return this['_drawOrder'];}set['layers'](_0x2f9177){this['_addedMode'+'l']&&this['_hideModel'](),this['_layers']=_0x2f9177,this['_meshInsta'+'nce']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['layers'](){return this['_layers'];}get['aabb'](){return this['_meshInsta'+'nce']?this['_meshInsta'+'nce']['aabb']:null;}['onEnable'](){var _0x201e9d;const _0x59fb8d=this['system']['app'],_0x257cf3=_0x59fb8d['scene'],_0x3c68aa=_0x257cf3['layers'];this['_evtLayers'+'Changed']=_0x257cf3['on']('set:layers',this['_onLayersC'+'hanged'],this),_0x3c68aa&&(this['_evtLayerA'+'dded']=_0x3c68aa['on']('add',this['_onLayerAd'+'ded'],this),this['_evtLayerR'+'emoved']=_0x3c68aa['on']('remove',this['_onLayerRe'+'moved'],this)),this['_showModel'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_batchGrou'+'pId']>=-0x2111*0x1+0x1187*-0x2+0x1*0x441f&&((_0x201e9d=_0x59fb8d['batcher'])==null||_0x201e9d['insert'](St['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDisable'](){var _0x407cf8,_0x15799b,_0x596675,_0x72aaa3;const _0xa1f5bb=this['system']['app'],_0x4e52ef=_0xa1f5bb['scene']['layers'];(_0x407cf8=this['_evtLayers'+'Changed'])==null||_0x407cf8['off'](),this['_evtLayers'+'Changed']=null,_0x4e52ef&&((_0x15799b=this['_evtLayerA'+'dded'])==null||_0x15799b['off'](),this['_evtLayerA'+'dded']=null,(_0x596675=this['_evtLayerR'+'emoved'])==null||_0x596675['off'](),this['_evtLayerR'+'emoved']=null),this['stop'](),this['_hideModel'](),this['_batchGrou'+'pId']>=0x244e*0x1+0x1*-0x130d+-0x1141&&((_0x72aaa3=_0xa1f5bb['batcher'])==null||_0x72aaa3['remove'](St['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDestroy'](){var _0x453892;this['_currentCl'+'ip']=null,this['_defaultCl'+'ip']&&(this['_defaultCl'+'ip']['_destroy'](),this['_defaultCl'+'ip']=null);for(const _0x3b2e95 in this['_clips'])this['_clips'][_0x3b2e95]['_destroy']();this['_clips']=null,this['_hideModel'](),this['_model']=null,(_0x453892=this['_node'])==null||_0x453892['remove'](),this['_node']=null,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=null,this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']=null);}['_showModel'](){if(this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x101b56=[this['_meshInsta'+'nce']];for(let _0x3bc1e0=-0x143f+-0x19b6+0x2df5,_0x1085c=this['_layers']['length'];_0x3bc1e0<_0x1085c;_0x3bc1e0++){const _0x5b7d52=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x3bc1e0]);_0x5b7d52&&_0x5b7d52['addMeshIns'+'tances'](_0x101b56);}this['_addedMode'+'l']=!(0x193e+0x69f+0x3*-0xa9f);}['_hideModel'](){if(!this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x5eaf29=[this['_meshInsta'+'nce']];for(let _0x11e517=0x8d*0x3+-0xb5a*-0x1+-0xd01,_0x33a91d=this['_layers']['length'];_0x11e517<_0x33a91d;_0x11e517++){const _0x21dc94=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x11e517]);_0x21dc94&&_0x21dc94['removeMesh'+'Instances'](_0x5eaf29);}this['_addedMode'+'l']=!(0x1*-0x289+0x160a+-0xc0*0x1a);}['_showFrame'](_0x4b7234){if(!this['sprite'])return;const _0x1b893c=this['sprite']['meshes'][_0x4b7234];if(!_0x1b893c){this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']['visible']=!(0x21ad+0x34+0x21e0*-0x1));return;}let _0x3d1110;if(this['sprite']['renderMode']===Pt?_0x3d1110=this['system']['default9Sl'+'icedMateri'+'alSlicedMo'+'de']:this['sprite']['renderMode']===Mt?_0x3d1110=this['system']['default9Sl'+'icedMateri'+'alTiledMod'+'e']:_0x3d1110=this['system']['defaultMat'+'erial'],this['_meshInsta'+'nce']||(this['_meshInsta'+'nce']=new He(_0x1b893c,this['_material'],this['_node']),this['_meshInsta'+'nce']['castShadow']=!(0x1619+0x4a3*-0x8+0x3c*0x40),this['_meshInsta'+'nce']['receiveSha'+'dow']=!(-0x2013+0x3*-0x9df+0x11*0x3a1),this['_meshInsta'+'nce']['drawOrder']=this['_drawOrder'],this['_model']['meshInstan'+'ces']['push'](this['_meshInsta'+'nce']),this['_colorUnif'+'orm'][0x2*0x25c+-0xa6*-0x4+-0x750]=this['_color']['r'],this['_colorUnif'+'orm'][-0x307*0xa+0x1192+0xcb5*0x1]=this['_color']['g'],this['_colorUnif'+'orm'][-0x13ff+-0x1f74+0x1127*0x3]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](fS,this['_colorUnif'+'orm']),this['_meshInsta'+'nce']['setParamet'+'er'](uS,this['_color']['a']),this['enabled']&&this['entity']['enabled']&&this['_showModel']()),this['_meshInsta'+'nce']['material']!==_0x3d1110&&(this['_meshInsta'+'nce']['material']=_0x3d1110),this['_meshInsta'+'nce']['mesh']!==_0x1b893c&&(this['_meshInsta'+'nce']['mesh']=_0x1b893c,this['_meshInsta'+'nce']['visible']=!(-0x5b*0x43+0x2*-0xfb6+0x373d),this['_meshInsta'+'nce']['_aabbVer']=-(0x13de+-0x1c84+0x8a7)),this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_meshInsta'+'nce']['setParamet'+'er'](hS,this['sprite']['atlas']['texture']),this['_meshInsta'+'nce']['setParamet'+'er'](dS,this['sprite']['atlas']['texture'])):(this['_meshInsta'+'nce']['deletePara'+'meter'](hS),this['_meshInsta'+'nce']['deletePara'+'meter'](dS)),this['sprite']['atlas']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){this['_meshInsta'+'nce']['_updateAab'+'bFunc']=this['_updateAab'+'bFunc'];const _0x109eb1=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][_0x4b7234]];if(_0x109eb1){const _0x11d3e3=(-0xcb9*0x2+-0x295*0x5+0x265d)/_0x109eb1['rect']['z'],_0xc92e35=(-0x2*0xd9d+-0x2441+0x3f7d)/_0x109eb1['rect']['w'];this['_innerOffs'+'et']['set'](_0x109eb1['border']['x']*_0x11d3e3,_0x109eb1['border']['y']*_0xc92e35,_0x109eb1['border']['z']*_0x11d3e3,_0x109eb1['border']['w']*_0xc92e35);const _0x34a720=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x109eb1['rect']['x']/_0x34a720['width'],_0x109eb1['rect']['y']/_0x34a720['height'],_0x109eb1['rect']['z']/_0x34a720['width'],_0x109eb1['rect']['w']/_0x34a720['height']);}else this['_innerOffs'+'et']['set'](0xfd+-0x8*-0x23b+-0x12d5,-0x2007+-0x1*0x10b1+0x30b8*0x1,0x6c9+0x1*-0x1712+0x1*0x1049,0x32b+-0x739*-0x1+-0xa64);this['_innerOffs'+'etUniform'][-0x1e5*-0x10+-0x1b*0x6b+-0x1307]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][0x11fb*0x2+-0x4*0xbf+0x17*-0x16f]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][0x1b5+0x2*0xf09+-0x1fc5*0x1]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][-0xa90+0x285+0x80e*0x1]=this['_innerOffs'+'et']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](dF,this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][0x1934+-0xf20+-0xa14]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][-0x5*0x583+-0x253a+0x40ca]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][0x2b*0x65+0x2*0x35f+-0x17b3]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][-0xf*0x265+0x47a+0x1f74]=this['_atlasRect']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](uF,this['_atlasRect'+'Uniform']);}else this['_meshInsta'+'nce']['_updateAab'+'bFunc']=null;this['_updateTra'+'nsform']();}['_updateTra'+'nsform'](){let _0x581786=this['flipX']?-(-0x20af+0x34*-0x6b+0x366c):0x238f+0x1d8+-0x2566,_0x84b6a2=this['flipY']?-(-0xad*0x7+-0x22f1+-0x27ad*-0x1):-0xc1*0x2+-0x65*-0x1+0x1*0x11e,_0x195023=0xf38+0xf*-0x1b3+-0x1*-0xa45,_0x1e131c=-0xa81+-0x1300*0x2+0x3081;if(this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){let _0x30a030=0x284+0x259+-0x26e*0x2,_0x1872bb=-0xc*0x61+0xe8*-0x1c+0x1ded;if(this['sprite']['atlas']){const _0x107420=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][this['frame']]];_0x107420&&(_0x30a030=_0x107420['rect']['z'],_0x1872bb=_0x107420['rect']['w'],_0x195023=(0x217e+0x2*-0x271+-0x1c9c+0.5-_0x107420['pivot']['x'])*this['_width'],_0x1e131c=(0x1f9f+-0xf23+-0x107c+0.5-_0x107420['pivot']['y'])*this['_height']);}const _0x47bdee=_0x30a030/this['sprite']['pixelsPerU'+'nit'],_0x42dbb8=_0x1872bb/this['sprite']['pixelsPerU'+'nit'];this['_outerScal'+'e']['set'](Math['max'](this['_width'],this['_innerOffs'+'et']['x']*_0x47bdee),Math['max'](this['_height'],this['_innerOffs'+'et']['y']*_0x42dbb8)),_0x581786*=_0x47bdee,_0x84b6a2*=_0x42dbb8,this['_outerScal'+'e']['x']/=_0x47bdee,this['_outerScal'+'e']['y']/=_0x42dbb8,_0x581786*=Y['clamp'](this['_width']/(this['_innerOffs'+'et']['x']*_0x47bdee),-0x1d73+0x4f2+0x7b*0x33+0.0001,-0x256+-0x1*0x1fb2+0x2209),_0x84b6a2*=Y['clamp'](this['_height']/(this['_innerOffs'+'et']['y']*_0x42dbb8),-0x1*0x16d4+-0x2*0x11d5+0x3a7e+0.0001,0x1*0xe5e+-0x2250+-0x13f3*-0x1),this['_meshInsta'+'nce']&&(this['_outerScal'+'eUniform'][-0xe9*0xa+0x1*0x131f+-0xa05]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][0x2*-0x10f0+0x34e+0x1e93]=this['_outerScal'+'e']['y'],this['_meshInsta'+'nce']['setParamet'+'er'](fF,this['_outerScal'+'eUniform']));}this['_node']['setLocalSc'+'ale'](_0x581786,_0x84b6a2,0x1d67+-0x32c+-0x1a3a),this['_node']['setLocalPo'+'sition'](_0x195023,_0x1e131c,0x1418*-0x1+0x378+0x10a0);}['_updateAab'+'b'](_0x20b5d9){return _0x20b5d9['center']['set'](-0x1*-0x11a4+-0x263f+-0x5*-0x41f,0x11b*-0xd+0xf25+-0xc6,0x1abf+-0x111f*-0x2+0x1*-0x3cfd),_0x20b5d9['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(-0x3bd+-0xb9b+-0x1*-0xf58+0.5),this['_outerScal'+'e']['y']*(-0xc79+0x216b+-0x14f2+0.5),-0x1914+-0xb*-0x1f1+-0x1*-0x3b9+0.001),_0x20b5d9['setFromTra'+'nsformedAa'+'bb'](_0x20b5d9,this['_node']['getWorldTr'+'ansform']()),_0x20b5d9;}['_tryAutoPl'+'ay'](){if(!this['_autoPlayC'+'lip']||this['type']!==cS)return;const _0x790113=this['_clips'][this['_autoPlayC'+'lip']];_0x790113&&!_0x790113['isPlaying']&&(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['isPlaying'])&&this['enabled']&&this['entity']['enabled']&&this['play'](_0x790113['name']);}['_onLayersC'+'hanged'](_0x4b4be8,_0x4d983f){_0x4b4be8['off']('add',this['onLayerAdd'+'ed'],this),_0x4b4be8['off']('remove',this['onLayerRem'+'oved'],this),_0x4d983f['on']('add',this['onLayerAdd'+'ed'],this),_0x4d983f['on']('remove',this['onLayerRem'+'oved'],this),this['enabled']&&this['entity']['enabled']&&this['_showModel']();}['_onLayerAd'+'ded'](_0x18880b){this['layers']['indexOf'](_0x18880b['id'])<0x1*-0xa21+-0x1f*-0x13+-0x3ea*-0x2||this['_addedMode'+'l']&&this['enabled']&&this['entity']['enabled']&&this['_meshInsta'+'nce']&&_0x18880b['addMeshIns'+'tances']([this['_meshInsta'+'nce']]);}['_onLayerRe'+'moved'](_0x2758a4){!this['_meshInsta'+'nce']||this['layers']['indexOf'](_0x2758a4['id'])<-0x2*0x12cd+0x9f*-0x32+0x44a8||_0x2758a4['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}['removeMode'+'lFromLayer'+'s'](){for(let _0x74a7d4=0xa38+0x1fdc+-0x150a*0x2;_0x74a7d4<this['layers']['length'];_0x74a7d4++){const _0x30c176=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x74a7d4]);_0x30c176&&_0x30c176['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}}['addClip'](_0x5871e1){const _0x166bf5=new Hi(this,{'name':_0x5871e1['name'],'fps':_0x5871e1['fps'],'loop':_0x5871e1['loop'],'spriteAsset':_0x5871e1['spriteAsse'+'t']});return this['_clips'][_0x5871e1['name']]=_0x166bf5,_0x166bf5['name']&&_0x166bf5['name']===this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),_0x166bf5;}['removeClip'](_0x82f373){delete this['_clips'][_0x82f373];}['clip'](_0x26faa6){return this['_clips'][_0x26faa6];}['play'](_0x2ef974){const _0x3cf14c=this['_clips'][_0x2ef974],_0x5899e6=this['_currentCl'+'ip'];return _0x5899e6&&_0x5899e6!==_0x3cf14c&&(_0x5899e6['_playing']=!(0x397+-0xdb*-0x2b+-0x9f*0x41)),this['_currentCl'+'ip']=_0x3cf14c,this['_currentCl'+'ip']?(this['_currentCl'+'ip']=_0x3cf14c,this['_currentCl'+'ip']['play']()):w['warn']('Trying\x20to\x20'+'play\x20sprit'+'e\x20animatio'+'n\x20'+_0x2ef974+('\x20which\x20doe'+'s\x20not\x20exis'+'t.')),_0x3cf14c;}['pause'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['_currentCl'+'ip']['pause']();}['resume'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPaused']&&this['_currentCl'+'ip']['resume']();}['stop'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['stop']();}}h(ur,'EVENT_PLAY','play'),h(ur,'EVENT_PAUS'+'E','pause'),h(ur,'EVENT_RESU'+'ME','resume'),h(ur,'EVENT_STOP','stop'),h(ur,'EVENT_END','end'),h(ur,'EVENT_LOOP','loop');class pF{constructor(){this['enabled']=!(0x1e25+-0x12d*-0x3+0xa*-0x35e);}}const f0=['enabled'];class mF extends ct{constructor(_0x53c168){super(_0x53c168),this['id']='sprite',this['ComponentT'+'ype']=ur,this['DataType']=pF,this['schema']=f0,this['_defaultTe'+'xture']=null,this['_defaultMa'+'terial']=null,this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=null,this['_default9S'+'licedMater'+'ialTiledMo'+'de']=null,this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['defaultMat'+'erial'](_0x1e25ca){this['_defaultMa'+'terial']=_0x1e25ca;}get['defaultMat'+'erial'](){if(!this['_defaultMa'+'terial']){const _0x3b907c=new _e(this['app']['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':_s,'name':'sprite'}),_0x5949b5=new Uint8Array(_0x3b907c['lock']());_0x5949b5[0x3*0x37b+0x4*-0x496+0x7e7]=_0x5949b5[0x16b2+-0x7c6*-0x1+0x2c5*-0xb]=_0x5949b5[0xf7b*-0x2+0x24de+-0x5e6]=_0x5949b5[0x83*-0x47+-0x332*-0x2+-0x1*-0x1df4]=0x2e*-0x2+-0x1*0xc41+0xd9c,_0x3b907c['unlock']();const _0x2797dd=new Ut();_0x2797dd['diffuse']['set'](-0x25ee+0xcb+0x3*0xc61,-0x15c*0xf+0x263d*-0x1+0x3aa1,-0x2b1*-0x3+0x8ab+0x1*-0x10be),_0x2797dd['emissive']['set'](0x2*0x9cd+-0x6*0x4b2+0x893,0x9b*0x3b+-0xe89+-0x152f,0x206f*0x1+0xf67*0x1+-0x2fd5),_0x2797dd['emissiveMa'+'p']=_0x3b907c,_0x2797dd['opacityMap']=_0x3b907c,_0x2797dd['opacityMap'+'Channel']='a',_0x2797dd['useLightin'+'g']=!(0xd54*0x1+-0x18d*-0xd+0x10be*-0x2),_0x2797dd['useTonemap']=!(-0x4*-0x8bd+-0x6a1*0x2+-0x1*0x15b1),_0x2797dd['useFog']=!(-0x4*0x19d+0x1*0xca1+0x1*-0x62c),_0x2797dd['useSkybox']=!(0xb90+0x3bc*0x1+-0xf4b),_0x2797dd['blendType']=Gn,_0x2797dd['depthWrite']=!(-0x827*0x2+0x1*0xcac+0x13*0x31),_0x2797dd['pixelSnap']=!(0x20f+0x1*-0x1fc9+0x3*0x9e9),_0x2797dd['cull']=bt,_0x2797dd['update'](),this['_defaultTe'+'xture']=_0x3b907c,this['_defaultMa'+'terial']=_0x2797dd;}return this['_defaultMa'+'terial'];}set['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](_0x366bb0){this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x366bb0;}get['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](){if(!this['_default9S'+'licedMater'+'ialSlicedM'+'ode']){const _0x3ec675=this['defaultMat'+'erial']['clone']();_0x3ec675['nineSliced'+'Mode']=Pt,_0x3ec675['update'](),this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x3ec675;}return this['_default9S'+'licedMater'+'ialSlicedM'+'ode'];}set['default9Sl'+'icedMateri'+'alTiledMod'+'e'](_0x15b46){this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x15b46;}get['default9Sl'+'icedMateri'+'alTiledMod'+'e'](){if(!this['_default9S'+'licedMater'+'ialTiledMo'+'de']){const _0x3a7f3a=this['defaultMat'+'erial']['clone']();_0x3a7f3a['nineSliced'+'Mode']=Mt,_0x3a7f3a['update'](),this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x3a7f3a;}return this['_default9S'+'licedMater'+'ialTiledMo'+'de'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),this['_defaultTe'+'xture']&&(this['_defaultTe'+'xture']['destroy'](),this['_defaultTe'+'xture']=null);}['initialize'+'ComponentD'+'ata'](_0x340ebf,_0x172aab,_0x427639){if(_0x172aab['enabled']!==void(-0x1*0xdc6+-0x75f+-0x1*-0x1525)&&(_0x340ebf['enabled']=_0x172aab['enabled']),_0x340ebf['type']=_0x172aab['type'],_0x172aab['layers']&&Array['isArray'](_0x172aab['layers'])&&(_0x340ebf['layers']=_0x172aab['layers']['slice'](0x1506*-0x1+-0x1*-0x7b5+-0x1*-0xd51)),_0x172aab['drawOrder']!==void(-0x9*-0x329+-0x1*-0x2581+0x16f*-0x2e)&&(_0x340ebf['drawOrder']=_0x172aab['drawOrder']),_0x172aab['color']!==void(0x1d3*-0x1+-0x5*0x57e+0x1d49)&&(_0x172aab['color']instanceof ie?_0x340ebf['color']['set'](_0x172aab['color']['r'],_0x172aab['color']['g'],_0x172aab['color']['b'],_0x172aab['opacity']??0x44d+-0x20f3+0x1ca7):_0x340ebf['color']['set'](_0x172aab['color'][-0x1a08+0xe3*-0x3+0x5bd*0x5],_0x172aab['color'][0x18b7*0x1+-0x1ce2+0x42c],_0x172aab['color'][0x21a1*0x1+-0x7ad+0xcf9*-0x2],_0x172aab['opacity']??-0x27f*0x7+0x506*-0x2+0x2*0xdc3),_0x340ebf['color']=_0x340ebf['color']),_0x172aab['opacity']!==void(-0xb07+-0x139*0x15+0x24b4)&&(_0x340ebf['opacity']=_0x172aab['opacity']),_0x172aab['flipX']!==void(-0x1*0xe7b+0x14e5*0x1+-0x66a)&&(_0x340ebf['flipX']=_0x172aab['flipX']),_0x172aab['flipY']!==void(0x1c3a+0x2cf*0xd+-0x40bd)&&(_0x340ebf['flipY']=_0x172aab['flipY']),_0x172aab['width']!==void(-0x1*0x676+-0x1*0x119f+0x19b*0xf)&&(_0x340ebf['width']=_0x172aab['width']),_0x172aab['height']!==void(0x15fd+-0x1c70+-0x1*-0x673)&&(_0x340ebf['height']=_0x172aab['height']),_0x172aab['spriteAsse'+'t']!==void(0x1773+-0x73*0x3a+0x29b)&&(_0x340ebf['spriteAsse'+'t']=_0x172aab['spriteAsse'+'t']),_0x172aab['sprite']&&(_0x340ebf['sprite']=_0x172aab['sprite']),_0x172aab['frame']!==void(0x11e1+0x1a16+-0x2bf7)&&(_0x340ebf['frame']=_0x172aab['frame']),_0x172aab['clips']){for(const _0x410beb in _0x172aab['clips'])_0x340ebf['addClip'](_0x172aab['clips'][_0x410beb]);}_0x172aab['speed']!==void(-0x5a9+0x801*-0x1+0x9f*0x16)&&(_0x340ebf['speed']=_0x172aab['speed']),_0x172aab['autoPlayCl'+'ip']&&(_0x340ebf['autoPlayCl'+'ip']=_0x172aab['autoPlayCl'+'ip']),_0x340ebf['batchGroup'+'Id']=_0x172aab['batchGroup'+'Id']===void(0x230a+0x42*0x70+-0x3fea)||_0x172aab['batchGroup'+'Id']===null?-(0xe0f*-0x1+-0x16*0x53+0x1532):_0x172aab['batchGroup'+'Id'],super['initialize'+'ComponentD'+'ata'](_0x340ebf,_0x172aab,_0x427639);}['cloneCompo'+'nent'](_0x344f4f,_0xa24e64){const _0x3051ec=_0x344f4f['sprite'];return this['addCompone'+'nt'](_0xa24e64,{'enabled':_0x3051ec['enabled'],'type':_0x3051ec['type'],'spriteAsset':_0x3051ec['spriteAsse'+'t'],'sprite':_0x3051ec['sprite'],'width':_0x3051ec['width'],'height':_0x3051ec['height'],'frame':_0x3051ec['frame'],'color':_0x3051ec['color']['clone'](),'opacity':_0x3051ec['opacity'],'flipX':_0x3051ec['flipX'],'flipY':_0x3051ec['flipY'],'speed':_0x3051ec['speed'],'clips':_0x3051ec['clips'],'autoPlayClip':_0x3051ec['autoPlayCl'+'ip'],'batchGroupId':_0x3051ec['batchGroup'+'Id'],'drawOrder':_0x3051ec['drawOrder'],'layers':_0x3051ec['layers']['slice'](-0x1a72*-0x1+-0x1*0x1957+-0x11b)});}['onUpdate'](_0x4c8404){const _0x5a76d6=this['store'];for(const _0x169ee6 in _0x5a76d6)if(_0x5a76d6['hasOwnProp'+'erty'](_0x169ee6)){const _0x579706=_0x5a76d6[_0x169ee6];if(_0x579706['data']['enabled']&&_0x579706['entity']['enabled']){const _0x44704f=_0x579706['entity']['sprite'];_0x44704f['_currentCl'+'ip']&&_0x44704f['_currentCl'+'ip']['_update'](_0x4c8404);}}}['onBeforeRe'+'move'](_0x54e77c,_0x168ef5){_0x168ef5['onDestroy']();}}we['_buildAcce'+'ssors'](ur['prototype'],f0);class _n extends we{constructor(_0x80e6f7,_0x3eedc2){super(_0x80e6f7,_0x3eedc2),this['_oldState']=!(-0x15ba+-0x1cbf+0x3279),this['_size']=new D(),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['size'](_0x4dcfca){_0x4dcfca instanceof D?this['_size']['copy'](_0x4dcfca):_0x4dcfca instanceof Array&&_0x4dcfca['length']>=-0xfcc+-0x2519+0x34e8&&this['size']['set'](_0x4dcfca[-0x14b*-0xf+-0x2*-0x12df+-0x3923],_0x4dcfca[-0x1*0x170f+-0x21af+0x38bf],_0x4dcfca[-0x23ed*-0x1+0x8*-0x2ae+-0x1*0xe7b]);}get['size'](){return this['_size'];}['onEnable'](){this['_checkStat'+'e']();}['onDisable'](){this['_checkStat'+'e']();}['_onSetEnab'+'led'](_0x5785c7,_0x17274d,_0x367898){this['_checkStat'+'e']();}['_checkStat'+'e'](){const _0x1254ec=this['enabled']&&this['entity']['enabled'];_0x1254ec!==this['_oldState']&&(this['_oldState']=_0x1254ec,this['fire']('enable'),this['fire']('state',this['enabled']));}['_onBeforeR'+'emove'](){this['fire']('remove');}}h(_n,'EVENT_ENAB'+'LE','enable'),h(_n,'EVENT_DISA'+'BLE','disable'),h(_n,'EVENT_STAT'+'E','state'),h(_n,'EVENT_REMO'+'VE','remove');class _F{constructor(){this['enabled']=!(-0xb*0x127+0x1*0x1c7c+0x47*-0x39);}}const u0=['enabled'];class gF extends ct{constructor(_0x2ab0af){super(_0x2ab0af),this['id']='zone',this['ComponentT'+'ype']=_n,this['DataType']=_F,this['schema']=u0,this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this);}['initialize'+'ComponentD'+'ata'](_0x66c73f,_0x3ee0a2,_0x130c83){_0x66c73f['enabled']=_0x3ee0a2['hasOwnProp'+'erty']('enabled')?!!_0x3ee0a2['enabled']:!(0xed+0x13f9+-0x14e6),_0x3ee0a2['size']&&(_0x3ee0a2['size']instanceof D?_0x66c73f['size']['copy'](_0x3ee0a2['size']):_0x3ee0a2['size']instanceof Array&&_0x3ee0a2['size']['length']>=0x165d+-0x1975+0x9f*0x5&&_0x66c73f['size']['set'](_0x3ee0a2['size'][0x3*-0x8fa+-0xfd9+0x2ac7],_0x3ee0a2['size'][-0x1e85*0x1+-0x29c+0x2122],_0x3ee0a2['size'][0x23e+-0x19d+-0x9f]));}['cloneCompo'+'nent'](_0x533090,_0x401a05){const _0x18f4b8={'enabled':_0x533090['zone']['enabled'],'size':_0x533090['zone']['size']};return this['addCompone'+'nt'](_0x401a05,_0x18f4b8);}['_onBeforeR'+'emove'](_0x292921,_0x22c0ed){_0x22c0ed['_onBeforeR'+'emove']();}}we['_buildAcce'+'ssors'](_n['prototype'],u0);class SF{constructor(_0x3d0d7e,_0x51c36b){this['effect']=_0x3d0d7e,this['inputTarge'+'t']=_0x51c36b,this['outputTarg'+'et']=null,this['name']=_0x3d0d7e['constructo'+'r']['name'];}}class yF{constructor(_0x211e18,_0x78d06c){this['app']=_0x211e18,this['camera']=_0x78d06c,this['destinatio'+'nRenderTar'+'get']=null,this['effects']=[],this['enabled']=!(0x2b*0xa4+-0x19b6+0x1*-0x1d5),this['depthTarge'+'t']=null,_0x78d06c['on']('set:rect',this['onCameraRe'+'ctChanged'],this);}['_allocateC'+'olorBuffer'](_0x2aeda1,_0x175aeb){const _0x457af9=this['camera']['rect'],_0x99579=this['destinatio'+'nRenderTar'+'get'],_0xed8bc1=this['app']['graphicsDe'+'vice'],_0x29cfb7=Math['floor'](_0x457af9['z']*((_0x99579==null?void(0xc77+-0x75a*-0x5+-0x3139*0x1):_0x99579['width'])??_0xed8bc1['width'])),_0x5a3395=Math['floor'](_0x457af9['w']*((_0x99579==null?void(-0x146b+0x12f4+0x19*0xf):_0x99579['height'])??_0xed8bc1['height']));return new _e(_0xed8bc1,{'name':_0x175aeb,'format':_0x2aeda1,'width':_0x29cfb7,'height':_0x5a3395,'mipmaps':!(0x1b30+0x4eb*-0x6+0x77*0x5),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});}['_createOff'+'screenTarg'+'et'](_0x3a0191,_0x5f57e0){const _0x483595=this['app']['graphicsDe'+'vice'],_0x394845=(this['destinatio'+'nRenderTar'+'get']??_0x483595['backBuffer'])['isColorBuf'+'ferSrgb'](-0xe*0x1e8+0x35*0x50+-0x18*-0x6c),_0x1197fb=(_0x5f57e0&&_0x483595['getRendera'+'bleHdrForm'+'at']([nt,Xt],!(0x3*-0xa79+0x14cf*0x1+0xa9c)))??(_0x394845?_s:Ne),_0x52b3d4=this['camera']['entity']['name']+('-posteffec'+'t-')+this['effects']['length'],_0x2c2e4e=this['_allocateC'+'olorBuffer'](_0x1197fb,_0x52b3d4);return new gt({'colorBuffer':_0x2c2e4e,'depth':_0x3a0191,'stencil':_0x3a0191&&this['app']['graphicsDe'+'vice']['supportsSt'+'encil'],'samples':_0x3a0191?_0x483595['samples']:-0x14e2+-0x102*-0x1+0x13e1});}['_resizeOff'+'screenTarg'+'et'](_0x1e9535){const _0x20303a=_0x1e9535['colorBuffe'+'r']['format'],_0x1ee62e=_0x1e9535['colorBuffe'+'r']['name'];_0x1e9535['destroyFra'+'meBuffers'](),_0x1e9535['destroyTex'+'tureBuffer'+'s'](),_0x1e9535['_colorBuff'+'er']=this['_allocateC'+'olorBuffer'](_0x20303a,_0x1ee62e),_0x1e9535['_colorBuff'+'ers']=[_0x1e9535['_colorBuff'+'er']];}['_destroyOf'+'fscreenTar'+'get'](_0x559736){_0x559736['destroyTex'+'tureBuffer'+'s'](),_0x559736['destroy']();}['addEffect'](_0x2e62c7){const _0x188a65=this['effects'],_0x2cf6b3=_0x188a65['length']===0xfc7*0x1+-0x116*0x1b+0x1*0xd8b,_0x24c866=this['_createOff'+'screenTarg'+'et'](_0x2cf6b3,_0x2e62c7['hdr']),_0x1dd69a=new SF(_0x2e62c7,_0x24c866);_0x188a65['push'](_0x1dd69a),this['_sourceTar'+'get']=_0x1dd69a['inputTarge'+'t'],_0x188a65['length']>-0xb7e+-0x1*-0xe2f+-0x2b0&&(_0x188a65[_0x188a65['length']-(0x20d5*0x1+0x6*0x1f7+-0x2c9d)]['outputTarg'+'et']=_0x1dd69a['inputTarge'+'t']),this['_newPostEf'+'fect']=_0x2e62c7,_0x2e62c7['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap'](),this['enable'](),this['_newPostEf'+'fect']=void(-0x1c*0xcb+-0x167*-0x14+-0x88*0xb);}['removeEffe'+'ct'](_0x4a3e45){let _0x2d1b4d=-(-0x1f58+-0x110e+0x3067*0x1);for(let _0x312aef=0x1b9c+0x2436+-0x3fd2,_0x669707=this['effects']['length'];_0x312aef<_0x669707;_0x312aef++)if(this['effects'][_0x312aef]['effect']===_0x4a3e45){_0x2d1b4d=_0x312aef;break;}_0x2d1b4d>=0xb26*0x3+-0xb5d+-0x1615&&(_0x2d1b4d>0x1*-0x256f+0x1*-0x4d5+0x2a44?this['effects'][_0x2d1b4d-(-0x1*0xa8b+0x1948+-0xebc)]['outputTarg'+'et']=_0x2d1b4d+(-0x103a+-0x1*0x1975+0x29b0)<this['effects']['length']?this['effects'][_0x2d1b4d+(0x3*0xb8e+0x572+-0x1*0x281b)]['inputTarge'+'t']:null:this['effects']['length']>0x42b*0x5+0x5*0x16e+-0x1bfc&&(this['effects'][0x2*-0x86e+-0x2bf*0xd+0x3490]['inputTarge'+'t']['_depth']||(this['_destroyOf'+'fscreenTar'+'get'](this['effects'][0x6+0x11d3+-0x11d8]['inputTarge'+'t']),this['effects'][-0x1*-0x1231+-0x7*0x27a+-0xda]['inputTarge'+'t']=this['_createOff'+'screenTarg'+'et'](!(-0x31a*0x7+-0x1*0x6b5+0x1c6b),this['effects'][-0x831+-0x17d1+-0x2e9*-0xb]['hdr']),this['_sourceTar'+'get']=this['effects'][0x9a9*0x1+0x14b0+0x1e58*-0x1]['inputTarge'+'t']),this['camera']['renderTarg'+'et']=this['effects'][0x249c+-0x1ca1+-0x7fa]['inputTarge'+'t']),this['_destroyOf'+'fscreenTar'+'get'](this['effects'][_0x2d1b4d]['inputTarge'+'t']),this['effects']['splice'](_0x2d1b4d,0x757+-0x8*-0x2f6+-0x1f06)),this['enabled']&&_0x4a3e45['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap'](),this['effects']['length']===-0x681*0x1+0x2282+-0x1c01&&this['disable']();}['_requestDe'+'pthMaps'](){for(let _0x2ccb61=0x177+-0x251*0x2+-0x32b*-0x1,_0x21e976=this['effects']['length'];_0x2ccb61<_0x21e976;_0x2ccb61++){const _0x22e75e=this['effects'][_0x2ccb61]['effect'];this['_newPostEf'+'fect']!==_0x22e75e&&_0x22e75e['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap']();}}['_releaseDe'+'pthMaps'](){for(let _0x245295=0x1*0x1fb5+0x1226+-0x31db,_0x3ef960=this['effects']['length'];_0x245295<_0x3ef960;_0x245295++)this['effects'][_0x245295]['effect']['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap']();}['_requestDe'+'pthMap'](){const _0x2dff6a=this['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x2dff6a&&(_0x2dff6a['incrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(-0xec3*-0x1+0x1*0x91d+0x4*-0x5f8)));}['_releaseDe'+'pthMap'](){const _0x2d61eb=this['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x2d61eb&&(_0x2d61eb['decrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(0x2639+-0x2271+-0x1*0x3c7)));}['destroy'](){for(let _0x1360d8=0x1d72+-0xbd9+-0x1*0x1199,_0x4930b7=this['effects']['length'];_0x1360d8<_0x4930b7;_0x1360d8++)this['effects'][_0x1360d8]['inputTarge'+'t']['destroy']();this['effects']['length']=-0x1ecf+0x1370+0xb5f,this['disable']();}['enable'](){!this['enabled']&&this['effects']['length']&&(this['enabled']=!(-0x116c+0xd51+0x41b),this['_requestDe'+'pthMaps'](),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['destinatio'+'nRenderTar'+'get']=this['camera']['renderTarg'+'et'],this['camera']['renderTarg'+'et']=this['effects'][0x1*0x97e+0x49+-0x9c7]['inputTarge'+'t'],this['camera']['onPostproc'+'essing']=()=>{if(this['enabled']){let _0x5e2e19=null;const _0x5afef=this['effects']['length'];if(_0x5afef)for(let _0x1ef6dc=0x1d48+0xd36+-0x2a7e;_0x1ef6dc<_0x5afef;_0x1ef6dc++){const _0x5c53b8=this['effects'][_0x1ef6dc];let _0x51fdb3=_0x5c53b8['outputTarg'+'et'];_0x1ef6dc===_0x5afef-(0x296*0xa+0x199*0x1+0x7*-0x3ec)&&(_0x5e2e19=this['camera']['rect'],this['destinatio'+'nRenderTar'+'get']&&(_0x51fdb3=this['destinatio'+'nRenderTar'+'get'])),Q['pushGpuMar'+'ker'](this['app']['graphicsDe'+'vice'],_0x5c53b8['name']),_0x5c53b8['effect']['render'](_0x5c53b8['inputTarge'+'t'],_0x51fdb3,_0x5e2e19),Q['popGpuMark'+'er'](this['app']['graphicsDe'+'vice']);}}});}['disable'](){this['enabled']&&(this['enabled']=!(0x3*-0x7a3+-0x1a75+-0x315f*-0x1),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['_releaseDe'+'pthMaps'](),this['_destroyOf'+'fscreenTar'+'get'](this['_sourceTar'+'get']),this['camera']['renderTarg'+'et']=this['destinatio'+'nRenderTar'+'get'],this['camera']['onPostproc'+'essing']=null);}['_onCanvasR'+'esized'](_0x1f9501,_0x26f8e8){const _0x4089b5=this['camera']['rect'],_0x285b19=this['destinatio'+'nRenderTar'+'get'];_0x1f9501=(_0x285b19==null?void(0x236a+-0x1dde+-0x58c*0x1):_0x285b19['width'])??_0x1f9501,_0x26f8e8=(_0x285b19==null?void(0x7c7+-0x242d+0x1c66):_0x285b19['height'])??_0x26f8e8,this['camera']['camera']['aspectRati'+'o']=_0x1f9501*_0x4089b5['z']/(_0x26f8e8*_0x4089b5['w']),this['resizeRend'+'erTargets']();}['resizeRend'+'erTargets'](){const _0x23013c=this['app']['graphicsDe'+'vice'],_0x3c6bf4=this['destinatio'+'nRenderTar'+'get'],_0x24eed6=(_0x3c6bf4==null?void(0xc28+0x1d25*0x1+0x1*-0x294d):_0x3c6bf4['width'])??_0x23013c['width'],_0x1739e6=(_0x3c6bf4==null?void(-0x7*-0x443+0x1*0x85d+-0x2632):_0x3c6bf4['height'])??_0x23013c['height'],_0x4a0175=this['camera']['rect'],_0x34e31b=Math['floor'](_0x4a0175['z']*_0x24eed6),_0x20c2f0=Math['floor'](_0x4a0175['w']*_0x1739e6),_0x78df4=this['effects'];for(let _0x1cbd88=0x94*0x8+0x1a23+-0x1ec3,_0x127bb2=_0x78df4['length'];_0x1cbd88<_0x127bb2;_0x1cbd88++){const _0x247f21=_0x78df4[_0x1cbd88];(_0x247f21['inputTarge'+'t']['width']!==_0x34e31b||_0x247f21['inputTarge'+'t']['height']!==_0x20c2f0)&&this['_resizeOff'+'screenTarg'+'et'](_0x247f21['inputTarge'+'t']);}}['onCameraRe'+'ctChanged'](_0x514943,_0x1a349b,_0xabb837){this['enabled']&&this['resizeRend'+'erTargets']();}}class Ir extends we{constructor(_0x144894,_0x5c5ca2){super(_0x144894,_0x5c5ca2),h(this,'onPostproc'+'essing',null),h(this,'_renderSce'+'neDepthMap',-0x3c2+-0xc9d+0x105f),h(this,'_renderSce'+'neColorMap',-0x2562+0x170d+0xe55*0x1),h(this,'_sceneDept'+'hMapReques'+'ted',!(-0x1246+0x1*0x14cd+0x1*-0x286)),h(this,'_sceneColo'+'rMapReques'+'ted',!(-0x8f4*-0x3+-0x6c2*-0x1+-0x219d)),h(this,'_priority',0x1*-0x13a2+-0x1427+-0x27c9*-0x1),h(this,'_disablePo'+'stEffectsL'+'ayer',Il),h(this,'_camera',new Fl()),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_camera']['node']=_0x5c5ca2,this['_postEffec'+'ts']=new yF(_0x144894['app'],this));}['setShaderP'+'ass'](_0x5e80e8){const _0x39dd11=Si['get'](this['system']['app']['graphicsDe'+'vice']),_0x30a2af=_0x5e80e8?_0x39dd11['allocate'](_0x5e80e8,{'isForward':!(0x373*0x9+0x1f2a*-0x1+0x1f*0x1)}):null;return this['_camera']['shaderPass'+'Info']=_0x30a2af,_0x30a2af['index'];}['getShaderP'+'ass'](){var _0x7e2985;return(_0x7e2985=this['_camera']['shaderPass'+'Info'])==null?void(-0x1*-0x18a5+0x1d72+-0xe3*0x3d):_0x7e2985['name'];}set['renderPass'+'es'](_0x196c02){this['_camera']['renderPass'+'es']=_0x196c02||[],this['dirtyLayer'+'Compositio'+'nCameras'](),this['system']['app']['scene']['updateShad'+'ers']=!(-0x43a+-0x8cd*0x1+0x91*0x17);}get['renderPass'+'es'](){return this['_camera']['renderPass'+'es'];}get['shaderPara'+'ms'](){return this['_camera']['shaderPara'+'ms'];}set['gammaCorre'+'ction'](_0x2a5fcb){this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=_0x2a5fcb;}get['gammaCorre'+'ction'](){return this['camera']['shaderPara'+'ms']['gammaCorre'+'ction'];}set['toneMappin'+'g'](_0x59796d){this['camera']['shaderPara'+'ms']['toneMappin'+'g']=_0x59796d;}get['toneMappin'+'g'](){return this['camera']['shaderPara'+'ms']['toneMappin'+'g'];}set['fog'](_0x5d0db1){this['_camera']['fogParams']=_0x5d0db1;}get['fog'](){return this['_camera']['fogParams'];}set['aperture'](_0x55826d){this['_camera']['aperture']=_0x55826d;}get['aperture'](){return this['_camera']['aperture'];}set['aspectRati'+'o'](_0x426dc5){this['_camera']['aspectRati'+'o']=_0x426dc5;}get['aspectRati'+'o'](){return this['_camera']['aspectRati'+'o'];}set['aspectRati'+'oMode'](_0x5beb86){this['_camera']['aspectRati'+'oMode']=_0x5beb86;}get['aspectRati'+'oMode'](){return this['_camera']['aspectRati'+'oMode'];}set['calculateP'+'rojection'](_0x7997f7){this['_camera']['calculateP'+'rojection']=_0x7997f7;}get['calculateP'+'rojection'](){return this['_camera']['calculateP'+'rojection'];}set['calculateT'+'ransform'](_0x5586d5){this['_camera']['calculateT'+'ransform']=_0x5586d5;}get['calculateT'+'ransform'](){return this['_camera']['calculateT'+'ransform'];}get['camera'](){return this['_camera'];}set['clearColor'](_0x2b482d){this['_camera']['clearColor']=_0x2b482d;}get['clearColor'](){return this['_camera']['clearColor'];}set['clearColor'+'Buffer'](_0x3fb099){this['_camera']['clearColor'+'Buffer']=_0x3fb099,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearColor'+'Buffer'](){return this['_camera']['clearColor'+'Buffer'];}set['clearDepth'+'Buffer'](_0x3524ee){this['_camera']['clearDepth'+'Buffer']=_0x3524ee,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearDepth'+'Buffer'](){return this['_camera']['clearDepth'+'Buffer'];}set['clearStenc'+'ilBuffer'](_0x5012c0){this['_camera']['clearStenc'+'ilBuffer']=_0x5012c0,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearStenc'+'ilBuffer'](){return this['_camera']['clearStenc'+'ilBuffer'];}set['cullFaces'](_0x5ac6a7){this['_camera']['cullFaces']=_0x5ac6a7;}get['cullFaces'](){return this['_camera']['cullFaces'];}set['disablePos'+'tEffectsLa'+'yer'](_0x1034dd){this['_disablePo'+'stEffectsL'+'ayer']=_0x1034dd,this['dirtyLayer'+'Compositio'+'nCameras']();}get['disablePos'+'tEffectsLa'+'yer'](){return this['_disablePo'+'stEffectsL'+'ayer'];}set['farClip'](_0x5f9735){this['_camera']['farClip']=_0x5f9735;}get['farClip'](){return this['_camera']['farClip'];}set['flipFaces'](_0x51c27d){this['_camera']['flipFaces']=_0x51c27d;}get['flipFaces'](){return this['_camera']['flipFaces'];}set['fov'](_0x1c2322){this['_camera']['fov']=_0x1c2322;}get['fov'](){return this['_camera']['fov'];}get['frustum'](){return this['_camera']['frustum'];}set['frustumCul'+'ling'](_0x40e294){this['_camera']['frustumCul'+'ling']=_0x40e294;}get['frustumCul'+'ling'](){return this['_camera']['frustumCul'+'ling'];}set['horizontal'+'Fov'](_0x55cc4e){this['_camera']['horizontal'+'Fov']=_0x55cc4e;}get['horizontal'+'Fov'](){return this['_camera']['horizontal'+'Fov'];}set['layers'](_0x44a362){const _0x2ceb7c=this['_camera']['layers'],_0x57b215=this['system']['app']['scene'];_0x2ceb7c['forEach'](_0x2d227e=>{const _0x5bf11a=_0x57b215['layers']['getLayerBy'+'Id'](_0x2d227e);_0x5bf11a==null||_0x5bf11a['removeCame'+'ra'](this);}),this['_camera']['layers']=_0x44a362,this['enabled']&&this['entity']['enabled']&&_0x44a362['forEach'](_0x73716=>{const _0x4f5f8e=_0x57b215['layers']['getLayerBy'+'Id'](_0x73716);_0x4f5f8e==null||_0x4f5f8e['addCamera'](this);}),this['fire']('set:layers');}get['layers'](){return this['_camera']['layers'];}get['layersSet'](){return this['_camera']['layersSet'];}set['jitter'](_0x5828c5){this['_camera']['jitter']=_0x5828c5;}get['jitter'](){return this['_camera']['jitter'];}set['nearClip'](_0x19ea27){this['_camera']['nearClip']=_0x19ea27;}get['nearClip'](){return this['_camera']['nearClip'];}set['orthoHeigh'+'t'](_0x53da6e){this['_camera']['orthoHeigh'+'t']=_0x53da6e;}get['orthoHeigh'+'t'](){return this['_camera']['orthoHeigh'+'t'];}get['postEffect'+'s'](){return this['_postEffec'+'ts'];}get['postEffect'+'sEnabled'](){return this['_postEffec'+'ts']['enabled'];}set['priority'](_0x1dbcdd){this['_priority']=_0x1dbcdd,this['dirtyLayer'+'Compositio'+'nCameras']();}get['priority'](){return this['_priority'];}set['projection'](_0x44e970){this['_camera']['projection']=_0x44e970;}get['projection'](){return this['_camera']['projection'];}get['projection'+'Matrix'](){return this['_camera']['projection'+'Matrix'];}set['rect'](_0x5ebeb5){this['_camera']['rect']=_0x5ebeb5,this['fire']('set:rect',this['_camera']['rect']);}get['rect'](){return this['_camera']['rect'];}set['renderScen'+'eColorMap'](_0xd76eac){_0xd76eac&&!this['_sceneColo'+'rMapReques'+'ted']?(this['requestSce'+'neColorMap'](!(0x2*-0x503+0x23be*0x1+-0x19b8)),this['_sceneColo'+'rMapReques'+'ted']=!(0x1dd5+-0x1*-0x1ea8+-0x3c7d)):this['_sceneColo'+'rMapReques'+'ted']&&(this['requestSce'+'neColorMap'](!(-0x1*0x1edf+-0x252f+0x440f)),this['_sceneColo'+'rMapReques'+'ted']=!(0x8c3+-0x2*0xda1+0x2*0x940));}get['renderScen'+'eColorMap'](){return this['_renderSce'+'neColorMap']>-0x65a+-0x2f9*-0x7+0xe75*-0x1;}set['renderScen'+'eDepthMap'](_0x5a583e){_0x5a583e&&!this['_sceneDept'+'hMapReques'+'ted']?(this['requestSce'+'neDepthMap'](!(-0x11ab+-0x1cf*0x14+0x35d7)),this['_sceneDept'+'hMapReques'+'ted']=!(-0x2*-0xc89+-0x12ad+-0x665)):this['_sceneDept'+'hMapReques'+'ted']&&(this['requestSce'+'neDepthMap'](!(-0x129b+-0x200f+-0x11*-0x2fb)),this['_sceneDept'+'hMapReques'+'ted']=!(0x1c81+-0x1*-0x17db+-0x345b));}get['renderScen'+'eDepthMap'](){return this['_renderSce'+'neDepthMap']>0x65*-0x4e+0x1ae1+0x3e5;}set['renderTarg'+'et'](_0x46fe07){w['call'](()=>{this['_camera']['renderPass'+'es']['length']>0x322*-0xc+0x1610+0x11c*0xe&&w['warn']('Setting\x20a\x20'+'render\x20tar'+'get\x20on\x20the'+'\x20camera\x20'+this['entity']['name']+('\x20after\x20the'+'\x20render\x20pa'+'sses\x20is\x20no'+'t\x20supporte'+'d,\x20set\x20it\x20'+'up\x20first.'));}),this['_camera']['renderTarg'+'et']=_0x46fe07,this['dirtyLayer'+'Compositio'+'nCameras']();}get['renderTarg'+'et'](){return this['_camera']['renderTarg'+'et'];}set['scissorRec'+'t'](_0x1cb6a1){this['_camera']['scissorRec'+'t']=_0x1cb6a1;}get['scissorRec'+'t'](){return this['_camera']['scissorRec'+'t'];}set['sensitivit'+'y'](_0x395301){this['_camera']['sensitivit'+'y']=_0x395301;}get['sensitivit'+'y'](){return this['_camera']['sensitivit'+'y'];}set['shutter'](_0x3318de){this['_camera']['shutter']=_0x3318de;}get['shutter'](){return this['_camera']['shutter'];}get['viewMatrix'](){return this['_camera']['viewMatrix'];}['_enableDep'+'thLayer'](_0x3277a5){if(this['layers']['find'](_0xcf0b80=>_0xcf0b80===ps)){const _0xe95a2c=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x3277a5?_0xe95a2c==null||_0xe95a2c['incrementC'+'ounter']():_0xe95a2c==null||_0xe95a2c['decrementC'+'ounter']();}else{if(_0x3277a5)return!(0x3f9+-0x1*0x25f7+0x21ff);}return!(0x1fcd+-0x163e+0x98f*-0x1);}['requestSce'+'neColorMap'](_0x4a695b){this['_renderSce'+'neColorMap']+=_0x4a695b?-0x4*-0x25f+0x12da*0x1+-0x1*0x1c55:-(-0x6ee+-0x1*0x19a3+-0x2f6*-0xb),w['assert'](this['_renderSce'+'neColorMap']>=0x4f*-0x6a+0x1a68+0x64e),this['_enableDep'+'thLayer'](_0x4a695b)||w['warnOnce']('CameraComp'+'onent.requ'+'estSceneCo'+'lorMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassCol'+'orGrab'](this['system']['app']['graphicsDe'+'vice'],this['renderScen'+'eColorMap']),this['system']['app']['scene']['layers']['markDirty']();}['requestSce'+'neDepthMap'](_0x460a81){this['_renderSce'+'neDepthMap']+=_0x460a81?0x186c+0x1*0xf6+-0x59*0x49:-(0xb7b+0x20f4+-0x2c6e),w['assert'](this['_renderSce'+'neDepthMap']>=-0xdc*0xb+0x24*0xa7+-0x1c1*0x8),this['_enableDep'+'thLayer'](_0x460a81)||w['warnOnce']('CameraComp'+'onent.requ'+'estSceneDe'+'pthMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassDep'+'thGrab'](this['system']['app']['graphicsDe'+'vice'],this['system']['app']['renderer'],this['renderScen'+'eDepthMap']),this['system']['app']['scene']['layers']['markDirty']();}['dirtyLayer'+'Compositio'+'nCameras'](){const _0x47a2ea=this['system']['app']['scene']['layers'];_0x47a2ea['_dirty']=!(-0x2311+-0x551*-0x6+0x32b);}['screenToWo'+'rld'](_0x29874c,_0x46a03f,_0x2e2721,_0x1a1a0f){const _0x1b8f9a=this['system']['app']['graphicsDe'+'vice'],{width:_0x3fda27,height:_0x4c4ad8}=_0x1b8f9a['clientRect'];return this['_camera']['screenToWo'+'rld'](_0x29874c,_0x46a03f,_0x2e2721,_0x3fda27,_0x4c4ad8,_0x1a1a0f);}['worldToScr'+'een'](_0x4f8bc4,_0x57d118){const _0x3d277d=this['system']['app']['graphicsDe'+'vice'],{width:_0x5d6b76,height:_0x3a6689}=_0x3d277d['clientRect'];return this['_camera']['worldToScr'+'een'](_0x4f8bc4,_0x5d6b76,_0x3a6689,_0x57d118);}['onAppPrere'+'nder'](){this['_camera']['_viewMatDi'+'rty']=!(-0x1bed+-0x242a+0x4017),this['_camera']['_viewProjM'+'atDirty']=!(-0x17f+0x1dd8+-0x1c59);}['addCameraT'+'oLayers'](){const _0x1400c6=this['layers'];for(let _0x408989=0x204+-0x1f62+0x1d5e;_0x408989<_0x1400c6['length'];_0x408989++){const _0xcf97c6=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x1400c6[_0x408989]);_0xcf97c6&&_0xcf97c6['addCamera'](this);}}['removeCame'+'raFromLaye'+'rs'](){const _0x1bdf99=this['layers'];for(let _0x106fd1=0x14*-0x161+-0x19*-0xce+0x776;_0x106fd1<_0x1bdf99['length'];_0x106fd1++){const _0x5b6e76=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x1bdf99[_0x106fd1]);_0x5b6e76&&_0x5b6e76['removeCame'+'ra'](this);}}['onLayersCh'+'anged'](_0x3675a0,_0x1c94ea){this['addCameraT'+'oLayers'](),_0x3675a0['off']('add',this['onLayerAdd'+'ed'],this),_0x3675a0['off']('remove',this['onLayerRem'+'oved'],this),_0x1c94ea['on']('add',this['onLayerAdd'+'ed'],this),_0x1c94ea['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x523e47){this['layers']['indexOf'](_0x523e47['id'])<0x2390+-0x1700*-0x1+-0x3a90||_0x523e47['addCamera'](this);}['onLayerRem'+'oved'](_0x1de2ea){this['layers']['indexOf'](_0x1de2ea['id'])<0x2*-0xa99+-0x11b3+0x1*0x26e5||_0x1de2ea['removeCame'+'ra'](this);}['onEnable'](){var _0x5172d2,_0x49c533,_0xe42ed6;const _0x2dae4b=this['system']['app']['scene'],_0x6c462b=_0x2dae4b['layers'];this['system']['addCamera'](this),(_0x5172d2=this['_evtLayers'+'Changed'])==null||_0x5172d2['off'](),this['_evtLayers'+'Changed']=_0x2dae4b['on']('set:layers',this['onLayersCh'+'anged'],this),_0x6c462b&&((_0x49c533=this['_evtLayerA'+'dded'])==null||_0x49c533['off'](),this['_evtLayerA'+'dded']=_0x6c462b['on']('add',this['onLayerAdd'+'ed'],this),(_0xe42ed6=this['_evtLayerR'+'emoved'])==null||_0xe42ed6['off'](),this['_evtLayerR'+'emoved']=_0x6c462b['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addCameraT'+'oLayers'](),this['postEffect'+'s']['enable']();}['onDisable'](){var _0x5f1067,_0x229be0,_0x938578;const _0x350f0c=this['system']['app']['scene']['layers'];this['postEffect'+'s']['disable'](),this['removeCame'+'raFromLaye'+'rs'](),(_0x5f1067=this['_evtLayers'+'Changed'])==null||_0x5f1067['off'](),this['_evtLayers'+'Changed']=null,_0x350f0c&&((_0x229be0=this['_evtLayerA'+'dded'])==null||_0x229be0['off'](),this['_evtLayerA'+'dded']=null,(_0x938578=this['_evtLayerR'+'emoved'])==null||_0x938578['off'](),this['_evtLayerR'+'emoved']=null),this['system']['removeCame'+'ra'](this);}['onRemove'](){this['onDisable'](),this['off'](),this['camera']['destroy']();}['calculateA'+'spectRatio'](_0x480348){const _0x56a320=this['system']['app']['graphicsDe'+'vice'],_0x44ed8a=_0x480348?_0x480348['width']:_0x56a320['width'],_0x321ef3=_0x480348?_0x480348['height']:_0x56a320['height'];return _0x44ed8a*this['rect']['z']/(_0x321ef3*this['rect']['w']);}['frameUpdat'+'e'](_0x27f25a){this['aspectRati'+'oMode']===hm&&(this['aspectRati'+'o']=this['calculateA'+'spectRatio'](_0x27f25a));}['startXr'](_0x2c1f6f,_0x1d5e33,_0x1e5b68){this['system']['app']['xr']['start'](this,_0x2c1f6f,_0x1d5e33,_0x1e5b68);}['endXr'](_0x262d5f){if(!this['_camera']['xr']){_0x262d5f&&_0x262d5f(new Error('Camera\x20is\x20'+'not\x20in\x20XR'));return;}this['_camera']['xr']['end'](_0x262d5f);}['copy'](_0x4dacc4){this['aperture']=_0x4dacc4['aperture'],this['aspectRati'+'o']=_0x4dacc4['aspectRati'+'o'],this['aspectRati'+'oMode']=_0x4dacc4['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x4dacc4['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x4dacc4['calculateT'+'ransform'],this['clearColor']=_0x4dacc4['clearColor'],this['clearColor'+'Buffer']=_0x4dacc4['clearColor'+'Buffer'],this['clearDepth'+'Buffer']=_0x4dacc4['clearDepth'+'Buffer'],this['clearStenc'+'ilBuffer']=_0x4dacc4['clearStenc'+'ilBuffer'],this['cullFaces']=_0x4dacc4['cullFaces'],this['disablePos'+'tEffectsLa'+'yer']=_0x4dacc4['disablePos'+'tEffectsLa'+'yer'],this['farClip']=_0x4dacc4['farClip'],this['flipFaces']=_0x4dacc4['flipFaces'],this['fov']=_0x4dacc4['fov'],this['frustumCul'+'ling']=_0x4dacc4['frustumCul'+'ling'],this['horizontal'+'Fov']=_0x4dacc4['horizontal'+'Fov'],this['layers']=_0x4dacc4['layers'],this['nearClip']=_0x4dacc4['nearClip'],this['orthoHeigh'+'t']=_0x4dacc4['orthoHeigh'+'t'],this['priority']=_0x4dacc4['priority'],this['projection']=_0x4dacc4['projection'],this['rect']=_0x4dacc4['rect'],this['renderTarg'+'et']=_0x4dacc4['renderTarg'+'et'],this['scissorRec'+'t']=_0x4dacc4['scissorRec'+'t'],this['sensitivit'+'y']=_0x4dacc4['sensitivit'+'y'],this['shutter']=_0x4dacc4['shutter'];}}class vF{constructor(){this['enabled']=!(0x2*0x235+-0x1489+0x1*0x101f);}}const p0=['enabled'];class xF extends ct{constructor(_0x2ee0c4){super(_0x2ee0c4),h(this,'cameras',[]),(this['id']='camera',this['ComponentT'+'ype']=Ir,this['DataType']=vF,this['schema']=p0,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['on']('prerender',this['onAppPrere'+'nder'],this));}['initialize'+'ComponentD'+'ata'](_0xc0e3ae,_0x1945c0,_0x50951b){_0x50951b=['aspectRati'+'o','aspectRati'+'oMode','calculateP'+'rojection','calculateT'+'ransform','clearColor','clearColor'+'Buffer','clearDepth'+'Buffer','clearStenc'+'ilBuffer','renderScen'+'eColorMap','renderScen'+'eDepthMap','cullFaces','farClip','flipFaces','fog','fov','frustumCul'+'ling','horizontal'+'Fov','layers','renderTarg'+'et','nearClip','orthoHeigh'+'t','projection','priority','rect','scissorRec'+'t','aperture','shutter','sensitivit'+'y','gammaCorre'+'ction','toneMappin'+'g'];for(let _0x4915a6=-0x1701+0x13eb+0x1*0x316;_0x4915a6<_0x50951b['length'];_0x4915a6++){const _0x5d05a7=_0x50951b[_0x4915a6];if(_0x1945c0['hasOwnProp'+'erty'](_0x5d05a7)){const _0x5f8a11=_0x1945c0[_0x5d05a7];switch(_0x5d05a7){case'rect':case'scissorRec'+'t':Array['isArray'](_0x5f8a11)?_0xc0e3ae[_0x5d05a7]=new re(_0x5f8a11[0x18d7*-0x1+0x74f*0x5+-0xbb4],_0x5f8a11[-0x1ff1*0x1+-0x33*-0x2c+0x172e],_0x5f8a11[0x1*0x1ce5+-0x20c*0x2+-0x241*0xb],_0x5f8a11[-0x497*0x7+0x1c5+0x1e5f]):_0xc0e3ae[_0x5d05a7]=_0x5f8a11;break;case'clearColor':Array['isArray'](_0x5f8a11)?_0xc0e3ae[_0x5d05a7]=new ie(_0x5f8a11[-0x21c1+0x138b+-0x22*-0x6b],_0x5f8a11[-0x1*0x24c4+0x3*-0xa67+0x9b6*0x7],_0x5f8a11[-0x8c8*0x1+-0x25*-0x100+0x9d*-0x2e],_0x5f8a11[-0x24a1+0x15df+0xec5]):_0xc0e3ae[_0x5d05a7]=_0x5f8a11;break;default:_0xc0e3ae[_0x5d05a7]=_0x5f8a11;break;}}}super['initialize'+'ComponentD'+'ata'](_0xc0e3ae,_0x1945c0,['enabled']);}['cloneCompo'+'nent'](_0x5bfceb,_0x52aabe){const _0x256b77=_0x5bfceb['camera'];return this['addCompone'+'nt'](_0x52aabe,{'aspectRatio':_0x256b77['aspectRati'+'o'],'aspectRatioMode':_0x256b77['aspectRati'+'oMode'],'calculateProjection':_0x256b77['calculateP'+'rojection'],'calculateTransform':_0x256b77['calculateT'+'ransform'],'clearColor':_0x256b77['clearColor'],'clearColorBuffer':_0x256b77['clearColor'+'Buffer'],'clearDepthBuffer':_0x256b77['clearDepth'+'Buffer'],'clearStencilBuffer':_0x256b77['clearStenc'+'ilBuffer'],'renderSceneDepthMap':_0x256b77['renderScen'+'eDepthMap'],'renderSceneColorMap':_0x256b77['renderScen'+'eColorMap'],'cullFaces':_0x256b77['cullFaces'],'enabled':_0x256b77['enabled'],'farClip':_0x256b77['farClip'],'flipFaces':_0x256b77['flipFaces'],'fov':_0x256b77['fov'],'frustumCulling':_0x256b77['frustumCul'+'ling'],'horizontalFov':_0x256b77['horizontal'+'Fov'],'layers':_0x256b77['layers'],'renderTarget':_0x256b77['renderTarg'+'et'],'nearClip':_0x256b77['nearClip'],'orthoHeight':_0x256b77['orthoHeigh'+'t'],'projection':_0x256b77['projection'],'priority':_0x256b77['priority'],'rect':_0x256b77['rect'],'scissorRect':_0x256b77['scissorRec'+'t'],'aperture':_0x256b77['aperture'],'sensitivity':_0x256b77['sensitivit'+'y'],'shutter':_0x256b77['shutter'],'gammaCorrection':_0x256b77['gammaCorre'+'ction'],'toneMapping':_0x256b77['toneMappin'+'g']});}['onBeforeRe'+'move'](_0xd167c0,_0x2d7786){this['removeCame'+'ra'](_0x2d7786),_0x2d7786['onRemove']();}['onAppPrere'+'nder'](){for(let _0x586800=0x1f49+-0x24c6+0x57d,_0x39b995=this['cameras']['length'];_0x586800<_0x39b995;_0x586800++)this['cameras'][_0x586800]['onAppPrere'+'nder']();}['addCamera'](_0x493983){this['cameras']['push'](_0x493983),ul(this['cameras']);}['removeCame'+'ra'](_0x1194d0){const _0x3f82c9=this['cameras']['indexOf'](_0x1194d0);_0x3f82c9>=-0x13c2+-0x1*0x1cca+0x1a*0x1de&&(this['cameras']['splice'](_0x3f82c9,-0x1cb7*0x1+-0x14a2+0x315a),ul(this['cameras']));}['destroy'](){this['app']['off']('prerender',this['onAppPrere'+'nder'],this),super['destroy']();}}we['_buildAcce'+'ssors'](Ir['prototype'],p0);class m0{constructor(){h(this,'enabled',!(0x11de+0x11*0x2b+-0x14b9)),h(this,'light'),h(this,'type','directiona'+'l'),h(this,'color',new ie(-0x1ca4+-0xa08+0x1*0x26ad,0x15e2*-0x1+0x1*-0x184d+-0x4*-0xb8c,0x16*0x124+-0x2*-0x1079+-0x1*0x3a09)),h(this,'intensity',0x1a9e+0x7*-0x269+-0x9be),h(this,'luminance',-0x65+0x16bf+-0x165a),h(this,'shape',Ys),h(this,'affectSpec'+'ularity',!(-0x18b3+0x3b3*-0xa+0x3a1*0x11)),h(this,'castShadow'+'s',!(0x98a+0xb*0xa+-0x9f7)),h(this,'shadowDist'+'ance',-0xdcf+-0x163c+0x2433),h(this,'shadowInte'+'nsity',-0x8e6+-0x1a*-0xb3+0x19*-0x5f),h(this,'shadowReso'+'lution',0x22c*0x1+-0xce8+0xebc),h(this,'shadowBias',0x11*0x97+-0x599*-0x1+-0x64*0x28+0.05),h(this,'numCascade'+'s',0xe04+-0x3d9*-0x3+-0x198e),h(this,'cascadeBle'+'nd',0x923*0x4+0x103f+-0xa8f*0x5),h(this,'bakeNumSam'+'ples',-0xbb*-0xd+0x1405+-0x1d83),h(this,'bakeArea',-0xee2+0x23c6+0x2fc*-0x7),h(this,'cascadeDis'+'tribution',0x145c+0x175e+-0x2bba+0.5),h(this,'normalOffs'+'etBias',0xd7c*0x1+0x1b*0x91+-0x1cc7),h(this,'range',-0x2f6+0x270b+-0x240b),h(this,'innerConeA'+'ngle',-0x67*0x37+0xa*-0x296+-0x2d5*-0x11),h(this,'outerConeA'+'ngle',-0x1*0x11b4+-0x2*-0x175+0xef7),h(this,'falloffMod'+'e',Qp),h(this,'shadowType',$s),h(this,'vsmBlurSiz'+'e',-0xb59+0x303+-0x5*-0x1ad),h(this,'vsmBlurMod'+'e',em),h(this,'vsmBias',(-0x1cef+0x211c+-0x42d+0.01)*(0x4*-0x935+-0xa8b+0x2f5f+0.25)),h(this,'cookieAsse'+'t',null),h(this,'cookie',null),h(this,'cookieInte'+'nsity',0x9*0x2cb+-0x125*-0xe+-0x2928),h(this,'cookieFall'+'off',!(0x1c*0xc+-0x11b*0x13+0x13b1)),h(this,'cookieChan'+'nel','rgb'),h(this,'cookieAngl'+'e',-0x1dfd+-0x15a5+-0x2*-0x19d1),h(this,'cookieScal'+'e',null),h(this,'cookieOffs'+'et',null),h(this,'shadowUpda'+'teMode',lm),h(this,'mask',0x10d7+-0xcf1*0x1+0x3e5*-0x1),h(this,'affectDyna'+'mic',!(0x237d+-0x1d46+0x637*-0x1)),h(this,'affectLigh'+'tmapped',!(-0x6f7+-0x1367+0x1a5f)),h(this,'bake',!(-0x4*-0x15+-0x2*-0x8a5+-0x119d)),h(this,'bakeDir',!(0x72*-0x8+0x19cf+-0x163f)),h(this,'isStatic',!(-0x8ef*-0x3+0x200*-0x2+-0xb66*0x2)),h(this,'layers',[er]),h(this,'penumbraSi'+'ze',-0xbcd+0x2*-0x373+-0xc*-0x18f),h(this,'penumbraFa'+'lloff',0x1279+-0x15da+0x362),h(this,'shadowSamp'+'les',-0xb98+-0x20*-0x129+-0x518*0x5),h(this,'shadowBloc'+'kerSamples',-0xc5*0x26+0x1ae3+0x26b);}}const Ho=Object['keys'](new m0());class TF extends we{constructor(){super(...arguments),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_cookieAss'+'et',null),h(this,'_cookieAss'+'etId',null),h(this,'_cookieAss'+'etAdd',!(-0x211a+0x155b+0xbc0)),h(this,'_cookieMat'+'rix',null);}get['data'](){const _0x50e24e=this['system']['store'][this['entity']['getGuid']()];return _0x50e24e?_0x50e24e['data']:null;}set['enabled'](_0x4ab41c){this['_setValue']('enabled',_0x4ab41c,function(_0x32963f,_0x27a171){this['onSetEnabl'+'ed'](null,_0x27a171,_0x32963f);});}get['enabled'](){return this['data']['enabled'];}set['light'](_0x10cd48){this['_setValue']('light',_0x10cd48);}get['light'](){return this['data']['light'];}set['type'](_0x35ca62){this['_setValue']('type',_0x35ca62,function(_0x702197,_0x2a012e){this['system']['changeType'](this,_0x2a012e,_0x702197),this['refreshPro'+'perties']();});}get['type'](){return this['data']['type'];}set['color'](_0x41b80a){this['_setValue']('color',_0x41b80a,function(_0x937771,_0x4b433f){this['light']['setColor'](_0x937771);},!(0x8d*-0x22+0x10*-0x176+-0x27a*-0x11));}get['color'](){return this['data']['color'];}set['intensity'](_0x1b32e3){this['_setValue']('intensity',_0x1b32e3,function(_0xd353f1,_0x48e912){this['light']['intensity']=_0xd353f1;});}get['intensity'](){return this['data']['intensity'];}set['luminance'](_0x279f7e){this['_setValue']('luminance',_0x279f7e,function(_0x13a513,_0x5f0022){this['light']['luminance']=_0x13a513;});}get['luminance'](){return this['data']['luminance'];}set['shape'](_0x5acfcd){this['_setValue']('shape',_0x5acfcd,function(_0x1ed3e7,_0x36994d){this['light']['shape']=_0x1ed3e7;});}get['shape'](){return this['data']['shape'];}set['affectSpec'+'ularity'](_0x55d667){this['_setValue']('affectSpec'+'ularity',_0x55d667,function(_0x33469d,_0x3dd5ad){this['light']['affectSpec'+'ularity']=_0x33469d;});}get['affectSpec'+'ularity'](){return this['data']['affectSpec'+'ularity'];}set['castShadow'+'s'](_0x222366){this['_setValue']('castShadow'+'s',_0x222366,function(_0x3467bc,_0x1ab7ac){this['light']['castShadow'+'s']=_0x3467bc;});}get['castShadow'+'s'](){return this['data']['castShadow'+'s'];}set['shadowDist'+'ance'](_0x34f361){this['_setValue']('shadowDist'+'ance',_0x34f361,function(_0x249f47,_0x5dd9af){this['light']['shadowDist'+'ance']=_0x249f47;});}get['shadowDist'+'ance'](){return this['data']['shadowDist'+'ance'];}set['shadowInte'+'nsity'](_0x510b65){this['_setValue']('shadowInte'+'nsity',_0x510b65,function(_0x4e8078,_0x560f71){this['light']['shadowInte'+'nsity']=_0x4e8078;});}get['shadowInte'+'nsity'](){return this['data']['shadowInte'+'nsity'];}set['shadowReso'+'lution'](_0xf3a251){this['_setValue']('shadowReso'+'lution',_0xf3a251,function(_0x5bd6e8,_0x5ce799){this['light']['shadowReso'+'lution']=_0x5bd6e8;});}get['shadowReso'+'lution'](){return this['data']['shadowReso'+'lution'];}set['shadowBias'](_0x9a8b3e){this['_setValue']('shadowBias',_0x9a8b3e,function(_0x470f93,_0x1a64fd){this['light']['shadowBias']=-(-0xbe1*-0x1+-0x3f2+-0x7ef+0.01)*Y['clamp'](_0x470f93,0x9*-0x22f+0x24b4+-0x110d,-0x1f16+0xd3*0xa+0x16d9);});}get['shadowBias'](){return this['data']['shadowBias'];}set['numCascade'+'s'](_0x10ba52){this['_setValue']('numCascade'+'s',_0x10ba52,function(_0x3d2bec,_0x2160f4){this['light']['numCascade'+'s']=Y['clamp'](Math['floor'](_0x3d2bec),0x61*0x1+0x14ba+0x2*-0xa8d,0x1551+0x2c4+-0x1811);});}get['numCascade'+'s'](){return this['data']['numCascade'+'s'];}set['cascadeBle'+'nd'](_0x454baf){this['_setValue']('cascadeBle'+'nd',_0x454baf,function(_0x5f0975,_0x5b9f89){this['light']['cascadeBle'+'nd']=Y['clamp'](_0x5f0975,-0x24a7+0x12fa+-0xb5*-0x19,0x1a21+0x1*-0x189d+0x3*-0x81);});}get['cascadeBle'+'nd'](){return this['data']['cascadeBle'+'nd'];}set['bakeNumSam'+'ples'](_0x1e5640){this['_setValue']('bakeNumSam'+'ples',_0x1e5640,function(_0x4d397e,_0x2e9ee7){this['light']['bakeNumSam'+'ples']=Y['clamp'](Math['floor'](_0x4d397e),-0x1*-0x105d+-0x2246+0x11ea,-0x3b1+0x2135+-0x1c85);});}get['bakeNumSam'+'ples'](){return this['data']['bakeNumSam'+'ples'];}set['bakeArea'](_0x371481){this['_setValue']('bakeArea',_0x371481,function(_0x24d793,_0x38e27b){this['light']['bakeArea']=Y['clamp'](_0x24d793,-0x3b*0x5e+-0x26c+0x1816,-0x2ea*0xb+0xb1e+-0x115*-0x14);});}get['bakeArea'](){return this['data']['bakeArea'];}set['cascadeDis'+'tribution'](_0x5a66f4){this['_setValue']('cascadeDis'+'tribution',_0x5a66f4,function(_0x17c3cd,_0x2b4989){this['light']['cascadeDis'+'tribution']=Y['clamp'](_0x17c3cd,-0x1*-0x1c99+-0x19*0x146+0x33d,-0x1*0xb72+0xc08+0x95*-0x1);});}get['cascadeDis'+'tribution'](){return this['data']['cascadeDis'+'tribution'];}set['normalOffs'+'etBias'](_0x19aadf){this['_setValue']('normalOffs'+'etBias',_0x19aadf,function(_0xe7303a,_0x2324a5){this['light']['normalOffs'+'etBias']=Y['clamp'](_0xe7303a,-0x11*-0x5c+-0x239d+0x1d81,0x159*-0x1+0xf4f+-0xdf5);});}get['normalOffs'+'etBias'](){return this['data']['normalOffs'+'etBias'];}set['range'](_0xde61b1){this['_setValue']('range',_0xde61b1,function(_0x5378b8,_0x334989){this['light']['attenuatio'+'nEnd']=_0x5378b8;});}get['range'](){return this['data']['range'];}set['innerConeA'+'ngle'](_0x2631ea){this['_setValue']('innerConeA'+'ngle',_0x2631ea,function(_0x5592ad,_0x53e732){this['light']['innerConeA'+'ngle']=_0x5592ad;});}get['innerConeA'+'ngle'](){return this['data']['innerConeA'+'ngle'];}set['outerConeA'+'ngle'](_0x22e53d){this['_setValue']('outerConeA'+'ngle',_0x22e53d,function(_0x8a20e2,_0x15ac3c){this['light']['outerConeA'+'ngle']=_0x8a20e2;});}get['outerConeA'+'ngle'](){return this['data']['outerConeA'+'ngle'];}set['falloffMod'+'e'](_0x36f926){this['_setValue']('falloffMod'+'e',_0x36f926,function(_0x3babc4,_0x2632c5){this['light']['falloffMod'+'e']=_0x3babc4;});}get['falloffMod'+'e'](){return this['data']['falloffMod'+'e'];}set['shadowType'](_0x591bdf){this['_setValue']('shadowType',_0x591bdf,function(_0x116d01,_0x481104){this['light']['shadowType']=_0x116d01;});}get['shadowType'](){return this['data']['shadowType'];}set['vsmBlurSiz'+'e'](_0x3a6337){this['_setValue']('vsmBlurSiz'+'e',_0x3a6337,function(_0x370b50,_0x3f9bf4){this['light']['vsmBlurSiz'+'e']=_0x370b50;});}get['vsmBlurSiz'+'e'](){return this['data']['vsmBlurSiz'+'e'];}set['vsmBlurMod'+'e'](_0x1a46c3){this['_setValue']('vsmBlurMod'+'e',_0x1a46c3,function(_0x591daa,_0xd21ded){this['light']['vsmBlurMod'+'e']=_0x591daa;});}get['vsmBlurMod'+'e'](){return this['data']['vsmBlurMod'+'e'];}set['vsmBias'](_0x1a1f56){this['_setValue']('vsmBias',_0x1a1f56,function(_0x20958d,_0x330480){this['light']['vsmBias']=Y['clamp'](_0x20958d,0xbb3*0x2+0x1f5c+0x1b61*-0x2,0x954+0x3c2+-0x11*0xc5);});}get['vsmBias'](){return this['data']['vsmBias'];}set['cookieAsse'+'t'](_0x5c9f8e){this['_setValue']('cookieAsse'+'t',_0x5c9f8e,function(_0x1b32af,_0x18e8c0){if(!(this['_cookieAss'+'etId']&&(_0x1b32af instanceof pe&&_0x1b32af['id']===this['_cookieAss'+'etId']||_0x1b32af===this['_cookieAss'+'etId']))){if(this['onCookieAs'+'setRemove'](),this['_cookieAss'+'etId']=null,_0x1b32af instanceof pe)this['data']['cookieAsse'+'t']=_0x1b32af['id'],this['_cookieAss'+'etId']=_0x1b32af['id'],this['onCookieAs'+'setAdd'](_0x1b32af);else{if(typeof _0x1b32af=='number'){this['_cookieAss'+'etId']=_0x1b32af;const _0x1ce7d3=this['system']['app']['assets']['get'](_0x1b32af);_0x1ce7d3?this['onCookieAs'+'setAdd'](_0x1ce7d3):(this['_cookieAss'+'etAdd']=!(0x2182+-0x45c+-0x5b*0x52),this['system']['app']['assets']['on']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this));}}}});}get['cookieAsse'+'t'](){return this['data']['cookieAsse'+'t'];}set['cookie'](_0x247fb9){this['_setValue']('cookie',_0x247fb9,function(_0xb097ce,_0x317c75){this['light']['cookie']=_0xb097ce;});}get['cookie'](){return this['data']['cookie'];}set['cookieInte'+'nsity'](_0x110b78){this['_setValue']('cookieInte'+'nsity',_0x110b78,function(_0x2ede2c,_0x2c4c13){this['light']['cookieInte'+'nsity']=Y['clamp'](_0x2ede2c,-0x1*-0x605+0x559*0x5+-0x20c2*0x1,0x26f6+-0x1*0x1bb9+0x2cf*-0x4);});}get['cookieInte'+'nsity'](){return this['data']['cookieInte'+'nsity'];}set['cookieFall'+'off'](_0x458f62){this['_setValue']('cookieFall'+'off',_0x458f62,function(_0x1d52f0,_0x3d68aa){this['light']['cookieFall'+'off']=_0x1d52f0;});}get['cookieFall'+'off'](){return this['data']['cookieFall'+'off'];}set['cookieChan'+'nel'](_0x242af6){this['_setValue']('cookieChan'+'nel',_0x242af6,function(_0x5ef749,_0x3173ff){this['light']['cookieChan'+'nel']=_0x5ef749;});}get['cookieChan'+'nel'](){return this['data']['cookieChan'+'nel'];}set['cookieAngl'+'e'](_0x24bcb8){this['_setValue']('cookieAngl'+'e',_0x24bcb8,function(_0x359067,_0x530704){if(_0x359067!==0x1c*0x54+-0x2*0xd54+0x1178||this['cookieScal'+'e']!==null){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new re());let _0x767dc7=-0x5d*0x13+0x4*-0x7a2+-0x8*-0x4ae,_0x49a159=-0x208+0x2*-0x12a9+0x275b;this['cookieScal'+'e']&&(_0x767dc7=this['cookieScal'+'e']['x'],_0x49a159=this['cookieScal'+'e']['y']);const _0x567c89=Math['cos'](_0x359067*Y['DEG_TO_RAD']),_0x1760c3=Math['sin'](_0x359067*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x567c89/_0x767dc7,-_0x1760c3/_0x767dc7,_0x1760c3/_0x49a159,_0x567c89/_0x49a159),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;});}get['cookieAngl'+'e'](){return this['data']['cookieAngl'+'e'];}set['cookieScal'+'e'](_0x59948b){this['_setValue']('cookieScal'+'e',_0x59948b,function(_0x115d80,_0x3237d5){if(_0x115d80!==null||this['cookieAngl'+'e']!==0xe88*-0x1+0x184*0x5+0x6f4){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new re());const _0xd4457b=_0x115d80['x'],_0x2cc549=_0x115d80['y'],_0x203460=Math['cos'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']),_0x260648=Math['sin'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x203460/_0xd4457b,-_0x260648/_0xd4457b,_0x260648/_0x2cc549,_0x203460/_0x2cc549),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;},!(-0x53*-0x3f+0xb67+-0x246*0xe));}get['cookieScal'+'e'](){return this['data']['cookieScal'+'e'];}set['cookieOffs'+'et'](_0x1c4614){this['_setValue']('cookieOffs'+'et',_0x1c4614,function(_0x2a4757,_0x4238fd){this['light']['cookieOffs'+'et']=_0x2a4757;},!(0x12a2+0x1459*-0x1+0x1*0x1b7));}get['cookieOffs'+'et'](){return this['data']['cookieOffs'+'et'];}set['shadowUpda'+'teMode'](_0x100c51){this['_setValue']('shadowUpda'+'teMode',_0x100c51,function(_0x1faf5e,_0xdaa9f3){this['light']['shadowUpda'+'teMode']=_0x1faf5e;},!(0x2598+0x8*0x228+0x21c*-0x1a));}get['shadowUpda'+'teMode'](){return this['data']['shadowUpda'+'teMode'];}set['mask'](_0x2fe398){this['_setValue']('mask',_0x2fe398,function(_0x42aa75,_0x37e3b4){this['light']['mask']=_0x42aa75;});}get['mask'](){return this['data']['mask'];}set['affectDyna'+'mic'](_0x305a83){this['_setValue']('affectDyna'+'mic',_0x305a83,function(_0x135db3,_0x19e3be){_0x135db3?this['light']['mask']|=Ss:this['light']['mask']&=~Ss,this['light']['layersDirt'+'y']();});}get['affectDyna'+'mic'](){return this['data']['affectDyna'+'mic'];}set['affectLigh'+'tmapped'](_0x5f3dd6){this['_setValue']('affectLigh'+'tmapped',_0x5f3dd6,function(_0x135427,_0x40df44){_0x135427?(this['light']['mask']|=di,this['bake']&&(this['light']['mask']&=~fi)):(this['light']['mask']&=~di,this['bake']&&(this['light']['mask']|=fi));});}get['affectLigh'+'tmapped'](){return this['data']['affectLigh'+'tmapped'];}set['bake'](_0x16c3a6){this['_setValue']('bake',_0x16c3a6,function(_0x15f79a,_0x39d5a3){_0x15f79a?(this['light']['mask']|=fi,this['affectLigh'+'tmapped']&&(this['light']['mask']&=~di)):(this['light']['mask']&=~fi,this['affectLigh'+'tmapped']&&(this['light']['mask']|=di)),this['light']['layersDirt'+'y']();});}get['bake'](){return this['data']['bake'];}set['bakeDir'](_0x380b3c){this['_setValue']('bakeDir',_0x380b3c,function(_0x3c8b02,_0x34f742){this['light']['bakeDir']=_0x3c8b02;});}get['bakeDir'](){return this['data']['bakeDir'];}set['isStatic'](_0x2b8cc8){this['_setValue']('isStatic',_0x2b8cc8,function(_0x3767db,_0x5969e7){this['light']['isStatic']=_0x3767db;});}get['isStatic'](){return this['data']['isStatic'];}set['layers'](_0x286510){this['_setValue']('layers',_0x286510,function(_0x4cb1d4,_0x28fb28){for(let _0xc0a397=-0xca*0x2f+0x1f25*0x1+-0xd*-0x75;_0xc0a397<_0x28fb28['length'];_0xc0a397++){const _0x4dcb08=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x28fb28[_0xc0a397]);_0x4dcb08&&(_0x4dcb08['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x4dcb08));}for(let _0x1b2b50=-0x1dc1+0xf*-0x30+0xadb*0x3;_0x1b2b50<_0x4cb1d4['length'];_0x1b2b50++){const _0x3cb4ec=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x4cb1d4[_0x1b2b50]);_0x3cb4ec&&this['enabled']&&this['entity']['enabled']&&(_0x3cb4ec['addLight'](this),this['light']['addLayer'](_0x3cb4ec));}});}get['layers'](){return this['data']['layers'];}set['shadowUpda'+'teOverride'+'s'](_0x21995b){this['light']['shadowUpda'+'teOverride'+'s']=_0x21995b;}get['shadowUpda'+'teOverride'+'s'](){return this['light']['shadowUpda'+'teOverride'+'s'];}set['shadowSamp'+'les'](_0x4d8a1){this['light']['shadowSamp'+'les']=_0x4d8a1;}get['shadowSamp'+'les'](){return this['light']['shadowSamp'+'les'];}set['shadowBloc'+'kerSamples'](_0x509eb9){this['light']['shadowBloc'+'kerSamples']=_0x509eb9;}get['shadowBloc'+'kerSamples'](){return this['light']['shadowBloc'+'kerSamples'];}set['penumbraSi'+'ze'](_0x5e8099){this['light']['penumbraSi'+'ze']=_0x5e8099;}get['penumbraSi'+'ze'](){return this['light']['penumbraSi'+'ze'];}set['penumbraFa'+'lloff'](_0x5c38d6){this['light']['penumbraFa'+'lloff']=_0x5c38d6;}get['penumbraFa'+'lloff'](){return this['light']['penumbraFa'+'lloff'];}['_setValue'](_0x3b587a,_0x4e3f4a,_0x42c96e,_0x4d3751){const _0x2772a3=this['data'],_0x2c6dba=_0x2772a3[_0x3b587a];!_0x4d3751&&_0x2c6dba===_0x4e3f4a||(_0x2772a3[_0x3b587a]=_0x4e3f4a,_0x42c96e&&_0x42c96e['call'](this,_0x4e3f4a,_0x2c6dba));}['addLightTo'+'Layers'](){for(let _0xbdc78f=-0x224d+-0xfa*-0xd+-0x159b*-0x1;_0xbdc78f<this['layers']['length'];_0xbdc78f++){const _0x15abd5=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0xbdc78f]);_0x15abd5&&(_0x15abd5['addLight'](this),this['light']['addLayer'](_0x15abd5));}}['removeLigh'+'tFromLayer'+'s'](){for(let _0x48748a=0x23*0xe+0xddf+-0x543*0x3;_0x48748a<this['layers']['length'];_0x48748a++){const _0x185357=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x48748a]);_0x185357&&(_0x185357['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x185357));}}['onLayersCh'+'anged'](_0x454a75,_0xf94f6f){this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),_0x454a75['off']('add',this['onLayerAdd'+'ed'],this),_0x454a75['off']('remove',this['onLayerRem'+'oved'],this),_0xf94f6f['on']('add',this['onLayerAdd'+'ed'],this),_0xf94f6f['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x2c1272){this['layers']['indexOf'](_0x2c1272['id'])>=0x2468+-0xb9c*-0x1+-0x3004&&this['enabled']&&this['entity']['enabled']&&(_0x2c1272['addLight'](this),this['light']['addLayer'](_0x2c1272));}['onLayerRem'+'oved'](_0x1665cd){this['layers']['indexOf'](_0x1665cd['id'])>=-0x2043+0x1b*0x4a+0x1875&&(_0x1665cd['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x1665cd));}['refreshPro'+'perties'](){for(let _0x423fe3=-0x45a*0x3+-0x4f2*0x3+0x66*0x46;_0x423fe3<Ho['length'];_0x423fe3++){const _0x31b82d=Ho[_0x423fe3];this[_0x31b82d]=this[_0x31b82d];}this['enabled']&&this['entity']['enabled']&&this['onEnable']();}['onCookieAs'+'setSet'](){let _0x26a3b9=!(0x18b9+0x24fd+-0x3db5);this['_cookieAss'+'et']['type']==='cubemap'&&!this['_cookieAss'+'et']['loadFaces']&&(this['_cookieAss'+'et']['loadFaces']=!(-0xcdd+0x11*0x1bc+0x109f*-0x1),_0x26a3b9=!(-0x14df+0x1df7+-0x918)),(!this['_cookieAss'+'et']['resource']||_0x26a3b9)&&this['system']['app']['assets']['load'](this['_cookieAss'+'et']),this['_cookieAss'+'et']['resource']&&this['onCookieAs'+'setLoad']();}['onCookieAs'+'setAdd'](_0x9b4b83){this['_cookieAss'+'etId']===_0x9b4b83['id']&&(this['_cookieAss'+'et']=_0x9b4b83,this['light']['enabled']&&this['onCookieAs'+'setSet'](),this['_cookieAss'+'et']['on']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['on']('remove',this['onCookieAs'+'setRemove'],this));}['onCookieAs'+'setLoad'](){!this['_cookieAss'+'et']||!this['_cookieAss'+'et']['resource']||(this['cookie']=this['_cookieAss'+'et']['resource']);}['onCookieAs'+'setRemove'](){this['_cookieAss'+'etId']&&(this['_cookieAss'+'etAdd']&&(this['system']['app']['assets']['off']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this),this['_cookieAss'+'etAdd']=!(-0x9f1+0x1*0x8cb+-0x1*-0x127)),this['_cookieAss'+'et']&&(this['_cookieAss'+'et']['off']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['off']('remove',this['onCookieAs'+'setRemove'],this),this['_cookieAss'+'et']=null),this['cookie']=null);}['onEnable'](){const _0x513599=this['system']['app']['scene'],_0x5e82c6=_0x513599['layers'];this['light']['enabled']=!(-0x21e4+-0x1fe3+0x74f*0x9),this['_evtLayers'+'Changed']=_0x513599['on']('set:layers',this['onLayersCh'+'anged'],this),_0x5e82c6&&(this['_evtLayerA'+'dded']=_0x5e82c6['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x5e82c6['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),this['_cookieAss'+'et']&&!this['cookie']&&this['onCookieAs'+'setSet']();}['onDisable'](){var _0x31a402,_0x229716,_0x24a48a;const _0x4365bc=this['system']['app']['scene']['layers'];this['light']['enabled']=!(-0x1*0x1cde+-0xce*0x2e+0x41e3),(_0x31a402=this['_evtLayers'+'Changed'])==null||_0x31a402['off'](),this['_evtLayers'+'Changed']=null,_0x4365bc&&((_0x229716=this['_evtLayerA'+'dded'])==null||_0x229716['off'](),this['_evtLayerA'+'dded']=null,(_0x24a48a=this['_evtLayerR'+'emoved'])==null||_0x24a48a['off'](),this['_evtLayerR'+'emoved']=null),this['removeLigh'+'tFromLayer'+'s']();}['onRemove'](){this['onDisable'](),this['light']['destroy'](),this['cookieAsse'+'t']=null;}}class wF extends ct{constructor(_0x4dac63){super(_0x4dac63),this['id']='light',this['ComponentT'+'ype']=TF,this['DataType']=m0,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x510b75,_0x695b6b){const _0x19e441={..._0x695b6b};_0x19e441['type']||(_0x19e441['type']=_0x510b75['data']['type']),_0x510b75['data']['type']=_0x19e441['type'],_0x19e441['layers']&&Array['isArray'](_0x19e441['layers'])&&(_0x19e441['layers']=_0x19e441['layers']['slice'](0x3*-0xcc+-0x208e+0x12*0x1f1)),_0x19e441['color']&&Array['isArray'](_0x19e441['color'])&&(_0x19e441['color']=new ie(_0x19e441['color'][-0x11*-0x20e+-0x25c8+0x2da],_0x19e441['color'][0x23c7+0x10cd+0x2b*-0x139],_0x19e441['color'][0x1113+-0x10a3*-0x1+-0xb3c*0x3])),_0x19e441['cookieOffs'+'et']&&_0x19e441['cookieOffs'+'et']instanceof Array&&(_0x19e441['cookieOffs'+'et']=new J(_0x19e441['cookieOffs'+'et'][-0xaa9+-0x10bb+0x1b64],_0x19e441['cookieOffs'+'et'][0x3*-0x740+0x1df1+-0x20c*0x4])),_0x19e441['cookieScal'+'e']&&_0x19e441['cookieScal'+'e']instanceof Array&&(_0x19e441['cookieScal'+'e']=new J(_0x19e441['cookieScal'+'e'][-0x1f7d*-0x1+0x1e29+-0x1a*0x25f],_0x19e441['cookieScal'+'e'][0x1f8+-0xa2b+0x96*0xe])),_0x19e441['enable']&&(console['warn']('WARNING:\x20e'+'nable:\x20Pro'+'perty\x20is\x20d'+'eprecated.'+'\x20Set\x20enabl'+'ed\x20propert'+'y\x20instead.'),_0x19e441['enabled']=_0x19e441['enable']),_0x19e441['shape']||(_0x19e441['shape']=Ys);const _0x1b98b8=new pl(this['app']['graphicsDe'+'vice'],this['app']['scene']['clusteredL'+'ightingEna'+'bled']);_0x1b98b8['type']=fu[_0x19e441['type']],_0x1b98b8['_node']=_0x510b75['entity'],_0x510b75['data']['light']=_0x1b98b8,super['initialize'+'ComponentD'+'ata'](_0x510b75,_0x19e441,Ho);}['_onRemoveC'+'omponent'](_0x36488d,_0xee30fc){_0xee30fc['onRemove']();}['cloneCompo'+'nent'](_0x4930c4,_0x542d69){const _0xa024af=_0x4930c4['light'],_0x529b3d=[];let _0x2841c0;for(let _0x15ecd1=0x7d1+-0x10cc+-0x8fb*-0x1;_0x15ecd1<Ho['length'];_0x15ecd1++)_0x2841c0=Ho[_0x15ecd1],_0x2841c0!=='light'&&(_0xa024af[_0x2841c0]&&_0xa024af[_0x2841c0]['clone']?_0x529b3d[_0x2841c0]=_0xa024af[_0x2841c0]['clone']():_0x529b3d[_0x2841c0]=_0xa024af[_0x2841c0]);return this['addCompone'+'nt'](_0x542d69,_0x529b3d);}['changeType'](_0x4fa65e,_0xcae218,_0x3aff4e){_0xcae218!==_0x3aff4e&&(_0x4fa65e['light']['type']=fu[_0x3aff4e]);}}const EF=['x','y','z','w'],bF=[void(-0x2d*-0x53+-0x806+-0x691),void(0x1fa0+-0x847*-0x2+-0x302e),J,D,re];function Yn(_0x3667ce,_0x45e708,_0x5c941b,_0x496015){switch(_0x45e708['type']){case'boolean':return!!_0x5c941b;case'number':if(typeof _0x5c941b=='number')return _0x5c941b;if(typeof _0x5c941b=='string'){const _0x53c35a=parseInt(_0x5c941b,0x19e5+-0x16f1+-0x2ea);return isNaN(_0x53c35a)?null:_0x53c35a;}else{if(typeof _0x5c941b=='boolean')return-0x1cb*0xf+0x2466+-0x981*0x1+_0x5c941b;}return null;case'json':{const _0x59fc36={};if(Array['isArray'](_0x45e708['schema'])){(!_0x5c941b||typeof _0x5c941b!='object')&&(_0x5c941b={});for(let _0x1fde51=-0x171f+-0x3*-0x633+-0x182*-0x3;_0x1fde51<_0x45e708['schema']['length'];_0x1fde51++){const _0x41b182=_0x45e708['schema'][_0x1fde51];if(_0x41b182['name']){if(_0x41b182['array']){_0x59fc36[_0x41b182['name']]=[];const _0x412365=Array['isArray'](_0x5c941b[_0x41b182['name']])?_0x5c941b[_0x41b182['name']]:[];for(let _0x15245c=0xa26*0x2+0xb5c+-0x3f5*0x8;_0x15245c<_0x412365['length'];_0x15245c++)_0x59fc36[_0x41b182['name']]['push'](Yn(_0x3667ce,_0x41b182,_0x412365[_0x15245c]));}else{const _0x375043=_0x5c941b['hasOwnProp'+'erty'](_0x41b182['name'])?_0x5c941b[_0x41b182['name']]:_0x41b182['default'];_0x59fc36[_0x41b182['name']]=Yn(_0x3667ce,_0x41b182,_0x375043);}}}}return _0x59fc36;}case'asset':return _0x5c941b instanceof pe?_0x5c941b:typeof _0x5c941b=='number'?_0x3667ce['assets']['get'](_0x5c941b)||null:typeof _0x5c941b=='string'&&_0x3667ce['assets']['get'](parseInt(_0x5c941b,0x3*0x29d+0x811+-0xfde))||null;case'entity':return _0x5c941b instanceof Ie?_0x5c941b:typeof _0x5c941b=='string'?_0x3667ce['getEntityF'+'romIndex'](_0x5c941b):null;case'rgb':case'rgba':if(_0x5c941b instanceof ie)return _0x496015 instanceof ie?(_0x496015['copy'](_0x5c941b),_0x496015):_0x5c941b['clone']();if(_0x5c941b instanceof Array&&_0x5c941b['length']>=0x1fd*0x6+-0x18bc+-0x11*-0xc1&&_0x5c941b['length']<=0x226*-0x4+0xe2+0x56*0x17){for(let _0x52a5ea=-0xc0e+-0xe60+0x22*0xc7;_0x52a5ea<_0x5c941b['length'];_0x52a5ea++)if(typeof _0x5c941b[_0x52a5ea]!='number')return null;return _0x496015||(_0x496015=new ie()),_0x496015['r']=_0x5c941b[-0xb5b+0x3*-0x86b+0x1*0x249c],_0x496015['g']=_0x5c941b[-0x234e+-0x50f+0x2*0x142f],_0x496015['b']=_0x5c941b[-0x11e9*-0x1+0x1f01+-0x30e8],_0x496015['a']=_0x5c941b['length']===-0x307+0x2be+0x4c?0x1715+0x12d7+-0x29eb:_0x5c941b[-0x236a+-0x1*-0x77b+-0x1bf2*-0x1],_0x496015;}else{if(typeof _0x5c941b=='string'&&/#(?:[0-9a-f]{2}){3,4}/i['test'](_0x5c941b))return _0x496015||(_0x496015=new ie()),_0x496015['fromString'](_0x5c941b),_0x496015;}return null;case'vec2':case'vec3':case'vec4':{const _0x121257=parseInt(_0x45e708['type']['slice'](0x1*0x1630+-0x2*0xd63+0x499),0x2045+0x2150+-0x418b),_0x107dcf=bF[_0x121257];if(_0x5c941b instanceof _0x107dcf)return _0x496015 instanceof _0x107dcf?(_0x496015['copy'](_0x5c941b),_0x496015):_0x5c941b['clone']();if(_0x5c941b instanceof Array&&_0x5c941b['length']===_0x121257){for(let _0x4ca327=0x20a*-0x6+0x11f*-0x19+-0x1*-0x2843;_0x4ca327<_0x5c941b['length'];_0x4ca327++)if(typeof _0x5c941b[_0x4ca327]!='number')return null;_0x496015||(_0x496015=new _0x107dcf());for(let _0x341e05=-0x1199*-0x1+0xd*-0x1df+0x6ba;_0x341e05<_0x121257;_0x341e05++)_0x496015[EF[_0x341e05]]=_0x5c941b[_0x341e05];return _0x496015;}return null;}case'curve':if(_0x5c941b){let _0x38f512;if(_0x5c941b instanceof qs||_0x5c941b instanceof na)_0x38f512=_0x5c941b['clone']();else{const _0x4cbd44=_0x5c941b['keys'][0x2a6*-0xb+0x1abe+0x264]instanceof Array?na:qs;_0x38f512=new _0x4cbd44(_0x5c941b['keys']),_0x38f512['type']=_0x5c941b['type'];}return _0x38f512;}break;}return _0x5c941b;}function _0(_0x297a05,_0x4ce017,_0x3d6fa8,_0x4959ba){return _0x4ce017['array']?_0x3d6fa8['map']((_0x5a9cd7,_0x112bf9)=>Yn(_0x297a05,_0x4ce017,_0x5a9cd7,_0x4959ba?_0x4959ba[_0x112bf9]:null)):Yn(_0x297a05,_0x4ce017,_0x3d6fa8,_0x4959ba);}function g0(_0x11e767,_0x1d6bf2,_0x1e37b7,_0x247592){if(_0x1e37b7)for(const _0x36a032 in _0x1d6bf2){const _0x3a84d9=_0x1d6bf2[_0x36a032],_0x256d08=_0x1e37b7[_0x36a032];_0x256d08!==void(-0x224+0x2*-0xbeb+-0x19fa*-0x1)&&(_0x247592[_0x36a032]=_0(_0x11e767,_0x3a84d9,_0x256d08,_0x247592[_0x36a032]));}}const yn=class yn{constructor(_0x21bfe9){this['scriptType']=_0x21bfe9,this['index']={};}['add'](_0xe7fd7c,_0x5ec602){if(this['index'][_0xe7fd7c]){w['warn']('attribute\x20'+'\x27'+_0xe7fd7c+('\x27\x20is\x20alrea'+'dy\x20defined'+'\x20for\x20scrip'+'t\x20type\x20\x27')+this['scriptType']['name']+'\x27');return;}else{if(yn['reservedNa'+'mes']['has'](_0xe7fd7c)){w['warn']('attribute\x20'+'\x27'+_0xe7fd7c+('\x27\x20is\x20a\x20res'+'erved\x20attr'+'ibute\x20name'));return;}}this['index'][_0xe7fd7c]=_0x5ec602,Object['defineProp'+'erty'](this['scriptType']['prototype'],_0xe7fd7c,{'get':function(){return this['__attribut'+'es'][_0xe7fd7c];},'set':function(_0x39b71b){const _0x2a06d1='attr',_0x227d20='attr:'+_0xe7fd7c,_0x4882e2=this['__attribut'+'es'][_0xe7fd7c];let _0x237d01=_0x4882e2;if(_0x4882e2&&_0x5ec602['type']!=='json'&&_0x5ec602['type']!=='entity'&&_0x4882e2['clone']&&(this['hasEvent'](_0x2a06d1)||this['hasEvent'](_0x227d20))&&(_0x237d01=_0x4882e2['clone']()),_0x5ec602['array']){if(this['__attribut'+'es'][_0xe7fd7c]=[],_0x39b71b){for(let _0x45ecc7=-0x1*0x134f+0x8db*0x2+0x199,_0x3ce2c1=_0x39b71b['length'];_0x45ecc7<_0x3ce2c1;_0x45ecc7++)this['__attribut'+'es'][_0xe7fd7c]['push'](Yn(this['app'],_0x5ec602,_0x39b71b[_0x45ecc7],_0x4882e2?_0x4882e2[_0x45ecc7]:null));}}else this['__attribut'+'es'][_0xe7fd7c]=Yn(this['app'],_0x5ec602,_0x39b71b,_0x4882e2);this['fire'](_0x2a06d1,_0xe7fd7c,this['__attribut'+'es'][_0xe7fd7c],_0x237d01),this['fire'](_0x227d20,this['__attribut'+'es'][_0xe7fd7c],_0x237d01);}});}['remove'](_0x41e793){return this['index'][_0x41e793]?(delete this['index'][_0x41e793],delete this['scriptType']['prototype'][_0x41e793],!(0x8a0+0x1*-0x8a7+0x7)):!(-0x1ff+0x1b85*0x1+-0x1985);}['has'](_0x52e5c7){return!!this['index'][_0x52e5c7];}['get'](_0x34dfea){return this['index'][_0x34dfea]||null;}};h(yn,'assignAttr'+'ibutesToSc'+'ript',g0),h(yn,'attributeT'+'oValue',_0),h(yn,'reservedNa'+'mes',new Set(['app','entity','enabled','_enabled','_enabledOl'+'d','_destroyed','__attribut'+'es','__attribut'+'esRaw','__scriptTy'+'pe','__executio'+'nOrder','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']));let Sl=yn;const Bu='initialize',zu='postInitia'+'lize',AF='update',CF='postUpdate',PF='swap';class ts extends me{constructor(_0x1a65fc){super(),h(this,'app'),h(this,'entity'),h(this,'_enabled'),h(this,'_enabledOl'+'d'),h(this,'_initializ'+'ed'),h(this,'_postIniti'+'alized'),h(this,'__destroye'+'d'),h(this,'__scriptTy'+'pe'),h(this,'__executio'+'nOrder'),this['initScript'](_0x1a65fc);}set['enabled'](_0xf8c28f){this['_enabled']=!!_0xf8c28f,this['enabled']!==this['_enabledOl'+'d']&&(this['_enabledOl'+'d']=this['enabled'],this['fire'](this['enabled']?'enable':'disable'),this['fire']('state',this['enabled']),!this['_initializ'+'ed']&&this['enabled']&&(this['_initializ'+'ed']=!(0x953+0x1c5e+0x1*-0x25b1),this['fire']('preInitial'+'ize'),this['initialize']&&this['entity']['script']['_scriptMet'+'hod'](this,Bu)),this['_initializ'+'ed']&&!this['_postIniti'+'alized']&&this['enabled']&&!this['entity']['script']['_beingEnab'+'led']&&(this['_postIniti'+'alized']=!(-0xa08+-0x195d+0x2365),this['postInitia'+'lize']&&this['entity']['script']['_scriptMet'+'hod'](this,zu)));}get['enabled'](){return this['_enabled']&&!this['_destroyed']&&this['entity']['script']['enabled']&&this['entity']['enabled'];}['initScript'](_0xd395f2){const _0x3fd2b3=this['constructo'+'r'];w['assert'](_0xd395f2&&_0xd395f2['app']&&_0xd395f2['entity'],'script\x20['+_0x3fd2b3['__name']+(']\x20has\x20miss'+'ing\x20argume'+'nts\x20in\x20con'+'structor')),this['app']=_0xd395f2['app'],this['entity']=_0xd395f2['entity'],this['_enabled']=typeof _0xd395f2['enabled']=='boolean'?_0xd395f2['enabled']:!(-0xb65+-0x9f3+0x1558),this['_enabledOl'+'d']=this['enabled'],this['__destroye'+'d']=!(0x19be+0x252a*0x1+-0x3ee7),this['__scriptTy'+'pe']=_0x3fd2b3,this['__executio'+'nOrder']=-(0xd9e+-0x1b75+0xdd8);}static get['scriptName'](){return this['__name'];}}h(ts,'EVENT_ENAB'+'LE','enable'),h(ts,'EVENT_DISA'+'BLE','disable'),h(ts,'EVENT_STAT'+'E','state'),h(ts,'EVENT_DEST'+'ROY','destroy'),h(ts,'EVENT_ATTR','attr'),h(ts,'EVENT_ERRO'+'R','error'),h(ts,'__name',null),h(ts,'__getScrip'+'tName',S0);const MF=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s\/]*)\s*/;function S0(_0x47d904){if(typeof _0x47d904!='function')return;if(_0x47d904['scriptName'])return _0x47d904['scriptName'];if('name'in Function['prototype'])return _0x47d904['name'];if(_0x47d904===Function||_0x47d904===Function['prototype']['constructo'+'r'])return'Function';const _0x342ed9=(''+_0x47d904)['match'](MF);return _0x342ed9?_0x342ed9[0x2250+-0x25ad+0x35e*0x1]:void(-0x13e*0x17+0x6*0xef+0x16f8);}class Wo extends ts{constructor(_0xac5995){super(_0xac5995),h(this,'__attribut'+'es'),h(this,'__attribut'+'esRaw'),this['initScript'+'Type'](_0xac5995);}static get['attributes'](){return this['hasOwnProp'+'erty']('__attribut'+'es')||(this['__attribut'+'es']=new Sl(this)),this['__attribut'+'es'];}['initScript'](_0x5b83ac){ts['prototype']['initScript']['call'](this,_0x5b83ac),this['__attribut'+'es']={},this['__attribut'+'esRaw']=_0x5b83ac['attributes']||{};}['initScript'+'Type'](_0x118031){this['initScript'](_0x118031);}['__initiali'+'zeAttribut'+'es'](_0x5abb92){if(!(!_0x5abb92&&!this['__attribut'+'esRaw'])){for(const _0x224a3b in this['__scriptTy'+'pe']['attributes']['index'])this['__attribut'+'esRaw']&&this['__attribut'+'esRaw']['hasOwnProp'+'erty'](_0x224a3b)?this[_0x224a3b]=this['__attribut'+'esRaw'][_0x224a3b]:this['__attribut'+'es']['hasOwnProp'+'erty'](_0x224a3b)||(this['__scriptTy'+'pe']['attributes']['index'][_0x224a3b]['hasOwnProp'+'erty']('default')?this[_0x224a3b]=this['__scriptTy'+'pe']['attributes']['index'][_0x224a3b]['default']:this[_0x224a3b]=null);this['__attribut'+'esRaw']=null;}}static['extend'](_0x20de17){for(const _0x2653ff in _0x20de17)_0x20de17['hasOwnProp'+'erty'](_0x2653ff)&&(this['prototype'][_0x2653ff]=_0x20de17[_0x2653ff]);}}const DF=_0x3a58d6=>_0x3a58d6[0x1*-0x2089+0x8*-0x313+0x249*0x19]['toLowerCas'+'e']()+_0x3a58d6['substring'](0x77b+0x4ca*-0x3+0x15*0x54);class Ii extends we{constructor(_0x2db577,_0xa831aa){super(_0x2db577,_0xa831aa),h(this,'_attribute'+'DataMap',new Map()),(this['_scripts']=[],this['_updateLis'+'t']=new oh({'sortBy':'__executio'+'nOrder'}),this['_postUpdat'+'eList']=new oh({'sortBy':'__executio'+'nOrder'}),this['_scriptsIn'+'dex']={},this['_destroyed'+'Scripts']=[],this['_destroyed']=!(0x14b+-0x1*0x88a+-0x3a0*-0x2),this['_scriptsDa'+'ta']=null,this['_oldState']=!(0x620*-0x1+0x5d*-0x4c+-0x4*-0x86f),this['_enabled']=!(-0x104*0x2+-0x13bd+0x15c5),this['_beingEnab'+'led']=!(-0x21b7+-0x27b*0xd+0x41f7),this['_isLooping'+'ThroughScr'+'ipts']=!(-0x1729+-0x1677+0x1*0x2da1),this['_execution'+'Order']=-(0x1a15+-0x901*0x1+0x5b1*-0x3),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this));}set['scripts'](_0x2220b3){this['_scriptsDa'+'ta']=_0x2220b3;for(const _0x382436 in _0x2220b3){if(!_0x2220b3['hasOwnProp'+'erty'](_0x382436))continue;const _0x1c8ca5=this['_scriptsIn'+'dex'][_0x382436];if(_0x1c8ca5){if(typeof _0x2220b3[_0x382436]['enabled']=='boolean'&&(_0x1c8ca5['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x1c8ca5);}),_0x1c8ca5['enabled']=!!_0x2220b3[_0x382436]['enabled']),typeof _0x2220b3[_0x382436]['attributes']=='object'){for(const _0x2c916f in _0x2220b3[_0x382436]['attributes'])if(!Sl['reservedNa'+'mes']['has'](_0x2c916f)){if(!_0x1c8ca5['__attribut'+'es']['hasOwnProp'+'erty'](_0x2c916f)){const _0x3665fb=this['system']['app']['scripts']['get'](_0x382436);_0x3665fb&&_0x3665fb['attributes']['add'](_0x2c916f,{});}_0x1c8ca5[_0x2c916f]=_0x2220b3[_0x382436]['attributes'][_0x2c916f];}}}else console['log'](this['order']);}}get['scripts'](){return this['_scripts'];}set['enabled'](_0x2a66ba){const _0xacceb7=this['_enabled'];this['_enabled']=_0x2a66ba,this['fire']('set','enabled',_0xacceb7,_0x2a66ba);}get['enabled'](){return this['_enabled'];}['onEnable'](){this['_beingEnab'+'led']=!(-0x135c*0x1+0x8c3*0x1+0xa99*0x1),this['_checkStat'+'e'](),this['entity']['_beingEnab'+'led']||this['onPostStat'+'eChange'](),this['_beingEnab'+'led']=!(-0x1519+0x1cbc+-0x7a2);}['onDisable'](){this['_checkStat'+'e']();}['onPostStat'+'eChange'](){const _0x41e5f2=this['_beginLoop'+'ing']();for(let _0x123026=0x9d7*0x1+-0x13*0x128+0xc21,_0x28865e=this['scripts']['length'];_0x123026<_0x28865e;_0x123026++){const _0x457b82=this['scripts'][_0x123026];_0x457b82['_initializ'+'ed']&&!_0x457b82['_postIniti'+'alized']&&_0x457b82['enabled']&&(_0x457b82['_postIniti'+'alized']=!(-0xc*-0x4+-0x1345*-0x2+-0x26ba),_0x457b82['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x457b82,zu));}this['_endLoopin'+'g'](_0x41e5f2);}['_beginLoop'+'ing'](){const _0x58f754=this['_isLooping'+'ThroughScr'+'ipts'];return this['_isLooping'+'ThroughScr'+'ipts']=!(-0x2*-0xf16+-0xb96*0x3+-0x1*-0x496),_0x58f754;}['_endLoopin'+'g'](_0x49ff83){this['_isLooping'+'ThroughScr'+'ipts']=_0x49ff83,this['_isLooping'+'ThroughScr'+'ipts']||this['_removeDes'+'troyedScri'+'pts']();}['_onSetEnab'+'led'](_0xe714b0,_0x41c061,_0x43f212){this['_beingEnab'+'led']=!(-0x9af+-0x1be*-0x3+0x475),this['_checkStat'+'e'](),this['_beingEnab'+'led']=!(-0x2*0x11c9+-0x2db+0x266e);}['_checkStat'+'e'](){const _0x39b5f8=this['enabled']&&this['entity']['enabled'];if(_0x39b5f8===this['_oldState'])return;this['_oldState']=_0x39b5f8,this['fire'](_0x39b5f8?'enable':'disable'),this['fire']('state',_0x39b5f8),_0x39b5f8?this['system']['_addCompon'+'entToEnabl'+'ed'](this):this['system']['_removeCom'+'ponentFrom'+'Enabled'](this);const _0x44655e=this['_beginLoop'+'ing']();for(let _0x28e556=-0x1225+0x19*-0x185+-0x1c11*-0x2,_0x3b07bd=this['scripts']['length'];_0x28e556<_0x3b07bd;_0x28e556++){const _0x2046ea=this['scripts'][_0x28e556];_0x2046ea['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x2046ea);}),_0x2046ea['enabled']=_0x2046ea['_enabled'];}this['_endLoopin'+'g'](_0x44655e);}['_onBeforeR'+'emove'](){this['fire']('remove');const _0x5d7cf0=this['_beginLoop'+'ing']();for(let _0x485459=0x215f+-0x2e*-0x71+-0x35ad;_0x485459<this['scripts']['length'];_0x485459++){const _0x887faf=this['scripts'][_0x485459];_0x887faf&&this['destroy'](_0x887faf['__scriptTy'+'pe']['__name']);}this['_endLoopin'+'g'](_0x5d7cf0);}['_removeDes'+'troyedScri'+'pts'](){const _0x571ecf=this['_destroyed'+'Scripts']['length'];if(_0x571ecf){for(let _0x3ce21c=-0x200+0x31*0x39+-0x1*0x8e9;_0x3ce21c<_0x571ecf;_0x3ce21c++){const _0xf2c2d4=this['_destroyed'+'Scripts'][_0x3ce21c];this['_removeScr'+'iptInstanc'+'e'](_0xf2c2d4);}this['_destroyed'+'Scripts']['length']=-0x226b+0xe4c+0x65*0x33,this['_resetExec'+'utionOrder'](-0xebe+-0x4cd+0x1*0x138b,this['_scripts']['length']);}}['_onInitial'+'izeAttribu'+'tes'](){for(let _0x5c8b99=-0x1189+0x2*0xd4f+-0x307*0x3,_0x2c9337=this['scripts']['length'];_0x5c8b99<_0x2c9337;_0x5c8b99++){const _0x30b40a=this['scripts'][_0x5c8b99];this['initialize'+'Attributes'](_0x30b40a);}}['initialize'+'Attributes'](_0x2751b5){var _0x5ecbf8;if(_0x2751b5 instanceof Wo)_0x2751b5['__initiali'+'zeAttribut'+'es']();else{const _0x25aedc=_0x2751b5['__scriptTy'+'pe']['__name'],_0x2e9c37=this['_attribute'+'DataMap']['get'](_0x25aedc);if(!_0x2e9c37)return;const _0x48bba5=(_0x5ecbf8=this['system']['app']['scripts'])==null?void(-0x10*-0x11+0x1293+0x1*-0x13a3):_0x5ecbf8['getSchema'](_0x25aedc);_0x48bba5||w['warnOnce']('No\x20schema\x20'+'exists\x20for'+'\x20the\x20scrip'+'t\x20\x27'+_0x25aedc+('\x27.\x20A\x20schem'+'a\x20must\x20exi'+'st\x20for\x20dat'+'a\x20to\x20be\x20in'+'stantiated'+'\x20on\x20the\x20sc'+'ript.')),g0(this['system']['app'],_0x48bba5['attributes'],_0x2e9c37,_0x2751b5);}}['_scriptMet'+'hod'](_0x540f7d,_0x1495c7,_0x57497b){try{_0x540f7d[_0x1495c7](_0x57497b);}catch(_0x1dba1e){_0x540f7d['enabled']=!(-0x6*0x1d4+0x3*0x3d9+-0x92),_0x540f7d['hasEvent']('error')||(console['warn']('unhandled\x20'+'exception\x20'+'while\x20call'+'ing\x20\x22'+_0x1495c7+'\x22\x20for\x20\x22'+_0x540f7d['__scriptTy'+'pe']['__name']+'\x22\x20script:\x20',_0x1dba1e),console['error'](_0x1dba1e)),_0x540f7d['fire']('error',_0x1dba1e,_0x1495c7),this['fire']('error',_0x540f7d,_0x1dba1e,_0x1495c7);}}['_onInitial'+'ize'](){const _0x256b46=this['_scripts'],_0x1ce4da=this['_beginLoop'+'ing']();for(let _0x21233c=-0xf6*-0x9+-0x22*-0x43+0x8c6*-0x2,_0xd946e2=_0x256b46['length'];_0x21233c<_0xd946e2;_0x21233c++){const _0x2e86db=_0x256b46[_0x21233c];!_0x2e86db['_initializ'+'ed']&&_0x2e86db['enabled']&&(_0x2e86db['_initializ'+'ed']=!(-0x16*-0x5+0x21*0x124+-0x2612),_0x2e86db['initialize']&&this['_scriptMet'+'hod'](_0x2e86db,Bu));}this['_endLoopin'+'g'](_0x1ce4da);}['_onPostIni'+'tialize'](){this['onPostStat'+'eChange']();}['_onUpdate'](_0xacff5f){const _0x4335f6=this['_updateLis'+'t'];if(!_0x4335f6['length'])return;const _0x2f84bf=this['_beginLoop'+'ing']();for(_0x4335f6['loopIndex']=0x84d+-0x2*0x12e7+0x1d81;_0x4335f6['loopIndex']<_0x4335f6['length'];_0x4335f6['loopIndex']++){const _0x4ccf45=_0x4335f6['items'][_0x4335f6['loopIndex']];_0x4ccf45['enabled']&&this['_scriptMet'+'hod'](_0x4ccf45,AF,_0xacff5f);}this['_endLoopin'+'g'](_0x2f84bf);}['_onPostUpd'+'ate'](_0x43b6c3){const _0x23215a=this['_postUpdat'+'eList'];if(!_0x23215a['length'])return;const _0x4aa3a4=this['_beginLoop'+'ing']();for(_0x23215a['loopIndex']=-0x253f+-0x87*-0x2b+-0x749*-0x2;_0x23215a['loopIndex']<_0x23215a['length'];_0x23215a['loopIndex']++){const _0x270ad3=_0x23215a['items'][_0x23215a['loopIndex']];_0x270ad3['enabled']&&this['_scriptMet'+'hod'](_0x270ad3,CF,_0x43b6c3);}this['_endLoopin'+'g'](_0x4aa3a4);}['_insertScr'+'iptInstanc'+'e'](_0x1fac32,_0x458953,_0x6e078b){_0x458953===-(-0x1*-0x1c53+0x698+-0x22ea)?(this['_scripts']['push'](_0x1fac32),_0x1fac32['__executio'+'nOrder']=_0x6e078b,_0x1fac32['update']&&this['_updateLis'+'t']['append'](_0x1fac32),_0x1fac32['postUpdate']&&this['_postUpdat'+'eList']['append'](_0x1fac32)):(this['_scripts']['splice'](_0x458953,0x1bd4+-0x3c8+-0x26*0xa2,_0x1fac32),_0x1fac32['__executio'+'nOrder']=_0x458953,this['_resetExec'+'utionOrder'](_0x458953+(0x122b*-0x1+0x6d*0x3+0x10e5),_0x6e078b+(0x1dc0+0x136a+-0x3129)),_0x1fac32['update']&&this['_updateLis'+'t']['insert'](_0x1fac32),_0x1fac32['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x1fac32));}['_removeScr'+'iptInstanc'+'e'](_0x1e4a54){const _0x2da68c=this['_scripts']['indexOf'](_0x1e4a54);return _0x2da68c===-(0x14d4+-0x1*0xb05+-0x1*0x9ce)||(this['_scripts']['splice'](_0x2da68c,-0x2371+0x4*0x38f+0x43e*0x5),_0x1e4a54['update']&&this['_updateLis'+'t']['remove'](_0x1e4a54),_0x1e4a54['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x1e4a54)),_0x2da68c;}['_resetExec'+'utionOrder'](_0x449116,_0x593fad){for(let _0x22ee95=_0x449116;_0x22ee95<_0x593fad;_0x22ee95++)this['_scripts'][_0x22ee95]['__executio'+'nOrder']=_0x22ee95;}['_resolveEn'+'tityScript'+'Attribute'](_0x5c8671,_0x284942,_0x87c1c5,_0x2e4457,_0x4be0b1,_0x1c95a6){if(_0x5c8671['array']){const _0x2476ec=_0x87c1c5['length'];if(!_0x2476ec)return;const _0x555887=_0x87c1c5['slice']();for(let _0x4be3ff=0xae+0x320+0x1*-0x3ce;_0x4be3ff<_0x2476ec;_0x4be3ff++){const _0x54a6e5=_0x555887[_0x4be3ff]instanceof lt?_0x555887[_0x4be3ff]['getGuid']():_0x555887[_0x4be3ff];_0x1c95a6[_0x54a6e5]&&(_0x555887[_0x4be3ff]=_0x2e4457?_0x1c95a6[_0x54a6e5]['getGuid']():_0x1c95a6[_0x54a6e5]);}_0x4be0b1[_0x284942]=_0x555887;}else{if(_0x87c1c5 instanceof lt)_0x87c1c5=_0x87c1c5['getGuid']();else{if(typeof _0x87c1c5!='string')return;}_0x1c95a6[_0x87c1c5]&&(_0x4be0b1[_0x284942]=_0x1c95a6[_0x87c1c5]);}}['has'](_0x3d2ab5){if(typeof _0x3d2ab5=='string')return!!this['_scriptsIn'+'dex'][_0x3d2ab5];if(!_0x3d2ab5)return!(-0x1*-0x143f+0x112*0x5+-0x1998);const _0x514f44=_0x3d2ab5,_0x4af440=_0x514f44['__name'],_0x3f4151=this['_scriptsIn'+'dex'][_0x4af440];return(_0x3f4151&&_0x3f4151['instance'])instanceof _0x514f44;}['get'](_0x3a7706){if(typeof _0x3a7706=='string'){const _0x42b3a9=this['_scriptsIn'+'dex'][_0x3a7706];return _0x42b3a9?_0x42b3a9['instance']:null;}if(!_0x3a7706)return null;const _0x27dbc7=_0x3a7706,_0x25f0f9=_0x27dbc7['__name'],_0x302149=this['_scriptsIn'+'dex'][_0x25f0f9],_0x511c6d=_0x302149&&_0x302149['instance'];return _0x511c6d instanceof _0x27dbc7?_0x511c6d:null;}['create'](_0x3d1adb,_0x4fcbd0={}){const _0x321f91=this;let _0x2f6a79=_0x3d1adb,_0x1fa4a4=_0x3d1adb;if(typeof _0x2f6a79=='string')_0x2f6a79=this['system']['app']['scripts']['get'](_0x2f6a79);else{if(_0x2f6a79){const _0xda1804=S0(_0x2f6a79),_0x2968b5=DF(_0xda1804);!(_0x2f6a79['prototype']instanceof Wo)&&!_0x2f6a79['scriptName']&&w['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0xda1804+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0xda1804+('.scriptNam'+'e\x20=\x20\x22')+_0x2968b5+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.')),_0x2f6a79['__name']??(_0x2f6a79['__name']=_0x2f6a79['scriptName']??_0x2968b5),_0x1fa4a4=_0x2f6a79['__name'];}}if(_0x2f6a79){if(!this['_scriptsIn'+'dex'][_0x1fa4a4]||!this['_scriptsIn'+'dex'][_0x1fa4a4]['instance']){const _0x36f25e=new _0x2f6a79({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x4fcbd0['hasOwnProp'+'erty']('enabled')?_0x4fcbd0['enabled']:!(-0x17f*0x7+-0x985*0x1+-0x2*-0x9ff),'attributes':_0x4fcbd0['attributes']||{}});_0x4fcbd0['properties']&&typeof _0x4fcbd0['properties']=='object'&&Object['assign'](_0x36f25e,_0x4fcbd0['properties']),_0x36f25e instanceof Wo||this['_attribute'+'DataMap']['set'](_0x1fa4a4,_0x4fcbd0['attributes']);const _0x302633=this['_scripts']['length'];let _0x2dbf4e=-(-0x272*-0xb+-0x338*0xc+0xbbb);return typeof _0x4fcbd0['ind']=='number'&&_0x4fcbd0['ind']!==-(0x233*-0x7+0x8e6+0x680)&&_0x302633>_0x4fcbd0['ind']&&(_0x2dbf4e=_0x4fcbd0['ind']),this['_insertScr'+'iptInstanc'+'e'](_0x36f25e,_0x2dbf4e,_0x302633),this['_scriptsIn'+'dex'][_0x1fa4a4]={'instance':_0x36f25e,'onSwap':function(){_0x321f91['swap'](_0x1fa4a4);}},this[_0x1fa4a4]=_0x36f25e,_0x4fcbd0['preloading']||this['initialize'+'Attributes'](_0x36f25e),this['fire']('create',_0x1fa4a4,_0x36f25e),this['fire']('create:'+_0x1fa4a4,_0x36f25e),this['system']['app']['scripts']['on']('swap:'+_0x1fa4a4,this['_scriptsIn'+'dex'][_0x1fa4a4]['onSwap']),_0x4fcbd0['preloading']||(_0x36f25e['enabled']&&!_0x36f25e['_initializ'+'ed']&&(_0x36f25e['_initializ'+'ed']=!(-0x204b+0x16e4+0x967),_0x36f25e['initialize']&&this['_scriptMet'+'hod'](_0x36f25e,Bu)),_0x36f25e['enabled']&&!_0x36f25e['_postIniti'+'alized']&&(_0x36f25e['_postIniti'+'alized']=!(-0x58*0x5f+-0x5*0x412+0x3502),_0x36f25e['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x36f25e,zu))),_0x36f25e;}w['warn']('script\x20\x27'+_0x1fa4a4+('\x27\x20is\x20alrea'+'dy\x20added\x20t'+'o\x20entity\x20\x27')+this['entity']['name']+'\x27');}else this['_scriptsIn'+'dex'][_0x1fa4a4]={'awaiting':!(0x5*0x107+0xfdb*0x1+-0x14fe),'ind':this['_scripts']['length']},w['warn']('script\x20\x27'+_0x1fa4a4+('\x27\x20is\x20not\x20f'+'ound,\x20awai'+'ting\x20it\x20to'+'\x20be\x20added\x20'+'to\x20registr'+'y'));return null;}['destroy'](_0x48198a){let _0x5d6a54=_0x48198a,_0xd90b38=_0x48198a;typeof _0xd90b38=='string'?_0xd90b38=this['system']['app']['scripts']['get'](_0xd90b38):_0xd90b38&&(_0x5d6a54=_0xd90b38['__name']);const _0x820b37=this['_scriptsIn'+'dex'][_0x5d6a54];if(delete this['_scriptsIn'+'dex'][_0x5d6a54],!_0x820b37)return!(0x1*0x95+-0x1434+0x13a0);this['_attribute'+'DataMap']['delete'](_0x5d6a54);const _0x48d2e7=_0x820b37['instance'];if(_0x48d2e7&&!_0x48d2e7['_destroyed']){if(_0x48d2e7['enabled']=!(0x1951*0x1+0x22e7+-0x3c37),_0x48d2e7['_destroyed']=!(-0x245+0x273+0x2e*-0x1),this['_isLooping'+'ThroughScr'+'ipts'])this['_destroyed'+'Scripts']['push'](_0x48d2e7);else{const _0x57c567=this['_removeScr'+'iptInstanc'+'e'](_0x48d2e7);_0x57c567>=-0x15e0+-0x314+0x18f4&&this['_resetExec'+'utionOrder'](_0x57c567,this['_scripts']['length']);}}return this['system']['app']['scripts']['off']('swap:'+_0x5d6a54,_0x820b37['onSwap']),delete this[_0x5d6a54],this['fire']('destroy',_0x5d6a54,_0x48d2e7||null),this['fire']('destroy:'+_0x5d6a54,_0x48d2e7||null),_0x48d2e7&&_0x48d2e7['fire']('destroy'),!(-0xd35+0x18f5+-0xbc0);}['swap'](_0x101aff){let _0x448572=_0x101aff,_0x13cc3e=_0x101aff;typeof _0x13cc3e=='string'?_0x13cc3e=this['system']['app']['scripts']['get'](_0x13cc3e):_0x13cc3e&&(_0x448572=_0x13cc3e['__name']);const _0x3d40ca=this['_scriptsIn'+'dex'][_0x448572];if(!_0x3d40ca||!_0x3d40ca['instance'])return!(-0x242d+0x21eb+-0x3*-0xc1);const _0x445347=_0x3d40ca['instance'],_0x10e368=this['_scripts']['indexOf'](_0x445347),_0x2913e6=new _0x13cc3e({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x445347['enabled'],'attributes':_0x445347['__attribut'+'es']});return _0x2913e6['swap']?(this['initialize'+'Attributes'](_0x2913e6),this['_scripts'][_0x10e368]=_0x2913e6,this['_scriptsIn'+'dex'][_0x448572]['instance']=_0x2913e6,this[_0x448572]=_0x2913e6,_0x2913e6['__executio'+'nOrder']=_0x10e368,_0x445347['update']&&this['_updateLis'+'t']['remove'](_0x445347),_0x445347['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x445347),_0x2913e6['update']&&this['_updateLis'+'t']['insert'](_0x2913e6),_0x2913e6['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x2913e6),this['_scriptMet'+'hod'](_0x2913e6,PF,_0x445347),this['fire']('swap',_0x448572,_0x2913e6),this['fire']('swap:'+_0x448572,_0x2913e6),!(0x1*-0x15fd+0x263*0x7+0x1a*0x34)):!(-0x4f7*0x5+-0x15fe+0xd*0x39a);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x35021e,_0x56cb8f){var _0x4f2d17,_0x13d1cb,_0x12f233;const _0x53a712=this['entity']['script'];for(const _0x5188e1 in _0x35021e['_scriptsIn'+'dex']){const _0x49640f=this['system']['app']['scripts']['get'](_0x5188e1);if(!_0x49640f)continue;const _0x2e145e=_0x35021e['_scriptsIn'+'dex'][_0x5188e1];if(!_0x2e145e||!_0x2e145e['instance'])continue;const _0x2df57e=_0x53a712[_0x5188e1]['__attribut'+'esRaw']??_0x53a712['_attribute'+'DataMap']['get'](_0x5188e1),_0x540084=_0x53a712[_0x5188e1]['__attribut'+'es'];if(!_0x2df57e&&!_0x540084)continue;const _0x2c5eb2=!!_0x2df57e,_0x58af7b=_0x2e145e['instance']['__attribut'+'es']??_0x53a712['_attribute'+'DataMap']['get'](_0x5188e1);for(const _0x452a98 in _0x58af7b){if(!_0x58af7b[_0x452a98])continue;const _0xb18583=((_0x4f2d17=_0x49640f['attributes'])==null?void(-0x204e+-0x20a+0x2258):_0x4f2d17['get'](_0x452a98))??((_0x12f233=(_0x13d1cb=this['system']['app']['scripts']['getSchema'](_0x5188e1))==null?void(-0x23e1+-0x10b9+0x349a):_0x13d1cb['attributes'])==null?void(0x3*-0x215+-0xb23+-0x8b1*-0x2):_0x12f233[_0x452a98]);if(_0xb18583){if(_0xb18583['type']==='entity')this['_resolveEn'+'tityScript'+'Attribute'](_0xb18583,_0x452a98,_0x58af7b[_0x452a98],_0x2c5eb2,_0x2df57e||_0x540084,_0x56cb8f);else{if(_0xb18583['type']==='json'&&Array['isArray'](_0xb18583['schema'])){const _0x45f9a9=_0x58af7b[_0x452a98],_0xf35274=_0x2df57e?_0x2df57e[_0x452a98]:_0x540084[_0x452a98];for(let _0x37280e=-0x11*0x1c6+-0x1afa+0x724*0x8;_0x37280e<_0xb18583['schema']['length'];_0x37280e++){const _0x6821a6=_0xb18583['schema'][_0x37280e];if(_0x6821a6['type']==='entity'){if(_0xb18583['array']){for(let _0x38f653=0x2553+0x38f+0x2*-0x1471;_0x38f653<_0x45f9a9['length'];_0x38f653++)this['_resolveEn'+'tityScript'+'Attribute'](_0x6821a6,_0x6821a6['name'],_0x45f9a9[_0x38f653][_0x6821a6['name']],_0x2c5eb2,_0xf35274[_0x38f653],_0x56cb8f);}else this['_resolveEn'+'tityScript'+'Attribute'](_0x6821a6,_0x6821a6['name'],_0x45f9a9[_0x6821a6['name']],_0x2c5eb2,_0xf35274,_0x56cb8f);}}}}}}}}['move'](_0x540022,_0x232d25){const _0x3e72ea=this['_scripts']['length'];if(_0x232d25>=_0x3e72ea||_0x232d25<-0x367+-0x256e+-0x28d5*-0x1)return!(-0x266+-0x5*0x773+-0xa*-0x3f7);let _0x3e719f=_0x540022,_0x32b3bc=_0x540022;typeof _0x32b3bc!='string'?_0x32b3bc=_0x540022['__name']:_0x3e719f=null;const _0x1ed52c=this['_scriptsIn'+'dex'][_0x32b3bc];if(!_0x1ed52c||!_0x1ed52c['instance'])return!(0x62d+-0x767*0x3+-0x335*-0x5);const _0xba4736=_0x1ed52c['instance'];if(_0x3e719f&&!(_0xba4736 instanceof _0x3e719f))return!(-0x23f3+0x415*0x5+-0xf8b*-0x1);const _0x1d824e=this['_scripts']['indexOf'](_0xba4736);return _0x1d824e===-(0xc5*-0xd+-0x11a5+0x1ba7*0x1)||_0x1d824e===_0x232d25?!(0xcc7+0x18d7*0x1+-0x259d):(this['_scripts']['splice'](_0x232d25,0x10e0+-0x1192+0xb2,this['_scripts']['splice'](_0x1d824e,-0x53f*-0x1+0x6b*0xa+-0x96c)[-0xc*-0x37+0x1*0x42e+0x15a*-0x5]),this['_resetExec'+'utionOrder'](-0x1015*0x2+0x13d6+0xc54,_0x3e72ea),this['_updateLis'+'t']['sort'](),this['_postUpdat'+'eList']['sort'](),this['fire']('move',_0x32b3bc,_0xba4736,_0x232d25,_0x1d824e),this['fire']('move:'+_0x32b3bc,_0xba4736,_0x232d25,_0x1d824e),!(-0xfb5+0x9b3+0x602));}}h(Ii,'EVENT_CREA'+'TE','create'),h(Ii,'EVENT_DEST'+'ROY','destroy'),h(Ii,'EVENT_ENAB'+'LE','enable'),h(Ii,'EVENT_DISA'+'BLE','disable'),h(Ii,'EVENT_REMO'+'VE','remove'),h(Ii,'EVENT_STAT'+'E','state'),h(Ii,'EVENT_MOVE','move'),h(Ii,'EVENT_ERRO'+'R','error');class IF{constructor(){this['enabled']=!(0x22ba+0x553*0x6+-0x44*0xfb);}}const LF='_onInitial'+'izeAttribu'+'tes',RF='_onInitial'+'ize',OF='_onPostIni'+'tialize',FF='_onUpdate',NF='_onPostUpd'+'ate';let Mc=-0xd55*-0x2+-0x19bc+-0x77*0x2;class kF extends ct{constructor(_0x1e404d){super(_0x1e404d),this['id']='script',this['ComponentT'+'ype']=Ii,this['DataType']=IF,this['_component'+'s']=new oh({'sortBy':'_execution'+'Order'}),this['_enabledCo'+'mponents']=new oh({'sortBy':'_execution'+'Order'}),this['preloading']=!(-0x1*-0x155b+-0x1414+-0x1*0x147),this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this),this['app']['systems']['on']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['on']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x140fa8,_0x142566){if(_0x140fa8['_execution'+'Order']=Mc++,this['_component'+'s']['append'](_0x140fa8),Mc>Number['MAX_SAFE_I'+'NTEGER']&&this['_resetExec'+'utionOrder'](),_0x140fa8['enabled']=_0x142566['hasOwnProp'+'erty']('enabled')?!!_0x142566['enabled']:!(0x3*0x581+0x26e7*0x1+-0x2*0x1bb5),_0x140fa8['enabled']&&_0x140fa8['entity']['enabled']&&this['_enabledCo'+'mponents']['append'](_0x140fa8),_0x142566['hasOwnProp'+'erty']('order')&&_0x142566['hasOwnProp'+'erty']('scripts')){_0x140fa8['_scriptsDa'+'ta']=_0x142566['scripts'];for(let _0x2cc40b=0xce3+0x7*0x4bb+-0x2e00;_0x2cc40b<_0x142566['order']['length'];_0x2cc40b++)_0x140fa8['create'](_0x142566['order'][_0x2cc40b],{'enabled':_0x142566['scripts'][_0x142566['order'][_0x2cc40b]]['enabled'],'attributes':_0x142566['scripts'][_0x142566['order'][_0x2cc40b]]['attributes'],'preloading':this['preloading']});}}['cloneCompo'+'nent'](_0x5a9c09,_0x52272b){var _0x477412;const _0x5ebf9c=[],_0x300dc1={};for(let _0x521ce0=0x70a+0x1*-0x2ef+-0x41b;_0x521ce0<_0x5a9c09['script']['_scripts']['length'];_0x521ce0++){const _0x4cb76a=_0x5a9c09['script']['_scripts'][_0x521ce0],_0x4e6346=_0x4cb76a['__scriptTy'+'pe']['__name'];_0x5ebf9c['push'](_0x4e6346);const _0x3b54a7=((_0x477412=_0x5a9c09['script']['_attribute'+'DataMap'])==null?void(-0x1484+0x126c+0x218):_0x477412['get'](_0x4e6346))||{};for(const _0x4ade72 in _0x4cb76a['__attribut'+'es'])_0x3b54a7[_0x4ade72]=_0x4cb76a['__attribut'+'es'][_0x4ade72];_0x300dc1[_0x4e6346]={'enabled':_0x4cb76a['_enabled'],'attributes':_0x3b54a7};}for(const _0x5e3528 in _0x5a9c09['script']['_scriptsIn'+'dex'])_0x5e3528['awaiting']&&_0x5ebf9c['splice'](_0x5e3528['ind'],-0x1e22+-0xc61+0x2a83*0x1,_0x5e3528);const _0x19265e={'enabled':_0x5a9c09['script']['enabled'],'order':_0x5ebf9c,'scripts':_0x300dc1};return this['addCompone'+'nt'](_0x52272b,_0x19265e);}['_resetExec'+'utionOrder'](){Mc=0x1*0x51b+-0x1c89+0x176e;for(let _0x511fd8=0x1*0x49d+0x1*-0x1b4e+0x25*0x9d,_0x2df7de=this['_component'+'s']['length'];_0x511fd8<_0x2df7de;_0x511fd8++)this['_component'+'s']['items'][_0x511fd8]['_execution'+'Order']=Mc++;}['_callCompo'+'nentMethod'](_0x101ec0,_0x5efa55,_0x2cf162){for(_0x101ec0['loopIndex']=0x29*0x25+-0x6e9+-0x15*-0xc;_0x101ec0['loopIndex']<_0x101ec0['length'];_0x101ec0['loopIndex']++)_0x101ec0['items'][_0x101ec0['loopIndex']][_0x5efa55](_0x2cf162);}['_onInitial'+'ize'](){this['preloading']=!(-0x1f*-0x38+0x726+0x2c9*-0x5),this['_callCompo'+'nentMethod'](this['_component'+'s'],LF),this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],RF);}['_onPostIni'+'tialize'](){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],OF);}['_onUpdate'](_0x407a23){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],FF,_0x407a23);}['_onPostUpd'+'ate'](_0x5b5347){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],NF,_0x5b5347);}['_addCompon'+'entToEnabl'+'ed'](_0xe3b4b9){this['_enabledCo'+'mponents']['insert'](_0xe3b4b9);}['_removeCom'+'ponentFrom'+'Enabled'](_0x2b63e6){this['_enabledCo'+'mponents']['remove'](_0x2b63e6);}['_onBeforeR'+'emove'](_0x417a3d,_0x146040){this['_component'+'s']['items']['indexOf'](_0x146040)>=0x2090+-0x233+-0x1e5d&&_0x146040['_onBeforeR'+'emove'](),this['_removeCom'+'ponentFrom'+'Enabled'](_0x146040),this['_component'+'s']['remove'](_0x146040);}['destroy'](){super['destroy'](),this['app']['systems']['off']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['off']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}class y0 extends we{constructor(_0x56b9e6,_0x580b40){super(_0x56b9e6,_0x580b40),h(this,'_layers',[er]),h(this,'_instance',null),h(this,'_materialT'+'mp',null),h(this,'_highQuali'+'tySH',!(0x59*0x13+0x1*-0x1d6e+0x16d3)),h(this,'_customAab'+'b',null),h(this,'_assetRefe'+'rence'),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_castShado'+'ws',!(-0x41*0xe+-0x2314+0x26a3)),(this['_assetRefe'+'rence']=new gl('asset',this,_0x56b9e6['app']['assets'],{'add':this['_onGSplatA'+'ssetAdded'],'load':this['_onGSplatA'+'ssetLoad'],'remove':this['_onGSplatA'+'ssetRemove'],'unload':this['_onGSplatA'+'ssetUnload']},this),_0x580b40['on']('remove',this['onRemoveCh'+'ild'],this),_0x580b40['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x580b40['on']('insert',this['onInsertCh'+'ild'],this),_0x580b40['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['customAabb'](_0x402b03){var _0x5b69ff,_0x40d4ba;this['_customAab'+'b']=_0x402b03,(_0x40d4ba=(_0x5b69ff=this['_instance'])==null?void(-0x1050+-0xa46*-0x1+0x2*0x305):_0x5b69ff['meshInstan'+'ce'])==null||_0x40d4ba['setCustomA'+'abb'](this['_customAab'+'b']);}get['customAabb'](){return this['_customAab'+'b'];}set['instance'](_0x3b2dcf){if(this['destroyIns'+'tance'](),this['_instance']=_0x3b2dcf,this['_instance']){const _0x3fa8eb=this['_instance']['meshInstan'+'ce'];_0x3fa8eb['node']||(_0x3fa8eb['node']=this['entity']),_0x3fa8eb['castShadow']=this['_castShado'+'ws'],_0x3fa8eb['setCustomA'+'abb'](this['_customAab'+'b']),this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['instance'](){return this['_instance'];}set['material'](_0x1b0d31){this['_instance']?this['_instance']['material']=_0x1b0d31:this['_materialT'+'mp']=_0x1b0d31;}get['material'](){var _0xe60563;return((_0xe60563=this['_instance'])==null?void(0x5cc+-0x1b65+-0x1599*-0x1):_0xe60563['material'])??this['_materialT'+'mp']??null;}set['highQualit'+'ySH'](_0x3632d6){_0x3632d6!==this['_highQuali'+'tySH']&&(this['_highQuali'+'tySH']=_0x3632d6,this['_instance']&&this['_instance']['setHighQua'+'litySH'](_0x3632d6));}get['highQualit'+'ySH'](){return this['_highQuali'+'tySH'];}set['castShadow'+'s'](_0x26eda1){var _0x10dfd4;if(this['_castShado'+'ws']!==_0x26eda1){const _0x8b0b36=(_0x10dfd4=this['instance'])==null?void(-0x24fc+0xec4+0x1638):_0x10dfd4['meshInstan'+'ce'];if(_0x8b0b36){const _0x405b91=this['layers'],_0x3c1ac8=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x26eda1)for(let _0x5602cd=0xbeb+-0x201e+-0x1*-0x1433;_0x5602cd<_0x405b91['length'];_0x5602cd++){const _0xf6663b=_0x3c1ac8['layers']['getLayerBy'+'Id'](this['layers'][_0x5602cd]);_0xf6663b&&_0xf6663b['removeShad'+'owCasters']([_0x8b0b36]);}if(_0x8b0b36['castShadow']=_0x26eda1,!this['_castShado'+'ws']&&_0x26eda1)for(let _0x552411=-0x245e+-0x45a*-0x8+0x18e;_0x552411<_0x405b91['length'];_0x552411++){const _0x404ee7=_0x3c1ac8['layers']['getLayerBy'+'Id'](_0x405b91[_0x552411]);_0x404ee7&&_0x404ee7['addShadowC'+'asters']([_0x8b0b36]);}}this['_castShado'+'ws']=_0x26eda1;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['layers'](_0xe44758){this['removeFrom'+'Layers'](),this['_layers']['length']=-0x1*-0x12cd+-0x1f97+0x665*0x2;for(let _0x47c98e=0x1ba6+0x162a+-0x2*0x18e8;_0x47c98e<_0xe44758['length'];_0x47c98e++)this['_layers'][_0x47c98e]=_0xe44758[_0x47c98e];!this['enabled']||!this['entity']['enabled']||this['addToLayer'+'s']();}get['layers'](){return this['_layers'];}set['asset'](_0x251817){const _0x1b041d=_0x251817 instanceof pe?_0x251817['id']:_0x251817;this['_assetRefe'+'rence']['id']!==_0x1b041d&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onGSplatA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x1b041d,this['_assetRefe'+'rence']['asset']&&this['_onGSplatA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['destroyIns'+'tance'](){var _0x21d5b4;this['_instance']&&(this['removeFrom'+'Layers'](),(_0x21d5b4=this['_instance'])==null||_0x21d5b4['destroy'](),this['_instance']=null);}['addToLayer'+'s'](){var _0x108074,_0x2b7a46;const _0x177e9a=(_0x108074=this['instance'])==null?void(0x104f+-0xf72+-0x11*0xd):_0x108074['meshInstan'+'ce'];if(_0x177e9a){const _0x6827d3=this['system']['app']['scene']['layers'];for(let _0x2780a5=0x52d+-0x2385+0xf2c*0x2;_0x2780a5<this['_layers']['length'];_0x2780a5++)(_0x2b7a46=_0x6827d3['getLayerBy'+'Id'](this['_layers'][_0x2780a5]))==null||_0x2b7a46['addMeshIns'+'tances']([_0x177e9a]);}}['removeFrom'+'Layers'](){var _0x38c1a4,_0x3af65f;const _0x387211=(_0x38c1a4=this['instance'])==null?void(0x1ed2+0x752*0x3+-0x34c8):_0x38c1a4['meshInstan'+'ce'];if(_0x387211){const _0x24010e=this['system']['app']['scene']['layers'];for(let _0x14ddee=-0x1523*0x1+0x1646+-0x3*0x61;_0x14ddee<this['_layers']['length'];_0x14ddee++)(_0x3af65f=_0x24010e['getLayerBy'+'Id'](this['_layers'][_0x14ddee]))==null||_0x3af65f['removeMesh'+'Instances']([_0x387211]);}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_instance']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyIns'+'tance'](),this['asset']=null,this['_assetRefe'+'rence']['id']=null,this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x524625,_0x26fe11){this['addToLayer'+'s'](),_0x524625['off']('add',this['onLayerAdd'+'ed'],this),_0x524625['off']('remove',this['onLayerRem'+'oved'],this),_0x26fe11['on']('add',this['onLayerAdd'+'ed'],this),_0x26fe11['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x4fbd76){this['layers']['indexOf'](_0x4fbd76['id'])<0x647+-0x1*0x1841+0xb1*0x1a||this['_instance']&&_0x4fbd76['addMeshIns'+'tances'](this['_instance']['meshInstan'+'ce']);}['onLayerRem'+'oved'](_0x243815){this['layers']['indexOf'](_0x243815['id'])<-0x25f*-0x8+0xfa6+0x2a*-0xd3||this['_instance']&&_0x243815['removeMesh'+'Instances'](this['_instance']['meshInstan'+'ce']);}['onEnable'](){const _0x2f1c2f=this['system']['app']['scene'],_0x5883f3=_0x2f1c2f['layers'];this['_evtLayers'+'Changed']=_0x2f1c2f['on']('set:layers',this['onLayersCh'+'anged'],this),_0x5883f3&&(this['_evtLayerA'+'dded']=_0x5883f3['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x5883f3['on']('remove',this['onLayerRem'+'oved'],this)),this['_instance']?this['addToLayer'+'s']():this['asset']&&this['_onGSplatA'+'ssetAdded']();}['onDisable'](){var _0x169382,_0x4fc05f,_0x3ec9c4;const _0x453284=this['system']['app']['scene']['layers'];(_0x169382=this['_evtLayers'+'Changed'])==null||_0x169382['off'](),this['_evtLayers'+'Changed']=null,_0x453284&&((_0x4fc05f=this['_evtLayerA'+'dded'])==null||_0x4fc05f['off'](),this['_evtLayerA'+'dded']=null,(_0x3ec9c4=this['_evtLayerR'+'emoved'])==null||_0x3ec9c4['off'](),this['_evtLayerR'+'emoved']=null),this['removeFrom'+'Layers']();}['hide'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(0x9*0x2a+-0x1*-0x50e+0x3*-0x22d));}['show'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(0x11ab*0x1+-0x1*-0x158f+-0x2*0x139d));}['_onGSplatA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onGSplatA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onGSplatA'+'ssetLoad'](){this['destroyIns'+'tance']();const _0x1b7114=this['_assetRefe'+'rence']['asset'];_0x1b7114&&(this['instance']=_0x1b7114['resource']['createInst'+'ance'](_0x1b7114['resource'],{'material':this['_materialT'+'mp'],'highQualitySH':this['_highQuali'+'tySH']}),this['_materialT'+'mp']=null,this['customAabb']=this['instance']['resource']['aabb']['clone']());}['_onGSplatA'+'ssetUnload'](){this['destroyIns'+'tance']();}['_onGSplatA'+'ssetRemove'](){this['_onGSplatA'+'ssetUnload']();}}class UF{constructor(){this['enabled']=!(0x1*-0x1cef+0x5*-0x451+0x3d*0xd4);}}const Vu=['enabled'],To=['castShadow'+'s','material','highQualit'+'ySH','asset','layers'];class BF extends ct{constructor(_0x16daee){super(_0x16daee),this['id']='gsplat',this['ComponentT'+'ype']=y0,this['DataType']=UF,this['schema']=Vu,this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0xed4101,_0x4a02e2,_0x3aef86){_0x4a02e2['layers']&&_0x4a02e2['layers']['length']&&(_0x4a02e2['layers']=_0x4a02e2['layers']['slice'](0x1*0x8d+-0x88d+0x800));for(let _0x45bbcb=0x20*-0x6d+0x226e+-0x14ce;_0x45bbcb<To['length'];_0x45bbcb++)_0x4a02e2['hasOwnProp'+'erty'](To[_0x45bbcb])&&(_0xed4101[To[_0x45bbcb]]=_0x4a02e2[To[_0x45bbcb]]);_0x4a02e2['aabbCenter']&&_0x4a02e2['aabbHalfEx'+'tents']&&(_0xed4101['customAabb']=new De(new D(_0x4a02e2['aabbCenter']),new D(_0x4a02e2['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0xed4101,_0x4a02e2,Vu);}['cloneCompo'+'nent'](_0x112340,_0x5ef2c6){const _0x2db511=_0x112340['gsplat'],_0x564f18={};To['forEach'](_0x261b5c=>{_0x261b5c==='material'?_0x564f18[_0x261b5c]=_0x2db511[_0x261b5c]['clone']():_0x564f18[_0x261b5c]=_0x2db511[_0x261b5c];}),_0x564f18['enabled']=_0x2db511['enabled'];const _0x1974cf=this['addCompone'+'nt'](_0x5ef2c6,_0x564f18);return _0x2db511['customAabb']&&(_0x1974cf['customAabb']=_0x2db511['customAabb']['clone']()),_0x1974cf;}['onRemove'](_0x3d732e,_0x540d8b){_0x540d8b['onRemove']();}}we['_buildAcce'+'ssors'](y0['prototype'],Vu);class Em extends me{constructor(){super(...arguments),h(this,'_meshes',null);}set['meshes'](_0x5b1ce3){this['decRefMesh'+'es'](),this['_meshes']=_0x5b1ce3,this['incRefMesh'+'es'](),this['fire']('set:meshes',_0x5b1ce3);}get['meshes'](){return this['_meshes'];}['destroy'](){this['meshes']=null;}['decRefMesh'+'es'](){var _0x3e7ec3;(_0x3e7ec3=this['_meshes'])==null||_0x3e7ec3['forEach']((_0x4b0ff0,_0x72528a)=>{_0x4b0ff0&&(_0x4b0ff0['decRefCoun'+'t'](),_0x4b0ff0['refCount']<-0x26+-0xef*0x3+-0x2*-0x17a&&(_0x4b0ff0['destroy'](),this['_meshes'][_0x72528a]=null));});}['incRefMesh'+'es'](){var _0x37b087;(_0x37b087=this['_meshes'])==null||_0x37b087['forEach'](_0x422a5d=>{_0x422a5d==null||_0x422a5d['incRefCoun'+'t']();});}}h(Em,'EVENT_SETM'+'ESHES','set:meshes');function sh(_0x4dfcb1){const _0xce6ab=this;if(!_0xce6ab['resource'])return;const _0xa3022c=_0x4dfcb1['resource'],_0x4f362b=_0xa3022c['renders']&&_0xa3022c['renders'][_0xce6ab['data']['renderInde'+'x']];_0x4f362b&&(_0xce6ab['resource']['meshes']=_0x4f362b['resource']['meshes']);}function pS(_0x2cd81f){const _0x92eae=this;_0x92eae['registry']['off']('load:'+_0x2cd81f['id'],sh,_0x92eae),_0x92eae['registry']['on']('load:'+_0x2cd81f['id'],sh,_0x92eae),_0x92eae['registry']['off']('remove:'+_0x2cd81f['id'],mS,_0x92eae),_0x92eae['registry']['once']('remove:'+_0x2cd81f['id'],mS,_0x92eae),_0x2cd81f['resource']?sh['call'](_0x92eae,_0x2cd81f):_0x92eae['registry']['load'](_0x2cd81f);}function mS(_0x416ee3){const _0x2701f8=this;_0x2701f8['registry']['off']('load:'+_0x416ee3['id'],sh,_0x2701f8),_0x2701f8['resource']&&_0x2701f8['resource']['destroy']();}class zF extends Qe{constructor(_0x5d511e){super(_0x5d511e,'render'),this['_registry']=_0x5d511e['assets'];}['open'](_0x212e50,_0x52ccb6){return new Em();}['patch'](_0x1a88b6,_0xe249e7){if(!_0x1a88b6['data']['containerA'+'sset'])return;const _0x2f65fd=_0xe249e7['get'](_0x1a88b6['data']['containerA'+'sset']);if(!_0x2f65fd){_0xe249e7['once']('add:'+_0x1a88b6['data']['containerA'+'sset'],pS,_0x1a88b6);return;}pS['call'](_0x1a88b6,_0x2f65fd);}}class v0{constructor(_0x4cac72,_0x50a166,_0x85a4f1,_0xbcd5ab){this['_paths']=_0x4cac72,this['_input']=_0x50a166,this['_output']=_0x85a4f1,this['_interpola'+'tion']=_0xbcd5ab;}get['paths'](){return this['_paths'];}get['input'](){return this['_input'];}get['output'](){return this['_output'];}get['interpolat'+'ion'](){return this['_interpola'+'tion'];}}class Fh{constructor(_0x4fee4d,_0x25ed5a){this['_component'+'s']=_0x4fee4d,this['_data']=_0x25ed5a;}get['components'](){return this['_component'+'s'];}get['data'](){return this['_data'];}}function VF(_0x4fdeb2,_0x10db19){let _0x3cb7a6;const _0x2610bf=(_0xa480f9,_0x381266)=>{switch(_0x381266){case _0x3cb7a6['DT_INT8']:return new Int8Array(_0xa480f9['buffer'],_0xa480f9['byteOffset'],_0xa480f9['byteLength']);case _0x3cb7a6['DT_INT16']:return new Int16Array(_0xa480f9['buffer'],_0xa480f9['byteOffset'],_0xa480f9['byteLength']/(0x5f*0x17+0x1*0xe4b+-0x16d2));case _0x3cb7a6['DT_INT32']:return new Int32Array(_0xa480f9['buffer'],_0xa480f9['byteOffset'],_0xa480f9['byteLength']/(0x18*0x44+-0x14f6+0xe9a));case _0x3cb7a6['DT_UINT8']:return new Uint8Array(_0xa480f9['buffer'],_0xa480f9['byteOffset'],_0xa480f9['byteLength']);case _0x3cb7a6['DT_UINT16']:return new Uint16Array(_0xa480f9['buffer'],_0xa480f9['byteOffset'],_0xa480f9['byteLength']/(0x10b1+-0x42b+-0xc84));case _0x3cb7a6['DT_UINT32']:return new Uint32Array(_0xa480f9['buffer'],_0xa480f9['byteOffset'],_0xa480f9['byteLength']/(0x70c+0x2*-0x13+0x2*-0x371));case _0x3cb7a6['DT_FLOAT32']:return new Float32Array(_0xa480f9['buffer'],_0xa480f9['byteOffset'],_0xa480f9['byteLength']/(0x24b4+-0x68+-0xc*0x306));}return null;},_0x116699=_0x487498=>{switch(_0x487498){case _0x3cb7a6['DT_INT8']:return-0x2*-0xc46+0x7*-0x3e6+0x2bf;case _0x3cb7a6['DT_INT16']:return 0x435+-0x8d6+0x4a3;case _0x3cb7a6['DT_INT32']:return 0xf23+-0x21f6+-0x1*-0x12d7;case _0x3cb7a6['DT_UINT8']:return-0x1*0x1f8d+0x1554+0xa3a;case _0x3cb7a6['DT_UINT16']:return-0x1a23+0x7*0xba+0x150f;case _0x3cb7a6['DT_UINT32']:return-0x24e+-0x16db+0x192d;case _0x3cb7a6['DT_FLOAT32']:return 0x21be+0x17ba+-0x3974;}return-0x263c+-0x26bd+0x14e*0x3b;},_0x5076a7=_0x5708f8=>_0x5708f8['num_compon'+'ents']()*_0x116699(_0x5708f8['data_type']()),_0x237699={0x0:0x0,0x1:0x1,0x5:0x2,0x2:0x3,0x7:0x4,0x8:0x5,0x4:0x6,0x3:0x7},_0x18295c=(_0x357c70,_0x21ccbc)=>{const _0x52ca7b=(_0x59ef43,_0x584635,_0x1b4710)=>{_0x59ef43[0x5fd*-0x4+0x1cd2+-0x4de]=_0x584635[0x2505+0x882*0x1+-0xb9*0x3f]-_0x1b4710[-0x6b*-0xd+0x447+-0x16*0x71],_0x59ef43[0xb65+-0x1b48+0xfe4]=_0x584635[0x19e2*-0x1+0x21a4+0x1*-0x7c1]-_0x1b4710[0x256*0x4+-0x2209+0x18b2],_0x59ef43[-0x4b2*0x2+0x4c3*-0x1+0xe29]=_0x584635[-0x17e5+-0x164b*-0x1+0x19c]-_0x1b4710[0x1eae+-0x17e8+-0x6c4];},_0x5b13c7=(_0x2c987d,_0x297de9,_0x180075)=>{_0x2c987d[0x2*0x81+0x5*0x26+0x70*-0x4]=_0x297de9[-0xc*0x2cd+-0x1c5b+-0x1*-0x3df8]*_0x180075[0x1e36+0xbd+0x1ef1*-0x1]-_0x180075[0x213a+0x2*-0x12c2+0x44b]*_0x297de9[-0xabf*-0x3+0x102*-0x1+-0x1*0x1f39],_0x2c987d[-0xb*0x10a+0x1037*0x2+-0x14ff]=_0x297de9[-0x43f*-0x8+-0x1e2f+-0x3c7]*_0x180075[-0x1*-0x1c27+-0xe*0x153+-0x1*0x99d]-_0x180075[0x11d3+-0x8c7+-0x90a]*_0x297de9[0x1b43+-0x1c67+-0x4*-0x49],_0x2c987d[0x244c+0x17*-0x10f+-0x1*0xbf1]=_0x297de9[-0x90*-0x1f+-0x2324+0x11b4]*_0x180075[0x1022+-0x2*-0xb51+-0x26c3]-_0x180075[0xbc*-0x21+-0x1681*0x1+0x2ebd]*_0x297de9[-0x485*-0x2+0x213a+-0x1*0x2a43];},_0x561b40=(_0x1f8b2a,_0x22dd72)=>{const _0x8b9eaf=_0x1f8b2a[_0x22dd72+(0x492+0x7*0x6f+-0x289*0x3)],_0x4c5551=_0x1f8b2a[_0x22dd72+(-0x13cd+0x1*0x1725+-0x357)],_0x146fe8=_0x1f8b2a[_0x22dd72+(-0x1d7*0x5+-0xa3+0x78*0x15)],_0x25f207=(0xa*0x1a+0xe47+-0xf4a)/Math['sqrt'](_0x8b9eaf*_0x8b9eaf+_0x4c5551*_0x4c5551+_0x146fe8*_0x146fe8);_0x1f8b2a[_0x22dd72+(0xbed+0x2693*-0x1+0x1aa6)]*=_0x25f207,_0x1f8b2a[_0x22dd72+(-0x228+-0x1*-0x166+0xc3*0x1)]*=_0x25f207,_0x1f8b2a[_0x22dd72+(0xbb9*0x3+0x1701+0x5d1*-0xa)]*=_0x25f207;},_0x4d9604=(_0x35db2a,_0x563914,_0x1a9106)=>{for(let _0x34b023=0x1*-0x173d+-0x125a+0x2997;_0x34b023<-0x1c5f+0x3ca*-0x6+0x12*0x2d7;++_0x34b023)_0x35db2a[_0x34b023]=_0x563914[_0x1a9106+_0x34b023];},_0x253ebf=_0x21ccbc['length']/(0xa*0x305+-0x726+0x1709*-0x1),_0x39da61=_0x357c70['length']/(0x1328+-0x1908+0x5e3),_0x416980=new Float32Array(_0x357c70['length']),_0x1a74a6=[0x2*0x282+-0xd00+0x1c*0x49,0x5ff*-0x3+-0xe5*0x17+0x4*0x9a4,0x1b57*-0x1+0x595*-0x4+0x31ab],_0x47bddd=[0x1662+-0x2f1*-0xb+-0x36bd,-0x4c9*-0x1+0x18e6*0x1+0x1bf*-0x11,-0x2588*0x1+0x20d4+0x4b4],_0x4bd259=[-0x2*0x646+-0x2*-0x106+0xa80,0x800*-0x2+-0x1*-0x90f+0x6f1,-0x1*0x17b9+-0x1a9e+0x731*0x7],_0x454a1c=[0x2204+-0x1b54+-0x6b0,0xb2a+-0x1cef+0x11c5,-0x11*0xb7+0xe6*-0x17+0x10f*0x1f],_0x440115=[-0x1*0x5ee+0x1f05+-0x1917,0x1646+-0x1935+0x2ef,0xb25+0x46b+0x3e4*-0x4],_0x10737b=[0x42c+-0x12f*-0x1b+-0x2421,0xa3f+0x1*-0x8fb+-0x144,0x6*0x55d+0x3fd*-0x4+-0x103a];for(let _0x1d47fb=0x1688+-0x13*0x13d+0x1*0xff;_0x1d47fb<_0x253ebf;++_0x1d47fb){const _0x240261=_0x21ccbc[_0x1d47fb*(-0xb*0x55+-0x42d*0x8+0x2512)+(-0x1865+0x1*0x1f49+0xe*-0x7e)]*(0x7f3+-0x584+-0x26c),_0xec702b=_0x21ccbc[_0x1d47fb*(-0x2*-0x22a+0x1*-0xa67+-0x616*-0x1)+(-0x26d0+-0xacc+0x1*0x319d)]*(-0xd*-0x28a+0x1a7c+-0x3b7b),_0x167923=_0x21ccbc[_0x1d47fb*(-0x13aa+-0x1*-0x2493+0x873*-0x2)+(0x2545+-0x1936*0x1+-0xc0d)]*(-0xe96+-0x14*-0x4c+0x8a9);_0x4d9604(_0x1a74a6,_0x357c70,_0x240261),_0x4d9604(_0x47bddd,_0x357c70,_0xec702b),_0x4d9604(_0x4bd259,_0x357c70,_0x167923),_0x52ca7b(_0x454a1c,_0x47bddd,_0x1a74a6),_0x52ca7b(_0x440115,_0x4bd259,_0x1a74a6),_0x5b13c7(_0x10737b,_0x454a1c,_0x440115),_0x561b40(_0x10737b,-0x19cf+0xb58+0x1*0xe77);for(let _0x2fbd68=0x11b*-0x6+-0x26*0xed+-0xdf0*-0x3;_0x2fbd68<-0xc*-0x2ec+0x1*0xc35+-0x2f42;++_0x2fbd68)_0x416980[_0x240261+_0x2fbd68]+=_0x10737b[_0x2fbd68],_0x416980[_0xec702b+_0x2fbd68]+=_0x10737b[_0x2fbd68],_0x416980[_0x167923+_0x2fbd68]+=_0x10737b[_0x2fbd68];}for(let _0x2f8857=-0xa61*-0x2+0x1*0x11fb+-0x26bd;_0x2f8857<_0x39da61;++_0x2f8857)_0x561b40(_0x416980,_0x2f8857*(-0x119a+-0xf*-0x92+0x305*0x3));return new Uint8Array(_0x416980['buffer']);},_0x4a91e2=_0x333ea1=>{const _0x295745={},_0x10f366=new _0x3cb7a6['DecoderBuf'+'fer']();_0x10f366['Init'](_0x333ea1,_0x333ea1['length']);const _0x36e05c=new _0x3cb7a6['Decoder']();if(_0x36e05c['GetEncoded'+'GeometryTy'+'pe'](_0x10f366)!==_0x3cb7a6['TRIANGULAR'+'_MESH'])return _0x295745['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20mesh:\x20n'+'ot\x20a\x20mesh',_0x295745;const _0x2d43db=new _0x3cb7a6['Mesh'](),_0xadb024=_0x36e05c['DecodeBuff'+'erToMesh'](_0x10f366,_0x2d43db);if(!_0xadb024||!_0xadb024['ok']()||_0x3cb7a6['getPointer'](_0x2d43db)===-0x253c+0x5*0x2b9+0x179f)return _0x295745['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20asset',_0x295745;const _0x264a29=_0x2d43db['num_faces']()*(-0x106b+0x15e0+-0x572),_0x332456=_0x2d43db['num_points']()<=-0x1f454+-0x10a51*-0x1+0x1ea02,_0x469b5d=_0x264a29*(_0x332456?0x968+-0x11a6+0xb*0xc0:-0x8*0x2a3+0x1217+-0x1*-0x305),_0x464ea2=_0x3cb7a6['_malloc'](_0x469b5d);_0x332456?(_0x36e05c['GetTriangl'+'esUInt16Ar'+'ray'](_0x2d43db,_0x469b5d,_0x464ea2),_0x295745['indices']=new Uint16Array(_0x3cb7a6['HEAPU16']['buffer'],_0x464ea2,_0x264a29)['slice']()['buffer']):(_0x36e05c['GetTriangl'+'esUInt32Ar'+'ray'](_0x2d43db,_0x469b5d,_0x464ea2),_0x295745['indices']=new Uint32Array(_0x3cb7a6['HEAPU32']['buffer'],_0x464ea2,_0x264a29)['slice']()['buffer']),_0x3cb7a6['_free'](_0x464ea2);const _0x65c47b=[];for(let _0x4fe377=-0x1*0x1b35+-0xe1*0x6+0x207b;_0x4fe377<_0x2d43db['num_attrib'+'utes']();++_0x4fe377)_0x65c47b['push'](_0x36e05c['GetAttribu'+'te'](_0x2d43db,_0x4fe377));_0x65c47b['sort']((_0x79fb3c,_0x3c7813)=>(_0x237699[_0x79fb3c['attribute_'+'type']()]??_0x237699['length'])-(_0x237699[_0x3c7813['attribute_'+'type']()]??_0x237699['length'])),_0x295745['attributes']=_0x65c47b['map'](_0x258aef=>_0x258aef['unique_id']());let _0x1279cd=0xbfc+0x1df*0x3+-0x1199;const _0x5c0918=_0x65c47b['map'](_0x504fef=>{const _0x3c7825=_0x1279cd;return _0x1279cd+=Math['ceil'](_0x5076a7(_0x504fef)/(0x11e6+0x95a+-0x1b3c))*(-0x67*-0x47+0xab3+0x13a0*-0x2),_0x3c7825;}),_0x420a08=_0x65c47b['some'](_0x38d978=>_0x38d978['attribute_'+'type']()===-0x1df*-0x3+0x61*-0x13+-0x197*-0x1),_0x59453f=_0x5c0918[-0xce+-0x2*0x864+0x1197];if(!_0x420a08){for(let _0x204da6=-0x96d*0x1+0x6*0x5bf+-0x190c;_0x204da6<_0x5c0918['length'];++_0x204da6)_0x5c0918[_0x204da6]+=0x1*-0x8f1+0x14cd+-0xbd0;_0x1279cd+=0x41*0x7a+-0x26cf*0x1+-0x7e1*-0x1;}_0x295745['vertices']=new ArrayBuffer(_0x2d43db['num_points']()*_0x1279cd);const _0x2d71cd=new Uint8Array(_0x295745['vertices']);for(let _0x219e97=-0x244e+0x79f+0x1caf;_0x219e97<_0x2d43db['num_attrib'+'utes']();++_0x219e97){const _0x4c8b5f=_0x65c47b[_0x219e97],_0x48f077=_0x5076a7(_0x4c8b5f),_0x6ebede=_0x2d43db['num_points']()*_0x48f077,_0x4933a3=_0x3cb7a6['_malloc'](_0x6ebede);_0x36e05c['GetAttribu'+'teDataArra'+'yForAllPoi'+'nts'](_0x2d43db,_0x4c8b5f,_0x4c8b5f['data_type'](),_0x6ebede,_0x4933a3);const _0x6074c4=new Uint8Array(_0x3cb7a6['HEAPU8']['buffer'],_0x4933a3,_0x6ebede);for(let _0x41456a=-0xb9a+0x399*-0x4+0x19fe;_0x41456a<_0x2d43db['num_points']();++_0x41456a)for(let _0x1857d9=-0x8*-0x35+-0x1e75+0x65*0x49;_0x1857d9<_0x48f077;++_0x1857d9)_0x2d71cd[_0x41456a*_0x1279cd+_0x5c0918[_0x219e97]+_0x1857d9]=_0x6074c4[_0x41456a*_0x48f077+_0x1857d9];if(!_0x420a08&&_0x4c8b5f['attribute_'+'type']()===0xf*0x93+-0x1*-0x95c+-0x11f9){const _0x2e84b9=_0x18295c(_0x2610bf(_0x6074c4,_0x4c8b5f['data_type']()),_0x332456?new Uint16Array(_0x295745['indices']):new Uint32Array(_0x295745['indices']));for(let _0x456c8b=0x1b9e+0x1429+-0x2fc7;_0x456c8b<_0x2d43db['num_points']();++_0x456c8b)for(let _0x3cd3d2=-0x1877+-0xf9b+-0x1*-0x2812;_0x3cd3d2<0x1671+0x754+0x43f*-0x7;++_0x3cd3d2)_0x2d71cd[_0x456c8b*_0x1279cd+_0x59453f+_0x3cd3d2]=_0x2e84b9[_0x456c8b*(-0x1*-0x2598+-0xe73+-0x1719)+_0x3cd3d2];}_0x3cb7a6['_free'](_0x4933a3);}return _0x3cb7a6['destroy'](_0x2d43db),_0x3cb7a6['destroy'](_0x36e05c),_0x3cb7a6['destroy'](_0x10f366),_0x295745;},_0x159b93=_0x2ce2f7=>{const _0x1cc935=_0x4a91e2(new Uint8Array(_0x2ce2f7['buffer']));self['postMessag'+'e']({'jobId':_0x2ce2f7['jobId'],'error':_0x1cc935['error'],'indices':_0x1cc935['indices'],'vertices':_0x1cc935['vertices'],'attributes':_0x1cc935['attributes']},[_0x1cc935['indices'],_0x1cc935['vertices']]['filter'](_0x22f02e=>_0x22f02e!=null));},_0x2db83d=[];self['onmessage']=_0x3d5313=>{const _0x528a23=_0x3d5313['data'];switch(_0x528a23['type']){case'init':self['DracoDecod'+'erModule']({'instantiateWasm':(_0x1a3aeb,_0x25c6b2)=>(WebAssembly['instantiat'+'e'](_0x528a23['module'],_0x1a3aeb)['then'](_0x1f620e=>_0x25c6b2(_0x1f620e))['catch'](_0x147c20=>console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x147c20)),{})})['then'](_0x5ea485=>{_0x3cb7a6=_0x5ea485,_0x2db83d['forEach'](_0x4cce28=>_0x159b93(_0x4cce28));});break;case'decodeMesh':_0x3cb7a6?_0x159b93(_0x528a23):_0x2db83d['push'](_0x528a23);break;}};}const _S=0x67*-0x2b+-0x26*-0xa3+-0x6e2;class GF{constructor(){this['workers']=[[],[],[]],this['jobId']=-0x1883+0x2*0xf91+-0x71*0xf,this['jobQueue']=[],this['jobCallbac'+'ks']=new Map(),this['run']=(_0x2a8de2,_0x5cca45)=>{_0x2a8de2['postMessag'+'e']({'type':'decodeMesh','jobId':_0x5cca45['jobId'],'buffer':_0x5cca45['buffer']},[_0x5cca45['buffer']]);};}['init'](_0xadd47e){for(_0xadd47e['forEach'](_0x4f2e0e=>{_0x4f2e0e['addEventLi'+'stener']('message',_0x1f363=>{const _0x478fe9=_0x1f363['data'],_0x4d596c=this['jobCallbac'+'ks']['get'](_0x478fe9['jobId']);if(_0x4d596c&&_0x4d596c(_0x478fe9['error'],{'indices':_0x478fe9['indices'],'vertices':_0x478fe9['vertices'],'attributes':_0x478fe9['attributes']}),this['jobCallbac'+'ks']['delete'](_0x478fe9['jobId']),this['jobQueue']['length']>0x1*0x18d1+-0x1725+-0x1ac){const _0x19facd=this['jobQueue']['shift']();this['run'](_0x4f2e0e,_0x19facd);}else{const _0x29ddd8=this['workers'][-0x7*-0x14f+-0x21*0xa1+-0x63*-0x1e]['indexOf'](_0x4f2e0e);if(_0x29ddd8!==-(-0x68*-0x58+0x2621*0x1+-0x49e0))this['workers'][0x129*-0x13+0x3*0x8ce+-0x45d]['splice'](_0x29ddd8,0xb64*-0x1+0x8*0x104+0x345),this['workers'][-0x18a5+0x19c3+-0x11d*0x1]['push'](_0x4f2e0e);else{const _0x3d70c9=this['workers'][0x16*0x10d+0x1*0xc22+-0x233f]['indexOf'](_0x4f2e0e);_0x3d70c9!==-(0x9*-0x40f+0x4*0xc2+-0x43*-0x80)?(this['workers'][-0xea7+-0x1*-0x16f9+-0x851*0x1]['splice'](_0x3d70c9,-0x19d3+-0x2*-0x11b+0x179e),this['workers'][-0x2*0x1052+0x1f84+0x120]['push'](_0x4f2e0e)):w['error']('logical\x20er'+'ror');}}});}),this['workers'][0x19de+0x10ec+-0x1565*0x2]=_0xadd47e;this['jobQueue']['length']&&(this['workers'][0x2666+-0x61f*0x1+-0x2047*0x1]['length']||this['workers'][-0x857+-0x1*-0x1231+-0x9d9]['length']);){const _0xf508ae=this['jobQueue']['shift']();if(this['workers'][0x4*0x508+0x524+0x84*-0x31]['length']>-0x1*-0x1837+-0x19aa+0x7*0x35){const _0x1ca62d=this['workers'][0x1d3c+0x1*0x26c3+0x43ff*-0x1]['shift']();this['workers'][0x1*-0xc41+-0x2025+-0x1a5*-0x1b]['push'](_0x1ca62d),this['run'](_0x1ca62d,_0xf508ae);}else{const _0x4d3d74=this['workers'][-0x17f4+0x1235*0x1+0x5c*0x10]['shift']();this['workers'][0x1972+-0x1ec4+0x554]['push'](_0x4d3d74),this['run'](_0x4d3d74,_0xf508ae);}}}['enqueueJob'](_0x462b43,_0x51cdde){const _0x13a72a={'jobId':this['jobId']++,'buffer':_0x462b43};if(this['jobCallbac'+'ks']['set'](_0x13a72a['jobId'],_0x51cdde),this['workers'][0x5*0x36a+-0x24e2+0x13d0]['length']>-0x1*0xe2f+0x2120+-0x175*0xd){const _0x17aa70=this['workers'][0x4b*-0x2d+-0x2*0x6c5+0x1ab9]['shift']();this['workers'][-0x22aa+0x20ad+0x6*0x55]['push'](_0x17aa70),this['run'](_0x17aa70,_0x13a72a);}else{if(this['workers'][0x91c+0x4*-0x1b4+0x1*-0x24b]['length']>-0x1*-0x2692+-0x354*-0x2+-0x2d3a){const _0x246476=this['workers'][0xdd+0x18a2+-0x197e]['shift']();this['workers'][0x19e3+-0x2488+0xaa7]['push'](_0x246476),this['run'](_0x246476,_0x13a72a);}else this['jobQueue']['push'](_0x13a72a);}}}const HF=_0x353119=>new Promise((_0x19de60,_0x16caf2)=>{const _0x48e2d6={'cache':!(-0x1e6*0xe+-0x2*-0x3a4+0x134c),'responseType':'text','retry':_S>-0x10b9+-0x66a*-0x6+-0x15c3,'maxRetries':_S};ot['get'](_0x353119,_0x48e2d6,(_0x1e24fd,_0x193ff1)=>{_0x1e24fd?_0x16caf2(_0x1e24fd):_0x19de60(_0x193ff1);});}),WF=_0x2294eb=>{const _0x26b5a0=()=>fetch(_0x2294eb)['then'](_0x466e2e=>_0x466e2e['arrayBuffe'+'r']())['then'](_0x391e82=>WebAssembly['compile'](_0x391e82)),_0x379154=()=>WebAssembly['compileStr'+'eaming'](fetch(_0x2294eb))['catch'](_0x3a3c5e=>(w['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x2294eb+'\x20('+_0x3a3c5e+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x26b5a0()));return WebAssembly['compileStr'+'eaming']?_0x379154():_0x26b5a0();},gS=-0x6b8+0x1*-0x26a5+-0x2*-0x16af;let ih;const $F=_0x4ea98c=>{if(ih)return!(-0x3d7*-0x7+0x411*-0x6+-0x7f*0x5);if(!_0x4ea98c){const _0x550cac=YS['getConfig']('DracoDecod'+'erModule');_0x550cac?_0x4ea98c={'jsUrl':_0x550cac['glueUrl'],'wasmUrl':_0x550cac['wasmUrl'],'numWorkers':_0x550cac['numWorkers']}:_0x4ea98c={'jsUrl':'draco.wasm'+'.js','wasmUrl':'draco.wasm'+'.wasm','numWorkers':gS};}return!_0x4ea98c['jsUrl']||!_0x4ea98c['wasmUrl']?!(0x232*0x8+0x3*-0x243+-0xac6*0x1):(ih=new GF(),Promise['all']([HF(_0x4ea98c['jsUrl']),WF(_0x4ea98c['wasmUrl'])])['then'](([_0x4c8836,_0xeec501])=>{const _0x31fcce=['/*\x20draco\x20*'+'/',_0x4c8836,'/*\x20worker\x20'+'*/','(\x0a'+VF['toString']()+'\x0a)()\x0a\x0a']['join']('\x0a'),_0x17bb61=new Blob([_0x31fcce],{'type':'applicatio'+'n/javascri'+'pt'}),_0x2775d3=URL['createObje'+'ctURL'](_0x17bb61),_0xd0d866=Math['max'](0x2*0x152+-0x1ddc+-0x3*-0x913,Math['min'](0xe*-0x22a+-0x22f1*0x1+0x414d,_0x4ea98c['numWorkers']||gS)),_0x5d3e64=[];for(let _0x5b7857=0xb81+-0x22*-0xda+0x2875*-0x1;_0x5b7857<_0xd0d866;++_0x5b7857){const _0x4dfd8e=new Worker(_0x2775d3);_0x4dfd8e['postMessag'+'e']({'type':'init','module':_0xeec501}),_0x5d3e64['push'](_0x4dfd8e);}ih['init'](_0x5d3e64);}),!(-0x206*0x13+0x94b+-0x11*-0x1b7));},XF=(_0x1c3f83,_0x4a0b28)=>$F()?(ih['enqueueJob'](_0x1c3f83,_0x4a0b28),!(0x1920+0x10c1*0x2+-0x3aa2)):!(0xf34+-0x1a*0x133+-0xffb*-0x1);class qF{constructor(){h(this,'gltf'),h(this,'nodes'),h(this,'scenes'),h(this,'animations'),h(this,'textures'),h(this,'materials'),h(this,'variants'),h(this,'meshVarian'+'ts'),h(this,'meshDefaul'+'tMaterials'),h(this,'renders'),h(this,'skins'),h(this,'lights'),h(this,'cameras'),h(this,'nodeInstan'+'cingMap');}['destroy'](){this['renders']&&this['renders']['forEach'](_0x3e01f0=>{_0x3e01f0['meshes']=null;});}}const x0=_0x32808f=>/^data:[^\n\r,\u2028\u2029]*,.*$/i['test'](_0x32808f),jF=_0x5a5477=>_0x5a5477['substring'](_0x5a5477['indexOf'](':')+(0xaae+-0x5b6+0x1*-0x4f7),_0x5a5477['indexOf'](';')),yl=_0x259f65=>{switch(_0x259f65){case'SCALAR':return 0x1013+-0x298+-0xd7a;case'VEC2':return 0x2527+0x129d+-0x37c2;case'VEC3':return-0x6b*0x5c+0xf11+0x1766;case'VEC4':return 0x1*0x224+-0x34*0x53+-0x52*-0x2e;case'MAT2':return 0x10fc+0x4a1+-0x1599;case'MAT3':return-0x20f+0x1*-0x1102+-0x1e9*-0xa;case'MAT4':return-0x95*-0x1b+0x24ff+-0x34a6;default:return-0xb*-0x101+0x132a+0x2*-0xf19;}},Dd=_0x127ee2=>{switch(_0x127ee2){case-0xd*0xa4+0x2196*-0x1+-0x13d*-0x32:return dd;case-0xe73+-0x1*-0x9ee+0x1886:return la;case 0x26f4+0x1*-0x7fe+-0xaf4*0x1:return fd;case-0x1c+-0x79a+0x1*0x1bb9:return Ml;case 0xb*-0x138+-0xea8*-0x2+0x41c:return Ty;case-0x1ff2+0x27e*0x1+0x3179:return el;case-0x11*-0x8d+-0xe96+0x193f:return Ve;default:return-0x1*0x6ca+-0x11b+-0x2f*-0x2b;}},YF=_0x34ed07=>{switch(_0x34ed07){case 0x6d*-0x1d+-0x191f+0x3978:return-0x21dd*0x1+-0x25ff+0x47dd;case 0x25af+0x1ff0+0x6*-0x845:return-0x1d*-0x2a+-0x1*-0x1897+-0x1d58;case-0xee4+-0xa3b*0x1+0x2d21:return 0x21f*0xa+0x1*-0x20e3+0xbaf;case-0xe0*0x6+-0x25ad+0x1*0x3ef0:return 0x3d*0x24+0x1e15+0x7bb*-0x5;case 0x735+-0x1665+0x2ef*0xc:return 0x2c3+0x521+-0x7e0;case 0xbf7+0x86d*0x3+0x1*-0x1139:return 0x10f5*-0x1+-0x7*0x3a9+-0x553*-0x8;case 0x4d*0x25+0x3e*0x13+0x44b:return 0x6d5+-0x1*0x12df+0xc0e;default:return 0x9fa*-0x1+0xd12+-0x318;}},KF=_0x2a10c5=>{switch(_0x2a10c5){case 0xb0a*-0x1+0x48*0x89+-0x77e:return Int8Array;case-0x137*-0x17+-0x1a0f+0x121f:return Uint8Array;case 0x2*-0x1241+0x14ed+0x2397*0x1:return Int16Array;case 0x1*0x1cae+0x15d3+-0x1e7e*0x1:return Uint16Array;case-0x1e41*0x1+0x142a+-0x1*-0x1e1b:return Int32Array;case 0x1*-0xe17+-0x1e54+0x4070:return Uint32Array;case-0x549+0x1*-0x1f8f+0x2*0x1c6f:return Float32Array;default:return null;}},Nh={'POSITION':Me,'NORMAL':gs,'TANGENT':yi,'COLOR_0':Wt,'JOINTS_0':us,'WEIGHTS_0':gi,'TEXCOORD_0':is,'TEXCOORD_1':ba,'TEXCOORD_2':wl,'TEXCOORD_3':El,'TEXCOORD_4':bl,'TEXCOORD_5':Al,'TEXCOORD_6':Cl,'TEXCOORD_7':Pl},SS={[Me]:-0x4*-0x49b+-0x1d21*0x1+0xab5*0x1,[gs]:-0x1*-0x1c2b+-0x1396+0x3*-0x2dc,[yi]:-0x583+-0x26d9+0x765*0x6,[Wt]:0x1*-0x2690+-0x2664+-0x4cf7*-0x1,[us]:0x3*0xcf5+-0x4c5+0x110b*-0x2,[gi]:0x202d+-0x67e*0x2+0xc*-0x199,[is]:-0x3d*0x35+-0x215d+0x2e04,[ba]:-0x267a+0x1b40+0xb41,[wl]:-0x5ff+-0x2*0xd37+0x2075,[El]:-0x3*0x582+0x4d*0x53+-0x868,[bl]:-0x2*0x893+0x4d*0x6a+0x72*-0x21,[Al]:-0x1*-0x73c+0x16ce+0x1*-0x1dff,[Cl]:-0x5*0x33e+-0xde*0x26+0x3136,[Pl]:0x10ad+-0x7*-0x52+-0x2*0x96f},ZF=_0x340aa1=>{switch(_0x340aa1){case dd:return _0x58fb15=>Math['max'](_0x58fb15/(-0x3*0x623+0x921+0x9c7),-(-0x308+-0x15b3+0x2*0xc5e));case la:return _0x46fba5=>_0x46fba5/(-0x1fa0+0x1d0+0x1*0x1ecf);case fd:return _0x469d57=>Math['max'](_0x469d57/(-0x585d+0x5*-0x13b1+-0x53*-0x3cb),-(0x350+0x13cf+0xb8f*-0x2));case Ml:return _0x54f95a=>_0x54f95a/(-0x39*-0x2db+0x2f*-0x311+0x1*0xed5b);default:return _0x47b51e=>_0x47b51e;}},Gu=(_0x2baed6,_0x2ce797,_0x249425)=>{const _0x2cadf9=ZF(_0x249425),_0x3463cf=_0x2ce797['length'];for(let _0x4191b4=0x2569+-0xe7c+-0x16ed;_0x4191b4<_0x3463cf;++_0x4191b4)_0x2baed6[_0x4191b4]=_0x2cadf9(_0x2ce797[_0x4191b4]);return _0x2baed6;},ua=(_0x431ffe,_0x29b44f,_0x430b7a=!(0x24e8+-0x1fdf+0x2*-0x284))=>{const _0x27cb97=yl(_0x431ffe['type']),_0x55c3e3=KF(_0x431ffe['componentT'+'ype']);if(!_0x55c3e3)return null;let _0x65f041;if(_0x431ffe['sparse']){const _0x374c55=_0x431ffe['sparse'],_0x4f5e40={'count':_0x374c55['count'],'type':'SCALAR'},_0x17db78=ua(Object['assign'](_0x4f5e40,_0x374c55['indices']),_0x29b44f,!(-0x22c6+-0x397+0x1ab*0x17)),_0x48b23e={'count':_0x374c55['count'],'type':_0x431ffe['type'],'componentType':_0x431ffe['componentT'+'ype']},_0xb49790=ua(Object['assign'](_0x48b23e,_0x374c55['values']),_0x29b44f,!(0x168e+0x1d8b*0x1+0x3419*-0x1));if(_0x431ffe['hasOwnProp'+'erty']('bufferView')){const _0x6835b4={'bufferView':_0x431ffe['bufferView'],'byteOffset':_0x431ffe['byteOffset'],'componentType':_0x431ffe['componentT'+'ype'],'count':_0x431ffe['count'],'type':_0x431ffe['type']};_0x65f041=ua(_0x6835b4,_0x29b44f,!(-0x759+0x9d9+-0x280))['slice']();}else _0x65f041=new _0x55c3e3(_0x431ffe['count']*_0x27cb97);for(let _0x492dda=0x6ce+0x12c5+-0x1993;_0x492dda<_0x374c55['count'];++_0x492dda){const _0x5df4a6=_0x17db78[_0x492dda];for(let _0x7797ca=-0x190b+-0x1*0x12dd+-0x2be8*-0x1;_0x7797ca<_0x27cb97;++_0x7797ca)_0x65f041[_0x5df4a6*_0x27cb97+_0x7797ca]=_0xb49790[_0x492dda*_0x27cb97+_0x7797ca];}}else{if(_0x431ffe['hasOwnProp'+'erty']('bufferView')){const _0x522a5a=_0x29b44f[_0x431ffe['bufferView']];if(_0x430b7a&&_0x522a5a['hasOwnProp'+'erty']('byteStride')){const _0x157513=_0x27cb97*_0x55c3e3['BYTES_PER_'+'ELEMENT'],_0x13103d=new ArrayBuffer(_0x431ffe['count']*_0x157513),_0x13771e=new Uint8Array(_0x13103d);let _0x947b91=-0xfb8+-0x221d+-0x1*-0x31d5;for(let _0x1fed3b=0x4*0x5ba+0x37*0x1+-0x171f;_0x1fed3b<_0x431ffe['count'];++_0x1fed3b){let _0x3ce997=(_0x431ffe['byteOffset']||-0x23e4+-0x2*-0x4a+0x2350)+_0x1fed3b*_0x522a5a['byteStride'];for(let _0x327329=-0xb56+0x2*0x94f+-0x748;_0x327329<_0x157513;++_0x327329)_0x13771e[_0x947b91++]=_0x522a5a[_0x3ce997++];}_0x65f041=new _0x55c3e3(_0x13103d);}else _0x65f041=new _0x55c3e3(_0x522a5a['buffer'],_0x522a5a['byteOffset']+(_0x431ffe['byteOffset']||0x66a+0xa97*0x1+-0x3*0x5ab),_0x431ffe['count']*_0x27cb97);}else _0x65f041=new _0x55c3e3(_0x431ffe['count']*_0x27cb97);}return _0x65f041;},Pn=(_0x86246c,_0x98e0d6)=>{const _0x5365fd=ua(_0x86246c,_0x98e0d6,!(-0x935*-0x1+-0xd1a*0x2+-0x10ff*-0x1));if(_0x5365fd instanceof Float32Array||!_0x86246c['normalized'])return _0x5365fd;const _0x382cad=new Float32Array(_0x5365fd['length']);return Gu(_0x382cad,_0x5365fd,Dd(_0x86246c['componentT'+'ype'])),_0x382cad;},Hu=_0x17aa76=>{let _0x32961e=_0x17aa76['min'],_0x2d1d2b=_0x17aa76['max'];if(!_0x32961e||!_0x2d1d2b)return null;if(_0x17aa76['normalized']){const _0xeac0f0=Dd(_0x17aa76['componentT'+'ype']);_0x32961e=Gu([],_0x32961e,_0xeac0f0),_0x2d1d2b=Gu([],_0x2d1d2b,_0xeac0f0);}return new De(new D((_0x2d1d2b[-0x10f*-0x9+-0x25a6+0x1c1f]+_0x32961e[0x1*-0x1eb3+0x773*-0x3+0x5*0xa9c])*(0x2*0x21f+-0x2*0xc53+0x1468+0.5),(_0x2d1d2b[0x20ba+-0x1*-0x10e7+-0x10*0x31a]+_0x32961e[-0xedd+-0x205c*-0x1+-0x1*0x117e])*(-0x2178+-0x132d*0x2+0x47d2+0.5),(_0x2d1d2b[0x4*0x8cb+-0x1d47+-0x5e3]+_0x32961e[0x1*-0x112c+-0x1f6a+-0x1*-0x3098])*(0xa8b*-0x1+-0x10b3+-0x16*-0x13d+0.5)),new D((_0x2d1d2b[-0x1a3a+-0x9f6+0x1*0x2430]-_0x32961e[-0x37a+0x3*-0x1b1+0x88d])*(0x87e*-0x4+-0xc14+0x2*0x1706+0.5),(_0x2d1d2b[-0x1*-0xd06+0x442*-0x1+0x1*-0x8c3]-_0x32961e[0x9*-0x2f+-0x127*-0x17+-0x1*0x18d9])*(0x5a*0x9+-0x3*-0x3c1+0xe6d*-0x1+0.5),(_0x2d1d2b[-0x434+0x15e3+-0x1*0x11ad]-_0x32961e[0x1*-0x16+-0x1*0xf5e+0xf76])*(0x131f+-0x1*0x230a+0xfeb+0.5)));},T0=_0x5cb6d1=>{if(!_0x5cb6d1['hasOwnProp'+'erty']('mode'))return js;switch(_0x5cb6d1['mode']){case 0x2609+0x13f1+-0x39fa:return cd;case-0x5*-0x315+-0x26d2*-0x1+0xb*-0x4ee:return hd;case 0x1c6+0x8*0xec+-0x924:return _y;case-0x21e*0x1+0xc59*0x3+-0x22ea:return gy;case 0x12fe+0x2*0x65+0x2*-0x9e2:return js;case-0x29b+-0x2233+0x24d3:return Er;case-0x4b+-0x2361+0x2*0x11d9:return oa;default:return js;}},QF=_0x570e6c=>{const _0x266050=new Uint16Array(_0x570e6c);for(let _0x251982=0x117b+-0x1*0x1651+0x2*0x26b;_0x251982<_0x570e6c;_0x251982++)_0x266050[_0x251982]=_0x251982;return _0x266050;},JF=(_0x574b95,_0x589fe6)=>{const _0x157850=_0x574b95[Me];if(!_0x157850||_0x157850['components']!==-0x845+-0x58a+-0x6e9*-0x2)return;let _0x21e969;if(_0x157850['size']!==_0x157850['stride']){const _0x1f95d7=_0x157850['stride']/No[_0x157850['type']],_0x82b360=new wn[_0x157850['type']](_0x157850['buffer'],_0x157850['offset'],_0x157850['count']*_0x1f95d7);_0x21e969=new wn[_0x157850['type']](_0x157850['count']*(0x2d*-0xb6+0x11ea*-0x2+0x43d5));for(let _0x4cc595=0x1d88+-0x258b+0x803;_0x4cc595<_0x157850['count'];++_0x4cc595)_0x21e969[_0x4cc595*(0x22b6+-0x6*0x61f+-0x3*-0xad)+(0x18a2*0x1+-0x45*-0x3b+-0x9*0x481)]=_0x82b360[_0x4cc595*_0x1f95d7+(-0x1401+-0xa*-0x34c+-0x1*0xcf7)],_0x21e969[_0x4cc595*(-0x11b2+-0x1982*0x1+0x12b*0x25)+(0x1*0x225+-0x38d+0x169)]=_0x82b360[_0x4cc595*_0x1f95d7+(-0x2*-0x5b+-0x5*0x7ca+0xfb*0x27)],_0x21e969[_0x4cc595*(0x15d1*0x1+0x15ac+-0x2b7a)+(-0x1ed4+0x1a16+0x4c0)]=_0x82b360[_0x4cc595*_0x1f95d7+(0x14c3+-0x2290+0x23*0x65)];}else _0x21e969=new wn[_0x157850['type']](_0x157850['buffer'],_0x157850['offset'],_0x157850['count']*(-0xbce*0x3+-0x1*-0x274+0x16f*0x17));const _0x4c181d=_0x157850['count'];_0x589fe6||(_0x589fe6=QF(_0x4c181d));const _0x4eaa03=Iv(_0x21e969,_0x589fe6),_0x181a10=new Float32Array(_0x4eaa03['length']);_0x181a10['set'](_0x4eaa03),_0x574b95[gs]={'buffer':_0x181a10['buffer'],'size':0xc,'offset':0x0,'stride':0xc,'count':_0x4c181d,'components':0x3,'type':Ve};},eN=_0x53c871=>{const _0x1103d4=_0x1a9eae=>{const _0x21997f=[];for(let _0x1d84d7=-0x8e9+-0x174f+0x2038;_0x1d84d7<_0x1a9eae['_levels']['length'];++_0x1d84d7){let _0x45008c=[];if(_0x1a9eae['cubemap']){for(let _0x59be1c=0x1f9*0x3+0x18f6+0x1ee1*-0x1;_0x59be1c<0x1*0x1a69+-0x3*0x36d+-0x101c;++_0x59be1c)_0x45008c['push'](_0x1a9eae['_levels'][_0x1d84d7][_0x59be1c]);}else _0x45008c=_0x1a9eae['_levels'][_0x1d84d7];_0x21997f['push'](_0x45008c);}return _0x21997f;},_0x5106db=new _e(_0x53c871['device'],_0x53c871);return _0x5106db['_levels']=_0x1103d4(_0x53c871),_0x5106db;},tN=_0x1d1ebb=>{const _0x13ba3b=new pe(_0x1d1ebb['name']+'_clone',_0x1d1ebb['type'],_0x1d1ebb['file'],_0x1d1ebb['data'],_0x1d1ebb['options']);return _0x13ba3b['loaded']=!(0x2de*0x4+-0x5*0x1c5+-0x29f),_0x13ba3b['resource']=eN(_0x1d1ebb['resource']),_0x1d1ebb['registry']['add'](_0x13ba3b),_0x13ba3b;},sN=(_0x46d65b,_0x37877d)=>{const _0x1767e8=_0x37877d[Me];if(!_0x1767e8)return null;const _0x432cfd=_0x1767e8['count'],_0x47779d=[];for(const _0x30c795 in _0x37877d)if(_0x37877d['hasOwnProp'+'erty'](_0x30c795)){const _0x2b7b9c={'semantic':_0x30c795,'components':_0x37877d[_0x30c795]['components'],'type':_0x37877d[_0x30c795]['type'],'normalize':!!_0x37877d[_0x30c795]['normalize']};kt['isElementV'+'alid'](_0x46d65b,_0x2b7b9c)||_0x2b7b9c['components']++,_0x47779d['push'](_0x2b7b9c);}_0x47779d['sort']((_0x130bfe,_0x39b273)=>SS[_0x130bfe['semantic']]-SS[_0x39b273['semantic']]);let _0x29b45c,_0x1da15b,_0x49c659,_0x40d69c,_0x5f53b2,_0x515905;const _0xe8ebf5=new kt(_0x46d65b,_0x47779d);let _0x3bf5cf=!(-0x2532+-0x7b*0x6+0x5a*0x72);for(_0x29b45c=0x2021+-0xbe6*-0x2+0x37ed*-0x1;_0x29b45c<_0xe8ebf5['elements']['length'];++_0x29b45c)if(_0x5f53b2=_0xe8ebf5['elements'][_0x29b45c],_0x40d69c=_0x37877d[_0x5f53b2['name']],_0x515905=_0x40d69c['offset']-_0x1767e8['offset'],_0x40d69c['buffer']!==_0x1767e8['buffer']||_0x40d69c['stride']!==_0x5f53b2['stride']||_0x40d69c['size']!==_0x5f53b2['size']||_0x515905!==_0x5f53b2['offset']){_0x3bf5cf=!(-0x23f5+-0x1914+0x3d0a);break;}const _0x4ebd38=new Is(_0x46d65b,_0xe8ebf5,_0x432cfd),_0x3b927d=_0x4ebd38['lock'](),_0x2e226f=new Uint32Array(_0x3b927d);let _0x1c5381;if(_0x3bf5cf)_0x1c5381=new Uint32Array(_0x1767e8['buffer'],_0x1767e8['offset'],_0x432cfd*_0x4ebd38['format']['size']/(-0x1*0xa4f+0x1c27+-0x475*0x4)),_0x2e226f['set'](_0x1c5381);else{let _0x35e1ce,_0x10b3a4;for(_0x29b45c=0x1a70+-0x2*0x4f+-0x19d2;_0x29b45c<_0x4ebd38['format']['elements']['length'];++_0x29b45c){_0x5f53b2=_0x4ebd38['format']['elements'][_0x29b45c],_0x35e1ce=_0x5f53b2['stride']/(0xbeb+0x93a+-0x1521),_0x40d69c=_0x37877d[_0x5f53b2['name']],_0x10b3a4=_0x40d69c['stride']/(-0x65*0x52+-0x19fc+0x3a5a),_0x1c5381=new Uint32Array(_0x40d69c['buffer'],_0x40d69c['offset'],(_0x40d69c['count']-(-0x1bc2+-0x1*0x264b+0x2*0x2107))*_0x10b3a4+(_0x40d69c['size']+(-0x719*0x5+-0x1a4b*0x1+0x3dcb))/(0x148a+-0x19bc+0x536));let _0x34a4f6=-0x2*0xe4a+0xa*0xc8+-0x2*-0xa62,_0x162fec=_0x5f53b2['offset']/(-0x10*-0x263+0x1b9f+-0x41cb);const _0x3fe46c=Math['floor']((_0x40d69c['size']+(0x9*0x293+0x6c2+-0xe*0x223))/(-0x467*-0x1+-0x24e6+0x2083));for(_0x1da15b=0x2*-0x1171+-0xe4a+0x312c;_0x1da15b<_0x432cfd;++_0x1da15b){for(_0x49c659=0x6c*-0x28+0x18ed+-0x80d;_0x49c659<_0x3fe46c;++_0x49c659)_0x2e226f[_0x162fec+_0x49c659]=_0x1c5381[_0x34a4f6+_0x49c659];_0x34a4f6+=_0x10b3a4,_0x162fec+=_0x35e1ce;}}}return _0x4ebd38['unlock'](),_0x4ebd38;},iN=(_0x23a0d,_0x12830e,_0x2f3516,_0x4ef98f,_0x56b651,_0x5e4fb2)=>{const _0x33bad9={},_0x53b653=[];for(const _0x4ba07b in _0x12830e)_0x12830e['hasOwnProp'+'erty'](_0x4ba07b)&&Nh['hasOwnProp'+'erty'](_0x4ba07b)&&(_0x33bad9[_0x4ba07b]=_0x12830e[_0x4ba07b],_0x53b653['push'](_0x4ba07b+':'+_0x12830e[_0x4ba07b]));_0x53b653['sort']();const _0x2c72f4=_0x53b653['join']();let _0xa2709c=_0x5e4fb2[_0x2c72f4];if(!_0xa2709c){const _0x827d0a={};for(const _0x1018b7 in _0x33bad9){const _0x3cb348=_0x4ef98f[_0x12830e[_0x1018b7]],_0x353a24=ua(_0x3cb348,_0x56b651),_0x4efbb9=_0x56b651[_0x3cb348['bufferView']],_0x43e5f9=Nh[_0x1018b7],_0x4318bc=yl(_0x3cb348['type'])*YF(_0x3cb348['componentT'+'ype']),_0x1e2a5a=_0x4efbb9&&_0x4efbb9['hasOwnProp'+'erty']('byteStride')?_0x4efbb9['byteStride']:_0x4318bc;_0x827d0a[_0x43e5f9]={'buffer':_0x353a24['buffer'],'size':_0x4318bc,'offset':_0x353a24['byteOffset'],'stride':_0x1e2a5a,'count':_0x3cb348['count'],'components':yl(_0x3cb348['type']),'type':Dd(_0x3cb348['componentT'+'ype']),'normalize':_0x3cb348['normalized']};}_0x827d0a['hasOwnProp'+'erty'](gs)||JF(_0x827d0a,_0x2f3516),_0xa2709c=sN(_0x23a0d,_0x827d0a),_0x5e4fb2[_0x2c72f4]=_0xa2709c;}return _0xa2709c;},rN=(_0x161878,_0xec2ce9,_0x51882a,_0x259a9a,_0x1b6bea,_0x3b3f77)=>{let _0x240fa3,_0x43b107,_0xcb188f;const _0x3eb094=_0xec2ce9['joints'],_0x1d03e2=_0x3eb094['length'],_0x581145=[];if(_0xec2ce9['hasOwnProp'+'erty']('inverseBin'+'dMatrices')){const _0x549b85=_0xec2ce9['inverseBin'+'dMatrices'],_0x8d223f=ua(_0x51882a[_0x549b85],_0x259a9a,!(-0x1*-0x162d+0x179b+0xb72*-0x4)),_0xf2594a=[];for(_0x240fa3=0x1*0x138f+-0x200b+-0x31f*-0x4;_0x240fa3<_0x1d03e2;_0x240fa3++){for(_0x43b107=0xc1*0x17+0x23c1+-0x4*0xd46;_0x43b107<-0x1aaa+0x4*-0x4be+0x2db2;_0x43b107++)_0xf2594a[_0x43b107]=_0x8d223f[_0x240fa3*(-0x6f3*0x1+-0xeb0+0x1f9*0xb)+_0x43b107];_0xcb188f=new te(),_0xcb188f['set'](_0xf2594a),_0x581145['push'](_0xcb188f);}}else{for(_0x240fa3=0xf86+0xbca*0x2+0x181*-0x1a;_0x240fa3<_0x1d03e2;_0x240fa3++)_0xcb188f=new te(),_0x581145['push'](_0xcb188f);}const _0x490bba=[];for(_0x240fa3=0x5f6+0x5a4+0x3*-0x3de;_0x240fa3<_0x1d03e2;_0x240fa3++)_0x490bba[_0x240fa3]=_0x1b6bea[_0x3eb094[_0x240fa3]]['name'];const _0x192024=_0x490bba['join']('#');let _0x148d05=_0x3b3f77['get'](_0x192024);return _0x148d05||(_0x148d05=new Lv(_0x161878,_0x581145,_0x490bba),_0x3b3f77['set'](_0x192024,_0x148d05)),_0x148d05;},aN=(_0x39c78f,_0x578be0,_0x8c9868,_0x40ca4b,_0x35a7fe,_0x3dabc2,_0x248b03)=>{var _0x43a636;const _0x11f850=new Ge(_0x39c78f);_0x11f850['aabb']=Hu(_0x8c9868[_0x578be0['attributes']['POSITION']]);const _0x1416ce=[];for(const [_0x51f317,_0x35d6a8]of Object['entries'](_0x578be0['attributes'])){const _0x526eb7=_0x8c9868[_0x35d6a8],_0x438ce6=Nh[_0x51f317],_0x379ace=Dd(_0x526eb7['componentT'+'ype']);_0x1416ce['push']({'semantic':_0x438ce6,'components':yl(_0x526eb7['type']),'type':_0x379ace,'normalize':_0x526eb7['normalized']??(_0x438ce6===Wt&&(_0x379ace===la||_0x379ace===Ml))});}if(_0x248b03['push'](new Promise((_0x520e58,_0x42eabf)=>{const _0x3fefc5=_0x578be0['extensions']['KHR_draco_'+'mesh_compr'+'ession'];XF(_0x40ca4b[_0x3fefc5['bufferView']]['slice']()['buffer'],(_0x290738,_0x4069d3)=>{var _0x43ba59;if(_0x290738)console['log'](_0x290738),_0x42eabf(_0x290738);else{const _0xb1ca41={};for(const [_0x2ea654,_0x4f5806]of Object['entries'](_0x3fefc5['attributes']))_0xb1ca41[Nh[_0x2ea654]]=_0x4069d3['attributes']['indexOf'](_0x4f5806);_0x1416ce['sort']((_0x25c918,_0x3abbd9)=>_0xb1ca41[_0x25c918['semantic']]-_0xb1ca41[_0x3abbd9['semantic']]),(_0x43ba59=_0x578be0['attributes'])!=null&&_0x43ba59['NORMAL']||_0x1416ce['splice'](0x52*0x29+0x190*-0xa+0x27f,-0x1912+0x26fc+-0xdea,{'semantic':'NORMAL','components':0x3,'type':Ve});const _0xa390f8=new kt(_0x39c78f,_0x1416ce),_0x1db292=_0x4069d3['vertices']['byteLength']/_0xa390f8['size'],_0x582c72=_0x1db292<=-0x1*-0x1f82f+-0x2*0xb21d+0x6c0a?Yi:wr,_0x15aba0=_0x4069d3['indices']['byteLength']/(_0x1db292<=-0x57cd+0x145b2+0x121a*0x1?-0x910+-0x389*-0x5+-0x89b*0x1:-0xc*-0x127+0x10e3+-0x1d*0x10f);w['call'](()=>{_0x1db292!==_0x8c9868[_0x578be0['attributes']['POSITION']]['count']&&w['warn']('mesh\x20has\x20i'+'nvalid\x20ver'+'tex\x20count'),_0x15aba0!==_0x8c9868[_0x578be0['indices']]['count']&&w['warn']('mesh\x20has\x20i'+'nvalid\x20ind'+'ex\x20count');});const _0x5e16a3=new Is(_0x39c78f,_0xa390f8,_0x1db292,{'data':_0x4069d3['vertices']}),_0x5c52cf=new br(_0x39c78f,_0x582c72,_0x15aba0,ms,_0x4069d3['indices']);_0x11f850['vertexBuff'+'er']=_0x5e16a3,_0x11f850['indexBuffe'+'r'][0x9f+0x2bf+-0x1af*0x2]=_0x5c52cf,_0x11f850['primitive'][-0xccd+-0x17*0x19a+0x31a3]['type']=T0(_0x578be0),_0x11f850['primitive'][0x134c+-0x252b*0x1+0x11df]['base']=0xf02+-0x13*-0x115+-0x2391,_0x11f850['primitive'][-0x100a+-0x132e+0x142*0x1c]['count']=_0x5c52cf?_0x15aba0:_0x1db292,_0x11f850['primitive'][-0xc78+0x68f+-0x59*-0x11]['indexed']=!!_0x5c52cf,_0x520e58();}});})),(_0x43a636=_0x578be0==null?void(-0x1483+-0x1*0x4b4+0x1937):_0x578be0['extensions'])!=null&&_0x43a636['KHR_materi'+'als_varian'+'ts']){const _0xd4f5e8=_0x578be0['extensions']['KHR_materi'+'als_varian'+'ts'],_0xcc456={};_0xd4f5e8['mappings']['forEach'](_0x466ad4=>{_0x466ad4['variants']['forEach'](_0x47bf34=>{_0xcc456[_0x47bf34]=_0x466ad4['material'];});}),_0x35a7fe[_0x11f850['id']]=_0xcc456;}return _0x3dabc2[_0x11f850['id']]=_0x578be0['material'],_0x11f850;},nN=(_0x13140a,_0x49d9a6,_0x37bcf7,_0x30db38,_0x3e0d59,_0x4e7725,_0x4cb5d5,_0x3b0a8f,_0x3d102c)=>{const _0xb5a4cf=[];return _0x49d9a6['primitives']['forEach'](_0x353d4c=>{var _0x4c288f;if((_0x4c288f=_0x353d4c['extensions'])!=null&&_0x4c288f['KHR_draco_'+'mesh_compr'+'ession'])_0xb5a4cf['push'](aN(_0x13140a,_0x353d4c,_0x37bcf7,_0x30db38,_0x4e7725,_0x4cb5d5,_0x3d102c));else{let _0x17d1c9=_0x353d4c['hasOwnProp'+'erty']('indices')?ua(_0x37bcf7[_0x353d4c['indices']],_0x30db38,!(-0x2*-0x11a9+0x2300+0x1*-0x4652)):null;const _0x24f8b0=iN(_0x13140a,_0x353d4c['attributes'],_0x17d1c9,_0x37bcf7,_0x30db38,_0x3e0d59),_0x1236b0=T0(_0x353d4c),_0x16e97b=new Ge(_0x13140a);if(_0x16e97b['vertexBuff'+'er']=_0x24f8b0,_0x16e97b['primitive'][0x1*-0x23d+0x14*0x151+-0x1817]['type']=_0x1236b0,_0x16e97b['primitive'][-0x871+-0x223*0x9+-0x6eb*-0x4]['base']=-0xb*0x354+0xc39+0x1863,_0x16e97b['primitive'][0x26d5*-0x1+-0x1619+0x2*0x1e77]['indexed']=_0x17d1c9!==null,_0x17d1c9!==null){let _0x44ef02;_0x17d1c9 instanceof Uint8Array?_0x44ef02=$f:_0x17d1c9 instanceof Uint16Array?_0x44ef02=Yi:_0x44ef02=wr,_0x44ef02===$f&&_0x13140a['isWebGPU']&&(_0x44ef02=Yi,_0x17d1c9=new Uint16Array(_0x17d1c9));const _0xf592c7=new br(_0x13140a,_0x44ef02,_0x17d1c9['length'],ms,_0x17d1c9);_0x16e97b['indexBuffe'+'r'][0x67*-0x21+0x757+-0x13*-0x50]=_0xf592c7,_0x16e97b['primitive'][0x2236+0x4*-0x26c+-0x1886]['count']=_0x17d1c9['length'];}else _0x16e97b['primitive'][0x1*-0x268d+-0x108*-0x1+0x235*0x11]['count']=_0x24f8b0['numVertice'+'s'];if(_0x353d4c['hasOwnProp'+'erty']('extensions')&&_0x353d4c['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts')){const _0x109b29=_0x353d4c['extensions']['KHR_materi'+'als_varian'+'ts'],_0x17cfd3={};_0x109b29['mappings']['forEach'](_0x3a2271=>{_0x3a2271['variants']['forEach'](_0x662ede=>{_0x17cfd3[_0x662ede]=_0x3a2271['material'];});}),_0x4e7725[_0x16e97b['id']]=_0x17cfd3;}_0x4cb5d5[_0x16e97b['id']]=_0x353d4c['material'];let _0x4b0875=_0x37bcf7[_0x353d4c['attributes']['POSITION']];if(_0x16e97b['aabb']=Hu(_0x4b0875),_0x353d4c['hasOwnProp'+'erty']('targets')){const _0x588383=[];_0x353d4c['targets']['forEach']((_0x1c239f,_0x2a27f4)=>{const _0x1dce71={};_0x1c239f['hasOwnProp'+'erty']('POSITION')&&(_0x4b0875=_0x37bcf7[_0x1c239f['POSITION']],_0x1dce71['deltaPosit'+'ions']=Pn(_0x4b0875,_0x30db38),_0x1dce71['aabb']=Hu(_0x4b0875)),_0x1c239f['hasOwnProp'+'erty']('NORMAL')&&(_0x4b0875=_0x37bcf7[_0x1c239f['NORMAL']],_0x1dce71['deltaNorma'+'ls']=Pn(_0x4b0875,_0x30db38)),_0x49d9a6['hasOwnProp'+'erty']('extras')&&_0x49d9a6['extras']['hasOwnProp'+'erty']('targetName'+'s')?_0x1dce71['name']=_0x49d9a6['extras']['targetName'+'s'][_0x2a27f4]:_0x1dce71['name']=_0x2a27f4['toString'](-0x1a5*0x1+-0x4e3*0x3+0x416*0x4),_0x49d9a6['hasOwnProp'+'erty']('weights')&&(_0x1dce71['defaultWei'+'ght']=_0x49d9a6['weights'][_0x2a27f4]),_0x1dce71['preserveDa'+'ta']=_0x3b0a8f['morphPrese'+'rveData'],_0x588383['push'](new Md(_0x1dce71));}),_0x16e97b['morph']=new mm(_0x588383,_0x13140a,{'preferHighPrecision':_0x3b0a8f['morphPrefe'+'rHighPreci'+'sion']});}_0xb5a4cf['push'](_0x16e97b);}}),_0xb5a4cf;},Dt=(_0x4764c3,_0x135c7b,_0x1487e9)=>{var _0x4d6290;let _0x59f5e7;const _0x32c802=_0x4764c3['texCoord'];if(_0x32c802){for(_0x59f5e7=-0x250c+0x1115+-0x1*-0x13f7;_0x59f5e7<_0x1487e9['length'];++_0x59f5e7)_0x135c7b[_0x1487e9[_0x59f5e7]+'MapUv']=_0x32c802;}const _0x11e773=[0x94c+0x1536+-0x1e82,0x1bed+-0x7cf*-0x2+-0x1*0x2b8b],_0x67eed2=[0x48b+0x1c04+-0x208e,-0x2101*0x1+0x22ad+-0x7*0x3d],_0x3a0ba9=(_0x4d6290=_0x4764c3['extensions'])==null?void(-0x979*-0x2+0x19e4*-0x1+0x6f2):_0x4d6290['KHR_textur'+'e_transfor'+'m'];if(_0x3a0ba9){const _0x233c8b=_0x3a0ba9['offset']||_0x11e773,_0x3004d6=_0x3a0ba9['scale']||_0x67eed2,_0x2f3eb4=_0x3a0ba9['rotation']?-_0x3a0ba9['rotation']*Y['RAD_TO_DEG']:-0x114d*-0x1+-0x26ea+0x159d,_0x315347=new J(_0x3004d6[-0x1*0x100f+0x1048+0x3*-0x13],_0x3004d6[0x8*0x259+0xd4b+-0x2012*0x1]),_0x53ad75=new J(_0x233c8b[0x54f+-0xe9*-0xd+-0x1124],0x184+-0x25b6+0x2433-_0x3004d6[0x1205*-0x1+0x1a5*0x8+0x4de]-_0x233c8b[-0x1e6+-0x73*-0x3b+-0x189a]);for(_0x59f5e7=0x235f+-0x226a+0x5*-0x31;_0x59f5e7<_0x1487e9['length'];++_0x59f5e7)_0x135c7b[_0x1487e9[_0x59f5e7]+'MapTiling']=_0x315347,_0x135c7b[_0x1487e9[_0x59f5e7]+'MapOffset']=_0x53ad75,_0x135c7b[_0x1487e9[_0x59f5e7]+('MapRotatio'+'n')]=_0x2f3eb4;}},oN=(_0x564de5,_0x8231f1,_0x408749)=>{let _0x59ec73,_0x4e2dd9;if(_0x564de5['hasOwnProp'+'erty']('diffuseFac'+'tor')?(_0x59ec73=_0x564de5['diffuseFac'+'tor'],_0x8231f1['diffuse']['set'](Math['pow'](_0x59ec73[-0x2455+0x195c+0xaf9*0x1],(0x1bb3+-0x214*-0x2+-0x12e*0x1b)/(0x13d0+0x2482*-0x1+0x1*0x10b4+0.20000000000000018)),Math['pow'](_0x59ec73[0x1*-0x25a7+0x21b9+0x13*0x35],(0xc07*-0x2+0x2683+-0xe74)/(0x1b26+0x4e9+-0x200d+0.20000000000000018)),Math['pow'](_0x59ec73[0x7eb*0x1+0x152a+-0x1d13],(-0x11e9+-0x266*0xf+0x35e4)/(-0xcf2+0x1fa3+-0x12af+0.20000000000000018))),_0x8231f1['opacity']=_0x59ec73[-0x32*-0x5e+0x157*-0x3+-0xe54]):(_0x8231f1['diffuse']['set'](-0xe3*-0x1+-0x24a1+0x23bf,0x1219+-0x105a+-0x1be,0x1632+0x1a7d+-0x30ae),_0x8231f1['opacity']=-0x8e0+-0x7f5+-0x10d6*-0x1),_0x564de5['hasOwnProp'+'erty']('diffuseTex'+'ture')){const _0x56e302=_0x564de5['diffuseTex'+'ture'];_0x4e2dd9=_0x408749[_0x56e302['index']],_0x8231f1['diffuseMap']=_0x4e2dd9,_0x8231f1['diffuseMap'+'Channel']='rgb',_0x8231f1['opacityMap']=_0x4e2dd9,_0x8231f1['opacityMap'+'Channel']='a',Dt(_0x56e302,_0x8231f1,['diffuse','opacity']);}if(_0x8231f1['useMetalne'+'ss']=!(0x304+0x51*0x36+0x5*-0x405),_0x564de5['hasOwnProp'+'erty']('specularFa'+'ctor')?(_0x59ec73=_0x564de5['specularFa'+'ctor'],_0x8231f1['specular']['set'](Math['pow'](_0x59ec73[0x254b*-0x1+0x1eb7+0x4*0x1a5],(0xa50+-0x213*0x7+-0xe*-0x4d)/(0x185e+0xc*-0x1dd+-0x2*0x100+0.20000000000000018)),Math['pow'](_0x59ec73[0xa7c+-0x38e+-0x9*0xc5],(-0x407*0x4+0x10a*0xc+0x3a5)/(-0x4*-0x352+-0x1140+0x1*0x3fa+0.20000000000000018)),Math['pow'](_0x59ec73[0x1d23+-0x15cc+-0x755*0x1],(0x1737*0x1+0x11f1+-0x2927)/(0x60*-0x35+0x1*0x2203+-0xe21+0.20000000000000018)))):_0x8231f1['specular']['set'](-0x24cb+-0x1*0x119+0x25e5,-0x8dd*0x1+-0x1*0xae5+0x13c3,0x260f+0x1900+0x3f0e*-0x1),_0x564de5['hasOwnProp'+'erty']('glossiness'+'Factor')?_0x8231f1['gloss']=_0x564de5['glossiness'+'Factor']:_0x8231f1['gloss']=-0x3*0x7ff+0xd*-0xac+0x20ba,_0x564de5['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x5b21fc=_0x564de5['specularGl'+'ossinessTe'+'xture'];_0x8231f1['specularMa'+'p']=_0x8231f1['glossMap']=_0x408749[_0x5b21fc['index']],_0x8231f1['specularMa'+'pChannel']='rgb',_0x8231f1['glossMapCh'+'annel']='a',Dt(_0x5b21fc,_0x8231f1,['gloss','metalness']);}},lN=(_0xed34e7,_0x343f74,_0x13f9be)=>{if(_0xed34e7['hasOwnProp'+'erty']('clearcoatF'+'actor')?_0x343f74['clearCoat']=_0xed34e7['clearcoatF'+'actor']*(0x20ce+-0x62*0x3a+-0xa9a+0.25):_0x343f74['clearCoat']=-0x95*-0x3a+-0x1a*0x10a+-0x6be,_0xed34e7['hasOwnProp'+'erty']('clearcoatT'+'exture')){const _0x4c505a=_0xed34e7['clearcoatT'+'exture'];_0x343f74['clearCoatM'+'ap']=_0x13f9be[_0x4c505a['index']],_0x343f74['clearCoatM'+'apChannel']='r',Dt(_0x4c505a,_0x343f74,['clearCoat']);}if(_0xed34e7['hasOwnProp'+'erty']('clearcoatR'+'oughnessFa'+'ctor')?_0x343f74['clearCoatG'+'loss']=_0xed34e7['clearcoatR'+'oughnessFa'+'ctor']:_0x343f74['clearCoatG'+'loss']=0x1302+0x27*-0x43+-0x8cd,_0xed34e7['hasOwnProp'+'erty']('clearcoatR'+'oughnessTe'+'xture')){const _0x593c01=_0xed34e7['clearcoatR'+'oughnessTe'+'xture'];_0x343f74['clearCoatG'+'lossMap']=_0x13f9be[_0x593c01['index']],_0x343f74['clearCoatG'+'lossMapCha'+'nnel']='g',Dt(_0x593c01,_0x343f74,['clearCoatG'+'loss']);}if(_0xed34e7['hasOwnProp'+'erty']('clearcoatN'+'ormalTextu'+'re')){const _0x173107=_0xed34e7['clearcoatN'+'ormalTextu'+'re'];_0x343f74['clearCoatN'+'ormalMap']=_0x13f9be[_0x173107['index']],Dt(_0x173107,_0x343f74,['clearCoatN'+'ormal']),_0x173107['hasOwnProp'+'erty']('scale')?_0x343f74['clearCoatB'+'umpiness']=_0x173107['scale']:_0x343f74['clearCoatB'+'umpiness']=0x1f3*-0xb+0xac1+0xab1;}_0x343f74['clearCoatG'+'lossInvert']=!(-0x2*0x10ff+-0x2*-0xf67+0x330);},cN=(_0x4abeb1,_0x185968,_0x101e0)=>{_0x185968['useLightin'+'g']=!(0xc7+-0xc2*-0x25+-0x1cd0),_0x185968['emissive']['copy'](_0x185968['diffuse']),_0x185968['emissiveMa'+'p']=_0x185968['diffuseMap'],_0x185968['emissiveMa'+'pUv']=_0x185968['diffuseMap'+'Uv'],_0x185968['emissiveMa'+'pTiling']['copy'](_0x185968['diffuseMap'+'Tiling']),_0x185968['emissiveMa'+'pOffset']['copy'](_0x185968['diffuseMap'+'Offset']),_0x185968['emissiveMa'+'pRotation']=_0x185968['diffuseMap'+'Rotation'],_0x185968['emissiveMa'+'pChannel']=_0x185968['diffuseMap'+'Channel'],_0x185968['emissiveVe'+'rtexColor']=_0x185968['diffuseVer'+'texColor'],_0x185968['emissiveVe'+'rtexColorC'+'hannel']=_0x185968['diffuseVer'+'texColorCh'+'annel'],_0x185968['useLightin'+'g']=!(-0x30*0x63+0x3dc+0x4e7*0x3),_0x185968['useSkybox']=!(0x5b*-0x1f+0x247c+0x2*-0xcbb),_0x185968['diffuse']['set'](0x21f9+-0x122d+-0xfcb,0x24f5+0x625+-0x11*0x289,0x287*-0x5+0x494*0x1+0x810),_0x185968['diffuseMap']=null,_0x185968['diffuseVer'+'texColor']=!(-0x2*0xc51+0x1f71+-0x2*0x367);},hN=(_0x508566,_0x26196e,_0x5aa203)=>{if(_0x26196e['useMetalne'+'ssSpecular'+'Color']=!(0x1*0x1b37+0x1b90+0x1*-0x36c7),_0x508566['hasOwnProp'+'erty']('specularCo'+'lorTexture')&&(_0x26196e['specularMa'+'p']=_0x5aa203[_0x508566['specularCo'+'lorTexture']['index']],_0x26196e['specularMa'+'pChannel']='rgb',Dt(_0x508566['specularCo'+'lorTexture'],_0x26196e,['specular'])),_0x508566['hasOwnProp'+'erty']('specularCo'+'lorFactor')){const _0x1cd99c=_0x508566['specularCo'+'lorFactor'];_0x26196e['specular']['set'](Math['pow'](_0x1cd99c[-0xe9*0x29+-0x18f5+0x3e46],(-0x1ec+-0xe9e*-0x1+0x169*-0x9)/(0x1a38+-0x23b*-0x1+-0x1c71+0.20000000000000018)),Math['pow'](_0x1cd99c[0x6a*-0x17+-0x2701+0x1844*0x2],(-0x1375+-0x2*0x613+0x77*0x44)/(0x52f+0x26bd+-0x2bea+0.20000000000000018)),Math['pow'](_0x1cd99c[-0x2*0x92e+0x1*-0x1b69+0x1*0x2dc7],(0x1127+-0x1fe+-0x308*0x5)/(0x62*-0x56+0x1*-0x772+0x4c*0x88+0.20000000000000018)));}else _0x26196e['specular']['set'](-0x1fab+-0x26e9+-0x3*-0x1787,-0x312+-0x862+0xb75,0x190+0x10*-0x1b4+-0x1*-0x19b1);_0x508566['hasOwnProp'+'erty']('specularFa'+'ctor')?_0x26196e['specularit'+'yFactor']=_0x508566['specularFa'+'ctor']:_0x26196e['specularit'+'yFactor']=-0x1248+-0x1*0x185e+-0x2aa7*-0x1,_0x508566['hasOwnProp'+'erty']('specularTe'+'xture')&&(_0x26196e['specularit'+'yFactorMap'+'Channel']='a',_0x26196e['specularit'+'yFactorMap']=_0x5aa203[_0x508566['specularTe'+'xture']['index']],Dt(_0x508566['specularTe'+'xture'],_0x26196e,['specularit'+'yFactor']));},dN=(_0x46943e,_0x12ea2d,_0x3c7af0)=>{_0x46943e['hasOwnProp'+'erty']('ior')&&(_0x12ea2d['refraction'+'Index']=(-0x9dc+-0x199*0x13+-0x1a*-0x18c)/_0x46943e['ior']);},fN=(_0x41ec46,_0x215f75,_0x3bc8bd)=>{_0x41ec46['hasOwnProp'+'erty']('dispersion')&&(_0x215f75['dispersion']=_0x41ec46['dispersion']);},uN=(_0x10eaa0,_0x531c3b,_0x24d68d)=>{_0x531c3b['blendType']=Zs,_0x531c3b['useDynamic'+'Refraction']=!(0x14bb+0x12ce+-0x1*0x2789),_0x10eaa0['hasOwnProp'+'erty']('transmissi'+'onFactor')&&(_0x531c3b['refraction']=_0x10eaa0['transmissi'+'onFactor']),_0x10eaa0['hasOwnProp'+'erty']('transmissi'+'onTexture')&&(_0x531c3b['refraction'+'MapChannel']='r',_0x531c3b['refraction'+'Map']=_0x24d68d[_0x10eaa0['transmissi'+'onTexture']['index']],Dt(_0x10eaa0['transmissi'+'onTexture'],_0x531c3b,['refraction']));},pN=(_0x5a1cb9,_0x1615d2,_0x60454c)=>{if(_0x1615d2['useSheen']=!(-0x1533+0x248f*0x1+-0xf5c*0x1),_0x5a1cb9['hasOwnProp'+'erty']('sheenColor'+'Factor')){const _0x3cd31d=_0x5a1cb9['sheenColor'+'Factor'];_0x1615d2['sheen']['set'](Math['pow'](_0x3cd31d[0x4*-0x1ed+0x4b7*0x1+0x2fd],(0x1*-0x1777+-0x1*-0xbc3+-0x9*-0x14d)/(0xfd9+-0x1e04+0xe2d+0.20000000000000018)),Math['pow'](_0x3cd31d[-0x1*0x16ef+-0x1*-0xb5c+0xb94],(0x20b6+-0x7a2*-0x5+0x46df*-0x1)/(0x254d+-0x6*-0x1de+-0x307f+0.20000000000000018)),Math['pow'](_0x3cd31d[0x4*-0x33d+0x2604+-0x190e],(0x84c+0x1*0x17ab+0xffb*-0x2)/(-0xb0a*-0x3+-0x1*-0x5d5+-0x26f1+0.20000000000000018)));}else _0x1615d2['sheen']['set'](0xe33*-0x1+0x8bc+0x578,-0x577+-0x4*0x2e+0x630,0x16fc+-0xd66+-0x995);_0x5a1cb9['hasOwnProp'+'erty']('sheenColor'+'Texture')&&(_0x1615d2['sheenMap']=_0x60454c[_0x5a1cb9['sheenColor'+'Texture']['index']],Dt(_0x5a1cb9['sheenColor'+'Texture'],_0x1615d2,['sheen'])),_0x1615d2['sheenGloss']=_0x5a1cb9['hasOwnProp'+'erty']('sheenRough'+'nessFactor')?_0x5a1cb9['sheenRough'+'nessFactor']:0xa3a+-0xc11+0x1d7,_0x5a1cb9['hasOwnProp'+'erty']('sheenRough'+'nessTextur'+'e')&&(_0x1615d2['sheenGloss'+'Map']=_0x60454c[_0x5a1cb9['sheenRough'+'nessTextur'+'e']['index']],_0x1615d2['sheenGloss'+'MapChannel']='a',Dt(_0x5a1cb9['sheenRough'+'nessTextur'+'e'],_0x1615d2,['sheenGloss'])),_0x1615d2['sheenGloss'+'Invert']=!(-0x2702+0x19c1*0x1+0xd41);},mN=(_0x235ecf,_0x53c036,_0x234622)=>{if(_0x53c036['blendType']=Zs,_0x53c036['useDynamic'+'Refraction']=!(-0x1197*0x1+-0x618+-0x2b*-0x8d),_0x235ecf['hasOwnProp'+'erty']('thicknessF'+'actor')&&(_0x53c036['thickness']=_0x235ecf['thicknessF'+'actor']),_0x235ecf['hasOwnProp'+'erty']('thicknessT'+'exture')&&(_0x53c036['thicknessM'+'ap']=_0x234622[_0x235ecf['thicknessT'+'exture']['index']],_0x53c036['thicknessM'+'apChannel']='g',Dt(_0x235ecf['thicknessT'+'exture'],_0x53c036,['thickness'])),_0x235ecf['hasOwnProp'+'erty']('attenuatio'+'nDistance')&&(_0x53c036['attenuatio'+'nDistance']=_0x235ecf['attenuatio'+'nDistance']),_0x235ecf['hasOwnProp'+'erty']('attenuatio'+'nColor')){const _0x1d5d52=_0x235ecf['attenuatio'+'nColor'];_0x53c036['attenuatio'+'n']['set'](Math['pow'](_0x1d5d52[-0x2205+-0x1c*-0xb3+0xe71],(-0x22ab+-0x1656*-0x1+0x2*0x62b)/(0xadc+-0x73*-0x4b+-0x2c8b+0.20000000000000018)),Math['pow'](_0x1d5d52[-0xe7d*0x2+-0x4*0xb+0x1b7*0x11],(-0x1*0xffb+0x1*-0x2a5+0x12a1)/(-0x8a+-0x2*-0x428+-0x7c4+0.20000000000000018)),Math['pow'](_0x1d5d52[0x3*0xa34+-0x4*-0x89e+-0x4112*0x1],(0x1488+0x88f+-0x1d16)/(-0x102e+0x19bb+0x98b*-0x1+0.20000000000000018)));}},_N=(_0x3e0315,_0x1d87b8,_0x56647e)=>{_0x3e0315['hasOwnProp'+'erty']('emissiveSt'+'rength')&&(_0x1d87b8['emissiveIn'+'tensity']=_0x3e0315['emissiveSt'+'rength']);},gN=(_0x215f91,_0x46d914,_0x5d6e94)=>{_0x46d914['useIridesc'+'ence']=!(-0x735+0xa*-0x3b5+0x8db*0x5),_0x215f91['hasOwnProp'+'erty']('iridescenc'+'eFactor')&&(_0x46d914['iridescenc'+'e']=_0x215f91['iridescenc'+'eFactor']),_0x215f91['hasOwnProp'+'erty']('iridescenc'+'eTexture')&&(_0x46d914['iridescenc'+'eMapChanne'+'l']='r',_0x46d914['iridescenc'+'eMap']=_0x5d6e94[_0x215f91['iridescenc'+'eTexture']['index']],Dt(_0x215f91['iridescenc'+'eTexture'],_0x46d914,['iridescenc'+'e'])),_0x215f91['hasOwnProp'+'erty']('iridescenc'+'eIor')&&(_0x46d914['iridescenc'+'eRefractio'+'nIndex']=_0x215f91['iridescenc'+'eIor']),_0x215f91['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Minimum')&&(_0x46d914['iridescenc'+'eThickness'+'Min']=_0x215f91['iridescenc'+'eThickness'+'Minimum']),_0x215f91['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Maximum')&&(_0x46d914['iridescenc'+'eThickness'+'Max']=_0x215f91['iridescenc'+'eThickness'+'Maximum']),_0x215f91['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Texture')&&(_0x46d914['iridescenc'+'eThickness'+'MapChannel']='g',_0x46d914['iridescenc'+'eThickness'+'Map']=_0x5d6e94[_0x215f91['iridescenc'+'eThickness'+'Texture']['index']],Dt(_0x215f91['iridescenc'+'eThickness'+'Texture'],_0x46d914,['iridescenc'+'eThickness']));},SN=(_0x25674a,_0x4b436c,_0x21c189)=>{if(_0x4b436c['enableGGXS'+'pecular']=!(-0x18c3+0xf53+0x970),_0x25674a['hasOwnProp'+'erty']('anisotropy'+'Strength')?_0x4b436c['anisotropy'+'Intensity']=_0x25674a['anisotropy'+'Strength']:_0x4b436c['anisotropy'+'Intensity']=0x258d+0x5*-0x4bb+0xde6*-0x1,_0x25674a['hasOwnProp'+'erty']('anisotropy'+'Texture')){const _0x13034e=_0x25674a['anisotropy'+'Texture'];_0x4b436c['anisotropy'+'Map']=_0x21c189[_0x13034e['index']],Dt(_0x13034e,_0x4b436c,['anisotropy']);}_0x25674a['hasOwnProp'+'erty']('anisotropy'+'Rotation')?_0x4b436c['anisotropy'+'Rotation']=_0x25674a['anisotropy'+'Rotation']*Y['RAD_TO_DEG']:_0x4b436c['anisotropy'+'Rotation']=0x1*0x1e0e+0x1b62+0x1*-0x3970;},w0=(_0x51fe94,_0x260730)=>{const _0x42e26a=new Ut();_0x51fe94['hasOwnProp'+'erty']('name')&&(_0x42e26a['name']=_0x51fe94['name']),_0x42e26a['occludeSpe'+'cular']=bd,_0x42e26a['diffuseVer'+'texColor']=!(-0x3b*-0x91+-0x1*-0x39e+-0x2509),_0x42e26a['specularTi'+'nt']=!(-0xf4c*-0x1+-0x2ad*0xb+0x1*0xe23),_0x42e26a['specularVe'+'rtexColor']=!(0xbcb+0x2*-0xe9d+0x116f),_0x42e26a['specular']['set'](-0x7ed*0x1+0x1b21+-0x3d7*0x5,0x678+0x8eb+-0x2*0x7b1,-0x2065+0x1745+0x921),_0x42e26a['gloss']=-0x7b2+-0x1*-0x1f61+-0x17ae,_0x42e26a['glossInver'+'t']=!(0x3*-0x5d1+0x2a7*-0x2+0x1*0x16c1),_0x42e26a['useMetalne'+'ss']=!(-0xd9e*-0x2+-0x15f+-0x19dd);let _0x18518e,_0x3a1580;if(_0x51fe94['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x5dd584=_0x51fe94['pbrMetalli'+'cRoughness'];if(_0x5dd584['hasOwnProp'+'erty']('baseColorF'+'actor')&&(_0x18518e=_0x5dd584['baseColorF'+'actor'],_0x42e26a['diffuse']['set'](Math['pow'](_0x18518e[0xe7*0x7+0x1187+-0x17d8],(-0x9*-0xdf+-0x1f14+0x173e)/(-0x16c1+0x1a*0xc2+-0x9*-0x57+0.20000000000000018)),Math['pow'](_0x18518e[-0x14a7+0x21b2+0x685*-0x2],(-0x69d*-0x5+0x104*0x9+-0x2a34)/(0x7*0x191+-0x1*0x1cb2+0x11bd+0.20000000000000018)),Math['pow'](_0x18518e[0x26b5+-0x1f61+0x752*-0x1],(0x2*0x15b+-0x2127+0x1e72)/(-0x176+-0x2109+0x2281+0.20000000000000018))),_0x42e26a['opacity']=_0x18518e[-0x2d5+-0x1457+-0x5*-0x4a3]),_0x5dd584['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x460572=_0x5dd584['baseColorT'+'exture'];_0x3a1580=_0x260730[_0x460572['index']],_0x42e26a['diffuseMap']=_0x3a1580,_0x42e26a['diffuseMap'+'Channel']='rgb',_0x42e26a['opacityMap']=_0x3a1580,_0x42e26a['opacityMap'+'Channel']='a',Dt(_0x460572,_0x42e26a,['diffuse','opacity']);}if(_0x5dd584['hasOwnProp'+'erty']('metallicFa'+'ctor')&&(_0x42e26a['metalness']=_0x5dd584['metallicFa'+'ctor']),_0x5dd584['hasOwnProp'+'erty']('roughnessF'+'actor')&&(_0x42e26a['gloss']=_0x5dd584['roughnessF'+'actor']),_0x5dd584['hasOwnProp'+'erty']('metallicRo'+'ughnessTex'+'ture')){const _0x2c6548=_0x5dd584['metallicRo'+'ughnessTex'+'ture'];_0x42e26a['metalnessM'+'ap']=_0x42e26a['glossMap']=_0x260730[_0x2c6548['index']],_0x42e26a['metalnessM'+'apChannel']='b',_0x42e26a['glossMapCh'+'annel']='g',Dt(_0x2c6548,_0x42e26a,['gloss','metalness']);}}if(_0x51fe94['hasOwnProp'+'erty']('normalText'+'ure')){const _0x3b0da3=_0x51fe94['normalText'+'ure'];_0x42e26a['normalMap']=_0x260730[_0x3b0da3['index']],Dt(_0x3b0da3,_0x42e26a,['normal']),_0x3b0da3['hasOwnProp'+'erty']('scale')&&(_0x42e26a['bumpiness']=_0x3b0da3['scale']);}if(_0x51fe94['hasOwnProp'+'erty']('occlusionT'+'exture')){const _0x301f99=_0x51fe94['occlusionT'+'exture'];_0x42e26a['aoMap']=_0x260730[_0x301f99['index']],_0x42e26a['aoMapChann'+'el']='r',Dt(_0x301f99,_0x42e26a,['ao']);}if(_0x51fe94['hasOwnProp'+'erty']('emissiveFa'+'ctor')&&(_0x18518e=_0x51fe94['emissiveFa'+'ctor'],_0x42e26a['emissive']['set'](Math['pow'](_0x18518e[-0x20b9+-0x7*0x221+0x2fa0],(-0x1d*-0xa5+0x76*-0x27+0x1*-0xb6)/(0x2101+0xaf7+-0x2bf6+0.20000000000000018)),Math['pow'](_0x18518e[0x1e39+0x7c1+-0x25f9],(-0xe38+0x5a8+-0x2b*-0x33)/(0x1d86+-0x1f4f+-0x99*-0x3+0.20000000000000018)),Math['pow'](_0x18518e[-0x4*-0x76+-0x20f7+0x1*0x1f21],(-0x3*-0xaad+0x202a+-0x34*0x13c)/(-0xc*0x19e+-0x18e+0x14f8+0.20000000000000018)))),_0x51fe94['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x287bb2=_0x51fe94['emissiveTe'+'xture'];_0x42e26a['emissiveMa'+'p']=_0x260730[_0x287bb2['index']],Dt(_0x287bb2,_0x42e26a,['emissive']);}if(_0x51fe94['hasOwnProp'+'erty']('alphaMode'))switch(_0x51fe94['alphaMode']){case'MASK':_0x42e26a['blendType']=Cs,_0x51fe94['hasOwnProp'+'erty']('alphaCutof'+'f')?_0x42e26a['alphaTest']=_0x51fe94['alphaCutof'+'f']:_0x42e26a['alphaTest']=0x783+-0x2651+0x2*0xf67+0.5;break;case'BLEND':_0x42e26a['blendType']=Zs,_0x42e26a['depthWrite']=!(0x9*0xd9+0x8e0+-0x60*0x2c);break;default:case'OPAQUE':_0x42e26a['blendType']=Cs;break;}else _0x42e26a['blendType']=Cs;_0x51fe94['hasOwnProp'+'erty']('doubleSide'+'d')?(_0x42e26a['twoSidedLi'+'ghting']=_0x51fe94['doubleSide'+'d'],_0x42e26a['cull']=_0x51fe94['doubleSide'+'d']?bt:pa):(_0x42e26a['twoSidedLi'+'ghting']=!(0x7a*0x3b+0x24ae+0x61*-0xab),_0x42e26a['cull']=pa);const _0x5536bd={'KHR_materials_clearcoat':lN,'KHR_materials_emissive_strength':_N,'KHR_materials_ior':dN,'KHR_materials_dispersion':fN,'KHR_materials_iridescence':gN,'KHR_materials_pbrSpecularGlossiness':oN,'KHR_materials_sheen':pN,'KHR_materials_specular':hN,'KHR_materials_transmission':uN,'KHR_materials_unlit':cN,'KHR_materials_volume':mN,'KHR_materials_anisotropy':SN};if(_0x51fe94['hasOwnProp'+'erty']('extensions'))for(const _0x8cf4c5 in _0x51fe94['extensions']){const _0x128dfa=_0x5536bd[_0x8cf4c5];_0x128dfa!==void(-0x23f8+0x20af*0x1+-0x1*-0x349)&&_0x128dfa(_0x51fe94['extensions'][_0x8cf4c5],_0x42e26a,_0x260730);}return _0x42e26a['update'](),_0x42e26a;},yN=(_0x1d6eea,_0x2b9673,_0x38158f,_0x3c26a0,_0x21b207,_0x2852fd,_0x1ade28)=>{const _0x141dce=_0x248e1d=>new Fh(yl(_0x248e1d['type']),Pn(_0x248e1d,_0x3c26a0)),_0x20c6c8={'STEP':Bv,'LINEAR':Su,'CUBICSPLINE':yu},_0x2e8dd2={},_0x3edb99={},_0x51db5a={};let _0x52b3a3=-0xd97+0x94b+0x44d,_0x6016c;for(_0x6016c=0x1*-0x204d+-0x1fcb+0x4018;_0x6016c<_0x1d6eea['samplers']['length'];++_0x6016c){const _0x25b11e=_0x1d6eea['samplers'][_0x6016c];_0x2e8dd2['hasOwnProp'+'erty'](_0x25b11e['input'])||(_0x2e8dd2[_0x25b11e['input']]=_0x141dce(_0x38158f[_0x25b11e['input']])),_0x3edb99['hasOwnProp'+'erty'](_0x25b11e['output'])||(_0x3edb99[_0x25b11e['output']]=_0x141dce(_0x38158f[_0x25b11e['output']]));const _0x3b8f8e=_0x25b11e['hasOwnProp'+'erty']('interpolat'+'ion')&&_0x20c6c8['hasOwnProp'+'erty'](_0x25b11e['interpolat'+'ion'])?_0x20c6c8[_0x25b11e['interpolat'+'ion']]:Su,_0x557f87={'paths':[],'input':_0x25b11e['input'],'output':_0x25b11e['output'],'interpolation':_0x3b8f8e};_0x51db5a[_0x6016c]=_0x557f87;}const _0xc5e30c=[],_0x2d5b6a={'translation':'localPosit'+'ion','rotation':'localRotat'+'ion','scale':'localScale'},_0x1a6068=_0x4e847b=>{const _0x163c51=[];for(;_0x4e847b;)_0x163c51['unshift'](_0x4e847b['name']),_0x4e847b=_0x4e847b['parent'];return _0x163c51;},_0x49315c=(_0x26bec3,_0x27d727,_0x3e1931)=>{const _0x268f74=_0x3edb99[_0x26bec3['output']];if(!_0x268f74){w['warn']('glb-parser'+':\x20No\x20outpu'+'t\x20data\x20is\x20'+'available\x20'+'for\x20the\x20mo'+'rph\x20target'+'\x20curve\x20('+_0x3e1931+('/graph/wei'+'ghts).\x20Ski'+'pping.'));return;}let _0x269328;if(_0x2852fd&&_0x2852fd[_0x27d727['mesh']]){const _0x5693c4=_0x2852fd[_0x27d727['mesh']];_0x5693c4['hasOwnProp'+'erty']('extras')&&_0x5693c4['extras']['hasOwnProp'+'erty']('targetName'+'s')&&(_0x269328=_0x5693c4['extras']['targetName'+'s']);}const _0x52b5c8=_0x268f74['data'],_0x10c187=_0x52b5c8['length']/_0x2e8dd2[_0x26bec3['input']]['data']['length'],_0x28d0d3=_0x52b5c8['length']/_0x10c187,_0x4c05df=_0x28d0d3*(0x9d0*0x1+-0x7bb+-0x211),_0x58c6f9=new ArrayBuffer(_0x4c05df*_0x10c187);for(let _0x3e2263=-0x2*0x9af+-0xef7+-0xb*-0x31f;_0x3e2263<_0x10c187;_0x3e2263++){const _0x4f330d=new Float32Array(_0x58c6f9,_0x4c05df*_0x3e2263,_0x28d0d3);for(let _0x4b633e=-0x1f1a+-0x50b+0x2425;_0x4b633e<_0x28d0d3;_0x4b633e++)_0x4f330d[_0x4b633e]=_0x52b5c8[_0x4b633e*_0x10c187+_0x3e2263];const _0x179b23=new Fh(0x1099*-0x1+0x20f9+0x3*-0x575,_0x4f330d),_0x4d384d=_0x269328!=null&&_0x269328[_0x3e2263]?'name.'+_0x269328[_0x3e2263]:_0x3e2263;_0x3edb99[-_0x52b3a3]=_0x179b23;const _0x5cad12={'paths':[{'entityPath':_0x3e1931,'component':'graph','propertyPath':['weight.'+_0x4d384d]}],'input':_0x26bec3['input'],'output':-_0x52b3a3,'interpolation':_0x26bec3['interpolat'+'ion']};_0x52b3a3++,_0x51db5a['morphCurve'+'-'+_0x6016c+'-'+_0x3e2263]=_0x5cad12;}};for(_0x6016c=-0x3*-0xb45+-0x133e+-0x153*0xb;_0x6016c<_0x1d6eea['channels']['length'];++_0x6016c){const _0x1f4b9a=_0x1d6eea['channels'][_0x6016c],_0x126a65=_0x1f4b9a['target'],_0x558d0f=_0x51db5a[_0x1f4b9a['sampler']],_0x2fc41b=_0x21b207[_0x126a65['node']],_0x4f19a9=_0x1ade28[_0x126a65['node']],_0x1e6398=_0x1a6068(_0x2fc41b);_0x126a65['path']['startsWith']('weights')?(_0x49315c(_0x558d0f,_0x4f19a9,_0x1e6398),_0x51db5a[_0x1f4b9a['sampler']]['morphCurve']=!(-0x49b+0x72d+-0x292)):_0x558d0f['paths']['push']({'entityPath':_0x1e6398,'component':'graph','propertyPath':[_0x2d5b6a[_0x126a65['path']]]});}const _0xd0471f=[],_0x528816=[],_0x577880=[];for(const _0x2163ea in _0x2e8dd2)_0xd0471f['push'](_0x2e8dd2[_0x2163ea]),_0x2e8dd2[_0x2163ea]=_0xd0471f['length']-(0xbc5+-0x2129+0x1565);for(const _0x54eaf7 in _0x3edb99)_0x528816['push'](_0x3edb99[_0x54eaf7]),_0x3edb99[_0x54eaf7]=_0x528816['length']-(0x1ba+0x19*-0x84+0x3*0x3b9);for(const _0x386676 in _0x51db5a){const _0xf6873c=_0x51db5a[_0x386676];_0xf6873c['morphCurve']||(_0x577880['push'](new v0(_0xf6873c['paths'],_0x2e8dd2[_0xf6873c['input']],_0x3edb99[_0xf6873c['output']],_0xf6873c['interpolat'+'ion'])),_0xf6873c['paths']['length']>-0x1a6d+0x157d*0x1+-0x13c*-0x4&&_0xf6873c['paths'][-0x8be+0x11ff+0x941*-0x1]['propertyPa'+'th'][0xf3e*0x1+-0x365+-0xbd9]==='localRotat'+'ion'&&_0xf6873c['interpolat'+'ion']!==yu&&_0xc5e30c['push'](_0x577880[_0x577880['length']-(0x1fcc+-0x19c3+-0x608)]['output']));}_0xc5e30c['sort']();let _0x54f828=null,_0x3f3949;for(_0x6016c=-0x1d44+0x24ed+-0x7a9*0x1;_0x6016c<_0xc5e30c['length'];++_0x6016c){const _0xf32da2=_0xc5e30c[_0x6016c];if(_0x6016c===0x11*-0x1b+0x2*0x9f7+-0x1223||_0xf32da2!==_0x54f828){if(_0x3f3949=_0x528816[_0xf32da2],_0x3f3949['components']===0x3*-0x3fe+0x193b+0xd3d*-0x1){const _0x3b3108=_0x3f3949['data'],_0x415e44=_0x3b3108['length']-(0x1b4f+-0x1d*-0x45+0x7*-0x504);for(let _0x3317fb=-0x44*-0x47+0x5*-0x1c6+-0x9fe*0x1;_0x3317fb<_0x415e44;_0x3317fb+=-0x1*0x17b4+0x556+0x1262)_0x3b3108[_0x3317fb+(-0x11cb+0x2109*0x1+-0xf3e)]*_0x3b3108[_0x3317fb+(0x15bf+0x40d*-0x2+-0x3*0x48b)]+_0x3b3108[_0x3317fb+(0x16db*0x1+-0x1448+0x2f*-0xe)]*_0x3b3108[_0x3317fb+(-0x2*0x1367+-0x8c*-0x2c+-0xec3*-0x1)]+_0x3b3108[_0x3317fb+(0x3*-0x289+0x1*-0x1763+0x1f00)]*_0x3b3108[_0x3317fb+(-0xdce+0x11e1+-0x40d*0x1)]+_0x3b3108[_0x3317fb+(0x3*0x58+0x10b2+-0x11b7*0x1)]*_0x3b3108[_0x3317fb+(-0x1*0x19d3+0x572+0x2*0xa34)]<-0x23ce*0x1+-0x159e*-0x1+0x1c6*0x8&&(_0x3b3108[_0x3317fb+(0xf7a+0xe8+-0xa*0x1a3)]*=-(-0xfd0+-0xb2d+0x1afe),_0x3b3108[_0x3317fb+(-0x18ec+0x4a5+0x144c)]*=-(-0x16f3+-0x3f9*0x9+-0x863*-0x7),_0x3b3108[_0x3317fb+(0xed4+-0x1*-0x19d3+0xd8b*-0x3)]*=-(0x17*-0x12d+-0x7be+0x2*0x1165),_0x3b3108[_0x3317fb+(0x1*0x4cb+0x7*0x343+-0x1b99)]*=-(-0xbca+0x35*-0x4f+0x1c26));}_0x54f828=_0xf32da2;}}let _0x3e9cad=0x1f8f+0x13*-0x61+0x185c*-0x1;for(_0x6016c=0xf4c+0x18ff+0x1*-0x284b;_0x6016c<_0xd0471f['length'];_0x6016c++)_0x3f3949=_0xd0471f[_0x6016c]['_data'],_0x3e9cad=Math['max'](_0x3e9cad,_0x3f3949['length']===0x1*-0x145+0x1dbd+0x8*-0x38f?-0x15*-0x1a2+-0x2057+0x1*-0x1f3:_0x3f3949[_0x3f3949['length']-(-0x1f20*-0x1+0x3*-0x892+0x115*-0x5)]);return new Qi(_0x1d6eea['hasOwnProp'+'erty']('name')?_0x1d6eea['name']:'animation_'+_0x2b9673,_0x3e9cad,_0xd0471f,_0x528816,_0x577880);},Dc=new te(),Qa=new D(),vN=(_0x299363,_0x2c0922,_0x59c7c9)=>{const _0x991663=new Ie();if(_0x299363['hasOwnProp'+'erty']('name')&&_0x299363['name']['length']>0x33*-0x4f+0x1aad*0x1+0x118*-0xa?_0x991663['name']=_0x299363['name']:_0x991663['name']='node_'+_0x2c0922,_0x299363['hasOwnProp'+'erty']('matrix')&&(Dc['data']['set'](_0x299363['matrix']),Dc['getTransla'+'tion'](Qa),_0x991663['setLocalPo'+'sition'](Qa),Dc['getEulerAn'+'gles'](Qa),_0x991663['setLocalEu'+'lerAngles'](Qa),Dc['getScale'](Qa),_0x991663['setLocalSc'+'ale'](Qa)),_0x299363['hasOwnProp'+'erty']('rotation')){const _0x4cf3f2=_0x299363['rotation'];_0x991663['setLocalRo'+'tation'](_0x4cf3f2[-0x1*0x131c+-0x19*0x17b+0x381f],_0x4cf3f2[-0x1*-0xb3f+0x1935*-0x1+0xdf7],_0x4cf3f2[-0x18f9+0x1*0xeb3+0x178*0x7],_0x4cf3f2[0x1239+0xaf7+-0x1d2d]);}if(_0x299363['hasOwnProp'+'erty']('translatio'+'n')){const _0xa73156=_0x299363['translatio'+'n'];_0x991663['setLocalPo'+'sition'](_0xa73156[0x2271+0x1f*0xb+-0x23c6],_0xa73156[-0x61*-0x2b+0x20fc+-0x2*0x18a3],_0xa73156[-0xc*0x1de+0x165a+0x10]);}if(_0x299363['hasOwnProp'+'erty']('scale')){const _0x292209=_0x299363['scale'];_0x991663['setLocalSc'+'ale'](_0x292209[-0x1afc+-0x709*0x1+0xb57*0x3],_0x292209[0xc71+0x376+-0xfe6],_0x292209[0x1*-0x1f2e+0x2692*0x1+-0x762]);}return _0x299363['hasOwnProp'+'erty']('extensions')&&_0x299363['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']&&_0x59c7c9['set'](_0x299363,{'ext':_0x299363['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']}),_0x991663;},xN=(_0x512094,_0x36a72a)=>{const _0x537bff=_0x512094['type']==='orthograph'+'ic'?En:ni,_0x32e316=_0x537bff===En?_0x512094['orthograph'+'ic']:_0x512094['perspectiv'+'e'],_0x2b15a7={'enabled':!(-0x1e69+0xec4+0xfa6),'projection':_0x537bff,'nearClip':_0x32e316['znear'],'aspectRatioMode':hm};_0x32e316['zfar']&&(_0x2b15a7['farClip']=_0x32e316['zfar']),_0x537bff===En?(_0x2b15a7['orthoHeigh'+'t']=(-0x230a+-0x1974+0x3c7e+0.5)*_0x32e316['ymag'],_0x32e316['ymag']&&(_0x2b15a7['aspectRati'+'oMode']=lu,_0x2b15a7['aspectRati'+'o']=_0x32e316['xmag']/_0x32e316['ymag'])):(_0x2b15a7['fov']=_0x32e316['yfov']*Y['RAD_TO_DEG'],_0x32e316['aspectRati'+'o']&&(_0x2b15a7['aspectRati'+'oMode']=lu,_0x2b15a7['aspectRati'+'o']=_0x32e316['aspectRati'+'o']));const _0x3ff02f=new lt(_0x512094['name']);return _0x3ff02f['addCompone'+'nt']('camera',_0x2b15a7),_0x3ff02f;},TN=(_0x35d258,_0x5a3aaa)=>{const _0x4ebb0b={'enabled':!(0x3*-0x12d+0x11d+0x26b),'type':_0x35d258['type']==='point'?'omni':_0x35d258['type'],'color':_0x35d258['hasOwnProp'+'erty']('color')?new ie(_0x35d258['color']):ie['WHITE'],'range':_0x35d258['hasOwnProp'+'erty']('range')?_0x35d258['range']:-0x4b1f*-0x1+0x2509+0x4919*-0x1,'falloffMode':ev,'intensity':_0x35d258['hasOwnProp'+'erty']('intensity')?Y['clamp'](_0x35d258['intensity'],0xc7d+0x1256*0x2+-0x3129,0x3*0x14e+-0xd3*-0x6+-0x8da):0x176*0x1+0x204c+0x21c1*-0x1};_0x35d258['hasOwnProp'+'erty']('spot')&&(_0x4ebb0b['innerConeA'+'ngle']=_0x35d258['spot']['hasOwnProp'+'erty']('innerConeA'+'ngle')?_0x35d258['spot']['innerConeA'+'ngle']*Y['RAD_TO_DEG']:0x607+0x19fe+-0x1*0x2005,_0x4ebb0b['outerConeA'+'ngle']=_0x35d258['spot']['hasOwnProp'+'erty']('outerConeA'+'ngle')?_0x35d258['spot']['outerConeA'+'ngle']*Y['RAD_TO_DEG']:Math['PI']/(-0x2*-0x525+0xe95+-0x849*0x3)),_0x35d258['hasOwnProp'+'erty']('intensity')&&(_0x4ebb0b['luminance']=_0x35d258['intensity']*pl['getLightUn'+'itConversi'+'on'](fu[_0x4ebb0b['type']],_0x4ebb0b['outerConeA'+'ngle'],_0x4ebb0b['innerConeA'+'ngle']));const _0x2e420e=new lt(_0x5a3aaa['name']);return _0x2e420e['rotateLoca'+'l'](-0x110e+-0x122d+0x2395,0x232*0x10+0x61*-0x11+-0x1*0x1caf,0x1*-0xa67+-0x7b5*0x1+-0x26*-0x7a),_0x2e420e['addCompone'+'nt']('light',_0x4ebb0b),_0x2e420e;},wN=(_0xdc9873,_0x2b33de,_0x53f3d8,_0x2ec832)=>{if(!_0x2b33de['hasOwnProp'+'erty']('skins')||_0x2b33de['skins']['length']===-0x1*-0xf76+0x236e+-0x32e4)return[];const _0x5b95ac=new Map();return _0x2b33de['skins']['map'](_0x5e7e84=>rN(_0xdc9873,_0x5e7e84,_0x2b33de['accessors'],_0x2ec832,_0x53f3d8,_0x5b95ac));},EN=(_0x22c6e1,_0x3503c8,_0x24f183,_0xecd20)=>{var _0x385b8d,_0x3076c5,_0x575289;const _0x3ec3a8={},_0x96cdbc={},_0x337763={},_0x469ea7=[];return{'meshes':!_0xecd20['skipMeshes']&&((_0x385b8d=_0x3503c8==null?void(-0x4b3+-0x23b6+0x2869):_0x3503c8['meshes'])==null?void(0x2528+-0x1f1*0x9+0x1*-0x13af):_0x385b8d['length'])&&((_0x3076c5=_0x3503c8==null?void(-0x7a7+0x1d3b+-0x1594):_0x3503c8['accessors'])==null?void(0x2*-0x6a3+0x1068+0x191*-0x2):_0x3076c5['length'])&&((_0x575289=_0x3503c8==null?void(0x1*0x10a2+0x127b+0x59*-0x65):_0x3503c8['bufferView'+'s'])==null?void(0x1ea9+-0x1711+-0x798):_0x575289['length'])?_0x3503c8['meshes']['map'](_0x516bf0=>nN(_0x22c6e1,_0x516bf0,_0x3503c8['accessors'],_0x24f183,_0x3ec3a8,_0x96cdbc,_0x337763,_0xecd20,_0x469ea7)):[],'meshVariants':_0x96cdbc,'meshDefaultMaterials':_0x337763,'promises':_0x469ea7};},bN=(_0x4cf0b3,_0x2c33a6,_0x230c34)=>{var _0x1a5184,_0x56a5e9,_0x4f35cb;if(!_0x4cf0b3['hasOwnProp'+'erty']('materials')||_0x4cf0b3['materials']['length']===-0x34d+0xd42+-0x9f5*0x1)return[];const _0x3bdb34=(_0x1a5184=_0x230c34==null?void(0x1c*0x146+0x6da*-0x1+-0x1cce):_0x230c34['material'])==null?void(-0xd*0x2c9+-0x1e36+0x426b):_0x1a5184['preprocess'],_0x269eb2=((_0x56a5e9=_0x230c34==null?void(-0x3*0x11e+0x1bc5+-0x186b):_0x230c34['material'])==null?void(-0x19f*-0xf+0x9d1*-0x1+0x2*-0x740):_0x56a5e9['process'])??w0,_0x5d43a9=(_0x4f35cb=_0x230c34==null?void(0x1b14+0x683*-0x5+0x57b):_0x230c34['material'])==null?void(-0x1720+0x2*-0xe9+0xce*0x1f):_0x4f35cb['postproces'+'s'];return _0x4cf0b3['materials']['map'](_0x430e2f=>{_0x3bdb34&&_0x3bdb34(_0x430e2f);const _0x5bc91f=_0x269eb2(_0x430e2f,_0x2c33a6);return _0x5d43a9&&_0x5d43a9(_0x430e2f,_0x5bc91f),_0x5bc91f;});},AN=_0x556913=>{if(!_0x556913['hasOwnProp'+'erty']('extensions')||!_0x556913['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts'))return null;const _0xb7792b=_0x556913['extensions']['KHR_materi'+'als_varian'+'ts']['variants'],_0x34e236={};for(let _0x216f2f=-0x1*-0xa1+0x1814+-0x18b5;_0x216f2f<_0xb7792b['length'];_0x216f2f++)_0x34e236[_0xb7792b[_0x216f2f]['name']]=_0x216f2f;return _0x34e236;},CN=(_0x5c07b1,_0x32437b,_0x44b856,_0x5ec2a0)=>{var _0x2a59c7,_0x3c369c;if(!_0x5c07b1['hasOwnProp'+'erty']('animations')||_0x5c07b1['animations']['length']===0x1353+-0x1*0x5b3+-0xda0)return[];const _0x585070=(_0x2a59c7=_0x5ec2a0==null?void(0xddd+0x6*-0x3fd+0xa11):_0x5ec2a0['animation'])==null?void(0xd*0x5+-0x1a2+0x161):_0x2a59c7['preprocess'],_0x205c52=(_0x3c369c=_0x5ec2a0==null?void(0x49*0x16+0xdd*0x2a+-0x1544*0x2):_0x5ec2a0['animation'])==null?void(0x1*-0x5d1+-0x12ac+0x187d):_0x3c369c['postproces'+'s'];return _0x5c07b1['animations']['map']((_0x46815b,_0x41f4ef)=>{_0x585070&&_0x585070(_0x46815b);const _0xcccd18=yN(_0x46815b,_0x41f4ef,_0x5c07b1['accessors'],_0x44b856,_0x32437b,_0x5c07b1['meshes'],_0x5c07b1['nodes']);return _0x205c52&&_0x205c52(_0x46815b,_0xcccd18),_0xcccd18;});},PN=(_0x5f3aed,_0x5cbca7,_0x2462ca,_0x290311)=>{const _0x222dce=_0x5cbca7['accessors'];_0x2462ca['forEach']((_0x452be2,_0x13ef5c)=>{const _0x278f60=_0x452be2['ext']['attributes'];let _0x3eee5b;if(_0x278f60['hasOwnProp'+'erty']('TRANSLATIO'+'N')){const _0x330d8f=_0x222dce[_0x278f60['TRANSLATIO'+'N']];_0x3eee5b=Pn(_0x330d8f,_0x290311);}let _0x3060bb;if(_0x278f60['hasOwnProp'+'erty']('ROTATION')){const _0x21871f=_0x222dce[_0x278f60['ROTATION']];_0x3060bb=Pn(_0x21871f,_0x290311);}let _0x2f7f03;if(_0x278f60['hasOwnProp'+'erty']('SCALE')){const _0x1b7e06=_0x222dce[_0x278f60['SCALE']];_0x2f7f03=Pn(_0x1b7e06,_0x290311);}const _0x49d7cb=(_0x3eee5b?_0x3eee5b['length']/(0x11ba+-0xe67+-0x350):0x1*-0x109d+0x2*-0xa7d+-0x2597*-0x1)||(_0x3060bb?_0x3060bb['length']/(0x16ad+0x1a82+-0x312b):-0x21ab+0xde5+-0x9e3*-0x2)||(_0x2f7f03?_0x2f7f03['length']/(0xa1b+-0x8f8+-0x120):-0x2*0x8b0+0x2217+-0x10b7);if(_0x49d7cb){const _0x3de8d0=new Float32Array(_0x49d7cb*(-0x609+0xb0+0x1*0x569)),_0x2fc2fe=new D(),_0x417fc3=new le(),_0x8395fb=new D(0x15bc+0x165f+-0x2c1a,0x1dc7*-0x1+-0x48*-0x38+-0x1*-0xe08,0x1*0x6e6+-0x7aa+0xc5),_0x27ec4a=new te();let _0x38c4a6=-0x6*-0x2a9+0x311*0x1+-0x1307;for(let _0x5dac08=0x899+-0x1613+0x2e*0x4b;_0x5dac08<_0x49d7cb;_0x5dac08++){const _0x17530a=_0x5dac08*(-0x21cb+-0x1d41+0x3*0x1505);if(_0x3eee5b&&_0x2fc2fe['set'](_0x3eee5b[_0x17530a],_0x3eee5b[_0x17530a+(0x190e+-0x2689+0xd7c)],_0x3eee5b[_0x17530a+(-0x3e2*-0xa+-0x1fa1+-0x7*0x107)]),_0x3060bb){const _0x3fba9d=_0x5dac08*(0x5f1+0xdd1+0x2d2*-0x7);_0x417fc3['set'](_0x3060bb[_0x3fba9d],_0x3060bb[_0x3fba9d+(0x1*-0x18f+0x1*0x209d+-0x1f0d)],_0x3060bb[_0x3fba9d+(-0x96a+-0xbb*0x11+-0x1*-0x15d7)],_0x3060bb[_0x3fba9d+(0x25a6*0x1+-0x246*0x9+-0x1*0x112d)]);}_0x2f7f03&&_0x8395fb['set'](_0x2f7f03[_0x17530a],_0x2f7f03[_0x17530a+(0x2f*0xca+0x3*0x460+-0x3235)],_0x2f7f03[_0x17530a+(0x2525*-0x1+0xf3a+-0x15ed*-0x1)]),_0x27ec4a['setTRS'](_0x2fc2fe,_0x417fc3,_0x8395fb);for(let _0x13bde3=0x776+0xdd6+-0x154c;_0x13bde3<-0x109e+0x1796*-0x1+0x2844;_0x13bde3++)_0x3de8d0[_0x38c4a6++]=_0x27ec4a['data'][_0x13bde3];}_0x452be2['matrices']=_0x3de8d0;}});},MN=(_0x31ab2a,_0x566819,_0x56af41)=>{var _0x5890c1,_0x46b121,_0x1c704a;if(!_0x31ab2a['hasOwnProp'+'erty']('nodes')||_0x31ab2a['nodes']['length']===-0xb3d+0x1bd6+0x25f*-0x7)return[];const _0x27e43f=(_0x5890c1=_0x566819==null?void(0x2227+0x207a+-0x42a1*0x1):_0x566819['node'])==null?void(-0x1c7*-0x11+0x391*0x3+-0x2*0x1475):_0x5890c1['preprocess'],_0x3ff64=((_0x46b121=_0x566819==null?void(-0x1bac+0x939*0x2+0x93a):_0x566819['node'])==null?void(-0x1b33+-0x1b0b*0x1+0x83*0x6a):_0x46b121['process'])??vN,_0x5915f9=(_0x1c704a=_0x566819==null?void(-0x20fa+-0x1658+0xc2*0x49):_0x566819['node'])==null?void(-0x2b6*0x7+-0x1a*0xde+0x2*0x14c3):_0x1c704a['postproces'+'s'],_0x5dc589=_0x31ab2a['nodes']['map']((_0x3128b3,_0x108bc0)=>{_0x27e43f&&_0x27e43f(_0x3128b3);const _0x208bd0=_0x3ff64(_0x3128b3,_0x108bc0,_0x56af41);return _0x5915f9&&_0x5915f9(_0x3128b3,_0x208bd0),_0x208bd0;});for(let _0x437301=0x4e2*-0x6+-0x1696+0x1d*0x1ca;_0x437301<_0x31ab2a['nodes']['length'];++_0x437301){const _0x5a2b53=_0x31ab2a['nodes'][_0x437301];if(_0x5a2b53['hasOwnProp'+'erty']('children')){const _0x1f9896=_0x5dc589[_0x437301],_0x270ac8={};for(let _0x36de2a=-0x3*0x5b3+-0x2320+0x3439;_0x36de2a<_0x5a2b53['children']['length'];++_0x36de2a){const _0x339c21=_0x5dc589[_0x5a2b53['children'][_0x36de2a]];_0x339c21['parent']||(_0x270ac8['hasOwnProp'+'erty'](_0x339c21['name'])?_0x339c21['name']+=_0x270ac8[_0x339c21['name']]++:_0x270ac8[_0x339c21['name']]=0x1f37*-0x1+0x2038+-0x100,_0x1f9896['addChild'](_0x339c21));}}}return _0x5dc589;},DN=(_0x438429,_0x3130cc)=>{var _0x33b151;const _0x19775a=[],_0x2fca22=_0x438429['scenes']['length'];if(_0x2fca22===-0x2192+0x1*-0x1ca2+-0x19*-0x27d&&((_0x33b151=_0x438429['scenes'][0x12e2*-0x1+0x1*-0x1281+0x2563]['nodes'])==null?void(0x32*0x8b+-0x20*0xb1+-0x506):_0x33b151['length'])===0x25*-0x95+-0xeff+0x2489){const _0x2ee7a8=_0x438429['scenes'][0xcf7+0x1b2a+-0x2821]['nodes'][-0x3e*0x5d+-0x10ad+0x2733];_0x19775a['push'](_0x3130cc[_0x2ee7a8]);}else for(let _0x2c134f=0x3*-0xa99+0x8bd+0x170e;_0x2c134f<_0x2fca22;_0x2c134f++){const _0x955b5d=_0x438429['scenes'][_0x2c134f];if(_0x955b5d['nodes']){const _0x56c414=new Ie(_0x955b5d['name']);for(let _0x4220f7=-0x2120+-0x26b9*-0x1+-0x599;_0x4220f7<_0x955b5d['nodes']['length'];_0x4220f7++){const _0x464a44=_0x3130cc[_0x955b5d['nodes'][_0x4220f7]];_0x56c414['addChild'](_0x464a44);}_0x19775a['push'](_0x56c414);}}return _0x19775a;},IN=(_0x1bd8aa,_0x3be702,_0x2a9eb4)=>{var _0x177b98,_0x4eb624,_0x1c7596;let _0x1e6dfc=null;if(_0x1bd8aa['hasOwnProp'+'erty']('nodes')&&_0x1bd8aa['hasOwnProp'+'erty']('cameras')&&_0x1bd8aa['cameras']['length']>0x97*-0x22+-0x213e*0x1+0x354c){const _0x2ad74c=(_0x177b98=_0x2a9eb4==null?void(-0x2*-0xe53+-0x3*0x655+-0x9a7):_0x2a9eb4['camera'])==null?void(-0x6*0x58+-0x3*-0x2bb+-0x1*0x621):_0x177b98['preprocess'],_0x343433=((_0x4eb624=_0x2a9eb4==null?void(-0x1*-0x1b23+-0x8ef*0x3+-0x56):_0x2a9eb4['camera'])==null?void(-0x4a*0x67+-0x8c+0x1e52):_0x4eb624['process'])??xN,_0x4cf1fe=(_0x1c7596=_0x2a9eb4==null?void(0xf9b+-0x114*-0x13+-0x2417):_0x2a9eb4['camera'])==null?void(0x14c*-0xc+-0x19da+0x39*0xba):_0x1c7596['postproces'+'s'];_0x1bd8aa['nodes']['forEach']((_0x22e7ff,_0x39729f)=>{if(_0x22e7ff['hasOwnProp'+'erty']('camera')){const _0x1822eb=_0x1bd8aa['cameras'][_0x22e7ff['camera']];if(_0x1822eb){_0x2ad74c&&_0x2ad74c(_0x1822eb);const _0x3e110a=_0x343433(_0x1822eb,_0x3be702[_0x39729f]);_0x4cf1fe&&_0x4cf1fe(_0x1822eb,_0x3e110a),_0x3e110a&&(_0x1e6dfc||(_0x1e6dfc=new Map()),_0x1e6dfc['set'](_0x22e7ff,_0x3e110a));}}});}return _0x1e6dfc;},LN=(_0x1aa9ee,_0x263bd2,_0x10d047)=>{var _0x18d5ae,_0x1e8da9,_0x2fb208;let _0x15929e=null;if(_0x1aa9ee['hasOwnProp'+'erty']('nodes')&&_0x1aa9ee['hasOwnProp'+'erty']('extensions')&&_0x1aa9ee['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x1aa9ee['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('lights')){const _0x42bbf5=_0x1aa9ee['extensions']['KHR_lights'+'_punctual']['lights'];if(_0x42bbf5['length']){const _0x17b8d4=(_0x18d5ae=_0x10d047==null?void(-0x5*-0x2bb+-0x35c+-0x9b*0x11):_0x10d047['light'])==null?void(0x16f*-0x16+-0x243*-0xb+0x9b*0xb):_0x18d5ae['preprocess'],_0x42042b=((_0x1e8da9=_0x10d047==null?void(0x355*-0x1+-0x15*0xfe+0x182b):_0x10d047['light'])==null?void(0x3ad*-0x2+0x1461+-0xd07):_0x1e8da9['process'])??TN,_0x95b8a=(_0x2fb208=_0x10d047==null?void(0x10d9+0x1*-0x1b32+0xa59):_0x10d047['light'])==null?void(-0x1b3a+0x1147+0x9f3):_0x2fb208['postproces'+'s'];_0x1aa9ee['nodes']['forEach']((_0x4beafb,_0x3f1e52)=>{if(_0x4beafb['hasOwnProp'+'erty']('extensions')&&_0x4beafb['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x4beafb['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('light')){const _0x26476a=_0x4beafb['extensions']['KHR_lights'+'_punctual']['light'],_0x34a13a=_0x42bbf5[_0x26476a];if(_0x34a13a){_0x17b8d4&&_0x17b8d4(_0x34a13a);const _0x344634=_0x42042b(_0x34a13a,_0x263bd2[_0x3f1e52]);_0x95b8a&&_0x95b8a(_0x34a13a,_0x344634),_0x344634&&(_0x15929e||(_0x15929e=new Map()),_0x15929e['set'](_0x4beafb,_0x344634));}}});}}return _0x15929e;},RN=(_0x2932b3,_0x5d5fb1,_0x53f99f)=>{_0x2932b3['nodes']['forEach'](_0x115654=>{_0x115654['hasOwnProp'+'erty']('mesh')&&_0x115654['hasOwnProp'+'erty']('skin')&&_0x5d5fb1[_0x115654['mesh']]['meshes']['forEach'](_0x1e67bb=>{_0x1e67bb['skin']=_0x53f99f[_0x115654['skin']];});});},ON=async(_0x44c208,_0x2cb85d,_0xe0982f,_0x3cd591,_0x4732aa)=>{var _0x2ca7f1,_0xc77fa7;const _0x2d439a=(_0x2ca7f1=_0x4732aa==null?void(0x19db+0xbb9+-0x1*0x2594):_0x4732aa['global'])==null?void(-0x268d*0x1+-0x1428+0x3ab5):_0x2ca7f1['preprocess'],_0x20fac7=(_0xc77fa7=_0x4732aa==null?void(-0x5*0xec+-0x265e+0x2afa):_0x4732aa['global'])==null?void(0x1b9a+0x1*0x11aa+-0x1*0x2d44):_0xc77fa7['postproces'+'s'];_0x2d439a&&_0x2d439a(_0x2cb85d),_0x2cb85d['asset']&&_0x2cb85d['asset']['generator']==='PlayCanvas'&&w['warn']('glTF\x20model'+'\x20may\x20have\x20'+'been\x20gener'+'ated\x20with\x20'+'flipped\x20UV'+'s.\x20Please\x20'+'reconvert.');const _0x44ae59=new Map(),_0x392048=MN(_0x2cb85d,_0x4732aa,_0x44ae59),_0x24c574=DN(_0x2cb85d,_0x392048),_0x46946c=LN(_0x2cb85d,_0x392048,_0x4732aa),_0x49b610=IN(_0x2cb85d,_0x392048,_0x4732aa),_0x1573f3=AN(_0x2cb85d),_0x24ed11=await Promise['all'](_0xe0982f),{meshes:_0x426915,meshVariants:_0x418f40,meshDefaultMaterials:_0x40ce37,promises:_0x1766f5}=EN(_0x44c208,_0x2cb85d,_0x24ed11,_0x4732aa),_0x3e9053=CN(_0x2cb85d,_0x392048,_0x24ed11,_0x4732aa);PN(_0x44c208,_0x2cb85d,_0x44ae59,_0x24ed11);const _0x44f287=await Promise['all'](_0x3cd591),_0x39fe28=_0x44f287['map'](_0x39c03d=>_0x39c03d['resource']),_0x238f41=bN(_0x2cb85d,_0x39fe28,_0x4732aa),_0x52ef09=wN(_0x44c208,_0x2cb85d,_0x392048,_0x24ed11),_0x3cc08b=[];for(let _0x53dac4=0x11fa+0x2*-0x4a3+-0x22d*0x4;_0x53dac4<_0x426915['length'];_0x53dac4++)_0x3cc08b[_0x53dac4]=new Em(),_0x3cc08b[_0x53dac4]['meshes']=_0x426915[_0x53dac4];RN(_0x2cb85d,_0x3cc08b,_0x52ef09);const _0x8b4f1d=new qF();return _0x8b4f1d['gltf']=_0x2cb85d,_0x8b4f1d['nodes']=_0x392048,_0x8b4f1d['scenes']=_0x24c574,_0x8b4f1d['animations']=_0x3e9053,_0x8b4f1d['textures']=_0x44f287,_0x8b4f1d['materials']=_0x238f41,_0x8b4f1d['variants']=_0x1573f3,_0x8b4f1d['meshVarian'+'ts']=_0x418f40,_0x8b4f1d['meshDefaul'+'tMaterials']=_0x40ce37,_0x8b4f1d['renders']=_0x3cc08b,_0x8b4f1d['skins']=_0x52ef09,_0x8b4f1d['lights']=_0x46946c,_0x8b4f1d['cameras']=_0x49b610,_0x8b4f1d['nodeInstan'+'cingMap']=_0x44ae59,_0x20fac7&&_0x20fac7(_0x2cb85d,_0x8b4f1d),await Promise['all'](_0x1766f5),_0x8b4f1d;},FN=(_0x2559a9,_0x430608)=>{const _0x548f9e=(_0x53ec90,_0x20aebd)=>{switch(_0x53ec90){case 0x3980+0x2abe*0x1+-0x3e3e:return Te;case-0x26d5+0x4284+-0x1*-0xa52:return vt;case 0x2aeb*0x1+-0x9*-0x31b+-0x1fde:return Kh;case-0x2998+-0x32dc+0x8375:return Qh;case-0x2948+0x2422+0x2c28:return Zh;case 0x2598+0x200b*0x2+-0x3eab:return ma;default:return _0x20aebd;}},_0x39bd15=(_0x1451b2,_0x450030)=>{switch(_0x1451b2){case-0x82db+0x13e*0xb9+-0xd7*-0x24:return ue;case 0x1*-0x18ed+-0x1ce9*-0x6+-0x3*0x5b3:return ip;case 0x16b4+-0x89*0x25+0x261a:return yt;default:return _0x450030;}};_0x2559a9&&(_0x430608=_0x430608??{},_0x2559a9['minFilter']=_0x548f9e(_0x430608['minFilter'],ma),_0x2559a9['magFilter']=_0x548f9e(_0x430608['magFilter'],vt),_0x2559a9['addressU']=_0x39bd15(_0x430608['wrapS'],yt),_0x2559a9['addressV']=_0x39bd15(_0x430608['wrapT'],yt));};let NN=0x36*-0x75+0xc*0x239+-0x1fe;const nn=_0x1746cc=>{var _0x54a466,_0x9a77df,_0x42aaa2,_0x151d1c;return((_0x9a77df=(_0x54a466=_0x1746cc['extensions'])==null?void(0x53*-0x3+-0x1*-0xa0d+-0x914):_0x54a466['KHR_textur'+'e_basisu'])==null?void(0x19f2+-0x1c*0x52+-0x10fa):_0x9a77df['source'])??((_0x151d1c=(_0x42aaa2=_0x1746cc['extensions'])==null?void(-0x1*-0x117a+0x1f6*0x2+0xb*-0x1f2):_0x42aaa2['EXT_textur'+'e_webp'])==null?void(0x18e9+-0x724*-0x3+-0x2e55):_0x151d1c['source'])??_0x1746cc['source'];},kN=(_0xb42b24,_0x106717,_0x21a6f0,_0x2c8636,_0x1507ec)=>{var _0x1ee3bc,_0x321329,_0x3a2443;if(!_0xb42b24['images']||_0xb42b24['images']['length']===0x1ca8+-0x1*-0x210b+-0x3db3)return[];const _0x271191=(_0x1ee3bc=_0x1507ec==null?void(-0x21ba+-0x4*-0x282+0x17b2):_0x1507ec['image'])==null?void(0x1930+-0x2319+-0x1*-0x9e9):_0x1ee3bc['preprocess'],_0x312dfa=(_0x321329=_0x1507ec==null?void(0x1*-0x1b4d+-0x2ec*0x7+0x3*0xfeb):_0x1507ec['image'])==null?void(-0x95d+-0xa15+0x1*0x1372):_0x321329['processAsy'+'nc'],_0x192329=(_0x3a2443=_0x1507ec==null?void(0x1dfd+-0x1145+0xcb8*-0x1):_0x1507ec['image'])==null?void(-0x412+0x151f+-0x110d):_0x3a2443['postproces'+'s'],_0x123a3d={'image/png':'png','image/jpeg':'jpg','image/basis':'basis','image/ktx':'ktx','image/ktx2':'ktx2','image/vnd-ms.dds':'dds'},_0x2fd520=_0x418067=>{const _0x1e186a=new Set();return _0x418067['hasOwnProp'+'erty']('materials')&&_0x418067['materials']['forEach'](_0x26ffbf=>{if(_0x26ffbf['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x2b81e0=_0x26ffbf['pbrMetalli'+'cRoughness'];if(_0x2b81e0['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x19785e=_0x418067['textures'][_0x2b81e0['baseColorT'+'exture']['index']];_0x1e186a['add'](nn(_0x19785e));}}if(_0x26ffbf['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x3649e8=_0x418067['textures'][_0x26ffbf['emissiveTe'+'xture']['index']];_0x1e186a['add'](nn(_0x3649e8));}if(_0x26ffbf['hasOwnProp'+'erty']('extensions')){const _0x48150a=_0x26ffbf['extensions']['KHR_materi'+'als_sheen'];if(_0x48150a&&_0x48150a['hasOwnProp'+'erty']('sheenColor'+'Texture')){const _0x331eb8=_0x418067['textures'][_0x48150a['sheenColor'+'Texture']['index']];_0x1e186a['add'](nn(_0x331eb8));}const _0xb5c43f=_0x26ffbf['extensions']['KHR_materi'+'als_pbrSpe'+'cularGloss'+'iness'];if(_0xb5c43f&&_0xb5c43f['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x4e2cf0=_0x418067['textures'][_0xb5c43f['specularGl'+'ossinessTe'+'xture']['index']];_0x1e186a['add'](nn(_0x4e2cf0));}const _0x50f775=_0x26ffbf['extensions']['KHR_materi'+'als_specul'+'ar'];if(_0x50f775&&_0x50f775['hasOwnProp'+'erty']('specularCo'+'lorTexture')){const _0x36b385=_0x418067['textures'][_0x50f775['specularCo'+'lorTexture']['index']];_0x1e186a['add'](nn(_0x36b385));}}}),_0x1e186a;},_0x5383f2=(_0x3340af,_0x23d0f1,_0x2cbb43,_0x16bf59,_0x4329e7,_0x36b772)=>new Promise((_0x5d9088,_0x31d197)=>{const _0x48e0a6=_0x27a56b=>{const _0x1bff4d=(_0x3340af['name']||'gltf-textu'+'re')+'-'+NN++,_0x4ecc08={'url':_0x23d0f1||_0x1bff4d};if(_0x27a56b&&(_0x4ecc08['contents']=_0x27a56b['slice'](-0x1598+0x1ec4+-0x1*0x92c)['buffer']),_0x16bf59){const _0x5ac2ea=_0x123a3d[_0x16bf59];_0x5ac2ea&&(_0x4ecc08['filename']=_0x4ecc08['url']+'.'+_0x5ac2ea);}const _0x3ca0f0={'srgb':_0x36b772},_0x4642de=new pe(_0x1bff4d,'texture',_0x4ecc08,_0x3ca0f0,_0x4329e7);_0x4642de['on']('load',_0x460a8e=>_0x5d9088(_0x460a8e)),_0x4642de['on']('error',_0x21ee69=>_0x31d197(_0x21ee69)),_0x2c8636['add'](_0x4642de),_0x2c8636['load'](_0x4642de);};_0x2cbb43?_0x2cbb43['then'](_0x33fcbf=>_0x48e0a6(_0x33fcbf)):_0x48e0a6(null);}),_0x4a77e9=_0x2fd520(_0xb42b24);return _0xb42b24['images']['map']((_0x3aa0aa,_0x1ca07a)=>{_0x271191&&_0x271191(_0x3aa0aa);let _0x29dde9;return _0x312dfa?_0x29dde9=new Promise((_0x4e9e0b,_0x341145)=>{_0x312dfa(_0x3aa0aa,(_0x52737e,_0x40a7aa)=>{_0x52737e?_0x341145(_0x52737e):_0x4e9e0b(_0x40a7aa);});}):_0x29dde9=new Promise(_0x330128=>{_0x330128(null);}),_0x29dde9=_0x29dde9['then'](_0xc57083=>{const _0x10a831=_0x4a77e9['has'](_0x1ca07a);return _0xc57083||(_0x3aa0aa['hasOwnProp'+'erty']('uri')?x0(_0x3aa0aa['uri'])?_0x5383f2(_0x3aa0aa,_0x3aa0aa['uri'],null,jF(_0x3aa0aa['uri']),null,_0x10a831):_0x5383f2(_0x3aa0aa,jn['test'](_0x3aa0aa['uri'])?_0x3aa0aa['uri']:xe['join'](_0x21a6f0,_0x3aa0aa['uri']),null,null,{'crossOrigin':'anonymous'},_0x10a831):_0x3aa0aa['hasOwnProp'+'erty']('bufferView')&&_0x3aa0aa['hasOwnProp'+'erty']('mimeType')?_0x5383f2(_0x3aa0aa,null,_0x106717[_0x3aa0aa['bufferView']],_0x3aa0aa['mimeType'],null,_0x10a831):Promise['reject'](new Error('Invalid\x20im'+'age\x20found\x20'+'in\x20gltf\x20(n'+'either\x20uri'+'\x20or\x20buffer'+'View\x20found'+').\x20index='+_0x1ca07a)));}),_0x192329&&(_0x29dde9=_0x29dde9['then'](_0x3bc042=>(_0x192329(_0x3aa0aa,_0x3bc042),_0x3bc042))),_0x29dde9;});},UN=(_0x658f4a,_0x3ca1ed,_0x34d8c6)=>{var _0x1a9bb2,_0x174c55,_0x4a311a,_0xbbe92d,_0x4f8005;if(!((_0x1a9bb2=_0x658f4a==null?void(-0x1*0x7df+-0x27*0x2f+-0x3c2*-0x4):_0x658f4a['images'])!=null&&_0x1a9bb2['length'])||!((_0x174c55=_0x658f4a==null?void(0x83*0x45+-0x47*-0x7b+0x1724*-0x3):_0x658f4a['textures'])!=null&&_0x174c55['length']))return[];const _0x5c1205=(_0x4a311a=_0x34d8c6==null?void(-0x1*-0x3d6+-0x1c66+-0xc*-0x20c):_0x34d8c6['texture'])==null?void(-0x2bb*-0xd+0x8*-0x29+-0x1cd*0x13):_0x4a311a['preprocess'],_0x455e7f=(_0xbbe92d=_0x34d8c6==null?void(-0x2*0x42c+0x1e68+-0x161*0x10):_0x34d8c6['texture'])==null?void(0xee3+-0xe02+-0xe1):_0xbbe92d['processAsy'+'nc'],_0x4a84a0=(_0x4f8005=_0x34d8c6==null?void(-0x26e*0xa+-0xd*-0x2c2+-0xb8e):_0x34d8c6['texture'])==null?void(0x25ca+-0xfa1*-0x2+0x1143*-0x4):_0x4f8005['postproces'+'s'],_0x4fd650=new Set();return _0x658f4a['textures']['map'](_0x600b76=>{_0x5c1205&&_0x5c1205(_0x600b76);let _0x45134a;return _0x455e7f?_0x45134a=new Promise((_0x5cdf5b,_0x2eedd4)=>{_0x455e7f(_0x600b76,_0x658f4a['images'],(_0x135faf,_0x3c847d)=>{_0x135faf?_0x2eedd4(_0x135faf):_0x5cdf5b(_0x3c847d);});}):_0x45134a=new Promise(_0x5eaf1f=>{_0x5eaf1f(null);}),_0x45134a=_0x45134a['then'](_0x3363b5=>{_0x3363b5=_0x3363b5??nn(_0x600b76);const _0x589ca0=_0x4fd650['has'](_0x3363b5);return _0x4fd650['add'](_0x3363b5),_0x3ca1ed[_0x3363b5]['then'](_0x2b7575=>{const _0x5870a0=_0x589ca0?tN(_0x2b7575):_0x2b7575;return FN(_0x5870a0['resource'],(_0x658f4a['samplers']??[])[_0x600b76['sampler']]),_0x5870a0;});}),_0x4a84a0&&(_0x45134a=_0x45134a['then'](_0x2a9e51=>(_0x4a84a0(_0x600b76,_0x2a9e51),_0x2a9e51))),_0x45134a;});},BN=(_0x101547,_0xd875bd,_0x4f7011,_0x3ec542)=>{var _0x46c527,_0x236a28,_0x4b5f91;if(!_0x101547['buffers']||_0x101547['buffers']['length']===0xd9a*-0x1+-0x1*-0x2071+-0x12d7)return[];const _0x1b08bb=(_0x46c527=_0x3ec542==null?void(0x2*0xce5+0x6*0xb2+-0x1df6):_0x3ec542['buffer'])==null?void(0x1e1d+0x2*-0xefe+0x3*-0xb):_0x46c527['preprocess'],_0x219d32=(_0x236a28=_0x3ec542==null?void(-0x1e96+-0xfe*0x1e+-0x1e2d*-0x2):_0x3ec542['buffer'])==null?void(-0x2409+0x2e*-0x19+0x5*0x81b):_0x236a28['processAsy'+'nc'],_0x37a7db=(_0x4b5f91=_0x3ec542==null?void(-0x1516+-0x969+-0x25*-0xd3):_0x3ec542['buffer'])==null?void(0x1c*0x151+0x2327+0x5*-0xe67):_0x4b5f91['postproces'+'s'];return _0x101547['buffers']['map']((_0x3800b3,_0x863a45)=>{_0x1b08bb&&_0x1b08bb(_0x3800b3);let _0x3810c7;return _0x219d32?_0x3810c7=new Promise((_0x528ed8,_0xbff5dd)=>{_0x219d32(_0x3800b3,(_0x177f33,_0x1b1c61)=>{_0x177f33?_0xbff5dd(_0x177f33):_0x528ed8(_0x1b1c61);});}):_0x3810c7=new Promise(_0x1c22eb=>{_0x1c22eb(null);}),_0x3810c7=_0x3810c7['then'](_0xa9091b=>{if(_0xa9091b)return _0xa9091b;if(_0x3800b3['hasOwnProp'+'erty']('uri')){if(x0(_0x3800b3['uri'])){const _0x546f19=atob(_0x3800b3['uri']['split'](',')[-0x3b*0x41+-0x7e0+0x16dc]),_0x559475=new Uint8Array(_0x546f19['length']);for(let _0x27fda0=-0xb*0x2f1+0x1d2*0x8+-0x38f*-0x5;_0x27fda0<_0x546f19['length'];_0x27fda0++)_0x559475[_0x27fda0]=_0x546f19['charCodeAt'](_0x27fda0);return _0x559475;}return new Promise((_0x5dab66,_0x654a09)=>{ot['get'](jn['test'](_0x3800b3['uri'])?_0x3800b3['uri']:xe['join'](_0x4f7011,_0x3800b3['uri']),{'cache':!(-0x2173*-0x1+-0x16a3*-0x1+-0x12b2*0x3),'responseType':'arraybuffe'+'r','retry':!(0x2*0x3f9+-0x7+-0x7ea)},(_0x258c4c,_0x16feec)=>{_0x258c4c?_0x654a09(_0x258c4c):_0x5dab66(new Uint8Array(_0x16feec));});});}return _0xd875bd;}),_0x37a7db&&(_0x3810c7=_0x3810c7['then'](_0x32c21d=>(_0x37a7db(_0x101547['buffers'][_0x863a45],_0x32c21d),_0x32c21d))),_0x3810c7;});},zN=(_0x399b7a,_0x165ff9)=>{const _0x59f23d=JSON['parse']((_0x2188ec=>{if(typeof TextDecoder<'u')return new TextDecoder()['decode'](_0x2188ec);let _0x1cb902='';for(let _0x3d30e7=0x3*0x1d+-0x17*0x13+0x15e;_0x3d30e7<_0x2188ec['length'];_0x3d30e7++)_0x1cb902+=String['fromCharCo'+'de'](_0x2188ec[_0x3d30e7]);return decodeURIComponent(escape(_0x1cb902));})(_0x399b7a));if(_0x59f23d['asset']&&_0x59f23d['asset']['version']&&parseFloat(_0x59f23d['asset']['version'])<-0x1483*0x1+-0x437+0x18bc){_0x165ff9('Invalid\x20gl'+'tf\x20version'+'.\x20Expected'+'\x20version\x202'+'.0\x20or\x20abov'+'e\x20but\x20foun'+'d\x20version\x20'+'\x27'+_0x59f23d['asset']['version']+'\x27.');return;}_0x165ff9(null,_0x59f23d);},VN=(_0x5eb52f,_0x21c894)=>{const _0x50b1b6=_0x5eb52f instanceof ArrayBuffer?new DataView(_0x5eb52f):new DataView(_0x5eb52f['buffer'],_0x5eb52f['byteOffset'],_0x5eb52f['byteLength']),_0x44f09a=_0x50b1b6['getUint32'](0x1c2e*0x1+-0x2*0x6e2+-0x12*0xcd,!(0xfc0+-0x230b+0xb*0x1c1)),_0x413b0e=_0x50b1b6['getUint32'](-0x19c4+0x362*0x2+0x1304,!(-0x1b7e+-0xd*-0x27d+-0x4db)),_0x4a8a77=_0x50b1b6['getUint32'](0x19d3+0x1*-0x1ab9+0xee,!(0x1199+-0xe6c+-0x32d));if(_0x44f09a!==-0x44ee55b5+0x1*-0x106d8846+-0x9bb04a62*-0x1){_0x21c894('Invalid\x20ma'+'gic\x20number'+'\x20found\x20in\x20'+'glb\x20header'+'.\x20Expected'+'\x200x46546C6'+'7,\x20found\x200'+'x'+_0x44f09a['toString'](-0x1847+0x20+0x1837));return;}if(_0x413b0e!==0x52*-0xd+-0xa44+0xe70){_0x21c894('Invalid\x20ve'+'rsion\x20numb'+'er\x20found\x20i'+'n\x20glb\x20head'+'er.\x20Expect'+'ed\x202,\x20foun'+'d\x20'+_0x413b0e);return;}if(_0x4a8a77<=0x26c3+-0x10cf+-0x119*0x14||_0x4a8a77>_0x50b1b6['byteLength']){_0x21c894('Invalid\x20le'+'ngth\x20found'+'\x20in\x20glb\x20he'+'ader.\x20Foun'+'d\x20'+_0x4a8a77);return;}const _0x1f605a=[];let _0x1db9e5=-0x1*-0x49f+-0x1*0x1a4d+0xadd*0x2;for(;_0x1db9e5<_0x4a8a77;){const _0xeed22d=_0x50b1b6['getUint32'](_0x1db9e5,!(-0x6*0x401+0x1c5b+-0x455));_0x1db9e5+_0xeed22d+(0x3*0x65b+0x15e3+0x9*-0x48c)>_0x50b1b6['byteLength']&&_0x21c894('Invalid\x20ch'+'unk\x20length'+'\x20found\x20in\x20'+'glb.\x20Found'+'\x20'+_0xeed22d);const _0xaf6a18=_0x50b1b6['getUint32'](_0x1db9e5+(0x1b71+0x1b3*0x5+0x16*-0x1a2),!(0x149*0x11+0x30f*-0x2+-0xfbb*0x1)),_0x16a9e1=new Uint8Array(_0x50b1b6['buffer'],_0x50b1b6['byteOffset']+_0x1db9e5+(0x1*-0x21af+0x4e9+0x1cce),_0xeed22d);_0x1f605a['push']({'length':_0xeed22d,'type':_0xaf6a18,'data':_0x16a9e1}),_0x1db9e5+=_0xeed22d+(-0x1*0x2586+-0x25ab+0x83*0x93);}if(_0x1f605a['length']!==-0xfd5+0x681+0x955&&_0x1f605a['length']!==-0x1727*-0x1+-0x825*-0x3+-0xd2*0x3a){_0x21c894('Invalid\x20nu'+'mber\x20of\x20ch'+'unks\x20found'+'\x20in\x20glb\x20fi'+'le.');return;}if(_0x1f605a[-0xaaf+-0xa1a+0x14c9]['type']!==0x5de4c*-0xad9+-0x3b2eeead+-0x1*-0xc926a863){_0x21c894('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x4'+'E4F534A,\x20f'+'ound\x200x'+_0x1f605a[-0x1*-0x1f1a+-0xa70*-0x1+-0x298a]['type']['toString'](0x4*-0x92c+-0x15ce+0x3a8e));return;}if(_0x1f605a['length']>0x7*0x48e+0x2509*-0x1+0x528&&_0x1f605a[0x2a8*-0x1+-0x419+0x2*0x361]['type']!==0x1*0x5cf7a3+-0x3f0ea9+0x306048){_0x21c894('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x0'+'04E4942,\x20f'+'ound\x200x'+_0x1f605a[-0x35*-0x65+0x1fd0+0xd2e*-0x4]['type']['toString'](-0x1158+0x1*-0xefb+0x2063));return;}_0x21c894(null,{'gltfChunk':_0x1f605a[-0xc3*0x29+0x2*0x82f+0xedd]['data'],'binaryChunk':_0x1f605a['length']===-0x3f+-0x1*-0x1201+0x2*-0x8e0?_0x1f605a[-0x18f9+-0x93b+0x2235]['data']:null});},GN=(_0x258f65,_0x150dab,_0x60049d)=>{const _0x124b4c=()=>{const _0x20e054=new Uint8Array(_0x150dab);return _0x20e054[0xfb7+-0x1ff+-0xdb8*0x1]===-0x1d7+-0x1c31*-0x1+-0x19f3&&_0x20e054[-0x1e2b*-0x1+0xb8d*-0x1+0x3b9*-0x5]===0x25*0x95+-0x830+-0x44f*0x3&&_0x20e054[-0x1*-0xa39+0xbf*-0x1+-0x978]===0x3*-0x719+-0x1c4c+0x31eb&&_0x20e054[-0x13*0xf2+-0x1fc*-0x13+-0x1*0x13bb]===0x10a6+0x1d8d+-0x2ded;};_0x258f65&&_0x258f65['toLowerCas'+'e']()['endsWith']('.glb')||_0x124b4c()?VN(_0x150dab,_0x60049d):_0x60049d(null,{'gltfChunk':_0x150dab,'binaryChunk':null});},HN=(_0x47b8c4,_0x342688,_0x4e1a56)=>{var _0x6c725a,_0x3c9bae,_0x14db13,_0x30d22a;const _0x234371=[],_0x2cd585=(_0x6c725a=_0x4e1a56==null?void(-0x20b1*0x1+-0xa99*-0x1+0x1618):_0x4e1a56['bufferView'])==null?void(0x301*0x6+0x37*-0x83+0xa1f):_0x6c725a['preprocess'],_0x124e59=(_0x3c9bae=_0x4e1a56==null?void(-0x2*0x5d4+-0x245*0xe+-0x22*-0x147):_0x4e1a56['bufferView'])==null?void(-0xc3*-0x2a+0x77*0x43+-0x1*0x3f23):_0x3c9bae['processAsy'+'nc'],_0x8f4b21=(_0x14db13=_0x4e1a56==null?void(-0x1*0x114e+-0x34*0x7c+0xe*0x309):_0x4e1a56['bufferView'])==null?void(-0x15ed+-0x1*-0x8ee+0xcff):_0x14db13['postproces'+'s'];if(!((_0x30d22a=_0x47b8c4['bufferView'+'s'])!=null&&_0x30d22a['length']))return _0x234371;for(let _0x4c9f35=0x2f5+0x2c*-0xa3+0x190f;_0x4c9f35<_0x47b8c4['bufferView'+'s']['length'];++_0x4c9f35){const _0x14451a=_0x47b8c4['bufferView'+'s'][_0x4c9f35];_0x2cd585&&_0x2cd585(_0x14451a);let _0xf4c5b2;_0x124e59?_0xf4c5b2=new Promise((_0x401996,_0x296e32)=>{_0x124e59(_0x14451a,_0x342688,(_0x4bac99,_0x3ad41c)=>{_0x4bac99?_0x296e32(_0x4bac99):_0x401996(_0x3ad41c);});}):_0xf4c5b2=new Promise(_0x3410c6=>{_0x3410c6(null);}),_0xf4c5b2=_0xf4c5b2['then'](_0x50b0a9=>_0x50b0a9||_0x342688[_0x14451a['buffer']]['then'](_0x562557=>new Uint8Array(_0x562557['buffer'],_0x562557['byteOffset']+(_0x14451a['byteOffset']||0xfa3*0x1+-0x4*-0x2df+-0x35*0x83),_0x14451a['byteLength']))),_0x14451a['hasOwnProp'+'erty']('byteStride')&&(_0xf4c5b2=_0xf4c5b2['then'](_0x2f23b5=>(_0x2f23b5['byteStride']=_0x14451a['byteStride'],_0x2f23b5))),_0x8f4b21&&(_0xf4c5b2=_0xf4c5b2['then'](_0x2c3b2e=>(_0x8f4b21(_0x14451a,_0x2c3b2e),_0x2c3b2e))),_0x234371['push'](_0xf4c5b2);}return _0x234371;};class kh{static['parse'](_0x305836,_0xfb79fe,_0x5d1591,_0x260151,_0x3c42b8,_0x1de6d6,_0x23c47b){GN(_0x305836,_0x5d1591,(_0x2d0b41,_0x9cb9ef)=>{if(_0x2d0b41){_0x23c47b(_0x2d0b41);return;}zN(_0x9cb9ef['gltfChunk'],(_0x1c38c5,_0x26686f)=>{if(_0x1c38c5){_0x23c47b(_0x1c38c5);return;}const _0x125829=BN(_0x26686f,_0x9cb9ef['binaryChun'+'k'],_0xfb79fe,_0x1de6d6),_0x5773e3=HN(_0x26686f,_0x125829,_0x1de6d6),_0xde495a=kN(_0x26686f,_0x5773e3,_0xfb79fe,_0x3c42b8,_0x1de6d6),_0x57f695=UN(_0x26686f,_0xde495a,_0x1de6d6);ON(_0x260151,_0x26686f,_0x5773e3,_0x57f695,_0x1de6d6)['then'](_0x3ee490=>_0x23c47b(null,_0x3ee490))['catch'](_0x1c3296=>_0x23c47b(_0x1c3296));});});}static['createDefa'+'ultMateria'+'l'](){return w0({'name':'defaultGlb'+'Material'},[]);}}class WN extends Qe{constructor(_0x38e743){super(_0x38e743,'animation'),this['device']=_0x38e743['graphicsDe'+'vice'],this['assets']=_0x38e743['assets'];}['load'](_0x26b684,_0x99c463,_0x49fc81){typeof _0x26b684=='string'&&(_0x26b684={'load':_0x26b684,'original':_0x26b684});const _0x207aa4={'retry':this['maxRetries']>-0x15c0+-0x17*0x63+0x1ea5,'maxRetries':this['maxRetries']};(_0x26b684['load']['startsWith']('blob:')||_0x26b684['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x26b684['original'])['toLowerCas'+'e']()==='.glb'?_0x207aa4['responseTy'+'pe']=Ls['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x207aa4['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x26b684['load'],_0x207aa4,(_0x56658e,_0x41e516)=>{_0x56658e?_0x99c463('Error\x20load'+'ing\x20animat'+'ion\x20resour'+'ce:\x20'+_0x26b684['original']+'\x20['+_0x56658e+']'):xe['getExtensi'+'on'](_0x26b684['original'])['toLowerCas'+'e']()==='.glb'?kh['parse']('filename.g'+'lb','',_0x41e516,this['device'],this['assets'],(_0x49fc81==null?void(0x8ad+-0x899*0x1+-0x14):_0x49fc81['options'])??{},(_0x2a1f31,_0x4debcf)=>{var _0x56e500;if(_0x2a1f31)_0x99c463(_0x2a1f31);else{const _0x34876a=_0x4debcf['animations'];if((_0x56e500=_0x49fc81==null?void(-0x5*0x2c4+-0x765+0x1539):_0x49fc81['data'])!=null&&_0x56e500['events']){for(let _0x6649cb=-0x2*0x9ad+0x245a+-0x4*0x440;_0x6649cb<_0x34876a['length'];_0x6649cb++)_0x34876a[_0x6649cb]['events']=new Hv(Object['values'](_0x49fc81['data']['events']));}_0x4debcf['destroy'](),_0x99c463(null,_0x34876a);}}):_0x99c463(null,this['_parseAnim'+'ationV'+_0x41e516['animation']['version']](_0x41e516));});}['open'](_0xb25a21,_0x1ba27e,_0x1b1535){return _0x1ba27e;}['_parseAnim'+'ationV3'](_0x21d64b){const _0x558de1=_0x21d64b['animation'],_0x48916d=new ug();_0x48916d['name']=_0x558de1['name'],_0x48916d['duration']=_0x558de1['duration'];for(let _0x1942df=0x1385+-0x1836+-0x4b1*-0x1;_0x1942df<_0x558de1['nodes']['length'];_0x1942df++){const _0x977158=new fg(),_0x30f353=_0x558de1['nodes'][_0x1942df];_0x977158['_name']=_0x30f353['name'];for(let _0x2be73d=0x5ad*0x6+0x8b*-0x19+-0x147b;_0x2be73d<_0x30f353['keys']['length'];_0x2be73d++){const _0x5b7004=_0x30f353['keys'][_0x2be73d],_0x272632=_0x5b7004['time'],_0x4cb27f=_0x5b7004['pos'],_0x34b54b=_0x5b7004['rot'],_0x1caf62=_0x5b7004['scale'],_0x5130a0=new D(_0x4cb27f[0x23a4+-0x1b95+0x1*-0x80f],_0x4cb27f[0x18b*-0x4+0x630+-0x3],_0x4cb27f[-0x24b3+-0x2*0xb75+-0x1*-0x3b9f]),_0xd3e1b7=new le()['setFromEul'+'erAngles'](_0x34b54b[-0xe40+0x3*-0x4e+0xf2a],_0x34b54b[-0xb45+-0x1*-0x719+0x42d],_0x34b54b[-0x44*-0x12+-0x302+-0x1c4]),_0x5720ee=new D(_0x1caf62[-0x1*-0x1505+-0x2*0x647+-0x877],_0x1caf62[0x1*-0x179a+0x3ae*-0xa+0x3c67],_0x1caf62[0x142d*0x1+0x2383+-0x37ae]),_0x1a674f=new dg(_0x272632,_0x5130a0,_0xd3e1b7,_0x5720ee);_0x977158['_keys']['push'](_0x1a674f);}_0x48916d['addNode'](_0x977158);}return _0x48916d;}['_parseAnim'+'ationV4'](_0x1da94e){const _0x1943e7=_0x1da94e['animation'],_0x55e0d4=new ug();_0x55e0d4['name']=_0x1943e7['name'],_0x55e0d4['duration']=_0x1943e7['duration'];for(let _0x27cc86=-0x884+-0x737*0x1+0xfbb;_0x27cc86<_0x1943e7['nodes']['length'];_0x27cc86++){const _0x4c19cb=new fg(),_0x42ee14=_0x1943e7['nodes'][_0x27cc86];_0x4c19cb['_name']=_0x42ee14['name'];const _0x22fd49=_0x42ee14['defaults']['p'],_0x1bac06=_0x42ee14['defaults']['r'],_0x43b523=_0x42ee14['defaults']['s'];for(let _0x4ce58b=-0x1a6b+-0x8a9*0x3+-0x13*-0x2c2;_0x4ce58b<_0x42ee14['keys']['length'];_0x4ce58b++){const _0x4bb8f0=_0x42ee14['keys'][_0x4ce58b],_0x117a82=_0x4bb8f0['t'],_0x352644=_0x22fd49||_0x4bb8f0['p'],_0x2b2a54=_0x1bac06||_0x4bb8f0['r'],_0x2d639a=_0x43b523||_0x4bb8f0['s'],_0x4cd9ef=new D(_0x352644[0x10fc*-0x1+-0x1d50+0x2e4c],_0x352644[-0x234d+-0x24ea+0x4838],_0x352644[-0x16bd+0x15e4+0x49*0x3]),_0x53657b=new le()['setFromEul'+'erAngles'](_0x2b2a54[-0x3*0x33f+0x3c*-0x71+-0x21*-0x119],_0x2b2a54[-0x2267+-0xd*0x95+-0x23*-0x133],_0x2b2a54[0x1d4c+-0x95d+0x13ed*-0x1]),_0x3ef5ae=new D(_0x2d639a[-0x21b7+0x8ff*-0x2+-0x763*-0x7],_0x2d639a[0x2708+0x1442*0x1+0x1*-0x3b49],_0x2d639a[-0x151*-0x15+0xe2f+-0x29d2]),_0x2b61aa=new dg(_0x117a82,_0x4cd9ef,_0x53657b,_0x3ef5ae);_0x4c19cb['_keys']['push'](_0x2b61aa);}_0x55e0d4['addNode'](_0x4c19cb);}return _0x55e0d4;}}class $N extends Qe{constructor(_0x2de823){super(_0x2de823,'animclip');}['load'](_0x34794f,_0x2e11e2){typeof _0x34794f=='string'&&(_0x34794f={'load':_0x34794f,'original':_0x34794f});const _0x286178={'retry':this['maxRetries']>-0xe6e*-0x1+-0x15ff*-0x1+0x246d*-0x1,'maxRetries':this['maxRetries']};_0x34794f['load']['startsWith']('blob:')&&(_0x286178['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x34794f['load'],_0x286178,(_0x4963ac,_0x59ae89)=>{_0x4963ac?_0x2e11e2('Error\x20load'+'ing\x20animat'+'ion\x20clip\x20r'+'esource:\x20'+_0x34794f['original']+'\x20['+_0x4963ac+']'):_0x2e11e2(null,_0x59ae89);});}['open'](_0x458695,_0x1e8d19){const _0x6d2af7=_0x1e8d19['name'],_0x53f931=_0x1e8d19['duration'],_0x31b26=_0x1e8d19['inputs']['map'](_0x4e888a=>new Fh(-0x19b5*-0x1+0x3f4+-0x124*0x1a,_0x4e888a)),_0x45fdb5=_0x1e8d19['outputs']['map'](_0x179f98=>new Fh(_0x179f98['components'],_0x179f98['data'])),_0x6a1bf5=_0x1e8d19['curves']['map'](_0xb3e9e9=>new v0([_0xb3e9e9['path']],_0xb3e9e9['inputIndex'],_0xb3e9e9['outputInde'+'x'],_0xb3e9e9['interpolat'+'ion']));return new Qi(_0x6d2af7,_0x53f931,_0x31b26,_0x45fdb5,_0x6a1bf5);}}class XN extends Qe{constructor(_0x2eb5fd){super(_0x2eb5fd,'animstateg'+'raph');}['load'](_0x900c9c,_0x32a31c){typeof _0x900c9c=='string'&&(_0x900c9c={'load':_0x900c9c,'original':_0x900c9c});const _0xdcc1b0={'retry':this['maxRetries']>-0xe53+-0x1*0x1443+-0x13*-0x1d2,'maxRetries':this['maxRetries']};_0x900c9c['load']['startsWith']('blob:')&&(_0xdcc1b0['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x900c9c['load'],_0xdcc1b0,(_0x45543c,_0x457036)=>{_0x45543c?_0x32a31c('Error\x20load'+'ing\x20animat'+'ion\x20state\x20'+'graph\x20reso'+'urce:\x20'+_0x900c9c['original']+'\x20['+_0x45543c+']'):_0x32a31c(null,_0x457036);});}['open'](_0x460477,_0x29292a){return new Jc(_0x29292a);}}const Af=(function(){if(typeof window>'u')return!(0x2f0*0x2+-0x1db7*-0x1+-0x2396);const _0x3d9b60=window['navigator']['userAgent'],_0x233384=_0x3d9b60['indexOf']('MSIE\x20');if(_0x233384>0x4*-0x179+-0x62*0x15+0xdee)return parseInt(_0x3d9b60['substring'](_0x233384+(-0x1*0x1d63+0x1ad7+-0x3*-0xdb),_0x3d9b60['indexOf']('.',_0x233384)),-0x62a*0x4+0x1*-0xf3f+-0x19*-0x199);if(_0x3d9b60['indexOf']('Trident/')>-0x154b*-0x1+0x137e+-0x28c9){const _0x5b5e3b=_0x3d9b60['indexOf']('rv:');return parseInt(_0x3d9b60['substring'](_0x5b5e3b+(-0x2162+0x1*-0xe9b+-0x3*-0x1000),_0x3d9b60['indexOf']('.',_0x5b5e3b)),0x127e+0xd0f*0x2+-0x2c92);}return!(-0x2001*0x1+-0xc27+-0x7*-0x64f);}()),qN=['.ogg','.mp3','.wav','.mp4a','.m4a','.mp4','.aac','.opus'];class jN extends Qe{constructor(_0x766458){super(_0x766458,'audio'),this['manager']=_0x766458['soundManag'+'er'],w['assert'](this['manager'],'AudioHandl'+'er\x20cannot\x20'+'be\x20created'+'\x20without\x20s'+'ound\x20manag'+'er');}['_isSupport'+'ed'](_0x283247){const _0x16a63a=xe['getExtensi'+'on'](_0x283247);return qN['indexOf'](_0x16a63a)>-(-0x10a9+-0x2233+0x1*0x32dd)||_0x283247['startsWith']('blob:');}['load'](_0x598327,_0x53c505){typeof _0x598327=='string'&&(_0x598327={'load':_0x598327,'original':_0x598327});const _0x27757a=function(_0x8ba1f0){_0x53c505(null,new Mw(_0x8ba1f0));},_0x370090=function(_0x232e45){let _0x3ddfe5='Error\x20load'+'ing\x20audio\x20'+'url:\x20'+_0x598327['original'];_0x232e45&&(_0x3ddfe5+=':\x20'+(_0x232e45['message']||_0x232e45)),console['warn'](_0x3ddfe5),_0x53c505(_0x3ddfe5);};if(this['_createSou'+'nd']){if(!this['_isSupport'+'ed'](_0x598327['original'])){_0x370090('Audio\x20form'+'at\x20for\x20'+_0x598327['original']+('\x20not\x20suppo'+'rted'));return;}this['_createSou'+'nd'](_0x598327['load'],_0x27757a,_0x370090);}else _0x370090(null);}['_createSou'+'nd'](_0x5bd7cf,_0x30568e,_0x9702af){if(Dl()){const _0x1777d3=this['manager'];if(!_0x1777d3['context']){_0x9702af('Audio\x20mana'+'ger\x20has\x20no'+'\x20audio\x20con'+'text');return;}const _0xd13267={'retry':this['maxRetries']>0xa6*0x23+-0x34*0x18+-0x2*0x8e9,'maxRetries':this['maxRetries']};(_0x5bd7cf['startsWith']('blob:')||_0x5bd7cf['startsWith']('data:'))&&(_0xd13267['responseTy'+'pe']=Ls['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']),ot['get'](_0x5bd7cf,_0xd13267,(_0x590f,_0x59e54e)=>{if(_0x590f){_0x9702af(_0x590f);return;}_0x1777d3['context']['decodeAudi'+'oData'](_0x59e54e,_0x30568e,_0x9702af);});}else{let _0x3c3c81=null;try{_0x3c3c81=new Audio();}catch{_0x9702af('No\x20support'+'\x20for\x20Audio'+'\x20element');return;}Af&&document['body']['appendChil'+'d'](_0x3c3c81);const _0x14c04a=function(){_0x3c3c81['removeEven'+'tListener']('canplaythr'+'ough',_0x14c04a),Af&&document['body']['removeChil'+'d'](_0x3c3c81),_0x30568e(_0x3c3c81);};_0x3c3c81['onerror']=function(){_0x3c3c81['onerror']=null,Af&&document['body']['removeChil'+'d'](_0x3c3c81),_0x9702af();},_0x3c3c81['addEventLi'+'stener']('canplaythr'+'ough',_0x14c04a),_0x3c3c81['src']=_0x5bd7cf;}}}class YN extends Qe{constructor(_0x17d5f7){super(_0x17d5f7,'binary');}['load'](_0x57fcb7,_0x3e0d73){typeof _0x57fcb7=='string'&&(_0x57fcb7={'load':_0x57fcb7,'original':_0x57fcb7}),ot['get'](_0x57fcb7['load'],{'responseType':Ls['ResponseTy'+'pe']['ARRAY_BUFF'+'ER'],'retry':this['maxRetries']>-0xe16+0x1bf*0x1+0xc57,'maxRetries':this['maxRetries']},(_0x41fdb5,_0x515f72)=>{_0x41fdb5?_0x3e0d73('Error\x20load'+'ing\x20binary'+'\x20resource:'+'\x20'+_0x57fcb7['original']+'\x20['+_0x41fdb5+']'):_0x3e0d73(null,_0x515f72);});}['openBinary'](_0x3f7579){return _0x3f7579['buffer'];}}class yr{constructor(_0x11ffd0,_0x333825,_0x316928,_0x4a79f0){const _0x342b59=function(_0x49c493,_0x215f01,_0xb474f){const _0xc62e38=yr['createAsse'+'t'](_0x333825['name'],_0x49c493,_0x215f01,_0xb474f);return _0x316928['add'](_0xc62e38),_0xc62e38;},_0x2722ad=[];for(let _0x581f2b=-0x30*-0x34+0x7*-0x422+0x132e;_0x581f2b<_0x11ffd0['renders']['length'];++_0x581f2b)_0x2722ad['push'](_0x342b59('render',_0x11ffd0['renders'][_0x581f2b],_0x581f2b));const _0x35e6f3=[];for(let _0x4ca8cd=-0x286*0xa+0x1377+0x5c5;_0x4ca8cd<_0x11ffd0['materials']['length'];++_0x4ca8cd)_0x35e6f3['push'](_0x342b59('material',_0x11ffd0['materials'][_0x4ca8cd],_0x4ca8cd));const _0x517630=[];for(let _0x56e321=0x575+0x6*-0x369+0xf01;_0x56e321<_0x11ffd0['animations']['length'];++_0x56e321)_0x517630['push'](_0x342b59('animation',_0x11ffd0['animations'][_0x56e321],_0x56e321));this['data']=_0x11ffd0,this['_model']=null,this['_assetName']=_0x333825['name'],this['_assets']=_0x316928,this['_defaultMa'+'terial']=_0x4a79f0,this['renders']=_0x2722ad,this['materials']=_0x35e6f3,this['textures']=_0x11ffd0['textures'],this['animations']=_0x517630;}get['model'](){if(!this['_model']){const _0x4a5e9e=yr['createMode'+'l'](this['data'],this['_defaultMa'+'terial']),_0x364a03=yr['createAsse'+'t'](this['_assetName'],'model',_0x4a5e9e,0xd15*-0x2+-0x2033*0x1+0x3a5d);this['_assets']['add'](_0x364a03),this['_model']=_0x364a03;}return this['_model'];}static['createAsse'+'t'](_0x959383,_0x1229e2,_0x139077,_0x340546){const _0x167d1c=new pe(_0x959383+'/'+_0x1229e2+'/'+_0x340546,_0x1229e2,{'url':''});return _0x167d1c['resource']=_0x139077,_0x167d1c['loaded']=!(0x1f*-0x21+0x21c8+-0x5*0x5f5),_0x167d1c;}['instantiat'+'eModelEnti'+'ty'](_0x560cef){const _0x3daa42=new lt(void(-0xb*-0x34b+-0x18f7+-0x1*0xb42),this['_assets']['_loader']['_app']);return _0x3daa42['addCompone'+'nt']('model',Object['assign']({'type':'asset','asset':this['model']},_0x560cef)),_0x3daa42;}['instantiat'+'eRenderEnt'+'ity'](_0x191dd0){const _0x1f145b=this['_defaultMa'+'terial'],_0x25ca03=[],_0x443e96=function(_0x1b2cad,_0x9ce05c,_0x5d59d0,_0x43f0ea,_0x5634ae,_0x155bb1,_0x3e31a9,_0x58336f){const _0x2267ea=_0x5634ae[_0x5d59d0['id']],_0x32fe5e=_0x2267ea===void(-0x43f*0x3+0x425*0x7+-0x1046)?_0x1f145b:_0x43f0ea[_0x2267ea],_0x24fcaf=new He(_0x5d59d0,_0x32fe5e);_0x5d59d0['morph']&&(_0x24fcaf['morphInsta'+'nce']=new xa(_0x5d59d0['morph'])),_0x3e31a9['hasOwnProp'+'erty']('skin')&&_0x25ca03['push']({'meshInstance':_0x24fcaf,'rootBone':_0x1b2cad,'entity':_0x9ce05c});const _0x25e58d=_0x58336f['get'](_0x3e31a9);if(_0x25e58d){const _0x34c5b4=_0x25e58d['matrices'],_0x53f967=kt['getDefault'+'Instancing'+'Format'](_0x5d59d0['device']),_0x5b3e83=new Is(_0x5d59d0['device'],_0x53f967,_0x34c5b4['length']/(0xaab+0x20*0xbf+0x5b*-0x61),{'data':_0x34c5b4});_0x24fcaf['setInstanc'+'ing'](_0x5b3e83),_0x24fcaf['instancing'+'Data']['_destroyVe'+'rtexBuffer']=!(-0x1*0x1e77+0x1304*0x1+0x3*0x3d1);}return _0x24fcaf;},_0x4982f3=(_0x4fcd16,_0x108b45,_0x47e848)=>{const _0x5c6e1a=new lt(void(-0x1*-0xef9+0x2c8+0x2d*-0x65),this['_assets']['_loader']['_app']);_0x108b45['_cloneInte'+'rnal'](_0x5c6e1a),_0x4fcd16||(_0x4fcd16=_0x5c6e1a);let _0x5e9bb7=null,_0x1a44d8=null;for(let _0x901421=-0x1*-0x71b+-0x1234+-0x3*-0x3b3;_0x901421<_0x47e848['nodes']['length'];_0x901421++)if(_0x47e848['nodes'][_0x901421]===_0x108b45){const _0x30c210=_0x47e848['gltf']['nodes'][_0x901421];if(_0x30c210['hasOwnProp'+'erty']('mesh')){const _0x32af5f=_0x47e848['renders'][_0x30c210['mesh']]['meshes'];_0x1a44d8=this['renders'][_0x30c210['mesh']];for(let _0x1942a8=-0x2d6+-0x38a+0x660;_0x1942a8<_0x32af5f['length'];_0x1942a8++){const _0x3ce028=_0x32af5f[_0x1942a8];if(_0x3ce028){const _0x4bc6ac=_0x443e96(_0x4fcd16,_0x5c6e1a,_0x3ce028,_0x47e848['materials'],_0x47e848['meshDefaul'+'tMaterials'],_0x47e848['skins'],_0x30c210,_0x47e848['nodeInstan'+'cingMap']);_0x5e9bb7||(_0x5e9bb7=[]),_0x5e9bb7['push'](_0x4bc6ac);}}}if(_0x47e848['lights']){const _0x2a17e7=_0x47e848['lights']['get'](_0x30c210);_0x2a17e7&&_0x5c6e1a['addChild'](_0x2a17e7['clone']());}if(_0x47e848['cameras']){const _0x53369b=_0x47e848['cameras']['get'](_0x30c210);_0x53369b&&_0x53369b['camera']['system']['cloneCompo'+'nent'](_0x53369b,_0x5c6e1a);}}_0x5e9bb7&&(_0x5c6e1a['addCompone'+'nt']('render',Object['assign']({'type':'asset','meshInstances':_0x5e9bb7},_0x191dd0)),_0x5c6e1a['render']['assignAsse'+'t'](_0x1a44d8));const _0x1e45e5=_0x108b45['children'];for(let _0x405c78=0x1*0x1a7b+0xf*-0x101+-0xb6c;_0x405c78<_0x1e45e5['length'];_0x405c78++){const _0x247b41=_0x4982f3(_0x4fcd16,_0x1e45e5[_0x405c78],_0x47e848);_0x5c6e1a['addChild'](_0x247b41);}return _0x5c6e1a;},_0x4f663e=[];for(const _0x2d764e of this['data']['scenes'])_0x4f663e['push'](_0x4982f3(null,_0x2d764e,this['data']));return _0x25ca03['forEach'](_0x4355ba=>{_0x4355ba['meshInstan'+'ce']['skinInstan'+'ce']=_l['createCach'+'edSkinInst'+'ance'](_0x4355ba['meshInstan'+'ce']['mesh']['skin'],_0x4355ba['rootBone'],_0x4355ba['entity']),_0x4355ba['meshInstan'+'ce']['node']['render']['rootBone']=_0x4355ba['rootBone'];}),yr['createScen'+'eHierarchy'](_0x4f663e,lt);}['getMateria'+'lVariants'](){return this['data']['variants']?Object['keys'](this['data']['variants']):[];}['applyMater'+'ialVariant'](_0x35785d,_0x3db07d){const _0x4828c1=_0x3db07d?this['data']['variants'][_0x3db07d]:null;if(_0x4828c1===void(0x230b*0x1+-0x2225+0xa*-0x17)){w['warn']('No\x20variant'+'\x20named\x20'+_0x3db07d+('\x20exists\x20in'+'\x20resource'));return;}const _0xbe7b86=_0x35785d['findCompon'+'ents']('render');for(let _0x190dce=-0x21dc+0xd70+-0x146c*-0x1;_0x190dce<_0xbe7b86['length'];_0x190dce++){const _0x243a3a=_0xbe7b86[_0x190dce];this['_applyMate'+'rialVarian'+'t'](_0x4828c1,_0x243a3a['meshInstan'+'ces']);}}['applyMater'+'ialVariant'+'Instances'](_0x1121cc,_0xefb852){const _0x58d05b=_0xefb852?this['data']['variants'][_0xefb852]:null;if(_0x58d05b===void(0x7d8+-0x18e*0xa+0x2*0x3da)){w['warn']('No\x20variant'+'\x20named\x20'+_0xefb852+('\x20exists\x20in'+'\x20resource'));return;}this['_applyMate'+'rialVarian'+'t'](_0x58d05b,_0x1121cc);}['_applyMate'+'rialVarian'+'t'](_0xd55ed5,_0xb89b){_0xb89b['forEach'](_0xaf14f8=>{if(_0xd55ed5===null)_0xaf14f8['material']=this['_defaultMa'+'terial'];else{const _0x2705c5=this['data']['meshVarian'+'ts'][_0xaf14f8['mesh']['id']];_0x2705c5&&(_0xaf14f8['material']=this['data']['materials'][_0x2705c5[_0xd55ed5]]);}w['assert'](_0xaf14f8['material']);});}static['createScen'+'eHierarchy'](_0x1fdb06,_0x25f46b){let _0xea757c=null;if(_0x1fdb06['length']===0x526*0x2+0xed7+-0x1922)_0xea757c=_0x1fdb06[0x125e*-0x1+-0x1b9f+0x1*0x2dfd];else{_0xea757c=new _0x25f46b('SceneGroup');for(const _0x2ee2c4 of _0x1fdb06)_0xea757c['addChild'](_0x2ee2c4);}return _0xea757c;}static['createMode'+'l'](_0x5de991,_0x187ca8){const _0x464345=function(_0x2e531e,_0x7d583e,_0x5d736d,_0x9a7a83,_0x5f28da,_0x1f5e97,_0x519347){const _0x5c690e=_0x5de991['meshDefaul'+'tMaterials'][_0x7d583e['id']],_0x1239d0=_0x5c690e===void(-0x2*-0x44+0x19a+-0x2a*0xd)?_0x187ca8:_0x5f28da[_0x5c690e],_0x49aafa=new He(_0x7d583e,_0x1239d0,_0x1f5e97);if(_0x7d583e['morph']){const _0x483951=new xa(_0x7d583e['morph']);_0x49aafa['morphInsta'+'nce']=_0x483951,_0x2e531e['morphInsta'+'nces']['push'](_0x483951);}if(_0x519347['hasOwnProp'+'erty']('skin')){const _0x54bacd=_0x519347['skin'],_0x40764d=_0x5d736d[_0x54bacd];_0x7d583e['skin']=_0x40764d;const _0x4f23fe=_0x9a7a83[_0x54bacd];_0x49aafa['skinInstan'+'ce']=_0x4f23fe,_0x2e531e['skinInstan'+'ces']['push'](_0x4f23fe);}_0x2e531e['meshInstan'+'ces']['push'](_0x49aafa);},_0x21f97d=new sr(),_0x3aea9a=[];for(const _0x475692 of _0x5de991['skins']){const _0x3e485f=new Ol(_0x475692);_0x3e485f['bones']=_0x475692['bones'],_0x3aea9a['push'](_0x3e485f);}_0x21f97d['graph']=yr['createScen'+'eHierarchy'](_0x5de991['scenes'],Ie);for(let _0x4714e0=-0x17bc+0x25a2+-0x2*0x6f3;_0x4714e0<_0x5de991['nodes']['length'];_0x4714e0++){const _0x39d595=_0x5de991['nodes'][_0x4714e0];if(_0x39d595['root']===_0x21f97d['graph']){const _0x14b8e1=_0x5de991['gltf']['nodes'][_0x4714e0];if(_0x14b8e1['hasOwnProp'+'erty']('mesh')){const _0x156e0f=_0x5de991['renders'][_0x14b8e1['mesh']]['meshes'];for(let _0x3bafae=-0x1532+-0x55*0x3b+0x1*0x28c9;_0x3bafae<_0x156e0f['length'];_0x3bafae++){const _0x1600b2=_0x156e0f[_0x3bafae];_0x1600b2&&_0x464345(_0x21f97d,_0x1600b2,_0x5de991['skins'],_0x3aea9a,_0x5de991['materials'],_0x39d595,_0x14b8e1);}}}}return _0x21f97d;}['destroy'](){const _0xaef1bd=this['_assets'],_0x8b961f=function(_0x1767fc){_0xaef1bd['remove'](_0x1767fc),_0x1767fc['unload']();},_0x4df887=function(_0x3cabb2){_0x3cabb2['forEach'](_0x3b3dc9=>{_0x8b961f(_0x3b3dc9);});};this['animations']&&(_0x4df887(this['animations']),this['animations']=null),this['textures']&&(_0x4df887(this['textures']),this['textures']=null),this['materials']&&(_0x4df887(this['materials']),this['materials']=null),this['renders']&&(_0x4df887(this['renders']),this['renders']=null),this['_model']&&(_0x8b961f(this['_model']),this['_model']=null),this['data']=null,this['assets']=null;}}class KN{constructor(_0x30c135,_0x5295e8,_0x3c272a){this['_device']=_0x30c135,this['_assets']=_0x5295e8,this['_defaultMa'+'terial']=kh['createDefa'+'ultMateria'+'l'](),this['maxRetries']=_0x3c272a;}['_getUrlWit'+'houtParams'](_0x4c3241){return _0x4c3241['indexOf']('?')>=-0x3*0x899+-0x83*-0x1f+0x29*0x3e?_0x4c3241['split']('?')[0xe15+0x5*-0x526+-0x5*-0x255]:_0x4c3241;}['load'](_0x29c36b,_0x24541e,_0x38fba6){pe['fetchArray'+'Buffer'](_0x29c36b['load'],(_0x53c96d,_0x2aa3c4)=>{_0x53c96d?_0x24541e(_0x53c96d):kh['parse'](this['_getUrlWit'+'houtParams'](_0x29c36b['original']),xe['extractPat'+'h'](_0x29c36b['load']),_0x2aa3c4,this['_device'],_0x38fba6['registry'],_0x38fba6['options'],(_0x4cb8a8,_0xaa255)=>{_0x4cb8a8?_0x24541e(_0x4cb8a8):_0x24541e(null,new yr(_0xaa255,_0x38fba6,this['_assets'],this['_defaultMa'+'terial']));});},_0x38fba6,this['maxRetries']);}['open'](_0x387d35,_0x59d107,_0x389ef8){return _0x59d107;}['patch'](_0x3068e3,_0x274fe1){}}class ZN extends Qe{constructor(_0x357ac2){super(_0x357ac2,'container'),this['glbContain'+'erParser']=new KN(_0x357ac2['graphicsDe'+'vice'],_0x357ac2['assets'],0x2453+0x652*0x3+0x1*-0x3749),this['parsers']={};}set['maxRetries'](_0x513549){this['glbContain'+'erParser']['maxRetries']=_0x513549;for(const _0x11d9c2 in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x11d9c2)&&(this['parsers'][_0x11d9c2]['maxRetries']=_0x513549);}get['maxRetries'](){return this['glbContain'+'erParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x576c11){return _0x576c11['indexOf']('?')>=0x1927+0x133c*-0x2+-0x1e7*-0x7?_0x576c11['split']('?')[0x1*0x11e5+0x10*0x10f+0x25*-0xf1]:_0x576c11;}['_getParser'](_0x2384bc){const _0x4f645f=_0x2384bc?xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x2384bc))['toLowerCas'+'e']()['replace']('.',''):null;return this['parsers'][_0x4f645f]||this['glbContain'+'erParser'];}['load'](_0x2f8bcb,_0x22c4d1,_0x94efd4){typeof _0x2f8bcb=='string'&&(_0x2f8bcb={'load':_0x2f8bcb,'original':_0x2f8bcb}),this['_getParser'](_0x2f8bcb['original'])['load'](_0x2f8bcb,_0x22c4d1,_0x94efd4);}['open'](_0x8f16c1,_0x481643,_0x586337){return this['_getParser'](_0x8f16c1)['open'](_0x8f16c1,_0x481643,_0x586337);}}class QN extends Qe{constructor(_0x452bc0){super(_0x452bc0,'css'),h(this,'decoder',null);}['load'](_0x2845e7,_0x53c5d3){typeof _0x2845e7=='string'&&(_0x2845e7={'load':_0x2845e7,'original':_0x2845e7}),ot['get'](_0x2845e7['load'],{'retry':this['maxRetries']>0x3*-0xc2f+-0x1363+0x166*0x28,'maxRetries':this['maxRetries']},(_0x7ee125,_0x1bb12e)=>{_0x7ee125?_0x53c5d3('Error\x20load'+'ing\x20css\x20re'+'source:\x20'+_0x2845e7['original']+'\x20['+_0x7ee125+']'):_0x53c5d3(null,_0x1bb12e);});}['openBinary'](_0x8adea5){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x8adea5);}}class JN extends Qe{constructor(_0x14bf1c){super(_0x14bf1c,'cubemap'),this['_device']=_0x14bf1c['graphicsDe'+'vice'],this['_registry']=_0x14bf1c['assets'],this['_loader']=_0x14bf1c['loader'];}['load'](_0x1cf122,_0x3ab125,_0x2c28d4){this['loadAssets'](_0x2c28d4,_0x3ab125);}['open'](_0x539a6f,_0x2fb7fc,_0x124030){return _0x124030?_0x124030['resource']:null;}['patch'](_0x337c00,_0x332d78){this['loadAssets'](_0x337c00,(_0x43b16e,_0x3ebc4a)=>{_0x43b16e&&(_0x332d78['fire']('error',_0x337c00),_0x332d78['fire']('error:'+_0x337c00['id'],_0x43b16e,_0x337c00),_0x337c00['fire']('error',_0x337c00));});}['getAssetId'+'s'](_0x299cb3){const _0x38d713=[];if(_0x38d713[-0x26e5+-0x9dc+0x30c1]=_0x299cb3['file'],(_0x299cb3['loadFaces']||!_0x299cb3['file'])&&_0x299cb3['data']&&_0x299cb3['data']['textures']){for(let _0x59484d=0x24fe+0xdb8*0x1+-0x2*0x195b;_0x59484d<-0x1*0x14bf+0x27*0x77+0x2a4;++_0x59484d)_0x38d713[_0x59484d+(-0x1d0f+-0x15ae+0x195f*0x2)]=_0x299cb3['data']['textures'][_0x59484d];}else _0x38d713[0x16b4+-0x17a2+0xef]=_0x38d713[-0x1*0x1af2+-0x226f+0x8c5*0x7]=_0x38d713[0x16d8+0xb*-0x201+-0x65*0x2]=_0x38d713[-0x55b+0x16fb+-0x1*0x119c]=_0x38d713[0x1*0x1b43+-0x1460*0x1+-0x6de]=_0x38d713[0x838+0x953+-0x5d7*0x3]=null;return _0x38d713;}['compareAss'+'etIds'](_0x331007,_0x4a0bd8){return _0x331007&&_0x4a0bd8?parseInt(_0x331007,-0x22e2*0x1+-0xe31+0x21*0x17d)===_0x331007||typeof _0x331007=='string'?_0x331007===_0x4a0bd8:_0x331007['url']===_0x4a0bd8['url']:_0x331007!==null==(_0x4a0bd8!==null);}['update'](_0x2a9681,_0x4e717e,_0x45dbfd){const _0x2a27a3=_0x2a9681['data']||{},_0x51f33f=_0x2a9681['_handlerSt'+'ate']['assets'],_0x31a557=_0x2a9681['_resources'];let _0x5af06d,_0x351482,_0x2b8fb1;const _0x104b18=[null,null,null,null,null,null,null],_0x129147=function(){return _0x2a27a3['hasOwnProp'+'erty']('type')?_0x2a27a3['type']:_0x2a27a3['hasOwnProp'+'erty']('rgbm')?_0x2a27a3['rgbm']?Zi:Ds:null;};if(!_0x2a9681['loaded']||_0x45dbfd[-0x5*-0x101+-0x7*-0x511+-0x287c]!==_0x51f33f[0x5*-0x2cb+-0xe1e+-0x1*-0x1c15]){if(_0x45dbfd[0x1*-0x2081+0x1266+0x9d*0x17]){if(_0x5af06d=_0x45dbfd[0x1*0x26f3+-0x559*0x1+-0x219a]['resource'],_0x5af06d['cubemap']){for(_0x2b8fb1=0xc6e*0x1+-0x1e0d+0x119f;_0x2b8fb1<0x7*-0x41b+0x1f1c+-0x1*0x259;++_0x2b8fb1)_0x104b18[_0x2b8fb1+(0x1*0x1105+-0x2092+-0xb5*-0x16)]=new _e(this['_device'],{'name':_0x2a9681['name']+('_prelitCub'+'emap')+(_0x5af06d['width']>>_0x2b8fb1),'cubemap':!(-0x195*0x11+-0x18d7+-0xac*-0x4d),'type':_0x129147()||_0x5af06d['type'],'width':_0x5af06d['width']>>_0x2b8fb1,'height':_0x5af06d['height']>>_0x2b8fb1,'format':_0x5af06d['format'],'levels':[_0x5af06d['_levels'][_0x2b8fb1]],'addressU':ue,'addressV':ue,'mipmaps':_0x2b8fb1===0x25*0x3+-0x15*0x59+0x6de});}else _0x104b18[-0x1a3*0xf+0x5*0x171+0x1159]=_0x5af06d;}}else _0x104b18[-0xde6+-0x1908+0x26ef]=_0x31a557[-0xa93*-0x1+-0x9d0+-0xc2]||null,_0x104b18[-0xfd9+0x1*-0xc6d+0x1c48]=_0x31a557[0x3*0x19a+-0x139c+0xed0]||null,_0x104b18[-0x12e8+0x7*0x131+0x1*0xa94]=_0x31a557[-0x580*-0x1+0x20d7+-0x2654]||null,_0x104b18[0x7*-0xfb+-0x321+-0x7*-0x16e]=_0x31a557[0x92b*-0x1+-0x2579+0x2ea8]||null,_0x104b18[-0x45*0x59+-0x1*0x12c4+0x1b6*0x19]=_0x31a557[0x9f9+-0xee4+0x4f0]||null,_0x104b18[0xd*-0x78+-0x266e*-0x1+-0x2050]=_0x31a557[-0x3*-0x449+0xebb+-0x1b90]||null;const _0x128141=_0x45dbfd['slice'](-0x49*0x3+-0x1187+0x1263);if(!_0x2a9681['loaded']||!this['cmpArrays'](_0x128141,_0x51f33f['slice'](-0x144e+0xb*-0x1d+0x158e))){if(_0x128141['indexOf'](null)===-(0x1*0x1f19+0x421*-0x7+-0x231)){const _0x432374=_0x128141['map'](_0x436fc0=>_0x436fc0['resource']),_0x205006=[];for(_0x351482=0x3d1*0x5+-0x1*0x15ab+0x2*0x14b;_0x351482<_0x432374[-0xa35+-0x1*0x632+0x1067]['_levels']['length'];++_0x351482)_0x205006['push'](_0x432374['map'](_0x487573=>_0x487573['_levels'][_0x351482]));const _0x5dde5c=_0x432374[0xd69*-0x1+-0x9*-0x267+-0x836*0x1]['format'],_0x1b929f=new _e(this['_device'],{'name':_0x2a9681['name']+'_faces','cubemap':!(0x6ce+-0x3*-0x1f1+0x1*-0xca1),'type':_0x129147()||_0x432374[0x8c*-0x34+0x1615+0x65b]['type'],'width':_0x432374[0x4c4*0x7+0x1d41*-0x1+0x1*-0x41b]['width'],'height':_0x432374[0x7*-0x67+0x208b*-0x1+-0x4*-0x8d7]['height'],'format':_0x5dde5c===Cr?Ne:_0x5dde5c,'mipmaps':_0x2a27a3['mipmaps']??!(0x24e*-0x4+0x7f6+0x142),'levels':_0x205006,'minFilter':_0x2a27a3['hasOwnProp'+'erty']('minFilter')?_0x2a27a3['minFilter']:_0x432374[-0x60*0xa+-0xbe1*-0x3+-0x1fe3*0x1]['minFilter'],'magFilter':_0x2a27a3['hasOwnProp'+'erty']('magFilter')?_0x2a27a3['magFilter']:_0x432374[0xf2*-0x26+-0x16*0xf3+-0x1c67*-0x2]['magFilter'],'anisotropy':_0x2a27a3['hasOwnProp'+'erty']('anisotropy')?_0x2a27a3['anisotropy']:-0x1dc*-0x1+-0x270e*0x1+-0x2533*-0x1,'addressU':ue,'addressV':ue});_0x104b18[0x1ff9*-0x1+0x266d+-0x674]=_0x1b929f;}}else _0x104b18[0x6*-0x451+-0x1432+-0x8*-0x5c3]=_0x31a557[0x2*0xc6a+0xec*-0x5+0x4*-0x50e]||null;if(!this['cmpArrays'](_0x104b18,_0x31a557)){for(_0x2a9681['resources']=_0x104b18,_0x2a9681['_handlerSt'+'ate']['assetIds']=_0x4e717e,_0x2a9681['_handlerSt'+'ate']['assets']=_0x45dbfd,_0x2b8fb1=0x5be+-0x4d*-0x80+0xe*-0x329;_0x2b8fb1<_0x31a557['length'];++_0x2b8fb1)_0x31a557[_0x2b8fb1]!==null&&_0x104b18['indexOf'](_0x31a557[_0x2b8fb1])===-(-0x1*0x1fa+0x1940+-0x1745)&&_0x31a557[_0x2b8fb1]['destroy']();}for(_0x2b8fb1=-0x26*-0x1f+0x2661+-0x2afb;_0x2b8fb1<_0x51f33f['length'];++_0x2b8fb1)_0x51f33f[_0x2b8fb1]!==null&&_0x45dbfd['indexOf'](_0x51f33f[_0x2b8fb1])===-(-0x96e+-0x1a44+-0x1e1*-0x13)&&_0x51f33f[_0x2b8fb1]['unload']();}['cmpArrays'](_0x4f34ef,_0x118278){if(_0x4f34ef['length']!==_0x118278['length'])return!(-0x6*0x2eb+0x847+0x6*0x18a);for(let _0x373e39=0x2234+0x1907+-0x3b3b;_0x373e39<_0x4f34ef['length'];++_0x373e39)if(_0x4f34ef[_0x373e39]!==_0x118278[_0x373e39])return!(0xa89+-0x13+-0xa75);return!(-0x2293+0x13ec+0xb*0x155);}['resolveId'](_0x5bf81c){const _0xb26726=parseInt(_0x5bf81c,0x1532+0xaa3*0x1+-0x1fcb);return _0xb26726===_0x5bf81c||_0xb26726['toString']()===_0x5bf81c?_0xb26726:_0x5bf81c;}['loadAssets'](_0x4760ed,_0x36f41d){_0x4760ed['hasOwnProp'+'erty']('_handlerSt'+'ate')||(_0x4760ed['_handlerSt'+'ate']={'assetIds':[null,null,null,null,null,null,null],'assets':[null,null,null,null,null,null,null]});const _0x3152fc=this,_0x49b84a=_0x3152fc['getAssetId'+'s'](_0x4760ed),_0x267177=[null,null,null,null,null,null,null],_0x26916c=_0x4760ed['_handlerSt'+'ate']['assetIds'],_0x30ad12=_0x4760ed['_handlerSt'+'ate']['assets'],_0x37523e=_0x3152fc['_registry'];let _0x13b13f=-0xdd*-0x29+0x1de*-0x9+-0x2c*0x6c;const _0x2a849e=function(_0x329999,_0x7111a){_0x267177[_0x329999]=_0x7111a,_0x13b13f--,_0x13b13f===-0x2fa+0x1406*-0x1+0x1700&&(_0x3152fc['update'](_0x4760ed,_0x49b84a,_0x267177),_0x36f41d(null,_0x4760ed['resources']));},_0x3ccb20=function(_0x5f5293,_0x4b2922,_0x2ecfbc){_0x36f41d(_0x4b2922);},_0x22bf85=function(_0x2517b5,_0x8af69a){_0x8af69a['loaded']?_0x2a849e(_0x2517b5,_0x8af69a):(_0x37523e['once']('load:'+_0x8af69a['id'],_0x2a849e['bind'](_0x3152fc,_0x2517b5)),_0x37523e['once']('error:'+_0x8af69a['id'],_0x3ccb20['bind'](_0x3152fc,_0x2517b5)),_0x8af69a['loading']||_0x37523e['load'](_0x8af69a));};let _0x3bde2d;for(let _0x3602e9=-0x833+-0x120d+0x15*0x140;_0x3602e9<-0x19d9*-0x1+-0x1173*0x1+-0x85f;++_0x3602e9){const _0x2529dd=this['resolveId'](_0x49b84a[_0x3602e9]);if(!_0x2529dd)_0x2a849e(_0x3602e9,null);else{if(_0x3152fc['compareAss'+'etIds'](_0x2529dd,_0x26916c[_0x3602e9]))_0x22bf85(_0x3602e9,_0x30ad12[_0x3602e9]);else{if(parseInt(_0x2529dd,0x6*0x513+-0x238b+0x523)===_0x2529dd)_0x3bde2d=_0x37523e['get'](_0x2529dd),_0x3bde2d?_0x22bf85(_0x3602e9,_0x3bde2d):setTimeout(((_0x14cc0f,_0x32e80b)=>{const _0x18206f=_0x37523e['get'](_0x32e80b);_0x18206f?_0x22bf85(_0x14cc0f,_0x18206f):_0x3ccb20(_0x14cc0f,'failed\x20to\x20'+'find\x20depen'+'dent\x20cubem'+'ap\x20asset='+_0x32e80b);})['bind'](null,_0x3602e9,_0x2529dd));else{const _0x1f4634=typeof _0x2529dd=='string'?{'url':_0x2529dd,'filename':_0x2529dd}:_0x2529dd,_0x301014=_0x1f4634['url']['search']('.dds')===-(0x21d4+-0xb46+-0x168d)?{'type':'rgbp','addressu':'clamp','addressv':'clamp','mipmaps':!(-0x92b*-0x1+-0x1140+0x816)}:null;_0x3bde2d=new pe(_0x4760ed['name']+'_part_'+_0x3602e9,'texture',_0x1f4634,_0x301014),_0x37523e['add'](_0x3bde2d),_0x22bf85(_0x3602e9,_0x3bde2d);}}}}}}class ek extends Qe{constructor(_0x367b7c){super(_0x367b7c,'folder');}['load'](_0x49de49,_0x5dc82d){_0x5dc82d(null,null);}}class yS{constructor(_0x1db4ee,_0x1d54db){this['type']=_0x1d54db&&_0x1d54db['type']||Rh,this['em']=-0xa4e+-0x14*-0x1d0+-0xe5*0x1d,this['textures']=_0x1db4ee,this['intensity']=-0x832*-0x1+0xf1*0x1d+-0x237f,this['_data']=null,this['data']=_0x1d54db;}set['data'](_0x11d63a){if(this['_data']=_0x11d63a,!!_0x11d63a&&(this['_data']['intensity']!==void(0xf*-0x1b6+0x1*0x1785+0x225)&&(this['intensity']=this['_data']['intensity']),this['_data']['info']||(this['_data']['info']={}),(!this['_data']['version']||this['_data']['version']<-0xb*0x38b+0xaa9+0x1c52)&&(this['_data']['info']['maps']=[{'width':this['_data']['info']['width'],'height':this['_data']['info']['height']}],this['_data']['chars']))){for(const _0x277915 in this['_data']['chars'])this['_data']['chars'][_0x277915]['map']=0x6b7+0x5b0+0x5*-0x27b;}}get['data'](){return this['_data'];}}function Cf(_0x52f645){return _0x52f645['version']<0x2f9*-0x9+-0xffe+0x2*0x1561&&(_0x52f645['version']<-0x71b+-0x207*-0x1+-0x7*-0xba&&(_0x52f645['info']['maps']=_0x52f645['info']['maps']||[{'width':_0x52f645['info']['width'],'height':_0x52f645['info']['height']}]),_0x52f645['chars']=Object['keys'](_0x52f645['chars']||{})['reduce']((_0x756fdf,_0x429ddc)=>{const _0x13dc86=_0x52f645['chars'][_0x429ddc],_0x59b042=_0x13dc86['letter']!==void(-0x951+-0x4*0x53b+-0x1e3d*-0x1)?_0x13dc86['letter']:Hc['fromCodePo'+'int'](_0x429ddc);return _0x52f645['version']<0x1*-0x11f5+-0x47*0x7b+-0x194*-0x21&&(_0x13dc86['map']=_0x13dc86['map']||0xad7+0x44c+-0xf23),_0x756fdf[_0x59b042]=_0x13dc86,_0x756fdf;},{}),_0x52f645['version']=0x1abd+-0x16a*-0xb+-0x2a48),_0x52f645;}class tk extends Qe{constructor(_0x3b3945){super(_0x3b3945,'font'),this['_loader']=_0x3b3945['loader'],this['maxRetries']=-0x1*0x160c+-0x6b*0x7+-0x18f9*-0x1;}['load'](_0x752313,_0x3b0a5f,_0x49ec17){typeof _0x752313=='string'&&(_0x752313={'load':_0x752313,'original':_0x752313});const _0x8cfecf=this;xe['getExtensi'+'on'](_0x752313['original'])==='.json'?ot['get'](_0x752313['load'],{'retry':this['maxRetries']>0x19*0x76+0x993+-0x1519,'maxRetries':this['maxRetries']},(_0x43322d,_0x4a4862)=>{if(_0x43322d)_0x3b0a5f('Error\x20load'+'ing\x20font\x20r'+'esource:\x20'+_0x752313['original']+'\x20['+_0x43322d+']');else{const _0x5c0b4d=Cf(_0x4a4862);_0x8cfecf['_loadTextu'+'res'](_0x752313['load']['replace']('.json','.png'),_0x5c0b4d,(_0xc981a7,_0x4c08ab)=>{_0xc981a7?_0x3b0a5f(_0xc981a7):_0x3b0a5f(null,{'data':_0x5c0b4d,'textures':_0x4c08ab});});}}):(_0x49ec17&&_0x49ec17['data']&&(_0x49ec17['data']=Cf(_0x49ec17['data'])),this['_loadTextu'+'res'](_0x752313['load'],_0x49ec17&&_0x49ec17['data'],_0x3b0a5f));}['_loadTextu'+'res'](_0x5edae6,_0x84a2ad,_0x13b147){const _0x2b09f8=_0x84a2ad['info']['maps']['length'];let _0x5adfb7=-0x17f0*0x1+-0x20a8+0x3898,_0x1ed6d4=null;const _0x3a9e26=new Array(_0x2b09f8),_0x107995=this['_loader'],_0x132de9=function(_0x237c0a){const _0x4f515c=function(_0x3a66d5,_0x438809){if(!_0x1ed6d4){if(_0x3a66d5){_0x1ed6d4=_0x3a66d5,_0x13b147(_0x3a66d5);return;}_0x438809['upload'](),_0x3a9e26[_0x237c0a]=_0x438809,_0x5adfb7++,_0x5adfb7===_0x2b09f8&&_0x13b147(null,_0x3a9e26);}};_0x237c0a===-0xb*0x165+-0x18*-0x2+-0x3*-0x50d?_0x107995['load'](_0x5edae6,'texture',_0x4f515c):_0x107995['load'](_0x5edae6['replace']('.png',_0x237c0a+'.png'),'texture',_0x4f515c);};for(let _0x5be82a=0xa54+-0x1*0x20b5+0x1*0x1661;_0x5be82a<_0x2b09f8;_0x5be82a++)_0x132de9(_0x5be82a);}['open'](_0x4f74ad,_0x48bf4d,_0x185113){let _0x53b787;return _0x48bf4d['textures']?_0x53b787=new yS(_0x48bf4d['textures'],_0x48bf4d['data']):_0x53b787=new yS(_0x48bf4d,null),_0x53b787;}['patch'](_0x26bd1f,_0x5718a4){const _0x36e1ba=_0x26bd1f['resource'];!_0x36e1ba['data']&&_0x26bd1f['data']?_0x36e1ba['data']=_0x26bd1f['data']:!_0x26bd1f['data']&&_0x36e1ba['data']&&(_0x26bd1f['data']=_0x36e1ba['data']),_0x26bd1f['data']&&(_0x26bd1f['data']=Cf(_0x26bd1f['data']));}}async function sk(){const _0x35c1b4=0xdff+-0x4*0x38f+0x3d+0.28209479177387814;class _0x5a2a36{constructor(_0x2cfd1e,_0x36f181,_0x231b1a){this['x']=_0x2cfd1e,this['y']=_0x36f181,this['z']=_0x231b1a;}}class _0x38f5cd{constructor(_0x809ca4,_0x314902,_0x5065ef,_0x4de483){this['x']=_0x809ca4,this['y']=_0x314902,this['z']=_0x5065ef,this['w']=_0x4de483;}}class _0x4d4077{constructor(_0x4c46a0,_0x330455,_0xa38f28,_0x15873f){this['x']=_0x4c46a0,this['y']=_0x330455,this['z']=_0xa38f28,this['w']=_0x15873f;}['set'](_0x51718a,_0x2906ac,_0x2261d5,_0x4d4696){this['x']=_0x51718a,this['y']=_0x2906ac,this['z']=_0x2261d5,this['w']=_0x4d4696;}}class _0x5d8b69{constructor(_0x11fe28,_0x4198d1,_0x54746d,_0x279163,_0x19cdb6,_0x15b514,_0x318676,_0x331e6e,_0x2bfc8d,_0x522a3e,_0x3f3cbb,_0x4d2ac3,_0x2efc64,_0x5c409b){const _0x5307a5=(_0x18942a,_0xcad137)=>{const _0x4169a7=(0x25*-0x1+-0x21d2+0x21f8<<_0xcad137)-(0x16b5*0x1+-0x7*0x3bf+0x385);return(_0x18942a&_0x4169a7)/_0x4169a7;},_0xf7ada=(_0x2ac5e4,_0x283710)=>{_0x2ac5e4['x']=_0x5307a5(_0x283710>>>-0x3*0x617+0x1603+-0x1*0x3a9,-0x1fa*-0xb+0x4b7+-0x1a6a),_0x2ac5e4['y']=_0x5307a5(_0x283710>>>0x55+-0x1ca5+-0x40d*-0x7,-0x1*-0xaf3+0x2527+0x1*-0x3010),_0x2ac5e4['z']=_0x5307a5(_0x283710,-0xbfa+0x7*0x18b+0x18*0xd);},_0xf98ad8=(_0x4343dd,_0x2ca097)=>{_0x4343dd['x']=_0x5307a5(_0x2ca097>>>0x1b4d+0x45d*0x7+-0x160*0x2a,-0x5be+0x91+0x535),_0x4343dd['y']=_0x5307a5(_0x2ca097>>>0x1473+-0x1*-0xa1f+0x1e82*-0x1,0x54f+0x1e57+0x2*-0x11cf),_0x4343dd['z']=_0x5307a5(_0x2ca097>>>0xdcd*-0x1+0x2095+-0x60*0x32,0x1*0xaf7+-0x4ee+-0x601),_0x4343dd['w']=_0x5307a5(_0x2ca097,0xd9e+0x1d*0xe8+-0x2*0x13ef);},_0x56828c=(_0x523b9e,_0x3292a6)=>{const _0x315400=(0x2486+0x1*0x1e1a+-0x429f)/(Math['sqrt'](0x20ef*0x1+0xb5*-0x1+-0x2038*0x1)*(-0x214a+0xe74+0x12d6+0.5)),_0xefa1ab=(_0x5307a5(_0x3292a6>>>0x74+0x37e+-0x3de,0x1222+-0x4e2+-0xd36)-(-0x1*0x42f+0xf27+-0x2*0x57c+0.5))*_0x315400,_0x490cfc=(_0x5307a5(_0x3292a6>>>-0x1f01+-0xfea+-0x1*-0x2ef5,0x2465+0x1938+-0x3d93)-(-0x16f6+0x1c71+0x57b*-0x1+0.5))*_0x315400,_0x14f157=(_0x5307a5(_0x3292a6,0x214*-0x3+-0x1fc*0xd+0x2012)-(0x48e*-0x3+0x1c*-0x3f+0x148e+0.5))*_0x315400,_0x48f301=Math['sqrt'](-0x78*0x49+-0x2a*-0x47+0x1693-(_0xefa1ab*_0xefa1ab+_0x490cfc*_0x490cfc+_0x14f157*_0x14f157));switch(_0x3292a6>>>0x2304+-0x3*0x362+-0x1*0x18c0){case-0x8*-0x296+-0x92*-0x9+-0x295*0xa:_0x523b9e['set'](_0xefa1ab,_0x490cfc,_0x14f157,_0x48f301);break;case-0xcaa+-0x2050+-0xeb*-0x31:_0x523b9e['set'](_0x48f301,_0x490cfc,_0x14f157,_0xefa1ab);break;case 0x157e+-0x285*-0x7+-0x7d3*0x5:_0x523b9e['set'](_0x490cfc,_0x48f301,_0x14f157,_0xefa1ab);break;case 0x12b5+-0x2040+0xd8e:_0x523b9e['set'](_0x490cfc,_0x14f157,_0x48f301,_0xefa1ab);break;}},_0x482ae6=(_0x2984d5,_0x1e0c23,_0x1941f2)=>_0x2984d5*(-0x1cd5*-0x1+0x79*0x1a+0x1*-0x291e-_0x1941f2)+_0x1e0c23*_0x1941f2,_0x4a62b4=[-0x1a99+0x24d7+0x123*-0x9,0x163d+-0x12c5+0xdc*-0x4,-0xa9a*-0x1+0x269f*0x1+0x312a*-0x1][_0x318676-(-0x12f3+-0x2295+0x1*0x3589)],_0x5010fe=0x7b+-0x120+0xab;this['read']=_0x115098=>{const _0x2c4102=Math['floor'](_0x115098/(0x9bf+0x5e1*0x6+-0x2c05))*_0x4198d1;if(_0x331e6e&&(_0xf7ada(_0x331e6e,_0x54746d[_0x115098*_0x5010fe+(0x221a+0x19fe+-0x3c18)]),_0x331e6e['x']=_0x482ae6(_0x11fe28[_0x2c4102+(-0x3*-0xcec+-0x1961+-0xd63)],_0x11fe28[_0x2c4102+(-0x26b4+-0x2403+0x2*0x255d)],_0x331e6e['x']),_0x331e6e['y']=_0x482ae6(_0x11fe28[_0x2c4102+(-0x52*0x1f+-0x18e6+-0x22d5*-0x1)],_0x11fe28[_0x2c4102+(0x1ee4*-0x1+0x245*0x11+-0x5*0x189)],_0x331e6e['y']),_0x331e6e['z']=_0x482ae6(_0x11fe28[_0x2c4102+(-0xe01+0x1b07+-0x11*0xc4)],_0x11fe28[_0x2c4102+(-0x101*-0x25+0xabc+0x4*-0xbf7)],_0x331e6e['z'])),_0x2bfc8d&&_0x56828c(_0x2bfc8d,_0x54746d[_0x115098*_0x5010fe+(-0x105c*-0x2+0x181*0x9+-0x2e40)]),_0x522a3e&&(_0xf7ada(_0x522a3e,_0x54746d[_0x115098*_0x5010fe+(0x7*-0x83+-0x1*0x13c9+0x1760)]),_0x522a3e['x']=_0x482ae6(_0x11fe28[_0x2c4102+(-0x1*0xdf9+-0x5cb+-0x13ca*-0x1)],_0x11fe28[_0x2c4102+(0x6*-0x320+-0x1710+0x29d9)],_0x522a3e['x']),_0x522a3e['y']=_0x482ae6(_0x11fe28[_0x2c4102+(0x2a1*0x2+-0x751*0x1+-0xb2*-0x3)],_0x11fe28[_0x2c4102+(0xf3e*0x1+0xad*0xb+-0x5*0x487)],_0x522a3e['y']),_0x522a3e['z']=_0x482ae6(_0x11fe28[_0x2c4102+(-0x2113*-0x1+-0x1*0x1c5e+-0x85*0x9)],_0x11fe28[_0x2c4102+(-0x1f3f+0xf9*-0x1+-0x3*-0xac1)],_0x522a3e['z'])),_0x3f3cbb&&(_0xf98ad8(_0x3f3cbb,_0x54746d[_0x115098*_0x5010fe+(0x42b+0x682*-0x2+0x237*0x4)]),_0x4198d1>-0x1bd4+-0x6d*-0x1d+-0x35*-0x4b&&(_0x3f3cbb['x']=_0x482ae6(_0x11fe28[_0x2c4102+(0x192c+-0x10c6*-0x2+0x2ef*-0x14)],_0x11fe28[_0x2c4102+(0x655*0x3+-0x1*-0x1834+-0x2b24)],_0x3f3cbb['x']),_0x3f3cbb['y']=_0x482ae6(_0x11fe28[_0x2c4102+(-0x1ff8+0x2*0x12e+0x3*0x9e3)],_0x11fe28[_0x2c4102+(-0x4f*-0x57+0xeb*0x14+-0xd*0x379)],_0x3f3cbb['y']),_0x3f3cbb['z']=_0x482ae6(_0x11fe28[_0x2c4102+(-0x20a6+-0x1614+0x36c8)],_0x11fe28[_0x2c4102+(-0xb25+0x1b34+-0xffe)],_0x3f3cbb['z']))),_0x4d2ac3&&(_0xf7ada(_0x4d2ac3,_0x54746d[_0x115098*_0x5010fe+(-0x1441+-0xc3d+-0x6*-0x56b)]),_0x4d2ac3['x']=_0x482ae6(_0x11fe28[_0x2c4102+(0x89*0x9+0x4*-0x737+0x181d)],_0x11fe28[_0x2c4102+(0x1*-0xeb1+0x15a3+-0x7*0xfb)],_0x4d2ac3['x']),_0x4d2ac3['y']=_0x482ae6(_0x11fe28[_0x2c4102+(0x2475+0x2*0xf7f+-0x4360)],_0x11fe28[_0x2c4102+(0x232*-0x4+-0x1*-0x515+0x11*0x39)],_0x4d2ac3['y']),_0x4d2ac3['z']=_0x482ae6(_0x11fe28[_0x2c4102+(0x1eb*0x5+0x216c+-0x2aef*0x1)],_0x11fe28[_0x2c4102+(0x256b+-0x1*0x24d0+-0x2c*0x3)],_0x4d2ac3['z'])),_0x2efc64&&(_0xf7ada(_0x2efc64,_0x54746d[_0x115098*_0x5010fe+(-0x11*-0x43+0x1774+-0x1be2)]),_0x2efc64['x']=_0x482ae6(_0x11fe28[_0x2c4102+(0xf*0x115+0x15aa*-0x1+0x587*0x1)],_0x11fe28[_0x2c4102+(0x50b+0x1*-0x1997+0x7*0x2f3)],_0x2efc64['x']),_0x2efc64['y']=_0x482ae6(_0x11fe28[_0x2c4102+(0xc6f+-0x8ed*0x3+0x2b*0x56)],_0x11fe28[_0x2c4102+(0x2*-0x5bf+0xed3+-0x33a)],_0x2efc64['y'])),_0x5c409b&&_0x318676>0x1af*-0x13+0x4bb*-0x2+0x2973){const _0x28c067=[_0x279163,_0x19cdb6,_0x15b514];for(let _0x120da8=-0x1f9e+0x262c+-0x1*0x68e;_0x120da8<-0x2*-0xb7+0x1e8b+0x2*-0xffb;++_0x120da8)for(let _0x4d4786=-0x137d+0x254c+0x11cf*-0x1;_0x4d4786<-0xdf5+0x11b8+-0xc*0x4f;++_0x4d4786)_0x5c409b[_0x120da8*(0x1d94*-0x1+-0xcbc*-0x2+0x42b*0x1)+_0x4d4786]=_0x4d4786<_0x4a62b4?_0x28c067[_0x120da8][_0x115098*(-0xc84*0x3+-0x236c+0x4908)+_0x4d4786]*((0xa4c+-0x3db*0x2+-0x28e)/(0x18fb+-0x22b1+0x1*0xab5))-(0x1c55+0x624+-0x2275):-0x24df+-0xed7+0x33b6;}};}}self['onmessage']=async _0x8bd29c=>{const {data:_0x3d665c}=_0x8bd29c;switch(_0x3d665c['type']){case'initWorker':break;case'decompress':_0x6b3720(_0x3d665c['numSplats'],_0x3d665c['chunkData'],_0x3d665c['chunkSize'],_0x3d665c['vertexData'],_0x3d665c['shData0'],_0x3d665c['shData1'],_0x3d665c['shData2'],_0x3d665c['shBands']);break;}};const _0x6b3720=(_0x4351e5,_0x1f605c,_0x1e80ae,_0x46ddd3,_0x1e6ea0,_0x47e574,_0x2f6d92,_0x2abcee)=>{const _0x17e3bf=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'];if(_0x2abcee>0x41*-0x52+0x18c8+-0x1a*0x27){const _0x2c0f83=[];for(let _0x55a1c9=0x6*0xc0+-0x970+0x4f0;_0x55a1c9<-0x1*-0xd8f+0x1db*-0x1+-0xb87;++_0x55a1c9)_0x2c0f83['push']('f_rest_'+_0x55a1c9);_0x17e3bf['splice'](_0x17e3bf['indexOf']('f_dc_0')+(0x1*0x14b1+0x3df+-0x188f),-0x1*-0x617+-0x168f+-0x11*-0xf8,..._0x2c0f83);}const _0x46f010={};_0x17e3bf['forEach'](_0x17034=>{_0x46f010[_0x17034]=new Float32Array(_0x4351e5);});const _0x307f04=new _0x5a2a36(),_0x1b76ca=new _0x4d4077(),_0x5729a1=new _0x5a2a36(),_0x384fb0=new _0x38f5cd(),_0x9464cd=new _0x5a2a36(),_0x5a5a17=new _0x5a2a36(),_0x186bb3=_0x2abcee>0x19*0x1+0x1c91*-0x1+0x1c78?new Float32Array(-0x1cb6+0x11d8*-0x1+0x1*0x2ebb):null,_0x3c909e=new _0x5d8b69(_0x1f605c,_0x1e80ae,_0x46ddd3,_0x1e6ea0,_0x47e574,_0x2f6d92,_0x2abcee,_0x307f04,_0x1b76ca,_0x5729a1,_0x384fb0,_0x9464cd,_0x5a5a17,_0x186bb3);for(let _0x4e64d9=0x131c*0x2+0x26e4+-0x4d1c;_0x4e64d9<_0x4351e5;++_0x4e64d9)if(_0x3c909e['read'](_0x4e64d9),_0x46f010['x'][_0x4e64d9]=_0x307f04['x'],_0x46f010['y'][_0x4e64d9]=_0x307f04['y'],_0x46f010['z'][_0x4e64d9]=_0x307f04['z'],_0x46f010['rot_1'][_0x4e64d9]=_0x1b76ca['x'],_0x46f010['rot_2'][_0x4e64d9]=_0x1b76ca['y'],_0x46f010['rot_3'][_0x4e64d9]=_0x1b76ca['z'],_0x46f010['rot_0'][_0x4e64d9]=_0x1b76ca['w'],_0x46f010['scale_0'][_0x4e64d9]=_0x5729a1['x'],_0x46f010['scale_1'][_0x4e64d9]=_0x5729a1['y'],_0x46f010['scale_2'][_0x4e64d9]=_0x5729a1['z'],_0x46f010['motion_0'][_0x4e64d9]=_0x9464cd['x'],_0x46f010['motion_1'][_0x4e64d9]=_0x9464cd['y'],_0x46f010['motion_2'][_0x4e64d9]=_0x9464cd['z'],_0x46f010['t_scale'][_0x4e64d9]=_0x5a5a17['x'],_0x46f010['t'][_0x4e64d9]=_0x5a5a17['y'],_0x46f010['f_dc_0'][_0x4e64d9]=(_0x384fb0['x']-(-0x1a5b+0x77e+0x12dd+0.5))/_0x35c1b4,_0x46f010['f_dc_1'][_0x4e64d9]=(_0x384fb0['y']-(-0x242*0x11+0xac*0x11+0x1af6+0.5))/_0x35c1b4,_0x46f010['f_dc_2'][_0x4e64d9]=(_0x384fb0['z']-(0x25a3+0xcb3+0x17b*-0x22+0.5))/_0x35c1b4,_0x46f010['opacity'][_0x4e64d9]=_0x384fb0['w']<=-0xc24+0x1*-0x1099+0x1cbd?-(0x1278*-0x1+-0x12af*-0x1+-0xf*0x1):_0x384fb0['w']>=-0x2355+-0x1c52+0x3fa8?0x408+0x106d+-0x144d:-Math['log']((-0x830+-0x9e8+0x1*0x1219)/_0x384fb0['w']-(-0x142f+-0x4ed+-0x1*-0x191d)),_0x186bb3){for(let _0x402fe0=0x4d*-0x47+-0x15aa+0x1*0x2b05;_0x402fe0<0x72*0xb+0x1ae1+0xa*-0x329;++_0x402fe0)_0x46f010['f_rest_'+_0x402fe0][_0x4e64d9]=_0x186bb3[_0x402fe0];}let _0x19ba77={'x':_0x46f010['x'],'y':_0x46f010['y'],'z':_0x46f010['z'],'rot_1':_0x46f010['rot_1'],'rot_2':_0x46f010['rot_2'],'rot_3':_0x46f010['rot_3'],'rot_0':_0x46f010['rot_0'],'scale_0':_0x46f010['scale_0'],'scale_1':_0x46f010['scale_1'],'scale_2':_0x46f010['scale_2'],'motion_0':_0x46f010['motion_0'],'motion_1':_0x46f010['motion_1'],'motion_2':_0x46f010['motion_2'],'t_scale':_0x46f010['t_scale'],'t':_0x46f010['t'],'f_dc_0':_0x46f010['f_dc_0'],'f_dc_1':_0x46f010['f_dc_1'],'f_dc_2':_0x46f010['f_dc_2'],'opacity':_0x46f010['opacity']};_0x186bb3&&(_0x19ba77={..._0x19ba77,'f_rest_0':_0x46f010['f_rest_0'],'f_rest_1':_0x46f010['f_rest_1'],'f_rest_2':_0x46f010['f_rest_2'],'f_rest_3':_0x46f010['f_rest_3'],'f_rest_4':_0x46f010['f_rest_4'],'f_rest_5':_0x46f010['f_rest_5'],'f_rest_6':_0x46f010['f_rest_6'],'f_rest_7':_0x46f010['f_rest_7'],'f_rest_8':_0x46f010['f_rest_8'],'f_rest_9':_0x46f010['f_rest_9'],'f_rest_10':_0x46f010['f_rest_10'],'f_rest_11':_0x46f010['f_rest_11'],'f_rest_12':_0x46f010['f_rest_12'],'f_rest_13':_0x46f010['f_rest_13'],'f_rest_14':_0x46f010['f_rest_14'],'f_rest_15':_0x46f010['f_rest_15'],'f_rest_16':_0x46f010['f_rest_16'],'f_rest_17':_0x46f010['f_rest_17'],'f_rest_18':_0x46f010['f_rest_18'],'f_rest_19':_0x46f010['f_rest_19'],'f_rest_20':_0x46f010['f_rest_20'],'f_rest_21':_0x46f010['f_rest_21'],'f_rest_22':_0x46f010['f_rest_22'],'f_rest_23':_0x46f010['f_rest_23'],'f_rest_24':_0x46f010['f_rest_24'],'f_rest_25':_0x46f010['f_rest_25'],'f_rest_26':_0x46f010['f_rest_26'],'f_rest_27':_0x46f010['f_rest_27'],'f_rest_28':_0x46f010['f_rest_28'],'f_rest_29':_0x46f010['f_rest_29'],'f_rest_30':_0x46f010['f_rest_30'],'f_rest_31':_0x46f010['f_rest_31'],'f_rest_32':_0x46f010['f_rest_32'],'f_rest_33':_0x46f010['f_rest_33'],'f_rest_34':_0x46f010['f_rest_34'],'f_rest_35':_0x46f010['f_rest_35'],'f_rest_36':_0x46f010['f_rest_36'],'f_rest_37':_0x46f010['f_rest_37'],'f_rest_38':_0x46f010['f_rest_38'],'f_rest_39':_0x46f010['f_rest_39'],'f_rest_40':_0x46f010['f_rest_40'],'f_rest_41':_0x46f010['f_rest_41'],'f_rest_42':_0x46f010['f_rest_42'],'f_rest_43':_0x46f010['f_rest_43'],'f_rest_44':_0x46f010['f_rest_44']});const _0x275fd2=Object['values'](_0x19ba77)['map'](_0x25477d=>_0x25477d['buffer']);self['postMessag'+'e']({'type':'decompress'+'ed','data':_0x19ba77},_0x275fd2);};}class ik extends me{constructor(){super(),h(this,'worker'),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+sk['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x1d77e2=>{if(!this['worker'])return;const {data:_0x2d8188}=_0x1d77e2;switch(_0x2d8188['type']){case'decompress'+'ed':console['log']('decompress'+'ed'),this['fire']('decompress'+'ed',_0x2d8188['data']);break;}};}['decompress'](_0x3d7e02,_0x5b27ee,_0x4b853e,_0xda8900,_0x2c9c3f,_0xabb1b4,_0x31bb37,_0xab2505){const _0x3df719=[_0x5b27ee['buffer'],_0xda8900['buffer']];_0x2c9c3f&&_0x3df719['push'](_0x2c9c3f['buffer']),_0xabb1b4&&_0x3df719['push'](_0xabb1b4['buffer']),_0x31bb37&&_0x3df719['push'](_0x31bb37['buffer']),this['worker']['postMessag'+'e']({'type':'decompress','numSplats':_0x3d7e02,'chunkData':_0x5b27ee,'chunkSize':_0x4b853e,'vertexData':_0xda8900,'shData0':_0x2c9c3f,'shData1':_0xabb1b4,'shData2':_0x31bb37,'shBands':_0xab2505},_0x3df719);}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}class rk{constructor(_0x58ca22,_0x3a0421,_0x1c7cc4,_0xc30b1d,_0x554459,_0x453764,_0x280168,_0x3a1f9f){const _0x3fab16=(_0x427b44,_0x42393c)=>{const _0x330577=(0xe1+-0x3*-0x9c5+0x1*-0x1e2f<<_0x42393c)-(0x606+-0x1b41*0x1+0x38a*0x6);return(_0x427b44&_0x330577)/_0x330577;},_0x3c0457=(_0x1114cb,_0x56e19d)=>{_0x1114cb['x']=_0x3fab16(_0x56e19d>>>-0x276*-0x9+0x4*-0x274+0x1*-0xc41,0x13*-0x161+-0x13ee+0x2e2c),_0x1114cb['y']=_0x3fab16(_0x56e19d>>>-0x5*0x1a5+-0x242*-0x6+-0x548,0xd61+-0xb3*0xa+-0x659),_0x1114cb['z']=_0x3fab16(_0x56e19d,-0x173*0x3+-0x89*0x5+0x711);},_0x284da9=(_0x36a701,_0x49da00)=>{_0x36a701['x']=_0x3fab16(_0x49da00>>>-0x164b*0x1+-0x11b0+-0x1*-0x2813,-0x10ff*0x2+0x1fa1+0x265),_0x36a701['y']=_0x3fab16(_0x49da00>>>-0x18a3+0x12b2+0x601,-0x7c*-0x23+0x1dea+-0x1*0x2ed6),_0x36a701['z']=_0x3fab16(_0x49da00>>>0x1847+0x1c09+-0x3448,-0x6e8+0x1*0xc3d+0x3b*-0x17),_0x36a701['w']=_0x3fab16(_0x49da00,0x2646+-0x21a8+-0x496);},_0x195243=(_0x388aa9,_0x276538)=>{const _0x26f8e4=(0x413*0x1+0x5*-0x4f6+0x14bc)/(Math['sqrt'](0xa50+-0xf36+0x4e8)*(-0xb2+0x1*0xbb+-0x3*0x3+0.5)),_0x1bb02e=(_0x3fab16(_0x276538>>>-0x5*0x33d+0x13*0xd8+0x3d,0x3*0x7a4+0x5cb*-0x6+0xa0*0x13)-(0x174c*-0x1+0x1cf5+-0x5a9+0.5))*_0x26f8e4,_0x2d865a=(_0x3fab16(_0x276538>>>-0x378+0x2e+-0x11c*-0x3,0x1*-0x102d+0x20*0x11c+-0x1349)-(0xa34+-0x21cd*-0x1+-0x2c01+0.5))*_0x26f8e4,_0x4c3e39=(_0x3fab16(_0x276538,0x1ea2+0x2239+-0x40d1)-(-0xcdb+0x1b64+0x1*-0xe89+0.5))*_0x26f8e4,_0x532413=Math['sqrt'](-0x3*0x8be+-0x1db*-0x5+0x10f4*0x1-(_0x1bb02e*_0x1bb02e+_0x2d865a*_0x2d865a+_0x4c3e39*_0x4c3e39));switch(_0x276538>>>0x15e8+-0x1*-0x1f76+-0xc0*0x47){case-0x301+-0x277*-0x1+0x2e*0x3:_0x388aa9['set'](_0x1bb02e,_0x2d865a,_0x4c3e39,_0x532413);break;case 0x518*-0x2+0xe*-0x22+-0xc0d*-0x1:_0x388aa9['set'](_0x532413,_0x2d865a,_0x4c3e39,_0x1bb02e);break;case 0x248f+-0x1136+-0x1*0x1357:_0x388aa9['set'](_0x2d865a,_0x532413,_0x4c3e39,_0x1bb02e);break;case 0x1f8d+0x26b*0xa+-0x37b8:_0x388aa9['set'](_0x2d865a,_0x4c3e39,_0x532413,_0x1bb02e);break;}},_0x555531=(_0x359151,_0x5098d4,_0x1d40bd)=>_0x359151*(-0x499*0x5+0x6e*0x23+0x7f4-_0x1d40bd)+_0x5098d4*_0x1d40bd,{chunkData:_0x93cc7,chunkSize:_0xb2e8e0,vertexData:_0x4a95d9,shData0:_0x334843,shData1:_0x2d6456,shData2:_0x79b456,shBands:_0x57fdcd}=_0x58ca22,_0x4d8a9a=[-0x121f*0x1+-0x374+0x1596,0xb62+-0x2b*0xe7+0x1*0x1b73,-0x79a+0x4b4+-0x2f5*-0x1][_0x57fdcd-(0x17d8+-0x1d*0x94+0x1*-0x713)],_0x61792e=0x401+0x59f*0x4+-0x1a77;this['read']=_0x3fc253=>{const _0x39ea4d=Math['floor'](_0x3fc253/(-0x1058+0x2c*0xe+0xef0))*_0xb2e8e0;if(_0x3a0421&&(_0x3c0457(_0x3a0421,_0x4a95d9[_0x3fc253*_0x61792e+(-0x957*-0x1+-0x1ad0+0x1179)]),_0x3a0421['x']=_0x555531(_0x93cc7[_0x39ea4d+(0xe62+-0x72b+-0x737*0x1)],_0x93cc7[_0x39ea4d+(0x67a*0x5+0x2a5+-0x2304)],_0x3a0421['x']),_0x3a0421['y']=_0x555531(_0x93cc7[_0x39ea4d+(-0x6*-0x1d1+0xba7+0x3*-0x784)],_0x93cc7[_0x39ea4d+(0x1*0x6a4+0x16da+0x9a*-0x31)],_0x3a0421['y']),_0x3a0421['z']=_0x555531(_0x93cc7[_0x39ea4d+(-0x1aa9*-0x1+-0x1*-0xc63+-0x270a)],_0x93cc7[_0x39ea4d+(-0x1b7+0x11da+0x101e*-0x1)],_0x3a0421['z'])),_0x1c7cc4&&_0x195243(_0x1c7cc4,_0x4a95d9[_0x3fc253*_0x61792e+(-0x1ed*-0x9+0x1*-0x13d9+0x3*0xd7)]),_0xc30b1d&&(_0x3c0457(_0xc30b1d,_0x4a95d9[_0x3fc253*_0x61792e+(-0x1f99*-0x1+-0x207f+0x2*0x74)]),_0xc30b1d['x']=_0x555531(_0x93cc7[_0x39ea4d+(0x1*-0x1791+-0x7de+0x1f75)],_0x93cc7[_0x39ea4d+(0x1c63+0x10ca+-0xd6*0x36)],_0xc30b1d['x']),_0xc30b1d['y']=_0x555531(_0x93cc7[_0x39ea4d+(0x2*-0x581+-0x1*0x2072+0x2b7b)],_0x93cc7[_0x39ea4d+(0xddb+0x1*0x23a6+-0x3177)],_0xc30b1d['y']),_0xc30b1d['z']=_0x555531(_0x93cc7[_0x39ea4d+(-0x1564+0x20d1*0x1+-0x1*0xb65)],_0x93cc7[_0x39ea4d+(0xd79+-0xa02+0x2*-0x1b6)],_0xc30b1d['z'])),_0x554459&&(_0x284da9(_0x554459,_0x4a95d9[_0x3fc253*_0x61792e+(-0x740+0x3e2*-0x6+-0x1e8f*-0x1)]),_0xb2e8e0>0xce+-0x13bb*0x1+0x12f9&&(_0x554459['x']=_0x555531(_0x93cc7[_0x39ea4d+(-0x46+-0x45e+0x4b0)],_0x93cc7[_0x39ea4d+(0x3*-0x3c+-0x1c04+-0x35*-0x8b)],_0x554459['x']),_0x554459['y']=_0x555531(_0x93cc7[_0x39ea4d+(0x4e5+0x77a+0x1*-0xc52)],_0x93cc7[_0x39ea4d+(0x1*-0x6f1+-0x1*0x1815+0x1f16)],_0x554459['y']),_0x554459['z']=_0x555531(_0x93cc7[_0x39ea4d+(-0xba4+-0x5da+0x118c)],_0x93cc7[_0x39ea4d+(0x123d+-0xf29*-0x1+-0x2155)],_0x554459['z']))),_0x453764&&(_0x3c0457(_0x453764,_0x4a95d9[_0x3fc253*_0x61792e+(-0x1*-0x1fdc+-0x1*-0x1337+-0x330f)]),_0x453764['x']=_0x555531(_0x93cc7[_0x39ea4d+(0x7*-0x52a+0x199+0x229f)],_0x93cc7[_0x39ea4d+(0x6f*-0x1+-0x1ee6+-0x2*-0xfb5)],_0x453764['x']),_0x453764['y']=_0x555531(_0x93cc7[_0x39ea4d+(0xb*-0x17+-0x34e*-0x4+-0x614*0x2)],_0x93cc7[_0x39ea4d+(-0xd0d*0x1+0x625+0x1*0x6fe)],_0x453764['y']),_0x453764['z']=_0x555531(_0x93cc7[_0x39ea4d+(-0x11e2*-0x2+0x85a*0x1+-0x2c0a)],_0x93cc7[_0x39ea4d+(0x324+-0x2125+0x1ac*0x12)],_0x453764['z'])),_0x280168&&(_0x3c0457(_0x280168,_0x4a95d9[_0x3fc253*_0x61792e+(0x644+-0xd*0x2a9+0x5d*0x4e)]),_0x280168['x']=_0x555531(_0x93cc7[_0x39ea4d+(-0x9e*-0x32+-0x9d1+0xad*-0x1f)],_0x93cc7[_0x39ea4d+(-0x13*0x1bb+0x121*0x2+0x1eb8)],_0x280168['x']),_0x280168['y']=_0x555531(_0x93cc7[_0x39ea4d+(-0x950+0x5cf+-0x47*-0xd)],_0x93cc7[_0x39ea4d+(0x9ac*-0x3+0xfbc+0xd63)],_0x280168['y'])),_0x3a1f9f&&_0x57fdcd>0xa0+0x5*-0x1a3+0x78f){const _0x5ace0a=[_0x334843,_0x2d6456,_0x79b456];for(let _0x21669f=0x1827+0x1f5f+0x6*-0x941;_0x21669f<0x1bb*-0x3+0x517+-0x1*-0x1d;++_0x21669f)for(let _0x4ea064=-0x8dd+-0x25b2+-0x2e8f*-0x1;_0x4ea064<0xad9*-0x3+0x1013*0x1+0x1087;++_0x4ea064)_0x3a1f9f[_0x21669f*(-0x14d0+0x2473+-0xf94)+_0x4ea064]=_0x4ea064<_0x4d8a9a?_0x5ace0a[_0x21669f][_0x3fc253*(0x1a86*0x1+0x3ca*-0xa+0xb6e)+_0x4ea064]*((0x1177+-0x14e8+0x379)/(0x3*-0x1ad+-0x17*0xe8+0xb5*0x26))-(0x550+0x152b*-0x1+0xfdf*0x1):0x5*-0x86+-0x1deb+0x2089*0x1;}};}}class ak{constructor(){h(this,'numSplats'),h(this,'comments'),h(this,'chunkData'),h(this,'vertexData'),h(this,'is4D'),h(this,'shData0'),h(this,'shData1'),h(this,'shData2'),h(this,'shBands');}['createIter'](_0x2b2a42,_0x5ad7a5,_0x5b0768,_0x135ee6,_0x42465d,_0x23ca83,_0x4f62ef){return new rk(this,_0x2b2a42,_0x5ad7a5,_0x5b0768,_0x135ee6,_0x42465d,_0x23ca83,_0x4f62ef);}['calcAabb'](_0x52cf88){const {chunkData:_0x8b1ccf,numChunks:_0x3d662e,chunkSize:_0x5211aa}=this;let _0xf300df=Math['exp'](Math['max'](_0x8b1ccf[-0x1b2c+-0xefe+0xd*0x33f],_0x8b1ccf[0x1*-0x2006+-0x1*0xd3f+0x2d4f],_0x8b1ccf[-0x26d2+0x235e+-0x37f*-0x1])),_0x195a47=_0x8b1ccf[0x1434+-0x2*-0x77+0x5*-0x43a]-_0xf300df,_0x214058=_0x8b1ccf[-0x1*0x1b+0x1*0x1fc8+0x1fac*-0x1]-_0xf300df,_0x240485=_0x8b1ccf[-0x12*0x213+-0x195c*0x1+-0x3eb4*-0x1]-_0xf300df,_0xbe503d=_0x8b1ccf[0x1493+0x3*0x5ee+-0x265a]+_0xf300df,_0x450b8a=_0x8b1ccf[-0x1f12+0x76*-0x1c+0x2bfe]+_0xf300df,_0x4618fe=_0x8b1ccf[0x1e97*0x1+0x3ea+0x4*-0x89f]+_0xf300df;for(let _0x2d1eaf=-0x1d96*0x1+0x4*-0x446+0x2eaf;_0x2d1eaf<_0x3d662e;++_0x2d1eaf){const _0x3653ff=_0x2d1eaf*_0x5211aa;_0xf300df=Math['exp'](Math['max'](_0x8b1ccf[_0x3653ff+(-0x1ab0+0xc*0x322+0x1*-0xadf)],_0x8b1ccf[_0x3653ff+(-0x1a01+0x211c+-0x711)],_0x8b1ccf[_0x3653ff+(0x138c+-0x1*-0x812+0x27*-0xb5)])),_0x195a47=Math['min'](_0x195a47,_0x8b1ccf[_0x3653ff+(-0x1*-0x201d+0x1352+-0x336f)]-_0xf300df),_0x214058=Math['min'](_0x214058,_0x8b1ccf[_0x3653ff+(0x1139+0x16ee+-0x23b*0x12)]-_0xf300df),_0x240485=Math['min'](_0x240485,_0x8b1ccf[_0x3653ff+(-0x1af*-0x16+-0x262*-0x1+0x276a*-0x1)]-_0xf300df),_0xbe503d=Math['max'](_0xbe503d,_0x8b1ccf[_0x3653ff+(0x1ebb+0x95*-0x39+0x11*0x25)]+_0xf300df),_0x450b8a=Math['max'](_0x450b8a,_0x8b1ccf[_0x3653ff+(-0x25a0+0x31*-0x97+0x1*0x428b)]+_0xf300df),_0x4618fe=Math['max'](_0x4618fe,_0x8b1ccf[_0x3653ff+(-0x3ed+-0x10ea+0x14dc)]+_0xf300df);}return _0x52cf88['center']['set']((_0x195a47+_0xbe503d)*(-0x1*0x1e81+-0x4*-0x328+0x11e1+0.5),(_0x214058+_0x450b8a)*(0x18b2+0x137c+0x1617*-0x2+0.5),(_0x240485+_0x4618fe)*(-0xc5f*-0x1+-0x1d14+-0x10b5*-0x1+0.5)),_0x52cf88['halfExtent'+'s']['set']((_0xbe503d-_0x195a47)*(-0xf5b+-0x8e9+-0x1844*-0x1+0.5),(_0x450b8a-_0x214058)*(0xc93+0x18*-0xe4+0x8cd+0.5),(_0x4618fe-_0x240485)*(0x1bc+-0x9c4+0x101*0x8+0.5)),!(0x26b1*0x1+0x12f7+-0x24*0x19a);}['getCenters'](_0x26193f){const {vertexData:_0x4461e2,chunkData:_0x77eca,numChunks:_0x4b9f5f,chunkSize:_0xddec80}=this;let _0x183709,_0x548db0,_0x545151,_0x584123,_0xd07b5a,_0x3564d5;for(let _0x4e6bd0=0x4cc*-0x7+-0x3*0xbab+0x4495*0x1;_0x4e6bd0<_0x4b9f5f;++_0x4e6bd0){const _0x403a9e=_0x4e6bd0*_0xddec80;_0x183709=_0x77eca[_0x403a9e+(-0x1881+0x24e8+-0x27b*0x5)],_0x548db0=_0x77eca[_0x403a9e+(-0x77+-0x15a6+0x161e)],_0x545151=_0x77eca[_0x403a9e+(0x5ef*0x3+-0x17*0x35+0x1a1*-0x8)],_0x584123=_0x77eca[_0x403a9e+(0x1fd5+0x26a0+-0x4672)],_0xd07b5a=_0x77eca[_0x403a9e+(-0x2d*0x9f+-0x1*0x793+0x238a)],_0x3564d5=_0x77eca[_0x403a9e+(0x1a60+-0x224c+0x7f1*0x1)];const _0x2a3525=Math['min'](this['numSplats'],(_0x4e6bd0+(-0x269b+0xb8e+0x1b0e))*(-0x21da+-0x1e29+0x4103*0x1));for(let _0x9aef35=_0x4e6bd0*(0xc98+0x6d*-0x7+-0x89d*0x1);_0x9aef35<_0x2a3525;++_0x9aef35){const _0x22c153=_0x4461e2[_0x9aef35*(0x6*0x50d+0xa30+-0x287a)],_0x887f9d=(_0x22c153>>>0x1c*0x11+-0xc88+0xac1)/(-0x294+-0x1f90+-0xa1*-0x43),_0x37ecdd=(_0x22c153>>>-0x1f*0x3b+0xa43*-0x2+-0xddb*-0x2&-0x74f*-0x1+0x15*-0x1b2+0x204a)/(-0x2285*-0x1+0xbc4+-0x2a4a),_0x2d57de=(_0x22c153&0x1ecf+0xc*-0x1c2+-0x6e*0x4)/(0x1da+-0x1*-0x13f7+-0x1d*0x7a);_0x26193f[_0x9aef35*(-0x1*0x17db+0x85b+0x169*0xb)+(-0x1*0x9c5+-0x4*0x2f5+0x1599)]=(-0xe9b*-0x1+-0x265+-0xc35-_0x887f9d)*_0x183709+_0x887f9d*_0x584123,_0x26193f[_0x9aef35*(0x1ac+0x1cf*-0x1+0x26)+(-0x1a28+0x1378*0x1+0x6b1)]=(0x1e5*0x3+-0x4*-0x1a5+-0xc42-_0x37ecdd)*_0x548db0+_0x37ecdd*_0xd07b5a,_0x26193f[_0x9aef35*(-0x1b12+0xa08+0x110d*0x1)+(0x19*0x77+-0x356+0x1*-0x847)]=(0x3e7+-0x1d75*-0x1+0x1*-0x215b-_0x2d57de)*_0x545151+_0x2d57de*_0x3564d5;}}}['getChunks'](_0x289d86){const {chunkData:_0x293be6,numChunks:_0x5a4f29,chunkSize:_0x538731}=this;let _0x5d3079,_0x409bd7,_0x3988d0,_0x5ce037,_0x592955,_0x28d58d;for(let _0x44c1ed=-0xfc9+-0x1c0c+0x1*0x2bd5;_0x44c1ed<_0x5a4f29;++_0x44c1ed){const _0x497996=_0x44c1ed*_0x538731;_0x5d3079=_0x293be6[_0x497996+(0x185b+0x1a68+-0x32c3)],_0x409bd7=_0x293be6[_0x497996+(-0x41*-0x95+-0x2123+0x1*-0x4b1)],_0x3988d0=_0x293be6[_0x497996+(0x20*0x10b+0xba1+-0x2cff)],_0x5ce037=_0x293be6[_0x497996+(-0x21f0+-0x11f5+-0x2*-0x19f4)],_0x592955=_0x293be6[_0x497996+(-0xc04+0x177d+-0xb75)],_0x28d58d=_0x293be6[_0x497996+(-0x8f*-0x1f+0x2*-0x12ad+0x140e)],_0x289d86[_0x44c1ed*(0xf4c+-0x1*0x18d1+0x7*0x15d)+(-0x61d+0x9db+-0x3be)]=_0x5d3079,_0x289d86[_0x44c1ed*(0xe91+-0x1*0x92b+-0x560)+(0x24b5*-0x1+-0x1df3*-0x1+-0x241*-0x3)]=_0x409bd7,_0x289d86[_0x44c1ed*(-0x1f4b+-0x1*0x1e8f+0x3de0)+(0x1d*-0x107+0x916+0x14b7)]=_0x3988d0,_0x289d86[_0x44c1ed*(0x1e2*0x3+0x13*0x19+-0x77b)+(0xae*0x4+0x608+-0x8bd*0x1)]=_0x5ce037,_0x289d86[_0x44c1ed*(-0x3d*-0x87+-0x3*-0xca0+-0x4605)+(0xfb2+-0x13bd+-0x1*-0x40f)]=_0x592955,_0x289d86[_0x44c1ed*(0x53c*-0x3+0x241+0xd79)+(-0x1b7*-0x15+0x660+-0x2a5e)]=_0x28d58d;}}['calcFocalP'+'oint'](_0x1cb3f6){const {chunkData:_0x4353bb,numChunks:_0x4a080c,chunkSize:_0x233eee}=this;_0x1cb3f6['x']=0xea8*0x2+-0x14*0x9+-0x1c9c,_0x1cb3f6['y']=0x1fd3*0x1+-0x205a+0x87,_0x1cb3f6['z']=0xe3*-0x8+-0x1e3c+0x2554;for(let _0x5a2614=-0xe95+-0x2448+0x32dd;_0x5a2614<_0x4a080c;++_0x5a2614){const _0x419ab4=_0x5a2614*_0x233eee;_0x1cb3f6['x']+=_0x4353bb[_0x419ab4+(0x1*-0x96e+0x26cb+-0x1d5d)]+_0x4353bb[_0x419ab4+(0x406+0x243d*-0x1+0x6e*0x4b)],_0x1cb3f6['y']+=_0x4353bb[_0x419ab4+(-0x1f90+-0x1*0x24eb+0x447c)]+_0x4353bb[_0x419ab4+(0x1a19+0x1ba+-0x153*0x15)],_0x1cb3f6['z']+=_0x4353bb[_0x419ab4+(-0x5cb+0xfa4+-0x9d7)]+_0x4353bb[_0x419ab4+(0xe5+0x1*-0x214+0x134)];}_0x1cb3f6['mulScalar']((-0x136a+0x22b*-0x3+-0x19eb*-0x1+0.5)/_0x4a080c);}get['isCompress'+'ed'](){return!(-0x1*-0x54f+-0x457*0x1+0x3e*-0x4);}get['numChunks'](){return Math['ceil'](this['numSplats']/(0x110b*-0x1+-0x513+-0x1*-0x171e));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}async['decompress'](){const _0x56e866=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'],{shBands:_0x44205f}=this;if(_0x44205f>0xb0+-0x871+0x7c1){const _0xa9babe=[];for(let _0x15e4ad=0xab6+-0xda6*-0x1+0xc2e*-0x2;_0x15e4ad<0x1*0x5ef+-0x1e19+0xc9*0x1f;++_0x15e4ad)_0xa9babe['push']('f_rest_'+_0x15e4ad);_0x56e866['splice'](_0x56e866['indexOf']('f_dc_0')+(-0x124d*0x2+-0x164f+0x3aea),-0x16f1+-0x1*0xbd4+0x22c5,..._0xa9babe);}const _0x3d787b=new ik();return _0x3d787b['decompress'](this['numSplats'],this['chunkData'],this['chunkSize'],this['vertexData'],this['shData0'],this['shData1'],this['shData2'],this['shBands']),new Promise((_0x5d1324,_0x511cf8)=>{_0x3d787b['on']('decompress'+'ed',_0x107b02=>{_0x3d787b['destroy'](),_0x5d1324(new qn([{'name':'vertex','count':this['numSplats'],'properties':_0x56e866['map'](_0x27ccaf=>({'type':'float','name':_0x27ccaf,'storage':_0x107b02[_0x27ccaf],'byteSize':0x4}))}],this['comments']));});});}}async function nk(){const _0x3e2b22='super4d-ca'+'che-v1',_0x17e970={'maxAge':0x9a7ec800,'maxSize':0x280000000},_0x1ffce7=new Uint8Array([-0x4*0x303+0x247e+0x1802*-0x1,-0x139f+0x1fa7+-0xb9c,-0xd55*-0x2+0x2334+0x27*-0x193,-0x145b+-0x3d*-0x45+0x2c*0x17]),_0x9a62e1=new Uint8Array([-0x5a6+0x1db5*-0x1+0x2365,-0x5d9+-0x15e0+0x1c1e,-0x244+-0x1*-0xb17+-0x7*0x133,0x1*-0x1a2c+0x1961+-0x12f*-0x1,0x143d+0x88d*0x1+-0x19*0x123,0x746+0x1*0x1139+-0x1817,-0x1*-0x3+0x1a*-0xc2+-0x359*-0x6,0x7*-0x468+0x134e+-0x153*-0x9,-0x1ac3+-0x1d01+-0x1*-0x3828,-0x239f+-0x7*0x419+0x40b3,0x18b4+-0x142e+0x414*-0x1,0x3*0x304+-0x1a23+0x1121]),_0xea6bf=-0xe*0x1f6+0x10fa+0xa7a+0.28209479177387814,_0x5983d2=new Map([['char',Int8Array],['uchar',Uint8Array],['short',Int16Array],['ushort',Uint16Array],['int',Int32Array],['uint',Uint32Array],['float',Float32Array],['double',Float64Array]]);class _0x48ed66{constructor(_0xc50f2d={}){this['options']={..._0x17e970,..._0xc50f2d},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=-0x1277+-0x266d+0x38e4,this['initialize'+'d']=!(-0x784*-0x3+-0x9b7*-0x2+-0x29f9);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x3e2b22);const _0x2236b7=await this['cache']['keys'](),_0xb7b8fe=[];for(const _0x47d870 of _0x2236b7){const _0x57b99e=_0x47d870['url'],_0x209323=await this['cache']['match'](_0x57b99e);if(_0x209323){const _0x4babc2=(await _0x209323['blob']())['size'],_0x448372=_0x209323['headers']['get']('x-cache-ti'+'me');_0x448372&&_0xb7b8fe['push']({'url':_0x57b99e,'size':_0x4babc2,'cacheTime':parseInt(_0x448372)});}}_0xb7b8fe['sort']((_0x305bce,_0xe58ae4)=>_0x305bce['cacheTime']-_0xe58ae4['cacheTime']);for(const _0x400912 of _0xb7b8fe)this['cacheSizes']['set'](_0x400912['url'],_0x400912['size']),this['currentSiz'+'e']+=_0x400912['size'],this['lruList']['push'](_0x400912['url']);}catch(_0x7c730c){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x7c730c);}this['initialize'+'d']=!(-0x6*0x5ef+0x1d34+-0x75*-0xe);}}async['get'](_0x1b4105){if(await this['init'](),!this['cache'])return null;try{const _0x48f26d=await this['cache']['match'](_0x1b4105);if(!_0x48f26d)return null;const _0x462f01=_0x48f26d['headers']['get']('x-cache-ti'+'me');return _0x462f01&&Date['now']()-parseInt(_0x462f01)>this['options']['maxAge']?(await this['delete'](_0x1b4105),null):(this['updateLRU'](_0x1b4105),_0x48f26d);}catch{return null;}}async['set'](_0x2afb7a,_0xc7b1fd){if(!(!this['cache']||_0x2afb7a['startsWith']('blob:')))try{const _0x4e0b2d=_0xc7b1fd['clone'](),_0x5caa7b=await _0x4e0b2d['blob'](),_0x55a5d5=_0x5caa7b['size'];this['currentSiz'+'e']+_0x55a5d5>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x55a5d5);const _0x4f6f53=new Headers(_0x4e0b2d['headers']);_0x4f6f53['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0xb63d66=new Response(_0x5caa7b,{'status':_0x4e0b2d['status'],'statusText':_0x4e0b2d['statusText'],'headers':_0x4f6f53});await this['cache']['put'](_0x2afb7a,_0xb63d66),this['cacheSizes']['set'](_0x2afb7a,_0x55a5d5),this['currentSiz'+'e']+=_0x55a5d5,this['updateLRU'](_0x2afb7a);}catch(_0x5bccd9){console['error']('Cache\x20set\x20'+'error:',_0x5bccd9);}}['updateLRU'](_0x15ca3e){const _0x17b86f=this['lruList']['indexOf'](_0x15ca3e);_0x17b86f>-(0x1c6*0x6+-0x1d9*-0x5+-0x13e0)&&this['lruList']['splice'](_0x17b86f,0x3df+-0x1c9e+0x18c0),this['lruList']['push'](_0x15ca3e);}async['cleanupSpa'+'ce'](_0x5b9983){const _0x4b53c9=this['options']['maxSize']*(-0x293+-0x24b*0x3+0x974+0.9);if(!(this['currentSiz'+'e']<=_0x4b53c9))for(;this['lruList']['length']>0x1cea+0x1*-0x211c+0x432&&this['currentSiz'+'e']>_0x4b53c9;){const _0xc2bc2a=this['lruList']['shift']();_0xc2bc2a&&await this['delete'](_0xc2bc2a);}}async['delete'](_0x1ecf2e){if(this['cache'])try{await this['cache']['delete'](_0x1ecf2e);const _0x289aea=this['cacheSizes']['get'](_0x1ecf2e)||0x2352+-0x1a6d+0x45*-0x21;this['currentSiz'+'e']-=_0x289aea,this['cacheSizes']['delete'](_0x1ecf2e);const _0x191e49=this['lruList']['indexOf'](_0x1ecf2e);_0x191e49>-(0xaf*-0x1d+-0x4*0x4ae+0x268c)&&this['lruList']['splice'](_0x191e49,0x1*-0x254c+-0xe45+0x3392);}catch(_0x106d5c){console['error']('Cache\x20dele'+'te\x20error:',_0x106d5c);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x624a0e=>Promise['all'](_0x624a0e['map'](_0x2bdad7=>{var _0x7ba61b;return(_0x7ba61b=this['cache'])==null?void(-0x9*-0x21d+-0x1dc*0x10+0xabb):_0x7ba61b['delete'](_0x2bdad7);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0xcc8*0x2+-0x48a*-0x1+-0x1*0x1e1a;}catch(_0x170b18){console['error']('Cache\x20clea'+'r\x20error:',_0x170b18);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x6*0x5fc+-0xdf5+-0x3*0x751;}}class _0x2a871b{constructor(_0x4653b2=[],_0x494973={}){this['cacheManag'+'er']=new _0x48ed66(_0x494973['cache']),this['retryCount']=_0x494973['retryCount']||-0x1144*0x1+0xc87+0x4c0,this['retryDelay']=_0x494973['retryDelay']||0xcbf*-0x2+-0x48e*0x2+0x248e,this['maxConcurr'+'ency']=_0x494973['maxConcurr'+'ency']||-0x9d*-0x3d+-0x23c4+-0x1a3,this['downloadQu'+'eue']=_0x4653b2,this['isProcessi'+'ngDownload'+'Queue']=!(-0x1e6d+0xe4f+0x101f),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(-0xd*-0x16e+0x11ff+0x2495*-0x1);this['downloadQu'+'eue']['length']>-0xa*0x2e9+0x10a3+0xc77;)try{const _0x4755ef=this['downloadQu'+'eue']['splice'](0x17da+0x799+-0x1f73,this['maxConcurr'+'ency'])['map'](_0x37303d=>{if(!this['pendingRes'+'ponses']['has'](_0x37303d)){const _0x2e18a1=this['download'](_0x37303d);return this['pendingRes'+'ponses']['set'](_0x37303d,_0x2e18a1),_0x2e18a1['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x37303d);});}return Promise['resolve']();});await Promise['all'](_0x4755ef);}catch(_0x3c7836){console['error']('Download\x20e'+'rror:',_0x3c7836);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(-0x891+-0x1db3+0x2645);}}}async['fetch'](_0x38b020,_0x3ce6ef={}){if(this['pendingRes'+'ponses']['has'](_0x38b020))return this['pendingRes'+'ponses']['get'](_0x38b020);const {forceRefresh:_0x29cfc7=!(-0x410*0x4+0x1933+-0x8f2),..._0x10bb26}=_0x3ce6ef;this['pendingRes'+'ponses']['set'](_0x38b020,this['download'](_0x38b020,_0x10bb26));const _0x295ada=await this['pendingRes'+'ponses']['get'](_0x38b020);return this['pendingRes'+'ponses']['delete'](_0x38b020),_0x295ada;}async['download'](_0x32f72a,_0x42fb7e={}){var _0x128f76;await((_0x128f76=this['cacheManag'+'er'])==null?void(0xf9*-0x21+-0x1726*0x1+0x373f):_0x128f76['init']());const {forceRefresh:_0x4d5915=!(0x12d7+-0x1*-0x1e7+-0x1*0x14bd),..._0x19e322}=_0x42fb7e;_0x4d5915&&await this['cacheManag'+'er']['delete'](_0x32f72a);const _0x1758eb=await this['cacheManag'+'er']['get'](_0x32f72a);if(_0x1758eb)return _0x1758eb;let _0x201dae;for(let _0x149b46=-0x1fed+0x1*0xb8f+0x145e;_0x149b46<this['retryCount'];_0x149b46++)try{const _0x1e72cb=await fetch(_0x32f72a,_0x19e322);if(!_0x1e72cb['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x1e72cb['status']);return await this['cacheManag'+'er']['set'](_0x32f72a,_0x1e72cb),_0x1e72cb;}catch(_0x5b6e29){console['error']('Download\x20e'+'rror:',_0x5b6e29),_0x201dae=_0x5b6e29,_0x149b46<this['retryCount']-(-0x8ad*-0x4+-0x5f*0x5d+-0x30)&&await new Promise(_0x370112=>setTimeout(_0x370112,this['retryDelay']*(_0x149b46+(0xf*-0x16+-0x1f*0x2+0x83*0x3))));}throw _0x201dae;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){this['cacheManag'+'er']['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(-0x23*0x63+0x1*0x1151+0x3c7*-0x1),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x49447e{constructor(){this['numSplats']=-0x782*0x5+-0xd73+-0x1*-0x32fd,this['comments']=[],this['chunkData']=new Float32Array(0x2330+0x1d76+-0x40a6),this['vertexData']=new Uint32Array(-0x5*0x56e+-0x1a*0x147+0x3c5c),this['is4D']=!(0x1*-0x2379+-0x10*-0x85+0x11*0x199),this['shBands']=-0x5*-0x350+-0x1*-0xc4f+-0x1cdf,this['shData0']=new Uint8Array(-0x1d9f*-0x1+0x11*0x41+0x3*-0xb50),this['shData1']=new Uint8Array(-0x8*0x1a6+0xa0a+-0x2*-0x193),this['shData2']=new Uint8Array(-0x984+0x2070+0x9*-0x28c),this['elements']=[],this['isCompress'+'ed']=!(-0x33*-0x97+-0x3*0xcb7+0xac*0xc);}get['numChunks'](){return Math['ceil'](this['numSplats']/(-0xc92+-0x978+0x170a));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}}class _0x277811{constructor(_0x5b7234,_0x397414=[]){this['elements']=_0x5b7234,this['comments']=_0x397414,this['isCompress'+'ed']=!(-0x1258+0x1*-0x1555+-0x2*-0x13d7);}}class _0x3e1b6a{constructor(_0x2d33d7,_0x24cca0){this['reader']=_0x2d33d7,this['progressFu'+'nc']=_0x24cca0,this['head']=0x953+0xf7*0x1f+-0x273c,this['tail']=-0x1*0x1c6f+-0x2f2*-0xb+-0x3f7;}async['read'](){var _0x59a0b8;const {value:_0x451e3d,done:_0x57eb54}=await this['reader']['read']();if(_0x57eb54)throw new Error('Stream\x20fin'+'ished\x20befo'+'re\x20end\x20of\x20'+'header');this['push'](_0x451e3d),(_0x59a0b8=this['progressFu'+'nc'])==null||_0x59a0b8['call'](this,_0x451e3d['byteLength']);}['push'](_0x491d55){if(!this['data'])this['data']=_0x491d55,this['view']=new DataView(this['data']['buffer']),this['tail']=_0x491d55['length'];else{const _0xb52590=this['tail']-this['head'],_0x1a00cf=_0xb52590+_0x491d55['length'];if(this['data']['length']>=_0x1a00cf)this['head']>-0x2167+-0x1010+0x3177?(this['data']['copyWithin'](-0x12f0+0xaa+0x923*0x2,this['head'],this['tail']),this['data']['set'](_0x491d55,_0xb52590),this['head']=-0x1aa7*0x1+0x3*-0x4cf+-0x2*-0x148a,this['tail']=_0x1a00cf):(this['data']['set'](_0x491d55,this['tail']),this['tail']+=_0x491d55['length']);else{const _0x509e85=new Uint8Array(_0x1a00cf);this['head']>0x20a2+0x4*0x548+-0x3d7*0xe||this['tail']<this['data']['length']?_0x509e85['set'](this['data']['subarray'](this['head'],this['tail']),-0x1d29+-0xd*0x1eb+-0x2*-0x1b0c):_0x509e85['set'](this['data'],-0x296+-0x1fc7+0x225d),_0x509e85['set'](_0x491d55,_0xb52590),this['data']=_0x509e85,this['view']=new DataView(this['data']['buffer']),this['head']=0x27*0xf3+0x14b0+-0x1*0x39b5,this['tail']=_0x1a00cf;}}}['compact'](){this['head']>-0x1e6b+-0x1b6d+0x4d2*0xc&&(this['data']['copyWithin'](0x38f*-0xa+0x4f3+0x1f*0xfd,this['head'],this['tail']),this['tail']-=this['head'],this['head']=0x518+0xa2d+-0xf45);}get['remaining'](){return this['tail']-this['head'];}['getInt8'](){const _0x275bdb=this['view']['getInt8'](this['head']);return this['head']++,_0x275bdb;}['getUint8'](){const _0x1be69e=this['view']['getUint8'](this['head']);return this['head']++,_0x1be69e;}['getInt16'](){const _0x561bc9=this['view']['getInt16'](this['head'],!(0x1db*0x7+-0x1*-0x6ab+-0x88*0x25));return this['head']+=-0x1*-0xe39+-0x671*0x6+0x186f,_0x561bc9;}['getUint16'](){const _0x251212=this['view']['getUint16'](this['head'],!(-0x1*-0x26e7+0x43*-0x2b+-0x1ba6));return this['head']+=0x1f02+0x21*0xca+-0x826*0x7,_0x251212;}['getInt32'](){const _0x26e92e=this['view']['getInt32'](this['head'],!(-0x26*-0x13+0x4f*0x33+-0x128f));return this['head']+=0x1*0x17b9+-0xcd*0x22+0x385,_0x26e92e;}['getUint32'](){const _0x10fbd6=this['view']['getUint32'](this['head'],!(-0x3f5*-0x9+-0x151d*0x1+-0xe80));return this['head']+=-0x2*-0xeaa+0x3a7+-0x3*0xafd,_0x10fbd6;}['getFloat32'](){const _0x4c16e7=this['view']['getFloat32'](this['head'],!(0x8*0x346+0x49*-0x22+0x107e*-0x1));return this['head']+=0x953+-0x31*-0x29+-0x1128,_0x4c16e7;}['getFloat64'](){const _0x53354b=this['view']['getFloat64'](this['head'],!(-0x1b*0xaf+0x20b0+-0xe3b*0x1));return this['head']+=-0x1ba6+0xb55*-0x3+0x3dad,_0x53354b;}}class _0x281b23{constructor(_0x122743,_0x24fe97,_0x29edea){this['x']=_0x122743,this['y']=_0x24fe97,this['z']=_0x29edea;}}class _0x326a5a{constructor(_0xfb2a50,_0x4ae19a,_0x3cd7bd,_0x1c33a5){this['x']=_0xfb2a50,this['y']=_0x4ae19a,this['z']=_0x3cd7bd,this['w']=_0x1c33a5;}}class _0x540c62{constructor(_0x1120b7,_0x1cff46,_0x1732df,_0x2a10c0){this['x']=_0x1120b7,this['y']=_0x1cff46,this['z']=_0x1732df,this['w']=_0x2a10c0;}['set'](_0x231fe2,_0x4eb592,_0x329293,_0x2dd2a7){this['x']=_0x231fe2,this['y']=_0x4eb592,this['z']=_0x329293,this['w']=_0x2dd2a7;}}class _0x6bc7ae{constructor(_0x4861c4,_0xf57dba,_0x522039,_0x3e0dbf,_0x53e239,_0x532aaa,_0x1a1486,_0x283d93,_0x59bb0d,_0x4eeba8,_0x2cb77e,_0x3730d4,_0x161910,_0x584b32){const _0x3c92b2=(_0xe2ec28,_0x57515a)=>{const _0x31f215=(-0x1a82+0x8*-0x20c+-0x1*-0x2ae3<<_0x57515a)-(0x130c+-0xd*-0x142+0x2b9*-0xd);return(_0xe2ec28&_0x31f215)/_0x31f215;},_0xc8abec=(_0x53c6fa,_0x10ec76)=>{_0x53c6fa['x']=_0x3c92b2(_0x10ec76>>>-0x1*0x24d7+-0x1*0x1ff6+0x44e2,-0x5*0x1eb+-0x6*-0xae+-0x3*-0x1da),_0x53c6fa['y']=_0x3c92b2(_0x10ec76>>>0x1*-0x200f+0x737+0x18e3,-0x24bf+-0x1ef7+-0x10f0*-0x4),_0x53c6fa['z']=_0x3c92b2(_0x10ec76,0x1c54+0x1277+-0x2ec0);},_0x4e3a0c=(_0x47ffbd,_0x22ae33)=>{_0x47ffbd['x']=_0x3c92b2(_0x22ae33>>>-0x1a21*-0x1+0x7*0x17b+-0x2466,-0x848+0x20*-0xa3+-0x90*-0x33),_0x47ffbd['y']=_0x3c92b2(_0x22ae33>>>-0x1*0x6df+0x1891+-0x11a2,0xe85+0x12bd+-0x213a*0x1),_0x47ffbd['z']=_0x3c92b2(_0x22ae33>>>0x100d+0x1*-0x19b1+-0x9ac*-0x1,0x1b42+-0x1515+-0x625),_0x47ffbd['w']=_0x3c92b2(_0x22ae33,-0x223*-0x5+0x7*0x233+-0x1a0c);},_0x257199=(_0x2ed6a2,_0x2b7cfd)=>{const _0x2f6c4a=(-0x149a+0x3*0x175+0x103c)/(Math['sqrt'](0x2c*0x62+0xe42+-0x638*0x5)*(-0x729+0x1ef7+0x17ce*-0x1+0.5)),_0x5a41e6=(_0x3c92b2(_0x2b7cfd>>>-0x125a+0x1735+-0x4c7,0x15+-0x505+0x4fa)-(0x1211+-0x79*0x51+0x1438+0.5))*_0x2f6c4a,_0x341f07=(_0x3c92b2(_0x2b7cfd>>>-0x35*-0x6b+0xe3*-0x1e+0x47d,0x1*-0x525+0xffa+-0xacb)-(-0xe27+-0x2379*0x1+0x10*0x31a+0.5))*_0x2f6c4a,_0x4f24bd=(_0x3c92b2(_0x2b7cfd,0x709+-0x1954+0x1*0x1255)-(0xd4b+-0x144c*-0x1+-0x2197+0.5))*_0x2f6c4a,_0x1a50d0=Math['sqrt'](-0x15c*-0x13+0x2*-0xc5b+-0x11d-(_0x5a41e6*_0x5a41e6+_0x341f07*_0x341f07+_0x4f24bd*_0x4f24bd));switch(_0x2b7cfd>>>-0xd1e+0xa3*-0xe+-0xbd*-0x1e){case 0xbbf+0x1*0x247d+-0x1b9*0x1c:_0x2ed6a2['set'](_0x5a41e6,_0x341f07,_0x4f24bd,_0x1a50d0);break;case-0x1930+-0xb*-0x21d+-0x2*-0xf9:_0x2ed6a2['set'](_0x1a50d0,_0x341f07,_0x4f24bd,_0x5a41e6);break;case-0x2205+0x1f65+0x2a2*0x1:_0x2ed6a2['set'](_0x341f07,_0x1a50d0,_0x4f24bd,_0x5a41e6);break;case 0x1a19+-0x268a+0x2*0x63a:_0x2ed6a2['set'](_0x341f07,_0x4f24bd,_0x1a50d0,_0x5a41e6);break;}},_0x3113b2=(_0x4f97f3,_0x556864,_0x289d91)=>_0x4f97f3*(-0x2384+0x6a3+-0x1ce2*-0x1-_0x289d91)+_0x556864*_0x289d91,_0x21ae3d=[-0xf90+-0x777+0x7ae*0x3,0xe1d+-0x16*-0x47+-0x142f,0x1*0x11cf+0x277*-0x7+-0x7f][_0x1a1486-(-0x1*0x93d+-0x267b+0x1*0x2fb9)],_0x4c1d4d=0x122+0x25d2+-0x97*0x42;this['read']=_0x5d314c=>{const _0x138abd=Math['floor'](_0x5d314c/(0x248e*0x1+-0x1e59+0x1*-0x535))*_0xf57dba;if(_0x283d93&&(_0xc8abec(_0x283d93,_0x522039[_0x5d314c*_0x4c1d4d+(-0x1c81+0x24d+0x6*0x45e)]),_0x283d93['x']=_0x3113b2(_0x4861c4[_0x138abd+(-0x21d7+-0x1e61+-0x2*-0x201c)],_0x4861c4[_0x138abd+(-0xb03*-0x1+0x1e14+-0x2914)],_0x283d93['x']),_0x283d93['y']=_0x3113b2(_0x4861c4[_0x138abd+(0x458*0x5+-0x1117+-0x25*0x20)],_0x4861c4[_0x138abd+(-0x3*0x812+-0x1*-0x14cb+0x36f)],_0x283d93['y']),_0x283d93['z']=_0x3113b2(_0x4861c4[_0x138abd+(-0x221e+-0x1dd3+0x3ff3)],_0x4861c4[_0x138abd+(-0x349*0x1+-0x2*-0xd4f+-0x1750)],_0x283d93['z'])),_0x59bb0d&&_0x257199(_0x59bb0d,_0x522039[_0x5d314c*_0x4c1d4d+(0x3*-0xbc2+-0x1d93*0x1+0x40da*0x1)]),_0x4eeba8&&(_0xc8abec(_0x4eeba8,_0x522039[_0x5d314c*_0x4c1d4d+(-0xbb*0x10+0x1789+0x1b1*-0x7)]),_0x4eeba8['x']=_0x3113b2(_0x4861c4[_0x138abd+(0x1fb2+-0x195d+-0x64f)],_0x4861c4[_0x138abd+(0x18c5+-0x1f63+0x83*0xd)],_0x4eeba8['x']),_0x4eeba8['y']=_0x3113b2(_0x4861c4[_0x138abd+(0x1f33*-0x1+-0x4e6+0x2420)],_0x4861c4[_0x138abd+(0x1cf4+-0x10c*0x15+-0x6ee)],_0x4eeba8['y']),_0x4eeba8['z']=_0x3113b2(_0x4861c4[_0x138abd+(-0x1ee8+0x283*-0x1+0x2173)],_0x4861c4[_0x138abd+(0xc19+-0x262b+0x1a1d)],_0x4eeba8['z'])),_0x2cb77e&&(_0x4e3a0c(_0x2cb77e,_0x522039[_0x5d314c*_0x4c1d4d+(0xcf1+0x1cc7+-0x29b5*0x1)]),_0xf57dba>0x7a9+0x15ce*0x1+0x1*-0x1d6b&&(_0x2cb77e['x']=_0x3113b2(_0x4861c4[_0x138abd+(-0x51d+-0x52*0x19+0xd2b*0x1)],_0x4861c4[_0x138abd+(-0x145c+0x4a*-0x43+-0x61*-0x69)],_0x2cb77e['x']),_0x2cb77e['y']=_0x3113b2(_0x4861c4[_0x138abd+(0x13a4+-0x23d8*0x1+0x1041)],_0x4861c4[_0x138abd+(-0x217*0x9+-0xd1f+0x82*0x3f)],_0x2cb77e['y']),_0x2cb77e['z']=_0x3113b2(_0x4861c4[_0x138abd+(0x13d9+-0x79c+-0xc2f)],_0x4861c4[_0x138abd+(0xb*-0x137+0x1ad8+0x1*-0xd6a)],_0x2cb77e['z']))),_0x3730d4&&(_0xc8abec(_0x3730d4,_0x522039[_0x5d314c*_0x4c1d4d+(-0x255c+-0x1abe+0x401e)]),_0x3730d4['x']=_0x3113b2(_0x4861c4[_0x138abd+(-0x24b*-0xe+0x1a07+-0x1*0x3a0f)],_0x4861c4[_0x138abd+(0x723*-0x5+-0x1c82+0x4046)],_0x3730d4['x']),_0x3730d4['y']=_0x3113b2(_0x4861c4[_0x138abd+(0xd21+-0x1*0xf43+0x235)],_0x4861c4[_0x138abd+(0xf2f+0x711+0x1*-0x162a)],_0x3730d4['y']),_0x3730d4['z']=_0x3113b2(_0x4861c4[_0x138abd+(-0x1*0x2353+0x1*0x476+0x1ef1*0x1)],_0x4861c4[_0x138abd+(-0xb5c*0x3+0x5cc+0x1c5f)],_0x3730d4['z'])),_0x161910&&(_0xc8abec(_0x161910,_0x522039[_0x5d314c*_0x4c1d4d+(-0x5a*0x35+-0x1e79+0x3120)]),_0x161910['x']=_0x3113b2(_0x4861c4[_0x138abd+(0x116b+0x1*-0x24bb+0x1368)],_0x4861c4[_0x138abd+(-0x242d+0x20c5+0x27*0x17)],_0x161910['x']),_0x161910['y']=_0x3113b2(_0x4861c4[_0x138abd+(0x5e*0x14+0xcce+-0x140c)],_0x4861c4[_0x138abd+(0x172+-0xfd9+0x1*0xe82)],_0x161910['y'])),_0x584b32&&_0x1a1486>-0x1922+-0xffd*-0x1+0x925*0x1){const _0x4154d9=[_0x3e0dbf,_0x53e239,_0x532aaa];for(let _0x526319=0x14*0x131+0x5c4+-0x1d98;_0x526319<-0xdfd*0x1+0x16da+-0x46d*0x2;++_0x526319)for(let _0x4dbf9f=-0x1c8f*0x1+0x36*-0x3b+0x2901;_0x4dbf9f<0x130*-0x11+0x24ab+-0x106c;++_0x4dbf9f)_0x584b32[_0x526319*(-0xa9b+-0x17b+0xc25)+_0x4dbf9f]=_0x4dbf9f<_0x21ae3d?_0x4154d9[_0x526319][_0x5d314c*(0x502+0x13a9+-0x189b)+_0x4dbf9f]*((0x205c+0xa56+-0x2aaa)/(-0x1*-0x14f+-0x625+0x1*0x5d5))-(0x1464+0xc08+-0x40d*0x8):-0x1*-0x1fee+0x2f*-0x83+-0x1*0x7e1;}};}}self['onmessage']=async _0x3973a0=>{var _0x5ece33,_0x42ce8b,_0x5d9456;const {data:_0x7a5443}=_0x3973a0;switch(_0x7a5443['type']){case'initWorker':globalThis['loadUrlLis'+'t']=_0x7a5443['loadUrlLis'+'t'],globalThis['fetchWorke'+'r']=new _0x2a871b(globalThis['loadUrlLis'+'t']);break;case'destroyWor'+'ker':(_0x5ece33=globalThis['fetchWorke'+'r'])==null||_0x5ece33['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['loadUrlLis'+'t']=[];break;case'loadPly':const {url:_0x197fd0,decompress:_0x360532}=_0x7a5443;try{globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x2a871b(globalThis['loadUrlLis'+'t']));const _0x2526ec=await globalThis['fetchWorke'+'r']['fetch'](_0x197fd0);if(!_0x2526ec||!_0x2526ec['body'])self['postMessag'+'e']({'type':'error','data':'Error\x20load'+'ing\x20resour'+'ce','url':_0x197fd0});else{const _0x2c1e11=parseInt(_0x2526ec['headers']['get']('content-le'+'ngth')??'0',-0x1ee5+-0x1*-0x13b1+0xb3e);self['postMessag'+'e']({'type':'totalLengt'+'h','totalLength':_0x2c1e11,'bytes':0x0,'url':_0x197fd0});let _0x4d0d81=await _0x5a0a70(_0x2526ec['body']['getReader'](),_0x533e77=>{self['postMessag'+'e']({'type':'progress','bytes':_0x533e77,'totalLength':_0x2c1e11,'url':_0x197fd0});});if(_0x360532&&_0x4d0d81['isCompress'+'ed']){const _0x4c4b79=_0x1b1d2e(_0x4d0d81),_0xc5df93=(_0x42ce8b=_0x4c4b79==null?void(0x953*-0x3+0x761+0x526*0x4):_0x4c4b79['elements'][0x1d*-0x9d+-0x3*0x53a+0x2177])==null?void(-0x875*0x3+0xee*-0x1c+0x3367*0x1):_0x42ce8b['properties']['map'](_0x3dc767=>_0x3dc767['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x4c4b79,'url':_0x197fd0},_0xc5df93);}else{if(_0x4d0d81['isCompress'+'ed']){const _0x54581e=['chunkData','vertexData'];_0x4d0d81['shData0']&&_0x54581e['push']('shData0','shData1','shData2');const _0x56b5c0=_0x54581e['map'](_0x473509=>{var _0x1aaf9a;return(_0x1aaf9a=_0x4d0d81[_0x473509])==null?void(0x1b*-0x113+0x2152+-0x451):_0x1aaf9a['buffer'];});self['postMessag'+'e']({'type':'splatData','data':_0x4d0d81,'url':_0x197fd0},_0x56b5c0);}else{_0x4d0d81=_0x3f7d52(_0x4d0d81);const _0x47e292=(_0x5d9456=_0x4d0d81==null?void(-0x240a+0x33*-0xd+0x26a1):_0x4d0d81['elements'][-0x3a1*0x6+-0x1eaa+-0x4*-0xd1c])==null?void(0xeba+0x1ea0+-0x2d5a):_0x5d9456['properties']['map'](_0x24e4c4=>_0x24e4c4['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x4d0d81,'url':_0x197fd0},_0x47e292);}}}}catch(_0x3aa4c1){self['postMessag'+'e']({'type':'error','data':_0x3aa4c1['message'],'url':_0x197fd0});}break;}};const _0x3f7d52=_0x1ccbb3=>{var _0x318324;const _0x43e2ad=(_0x318324=_0x1ccbb3==null?void(0x32b*0x3+0x1*0x78f+-0x1110):_0x1ccbb3['elements'][0x4*0x3df+0x1f45+-0x2ec1])==null?void(0x19ef+-0xd70+0xc7f*-0x1):_0x318324['properties']['find'](_0x5d9dd6=>_0x5d9dd6['name']==='opacity');if(_0x43e2ad){for(let _0x498a12=-0x391+-0x15f3+-0x1984*-0x1;_0x498a12<_0x43e2ad['storage']['length'];_0x498a12++)_0x43e2ad['storage'][_0x498a12]=(-0xe91+0x7*-0x181+0x1919)/(0x7ac*-0x5+0x1eab+0x1*0x7b2+Math['exp'](-_0x43e2ad['storage'][_0x498a12]));}return _0x1ccbb3;},_0x1dcedd=_0x1b3ccd=>{const _0x41ca29=[],_0x4c4261=[];let _0x2bafc8;for(let _0x488eaa=-0x76b+-0x24e7+0x655*0x7;_0x488eaa<_0x1b3ccd['length'];++_0x488eaa){const _0x2ee109=_0x1b3ccd[_0x488eaa]['split']('\x20');switch(_0x2ee109[-0xe00*0x2+0x270e+-0xb0e]){case'comment':_0x4c4261['push'](_0x2ee109['slice'](-0x9a1+0x25df+-0x1c3d*0x1)['join']('\x20'));break;case'format':_0x2bafc8=_0x2ee109[0x31*-0x7+0x40*0x13+-0x8*0x6d];break;case'element':_0x41ca29['push']({'name':_0x2ee109[0xb*0x269+0x5*0x17e+-0x21f8],'count':parseInt(_0x2ee109[0x108*-0xb+-0x1*0x350+0xeaa*0x1],-0x181f+0x9*-0x315+0xe*0x3b5),'properties':[]});break;case'property':{if(!_0x5983d2['has'](_0x2ee109[0x1090+0xb*0x337+0x1*-0x33ec]))throw new Error('Unrecogniz'+'ed\x20propert'+'y\x20data\x20typ'+'e\x20\x27'+_0x2ee109[-0x287*-0x3+0x1108+-0x276*0xa]+('\x27\x20in\x20ply\x20h'+'eader'));_0x41ca29[_0x41ca29['length']-(-0x79*-0x28+-0x1d*-0x7c+-0x20f3)]['properties']['push']({'type':_0x2ee109[0x701+-0x1*-0x248b+-0x2b8b],'name':_0x2ee109[0x2637+-0x833*-0x1+-0x2e68],'storage':null,'byteSize':_0x5983d2['get'](_0x2ee109[0x13de+0x1c47+-0x3024*0x1])['BYTES_PER_'+'ELEMENT']});break;}default:throw new Error('Unrecogniz'+'ed\x20header\x20'+'value\x20\x27'+_0x2ee109[0xd40+0x5c*0x5d+-0x67*0x74]+('\x27\x20in\x20ply\x20h'+'eader'));}}return{'elements':_0x41ca29,'format':_0x2bafc8,'comments':_0x4c4261};},_0x40afe9=_0x39ecf3=>{const _0x4e4a54=['min_x','min_y','min_z','max_x','max_y','max_z','min_scale_'+'x','min_scale_'+'y','min_scale_'+'z','max_scale_'+'x','max_scale_'+'y','max_scale_'+'z','min_r','min_g','min_b','max_r','max_g','max_b','min_motion'+'_x','min_motion'+'_y','min_motion'+'_z','max_motion'+'_x','max_motion'+'_y','max_motion'+'_z','min_time_s'+'cale','max_time_s'+'cale','min_time','max_time'],_0x4ad25b=['packed_pos'+'ition','packed_rot'+'ation','packed_sca'+'le','packed_col'+'or','packed_mot'+'ion','packed_tim'+'e'],_0x485e4f=new Array(-0x1e90*-0x1+0x135e+-0x31c1)['fill']('')['map']((_0x25c5cb,_0x4b46f4)=>'f_rest_'+_0x4b46f4),_0xd1f598=()=>_0x39ecf3[0x53*0x64+0x1ae+-0x221a]['name']==='chunk'&&_0x39ecf3[0x9fe+0x3a4+0x6d1*-0x2]['properties']['every']((_0xa7a92,_0xa43f8b)=>_0xa7a92['name']===_0x4e4a54[_0xa43f8b]&&_0xa7a92['type']==='float')&&_0x39ecf3[-0x1772+0x136*0x5+0x1165]['name']==='vertex'&&_0x39ecf3[0xfb5*-0x1+0x6a1+0x915]['properties']['every']((_0x6e9ee6,_0xb7d2a)=>_0x6e9ee6['name']===_0x4ad25b[_0xb7d2a]&&_0x6e9ee6['type']==='uint'),_0x500d02=()=>_0x39ecf3[0xb*-0x371+0x1*0x2572+0x6b]['name']==='sh'&&[-0xad7+0x359*0x4+-0x284,0x1266+-0x3b3+0x1*-0xe9b,0x1*0xf3+0x2*-0x83+0x40]['indexOf'](_0x39ecf3[-0x1*-0x9e3+0x2ed*0x7+0xf2e*-0x2]['properties']['length'])!==-(0x1fe1+-0x1f2*0x5+-0x1626)&&_0x39ecf3[-0x883*0x3+0x44c+-0x93*-0x25]['properties']['every']((_0x349218,_0x7af442)=>_0x349218['name']===_0x485e4f[_0x7af442]&&_0x349218['type']==='uchar');return _0x39ecf3['length']===0x26d6+0xf45+-0x3619&&_0xd1f598()||_0x39ecf3['length']===-0x25*0x6d+0x1*0x1393+0x3cf*-0x1&&_0xd1f598()&&_0x500d02();},_0x114502=_0x30f94b=>_0x30f94b['length']===0x169e*0x1+0x1d59+-0x9*0x5c6&&_0x30f94b[-0x2243+0x2d*-0xa+0x2405]['name']==='vertex'&&_0x30f94b[0x1086+0x20ab+-0x3131]['properties']['every'](_0x3d3f66=>_0x3d3f66['type']==='float'),_0x54ab6a=async(_0x479584,_0x137484,_0x41cd20)=>{const _0x1a97bd=new _0x49447e();_0x1a97bd['comments']=_0x41cd20;const _0x421b81=_0x137484[-0x877+-0x3*0xcef+0x2f44*0x1]['count'],_0x4073f5=_0x137484[-0x4*-0x33c+-0x1734+0xa44]['properties']['length'],_0x24666e=_0x137484[-0x11a3+0x7*-0xce+0x1746]['count'],_0x70e2c=_0x137484[0x449+0xc4c+-0x1094]['properties']['some'](_0x58ac3d=>_0x58ac3d['name']==='packed_tim'+'e'),_0x3e2c56=(_0x5df150=>{const _0x4555cf=Math['ceil'](Math['sqrt'](_0x5df150)),_0x46d062=Math['ceil'](_0x5df150/_0x4555cf);return _0x4555cf*_0x46d062;})(_0x24666e);_0x1a97bd['numSplats']=_0x24666e,_0x1a97bd['is4D']=_0x70e2c,_0x1a97bd['chunkData']=new Float32Array(_0x421b81*_0x4073f5),_0x1a97bd['vertexData']=new Uint32Array(_0x3e2c56*(0x1a15+0x1*0x1dbd+-0x37cc));const _0x25cac5=async(_0x1c81df,_0xee71ad)=>{const _0x2f6430=new Uint8Array(_0x1c81df);let _0x18214b=-0x21a5+0xfbe+0x11e7;for(;_0x18214b<_0xee71ad;){for(;_0x479584['remaining']===-0x3c8*0x1+0x1*-0x12f6+-0x47*-0x52;)await _0x479584['read']();const _0x1556c2=Math['min'](_0xee71ad-_0x18214b,_0x479584['remaining']),_0xc0ac5c=_0x479584['data'];for(let _0x2f883c=-0x2e6+-0xb17+0xdfd;_0x2f883c<_0x1556c2;++_0x2f883c)_0x2f6430[_0x18214b++]=_0xc0ac5c[_0x479584['head']++];}};if(await _0x25cac5(_0x1a97bd['chunkData']['buffer'],_0x421b81*_0x4073f5*(-0x1*0x1e29+-0x78e*0x1+0x25bb)),await _0x25cac5(_0x1a97bd['vertexData']['buffer'],_0x24666e*(-0x2fe+-0x1*0x2263+0x2567)*(0x13c2+-0x8*-0x461+-0x36c6)),_0x137484['length']===0x23a2+0x244c+0x43b*-0x11){const _0xf77135=_0x3e2c56*(-0xeb+-0xdf0+0x43*0x39),_0x5689e3=new Uint8Array(_0xf77135),_0x56bb77=new Uint8Array(_0xf77135),_0x4c1d49=new Uint8Array(_0xf77135),_0x4f2166=-0xf9+0x246e+-0x1f75*0x1,_0x579307=_0x137484[0x8*-0x16f+-0x169b+0x2215]['properties']['length']/(0x517*0x7+0xbb*0x1d+0x3*-0x12ef),_0xf22baa=new Uint8Array(_0x4f2166*_0x579307*(0x1d09*-0x1+0x1*0x11+0x1*0x1cfb));for(let _0x42cf94=0x1ba3+0x1*0xd3+-0x1c76;_0x42cf94<_0x1a97bd['numSplats'];_0x42cf94+=_0x4f2166){const _0x9c381e=Math['min'](_0x4f2166,_0x1a97bd['numSplats']-_0x42cf94);await _0x25cac5(_0xf22baa['buffer'],_0x9c381e*_0x579307*(0x20e4+0x73*0x2f+-0x35fe));for(let _0x5a2ad8=-0xb76+0x25d9*0x1+-0x1a63;_0x5a2ad8<_0x9c381e;++_0x5a2ad8)for(let _0x593f87=0x7*0x583+-0x19ea+-0xcab;_0x593f87<0x1*-0x675+0x1*-0xddf+0x1463;++_0x593f87){const _0x2929cf=(_0x42cf94+_0x5a2ad8)*(-0x171+-0x1d33+0x1eb4)+_0x593f87;_0x593f87<_0x579307?(_0x5689e3[_0x2929cf]=_0xf22baa[(_0x5a2ad8*(0x4c4*0x1+0x683*-0x1+0x1c2*0x1)+(-0x17*-0x67+0x280+-0xbc1))*_0x579307+_0x593f87],_0x56bb77[_0x2929cf]=_0xf22baa[(_0x5a2ad8*(-0x1*0x58a+-0x16*-0x3b+0x1*0x7b)+(-0x10*-0x1e6+-0x33d*-0x1+-0x219c))*_0x579307+_0x593f87],_0x4c1d49[_0x2929cf]=_0xf22baa[(_0x5a2ad8*(-0x102b*0x1+-0x11a7+0x21d5)+(0x16ab*0x1+0x1b*0xa8+0x2861*-0x1))*_0x579307+_0x593f87]):(_0x5689e3[_0x2929cf]=0x6a*0x26+0x3*0x9a5+-0x2c2c,_0x56bb77[_0x2929cf]=0x177a+0x1*0x1d13+0x1*-0x340e,_0x4c1d49[_0x2929cf]=0x2372+-0x31d*-0x5+-0x3284);}}_0x1a97bd['shData0']=_0x5689e3,_0x1a97bd['shData1']=_0x56bb77,_0x1a97bd['shData2']=_0x4c1d49,_0x1a97bd['shBands']={0x3:0x1,0x8:0x2,0xf:0x3}[_0x579307];}else _0x1a97bd['shBands']=-0x23*-0x2f+-0x6c8+0x5b;return _0x1a97bd;},_0x4b82dc=async(_0x5333ec,_0x518058,_0x2c7e9d)=>{const _0x163bb3=_0x518058[-0x999*-0x3+0x27e*0x2+-0x21c7],_0x23171f=_0x163bb3['properties'],_0x3519f3=_0x23171f['length'],_0x311d22=_0x23171f['map'](_0x514100=>_0x514100['storage']),_0x2bbfaf=_0x23171f['reduce']((_0x11323c,_0x21ebf6)=>_0x11323c+_0x21ebf6['byteSize'],-0x1*-0x1ded+-0x172d+-0x6c0);let _0x14ca85=-0x1*-0x1c3f+0xb95+-0x2*0x13ea,_0x192e06;const _0x14d638=()=>{const _0x3c64f7=_0x5333ec['data']['buffer'];(_0x192e06==null?void(-0x673+0x43*-0x18+0x1*0xcbb):_0x192e06['buffer'])!==_0x3c64f7&&(_0x192e06=new Float32Array(_0x3c64f7,-0x198a+-0x8bd*0x3+0x33c1,_0x3c64f7['byteLength']/(0x1b6f*-0x1+0x1fb3+-0x440)));};for(_0x14d638();_0x14ca85<_0x163bb3['count'];){for(;_0x5333ec['remaining']<_0x2bbfaf;)await _0x5333ec['read'](),_0x14d638();const _0x1e3330=Math['min'](_0x163bb3['count']-_0x14ca85,Math['floor'](_0x5333ec['remaining']/_0x2bbfaf));for(let _0x454c87=-0x22c7+0x3f*-0x4b+0x353c;_0x454c87<_0x3519f3;++_0x454c87){const _0x33fcd7=_0x311d22[_0x454c87];for(let _0x3ccb14=0x313*0x4+-0x1e*0xd4+0x49*0x2c;_0x3ccb14<_0x1e3330;++_0x3ccb14)_0x33fcd7[_0x3ccb14+_0x14ca85]=_0x192e06[_0x3ccb14*_0x3519f3+_0x454c87];}_0x14ca85+=_0x1e3330,_0x5333ec['head']+=_0x1e3330*_0x2bbfaf;}return new _0x277811(_0x518058,_0x2c7e9d);},_0x49d949=async(_0x249c6a,_0x261145,_0x4a952b)=>{for(let _0x1841b4=0x57*0x62+0x5b3*0x1+0x1*-0x2701;_0x1841b4<_0x261145['length'];++_0x1841b4){const _0x11f701=_0x261145[_0x1841b4],_0x567c83=_0x11f701['properties']['reduce']((_0x5bb277,_0x23e66c)=>_0x5bb277+_0x23e66c['byteSize'],0x20d0+-0x1*0x1c0b+0x3*-0x197),_0xd26667=_0x11f701['properties']['map'](_0x16a491=>{if(_0x16a491['storage'])switch(_0x16a491['type']){case'char':return(_0x51ce8c,_0xe6f124)=>{_0x16a491['storage'][_0xe6f124]=_0x51ce8c['getInt8']();};case'uchar':return(_0x31573f,_0x5b4c0e)=>{_0x16a491['storage'][_0x5b4c0e]=_0x31573f['getUint8']();};case'short':return(_0x1ffe1e,_0x594400)=>{_0x16a491['storage'][_0x594400]=_0x1ffe1e['getInt16']();};case'ushort':return(_0x2def6c,_0x481373)=>{_0x16a491['storage'][_0x481373]=_0x2def6c['getUint16']();};case'int':return(_0x271a49,_0x389537)=>{_0x16a491['storage'][_0x389537]=_0x271a49['getInt32']();};case'uint':return(_0x2753fb,_0x297649)=>{_0x16a491['storage'][_0x297649]=_0x2753fb['getUint32']();};case'float':return(_0x2965d4,_0x559f83)=>{_0x16a491['storage'][_0x559f83]=_0x2965d4['getFloat32']();};case'double':return(_0x383d6d,_0x2fb4de)=>{_0x16a491['storage'][_0x2fb4de]=_0x383d6d['getFloat64']();};default:throw new Error('Unsupporte'+'d\x20property'+'\x20data\x20type'+'\x20\x27'+_0x16a491['type']+('\x27\x20in\x20ply\x20h'+'eader'));}else return _0x3d0723=>{_0x3d0723['head']+=_0x16a491['byteSize'];};});let _0xe415d0=-0x2023+0xd4d+0x12d6*0x1;for(;_0xe415d0<_0x11f701['count'];){for(;_0x249c6a['remaining']<_0x567c83;)await _0x249c6a['read']();const _0x23e804=Math['min'](_0x11f701['count']-_0xe415d0,Math['floor'](_0x249c6a['remaining']/_0x567c83));for(let _0x53e333=-0x132c+-0x1a1a+-0xbe*-0x3d;_0x53e333<_0x23e804;++_0x53e333){for(let _0x86b2f9=0x2615*-0x1+0x44e+-0x1*-0x21c7;_0x86b2f9<_0x11f701['properties']['length'];++_0x86b2f9)_0xd26667[_0x86b2f9](_0x249c6a,_0xe415d0);_0xe415d0++;}}}return new _0x277811(_0x261145,_0x4a952b);},_0x5a0a70=async(_0x373ff6,_0x215b42=null)=>{const _0x39a113=(_0x109cc8,_0x6f1607)=>{const _0x484069=_0x109cc8['length']-_0x6f1607['length'];let _0x1123a9,_0x4c6290;for(_0x1123a9=-0x11*-0x59+-0x285*-0x2+-0xaf3;_0x1123a9<=_0x484069;++_0x1123a9){for(_0x4c6290=0x112+-0xbdb+-0xb*-0xfb;_0x4c6290<_0x6f1607['length']&&_0x109cc8[_0x1123a9+_0x4c6290]===_0x6f1607[_0x4c6290];++_0x4c6290);if(_0x4c6290===_0x6f1607['length'])return _0x1123a9;}return-(0x1*0x25cd+0xc92*0x2+-0x3ef0);},_0x48d762=(_0xb98186,_0x3bab5c)=>{if(_0xb98186['length']<_0x3bab5c['length'])return!(-0x1464+0x1c32+-0x7cd);for(let _0x491eab=-0x10ac+-0xd*0x245+0x2e2d*0x1;_0x491eab<_0x3bab5c['length'];++_0x491eab)if(_0xb98186[_0x491eab]!==_0x3bab5c[_0x491eab])return!(0x696+-0x23d6+0x1*0x1d41);return!(-0x28*0xf4+-0x173b+0x3d5b);},_0x5e8667=new _0x3e1b6a(_0x373ff6,_0x215b42);let _0x12e130;for(;;){if(await _0x5e8667['read'](),_0x5e8667['tail']>=_0x1ffce7['length']&&!_0x48d762(_0x5e8667['data'],_0x1ffce7))throw new Error('Invalid\x20pl'+'y\x20header');if(_0x12e130=_0x39a113(_0x5e8667['data'],_0x9a62e1),_0x12e130!==-(0x6b0+0x2635+-0x2ce4))break;}const _0x243b3c=new TextDecoder('ascii')['decode'](_0x5e8667['data']['subarray'](-0x16cc+-0x217+0x18e3,_0x12e130))['split']('\x0a'),{elements:_0x16a386,format:_0xaeaca8,comments:_0x16b384}=_0x1dcedd(_0x243b3c);if(_0xaeaca8!=='binary_lit'+'tle_endian')throw new Error('Unsupporte'+'d\x20ply\x20form'+'at');return _0x5e8667['head']=_0x12e130+_0x9a62e1['length'],_0x5e8667['compact'](),await((async()=>_0x40afe9(_0x16a386)?await _0x54ab6a(_0x5e8667,_0x16a386,_0x16b384):(_0x16a386['forEach'](_0x11846a=>{_0x11846a['properties']['forEach'](_0x721006=>{const _0x473aca=_0x5983d2['get'](_0x721006['type']);if(_0x473aca){const _0x28846c=new _0x473aca(_0x11846a['count']);_0x721006['storage']=_0x28846c;}});}),_0x114502(_0x16a386)?await _0x4b82dc(_0x5e8667,_0x16a386,_0x16b384):await _0x49d949(_0x5e8667,_0x16a386,_0x16b384)))());},_0x1b1d2e=_0x3936c3=>{const {numSplats:_0x5941a2,chunkData:_0x3b2a66,chunkSize:_0x21f8bb,vertexData:_0x86464,shData0:_0x34420b,shData1:_0x3e9609,shData2:_0x247059,shBands:_0x4ed5e4,comments:_0x200f65,is4D:_0x58b68a}=_0x3936c3,_0x33d3c9=['x','y','z','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','f_dc_0','f_dc_1','f_dc_2','opacity'];if(_0x58b68a&&_0x33d3c9['push']('t','t_scale','motion_0','motion_1','motion_2'),_0x4ed5e4>-0x15b0+-0xde*0x1a+-0x12a*-0x26){const _0x5a6535=[];for(let _0x50e556=-0x258*0xd+0x203d+-0x1c5;_0x50e556<-0x2*0x126d+0x1d24+0x7e3;++_0x50e556)_0x5a6535['push']('f_rest_'+_0x50e556);_0x33d3c9['splice'](_0x33d3c9['indexOf']('f_dc_0')+(-0x1f57*0x1+0x268a*0x1+-0x732),0x1fe6+0x15c6+-0x35ac,..._0x5a6535);}const _0x2a0318={};_0x33d3c9['forEach'](_0x2b8561=>{_0x2a0318[_0x2b8561]=new Float32Array(_0x5941a2);});const _0x5583b3=new _0x281b23(),_0x3b8d4c=new _0x540c62(),_0x2ec1c0=new _0x281b23(),_0x106070=new _0x326a5a(),_0x389f97=new _0x281b23(),_0x221dda=new _0x281b23(),_0x1be8e3=_0x4ed5e4>0xb8*0x7+-0x1a26+0x151e?new Float32Array(0xc09+-0x1a4e+0xe72):null,_0x21734b=new _0x6bc7ae(_0x3b2a66,_0x21f8bb,_0x86464,_0x34420b,_0x3e9609,_0x247059,_0x4ed5e4,_0x5583b3,_0x3b8d4c,_0x2ec1c0,_0x106070,_0x389f97,_0x221dda,_0x1be8e3);for(let _0x2ed759=-0x1ad2*0x1+0xdc6+0x4*0x343;_0x2ed759<_0x5941a2;++_0x2ed759){_0x21734b['read'](_0x2ed759),_0x2a0318['x'][_0x2ed759]=_0x5583b3['x'],_0x2a0318['y'][_0x2ed759]=_0x5583b3['y'],_0x2a0318['z'][_0x2ed759]=_0x5583b3['z'],_0x2a0318['rot_1'][_0x2ed759]=_0x3b8d4c['x'],_0x2a0318['rot_2'][_0x2ed759]=_0x3b8d4c['y'],_0x2a0318['rot_3'][_0x2ed759]=_0x3b8d4c['z'],_0x2a0318['rot_0'][_0x2ed759]=_0x3b8d4c['w'],_0x2a0318['scale_0'][_0x2ed759]=_0x2ec1c0['x'],_0x2a0318['scale_1'][_0x2ed759]=_0x2ec1c0['y'],_0x2a0318['scale_2'][_0x2ed759]=_0x2ec1c0['z'],_0x2a0318['motion_0'][_0x2ed759]=_0x389f97['x'],_0x2a0318['motion_1'][_0x2ed759]=_0x389f97['y'],_0x2a0318['motion_2'][_0x2ed759]=_0x389f97['z'],_0x2a0318['t_scale'][_0x2ed759]=_0x221dda['x'],_0x2a0318['t'][_0x2ed759]=_0x221dda['y'],_0x2a0318['f_dc_0'][_0x2ed759]=(_0x106070['x']-(0x1bc0+0x266*0x2+-0x2*0x1046+0.5))/_0xea6bf,_0x2a0318['f_dc_1'][_0x2ed759]=(_0x106070['y']-(0x1*-0x1877+0x200*0x2+0x1*0x1477+0.5))/_0xea6bf,_0x2a0318['f_dc_2'][_0x2ed759]=(_0x106070['z']-(0xab5+0xaee+-0x15a3+0.5))/_0xea6bf;const _0x56217f=_0x106070['w']<=-0x170f+0x1d*-0x5+0x7e*0x30?-(0x249a+-0x4*-0x431+-0xe*0x3cd):_0x106070['w']>=0xeca+-0x1591+0x6c8?0x2*0x3fb+0xa79+0x1247*-0x1:-Math['log']((-0x177d+0x18b3+0x1*-0x135)/_0x106070['w']-(0x3f*-0xf+0xf2c+0x1a*-0x71));if(_0x2a0318['opacity'][_0x2ed759]=(0x16f5+0x1*0xe80+-0x2574)/(-0xfac+-0x2d7*-0x2+0x9ff+Math['exp'](-_0x56217f)),_0x1be8e3){for(let _0x5ab14e=0x8*0x2db+0x16c3+-0x2d9b;_0x5ab14e<0xa*-0x373+0x2f9*0x6+0x10d5;++_0x5ab14e)_0x2a0318['f_rest_'+_0x5ab14e][_0x2ed759]=_0x1be8e3[_0x5ab14e];}}const _0x59efa9=[{'count':_0x5941a2,'name':'vertex','properties':_0x33d3c9['map'](_0x38d8a5=>({'byteSize':0x4,'name':_0x38d8a5,'type':'float','storage':_0x2a0318[_0x38d8a5]}))}];return new _0x277811(_0x59efa9,_0x200f65);};}class ok extends me{constructor(_0x556441){super(),h(this,'worker'),h(this,'loadUrlLis'+'t'),(this['loadUrlLis'+'t']=_0x556441,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+nk['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','loadUrlList':this['loadUrlLis'+'t']});}['loadPly'](_0x4da71f,_0x503306,_0x4db5ee=(_0x4e2295,_0x4175a4)=>{},_0x285fcc=(_0x2eead4,_0x452b3f,_0x4dd0d6)=>{},_0x14f05a=(_0x3f3a65,_0x558b40)=>{}){var _0x174bd8;return(_0x174bd8=this['worker'])==null||_0x174bd8['postMessag'+'e']({'type':'loadPly','url':_0x4da71f,'decompress':_0x503306}),new Promise((_0xe7ac60,_0x270d00)=>{if(!this['worker']){_0x270d00(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x26f208=>{if(!this['worker'])return;const {data:_0x1150b4}=_0x26f208;if(_0x4da71f===_0x1150b4['url'])switch(_0x1150b4['type']){case'totalLengt'+'h':_0x4db5ee==null||_0x4db5ee(_0x1150b4['totalLengt'+'h'],_0x1150b4['url']);break;case'progress':_0x285fcc==null||_0x285fcc(_0x1150b4['bytes'],_0x1150b4['totalLengt'+'h'],_0x1150b4['url']);break;case'splatData':_0xe7ac60(_0x1150b4['data']);break;case'error':_0x14f05a==null||_0x14f05a(_0x1150b4['data'],_0x1150b4['url']);break;}};});}['destroy'](){this['loadUrl']='',this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(0x827*-0x1+-0x260f+0x93e*0x5));}}class lk{constructor(_0x4aed3f,_0x473307){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'readWorker'),(console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','Register\x20P'+'lyParser.c'+'onstructor'),this['app']=_0x4aed3f,this['maxRetries']=_0x473307,this['urlList']=[],this['gsplatReso'+'urce']=null,this['readWorker']=null,this['totalRecei'+'ved']=0x1b2f*0x1+-0x91+0x1a9e*-0x1);}async['load'](_0x33bd62,_0x576e39,_0x1827a6){var _0x4ee2af,_0x40bc27,_0x21bbdc;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','PlyParser.'+'load'),this['urlList']=[],_0x33bd62['load']['includes'](',')?this['urlList']=_0x33bd62['load']['split'](','):this['urlList']['push'](_0x33bd62['load']);const _0x5dbe0d=_0x1827a6['data']['createTime']!==((_0x40bc27=(_0x4ee2af=this['onlyOneAss'+'et'])==null?void(0x124+-0x1*0x2371+-0x224d*-0x1):_0x4ee2af['data'])==null?void(0x2007+-0x1ab+-0x3a*0x86):_0x40bc27['createTime']);(!this['readWorker']||_0x5dbe0d)&&((_0x21bbdc=this['readWorker'])==null||_0x21bbdc['destroy'](),this['readWorker']=new ok(this['urlList']));const _0x5a70fa=_0x1827a6['data']['loadIndex']>=-0x213b*-0x1+-0x37*0xc+-0x1ea7?_0x1827a6['data']['loadIndex']:0x505+-0x12c9+0x6e2*0x2,_0x576131=_0x1827a6['data']['loadMode']==='all'?this['urlList']['length']-_0x5a70fa:_0x5a70fa+(-0x13fb+-0xf04+0x2300),_0x572925=_0x1827a6['data']['timeOption'],_0x5b3b9e=_0x1827a6['data']['events'];for(let _0x223e1f=_0x5a70fa;_0x223e1f<_0x576131;_0x223e1f++)await this['loadGsplat'+'Data'](this['urlList'],_0x576e39,_0x1827a6,_0x223e1f,_0x572925,_0x5b3b9e,_0x576131);_0x5b3b9e['fire']('loadAllAss'+'etsDone');}async['loadGsplat'+'Data'](_0x53467b,_0x39e48c,_0x3814df,_0x1a7562,_0x565300,_0x44f29a,_0x3764ac){var _0x127c29,_0x22a9ce,_0x497025;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','loadGsplat'+'Data',_0x53467b[_0x1a7562]['trim'](),_0x1a7562);const _0x21b664=_0x565300[(0x1e8f*0x1+-0x195*-0x5+-0x2676)*_0x1a7562]+_0x565300[(0x1*0x11c1+0xa8c+0x1c4b*-0x1)*_0x1a7562+(-0x1f47+0x1*0xa49+0x14ff)],_0x5d139b=_0x53467b[_0x1a7562]['trim']();globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('loadTime','=========='+'=========='+'=========='+'=========='+'=========='+'====='),console['log']('loadTime','start\x20load'+'\x20ply\x20data',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(0x1004+-0x1195+0x1eb*0xb))['toFixed'](0x1e67+0x1*0x1723+0x1*-0x3588));try{const _0x321b19=await((_0x127c29=this['readWorker'])==null?void(0x2624+0x25f0+0x1305*-0x4):_0x127c29['loadPly'](_0x5d139b,_0x3814df['data']['decompress'],()=>{this['totalRecei'+'ved']=0x1dd1+-0x102e+-0xda3*0x1;},(_0x278d0c,_0x2e5d9c)=>{this['totalRecei'+'ved']+=_0x278d0c,_0x3814df&&_0x44f29a['fire']('progress',_0x2e5d9c*_0x1a7562/_0x3764ac+this['totalRecei'+'ved']/_0x3764ac,_0x2e5d9c);},(_0xf1daf5,_0x532205)=>{debugger;console['warn']('ERROE\x20Load'+'\x20Ply',_0x532205,_0xf1daf5);}));let _0x53d3fb;console['log']('loadTime','load\x20ply\x20d'+'ata\x20done',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(0x3*-0x512+-0x1181+0x343f))['toFixed'](0x2214+0x25a*0xa+-0x3996)),_0x321b19['isCompress'+'ed']?(_0x53d3fb=new ak(),_0x53d3fb['comments']=_0x321b19['comments'],_0x53d3fb['numSplats']=_0x321b19['numSplats'],_0x53d3fb['is4D']=_0x321b19['is4D'],_0x53d3fb['chunkData']=_0x321b19['chunkData'],_0x53d3fb['vertexData']=_0x321b19['vertexData'],_0x53d3fb['shData0']=_0x321b19['shData0'],_0x53d3fb['shData1']=_0x321b19['shData1'],_0x53d3fb['shData2']=_0x321b19['shData2'],_0x53d3fb['shBands']=_0x321b19['shBands']):_0x53d3fb=new qn(_0x321b19['elements'],_0x321b19['comments']),_0x3814df['fire']('load:data',_0x53d3fb),_0x53d3fb['isCompress'+'ed']||_0x3814df['data']['reorder'];const _0x325a2a=_0x3814df['data']['createTime']!==((_0x497025=(_0x22a9ce=this['onlyOneAss'+'et'])==null?void(-0x387*0x1+0x7*-0x38b+-0xc4*-0x25):_0x22a9ce['data'])==null?void(-0x25a2+-0x1c87*0x1+0x4229*0x1):_0x497025['createTime']);this['gsplatReso'+'urce']&&!_0x325a2a?this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x53d3fb['isCompress'+'ed']?await _0x53d3fb['decompress']():_0x53d3fb,_0x565300,_0x21b664,_0x3814df,_0x44f29a):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),this['gsplatReso'+'urce']=new EC(this['app']['graphicsDe'+'vice'],_0x53d3fb['isCompress'+'ed']?await _0x53d3fb['decompress']():_0x53d3fb),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x565300,this['onlyOneAss'+'et']=_0x3814df),_0x39e48c(null,this['gsplatReso'+'urce']);}catch(_0x46f459){_0x39e48c(_0x46f459,null);}}['open'](_0x5a588d,_0x27b6e9){return _0x27b6e9;}}async function ck(){const _0x3f9708='super4d-ca'+'che-v1',_0x50fb5b={'maxAge':0x202fbf000,'maxSize':0x280000000},_0x36c8e6=-0x10*0x184+-0x1*0x3c2+0x1c02+0.28209479177387814;class _0x46edd6{constructor(_0x490174={}){this['options']={..._0x50fb5b,..._0x490174},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=-0x899*0x4+-0x3*0x317+0x2ba9,this['initialize'+'d']=!(0x7*0x28b+-0x8d6+0x8f6*-0x1);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x3f9708);const _0x368f3e=await this['cache']['keys'](),_0x878270=[];for(const _0x4e2d0b of _0x368f3e){const _0x5b3aab=_0x4e2d0b['url'],_0x2a143f=await this['cache']['match'](_0x5b3aab);if(_0x2a143f){const _0x56aa38=(await _0x2a143f['blob']())['size'],_0x4888f5=_0x2a143f['headers']['get']('x-cache-ti'+'me');_0x4888f5&&_0x878270['push']({'url':_0x5b3aab,'size':_0x56aa38,'cacheTime':parseInt(_0x4888f5)});}}_0x878270['sort']((_0x4f3152,_0xa6c2f7)=>_0x4f3152['cacheTime']-_0xa6c2f7['cacheTime']);for(const _0x4798e0 of _0x878270)this['cacheSizes']['set'](_0x4798e0['url'],_0x4798e0['size']),this['currentSiz'+'e']+=_0x4798e0['size'],this['lruList']['push'](_0x4798e0['url']);}catch(_0x394485){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x394485);}this['initialize'+'d']=!(0x26f*-0x8+0x709+0xc6f);}}async['get'](_0x20915f){if(await this['init'](),!this['cache'])return null;try{const _0x17acd4=await this['cache']['match'](_0x20915f);if(!_0x17acd4)return null;const _0x4a9e60=_0x17acd4['headers']['get']('x-cache-ti'+'me');return _0x4a9e60&&Date['now']()-parseInt(_0x4a9e60)>this['options']['maxAge']?(await this['delete'](_0x20915f),null):(this['updateLRU'](_0x20915f),_0x17acd4);}catch{return null;}}async['set'](_0xbc235e,_0x2ba17f){if(!(!this['cache']||_0xbc235e['startsWith']('blob:')))try{const _0x2f9f3a=_0x2ba17f['clone'](),_0x3ffd40=await _0x2f9f3a['blob'](),_0x545130=_0x3ffd40['size'];this['currentSiz'+'e']+_0x545130>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x545130);const _0x970cf9=new Headers(_0x2f9f3a['headers']);_0x970cf9['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0xe52cf7=new Response(_0x3ffd40,{'status':_0x2f9f3a['status'],'statusText':_0x2f9f3a['statusText'],'headers':_0x970cf9});await this['cache']['put'](_0xbc235e,_0xe52cf7),this['cacheSizes']['set'](_0xbc235e,_0x545130),this['currentSiz'+'e']+=_0x545130,this['updateLRU'](_0xbc235e);}catch(_0x55ba97){console['error']('Cache\x20set\x20'+'error:',_0x55ba97);}}['updateLRU'](_0x3c0f01){const _0x7a0c34=this['lruList']['indexOf'](_0x3c0f01);_0x7a0c34>-(-0xac2+-0x1e6b+0x292e)&&this['lruList']['splice'](_0x7a0c34,-0x21ac+-0x7a*0x7+-0x2503*-0x1),this['lruList']['push'](_0x3c0f01);}async['cleanupSpa'+'ce'](_0x5a6b5e){const _0x40790f=this['options']['maxSize']*(0x15*0x17e+-0x239b*0x1+0x1*0x445+0.9);if(!(this['currentSiz'+'e']<=_0x40790f))for(;this['lruList']['length']>-0x1*-0x1f86+-0x14b7+-0xacf*0x1&&this['currentSiz'+'e']>_0x40790f;){const _0x3c049f=this['lruList']['shift']();_0x3c049f&&await this['delete'](_0x3c049f);}}async['delete'](_0x1b64de){if(this['cache'])try{await this['cache']['delete'](_0x1b64de);const _0x5ae053=this['cacheSizes']['get'](_0x1b64de)||0x2051+0x3*-0x6f3+-0x16f*0x8;this['currentSiz'+'e']-=_0x5ae053,this['cacheSizes']['delete'](_0x1b64de);const _0x5db08f=this['lruList']['indexOf'](_0x1b64de);_0x5db08f>-(0x6*-0x25+0x1*0x1b7d+-0xd4f*0x2)&&this['lruList']['splice'](_0x5db08f,0x200b+-0x1*0x3f+-0xa99*0x3);}catch(_0x59c10c){console['error']('Cache\x20dele'+'te\x20error:',_0x59c10c);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x4de079=>Promise['all'](_0x4de079['map'](_0x2294fe=>{var _0x198ebe;return(_0x198ebe=this['cache'])==null?void(-0x3ee+-0xe94+0x1282):_0x198ebe['delete'](_0x2294fe);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x25*0xf+0x2666+0x5*-0x81d;}catch(_0x45d90d){console['error']('Cache\x20clea'+'r\x20error:',_0x45d90d);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x674+0x16*0x163+-0x24f6;}}class _0xf012ff{constructor(_0x5eeace=[],_0x5e2eb6={}){this['cacheManag'+'er']=new _0x46edd6(_0x5e2eb6['cache']),this['retryCount']=_0x5e2eb6['retryCount']||0x13f8+-0x10bd+-0x338*0x1,this['retryDelay']=_0x5e2eb6['retryDelay']||-0x12a8+-0x6*-0x59f+-0x17*0x92,this['maxConcurr'+'ency']=_0x5e2eb6['maxConcurr'+'ency']||-0x1a08+-0xf48+0x2956,this['downloadQu'+'eue']=_0x5eeace,this['isProcessi'+'ngDownload'+'Queue']=!(0x2*-0x572+-0x1f0f+0x29f4),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(0x67a*-0x6+-0x330+0x2a0c);this['downloadQu'+'eue']['length']>0xe2a+-0x306+-0x2e*0x3e;)try{const _0x388854=this['downloadQu'+'eue']['splice'](-0x25c0+-0x174d*-0x1+0xe73,this['maxConcurr'+'ency'])['map'](_0x5592d7=>{if(!this['pendingRes'+'ponses']['has'](_0x5592d7)){const _0x1489cb=this['download'](_0x5592d7);return this['pendingRes'+'ponses']['set'](_0x5592d7,_0x1489cb),_0x1489cb['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x5592d7);});}return Promise['resolve']();});await Promise['all'](_0x388854);}catch(_0xb58fa9){console['error']('Download\x20e'+'rror:',_0xb58fa9);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(-0x11*-0x109+0x1953+-0x2aeb);}}}async['fetch'](_0x4111ca,_0x16c69a={}){if(this['pendingRes'+'ponses']['has'](_0x4111ca))return this['pendingRes'+'ponses']['get'](_0x4111ca);const {forceRefresh:_0x631a76=!(0x15ed+0x67d*-0x1+-0x1*0xf6f),..._0x3614ec}=_0x16c69a;this['pendingRes'+'ponses']['set'](_0x4111ca,this['download'](_0x4111ca,_0x3614ec));const _0xb1ff32=await this['pendingRes'+'ponses']['get'](_0x4111ca);return this['pendingRes'+'ponses']['delete'](_0x4111ca),_0xb1ff32;}async['download'](_0x268a97,_0x4a719c={}){var _0x3a1d71;await((_0x3a1d71=this['cacheManag'+'er'])==null?void(0x221*-0x7+0xc2a*-0x1+-0xd*-0x215):_0x3a1d71['init']());const {forceRefresh:_0x33faee=!(0xcf5*0x1+-0x1c5c+-0x11*-0xe8),..._0x6bf309}=_0x4a719c;_0x33faee&&await this['cacheManag'+'er']['delete'](_0x268a97);const _0xbc0d1e=await this['cacheManag'+'er']['get'](_0x268a97);if(_0xbc0d1e)return _0xbc0d1e;let _0x520b68;for(let _0x28df6f=0xb75+-0x76f*0x3+0xad8;_0x28df6f<this['retryCount'];_0x28df6f++)try{const _0x1bd704=await fetch(_0x268a97,_0x6bf309);if(!_0x1bd704['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x1bd704['status']);return await this['cacheManag'+'er']['set'](_0x268a97,_0x1bd704),_0x1bd704;}catch(_0x5d2d4c){console['error']('Download\x20e'+'rror:',_0x5d2d4c),_0x520b68=_0x5d2d4c,_0x28df6f<this['retryCount']-(-0xefe*0x1+0x26ed+-0x17ee)&&await new Promise(_0x1558a9=>setTimeout(_0x1558a9,this['retryDelay']*(_0x28df6f+(0xb97+-0xc4*-0x1e+0x228e*-0x1))));}throw _0x520b68;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){var _0xe0cd9a;(_0xe0cd9a=this['cacheManag'+'er'])==null||_0xe0cd9a['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(0x99a+0x1*-0x2608+0x1*0x1c6f),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x40ec12{constructor(_0x19805c,_0x33e2be=[]){this['elements']=_0x19805c,this['comments']=_0x33e2be,this['isCompress'+'ed']=!(-0x727+-0x347+0xa6f);}}class _0x31f9f0{constructor(_0x8cc4a1){this['url']=_0x8cc4a1;}async['readFragme'+'nt'](){globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0xf012ff(globalThis['downloadQu'+'eueUrlList']));const _0x4c76c7=await globalThis['fetchWorke'+'r']['fetch'](this['url']);if(!_0x4c76c7['ok'])throw new Error('Failed\x20to\x20'+'fetch\x20'+this['url']+':\x20'+_0x4c76c7['statusText']);const _0x3d72fd=await _0x4c76c7['arrayBuffe'+'r'](),_0x1ba748=new Uint8Array(_0x3d72fd);let _0x227dca=0xa*0x19f+-0x281*-0x8+0x243e*-0x1,{size:_0x4ddba2,type:_0x138960}=this['_readBoxHe'+'ader'](_0x1ba748,_0x227dca);if(_0x138960!=='moof')throw new Error('Not\x20a\x20moof');_0x227dca+=0x1bbe*-0x1+-0x8*-0x2a4+0x6a6;const _0x14d68c=_0x227dca+_0x4ddba2-(0x23*-0x17+-0xa0b*-0x3+0x4b*-0x5c);let _0x2af747=null;for(;_0x227dca<_0x14d68c;){const {size:_0x56b189,type:_0x404942}=this['_readBoxHe'+'ader'](_0x1ba748,_0x227dca);_0x227dca+=0x2350+-0x488+-0x1ec0;const _0x15478e=_0x1ba748['slice'](_0x227dca,_0x227dca+_0x56b189-(-0x1*0x2444+-0x7*-0x295+-0x137*-0xf));_0x227dca+=_0x56b189-(0x1b05+-0x1b4a+0x4d),_0x404942==='emsg'&&(_0x2af747=this['_parseEmsg'](_0x15478e));}if(!_0x2af747)throw new Error('Incomplete'+'\x20moof');const {size:_0x3b98aa,type:_0x11f205}=this['_readBoxHe'+'ader'](_0x1ba748,_0x227dca);if(_0x11f205!=='mdat')throw new Error('Expected\x20m'+'dat\x20box\x20af'+'ter\x20moof');_0x227dca+=-0x11b4+0xb*-0x389+0x5*0xb53;const _0x685c90=_0x1ba748['slice'](_0x227dca,_0x227dca+(_0x3b98aa-(-0xddd+0xf*-0xc+0xe99*0x1)));return{'metadata':_0x2af747,'segmentData':_0x685c90};}['_readBoxHe'+'ader'](_0x29b359,_0x1ae4d3){if(_0x1ae4d3+(0x1a8d+0x25ff*0x1+-0x4084)>_0x29b359['length'])throw new Error('EOF');const _0x8655f7=_0x29b359[_0x1ae4d3]<<0xbab*0x1+0x13*0x79+-0x148e|_0x29b359[_0x1ae4d3+(0x20e+-0x7c3*-0x2+-0x1193*0x1)]<<0x3*-0x76+-0x1c37+0x1da9|_0x29b359[_0x1ae4d3+(0x2655+-0x1*0x296+0x1*-0x23bd)]<<0x1*-0x17+0x2*-0xeff+0x1e1d|_0x29b359[_0x1ae4d3+(0x462*0x7+0x1740+-0x35eb)],_0x4bc7d7=String['fromCharCo'+'de'](_0x29b359[_0x1ae4d3+(0x1*0xe69+0x20a1+0x2*-0x1783)],_0x29b359[_0x1ae4d3+(-0x19c*-0x16+-0x46*0x6a+-0x1*0x667)],_0x29b359[_0x1ae4d3+(-0x291*-0xb+0xbca+-0x27ff)],_0x29b359[_0x1ae4d3+(-0x8*0x484+-0x18c5+-0x45a*-0xe)]);return{'size':_0x8655f7,'type':_0x4bc7d7};}['_parseEmsg'](_0x462290){let _0x4eefca=0x3*-0x97+-0x25ff+-0x5*-0x7f4;_0x4eefca=_0x462290['indexOf'](0x1a0d+0xd*0xa9+-0x22a2,_0x4eefca)+(-0xca*0x1d+-0x422+-0x1*-0x1b05),_0x4eefca=_0x462290['indexOf'](0xc6*0xb+0x25f5+-0x2e77,_0x4eefca)+(0xb51*-0x1+-0x682+0x11d4),_0x4eefca+=0x1*-0x21ce+0x2620+-0xda*0x5;const _0xe8bcfc=_0x462290['slice'](_0x4eefca);return globalThis['CBOR']['decode'](_0xe8bcfc);}}class _0x1fbfc7{constructor(_0x50f0c1=0x176+-0x6c*-0x45+0x12d*-0x1a,_0x580e77=0x2010+-0x12b7+-0x11*0xc9,_0x35379f=-0x2*0x4bf+0x67*-0x15+0x11f1,_0x1d82cc=-0x665*0x5+-0x1*-0x2ad+0x241*0xd){this['x']=_0x50f0c1,this['y']=_0x580e77,this['z']=_0x35379f,this['w']=_0x1d82cc;}['set'](_0x341aa7,_0x42501d,_0x72858c,_0x25c873){return this['x']=_0x341aa7,this['y']=_0x42501d,this['z']=_0x72858c,this['w']=_0x25c873,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x20003e=this){let _0x39597e=_0x20003e['length']();return _0x39597e===-0xba0+0x1bae+-0xf*0x112?(this['x']=this['y']=this['z']=0x3e*0x39+-0x1*0x26ef+0x1921,this['w']=-0xd8a+0x19a9+-0x3*0x40a):(_0x39597e=(0xb2b+-0x1601+0xad7)/_0x39597e,this['x']=_0x20003e['x']*_0x39597e,this['y']=_0x20003e['y']*_0x39597e,this['z']=_0x20003e['z']*_0x39597e,this['w']=_0x20003e['w']*_0x39597e),this;}['mulScalar'](_0x55bfb8,_0x442b48=this){return this['x']=_0x442b48['x']*_0x55bfb8,this['y']=_0x442b48['y']*_0x55bfb8,this['z']=_0x442b48['z']*_0x55bfb8,this['w']=_0x442b48['w']*_0x55bfb8,this;}}self['onmessage']=async _0x11ddc0=>{var _0x5821c2,_0x32690f;const {data:_0x3415a5}=_0x11ddc0;switch(_0x3415a5['type']){case'initWorker':importScripts(_0x3415a5['cborXUrl']);break;case'destroyWor'+'ker':_0x4ec1c6();break;case'loadGsdMan'+'ifest':const {manifestUrl:_0x205ced,loadRepresentation:_0x377df5}=_0x3415a5,_0x37e0a8=await _0x39fc76(_0x205ced,_0x377df5);globalThis['manifestUr'+'l']=_0x205ced,globalThis['manifest']=_0x37e0a8,globalThis['resentatio'+'n']=_0x37e0a8['representa'+'tion'],globalThis['downloadQu'+'eueUrlList']=_0x160d0a(),globalThis['fetchWorke'+'r']=new _0xf012ff(globalThis['downloadQu'+'eueUrlList']),self['postMessag'+'e']({'type':'onloadMani'+'fest','data':_0x37e0a8,'url':_0x205ced,'representation':_0x377df5});break;case'loadGsdSeg'+'ments':try{const _0x273b03=_0x1ebfea(globalThis['manifest'],globalThis['resentatio'+'n']),_0x3a68a9=await _0x3b4000(globalThis['manifest'],_0x273b03),_0x2d69a5=(_0x5821c2=_0x3a68a9==null?void(0x1a9c+0xb02*-0x2+-0x15*0x38):_0x3a68a9['elements'][0x130d+-0xf6e+-0x39f])==null?void(-0xa26+0x1d91+-0x136b*0x1):_0x5821c2['properties']['map'](_0x11aaee=>_0x11aaee['storage']['buffer']);self['postMessag'+'e']({'type':'loadGsdSeg'+'mentsDone','data':_0x3a68a9,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x2d69a5);}catch(_0x1d8745){console['error']('Error\x20load'+'ing\x20GSD:',_0x1d8745),self['postMessag'+'e']({'type':'error','data':_0x1d8745['message'],'url':globalThis['manifestUr'+'l']});}break;case'loadTimeli'+'neIndexSeg'+'ments':const {timelineIndexs:_0xc4ed32}=_0x3415a5;try{const _0x5403b5=_0x1ebfea(globalThis['manifest'],globalThis['resentatio'+'n']),_0x3a27de=await _0x373b03(globalThis['manifest'],_0x5403b5,_0xc4ed32),_0x34dc3d=(_0x32690f=_0x3a27de==null?void(0x37*-0x44+-0x1352+0x21ee):_0x3a27de['elements'][-0xa7e+-0x3*-0x337+-0x7*-0x1f])==null?void(-0x85a*0x3+0x31f+-0x15ef*-0x1):_0x32690f['properties']['map'](_0x48f5ea=>_0x48f5ea['storage']['buffer']);self['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'mentsDone','data':_0x3a27de,'timelineIndexs':_0xc4ed32,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x34dc3d);}catch(_0x1f56b1){console['error']('Error\x20load'+'ing\x20GSD:',_0x1f56b1),self['postMessag'+'e']({'type':'error','data':_0x1f56b1['message'],'url':globalThis['manifestUr'+'l']});}break;}};const _0x4ec1c6=()=>{var _0x377174;globalThis['manifestUr'+'l']=null,globalThis['manifest']=null,globalThis['resentatio'+'n']=null,(_0x377174=globalThis['fetchWorke'+'r'])==null||_0x377174['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['downloadQu'+'eueUrlList']=[],globalThis['loadedSegm'+'ents']=[],globalThis['currentLoa'+'dSg']=null;},_0x160d0a=()=>{const _0x5512e8=new Set(),_0x3350d9=_0x1ebfea(globalThis['manifest'],globalThis['resentatio'+'n']),_0x2c3a1c=globalThis['manifest']['baseUrl'],_0x2c75f7=_0x3350d9['segmentTem'+'plate'][-0x2366*-0x1+-0xb5d*0x1+-0x3*0x803];for(const _0x6d4396 of _0x2c75f7['segmentTim'+'eline'])for(const _0x38ee1c of _0x6d4396['nl']){const _0x15a65d=''+_0x2c3a1c+_0x2c75f7['media']['replace']('$SegGroupI'+'ndex$',String(_0x6d4396['sg']))['replace']('$NodeIndex'+'$',String(_0x38ee1c));_0x5512e8['add'](_0x15a65d);}return Array['from'](_0x5512e8);},_0x39fc76=async(_0xcddb3f,_0x3457da)=>{const _0x374813=await(await fetch(_0xcddb3f))['text'](),_0x464dc2=JSON['parse'](_0x374813);_0x464dc2['baseUrl']=_0xcddb3f['replace'](/\/[^\/]*$/,'/');const {schemas:_0x5554db,gsiUrl:_0x1a8742,repId:_0x2fdbae}=await _0xfe906(_0x464dc2,_0x3457da);return _0x464dc2['schemas']=_0x5554db,_0x464dc2['gsiUrl']=_0x1a8742,_0x464dc2['representa'+'tion']=_0x2fdbae,_0x464dc2;},_0xfe906=async(_0x4e3bfc,_0xb90f03)=>{let _0x281e01=null,_0xe15aa8=null;for(const _0x56890e of _0x4e3bfc['adaptation'+'Sets'])if(_0x56890e['contentTyp'+'e']==='4dgs'){_0xe15aa8=_0x56890e;for(const _0xd1e3ab of _0x56890e['representa'+'tions'])if(_0xd1e3ab['id']===_0xb90f03){_0x281e01=_0xd1e3ab;break;}break;}_0x281e01||(_0x281e01=_0xe15aa8['representa'+'tions'][-0x313*0x8+0x11f7+0x6a1],console['warn']('Representa'+'tion\x20\x27'+_0xb90f03+('\x27\x20not\x20foun'+'d,\x20use\x20the'+'\x20first\x20rep'+'resentatio'+'n\x20instead')));const _0xacf586=_0x281e01['id'],_0x4b400d=_0x4e3bfc['baseUrl']+_0xacf586+('/init.gsi.'+'json'),_0x41cd91=await(await fetch(_0x4b400d))['text'](),_0x5d3a98=JSON['parse'](_0x41cd91),_0x3f2f1e={};return _0x3f2f1e[_0xacf586]=_0x5d3a98,{'schemas':_0x3f2f1e,'gsiUrl':_0x4b400d,'repId':_0xacf586};},_0x1ebfea=(_0xd1a668,_0x2d6b80='high-quant'+'ized')=>{let _0x1b5596=null;for(const _0xe3a466 of _0xd1a668['adaptation'+'Sets'])if(_0xe3a466['contentTyp'+'e']==='4dgs'){for(const _0x478d0a of _0xe3a466['representa'+'tions'])if(_0x478d0a['id']===_0x2d6b80){_0x1b5596=_0x478d0a;break;}break;}if(!_0x1b5596)throw new Error('Representa'+'tion\x20\x27'+_0x2d6b80+('\x27\x20not\x20foun'+'d'));return _0x1b5596;},_0x3b4000=async(_0x4a5c20,_0x26ab09)=>{const _0x39d1f3=_0x26ab09['id'],_0x35d9db=_0x4a5c20['schemas'][_0x39d1f3]['attributes'],_0x33c9f2=_0x26ab09['segmentTem'+'plate'][0x368*0xb+0xb*-0xb+-0x24ff];globalThis['loadedSegm'+'ents']=[];const _0x318de4=[],_0x5e4c52=[];for(const _0x11d437 of _0x33c9f2['segmentTim'+'eline'])for(const _0x336945 of _0x11d437['nl']){if(globalThis['loadedSegm'+'ents']['includes'](_0x11d437['sg']+'_'+_0x336945))continue;globalThis['loadedSegm'+'ents']['push'](_0x11d437['sg']+'_'+_0x336945);const _0x94575d=await _0x4955d7(_0x4a5c20,_0x26ab09,_0x35d9db,_0x11d437['sg'],_0x336945);_0x5e4c52['push'](_0x94575d['decoded']),_0x318de4['push'](_0x94575d['metadata']);}return _0x257642(_0x5e4c52,_0x35d9db,_0x4a5c20['comments']);},_0x373b03=async(_0x4ccc32,_0x2156d9,_0x419e60)=>{if(!_0x419e60||_0x419e60['length']===-0x99*-0x10+0x12b6+-0x1c46*0x1)return{'decoded':[],'metadata':[]};const _0x260f6c=_0x2156d9['id'],_0x25842a=_0x4ccc32['schemas'][_0x260f6c]['attributes'],_0x2e3271=_0x2156d9['segmentTem'+'plate'][0x26*0x5f+0x1b24+-0x293e];globalThis['loadedSegm'+'ents']||(globalThis['loadedSegm'+'ents']=[]);const _0x4af4ac=_0x2e3271['segmentTim'+'eline'][_0x419e60[0x9d3*0x2+-0xa24+-0x982]];globalThis['currentLoa'+'dSg']!==_0x4af4ac['sg']&&(globalThis['loadedSegm'+'ents']=globalThis['loadedSegm'+'ents']['filter'](_0x567764=>!_0x567764['startsWith'](globalThis['currentLoa'+'dSg'])),globalThis['currentLoa'+'dSg']=_0x4af4ac['sg']);let _0x14ece3;const _0xf8a89d=[];for(const _0xa0bc97 of _0x419e60){_0x14ece3=_0x2e3271['segmentTim'+'eline'][_0xa0bc97];for(const _0x300e37 of _0x14ece3['nl'])globalThis['loadedSegm'+'ents']['includes'](_0x14ece3['sg']+'_'+_0x300e37)||(globalThis['loadedSegm'+'ents']['push'](_0x14ece3['sg']+'_'+_0x300e37),_0xf8a89d['push'](_0x300e37));}const _0xdb386d=await _0x4955d7(_0x4ccc32,_0x2156d9,_0x25842a,_0x14ece3['sg'],_0xf8a89d);_0xdb386d['metadata'];const _0x2e7cd8=_0xdb386d['decoded'];return _0x257642(_0x2e7cd8,_0x25842a,_0x4ccc32['comments']);},_0x4955d7=async(_0x565900,_0x2a3c6d,_0x3d0160,_0x4381bd,_0x38210e)=>{const _0x42a60f=_0x565900['baseUrl'],_0xf94a54=_0x2a3c6d['segmentTem'+'plate'][-0x251*0x5+-0x1dbe+-0x1*-0x2953]['media'],_0x38c7d9=_0x38210e['map'](_0x4f9926=>''+_0x42a60f+_0xf94a54['replace']('$SegGroupI'+'ndex$',String(_0x4381bd))['replace']('$NodeIndex'+'$',String(_0x4f9926))),_0xf89017=await Promise['all'](_0x38c7d9['map'](async _0x8b2fac=>{const _0x1b79de=await _0x6d0619(_0x8b2fac),_0x46e173=_0x1b79de['metadata'],_0x27261b=_0x1b79de['segmentDat'+'a'],_0x425866=_0x46e173['gaussianCo'+'unt'];console['log']('loadSegmen'+'t\x20'+_0x8b2fac),console['log']('loadSegmen'+'t\x20timeStar'+'t:',_0x46e173['timeStart'],'segment\x20ti'+'meEnd:',_0x46e173['timeEnd'],'segment\x20ga'+'ussianCoun'+'t:',_0x425866);let _0x3e8514;if(_0x2a3c6d['id']['includes']('quantized')){const _0x5218d5=_0x46e173['chunk_boun'+'ds'];_0x3e8514=_0x4a2814(_0x27261b,_0x425866,_0x3d0160,_0x4381bd,_0x5218d5);}else _0x3e8514=_0x4b619b(_0x27261b,_0x425866,_0x3d0160,_0x4381bd);return{'decoded':_0x3e8514,'metadata':_0x46e173};})),_0x27e7ed=_0xf89017['map'](_0x38ab0a=>_0x38ab0a['decoded']),_0x474e07=_0xf89017['map'](_0x3c855d=>_0x3c855d['metadata']);return{'decoded':_0x27e7ed,'metadata':_0x474e07};},_0x257642=(_0x3f9ca2,_0x3fff98,_0x14228e)=>{if(_0x3f9ca2['length']===-0x1b27+0x257a+-0xa53*0x1)return new _0x40ec12([{'name':'vertex','count':0x0,'properties':[{'name':'position','type':'float','storage':new Float32Array(0xcc5*-0x1+-0x269+0xf2e),'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':new Uint16Array(-0x26ac*-0x1+0x7*-0x67+-0x23db),'byteSize':0x2},{'name':'t','type':'float','storage':new Float32Array(0x165a*0x1+-0x83*0x1+-0x15d7),'byteSize':0x4},{'name':'t_scale','type':'float','storage':new Float32Array(0x3c+-0x1e8f*-0x1+-0x1ecb),'byteSize':0x4},{'name':'cutoff','type':'float','storage':new Float32Array(0x5*-0x8c+-0xceb*-0x1+-0xa2f),'byteSize':0x4},{'name':'motion','type':'float','storage':new Float32Array(-0x1829+-0x3*0x46d+0x2570),'byteSize':0x4},{'name':'rotation','type':'float','storage':new Float32Array(-0xcc3+-0x1*-0x925+0x39e),'byteSize':0x4},{'name':'scale','type':'uint16','storage':new Uint16Array(0x1eaa+0x98+0x1f42*-0x1),'byteSize':0x2},{'name':'time_index','type':'float','storage':new Float32Array(-0x1533+0x1f19+0x7*-0x16a),'byteSize':0x4}]}],_0x14228e);const _0x4c9508=_0x48a673(_0x3f9ca2),[_0x4ffe66,_0x24d403,_0x4314ec]=_0x46cb51(_0x4c9508['lifecycle'],0xd41+-0x2*-0x7c8+0x1*-0x1cce,Float32Array),_0x5ef871=_0x4c9508['time_index'],_0x169811=_0x3fff98['find'](_0x2d819e=>_0x2d819e['name']==='feature_re'+'st'),_0xd557c7=[];if(_0x169811&&_0x4c9508['feature_re'+'st']){const _0xcdfaec=_0x169811['dataType']['split'](',')[-0x1*-0x12a+0xf18+-0x1041]['trim']()['replace']('>',''),_0x5297d6=_0x46cb51(_0x4c9508['feature_re'+'st'],-0x578+-0x2683*0x1+-0x2bfe*-0x1,Float32Array);for(const _0x12dbc9 of _0x5297d6){const _0x2fd176=_0x46cb51(_0x12dbc9,_0xcdfaec/(0xca7+-0x2*0x362+-0x5e0),Float32Array);for(let _0x3ad15b=-0x1565*0x1+0x1*0x1e43+-0xa*0xe3;_0x3ad15b<_0x2fd176['length'];_0x3ad15b++)_0xd557c7['push']({'name':'f_rest_'+_0x3ad15b,'type':'float','storage':_0x2fd176[_0x3ad15b],'byteSize':0x4});}}return new _0x40ec12([{'name':'vertex','count':_0x4c9508['position']['length']/(0x13a6+-0xb78+-0x82b),'properties':[{'name':'position','type':'float','storage':_0x4c9508['position'],'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':_0x4c9508['color_opac'+'ity'],'byteSize':0x2},{'name':'t','type':'float','storage':_0x24d403,'byteSize':0x4},{'name':'t_scale','type':'float','storage':_0x4ffe66,'byteSize':0x4},{'name':'cutoff','type':'float','storage':_0x4314ec,'byteSize':0x4},{'name':'motion','type':'float','storage':_0x4c9508['motion'],'byteSize':0x4},{'name':'rotation','type':'float','storage':_0x4c9508['rotation'],'byteSize':0x4},{'name':'scale','type':'uint16','storage':_0x4c9508['scale'],'byteSize':0x2},{'name':'time_index','type':'float','storage':_0x5ef871,'byteSize':0x4},..._0xd557c7]}],_0x14228e);},_0x46cb51=(_0x52217,_0x840a,_0x1a35bc)=>{const _0x14d36a=new Array(_0x840a),_0x5d3c41=Math['floor'](_0x52217['length']/_0x840a),_0x262d19=_0x52217['length']%_0x840a;for(let _0x259bd1=-0xb*0x1ae+0x15ec+-0x372;_0x259bd1<_0x840a;_0x259bd1++){const _0x233c18=_0x259bd1<_0x262d19?_0x5d3c41+(-0x1*0x17d5+0x164+-0x1a*-0xdd):_0x5d3c41;_0x14d36a[_0x259bd1]=new _0x1a35bc(_0x233c18);}for(let _0x32a31a=0x697+-0x6*0x101+-0x91;_0x32a31a<_0x52217['length'];_0x32a31a++){const _0x589ff5=_0x32a31a%_0x840a,_0x432183=Math['floor'](_0x32a31a/_0x840a);_0x14d36a[_0x589ff5][_0x432183]=_0x52217[_0x32a31a];}return _0x14d36a;},_0x6d0619=async _0x1ec787=>{const _0x495601=new _0x31f9f0(_0x1ec787),{metadata:_0x179ff3,segmentData:_0x52a31a}=await _0x495601['readFragme'+'nt']();return{'metadata':_0x179ff3,'segmentData':_0x52a31a};},_0x57c944=(_0x2dbe5b,_0x1299c4)=>{let _0x1606fc,_0x7edb02,_0x1e8aae=-(0x1*0xb96+0x9b0+-0x1545*0x1);if(_0x2dbe5b['encoding']){const _0x326fc8=_0x2dbe5b['encoding']['storageTyp'+'e'];if(_0x326fc8==='uint32')_0x7edb02=Uint32Array,_0x1606fc=Uint32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x326fc8['startsWith']('array<ucha'+'r')){_0x7edb02=Uint8Array;const _0x29b0d1=_0x326fc8['split'](',')[-0x1bf*-0x1+-0x4*-0x260+0x59f*-0x2]['trim']()['replace']('>','');_0x1e8aae=parseInt(_0x29b0d1),_0x1606fc=_0x1e8aae*Uint8Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20storage\x20'+'type:\x20'+_0x326fc8);}}else{if(_0x7edb02=Float32Array,_0x2dbe5b['dataType']==='vec3f')_0x1606fc=(0x2079*0x1+0x2*-0xfe4+0x1*-0xae)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x2dbe5b['dataType']==='vec4f')_0x1606fc=(-0x1*0x1eaf+-0x1b03+0x39b6)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x2dbe5b['dataType']==='vec2f')_0x1606fc=(-0x14ab+0x2602+0x3*-0x5c7)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x2dbe5b['dataType']['startsWith']('array<floa'+'t')){const _0x57b85f=_0x2dbe5b['dataType']['split'](',')[-0xf62+0x7*-0x2bf+-0x8a7*-0x4]['trim']()['replace']('>','');_0x1e8aae=parseInt(_0x57b85f),_0x1606fc=_0x1e8aae*Float32Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x2dbe5b['dataType']);}}}}return{'dataSize':_0x1299c4*_0x1606fc,'datatype':_0x7edb02,'arraySize':_0x1e8aae};},_0x460c88=(_0x1d6339,_0x103399)=>{const _0x22768c=(-0x6c7+-0x147*-0x1+0x1*0x581<<_0x103399)-(0x3f*0x9b+-0x1*-0x911+-0x2f35);return(_0x1d6339&_0x22768c)/_0x22768c;},_0xe5c64f=_0x56501c=>{const _0x45388c=new Float32Array(_0x56501c['length']*(-0xfaf+-0x14a3+0x2455));for(let _0x2de3d3=-0x1*-0x21e7+0xb2c+-0x2d13;_0x2de3d3<_0x56501c['length'];_0x2de3d3++)_0x45388c[_0x2de3d3*(0x1237+-0x1518+0x2e4)]=_0x460c88(_0x56501c[_0x2de3d3]>>>0x2005+0x8*-0x107+-0x17b8,0x3*0x911+0x3ad*-0x7+-0x16d),_0x45388c[_0x2de3d3*(-0x1*-0x2386+0x1a30+-0x3db3)+(-0x6dc+-0x281+-0x2*-0x4af)]=_0x460c88(_0x56501c[_0x2de3d3]>>>-0x2fb*0x2+-0x1e98+-0x411*-0x9,-0x3dd*-0xa+0x5c*-0x12+-0x2020),_0x45388c[_0x2de3d3*(0x1*-0x241+0x887+-0x643)+(0xaae+0x3*0x273+0x7*-0x293)]=_0x460c88(_0x56501c[_0x2de3d3],0x77f+0x1913+-0x2087);return _0x45388c;},_0x3e0cac=_0xd3b7e5=>{const _0x4b3cd1=new Float32Array(_0xd3b7e5['length']*(-0x1*0x923+-0x17d+0x1c6*0x6));for(let _0xd540ea=0x1d9b*-0x1+-0x935+-0xb8*-0x36;_0xd540ea<_0xd3b7e5['length'];_0xd540ea++)_0x4b3cd1[_0xd540ea*(-0x20db*-0x1+0x180a+-0x1*0x38e1)]=_0x460c88(_0xd3b7e5[_0xd540ea]>>>0x7*0x1e9+-0x9a9*0x2+0x60b,0x2689+0x1*-0x2659+0x2*-0x14),_0x4b3cd1[_0xd540ea*(-0x1c1*-0xd+0x691+-0x1d5a)+(-0x1b39+0x1280*0x1+-0x2*-0x45d)]=_0x460c88(_0xd3b7e5[_0xd540ea]>>>-0x25c*0xe+0x211e+-0x2*0x3,0x1d01+0x2a6+-0x1*0x1f9f),_0x4b3cd1[_0xd540ea*(-0x2*-0x40f+0x419*-0x6+0x107c)+(-0x1*-0x4e1+0x180*-0x8+-0x16d*-0x5)]=_0x460c88(_0xd3b7e5[_0xd540ea]>>>-0x539+0x1193*0x2+-0x1de5,0x1e9*-0x6+-0x1bde+0x275c),_0x4b3cd1[_0xd540ea*(-0x2012+-0x1bdf+0x3bf5)+(0x10d*0x13+0x11c6+-0x25ba)]=_0x460c88(_0xd3b7e5[_0xd540ea],0x1b22+0x4ca*-0x4+-0x7f2);return _0x4b3cd1;},_0x3788ad=_0x34de91=>{const _0x1db91d=new Float32Array(_0x34de91['length']*(-0x93a*0x1+0x14e*0x11+-0xcf1*0x1)),_0x42f20e=(0x1*-0x1efe+0x9*0x125+-0x373*-0x6)/(Math['sqrt'](-0x1cf*0x4+0x2537+0x1*-0x1df9)*(-0x2db*-0xb+-0x2419+0x4b0+0.5));for(let _0x1af44c=0x105*-0x21+-0x9a3+0x2b48;_0x1af44c<_0x34de91['length'];_0x1af44c++){const _0x2e1de8=(_0x460c88(_0x34de91[_0x1af44c]>>>-0x1231+0x1500+-0xe9*0x3,-0x233*-0xd+0x1673+0x40*-0xcc)-(0x1*0x202+0x8*-0xdb+0x4d6+0.5))*_0x42f20e,_0x51342f=(_0x460c88(_0x34de91[_0x1af44c]>>>0x1c9f+0x1*0x21e6+0x5*-0xc7f,0x1*0x2354+0x624+-0x296e)-(-0x16ac+-0xa20+0x20cc+0.5))*_0x42f20e,_0x57052f=(_0x460c88(_0x34de91[_0x1af44c],-0x1*-0x853+0x6ad+0x2*-0x77b)-(-0x218e+-0x1e2a+0x8*0x7f7+0.5))*_0x42f20e,_0x183676=Math['sqrt'](-0x191d+0x1*-0x633+-0x1f51*-0x1-(_0x2e1de8*_0x2e1de8+_0x51342f*_0x51342f+_0x57052f*_0x57052f));let _0x26d097=-0x442+0x29*-0xa+0x12c*0x5,_0x4da34f=0x1*0x5fe+0x1cee+-0x22ec,_0x1f0113=0x1*-0x1c73+0x719*-0x3+-0x1*-0x31be,_0x55396b=0x1*-0xe31+0x126f+-0x16a*0x3;switch(_0x34de91[_0x1af44c]>>>-0x20e5+-0x17a+0x9*0x3d5){case-0x619*0x1+-0x96*-0x36+0xd*-0x1f7:_0x26d097=_0x183676,_0x4da34f=_0x2e1de8,_0x1f0113=_0x51342f,_0x55396b=_0x57052f;break;case-0x1283+-0x1d30*0x1+0x2fb4:_0x26d097=_0x183676,_0x4da34f=_0x51342f,_0x1f0113=_0x57052f,_0x55396b=_0x2e1de8;break;case 0x1e84+0xb7d+-0x33b*0xd:_0x26d097=_0x51342f,_0x4da34f=_0x183676,_0x1f0113=_0x57052f,_0x55396b=_0x2e1de8;break;case 0x1a1e+0x85*0x27+-0xa*0x4a3:_0x26d097=_0x51342f,_0x4da34f=_0x57052f,_0x1f0113=_0x183676,_0x55396b=_0x2e1de8;break;}const _0x3d9050=_0x144a92(_0x26d097,_0x4da34f,_0x1f0113,_0x55396b);_0x1db91d[_0x1af44c*(0x1201*-0x2+0x1*0x2509+-0x104)]=_0x3d9050['x'],_0x1db91d[_0x1af44c*(0x3ab+-0x5*0x50c+0x1594)+(0x1d8f+-0x2*0x4b2+0x3a*-0x59)]=_0x3d9050['y'],_0x1db91d[_0x1af44c*(0x13f5+0x1905+-0x4ff*0x9)+(0x10*-0xca+-0xed2+-0xdba*-0x2)]=_0x3d9050['z'];}return _0x1db91d;},_0x618fb3=(_0x2a2a9a,_0x326a3e,_0x433cb9)=>{const _0x27b49e=_0x433cb9-_0x326a3e,_0x3d4eb8=new Float32Array(_0x2a2a9a['length']);for(let _0x492cf0=-0x46*-0xb+0x12cd*0x1+-0x15cf*0x1;_0x492cf0<_0x2a2a9a['length'];_0x492cf0++)_0x3d4eb8[_0x492cf0]=_0x2a2a9a[_0x492cf0]/(-0x12f8*-0x2+0x1028+-0x45*0xc5)*_0x27b49e+_0x326a3e;return _0x3d4eb8;},_0x490a76=new Float32Array(-0x2357+0x151+-0x1f*-0x119),_0x1bad5a=new Int32Array(_0x490a76['buffer']),_0x36af10=_0x474d29=>{_0x490a76[0x4c*0x58+-0x20a1+0x681]=_0x474d29;const _0x350972=_0x1bad5a[0x1e7*-0x5+-0x6*-0x2d3+-0x76f];let _0x31b689=_0x350972>>-0x1*0x1583+0x1b7c+-0x59*0x11&-0x31c8*0x3+-0xc322+0x72*0x425,_0x159596=_0x350972>>0x1acf+-0x6cc+-0x13f7&-0x240c+-0xad0+0x1f*0x1c5;const _0x50560b=_0x350972>>-0x42b+-0x1e*-0x4+0x3ca&-0xb*0x43+-0x1fe*0xe+0x4c*0x6b;return _0x50560b<-0x2b*-0x65+-0x3b8*0x1+-0xcd8?_0x31b689:_0x50560b>-0x4*-0x238+-0x3e+0x1*-0x814?(_0x31b689|=-0x741a+-0x6976+-0x5664*-0x4,_0x31b689|=(_0x50560b===-0x115*0x9+-0x1647+-0x3*-0xb01?-0xef*-0x1f+-0x865+-0x148c:0x5*0x5a4+-0x62f*0x1+-0x1604)&&_0x350972&-0x407f1a*-0x1+0xb80208+-0x6b7d*0x11f,_0x31b689):_0x50560b<0xf3e+-0x24f2+0x1625?(_0x159596|=0x1cb1+-0x5a7+-0xf0a,_0x31b689|=(_0x159596>>0x26*0x4d+-0x140c+0x910-_0x50560b)+(_0x159596>>0x11*-0xf5+-0x21ae+0xa14*0x5-_0x50560b&0x1690+-0x1b0+0x89*-0x27),_0x31b689):(_0x31b689|=_0x50560b-(0x7*-0x4c7+0x3c6*-0x7+-0xc0f*-0x5)<<0x2*0x2e+0x1c6f+-0x1cc1|_0x159596>>0x2292+-0x892*-0x3+-0x3c47,_0x31b689+=_0x159596&-0x2b*0xe0+0x1efc+0x6a5,_0x31b689);},_0x2c7371=_0x45b30b=>{const _0x3b5157=new Uint16Array(_0x45b30b['length']);for(let _0x5cf335=0x480+-0x2*0xc8+-0x2f0;_0x5cf335<_0x45b30b['length']/(0x1*-0x2617+0x1*-0x1e47+0x4462);++_0x5cf335)_0x3b5157[_0x5cf335*(-0x5ba*-0x1+-0x1a54+0x1a*0xcb)]=_0x36af10(_0x45b30b[_0x5cf335*(-0x17ff+-0x254e*0x1+-0xb*-0x593)]*_0x36c8e6+(-0x65*0xb+0x1*-0x66d+0xac4+0.5)),_0x3b5157[_0x5cf335*(0x18*0x53+-0x5c3+-0x201)+(-0xe6+0x1848+-0x69*0x39)]=_0x36af10(_0x45b30b[_0x5cf335*(-0xe95+-0x2286+0x9d3*0x5)+(0x20*0x4+-0x1*-0x2141+-0x21c0)]*_0x36c8e6+(0x7*0x23+0x4fc+-0x5f1+0.5)),_0x3b5157[_0x5cf335*(-0x3ee+0x6af*-0x3+0x17ff*0x1)+(-0x2525+0x1*0x17bd+-0xd6a*-0x1)]=_0x36af10(_0x45b30b[_0x5cf335*(-0x1905+-0x1d28+-0x1*-0x3631)+(-0x2f3*-0x3+-0x137*0x11+0xbd0)]*_0x36c8e6+(0x4a*0x56+0x1b1*-0x8+-0xb54+0.5)),_0x3b5157[_0x5cf335*(-0x4ff*-0x4+0x557*0x1+0xb*-0x24d)+(0x3a*-0x3+0xe3+-0x32)]=_0x36af10(_0x45b30b[_0x5cf335*(-0x1*-0x1d3f+0x2003+-0x75*0x86)+(-0x5d9+-0x1*0x1f9d+0x2579)]);return _0x3b5157;},_0x1be5d7=new _0x1fbfc7(-0x1f4f*-0x1+0x385+-0x22d4,0x59c+0xe70+-0x140c,-0x9b0+-0x22ee+0x2c9e,-0x266*0xb+-0x1174+-0x1*-0x2bd6),_0x144a92=(_0x10e698,_0x45b7b7,_0x4ae35f,_0x24de3f)=>(_0x1be5d7['set'](_0x45b7b7,_0x4ae35f,_0x24de3f,_0x10e698),_0x1be5d7['normalize'](),_0x1be5d7['w']<-0x19*-0xb6+-0x225a+0x4*0x425&&_0x1be5d7['mulScalar'](-(0x1779+-0x1015*-0x2+-0x1bd1*0x2)),_0x1be5d7);function _0x4a2814(_0x1b4e6e,_0x51f9ac,_0x3bd285,_0x3f8a15,_0x1b7ffe){const _0x1cae02=_0x1b7ffe[Object['keys'](_0x1b7ffe)[-0xf*0x265+-0x1f3a+0x4325]]['length'],_0x31b575=0x1*0x182+-0x78*-0x7+-0x3ca;let _0x28fa8b=[],_0x404cc1=_0x51f9ac;for(let _0x3d33cb=0xfbb*-0x1+0x5db*0x4+-0x7b1;_0x3d33cb<_0x1cae02;_0x3d33cb++){const _0x4793dd=Math['min'](_0x31b575,_0x404cc1);_0x28fa8b['push'](_0x4793dd),_0x404cc1-=_0x4793dd;}let _0x1fb417=-0x20db*0x1+-0x1*-0x9e+0x203d,_0x4a4372={};for(let _0x402495 of _0x3bd285){const _0x57a5a0=_0x402495['name'],{dataSize:_0x40b5cd,datatype:_0x480fe6}=_0x57c944(_0x402495,_0x51f9ac);let _0x41a1e8=_0x1b4e6e['buffer']['slice'](_0x1fb417,_0x1fb417+_0x40b5cd),_0x21466b=new _0x480fe6(_0x41a1e8);_0x4a4372[_0x57a5a0]=_0x21466b,_0x1fb417+=_0x40b5cd;}let _0x9ab765=[],_0x34152c=-0x4a5*0x2+-0x93d+0x1f*0x99;for(let _0x56abd1=0x3cb*0x1+-0x227d+-0x1eb2*-0x1;_0x56abd1<_0x1cae02;_0x56abd1++){const _0xafdb94=_0x357a2c(_0x4a4372,_0x1b7ffe,_0x56abd1,_0x28fa8b,_0x34152c,_0x3bd285),_0x4c72a9=_0xafdb94['chunkDecom'+'pressed'];_0x9ab765['push'](_0x4c72a9),_0x34152c=_0xafdb94['chunkStart'+'Idx'];}let _0x29fca6={};for(let _0x42b0c9 of Object['keys'](_0x9ab765[-0x1*0x1502+-0x1*0xeed+0x23ef])){let _0x3125c9=-0x148d+0x2475+-0x4*0x3fa;for(let _0x2834ea=-0x2*-0xa67+-0x84f*-0x4+-0x360a;_0x2834ea<_0x9ab765['length'];_0x2834ea++)_0x3125c9+=_0x9ab765[_0x2834ea][_0x42b0c9]['length'];_0x42b0c9==='color_opac'+'ity'||_0x42b0c9==='scale'?_0x29fca6[_0x42b0c9]=new Uint16Array(_0x3125c9):_0x29fca6[_0x42b0c9]=new Float32Array(_0x3125c9);let _0x3a8b04=0x359*-0x1+0x1*0xe2e+-0xad5;for(let _0x5b45c5=-0xb86+0x1570+-0x9ea;_0x5b45c5<_0x9ab765['length'];_0x5b45c5++)_0x29fca6[_0x42b0c9]['set'](_0x9ab765[_0x5b45c5][_0x42b0c9],_0x3a8b04),_0x3a8b04+=_0x9ab765[_0x5b45c5][_0x42b0c9]['length'];}return _0x3bd285['some'](_0x1ef75f=>_0x1ef75f['name']==='feature_re'+'st')&&(_0x29fca6['feature_re'+'st']=_0x36abb5(_0x4a4372,_0x3bd285)),_0x29fca6['time_index']=new Float32Array(_0x51f9ac),_0x29fca6['time_index']['fill'](_0x3f8a15-(-0x19d6+0xe5d*-0x1+0x2834)),_0x29fca6;}const _0x357a2c=(_0xa0ae1d,_0x1a08f0,_0x545f98,_0x2f635b,_0x4b3909,_0x338771)=>{const _0x19e7d7=_0x2f635b[_0x545f98],_0x34a873=_0x4b3909+_0x19e7d7,_0x34a578=(_0xae4bae,_0x4fffee,_0x44bfef)=>_0xae4bae*(-0x649*0x4+-0x2531*-0x1+0x606*-0x2-_0x44bfef)+_0x4fffee*_0x44bfef;let _0x112ace={};for(let _0xf9622d of _0x338771){const _0x1600d6=_0xf9622d['name'],_0x557697=_0xf9622d['encoding']['codec'],_0x493581=_0xa0ae1d[_0x1600d6]['slice'](_0x4b3909,_0x34a873);if(_0x557697==='pack_11_10'+'_11'){if(_0x1600d6==='scale'){const _0x9c6688=_0x1a08f0['min_scales'][_0x545f98],_0x531d33=_0x1a08f0['max_scales'][_0x545f98],_0x1345a6=_0xe5c64f(_0x493581),_0x53ad70=_0x1345a6['length'],_0x23af11=new Uint16Array(_0x53ad70);for(let _0x4fb248=0x20ca+-0xf3d+-0x118d*0x1;_0x4fb248<_0x53ad70;_0x4fb248++)_0x23af11[_0x4fb248]=_0x36af10(Math['exp'](_0x34a578(_0x9c6688[_0x4fb248%(-0x1e4*-0x2+0x21cc+0xa3*-0x3b)],_0x531d33[_0x4fb248%(0x207d+-0x482*0x1+-0x1bf8)],_0x1345a6[_0x4fb248])));_0x112ace[_0x1600d6]=_0x23af11;}else{const _0x478ae0=_0xe5c64f(_0x493581);let _0x5a9076,_0x57360d;if(_0x1600d6==='position')_0x5a9076=_0x1a08f0['min_means'][_0x545f98],_0x57360d=_0x1a08f0['max_means'][_0x545f98];else{if(_0x1600d6==='motion')_0x5a9076=_0x1a08f0['min_motion'][_0x545f98],_0x57360d=_0x1a08f0['max_motion'][_0x545f98];else{if(_0x1600d6==='lifecycle'){const _0x38c66e=_0x1a08f0['min_t_scal'+'e'][_0x545f98],_0x158ec1=_0x1a08f0['max_t_scal'+'e'][_0x545f98],_0x6fc2da=_0x1a08f0['min_time'][_0x545f98],_0xa4d31b=_0x1a08f0['max_time'][_0x545f98],_0x58ea0f=_0x1a08f0['min_cutoff'][_0x545f98],_0x502828=_0x1a08f0['max_cutoff'][_0x545f98];_0x5a9076=[_0x38c66e[-0x1338+0x1*-0xb2e+0x1e66],_0x6fc2da[0x3*-0x3fb+0xaec+0x9*0x1d],_0x58ea0f[-0x2*-0x217+-0x1e2d+0x19ff]],_0x57360d=[_0x158ec1[0x24*-0x10d+-0x10b*0x1+-0x3*-0xcf5],_0xa4d31b[-0x352+0x17a3+0x2e7*-0x7],_0x502828[-0x86f+-0x20d3+0x2942*0x1]];}else throw new Error('Unknown\x20at'+'tribute\x20fo'+'r\x20pack_11_'+'10_11:\x20'+_0x1600d6);}}for(let _0x5b7bdf=-0xd*0xad+-0x209c+-0x1*-0x2965;_0x5b7bdf<_0x478ae0['length'];_0x5b7bdf++)_0x478ae0[_0x5b7bdf]=_0x34a578(_0x5a9076[_0x5b7bdf%(-0x1c75+0x661+0x1617)],_0x57360d[_0x5b7bdf%(0x17a1+-0x7bf+0x1*-0xfdf)],_0x478ae0[_0x5b7bdf]);_0x112ace[_0x1600d6]=_0x478ae0;}}else{if(_0x557697==='pack_8888'){let _0x296696=_0x3e0cac(_0x493581);const _0x4a08db=_0x1a08f0['min_colors'][_0x545f98],_0x5733f1=_0x1a08f0['max_colors'][_0x545f98],_0x297475=new Uint16Array(_0x296696['length']);for(let _0x27bf63=0x145b+-0x1*-0x1ab9+-0x106*0x2e;_0x27bf63<_0x296696['length'];_0x27bf63++){const _0x2ee469=_0x27bf63*(-0x2*0x6bc+-0x1*0x2312+-0x37*-0xe2);_0x297475[_0x2ee469]=_0x36af10(_0x34a578(_0x4a08db[-0x15d2+-0xa45+0x2017],_0x5733f1[-0x12b*0x1d+0x2380+0x1*-0x1a1],_0x296696[_0x2ee469])),_0x297475[_0x2ee469+(-0x3*0x83f+-0xb70+0xb*0x34a)]=_0x36af10(_0x34a578(_0x4a08db[-0x1c44+0x104c+0xbf9],_0x5733f1[0x238d+-0x8de*0x2+-0x11d0],_0x296696[_0x2ee469+(-0x2245*0x1+0x7a5+-0x191*-0x11)])),_0x297475[_0x2ee469+(0x7ed+-0x76d+-0x7e)]=_0x36af10(_0x34a578(_0x4a08db[-0x118c+-0x1079+0x2207],_0x5733f1[0x2709+-0xba+-0x25*0x109],_0x296696[_0x2ee469+(-0x8fb*0x1+0x24a*0x4+0x1*-0x2b)])),_0x297475[_0x2ee469+(-0x21ac+-0x1*-0x2a7+0x1f08)]=_0x36af10(_0x296696[_0x2ee469+(-0x1a58+-0x2b4*0x1+-0x1*-0x1d0f)]);}_0x112ace[_0x1600d6]=_0x297475;}else{if(_0x557697==='pack_rotat'+'ion_32'){const _0x1208a7=_0x3788ad(_0x493581);_0x112ace[_0x1600d6]=_0x1208a7;}else{if(_0x557697==='range_quan'+'t_u8'){if(_0x1600d6==='feature_re'+'st')continue;throw new Error('Unknown\x20co'+'dec:\x20'+_0x557697);}}}}}return{'chunkDecompressed':_0x112ace,'chunkStartIdx':_0x34a873};},_0x36abb5=(_0x42c1ee,_0x21a727)=>{const _0x507820='feature_re'+'st',_0x558d33=_0x21a727['find'](_0x2c8a26=>_0x2c8a26['name']===_0x507820);let _0x2454e2;const _0x447f96=_0x558d33['encoding']['codec'],_0x25050c=_0x42c1ee[_0x507820];if(_0x447f96==='range_quan'+'t_u8'){const [_0x317900,_0x12efc9]=_0x558d33['encoding']['range'];_0x2454e2=_0x618fb3(_0x25050c,_0x317900,_0x12efc9);}else throw new Error('Unknown\x20co'+'dec:\x20'+_0x447f96);return _0x2454e2;},_0x4b619b=(_0x2f3680,_0x1aa644,_0x513d6a,_0xdf6476)=>{let _0x5b4683=0x1f50+0x1ea1*-0x1+-0xaf;const _0xaf53c1={};for(const _0x305780 of _0x513d6a){const {dataSize:_0x5e0d46}=_0x57c944(_0x305780,_0x1aa644);if(['vec3f','vec4f','vec2f']['includes'](_0x305780['dataType']))_0xaf53c1[_0x305780['name']]=new Float32Array(_0x2f3680['buffer']['slice'](_0x5b4683,_0x5b4683+_0x5e0d46));else{if(_0x305780['dataType']['startsWith']('array<floa'+'t'))_0xaf53c1[_0x305780['name']]=new Float32Array(_0x2f3680['buffer']['slice'](_0x5b4683,_0x5b4683+_0x5e0d46));else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x305780['dataType']);}_0x5b4683+=_0x5e0d46;}const _0x3366ca=new Uint16Array(_0xaf53c1['scale']['length']);for(let _0x2a65ab=0x661+-0x1534+0x5*0x2f7;_0x2a65ab<_0xaf53c1['scale']['length'];_0x2a65ab++)_0x3366ca[_0x2a65ab]=_0x36af10(Math['exp'](_0xaf53c1['scale'][_0x2a65ab]));_0xaf53c1['scale']=_0x3366ca;const _0x13f86f=_0xaf53c1['rotation']['length']/(0x1e7a*0x1+0x1*0x3c4+-0x223a),_0x8218b7=new Float32Array(_0x13f86f*(0x8*-0xf7+-0xb*0x2dd+0x273a));for(let _0x27f660=0xa+0x32*0x8d+-0x1b94;_0x27f660<_0x13f86f;_0x27f660++){const _0x1c9c62=_0x144a92(_0xaf53c1['rotation'][_0x27f660*(-0xa9*-0x1b+-0x1*-0x117a+-0x2349)],_0xaf53c1['rotation'][_0x27f660*(-0x142e+-0xe33+0x2265)+(0x547+-0x2395+0x1e4f)],_0xaf53c1['rotation'][_0x27f660*(-0x927+-0x16b2*-0x1+-0xd87)+(-0xc9*-0x22+-0x198*-0x14+-0x3a90)],_0xaf53c1['rotation'][_0x27f660*(-0x21cd+0x4c5+0x1d0c)+(0x21*0xed+0x1160+-0x17f5*0x2)]);_0x8218b7[_0x27f660*(-0x1*-0x9f4+0xa14+-0x19*0xcd)]=_0x1c9c62['x'],_0x8218b7[_0x27f660*(0x131a+-0x2*-0x42+-0x139b)+(0xc*-0x2f+-0x274+-0x1*-0x4a9)]=_0x1c9c62['y'],_0x8218b7[_0x27f660*(-0x2455*0x1+-0x1*0x44f+0x1*0x28a7)+(0x534+0x1d20+-0x2252)]=_0x1c9c62['z'];}return _0xaf53c1['rotation']=_0x8218b7,_0xaf53c1['color_opac'+'ity']=_0x2c7371(_0xaf53c1['color_opac'+'ity']),_0xaf53c1['time_index']=new Float32Array(_0x1aa644),_0xaf53c1['time_index']['fill'](_0xdf6476-(0x1*0x743+-0x13ed*0x1+0x17*0x8d)),_0xaf53c1;},_0x48a673=(_0x286312,_0x5cc690)=>{const _0x1efbb4={};if(_0x286312['length']===-0xacf+0x160f*-0x1+0x20df)return _0x286312[-0x44b*-0x8+0x259d*-0x1+0x345];for(const _0x56482e of Object['keys'](_0x286312[-0x1136+-0x2650+0x3786]))if(_0x286312[0x1*-0xd43+-0x7*0x211+0x3f6*0x7][_0x56482e]instanceof Float32Array||_0x286312[-0x1*-0x679+0x7f*-0x1+-0x22*0x2d][_0x56482e]instanceof Uint16Array){const _0x2e1813=_0x286312['reduce']((_0x5f143d,_0x2fa1c5)=>_0x5f143d+_0x2fa1c5[_0x56482e]['length'],-0x149c+-0x10d0+-0x77c*-0x5);let _0x4c13fa;_0x286312[-0x1b35+-0x3aa+0x469*0x7][_0x56482e]instanceof Uint16Array?_0x4c13fa=new Uint16Array(_0x2e1813):_0x4c13fa=new Float32Array(_0x2e1813);let _0x3e9a67=0x19a5+0x6fc+-0x20a1;for(const _0x2bbb0f of _0x286312)_0x4c13fa['set'](_0x2bbb0f[_0x56482e],_0x3e9a67),_0x3e9a67+=_0x2bbb0f[_0x56482e]['length'];_0x1efbb4[_0x56482e]=_0x4c13fa;}else Array['isArray'](_0x286312[-0x291*0x1+-0x1469+0x16fa][_0x56482e])?_0x1efbb4[_0x56482e]=_0x286312['flatMap'](_0x166bb2=>Array['from'](_0x166bb2[_0x56482e])):_0x1efbb4[_0x56482e]=_0x286312['map'](_0x50a0ee=>_0x50a0ee[_0x56482e])['flat']();return _0x1efbb4;};}class hk extends me{constructor(_0x10f1da){super(),h(this,'manifestUr'+'l'),h(this,'worker'),(this['manifestUr'+'l']=_0x10f1da,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+ck['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','cborXUrl':'https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/cbor-x@1'+'.6.0.min.j'+'s'});}['loadGsdMan'+'ifest'](_0x358e5e){var _0x2e2ab4;return(_0x2e2ab4=this['worker'])==null||_0x2e2ab4['postMessag'+'e']({'type':'loadGsdMan'+'ifest','manifestUrl':this['manifestUr'+'l'],'loadRepresentation':_0x358e5e}),new Promise((_0xdb3c96,_0x50ee1d)=>{if(!this['worker']){_0x50ee1d(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x1d491f=>{if(!this['worker'])return;const {data:_0xc28d10}=_0x1d491f;if(this['manifestUr'+'l']===_0xc28d10['url'])switch(_0xc28d10['type']){case'onloadMani'+'fest':_0xdb3c96({'manifest':_0xc28d10['data'],'url':_0xc28d10['url'],'representation':_0xc28d10['representa'+'tion']});break;case'error':_0x50ee1d(_0xc28d10['data']);break;}};});}['loadGsdSeg'+'ments'](_0x169edd,_0x2576a1){var _0xcdd34f;return(_0xcdd34f=this['worker'])==null||_0xcdd34f['postMessag'+'e']({'type':'loadGsdSeg'+'ments'}),new Promise((_0x35f630,_0x562ede)=>{if(!this['worker']){_0x562ede(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x114e47=>{if(!this['worker'])return;const {data:_0xf75e0}=_0x114e47;if(this['manifestUr'+'l']===_0xf75e0['url'])switch(_0xf75e0['type']){case'progress':_0x169edd==null||_0x169edd(_0xf75e0['bytes'],_0xf75e0['totalLengt'+'h'],_0xf75e0['url']);break;case'loadGsdSeg'+'mentsDone':_0x35f630(_0xf75e0['data']);break;case'error':_0x2576a1==null||_0x2576a1(_0xf75e0['data'],_0xf75e0['url']);break;}};});}['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x521c9f,_0x1e3f9e,_0x5915f5){var _0xdaa41f;return(_0xdaa41f=this['worker'])==null||_0xdaa41f['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'ments','timelineIndexs':_0x521c9f}),new Promise((_0x507c72,_0x5431b2)=>{if(!this['worker']){_0x5431b2(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x5cd18c=>{if(!this['worker'])return;const {data:_0x15abe1}=_0x5cd18c;if(this['manifestUr'+'l']===_0x15abe1['url'])switch(_0x15abe1['type']){case'progress':_0x1e3f9e==null||_0x1e3f9e(_0x15abe1['bytes'],_0x15abe1['totalLengt'+'h'],_0x15abe1['url']);break;case'loadTimeli'+'neIndexSeg'+'mentsDone':_0x507c72(_0x15abe1);break;case'error':_0x5915f5==null||_0x5915f5(_0x15abe1['data'],_0x15abe1['url']);break;}};});}['destroy'](){this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(0xb6a+0x1*-0x157+-0xa13));}}const Xh=class Xh{constructor(_0x1c8fd8,_0x5878b2,_0x28b755){h(this,'lastLoadIn'+'dex',-0x23a2*0x1+-0x150b*-0x1+0xe97),h(this,'gsdAssetPa'+'rser'),(this['manifest']=_0x1c8fd8,this['representa'+'tion']=_0x5878b2,this['gsdAssetPa'+'rser']=_0x28b755,this['segmentTim'+'elines']=this['getSegment'+'Timeline'](_0x1c8fd8,_0x5878b2));}['getSegment'+'Timeline'](_0xf23ce0,_0x33a09c){let _0x58cd9c=null;for(const _0x4cbec3 of _0xf23ce0['adaptation'+'Sets'])if(_0x4cbec3['contentTyp'+'e']==='4dgs'){for(const _0x286b5c of _0x4cbec3['representa'+'tions'])if(_0x286b5c['id']===_0x33a09c){_0x58cd9c=_0x286b5c;break;}break;}if(!_0x58cd9c)throw new Error('Representa'+'tion\x20\x27'+_0x33a09c+('\x27\x20not\x20foun'+'d'));return _0x58cd9c['segmentTem'+'plate'][-0x1bce+-0x23df+0x3fad]['segmentTim'+'eline'];}['onTimeChan'+'ged'](_0x5d32f0){const _0x13bb2d=this['findSegmen'+'tTimeline'](_0x5d32f0);if(!_0x13bb2d)return;const _0xefa283=_0x13bb2d['timelineIn'+'dex']<this['segmentTim'+'elines']['length']-(0x1123+0x8d2*0x4+0x2*-0x1a35)?_0x13bb2d['timelineIn'+'dex']+(-0x143b*-0x1+-0x16da+-0x1c*-0x18):-0x1763+0x26a7+-0xf44;this['lastLoadIn'+'dex']!==_0xefa283&&(this['lastLoadIn'+'dex']=_0xefa283,this['loadNextSe'+'gment'](_0xefa283));}async['loadNextSe'+'gment'](_0x33a5ff){const _0x5dc038=[];for(let _0x4c141f=-0x3cb*0x6+-0x1baa+-0x39a*-0xe;_0x4c141f<Xh['CACHE_COUN'+'T'];_0x4c141f++)_0x5dc038['push']((_0x33a5ff+_0x4c141f)%this['segmentTim'+'elines']['length']);const _0x273572=_0x5dc038[_0x5dc038['length']-(-0x169f+0x2d9+-0x13c7*-0x1)],_0x15a943=this['segmentTim'+'elines'][_0x273572]['t']+this['segmentTim'+'elines'][_0x273572]['d'];this['gsdAssetPa'+'rser']['appendload'+'DataTask'](_0x5dc038,_0x15a943);}['findSegmen'+'tTimeline'](_0x2f1fc1){let _0x6f828c=-0x38*0x8b+-0x204f+0x3eb7,_0x260b61=this['segmentTim'+'elines']['length']-(-0xeb7+-0x1906+0x27be*0x1);for(;_0x6f828c<=_0x260b61;){const _0x283383=_0x6f828c+_0x260b61>>0x21f1+0x627+-0x2817,{t:_0x3189b7,d:_0x1e327c}=this['segmentTim'+'elines'][_0x283383];if(_0x2f1fc1<_0x3189b7)_0x260b61=_0x283383-(-0x43*0x73+0x35a*-0x7+0x359*0x10);else{if(_0x2f1fc1>=_0x3189b7+_0x1e327c)_0x6f828c=_0x283383+(-0x1bd0+0x190b+0x2c6*0x1);else return{'timeline':this['segmentTim'+'elines'][_0x283383],'timelineIndex':_0x283383};}}return null;}};h(Xh,'CACHE_COUN'+'T',-0x1767+-0x1*0x117f+-0x246*-0x12);let Wu=Xh;class dk{constructor(_0x917032,_0x3cd1e8){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'manifest'),h(this,'schedule'),h(this,'readWorker'),h(this,'loadDataTa'+'skQueue',[]),h(this,'isProcessi'+'ngLoadTask'+'Queue',!(-0x110a+0x1*0xb8d+0x57e)),(console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','Register\x20G'+'sdParser.c'+'onstructor'),this['app']=_0x917032,this['maxRetries']=_0x3cd1e8,this['urlList']=[],this['gsplatReso'+'urce']=null,this['totalRecei'+'ved']=0x7cf+-0x1d30+0xd*0x1a5,this['manifest']={});}async['load'](_0xe40b90,_0xc72524,_0xdf4029){console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','GsdParser.'+'load',_0xe40b90['load']);const _0x4a9344=_0xdf4029['data']['events'];this['events']=_0x4a9344,this['asset']=_0xdf4029,this['callback']=_0xc72524,this['timeOption']=_0xdf4029['data']['timeOption'];let _0x153933=_0xdf4029['data']['representa'+'tion']||'high-raw';this['readWorker']=new hk(_0xe40b90['load']);const _0x95cf26=await this['readWorker']['loadGsdMan'+'ifest'](_0x153933);this['manifest']=_0x95cf26['manifest'],_0x153933=_0x95cf26['manifest']['representa'+'tion']||_0x153933,this['schedule']=new Wu(this['manifest'],_0x153933,this),this['totalRecei'+'vedCount']=0x21a1+-0xe28+-0x1379;const _0x297da0=this['getSegment'+'Timeline'](this['manifest'],_0x153933),_0x2fdef1=_0x297da0[-0x1cd3*0x1+-0x1*0x1175+-0x1*-0x2e48]['t']+_0x297da0[0x1c2d*-0x1+0x167b*-0x1+-0x8*-0x655]['d'];this['appendload'+'DataTask']([0xb5*-0xb+-0x1b17+-0x116f*-0x2,-0x1*0x1e6d+-0xa*-0x137+0x1248],_0x2fdef1),_0x4a9344['on']('timeChange'+'d',_0x552d10=>{var _0x4465bd;(_0x4465bd=this['schedule'])==null||_0x4465bd['onTimeChan'+'ged'](_0x552d10);});}['getSegment'+'Timeline'](_0x502d3f,_0xe0a08f){let _0x5ad7d5=null;for(const _0x56529a of _0x502d3f['adaptation'+'Sets'])if(_0x56529a['contentTyp'+'e']==='4dgs'){for(const _0xbb59ad of _0x56529a['representa'+'tions'])if(_0xbb59ad['id']===_0xe0a08f){_0x5ad7d5=_0xbb59ad;break;}break;}if(!_0x5ad7d5)throw new Error('Representa'+'tion\x20\x27'+_0xe0a08f+('\x27\x20not\x20foun'+'d'));return _0x5ad7d5['segmentTem'+'plate'][-0x7d1+0x9de+0x3*-0xaf]['segmentTim'+'eline'];}['appendload'+'DataTask'](_0x65ac6,_0x52937a){this['loadDataTa'+'skQueue']['push']({'segmentIndexs':_0x65ac6,'loadedTime':_0x52937a}),this['isProcessi'+'ngLoadTask'+'Queue']||Promise['resolve']()['then'](()=>this['processLoa'+'dQueue']());}async['processLoa'+'dQueue'](){if(!this['isProcessi'+'ngLoadTask'+'Queue']){this['isProcessi'+'ngLoadTask'+'Queue']=!(-0x1a00+-0x16f*0x1+0x1b6f);try{for(;this['loadDataTa'+'skQueue']['length']>0x8e*-0x32+-0xd4e+0x290a*0x1;){const _0x487888=this['loadDataTa'+'skQueue']['shift']();await this['loadGsplat'+'Data'](_0x487888);}}finally{this['isProcessi'+'ngLoadTask'+'Queue']=!(0x251c+-0x349+-0x12*0x1e1);}}}async['loadGsplat'+'Data'](_0x158058){var _0x325087,_0x437700;const {segmentIndexs:_0x50a236,loadedTime:_0x1761cf}=_0x158058,_0x5c6a55=this['events'],_0x1266a6=this['asset'],_0x5a512f=this['callback'],_0x2f13de=this['timeOption'];globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('____loadTi'+'me','gsd\x20======'+'=========='+'=========='+'=========='+'=========='+'========='),console['log']('____loadTi'+'me','gsd\x20start\x20'+'loadGsplat'+'Data',_0x50a236,(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](0x3f*-0x1b+-0x1737+0x1dde));try{const _0x1d18f9=await this['readWorker']['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x50a236,(_0x26d249,_0x369a48)=>{this['totalRecei'+'ved']+=_0x26d249,_0x1266a6&&_0x5c6a55['fire']('progress',this['totalRecei'+'ved'],_0x369a48);},(_0x117af4,_0x4f46ce)=>{debugger;console['warn']('ERROE\x20Load'+'\x20GSD',_0x4f46ce,_0x117af4);});console['log']('____loadTi'+'me','gsd\x20end\x20lo'+'adGsplatDa'+'ta',(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](0x1*0x2669+0x895*0x3+-0x4026),_0x1d18f9['data']['elements'][-0x17a7+0xc1f+0xb88]['count'],((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/_0x1d18f9['data']['elements'][0x1c5e*-0x1+0x1681+0x5dd]['count']*(-0x1e65+0x29c1+0x1bb4))['toFixed'](-0x2538+0x1*-0xa49+-0x1*-0x2f83));const _0x203e12=_0x1d18f9['data'];if(_0x203e12['elements'][0x140+-0x1*-0x2105+-0x2245]['count']===0x1e53*0x1+-0x1*-0x509+-0x235c)return;this['totalRecei'+'vedCount']+=_0x203e12['elements'][-0xa9b+0x1*0x259a+-0x1aff]['count'];const _0x48f687=new iC(_0x203e12['elements'],_0x203e12['comments']);_0x1266a6['fire']('load:data',_0x48f687);const _0x3ada71=_0x1266a6['data']['createTime']!==((_0x437700=(_0x325087=this['onlyOneAss'+'et'])==null?void(-0x29f*-0x1+0x1*0x2f+-0x2*0x167):_0x325087['data'])==null?void(0x166e+0x186d+0x2edb*-0x1):_0x437700['createTime']);this['gsplatReso'+'urce']&&!_0x3ada71?(console['log']('____\x20ENGIN'+'E\x20IVAN','appendGSpl'+'atDecodedR'+'esource'),this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x48f687,_0x2f13de,_0x1761cf,_0x1266a6)):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'DecodedRes'+'ource'),this['gsplatReso'+'urce']=new CC(this['app']['graphicsDe'+'vice'],_0x48f687),this['gsplatReso'+'urce']['setSceneIn'+'fo'](this['manifest']['sceneInfo']),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x2f13de,this['onlyOneAss'+'et']=_0x1266a6,_0x5a512f&&_0x5a512f(null,this['gsplatReso'+'urce']),_0x5c6a55['fire']('loadAllAss'+'etsDone'));}catch(_0x123a57){console['error']('loadGsplat'+'Data','error',_0x123a57),_0x5a512f&&_0x5a512f(_0x123a57,null);}}['open'](_0x2bd4bc,_0x3d824b){return _0x3d824b;}}class fk extends Qe{constructor(_0x2df686){console['log']('____\x20ENGIN'+'E\x20IVAN','Register\x20G'+'SplatHandl'+'er.constru'+'ctor\x20by\x20ap'+'plication\x20'+'addResourc'+'eHandles'),super(_0x2df686,'gsplat'),this['parsers']={'ply':new lk(_0x2df686,-0xf5a+0xf4c*0x1+-0x11*-0x1),'json':new dk(_0x2df686,-0x599+-0x1c6*0xb+0x191e)};}['_getUrlWit'+'houtParams'](_0x51150b){return _0x51150b['indexOf']('?')>=0x132+-0x2102+0x1fd0?_0x51150b['split']('?')[-0x11ff+-0x1693+0x2*0x1449]:_0x51150b;}['_getParser'](_0x4b83f9){const _0x1e4f91=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x4b83f9))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x1e4f91]||this['parsers']['ply'];}['load'](_0x47c378,_0x10f850,_0x259dea){console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.load'),typeof _0x47c378=='string'&&(_0x47c378={'load':_0x47c378,'original':_0x47c378}),this['_getParser'](_0x47c378['original'])['load'](_0x47c378,_0x10f850,_0x259dea);}['open'](_0x3df6c5,_0x471d75,_0x55069c){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.open'),_0x471d75;}}class $u{static['setCompres'+'sedPRS'](_0x37b2f9,_0x1eace7,_0x4bbda5){const _0x49052b=_0x4bbda5['singleVecs'];let _0x40628e,_0x445e2c;const _0x5c1e15=_0x1eace7['___1'];_0x5c1e15||(_0x40628e=_0x4bbda5['tripleVecs'],_0x445e2c=_0x1eace7['___2']);let _0x130c0e=_0x5c1e15?_0x5c1e15[0x385+-0x2*-0x1085+-0xbf*0x31]:_0x40628e[_0x445e2c];_0x37b2f9['setLocalPo'+'sition'](_0x49052b[_0x130c0e],_0x49052b[_0x130c0e+(-0x853*0x3+-0xbc9+0x24c3)],_0x49052b[_0x130c0e+(-0x145d*0x1+0x1141*0x2+-0x2f*0x4d)]),_0x130c0e=_0x5c1e15?_0x5c1e15[0x11*0x7d+-0x9f*-0x39+-0x2bb3]:_0x40628e[_0x445e2c+(-0x53*0x67+-0x13*0x53+-0x278f*-0x1)],_0x37b2f9['setLocalEu'+'lerAngles'](_0x49052b[_0x130c0e],_0x49052b[_0x130c0e+(0x24a5+0xba*-0x12+-0x1790)],_0x49052b[_0x130c0e+(0x2572+0x45d+-0x29cd)]),_0x130c0e=_0x5c1e15?_0x5c1e15[-0xc2*0x9+0x756+-0x82]:_0x40628e[_0x445e2c+(-0x557*0x7+0x10ca+0x1499)],_0x37b2f9['setLocalSc'+'ale'](_0x49052b[_0x130c0e],_0x49052b[_0x130c0e+(0x469*-0x3+0x171e+-0x9e2)],_0x49052b[_0x130c0e+(-0x4*-0x5b3+0x1067+-0x2731)]);}static['oneCharToK'+'ey'](_0x223445,_0x3ee2f9){const _0x756e9c=_0x223445['charCodeAt'](-0x3b+-0x4c*0x67+0x1ecf)-_0x3ee2f9['fieldFirst'+'Code'];return _0x3ee2f9['fieldArray'][_0x756e9c];}static['multCharTo'+'Key'](_0x3b55b3,_0x4498b1){let _0x1974e8=0x2286+0xcfe+0x2f84*-0x1;for(let _0x5131fc=0xcb8+0x2*0x827+-0x1d06;_0x5131fc<_0x3b55b3['length'];_0x5131fc++)_0x1974e8=_0x1974e8*_0x4498b1['fieldCodeB'+'ase']+_0x3b55b3['charCodeAt'](_0x5131fc)-_0x4498b1['fieldFirst'+'Code'];return _0x4498b1['fieldArray'][_0x1974e8];}}class Uh{constructor(_0x4597f4,_0x1e8bcb){this['_node']=_0x4597f4,this['_data']=_0x1e8bcb;}['run'](){const _0x501fa6=Object['prototype']['toString']['call'](this['_node']);return _0x501fa6==='[object\x20Ob'+'ject]'?this['_handleMap']():_0x501fa6==='[object\x20Ar'+'ray]'?this['_handleArr'+'ay']():this['_result']=this['_node'],this['_result'];}['_handleMap'](){this['_result']={},Object['keys'](this['_node'])['forEach'](this['_handleKey'],this);}['_handleKey'](_0x534fd3){let _0x3c6ba9=_0x534fd3;const _0x27fb65=_0x534fd3['length'];_0x27fb65===0xed*-0x19+-0x1f80*-0x1+-0x85a*0x1?_0x3c6ba9=$u['oneCharToK'+'ey'](_0x534fd3,this['_data']):_0x27fb65===-0x226e+0xbcd+0x16a3&&(_0x3c6ba9=$u['multCharTo'+'Key'](_0x534fd3,this['_data'])),this['_result'][_0x3c6ba9]=new Uh(this['_node'][_0x534fd3],this['_data'])['run']();}['_handleArr'+'ay'](){this['_result']=[],this['_node']['forEach'](this['_handleArE'+'lt'],this);}['_handleArE'+'lt'](_0x114827){const _0x343d27=new Uh(_0x114827,this['_data'])['run']();this['_result']['push'](_0x343d27);}}class bm{constructor(_0x54efb4,_0x29971a){this['_app']=_0x54efb4,this['_isTemplat'+'e']=_0x29971a;}['parse'](_0x3fc426){const _0x311bc8={};let _0x20a86d=null;const _0x4fd1f0=_0x3fc426['compressed'+'Format'];_0x4fd1f0&&!_0x3fc426['entDecompr'+'essed']&&(_0x3fc426['entDecompr'+'essed']=!(-0x1*0x17b3+0x3c*-0x5e+0x2dbb),_0x3fc426['entities']=new Uh(_0x3fc426['entities'],_0x4fd1f0)['run']());for(const _0x118dfc in _0x3fc426['entities']){const _0x10a588=_0x3fc426['entities'][_0x118dfc],_0x29b8e3=this['_createEnt'+'ity'](_0x10a588,_0x4fd1f0);_0x311bc8[_0x118dfc]=_0x29b8e3,_0x10a588['parent']===null&&(_0x20a86d=_0x29b8e3);}for(const _0x224f94 in _0x3fc426['entities']){const _0x1885ad=_0x311bc8[_0x224f94],_0x5e5684=_0x3fc426['entities'][_0x224f94]['children'],_0xf4f069=_0x5e5684['length'];for(let _0x57806e=0x260c+0x2121+-0x472d;_0x57806e<_0xf4f069;_0x57806e++){const _0x18b514=_0x311bc8[_0x5e5684[_0x57806e]];_0x18b514&&_0x1885ad['addChild'](_0x18b514);}}return this['_openCompo'+'nentData'](_0x20a86d,_0x3fc426['entities']),_0x20a86d;}['_createEnt'+'ity'](_0x15ba39,_0x3bab32){const _0x1e9834=new lt(_0x15ba39['name'],this['_app']);if(_0x1e9834['setGuid'](_0x15ba39['resource_i'+'d']),this['_setPosRot'+'Scale'](_0x1e9834,_0x15ba39,_0x3bab32),_0x1e9834['_enabled']=_0x15ba39['enabled']??!(-0x3aa*0x3+0x1*-0x25b5+0x30b3),this['_isTemplat'+'e']?_0x1e9834['_template']=!(0xfde+-0x3*-0x36e+0x68a*-0x4):_0x1e9834['_enabledIn'+'Hierarchy']=_0x1e9834['_enabled'],_0x1e9834['template']=_0x15ba39['template'],_0x15ba39['tags']){for(let _0x305485=0x1*-0x207a+0x20*0xb3+0x50d*0x2;_0x305485<_0x15ba39['tags']['length'];_0x305485++)_0x1e9834['tags']['add'](_0x15ba39['tags'][_0x305485]);}return _0x1e9834;}['_setPosRot'+'Scale'](_0x127ae5,_0x40c43a,_0x4a16d1){if(_0x4a16d1)$u['setCompres'+'sedPRS'](_0x127ae5,_0x40c43a,_0x4a16d1);else{const _0x2a53ac=_0x40c43a['position'],_0x2f3809=_0x40c43a['rotation'],_0x11157f=_0x40c43a['scale'];_0x127ae5['setLocalPo'+'sition'](_0x2a53ac[0x1*-0x411+-0x15*-0x1b7+-0x1ff2],_0x2a53ac[-0x1e38+-0xd*0x2b+0x1*0x2068],_0x2a53ac[-0x617*-0x1+-0xf8e+0x61*0x19]),_0x127ae5['setLocalEu'+'lerAngles'](_0x2f3809[0x14d6+-0x269*0x5+0x1*-0x8c9],_0x2f3809[0x1e96+-0x166d*0x1+-0x3a*0x24],_0x2f3809[-0x2d5+-0x1a75+0x1d4c]),_0x127ae5['setLocalSc'+'ale'](_0x11157f[0x24ba+-0x1684*-0x1+0x2*-0x1d9f],_0x11157f[0x136c+-0x12db*0x1+0x18*-0x6],_0x11157f[-0x65a*-0x4+-0x2562+-0x1a*-0x76]);}}['_openCompo'+'nentData'](_0x2306b1,_0x1a9ff9){const _0x3370d4=this['_app']['systems']['list'];let _0x2b2579=_0x3370d4['length'];const _0x51295e=_0x1a9ff9[_0x2306b1['getGuid']()];for(let _0x34c8d3=0x1d*0xfd+-0x1f81+-0x2d8*-0x1;_0x34c8d3<_0x2b2579;_0x34c8d3++){const _0x5ade76=_0x3370d4[_0x34c8d3],_0x272afd=_0x51295e['components'][_0x5ade76['id']];_0x272afd&&_0x5ade76['addCompone'+'nt'](_0x2306b1,_0x272afd);}_0x2b2579=_0x51295e['children']['length'];const _0x13805c=_0x2306b1['_children'];for(let _0x457e7d=0x3a1+0x9c+-0x43d;_0x457e7d<_0x2b2579;_0x457e7d++)_0x13805c[_0x457e7d]?_0x13805c[_0x457e7d]=this['_openCompo'+'nentData'](_0x13805c[_0x457e7d],_0x1a9ff9):w['warn']('Scene\x20data'+'\x20is\x20invali'+'d\x20where\x20a\x20'+'child\x20unde'+'r\x20\x22'+_0x2306b1['name']+('\x22\x20Entity\x20d'+'oesn\x27t\x20exi'+'st.\x20Please'+'\x20check\x20the'+'\x20scene\x20dat'+'a.'));return _0x2306b1;}}class E0{static['load'](_0x4ccd71,_0x2fe71e,_0x45c635){typeof _0x4ccd71=='string'&&(_0x4ccd71={'load':_0x4ccd71,'original':_0x4ccd71}),ot['get'](_0x4ccd71['load'],{'retry':_0x2fe71e>-0x3*-0x97b+0xc0f+-0x288*0x10,'maxRetries':_0x2fe71e},(_0xed583c,_0x24d035)=>{if(!_0xed583c)_0x45c635(_0xed583c,_0x24d035);else{let _0x317c13='Error\x20whil'+'e\x20loading\x20'+'scene\x20JSON'+'\x20'+_0x4ccd71['original'];_0xed583c['message']?(_0x317c13+=':\x20'+_0xed583c['message'],_0xed583c['stack']&&(_0x317c13+='\x0a'+_0xed583c['stack'])):_0x317c13+=':\x20'+_0xed583c,_0x45c635(_0x317c13);}});}}class uk extends Qe{constructor(_0x1ed258){super(_0x1ed258,'hierarchy');}['load'](_0x2ffec0,_0x630258){E0['load'](_0x2ffec0,this['maxRetries'],_0x630258);}['open'](_0x46519b,_0x4201a9){this['_app']['systems']['script']['preloading']=!(-0x18f5*0x1+0x23b5*0x1+-0xac0);const _0x484f70=new bm(this['_app'],!(0xb*-0x373+0x6d*0x31+-0x1115*-0x1))['parse'](_0x4201a9);return this['_app']['systems']['script']['preloading']=!(0x23c6*0x1+0x11a1+-0x3566),_0x484f70;}}class pk extends Qe{constructor(_0x50a782){super(_0x50a782,'html'),h(this,'decoder',null);}['load'](_0x1de1e0,_0x384c9b){typeof _0x1de1e0=='string'&&(_0x1de1e0={'load':_0x1de1e0,'original':_0x1de1e0}),ot['get'](_0x1de1e0['load'],{'retry':this['maxRetries']>-0x1*-0x229b+-0xfb3*-0x1+-0x324e,'maxRetries':this['maxRetries']},(_0x2b67ef,_0x5a6f2c)=>{_0x2b67ef?_0x384c9b('Error\x20load'+'ing\x20html\x20r'+'esource:\x20'+_0x1de1e0['original']+'\x20['+_0x2b67ef+']'):_0x384c9b(null,_0x5a6f2c);});}['openBinary'](_0x316c30){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x316c30);}}class mk extends Qe{constructor(_0x8a031e){super(_0x8a031e,'json'),h(this,'decoder',null);}['load'](_0x58a861,_0xb7ac1a){typeof _0x58a861=='string'&&(_0x58a861={'load':_0x58a861,'original':_0x58a861});const _0xb6120b={'retry':this['maxRetries']>-0x13a7+-0x3*-0x64b+-0x6*-0x21,'maxRetries':this['maxRetries']};_0x58a861['load']['startsWith']('blob:')&&(_0xb6120b['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x58a861['load'],_0xb6120b,(_0x264c15,_0x4c8275)=>{_0x264c15?_0xb7ac1a('Error\x20load'+'ing\x20JSON\x20r'+'esource:\x20'+_0x58a861['original']+'\x20['+_0x264c15+']'):_0xb7ac1a(null,_0x4c8275);});}['openBinary'](_0x518875){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),JSON['parse'](this['decoder']['decode'](_0x518875));}}class _k{constructor(){this['removeInva'+'lid']=!(0x17ff*0x1+-0x2*-0xb83+0x2f05*-0x1),this['valid']=!(0x1405+-0xb9*0x12+-0x703),this['enumValida'+'tors']={'occludeSpecular':this['_createEnu'+'mValidator']([lv,bd,cv]),'cull':this['_createEnu'+'mValidator']([bt,pa,Fo,Ax]),'blendType':this['_createEnu'+'mValidator']([Gp,Hp,Zs,Cs,Gn,Wp,Ed,$p,Xp,qp,jp]),'depthFunc':this['_createEnu'+'mValidator']([Cx,hh,dh,Wf,Px,Mx,Dx,Wi])};}['setInvalid'](_0x5a6607,_0x378d57){this['valid']=!(-0xe87+-0x72*0x6+0x1134),w['warn']('Ignoring\x20i'+'nvalid\x20Sta'+'ndardMater'+'ial\x20proper'+'ty:\x20'+_0x5a6607,_0x378d57[_0x5a6607]),this['removeInva'+'lid']&&delete _0x378d57[_0x5a6607];}['validate'](_0x53cd7b){const _0x37cf25=$n,_0x4d9d98=gb,_0x5b43b1=_0x53cd7b['mappingFor'+'mat']==='path';for(const _0x22aae4 in _0x53cd7b){const _0x50e2b3=_0x37cf25[_0x22aae4];if(!_0x50e2b3){_0x4d9d98[_0x22aae4]?delete _0x53cd7b[_0x22aae4]:(w['warnOnce']('Ignoring\x20u'+'nsupported'+'\x20input\x20pro'+'perty\x20to\x20s'+'tandard\x20ma'+'terial:\x20'+_0x22aae4),this['valid']=!(0xd0f*0x2+0x1*0x9c3+-0x23e0));continue;}if(_0x50e2b3['startsWith']('enum')){const _0x440c0b=_0x50e2b3['split'](':')[-0x1*-0xfad+0xd*-0x2fb+-0x7b1*-0x3];this['enumValida'+'tors'][_0x440c0b]&&(this['enumValida'+'tors'][_0x440c0b](_0x53cd7b[_0x22aae4])||this['setInvalid'](_0x22aae4,_0x53cd7b));}else{if(_0x50e2b3==='number')typeof _0x53cd7b[_0x22aae4]!='number'&&this['setInvalid'](_0x22aae4,_0x53cd7b);else{if(_0x50e2b3==='boolean')typeof _0x53cd7b[_0x22aae4]!='boolean'&&this['setInvalid'](_0x22aae4,_0x53cd7b);else{if(_0x50e2b3==='string')typeof _0x53cd7b[_0x22aae4]!='string'&&this['setInvalid'](_0x22aae4,_0x53cd7b);else{if(_0x50e2b3==='vec2')_0x53cd7b[_0x22aae4]instanceof Array&&_0x53cd7b[_0x22aae4]['length']===0xb9a+0x3*-0xc73+0x13*0x15b||this['setInvalid'](_0x22aae4,_0x53cd7b);else{if(_0x50e2b3==='rgb')_0x53cd7b[_0x22aae4]instanceof Array&&_0x53cd7b[_0x22aae4]['length']===0xbbf+0x1*-0x246b+0x18af||this['setInvalid'](_0x22aae4,_0x53cd7b);else{if(_0x50e2b3==='texture')_0x5b43b1?typeof _0x53cd7b[_0x22aae4]=='string'||_0x53cd7b[_0x22aae4]===null||_0x53cd7b[_0x22aae4]instanceof _e||this['setInvalid'](_0x22aae4,_0x53cd7b):typeof _0x53cd7b[_0x22aae4]=='number'||_0x53cd7b[_0x22aae4]===null||_0x53cd7b[_0x22aae4]instanceof _e||this['setInvalid'](_0x22aae4,_0x53cd7b);else{if(_0x50e2b3==='boundingbo'+'x')_0x53cd7b[_0x22aae4]['center']&&_0x53cd7b[_0x22aae4]['center']instanceof Array&&_0x53cd7b[_0x22aae4]['center']['length']===-0xc9e*-0x1+0x17a1+-0x243c||this['setInvalid'](_0x22aae4,_0x53cd7b),_0x53cd7b[_0x22aae4]['halfExtent'+'s']&&_0x53cd7b[_0x22aae4]['halfExtent'+'s']instanceof Array&&_0x53cd7b[_0x22aae4]['halfExtent'+'s']['length']===0x8e+0xd96+0xe21*-0x1||this['setInvalid'](_0x22aae4,_0x53cd7b);else{if(_0x50e2b3==='cubemap')typeof _0x53cd7b[_0x22aae4]=='number'||_0x53cd7b[_0x22aae4]===null||_0x53cd7b[_0x22aae4]===void(0x1*-0x1eef+0x43*0x3c+0xf3b)||_0x53cd7b[_0x22aae4]instanceof _e&&_0x53cd7b[_0x22aae4]['cubemap']||this['setInvalid'](_0x22aae4,_0x53cd7b);else{if(_0x50e2b3==='chunks'){const _0x792aa9=Object['keys'](_0x53cd7b[_0x22aae4]);for(let _0x4f411b=0x19c7+-0xd3a*0x2+-0xad*-0x1;_0x4f411b<_0x792aa9['length'];_0x4f411b++)typeof _0x53cd7b[_0x22aae4][_0x792aa9[_0x4f411b]]!='string'&&this['setInvalid'](_0x792aa9[_0x4f411b],_0x53cd7b[_0x22aae4]);}else console['error']('Unknown\x20ma'+'terial\x20typ'+'e:\x20'+_0x50e2b3);}}}}}}}}}}return _0x53cd7b['validated']=!(-0x1d22+-0x127d+0x49*0xa7),this['valid'];}['_createEnu'+'mValidator'](_0x84332e){return function(_0x55b9be){return _0x84332e['indexOf'](_0x55b9be)>=-0x1af9+0x1916+-0x45*-0x7;};}}class gk{constructor(){this['_validator']=null;}['parse'](_0x35e9f7){const _0x24acb0=this['migrate'](_0x35e9f7),_0x2ad228=this['_validate'](_0x24acb0),_0x43fce1=new Ut();return this['initialize'](_0x43fce1,_0x2ad228),_0x43fce1;}['initialize'](_0x2e4f95,_0x14e3cc){if(_0x14e3cc['validated']||(_0x14e3cc=this['_validate'](_0x14e3cc)),_0x14e3cc['chunks']&&_0x14e3cc['chunks']&&Object['keys'](_0x14e3cc['chunks'])['length']>0x21f6+0x2a2*0x7+0x4*-0xd19){const _0xd7a381=_0x2e4f95['shaderChun'+'ks']['glsl'];Object['entries'](_0x14e3cc['chunks'])['forEach'](([_0x19fcb8,_0x2c0557])=>_0xd7a381['set'](_0x19fcb8,_0x2c0557));}for(const _0x270f2e in _0x14e3cc){const _0x290326=$n[_0x270f2e],_0x478d5a=_0x14e3cc[_0x270f2e];if(_0x290326==='vec2')_0x2e4f95[_0x270f2e]=new J(_0x478d5a[0xa86+0xef7+-0x197d],_0x478d5a[0x80b+-0x17*-0x171+-0x2bf*0xf]);else{if(_0x290326==='rgb')_0x2e4f95[_0x270f2e]=new ie(_0x478d5a[0x198e+0x742*-0x3+-0x2*0x1e4],_0x478d5a[0x11*0x4+0x1f6+0x239*-0x1],_0x478d5a[-0xe44+-0x1cdf+0x2b25]);else{if(_0x290326==='texture')_0x478d5a instanceof _e?_0x2e4f95[_0x270f2e]=_0x478d5a:_0x2e4f95[_0x270f2e]instanceof _e&&typeof _0x478d5a=='number'&&_0x478d5a>0x1f*0x7b+-0x47*0x2a+-0x33f||(_0x2e4f95[_0x270f2e]=null);else{if(_0x290326==='cubemap')_0x478d5a instanceof _e?_0x2e4f95[_0x270f2e]=_0x478d5a:_0x2e4f95[_0x270f2e]instanceof _e&&typeof _0x478d5a=='number'&&_0x478d5a>0x4a*0x4d+-0x1de9+0x7a7||(_0x2e4f95[_0x270f2e]=null),_0x270f2e==='cubeMap'&&!_0x478d5a&&(_0x2e4f95['prefiltere'+'dCubemaps']=null);else{if(_0x290326==='boundingbo'+'x'){const _0x126e6c=new D(_0x478d5a['center'][-0x12a*-0x17+-0x10*0x29+-0x409*0x6],_0x478d5a['center'][-0xb37+-0x11*-0x1c9+-0x1321],_0x478d5a['center'][-0x1397+-0x15b*0xf+0x27ee]),_0x1b534b=new D(_0x478d5a['halfExtent'+'s'][0x19a7+0xa52*0x1+-0x23f9*0x1],_0x478d5a['halfExtent'+'s'][0x2*-0x86d+0x1b56+0x1*-0xa7b],_0x478d5a['halfExtent'+'s'][0x2377+-0xbe3*0x1+0x1af*-0xe]);_0x2e4f95[_0x270f2e]=new De(_0x126e6c,_0x1b534b);}else _0x2e4f95[_0x270f2e]=_0x14e3cc[_0x270f2e];}}}}}_0x2e4f95['update']();}['migrate'](_0x52ea57){_0x52ea57['shader']&&delete _0x52ea57['shader'],_0x52ea57['mapping_fo'+'rmat']&&(_0x52ea57['mappingFor'+'mat']=_0x52ea57['mapping_fo'+'rmat'],delete _0x52ea57['mapping_fo'+'rmat']);let _0x1de1fc;const _0x341fb9=[['bumpMapFac'+'tor','bumpiness'],['aoUvSet','aoMapUv'],['aoMapVerte'+'xColor','aoVertexCo'+'lor'],['diffuseMap'+'VertexColo'+'r','diffuseVer'+'texColor'],['emissiveMa'+'pVertexCol'+'or','emissiveVe'+'rtexColor'],['specularMa'+'pVertexCol'+'or','specularVe'+'rtexColor'],['metalnessM'+'apVertexCo'+'lor','metalnessV'+'ertexColor'],['opacityMap'+'VertexColo'+'r','opacityVer'+'texColor'],['glossMapVe'+'rtexColor','glossVerte'+'xColor'],['lightMapVe'+'rtexColor','lightVerte'+'xColor'],['specularMa'+'pTint','specularTi'+'nt'],['metalnessM'+'apTint','metalnessT'+'int'],['clearCoatG'+'lossiness','clearCoatG'+'loss']];for(_0x1de1fc=0x1e15*0x1+-0x4*-0x269+-0x1*0x27b9;_0x1de1fc<_0x341fb9['length'];_0x1de1fc++){const _0x2a12e5=_0x341fb9[_0x1de1fc][-0x19da+-0x1cbb*-0x1+-0x1*0x2e1],_0x30e8a8=_0x341fb9[_0x1de1fc][0x1380+-0x1eca*0x1+0x1*0xb4b];_0x52ea57[_0x2a12e5]!==void(0xec6+-0x13b8+0x4f2)&&(_0x52ea57[_0x30e8a8]===void(0x8a7+-0x3*-0x1+-0x8aa*0x1)&&(_0x52ea57[_0x30e8a8]=_0x52ea57[_0x2a12e5]),delete _0x52ea57[_0x2a12e5]);}const _0x43709e=['fresnelFac'+'tor','shadowSamp'+'leType'];for(_0x1de1fc=0x73+0x1*0x1af9+-0x1b6c;_0x1de1fc<_0x43709e['length'];_0x1de1fc++){const _0x2daf21=_0x43709e[_0x1de1fc];_0x52ea57['hasOwnProp'+'erty'](_0x2daf21)&&delete _0x52ea57[_0x2daf21];}return _0x52ea57;}['_validate'](_0x46b3a7){return _0x46b3a7['validated']||(this['_validator']||(this['_validator']=new _k()),this['_validator']['validate'](_0x46b3a7)),_0x46b3a7;}}const Sk={'aoMap':'white','aoDetailMap':'white','diffuseMap':'gray','diffuseDetailMap':'gray','specularMap':'gray','specularityFactorMap':'white','metalnessMap':'black','glossMap':'gray','sheenMap':'black','sheenGlossMap':'gray','clearCoatMap':'black','clearCoatGlossMap':'gray','clearCoatNormalMap':'normal','refractionMap':'white','emissiveMap':'gray','normalMap':'normal','normalDetailMap':'normal','heightMap':'gray','opacityMap':'gray','sphereMap':'gray','lightMap':'white','thicknessMap':'black','iridescenceMap':'black','iridescenceThicknessMap':'black','envAtlas':'black','anisotropyMap':'black'};class yk extends Qe{constructor(_0x54d7c0){super(_0x54d7c0,'material'),this['_assets']=_0x54d7c0['assets'],this['_device']=_0x54d7c0['graphicsDe'+'vice'],this['_parser']=new gk();}['load'](_0x281c6c,_0xdd8632){typeof _0x281c6c=='string'&&(_0x281c6c={'load':_0x281c6c,'original':_0x281c6c}),ot['get'](_0x281c6c['load'],{'retry':this['maxRetries']>0xa18+-0xc11+0x1f9,'maxRetries':this['maxRetries']},(_0x1712a8,_0x131bdd)=>{_0x1712a8?_0xdd8632&&_0xdd8632('Error\x20load'+'ing\x20materi'+'al:\x20'+_0x281c6c['original']+'\x20['+_0x1712a8+']'):_0xdd8632&&(_0x131bdd['_engine']=!(0x1*0xc77+-0x25e2+0x196b),_0xdd8632(null,_0x131bdd));});}['open'](_0x570988,_0x5d5fe5){const _0x29633e=this['_parser']['parse'](_0x5d5fe5);return _0x5d5fe5['_engine']&&(_0x29633e['_data']=_0x5d5fe5,delete _0x5d5fe5['_engine']),_0x29633e;}['patch'](_0x2dd1bf,_0x130bb6){_0x2dd1bf['resource']['_data']&&(_0x2dd1bf['_data']=_0x2dd1bf['resource']['_data'],delete _0x2dd1bf['resource']['_data']),_0x2dd1bf['data']['name']=_0x2dd1bf['name'],_0x2dd1bf['resource']['name']=_0x2dd1bf['name'],this['_bindAndAs'+'signAssets'](_0x2dd1bf,_0x130bb6),_0x2dd1bf['off']('unload',this['_onAssetUn'+'load'],this),_0x2dd1bf['on']('unload',this['_onAssetUn'+'load'],this);}['_onAssetUn'+'load'](_0x3c9977){delete _0x3c9977['data']['parameters'],delete _0x3c9977['data']['chunks'],delete _0x3c9977['data']['name'];}['_assignTex'+'ture'](_0x1d68ee,_0xce1593,_0x100521){_0xce1593['resource'][_0x1d68ee]=_0x100521;}['_getPlaceh'+'olderTextu'+'re'](_0x549413){const _0x491cd6=Sk[_0x549413];return w['assert'](_0x491cd6,'No\x20placeho'+'lder\x20textu'+'re\x20found\x20f'+'or\x20paramet'+'er:\x20'+_0x549413),fa(this['_device'],_0x491cd6);}['_assignPla'+'ceholderTe'+'xture'](_0x457ef8,_0x44fd2e){_0x44fd2e['resource'][_0x457ef8]=this['_getPlaceh'+'olderTextu'+'re'](_0x457ef8);}['_onTexture'+'Load'](_0x343e77,_0x2447de,_0x30c22e){this['_assignTex'+'ture'](_0x343e77,_0x2447de,_0x30c22e['resource']),_0x2447de['resource']['update']();}['_onTexture'+'Add'](_0x51464b,_0x31b226,_0x1dc0ee){this['_assets']['load'](_0x1dc0ee);}['_onTexture'+'RemoveOrUn'+'load'](_0x500043,_0x462b5d,_0x31b54d){const _0x58c738=_0x462b5d['resource'];_0x58c738&&_0x462b5d['resource'][_0x500043]===_0x31b54d['resource']&&(this['_assignPla'+'ceholderTe'+'xture'](_0x500043,_0x462b5d),_0x58c738['update']());}['_assignCub'+'emap'](_0x31925c,_0x2021e1,_0x248801){if(_0x2021e1['resource'][_0x31925c]=_0x248801[-0x3b8+0x1772*-0x1+-0x90e*-0x3],_0x31925c==='cubeMap'){const _0x552960=_0x248801['slice'](-0x141f+-0x873+0x1c93);_0x552960['every'](_0x79b383=>_0x79b383)?_0x2021e1['resource']['prefiltere'+'dCubemaps']=_0x552960:_0x552960[-0x1*-0x29d+0xb60+-0xdfd]&&(_0x2021e1['resource']['envAtlas']=_0x552960[0x4*0x5e+0x8f4*0x2+0x10*-0x136]);}}['_onCubemap'+'Load'](_0xa42d4b,_0x25cc05,_0xbfa803){this['_assignCub'+'emap'](_0xa42d4b,_0x25cc05,_0xbfa803['resources']),this['_parser']['initialize'](_0x25cc05['resource'],_0x25cc05['data']);}['_onCubemap'+'Add'](_0x48dc2b,_0x407ef5,_0x5348e8){this['_assets']['load'](_0x5348e8);}['_onCubemap'+'RemoveOrUn'+'load'](_0xf594ad,_0x1b8c48,_0x56b645){const _0x580600=_0x1b8c48['resource'];_0x1b8c48['data']['prefiltere'+'dCubeMap12'+'8']===_0x56b645['resources'][0x1*-0xdd5+-0x81b*-0x1+-0xa3*-0x9]&&(this['_assignCub'+'emap'](_0xf594ad,_0x1b8c48,[null,null,null,null,null,null,null]),_0x580600['update']());}['_bindAndAs'+'signAssets'](_0x505575,_0x288318){const _0x1d53b6=this['_parser']['migrate'](_0x505575['data']),_0x3a133c=_0x505575['resource'],_0x53958f=_0x1d53b6['mappingFor'+'mat']==='path',_0x4432b5=Cd;let _0x5ec14d,_0x4c8c20,_0x1627eb;for(_0x5ec14d=-0x166*-0x18+-0x4c9+0x1*-0x1cc7;_0x5ec14d<_0x4432b5['length'];_0x5ec14d++){_0x4c8c20=_0x4432b5[_0x5ec14d],_0x1627eb=_0x3a133c['_assetRefe'+'rences'][_0x4c8c20];const _0x3b64f3=_0x1d53b6[_0x4c8c20],_0x235585=_0x3a133c[_0x4c8c20],_0x1bda48=_0x235585===this['_getPlaceh'+'olderTextu'+'re'](_0x4c8c20),_0x353d54=_0x1d53b6['validated'];_0x3b64f3&&(!_0x235585||!_0x353d54||_0x1bda48)?(_0x1627eb||(_0x1627eb=new gl(_0x4c8c20,_0x505575,_0x288318,{'load':this['_onTexture'+'Load'],'add':this['_onTexture'+'Add'],'remove':this['_onTexture'+'RemoveOrUn'+'load'],'unload':this['_onTexture'+'RemoveOrUn'+'load']},this),_0x3a133c['_assetRefe'+'rences'][_0x4c8c20]=_0x1627eb),_0x53958f?_0x1627eb['url']=_0x505575['getAbsolut'+'eUrl'](_0x3b64f3):_0x1627eb['id']=_0x3b64f3,_0x1627eb['asset']&&(_0x1627eb['asset']['resource']?this['_assignTex'+'ture'](_0x4c8c20,_0x505575,_0x1627eb['asset']['resource']):this['_assignPla'+'ceholderTe'+'xture'](_0x4c8c20,_0x505575),_0x288318['load'](_0x1627eb['asset']))):_0x1627eb&&(_0x53958f?_0x1627eb['url']=null:_0x1627eb['id']=null);}const _0x44753c=fm;for(_0x5ec14d=-0x683+0x5*-0x7ab+0x2cda*0x1;_0x5ec14d<_0x44753c['length'];_0x5ec14d++)_0x4c8c20=_0x44753c[_0x5ec14d],_0x1627eb=_0x3a133c['_assetRefe'+'rences'][_0x4c8c20],_0x1d53b6[_0x4c8c20]&&!_0x505575['data']['prefiltere'+'dCubeMap12'+'8']&&(_0x1627eb||(_0x1627eb=new gl(_0x4c8c20,_0x505575,_0x288318,{'load':this['_onCubemap'+'Load'],'add':this['_onCubemap'+'Add'],'remove':this['_onCubemap'+'RemoveOrUn'+'load'],'unload':this['_onCubemap'+'RemoveOrUn'+'load']},this),_0x3a133c['_assetRefe'+'rences'][_0x4c8c20]=_0x1627eb),_0x53958f?_0x1627eb['url']=_0x1d53b6[_0x4c8c20]:_0x1627eb['id']=_0x1d53b6[_0x4c8c20],_0x1627eb['asset']&&(_0x1627eb['asset']['loaded']&&this['_assignCub'+'emap'](_0x4c8c20,_0x505575,_0x1627eb['asset']['resources']),_0x288318['load'](_0x1627eb['asset'])));this['_parser']['initialize'](_0x3a133c,_0x1d53b6);}}class vk{constructor(_0x4f57fd){this['_device']=_0x4f57fd['device'],this['_defaultMa'+'terial']=_0x4f57fd['defaultMat'+'erial'],this['_assets']=_0x4f57fd['assets'];}['parse'](_0x3b2380,_0x4c4548,_0x4c4137){kh['parse']('filename.g'+'lb','',_0x3b2380,this['_device'],this['_assets'],(_0x4c4137==null?void(-0xf1a*-0x1+0x1*0x7ea+-0x1704):_0x4c4137['options'])??{},(_0x2d84b7,_0x2aba9c)=>{if(_0x2d84b7)_0x4c4548(_0x2d84b7);else{const _0x5851d0=yr['createMode'+'l'](_0x2aba9c,this['_defaultMa'+'terial']);_0x2aba9c['destroy'](),_0x4c4548(null,_0x5851d0);}});}}const xk={'points':cd,'lines':hd,'lineloop':_y,'linestrip':gy,'triangles':js,'trianglestrip':Er,'trianglefan':oa},Tk={'int8':dd,'uint8':la,'int16':fd,'uint16':Ml,'int32':Ty,'uint32':el,'float32':Ve};class wk{constructor(_0x2f1fcf){this['_device']=_0x2f1fcf['device'],this['_defaultMa'+'terial']=_0x2f1fcf['defaultMat'+'erial'];}['parse'](_0x28253c,_0x2b4f68){const _0x4aa7d2=_0x28253c['model'];if(!_0x4aa7d2){_0x2b4f68(null,null);return;}if(_0x4aa7d2['version']<=0x4f*0x47+0x1ac9+-0x30b1){_0x2b4f68('JsonModelP'+'arser#pars'+'e:\x20Trying\x20'+'to\x20parse\x20u'+'nsupported'+'\x20model\x20for'+'mat.');return;}const _0x40405e=this['_parseNode'+'s'](_0x28253c),_0x182886=this['_parseSkin'+'s'](_0x28253c,_0x40405e),_0x5d7945=this['_parseVert'+'exBuffers'](_0x28253c),_0x5cab8a=this['_parseInde'+'xBuffers'](_0x28253c,_0x5d7945),_0x5ad014=this['_parseMorp'+'hs'](_0x28253c,_0x40405e,_0x5d7945),_0x13fbcf=this['_parseMesh'+'es'](_0x28253c,_0x182886['skins'],_0x5ad014['morphs'],_0x5d7945,_0x5cab8a['buffer'],_0x5cab8a['data']),_0x40e65d=this['_parseMesh'+'Instances'](_0x28253c,_0x40405e,_0x13fbcf,_0x182886['skins'],_0x182886['instances'],_0x5ad014['morphs'],_0x5ad014['instances']),_0x10fa87=new sr();_0x10fa87['graph']=_0x40405e[-0x1ce*-0x14+0xa7*0x1d+-0x3703],_0x10fa87['meshInstan'+'ces']=_0x40e65d,_0x10fa87['skinInstan'+'ces']=_0x182886['instances'],_0x10fa87['morphInsta'+'nces']=_0x5ad014['instances'],_0x10fa87['getGraph']()['syncHierar'+'chy'](),_0x2b4f68(null,_0x10fa87);}['_parseNode'+'s'](_0xd7e99){const _0x5d22b9=_0xd7e99['model'],_0x551312=[];let _0x32e6be;for(_0x32e6be=0x1445*0x1+0x1993+-0x2dd8;_0x32e6be<_0x5d22b9['nodes']['length'];_0x32e6be++){const _0x205c0f=_0x5d22b9['nodes'][_0x32e6be],_0x24ffc9=new Ie(_0x205c0f['name']);_0x24ffc9['setLocalPo'+'sition'](_0x205c0f['position'][-0x446+0x1363+-0x1*0xf1d],_0x205c0f['position'][0x5f6+0x6d9*-0x3+-0x2*-0x74b],_0x205c0f['position'][0x1016+0x22e6+-0x2*0x197d]),_0x24ffc9['setLocalEu'+'lerAngles'](_0x205c0f['rotation'][-0xdb2+0x2*0x29b+0x16a*0x6],_0x205c0f['rotation'][-0x24b7+-0x3*0x829+0x3d33],_0x205c0f['rotation'][0x1a*-0x5+-0x55c+0x5e0]),_0x24ffc9['setLocalSc'+'ale'](_0x205c0f['scale'][0x1*-0xd43+-0x1*0x2677+0x33ba],_0x205c0f['scale'][-0xfb*-0xd+0x1b02+0x3*-0xd40],_0x205c0f['scale'][0x1*0x1084+-0x3*0x107+-0x7*0x1eb]),_0x24ffc9['scaleCompe'+'nsation']=!!_0x205c0f['scaleCompe'+'nsation'],_0x551312['push'](_0x24ffc9);}for(_0x32e6be=0x154a+0xe2*-0x1b+0x28d;_0x32e6be<_0x5d22b9['parents']['length'];_0x32e6be++)_0x551312[_0x5d22b9['parents'][_0x32e6be]]['addChild'](_0x551312[_0x32e6be]);return _0x551312;}['_parseSkin'+'s'](_0x3884a0,_0x33cd95){const _0x1c85ef=_0x3884a0['model'],_0x3db2a0=[],_0x3b2fa5=[];let _0x217102,_0x1e3e10;for(_0x217102=-0x1331+0x10bc+-0x1*-0x275;_0x217102<_0x1c85ef['skins']['length'];_0x217102++){const _0x2e66f3=_0x1c85ef['skins'][_0x217102],_0x562f6e=[];for(_0x1e3e10=0x2*0xf94+0x7*-0x12a+0x5f*-0x3e;_0x1e3e10<_0x2e66f3['inverseBin'+'dMatrices']['length'];_0x1e3e10++){const _0x59ccc8=_0x2e66f3['inverseBin'+'dMatrices'][_0x1e3e10];_0x562f6e[_0x1e3e10]=new te()['set'](_0x59ccc8);}const _0x32c347=new Lv(this['_device'],_0x562f6e,_0x2e66f3['boneNames']);_0x3db2a0['push'](_0x32c347);const _0x23f8b0=new Ol(_0x32c347),_0x215c1b=[];for(_0x1e3e10=-0x4af+0x206d+-0x1bbe;_0x1e3e10<_0x32c347['boneNames']['length'];_0x1e3e10++){const _0x3e7c2a=_0x32c347['boneNames'][_0x1e3e10],_0x111ca0=_0x33cd95[0xaf5+-0x26bd*-0x1+-0x2*0x18d9]['findByName'](_0x3e7c2a);_0x215c1b['push'](_0x111ca0);}_0x23f8b0['bones']=_0x215c1b,_0x3b2fa5['push'](_0x23f8b0);}return{'skins':_0x3db2a0,'instances':_0x3b2fa5};}['_getMorphV'+'ertexCount'](_0x20b50b,_0x32591f,_0xafb0a2){for(let _0x4c1f1a=-0x685*0x1+0xb*-0xf6+0x1117;_0x4c1f1a<_0x20b50b['meshes']['length'];_0x4c1f1a++){const _0x45ecb0=_0x20b50b['meshes'][_0x4c1f1a];if(_0x45ecb0['morph']===_0x32591f)return _0xafb0a2[_0x45ecb0['vertices']]['numVertice'+'s'];}}['_parseMorp'+'hs'](_0x573599,_0x5c58d9,_0x1c9253){const _0x15f129=_0x573599['model'],_0x5a4eeb=[],_0x2c8a13=[];let _0x28be21,_0x4f7f26,_0x42a704,_0x18617e,_0x4ffde2,_0x55219e;if(_0x15f129['morphs']){const _0x34236f=function(_0x57e4df,_0x64b74d,_0x2b2711){const _0x7056bf=new Float32Array(_0x2b2711*(-0x1ce5+-0x74*-0x4b+0x64*-0xd));for(let _0x1c861e=-0x5*-0x5d4+-0x1651*-0x1+-0x3375*0x1;_0x1c861e<_0x64b74d['length'];_0x1c861e++){const _0x347c18=_0x64b74d[_0x1c861e]*(0x24*-0xf7+-0x90e*0x2+0x34db);_0x7056bf[_0x347c18]=_0x57e4df[_0x1c861e*(0x5e8+0xb3*-0x1d+-0xe*-0x107)],_0x7056bf[_0x347c18+(0xa*0x78+-0x1c4d+0x179e)]=_0x57e4df[_0x1c861e*(-0x3*0x1df+0x923*-0x1+0xec3)+(-0x1*-0x23cf+-0x3*0x5e2+0x14c*-0xe)],_0x7056bf[_0x347c18+(-0xb0d+-0x1092+0x1ba1)]=_0x57e4df[_0x1c861e*(-0x8c6+0x1fed+-0x1724)+(0x258a+-0x1*0x20e3+-0x4a5)];}return _0x7056bf;};for(_0x28be21=-0x13cc+0x248d+-0x10c1;_0x28be21<_0x15f129['morphs']['length'];_0x28be21++){for(_0x18617e=_0x15f129['morphs'][_0x28be21]['targets'],_0x55219e=[],_0x42a704=this['_getMorphV'+'ertexCount'](_0x15f129,_0x28be21,_0x1c9253),_0x4f7f26=-0x46*0x83+-0x1d32+0x4104;_0x4f7f26<_0x18617e['length'];_0x4f7f26++){const _0x318b4b=_0x18617e[_0x4f7f26]['aabb'],_0x1c5173=_0x318b4b['min'],_0x44446e=_0x318b4b['max'],_0x1c14d7=new De(new D((_0x44446e[-0x14*0x5a+0x1*-0xf8b+0x1693*0x1]+_0x1c5173[-0x4*-0x6d9+-0x1*0x16a6+0x1*-0x4be])*(-0x9df+-0xc5*0x10+0x162f+0.5),(_0x44446e[0x143e+-0xcc1+-0x77c]+_0x1c5173[0x1b3a+0x2cd+-0x501*0x6])*(-0x66*-0x12+-0xb73*0x3+0x1b2d+0.5),(_0x44446e[0x100a*0x2+-0x24*0x35+-0x189e]+_0x1c5173[-0x1546*-0x1+0x10b0+0x12fa*-0x2])*(0x1df*0x2+-0x1*0x328+-0x96+0.5)),new D((_0x44446e[-0x1854+-0x5ab*0x3+0x2955]-_0x1c5173[0x629+0x1ef5+-0x1*0x251e])*(-0x222f+0x26e*-0x7+0x3331+0.5),(_0x44446e[0x71b*0x3+0x1*0x72b+-0x1c7b]-_0x1c5173[0x29*-0x9f+-0x1*0x1099+0x2a11])*(-0x2*-0x683+-0x3fd+-0x909+0.5),(_0x44446e[0x2*0x5fb+-0x25a6+0x19b2]-_0x1c5173[0xad2+0x1981+-0x1*0x2451])*(-0xaba+-0xcf0+-0x1a*-0xe9+0.5))),_0x26b024=_0x18617e[_0x4f7f26]['indices'];let _0x481f24=_0x18617e[_0x4f7f26]['deltaPosit'+'ions'],_0x46962b=_0x18617e[_0x4f7f26]['deltaNorma'+'ls'];_0x26b024&&(_0x481f24=_0x34236f(_0x481f24,_0x26b024,_0x42a704),_0x46962b=_0x34236f(_0x46962b,_0x26b024,_0x42a704)),_0x4ffde2=new Md({'deltaPositions':_0x481f24,'deltaNormals':_0x46962b,'name':_0x18617e[_0x4f7f26]['name'],'aabb':_0x1c14d7}),_0x55219e['push'](_0x4ffde2);}const _0x39fba6=new mm(_0x55219e,this['_device']);_0x5a4eeb['push'](_0x39fba6);const _0x43bb9a=new xa(_0x39fba6);_0x2c8a13['push'](_0x43bb9a);}}return{'morphs':_0x5a4eeb,'instances':_0x2c8a13};}['_parseVert'+'exBuffers'](_0x31eb1d){const _0x5ae22b=_0x31eb1d['model'],_0x183e61=[],_0x5b504b={'position':Me,'normal':gs,'tangent':yi,'blendWeight':gi,'blendIndices':us,'color':Wt,'texCoord0':is,'texCoord1':ba,'texCoord2':wl,'texCoord3':El,'texCoord4':bl,'texCoord5':Al,'texCoord6':Cl,'texCoord7':Pl};for(let _0x5dab0f=-0x5*0x655+-0x19db+0x3984;_0x5dab0f<_0x5ae22b['vertices']['length'];_0x5dab0f++){const _0x2480e5=_0x5ae22b['vertices'][_0x5dab0f],_0xb91429=[];for(const _0x3cb902 in _0x2480e5){const _0x489454=_0x2480e5[_0x3cb902];_0xb91429['push']({'semantic':_0x5b504b[_0x3cb902],'components':_0x489454['components'],'type':Tk[_0x489454['type']],'normalize':_0x5b504b[_0x3cb902]===Wt});}const _0x4552cf=new kt(this['_device'],_0xb91429),_0x2bf43d=_0x2480e5['position']['data']['length']/_0x2480e5['position']['components'],_0x13a062=new Is(this['_device'],_0x4552cf,_0x2bf43d),_0x33ae88=new Uo(_0x13a062);for(let _0x215c88=-0x1*-0x16ee+0x5a3+0x67*-0x47;_0x215c88<_0x2bf43d;_0x215c88++){for(const _0x1db942 in _0x2480e5){const _0x31902f=_0x2480e5[_0x1db942];switch(_0x31902f['components']){case 0x14e4+-0x45b*0x2+-0x1*0xc2d:_0x33ae88['element'][_0x5b504b[_0x1db942]]['set'](_0x31902f['data'][_0x215c88]);break;case 0x14c*0x5+-0x21fe+0x1b84:_0x33ae88['element'][_0x5b504b[_0x1db942]]['set'](_0x31902f['data'][_0x215c88*(0x1ffc+-0x532*0x1+-0x2*0xd64)],-0x56*0xc+-0x41*-0x4f+-0x1*0x1006-_0x31902f['data'][_0x215c88*(-0xe7*-0x1d+0x93e+-0x35*0xab)+(0x1a*0x1c+-0x1b*0x162+0x227f*0x1)]);break;case 0xa9f*-0x2+0x20*0x6d+0x3*0x28b:_0x33ae88['element'][_0x5b504b[_0x1db942]]['set'](_0x31902f['data'][_0x215c88*(-0x128e*-0x1+0x169d*0x1+0x6dc*-0x6)],_0x31902f['data'][_0x215c88*(0x2b*0xc3+-0xeac+0x202*-0x9)+(-0x974+0x18fd+-0x47*0x38)],_0x31902f['data'][_0x215c88*(-0x1f*0x125+-0x2537+0x48b5)+(-0x842+-0x1*0x801+0x1045)]);break;case 0x41*0x1f+0x17da+-0x1fb5:_0x33ae88['element'][_0x5b504b[_0x1db942]]['set'](_0x31902f['data'][_0x215c88*(-0xb*-0xf5+0x7*0x2e7+-0x1ed4)],_0x31902f['data'][_0x215c88*(0x76*-0x43+-0x2b*0xf+0x5*0x6af)+(-0x172c+0x6*0x68+-0x1*-0x14bd)],_0x31902f['data'][_0x215c88*(-0x1a5+-0x51b*0x5+-0xe8*-0x1e)+(0x2*-0x655+0x39f*0x3+-0x1cf*-0x1)],_0x31902f['data'][_0x215c88*(-0x5*-0x5ff+-0xfd3+-0xe24)+(-0x7a*0x5+-0xd1a+0xf7f)]);break;}}_0x33ae88['next']();}_0x33ae88['end'](),_0x183e61['push'](_0x13a062);}return _0x183e61;}['_parseInde'+'xBuffers'](_0x3f6353,_0x5a1d27){const _0x4e682e=_0x3f6353['model'];let _0x159fbb=null,_0xb317e9=null,_0x265947,_0x31b393=-0x11*-0x151+0x1af*-0xa+-0x58b;for(_0x265947=-0x1903+-0x150d+0x2e10;_0x265947<_0x4e682e['meshes']['length'];_0x265947++){const _0x11bd44=_0x4e682e['meshes'][_0x265947];_0x11bd44['indices']!==void(0x16d+-0x1562*-0x1+-0x16cf)&&(_0x31b393+=_0x11bd44['indices']['length']);}let _0x4d3ef7=0x16f*-0x1+0x13c1+0x14f*-0xe;for(_0x265947=-0x22b*-0x4+-0x5d1*0x6+0x1a3a;_0x265947<_0x5a1d27['length'];_0x265947++)_0x4d3ef7=Math['max'](_0x4d3ef7,_0x5a1d27[_0x265947]['numVertice'+'s']);return _0x31b393>-0x16a9+-0x2168+0x3811&&(_0x4d3ef7>0x1*0x135ff+0xfb37+-0x13137?(_0x159fbb=new br(this['_device'],wr,_0x31b393),_0xb317e9=new Uint32Array(_0x159fbb['lock']())):(_0x159fbb=new br(this['_device'],Yi,_0x31b393),_0xb317e9=new Uint16Array(_0x159fbb['lock']()))),{'buffer':_0x159fbb,'data':_0xb317e9};}['_parseMesh'+'es'](_0x46a970,_0x508313,_0x298866,_0x35bc8d,_0x199709,_0x22378e){const _0x187dd3=_0x46a970['model'],_0x5d371c=[];let _0x451723=-0x1*-0x3c5+0x1320+-0x16e5*0x1;for(let _0x22c411=0x21f2+-0x331+-0x1ec1;_0x22c411<_0x187dd3['meshes']['length'];_0x22c411++){const _0x12c5f2=_0x187dd3['meshes'][_0x22c411],_0x31bddb=_0x12c5f2['aabb'],_0x1f491f=_0x31bddb['min'],_0x2586fc=_0x31bddb['max'],_0x213a3a=new De(new D((_0x2586fc[0x109a+0x9dd+-0x5*0x54b]+_0x1f491f[0xb*-0x2c+0x2a*-0x4e+0x2*0x758])*(0x269e+-0x2*0x1351+-0x2*-0x2+0.5),(_0x2586fc[0x232a+0x10f*0x3+-0x1*0x2656]+_0x1f491f[-0x6*0x89+-0x17b3+0x1aea])*(-0x25*0xb5+0x23c4+-0x99b+0.5),(_0x2586fc[0x20e+0x1549+-0x1755]+_0x1f491f[0x1932+-0x3*-0x1d8+-0x1eb8])*(0x2*0xc95+0xaf6+-0x44*0x88+0.5)),new D((_0x2586fc[-0x388*0x2+0x1ba9+-0x1*0x1499]-_0x1f491f[-0x686+0x1a18+0x686*-0x3])*(0x1c6*0xa+0x1*-0x1179+-0x43+0.5),(_0x2586fc[0xdae+-0x13df*0x1+0x632]-_0x1f491f[-0x2*0xc41+-0xa4e+0xb9b*0x3])*(-0x8d4+0x2a4+0x630+0.5),(_0x2586fc[0x1d8c+-0x1436+-0x954]-_0x1f491f[-0x7*-0x34+0xa39+0x9*-0x14b])*(-0x3*-0x5cf+0x3d0+-0x153d+0.5))),_0x1b440c=_0x12c5f2['indices']!==void(-0x4a4*0x1+0x3d*-0x69+0x3*0x9e3),_0x435275=new Ge(this['_device']);_0x435275['vertexBuff'+'er']=_0x35bc8d[_0x12c5f2['vertices']],_0x435275['indexBuffe'+'r'][-0x1d06+0x12b*-0xb+0x3*0xdf5]=_0x1b440c?_0x199709:null,_0x435275['primitive'][0x181+-0xe*-0x160+-0x3*0x6eb]['type']=xk[_0x12c5f2['type']],_0x435275['primitive'][0x26d0+0xe5*0x7+0x419*-0xb]['base']=_0x1b440c?_0x12c5f2['base']+_0x451723:_0x12c5f2['base'],_0x435275['primitive'][0x50*0x45+0x3*-0x151+-0x9*0x1f5]['count']=_0x12c5f2['count'],_0x435275['primitive'][0xa07+-0x1*0x1c45+0x123e]['indexed']=_0x1b440c,_0x435275['skin']=_0x12c5f2['skin']!==void(0xb6*-0x33+-0x6f4*0x2+-0x1915*-0x2)?_0x508313[_0x12c5f2['skin']]:null,_0x435275['morph']=_0x12c5f2['morph']!==void(-0xac1+-0x1644+-0x1*-0x2105)?_0x298866[_0x12c5f2['morph']]:null,_0x435275['aabb']=_0x213a3a,_0x1b440c&&(_0x22378e['set'](_0x12c5f2['indices'],_0x451723),_0x451723+=_0x12c5f2['indices']['length']),_0x5d371c['push'](_0x435275);}return _0x199709!==null&&_0x199709['unlock'](),_0x5d371c;}['_parseMesh'+'Instances'](_0x25eca8,_0x2ea721,_0x368958,_0x59c994,_0xe78041,_0x53c07a,_0x3c1265){const _0xed89b8=_0x25eca8['model'],_0x5f110d=[];let _0x2e819a;for(_0x2e819a=0x335+0xf6b+0x95*-0x20;_0x2e819a<_0xed89b8['meshInstan'+'ces']['length'];_0x2e819a++){const _0x3ccb56=_0xed89b8['meshInstan'+'ces'][_0x2e819a],_0x4f85ee=_0x2ea721[_0x3ccb56['node']],_0x4c5d91=_0x368958[_0x3ccb56['mesh']],_0x21e88d=new He(_0x4c5d91,this['_defaultMa'+'terial'],_0x4f85ee);if(_0x4c5d91['skin']){const _0x4a5abd=_0x59c994['indexOf'](_0x4c5d91['skin']);if(_0x4a5abd===-(-0x274*0xb+0x5*-0x554+-0x35a1*-0x1))throw new Error('Mesh\x27s\x20ski'+'n\x20does\x20not'+'\x20appear\x20in'+'\x20skin\x20arra'+'y.');_0x21e88d['skinInstan'+'ce']=_0xe78041[_0x4a5abd];}if(_0x4c5d91['morph']){const _0x3192eb=_0x53c07a['indexOf'](_0x4c5d91['morph']);if(_0x3192eb===-(-0x34*-0xb0+0x3*0x471+-0x3112))throw new Error('Mesh\x27s\x20mor'+'ph\x20does\x20no'+'t\x20appear\x20i'+'n\x20morph\x20ar'+'ray.');_0x21e88d['morphInsta'+'nce']=_0x3c1265[_0x3192eb];}_0x5f110d['push'](_0x21e88d);}return _0x5f110d;}}class Ek extends Qe{constructor(_0x1d6d27){super(_0x1d6d27,'model'),this['_parsers']=[],this['device']=_0x1d6d27['graphicsDe'+'vice'],this['assets']=_0x1d6d27['assets'],this['defaultMat'+'erial']=Qn(this['device']),this['addParser'](new wk(this),(_0x576861,_0x45c369)=>xe['getExtensi'+'on'](_0x576861)==='.json'),this['addParser'](new vk(this),(_0x479a4d,_0x4540eb)=>xe['getExtensi'+'on'](_0x479a4d)==='.glb');}['load'](_0x1e40b7,_0x37f358,_0x5030a8){typeof _0x1e40b7=='string'&&(_0x1e40b7={'load':_0x1e40b7,'original':_0x1e40b7});const _0x4240e9={'retry':this['maxRetries']>0x9b3+-0xc9a+0x2e7,'maxRetries':this['maxRetries']};(_0x1e40b7['load']['startsWith']('blob:')||_0x1e40b7['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x1e40b7['original'])['toLowerCas'+'e']()==='.glb'?_0x4240e9['responseTy'+'pe']=Ls['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x4240e9['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x1e40b7['load'],_0x4240e9,(_0x194b4a,_0xdd2695)=>{if(_0x37f358){if(_0x194b4a)_0x37f358('Error\x20load'+'ing\x20model:'+'\x20'+_0x1e40b7['original']+'\x20['+_0x194b4a+']');else{for(let _0x17a567=0x1*-0x200f+0x86b*0x1+0x164*0x11;_0x17a567<this['_parsers']['length'];_0x17a567++){const _0x840e=this['_parsers'][_0x17a567];if(_0x840e['decider'](_0x1e40b7['original'],_0xdd2695)){_0x840e['parser']['parse'](_0xdd2695,(_0x496225,_0x5d6041)=>{_0x496225?_0x37f358(_0x496225):_0x37f358(null,_0x5d6041);},_0x5030a8);return;}}_0x37f358('No\x20parsers'+'\x20found');}}});}['open'](_0x17f056,_0x53b70d){return _0x53b70d;}['patch'](_0x1e6df3,_0x32f897){if(!_0x1e6df3['resource'])return;const _0x191a97=_0x1e6df3['data'],_0x26a614=this;_0x1e6df3['resource']['meshInstan'+'ces']['forEach']((_0x27fb19,_0x23aea4)=>{if(_0x191a97['mapping']){const _0x162778=function(_0x6270ae){_0x6270ae['resource']?_0x27fb19['material']=_0x6270ae['resource']:(_0x6270ae['once']('load',_0x162778),_0x32f897['load'](_0x6270ae)),_0x6270ae['once']('remove',_0x466209=>{_0x27fb19['material']===_0x466209['resource']&&(_0x27fb19['material']=_0x26a614['defaultMat'+'erial']);});};if(!_0x191a97['mapping'][_0x23aea4]){_0x27fb19['material']=_0x26a614['defaultMat'+'erial'];return;}const _0x55cc8e=_0x191a97['mapping'][_0x23aea4]['material'],_0x2b7ddf=_0x191a97['mapping'][_0x23aea4]['path'];let _0x2fcede;if(_0x55cc8e!==void(0x496*-0x3+0xd42+0x80))_0x55cc8e?(_0x2fcede=_0x32f897['get'](_0x55cc8e),_0x2fcede?_0x162778(_0x2fcede):_0x32f897['once']('add:'+_0x55cc8e,_0x162778)):_0x27fb19['material']=_0x26a614['defaultMat'+'erial'];else{if(_0x2b7ddf){const _0x2a6d47=_0x1e6df3['getAbsolut'+'eUrl'](_0x191a97['mapping'][_0x23aea4]['path']);_0x2fcede=_0x32f897['getByUrl'](_0x2a6d47),_0x2fcede?_0x162778(_0x2fcede):_0x32f897['once']('add:url:'+_0x2a6d47,_0x162778);}}}});}['addParser'](_0x3e972d,_0x2cea4f){this['_parsers']['push']({'parser':_0x3e972d,'decider':_0x2cea4f});}}class bk extends Qe{constructor(_0x57dbec){super(_0x57dbec,'scene');}['load'](_0x5cd97c,_0x12e8c6){E0['load'](_0x5cd97c,this['maxRetries'],_0x12e8c6);}['open'](_0x1c4925,_0x44d2bf){this['_app']['systems']['script']['preloading']=!(0xab3+0x702+-0x11b5);const _0x55d065=new bm(this['_app'],!(0x3f*0x79+-0xa*0x4f+-0x1ab0))['parse'](_0x44d2bf),_0x2b73c3=this['_app']['scene'];return _0x2b73c3['root']=_0x55d065,this['_app']['applyScene'+'Settings'](_0x44d2bf['settings']),this['_app']['systems']['script']['preloading']=!(0xa73*0x1+-0x7*-0x303+-0x1f87),_0x2b73c3;}}const qh=class qh{static['push'](_0x127dd8){qh['_types']['push'](_0x127dd8);}};h(qh,'_types',[]);let aa=qh;const Ak=new Set(['system','entity','create','destroy','swap','move','data','scripts','_scripts','_scriptsIn'+'dex','_scriptsDa'+'ta','enabled','_oldState','onEnable','onDisable','onPostStat'+'eChange','_onSetEnab'+'led','_checkStat'+'e','_onBeforeR'+'emove','_onInitial'+'izeAttribu'+'tes','_onInitial'+'ize','_onPostIni'+'tialize','_onUpdate','_onPostUpd'+'ate','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']),Ck={};Sl['reservedNa'+'mes']['forEach']((_0x58f345,_0x2fdd71,_0xa7cb84)=>{Ck[_0x58f345]=-0x132d+-0x200a+-0x4a8*-0xb;});function Pk(_0x51c7c0,_0x5d9440,_0x41184f){if(typeof _0x51c7c0!='function')throw new Error('script\x20cla'+'ss:\x20\x27'+_0x51c7c0+('\x27\x20must\x20be\x20'+'a\x20construc'+'tor\x20functi'+'on\x20(i.e.\x20c'+'lass).'));if(!(_0x51c7c0['prototype']instanceof ts))throw new Error('script\x20cla'+'ss:\x20\x27'+Wo['__getScrip'+'tName'](_0x51c7c0)+('\x27\x20does\x20not'+'\x20extend\x20pc'+'.Script.'));if(_0x5d9440=_0x5d9440||_0x51c7c0['__name']||Wo['__getScrip'+'tName'](_0x51c7c0),Ak['has'](_0x5d9440))throw new Error('script\x20nam'+'e:\x20\x27'+_0x5d9440+('\x27\x20is\x20reser'+'ved,\x20pleas'+'e\x20change\x20s'+'cript\x20name'));_0x51c7c0['__name']=_0x5d9440,Ks['getApplica'+'tion']()['scripts']['add'](_0x51c7c0),aa['push'](_0x51c7c0);}const Mk=_0x23f1a4=>_0x23f1a4[-0x1e7a+-0x17*-0x103+0x735]['toLowerCas'+'e']()+_0x23f1a4['substring'](0x24eb+-0x1ad2+0x13*-0x88);class Dk extends Qe{constructor(_0x33a7e5){super(_0x33a7e5,'script'),this['_scripts']={},this['_cache']={};}['clearCache'](){for(const _0x128d1f in this['_cache']){const _0x276355=this['_cache'][_0x128d1f],_0x102339=_0x276355['parentNode'];_0x102339&&_0x102339['removeChil'+'d'](_0x276355);}this['_cache']={};}['load'](_0x5619ca,_0x2dbebe){typeof _0x5619ca=='string'&&(_0x5619ca={'load':_0x5619ca,'original':_0x5619ca});const _0x3b8dfc=this;this['_app'];const _0x4c85e4=(_0x5619ca['load'],(_0xbadab,_0x24f7e3,_0x4765c4)=>{if(_0xbadab)_0x2dbebe(_0xbadab);else{const _0x580d0b={};for(let _0x1bd595=-0x4*0x194+0xe75*0x1+-0x825;_0x1bd595<aa['_types']['length'];_0x1bd595++)_0x580d0b[aa['_types'][_0x1bd595]['name']]=aa['_types'][_0x1bd595];aa['_types']['length']=0x103c*0x2+0x5f1+-0x1*0x2669,_0x2dbebe(null,_0x580d0b,_0x4765c4);const _0x2fc527=_0x24f7e3['split']('&hash=')[0x4cd*0x1+0x10b1*-0x1+0xbe4];delete _0x3b8dfc['_loader']['_cache'][Cn['makeKey'](_0x2fc527,'script')];}}),[_0x50e32b]=_0x5619ca['load']['split']('?');_0x50e32b['endsWith']('.mjs')?this['_loadModul'+'e'](_0x50e32b,_0x4c85e4):this['_loadScrip'+'t'](_0x5619ca['load'],_0x4c85e4);}['open'](_0x3a5aad,_0x5b03a8){return _0x5b03a8;}['patch'](_0x494c00,_0x52aade){}['_loadScrip'+'t'](_0x3889a6,_0x517f4e){const _0x262125=document['head'],_0x33f2b3=document['createElem'+'ent']('script');this['_cache'][_0x3889a6]=_0x33f2b3,_0x33f2b3['async']=!(0x1*-0x19cf+0x80c+-0x1*-0x11c4),_0x33f2b3['addEventLi'+'stener']('error',_0x403f1f=>{_0x517f4e('Script:\x20'+_0x403f1f['target']['src']+('\x20failed\x20to'+'\x20load'));},!(-0xaa+0x7f*-0xd+-0x38f*-0x2));let _0x15ac96=!(-0x1102+-0x175*0x14+0x2e27);_0x33f2b3['onload']=_0x33f2b3['onreadysta'+'techange']=function(){!_0x15ac96&&(!this['readyState']||this['readyState']==='loaded'||this['readyState']==='complete')&&(_0x15ac96=!(0x1d20+-0x2137+0x417*0x1),_0x517f4e(null,_0x3889a6,_0x33f2b3));},_0x33f2b3['src']=_0x3889a6,_0x262125['appendChil'+'d'](_0x33f2b3);}['_loadModul'+'e'](_0x268360,_0x1ac7d2){const _0x5e56f9=Ae['browser']&&window['location']['origin']!=='null'?window['location']['origin']+window['location']['pathname']:import.meta['url'],_0x207626=new URL(_0x268360,_0x5e56f9);import(_0x207626['toString']())['then'](_0x5757e2=>{var _0x1ebc98,_0x5e752e;const _0xb1ea73=_0x207626['pathname']['split']('/')['pop'](),_0x1b404b=(_0x5e752e=(_0x1ebc98=this['_app']['assets']['find'](_0xb1ea73,'script'))==null?void(0x1946+-0x2196+-0x2*-0x428):_0x1ebc98['data'])==null?void(0x160d+-0x1646+-0x39*-0x1):_0x5e752e['scripts'];for(const _0x53e803 in _0x5757e2){const _0x34947a=_0x5757e2[_0x53e803];if(_0x34947a['prototype']instanceof ts){const _0x582674=Mk(_0x34947a['name']);_0x34947a['scriptName']||w['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x34947a['name']+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x34947a['name']+('.scriptNam'+'e\x20=\x20\x22')+_0x582674+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.'));const _0x1607a6=_0x34947a['scriptName']??_0x582674;Pk(_0x34947a,_0x1607a6),_0x1b404b&&this['_app']['scripts']['addSchema'](_0x1607a6,_0x1b404b[_0x1607a6]);}}_0x1ac7d2(null,_0x268360,null);})['catch'](_0x3a75ca=>{_0x1ac7d2(_0x3a75ca);});}}class Ik extends Qe{constructor(_0x32acdf){super(_0x32acdf,'shader'),h(this,'decoder',null);}['load'](_0x2cdb18,_0x298c87){typeof _0x2cdb18=='string'&&(_0x2cdb18={'load':_0x2cdb18,'original':_0x2cdb18}),ot['get'](_0x2cdb18['load'],{'retry':this['maxRetries']>0x43*0x47+-0xbf4+-0x1*0x6a1,'maxRetries':this['maxRetries']},(_0x227d15,_0x25c457)=>{_0x227d15?_0x298c87('Error\x20load'+'ing\x20shader'+'\x20resource:'+'\x20'+_0x2cdb18['original']+'\x20['+_0x227d15+']'):_0x298c87(null,_0x25c457);});}['openBinary'](_0x4de31c){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x4de31c);}}function Pf(_0x1ebf79){const _0x1dd752=this;_0x1dd752['resource']&&(_0x1dd752['resource']['atlas']=_0x1ebf79['resource']);}function Mf(_0x1ac36a){this['registry']['load'](_0x1ac36a);}class Lk extends Qe{constructor(_0x1b061a){super(_0x1b061a,'sprite'),this['_assets']=_0x1b061a['assets'],this['_device']=_0x1b061a['graphicsDe'+'vice'];}['load'](_0x37f49a,_0x3d1c5c){typeof _0x37f49a=='string'&&(_0x37f49a={'load':_0x37f49a,'original':_0x37f49a}),xe['getExtensi'+'on'](_0x37f49a['original'])==='.json'&&ot['get'](_0x37f49a['load'],{'retry':this['maxRetries']>-0x1bd8+-0x6*0x34a+0x2f94,'maxRetries':this['maxRetries']},(_0x2f8a0a,_0x31344b)=>{_0x2f8a0a?_0x3d1c5c(_0x2f8a0a):_0x3d1c5c(null,_0x31344b);});}['open'](_0xc92371,_0x2180e1){const _0x31dc98=new BA(this['_device']);return _0xc92371&&(_0x31dc98['__data']=_0x2180e1),_0x31dc98;}['patch'](_0x37e67e,_0x5c12be){const _0x309d45=_0x37e67e['resource'];if(_0x309d45['__data']&&(_0x37e67e['data']['pixelsPerU'+'nit']=_0x309d45['__data']['pixelsPerU'+'nit'],_0x37e67e['data']['renderMode']=_0x309d45['__data']['renderMode'],_0x37e67e['data']['frameKeys']=_0x309d45['__data']['frameKeys'],_0x309d45['__data']['textureAtl'+'asAsset'])){const _0x19297d=_0x5c12be['getByUrl'](_0x309d45['__data']['textureAtl'+'asAsset']);_0x19297d?_0x37e67e['data']['textureAtl'+'asAsset']=_0x19297d['id']:console['warn']('Could\x20not\x20'+'find\x20textu'+'reatlas\x20wi'+'th\x20url:\x20'+_0x309d45['__data']['textureAtl'+'asAsset']);}_0x309d45['startUpdat'+'e'](),_0x309d45['renderMode']=_0x37e67e['data']['renderMode'],_0x309d45['pixelsPerU'+'nit']=_0x37e67e['data']['pixelsPerU'+'nit'],_0x309d45['frameKeys']=_0x37e67e['data']['frameKeys'],this['_updateAtl'+'as'](_0x37e67e),_0x309d45['endUpdate'](),_0x37e67e['off']('change',this['_onAssetCh'+'ange'],this),_0x37e67e['on']('change',this['_onAssetCh'+'ange'],this);}['_updateAtl'+'as'](_0x1fa05c){const _0x2a79a0=_0x1fa05c['resource'];if(!_0x1fa05c['data']['textureAtl'+'asAsset']){_0x2a79a0['atlas']=null;return;}this['_assets']['off']('load:'+_0x1fa05c['data']['textureAtl'+'asAsset'],Pf,_0x1fa05c),this['_assets']['on']('load:'+_0x1fa05c['data']['textureAtl'+'asAsset'],Pf,_0x1fa05c);const _0x3f8452=this['_assets']['get'](_0x1fa05c['data']['textureAtl'+'asAsset']);_0x3f8452&&_0x3f8452['resource']?_0x2a79a0['atlas']=_0x3f8452['resource']:_0x3f8452?this['_assets']['load'](_0x3f8452):(this['_assets']['off']('add:'+_0x1fa05c['data']['textureAtl'+'asAsset'],Mf,_0x1fa05c),this['_assets']['on']('add:'+_0x1fa05c['data']['textureAtl'+'asAsset'],Mf,_0x1fa05c));}['_onAssetCh'+'ange'](_0x103dab,_0x246a91,_0x142f5c,_0x1141c2){_0x246a91==='data'&&_0x142f5c&&_0x142f5c['textureAtl'+'asAsset']&&_0x1141c2&&_0x142f5c['textureAtl'+'asAsset']!==_0x1141c2['textureAtl'+'asAsset']&&(this['_assets']['off']('load:'+_0x1141c2['textureAtl'+'asAsset'],Pf,_0x103dab),this['_assets']['off']('add:'+_0x1141c2['textureAtl'+'asAsset'],Mf,_0x103dab));}}class vS{constructor(_0x3516bf,_0x8f6905){h(this,'_app'),h(this,'_data'),h(this,'_templateR'+'oot',null),(this['_app']=_0x3516bf,this['_data']=_0x8f6905);}['instantiat'+'e'](){return this['_templateR'+'oot']||this['_parseTemp'+'late'](),this['_templateR'+'oot']['clone']();}['_parseTemp'+'late'](){const _0x46433d=new bm(this['_app'],!(-0x2082+-0xc77+0x2cf9));this['_templateR'+'oot']=_0x46433d['parse'](this['_data']);}}class Rk extends Qe{constructor(_0x29826){super(_0x29826,'template'),h(this,'decoder',null);}['load'](_0x3a6221,_0x1008cf){typeof _0x3a6221=='string'&&(_0x3a6221={'load':_0x3a6221,'original':_0x3a6221});const _0x3fd4c0={'retry':this['maxRetries']>-0x7e*-0x17+0x1*0x1dc5+-0x2917,'maxRetries':this['maxRetries']};ot['get'](_0x3a6221['load'],_0x3fd4c0,(_0x21b3cd,_0x518f83)=>{_0x21b3cd?_0x1008cf('Error\x20requ'+'esting\x20tem'+'plate:\x20'+_0x3a6221['original']):_0x1008cf(_0x21b3cd,_0x518f83);});}['open'](_0x359fda,_0x23ce54){return new vS(this['_app'],_0x23ce54);}['openBinary'](_0x25ac3d){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),new vS(this['_app'],JSON['parse'](this['decoder']['decode'](_0x25ac3d)));}}class Ok extends Qe{constructor(_0x2928a8){super(_0x2928a8,'text'),h(this,'decoder',null);}['load'](_0x558250,_0x105700){typeof _0x558250=='string'&&(_0x558250={'load':_0x558250,'original':_0x558250}),ot['get'](_0x558250['load'],{'retry':this['maxRetries']>-0x2664+-0x1645+0x3ca9*0x1,'maxRetries':this['maxRetries']},(_0x116e11,_0xb577b)=>{_0x116e11?_0x105700('Error\x20load'+'ing\x20text\x20r'+'esource:\x20'+_0x558250['original']+'\x20['+_0x116e11+']'):_0x105700(null,_0xb577b);});}['openBinary'](_0xa234f5){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0xa234f5);}}const Ic={'repeat':yt,'clamp':ue,'mirror':ip},Lc={'nearest':Te,'linear':vt,'nearest_mip_nearest':Kh,'linear_mip_nearest':Qh,'nearest_mip_linear':Zh,'linear_mip_linear':ma},Fk=/^data\.frames\.(\d+)$/;class Nk extends Qe{constructor(_0x54e28d){super(_0x54e28d,'textureatl'+'as'),this['_loader']=_0x54e28d['loader'];}['load'](_0x2ad213,_0x5a6dea){typeof _0x2ad213=='string'&&(_0x2ad213={'load':_0x2ad213,'original':_0x2ad213});const _0x561c0b=this,_0x1c6402=this['_loader']['getHandler']('texture');xe['getExtensi'+'on'](_0x2ad213['original'])==='.json'?ot['get'](_0x2ad213['load'],{'retry':this['maxRetries']>0x26b5+-0x97f*-0x4+-0x4cb1*0x1,'maxRetries':this['maxRetries']},(_0x46d996,_0x4806bb)=>{if(_0x46d996)_0x5a6dea(_0x46d996);else{const _0x1546c0=_0x2ad213['original']['replace']('.json','.png');_0x561c0b['_loader']['load'](_0x1546c0,'texture',(_0x49c12e,_0x494038)=>{_0x49c12e?_0x5a6dea(_0x49c12e):_0x5a6dea(null,{'data':_0x4806bb,'texture':_0x494038});});}}):_0x1c6402['load'](_0x2ad213,_0x5a6dea);}['open'](_0x2d54c4,_0xa3d9a2,_0x3ac6a0){const _0x328c71=new zA();if(_0xa3d9a2['texture']&&_0xa3d9a2['data'])_0x328c71['texture']=_0xa3d9a2['texture'],_0x328c71['__data']=_0xa3d9a2['data'];else{const _0x38c050=this['_loader']['getHandler']('texture')['open'](_0x2d54c4,_0xa3d9a2,_0x3ac6a0);if(!_0x38c050)return null;_0x328c71['texture']=_0x38c050;}return _0x328c71;}['patch'](_0x5a072b,_0xd84460){if(!_0x5a072b['resource'])return;_0x5a072b['resource']['__data']&&(_0x5a072b['resource']['__data']['minfilter']!==void(0x1*0xc9f+0x23b0+-0x304f)&&(_0x5a072b['data']['minfilter']=_0x5a072b['resource']['__data']['minfilter']),_0x5a072b['resource']['__data']['magfilter']!==void(-0x1134+-0xc0c+0x1d40)&&(_0x5a072b['data']['magfilter']=_0x5a072b['resource']['__data']['magfilter']),_0x5a072b['resource']['__data']['addressu']!==void(-0xef5+-0x47*0x4+-0x1011*-0x1)&&(_0x5a072b['data']['addressu']=_0x5a072b['resource']['__data']['addressu']),_0x5a072b['resource']['__data']['addressv']!==void(-0xd6*0x2a+-0x577+0x263*0x11)&&(_0x5a072b['data']['addressv']=_0x5a072b['resource']['__data']['addressv']),_0x5a072b['resource']['__data']['mipmaps']!==void(-0x81*-0x20+0x1*-0x26bd+-0x33b*-0x7)&&(_0x5a072b['data']['mipmaps']=_0x5a072b['resource']['__data']['mipmaps']),_0x5a072b['resource']['__data']['anisotropy']!==void(-0x1c16+0x3*0x2ce+0x4*0x4eb)&&(_0x5a072b['data']['anisotropy']=_0x5a072b['resource']['__data']['anisotropy']),_0x5a072b['resource']['__data']['rgbm']!==void(-0x4af*-0x1+0xe8e+0xc5*-0x19)&&(_0x5a072b['data']['rgbm']=!!_0x5a072b['resource']['__data']['rgbm']),_0x5a072b['data']['frames']=_0x5a072b['resource']['__data']['frames'],delete _0x5a072b['resource']['__data']);const _0x4d6f82=_0x5a072b['resource']['texture'];if(_0x4d6f82&&(_0x4d6f82['name']=_0x5a072b['name'],_0x5a072b['data']['hasOwnProp'+'erty']('minfilter')&&_0x4d6f82['minFilter']!==Lc[_0x5a072b['data']['minfilter']]&&(_0x4d6f82['minFilter']=Lc[_0x5a072b['data']['minfilter']]),_0x5a072b['data']['hasOwnProp'+'erty']('magfilter')&&_0x4d6f82['magFilter']!==Lc[_0x5a072b['data']['magfilter']]&&(_0x4d6f82['magFilter']=Lc[_0x5a072b['data']['magfilter']]),_0x5a072b['data']['hasOwnProp'+'erty']('addressu')&&_0x4d6f82['addressU']!==Ic[_0x5a072b['data']['addressu']]&&(_0x4d6f82['addressU']=Ic[_0x5a072b['data']['addressu']]),_0x5a072b['data']['hasOwnProp'+'erty']('addressv')&&_0x4d6f82['addressV']!==Ic[_0x5a072b['data']['addressv']]&&(_0x4d6f82['addressV']=Ic[_0x5a072b['data']['addressv']]),_0x5a072b['data']['hasOwnProp'+'erty']('mipmaps')&&_0x4d6f82['mipmaps']!==_0x5a072b['data']['mipmaps']&&(_0x4d6f82['mipmaps']=_0x5a072b['data']['mipmaps']),_0x5a072b['data']['hasOwnProp'+'erty']('anisotropy')&&_0x4d6f82['anisotropy']!==_0x5a072b['data']['anisotropy']&&(_0x4d6f82['anisotropy']=_0x5a072b['data']['anisotropy']),_0x5a072b['data']['hasOwnProp'+'erty']('rgbm'))){const _0x18f116=_0x5a072b['data']['rgbm']?Zi:Ds;_0x4d6f82['type']!==_0x18f116&&(_0x4d6f82['type']=_0x18f116);}_0x5a072b['resource']['texture']=_0x4d6f82;const _0x2c58c3={};for(const _0x525807 in _0x5a072b['data']['frames']){const _0x751cfb=_0x5a072b['data']['frames'][_0x525807];_0x2c58c3[_0x525807]={'rect':new re(_0x751cfb['rect']),'pivot':new J(_0x751cfb['pivot']),'border':new re(_0x751cfb['border'])};}_0x5a072b['resource']['frames']=_0x2c58c3,_0x5a072b['off']('change',this['_onAssetCh'+'ange'],this),_0x5a072b['on']('change',this['_onAssetCh'+'ange'],this);}['_onAssetCh'+'ange'](_0x387ef7,_0x99b70d,_0x47446d){let _0x2de67b;if(_0x99b70d==='data'||_0x99b70d==='data.frame'+'s'){const _0x4a21e7={};for(const _0xff3829 in _0x47446d['frames'])_0x2de67b=_0x47446d['frames'][_0xff3829],_0x4a21e7[_0xff3829]={'rect':new re(_0x2de67b['rect']),'pivot':new J(_0x2de67b['pivot']),'border':new re(_0x2de67b['border'])};_0x387ef7['resource']['frames']=_0x4a21e7;}else{const _0x482d2a=_0x99b70d['match'](Fk);if(_0x482d2a){const _0x29ee18=_0x482d2a[0x8*0x1a0+0x1da3+-0x1*0x2aa2];_0x47446d?(_0x387ef7['resource']['frames'][_0x29ee18]?(_0x2de67b=_0x387ef7['resource']['frames'][_0x29ee18],_0x2de67b['rect']['set'](_0x47446d['rect'][-0x1a5a+-0x22*0xb2+-0x1da*-0x1b],_0x47446d['rect'][0x91a+0x1c9f+-0x25b8],_0x47446d['rect'][0x1fd8+-0x1d7d+-0x259],_0x47446d['rect'][0x3f*0x3d+0x20b4+0x2fb4*-0x1]),_0x2de67b['pivot']['set'](_0x47446d['pivot'][0x1d6*0x5+-0xe6b*-0x1+-0x1799],_0x47446d['pivot'][0x27e+0x1cdb*-0x1+0x6*0x465]),_0x2de67b['border']['set'](_0x47446d['border'][0xc93+-0xe65+0x1d2],_0x47446d['border'][0x19f4+-0x45a+0x733*-0x3],_0x47446d['border'][0x1d*-0xad+0xd49+-0x1*-0x652],_0x47446d['border'][0x2ae*0xd+-0x9cc+-0x95*0x2b])):_0x387ef7['resource']['frames'][_0x29ee18]={'rect':new re(_0x47446d['rect']),'pivot':new J(_0x47446d['pivot']),'border':new re(_0x47446d['border'])},_0x387ef7['resource']['fire']('set:frame',_0x29ee18,_0x387ef7['resource']['frames'][_0x29ee18])):_0x387ef7['resource']['frames'][_0x29ee18]&&(delete _0x387ef7['resource']['frames'][_0x29ee18],_0x387ef7['resource']['fire']('remove:fra'+'me',_0x29ee18));}}}}function kk(){const _0x12a87c={'cTFETC1':0x0,'cTFETC2':0x1,'cTFBC1':0x2,'cTFBC3':0x3,'cTFPVRTC1_4_RGB':0x8,'cTFPVRTC1_4_RGBA':0x9,'cTFASTC_4x4':0xa,'cTFATC_RGB':0xb,'cTFATC_RGBA_INTERPOLATED_ALPHA':0xc,'cTFRGBA32':0xd,'cTFRGB565':0xe,'cTFRGBA4444':0x10},_0x4d03bb={'astc':_0x12a87c['cTFASTC_4x'+'4'],'dxt':_0x12a87c['cTFBC1'],'etc1':_0x12a87c['cTFETC1'],'etc2':_0x12a87c['cTFETC1'],'pvr':_0x12a87c['cTFPVRTC1_'+'4_RGB'],'atc':_0x12a87c['cTFATC_RGB'],'none':_0x12a87c['cTFRGB565']},_0x44900e={'astc':_0x12a87c['cTFASTC_4x'+'4'],'dxt':_0x12a87c['cTFBC3'],'etc1':_0x12a87c['cTFRGBA444'+'4'],'etc2':_0x12a87c['cTFETC2'],'pvr':_0x12a87c['cTFPVRTC1_'+'4_RGBA'],'atc':_0x12a87c['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA'],'none':_0x12a87c['cTFRGBA444'+'4']},_0x40bec1={'ETC1':0x15,'ETC2_RGB':0x16,'ETC2_RGBA':0x17,'DXT1':0x8,'DXT5':0xa,'PVRTC_4BPP_RGB_1':0x1a,'PVRTC_4BPP_RGBA_1':0x1b,'ASTC_4x4':0x1c,'ATC_RGB':0x1d,'ATC_RGBA':0x1e,'R8_G8_B8_A8':0x7,'R5_G6_B5':0x3,'R4_G4_B4_A4':0x5},_0x36f723=(_0xf73550,_0x3f89df)=>{switch(_0xf73550){case _0x12a87c['cTFETC1']:return _0x3f89df['formats']['etc2']?_0x40bec1['ETC2_RGB']:_0x40bec1['ETC1'];case _0x12a87c['cTFETC2']:return _0x40bec1['ETC2_RGBA'];case _0x12a87c['cTFBC1']:return _0x40bec1['DXT1'];case _0x12a87c['cTFBC3']:return _0x40bec1['DXT5'];case _0x12a87c['cTFPVRTC1_'+'4_RGB']:return _0x40bec1['PVRTC_4BPP'+'_RGB_1'];case _0x12a87c['cTFPVRTC1_'+'4_RGBA']:return _0x40bec1['PVRTC_4BPP'+'_RGBA_1'];case _0x12a87c['cTFASTC_4x'+'4']:return _0x40bec1['ASTC_4x4'];case _0x12a87c['cTFATC_RGB']:return _0x40bec1['ATC_RGB'];case _0x12a87c['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return _0x40bec1['ATC_RGBA'];case _0x12a87c['cTFRGBA32']:return _0x40bec1['R8_G8_B8_A'+'8'];case _0x12a87c['cTFRGB565']:return _0x40bec1['R5_G6_B5'];case _0x12a87c['cTFRGBA444'+'4']:return _0x40bec1['R4_G4_B4_A'+'4'];}},_0x43e546=_0x2be1dd=>{const _0x4e9d9b=function(_0x581203,_0x182562){const _0x334773=_0x581203*(0x176*-0x2+-0x82*0x34+0x1d54+0.00784313725490196)-(0x1a*0x69+0x1f12*0x1+0xde9*-0x3),_0x35df57=_0x182562*((0x74f*0x1+0x22d7+-0x3e*0xae)/(-0xfd0+0x117+-0x4*-0x3ee))-(0x1ca*-0x1+0x1c8e+-0x1ac3),_0x551e0b=Math['sqrt'](-0x1992+-0x1*0x135d+0x2cf0-Math['min'](0x4*0x3cb+-0x3*0x371+-0x28*0x1f,_0x334773*_0x334773+_0x35df57*_0x35df57));return Math['max'](0x1cf7*-0x1+0x11b1+0xb46,Math['min'](-0xa21+-0x1*0x10f3+-0x1c13*-0x1,Math['floor']((_0x551e0b+(-0x1*0x1e0b+0x22b7+-0x1*0x4ab))*(-0x17*0x175+0x1*-0x18c1+0x136c*0x3+0.5)*(-0x7a9*0x3+-0x167*-0x10+0xc5*0x2))));};for(let _0x811a8d=-0xfb4+-0x48b*0x7+0x1*0x2f81;_0x811a8d<_0x2be1dd['length'];_0x811a8d+=0xfe8*-0x2+-0xe4d+0x2e21){const _0x2eff68=_0x2be1dd[_0x811a8d+(0x4e+0x26*0xfd+-0x25d9)],_0x58b6a9=_0x2be1dd[_0x811a8d+(-0x2600+-0x409*0x4+-0x53*-0xa7)];_0x2be1dd[_0x811a8d+(0xe*-0x1a8+0x1cb9+0x1*-0x589)]=_0x2eff68,_0x2be1dd[_0x811a8d+(0x110a*-0x2+-0x174c+0x3962)]=_0x4e9d9b(_0x2eff68,_0x58b6a9),_0x2be1dd[_0x811a8d+(0x690*0x4+0x23a7*-0x1+-0x1e2*-0x5)]=-0x411*-0x9+0x22a7+-0x4641;}return _0x2be1dd;},_0x3f66e5=_0x9484a1=>{const _0x16757a=new Uint16Array(_0x9484a1['length']/(0xf5*0x5+0x1aa8*0x1+0x5*-0x649));for(let _0x245989=-0x7db+0x1104+0x43*-0x23;_0x245989<_0x9484a1['length'];_0x245989+=0x2327*0x1+-0x1dcb*-0x1+-0x40ee*0x1){const _0x364043=_0x9484a1[_0x245989+(0x3de+0x1fe4+0x1*-0x23c2)],_0x27e3aa=_0x9484a1[_0x245989+(-0x891*-0x3+0x1a76+0x685*-0x8)],_0x49c920=_0x9484a1[_0x245989+(-0x1*0x25bd+-0x1c2f+-0x61*-0xae)];_0x16757a[_0x245989/(-0xf*0x1f2+-0x6d*-0x1+0x1cc5)]=(_0x364043&0x113c+0x1a47+-0x2a8b*0x1)<<0x24e7+0x6c5+-0x2ba4|(_0x27e3aa&-0x3e*-0x7f+-0x2701+-0x1*-0x93b)<<-0x1*0x1a3f+-0x11cb+0x2c0d*0x1|_0x49c920>>-0x20b7+-0x12a4+0x5*0xa46;}return _0x16757a;},_0x213612=(_0x46facf,_0x26b3d9)=>(_0x46facf&_0x46facf-(0x36d*0x1+-0x40f*-0x2+0x7*-0x1a6))===-0x130d+-0x9a2+0x1caf&&(_0x26b3d9&_0x26b3d9-(-0x10*0x26b+-0x8a9+0x2f5a))===0xd7c*-0x1+0x18fe+-0x1eb*0x6,_0x4cebd2=()=>typeof performance<'u'?performance['now']():0x3*0x89c+0x19d7+0x33ab*-0x1;let _0x286543,_0x3e45f2,_0x4b0121;const _0x21d314=(_0x2a0b18,_0x4ae11a,_0x199e6d)=>{if(_0x199e6d){if(_0x2a0b18['formats']['astc'])return'astc';}else{if(_0x4ae11a){if(_0x2a0b18['formats']['etc2'])return'etc2';}else{if(_0x2a0b18['formats']['etc2'])return'etc2';if(_0x2a0b18['formats']['etc1'])return'etc1';}}return(_0x7d24b3=>{for(let _0x2aa54b=-0x7d1+0x1f4+-0x13*-0x4f;_0x2aa54b<_0x7d24b3['length'];++_0x2aa54b){const _0x3acfb6=_0x7d24b3[_0x2aa54b];if(_0x2a0b18['formats'][_0x3acfb6])return _0x3acfb6;}return'none';})(_0x4ae11a?_0x4b0121:_0x3e45f2);},_0x802028=(_0x2307e0,_0xd0c7b3,_0x376197)=>{switch(_0x376197){case _0x12a87c['cTFETC1']:case _0x12a87c['cTFETC2']:return!(-0xa14+-0x394*-0x7+-0xef8);case _0x12a87c['cTFBC1']:case _0x12a87c['cTFBC3']:return(_0x2307e0&0x351*-0x1+-0x2006+0x235a)===-0x2356+-0x218+0x6*0x63d&&(_0xd0c7b3&-0x1*-0x4e3+-0x1*-0x6d+-0x54d)===0x1c7f+-0xf19+-0xd66;case _0x12a87c['cTFPVRTC1_'+'4_RGB']:case _0x12a87c['cTFPVRTC1_'+'4_RGBA']:return _0x213612(_0x2307e0,_0xd0c7b3);case _0x12a87c['cTFASTC_4x'+'4']:return!(0x15c1*0x1+-0x134a+0x1*-0x277);case _0x12a87c['cTFATC_RGB']:case _0x12a87c['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return!(0x2036+0x1*0x11d8+-0x320e);}return!(-0x1363+0x2651+-0x1*0x12ed);},_0x3cbfab=(_0x209c98,_0x5e6cfd,_0x15da44)=>{if(!_0x286543['KTX2File'])throw new Error('Basis\x20tran'+'scoder\x20mod'+'ule\x20does\x20n'+'ot\x20include'+'\x20support\x20f'+'or\x20KTX2.');const _0x57ac28=_0x4cebd2(),_0x54b889=new _0x286543['KTX2File'](new Uint8Array(_0x5e6cfd)),_0x38180=_0x54b889['getWidth'](),_0x576109=_0x54b889['getHeight'](),_0x1da2fb=_0x54b889['getLevels'](),_0x19d907=!!_0x54b889['getHasAlph'+'a'](),_0x4fc210=_0x54b889['isUASTC']&&_0x54b889['isUASTC']();if(!_0x38180||!_0x576109||!_0x1da2fb)throw _0x54b889['close'](),_0x54b889['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x209c98+'\x20width='+_0x38180+'\x20height='+_0x576109+'\x20levels='+_0x1da2fb);const _0x1fc634=_0x21d314(_0x15da44['deviceDeta'+'ils'],_0x19d907,_0x4fc210),_0x1f4fbc=!!_0x15da44['isGGGR']&&_0x1fc634==='pvr';let _0x503c24;if(_0x1f4fbc?_0x503c24=_0x12a87c['cTFRGBA32']:(_0x503c24=_0x19d907?_0x44900e[_0x1fc634]:_0x4d03bb[_0x1fc634],_0x802028(_0x38180,_0x576109,_0x503c24)||(_0x503c24=_0x19d907?_0x12a87c['cTFRGBA32']:_0x12a87c['cTFRGB565'])),!_0x54b889['startTrans'+'coding']())throw _0x54b889['close'](),_0x54b889['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x209c98);let _0x39b2c2;const _0x3b9d38=[];for(let _0x139156=0x268e+-0x4af+-0x21df;_0x139156<_0x1da2fb;++_0x139156){const _0xfdcd03=_0x54b889['getImageTr'+'anscodedSi'+'zeInBytes'](_0x139156,-0x3*-0x3bd+0xffd*-0x1+0x4c6,-0xf9f+0x1688+-0x6e9,_0x503c24),_0xda9cf3=new Uint8Array(_0xfdcd03);if(!_0x54b889['transcodeI'+'mage'](_0xda9cf3,_0x139156,0x92b*0x4+-0x17*-0x67+0x2ded*-0x1,-0x1853*-0x1+0x8b7+-0x1085*0x2,_0x503c24,-0xefb+-0x1d34+0x2c2f,-(0x4ad+-0x1*0x16d8+0x122c),-(-0x16ae+-0x19cb+0x307a)))throw _0x54b889['close'](),_0x54b889['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x209c98);const _0x2dc9f8=_0x503c24===_0x12a87c['cTFRGB565']||_0x503c24===_0x12a87c['cTFRGBA444'+'4'];_0x3b9d38['push'](_0x2dc9f8?new Uint16Array(_0xda9cf3['buffer']):_0xda9cf3);}if(_0x54b889['close'](),_0x54b889['delete'](),_0x1f4fbc){for(_0x503c24=_0x12a87c['cTFRGB565'],_0x39b2c2=-0x4*0x4af+0x1530+-0x274;_0x39b2c2<_0x3b9d38['length'];++_0x39b2c2)_0x3b9d38[_0x39b2c2]=_0x3f66e5(_0x43e546(_0x3b9d38[_0x39b2c2]));}return{'format':_0x36f723(_0x503c24,_0x15da44['deviceDeta'+'ils']),'width':_0x38180,'height':_0x576109,'levels':_0x3b9d38,'cubemap':!(-0x1a7c+0x190f+0x16e),'transcodeTime':_0x4cebd2()-_0x57ac28,'url':_0x209c98,'unswizzledGGGR':_0x1f4fbc};},_0x21c931=(_0x139bb4,_0x46d7a0,_0x2d83e8)=>{const _0x83c229=_0x4cebd2(),_0x4cb234=new _0x286543['BasisFile'](new Uint8Array(_0x46d7a0)),_0x108210=_0x4cb234['getImageWi'+'dth'](-0xe*0x71+-0x18d6+0x1f04,0x24d7+-0x9d*0x5+-0x21c6),_0x1e4a3f=_0x4cb234['getImageHe'+'ight'](0x1c*-0xec+0x2f8+-0x56*-0x44,0x76*-0x3e+0x1b+0x1c79*0x1),_0x1fc92a=_0x4cb234['getNumImag'+'es'](),_0x3221cf=_0x4cb234['getNumLeve'+'ls'](-0xb5*0x7+-0x1*0xeae+0x13a1),_0x8333d2=!!_0x4cb234['getHasAlph'+'a'](),_0x4db1b6=_0x4cb234['isUASTC']&&_0x4cb234['isUASTC']();if(!_0x108210||!_0x1e4a3f||!_0x1fc92a||!_0x3221cf)throw _0x4cb234['close'](),_0x4cb234['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x139bb4+'\x20width='+_0x108210+'\x20height='+_0x1e4a3f+'\x20images='+_0x1fc92a+'\x20levels='+_0x3221cf);const _0xffbd47=_0x21d314(_0x2d83e8['deviceDeta'+'ils'],_0x8333d2,_0x4db1b6),_0x283182=!!_0x2d83e8['isGGGR']&&_0xffbd47==='pvr';let _0x48cfa4;if(_0x283182?_0x48cfa4=_0x12a87c['cTFRGBA32']:(_0x48cfa4=_0x8333d2?_0x44900e[_0xffbd47]:_0x4d03bb[_0xffbd47],_0x802028(_0x108210,_0x1e4a3f,_0x48cfa4)||(_0x48cfa4=_0x8333d2?_0x12a87c['cTFRGBA32']:_0x12a87c['cTFRGB565'])),!_0x4cb234['startTrans'+'coding']())throw _0x4cb234['close'](),_0x4cb234['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x139bb4);let _0x28ed07;const _0x479a67=[];for(let _0x1fc49a=0x1985+0x1a09+-0x2*0x19c7;_0x1fc49a<_0x3221cf;++_0x1fc49a){const _0x23f3b4=_0x4cb234['getImageTr'+'anscodedSi'+'zeInBytes'](-0x21fa*0x1+0x21ca+0x30,_0x1fc49a,_0x48cfa4),_0x3db3b4=new Uint8Array(_0x23f3b4);if(!_0x4cb234['transcodeI'+'mage'](_0x3db3b4,0x1c01+0x779+-0x26*0xef,_0x1fc49a,_0x48cfa4,0x2189+0x1*-0x5ab+-0x94a*0x3,0x1d68+-0x10bb+-0xcad)){if(_0x1fc49a===_0x3221cf-(0x16b7+0x7be+-0x1e74)&&_0x23f3b4===_0x479a67[_0x1fc49a-(0xaa7+-0xdfe+0x358)]['buffer']['byteLength'])_0x3db3b4['set'](new Uint8Array(_0x479a67[_0x1fc49a-(0x2384+-0x24*0x81+-0x1*0x115f)]['buffer'])),console['warn']('Failed\x20to\x20'+'transcode\x20'+'last\x20mipma'+'p\x20level,\x20u'+'sing\x20previ'+'ous\x20level\x20'+'instead\x20ur'+'l='+_0x139bb4);else throw _0x4cb234['close'](),_0x4cb234['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x139bb4);}const _0x2992db=_0x48cfa4===_0x12a87c['cTFRGB565']||_0x48cfa4===_0x12a87c['cTFRGBA444'+'4'];_0x479a67['push'](_0x2992db?new Uint16Array(_0x3db3b4['buffer']):_0x3db3b4);}if(_0x4cb234['close'](),_0x4cb234['delete'](),_0x283182){for(_0x48cfa4=_0x12a87c['cTFRGB565'],_0x28ed07=0x1a*-0x169+-0x213f+0x65b*0xb;_0x28ed07<_0x479a67['length'];++_0x28ed07)_0x479a67[_0x28ed07]=_0x3f66e5(_0x43e546(_0x479a67[_0x28ed07]));}return{'format':_0x36f723(_0x48cfa4,_0x2d83e8['deviceDeta'+'ils']),'width':_0x108210,'height':_0x1e4a3f,'levels':_0x479a67,'cubemap':!(0x17be+-0x5f9+0x6*-0x2f6),'transcodeTime':_0x4cebd2()-_0x83c229,'url':_0x139bb4,'unswizzledGGGR':_0x283182};},_0x3d006e=(_0x254afc,_0x3a01d8,_0xe91dfe)=>_0xe91dfe['isKTX2']?_0x3cbfab(_0x254afc,_0x3a01d8,_0xe91dfe):_0x21c931(_0x254afc,_0x3a01d8,_0xe91dfe),_0x1969db=(_0x2bd35a,_0x32eed8,_0x4c0e67)=>{try{const _0x463b34=_0x3d006e(_0x2bd35a,_0x32eed8,_0x4c0e67);_0x463b34['levels']=_0x463b34['levels']['map'](_0x352a5b=>_0x352a5b['buffer']),self['postMessag'+'e']({'url':_0x2bd35a,'data':_0x463b34},_0x463b34['levels']);}catch(_0x3baddd){self['postMessag'+'e']({'url':_0x2bd35a,'err':_0x3baddd},null);}},_0x2bb961=(_0x2a0bb3,_0x1a7fdd)=>{const _0x8f9aa6=(_0x356fd5,_0x3cec70)=>(WebAssembly['instantiat'+'e'](_0x2a0bb3['module'],_0x356fd5)['then'](_0x4dbe6b=>{_0x3cec70(_0x4dbe6b);})['catch'](_0x27cbfb=>{console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x27cbfb);}),{});self['BASIS'](_0x2a0bb3['module']?{'instantiateWasm':_0x8f9aa6}:null)['then'](_0x390175=>{_0x390175['initialize'+'Basis'](),_0x286543=_0x390175,_0x3e45f2=_0x2a0bb3['rgbPriorit'+'y'],_0x4b0121=_0x2a0bb3['rgbaPriori'+'ty'],_0x1a7fdd(null);});},_0x45af24=[];self['onmessage']=_0xf8075f=>{const _0x449eb1=_0xf8075f['data'];switch(_0x449eb1['type']){case'init':_0x2bb961(_0x449eb1['config'],()=>{for(let _0x8826cc=0x19b5+-0x15a7*-0x1+-0x6c4*0x7;_0x8826cc<_0x45af24['length'];++_0x8826cc)_0x1969db(_0x45af24[_0x8826cc]['url'],_0x45af24[_0x8826cc]['data'],_0x45af24[_0x8826cc]['options']);_0x45af24['length']=0x27*-0xfe+-0x1bb+-0x4f*-0x83;});break;case'transcode':_0x286543?_0x1969db(_0x449eb1['url'],_0x449eb1['data'],_0x449eb1['options']):_0x45af24['push'](_0x449eb1);break;}};}const Uk=_0x1fc7b8=>({'astc':!!_0x1fc7b8['extCompres'+'sedTexture'+'ASTC'],'atc':!!_0x1fc7b8['extCompres'+'sedTexture'+'ATC'],'dxt':!!_0x1fc7b8['extCompres'+'sedTexture'+'S3TC'],'etc1':!!_0x1fc7b8['extCompres'+'sedTexture'+'ETC1'],'etc2':!!_0x1fc7b8['extCompres'+'sedTexture'+'ETC'],'pvr':!!_0x1fc7b8['extCompres'+'sedTexture'+'PVRTC']}),Bk=(_0x3e1f58,_0x19e0e0)=>{const _0x5a5476=_0x11ff2f=>{const _0x5ecda7=['/*\x20basis\x20*'+'/',_0x11ff2f,'','('+kk['toString']()+')()\x0a\x0a']['join']('\x0a');return new Blob([_0x5ecda7],{'type':'applicatio'+'n/javascri'+'pt'});},_0x20bc65=()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x3475e8=new WebAssembly['Module'](Uint8Array['of'](-0x320+0xf4d+-0xc2d,-0x15*0x7c+0x41+-0x293*-0x4,0x1*0x1de+0x24d4+-0x263f,0x27*0x59+0x982+-0x16a4,0x218a+-0x1944+-0x845,-0x1d2a+-0x20*-0x137+-0x9b6,0x88+0x3*-0x5e2+0x272*0x7,0x1849+0x611+0x22b*-0xe));if(_0x3475e8 instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x3475e8)instanceof WebAssembly['Instance'];}}catch{}return!(-0x458+0x23f3+-0x1f9a);},_0x111470=(_0x4eef12,_0x428872)=>{_0x19e0e0(null,{'workerUrl':URL['createObje'+'ctURL'](_0x5a5476(_0x4eef12)),'module':_0x428872,'rgbPriority':_0x3e1f58['rgbPriorit'+'y'],'rgbaPriority':_0x3e1f58['rgbaPriori'+'ty']});},_0x575f1f={'cache':!(-0x1*0x1a12+-0xa2a*-0x1+0xfe8),'responseType':'text','retry':_0x3e1f58['maxRetries']>-0x10ef+-0xd6*0x2a+0x340b,'maxRetries':_0x3e1f58['maxRetries']};if(_0x3e1f58['glueUrl']&&_0x3e1f58['wasmUrl']&&_0x20bc65()){let _0x582f72=null,_0x4c9d2f=null;ot['get'](_0x3e1f58['glueUrl'],_0x575f1f,(_0x1329b9,_0x4df405)=>{_0x1329b9?_0x19e0e0(_0x1329b9):_0x4c9d2f?_0x111470(_0x4df405,_0x4c9d2f):_0x582f72=_0x4df405;});const _0x18e100=fetch(_0x3e1f58['wasmUrl']),_0x185350=()=>{_0x18e100['then'](_0x359e35=>_0x359e35['arrayBuffe'+'r']())['then'](_0x3047a1=>WebAssembly['compile'](_0x3047a1))['then'](_0x428597=>{_0x582f72?_0x111470(_0x582f72,_0x428597):_0x4c9d2f=_0x428597;})['catch'](_0x15eaf6=>{_0x19e0e0(_0x15eaf6,null);});};WebAssembly['compileStr'+'eaming']?WebAssembly['compileStr'+'eaming'](_0x18e100)['then'](_0x13dde0=>{_0x582f72?_0x111470(_0x582f72,_0x13dde0):_0x4c9d2f=_0x13dde0;})['catch'](_0x270a26=>{w['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x3e1f58['wasmUrl']+'\x20('+_0x270a26+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x185350();}):_0x185350();}else ot['get'](_0x3e1f58['fallbackUr'+'l'],_0x575f1f,(_0x17dcba,_0x37d217)=>{_0x17dcba?_0x19e0e0(_0x17dcba,null):_0x111470(_0x37d217,null);});};class zk{constructor(){this['callbacks']={},this['queue']=[],this['clients']=[];}['enqueueJob'](_0x4e30de,_0x50683d,_0xcb11ce,_0x4ee65c){if(this['callbacks']['hasOwnProp'+'erty'](_0x4e30de))this['callbacks'][_0x4e30de]['push'](_0xcb11ce);else{this['callbacks'][_0x4e30de]=[_0xcb11ce];const _0x877beb={'url':_0x4e30de,'data':_0x50683d,'options':_0x4ee65c};this['clients']['length']>-0x1af*-0x2+-0xd32+0x9d4?this['clients']['shift']()['run'](_0x877beb):this['queue']['push'](_0x877beb);}}['enqueueCli'+'ent'](_0x27d7be){this['queue']['length']>0x11ea*-0x2+-0x3*0x2d9+0x2c5f?_0x27d7be['run'](this['queue']['shift']()):this['clients']['push'](_0x27d7be);}['handleResp'+'onse'](_0x7c97ee,_0x34e458,_0x13522){const _0x266dc2=this['callbacks'][_0x7c97ee];if(_0x34e458){for(let _0x270420=0x6a*0x7+0x1781+-0x3*0x8cd;_0x270420<_0x266dc2['length'];++_0x270420)_0x266dc2[_0x270420](_0x34e458);}else{_0x13522['format']===Jh||_0x13522['format']===ed?_0x13522['levels']=_0x13522['levels']['map'](_0x42eace=>new Uint16Array(_0x42eace)):_0x13522['levels']=_0x13522['levels']['map'](_0x34fa5f=>new Uint8Array(_0x34fa5f));for(let _0x1b145c=0x17e7+-0x3b*-0x7c+-0x347b;_0x1b145c<_0x266dc2['length'];++_0x1b145c)_0x266dc2[_0x1b145c](null,_0x13522);}delete this['callbacks'][_0x7c97ee];}}class Vk{constructor(_0x5d5e28,_0x371a63,_0x56c1e1){this['queue']=_0x5d5e28,this['worker']=new Worker(_0x371a63['workerUrl']),this['worker']['addEventLi'+'stener']('message',_0x7be387=>{const _0xfcddb4=_0x7be387['data'];this['queue']['handleResp'+'onse'](_0xfcddb4['url'],_0xfcddb4['err'],_0xfcddb4['data']),this['eager']||this['queue']['enqueueCli'+'ent'](this);}),this['worker']['postMessag'+'e']({'type':'init','config':_0x371a63}),this['eager']=_0x56c1e1;}['run'](_0x5ed57f){const _0x63a47c=[];_0x5ed57f['data']instanceof ArrayBuffer&&_0x63a47c['push'](_0x5ed57f['data']),this['worker']['postMessag'+'e']({'type':'transcode','url':_0x5ed57f['url'],'format':_0x5ed57f['format'],'data':_0x5ed57f['data'],'options':_0x5ed57f['options']},_0x63a47c),this['eager']&&this['queue']['enqueueCli'+'ent'](this);}}const Gk=-0x781+0x865+-0xe3,Hk=['etc2','etc1','astc','dxt','pvr','atc'],Wk=['astc','dxt','etc2','pvr','atc'],$k=0x86*0x5+-0xf37+0xc9e,Xu=new zk();let xS=null,qu=!(-0x9b1+0x1ab1+-0x10ff);function Xk(_0x4342b1){if(!qu){if(!_0x4342b1)_0x4342b1=xS||{};else{if(_0x4342b1['lazyInit']){xS=_0x4342b1;return;}}if(!_0x4342b1['glueUrl']||!_0x4342b1['wasmUrl']||!_0x4342b1['fallbackUr'+'l']){const _0x4eebf9=YS['getConfig']('BASIS');_0x4eebf9&&(_0x4342b1={'glueUrl':_0x4eebf9['glueUrl'],'wasmUrl':_0x4eebf9['wasmUrl'],'fallbackUrl':_0x4eebf9['fallbackUr'+'l'],'numWorkers':_0x4eebf9['numWorkers']});}if(_0x4342b1['glueUrl']||_0x4342b1['wasmUrl']||_0x4342b1['fallbackUr'+'l']){qu=!(0xd50+0x1537*0x1+0x1*-0x2287);const _0x5b687f=Math['max'](-0x2*0x1295+-0xb*-0x151+-0x16b0*-0x1,Math['min'](-0x1775+0x3*-0xc93+-0x4b6*-0xd,_0x4342b1['numWorkers']||Gk)),_0x3fc40c=_0x4342b1['numWorkers']===-0x19d6+0x7*-0x509+0x3d16||(_0x4342b1['hasOwnProp'+'erty']('eagerWorke'+'rs')?_0x4342b1['eagerWorke'+'rs']:!(-0x2*0xedb+0x9bb+-0x6a9*-0x3));_0x4342b1['rgbPriorit'+'y']=_0x4342b1['rgbPriorit'+'y']||Hk,_0x4342b1['rgbaPriori'+'ty']=_0x4342b1['rgbaPriori'+'ty']||Wk,_0x4342b1['maxRetries']=_0x4342b1['hasOwnProp'+'erty']('maxRetries')?_0x4342b1['maxRetries']:$k,Bk(_0x4342b1,(_0x166b7d,_0x11f955)=>{if(_0x166b7d)console['error']('failed\x20to\x20'+'initialize'+'\x20basis\x20wor'+'ker:\x20'+_0x166b7d);else{for(let _0x366be1=0x1*0x1855+0x65*0x39+-0x2ed2;_0x366be1<_0x5b687f;++_0x366be1)Xu['enqueueCli'+'ent'](new Vk(Xu,_0x11f955,_0x3fc40c));}});}}}let Df=null;function b0(_0x29be21,_0xaeaab2,_0x4778e2,_0x1abeb0,_0x13e806){return Xk(),Df||(Df={'formats':Uk(_0x29be21)}),Xu['enqueueJob'](_0xaeaab2,_0x4778e2,_0x1abeb0,{'deviceDetails':Df,'isGGGR':!!(_0x13e806!=null&&_0x13e806['isGGGR']),'isKTX2':!!(_0x13e806!=null&&_0x13e806['isKTX2'])}),qu;}class eo{['load'](_0x5b792c,_0x3821c0,_0x1bb1be){throw new Error('not\x20implem'+'ented');}['open'](_0x5cac43,_0x570a9a,_0x22fb14){throw new Error('not\x20implem'+'ented');}}class qk extends eo{constructor(_0x34a966,_0x14a1f8){super(),this['device']=_0x14a1f8,this['maxRetries']=0x40*0x80+0x1c23+-0x5*0xc07;}['load'](_0x63abb0,_0x401b8b,_0x31c2a4){const _0x6002d3=this['device'],_0x1da53d=_0x307e42=>{var _0x5e0493,_0x302b10,_0x42d3ec;b0(_0x6002d3,_0x63abb0['load'],_0x307e42,_0x401b8b,{'isGGGR':(((_0x42d3ec=(_0x302b10=(_0x5e0493=_0x31c2a4==null?void(-0x2bf+-0x6ac+0x96b):_0x31c2a4['file'])==null?void(-0x187b+0x20d3+0x216*-0x4):_0x5e0493['variants'])==null?void(0xf*-0x113+-0x182c+0x2849):_0x302b10['basis'])==null?void(0x14*0x6a+-0xa9*-0x25+-0x20b5):_0x42d3ec['opt'])&-0x115d*0x2+0x6*0xab+0x1ec0)!==-0x5e9+0x1*-0x1f2e+-0x41f*-0x9})||_0x401b8b('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x31c2a4['name']+']('+_0x31c2a4['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.'));};pe['fetchArray'+'Buffer'](_0x63abb0['load'],(_0x4f16de,_0x487a97)=>{_0x4f16de?_0x401b8b(_0x4f16de):_0x1da53d(_0x487a97);},_0x31c2a4,this['maxRetries']);}['open'](_0xb7b25a,_0x26b992,_0x361147,_0x2dfd94={}){const _0x40b6d5=_0x2dfd94['srgb']?ld(_0x26b992['format']):_0x26b992['format'],_0x1c83a4=new _e(_0x361147,{'name':_0xb7b25a,'profilerHint':Pr,'addressU':_0x26b992['cubemap']?ue:yt,'addressV':_0x26b992['cubemap']?ue:yt,'width':_0x26b992['width'],'height':_0x26b992['height'],'format':_0x40b6d5,'cubemap':_0x26b992['cubemap'],'levels':_0x26b992['levels'],..._0x2dfd94});return _0x1c83a4['upload'](),_0x1c83a4;}}const A0=new Uint8Array([0x1a02+-0x1*-0x193a+0x1*-0x32b3,0x1893+0x17*-0xdb+0x496*-0x1,-0x165e+0xbdd*-0x1+-0x15*-0x1a5,0x543*-0x5+-0xc6b+0x1*0x2701,-0xa3*0x16+0xf22+0x113*-0x1,0x1e19+0x3a5*0x8+-0x3b37,-0x15bf+-0x98b+0x7d9*0x4,0x124+-0x18ba+-0x20*-0xbd,-0x42*-0x24+0x210+-0x4*0x2d6,-0x795*-0x4+-0x1be*-0x10+0x64*-0x95,0xacb+0x141d+-0x1ee8,-0x2c3*0x7+-0x12cc+0xcba*0x3,-0x11a1+0xce3*-0x1+0x1ecd,0x19e+0x1*-0xe0+-0x76,0x3*-0x6da+-0x2ca+0xbce*0x2,-0xddb*0x1+0x159c+-0xb*0xad,0xada+-0x1*0x1862+0xd88,-0x1e94+-0x1a31+0x38c5,-0x51*-0x6a+0x1aa8+-0x3c32,0xf1f+-0x1*0xcc5+0x259*-0x1,0x2056*-0x1+0xaa+-0x1*-0x1fac,-0x255+0x15b7*-0x1+0x180c,0x3e*0x1c+0x4be+-0x5c3*0x2,0x197+0x1133+-0x12c9,0x1bf6+0x1*0x236f+-0x3f5d,0x17d*0x6+0xdfd+-0x16e5,-0x1aa3+0x662*0x1+0x1441,0x24ec+-0xdb7*0x1+-0x1c9*0xd,0x1a*0xa0+-0x23a3+0x1363,-0x805*-0x3+0x2*0x985+-0x157d*0x2,-0x33a+0x12a2+-0xf53,0x25f7+0x23e8*-0x1+-0x14b,-0x19*-0xb3+-0x3*-0x525+-0x2061,0x7e2+0x94*-0x5+-0x1aa*0x3,-0xcc4+0x1*0x1dbf+-0x10fb,0x35+0x1cb4+0x1*-0x1ce9,0x21e9*-0x1+0x19eb+0x80b,0xe7b+-0xd4d+-0xe5,-0x1*-0x717+0x1e0b+-0x625*0x6,-0xf88+-0xd8f+-0x3*-0x9c8,0x1a14+-0x3a7*-0x9+-0x2b*0x15d,0x264d+-0xf7a+0x3b*-0x61,0x21ac+0x1*-0x2b3+-0x2bd*0xb,-0xd39*-0x2+-0x20d8+0x6c9,-0x12*-0x5b+-0xb11+0x50f,-0x1118+0x8*0x3fe+-0xe74,-0xf19*0x1+-0xa4+0x101f,-0x25e2+-0x9*0x359+0x44b9,-0x1aa9+-0xd75+-0x2825*-0x1,0x5*-0x175+0x35*-0x26+0x50d*0x3,0x145f+0x21*-0x42+-0x1*0xbdd,-0xed0+-0x21c7+0x30f0,-0x17c6+-0x11*0x127+-0x11*-0x28d,-0x5be+0x753+-0x14e,0x15d6+0x125*-0xa+0xa21*-0x1,0x240c+0x1c*-0x4+-0x2317,-0x12a4*-0x2+0xb*-0xe5+-0xd*0x211,0xedb*0x1+0x952*0x4+-0x3336,0x36*-0x22+-0x1*0x257f+0x2cab,-0x251+0x8a7*0x1+0x656*-0x1,-0x1e17+0xb8c*-0x2+0x352f,-0x1*0x1897+0x1054+-0x2d*-0x2f,0x2688+-0x1884*0x1+-0x13*0xb9,0x1702+0x1815+-0x2ed2,-0x75f+0x1be*0x9+-0x801*0x1,0x1172+0x761*0x5+-0x3613,0xb63+0x2074+-0x2b29,0x18b7+-0x897+-0x1*0xfde,0xa*-0x386+-0x18df+0x3c7b,0x5de+0x1350+-0xc56*0x2]),C0=(_0x4abf9e,_0x480ab7)=>{const _0x2bed50=new _e(_0x4abf9e,{'width':0x1,'height':0x1,'format':Ne,'mipmaps':!(-0x17a3+-0x26*0x89+0x1b1*0x1a),'levels':[_0x480ab7]}),_0x23b1f5=new gt({'colorBuffer':_0x2bed50,'depth':!(-0xd22*-0x1+-0x1bd3+-0xb*-0x156)});_0x4abf9e['setFramebu'+'ffer'](_0x23b1f5['impl']['_glFrameBu'+'ffer']),_0x4abf9e['initRender'+'Target'](_0x23b1f5);const _0x1aa390=new Uint8ClampedArray(0x2301+0x8*-0x3ad+-0x595*0x1);return _0x4abf9e['gl']['readPixels'](0x1a5e+-0x82b+-0x1233,-0x53*0x2c+0x13e3+-0x59f,-0x86+0x10*0x59+-0x509,-0x33e*-0x6+0xa3*0xb+-0x69d*0x4,_0x4abf9e['gl']['RGBA'],_0x4abf9e['gl']['UNSIGNED_B'+'YTE'],_0x1aa390),_0x23b1f5['destroy'](),_0x2bed50['destroy'](),_0x1aa390[-0x6*-0x3b7+-0x1*-0x1843+-0x2e8d]===-0x18*-0x114+0x236c+-0x11*0x39b&&_0x1aa390[-0x16ea+0x74a+0xfa1*0x1]===0x1b4d+0x3*0xa83+0x1f6*-0x1e&&_0x1aa390[-0xb3*0x7+-0x4*0x84d+0x261b]===-0x241*0x9+0x33*-0xb3+0x37f5&&_0x1aa390[-0x43*0x58+0x1462+-0x1*-0x2a9]===0x7e9+0x16aa+-0xf2a*0x2;},jk=_0x125a40=>createImageBitmap(new Blob([A0],{'type':'image/png'}),{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0x5ee6c4=>C0(_0x125a40,_0x5ee6c4))['catch'](_0x27678f=>!(0x2091*-0x1+0xa5a+0x1638)),Yk=_0x5f2a26=>new Promise((_0x2a90f1,_0x2a9ca0)=>{const _0xe509ac=new Image();_0xe509ac['src']=URL['createObje'+'ctURL'](new Blob([A0])),_0xe509ac['onload']=()=>{_0x2a90f1(C0(_0x5f2a26,_0xe509ac));};});class Kk{static['run'](_0x436f64){jk(_0x436f64)['then'](_0x3e9549=>{console['log']('imageBitma'+'pIsCorrect'+'='+_0x3e9549);}),Yk(_0x436f64)['then'](_0x2a5567=>{console['log']('imgElement'+'IsCorrect='+_0x2a5567);});}}class Zk extends eo{constructor(_0x46e686,_0x985d1b){super(),this['crossOrigi'+'n']=_0x46e686['prefix']?'anonymous':null,this['maxRetries']=0x236c*-0x1+-0x185c+0x1*0x3bc8,this['device']=_0x985d1b,mi['get']('IMG_ALPHA_'+'TEST')&&Kk['run'](this['device']);}['load'](_0x1d17b3,_0x585b63,_0x355e87){var _0x5b1d14;const _0x50aa8d=!!((_0x5b1d14=_0x355e87==null?void(0x838*0x1+0x49a+-0x6*0x223):_0x355e87['file'])!=null&&_0x5b1d14['contents']);if(_0x50aa8d){if(this['device']['supportsIm'+'ageBitmap']){this['_loadImage'+'BitmapFrom'+'Blob'](new Blob([_0x355e87['file']['contents']]),_0x585b63);return;}_0x1d17b3={'load':URL['createObje'+'ctURL'](new Blob([_0x355e87['file']['contents']])),'original':_0x1d17b3['original']};}const _0x35e341=(_0x2dc8fb,_0x309842)=>{_0x50aa8d&&URL['revokeObje'+'ctURL'](_0x1d17b3['load']),_0x585b63(_0x2dc8fb,_0x309842);};let _0x506710;_0x355e87&&_0x355e87['options']&&_0x355e87['options']['hasOwnProp'+'erty']('crossOrigi'+'n')?_0x506710=_0x355e87['options']['crossOrigi'+'n']:jn['test'](_0x1d17b3['load'])&&(_0x506710=this['crossOrigi'+'n']),this['device']['supportsIm'+'ageBitmap']?this['_loadImage'+'Bitmap'](_0x1d17b3['load'],_0x1d17b3['original'],_0x506710,_0x35e341,_0x355e87):this['_loadImage'](_0x1d17b3['load'],_0x1d17b3['original'],_0x506710,_0x35e341);}['open'](_0x143085,_0x2addb3,_0x4c7837,_0x1667a4={}){const _0x4e82b2=new _e(_0x4c7837,{'name':_0x143085,'profilerHint':Pr,'width':_0x2addb3['width'],'height':_0x2addb3['height'],'format':_0x1667a4['srgb']?_s:Ne,..._0x1667a4});return _0x4e82b2['setSource'](_0x2addb3),_0x4e82b2;}['_loadImage'](_0x38bf34,_0x3d8770,_0x2d248b,_0x4e84d3){const _0x266076=new Image();_0x2d248b&&(_0x266076['crossOrigi'+'n']=_0x2d248b);let _0x244b4a=-0x1d*0x95+-0x79*-0x3a+-0x5d*0x1d;const _0x2cb571=this['maxRetries'];let _0x55227b;_0x266076['onload']=function(){_0x4e84d3(null,_0x266076);},_0x266076['onerror']=function(){if(!_0x55227b){if(_0x2cb571>-0x13f+-0x18f*0xb+-0x499*-0x4&&++_0x244b4a<=_0x2cb571){const _0x3dc9c3=Math['pow'](-0x12b1+0x1605+-0x5*0xaa,_0x244b4a)*(-0x1b1b+0x1b1e+0x61);console['log']('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0x3d8770+('\x27\x20-\x20Retryi'+'ng\x20in\x20')+_0x3dc9c3+'ms...');const _0x288a47=_0x38bf34['indexOf']('?')>=-0x1*0x2052+0x1d7+-0x3*-0xa29?'&':'?';_0x55227b=setTimeout(()=>{_0x266076['src']=_0x38bf34+_0x288a47+'retry='+Date['now'](),_0x55227b=null;},_0x3dc9c3);}else _0x4e84d3('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0x3d8770+'\x27');}},_0x266076['src']=_0x38bf34;}['_loadImage'+'Bitmap'](_0x281c20,_0x3bec69,_0x3713fb,_0x45eaa4,_0x56f9c9){const _0x1fcc44={'cache':!(-0x1a06*-0x1+0x1*-0x506+0xc*-0x1c0),'responseType':'blob','retry':this['maxRetries']>0x3*-0x94d+0x1241+-0xa*-0xf7,'maxRetries':this['maxRetries'],'progress':_0x56f9c9};ot['get'](_0x281c20,_0x1fcc44,(_0x51d38d,_0x41152b)=>{_0x51d38d?_0x45eaa4(_0x51d38d):this['_loadImage'+'BitmapFrom'+'Blob'](_0x41152b,_0x45eaa4);});}['_loadImage'+'BitmapFrom'+'Blob'](_0x299f8e,_0x385e2f){createImageBitmap(_0x299f8e,{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0x1992a8=>_0x385e2f(null,_0x1992a8))['catch'](_0x4e2ab1=>_0x385e2f(_0x4e2ab1));}}const If=[0x7b7ffae1+0x481*-0xcaec1+0x7ce017*0x2d,-0x138e4dc8f+-0x7*0x3262ec10+0x354ca821f,0x11fd760c+-0x22443b6*0x1+0x3*-0x1ea62c3],Qk={0x83f0:td,0x83f2:op,0x83f3:vl,0x8d64:id,0x9274:cp,0x9278:hp,0x8c00:rd,0x8c01:xl,0x8c02:ad,0x8c03:Tl,0x8051:Cr,0x8058:Ne,0x8c41:lp,0x8c43:_s,0x8c3a:In,0x881b:ui,0x881a:nt};function Jk(_0x33a0c7,_0x2524bf,_0x18d40f,_0x2a5153){return _0x33a0c7===In?new Uint32Array(_0x2524bf,_0x18d40f,_0x2a5153/(-0x3b6+0xe8f*-0x1+0x1f*0x97)):new Uint8Array(_0x2524bf,_0x18d40f,_0x2a5153);}class eU extends eo{constructor(_0x5c6ce7){super(),this['maxRetries']=0xf*0x14+0x905+0xa31*-0x1;}['load'](_0x5d89bb,_0x314d5b,_0x19ca80){pe['fetchArray'+'Buffer'](_0x5d89bb['load'],_0x314d5b,_0x19ca80,this['maxRetries']);}['open'](_0x21914e,_0x11bf19,_0x2efe98,_0x108994={}){const _0x13ce06=this['parse'](_0x11bf19);if(!_0x13ce06)return null;const _0x1f8281=_0x108994['srgb']?ld(_0x13ce06['format']):_0x13ce06['format'],_0x5b6741=new _e(_0x2efe98,{'name':_0x21914e,'profilerHint':Pr,'addressU':_0x13ce06['cubemap']?ue:yt,'addressV':_0x13ce06['cubemap']?ue:yt,'width':_0x13ce06['width'],'height':_0x13ce06['height'],'format':_0x1f8281,'cubemap':_0x13ce06['cubemap'],'levels':_0x13ce06['levels'],..._0x108994});return _0x5b6741['upload'](),_0x5b6741;}['parse'](_0x553e20){const _0x536c79=new Uint32Array(_0x553e20);if(If[-0x10f1+0x1675+-0x584]!==_0x536c79[-0xeb7+0x1*0x1c5e+0xf*-0xe9]||If[0x1bc9+-0x1228+0x1*-0x9a0]!==_0x536c79[0x5c4+-0x160b+-0x209*-0x8]||If[-0x1*-0x14ed+-0x25ca+0x7*0x269]!==_0x536c79[0x2159*-0x1+-0x2e*-0x35+0x17d5])return w['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX\x20f'+'ile.\x20Expec'+'ted\x200xAB4B'+'5458,\x200x20'+'3131BB,\x200x'+'0D0A1A0A'),null;const _0x4d3c3a={'endianness':_0x536c79[-0xa2a+0x1*0x15e2+-0xbb5],'glType':_0x536c79[-0x1cf1+-0xaf*-0x2b+-0x10*0x7],'glTypeSize':_0x536c79[-0x1707+0x1ef3+-0x11*0x77],'glFormat':_0x536c79[-0x1367+0xc3b+0x732],'glInternalFormat':_0x536c79[0x3f5*-0x2+0x152d+-0x2c*0x4d],'glBaseInternalFormat':_0x536c79[-0x1*-0x176e+-0x2c*0x9+-0x15da],'pixelWidth':_0x536c79[-0x49e*0x1+0x3*0x298+-0x321],'pixelHeight':_0x536c79[-0x2614*-0x1+-0x12f4+-0x1316],'pixelDepth':_0x536c79[0x12*0xbb+-0xdd1+0x5b*0x2],'numberOfArrayElements':_0x536c79[-0x2e7*-0x4+0x5*-0x587+0x1013],'numberOfFaces':_0x536c79[-0x9*0x3e6+-0x3*-0x13d+0x1f6c],'numberOfMipmapLevels':_0x536c79[0x1619*-0x1+-0x1*-0x7bb+0x39b*0x4],'bytesOfKeyValueData':_0x536c79[0x2e8*-0x2+-0x115*0x1+0x6f4]};if(_0x4d3c3a['pixelDepth']>0x74*0xf+0x206b+-0x2736)return w['warn']('More\x20than\x20'+'1\x20pixel\x20de'+'pth\x20not\x20su'+'pported!'),null;if(_0x4d3c3a['numberOfAr'+'rayElement'+'s']!==-0x769+-0x7*-0x345+-0x236*0x7)return w['warn']('Array\x20text'+'ure\x20not\x20su'+'pported!'),null;const _0x362d01=Qk[_0x4d3c3a['glInternal'+'Format']];if(_0x362d01===void(-0x2d8+0xbc9+-0x3*0x2fb))return w['warn']('Unknown\x20gl'+'InternalFo'+'rmat:\x20'+_0x4d3c3a['glInternal'+'Format']),null;let _0x2a14f2=0x243d*0x1+0x21ac+-0x45d9+_0x4d3c3a['bytesOfKey'+'ValueData']/(-0x1*0x4f9+0x84a+0x34d*-0x1);const _0x201115=_0x4d3c3a['numberOfFa'+'ces']>-0x10c0+0x7*-0x1ed+0x1e3c,_0x240359=[];for(let _0x53ffb0=-0x1013+0x1*0x21cd+-0x11ba;_0x53ffb0<(_0x4d3c3a['numberOfMi'+'pmapLevels']||0x43a*0x4+0x29*-0x3d+0x2*-0x391);_0x53ffb0++){const _0xe3f757=_0x536c79[_0x2a14f2++];_0x201115&&_0x240359['push']([]);const _0x5481bc=_0x201115?_0x240359[_0x53ffb0]:_0x240359;for(let _0x442275=0x11b1*-0x2+-0x14de+0x3840;_0x442275<(_0x201115?0x1a7+-0x754+0x5b3*0x1:0x206*-0xc+0x1d14+0x3*-0x199);++_0x442275)_0x5481bc['push'](Jk(_0x362d01,_0x553e20,_0x2a14f2*(0x34*-0x57+0x29*-0x8d+0x2845*0x1),_0xe3f757)),_0x2a14f2+=_0xe3f757+(0x1*-0xda3+-0x12f2+-0x1c*-0x12a)>>-0xeb3+-0x1195*0x1+0x204a;}return{'format':_0x362d01,'width':_0x4d3c3a['pixelWidth'],'height':_0x4d3c3a['pixelHeigh'+'t'],'levels':_0x240359,'cubemap':_0x201115};}}const tU={'KHR_DF_MODEL_UASTC':0xa6};class sU extends eo{constructor(_0x597f71,_0x214a92){super(),this['maxRetries']=-0x1d3d+-0x9db+0x2718*0x1,this['device']=_0x214a92;}['load'](_0x32e0e6,_0x365973,_0x3db52c){pe['fetchArray'+'Buffer'](_0x32e0e6['load'],(_0x4e4280,_0x568a6c)=>{_0x4e4280?_0x365973(_0x4e4280,_0x568a6c):this['parse'](_0x568a6c,_0x32e0e6,_0x365973,_0x3db52c);},_0x3db52c,this['maxRetries']);}['open'](_0x518ae3,_0x2e128d,_0xffd703,_0x40415d={}){const _0x4b17b8=_0x40415d['srgb']?ld(_0x2e128d['format']):_0x2e128d['format'],_0x526e57=new _e(_0xffd703,{'name':_0x518ae3,'profilerHint':Pr,'addressU':_0x2e128d['cubemap']?ue:yt,'addressV':_0x2e128d['cubemap']?ue:yt,'width':_0x2e128d['width'],'height':_0x2e128d['height'],'format':_0x4b17b8,'cubemap':_0x2e128d['cubemap'],'levels':_0x2e128d['levels'],..._0x40415d});return _0x526e57['upload'](),_0x526e57;}['parse'](_0x9e94ab,_0x4de8b0,_0x4c1311,_0x3b5ef2){var _0x20f36c,_0x35acd2,_0x23a52e;const _0x56c4c9=new KS(_0x9e94ab),_0x17d8a7=[_0x56c4c9['readU32be'](),_0x56c4c9['readU32be'](),_0x56c4c9['readU32be']()];if(_0x17d8a7[0xcf1*-0x1+0x159b+0x455*-0x2]!==-0xfee1e721+-0x13f1f3329+0x2e94c6ea2||_0x17d8a7[0x10c3+0x1c2e*-0x1+0xb6c]!==0xd43b*-0x6e4+0xb4c8d8f+0x1a9c09b8||_0x17d8a7[0x3*0xc9b+-0x16d9+-0xa*0x17f]!==0x195d31d2*-0x1+-0x17147517+-0x1*-0x3d7bc0f3)return w['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX2\x20'+'file.\x20Expe'+'cted\x200xAB4'+'B5458,\x200x2'+'03131BB,\x200'+'x0D0A1A0A'),null;const _0x3ec80d={'vkFormat':_0x56c4c9['readU32'](),'typeSize':_0x56c4c9['readU32'](),'pixelWidth':_0x56c4c9['readU32'](),'pixelHeight':_0x56c4c9['readU32'](),'pixelDepth':_0x56c4c9['readU32'](),'layerCount':_0x56c4c9['readU32'](),'faceCount':_0x56c4c9['readU32'](),'levelCount':_0x56c4c9['readU32'](),'supercompressionScheme':_0x56c4c9['readU32']()},_0x50f45d={'dfdByteOffset':_0x56c4c9['readU32'](),'dfdByteLength':_0x56c4c9['readU32'](),'kvdByteOffset':_0x56c4c9['readU32'](),'kvdByteLength':_0x56c4c9['readU32'](),'sgdByteOffset':_0x56c4c9['readU64'](),'sgdByteLength':_0x56c4c9['readU64']()},_0x468fbd=[];for(let _0x5002d5=0x2136+-0x1*0x977+-0x17bf;_0x5002d5<Math['max'](-0x1954+-0x3*-0x3eb+0xd94,_0x3ec80d['levelCount']);++_0x5002d5)_0x468fbd['push']({'byteOffset':_0x56c4c9['readU64'](),'byteLength':_0x56c4c9['readU64'](),'uncompressedByteLength':_0x56c4c9['readU64']()});if(_0x56c4c9['readU32']()!==_0x50f45d['kvdByteOff'+'set']-_0x50f45d['dfdByteOff'+'set'])return w['warn']('Invalid\x20fi'+'le\x20data\x20en'+'countered.'),null;_0x56c4c9['skip'](0x24a*-0x6+-0x11*-0x17e+-0xb9a);const _0x56528c=_0x56c4c9['readU8']();_0x56c4c9['skip'](_0x50f45d['dfdByteLen'+'gth']-(0x1*-0x30f+0x82a+0x3b*-0x16)),_0x56c4c9['skip'](_0x50f45d['kvdByteLen'+'gth']),_0x3ec80d['supercompr'+'essionSche'+'me']===0x980+0x29*0x45+-0x148c||_0x56528c===tU['KHR_DF_MOD'+'EL_UASTC']?b0(this['device'],_0x4de8b0['load'],_0x9e94ab,_0x4c1311,{'isGGGR':(((_0x23a52e=(_0x35acd2=(_0x20f36c=_0x3b5ef2==null?void(-0x13*0x4c+-0x214*-0x11+-0x50*0x5f):_0x3b5ef2['file'])==null?void(0x2393+-0xc*-0x126+-0x315b):_0x20f36c['variants'])==null?void(0xbd7*-0x1+-0x1b57+0x272e):_0x35acd2['basis'])==null?void(0x5*0x631+0x22c2*0x1+-0x41b7):_0x23a52e['opt'])&-0x7*0x3c7+0x1855+0x224)!==0xa15*-0x1+0x169*-0x2+0xce7,'isKTX2':!(-0x1*0x1823+-0x1*0x611+0x1e34)})||_0x4c1311('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x3b5ef2['name']+']('+_0x3b5ef2['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.')):_0x4c1311('unsupporte'+'d\x20KTX2\x20pix'+'el\x20format');}}class iU extends eo{constructor(_0x52996e){super(),this['maxRetries']=-0x13*0x1ac+0x1995+0x62f;}['load'](_0x3c3e6d,_0x5d41eb,_0x259c9a){pe['fetchArray'+'Buffer'](_0x3c3e6d['load'],_0x5d41eb,_0x259c9a,this['maxRetries']);}['open'](_0x400085,_0x17ce3f,_0x27f770,_0x5e9c06={}){const _0x186133=new Uint32Array(_0x17ce3f,-0xc5*0x13+0xd*-0x2c7+-0x1*-0x32ba,-0x1*0x12fb+0xa2b*-0x2+0x2771*0x1),_0x345ecf=_0x186133[-0x3f3*-0x9+-0x2138+0x1*-0x24f],_0x29ee50=_0x186133[0x11*0x76+0x1cf8+-0x24cb],_0x40814a=Math['max'](_0x186133[-0x1340*-0x2+0x5fb*0x1+-0xb1d*0x4],-0x1eb8+0x21d*0x4+0x1645*0x1),_0x97fc2=_0x186133[0xbe7+0x1307*-0x2+0x53f*0x5]===-0x13f7+0x10*-0x26+-0x165b*-0x1,_0x32d842=_0x186133[-0x5*0x300+-0x720+0x1*0x1635],_0x2f205d=_0x186133[-0x2655+-0xe1d+0x3488],_0x314ea7=_0x186133[-0x21f1+0xd66+0x14a7]===0x1*0x6f17+0x1c8d*0x3+0x3942,_0x27d410=-0x23dd45cb+0x5ac3aac7+0x164832e*-0x4,_0x32954c=0x63c3c45+-0x52689199+0x8180ad98,_0x502423=-0x1f01+0x246*0x6+0x1*0x11ce,_0x42dc4a=0x1d9a+0x1c3+0x1*-0x1ee9,_0x3e51a3=0x33970612+0x2714*-0x1f226+0x49b7032b,_0xf9e819=-0x2e43b09*0x16+-0x5aea2670+0xcbba6b86,_0x4d05ed=-0x15ea*-0x388c8+0x45b94842+-0x61f884c2,_0x1a2c6c=0x1fcbe28*0x5+0xc4f1*0x5e5+0x22ba9cf3,_0x5ac0d6=0x48aab363+-0x1*0x1b82af5b+0x818609*0x8;let _0x5e63af=!(-0x4ea*0x6+0x2212+-0x495*0x1),_0x1b5510=!(-0x40*-0x6f+0xb7f+-0x273e),_0x35fbec=!(-0x1d14+0x18e1+-0x4*-0x10d),_0x144942=!(0x26af+-0x233f+-0x36f),_0x52d266=null,_0x37ba4c=0x1*0x181f+0x23*-0xeb+0x7*0x125,_0x3cbf81;if(_0x97fc2?_0x32d842===_0x27d410?(_0x52d266=td,_0x5e63af=!(-0x2347*0x1+-0x1*0xc11+0x2f58)):_0x32d842===_0x32954c?(_0x52d266=vl,_0x5e63af=!(-0x22f*0x7+-0x95*0x27+0x25fc)):_0x32d842===_0x502423?(_0x52d266=nt,_0x37ba4c=-0x265a+-0x90e+-0x7*-0x6c6):_0x32d842===_0x42dc4a?(_0x52d266=Xt,_0x37ba4c=-0x965+0x1541*0x1+-0x1*0xbd8):_0x32d842===_0x3e51a3?(_0x52d266=id,_0x5e63af=!(-0x6*0x28d+-0x193d+0x288b),_0x1b5510=!(0x1fe+0x12ea+-0x4*0x53a)):_0x32d842===_0xf9e819||_0x32d842===_0x4d05ed?(_0x52d266=_0x32d842===_0xf9e819?xl:Tl,_0x5e63af=!(0x7a9*-0x5+0x2f*0x7+-0x5c*-0x67),_0x35fbec=!(0x2*-0x749+-0x1c18+0x2aaa)):(_0x32d842===_0x1a2c6c||_0x32d842===_0x5ac0d6)&&(_0x52d266=_0x32d842===_0x1a2c6c?rd:ad,_0x5e63af=!(-0x28c+0x166b+-0x1*0x13df),_0x144942=!(-0x202d+-0xe*0x1d4+0x39c5)):_0x2f205d===-0x1669+-0x3d5*0x5+0x29b2&&(_0x52d266=Ne),!_0x52d266)return w['error']('This\x20DDS\x20p'+'ixel\x20forma'+'t\x20is\x20curre'+'ntly\x20unsup'+'ported.\x20Em'+'pty\x20textur'+'e\x20will\x20be\x20'+'created\x20in'+'stead\x20of\x20'+_0x400085+'.'),_0x3cbf81=new _e(_0x27f770,{'width':0x4,'height':0x4,'format':Cr,'name':'dds-legacy'+'-empty'}),_0x3cbf81;_0x3cbf81=new _e(_0x27f770,{'name':_0x400085,'profilerHint':Pr,'addressU':_0x314ea7?ue:yt,'addressV':_0x314ea7?ue:yt,'width':_0x345ecf,'height':_0x29ee50,'format':_0x52d266,'cubemap':_0x314ea7,'mipmaps':_0x40814a>-0x42f*0x9+0x11c5*0x1+-0x1*-0x13e3,..._0x5e9c06});let _0x493de5=0x107*-0x25+-0x265*0x7+0x587*0xa;const _0x1e9d21=_0x314ea7?0x1*-0x14a4+-0x36c*-0x2+0xdd2:0x148f+0x2295+-0x3723;let _0x2c54c8;const _0x2df99a=-0x1f*-0x111+-0xf*0x6b+-0x1*0x1ac6,_0x4d3af5=-0x171e+0x1*0x8a7+0xe7b,_0x257a1e=_0x32d842===_0x27d410?-0x5ff+-0x3e2+0x9e9*0x1:0x2*-0x86+0x21d4+-0x20b8;let _0x997dfd,_0x447e5d,_0x9a4d03;for(let _0x225b65=0x2c7*0x3+-0x1b75+-0x1320*-0x1;_0x225b65<_0x1e9d21;_0x225b65++){let _0x25555e=_0x345ecf,_0x50f069=_0x29ee50;for(let _0x200ed9=-0xd+-0xf29*0x2+0x1e5f;_0x200ed9<_0x40814a;_0x200ed9++){_0x5e63af?_0x1b5510?_0x2c54c8=Math['floor']((_0x25555e+(-0xf*0x15d+-0x19af+0x2e25))/(0x25*-0x33+0x227b+-0x66*0x44))*Math['floor']((_0x50f069+(-0x20c9+0x1fd9*-0x1+0x40a5))/(-0xd39+-0x680+0x1f*0xa3))*(-0x1f43+0x1ebb+0x90):_0x35fbec?_0x2c54c8=Math['max'](_0x25555e,-0x1*0x149b+-0xdff+0x22aa)*Math['max'](_0x50f069,0x1*0x1f63+-0x11*-0x24b+-0x6*0xbb9)/(-0x1fb7+0x307+0xe5a*0x2):_0x144942?_0x2c54c8=Math['max'](_0x25555e,0x34*-0x88+0xb5*0x33+-0x1*0x867)*Math['max'](_0x50f069,0xb*0x2c5+-0x12f*0x11+-0xa50)/(-0x1145*0x2+-0x41*-0x14+0x75e*0x4):(_0x997dfd=Math['floor']((_0x25555e+_0x2df99a-(-0x49*0x4b+0xe63+0xa3*0xb))/_0x2df99a),_0x447e5d=Math['floor']((_0x50f069+_0x4d3af5-(0x1e1e+-0x5*0x506+-0x4ff))/_0x4d3af5),_0x9a4d03=_0x997dfd*_0x447e5d,_0x2c54c8=_0x9a4d03*_0x257a1e):_0x2c54c8=_0x25555e*_0x50f069*(0x1c4d+0x2*0xd06+-0x3655);const _0x1e9411=_0x52d266===Xt?new Float32Array(_0x17ce3f,_0x493de5,_0x2c54c8):_0x52d266===nt?new Uint16Array(_0x17ce3f,_0x493de5,_0x2c54c8):new Uint8Array(_0x17ce3f,_0x493de5,_0x2c54c8);_0x314ea7?(_0x3cbf81['_levels'][_0x200ed9]||(_0x3cbf81['_levels'][_0x200ed9]=[]),_0x3cbf81['_levels'][_0x200ed9][_0x225b65]=_0x1e9411):_0x3cbf81['_levels'][_0x200ed9]=_0x1e9411,_0x493de5+=_0x2c54c8*_0x37ba4c,_0x25555e=Math['max'](_0x25555e*(-0x1c9c+-0x89*-0xf+-0xb*-0x1df+0.5),-0x1*-0x2191+0x36d*-0x1+-0x1e23),_0x50f069=Math['max'](_0x50f069*(0xaac+0x117+0x1*-0xbc3+0.5),-0x2319+-0x1747*-0x1+0xbd3);}}return _0x3cbf81['upload'](),_0x3cbf81;}}class rU extends eo{constructor(_0x4a0590){super(),this['maxRetries']=-0x925+0xe16+-0x4f1;}['load'](_0x14d2bf,_0x6cd1cd,_0x4aa391){pe['fetchArray'+'Buffer'](_0x14d2bf['load'],_0x6cd1cd,_0x4aa391,this['maxRetries']),_0x4aa391['data']&&!_0x4aa391['data']['type']&&(_0x4aa391['data']['type']=mh);}['open'](_0x1cf035,_0xdf4c11,_0x3bad9f,_0x14eb37={}){const _0x4cb72a=this['parse'](_0xdf4c11);if(!_0x4cb72a)return null;const _0x51ba2b=new _e(_0x3bad9f,{'name':_0x1cf035,'profilerHint':Pr,'addressU':yt,'addressV':ue,'minFilter':Te,'magFilter':Te,'width':_0x4cb72a['width'],'height':_0x4cb72a['height'],'levels':_0x4cb72a['levels'],'format':Ne,'type':mh,'mipmaps':!(0x23e6+-0x329*-0x8+-0x3d2d),..._0x14eb37});return _0x51ba2b['upload'](),_0x51ba2b;}['parse'](_0x48f804){const _0x6d5fcb=new KS(_0x48f804);if(!_0x6d5fcb['readLine']()['startsWith']('#?RADIANCE'))return w['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20ma'+'gic'),null;const _0x228b63={};for(;;){const _0x1d1359=_0x6d5fcb['readLine']();if(_0x1d1359['length']===0xce*0x2f+0x65+0x9*-0x43f)break;{const _0x4d019f=_0x1d1359['split']('=');_0x4d019f['length']===-0x22a6+-0x1306+0x35ae*0x1&&(_0x228b63[_0x4d019f[0x1f*0xc5+-0xd1d+0x5*-0x226]]=_0x4d019f[-0x42d+-0xe87+0x12b5]);}}if(!_0x228b63['hasOwnProp'+'erty']('FORMAT'))return w['error']('radiance\x20h'+'eader\x20miss'+'ing\x20FORMAT'+'\x20variable'),null;const _0x2be6eb=_0x6d5fcb['readLine']()['split']('\x20');if(_0x2be6eb['length']!==0xd*0xfd+0x7*0x409+-0x2914)return w['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20re'+'solution'),null;const _0xf4eb6a=parseInt(_0x2be6eb[-0x9be*0x3+0x23*-0x17+0x2060],-0x66+-0x269c+0x270c),_0x20f1ad=parseInt(_0x2be6eb[0x3*0x482+0xc9a+0xbf*-0x23],0x1ad*-0x2+0x88f+-0x9*0x93),_0x2d1d73=this['_readPixel'+'s'](_0x6d5fcb,_0x20f1ad,_0xf4eb6a,_0x2be6eb[0xdb0+-0x1*0x1b49+0xd99]==='-Y');return _0x2d1d73?{'width':_0x20f1ad,'height':_0xf4eb6a,'levels':[_0x2d1d73]}:null;}['_readPixel'+'s'](_0x5a9d9f,_0x257fd9,_0x1ad554,_0x288879){if(_0x257fd9<-0x19*0xcc+-0x1c*0xe0+0x163a*0x2||_0x257fd9>-0x1*-0x7d8d+0x4*-0x37af+0xe12e)return this['_readPixel'+'sFlat'](_0x5a9d9f,_0x257fd9,_0x1ad554);const _0x12edab=[0xe00+0xb29+-0x1929,0x8c8*0x4+0x1*0x2236+-0x4556,-0x49a+-0x137e+0x1818*0x1,-0x139d*0x1+-0x1e39+0x1*0x31d6];if(_0x5a9d9f['readArray'](_0x12edab),_0x12edab[-0x7*-0x3fa+0xc17+0x27ed*-0x1]!==-0x23d7+-0x3eb*0x5+0x4*0xddc||_0x12edab[0xf8*0x4+-0x1241+0xe62]!==-0x1*0x1627+0x1bcc+-0x6f*0xd||(_0x12edab[-0x2b*0xe6+0x2e4+0x23c0]&0x1330+-0x4*0x4f4+0x120)!==-0x13be+-0x1546+-0x32*-0xd2)return _0x5a9d9f['skip'](-(0x15*0x1+0x1941+-0x39e*0x7)),this['_readPixel'+'sFlat'](_0x5a9d9f,_0x257fd9,_0x1ad554);const _0x10a640=new ArrayBuffer(_0x257fd9*_0x1ad554*(-0x2*-0x7bf+-0x2*-0x49e+0x2*-0xc5b)),_0x499606=new Uint8Array(_0x10a640);let _0x478397=_0x288879?0x1*-0x22bd+0x13e3+-0x1*-0xeda:_0x257fd9*(0x18cf+-0x25ca+0xcff)*(_0x1ad554-(0x2151+0x6e8*-0x5+-0x8*-0x27)),_0x11d7fa,_0xa848b7,_0x315282,_0x136cce,_0x29a017,_0x252c96;for(_0xa848b7=-0x7*0x329+0x2088+-0xa69;_0xa848b7<_0x1ad554;++_0xa848b7){if(_0xa848b7&&_0x5a9d9f['readArray'](_0x12edab),(_0x12edab[0xd*0xd3+0x170b+-0x21c0]<<0xe3*-0x19+0x340+0x12f3)+_0x12edab[-0x66d+-0x14f+-0x295*-0x3]!==_0x257fd9)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'width'),null;for(_0x136cce=0x1ea3+-0x1faf*0x1+0x10c;_0x136cce<0x1b03+-0x1417+-0x6e8;++_0x136cce)for(_0x11d7fa=0x528+-0xb2b+0x51*0x13;_0x11d7fa<_0x257fd9;)if(_0x29a017=_0x5a9d9f['readU8'](),_0x29a017>0x31*-0x20+0x15d3+-0x1*0xf33){if(_0x29a017-=-0x1bbb+-0x25*-0xe8+-0x54d,_0x11d7fa+_0x29a017>_0x257fd9)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x252c96=_0x5a9d9f['readU8'](),_0x315282=0x1853+-0x3f5*-0x9+-0x3bf0;_0x315282<_0x29a017;++_0x315282)_0x499606[_0x478397+_0x136cce+(-0x2252*0x1+0x11*0xf3+0x1*0x1233)*_0x11d7fa++]=_0x252c96;}else{if(_0x29a017===0x19e*-0x1+-0x1*-0xcb5+-0xb17||_0x11d7fa+_0x29a017>_0x257fd9)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x315282=-0xb*0xbf+0x6*-0x5ad+-0x1f*-0x15d;_0x315282<_0x29a017;++_0x315282)_0x499606[_0x478397+_0x136cce+(-0xdd5*-0x1+-0xa1f+0x16*-0x2b)*_0x11d7fa++]=_0x5a9d9f['readU8']();}_0x478397+=_0x257fd9*(-0x1944+0x4f4*-0x2+0x2330)*(_0x288879?-0x1*0x1a23+-0x1*-0x18ed+-0x137*-0x1:-(0x63d+0xb8f+-0x38f*0x5));}return _0x499606;}['_readPixel'+'sFlat'](_0x44bedf,_0x2d88a5,_0xae0911){return _0x44bedf['remainingB'+'ytes']===_0x2d88a5*_0xae0911*(-0x2*0x350+-0x1f11+0x25b5)?new Uint8Array(_0x44bedf['arraybuffe'+'r'],_0x44bedf['offset']):null;}}const TS={'repeat':yt,'clamp':ue,'mirror':ip},wS={'nearest':Te,'linear':vt,'nearest_mip_nearest':Kh,'linear_mip_nearest':Qh,'nearest_mip_linear':Zh,'linear_mip_linear':ma},aU={'default':Ds,'rgbm':Zi,'rgbe':mh,'rgbp':Qo,'swizzleGGGR':Jo},nU=function(_0x5a9460){const _0x2996f6=Xi['calcMipLev'+'elsCount'](_0x5a9460['_width'],_0x5a9460['_height']),_0x14a596=function(_0x1790c6){return _0x1790c6 instanceof HTMLCanvasElement||_0x1790c6 instanceof HTMLImageElement||_0x1790c6 instanceof HTMLVideoElement;};if(!(_0x5a9460['_format']===Ne||_0x5a9460['_format']===Xt)||_0x5a9460['_volume']||_0x5a9460['_compresse'+'d']||_0x5a9460['_levels']['length']===0x1a*0x107+0x16*0x161+-0x390b||_0x5a9460['_levels']['length']===_0x2996f6||_0x14a596(_0x5a9460['_cubemap']?_0x5a9460['_levels'][-0xfe8+0x12bb+-0x2d3][-0x2*-0x6a3+0xeb0+-0x1bf6]:_0x5a9460['_levels'][0x1e37+-0xf1c+0x509*-0x3]))return;const _0x30fd53=function(_0x364497,_0x577699,_0x148a70){const _0x552879=Math['max'](-0x11bd+-0x8c9*0x2+-0x8*-0x46a,_0x364497>>0x1559*-0x1+-0x835+-0x149*-0x17),_0x4c473d=Math['max'](-0x1738+-0x2*-0xb49+0x1*0xa7,_0x577699>>0x16*-0xd6+-0xc*0x1fd+-0x175*-0x1d),_0xf8bf34=new _0x148a70['constructo'+'r'](_0x552879*_0x4c473d*(-0xb54+-0x713+-0x29*-0x73)),_0xe96c54=Math['floor'](_0x364497/_0x552879),_0x53b949=Math['floor'](_0x577699/_0x4c473d),_0x2a848a=_0xe96c54*_0x53b949;for(let _0x1fc7ec=0x1*-0x15e5+-0x1*0x1850+-0x1*-0x2e35;_0x1fc7ec<_0x4c473d;++_0x1fc7ec)for(let _0x489ffa=-0x4d7+-0x1*0x2149+-0xa*-0x3d0;_0x489ffa<_0x552879;++_0x489ffa)for(let _0xa37875=-0x1701+0x1*0x1df+-0xa*-0x21d;_0xa37875<0x5*0x165+0x1f79+-0x266e;++_0xa37875){let _0x41deed=0x12e7+-0x1d91+0xaaa;for(let _0x5812db=-0x2037+-0x4*0x6f+0x21f3;_0x5812db<_0x53b949;++_0x5812db)for(let _0x1a8a43=-0x239f+0x23b8+0x5*-0x5;_0x1a8a43<_0xe96c54;++_0x1a8a43)_0x41deed+=_0x148a70[(_0x489ffa*_0xe96c54+_0x1a8a43+(_0x1fc7ec*_0x53b949+_0x5812db)*_0x364497)*(-0x6*-0x5a4+-0x427*0x6+-0x8ea)+_0xa37875];_0xf8bf34[(_0x489ffa+_0x1fc7ec*_0x552879)*(-0x82e+-0x14b*-0xf+-0xb33)+_0xa37875]=_0x41deed/_0x2a848a;}return _0xf8bf34;};for(let _0x31f01e=_0x5a9460['_levels']['length'];_0x31f01e<_0x2996f6;++_0x31f01e){const _0xc7a6a1=Math['max'](0x173a+-0x1*0xdf3+0x946*-0x1,_0x5a9460['_width']>>_0x31f01e-(0x1259+-0xb47*-0x3+0x169*-0x25)),_0x230fe5=Math['max'](0x25*0xd8+-0x5e*0x1b+-0x154d,_0x5a9460['_height']>>_0x31f01e-(0xb5*-0x29+-0x187+0x1e85));if(_0x5a9460['_cubemap']){const _0x1fcc83=[];for(let _0xdd1b39=-0x1*-0x1d+0x1*0x2a5+-0x2c2;_0xdd1b39<0x223f+-0x1*-0x1d+-0x125*0x1e;++_0xdd1b39)_0x1fcc83['push'](_0x30fd53(_0xc7a6a1,_0x230fe5,_0x5a9460['_levels'][_0x31f01e-(0x254b+0x1*-0x5d1+0x1*-0x1f79)][_0xdd1b39]));_0x5a9460['_levels']['push'](_0x1fcc83);}else _0x5a9460['_levels']['push'](_0x30fd53(_0xc7a6a1,_0x230fe5,_0x5a9460['_levels'][_0x31f01e-(-0x26df+-0x21c+-0xa3f*-0x4)]));}_0x5a9460['_levelsUpd'+'ated']=_0x5a9460['_cubemap']?[[!(0xa*0x146+-0xb*-0x189+-0x1d9f*0x1),!(-0xa*-0x2+-0x942*0x1+-0x497*-0x2),!(-0x2524+0x22f1*-0x1+0x1807*0x3),!(-0x1*0x755+0x1904*-0x1+0x2059),!(-0x26*0x49+0x133d*-0x1+0x1e13*0x1),!(-0x6df+0x9ac+-0x2cd)]]:[!(-0x953*0x2+-0x19d*0xb+0x4d*0x79)];};class oU extends Qe{constructor(_0x1ba0fc){super(_0x1ba0fc,'texture');const _0x5d40a9=_0x1ba0fc['assets'],_0x5a92d1=_0x1ba0fc['graphicsDe'+'vice'];this['_device']=_0x5a92d1,this['_assets']=_0x5d40a9,this['imgParser']=new Zk(_0x5d40a9,_0x5a92d1),this['parsers']={'dds':new iU(_0x5d40a9),'ktx':new eU(_0x5d40a9),'ktx2':new sU(_0x5d40a9,_0x5a92d1),'basis':new qk(_0x5d40a9,_0x5a92d1),'hdr':new rU(_0x5d40a9)};}set['crossOrigi'+'n'](_0x5f0fca){this['imgParser']['crossOrigi'+'n']=_0x5f0fca;}get['crossOrigi'+'n'](){return this['imgParser']['crossOrigi'+'n'];}set['maxRetries'](_0x498d2d){this['imgParser']['maxRetries']=_0x498d2d;for(const _0x5e5339 in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x5e5339)&&(this['parsers'][_0x5e5339]['maxRetries']=_0x498d2d);}get['maxRetries'](){return this['imgParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x502eeb){return _0x502eeb['indexOf']('?')>=0x4*0x7aa+-0x88c+-0xa*0x236?_0x502eeb['split']('?')[0x26ad+0x2024+-0x46d1]:_0x502eeb;}['_getParser'](_0x121e4b){const _0x45dfa9=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x121e4b))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x45dfa9]||this['imgParser'];}['_getTextur'+'eOptions'](_0x27d9a1){var _0x114477;const _0x5b5cb4={'profilerHint':Pr};if(_0x27d9a1){((_0x114477=_0x27d9a1['name'])==null?void(-0x1807+-0x107*0x3+0x1b1c):_0x114477['length'])>-0x2685+-0x2168+0x47ed&&(_0x5b5cb4['name']=_0x27d9a1['name']);const _0x280b05=_0x27d9a1['data'];_0x280b05['hasOwnProp'+'erty']('minfilter')&&(_0x5b5cb4['minFilter']=wS[_0x280b05['minfilter']]),_0x280b05['hasOwnProp'+'erty']('magfilter')&&(_0x5b5cb4['magFilter']=wS[_0x280b05['magfilter']]),_0x280b05['hasOwnProp'+'erty']('addressu')&&(_0x5b5cb4['addressU']=TS[_0x280b05['addressu']]),_0x280b05['hasOwnProp'+'erty']('addressv')&&(_0x5b5cb4['addressV']=TS[_0x280b05['addressv']]),_0x280b05['hasOwnProp'+'erty']('mipmaps')&&(_0x5b5cb4['mipmaps']=_0x280b05['mipmaps']),_0x280b05['hasOwnProp'+'erty']('anisotropy')&&(_0x5b5cb4['anisotropy']=_0x280b05['anisotropy']),_0x280b05['hasOwnProp'+'erty']('flipY')&&(_0x5b5cb4['flipY']=!!_0x280b05['flipY']),_0x280b05['hasOwnProp'+'erty']('srgb')&&(_0x5b5cb4['srgb']=!!_0x280b05['srgb']),_0x5b5cb4['type']=Ds,_0x280b05['hasOwnProp'+'erty']('type')?_0x5b5cb4['type']=aU[_0x280b05['type']]:_0x280b05['hasOwnProp'+'erty']('rgbm')&&_0x280b05['rgbm']?_0x5b5cb4['type']=Zi:_0x27d9a1['file']&&(_0x27d9a1['file']['opt']&-0x6e7+0x7*0x4f+0x5e*0xd)!==-0xbe6+-0x3*0x45d+-0x18fd*-0x1&&(_0x5b5cb4['type']=Jo);}return _0x5b5cb4;}['load'](_0x2d9a0c,_0x5ba3ad,_0x22182f){typeof _0x2d9a0c=='string'&&(_0x2d9a0c={'load':_0x2d9a0c,'original':_0x2d9a0c}),this['_getParser'](_0x2d9a0c['original'])['load'](_0x2d9a0c,_0x5ba3ad,_0x22182f);}['open'](_0x5eaa55,_0x4c719e,_0x76264){if(!_0x5eaa55)return;const _0x45d5ba=this['_getTextur'+'eOptions'](_0x76264);let _0x29d74b=this['_getParser'](_0x5eaa55)['open'](_0x5eaa55,_0x4c719e,this['_device'],_0x45d5ba);return _0x29d74b===null?_0x29d74b=new _e(this['_device'],{'width':0x4,'height':0x4,'format':Cr}):(nU(_0x29d74b),_0x4c719e['unswizzled'+'GGGR']&&(_0x76264['file']['variants']['basis']['opt']&=-(0x7a3+-0x18d*0xb+0x10d*0x9))),_0x29d74b;}['patch'](_0x43fe65,_0x1648a4){const _0x18207b=_0x43fe65['resource'];if(!_0x18207b)return;const _0x2f1061=this['_getTextur'+'eOptions'](_0x43fe65);for(const _0x5e054d of Object['keys'](_0x2f1061))_0x18207b[_0x5e054d]=_0x2f1061[_0x5e054d];}}const lU='inline',cU='immersive-'+'vr',$o='immersive-'+'ar',ES='viewer',hU='left',dU='cpu-optimi'+'zed',P0='gpu-optimi'+'zed',M0='luminance-'+'alpha',D0='unsigned-s'+'hort',I0='float32';class fU{constructor(_0x502722){h(this,'_manager'),h(this,'_supported',Ae['browser']&&!!window['XRDOMOverl'+'ayState']),h(this,'_root',null),this['_manager']=_0x502722;}get['supported'](){return this['_supported'];}get['available'](){return this['_supported']&&this['_manager']['active']&&this['_manager']['_session']['domOverlay'+'State']!==null;}get['state'](){return!this['_supported']||!this['_manager']['active']||!this['_manager']['_session']['domOverlay'+'State']?null:this['_manager']['_session']['domOverlay'+'State']['type'];}set['root'](_0x7d6a11){!this['_supported']||this['_manager']['active']||(this['_root']=_0x7d6a11);}get['root'](){return this['_root'];}}const Rc=[],bS=[];class ju extends me{constructor(_0x7c5b27,_0x453d3a,_0x51931d,_0x42204e=null){super(),h(this,'manager'),h(this,'_xrHitTest'+'Source'),h(this,'_transient'),h(this,'_inputSour'+'ce'),(this['manager']=_0x7c5b27,this['_xrHitTest'+'Source']=_0x453d3a,this['_transient']=_0x51931d,this['_inputSour'+'ce']=_0x42204e);}['remove'](){if(!this['_xrHitTest'+'Source'])return;const _0x44b143=this['manager']['hitTest']['sources'],_0x1dfeb5=_0x44b143['indexOf'](this);_0x1dfeb5!==-(-0x2*0x515+-0x1*-0x172a+-0xcff*0x1)&&_0x44b143['splice'](_0x1dfeb5,0x2*0xad1+0x1a5*-0x10+0x4af),this['onStop']();}['onStop'](){this['_xrHitTest'+'Source']['cancel'](),this['_xrHitTest'+'Source']=null,this['fire']('remove'),this['manager']['hitTest']['fire']('remove',this);}['update'](_0xcfeb54){if(this['_transient']){const _0x34612d=_0xcfeb54['getHitTest'+'ResultsFor'+'TransientI'+'nput'](this['_xrHitTest'+'Source']);for(let _0x585f76=0x20e5+-0x14d9+-0xc0c;_0x585f76<_0x34612d['length'];_0x585f76++){const _0x1f10d7=_0x34612d[_0x585f76];if(!_0x1f10d7['results']['length'])continue;let _0x5074b7;_0x1f10d7['inputSourc'+'e']&&(_0x5074b7=this['manager']['input']['_getByInpu'+'tSource'](_0x1f10d7['inputSourc'+'e'])),this['updateHitR'+'esults'](_0x1f10d7['results'],_0x5074b7);}}else{const _0x1b8eef=_0xcfeb54['getHitTest'+'Results'](this['_xrHitTest'+'Source']);if(!_0x1b8eef['length'])return;this['updateHitR'+'esults'](_0x1b8eef);}}['updateHitR'+'esults'](_0x4c39db,_0x3bee7c){if(this['_inputSour'+'ce']&&this['_inputSour'+'ce']!==_0x3bee7c)return;const _0x5b06a6=Rc['pop']()??new D();_0x3bee7c?_0x5b06a6['copy'](_0x3bee7c['getOrigin']()):_0x5b06a6['copy'](this['manager']['camera']['getPositio'+'n']());let _0x19fc94=(0xfc7*-0x1+-0x10fb+-0x1*-0x20c3)/(-0x7c7+-0x1*-0xb38+-0x371),_0x134a06=null;const _0x1baadc=Rc['pop']()??new D(),_0x81fdff=bS['pop']()??new le();for(let _0x5c6c40=0x1*0x2421+0x8*-0x2ed+-0xcb9;_0x5c6c40<_0x4c39db['length'];_0x5c6c40++){const _0x2e3a70=_0x4c39db[_0x5c6c40]['getPose'](this['manager']['_reference'+'Space']),_0x48ee2d=_0x5b06a6['distance'](_0x2e3a70['transform']['position']);_0x48ee2d>=_0x19fc94||(_0x19fc94=_0x48ee2d,_0x134a06=_0x4c39db[_0x5c6c40],_0x1baadc['copy'](_0x2e3a70['transform']['position']),_0x81fdff['copy'](_0x2e3a70['transform']['orientatio'+'n']));}this['fire']('result',_0x1baadc,_0x81fdff,_0x3bee7c||this['_inputSour'+'ce'],_0x134a06),this['manager']['hitTest']['fire']('result',this,_0x1baadc,_0x81fdff,_0x3bee7c||this['_inputSour'+'ce'],_0x134a06),Rc['push'](_0x5b06a6),Rc['push'](_0x1baadc),bS['push'](_0x81fdff);}}h(ju,'EVENT_REMO'+'VE','remove'),h(ju,'EVENT_RESU'+'LT','result');class jr extends me{constructor(_0x1ab8ff){super(),h(this,'manager'),h(this,'_supported',Ae['browser']&&!!(window['XRSession']&&window['XRSession']['prototype']['requestHit'+'TestSource'])),h(this,'_available',!(-0x40*-0x52+0x2*0x77+-0x156d)),h(this,'_checkingA'+'vailabilit'+'y',!(0x1ced+-0x4*-0x75a+0xe95*-0x4)),h(this,'sources',[]),(this['manager']=_0x1ab8ff,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){if(this['manager']['session']['enabledFea'+'tures']){const _0x35ae5a=this['manager']['session']['enabledFea'+'tures']['indexOf']('hit-test')!==-(-0x21*-0xf2+0x256a+-0x547*0xd);if(!_0x35ae5a)return;this['_available']=_0x35ae5a,this['fire']('available');}else this['_checkingA'+'vailabilit'+'y']||(this['_checkingA'+'vailabilit'+'y']=!(0x19a5+0x519+-0x1ebe),this['manager']['session']['requestRef'+'erenceSpac'+'e'](ES)['then'](_0x52acaf=>{this['manager']['session']['requestHit'+'TestSource']({'space':_0x52acaf})['then'](_0x56fe42=>{_0x56fe42['cancel'](),this['manager']['active']&&(this['_available']=!(-0x2447+0x3*-0x6df+-0xe39*-0x4),this['fire']('available'));})['catch'](()=>{});})['catch'](()=>{}));}['_onSession'+'End'](){if(this['_available']){this['_available']=!(0x1*-0x1a5a+0x130e+0x74d);for(let _0x4d705a=-0x138f*-0x1+0xcdf+-0x206e;_0x4d705a<this['sources']['length'];_0x4d705a++)this['sources'][_0x4d705a]['onStop']();this['sources']=[],this['fire']('unavailabl'+'e');}}['start'](_0x19787a={}){var _0x4c774f,_0xc5831b;if(!this['_supported']){(_0x4c774f=_0x19787a['callback'])==null||_0x4c774f['call'](_0x19787a,new Error('XR\x20HitTest'+'\x20is\x20not\x20su'+'pported'),null);return;}if(!this['_available']){(_0xc5831b=_0x19787a['callback'])==null||_0xc5831b['call'](_0x19787a,new Error('XR\x20HitTest'+'\x20is\x20not\x20av'+'ailable'),null);return;}!_0x19787a['profile']&&!_0x19787a['spaceType']&&(_0x19787a['spaceType']=ES);let _0x16128b;const _0x53dcb6=_0x19787a['offsetRay'];if(_0x53dcb6){const _0x133e1d=new DOMPoint(_0x53dcb6['origin']['x'],_0x53dcb6['origin']['y'],_0x53dcb6['origin']['z'],0x2428+-0x7a*-0xf+0x2e3*-0xf),_0x16d95f=new DOMPoint(_0x53dcb6['direction']['x'],_0x53dcb6['direction']['y'],_0x53dcb6['direction']['z'],-0x2*0x652+-0x21b3+0x2e57);_0x16128b=new XRRay(_0x133e1d,_0x16d95f);}const _0x47006e=_0x19787a['callback'];_0x19787a['spaceType']?this['manager']['session']['requestRef'+'erenceSpac'+'e'](_0x19787a['spaceType'])['then'](_0x14a383=>{if(!this['manager']['session']){const _0x4f25e8=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(2)');_0x47006e&&_0x47006e(_0x4f25e8),this['fire']('error',_0x4f25e8);return;}this['manager']['session']['requestHit'+'TestSource']({'space':_0x14a383,'entityTypes':_0x19787a['entityType'+'s']||void(-0x10bb+-0x1*0x785+-0x308*-0x8),'offsetRay':_0x16128b})['then'](_0x351c83=>{this['_onHitTest'+'Source'](_0x351c83,!(-0x1a9a+-0x390*-0x3+0x32f*0x5),_0x19787a['inputSourc'+'e'],_0x47006e);})['catch'](_0x4d7c6e=>{_0x47006e&&_0x47006e(_0x4d7c6e),this['fire']('error',_0x4d7c6e);});})['catch'](_0x5017b5=>{_0x47006e&&_0x47006e(_0x5017b5),this['fire']('error',_0x5017b5);}):this['manager']['session']['requestHit'+'TestSource'+'ForTransie'+'ntInput']({'profile':_0x19787a['profile'],'entityTypes':_0x19787a['entityType'+'s']||void(0x1209+-0x1*-0xbf7+-0x1e00),'offsetRay':_0x16128b})['then'](_0x24bdcc=>{this['_onHitTest'+'Source'](_0x24bdcc,!(-0x380*-0x2+0x1*0x1c8e+-0x7b*0x4a),_0x19787a['inputSourc'+'e'],_0x47006e);})['catch'](_0x41588d=>{_0x47006e&&_0x47006e(_0x41588d),this['fire']('error',_0x41588d);});}['_onHitTest'+'Source'](_0x3a4f55,_0x203b46,_0x1f8486,_0x5c4fef){if(!this['manager']['session']){_0x3a4f55['cancel']();const _0x43f4ad=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(3)');_0x5c4fef&&_0x5c4fef(_0x43f4ad),this['fire']('error',_0x43f4ad);return;}const _0xfb5ffc=new ju(this['manager'],_0x3a4f55,_0x203b46,_0x1f8486??null);this['sources']['push'](_0xfb5ffc),_0x5c4fef&&_0x5c4fef(null,_0xfb5ffc),this['fire']('add',_0xfb5ffc);}['update'](_0x4f4000){if(this['_available']){for(let _0x5acb8b=0x12*-0xbc+0xdbd*-0x2+0x2*0x1459;_0x5acb8b<this['sources']['length'];_0x5acb8b++)this['sources'][_0x5acb8b]['update'](_0x4f4000);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}}h(jr,'EVENT_AVAI'+'LABLE','available'),h(jr,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(jr,'EVENT_ADD','add'),h(jr,'EVENT_REMO'+'VE','remove'),h(jr,'EVENT_RESU'+'LT','result'),h(jr,'EVENT_ERRO'+'R','error');class Yu extends me{constructor(_0x304a5e,_0x1bac7c){super(),h(this,'_image'),h(this,'_width'),h(this,'_bitmap',null),h(this,'_measuredW'+'idth',-0x58e+-0x559+0xae7),h(this,'_trackable',!(0x1436*-0x1+0x8*-0x1fc+0x2417)),h(this,'_tracking',!(-0x492+0xe3c+-0x1*0x9a9)),h(this,'_emulated',!(-0x872*-0x1+0x14f*-0x13+0x106c)),h(this,'_pose',null),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_image']=_0x304a5e,this['_width']=_0x1bac7c);}get['image'](){return this['_image'];}set['width'](_0x1fd1fe){this['_width']=_0x1fd1fe;}get['width'](){return this['_width'];}get['trackable'](){return this['_trackable'];}get['tracking'](){return this['_tracking'];}get['emulated'](){return this['_emulated'];}['prepare'](){return this['_bitmap']?{'image':this['_bitmap'],'widthInMeters':this['_width']}:createImageBitmap(this['_image'])['then'](_0x53c613=>(this['_bitmap']=_0x53c613,{'image':this['_bitmap'],'widthInMeters':this['_width']}));}['destroy'](){this['_image']=null,this['_pose']=null,this['_bitmap']&&(this['_bitmap']['close'](),this['_bitmap']=null);}['getPositio'+'n'](){return this['_pose']&&this['_position']['copy'](this['_pose']['transform']['position']),this['_position'];}['getRotatio'+'n'](){return this['_pose']&&this['_rotation']['copy'](this['_pose']['transform']['orientatio'+'n']),this['_rotation'];}}h(Yu,'EVENT_TRAC'+'KED','tracked'),h(Yu,'EVENT_UNTR'+'ACKED','untracked');class L0 extends me{constructor(_0x4f9bc6){super(),h(this,'_manager'),h(this,'_supported',Ae['browser']&&!!window['XRImageTra'+'ckingResul'+'t']),h(this,'_available',!(0x203b+0x25e8+-0x4622)),h(this,'_images',[]),(this['_manager']=_0x4f9bc6,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['add'](_0x4d5d44,_0x1a4a99){if(!this['_supported']||this['_manager']['active'])return null;const _0x3006a9=new Yu(_0x4d5d44,_0x1a4a99);return this['_images']['push'](_0x3006a9),_0x3006a9;}['remove'](_0x13f77a){if(this['_manager']['active'])return;const _0x26e5b2=this['_images']['indexOf'](_0x13f77a);_0x26e5b2!==-(-0x172f+0x2497+-0xd67)&&(_0x13f77a['destroy'](),this['_images']['splice'](_0x26e5b2,0x244d*0x1+-0xf9c*-0x1+-0x16*0x25c));}['_onSession'+'Start'](){this['_manager']['session']['getTracked'+'ImageScore'+'s']()['then'](_0x5ed53e=>{this['_available']=!(-0xfd*0x27+-0x1913+0x3f9e);for(let _0x12dce6=0xf9d*-0x1+-0xba5*0x1+0x1b42;_0x12dce6<_0x5ed53e['length'];_0x12dce6++)this['_images'][_0x12dce6]['_trackable']=_0x5ed53e[_0x12dce6]==='trackable';})['catch'](_0x25ebb0=>{this['_available']=!(-0xcf*0x1d+-0x1*0x5c9+-0x3*-0x9bf),this['fire']('error',_0x25ebb0);});}['_onSession'+'End'](){this['_available']=!(-0x3*-0x1a2+-0xe59+-0xa*-0xf2);for(let _0x266602=0x1*-0x26b1+0x29c*-0x7+-0x38f5*-0x1;_0x266602<this['_images']['length'];_0x266602++){const _0x51e30c=this['_images'][_0x266602];_0x51e30c['_pose']=null,_0x51e30c['_measuredW'+'idth']=0x17a1*-0x1+-0x670+0x1*0x1e11,_0x51e30c['_tracking']&&(_0x51e30c['_tracking']=!(0x1ed3*0x1+0x20a6+-0x3f78),_0x51e30c['fire']('untracked'));}}['prepareIma'+'ges'](_0x3aa4b3){this['_images']['length']?Promise['all'](this['_images']['map'](_0x186131=>_0x186131['prepare']()))['then'](_0x5c0aab=>{_0x3aa4b3(null,_0x5c0aab);})['catch'](_0x155c88=>{_0x3aa4b3(_0x155c88,null);}):_0x3aa4b3(null,null);}['update'](_0x1c8388){if(!this['_available'])return;const _0x4fc763=_0x1c8388['getImageTr'+'ackingResu'+'lts'](),_0xb51c42={};for(let _0x37baeb=-0x448*-0x8+-0x2fe*-0x1+0xe3*-0x2a;_0x37baeb<_0x4fc763['length'];_0x37baeb++){_0xb51c42[_0x4fc763[_0x37baeb]['index']]=_0x4fc763[_0x37baeb];const _0x387c80=this['_images'][_0x4fc763[_0x37baeb]['index']];_0x387c80['_emulated']=_0x4fc763[_0x37baeb]['trackingSt'+'ate']==='emulated',_0x387c80['_measuredW'+'idth']=_0x4fc763[_0x37baeb]['measuredWi'+'dthInMeter'+'s'],_0x387c80['_pose']=_0x1c8388['getPose'](_0x4fc763[_0x37baeb]['imageSpace'],this['_manager']['_reference'+'Space']);}for(let _0x3ec8cf=-0x3*-0xc41+-0x10f3*-0x2+-0x46a9*0x1;_0x3ec8cf<this['_images']['length'];_0x3ec8cf++)this['_images'][_0x3ec8cf]['_tracking']&&!_0xb51c42[_0x3ec8cf]?(this['_images'][_0x3ec8cf]['_tracking']=!(-0x1d7+0xf*-0x145+0x14e3),this['_images'][_0x3ec8cf]['fire']('untracked')):!this['_images'][_0x3ec8cf]['_tracking']&&_0xb51c42[_0x3ec8cf]&&(this['_images'][_0x3ec8cf]['_tracking']=!(-0x14b1*-0x1+0x15*-0x45+-0xf08),this['_images'][_0x3ec8cf]['fire']('tracked'));}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['images'](){return this['_images'];}}h(L0,'EVENT_ERRO'+'R','error');class uU{constructor(_0x196b26,_0x5d2da1){h(this,'_index'),h(this,'_hand'),h(this,'_joints',[]),h(this,'_tip',null),(this['_index']=_0x196b26,this['_hand']=_0x5d2da1,this['_hand']['_fingers']['push'](this));}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['joints'](){return this['_joints'];}get['tip'](){return this['_tip'];}}const AS=Ae['browser']&&window['XRHand']?['thumb-tip','index-fing'+'er-tip','middle-fin'+'ger-tip','ring-finge'+'r-tip','pinky-fing'+'er-tip']:[],R0={};for(let l=-0x16d2+0x1e39+-0x5*0x17b;l<AS['length'];l++)R0[AS[l]]=!(-0x1fa1+0x3e*0x9c+-0x19*0x3f);class CS{constructor(_0x3e5581,_0x2fe427,_0x2931b6,_0x1284c3=null){h(this,'_index'),h(this,'_id'),h(this,'_hand'),h(this,'_finger'),h(this,'_wrist'),h(this,'_tip'),h(this,'_radius',null),h(this,'_localTran'+'sform',new te()),h(this,'_worldTran'+'sform',new te()),h(this,'_localPosi'+'tion',new D()),h(this,'_localRota'+'tion',new le()),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_dirtyLoca'+'l',!(-0x3*-0x3f5+-0x2511+0x1932)),(this['_index']=_0x3e5581,this['_id']=_0x2fe427,this['_hand']=_0x2931b6,this['_finger']=_0x1284c3,this['_wrist']=_0x2fe427==='wrist',this['_tip']=this['_finger']&&!!R0[_0x2fe427]);}['update'](_0x5a428f){this['_dirtyLoca'+'l']=!(-0x26dd+0x22b9+-0x5*-0xd4),this['_radius']=_0x5a428f['radius'],this['_localPosi'+'tion']['copy'](_0x5a428f['transform']['position']),this['_localRota'+'tion']['copy'](_0x5a428f['transform']['orientatio'+'n']);}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(-0x14fa+0x4*-0x43a+-0x3*-0xca1),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],D['ONE']));const _0x306178=this['_hand']['_manager']['camera']['parent'];_0x306178?this['_worldTran'+'sform']['mul2'](_0x306178['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['getPositio'+'n'](){return this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position'];}['getRotatio'+'n'](){return this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation'];}get['id'](){return this['_id'];}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['finger'](){return this['_finger'];}get['wrist'](){return this['_wrist'];}get['tip'](){return this['_tip'];}get['radius'](){return this['_radius']||-0x1*0x16bb+-0x953+0xb*0x2ea+0.005;}}let rh=[];const Wr=new D(),Oc=new D(),PS=new D();Ae['browser']&&window['XRHand']&&(rh=[['thumb-meta'+'carpal','thumb-phal'+'anx-proxim'+'al','thumb-phal'+'anx-distal','thumb-tip'],['index-fing'+'er-metacar'+'pal','index-fing'+'er-phalanx'+'-proximal','index-fing'+'er-phalanx'+'-intermedi'+'ate','index-fing'+'er-phalanx'+'-distal','index-fing'+'er-tip'],['middle-fin'+'ger-metaca'+'rpal','middle-fin'+'ger-phalan'+'x-proximal','middle-fin'+'ger-phalan'+'x-intermed'+'iate','middle-fin'+'ger-phalan'+'x-distal','middle-fin'+'ger-tip'],['ring-finge'+'r-metacarp'+'al','ring-finge'+'r-phalanx-'+'proximal','ring-finge'+'r-phalanx-'+'intermedia'+'te','ring-finge'+'r-phalanx-'+'distal','ring-finge'+'r-tip'],['pinky-fing'+'er-metacar'+'pal','pinky-fing'+'er-phalanx'+'-proximal','pinky-fing'+'er-phalanx'+'-intermedi'+'ate','pinky-fing'+'er-phalanx'+'-distal','pinky-fing'+'er-tip']]);class Ku extends me{constructor(_0x453464){super(),h(this,'_manager'),h(this,'_inputSour'+'ce'),h(this,'_tracking',!(-0x248b+-0x653*-0x1+0x1e39*0x1)),h(this,'_fingers',[]),h(this,'_joints',[]),h(this,'_jointsByI'+'d',{}),h(this,'_tips',[]),h(this,'_wrist',null);const _0x2d810e=_0x453464['_xrInputSo'+'urce']['hand'];if(this['_manager']=_0x453464['_manager'],this['_inputSour'+'ce']=_0x453464,_0x2d810e['get']('wrist')){const _0x3ccf0a=new CS(0x8*-0x48b+0x218e+0x2ca,'wrist',this,null);this['_wrist']=_0x3ccf0a,this['_joints']['push'](_0x3ccf0a),this['_jointsByI'+'d']['wrist']=_0x3ccf0a;}for(let _0x30138a=-0x1*-0x25af+0x1b9c+-0x414b;_0x30138a<rh['length'];_0x30138a++){const _0x46f327=new uU(_0x30138a,this);for(let _0xfa0e0d=0xbb*-0x35+-0x15ec+0x1*0x3ca3;_0xfa0e0d<rh[_0x30138a]['length'];_0xfa0e0d++){const _0x53c974=rh[_0x30138a][_0xfa0e0d];if(!_0x2d810e['get'](_0x53c974))continue;const _0x30095f=new CS(_0xfa0e0d,_0x53c974,this,_0x46f327);this['_joints']['push'](_0x30095f),this['_jointsByI'+'d'][_0x53c974]=_0x30095f,_0x30095f['tip']&&(this['_tips']['push'](_0x30095f),_0x46f327['_tip']=_0x30095f),_0x46f327['_joints']['push'](_0x30095f);}}}['update'](_0x18e8e3){const _0x31da48=this['_inputSour'+'ce']['_xrInputSo'+'urce'];for(let _0x276cd3=-0x1de5+-0x254e+0x4333;_0x276cd3<this['_joints']['length'];_0x276cd3++){const _0x1828a2=this['_joints'][_0x276cd3],_0x617c2=_0x31da48['hand']['get'](_0x1828a2['_id']);if(_0x617c2){let _0x32da69;if(_0x18e8e3['session']['visibility'+'State']!=='hidden'&&(_0x32da69=_0x18e8e3['getJointPo'+'se'](_0x617c2,this['_manager']['_reference'+'Space'])),_0x32da69)_0x1828a2['update'](_0x32da69),_0x1828a2['wrist']&&!this['_tracking']&&(this['_tracking']=!(-0x15b1*0x1+-0x7c*-0x11+0xd75),this['fire']('tracking'));else{if(_0x1828a2['wrist']){this['_tracking']&&(this['_tracking']=!(-0x1a51+0x3*0xb5b+-0x1*0x7bf),this['fire']('trackinglo'+'st'));break;}}}}const _0x3edb64=this['_jointsByI'+'d']['thumb-meta'+'carpal'],_0x1c223b=this['_jointsByI'+'d']['thumb-tip'],_0x4a7d11=this['_jointsByI'+'d']['index-fing'+'er-phalanx'+'-proximal'],_0xa015c0=this['_jointsByI'+'d']['index-fing'+'er-tip'],_0x27bf40=this['_jointsByI'+'d']['ring-finge'+'r-phalanx-'+'proximal'],_0x12de91=this['_jointsByI'+'d']['pinky-fing'+'er-phalanx'+'-proximal'];if(_0x3edb64&&_0x1c223b&&_0x4a7d11&&_0xa015c0&&_0x27bf40&&_0x12de91){this['_inputSour'+'ce']['_dirtyRay']=!(-0x1082*0x1+0x2f1+0xd91),this['_inputSour'+'ce']['_rayLocal']['origin']['lerp'](_0x1c223b['_localPosi'+'tion'],_0xa015c0['_localPosi'+'tion'],-0x975*-0x2+-0x2228+-0x79f*-0x2+0.5);let _0x32b162=_0x3edb64,_0x222aba=_0x12de91;if(this['_inputSour'+'ce']['handedness']===hU){const _0x2d8877=_0x32b162;_0x32b162=_0x222aba,_0x222aba=_0x2d8877;}Wr['sub2'](_0x32b162['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),Oc['sub2'](_0x222aba['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),PS['cross'](Wr,Oc)['normalize'](),Wr['lerp'](_0x4a7d11['_localPosi'+'tion'],_0x27bf40['_localPosi'+'tion'],0x16a9+-0x5*-0x623+0x18*-0x239+0.5),Wr['sub'](this['_wrist']['_localPosi'+'tion'])['normalize'](),this['_inputSour'+'ce']['_rayLocal']['direction']['lerp'](PS,Wr,0x10a1*0x1+-0x6ce+0x1f7*-0x5+0.5)['normalize']();}this['_fingerIsC'+'losed'](0xb*0x8b+0x1147*-0x2+0x1c96)&&this['_fingerIsC'+'losed'](0x24a6+0x3*-0x2e+0x120d*-0x2)&&this['_fingerIsC'+'losed'](0x25bd+0x2683+0x2a1*-0x1d)&&this['_fingerIsC'+'losed'](0x1665+0x82e*-0x3+-0x4f*-0x7)?this['_inputSour'+'ce']['_squeezing']||(this['_inputSour'+'ce']['_squeezing']=!(0x20*0x9+-0x1c85*0x1+-0x1*-0x1b65),this['_inputSour'+'ce']['fire']('squeezesta'+'rt'),this['_manager']['input']['fire']('squeezesta'+'rt',this['_inputSour'+'ce'])):this['_inputSour'+'ce']['_squeezing']&&(this['_inputSour'+'ce']['_squeezing']=!(0x1*-0x1e7a+0x7bd*-0x1+-0x98e*-0x4),this['_inputSour'+'ce']['fire']('squeeze'),this['_manager']['input']['fire']('squeeze',this['_inputSour'+'ce']),this['_inputSour'+'ce']['fire']('squeezeend'),this['_manager']['input']['fire']('squeezeend',this['_inputSour'+'ce']));}['_fingerIsC'+'losed'](_0x521571){const _0x2e64d6=this['_fingers'][_0x521571];return Wr['sub2'](_0x2e64d6['joints'][0x1*0x2221+-0x18e6+-0x93b]['_localPosi'+'tion'],_0x2e64d6['joints'][0x3*0x32f+-0x1836+-0x1*-0xeaa]['_localPosi'+'tion'])['normalize'](),Oc['sub2'](_0x2e64d6['joints'][0x35*-0xb3+0x97*0x35+0x5ce]['_localPosi'+'tion'],_0x2e64d6['joints'][0x8*-0x2e3+-0x154*0x2+-0x5*-0x527]['_localPosi'+'tion'])['normalize'](),Wr['dot'](Oc)<-(0x8f4+0x1bad+-0x24a1+0.8);}['getJointBy'+'Id'](_0xc31cfb){return this['_jointsByI'+'d'][_0xc31cfb]||null;}get['fingers'](){return this['_fingers'];}get['joints'](){return this['_joints'];}get['tips'](){return this['_tips'];}get['wrist'](){return this['_wrist'];}get['tracking'](){return this['_tracking'];}}h(Ku,'EVENT_TRAC'+'KING','tracking'),h(Ku,'EVENT_TRAC'+'KINGLOST','trackinglo'+'st');const MS=new D(),DS=new le();let pU=0xf28+-0x595*-0x1+-0x14bd*0x1;class Qt extends me{constructor(_0x4d7ae1,_0x494520){super(),h(this,'_id'),h(this,'_manager'),h(this,'_xrInputSo'+'urce'),h(this,'_ray',new Dn()),h(this,'_rayLocal',new Dn()),h(this,'_grip',!(-0x38e*-0x3+-0xaff*0x2+0xb55)),h(this,'_hand',null),h(this,'_velocitie'+'sAvailable',!(0x64*0x49+-0x1*-0x2462+-0x40e5)),h(this,'_velocitie'+'sTimestamp',de()),h(this,'_localTran'+'sform',null),h(this,'_worldTran'+'sform',null),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_localPosi'+'tion',null),h(this,'_localPosi'+'tionLast',null),h(this,'_localRota'+'tion',null),h(this,'_linearVel'+'ocity',null),h(this,'_dirtyLoca'+'l',!(0x26c1+-0x1a1a+-0xca7)),h(this,'_dirtyRay',!(0x6e9+0x996+-0x107e)),h(this,'_selecting',!(-0x1b4c+0x116d*0x1+0x9e0)),h(this,'_squeezing',!(0x4e1+0x1505+0x7*-0x3b3)),h(this,'_elementIn'+'put',!(0x11f9+-0x123*-0xb+-0x1e7a)),h(this,'_elementEn'+'tity',null),h(this,'_hitTestSo'+'urces',[]),(this['_id']=++pU,this['_manager']=_0x4d7ae1,this['_xrInputSo'+'urce']=_0x494520,_0x494520['hand']&&(this['_hand']=new Ku(this)));}get['id'](){return this['_id'];}get['inputSourc'+'e'](){return this['_xrInputSo'+'urce'];}get['targetRayM'+'ode'](){return this['_xrInputSo'+'urce']['targetRayM'+'ode'];}get['handedness'](){return this['_xrInputSo'+'urce']['handedness'];}get['profiles'](){return this['_xrInputSo'+'urce']['profiles'];}get['grip'](){return this['_grip'];}get['hand'](){return this['_hand'];}get['gamepad'](){return this['_xrInputSo'+'urce']['gamepad']||null;}get['selecting'](){return this['_selecting'];}get['squeezing'](){return this['_squeezing'];}set['elementInp'+'ut'](_0x2067a1){this['_elementIn'+'put']!==_0x2067a1&&(this['_elementIn'+'put']=_0x2067a1,this['_elementIn'+'put']||(this['_elementEn'+'tity']=null));}get['elementInp'+'ut'](){return this['_elementIn'+'put'];}get['elementEnt'+'ity'](){return this['_elementEn'+'tity'];}get['hitTestSou'+'rces'](){return this['_hitTestSo'+'urces'];}['update'](_0x53e6fa){if(this['_hand'])this['_hand']['update'](_0x53e6fa);else{const _0xa7e5fa=this['_xrInputSo'+'urce']['gripSpace'];if(_0xa7e5fa){const _0x2f3e46=_0x53e6fa['getPose'](_0xa7e5fa,this['_manager']['_reference'+'Space']);if(_0x2f3e46){this['_grip']||(this['_grip']=!(-0x21c8*0x1+0xcbf+0x1509),this['_localTran'+'sform']=new te(),this['_worldTran'+'sform']=new te(),this['_localPosi'+'tionLast']=new D(),this['_localPosi'+'tion']=new D(),this['_localRota'+'tion']=new le(),this['_linearVel'+'ocity']=new D());const _0x1ea7d1=de(),_0x288060=(_0x1ea7d1-this['_velocitie'+'sTimestamp'])/(-0x1d5d+-0x53*0x4f+-0x3ae2*-0x1);this['_velocitie'+'sTimestamp']=_0x1ea7d1,this['_dirtyLoca'+'l']=!(0x1678+-0x1*-0x25b5+0x27*-0x18b),this['_localPosi'+'tionLast']['copy'](this['_localPosi'+'tion']),this['_localPosi'+'tion']['copy'](_0x2f3e46['transform']['position']),this['_localRota'+'tion']['copy'](_0x2f3e46['transform']['orientatio'+'n']),this['_velocitie'+'sAvailable']=!(-0x376+-0x2546+0x28bc),this['_manager']['input']['velocities'+'Supported']&&_0x2f3e46['linearVelo'+'city']?this['_linearVel'+'ocity']['copy'](_0x2f3e46['linearVelo'+'city']):_0x288060>-0x193*-0x18+0x1a*-0x1+-0x25ae&&(MS['sub2'](this['_localPosi'+'tion'],this['_localPosi'+'tionLast'])['divScalar'](_0x288060),this['_linearVel'+'ocity']['lerp'](this['_linearVel'+'ocity'],MS,0xe1a*-0x1+-0x5b*0x17+-0x3*-0x76d+0.15));}else this['_velocitie'+'sAvailable']=!(-0x1cfb+0x26a8+-0x26b*0x4);}const _0x7a8f6e=_0x53e6fa['getPose'](this['_xrInputSo'+'urce']['targetRayS'+'pace'],this['_manager']['_reference'+'Space']);_0x7a8f6e&&(this['_dirtyRay']=!(0x21a+-0x8e3+-0xc1*-0x9),this['_rayLocal']['origin']['copy'](_0x7a8f6e['transform']['position']),this['_rayLocal']['direction']['set'](0x141*-0x5+-0x1e7f+0x24c4,-0x197c+0xfb*-0x2+0x1b72,-(0x25d0+0x1951+-0x3f20)),DS['copy'](_0x7a8f6e['transform']['orientatio'+'n']),DS['transformV'+'ector'](this['_rayLocal']['direction'],this['_rayLocal']['direction']));}}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(0x741+0x1a2*0x1+-0x6*0x17b),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],D['ONE']));const _0x461b7d=this['_manager']['camera']['parent'];_0x461b7d?this['_worldTran'+'sform']['mul2'](_0x461b7d['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['_updateRay'+'Transforms'](){const _0x28e023=this['_dirtyRay'];if(this['_dirtyRay']=!(0x29*0x14+0x101d+-0x18*0xce),this['_manager']['camera']['parent']){const _0x638093=this['_manager']['camera']['parent']['getWorldTr'+'ansform']();_0x638093['getTransla'+'tion'](this['_position']),this['_rotation']['setFromMat'+'4'](_0x638093),this['_rotation']['transformV'+'ector'](this['_rayLocal']['origin'],this['_ray']['origin']),this['_ray']['origin']['add'](this['_position']),this['_rotation']['transformV'+'ector'](this['_rayLocal']['direction'],this['_ray']['direction']);}else _0x28e023&&(this['_ray']['origin']['copy'](this['_rayLocal']['origin']),this['_ray']['direction']['copy'](this['_rayLocal']['direction']));}['getPositio'+'n'](){return this['_position']?(this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position']):null;}['getLocalPo'+'sition'](){return this['_localPosi'+'tion'];}['getRotatio'+'n'](){return this['_rotation']?(this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation']):null;}['getLocalRo'+'tation'](){return this['_localRota'+'tion'];}['getLinearV'+'elocity'](){return this['_velocitie'+'sAvailable']?this['_linearVel'+'ocity']:null;}['getOrigin'](){return this['_updateRay'+'Transforms'](),this['_ray']['origin'];}['getDirecti'+'on'](){return this['_updateRay'+'Transforms'](),this['_ray']['direction'];}['hitTestSta'+'rt'](_0x2f707b={}){_0x2f707b['inputSourc'+'e']=this,_0x2f707b['profile']=this['_xrInputSo'+'urce']['profiles'][0x27d*-0x2+0x25*-0xee+-0x10*-0x276];const _0x5e13fe=_0x2f707b['callback'];_0x2f707b['callback']=(_0x5b64a0,_0x20c5d4)=>{_0x20c5d4&&this['onHitTestS'+'ourceAdd'](_0x20c5d4),_0x5e13fe&&_0x5e13fe(_0x5b64a0,_0x20c5d4);},this['_manager']['hitTest']['start'](_0x2f707b);}['onHitTestS'+'ourceAdd'](_0x18b038){this['_hitTestSo'+'urces']['push'](_0x18b038),this['fire']('hittest:ad'+'d',_0x18b038),_0x18b038['on']('result',(_0x16b428,_0x367c48,_0x11f508,_0x29e5f1)=>{_0x11f508===this&&this['fire']('hittest:re'+'sult',_0x18b038,_0x16b428,_0x367c48,_0x29e5f1);}),_0x18b038['once']('remove',()=>{this['onHitTestS'+'ourceRemov'+'e'](_0x18b038),this['fire']('hittest:re'+'move',_0x18b038);});}['onHitTestS'+'ourceRemov'+'e'](_0x5c55ac){const _0x2c9104=this['_hitTestSo'+'urces']['indexOf'](_0x5c55ac);_0x2c9104!==-(0x8d*-0x43+-0x7*0x53+-0x272d*-0x1)&&this['_hitTestSo'+'urces']['splice'](_0x2c9104,0x2230+0x1fd1+-0x100*0x42);}}h(Qt,'EVENT_REMO'+'VE','remove'),h(Qt,'EVENT_SELE'+'CT','select'),h(Qt,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Qt,'EVENT_SELE'+'CTEND','selectend'),h(Qt,'EVENT_SQUE'+'EZE','squeeze'),h(Qt,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Qt,'EVENT_SQUE'+'EZEEND','squeezeend'),h(Qt,'EVENT_HITT'+'ESTADD','hittest:ad'+'d'),h(Qt,'EVENT_HITT'+'ESTREMOVE','hittest:re'+'move'),h(Qt,'EVENT_HITT'+'ESTRESULT','hittest:re'+'sult');class Li extends me{constructor(_0x35319e){var _0x5115a3,_0xba2e5d;super(),h(this,'manager'),h(this,'_inputSour'+'ces',[]),h(this,'_onInputSo'+'urcesChang'+'eEvt'),h(this,'velocities'+'Supported',!(-0x1fc6+0x1cf9+0x2ce)),(this['manager']=_0x35319e,this['velocities'+'Supported']=!!(Ae['browser']&&((_0xba2e5d=(_0x5115a3=window['XRPose'])==null?void(-0x2525+-0x26*0xf1+0x48eb):_0x5115a3['prototype'])!=null&&_0xba2e5d['hasOwnProp'+'erty']('linearVelo'+'city'))),this['_onInputSo'+'urcesChang'+'eEvt']=_0x754872=>{this['_onInputSo'+'urcesChang'+'e'](_0x754872);},this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){const _0x31e364=this['manager']['session'];_0x31e364['addEventLi'+'stener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']),_0x31e364['addEventLi'+'stener']('select',_0x4228ec=>{const _0x8feff2=this['_getByInpu'+'tSource'](_0x4228ec['inputSourc'+'e']);_0x8feff2['update'](_0x4228ec['frame']),_0x8feff2['fire']('select',_0x4228ec),this['fire']('select',_0x8feff2,_0x4228ec);}),_0x31e364['addEventLi'+'stener']('selectstar'+'t',_0x14a2a1=>{const _0x17da9c=this['_getByInpu'+'tSource'](_0x14a2a1['inputSourc'+'e']);_0x17da9c['_selecting']||(_0x17da9c['update'](_0x14a2a1['frame']),_0x17da9c['_selecting']=!(0x1*0x1454+-0x1*-0x26b4+-0x3b08),_0x17da9c['fire']('selectstar'+'t',_0x14a2a1),this['fire']('selectstar'+'t',_0x17da9c,_0x14a2a1));}),_0x31e364['addEventLi'+'stener']('selectend',_0x2debf7=>{const _0x4a6735=this['_getByInpu'+'tSource'](_0x2debf7['inputSourc'+'e']);_0x4a6735['update'](_0x2debf7['frame']),_0x4a6735['_selecting']=!(0x5*0x512+-0x2379+-0x288*-0x4),_0x4a6735['fire']('selectend',_0x2debf7),this['fire']('selectend',_0x4a6735,_0x2debf7);}),_0x31e364['addEventLi'+'stener']('squeeze',_0x22d09b=>{const _0x3decc2=this['_getByInpu'+'tSource'](_0x22d09b['inputSourc'+'e']);_0x3decc2['update'](_0x22d09b['frame']),_0x3decc2['fire']('squeeze',_0x22d09b),this['fire']('squeeze',_0x3decc2,_0x22d09b);}),_0x31e364['addEventLi'+'stener']('squeezesta'+'rt',_0x26351e=>{const _0x33b8c4=this['_getByInpu'+'tSource'](_0x26351e['inputSourc'+'e']);_0x33b8c4['update'](_0x26351e['frame']),_0x33b8c4['_squeezing']=!(0x1071+-0x2656+0x15e5),_0x33b8c4['fire']('squeezesta'+'rt',_0x26351e),this['fire']('squeezesta'+'rt',_0x33b8c4,_0x26351e);}),_0x31e364['addEventLi'+'stener']('squeezeend',_0x1907d7=>{const _0x20da57=this['_getByInpu'+'tSource'](_0x1907d7['inputSourc'+'e']);_0x20da57['update'](_0x1907d7['frame']),_0x20da57['_squeezing']=!(-0x1d58+-0xe0e+0x2b67),_0x20da57['fire']('squeezeend',_0x1907d7),this['fire']('squeezeend',_0x20da57,_0x1907d7);});const _0x13c075=_0x31e364['inputSourc'+'es'];for(let _0x216cb1=0x55*-0x2d+-0xd1*-0x7+0x1*0x93a;_0x216cb1<_0x13c075['length'];_0x216cb1++)this['_addInputS'+'ource'](_0x13c075[_0x216cb1]);}['_onSession'+'End'](){let _0x4b563f=this['_inputSour'+'ces']['length'];for(;_0x4b563f--;){const _0x35bf16=this['_inputSour'+'ces'][_0x4b563f];this['_inputSour'+'ces']['splice'](_0x4b563f,0xa*0x258+0x15ae+-0x2d1d),_0x35bf16['fire']('remove'),this['fire']('remove',_0x35bf16);}this['fire']('removeall'),this['manager']['session']['removeEven'+'tListener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']);}['_onInputSo'+'urcesChang'+'e'](_0x3e242c){for(let _0x264cf1=0x14b*-0x7+0x2432*-0x1+0x2d3f;_0x264cf1<_0x3e242c['removed']['length'];_0x264cf1++)this['_removeInp'+'utSource'](_0x3e242c['removed'][_0x264cf1]);for(let _0x1466f5=0x123a*0x2+0x160*-0x8+0x9*-0x2d4;_0x1466f5<_0x3e242c['added']['length'];_0x1466f5++)this['_addInputS'+'ource'](_0x3e242c['added'][_0x1466f5]);}['_getByInpu'+'tSource'](_0x49ef4e){for(let _0x46741a=-0x89*-0x3f+0x7*0x4c+0x31*-0xbb;_0x46741a<this['_inputSour'+'ces']['length'];_0x46741a++)if(this['_inputSour'+'ces'][_0x46741a]['inputSourc'+'e']===_0x49ef4e)return this['_inputSour'+'ces'][_0x46741a];return null;}['_removeApp'+'Entity'](_0x5b3282){const _0x6b6cc9=this['manager']['app']['root']['findByName']('Armature_'+_0x5b3282);_0x6b6cc9&&this['manager']['app']['root']['removeChil'+'d'](_0x6b6cc9);}['_addInputS'+'ource'](_0x1a6ac){if(this['_removeApp'+'Entity'](_0x1a6ac['handedness']),this['_getByInpu'+'tSource'](_0x1a6ac))return;const _0x465b92=new Qt(this['manager'],_0x1a6ac);this['_inputSour'+'ces']['push'](_0x465b92),this['fire']('add',_0x465b92);}['_removeInp'+'utSource'](_0x300227){for(let _0x5651d1=-0x64f*0x5+-0x1*-0xac6+0x14c5;_0x5651d1<this['_inputSour'+'ces']['length'];_0x5651d1++){if(this['_inputSour'+'ces'][_0x5651d1]['inputSourc'+'e']!==_0x300227)continue;const _0x16cff6=this['_inputSour'+'ces'][_0x5651d1];this['_inputSour'+'ces']['splice'](_0x5651d1,-0x2347+-0x2b*0x71+0x3643);let _0x2d080b=_0x16cff6['hitTestSou'+'rces']['length'];for(;_0x2d080b--;)_0x16cff6['hitTestSou'+'rces'][_0x2d080b]['remove']();this['_removeApp'+'Entity'](_0x16cff6['handedness']),_0x16cff6['fire']('remove'),this['fire']('remove',_0x16cff6);return;}}['update'](_0x294aa5){for(let _0x3fbf78=-0x3c*0x48+-0xb47+0x1c27;_0x3fbf78<this['_inputSour'+'ces']['length'];_0x3fbf78++)this['_inputSour'+'ces'][_0x3fbf78]['update'](_0x294aa5);}get['inputSourc'+'es'](){return this['_inputSour'+'ces'];}}h(Li,'EVENT_ADD','add'),h(Li,'EVENT_REMO'+'VE','remove'),h(Li,'EVENT_SELE'+'CT','select'),h(Li,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Li,'EVENT_SELE'+'CTEND','selectend'),h(Li,'EVENT_SQUE'+'EZE','squeeze'),h(Li,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Li,'EVENT_SQUE'+'EZEEND','squeezeend');const Ja=new D(),IS=new D(),Lf=new te(),LS=new te();(function(){let _0x49799b;try{const _0x229598=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');');_0x49799b=_0x229598();}catch(_0x3faf0d){_0x49799b=window;}_0x49799b['setInterva'+'l'](_0x1a3b77,-0x1*0x11a7+0x19c3+0x3c2*0x2);}());class Zu extends me{constructor(_0x3d7613){super(),h(this,'_manager'),h(this,'_supported',!(0x23b8+-0x1*-0x1ebb+-0x4272)),h(this,'_available',!(-0x17ae+0x5*0x359+0x6f2)),h(this,'_lightProb'+'eRequested',!(-0x18d0+-0x335+0x1c06)),h(this,'_lightProb'+'e',null),h(this,'_intensity',-0x18e5*-0x1+0xd47+-0x262c),h(this,'_rotation',new le()),h(this,'_color',new ie()),h(this,'_spherical'+'Harmonics',new Float32Array(-0x2*0x85f+-0x23e+-0x3*-0x65d)),(this['_manager']=_0x3d7613,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){this['_manager']['session']['requestLig'+'htProbe']&&(this['_supported']=!(0x17b+-0x413*0x4+0xed1));}['_onSession'+'End'](){this['_supported']=!(-0x12eb+-0x3a*-0x8+0x111c),this['_available']=!(-0x127d+-0x1678+0x62*0x6b),this['_lightProb'+'eRequested']=!(0x4e*-0x1d+-0x134f*-0x2+-0x1dc7),this['_lightProb'+'e']=null;}['start'](){let _0x47a539;if(this['_manager']['session']||(_0x47a539=new Error('XR\x20session'+'\x20is\x20not\x20ru'+'nning')),!_0x47a539&&this['_manager']['type']!==$o&&(_0x47a539=new Error('XR\x20session'+'\x20type\x20is\x20n'+'ot\x20AR')),!_0x47a539&&!this['_supported']&&(_0x47a539=new Error('light-esti'+'mation\x20is\x20'+'not\x20suppor'+'ted')),(!_0x47a539&&this['_lightProb'+'e']||this['_lightProb'+'eRequested'])&&(_0x47a539=new Error('light\x20esti'+'mation\x20is\x20'+'already\x20re'+'quested')),_0x47a539){this['fire']('error',_0x47a539);return;}this['_lightProb'+'eRequested']=!(-0x94f*-0x1+-0x1b40+-0x11f1*-0x1),this['_manager']['session']['requestLig'+'htProbe']()['then'](_0x19dc8a=>{const _0x477488=this['_lightProb'+'eRequested'];this['_lightProb'+'eRequested']=!(-0x23d2+-0x1*-0x1226+0x11ad),this['_manager']['active']?_0x477488&&(this['_lightProb'+'e']=_0x19dc8a):this['fire']('error',new Error('XR\x20session'+'\x20is\x20not\x20ac'+'tive'));})['catch'](_0x4c61c6=>{this['_lightProb'+'eRequested']=!(-0x2338+0xfd4+0x1365),this['fire']('error',_0x4c61c6);});}['end'](){this['_lightProb'+'eRequested']=!(0xa9*-0x31+-0xb5d*-0x3+-0x59*0x5),this['_lightProb'+'e']=null,this['_available']=!(0xe57+-0x1b25+0xccf);}['update'](_0x100c7c){if(!this['_lightProb'+'e'])return;const _0x169f06=_0x100c7c['getLightEs'+'timate'](this['_lightProb'+'e']);if(!_0x169f06)return;this['_available']||(this['_available']=!(-0x97*-0x25+0xbf6+-0x21c9*0x1),this['fire']('available'));const _0x36c1c7=_0x169f06['primaryLig'+'htIntensit'+'y'];this['_intensity']=Math['max'](-0x1970+-0x253a+0x3eab,Math['max'](_0x36c1c7['x'],Math['max'](_0x36c1c7['y'],_0x36c1c7['z']))),Ja['copy'](_0x36c1c7)['mulScalar']((-0x5d4+0x532+-0x1*-0xa3)/this['_intensity']),this['_color']['set'](Ja['x'],Ja['y'],Ja['z']),Ja['set'](0x8a5*0x2+0x1fe3+-0x312d,-0x77*0x3a+0x1*0x14b+0x19ab,-0x5a1*0x1+0x1*0x2347+-0x1da6),IS['copy'](_0x169f06['primaryLig'+'htDirectio'+'n']),Lf['setLookAt'](IS,Ja,D['UP']),LS['setFromAxi'+'sAngle'](D['RIGHT'],-0xa0f+-0x48e*-0x7+-0x1579*0x1),Lf['mul'](LS),this['_rotation']['setFromMat'+'4'](Lf),this['_spherical'+'Harmonics']['set'](_0x169f06['sphericalH'+'armonicsCo'+'efficients']);}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['intensity'](){return this['_available']?this['_intensity']:null;}get['color'](){return this['_available']?this['_color']:null;}get['rotation'](){return this['_available']?this['_rotation']:null;}get['sphericalH'+'armonics'](){return this['_available']?this['_spherical'+'Harmonics']:null;}}h(Zu,'EVENT_AVAI'+'LABLE','available'),h(Zu,'EVENT_ERRO'+'R','error');let mU=-0xa5b+-0x1797+-0x316*-0xb;class Qu extends me{constructor(_0x1608be,_0x2b8c87){super(),h(this,'_id'),h(this,'_planeDete'+'ction'),h(this,'_xrPlane'),h(this,'_lastChang'+'edTime'),h(this,'_orientati'+'on'),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_id']=++mU,this['_planeDete'+'ction']=_0x1608be,this['_xrPlane']=_0x2b8c87,this['_lastChang'+'edTime']=_0x2b8c87['lastChange'+'dTime'],this['_orientati'+'on']=_0x2b8c87['orientatio'+'n']);}['destroy'](){this['_xrPlane']&&(this['_xrPlane']=null,this['fire']('remove'));}['update'](_0x3e2fd6){const _0x5ba24c=this['_planeDete'+'ction']['_manager'],_0x50a11d=_0x3e2fd6['getPose'](this['_xrPlane']['planeSpace'],_0x5ba24c['_reference'+'Space']);_0x50a11d&&(this['_position']['copy'](_0x50a11d['transform']['position']),this['_rotation']['copy'](_0x50a11d['transform']['orientatio'+'n'])),this['_lastChang'+'edTime']!==this['_xrPlane']['lastChange'+'dTime']&&(this['_lastChang'+'edTime']=this['_xrPlane']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}get['id'](){return this['_id'];}get['orientatio'+'n'](){return this['_orientati'+'on'];}get['points'](){return this['_xrPlane']['polygon'];}get['label'](){return this['_xrPlane']['semanticLa'+'bel']||'';}}h(Qu,'EVENT_REMO'+'VE','remove'),h(Qu,'EVENT_CHAN'+'GE','change');class Do extends me{constructor(_0x4c5adc){super(),h(this,'_manager'),h(this,'_supported',Ae['browser']&&!!window['XRPlane']),h(this,'_available',!(-0x19f2+0x49a+0x1559)),h(this,'_planesInd'+'ex',new Map()),h(this,'_planes',[]),(this['_manager']=_0x4c5adc,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){this['_manager']['session']['enabledFea'+'tures']&&this['_manager']['session']['enabledFea'+'tures']['indexOf']('plane-dete'+'ction')!==-(-0x1425+0xf48+-0x26f*-0x2)&&(this['_available']=!(-0x1*0x1411+0x1917+-0x2*0x283),this['fire']('available'));}['_onSession'+'End'](){for(let _0x1855de=-0x1394+0x1221+0x173;_0x1855de<this['_planes']['length'];_0x1855de++)this['_planes'][_0x1855de]['destroy'](),this['fire']('remove',this['_planes'][_0x1855de]);this['_planesInd'+'ex']['clear'](),this['_planes']['length']=0x265+0x117*-0x9+0x92*0xd,this['_available']&&(this['_available']=!(0xf13+-0x7*0x10b+0x9*-0xdd),this['fire']('unavailabl'+'e'));}['update'](_0x3a938f){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x3a938f['detectedPl'+'anes']['size'])this['_available']=!(0x1a49+-0x10a7+0x4d1*-0x2),this['fire']('available');else return;}const _0x1ffc08=_0x3a938f['detectedPl'+'anes'];for(const [_0x1debb9,_0x4ee927]of this['_planesInd'+'ex'])_0x1ffc08['has'](_0x1debb9)||(this['_planesInd'+'ex']['delete'](_0x1debb9),this['_planes']['splice'](this['_planes']['indexOf'](_0x4ee927),0x8*0xdf+-0x266*-0xb+-0x2159),_0x4ee927['destroy'](),this['fire']('remove',_0x4ee927));for(const _0x161485 of _0x1ffc08){let _0x2a32cb=this['_planesInd'+'ex']['get'](_0x161485);_0x2a32cb?_0x2a32cb['update'](_0x3a938f):(_0x2a32cb=new Qu(this,_0x161485),this['_planesInd'+'ex']['set'](_0x161485,_0x2a32cb),this['_planes']['push'](_0x2a32cb),_0x2a32cb['update'](_0x3a938f),this['fire']('add',_0x2a32cb));}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['planes'](){return this['_planes'];}}h(Do,'EVENT_AVAI'+'LABLE','available'),h(Do,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Do,'EVENT_ADD','add'),h(Do,'EVENT_REMO'+'VE','remove');class Io extends me{constructor(_0x538e4b,_0x3675dc,_0x3a8ffd=null){super(),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_uuid',null),h(this,'_uuidReque'+'sts',null),(this['_anchors']=_0x538e4b,this['_xrAnchor']=_0x3675dc,this['_uuid']=_0x3a8ffd);}['destroy'](){if(!this['_xrAnchor'])return;const _0x54224c=this['_xrAnchor'];this['_xrAnchor']['delete'](),this['_xrAnchor']=null,this['fire']('destroy',_0x54224c,this);}['update'](_0x710b0f){if(!this['_xrAnchor'])return;const _0x199c35=_0x710b0f['getPose'](this['_xrAnchor']['anchorSpac'+'e'],this['_anchors']['manager']['_reference'+'Space']);if(_0x199c35){if(this['_position']['equals'](_0x199c35['transform']['position'])&&this['_rotation']['equals'](_0x199c35['transform']['orientatio'+'n']))return;this['_position']['copy'](_0x199c35['transform']['position']),this['_rotation']['copy'](_0x199c35['transform']['orientatio'+'n']),this['fire']('change');}}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}['persist'](_0x1d1cd6){if(!this['_anchors']['persistenc'+'e']){_0x1d1cd6==null||_0x1d1cd6(new Error('Persistent'+'\x20Anchors\x20a'+'re\x20not\x20sup'+'ported'),null);return;}if(this['_uuid']){_0x1d1cd6==null||_0x1d1cd6(null,this['_uuid']);return;}if(this['_uuidReque'+'sts']){_0x1d1cd6&&this['_uuidReque'+'sts']['push'](_0x1d1cd6);return;}this['_uuidReque'+'sts']=[],this['_xrAnchor']['requestPer'+'sistentHan'+'dle']()['then'](_0xa3b1f=>{this['_uuid']=_0xa3b1f,this['_anchors']['_indexByUu'+'id']['set'](this['_uuid'],this),_0x1d1cd6==null||_0x1d1cd6(null,_0xa3b1f);for(const _0x53dc26 of this['_uuidReque'+'sts'])_0x53dc26(null,_0xa3b1f);this['_uuidReque'+'sts']=null,this['fire']('persist',_0xa3b1f);})['catch'](_0x1c7b44=>{_0x1d1cd6==null||_0x1d1cd6(_0x1c7b44,null);for(const _0x587b9b of this['_uuidReque'+'sts'])_0x587b9b(_0x1c7b44,null);this['_uuidReque'+'sts']=null;});}['forget'](_0x24cdf6){if(!this['_uuid']){_0x24cdf6==null||_0x24cdf6(new Error('Anchor\x20is\x20'+'not\x20persis'+'tent'));return;}this['_anchors']['forget'](this['_uuid'],_0x4e14ed=>{this['_uuid']=null,_0x24cdf6==null||_0x24cdf6(_0x4e14ed),this['fire']('forget');});}get['uuid'](){return this['_uuid'];}get['persistent'](){return!!this['_uuid'];}}h(Io,'EVENT_DEST'+'ROY','destroy'),h(Io,'EVENT_CHAN'+'GE','change'),h(Io,'EVENT_PERS'+'IST','persist'),h(Io,'EVENT_FORG'+'ET','forget');var VS;class on extends me{constructor(_0x1cb2c9){super(),h(this,'manager'),h(this,'_supported',Ae['browser']&&!!window['XRAnchor']),h(this,'_available',!(-0x161*0x1+-0x14a1+0x1603)),h(this,'_checkingA'+'vailabilit'+'y',!(-0xc15*-0x1+0x1b35+-0x2749)),h(this,'_persisten'+'ce',Ae['browser']&&!!((VS=window==null?void(0x2*0xc9+-0x63*0x47+-0x2f*-0x8d):window['XRSession'])!=null&&VS['prototype']['restorePer'+'sistentAnc'+'hor'])),h(this,'_creationQ'+'ueue',[]),h(this,'_index',new Map()),h(this,'_indexByUu'+'id',new Map()),h(this,'_list',[]),h(this,'_callbacks'+'Anchors',new Map()),(this['manager']=_0x1cb2c9,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){var _0x32db7c;const _0x7ae535=((_0x32db7c=this['manager']['session']['enabledFea'+'tures'])==null?void(0x4e5*0x7+0x1*0xf19+0x144*-0x27):_0x32db7c['indexOf']('anchors'))>=0x6b3*0x5+0x24bd+-0x136*0x3a;_0x7ae535&&(this['_available']=_0x7ae535,this['fire']('available'));}['_onSession'+'End'](){if(!this['_available'])return;this['_available']=!(-0xa96+-0x94c+0x6a1*0x3);for(let _0x3001f4=-0x13*0x1e5+0x1*0x18f5+-0x13a*-0x9;_0x3001f4<this['_creationQ'+'ueue']['length'];_0x3001f4++)this['_creationQ'+'ueue'][_0x3001f4]['callback']&&this['_creationQ'+'ueue'][_0x3001f4]['callback'](new Error('session\x20en'+'ded'),null);this['_creationQ'+'ueue']['length']=0x1994+0xf31*0x1+-0x28c5,this['_index']['clear'](),this['_indexByUu'+'id']['clear']();let _0x5202ac=this['_list']['length'];for(;_0x5202ac--;)this['_list'][_0x5202ac]['destroy']();this['_list']['length']=-0x1*-0x99a+0xe75*-0x2+0x1350,this['fire']('unavailabl'+'e');}['_createAnc'+'hor'](_0x34f896,_0x1ee8a5=null){const _0x33c585=new Io(this,_0x34f896,_0x1ee8a5);return this['_index']['set'](_0x34f896,_0x33c585),_0x1ee8a5&&this['_indexByUu'+'id']['set'](_0x1ee8a5,_0x33c585),this['_list']['push'](_0x33c585),_0x33c585['once']('destroy',this['_onAnchorD'+'estroy'],this),_0x33c585;}['_onAnchorD'+'estroy'](_0x519ce4,_0x275a13){this['_index']['delete'](_0x519ce4),_0x275a13['uuid']&&this['_indexByUu'+'id']['delete'](_0x275a13['uuid']);const _0x122316=this['_list']['indexOf'](_0x275a13);_0x122316!==-(0x90a+0x1*0x1af+-0xab8)&&this['_list']['splice'](_0x122316,0xdf8+0x7a2*-0x3+0x8ef*0x1),this['fire']('destroy',_0x275a13);}['create'](_0x3341c9,_0x97b7e7,_0x3a0726){if(!this['_available']){_0x3a0726==null||_0x3a0726(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(window['XRHitTestR'+'esult']&&_0x3341c9 instanceof XRHitTestResult){const _0x17a7b3=_0x3341c9;if(_0x3a0726=_0x97b7e7,!this['_supported']){_0x3a0726==null||_0x3a0726(new Error('Anchors\x20AP'+'I\x20is\x20not\x20s'+'upported'),null);return;}if(!_0x17a7b3['createAnch'+'or']){_0x3a0726==null||_0x3a0726(new Error('Creating\x20A'+'nchor\x20from'+'\x20Hit\x20Test\x20'+'is\x20not\x20sup'+'ported'),null);return;}_0x17a7b3['createAnch'+'or']()['then'](_0x221d4b=>{const _0x1ae193=this['_createAnc'+'hor'](_0x221d4b);_0x3a0726==null||_0x3a0726(null,_0x1ae193),this['fire']('add',_0x1ae193);})['catch'](_0x5861a3=>{_0x3a0726==null||_0x3a0726(_0x5861a3,null),this['fire']('error',_0x5861a3);});}else this['_creationQ'+'ueue']['push']({'transform':new XRRigidTransform(_0x3341c9,_0x97b7e7),'callback':_0x3a0726});}['restore'](_0x9d6b4f,_0x37c55d){if(!this['_available']){_0x37c55d==null||_0x37c55d(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(!this['_persisten'+'ce']){_0x37c55d==null||_0x37c55d(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'),null);return;}if(!this['manager']['active']){_0x37c55d==null||_0x37c55d(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'),null);return;}this['manager']['session']['restorePer'+'sistentAnc'+'hor'](_0x9d6b4f)['then'](_0x20e233=>{const _0x428092=this['_createAnc'+'hor'](_0x20e233,_0x9d6b4f);_0x37c55d==null||_0x37c55d(null,_0x428092),this['fire']('add',_0x428092);})['catch'](_0x2f54f9=>{_0x37c55d==null||_0x37c55d(_0x2f54f9,null),this['fire']('error',_0x2f54f9);});}['forget'](_0x1664e3,_0x5e9c53){if(!this['_available']){_0x5e9c53==null||_0x5e9c53(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'));return;}if(!this['_persisten'+'ce']){_0x5e9c53==null||_0x5e9c53(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'));return;}if(!this['manager']['active']){_0x5e9c53==null||_0x5e9c53(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'));return;}this['manager']['session']['deletePers'+'istentAnch'+'or'](_0x1664e3)['then'](()=>{_0x5e9c53==null||_0x5e9c53(null);})['catch'](_0x20bbd2=>{_0x5e9c53==null||_0x5e9c53(_0x20bbd2),this['fire']('error',_0x20bbd2);});}['update'](_0x364f31){if(!this['_available']){!this['manager']['session']['enabledFea'+'tures']&&!this['_checkingA'+'vailabilit'+'y']&&(this['_checkingA'+'vailabilit'+'y']=!(0x985*0x4+0x4*-0x2e7+-0x1a78),_0x364f31['createAnch'+'or'](new XRRigidTransform(),this['manager']['_reference'+'Space'])['then'](_0x3f5f4a=>{_0x3f5f4a['delete'](),this['manager']['active']&&(this['_available']=!(0x9*0x15f+-0x14ae+0x3d*0x23),this['fire']('available'));})['catch'](()=>{}));return;}if(this['_creationQ'+'ueue']['length']){for(let _0x4738=-0x30e*0x8+0x2*-0xe71+0x3552;_0x4738<this['_creationQ'+'ueue']['length'];_0x4738++){const _0xd85acb=this['_creationQ'+'ueue'][_0x4738];_0x364f31['createAnch'+'or'](_0xd85acb['transform'],this['manager']['_reference'+'Space'])['then'](_0x1f2d21=>{_0xd85acb['callback']&&this['_callbacks'+'Anchors']['set'](_0x1f2d21,_0xd85acb['callback']);})['catch'](_0x7194d3=>{_0xd85acb['callback']&&_0xd85acb['callback'](_0x7194d3,null),this['fire']('error',_0x7194d3);});}this['_creationQ'+'ueue']['length']=0x1*0x3a1+0x1ced*-0x1+0x194c;}for(const [_0x334a7a,_0x1d7566]of this['_index'])_0x364f31['trackedAnc'+'hors']['has'](_0x334a7a)||(this['_index']['delete'](_0x334a7a),_0x1d7566['destroy']());for(let _0x438892=-0x23f7+-0x1*-0x6d3+0x1d24;_0x438892<this['_list']['length'];_0x438892++)this['_list'][_0x438892]['update'](_0x364f31);for(const _0x14f153 of _0x364f31['trackedAnc'+'hors']){if(this['_index']['has'](_0x14f153))continue;try{const _0x7aece7=_0x14f153['anchorSpac'+'e'];}catch{continue;}const _0x127836=this['_createAnc'+'hor'](_0x14f153);_0x127836['update'](_0x364f31);const _0x122b87=this['_callbacks'+'Anchors']['get'](_0x14f153);_0x122b87&&(this['_callbacks'+'Anchors']['delete'](_0x14f153),_0x122b87(null,_0x127836)),this['fire']('add',_0x127836);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['persistenc'+'e'](){return this['_persisten'+'ce'];}get['uuids'](){return!this['_available']||!this['_persisten'+'ce']||!this['manager']['active']?null:this['manager']['session']['persistent'+'Anchors'];}get['list'](){return this['_list'];}}h(on,'EVENT_AVAI'+'LABLE','available'),h(on,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(on,'EVENT_ERRO'+'R','error'),h(on,'EVENT_ADD','add'),h(on,'EVENT_DEST'+'ROY','destroy');class Ju extends me{constructor(_0x1b11f0,_0xe1ed84){super(),h(this,'_meshDetec'+'tion'),h(this,'_xrMesh'),h(this,'_lastChang'+'ed',-0x19*-0x159+-0xea0+-0x1311),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_meshDetec'+'tion']=_0x1b11f0,this['_xrMesh']=_0xe1ed84,this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime']);}get['xrMesh'](){return this['_xrMesh'];}get['label'](){return this['_xrMesh']['semanticLa'+'bel']||'';}get['vertices'](){return this['_xrMesh']['vertices'];}get['indices'](){return this['_xrMesh']['indices'];}['destroy'](){this['_xrMesh']&&(this['_xrMesh']=null,this['fire']('remove'));}['update'](_0x350ba9){const _0x5ab0e7=this['_meshDetec'+'tion']['_manager'],_0x57f8b2=_0x350ba9['getPose'](this['_xrMesh']['meshSpace'],_0x5ab0e7['_reference'+'Space']);_0x57f8b2&&(this['_position']['copy'](_0x57f8b2['transform']['position']),this['_rotation']['copy'](_0x57f8b2['transform']['orientatio'+'n'])),this['_lastChang'+'ed']!==this['_xrMesh']['lastChange'+'dTime']&&(this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}}h(Ju,'EVENT_REMO'+'VE','remove'),h(Ju,'EVENT_CHAN'+'GE','change');class Lo extends me{constructor(_0x1159ea){super(),h(this,'_manager'),h(this,'_supported',Ae['browser']&&!!window['XRMesh']),h(this,'_available',!(-0xc3e+-0x772+0x13b1*0x1)),h(this,'_index',new Map()),h(this,'_list',[]),(this['_manager']=_0x1159ea,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['update'](_0x34b382){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x34b382['detectedMe'+'shes']['size'])this['_available']=!(0xbba*-0x1+-0x511+-0x599*-0x3),this['fire']('available');else return;}for(const _0x34a85c of _0x34b382['detectedMe'+'shes']){let _0x5c4ddf=this['_index']['get'](_0x34a85c);_0x5c4ddf?_0x5c4ddf['update'](_0x34b382):(_0x5c4ddf=new Ju(this,_0x34a85c),this['_index']['set'](_0x34a85c,_0x5c4ddf),this['_list']['push'](_0x5c4ddf),_0x5c4ddf['update'](_0x34b382),this['fire']('add',_0x5c4ddf));}for(const _0x4962f9 of this['_index']['values']())_0x34b382['detectedMe'+'shes']['has'](_0x4962f9['xrMesh'])||this['_removeMes'+'h'](_0x4962f9);}['_removeMes'+'h'](_0x34035b){this['_index']['delete'](_0x34035b['xrMesh']),this['_list']['splice'](this['_list']['indexOf'](_0x34035b),0x518*-0x4+-0x20fe+0x1*0x355f),_0x34035b['destroy'](),this['fire']('remove',_0x34035b);}['_onSession'+'Start'](){if(this['_manager']['session']['enabledFea'+'tures']){const _0x1c2017=this['_manager']['session']['enabledFea'+'tures']['indexOf']('mesh-detec'+'tion')!==-(-0x1*0x127d+0x151f+-0x1*0x2a1);if(!_0x1c2017)return;this['_available']=_0x1c2017,this['fire']('available');}}['_onSession'+'End'](){if(this['_available']){this['_available']=!(-0x1164+0x2389+-0x1224);for(const _0x418da7 of this['_index']['values']())this['_removeMes'+'h'](_0x418da7);this['fire']('unavailabl'+'e');}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['meshes'](){return this['_list'];}}h(Lo,'EVENT_AVAI'+'LABLE','available'),h(Lo,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Lo,'EVENT_ADD','add'),h(Lo,'EVENT_REMO'+'VE','remove');class O0 extends me{constructor(_0x2b2b3c,_0x4d1e0e,_0x5db156){super(),h(this,'_manager'),h(this,'_xrView'),h(this,'_positionD'+'ata',new Float32Array(0x11*-0xb9+0x57b*-0x2+-0xd*-0x1ca)),h(this,'_viewport',new re()),h(this,'_projMat',new te()),h(this,'_projViewO'+'ffMat',new te()),h(this,'_viewMat',new te()),h(this,'_viewOffMa'+'t',new te()),h(this,'_viewMat3',new _i()),h(this,'_viewInvMa'+'t',new te()),h(this,'_viewInvOf'+'fMat',new te()),h(this,'_xrCamera',null),h(this,'_textureCo'+'lor',null),h(this,'_textureDe'+'pth',null),h(this,'_depthInfo',null),h(this,'_emptyDept'+'hBuffer',new Uint8Array(0x3bd*0x3+0x7*0x1d5+-0x17ea)),h(this,'_depthMatr'+'ix',new te()),(this['_manager']=_0x2b2b3c,this['_xrView']=_0x4d1e0e);const _0x482a56=this['_manager']['app']['graphicsDe'+'vice'];if(this['_manager']['views']['supportedC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera'],this['_manager']['views']['availableC'+'olor']&&this['_xrCamera']&&(this['_textureCo'+'lor']=new _e(_0x482a56,{'format':Cr,'mipmaps':!(-0x1*0x14e1+0x2689+0x1*-0x11a7),'addressU':ue,'addressV':ue,'minFilter':vt,'magFilter':vt,'width':this['_xrCamera']['width'],'height':this['_xrCamera']['height'],'name':'XrView-'+this['_xrView']['eye']+'-Color'}))),this['_manager']['views']['supportedD'+'epth']&&this['_manager']['views']['availableD'+'epth']){const _0x9ecb55=this['_manager']['views']['depthGpuOp'+'timized']?Te:vt;this['_textureDe'+'pth']=new _e(_0x482a56,{'format':this['_manager']['views']['depthPixel'+'Format'],'arrayLength':_0x5db156===0x263*-0xd+-0x1*-0x1177+0xd91?-0xd11+0x536*0x6+-0x1233:_0x5db156,'mipmaps':!(-0x8*-0x3ca+-0x73*-0xd+-0x2426),'addressU':ue,'addressV':ue,'minFilter':_0x9ecb55,'magFilter':_0x9ecb55,'width':0x4,'height':0x4,'name':'XrView-'+this['_xrView']['eye']+'-Depth'});for(let _0x3ec9e8=0x8*-0x32+0x901+-0x771;_0x3ec9e8<this['_textureDe'+'pth']['_levels']['length'];_0x3ec9e8++)this['_textureDe'+'pth']['_levels'][_0x3ec9e8]=this['_emptyDept'+'hBuffer'];this['_textureDe'+'pth']['upload']();}(this['_textureCo'+'lor']||this['_textureDe'+'pth'])&&_0x482a56['on']('devicelost',this['_onDeviceL'+'ost'],this);}get['textureCol'+'or'](){return this['_textureCo'+'lor'];}get['textureDep'+'th'](){return this['_textureDe'+'pth'];}get['depthUvMat'+'rix'](){return this['_depthMatr'+'ix'];}get['depthValue'+'ToMeters'](){var _0x5e8195;return((_0x5e8195=this['_depthInfo'])==null?void(-0x2404+-0x1*-0x1feb+0x1*0x419):_0x5e8195['rawValueTo'+'Meters'])||-0x67a+0x142+0x538;}get['eye'](){return this['_xrView']['eye'];}get['viewport'](){return this['_viewport'];}get['projMat'](){return this['_projMat'];}get['projViewOf'+'fMat'](){return this['_projViewO'+'ffMat'];}get['viewOffMat'](){return this['_viewOffMa'+'t'];}get['viewInvOff'+'Mat'](){return this['_viewInvOf'+'fMat'];}get['viewMat3'](){return this['_viewMat3'];}get['positionDa'+'ta'](){return this['_positionD'+'ata'];}['update'](_0x8311a5,_0x214192){this['_xrView']=_0x214192,this['_manager']['views']['availableC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera']);const _0x253f6e=_0x8311a5['session']['renderStat'+'e']['baseLayer']['getViewpor'+'t'](this['_xrView']);this['_viewport']['x']=_0x253f6e['x'],this['_viewport']['y']=_0x253f6e['y'],this['_viewport']['z']=_0x253f6e['width'],this['_viewport']['w']=_0x253f6e['height'],this['_projMat']['set'](this['_xrView']['projection'+'Matrix']),this['_viewMat']['set'](this['_xrView']['transform']['inverse']['matrix']),this['_viewInvMa'+'t']['set'](this['_xrView']['transform']['matrix']),this['_updateTex'+'tureColor'](),this['_updateDep'+'th'](_0x8311a5);}['_updateTex'+'tureColor'](){if(!this['_manager']['views']['availableC'+'olor']||!this['_xrCamera']||!this['_textureCo'+'lor'])return;const _0x44630a=this['_manager']['webglBindi'+'ng'];if(!_0x44630a)return;const _0x51d2c7=_0x44630a['getCameraI'+'mage'](this['_xrCamera']);if(!_0x51d2c7)return;const _0x9bb022=this['_manager']['app']['graphicsDe'+'vice'],_0x27ed6b=_0x9bb022['gl'];if(!this['_frameBuff'+'erSource'])this['_frameBuff'+'erSource']=_0x27ed6b['createFram'+'ebuffer'](),this['_frameBuff'+'er']=_0x27ed6b['createFram'+'ebuffer']();else{const _0x1ba166=_0x27ed6b['COLOR_ATTA'+'CHMENT0'],_0x18b67f=this['_xrCamera']['width'],_0x660507=this['_xrCamera']['height'];_0x9bb022['setFramebu'+'ffer'](this['_frameBuff'+'erSource']),_0x27ed6b['framebuffe'+'rTexture2D'](_0x27ed6b['FRAMEBUFFE'+'R'],_0x1ba166,_0x27ed6b['TEXTURE_2D'],_0x51d2c7,0x1d*-0x17+-0x1c1d+0x1eb8),_0x9bb022['setFramebu'+'ffer'](this['_frameBuff'+'er']),_0x27ed6b['framebuffe'+'rTexture2D'](_0x27ed6b['FRAMEBUFFE'+'R'],_0x1ba166,_0x27ed6b['TEXTURE_2D'],this['_textureCo'+'lor']['impl']['_glTexture'],0x1*-0x6d9+0x65b*-0x1+0xd34),_0x27ed6b['bindFrameb'+'uffer'](_0x27ed6b['READ_FRAME'+'BUFFER'],this['_frameBuff'+'erSource']),_0x27ed6b['bindFrameb'+'uffer'](_0x27ed6b['DRAW_FRAME'+'BUFFER'],this['_frameBuff'+'er']),_0x27ed6b['blitFrameb'+'uffer'](-0x1ca9+-0x1a47+0x36f0,_0x660507,_0x18b67f,-0x451+0xe*-0xc2+0xeed,0x4f8+0x1*0x1f8f+-0x2487*0x1,-0xe7d+-0x89*-0x29+0x1*-0x774,_0x18b67f,_0x660507,_0x27ed6b['COLOR_BUFF'+'ER_BIT'],_0x27ed6b['NEAREST']);}}['_updateDep'+'th'](_0x5d50e4){var _0x381c6c,_0x5aa334;if(!this['_manager']['views']['availableD'+'epth']||!this['_textureDe'+'pth'])return;const _0x14c8b8=this['_manager']['views']['depthGpuOp'+'timized'],_0x37d194=_0x14c8b8?this['_manager']['webglBindi'+'ng']:_0x5d50e4;if(!_0x37d194){this['_depthInfo']=null;return;}const _0x4d80d8=_0x37d194['getDepthIn'+'formation'](this['_xrView']);if(!_0x4d80d8){this['_depthInfo']=null;return;}let _0x50d8e0=!this['_depthInfo']!=!_0x4d80d8;this['_depthInfo']=_0x4d80d8;const _0x3d4739=((_0x381c6c=this['_depthInfo'])==null?void(0x3*0x5ff+-0x486*-0x4+-0x2415):_0x381c6c['width'])||0x692+-0x1a4d+0x13bf,_0x2bbec6=((_0x5aa334=this['_depthInfo'])==null?void(-0x842+-0xe57*0x1+0x1bd*0xd):_0x5aa334['height'])||-0x1e56+-0x1cae+0x3b08;let _0x20f12e=!(-0x8db+0x2429+-0x1b4d);if((this['_textureDe'+'pth']['width']!==_0x3d4739||this['_textureDe'+'pth']['height']!==_0x2bbec6)&&(this['_textureDe'+'pth']['_width']=_0x3d4739,this['_textureDe'+'pth']['_height']=_0x2bbec6,_0x50d8e0=!(0x270d+0x1*0xb75+-0xa1a*0x5),_0x20f12e=!(-0x15f*-0x13+-0x196*-0x1+-0x1ba3)),_0x50d8e0&&(this['_depthInfo']?this['_depthMatr'+'ix']['data']['set'](this['_depthInfo']['normDepthB'+'ufferFromN'+'ormView']['matrix']):this['_depthMatr'+'ix']['setIdentit'+'y']()),this['_depthInfo']){if(_0x14c8b8){if(this['_depthInfo']['texture']){const _0x10cfdd=this['_manager']['app']['graphicsDe'+'vice']['gl'];switch(this['_textureDe'+'pth']['impl']['_glTexture']=this['_depthInfo']['texture'],this['_depthInfo']['textureTyp'+'e']==='texture-ar'+'ray'?this['_textureDe'+'pth']['impl']['_glTarget']=_0x10cfdd['TEXTURE_2D'+'_ARRAY']:this['_textureDe'+'pth']['impl']['_glTarget']=_0x10cfdd['TEXTURE_2D'],this['_manager']['views']['depthPixel'+'Format']){case Ji:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x10cfdd['R32F'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x10cfdd['FLOAT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x10cfdd['RED'];break;case $i:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x10cfdd['DEPTH_COMP'+'ONENT16'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x10cfdd['UNSIGNED_S'+'HORT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x10cfdd['DEPTH_COMP'+'ONENT'];break;}this['_textureDe'+'pth']['impl']['_glCreated']=!(0x1145*0x2+-0x8b+-0x21ff);}}else this['_textureDe'+'pth']['_levels'][0x2*0x807+0xce2+0x73c*-0x4]=new Uint8Array(this['_depthInfo']['data']),this['_textureDe'+'pth']['upload']();}else this['_textureDe'+'pth']['_levels'][-0x1871*-0x1+-0x349*-0x3+-0x1*0x224c]=this['_emptyDept'+'hBuffer'],this['_textureDe'+'pth']['upload']();_0x20f12e&&this['fire']('depth:resi'+'ze',_0x3d4739,_0x2bbec6);}['updateTran'+'sforms'](_0x5a4b49){_0x5a4b49?(this['_viewInvOf'+'fMat']['mul2'](_0x5a4b49,this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewInvOf'+'fMat'])['invert']()):(this['_viewInvOf'+'fMat']['copy'](this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewMat'])),this['_viewMat3']['setFromMat'+'4'](this['_viewOffMa'+'t']),this['_projViewO'+'ffMat']['mul2'](this['_projMat'],this['_viewOffMa'+'t']),this['_positionD'+'ata'][-0x247b+-0x2*-0x6b9+0x1*0x1709]=this['_viewInvOf'+'fMat']['data'][-0x506+0x4*-0x617+0x1d6e],this['_positionD'+'ata'][0xb+-0x75e+0x754*0x1]=this['_viewInvOf'+'fMat']['data'][0xa15*-0x3+-0x1*-0x1231+0xc1b],this['_positionD'+'ata'][-0x1*0xd78+-0x39*0x97+-0x3*-0xfb3]=this['_viewInvOf'+'fMat']['data'][0x25c2+-0x869*0x2+-0x252*0x9];}['_onDeviceL'+'ost'](){this['_frameBuff'+'erSource']=null,this['_frameBuff'+'er']=null,this['_depthInfo']=null;}['getDepth'](_0x2976ff,_0x2a3a22){var _0x33a328;return this['_manager']['views']['depthGpuOp'+'timized']?null:((_0x33a328=this['_depthInfo'])==null?void(0xbd4*0x3+-0x8e9+0x1a93*-0x1):_0x33a328['getDepthIn'+'Meters'](_0x2976ff,_0x2a3a22))??null;}['destroy'](){if(this['_depthInfo']=null,this['_textureCo'+'lor']&&(this['_textureCo'+'lor']['destroy'](),this['_textureCo'+'lor']=null),this['_textureDe'+'pth']&&(this['_textureDe'+'pth']['destroy'](),this['_textureDe'+'pth']=null),this['_frameBuff'+'erSource']){const _0x435df2=this['_manager']['app']['graphicsDe'+'vice']['gl'];_0x435df2['deleteFram'+'ebuffer'](this['_frameBuff'+'erSource']),this['_frameBuff'+'erSource']=null,_0x435df2['deleteFram'+'ebuffer'](this['_frameBuff'+'er']),this['_frameBuff'+'er']=null;}}}h(O0,'EVENT_DEPT'+'HRESIZE','depth:resi'+'ze');class Bh extends me{constructor(_0x23dd08){super(),h(this,'_manager'),h(this,'_index',new Map()),h(this,'_indexTmp',new Map()),h(this,'_list',[]),h(this,'_supported'+'Color',Ae['browser']&&!!window['XRCamera']&&!!window['XRWebGLBin'+'ding']),h(this,'_supported'+'Depth',Ae['browser']&&!!window['XRDepthInf'+'ormation']),h(this,'_available'+'Color',!(0x73b+-0x26c2+0x4*0x7e2)),h(this,'_available'+'Depth',!(-0x1cab+-0x14c6+-0x3172*-0x1)),h(this,'_depthUsag'+'e',''),h(this,'_depthForm'+'at',''),h(this,'_depthForm'+'ats',{[M0]:ap,[D0]:$i,[I0]:Ji}),(this['_manager']=_0x23dd08,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}get['list'](){return this['_list'];}get['supportedC'+'olor'](){return this['_supported'+'Color'];}get['supportedD'+'epth'](){return this['_supported'+'Depth'];}get['availableC'+'olor'](){return this['_available'+'Color'];}get['availableD'+'epth'](){return this['_available'+'Depth'];}get['depthUsage'](){return this['_depthUsag'+'e'];}get['depthGpuOp'+'timized'](){return this['_depthUsag'+'e']===P0;}get['depthForma'+'t'](){return this['_depthForm'+'at'];}get['depthPixel'+'Format'](){return this['_depthForm'+'ats'][this['_depthForm'+'at']]??null;}['update'](_0x3cfb86,_0x392eec){for(let _0x1bb9b0=0xb41+-0x2*-0x1e1+-0xf03;_0x1bb9b0<_0x392eec['length'];_0x1bb9b0++)this['_indexTmp']['set'](_0x392eec[_0x1bb9b0]['eye'],_0x392eec[_0x1bb9b0]);for(const [_0x17bbbc,_0x34485e]of this['_indexTmp']){let _0x5a099c=this['_index']['get'](_0x17bbbc);_0x5a099c?_0x5a099c['update'](_0x3cfb86,_0x34485e):(_0x5a099c=new O0(this['_manager'],_0x34485e,_0x392eec['length']),this['_index']['set'](_0x17bbbc,_0x5a099c),this['_list']['push'](_0x5a099c),_0x5a099c['update'](_0x3cfb86,_0x34485e),this['fire']('add',_0x5a099c));}for(const [_0x31f0fd,_0x4062a6]of this['_index']){if(this['_indexTmp']['has'](_0x31f0fd))continue;_0x4062a6['destroy'](),this['_index']['delete'](_0x31f0fd);const _0x823ac6=this['_list']['indexOf'](_0x4062a6);_0x823ac6!==-(0x505+0x4d*0x31+-0xd*0x185)&&this['_list']['splice'](_0x823ac6,-0x1*-0xbff+-0x2b*0x17+-0x821),this['fire']('remove',_0x4062a6);}this['_indexTmp']['clear']();}['get'](_0x357be9){return this['_index']['get'](_0x357be9)||null;}['_onSession'+'Start'](){if(this['_manager']['type']===$o&&this['_manager']['session']['enabledFea'+'tures']&&(this['_available'+'Color']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('camera-acc'+'ess')!==-(0x30c+-0x2*-0xeeb+-0x20e1),this['_available'+'Depth']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('depth-sens'+'ing')!==-(0x1*-0x661+0xb36+-0x3*0x19c),this['_available'+'Depth'])){const _0x3c9077=this['_manager']['session'];this['_depthUsag'+'e']=_0x3c9077['depthUsage'],this['_depthForm'+'at']=_0x3c9077['depthDataF'+'ormat'];}}['_onSession'+'End'](){for(const _0x4f7741 of this['_index']['values']())_0x4f7741['destroy']();this['_index']['clear'](),this['_available'+'Color']=!(0x246d+-0x1*0xc07+0x1*-0x1865),this['_available'+'Depth']=!(0x18ce+0x4*-0x3a6+-0xa35*0x1),this['_depthUsag'+'e']='',this['_depthForm'+'at']='',this['_list']['length']=-0x37a+0x3*-0x305+0xc89;}}h(Bh,'EVENT_ADD','add'),h(Bh,'EVENT_REMO'+'VE','remove');class ln extends me{constructor(_0x1a6045){super(),h(this,'app'),h(this,'_supported',Ae['browser']&&!!navigator['xr']),h(this,'_available',{}),h(this,'_type',null),h(this,'_spaceType',null),h(this,'_session',null),h(this,'_baseLayer',null),h(this,'webglBindi'+'ng',null),h(this,'_reference'+'Space',null),h(this,'domOverlay'),h(this,'hitTest'),h(this,'imageTrack'+'ing'),h(this,'planeDetec'+'tion'),h(this,'meshDetect'+'ion'),h(this,'input'),h(this,'lightEstim'+'ation'),h(this,'views'),h(this,'anchors'),h(this,'_camera',null),h(this,'_localPosi'+'tion',new D()),h(this,'_localRota'+'tion',new le()),h(this,'_depthNear',-0x200a+-0x2327*0x1+0x4331+0.1),h(this,'_depthFar',-0x3*0x469+0xdb*-0x11+-0x2*-0xfd7),h(this,'_supported'+'FrameRates',null),h(this,'_width',0x42c+0x16bc+-0x1ae8),h(this,'_height',-0x2*0x85d+-0x4c2+0x5*0x44c),h(this,'_framebuff'+'erScaleFac'+'tor',0x1047+-0xbd*0x13+-0x23f*0x1),(this['app']=_0x1a6045,this['_available'][lU]=!(-0x24af*0x1+0x165a*0x1+0xe56),this['_available'][cU]=!(0x12ef+0x1f7*0x2+-0x1a2*0xe),this['_available'][$o]=!(0xa6*0x2a+0x1c92+-0x37cd),this['views']=new Bh(this),this['domOverlay']=new fU(this),this['hitTest']=new jr(this),this['imageTrack'+'ing']=new L0(this),this['planeDetec'+'tion']=new Do(this),this['meshDetect'+'ion']=new Lo(this),this['input']=new Li(this),this['lightEstim'+'ation']=new Zu(this),this['anchors']=new on(this),this['views']=new Bh(this),this['_supported']&&(navigator['xr']['addEventLi'+'stener']('devicechan'+'ge',()=>{this['_deviceAva'+'ilabilityC'+'heck']();}),this['_deviceAva'+'ilabilityC'+'heck'](),this['app']['graphicsDe'+'vice']['on']('devicelost',this['_onDeviceL'+'ost'],this),this['app']['graphicsDe'+'vice']['on']('devicerest'+'ored',this['_onDeviceR'+'estored'],this)),this['isPC']=z0());}['destroy'](){}['start'](_0x213522,_0x34e720,_0x3f7842,_0x79aad8){let _0x41a7c1=_0x79aad8;if(typeof _0x79aad8=='object'&&(_0x41a7c1=_0x79aad8['callback']),!this['_available'][_0x34e720]){_0x41a7c1&&_0x41a7c1(new Error('XR\x20is\x20not\x20'+'available'));return;}if(this['_session']){_0x41a7c1&&_0x41a7c1(new Error('XR\x20session'+'\x20is\x20alread'+'y\x20started'));return;}this['_camera']=_0x213522,this['_camera']['camera']['xr']=this,this['_type']=_0x34e720,this['_spaceType']=_0x3f7842,this['_framebuff'+'erScaleFac'+'tor']=(_0x79aad8==null?void(0x157c+0x2612+0x3*-0x13da):_0x79aad8['framebuffe'+'rScaleFact'+'or'])??-0x12b*-0x6+0x589+-0xc8a,this['_setClipPl'+'anes'](_0x213522['nearClip'],_0x213522['farClip']);const _0x550d3b={'requiredFeatures':[_0x3f7842],'optionalFeatures':[]},_0x156e8f=this['app']['graphicsDe'+'vice'];_0x156e8f!=null&&_0x156e8f['isWebGPU']&&_0x550d3b['requiredFe'+'atures']['push']('webgpu');const _0x5016a1=_0x156e8f==null?void(-0x1b37+-0x8af*0x3+-0xe*-0x3ce):_0x156e8f['isWebGL2'];if(_0x34e720===$o){if(_0x550d3b['optionalFe'+'atures']['push']('light-esti'+'mation'),_0x550d3b['optionalFe'+'atures']['push']('hit-test'),_0x79aad8&&(_0x79aad8['imageTrack'+'ing']&&this['imageTrack'+'ing']['supported']&&_0x550d3b['optionalFe'+'atures']['push']('image-trac'+'king'),_0x79aad8['planeDetec'+'tion']&&_0x550d3b['optionalFe'+'atures']['push']('plane-dete'+'ction'),_0x79aad8['meshDetect'+'ion']&&_0x550d3b['optionalFe'+'atures']['push']('mesh-detec'+'tion')),this['domOverlay']['supported']&&this['domOverlay']['root']&&(_0x550d3b['optionalFe'+'atures']['push']('dom-overla'+'y'),_0x550d3b['domOverlay']={'root':this['domOverlay']['root']}),_0x79aad8&&_0x79aad8['anchors']&&this['anchors']['supported']&&_0x550d3b['optionalFe'+'atures']['push']('anchors'),_0x79aad8&&_0x79aad8['depthSensi'+'ng']&&this['views']['supportedD'+'epth']){_0x550d3b['optionalFe'+'atures']['push']('depth-sens'+'ing');const _0x50e1c1=[],_0x3d9ebe=[];if(_0x50e1c1['push'](P0,dU),_0x3d9ebe['push'](I0,M0,D0),_0x79aad8['depthSensi'+'ng']['usagePrefe'+'rence']){const _0x5e8222=_0x50e1c1['indexOf'](_0x79aad8['depthSensi'+'ng']['usagePrefe'+'rence']);_0x5e8222!==-(0x214c+-0x950+-0x17fb)&&_0x50e1c1['splice'](_0x5e8222,-0x2459+-0x4*-0x9b8+-0x286),_0x50e1c1['unshift'](_0x79aad8['depthSensi'+'ng']['usagePrefe'+'rence']);}if(_0x79aad8['depthSensi'+'ng']['dataFormat'+'Preference']){const _0x345584=_0x3d9ebe['indexOf'](_0x79aad8['depthSensi'+'ng']['dataFormat'+'Preference']);_0x345584!==-(0xca0+0x7+0x653*-0x2)&&_0x3d9ebe['splice'](_0x345584,-0x2*-0x39a+0x766*0x4+-0x24cb),_0x3d9ebe['unshift'](_0x79aad8['depthSensi'+'ng']['dataFormat'+'Preference']);}_0x550d3b['depthSensi'+'ng']={'usagePreference':_0x50e1c1,'dataFormatPreference':_0x3d9ebe};}_0x5016a1&&_0x79aad8&&_0x79aad8['cameraColo'+'r']&&this['views']['supportedC'+'olor']&&_0x550d3b['optionalFe'+'atures']['push']('camera-acc'+'ess');}_0x550d3b['optionalFe'+'atures']['push']('hand-track'+'ing'),_0x79aad8&&_0x79aad8['optionalFe'+'atures']&&(_0x550d3b['optionalFe'+'atures']=_0x550d3b['optionalFe'+'atures']['concat'](_0x79aad8['optionalFe'+'atures'])),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['images']['length']?this['imageTrack'+'ing']['prepareIma'+'ges']((_0x4664d8,_0x1725e5)=>{if(_0x4664d8){_0x41a7c1&&_0x41a7c1(_0x4664d8),this['fire']('error',_0x4664d8);return;}_0x1725e5!==null&&(_0x550d3b['trackedIma'+'ges']=_0x1725e5),this['_onStartOp'+'tionsReady'](_0x34e720,_0x3f7842,_0x550d3b,_0x41a7c1);}):this['_onStartOp'+'tionsReady'](_0x34e720,_0x3f7842,_0x550d3b,_0x41a7c1);}['_onStartOp'+'tionsReady'](_0xa6a004,_0x519fcc,_0x1d3a09,_0x4106af){const _0x2ff981=this['isPC']?{'requiredFeatures':['local-floo'+'r']}:_0x1d3a09;navigator['xr']['requestSes'+'sion'](_0xa6a004,_0x2ff981)['then'](_0x7993e5=>{this['_onSession'+'Start'](_0x7993e5,_0x519fcc,_0x4106af);})['catch'](_0x4d0fd7=>{this['_camera']['camera']['xr']=null,this['_camera']=null,this['_type']=null,this['_spaceType']=null,_0x4106af&&_0x4106af(_0x4d0fd7),this['fire']('error',_0x4d0fd7);});}['end'](_0x240d00){if(!this['_session']){_0x240d00&&_0x240d00(new Error('XR\x20Session'+'\x20is\x20not\x20in'+'itialized'));return;}this['webglBindi'+'ng']=null,_0x240d00&&this['once']('end',_0x240d00),this['_session']['end']();}['isAvailabl'+'e'](_0x28118d){return this['_available'][_0x28118d];}['_deviceAva'+'ilabilityC'+'heck'](){for(const _0x50c3cf in this['_available'])this['_sessionSu'+'pportCheck'](_0x50c3cf);}['initiateRo'+'omCapture'](_0x5b7d42){if(!this['_session']){_0x5b7d42(new Error('Session\x20is'+'\x20not\x20activ'+'e'));return;}if(!this['_session']['initiateRo'+'omCapture']){_0x5b7d42(new Error('Session\x20do'+'es\x20not\x20sup'+'port\x20manua'+'l\x20room\x20cap'+'ture'));return;}this['_session']['initiateRo'+'omCapture']()['then'](()=>{_0x5b7d42&&_0x5b7d42(null);})['catch'](_0x501515=>{_0x5b7d42&&_0x5b7d42(_0x501515);});}['updateTarg'+'etFrameRat'+'e'](_0x2fe1be,_0x4fd35a){var _0x5bf19d;if(!((_0x5bf19d=this['_session'])!=null&&_0x5bf19d['updateTarg'+'etFrameRat'+'e'])){_0x4fd35a==null||_0x4fd35a(new Error('unable\x20to\x20'+'update\x20fra'+'meRate'));return;}this['_session']['updateTarg'+'etFrameRat'+'e'](_0x2fe1be)['then'](()=>{_0x4fd35a==null||_0x4fd35a();})['catch'](_0x1a69e6=>{_0x4fd35a==null||_0x4fd35a(_0x1a69e6);});}['_sessionSu'+'pportCheck'](_0x2e0bb1){navigator['xr']['isSessionS'+'upported'](_0x2e0bb1)['then'](_0x252302=>{this['_available'][_0x2e0bb1]!==_0x252302&&(this['_available'][_0x2e0bb1]=_0x252302,this['fire']('available',_0x2e0bb1,_0x252302),this['fire']('available:'+_0x2e0bb1,_0x252302));})['catch'](_0x32f10d=>{this['fire']('error',_0x32f10d);});}['_onSession'+'Start'](_0x46e9be,_0x330b79,_0xd80c97){let _0x81748=!(-0x3*0x853+0x3*-0x863+0x11*0x2f3);this['_session']=_0x46e9be;const _0x216cd3=()=>{this['fire']('visibility'+':change',_0x46e9be['visibility'+'State']);},_0x5d2311=()=>{this['_setClipPl'+'anes'](this['_camera']['nearClip'],this['_camera']['farClip']);},_0x4acac2=()=>{this['_camera']&&(this['_camera']['off']('set_nearCl'+'ip',_0x5d2311),this['_camera']['off']('set_farCli'+'p',_0x5d2311),this['_camera']['camera']['xr']=null,this['_camera']=null),_0x46e9be['removeEven'+'tListener']('end',_0x4acac2),_0x46e9be['removeEven'+'tListener']('visibility'+'change',_0x216cd3),_0x81748||this['fire']('end'),this['_session']=null,this['_reference'+'Space']=null,this['_width']=0x21b5+-0x2146*0x1+-0x25*0x3,this['_height']=-0x6a3*-0x3+-0xd38+-0x6b1,this['_type']=null,this['_spaceType']=null,this['app']['systems']&&this['app']['tick']();};_0x46e9be['addEventLi'+'stener']('end',_0x4acac2),_0x46e9be['addEventLi'+'stener']('visibility'+'change',_0x216cd3),this['_camera']['on']('set_nearCl'+'ip',_0x5d2311),this['_camera']['on']('set_farCli'+'p',_0x5d2311),w['assert'](window,'window\x20is\x20'+'needed\x20to\x20'+'scale\x20the\x20'+'XR\x20framebu'+'ffer.\x20Are\x20'+'you\x20runnin'+'g\x20XR\x20headl'+'ess?'),this['_createBas'+'eLayer'](),this['session']['supportedF'+'rameRates']?this['_supported'+'FrameRates']=Array['from'](this['session']['supportedF'+'rameRates']):this['_supported'+'FrameRates']=null,this['_session']['addEventLi'+'stener']('frameratec'+'hange',()=>{var _0x1bd294;this['fire']('frameratec'+'hange',(_0x1bd294=this['_session'])==null?void(-0x20ba*-0x1+-0x3*-0x7bd+-0x37f1):_0x1bd294['frameRate']);}),_0x46e9be['requestRef'+'erenceSpac'+'e'](_0x330b79)['then'](_0x2678eb=>{this['_reference'+'Space']=_0x2678eb,this['app']['tick'](),_0xd80c97&&_0xd80c97(null),this['fire']('start');})['catch'](_0x5b8c69=>{_0x81748=!(0x1e46+-0x6*-0x8+0xe*-0x22d),_0x46e9be['end'](),_0xd80c97&&_0xd80c97(_0x5b8c69),this['fire']('error',_0x5b8c69);});}['_setClipPl'+'anes'](_0x29ff46,_0x1390f1){this['_depthNear']===_0x29ff46&&this['_depthFar']===_0x1390f1||(this['_depthNear']=_0x29ff46,this['_depthFar']=_0x1390f1,this['_session']&&this['_session']['updateRend'+'erState']({'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_createBas'+'eLayer'](){const _0x1029a1=this['app']['graphicsDe'+'vice'],_0xd884df=_0x1029a1['maxPixelRa'+'tio']/window['devicePixe'+'lRatio']*this['_framebuff'+'erScaleFac'+'tor'];if(this['_baseLayer']=new XRWebGLLayer(this['_session'],_0x1029a1['gl'],{'alpha':!(0x11f1+-0x4*0x65b+0x17f*0x5),'depth':!(0x1*-0x829+-0xed7+0x1700),'stencil':!(-0x62e+0x1964+-0x1336),'framebufferScaleFactor':_0xd884df,'antialias':!(0x1*-0xd71+-0xa6c+0x17de)}),_0x1029a1!=null&&_0x1029a1['isWebGL2']&&window['XRWebGLBin'+'ding'])try{this['webglBindi'+'ng']=new XRWebGLBinding(this['_session'],_0x1029a1['gl']);}catch(_0x247556){this['fire']('error',_0x247556);}this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']});}['_onDeviceL'+'ost'](){this['_session']&&(this['webglBindi'+'ng']&&(this['webglBindi'+'ng']=null),this['_baseLayer']=null,this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_onDeviceR'+'estored'](){this['_session']&&setTimeout(()=>{this['app']['graphicsDe'+'vice']['gl']['makeXRComp'+'atible']()['then'](()=>{this['_createBas'+'eLayer']();})['catch'](_0x4add0e=>{this['fire']('error',_0x4add0e);});},0x25f4+0x1*-0x1e52+-0x1*0x7a2);}['update'](_0x1969ce){if(!this['_session'])return!(0x1067+0x1fa9+-0x300f);const _0x2a0d6a=_0x1969ce['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rWidth'],_0x5e0067=_0x1969ce['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rHeight'];(this['_width']!==_0x2a0d6a||this['_height']!==_0x5e0067)&&(this['_width']=_0x2a0d6a,this['_height']=_0x5e0067,this['app']['graphicsDe'+'vice']['setResolut'+'ion'](_0x2a0d6a,_0x5e0067));const _0x55a2f8=_0x1969ce['getViewerP'+'ose'](this['_reference'+'Space']);if(!_0x55a2f8)return!(-0x302+-0x3cd*0x2+-0x1*-0xa9d);const _0xd0884c=this['views']['list']['length'];this['views']['update'](_0x1969ce,_0x55a2f8['views']);const _0x55704f=_0x55a2f8['transform']['position'],_0x2d7698=_0x55a2f8['transform']['orientatio'+'n'];if(this['_localPosi'+'tion']['set'](_0x55704f['x'],_0x55704f['y'],_0x55704f['z']),this['_localRota'+'tion']['set'](_0x2d7698['x'],_0x2d7698['y'],_0x2d7698['z'],_0x2d7698['w']),_0xd0884c===0x826+-0x5a3+0x1*-0x283&&this['views']['list']['length']>-0xf08+0x10ea+-0x1e2){const _0x277128=new te(),_0x3e987b=this['views']['list'][-0x2*-0x373+-0xbe3*-0x1+-0x12c9];_0x277128['copy'](_0x3e987b['projMat']);const _0x282bba=_0x277128['data'],_0x1aa111=(0x20b1+-0x96a+-0x1*0x1745)*Math['atan']((-0x1*-0x143f+-0x1486+-0x48*-0x1)/_0x282bba[-0x23c1+0x1*-0x125f+-0x1*-0x3625])*(0x878+0x15ea+0x1dae*-0x1)/Math['PI'],_0x1340c9=_0x282bba[0x3*-0x53c+0x7fe*-0x1+-0x1d3*-0xd]/_0x282bba[-0x6*0x3fe+0x1722+0xd2],_0x448743=_0x282bba[-0x1a3b+-0x14ae+-0xb*-0x445]/(_0x282bba[-0x3*-0x4ff+-0xc1d+-0x2d6]+(0xb3b+-0xd9*-0x27+-0x3*0xec3)),_0x4d93b9=_0x282bba[-0x2120+-0x1d24+0x3e52]/(_0x282bba[0x32c+-0x226e+0x1f4c]-(0x25*-0x67+0x1*0x11a4+-0x2c0));this['_camera']['camera']['setXrPrope'+'rties']({'aspectRatio':_0x1340c9,'farClip':_0x448743,'fov':_0x1aa111,'horizontalFov':!(0x100e+-0x8*0xbb+-0xa35),'nearClip':_0x4d93b9});}return this['_camera']['camera']['_node']['setLocalPo'+'sition'](this['_localPosi'+'tion']),this['_camera']['camera']['_node']['setLocalRo'+'tation'](this['_localRota'+'tion']),this['input']['update'](_0x1969ce),this['_type']===$o&&(this['hitTest']['supported']&&this['hitTest']['update'](_0x1969ce),this['lightEstim'+'ation']['supported']&&this['lightEstim'+'ation']['update'](_0x1969ce),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['update'](_0x1969ce),this['anchors']['supported']&&this['anchors']['update'](_0x1969ce),this['planeDetec'+'tion']['supported']&&this['planeDetec'+'tion']['update'](_0x1969ce),this['meshDetect'+'ion']['supported']&&this['meshDetect'+'ion']['update'](_0x1969ce)),this['fire']('update',_0x1969ce),!(0xb11*0x2+-0x2661+0x103f);}get['supported'](){return this['_supported'];}get['active'](){return!!this['_session'];}get['type'](){return this['_type'];}get['spaceType'](){return this['_spaceType'];}get['session'](){return this['_session'];}get['frameRate'](){var _0x30024d;return((_0x30024d=this['_session'])==null?void(-0x3df*-0x8+-0x3*-0xc0b+0x1*-0x4319):_0x30024d['frameRate'])??null;}get['supportedF'+'rameRates'](){return this['_supported'+'FrameRates'];}get['framebuffe'+'rScaleFact'+'or'](){return this['_framebuff'+'erScaleFac'+'tor'];}set['fixedFovea'+'tion'](_0x4a8970){var _0x319f08;(((_0x319f08=this['_baseLayer'])==null?void(0x196b*0x1+-0x26af*0x1+0xd44):_0x319f08['fixedFovea'+'tion'])??null)!==null&&(this['app']['graphicsDe'+'vice']['samples']>0x260b+-0x4*0x2b+-0x255e&&w['warn']('Fixed\x20Fove'+'ation\x20is\x20i'+'gnored.\x20Di'+'sable\x20anti'+'-aliasing\x20'+'for\x20it\x20to\x20'+'be\x20effecti'+'ve.'),this['_baseLayer']['fixedFovea'+'tion']=_0x4a8970);}get['fixedFovea'+'tion'](){var _0x11f9cc;return((_0x11f9cc=this['_baseLayer'])==null?void(-0x724+-0x690+0xdb4):_0x11f9cc['fixedFovea'+'tion'])??null;}get['camera'](){return this['_camera']?this['_camera']['entity']:null;}get['visibility'+'State'](){return this['_session']?this['_session']['visibility'+'State']:null;}}h(ln,'EVENT_AVAI'+'LABLE','available'),h(ln,'EVENT_STAR'+'T','start'),h(ln,'EVENT_END','end'),h(ln,'EVENT_UPDA'+'TE','update'),h(ln,'EVENT_ERRO'+'R','error');class $U extends Ks{constructor(_0x31ed0b,_0x186db3={}){super(_0x31ed0b);const _0x2f3e73=new tL();_0x2f3e73['graphicsDe'+'vice']=_0x186db3['graphicsDe'+'vice']??this['createDevi'+'ce'](_0x31ed0b,_0x186db3),this['addCompone'+'ntSystems'](_0x2f3e73),this['addResourc'+'eHandles'](_0x2f3e73),_0x2f3e73['elementInp'+'ut']=_0x186db3['elementInp'+'ut'],_0x2f3e73['keyboard']=_0x186db3['keyboard'],_0x2f3e73['mouse']=_0x186db3['mouse'],_0x2f3e73['touch']=_0x186db3['touch'],_0x2f3e73['gamepads']=_0x186db3['gamepads'],_0x2f3e73['scriptPref'+'ix']=_0x186db3['scriptPref'+'ix'],_0x2f3e73['assetPrefi'+'x']=_0x186db3['assetPrefi'+'x'],_0x2f3e73['scriptsOrd'+'er']=_0x186db3['scriptsOrd'+'er'],_0x2f3e73['soundManag'+'er']=new Pw(),_0x2f3e73['lightmappe'+'r']=pL,_0x2f3e73['batchManag'+'er']=IE,_0x2f3e73['xr']=ln,this['init'](_0x2f3e73);}['createDevi'+'ce'](_0x48733f,_0x3d6c0a){return _0x3d6c0a['graphicsDe'+'viceOption'+'s']||(_0x3d6c0a['graphicsDe'+'viceOption'+'s']={}),Ae['browser']&&navigator['xr']&&(_0x3d6c0a['graphicsDe'+'viceOption'+'s']['xrCompatib'+'le']=!(0xf02+0x1*0x166f+0xd5*-0x2d)),_0x3d6c0a['graphicsDe'+'viceOption'+'s']['alpha']=_0x3d6c0a['graphicsDe'+'viceOption'+'s']['alpha']||!(0x3e9*0x4+0x18ef+-0x2892),new aw(_0x48733f,_0x3d6c0a['graphicsDe'+'viceOption'+'s']);}['addCompone'+'ntSystems'](_0x81caa3){_0x81caa3['componentS'+'ystems']=[wm,nR,NR,RL,BL,KR,zO,xF,wF,kF,hF,VL,kO,YO,LR,$L,aF,oF,mF,XR,UR,gF,BF];}['addResourc'+'eHandles'](_0x3973f0){_0x3973f0['resourceHa'+'ndlers']=[zF,WN,$N,XN,Ek,yk,oU,Ok,mk,jN,Dk,bk,JN,pk,QN,Ik,uk,ek,tk,YN,Nk,Lk,Rk,ZN,fk];}}class XU extends me{constructor(_0x4ae17c,_0x36b7e7){super(),h(this,'_assets',new Set()),h(this,'_loadingAs'+'sets',new Set()),h(this,'_waitingAs'+'sets',new Set()),h(this,'_loading',!(0x190*-0xa+0x23d8*0x1+-0x1437)),h(this,'_loaded',!(0x4d4+-0x94c+-0x1*-0x479)),h(this,'_failed',[]),(this['_registry']=_0x36b7e7,_0x4ae17c['forEach'](_0x49988a=>{if(_0x49988a instanceof pe)_0x49988a['registry']||(_0x49988a['registry']=_0x36b7e7),this['_assets']['add'](_0x49988a);else{const _0x2bfc4f=_0x36b7e7['get'](_0x49988a);_0x2bfc4f?this['_assets']['add'](_0x2bfc4f):this['_waitForAs'+'set'](_0x49988a);}}));}['destroy'](){this['_registry']['off']('load',this['_onLoad']),this['_registry']['off']('error',this['_onError']),this['_waitingAs'+'sets']['forEach'](_0x46c280=>{this['_registry']['off']('add:'+_0x46c280,this['_onAddAsse'+'t']);}),this['off']('progress'),this['off']('load');}['_assetHasD'+'ependencie'+'s'](_0x255a7c){var _0x1e103e;return _0x255a7c['type']==='model'&&((_0x1e103e=_0x255a7c['file'])==null?void(0x2e7*-0x3+-0x1c1b*0x1+0x24d0):_0x1e103e['url'])&&_0x255a7c['file']['url']&&_0x255a7c['file']['url']['match'](/.json$/g);}['load'](_0x18ab0d,_0x4b2f95){if(this['_loading']){console['debug']('AssetListL'+'oader:\x20Loa'+'d\x20function'+'\x20called\x20mu'+'ltiple\x20tim'+'es.');return;}this['_loading']=!(-0x1e3f+-0x20fd+0x1aa*0x26),this['_callback']=_0x18ab0d,this['_scope']=_0x4b2f95,this['_registry']['on']('load',this['_onLoad'],this),this['_registry']['on']('error',this['_onError'],this);let _0x35af45=!(0x2*-0x481+-0x169c+-0x5*-0x653);this['_assets']['forEach'](_0x4d0a25=>{_0x4d0a25['loaded']||(_0x35af45=!(-0x162*-0x13+-0x79b*0x1+-0x12ab),this['_assetHasD'+'ependencie'+'s'](_0x4d0a25)&&this['_registry']['loadFromUr'+'l'](_0x4d0a25['file']['url'],_0x4d0a25['type'],(_0x11fd5f,_0x34fa34)=>{if(_0x11fd5f){this['_onError'](_0x11fd5f,_0x4d0a25);return;}this['_onLoad'](_0x4d0a25);}),this['_loadingAs'+'sets']['add'](_0x4d0a25),this['_registry']['add'](_0x4d0a25));}),this['_loadingAs'+'sets']['forEach'](_0x4a3d65=>{this['_assetHasD'+'ependencie'+'s'](_0x4a3d65)||this['_registry']['load'](_0x4a3d65);}),!_0x35af45&&this['_waitingAs'+'sets']['size']===-0x3c*0x2b+0x14b4+-0xaa0&&this['_loadingCo'+'mplete']();}['ready'](_0x11713c,_0x550942=this){this['_loaded']?_0x11713c['call'](_0x550942,Array['from'](this['_assets'])):this['once']('load',_0x24e9e4=>{_0x11713c['call'](_0x550942,_0x24e9e4);});}['_loadingCo'+'mplete'](){this['_loaded']||(this['_loaded']=!(-0x20*0x60+-0x77f*0x3+0x227d),this['_registry']['off']('load',this['_onLoad'],this),this['_registry']['off']('error',this['_onError'],this),this['_failed']['length']?(this['_callback']&&this['_callback']['call'](this['_scope'],'Failed\x20to\x20'+'load\x20some\x20'+'assets',this['_failed']),this['fire']('error',this['_failed'])):(this['_callback']&&this['_callback']['call'](this['_scope']),this['fire']('load',Array['from'](this['_assets']))));}['_onLoad'](_0x193644){this['_loadingAs'+'sets']['has'](_0x193644)&&(this['fire']('progress',_0x193644),this['_loadingAs'+'sets']['delete'](_0x193644)),this['_loadingAs'+'sets']['size']===-0x2*0x8c3+-0x883+-0x5*-0x535&&setTimeout(()=>{this['_loadingCo'+'mplete']();},-0x1f60+-0x1a92*-0x1+0x4ce);}['_onError'](_0x6a6d76,_0x3fcd8e){this['_loadingAs'+'sets']['has'](_0x3fcd8e)&&(this['_failed']['push'](_0x3fcd8e),this['_loadingAs'+'sets']['delete'](_0x3fcd8e)),this['_loadingAs'+'sets']['size']===-0x18a9*0x1+-0x9*0x269+0x2e5a&&setTimeout(()=>{this['_loadingCo'+'mplete']();},-0x1c4e+-0x7b5+0x2403);}['_onAddAsse'+'t'](_0x19d8a9){this['_waitingAs'+'sets']['delete'](_0x19d8a9),this['_assets']['add'](_0x19d8a9),_0x19d8a9['loaded']||(this['_loadingAs'+'sets']['add'](_0x19d8a9),this['_registry']['load'](_0x19d8a9));}['_waitForAs'+'set'](_0x320ca1){this['_waitingAs'+'sets']['add'](_0x320ca1),this['_registry']['once']('add:'+_0x320ca1,this['_onAddAsse'+'t'],this);}}const Fc=[],_U=[[],[],[]];class gU extends ys{constructor(_0x301932,_0x16fde6){super(_0x301932),h(this,'viewBindGr'+'oups',[]),this['renderer']=_0x16fde6;}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x226062=>{_0x226062['defaultUni'+'formBuffer']['destroy'](),_0x226062['destroy']();}),this['viewBindGr'+'oups']['length']=-0x1*-0x852+-0x6c*-0x18+-0x1272;}['update'](_0x36a2d8,_0x1bc32d,_0x540daf,_0x186f97){this['camera']=_0x36a2d8,this['scene']=_0x1bc32d,this['layers']=_0x540daf,this['mapping']=_0x186f97;}['execute'](){const _0x3f6f17=this['device'],{renderer:_0x7b7b7a,camera:_0x2513ea,scene:_0x323e65,layers:_0x5472c0,mapping:_0x1a1d1e,renderTarget:_0x2ddf46}=this,_0x31f8e6=_0x323e65['layers']['layerList'],_0x3330a4=_0x323e65['layers']['subLayerEn'+'abled'],_0x2ff308=_0x323e65['layers']['subLayerLi'+'st'];for(let _0x4b8e90=-0x1*-0xf34+-0x3b4*0x5+-0x10*-0x35;_0x4b8e90<_0x31f8e6['length'];_0x4b8e90++){const _0x13205f=_0x31f8e6[_0x4b8e90];if(!(_0x5472c0&&_0x5472c0['indexOf'](_0x13205f)<0x2271+0x625*-0x5+-0x3b8)&&_0x13205f['enabled']&&_0x3330a4[_0x4b8e90]&&_0x13205f['camerasSet']['has'](_0x2513ea['camera'])){const _0xb5b837=_0x2ff308[_0x4b8e90];Q['pushGpuMar'+'ker'](_0x3f6f17,_0x13205f['name']+'('+(_0xb5b837?'TRANSP':'OPAQUE')+')'),_0x13205f['_clearDept'+'hBuffer']&&_0x7b7b7a['clear'](_0x2513ea['camera'],!(-0x1*-0x2603+-0xd37*-0x1+-0x117*0x2f),!(0xa0e+0x120c+0x4af*-0x6),!(-0x1bb2+0x7dc*-0x2+-0x27*-0x11d));const _0x4cb1a1=_0x13205f['meshInstan'+'ces'];for(let _0x1fad44=0x26b7+0x8e9+-0x2fa0;_0x1fad44<_0x4cb1a1['length'];_0x1fad44++){const _0x14be2c=_0x4cb1a1[_0x1fad44];_0x14be2c['pick']&&_0x14be2c['transparen'+'t']===_0xb5b837&&(Fc['push'](_0x14be2c),_0x1a1d1e['set'](_0x14be2c['id'],_0x14be2c));}Fc['length']>-0x2*0x12f+0x1cff+0x1*-0x1aa1&&(_0x323e65['clusteredL'+'ightingEna'+'bled']&&_0x7b7b7a['worldClust'+'ersAllocat'+'or']['empty']['activate'](),_0x7b7b7a['setCameraU'+'niforms'](_0x2513ea['camera'],_0x2ddf46),_0x3f6f17['supportsUn'+'iformBuffe'+'rs']&&_0x7b7b7a['setupViewU'+'niformBuff'+'ers'](this['viewBindGr'+'oups'],_0x7b7b7a['viewUnifor'+'mFormat'],_0x7b7b7a['viewBindGr'+'oupFormat'],null),_0x7b7b7a['renderForw'+'ard'](_0x2513ea['camera'],_0x2ddf46,Fc,_U,Zn,_0x3112db=>{_0x3f6f17['setBlendSt'+'ate'](pt['NOBLEND']);}),Fc['length']=-0xf7f+-0x1e9c+0x2e1b),Q['popGpuMark'+'er'](_0x3f6f17);}}}}const Rf=new Set(),SU=new re();let qU=class{constructor(_0x372e2d,_0x411079,_0x5a1be2){h(this,'renderTarg'+'et',null),h(this,'mapping',new Map()),h(this,'deviceVali'+'d',!(0x6d*0x57+-0x7*0x583+0x18a*0x1)),(w['assert'](_0x372e2d),this['renderer']=_0x372e2d['renderer'],this['device']=_0x372e2d['graphicsDe'+'vice'],this['renderPass']=new gU(this['device'],_0x372e2d['renderer']),this['width']=0xd05+0xe30+-0x1b35,this['height']=-0x31d*-0xb+0x14f7+-0x3736,this['resize'](_0x411079,_0x5a1be2),this['device']['on']('destroy',()=>{this['deviceVali'+'d']=!(0x1e8*0x11+0x6*0x1e4+-0x2bbf);}));}['getSelecti'+'on'](_0xa2025d,_0x38f774,_0x443a27=-0x3a8*-0x1+0xe5*-0x5+0x69*0x2,_0x49ceb7=0xe9a+0x162c+-0x1*0x24c5){const _0x4cefd3=this['device'];if(_0x4cefd3['isWebGPU'])return w['errorOnce']('pc.Picker#'+'getSelecti'+'on\x20is\x20not\x20'+'supported\x20'+'on\x20WebGPU,'+'\x20use\x20pc.Pi'+'cker#getSe'+'lectionAsy'+'nc\x20instead'+'.'),[];w['assert'](typeof _0xa2025d!='object','Picker.get'+'Selection:'+'param\x20\x27rec'+'t\x27\x20is\x20depr'+'ecated,\x20us'+'e\x20\x27x,\x20y,\x20w'+'idth,\x20heig'+'ht\x27\x20instea'+'d.'),_0x38f774=this['renderTarg'+'et']['height']-(_0x38f774+_0x49ceb7);const _0x11684=this['sanitizeRe'+'ct'](_0xa2025d,_0x38f774,_0x443a27,_0x49ceb7);_0x4cefd3['setRenderT'+'arget'](this['renderTarg'+'et']),_0x4cefd3['updateBegi'+'n']();const _0x211d4a=new Uint8Array((0x47*-0x83+0x2*-0x134b+0x4aef)*_0x11684['z']*_0x11684['w']);return _0x4cefd3['readPixels'](_0x11684['x'],_0x11684['y'],_0x11684['z'],_0x11684['w'],_0x211d4a),_0x4cefd3['updateEnd'](),this['decodePixe'+'ls'](_0x211d4a,this['mapping']);}['getSelecti'+'onAsync'](_0x1eb947,_0x2147fc,_0x4c4981=0x20*-0x104+0x1d*0x19+-0x6*-0x4f2,_0x5640ad=0x13f4+-0x16*-0xec+-0x3*0xd69){var _0x3f0a54;(_0x3f0a54=this['device'])!=null&&_0x3f0a54['isWebGL2']&&(_0x2147fc=this['renderTarg'+'et']['height']-(_0x2147fc+_0x5640ad));const _0x41542d=this['sanitizeRe'+'ct'](_0x1eb947,_0x2147fc,_0x4c4981,_0x5640ad);return this['renderTarg'+'et']['colorBuffe'+'r']['read'](_0x41542d['x'],_0x41542d['y'],_0x41542d['z'],_0x41542d['w'],{'renderTarget':this['renderTarg'+'et'],'immediate':!(-0x1dd2+0x934*0x1+0xcb*0x1a)})['then'](_0x19f4ea=>this['decodePixe'+'ls'](_0x19f4ea,this['mapping']));}['sanitizeRe'+'ct'](_0x287d2d,_0x5d5ec4,_0x1c54c6,_0x37458f){const _0x559565=this['renderTarg'+'et']['width'],_0x41123c=this['renderTarg'+'et']['height'];return _0x287d2d=Y['clamp'](Math['floor'](_0x287d2d),0x274*-0xb+-0x10c4+0x32*0xe0,_0x559565-(-0xb2b+-0x2629+0x3155)),_0x5d5ec4=Y['clamp'](Math['floor'](_0x5d5ec4),-0x1d*-0x8b+0x14a6+-0x2465,_0x41123c-(0x2303*0x1+0x1783+-0x3a85)),_0x1c54c6=Math['floor'](Math['max'](_0x1c54c6,-0xa4*-0x27+0x7a0*0x4+-0x377b)),_0x1c54c6=Math['min'](_0x1c54c6,_0x559565-_0x287d2d),_0x37458f=Math['floor'](Math['max'](_0x37458f,-0x3c*-0x3a+-0x84a*-0x1+-0x15e1)),_0x37458f=Math['min'](_0x37458f,_0x41123c-_0x5d5ec4),SU['set'](_0x287d2d,_0x5d5ec4,_0x1c54c6,_0x37458f);}['decodePixe'+'ls'](_0xfb84f1,_0x56ccc7){const _0x2570d5=[];if(this['deviceVali'+'d']){const _0x3d376d=_0xfb84f1['length'];for(let _0x17297f=-0x4b*-0x29+0x10a6+-0x29b*0xb;_0x17297f<_0x3d376d;_0x17297f+=0x47*0x81+0x1e3e+-0x1*0x4201){const _0x434667=_0xfb84f1[_0x17297f+(0x2299*-0x1+0xd*-0x26f+0x423c*0x1)],_0x4e8e04=_0xfb84f1[_0x17297f+(-0xb80+0x1be0+0x105f*-0x1)],_0x63b239=_0xfb84f1[_0x17297f+(-0x1b74+-0x3*-0x2de+-0x4b7*-0x4)],_0x333652=(_0xfb84f1[_0x17297f+(0x9e0+-0x2fd*0x5+0x514)]<<0x20*-0xe3+0x55+0x1c23|_0x434667<<-0x1*-0x207+0x1523+0x2*-0xb8d|_0x4e8e04<<0x243b+0xccb+-0x1*0x30fe|_0x63b239)>>>-0x19c0+-0x17be+0x317e;_0x333652!==-0x1ddf87d4f+0x2c7c998*0x29+0xa*0x3dff51ff&&Rf['add'](_0x56ccc7['get'](_0x333652));}Rf['forEach'](_0x3acf3b=>{_0x3acf3b&&_0x2570d5['push'](_0x3acf3b);}),Rf['clear']();}return _0x2570d5;}['allocateRe'+'nderTarget'](){const _0x5e3321=new _e(this['device'],{'format':Ne,'width':this['width'],'height':this['height'],'mipmaps':!(0x1671+0xbc3*-0x2+0x8b*0x2),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':'pick'});this['renderTarg'+'et']=new gt({'colorBuffer':_0x5e3321,'depth':!(0x392+0x153*0x11+-0x1a15*0x1)});}['releaseRen'+'derTarget'](){this['renderTarg'+'et']&&(this['renderTarg'+'et']['destroyTex'+'tureBuffer'+'s'](),this['renderTarg'+'et']['destroy'](),this['renderTarg'+'et']=null);}['prepare'](_0x1327b6,_0x2d4821,_0x2b95e2){_0x2b95e2 instanceof Ot&&(_0x2b95e2=[_0x2b95e2]),(!this['renderTarg'+'et']||this['width']!==this['renderTarg'+'et']['width']||this['height']!==this['renderTarg'+'et']['height'])&&(this['releaseRen'+'derTarget'](),this['allocateRe'+'nderTarget']()),this['mapping']['clear']();const _0x16cf84=this['renderPass'];_0x16cf84['init'](this['renderTarg'+'et']),_0x16cf84['colorOps']['clearValue']=ie['WHITE'],_0x16cf84['colorOps']['clear']=!(0x125+-0xf*-0x5d+-0x1a6*0x4),_0x16cf84['depthStenc'+'ilOps']['clearDepth']=!(0x1ace+-0x4*0x265+-0x113a),_0x16cf84['update'](_0x1327b6,_0x2d4821,_0x2b95e2,this['mapping']),_0x16cf84['render']();}['resize'](_0x1cad38,_0x2baadf){this['width']=Math['floor'](_0x1cad38),this['height']=Math['floor'](_0x2baadf);}},cr,hr;const Of=new D(),RS=new D(),Ri=new Dn(),Ro=new Dn(),ep=new Dn();Ri['end']=new D(),Ro['end']=new D(),ep['end']=new D();const en=new D(),Nc=new D(),Ff=new D(),OS=new D(),Nf=new D(),kc=new D(),Uc=new D(),Bc=new D(),zc=new D(),kf=new D(),yU=new D(),tn=new D(),wo=new D(),Vc=new D(),Gc=new D(),Eo=new D(),FS=new D(),NS=new D(),kS=new D(),US=new D(),vU=new re();function BS(_0x4e73a5,_0x43867c,_0x2a7bce){return yU['cross'](_0x4e73a5,_0x43867c)['dot'](_0x2a7bce);}function xU(_0x1011e5,_0x2cbd15,_0x1942dd){en['sub2'](_0x2cbd15,_0x1011e5),Nc['sub2'](_0x1942dd[0x3*0x5c7+-0x104e*0x1+-0x107],_0x1011e5),Ff['sub2'](_0x1942dd[-0xada*-0x1+0x229b+-0x2d74],_0x1011e5),OS['sub2'](_0x1942dd[0x1764+0x2368+-0x46*0xd7],_0x1011e5),kc['cross'](OS,en);let _0x4d82c9=Nc['dot'](kc),_0x320e7d,_0xc1cbc0;if(_0x4d82c9>=-0x1132+-0x1671+0x1*0x27a3){if(_0x320e7d=-Ff['dot'](kc),_0x320e7d<-0x51b*0x1+-0x14ed+0x1a08||(_0xc1cbc0=BS(en,Ff,Nc),_0xc1cbc0<-0xbd5*0x2+0xffb*0x1+0x7af))return-(-0x5c9+-0x1*-0x20ed+-0x1b23);const _0x11821c=(0x135a+-0x7ee*0x1+-0xb6b)/(_0x320e7d+_0x4d82c9+_0xc1cbc0);Uc['copy'](_0x1942dd[-0x202d+0x2*0x9d6+0x61*0x21])['mulScalar'](_0x320e7d*_0x11821c),Bc['copy'](_0x1942dd[-0x50e+-0x128a+-0x1799*-0x1])['mulScalar'](_0x4d82c9*_0x11821c),zc['copy'](_0x1942dd[-0x2660+0x1820+0xe42])['mulScalar'](_0xc1cbc0*_0x11821c),kf['copy'](Uc)['add'](Bc)['add'](zc);}else{if(Nf['sub2'](_0x1942dd[-0x1081*-0x2+0x10f8+-0x31f7],_0x1011e5),_0x320e7d=Nf['dot'](kc),_0x320e7d<0x91*0x6+-0x404*-0x1+-0x2*0x3b5||(_0xc1cbc0=BS(en,Nc,Nf),_0xc1cbc0<0x683+0x5f*-0x31+0x4*0x2eb))return-(-0x1112+0x21cc+-0x10b9);_0x4d82c9=-_0x4d82c9;const _0x23dd4c=(-0x3bd+0x1f87+-0x943*0x3)/(_0x320e7d+_0x4d82c9+_0xc1cbc0);Uc['copy'](_0x1942dd[-0x2026+-0x6dc*-0x1+0x194a])['mulScalar'](_0x320e7d*_0x23dd4c),Bc['copy'](_0x1942dd[0x1b41+0x1233+-0x1*0x2d71])['mulScalar'](_0x4d82c9*_0x23dd4c),zc['copy'](_0x1942dd[0x21fb+0x1cc3*0x1+-0x124*0x37])['mulScalar'](_0xc1cbc0*_0x23dd4c),kf['copy'](Uc)['add'](Bc)['add'](zc);}return en['sub2'](_0x1942dd[-0x5*-0x501+0x26*0xef+-0x3c7f],_0x1942dd[-0xe5+0x1f12+-0x1e2b])['lengthSq']()<(-0x49*-0x65+0xc5*0xf+-0x2858+0.0001)*(-0x23ac+0x22a+0x2182+0.0001)||en['sub2'](_0x1942dd[-0x1276+-0x1*0x36c+0x15e3],_0x1942dd[0x7f*-0x5+-0xdfc*0x2+-0xe*-0x22d])['lengthSq']()<(0x1057+-0xb7*-0x20+-0x2737+0.0001)*(-0x8dd*0x1+-0x1a5*0x2+0x11*0xb7+0.0001)?-(-0x2123*-0x1+-0x1*0xdfc+0x1*-0x1326):kf['sub'](_0x1011e5)['lengthSq']();}class Am{constructor(_0x550228,_0x3885b0,_0x24470f){this['event']=_0x550228,this['element']=_0x3885b0,this['camera']=_0x24470f,this['_stopPropa'+'gation']=!(0xa06*-0x2+-0x18f8+0x2d05);}['stopPropag'+'ation'](){this['_stopPropa'+'gation']=!(-0x1c3a+-0x5e0+-0x5af*-0x6),this['event']&&(this['event']['stopImmedi'+'atePropaga'+'tion'](),this['event']['stopPropag'+'ation']());}}class bo extends Am{constructor(_0x361653,_0x512c91,_0x5005e0,_0x2aa3f7,_0x48f4ba,_0x9766d0,_0x531cd3){super(_0x361653,_0x512c91,_0x5005e0),this['x']=_0x2aa3f7,this['y']=_0x48f4ba,this['ctrlKey']=_0x361653['ctrlKey']||!(-0x1272+0x2437*0x1+-0x11c4),this['altKey']=_0x361653['altKey']||!(0x2*0x4a4+0x1069*-0x1+-0x722*-0x1),this['shiftKey']=_0x361653['shiftKey']||!(0x1d*-0xd0+-0x23d5*0x1+0x1*0x3b66),this['metaKey']=_0x361653['metaKey']||!(-0x33f*-0x9+-0xbc4+-0x1*0x1172),this['button']=_0x361653['button'],sa['isPointerL'+'ocked']()?(this['dx']=_0x361653['movementX']||_0x361653['webkitMove'+'mentX']||_0x361653['mozMovemen'+'tX']||0x88d+-0xe3d+0x5b0,this['dy']=_0x361653['movementY']||_0x361653['webkitMove'+'mentY']||_0x361653['mozMovemen'+'tY']||0x9de*-0x2+0x13b8+-0x2*-0x2):(this['dx']=_0x2aa3f7-_0x9766d0,this['dy']=_0x48f4ba-_0x531cd3),this['wheelDelta']=-0x1aed+0x1*0x20c4+-0x12b*0x5,_0x361653['type']==='wheel'&&(_0x361653['deltaY']>0x245f+0x1837+-0x3c96?this['wheelDelta']=-0x18bf*-0x1+-0xfb*0x1d+0x87*0x7:_0x361653['deltaY']<0x1aaf+0x1e63+-0x6*0x983&&(this['wheelDelta']=-(0x105f+0x1d*0x133+0x3325*-0x1)));}}class Ao extends Am{constructor(_0x555eb9,_0x8e418f,_0x5af3e4,_0x5ed047,_0x116776,_0x2ae444){super(_0x555eb9,_0x8e418f,_0x5af3e4),this['touches']=_0x555eb9['touches'],this['changedTou'+'ches']=_0x555eb9['changedTou'+'ches'],this['x']=_0x5ed047,this['y']=_0x116776,this['touch']=_0x2ae444;}}class dr extends Am{constructor(_0x53dd9c,_0x4fb9c5,_0x5955ad,_0x44f78e){super(_0x53dd9c,_0x4fb9c5,_0x5955ad),this['inputSourc'+'e']=_0x44f78e;}}class Xo{constructor(_0x2bc92d,_0x5e86af){this['_app']=null,this['_attached']=!(0x5*0x565+0x45d+-0x1f55),this['_target']=null,this['_enabled']=!(-0x5*-0x528+-0xb05+-0xec3),this['_lastX']=0x24e7+0x1f6b+-0x16*0x31b,this['_lastY']=-0x1*0xbd9+-0x273+0xe4c,this['_upHandler']=this['_handleUp']['bind'](this),this['_downHandl'+'er']=this['_handleDow'+'n']['bind'](this),this['_moveHandl'+'er']=this['_handleMov'+'e']['bind'](this),this['_wheelHand'+'ler']=this['_handleWhe'+'el']['bind'](this),this['_touchstar'+'tHandler']=this['_handleTou'+'chStart']['bind'](this),this['_touchendH'+'andler']=this['_handleTou'+'chEnd']['bind'](this),this['_touchcanc'+'elHandler']=this['_touchendH'+'andler'],this['_touchmove'+'Handler']=this['_handleTou'+'chMove']['bind'](this),this['_sortHandl'+'er']=this['_sortEleme'+'nts']['bind'](this),this['_elements']=[],this['_hoveredEl'+'ement']=null,this['_pressedEl'+'ement']=null,this['_touchedEl'+'ements']={},this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired']={},this['_selectedE'+'lements']={},this['_selectedP'+'ressedElem'+'ents']={},this['_useMouse']=!_0x5e86af||_0x5e86af['useMouse']!==!(0x22a7+-0x13b3+-0xef3),this['_useTouch']=!_0x5e86af||_0x5e86af['useTouch']!==!(-0x9*-0xf3+0x24ba+-0x2d44),this['_useXr']=!_0x5e86af||_0x5e86af['useXr']!==!(-0x20af+0xa0*-0x25+0x37d0),this['_selectEve'+'ntsAttache'+'d']=!(-0x1d*-0x1+-0x1858+-0x16*-0x11a),Ae['touch']&&(this['_clickedEn'+'tities']={}),this['attach'](_0x2bc92d);}set['enabled'](_0x467ad3){this['_enabled']=_0x467ad3;}get['enabled'](){return this['_enabled'];}set['app'](_0x10bb3f){this['_app']=_0x10bb3f;}get['app'](){return this['_app']||Ms();}['attach'](_0x39a15d){this['_attached']&&(this['_attached']=!(0x2674+-0x1*0x1451+-0x1222),this['detach']()),this['_target']=_0x39a15d,this['_attached']=!(-0x12c5*-0x2+-0x6de+-0x1eac);const _0x150e30=Ae['passiveEve'+'nts']?{'passive':!(0x6c2+0x1d16+-0x2*0x11ec)}:!(0x17d*-0x3+0x1e89*-0x1+0x2301);this['_useMouse']&&(window['addEventLi'+'stener']('mouseup',this['_upHandler'],_0x150e30),window['addEventLi'+'stener']('mousedown',this['_downHandl'+'er'],_0x150e30),window['addEventLi'+'stener']('mousemove',this['_moveHandl'+'er'],_0x150e30),window['addEventLi'+'stener']('wheel',this['_wheelHand'+'ler'],_0x150e30)),this['_useTouch']&&Ae['touch']&&(this['_target']['addEventLi'+'stener']('touchstart',this['_touchstar'+'tHandler'],_0x150e30),this['_target']['addEventLi'+'stener']('touchend',this['_touchendH'+'andler'],!(-0x2*0x749+-0x1*0x16dd+0x2570)),this['_target']['addEventLi'+'stener']('touchmove',this['_touchmove'+'Handler'],!(-0x21+-0x2d1*-0x1+-0x2af)),this['_target']['addEventLi'+'stener']('touchcance'+'l',this['_touchcanc'+'elHandler'],!(0x1e96*-0x1+0x633+0x1864))),this['attachSele'+'ctEvents']();}['attachSele'+'ctEvents'](){!this['_selectEve'+'ntsAttache'+'d']&&this['_useXr']&&this['app']&&this['app']['xr']&&this['app']['xr']['supported']&&(this['_clickedEn'+'tities']||(this['_clickedEn'+'tities']={}),this['_selectEve'+'ntsAttache'+'d']=!(-0x2677+-0xb25+0x319c),this['app']['xr']['on']('start',this['_onXrStart'],this));}['detach'](){if(!this['_attached'])return;this['_attached']=!(0xb9c+0x1a*-0x97+0x3bb);const _0x416561=Ae['passiveEve'+'nts']?{'passive':!(-0x2c9*0xd+0x533*-0x5+0x3e34)}:!(-0xf05*-0x1+-0x5*0x2b+-0xe2d);this['_useMouse']&&(window['removeEven'+'tListener']('mouseup',this['_upHandler'],_0x416561),window['removeEven'+'tListener']('mousedown',this['_downHandl'+'er'],_0x416561),window['removeEven'+'tListener']('mousemove',this['_moveHandl'+'er'],_0x416561),window['removeEven'+'tListener']('wheel',this['_wheelHand'+'ler'],_0x416561)),this['_useTouch']&&(this['_target']['removeEven'+'tListener']('touchstart',this['_touchstar'+'tHandler'],_0x416561),this['_target']['removeEven'+'tListener']('touchend',this['_touchendH'+'andler'],!(0x7c1+-0x1ed1+0x49d*0x5)),this['_target']['removeEven'+'tListener']('touchmove',this['_touchmove'+'Handler'],!(-0x240c*0x1+0x1ea5+0x568)),this['_target']['removeEven'+'tListener']('touchcance'+'l',this['_touchcanc'+'elHandler'],!(0x4ea+-0x5*0x5f5+0x18e0*0x1))),this['_selectEve'+'ntsAttache'+'d']&&(this['_selectEve'+'ntsAttache'+'d']=!(-0xdf*-0x15+-0x1180+-0x2*0x65),this['app']['xr']['off']('start',this['_onXrStart'],this),this['app']['xr']['off']('end',this['_onXrEnd'],this),this['app']['xr']['off']('update',this['_onXrUpdat'+'e'],this),this['app']['xr']['input']['off']('selectstar'+'t',this['_onSelectS'+'tart'],this),this['app']['xr']['input']['off']('selectend',this['_onSelectE'+'nd'],this),this['app']['xr']['input']['off']('remove',this['_onXrInput'+'Remove'],this)),this['_target']=null;}['addElement'](_0x402199){this['_elements']['indexOf'](_0x402199)===-(0x2501+-0x187*-0x1+-0x581*0x7)&&this['_elements']['push'](_0x402199);}['removeElem'+'ent'](_0x33e893){const _0x1d5849=this['_elements']['indexOf'](_0x33e893);_0x1d5849!==-(0x997*-0x2+0x9b7*-0x1+-0x1b*-0x112)&&this['_elements']['splice'](_0x1d5849,-0xef3+-0x1*-0x2027+-0x275*0x7);}['_handleUp'](_0x3a13b2){this['_enabled']&&(sa['isPointerL'+'ocked']()||(this['_calcMouse'+'Coords'](_0x3a13b2),this['_onElement'+'MouseEvent']('mouseup',_0x3a13b2)));}['_handleDow'+'n'](_0x2be8b1){this['_enabled']&&(sa['isPointerL'+'ocked']()||(this['_calcMouse'+'Coords'](_0x2be8b1),this['_onElement'+'MouseEvent']('mousedown',_0x2be8b1)));}['_handleMov'+'e'](_0xe689e9){this['_enabled']&&(this['_calcMouse'+'Coords'](_0xe689e9),this['_onElement'+'MouseEvent']('mousemove',_0xe689e9),this['_lastX']=cr,this['_lastY']=hr);}['_handleWhe'+'el'](_0x4de56e){this['_enabled']&&(this['_calcMouse'+'Coords'](_0x4de56e),this['_onElement'+'MouseEvent']('mousewheel',_0x4de56e));}['_determine'+'TouchedEle'+'ments'](_0x198c27){const _0x223331={},_0x37083b=this['app']['systems']['camera']['cameras'];for(let _0x23009e=_0x37083b['length']-(-0xd43+0x17*0x1f+0xa7b*0x1);_0x23009e>=0xec9+0x2*-0x1010+0x1*0x1157;_0x23009e--){const _0x3e0371=_0x37083b[_0x23009e];let _0x567374=-0x652*-0x3+-0x1efd+0x1*0xc07;const _0x2b005f=_0x198c27['changedTou'+'ches']['length'];for(let _0x38f562=0xd29*-0x2+0x7dd+-0x1b*-0xaf;_0x38f562<_0x2b005f;_0x38f562++){if(_0x223331[_0x198c27['changedTou'+'ches'][_0x38f562]['identifier']]){_0x567374++;continue;}const _0x52a27d=Wc(_0x198c27['changedTou'+'ches'][_0x38f562]),_0x383017=this['_getTarget'+'ElementByC'+'oords'](_0x3e0371,_0x52a27d['x'],_0x52a27d['y']);_0x383017&&(_0x567374++,_0x223331[_0x198c27['changedTou'+'ches'][_0x38f562]['identifier']]={'element':_0x383017,'camera':_0x3e0371,'x':_0x52a27d['x'],'y':_0x52a27d['y']});}if(_0x567374===_0x2b005f)break;}return _0x223331;}['_handleTou'+'chStart'](_0x55c01c){if(!this['_enabled'])return;const _0x4bacdc=this['_determine'+'TouchedEle'+'ments'](_0x55c01c);for(let _0x50cab1=-0x2422+0xc19*-0x3+-0x486d*-0x1,_0x28ad07=_0x55c01c['changedTou'+'ches']['length'];_0x50cab1<_0x28ad07;_0x50cab1++){const _0x5c1490=_0x55c01c['changedTou'+'ches'][_0x50cab1],_0x350a8b=_0x4bacdc[_0x5c1490['identifier']],_0x2d4730=this['_touchedEl'+'ements'][_0x5c1490['identifier']];_0x350a8b&&(!_0x2d4730||_0x350a8b['element']!==_0x2d4730['element'])&&(this['_fireEvent'](_0x55c01c['type'],new Ao(_0x55c01c,_0x350a8b['element'],_0x350a8b['camera'],_0x350a8b['x'],_0x350a8b['y'],_0x5c1490)),this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired'][_0x5c1490['identifier']]=!(-0x7*-0x295+0x193*0x17+-0x3647));}for(const _0x3d4090 in _0x4bacdc)this['_touchedEl'+'ements'][_0x3d4090]=_0x4bacdc[_0x3d4090];}['_handleTou'+'chEnd'](_0x456ab3){if(!this['_enabled'])return;const _0xea8212=this['app']['systems']['camera']['cameras'];for(const _0x3da9c8 in this['_clickedEn'+'tities'])delete this['_clickedEn'+'tities'][_0x3da9c8];for(let _0x11646d=-0x1a87+0x10c8+-0x9bf*-0x1,_0x18bb2a=_0x456ab3['changedTou'+'ches']['length'];_0x11646d<_0x18bb2a;_0x11646d++){const _0x50507f=_0x456ab3['changedTou'+'ches'][_0x11646d],_0x136ba7=this['_touchedEl'+'ements'][_0x50507f['identifier']];if(!_0x136ba7)continue;const _0x34820a=_0x136ba7['element'],_0x42b5a9=_0x136ba7['camera'],_0x3cc107=_0x136ba7['x'],_0x507fa8=_0x136ba7['y'];delete this['_touchedEl'+'ements'][_0x50507f['identifier']],delete this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired'][_0x50507f['identifier']];const _0x2e7d10=Wc(_0x50507f);for(let _0x509727=_0xea8212['length']-(0x5*-0x1f1+-0x1fe0+0x2996*0x1);_0x509727>=-0x3*0x337+0x23a5+-0x340*0x8;_0x509727--)this['_getTarget'+'ElementByC'+'oords'](_0xea8212[_0x509727],_0x2e7d10['x'],_0x2e7d10['y'])===_0x34820a&&(this['_clickedEn'+'tities'][_0x34820a['entity']['getGuid']()]||(this['_fireEvent']('click',new Ao(_0x456ab3,_0x34820a,_0x42b5a9,_0x3cc107,_0x507fa8,_0x50507f)),this['_clickedEn'+'tities'][_0x34820a['entity']['getGuid']()]=Date['now']()));this['_fireEvent'](_0x456ab3['type'],new Ao(_0x456ab3,_0x34820a,_0x42b5a9,_0x3cc107,_0x507fa8,_0x50507f));}}['_handleTou'+'chMove'](_0x5b57e9){if(_0x5b57e9['preventDef'+'ault'](),!this['_enabled'])return;const _0x24ae45=this['_determine'+'TouchedEle'+'ments'](_0x5b57e9);for(let _0x1be459=0x2*0xc94+-0x2b7*0xd+0xa23,_0x2ed34d=_0x5b57e9['changedTou'+'ches']['length'];_0x1be459<_0x2ed34d;_0x1be459++){const _0x2bb214=_0x5b57e9['changedTou'+'ches'][_0x1be459],_0x37507a=_0x24ae45[_0x2bb214['identifier']],_0x4698b3=this['_touchedEl'+'ements'][_0x2bb214['identifier']];if(_0x4698b3){const _0x23eecb=Wc(_0x2bb214);(!_0x37507a||_0x37507a['element']!==_0x4698b3['element'])&&!this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired'][_0x2bb214['identifier']]&&(this['_fireEvent']('touchleave',new Ao(_0x5b57e9,_0x4698b3['element'],_0x4698b3['camera'],_0x23eecb['x'],_0x23eecb['y'],_0x2bb214)),this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired'][_0x2bb214['identifier']]=!(0xad1+-0x99a+0x137*-0x1)),this['_fireEvent']('touchmove',new Ao(_0x5b57e9,_0x4698b3['element'],_0x4698b3['camera'],_0x23eecb['x'],_0x23eecb['y'],_0x2bb214));}}}['_onElement'+'MouseEvent'](_0x8d9803,_0x46bda9){let _0x4b064f=null;const _0x5aa4f7=this['_hoveredEl'+'ement'];this['_hoveredEl'+'ement']=null;const _0x14f72e=this['app']['systems']['camera']['cameras'];let _0x414f97;for(let _0x16b9f7=_0x14f72e['length']-(0x1fa0*-0x1+0x452*0x2+0x37*0x6b);_0x16b9f7>=0x2361+-0x1*-0xef7+0x2*-0x192c&&(_0x414f97=_0x14f72e[_0x16b9f7],_0x4b064f=this['_getTarget'+'ElementByC'+'oords'](_0x414f97,cr,hr),!_0x4b064f);_0x16b9f7--);if(this['_hoveredEl'+'ement']=_0x4b064f,(_0x8d9803==='mousemove'||_0x8d9803==='mouseup')&&this['_pressedEl'+'ement']?this['_fireEvent'](_0x8d9803,new bo(_0x46bda9,this['_pressedEl'+'ement'],_0x414f97,cr,hr,this['_lastX'],this['_lastY'])):_0x4b064f&&(this['_fireEvent'](_0x8d9803,new bo(_0x46bda9,_0x4b064f,_0x414f97,cr,hr,this['_lastX'],this['_lastY'])),_0x8d9803==='mousedown'&&(this['_pressedEl'+'ement']=_0x4b064f)),_0x5aa4f7!==this['_hoveredEl'+'ement']&&(_0x5aa4f7&&this['_fireEvent']('mouseleave',new bo(_0x46bda9,_0x5aa4f7,_0x414f97,cr,hr,this['_lastX'],this['_lastY'])),this['_hoveredEl'+'ement']&&this['_fireEvent']('mouseenter',new bo(_0x46bda9,this['_hoveredEl'+'ement'],_0x414f97,cr,hr,this['_lastX'],this['_lastY']))),_0x8d9803==='mouseup'&&this['_pressedEl'+'ement']){if(this['_pressedEl'+'ement']===this['_hoveredEl'+'ement']){const _0xb7cb5c=this['_hoveredEl'+'ement']['entity']['getGuid']();let _0x3a84a0=!this['_clickedEn'+'tities'];if(this['_clickedEn'+'tities']){const _0x12b939=this['_clickedEn'+'tities'][_0xb7cb5c]||-0x140b+0x24f3+-0x10e8;_0x3a84a0=Date['now']()-_0x12b939>-0x1b54+0x11de+0x2*0x551,delete this['_clickedEn'+'tities'][_0xb7cb5c];}_0x3a84a0&&this['_fireEvent']('click',new bo(_0x46bda9,this['_hoveredEl'+'ement'],_0x414f97,cr,hr,this['_lastX'],this['_lastY']));}this['_pressedEl'+'ement']=null;}}['_onXrStart'](){this['app']['xr']['on']('end',this['_onXrEnd'],this),this['app']['xr']['on']('update',this['_onXrUpdat'+'e'],this),this['app']['xr']['input']['on']('selectstar'+'t',this['_onSelectS'+'tart'],this),this['app']['xr']['input']['on']('selectend',this['_onSelectE'+'nd'],this),this['app']['xr']['input']['on']('remove',this['_onXrInput'+'Remove'],this);}['_onXrEnd'](){this['app']['xr']['off']('update',this['_onXrUpdat'+'e'],this),this['app']['xr']['input']['off']('selectstar'+'t',this['_onSelectS'+'tart'],this),this['app']['xr']['input']['off']('selectend',this['_onSelectE'+'nd'],this),this['app']['xr']['input']['off']('remove',this['_onXrInput'+'Remove'],this);}['_onXrUpdat'+'e'](){if(!this['_enabled'])return;const _0x41d5b1=this['app']['xr']['input']['inputSourc'+'es'];for(let _0x31541d=-0x1b8b+-0x67a+0x1*0x2205;_0x31541d<_0x41d5b1['length'];_0x31541d++)this['_onElement'+'SelectEven'+'t']('selectmove',_0x41d5b1[_0x31541d],null);}['_onXrInput'+'Remove'](_0x43804f){const _0x5387f6=this['_selectedE'+'lements'][_0x43804f['id']];_0x5387f6&&(_0x43804f['_elementEn'+'tity']=null,this['_fireEvent']('selectleav'+'e',new dr(null,_0x5387f6,null,_0x43804f))),delete this['_selectedE'+'lements'][_0x43804f['id']],delete this['_selectedP'+'ressedElem'+'ents'][_0x43804f['id']];}['_onSelectS'+'tart'](_0x2cd148,_0x29e286){this['_enabled']&&this['_onElement'+'SelectEven'+'t']('selectstar'+'t',_0x2cd148,_0x29e286);}['_onSelectE'+'nd'](_0x2bb2fd,_0x2a0814){this['_enabled']&&this['_onElement'+'SelectEven'+'t']('selectend',_0x2bb2fd,_0x2a0814);}['_onElement'+'SelectEven'+'t'](_0x6fb7ce,_0xd982bb,_0x11e23c){let _0x5a606b;const _0x28e969=this['_selectedE'+'lements'][_0xd982bb['id']];let _0x114734;const _0x1d6eec=this['app']['systems']['camera']['cameras'];let _0x6c312;if(_0xd982bb['elementInp'+'ut']){ep['set'](_0xd982bb['getOrigin'](),_0xd982bb['getDirecti'+'on']());for(let _0x591aa0=_0x1d6eec['length']-(0xbe7*0x1+0xc99+-0x187f);_0x591aa0>=-0xa5e*0x3+0x2379+-0x45f&&(_0x6c312=_0x1d6eec[_0x591aa0],_0x5a606b=this['_getTarget'+'ElementByR'+'ay'](ep,_0x6c312),!_0x5a606b);_0x591aa0--);}_0xd982bb['_elementEn'+'tity']=_0x5a606b||null,_0x5a606b?(this['_selectedE'+'lements'][_0xd982bb['id']]=_0x5a606b,_0x114734=_0x5a606b):delete this['_selectedE'+'lements'][_0xd982bb['id']],_0x28e969!==_0x114734&&(_0x28e969&&this['_fireEvent']('selectleav'+'e',new dr(_0x11e23c,_0x28e969,_0x6c312,_0xd982bb)),_0x114734&&this['_fireEvent']('selectente'+'r',new dr(_0x11e23c,_0x114734,_0x6c312,_0xd982bb)));const _0x109b4f=this['_selectedP'+'ressedElem'+'ents'][_0xd982bb['id']];_0x6fb7ce==='selectmove'&&_0x109b4f&&this['_fireEvent']('selectmove',new dr(_0x11e23c,_0x109b4f,_0x6c312,_0xd982bb)),_0x6fb7ce==='selectstar'+'t'&&(this['_selectedP'+'ressedElem'+'ents'][_0xd982bb['id']]=_0x114734,_0x114734&&this['_fireEvent']('selectstar'+'t',new dr(_0x11e23c,_0x114734,_0x6c312,_0xd982bb))),!_0xd982bb['elementInp'+'ut']&&_0x109b4f&&(delete this['_selectedP'+'ressedElem'+'ents'][_0xd982bb['id']],_0x28e969&&this['_fireEvent']('selectend',new dr(_0x11e23c,_0x109b4f,_0x6c312,_0xd982bb))),_0x6fb7ce==='selectend'&&_0xd982bb['elementInp'+'ut']&&(delete this['_selectedP'+'ressedElem'+'ents'][_0xd982bb['id']],_0x109b4f&&this['_fireEvent']('selectend',new dr(_0x11e23c,_0x109b4f,_0x6c312,_0xd982bb)),_0x109b4f&&_0x109b4f===_0x28e969&&this['_fireEvent']('click',new dr(_0x11e23c,_0x109b4f,_0x6c312,_0xd982bb)));}['_fireEvent'](_0x2476d2,_0x4de039){let _0x207983=_0x4de039['element'];for(;_0x207983['fire'](_0x2476d2,_0x4de039),!(_0x4de039['_stopPropa'+'gation']||!_0x207983['entity']['parent']||(_0x207983=_0x207983['entity']['parent']['element'],!_0x207983)););}['_calcMouse'+'Coords'](_0x44c67f){const _0x38dbd2=this['_target']['getBoundin'+'gClientRec'+'t'](),_0x119910=Math['floor'](_0x38dbd2['left']),_0x24452f=Math['floor'](_0x38dbd2['top']);cr=_0x44c67f['clientX']-_0x119910,hr=_0x44c67f['clientY']-_0x24452f;}['_sortEleme'+'nts'](_0x528209,_0x3df817){const _0x3c0b9f=this['app']['scene']['layers']['sortTransp'+'arentLayer'+'s'](_0x528209['layers'],_0x3df817['layers']);return _0x3c0b9f!==-0xa5*-0x1b+0x9d0+-0x1b37?_0x3c0b9f:_0x528209['screen']&&!_0x3df817['screen']?-(0x5c9*0x3+0x1*0xdee+-0xfa4*0x2):!_0x528209['screen']&&_0x3df817['screen']?-0x1*0x12c8+0x102b+0x29e:!_0x528209['screen']&&!_0x3df817['screen']?0x1*0x25b1+0x1d*-0xbb+-0x1*0x1082:_0x528209['screen']['screen']['screenSpac'+'e']&&!_0x3df817['screen']['screen']['screenSpac'+'e']?-(-0x6*-0x52b+0xa81+0x45*-0x9a):_0x3df817['screen']['screen']['screenSpac'+'e']&&!_0x528209['screen']['screen']['screenSpac'+'e']?-0x1*-0x1e56+-0x2185+-0x6*-0x88:_0x3df817['drawOrder']-_0x528209['drawOrder'];}['_getTarget'+'ElementByC'+'oords'](_0x5bf103,_0x3abaf0,_0x37cdae){const _0x551bf8=this['_calculate'+'RayScreen'](_0x3abaf0,_0x37cdae,_0x5bf103,Ri)?Ri:null,_0x6f6e27=this['_calculate'+'Ray3d'](_0x3abaf0,_0x37cdae,_0x5bf103,Ro)?Ro:null;return this['_getTarget'+'Element'](_0x5bf103,_0x551bf8,_0x6f6e27);}['_getTarget'+'ElementByR'+'ay'](_0x3dce1e,_0x147040){Ri['origin']['copy'](_0x3dce1e['origin']),Ri['direction']['copy'](_0x3dce1e['direction']),Ri['end']['copy'](Ri['direction'])['mulScalar'](_0x147040['farClip']*(0x1*0xc91+0x180a+0x15b*-0x1b))['add'](Ri['origin']);const _0x20ab99=Ri,_0xc69fa0=_0x147040['worldToScr'+'een'](_0x20ab99['origin'],Of),_0x11bfa3=this['_calculate'+'RayScreen'](_0xc69fa0['x'],_0xc69fa0['y'],_0x147040,Ro)?Ro:null;return this['_getTarget'+'Element'](_0x147040,_0x11bfa3,_0x20ab99);}['_getTarget'+'Element'](_0x40e67a,_0x3faf31,_0x419e30){let _0x46920c=null,_0x110c88=(-0x18d*0x13+0xb*-0x1b0+-0x601*-0x8)/(0x3e5*-0x1+-0x16fc+0x1ae1);this['_elements']['sort'](this['_sortHandl'+'er']);for(let _0x1d72cf=-0x47*-0x6d+-0x15*-0x7b+-0x31a*0xd,_0x297548=this['_elements']['length'];_0x1d72cf<_0x297548;_0x1d72cf++){const _0x1a705e=this['_elements'][_0x1d72cf];if(_0x1a705e['layers']['some'](_0x25b291=>_0x40e67a['layersSet']['has'](_0x25b291))){if(_0x1a705e['screen']&&_0x1a705e['screen']['screen']['screenSpac'+'e']){if(!_0x3faf31)continue;if(this['_checkElem'+'ent'](_0x3faf31,_0x1a705e,!(-0x377+-0x2149*-0x1+-0x1dd2))>=-0x125*-0x4+-0x65f*-0x1+-0xaf3){_0x46920c=_0x1a705e;break;}}else{if(!_0x419e30)continue;const _0x12427a=this['_checkElem'+'ent'](_0x419e30,_0x1a705e,!(0x1dc9+-0x1f87+-0x3*-0x95));if(_0x12427a>=0x1ef8+0xb8d*0x1+0x7*-0x613&&(_0x12427a<_0x110c88&&(_0x46920c=_0x1a705e,_0x110c88=_0x12427a),_0x1a705e['screen'])){_0x46920c=_0x1a705e;break;}}}}return _0x46920c;}['_calculate'+'RayScreen'](_0x5401e5,_0x6f3445,_0xc278ad,_0x48d7c9){const _0x214f8a=this['app']['graphicsDe'+'vice']['width'],_0x3f9902=this['app']['graphicsDe'+'vice']['height'],_0x52895f=_0xc278ad['rect']['z']*_0x214f8a,_0x2ad8e4=_0xc278ad['rect']['w']*_0x3f9902,_0x1cfe97=_0xc278ad['rect']['x']*_0x214f8a,_0x3d776e=_0x1cfe97+_0x52895f,_0x9428c4=(0x19c+-0x229c+0x2101-_0xc278ad['rect']['y'])*_0x3f9902,_0x509793=_0x9428c4-_0x2ad8e4;let _0x14755b=_0x5401e5*_0x214f8a/this['_target']['clientWidt'+'h'],_0x268047=_0x6f3445*_0x3f9902/this['_target']['clientHeig'+'ht'];return _0x14755b>=_0x1cfe97&&_0x14755b<=_0x3d776e&&_0x268047<=_0x9428c4&&_0x268047>=_0x509793?(_0x14755b=_0x214f8a*(_0x14755b-_0x1cfe97)/_0x52895f,_0x268047=_0x3f9902*(_0x268047-_0x509793)/_0x2ad8e4,_0x268047=_0x3f9902-_0x268047,_0x48d7c9['origin']['set'](_0x14755b,_0x268047,-0xc9*-0x16+-0x8db+-0x86a),_0x48d7c9['direction']['set'](0x1a79+0x1*-0x1001+0x86*-0x14,0x31*0x2e+0x1481+-0x1d4f,-(0x112c+0x2*0xfa9+-0x1*0x307d)),_0x48d7c9['end']['copy'](_0x48d7c9['direction'])['mulScalar'](0x3f3+0xbad*0x1+-0x1*0xf9e)['add'](_0x48d7c9['origin']),!(0x260b*0x1+-0xcf*-0xd+-0x1*0x308e)):!(-0x1f*-0x12d+-0x9b3+0x1abf*-0x1);}['_calculate'+'Ray3d'](_0x40fd1b,_0x408701,_0x411e12,_0x3532cd){const _0xbd08e=this['_target']['clientWidt'+'h'],_0x177f89=this['_target']['clientHeig'+'ht'],_0x45a06c=_0x411e12['rect']['z']*_0xbd08e,_0x57a888=_0x411e12['rect']['w']*_0x177f89,_0xad7b83=_0x411e12['rect']['x']*_0xbd08e,_0x9ee7d5=_0xad7b83+_0x45a06c,_0x12ef77=(0x26fb+-0x1*-0xaab+-0x1*0x31a5-_0x411e12['rect']['y'])*_0x177f89,_0x23bd70=_0x12ef77-_0x57a888;let _0x402c1a=_0x40fd1b,_0x3cf4b3=_0x408701;return _0x40fd1b>=_0xad7b83&&_0x40fd1b<=_0x9ee7d5&&_0x408701<=_0x12ef77&&_0x3cf4b3>=_0x23bd70?(_0x402c1a=_0xbd08e*(_0x402c1a-_0xad7b83)/_0x45a06c,_0x3cf4b3=_0x177f89*(_0x3cf4b3-_0x23bd70)/_0x57a888,_0x411e12['screenToWo'+'rld'](_0x402c1a,_0x3cf4b3,_0x411e12['nearClip'],Of),_0x411e12['screenToWo'+'rld'](_0x402c1a,_0x3cf4b3,_0x411e12['farClip'],RS),_0x3532cd['origin']['copy'](Of),_0x3532cd['direction']['set'](-0x5f2*-0x1+-0xa87+0x3*0x187,-0x2*-0x101e+-0xce6+-0xc6*0x19,-(0x47*0x61+-0x1c*-0x6d+-0x26d2)),_0x3532cd['end']['copy'](RS),!(0x1d39*-0x1+0x24fb*-0x1+-0x37c*-0x13)):!(0x1610+-0x1*0x25de+0x39*0x47);}['_checkElem'+'ent'](_0x418c5b,_0x387431,_0x1645e8){if(_0x387431['maskedBy']&&this['_checkElem'+'ent'](_0x418c5b,_0x387431['maskedBy']['element'],_0x1645e8)<-0x265*0x6+0x93*0x1d+0x5*-0x75)return-(0x625*0x5+0x92*0x8+0x4*-0x8d2);let _0x226f10;_0x1645e8?_0x226f10=Xo['calculateS'+'caleToScre'+'en'](_0x387431):_0x226f10=Xo['calculateS'+'caleToWorl'+'d'](_0x387431);const _0x1d2135=Xo['buildHitCo'+'rners'](_0x387431,_0x1645e8?_0x387431['screenCorn'+'ers']:_0x387431['worldCorne'+'rs'],_0x226f10);return xU(_0x418c5b['origin'],_0x418c5b['end'],_0x1d2135);}static['buildHitCo'+'rners'](_0x2c300d,_0x1e8f20,_0x21a3d0){let _0x20ee5e=_0x1e8f20;if(_0x2c300d['entity']&&_0x2c300d['entity']['button']){const _0x589058=_0x2c300d['entity']['button']['hitPadding']||vU;wo['copy'](_0x2c300d['entity']['up']),Vc['copy'](wo)['mulScalar'](-(0x99e*0x3+-0x26f6+-0x35f*-0x3)),Eo['copy'](_0x2c300d['entity']['right']),Gc['copy'](Eo)['mulScalar'](-(0x523+0x1d3+-0x6f5)),wo['mulScalar'](_0x589058['w']*_0x21a3d0['y']),Vc['mulScalar'](_0x589058['y']*_0x21a3d0['y']),Eo['mulScalar'](_0x589058['z']*_0x21a3d0['x']),Gc['mulScalar'](_0x589058['x']*_0x21a3d0['x']),FS['copy'](_0x20ee5e[-0x240d+-0x21dd+0x39*0x13a])['add'](Vc)['add'](Gc),NS['copy'](_0x20ee5e[-0x2*-0xadc+-0x1737*0x1+-0x180*-0x1])['add'](Vc)['add'](Eo),kS['copy'](_0x20ee5e[-0x226b+-0x17*-0x10f+0x81*0x14])['add'](wo)['add'](Eo),US['copy'](_0x20ee5e[0x26e3+0x3*0x151+0x1*-0x2ad3])['add'](wo)['add'](Gc),_0x20ee5e=[FS,NS,kS,US];}if(_0x21a3d0['x']<0x118+0x2e6*0x7+-0x1562){const _0x5c831e=_0x20ee5e[0x1b3+-0x1d5d*-0x1+0x52d*-0x6]['x'],_0x5f4538=_0x20ee5e[-0x359*0x2+-0xb73+0x1225*0x1]['x'];_0x20ee5e[0x17c*-0x4+0xfd*-0x9+0xed5]['x']=_0x5c831e,_0x20ee5e[-0x1*-0x1462+0x51+-0x14b2]['x']=_0x5f4538,_0x20ee5e[-0x1802+0x3b3*-0x1+0x81*0x37]['x']=_0x5f4538,_0x20ee5e[-0x7b*0x29+0x205*0x2+0xfac]['x']=_0x5c831e;}if(_0x21a3d0['y']<-0xa5b+0x8a*-0x28+-0x1*-0x1feb){const _0x2df076=_0x20ee5e[0x24d6+0x583*-0x6+0x1*-0x3c2]['y'],_0x14c901=_0x20ee5e[0x1*0xb47+0x901+-0xec*0x16]['y'];_0x20ee5e[-0x1190+-0x1a3b+0x3*0xe99]['y']=_0x2df076,_0x20ee5e[0x1f1e+0x923*-0x3+-0x3b4]['y']=_0x2df076,_0x20ee5e[-0x1*-0x260f+0x1460+-0x1*0x3a6d]['y']=_0x14c901,_0x20ee5e[0x2679+0x23*0xdc+0x1*-0x448a]['y']=_0x14c901;}if(_0x21a3d0['z']<0xe2*0x29+-0xb3*-0x7+-0x2917){const _0x587e65=_0x20ee5e[0x1665+-0xa49+-0x2*0x60d]['x'],_0x120b5c=_0x20ee5e[0x133b+0x1207+0x95*-0x40]['y'],_0x2fc7e2=_0x20ee5e[0x26*-0x6b+0x247b+0xfb*-0x15]['z'];_0x20ee5e[0x1f*0x2f+0x1930+-0x1edf]['x']=_0x20ee5e[0x7d4*0x4+0x7d1+-0x2721]['x'],_0x20ee5e[0x1723*-0x1+-0x1cc0+0x33e5]['y']=_0x20ee5e[-0x4*-0x377+-0x1*-0xaa5+-0x1881]['y'],_0x20ee5e[0xf*-0xe8+-0x19*0xa7+0xf7*0x1f]['z']=_0x20ee5e[-0x11e2+-0x78d*-0x2+0x2c8]['z'],_0x20ee5e[0xb5a+0x52*0x67+-0x108*0x2b]['x']=_0x587e65,_0x20ee5e[-0x4e8*0x7+-0x2595+0x47ed*0x1]['y']=_0x120b5c,_0x20ee5e[-0x4*-0x789+0x1350+-0x3174]['z']=_0x2fc7e2;}return _0x20ee5e;}static['calculateS'+'caleToScre'+'en'](_0x105e9a){let _0x55731c=_0x105e9a['entity'];const _0x7bf47b=_0x105e9a['screen']['screen']['scale'];for(tn['set'](_0x7bf47b,_0x7bf47b,_0x7bf47b);_0x55731c&&!_0x55731c['screen'];)tn['mul'](_0x55731c['getLocalSc'+'ale']()),_0x55731c=_0x55731c['parent'];return tn;}static['calculateS'+'caleToWorl'+'d'](_0x1a02da){let _0x501d2c=_0x1a02da['entity'];for(tn['set'](0x4*-0xad+0x2d2*-0xb+0x21bb,-0x5ea*-0x1+-0x141a+0xe31,-0x213e+-0x7*-0x54e+-0x3e3);_0x501d2c;)tn['mul'](_0x501d2c['getLocalSc'+'ale']()),_0x501d2c=_0x501d2c['parent'];return tn;}}J['prototype']['scale']=J['prototype']['mulScalar'],D['prototype']['scale']=D['prototype']['mulScalar'],re['prototype']['scale']=re['prototype']['mulScalar'],new re();function YU(_0xc050a1,_0x28f021){return w['deprecated']('pc.createS'+'phere\x20is\x20d'+'eprecated.'+'\x20Use\x20\x27pc.M'+'esh.fromGe'+'ometry(dev'+'ice,\x20new\x20S'+'phereGeome'+'try(option'+'s);\x27\x20forma'+'t\x20instead.'),Ge['fromGeomet'+'ry'](_0xc050a1,new _m(_0x28f021));}Object['defineProp'+'erties'](gt['prototype'],{'_glFrameBuffer':{'get':function(){return w['deprecated']('pc.RenderT'+'arget#_glF'+'rameBuffer'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RenderT'+'arget.impl'+'#_glFrameB'+'uffer\x20inst'+'ead.'),this['impl']['_glFrameBu'+'ffer'];},'set':function(_0x41a913){w['deprecated']('pc.RenderT'+'arget#_glF'+'rameBuffer'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RenderT'+'arget.impl'+'#_glFrameB'+'uffer\x20inst'+'ead.');}}}),Object['defineProp'+'erty'](kt,'defaultIns'+'tancingFor'+'mat',{'get':function(){return w['assert']('pc.VertexF'+'ormat.defa'+'ultInstanc'+'ingFormat\x20'+'is\x20depreca'+'ted,\x20use\x20p'+'c.VertexFo'+'rmat.getDe'+'faultInsta'+'ncingForma'+'t(graphics'+'Device).'),null;}}),Object['defineProp'+'erties'](_e['prototype'],{'rgbm':{'get':function(){return w['deprecated']('pc.Texture'+'#rgbm\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Te'+'xture#type'+'\x20instead.'),this['type']===Zi;},'set':function(_0x2a7048){w['deprecated']('pc.Texture'+'#rgbm\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Te'+'xture#type'+'\x20instead.'),this['type']=_0x2a7048?Zi:Ds;}},'swizzleGGGR':{'get':function(){return w['deprecated']('pc.Texture'+'#swizzleGG'+'GR\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Textu'+'re#type\x20in'+'stead.'),this['type']===Jo;},'set':function(_0x4189eb){w['deprecated']('pc.Texture'+'#swizzleGG'+'GR\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Textu'+'re#type\x20in'+'stead.'),this['type']=_0x4189eb?Jo:Ds;}},'_glTexture':{'get':function(){return w['deprecated']('pc.Texture'+'#_glTextur'+'e\x20is\x20no\x20lo'+'nger\x20avail'+'able,\x20use\x20'+'Use\x20pc.Tex'+'ture.impl.'+'_glTexture'+'\x20instead.'),this['impl']['_glTexture'];}}}),Object['defineProp'+'erty']($e['prototype'],'boneLimit',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#bo'+'neLimit\x20is'+'\x20deprecate'+'d\x20and\x20the\x20'+'limit\x20has\x20'+'been\x20remov'+'ed.'),0x1b1f+-0x254d+-0x42*-0x37;}}),Object['defineProp'+'erty']($e['prototype'],'webgl2',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#we'+'bgl2\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e#isWebGL2'+'\x20instead.'),this['isWebGL2'];}}),Object['defineProp'+'erty']($e['prototype'],'textureFlo'+'atHighPrec'+'ision',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureFloat'+'HighPrecis'+'ion\x20is\x20dep'+'recated\x20an'+'d\x20always\x20r'+'eturns\x20tru'+'e.'),!(0x1785*-0x1+-0x196b+0x30f0);}}),Object['defineProp'+'erty']($e['prototype'],'extBlendMi'+'nmax',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tBlendMinm'+'ax\x20is\x20depr'+'ecated\x20as\x20'+'it\x20is\x20alwa'+'ys\x20true.'),!(-0x1e0a+-0x2395+0x6b*0x9d);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'HalfFloat',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureHa'+'lfFloat\x20is'+'\x20deprecate'+'d\x20as\x20it\x20is'+'\x20always\x20tr'+'ue.'),!(-0x139b+-0x7c3*0x3+0x2ae4);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'Lod',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureLo'+'d\x20is\x20depre'+'cated\x20as\x20i'+'t\x20is\x20alway'+'s\x20true.'),!(-0xb77+-0x2445+-0x2*-0x17de);}}),Object['defineProp'+'erty']($e['prototype'],'textureHal'+'fFloatFilt'+'erable',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureHalfF'+'loatFilter'+'able\x20is\x20de'+'precated\x20a'+'s\x20it\x20is\x20al'+'ways\x20true.'),!(0x584*-0x6+-0x1931+0x3a49);}}),Object['defineProp'+'erty']($e['prototype'],'supportsMr'+'t',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsMrt\x20'+'is\x20depreca'+'ted\x20as\x20it\x20'+'is\x20always\x20'+'true.'),!(0x1*0x86f+-0x14f9+0x1*0xc8a);}}),Object['defineProp'+'erty']($e['prototype'],'supportsVo'+'lumeTextur'+'es',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsVolu'+'meTextures'+'\x20is\x20deprec'+'ated\x20as\x20it'+'\x20is\x20always'+'\x20true.'),!(-0x1b6*-0x3+-0x7d3*-0x4+-0x246e);}}),Object['defineProp'+'erty']($e['prototype'],'supportsIn'+'stancing',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsInst'+'ancing\x20is\x20'+'deprecated'+'\x20as\x20it\x20is\x20'+'always\x20tru'+'e.'),!(-0x1a72+0xb*0x36c+0x2*-0x599);}}),Object['defineProp'+'erty']($e['prototype'],'textureHal'+'fFloatUpda'+'table',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureHalfF'+'loatUpdata'+'ble\x20is\x20dep'+'recated\x20as'+'\x20it\x20is\x20alw'+'ays\x20true.'),!(-0x1*-0x543+0xaa*-0x31+0x1b47);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'Float',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureFl'+'oat\x20is\x20dep'+'recated\x20as'+'\x20it\x20is\x20alw'+'ays\x20true'),!(0x2545+0xc54+0x1*-0x3199);}}),Object['defineProp'+'erty']($e['prototype'],'extStandar'+'dDerivativ'+'es',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tStandardD'+'erivatives'+'\x20is\x20deprec'+'ated\x20as\x20it'+'\x20is\x20always'+'\x20true.'),!(0x20f2+0x7*-0xed+-0x1a77);}}),pt['DEFAULT']=Object['freeze'](new pt());const ut=new pt(),ji=new Yt();$e['prototype']['setBlendFu'+'nction']=function(_0x111fd7,_0x595624){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendFunc'+'tion\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e.setBlend'+'State\x20inst'+'ead.');const _0x1db7d2=this['blendState'];ut['copy'](_0x1db7d2),ut['setColorBl'+'end'](_0x1db7d2['colorOp'],_0x111fd7,_0x595624),ut['setAlphaBl'+'end'](_0x1db7d2['alphaOp'],_0x111fd7,_0x595624),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendFu'+'nctionSepa'+'rate']=function(_0x57521f,_0x2adb47,_0xdbc205,_0x431c1e){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendFunc'+'tionSepara'+'te\x20is\x20depr'+'ecated,\x20us'+'e\x20pc.Graph'+'icsDevice.'+'setBlendSt'+'ate\x20instea'+'d.');const _0x38259e=this['blendState'];ut['copy'](_0x38259e),ut['setColorBl'+'end'](_0x38259e['colorOp'],_0x57521f,_0x2adb47),ut['setAlphaBl'+'end'](_0x38259e['alphaOp'],_0xdbc205,_0x431c1e),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendEq'+'uation']=function(_0xa2712e){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendEqua'+'tion\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e.setBlend'+'State\x20inst'+'ead.');const _0x1ca0f6=this['blendState'];ut['copy'](_0x1ca0f6),ut['setColorBl'+'end'](_0xa2712e,_0x1ca0f6['colorSrcFa'+'ctor'],_0x1ca0f6['colorDstFa'+'ctor']),ut['setAlphaBl'+'end'](_0xa2712e,_0x1ca0f6['alphaSrcFa'+'ctor'],_0x1ca0f6['alphaDstFa'+'ctor']),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendEq'+'uationSepa'+'rate']=function(_0x17885c,_0x4ebc1f){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendEqua'+'tionSepara'+'te\x20is\x20depr'+'ecated,\x20us'+'e\x20pc.Graph'+'icsDevice.'+'setBlendSt'+'ate\x20instea'+'d.');const _0xe8bc3=this['blendState'];ut['copy'](_0xe8bc3),ut['setColorBl'+'end'](_0x17885c,_0xe8bc3['colorSrcFa'+'ctor'],_0xe8bc3['colorDstFa'+'ctor']),ut['setAlphaBl'+'end'](_0x4ebc1f,_0xe8bc3['alphaSrcFa'+'ctor'],_0xe8bc3['alphaDstFa'+'ctor']),this['setBlendSt'+'ate'](ut);},$e['prototype']['setColorWr'+'ite']=function(_0x5e75f7,_0x2fbbf6,_0x1cc5bd,_0xf08b35){w['deprecated']('pc.Graphic'+'sDevice#se'+'tColorWrit'+'e\x20is\x20depre'+'cated,\x20use'+'\x20pc.Graphi'+'csDevice.s'+'etBlendSta'+'te\x20instead'+'.');const _0x12f86d=this['blendState'];ut['copy'](_0x12f86d),ut['setColorWr'+'ite'](_0x5e75f7,_0x2fbbf6,_0x1cc5bd,_0xf08b35),this['setBlendSt'+'ate'](ut);},$e['prototype']['getBlendin'+'g']=function(){return this['blendState']['blend'];},$e['prototype']['setBlendin'+'g']=function(_0x87857c){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlending\x20'+'is\x20depreca'+'ted,\x20use\x20p'+'c.Graphics'+'Device.set'+'BlendState'+'\x20instead.'),ut['copy'](this['blendState']),ut['blend']=_0x87857c,this['setBlendSt'+'ate'](ut);},$e['prototype']['setDepthWr'+'ite']=function(_0x284d32){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthWrit'+'e\x20is\x20depre'+'cated,\x20use'+'\x20pc.Graphi'+'csDevice.s'+'etDepthSta'+'te\x20instead'+'.'),ji['copy'](this['depthState']),ji['write']=_0x284d32,this['setDepthSt'+'ate'](ji);},$e['prototype']['setDepthFu'+'nc']=function(_0x390117){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthFunc'+'\x20is\x20deprec'+'ated,\x20use\x20'+'pc.Graphic'+'sDevice.se'+'tDepthStat'+'e\x20instead.'),ji['copy'](this['depthState']),ji['func']=_0x390117,this['setDepthSt'+'ate'](ji);},$e['prototype']['setDepthTe'+'st']=function(_0x47aa98){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthTest'+'\x20is\x20deprec'+'ated,\x20use\x20'+'pc.Graphic'+'sDevice.se'+'tDepthStat'+'e\x20instead.'),ji['copy'](this['depthState']),ji['test']=_0x47aa98,this['setDepthSt'+'ate'](ji);},$e['prototype']['getCullMod'+'e']=function(){return this['cullMode'];},new Proxy({},{'get'(_0x5820a4,_0x3855b7){return w['deprecated']('Using\x20pc.s'+'haderChunk'+'s\x20to\x20acces'+'s\x20global\x20s'+'hader\x20chun'+'ks\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Shade'+'rChunks.ge'+'t\x20instead,'+'\x20for\x20examp'+'le:\x20pc.Sha'+'derChunks.'+'get(this.a'+'pp.graphic'+'sDevice,\x20p'+'c.SHADERLA'+'NGUAGE_GLS'+'L).get(\x27'+_0x3855b7+'\x27);'),Pe['get'](Ms()['graphicsDe'+'vice'],Fe)['get'](_0x3855b7);},'set'(_0x2ded14,_0x3fdef1,_0x509b4e){return w['deprecated']('Using\x20pc.s'+'haderChunk'+'s\x20to\x20overr'+'ide\x20global'+'\x20shader\x20ch'+'unks\x20is\x20de'+'precated.\x20'+'Use\x20pc.Sha'+'derChunks.'+'get\x20instea'+'d,\x20for\x20exa'+'mple:\x20pc.S'+'haderChunk'+'s.get(this'+'.app.graph'+'icsDevice,'+'\x20pc.SHADER'+'LANGUAGE_G'+'LSL).set(\x27'+_0x3fdef1+'\x27);'),Pe['get'](Ms()['graphicsDe'+'vice'],Fe)['set'](_0x3fdef1,_0x509b4e),!(0x11fb+-0xbd6+-0x625);}}),Object['defineProp'+'erty'](Et['prototype'],'defaultMat'+'erial',{'get':function(){return w['deprecated']('pc.Scene#d'+'efaultMate'+'rial\x20is\x20de'+'precated.'),Qn(Ms()['graphicsDe'+'vice']);}}),Object['defineProp'+'erty'](Et['prototype'],'fogColor',{'set':function(_0x1cb774){w['deprecated']('Scene#fogC'+'olor\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.color\x20'+'instead.'),this['fog']['color']=_0x1cb774;},'get':function(){return w['deprecated']('Scene#fogC'+'olor\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.color\x20'+'instead.'),this['fog']['color'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogEnd',{'set':function(_0x51bcb8){w['deprecated']('Scene#fogE'+'nd\x20is\x20depr'+'ecated.\x20Us'+'e\x20Scene#fo'+'g.end\x20inst'+'ead.'),this['fog']['end']=_0x51bcb8;},'get':function(){return w['deprecated']('Scene#fogE'+'nd\x20is\x20depr'+'ecated.\x20Us'+'e\x20Scene#fo'+'g.end\x20inst'+'ead.'),this['fog']['end'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogStart',{'set':function(_0x5bf114){w['deprecated']('Scene#fogS'+'tart\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.start\x20'+'instead.'),this['fog']['start']=_0x5bf114;},'get':function(){return w['deprecated']('Scene#fogS'+'tart\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.start\x20'+'instead.'),this['fog']['start'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogDensity',{'set':function(_0x44da62){w['deprecated']('Scene#fogD'+'ensity\x20is\x20'+'deprecated'+'.\x20Use\x20Scen'+'e#fog.dens'+'ity\x20instea'+'d.'),this['fog']['density']=_0x44da62;},'get':function(){return w['deprecated']('Scene#fogD'+'ensity\x20is\x20'+'deprecated'+'.\x20Use\x20Scen'+'e#fog.dens'+'ity\x20instea'+'d.'),this['fog']['density'];}}),Object['defineProp'+'erty'](Et['prototype'],'toneMappin'+'g',{'set':function(_0x26ec8c){w['removed']('Scene#tone'+'Mapping\x20is'+'\x20removed.\x20'+'Use\x20Camera'+'Component#'+'toneMappin'+'g\x20instead.');},'get':function(){w['removed']('Scene#tone'+'Mapping\x20is'+'\x20removed.\x20'+'Use\x20Camera'+'Component#'+'toneMappin'+'g\x20instead.');}}),Object['defineProp'+'erty'](Et['prototype'],'gammaCorre'+'ction',{'set':function(_0x3cc119){w['removed']('Scene#gamm'+'aCorrectio'+'n\x20is\x20remov'+'ed.\x20Use\x20Ca'+'meraCompon'+'ent#gammaC'+'orrection\x20'+'instead.');},'get':function(){w['removed']('Scene#gamm'+'aCorrectio'+'n\x20is\x20remov'+'ed.\x20Use\x20Ca'+'meraCompon'+'ent#gammaC'+'orrection\x20'+'instead.');}}),Object['defineProp'+'erty'](Et['prototype'],'rendering',{'set':function(_0x57d319){w['removed']('Scene#rend'+'ering\x20is\x20r'+'emoved.\x20Us'+'e\x20Scene#fo'+'g\x20or\x20Camer'+'aComponent'+'#gammaCorr'+'ection\x20or\x20'+'CameraComp'+'onent#tone'+'Mapping\x20in'+'stead.');},'get':function(){w['removed']('Scene#rend'+'ering\x20is\x20r'+'emoved.\x20Us'+'e\x20Scene#fo'+'g\x20or\x20Camer'+'aComponent'+'#gammaCorr'+'ection\x20or\x20'+'CameraComp'+'onent#tone'+'Mapping\x20in'+'stead.');}}),Object['defineProp'+'erty'](du['prototype'],'_meshInsta'+'nces',{'get':function(){return w['deprecated']('pc.LayerCo'+'mposition#'+'_meshInsta'+'nces\x20is\x20de'+'precated.'),null;}}),Object['defineProp'+'erty'](Et['prototype'],'drawCalls',{'get':function(){return w['deprecated']('pc.Scene#d'+'rawCalls\x20i'+'s\x20deprecat'+'ed\x20and\x20no\x20'+'longer\x20pro'+'vides\x20mesh'+'\x20instances'+'.'),null;}}),['128','64','32','16','8','4']['forEach']((_0x3a88aa,_0x4bdf74)=>{Object['defineProp'+'erty'](Et['prototype'],'skyboxPref'+'iltered'+_0x3a88aa,{'get':function(){return w['deprecated']('pc.Scene#s'+'kyboxPrefi'+'ltered'+_0x3a88aa+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Scene#p'+'refiltered'+'Cubemaps\x20i'+'nstead.')),this['_prefilter'+'edCubemaps'][_0x4bdf74];},'set':function(_0x11e4b6){w['deprecated']('pc.Scene#s'+'kyboxPrefi'+'ltered'+_0x3a88aa+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Scene#p'+'refiltered'+'Cubemaps\x20i'+'nstead.')),this['_prefilter'+'edCubemaps'][_0x4bdf74]=_0x11e4b6,this['updateShad'+'ers']=!(0x807+0xa*-0x216+-0x16d*-0x9);}});}),Object['defineProp'+'erty'](Et['prototype'],'models',{'get':function(){return this['_models']||(this['_models']=[]),this['_models'];}});function Bt(_0x2cb7e6,_0x6217c9,_0x4f1d73=''){Object['defineProp'+'erty'](_0x2cb7e6['prototype'],_0x6217c9,{'set':function(_0x4c2064){w['errorOnce'](_0x2cb7e6['name']+'#'+_0x6217c9+('\x20has\x20been\x20'+'removed.\x20')+_0x4f1d73);},'get':function(){w['errorOnce'](_0x2cb7e6['name']+'#'+_0x6217c9+('\x20has\x20been\x20'+'removed.\x20')+_0x4f1d73);}});}Bt(Ot,'renderTarg'+'et'),Bt(Ot,'onPreCull'),Bt(Ot,'onPreRende'+'r'),Bt(Ot,'onPreRende'+'rOpaque'),Bt(Ot,'onPreRende'+'rTranspare'+'nt'),Bt(Ot,'onPostCull'),Bt(Ot,'onPostRend'+'er'),Bt(Ot,'onPostRend'+'erOpaque'),Bt(Ot,'onPostRend'+'erTranspar'+'ent'),Bt(Ot,'onDrawCall'),Bt(Ot,'layerRefer'+'ence'),Bt(Ir,'onPreCull','Use\x20Scene#'+'EVENT_PREC'+'ULL\x20event\x20'+'instead.'),Bt(Ir,'onPostCull','Use\x20Scene#'+'EVENT_POST'+'CULL\x20event'+'\x20instead.'),Bt(Ir,'onPreRende'+'r','Use\x20Scene#'+'EVENT_PRER'+'ENDER\x20even'+'t\x20instead.'),Bt(Ir,'onPostRend'+'er','Use\x20Scene#'+'EVENT_POST'+'RENDER\x20eve'+'nt\x20instead'+'.'),Bt(Ir,'onPreRende'+'rLayer','Use\x20Scene#'+'EVENT_PRER'+'ENDER_LAYE'+'R\x20event\x20in'+'stead.'),Bt(Ir,'onPostRend'+'erLayer','Use\x20Scene#'+'EVENT_POST'+'RENDER_LAY'+'ER\x20event\x20i'+'nstead.'),fl['prototype']['renderComp'+'osition']=function(_0xcfb1c6){w['deprecated']('pc.Forward'+'Renderer#r'+'enderCompo'+'sition\x20is\x20'+'deprecated'+'.\x20Use\x20pc.A'+'ppBase.ren'+'derComposi'+'tion\x20inste'+'ad.'),Ms()['renderComp'+'osition'](_0xcfb1c6);},He['prototype']['syncAabb']=function(){w['deprecated']('pc.MeshIns'+'tance#sync'+'Aabb\x20is\x20de'+'precated.');},mm['prototype']['getTarget']=function(_0x11db49){return w['deprecated']('pc.Morph#g'+'etTarget\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.Morph#tar'+'gets\x20inste'+'ad.'),this['targets'][_0x11db49];},Ie['prototype']['getChildre'+'n']=function(){return w['deprecated']('pc.GraphNo'+'de#getChil'+'dren\x20is\x20de'+'precated.\x20'+'Use\x20pc.Gra'+'phNode#chi'+'ldren\x20inst'+'ead.'),this['children'];},Ie['prototype']['getName']=function(){return w['deprecated']('pc.GraphNo'+'de#getName'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#name\x20in'+'stead.'),this['name'];},Ie['prototype']['getPath']=function(){return w['deprecated']('pc.GraphNo'+'de#getPath'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#path\x20in'+'stead.'),this['path'];},Ie['prototype']['getRoot']=function(){return w['deprecated']('pc.GraphNo'+'de#getRoot'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#root\x20in'+'stead.'),this['root'];},Ie['prototype']['getParent']=function(){return w['deprecated']('pc.GraphNo'+'de#getPare'+'nt\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Graph'+'Node#paren'+'t\x20instead.'),this['parent'];},Ie['prototype']['setName']=function(_0x227178){w['deprecated']('pc.GraphNo'+'de#setName'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#name\x20in'+'stead.'),this['name']=_0x227178;},Object['defineProp'+'erty'](tr['prototype'],'shader',{'set':function(_0x470776){w['deprecated']('pc.Materia'+'l#shader\x20i'+'s\x20deprecat'+'ed,\x20use\x20pc'+'.ShaderMat'+'erial\x20inst'+'ead.');},'get':function(){return w['deprecated']('pc.Materia'+'l#shader\x20i'+'s\x20deprecat'+'ed,\x20use\x20pc'+'.ShaderMat'+'erial\x20inst'+'ead.'),null;}}),Object['defineProp'+'erty'](tr['prototype'],'blend',{'set':function(_0x8c86b4){w['deprecated']('pc.Materia'+'l#blend\x20is'+'\x20deprecate'+'d,\x20use\x20pc.'+'Material.b'+'lendState.'),this['blendState']['blend']=_0x8c86b4;},'get':function(){return this['blendState']['blend'];}}),Object['defineProp'+'erty'](Ut['prototype'],'shininess',{'get':function(){return this['gloss']*(0xe51*-0x1+-0x1900+0x27b5);},'set':function(_0x14ecbf){this['gloss']=_0x14ecbf*(-0x4*-0x552+0x207+-0x174f+0.01);}}),Object['defineProp'+'erty'](Ut['prototype'],'useGammaTo'+'nemap',{'get':function(){return this['useTonemap'];},'set':function(_0x5584bb){this['useTonemap']=_0x5584bb;}}),Object['defineProp'+'erty'](Ut['prototype'],'anisotropy',{'get':function(){w['deprecated']('pc.Standar'+'dMaterial#'+'anisotropy'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#'+'anisotropy'+'Intensity\x20'+'and\x20pc.Sta'+'ndardMater'+'ial#anisot'+'ropyRotati'+'on\x20instead'+'.');const _0xe9df1a=Math['sign'](Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']*(0x2682+-0x2247+-0x439)));return this['anisotropy'+'Intensity']*_0xe9df1a;},'set':function(_0x454bac){w['deprecated']('pc.Standar'+'dMaterial#'+'anisotropy'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#'+'anisotropy'+'Intensity\x20'+'and\x20pc.Sta'+'ndardMater'+'ial#anisot'+'ropyRotati'+'on\x20instead'+'.'),this['anisotropy'+'Intensity']=Math['abs'](_0x454bac),_0x454bac>=0x1105+-0x1*0x243+-0xec2?this['anisotropy'+'Rotation']=0x1*-0x1ea1+0x48*-0x54+0x3641:this['anisotropy'+'Rotation']=0x3f*-0x5d+-0x414+0xbd*0x25;}});function Qs(_0x5acd0d,_0x18c0a6){Object['defineProp'+'erty'](Ut['prototype'],_0x18c0a6,{'get':function(){return w['deprecated']('pc.Standar'+'dMaterial#'+_0x18c0a6+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#')+_0x5acd0d+'\x20instead.'),this[_0x5acd0d];},'set':function(_0x9d56da){w['deprecated']('pc.Standar'+'dMaterial#'+_0x18c0a6+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#')+_0x5acd0d+'\x20instead.'),this[_0x5acd0d]=_0x9d56da;}});}function Id(_0x9435b2){Object['defineProp'+'erty'](Ut['prototype'],_0x9435b2,{'get':function(){return w['deprecated']('pc.Standar'+'dMaterial#'+_0x9435b2+('\x20is\x20deprec'+'ated,\x20and\x20'+'the\x20behavi'+'our\x20is\x20as\x20'+'if\x20')+_0x9435b2+('\x20was\x20alway'+'s\x20true')),!(-0x3b0+-0xf12+0x961*0x2);},'set':function(_0x1ed23d){w['deprecated']('pc.Standar'+'dMaterial#'+_0x9435b2+('\x20is\x20deprec'+'ated,\x20and\x20'+'the\x20behavi'+'our\x20is\x20as\x20'+'if\x20')+_0x9435b2+('\x20was\x20alway'+'s\x20true'));}});}Id('sheenTint'),Id('diffuseTin'+'t'),Id('emissiveTi'+'nt'),Id('ambientTin'+'t'),Qs('specularTi'+'nt','specularMa'+'pTint'),Qs('aoVertexCo'+'lor','aoMapVerte'+'xColor'),Qs('diffuseVer'+'texColor','diffuseMap'+'VertexColo'+'r'),Qs('specularVe'+'rtexColor','specularMa'+'pVertexCol'+'or'),Qs('emissiveVe'+'rtexColor','emissiveMa'+'pVertexCol'+'or'),Qs('metalnessV'+'ertexColor','metalnessM'+'apVertexCo'+'lor'),Qs('glossVerte'+'xColor','glossMapVe'+'rtexColor'),Qs('opacityVer'+'texColor','opacityMap'+'VertexColo'+'r'),Qs('lightVerte'+'xColor','lightMapVe'+'rtexColor'),Qs('sheenGloss','sheenGloss'+'iess'),Qs('clearCoatG'+'loss','clearCostG'+'lossiness');function F0(_0x294249,_0x5bdccc){_0x294249!=='pass'&&Object['defineProp'+'erty'](dl['prototype'],_0x294249,{'get':function(){return w['deprecated']('Getting\x20pc'+'.Options#'+_0x294249+('\x20has\x20been\x20'+'deprecated'+'\x20as\x20the\x20pr'+'operty\x20has'+'\x20been\x20move'+'d\x20to\x20pc.Op'+'tions.LitS'+'haderOptio'+'ns#')+(_0x5bdccc||_0x294249)+'.'),this['litOptions'][_0x5bdccc||_0x294249];},'set':function(_0x23191b){w['deprecated']('Setting\x20pc'+'.Options#'+_0x294249+('\x20has\x20been\x20'+'deprecated'+'\x20as\x20the\x20pr'+'operty\x20has'+'\x20been\x20move'+'d\x20to\x20pc.Op'+'tions.LitS'+'haderOptio'+'ns#')+(_0x5bdccc||_0x294249)+'.'),this['litOptions'][_0x5bdccc||_0x294249]=_0x23191b;}});}F0('refraction','useRefract'+'ion');const TU=new wv(),zS=Object['getOwnProp'+'ertyNames'](TU);for(const l in zS)F0(zS[l]);mn['prototype']['getAssetBy'+'Id']=function(_0x3e0f83){return w['deprecated']('pc.AssetRe'+'gistry#get'+'AssetById\x20'+'is\x20depreca'+'ted.\x20Use\x20p'+'c.AssetReg'+'istry#get\x20'+'instead.'),this['get'](_0x3e0f83);},Object['defineProp'+'erty'](Qt['prototype'],'ray',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#ray'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.XrInput'+'Source#get'+'Origin\x20and'+'\x20pc.XrInpu'+'tSource#ge'+'tDirection'+'\x20instead.'),this['_rayLocal'];}}),Object['defineProp'+'erty'](Qt['prototype'],'position',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#pos'+'ition\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Xr'+'InputSourc'+'e#getLocal'+'Position\x20i'+'nstead.'),this['_localPosi'+'tion'];}}),Object['defineProp'+'erty'](Qt['prototype'],'rotation',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#rot'+'ation\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Xr'+'InputSourc'+'e#getLocal'+'Rotation\x20i'+'nstead.'),this['_localRota'+'tion'];}}),Object['defineProp'+'erty'](Xo['prototype'],'wheel',{'get':function(){return this['wheelDelta']*-(-0x1990+-0x2490+0x3e22);}}),Object['defineProp'+'erty'](ta['prototype'],'wheel',{'get':function(){return this['wheelDelta']*-(0x5a*0x4a+0x8c1+-0x22c3);}}),Ks['prototype']['isFullscre'+'en']=function(){return w['deprecated']('pc.AppBase'+'#isFullscr'+'een\x20is\x20dep'+'recated.\x20U'+'se\x20the\x20Ful'+'lscreen\x20AP'+'I\x20directly'+'.'),!!document['fullscreen'+'Element'];},Ks['prototype']['enableFull'+'screen']=function(_0x42315f,_0x6baaa4,_0x233f98){w['deprecated']('pc.AppBase'+'#enableFul'+'lscreen\x20is'+'\x20deprecate'+'d.\x20Use\x20the'+'\x20Fullscree'+'n\x20API\x20dire'+'ctly.'),_0x42315f=_0x42315f||this['graphicsDe'+'vice']['canvas'];const _0x3ba5b4=function(){_0x6baaa4(),document['removeEven'+'tListener']('fullscreen'+'change',_0x3ba5b4);},_0x287d0c=function(){_0x233f98(),document['removeEven'+'tListener']('fullscreen'+'error',_0x287d0c);};_0x6baaa4&&document['addEventLi'+'stener']('fullscreen'+'change',_0x3ba5b4,!(0x2c8*0x1+0x1*0x247d+-0x167*0x1c)),_0x233f98&&document['addEventLi'+'stener']('fullscreen'+'error',_0x287d0c,!(-0xa*0x1d+0x986+-0x863)),_0x42315f['requestFul'+'lscreen']?_0x42315f['requestFul'+'lscreen'](Element['ALLOW_KEYB'+'OARD_INPUT']):_0x233f98();},Ks['prototype']['disableFul'+'lscreen']=function(_0x379428){w['deprecated']('pc.AppBase'+'#disableFu'+'llscreen\x20i'+'s\x20deprecat'+'ed.\x20Use\x20th'+'e\x20Fullscre'+'en\x20API\x20dir'+'ectly.');const _0x1f127d=function(){_0x379428(),document['removeEven'+'tListener']('fullscreen'+'change',_0x1f127d);};_0x379428&&document['addEventLi'+'stener']('fullscreen'+'change',_0x1f127d,!(0x1f25+-0x1dd7+-0x14d)),document['exitFullsc'+'reen']();},Ks['prototype']['getSceneUr'+'l']=function(_0x989e89){w['deprecated']('pc.AppBase'+'#getSceneU'+'rl\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.AppBa'+'se#scenes\x20'+'and\x20pc.Sce'+'neRegistry'+'#find\x20inst'+'ead.');const _0x5bba84=this['scenes']['find'](_0x989e89);return _0x5bba84?_0x5bba84['url']:null;},Ks['prototype']['loadScene']=function(_0x313bf5,_0x3650e4){w['deprecated']('pc.AppBase'+'#loadScene'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.AppBase'+'#scenes\x20an'+'d\x20pc.Scene'+'Registry#l'+'oadScene\x20i'+'nstead.'),this['scenes']['loadScene'](_0x313bf5,_0x3650e4);},Ks['prototype']['loadSceneH'+'ierarchy']=function(_0x470802,_0x5ce5fe){w['deprecated']('pc.AppBase'+'#loadScene'+'Hierarchy\x20'+'is\x20depreca'+'ted.\x20Use\x20p'+'c.AppBase#'+'scenes\x20and'+'\x20pc.SceneR'+'egistry#lo'+'adSceneHie'+'rarchy\x20ins'+'tead.'),this['scenes']['loadSceneH'+'ierarchy'](_0x470802,_0x5ce5fe);},Ks['prototype']['loadSceneS'+'ettings']=function(_0x59e7b9,_0x4bc3f8){w['deprecated']('pc.AppBase'+'#loadScene'+'Settings\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.AppBase#s'+'cenes\x20and\x20'+'pc.SceneRe'+'gistry#loa'+'dSceneSett'+'ings\x20inste'+'ad.'),this['scenes']['loadSceneS'+'ettings'](_0x59e7b9,_0x4bc3f8);},Tm['prototype']['setVisible']=function(_0x108cb0){w['deprecated']('pc.ModelCo'+'mponent#se'+'tVisible\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.ModelComp'+'onent#enab'+'led\x20instea'+'d.'),this['enabled']=_0x108cb0;},Object['defineProp'+'erty'](bs['prototype'],'bodyType',{'get':function(){return w['deprecated']('pc.RigidBo'+'dyComponen'+'t#bodyType'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RigidBo'+'dyComponen'+'t#type\x20ins'+'tead.'),this['type'];},'set':function(_0x1a8eec){w['deprecated']('pc.RigidBo'+'dyComponen'+'t#bodyType'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RigidBo'+'dyComponen'+'t#type\x20ins'+'tead.'),this['type']=_0x1a8eec;}}),bs['prototype']['syncBodyTo'+'Entity']=function(){w['deprecated']('pc.RigidBo'+'dyComponen'+'t#syncBody'+'ToEntity\x20i'+'s\x20not\x20publ'+'ic\x20API\x20and'+'\x20should\x20no'+'t\x20be\x20used.'),this['_updateDyn'+'amic']();},wm['prototype']['setGravity']=function(){w['deprecated']('pc.RigidBo'+'dyComponen'+'tSystem#se'+'tGravity\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.RigidBody'+'ComponentS'+'ystem#grav'+'ity\x20instea'+'d.'),arguments['length']===-0x1229+-0x3*-0x40f+0x5fd*0x1?this['gravity']['copy'](arguments[0x5d*0x35+0x1d31+-0x3072]):this['gravity']['set'](arguments[-0x6*-0x29d+0x102*0x1a+-0xdf6*0x3],arguments[-0x12ce+0xb84+-0x1*-0x74b],arguments[-0x1*-0x139+-0x1*0x13a+-0x1*-0x3]);};class wU{constructor(_0x2e3c19){this['_frameInde'+'x']=0x27*-0x1+-0xa05*0x3+0xa12*0x3,this['_frameTimi'+'ngs']=[],this['_timings']=[],this['_prevTimin'+'gs']=[],this['unitsName']='ms',this['decimalPla'+'ces']=0x7db+0x2231*0x1+-0x2f*0xe5,this['enabled']=!(-0x856+0x24e*0x1+0x1*0x608),_0x2e3c19['on']('frameupdat'+'e',this['begin']['bind'](this,'update')),_0x2e3c19['on']('framerende'+'r',this['mark']['bind'](this,'render')),_0x2e3c19['on']('frameend',this['mark']['bind'](this,'other'));}['begin'](_0x329178){if(!this['enabled'])return;this['_frameInde'+'x']<this['_frameTimi'+'ngs']['length']&&this['_frameTimi'+'ngs']['splice'](this['_frameInde'+'x']);const _0x388313=this['_prevTimin'+'gs'];this['_prevTimin'+'gs']=this['_timings'],this['_timings']=this['_frameTimi'+'ngs'],this['_frameTimi'+'ngs']=_0x388313,this['_frameInde'+'x']=0x9ac+-0x1*0x2002+-0x772*-0x3,this['mark'](_0x329178);}['mark'](_0x4cc67d){if(!this['enabled'])return;const _0x1ddf2d=de();if(this['_frameInde'+'x']>-0x2480*0x1+-0x1*0x117+0x2597){const _0x2c8206=this['_frameTimi'+'ngs'][this['_frameInde'+'x']-(0x5*-0x205+0x1*-0x10b+0xb25)];_0x2c8206[-0x285+0x1a78+-0x1*0x17f2]=_0x1ddf2d-_0x2c8206[0x242+-0x1600+0x13bf];}else{if(this['_timings']['length']>0xb67+-0xd*-0x245+-0x28e8){const _0x24d6c5=this['_timings'][this['_timings']['length']-(-0x10c9+0x1*0x1b29+-0xa5f)];_0x24d6c5[-0x153b+0x3de+0x115e]=_0x1ddf2d-_0x24d6c5[0xa23+0x21de+-0x2c00];}}if(this['_frameInde'+'x']>=this['_frameTimi'+'ngs']['length'])this['_frameTimi'+'ngs']['push']([_0x4cc67d,_0x1ddf2d]);else{const _0xc78785=this['_frameTimi'+'ngs'][this['_frameInde'+'x']];_0xc78785[-0x64b*0x2+-0x806+0x2*0xa4e]=_0x4cc67d,_0xc78785[-0x25b3+0xb*0x1d7+0x1177]=_0x1ddf2d;}this['_frameInde'+'x']++;}get['timings'](){return this['_timings']['slice'](0x31*-0x3b+0x4*-0x251+0x148f*0x1,-(0x13a9*-0x1+-0x5*-0x151+0x11*0xc5))['map'](_0x4f7ad0=>_0x4f7ad0[-0x135f+0x175d*0x1+-0x3fd]);}}class EU{constructor(_0xc438be){this['device']=_0xc438be,_0xc438be['gpuProfile'+'r']['enabled']=!(-0x982*-0x2+0x25c2+-0xa9*0x56),this['enabled']=!(-0x255d+-0x9d+0x25fa),this['unitsName']='ms',this['decimalPla'+'ces']=-0x9*0x335+-0x9cd*0x3+0x3a45,this['_timings']=[];}get['timings'](){return this['_timings'][0x346+0x2f7*-0x8+0x1*0x1472]=this['device']['gpuProfile'+'r']['_frameTime'],this['_timings'];}}class bU{constructor(_0x4b4b92,_0x10496a,_0x124da9,_0x1d680e,_0x3dd6ce){this['app']=_0x4b4b92,this['values']=[],this['statNames']=_0x10496a,this['statNames']['length']>-0x161e+-0x16ce+0x2cef&&(this['statNames']['length']=-0x25ca*-0x1+-0xd*0x192+-0x115d),this['unitsName']=_0x1d680e,this['decimalPla'+'ces']=_0x124da9,this['multiplier']=_0x3dd6ce||0xf17*0x1+-0x6fb+-0x19f*0x5;const _0x3cecd9=(_0x11bd52,_0x262fec)=>_0x11bd52['split']('.')['reduce']((_0x1f9092,_0x2b4aed)=>_0x1f9092?_0x1f9092[_0x2b4aed]:null,_0x262fec||this);_0x4b4b92['on']('frameupdat'+'e',_0x335f76=>{for(let _0x18f907=0x1d05+-0x5*-0x5ab+0x2*-0x1cae;_0x18f907<this['statNames']['length'];_0x18f907++)this['values'][_0x18f907]=_0x3cecd9(this['statNames'][_0x18f907],this['app']['stats'])*this['multiplier'];});}get['timings'](){return this['values'];}}class Uf{constructor(_0x509124,_0x1874fd,_0x3102e9,_0x139c33,_0x426064){this['app']=_0x1874fd,this['name']=_0x509124,this['device']=_0x1874fd['graphicsDe'+'vice'],this['timer']=_0x426064,this['watermark']=_0x3102e9,this['enabled']=!(-0x9d0*0x1+0xeaa+-0x4d9),this['textRefres'+'hRate']=_0x139c33,this['avgTotal']=-0x17+-0x255c+0x2573,this['avgTimer']=-0x2334+-0x268e+0x49c2,this['avgCount']=-0x256*-0x7+0x108a*-0x2+0x10ba,this['timingText']='',this['texture']=null,this['yOffset']=-0x12b*-0x3+0x85*0x25+-0x16ba,this['cursor']=0xff7*-0x2+-0x1915*0x1+0x3cd*0xf,this['sample']=new Uint8ClampedArray(-0x4+-0xee*-0xc+-0xb20),this['sample']['set']([-0xe2a+0x2646+0x2*-0xc0e,0x2249+0x21de+-0x4427,0x15f3+-0x200e+0xa1b,0x29*-0x33+0xc95+-0x7*0x7d]),this['counter']=-0x5*0x517+0x8f8*0x4+-0xa6d,this['app']['on']('frameupdat'+'e',this['update'],this);}['destroy'](){this['app']['off']('frameupdat'+'e',this['update'],this);}['loseContex'+'t'](){this['timer']&&typeof this['timer']['loseContex'+'t']=='function'&&this['timer']['loseContex'+'t']();}['update'](_0x189571){const _0x3bae05=this['timer']['timings'],_0x18be37=_0x3bae05['reduce']((_0x3bda50,_0x3ff5d5)=>_0x3bda50+_0x3ff5d5,0x62c+0x2327+-0x2953);if(this['avgTotal']+=_0x18be37,this['avgTimer']+=_0x189571,this['avgCount']++,this['avgTimer']>this['textRefres'+'hRate']&&(this['timingText']=(this['avgTotal']/this['avgCount'])['toFixed'](this['timer']['decimalPla'+'ces']),this['avgTimer']=0x229b+-0xd*-0x149+-0x3350,this['avgTotal']=-0xc04+-0x1*0x14a1+0x20a5,this['avgCount']=-0x143+0x1af*-0xd+0x1726*0x1),this['enabled']){let _0x1015c3=-0x1c04+-0x1*0xbf8+-0x6aa*-0x6;const _0x1f3961=(-0x19fa+-0x1*-0x1aff+-0x5*0x34+0.5)*this['watermark'];for(let _0x54908c=-0x77b+-0x1539+-0x2*-0xe5a;_0x54908c<_0x3bae05['length'];++_0x54908c)_0x1015c3+=Math['floor'](_0x3bae05[_0x54908c]/_0x1f3961*(-0x156b+0x1*-0x455+0x1abf)),this['sample'][_0x54908c]=_0x1015c3;this['sample'][0x2*-0xce0+-0x312+-0x79*-0x3d]=this['watermark']/_0x1f3961*(-0x12a9+-0x752*-0x1+0xc56),this['texture']['lock']()['set'](this['sample'],(this['cursor']+this['yOffset']*this['texture']['width'])*(0x1ce*-0x15+0x12ab+0x133f*0x1)),this['texture']['unlock'](),this['cursor']++,this['cursor']===this['texture']['width']&&(this['cursor']=0xc0e+-0x1*0xe8f+0x281*0x1);}}['render'](_0x189c67,_0x5286d5,_0x1b31c7,_0x4e380b,_0x15676b){_0x189c67['quad'](_0x5286d5+_0x4e380b,_0x1b31c7,-_0x4e380b,_0x15676b,this['enabled']?this['cursor']:0x1ebf+-0x8cd+-0x15f2,this['enabled']?-0x7*-0x41f+0x1aed+0xf2*-0x3b+0.5+this['yOffset']:this['texture']['height']-(0x3*0xa0f+-0xeb3+-0xf79),-_0x4e380b,-0x209d+0x2237+-0x52*0x5,this['texture'],-0x2*0x6b5+0x55*-0x1+0xdbf);}}class AU{constructor(_0x196f11,_0x4a9311){const _0x273e9d=_0x56a565=>{_0x56a565['font']='10px\x20\x22Luci'+'da\x20Console'+'\x22,\x20Monaco,'+'\x20monospace',_0x56a565['textAlign']='left',_0x56a565['textBaseli'+'ne']='alphabetic';},_0x33a93a=_0x4aea1f=>_0x4aea1f==='.'||_0x4aea1f['length']===0x702+-0x7*-0x4b4+-0x27ed*0x1&&_0x4aea1f['charCodeAt'](-0x2616+-0x2*0x565+0x30e0)>=0x19+0x11de+0x1*-0x11c7&&_0x4aea1f['charCodeAt'](-0x1b70+0x1*-0x1bb1+-0xb*-0x503)<=0x1198+0x46*0x32+-0x1*0x1f0b,_0x2a932c=document['createElem'+'ent']('canvas'),_0x5bb9b0=_0x2a932c['getContext']('2d',{'alpha':!(0x16f7+0x14b5+-0x2bac)});_0x273e9d(_0x5bb9b0);const _0x1ad4fc=new Map(),_0x41ad72=0x2e*-0x82+0x8d2+0xe8f*0x1,_0x1d1bcc=0xf7f*-0x2+0x8a*-0xa+0x121*0x22;let _0x441464=_0x41ad72,_0x15d97d=_0x41ad72;_0x4a9311['forEach'](_0x54ac0c=>{const _0x25c420=_0x5bb9b0['measureTex'+'t'](_0x54ac0c),_0x532ebe=Math['ceil'](-_0x25c420['actualBoun'+'dingBoxLef'+'t']),_0x878db3=Math['ceil'](_0x25c420['actualBoun'+'dingBoxRig'+'ht']),_0x39caf9=Math['ceil'](_0x25c420['actualBoun'+'dingBoxAsc'+'ent']),_0x567348=Math['ceil'](_0x25c420['actualBoun'+'dingBoxDes'+'cent']),_0x51b00f=_0x532ebe+_0x878db3,_0x15c1eb=_0x39caf9+_0x567348;_0x441464+_0x51b00f+_0x41ad72>=_0x1d1bcc&&(_0x441464=_0x41ad72,_0x15d97d+=0x45+-0x39b+0x366),_0x1ad4fc['set'](_0x54ac0c,{'l':_0x532ebe,'r':_0x878db3,'a':_0x39caf9,'d':_0x567348,'w':_0x51b00f,'h':_0x15c1eb,'x':_0x441464,'y':_0x15d97d}),_0x441464+=_0x51b00f+_0x41ad72;}),_0x2a932c['width']=0xaf9+0x71*0x55+-0x2e7e,_0x2a932c['height']=Y['nextPowerO'+'fTwo'](_0x15d97d+(-0xbc0+0x529+0x6a7)+_0x41ad72),_0x273e9d(_0x5bb9b0),_0x5bb9b0['fillStyle']='rgb(0,\x200,\x20'+'0)',_0x5bb9b0['fillRect'](0x473+0x1*-0x13d1+0x232*0x7,-0x3fc+-0x129b+0x1697,_0x2a932c['width'],_0x2a932c['height']),_0x1ad4fc['forEach']((_0x42f4c6,_0xdf4337)=>{_0x5bb9b0['fillStyle']=_0x33a93a(_0xdf4337)?'rgb(255,\x202'+'55,\x20255)':'rgb(170,\x201'+'70,\x20170)',_0x5bb9b0['fillText'](_0xdf4337,_0x42f4c6['x']-_0x42f4c6['l'],_0x42f4c6['y']+_0x42f4c6['a']);}),this['placements']=_0x1ad4fc;const _0x57c5b8=_0x5bb9b0['getImageDa'+'ta'](-0x1d72+0x712+0x1660,-0x822+0x130d+-0xd*0xd7,_0x2a932c['width'],_0x2a932c['height'])['data'];for(let _0x495447=-0x1*0x2237+-0x2296+0x7a5*0x9;_0x495447<_0x57c5b8['length'];_0x495447+=0x4*-0x3a7+0x55b*-0x4+0x240c)_0x57c5b8[_0x495447+(-0x2*0x3c5+-0x553+-0x10*-0xce)]=_0x57c5b8[_0x495447+(0xb*0x155+-0x8da+-0x5cd)],_0x57c5b8[_0x495447+(-0x1e4b+0x1b28+0x323)]=0x1a36*-0x1+-0xa2b*-0x1+-0x6*-0x2d7,_0x57c5b8[_0x495447+(-0x533+0x52*0x56+-0x1658)]=0x2cb+-0x15b+0x71*-0x1,_0x57c5b8[_0x495447+(-0x13a3+0x23cc+-0x1027)]=0x1519+0x1f96+-0x33b0;this['texture']=new _e(_0x196f11,{'name':'mini-stats'+'-word-atla'+'s','width':_0x2a932c['width'],'height':_0x2a932c['height'],'mipmaps':!(-0x283*-0x1+0x1c7*0x8+-0x1*0x10ba),'minFilter':Te,'magFilter':Te,'levels':[_0x57c5b8]});}['destroy'](){this['texture']['destroy'](),this['texture']=null;}['render'](_0x3d93bf,_0xa80649,_0x41b334,_0x307989){const _0x534205=this['placements']['get'](_0xa80649);return _0x534205?(_0x3d93bf['quad'](_0x41b334+_0x534205['l']-(0x5*0x2fb+0x1c2d+-0x2b13*0x1),_0x307989-_0x534205['d']+(0x1863+-0x26b+0x15f7*-0x1),_0x534205['w']+(0x9*-0x335+-0x1aed*0x1+0x37cc),_0x534205['h']+(0x9*-0xb+0x1*-0x1395+-0x9fd*-0x2),_0x534205['x']-(-0x1ef9+-0x869*0x4+0x1*0x409e),this['texture']['height']-_0x534205['y']-_0x534205['h']-(0x1706*0x1+-0x1*-0x1834+0x9d*-0x4d),void(-0x151*0xc+0x2651+0x481*-0x5),void(-0x20c5+-0x1516+0x35db),this['texture'],-0x5*-0x55b+0xf96+-0x2a5c),_0x534205['w']):0x4d0+0x20e7+0x78b*-0x5;}}const CU='\x0a\x20\x20\x20\x20attri'+'bute\x20vec3\x20'+'vertex_pos'+'ition;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20un'+'normalized'+'\x20xy,\x20word\x20'+'flag\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_texCoord0'+';\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20unnormal'+'ized\x20textu'+'re\x20space\x20u'+'v,\x20normali'+'zed\x20uv\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec4\x20uv0;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20float\x20wo'+'rdFlag;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion.xy\x20*\x202'+'.0\x20-\x201.0,\x20'+'0.5,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20verte'+'x_texCoord'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20wordFlag\x20'+'=\x20vertex_p'+'osition.z;'+'\x0a\x20\x20\x20\x20}\x0a',PU='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec3f;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'unnormaliz'+'ed\x20xy,\x20wor'+'d\x20flag\x0a\x20\x20\x20'+'\x20attribute'+'\x20vertex_te'+'xCoord0:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20unno'+'rmalized\x20t'+'exture\x20spa'+'ce\x20uv,\x20nor'+'malized\x20uv'+'\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'varying\x20wo'+'rdFlag:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x20fn\x20v'+'ertexMain('+'input\x20:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output\x20:\x20'+'VertexOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4(input'+'.vertex_po'+'sition.xy\x20'+'*\x202.0\x20-\x201.'+'0,\x200.5,\x201.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.u'+'v0\x20=\x20input'+'.vertex_te'+'xCoord0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.wordFl'+'ag\x20=\x20input'+'.vertex_po'+'sition.z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',MU='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20uv'+'0;\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20wordFlag;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'lr;\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20grap'+'hTex;\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20wo'+'rdsTex;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in\x20(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20graph'+'Sample\x20=\x20t'+'exture2D(g'+'raphTex,\x20u'+'v0.xy);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20graph;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv0.w\x20<\x20g'+'raphSample'+'.r)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20grap'+'h\x20=\x20vec4(0'+'.7,\x200.2,\x200'+'.2,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20graph\x20=\x20'+'vec4(0.2,\x20'+'0.7,\x200.2,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20else\x20i'+'f\x20(uv0.w\x20<'+'\x20graphSamp'+'le.b)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gr'+'aph\x20=\x20vec4'+'(0.2,\x200.2,'+'\x200.7,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20gra'+'ph\x20=\x20vec4('+'0.0,\x200.0,\x20'+'0.0,\x201.0\x20-'+'\x200.25\x20*\x20si'+'n(uv0.w\x20*\x20'+'3.14159));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20words'+'\x20=\x20texture'+'2D(wordsTe'+'x,\x20vec2(uv'+'0.x,\x201.0\x20-'+'\x20uv0.y));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20mix(gr'+'aph,\x20words'+',\x20wordFlag'+')\x20*\x20clr;\x0a\x20'+'\x20\x20\x20}\x0a',DU='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c4f;\x0a\x20\x20\x20\x20v'+'arying\x20wor'+'dFlag:\x20f32'+';\x0a\x0a\x20\x20\x20\x20uni'+'form\x20clr:\x20'+'vec4f;\x0a\x0a\x20\x20'+'\x20\x20var\x20grap'+'hTex\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20graphTex'+'_sampler\x20:'+'\x20sampler;\x0a'+'\x0a\x20\x20\x20\x20var\x20w'+'ordsTex\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20words'+'Tex_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20u'+'v0:\x20vec4f\x20'+'=\x20input.uv'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20graph'+'Sample:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'graphTex,\x20'+'graphTex_s'+'ampler,\x20uv'+'0.xy);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'graph:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(uv0.'+'w\x20<\x20graphS'+'ample.r)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20graph\x20='+'\x20vec4f(0.7'+',\x200.2,\x200.2'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20graph\x20'+'=\x20vec4f(0.'+'2,\x200.7,\x200.'+'2,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(uv'+'0.w\x20<\x20grap'+'hSample.b)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20graph'+'\x20=\x20vec4f(0'+'.2,\x200.2,\x200'+'.7,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'raph\x20=\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x201.'+'0\x20-\x200.25\x20*'+'\x20sin(uv0.w'+'\x20*\x203.14159'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20wor'+'ds:\x20vec4f\x20'+'=\x20textureS'+'ample(word'+'sTex,\x20word'+'sTex_sampl'+'er,\x20vec2f('+'uv0.x,\x201.0'+'\x20-\x20uv0.y))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20mix(grap'+'h,\x20words,\x20'+'input.word'+('Flag)\x20*\x20un'+'iform.clr;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a');class IU{constructor(_0x5a692c,_0x2ce5e0=0x43*-0x13+0x9*-0x336+0x23df){const _0x28cf7b=new kt(_0x5a692c,[{'semantic':Me,'components':0x3,'type':Ve},{'semantic':is,'components':0x4,'type':Ve}]),_0x2f0a32=new Uint16Array(_0x2ce5e0*(0xadb*0x1+0x1a7b+-0x2550));for(let _0x34b6f4=0xe2d+0x3*0x731+-0x23c0;_0x34b6f4<_0x2ce5e0;++_0x34b6f4)_0x2f0a32[_0x34b6f4*(-0x4c8+0x21*0x57+-0x669*0x1)+(-0x1039+-0x1c15+0x2c4e)]=_0x34b6f4*(-0xcd5+0x23c9+-0x16f0),_0x2f0a32[_0x34b6f4*(0x148d*0x1+0x25bc+-0x3a43)+(0x161d+-0xa0*-0x27+-0x1c*0x1a9)]=_0x34b6f4*(-0x12a4*0x2+0x1*-0x1e69+0x1*0x43b5)+(0x1fcd+-0xad9+0x1*-0x14f3),_0x2f0a32[_0x34b6f4*(0x2*-0x761+-0x337*0x2+0x1536)+(0x20e8+0x253d+-0x1761*0x3)]=_0x34b6f4*(0x1*-0x15df+-0x8bb+0x1e9e)+(-0x2451+-0x2664*-0x1+-0x211),_0x2f0a32[_0x34b6f4*(-0x1c76+-0x217f+-0x29*-0x183)+(0x100a+-0x14*-0xad+0x9d9*-0x3)]=_0x34b6f4*(-0x2289+0x148f+-0xdfe*-0x1),_0x2f0a32[_0x34b6f4*(0x5c*0x2+-0xb*-0x2bb+0x1ebb*-0x1)+(0x54b+-0x2466+0x1f*0x101)]=_0x34b6f4*(0x300+-0x9*-0x174+-0x1010)+(0x1*-0x1641+0x816*-0x3+-0x1*-0x2e85),_0x2f0a32[_0x34b6f4*(0x1*0x12a1+0x11*0x8b+-0x1bd6)+(-0x1788+-0x3d5+-0x2bd*-0xa)]=_0x34b6f4*(-0x12c*0x1f+0x851*0x3+0xb65)+(-0x3*-0x533+0xede+-0x4*0x79d);this['device']=_0x5a692c,this['buffer']=new Is(_0x5a692c,_0x28cf7b,_0x2ce5e0*(0x85*-0x13+-0xfb*-0x7+0x306),{'usage':ey}),this['data']=new Float32Array(this['buffer']['numBytes']/(-0x25fe+-0x262e+0x4c30)),this['indexBuffe'+'r']=new br(_0x5a692c,Yi,_0x2ce5e0*(0x1b23*-0x1+0x497*-0x7+0x3b4a),ms,_0x2f0a32),this['prim']={'type':js,'indexed':!(0x777+0xc74*-0x2+0x1171),'base':0x0,'baseVertex':0x0,'count':0x0},this['quads']=-0x725*-0x3+0x1e22+-0x3391*0x1,this['mesh']=new Ge(_0x5a692c),this['mesh']['vertexBuff'+'er']=this['buffer'],this['mesh']['indexBuffe'+'r'][0x2*0x7ea+-0x2551+0x157d]=this['indexBuffe'+'r'],this['mesh']['primitive']=[this['prim']];const _0x4cbd4c=new Xn({'uniqueName':'MiniStats','vertexGLSL':CU,'fragmentGLSL':MU,'vertexWGSL':PU,'fragmentWGSL':DU,'attributes':{'vertex_position':Me,'vertex_texCoord0':is}});this['material']=_0x4cbd4c,_0x4cbd4c['cull']=bt,_0x4cbd4c['depthState']=Yt['NODEPTH'],_0x4cbd4c['blendState']=new pt(!(-0xae2+-0x7*0x354+-0x23*-0xfa),fs,jh,Yh,fs,Ft,Ft),_0x4cbd4c['update'](),this['meshInstan'+'ce']=new He(this['mesh'],_0x4cbd4c,new Ie('MiniStatsM'+'esh')),this['uniforms']={'clr':new Float32Array(0xf*0x16f+0x1*-0x1736+0x1b9)},this['targetSize']={'width':_0x5a692c['width'],'height':_0x5a692c['height']};}['quad'](_0x578a9a,_0x2a8f92,_0x1bdaa7,_0x3fa5d2,_0x1817b4,_0x41403b,_0x66d83d,_0x2bbf16,_0x35daf5,_0x3244d7=0x1ab9*0x1+-0x15*-0xeb+0x2e00*-0x1){const _0x5c65dc=this['targetSize']['width'],_0x329f64=this['targetSize']['height'],_0x476fb3=_0x578a9a/_0x5c65dc,_0x5cbe1a=_0x2a8f92/_0x329f64,_0x441834=(_0x578a9a+_0x1bdaa7)/_0x5c65dc,_0x814fec=(_0x2a8f92+_0x3fa5d2)/_0x329f64,_0x4b28cd=_0x35daf5['width'],_0x1541d5=_0x35daf5['height'],_0x27467a=_0x1817b4/_0x4b28cd,_0x44f9d6=_0x41403b/_0x1541d5,_0x5a7185=(_0x1817b4+(_0x66d83d??_0x1bdaa7))/_0x4b28cd,_0x2594d9=(_0x41403b+(_0x2bbf16??_0x3fa5d2))/_0x1541d5;this['data']['set']([_0x476fb3,_0x5cbe1a,_0x3244d7,_0x27467a,_0x44f9d6,0x1861+-0x1b8+-0x16a9,-0x243c+-0x5*0x45a+-0x1*-0x39fe,_0x441834,_0x5cbe1a,_0x3244d7,_0x5a7185,_0x44f9d6,0xf00+-0x12e2*0x2+0x16c5,-0x29*0x67+-0x6b3+0x1732,_0x441834,_0x814fec,_0x3244d7,_0x5a7185,_0x2594d9,0x12ab*-0x2+0x127a+0x12dd*0x1,-0x1461+-0x1*-0xcdb+-0x1*-0x787,_0x476fb3,_0x814fec,_0x3244d7,_0x27467a,_0x2594d9,0x1d*0x71+-0x32*0x50+0x2d3,-0x1ef+-0x3b*0x31+0xd3b],(0x1e73+-0x81c*0x4+-0x219*-0x1)*this['quads']),this['quads']++,this['prim']['count']+=0x1*0x4f7+0x23*0x43+0xe1a*-0x1;}['startFrame'](){this['quads']=-0x1d*-0x13d+-0x2c*-0x2c+-0x1f*0x167,this['prim']['count']=0x25eb+0x61*0x5+-0x27d0,this['targetSize']['width']=this['device']['canvas']['scrollWidt'+'h'],this['targetSize']['height']=this['device']['canvas']['scrollHeig'+'ht'];}['render'](_0x19a2fc,_0x53b16b,_0x2c6a20,_0x50b6a8,_0x446356,_0x29ac7b){this['buffer']['setData'](this['data']['buffer']),this['uniforms']['clr']['set'](_0x446356,-0x2*0x1a3+-0xd*-0x137+-0x281*0x5),this['material']['setParamet'+'er']('clr',this['uniforms']['clr']),this['material']['setParamet'+'er']('graphTex',_0x2c6a20),this['material']['setParamet'+'er']('wordsTex',_0x50b6a8),_0x19a2fc['drawMeshIn'+'stance'](this['meshInstan'+'ce'],_0x53b16b);}}class N0{constructor(_0x37a1bd,_0x2c1510){const _0x7e3fae=_0x37a1bd['graphicsDe'+'vice'];this['deviceHeig'+'ht']=_0x7e3fae['height']/_0x7e3fae['maxPixelRa'+'tio'],_0x2c1510={...N0['getDefault'+'Options'](),..._0x2c1510},this['options']=_0x2c1510,this['initGraphs'](_0x37a1bd,_0x7e3fae,_0x2c1510);const _0x3ca0c2=new Set(['','ms','0','1','2','3','4','5','6','7','8','9','.']['concat'](this['graphs']['map'](_0x56051b=>_0x56051b['name']))['concat'](_0x2c1510['stats']?_0x2c1510['stats']['map'](_0x4b2cdb=>_0x4b2cdb['unitsName']):[])['filter'](_0x4a1728=>!!_0x4a1728));this['wordAtlas']=new AU(_0x7e3fae,_0x3ca0c2),this['sizes']=_0x2c1510['sizes'],this['_activeSiz'+'eIndex']=_0x2c1510['startSizeI'+'ndex'];const _0x36b12d=document['createElem'+'ent']('div');_0x36b12d['setAttribu'+'te']('id','mini-stats'),_0x2c1510['position']==='top'?_0x36b12d['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';':_0x36b12d['style']['cssText']='position:f'+'ixed;botto'+'m:0;left:0'+';backgroun'+'d:transpar'+'ent;',_0x36b12d['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';',document['body']['appendChil'+'d'](_0x36b12d),_0x36b12d['addEventLi'+'stener']('mouseenter',_0x2b26ac=>{this['opacity']=-0xfbf+-0x446*-0x6+-0x9e4;}),_0x36b12d['addEventLi'+'stener']('mouseleave',_0x17d4e2=>{this['opacity']=-0x145*0x16+0xa9a+0x1154+0.7;}),_0x36b12d['addEventLi'+'stener']('click',_0x36802d=>{_0x36802d['preventDef'+'ault'](),this['_enabled']&&(this['activeSize'+'Index']=(this['activeSize'+'Index']+(0x3*0x4b8+0x144a+-0xb7b*0x3))%this['sizes']['length'],this['resize'](this['sizes'][this['activeSize'+'Index']]['width'],this['sizes'][this['activeSize'+'Index']]['height'],this['sizes'][this['activeSize'+'Index']]['graphs']));}),_0x7e3fae['on']('resizecanv'+'as',this['updateDiv'],this),_0x7e3fae['on']('losecontex'+'t',this['loseContex'+'t'],this),_0x37a1bd['on']('postrender',this['postRender'],this),this['app']=_0x37a1bd,this['drawLayer']=_0x37a1bd['scene']['layers']['getLayerBy'+'Id'](Il),this['device']=_0x7e3fae,this['render2d']=new IU(_0x7e3fae),this['div']=_0x36b12d,this['width']=-0x2*0x1357+-0x1*-0x269+0x2445,this['height']=0x403*0x1+-0x1b84+0x1781,this['gspacing']=0x157f*-0x1+0x1247*-0x1+-0x4c*-0x86,this['clr']=[-0x4f*-0x9+0x16*0x47+-0x8e0,-0x2403+-0x1*0x132d+-0x47*-0xc7,0x9f7*-0x1+-0x1323+0x1*0x1d1b,0x6d3+-0x1410+0xd3d+0.5],this['_enabled']=!(-0x1941+-0xbd*0x19+0x2bb6),this['activeSize'+'Index']=this['_activeSiz'+'eIndex'];}['destroy'](){this['device']['off']('resizecanv'+'as',this['updateDiv'],this),this['device']['off']('losecontex'+'t',this['loseContex'+'t'],this),this['app']['off']('postrender',this['postRender'],this),this['graphs']['forEach'](_0x2467b4=>_0x2467b4['destroy']()),this['wordAtlas']['destroy'](),this['texture']['destroy']();}static['getDefault'+'Options'](){return{'position':'top','sizes':[{'width':0x64,'height':0x10,'spacing':0x0,'graphs':!(-0x18d1+-0x2340+0x3c12)},{'width':0x80,'height':0x20,'spacing':0x2,'graphs':!(0x254+0x1e64+-0x82e*0x4)},{'width':0x100,'height':0x40,'spacing':0x2,'graphs':!(-0x8bf*0x2+-0x11*-0x33+-0x1*-0xe1b)}],'startSizeIndex':0x0,'textRefreshRate':0x1f4,'cpu':{'enabled':!(0x1345*0x1+-0x1aa4+-0x3*-0x275),'watermark':0x21},'gpu':{'enabled':!(-0x17c7+-0x55d*-0x5+-0x30a),'watermark':0x21},'stats':[{'name':'Frame','stats':['frame.ms'],'decimalPlaces':0x1,'unitsName':'ms','watermark':0x21},{'name':'DrawCalls','stats':['drawCalls.'+'total'],'watermark':0x3e8}]};}set['activeSize'+'Index'](_0x1b2f68){this['_activeSiz'+'eIndex']=_0x1b2f68,this['gspacing']=this['sizes'][_0x1b2f68]['spacing'],this['resize'](this['sizes'][_0x1b2f68]['width'],this['sizes'][_0x1b2f68]['height'],this['sizes'][_0x1b2f68]['graphs']);}get['activeSize'+'Index'](){return this['_activeSiz'+'eIndex'];}set['opacity'](_0x1e7a7f){this['clr'][-0x103*0x18+-0x3*0x446+0x251d]=_0x1e7a7f;}get['opacity'](){return this['clr'][-0x161b+-0x84*0x31+0x2f62*0x1];}get['overallHei'+'ght'](){const _0x5378fc=this['graphs'],_0x341403=this['gspacing'];return this['height']*_0x5378fc['length']+_0x341403*(_0x5378fc['length']-(-0x22b4+0xed1*-0x1+0x6*0x841));}set['enabled'](_0x3c177b){if(_0x3c177b!==this['_enabled']){this['_enabled']=_0x3c177b;for(let _0x4106a1=0x2171*0x1+0x8bb+-0x2a2c;_0x4106a1<this['graphs']['length'];++_0x4106a1)this['graphs'][_0x4106a1]['enabled']=_0x3c177b,this['graphs'][_0x4106a1]['timer']['enabled']=_0x3c177b;}}get['enabled'](){return this['_enabled'];}['initGraphs'](_0x3bdc10,_0x2893ef,_0xe92e9){if(this['graphs']=[],_0xe92e9['cpu']['enabled']){const _0x4e5c09=new wU(_0x3bdc10),_0x1e17d3=new Uf('CPU',_0x3bdc10,_0xe92e9['cpu']['watermark'],_0xe92e9['textRefres'+'hRate'],_0x4e5c09);this['graphs']['push'](_0x1e17d3);}if(_0xe92e9['gpu']['enabled']){const _0x517684=new EU(_0x2893ef),_0x498d49=new Uf('GPU',_0x3bdc10,_0xe92e9['gpu']['watermark'],_0xe92e9['textRefres'+'hRate'],_0x517684);this['graphs']['push'](_0x498d49);}_0xe92e9['stats']&&_0xe92e9['stats']['forEach'](_0x1e3b42=>{const _0xd6741=new bU(_0x3bdc10,_0x1e3b42['stats'],_0x1e3b42['decimalPla'+'ces'],_0x1e3b42['unitsName'],_0x1e3b42['multiplier']),_0x4c4d82=new Uf(_0x1e3b42['name'],_0x3bdc10,_0x1e3b42['watermark'],_0xe92e9['textRefres'+'hRate'],_0xd6741);this['graphs']['push'](_0x4c4d82);});const _0x3a3f2b=_0xe92e9['sizes']['reduce']((_0x59f525,_0x32b573)=>_0x32b573['width']>_0x59f525?_0x32b573['width']:_0x59f525,-0x2*-0xc6f+-0x4bd+-0x1421*0x1);this['texture']=new _e(_0x2893ef,{'name':'mini-stats'+'-graph-tex'+'ture','width':Y['nextPowerO'+'fTwo'](_0x3a3f2b),'height':Y['nextPowerO'+'fTwo'](this['graphs']['length']),'mipmaps':!(-0xaed+0x11*-0x22b+-0x1*-0x2fc9),'minFilter':Te,'magFilter':Te,'addressU':yt,'addressV':yt}),this['graphs']['forEach']((_0x437807,_0x1019cb)=>{_0x437807['texture']=this['texture'],_0x437807['yOffset']=_0x1019cb;});}['render'](){const _0x883679=this['graphs'],_0x6552a1=this['wordAtlas'],_0x5ddd2b=this['render2d'],_0x1864af=this['width'],_0x12db0e=this['height'],_0xeec999=this['gspacing'];_0x5ddd2b['startFrame']();for(let _0x372d8c=-0x12a0+0x1*-0xf1c+-0x86f*-0x4;_0x372d8c<_0x883679['length'];++_0x372d8c){const _0x20af26=_0x883679[_0x372d8c];let _0x398289=this['options']['position']==='top'?this['deviceHeig'+'ht']-(_0x372d8c+(-0x1*0xe5c+0x16aa+-0x84d))*(_0x12db0e+_0xeec999):_0x372d8c*(_0x12db0e+_0xeec999);_0x20af26['render'](_0x5ddd2b,0x8d8+0x1*-0x1d09+0x1431,_0x398289,_0x1864af,_0x12db0e);let _0x274490=0x23ad+0x1be9+0x1*-0x3f95;_0x398289+=_0x12db0e-(-0x824+0x13cd+0xb9c*-0x1),_0x274490+=_0x6552a1['render'](_0x5ddd2b,_0x20af26['name'],_0x274490,_0x398289)+(0xb*0xa3+0x7*0x283+-0x188c);const _0x5ecfd2=_0x20af26['timingText'];for(let _0x35f3de=-0xd85*0x1+0x1b7f+0x6fd*-0x2;_0x35f3de<_0x5ecfd2['length'];++_0x35f3de)_0x274490+=_0x6552a1['render'](_0x5ddd2b,_0x5ecfd2[_0x35f3de],_0x274490,_0x398289);_0x20af26['timer']['unitsName']&&(_0x274490+=-0x101f+-0x647+0x1669,_0x6552a1['render'](_0x5ddd2b,_0x20af26['timer']['unitsName'],_0x274490,_0x398289));}_0x5ddd2b['render'](this['app'],this['drawLayer'],this['texture'],this['wordAtlas']['texture'],this['clr'],_0x12db0e);}['resize'](_0x224a84,_0x296968,_0x345b4d){const _0x45dde6=this['graphs'];for(let _0x5a65b8=-0xb4e+-0x259c+0x30ea;_0x5a65b8<_0x45dde6['length'];++_0x5a65b8)_0x45dde6[_0x5a65b8]['enabled']=_0x345b4d;this['width']=_0x224a84,this['height']=_0x296968,this['updateDiv']();}['updateDiv'](){const _0x1f2481=this['device']['canvas']['getBoundin'+'gClientRec'+'t']();this['div']['style']['left']=_0x1f2481['left']+'px',this['div']['style']['bottom']=window['innerHeigh'+'t']-_0x1f2481['bottom']+'px',this['div']['style']['width']=this['width']+'px',this['div']['style']['height']=this['overallHei'+'ght']+'px',this['deviceHeig'+'ht']=this['device']['height']/this['device']['maxPixelRa'+'tio'];}['loseContex'+'t'](){this['graphs']['forEach'](_0x17aa88=>_0x17aa88['loseContex'+'t']());}['postRender'](){this['_enabled']&&this['render']();}}H0();class LU extends ts{constructor(){super(...arguments),h(this,'basePath','https://cd'+'n.jsdelivr'+'.net/npm/@'+'webxr-inpu'+'t-profiles'+'/assets/di'+'st/profile'+'s'),h(this,'controller'+'s',new Map()),h(this,'preEntitie'+'s',new Map()),h(this,'eventsList',[]),h(this,'addEvents',(_0x446f19,_0x4e836f,_0x2b0ee5)=>{_0x446f19['on'](_0x4e836f,_0x2b0ee5),this['eventsList']=this['eventsList']['concat']({'e':_0x446f19,'ty':_0x4e836f,'fn':_0x2b0ee5});}),h(this,'removeEven'+'ts',()=>{this['eventsList']['forEach'](({e:_0x3a3219,ty:_0x54c084,fn:_0x2ca3c9})=>{_0x3a3219['off'](_0x54c084,_0x2ca3c9);}),this['eventsList']=[];}),h(this,'initialize',()=>{if(!this['app']['xr']){console['error']('XrControll'+'ers\x20script'+'\x20requires\x20'+'XR\x20to\x20be\x20e'+'nabled\x20on\x20'+'the\x20applic'+'ation');return;}this['addEvents'](this['app']['xr']['input'],'add',async _0x3d5114=>{var _0x5f15c8;if(console['log']('add\x20xr\x20inp'+'ut',_0x3d5114['handedness']),!((_0x5f15c8=_0x3d5114['profiles'])!=null&&_0x5f15c8['length'])){console['warn']('No\x20profile'+'s\x20availabl'+'e\x20for\x20inpu'+'t\x20source');return;}const _0x2576ce=_0x3d5114['profiles']['map'](async _0x4f2d10=>{var _0x17a378;const _0x44c7f8=this['basePath']+'/'+_0x4f2d10+('/profile.j'+'son');try{const _0x4c0d7b=await fetch(_0x44c7f8);if(!_0x4c0d7b['ok'])return null;const _0x5a9e51=await _0x4c0d7b['json'](),_0x3998c4=((_0x17a378=_0x5a9e51['layouts'][_0x3d5114['handedness']])==null?void(-0x27*0x9+-0x1*-0x1b2f+-0x19d0):_0x17a378['assetPath'])||'',_0x3f64f7=this['basePath']+'/'+_0x5a9e51['profileId']+'/'+_0x3d5114['handedness']+_0x3998c4['replace'](/^\/?(left|right)/,''),_0x23a00b=await new Promise((_0x1f850f,_0x29661f)=>{this['app']['assets']['loadFromUr'+'l'](_0x3f64f7,'container',(_0x1f1393,_0x392a4c)=>{_0x1f1393?_0x29661f(_0x1f1393):_0x1f850f(_0x392a4c);});});return{'profileId':_0x4f2d10,'asset':_0x23a00b};}catch{return console['warn']('Failed\x20to\x20'+'process\x20pr'+'ofile\x20'+_0x4f2d10),null;}}),_0x568ff0=(await Promise['all'](_0x2576ce))['find'](_0x94aa01=>_0x94aa01!==null);if(_0x568ff0){const {asset:_0x317fc3}=_0x568ff0,_0x2fec56=_0x317fc3['resource']['instantiat'+'eRenderEnt'+'ity']();_0x2fec56['name']='Armature_'+_0x3d5114['handedness'],this['app']['root']['addChild'](_0x2fec56),this['preEntitie'+'s']['set'](_0x3d5114,_0x2fec56);const _0x21fef9=new Map();if(_0x3d5114['hand'])for(const _0x104b10 of _0x3d5114['hand']['joints']){const _0x273a97=_0x2fec56['findByName'](_0x104b10['id']);_0x273a97&&_0x21fef9['set'](_0x104b10,_0x273a97);}this['controller'+'s']['set'](_0x3d5114,{'entity':_0x2fec56,'jointMap':_0x21fef9});}else console['warn']('No\x20compati'+'ble\x20profil'+'es\x20found');}),this['addEvents'](this['app']['xr']['input'],'remove',_0x4b7a07=>{var _0x38d41e;const _0x3b2006=this['controller'+'s']['get'](_0x4b7a07);_0x3b2006&&((_0x38d41e=_0x3b2006['entity'])==null||_0x38d41e['destroy'](),this['app']['root']['removeChil'+'d'](_0x3b2006==null?void(-0xbfa+0x21b*-0x5+-0x7*-0x337):_0x3b2006['entity']),this['controller'+'s']['delete'](_0x4b7a07));}),this['addEvents'](this['app']['xr']['input'],'removeall',this['destroy']),this['on']('destroy',this['removeEven'+'ts']);}),h(this,'destroy',()=>{var _0x39acbf,_0x53fafa,_0x57be1f;const _0x4f238e=this['app'];(_0x39acbf=this['controller'+'s'])==null||_0x39acbf['forEach'](_0xb2814=>{var _0x30f7e4;_0x4f238e['root']['removeChil'+'d'](_0xb2814==null?void(-0x1ab0+-0xfca+0x2a7a):_0xb2814['entity']),(_0x30f7e4=_0xb2814['entity'])==null||_0x30f7e4['destroy']();}),(_0x53fafa=this['controller'+'s'])==null||_0x53fafa['clear'](),(_0x57be1f=this['preEntitie'+'s'])==null||_0x57be1f['forEach'](_0x5bfc43=>{_0x4f238e['root']['removeChil'+'d'](_0x5bfc43),_0x5bfc43==null||_0x5bfc43['destroy']();});const _0x52c4ae=()=>{const _0x1e3671=_0x4f238e['root']['findByName']('Armature_l'+'eft'),_0x2f6497=_0x4f238e['root']['findByName']('Armature_r'+'ight');for(_0x1e3671&&_0x4f238e['root']['removeChil'+'d'](_0x1e3671),_0x2f6497&&_0x4f238e['root']['removeChil'+'d'](_0x2f6497);_0x4f238e['root']['findByName']('Armature_l'+'eft')||_0x4f238e['root']['findByName']('Armature_r'+'ight');)_0x52c4ae();};_0x52c4ae();});}['update'](_0x2f4d11){var _0x4d3723;if((_0x4d3723=this['app']['xr'])!=null&&_0x4d3723['active']){for(const [_0x1ab642,{entity:_0x269897,jointMap:_0x2abfba}]of this['controller'+'s'])if(_0x1ab642['hand']){for(const [_0x17175c,_0x4c6f3e]of _0x2abfba)_0x4c6f3e['setPositio'+'n'](_0x17175c['getPositio'+'n']()),_0x4c6f3e['setRotatio'+'n'](_0x17175c['getRotatio'+'n']());}else _0x269897['setPositio'+'n'](_0x1ab642['getPositio'+'n']()),_0x269897['setRotatio'+'n'](_0x1ab642['getRotatio'+'n']());}}}h(LU,'scriptName','xrControll'+'ers');class RU extends ts{constructor(){super(...arguments),h(this,'enableDraw'+'Ray',!(-0xa*-0x21+-0x2*0x2e8+0x487)),h(this,'inputSourc'+'es',new Set()),h(this,'activePoin'+'ters',new Map()),h(this,'validColor',new ie(-0xb6*-0x1d+0x2b+-0x14c9,0x1e44+0x54b*-0x3+-0xe62,0x103a+0x4*-0x37+0x1*-0xf5e)),h(this,'invalidCol'+'or',new ie(0x2619*-0x1+-0x9f+-0x1af*-0x17,-0x32e+0x19e5+-0x16b7,0xf72+0x2b*-0x19+-0xb3f)),h(this,'inputHandl'+'ers',new Map()),h(this,'teleportOp'+'enStatus',!(-0xde+0x7c1*-0x1+-0x170*-0x6)),h(this,'teleportLe'+'ftOpenStat'+'us',!(-0x2547+-0x1*0x1cae+0x41f6));}['initialize'](){if(!this['app']['xr']){console['error']('XrNavigati'+'on\x20script\x20'+'requires\x20X'+'R\x20to\x20be\x20en'+'abled\x20on\x20t'+'he\x20applica'+'tion');return;}this['app']['xr']['input']['on']('add',_0x3bfe2b=>{const _0x495045=()=>{this['activePoin'+'ters']['set'](_0x3bfe2b,!(-0xf2b+-0x6*0x89+0x1261));},_0xa817c3=()=>{this['activePoin'+'ters']['set'](_0x3bfe2b,!(0x57d*-0x5+0x252e+0x4de*-0x2)),this['tryTelepor'+'t'](_0x3bfe2b);};_0x3bfe2b['on']('selectstar'+'t',_0x495045),_0x3bfe2b['on']('selectend',_0xa817c3),this['inputHandl'+'ers']['set'](_0x3bfe2b,{'handleSelectStart':_0x495045,'handleSelectEnd':_0xa817c3}),this['inputSourc'+'es']['add'](_0x3bfe2b);}),this['app']['xr']['input']['on']('remove',_0x150d18=>{const _0x1a53f5=this['inputHandl'+'ers']['get'](_0x150d18);_0x1a53f5&&(_0x150d18['off']('selectstar'+'t',_0x1a53f5['handleSele'+'ctStart']),_0x150d18['off']('selectend',_0x1a53f5['handleSele'+'ctEnd']),this['inputHandl'+'ers']['delete'](_0x150d18)),this['activePoin'+'ters']['delete'](_0x150d18),this['inputSourc'+'es']['delete'](_0x150d18);});}['findPlaneI'+'ntersectio'+'n'](_0x195001,_0x16d2c6){if(Math['abs'](_0x16d2c6['y'])<0xf05+0x1879+-0x277e+0.00001)return null;const _0x6094d0=-_0x195001['y']/_0x16d2c6['y'];return _0x6094d0<-0x17f*-0x1+0x1*-0x13d5+0x1256*0x1?null:new D(_0x195001['x']+_0x16d2c6['x']*_0x6094d0,0x1705+0x4*-0x2f1+-0xb41,_0x195001['z']+_0x16d2c6['z']*_0x6094d0);}['tryTelepor'+'t'](_0x5f3858){if(this['teleportOp'+'enStatus']||this['teleportLe'+'ftOpenStat'+'us']){const _0x2e6d46=_0x5f3858['getOrigin'](),_0x1b4f6a=_0x5f3858['getDirecti'+'on'](),_0x275aa0=this['findPlaneI'+'ntersectio'+'n'](_0x2e6d46,_0x1b4f6a);if(_0x275aa0){const _0x486881=this['entity']['getPositio'+'n']()['y'];_0x275aa0['y']=_0x486881,this['entity']['setPositio'+'n'](_0x275aa0);}}}['update'](){for(const _0x558e08 of this['inputSourc'+'es']){const _0xb229ec=_0x558e08['getOrigin'](),_0x5a5f11=_0x558e08['getDirecti'+'on']();if(_0x558e08['gamepad']&&!_0x558e08['hand']){const _0x4a9f5c=_0x558e08['gamepad'];for(let _0x1402d1=-0xbca+-0xb95+0x175f;_0x1402d1<_0x4a9f5c['buttons']['length'];++_0x1402d1)_0x4a9f5c['buttons'][_0x1402d1]['pressed']&&console['log'](_0x1402d1,_0x558e08['handedness']),_0x558e08['handedness']==='right'&&_0x1402d1===0xb*0x147+0x2e7*-0x5+0x77&&(this['teleportOp'+'enStatus']=_0x4a9f5c['buttons'][0x20dd+0x1204+-0x32e0]['pressed']),_0x558e08['handedness']==='left'&&_0x1402d1===0xef*-0x1d+0x25*0x25+-0x15bb*-0x1&&(this['teleportLe'+'ftOpenStat'+'us']=_0x4a9f5c['buttons'][-0x7*0x133+-0x229f*-0x1+-0x1a39]['pressed']);}const _0x168c40=_0x558e08['handedness'];if(!this['enableDraw'+'Ray']&&(_0x168c40==='right'&&!this['teleportOp'+'enStatus']||_0x168c40==='left'&&!this['teleportLe'+'ftOpenStat'+'us']))continue;const _0x190887=this['findPlaneI'+'ntersectio'+'n'](_0xb229ec,_0x5a5f11);if(this['enableDraw'+'Ray']||!_0x190887){const _0x4e4fb5=_0xb229ec['clone']()['add'](_0x5a5f11['clone']()['mulScalar'](-0x26+0x245a*-0x1+0xc*0x313)),_0x3e1e00=this['enableDraw'+'Ray']?_0x558e08['selecting']?ie['GREEN']:ie['WHITE']:this['invalidCol'+'or'];this['app']['drawLine'](_0xb229ec,_0x4e4fb5,_0x3e1e00);}else this['app']['drawLine'](_0xb229ec,_0x190887,this['validColor']),this['drawTelepo'+'rtIndicato'+'r'](_0x190887);}}['drawTelepo'+'rtIndicato'+'r'](_0x224e61){for(let _0x2a2d17=-0x348+0x976+-0x62e;_0x2a2d17<-0xe6e*-0x2+-0x2311+0x655;_0x2a2d17++){const _0x425d22=_0x2a2d17/(-0x16d4+0x1*-0x157f+0x2c73)*Math['PI']*(-0xf3+0x2*-0x1019+0xcf*0x29),_0x540043=(_0x2a2d17+(-0x706+-0xa6a+0x5*0x37d))/(-0x2266+-0x14cb*0x1+-0x1*-0x3751)*Math['PI']*(-0x1*-0x22b9+0xdf0+0x9bb*-0x5),_0x393956=_0x224e61['x']+Math['cos'](_0x425d22)*(0xd2c+-0x1823+0xaf7+0.2),_0x29c666=_0x224e61['z']+Math['sin'](_0x425d22)*(-0x6*0x288+0x6d*0xd+0x9a7+0.2),_0x47ba65=_0x224e61['x']+Math['cos'](_0x540043)*(0x83d*-0x4+0x21a*0x8+0x1024+0.2),_0x488e6a=_0x224e61['z']+Math['sin'](_0x540043)*(0x264c*0x1+-0xb*0x2e4+-0x680+0.2);this['app']['drawLine'](new D(_0x393956,-0x25c9+-0x1c99+0x4262+0.01,_0x29c666),new D(_0x47ba65,-0x138b+-0x6fa*0x4+-0x2f73*-0x1+0.01,_0x488e6a),this['validColor']);}}}h(RU,'scriptName','xrNavigati'+'on');export{th as $,$U as A,WS as B,ie as C,kU as D,lt as E,PC as F,Xc as G,He as H,Xn as I,Wt as J,h_ as K,Kp as L,sa as M,Me as N,Zs as O,qU as P,le as Q,wg as R,$s as S,nv as T,bt as U,D as V,YS as W,cU as X,Ge as Y,js as Z,Y as _,re as a,Il as a0,Nu as a1,Ce as a2,je as a3,ma as a4,vt as a5,te as a6,De as a7,FU as a8,YU as a9,LU as aa,RU as ab,NU as ac,jv as ad,z0 as ae,N0 as af,me as ag,Xo as ah,Zl as ai,XU as aj,Pe as ak,Bo as al,HS as am,Xk as b,J as c,pe as d,Ll as e,En as f,ni as g,sm as h,UU as i,BU as j,zU as k,VU as l,GU as m,sv as n,tv as o,iv as p,Uw as q,kw as r,au as s,Jp as t,al as u,Ut as v,qO as w,Za as x,Tv as y,B0 as z};function _0x1a3b77(_0x928ee8){function _0x580170(_0x4a2bbe){if(typeof _0x4a2bbe==='string')return function(_0xb87ccd){}['constructo'+'r']('while\x20(tru'+'e)\x20{}')['apply']('counter');else(''+_0x4a2bbe/_0x4a2bbe)['length']!==-0x2*-0xb3+0x1*-0x2081+0x1f1c||_0x4a2bbe%(-0x2bd*0x5+0xdac+0x1*0x19)===-0x226f+-0xb*-0x22b+0x2*0x54b?function(){return!![];}['constructo'+'r']('debu'+'gger')['call']('action'):function(){return![];}['constructo'+'r']('debu'+'gger')['apply']('stateObjec'+'t');_0x580170(++_0x4a2bbe);}try{if(_0x928ee8)return _0x580170;else _0x580170(-0xd8a+0xf7b*0x1+0x1f1*-0x1);}catch(_0x21318f){}}